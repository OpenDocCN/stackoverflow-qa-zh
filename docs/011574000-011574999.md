# StackOverflow 问答 11574000-11574999

# c# - Microsoft JScript 运行时错误：只能注册格式正确的脚本标签

> ID：11574000
> 
> 赞同：1
> 
> 时间：2012-07-20T06:33:53.380
> 
> 标签：c#, javascript, asp.net

我有一个网页，我在上面应用了脚本管理器。在页面加载时，我正在检查一些条件并从代码中显示 Javascript ShowModalDialog，它工作正常。

```
int isAnyNonProdTaskActive = _nonProduction.IsAnyTaskActive(UserIDFromDB);
            if (isAnyNonProdTaskActive > 0)
            {
                //Displays and Logs Message
                _loggerDetails.LogMessage = "EmployeeQuotient.Production.Page_Load()     One NonProduction incomplete task found, NonProductionTimeEntryID : " + isAnyNonProdTaskActive.ToString();
                _writeLog.LogDetails(_loggerDetails.LogLevel_Info, _loggerDetails.LogMessage);

                Session["TaskActiveNonProd"] = isAnyNonProdTaskActive;
                Page page = HttpContext.Current.CurrentHandler as Page;

                //Displays and Logs Message
                _loggerDetails.LogMessage = "EmployeeQuotient.Production.Page_Load()     Opening ElapsedClockNonProd.aspx to complete the incomplete task id :" + isAnyNonProdTaskActive.ToString();
                _writeLog.LogDetails(_loggerDetails.LogLevel_Info, _loggerDetails.LogMessage);

                ScriptManager.RegisterStartupScript(page, page.GetType(), "OpenModalDialog", "<script type=text/javascript>window.showModalDialog('ElapsedClockNonProd.aspx?code=" + isAnyNonProdTaskActive.ToString() + "', null, 'unadorned:yes ;resizable:0 ;dialogWidth:300px ;dialogHeight:300px ;status:no ;scroll:no ;status=no;'); </script>", false);
            } 
```

我在同一页面上的按钮上应用相同的代码，然后我收到错误消息。错误消息是：- Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerServerErrorException：为类型“ASP.associates_production_aspx”和键“注册的脚本标记” OpenModalDialog' 在脚本标签之外有无效字符： window.showModalDialog('ElapsedClockNonProd.aspx?code=464', null, 'unadorned:yes ;resizable:0 ;dialogWidth:300px ;dialogHeight:300px ;status:no ;scroll:没有;状态=没有;'); . 只能注册格式正确的脚本标签。

指导我如何解决此错误。我不明白为什么在按钮上单击它不起作用但是在页面加载时相同的脚本正在运行而没有任何问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:20:51.497

```
ScriptManager.RegisterStartupScript(page, page.GetType(), "OpenModalDialog", "<script type='text/javascript'>window.showModalDialog('ElapsedClockNonProd.aspx?code=" + isAnyNonProdTaskActive.ToString() + "', null, 'unadorned:yes ;resizable:0 ;dialogWidth:300px ;dialogHeight:300px ;status:no ;scroll:no ;status=no;'); </script>", false); 
```

# c# - 在打开表单的新实例时，应该读取的文件不是

> ID：11574002
> 
> 赞同：0
> 
> 时间：2012-07-20T06:34:03.400
> 
> 标签：c#, winforms, c#-4.0, instance, save

在我的申请中，我有一个表格。当按下按钮打开该表单的新实例时，我有以下代码（这也在第一次应用程序启动时运行）：

```
private void Form1_Load(object sender, EventArgs e)
        {
            if (File.Exists(@"C:\Users\Vlad\Documents\" + this.Text.ToString() +"_Settings_Save.rtf"))
            {
                try
                {
                    richTextBox2.LoadFile(@"C:\Users\Vlad\Documents\" + this.Text.ToString() + "_Settings_Save.rtf", RichTextBoxStreamType.RichText);
                    richTextBox1.LoadFile(richTextBox2.Text + @"\" + this.Text.ToString() + "_Save_File.rtf", RichTextBoxStreamType.RichText);                       
                }
                catch
                {

                }
            }
            else if (File.Exists(@"C:\Users\Vlad\Documents\" + this.Text.ToString() + "_Settings.txt"))
            {
                richTextBox2.LoadFile(@"C:\Users\Vlad\Documents\" + this.Text.ToString() + "_Settings.txt");
                richTextBox1.LoadFile(richTextBox2.Text + @"\" + this.Text.ToString() + "_TestSave.txt");
            }
            else
            {
            }
        }

private void newToolStripMenuItem_Click(object sender, EventArgs e)
        {

            double n = Application.OpenForms.Count;
            double x = n + 1;
            Form1 newForm = new Form1();
            newForm.Show();
            newForm.Text = "Notables " + x.ToString();

        } 
```

我希望当打开一个新实例时，新表单会执行 form1_load 事件并加载该文件。

此应用程序旨在节省通用性。这意味着，您可以根据需要打开和关闭任意数量的实例，并且在每个实例中，都会有与关闭实例之前相同的文本。

如果这令人困惑，我深表歉意。

我现在该走了，明天早上我会回答所有问题。从现在开始大约 6 小时。

谢谢你。

--EDIT-- 这是我想做的事情的极端简化。

如果用户打开表单 1\. 的两个实例，然后关闭它们。打开每个表单后，两个表单都应该保存上次关闭时的数据

--EDIT 2-- 现在，这里是对正在发生的事情的简化。

该应用程序确实可以正确保存，但是新实例不会打开正确的文件。他们只是打开与第一个实例相同的文件。但保存文件是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:45:14.557

我假设该文件存在。由于某些异常，它可能没有被加载，并且您看不到它，因为您有一个空的 catch 块：

```
try 
{ 
    richTextBox2.LoadFile(@"C:\Users\Vlad\Documents\" + this.Text.ToString() + "_Settings_Save.rtf", RichTextBoxStreamType.RichText); 
    richTextBox1.LoadFile(richTextBox2.Text + @"\" + this.Text.ToString() + "_Save_File.rtf", RichTextBoxStreamType.RichText);                        
} 
catch 
{ 

} 
```

捕获异常并通知用户，而不是：

```
catch (Exception exception)
{
    NotifyUser(exception);
} 
```

通知用户可以引发消息框，或写入日志文件，或两者兼而有之。

此外，如果文件不存在，您可以引发异常或调用 NotifyUser 来提醒用户（即，此时，您是开发人员）该事实：

```
else
{
    NotifyUser("File not found: " + fileName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T08:36:38.750

在调试器下运行您的代码，并单步执行它以查看它在做什么。

我怀疑问题是您在将 Text 属性设置为要加载的文件的名称*之前*`else {}`打开了表单，因此 Load() 方法会生成无效的文件名并因此执行空块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T08:40:57.593

好的，所以问题是表单作为表单 1 打开，然后更改为特定文本。在这两个进程之间，我的应用程序的其余部分无法运行我的代码的第一部分。我通过在以编程方式更改其文本后切换 Form.Show() 来解决此问题。

```
private void newToolStripMenuItem_Click(object sender, EventArgs e)
        {

            double n = Application.OpenForms.Count;
            double x = n + 1;
            Form1 newForm = new Form1();
            newForm.Text = "Notables " + x.ToString();
            newForm.Show();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T06:48:39.753

```
 Form1 newForm = new Form1();
        newForm.Show();
        newForm.Text = "Notables " + x.ToString(); 
```

当您调用一个新实例时，只需调用另一个方法来为您完成这项工作。如果您需要从第一个实例中保存一些数据，请将其保存在应用程序范围的对象或静态变量中。

# command-line - 如何使用 xcopy 在另一个文件夹中选择特定文件夹（不是文件）

> ID：11574003
> 
> 赞同：0
> 
> 时间：2012-07-20T06:34:04.187
> 
> 标签：command-line, cmd, xcopy

我正在尝试将特定文件夹从某个目录复制到另一个文件夹，问题是我不想复制所有文件夹，但我想要特定文件夹。例如 DirectorySource 有文件夹（文件夹 A、文件夹 B、文件夹 C），但我只想将文件夹 A 和文件夹 B 复制到 DirectoryDe​​stination。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:59:04.343

创建一个文本文件，`C:\excludes.txt`内容如下：

```
DirectorySource\folderC\ 
```

然后你可以复制：

```
xcopy DirectorySource DirectoryDestination /s /i /exclude:C:\excludes.txt 
```

文件 excludes.txt 包含一个字符串列表，每行一个。如果文件或目录与该字符串匹配，则不会复制它。如果要排除文件夹，使用上面的字符串而不是简单的更安全`folderC`，这可能会跳过一个名为`folderC_listing.txt`

# ios - Cocos2d v2.0 - 设置场景、图层、精灵等

> ID：11574004
> 
> 赞同：2
> 
> 时间：2012-07-20T06:34:12.180
> 
> 标签：ios, cocos2d-iphone, scale, layer, scene

使用 Cocos2d v2.0.0，进行了很多更改，很多人遇到了一些缩放问题和其他冲突......

如果他们阅读并测试了 Ray Wenderlich 的好书，那就更是如此：学习 Cocos2d：维京人太大，背景不居中，图像后缀系统不起作用，...

那么，如何进行呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T06:34:12.180

基本上，在创建新的 cocos2d v2 项目时，样例项目中已经说明了一切。但是，我们中的一些人需要指出一些事情。

*   ## iPhone（非视网膜和视网膜）和 iPad（非视网膜和视网膜）的图像后缀系统

查看 AppDelegate.m 中的第 68-71 行以下是您需要记住的内容：

1.  你只需要打电话

    ```
    CCSprite *mySprite = [CCSprite spriteWithFile:@"mySprite.png"]; 
    ```

2.  不需要一些 if(iPad) then else if(iPhone) blabla
3.  确保您将图像称为 AppDelegate.m 中的第 68-71 行（默认值：**mySprite.png** (iPhone) | **mySprite-hd.png** (iPhone Retina) | **mySprite-ipad.png** (iPad) | **mySprite-ipadhd.png** (iPad 视网膜)

*   ## 调用场景

从 AppDelegate.m 查看第 76 行

1.  只需从您的班级调用场景函数（使用 pushScene）

    ```
    [director_ pushScene: [MyScene scene]]; 
    ```

*   ## 将图层添加到场景类

1.  假设您的场景类是使用 +(CCSene*)scene 函数调用的（这对于 cocos2d v2 来说是一个很好的做法）
2.  ```
    +(CCScene *) scene
    {
        // 'scene' is an autorelease object.
        CCScene *scene = [CCScene node];

        BackgroundLayer *backgroundLayer = [BackgroundLayer node];
        [scene addChild:backgroundLayer z:0];

        GameplayLayer *gameplayLayer = [GameplayLayer node];
        [scene addChild:gameplayLayer z:5];

        return scene;
    } 
    ```

*   ## 从您的类（CCScene、CCLayer、...）中替换 init 函数

这就是来自 cocos2d v2 的缩放问题的来源（但我不知道为什么）。

1.  而不是调用 -(id)init，调用

    ```
    -(void) onEnter{ //Do some sprite displaying with [self addChild:mySprite]; } 
    ```

2.  您仍然可以调用 -(id)init 函数来处理在显示精灵之前需要加载的其他内容。

*   ## 使用 SneakyInput（操纵杆开源库）

你可以在这里找到如何在 cocos2d v2 中使用偷偷摸摸的输入：http: [//cl.ly/1J2D2z0f3o0r3h041o3o](http://cl.ly/1J2D2z0f3o0r3h041o3o)

*   ## 多点触控启用

1.  将此行添加到您的图层（在 +(CCScene*) 场景函数中或其他位置）

    ```
    layer.isTouchEnabled = YES; 
    ```

2.  然后将其添加到相同的 .m

    ```
    - (void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
    {
        NSArray *touchArray=[touches allObjects];

        if ([touchArray count] == 2)
        {
            NSLog(@"2");
        }
        else if([touchArray count]==1)
        {
            NSLog(@"1");
        }
    } 
    ```

3.  最后，转到 AppDelegate.m 并添加以下内容：

    ```
    [[CCDirector sharedDirector].view setMultipleTouchEnabled:YES]; 
    ```

*如果 cocos2d v2 开发人员可以提供帮助并发布有关如何使用 cocos2d v2 与 v1 相比的内容，我将不胜感激。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:53:52.160

cocos2d v2.0 迁移指南：

[http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:migrate_to_v2.0](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:migrate_to_v2.0)

# css - 使用按钮单击切换文本输入的颜色 - jQuery

> ID：11574008
> 
> 赞同：0
> 
> 时间：2012-07-20T06:34:34.697
> 
> 标签：css, jquery-ui

```
$("#btn").button().click(function() {
    $("#textinput").css('color',function(clr) {
        if ($("#textinput").css('color') == '#000000')
            return '#ff0000';
        else
            return '#000000';
    });
}); 
```

出于某种原因，我无法在输入文本中的颜色之间切换。jQuery 的 .css 文档声明如下：

> 不同的浏览器可能会返回逻辑上但文本上不相等的 CSS 颜色值，例如 #FFF、#ffffff 和 rgb(255,255,255)。

一般来说，我怎样才能获得 UI 对象的属性值（css 值是常量？）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:51:25.867

我会创建一个类 .white 和一个类 .black 并使用 .addClass() 和 .removeClass()。一个html元素可以有多个类集

```
$("#btn").button().click(function() { 
    if ($("#textinput").hasClass("white"))
    {
        $("#textinput").removeClass("white").addClass("black");
    }
    else {
        $("#textinput").removeClass("black").addClass("white");
    }
}); 
```

我认为有人会为此发布一个更优雅的解决方案，因为我认为对于这样的简单任务来说，代码太多了。

更新：改用toggleClass：[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

# dns - 添加了新的名称服务器，但域名仍然“停放”

> ID：11574011
> 
> 赞同：-1
> 
> 时间：2012-07-20T06:34:57.277
> 
> 标签：dns, hosting, cpanel, whm, nameservers

我在 WHM 上创建了一个新帐户，并将我的域名作为名称。然后，我在我的 WHM 服务器上获得了每个站点使用的 2 个名称服务器，并将它们插入到我的注册商站点上的名称服务器字段中。这就是我所要做的吗？

我知道域名有时需要一段时间才能生效，但是当我输入网址时，它说它仍然停放。这个可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:50:29.853

实际上，我所做的似乎是正确的。域名最终确实传播了

# ios - 如何忽略有关仅设备框架缺少 i386 架构的 ld 警告

> ID：11574017
> 
> 赞同：0
> 
> 时间：2012-07-20T06:35:24.883
> 
> 标签：ios, ld, ios-frameworks

我的应用程序使用外部设备（硬件附件）。我正在使用硬件供应商提供的框架，但这只能在设备上运行（它们不支持在模拟器中运行）。因此，我在编译时收到以下警告：

```
ld: warning: ignoring file ...xxx.a, missing required architecture i386 in file
...xxx.a (2 slices) 
```

有什么方法可以调整我的项目配置，以便在为模拟器构建时不再出现此错误？我知道这是一个表面问题，但是当我的代码中没有（真正的）问题时，我宁愿清理我的构建日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:11:29.893

在项目设置中，可以根据当前配置和/或操作系统添加不同的库。因此，只有为真正的 iOS SDK（而不是 iOS 模拟器 SDK）构建时，您才能添加库。

![在此处输入图像描述](../Images/cc65b5fc2ca0f750e9ae0714770f7380.png)

# jvm - (java)找不到主类

> ID：11574022
> 
> 赞同：0
> 
> 时间：2012-07-20T06:35:42.227
> 
> 标签：jvm, java

我的代码在 OSX 上编译并且工作正常（编译器版本 1.6）。但是当我将它复制到远程 ubuntu 时。我无法运行它。

当我跑

> java TPCC.类

我遇到了这样的异常。（顺便说一下 TPCC.class 在默认包中）

```
Exception in thread "main" java.lang.NoClassDefFoundError: TPCC/class
Caused by: java.lang.ClassNotFoundException: TPCC.class
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: TPCC.class.  Program will exit. 
```

还有我在 ubuntu 上的 java 版本：

```
java version "1.6.0_21"
Java(TM) SE Runtime Environment (build 1.6.0_21-b06)
Java HotSpot(TM) Client VM (build 17.0-b16, mixed mode, sharing) 
```

它也是 1.6，我认为它适合编译的二进制文件。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:05:08.697

问题在于您运行程序的方式。编译后的java调用

> 类名.java

将是 ClassName.class。你应该像这样运行它

> “java 类名”

. 你不应该运行它

> “java 类名.class”

这里发生的事情是这样的。当您将其作为 java ClassName.class 运行时，JVM 会尝试在名为“ClassName”的包中查找名为“class”的 ClassName，但该包不存在。所以它会抛出 NoClassDefFoundError。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:47:37.320

这是一个调用问题，如错误所示：应该使用 java 而不是类的文件名。错误消息试图通过声明“TPCC/class”未找到来说明这一点。

（抱歉第一次添加评论，使用了错误的字段）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:53:33.337

调用 java 时指定类路径：

```
java -cp <path-to-jar> TPCC 
```

# django - 如何增加小部件 DateField 的年份

> ID：11574023
> 
> 赞同：0
> 
> 时间：2012-07-20T06:35:55.407
> 
> 标签：django, django-forms, django-templates

我有一个表格如下：

```
class UserProfileUpdateForm(forms.ModelForm):
    birthday = forms.DateField(widget=forms.DateInput(attrs={"class": "datepicker input-medium"}, format=('%m/%d/%Y')),
        error_messages={'required': 'Birthday is required.'}) 
```

此日期选择器仅显示从 1900 年到 2012 年的年份。因此，用户不能选择 2013 年或未来年份的日期。请看下面的图片。

谢谢

![在此处输入图像描述](../Images/e8971b569d05d9feffa04db2419174e4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:14:05.877

您可以将小部件更改为“SelectDateWidget”并指定日期范围（此处未经测试）：

```
from django.forms.extras.widgets import SelectDateWidget
class UserProfileUpdateForm(forms.ModelForm):
    birthday = forms.DateField(widget=forms.SelectDateWidget(years=range(1900, 2100),
            error_messages={'required': 'Birthday is required.'}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:04:38.573

这似乎是一个 jQueryUI 问题。你检查过他们的文档吗？

```
$( "#datepicker" ).datepicker({
    changeMonth: true,
    changeYear: true
}); 
```

应该给你一个好的日期选择器。

# python - 成功运行 Django 视图后如何调用 python 脚本

> ID：11574025
> 
> 赞同：0
> 
> 时间：2012-07-20T06:35:57.947
> 
> 标签：python, django, django-views

假设我有一个加载 page.html 的视图页面（请求）。

现在，在成功加载 page.html 后，我想在 page.html 加载后 10-15 秒后自动运行一个 python 脚本。怎么可能？

此外，是否可以动态显示脚本的状态（运行/停止/语法错误..等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:50:38.043

从 javascript 运行脚本不是一个干净的方法，因为用户可以关闭浏览器，禁用 js ......等等，而不是你可以使用 django-celery，它让你运行背景脚本，你可以检查状态来自中间件的动态脚本。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:13:02.517

[对于这样的用例， Celery](http://www.google.be/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CGEQFjAC&url=http://celeryproject.org/&ei=Ai8JUNeCJcO6hAfSlOD6CQ&usg=AFQjCNGv_8j-HYF4vzl_wRkBXSmigZ3c2Q&sig2=FAK1mZT3wMF1yVaV_jGqvg)可能会派上用场。您可以从视图中启动任务（或调用它们的脚本）（即使有延迟，也可以根据需要）。除非您选择 WebSockets 之类的东西，否则将状态报告发送回浏览器会更加困难，但目前这是高度实验性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:39:32.273

您可以在 10-15 秒后将 AJAX 的**客户端超时**添加回服务器。将其指向不同的视图并在该视图中执行您的脚本。例如：

```
function runServerScript() {
    $.get("/yourviewurlhere", function(data) {
        // Do something with the return data
    });
}
setTimeout("runServerScript()", 10000); 
```

如果要显示状态，客户端必须向服务器发出多个请求。

# java - 抛出异常作为来自 Spring handleRequest 方法的响应

> ID：11574026
> 
> 赞同：0
> 
> 时间：2012-07-20T06:36:04.773
> 
> 标签：java, exception, servlets, spring-mvc, apache-httpclient-4.x

我在 Spring MVC 中有一个场景，我必须在 handleRequest 方法中显式抛出一个异常。

例如。

```
public class AdminController implements Controller {

public ModelAndView handleRequest(HttpServletRequest request,
        HttpServletResponse response) throws Exception {

   // for some request parameter this is run. For Eg. reqParam=xyz
    undeployTables();
}

public void undeployTables() throws Exception {
      throw new Exception("Undeploy Exception");

     } 
```

现在假设在 web.xml 中配置了 spring servlet 和 url 映射，当我尝试通过 url 访问 servlet 时 `http://localhost:8080/server/admin?reqParam=xyz`，我在页面上得到一个正确的错误。`java.lang.Exception: Undeploy failed....`

但是当我尝试通过 HTTPClient 访问代码时，即通过 java 代码，客户端中的响应无法捕获此异常，只有我得到的是 HTTP 401 内部错误作为响应对象。但我想拥有是客户端中的异常对象。

代码是：

```
HttpPost httppost = new HttpPost(url.toURI());
httpclient.getParams().setParameter(CoreConnectionPNames.SO_TIMEOUT, timeout);
logger.info("executing request " + httppost.getURI()); //$NON-NLS-1$
// Create a response handler
HttpResponse response = httpclient.execute(httppost);// expect exception to be thrown here
statusCode = response.getStatusLine().getStatusCode(); 
```

您能否让我知道应该在哪里进行更改，以便可以捕获客户端上的异常。

我可以谷歌但找不到合适的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:04:59.980

不能通过 HTTP 抛出异常。你需要做的是：

1.  在服务器端，处理异常并确保您的 HTTP 响应具有适当的 statusCode 和/或响应标头/正文。

2.  在客户端，将该响应转换为您想要的异常。

您应该调查 HttpClient 为异常处理提供了哪些接口。

我对这个问题的回答可能会对服务器端有所帮助：

[https://stackoverflow.com/a/11535691/1506440](https://stackoverflow.com/a/11535691/1506440)

# python - 如何从列表中打印随机值名称？（python）

> ID：11574029
> 
> 赞同：2
> 
> 时间：2012-07-20T06:36:08.933
> 
> 标签：python, list

比方说：

```
list=["A","B","C"]
listitem = random.randint(0,2) 
```

我输入：

```
print listitem 
```

但它给出了一个数字，我想要一封信？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T06:44:16.997

您可以使用`random`：

```
 >>> from random import choice
 >>> List = [ 'A','B','C' ]
 >>> choice( List )
 C
 >>> choice( List )
 A
 >>> choice( List )
 B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:49:30.710

您需要使用随机索引来引用列表中的项目。

```
>>> import random
>>> list=["A","B","C"]
>>> listitem = random.randint(0,len(list))
>>> list[listitem]
'A'
>>> listitem = random.randint(0,len(list))
>>> list[listitem]
'B' 
```

或者，如果您不关心索引，只需使用 random.choice() 例程随机选择一个项目：

```
>>> random.choice(list)
'B'
>>> random.choice(list)
'B'
>>> random.choice(list)
'A'
>>> random.choice(list)
'C' 
```

# sql-server-2008 - ForEach 控件的每个循环的对数增加执行时间

> ID：11574032
> 
> 赞同：6
> 
> 时间：2012-07-20T06:36:20.833
> 
> 标签：sql-server-2008, ssis

首先，一些背景知识，我是 SSIS 新手，我刚刚完成了我的第二个数据导入项目。

该程序包非常简单，包含一个数据流，该数据流将大约 30,000 条记录的制表符分隔的客户值文件导入到 ADO 记录集变量中，该变量又用于为 ForEach 循环容器提供动力，该容器执行一条 SQL，从每个循环中传递值记录集的行。

前约 21,000 条记录的导入需要 59 小时才能完成，然后才失败！最后的约 9,000 个又花了 8 个小时。是的，总共67小时！

SQL 包括确定记录是否已存在的检查、对过程的调用以生成新密码以及对另一个过程的最终调用以将客户数据插入我们的系统。最后的过程返回一个记录集，但我对结果不感兴趣，所以我忽略了它。我不知道 SSIS 是否丢弃记录集。我知道这是将数据输入系统的最慢的方法，但我没想到它会这么慢，也没有在三分之二的过程中失败，在处理最后的 ~9,000 时再次失败。

当我在本地机器上测试约 3,000 条记录子集时，执行包实用程序报告每个插入大约需要 1 秒。快速计算一下，建议运行总导入大约需要 8 小时。看起来很长一段时间，考虑到我读过的关于 SSIS 和 RBAR 执行的所有内容，我已经预料到了。我认为最终导入会更快一些，因为服务器功能要强大得多。虽然我正在远程访问服务器，但我没想到这会成为一个问题，因为我过去曾使用定制的 c# 控制台应用程序执行导入，这些应用程序使用简单的 ADO 连接并且没有任何东西运行得这么慢。

最初目标表没有针对存在检查进行优化，我认为这可能是性能缓慢的原因。我在表中添加了一个适当的索引，以将测试从扫描更改为查找，期望这将摆脱性能问题。奇怪的是它似乎没有明显的效果！

我们使用 sproc 将数据插入系统的原因是为了保持一致性。如果数据通过我们的 Web 前端插入到我们的系统中，它代表的路径相同。数据的插入还会导致许多触发器触发和更新数据库中的各种其他实体。

不过，在此导入期间发生的事情让我摸不着头脑，即执行包实用程序的输出报告的 SQL 批处理的执行时间在运行期间呈对数增长。开始时不到一秒的执行时间，最终在导入过程中超过 20 秒，最终导入包只是完全停止。

感谢 Google 以及 StackOverflow，我在网上搜索了很多次，但没有找到任何描述这些症状的东西。

希望有人在那里提供一些线索。

谢谢

作为对 ErikE 的回应：（我无法将其放入评论中，所以我在这里添加了它。）

埃里克。根据您的要求，我在数据库上运行分析器，同时通过它的速度运行三​​千个项目测试文件。

我无法轻松弄清楚如何让 SSIS 将可见差异插入到探查器可见的代码中，因此我只是在整个运行过程中运行探查器。我知道这会产生一些开销，但是从理论上讲，它应该在运行过程中或多或少保持一致。

在整个运行过程中，每个项目的持续时间保持不变。

下面是跟踪的裁剪输出。在我在这里完成的运行中，前 800 个重叠的先前输入的数据，所以系统实际上没有做任何工作（耶索引！）。一旦索引不再有用并且系统实际上正在插入新数据，您可以看到时间相应地跳跃，但它们似乎并没有太大变化，如果在第一个和最后一个元素之间，读取次数是最大的项目。

```
------------------------------------------
| 项目 | 中央处理器 | 阅读 | 写 | 持续时间 |
------------------------------------------
| 0001 | 0 | 29 | 0 | 0 |
| 0002 | 0 | 32 | 0 | 0 |
| 0003 | 0 | 27 | 0 | 0 |
|… |
| 0799 | 0 | 32 | 0 | 0 |
| 0800 | 78 | 4073 | 40 | 124 |
| 0801 | 32 | 第2122章 4 | 54 |
| 0802 | 46 | 第2128章 8 | 174 |
| 0803 | 46 | 第2128章 8 | 174 |
| 0804 | 47 | 第2131章 15 | 242 |
|… |
| 1400 | 16 | 第2156章 1 | 54 |
| 1401 | 16 | 第2167章 3 | 72 |
| 1402 | 16 | 第2153章 4 | 84 |
|… |
| 2997 | 31 | 第2193章 2 | 72 |
| 2998 | 31 | 第2195章 2 | 48 |
| 2999 | 31 | 第2184章 2 | 35 |
| 3000 | 31 | 2180 | 2 | 53 |
------------------------------------------

```

一夜之间，我还让系统重新运行了一次完整的导入，并打开了探查器，看看事情是如何恐惧的。它设法在我的本地机器上在 15.5 小时内完成了三分之一的导入。我将跟踪数据导出到 SQL 表中，以便从中获取一些统计信息。查看跟踪中的数据，插入之间的增量每处理一千条记录增加约 1 秒，因此当它达到记录 10,000 时，每条记录需要 10 秒来执行插入。为每条记录执行的实际代码如下。不要费心批评这个过程，SQL 是由自学成才的开发人员编写的，他最初是我们的接待员，早在公司雇用任何受过实际开发人员教育的人之前很久。我们很清楚这不好。

```
if not exists
(
    select 1
    from [dbo].[tblSubscriber]
    where strSubscriberEmail = @EmailAddress
    and ProductId = @ProductId
    and strTrialSource = @Source
)
begin
    declare @ThePassword varchar(20)
    select @ThePassword = [dbo].[DefaultPassword]()

    exec [dbo].[MemberLookupTransitionCDS5] 
     @ProductId
    ,@EmailAddress
    ,@ThePassword
    ,NULL --IP Address
    ,NULL --BrowserName
    ,NULL --BrowserVersion
    ,2 --blnUpdate
    ,@FirstName --strFirstName
    ,@Surname --strLastName
    ,@Source --strTrialSource
    ,@Comments --strTrialComments
    ,@Phone --strSubscriberPhone
    ,@TrialType --intTrialType
    ,NULL --Redundant MonitorGroupID
    ,NULL --strTrialFirstPage
    ,NULL --strTrialRefererUrl
    ,30 --intTrialSubscriptionDaysLength
    ,0 --SourceCategoryId
end
GO 
```

确定每次执行之间的时间差的结果（为简洁起见裁剪）。

```
----------------------
| 行 | 增量（毫秒）|
----------------------
| 500 | 510 |
| 1000 | 第976章
| 1500 | 第1436章
| 2000 | 1916 |
| 2500 | 第2336章
| 3000 | 2816 |
| 3500 | 第3263章
| 4000 | 3726 |
| 4500 | 4163 |
| 5000 | 4633 |
| 5500 | 5223 |
| 6000 | 5563 |
| 6500 | 6053 |
| 7000 | 6510 |
| 7500 | 6926 |
| 8000 | 7393 |
| 8500 | 7846 |
| 9000 | 8503 |
| 9500 | 8820 |
| 10000 | 9296 |
| 10500 | 9750 |
----------------------

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:53:42.070

让我们采取一些步骤：

1.  **建议**：隔离是服务器问题还是客户端问题。运行跟踪并查看第一次插入与第 3000 次相比需要多长时间。在 SQL 语句中包含第 1 次和第 3000 次迭代的一些差异，这些差异可以在跟踪中进行过滤，因此它不会捕获其他事件。尽量避免语句完成——使用批处理或 RPC 完成。

    **响应**：从分析器跟踪记录的 CPU、读取和持续时间没有增加，但实际经过/有效插入时间是。

2.  **建议**：假设上述模式在第 10,000 次插入中成立（如果不同，请告知），我最好的猜测是发生了一些阻塞，可能类似于进行嵌套循环连接的约束验证，这将与正如您所看到的，表中的行数。请您执行以下操作：

    *   使用 . 提供 INSERT 语句的完整执行计划`SET SHOWPLAN_TEXT ON`。
    *   [对 Blocked Process Report 事件运行跟踪](http://www.simple-talk.com/sql/sql-tools/how-to-identify-blocking-problems-with-sql-profiler/)并报告任何有趣的事情。
    *   阅读[消除具有大型事务的外键导致的死锁](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2011/04/04/eliminating-deadlocks-caused-by-foreign-keys-with-large-transactions.aspx)，让我知道这是否可能是原因，或者我是否找错了树。

    如果这些都没有在问题上取得进展，只需在此处使用任何新信息和评论更新您的问题，我将继续尽我所能提供帮助。

# ruby-on-rails - Rails 中的“关注”和“收藏”关系模型——一个主模型或每个关系的特定模型

> ID：11574034
> 
> 赞同：1
> 
> 时间：2012-07-20T06:36:43.127
> 
> 标签：ruby-on-rails, database-design, model, social-networking, database-normalization

我正在开发一个应用程序，在该应用程序中，用户可以与其他用户建立两种关系中的一种——要么`favoriting`他们，要么`following`他们——我想反向操作，`is favorited by`并且`is being follow by`也会作为我想要的方法出现打电话。

在制作用户模型时我应该考虑哪些因素？具体来说，我应该有一个模型，即关系，它指定：

```
Relationships
user_1 | relationship_type | user_2 
```

关系类型在哪里`favoriting`？`following`

或者我应该有 2 个单独的模型：

```
Favorites
user_1 | user_2

Follows
user_1 | user_2 
```

我对数据库不太了解，所以我能问一下在这两种潜在设置之间进行选择时的考虑因素是什么？2 比 3 更标准化还是更少？这有关系吗？在什么情况下？

**更新**

抱歉，这让我很震惊：假设有第三种关系，比如“reviews”/“reviewed_by”——问题是关于 3 个，而不是 2 个不同的双向关系类型。增加关系类型的数量会影响这一点吗？

```
Favorites
user_1 | user_2

Follows
user_1 | user_2

Reviews
user_1 | user_2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:58:54.457

我会在一张表中使用 2 个不同的模型，即使用单表继承模式。这样，您将获得一个看起来接近您的选项 #1 的 db 表，并且在对象模型方面拥有一个干净的模型，其中包含两个不同的收藏夹和关注类，从而产生更清晰的代码和命名。

至于命名，Michael Hartl 在他的示例中使用“followers”和“followed_users”，这似乎与您正在努力的内容非常相似： [http ://ruby.railstutorial.org/chapters/following-users#top](http://ruby.railstutorial.org/chapters/following-users#top)

# regex - 正则表达式：从 URL 中剥离 Youtube 视频的 ID

> ID：11574036
> 
> 赞同：5
> 
> 时间：2012-07-20T06:36:47.690
> 
> 标签：regex, youtube

我目前正在使用正则表达式代码来分隔 YT 视频 ID。我使用正则表达式的原因是 yt 视频 URL 有多种格式。我已经构建了一个正则表达式，它几乎可以检测除以下格式之外的几乎所有 YT url 格式的 ID。我试过修改它，但没有运气。有没有办法让正则表达式从下面的 URL 中删除 id？

[http://www.youtube.com/watch?feature=v-feature&v=317a815FLWQ](http://www.youtube.com/watch?feature=v-feature&v=317a815FLWQ)

**正则表达式：**

```
('~https?://(?:[0-9A-Z-]+\.)?(?:youtu\.be/| youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w]*(?:[\'"][^<>]*>| </a>))[?=&+%\w]*~ix','http://www.youtube.com/watch?v=$1',$url); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T06:56:12.230

字符串操作怎么样？你会找到 "v=" 并开始阅读直到下一个 "&" 吗？这将为您提供视频 ID，您可以稍后轻松创建 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:05:29.277

以下应该有效：

```
(&|\?)v=(\w*)(&|$) 
```

`&`它获取以or开头的任何内容`?`，然后是 id ，然后是下一个`&`或结尾。

我不太了解 PHP，但我可以看到您正在尝试替换字符串。那不应该完全有效。我认为您应该做的是获取与以下内容的匹配并将其添加到字符串以构建您自己的 URL。

```
preg_match('(&|\?)v=(\w*)(&|$)', $url, $matches);
$res = 'http://www.youtube.com/watch?v=' + $matches[1] 
```

然后 $res 将是想要的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T22:50:20.703

仅供参考，我使用此代码适用于我能够找到的所有变体：

```
 function getYouTubeId($url)
    {
        $pattern = '#^(?:https?://|//)?(?:www\.|m\.)?(?:youtu\.be/|youtube\.com/(?:embed/|v/|watch\?v=|watch\?.+&v=))([\w-]{11})(?![\w-])#';
        preg_match($pattern, $url, $matches);
        return (isset($matches[1])) ? $matches[1] : false;
    } 
```

使用以下变体进行测试：

```
http://www.youtube.com/watch?v=-wtIMTCHWuI
http://www.youtube.com/v/-wtIMTCHWuI?version=3&autohide=1
http://youtu.be/-wtIMTCHWuI
https://www.youtube.com/embed/-wtIMTCHWuI 
```

前一阵子从[这篇帖子中找到了这个功能。](https://stackoverflow.com/questions/7693218/youtube-i-d-parsing-for-new-url-formats)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T07:01:46.247

你为什么不只是

```
$url = "http://www.youtube.com/watch?feature=v-feature&v=317a815FLWQ&hello=ok";
$stop = strlen($url);
$pos = strpos($url,'v=')+2;
$x = strpos($url,'&',$pos);
if($x)
    {
    $x = $x - $pos;
    $stop = $x;
    }
$str = substr($url,$pos,$stop);
echo $str; 
```

它基本上总是以 av= ... 开头。

# javascript - 为什么画布不适用于 jQuery 选择器？

> ID：11574038
> 
> 赞同：20
> 
> 时间：2012-07-20T06:37:01.983
> 
> 标签：javascript, jquery, canvas

我做了一个简单的使用画布的例子，然后我发现我的代码在我使用 jQuery 选择器时不起作用。

**例子：**

[Javascript](http://jsfiddle.net/cXXdP/4/)

```
 window.onload = function() {
        var canvas = document.getElementById('myCanvas');
        var ctx = canvas.getContext('2d');

        ctx.fillRect(10,50,100,200);
    }; 
```

[jQuery](http://jsfiddle.net/46VKa/2/)

```
 window.onload = function() {
        var canvas = $('#myCanvas');
        var ctx = canvas.getContext('2d');

        ctx.fillRect(10,50,100,200);
    }; 
```

所以我不知道为什么会这样。有什么限制吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-20T06:39:34.997

检查您的 jQuery fiddle 的更新版本：http: [//jsfiddle.net/techfoobar/46VKa/3/](http://jsfiddle.net/techfoobar/46VKa/3/)

问题是：

`var canvas = $('#myCanvas')`为您提供 jQuery 扩展对象，而不是具有 getContext 等成员函数的本机 DOM 元素对象。为此，您需要使用`var canvas = $('#myCanvas')[0]`

*注意：* `var canvas = document.getElementById('myCanvas');`相当于`var canvas = $('#myCanvas')[0]`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-20T06:41:10.860

```
window.onload = function() {
     var canvas = $('#myCanvas');
     var ctx = canvas[0].getContext('2d'); // not canvas.getContext('2d')

     ctx.fillRect(10,50,100,200);
}; 
```

在您使用的代码中`canvas.getContext('2d');`，但应该是`canvas[0].getContext('2d');`.

因为`getContext('2d')`适用于***DOM 元素***，其中`var canvas = $('#myCanvas');`返回一个***`jQuery object`***但节点是一个***DOM 元素***。

要从 jQuery 对象中检索***DOM 元素*** *（此处为 canvas 元素）*，您需要使用`canvas[0]`.

* * *

在您使用的 JavaScript 代码中：

`document.getElementById('myCanvas');`它返回一个 DOM 元素。所以，

`var canvas = $('#myCanvas');`

`canvas[0]`并且`document.getElementById('myCanvas');`是相同的。

* * *

### *您还可以更改 jQuery 代码，如*：

```
 window.onload = function() {
     var canvas = $('#myCanvas')[0]; // get the element here
     var ctx = canvas.getContext('2d');

     ctx.fillRect(10,50,100,200);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T10:38:16.650

您可以使用 jquery 的 get 函数来检索画布元素。

```
var canvas = $('#myCanvas').get(0).getContext('2d'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T06:41:43.270

这段代码...

```
var canvas = $('#myCanvas');
var ctx = canvas.getContext('2d'); 
```

需要是...

```
var canvas = $('#myCanvas');
var ctx = canvas[0].getContext('2d'); 
```

# javascript - javascript变量的不同行为

> ID：11574039
> 
> 赞同：1
> 
> 时间：2012-07-20T06:37:01.813
> 
> 标签：javascript

我检查了 javascript 中未定义/未声明变量的不同行为。例如：

```
var obj = {};
console.log(x);//Error
console.debug(obj.x) ;//undefined 
```

我的问题是，虽然 c 和 obj.x 都没有声明或定义，但为什么我会出现差异行为？我错过了什么吗？我应该如何跟踪哪个变量已经存在或不存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:43:25.970

这是 javascript 中的预期行为。如果您正在访问未声明的变量 (x)，则会发生错误，因为引擎不知道您要访问的内容。

另一方面，物体具有某种双重性质。它既充当对象又充当数组，javascript 允许您尝试访问数组的成员，即使给定键下的成员不存在。如果没有指定值以下的键，您将返回`undefined`。即以下两行是等价的

```
console.log(obj.x); 
```

和

```
console.log(obj["x"]); 
```

如果您尝试访问不存在变量的成员，您只会得到错误。例如

```
console.log(obj.x.x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:46:48.370

如果你试图访问一个未定义的变量，你会得到一个错误，这通常是一件好事，因为它可以让你更容易地找到错误。

如果你想知道一个变量是否被定义，你可以像这样检查它的类型：

```
console.info(typeof x === "undefined" ? "<undefined!>" : x); 
```

在 的情况下`obj.x`，`x`是属性而不是变量，由于 JavaScript 对象的动态特性，您始终可以查找属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T06:47:00.690

你不能引用一个未声明的变量而不是一个错误，除非你在非严格模式下分配它然后它变成一个隐式全局。虽然在严格模式下仍然出错。

尝试访问对象属性与尝试访问变量不同，尽管您可以从以下位置访问全局变量`window`：

```
x; //referenceerror
window.x; //undefined, no reference error 
```

* * *

你需要在这种情况下使用`window.x`vs`x`例如：

```
var x = 5;

(function(){
    var x = 3;

    x === 3; //We cannot access the 5 
    window.x === 5 //Only window.x will do it here

})()​ 
```

# android - 从受支持的设备中排除 Nexus 7

> ID：11574048
> 
> 赞同：4
> 
> 时间：2012-07-20T06:37:29.427
> 
> 标签：android, filter

我有一个应用程序目前不能很好地支持 Nexus 7。所以我想把它从我支持的设备列表中排除。但我确实想让我的应用程序可用于 Galaxy Nexus。但我该怎么做呢？如果我没记错的话，我认为两者都是大显示尺寸和 hdpi 密度。那么如何过滤掉 Nexus 7 但保留 Galaxy Nexus。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T06:41:28.723

实际上，Nexus 7 是`large`,`tvdpi`设备，而 Galaxy Nexus 是`normal`和`xhdpi`。不过，我认为您希望排除尽可能少的设备是正确的。最好不要全面排除`large`设备`tvdpi`。

值得庆幸的是，您可以按型号从 Play 商店分发设备中排除设备：

1.  转到开发者控制台。
2.  向下滚动到“支持的设备”，然后单击“显示设备”。
3.  滚动到或搜索“Nexus 7”。
4.  按“排除”。
5.  按“完成”。

一旦你在 Nexus 7 上解决了问题，只需返回并在那里重新启用它。

# proxy - 带弹簧的 CGLIB 抛出 IllegalAccessError

> ID：11574049
> 
> 赞同：3
> 
> 时间：2012-07-20T06:37:36.060
> 
> 标签：proxy, weblogic, spring-aop, oc4j, cglib

我有一个启用了 aop 的 spring 应用程序，使用 cglib 代理进行日志记录：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">
<aop:aspectj-autoproxy proxy-target-class="true"/>

<bean id="loggingPointcuts" class="com.coverall.integration.commons.logging.LoggingPointcuts"/>

<bean id="loggingAspect" class="com.coverall.integration.commons.logging.LoggingAspect"/>
</beans> 
```

我正在使用 cglib-nodep-2.2.2.jar 和 spring 3.1.1 这在 tomcat 或 jetty 中效果很好。但是，当我在 OC4J（使用 jdk1.6）上部署它时，我收到以下错误： 尝试代理的类 - ComponentRegistryImpl 是包私有的

```
Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class com.company.int.components.core.registration.ComponentRegistryImpl]: Common causes of this problem include using a final class or a non-visible class; nested exception is net.sf.cglib.core.CodeGenerationException: java.lang.reflect.InvocationTargetException-->null
    at org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:207) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:112) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:476) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:362) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:322) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1461) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) [org.springframework.beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 40 common frames omitted
Caused by: net.sf.cglib.core.CodeGenerationException: java.lang.reflect.InvocationTargetException-->null
    at net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:237) ~[cglib-nodep-2.2.2.jar:na]
    at net.sf.cglib.proxy.Enhancer.createHelper(Enhancer.java:377) ~[cglib-nodep-2.2.2.jar:na]
    at net.sf.cglib.proxy.Enhancer.create(Enhancer.java:285) ~[cglib-nodep-2.2.2.jar:na]
    at org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:201) ~[org.springframework.aop-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    ... 47 common frames omitted
Caused by: java.lang.reflect.InvocationTargetException: null
    at sun.reflect.GeneratedMethodAccessor12.invoke(Unknown Source) ~[na:na]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ~[na:1.6.0_20]
    at java.lang.reflect.Method.invoke(Method.java:597) ~[na:1.6.0_20]
    at net.sf.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:384) ~[cglib-nodep-2.2.2.jar:na]
    at net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:219) ~[cglib-nodep-2.2.2.jar:na]
    ... 50 common frames omitted
Caused by: java.lang.IllegalAccessError: class com.company.int.components.core.registration.ComponentRegistryImpl$$EnhancerByCGLIB$$730712da cannot access its superclass com.company.int.components.core.registration.ComponentRegistryImpl
    at java.lang.ClassLoader.defineClass1(Native Method) ~[na:1.6.0_20]
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:632) ~[na:1.6.0_20]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:616) ~[na:1.6.0_20]
    ... 55 common frames omitted 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-24T14:16:13.760

我不确定 OC4J，但我们在 JBoss 6 上遇到了完全相同的错误。

通常，CGLIB 可以增强包私有的（代理）类。正如您所观察到的，这在 Jetty & Tomcat 上运行良好。但是，它在默认的 JBoss 6 类加载器设置中不起作用。

问题基本上是 Spring 指示 CGLIB`com.company.int.components.core.registration.ComponentRegistryImpl$$EnhancerByCGLIB$$730712da`使用与目标类（超类）不同的类加载器创建代理类（子类`com.company.int.components.core.registration.ComponentRegistryImpl`）。因此，虽然这些类在同一个文本包中，但它们实际上是在运行时在不同的包中创建的（因为它们位于不同的类加载器中）。

CGLIB 默认在与代理目标相同的类加载器中定义代理类。但是，Spring 覆盖了 CGLIB 增强器使用的类加载器。从`org.springframework.aop.framework.Cglib2AopProxy.getProxy(ClassLoader)`

```
 // Configure CGLIB Enhancer...
            Enhancer enhancer = createEnhancer();
            if (classLoader != null) {
                enhancer.setClassLoader(classLoader);
                if (classLoader instanceof SmartClassLoader &&
                        ((SmartClassLoader) classLoader).isClassReloadable(proxySuperClass)) {
                    enhancer.setUseCache(false);
                }
            } 
```

跟踪该类加载器的数据流表明它来自定义在 BeanFactory 本身上的类加载器，默认为`Thread.currentThread().getContextClassLoader()`(in `org.springframework.util.ClassUtils.getDefaultClassLoader()`)。

在健全的 servlet 容器（如 Jetty 和 Tomcat）中，上下文类加载器与加载所有应用程序类（在 WEB-INF/lib 或 WEB-INF/classes 中）的类加载器相同。但是，在 JBoss 6（我猜是 OC4J）中，这两者并不相同。上下文类加载器实际上是 webapp 类加载器的子类。它实际上没有定义任何类，只是将所有内容委托给父级。在 JBoss 中，上下文类加载器是 ) 的一个实例`WebCtxLoader$ENCLoader`。

我们使用的解决方法是为您的`WebApplicationContext`( `BeanFactory`) 覆盖类加载器，以便使用“真正的”webapp 类加载器。我们通过创建自己的来做到这一点`ContextLoaderListener`（加载 MyContextLoaderListener 实现的类加载器本身就是我们想要的）：

```
public class MyContextLoaderListener extends ContextLoaderListener {
    @Override
    protected void customizeContext(ServletContext servletContext, ConfigurableWebApplicationContext applicationContext) {
        ClassLoader classLoader = getClass().getClassLoader();
        logger.debug("Overriding WebApplicationContext classloader from %s to %s", applicationContext.getClassLoader(), classLoader);
        ((DefaultResourceLoader) applicationContext).setClassLoader(classLoader);
    }
} 
```

您需要在以下位置添加类作为上下文侦听器`web.xml`：

```
<listener>
    <listener-class>com.company.MyContextLoaderListener</listener-class>
</listener> 
```

# python - Python Tkinter：输入框矩阵的分配

> ID：11574050
> 
> 赞同：0
> 
> 时间：2012-07-20T06:37:37.730
> 
> 标签：python, matrix, tkinter

我使用 Tkinter 和 Python 2.3 创建了一个输入框矩阵。我想要做的是检查关键字的输入框的行，然后将文本插入到具有相同行但不同列的输入框中。例如，采用一个简单的 3x3 输入框矩阵：

```
Food         Like         Dislike
Apple                       Yes 
Orange        Yes 
```

假设我有两个彼此对应的列表：

```
1\. [Apple, Orange]
2\. [Dislike, Like] 
```

我想检查如果列表 1 中的第一个元素是 Apple 并且列表 2 中的第一个元素是不喜欢，那么我想在第 2 行和第 3 列的输入框中插入一个文本“YES”，如上面的矩阵所示。

我已将输入框索引附加到两个列表中。第一个列表包含输入框第一列的索引。第二个列表包含输入框的第 2 列和第 3 列。问题是，如何确定输入框对应的行列插入 Yes???

希望你能理解！这个例子是最基本的例子。我的实际矩阵由更多的行和列组成。一个想法或示例代码将有很大帮助。

谢谢 Tkinter 众神。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:55:52.557

Store references to the entry widgets in a dictionary of lists. Here's an example using the label as the key:

```
for item in list_of_things:
    label = tk.Label(...)
    column0 = tk.Entry(...)
    column1 = tk.Entry(...)
    matrix[label] = (column1, column2) 
```

You can now get column1 of "Orange" with something like `matrix["Orange"][1]`

# java - 连接按钮不起作用

> ID：11574053
> 
> 赞同：2
> 
> 时间：2012-07-20T06:38:07.467
> 
> 标签：java, swing, connection, chat, event-dispatch-thread

每当我单击事件按钮时，程序就会变得无响应我的代码有问题吗？

```
void btnConnectActionPerformed(java.awt.event.ActionEvent evt){

    try{
        btnSend.setEnabled(true);
        ServerSocket serverSocket = new ServerSocket(4446);
        Scanner serverType = new Scanner(chatTxt.getText());
        Socket clientSocket = serverSocket.accept();
        InputStreamReader isr = new InputStreamReader(clientSocket.getInputStream());
        BufferedReader br = new BufferedReader(isr);
        PrintStream ps = new PrintStream(clientSocket.getOutputStream());

    }catch (Exception ex){ex.printStackTrace();}
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T06:41:09.510

不，代码没有任何问题，除了您在`Event Dispatching Thread`.

这将阻止 UI 更新，因为 UI`EDT`负责处理绘制更新以及处理键盘和鼠标事件处理。

如前所述，请查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)获取更多详细信息。

# android - 在 Android webview 中查看 PDF 文件

> ID：11574056
> 
> 赞同：2
> 
> 时间：2012-07-20T06:38:31.180
> 
> 标签：android

如何在我的 Web 视图中打开 PDF 文件而不将其下载并保存到 SD 卡？我对此进行了一些研发，但直到现在我还没有得到任何合适的答案。谁能告诉我如何使用 googledoc 在网络视图中打开 PDF 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T06:43:39.913

`http://docs.google.com/viewer?embedded=true&url=link_to_pdf`将格式化您的 PDF，以便您使用 Google Docs Viewer 在 Web 视图中打开。

```
WebView mWebView = new WebView(this);
mWebview.getSettings().setJavaScriptEnabled(true);  
String url = "http://docs.google.com/viewer?embedded=true&url="+"http://sitename.com/xyz.pdf";
mWebview.loadUrl(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:43:54.213

[在这里](https://stackoverflow.com/questions/9434487/open-pdf-in-a-webview)查看答案

```
mWebView.loadUrl("https://docs.google.com/gview?embedded=true&url="+ webUrl); 
```

`webUrl`您要打开的 pdf 的网址在哪里。

# android - android 调用克隆 simple_list_item_1

> ID：11574057
> 
> 赞同：0
> 
> 时间：2012-07-20T06:38:33.053
> 
> 标签：android, listview, android-layout

我有一个调用 simple_list_item_1 的列表，现在我想自定义此单元格以包含图像，但调用它时遇到问题

这是工作代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {   //mira el life cycle, aqui y el de createView!
        super.onCreate(savedInstanceState);

        // la manera con sencillo
         ListAdapter myListAdapter = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, title); //using Android own simple 

        setListAdapter(myListAdapter);

    } 
```

但现在，我需要打电话给克隆人`simple_list_item_1`

已经在我的布局文件夹中，克隆的名称是 simple_list_item.xml

那么如何调用我的克隆列表项？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:41:52.280

更改`android.R.layout.simple_list_item_1`为`R.layout.simple_list_item_1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:42:21.820

您应该创建从 ArrayAdapter 扩展的类并膨胀您的项目并在之后填充它。如果您需要，我可以给出一些代码示例。

**升级版：**

例如像这样：

```
public class MyAdapter extends ArrayAdapter<Object> {

    public MyAdapter(Context context, int textViewResourceId,
            List<Object> objects) {
        super(context, textViewResourceId, objects);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater infalter = (LayoutInflater) getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = infalter.inflate(YOUR_LAYOUT_ITEM, parent, false);
        //v.findViewById(ID_YOUR_IMAGE_VIEW).setDrawable.... and so on...

        return v;
    } 
```

它是最简单的代码。在实际项目中，您应该使用一些技巧来获得像持有者和使用 convertView 这样的性能。

当然，您应该像这样更改 Activity 中的代码：

```
ListView listView;   
ArrayList<Object> objects;

@Override
    public void onCreate(Bundle savedInstanceState) 
        super.onCreate(savedInstanceState);

        objects = new ArrayList<Object>();
        listView = findViewById(ID_LISTVIEW_IN_ACTIVITY);
        MyAdapter myListAdapter = new MyAdapter<Object>(getActivity(),
                YOUR_LAYOUT_ITEM, objects);

        listView.setAdapter(myListAdapter);
    } 
```

祝你好运！

# php - Zend 多国重定向

> ID：11574065
> 
> 赞同：5
> 
> 时间：2012-07-20T06:39:21.440
> 
> 标签：php, zend-framework

目前我在默认位置有一个 Zend 应用程序 `www.example.com/{controller}/{action}`

但是当用户从特定国家访问时，如何检测他们的 IP 地址并将他们重定向到这个基于 countryCode 的 url `www.example.com/uk/{controller}/{action}`？

为了检测用户访问的国家/地区，我编写了一个助手：

```
require_once '../library/Ipinfo/ip2locationlite.class.php';

class Application_View_Helper_GetLocation extends Zend_View_Helper_Abstract
{
    public function getLocation()
    {

        $ipLite = new ip2location_lite;
        $ipLite->setKey('APIKEY');

        //Get errors and locations
        $locations = $ipLite->getCity($_SERVER['REMOTE_ADDR']);
        $errors = $ipLite->getError();

        $country = strtolower($locations['countryName']);

        return "$country";
    }
} 
```

上面的代码将返回国家名称。如果用户从法国访问，我该如何重写 url 以使 url 变为`example.com/france/{controller}/{action}`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T03:23:24.317

将您的视图助手重构为控制器插件并重定向。

控制器插件可以在请求调度循环的早期执行，因此您可以在加载和呈现任何控制器之前拦截请求并重定向到另一个响应。下面的示例（警告，可能包含错误！）

```
class App_Plugin_DetectCountry extends Zend_Controller_Plugin_Abstract {

    public function preDispatch(Zend_Controller_Request_Abstract $request) {
        $ipLite = new ip2location_lite;
        $ipLite->setKey('APIKEY');

        //Get errors and locations
        $locations = $ipLite->getCity($_SERVER['REMOTE_ADDR']);
        $errors = $ipLite->getError();

        $country = strtolower($locations['countryName']);

        //Check if set country equals detected country
        if (!isset($_COOKIE['country']) || $country !== $_COOKIE['country']) {
            $_COOKIE['country'] = $country;
            $redirector = Zend_Controller_Action_HelperBroker::getStaticHelper('redirector');
            $redirector->gotoUrl($country . '/' . $request->getControllerName() . '/' . $request->getActionName()); 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T03:37:02.057

我同意@tripleee 关于使用 HTTP 标头而不是查找他们的 IP 的评论，这通常会导致不正确的值，或者强制远程代理后面的用户进入他们不想要的设置。

尝试使用此控制器插件根据浏览器给出的用户区域设置进行重定向：

```
<?php

class Application_Plugin_Language extends Zend_Controller_Plugin_Abstract
{
    public function routeShutdown(Zend_Controller_Request_Abstract $request)
    {
        /*
        // if you add "localization.default_locale = "en_US" to your application.ini, uncomment the following
        $config = new Zend_Config($this->getOption('localization'), true);
        $loc = (isset($config->default_locale)) ? $config->default_locale : 'en_US';
        */

        $module = $request->getModuleName();
        if ($module != 'default') return ;

        // You can also check a cookie or session value here to see if you can return from the plugin as well

        $loc = 'en_US';

        Zend_Locale::setDefault($loc);

        try {
            $locale = new Zend_Locale(Zend_Locale::BROWSER);
        } catch (Zend_Locale_Exception $e) {
            $locale = new Zend_Locale($loc);
        }

        $language = $locale->getLanguage();  // e.g. "en", "de", "ru" etc.

        $urlHelper = new Zend_Controller_Action_Helper_Url();
        $url = $urlHelper->url(array('module' => $language, 'controller' => 'form', 'action' => 'index'));

        $redirector = Zend_Controller_Action_HelperBroker::getStaticHelper('redirector');
        $redirector->gotoUrl($url);
    }
} 
```

如果用户当前正在请求默认模块，此插件将根据用户浏览器设置的语言重定向到具有语言名称的模块。

请注意，此代码不会检查您重定向到的模块是否存在。您应该在重定向之前检查该语言是否受支持。

您还可以添加对包含用户所需语言的 cookie 或会话值的检查，并基于此进行重定向。

通过将其添加到以下内容来注册插件`application.ini`：

```
resources.frontController.plugins.language = "Application_Plugin_Language" 
```

如果您想根据国家而不是语言重定向，请更改`$language = $locale->getLanguage();`为`$region = $locale->getRegion();`

希望有帮助。

# c# - 一个asp.net页面上的两个表单

> ID：11574066
> 
> 赞同：1
> 
> 时间：2012-07-20T06:39:22.080
> 
> 标签：c#, asp.net

我有一个带有嵌套母版页的 asp.net 页面。父母版页有这样的表单标签：

```
 <form runat="server">
 ...
 ....
 </form> 
```

并在子母版页中。我有一个侧栏，其中有另一种形式（不是 runat=server"），如下所示：

```
<form method="post" action="https://app.icontact.com/icp/signup.php" name="icpsignup" id="icpsignup3297" accept-charset="UTF-8" onsubmit="return verifyRequired3297();" >

<input type="hidden" name="redirect" value="http://www.abconline.com/newsletter-sign-up.aspx">
<input type="hidden" name="errorredirect" value="http://www.icontact.com/www/signup/error.html">

....
....
....
<input type="submit" name="Submit" value="Get Deals">
</form>

<script type="text/javascript">

    var icpForm3297 = document.getElementById('icpsignup3297');

    if (document.location.protocol === "https:")

        icpForm3297.action = "https://app.icontact.com/icp/signup.php";
    function verifyRequired3297() {
        if (icpForm3297["fields_email"].value == "") {
            icpForm3297["fields_email"].focus();
            alert("The Email field is required.");
            return false;
        }

        return true;
    }
</script> 
```

但是当我点击提交按钮时，会发生回发，但不会调用 javascript 函数，并且不会将表单重定向到子母版页的发布 url。如果我在没有母版页的独立页面中使用此表单，它工作正常。

请建议如何强制子母版页内的表单去发布 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:08:56.860

根据 HTML 标准，您不能有嵌套的表单，即表单内的表单。如何在表单标签之外的母版页中创建另一个内容占位符，然后您可以在子页面中使用表单。像这样：

在您的母版页中：

```
<form>
----
----
</form>

<asp:ContentPlaceHolder id="cp2" runat="server">

</asp:ContentPlaceHolder> 
```

在您的子页面中，在此标签中添加表单：

```
<asp:Content ID="Content3" ContentPlaceHolderID="cp2" Runat="Server">
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:50:43.927

在这里查看昆汀的[回答](https://stackoverflow.com/questions/3430214/form-inside-a-form-is-that-alright)。根据 HTML 标准，您不能将表单相互嵌入。如果您这样做，大多数浏览器都会忽略内部表单。

最好的解决方案是在母版页上创建一个额外的 asp:Content，您可以在其中放置辅助表单。

您可以级联 asp:Content 从基本母版页：

```
<!-- on base master page -->
<form runat="server" ...>
    main content here
</form>

<asp:ContentPlaceHolder runat="server" ID="SecondaryFormContentBase"></asp:ContentPlaceHolder>

<!-- on child master page -->
<asp:Content ID="Content1" ContentPlaceHolderID="SecondaryFormContentBase" Runat="server">
    <asp:ContentPlaceHolder runat="server" ID="SecondaryFormContent"></asp:ContentPlaceHolder>
</asp:Content> 
```

# javascript - Highcharts 柱形图向下钻取

> ID：11574067
> 
> 赞同：0
> 
> 时间：2012-07-20T06:39:29.477
> 
> 标签：javascript, html, charts, highcharts

任何人都可以举例说明 Highcharts 包的柱形图的向下钻取功能吗？这是来自 Highcharts 网站的示例的 jsfiddle，但它是静态数据。[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-drilldown/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/column-drilldown/)

如何让它动态化？即使我实现了点击功能，如何知道点击了哪一列？如何使用向下钻取数据刷新相同的图表？我有复杂的 XML，我将其转换为对象数组。所以准备下钻数据不是问题。但我需要将这些数据传递给图表的指导。任何帮助都感激不尽。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:36:41.247

这是您必须执行的操作的示例。

[http://jsfiddle.net/yPVX9/2/](http://jsfiddle.net/yPVX9/2/)

我使用了您在链接上提供的相同代码。

希望这对你有帮助:)

# java - 如何访问同一应用程序的不同线程中的所有 JFrame

> ID：11574069
> 
> 赞同：2
> 
> 时间：2012-07-20T06:39:30.883
> 
> 标签：java, swing, reflection, jframe

如何`JFrame` 在Java应用程序的不同事件调度线程中访问不同的执行请通过这里提出的SSCCE [在这种情况下将新的JVM实例或反射帮助](https://stackoverflow.com/questions/11573259/will-new-instance-of-jvm-or-reflection-help-in-this-case)

最后正如我提到的如果将以下代码添加到第一个类中

```
Frame[] f2 = JFrame.getFrames();

for(Frame fx: f2){
    System.out.println(fx.getTitle());
    fx.addWindowListener(new WindowAdapter(){
    public void windowClosing(WindowEvent we){
} 
```

如果在SSCCE中按顺序添加到第二类，则仅返回单个帧，返回两个帧，如果添加到第三类，则返回所有帧。这是由于事件调度线程造成的问题吗？这种行为背后的原因是什么。如何从主框架（即 MyApp）访问所有框架。

为什么 JFrame.getFrames(); 返回 awt Frames 例如，如果我想更改我的应用程序中所有 JFrames 的默认关闭操作 gerFrames 返回 awt 帧，如果 JFrame 中的 caset 产生异常。

> 线程“main”中的异常 java.lang.ClassCastException: [Ljava.awt.Frame; 不能转换为 [Ljavax.swing.JFrame; 在 myApp.MYApp.main(MYApp.java:48)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T06:52:55.540

代码行

```
Window[] allWindows = Window.getWindows(); 
```

`Top-Level Containers`从当前返回所有数组`JVM`

*   `J/Frame`

*   `J/Dialog(JOptionPane)`

*   `J/Window`

必须测试是否

```
if (allWindows[i] instanceof JFrame) { 
```

# c# - 将 Linq 表达式转换为 URI 时出错：不支持“选择”方法

> ID：11574070
> 
> 赞同：3
> 
> 时间：2012-07-20T06:39:31.803
> 
> 标签：c#, .net, linq, wcf-data-services, odata

这是我失败的代码

```
 var query = from gg in Client.wcf.context.Good
                    from cc in Client.wcf.context.Customer
                    from ch in Client.wcf.context.CashHeading
                    from cs in Client.wcf.context.Cash
                    where ch.Id_customer == cc.Id
                    where cs.Id_cashheading == ch.Id
                    where gg.Id == cs.Id_good
                    select new CustomerOrderResult {
                        CustomerID = cc.Id,
                        Price = gg.Price.HasValue ? gg.Price.Value : 0,
                        Date = ch.Date.HasValue ? ch.Date.Value : DateTime.Now
                    };
        List<CustomerOrderResult> qqq = query.ToList(); 
```

附加信息：不支持“选择”方法。

这解决了错误：[为什么这个 Linq 不起作用（将 Linq 表达式转换为 URI 时出错：只能指定查询选项（orderby、where、take、skip）](https://stackoverflow.com/questions/11577458/why-this-linq-doesnt-work-error-translating-linq-expression-to-uri-can-only-s)

查询是另一个 linq，总的来说，它是 WCF 数据客户端到服务器（实体）应用程序的完整源文件在[这里，在 GitHub 上](https://github.com/Nensha/ENT/blob/master/ENT_Client/MainForm.cs)

那里的其他 linq 查询工作正常

错误：`+ query {Error translating Linq expression to URI: The method 'Select' is not supported.} System.Linq.IQueryable<CustomerOrderResult> {System.Data.Services.Client.DataServiceQuery<CustomerOrderResult>.DataServiceOrderedQu`ery}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:54:29.017

大概`query`包含`null`. 尝试

```
where x != null && x.CustomerID == c.Id 
```

# asp.net-mvc - 如何在保存更改之前获取实体的身份并将其设置为另一个实体的外键？

> ID：11574074
> 
> 赞同：1
> 
> 时间：2012-07-20T06:39:38.263
> 
> 标签：asp.net-mvc, entity-framework

我想在 savechanges() 之前添加一个实体并获取它的身份，并在实体框架代码中的 savechanges 之前将其设置为另一个实体的外键。是否可以？

第一个模型

```
 public class A
{ 
   int AId { get; set; }
   string name { get; set; }
 } 
```

第二个模型

```
 public class B
{ 
   int BId { get; set; }
   int AId { get; set; }
   string name { get; set; }
 } 
```

和.....

```
 db.As.Add(A);
 b.AId = A.Aid;
 db.savechanges(); 
```

有没有文章解释它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:12:58.167

声明 in 类型的`A`属性`B`。

```
public class A
{ 
   int AId { get; set; }
   string name { get; set; }
}

public class B
{ 
   int BId { get; set; }

   virtual A A { get; set; }
   int AId { get; set; }

   string name { get; set; }
} 
```

然后将实例分配`A`给该导航属性。EF 将确定实体的插入/更新顺序来解析 FK。

```
 b.A = a;
 db.As.Add(a);
 db.savechanges(); 
```

# c++ - 虚拟构造函数与工厂设计

> ID：11574075
> 
> 赞同：4
> 
> 时间：2012-07-20T06:39:41.797
> 
> 标签：c++, design-patterns, virtual-functions

在虚拟构造函数习语中，有一些虚拟函数使用虚拟函数返回新对象或对象的副本。但是要以多态方式调用这些虚函数，您必须使用实际构造函数创建该类的对象。

在设计模式上下文中，这意味着客户端在使用多态对象创建方式之前就知道对象的类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T06:48:53.523

客户不一定要知道具体类型。例如，考虑这个层次结构：

```
struct Base
{
    virtual ~Base();
    virtual Base * clone() const = 0;
    static Base * create(std::string const &);
    // ...
};

struct A : Base { A * clone() const { return new A(*this); } /* ... */ };
struct B : Base { B * clone() const { return new B(*this); } /* ... */ };
struct C : Base { C * clone() const { return new C(*this); } /* ... */ };

Base * Base::create(std::string const & id)
{
    if (id == "MakeA") return new A;
    else return new C;
}; 
```

在这种情况下，客户端可以像这样创建和复制现有对象：

```
Base * p = Base::create("IWantB");  // or std::unique_ptr<Base> !
Base * q = p->clone(); 
```

在这两种情况下，客户端都不知道`*p`or的动态类型`*q`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T06:48:01.597

```
class Base
{
public:
    Base() { }

    virtual ~Base() { }

    // The "Virtual Constructor"
    static Base *Create(int id);

    // The "Virtual Copy Constructor"
    virtual Base *Clone() = 0;
};

Base *Base::Create(int id)
{

    if( id == 1 )
    {
        return new Derived1;
    }
}

class Derived1 : public Base
{
public:
    Derived1()
    {
        cout << "Derived1 created" << endl;
    }

    Derived1(const Derived1& rhs)
    {
        cout << "Derived1 created by deep copy" << endl;
    }

    ~Derived1()
    {
        cout << "~Derived1 destroyed" << endl;
    }

    Base *Clone()
    {
        return new Derived1(*this);
    }
}; 
```

当你这样做时，现在在 Main

```
void main()
{
        cout << "Enter ID (1, 2 or 3): ";
        cin >> input;
        Base *pBase = Base::Create(input);
        Base *pCopy = CreateCopy(pBase);

        //Dont know what object is created but still access functions thru base pointer
}

Base *CreateCopy(Base *pBase)
{
  return pBase->Clone();
} 
```

客户端不需要知道它继承的类的类型，但仍然调用一些函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T06:49:19.193

客户端*不*知道派生类型的虚拟构造函数习语。这个习语的全部目的是通过基指针克隆对象。这是一个例子：

```
class base
{
public:
   base* clone()
   {
       // NVI: implemented by derived classes.
       do_clone();
   }

 protected:
   virtual base* do_clone = 0;
};

class derived : public base
{
protected:
    virtual derived* do_clone()
    {
        // Implementation. Note the return value is not base*.
    }
 }; 
```

有关详细信息，请参阅这篇 ACCU 文章：http: [//accu.org/index.php/journals/522](http://accu.org/index.php/journals/522)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T06:49:00.410

最终，某处必须知道您的对象的具体类型。隐藏该细节的想法导致了一种称为[控制反转的](http://en.wikipedia.org/wiki/Inversion_of_control)模式，或者最近称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。

想法是在整个程序中指定一个组件，该组件知道所使用的具体类型。然后，该组件负责组装您的对象图；其他组件仅将其依赖项作为接口，在构造或方法中传递。

有一些 C++ 的依赖注入器实现：我想到了 spring-cpp、fallframework 和 dicpp。我自己编写了一个，名为[sauce](https://github.com/phs/sauce)，它模仿名为[guice](http://code.google.com/p/google-guice/)的 java 框架的风格。

# sql - SQL：带有字符串数据的 GROUP BY

> ID：11574076
> 
> 赞同：0
> 
> 时间：2012-07-20T06:39:46.150
> 
> 标签：sql, string, group-by

使用 GROUP BY 时，哪些聚合函数适用于字符串？

我通常会 GROUP BY user_id，但我不确定什么聚合函数可以在字符串上工作。

目标是将每个 user_id 的货币作为一行：

```
user_id   currency

12341235  "USD"
12341235  "USD"
12341235  "USD"
12341235  "USD"
05945949  "EURO"
05945949  "EURO"
05945949  "EURO"
99910277  "USD"
99910277  "USD"
99910277  "USD" 
```

完成数据：

```
user_id   currency

12341235  "USD"
05945949  "EURO"
99910277  "USD" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:58:56.263

演示 [http://sqlfiddle.com/#!3/60ea7/5](http://sqlfiddle.com/#!3/60ea7/5)

DISTINCT 和 GROUP BY 通常生成相同的查询计划，因此两种查询构造的性能应该相同。应该使用 GROUP BY 将聚合运算符应用于每个组。如果您只需要删除重复项，请使用 DISTINCT。如果您使用子查询，则该查询的执行计划会有所不同，因此在这种情况下，您需要在决定哪个更快之前检查执行计划。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T06:49:52.827

实际上，您不需要`group by`它可以通过`distinct`.

```
select distinct user_id,currency from your_table; 
```

由于每行都有`currency`一个`user`，所以这里不需要任何`aggregate function`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T06:53:31.327

将所有列分组使其与众不同

```
select user_id,currency from your_table
Group by user_id,currency 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T06:48:02.500

您想使用分组依据有什么特殊原因吗？

要获得相同的结果，您应该能够使用 DISTINCT，例如

选择不同的user_id，货币

# sql - 如何根据其他表中的字段串联动态设置 SQL 字段名称？

> ID：11574078
> 
> 赞同：0
> 
> 时间：2012-07-20T06:39:59.393
> 
> 标签：sql, dynamic, alias

我有两张桌子。projects 表中的字段名称存储在 fieldname 表中

### 项目表

```
RecordID, ProjectID, Field1, Field2, Field3, Field4,...,Field20
```

### 字段名称表

```
字段名称 ID、项目 ID、字段编号、字段名称
```

是否可以从字段名称实际上是 FieldNames.FieldName 的 Projects 表中返回结果？您可以连接 'Field'+FieldNames.FieldNumber 以返回 Fieldname，然后将其用作 Projects 中 Field(x) 的别名吗？

即：而不是“Field1”，它将是 FieldNames.FieldName 其中 Projects.ProjectID=FieldNames.ProjectNames 和 FieldNumber=1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:41:33.827

您可以使用动态 SQL 或将值映射到字段的大型 case 语句来执行此操作，或者通过创建包含每个组合的视图并在 where 子句中使用适当的代码来获取正确的行来做到这一点。

但是，在我看来，你完全走错了路，在没有可怕警告的情况下帮助你走得更远是完全不负责任的。所以这里是：

您使用的数据库设计是一种非常糟糕的设计反模式，并且以一种特别臭的方式违反了最佳实践（例如“代码异味”，您有“数据库异味”）。不要将列名存储在列中。这是错误的。会疼的。它会让你的数据库变得邪恶。专业人士会偷偷地大声嘲笑它。我是认真的。

# compression - ARM Cortex M3/4 的压缩库

> ID：11574081
> 
> 赞同：5
> 
> 时间：2012-07-20T06:40:04.817
> 
> 标签：compression

我需要一个经过验证的 ARM cortex M3 或 4 压缩库。我将使用这个库来压缩来自外围设备的一些数据，然后再从 IC 运出。

任何指针将不胜感激。到目前为止，我已经看过 LZ4c，但要让它在 ARM 上运行并不容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-05T18:53:33.290

[https://github.com/pfalcon/uzlib](https://github.com/pfalcon/uzlib)是高度优化的最小库（基于早期的 tinf 库），可与标准 DEFLATE/zlib/gzip 压缩配合使用。它可以在内存缓冲区和流模式下工作以进行解压缩（在后一种情况下，它可以处理无限大小的文件）。对于压缩，它实现了一种更简单的压缩算法，但仍将结果格式化为与 zlib 兼容的比特流，因此任何其他软件都可以对其进行解压缩。

该库在 Cortex-M0 上运行不会有任何问题（取决于使用的字典大小，对于小型 RAM 系统，应使用小于默认 32KB 的值）。

它在 MicroPython [https://github.com/pfalcon/micropython](https://github.com/pfalcon/micropython)中使用，其中有大约 40KB 的可用 RAM，用 Python 编写的应用程序可以通过 TLS 连接下载 tarball 并将它们解压缩到文件系统（“upip”包管理器）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:35:07.467

如果你有一个标准的 C 编译器，你有很多选择。 [zlib](http://zlib.net/)，[lz4](http://code.google.com/p/lz4/)，[libbzip2](http://www.bzip.org/)，[lzma](http://www.7-zip.org/sdk.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T07:21:54.247

我花了一些时间来整合LZ4。这是一个不错的选择，使用 ARM Cortex M4 在 0.5 毫秒内压缩 20KB 数据。堆栈要求约为 16Kb（可配置为 4 个）。好一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T21:44:48.937

我真的很喜欢[BCL](http://bcl.comli.eu/)，它是一个重量轻、易于集成的库。我在 Cortex M3 和 M4 部件上使用过它。

# c# - 如何将数据网格中的特定行设置为 WPF 中的不可编辑字段？

> ID：11574084
> 
> 赞同：0
> 
> 时间：2012-07-20T06:40:23.190
> 
> 标签：c#, wpf

我想使用 WPF 将数据网格中的特定行作为不可编辑的文件。所以请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:55:45.763

[这](https://stackoverflow.com/questions/1921131/wpf-datagrid-disable-editing-in-certain-rows)是一种如何通过触发器和值转换器禁用它的方法。可能会对你有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:54:00.000

`IsReadOnly`您可以通过将该列的属性设置为 true来使单元格不可编辑。此外，您可以通过将此属性设置为 true 来禁用整个数据网格不可编辑。但是 DatagridRow 没有此属性，您必须创建自己的`Depenedency property`属性并通过`style of DataGridRow`. 您可以参考此示例以禁用数据网格中的特定行 -[禁用数据网格中的行](http://blog.spencen.com/2009/04/25/readonly-rows-and-cells-in-a-datagrid.aspx "禁用数据网格中的行")

# jquery - 在另一个 div 中创建一个可拖动的分区

> ID：11574085
> 
> 赞同：0
> 
> 时间：2012-07-20T06:40:29.723
> 
> 标签：jquery, jquery-plugins

我想创建一个更大的 div 内的可拖动 div。这是我的程序。但它不起作用。我猜可拖动功能是用来使 div 可拖动的功能。我还必须使用哪个版本？1.7.2 还是 1.3.2 ？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>First jQuery-Enabled Page</title>
        <style type="text/css">
            #draggable {
                background-color:blue;
                width: 150px;
                height: 150px;
                padding: 0.5em;
            }
        </style>
        <script type="text/javascript" src="jquery-ui-1.8.21.custom.min"></script>
        <script type="text/javascript">
            $(function() {

                $("#draggable").draggable();
            });
        </script>
    </head>

    <body>
        <div id="draggable">
            <p>hai</p>
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:49:34.620

我尝试修改您的代码并在此处生成一个工作示例：http: [//jsfiddle.net/mUa3r/](http://jsfiddle.net/mUa3r/)

基本上要让您的盒子可拖动并由容器绑定，请使用，如此[处](http://jqueryui.com/demos/draggable/#option-containment)`{containment: parent}`所述。

更新：（因为链接不适合你）

**脚本：**

```
 <script>
            $(function() {
            $("#draggable").draggable({containment: "parent" });
    });
    </script> 
```

**HTML：**

```
 <div id="container">
            <div id="draggable">
                    <p>hai</p>
            </div>
    </div> 
```

**CSS：**

```
 #container {background-color:grey; width: 300px; height: 300px;}
    #draggable {background-color:blue; width: 150px; height: 150px; padding: 0.5em;}​ 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:45:00.650

我认为您的 javascript 应如下所示；

```
<script type="text/javascript">

    $(document).ready(function () {

       $("#draggable").draggable();

    });

 </script> 
```

希望这可以帮助

# android - 在 notifyDataSetChanged 后将组动态添加到列表视图未反映

> ID：11574086
> 
> 赞同：1
> 
> 时间：2012-07-20T06:40:56.840
> 
> 标签：android, android-listview

我是 android 开发新手（iOS 开发人员），我正在使用 BaseExpandableListAdapter 作为我的列表视图。我将另外 2 个组添加到列表中（除其他外），然后调用 notifyDataSetChanged 并出现 2 个新组，但显示为空。我已经将日志语句放入了一些已实现的适配器方法中，我可以肯定地看到，它并没有询问我添加的 2 个组的长度。

以下是一些说明正在发生的事情的日志消息...

> 有 2 个组 - getGroupCount()
> 
> 第 0 组有 5 个孩子 - getChildrenCount()
> 
> 第 1 组有 1 个孩子 - getChildrenCount()

notifyDataSetChanged();

> 有 4 个组 - getGroupCount()
> 
> 第 0 组有 4 个孩子 - getChildrenCount()
> 
> 第 1 组有 6 个孩子 - getChildrenCount(

...不尝试询问第 2 组和第 3 组有多少孩子？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T00:56:00.933

结果发现默认情况下添加的组是折叠的，我只需要检查每个组并确保它被扩展。这是我的代码来做到这一点。

```
 public void expandAllGroups(MyActivity activity)
{
    ExpandableListView list = (ExpandableListView) activity.findViewById(R.id.MyList);
    for (int i = 0; i < activity.adapter.getGroupCount(); i++)
    {
        list.expandGroup(i);
    }
} 
```

# javascript - RegExp：在任何数字之前插入位数

> ID：11574096
> 
> 赞同：0
> 
> 时间：2012-07-20T06:41:41.423
> 
> 标签：javascript, regex, sorting

我想对包含名称和数字的字符串数组进行排序。但我想改进字母数字排序顺序以获得类似的顺序

```
John 8 test
John 9 test
John 10 test 
```

而不是在顶部有“John 10 test”，因为“1”<“8”<“9”。我的想法是在任何数字之前插入数字的位数，因此在内部要排序的数组变为：

```
John 18 test
John 19 test
John 210 test 
```

现在是一个字母数字正确排序的数组。

任何想法如何以简单的方式在数字之前插入数字的数量？RegExp 将是完美的。我在 nodejs/JavaScript 中做这一切。

提前致谢！

海诺布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:07:56.917

我自己找到了（一个）答案：

```
var a = "John 352 Name 1 test 23 better";
a.replace( /\d+/g, function( match, number) {
    return match.length + match;
}); 
```

做我想要的:-)

# google-chrome - 即使链接不在我的历史记录中，Chrome 如何将链接显示为已访问？

> ID：11574099
> 
> 赞同：2
> 
> 时间：2012-07-20T06:41:44.970
> 
> 标签：google-chrome, browser-history

我已经使用 Chrome 多年了（自 2009 年以来），并且经常注意到它显示链接为已访问，即使我在很久以前甚至几年前访问过它们。例如，在 Google 上，我可以看到我用来在 2 月（6 个月前）预订夏威夷假期的所有页面都被设置为紫色链接。

但奇怪的是，Chrome 说只有 10 周的数据保留在历史记录中。那么，它是如何知道我在 10 周前访问过网站的呢？我很好奇，因为拥有我自己多年的浏览历史可以查看数据的金矿。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:56:11.837

在您的 Google 搜索结果中将链接突出显示为紫色的不是 Chrome：它是 Google 本身。如果您启用了[网络历史记录](https://www.google.com/history/)，Google 网络搜索本身将跟踪您搜索和点击的内容，并使用简单的 CSS 规则以紫色适当地突出显示这些链接。

（实际上，我不太确定，但这是我根据自己的观察所相信的。）

# android - 获取图像 Uri

> ID：11574102
> 
> 赞同：0
> 
> 时间：2012-07-20T06:41:53.177
> 
> 标签：android, image, uri

我正在尝试共享图像，但不确定如何在此处获取图像 URI：

```
imageView.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(View v) {
  Intent intent = new Intent(Intent.ACTION_SEND);
  intent.setType("image/jpeg");
  intent.putExtra(Intent.EXTRA_STREAM, [image URI]);
  startActivity(Intent.createChooser(intent, "Share image with"));
  }
} 
```

下面我有上面被取出的所有代码。

公共类 ImagePagerActivity 扩展 BaseActivity {

```
private ViewPager pager;
private DisplayImageOptions options;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.ac_image_pager);

    Context context = getSupportActionBar().getThemedContext();
    ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(context, R.array.locations, R.layout.sherlock_spinner_item);
    list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(list, this);
    getSupportActionBar().setSelectedNavigationItem(1);

    Bundle bundle = getIntent().getExtras();
    String[] imageUrls = bundle.getStringArray(Extra.IMAGES);
    int pagerPosition = bundle.getInt(Extra.IMAGE_POSITION, 0);

    options = new DisplayImageOptions.Builder()
        .showImageForEmptyUri(R.drawable.image_for_empty_url)
        .cacheOnDisc()
        .imageScaleType(ImageScaleType.EXACT)
        .build();

    pager = (ViewPager) findViewById(R.id.pager);
    pager.setAdapter(new ImagePagerAdapter(imageUrls));
    pager.setCurrentItem(pagerPosition);
}

@Override
protected void onStop() {
    imageLoader.stop();
    super.onStop();
}

private class ImagePagerAdapter extends PagerAdapter {

    private String[] images;
    private LayoutInflater inflater;

    ImagePagerAdapter(String[] images) {
        this.images = images;
        inflater = getLayoutInflater();
    }

    @Override
    public void destroyItem(View container, int position, Object object) {
        ((ViewPager) container).removeView((View) object);
    }

    @Override
    public void finishUpdate(View container) {
    }

    @Override
    public int getCount() {
        return images.length;
    }

    @Override
    public Object instantiateItem(View view, int position) {
        final FrameLayout imageLayout = (FrameLayout) inflater.inflate(R.layout.item_pager_image, null);
        final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
        final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

        imageView.setOnClickListener(new OnClickListener() {
              @Override
              public void onClick(View v) {
                Intent intent = new Intent(Intent.ACTION_SEND);
                intent.setType("image/jpeg");
                Uri uri = Uri.fromFile(null);
                intent.putExtra(Intent.EXTRA_STREAM, uri);
                startActivity(Intent.createChooser(intent, "Share image with"));
              }
            }); 

        imageLoader.displayImage(images[position], imageView, options, new ImageLoadingListener() {
            @Override
            public void onLoadingStarted() {
                spinner.setVisibility(View.VISIBLE);
            }

            @Override
            public void onLoadingFailed(FailReason failReason) {
                String message = null;
                switch (failReason) {
                    case IO_ERROR:
                        message = "Input/Output error";
                        break;
                    case OUT_OF_MEMORY:
                        message = "Out Of Memory error";
                        break;
                    case UNKNOWN:
                        message = "Unknown error";
                        break;
                }
                Toast.makeText(ImagePagerActivity.this, message, Toast.LENGTH_SHORT).show();

                spinner.setVisibility(View.GONE);
                imageView.setImageResource(android.R.drawable.ic_delete);
            }

            @Override
            public void onLoadingComplete() {
                spinner.setVisibility(View.GONE);
                Animation anim = AnimationUtils.loadAnimation(ImagePagerActivity.this, R.anim.fade_in);
                imageView.setAnimation(anim);
                anim.start();
            }

            @Override
            public void onLoadingCancelled() {
                // Do nothing
            }
        });

        ((ViewPager) view).addView(imageLayout, 0);
        return imageLayout;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view.equals(object);
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View container) {
    }
}

@Override
public boolean onNavigationItemSelected(int itemPosition, long itemId) {

    if (itemPosition == 0){
        Intent intent = new Intent(getApplicationContext(), MainActivity.class);
        startActivity(intent);
    }

    getSupportActionBar().setSelectedNavigationItem(1);
    return true;
}
} 
```

如果有人可以提供帮助，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:43:48.240

这就是您在可绘制对象中获取图像的 URI 的方式：

```
Uri path = Uri.parse("android.resource://your.package.name/" + R.drawable.your_image); 
```

# java - DTO 与 Formbean

> ID：11574107
> 
> 赞同：1
> 
> 时间：2012-07-20T06:42:12.933
> 
> 标签：java, spring-mvc, standards

我正在开发 Spring MVC 应用程序，并使用 AirPortForm.java 在我的 airport.jsp 中获取信息。但我只是在徘徊我需要使用 AirPortDTO.java 而不是 AirPortForm.java 的标准方法是什么，请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:27:52.853

后缀通常表示该`Form`对象旨在包含来自 HTML 表单的值（Spring 调用这些命令对象）。

`DTO`后缀表示该对象是一个数据传输对象。数据传输对象是一个对象，通常没有太多逻辑，用于在表示层和服务层之间承载信息。

为您的用例使用适当的后缀，或者如果您的对象既不是表单也不是 DTO，则使用另一个后缀或根本不使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:49:33.287

DTO 用于在数据库和应用程序之间传输数据。模型视图控制器 (MVC) 是一种将应用程序与不同层分开的设计模式。DTO 在模型层。在您的应用程序中，您只能使用 AirportFrom.java 类，但这不是一个好习惯。

# websocket - netty 客户端响应映射

> ID：11574109
> 
> 赞同：3
> 
> 时间：2012-07-20T06:42:25.750
> 
> 标签：websocket, netty

我有一个运行各种本机 javascript 客户端连接的 netty **Web 套接字服务器。**现在我想做的是从客户端获取数据请求，并根据每个客户端的请求传回数据。有一种`class A`实际需要根据请求向客户端异步发送连续的数据（即：不是简单的请求回复模型）。

问题是 - 在 A 类，我有我需要发送的所有数据，但是如何确定哪些数据必须发送到哪个客户端（必须根据客户端请求），即：我如何映射客户端请求，要从 A 类发送的数据以及需要从 A 类发送数据的通道。（我将所有通道存储在 a 中`shared ChannelGroup`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T05:00:33.503

你可能想试试这个。

1.  实例[化 DefaultChannelGroup](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/channel/group/DefaultChannelGroup.html)：`DefaultChannelGroup myChannels = new DefaultChannelGroup("myChannels")`

2.  建立 Web 套接字连接后，将其添加到通道组：`myChannels.add()`

3.  将频道 ID 和您的请求 ID 添加到哈希图中

4.  当您有数据要写入时，我假设您有请求 ID。使用它在哈希图中查找您的频道 ID

5.  然后从频道组中获取频道：`myCahnnels.find(channelId)`

6.  最后，将数据写入通道。

希望这可以帮助。

# javascript - 我可以在不使用 XMLHttpRequest 或文档对象的情况下使用 Javascript 获取网页吗？

> ID：11574110
> 
> 赞同：1
> 
> 时间：2012-07-20T06:42:28.197
> 
> 标签：javascript, html

Web 服务器发送 HTML(1) ---> 浏览器获取 HTML(1) ---> 脚本引擎开始工作等等..

我需要在我的项目中获取 HTML(1)。'XMLHttpRequest.responseText' 可以做到。我认为这很棒！但它必须提出另一个请求。

并且“document.getElementsByTagName()”返回渲染的 HTML。这不是我想要的。

我们可以在 IE 开发工具的“脚本”选项卡中看到 HTML(1)。（不是“html”选项卡）然后我猜想无需其他请求就可以获取 HTML(1)。

有什么方法可以使用 javascript 获取 HTML(1) 吗？

已添加-------------- 有sample.html

```
<脚本>
    document.write('AAAAAA');
</脚本>
<正文>
正文内容
</正文>

```

document.getElementsByTagName('html') 返回如下。

```
<脚本>
    document.write('AAAAAA');
</脚本>
<正文>
AAAAAAbody 内容
</正文>

```

但我需要...网页的纯源

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T06:46:58.080

如果要将当前页面作为字符串使用`document.documentElement.innerHTML`

* * *

我不认为浏览器实际上会保留由 Web 服务器发送的原始 HTML，因为如果您尝试查看页面源，浏览器实际上会向服务器发出请求。

# c# - port.WriteLine("AT"); 之间有区别吗？和 port.Write("AT"+Environment.NewLine);

> ID：11574115
> 
> 赞同：1
> 
> 时间：2012-07-20T06:42:44.900
> 
> 标签：c#, at-command

想知道两者是否有区别。解释将不胜感激..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:48:13.130

写线（）

> 默认行终止符是一个字符串，其值是一个回车后跟一个换行符（在 C# 中为“\r\n”，在 Visual Basic 中为 vbCrLf）。

环境.新线

> 包含“\r\n”的字符串用于非 Unix 平台，或包含“\n”的字符串用于 Unix 平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:48:13.453

结果相同，但代码不同。

```
 protected char[] CoreNewLine = new char[2]
    {
      '\r',
      '\n'
    };    
    public virtual void WriteLine(string value)
        {
          if (value == null)
          {
            this.WriteLine();
          }
          else
          {
            int length1 = value.Length;
            int length2 = this.CoreNewLine.Length;
            char[] chArray = new char[length1 + length2];
            value.CopyTo(0, chArray, 0, length1);
            if (length2 == 2)
            {
              chArray[length1] = this.CoreNewLine[0];
              chArray[length1 + 1] = this.CoreNewLine[1];
            }
            else if (length2 == 1)
              chArray[length1] = this.CoreNewLine[0];
            else
              Buffer.InternalBlockCopy((Array) this.CoreNewLine, 0, (Array) chArray, length1 * 2, length2 * 2);
            this.Write(chArray, 0, length1 + length2);
          }
        } 
```

# java - 从 java 中调用 javascript 函数

> ID：11574117
> 
> 赞同：0
> 
> 时间：2012-07-20T06:42:58.130
> 
> 标签：java, javascript, vaadin, jsni, jsobject

我试图从我的 Vaadin Portlet 中调用一个 javascript 函数。

假设我的项目中有一个 HTML 文件；

主页.html

```
<html>  
   ...  
   <script type="text/javascript">  
   ...  
   function foo(String msg)   
   {  
      alert(msg);  
   }  
   ...  
  </script>  
   ...  
</html> 
```

[通过Vaadin 嵌入式浏览器](http://demo.vaadin.com/sampler#WebEmbed)嵌入在我的 Portlet 中的页面

如何从我的 java 应用程序中调用函数 foo(String msg)

我需要导入/读取 homepage.html 文件并调用它还是我必须做的其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:30:41.423

将外部 javascript 文件包含到 Vaadin 应用程序中的最简单方法是覆盖该`Application#writeAjaxPageHtmlVaadinScripts`方法。

要从 Vaadin 服务器端代码调用 javascript 函数，请调用`Window#executeJavascript`

```
@Override
protected void writeAjaxPageHtmlVaadinScripts(Window window,
                                              String themeName, Application application, BufferedWriter page,
                                              String appUrl, String themeUri, String appId,
                                              HttpServletRequest request) throws ServletException, IOException {
  page.write("<script type=\"text/javascript\">\n");
  page.write("//<![CDATA[\n");
  page.write("document.write(\"<script language='javascript' src='" + appUrl + "/VAADIN/scripts/example.js'><\\/script>\");\n");
  page.write("//]]>\n</script>\n");
  super.writeAjaxPageHtmlVaadinScripts(window, themeName, application,
      page, appUrl, themeUri, appId, request);
} 
```

注意：我从未将 Vaadin 用作 Portlet，但快速浏览一下表明这应该可以正常工作。

但是，这种方法相当初级，仅适用于快速破解/概念验证：如果您想要更复杂的东西，那么开发自己的 Vaadin 小部件是正确的方法。它为您提供 GWT 和 JSNI 的强大功能，并为您提供更精细的控制：有关更多详细信息，请参阅[The Book Of Vaadin](https://vaadin.com/book/-/page/gwt.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:51:25.487

首先你需要得到脚本体；然后您可以用户`javax.script.ScriptEngineManager`解决您的问题[javax.script.*](http://docs.oracle.com/javase/6/docs/api/javax/script/package-summary.html)
伪代码

```
import javax.script.*;
ScriptEngine engine = 
            new ScriptEngineManager().getEngineByName("javascript");
String script = getScript(path_to_html);
            engine.eval(script); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:46:55.323

参考以下链接，这些提供了做你想做的事情的API，

[http://www.ibm.com/developerworks/java/library/j-5things9/index.html](http://www.ibm.com/developerworks/java/library/j-5things9/index.html)

[http://metoojava.wordpress.com/2010/06/20/execute-javascript-from-java/](http://metoojava.wordpress.com/2010/06/20/execute-javascript-from-java/)

# solr - 是否可以在 Solr 中突出显示非查询字段？

> ID：11574120
> 
> 赞同：2
> 
> 时间：2012-07-20T06:43:05.610
> 
> 标签：solr

进行查询`field1:term`时是否可以`term`突出显示`field2`？例如，我有这个不起作用的查询：

`q=field1:term&hl=true&hl.fl=field2`

我已经`field2`正确设置了突出显示，因为以下查询有效：

`q=field2:term&hl=true&hl.fl=field2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:01:42.597

你可以！

我一定搞砸了一些配置或架构问题，因为它现在似乎工作正常。似乎它`field2`必须与`field1`使它起作用的类型相同。

# java - 在“ParseDocument(doc)”和“Element docEle = dom.getDocumentElement();”行获取 java.Lang.NULLPOINTEREXCEPTION

> ID：11574126
> 
> 赞同：0
> 
> 时间：2012-07-20T06:43:28.707
> 
> 标签：java, android

在这里，我只是试图解析一个 xml 文件并将内容存储在一个数组列表中，但是每次它在两点给出 java.Lang.NullPointerException 时，请帮助调试这个......

```
public class XML_PARSER extends Activity {

String TAG= "XML_PARSER";
List optionList = new ArrayList(); 
Document dom;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.parser);

    Document doc=parseXmlFile(); 
```

在这一行，它给出了一个 java 空指针异常

```
 ParseDocument(doc); 

    //printData();

}
private Document parseXmlFile(){
    DocumentBuilderFactory dbf= DocumentBuilderFactory.newInstance();

    try {
        DocumentBuilder db = dbf.newDocumentBuilder();
        dom=db.parse("R.raw.options.xml");

    }

    catch(ParserConfigurationException pce){
        pce.printStackTrace();
    }
    catch(SAXException se){
        se.printStackTrace();
    }
    catch(IOException ioe){
        ioe.printStackTrace();
    }
    return dom;

}

private void ParseDocument(Document dom){ 
```

在这个 lineits 给出了同样的错误

```
 Element docEle = dom.getDocumentElement();
    Node node;

    NodeList n1= docEle.getElementsByTagName("Option");
    if(n1!=null && n1.getLength()>0){
        for(int i=0;i<n1.getLength();i++){
            node=n1.item(i);

            Element e1=(Element)n1.item(i);

            Option e = getOption(e1,node);

            optionList.add(e);

            }

        }
    } 
```

这是相同的日志猫

```
07-20 12:21:48.391: E/AndroidRuntime(836): Caused by: java.lang.NullPointerException
07-20 12:21:48.391: E/AndroidRuntime(836):  at com.example.xml_parser.XML_PARSER.ParseDocument(XML_PARSER.java:67)

07-20 12:21:48.391: E/AndroidRuntime(836):  at com.example.xml_parser.XML_PARSER.onCreate(XML_PARSER.java:38)

07-20 12:21:48.391: E/AndroidRuntime(836):  at android.app.Activity.performCreate(Activity.java:5008)

07-20 12:21:48.391: E/AndroidRuntime(836):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)

07-20 12:21:48.391: E/AndroidRuntime(836):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:54:36.137

问题是它`R.raw.options.xml`不是一个有效的 URI，所以在这一行`dom=db.parse("R.raw.options.xml");`中，`dom`变量为空。您正在尝试使用 null 变量的方法（方法内的`doc`行），这就是您获得. 如果您在方法中传递一个有效的 URI，您将消除这两个.`Element docEle = dom.getDocumentElement();``ParseDocument(doc);``NullPointerException``dom=db.parse("valid_URI");``NullPointerExceptions`

**编辑**这是一个完整的例子：

```
private Document parseXmlFile(){
    DocumentBuilderFactory dbf= DocumentBuilderFactory.newInstance();

    try {
       DocumentBuilder db = dbf.newDocumentBuilder();
       Resources res = getResources();
       InputStream in = res.openRawResource(R.raw.options);
       dom=db.parse(in); //Here instead of passing the URI string, you pass the input stream of the file.

    }

    catch(ParserConfigurationException pce){
        pce.printStackTrace();
    }
    catch(SAXException se){
        se.printStackTrace();
    }
    catch(IOException ioe){
        ioe.printStackTrace();
    }
    return dom;

} 
```

希望有帮助。

# java - 调试java for循环：跳到特定的迭代

> ID：11574137
> 
> 赞同：3
> 
> 时间：2012-07-20T06:44:17.320
> 
> 标签：java, debugging, netbeans, for-loop

我正在 Netbeans 中开发一个 java 项目。我有一个运行 29 次的 for 循环，每次迭代大约需要 1 分钟才能完成。问题出在循环的第 29 次迭代中。有什么方法可以跳过前 28 次迭代并直接转到有问题的迭代？

我知道我可以放置一个条件断点，但这会使调试器跳过迭代，它只是在达到特定迭代时通知我。

请帮忙！否则，这将花费大量时间来调试！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T06:54:00.493

您可以使用[Java Platform Debugger Architecture](http://java.sun.com/javase/technologies/core/toolsapis/jpda/)之类的东西。这可能会有所帮助。另一方面，你可以这样做：

```
for (int i = 0; i < ...; i++)
{
    if (i == 28)
    {
         System.out.println("Line Found"); //put breakpoint here
    }

    //remainder of the code.
} 
```

这应该允许您在循环的第 29 次执行时触发断点，然后您可以使用调试器提供的步进函数来检查第 29 次迭代的代码。

我从未使用过 JPDA，即使我使用过，我认为最简单直接的解决方案是执行类似于上述代码的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:53:04.150

您可以在循环中放置一个临时代码行，并在其上放置一个断点：

```
if (i=29) {
    // Put a breakpoint on this line (only hit if i=29)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:48:51.320

更改循环条件。

```
for (int index = 27; index < 28; index++) {

    ...

} 
```

# jquery - 响应式 CSS 边距

> ID：11574139
> 
> 赞同：3
> 
> 时间：2012-07-20T06:44:28.347
> 
> 标签：jquery, css, media-queries

目标是实现这一点：

![在此处输入图像描述](../Images/47444c1a70c07a297a18b50cbd575449.png)

1）黑框代表一个div（#black_box）。

2) 宽度为 1000px 的 div 有负边距，被视口剪裁。

3) 在另一个宽度 2000px 处，负边距被正边距替换。

4）到目前为止，html/css 看起来像这样：

```
<section>
    <div id="content">
        [SOME STUFF]
        <div id="black_box">
            [SOME STUFF]
        </div>
    </div>
</section>

section { margin: 0; padding: 5%; }
#black_box { margin-left: -5%; padding: 5% 5% 5% 10%; } 
```

现在随着视口大小的增加：

```
section { margin-left: 10%; padding: 5%; }
#black_box { margin: 0; padding: 5%; } 
```

我知道有一种简单的方法可以用 jQuery 测试视口宽度，但是你能指定一个范围吗？像 viewport = 300px-1000px 一样，否则 viewport = 1001px+ 这样做？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T06:58:34.877

您可以在 CSS 中使用媒体查询

```
@media only screen and (max-width: 2000px) {
    your css for width 2000
}

@media only screen and (max-width: 1000px) {
        your css for width 1000
} 
```

# flash - 如何将多个 Flash CS6 文件转换为 Flash CS5？

> ID：11574140
> 
> 赞同：0
> 
> 时间：2012-07-20T06:44:38.090
> 
> 标签：flash, adobe, flash-cs5

我知道我可以使用 File > Save As... 将单个 .fla 从 CS6 转换为 CS5.5 或 CS5；但是，我有很多文件需要转换。是否有一种有效的方法来重复执行此任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:12:15.203

使用法兰绒。

[http://ajarproductions.com/blog/2012/03/06/flannel-open-newer-fla-files/](http://ajarproductions.com/blog/2012/03/06/flannel-open-newer-fla-files/)

# php - Zend Framework Mysql WHERE IN 子句

> ID：11574142
> 
> 赞同：1
> 
> 时间：2012-07-20T06:44:46.390
> 
> 标签：php, mysql, zend-framework, where-in

使用 zend 框架，我使用了一个查询，有一个 IN 子句，这是我的查询

```
 $select->where('p.brandid  IN (?)',$details[brand]); 
```

在上面的查询中， $details[brand] 的值类似于这个 array(1,2,3) 。

实际上，查询必须返回与该数组（1,2,3）相关的所有值。

但是我的查询返回与上述数组（1,2,3）中存在的第一个值相关的结果。即不考虑单独的 1 其他 2,3。

当我打印此查询时，它显示如下

```
 [where] => Array
               (
                [0] => (p.brandid  IN ('1,2,3'))
              ) 
```

谁能告诉我我犯了什么错误或解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:48:58.583

这是因为您的查询形成错误 `p.brandid IN ('1,2,3')`，而不是`p.brandid IN (1,2,3)`您可以尝试在 php 中使用 implode 函数

```
$select->where('p.brandid  IN (?)',implode(",",$details[brand])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-15T21:08:52.313

只是小研究，因为我有同样的问题。

我不确定您使用的是哪个版本的 Zend。但是@Omesh 提供的解决方案不适用于我的 1.12 版。

就我而言，这是完全相反的`explode`解决方案：

```
$select->where('p.brandid  IN (?)', explode(',',$details[brand])); 
```

可能这取决于`$details['brand']`. 就我而言，我有类似`555,666,777,877`. 但即使你在那里有数组。`string`如果 Zend 在您的情况下接受（的结果`implode`）并且不接受，那就很奇怪了`array`。就我而言，它不接受`string`但接受`array`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:50:36.133

你可以根据 Zend 框架修改这个

```
locate(concat(',',$details[brand],','),concat(',',p.brandid,','))>0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-19T20:18:21.290

只需使用

```
$select->where->in('field_name', $your_simple_array); 
```

如果您`where()`之前使用具有某些条件的函数，例如

```
$select->where(['field_name' => $value]); 
```

只需使用它之后的第一个，比如

```
$select->where(['field_name' => $value]);
$select->where->in('field_name', $your_simple_array); 
```

永远记住`where`不要将其用作函数`where()`，而应仅用作关键字。

这是有效的，我在以下情况下进行了测试：

```
$select = $this->tableGateway->getSql()->select()->where(['field1' => $v1, 'field2' => $v2]);
$select->where->in('field_name', ['v1', 'v2', 'v3']); 
```

也就是说，在模型类的开头使用这些库：

```
use Zend\Db\Sql\Sql;
use Zend\Db\Sql\Where; 
```

# c++ - 任何针对设计生成 C++ 代码的工具

> ID：11574143
> 
> 赞同：1
> 
> 时间：2012-07-20T06:44:48.880
> 
> 标签：c++, uml, class-design

我有一个类图，我想用一些可以从中生成本机 C++ 的工具来绘制它，我希望有设计优先的方法来测试我为我的应用程序设计的各种数据结构

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:55:29.873

许多工具可以从 UML 图制作 C++ 代码。例如，试试[Software Ideas Modeller](http://www.softwareideas.net/)，它是一个很棒的 UML 工具，而且它可以免费用于非商业用途。

此外，[wiki](http://en.wikipedia.org/wiki/List_of_UML_tools#Features)有一个 UML 工具列表。您可以按“生成的语言”列对它们进行排序，以检查它们支持的内容并选择您喜欢的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:55:37.487

您也可以为您的工作尝试 [**UMLET**](http://www.umlet.com)。

您可以通过键入在 google 上搜索 mofre

*   **相关：www.softwareideas.net***   **相关：www.umlet.com**

    来自[狡猾的黑客](http://www.trickyhacker.com)

# android - 如何在Android列表视图中处理带有复选框的列表视图项目的点击事件？

> ID：11574146
> 
> 赞同：3
> 
> 时间：2012-07-20T06:45:03.387
> 
> 标签：android, listview, checkbox

我将`ArrayAdapter`with`android.R.layout.simple_list_item_multiple_choice`用于我的列表视图。我有一个`onItemClick()`列表视图的处理程序，它启动一个详细显示所选项目的活动。

我希望仅当单击发生在复选框之外时才启动此活动。当单击复选框时，我希望切换复选框状态并且不启动详细视图活动。目前，当单击列表中的任意位置时，两者都会发生，这是不希望的。

可能吗？或者我应该使用自定义适配器并添加一个复选框和 onclick 处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:53:16.553

您可以`custom Adapter`为此使用类，使用自定义适配器的代码是

对于参考检查[here](http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php)

```
 public class PlanetsActivity extends Activity {  

  private ListView mainListView ;  
  private Planet[] planets ;  
  private ArrayAdapter<Planet> listAdapter ;  

  /** Called when the activity is first created. */  
  @Override  
  public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);  

    // Find the ListView resource.   
    mainListView = (ListView) findViewById( R.id.mainListView );  

    // When item is tapped, toggle checked properties of CheckBox and Planet.  
    mainListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {  
      @Override  
      public void onItemClick( AdapterView<?> parent, View item,   
                               int position, long id) {  
        Planet planet = listAdapter.getItem( position );  
        planet.toggleChecked();  
        PlanetViewHolder viewHolder = (PlanetViewHolder) item.getTag();  
        viewHolder.getCheckBox().setChecked( planet.isChecked() );  
      }  
    });  

    // Create and populate planets.  
    planets = (Planet[]) getLastNonConfigurationInstance() ;  
    if ( planets == null ) {  
      planets = new Planet[] {   
          new Planet("Mercury"), new Planet("Venus"), new Planet("Earth"),   
          new Planet("Mars"), new Planet("Jupiter"), new Planet("Saturn"),   
          new Planet("Uranus"), new Planet("Neptune"), new Planet("Ceres"),  
          new Planet("Pluto"), new Planet("Haumea"), new Planet("Makemake"),  
          new Planet("Eris")  
      };    
    }  
    ArrayList<Planet> planetList = new ArrayList<Planet>();  
    planetList.addAll( Arrays.asList(planets) );  

    // Set our custom array adapter as the ListView's adapter.  
    listAdapter = new PlanetArrayAdapter(this, planetList);  
    mainListView.setAdapter( listAdapter );        
  }  

  /** Holds planet data. */  
  private static class Planet {  
    private String name = "" ;  
    private boolean checked = false ;  
    public Planet() {}  
    public Planet( String name ) {  
      this.name = name ;  
    }  
    public Planet( String name, boolean checked ) {  
      this.name = name ;  
      this.checked = checked ;  
    }  
    public String getName() {  
      return name;  
    }  
    public void setName(String name) {  
      this.name = name;  
    }  
    public boolean isChecked() {  
      return checked;  
    }  
    public void setChecked(boolean checked) {  
      this.checked = checked;  
    }  
    public String toString() {  
      return name ;   
    }  
    public void toggleChecked() {  
      checked = !checked ;  
    }  
  }  

  /** Holds child views for one row. */  
  private static class PlanetViewHolder {  
    private CheckBox checkBox ;  
    private TextView textView ;  
    public PlanetViewHolder() {}  
    public PlanetViewHolder( TextView textView, CheckBox checkBox ) {  
      this.checkBox = checkBox ;  
      this.textView = textView ;  
    }  
    public CheckBox getCheckBox() {  
      return checkBox;  
    }  
    public void setCheckBox(CheckBox checkBox) {  
      this.checkBox = checkBox;  
    }  
    public TextView getTextView() {  
      return textView;  
    }  
    public void setTextView(TextView textView) {  
      this.textView = textView;  
    }      
  }  

  /** Custom adapter for displaying an array of Planet objects. */  
  private static class PlanetArrayAdapter extends ArrayAdapter<Planet> {  

    private LayoutInflater inflater;  

    public PlanetArrayAdapter( Context context, List<Planet> planetList ) {  
      super( context, R.layout.simplerow, R.id.rowTextView, planetList );  
      // Cache the LayoutInflate to avoid asking for a new one each time.  
      inflater = LayoutInflater.from(context) ;  
    }  

    @Override  
    public View getView(int position, View convertView, ViewGroup parent) {  
      // Planet to display  
      Planet planet = (Planet) this.getItem( position );   

      // The child views in each row.  
      CheckBox checkBox ;   
      TextView textView ;   

      // Create a new row view  
      if ( convertView == null ) {  
        convertView = inflater.inflate(R.layout.simplerow, null);  

        // Find the child views.  
        textView = (TextView) convertView.findViewById( R.id.rowTextView );  
        checkBox = (CheckBox) convertView.findViewById( R.id.CheckBox01 );  

        // Optimization: Tag the row with it's child views, so we don't have to   
        // call findViewById() later when we reuse the row.  
        convertView.setTag( new PlanetViewHolder(textView,checkBox) );  

        // If CheckBox is toggled, update the planet it is tagged with.  
        checkBox.setOnClickListener( new View.OnClickListener() {  
          public void onClick(View v) {  
            CheckBox cb = (CheckBox) v ;  
            Planet planet = (Planet) cb.getTag();  
            planet.setChecked( cb.isChecked() );  
          }  
        });          
      }  
      // Reuse existing row view  
      else {  
        // Because we use a ViewHolder, we avoid having to call findViewById().  
        PlanetViewHolder viewHolder = (PlanetViewHolder) convertView.getTag();  
        checkBox = viewHolder.getCheckBox() ;  
        textView = viewHolder.getTextView() ;  
      }  

      // Tag the CheckBox with the Planet it is displaying, so that we can  
      // access the planet in onClick() when the CheckBox is toggled.  
      checkBox.setTag( planet );   

      // Display planet data  
      checkBox.setChecked( planet.isChecked() );  
      textView.setText( planet.getName() );        

      return convertView;  
    }  

  }  

  public Object onRetainNonConfigurationInstance() {  
    return planets ;  
  }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T09:18:39.920

你可以这样做

```
public class MainActivity extends ActionBarActivity implements OnClickListener {

Button mbtn_submit;

ListView mlistview;

List<String> namesList;

ArrayAdapter<String> adapter;

String names[] = { "Divya", "Kavya", "Janu", "Anu", "Sneha", "Vistnu",
        "Ravi", "Anil" };

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mlistview = (ListView) findViewById(R.id.listview);
    mbtn_submit = (Button) findViewById(R.id.btn_submit);

    namesList = new ArrayList<String>();
    for (int i = 0; i < names.length; i++) {

        namesList.add(names[i]);
    }
    adapter = new ArrayAdapter<>(this,
            android.R.layout.simple_list_item_multiple_choice, namesList);
    mlistview.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    mlistview.setAdapter(adapter);

    mbtn_submit.setOnClickListener(this);
}

@Override
public void onClick(View v) {

    SparseBooleanArray checked = mlistview.getCheckedItemPositions();

    ArrayList<String> selectedItems = new ArrayList<String>();

    for (int i = 0; i < checked.size(); i++) {
        int position = checked.keyAt(i);
        if (checked.valueAt(i))
            selectedItems.add(adapter.getItem(position));
    }
    String[] selectedItemsArr = new String[selectedItems.size()];

    for (int i = 0; i < selectedItems.size(); i++) {
        selectedItemsArr[i] = selectedItems.get(i);
    }

    Intent intent = new Intent(MainActivity.this,
            SelectedListActivity.class);

    Bundle bundle = new Bundle();
    bundle.putStringArray("selectedItems", selectedItemsArr);

    intent.putExtras(bundle);

    startActivity(intent);
}
} 
```

和选定列表

```
public class SelectedListActivity extends ActionBarActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_selected_list);

    Bundle bundle = getIntent().getExtras();
    String[] resultArr = bundle.getStringArray("selectedItems");
    ListView lv = (ListView) findViewById(R.id.selectedList);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, resultArr);
    lv.setAdapter(adapter);
}
} 
```

# asp.net-mvc-3 - 忽略 DateTime 道具被序列化（不工作）

> ID：11574147
> 
> 赞同：0
> 
> 时间：2012-07-20T06:45:04.093
> 
> 标签：asp.net-mvc-3, javascriptserializer

我已经尝试过[**此**](https://stackoverflow.com/questions/9285439/ignoring-properties-when-serializing)解决方案中提出的解决方案

我有课

```
public class MyClass
{
    [IgnoreDataMember]
    public DateTime? Date { get; set; }
} 
```

当 JavaScriptSerializer 序列化结果时，它会更改日期时间，例如，如果我`2012-07-20`在序列化后在我的数据库中有返回，`2012-07-21`因为应用程序托管在我的时区之外的位置，因此我面临很多问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:47:16.030

您可以使用该[`[ScriptIgnore]`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.scriptignoreattribute.aspx)属性来排除使用 JavaScriptSerializer 序列化的属性：

```
public class MyClass
{
    [ScriptIgnore]
    public DateTime? Date { get; set; }

    ... some other properties
} 
```

话虽如此，正确的方法是使用一个视图模型，该模型根本不包含您不希望包含在响应中的属性，然后返回此视图模型，而不是使用管道来*折磨*您的域模型关于序列化的代码，他们应该绝对不知道。

# android - 如何在Android屏幕底部设置标签栏？

> ID：11574151
> 
> 赞同：0
> 
> 时间：2012-07-20T06:45:32.793
> 
> 标签：android, layout, tabbar, tabwidget, android-framelayout

目前我正在 Android 中使用标签栏应用程序。这里我提到了供您参考的代码，我参考了网络，找到的一些链接（android：layout_alignParentBottom =“true”）在TabWidget中插入了这一行，但标签栏仅在顶部可见，所以请帮助我

提前致谢

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/tabhost"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="#EBF1FF">

  <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TabWidget android:id="@android:id/tabs"
      android:layout_width="fill_parent"
  =========> android:layout_alignParentBottom = "true" <=======
      android:layout_height="wrap_content"
     />

    <FrameLayout android:id="@android:id/tabcontent"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:47:24.053

`android:layout_alignParentBottom = "true"`只有`TabWidget`在`RelativeLayout`.. _

```
<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<TabWidget android:id="@android:id/tabs"
  android:layout_width="fill_parent"
android:layout_alignParentBottom = "true" 
 android:layout_height="wrap_content" />

<FrameLayout android:id="@android:id/tabcontent"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"> 
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:03:12.847

只需将. `TabWidget` **_**`FrameLayout`

并用于`android:tabStripEnabled="false"`将条带隐藏在 tabwidget 下，因为它在底部时看起来很难看。

# iphone - 收到推送通知时如何重新加载表格视图？

> ID：11574154
> 
> 赞同：7
> 
> 时间：2012-07-20T06:45:43.670
> 
> 标签：iphone, ios, ipad

我有一个 iPhone 应用程序，我在其中添加推送通知。

当我收到推送通知时，我需要在此处调用[Web 服务](http://en.wikipedia.org/wiki/Web_service)后转到要加载表格视图的特定视图。问题是当我站在同一个视图中时。如果我收到推送消息，我需要在前台和后台重新加载 tableview。但是当我这样做时，它无法正常工作。我如何实现这一目标？

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    NSLog(@"########################################didReceiveRemoteNotification****************************###################### %@",userInfo);

    // Check application in forground or background
    if (application.applicationState == UIApplicationStateActive)
    {
        if (tabBarController.selectedIndex==0)
        {
            NSArray *mycontrollers = self.tabBarController.viewControllers;
            NSLog(@"%@",mycontrollers);
            [[mycontrollers objectAtIndex:0] viewWillAppear:YES];
            mycontrollers = nil;
        }

        tabBarController.selectedIndex = 0;
        //NSLog(@"FOreGround");
        //////NSLog(@"and Showing %@",userInfo)
    }
    else {
        tabBarController.selectedIndex = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-20T07:08:32.787

`NSNotificationCenter`当收到推送通知时，您可以尝试使用本地通知重新加载您的表格。

当收到推送通知时，触发您的本地通知。在您的视图控制器中，收听本地通知并执行任务。

例如：

在您的 didReceiveRemoteNotification 中：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"reloadTheTable" object:nil]; 
```

在您的 ViewController 添加观察者（在`viewDidLoad`）：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadTable:) name:@"reloadTheTable" object:nil]; 
```

并实现以下方法：

```
- (void)reloadTable:(NSNotification *)notification
{
    [yourTableView reloadData];
} 
```

同时删除`viewDidUnload`or中的观察者`viewWillDisappear`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-20T14:17:17.980

斯威夫特 3 版本：

在 didReceiveRemoteNotification

```
NotificationCenter.default.post(name: NSNotification.Name(rawValue: "reloadTheTable"), object: nil) 
```

在您的 ViewController 添加观察者（在 viewDidLoad 中）：

```
NotificationCenter.default.addObserver(self, selector: #selector(self.reloadTable), name: NSNotification.Name(rawValue: "reloadTheTable"), object: nil) 
```

并在视图中将消失

```
 NotificationCenter.default.removeObserver("reloadTheTable") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-30T11:01:43.913

Swift 4 版本：在 didReceiveRemoteNotification

```
NotificationCenter.default.post(name: Notification.Name(rawValue: "reloadEventsTable"), object: nil) 
```

在您的 ViewController 添加观察者（在 viewDidLoad 中）：

```
NotificationCenter.default.addObserver(self, selector: #selector(onReloadEventsTable), name: Notification.Name(rawValue: "reloadEventsTable"), object: nil) 
```

关于删除观察者我曾经在 deinit() 中执行此操作，但有趣的是，从 iOS 9 开始，如果您不使用基于块的观察者，您不需要自己删除观察者。[https://stackoverflow.com/a/40339926/3793165](https://stackoverflow.com/a/40339926/3793165)

# haskell - 如何使用数据类型半径的 decleration 编写形状的表面函数 - 圆？

> ID：11574157
> 
> 赞同：0
> 
> 时间：2012-07-20T06:46:02.653
> 
> 标签：haskell, types, typeclass

下面的 Haskell 代码运行良好。

```
data Point = Point Float Float deriving (Show)  
data Shape = Circle Point Float  
surface :: Shape -> Float  
surface (Circle _ r) = pi * r ^ 2 
```

结果：

```
*Main> surface $ Circle (Point 0 0) 10  
314.15927 
```

下面的 Haskell 代码不起作用。为什么？如何正确编写表面函数`Shape`？`Circle`

```
data Point = Point Float Float deriving (Show)  
data Radius = Radius Float deriving (Show)

data Shape = Circle Point Radius   

surface :: Shape -> Float  
surface (Circle _ (Radius r)) = pi * (Radius r) ^ 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:48:48.357

您的最后一行是构造一个`Radius`对象并将其提升为幂。由于您尚未为 定义幂运算符`Radius`，因此这是行不通的。删除构造函数调用：

```
surface (Circle _ (Radius r)) = pi * r ^ 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:51:47.383

有两个修复。一个就像您编写的第一段代码一样：在实际计算位中使用 a`Float`而不是 a 。`Radius`

```
surface :: Shape -> Float
surface (Circle _ (Radius r)) = pi * r ^ 2 
```

另一种是看类型`(^)`：

```
(^) :: (Num a, Integral b) -> a -> b -> a 
```

...并观察到`Radius r ^ 2`要工作，我们需要有一个实例`Num Radius`。此外，结果将是 type 的值`Radius`（不是`Float`），因此`surface`必须更改的类型签名才能匹配。简单的：

```
newtype Radius = Radius Float deriving (Num, Show)

surface :: Shape -> Radius -- weird looking type
surface (Circle _ r) = pi * r ^ 2
surface (Circle _ (Radius r)) = pi * Radius r ^ 2 -- equivalent 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:14:41.600

您可以简单地使用`(,)`代替`Point`，和`Float`代替`Radius`。

您还可以将 定义`Shape`为一个类。所以代码将是

```
type Point = (Float, Float)
data Circle = Circle { center :: Point, radius :: Float }

class Shape a where
  surface :: a -> Float

instance Shape Circle where
  surface c = pi * (radius c) ** 2 
```

这是一个可能的实现，试试吧~

# iphone - 从 iphone 应用程序中的两个表中的数据库中选择数据

> ID：11574158
> 
> 赞同：1
> 
> 时间：2012-07-20T06:46:08.337
> 
> 标签：iphone, xcode, sqlite

我想从表中选择数据，但那些在问题表和答案表中具有相同问题 ID 的数据。现在它从答案中选择所有数据，代码如下所示

```
 + (void) getAnswers:(NSString*)dbPath{

     CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];

    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

    const char *sql = "select *from answers";

     sqlite3_stmt *selectstmt;
    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

        while(sqlite3_step(selectstmt) == SQLITE_ROW) {

            NSInteger primaryKey = sqlite3_column_int(selectstmt, 0);
            Answers *coffeeObj = [[Answers alloc] initWithPrimaryKey:primaryKey];

            coffeeObj.answer_text = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 3)];

            NSString*testString=coffeeObj.answer_text;

            NSLog(testString);
            [appDelegate.answerArray addObject:coffeeObj];

            int mycount=[appDelegate.answerArray count];

            NSLog(@"This is int of latest %d",mycount);

            [coffeeObj release];
           }
           }
           }

     else
         sqlite3_close(database); //Even though the open call failed, close the database connection to release all the memory.
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:43:43.830

我建议避免调用 SQLite DB 的 c 级代码 - 尝试对 SQLite 进行简单的包装 - 请参阅[https://github.com/JohnGoodstadt/EasySQLite](https://github.com/JohnGoodstadt/EasySQLite)

这将允许：

```
DataTable* result = [_db  ExecuteQuery:@"SELECT * FROM answers"]; 
```

感觉就像您需要使用 LEFT JOIN 语句来回答您的实际查询 - 如果您添加有关您的表定义的信息以及您想要获取的数据，我可以提供更多帮助。

# javascript - 用户登录 JSF 页面后禁用浏览器后退按钮

> ID：11574160
> 
> 赞同：-1
> 
> 时间：2012-07-20T06:46:17.660
> 
> 标签：javascript, jsf, tiles

我在 Spring web flow 中使用了磁贴。这是我的标准 jsf 文件。

标准.xhtml

```
 <f:view contentType="text/html">

   <h:head >
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Nagra Employee Leave Application</title>
<link rel="stylesheet" href="${request.contextPath}/styles/blueprint/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="${request.contextPath}/styles/blueprint/print.css" type="text/css" media="print" />

<link rel="stylesheet" href="${request.contextPath}/styles/le-frog/jquery-ui-1.8.2.custom.css" type="text/css" media="screen" />
<ui:insert name="headIncludes"/>
<style>

</style>
  </h:head>
   <h:body  style="background:#343433" >
   <div class="container" style="background:white;">

    <a href="#{request.contextPath}"><img src="${request.contextPath}/images/rubon1.jpg" height="200" width="950" alt="Spring Travel"/></a>

<div>
    <div id="local" class="span-4 colborder" style="padding-top: 20px;
    padding-left: 21px;">
        <h3>Nagra Vision</h3>
        <ui:insert name="notes"/>
    </div>
    <div class="span-19 last" style="width: 720px;">
        <ui:insert name="content"/>
    </div>
</div>

<div>
    <a href="http://www.nagra.com">
        <img src="${request.contextPath}/images/nagra_footer.png" alt="Powered by Nagra-India" />
    </a>
</div>
 </div>
 </h:body> 
```

登录.xhtml

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
template="/WEB-INF/layouts/standard.xhtml">

<ui:define name="content">
    <h:form style="margin-top:10px;">
        <div>
            <h:outputLabel for="username">Username:    </h:outputLabel>
            <h:inputText id="username" value="#{userInfo.username}">          </h:inputText>
        </div>
        <div>
            <h:outputLabel for="password">Password:    </h:outputLabel>
            <h:inputSecret id="password" value="#{userInfo.password}">
            </h:inputSecret>
        </div>
        <div>

            <h:selectBooleanCheckbox id="leavetype"
                value="#{userInfo.loginperson}">
                <f:selectItems value="#{referenceData.loginPersonOptions}" />
            </h:selectBooleanCheckbox>
            <h:outputLabel for="password">Select you are a manager</h:outputLabel>
        </div>

        <div>
            <p:commandButton id="Signin" action="click" value="Sign In"
                style="margin-left:80px;" />
        </div>
    </h:form>
</ui:define> 
```

主页.xhtml

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
template="/WEB-INF/layouts/standard.xhtml">
<ui:define name="notes">
    <h:outputLabel for="employee">${loginperson.username}</h:outputLabel>
    <h:form>
    <div>   <h:commandLink value="Sick Leave" action="sickleave" id="sickleave" /></div>
    <div>   <h:commandLink value="Paid off Leave" action="paidleave" id="paidleave" /></div>
    <div>   <h:commandLink value="Logout" action="logout" id="logout" /></div>
    </h:form>

</ui:define>
<ui:define name="content">
     <h2 style="font-size: 16px; font-weight: bold; margin-top: 100px;">Available
        Leave</h2>

    <h:dataTable value="#{leaveavailable}" var="a"
        styleClass="order-table" headerClass="order-table-header"
        rowClasses="order-table-odd-row,order-table-even-row"
        columnClasses="order-table-odd-column,order-table-even-column">
        <h:column>
            <f:facet name="header">
                Sick Leave
            </f:facet>
                #{a.totalSickLeave}
        </h:column>
        <h:column>
            <f:facet name="header">
                Paidoff Leave
            </f:facet>
                #{a.totalPaidoffLeave}
        </h:column>
    </h:dataTable>

</ui:define> 
```

这里一旦用户登录用户将看到mainpage.xhtml。用户进入主页后，如果他按下浏览器的后退按钮，它会将我带到登录页面。所以我需要禁用后退按钮。我不要在哪里添加javascript代码以禁用浏览器后退按钮。我必须添加mainpage.xhtml还是standard.xhtml。

我必须添加什么java脚本来禁用后退按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:53:00.563

禁用后退按钮是不可能的 - 看看[这里](https://stackoverflow.com/questions/87422/disabling-back-button-on-the-browser)，从用户体验的角度来看，这也可能是一个坏主意，所以没有太大的损失。试图这样做被列为[1999 年网页设计的第一大错误](http://www.useit.com/alertbox/990530.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:54:58.587

您不能禁用后退按钮。但是，您可以从浏览器历史记录中删除当前文档，并使用[`window.location.replace`](https://developer.mozilla.org/en/DOM/window.location#Methods). 请记住，在这种情况下您需要使用 AJAX，因为`replace`必须从要替换的文档中调用。

与其干预 JavaScript 并试图破坏用户的浏览器，不如在服务器端检查用户是否已经登录并将他重定向到您的主页？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T08:38:10.717

如果适合您的情况，您可以尝试关注。

1.  通过设置适当的 http 无缓存技巧来停止缓存页面，请参阅[文章](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)。
2.  登录后，您将在会话中存储一些信息，因为当用户单击后退按钮时您不会缓存页面，新请求将被发送到服务器，在处理登录页面请求时您可以检查，如果已经登录重定向到一些不同的页面。

希望这可以帮助 ！！！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-04T08:58:59.687

```
Just try this,it works fine for me :)
Disable Back functionality using history.forward 
```

这是在任何网页中禁用返回功能的另一种技术。我们可以通过在网页中添加以下代码来禁用后退导航。现在要注意的是，您必须在要避免用户从上一页返回的所有页面中添加此代码。例如，用户跟随导航 page1 -> page2。并且您想阻止用户从 page2 返回到 page1。在这种情况下，page1 中的所有以下代码。

```
<SCRIPT type="text/javascript">
    window.history.forward();
    function noBack() { window.history.forward(); }
</SCRIPT>
</HEAD>
<BODY onload="noBack();"
onpageshow="if (event.persisted) noBack();" onunload=""> 
```

上面的代码将触发 page1 的 history.forward 事件。因此，如果用户在 page2 上按下 Back 按钮，他将被发送到 page1。但是 page1 上的 history.forward 代码将用户推回到 page2。因此，用户将无法从 page1 返回。要查看在线演示 - [http://viralpatel.net/blogs/demo/javascript-disable-browser-back-button/](http://viralpatel.net/blogs/demo/javascript-disable-browser-back-button/)

# clojure - clojure 中的 while 修饰符是什么意思？

> ID：11574161
> 
> 赞同：2
> 
> 时间：2012-07-20T06:46:25.000
> 
> 标签：clojure

下面显示了修饰符“while”表示一旦元素匹配检查，迭代将停止：

```
=> (for [x [3 2 3 1] :while (< x 3)] x)
() 
```

但是为什么以下不停止迭代？在我的（错误）理解中，它应该返回一个空列表。

```
=> (for [x [3 2 3 1] y [:a :b] :while (< x 3)] [x y])
([2 :a] [2 :b] [1 :a] [1 :b]) 
```

实际上，在这种情况下，“when”和“while”修饰符之间没有区别。

```
=> (for [x [3 2 3 1] y [:a :b] :when (< x 3)] [x y])
([2 :a] [2 :b] [1 :a] [1 :b]) 
```

那是怎么发生的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T06:56:49.297

`:while`and修饰符总是在`:when`紧接在它们之前的绑定之后检查，并且仅适用于该循环的*迭代*。如果要停止绑定 new `x`，则需要`:while`在子句之后放置`x`，而不是`y`子句。

# xml - 使用具有不同节点的 xslt 复制两个元素

> ID：11574163
> 
> 赞同：-1
> 
> 时间：2012-07-20T06:46:30.107
> 
> 标签：xml, xslt, xslt-2.0

下面是我的输入 XML

```
<First>
<practice-session note="yes">
    <lessons>13000</lessons>
    <lessons>15000</lessons>
    <lessons>note</lessons>
</practice-session>
<practice-repeats note="yes">>
    <repeat>20000</repeat>
    <repeat>15000</repeat>
    <repeat>description</repeat>
</practice-repeats>
</First> 
```

上面的输出是

```
<chapters>
<chapter>
    <practice-session>
        <value>13000</value>
    </practice-session>
    <practice-repeats>
        <value>20000</value>
    </practice-repeats>
</chapter>
<chapter>
    <practice-session>
        <lesson>15000</lesson>
    </practice-session>
    <practice-repeats>
        <lesson>20000</lesson>
    </practice-repeats>
</chapter>
<chapter>
    <practice-session>
        <lesson>NOTE CHG</lesson>
    </practice-session>
    <practice-repeats>
        <lesson>ENG CHG</lesson>
    </practice-repeats>
</chapter>
</chapters> 
```

当我在做谷歌和堆栈溢出时，人们建议使用 xsl:copy-of，但是当我使用 xsl:copy 时，我将如何照顾每个练习会话将有练习重复。

有人能帮我一下吗。

提前致谢

问候卡西克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:51:00.910

我认为不需要复制。尝试这个 ...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />  

<xsl:template match="/">
 <chapters>
   <xsl:apply-templates select="First/practice-session/lessons"/>
 </chapters>
</xsl:template>

<xsl:template match="lessons">
<chapter>
 <practice-session>
  <value><xsl:value-of select="." /></value>
 </practice-session>
 <practice-repeats>
   <value><xsl:value-of select="
     ../following-sibling::practice-repeats[1]/
     repeat[ count( current()/preceding-sibling::lessons) + 1]" /></value>
 </practice-repeats>
</chapter>
</xsl:template>

</xsl:stylesheet> 
```

# osgi - 依赖包的 OSGI 包（在 Karaf 下）的自然启动顺序是什么？

> ID：11574166
> 
> 赞同：3
> 
> 时间：2012-07-20T06:46:46.947
> 
> 标签：osgi, apache-karaf

我在 2.2.8 版本的 Karaf 上遇到了问题（很可能在早期版本上也是如此）。

我将使用 Karaf 来托管具有动态部署的捆绑包的系统。捆绑包是由用户部署的，我事先无法知道它们是什么。

我希望 BundleActivator.start() 的顺序完全对应于包之间的包依赖关系（导入/导出包的依赖关系），并计划期望在 bundle1 将要启动之前假设 bundle0 将被完全初始化是安全的. 但事实并非如此 - 似乎 BundleActivator.start() 是以“随机”顺序调用的，并且忽略了包之间的包依赖关系。

示例用例，我有 3 个库

```
test-lib0 - defines testlib0.ITestRoot, exports testlib0 package 
test-lib1 - defines testlib1.TestRoot implements ITestRoot,  exports testlib1 package 
test-lib2 - uses both libs, ITestRoot and TestRoot 
```

当 Karaf 启动时，我在控制台中看到以下示例输出

```
karaf@root> TestLib1Activator.start() 
TestLib2Activator.start() 
        ITestRoot: interface com.testorg.testlib0.ITestRoot - 16634462 
        TestRoot:  class com.testorg.testlib1.TestRoot - 21576551 
TestLib0Activator.start() 
```

但我希望它应该总是按这个顺序

```
TestLib0Activator.start() 
TestLib1Activator.start() 
TestLib2Activator.start() 
        ITestRoot: interface com.testorg.testlib0.ITestRoot - 16634462 
        TestRoot:  class com.testorg.testlib1.TestRoot - 21576551 
```

我正在附加示例项目进行测试。测试用例：“mvn install”后，只需将 jar 从 ./deploy 文件夹移动到 Karaf 的同一个文件夹，跟踪消息应该会出现在控制台中。（注意：它可能从第一次尝试就可以正常工作，然后再试一次:)）

示例测试项目 [http://karaf.922171.n3.nabble.com/file/n4025256/KarafTest.zip](http://karaf.922171.n3.nabble.com/file/n4025256/KarafTest.zip)

[注意：这是来自http://karaf.922171.n3.nabble.com/What-is-the-natural-start-order-for-dependent-bundle-td4025256.html](http://karaf.922171.n3.nabble.com/What-is-the-natural-start-order-for-dependent-bundle-td4025256.html)的交叉帖子

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T07:16:20.023

在 OSGi 中，bundle 生命周期是`installed`→ `resolved`→ `starting`→ `started`。

Import-Package 和 Export-Package 仅影响捆绑包从`installed`到`resolved`。因此，该框架确保您从中导入包的所有包都在您的包之前解析，但您的包只进入已解决状态。然后在第二步中调用激活器。所以你不能假设激活器是按相同的顺序调用的。如果您需要在 testlib2 工作之前进行一些初始化，那么您应该使用 OSGi 服务。

因此，如果我正确理解了您的情况，那么您 testlib0 定义了一个接口， testlib1 实现了它，而 testlib2 想要使用该实现。所以实现这一点的最佳方法是将 impl 作为 OSGi 服务发布到 testlib1 中，并在 testlib3 中引用该服务。然后，您可以将服务与 ServiceTracker 或蓝图一起使用。我有一个小例子可以说明这一点：[http](http://www.liquid-reality.de/x/DIBZ) ://www.liquid-reality.de/x/DIBZ 。因此，如果您像我的示例蓝图那样执行您的案例，请确保 testlib2 的上下文仅在服务存在时才启动。当服务消失时，它甚至会停止 testlib2。

# ruby-on-rails - ruby 如果登录使用。登录.rhtml 否则使用 notloggedin.rhtml

> ID：11574172
> 
> 赞同：0
> 
> 时间：2012-07-20T06:47:00.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我必须使用 ruby​​ 而不是 php，如果不使用 notloggedin.rhtml，则需要告诉 ruby​​ 如果登录使用使用loggedin.rhtml。但文件仅包含页面的一部分菜单，因此它类似于 php 包含函数但带有 if 语句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:05:17.503

Ruby 可以执行 shell 脚本，PHP 也不例外。

```
if logged_in?
  output = `this.php`
else
  output = `that.php`
end 
```

这将执行`this.php`or`that.php`并将脚本输出存储在 中`output`，假设脚本具有[*执行*权限](http://en.wikipedia.org/wiki/File_system_permissions)和适当的[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)：

```
#!/usr/bin/env php
<?php
   echo "hello world";
?> 
```

请注意，这就像[在命令行中使用 PHP](http://php.net/manual/en/features.commandline.php)一样，脚本无权访问 Rails 环境中的任何对象，即，您不能使用[`$_REQUEST`](http://php.net/manual/en/reserved.variables.request.php)or之类的变量[`$_SESSION`](http://www.php.net/manual/en/reserved.variables.session.php)。如果您需要脚本中的任何数据，则必须将其作为参数显式传递。

# spring - JBoss 5.1 NotImplementedException 上的 CXF 安全性

> ID：11574173
> 
> 赞同：1
> 
> 时间：2012-07-20T06:47:01.063
> 
> 标签：spring, security, cxf, jboss5.x

我正在使用 Java 6、Spring 3.0.5.RELEASE、Apache CXF 2.4.1、JBoss 5.1。我的配置适用于 Tomcat 7，但在 JBoss 上，当我向服务器发送 SOAP 消息时，我得到了 NotImplementedException。

```
Service has thrown exception, unwinding now org.jboss.util.NotImplementedException
at org.jboss.ws.core.soap.SOAPPartImpl.appendChild(SOAPPartImpl.java:298)
at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:970)
at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:947)
at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:157)
at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:60)
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:118)
at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:208)
at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:223)
at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:205)
at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:113)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:184) 
```

**应用程序上下文.xml**

```
<import resource="classpath:META-INF/cxf/cxf.xml" />
<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />
<import resource="classpath*:META-INF/cxf/cxf-extension-*.xml" />

<jaxws:endpoint id="myServiceEndPoint" implementor="#myService" address="/myService">
    <jaxws:inInterceptors>
        <bean class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor">
            <constructor-arg>
                <map>
                    <entry key="action" value="UsernameToken" />
                    <entry key="passwordType" value="PasswordDigest" />
                    <entry key="signaturePropFile" value="..." />
                    <entry key="passwordCallbackRef">
                        <ref bean="myPasswordCallback" />
                    </entry>
                </map>
            </constructor-arg>
        </bean>
    </jaxws:inInterceptors>
</jaxws:endpoint>

<bean id="myPasswordCallback" class="com.middleware.security.ServerPasswordCallback" /> 
```

**服务器密码回调.java**

```
import javax.security.auth.callback.Callback;
import javax.security.auth.callback.CallbackHandler;
import javax.security.auth.callback.UnsupportedCallbackException;
import org.apache.ws.security.WSPasswordCallback;

public class ServerPasswordCallback implements CallbackHandler {

     public void handle(Callback[] callbacks) throws IOException,
        UnsupportedCallbackException {

    WSPasswordCallback pc = (WSPasswordCallback) callbacks[0];

    if (pc.getIdentifier().equals("nbi")) {
        pc.setPassword("123");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:22:42.370

At last it works. I changed apache cxf version to 2.1.10 and changed scope of some dependencies.

```
 <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-core</artifactId>
        <version>${cxf.version}</version>
    </dependency>

    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-frontend-jaxws</artifactId>
        <version>${cxf.version}</version>
        <exclusions>
            <exclusion>
                <groupId>xml-resolver</groupId>
                <artifactId>xml-resolver</artifactId>
            </exclusion>
            <exclusion>
                <groupId>asm</groupId>
                <artifactId>asm</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http</artifactId>
        <version>${cxf.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-api</artifactId>
        <version>${cxf.version}</version>
    </dependency>

    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-ws-security</artifactId>
        <version>${cxf.version}</version>
        <scope>compile</scope>
        <exclusions>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
            </exclusion>
            <exclusion>
                <groupId>xalan</groupId>
                <artifactId>xalan</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.apache</groupId>
                <artifactId>serializer</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>xml-resolver</groupId>
        <artifactId>xml-resolver</artifactId>
        <version>1.2</version>
        <scope>provided</scope>
    </dependency>
    <!-- <dependency> -->
    <!-- <groupId>javax.xml.soap</groupId> -->
    <!-- <artifactId>saaj-api</artifactId> -->
    <!-- <version>1.3</version> -->
    <!-- </dependency> -->
    <!-- <dependency> -->
    <!-- <groupId>com.sun.xml.messaging.saaj</groupId> -->
    <!-- <artifactId>saaj-impl</artifactId> -->
    <!-- <version>1.3</version> -->
    <!-- </dependency> -->
    <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.1.13</version>
    </dependency>
    <dependency>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <!-- <dependency> -->
    <!-- <groupId>javax.xml</groupId> -->
    <!-- <artifactId>jaxrpc-api-osgi</artifactId> -->
    <!-- <version>1.1-b01</version> -->
    <!-- </dependency> -->
    <dependency>
        <groupId>javax.xml.ws</groupId>
        <artifactId>jaxws-api</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.axis</groupId>
        <artifactId>axis-jaxrpc</artifactId>
        <version>1.4</version>
        <scope>provided</scope>
    </dependency> 
```

# php - 从设置模型 cakePHP 访问数据

> ID：11574177
> 
> 赞同：0
> 
> 时间：2012-07-20T06:47:05.143
> 
> 标签：php, cakephp

如果我在控制器中设置 Post 模型，如下所示；

```
 $this->Post->id = $id; 
```

我可以从 Post 访问数据还是必须执行执行；

```
 $this->Post->read() 
```

我想在 Post 上执行一些进一步的验证以确定正在执行的逻辑。

例如，如果 Post['submitted_by'] = $this->Auth->user('role') == 'admin') **"伪代码"**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:54:21.437

试试这段代码：

```
$data = $this->Post->read(null, $id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:29:39.080

您必须 read() 才能访问数据。

这就是 MVC 的工作方式（[那里有更多信息](http://book.cakephp.org/2.0/en/cakephp-overview/understanding-model-view-controller.html)）。

```
$this->Post->id = $id; 
```

这段代码修改了视图实例，仅此而已。您需要另一个函数将视图链接到数据库。

# jquery - 带有 CSS3 响应式设计的 jQuery Mobile

> ID：11574184
> 
> 赞同：0
> 
> 时间：2012-07-20T06:47:26.660
> 
> 标签：jquery, html, css, jquery-mobile, responsive-design

我正在开发一个响应式 Web 应用程序，我需要一些触摸事件。所以我添加了 jQuery Mobile 框架。现在，我所有的布局都毁了，因为 jQuery Mobile 在我的 html 标记中添加了一些 css 样式和 div。

我可以在不改变（完全）我的 html 的情况下使用 jQuery Mobile 的触摸和滑动事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:01:40.570

我不确定，但我认为你的要求是不可能的。

手动编码 CSS3 动画，并使用 Zepto.js 进行触摸/滑动事件怎么样？Zepto.js 使用与 jQuery 相同的语法，但要小得多（并且仅与包括移动浏览器在内的最新浏览器兼容）。它还包括触摸/滑动事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:40:38.727

我找到了一些对我有用的东西，你可以在[这个存储库中找到你需要的 javascript 文件](https://github.com/jquery/jquery-mobile/tree/master/js)

你可以下载你需要的东西，而不用下载整个包。我只下载了与事件相关的文件，并在不更改我的 html 标记的情况下使用它们。这不是最好的解决方案，但它现在正在工作。

# c# - 使用 C# 访问 Item 属性

> ID：11574189
> 
> 赞同：1
> 
> 时间：2012-07-20T06:47:54.707
> 
> 标签：c#, vb.net, visual-studio-2012

我正在尝试使用[http://msdn.microsoft.com/en-us/library/aa289500%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa289500%28v=vs.71%29.aspx)

它工作正常，但我经常`Item`在 VB 版本中看到

但是，`button.Item`在 C# 中不存在，但是当我打开一个新项目并在 VB.NET 中尝试时，我得到`Item`. 为什么会这样，我如何`Item`在 C# 中使用？

**视觉基础**

```
Default Public ReadOnly Property Item(ByVal Index As Integer) As _
   System.Windows.Forms.Button
   Get
      Return CType(Me.List.Item(Index), System.Windows.Forms.Button)
   End Get
End Property 
```

**C＃**

```
public System.Windows.Forms.Button this [int Index]
{
get
   {
      return (System.Windows.Forms.Button) this.List[Index];
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:52:46.483

在 C# 中调用“Item”可以使用方括号来完成：

```
var myButton = myButtonsArray[0]; 
```

“[]”括号实际上是调用在VB中称为“Item”的索引器。

# virtualization - 使用 windows 2003 服务器安装故障转移集群

> ID：11574191
> 
> 赞同：0
> 
> 时间：2012-07-20T06:48:00.993
> 
> 标签：virtualization, virtual-machine, windows-2003-webserver, windows-clustering

我是集群和虚拟化方面的初学者。谁能告诉我我们是否可以在故​​障转移集群中同时拥有主动节点和被动节点作为虚拟机。

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:31:13.967

如果您即将进入 MSCS，我强烈建议您查看 Win2k8 中的产品，因为情况已经有了很大的改善。但是，如果您坚持使用 Win2k3，是的，您可以在 VMware 上进行集群。VMware 甚至还发布了一份白皮书——谷歌的“vmware mscs 白皮书”。

# cocoa - 可可：将 nstimeInterval 值分配给 nsdate？

> ID：11574192
> 
> 赞同：-1
> 
> 时间：2012-07-20T06:48:00.917
> 
> 标签：cocoa

我想将 nstimeInterval 值分配给 nsdate。

```
 NSDate *startTime=[NSDate date] ;
  NSDate *endTime=[NSDate date] ;
   NSTimeInterval difference=[endTime 
   timeIntervalSinceDate:startTime];

    startTime=difference; This gives me an error. 
```

如何将 nsTimeInterval 类型的差异结果分配给 nsdate？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:02:58.703

您需要了解这`NSTimeInterval`是两个日期之间的*差异。*你想要做的就像告诉程序：

> 将日期设置为 2 天。

当您想要做的是告诉程序：

> 将日期设置为上周一加 2 天。

因此，您需要使用以下一系列`NSDate`方法之一：

```
+ dateWithTimeIntervalSinceNow:
+ dateWithTimeInterval:sinceDate:
+ dateWithTimeIntervalSinceReferenceDate:
+ dateWithTimeIntervalSince1970:
– initWithTimeIntervalSinceNow:
– initWithTimeInterval:sinceDate:
– initWithTimeIntervalSinceReferenceDate:
– initWithTimeIntervalSince1970: 
```

您在哪里创建`NSDate`带有一些参考日期加/减`NSTimeInterval`; 请注意，`NSDate`对象是*不可变*的，因此没有方法可以使用`NSTimeInterval`值更改对象表示的日期。

有关更多详细信息，请参阅[`NSDate`类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html)。

要更正您的代码，您可以这样做：

```
NSDate *startTime=[NSDate date] ;
NSDate *endTime=[NSDate date] ;
NSTimeInterval difference=[endTime timeIntervalSinceDate:startTime];
NSDate *newTime = [NSDate dateWithTimeInterval:difference sinceDate:startDate]; 
```

# python - 如何在python中将多个列表合并为一个列表？

> ID：11574195
> 
> 赞同：174
> 
> 时间：2012-07-20T06:48:02.600
> 
> 标签：python, list, join, merge

> **可能重复：**
> [从 Python 中的列表列表中制作一个平面列表 将列表](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python)
> [列表一起加入 Python 中的一个列表](https://stackoverflow.com/questions/3046217/join-a-list-of-lists-together-into-one-list-in-python)

我有很多看起来像的列表

```
['it']
['was']
['annoying'] 
```

我希望上面看起来像

```
['it', 'was', 'annoying'] 
```

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-07-20T06:58:51.847

```
import itertools
ab = itertools.chain(['it'], ['was'], ['annoying'])
list(ab) 
```

只是另一种方法......

* * *

## 回答 #2

> 赞同：174
> 
> 时间：2012-07-20T06:49:38.293

只需添加它们：

```
['it'] + ['was'] + ['annoying'] 
```

你应该阅读[Python 教程](http://docs.python.org/tutorial/)来学习这样的基本信息。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-07-20T06:50:22.603

```
a = ['it']
b = ['was']
c = ['annoying']

a.extend(b)
a.extend(c)

# a now equals ['it', 'was', 'annoying'] 
```

# java - Chrome 中的文件下载名称

> ID：11574199
> 
> 赞同：3
> 
> 时间：2012-07-20T06:48:23.400
> 
> 标签：java, http, google-chrome, download

我需要通过http下载excel文件。问题是 Chrome 浏览器忽略了我在响应头中设置的文件名，而其他浏览器表现良好。

```
resp.setContentType("application/vnd.ms-excel");
resp.setHeader("Content-disposition:", "attachment; filename=grid.xls"); 
```

Chrome 将其保存为“excel.xls”。如何使 chrome 设置文件名？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T07:51:51.003

获取 HTTP 跟踪，或使用 redbot.org 测试您的站点。

顺便说一句：setHeader 的第一个参数中的尾随冒号看起来很可疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:18:35.930

我只是在看我们为下载 CSV 文件所做的事情。我们发送以下标题；

```
Cache-Control: no-cache,no-store,max-age=0
Pragma: No-cache
Content-Length: 312
Content-Type: application/csv;charset=UTF-8
Content-disposition: attachment; filename="MyCsvFileToSave.csv" 
```

这适用于我们在 Chrome 中。字符集是否可能有所不同？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-05T18:02:07.777

删除 setHeader 的第一个参数中的尾随冒号解决了该问题。

# directx - PIX 是否使用实际驱动程序重播？

> ID：11574202
> 
> 赞同：1
> 
> 时间：2012-07-20T06:48:32.453
> 
> 标签：directx, pix

如果我使用 PIX 运行 3D 应用程序（如基准工具或游戏）并稍后重播捕获，则重播实际上是否调用相同的 API（并因此调用实际的驱动程序和 GPU，而不是运行平底船或使用模拟 3D CPU）与运行原始 3D 应用程序时的方式相同吗？我只关注 Direct3D API 部分。

有没有其他方法可以进行捕获，因为对于某些应用程序，PIX 无法捕获它们。

有没有办法让我只捕捉渲染的一个子集，比如只捕捉中间的 50 帧？

# asp.net - 使用 asp.net 从邮件客户端检索收件人的电子邮件 ID

> ID：11574204
> 
> 赞同：-1
> 
> 时间：2012-07-20T06:48:35.957
> 
> 标签：asp.net, email

我正在研究电子邮件营销解决方案。在此应用程序中，我向 1000 位收件人发送群发邮件，并附有下载文档的链接。我的问题是如何捕获下载附件的收件人的电子邮件地址。

我能够跟踪收件人的 IP 地址，但我没有找到一种方法来捕获已下载文件的收件人的电子邮件 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:57:30.940

一种方法是通过下载页面提供访问权限。发送链接如下：

`http://mysite.com/downloads/12345/myfile.doc`- 其中 12345 是收件人的 ID。

使用 URL Rewrite 或类似模块，拦截请求，并重定向到下载页面。此页面可以解析 ID，并将其记录在某处，然后可以继续将文件本身呈现给收件人。

这个主题有许多变体 - 关键是将 ID soem 放在 URL 中的某个位置，并在收件人请求文件时将其选中。

将文件流式传输到浏览器：http: [//support.microsoft.com/kb/306654](http://support.microsoft.com/kb/306654)

URL重写：[http ://www.iis.net/download/urlrewrite](http://www.iis.net/download/urlrewrite)

# iphone - 如何在 iPad 上运行的现有 iPhone 应用程序中添加单个 iPad 自定义视图？

> ID：11574208
> 
> 赞同：0
> 
> 时间：2012-07-20T06:48:45.183
> 
> 标签：iphone, ios, ipad, uiinterfaceorientation

我创建了一个针对 iPhone 的 iOS 应用程序。它不是通用应用程序，但可以在 iPhone 和 iPad 上运行（用户可以在 1x 和 2x 视图模式下查看）。现在我想为 iPad 添加一个视图（xib），如果有人在 ipad 上使用应用程序并将设备切换到横向模式，他们是否可以看到这个自定义视图？只是布局会被改变以利用屏幕尺寸？如果可能的话，我将如何进行。我正在考虑添加一个视图控制器以及针对 Ipad 的 Xib。当它旋转到横向时，它将被添加到当前视图中，当它旋转到纵向模式时，它将被父视图滑动。

我可以使用：

```
UI_USER_INTERFACE_IDIOM() 
```

提前致谢。

# ssl - Play2：支持服务器名称指示

> ID：11574216
> 
> 赞同：0
> 
> 时间：2012-07-20T06:48:59.443
> 
> 标签：ssl, playframework, load-balancing, sni

Play2.0.x 是否支持服务器名称指示？

指向文档或示例的指针会很棒。

我有一个典型的用例：我想在共享负载平衡器后面使用基于名称的“不相关”Play2 应用程序服务器的虚拟主机，在各个应用程序服务器上执行 SSL 终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:26:13.220

[Java 7 现在支持 SNI，但仅限于客户端](http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements-7.html)。如果您想直接从 Java 处理连接，这将是一个问题。

但是，支持负载平衡器应该会对您有所帮助。如果它可以处理 SNI（例如，现代版本的 Apache Httpd 就是这种情况），您可以将代理反向代理到在不同端口上侦听您要使用的每个主机名的服务器。

*   `www.domain1.example`---反向代理---> `192.168.0.10:8080`（为应用程序配置`www.domain1.example`）
*   `www.domain2.example`---反向代理---> `192.168.0.10:8081`（为应用程序配置`www.domain2.example`）

您必须让负载平衡器处理 SSL 连接。或者，如果负载均衡器足够聪明，可以在查看客户端 Hello 初始 TLS 消息中的服务器名称扩展名后调度到不同的端口，它可能可以这样做（我不确定是否可以） .

# silverlight - 在silverlight项目中添加类文件的位置

> ID：11574220
> 
> 赞同：0
> 
> 时间：2012-07-20T06:49:19.813
> 
> 标签：silverlight, silverlight-4.0

我是银光的新手。我需要知道在哪里为 silverlight 应用程序添加类文件。在 silverlight 项目或 web 项目中。哪个是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:39:46.800

在 Silverlight 项目中，您添加您的 silverlight 类。在 Web 项目中，您可以添加启用 silverlight 的 WCF 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:51:07.397

请看[这个](https://stackoverflow.com/questions/10799956/silverlight-and-web-application-common-library)问题的答案。

您需要创建可移植类库项目。这仅在 .NET Framework 4.0 中支持。

# c++ - 重置对象 m_object = Object(new, parameters);

> ID：11574221
> 
> 赞同：0
> 
> 时间：2012-07-20T06:49:24.923
> 
> 标签：c++, constructor, copy-constructor

我有一个简单的课程：

```
class Histogram {
    int m_width;
    int m_height;
    int m_sampleSize;
    int m_bufferWidth;
    int m_bufferHeight;

    uint8* m_buffer;
    int m_size;
public:
    Histogram() : m_buffer(0) { }
    Histogram(int width, int height, int sampleSize) {
        m_buffer = new unsigned char [width*height*sampleSize];
    }
    ~Histogram() {
        my_log("destructor: buffer: %p", m_buffer);
        if ( m_buffer ) { delete [] m_buffer; m_buffer = NULL; }
    }
    unsigned char* buffer() {
        return m_buffer;
    }
}; 
```

它是其他类的成员：

```
class Other {
    Histogram m_histogram;

    void reset() {
        my_log("reset() called: buffer: %p", m_histogram.buffer());
        m_histogram = Histogram(512, 512, 2);
    }
} 
```

现在，我首先使用 Histogram() 构造函数创建“未初始化”对象——它将 m_buffer 设置为 NULL；

然后，我调用 reset 方法，它执行 m_histogram = Histogram(512, 512, 3) - 新对象通过 new 初始化了 m_buffer。

所以预期的日志消息序列是：

*   “重置（）调用：缓冲区：0x0”
*   “析构函数：缓冲区：0x0”

但相反，我得到：

*   “重置（）调用：缓冲区：0x0”
*   “析构函数：缓冲区：0x072a7de”

因此正在执行一些非理性的操作。此外，当我还删除第二个对象（使用“更大”构造函数创建，具有三个 int 参数）时，会显示 0x072a7de 地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:56:04.300

你必须为你的类 Histogram 实现 copy-ctor 和赋值运算符，因为

```
m_histogram = Histogram(512, 512, 2); 
```

是赋值运算符调用。隐式运算符 = 类的按位复制成员。

而且你必须`delete[]`在析构函数中使用，而不是`delete`，因为你分配了一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:54:15.070

首先，由于您指向的是动态分配的数组，因此您需要使用运算符`delete[]`

```
delete[] m_buffer; 
```

其次，更重要的是，既然你已经动态分配了内存，你应该遵循[三个规则，](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)实现一个复制构造函数和赋值运算符，以及修复析构函数。

现在发生的事情是您的（编译器合成的）赋值运算符正在制作“浅”副本，即它正在复制指针。然后你会有多个析构函数试图删除它。您正在调用未定义的行为。

`std::vector<uint8>`通过使用 a作为缓冲区，你真的可以为自己省去很多麻烦。

# qt - 如何在 QTabWidget 中拥有公共控件

> ID：11574222
> 
> 赞同：0
> 
> 时间：2012-07-20T06:49:27.150
> 
> 标签：qt, qtabwidget

我想在 QTabWidget 的两个不同标签页中使用一个通用控件（QTreeView）。这该怎么做 ？

我在 Qt 设计器的标签页中添加了一个 tabwidget 和控件。在 Win 7 中使用 qt creator 版本 2.4.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:14:54.220

您不能在两个不同的 QTabWidget 页面中拥有相同的 QTreeView。当您将任何小部件添加到布局时，该布局将[拥有](http://doc.qt.nokia.com/4.7-snapshot/objecttrees.html)该小部件的所有权。由于只能有一个所有者，因此每个小部件都有一个父级。

但你可以伪造它。给你的主页一个网格布局。在顶部放置一个[QTabBar](https://qt-project.org/doc/qt-4.8/qtabbar.html)，在左侧（或任何位置）[放置 QTreeView](https://qt-project.org/doc/qt-4.8/qstackedlayout.html)，在右侧放置 QStackedLayout。连接选项卡栏和堆叠布局，以便更改栏中的选项卡会更改堆叠布局中的可见页面。

这应该正是您正在寻找的 - 只需准备好与 QTabBar 战斗，让它像您想要的那样显示......

或者，只需使用两个单独的树视图 - 毕竟它们都将查看相同的模型，因此不会复制大量数据。也为您节省了与 QTabBar 的战斗。

希望有帮助！

# android - 是否有可能发现照片是否被拍摄？

> ID：11574224
> 
> 赞同：0
> 
> 时间：2012-07-20T06:49:32.777
> 
> 标签：android, image, android-camera

我想发现这张照片是默认相机应用程序拍摄的。就像 Google plus 发现它并将其上传到服务器一样。我在文档中找不到它。有没有人暗示在哪里可以找到这种信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:55:21.783

据我所知，你可以拥有两件事

1.  添加媒体时的意图，我相信如下。我不确定在所有情况下它有多少用处，你应该尝试一下:)

    ```
    Intent.ACTION_MEDIA_SCANNER_SCAN_FILE 
    ```

2.  您可以密切关注您希望了解的特殊内容何时发生变化。[请参阅此处的示例： http](http://mylifewithandroid.blogspot.nl/2008/03/observing-content.html) ://mylifewithandroid.blogspot.nl/2008/03/observing-content.html

# php - 使用 php 分页显示 rss 提要

> ID：11574231
> 
> 赞同：0
> 
> 时间：2012-07-20T06:49:59.210
> 
> 标签：php, rss, pagination, feed

我是 rss 提要和 php 分页的新手。我正在尝试解析 rss 提要并在单独的页面上显示每个提要的详细信息。[我从http://www.phpeasystep.com/phptu/29.html](http://www.phpeasystep.com/phptu/29.html)复制并粘贴了分页代码。当我在本地主机上运行 index.php 时，什么都没有显示。

使用 curl 下载 rss 提要没有问题。我也试过 print_r($data) 并且数据显示正常。

有人可以指出我哪里出错了吗？谢谢你。

我的代码：

```
<?php
if (function_exists("curl_init")){
    $ch=curl_init();
    curl_setopt($ch,CURLOPT_URL,"http://feeds.feedburner.com/rb286");
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    $data=curl_exec($ch);
    curl_close($ch);
    $doc=new SimpleXmlElement($data);
    //print_r($doc);
}

function parseRSS($xml){
    $items=$xml->xPath('/rss/channels/item');

    $count=count($items);

    // How many adjacent pages should be shown on each side?
    $adjacents =3;

    $total_pages = $count;

    /* Setup vars for query. */
    $targetpage = "index.php";  //your file name  (the name of this file)
    $limit = 1;                                 //how many items to show per page
    $page = $_GET['page'];
    if($page) 
        $start = ($page - 1) * $limit;          //first item to display on this page
    else
        $start = 0;                             //if no page var is given, set start to 0

    /* Setup page vars for display. */
    if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
    $prev = $page - 1;                          //previous page is page - 1
    $next = $page + 1;                          //next page is page + 1
    $lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
    $lpm1 = $lastpage - 1;                      //last page minus 1

    /* 
        Now we apply our rules and draw the pagination object. 
        We're actually saving the code to a variable in case we want to draw it more than once.
    */
    $pagination = "";
    if($lastpage > 1)
    {   
        $pagination .= "<div class=\"pagination\">";
        //previous button
        if ($page > 1) 
            $pagination.= "<a href=\"$targetpage?page=$prev\">� previous</a>";
        else
            $pagination.= "<span class=\"disabled\">� previous</span>"; 

        //pages 
        if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
        {
            //close to beginning; only hide later pages
            if($page < 1 + ($adjacents * 2))        
            {
                for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //in middle; hide some front and some back
            elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
                $pagination.= "...";
                $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
                $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
            }
            //close to end; only hide early pages
            else
            {
                $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
                $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
                $pagination.= "...";
                for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                {
                    if ($counter == $page)
                        $pagination.= "<span class=\"current\">$counter</span>";
                    else
                        $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
                }
            }
        }

        //next button
        if ($page < $counter - 1) 
            $pagination.= "<a href=\"$targetpage?page=$next\">next �&lt;/a>";
        else
            $pagination.= "<span class=\"disabled\">next �&lt;/span>";
        $pagination.= "</div>\n";       
    }

        foreach($items as $item){
              echo("<a href='".$item[0]->link."'>".$item[0]->title."</a>");
        }
}
if (isset($doc->channel))parseRSS($doc);

?>
<?php 
 echo($pagination);
?>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:12:58.603

好的，所以这段代码有一些问题：

首先，变量`$pagination;`是在函数内创建的，因此在全局范围之外不可用。对此的快速解决方法是：

在页面的开头添加：

```
<?php 
$pagination = ''; 
```

在函数内添加：

```
function parseRSS($xml){
    global $pagination; 
```

**接下来Xpath位置错误**

改变 ：

```
$items=$xml->xPath('/rss/channels/item'); 
```

进入

```
$items=$xml->xPath('/rss/channel/item'); 
```

这些更改应该为您提供一些输出以开始使用，我认为您的分页存在更多问题，但是一旦您有一些输出，您应该设法对其进行整理。

**编辑：** 要仅获取所需的链接，您应该更改：

```
<?php  
foreach($items as $item){
    echo("<a href='".$item[0]->link."'>".$item[0]->title."</a>");
} 
```

进入 ：

```
<?php  
foreach($items as $key => $item){
    if( ( $key >= $start) && ($key < $start + $limit) ){
        echo("<a href='".$item[0]->link."'>".$item[0]->title."</a>");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T06:09:54.253

DonSeba，您的第二个 foreach 循环工作正常。每个链接都在不同的页面上很好地显示。但是，你能告诉我你的 if 语句有两个条件的目的是什么吗？我仅使用 1 个 if 条件尝试了以下操作，它也可以正常工作：

```
foreach($items as $key => $item){ 
//if( ( $key >= $start) && ($key < $start + $limit) ){ //your if statement
  if ($key==$start){
    echo("<a href='".$item[0]->link."'>".$item[0]->title."</a>"); 
     } 
 } 
```

谢谢你。

# android - Android dx 使用情况

> ID：11574233
> 
> 赞同：2
> 
> 时间：2012-07-20T06:50:03.227
> 
> 标签：android, jar, dex, dx

我有一个从 android 应用程序创建的 jar 文件，因为我在创建时将其标记为 Eclipse 中的“Is library”。现在 DexClassLoader 无法加载此文件，因为它没有标记为 classes.dex 的条目。这看起来像一个标准的罐子。如何将这样的 jar 转换为 DexClassLoader 可以加载的带有 dx 的 dexed jar？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T07:00:01.410

您可以从命令行使用 sdk 中的 dx 工具。就像是：

```
dx --dex --output=dexed.jar hello.jar 
```

为我工作。将这些东西集成到您的构建过程中是一种黑艺术，主要涉及破解 SDK 提供的 ant 构建脚本。如果您的库只是偶尔更新，则手动更新可能是可行的。

就我而言，我将 dexed.jar 保存在我的资源/原始文件夹中。在运行时，我将它从那里复制到文件系统中，然后将文件系统路径传递给 DexClassLoader。这……有点颠簸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:55:25.473

Android 库并不意味着要在设备上启动。它们只能作为 Android 项目的一部分包含在内，这会将所有引用的 Android 库 .jar 文件转换为单个共享`.dex`文件并将它们打包到`.apk`文件中。

如果你想测试你的 Android 库并且它的清单实际上有一些入口点，那么唯一的方法就是暂时将 Android 库更改为 Android 项目（通过检查设置中的检查栏）。

# windows - 有没有办法检测 Windows 操作系统是服务器（2003/2008）还是工作站（XP/Vista/Win7）？

> ID：11574235
> 
> 赞同：1
> 
> 时间：2012-07-20T06:50:22.820
> 
> 标签：windows, visual-c++, visual-studio-2005

我想知道Win Api来检测Windows操作系统是服务器（2003/2008）还是工作站（XP/Vista/Win7）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:55:24.740

致电[`GetVersionEx`](http://msdn.microsoft.com/en-us/library/ms724451.aspx)获取[`OSVERSIONINFOEX`](http://msdn.microsoft.com/en-us/library/ms724833.aspx)信息并进行测试`wProductType`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:25:57.433

它是这样的：

```
OSVERSIONINFOEX osvi;
BOOL bIsWindowsXPorLater;

ZeroMemory(&osvi, sizeof(OSVERSIONINFOEX));
osvi.dwOSVersionInfoSize = sizeof(OSVERSIONINFOEX);

GetVersionEx((LPOSVERSIONINFO )&osvi);

if(osvi.wProductType == VER_NT_WORKSTATION)
{
    // Workstation
    printf("VER_NT_WORKSTATION.\n");

}
else
{
    // Server
    if(osvi.wProductType == VER_NT_DOMAIN_CONTROLLER)
    {
        printf("DOMAIN_CONTROLLER.\n");
    }

    if(osvi.wProductType == VER_NT_SERVER)
    {
        printf("SERVER.\n");      
    }
} 
```

你还需要 kernel.lib

# mysql - 如何从数据库中获取这些值，codeigniter 活动记录

> ID：11574239
> 
> 赞同：0
> 
> 时间：2012-07-20T06:50:50.987
> 
> 标签：mysql, codeigniter, activerecord, data-structures

嗨，我正在使用`codeigniter`。我有一张这样的桌子。

```
PreferenceID | PreferencParentID |   Value
   1         |      0            | Fashion
   2         |      0            | music
   3         |      1            | Men's fashion
   4         |      1            | Women's fashion
   5         |      2            | Rock music 
   6         |      3            | shirts 
```

如果我通过了`PreferenceID = 1`，我想获取记录`Fashion,Men's fashion,Women's fashion,shirts`

如果我通过了，`PreferenceID = 2`我想获得记录 `music ,Rock music`。

*   当我传递父 id 时，我想获取所有级别的所有子值。如果我通过`PreferenceID = 1`了`Fashoin`，它有两个孩子，`Men's fashion` 并且`Women's fashion`。`and men's fashion`是 的父值`shirts`。

这是层次结构。它就像一个树形结构，有N层，请帮帮我

![在此处输入图像描述](../Images/7039876dde1f2cd42284dc97b2205746.png)

目前我正在做的是通过`prefernceID` 并获得所有下一个级别的孩子，

例如：-我只是通过 和`prefernceID = 1`获得：（`Men's fashion``Women's fashion`

请帮忙 。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:55:04.877

没有办法通过 AR 类做到这一点。尝试这个：

```
$sql = 'SELECT `PreferenceID`, `PreferencParentID`, `Value`
        FROM `YourTableName`
        WHERE 1 IN(`PreferenceID`, `PreferencParentID`)';
$this->db->query($sql); 
```

（假设你使用 MySQL）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:21:34.600

也许您应该使用 MySQL 过程或适配器视图。

像您发布的示例数据：

```
mysql> create table treeNodes
    -> (
    ->  id int primary key,
    ->  nodename varchar(20),
    ->  pid int
    -> );
Query OK, 0 rows affected (0.09 sec) 
mysql> select * from treenodes;
+----+----------+------+
| id | nodename | pid  |
+----+----------+------+
|  1 | A        |    0 |
|  2 | B        |    1 |
|  3 | C        |    1 |
|  4 | D        |    2 |
|  5 | E        |    2 |
|  6 | F        |    3 |
|  7 | G        |    6 |
|  8 | H        |    0 |
|  9 | I        |    8 |
| 10 | J        |    8 |
| 11 | K        |    8 |
| 12 | L        |    9 |
| 13 | M        |    9 |
| 14 | N        |   12 |
| 15 | O        |   12 |
| 16 | P        |   15 |
| 17 | Q        |   15 |
+----+----------+------+
17 rows in set (0.00 sec) 
```

树的层次是：</p>

```
 1:A
  +-- 2:B
  |    +-- 4:D
  |    +-- 5:E
  +-- 3:C
       +-- 6:F
            +-- 7:G
 8:H
  +-- 9:I
  |    +-- 12:L
  |    |    +--14:N
  |    |    +--15:O
  |    |        +--16:P
  |    |        +--17:Q
  |    +-- 13:M
  +-- 10:J
  +-- 11:K 
```

您可以创建一个函数 getChildLst 来获取包含所有子节点的字符串。

```
mysql> delimiter //
mysql>
mysql> CREATE FUNCTION `getChildLst`(rootId INT)
    -> RETURNS varchar(1000)
    -> BEGIN
    ->   DECLARE sTemp VARCHAR(1000);
    ->   DECLARE sTempChd VARCHAR(1000);
    ->
    ->   SET sTemp = '$';
    ->   SET sTempChd =cast(rootId as CHAR);
    ->
    ->   WHILE sTempChd is not null DO
    ->     SET sTemp = concat(sTemp,',',sTempChd);
    ->     SELECT group_concat(id) INTO sTempChd FROM treeNodes where FIND_IN_SET(pid,sTempChd)>0;
    ->   END WHILE;
    ->   RETURN sTemp;
    -> END
    -> //
Query OK, 0 rows affected (0.00 sec)

mysql>
mysql> delimiter ; 
```

然后我们可以使用 find_in_set 函数查找所有值：

```
mysql> select getChildLst(1);
+-----------------+
| getChildLst(1)  |
+-----------------+
| $,1,2,3,4,5,6,7 |
+-----------------+
1 row in set (0.00 sec) 

mysql> select * from treeNodes
    -> where FIND_IN_SET(id, getChildLst(1));
+----+----------+------+
| id | nodename | pid  |
+----+----------+------+
|  1 | A        |    0 |
|  2 | B        |    1 |
|  3 | C        |    1 |
|  4 | D        |    2 |
|  5 | E        |    2 |
|  6 | F        |    3 |
|  7 | G        |    6 |
+----+----------+------+
7 rows in set (0.01 sec)

mysql> select * from treeNodes
    -> where FIND_IN_SET(id, getChildLst(3));
+----+----------+------+
| id | nodename | pid  |
+----+----------+------+
|  3 | C        |    1 |
|  6 | F        |    3 |
|  7 | G        |    6 |
+----+----------+------+
3 rows in set (0.01 sec) 
```

# javascript - 带有 png 图像的 3D 动画

> ID：11574243
> 
> 赞同：0
> 
> 时间：2012-07-20T06:51:34.060
> 
> 标签：javascript, css, html, animation

我尝试使用 HTML5/JS/CSS 为小图像制作动画。它应该在 z 轴上旋转。我知道如何使用 x-/y-Axis，但 z-Axis 似乎有所不同。

我找不到有关如何执行此操作的不错的教程或文档。

如果有人能给我一些提示，那就太好了！

到目前为止感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:31:21.917

我认为你有兴趣做的**最好**是使用 3d 渲染功能。WebGL 可以帮助你。

[有很多教程](http://learningwebgl.com/blog/?page_id=1217)可以帮助您开始使用 webGL。这很简单，这些是您需要采取的一般步骤。

*   使用 webGL 初始化你的画布
*   创建一个新的 gl 纹理
*   加载图像并绑定到纹理
*   当你用你喜欢的新纹理渲染时，创建一个基本的四边形和纹理
*   在 3d 空间中旋转你的四边形
*   使成为！

这里有太多代码来详细描述如何做到这一点。查看教程，如果您有更多问题，请返回。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:40:00.960

HTML：

```
<html>
    <body>
        <div id="rotated"> 
            HelloWorld 
        </div>
    </body>
</html> 
```

CSS：

```
#rotated {
    height:200px;
    width:100px;
    background-color:red;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    transform-style: preserve-3d;
    -webkit-transform: rotateZ(45deg);
    -moz-transform: rotateZ(45deg); 
    transform: rotateZ(45deg);
} 
```

为了在 3 维空间中旋转对象，您将使用 HTML5 CSS3d 转换。确保添加上面显示的“preserve-3d”渲染样式，否则您的对象将显示 3d 对象的二维表示。

如果您想在 javascript 中更改该样式，则应为：

```
document.getElementById('rotated').style['webkitTransform'] = 'rotateZ(45deg)';
document.getElementById('rotated').style['mozTransform'] = 'rotateZ(45deg)';
document.getElementById('rotated').style['transform'] = 'rotateZ(45deg)'; 
```

已经有很多 CSS3d 教程了。确保您使用的是支持 CSS3d 的浏览器的最新版本，例如 firefox 或 chrome。

# java - 如何在 DefaultTableModel 的单元格中获取新更新的数据

> ID：11574244
> 
> 赞同：0
> 
> 时间：2012-07-20T06:51:35.687
> 
> 标签：java, swing, jtable, defaulttablemodel

我从 DefaultTableModel 创建一个表，然后使用 table.getModel().setValueAt(value,row,col) 在单元格中添加第一个值。但是，当我在该单元格上单击鼠标并将其中的数据更改为第二个值时。然后我通过 getValueAt(row,col) 取回该值，它总是返回第一个值，即使在表格上第二个值显示在单元格中。我错了什么？

希望你能理解我乱七八糟的想法。

非常感谢！//////////////

谢谢你的回答，我已经从你给我的链接中复制了代码并运行它。我有一个这样的测试：我在 Cell(0,3) 处修改值，然后尝试获取该值（通过单击 okButton）但是该值是旧的，而不是新的？

这是代码：

```
package DialogExample;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.TableModel;

import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

public class SimpleTableDemo extends JPanel implements TableModelListener {
private boolean DEBUG = false;
 JTable table;
 JButton okButton;

public JButton getOkButton() {
    okButton = new JButton("OK");
    okButton.addActionListener(new ActionListener() {

        @Override //// modify value at the Cell(0,3) and then get that value out. 
        /// the value is the old, NOT the new one?????
        public void actionPerformed(ActionEvent arg0) {
            int i = (Integer) table.getModel().getValueAt(0, 3);
            System.out.print(i);
        }
    });
    return okButton;
}

public SimpleTableDemo() {
    super(new GridLayout(1, 0));

    String[] columnNames = { "First Name", "Last Name", "Sport",
            "# of Years", "Vegetarian" };

    Object[][] data = {
            { "Kathy", "Smith", "Snowboarding", new Integer(5),
                    new Boolean(false) },
            { "John", "Doe", "Rowing", new Integer(3), new Boolean(true) },
            { "Sue", "Black", "Knitting", new Integer(2),
                    new Boolean(false) },
            { "Jane", "White", "Speed reading", new Integer(20),
                    new Boolean(true) },
            { "Joe", "Brown", "Pool", new Integer(10), new Boolean(false) } };

    table = new JTable(data, columnNames);
    table.setPreferredScrollableViewportSize(new Dimension(500, 70));
    table.setFillsViewportHeight(true);

    if (DEBUG) {
        table.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent e) {
                printDebugData(table);
            }
        });
    }

    // Create the scroll pane and add the table to it.
    JScrollPane scrollPane = new JScrollPane(table);

    // Add the scroll pane to this panel.
    add(scrollPane);
    add(getOkButton());
}

public void tableChanged(TableModelEvent e) {
    int row = e.getFirstRow();
    int column = e.getColumn();
    TableModel model = (TableModel) e.getSource();
    String columnName = model.getColumnName(column);
    Object data = model.getValueAt(row, column);

    // Do something with the data...
}

private void printDebugData(JTable table) {
    int numRows = table.getRowCount();
    int numCols = table.getColumnCount();
    javax.swing.table.TableModel model = table.getModel();

    System.out.println("Value of data: ");
    for (int i = 0; i < numRows; i++) {
        System.out.print("    row " + i + ":");
        for (int j = 0; j < numCols; j++) {
            System.out.print("  " + model.getValueAt(i, j));
        }
        System.out.println();
    }
    System.out.println("--------------------------");
}

/**
 * Create the GUI and show it. For thread safety, this method should be
 * invoked from the event-dispatching thread.
 */
private static void createAndShowGUI() {
    // Create and set up the window.
    JFrame frame = new JFrame("SimpleTableDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // Create and set up the content pane.
    SimpleTableDemo newContentPane = new SimpleTableDemo();
    newContentPane.setOpaque(true); // content panes must be opaque
    frame.setContentPane(newContentPane);

    // Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    // Schedule a job for the event-dispatching thread:
    // creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:31:44.183

*   现在可以工作了，

*   必须`TableModel`正确定义`ColumnClass`

代码

```
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;

public class SimpleTableDemo extends JPanel implements TableModelListener {

    private static final long serialVersionUID = 1L;
    private boolean DEBUG = false;
    private JTable table;
    private JButton okButton;
    private String[] columnNames = {"First Name", "Last Name", "Sport", "# of Years", "Vegetarian"};
    private Object[][] data = {{"Kathy", "Smith", "Snowboarding", new Integer(5), (false)},
        {"John", "Doe", "Rowing", new Integer(3), (true)},
        {"Sue", "Black", "Knitting", new Integer(2), (false)},
        {"Jane", "White", "Speed reading", new Integer(20), (true)},
        {"Joe", "Brown", "Pool", new Integer(10), (false)}};
    private TableModel model = new DefaultTableModel(data, columnNames) {

        private static final long serialVersionUID = 1L;

        @Override
        public Class<?> getColumnClass(int column) {
            return getValueAt(0, column).getClass();
        }
    };

    private JButton getOkButton() {
        okButton = new JButton("OK");
        okButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                int i = (Integer) table.getModel().getValueAt(0, 3);
                System.out.print(i);
            }
        });
        return okButton;
    }

    public SimpleTableDemo() {
        super(new GridLayout(1, 0));
        model.addTableModelListener(this);
        table = new JTable(model);
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
        add(getOkButton());
    }

    public void tableChanged(TableModelEvent e) {
        int row = e.getFirstRow();
        int column = e.getColumn();
        model = (TableModel) e.getSource();
        String columnName = model.getColumnName(column);
        Object datas = model.getValueAt(row, column);
        System.out.println("Column ---> " + columnName + ", new value is " + datas);
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        SimpleTableDemo newContentPane = new SimpleTableDemo();
        newContentPane.setOpaque(true); // content panes must be opaque
        frame.setContentPane(newContentPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:03:19.467

不完全确定在没有 SSCCE 的情况下您要做什么，但请阅读有关 JTables[的一般](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)教程，更具体地说，首先阅读[模型更改](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#modelchange)。

# ios - 如何在不使用 Xcode、iPhone 中的谷歌地图的情况下从地址获取纬度和经度

> ID：11574245
> 
> 赞同：-1
> 
> 时间：2012-07-20T06:51:39.197
> 
> 标签：ios, maps, latitude-longitude

请告诉我如何在不使用谷歌地图的情况下从地址获取位置纬度和经度。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:55:43.117

[试试雅虎](http://developer.yahoo.com/maps/rest/V1/geocode.html)怎么样！[地图网络服务 - 地理编码 API](http://developer.yahoo.com/maps/rest/V1/geocode.html)

获取应用 ID 后，使用如下获取请求

```
http://local.yahooapis.com/MapsService/V1/geocode?appid=YD-9G7bey8_JXxQP6rxl.fBFGgCdNjoDMACQA--&street=701+First+Ave&city=Sunnyvale&state=CA 
```

你得到一个像

```
<?xml version="1.0" encoding="UTF-8"?>
 <ResultSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="urn:yahoo:maps"
  xsi:schemaLocation="urn:yahoo:maps    
 http://local.yahooapis.com/MapsService/V1/GeocodeResponse.xsd">
 <Result precision="address">
  <Latitude>37.416384</Latitude>
  <Longitude>-122.024853</Longitude>
  <Address>701 FIRST AVE</Address>
   <City>SUNNYVALE</City>
   <State>CA</State>
   <Zip>94089-1019</Zip>
   <Country>US</Country>
  </Result>
 </ResultSet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:12:25.860

你看过[CLLocation 吗？](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)

# javascript - IE8显示可滚动表的隐藏问题

> ID：11574246
> 
> 赞同：0
> 
> 时间：2012-07-20T06:51:45.127
> 
> 标签：javascript, css

我已经使用 javascript 在页面加载时创建了一个可缩放的表格。默认情况下，表格的可见性是隐藏的。当我在 IE 中最小化/最大化页面时，浏览器使隐藏的表格可见。任何人都可以帮助我解决这个问题。

创建可滚动表的javascript如下

```
 /* Scrollable table */
       function setScrollableTableHeight(name,maxrows)
       {
        var count;
            var arrObj = document.getElementsByName(name);              
            for(count=0;count<arrObj.length;count++)
            {
                ScrollableTable(arrObj[0], maxrows);
            }              
       }

        // set Body width to screen width
        function setBodyWidth()
        {
          objBody = document.getElementsByTagName('body');
          objBody[0].style.width = screen.width - 40;
          var objDivs = document.getElementsByTagName('div');
          for(var i=0;i<objDivs.length;i++)
          {
            if(objDivs[i].className == "OuterPanel")
            {
                if(screen.width < 980)
                    objDivs[0].style.width = 980 - 42;
                else
                    objDivs[0].style.width = screen.width - 42;

                break;
            }
          }
        }
function ScrollableTable (tableEl, maxRows, tableWidth) {
 var tableHeight = 25 + maxRows * 25;

 var numRows = 0;
    this.initIEengine = function () {

        if (this.tableEl.parentElement.clientHeight - this.tableEl.offsetHeight < 0) {
            this.tableEl.style.width = this.newWidth - this.scrollWidth +'px';
        }

        if (this.thead) {

            var trs = this.thead.getElementsByTagName('tr');                
            for (x=0; x<trs.length; x++) {
                trs[x].style.position ='relative';
                trs[x].style.setExpression("top",  "this.parentElement.parentElement.parentElement.scrollTop + 'px'");
            }           
        }

        if (this.tfoot) {
            var trs = this.tfoot.getElementsByTagName('tr');             
            for (x=0; x<trs.length; x++) {
                trs[x].style.position ='relative';              
                trs[x].style.setExpression("bottom",  "(this.parentElement.parentElement.offsetHeight - this.parentElement.parentElement.parentElement.clientHeight - this.parentElement.parentElement.parentElement.scrollTop) + 'px'");
            }
        }       

        eval("window.attachEvent('onresize', function () { document.getElementById('" + this.tableEl.id + "').style.visibility = 'hidden'; document.getElementById('" + this.tableEl.id + "').style.visibility = 'visible'; } )");
    };

        this.initFFengine = function () {

        var headHeight = (this.thead) ? this.thead.clientHeight : 0;
        var footHeight = (this.tfoot) ? this.tfoot.clientHeight : 0;
        var bodyHeight = this.tbody.clientHeight;

        this.tbody.setAttribute("id", "dynamicScrollParentfirefox");

        var trs = this.tbody.getElementsByTagName('tr');
        numRows = trs.length;
        var tds; 

        if (bodyHeight >= (this.newHeight - (headHeight + footHeight))) {       
             for (x=0; x<trs.length; x++) {
                tds = trs[x].getElementsByTagName('td');
                tds[tds.length-1].style.paddingRight += this.scrollWidth + 'px';                 
            } 
        }
        var cellSpacing = (this.tableEl.offsetHeight - (this.tbody.clientHeight + headHeight + footHeight)) / 4;
        this.tbody.style.height = (this.newHeight - (headHeight + cellSpacing * 2) - (footHeight + cellSpacing * 2)) + 'px';
    };

    this.tableEl = tableEl;
    this.scrollWidth = 16;

    this.originalHeight = this.tableEl.clientHeight;
    this.originalWidth = this.tableEl.clientWidth;
    /* modified by rmv */
    if(parseInt(tableHeight) > this.originalHeight && this.originalHeight!=0)
        tableHeight = this.originalHeight;
    /* modified by rmv ends*/   

    this.newHeight = parseInt(tableHeight);
    this.newWidth = tableWidth ? parseInt(tableWidth) : this.originalWidth; 
    this.tableEl.removeAttribute('height');             

    var loverflowParent = document.createElement('div');    
    loverflowParent.setAttribute("id","dynamicScrollParent");        
    this.containerEl = this.tableEl.parentNode.insertBefore(loverflowParent, this.tableEl);
    this.containerEl.appendChild(this.tableEl);
    this.containerEl.style.height = this.newHeight + 'px';
    this.containerEl.style.width = this.newWidth + 'px';

    var thead = this.tableEl.getElementsByTagName('thead');
    this.thead = (thead[0]) ? thead[0] : null;

    var tfoot = this.tableEl.getElementsByTagName('tfoot');
    this.tfoot = (tfoot[0]) ? tfoot[0] : null;

    var tbody = this.tableEl.getElementsByTagName('tbody');
    this.tbody = (tbody[0]) ? tbody[0] : null;

    if (!this.tbody) return;

    if (document.all && document.getElementById && !window.opera)  this.initIEengine()
    if (!document.all && document.getElementById && !window.opera) this.initFFengine()       

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:59:19.280

您还可以尝试在页面高度更改时强制表格滚动。您可以在 CSS 中将此属性应用于表格的容器：`overflow-y:scroll;`

# mysql - MySQL 集群 - 无法分配请求的地址

> ID：11574248
> 
> 赞同：0
> 
> 时间：2012-07-20T06:51:53.417
> 
> 标签：mysql, cluster-computing

我无法启动 MySql Cluster 的 DBNode。MGM 和 DBNode 的防火墙已关闭。

/usr/local/mysql/bin/ndbd

```
2012-07-20 14:45:20 [ndbd] INFO     -- Angel connected to 'xxx.xxx.xxx.xxx:1186'
2012-07-20 14:45:20 [ndbd] INFO     -- Angel allocated nodeid: 2
2012-07-20 14:45:20 [ndbd] ERROR    -- Could not fetch configuration/invalid configuration, error: 'The hostname this node should have according to the configuration does not match a local interface. Attempt to bind 'xxx.xxx.xxx.xx1' failed with error: 99 'Cannot assign requested address'' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:38:52.777

好的，解决了这个问题。

创建一个虚拟局域网 (VLAN)。

# android - 如何在 Android 的滚动视图中应用手势

> ID：11574249
> 
> 赞同：0
> 
> 时间：2012-07-20T06:51:55.723
> 
> 标签：android, scrollview, gesture, epub

我正在开发包含阅读 epub 书籍的 Android 应用程序。在那我需要在书本视图中放置两页。如果这些页面超过屏幕尺寸，用户必须滚动和查看书籍，并且必须捏缩放书籍，用户可以平移书籍进行阅读。

起初我试图在 Relativelayout 中放置两个 webview。我可以通过将 relativelayout 放置在滚动视图和水平滚动视图中以在水平和垂直方向滚动来实现这一点。

但是在滑动页面时出现问题，并且 pinchzoom 在滚动视图中不起作用；它保留在第一页本身。我不知道我哪里错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:30:24.120

你是把 WebView 放在 ScrollView 里面吗？它的功能很有趣。如果您这样做，则必须禁用外部 ScrollView。

您可以修改`ScrollView`为可锁定，如此[处](https://stackoverflow.com/a/5763815/1402526)。

# php - $val 字段中需要双引号

> ID：11574250
> 
> 赞同：2
> 
> 时间：2012-07-20T06:52:00.650
> 
> 标签：php, arrays

我们正在创建一个文件，这样当我们执行该文件时，我们会将一个数组推送到一个新的 PHP 文件中。我们能够在新的 PHP 文件中打印数组详细信息，但我们无法获取 $val 字段的双引号。

代码如下

```
<?php
include_once("../dc/dcCommonLib.php");
include_once("../dc/persistence/UserData.php");
require_once("../../lib/include/connect.inc.php");

$_SESSION["survey"] = "BestBuyAug2012";
$idLink = dbconnect($_SESSION["survey"]);
$surveyWidget = rendererSurveyLoadHandler();
setDataToSession("surveywidget",$surveyWidget);
$userData = &UserData::getInstance();
$userData->setSurvey($surveyWidget);
saveFkidsToOidToFkidMappingArray($userData->OidToFkidMapping);

// prepare demo array
prepareItemArray($userData->OidToFkidMapping["Demographic"]["Q"],$demo,"b");

// prepare item array
prepareItemArray($userData->OidToFkidMapping["Default"]["Q"],$item,"i");
prepareItemArray($userData->OidToFkidMapping["Default"]["M"],$item,"i");

// prepare comment array
prepareCommentArray($userData->OidToFkidMapping["Comment"]["C"],$comment);

if (!function_exists('file_put_contents')) {
    /* ... define that function then ... */ 
}

print("Strart writting ...................");
file_put_contents("Test.php", $file,"",true);
file_put_contents("Test.php", "<?php\n","",true);
file_put_contents("Test.php", $item,"itemFkids",true);
file_put_contents("Test.php", $demo,"demoFkids",true);
file_put_contents("Test.php", $comment,"commentFkids",true);
file_put_contents("Test.php", "?>","",true);

print("written ...");

function prepareItemArray($userDataArray, &$item, $itemStr) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);
                $respId = key($respGrp[$respGrpId]);
                $item[$questId."_".key($respGrp)]=$itemStr.$respGrp[$respGrpId][$respId];           
            }else {
                foreach ($respGrp as $respGrpId=>$resp) {
                    $respGrp[$respGrpId]=$itemStr.$resp;
                }
                $item[$questId."_".key($respGrp)]=$respGrp;
            }
        }
    }   
}

function prepareCommentArray($userDataArray, &$item) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);               
                $item[$questId."_".key($respGrp)]=$respGrp[$respGrpId]["fk_id"];            
            }
        }
    }   
}

?> 
```

我们在 Test.php 中得到的数组是

```
<?php
$itemFkids = Array
(
    "203_19" => i27,//need double qoutes for all the $val fields
    "207_22" => i28,//need double qoutes for all the $val fields
    "357_22" => i99,//need double qoutes for all the $val fields
    "370_70" => i104,//need double qoutes for all the $val fields
    "377_72" => i105,//need double qoutes for all the $val fields
)
$demoFkids = Array
(
    "129_2" => b1//need double qoutes for all the $val fields
)
$commentFkids = Array
(
    "373_375" => 1,//need double qoutes for all the $val fields
    "380_382" => 2//need double qoutes for all the $val fields
)
?> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:28:37.207

> `var_export`
> 
> `var_export()`获取有关给定变量的结构化信息。它类似于`var_dump()`有一个例外：***返回的表示是有效的 PHP 代码。***
> 
> [http://php.net/var_export](http://php.net/var_export)

（突出我的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:30:02.453

不确定您要的是什么，但据我所知，您想在数组 values 周围添加双引号。

这样做的唯一方法是将它们作为值的一部分添加到代码中。这里有一些你可以自己尝试的测试用例：

```
<?php 
    $value_3 = 'value_3';

    $data = array( 'key_1' => 'value_1' // value without quotes
                  ,'key_2' => '"value_2"' // value with quotes
                  ,'key_3' => '"'.$value_3.'"' // adding quotes to value
    );

    echo '<pre>'.print_r($data, true).'</pre>'; 
```

如果您不想过多地弄乱现有代码，您还可以在最后循环遍历数组并添加双引号：

```
<?php 
    foreach( $data AS $key => $value ){
        $data[$key] = '"'.trim( $value, '"').'"'; // add double quotes to all values
    }

    echo '<pre>'.print_r($data, true).'</pre>'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T07:22:49.570

~~替换`$data[$key] .= ',';`为`$data[$key] .= '",';`~~

编辑：

```
$data[$key] = '"'.$data[$key].'",'; 
```

# web-services - 需要帮助来学习 Web 服务/Web 应用程序

> ID：11574251
> 
> 赞同：0
> 
> 时间：2012-07-20T06:52:07.213
> 
> 标签：web-services, web-applications, ejb-3.0, java-ee-5, seam3

在过去的 5 年里，我一直是一名 Java 开发人员，其产品完全使用核心 Java 和 Java Swings 开发。现在我搬到了一家新公司，在那里我将在后端做类似的工作，但是我必须学习 Web 服务、EJB、Seam 和其他与 Web 相关的东西。我想知道从哪里开始，任何有用的书籍，教程，以便深入理解和快速入门。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:37:37.963

**IDE**

使用 EE / Glassfish Bundle @“http://netbeans.org/”获取 Netbeans IDE

有一个 EE 和 Web 教程部分@“http://netbeans.org/kb/trails/java-ee.html”

**Oracle Java EE 技术（全部免费）**

我发现 JSR 是非常好的参考资料和技术解释

[http://www.oracle.com/technetwork/java/javaee/tech/index.html](http://www.oracle.com/technetwork/java/javaee/tech/index.html)

*   JSR 250 - EJB 和 Web 服务的通用注释，您需要掌握注释
*   JSR 315 - Servlet 3 Specification 这是一本很好的读物，可以了解 servlet 的规范
*   JSR 318 - Enterprise JavaBeans 3.1（涵盖无状态、计时器、单例）对于 EJB 来说也是很好的读物
*   JSR 224 - JAX-WS - 这是用于定义 Web 服务的技术

**Packt Publishing（电子书真的很实惠）** 这里有一些好书（只需搜索Java EE）

*   使用 NetBeans 7 进行 Java EE 6 开发
*   用于保护、调整和扩展企业应用程序的 Java EE 6 Cookbook
*   Seam 2 Web 开发：LITE

**JBOSS.org** "http://www.jboss.org"

*   [接缝项目文档](http://www.seamframework.org/Seam2/Documentation)

**红帽访问门户**

如果您订阅了任何 JBoss / Red-hat 产品，有很好的 EAS（企业应用服务器）文档，包括 Seam 参考

# c - 解析文本文件中用逗号或空格分隔的单词 - 我可以用 scanf 克服逗号吗？

> ID：11574252
> 
> 赞同：0
> 
> 时间：2012-07-20T06:52:15.017
> 
> 标签：c, parsing, char

我有一个包含行的文本文件，每行包含不超过 80 个字符。每行包含（一个或多个单词）用**逗号或空格分隔**。我需要词典对单词进行排序。我想将**scanf**与字符串的符号“%s”一起使用，但它只考虑空格。所以我想我不能。有什么比逐个字符更聪明地处理单词解析的方法吗？

这是我打算做的事情的草图：

```
 char**arr;
    arr=calloc(Size, sizeof(char)*80);
    int m=0;

    while (!feof(file)) {

        char c=fgetc(file);
        while (c!='/n') {
             j=0;
            char* current;
            current=calloc(1,sizeof(char)*80);
            while (c!=','&& c!=' ' && c!='/n') {
                current[j]=c;
                j++;
                c=fgetc(c);
            }
            current[j]='\0';
            arr[m]=current;

            free(current);

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:47:52.047

假设您在合适的变量（`line`下面）中有整行，您可以使用以下内容：

```
const char *ptr = line;
char token[80];

while(*ptr != '\0' && sscanf(ptr, "%79[^, ]", token) == 1)
{
  ptr += strlen(token);
  while(*ptr == ',' || *ptr == ' ')
    ++ptr;
} 
```

这使用（在我看来，未充分利用）字符组格式`%[]`来抓取字符，直到找到逗号或空格，然后跳过解析的标记以及随后的任何分隔符。

# c# - 如何检查用户是否从两个树视图中选择了节点

> ID：11574254
> 
> 赞同：0
> 
> 时间：2012-07-20T06:52:20.157
> 
> 标签：c#, winforms

我的 Windows 应用程序中有两个树视图，并且有一个按钮。只有当用户从两个树视图中选择节点时，该按钮才可见。如何才能做到这一点。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:58:44.203

在两个 TreeView 中查找`AfterSelect`事件。使用给定的事件 args ( `TreeViewEventArgs`)，您可以找到使用 选择（或扩展等）的节点`e.Node`。您可以为两个 Treeview 设置相同的事件处理程序方法。

然后设置你的按钮可见性`this.MyButton.Visible = (this.MyTreeView1.SelectedNode != null && this.MyTreeView2.SelectedNode != null);`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:59:24.423

您可以使用 AfterSelect 事件检查两棵树是否都选择了节点：

```
tree1.AfterSelect += new TreeViewEventHandler(tree_AfterSelect);
tree2.AfterSelect += new TreeViewEventHandler(tree_AfterSelect);

public void tree_AfterSelect(object sender, TreeViewEventArgs e)
{
    button1.Visible = tree1.SelectedNode != null && tree2.SelectedNode != null;
} 
```

# sql - 从 Windows 2008 SQL Server 迁移到 SQL CE（用于 WebMatrix）

> ID：11574255
> 
> 赞同：1
> 
> 时间：2012-07-20T06:52:21.967
> 
> 标签：sql, sql-server, sql-server-2008

我的远程 SQL Server 2008 数据库中有一些东西。我想把它放在我的 SDF 数据库（WebMatrix 数据库）中。但我不能只将 Navicat 中的行（查看 SQL Server 08 的表时）复制到 SDF 数据库中，因为有些行不允许您手动插入内容。

所以我需要一种从 Windows SQL Server 2008“迁移”到 SQL Server CE (.sdf) 的方法。

* * *

我认为我有正确的工具来完成此任务，但如果有人能指出我正确的方向，我将不胜感激。

我有：

1.  Visual Studio 2012 终极版
2.  网络矩阵
3.  Navicat 高级版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:26:34.787

好吧，经过数小时的搜索，我已经设法解决了这个问题。

* * *

[如何将 SQL Server 数据库迁移/缩小到 SQL Server Compact 4.0（和 3.5）](http://erikej.blogspot.com.au/2010/02/how-to-use-exportsqlce-to-migrate-from.html)有一种非常简单的方法来执行此操作。

像我一样，您可能需要下载以下工具（并将它们放在与 CMD.exe 文件相同的目录中：

*   [SQL Compact 命令行工具](http://sqlcecmd.codeplex.com/downloads/get/386348)
*   [SQL Compact 数据和架构脚本实用程序](http://exportsqlce.codeplex.com/downloads/get/335673)

# python - 如何将日志消息同时写入日志文件和控制台？

> ID：11574257
> 
> 赞同：0
> 
> 时间：2012-07-20T06:52:39.657
> 
> 标签：python, logging

此代码是否同时写入日志文件和控制台？

```
logFile = open("logfile.log",a)
print >>logFile,message
logFile.close() 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-20T14:12:08.140

不，它不会写入两者。`print()`只会写入控制台。关于您的原始代码的快速说明。我想你在`message`某个地方定义了，但代码仍然不正确。`a`您需要在`open`语句中加上引号，如下所示：

```
open("logfile.log", "a") 
```

因为我认为您打算附加到文件中。否则，您的代码会抛出一个`NameError`因为`a`不是定义的变量。

但是，正如其他人所说，您应该强烈考虑使用[日志记录](http://docs.python.org/py3k/library/logging.html#module-logging)模块。这是一个如何写入控制台和日志文件的简单示例。代码部分来自[这里](http://docs.python.org/howto/logging-cookbook.html#multiple-handlers-and-formatters)和[这里](https://stackoverflow.com/a/11582124/869912)：

```
import inspect
import logging

def function_logger(file_level, console_level = None):
    function_name = inspect.stack()[1][3]
    logger = logging.getLogger(function_name)
    logger.setLevel(logging.DEBUG) #By default, logs all messages

    if console_level != None:
        ch = logging.StreamHandler() #StreamHandler logs to console
        ch.setLevel(console_level)
        ch_format = logging.Formatter('%(asctime)s - %(message)s')
        ch.setFormatter(ch_format)
        logger.addHandler(ch)

    fh = logging.FileHandler("{0}.log".format(function_name))
    fh.setLevel(file_level)
    fh_format = logging.Formatter('%(asctime)s - %(lineno)d - %(levelname)-8s - %(message)s')
    fh.setFormatter(fh_format)
    logger.addHandler(fh)

    return logger

def f1():
    f1_logger = function_logger(logging.DEBUG, logging.ERROR)
    f1_logger.debug('debug message')
    f1_logger.info('info message')
    f1_logger.warn('warn message')
    f1_logger.error('error message')
    f1_logger.critical('critical message')

def f2():
    f2_logger = function_logger(logging.WARNING)
    f2_logger.debug('debug message')
    f2_logger.info('info message')
    f2_logger.warn('warn message')
    f2_logger.error('error message')
    f2_logger.critical('critical message')

def main():
    f1()
    f2()
    logging.shutdown()

main() 
```

由于记录器对象可以有多个处理程序，我们可以创建多个写入不同位置的处理程序。在我的代码中，该`function_logger`函数创建了一个特定于调用它的函数的记录器对象。

该函数将级别消息和更高级别的消息`f1()`记录`DEBUG`到文件`f1.log`中，同时将`ERROR`级别消息和更高级别的消息写入控制台，每种格式都有不同的格式。

`f2()`但是，该函数不会将任何内容记录到控制台，而只会将`WARNING`级别消息记录到其日志文件`f2.log`中。运行此脚本一次会在控制台上产生此输出：

```
2012-07-20 10:46:38,950 - f1  - error message
2012-07-20 10:46:38,953 - f1  - critical message 
```

这个输出分别在`f1.log`和`f2.log`中：

**f1.log**：

```
2012-07-20 10:46:38,950 - 26 - DEBUG    - debug message
2012-07-20 10:46:38,950 - 27 - INFO     - info message
2012-07-20 10:46:38,950 - 28 - WARNING  - warn message
2012-07-20 10:46:38,950 - 29 - ERROR    - error message
2012-07-20 10:46:38,953 - 30 - CRITICAL - critical message 
```

**f2.log**

```
2012-07-20 10:46:38,960 - 36 - WARNING  - warn message
2012-07-20 10:46:38,960 - 37 - ERROR    - error message
2012-07-20 10:46:38,960 - 38 - CRITICAL - critical message 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:02:21.013

不，它只写入文件。你应该使用`logging`模块。请参阅[http://docs.python.org/library/logging.html](http://docs.python.org/library/logging.html)

# ios - UIButton 内的 UIView

> ID：11574260
> 
> 赞同：1
> 
> 时间：2012-07-20T06:52:55.087
> 
> 标签：ios, uiview, uibutton

我必须添加一个按钮。这应该是不停地发光。所以我使用了一个外部库。通过这个，我必须将图像添加到 UIImageView，然后将 imageview 添加到视图。这被添加到按钮。发光由 startGlow: 方法启用，该方法采用 UIView。这迫使我将 UIView 添加到 UIButton。当我触摸按钮时，问题就出现了，里面装满了 UIView，它没有响应。边缘似乎工作正常。有什么解决办法吗？我希望按钮能够响应所有 TouchInside 事件。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T08:44:11.677

如果您不需要与视图交互，您可以通过将 userInteractionEnabled 属性设置为 NO 来关闭交互。然后，您应该能够与其下方的视图或 UIButton 进行交互。

# vim - 如何重新索引 CtrlP Vim 插件？

> ID：11574264
> 
> 赞同：19
> 
> 时间：2012-07-20T06:53:05.047
> 
> 标签：vim, macvim, ctrlp

我已经使用 CtrlP 一段时间了，但我仍然没有弄清楚如何重新索引它。所以每当我想创建一个新文件时，我必须关闭所有现有的 vim 会话，创建文件，然后重新打开它们。否则新文件将不会显示在结果中。

尽管这确实是一个巨大的痛苦，但我一直在做这件事而没有多想。今天我终于决定问了。有人知道如何重新索引 CtrlP 吗？我在文档中找不到它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-20T07:15:23.453

你读过 CtrlP 的文档吗？答案当然就在那里：

`F5`

说真的，`:help pluginname`应该是安装插件后发出的第一个命令。之后`:helptags ~/.vim/doc`，也许。

# c# - 如何通过 GDI 绘制椭圆 C#？

> ID：11574267
> 
> 赞同：3
> 
> 时间：2012-07-20T06:53:18.137
> 
> 标签：c#, winforms, gdi+, system.drawing

我是 C# 的新手，我正在尝试绘制一个填充颜色的椭圆，我找到了一些代码，但我不知道该怎么做。

我试过这段代码：

```
Graphics g = this.CreateGraphics();
Pen pen = new Pen(Color.Aquamarine, 2);
g.DrawEllipse(pen, 10, 10, 100, 20); 
```

但该方法不存在。

你帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:35:58.733

您应该在“Paint Event”表单中进行图形绘制，否则一旦屏幕更新，您将失去绘图。这是一个关于如何做到这一点的快速而肮脏的例子。

```
public Form1()
{
    InitializeComponent();
    this.Paint += new PaintEventHandler(Form1_Paint);
}

void Form1_Paint(object sender, PaintEventArgs e)
{
    Pen pen = new Pen(Color.Aquamarine,2);
    SolidBrush brush = new SolidBrush(Color.Aquamarine);

    e.Graphics.DrawEllipse(pen, 10, 10, 100, 20);
    e.Graphics.FillEllipse(brush, 10, 50, 100, 20);
} 
```

# git - 更新文件时Git更改默认umask

> ID：11574271
> 
> 赞同：22
> 
> 时间：2012-07-20T06:53:29.733
> 
> 标签：git, permissions, umask

我对 Git 有疑问。我在 Google 和 StackOverflow 中搜索了解决方案，但没有任何帮助。

问题是，每次 git 更新工作目录中的某个文件时（当我签出分支或合并分支等时），文件权限都会更改，从而添加“可写入组”标志。如果文件可写入分组，我的 apache 会为该文件显示“错误 500”。

示例：我有一个文件 index.php。权限是“-rwxr-xr-x”。当前（活动）分支是主分支。此文件在“开发”分支中更改。我执行“git checkout develop”并且文件 index.php 获得权限“-rwxrwxr-x”（添加了可写到组）。我的网站停止工作。由于 apache 不允许在 php 文件中使用此标志（我不知道为什么，但我无法更改它）。

每次执行“git checkout develop”时，我还需要执行“chmod gw index.php”。我不喜欢执行两个命令（有时我忘记执行这个命令并且我的网站无法正常工作）。

我能做些什么来解决这个问题？我认为这与umask有关。我做了一些我在网上找到的技巧，但没有任何效果。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-04T15:14:40.137

快速回答是这个 shell 函数要放在你的`~/.profile`. 下面是一个解释。

```
git(){(umask 0022; command git "$@")} 
```

[umask](http://en.wikipedia.org/wiki/Umask)是进程的属性。它是从父进程继承的，以后可以从内部更改。更改 umask 的命令通常也被命名为 umask。

Git 没有用于设置其 umask 的配置选项，它在执行后不会更改其 umask。您必须从外部设置 Git 的 umask，让它从父进程（通常是 shell）继承。

嗯，你似乎不喜欢除了 git 之外的任何东西都改变了 umask 的想法。所以让我们在执行时更改它`git`。

当 shell 执行一行时，它会获取该行的第一个单词并尝试查找该名称的函数。只有在没有时，它才会尝试在`PATH`. 我上面写的函数名为`git`，因此 now 的任何直接调用都会`git`执行它而不是`git`命令。

该函数执行一个子shell，更改它的umask 并`git`从子shell 内部执行命令。Git 完成工作后，子 shell 也退出，原始 shell 实例仍将具有原始 umask。

但是，该函数还显示了如何绕过自身。如果您调用`git`via`command git`或 even `/usr/bin/git`，该函数将不会被调用。不过，对于任何体面的用途，这已经足够了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-22T06:53:05.297

允许文件作为二进制文件执行有点危险。无论如何，我用umask解决了这个问题。我的`post-receive`脚本看起来像：

```
!/bin/sh
umask 002
GIT_WORK_TREE=/var/www/site git checkout -f 
```

因此，`file permission`s 设置为`664`和`directory permissions`设置为`775`，这非常适合我。

`.profile`PS在用户文件中设置umask`git`没有效果，我不明白为什么，如果你知道为什么会发生这种情况，请注释掉。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-09T14:30:26.290

在使用向后移植的 Xenial 版本 4.x linux 内核在 Ubuntu 14.04 (Trusty) 上通过 NFS 安装的主目录中签出 repo 时，我刚刚遇到了这个问题。将 Git 克隆到本地目录就可以了。更奇怪的是：第二台 Ubuntu 14.04 服务器在同一个挂载目录上没有出现同样的问题。

经过大量的探索后，我能够看到使用 strace git 调用 open() 系统调用来创建每个文件，其中包含选项 O_CREAT、O_WRONLY 和 O_EXCL 以及 0666 模式，但接下来的 syscal 是针对 fstat()该文件并告诉我它是模式 0700 。就我而言，该问题仅影响回购中的某些文件。尽管大多数文件的“git ls-index”显示模式为 0644，但其中一些被正确创建，而另一些则没有；尽管它总是相同的文件在克隆上有错误的权限。

我注意到两个系统之间的内核版本存在差异，然后发现了以下错误：[https ://bugs.launchpad.net/ubuntu/+source/linux/+bug/1654288](https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1654288)

将内核升级到 4.4.0-98（从 4.4.0-59）为我解决了这个问题。我检查了一些仍在使用版本 3.x Linux Kernel 的主机，这些主机没有问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-04T15:52:37.740

结帐后使用挂钩更改文件模式可以在问题发生后解决问题。执行钩子时，文件系统中已经存在错误的文件模式。如果请求刚刚在结帐和钩子执行之间到达，服务器将响应 500 错误。但无论如何，您可能对此解决方案感兴趣。

你需要一个在所有必要文件上`post-checkout`运行的钩子。`chmod g-w`钩子是`.git/hooks/post-checkout`, 应该是可执行的，并获取当前`HEAD`作为第二个参数（shell 中的 $2）。钩子可能如下所示：

```
#!/bin/bash
git ls-files -z --with-tree="$2" | xargs -0 chmod g-w -- 
```

由于钩子没有得到签出的文件列表，这可能是最好的实现。它改变了当前所有文件的模式`HEAD`。

# android - 是否可以在不显示在android屏幕上的情况下处理视频（预览）流？

> ID：11574274
> 
> 赞同：1
> 
> 时间：2012-07-20T06:53:33.683
> 
> 标签：android, android-camera

我在 Android（大于 3.2）的相机预览屏幕上进行了基本的对象检测。对于不支持在预览屏幕上处理的设备，我正在缓冲预览屏幕，对其进行处理并清除缓冲区。这部分正在按需要工作。

我现在想要的是这个应用程序在后台运行，而其他任何应用程序都在前台运行。我正在使用 android 服务，并且能够在后台运行一个小型测试应用程序。但是我担心的是相机预览应用程序。

我不想显示预览屏幕，而是使用预览屏幕信息进行处理。这可能问得太多了，但我想知道这是否可能。我遇到了[这个链接](https://stackoverflow.com/questions/2386025/android-camera-without-preview)，它显示了一些希望。基本上我想处理视频（预览）流而不在屏幕上显示它。如果这是可行的，那么我可以考虑将这个应用程序放在后台，并将其他一些应用程序放在前台。

不幸的是，我将无法共享代码，但这是创建表面视图和启动预览的标准逻辑。

我真的很感激对此的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:00:53.363

[在这里](https://stackoverflow.com/questions/11544877/really-confused-with-setpreviewcallback-in-android-need-advice)查看评论。基本上他打开相机硬件，设置预览回调并在不设置预览显示的情况下进行启动预览（这可能不适用于每个设备）。您可以从后台服务中尝试此操作。如果您的前台无法访问相机应用程序，所有这些都将起作用。如果它有效，请更新它。我有兴趣知道。

# javascript - 如何在javascript中将变量传输到外部js文件？

> ID：11574275
> 
> 赞同：1
> 
> 时间：2012-07-20T06:53:48.367
> 
> 标签：javascript, jquery

**案例1：**我已经将一个变量传递给一个像这样的外部js文件

```
<script type="text/javascript">

var data1, data2, data3, data4;

function plotGraph() {
    var oHead1 = document.getElementsByTagName('HEAD').item(0);
    var paramScript = document.createElement("script");
    paramScript.type = "text/javascript";
    paramScript.setAttribute('data1', data1);
    paramScript.setAttribute('data2', data2);
    paramScript.setAttribute('data3', data3);
    paramScript.setAttribute('data4', data4);
    oHead1.appendChild(paramScript);
    var oHead = document.getElementsByTagName('HEAD').item(0);
    var oScript = document.createElement("script");
    oScript.type = "text/javascript";
    oScript.src = "js/graph.js";
    oHead.appendChild(oScript);
}
</script> 
```

**案例 2：**我什至尝试使用 jquery 像这样传递它

```
<script type="text/javascript">   

    function plotGraph() {
        var data1, data2, data3, data4;
        $.getScript("js/graph.js");
    }
</script> 
```

在第一种情况下，这是可行的，但我必须创建全局变量……我不想要这个……</p>

在第二种不工作的情况下，有在 js 文件中无法识别的局部变量。

我该怎么做？有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T07:01:58.580

只有在以下情况下，变量才能在单独的脚本之间共享：

1.  全局变量
2.  如果它们以某种方式处于相同的上下文中（很难使用多个外部脚本）
3.  如果您在一个模块中提供一个函数来返回对变量的访问。
4.  如果您调用另一个脚本并将变量或对变量的引用传递给另一个脚本。

* * *

**编辑：**既然 OP 已经解释了他们真正想要做的事情（从 ajax 调用到外部脚本中的函数通信数据），这个问题的真正答案是：

您应该从 ajax 调用的成功处理程序中调用外部脚本中的全局函数，并将这些数据元素传递给该函数。然后，外部脚本中的函数可以立即对数据进行操作，也可以将数据保存在自己的变量中以备后用。

* * *

仅供参考：`$.getScript()`在全局级别加载脚本。这就是为什么您的案例 2 不起作用的原因。

共享对一组变量的访问的一种方法是将它们全部作为对象的属性，然后使该对象成为全局对象或提供一个全局函数来检索对该对象的访问。例如，您可以声明具有多个属性的单个全局对象。

```
var myConfigObject = {
    data1: value1,
    data2: value2,
    data3: value3,
    data4: value4
}; 
```

* * *

要在外部脚本文件中调用函数，您可以执行以下操作：

1.  在您的外部脚本文件中定义一个全局可访问的函数。让我们称之为`doIt(a, b, c, d)`- 一个有四个参数的函数。
2.  然后，在您有可用数据值的 ajax 调用中，您只需调用`doIt()`并传递所需的数据值`doIt(3, "foo", data4, whatever)`。
3.  然后，在 的实现中`doIt(a, b, c, d)`，您可以获得传递给它的这四个数据值。

因此，在您的外部文件中，您将拥有以下内容：

```
function doIt(a, b, c, d) {
    // do whatever doIt wants to do
    // use the arguments passed to this function
} 
```

在您的主 index.html 文件中，您将有一个 ajax 调用：

```
$.ajax(..., function(data) {
    // process the returned data from the ajax call
    // call doIt
    doIt(3, "foo", data4, whatever);

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T07:11:41.967

你做`paramScript.setAttribute('data1', data1);`等的代码是不必要的。它只是意味着在代码段生成的 HTML 中看起来像`<script type="text/javascript" data1="data1" data2="data2"...`

我认为全局变量确实是您的选择。但是，您可以改为创建一个全局命名空间：

```
var scriptParams = {};
scriptParams.data1 = 'data1';
scriptParams.data2 = 'data2'; 
```

等等。这会更干净，因为您在全局范围的顶层只有一个对象。

# android - 如何在 XMPP 中获取当前用户名和图片？

> ID：11574279
> 
> 赞同：1
> 
> 时间：2012-07-20T06:54:08.180
> 
> 标签：android, xmpp

关于如何在 xmpp 甚至图片中获取当前用户的名称，我有一个大问题。我已经使用了 AccountManager，但我收到了 null。请帮我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T06:59:53.037

如果您使用 XMPPConnection 连接，您可以使用`getUser()`方法获取当前登录的用户名。

要获取登录用户的个人资料图片，您必须使用 VCard 获取用户的详细信息，

```
VCard vCard = new VCard();
ProviderManager.getInstance().addIQProvider("vCard", "vcard-temp",
                                                         new VCardProvider());
vCard.load(connection_instance, logged_in_user_name);
byte[] bs = vCard.getAvatar(); 
```

然后你可以从 byte[] bs 获取 Bitmap。

# c++ - 如何使用 Code::Blocks 在 C++ 程序中使用 SQLite？

> ID：11574280
> 
> 赞同：3
> 
> 时间：2012-07-20T06:54:11.957
> 
> 标签：c++, sqlite, codeblocks

我是 Code::Blocks 和 SQLite 的完整初学者，并且对 C++ 有一些基础知识。我目前正在使用 Ubuntu 11.04。

我在[这里](http://www.sqlite.org/download.html/)下载了 SQLite 合并。当我解压 zip 文件时，里面有四个文件：`shell.c`、`sqlite3.c`、`sqlite3.h`和`sqlite3ext.h`. 如果我只是将这些文件添加到（例如）控制台项目，它会给出一个错误：下载的 sqlite 的 .c 都有自己的主要功能。从项目中删除这些，错误消失了，我可以调用`#include "sqlite3.h"`. 我正在尝试遵循[这个，并从](https://stackoverflow.com/questions/11229862/sqlite3-api-was-not-declared-in-this-scope)[这里](http://www.dreamincode.net/forums/topic/122300-sqlite-in-c/)尝试了前两行代码，它给出了一个错误：`undefined reference to sqlite3_open`。

我认为将这些 .h 直接添加到控制台项目不是使用它的正确方法，尽管我不确定。

我应该如何使用这些？我应该怎么做才能将它们用于我的 C++ 程序？

任何帮助是极大的赞赏。:)

编辑：我还尝试通过以下方法创建这些 sqlite 文件的 .a[文件](http://turrier.fr/tutoriels/c_05/create-and-use-a-static-library-with-c-or-c++.html)。当我尝试它时，它给出了一个错误：`cannot find -lsqlite`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T07:37:21.080

我得到了它！虽然我做了一些导致问题的事情..我忘记删除我之前在项目>构建选项>链接器设置中添加的.a文件，这导致了问题..

以下是我添加 SQLite 的步骤：（对于那些可能有同样问题的人）

1.  将从 SQLite Amalgamation 中提取的文件复制到项目目录。

2.  添加sqlite文件（项目>添加文件）除了shell.c（它是导致多功能错误的那个）

3.  编译它（是的，一个简单的 Ctrl+f9）。

4.  这里有错误：`undefined reference to pthread_mutexattr....`。通过转到项目 > 构建选项 > 突出显示上方`Debug`和`Release`左上角的“项目名称”> 链接器设置，然后添加`"-lpthread"`（不带引号）到`Other linker options:`.

5.  发现更多错误：`undefined reference to dlopen, dlerror....`. 在之前添加的“-lpthread”下方添加“-ldl”。

完毕 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-24T16:08:30.880

作为一个初学者，我没有找到完整的Windows答案，一开始什么都理解很痛苦。所以这对我有用。

1.  下载 SQlite[合并](http://www.sqlite.org/download.html)文件。
2.  打开 Code::Blocks -> 新建项目 -> 选择静态库
3.  解压缩您下载的文件并将文件夹/内容复制到新项目目录。将所有文件添加到项目并**构建项目**。
4.  您将在 bin/Debug 或 bin/Release 目录中找到一个*ProjectName* .a 文件。将该文件复制到您的实际 SQlite 项目目录。
5.  转到代码::块项目->构建选项。选择“链接器设置”选项卡并添加 .a 文件的路径。不要关闭它！
6.  在“搜索目录”选项卡中，选择“编译器”选项卡，添加合并头文件的路径，或将头文件复制到您的目录（您可以将头文件添加到您的项目中）并在“链接器”选项卡中添加.a 文件的路径
7.  现在编译！！！希望这会运行

就是这样，我希望它能为另一个菜鸟节省一些搜索时间

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T07:00:08.310

您需要先编译 sqlite 代码，然后在需要的地方编译`#include "sqlite3.h"`到项目中。

**UPD：** 试试这个：

从 sqlite 站点下载[此包](http://www.sqlite.org/sqlite-autoconf-3071300.tar.gz)并将其解压缩到某个位置，例如，放入名为“sqlite”的文件夹中。打开终端，进入这个文件夹。在里面，运行

```
./configure
sudo make 
sudo make install 
```

看看会发生什么。它应该自动构建自己。请参阅存档中的 README 文件。

# c - 出现 EXITED 错误：指向 c 中数组的指针

> ID：11574283
> 
> 赞同：0
> 
> 时间：2012-07-20T06:54:16.903
> 
> 标签：c

```
int main()
{
 unsigned char a[3];
 unsigned char (*p)[3]=NULL;
 unsigned char *q=NULL;
 int i = 0;
 a[0]=0;
 a[1]=1;
 a[2]=2;
 p=&a;
 for(i=0;i<3;i++){
   if((*p)[3] == a[3]){
     printf("*p[%d]:%d a[%d]:%d",i,(*p)[3],i,a[3]);
   }
 }
}

o/p:
*p[0]:0 a[0]:0*p[1]:0 a[1]:0*p[2]:0 a[2]:0
Exited: ExitFailure 14 
```

我想将一个大小为 3 的数组复制到一个指针并进行比较。我写了一个示例程序。但我得到一个错误值。我使用在线 c 编译器运行它。(codepad.org) 请帮助我找出我的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T06:56:38.353

你的变量`p`是一个数组，而不是一个指针。你不能重新分配一个数组来指向其他地方，所以这条线

```
p = &a; 
```

无效。

此外，您似乎知道从 0 开始的 C 索引，因此使用索引`[3]`对大小为 3 的数组进行比较是无效的。

此外，在您的比较循环中，您实际上并没有使用`i`to 索引，而是始终使用无效的常量 index 进行比较`[3]`。

从您的代码中不是很清楚（`q`例如，未使用），但*听起来*好像您想做类似的事情：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

unsigned char a[3];
unsigned char *p;

p = malloc(sizeof a);
if(p != NULL) /* If allocation succeeded, p is valid. */
{
  int i;

  memcpy(p, a, sizeof a);
  for(i = 0; i < sizeof a; ++i)
  {
    if(p[i] == a[i])
      printf("p[%d]:%d a[%d]:%d\n", i, p[i], i, a[i]);
  }
  free(p);
} 
```

当然，这将始终打印所有数字，因为`memcpy()`永远不会复制内存。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:32:14.130

在这里，您已将main 函数的**返回类型声明为****int**，但您没有从中返回任何内容。所以**返回**任何**整**数值（如 1）或使主函数的返回类型为**void**。

# java - 类文件到Java文件的转换

> ID：11574285
> 
> 赞同：2
> 
> 时间：2012-07-20T06:54:20.297
> 
> 标签：java, reverse-engineering, war, decompiling, .class-file

我有一个 War 文件（一个 Java 应用程序）由 64 个类文件以及图像/CSS/JS 文件组成。我丢失了这个战争文件的来源。现在我想对代码进行一些更改。我正在寻找社区关于以下问题的一些专家建议。

1.  有没有最好的方法将 .class 文件转换为 .java 文件而不会丢失任何代码部分？
2.  有什么工具可以完成这项任务？
3.  将 .class 文件转换为 .java 文件以重新创建 war 文件有哪些挑战/缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T06:56:29.357

1.  转换为 Java 字节码几乎是完全可逆的。正如@StephenC 所说，在重新生成的源代码中，您将丢失注释、局部变量的名称等。它可能无法立即编译，但您应该能够再次编译，只需稍作修改。

2.  你需要一个Java反编译器来做到这一点。试试[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)或[DJ Java 反编译器](http://www.neshkov.com/dj.html)

3.  如果您混淆了您的来源，您恢复的来源将不会更难理解和逆向工程。否则，只需稍加修改，您就应该能够取回您的资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T07:06:28.443

如果你不想花时间去理解反编译的字节码，**请开始为任何两个以上类的项目使用版本控制系统和远程存储库。**

特别是，你可以将 Git 与 GitHub 一起使用，开源是免费托管的，而如果你想保护你的代码，你可以得到一个便宜的商业订阅。

这次，请使用 JD 等 java 反编译器：

1.  使用 java 反编译器来反编译字节码。
2.  从反编译的 java 类中创建一个 git 存储库
3.  不断与远程仓库同步

# xpath - 了解 X-Path 表达式

> ID：11574291
> 
> 赞同：0
> 
> 时间：2012-07-20T06:54:36.737
> 
> 标签：xpath

我试图了解 XPath 以解析[diffxml](http://diffxml.sourceforge.net/)文件。我浏览了 w3schools 网站。我是否正确理解这些？

语句1：`/node()[1]/node()[3]`
选择根节点的第三个孩子

语句2：`/node()[1]/node()[1]/node()[1]`
选择根节点的第一个节点的子节点

语句3：`/node()[1]/node()[3]/node()[2]`
选择根节点下第三个节点的第二个子节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:03:03.300

是的，您正确理解它们，但这不是您使用 XPath 的方式。首先`node()`可以是任何东西，而不仅仅是元素。那么纯索引可以说是选择事物的最佳方式，您应该真正使用名称，并可能使用谓词来过滤节点集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:32:50.700

你会在这个网站上找到很多对 w3schools 的批评。就我个人而言，我发现它是一个有用的资源，但只有当我试图提醒自己我曾经知道的事情时。它并不是真正为从头开始自学而设计的，我建议您需要一种不同的学习策略。称我为守旧派，但当我学习新技术时，我发现没有什么比一本好书更好的了。

据我所知，您已经正确理解了您的示例。但是你了解什么是“节点”吗？例如，您知道在什么情况下空白文本算作一个节点？理解 XPath 的关键是理解数据模型，以及数据模型与 XML 的词法（尖括号）形式相关的方式。

# java - Java/PHP 桥接 API 中的错误

> ID：11574293
> 
> 赞同：2
> 
> 时间：2012-07-20T06:54:41.400
> 
> 标签：java, php, php-java-bridge

我正在使用 PHP/Java 桥接获取资本 API，您可以在[此处](http://api.efxnow.com/DEMOWebServices2.8/Service.asmx)找到。但是在使用[PHP/Java 桥接](http://php-java-bridge.sourceforge.net/pjb/)器连接之后（它已正确连接并且我对其进行了测试），我试图通过为此创建一个对象来使用 API，这是我在 PHP 中使用的代码，

```
 ini_set('display_errors',1);
    require_once("http://localhost:8080/jsp/java/Java.inc");

    $application    = java_context()->getServletContext();
    $configFile     = new java("java.util.Properties");
    $epaymentpipe   = new java("com.gain.rateservice.*"); 
```

但它会引发如下错误。

```
Fatal error: Uncaught [[o:Exception]:"java.lang.Exception: CreateInstance failed: new com.gain.rateservice.msg. Cause: java.lang.ClassNotFoundException: com.gain.rateservice.msg VM: 1.6.0_20@http://java.sun.com/" at: #-10 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1438) #-9 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1284) #-8 java.lang.Class.forName0(Native Method) #-7 java.lang.Class.forName(Class.java:264) #-6 php.java.bridge.Util.classForName(Util.java:1518) #-5 php.java.bridge.JavaBridge.CreateObject(JavaBridge.java:445) #-4 php.java.bridge.Request.handleRequest(Request.java:458) #-3 php.java.bridge.Request.handleRequests(Request.java:500) #-2 php.java.bridge.http.ContextRunner.run(ContextRunner.java:145) #-1 php.java.bridge.ThreadPool$Delegate.run(ThreadPool.java:60) #0 http://localhost:8080/jsp/java/Java.inc(232): java_ThrowExceptionProxyFactory->getProxy(4, 'java.util.Prope...', 'T', false) #1 http://localhost:8080/jsp/java/Java.inc(360): java_Ar in http://localhost:8080/jsp/java/Java.inc on line 195 
```

因为我不懂java，所以我无法修复这个错误。对此的任何帮助将不胜感激。这是我得到的确切截图。

![在此处输入图像描述](../Images/19d9666887624f4b25e8f169745d3daf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:13:40.010

该错误表明 Java 找不到类“com.gain.rateservice.msg”。

它应该包括在：

1) 将它包含在运行实例时告诉 Java 的类路径中。

2) 将它包含在您正在构建并传递给 Java 的 Jar/War 中。

如何执行取决于您调用或构建 Java 方面的确切方式，但如果您从命令行运行它，它将类似于：

java -jar HelloWorld.jar -cp /path/to/GainRateserviceFolder/

# java - 使用java将表情符号从字符串转换为字符串

> ID：11574300
> 
> 赞同：0
> 
> 时间：2012-07-20T06:55:15.467
> 
> 标签：java, emoticons

如何从字符串中删除表情符号我的简单代码是..

```
public static void main(String[] args) throws SQLException {
    String str="My nam is  ur -D ";
    getRefineCode(str);
}

private static void getRefineCode(String str) throws {
    List smstypeWord=getshortWord();
    for(int i=0;i<smstypeWord.size();i++) {
        String string=smstypeWord.get(i).toString();
        String stringcon[]=string.split("_");
        String emessage=stringcon[0];
        String emoticon=stringcon[1].trim();
        if(str.contains(emoticon)) {
            str=str.replace(emoticon, emessage);
            System.out.println("=================>"+str);
        }   
    }
    System.out.println("=======++==========>"+str);
}

private static List getshortWord() throws SQLException {
    String query1 = "SELECT * FROM englishSmsText";
    PreparedStatement ps = conn.prepareStatement(query1);
    ResultSet rs = ps.executeQuery();
    String f_message="";
    String s_message="";
    while(rs.next()) {
        s_message=rs.getString("message");
        f_message=rs.getString("short_text");
        shortMessage.add(s_message+"_"+f_message);
        //fullMessage.add(f_message);
    }
    return shortMessage;
} 
```

我的数据库基于[http://smsdictionary.co.uk/abbreviations](http://smsdictionary.co.uk/abbreviations)网站

我能够理解如何删除多个 abb。或短信

输出就像 My nam is You are SquintLaughtGrinisappGaspoooh!!shockedintedr, Big SmilGrinisappGaspoooh!!shockedinted, Grin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:03:35.877

首先，`replace`应该是`replaceAll`，否则你只会捕捉到第一次出现的表情符号或缩写。

其次，您可以通过仅匹配整个单词来减少误报的数量。`replaceAll`接受正则表达式，因此您可以`replaceAll("\\b" + emoticon + "\\b", emessage)`仅用于替换被单词边界（空格、标点符号等）包围的缩写。

但是，使用您正在使用的字典，您仍将替换`KISS`为`Keep It Simple, Stupid`. 您将替换`86`为`"out Of" Or "over" Or "to Get Rid Of"`... 也许您应该寻找不同的方法。

编辑：我忘了你在寻找特殊字符。您应该尝试类似这样的正则表达式，它会抑制搜索字符串中的特殊字符（并且会比以前过于严格的`\b`模式更加慷慨）：

```
replaceAll("((?<=\\W)|^)\\Q" + emoticon + "\\E((?=\\W)|$)", emessage); 
```

它应该涵盖*大多数*情况，我怀疑是否有任何方法可以完美地识别什么是首字母缩略词，什么不是。

# wordpress - WP 后端：为特定用户组创建自定义菜单

> ID：11574301
> 
> 赞同：1
> 
> 时间：2012-07-20T06:55:20.013
> 
> 标签：wordpress

我现在正在使用**成员**插件来管理**用户组**（限制特定用户组的页面/帖子）以在后端显示指向该用户组的链接我需要一个插件来创建**自定义菜单**，其中将显示**允许的页面/帖子**链接（后端）针对特定**用户组**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:12:50.657

那么我所做的就是在我的主题中添加这个脚本`function.php`

```
// Admin bar menu w.r.t role
function wp_admin_bar_new_item() {
    global $wp_admin_bar;

    if (current_user_can('contractor')){

        $wp_admin_bar->add_menu(array(
            'id' => 'wp-admin-bar-new-item',
            'title' => __('Contractor Menu'),
            'href' => 'http://my_site/contractor/'
        ));

    } elseif (current_user_can('consultant')) {

        $wp_admin_bar->add_menu(array(
            'id' => 'wp-admin-bar-new-item',
            'title' => __('Consultant Menu'),
            'href' => 'http://my_site/consultant/'
        ));
    }
}
add_action('wp_before_admin_bar_render', 'wp_admin_bar_new_item'); 
```

并解决我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:06:02.270

抱歉，不知道哪个插件或代码可以解决您的问题。但这里有一些资源：

*   [http://codex.wordpress.org/Roles_and_Capabilities#Resources](http://codex.wordpress.org/Roles_and_Capabilities#Resources)
*   [http://wordpress.org/extend/plugins/tags/capability](http://wordpress.org/extend/plugins/tags/capability)

# jquery - 超大的 jQuery 插件 - 只显示一些背景图片

> ID：11574307
> 
> 赞同：0
> 
> 时间：2012-07-20T06:55:24.817
> 
> 标签：jquery, html-lists, supersized

我的所有背景图像都会加载，直到我尝试为每张幻灯片添加图像叠加层。当我标记我的 ul 时出现问题`id="supersized"`

执行此操作后，仅加载幻灯片 1、2 和 9 上的背景图像。3-8 只显示背景颜色和叠加图像。

我已经查明了萤火虫的问题，但不知道如何解决

```
<ul id="supersized" class="quality" style="visibility: visible;">
<li class="activeslide">
<div class="overlay-holder">
<div class="img">
<img src="../../images/homeimg.png" style="width: 1024px; left: 0px; top: -187px;">
</div>
</div>
<a target="_blank">
<img src="http://schochink.com/IMG_21562.jpg" style="width: 1024px; left: 0px; top: -188.5px; height: 686.08px;">
</a>
</li>
<li class="activeslide">
<div class="overlay-holder">
<div class="img">
<img src="../../images/aboutimg.png" style="width: 1024px; left: 0px; top: -101.5px;">
</div>
</div>
<a target="_blank">
<img src="http://schochink.com/IMG_26922.jpg" style="width: 1024px; left: 0px; top: -    188.5px; height: 686.08px;">
</a>
</li>
<li class="activeslide">
<div class="overlay-holder">
<div class="img">
<img src="../../images/homeimg.png" style="width: 1024px; left: 0px; top: -187px;">
</div>
</div>
</li> 
```

这是我的实际html，上面是萤火虫给我看的

```
<ul id="supersized">
  <li class="">
    <div class="overlay-holder">
        <div class="img">
        <img src="../../images/homeimg.png" />
        </div>
    </div>
  </li>

  <li class="">
    <div class="overlay-holder">
        <div class="img">
        <img src="../../images/aboutimg.png" />
         </div>
     </div>

  </li>
  <li class="">
    <div class="overlay-holder">
        <div class="img">
            <img src="../../images/Untitled-2.png" />
        </div>
    </div>
  </li>

  <li class="">
    <div class="overlay-holder">
        <div class="img">
        <img src="../../images/homeimg.png" />
        </div>
    </div>

  </li>
  <li class="">
  <div class="overlay-holder">
        <div class="img">
        <img src="../../images/homeimg.png" />
    </div>
  </div>

  </li>
  <li class="">
  <div class="overlay-holder">
        <div class="img">
        <img src="../../images/homeimg.png" />
    </div>
  </div>

  </li>
  <li class="">
  <div class="overlay-holder">
        <div class="img">
        <img src="../../images/homeimg.png" />
    </div>
  </div>

  </li>
  <li class="">
  <div class="overlay-holder">
        <div class="img">
        <img src="../../images/homeimg.png" />
    </div>
  </div>

  </li>
  <li class="">
  <div class="overlay-holder">
        <div class="img">
        <img src="../../images/homeimg.png" />

        </div>
  </div>
  </li>
</ul> 
```

我对 jquery 很陌生，但我认为这是添加锚标记的原因。如我错了请纠正我

```
/* Place Supersized Elements
----------------------------*/
$(document).ready(function() {
    $('body').append('<div id="supersized-loader"></div><ul id="supersized"> </ul>');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:44:44.573

您的 div 未关闭，这可能会导致问题。

更新：首先在页面上你有两个具有相同 ID 的元素：“超大”。你看到这个了吗？加载后检查元素以查看它。此外，您的 .png-s 已正确加载，但是 homeimg.png 具有透明背景，这就是您看到背景颜色的原因。

# castle-windsor - NServiceBus 与温莎城堡及其生活方式

> ID：11574309
> 
> 赞同：0
> 
> 时间：2012-07-20T06:55:40.270
> 
> 标签：castle-windsor, nservicebus

我们目前在 WAS 环境中运行 WCF 服务，并使用 App_Code\InitializeService.AppInitialize() 在同一主机中托管 NServiceBus

一切正常，直到我们想在我们的消息处理程序中使用我们的容器，并注册为 PerWcfOperation。这些注册超出了总线的范围，这是合乎逻辑的。

我们现在正在寻找一种方法

1.  对 WCF 服务和 NServiceBus 使用相同的容器
2.  克隆或部分重用我们在 NServiceBus 的 WCF 服务中拥有的容器

有任何想法吗？

# apache2 - PHP 堆栈跟踪，PHP 1\. {main}()，PHP 2\. apache 的 error_log.php 中的 include() 错误

> ID：11574311
> 
> 赞同：0
> 
> 时间：2012-07-20T06:55:44.883
> 
> 标签：apache2, cakephp-1.3

我有一个用 cakephp 实现的登录页面。它工作正常，但在我们实施 SSL 之前几天，它在服务器上工作正常，但我无法登录我的本地系统。此外，它没有抛出任何错误，但是当我查看 apache 错误日志文件时，它抛出了以下错误->

```
[Fri Jul 20 11:55:10 2012] [error] [client ::1] PHP Deprecated: 
Assigning the return value of new by reference is deprecated in
/Backup/www/Web/SourceCode/instantmeeting/cake/libs/cache.php on line 155,
referer: /Web/SourceCode/instantmeeting/enterprise/web_user/login

[Fri Jul 20 11:55:10 2012] [error] [client ::1] PHP Stack trace:,
referer: /Web/SourceCode/instantmeeting/enterprise/web_user/login

[Fri Jul 20 11:55:10 2012] [error] [client ::1] PHP   1\. {main}()
/Backup/www/Web/SourceCode/instantmeeting/app/webroot/index.php:0,
referer: /Web/SourceCode/instantmeeting/enterprise/web_user/login

[Fri Jul 20 11:55:10 2012] [error] [client ::1] PHP   2\. include()
/Backup/www/Web/SourceCode/instantmeeting/app/webroot/index.php:81,
referer: /Web/SourceCode/instantmeeting/enterprise/web_user/login 
```

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T09:59:53.453

这是一个 PHP5 已弃用的错误。

发生这种情况是因为您可能试图通过值而不是引用传递对象。这在 PHP4 中曾经是可能的，但现在已被弃用，因为 PHP5 遵循更严格的 OOP 原则。

> 在大多数编程语言中，对象可以通过引用而不是值传递给函数或其他对象。换句话说，不是传递具有相同值的新对象，而是传递实际对象，这意味着更改被保留。

我建议有类似的东西（这只是一个示例）：在 PHP4 中，此代码将输出 Jason，因为您基本上会传递 $var 的副本：

```
class Man{
    var $Name;
}
function aaaa($Man){
    $Man->Name = 'Boby';
}
$var = new Man();
$var->Name = 'Jason';
aaa($var); // Passing an Object **by value**
echo $var->Name; // Will output Jason 
```

因此，您必须通过引用以下`aaa()`函数手动传递它：

```
aaa(&$var);
echo $var->Name; // Will output Boby 
```

**这将在没有 PHP5 中的引用的情况下工作！** 您在服务器上的 PHP 版本是什么？您应该升级并查看第 155 行的内容`/Backup/www/Web/SourceCode/instantmeeting/cake/libs/cache.php`

# c# - Array.Contains 忽略非间距组合字符，例如变音符号

> ID：11574313
> 
> 赞同：0
> 
> 时间：2012-07-20T06:55:45.757
> 
> 标签：c#

```
string[] myArray= { "replay", "answer" };
if (myArray.Contains("rểplay")) {
//...
} 
```

此函数将返回 false，因为它尝试检查变音符号“rểplay”而不是“replay”。如何忽略非间距组合字符，例如变音符号并返回 true？

反之亦然，如下所示？

```
string[] myArray= { "rểplay", "answer" };
if (myArray.Contains("replay")) {
//...
} 
```

以及如何在此功能中应用？

```
var ix = Array.FindIndex(myKeys, p => p.Equals(wordIn, StringComparison.CurrentCultureIgnoreCase));
wordOut = myKeys[ix];
return true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:04:34.503

我宁愿规范化搜索字符串并在数组中搜索。

```
using System.Globalization;

string input = "rểplay";
string decomposed = input.Normalize(NormalizationForm.FormD);
char[] filtered = decomposed
    .Where(c => char.GetUnicodeCategory(c) != UnicodeCategory.NonSpacingMark)
    .ToArray();
string newString = new String(filtered);

string[] myArray= { "replay", "answer" };
if (myArray.Contains(newString)) {
//...
} 
```

# asp.net - ASP .NET 页面请求大小

> ID：11574319
> 
> 赞同：1
> 
> 时间：2012-07-20T06:55:55.767
> 
> 标签：asp.net, size, request

我有一个在 IIS 7/Win2K8 标准上运行的 ASP .Net Web 应用程序。

我需要帮助：

当用户在客户端（浏览器）发出请求时，我想在请求对象到达后立即检查服务器上的请求对象（用于记录目的）。

特别是我想记录，至少：

1.  请求的时间。
2.  请求的 IP 地址。
3.  请求的大小（以字节为单位）。

同样，我想记录为同一请求呈现的响应的大小。

该请求可以是整个页面请求或部分更新（更新面板）请求。

非常有义务提供任何帮助。

感谢期待。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:02:10.093

处理 Global.asax 文件中的 Application_BeginRequest 事件。像这样的东西：

```
public void Application_BeginRequest(Object sender, EventArgs e) {
     yourLogger.Log(String.Format("Request Time: {0}, Request IP: {1}, Request Size: {2}",
                                  Date.Now.Time,
                                  Request.UserHostAddress,
                                  Request.TotalBytes)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:11:12.647

除了@just.another.programmer 的答案，我想推荐另一种方法

如果您想完全确定**即使发生未处理的异常**也会实际记录每个请求和响应，那么您应该考虑使用：[LogRequest](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.logrequest.aspx)事件或[PostLogRequest](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.postlogrequest.aspx)

来自 MSDN

> 在 ASP.NET 为当前请求执行任何日志记录之前发生。
> 
> 即使发生错误，也会引发 LogRequest 事件。您可以为 LogRequest 事件提供事件处理程序，以便为请求提供自定义日志记录。

要使用此事件，您的应用程序必须在 IIS 7.0 和 .NET Framework 3.0 或更高版本中以集成模式运行。

这些事件在请求生命周期结束时发生：

参考：

*   [IIS 5 和 6 中的应用程序生命周期](http://msdn.microsoft.com/en-us/library/ms178473.aspx)

*   [IIS 7 中的应用程序生命周期](http://msdn.microsoft.com/en-us/library/bb470252.aspx)

# c# - 找不到路径“C:\”的一部分

> ID：11574320
> 
> 赞同：4
> 
> 时间：2012-07-20T06:55:59.023
> 
> 标签：c#, directory

我收到这个错误。即使我已经创建了一个文件夹“CMSExportedData”，但找不到路径“C:\CMSExportedData\Sales-20\07\2012.txt”的一部分。

请帮忙

```
using (FileStream fs = new FileStream("C:\\CMSExportedData\\Sales-" + DateTime.Now.ToString("dd/MM/yyyy") + ".txt", FileMode.Create))
{
    using (StreamWriter sw = new StreamWriter(fs, Encoding.Default))
    {
        //use stream
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T06:59:25.580

您将日期格式化为文件名的一部分，日期分隔符为斜杠，路径逻辑将其转换为反斜杠（路径分隔符）：

> 'C:\CMSExportedData\Sales-20\07\2012.txt'。

没有 Sales-20 文件夹，也没有 07 文件夹。

解决方案：不要在文件名中使用路径分隔符:)。此解决方案还将日期格式化为年-月-日，因为这会使文件名按时间顺序排序：

```
"C:\\CMSExportedData\\Sales-" + DateTime.Now.ToString("yyyyMMdd") + ".txt" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T07:01:06.577

文件名不能包含以下任何字符：

```
\ / : * ? " < > | 
```

显然您的日期格式使用`'/'`的是不允许的。建议可以使用“-”作为分隔符，这样您的文件将是：

```
C:\CMSExportedData\Sales-20-07-2012.txt 
```

为完整起见，可接受的非字母数字字符为：

```
 ^   Accent circumflex (caret)
   &   Ampersand
   '   Apostrophe (single quotation mark)
   @   At sign
   {   Brace left
   }   Brace right
   [   Bracket opening
   ]   Bracket closing
   ,   Comma
   $   Dollar sign
   =   Equal sign
   !   Exclamation point
   -   Hyphen
   #   Number sign
   (   Parenthesis opening
   )   Parenthesis closing
   %   Percent
   .   Period
   +   Plus
   ~   Tilde
   _   Underscore 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:01:49.710

问题是您在文件名中添加了一个带有斜杠的日期！

Windows 文件系统中的每个斜线分隔一个目录。因此，使用您的代码，它将在 Sales-20 文件夹中查找，然后是 07 文件夹，并在该文件夹中尝试查找 2012.txt。

最佳做法是永远不要在文件名中使用斜杠（甚至不要认为您可以在 Windows 中手动使用），因此用“-”符号替换它们或完全删除任何这些字符。

# azure - 如何更改 Azure 网站的区域

> ID：11574329
> 
> 赞同：9
> 
> 时间：2012-07-20T06:56:38.967
> 
> 标签：azure, web

我第一次错误地选择了美国东部地区。但我需要欧盟地区。我尝试删除该网站并创建一个新网站。但从现在开始，我只能选择美国东部（这是地区列表中的唯一项目）。

如何更改新网站的区域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:11:00.643

当 Azure 网站处于预览模式时，新网站的创建将路由到容量可用的位置。由于 Microsoft 能够查看使用数据和需求，您应该会看到其他数据中心开放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T09:25:15.657

正如我在上面的评论中提到的，我也有这个问题，但不相信接受的答案。

我手动更改了表单提供给我想要的区域的下拉值的值：

在地区的下拉菜单中，我只能选择美国东部。我使用萤火虫（或等效浏览器）将选择选项的值编辑为“美国西部”并提交了表单。该网站已部署到我想要的区域。

注意：Azure 站点当前处于预览阶段，因此可能并非在所有区域都受支持

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T00:18:06.473

不确定您是否知道，但现在您应该能够在许多不同的地区创建网站。Azure 门户不再将您锁定在一个区域。

# android - MapView 中的 NullPointerException

> ID：11574331
> 
> 赞同：1
> 
> 时间：2012-07-20T06:56:44.130
> 
> 标签：android, listview, nullpointerexception, android-mapview

当我按下按钮`ListView`活动返回到时`MapViewActivity`，我收到以下错误。

我真的不知道出了什么问题，因为它没有显示错误在我的代码中的位置。

任何建议将不胜感激！

```
07-20 15:49:51.558: E/AndroidRuntime(2794): FATAL EXCEPTION: main
07-20 15:49:51.558: E/AndroidRuntime(2794): java.lang.NullPointerException
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.SurfaceView.updateWindow(SurfaceView.java:497)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.SurfaceView.updateWindow(SurfaceView.java:408)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.SurfaceView.dispatchDraw(SurfaceView.java:352)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.View.draw(View.java:6936)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.View.draw(View.java:6936)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1926)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewRoot.draw(ViewRoot.java:1527)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1263)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.os.Looper.loop(Looper.java:130)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at android.app.ActivityThread.main(ActivityThread.java:3687)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at java.lang.reflect.Method.invokeNative(Native Method)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at java.lang.reflect.Method.invoke(Method.java:507)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
07-20 15:49:51.558: E/AndroidRuntime(2794):     at dalvik.system.NativeStart.main(Native Method) 
```

# ant - 使用 ant 压缩文件夹

> ID：11574337
> 
> 赞同：0
> 
> 时间：2012-07-20T06:57:30.320
> 
> 标签：ant

我希望按原样压缩此文件夹结构-

![在此处输入图像描述](../Images/713a382b5794aa6fcbd392d4879930de.png)

现在我正在做这些步骤-

1.  将文件夹以外的文件移动到“临时”文件夹。

2.  将 Folder1 移动到“Temp”文件夹。

3.  压缩温度

4.  删除“临时文件夹”。

这是正确的方法还是有任何简单/更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:40:02.613

压缩文件之前无需移动文件。

```
<zip destfile="test.zip" basedir="src_dir" includes="**/*"/> 
```

如果您要做出比 更具挑战性的选择`**/*`，例如选择性地包含和排除特定文件，那么您可以在 zip 元素中使用一个或多个文件集（或 zipfilesets）来实现。

这是 dir 结构，包括 build.xml：

```
$ find .
.
./build.xml
./src_dir
./src_dir/Document.txt
./src_dir/Document2.txt
./src_dir/Document3.xml
./src_dir/Folder1 
```

这是创建的 zip 文件：

```
$ jar tvf test.zip
     0 Fri Jul 20 08:36:06 GMT 2012 Folder1/
     0 Fri Jul 20 08:36:26 GMT 2012 Document.txt
     0 Fri Jul 20 08:36:12 GMT 2012 Document2.txt
     0 Fri Jul 20 08:36:18 GMT 2012 Document3.xml 
```

# c# - 用泛型继承和接口定义类

> ID：11574338
> 
> 赞同：2
> 
> 时间：2012-07-20T06:57:33.457
> 
> 标签：c#, generics

我正在尝试创建一个派生自 ObservableCollection 的类，并将其自身限制为仅与特定的基类（BaseMetadata）一起使用。它还需要实现 IXmlSerializable 接口，因为我正在向集合添加持久性功能。

这是集合的类定义...

```
public class CollectionMetadata<T> : ObservableCollection<T> where T : BaseMetadata,
                                     IXmlSerializable
{
    XmlSchema IXmlSerializable.GetSchema()
    {
        return null;
    }

    public void ReadXml(XmlReader reader)
    {
    }

    public void WriteXml(XmlWriter writer)
    {
    }
} 
```

... BaseMetadata 可以简化为空类，但仍会产生错误...

```
public class BaseMetadata
{
} 
```

...我收到以下错误....

```
CollectionMetadata<T>.IXmlSerializable.GetSchema()': 
    containing type does not implementinterface 
    'System.Xml.Serialization.IXmlSerializable' 
```

...在上述代码的以下行...

```
XmlSchema IXmlSerializable.GetSchema() 
```

我一定错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:02:16.373

在当前的形式中，您将 ;`IXmlSerializable`作为约束应用到`T`; 不将其声明为`CollectionMetadata<T>`. 所以你的显式接口实现在呻吟，因为它找不到接口。

您只需要将`IXmlSerializable`界面移动到约束*之前：*

```
public class CollectionMetadata<T> : ObservableCollection<T>, IXmlSerializable
                                     where T : BaseMetadata 
```

作为旁注 - 您为此使用显式接口实现可能是一件非常好的事情，否则这可能会在以后成为一个真正的难题。因为作为公共方法，编译器此时不会抱怨，但如果您尝试将集合传递为`IXmlSerializable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:02:31.807

你说的是`T`实现了`IXmlSerializable`接口。据推测，您*实际上*的意思是说`ColelctionMetadata<T>`实现了它：

```
public class CollectionMetadata<T> : ObservableCollection<T>, IXmlSerializable
      where T : BaseMetadata 
```

因为它`ReadXml`并`WriteXml`没有作为一个问题出现，因为即使没有接口，它们也只是看起来像常规方法。但是，编译器不会让您使用“显式接口实现”，除非您确实实现了这些方法，并且`XmlSchema IXmlSerializable.GetSchema()`是显式接口实现。

# algorithm - 运营商之谜

> ID：11574339
> 
> 赞同：3
> 
> 时间：2012-07-20T06:57:36.743
> 
> 标签：algorithm, programming-languages, comparison, operators, imperative-programming

在将项目从 Python 转换为 C# 时，我发现语法系列中有一些有趣的差异。然而我被卡住了，仍然无法理解和理解C#中**比较运算符的不同行为。**

在消除这种好奇心的过程中，我考虑了一些 C 语法家族的语言；C、C++、C#、Java、Javascript.. 并验证了行为。它是这样发生的：

```
Let a=2, b=3, c=4, d=5; 
```

现在，考虑以下表达式：

```
a < a < a  // returns true
c < b < a  // returns true
c > b > a  // returns false
a < c > b  // returns false 
```

如果是由于[right-associativity](http://en.wikipedia.org/wiki/Operator_associativity)，那么 JavaScript 中的以下代码不应该像这样：

```
console.info(a < false);   // returns false
console.info(a < a);       // returns false
console.info(a < a < a);   // returns true, as opposed to returning false 
```

这是 C/C++ 版本

```
int main(){
    int a=2, b=3, c=4, d=5;

    printf("%s\n","false\0true"+6*(a < a < a));  // returns true
    printf("%s\n","false\0true"+6*(c < b < a));  // returns true
    printf("%s\n","false\0true"+6*(c > b > a));  // returns false
    printf("%s\n","false\0true"+6*(a < c > b));  // returns false

  return 0;
} 
```

除了在 Python 中，其中

```
a < a < a  // returns false
c < b < a  // returns false
c > b > a  // returns true
a < c > b  // returns true 
```

谁能解释为什么 C 系列语言和 Python 计算表达式的方式不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:02:41.793

因为[Python 对您的输入进行了轻微的解释](http://docs.python.org/reference/expressions.html#not-in)：

> 形式上，如果`a, b, c, ..., y, z`是表达式并且`op1, op2, ..., opN`是比较运算符，则`a op1 b op2 c ... y opN z`等价于`a op1 b and b op2 c and ... y opN z`，除了每个表达式最多计算一次。

这意味着您的行将被解释为

```
a < a < a = a < a and a < a // returns false
c < b < a = c < b and b < a // returns false
c > b > a = c > b and b > a // returns true
a < c > b = a < c and c > b // returns true 
```

在 C 风格的语言中，比较表达式将计算为`false`（整数值 0）或`true`（整数值 1）。所以在C中它会表现得像

```
a < a < a = (a < a) < a = 0 < a  // returns true
c < b < a = (c < b) < a = 0 < a  // returns true
c > b > a = (c > b) > a = 1 > a // returns false
a < c > b = (a < c) > b = 0 > b // returns false 
```

请注意，几乎所有语言都使用布尔返回值定义运算符，但由于布尔值可以隐式转换为零或一，上述命题仍然有效：

```
// C++ example
struct myComparableObject{
    int data;
    bool operator<(const myComparableObject& o){
       return data < o.data;
    }
};

myComparableObject a, b;
a.data = 2;
b.data = 3;
int c = 5;

a < b; // true
a < c; // error, a cannot be converted to int / unknown operator
a.data < c; // true
a < b < c; // true, as this is equal to
           //   (a < b) < c = false < c = 0 < c 
```

例如，JavaScript 实际上会使用`ToNumber`来比较两个非字符串对象，请参阅 [ [ECMAScript p78](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf) , 11.8.5 The Abstract Relational Comparison Algorithm]，其中`ToNumber(false)`0 和`ToNumber(true) === 1`.

> 比较`x < y`, where`x`和`y`are values, 产生`true`, `false`, 或`undefined`[...]
> 
> *   令 px 为调用 ToPrimitive(x, hint Number) 的结果。
> *   设 py 为调用 ToPrimitive(y, hint Number) 的结果。
>     
>     
>     1.  如果 Type(px) 不是 String 且 Type(py) 不是 String 的情况，则
>         
>         `a.`令 nx 为调用 ToNumber(px) 的结果。因为 px 和 py 是原始值，所以评估顺序并不重要。
>         `b.`令 ny 为调用 ToNumber(py) 的结果。
>         `c.`如果 nx 为 NaN，则返回 undefined。
>         `d.`如果 ny 为 NaN，则返回 undefined。
>         `e.`如果 nx 和 ny 是相同的 Number 值，则返回 false。
>         `f.`如果 nx 为 +0 且 ny 为 -0，则返回 false。
>         `g.`如果 nx 为 -0 且 ny 为 +0，则返回 false。
>         `h.`如果 nx 为 +infty，则返回 false。
>         `i.`如果 ny 为 +infty，则返回 true。
>         `j.`如果 ny 是 -infty，则返回 false。
>         `k.`如果 nx 是 -infty，则返回 true。
>         `l.`如果 nx 的数学值小于 ny 的数学值——<em>请注意，这些数学值都是有限的，而不是都是零——返回真。否则，返回假。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:04:03.837

这是因为`a < a < a`被评估为`((a < a) < a)`which then 成为`0 < a`true (当 a >= 0 时)

如果您运行以下命令，第一个表达式将更改为 false。

```
int main(){
    int a=0, b=3, c=4, d=5;

    printf("%s\n","false\0true"+6*(a < a < a));  // returns false
    printf("%s\n","false\0true"+6*(c < b < a));  // returns true
    printf("%s\n","false\0true"+6*(c > b > a));  // returns false
    printf("%s\n","false\0true"+6*(a < c > b));  // returns false

  return 0;
} 
```

而在 Python 中，`a < a < a`变成`a < a and a < a`. 所以它不是比较`a < a`. 如果您在语句中添加括号，您将再次获得类似 C 的行为。

```
(a < a) < a  ## returns true
(c < b) < a  ## returns true
(c > b) > a  ## returns false
(a < c) > b  ## returns false 
```

# java - 沿直线移动对象

> ID：11574341
> 
> 赞同：1
> 
> 时间：2012-07-20T06:57:45.203
> 
> 标签：java, android, math, path, line

我正在尝试沿直线路径移动 Sprite。我想在斜坡上移动 5 个像素，或者每次我通过该方法时的斜边，直到我到达终点。

我有直线的斜率和 y 截距，我还通过 getX() 和 getY() 获得了精灵的当前 X 和 Y 值。最后要停止的 X 和 Y 点是变量 finalX 和 finalY。

我已经尝试了很多方程式，但我似乎无法让它们中的任何一个起作用。我错过了什么！！？

![希望这张图片对我想做的事情有意义！](../Images/b0f086eb9853fd065a7dd73ec0a19211.png)

我最新的方程式试图使用 y=mx+b。

```
float X = (getY() + 5 - interceptY)/slope;
float Y = slope*(getX() + 5) + interceptY;
setPosition(X, Y); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:02:30.343

可以帮助您解决我最近的游戏中的一些方程式，代码在给定旋转的情况下移动对象：

```
float xDirection = FloatMath.sin((float) Math.toRadians(getRotation()))
            * currentSpeed;
float yDirection = FloatMath.cos((float) Math.toRadians(getRotation()))
            * -currentSpeed;

float newX = getX() + xDirection;
float newY = getY() + yDirection; 
```

你只需要导出你需要你的精灵移动的角度，这将为你做。希望这可以帮助。

# multithreading - Silverlight 中的无效跨线程访问

> ID：11574347
> 
> 赞同：0
> 
> 时间：2012-07-20T06:58:26.430
> 
> 标签：multithreading, visual-studio-2010, silverlight, drawing, line

我正在silverlight 3.0 中申请。在那个应用程序中，我有一个公共方法作为

```
public void DrawWavform()
{
     Line[,] line = new Line[10,200];
     line[i,j]= new Line();//i am getting error here of invalid thread access
    //some operation

} 
```

在应用程序中，我根据用户输入创建不同的线程，并从新创建的线程调用 DrawWaveform 方法。我想并行操作。请建议我解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T07:08:59.650

任何更改 GUI 的操作都必须在 UI 线程上执行。这可以使用[调度](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.dispatcher%28v=vs.95%29.aspx)程序完成：

```
Deployment.Current.Dispatcher.BeginInvoke( () =>
{
  // update ui
}); 
```

或者

```
(SomeDependencyObject).Dispatcher.BeginInvoke( () => { /* ... */ } ); 
```

无论如何，这段代码应该很少使用，并且只包含与 UI 相关的代码。在 UI 线程上执行昂贵的操作将导致您的应用程序挂起。

# iphone - iOS 在 UITableView 中自定义滚动条

> ID：11574352
> 
> 赞同：2
> 
> 时间：2012-07-20T06:58:46.847
> 
> 标签：iphone, ios, uitableview, scrollbar, customization

在 iPhone 中，我将使用图像自定义 UITableView 的滚动条。但是我没有找到正确的方法。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-07T11:49:14.247

首先，您必须在 Interface Builder 中取消选中 showVerticalIndicatir 和 showHorizo​​ntallIndicatir。

然后在 ViewDidLoad 方法中添加：

```
 [super viewDidLoad];
    self.scrollViewBarImgView = [[UIImageView alloc] init];
    UIImage *imgBar = [UIImage imageNamed:@"scroller.png"];
    [self.scrollViewBarImgView setImage:imgBar];
    CGRect frame = scrollViewBarImgView.frame;
    frame.size.width = 8;
    frame.size.height = 60;
    frame.origin.x = 312;
    frame.origin.y = 0;
    [self.scrollViewBarImgView setFrame:frame];

[self.tableView addSubview:scrollViewBarImgView]; 
```

然后在 - (void)scrollViewDidScroll 方法中：

```
CGPoint offset = scrollView.contentOffset;
CGRect frame = self.scrollViewBarImgView.frame
float fact = (cellHeight*numberOfRow+ indicatorBarHeight) / tableViewHeight;
frame.origin.y = offset.y + (offset.y/fact);
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.1];
[self.scrollViewBarImgView setFrame:frame];
[UIView commitAnimations]; 
```

# titanium - 使用 Titanium 的 Android 代码

> ID：11574358
> 
> 赞同：2
> 
> 时间：2012-07-20T06:58:59.507
> 
> 标签：titanium, titanium-mobile

我如何访问由 Titanium 作为 Titanium 开发结果创建的 Android Java 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:34:45.483

您没有这种可能性，因为 Titanium 中的所有 JavaScript 代码都由 JavaScript 引擎在内部解释并`.class`生成文件。

请点击[此](http://titaniumninja.com/post/10559549700/fastdev-for-ios-how-it-works/)链接以获取进一步说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T02:16:35.447

如果您指的是您的javascript代码的解释，那么您不能。一切都变成了供 Titanium 解释的符号，但你可以在 /build 文件夹中找到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-26T10:57:56.993

Titanium 使用 javascript 代码，Modules 让你用平台的原生语言（Java for Android）编写代码，Titanium 可以在 [模块](http://docs.appcelerator.com/platform/latest/#!/guide/Android_Module_Development_Guide)中使用 java 原生代码和在 v8 中运行 java 代码。</p>

# linux - 在 linux 控制台中捕获关键事件

> ID：11574365
> 
> 赞同：1
> 
> 时间：2012-07-20T06:59:25.097
> 
> 标签：linux, console, keyboard-events

我有一个问题，这与我之前的许多其他问题相似，但在某种程度上不同，这使得它变得更加困难。:)

我正在为 Linux 控制台编写一个文本编辑器。没有运行 X11，所以忘记任何工具包。我想捕获按键按下和按键向上事件，因为我希望能够通过按住 shift 并使用箭头键来标记文本部分（就像您在基于 X 或基于 Windows 的编辑器中所做的那样）。

我之前设法编写了一个使用原始模式访问键扫描码的应用程序，但它无法同时检测 shift 键和箭头键。

有没有人有一个示例代码能够检测任何组合键（或至少所有与 shift、ctrl 和 alt 的组合）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:43:48.267

[使用ncurses](http://invisible-island.net/ncurses/)怎么样，它可以为你做这一切？它还可以帮助您确定如何为您连接的特定终端类型设置文本格式等。

使用 python 绑定提供的[getkey()](http://docs.python.org/library/curses.html#curses.window.getkey)函数，我能够找出不同键的修饰符。我还发现对于 Shift+Arrow 键，有一个单独的键代码，缩写为`KEY_SR`,`KEY_SF`用于 up 和 down 和`KEY_SLEFT`and `KEY_SRIGHT`。

```
import curses
import curses.textpad
import curses.ascii

def decodeSuffix(i):
    return {
        0b110: ( True,  True,   False),
        0b100: ( True, False,    True),
        0b111: (False,  True,    True),
        0b101: (False,  True,   False),
        0b011: (False, False,    True),
    }[i]

def test(stdscr):
    while True:
        k = stdscr.getkey()
        if k == "\n":
            return
        elif k[0] == "k" and len(k) > 1:
            i = int(k[-1])
            shift, ctrl, alt = decodeSuffix(i)
            s = ""
            if shift:
                s += "shift "
            if ctrl:
                s += "ctrl "
            if alt:
                s += "alt "
            s += k[1:-1]
            stdscr.addstr("{0:40s} {1:08b}\n".format(s, i))
        else:
            stdscr.addstr("{0}\n".format(k))
            pass

curses.wrapper(test) 
```

你可以玩弄那个。查看[getkey() 的源码](http://hg.python.org/releasing/3.2.3/file/86d1421a552c/Modules/_cursesmodule.c#l873)，我们发现它基本上是`getch`和`keyname`curses 函数的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T13:41:15.627

我已经成功地完成了我打算做的事情。唯一的问题是它需要我直接连接到键盘驱动程序。现在我不知道没有root权限怎么做，所以我的编辑器需要root。这可能很尴尬。

总之，我打开 /dev/input/event? 流，在哪里？是键盘驱动程序的编号（通常为 0）并从那里捕获按键。这实际上只对检查键的状态有用（通过从向下和向上按下事件构建键状态），因为事件是从所有应用程序传递的（这毕竟是键盘驱动程序）。

最好从更传统的来源获取所有其他按键，并仅使用 CTRL、SHIFT 等的键盘驱动程序。

如果我让它一起工作，我稍后会发布代码。:)

# php - 杀死 ssh 上的特定进程超过一分钟

> ID：11574367
> 
> 赞同：0
> 
> 时间：2012-07-20T06:59:29.687
> 
> 标签：php, shell, ssh

我有一些shell脚本如下，

我只想运行这个过程 1 分钟。

所以我想检查进程时间并在进程运行> 1分钟时终止进程。任何人都可以帮助我吗？

```
var=`ps -eaf | pgrep -f getShippingPriceUK.php | wc -l`
if [ $var -lt "1" ]; then
echo "Prozess läuft nicht"
wget -q --timeout=0 --delete-after http://xxxx/001_yakodo/getShippingPrice12.php > /dev/null 2&>1 &
else
echo "Prozess läuft"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:32:25.367

如果你安装了 perl，你可以使用这个 perl 脚本。

将其另存为`timeout`，将其存储在 中的目录之一中`$PATH`，使其可执行，然后替换所有调用

```
your-script arg1... 
```

和

```
timeout 1m your-script arg1... 
```

* * *

```
#!/usr/bin/perl

use warnings;
use strict;

$SIG{CHLD} = sub { wait; exit };

my $timeout = shift;
for ($timeout) {
    if (defined and /^(\d+)([smh])$/) {
    $_ = $1 * ("s" eq $2 ? 1 : "m" eq $2 ? 60 : 3600);
    } elsif (!defined or /\D/) {
    die "First argument must be time to wait.\n";
    }
}

my @command = @ARGV or die "Must give a command to run.\n";

my $child = fork;
for ($child) {
    die "$0: Cannot fork: $!\n" unless defined;
    last if $child;
    exec {$command[0]} @command or die "$0: Cannot exec: $!\n";
}

close STDIN;
close STDOUT;
close STDERR;
sleep $timeout;
kill TERM => $child;
sleep 5;
kill KILL => $child; 
```

# ios - IOS5 Facebook 集成 - 不调用 fbDidLogin

> ID：11574370
> 
> 赞同：0
> 
> 时间：2012-07-20T06:59:46.467
> 
> 标签：ios, facebook, ios5

我花了几天时间通过一个应用程序在 Facebook 上发布一个简单的帖子。我使用了本[教程](http://gabriel-tips.blogspot.com/2011/10/how-to-post-on-facebook-wall-through.html)，发现没有调用 fbDidLogin。当我一直在寻找解决方案时，我发现[这](https://stackoverflow.com/questions/4244609/fbdidlogin-not-called)是一种调用 fbDidLogin 的方法。

启发我了解我可能会错过什么。

这里附上我的`app delegate`.

应用委托.m

```
@synthesize window = _window;
@synthesize wallSnapVC = _wallSnapVC;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    self.wallSnapVC = [self.window.rootViewController.storyboard instantiateViewControllerWithIdentifier:@"wallSnapViewController"];
    self.window.rootViewController = self.wallSnapVC;
    [self.window makeKeyAndVisible];

    return YES;
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url
{
    return [[_wallSnapVC facebook] handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    return [[_wallSnapVC facebook] handleOpenURL:url];
} 
```

# google-maps-api-3 - google map api中infowindow的鼠标事件

> ID：11574372
> 
> 赞同：1
> 
> 时间：2012-07-20T06:59:50.077
> 
> 标签：google-maps-api-3

google map api v3的信息窗口上是否有任何鼠标事件。像 closeclick 事件。实际上我在 3 秒后关闭了信息窗口。但我希望如果鼠标指针在信息窗口上，那么它不应该关闭请给我一个例子来做这件事。非常感谢。

我的代码编写如下---

```
function generateMarkers(locations, is_paid) 
    { var marker; for (var i = 0; i < locations.length; i++)
     {
                var marker;
                for (var i = 0; i < locations.length; i++) {

                    createMarker(new google.maps.LatLng(locations[i][0], locations[i][1]), locations[i][2], locations[i][3], locations[i][4], is_paid);
                }
            }

            function createMarker(pos, name, town, image, is_paid) {
                var infowindow;

                var marker = new google.maps.Marker({
                    position: pos,
                    map: map,  // google.maps.Map 
                    title: name,
                    icon: "images/red.png"

                });
                infowindow = new google.maps.InfoWindow
                ({
                    content: '<div id="dvContent" onmouseover="clearTime()" onmouseout="clearwindow()"><div style="color:black;float:left"><img src="' + image + '" width="50px" height="50px"/></div><div style="color:black;margin-left:60px">' + name + '<br>Address:' + town + '<br><a href="#" target="_blank" style="color:blue">www.somethingcupid.com</a></div></div>'

                });

                google.maps.event.addListener(marker, 'mouseover', function () {
                    if (is_paid != "True") {

                        document.getElementById("divPopup").style.display = "block";
                    }
                    else {

                        infowindow.open(map, marker);

                    }

                });

                google.maps.event.addListener(marker, 'mouseout', function () {
                    if (is_paid != "True") {

                        document.getElementById("divPopup").style.display = "block";
                    }
                    else {

                        t = setTimeout(function () { infowindow.close() }, 3000);

                    }

                });
}

                function clearTime() {
                    clearTimeout(t);
                }enter code here

                function clearwindow() {
                    setTimeout(function () { infowindow.close() }, 3000);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:12:54.377

唯一与鼠标活动相关的[InfoWindow 事件](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)`closeclick`是.

您可以做的是`<div>`在 InfoWindow 内容中使用 a 并使用其鼠标事件。（活动区域周围会有一个非活动边框。）

# c# - 使用 linq 返回对象的特定属性列表

> ID：11574376
> 
> 赞同：59
> 
> 时间：2012-07-20T06:59:55.673
> 
> 标签：c#, .net, linq, linq-query-syntax

给定这样的类：

```
public class Stock
{
    public Stock() {}
    public Guid StockID { get; set; }
    public string Description { get; set; }
} 
```

可以说我现在有一个`List<Stock>`. 如果我想检索所有 StockID 的列表并将其填充到 IEnumerable 或 IList 中。显然我可以做到这一点。

```
List<Stock> stockItems = new List<Stock>();
List<Guid> ids = new List<Guid>();

foreach (Stock itm in stockItems) 
{
    ids.Add(itm.StockID);
} 
```

但是有什么方法可以使用 Linq 来达到相同的结果吗？我认为`Distinct()`可能会这样做，但无法弄清楚如何达到预期的结果。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-07-20T07:02:04.110

```
var list = stockItems.Select(item => item.StockID).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T07:24:20.817

你也可以这样做：

```
ids = stockItems.ConvertAll<Guid>(o => o.StockID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T22:28:58.183

这样的事情怎么样？这可以简化吗？

```
List<TranCode> alltrans = new List<TranCode>();

foreach (var bh in obj1.obj2WithCollection.obj2Collection)
{
    alltrans.AddRange(bh.obj3WithCollection.Select(e => e.TransactionCode).ToList());
} 
```

# iphone - 在模拟器中查看应用程序

> ID：11574378
> 
> 赞同：0
> 
> 时间：2012-07-20T07:00:02.840
> 
> 标签：iphone, ios, xcode, ipad, simulator

我需要向客户展示我的应用程序，但不向他发送源代码。他目前没有任何 iDevice，但只有一个 Xcode 安装在他的主机上和 iPhone 模拟器。

所以我的问题是有一种“正常/官方”的方式我可以将应用程序二进制文件传递给他，以便他可以在他的模拟器上测试它吗？可能使用 xcode 归档？

请注意：我知道什么是临时分发，请不要建议这个，他没有设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:05:20.790

不。你不能给他ipa在模拟器中启动它。只有源代码。（如果他足够聪明，可以启动它，我想您猜想当您尝试向他解释有关配置文件和证书以及配对密钥的内容时，客户会有多困惑）...。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:05:59.120

我看到了您的问题-但是，如果这只是通过应用程序进行的一次小旅行而不是长时间的测试，那么我是否可以建议另一种解决方法：

为什么不使用像 TeamViewer 这样的屏幕共享应用程序，它有一个无需安装即可运行且非常轻松的版本。然后让他玩你电脑上运行的App？

很抱歉没有关于这个问题的答案，但这将是另一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:10:50.960

非常简单的解决方案：

如果他复制代码或分发可以让您终生解决的代码，请签订合同并收取罚款。

如果他没有设备，您也可以借给他一台安装了应用程序的设备。只做一部没有 sim 卡或 ipod 的 iphone

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:55:56.203

无法创建 ipa 文件并在模拟器上运行。我们只能使用 Xcode 运行模拟器。（意味着通过共享代码）。如果您不感兴趣，请他购买设备。

# xcode - 添加监视变量会使 xcode 崩溃

> ID：11574384
> 
> 赞同：2
> 
> 时间：2012-07-20T07:00:36.497
> 
> 标签：xcode

我正在尝试在调试区域中对我的变量添加监视。但是，每当我单击“添加表达式...”时，它都会使我的 xcode 崩溃。有没有其他方法可以添加手表。我正在使用 xcode 4.3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:06:53.693

尝试更改您的调试器：

1) 按 Cmd + Shift + ,

2）在右侧面板上选择“测试”

3) 点击 Debugger 并选择一个 LLDB，如果当前是一个 GDB，反之亦然

# javascript - 无法使用 jquery 更新 iframe 内容

> ID：11574388
> 
> 赞同：0
> 
> 时间：2012-07-20T07:00:54.377
> 
> 标签：javascript, jquery, dom, iframe

**iframe**被动态加载到函数内部的容器**div**中。

用**cc.text(content);** 我尝试更新#code 内容。

我在运行时检查更改的文本，它已更新但屏幕上的值保持不变。

我不是javascript专业人士，所以欢迎任何评论：

```
 function ShowEditor(content) {
        var url = "XmlEditor/Editor.htm";
        slHost.css('width', '0%');
        jobPlanContainer.css('display', 'block');
        frame = $('<iframe id="' + jobPlanIFrameID + '" src="' + url + '" class="frame" frameborder="0" />');
        frame.appendTo(jobPlanIFrameContainer);

        $(frame).load(function () {
            var ifr = frame[0];
            var doc = ifr.contentDocument || ifr.contentWindow.document;
            var jdoc = $(doc);
            var cc = jdoc.contents().find("#code");
            // var tst = cc.text();
            // alert(tst);
            cc.text(content);
        });
    } 
```

我得到注释代码中的文本，但无法更新#code 内容。

iframe 包含以下 html，我在其中省略了**head**和**script**中的详细信息：

```
<!doctype html>
<html>
    <head></head>
<body>
<form>
<textarea id="code" name="code">some texts</textarea>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:24:05.787

您的 XML 编辑器不会多次读取 textarea 中的内容。

一个简单的解决方案是在 javascript 中生成具有所需 textarea 内容的 iframe 内容，而不是加载它，然后尝试更改 textarea 内容。

事实上（取决于您的 XML 编辑器的能力），您可能可以直接在生成的文本区域中执行此操作，而不是使用整个 iframe 来执行此操作。

# c++ - snprintf 与 std::stringstream

> ID：11574391
> 
> 赞同：3
> 
> 时间：2012-07-20T07:01:07.200
> 
> 标签：c++, printf, stringstream, secure-coding

我正在努力消除`SECURITY CODING`我产品中的违规行为。我的代码有很多`sprintf`，覆盖工具建议我使用`snprintf`，但 C++ 也有`std::stringstream`。`std::stringstream`用它来代替是个好主意吗`snprintf`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T07:03:27.463

`std::stringstream`是类型安全的，使用运算符 <<，使用内部缓冲区，C++ 的一部分，不如`sprintf`.
`sprintf`不是类型安全的，不使用 c++ 运算符，使用外部缓冲区，使用省略号，它只能用于从 C 继承的 POD 类型，速度很快。

# java - 如何为此方法编写单元测试用例？

> ID：11574392
> 
> 赞同：0
> 
> 时间：2012-07-20T07:01:08.713
> 
> 标签：java, junit

```
public String createUser() {

    Session session = HibernateUtility.getSession();
    Transaction tx = session.beginTransaction();

    session.save(this);
    tx.commit();
    session.close();

    return "accountCreated";

} 
```

如何为此方法编写单元测试用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:07:32.220

很难对包含对静态方法的调用的代码进行单元测试，例如`HibernateUtility.getSession()`.

您可能会考虑注入 Session 实例（可能通过向`createUser()`方法添加参数，或者通过为包含此方法的`Session Factory`对象提供可用于获取`Session`实例的对象）。然后，您可以使用 Mockito 或类似框架`Session`为该方法提供一个模拟对象，并验证对其进行的预期调用。

```
public String createUser(Session session) {
    Transaction tx = session.beginTransaction();

    session.save(this);
    tx.commit();
    session.close();

    return "accountCreated";
} 
```

使用 Mockito，单元测试可能如下所示：

```
public testCreateUser(){
    Session session = mock(Session.class);
    Transaction trans = mock(Transaction.class);

    when(session.beginTransaction()).thenReturn(trans);

    obj.createUser(session);

    verify(session).save(obj);
    verify(session).close();
    verify(trans).commit();
} 
```

# php - 坚持使用 PHP 正则表达式

> ID：11574395
> 
> 赞同：0
> 
> 时间：2012-07-20T07:01:17.153
> 
> 标签：php, regex

我有大字符串，我需要检查是否存在大于 3 的数字。
意味着“某些字符串 2”将无效，但“某些字符串 3”、“某些字符串 7”将是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:03:18.780

```
preg_match('/some\s*string\s*([3-9][0-9]*|[1-9][0-9]+)/i', $haystack); 
```

这里是工作[示例](http://regexr.com?31j96)

但是，在检查了您的用例之后，这似乎是在检查应用程序描述中的特定版本，我也建议您从字符串中获取数字并将其与实际数字进行比较以确保它更大或等于 3：

```
preg_match('/([0-9]+)/', $string, $matches);
if ($matches[1] >= 3) {
  // Do something
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T07:15:23.703

正则表达式用于文本匹配，而不是算术。适合工作的正确工具...

```
preg_match('/([0-9]+)/', $string, $matches);
if ($matches[1] >= 3) {
  // Do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:03:38.313

这不行吗？

```
$numberBiggerThanThree = preg_match('/([0-9]{2,}|[3-9])/', 'some long string 3'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T07:16:40.693

您匹配一个单词，后跟一个可选空格，然后是大于 2 的数字。多亏了小数位，您可以控制：

```
(\w*\s*(?:[1-9]\d+|[3-9])) 
```

一些小例子（[演示](http://codepad.viper-7.com/xvJRLu)）：

```
$subject = 'I have big string in that I need to check if number is present which is more than 3.
Means "some string2" will be invalid , but "some string 3","some string7" will be correct.';

$pattern = '(\w*\s*(?:[1-9]\d+|[3-9]))';

$r = preg_match_all($pattern, $subject, $matches);

var_dump($matches); 
```

输出：

```
array(1) {
  [0]=>
  array(3) {
    [0]=>
    string(6) "than 3"
    [1]=>
    string(8) "string 3"
    [2]=>
    string(7) "string7"
  }
} 
```

我希望这是有帮助的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T07:39:21.237

我修改了弗洛里安的解决方案：

```
[a-z]+\s?[a-z]+\s?([1-9][0-9]+|[3-9]) 
```

[http://regexr.com?31ja1](http://regexr.com?31ja1)

它适用于任何字符串，而不仅仅是“某些字符串”，它只允许 0 或 1 个空白字符。

# php - MySQL：监控查询

> ID：11574401
> 
> 赞同：0
> 
> 时间：2012-07-20T07:01:46.123
> 
> 标签：php, mysql, linux

我想了解一个 PHP - MySQL 项目。该项目非常复杂，因此逐行探索是不可能的。

我想做的是，比较 MySQL 数据库的实例。

说，

1) MySQL 已启动并正在运行。这是数据库的第一个实例。2) 用户从 PHP 前端登录，然后退出。3) 这是数据库的第二个实例。

我需要以友好的方式查看实例一和实例二之间的变化。

关于开源工具或任何其他技术的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:15:13.413

您可以使用 mysqldump 拍摄数据库快照，登录/注销，然后再次转储数据库，并使用 diff 或 winmerge 之类的工具来比较更改。

您还可以在 mysql 中打开完整的查询日志记录 - 这只是配置的一行 - [http://dev.mysql.com/doc/refman/5.1/en/query-log.html](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)

# ios - ios以离线模式存储URL图像（未连接到互联网）

> ID：11574403
> 
> 赞同：1
> 
> 时间：2012-07-20T07:01:57.717
> 
> 标签：ios, xcode, uiimage, uibutton, nsurlconnection

我正在从不同的 url 获取图像数组..图像加载完美..但是如果我需要在离线模式下显示图像..我找不到正确的方法来获取它。这是我的代码

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
NSString *arr = [NSArray arrayWithObjects:[NSURL URLWithString: 
                                        @"http://images.wikia.com/marvelmovies/images/5/5e/The-hulk-2003.jpg"],
              [NSURL URLWithString:@"http://cdn.gottabemobile.com/wp-content/uploads/2012/06/ios62.jpg"],
             [NSURL URLWithString:@"http://challenge.roadef.org/2012/img/google_logo.jpg"],
              [NSURL URLWithString:@"http://addyosmani.com/blog/wp-content/uploads/2012/03/Google-doodle-of-Richard-007.jpg"],
              [NSURL URLWithString:@"http://techcitement.com/admin/wp-content/uploads/2012/06/apple-vs-google_2.jpg"],
              [NSURL URLWithString:@"http://www.andymangels.com/images/IronMan_9_wallpaper.jpg"],
              [NSURL URLWithString:@"http://sequelnews.com/wp-content/uploads/2011/11/iphone_5.jpg"],Nil];

NSURL *url=[NSURL URLWithString:arr];

NSData* theData = [NSData dataWithContentsOfURL:url];

int row = 0;
     int column = 0;

     for(int i = 0; i < [(NSArray*) url count]; ++i) {
         UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:(NSURL*)   [(NSArray*)url objectAtIndex:i]]]; 

         UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
         button.frame = CGRectMake(column*100+16, row*90, 80, 80);
         [button setImage:image forState:UIControlStateNormal]; 

         [button addTarget:self 
                    action:@selector(buttonClicked:) 
          forControlEvents:UIControlEventTouchUpInside];
         button.tag = i; 
         [self.view addSubview:button];

         if (column == 2) {
             column = 0;
             row++;
         } else {
             column++;
         }
     }      
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *localFilePath = [documentsDirectory stringByAppendingPathComponent:arr];
[theData writeToFile:localFilePath atomically:YES];

} 
```

请指导...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:21:22.520

试试[SDWebImage](https://github.com/rs/SDWebImage)，`SDWebImage`可以下载图片并保存到磁盘缓存，你可以离线使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:39:03.047

您应该将图像保存到您的设备中，以便在未连接到 Internet 时访问它们。你现在这样做的方式总是加载 url。

您可以这样尝试：为每个图像使用一个 NSData 对象并在其中加载 url 内容。

```
NSData* theData = [NSData dataWithContentsOfURL:yourURLHere]; 
```

现在您可以将此对象保存到您的设备并在需要时访问它。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *localFilePath = [documentsDirectory stringByAppendingPathComponent:@"picName.jpg"];
[theData writeToFile:localFilePath atomically:YES]; 
```

这应该是关于它

# c++ - 取消信号处理程序中的线程

> ID：11574406
> 
> 赞同：2
> 
> 时间：2012-07-20T07:02:08.417
> 
> 标签：c++, c, linux, multithreading, signals

我已经启动了一个计时器并将间隔设置为 5 秒并为其注册了一个信号处理程序。当遇到 SIGALRM 时，我试图终止信号处理程序内的线程，但 bt 无法做到这一点。线程没有被终止，而不是整个进程被杀死。
以下是代码：

```
 void signalHandler()
{
        printf("Caught signal ...\n");
        printf("Now going to terminate thread..\n");
        pthread_kill(tid, SIGKILL);
}

void * thread_function()
{
        int oldstate;
        char result[256] = {0};
        time_t startTime = time(NULL);
        time_t timerDuration = 5;
        time_t endTime = startTime + timerDuration;

        while(1) {
                printf("Timer is runnuing as dameon..\n");
                if(!strcmp(result, "CONNECTED")) {
                        resp = 1;
                        pthread_exit(&resp);
                }
        }
}

int main()
{
        int *ptr[2];

        signal(SIGALRM, signalHandler);

        timer.it_interval.tv_usec = 0;
        timer.it_interval. tv_usec = 0;

        timer.it_value.tv_sec = INTERVAL;
        timer.it_value.tv_usec = 0;

        setitimer(ITIMER_REAL, &timer, 0);
            pthread_create(&tid, NULL, thread_function, NULL);
        pthread_join(tid, (void**)&(ptr[0]));
        printf("test %d\n\n",*ptr[0]);

        while(1)
                printf("1");
} 
```

平台：Linux，gcc编译器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:19:44.827

据我所知，你几乎不能在信号处理程序中调用任何东西，因为你不知道你的代码处于什么状态。

您最好的选择是设置一个线程来处理您的信号。所有其他线程都应该调用`pthread_setsigmask`并阻止所有信号，然后创建另一个线程，该线程调用`pthread_setsigmask`catch `SIGALARM`，然后调用`sigwait`，此时它可以取消另一个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:58:07.697

与单线程环境相比，多线程环境中处理信号的方式大不相同。在多线程代码中，您应该为具有您的业务逻辑的所有线程屏蔽所有信号，然后创建一个单独的线程来处理信号。这是因为，在多线程环境中，您无法确定信号将传递到哪个线程。

请参阅此链接了解更多详情：
[http ://devcry.heiho.net/2009/05/pthreads-and-unix-signals.html](http://devcry.heiho.net/2009/05/pthreads-and-unix-signals.html)

除此之外，要杀死一个线程，请使用[pthread_cancel](http://linux.die.net/man/3/pthread_cancel)，这对您来说应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:24:57.287

您可以尝试使用标志：

```
int go_on[number_of_threads] = { 1 };

void signalHandler()
{
        printf("Caught signal ...\n");
        printf("Now going to terminate thread..\n");
        go_on[tid] = 0;
}

void * thread_function()
{  /* */
   while(go_on[this_thread_id]) {
                printf("Timer is runnuing as dameon..\n");
                if(!strcmp(result, "CONNECTED")) {
                        resp = 1;
                        pthread_exit(&resp);
                }
   }
} 
```

# hadoop - 如何查找 HDFS 文件的大小

> ID：11574410
> 
> 赞同：35
> 
> 时间：2012-07-20T07:02:22.363
> 
> 标签：hadoop, hdfs

如何查找 HDFS 文件的大小？应该使用什么命令来查找 HDFS 中任何文件的大小。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-20T10:25:10.440

我也发现自己使用`hadoop fs -dus <path>`了很多。例如，如果 HDFS 上名为“/user/frylock/input”的目录包含 100 个文件，并且您需要所有可以运行的文件的总大小：

```
hadoop fs -dus /user/frylock/input 
```

您将获得“/user/frylock/input”目录中所有文件的总大小（以字节为单位）。

`hadoop fs -ls`此外，请记住，HDFS 以冗余方式存储数据，因此文件使用的实际物理存储可能是and报告的 3 倍或更多`hadoop fs -dus`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-20T08:12:30.370

您可以使用`hadoop fs -ls`命令列出当前目录中的文件及其详细信息。命令输出中的第 5 列包含文件大小（以字节为单位）。

例如，命令`hadoop fs -ls input`给出以下输出：

```
Found 1 items
-rw-r--r--   1 hduser supergroup      45956 2012-07-19 20:57 /user/hduser/input/sou 
```

文件大小`sou`为 45956 字节。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-03-18T16:31:24.417

我使用了以下函数来帮助我获取文件大小。

```
public class GetflStatus
{
    public long getflSize(String args) throws IOException, FileNotFoundException
    {
        Configuration config = new Configuration();
        Path path = new Path(args);
        FileSystem hdfs = path.getFileSystem(config);
        ContentSummary cSummary = hdfs.getContentSummary(path);
        long length = cSummary.getLength();
        return length;
    }
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-05-10T14:44:59.083

使用 awk 脚本查看以下命令以查看 HDFS 中过滤输出的大小（以 GB 为单位）：

```
hadoop fs -du -s /data/ClientDataNew/**A***  | awk '{s+=$1} END {printf "%.3fGB\n", s/1000000000}' 
```

输出---> 2.089GB

```
hadoop fs -du -s /data/ClientDataNew/**B***  | awk '{s+=$1} END {printf "%.3fG\n", s/1000000000}' 
```

输出---> 1.724GB

```
hadoop fs -du -s /data/ClientDataNew/**C***  | awk '{s+=$1} END {printf  "%.3fG\n", s/1000000000}' 
```

输出---> 0.986GB

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-05T19:31:00.833

```
hdfs dfs -du -s -h /directory 
```

这是人类可读的版本，否则它会给出错误的单位（略大）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-20T12:13:59.140

如果你想通过 API 来做，你可以使用 'getFileStatus()' 方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-31T08:52:04.310

如果您想知道目录中每个文件的大小，请在末尾使用**“*”星号。**

```
hadoop fs -du -s -h /tmp/output/* 
```

我希望这有助于你的目的。

# makefile - 库目录中有空格的 Makefile

> ID：11574417
> 
> 赞同：0
> 
> 时间：2012-07-20T07:02:42.473
> 
> 标签：makefile, space

当库路径包含空格时，它无法找到该路径。所以我用引号来包裹路径。路径找到了，但是在目录中找不到库。

例如：
`Debug_Library_Path=-L"../Externals/TextLibrary/libs/with space/gccDebug/"` `Release_Library_Path=-L"../Externals/TextLibrary/libs/with space/gccRelease/"`

`Debug_Libraries=-Wl,--start-group -lTextLibrary -Wl,--end-group` `Release_Libraries=-Wl,--start-group -lTextLibrary -Wl,--end-group`

提示：找不到“-lTextLibrary”

有谁知道可能导致此问题的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:38:00.873

由于错误消息指出`-lTextLibrary`找不到（不是 TextLibrary！），我怀疑这是路径问题。相反，您的程序将您的选项解释为输入文件。检查您的程序使用哪种类型的参数，并可能尝试更改参数/选项的顺序。

# c - 如何在linux中获取usb的urb信息

> ID：11574418
> 
> 赞同：2
> 
> 时间：2012-07-20T07:02:42.207
> 
> 标签：c, linux, usb, libusb

我正在尝试获取 USB 棒的 urb 信息。我写如下：

```
#include <sys/ioctl.h>
#include <errno.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <usb.h>
/* #include <stropts.h> */
/* #include <inttypes.h> */
#include <linux/usbdevice_fs.h>
/* #include <asm/byteorder.h> */
/* #include <linux/usb/ch9.h> */
#define USBDEVFS_REAPURB           _IOW('U', 12, void *)
int main(int argc, char *argv[])
{ 
  int fd;
  int result;
  int i;
  struct usbdevfs_urb * receive;
  receive = malloc(sizeof (struct usbdevfs_urb));

  bzero(receive, sizeof (struct usbdevfs_urb));

  char file[30];
  strncpy (file, argv[1], 30);

  if ((fd = open(file, O_RDWR)) < 0)
    {
      printf("failed to open device: %s, \n error: %s \n", file, strerror(errno));
    }
  else 
    {
      printf ("Open successed: Device: %s\n", file);
      for (i = 0; i < 1000; ++i)
        {
          printf ("polling...\n");
          result = ioctl(fd, USBDEVFS_REAPURB, receive);
            if (result < 0)
              {
                printf ("Error!  : ioctl returned : %d\n errno =%s\n", result, strerror(errno));
                break;
              }
          printf ("The %d th time ok.\n", i + 1);
          usleep(2000);
        }
    }
  close(fd);
  return 0;
} 
```

我可以编译它。但是当我运行它时，它说无效的论点。那么，我怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T01:08:07.077

我最终遇到了类似的问题 - 所以这是我的笔记......除了评论中指出的问题之外，我认为 OP 代码的主要问题是：

1.  你不能仅仅“收获”一个URB；你首先必须“提交”一个（读或写）URB，然后你“收获”它
2.  您不能只是从命令行参数 ( ) 作为路径获得`open`的字符串，并获得对 URB 有效的文件描述符`file``argv[1]``ioctl`

至于 1，请参见[c - User mode USB isochronous transfer from device-to-host](https://stackoverflow.com/questions/7964315/user-mode-usb-isochronous-transfer-from-device-to-host)

> 另外，一旦我填写了这个结构，我是否正确地认为我需要调用以下内容：
> `int retSubmit = ioctl( fd, USBDEVFS_SUBMITURB, &usbRequest );`
> 然后一旦提交，我就可以等待请求完成使用
> `USBDEVFS_REAPURBNDELAY`

或[“[Linux-usb-users] usbfs urb reap 问题。” - 马克](http://marc.info/?l=linux-usb-users&m=107263343018365&w=2)

> 我用来提交 URB 的例程及其调用如下：
> ...
> 提交 URB 工作正常。这就是我尝试收获它的方式：
> ...

[linux.usb.devel - 回复：usbdevfs 问题（和其他......） - msg#00167](http://osdir.com/ml/linux.usb.devel/2002-02/msg00167.html)

> 是的，您向中断端点提交了一个 BULK 类型的 usbdevfs_urb。它得到一包数据。您可以提交多个将排队的。我猜'reap'是读指针，不像死神（虽然也许是……:)

我*认为*（但我不确定 100%）如[Virtual USB Analyzer - Tutorial](http://vusb-analyzer.sourceforge.net/tutorial.html)中所述，“提交”和“收获”等同于“提交”和“完成” 。

就 2\. 而言 - 这取决于设备的类型。例如，如果您将具有 FT232 USB 串行芯片的 Arduino Duemillanove 连接到 Linux PC - 这将自动加载`ftdi_sio`内核驱动程序，然后加载`usbserial`驱动程序，然后创建文件（设备节点）`/dev/ttyUSB0`。因此，Linux 最多只能将此文件视为一个普通的串行端口 - 不一定与 URB 请求相关（我猜 USB 闪存拇指驱动器也有类似的东西）；当我尝试使用参数调用 OP 代码时，我遇到了与 OP 相同的错误`/dev/ttyUSB0`。

获取此文件描述符有些困难，因为很难找到示例：

['Re: 使用 USBDEVFS 访问 USB 设备' - MARC](http://marc.info/?l=linux-hotplug&m=114686310831277)

> 2006 年 5 月 5 日星期五下午 4:45:30 -0400，Danny Budik 写道：
> > 如何使用“原始”usbfs？我尝试从 /dev/bus/usb 文件中读取
> > 并得到一个 bind - address already in use 错误。
> 
> 查看 libusb 是如何实现的，以获得如何做到这一点的一个很好的例子。
> 'lsusb' 的源代码也将在这里为您提供帮助。

[Linux 内核文档/usb/proc_usb_info.txt](http://www.mjmwired.net/kernel/Documentation/usb/proc_usb_info.txt)

> **注意**：文件系统已从“usbdevfs”重命名为
> “usbfs”，以减少与“devfs”的混淆。您可能
> 仍会看到对旧“usbdevfs”名称的引用。

我基本上从[[Discuss-gnuradio] New implementation for fusb_linux without allocs/frees](http://www.mail-archive.com/discuss-gnuradio@gnu.org/msg17549.html)中的代码开始，并尝试修改 OP 代码使其与 Arduino Duemillanove 一起使用。问题在于它使用的是旧`libusb-0.1`代码，它有一些不同的标题和函数名称；例如`libusb-0.1`有[libusb/usbi.h](http://git.libusb.org/?p=libusb-compat-0.1.git;a=blob_plain;f=libusb/usbi.h;hb=HEAD)，而较新的`libusb-1.0`有[libusb/libusbi.h](http://git.libusb.org/?p=libusb.git;a=blob_plain;f=libusb/libusbi.h;hb=HEAD)。本质上，`libusb`函数可用于获取正确的文件描述符。

修改后的 OP 代码如下，假设我们称之为**`testu.c`**. 我已经在 Ubuntu Natty 上对其进行了测试——首先，连接 Arduino Duemillanove，它连接了`ftdi_sio`驱动程序（这可以在终端中使用 进行检查`tail -f /var/log/syslog`）。因此，首先，删除自动挂钩的驱动程序（`libusb`不需要它与设备通信，并且它可能会干扰；注意删除后，`/dev/ttyUSB0`文件不再存在）：

```
sudo modprobe -r ftdi_sio   # this also removes usbserial 
lsmod | grep ftdi           # make sure ftdi_sio isn't listed by lsmod 
```

然后，我们将使用 USB 供应商/产品 ID 通过 连接到设备`libusb`；要找到它，请使用`lsusb`：

```
$ lsusb | grep FT
Bus 002 Device 005: ID 0403:6001 Future Technology Devices International, Ltd FT232 USB-Serial (UART) IC 
```

VID:PID`0403:6001`硬编码在`testu.c`; 然后我们可以构建并运行它。请注意，`testu`程序必须以 root 身份（通过`sudo`）运行 - 否则`libusb`将无法与设备通信：

```
$ gcc -o testu -Wall -g testu.c `pkg-config --libs --cflags libusb-1.0`
testu.c:23:1: warning: ‘fd_from_usb_dev_handle’ defined but not used

$ sudo ./testu
First
Second 0x8B4B4F0
Open successed: Device: 0403:6001 6
polling...
The 1 th time ok.
polling...
The 2 th time ok.
polling...
The 3 th time ok.
polling...
The 4 th time ok.
polling...
The 5 th time ok.
polling...
The 6 th time ok.
polling...
The 7 th time ok.
polling...
The 8 th time ok.
polling...
The 9 th time ok.
polling...
The 10 th time ok. 
```

该代码提交了一个写入请求（在端点 0x02 上），然后将其接收——我可以看到 Arduino 上的 RX led 闪烁——这意味着一些数据确实到达了它，正如预期的那样。但是，仅此而已-所以我不确定代码是否回答了“获取usb的urb信息”部分`:)`但是，它确实显示了如何获取文件描述符，因此原始`ioctl`s可以工作-尽管通过`libusb`(你可能不得不更深入地挖掘`libusb`源代码，以便在没有 libusb 的情况下做同样的事情）。

这是`testu.c`（注意，安装`libusb-dev`包以便它可以编译）：

```
#include <sys/ioctl.h>
#include <errno.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <usb.h>
/* #include <stropts.h> */
/* #include <inttypes.h> */
#include <linux/usbdevice_fs.h>
/* #include <asm/byteorder.h> */
/* #include <linux/usb/ch9.h> */
//~ #define USBDEVFS_REAPURB           _IOW('U', 12, void *)

#include <libusb.h>

struct libusb_device_handle *d_udh = NULL;

// [http://www.mail-archive.com/discuss-gnuradio@gnu.org/msg17549.html [Discuss-gnuradio] New implementation for fusb_linux without allocs/frees]
static int
fd_from_usb_dev_handle (libusb_device_handle *udh) //(usb_dev_handle *udh)
{
  return *((int *) udh);
}

//~ ./libusb/os/linux_usbfs.c
struct linux_device_handle_priv {
  int fd;
};

//~ ./libusb/libusbi.h
#define usbi_mutex_t                    pthread_mutex_t
struct list_head {
        struct list_head *prev, *next;
};
struct libusb_device_handle {
        /* lock protects claimed_interfaces */
        usbi_mutex_t lock;
        unsigned long claimed_interfaces;

        struct list_head list;
        struct libusb_device *dev;
        unsigned char os_priv[0];
};

//~ ./libusb/os/linux_usbfs.c
struct linux_device_handle_priv* _device_handle_priv(
        struct libusb_device_handle *handle)
{
  struct linux_device_handle_priv* out;
  out =  (struct linux_device_handle_priv *) handle->os_priv;
  return out;
};

int main(int argc, char *argv[])
{
  int fd;
  int result;
  int i;
  struct usbdevfs_urb * receive;
  struct usbdevfs_urb * send;
  struct linux_device_handle_priv *hpriv;
  send = malloc(sizeof (struct usbdevfs_urb));
  memset(send, 0, sizeof (*send));
  send->buffer_length = 10;
  send->buffer = malloc(sizeof(unsigned char)*10);
  send->type = USBDEVFS_URB_TYPE_BULK;
  send->endpoint = 0x02;
  send->signr = 0;

  receive = malloc(sizeof (struct usbdevfs_urb));

  bzero(receive, sizeof (struct usbdevfs_urb));

  char file[30];
  if (argv[1]) strncpy (file, argv[1], 30);

  printf ("First\n");
  result = libusb_init(NULL);
  if (result < 0)
  {
    printf("failed to initialise libusb:\n");
  }
  d_udh = libusb_open_device_with_vid_pid(NULL, 0x0403, 0x6001);
  hpriv = _device_handle_priv(d_udh);
  printf ("Second 0x%X\n", (unsigned int)d_udh);
  result = d_udh ? 0 : -EIO;
  //~ if ((fd = open(file, O_RDWR)) < 0)
  if (result < 0)
    {
      printf("failed to open device: %s, \n error: %s \n", "0403:6001", strerror(errno)); //file
    }
  else
    {
      //~ fd = fd_from_usb_dev_handle(d_udh); // doesn't work
      fd = _device_handle_priv(d_udh)->fd;
      printf ("Open successed: Device: %s %d\n", "0403:6001", fd ); // file);
      for (i = 0; i < 10; ++i)
        {
          result = ioctl (fd, USBDEVFS_SUBMITURB, send);
            if (result < 0)
              {
                printf ("Error! USBDEVFS_SUBMITURB : ioctl returned : %d\n errno =%s\n", result, strerror(errno));
                break;
              }
          printf ("polling...\n");
          result = ioctl(fd, USBDEVFS_REAPURB, receive);
            if (result < 0)
              {
                printf ("Error! USBDEVFS_REAPURB : ioctl returned : %d\n errno =%s\n", result, strerror(errno));
                break;
              }
          printf ("The %d th time ok.\n", i + 1);
          usleep(2000);
        }
    }
  close(fd);
  return 0;
} 
```

好吧，希望这对某人有所帮助，
干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T11:19:20.600

通过仔细检查您的 USB 请求不会干扰内核驱动程序，您可以在不分离内核驱动程序的情况下执行此类请求。但是 libusb 工作流强制要求设备并因此分离其非 USB 子内核驱动程序。所以你需要自己执行[usb ioctls](https://www.kernel.org/doc/htmldocs/usb/usbfs-ioctl.html)。

[这是一个](https://gist.github.com/Julio-Guerra/24dab7ea3ecb95f54a7c41eba662d957)向 FTDI USB 设备发送 USB 控制消息以刷新其 RX 和 TX FIFO 的示例，而无需分离 ftdi_sio 内核驱动程序。

# bash - Bash：如何复制目录的文件（如果存在）

> ID：11574421
> 
> 赞同：3
> 
> 时间：2012-07-20T07:02:53.643
> 
> 标签：bash, cp

在脚本中我有声明

```
eval cp "$chapter"/subsections/* $temp/subsections 
```

但是，我不确定“$chapter”/subsections/ 中是否真的有文件。结果我得到错误：

```
cp: cannot stat `Commissioning/subsections/*': No such file or directory 
```

cp 中是否有避免投诉的选项（我找不到任何投诉）？

有没有一种简单的方法来检查目录中是否存在任何文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T07:25:51.180

这并不是真正的`cp`抱怨。当您使用通配符`*`时，shell 会将它们替换为所有匹配文件的完整列表。当没有文件匹配时，它只是离开`*`，告诉`cp`复制名为`*`.

您可以改用以下技巧：

```
cp -r "${chapter}"/subsections/. "${temp}"/subsections 
```

现在您将把整个目录传递给`cp`，并请求递归地复制它。并且由于您通过 引用它`.`，`cp`因此不会复制其名称，而只会复制其内容。

# facebook - 移除offline_access 并使用Access Token

> ID：11574430
> 
> 赞同：-1
> 
> 时间：2012-07-20T07:03:16.793
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我尝试尽可能具体地描述我在做什么以及我的问题是什么： 简而言之，我“劫持”了一些访问令牌并使用它来下载 XML 数据。这是长版本：

首先，我在一些应用程序的帮助下生成了一个访问令牌。该应用程序不是我的，我认为可以使用任何应用程序： [https://graph.facebook.com/oauth/authorize?client_id=xxxxxxxx&redirect_uri=http://apps.facebook.com/xxxxxxx/&scope=offline_access,email,read_insights,read_stream,user_about_me,user_activities,user_birthday,user_education_history,user_events, user_groups,user_hometown,user_interests,user_likes,user_location,user_notes,user_online_presence,user_photo_video_tags,user_photos,user_relationships,user_religion_politics,user_status,user_videos,user_website,user_work_history,user_checkins,read_friendlists,read_requests,friends_about_me,friends_activities,friends_birthday,friends_education_history,friends_events,friends_groups,friends_hometown, Friends_interests,friends_likes,friends_location,friends_notes,friends_online_presence,friends_photo_video_tags,friends_photos,friends_relationships,friends_religion_politics,friends_status,friends_videos,Friends_website,friends_work_history,friends_checkins&type=user_agent](https://graph.facebook.com/oauth/authorize?client_id=xxxxxxxx&redirect_uri=http://apps.facebook.com/xxxxxxx/&scope=offline_access,email,read_insights,read_stream,user_about_me,user_activities,user_birthday,user_education_history,user_events,user_groups,user_hometown,user_interests,user_likes,user_location,user_notes,user_online_presence,user_photo_video_tags,user_photos,user_relationships,user_religion_politics,user_status,user_videos,user_website,user_work_history,user_checkins,read_friendlists,read_requests,friends_about_me,friends_activities,friends_birthday,friends_education_history,friends_events,friends_groups,friends_hometown,friends_interests,friends_likes,friends_location,friends_notes,friends_online_presence,friends_photo_video_tags,friends_photos,friends_relationships,friends_religion_politics,friends_status,friends_videos,friends_website,friends_work_history,friends_checkins&type=user_agent)

作为回应，我在 URL 中获得了访问令牌：access_token=AAAAA .....

然后我使用这个 access_token 访问某些信息：

https://api.facebook.com/method/fql.query?access_token=AAAAA....&query=SELECT%20uid,%20first_name,%20last_name,%20online_presence%20FROM%20user%20WHERE%20uid=[friend-uid ]

到目前为止，这工作得很好，我不必更新访问令牌，但有了新的更改，我只能得到一个 2 小时有效的令牌。这对我来说太短了，因为我在 WGET 脚本中使用了令牌。我无法交换令牌，因为我没有关于该应用程序的更多信息。有什么办法可以克服我的问题吗？我不想制作自己的应用程序只是为了获取一些信息。我不想给FB我的cc。现在的方式对我来说很好。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:13:41.633

您写道，该应用程序不是您的，您可以使用电话号码和短信验证来注册为 facebook 开发人员，如果您愿意，而不是您的抄送。

# c# - 如何在没有数据库的 ListView 中添加数据线

> ID：11574431
> 
> 赞同：0
> 
> 时间：2012-07-20T07:03:16.113
> 
> 标签：c#, asp.net, listview, data-binding, active-directory

我在显示 Active Directory 用户的 ASP.NET 应用程序中使用 ListBox。现在我想使用 ListView 但我不知道如何用数据填充它:(

我的应用程序：

用户在文本框中输入一个字符串（姓氏或其中的一部分）。比 ListBox 列出 TextBox 中具有相同字符串的所有 AD 用户。使用 asp.net 应用程序的用户在 ListBox 中选择了一行，并且关于一个按钮 (btn_ShowProperties)，他看到了这个 AD 用户的所有属性。

编码：

```
protected void btnBenutzerSuchen_Click(object sender, EventArgs e)
        {
             //lboxBenutzer is the ListBox
           lboxBenutzer.Items.Clear(); 

           DirectoryEntry Entry =  new DirectoryEntry("LDAP://" + "Domain");

           string filter = "(&(objectClass=user)(objectCategory=person)(cn=" + txtBenutzer.Text + "*))";

           DirectorySearcher Searcher = new DirectorySearcher(Entry, filter);

              foreach (SearchResult res in Searcher.FindAll())
              {
                    //GetProperty is a Method to get the Informations from AD

                  string Benutzer = GetProperty(res, "sAMAccountName"); 
                  string eMail = GetProperty(res, "mail");
                  string Vorname = GetProperty(res, "givenName");
                  string Nachname = GetProperty(res, "sn");
                  string Telefon = GetProperty(res, "telephoneNumber");

                     //How I make this in a ListView? :(
                  lboxBenutzer.Items.Add(new ListItem(eMail + " | " + Benutzer + " | " + Nachname + ", " + Vorname + " | " + Telefon));
              }

        } 
```

我的点子：

我想使用 ListView 因为 ListBox 的表示不正确。我的问题是向 ListView 添加一行。我能做些什么 ：/ ？

PS：对不起我的英语不好。我来自德国:P

塔拉索夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:12:25.700

创建一个具有所有五个属性的类并填充该类的实例数组。使用模板创建 ListView 并将数组绑定到列表视图，不要手动添加它们。此处示例：http: [//msdn.microsoft.com/en-us/library/bb398790.aspx](http://msdn.microsoft.com/en-us/library/bb398790.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:33:22.073

这很简单，a`ListView`是一个数据绑定控件，因此您可以使用与任何数据绑定控件（如`GridVew`、`FormView`、`ListBox`等）相同的绑定技术

由于您已经有一个`Enumerable`（基于您的代码：）`Searcher.FindAll()`，那么您只需绑定它：

## ASPX

```
<asp:ListView runat="server" ID="myListView">
    <ItemTemplate>
        <asp:Label ID="Label1" Text='<%# Eval("Benutzer") %>' runat="server" /><br />
        <asp:Label ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /><br />
        <asp:Label ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /><br />
        <asp:Label ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /><br />
        <asp:Label ID="Label5" Text='<%# Eval("Telefon") %>' runat="server" /><br />
    </ItemTemplate>
    <ItemSeparatorTemplate>
        <hr />
    </ItemSeparatorTemplate>
</asp:ListView> 
```

## 绑定它的代码，后面的代码

```
var q = from s in Searcher.FindAll().OfType<SearchResult>()
        select new
        {
            Benutzer = GetProperty(s, "sAMAccountName"),
            eMail = GetProperty(s, "mail"),
            Vorname = GetProperty(s, "givenName"),
            Nachname = GetProperty(s, "sn"),
            Telefon = GetProperty(s, "telephoneNumber")
        };

this.myListView.DataSource = q;
this.myListView.DataBind(); 
```

## 编辑 1

添加表格布局：

```
 <asp:ListView runat="server" ID="myListView">
        <LayoutTemplate>
            <table runat="server" border="1">
                <tr runat="server">
                    <th runat="server">Benutzer</th>
                    <th runat="server">eMail</th>
                    <th runat="server">Vorname</th>
                    <th runat="server">Nachname</th>
                    <th runat="server">Telefon</th>
                </tr>
                <tr runat="server" id="ItemPlaceholder">
                </tr>
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            <tr runat="server">
                <td runat="server"><%# Eval("Benutzer")%></td>
                <td runat="server"><%# Eval("eMail")%></td>
                <td runat="server"><%# Eval("Vorname")%></td>
                <td runat="server"><%# Eval("Nachname")%></td>
                <td runat="server"><%# Eval("Telefon")%></td>
            </tr>
        </ItemTemplate>
    </asp:ListView> 
```

# bash - 使用 bash 脚本每小时循环打印日期

> ID：11574435
> 
> 赞同：2
> 
> 时间：2012-07-20T07:03:28.713
> 
> 标签：bash, date, ubuntu

我想编写一个 bash 脚本，以下列格式打印出日期：

```
20120205_16
(year)(month)(day)_(24 hour) 
```

所以为当前日期执行此操作的命令是：

```
date +'20%y%m%d_%H' 
```

我想做的是从指定日期到另一个日期打印每个这样的日期（使用for循环或其他东西）。例如：

```
20120205_16 -> 20120305_18 would be:

20120205_16
20120205_17
20120205_18
...
20120305_17
20120305_18 
```

显然，这里的两个硬位是指定日期并按小时递增。

是否可以使用日期或其他方法轻松完成此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T07:14:45.013

首先，您使用以下格式获取`time_t`值：`%s`

```
start=$(date --date '5 feb 2012 16:00' +%s)
stop=$(date --date '5 mar 2012 18:00' +%s) 
```

这些以秒为单位。您可以对它们的值使用 for 循环，将它们增加 1 小时（3600 秒）：

```
for t in $(seq ${start} 3600 ${stop})
do
    date --date @${t} +'%Y%m%d_%H'
done 
```

注意`@`which 用于表示参数中通过`%+s`的时间`--date`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:28:10.893

我已经编写了一组用于一般日期摆弄的命令行工具（[dateutils](http://hroptatyr.github.com/dateutils/)）。它绝对不是广泛传播的，而是便携的。

对于这种任务，`dseq`是你的朋友，你的例子归结为：

```
dseq '2012-02-05 16:00:00' 1h '2012-03-05 18:00:00' -f '%Y%m%d_%H'
=>
20120205_16
20120205_17
20120205_18
  ...
20120305_16
20120305_17
20120305_18 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:33:12.123

这也可以在 Gawk 中很好地完成：

```
gawk -v start="2011 10 10  10 00 00" \
     -v end="2011 11 10  10 00 00" '

BEGIN {
  time = mktime( start )
  end = mktime( end )
  while ( time <= end ) {
    print strftime( "%Y%m%d_%H", time )
    time +=3600
  }
}' 
```

# entity-framework - 从 Compact DB 加载上下文期间出现 StackOverflowException

> ID：11574436
> 
> 赞同：0
> 
> 时间：2012-07-20T07:03:30.263
> 
> 标签：entity-framework, sql-server-ce

在设置期间`Entity Context`会得到一个**StackOverflowException**

数据库`SQL Server Compact`大约有 220MB 和大约 200,000 条记录作为本地 windows 数据库存储。

它有一个 NText 字段

edmx 是自动生成的。

**定义的属性：**

```
 public static dbEntities Context
    {
        get
        {
            return Context;
        }
        set
        { // The Error locator will stop here as the source of the Error
            Context = value;
        }
    } 
```

**在加载过程中：**

```
DataStore.Context = new Store.dbEntities() ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:05:28.633

好吧，做

```
public static dbEntities Context {get;set;} 
```

您不认为在 Context 中获取或设置 Context 是......嗯......有点递归？

# ruby - 配置 guard-minitest 负载路径？

> ID：11574437
> 
> 赞同：0
> 
> 时间：2012-07-20T07:03:34.693
> 
> 标签：ruby, tdd, rake, guard

我通常使用以下命令运行我的测试套件`Rake`：

**耙文件**：

```
require 'rake/testtask'

namespace :spec do
  desc "Run all specs"
  task all: [:units]

  desc "Run all unit specs"
  Rake::TestTask.new :units do |t|
    t.pattern = "spec/unit/**/*_spec.rb"
    t.libs = ['app', 'spec']
  end
end 
```

上面的 rake 任务效果很好。现在我希望运行它`guard-minitest`：

**保护文件**：

```
guard 'minitest' do
  watch(%r{^app/(.+)\.rb$}) { |m| "spec/app/#{m[1]}_spec.rb" }
  watch(%r{^spec/(.+)\.rb$}) { |m| "spec/#{m[1]}.rb" }
end 
```

但是，这样做会导致我的加载路径未设置：

```
/vagrant/spec/unit/helper.rb:5:in `require': cannot load such file -- repository (LoadError) 
```

...因为我需要我的文件喜欢`require 'repository'`而不是`require './app/repository'`.

如何配置[警卫](https://github.com/guard/guard)以使用我需要的加载路径，就像我在 rake 任务中所做的那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T09:07:14.790

您可以将`app`目录`LOAD_PATH`直接添加到您的`test/test_helper.rb`（或`spec/spec_helper.rb`）中，例如：

```
$:.unshift(File.expand_path(File.join(File.dirname(__FILE__), '..', 'app'))) 
```

guard-minitest 将你的测试助手添加到 minitest 中，即使在 drb 上运行时也是如此。

# sql - 内部联接与内部联接（SELECT . FROM）

> ID：11574442
> 
> 赞同：66
> 
> 时间：2012-07-20T07:03:52.987
> 
> 标签：sql, sql-server, join, inner-join

同一查询的这两个版本在性能方面有什么区别吗？

```
--Version 1
SELECT p.Name, s.OrderQty
FROM Product p
INNER JOIN SalesOrderDetail s on p.ProductID = s.ProductID

--Version 2
SELECT p.Name, s.OrderQty
FROM Product p
INNER JOIN (SELECT ProductID, OrderQty FROM SalesOrderDetail) s on p.ProductID = s.ProductID 
```

我听说（由 DBA）说版本 2 更快，因为它在内部 SELECT 语句中只获取查询所需的列。但这似乎没有意义，因为查询性能（据我所知）基于受影响的行数和返回的最终列列表。

两者的查询计划是相同的，所以我猜两者之间没有任何区别。

我对么？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-20T07:07:53.690

你是对的。你做了完全正确的事，检查查询计划而不是试图事后猜测优化器。:-)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-20T07:11:27.980

不会有太大区别。但是，当您有一些应该在其外部加入的计算、聚合等时，版本 2 会更容易

```
--Version 2 
SELECT p.Name, s.OrderQty 
FROM Product p 
INNER JOIN 
(SELECT ProductID, SUM(OrderQty) as OrderQty FROM SalesOrderDetail GROUP BY ProductID
HAVING SUM(OrderQty) >1000) s 
on p.ProductID = s.ProdctId 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:11:01.617

似乎是相同的，以防 SQL 服务器不会尝试读取查询不需要的数据，优化器足够聪明

连接复杂查询（即本身具有连接、分组等）时可能有意义，然后，是的，最好指定必填字段。

但还有一点。如果查询很简单，则没有区别，但即使是应该提高性能的每一个额外操作都会使优化器更加努力地工作，并且优化器可能无法及时获得最佳计划，并且不会运行最佳查询。所以 extras select 可能是这样的动作，它甚至会降低性能

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-20T09:03:18.623

通过检查查询计划，您做了正确的事情。但我对版本 2 有 100% 的信心。当关闭记录的数量非常高时，它会更快。

我的数据库有大约 1,000,000 条记录，这正是查询计划显示两个查询之间差异的场景。此外，如果您在连接本身中使用它，而不是使用 where 子句，它会使查询更快：
SELECT p.Name, s.OrderQty
FROM Product p
INNER JOIN (SELECT ProductID, OrderQty FROM SalesOrderDetail) s on p.ProductID = s.ProductID WHERE p.isactive = 1

此查询的更好版本是：

SELECT p.Name, s.OrderQty
FROM Product p
INNER JOIN (SELECT ProductID, OrderQty FROM SalesOrderDetail) s on p.ProductID = s.ProductID AND p.isactive = 1

（假设 isactive 是产品表中的一个字段，表示活动/非活动产品）。

# java - JSON数据到日期时间Android

> ID：11574443
> 
> 赞同：0
> 
> 时间：2012-07-20T07:03:54.407
> 
> 标签：java, android, json, datetime

我想问一下如何从数据 JSON 中更改日期格式？
例如，来自 JSON 的结果是：Thu, 19 Jul 2012 23:28:44 +0000 --> 我将该结果放入字符串中
，我想将其更改为：带有我的时区的 datetime --> GMT +07:00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:10:57.700

你可以试试这个

```
 // Sat, 23 Jun 2012 00:00:00 +0000
    String date = "Sat, 23 Jun 2012 00:00:00 +0000";
    try {
        SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z");

        SimpleDateFormat df2 = new SimpleDateFormat("dd/MM/yy HH:mm");

       date = df2.format(format.parse(str));

    } catch (java.text.ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

如果对您有帮助，请查看此链接

[https://stackoverflow.com/a/2581073/1441666](https://stackoverflow.com/a/2581073/1441666)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:08:07.507

```
Date d = new Date("Thu, 19 Jul 2012 23:28:44 +0000");
SimpleDateFormat frmt = new SimpleDateFormat ("format");

frmt.setTimeZone(zone);// you need to know the zone here..
frmt.format(d); 
```

希望它有效..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:06:54.313

尝试使用 simpleDateFormat 解析日期并更改您的时区。

# iphone - 无法在 UIWebView IOS 5 中捕获触摸

> ID：11574448
> 
> 赞同：0
> 
> 时间：2012-07-20T07:04:10.200
> 
> 标签：iphone, ipad, uiwebview, uitouch, uiwindow

我是 iPhone 开发者的新手，

**触摸捕捉窗口.h**

```
@interface TouchCapturingWindow : UIWindow
{ 
       NSMutableArray *views;

       @private
       UIView *touchView;
}
- (void)addViewForTouchPriority:(UIView*)view;
- (void)removeViewForTouchPriority:(UIView*)view;
@end 
```

**触摸捕捉窗口.m**

```
 (void)addViewForTouchPriority:(UIView*)view
 {
    if ( !views ) views = [[NSMutableArray alloc] init];
    [views addObject:view];
}
- (void)removeViewForTouchPriority:(UIView*)view 
{
    if ( !views ) return;
    [views removeObject:view];
}
- (void)sendEvent:(UIEvent *)event 
 {
    UITouch *touch = [[event allTouches] anyObject];
    if (touch.phase == UITouchPhaseBegan) 
    {
        for ( UIView *view in views ) 
        {
            if ( ![view isHidden] && [view pointInside:[touch locationInView:view] withEvent:event] ) 
            {
                touchView = view;
                [touchView touchesBegan:[event allTouches] withEvent:event];
                break;
            }
        }
    }
    else if (touch.phase == UITouchPhaseMoved) 
    {
        if ( touchView ) 
        {
            [touchView touchesMoved:[event allTouches] withEvent:event];
        }
    }
    else if (touch.phase == UITouchPhaseCancelled) 
    {
        if ( touchView ) 
        {
            [touchView touchesCancelled:[event allTouches] withEvent:event];
            touchView = nil;
        }
    }
    else if (touch.phase == UITouchPhaseEnded) 
    {
        if ( touchView ) 
        {
            [touchView touchesEnded:[event allTouches] withEvent:event];
            touchView = nil;
        }
    }
    [super sendEvent:event];
}
@end 
```

**下载页面.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];   
    CGRect webFrame = CGRectMake(0.0, 0.0, 500.0, 500.0);
    webView = [[UIWebView alloc] initWithFrame:webFrame];
    [webView setBackgroundColor:[UIColor greenColor]];
    NSString *urlAddress = @"http://stackoverflow.com/";
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];
    [self.view addSubview:webView]; 
    NSString *t= [webView stringByEvaluatingJavaScriptFromString:@"window.getSelection().toString()"];
    NSLog(@"selected text=%@",t);
}
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event 
 {
       NSLog(@"Touches began"); 
 }
- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event      
 {
      NSLog(@"Touches moved"); 
 } 
- (void) touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event 
 { 
      NSLog(@"Touches ended"); 
 }
- (void) touchesCancelled:(NSSet*)touches withEvent:(UIEvent*)event 
 { 
      NSLog(@"Touches cancelled"); 
 } 
```

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:29:21.310

这是一个古老的“问题”。

我这样做的方法是添加一个链接到您的 html 按钮或您希望的任何元素。

然后实现这个 UIWebView 委托方法（不要忘记在你的 h 文件中添加 UIWebViewDelegate）。当在 webview 中按下链接时会调用此方法，以便您可以根据自己的需要使用它：

```
-(bool) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{

    //Do what ever you want here

    //prevent the web View from loading the link
    return NO;

} 
```

顺便说一句`NSURL *url = request.URL;` ，如果您有想要激活的链接，或者您有多个想要实施的操作，您可以使用它来检查 URL。

# perl - 从多个 perl 文件创建 exe

> ID：11574451
> 
> 赞同：3
> 
> 时间：2012-07-20T07:04:16.013
> 
> 标签：perl, user-interface, exe, pack

我有一组 4 个 perl 文件。主文件调用其他三个文件为：system("perl file2.pl"); （所有文件都在同一个文件夹中）我必须从所有四个 .pl 文件中创建一个 exe 文件，这样我才能仅使用主脚本调用其他 3 个文件。我尝试使用 perl 开发工具包创建一个 exe。但它仅在文件与 exe 位于同一目录中时才有效。请提出一些方法来制作一个能够调用这 3 个文件的独立 exe。

*我不知道这是否重要，但所有文件都有 GUI。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:10:26.827

要么将所有文件的代码包含在单个文件中，而不是使用`system()`调用，要么将其他 3 个 perl 文件转换为模块并将它们导入到您的主 perl 脚本中。否则，生成的可执行文件将`system()`像您在原始脚本中一样调用。

# c#-4.0 - 如何在 MVC3 的控制器中获取 DropDown 选定值而不是分配按钮？

> ID：11574455
> 
> 赞同：1
> 
> 时间：2012-07-20T07:04:35.093
> 
> 标签：c#-4.0, asp.net-mvc-3-areas

大家好，我必须从下拉列表中获取选定的值到我在控制器中的 post 方法中，而不是解决分配按钮 ..我该怎么做

```
MY modelcode
------------

 namespace Gridview_BugTracker.Models
{
    public class BugTracker_DataHelper
    {

        public static List<BugTracker_DataHelper> GetList{get;set;}

           public int ProjectId { get; set; }
           public string projectName { get; set; }           
           public string Description { get; set; }
           public  string status { get; set; }
           public int EmployeId { get; set; }
           public string EmployeName { get; set; }
           public bool selectChkbox { get; set; }  

      }      

   } 
```

## 我的控制器

```
[AcceptVerbs(HttpVerbs.Post)]
        public ActionResult DropCheckInsert(int ProjectId, string EmployeName, FormCollection collection, BugTracker_DataHelper bughelperdata)
        {    

            var modeldropdownlist = new BugTracker_DataHelper();
           SqlConnection Assignworkconn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS");
            {
                Assignworkconn.Open();
                SqlCommand insertcommande = new SqlCommand("sp_Insert", Assignworkconn);
                insertcommande.CommandType = CommandType.StoredProcedure;
                insertcommande.Parameters.Add("@EmployeId", SqlDbType.VarChar).Value = EmployeName;
                insertcommande.Parameters.Add("@projectId", SqlDbType.VarChar).Value = ProjectId;

                insertcommande.ExecuteNonQuery();
            }
            return View(modeldropdownlist);

}
}

}

My View code
------------------

<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<IEnumerable<Gridview_BugTracker.Models.BugTracker_DataHelper>>" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>AssignProject</title>
</head>
<body>
    <div>
     <% using (Html.BeginForm()) 
     { %>      
    <%:Html.ValidationSummary(true)%>       
     <fieldset>
        <legend>Projects</legend>
                    <%: Html.DropDownList("ProjectId", (SelectList)ViewBag.ProjectId, "--Select Project--")%>
                    <%: Html.ValidationMessage("ProjectId")%>                

                    <fieldset style="color:Blue;">                 

                    <% foreach (var item in Model) { %>  
                  <div>
                  <%:Html.CheckBox(item.EmployeName) %>
                  <%:Html.LabelForModel(item.EmployeName) %>
                  </div>                 
                 <%} %>

             <p>
             <input type="submit" value="Assign" />
             </p> 

        </fieldset>
       <%-- @Html.DropDownListFor(m => m.Contact.StateId, new SelectList(Model.States, "Id", "Name", @Model.Contact.StateId))--%>  

    <%} %>

    </div>
</body> 
```

现在我想在我的 postmedthod 中获取选定的值 projectId 参数，而不是工作分配按钮。谁能帮我解决这个问题？

# parallel-processing - petsc 将顺序矩阵转换为并行矩阵

> ID：11574466
> 
> 赞同：2
> 
> 时间：2012-07-20T07:05:26.780
> 
> 标签：parallel-processing, mpi

是否可以将 petsc 顺序矩阵转换为 petsc mpi 矩阵？我有一个需要并行解决方案的问题，但无法访问并行网格。在解决方案之前使用 matsetvalues 非常慢..无论如何要加快整个过程？

# extjs - pagingToolbar 不适用于变换网格

> ID：11574470
> 
> 赞同：0
> 
> 时间：2012-07-20T07:05:36.237
> 
> 标签：extjs, grid, transform

我正在使用以下方法将 HTML 表格转换为 extjs 网格：

`var myGrid = Ext.create('Ext.ux.grid.TransformGrid', "the-table", { ... ... }`

我的 pagingToolbar 不起作用。

它显示正确的记录总数。当我单击下一个/上一个按钮时，它显示正确的页码，但在网格内，页面未翻页。网格预先显示所有记录。

我正在使用的代码是：

```
var _pagingToolbar = new Ext.PagingToolbar({
displayInfo : true,
pageSize : 10,
dock: 'bottom',
displayMsg: 'Displaying topics {0} - {1} of {2}',
emptyMsg: "No topics to display"
});

var myGrid = Ext.create('Ext.ux.grid.TransformGrid', "the-table", {

...
...
...
bbar: _pagingToolbar
});

_pagingToolbar.bindStore(myGrid.getStore());
var store=myGrid.getStore();
store.pageSize=10;

myGrid.render(); 
```

有什么想法吗？提前致谢...

PS：也发在煎茶论坛上...

问候， 瓦希德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:09:20.043

实际上我设法自己解决了它。

问题出在 TransformGrid 插件文件中的 ExtJS 中。

我在 ux 文件夹和第 93 行简单地编辑了 TransformGrid.js，我改变了

```
type: 'memory', 
```

到

```
type: 'pagingmemory', 
```

# azure - ffmpeg：需要速度

> ID：11574471
> 
> 赞同：4
> 
> 时间：2012-07-20T07:05:37.960
> 
> 标签：azure, ffmpeg, flv, mp4, webm

我正在使用 ffmpeg 将一组带有音轨的图像 (bmps) 转换为 Web 就绪视频。目标格式是 h.264 mp4、webm 和 flv。[这是在使用预构建的 zeranoe 静态构建 ( http://ffmpeg.zeranoe.com/builds/](http://ffmpeg.zeranoe.com/builds/) )的 Windows Azure 超大型实例 (8 proc) 上。

假设我愿意为原始速度牺牲质量和尺寸。每种格式的哪些选项会产生最快的结果？

我的“基线”命令看起来像这样（交换其他格式的扩展名）：

```
ffmpeg -y -i frames%5d.bmp -i audio.mp3 -r 23.97 out.mp4 
```

如果需要，我可以将输入更改为其他格式（jpg 图像、aac 音频等）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T22:19:13.017

您更改任何格式的质量/编码速度平衡的主要“旋钮”是[比特率](http://ffmpeg.org/ffmpeg.html#Codec-AVOptions)。在刚刚的测试中，使用默认设置（比特率~900k）进行编码需要 97 秒的视频，在比特率降至 100k 的情况下耗时不到一半。输出视频要小得多，质量明显更差。

在您的情况下，来自图像，您可能可以通过关闭[FFmpeg 编码技巧](http://ffmpeg.org/ffmpeg.html#Tips)中提到的运动估计来获得主要的加速：

> 如果您的计算机速度不够快，您可以以牺牲压缩比为代价来加快压缩速度。您可以使用“-me zero”加速运动估计，使用“-g 0”完全禁用运动估计（您只有 I 帧，这意味着它与 JPEG 压缩差不多）。[请注意，最新版本的 FFmpeg 使用`-me_method`. `-me`]

在测试中，97 秒的编码在*20*秒内完成， `-g 0`. 压缩率要低得多，为原始大小的 63%，而默认设置为 25%，但与低比特率编码不同，质量仍然很好。

这是我快速测试的完整结果，时间是实时用于编码的：
基线，27M MOV 到 mp4，比特率 ~900k ：97s
with `-me_method zero`: 84s
with [`-flags2 fast`](http://ffmpeg.org/ffmpeg.html#Codec-AVOptions): 84s
with `-b 500k`: 75s
with `-b 100k`: 43s
with `-g 0`: 20s

with `-flags2 fast`and `-b 100k`and `-g 0`: 12s (输出看起来很*糟糕*)

可能还有其他特定于格式的调整，但与上面列出的方法相比，我不希望这些调整有显着的加速..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:25:15.490

这些图像的分辨率是多少？使用尽可能低的分辨率将为您提供更好的性能。还可以使用 ffmpeg 中的 -threads 选项来优化使用 8 个内核。

# c# - Linq 按日期获取数据组的总和

> ID：11574474
> 
> 赞同：8
> 
> 时间：2012-07-20T07:05:52.673
> 
> 标签：c#, linq, group-by, sum

我的数据看起来像：

```
 read_date |  T1  |  T2  |
15.02.2000 |   2  |   3  |
16.02.2000 |   4  |   5  |
15.03.2000 |   2  |   3  |
16.03.2000 |   5  |   4  | 
```

我想得到 T1 和 T2 的总和，如下所示：

```
 read_date |  T1  |  T2  |
   02.2000 |   6  |   8  |
   03.2000 |   7  |   7  | 
```

我试着写这样的东西：

```
var result = from s in meter_readings.Take(10)
             group s by new { s.read_date} into g
             select new
             {
                 read_date = g.Key.read_date,
                 T1 = g.Sum(x => x.T1),
                 T2 = g.Sum(x => x.T2)
             }; 
```

但这并没有给出预期的数据。是否有任何示例可以给出数据每小时总和、每日总和等。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-20T07:10:12.347

分组时只应考虑年份和月份：

```
var result = 
    from s in  meter_readings.Take(10)
    group s by new { date = new DateTime(s.read_date.Year, s.read_date.Month, 1) } into g
    select new
    {
        read_date = g.Key.date,
        T1 = g.Sum(x => x.T1),
        T2 = g.Sum(x => x.T2)
    }; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T07:11:31.690

首先，我认为您可以跳过匿名类型：

```
var result = from s in meter_readings.Take(10) 
         group s by s.read_date into g 
         select new 
         { 
             read_date = g.Key, 
             T1 = g.Sum(x => x.T1), 
             T2 = g.Sum(x => x.T2) 
         }; 
```

其次，要按月分组，请使用一些唯一标识月份的值，如下所示：

```
var result = from s in meter_readings.Take(10) 
         group s by s.read_date.ToString("yyyy.MM") into g 
         select new 
         { 
             read_month = g.Key, 
             T1 = g.Sum(x => x.T1), 
             T2 = g.Sum(x => x.T2) 
         }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:09:39.353

您当前的分组依据将按完整日期分组（即 15.02.2000 而不是 02.2000）。这最终会为每天而不是每月创建一个单独的组。

将 .Month 添加到组中（假设它是一个日期对象）：

```
group s by new { s.read_date.Month} into g 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T07:15:15.340

```
 static void Main()
    {
        var list = new List<meter_reading>
                       {
                           new meter_reading {Date = new DateTime(2000, 2, 15), T1 = 2, T2 = 3},
                           new meter_reading {Date = new DateTime(2000, 2, 10), T1 = 4, T2 = 5},
                           new meter_reading {Date = new DateTime(2000, 3, 15), T1 = 2, T2 = 3},
                           new meter_reading {Date = new DateTime(2000, 3, 15), T1 = 5, T2 = 4}
                       };
            var sum = list
            .GroupBy(x => GetFirstDayInMonth(x.Date))
            .Select(item => new meter_reading
                                {
                                    Date = item.Key,
                                    T1 = item.Sum(x => x.T1),
                                    T2 = item.Sum(x => x.T2),
                                }).ToList();
    }

    private static DateTime GetFirstDayInMonth(DateTime dateTime)
    {
        return new DateTime(dateTime.Date.Year, dateTime.Date.Month, 1);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-31T07:19:20.840

```
query.OrderBy(o => o.OrderDate)
                .GroupBy(o => DbFunctions.CreateDateTime(o.OrderDate.Year, o.OrderDate.Month, 1, 0, 0, 0))
                       .Select(group => new DateIncomeDto { Date = group.Key.Value, Income = group.Sum(item => item.PayFee ?? 0) }); 
```

它对我有用！

# python - 字符串中匹配词的 SgmlLinkExtractor 和正则表达式

> ID：11574477
> 
> 赞同：0
> 
> 时间：2012-07-20T07:06:14.907
> 
> 标签：python, regex, scrapy

我在 scrapy 中使用 SgmlLinkExtractor 功能来解析特定的 url。

我重写了 start_requests 函数来抓取动态 url。

# 这看起来像：

start_requests(self): ..... yield Requests(url.strip(), callbackA)

回调 A 现在什么都不做。

我还为 SgmlLinkExtractor 实现了 process_value，但它从未调用过。

# 这是我正在使用的规则：

rules = [Rule(SgmlLinkExtractor(allow=()), callback=callbackB, follow=True),]

再次回调B 从未调用过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:32:37.063

如果您的回调在您的蜘蛛中声明，那么它们将没有全局范围，您需要将它们引用为您的类的范围**`self.`**：

```
rules = [
  Rule(SgmlLinkExtractor(), callback=self.callbackB, follow=True),
] 
```

# objective-c - Objective-C 中的 instanceRespondToSelector 和 respondsToSelector 有什么区别？

> ID：11574478
> 
> 赞同：16
> 
> 时间：2012-07-20T07:06:20.680
> 
> 标签：objective-c

我自己观察到的唯一区别是`respondsToSelector`接收器可以是类或实例，而`instancesRespondToSelector`只能有一个类接收器。但是，还有什么让它们与众不同？两者之间是否存在性能问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-20T07:53:39.293

在引擎盖下，`-[NSObject respondsToSelector:]`是这样实现的：

```
- (BOOL)respondsToSelector:(SEL)aSelector {
    return class_respondsToSelector([self class], aSelector);
} 
```

并`+[Class instancesRespondToSelector:]`像这样实现：

```
+ (BOOL)instancesRespondToSelector:(SEL)aSelector {
    return class_respondsToSelector(self, aSelector);
} 
```

（我在 CoreFoundation 上使用[Hopper来解决这个问题。）](http://www.hopperapp.com/)

所以，基本没有区别。但是，您可以`respondsToSelector:`在自己的类中覆盖以在每个实例的基础上返回 YES 或 NO（`NSProxy`这样做）。你不能用`instancesRespondToSelector:`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-20T07:23:53.750

一个区别是`respondsToSelector`不能告诉你一个实例是否从它的超类继承了一个方法，所以如果你想做一些`[super respondsToSelector:_cmd];`它不起作用的事情，你需要`[[self superclass] instancesRespondToSelector:_cmd];`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T07:54:12.810

`respondsToSelector:`是一个*实例*方法，它确定一个对象（可以是类的实例*或*类对象）是否响应选择器。当你传递一个实例时，你正在测试一个实例方法，当你传递一个类对象时，你正在测试一个类方法。

`instancesRespondToSelector:`是一个*类*方法，并确定类的实例是否响应选择器。它允许测试给定类的实例方法，*而无需*该类的实例。

# c - 为程序的特定部分添加颜色 C 而不是 C++

> ID：11574479
> 
> 赞同：1
> 
> 时间：2012-07-20T07:06:22.770
> 
> 标签：c

有没有办法做到这一点？我目前正在使用和功能系统（颜色）；但这会改变整个程序的字体和背景颜色，我怎样才能只更改特定部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:24:30.660

您可以使用[VT100 转义码](http://wiki.bash-hackers.org/scripting/terminalcodes)为文本输出添加颜色。然后你不需要任何外部库或程序。

例子：

```
printf("This text is \x1b[31mred \x1b[32mgreen \x1b[0mnormal.\n"); 
```

**编辑：**转义码在 Windows 命令提示符下不起作用，您必须使用诸如[`SetConsoleTextAttribute`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686047%28v=vs.85%29.aspx).

这是一个显示如何使用它的示例：

```
#include <windows.h>
#include <stdio.h>

int main()
{
    HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);

    CONSOLE_SCREEN_BUFFER_INFO ConsoleInfo;
    GetConsoleScreenBufferInfo(hConsole, &ConsoleInfo);
    int originalAttrs = ConsoleInfo.wAttributes;

    printf("This text is ");
    SetConsoleTextAttribute(hConsole, FOREGROUND_RED);
    printf("red ");
    SetConsoleTextAttribute(hConsole, FOREGROUND_GREEN);
    printf("green ");
    SetConsoleTextAttribute(hConsole, originalAttrs);
    printf("normal\n");

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:09:11.720

当然有。[libcaca](http://caca.zoy.org/wiki/libcaca)是一个广泛支持的基于文本的图形库，也许你会发现它很有用。

# objective-c - 目标c浮点数转换

> ID：11574482
> 
> 赞同：1
> 
> 时间：2012-07-20T07:06:30.833
> 
> 标签：objective-c, floating-point, numbers

```
 float f2,f1 = 123.125; 
```

他们之间有什么不同？

```
 float f1 = 123.125,f2; 
```

如果我将代码编写为

```
float f1,f2 = 123.125 
```

该程序将有不同的结果

这是完整的程序

```
 float f2,f1 = 123.125;
    //float f1 = 123.125,f2;
    int i1,i2 = -150;

    i1 = f1; //floating to integer 
    NSLog(@"%f assigned to an int produces %i",f1,i1);

    f1 = i2; //integer to floating
    NSLog(@"%i assigned to a float produces %f",i2,f1);

    f1 = i2/100; //integer divided by integer
    NSLog(@"%i divied by 100 prouces %f",i2,f1);

    f2= i2/100.0; //integer divided by a float
    NSLog(@"%i divied by 100.0 produces %f",i2,f2);

    f2= (float)i2 /100; // type cast operator
    NSLog(@"(float))%i divided by 100 produces %f",i2,f2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:27:06.673

```
 float f2,f1 = 123.125;  // here you leave f2 uninitialized and f1 is initialized

  float f1 = 123.125,f2;  // here you leave f2 uninitialized and f1 is initialized

  float f1,f2 = 123.125;  // here you leave f1 uninitialized and f2 is initialized 
```

如果你想初始化两个变量，你需要做

```
 float f1 = 123.125f, f2 = 123.125f; 
```

最好你这样写（为了可读性）

```
 float f1 = 123.125f;
  float f2 = 123.125f; 
```

注意“f”后缀，它表示它是一个浮点值而不是双精度值。

你也可以做一个定义

```
#define INITVALUE 123.125f

float f1 = INITVALUE;
float f2 = INITVALUE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:10:23.643

如果要初始化具有相同值的两个变量，请使用以下语法：

```
float f2 = f1 = 123.125f; 
```

您正在使用的代码正在初始化一个变量而不是另一个，因此您看到的行为。

# iphone - 选择任何单元格值时如何显示复选标记

> ID：11574485
> 
> 赞同：0
> 
> 时间：2012-07-20T07:06:37.313
> 
> 标签：iphone, xcode, uitableview

我有在表格视图中显示的答案我希望如果用户选择任何单元格应该得到带有文本侧的复选标记图像并且如果平均时间他从第一个单元格复选标记中选择另一个单元格应该被删除并显示在选定的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:19:03.517

首先向您的 viewController .h 文件添加一个属性

```
@property (nonatomic, strong) NSIndexPath *theSelectedIndexPath; 
```

并在您的 .m 文件中合成

```
@synthesize theSelectedIndexPath = _theSelectedIndexPath; 
```

然后在你`cellForRowAtIndexPath`做

```
if (indexPath.row == self.theSelectedIndexPath.row) {
   cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else { 
   cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

别忘了更新`theSelectedIndexPath`in `didSelectRowAtIndexPath`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    self.theSelectedIndexPath = indexPath;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:10:44.690

在 .h 文件中创建变量

```
UItableviewCell *selectedCell; 
```

在 didSelectRow 方法中，从保存的单元格中删除选择并将新单元格保存为选定的：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
    if (selectedCell) {
        selectedCell.accessoryType = UITableViewCellAccessoryNone;
    }
    UItableviewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if(cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        cell.accessoryType = UITableViewCellAccessoryNone;
    else {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    selectedCell = cell;
} 
```

为了防止可重复使用的单元格出现问题，您可以在 .h 文件中创建 NSIndexPath 变量而不是 UITableViewCell ：

```
NSIndexPath *selectedCellIndexPath; 
```

并更改 didSelectRow 方法：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
    [tableView scrollToRowAtIndexPath:selectedCellIndexPath atScrollPosition:UITableViewScrollPositionMiddle animated:NO];
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:selectedCellIndexPath];
    selectedCell.accessoryType = UITableViewCellAccessoryNone;
    UItableviewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if(cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        cell.accessoryType = UITableViewCellAccessoryNone;
    else {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    selectedCellIndexPath = indexPath;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:17:53.500

1.  声明一个全局 int`selectedRow`
2.  在您`tableviewDidSelectRow`设置的 int 到选定的行。
3.  也在`tableviewDidSelectRow`制作中`[tableView reloadData];`
4.  在您`tableView:(UITableView *)tableView cellForRowAtIndexPath`执行以下操作：

    ```
    if (indexPath.row == selectedRow)
        cell.accessoryView = checkMark;
    else
        cell.accessoryView = nil; 
    ```

其中“checkMark”是您的复选标记图像视图的出口（我使用自定义复选标记）

多田！

# android - Android、相机和“实际”支持的图像尺寸

> ID：11574486
> 
> 赞同：0
> 
> 时间：2012-07-20T07:06:38.993
> 
> 标签：android, image, camera, resolutions

好的，制作一个相机应用程序，其中一部分是选择 img 大小，使用以下代码完成：

```
Camera.Parameters parameters = camera.getParameters();
List<Camera.Size> sizes = parameters.getSupportedPictureSizes(); 
```

我得到了一个很好的列表，其中包含受支持的尺寸。两个最差的分辨率是 640x480 和 320x240。但是当我将分辨率设置为 320x240 时，会使用 640x480！

我使用以下代码设置分辨率：

```
private void setImgSize() 
{
    Log.d(TAG, "+setImgSize");
    Camera.Parameters params = camera.getParameters();
    params.setPictureSize(WIDTH, HEIGHT);
    camera.setParameters(params);

    Toast.makeText(getApplicationContext(), 
        "Resolution set to "+WIDTH+"x"+HEIGHT, 
        Toast.LENGTH_SHORT).show();
} 
```

WIDTH 和 HEIGHT 是从 settingsactivity 返回的值，我得到一个不错的 Toast，告诉我分辨率设置为 320x240。但是当图像被捕获时，分辨率是 640x480！好的，测试2。让我们将分辨率设置为 640x480。Toast 告诉我们分辨率是 640x480。凉爽的。让我们捕捉一些图像，它们的分辨率是定义的 640x480！

那么，我在这里做错了什么和/或我不明白什么？！？！我获得了受支持的图像尺寸，并且至少其中一个不受支持。有什么方法可以检查是否**真的**支持所选的分辨率？

我使用的设备是 Android 版本 2.3.5 的华为 Ideos X5 / U8800。

感谢帮助 ：）

PS 在有人问我为什么要使用这么糟糕的分辨率之前，这就是为什么：这个应用程序将以 N 秒的间隔捕获图像。如果应用程序正在运行，比方说，**很**长时间，我可能会用完大图像的 sd 卡中的空间:)

**编辑**：更改了 setImgSize() 方法，现在看起来像这样：

```
private void setImgSize() {
    Log.d(TAG, "+setImgSize");
    Camera.Parameters params = camera.getParameters();
    params.setPictureSize(WIDTH, HEIGHT);
    // set jpeg quality to best
    params.setJpegQuality(100);

    camera.setParameters(params);

    params = null;
    params = camera.getParameters();
    Camera.Size size = params.getPictureSize();
    Toast.makeText(getApplicationContext(), 
                "Resolution set to "+size.width+"x"+size.height,                
                Toast.LENGTH_SHORT).show();
} 
```

我设置了分辨率（320x240），当我从重新读取参数中读取它时，结果是 320x240，但是当图像被捕获时，分辨率是 640x480 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:59:45.523

我认为您应该致电了解`getSupportedPictureSizes()`支持`Camera.Parameters`哪些图像尺寸。

然后您可以选择最接近您实际想要设置的支持的图像尺寸。

# java - 最后在stackoverflow之前在java中使用main（）中的递归循环

> ID：11574493
> 
> 赞同：2
> 
> 时间：2012-07-20T07:07:01.337
> 
> 标签：java, recursion, try-catch, control-flow

```
class exception1 {
    public static void main(String s[]) {
        String v[] = new String[2];
        try {
            main(v);
            System.out.println(5 / 0);

        }
        catch (Exception e) // or (ArithmeticException e)
        {
            System.out.println(e); // Java.lang.ArithmeticException: / by zero

        }
        finally {
            System.out.println("AAAA");
        }
        System.out.println("after finally normal execution");
    }
} 
```

当我运行这段代码时，我会得到无数的 AAAA，直到发生 stackoverflow 错误。我的问题是 main(v); 再次调用main，但最终运行:(？控制流有点出乎我的良心。终于如此嚣张以至于它甚至不关心main？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:09:55.110

首先，注意那`StackOverflowError`是 an`Error`而不是 an `Exception`，所以它不会被你的`catch (Exception e)`.

抛出时`StackOverflowError`，该异常将在调用堆栈中向上传播。每次堆栈帧异常返回时，都会执行它的 finally 子句。

（`0/5`您可能已经发现，该表达式不可访问。）

这是发生了什么的图片：

```
 Output
main()
   main()
       main()
          ...
             main()

                 throw Stack-overflow!
                 Print AAAA before returning exceptionally     AAAA

             rethrow Stack-overflow!
             Print AAAA before returning exceptionally         AAAA

         ...                                                   ...

      rethrow Stack-overflow!
      Print AAAA before returning exceptionally                AAAA

   rethrow Stack-overflow!
   Print AAAA before returning exceptionally                   AAAA

Uncaught stack-overflow error, print stacktrace.               Exception dump. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:24:31.130

另一个带有程序解释的答案..

```
class TryFinallyDemo
{
    static int counter;

    public static void main(String s[])
    {
        int localCounter=0;
        String v[] = new String[2]; 

        try{ 
            counter++;
            localCounter = counter;
            main(v); 
            System.out.println(5/0);                                     
        } 

        catch(Exception e)  // or (ArithmeticException e) 
        {   
            System.out.println(e); // Java.lang.ArithmeticException: / by zero 
        }                                      

        finally{ System.out.println("AAAA.. Local Counter is " + localCounter);  }      

        System.out.println("after finally normal execution");  

    } 
} 
```

这个例子清楚地展示了一旦​​抛出 StackOverflow 错误，堆栈是如何从下到上回调的。

输出片段：

```
AAAA.. Local Counter is 47
AAAA.. Local Counter is 46
AAAA.. Local Counter is 45
AAAA.. Local Counter is 44
AAAA.. Local Counter is 43
AAAA.. Local Counter is 42
AAAA.. Local Counter is 41
AAAA.. Local Counter is 40
AAAA.. Local Counter is 39
AAAA.. Local Counter is 38
AAAA.. Local Counter is 37
AAAA.. Local Counter is 36
AAAA.. Local Counter is 35
AAAA.. Local Counter is 34
AAAA.. Local Counter is 33
AAAA.. Local Counter is 32
AAAA.. Local Counter is 31
AAAA.. Local Counter is 30
AAAA.. Local Counter is 29
AAAA.. Local Counter is 28
AAAA.. Local Counter is 27
AAAA.. Local Counter is 26
AAAA.. Local Counter is 25
AAAA.. Local Counter is 24
AAAA.. Local Counter is 23
AAAA.. Local Counter is 22
AAAA.. Local Counter is 21
AAAA.. Local Counter is 20
AAAA.. Local Counter is 19
AAAA.. Local Counter is 18
AAAA.. Local Counter is 17
AAAA.. Local Counter is 16
AAAA.. Local Counter is 15
AAAA.. Local Counter is 14
AAAA.. Local Counter is 13
AAAA.. Local Counter is 12
AAAA.. Local Counter is 11
AAAA.. Local Counter is 10
AAAA.. Local Counter is 9
AAAA.. Local Counter is 8
AAAA.. Local Counter is 7
AAAA.. Local Counter is 6
AAAA.. Local Counter is 5
AAAA.. Local Counter is 4
AAAA.. Local Counter is 3
AAAA.. Local Counter is 2
AAAA.. Local Counter is 1
Exception in thread "main" java.lang.StackOverflowError
    at java.lang.String.indexOf(String.java:1395) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T07:29:05.740

我调试了程序，这是流程：

> main()-> main()-> main-> ........得到了 stackoverflow 异常 -> finally -> finally -> finally ->..... 控制 stackoverflow 异常从 main 转移到主线程() 方法和主线程处理stackoverflow异常

**输出**

```
AAAA
AAAA
AAAA
AAAA
....
AAAA
AAAA
AAAA
Exception in thread "main" java.lang.StackOverflowError
    at java.util.concurrent.locks.AbstractOwnableSynchronizer.<init>(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.<init>(Unknown Source)
    at java.util.concurrent.locks.ReentrantLock$Sync.<init>(Unknown Source)
    at java.util.concurrent.locks.ReentrantLock$NonfairSync.<init>(Unknown Source)
    at java.util.concurrent.locks.ReentrantLock.<init>(Unknown Source)
    at java.util.concurrent.ConcurrentHashMap$Segment.<init>(Unknown Source)
    at java.util.concurrent.ConcurrentHashMap.ensureSegment(Unknown Source)
    at java.util.concurrent.ConcurrentHashMap.putIfAbsent(Unknown Source)
    at java.lang.ClassLoader.getClassLoadingLock(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at test.exception1.main(Exception1.java:17)
    at test.exception1.main(Exception1.java:7)
    at test.exception1.main(Exception1.java:7)
    ....
    at test.exception1.main(Exception1.java:7)
    at test.exception1.main(Exception1.java:7)
    at test.exception1.main(Exception1.java:7) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T07:10:10.430

`main(v)`在到达`5/0`操作之前调用，因此不会引发异常 - 发生无限循环。

# ruby-on-rails - 如何做出将接收参数并为其编写正确路由的操作？

> ID：11574494
> 
> 赞同：0
> 
> 时间：2012-07-20T07:07:05.997
> 
> 标签：ruby-on-rails, controller, action

我需要传递 user_id，不是登录用户，而是视图中的 user_id。

我正在写管理部分。

我正在使用用户电子邮件发出发布请求并重定向到适当的页面。所以我想让路线类似于：

```
 /:user_id/pay 
```

为适当的用户调用付费操作。

在我看来，我想显示电子邮件和指向此操作的链接：

```
<% @users.each do |user| %>
 <li>
  <%= user.email %>
  <%= link_to "Pay", some_controller_pay(user.id) %>
 </li> 
```

**编辑**

```
 def pay
    require 'httpclient'
    require 'xmlsimple'
    clnt = HTTPClient.new
    user = User.find(params[:user_id])
    credentials = {
        'USER' => 'payer_1342623102_biz_api1.gmail.com',
       'PWD' => '1342623141',
       'SIGNATURE' => 'Ay2zwWYEoiRoHTTVv365EK8U1lNzAESedJw09MPnj0SEIENMKd6jvnKL '
     }

    header =  {"X-PAYPAL-SECURITY-USERID" => "payer_1342623102_biz_api1.gmail.com",
                   "X-PAYPAL-SECURITY-PASSWORD" => "1342623141",
                   "X-PAYPAL-SECURITY-SIGNATURE" => "Ay2zwWYEoiRoHTTVv365EK8U1lNzAESedJw09MPnj0SEIENMKd6jvnKL ",
                   "X-PAYPAL-REQUEST-DATA-FORMAT" => "NV",
                   "X-PAYPAL-RESPONSE-DATA-FORMAT" => "XML",
                   "X-PAYPAL-APPLICATION-ID" =>  "APP-80W284485P519543T"
                    }
    data = {"actionType" => "PAY",
               "receiverList.receiver(0).email"=> user.email,
               "receiverList.receiver(0).amount" => "10",
               "currencyCode" => "USD",
               "cancelUrl" => root_path,
               "returnUrl" => root_path,
               "requestEnvelope.errorLanguage" => "en_US"}
    uri = "https://svcs.sandbox.paypal.com/AdaptivePayments/Pay"
    res = clnt.post(uri, data, header)
    @xml = XmlSimple.xml_in(res.content)
    @payKey = @xml["payKey"].to_s()
    @payKey = @payKey.tr("[]", "")
    @payKey = @payKey[1..20]
    redirect_to "https://sandbox.paypal.com/webscr?cmd=_ap-payment&paykey=#{@payKey}" 
```

结束 **PayPal 说发生了一些错误。**

**我尝试检查变量，所以我应该考虑：**

 **```
 <%= @xml%>
 <%= payKey%> 
```** 

**但我不能工作，我怎么能检查他们？**

**在开发日志中：**

 **```
 Redirected to https://sandbox.paypal.com/webscr?cmd=_ap-payment&paykey=
  Completed 302 Found in 1193ms (ActiveRecord: 1.0ms) 
```** 

**所以它不插入链接，是吗？我如何获得所有响应信息**

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:39:08.900

由于您已经有一个`User`模型，您可以添加`pay`另一个[RESTful 操作](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)：

```
resources :users do
  member do
    get 'pay' # or post/put, whatever is appropriate
  end
end 
```

这会自动设置一个命名路由`pay_user`：

```
pay_user GET    /users/:id/pay(.:format)  users#pay 
```

包括一个`pay_user_path`帮助你的意见：

```
<%= link_to "Pay", pay_user_path(user.id) %> 
```

在您的`UserController`this 中，它与任何其他操作一样工作：

```
def pay
  @user = User.find(params[:id])
  # do something with @user
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:30:27.520

路线.rb

```
match "/:user_id/pay" => "some_controller#pay", :as => "some_controller_pay" 
```

some_controller.rb

```
def pay
  user = User.find(params[:user_id])
  .... 
```

# android - 带有图像的按钮在水平线性布局中不对齐

> ID：11574496
> 
> 赞同：0
> 
> 时间：2012-07-20T07:07:09.917
> 
> 标签：android, android-linearlayout, alignment

我正在创建一个自定义数字选择器，当我将它设置为垂直时，一切看起来都很好，但是当我将它设置为水平时，元素不对齐。

按钮上有一些文字，然后我添加了一张图片。
没有加号和减号按钮：

![在此处输入图像描述](../Images/8e92dad7498ea3211e5420d5ba02a830.png)

带按钮

![在此处输入图像描述](../Images/8316f96b1aabdfc453dde3ecb609994d.png)

这是我的代码：

```
private final int ELEMENT_HEIGHT = 50;
private final int ELEMENT_WIDTH = 65; 
```

......

```
public NumberPicker(Context context, int min, int max,int orientation) {
    super(context);

this.setLayoutParams(new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    LayoutParams elementParams = new LinearLayout.LayoutParams(
            ELEMENT_WIDTH, ELEMENT_HEIGHT);

    // init the individual elements
    initDecrementButton(context);
    initValueEditText(context);
    initIncrementButton(context);

    this.setOrientation(orientation);

    if (orientation == VERTICAL) {
        addView(increment, elementParams);
        addView(valueText, elementParams);
        addView(decrement, elementParams);
    } else {
        addView(decrement, elementParams);
        addView(valueText, elementParams);
        addView(increment, elementParams);
    }
}

private void initIncrementButton(Context context) {
    increment = new Button(context);
    increment.setTextSize(15);
    increment.setText("Max: " + getMaximum());
    increment.setCompoundDrawablesWithIntrinsicBounds(null,null , null, context.getResources().getDrawable(R.drawable.plus)); 

 }

 private void initDecrementButton(Context context) {
    decrement = new Button(context);
    decrement.setTextSize(15);
    decrement.setText("Min: " + getMinimum());
    decrement.setCompoundDrawablesWithIntrinsicBounds(null, context.getResources().getDrawable(R.drawable.minus),null ,null); 

 } 
```

我怎样才能解决这个问题？谢谢 ：）

//编辑

我已经这样修复它：

```
if (orientation == VERTICAL) {
        elementParams.gravity = Gravity.CENTER_HORIZONTAL;
        addView(increment, elementParams);
        addView(valueText, elementParams);
        addView(decrement, elementParams);
    } else {
        elementParams.gravity = Gravity.CENTER_VERTICAL;
        addView(decrement, elementParams);
        addView(valueText, elementParams);
        addView(increment, elementParams);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:20:07.057

在初始化 LayoutParams 后试试这个：

```
LayoutParams elementParams = new LinearLayout.LayoutParams(ELEMENT_WIDTH, ELEMENT_HEIGHT);
elementParams.gravity = Gravity.CENTER_VERTICAL; 
```

然后，就像现在一样绑定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:10:26.343

尝试使用 android:layout_gravity="center_vertical" 设置您的元素。

# android - 在Android中结合GridView和TabView

> ID：11574499
> 
> 赞同：0
> 
> 时间：2012-07-20T07:07:31.040
> 
> 标签：android, android-layout, android-widget

底部有一个选项卡视图，默认情况下，我正在显示具有网格视图的活动。但我无法获得 gridview 。这是我的以下代码

活动布局

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

 <ImageView android:id="@+id/image" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:background="@drawable/clubchart"/>

<GridView android:id="@+id/grid" 
          android:layout_width="wrap_content" 
          android:layout_height="wrap_content" />

</LinearLayout> 
```

而在`Activity`

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.photos_layout);
    gridView = (GridView) findViewById(R.id.grid);
    MyAdapter adapter = new MyAdapter(this);
    gridView.setAdapter(adapter);
} 
```

# visual-studio-2010 - Azure VS2010 打包错误 - “访问路径 'foo.dll' 被拒绝”

> ID：11574502
> 
> 赞同：1
> 
> 时间：2012-07-20T07:07:55.480
> 
> 标签：visual-studio-2010, azure

打包我的 VS 2010 Azure 云项目时，在输出窗口中出现以下错误：

C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Windows Azure Tools\1.6\Microsoft.WindowsAzure.targets(2886,5): 错误：访问路径 'C:\Users\rpotter\ AppData\Local\Temp\3rbnncvy.lcl\roles\Bus\approot\Foo.dll' 被拒绝。

云项目构建良好，但在打包阶段失败。这是在 Windows Server 2008 R2 x64、VS2010 x86、Azure SDK 1.7 上运行的。我最近更改了一些命名空间和文件夹结构，但是随着解决方案的构建正常，我认为这无关紧要。我从头开始创建了一个新的云项目，但仍然遇到错误。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:07:55.480

好的，我找到了解决方案。其中一个 C# 库项目（不是 web/worker 角色）在 .csproj 中有对旧文件夹结构的引用。这只是在打包时而不是编译时表现出来的。结案。

# plone - 移动 + 重命名内容项到 Plone 中的不同文件夹

> ID：11574507
> 
> 赞同：2
> 
> 时间：2012-07-20T07:08:13.453
> 
> 标签：plone

我们想在单个脚本操作中将对象移动和重命名到 Plone 中的不同文件夹。

*   是否有一个 API'sh 调用可以完成此操作？

*   或者：应该调用 cut + paste + manage_renameObjects() 还是有更简单的调用链？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T10:08:23.693

你应该剪切 + 粘贴 + `manage_renameObjects()`。这是您唯一可用的 API。:-)

我经常使用辅助方法来完成这项工作：

```
from Acquisition import aq_parent, aq_inner

def move(id_=None, ob=None, parent=None, dest=None, newid=None):
    # Either provide id and parent, or ob.
    if id_ is None:
        id_ = ob.getId()
    if parent is None:
        parent =  aq_parent(aq_inner(ob))
    clipboard = parent.manage_cutObjects([id_])
    result = dest.manage_pasteObjects(clipboard)
    if newid is not None:
        dest.manage_renameObject(result['new_id'], newid) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-24T10:54:36.513

Martijns 的回答当时是正确的，但现在 Plone 有一个 API 提供了所需的方法：

[http://docs.plone.org/external/plone.api/docs/content.html#move-content](http://docs.plone.org/external/plone.api/docs/content.html#move-content)

# facebook-graph-api - Facebook 测试用户 API 登录 url 是否随机工作

> ID：11574514
> 
> 赞同：1
> 
> 时间：2012-07-20T07:08:34.830
> 
> 标签：facebook-graph-api, browser, command-line-arguments, facebook-test-users

我编写了一个桌面应用程序，它保存 FB 应用程序数据并列出测试用户。我想打开一个带有新配置文件的浏览器（浏览器配置文件，而不是 FB，因为 PHP facebook API 中的会话问题 - 我不想在我的域上的应用程序会话中）。

但问题是，facebook 登录 URL 是否正常工作。我试过 Firefox 和 Chrome。

Firefox 带有`-no-remote`, `-p "RANDOM_PROFILE"`, 并`-CreateProfile`在执行之前执行以使用该配置文件打开 url。

Chrome with `--profile-directory="RANDOM_DIR"`（之前创建的目录）。

管理浏览器配置文件在两种浏览器中都很好用。但在大多数情况下，使用 Facebook 测试用户登录 URL 打开浏览器，只会将我重定向到主页。

另外，我创建了一些 PHP 页面：

*   一个在一段时间后通过 window.location 重定向到登录 URL
*   一个在睡眠后通过 header('Location: ...') 重定向到登录 url
*   一个带有`<a href...>`标签的登录网址。

第三个选项是唯一一个有效的选项，但它在大约 20% 的情况下有效（有时在该链接上单击多次并在新选项卡中多次打开有效）

如何使用 facebook 登录 URL 启动新的浏览器实例，其中登录工作正常？

编辑：我的登录 URL 总是在登录尝试前不久从 FB 获取，因此它们不会过期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:40:18.840

我终于得到了这个。

问题是，在使用测试用户登录 URL 之前，必须至少加载一次[http://facebook.com （可能是为了设置一些 cookie）。](http://facebook.com)

所以，我使用脚本在 iframe 中打开 Facebook，然后在一段时间后重定向到登录 url：

```
<script>
setTimeout(function(){
window.location = "<?php echo $_GET['url']; ?>";
} , 2000 );
</script>
<iframe src="http://facebook.com/"></iframe> 
```

请注意，iframe 上的 facebook 将仅加载为 head+body 空白页面，但这是有效的。

然后，您可以使用此脚本通过将其传递给 Chrome 命令行来登录测试用户，并将 url 编码的 Test-User-Login-URL 作为 'url' GET 参数。

为 chrome 配置文件使用新创建的目录，以避免在您的应用程序域上获得旧会话。

另外，我建议使用参数：`--start-maximized`, `--no-default-browser-check`,`--no-first-run`

**更新：**请注意，使用此方法请求的登录 URL 仅适用一次（可能还有任何其他方法 - 未检查）

# date - 如何按数据范围查询 Cassandra 中以 TimeUUID 为第一个组件的复合列？

> ID：11574515
> 
> 赞同：2
> 
> 时间：2012-07-20T07:08:46.540
> 
> 标签：date, dynamic, cassandra, composite

1) 插入一列

```
DynamicComposite dc = new DynamicComposite();
dc.add(0,TimeUUIDUtils.getUniqueTimeUUIDinMillis()); 
```

2) 尝试使用 SliceQuery 查询给定时间范围之间的列

```
UUID afterUUID = TimeUUID.getTimeUUID((new Date (2012, 7, 17, 24, 0).getTime())); 
    UUID beforeUUID = TimeUUID.getTimeUUID((new Date (2012, 7, 20, 24, 0).getTime())); 
    startRange.add(0, afterUUID);
    endRange.addComponent(0,beforeUUID, UUIDSerializer.get(), "TimeUUIDType", AbstractComposite.ComponentEquality.GREATER_THAN_EQUAL); 
```

在 7/19 上执行代码，因此该列应该匹配但什么也没有。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-02T14:01:45.427

Cassandra 也使用 UTC `System.currentTimeInMillis()`。使用 UTC 时间查询时，您的查询应该有效。

# performance - Azure Web 角色和 SQL Azure 之间的延迟和应用程序性能

> ID：11574516
> 
> 赞同：9
> 
> 时间：2012-07-20T07:08:52.677
> 
> 标签：performance, azure, azure-sql-database, latency

**Azure Web 角色**和**Sql Azure 延迟**

**嗨，只是想知道Web 工作者角色**和**SQL Azure**之间存在延迟和超时 ，有时会发生超时（这些不是随机的） 100 次 ping 的 40% 没有 0 毫秒超时

如果 Web 工作者角色和 SQL Azure 在同一个数据中心中 为什么在使用内部网络进行通信时会出现超时

请参考随附的屏幕截图：

![在此处输入图像描述](../Images/2a67bca3d4919e4db131a93557feafee.png)

在这个网络工作者角色上运行的应用程序有一个神秘的性能起伏......如果可能是由于各种原因，但我需要知道的是这些关于延迟和超时的统计数据是否会影响 Web 应用程序的性能？

谢谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-27T12:42:29.233

我在另一个线程上发布了这个，但它很旧并且已经关闭。我认为它突出了你的一些问题。

我一直在尝试将我们的业务应用程序迁移到云端。考虑到我们的现场服务器已有 8 年以上的历史，Azure 服务应该会有显着的改进。然而，当我们测试我们的应用程序并对云和现场进行基准测试时，我们注意到云中的延迟比现场（8 年以上的旧服务器）总体上多出近 3 倍，而当您使用现代设备比较它们时，延迟多出 20 倍。我们的应用程序是一个 asp.net 应用程序，数据库大小约为 11 GB。

**SQL Azure 和性能**

1.  切勿在云中使用池连接。如果这样做，您的查询将左右和居中放置。而是打开一个连接并保持打开状态，直到完成。
2.  使用缓存。如果您希望完成这项工作，您别无选择。我在云中有一个成功的站点，但我不得不使用缓存来获得任何合理的性能。
3.  意识到这不是你的错！Azure 团队比你更需要解决他们的问题。我们有一个精简的应用程序，我们已经升级、调整和优化了 10 年，如果我们不能让它工作，那么你也不会。

我喜欢 Azure 作为一个概念。我喜欢这些选项。我喜欢可扩展性，但我不喜欢性能。我希望微软对此给予更多关注并做出一些改变，因为在这个问题得到解决之前，任何人都不应该将他们的业务转移到那里。

**测试**

测试是通过运行一系列访问完全相同的数据的查询来完成的，并通过一个自定义函数在代码中完成，该函数测量从创建对象到处理对象的时间（强制写入数据库）的响应时间。该对象包装了正在测试的代码。

没有为测试启用缓存，但是我确实允许代码和数据库之前执行一次并获得最佳结果，以便数据库服务器有机会优化查询，因此 Web 服务器可以正确加载程序集。

测试 1 - 同一台好机器上的 Web 和 DB

*   四核 2.5GHz，8GB Ram @ 800Mhz，1300 FSB 和 SQL 2005
*   产生**290 毫秒**的响应时间。

测试 2 - 同一台机器上的 Web 和 DB

*   2 Proc 上的 SQL 和 Web（双核 3.0GHz），16GB Ram @ 200Mhz，200 FSB 和 SQL 2005 真正旧的 IBM 服务器。
*   Web 和 SQL 都是本地的
*   产生**656 毫秒**的响应时间。

测试 3 - Web 与 DB 分离

*   SQL on 2 Proc（双核 3.0GHz），16GB Ram @ 200Mhz，200 FSB 和 SQL 2005
*   Web on 1 Proc 双核 3.0GHz，8GB Ram @ 200Mhz，200 FSB
*   真正古老的 IBM 服务器。
*   一台机器上的 Web 和另一台机器上的 SQL。
*   产生**796 毫秒**的响应时间。

测试 4 - Azure

*   Azure 上的中型 VM
*   SQL Azure 数据库
*   产生**3,174 毫秒**的响应时间。

**结论**

*   从一台服务器场景转移到两台服务器场景时，我的延迟差异为**140 ms**。
*   从该场景迁移到 Azure 需要**2,518 毫秒**。这比我使用 8 年的机器性能**差 17.98 倍。**

**在他们解决此问题并花时间让他们知道这对您来说也是一个问题之前，请不要这样做。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T07:46:29.973

首先，您需要知道 Windows Azure SQL 数据库是作为服务提供的多租户、高密度 RDBMS。这意味着，可能有数百个客户使用单个服务器。

我还建议您了解[服务的 SLA](http://www.windowsazure.com/en-us/support/legal/sla/)，尤其是[Windows Azure SQL 数据库](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=8323)。没有人声称会有 0 毫秒的延迟。在 Windows Azure SQL 数据库中还有“[瞬态条件”之类的东西。](http://windowsazurecat.com/2010/10/best-practices-for-handling-transient-conditions-in-sql-azure-client-applications/)

推荐阅读[Windows Azure SQL 数据库性能和弹性指南](http://social.technet.microsoft.com/wiki/contents/articles/3507.windows-azure-sql-database-performance-and-elasticity-guide.aspx)。

至于web应用性能，看了Performance and elastic guide之后，我不认为偶尔出现的200ms是核心瓶颈。

**第一条评论后更新**

在共享的环境中，您总是会起起落落。您还应该期望查询执行时间上下变化。在那种环境中，这是不可避免的，你必须为之设计和生活。在 Windows Azure SQL 数据库的情况下，这里没有魔杖，也没有为您（我们）提供的专用服务器。如果您认为您的应用程序需要更可靠的 SQL Server 服务，您可以尝试使用 Windows Azure 虚拟机并自己创建一个 SQL Server 集群。我猜想（这只是一个猜测）你的云服务和你的虚拟机之间的通信，假设一切都在同一个可用性集中，将更加可预测。

**在第二条和第三条评论后更新：**

好吧，是的，您可能有许可问题（我是许可专家）。你开的票是涨跌的吗？如果是这样，您可以尝试升级它（不知道如何，但您有您的工单 ID，您还必须有指定的工程师和有关工单的电子邮件 - 回复所有该电子邮件） . 此外，当您创建工单时，必须有一份小型调查问卷来反映您的问题对业务的影响。然后必须为工单分配通常的响应时间。如果在这段时间内没有给您提供支持，您绝对可以将其升级。

**更新**

我的有趣观察是，在您的所有屏幕截图中，只有第一个数据包被延迟，然后每个连续数据包都有 0 延迟。在您提供的所有样品中。如果这是您的情况 10 次中的 10 次，那么您绝对没有任何延迟问题。我建议您在常规 ping 中使用“-t”选项发送超过 4 个数据包并观察。我建议在大约 100 个数据包时断开，然后观察结果。我不会考虑 4 个数据包样本，其中只有第一个数据包样本对**任何**性能审查都有延迟。

# php - cakephp 2.0 自定义查询分页

> ID：11574517
> 
> 赞同：0
> 
> 时间：2012-07-20T07:08:53.957
> 
> 标签：php, cakephp-2.0

我正在从事 cakephp 2.0 中的一个项目。在这里，我的模型中有一个查询。

$sql =`SELECT Ad . *,Client.name,Keyword.keyword FROM`广告`Ad INNER JOIN pages Page ON ( Ad.page_id = Page.id ) INNER JOIN keywords Keyword ON ( Page.keyword_id = Keyword.id ) INNER JOIN clients Client ON ( Keyword.client_id = Client.id ) WHERE Ad.archived = 1`；

我想使用 cakephp 的分页模块进行分页。我查看了它的文档和谷歌的其他一些答案，但无法获得如何实现它。谁能告诉我如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:46:08.310

[此 CakePHP 文档页面](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#custom-query-pagination)将帮助您实现与您在问题中提到的相同的目标。

# oauth - 无效凭据错误-google userinfo api

> ID：11574518
> 
> 赞同：0
> 
> 时间：2012-07-20T07:08:56.407
> 
> 标签：oauth

我正在尝试通过 Google UserInfo API“https://sites.google.com/site/oauthgoog/Home/emaildisplayscope”获取用户的电子邮件地址

我正在使用有效的访问令牌，但仍然收到无效的凭证错误。我的应用正在实现 Oauth 1.0 API 是否可能需要 Oauth 2 令牌。如果是，获取用户电子邮件地址的另一种方法是什么？

这是我的代码-

```
 $('#GMAIL_BUTTON').click(function () {
    //oauth1 approach similar to twitter
    var requestUrl = "https://www.google.com/accounts/OAuthGetRequestToken";
    var authorizeUrl = "https://www.google.com/accounts/OAuthAuthorizeToken";
    var accessUrl = "https://www.google.com/accounts/OAuthGetAccessToken";
    var callbackUrl = "http://abcd.com/dfdf.php";
    var scope = "https://mail.google.com/ https://www.googleapis.com/auth/userinfo.email      https://www.googleapis.com/auth/userinfo.profile";
    var clientID = "vfdvfdvfd";
    var clientSecret = "dvdfvrevvfv-fvfdvf";
    var timestamp = Math.round(new Date().getTime() / 1000.0);
    var nonce = (new Date()).getTime();   
    var params = [];
    params["oauth_callback"] = encodeURI(callbackUrl);
    params["oauth_consumer_key"] = clientID;
    params["oauth_timestamp"] = timestamp;
    params["oauth_nonce"] = nonce;
    params["oauth_signature_method"] = "HMAC-SHA1";
    params["scope"] = scope;
    var paramString = normalizeParams(params);
    var sigBaseString = "GET&" + encodeURIComponent(requestUrl) + "&" + encodeURIComponent(paramString);
    var keyText = encodeURIComponent(clientSecret) + "&";
    var keyMaterial = Windows.Security.Cryptography.CryptographicBuffer.convertStringToBinary(keyText, Windows.Security.Cryptography.BinaryStringEncoding.Utf8);
    var macAlgorithmProvider = Windows.Security.Cryptography.Core.MacAlgorithmProvider.openAlgorithm("HMAC_SHA1");
    var key = macAlgorithmProvider.createKey(keyMaterial);
    var tbs = Windows.Security.Cryptography.CryptographicBuffer.convertStringToBinary(sigBaseString, Windows.Security.Cryptography.BinaryStringEncoding.Utf8);
    var signatureBuffer = Windows.Security.Cryptography.Core.CryptographicEngine.sign(key, tbs);
    var signature = Windows.Security.Cryptography.CryptographicBuffer.encodeToBase64String(signatureBuffer);
    paramString += "&oauth_signature=" + encodeURIComponent(signature);
    requestUrl = encodeURI(requestUrl);
    requestUrl += "?" + paramString;
    var response = sendGetRequest(requestUrl);
    //requestUrl += "?scope="+encodeURIComponent(scope);
    //var response = sendGetRequest(requestUrl, dataToPost, null);
    var keyValPairs = response.split("&");
    var oauth_token;
    var oauth_token_secret;
    for (var i = 0; i < keyValPairs.length; i++) {
        var splits = keyValPairs[i].split("=");
        switch (splits[0]) {
            case "oauth_token":
                oauth_token = splits[1];
                break;
            case "oauth_token_secret":
                oauth_token_secret = splits[1];
                break;
        }
    }

    // Send the user to authorization
    authorizeUrl += "?oauth_token=" + oauth_token;

    // document.getElementById("TwitterDebugArea").value += "\r\nNavigating to: " + twitterURL + "\r\n";
    var startURI = new Windows.Foundation.Uri(authorizeUrl);
    var endURI = new Windows.Foundation.Uri(callbackUrl);

    //authzInProgress = true;
    Windows.Security.Authentication.Web.WebAuthenticationBroker.authenticateAsync(
        Windows.Security.Authentication.Web.WebAuthenticationOptions.none, startURI, endURI)
        .done(function (result) {
            var value = result.responseData;
            var callbackPrefix = callbackUrl + "?";
            var dataPart = value.substring(callbackPrefix.length);
            var keyValPairs = dataPart.split("&");
            var authorize_token;
            var oauth_verifier;
            for (var i = 0; i < keyValPairs.length; i++) {
                var splits = keyValPairs[i].split("=");
                switch (splits[0]) {
                    case "oauth_token":
                        authorize_token = splits[1];
                        break;
                    case "oauth_verifier":
                        oauth_verifier = splits[1];
                        break;
                }
            }
           if (result.responseStatus === Windows.Security.Authentication.Web.WebAuthenticationStatus.errorHttp) {
                //document.getElementById("FacebookDebugArea").value += "Error returned: " + result.responseErrorDetail + "\r\n";
            }
            //form the header and send the verifier in the request to accesstokenurl
           var params = [];
           var timestamp = Math.round(new Date().getTime() / 1000.0);
           var nonce = (new Date()).getTime();
           params["oauth_consumer_key"] = clientID;
           params["oauth_nonce"] = nonce;
           params["oauth_signature_method"] = "HMAC-SHA1";
           params["oauth_timestamp"] = timestamp;
           params["oauth_token"] = authorize_token;
           params["oauth_verifier"] = oauth_verifier;              
           var paramString = normalizeParams(params);

           var sigBaseString = "GET&" + rfcEncoding(accessUrl) + "&" + rfcEncoding(paramString);
           var keyText = rfcEncoding(clientSecret) + "&" + rfcEncoding(oauth_token_secret);
           var keyMaterial = Windows.Security.Cryptography.CryptographicBuffer.convertStringToBinary(keyText, Windows.Security.Cryptography.BinaryStringEncoding.Utf8);
           var macAlgorithmProvider = Windows.Security.Cryptography.Core.MacAlgorithmProvider.openAlgorithm("HMAC_SHA1");
           var key = macAlgorithmProvider.createKey(keyMaterial);
           var tbs = Windows.Security.Cryptography.CryptographicBuffer.convertStringToBinary(sigBaseString, Windows.Security.Cryptography.BinaryStringEncoding.Utf8);
           var signatureBuffer = Windows.Security.Cryptography.Core.CryptographicEngine.sign(key, tbs);
           var signature = Windows.Security.Cryptography.CryptographicBuffer.encodeToBase64String(signatureBuffer);
           paramString += "&oauth_signature=" + rfcEncoding(signature);
           accessUrl = encodeURI(accessUrl);
           accessUrl += "?" + paramString;
           var response = sendGetRequest(accessUrl);

            var tokenstartpos = response.indexOf("oauth_token") + 12;
            var tokenendpos = response.indexOf("&oauth_token_secret");
            var secretstartpos = tokenendpos + 20;
            var token = response.substring(tokenstartpos, tokenendpos);
            var secret = response.substring(secretstartpos);

            var gmailinfourl = "https://www.googleapis.com/userinfo/email?access_token="+token;

            WinJS.xhr({url: gmailinfourl}).done(function success(result) {
                var gmail_id = JSON.parse(result.responseText).email_address;

                    //send data to server
                    //more code

            });
           /*

            */
        }, function (err) {
            WinJS.log("Error returned by WebAuth broker: " + err, "Web Authentication SDK Sample", "error");
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:31:19.407

正确的[用户信息电子邮件范围](https://sites.google.com/site/oauthgoog/Home/emaildisplayscope)是这样的：

```
https://www.googleapis.com/auth/userinfo.email 
```

Google 已弃用[OAuth 1 访问权限](https://developers.google.com/accounts/docs/RegistrationForWebAppsAuto)，并鼓励您升级到 OAuth 2（这更容易！），尽管它仍然可以工作一段时间。~~但是，如果您`client id`在弃用后注册了一个新的，则它可能仅适用于 OAuth 2。~~

**更新：**

您遇到的问题是您尝试以 OAuth 2 方式请求资源：

```
GET /userinfo/email?access_token=... 
```

OAuth 1 的工作方式不同，您可以在[Google 的 OAuth 1 Playground](http://googlecodesamples.com/oauth_playground/)上看到：

```
GET /userinfo/email?oauth_consumer_key={CONSUMER_KEY}
                   &oauth_nonce={NONCE}
                   &oauth_signature={SIGNATURE}
                   &oauth_signature_method={SIGNATURE_METHOD}
                   &oauth_timestamp={TIMESTAMP}
                   &oauth_token={YOUR_TOKEN}
                   &oauth_version=1.0 
```

更好的是，在请求标头中包含 OAuth 签名：

```
GET /userinfo/email
[...]
Authorization: OAuth oauth_consumer_key="{CONSUMER_KEY}",
                     oauth_nonce="{NONCE}",
                     oauth_signature="{SIGNATURE}",
                     oauth_signature_method="{SIGNATURE_METHOD}",
                     oauth_timestamp="{TIMESTAMP}",
                     oauth_token="{YOUR_TOKEN}",
                     oauth_version="1.0" 
```

[`header`](http://msdn.microsoft.com/en-us/library/windows/apps/br229787.aspx)有关如何设置的信息，请参阅参数。

# time - 计算php中两个Unix时间戳之间的差异时出错

> ID：11574522
> 
> 赞同：0
> 
> 时间：2012-07-20T07:09:15.747
> 
> 标签：time, php

我有一个计算两个时间戳之间差异的函数，

```
public static function getDuration($from, $to) {
    $duration = $to - $from; 
    return $duration;
} 
```

但这不能按要求工作。例如，如果我通过，

```
$difference = getDuration(strtotime('19-07-2012 23:00:00'), strtotime('20-07-2012 4:45:00'));
echo $difference/3600; 
```

当转换为小时时，它返回 5.75 而不是 5.45。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:15:55.280

它返回正常 - 5,75 是 5 3/4 小时 = 5 小时 45 分钟

它以十进制返回 - 而不是小时/分钟

如果你想要小时/分钟，你可以使用：

```
$hours=floor($difference/3600);
$minutes=$difference/60-$hours*60; 
```

# wpf - 如何将父母属性绑定到子元素数据模板

> ID：11574523
> 
> 赞同：1
> 
> 时间：2012-07-20T07:09:23.797
> 
> 标签：wpf, binding, datagrid, datatemplate, multidatatrigger

如果 DataGrids 孩子通过转换器，我需要将我的 DataGrid 的 RowStyle 属性绑定到 Visibility。问题是孩子存在于 DataTemplate 中。我下面的代码是我现在正在做的简化版本，所以它可能没有多大意义。但不管怎么说：

```
<DataGrid Name="dataGrid"
              ItemsSource="{Binding Path=ListOfData}"
              RowStyle="{StaticResource DataGridRowStyle}"
              >
        <DataGrid.RowDetailsTemplate>
              <DataTemplate>
                    <StackPanel>
                         <TextBlock Name="textBlock" Source={Binding Path=Title}
                         <Image Name="image" Source="{Binding Path=Image}"/>
                    </StackPanel>
              </DataTemplate>
        </DataGrid.RowDetailsTemplate>
  </DataGrid> 
```

问题是，TextBlock 和 Image 可以单独折叠。如果两者都折叠，我需要 DataGridRow 折叠或隐藏，这样你就不会在网格中看到它。我的计划是定义一个名为“DataGridRowStyle”的 RowStyle。该样式将由 TextBlock 和 Images 的 Visibility 属性触发，并将 RowStyle 的 Visibility 设置为折叠。

```
 <Style TargetType="{x:Type DataGridRow}" x:Key="DataGridRowStyle">
    <Setter Property="Visibility" Value="Visible" />
    <Style.Triggers>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Value="True">
                    <Condition.Binding>
                        <MultiBinding Converter="{StaticResource VisibilityConverter}">
                            <Binding ElementName="textBlock" Path="Visibility" />
                            <Binding ElementName="image" Path="Visibility" />
                        </MultiBinding>
                    </Condition.Binding>
                </Condition>
            </MultiDataTrigger.Conditions>
            <Setter Property="Visibility"  Value="Collapsed"/>
        </MultiDataTrigger>
    </Style.Triggers>
</Style> 
```

不幸的是，我在运行时收到警告，其中 System.Data 无法找到我的 textBlock 或图像元素。我猜你不能绑定到 DataTemplate 或者我做错了什么？我能以某种不同的方式做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:17:58.300

您确实无法在此处绑定到您的 dataTemplate，因为它超出了 RowStyle 的范围。

我会以另一种方式做到这一点：

1.  如我所见，您应该能够在 ItemViewModel 中确定 TextBox 和图像是否同时折叠
2.  在您的 ItemViewModel 中添加一个属性（例如“VisibilityProperty”），并在 TextBox 和 Image 都折叠时将其设置为“Collapsed”。
3.  通过 RowStyle 将 DataGridRow 的 VisibilityProperty 绑定到 ItemViewModel 的此属性。

这应该这样做

**编辑：** 如果你不能改变你的 itemViewModel，你有另一个选择（虽然很丑）：

将 Row 的 Visibility 绑定到 Item 本身，并使用转换器查找子项并查看它们是否在运行时折叠。

类似的东西：

```
<Style TargetType="{x:Type DataGridRow}" x:Key="DataGridRowStyle">
    <Setter Property="Visibility" Value="{Binding Converter=MyRowViewModelToVisibilityconverter}" />
</Style> 
```

并且您的转换器代码显然拥有该项目，因此只需查找 TextBox 的 ViewModel 和 Image 的 Viewmodel 并查看它们是否会折叠 Image 和 TextBox，然后相应地返回可见性：

```
public class MyRowViewModelToVisibilityconverter: MarkupExtension, IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var item = value as ItemViewModel;
        bool isImageCollapsed = false, isTextBoxCollapsed = false;

        // Look into your ItemViewModel for the properties inducing a Visibility=Collapsed on the Image and the TextBox

        return (isImageCollapsed && isTextBoxCollapsed) ? Visibility.Collapsed : Visbility.Visible;

    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return new MyRowViewModelToVisibilityconverter();
    }
} 
```

# python - python中有没有类似于ruby的||=的表达式

> ID：11574524
> 
> 赞同：5
> 
> 时间：2012-07-20T07:09:29.067
> 
> 标签：python, ruby, expression

我在 Ruby 中遇到了一个有趣的表达式：

```
a ||= "new" 
```

这意味着如果没有定义a，“新”值将被分配给a；否则， a 将与原来相同。在进行一些数据库查询时很有用。如果设置了该值，我不想触发另一个数据库查询。

所以我在 Python 中尝试了类似的心态：

```
a = a if a is not None else "new" 
```

它失败了。我认为这是因为如果未定义 a，您无法在 Python 中执行“a = a”。

所以我能出来的解决方案是检查 locals() 和 globals()，或者使用 try...except 表达式：

```
myVar = myVar if 'myVar' in locals() and 'myVar' in globals() else "new" 
```

或者

```
try:
    myVar
except NameError:
    myVar = None

myVar = myVar if myVar else "new" 
```

正如我们所看到的，解决方案并不那么优雅。所以我想问一下，有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T07:15:23.063

使用未定义的变量作为“默认值”有点代码味道。`a = a`正如您所发现的，它失败了，因为如果 a 不存在，您将无法执行。最好用一些默认值（如无）初始化你的变量，然后检查它。所以你几乎找到了解决方案。唯一的事情是，您应该明确地初始化它，而不是让您的变量未初始化并尝试使用“不存在”作为“缺失”值。所以，而不是这样做：

```
 # code with no initialization. . .
 a ||= blah 
```

做这个：

```
a = None
# code
if a is None:
    a = blah 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T07:40:19.523

怎么样？

```
try:
    a = a
except NameError:
    a = "new" 
```

它不是很短，但确实（至少对我而言）清楚地解释了代码的意图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T09:08:27.857

Pythonic 是您在使用它之前应该知道它，尤其是在本地/全局变量中，而不是猜测它在哪里。您可以编写此代码，但它不是 pythonic

```
a = None
# other codes
a = a or 'new' 
```

没事儿

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T07:22:35.827

如果你真的想要这种行为，你最好在 Python 中使用 a `dict`，例如：`d.get('a', 'new')`。这意味着你可以用`globals()`/搞砸`locals()`。`get('a', 'new')`，但这通常不是在 Python 中做事的方式——每个名称绑定都应该有一个初始值，即使它是某种标记值（例如`None`）。

**使用 globals() 和使用 setdefault() 的可怕示例**

```
>>> a
Traceback (most recent call last):
  File "<pyshell#66>", line 1, in <module>
    a
NameError: name 'a' is not defined
>>> globals().setdefault('a', 'new')
'new'
>>> a
'new'
>>> a = 'old'
>>> globals().setdefault('a', 'new')
'old'
>>> a
'old' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-17T16:28:41.613

考虑使用非常 Pythonic 的 memoization。这是一些 Python 2 代码：

```
# Backport of Python 3's lru_cache
# pip install functools32
from functools32 import lru_cache

@lru_cache()
def expensive_db_query(arg):
    print "Running expensive db query for", arg
    return arg[::-1]

expensive_db_query("spam") # prints "Running expensive db query for spam"
expensive_db_query("spam") # No output
expensive_db_query("eggs") # prints "Running expensive db query for eggs" 
```

如果您想让缓存在经过足够的时间后忘记值并再次查询数据库，请查看[Ilialuk 的 lru 缓存](https://stackoverflow.com/questions/11815873/memoization-library-for-python-2-7)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-30T10:01:15.280

[这是一个受此答案](https://stackoverflow.com/a/1592581/3182188)启发的关于如何检查变量是否已定义的变体：

```
a = a if "a" in vars() or "a" in globals() else "new" 
```

它不是那么短，但至少是一条线。

```
In [1]: a
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-1-60b725f10c9c> in <module>()
----> 1 a

NameError: name 'a' is not defined

In [2]: a = a if "a" in vars() or "a" in globals() else "new"

In [3]: a
Out[3]: 'new'

In [4]: a = "A exists!"

In [5]: a = a if "a" in vars() or "a" in globals() else "new"

In [6]: a
Out[6]: 'A exists!' 
```

也就是说，我同意 BrenBarn 的观点，即您应该通过`a=None`在可能未设置它的块之前声明它来避免未定义变量的问题。

# android - 是否有相当于 android 的音轨的 iOS？

> ID：11574526
> 
> 赞同：0
> 
> 时间：2012-07-20T07:09:35.080
> 
> 标签：android, iphone, ios, audio, audio-streaming

我有一个在 android 上运行的算法来播放一些合成音频。我使用音轨 API (http://developer.android.com/reference/android/media/AudioTrack.html) 执行此操作。这使我能够有效地将字节数组直接推送到音频流......这意味着只要我能保持这些数据不断出现，它就不会出现故障或以其他方式变得不准确。

iOS上是否有等价物？

我似乎找不到任何可以让我将包含音频数据的数组直接推送到音频流的东西。我对 Audiograph 抱有希望 - 但看不到如何使用它......这显然是最低级别的 api。我想知道使用与音频流相关的东西是否有意义？

实际上，我想要做的就是绘制一个图表，并让设备播放它。

任何想法表示赞赏！

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:49:07.477

您可以使用 Audio ToolBox 框架来做到这一点。它包含几个类来维护音频。这是给你的一些参考。

[音频会话](https://developer.apple.com/library/ios/documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007915)和[音频文件流服务](https://developer.apple.com/library/ios/documentation/MusicAudio/Reference/AudioStreamReference/Reference/reference.html#//apple_ref/doc/uid/TP40006162)

希望它会帮助你.... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:50:10.587

听起来您正在寻找某种流媒体音频解决方案？也许 Matt Gallagher 的 AudioStreamer 项目可能会有所帮助？

[http://cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html](http://cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html)

**编辑：** AudioStreamer 使用了 andikurnia 提到的 AudioToolbox。

# android - 如何从android中的json文件中获取特定记录？

> ID：11574527
> 
> 赞同：-1
> 
> 时间：2012-07-20T07:09:35.870
> 
> 标签：android, json

我的 SD 卡中有一个包含 json 数组的文本文件。比如说文件是这样的：

```
[
{"CountryID" : "1","CountryName" : "Australia"},
{"CountryID" : "2","CountryName" : "Japan"},
{"CountryID" : "3","CountryName" : "China"},
{"CountryID" : "4","CountryName" : "India"},
{"CountryID" : "5","CountryName" : "Holland"}
] 
```

现在我想根据 Country ID 获取数据。前任。我想通过 ID = 2 并且我只得到一个对象。我可以在字符串变量中获取整个文件并遍历每个对象以查找我的数据。但我不认为这是最好的做法。因为在我的真实文件中，我可能有超过 1000 个我不想循环的对象。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:18:42.593

如果将有 1000 条记录，请改用 sqllite。Json 并不意味着是数据库结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:24:36.970

您可以使用以下代码示例来完成您的任务

```
 Type listType = new TypeToken<List<Country>>() {}.getType();
    Gson gson = new Gson();
    String json = "["
            + "{\"CountryID\" : \"3\",\"CountryName\" : \"China\"},"
            + "{\"CountryID\" : \"2\",\"CountryName\" : \"Japan\"},"
            + "{\"CountryID\" : \"1\",\"CountryName\" : \"Australia\"},"
            + "{\"CountryID\" : \"4\",\"CountryName\" : \"India\"},"
            + "{\"CountryID\" : \"5\",\"CountryName\" : \"Holland\"}" 
            + "]";
    // parsing the JSON array
    ArrayList<Country> countries = gson.fromJson(json, listType);
    System.out.println(countries);

    // sorting the country list based on CountryID. Ensure list is sorted, since we do binary search next
    Collections.sort(countries);
    System.out.println(countries);

    Country searchKey = new Country(3,"");
    // searching for country with ID 3
    int index = Collections.binarySearch(countries, searchKey);
    if(index < 0 || index >= countries.size() ) System.out.println("Country with ID "+searchKey.getCountryID()+ " not found in results");
    else 
    {
        System.out.println("Found Country with ID : " + searchKey.getCountryID()+ " @ index : " + index);
        Country searchResult = countries.get(index);
        System.out.println("Searched result : "+searchResult);
    } 
```

*   这里我使用[GSON](http://code.google.com/p/google-gson/)来解析`Country`列表
*   为此，我使用了一个名为的数据持有者类`Country`

找到班级`Country`

```
public class Country implements Comparable<Country> {

    public Country(int countryID, String countryName) {
        super();
        CountryID = countryID;
        CountryName = countryName;
    }
    //"CountryID" : "1","CountryName" : "Australia"

    private int CountryID;
    private String CountryName;
    /**
     * Gets the countryID.
     * 
     * @return <tt> the countryID.</tt>
     */
    public int getCountryID() {
        return CountryID;
    }
    /**
     * Sets the countryID.
     *
     * @param countryID <tt> the countryID to set.</tt>
     */
    public void setCountryID(int countryID) {
        CountryID = countryID;
    }
    /**
     * Gets the countryName.
     * 
     * @return <tt> the countryName.</tt>
     */
    public String getCountryName() {
        return CountryName;
    }
    /**
     * Sets the countryName.
     *
     * @param countryName <tt> the countryName to set.</tt>
     */
    public void setCountryName(String countryName) {
        CountryName = countryName;
    }
    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Country [CountryID=" + CountryID + ", CountryName="
                + CountryName + "]";
    }
    /* (non-Javadoc)
     * @see java.lang.Comparable#compareTo(java.lang.Object)
     */
    @Override
    public int compareTo(Country o) {
        // TODO Auto-generated method stub
        return this.getCountryID()-o.getCountryID();
    }

} 
```

*   `Country`类实现`Comparable`接口来执行`Collections`'二进制搜索
*   解析成功后，我对`Country`列表进行了排序
*   然后使用`binarySearch`of`Collections`类找到你的索引`search-key-country`
*   现在只需使用返回`index`的来检索您的`search-result-country`对象

# android - 将 sdcard 文档上传到 android 中的 Google Drive

> ID：11574532
> 
> 赞同：2
> 
> 时间：2012-07-20T07:09:51.237
> 
> 标签：android, google-drive-api

从我的应用程序中，我想将 sdcard 文档上传到特定 Gmail 帐户的谷歌驱动器。

[我在google drive](https://developers.google.com/drive/get-started)上提到了这个文档。但我不明白该怎么做。请帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:22:57.930

我会从这里开始[Google API for java](https://developers.google.com/drive/downloads)

下载 API 并浏览有关如何使用它的文档。该链接还提供了您应该能够尝试和试验的代码示例。根据我在几分钟内发现的情况，您首先需要使用 OAuth 2.0 获得授权

然后只需使用 Drive.Files.insert() （这显然是一个 JSON PUT）API 还允许其他功能，如列出文档、复制、删除等。

# php - 如何在多选框中显示所选项目

> ID：11574535
> 
> 赞同：0
> 
> 时间：2012-07-20T07:09:59.923
> 
> 标签：php, mysql, html

这是我在编辑页面中的多重选择下拉框。这里的问题是这只显示一个选定的项目。它不会显示其中的所有选定项目。我该如何纠正这个？

```
 <?php
         $query="SELECT * FROM lab";
        $dropdown = "<select name='labid[]' multiple='multiple'  style='height:80px;' size='5' id='lab'>";
        //$dropdown .= "<option value=''>Select lab to assign </option>";
        $result2 = mysql_query ($query);
        while($row2 = mysql_fetch_assoc($result2)) 
        {

  $dropdown .= "\r\n<option value='{$row2['lab_id']}'";
            while($row1 = mysql_fetch_assoc($result1)) 
              {
                 if(($row1['lab_id'])==($row2['lab_id']))
                  {
                      $dropdown .=" selected='selected'";
                  }
             }
  $dropdown .= ">{$row2['l_name']}</option>";
        }
        $dropdown .= "\r\n</select>";
        echo $dropdown;
       ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:48:42.207

尝试将 while 循环更改为 foreach 循环。

改变

```
 while($row2 = mysql_fetch_assoc($result2)) 
```

至

```
foreach(mysql_fetch_assoc($result2) as $row2) 
```

和

```
 while($row1 = mysql_fetch_assoc($result1)) 
```

至

```
foreach(mysql_fetch_assoc($result1) as $row1) 
```

# html - 是否可以向 Modernizr 不支持的旧浏览器添加 CSS3 功能？

> ID：11574536
> 
> 赞同：0
> 
> 时间：2012-07-20T07:10:04.197
> 
> 标签：html, css, modernizr

1 - Modernizr 是否只检测浏览器支持哪些功能？

2 - Modernizr 是否能够向浏览器添加旧浏览器中不存在的功能？

3 - 是否有选项/解决方案可以将 css3 的功能添加到不支持与 Modernizr 无关的旧浏览器？

许多谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:33:21.217

1.  我认同。
2.  取决于 Modernizr 版本（谈论 respond.js ）
3.  有。看看[http://caniuse.com](http://caniuse.com)你可以找到不同属性的资源

# model-view-controller - MVC cycle and Dependency Injection

> ID：11574544
> 
> 赞同：2
> 
> 时间：2012-07-20T07:10:40.213
> 
> 标签：model-view-controller, dependency-injection

In [MVC](http://www.oracle.com/technetwork/articles/javase/index-142890.html#3), the view sends events to the controller and the controller sends these events to the model. The model sends changes to the view through the controller.

This introduces a cyclic dependency which makes dependency injection(I'm manually injecting dependencies through the constructor - not using a framework) not possible(resulting in harder to unit test code). I read a [potential solution](http://misko.hevery.com/2008/08/01/circular-dependency-in-constructors-and-dependency-injection/) but can't figure out how to apply this.

Can someone point me to a solution?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T09:53:07.543

Another solution is to let your IoC container create factories for you and Inject those instead, look at this similar problem with an example MVP implementation. The Concrete view needs a Presenter but the Presenter needs an IView (the abstraction). It's more like a circular reference than a dependency.

```
public interface IView
{
    string Name { get; set; }
}

public interface IPresenterFactory<TController>
{
   TController Create<TView>(TView view);
}

public class ConcreteView : IView
{
    private Presenter _Presenter;
    public ConcreteView(IPresenterFactory<Presenter> presenter)
    {
        this._Presenter = presenter.Create(this);
    }
 }

 public class Presenter
 {
      public Presenter(IView view)
      {
         this._View = view;
      }
 } 
```

The presenter factory can easily make use of and wrap your IoC container and then just generate your factories as needed. Unit testing it is also easy, because you can very easy just create a Mock of IPresenterFactory and construct the Presenter or Controller that you need.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:37:46.443

One solution you have found yourself but you may have not noticed yet:

> In MVC, the view sends **events** to the controller and the controller sends these **events** to the model. The model sends changes to the view through the controller.

The View and the Model could publish events (think Observer Pattern) to notify the Controller, meaning that you don't have a dependency on the Controller neither in the Model nor in the View.

# iphone - 根据 id 从通讯录中访问联系人图片

> ID：11574545
> 
> 赞同：0
> 
> 时间：2012-07-20T07:10:42.147
> 
> 标签：iphone, image, contact, abaddressbook

每个人都知道我们可以创建一个地址簿（ABAddressBook），复制数组中的所有人，然后创建一个记录引用（ABRecordRef），然后使用NSData复制其图像数据，如下所示：

```
ABAddressBookRef addressBook = ABAddressBookCreate( );
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
ABRecordRef recordReference = CFArrayGetValueAtIndex(allPeople, addressIndex);
NSData *imageData = (NSData *)ABPersonCopyImageData(recordReference); 
```

现在这工作正常，正如预期的那样是一个普遍的事实，但在我的情况下（应用程序），我有一个小问题，如果用户最初保存联系人并且不添加/上传任何图像，那么当时，我们正在访问该联系人的图像数据，我们有空图像，因此我提供或分配默认图像。但是如果用户稍后为联系人上传图像或修改联系人的现有图像，这意味着更新的图像将没有按预期出现，因此我们不能依赖地址簿名称或某些索引等。

因此，我想出了一个保存唯一联系人 id 的想法，然后根据其 id 获取联系人图像。在此过程中，我已将唯一联系人 id 保存到数据库中，接下来，使用模型类保存 id 值，然后将该模型类保存到数组中。

这是用于理解的示例代码：

```
ReminderClass *reminderToDisplay = [self.remindersArray objectAtIndex:indexPath.row];
NSString *contactIDString = reminderToDisplay.contactID;
int addressIndex = [contactIDString integerValue]; 
```

现在我们知道我们可以有一个 ABRecordRef 的实例，从而复制它的图像数据，但我们知道它的语法是：

```
ABRecordRef personID = CFArrayGetValueAtIndex(CFArrayRef theArray, CFIndex idx); 
```

任何方式我都可以分配**addressIndex**代替**CFIndex idx**

但我对数组部分感到震惊，即**CFArrayRef**，因为我有一个 NSMutableArray 保存所有 id 详细信息，即**提醒数组**

现在我搜索了从**NSMutableArray**到**CFArrayRef的类型转换方法**

但是发现了一些反之亦然的问题，可以在[这里看到一个示例问题](https://stackoverflow.com/questions/8761461/how-to-make-an-cfarrayref-to-an-nsmutablearray)

如果有任何方法可以解决这个问题，请指导我，以便我可以访问相应联系人的正确图像，非常感谢任何帮助！

提前谢谢大家:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:27:15.560

请从以下链接中找到 Mr.HRM 的最佳解决方案：

[http://www.stackoverflow.com/questions/15138946/access-contact-image-from-address-book-based-on-name](http://www.stackoverflow.com/questions/15138946/access-contact-image-from-address-book-based-on-name)

这肯定会以正确的方式帮助您，谢谢:)

# html - 同名表单字段上的css

> ID：11574549
> 
> 赞同：0
> 
> 时间：2012-07-20T07:10:49.073
> 
> 标签：html, css, forms

所以我在一个页面上有多个表单（不知道有多少，由php在数组中创建）。每一个都很简单，包含许多字段，每个字段都有一个`name='fieldname'`.

现在在 CSS 中我有：

```
form.sidemenu input[name=fieldname] { width: 40px; } 
```

这在表单的第一个实例上运行良好，但对其余表单中的相应字段没有任何影响。我现在尝试用每个输入字段（`input name='fieldname' class='fieldname'`....）中的特定类替换它，并替换`form.sidemenu input.fieldname { width: 40px; }`了后续的类，但仍然没有运气，尽管第一种形式工作正常。

这是在 OSX Lion 上的 Chrome Canary 和 Safari 上，两者的行为相同。

我知道这不是完全愚蠢的事情（就像错过了表单上的类），因为（1）这是一个由 php 循环生成的表单，所以它们都是一样的，并且（2）CSS 在第一个实例上完美地工作的形式，但在所有后续的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:30:18.447

HTML：

```
<form>
    <input type="text" class="fieldname" id="name"/>
    <input type="text" class="fieldname" id="and_So_on"/>
</form> 
```

CSS：

```
.fieldname {
     width: 40px;
} 
```

**或者**您可以尝试将表单放在`DIV`类似：
CSS：

```
div.sidemenu input {
     width: 40px;
} 
```

HTML：

```
<div id="sidemenu">
    <form>
        <input type="text" class="fieldname" id="name"/>
        <input type="text" class="fieldname" id="and_So_on"/>
    </form>
</div> 
```

这是它的样子吗？现在它将应用于`class="fieldname"`整个页面上的所有元素。但仅用于调试就值得一试。

# php - 使用 for 循环在每个周期更新不同的记录

> ID：11574551
> 
> 赞同：0
> 
> 时间：2012-07-20T07:10:51.897
> 
> 标签：php, mysql, loops

我编写了一个生成许多“secret_key”的 php 代码。代码如下

```
 <?php

    include("/home3/kintest2/public_html/include/config.local.php");
    $connect= mysql_connect ($DBHOST,$DBUSER,$DBPASSWORD);
    $select= mysql_select_db($DBNAME, $connect);

    $test2= "SELECT *  FROM `video` WHERE `type` LIKE 'private'";
    $results= mysql_query($test2, $connect);
    $num_rows = mysql_num_rows($results);

    for ($count=$num_rows; $count>=0; $count-- && $secret_key= uniqid().mt_rand(1,9) )
    {
    mysql_query("UPDATE video SET secret_key= '$secret_key' WHERE type='private'",$connect);
    echo "    count is  {$count}  key is  {$secret_key}</br>";

    }
    ?> 
```

我对这段代码只有一个问题。所有满足查询条件的 mysql 记录都被赋予相同的密钥。但我希望为每条记录分配一个不同的键。 `mysql_query("UPDATE video SET secret_key= '$secret_key' WHERE type='private'",$connect);`

这是回声输出

*   计数为 13 键为
*   计数为 12 键为 50090128c89bb7
*   计数为 11 键为 50090128c91153
*   计数为 10 键为 50090128c986c4
*   计数为 9 键为 50090128c9f9b5
*   计数为 8 键为 50090128ca7387
*   ……

共有 13 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:29:05.023

如果您希望密钥仅应用于一行，则必须修改您的`UPDATE`语句以*仅影响一行。*因此，一种方法是获取一些标识行的唯一键，并为每个行发出单独的更新查询。另一种选择可能是使用 SQL 在服务器端生成随机密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:14:24.267

您的 echo 输出已经列出了不同的键，但即使我编写的代码有点不同：

```
while( !is_null($row = mysql_fetch_assoc($results)) ) { 
  $secret_key=uniqid().mt_rand(1,9); /* (?) */ 
  $dbCmd = "UPDATE video SET secret_key = '$secret_key' WHERE id={$row['id']}";   
  msyql_query($dbCmd, $connect); 
} 
```

您的查询对 type='private' (atm) 的每一行进行更新...

# jquery - 我难以理解的 jQuery 问题

> ID：11574554
> 
> 赞同：-1
> 
> 时间：2012-07-20T07:11:06.203
> 
> 标签：jquery

第一的：

```
 .closest('.notice') 
```

它会占用 .notice 本身，还是会占用最接近 .notice 的 dom 树？

`.next('.notice')`- 它会抓住 dom 树下的东西，对吧？

另一个：

```
$('#celebTree ul').hide().before('<div class="bla"></div>').prev().addClass('handle closed') 
```

使用 .prev jQuery 应该在“bla”之前选择一个元素并应用该类。但它将类应用于我使用 .before 方法插入的元素。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:16:28.427

```
.closest('.notice') 
```

[`.closest()`](http://api.jquery.com/closest/)将遍历 DOM 树（向上）并返回匹配选择器的第一个祖先。

```
.next('.notice') 
```

[`.next()`](http://api.jquery.com/next/)*如果*它与选择器匹配，将返回紧随其后的兄弟。

```
$('#celebTree ul').hide().before('<div class="bla"></div>').prev().addClass('handle closed') 
```

这会将类应用于您正在插入的元素，因为[`.before()`](http://api.jquery.com/before/)将返回调用它的相同 jQuery 对象（插入的元素不会添加到匹配的集合中）。由于匹配的元素现在在其前面插入了您的内容，因此[`.prev()`](http://api.jquery.com/prev/)将返回新元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:17:39.990

`.closest('notice')`是匹配的最接近的父级或元素本身（如果匹配）：

```
<div class="notice"> //This will be selected with $("#target").closest(".notice")
    <div id="target"></div>
</div>

<div class="notice">
    <div id="target" class="notice"></div>  //This will be selected with $("#target").closest(".notice")
</div> 
```

`.next('notice')`如果匹配，则选择下一个元素兄弟：

```
<div id="target"></div>
<div class="notice"></div> //This will be selected with $("#target").next(".notice")

<div id="target"></div>  //NOTHING will be selected with $("#target").next(".notice")
<div></div> 
```

`.before()`不会返回新的 jQuery 对象，它会返回您之前插入内容的旧对象：

```
$('#celebTree ul').hide().before('<div class="bla"></div>') 
//Returns the '#celebTree ul'. NOT jQuery object wrapping '<div class="bla"></div>' 
```

由于您只是在元素之前插入并`prev`在`'#celebTree ul'`此处进行操作，`prev`因此将采用前一个元素兄弟，即该内容。

# c# - Windows 窗体应用程序中的 UI 控件重叠和字体问题

> ID：11574561
> 
> 赞同：4
> 
> 时间：2012-07-20T07:11:30.130
> 
> 标签：c#, winforms, fonts, desktop-application

我制作了一个 Windows 窗体应用程序。我有一个带有一些控件的表单。控件重叠，字体也会自动更改，在某些地方，按钮、文本框的字体会变成白色。我附上一张图片以加深理解。

[1](https://i.stack.imgur.com/jg9lk.png)：![重叠和字体问题](../Images/6cc2f0e33c5c5bf4f08ce894a5ca9cd0.png)

这发生在某些最终用户的系统中，我无法找到为什么会发生此问题。

任何帮助，将不胜感激。

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:21:23.463

如果您使用系统字体和颜色，您的 winforms 应用程序将受操作系统字体和颜色设置的支配。

例如，如果您的按钮的 ForeColor 属性设置为 ControlText（系统颜色）而不是黑色（例如），您的应用程序将使用操作系统的 ForeColor 属性设置的任何值来呈现。

还要记住，操作系统的字体大小设置会影响表单的布局。如果操作系统的字体大小设置为 125% 或 150%，您可能会遇到重叠问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:19:27.403

包含子控件的组控件似乎有点小，请尝试使其足够大以容纳它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:39:14.063

尝试将 AutoEllipsis 属性设置为 true。我相信最正确的方法是使用布局控件与适当的锚点和停靠选项相结合。如果以正确的方式设置，它们应该在需要时自动拉伸控件

# iphone - 减少 Objective-C 中两个 Unicode 字符之间的空间

> ID：11574565
> 
> 赞同：0
> 
> 时间：2012-07-20T07:11:45.953
> 
> 标签：iphone, ios, unicode, nsstring

我需要在一个字符串中显示两个 Unicode 字符，即上标。我这样做是这样的：

```
NSLog(@"%@",[NSString stringWithFormat:@"\u02e2\u00B9 2010"]); 
```

我也可以证明这一点，但我的问题是它在这两个字符之间显示了一些空间。我怎样才能减少这个空间？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:53:29.103

2 个字符之间没有空格，但在 "2010" ---> "ˢ¹ 2010" 之前

不清楚你是否想要这个空间......

如果你想要它，只需使用：

```
NSLog(@"%@",[NSString stringWithFormat:@"\u02e2 \u00B9 2010"]); 
```

# android - 制作 android 小部件时覆盖 onRecieve() 时出错

> ID：11574566
> 
> 赞同：0
> 
> 时间：2012-07-20T07:11:45.890
> 
> 标签：android, android-widget, overriding

我有一个 AppWidget 类（扩展 AppWidgetProvider）。

```
public class AppWidget extends AppWidgetProvider {    
        @Override   
        public void onRecieve(Context context, Intent intent){
                  //do something
            } 
} 
```

我收到一个错误

> AppWidget 类型的 onRecieve(Context, Intent) 方法必须覆盖或实现超类型方法

快速修复删除@Override。

为什么我不能覆盖该方法。我还能怎么做同样的事情。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:18:39.860

改变你的

```
@Override   
public void onRecieve(Context context, Intent intent){
              //do something
} 
```

到

```
@Override   
public void onReceive(Context context, Intent intent){
              //do something
 } 
```

它解决了你的问题..

# php - php在foreach之后返回一个空数组

> ID：11574577
> 
> 赞同：0
> 
> 时间：2012-07-20T07:12:36.670
> 
> 标签：php, arrays, foreach, file-get-contents

我可以避免生成的空数组`foreach`吗？
这是我的代码

```
$file="test.txt";
$open = file_get_contents($file);
$lines = explode(PHP_EOL, $open);
foreach($lines as $line){
    $domain = preg_split('/\s+/', $line,-1,PREG_SPLIT_NO_EMPTY);
    echo "<pre>";
    var_dump($domain);
    echo "$domain[0] OK";
    echo "</pre>";
} 
```

test.txt 包含这个

```
www.google.com  2.2.2.3
www.test.com    2.2.2.3
www.example.com 2.2.2.3 
```

在我运行我的脚本后，结果是这样的

```
array(2) {
  [0]=>
  string(14) "www.google.com"
  [1]=>
  string(7) "2.2.2.3"
}
www.google.com OK
array(2) {
  [0]=>
  string(12) "www.test.com"
  [1]=>
  string(7) "2.2.2.3"
}
www.test.com OK
array(2) {
  [0]=>
  string(15) "www.example.com"
  [1]=>
  string(7) "2.2.2.3"
}
www.example.com OK
array(0) {
}
 OK 
```

出现的原因是什么`array(0)`？
www.example.com 或其他元素之后没有新行。
我可以删除它还是根本不生成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:14:55.567

最后一个域之后有一个额外的换行符或其他空白字符。

首先修剪文本文件内容：

```
$open = trim(file_get_contents($file)); 
```

您还可以检查循环内的行是否为空。

```
$file="test.txt";
$open = trim(file_get_contents($file));  // Either this..
$lines = explode(PHP_EOL, $open);
foreach($lines as $line){

    if ($line === '') // Or this
        continue;

    $domain = preg_split('/\s+/', $line,-1,PREG_SPLIT_NO_EMPTY);
    echo "<pre>";
    var_dump($domain);
    echo "$domain[0] OK";
    echo "</pre>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:15:51.410

检查包含最后一行的内容：

```
var_dump($line); 
```

如果它包含空字符串，只需添加一些检查：

```
if ( empty($line) ) {
  continue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:19:44.360

对于这样的示例，您最好使用[preg_match_all ：](http://php.net/manual/en/function.preg-match-all.php)

### 只是名字

```
<?php
$file = 'test.txt';
$open = file_get_contents($file);
preg_match_all('/^\S+/m', $open, $matches);
print_r($matches[0]);
Array
(
    [0] => www.google.com
    [1] => www.test.com
    [2] => www.example.com
) 
```

### 姓名和号码

```
<?php
$file = 'test.txt';
$open = file_get_contents($file);
preg_match_all('/^(\S+)\s+(\S+)$/m', $open, $matches);
print_r($matches);
Array
(
    [0] => Array
        (
            [0] => www.google.com  2.2.2.3
            [1] => www.test.com    2.2.2.3
            [2] => www.example.com 2.2.2.3
        )

    [1] => Array
        (
            [0] => www.google.com
            [1] => www.test.com
            [2] => www.example.com
        )

    [2] => Array
        (
            [0] => 2.2.2.3
            [1] => 2.2.2.3
            [2] => 2.2.2.3
        )

)

$result = array_combine($matches[1], $matches[2]);
print_r($result);
Array
(
    [www.google.com] => 2.2.2.3
    [www.test.com] => 2.2.2.3
    [www.example.com] => 2.2.2.3
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T07:23:14.203

我建议你[`SplFileObject`](http://de.php.net/SplFileObject)改用：

```
$path = "test.txt";
$file = new SplFileObject($path);

$file->setFlags(
    SplFileObject::DROP_NEW_LINE   # new line characters at the end of line
    | SplFileObject::SKIP_EMPTY    # skip empty lines, e.g. the one at the end
);

foreach ($file as $line)
{
    $domain = preg_split('/\s+/', $line, -1, PREG_SPLIT_NO_EMPTY);

    echo "<pre>", var_dump($domain), "$domain[0] OK", "</pre>";
} 
```

它不仅支持您的问题构建（请参阅标志），而且还逐行解析文件，因此对于较大的文件，它不会将其完全转移到内存中。也见[`file`](http://de.php.net/file)功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T07:43:23.300

我已经测试了您的代码，发现它运行良好......我通过相同的代码得到了这个输出

```
 array(2) {
  [0]=>
  string(14) "www.google.com"
  [1]=>
  string(7) "2.2.2.3"
}
www.google.com OK

array(2) {
  [0]=>
  string(12) "www.test.com"
  [1]=>
  string(7) "2.2.2.3"
}
www.test.com OK

array(2) {
  [0]=>
  string(15) "www.example.com"
  [1]=>
  string(7) "2.2.2.3"
}
www.example.com OK 
```

我认为您的文本文件中有新行 [enter] 请使用退格键将其删除，它将正常工作..

# f# - fsunit 中的范围和缩进

> ID：11574578
> 
> 赞同：1
> 
> 时间：2012-07-20T07:12:39.087
> 
> 标签：f#, fsunit

我似乎无法在我的 fsunit 测试中获得正确的缩进。我一直被告知要使用 ML 风格的“使用 let ... in”，但这样做意味着编译器无法读取下一个测试的名称。有什么建议么 ？

```
[<TestFixture>] 
module ``reading yaml files`` =
    let yamlReader = new yamlReader()
    let yamlConfig = yamlReader.read("./testFiles/config.yaml")

    [<Test>] ``should parse root property of a yaml file`` ()=
        yamlConfig.ContainsKey(new YamlScalar("token1")) |> should equal true
    [<Test>] ``should parse nested propery of a yaml file`` ()=
        let token1 = yamlConfig.[new YamlScalar("token1")] :?> YamlMapping
        let env3 = token1.[new YamlScalar("env3")] :?> YamlScalar
        env3.Value |> should equal "value3"
    [<Test>] ``should convert yamldocument to digestable format`` ()=
        let tokens = yamlReader.toTokens yamlConfig
        let firstToken = (Seq.head tokens)
        firstToken.name |> should equal "token2" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:16:48.180

您缺少 let 关键字。试试这个：

```
[<TestFixture>] 
module ``reading yaml files`` =
    let yamlReader = new yamlReader()
    let yamlConfig = yamlReader.read("./testFiles/config.yaml")

    [<Test>] 
    let ``should parse root property of a yaml file`` ()=
        yamlConfig.ContainsKey(new YamlScalar("token1")) |> should equal true
    [<Test>] 
    let ``should parse nested propery of a yaml file`` ()=
        let token1 = yamlConfig.[new YamlScalar("token1")] :?> YamlMapping
        let env3 = token1.[new YamlScalar("env3")] :?> YamlScalar
        env3.Value |> should equal "value3"
    [<Test>] 
    let ``should convert yamldocument to digestable format`` ()=
        let tokens = yamlReader.toTokens yamlConfig
        let firstToken = (Seq.head tokens)
        firstToken.name |> should equal "token2" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:23:53.343

Gustavo 的版本是更好的版本（也是我通常使用的版本），但如果您不想将其`[<Test>]`放在单独的行上：

```
[<TestFixture>] 
module ``reading yaml files`` =
    let yamlReader = new yamlReader()
    let yamlConfig = yamlReader.read("./testFiles/config.yaml")

    let [<Test>] ``should parse root property of a yaml file`` () =
        yamlConfig.ContainsKey(new YamlScalar("token1")) |> should equal true

    let [<Test>] ``should parse nested propery of a yaml file`` () =
        let token1 = yamlConfig.[new YamlScalar("token1")] :?> YamlMapping
        let env3 = token1.[new YamlScalar("env3")] :?> YamlScalar
        env3.Value |> should equal "value3"

    let [<Test>] ``should convert yamldocument to digestable format`` () =
        let tokens = yamlReader.toTokens yamlConfig
        let firstToken = (Seq.head tokens)
        firstToken.name |> should equal "token2" 
```

# c - clSetKernelArg 将 arg_value 从 16 更改为 140733193388048？

> ID：11574583
> 
> 赞同：1
> 
> 时间：2012-07-20T07:13:03.830
> 
> 标签：c, osx-snow-leopard, opencl, gpgpu, nvidia

我正在通过制作一个矩阵点积实现来深入研究 OpenCL。我在让我的内核返回与我的主机相同的值时遇到问题。

我制作了一个封装函数，它分配设备内存、为内核设置参数、运行内核并将结果返回给主机。

```
 /* This function runs the matrix dot product on whatever OpenCL device 
  * you specify 
  */
cl_int OpenCL_MatrixMul(cl_device_id * device, cl_context * context, 
    cl_command_queue * commandQueue, cl_kernel * matrixMulKernel, float * A_h, 
    float * B_h, float * C_h, const cl_uint HeightA, const cl_uint WidthB, 
    const cl_uint WidthAHeightB)
{
    printf("Inside matrix mul, WidthA: %zu, WidthB: %zu, WidthAHeightB: %zu\n", 
        HeightA, WidthB, WidthAHeightB);

    //this error variable will record any errors found and will be returned 
    //by this function
    cl_int error = CL_SUCCESS;
    cl_int clEnqueueReadBuffer_error;

    //declare a place for the memory on the device, A is the A matrix, 
    //B is the B matrix, C is the C result matrix
    cl_mem A_d, B_d, C_d;               
    //this is a temporary value for holding the maximum work group size
    size_t maximum_local_ws;

    //variable for holding the number of work items per group
    size_t local_ws[2]; 
    //variable for holding the number of work items              
    size_t global_ws[2];            

    //calcuate work group and local size
    //get the maximum work group size for the kernel, i.e. set local_ws
    clGetKernelWorkGroupInfo((* matrixMulKernel), (* device), 
        CL_KERNEL_WORK_GROUP_SIZE, sizeof(maximum_local_ws), 
        &maximum_local_ws, NULL);

    //find the largest integer, power of 2, square root, for maximum_local_ws 
    //that is less than or equal to 16
    for(size_t i = 1; (i * i) <= maximum_local_ws && i <= maxBlockSize; i *= 2)
    {
        local_ws[0] = i;
        local_ws[1] = i;
    }
    //calculate global work size
    global_ws[0] = WidthB;  
    global_ws[1] = HeightA;

    printf("Work group size calculated.\n");

    //Allocate global memory on the device
    //put A on the device
    A_d = clCreateBuffer ((* context), CL_MEM_COPY_HOST_PTR, 
        (WidthAHeightB * HeightA * sizeof(float)), A_h, &error);    
    //put B on the device   
    B_d = clCreateBuffer ((* context), CL_MEM_COPY_HOST_PTR, 
        (WidthB * WidthAHeightB * sizeof(float)), B_h, &error);
    //create a space for C on the device        
    C_d = clCreateBuffer ((* context), CL_MEM_READ_WRITE, 
        (HeightA * WidthB * sizeof(float)), NULL, &error);              

    printf("Global memory allocated.\n");

    if(error == CL_SUCCESS)
    {
        //set the prarameters of the kernels
        //Put in A
        error  = clSetKernelArg((* matrixMulKernel), 0, sizeof(cl_mem), &A_d);
        //Put in B                                                  
        error |= clSetKernelArg((* matrixMulKernel), 1, sizeof(cl_mem), &B_d);
        //Put in C                                  
        error |= clSetKernelArg((* matrixMulKernel), 2, sizeof(cl_mem), &C_d);                          
        //Put in HeightA
        error |= clSetKernelArg((* matrixMulKernel), 3, sizeof(cl_uint), 
            &HeightA);                              
        //Put in WidthB
        error |= clSetKernelArg((* matrixMulKernel), 4, sizeof(cl_uint), 
            &WidthB);                               
        //Put in WidthAHeightB
        error |= clSetKernelArg((* matrixMulKernel), 5, sizeof(cl_uint),
            &WidthAHeightB);                        

        printf("Parameters added to the kernel.\n");

        if(error == CL_SUCCESS)
        {
            //execute the kernel
            printf("Running Kernel, Local work size: %zu x %zu global worksize: 
            %zu x %zu, HeightA: %zu, WidthB: %zu, WidthAHeightB: %zu\n", 
                local_ws[0], local_ws[1], global_ws[0], global_ws[1], 
                HeightA, WidthB, WidthAHeightB);
            error = clEnqueueNDRangeKernel((* commandQueue),   
                (* matrixMulKernel), 1, NULL, global_ws, local_ws, 0, NULL, 
                NULL);

                printf("Kernel Ran.\n");

            if(error == CL_SUCCESS)
            {
                 printf("Kernel Launched Successfully\n");
            }
            else
            {
                printf("Kernel Not Launched\n");
            }
        }
    }
    else 
    {
        printf("Parameters not added to the kernel.\n");
    }
    printf("Reading results back from device\n");

    //read the result back to the host system, (copy C_h to C_d)
    clEnqueueReadBuffer_error = clEnqueueReadBuffer((* commandQueue), C_d,  
        CL_TRUE, 0, HeightA * WidthB * sizeof(float), C_h, 0, NULL, NULL);

    //make sure we don't write over previous errors, if 
    //clEnqueueReadBuffer_error has an error
    if(error == CL_SUCCESS)
    {
        error = clEnqueueReadBuffer_error;
    }

    printf("Freeing device memory\n");

    //Free global memory on the device
    clReleaseMemObject(A_d);
    clReleaseMemObject(B_d);
    clReleaseMemObject(C_d);

    return error;
} 
```

这段代码在运行时会输出一些奇怪的东西：

> 内部矩阵 mul, WidthA: 16, WidthB: 16, WidthAHeightB: 16
> 计算工作组大小。
> 分配的全局内存。
> 添加到内核的参数。
> 运行内核，本地工作大小：1 x 1 全局工作大小：16 x 16，HeightA：16，WidthB：140733193388048，WidthAHeightB：16
> Kernel Ran。
> 内核启动成功
> 从设备中读取结果
> 释放设备内存

由于某种原因，widthB 的值从 16 更改为 140733193388048。奇怪的是，widthB 不同，而 WidthA 和 WidthAHeightB 尽管使用方式相同，但保持不变。此外，在我给它的所有调用中，值 140733193388048 仍然具有异常的确定性。

因此，我的设备返回的矩阵的第一行与主机相同，但后续值不同。

我正在使用 Apple 在 Snow Leopard 中的 OpenCL 实现在 Mac OS X 上编程。

这里发生了什么，你如何防止这样的事情发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:36:22.177

我的内核没有返回正确答案的原因之一是因为我没有为 clEnqueueNDRangeKernel 提供工作组的正确维数。我仍然得到 WidthB 的奇怪输出，如果我想尝试调试我的程序，知道我的打印输出不准确，这并不令人欣慰。

# javascript - 展开/折叠具有嵌套行的表行

> ID：11574586
> 
> 赞同：2
> 
> 时间：2012-07-20T07:13:25.560
> 
> 标签：javascript, jquery, html

我想创建一个具有以下结构的表：
Row1 datacolumn1 datacolumn2 datacolumn2
SubRow1 datacolumn1 datacolumn2 datacolumn2 SubRow2 datacolumn1
datacolumn2 datacolumn2 SubRow3
datacolumn1 datacolumn2 datacolumn2

我想让子行在点击时展开/折叠。我似乎无法让它与表格一起使用。我知道列表会是一个更好的选择，但表格更容易维护。

```
<tbody>
    <tr class="row1 head1">
        <td>Cash and Equivalents</td>
        <td>000,000</td>
        <td>000,000</td>

    </tr>
    <tr class="row1 head2 closed">
        <td>Cash and Equivalents</td>
        <td>000,000</td>
        <td>000,000</td>

    </tr>
    <tr class="row1 head3">
        <td>Cash and Equivalents</td>
        <td>000,000</td>
        <td>000,000</td>

    </tr>
    <tr class="row1 head4">
        <td>Cash and Equivalents</td>
        <td>000,000</td>
        <td>000,000</td>

    </tr>
    <tr class="row1 head5">
        <td>Cash and Equivalents</td>
        <td>000,000</td>
        <td>000,000</td>

    </tr>
    <tr class="row2 head1">
        <td>Cash and Equivalents</td>
        <td>000,000</td>
        <td>000,000</td>

    </tr>

    <tr class="row2 head4">
        <td>Cash and Equivalents</td>
        <td>000,000</td>
        <td>000,000</td>

    </tr>
    <tr class="row2 head5">
        <td>Cash and Equivalents</td>
        <td>000,000</td>
        <td>000,000</td>

    </tr>
    <tr>
        <td>Cash and Equivalents</td>
        <td>000,000</td>
        <td>000,000</td>

    </tr>
    <tr>
        <td>Cash and Equivalents</td>
        <td>000,000</td>
        <td>000,000</td>

    </tr>

</tbody> 
```

在行单击时，我调用以下函数：

```
holdingsTree: function(that){
    var stack = '',
        classes = ba.splitClasses(that.attr('class')),
        nextRow = ba.getClassNumber(classes[1], "head");

    if (that.next().hasClass('head'+nextRow)){
        if (that.next().hasClass(classes[0]) && that.next().hasClass('open')){
            that.nextUntil('.head1').hide().addClass('closed').removeClass('open');
        } else if (that.next().hasClass(classes[0])){
            stack = that.nextUntil('.head1');
            $.each(stack, function(i, item){ if ($(item).hasClass('head' + (nextRow))){ $(this).show().addClass('open').removeClass('closed'); } });
        }
    } else if (that.next().hasClass('head'+ (nextRow+1))){
        if (that.next().hasClass(classes[0]) && that.next().hasClass('open')){
            that.nextUntil('.head1').hide().addClass('closed').removeClass('open');
        } else if (that.next().hasClass(classes[0])){
            stack = that.nextUntil('.head1');
            $.each(stack, function(i, item){ if ($(item).hasClass('head' + (nextRow+1))){ $(this).show().addClass('open').removeClass('closed'); } });
        }
    } else if (that.next().hasClass('head'+ (nextRow+2))){
        if (that.next().hasClass(classes[0]) && that.next().hasClass('open')){
            that.nextUntil('.head1').hide().addClass('closed').removeClass('open');
            return;
        } else if (that.next().hasClass(classes[0])){
            stack = that.nextUntil('.head'+ (nextRow+3));
            $.each(stack, function(i, item){ if ($(item).hasClass('head' + (nextRow+2))){ $(this).show().addClass('open').removeClass('closed'); } });
            //stack.find('.head'+(nextRow+2)).show().addClass('open').removeClass('closed');
        }
    } else if (that.next().hasClass('head'+ (nextRow+3))){
        if (that.next().hasClass(classes[0]) && that.next().hasClass('open')){
            that.nextUntil('.head1').hide().addClass('closed').removeClass('open');
        } else if (that.next().hasClass(classes[0])){
            stack = that.nextUntil('.head1');
            $.each(stack, function(i, item){ if ($(item).hasClass('head' + (nextRow+3))){ $(this).show().addClass('open').removeClass('closed'); } });
        }
    } else if (that.next().hasClass('head'+ (nextRow+4))){
        if (that.next().hasClass(classes[0]) && that.next().hasClass('open')){
            that.nextUntil('.head1').hide().addClass('closed').removeClass('open');
        } else if (that.next().hasClass(classes[0])){
            that.nextUntil('.head1').show().addClass('open').removeClass('closed');
        }
    } 

},

splitClasses: function(names){
    var names = names.split(' ');
    return names;
},

getClassNumber: function(name, pretext){
    var result = name.split(pretext);
    console.log(parseInt(result[1]) + 1);
    return parseInt(result[1]) + 1;
} 
```

这很糟糕。我知道。:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T07:31:44.727

您可以为您称为父母的行设置一个类，为您称为子项的行设置一个类，并切换它们的显示。

就是这样：

```
$(document).ready(function() {

    function getChildren($row) {
        var children = [];
        while($row.next().hasClass('child')) {
             children.push($row.next());
             $row = $row.next();
        }            
        return children;
    }        

    $('.parent').on('click', function() {

        var children = getChildren($(this));
        $.each(children, function() {
            $(this).toggle();
        })
    });

}) 
```

检查此小提琴以获取完整的运行代码[http://jsfiddle.net/T8t2r/3/](http://jsfiddle.net/T8t2r/3/) 如果这解决了您的问题，请接受答案！

祝你好运！

编辑：在更多级别上工作的一种方法是拥有一个级别属性。所以这里是更新版本，它应该适用于任意数量的级别。[http://jsfiddle.net/T8t2r/9/](http://jsfiddle.net/T8t2r/9/)

```
$(document).ready(function() {

    function getChildren($row) {
        var children = [], level = $row.attr('data-level');
        while($row.next().attr('data-level') > level) {
             children.push($row.next());
             $row = $row.next();
        }            
        return children;
    }        

    $('.parent').on('click', function() {

        var children = getChildren($(this));
        $.each(children, function() {
            $(this).toggle();
        })
    });

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:26:57.280

从那个例子中很难看出你想要做什么。

您尝试做的事情应该相当简单 - 我要做的是使用以下概念从头开始重写：

1.  为每个可点击的项目（行）提供它自己的 ID，但将它们全部放在一个“可点击”类中
2.  根据可点击父项的 ID 为每个子行指定一个类 - 例如“[id]-sub”
3.  在“可点击”类上设置点击事件，您可以在其中确定点击的项目 ID，并使用它来切换（隐藏/显示）类“[点击的 ID]-sub”的所有行

这样做，你应该有更少的代码，它应该更具可读性。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:40:42.550

你可以这样做：

```
$('.mySelectorOfNOTSubRow').toggle(
    function(){
        $(this).nextUntil('.mySelectorOfNOTSubRow').show();
    }, function(){
        $(this).nextUntil('.mySelectorOfNOTSubRow').hide();
}); 
```

HTML：

```
<table>
<tbody>
<tr class="head"><td></td></tr>
     <tr class="sub"><td></td></tr>
     <tr class="sub"><td></td></tr>
     <tr class="sub"><td></td></tr>
<tr class="head"><td></td></tr>
     <tr class="sub"><td></td></tr>
     <tr class="sub"><td></td></tr>
     <tr class="sub"><td></td></tr>
<tr class="head"><td></td></tr>
     <tr class="sub"><td></td></tr>
     <tr class="sub"><td></td></tr>
     <tr class="sub"><td></td></tr>
...
</tbody>
</table> 
```

CSS：

```
.sub{display: none;} 
```

[小提琴](http://jsfiddle.net/cGhE7/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T07:25:47.750

由于您已经在使用 jQuery，您可以使用插件[datatales](http://datatables.net/)。

正如您在页面的示例部分中看到的那样，这正是您试图通过代码实现的目标。

# c# - 在 C# 的文本框中显示正在运行的日期和时间

> ID：11574587
> 
> 赞同：2
> 
> 时间：2012-07-20T07:13:26.593
> 
> 标签：c#

我尝试在这个网站上搜索显示日期和时间的方法。但是这里的所有示例仅显示静态日期和时间。有没有办法显示正在运行的日期和时间，或者我应该说每秒递增一次？它是否涉及每秒更新时间？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T07:15:30.300

使用[计时器](https://msdn.microsoft.com/en-us/library/system.windows.forms.timer(v=vs.110).aspx)对象，并在[刻度](https://msdn.microsoft.com/en-us/library/system.windows.forms.timer.tick(v=vs.110).aspx)事件中在 winforms 使用的文本框中显示日期

```
System.Windows.Forms.Timer tmr = null;
private void StartTimer()
{
    tmr = new System.Windows.Forms.Timer();
    tmr.Interval = 1000;
    tmr.Tick += new EventHandler(tmr_Tick);
    tmr.Enabled = true;
}

void tmr_Tick(object sender, EventArgs e)
{
    myTextBox.Text = DateTime.Now.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:15:45.357

您可以在表单中添加[计时器。](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)将其设置为每秒触发一次。在计时器的事件处理程序中，使用当前时间更新文本框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:15:47.353

你的第二个选择是对的。

这完全是关于使用计时器并使用当前时间更新*TextBox 。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-25T18:17:32.510

Task中有一个Delay方法，以毫秒为输入。对我来说，时间更新的代码如下所示，

```
Using System.Threading.Tasks;    
async void TimeUpdater()
    {
        while (true)
        {
            TxtTime.Text = DateTime.Now.ToString();
            await Task.Delay(1000);
        }
    } 
```

这将更新 UI 并等待`1 Second`然后再次迭代，无限次。也不要忘记制作方法`async`，因为`await operator`. 正如我所研究的，这是在 UI 天气 WinForms 或 WPF 中获取运行日期和时间的最简单方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T07:30:05.773

使用间隔为 1 秒的计时器。如果您的应用程序是 winforms，请使用 windows.forms 命名空间[http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)中的计时器，它与 gui 在同一线程中运行，因此它更新 gui 是安全的。您也可以使用 system.threading 命名空间中的计时器，但在这种情况下，您应该通过调用调用方法[http://msdn.microsoft.com/en-us/library/ms171728.aspx](http://msdn.microsoft.com/en-us/library/ms171728.aspx)以线程安全的方式更新控件。如果您的应用是网络应用，请改用 javascript

# syntax-highlighting - 在 Notepad++ 中，为文件类型设置背景颜色

> ID：11574590
> 
> 赞同：5
> 
> 时间：2012-07-20T07:13:47.340
> 
> 标签：syntax-highlighting, notepad++

当同时打开各种文件类型时，例如 Notepad++ 中的 .html、.css 和常规 .txt 文件，是否可以为每种文件类型设置不同的主背景颜色？

每当我在样式配置器中更改任何主题、语言类型、默认样式以及全局覆盖的背景颜色时，每个文档选项卡和类型都会反映背景颜色的变化。

每种语言在样式配置器中都有自己的一组颜色说明符。文本颜色和语法突出显示颜色似乎保持不变，但主要的背景颜色似乎是全局的一刀切？

如果我希望文本文件始终是带有黑色文本的白色背景，但所有 .html 文件都是带有白色文本的黑色背景 - 并且每个文件同时打开，该怎么办？

我花了太多时间进行智能试验、错误和研究。也许我正在尝试做不可能的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:40:16.233

您根本无法在每个文件的基础上执行此操作。

您*可以*在每种语言的基础上执行此操作，但没有语言级别的覆盖（“DEFAULT”颜色条目不计算在内），就像应用程序级别的覆盖（“全局覆盖”条目）一样。这意味着您必须在给定语言的所有单独颜色条目中手动设置相同的背景颜色。这也意味着如果您想更改背景颜色......您必须为该语言的所有单独条目更改它。

此外，由于 Notepad++ 使用基于语言的语法高亮显示，这意味着如果您在 HTML 文件中有内部样式表，并且 HTML 和 CSS 有不同的背景颜色，您将在同一个文件中看到两种背景颜色。无法为嵌入在 HTML 中的 CSS 或 JavaScript 指定不同的配色方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-27T14:18:27.403

打开你的 n++ 安装文件夹，进入文件夹“themes”，打开你广泛使用的主题文件（我的是 khaki.xml）。找到您要更改的 LexerType（即 tcl），在 <LexerType...> 节点之后添加如下一行：

```
<WordsStyle name="Default Style" styleID="32" fgColor="5F5F00" bgColor="FFFFFF" fontName="" fontStyle="0" fontSize="" /> 
```

重新打开 n++，进入样式配置器，选择您的样式，现在当您设置**默认样式**背景颜色时，所有背景（文本外）都会改变。

干杯。

# javascript - 单击按钮时打开窗口作为使用 javascript 的模态对话框

> ID：11574600
> 
> 赞同：3
> 
> 时间：2012-07-20T07:14:27.430
> 
> 标签：javascript, asp.net, html

单击按钮时，我必须打开一个窗口，作为使用 JavaScript 的模式对话框。我使用过`window.open`，但它显示了两个实例，父页面和弹出页面。当弹出页面打开时，不允许用户点击父页面。

```
function openWindow() {
  var w = 950;
  var h = 350;
  var t = 0;
  var l = 0;
  var scrollbars = 1;
  var modal = 'yes';

  var reportWindow = window.open("Search.aspx" + '', '', "width=" + w + ",height=" + h + ",left=" + l + ",top=" + t + ',scrollbars=' + scrollbars + 'modal' + modal);
  reportWindow.focus();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T07:20:41.987

你的代码行，

```
reportWindow = window.open("Search.aspx" + '', '', "width=" + w + ",height=" + h + ",left=" + l + ",top=" + t + ',scrollbars=' + scrollbars + 'modal' + modal); 
```

模态后缺少“=”符号。它应该是，

```
reportWindow = window.open("Search.aspx" + '', '', "width=" + w + ",height=" + h + ",left=" + l + ",top=" + t + ',scrollbars=' + scrollbars + 'modal=' + modal); 
```

要将窗口作为对话框打开，

```
 <html>
    <body>
    <script language="JavaScript">
    function openWindow() {
       if (window.showModalDialog) {
window.showModalDialog("http://example.com","name",
"dialogWidth:255px;dialogHeight:250px");
} else {
window.open('http://example.com','name',
'height=255,width=250,toolbar=no,directories=no,status=no, linemenubar=no,scrollbars=no,resizable=no ,modal=yes');
}
    } 
    </script>
    <button onclick="openWindow();">Open window</button>
    </body>
    </html> 
```

如果上述代码不起作用，请使用 jQuery 模态对话框。您可以使用 iframe 将任何 url 加载到对话框中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:33:24.567

“window.open”将不起作用。这个命令总是只打开一个弹出窗口，它并不“总是”在其父级之上。

2个选项：

1.  如果您只想让用户输入您可以使用的搜索字符串

    ```
    prompt("Please enter a search string:", ""); 
    ```

2.  如果您有一个复杂的搜索表单，您必须为自己创建一个模式对话框。有提供此功能的框架（谷歌为“jQuery”）或者您自己创建它。应该不难，如果您需要帮助，请告诉我！

# android - 模拟器和 AVD 的区别

> ID：11574601
> 
> 赞同：2
> 
> 时间：2012-07-20T07:14:31.937
> 
> 标签：android, android-emulator, avd

我刚刚切换到android开发并遇到了这个疑问。**AVD与****模拟器**有何 不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T08:06:15.263

**AVD : Android 虚拟设备**

引自 Android 开发者网站：[管理虚拟设备](http://developer.android.com/tools/devices/index.html)

> Android 虚拟设备 (AVD) 是一种模拟器配置，可让您通过定义由 Android 模拟器模拟的硬件和软件选项来模拟实际设备。

这本身意味着`AVD`并且`emulator`是不同的。即，`AVD`是一个`emulator configuration`. 同样，`AVD`是一个运行在`Android Emulator`

**安卓模拟器**

现在我们需要一个解释`Android Emulator`。再次引用开发者网站。[使用安卓模拟器](http://developer.android.com/tools/devices/emulator.html)

> Android SDK 包括一个在您的计算机上运行的虚拟移动设备模拟器。该模拟器可让您在不使用物理设备的情况下对 Android 应用程序进行原型设计、开发和测试。
> 
> Android 模拟器模仿了典型移动设备的所有硬件和软件功能，但它不能拨打实际的电话。它提供了多种导航和控制键，您可以使用鼠标或键盘“按下”它们来为您的应用程序生成事件。它还提供了一个屏幕，其中显示您的应用程序以及任何其他活动的 Android 应用程序。
> 
> **为了让您更轻松地建模和测试您的应用程序，该模拟器使用了 Android 虚拟设备 (AVD) 配置。**AVD 允许您定义模拟手机的某些硬件方面，并允许您创建许多配置来测试许多 Android 平台和硬件排列。一旦您的应用程序在模拟器上运行，它就可以使用 Android 平台的服务来调用其他应用程序、访问网络、播放音频和视频、存储和检索数据、通知用户以及呈现图形过渡和主题。

注意上面引用中的粗体句**。**它清楚地提到，***Android Emulator 使用 AVD 配置***。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T07:19:31.837

Android 虚拟设备 (AVD) 是一种模拟器配置，可让您通过定义由 Android 模拟器模拟的硬件和软件选项来模拟实际设备。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T07:20:26.400

Android**虚拟设备 (AVD) 是一种模拟器**配置，可让您通过定义由 Android 模拟器模拟的硬件和软件选项来模拟实际设备。

[https://developer.android.com/studio/run/managing-avds.html](https://developer.android.com/studio/run/managing-avds.html)

Android SDK 包括一个移动设备模拟器——在您的计算机上运行的**虚拟移动设备。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T07:21:53.050

**AVD**：Android 虚拟设备是一个模拟器，它为您提供了一个平台来测试您的应用程序，并查看它在真实设备上的外观。

您可以从 AVD Manager for Emulators 设置配置，并查看应用程序在不同操作系统版本、屏幕尺寸等上的行为。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T07:18:35.800

AVD 是 Android 虚拟设备，与 Android Emulator 相同。他们的意思是一样的

# python - 用于 Google App Engine Python 的 Pygments 不起作用

> ID：11574603
> 
> 赞同：1
> 
> 时间：2012-07-20T07:14:41.307
> 
> 标签：python, google-app-engine, pygments

这是我的代码：

```
from google.appengine.ext import db
import pygments
from pygments import highlight
from pygments.lexers import get_lexer_by_name
from pygments.formatters import HtmlFormatter 
```

但我得到：

```
import pygments
ImportError: No module named pygments
INFO     2012-07-20 07:05:44,386 dev_appserver.py:2952] "GET / HTTP/1.1" 500 - 
```

我究竟做错了什么？

Google App Engine 不支持 pygments 吗？我以为是...有人可以纠正我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:29:56.327

您可以运行 Pygments，因为它是纯 Python，但它不作为 GAE 中的默认库包含在内。相反，您需要下载源代码并将其复制到您的项目中。

1.  转到 PyPi 并下载[Pygments](http://pypi.python.org/pypi/Pygments)。

2.  解压它，然后将源代码复制到*您项目的应用引擎文件夹中*（最好在顶层）。

3.  然后你可以`import pygments`像往常一样做。如果你想把它放在一个子目录中（比如`mypackages`），你必须改变导入字符串，例如`from mypackages import pygments`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:18:27.630

它*支持*它（因为 Pygments 是纯 Python），但它可能不*包含*它。将模块复制到`sys.path`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T20:02:42.990

将第 3 方移至`lib`目录。将此行添加到您的主文件中。`pygments`与_`import pygments`

```
import os
import sys

sys.path.insert(1, os.path.join(os.path.abspath('.'), 'lib'))
import application 
```

[https://github.com/kamalgill/flask-appengine-template/blob/master/src/run.py](https://github.com/kamalgill/flask-appengine-template/blob/master/src/run.py)

# c++ - Visual Studio 2010 源代码管理集成不适用于解决方案文件夹之外的文件

> ID：11574618
> 
> 赞同：0
> 
> 时间：2012-07-20T07:15:32.523
> 
> 标签：c++, visual-studio-2010, visual-sourcesafe

我有一些在 2 个项目之间共享的头文件和 cpp 文件，所以我将它们放在一个名为 Common 的文件夹中：

```
C:\Workspace\Common\utils.h
C:\Workspace\Common\utils.cpp
C:\Worspace\Project1\Project1.sln
C:\Worspace\Project2\Project2.sln 
```

两个文件 utils.h 和 utils.cpp 被添加到两个项目中，它们也被添加到 SourceSafe 中。但是，菜单中的“文件->源代码管理->签出”对于这两个文件是禁用的，即使它们已添加到项目中。

这是因为它们在解决方案的文件夹之外，我该如何解决？现在，每当我想编辑这些文件时，我都必须手动检查它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:20:11.793

正如您所提到的，文件 - > 签出被禁用，因为这些文件不是解决方案的一部分。从源代码管理资源管理器中检出它们的唯一方法是将它们添加到解决方案中。处理此问题的一种方法是添加一个新的“[解决方案文件夹](http://msdn.microsoft.com/en-us/library/sx2027y2.aspx)”并将您的公用文件夹添加到该文件夹​​中。然后您应该能够从解决方案资源管理器中执行获取最新/结帐。

# symfony - symfony 2 lesscss 路径

> ID：11574624
> 
> 赞同：6
> 
> 时间：2012-07-20T07:15:55.140
> 
> 标签：symfony, less

我正在使用带有较少过滤器的资产并将主要的较少文件存储在应用程序/资源/...我想从捆绑包中导入其他较少的样式表到该文件中。一切正常，但路径让我发疯。

我的 base.less 看起来或多或少是这样的：

```
@import 'normalize.less';
@import 'mixins.less';
@import 'header.less';
@import 'footer.less';

@import "../../../../../../src/Acme/FooBundle/Resources/public/less/example.less"; 
```

有没有办法将'paths'选项传递给symfony2中的less编译器？

编辑：我在 github 上的assetic 回购中发现了我的问题： [https ://github.com/kriswallsmith/assetic/pull/218](https://github.com/kriswallsmith/assetic/pull/218)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:24:32.457

是否可以像他们在较少的文档中所说的那样将路径存储在变量中？

```
@base-url: "http://assets.fnord.com";
background-image: url("@{base-url}/images/bg.png"); 
```

这不完全是您想要的，但这样您只定义一次。

# java - 可以使用 java 从合并查询中拆分插入语句和更新语句

> ID：11574630
> 
> 赞同：-1
> 
> 时间：2012-07-20T07:16:30.297
> 
> 标签：java

我有一个像这样的合并查询

```
MERGE INTO dept a
 USING (
     SELECT  50           deptno
          , 'ENGINEERING' dname
          , 'WEXFORD'     loc
     FROM dual
 ) b
 ON (a.deptno = b.deptno)
 WHEN NOT MATCHED THEN
     INSERT VALUES (b.deptno, b.dname, b.loc)
 WHEN MATCHED THEN
     UPDATE SET a.loc = 'WEXFORD, PA'; 
```

我需要像这样的输出：

```
INSERT VALUES (b.deptno,b.dname,b.loc)
UPDATE SET a.loc='WEXFORD,pA' 
```

我可以通过使用 substring 任何其他简单的方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:25:29.817

据我了解，您并不特别关心*执行*查询，您只想提取查询文本的某些部分，对吗？您最好的办法是制定一个描述这些部分的正则表达式，将它们与输入字符串进行匹配，然后打印您找到的每个匹配项的相关部分。

一个简单的例子是这样的：

```
import java.util.regex.*;
class Foo {
    private static final Pattern re
      = Pattern.compile("INSERT VALUES \\(.*?\\)|UPDATE SET .*;");
    static void find(String text) {
        Matcher m = re.matcher(text);
        while (m.find())
            System.out.println(m.group());
    }
} 
```

这个简单的示例期望插入部分包含与表达式中完全一致的空格，并且后跟一个带括号的参数列表。更新预计将持续到查询结束。有关如何制定正则表达式的信息，请参阅[Pattern 文档。](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

如果要处理可能包含括号、分号甚至看起来像 SQL 命令的单词的字符串，事情会变得更加困难。如果您在某些时候需要检测任意级别的嵌套括号，那么这根本无法使用正则表达式来表达。

# java - 在需要连接到具有不同 URL 的数据库的 tomcat 中部署两个项目

> ID：11574634
> 
> 赞同：-1
> 
> 时间：2012-07-20T07:16:44.293
> 
> 标签：java, jakarta-ee, tomcat, web-deployment

在我的项目中，servlet 必须连接到数据库*（derby）*。我将项目构建到`.war`文件中。

现在在 Tomcat 中部署项目之前，我如何告诉服务器数据库的 URL、JNDI 名称、驱动程序名称等。我该怎么做？我被告知将这些添加到`context.xml`文件中。我必须自己创建这个文件吗？`conf`否则tomcat目录下还有一个context.xml文件。我必须再部署一个项目，该项目也需要连接到数据库但具有不同的 URL。所以我认为我无法在*conf*目录中的`context.xml`文件中添加详细信息。

 *我如何部署这两个项目？我需要制作2个不同的`context.xml`文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:48:05.147

将配置放入 context.xml 并将该文件放入战争的 META-INF 文件夹中。请参阅 tomcat 网站上的 tomcat 上下文文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T09:12:31.697

如果您使用 hibernate 将数据持久化到数据库，那么您需要在 hibernate.cfg.xml 中提及数据库 url、名称、密码。

如果要从 Servlet 本身打开数据库连接。然后参考这个[http://www.roseindia.net/servlets/databaseconnectionservlet.shtml](http://www.roseindia.net/servlets/databaseconnectionservlet.shtml)。我希望它会帮助你。*

# javascript - 可能的 Javascript 范围问题

> ID：11574643
> 
> 赞同：0
> 
> 时间：2012-07-20T07:17:31.880
> 
> 标签：javascript

我对此有点菜鸟，所以请原谅我:)

我无法获取函数的这一部分来更新变量。谁能看看我做错了什么？

[http://pastie.org/private/zfnv8v2astglabluo89ta](http://pastie.org/private/zfnv8v2astglabluo89ta)

从第 142 行到第 172 行，我最终没有得到任何结果。我已经在该函数内部进行了测试，以确保它实际上正在返回数据，但是“body”变量在第 172 行之后传回。因此，如果我查看页面上生成的 HTML，它只是看起来函数从 140 跳过到 174。

感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:21:23.680

你`$.get`的是异步的。这意味着它将在其余代码之后的某个时间完成，因此您不会看到它对该函数内的 body 变量的影响。相反，它的成功回调函数将在该函数完成后很久才被调用。

要像这里那样链接多个异步 ajax 调用，不能只使用正常的顺序编程，因为异步 ajax 调用不是顺序的。发送网络请求，然后您的 javascript 继续执行，并且在响应到达后的某个时间，成功处理程序被调用并被执行。

要像您一样运行顺序 ajax 调用，您必须将工作嵌套在成功处理程序中，以便使用响应的唯一代码实际上在成功处理程序中。在伪代码中，它看起来像这样：

```
$.get(..., function(data) {
    // operate on the results only in here

    // a second ajax function that uses the data from the first 
    // or adds onto the data from the first
    $.get(..., function(data) {
        // now finally, you have all the data 
        // so you can continue on with your logic here

    });
    // DO NOT PUT ANYTHING HERE that uses the responses from the ajax calls 
    // because that data will not yet be available here
}); 
```

你不能做你正在做的事情，就像这样：

```
var myVariable;

$.get(..., function(data) {
    // add something to myVariable
});
$.get(..., function(data) {
    // add something to myVariable
});
$.get(..., function(data) {
    // add something to myVariable
});
// do something with myVariable 
```

在函数结束之前，这些 ajax 调用都不会完成。您必须遵循我的第一个示例中的设计模式。

对于更高级的工具，人们总是可以使用[jQuery deferreds](http://api.jquery.com/category/deferred-object/)，这只是在 ajax 调用完成后定义要运行的代码的另一种方式。它看起来有点像顺序编程，尽管它实际上只是调度代码以与我的第一个代码示例相同的方式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:22:54.917

函数 8 将在第 174-180 行之后调用。您必须将 174-180 行的代码放在函数末尾

# c# - 运行两个 foreach 循环

> ID：11574654
> 
> 赞同：1
> 
> 时间：2012-07-20T07:18:08.687
> 
> 标签：c#, loops

如果我有两个 foreach 循环，如下所示：

```
foreach(var a in b)
foreach(var c in d)

combining them into single foreach loop
foreach(var e in both b and d) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T07:21:29.160

不，没有“两种”语法。目前还不清楚你在追求什么*。*如果你想连接，那么

```
foreach(var e in b.Concat(d)) 
```

如果你想要组合集：

```
foreach(var e in b.Union(d)) 
```

或者两者共有的集合：

```
foreach(var e in b.Intersect(d)) 
```

如果你想要一个交叉加入，那么也许`SelectMany`. 但坦率地说，为此，嵌套`foreach`在您的情况下同样合理和有效。

# .net - 这个字符串中的方括号在 vb.net 中是什么意思

> ID：11574655
> 
> 赞同：1
> 
> 时间：2012-07-20T07:18:23.620
> 
> 标签：.net, vb.net, variables, specifications, square-bracket

在下面定义为 [String] 的此变量中，方括号在 vb.net 中的含义是什么

```
Dim client As New WebClient()
Dim htmlCode As [String] = client.DownloadString("http://www.stackoverflow.com") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:22:28.470

在您的示例中没有用。例如，括号可以将保留关键字用于它们不是的东西

```
Dim [String] = "asdf" 
```

这将创建一个名为“String”的变量（这很愚蠢，但是......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:35:17.857

它允许您在代码中使用保留字。有一些关于此的错误信息，因为 MS 网站上的一些示例在不需要它们的地方使用方括号（在示例中，您给方括号不做任何事情）

作为一个例子，我最近想使用`lat`and`long`作为函数的参数：

```
Public Function CalcPosition(ByVal lat as Double, ByVal long as Double) as Double 
```

这不会编译，因为 Long 是保留字，但我可以这样做：

```
Public Function CalcPosition(ByVal lat as Double, ByVal [long] as Double) as Double 
```

# java - 为什么 Class CloneNotSupportedException 是已检查的异常，而不是扩展 RuntimeException？

> ID：11574657
> 
> 赞同：5
> 
> 时间：2012-07-20T07:18:28.967
> 
> 标签：java

`clone()`如果遇到 CloneNotSupportedException ，调用者如何恢复？为什么它是一个检查异常？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T07:21:32.177

> 为什么它是一个检查异常？

我怀疑答案是真的：“因为当 Java 刚问世时，很少有人知道什么时候检查异常是有意义的。” 那时，他们没有有效的 Java :)

有很多这样的事情 - 检查但可能不应该检查的异常，以及未检查但应该检查异常的情况......`Integer.parseInt`抛出`NumberFormatException`可能是最清楚的例子。

# java - Tomcat服务器 - 方法签名更改时需要重新启动

> ID：11574658
> 
> 赞同：3
> 
> 时间：2012-07-20T07:18:31.540
> 
> 标签：java

当我更改 Controller 类的方法签名时，eclipse 询问是否需要重新启动服务器。为什么我们需要在这种情况下重新启动服务器才能反映更改？对于类文件中的任何其他更改，不需要重新启动，但会反映所做的更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:22:56.523

您正在使用一种称为*热交换*的机制，它允许您更改方法主体而无需重新启动 JVM。不幸的是，这是唯一受支持的机制。[查看](http://zeroturnaround.com/software/jrebel/features/) 支持许多其他重构/更改的[jrebel （商业）。](/questions/tagged/jrebel "显示标记为“jrebel”的问题")

# c# - 我的代码逻辑有什么问题？

> ID：11574668
> 
> 赞同：-1
> 
> 时间：2012-07-20T07:19:05.553
> 
> 标签：c#, datetime

我需要找到年龄最大和最小的学生。最终用户必须将生日输入到字符串中。

```
DateTime young = DateTime.MinValue;
DateTime old = DateTime.MinValue;

foreach (var d in students)
{
    try
    {
        DateTime dt = Convert.ToDateTime(d.dob);
        int result = DateTime.Compare(young, dt);
        if (result < 0)
        {
            old = dt;
        }

        if (result > 0)
        {
            young = dt;
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message.ToString());
    }
}

Console.WriteLine("the youngest age is {0}",young);
Console.WriteLine("the oldest age is {0}", old); 
```

逻辑有问题，我无法获得准确的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:22:40.363

看看这部分：

```
int result = DateTime.Compare(young, dt);
if (result < 0)
{
    old = dt;
} 
```

这对你来说是正确的吗？你真的应该根据候选值是否早于*最年轻的值来调整**最旧*的值吗？

 *还：

*   用于比较`DateTime`值的运算符重载可以使这样的代码*更*简单。
*   使用`earliest`and会比and`latest`更清晰；最年长的人是生日最早的人，但就*日期*而言，早晚更有意义`oldest``youngest`
**   `young`和的初始值`old`是相同的……想想这是否真的是你想要的。（提示：您正在尝试表示值的上限和下限。如果它们以*相同*的值开始，那么您就有麻烦了......）*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:28:55.633

你分配的地方缺少一些东西`int result = DateTime.Compare(young, dt);` 我认为与错误分配有关的问题......你需要检查年轻的老年人

```
try
{
    DateTime dt = Convert.ToDateTime(d.dob); // and what is dob ?
    int result = DateTime.Compare(young, dt);
    if (result < 0)
    {
        old = dt;
    }

    if (result > 0)
    {
        young = dt;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:26:51.890

您需要将 dt 与 old （如果它较旧）进行比较，并将其与 young （如果它较年轻）进行比较。

```
DateTime young = DateTime.MinValue;
DateTime old   = DateTime.MaxValue;
foreach (var d in students)
{
 DateTime dt = Convert.ToDateTime(d.dob);
 old = old < dt ? old : dt;
 young = young > dt ? young : dt;
}
 Console.WriteLine("the youngest age is {0}", young);
 Console.WriteLine("the oldest age is {0}", old); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:19:52.823

日期时间 mv = dOb;

```
 string oldname=sName;
                    string youngname=sName;

                    foreach (var mo in students)
                    {
                        int result = DateTime.Compare(mo.dob, mv);

                        if (result == -1)
                        {
                            mv = mo.dob;
                            oldname = mo.name;
                        }

                        if (result == 1)
                        {
                            mv = mo.dob;
                            youngname = mo.name;
                        }
                    }

                    Console.WriteLine("the youngest student is: {0}", youngname);
                    Console.WriteLine();

                    Console.WriteLine("the oldest student is: {0}", oldname);
                    Console.WriteLine(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T07:22:19.643

```
if ( dt < young )
{
   young = dt;
}

if ( old < dt )
{
   old = dt
} 
```**

# amazon-ec2 - Amazon EC2 PublicDnsName

> ID：11574670
> 
> 赞同：1
> 
> 时间：2012-07-20T07:19:14.187
> 
> 标签：amazon-ec2

如何在 amazonEC2 中获取 PublicDnsName？我们可以使用 ins.getPublicDnsName() 从实例中获取它，但它会在一定时间后创建，有没有其他方法可以获取它？或者一些如何在生成后立即获取它？为了让它等待，我做到了

```
while(flag) {
              time = System.currentTimeMillis() - start;
              for (Reservation res : ec2.describeInstances().getReservations()) {
                 for (Instance ins : res.getInstances()) {
                     if(ins.getState().getName().equalsIgnoreCase("running") || time == MAX_TIME_FOR_THREAD){                        
                         System.out.println(ins.getPublicDnsName()+"#########"+ins.getInstanceId());
                         flag = false;
                         break;
                     }
                 }

                }                        
          } 
```

但是在线程运行中，但是当我创建多个 ec2 资源时，它会多次返回第一台机器的 dns，因为我觉得它应该返回不同的 dns 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:36:17.083

在实例转换到“正在运行”状态和分配公共 IP 地址（以及公共 DNS 名称）之间总是会有一点延迟 - 如果您还自动分配弹性 IP，则延迟会更长。在繁忙的集群上，它可以从一到两秒到 5-10 秒不等。

除了在查询 API 之前检测到“正在运行”状态后引入短暂的延迟之外，您无能为力 - 尽管在您的代码中，您实际上并没有等待足够长的时间让实例进入“正在运行”并且只需点击 MAX_TIME_FOR_THREAD，即有趣的是返回最后检索到的 DNS 名称。这实际上可能是您正在使用的 API 中的一个小故障。

在我的启动器（针对 .NET API 编写）中，我有一个多线程暂存循环，它启动实例，然后休眠等待每个实例注册为“正在运行”，然后进一步休眠等待 IP 地址填充。

# android - 在 manifest.xml 中注册具有许多操作的接收器

> ID：11574671
> 
> 赞同：2
> 
> 时间：2012-07-20T07:19:23.760
> 
> 标签：android, manifest

我想在 Android manifest.xml 中注册一个具有许多操作的接收器。

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction(Intent.ACTION_PACKAGE_ADDED);
intentFilter.addAction(Intent.ACTION_PACKAGE_INSTALL);
intentFilter.addDataScheme("package");
registerReceiver(installReceiver,intentFilter); 
```

我无法弄清楚。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:25:19.827

尝试：

```
<receiver android:name="getBroadcast" android:enabled="true" >   
  <intent-filter>   
    <action android:name="android.intent.action.PACKAGE_ADDED"></action>   
    <action android:name="android.intent.action.PACKAGE_CHANGED"></action>  
    <action android:name="android.intent.action.PACKAGE_INSTALL"></action>  
    <data android:scheme="package"></data>   
  </intent-filter>   
</receiver> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:21:58.240

```
 <receiver
            android:name="your receiver class" >
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_ADDED"/>
                <action android:name="android.intent.action.PACKAGE_INSTALL"/>
                <!--more action-->
                <data android:scheme="package"/>
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:27:15.293

`Intent-Filter`在清单中使用标签`<reciever>`

```
<receiver android:name=".YourReciever">
<intent-filter>
    <action android:name="android.intent.action.PACKAGE_ADDED" />
    <action android:name="android.intent.action.PACKAGE_INSTALL" />
    <action android:name="your action3" />
</intent-filter>
</reciever> 
```

# javascript - div 大小相对于屏幕大小

> ID：11574678
> 
> 赞同：0
> 
> 时间：2012-07-20T07:19:44.467
> 
> 标签：javascript, jquery, css, html

我正在使用 JQuery Mobile 和 Phonegap 编写一个 html5 应用程序。我想在许多不同的设备上运行它们。因此，我希望拥有与屏幕尺寸相关的所有内容。

```
<div id="pos" data-role="content"
        style="border: 5px solid silver; margin-left: auto; margin-right: auto; width: 250px; height: 250px;"> 
```

我使用这个 div 元素在里面显示一个谷歌地图，周围有一个小边框。

如何调整大小，例如屏幕大小的 80%？

我试过宽度：90%；身高：90%，但结果真的很糟糕。它与屏幕无关，它与内容有关。

并且边框的大小固定为 5px，是否可以在此处插入一个很好的参数以使其相对于屏幕大小？

我希望有人能帮帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:57:37.950

如果你不想使用 js，你可能需要定义父母的高度和宽度，我在 jsfiddle [jsfiddle上做了一个例子](http://jsfiddle.net/44QS3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:42:48.510

一个 html 元素，设置为`width: 100%`，延伸到`100%`它的父宽度。您需要确保包含元素的宽度也是`100%`.

您还需要制作`html`和`body`宽度`100%`。

一个例子：

```
html, body { width: 100%; }
#pos { width: 80%; } 
```

这个例子假设#pos 元素是直接在身体上的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:23:32.300

看起来不错，所以我认为问题出在 JQuery 上！这是我这个页面的完整代码：

```
<!DOCTYPE html>
<html>
<head>
<title> App</title>
<script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="jquery.mobile-1.1.1.min.css" />
<script src="jquery-1.7.2.min.js"></script>
<script src="jquery.mobile-1.1.1.min.js"></script>

<style>

  html, body, geolocation { width: 100%; height: 100%; } 
  #pos { width: 80%; height: 80%; } 

</style>
</head>

 <body>
<div data-role="page" id="geolocation" data-theme="a">
    <h2 align="center">Geolocation</h2>
    <div data-role="header" data-position="fixed" data-theme="a">
        <h1>Car Data</h1>
    </div>

    <div id="pos" data-role="content" style="border: 5px solid silver;">
        Deine Position wird ermittelt...</div>

    <script type="text/javascript" src="geolocation.js"></script>

    <div data-role="footer" data-position="fixed" data-id="persFooter">
        <div data-role="navbar">
            <ul>
                <li><a href="home.html" data-icon="home">Connect</a></li>
                <li><a href="carView.html" data-icon="gear">Vehicles</a></li>
                <li><a href="infoView.html" data-icon="info">Info</a></li>
            </ul>
        </div>
    </div>

<script>                                       
    $('#geolocation').on('swipeleft',function(){ 
     $.mobile.changePage("fuelGauge.html", { transition: "slide"}); 
     console.log('slideLeft');
    })  

    $('#geolocation').on('swiperight',function(){ 
     $.mobile.changePage("batteryStatus.html", { transition: "slide", reverse: 'true'});    
     console.log('slideLeft');
    })                                       
</script>
</div>

  </body>
  </html> 
```

# android - 方法必须覆盖超类方法

> ID：11574684
> 
> 赞同：0
> 
> 时间：2012-07-20T07:20:26.413
> 
> 标签：android, commonsware

教程#7。我收到此错误“EmPubLiteActivity 类型的方法 OnCreateOptionsMenu(menu) 必须覆盖或实现超类型方法”。输入的代码与书上的完全一样。EmPubLite 和 ActionBarSherlock 上的项目合规级别设置为 1.6。谁能告诉我问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:22:05.840

你的进口可能。如果您使用的是 ActionBarSherlock，请确保导入 com.actionbarsherlock.view.Menu，而不是默认的。

```
import com.actionbarsherlock.view.Menu; 
```

不是：

```
import android.view.Menu; 
```

覆盖 onOptionsItemSelected(MenuItem item) 时同样适用，您的导入必须是：

```
import com.actionbarsherlock.view.MenuItem; 
```

# java - 当路径包含（空白和数字）不仅为空白时如何在cmd中运行应用程序

> ID：11574687
> 
> 赞同：0
> 
> 时间：2012-07-20T07:20:50.210
> 
> 标签：java, cmd, mysqldump

1.  失败

```
String mysql = "C:/Progra~1/Apache~1/Tomcat~1/a.exe";
Runtime.getRuntime().exec("cmd /c " + mysql); 
```

真正的路径是 C:\Program Files\Apache Software Foundation\Tomcat 6.0\a.exe

1.  成功

```
String mysql = "C:/Progra~1/Apache~1/a.exe";
Runtime.getRuntime().exec("cmd /c " + mysql); 
```

真正的路径是 C:\Program Files\Apache Software Foundation\a.exe

为什么第一个不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:31:13.597

正如一些读者指出的那样，您的第一个示例可能不起作用，因为您的 8.3 名称不正确。或者，使用“长”名称更有意义：

```
String mysql = "C:/Program Files/Apache Software Foundation/Tomcat 6.0/a.exe";
Runtime.getRuntime().exec("cmd /c \"" + mysql + "\""); 
```

# c# - 属性不从私有字段返回值

> ID：11574689
> 
> 赞同：2
> 
> 时间：2012-07-20T07:21:05.427
> 
> 标签：c#, xamarin.ios, monodevelop, nullable

我在 MonoTouch-Application 中遇到了我的一个属性的奇怪行为。貌似给定的值不能通过Property返回，但是MonoDevelop中的Debugger说后台的私有字段居然持有值？？

这是该属性的实现方式：

```
public int? Status
{
    get { return this._status; }
    internal set
    {
        if (this._status != value)
        {
            // Status hat sich geändert, darum Speichervorgang nötig
            this._mustBeSaved = true;
            this._status = value;
            this.NotifyPropertyChanged("Status");
        }
    }
} 
```

在这里你可以看到调试器说什么：

[![调试器](../Images/0375b9ced0e60e9d088bd73d7b5ca7d3.png)](https://i.stack.imgur.com/O68J6.png)

反射值（“值”）如何保持正确的值，而反射字段“has_value”表示它没有立即保持任何值？因此，无法从属性中获取值。

（这个和我的其他属性的唯一区别是这个属性可以为空）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:05:14.030

`_value`实际上是**null**。您在调试器中看到的是内部字段，不应依赖。

当您将该字段设置为 null 时，编译器可能会重用存储，这就是为什么您仍然在内部`value`字段中看到旧值的原因。重要的是公共属性`HasValue`和`Value`.

# android - addView FILL_PARENT 不起作用

> ID：11574691
> 
> 赞同：1
> 
> 时间：2012-07-20T07:21:09.320
> 
> 标签：android, android-relativelayout, layout-inflater

我想通过 layoutInflater 将布局放入另一个布局。

这是 main_layout.xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/ads_image_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/ic_launcher" />

<RelativeLayout
    android:id="@+id/host_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/navigation_buttons_layout"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/ads_image_view" >
</RelativeLayout>

<RelativeLayout
    android:id="@+id/navigation_buttons_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

</RelativeLayout> 
```

这是 vitrin_layout.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ff0000"
    android:text="smallred" /> 
```

最后是我的主要活动的 onCreate 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);
    ViewGroup parent = (ViewGroup) findViewById(R.id.host_layout);
    View view = LayoutInflater.from(getBaseContext()).inflate(
            R.layout.vitrin_layout, null);
    parent.addView(view, LayoutParams.FILL_PARENT);

    setTitle(getString(R.string.title_activity_vitrin));
} 
```

问题是 vitrin_layout 不适合其父级（host_layout）；尽管我已经尽可能地设置了 fill_parent ！
我不知道为什么。

编辑：我真的很抱歉，但我粘贴了错误的 vitrin_layout 文件，我修复了它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T07:28:07.643

使用这个[addView](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20android.view.ViewGroup.LayoutParams%29)方法。顺便说一句，`getBaseContext()`除非您知道为什么要使用它，否则不要使用它，而是使用活动的上下文 ( `this`)。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);
    ViewGroup parent = (ViewGroup) findViewById(R.id.host_layout);
    View view = LayoutInflater.from(this).inflate(R.layout.vitrin_layout, null);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
        ViewGroup.LayoutParams.FILL_PARENT,
        ViewGroup.LayoutParams.FILL_PARENT); 
    parent.addView(view, params);

    setTitle(getString(R.string.title_activity_vitrin));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:29:04.167

```
parent.addView(view, LayoutParams.FILL_PARENT); 
```

这个方法是 ViewGroup.addView(View child, int index) 实际调用的。您需要调用 ViewGroup.addView(View child, ViewGroup.LayoutParams params) 方法来设置 LayoutParams。

# dll - dll 没有有效的 clr 头，无法反汇编

> ID：11574692
> 
> 赞同：2
> 
> 时间：2012-07-20T07:21:11.153
> 
> 标签：dll

在 ILDASM 中打开 DLL 时，我收到一条错误消息，告诉 dll 没有有效的 clr 标头并且无法反汇编。没有一个 dll 被打开。我用的是vs2010终极版。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:58:03.377

您不能使用 ILDASM 反汇编本机 dll。

# asp.net-mvc-3 - 如何从 EXT.Net Razor Engine 中的属性 ID 获取值？

> ID：11574695
> 
> 赞同：0
> 
> 时间：2012-07-20T07:21:19.260
> 
> 标签：asp.net-mvc-3, ext.net

下面的侦听器中的代码从 ID #{CheckAll} 获取值，我想从其他属性获取值。

```
@Html.X().ResourceManager()

@Html.X().Checkbox()
        .Name("CheckAll")
        .BoxLabel("CheckAll")
        .ID("CheckAll")
        .Checked(false)
        .Listeners(l => l.Change.Handler = @"var checkAll = #{CheckAll}.getValue();
        if(checkAll){            
            #{CheckAll2}.setValue(true);
        }"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:34:45.217

我认为如果您更改`#{CheckAll}`为`App.CheckAll`和`#{CheckAll2}`，您的示例应该可以工作`App.CheckAll2`。

希望这可以帮助。

# android - HTTP 音频流 Android < 3.0 (Vitamio)

> ID：11574697
> 
> 赞同：3
> 
> 时间：2012-07-20T07:21:22.277
> 
> 标签：android, audio-streaming, vitamio

我想在 Android 2.2 及更高版本上通过 HTTP (m3u8) 播放流式音频。对于 Android 3.0 及更高版本，支持 HTTP 流，仅低于 3.0 不支持。

一个解决方案是在项目中使用 Vitamio。但是，Vitamio 要求用户从 Play 商店安装插件。

所以，我的问题： - 有没有办法将 Vitamio 插件嵌入到项目中？- 对于 < Android 3.0 的设备，还有另一种 HTTP 流解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T11:25:09.047

下载最新的 vitamio 版本。它允许开发人员将 Vitamio 完全捆绑到他们的 Android APK 中，用户不再需要下载单独的插件。在此处获取：[Vitamio](http://vitamio.org/) ![在此处输入图像描述](../Images/de1f67fbba6d743d23164f23c2162b41.png) ![在此处输入图像描述](../Images/cbb7ea0b2208d2919d2478f6d5ce1177.png) ![在此处输入图像描述](../Images/a889803da694516e94f283d74c3d20f9.png) 转到添加并选择 vitamio 包并单击应用，您就完成了，您无需在 buildpath 中添加 vitamio。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T14:40:06.683

好吧，这可能有点晚了。但是他们在他们的sdk中提供了解码器。只需下载 Vitamio Bundle 并将其导入您的项目。

[http://vitamio.org/vitamios?locale=en](http://vitamio.org/vitamios?locale=en)

“ Vitamio 的部分源代码现已在 Github 上提供！请发送您的拉取请求！

允许开发人员将 Vitamio 完全捆绑到他们的 Android APK 中，用户不再需要下载单独的插件。删除未使用的代码，仅保留核心类，例如 MediaPlayer 和 MediaMetadataRetriever。支持 ARMv6、ARMv7，具有 VFP、VFPv3、NEON 优化。向开发者开放一些源代码，包括VideoView、MediaController和/或接口。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:47:18.503

不久前我遇到了同样的问题；我必须在 <3.0 上流式传输音频和视频，据我所知，Vitamio 是唯一不错的解决方案。

据我所知，您无法嵌入插件，并且用户总是以“您需要安装 Vitamio”提示结束，这会导致他们的 Google Play 页面。

# solr - 赫克托错误插入整数

> ID：11574705
> 
> 赞同：2
> 
> 时间：2012-07-20T07:21:32.760
> 
> 标签：solr, cassandra, hector, datastax-enterprise

我正在运行一个单节点 Cassandra 实例（用于开发目的），并希望在其中插入一个整数行。我的 Keyspace 和 columnfamily 已经在 Cassandra 上创建了。

我正在使用 Cassandra 1.0 和 Hector 1.0.5（Jar 版本）。我的代码如下：

```
Cluster cluster = HFactory.getOrCreateCluster("Test Cluster", "10.40.14.93:9160");

Keyspace keyspaceOperator = HFactory.createKeyspace("mykeyspace", cluster)

Mutator intM = HFactory.createMutator(keyspaceOperator, IntegerSerializer.get());

for each elem in my list {

 intM.insert(doc.document_id , 
            "mycolfamily",
            me.prettyprint.hector.api.factory.HFactory.createColumn("numAdults", doc.numAdults))
} 
```

我在客户端上收到 TimedOutException，在 Cassandra 日志中，我看到以下内容：

```
ERROR [MutationStage:357] 2012-07-20 08:15:02,106 AbstractCassandraDaemon.java (line  139) Fatal exception in thread Thread[MutationStage:357,5,main]
java.lang.RuntimeException: java.lang.NumberFormatException: For input string: ""
        at org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:1228)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NumberFormatException: For input string: ""
        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
        at java.lang.Long.parseLong(Long.java:410)
        at java.lang.Long.parseLong(Long.java:468)
        at org.apache.solr.schema.TrieField.createField(TrieField.java:508)
        at org.apache.solr.schema.FieldType.createFields(FieldType.java:292)
        at org.apache.solr.schema.SchemaField.createFields(SchemaField.java:106)
        at com.datastax.bdp.cassandra.index.solr.SolrSecondaryIndex.addFieldToDocument(SolrSecondaryIndex.java:382)
        at com.datastax.bdp.cassandra.index.solr.SolrSecondaryIndex.populateDocument(SolrSecondaryIndex.java:280)
        at com.datastax.bdp.cassandra.index.solr.SolrSecondaryIndex.applyIndexUpdates(SolrSecondaryIndex.java:164)
        at org.apache.cassandra.db.index.SecondaryIndexManager.applyIndexUpdates(SecondaryIndexManager.java:419)
        at org.apache.cassandra.db.Table.apply(Table.java:448)
        at org.apache.cassandra.db.RowMutation.apply(RowMutation.java:256)
        at org.apache.cassandra.service.StorageProxy$6.runMayThrow(StorageProxy.java:415)
        at org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:1224)
        ... 3 more
ERROR [MutationStage:357] 2012-07-20 08:15:02,106 AbstractCassandraDaemon.java (line 139) Fatal exception in thread Thread[MutationStage:357,5,main]
java.lang.RuntimeException: java.lang.NumberFormatException: For input string: ""
        at org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:1228)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NumberFormatException: For input string: ""
        at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
        at java.lang.Long.parseLong(Long.java:410)
        at java.lang.Long.parseLong(Long.java:468)
        at org.apache.solr.schema.TrieField.createField(TrieField.java:508)
        at org.apache.solr.schema.FieldType.createFields(FieldType.java:292)
        at org.apache.solr.schema.SchemaField.createFields(SchemaField.java:106)
        at com.datastax.bdp.cassandra.index.solr.SolrSecondaryIndex.addFieldToDocument(SolrSecondaryIndex.java:382)
        at com.datastax.bdp.cassandra.index.solr.SolrSecondaryIndex.populateDocument(SolrSecondaryIndex.java:280)
        at com.datastax.bdp.cassandra.index.solr.SolrSecondaryIndex.applyIndexUpdates(SolrSecondaryIndex.java:164)
        at org.apache.cassandra.db.index.SecondaryIndexManager.applyIndexUpdates(SecondaryIndexManager.java:419)
        at org.apache.cassandra.db.Table.apply(Table.java:448)
        at org.apache.cassandra.db.RowMutation.apply(RowMutation.java:256)
        at org.apache.cassandra.service.StorageProxy$6.runMayThrow(StorageProxy.java:415)
        at org.apache.cassandra.service.StorageProxy$DroppableRunnable.run(StorageProxy.java:1224)

} 
```

我正在试用包含 Cassandra、Hadoop、Solr 等的 Datastax Enterprise (DSE)。我已经通过 Solr 配置创建了我的 Cassandra CF（您可以将 Solr 配置和模式 xmls 发布到 Datastax 实例以创建 Keyspace 和 CF - 它的一个功能DSE)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:26:34.967

尝试将显式序列化程序添加到您的 createColumn 调用...像这样：

```
me.prettyprint.hector.api.factory.HFactory.createColumn("numAdults", doc.numAdults, StringSerializer.get(), IntegerSerializer.get())) 
```

另外，另一方面，我看到您正在循环中进行插入。在循环内执行 intM.addInsertion ，然后在完成后执行 intM.execute() 效率更高。

# load-balancing - 具有负载平衡的会话 cookie（非粘性会话）

> ID：11574707
> 
> 赞同：4
> 
> 时间：2012-07-20T07:21:38.163
> 
> 标签：load-balancing, session-cookies, sessionid, sid

我已经扫描了 RFC 6265，但没有找到以下问题的答案。

我想在单个 webapp 的多个服务器前面放置一个简单的循环负载均衡器。负载均衡器*不*提供粘性会话。因此，客户端通常会在连续请求时从一个应用服务器反弹到另一个应用服务器。

在第一次连接时，客户端没有 SID，并被随机路由到服务器 A。
服务器 A 以会话 cookie、nonce 响应。

在下一次连接中，客户端将来自服务器 A 的 SID 包含在 HTTP 标头中。这一次，客户端被随机路由到服务器 B。服务器 B 看到（希望！）与它发出的任何 SID 都不匹配的 SID。发生什么了？服务器 B 是否只是忽略“坏”的 SID，或者抱怨，或者忽略请求，还是什么？

这个想法是，我根本不想使用会话 cookie。我想避免粘性的所有复杂性。但我也知道我的服务器可能会生成——而且更重要的是寻找——会话cookie。

我怎样才能确保服务器只是忽略（或更好的是不设置）会话 cookie？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T21:09:39.453

我认为这个问题的答案会因服务器上运行的应用程序而有很大差异。尽管任何称职的负载均衡器都有粘性会话，但只要池中的所有服务器都可以通过集中式数据库访问相同的会话状态，就可以在没有它们的情况下进行操作。

由于您在谈论会话 ID，我猜该应用程序确实依赖会话状态才能运行。在这种情况下，如果请求带有“错误”会话 ID，它很可能会被丢弃并提示用户登录——同样，具体行为取决于应用程序。如果您完全禁用会话 cookie，问题可能会变得更糟，因为即使没有 ID 也可能会导致登录提示。

如果您真的想避免负载均衡器的复杂性，您将需要引入一些机制，所有服务器都可以通过该机制处理来自所有会话的请求。通常，这采用集中式数据库或其他一些共享存储的形式。这允许保持会话状态，而不管服务器处理该特定请求。

维护会话状态是负载平衡的症结之一（双关语），但简单地忽略或避免会话 cookie 并不是解决方案。

# facebook - 登录过程中可能发生了错误

> ID：11574712
> 
> 赞同：0
> 
> 时间：2012-07-20T07:21:58.237
> 
> 标签：facebook, login, symfony

好吧，我正在使用 symfony2 和 symfony2 facebookbundle。每当我登录 Facebook 时，只有当我尚未登录时，我才会在尝试登录我的应用程序时收到此错误。

“登录过程中可能发生了错误。您可以关闭此窗口并尝试返回应用程序，但它可能会要求您再次登录。这可能是由于应用程序中的错误造成的。”

如果我已经登录 facebook，然后单击按钮，它会弹出一个窗口，关闭并重定向到 symfony 的内部登录过程，然后 bam，用户已登录。

这是我用来初始化 facebook 的代码

```
<script type="text/javascript">
window.fbAsyncInit = function() {
  FB.init({"appId":"myappidishere","xfbml":true,"oauth":true,"status":true,"cookie":true,"logging":true});
  onFbInit();
};

(function() {
  var e = document.createElement('script');
  e.src = document.location.protocol + "\/\/connect.facebook.net\/en_US\/all.js";
  e.async = true;
  document.getElementById('fb-root').appendChild(e);
}());
</script> 
```

在 facebook 应用程序配置中，我有我的

注意：我登录的地方实际上是[http://mysite.com.au/events/login](http://mysite.com.au/events/login)

**应用程序域**：www.mysite.com.au 和 site.com.au

**使用 Facebook 登录的网站**：http : [//mysite.com.au](http://mysite.com.au)

**应用类型**：网页

**沙盒模式**：禁用

**流发布 URL 安全性**：已禁用

**删除离线访问权限**：已禁用

**强制为 auth.login 使用登录密码**：已启用

**2012 年 9 月、10 月、8 月 重大更改**：已禁用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T12:23:41.380

事实证明，无论出于何种原因，fb 按钮标签都生成了错误的链接，或者某些东西没有正确链接。最后我做到了，效果很好。

```
<a onclick="loginfb(); return false;" class="flogin"></a>
<script>

    function loginfb()
    {
     FB.login(function(response) 
     {
       if (response.authResponse) 
       {
            goLogIn();
       }
     });        
    }
    function goLogIn(){
        window.location = "/events/facebook/check";
    }

</script> 
```

# c# - Resharper 流利的界面代码格式（对齐点）

> ID：11574715
> 
> 赞同：9
> 
> 时间：2012-07-20T07:22:06.700
> 
> 标签：c#, resharper, code-formatting, resharper-6.0

我阅读了很多关于流畅缩进的格式化选项的答案。（[Resharper 将代码格式化为一行](https://stackoverflow.com/questions/8823719/resharper-formatting-code-into-a-single-line)，[ReSharper 流畅的缩进](https://stackoverflow.com/questions/11519446/resharper-fluent-indendation)和[http://youtrack.jetbrains.com/issue/RSRP-88220](http://youtrack.jetbrains.com/issue/RSRP-88220)）如下：

```
mockCrypto.Expect(c => c.Hash("authenticationHashSalt", "ignoring arguments"))
   .IgnoreArguments()
   .Return("hashed"); 
```

但我还没有找到有关格式化代码的信息，如下所示：

```
kernel.Bind<ICameraController>()
      .To<NikonCameraController>()
      .NamedLikeFactoryMethod((ICameraFactory f) => f.GetNikonCamera());

mock.Setup(framework => framework.DownloadExists("2.0.0.0"))
    .Returns(true)
    .AtMostOnce(); // (it's from moq QuickStart) 
```

但是这种风格很常见，我经常在框架的文档中看到它。如何设置 Resharper 自动格式化以使用此样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:21:47.670

不幸的是，Resharper 目前似乎无法做到这一点，而且这个[问题已经被标记了很长时间。](http://youtrack.jetbrains.com/issue/RSRP-88220)

作为一种潜在的可接受的折衷方案，为了尽量减少 Resharper 撤消现有流畅调用格式的痛苦，您可以在 Resharper 选项中的“格式样式”->“换行和换行”->“保留”下选择“保留现有换行符”现有格式”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-05T02:48:00.230

我在选项 -> 代码编辑 -> C# -> 格式样式中使用 R# 中的下一个设置：

*换行和换行*->*成员访问表达式*部分的排列 ->*换行链式方法调用*==*始终切碎*

*制表符、缩进、对齐*->*对齐多个构造*部分 ->已选中*链式方法调用*

结果：

[![在此处输入图像描述](../Images/a6063edd93f301e8f10a0782c8633177.png)](https://i.stack.imgur.com/rAtcU.png)

基于[https://blog.jetbrains.com/dotnet/2012/11/12/code-formatting-improvements-in-resharper-71/](https://blog.jetbrains.com/dotnet/2012/11/12/code-formatting-improvements-in-resharper-71/)。*链接方法调用*的路径是 7.1 和 R# 2018 之间的某个版本

# xcode - xCode 和 ImageMagick 不工作？链接到项目包

> ID：11574716
> 
> 赞同：3
> 
> 时间：2012-07-20T07:22:15.990
> 
> 标签：xcode, macos, cocoa, imagemagick

我制作了包含 ImageMagick 的项目。我通过 macPorts、链接库和头文件将它安装到我的项目中。一切正常。但是，当我尝试在未安装 ImageMagick 的其他计算机上启动我构建的应用程序时，它甚至不会打开我的应用程序。说Os X版本不兼容。如果我将 ImageMagick 安装到那台计算机上，那么应用程序可以正常工作。我应该怎么做才能使它在用户没有 ImageMagick 的计算机上工作？我想我必须以某种方式将标题和库包含到我的项目包中。但是如何以正确的方式开始工作呢？我试图将头文件和库复制到我的项目包中，但是当我尝试构建它时，它说找不到 Magick++.h。有人可以帮助我吗？

* * *

我将 ImageMagick 文件从`macports`安装它的位置（`/opt/local/lib/`和`/opt/local/include`）添加到我创建的名为 的文件夹`ImageMagick`中，然后将该文件夹移动到我的项目并添加`ImageMagick/**`到`Library Search Paths`and`Header Search Paths`中。然后通过`macports`. 项目构建成功，但没有运行。它在控制台中显示错误：

```
dyld: Library not loaded: /opt/local/lib/libMagick++.5.dylib
  Referenced from: /Users/development/Library/Developer/Xcode/DerivedData/OGL-cahltqazoqxhrthkxztsqyvvodge/Build/Products/Debug/OGL.app/Contents/MacOS/OGL
  Reason: image not found
(lldb) 
```

添加到`Linked Frameworks and Libraries`列表中的库位于我的应用程序文件夹中并添加到我的项目中。为什么它在 中搜索它`/opt/local/lib`？

# linux - 加载linux服务器

> ID：11574717
> 
> 赞同：0
> 
> 时间：2012-07-20T07:22:16.457
> 
> 标签：linux

我想加载一个 linux 服务器，以便使用交换空间。是否有任何工具可以在服务器上运行，以便开始使用交换？此外，是否有可以运行的脚本或工具来增加内核内存使用量。我正在我的 linux 服务器 (centOS) 上进行一些分析，因此需要人为地加载系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:31:04.003

`python -c 'a = range(some_huge_number); raw_input()'`会占用大量内存，并且会一直保持到您按下`Enter`。从较小的数字（比如 1000000 左右）开始，然后逐渐增加，仔细观察内存，以确保不会严重破坏系统。

# php - PHP 解析圣经书串的问题

> ID：11574724
> 
> 赞同：2
> 
> 时间：2012-07-20T07:22:43.353
> 
> 标签：php, string, parsing, variables, explode

我希望你能帮助我。

我有一个如下字符串

路加福音 1:26-38

而且我希望能够将其分解为标记或单个变量，以便我可以在 SQL 查询中使用这些变量。

我试过使用爆炸，但是我只能让它在一个字符上爆炸，例如：或 -

我的字符串有 : 和 - 以及名称和第一个数字之间的空格。

我的目标是：

```
 $name = Luke;
    $book = 1;
    $from = 26;  
    $to = 38; 
```

请问有谁可以帮忙。

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T07:29:36.323

您可以通过简单的字符串扫描 ( [Demo](http://codepad.viper-7.com/ZC6bBF) ) 来做到这一点：

```
$r = sscanf("Luke 1:26-38", "%s %d:%d-%d", $name, $book, $from, $to); 
```

然后变量包含信息。`%s`代表一个字符串（没有空格），`%d`一个小数。见[`sscanf`](http://php.net/sscanf)。

* * *

为了使这本“圣经安全”，它需要一些额外的修改：

```
$r = sscanf($string, "%[ a-zA-Z] %d:%d-%d", $name, $book, $from, $to);
$name = trim($name); 
```

（[第二个演示](http://codepad.viper-7.com/m5B3V5)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T07:25:27.507

```
list( $name, $book, $from, $to ) = preg_split( '/[ :-]/', 'Luke 1:26-38' );

echo $name; //"Luke"

    /* Split results in an Array
(
    [0] => Luke
    [1] => 1
    [2] => 26
    [3] => 38
)
     */ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T07:27:18.017

```
$string = "Luke 1:26-38";
preg_match('#^(\w+)\s(\d+):(\d+)-(\d+)$#', $string, $result);
print_r($result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T13:32:31.377

正则表达式很难为此配置，因为圣经书名、章节和经文编号的多种配置。因为有些书以数字开头，有些书的书名中有多个空格。

我想出这个来构建一个 sql 查询，它适用于这些段落搜索类型.. (John), (John 3), (Joh 3:16), (1 Thes 1:1)

书名可以是 3 个字母的缩写。

进行无限的单个单词搜索和精确短语。

```
$string = $_GET['sstring'];
$type = $_GET['stype'];
switch ($type){ 
    case "passage":
        $book = "";
        $chap = "";
        $stringarray = explode(':', $string); // Split string at verse refrence/s, if exist.
        $vref = $stringarray[1]; 
        $vrefsplit = explode('-', $vref);// Split verse refrence range, if exist.
        $minv = $vrefsplit[0];
        $maxv = $vrefsplit[1]; // Assign min/max verses.
        $bc = explode(" ", $stringarray[0]); // Split book string into array with space as delimiter.
        if(is_numeric($bc[count($bc)-1])){ // If last book array element is numeric?
            $chap = array_pop($bc); // Remove it from array and assign it to chapter.
            $book = implode(" ", $bc); // Put remaining elemts back into string and assign to book.
        }else{
            $book = implode(" ", $bc); // Else book array is just book, convert back to string.
        }
        // Build the sql query.
        $query_rs1 = "SELECT * FROM kjvbible WHERE bookname LIKE '$book%'";
        if($chap != ""){
            $query_rs1.= " AND chapternum='$chap'";
        }
        if($maxv != ""){
            $query_rs1.= " AND versenum BETWEEN '$minv' AND '$maxv'";
        }else if($minv != ""){
            $query_rs1.= " AND versenum='$minv'";
        }
    break;
    case "words":
        $stringarray = explode(" ", $string); // Split string into array.<br />
        // Build the sql query.
        $query_rs1 = "SELECT * FROM kjvbible WHERE versetext REGEXP '[[:<:]]". $stringarray[0] ."[[:>:]]'";
        if(count($stringarray)>1){
            for($i=1;$i<count($stringarray);$i++){
                $query_rs1.= " AND versetext REGEXP '[[:<:]]". $stringarray[$i] ."[[:>:]]'";
            }
        }
    break;
    case "xphrase":
        // Build the sql query.
        $query_rs1 = "SELECT * FROM kjvbible WHERE versetext REGEXP '[[:<:]]". $string ."[[:>:]]'";
    break;
    default :
    break;
} 
```

# android - 使用 MIME 访问任何类型的文件名

> ID：11574728
> 
> 赞同：0
> 
> 时间：2012-07-20T07:22:52.727
> 
> 标签：android, file, mime-types

我们有一个`File Extension`and `MIME Type`。它仅适用于普通文件。某些文件无法访问。例如`Hello.pdf`工作正常`JSP Quick Reference.pdf`但不工作。因为这个文件包含`space`. 如何使用`MIME`. MimeTypeMap 映射 = MimeTypeMap.getSingleton();

String ext = MimeTypeMap.getFileExtensionFromUrl(file.getName()); Log.e("扩展名：" + ext + "","扩展名：" + ext + ""); // 结果`Extension :`

字符串类型 = map.getMimeTypeFromExtension(ext); Log.e("扩展类型：" + type + "","扩展类型：" + type + ""); // 结果`Extension Type : null`

如何访问`special characters`和`space`文件。

提前致谢。

# iphone - 如何检测对 uisegmentedcontrol 的触摸 - 即使在选定的段上？

> ID：11574731
> 
> 赞同：6
> 
> 时间：2012-07-20T07:22:59.360
> 
> 标签：iphone, ios, xcode, uisegmentedcontrol

虽然检测更改适用`UIControlEventValueChanged`- 我需要检测即使在选定段上的触摸。

我试过

```
 [onOffSC addTarget:self
            action:@selector(segmentedControlPushed)
  forControlEvents:UIControlEventAllTouchEvents]; 
```

但这不会触发任何事情。

**有没有办法检测选定段上的触摸？**

编辑 - 无需创建新的子类。ps 手势识别器在尝试将其拖到那里时也不接受段控件

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:35:42.657

我认为这会奏效

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSInteger oldValue = self.selectedSegmentIndex;
    [super touchesBegan:touches withEvent:event];
    if ( oldValue == self.selectedSegmentIndex )
        [self sendActionsForControlEvents:UIControlEventValueChanged];
} 
```

# asp.net-mvc-3 - 如何在 Beginform 助手中传递名称属性

> ID：11574739
> 
> 赞同：0
> 
> 时间：2012-07-20T07:23:37.320
> 
> 标签：asp.net-mvc-3, view-helpers

在这里，我想将名称属性传递给表单。但这是将名称作为查询字符串传递：以下是我使用的代码：

@using (Html.BeginForm("Upload", "AjaxUpload", new { @name = "form1" })) {

我还删除了名称中的@，它用作查询字符串。请您告诉如何传递名称属性，如下所示：

```
<form name = "form1" action = ".."> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:36:33.107

您使用了错误的重载，[`BeginForm`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform.aspx)它将 视为`new { @name = "form1" }`路由值集合。

您需要使用不同的重载，它允许您传递[像这样](http://msdn.microsoft.com/en-us/library/dd492714.aspx)的 html 属性：

```
@using (Html.BeginForm(
              "Upload", //action name
              "AjaxUpload", // controller name
              FormMethod.Post, // form method
              new { name = "form1" }) // htmlAttributes
       ){

} 
```

# xcode - 如何使用 init 函数创建 dylib

> ID：11574742
> 
> 赞同：0
> 
> 时间：2012-07-20T07:23:46.440
> 
> 标签：xcode, dylib

我正在尝试在 xcode 中创建一个 dylib。我可以通过在 Xcode 中选择 c/c++ 库模板来创建 dylb。

我想为这个 dylib 添加“init”方法。我不知道如何为 dylib 添加“init”方法。

我的想法是在 dlopen() 的帮助下在运行时调用这个“init”。

感谢您的宝贵反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:26:42.793

如果您使用 C++ 编写代码，您的`dlopen`-ed 库中可能有静态对象；他们的构造函数在`dlopen`时间被调用（并且他们的析构函数在`dlclose`时间运行）。

如果您的代码是由`gcc`（用 C 或 C++，甚至可能是其他一些语言）编译的，您可以使用`constructor`and`destructor` [函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)

^(（您可以使用过时的符号`_init`，`_fini`但这是`dlopen`（至少在 Linux 上，可能在 MacOSX 上）的过时功能。然后您必须`extern "C" void _init(void);`在 C++ 中声明它们。）)

不要忘记`dlsym`处理未[损坏的名称](http://en.wikipedia.org/wiki/Name_mangling)，因此您要为其声明`extern "C"`C++ 名称。

你也可以有你自己的约定，你的动态加载的东西应该有，例如，一个名为的函数`my_initialization`，你的代码`dlopen`稍后会使用`dlsym`它来找到它。您应该已经记录了哪些符号是`dlsym`-ed 以及如何使用它们的约定。

我不太了解 MacOSX，但我用谷歌搜索[了这个文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingCode/LoadingCode.html#//apple_ref/doc/uid/10000052i)

# android - autocompletetextview 不建议我想要什么

> ID：11574752
> 
> 赞同：1
> 
> 时间：2012-07-20T07:24:29.857
> 
> 标签：android, autocompletetextview

我正在从 xml 加载大约 20,000 个字符串，除此之外，应用程序真正提出建议需要很长时间，当我键入`Cra`它时，它会显示第一个建议`Valea Crabului`并且我`Craiova`在字符串中，但稍后会建议。

怎么能`AutoCompleteTextView`只建议我匹配整个单词的单词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:54:15.310

如果您使用`ArrayAdapter`的是, 则在这里您可以看到[https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java)`AutoCompleteTextView`的过滤器的默认实现`ArrayAdapter`

从内部`ArrayFilter`类`ArrayAdapter`：

```
for (int i = 0; i < count; i++) {
                final T value = values.get(i);
                final String valueText = value.toString().toLowerCase();

                // First match against the whole, non-splitted value
                if (valueText.startsWith(prefixString)) {
                    newValues.add(value);
                } else {
                    final String[] words = valueText.split(" ");
                    final int wordCount = words.length;

                    // Start at index 0, in case valueText starts with space(s)
                    for (int k = 0; k < wordCount; k++) {
                        if (words[k].startsWith(prefixString)) {
                            newValues.add(value);
                            break;
                        }
                    }
                }
            } 
```

您看到过滤器不会按您需要的相关性对匹配的项目进行排序，您必须为您的适配器编写自己的过滤器。

反而

```
 // First match against the whole, non-splitted value
                if (valueText.startsWith(prefixString)) {
                    newValues.add(value);
                } else { 
```

你可能需要使用

```
 // First match against the whole, non-splitted value
                if (valueText.startsWith(prefixString)) {
                    newValues.add(0, value);
                } else { 
```

因此您的过滤器将在结果顶部添加以您建议的字符串开头的值作为最相关的过滤器结果。

# javascript - 将集合绑定到 Backbone 中的模型

> ID：11574756
> 
> 赞同：1
> 
> 时间：2012-07-20T07:24:41.143
> 
> 标签：javascript, asp.net-mvc-3, backbone.js, client-side, backbone-events

我有一个服务器端类：`TopicsListModel` 具有如下属性：

```
public class TopicsListModel
{
    public TopicsListModel()
    {
        ChildTopics = new HashSet<TopicsListModel>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public ICollection<TopicsListModel> ChildTopics { get; set; }
} 
```

有一个返回列表的函数，

```
public JsonResult SearchTopic(String topic)
    {
        var topics = LandingManager.SearchTopics(topic);
        //return Json(topics);
        return new JsonResult { Data = topic, JsonRequestBehavior = JsonRequestBehavior.AllowGet };
    } 
```

我需要将此添加到 Backbone 模型和集合中。我是 Backbone 的新手，你可以猜到我正在苦苦挣扎。任何帮助将不胜感激。

我想建立一个模型来存储数据，例如：

```
{    name: "Model1",    id: 1,    submodels: [{ name: "Submodel1", id: 2 }, { name: "Submodel1", id: 2 }] } 
```

我无法这样做，我无法像这样设置基本集合，即返回我共享的数据的 ASP.NET MVC 代码部分。分享我在 Backbone 中所做的一切：

```
TestBB = function () {
if (!window.console) window.console = { log: function () { } };

var treeModel = Backbone.Model.extend({});
var treeSubModel = Backbone.Model.extend({});
var treeCollection = Backbone.Collection.extend({
    model: treeSubModel,
    initialize: function () {
        console.log('Collection Initialized');
    }
});
var treeView = Backbone.View.extend({
    el: $('#tree-view'),
    initialize: function () {
        //            this.collection.bind("render", this.render, this);
        //            this.collection.bind("addAll", this.addAll, this);
        //            this.collection.bind("addOne", this.addOne, this);
        _.bindAll(this);
    },
    render: function () {
        console.log("render");
        console.log(this.collection.length);
        $(this.el).html(this.template());
        this.addAll();
        var template = _.template($("#template").html(), {});
        this.el.html(template);
    },
    addAll: function () {
        console.log("addAll");
        this.collection.each(this.addOne);
    },
    addOne: function (model) {
        console.log("addOne");
        view = new treeView({ model: model });
        $("ul", this.el).append(view.render());
    },
    events: { "click #btnFind": "doFind" },
    doFind: function (event) { alert('event fired'); }
});

return {
    TreeView: treeView
};} (Backbone); 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:16:15.893

这不是将集合“绑定”到后端的情况，例如：您`fetch`是来自服务器的集合以读取，并且`save`（通过同步）写入。

首先，您需要通过设置`url`属性让集合知道数据所在的位置。请参阅：[http](http://backbonejs.org/#Collection-url) ://backbonejs.org/#Collection-url 。

其次，您需要使用该`fetch`方法实际检索数据。请参阅[http://backbonejs.org/#Collection-fetch](http://backbonejs.org/#Collection-fetch)。请注意，这是异步的，因此您需要等待`success`回调。

要保存数据，请`save`在单个模型上使用该方法。请参阅[http://backbonejs.org/#Model-save](http://backbonejs.org/#Model-save)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-02T10:18:57.057

解决了我想出了方法并定义了模型并填充了它！

# google-apps-script - 动态创建列表框的处理程序设计

> ID：11574757
> 
> 赞同：0
> 
> 时间：2012-07-20T07:24:54.693
> 
> 标签：google-apps-script

我正在尝试制作一个 UI，允许用户为电子表格中的每个议程项目选择一个操作。用户选择一个操作后，我想用选择更新电子表格。由于电子表格中的数据不是静态的，因此 UI 是动态编写的。

这就是我创建列表框的方式：

```
// add labels and a drop down box of actions for each agenda item mark for today
for (i = 0; i < labels.length; i++) {
// labels is an array of objects
var topic = labels[i]['topic'];

// add label to grid
myGrid.setWidget(i, 0, myApp.createLabel(topic));

// the id of each listbox is the content of its corresponding label
var id = ObjApp.camelString(topic)
var lboxActions = myApp.createListBox().setId(id);

//add items to listbox
lboxActions.addItem('Select');
lboxActions.addItem('Add to agenda');
lboxActions.addItem('Move to another meeting');
lboxActions.addItem('Move to a special meetin');
lboxActions.addItem('Move to email');

//add drop down list to grid
myGrid.setWidget(i, 1, lboxActions);

} 
```

我有3个问题：

## 1）哪个设计更好？

a)**设计 1**：每个列表框旁边都有一个保存按钮。

b)**设计2**：底部有一个提交按钮，用于保存每个条目

## 2) 我将如何收集有关用户选择的信息？我将如何编写这样的处理程序？我为每个设计添加了以下代码，但我认为我做得不对。

a)**设计 1**：将以下代码行添加到上述 for 循环中

```
var buttonSave = myApp.createButton('Save');
myGrid.setWidget(i, 2, buttonSave);

var handlerSelection = myApp.createServerHandler('selectAction');
handlerSelection.addCallbackElement(mainPanel);
buttonSave.addClickHandler(handlerSelection); 
```

b)**设计 2**：在 for 循环之外添加了以下代码行

```
//update spreadsheet when user click "submit"
var handlerUpdate = myApp.createServerHandler('responseToSubmit');
handlerUpdate.addCallbackElement(mainPanel);
buttonSubmit.addClickHandler(handlerUpdate);

mainPanel.add(myGrid);
mainPanel.add(buttonSubmit);
myApp.add(mainPanel); 
```

## 3) 如何为处理程序编写函数？这些不正确，因为我无法从列表框中提取信息。

a)**设计 1**

```
function responseToSave(e) {

   var name = e.parameter.source;
   var selection = e.parameter.name;

   var selectionObj = new Object();

   selectionObj['status'] = selection;
   selectionObj['name'] = name;

   choicesMade.push(selectionObj)

   Logger.log(choicesMade);
   return choicesMade;
} 
```

b)**设计 2**

```
function responseToSubmit(e) {
  var myApp = UiApp.getActiveApplication();

  for (i=0; i < labels.length; i++) {
     var lboxId = ObjApp.camelString(labels[i]['topic']);

     //[EDIT] e.parameter.lboxId would not work because lboxId is a string 
     var selection = e.parameter[lboxId];

     choicesMade[labels[i]] = selection;
     }

  Logger.log(choicesMade);
  return choicesMade;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:24:04.510

Q1：设计完全取决于您的应用程序打算做什么以及您的用户如何使用它。没有“更好”的设计——它们每个都有自己的优点和缺点，选择将基于你的应用程序的使用方式。但是，也要考虑设计 3，它会在下拉框更改时保存更改。用户将少一键点击

Q2 和 Q3：您应该在 listBox 上使用 setName

```
var lboxActions = myApp.createListBox().setId(id).setName(id); 
```

我通常对 id 和 name 使用相同的字符串以避免混淆，但是您应该使用 setName 之后您可以访问在处理程序函数中选择的项目

```
e.parameter.id 
```

最后，在 buttonSave 上，您应该使用 addClickHandler 而不是 addChangeHandler。

# wxpython - 如何在 aui 托管应用程序中创建 XRC 生成的滚动窗口

> ID：11574762
> 
> 赞同：1
> 
> 时间：2012-07-20T07:25:19.617
> 
> 标签：wxpython, wxwidgets

我尝试在 AUI 框架中加载使用 XRCed 创建的面板。面板有时比窗格大并且需要滚动条，所以我将内容包含在滚动窗口中。面板已创建，但我无法使滚动条正常工作。将滚动窗口包含在 sizer 中，我希望它能够按照文档中的说明工作。我使用 XRCed 生成的 Python 代码来加载面板。我在 Windows 7 上使用 wxPython 版本 2.8.12.1、XRCed 版本 0.2.0-8 和 Python 2.7。

```
import wx
from wx import aui
from example_xrc import xrcexample

class TopWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)
        self._mgr = aui.AuiManager()
        self._mgr.SetManagedWindow(self)
        self._mgr.AddPane(self.create_panel_from_xrc(), aui.AuiPaneInfo().
                          Name("name1").Caption("caption1").CenterPane())
        self._mgr.AddPane(self.create_textctrl(), aui.AuiPaneInfo().
                          Name("name2").Caption("caption2").Bottom())
        self._mgr.GetPane("nam1").Show().Center().Layer(0).Row(0).Position(0)
        self._mgr.GetPane("name2").Show().Bottom().Layer(0).Row(0).Position(0)
        self._mgr.Update()

    def create_textctrl(self):
        text = "This is text box"
        return wx.TextCtrl(self, -1, text, wx.Point(0, 0), wx.Size(150, 90),
                           wx.NO_BORDER | wx.TE_MULTILINE)

    def create_panel_from_xrc(self):
        return xrcexample(self)

if __name__ == "__main__":
    app = wx.App(0)
    wx.InitAllImageHandlers()
    top_window = TopWindow(None, -1, "")
    top_window.Show()
    app.MainLoop() 
```

以下代码是 XRCed 生成的精简代码。XRC 已嵌入。

```
import wx
import wx.xrc as xrc
__res = None

def get_resources():
    global __res
    if __res == None:
        __init_resources()
    return __res

class xrcexample(wx.Panel):
    def PreCreate(self, pre):
        pass

    def __init__(self, parent):
        pre = wx.PrePanel()
        self.PreCreate(pre)
        get_resources().LoadOnPanel(pre, parent, "example")
        self.PostCreate(pre)

# ------------------------ Resource data ----------------------
def __init_resources():
    global __res
    __res = xrc.EmptyXmlResource()
    wx.FileSystem.AddHandler(wx.MemoryFSHandler())
    example_xrc = '''\
<?xml version="1.0" ?><resource>
  <object class="wxPanel" name="example">
    <style>wxTAB_TRAVERSAL</style>
    <object class="wxBoxSizer">
      <orient>wxVERTICAL</orient>
      <object class="sizeritem">
        <object class="wxScrolledWindow" name="scrolled_window">
          <object class="wxFlexGridSizer">
            <rows>0</rows>
            <cols>2</cols>
            <object class="sizeritem">
              <object class="wxStaticText">
                <label>LABEL</label>
              </object>
            </object>
            <object class="sizeritem">
              <object class="wxTextCtrl"/>
            </object>
... # repeat label / textctrl many times ...
          </object>
        </object>
      </object>
    </object>
  </object>
</resource>'''
    wx.MemoryFSHandler.AddFile('XRC/example/example_xrc', example_xrc)
    __res.Load('memory:XRC/example/example_xrc') 
```

# java - 具有相同名称的字段的 DbUtils QueryRunner

> ID：11574765
> 
> 赞同：1
> 
> 时间：2012-07-20T07:25:28.613
> 
> 标签：java, mysql

我发誓我以前做过，而且效果很好，但似乎使用我的查询（如下），即使使用“as”，我也无法映射两个同名的列（在本例中为“email”）在我的查询中。我也尝试过不使用“as” - 只是使用 'u.emailassessorEmail' 并且该查询也可以正常工作，但同样的问题是，当我调试时，该字段不会出现在我的结果中。

```
getQueryRunner().query("SELECT u.email AS assessorEmail, f.formid, f.firstName, f.surname, f.email, f.valid, f.invalidreason FROM users AS u RIGHT JOIN userforms AS uf ON u.id=uf.user LEFT JOIN forms AS f ON uf.form=f.formid WHERE u.role=? AND f.submitted=1 AND f.valid=0 ORDER BY u.email", new MapListHandler(), Role.ASSESSOR); 
```

MySql 结果：

```
assessorEmail           formid  firstName   surname email           valid   invalidreason
assessor@test.com       547     John        Doe     user@test.com   0 
```

Eclipse->检查变量：

```
[{valid=false, invalidreason=, email=user@test.com, surname=Doe, firstName=John, formid=547}] 
```

如果我从查询中删除 f.email，u.email 会成功显示为“email”（仍然不是assessorEmail）。

这是 DbUtils 的事情吗？一个 QueryRunner 的东西？甚至是 MySql Java 连接器？我确定我在这里遗漏了一些非常明显的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:51:34.367

经过多一点的挖掘，我发现了这个问题的错误列表[http://bugs.mysql.com/bug.php?id=32504](http://bugs.mysql.com/bug.php?id=32504)。似乎是连接器的问题。

将“useOldAliasMetadataBehavior=true”作为参数添加到 JDBC URL 就可以了。

# geocoding - 谷歌地图地理编码

> ID：11574774
> 
> 赞同：2
> 
> 时间：2012-07-20T07:25:59.377
> 
> 标签：geocoding

嗨，我有与此处相同的[问题 从 Google Maps Geocoder v3 返回地址](https://stackoverflow.com/questions/5517120/return-address-from-google-maps-geocoder-v3) ，我不明白如何将我的全局变量设置为返回值

我在 b 返回未定义的那一刻得到了这个

```
 var a;
 var b;
function outputGeo(result){
    b = result; 
     }

 geocoder.geocode({'latLng': event.latLng},function(results, status) {

         a =  results[1].formatted_address;
         outputGeo(a);
        });  
alert(b); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:06:56.297

`geocoder.geocode`是一个异步函数，因为它正在执行 JSONP 请求。换句话说，在结果回来之前，这`alert(b)`条线已经被调用了。您需要将该`alert`行放入回调函数之后`outputGeo(a)`。

Javascript 是一种有趣的语言。在我研究 JSONP 和 Javascript 的同步之前，这个异步的东西一直困扰着我。我建议你这样做。了解这一点的一个好方法是编写自己的 JSONP 请求包装器。（只是一个想法。）

# jasper-reports - Jasper Report html 输出图像在 IE 和 Firefox 中显示缓存的图像，但在 Chrome 中一切正常

> ID：11574775
> 
> 赞同：0
> 
> 时间：2012-07-20T07:26:02.703
> 
> 标签：jasper-reports, portlet, jsf-1.2

我在我的应用程序（JSF1.2、RichFaces 3.3.3、Portlet 桥）中生成了一份碧玉报告，但我遇到了一个问题。jasper 生成的图像即使通过重新渲染其区域也不会动态变化。经过大量讨论和分析，我得出结论，因为 jasper 提供了同名的图像（新旧）......因此浏览器不会再次加载此图像并从缓存中获取此图像。我还在 xhtml(portlet) 的 head 部分添加了以下代码，但结果仍然没有改变。

```
<meta http-equiv="Cache-Control" content="no-cache"/>
<meta http-equiv="Cache-Control" content="no-store"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="-1"/> 
```

如果有人对此有解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-29T09:41:01.903

这是 Jasper 图像缓存的问题 这是代码

只需将随机值与图像参数一起传递

> exporter.setParameter(JRHtmlExporterParameter.IMAGES_URI, "image?random="+Math.random()+"&image=");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:32:11.540

如果整个报告是一个图像，你可以托盘这个黑客

```
<img src="/yourpath/imagename.png?{put_current_time_here or some random string}" /> 
```

# vba - Stepping Through (F8) 代码突然执行所有代码？

> ID：11574783
> 
> 赞同：8
> 
> 时间：2012-07-20T07:27:00.627
> 
> 标签：vba, excel

我写的一个宏（在另一台机器上）突然在我的电脑上表现得很奇怪。我在`Excel 2010`环境中编写了代码，并尝试在同一环境中逐步执行代码。

每次我这样做，几行之后，其余的代码就会立即执行。如果我设置断点，它将停止。有时，我可以在它再次自动执行之前多走几行。

是什么赋予了？我在网上没有找到答案……因此我在 Stackoverflow 上发表了第一篇文章。

感谢您的任何提示！这让我的生活变得困难。

更新：我现在已经回到原来的编程环境，单步执行代码没有问题。所以它一定是我的Excel设置中的东西！我无法弄清楚它可能是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T08:54:18.893

既然你一开始提到 F8 按钮按预期工作，我的大部分想法都从桌子上清除了。
我无法解释这一点，但也许我可以提供一个临时的“解决方法”，这是我能做的最好的。
您可以通过单击每一行然后应用 CTRL+F8（*运行到光标*）来模拟 F8。光标将充当断点，它比在每一行放置/删除断点更麻烦。
它需要更多的手工操作，但速度一样快（至少在普通桌面上）。希望它至少可以减少您在调试时的一些挫败感！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-30T17:10:53.700

我发现这里[也](http://blog.contextures.com/archives/2014/09/04/excel-vba-problem-with-step-into-f8/)引用了这个[解决方案](http://www.contextures.com/excelvbatips.html#f8)。解决方案是对注册表进行更改（取自源）：

注册表更改会影响 RPC 调试，您可以在 Microsoft 网站上阅读更多相关信息：[使用 RPC 调试调试 COM 客户端和服务器](https://msdn.microsoft.com/en-us/library/aa734022(v=vs.60).aspx)

1.关闭Excel

2.备份注册表文件，然后打开注册表——微软网站上有说明

3.转到适用的注册表项：

*   对于 64 位窗口上的 32 位 Office，请转到注册表项：HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VBA
*   对于 32 位窗口上的 32 位 Office，请转到注册表项：KEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VBA
*   对于 64 位 Windows 上的 64 位 Office，请转到注册表项：KEY_LOCAL_MACHINE\SOFTWARE\ Microsoft\VBA

4.右击右侧窗口，点击新建

5.单击 DWORD（在下面的屏幕截图中，DWORD 用于在 64 位计算机上运行的 32 位 Office）

6.将DWORD命名为DisableOrpcDebugging7

7.右键单击DWORD，然后单击修改

8\. 将值更改为 1，然后单击确定。

9.完成的DWORD会出现在注册表中

10.关闭注册表，然后重新打开 Excel，F8 键现在应该可以正常工作，单步执行代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T08:43:10.637

最后更新：事实证明，我在后台运行的另一个名为 KeyRocket 的应用程序旨在帮助您记住办公应用程序中的键盘快捷键，这是造成这种奇怪行为的原因。我希望这对其他人有帮助！

最后感谢大家的建议！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-22T22:18:32.800

我有一个类似的问题，但关闭了 excel 并看到有一个`EXCEL.EXE *32`进程仍在运行，将其杀死，然后重新打开并再次运行宏。无法再现，宏按预期进行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-09T01:13:51.507

我遇到了同样的问题，但是在 Word（不是 Excel）2010 中。

我尝试了上面其他贡献者提到的各种事情，例如关闭其他可能使用 F8 键的程序，并关闭其他可能干扰的 MS Office 2010 应用程序，但是，问题顽固地存在：从我的 VBA 的某个点代码，代码的分步执行（F8键）被忽略，整个过程一次执行。

然后我用我的代码做了一些实验。因此我发现：在我的情况下，当我如下调用外部程序时，不想要的行为就出现了：

```
Application.Run MacroName:="OneProcedureOfMine" 
```

为了规避这个问题，我像这样重写了代码：

```
Call OneProcedureOfMine 
```

无论如何，这是更优雅的方式。它解决了这个问题。以这种方式调用从属程序，F8 整齐地通过主程序，并从其内部调用每个程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-25T20:06:43.073

我通过做两件事成功解决了这些问题： 1\. 如果您加载了多个键盘驱动程序，请删除您不使用的那个 2\. 如果您的键盘有一个“F Lock”键（位于 F12 右侧我的键盘），请按它并重试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-01T19:49:43.393

我知道这是一个非常古老的线程，但我刚刚找到它。我检查了任务管理器，发现我有一个“卡住”的访问进程正在运行。我摆脱了它，现在一切正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-25T11:42:21.480

我遇到了同样的问题。我创建了一个新模块并将我的代码粘贴到这个新模块中，它成功了！！如果有人面临同样的问题，希望它会有所帮助。

# android - 覆盖一个常见的片段来帮助其他标签片段

> ID：11574784
> 
> 赞同：2
> 
> 时间：2012-07-20T07:27:02.930
> 
> 标签：android, android-fragments, android-dialogfragment

在这里，我有一个带有四个片段的 MainActivity，所有片段都是 Just Swipe+tab 视图类型。每个都包含列表视图。问题是我想加载一个应该对所有列表视图项通用的额外片段，当我将 onClickListener 应用于任何列表项时，它应该像对话框一样弹出并提供所有背景片段应该工作并以透明背景显示的信息一个常见的 DialogFragment ...它通过打开该**DialogFragment**上的列表项向用户提供更多信息。

我将该对话框片段应用到一个 onItemClickListenet 中，例如

```
Class X extends Fragment{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
             .......
             .......
             .......
             .......
             .......
             listview.setOnItemClickListener(new OnItemClickListener(){
             public void onItemClick(AdapterView<?> arg0, View v, int arg2,
                long arg3) {
                    // TODO Auto-generated method stub
                    OtherDilogFragment frag=new OtherDialogFragment(Obj);
                    frag.show(getActivity().getSupportFragmentManager(), "Dialog");
                }
             });
            }
          } 
```

请帮助....我怎样才能实现另一个覆盖+透明 DilogFragment 以便我可以在所有选项卡的每个片段上使用它...????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:31:32.843

在片段中使用 setTargetFragment 方法。

```
 void displayFullTweet(Object Object) {
        // TODO Auto-generated method stub
        FullView frag=FullView.setFullTweet(Object);
        setTargetFragment(frag, 1);
    } 
```

# perl - 如何在 Dist::Zilla dist.ini 中为我的发行版指定最低 perl 版本？

> ID：11574786
> 
> 赞同：6
> 
> 时间：2012-07-20T07:27:06.437
> 
> 标签：perl, version, dist-zilla

我正在使用[dzil处理我的](https://metacpan.org/module/Dist::Zilla)[Net::Prober](https://metacpan.org/module/Net::Prober)发行版。从下一个版本开始，我想强制执行**perl 5.10+（是 5.006）的最低要求**，因为我使用的是命名捕获 :-)

 **现在我已经把`use 5.010;`我的主模块放在了顶部，这很好，但我想知道：有没有办法在**文件****中指定最小的 perl 解释器版本`dist.ini`**？

我目前`dist.ini`是：

```
name    = Net-Prober
version = 0.07
...

[Prereqs]
Carp = 0
Data::Dumper = 0
Digest::MD5 = 0
IO::Socket::INET = 0
IO::Socket::SSL = 0
IO::Socket::UNIX = 0
LWPx::ParanoidAgent = 0
Net::Ping = 2.34
Sys::Syslog = 0

[Prereqs / TestRequires]
Test::More = 0
LWP::Online = 0

... 
```

我可以添加`perl = 5.010`到`[Prereq]`块中吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T10:55:59.900

> 我可以将 perl = 5.010 添加到 [Prereq] 块吗？

是的你可以。或者，[MinimumPerl](https://metacpan.org/module/Dist::Zilla::Plugin::MinimumPerl)插件可以自动检测所需的最低版本的 perl。**

# cuda - 在 CUDA 中使用 sincos() 的最佳方法

> ID：11574789
> 
> 赞同：0
> 
> 时间：2012-07-20T07:27:12.570
> 
> 标签：cuda, trigonometry

我不清楚什么应该是实现 sincos() 的最佳方法。我到处查找，但似乎一致认为它比单独计算 sin 和 cos 更好。下面基本上是我在内核中使用 sincos 的内容。但是，当我将它与单独做 sin 和 cos 进行对比时，它会变慢。我认为这与我使用 cPtr 和 sPtr 的方式有关。有没有更好的办法？

```
int idx = blockIdx.x * blockDim.x + threadIdx.x;

if (idx < dataSize)
{
    idx += lower;
    double f = ((double) idx) * deltaF;
    double cosValue;
    double sinValue;
    double *sPtr = &sinValue;
    double *cPtr = &cosValue;
    sincos(twopit * f, sPtr, cPtr);

    d_re[idx - lower] = cosValue;
    d_im[idx - lower] = - sinValue;

    //d_re[idx - lower] = cos(twopit * f);
    //d_im[idx - lower] = - sin(twopit * f);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T07:33:36.383

指针是多余的 - 你可以摆脱它们，例如

```
double cosValue;
double sinValue;
sincos(twopit * f, &sinValue, &cosValue); 
```

但我不确定这会对性能产生多大影响（尽管值得一试）。

还要考虑在精度要求允许的情况下使用浮点数而不是双精度数，并使用相应的单精度函数（`sincosf`在这种情况下）。

# android - 如何使用地理点？

> ID：11574791
> 
> 赞同：0
> 
> 时间：2012-07-20T07:27:15.960
> 
> 标签：android, android-mapview

> **可能重复：**
> [在 Android 中获取用户位置的好方法](https://stackoverflow.com/questions/6181704/good-way-of-getting-the-users-location-in-android)

我在我的应用程序中使用地图视图，但如何获取用户地理点以便我可以使用地图视图将其设置为我的默认位置？

# django - Django inline - 允许添加禁用编辑

> ID：11574795
> 
> 赞同：4
> 
> 时间：2012-07-20T07:27:45.973
> 
> 标签：django, django-admin

你好。我在阅读以下问题后提出这个问题：[Question_1](https://stackoverflow.com/q/2951781/1095090)和[Question_2](https://stackoverflow.com/q/9504371)。Question_1 没有任何适当的答案，并且 Question_2 有替代解决方案，但不是完美的解决方案。

在这里，我有两个模型和管理员。

**模型.py**

```
class TaskList(models.Model):
    task_name      = models.CharField(max_length = 255, unique = True)
    description    = models.TextField()
    assignee_role  = models.ForeignKey(Group, related_name = "assignee_roles")
    assignee_name  = models.ForeignKey(User, related_name = "assignee_names")

    def __unicode__(self):
        return "%s" % (self.task_name)

class TaskComments(models.Model):
    tasklist = models.ForeignKey(TaskList)
    time     = models.DateTimeField(null = True, blank = True)
    comment  = models.TextField()

    def __unicode__(self):
        return ""

    def save(self, *args, **kwargs):
        self.time = datetime.datetime.now()
        super(TaskComments, self).save(*args, **kwargs) 
```

**管理员.py**

```
class TaskCommentsInlineAdmin(admin.TabularInline):
    model           = TaskComments
    can_delete      = False

class TaskListAdmin(admin.ModelAdmin):
    inlines      = [TaskCommentsInlineAdmin, ]

    def add_view(self, request, form_url = '', extra_context = None):
        self.readonly_fields = ()
        return super(TaskListAdmin, self).add_view(request, form_url, extra_context)

    def change_view(self, request, form_url = '', extra_context = None):
        self.readonly_fields = ('task_name', 'description', )
        return super(TaskListAdmin, self).change_view(request, form_url, extra_context) 
```

在这里，模型**TaskComments在****TaskList**中用作内联。

**场景 1**

这里我想要实现的是：

**添加任务注释时**

*   隐藏“时间”字段并在后端进行更新。
*   能够输入“评论”并保存。

**保存评论后打开时**

*   对于已添加的评论，“时间”和“评论”字段都应该是可见的和只读的。
*   能够如上所述添加新评论。

**情景 2**

*   与之前的场景相同。
*   唯一的补充是，评论应该对添加它的用户是可编辑的，并且对所有其他用户是只读的。（我可以更新并获取添加评论的用户）。

这些是我想要实现的目标。我尝试在管理员中使用**add_view**和**change_view**。但他们不适用于内联。请提供解决方案来实现这些目标。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:08:52.293

您必须使用自定义版本 InlineAdmin 它使用以下类的自定义版本

*   内联模型管理员
*   BaseInlineFormSet

您可以在自定义版本的 InlineModelAdmin 上添加自己的 add_view 和 change_view 到

*   检测记录的所有者（允许编辑）
*   显示时间字段

您可以增强 BaseInlineFormSet 以控制所有运行时方面

# java - 如何跟踪java基本类型数组？

> ID：11574802
> 
> 赞同：3
> 
> 时间：2012-07-20T07:28:10.927
> 
> 标签：java, char, btrace

我有记忆问题。我在堆转储中发现了一个巨大的 char[]。但我不知道它来自哪里。这是一个弱/软参考。是否有任何工具/方法来跟踪这种基本类型的数组分配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:39:18.637

试试 VisualVM，它是一个非常强大的工具！见[VisualVM](http://visualvm.java.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T06:34:44.693

最后，我找到了一种处理数组分配的好方法。这是例如[http://kenai.com/projects/btrace/sources/hg/content/samples/NewArray.java?rev=442的链接](http://kenai.com/projects/btrace/sources/hg/content/samples/NewArray.java?rev=442)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T09:17:06.443

对于这类问题，我认为是调查检测和分析你的代码。Java 具有允许外部程序在堆周围戳的钩子。我认为一个很棒的免费试用版是 jprofiler

[http://www.ej-technologies.com/products/jprofiler/overview.html](http://www.ej-technologies.com/products/jprofiler/overview.html)

# iphone - iPhone：如何擦除/擦除蓝牙 4.0 数据

> ID：11574805
> 
> 赞同：5
> 
> 时间：2012-07-20T07:28:20.993
> 
> 标签：iphone, objective-c, core-bluetooth, bluetooth-lowenergy

我的蓝牙低功耗应用程序有时无法连接到我的设备（在线程中描述）时遇到了一些[重大问题。](https://stackoverflow.com/questions/11557500/corebluetooth-central-manager-callback-diddiscoverperipheral-twice#comment15303706_11557500)

在运行我的应用程序之前，我需要从以前的连接中清除所有存储的数据，据我所知，这只能通过重新启动手机来完成。有没有其他方式，最好是编程方式来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-27T18:05:59.320

我遇到了同样的问题，并找到了重现它的步骤。

当您将数据传输到外围设备时，它是 100% 可重现的

```
[peripheral writeValue:x forCharacteristic:y type:CBCharacteristicWriteWithoutResponse]; 
```

而外围设备超出范围并断开连接。发生这种情况后，BLE 设备不再返回服务，只有重新启动才能解决问题。如果外围设备超出范围并在没有向其传输数据的情况下返回，或者如果

```
[peripheral writeValue:x forCharacteristic:y type:CBCharacteristicWriteWithResponse]; 
```

用来...

其他断开连接似乎不会影响它，例如关闭外围设备并在范围内重新启动外围设备，即使在传输数据时也是如此......

我知道这不是答案，但由于某种原因我似乎无法发表评论。

希望这有助于调试。

# ruby-on-rails - 对非属性值使用 form_for

> ID：11574825
> 
> 赞同：1
> 
> 时间：2012-07-20T07:30:28.220
> 
> 标签：ruby-on-rails, activerecord, associations, form-for

我有一个 form_for 像这样：

```
<%= form_for(@post) do |f| %> 
```

我想提交一个不是模型属性的参数

```
<%= f.text_field :label%> 
```

我有一个标签模型（标签 has_many :posts 和帖子 has_many :labels），在 posts_controller 的创建操作中，我想根据标签 text_field 创建一个新的 Label 对象。使用上面的 text_field 我得到：

```
undefined method `label'for #<Object> 
```

我怎样才能实现这一目标？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T07:40:09.553

如果您的属性不存在于数据库表中，但您仍想使用它，那么您已通过以下方式将该属性指定到模型中

```
attr_accessor :name, :email, :content 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:54:11.017

您可以尝试 fields_for 方法来创建关联对象。

```
<%= form_for(@post) do |f| %>
  <%= fields_for @post.labels do |label| %>
    <%= label.text_field :name %>
    <%= label.text_area :description %>
  <% end %>
<% end %> 
```

要显示默认标签数量，您需要在控制器中构建关联对象。

在您的帖子控制器中添加

```
def new
  @post = Post.new
  #To build 2 labels use
  2.times do
  @post.labels.build 
  end
end 
```

要接受嵌套属性，请在 Post 模型中添加以下代码。

```
class Post < ActiveRecord::Base
  accepts_nested_attributes_for :labels
end 
```

有人发了然后删了。。。

# javascript - Javascript：使用 ActiveXobject 保存文件

> ID：11574827
> 
> 赞同：0
> 
> 时间：2012-07-20T07:30:43.917
> 
> 标签：javascript, asp.net, visual-studio-2010

我正在开发一个 Asp .net 项目，并且我在 aspx 页面中有一个 textarea，我试图通过单击具有以下代码的按钮将 textarea 内容保存在服务器上的文件中：

```
 var fso = new ActiveXObject("Scripting.FileSystemObject");
           var a = fso.CreateTextFile("c:\\temp1\\testfile.txt", true);
               a.WriteLine(saveData);
           a.Close(); 
```

问题是如果文件不存在，那么它会创建它。但如果它存在，它不会覆盖它。有什么帮助吗？（我不得不提到 Localy 使用 Visual Studio 运行应用程序，然后它会重写它，但它不适用于已发布的版本）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:36:02.593

使用而`OpenTextFile()`不是`CreateTextFile()`. 如果需要，它还会创建不存在的文件。

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
var a = fso.OpenTextFile("c:\\temp1\\testfile.txt",2, true);
a.WriteLine(saveData);
a.Close(); 
```

# javascript - 如何在 Metro Windows 8 中找到应用栏的图标？

> ID：11574829
> 
> 赞同：9
> 
> 时间：2012-07-20T07:30:48.103
> 
> 标签：javascript, windows-8, microsoft-metro, windows-runtime

如何在 Metro Windows 8 中找到应用栏的图标？以及如何添加自定义图标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T09:46:56.670

默认的应用程序栏样式使用 Segoe UI Symbol 字体作为其图标，您可以使用随 Windows 安装的程序 Character Map 来浏览它提供的图标。

除了 eibhrum 提到的 Metro Studio 之外，您还可以在[Noun Project](http://thenounproject.com/)和[Xaml Project](http://www.thexamlproject.com)中找到更多信息。

编辑：还想提一下出色的[Modern UI Icons](http://modernuiicons.com)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T08:45:48.610

[Syncfusion Metro Studio](http://www.syncfusion.com/downloads/metrostudio)拥有超过 600 个 Metro 风格图标模板的集合，可以轻松定制这些模板以创建数千个独特的 Metro 图​​标。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T02:15:30.523

来自 MSDN 的文档：[WinJS.UI.AppBarIcon 枚举 (Windows)](http://msdn.microsoft.com/en-us/library/windows/apps/hh770557.aspx)

所有可用的系统图标都在那里列出。

要添加自定义图标，您可以从 MSDN 下载示例：

*   [HTML AppBar 控件示例](http://code.msdn.microsoft.com/windowsapps/App-bar-sample-a57eeae9)
*   [XAML AppBar 控件示例](http://code.msdn.microsoft.com/windowsapps/XAML-AppBar-control-sample-2aa1cbb4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T17:47:56.633

有人在这里编译了一个内置 appbar 图标的列表：http: [//www.flickr.com/photos/adamkinney/6952800759/sizes/o/in/photostream/](http://www.flickr.com/photos/adamkinney/6952800759/sizes/o/in/photostream/)

我认为大多数时候这是您的最佳选择，因为它们在每个安装中都可用，并且质量最高。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T08:38:47.697

*   [https://github.com/Templarian/WindowsIcons](https://github.com/Templarian/WindowsIcons)给定链接中 Windows Phone 8 的所有应用栏图标。从那里下载 Zip.file。

# eclipse - Aptana 内置 PHP 与 Eclipse PHP

> ID：11574833
> 
> 赞同：2
> 
> 时间：2012-07-20T07:31:07.050
> 
> 标签：eclipse, ide, aptana

我一直在使用各种 IDE（Netbeans、PHPStorm，甚至 VIM），现在又回到了一个稳定且配置良好的 Aptana Studio - 主要是为了提供出色的 FTP 支持和整体感觉。

然而，我已经尝到了在 Storm 甚至 Netbeans 上为 PHP 编写代码完成的甜头，并且觉得 Aptana 缺少一些高级代码完成功能（例如，当自定义类方法返回另一个自定义类的实例时，它是 phpstorm 中的一等公民，完全支持 cc）。

现在我想知道 Eclipse PHP 工具是否比 Aptana 更好。由于我最近在 Aptana 中混合插件时遇到了一些问题，所以在我走这条路之前，我想听听一些意见：

1.  Eclipse PHP 是否比 Aptanas PHP 更好？
2.  主要区别是什么？
3.  是否有任何很酷的 PHP（或通用 webdev 工具）可以缩小 eclipse 的差距？

我只发现了过时的链接，所以我会对一些最新的见解感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:33:07.140

我喜欢 Aptana 和它的 CSS/JS 功能，但 php 代码完成度无法与 eclipse pdt 或 netbeans 的功能相提并论。正因为如此：是的，Eclipse PHP 比 aptana php 更好。仅命名 aptana 中缺少的一项功能：phpdoc 支持和自动完成功能。

我会混淆aptana + pdt，但这对我来说比解决问题更多:(

# image - 在 HTML 5 的 Canvas 中拖放图像后，如何显示它的 ID？

> ID：11574834
> 
> 赞同：0
> 
> 时间：2012-07-20T07:31:09.803
> 
> 标签：image, html, html5-canvas, kineticjs

我在 HTML5 中的 Canvas 中有 4 张图像。当我将图像放在 Canvas 中的某个位置时，我想在 Canvas 中显示图像的名称。
可能吗？如果是，请告诉我怎么做？

源代码可以在[这里](http://pastebin.com/D4w0ThwR)找到。KineticJS 用于处理画布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:52:39.447

我以前从未使用过 KineticJS，但从我在[文档](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-events-tutorial/)中读到的内容来看：

> 要使用 KineticJS 检测拖放事件，我们可以使用 on() 方法检测 dragstart 、 dragmove 或 dragend 事件。on() 方法需要事件类型和事件发生时要执行的函数。

它最终会变成这样

```
rajiniGroup.on('dragend', function(evt) {
   // add your text somewhere using a shape text
}; 
```

[文档](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/)中也详细说明了形状文本。

# c# - 每 10 秒调用一次页面加载事件

> ID：11574835
> 
> 赞同：-7
> 
> 时间：2012-07-20T07:31:15.327
> 
> 标签：c#, javascript, asp.net

我有一个场景在每 5 秒或 10 秒有人帮助我之后调用加载事件，并提供一些相关链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:38:43.937

页面加载事件在页面加载时触发一次。如果要每 10 秒运行一次函数，请使用：

```
window.setInterval(function, 10000) 
```

请参阅[MDN](https://developer.mozilla.org/en/DOM/window.setInterval)文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:45:24.617

我建议改为使用带有计时器的 UpdatePanel 来解决您的问题，您可以在 MSDN 上阅读更多相关信息：http: [//msdn.microsoft.com/en-us/library/cc295400.aspx](http://msdn.microsoft.com/en-us/library/cc295400.aspx)

# c# - 检查表是否包含重叠的时间跨度

> ID：11574836
> 
> 赞同：7
> 
> 时间：2012-07-20T07:31:16.117
> 
> 标签：c#, .net, sql, linq, datatable

我有一个包含两列`FromDate`和的数据表`ToDate`，它们是字符串格式。我想检查我的 table.ie 中是否有任何重复的记录

```
From Date    To Date
----------------------      
9/01/2012    9/16/2012   
8/23/2012    8/24/2012   
8/25/2012    8/25/2012   
8/5/2012     8/6/2012    
8/26/2012    8/27/2012   
9/15/2012    9/23/2012 
```

该表包含重复记录，因为它们的日期范围映射为

```
From Date       To Date      
----------------------      
9/01/2012    9/16/2012   
9/15/2012    9/23/2012 
```

它应该返回假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:00:00.550

按`ToDate`,排序`FromDate`（或在 DataTable 中构建排序的索引数组）。从行或数组位置 #2 循环到末尾，查看 FromDate <= 是否到前一项的 ToDate。将重叠的项目放入列表中。任务完成。

您也可以按 排序`FromDate`，`ToDate`并执行类似的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:04:29.873

```
var query = from row in dt.AsEnumerable()
            from row1 in dt.AsEnumerable()
            where
            (

                 (
                     DateTime.Parse(row1.Field<string>("fromDate")) >= DateTime.Parse(row.Field<string>("fromDate")) &&
                     DateTime.Parse(row1.Field<string>("fromDate")) <= DateTime.Parse(row.Field<string>("toDate"))
                 )
                 ||
                 (
                     DateTime.Parse(row1.Field<string>("toDate")) >= DateTime.Parse(row.Field<string>("fromDate")) &&
                     DateTime.Parse(row1.Field<string>("toDate")) <= DateTime.Parse(row.Field<string>("toDate"))
                 )
            )
            select new
            {
                fromDate = DateTime.Parse(row1.Field<string>("fromDate")),
                toDate = DateTime.Parse(row1.Field<string>("toDate"))
            };
//This lst contains the dates which are overlapping    
var lst = query.Distinct().ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:51:55.157

好的，selfjoin 将在这里有所帮助：

我有一个小班TimePeriod，只是为了满足你的需求

```
public class TimePeriod
{
    public int Id;
    public DateTime FromDate { get; set; }

    public DateTime ToDate { get; set; }

    public static DateTime Parse(string date)
    {
        var dt = DateTime.Parse(date, 
        CultureInfo.CreateSpecificCulture("en-US"), DateTimeStyles.RoundtripKind);
        return dt;
    }
} 
```

然后我有一些TestData

var list = new List();

```
 list.Add(new TimePeriod() { Id = 1, FromDate = TimePeriod.Parse("9/01/2012"),  ToDate = TimePeriod.Parse("9/16/2012") });
        list.Add(new TimePeriod() { Id = 2, FromDate = TimePeriod.Parse("8/23/2012"), ToDate = TimePeriod.Parse("8/24/2012") });
        list.Add(new TimePeriod() { Id = 3, FromDate = TimePeriod.Parse("8/25/2012"), ToDate = TimePeriod.Parse("8/25/2012") });
        list.Add(new TimePeriod() { Id = 4, FromDate = TimePeriod.Parse("8/5/2012"), ToDate = TimePeriod.Parse("8/6/2012") });
        list.Add(new TimePeriod() { Id = 5, FromDate = TimePeriod.Parse("8/26/2012"), ToDate = TimePeriod.Parse("8/27/2012") });
        list.Add(new TimePeriod() { Id = 6, FromDate = TimePeriod.Parse("9/15/2012"), ToDate = TimePeriod.Parse("9/23/2012") }); 
```

**这是解决方案：（**受到 OraNob 的启发，谢谢）

```
var overlaps = from current in list
            from compare in list
            where
            (
            (compare.FromDate > current.FromDate &&
            compare.FromDate < current.ToDate) ||
            (compare.ToDate > current.FromDate &&
            compare.ToDate < current.ToDate)
            )
            select new
            {
                Id1 = current.Id,
                Id2 = compare.Id,
            }; 
```

也许您想省略第二个 ID（因为您将在此处重复 (1 / 6) 和 (6 / 1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T07:35:46.877

使用方法`DataTable.Search()`来找出任何记录的存在，`DataTable`这样你就可以在你的记录中强制执行唯一性。

像这样的东西

```
string expression;
expression = "FromDate = #9/01/2012# AND ToDate = #9/16/2012#";
DataRow[] foundRows;

// Use the Select method to find all rows matching the filter.
foundRows = table.Select(expression);

if(foundRows.Length > 0)
     // Show duplicate message
else
    // Insert your new dates 
```

更多信息请[点击这里](https://stackoverflow.com/questions/633819/how-to-find-a-value-in-datatable-in-c)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T07:40:59.820

尝试解析“To Date”列，并为每个列在“From Date”列中搜索具有较晚对应“To Date”的任何较早日期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T15:18:03.303

如果您处理大型数据表，则应使用 @ErikE 响应。这需要更多的代码行，但绝对是迄今为止最有效的。

如果它的小表并且您更喜欢比较每两行。您可以使用其他建议。只需确保防止行与其自身进行比较，并在结果枚举中重复。

```
var query = from x in list
            where list.Exists((y) => x != y &&
                                     x.FromDate <= y.ToDate &&
                                     y.FromDate <= x.ToDate)
            select x; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-20T14:40:01.120

```
strong textDeclare @Table Table  
(  
    RowId Int Identity(1, 1) Not Null, 
      Id NChar(3) Not Null, 
      StartDate DATETIME Not Null, 
      EndDate DATETIME Not Null 
);  

Insert Into @Table (Id, StartDate, EndDate)  
Select 'id1', '20131210 10:10', '20131220 10:10' Union All  
Select 'id1', '20131211', '20131215' Union All  
Select 'id1', '20131201', '20131205' Union All  
Select 'id1', '20131206', '20131208' Union All  
Select 'id1', '20131225 10:10', '20131225 10:11'
Select *  
From @Table;  

With Overlaps (OverlapRowId, BaseRowId, OStart, OEnd, BStart, BEnd)  
As  
(  
        Select Overlap.RowId, Base.RowId, Overlap.StartDate, Overlap.EndDate, Base.StartDate, Base.EndDate 
        From @Table As Base  
        Inner Join @Table As Overlap On Overlap.Id = Base.Id  
        Where (((Overlap.StartDate > Base.StartDate) And (Overlap.StartDate < Base.EndDate))
          Or ((Overlap.StartDate = Base.StartDate) And (Overlap.EndDate > Base.EndDate))) 
          And (Base.RowId != Overlap.RowId) 
) 
-- Remove records that were found to cause overlap issues.  
Delete T  
From @Table As T  
Inner Join  
(  
        Select O.OverlapRowId   
        From Overlaps As O 
        Left Join Overlaps As Fp On Fp.OverlapRowId = O.BaseRowId  
        Where (Fp.OverlapRowId Is Null) 
) As SubQuery On SubQuery.OverlapRowId = T.RowId;  

-- Select the valid options.  
Select RowId, Id, StartDate, EndDate  
From @Table where StartDate<EndDate;  
Go 
```

# c#-4.0 - 导出 Excel：避免去除前导零

> ID：11574840
> 
> 赞同：6
> 
> 时间：2012-07-20T07:31:30.780
> 
> 标签：c#-4.0

我在 C#.Net 中将数据导出到 Excel 工作表。我有一个列，其中包含“00123450098”之类的数据。导出的数据没有第一个零。我想按原样显示数据。

这是我的导出 excel 代码。

```
 string style = @"<style> .text { mso-number-format:\@; } </style> ";
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.AddHeader(
        "content-disposition", string.Format("attachment; filename={0}", fileName));
    HttpContext.Current.Response.ContentType = "application/ms-excel";
    HtmlForm frm = new HtmlForm();
    ...................
    ...................
     table.RenderControl(htw);
            HttpContext.Current.Response.Write(style);
            //render the htmlwriter into the response
            HttpContext.Current.Response.Write(sw.ToString());
            HttpContext.Current.Response.End(); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-31T12:13:33.500

在导出到 excel 时，`\t`在插入的值之前添加将解决问题。例如：

```
string test = "000456";
string insertValueAs = "\t" + test; 
```

然后字符串测试将被视为字符串值而不是整数值。因此，它将保留前导零。

我遇到了同样的问题，上面的解决方案对我有用。希望这篇文章有帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-04T17:37:16.960

如果导出为 CSV / TSV，请将其放入每个包含文本“数字”的单元格中，该数字带有前导 0 或（尤其是）16 位以上的数字：

="0012345"

..其中 0012345 是您要导出到该单元格的数字。

我希望我能记得我在哪里看到的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T07:36:27.557

在 Excel 文件中，数字单元格总是去掉前导零，您可以通过单引号来设置带前导零的数字。IE

> 00123450098 至 '00123450098

但随后，该单元格的格式将更改为文本。如果您生成的 excel 文件有任何公式，其中包含该单元格引用作为数字，那么它将无法按预期工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-20T19:14:11.180

我也有这个问题。我想出的解决方案是在使用 excel 的内置 char() 函数时隐藏前导零。在 excel 中，char() 返回传递给它的 ASCII 字符代码的值，因此 char(048) 返回 0。在导出到 excel 之前，像这样添加变量...

```
varName = "=CHAR(048)&" + varName; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-29T00:27:24.200

[我使用StackOverflow 链接](https://stackoverflow.com/questions/8105038/export-to-excel-in-asp-net-issue-with-decimal-formatting-for-numbers-greater-th)和[博客](http://niallodoherty.com/post.cfm/basic-html-to-excel-formatting)的组合找到了我的答案。有一些 excel 格式样式可以应用于 rowdatabound 上的 gridview。我使用了这些，现在我的导出不会去掉前导零。

下面是我的代码示例。

```
ExpenseResultsGrid.RowDataBound += new GridViewRowEventHandler(ExpenseResultsGrid_RowDataBound);

        protected void AllQuartersGrid_RowDataBound（对象发送者，GridViewRowEventArgs e）
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {//add this style to prevent truncating leading zeros in fund code during export to excel
                e.Row.Cells[2].Attributes.CssStyle.Add("mso-number-format", "\\@");
            }
        }
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T21:54:29.853

导出时，只需在插入的值之前添加一个空字符串，如“”：

```
string x = "000123";
myWorksheet.Cells[1,1] = "" + x; 
```

# facebook - 使用朋友的照片作为衍生图像并将其重新发布回FB是否合法？

> ID：11574841
> 
> 赞同：0
> 
> 时间：2012-07-20T07:31:37.317
> 
> 标签：facebook, facebook-graph-api

我之所以问 SO，是因为指向类似问题的顶级 google 链接在这里导致。有人说合同是编程，所以...

是否允许使用 FB 连接浏览用户的朋友照片（由他们发布）将其添加到拼贴画中，然后重新发布衍生图像？

直觉上似乎你不能，但是 TOS 在这个问题上含糊不清 [http://developers.facebook.com/policy/](http://developers.facebook.com/policy/)第 2 节，第 4 点

并且有一些应用程序可以做到这一点。 [http://apps.facebook.com/my-year-in-photos](http://apps.facebook.com/my-year-in-photos)

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:38:55.927

根据 TOS，我猜如果用户授予您访问图片的权限并授予您发布权限，那么它就可以做您想做的事情。

第 4 节第 3 点说：

> 如果用户授予您发布权限，则您代表用户执行的操作必须符合用户的预期并且与用户在您的应用中的操作一致。

第 7 节第 2 点说：

> “Facebook 社交渠道”是指应用程序信息部分、页面选项卡、Feed、请求（包括邀请）、收件箱附件、聊天、封面、书签或用户个人资料或 Facebook 通信渠道的任何其他功能，其中或通过该渠道应用程序可以提供、显示或交付针对用户、代表用户或经用户许可的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:43:16.197

让用户可以使用该拼贴画是可以的，因为无论如何用户都可以自己访问这些照片。现有的应用程序可以这样做，根据 hectorg87 的回答，我认为这是允许的。

> 您还说您正在考虑将照片发布到任何人都可以浏览的公共领域。

但是，**即使**Facebook 隐私政策允许，我仍然建议您**不要将**其发布到公共领域。这是对用户朋友隐私的侵犯，您没有从他们那里**获得**使用他们的内容的明确许可，并且该数据不是您可以发布的。

**编辑**：正如 hectorg87 指出的那样，第 2 节第 2 点或政策明确规定您**不**拥有该数据，因此发布它是非法的。

# tfs - 如何在 TFS 中解锁新创建的文件夹

> ID：11574845
> 
> 赞同：1
> 
> 时间：2012-07-20T07:31:49.443
> 
> 标签：tfs, tfs-2010

我在我的项目中使用 TFS 2010，并在我的解决方案中添加了一些现有项目，并且我搁置了更改（所有添加的文件都已签出）。当我的团队成员取消搁置更改时，他们得到了错误，例如

**Info.cs 已锁定，无法通过工作空间名称中的用户名签出**

对于我所有新添加的文件，这将继续。

是这个权限问题，因为当我右键单击新添加的文件夹时，**解锁，锁定，属性**选项被禁用。

我想移除锁，我的团队成员也能够取消搁置并签入。

任何人都可以请帮助解锁文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:46:22.017

您可以使用命令行[http://msdn.microsoft.com/en-us/library/c72skhw4.aspx](http://msdn.microsoft.com/en-us/library/c72skhw4.aspx)，也可以使用 Sidekicks 进行此[http://www.attrice.info/cm/tfs/](http://www.attrice.info/cm/tfs/)

# events - 手势识别 JavaScript 库

> ID：11574846
> 
> 赞同：11
> 
> 时间：2012-07-20T07:31:54.163
> 
> 标签：events, javascript, gesture

我正在开发一个移动网站，并希望将手势识别添加到该网站的一些关键功能中。

是否有合适的 javascript 库允许我绘制手势并将手势识别为可以连接到事件调用的令牌？

作为 Dolphin 中此类功能的示例，请参阅这些链接；

![手势配置](../Images/61275c11e1c3ca8855437731ab41504e.png)

和视频： [http ://www.youtube.com/watch?v=k73ipSDZJXM](http://www.youtube.com/watch?v=k73ipSDZJXM)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T11:43:56.647

这是一个：[http](http://taitems.tumblr.com/post/2785024873/javascript-gesture-recognition-for-touch-screens) ://taitems.tumblr.com/post/2785024873/javascript-gesture-recognition-for-touch-screens 和：[https ://github.com/plainview/Jester/](https://github.com/plainview/Jester/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T14:22:32.550

我们正在使用[Hammer.js](http://eightmedia.github.com/hammer.js/)，它运行良好。

“不能碰这个”。-- MC Hammer（看看他们在那里做了什么？） ![MC锤](../Images/d2c0187292454aec6e7c19c369def479.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-04T00:08:55.583

对于简单的手势识别，有[$1](http://depts.washington.edu/aimgroup/proj/dollar/)。它不到 100 行代码，是用 JS 编写的。

# css - 平板设备宽度的 CSS 表达式

> ID：11574847
> 
> 赞同：0
> 
> 时间：2012-07-20T07:31:57.577
> 
> 标签：css, css-expressions

我需要使用 css 表达式从 css 中找出并应用平板电脑宽度。我有一个 div 内容。它应该在纵向模式下应用宽度 100%，当我转向横向时，div 应该将宽度更改为平板设备宽度的一半（平板电脑宽度/2）。如何在 css 中应用这种表达方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:44:44.673

我会尽量避开表达式，因为它们仅限于 Internet Explorer 5,6 和 7（什么平板电脑运行这个？？），并且它们大大减慢了速度（性能方面）。无论如何，试试这个：

```
@media screen and (orientation:portrait) {
    /* Portrait styles */
}

@media screen and (orientation:landscape) {
    .element {
        width:expression(document.body.clientWidth / 2);
    }
} 
```

您还可以尝试更多细节 - 这些将被视为黑客（感谢 TheBlackBenzKid 的建议）：

```
/* Windows 7 Phone - WP7 */
@media only screen and (max-device-width: 480px) and (orientation:portrait) {
}
@media only screen and (max-device-width: 480px) and (orientation:landscape) {
}
/* Apple iPhone */
@media only screen and (max-device-width: 320px) and (orientation:portrait) {
}
@media only screen and (max-device-width: 320px) and (orientation:landscape) {

} 
```

如果不使用表达式（例如，针对其他浏览器和..好吧，平板电脑），您可以使用一个小的 javascript 来检测方向，然后向元素添加一个类：

html:

```
<body onorientationchange="updateOrientation();"> 
```

Javascript：

```
function updateOrientation() {
    if(window.innerWidth> window.innerHeight){
        //we are in landscape mode, add the 'LandscapeClass' class to the element
        document.getElementById("element").className += " LandscapeClass";
    } else {
        //we are in portrait mode, remove the class
        document.getElementById("element").className = 
           document.getElementById("element").className.replace
              ( /(?:^|\s)LandscapeClass(?!\S)/ , '' );
} 
```

如果使用 jQuery，你可以试试这个，直接修改元素的（内联）CSS：

```
function updateOrientation() {
    var $width;
    if(window.innerWidth> window.innerHeight){
        $width = window.innerWidth/2;
    } else {
        $width = '100%';
    }
    $(".element").css({width:$width});
} 
```

我还没有测试过这些，但我认为它会起作用

# java - 使用 Jboss 4.3.2.GA 配置 JRebel

> ID：11574848
> 
> 赞同：4
> 
> 时间：2012-07-20T07:31:58.157
> 
> 标签：java, eclipse, jboss, jrebel

我正在尝试将 JRebel 配置为在 JBoss 4.3.2.GA 和 Eclipse Ganymede 上与我当前现有的 Java EE 应用程序一起使用。
我正在关注[http://manuals.zeroturnaround.com/jrebel-reference-manual/server.html?source=eclipse-config#server-4.6.11](http://manuals.zeroturnaround.com/jrebel-reference-manual/server.html?source=eclipse-config#server-4.6.11)。

但它说使用命令文件而不是 run.bat。请提供一些关于如何在现有脚本 run.bat 中实现命令行的想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T08:30:27.240

如果从 IDE 启动服务器，则无需编写自己的脚本即可使用 JRebel 启动容器。相反，您只需单击服务器配置选项卡中的 JRebel 复选框，如 [https://manuals.zeroturnaround.com/jrebel/ide/eclipse.html#server-configuration所示](https://manuals.zeroturnaround.com/jrebel/ide/eclipse.html#server-configuration)

# python - 使用 python 的 JSONP Web 服务

> ID：11574850
> 
> 赞同：9
> 
> 时间：2012-07-20T07:32:16.137
> 
> 标签：python, json

我正在编写一个从我的 JSON Python web 服务请求数据的 AJAX 函数。我的 AJAX 请求如下所示：

```
 url = "http://localhost:8001/blah"
  $.ajax({
      url: url,
      type: 'get',
      dataType: 'jsonp',
      success: function(data) {
          console.log('hi')
      }
  }); 
```

现在，我的 python web 服务有一个函数来处理对 '/blah' 的请求，它具有以下返回语句：

```
return json.dumps({'a':1, 'b':2 }) 
```

我的 AJAX 函数未成功从我的 Python Web 服务检索响应，但在 Firebug 中没有收到任何错误。我的网络服务或 javascript 做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T07:57:42.567

当您使用 Jquery 的 JSONP 数据类型时会发生什么情况，回调函数名称作为 GET 参数作为 URL 的一部分发送，因此您实际上是在查询类似“http://localhost:8001/blah?callback=json125348274839”的内容.

您的 Web 服务器的响应应如下所示：

```
 return "%s({'a':1, 'b':2 })" % _GET_PARAMS('callback') 
```

所以你的网络服务器会返回类似“json125348274839({'a':1, 'b':2 })”的东西

希望有帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-22T19:16:05.497

扎克明白了。我的 javascript 是正确的。我将我的 python return 语句更改为以下内容：

```
callback = request.args.get('callback')
return '{0}({1})'.format(callback, {'a':1, 'b':2}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:50:25.573

在 Python Web 服务中打开（或添加）日志记录。检查您的网络服务器日志...您是否收到来自您的 javascript 客户端的请求？您的 Web 服务器是否记录它正在返回响应？

可能取决于您使用的框架。它就像从处理函数返回一个字符串一样简单吗？也许处理程序应该返回一个字符串列表，并且因为它没有得到一个列表，所以它没有向客户端返回任何内容。在您的 Web 服务器日志中查找错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T07:51:10.910

您忘记了第一行的结束引号和分号 =)

如果没有帮助，请检查以下内容：

1.  项目清单
2.  你用什么作为python服务？Django，烧瓶，还有什么？也许你可以提供提供 python 代码？
3.  此外，查看“Net”Firebug 选项卡，并确保实际处理了对“url”的请求（不是返回 404 或 50x 代码，而是 200），检查“响应”子选项卡。

希望这可以帮助！

# c++ - C++：如何解释图像的字节数组表示？

> ID：11574852
> 
> 赞同：0
> 
> 时间：2012-07-20T07:32:31.123
> 
> 标签：c++, image, camera

我正在尝试使用这个相机 SDK，假设相机有这个名为 CameraGetImageData(BYTE* data) 的函数，我假设它接受一个字节数组，用图像数据修改它，然后返回一个基于状态码关于成功/失败。SDK 没有提供任何文档（甚至没有代码注释），所以我只是在这里猜测。这是我认为有效的代码片段

```
BYTE* data = new BYTE[10000000]; // an array of an arbitrary large size, I'm not 
                                 // sure what the exact size needs to be so I 
                                 // made it large
CameraGetImageData(data);
// Do stuff here to process/output image data 
```

我已经在 Visual Studio 中运行了带有断点的代码，并且可以确认 CameraGetImageData 函数确实修改了数组。现在我的问题是，相机输出数据有标准方法吗？我应该如何开始使用这些数据以及每个字节代表什么？相机以 8 位颜色捕获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:47:59.803

拍摄纯红色、纯绿色和纯蓝色。看看结果如何。

另外，如果你有内存的话，我会把数组设为 1 亿，而不是 1000 万，至少最初是这样。使用 24 位每像素的 10 兆像素相机将使用 3000 万字节，比您的阵列还大。如果它做一些疯狂的事情，比如为每种颜色存储 16 位，它可能需要多达 6000 万或 8000 万字节。

您可以在传递之前用数据填充这个大数组。例如用重复的“01234567”填充它。然后很明显哪些字节已写入，哪些字节未写入，因此您可以计算出返回的实际大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:38:06.793

我认为没有标准，但您可以尝试通过在相机前放置一些纯色图像来确定哪些值是什么。所以所有像素都将是大致相同的颜色。了解应该在每个像素中存储什么颜色后，您可能会了解颜色在数组中的表示方式。我会选择`black, white, reg, green, blue`图像。

但也要考虑找到一个更好`SDK`的文档，因为只制作一个大数组是非常糟糕的设计

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:39:35.810

您应该查看相机 SDK 上的文档，因为数据输出没有“标准”或“通用”方式。它可以是[原始](http://en.wikipedia.org/wiki/Raw_image_format)数据，可以是 RGB 数据，甚至可以是已经压缩过的数据。如果相机供应商没有提供任何信息，您可以尝试查找一些处理最常见格式的库，并尝试传递您必须查看的数据以查看会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T07:46:56.120

甚至不知道相机的类型，这个问题几乎是不可能回答的。如果它是一台科学相机，它很可能符合 IEEE 1394（又名 IIDC 或 DCAM）标准。我亲自使用过 Hamamatsu 制造的这种相机，使用这个[库](http://sourceforge.net/projects/libdc1394/)与相机交互。

在我的情况下，相机输出只是原始数据。相机本身是单色的，每个像素的深度分辨率为 12 位。因此，每个像素强度作为 16 位无符号值存储在结果数组中。数组的大小只是`width * height * 2`字节，其中`width`和`height`是以像素为单位的图像尺寸，因子`2`是每像素 16 位。`width`和`height`是从所选相机模式中预先知道的。

如果您有结果图像的尺寸，请尝试将字节数组转储到文件中并在 Python 或 Matlab 中加载结果，然后尝试将内容可视化。[另一种可能性是使用ImageJ](http://rsbweb.nih.gov/ij/)之类的图像编辑器加载这个原始文件，并希望从中得到任何东西。

祝你好运！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T07:46:42.050

我希望这个问题的解决方案对您有所帮助：[https](https://stackoverflow.com/a/3340944/291372) : //stackoverflow.com/a/3340944/291372 实际上您有一个像素数组（如果您的相机以 8 位捕获，则假设每个像素 1 个字节）。你需要什么 - 只是确定宽度和高度。之后，您可以尝试从字节数组中恢复位图图像。

# c# - 对数据表进行排序不起作用

> ID：11574853
> 
> 赞同：1
> 
> 时间：2012-07-20T07:32:33.623
> 
> 标签：c#, asp.net, visual-studio-2010, sorting, datatable

我有一个名为“DTStage”的数据表。它有两列，例如“SeqNbr”和“StageID”。

我想根据“SeqNbr”对数据表进行排序。

DataTable 有以下记录：

```
 SeqNbr         StageID
    --------      -----------
       0               1
       1               2
       2               3
       3               4
       4               5
       5               6
       6               7
       7               8
       8               9
       9               10
       10              11
       11              12
       12              13
       13              14
       14              15
       15              16
       16              17
       18              18
       17              19 
```

我使用了两种方法对这个数据表进行排序，它们如下：

```
 DTStage = new DataView(DTStage, "", "SeqNbr asc", DataViewRowState.CurrentRows).ToTable();

                     &

 DataView dv = DTStage.DefaultView;
 dv.Sort = DTStage.Columns["SeqNbr"] + " asc";
 DTStage = dv.ToTable(); 
```

但是两者都给出了相同的结果，如下所示：

```
 SeqNbr         StageID
    --------      -----------
        0               1
        1               2
       10               11
       11               12
       12               13
       13               14
       14               15
       15               16
       16               17
       17               19
       18               18
        2               3
        3               4
        4               5
        5               6
        6               7
        7               8
        8               9
        9               10 
```

为什么这不能正常工作？如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:37:23.427

看起来您的 SeqNbr 列是字符串类型，因此它按字符而不是数字排序。如果这些是数字（我假设是整数），为什么在 DataTable 中没有将列类型设为 int？

这应该可以帮助您：[使用 c# 将数据表中的字符串项排序为 int](https://stackoverflow.com/questions/7572685/sort-string-items-in-a-datatable-as-int-using-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T07:38:55.300

它是一种自然排序（字符串比较）。您需要告诉 dataTable 这些是整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:38:29.180

而不是`DTStage = dv.ToTable();`请使用`DTStage = dv.Table;`

否则，您需要将该列作为 Sql Table 上的数字类型进行排序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T07:56:40.097

您应该将您的数据表定义为

```
Datatable DTStage = new Datatable();

DTStage.Columns.Add("SeqNbr", typeof(int)); 
```

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T07:57:27.840

看起来它正在比较字符串。尝试将它们转换为 int。

# iphone - 如何从 NSNumber 中获取整数

> ID：11574860
> 
> 赞同：0
> 
> 时间：2012-07-20T07:33:21.530
> 
> 标签：iphone, ios5, int, nsnumber

我有这段代码，我保存总秒数并将其加载到结果视图控制器中。在我的结果视图控制器中，我输入了这段代码，

```
- (void) counting
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSNumber *loadSecond = [defaults objectForKey:@"saveSecond"];
    NSLog(@"last save is %@", loadSecond); // in here, log is displaying 30 seconds
    scratch = fmod(secondCount,3600);
    hour =  secondCount / 3600;
    minute = scratch / 60;
    second = fmod(scratch,60);
    labelRecord.text = [NSString stringWithFormat:@"%d:%d:%d", hour , minute, second];
} 
```

从上面看，NSLog 显示我的最后一次保存计数为 30 秒，这是正确的，但我如何将这 30 秒更改为 secondCount？因为我想在我的 labelRecord 中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:35:50.753

更改此行

```
NSNumber *loadSecond = [defaults objectForKey:@"saveSecond"]; 
```

到

```
int loadSecond = [[defaults objectForKey:@"saveSecond"] intValue]; 
```

这假定键 saveSecond 的对象是`NSNumber`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:36:01.160

使用 intValue 消息

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnumber_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumber/intValue](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnumber_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumber/intValue)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:45:01.737

快速浏览一下[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)会发现有一个`NSUserDefaults`返回整数的方法：

```
NSInteger loadSecond = [defaults integerForKey:@"saveSecond"]; 
```

`NSInteger` is just an `int`. There's also `NSUInteger` which is unsigned.

# python - 如何在windows中运行python脚本

> ID：11574873
> 
> 赞同：1
> 
> 时间：2012-07-20T07:34:52.937
> 
> 标签：python, windows

我需要编写一个 python 代码来验证从网站接收到的 SSL 证书是否有效。代码片段将在 Windows 平台上执行。我最近一直在使用 Editra 编写带有 PyStudio 插件的 python 代码。我很困惑这是否是一个可能的想法。有谁知道如何使它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:38:45.087

如果你想在 Windows 上分发 Python 脚本（默认情况下没有安装 Python），你可以使用[py2exe](http://www.py2exe.org/)。*将您的 Python 脚本转换为 Windows 用户无需*安装 Python`py2exe`即可运行的可执行文件。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:00:46.983

假设它只是您要执行的纯脚本，您可以通过在命令行中调用 python 运行时并发出它来执行脚本来执行此操作。

例如：

```
python myscript.py 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:39:10.767

如果您担心在 Windows 下安装良好的 Python，包括许多有用的预配置包，请考虑[使用 Python XY 。](http://code.google.com/p/pythonxy/)*

# linq - 配置动态 linq express

> ID：11574874
> 
> 赞同：0
> 
> 时间：2012-07-20T07:35:06.950
> 
> 标签：linq, dynamic, expression

```
static class QueryableExtensions
{
private static MethodInfo StringContainsMethod;
private static MethodInfo StringStartsWithMethod;
static QueryableExtensions()
{
    Type[] singleStringParam = new[] { typeof(string) };
    StringContainsMethod = typeof(string).GetMethod("Contains", singleStringParam);
    StringStartsWithMethod = typeof(string).GetMethod("StartsWith", singleStringParam);
}
public static IQueryable<T> AppendTextFilter<T>(this IQueryable<T> queryable, Expression<Func<T, string>> memberSelector, string condition, string value)
{
    Expression expression = null;
    switch (condition)
    {
        case "StartsWith":
            expression = Expression.Call(memberSelector.Body, StringStartsWithMethod, Expression.Constant(value));
            break;
        case "Equals":
            expression = Expression.Equal(memberSelector.Body, Expression.Constant(value));
            break;
        case "Contains":
            expression = Expression.Call(memberSelector.Body, StringContainsMethod, Expression.Constant(value));
            break;
        default:
            throw new NotSupportedException(string.Format("'{0}' is not a supported condition", condition));
    }
    var lambda = Expression.Lambda<Func<T, bool>>(expression, memberSelector.Parameters);
    return queryable.Where(lambda);
}
} 
```

当我在谷歌上搜索时，我得到了上面的类。嗯，它真的帮了我很多，但它仍然不能满足我的需要。
问题是它只能处理“字符串”类型的字段。正如您在上面的代码块中看到的，该方法只能处理 T,string 。
我如何在一个方法中处理我想要的任何类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:59:54.897

好吧，这个想法是用泛型类型替换字符串，这种方式。

```
public static IQueryable<T> AppendTextFilter<T, TValue>(
      this IQueryable<T> queryable, 
      Expression<Func<T, TValue>> memberSelector, 
      string condition, 
      TValue value) 
```

但是对于您的示例，这没有多大意义，`StartsWith`例如，如果`TValue`type 为 `string`...

# linux - 编译zabbix-server时找不到z库

> ID：11574878
> 
> 赞同：0
> 
> 时间：2012-07-20T07:35:25.440
> 
> 标签：linux, configure

我在 CentOS 6.2 上编译 zabbix-server 时遇到问题。命令行是：

```
./configure --enable-server --with-mysql --with-net-snmp --with-libcurl 
--with-jabber --with-ssh2 --with-openipmi --with-ldap --enable-static 
```

但是出现错误：

```
checking for main in -lz... no
configure: error: Not found z library; 
```

完整的配置输出在这里： http: [//pastebin.ru/WmDP7UL0](http://pastebin.ru/WmDP7UL0)

我已经尝试过：

```
yum install zlib zlib-devel zlib-static zlibrary zlibrary-devel 
```

但它没有成功。

感谢您的关注。

UPD。此处发布的配置日志：http: [//pastebin.ru/WNtQu9eR](http://pastebin.ru/WNtQu9eR)并显示此错误：

```
configure:7366: checking for main in -lz
configure:7385: gcc -o conftest -g -O2  -rdynamic  -static conftest.c -lz  -lm -lrt  -lresolv >&5
/usr/bin/ld: cannot find -lm
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:54:07.723

这是实际的错误：

```
/usr/bin/ld: cannot find -lm 
```

但它*是*以前发现的，它指向别的东西。检查您的 ulimit 以确保您的最大打开文件数不低。

# php - () 里面的东西的正则表达式帮助

> ID：11574880
> 
> 赞同：0
> 
> 时间：2012-07-20T07:35:27.647
> 
> 标签：php, regex

我正在尝试构建一个正则表达式，其中包含“（）”和括号内的任何内容。

```
\b([a-zA-Z [0-9]])\b 
```

它通常像这样的文字

```
(not set)
(Content Targeting)
(content targeting) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:39:33.517

```
^\([a-zA-Z ]+\)$ 
```

您需要转义括号。您还希望在其中允许多个字符，因此请使用`+`or `*`（零个或多个）

我使用正则[表达式](http://www.regexpal.com/)来测试正则表达式。它在右上角有一个很好的快速参考。MDN 有更完整的参考：[RegExp - MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp#Special_characters_in_regular_expressions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T07:44:14.433

我发现您的模式有两个问题：

```
 \b([a-zA-Z [0-9]])\b
      ^        ^
      |   already in class
 not escaped 
```

已经在课堂上可以通过删除方括号来修复，并使用以下`\`字符转义圆括号：

```
 \b\([a-zA-Z0-9 ]\)\b
      ^^       ^^^  ^^ 
```

希望这会有所帮助。

# php - HTML - 表单最佳实践

> ID：11574885
> 
> 赞同：0
> 
> 时间：2012-07-20T07:35:48.260
> 
> 标签：php, html, forms

可以有一个带有更多提交按钮的表单吗？我的意思是我有一个表单，其中包含一些输入字段、一个表格和 3 个按钮，它们将以不同的格式导出一些信息

```
<form id="form1" name="form1" method="post" >
    <label for="country"><strong>Countries: </strong></label><br />
    <select id="country" name="country">
      <?php
      //some php code here
      ?>
    </select> 
    <br />
    <br/>
    <label for="start_date"><strong>Start date: </strong></label><br />
    <input name="start_date" type="text" id="start_date" value="<?php if(!empty($start))echo $start; ?>" size="20" />
    <br />
    <br />  
    <label for="stop_date"><strong>Stop date: </strong></label><br />
    <input name="stop_date" type="text" id="stop_date" value="<?php if(!empty($stop)) echo $stop; ?>" size="20" />
    <br />
    <br />
        <input type="submit" name="fill_table" value="Retrieve data" /> 

    <div id="table">
      <h1>&nbsp;</h1>
      <hr />
      <h2>Sales Report</h2>
        <table class="display" id="data_table" >
          <thead>
              <tr>
                <th>Product</th>
                <th>Date</th>
                <th>Quantity</th>
              </tr>
          </thead>
          <tbody>
            <?php
                //some php code here
            ?>
          </tbody>
        </table>
        <br />
        <br />
        <br />
        <input type="submit" class="button" name="export_xls" value="Export xls" />
        <input style="margin-left:10px;" type="submit" name="export_html" value="Export html" />
  </form> 
```

这样做可以吗，还是我应该制作 3 个表单，每个表单都有一个特定的提交按钮？每次我按下提交按钮时，我都会对输入字段感兴趣：start_date、stop_date 和“国家”中的选定项目。PS我想知道它是否是最佳的以及其他程序员将如何处理这些东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T08:06:36.013

主要问题是：当用户在文本输入字段中按下 Enter 时会发生什么？在大多数浏览器上，表单数据会被提交，但这是否对应于按下其中一个按钮，哪个按钮？参见例如[HTML 表单中的多个提交按钮](https://stackoverflow.com/questions/48/multiple-submit-buttons-in-an-html-form)问题。

每个表单只有一个提交按钮是最安全的。（但是，为了方便用户，将具有相同功能的提交按钮添加到长表单中是安全的。）这意味着用户将通过使用单选按钮或选择菜单在替代方案（例如，输出格式）之间做出选择，而不是通过按钮之间的选择。但是，这并不总是实用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:42:59.930

我不认为这是一个坏主意。但是您所有的提交按钮都必须具有相同的名称属性。

看看[这个](http://www.chami.com/tips/internet/042599I.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:52:38.443

是的，您可以在一个表单中拥有更多提交按钮。由于您使用 php 处理提交的表单，因此我不会为每个提交按钮设置与@NoZip 建议的名称相同的名称，而是使用不同的名称，以便在代码的 php 处理部分中我会问：

```
<?php
    if (isset($_POST["submitButtonName1"]))
        some code here...
    else if (isset($_POST["submitButtonName2"]))
        some other code here...
    else
        code logic for no submit button clicked   
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T07:54:13.903

我刚刚完成了一个系统，您可以在其中更新数据记录，我使用的功能之一是使用多次提交以允许用户使用不同的选项“标记”更新。例如“活动”、“待定”、“禁用”。它保存了一个包含多个选项的下拉框，并使系统保持直观。

具有不同值的多个提交按钮允许您提交具有多个值之一的提交字段的表单，并且可以改进用户界面。另外，它的有效 HTML。

# c# - 将 html 字符串转换为 xml 并使用 xml 文件填充数据网格

> ID：11574891
> 
> 赞同：0
> 
> 时间：2012-07-20T07:35:59.270
> 
> 标签：c#, xml, c#-4.0, xml-parsing, html-parsing

使用 htmlagilitypack 我从网页中提取 html 内容并将其存储在字符串中。我什至删除了输出中的所有标签。现在我想用输出字符串中的值填充数据网格。我想将这个包含 html 内容的字符串转换为 xml 并将其用作数据网格的源。当我将 html 字符串转换为 xml 时，输出看起来像下面的代码，CRM

```
 &amp;nbsp;
        some text

          education details

          Id details 
      Salary
      Experience
      Location
      Name 
                    Mobile: 
                    Region 
        &amp;nbsp;
        Similar Resumes    New&amp;nbsp; crm

        &amp;nbsp;
        crm

          education details

          Id details 

      Experience

      Name 

                    Telephone: Region 
        &amp;nbsp;
        Similar Resumes    &amp;nbsp; CRM

        &amp;nbsp; 
```

这里xml文件中没有标签，因此不知道如何使这些值显示在datagrid中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:47:03.717

请参阅问题[XML 中的 <![CDATA[]]> 是什么意思？](https://stackoverflow.com/questions/2784183/what-does-cdata-in-xml-mean)阅读更多和

记住：`&amp;nbsp;`需要转换为空间。CDATA 中的文本输入是您在网格中输出的文本。

例子

```
<description>
<![CDATA[
    some text

      education details

      Id details 
  Salary
  Experience
  Location
  Name 
                Mobile: 
                Region 
    Similar Resumes    New crm

   ...
]]> 
</description> 
```

# android - 如何为 Android 应用程序创建重复的密钥库

> ID：11574896
> 
> 赞同：0
> 
> 时间：2012-07-20T07:36:10.647
> 
> 标签：android, duplicates, keystore

> **可能重复：**
> [我丢失了 .keystore 文件？](https://stackoverflow.com/questions/4322367/i-lost-my-keystore-file)
> [Android：我丢失了我的 android 密钥库，我该怎么办？](https://stackoverflow.com/questions/4459719/android-i-lost-my-android-key-store-what-should-i-do)

我想更新我的 Android 应用程序已在 Google Play 中上传（现有），但我错过了已创建的密钥库。

我知道旧密钥库的所有详细信息（别名、psw、名称、有效期、国家代码等），我可以为此创建重复密钥吗

有可能吗？google play 会接受这个重复的密钥来更新我的应用程序吗？

# c# - 比较两个列表时索引超出范围

> ID：11574897
> 
> 赞同：0
> 
> 时间：2012-07-20T07:36:12.273
> 
> 标签：c#, outlook-addin, outlook-2010

我搜索了整个互联网以找到答案。我正在使用嵌套的 for 循环遍历两个列表（list1 和 list2），并根据三个条件删除第一个列表中的重复记录。如果这两个列表中的所有记录都相互匹配，则会出现越界错误。我假设当我从第一个列表中删除所有项目时会发生这种情况，当它最终减少到 0，并且没有任何记录要循环，但是放置一个 if 语句来检查第一个列表的计数（如果 inbox_emails_filtered_contacts. Count > 0) 也无济于事。请让我知道是否有人可以告诉我为什么会出现此错误。

## C#.net 中的 Outlook 加载项

```
for (int i = 0; i < list1.Count; i++)
{
    for (int j = 0; j < list2.Count; j++)
    {
        if (list1.Count > 0)
        {
            if ((list1[i].username == registered_user)
                && (list1[i].from_email.ToLower() == list2[j].from_email.ToLower())
                && (list1[i].email_subject == list2[j].email_subject)
                && (list1[i].email_timestamp.ToLongDateString() == list2[j].email_timestamp.ToLongDateString()))
            {
                //Remove the duplicate email from inbox_emails_filtered_contacts
                list1.RemoveAt(i);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:51:54.477

我建议`while`在这里使用循环。如果找到匹配项，您还需要跳出内部循环以从头开始重新检查。

```
int i = 0;
while (i < list1.Count)
{
    int found = 0;
    for (int j = 0; j < list2.Count; j++)
    {
        if ((list1[i].username == registered_user)
            && (list1[i].from_email.ToLower() == list2[j].from_email.ToLower())
            && (list1[i].email_subject == list2[j].email_subject)
            && (list1[i].email_timestamp.ToLongDateString() == list2[j].email_timestamp.ToLongDateString()))
        {
            //Remove the duplicate email from inbox_emails_filtered_contacts
            list1.RemoveAt(i);
            found = 1;
            break;
        }
   }
   if (!found)
   {
       i++;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:43:03.733

当您迭代列表/数组同时从中删除项目时使用反向（Visual 中的片段“forr”）：

```
for (int i = list1.Count - 1; i >= 0; i--) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:50:38.680

可能是 application_emails 中有多个重复项，因此 removeAt(i) 被多次调用。你的 if 永远不会捕捉到 i 是列表中最后一项超过 2 并且你最终删除多次的情况。

此外，您还将最终跳过带有删除语句的电子邮件。假设 i=4，如果您在 4 处删除，索引 4 将包含一个新项目，并且 i 在下一次迭代中将是 5。使用while循环可能会更好

```
int i=0;
while (i < inbox_emails.Count) {
   bool foundDuplicate=false;
   for (int j=0;j<for (int j = 0; j < application_emails.Count; j++) {       
     if ((inbox_emails[i].username == registered_user)       
         && (inbox_emails[i].from_email.ToLower() == application_emails[j].from_email.ToLower())       
         && (inbox_emails[i].email_subject == application_emails[j].email_subject)       
         && (inbox_emails[i].email_timestamp.ToLongDateString() == application[j].email_timestamp.ToLongDateString()))       
        {       
           foundDuplicate=true;
           break;   // This is optional but it stops the j loop from continuing as we've found a duplicate
        }       
    }   
    if (foundDuplicate) {
       inbox_emails.RemoveAt(i);
    } else {
       i++;
    }
} 
```

如果这是一个单线程，你可以使用 Linq 替换列表，确保你有一个`using System.Linq`

```
inbox_emails = inbox_emails.Where(i=> 
                 i.username != registered_user 
                 || ! application_emails.Any(j=>
                    i.from_email.ToLower() == j.from_email.ToLower()
                    && i.email_subject == j.email_subject
                    && i.email_timestamp.ToLongDateString() == j.email_timestamp.ToLongDateString()
                    )
                 ).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T10:04:31.170

这是一个电子邮件类的实现

```
class Email:IComparable<Email>
{
    private static int _Id;

    public Email()
    {
        Id = _Id++;
    }

    public int Id { get; private set; }
    public string UserName { get; set; }
    public string Body { get; set; }
    public string Subject { get; set; }
    public DateTime TimeStamp { get; set; }

    public override int GetHashCode()
    {
        return UserName.GetHashCode() ^ Body.GetHashCode() ^ Subject.GetHashCode();
    }

    public int CompareTo(Email other)
    {
        return GetHashCode().CompareTo(other.GetHashCode());
    }

    public override string ToString()
    {
        return String.Format("ID:{0} - {1}", Id, Subject);
    }

    public override bool Equals(object obj)
    {
        if (obj is Email)
            return CompareTo(obj as Email) == 0;
        return false;
    }

} 
```

和 2 种获取差异的方法。

```
 var list1 = new List<Email>();
        var ran = new Random();
        for (int i = 0; i < 50; i++)
        {
            list1.Add(new Email() { Body = "Body " + i, Subject = "Subject " + i, UserName = "username " + i, TimeStamp = DateTime.UtcNow.AddMinutes(ran.Next(-360, 60)) });
        }
        var list2 =  new List<Email>();

        for (int i = 0; i < 50; i++)
        {
            if (i % 2 == 0)
                list2.Add(new Email() { Body = "Body " + i, Subject = "Subject Modifed" + i, UserName = "username " + i, TimeStamp = DateTime.UtcNow.AddMinutes(ran.Next(-360, 60)) });
            else 
                list2.Add(new Email() { Body = "Body " + i, Subject = "Subject " + i, UserName = "username " + i, TimeStamp = DateTime.UtcNow.AddMinutes(ran.Next(-360, 60)) });

        }

        foreach (var item in list2.Intersect<Email>(list1))
        {
            Console.WriteLine(item);
        }

        foreach (var item in list1)
        {
            for (int i = 0; i < list2.Count; i++)
            {

                if (list2[i].Equals(item))
                {
                    Console.WriteLine(item);
                    list2.RemoveAt(i);
                    break;
                }
            }
        }

        Console.WriteLine(list2.Count); 
```

# objective-c - 任何关于如何在 cocos2d 中制作排行榜和成就的教程

> ID：11574898
> 
> 赞同：2
> 
> 时间：2012-07-20T07:36:13.830
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone, game-center

我已经尝试谷歌它，但我找不到一个看起来合法的。我已经建立了所有游戏中心，只需要建立排行榜和成就。任何建议都会很好。谢谢你。另外，既然我已经将我的分数保存到一个字符串中，我该如何将它放在排行榜中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:52:16.613

将排行榜代表添加到您的图层类。

```
@interface MyMainMenu : CCLayer<GKLeaderboardViewControllerDelegate> 
```

根据您的需要显示排行榜。

```
-(void)displayLeaderboard
{
    GKLeaderboardViewController *leaderboardViewController = [[GKLeaderboardViewController alloc] init];
    leaderboardViewController.leaderboardDelegate = self;

    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];

    [app.navController presentModalViewController:leaderboardViewController animated:YES];
} 
```

添加这两个排行榜代表功能

```
#pragma mark GameKit delegate

-(void) achievementViewControllerDidFinish:(GKAchievementViewController *)viewController
{
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    [app.navController dismissModalViewControllerAnimated:YES];
}

-(void) leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController
{
    AppController *app = (AppController*) [[UIApplication sharedApplication] delegate];
    [app.navController dismissModalViewControllerAnimated:YES];
} 
```

提交分数：

```
[[GameCenterManager sharedGameCenterObject] reportScore:score forCategory: kLeaderboardID]; 
```

使用 GKTapper 示例中的 GameCenterManager.m 类（请参阅您的苹果 sdk 示例）。

这是从首选项中获取值的代码：//从首选项中获取保存的值

```
int highScore = [[[NSUserDefaults standardUserDefaults] objectForKey:@"HighScore"] intValue ]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T00:42:21.137

Itterheim & Loew 的《Learn Cocos2d Game Development with iOS5》一书中有一整章是关于游戏中心编程的，并附有示例代码。Strougo & Wenderlich 的“Learning Cocos2d”也有一章包含工作代码。

# jquery - PartialView 在 IE8 中没有完全获取

> ID：11574900
> 
> 赞同：0
> 
> 时间：2012-07-20T07:36:15.203
> 
> 标签：jquery, asp.net-mvc-3, razor

我有这个 PartialVIew ：

```
@model IEnumerable<Tungsten.Models.ProductGroup>
<div id="treeviewpglist" class="filetree">
    <ul id="tree" class="treeview">
        <li><span class="folder"><a href="#" onclick="return false;" class="treenode"><input type="hidden" value="12">Name</a></span></li>
    </ul>
    <input type="hidden" value="0" id="pgID">
</div> 
```

我使用以下代码将其加载到视图中：

```
$.get('@Url.Action( "GroupList" , "Product" )', function (data) { $('#treeviewdiv div').replaceWith(data); }).success(function ()
{
    // do something
}); 
```

它在 chrome、Firefox 和 IE9 中运行良好。但是在 IE8 或 IE9-Compatibility View 中，代码确实被完全加载，并且它的加载是这样的

```
<div id="treeviewdiv">
    <a class="treenode selected" onclick="return false;" href="#">
        <input value=12 type=hidden>Name
    </a>
    <input id=pgID type=hidden> 
</div> 
```

我该如何解决？

```
$('#treeviewdiv div').load('@Url.Action( "GroupList" , "Product" )', function ()
{
    $('#treeviewdiv .treenode').click(function ()
    {
        $('#treeviewdiv .treenode').removeClass('selected');
        $(this).addClass('selected');
        $('#pgID').val($(this).children(':hidden').val());
        LoadProduct();
    });
}); 
```

在 IE8 或 IE9 兼容性视图中**$(this).children(':hidden').val()**未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:42:49.853

你得到的是旧版本的局部视图吗？

IE 缓存 GET 请求。解决此问题的一种方法是添加当前刻度的额外查询字符串参数或随机数，以使 url 唯一。

或者，您可以从 using the `$.get`method 切换到 using`$.ajax`和 setting `cache:false`，它做同样的事情

**例子**

```
var url = '@Url.Action( "GroupList" , "Product" )';
var queryString = '?timespan=' + new Date().getTime();
$.get(url + queryString , 
    function (data) { $('#treeviewdiv div').replaceWith(data); 
}); 
```

# multithreading - Ruby 1.9.3 多核？

> ID：11574905
> 
> 赞同：4
> 
> 时间：2012-07-20T07:36:31.777
> 
> 标签：multithreading, multicore, ruby-1.9.3

昨天看了一点关于 ruby​​ 中的线程（比如[这篇文章](http://www.engineyard.com/blog/2011/ruby-concurrency-and-you/)），我大致的理解是，（除了 JRuby 之类的少数实现），有所谓的全局解释器锁，因此无法运行一次在多个 CPU 上运行 ruby​​ 代码。我做了一个小测试（我有 AMD Turion II Dual-Core Mobile M500 处理器，运行 ubuntu 11.04，+rvm），看看这个在行动中，代码如下：

```
threads = []
CPU = 2

CPU.times do
  threads << Thread.new {
    x=0
    time=Time.new
    while 1 do
      if Time.new - time >= 30 then
        break
      else
        x=1.00/24000000000.001
      end
    end
  }
  end
threads.each { |t| t.join }
puts "done" 
```

并截取了系统监视器的[截图](https://picasaweb.google.com/baloghzsof/Threading)。

对我来说，REE 和 1.9.2 似乎一次使用一个内核，但 1.9.3 似乎同时使用了两者。

**这真的有可能（即使有更多的核心？），还是我只是遗漏了一些东西，而测试是错误的？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:40:53.457

> 有所谓的全局解释器锁，正因为如此，一个人不能同时在多个 CPU 上运行 ruby​​ 代码

这只是部分正确。扩展代码（用 C 编写）通常不支持并行执行（不是线程安全的）。因此对于扩展调用，ruby 解释器使用 GIL。但是你的代码没有调用任何扩展（可能只是 Time.new 需要锁，我不确定）。因此 ruby​​ 在许多情况下（以及您的代码示例）*可以利用多个 CPU*。

# magento - magento - 产品模型和 product_collection 项目在平面目录模式下具有不同的属性

> ID：11574911
> 
> 赞同：0
> 
> 时间：2012-07-20T07:36:50.407
> 
> 标签：magento, collections, properties

我只知道如果我有一个 product_collection（例如目录页面中生成的集合）

//事件目录_product_collecion_after_load $productCollection = $observer->getEvent()->getCollection();

如果我从这个集合中取出一个项目并将它与相对模型进行比较 $_product = Mage::getModel('catalog/product')->load($item->getEntityId());

同一实体的这 2 个实例具有不同的属性！

我在平面目录模式下工作。为什么收藏品与产品型号不一样？我想知道这是否是正确的行为，以及是否如何在两个对象中具有相同的属性！

抱歉，但是 magento 很黑 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:53:43.120

因为`Mage::getModel('catalog/product')->load($item->getEntityId());`加载产品的所有属性，而集合仅加载与情况不同的指定属性。`app/code/core/Mage/Catalog/etc/config.xml`您可能会在类似的地方找到 (CTRL+F)，`attributes`然后您将看到产品集合的所有默认加载属性的列表。您还可以在模块中或直接在目录 config.xml 中更改它们。`app/code/core/Mage/Catalog/etc/config.xml`但是除了调试之外，改变一些东西并不是最好的主意

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:38:39.107

对于使用 flat_mode 的 catalog_product_collection 更复杂，将属性添加到项目的集合中。 **产品项目中的属性是catalog_product_flat 表和产品实体的EAV 属性之间的连接。**

因此，在产品模型中：

*   **集合**我们在 catalog_product_flat 表和 EAV 属性之间加入了属性
*   **getModel('catalog/product')**我们拥有所有 EAV 属性

在这些属性之上，我们肯定会有其他属性，我认为在其他点添加。

现在，catalog_product_flat 中有哪些属性？简单的是您在 magento 管理属性中检查为“用于产品列表”的属性！:)

但在某些属性中，您无法更改此选项，具体取决于您选择的类型。属性类型图像没有“用于产品列表”标志，因此如果您想要产品列表中的新图像，您必须修改 catalog_eav_attribute。

好吧，我花了 2 天时间才知道这一点，我希望它对其他不幸的 magento 开发人员有用。:)

**Magento 1.5 版**

# multithreading - C# .Net MVC 线程中的共享变量

> ID：11574916
> 
> 赞同：1
> 
> 时间：2012-07-20T07:37:26.493
> 
> 标签：multithreading, asp.net-mvc-3, c#-4.0, delegates, shared-memory

我正在.Net MVC 应用程序中将视频上传到服务器。因为这需要一些时间，所以我在后台线程中做。另一方面，我正在跟踪上传进度并将其显示给用户。

这是我的代码

```
public class MyController : Controller
{
    long chunkSize = 256 * 1024;
    private static string _progress = ""; //if I make nonstatic it fails 

    //..........
    //Some codes here
    //..........

    //Upload file Request
    public ActionResult VideoUploader()
    {
        var client = (VimeoClient)Session["client"];
        Ticket t = client.vimeo_videos_upload_getTicket();

        string path = @"E:\d2.MOV"; //Hardcoded value for testing purposes

        new Thread(() => Transfer(client, t, path)).Start(); //Push file to server in background

        return PartialView("_progress", "Preparing to upload...");
    }

    //Worker Thread
    private void Transfer(VimeoClient client, Ticket t, string path)
    {
        FileInfo UploadFile = new FileInfo(path);

        int chunks = (int)Math.Floor(Convert.ToDouble(UploadFile.Length / chunkSize)); 

        for (int i = 0; i <= chunks; i++)
        {
            string output = client.PostVideo(t, i, path,(int) chunkSize);

            var v = client.vimeo_videos_upload_verifyChunks(t);

            double percentage = (Convert.ToDouble(i + 1) / (chunks + 1)) * 100;

            _progress = percentage.ToString() + "%"; // value sharing between two actions

        }

        string name = client.vimeo_videos_upload_complete(path, t);
        client.vimeo_videos_embed_setPreset(client.Token, "200772", name);
    }

    //This method is calling from front end using jQuery to display progress
    public ActionResult Progress()
    {
            //returning updated shared "_progress" varibal
        return Json(_progress, JsonRequestBehavior.AllowGet); 
    }
} 
```

我的问题是当我制作“_progress”非静态变量（`private static _progress`）时它不起作用。值始终为空。

我想做的是`_progress`在主线程和新线程之间共享变量。但是当它是非静态的时它会失败。

请帮我纠正。如果您有更好的选择，请分享

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:42:01.627

您应该将某种“操作 ID”作为原始响应的一部分返回给客户端。然后，该`Progress`方法应*将此*操作 ID 作为参数。然后，上传服务应该根据该操作 ID 存储其进度（例如，在数据库中，以允许您水平扩展）。

基本上，您应该想象涉及多个转移的情况 - 您需要某种方式来获得*正确*转移的进度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:54:35.473

的实例`MyController`是根据请求创建的。

旋转工作线程后，您将页面返回给客户端并且该实例消失了。

您可以将`this`（即控制器实例）传递给这样的`Transfer`方法

`new Thread(() => Transfer(this, client, t, path)).Start();`

然后`Transfer`像这样访问方法中的 _progress 变量

```
private void Transfer(MyController controller,
                                       VimeoClient client, Ticket t, string path)
{
    controller._progress 
```

该页面已返回，因此您只能访问实例 _progress 字段，但是如何更新客户端？

你可以

*   在视图中返回动画 gif 并使用 javascript 向服务器发出定期请求或
*   使用[SignalR](http://signalr.net/)之类的库将进度更新“推送”到客户端

# codeigniter - Codeigniter 中加载器类的范围

> ID：11574917
> 
> 赞同：1
> 
> 时间：2012-07-20T07:37:35.080
> 
> 标签：codeigniter, inheritance

我对加载器类的范围感到困惑。我的意思是我们可以使用 $this->load->library('library_name') 来加载库。但是当涉及到多级继承时，它并没有按预期工作。

例如。我的项目中有多层继承。

扩展“CI_Controller”类的“Mysite”控制器。扩展“Mysite”类/控制器的“父”控制器。扩展“父”控制器的“子”控制器。

在 Child 类中，如果我使用 $this->load->library('library_name')，它不起作用，并抛出未定义变量的错误。

谁能告诉为什么这种行为？也可能解决此问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:12:13.983

你在调用`parent::_construct()`子类的构造函数吗？您需要调用它以将 CI“实例”添加到类范围。

# javascript - 在输入字段中将 html 标签显示为 html

> ID：11574920
> 
> 赞同：0
> 
> 时间：2012-07-20T07:38:00.680
> 
> 标签：javascript, html, css, orchardcms

有没有可能做这样的事情？或者我如何模拟输入字段，可能输入普通文本并将html标签显示为html？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:45:46.637

您可以使用`contenteditable`属性：

[http://jsfiddle.net/AnWej/](http://jsfiddle.net/AnWej/)

```
<div contenteditable></div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:45:07.053

如果可以使用此技术，则可以使用 HTML5 属性*contenteditable 。*
示例：http : [//jsfiddle.net/hZWWd/](http://jsfiddle.net/hZWWd/)
我确信使用一些 javascript，您可以添加一些按钮以加粗或例如（通过添加一些标签），并且您有自己的 Richtextbox。

希望我没有误解你的问题。

# java - 如何在按下按钮之前停止代码运行（打开计时器）

> ID：11574921
> 
> 赞同：0
> 
> 时间：2012-07-20T07:38:04.293
> 
> 标签：java, android, button, timer

有没有一种方法可以做到这一点而无需创建新的计时器和任务？我的代码基本上每 10 秒扫描一次 wifi 信号。为了确保扫描返回新结果，我使用了另一个支持类。有人可以验证这也没有任何明显的错误吗？

```
//Inside Button to start scanning

    final int DELAY = 10000;
        final Handler handler = new Handler();
        chkScan.setOnClickListener(new View.OnClickListener() {
        final Handler handler = new Handler();
        ReceiverWifi = new WifiReceiver();
        WIFI_Manager = new wifiScanner();
        registerReceiver(receiverWifi, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
        final Timer timer = new Timer();
        final TimerTask task = new TimerTask() {
         public void run() {
        handler.post(new Runnable() {
         public void run() {

       mainWifi.startScan();
     if ((WIFI_Manager.resultsAvailable())) {   
          processResults();                                            
            }
         // to ensure results come from latest scan
         // say there are no new results as of now   
            WIFI_Manager.waitForNextScan();

     }

            }
           );
            timer.schedule(task, 0, DELAY);

                }

           }
           });
        }

    public void processResults() {
    results = mainWifi.getScanResults();
    WIFI_Manager.pause() //stop getting wifi results
     //continue to process here
    //
    //

     //I wish to put a button here, but and wait for user input before continuing
    //but scans continue..
    chkLabel.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
    }
     //more code
    // ...

    WIFI_Manager.resume();       
       }     

class WifiReceiver extends BroadcastReceiver {

                    @Override
                    public void onReceive(Context c, Intent intent) {

                        WIFI_Manager.getNewResults();

                    }

                }

                public class wifiScanner {

                    public wifiScanner() {

                        Pause = false;
                        new_results = false;

                    }

                    public boolean resultsAvailable() {

                        return new_results;
                    }

                    public void waitForNextScan() {

                        new_results = false;
                    }

                    public void getNewResults() {

                        new_results = true;

                    }

                    public boolean onPause() {

                        return Pause;

                    }

                    public void pause() {
                        unregisterReceiver(receiverWifi);
                        Pause = true;
                    }

                    public void resume() {
                        registerReceiver(receiverWifi, new IntentFilter(
                                WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
                        Pause = false;
                    }

                    // pause: false- access to scan results are allowed
                    // pause: true- cannot access scan results
                    private boolean Pause;

                    // new_results: false- no new WIFI_resuls
                    // new_results: true - there are new results to be processed
                    private boolean new_results;

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:21:12.297

不使用计时器，而是创建一个名为 stop 的布尔字段，并在迭代结束时使用循环`while(!stop)`。`Thread.sleep(1000)`您的 processResults() 方法将`stop = true;`在您的重新启动按钮的侦听器中执行`stop=false;`

但我认为它比使用计时器更脏；）

# c# - 使用 Nuclex Framework (XNA) 渲染 3d 文本时出错

> ID：11574925
> 
> 赞同：2
> 
> 时间：2012-07-20T07:38:06.227
> 
> 标签：c#, text, graphics, 3d, xna

当我尝试通过在 Load 方法中写入这一行来使用 Nuclex Framework 加载矢量字体时

```
this.vFont = this.Content.Load<VectorFont>("myFont"); 
```

其中 vFont 是由定义的私有矢量字体变量

```
private VectorFont vFont; 
```

我收到此错误“加载“myFont”时出错。文件包含 Microsoft.Xna.Framework.Graphics.SpriteFont 但试图加载为 Nuclex.Fonts.VectorFont。“

我知道“myFont”是 Spritefont，但是如何定义要加载的矢量字体？！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:51:32.453

字体有错误的导入器/处理器集。

选择您的字体，转到属性窗口并将其更改为来自 nuclex 框架的“VectorFont”导入器/处理器。

确保将 nuclex 内容导入器/处理器项目参考添加到您的内容项目中。

# ios - 从另一个视图更新 UITableViewCell

> ID：11574928
> 
> 赞同：0
> 
> 时间：2012-07-20T07:38:16.803
> 
> 标签：ios, xcode, tableview, cell

我有一个充满自定义单元格的表格视图。在每个单元格中都有两个按钮，如果我按下第一个按钮，我会导航到另一个视图，我们称之为 secondview。

在我的第二个视图中，有一个按钮与上一个表格视图中的单元格上的第二个按钮具有相同的功能。当我按下第二个视图上的按钮时，我将其隐藏，但我也想隐藏单元格上的第二个按钮。

但是注意！我只想隐藏我按下第一个按钮的这个特定单元格上的第二个按钮，而不是全部！

我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:44:05.557

您应该将第一个视图作为委托传递给第二个视图，当在第二个视图中进行更改时，您将调用第一个视图`hideSecondButton`或您所做的任何 mwthod。无论如何，您的问题的关键字是`delegate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:59:46.710

实现这一点的最简单方法是使用通知。在模型更改时在您的数据模型上发布通知。

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"fooModelChanged" object:self]; 
```

在您想要侦听模型`fooModelChanged`通知的视图和视图控制器上添加此内容并实现侦听器方法。

```
- (void)viewDidLoad {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(fooModelHasChanged:) name:@"fooModelChanged" object:fooModel];
}

- (void)fooModelHasChanged:(NSNotification*)notification {
   // Add buttons, remove buttons or simply...
   [self.tableView reloadData];
} 
```

可以通过使用委托以更好的方法解决该问题。但解释和实施需要更长的时间。我建议你阅读更多的 Objective-C 代码来理解监听器的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:31:09.180

@Cernal，“object:fooModel”是指“fooModel.xcdatamodeld”还是我错过了什么？

# java - 如何在 PrimeFaces dataTables 中正确排序以特殊字符（如 İ,ı,Ç,ç,Ğ,ğ,ş,ö,ü...）开头的字符串？

> ID：11574931
> 
> 赞同：2
> 
> 时间：2012-07-20T07:38:33.123
> 
> 标签：java, hibernate

我们正在使用 PrimeFaces 2.2（在 Java EE 5 项目中使用 JSF 2.x），并且在 PrimeFaces 数据表中正确排序以特殊字符（例如 İstanbul、Çankaya、Ödemiş...）开头的字符串时遇到了问题，尽管我们正在使用UTF-8。

问题在于，以特殊字符开头的单词被放在以 Z 开头的单词的末尾，而例如，以“İ”开头的城市名称（即 İstanbul）通常应该出现在 Ibiza 和 Jacksonville 之间，而不是结束出现在苏黎世之后。此规则基于土耳其语 (tr_TR) 语言环境。

然而，在 selectOneMenus 中，排序正确执行（并且如上所愿）

任何解决方法的建议将不胜感激。

**_ 编辑 _**

此问题与基于休眠 (hsql) 的排序有关，而不是基于 sql 的排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:48:38.123

除非您知道单词的语言排序顺序，否则无法正确排序。如果单词是混合语言，则没有正确的排序顺序，但是在这种情况下，人们通常会为大多数用户/观众使用语言排序顺序。

完全相同的字符具有完全相同的声音和完全相同的 Unicode 代码点，将根据语言甚至国家/地区在不同的地方进行排序。

这是Unicode排序算法的定义[http://unicode.org/reports/tr10/](http://unicode.org/reports/tr10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:45:56.647

区域感知排序是一项棘手的业务，因此最好使用专用库来处理。我建议使用[ICU](http://site.icu-project.org/)。我无法提供有关如何将其与 hsql 工作流程集成的任何详细信息，因此如果可以选择，我可能会尝试单独对事物进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T07:56:47.560

这应该会有所帮助，这里所有内容都在排序之前转换为基本的大写/小写字符

```
select k from test order by convert(k using utf8_bin) 
```

# php - 无树枝的矽胶形式

> ID：11574933
> 
> 赞同：2
> 
> 时间：2012-07-20T07:38:40.440
> 
> 标签：php, symfony1, smarty, silex

我正在将 silex 与带有许多 smarty 模板的遗留应用程序一起使用，并且还想使用 Form Provider，但文档中只有一个示例可以将其与 Twig 一起使用。

有没有人有一个小例子，如何将表单呈现为一个变量，然后可以在一个聪明的模板中显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:25:22.633

我的理解是，您不能仅通过 symfony 表单类来呈现表单。这些类没有呈现表单的功能。您需要一些进行渲染的模板。这些模板可以是 PHP 或 Twig。这是一个如何将表单作为 HTML 获取的示例，然后您可以将其传递给 smarty 模板：

```
$html .= $silex['twig']->render('template.twig', array(
        'form'         => $form->createView
    ));

$smarty->assign('form_html',$html); 
```

# java - 有人可以解释一下这个正则表达式吗？^(?=.*prodCode=).*$

> ID：11574936
> 
> 赞同：0
> 
> 时间：2012-07-20T07:38:48.617
> 
> 标签：java, regex

有人可以解释一下这个正则表达式吗？

```
^(?=.*prodCode=).*$ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T07:43:15.793

从[这个不错的正则表达式解释器](http://rick.measham.id.au/paste/explain.pl)：

```
NODE                     EXPLANATION
--------------------------------------------------------------------------------
  ^                      the beginning of the string
--------------------------------------------------------------------------------
  (?=                    look ahead to see if there is:
--------------------------------------------------------------------------------
  .                      any character except \n
--------------------------------------------------------------------------------
  prodCode=              'prodCode='
--------------------------------------------------------------------------------
  )                      end of look-ahead
--------------------------------------------------------------------------------
  .                      any character except \n
--------------------------------------------------------------------------------
  $                      before an optional \n, and the end of the string 
```

**编辑**

由于问题文本中的正则表达式已更改，因此解释中的倒数第二行将更改为：

```
--------------------------------------------------------------------------------
  .*                     any character except \n (0 or more times (matching
                         the most amount possible))
-------------------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:44:00.970

从行开始位置搜索之前的任何符号`prodCode=`。`(?=)`意味着只是检查位置不匹配。因此，在您的情况下，如果该行中存在字符串，`any symbol + prodCode=`那么我们匹配整行，如果不存在则返回 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T07:44:22.500

如果字符串中有`prodCode=`任何位置并匹配完整的字符串，则匹配。

另一种编写方式（粗略地说，滥用方法返回值作为正则表达式匹配）是

```
if (s.indexOf("prodCode=") != -1)
    return s; 
```

# java - 在我的 JDK 7 更新 2 中找不到 servlet 包

> ID：11574939
> 
> 赞同：0
> 
> 时间：2012-07-20T07:38:57.557
> 
> 标签：java, jsp

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*; 
```

我有一个包含上述导入的源代码，我遇到了很多错误消息，因为我安装的 JDK 7 更新 2 中不包含 servlet 包。

我真的很困惑，不知道为什么，非常感谢您提供任何解决我的小问题的指南。

**供以后参考：在tomcat\lib安装文件夹中有一个叫servlet-api.jar的文件，你只需要在System->Advance...->的CLASSPATH中添加它的路径（包括文件名+扩展名）环境变量列表框。然后用 javac 编译你的 java 文件。它确实有效**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:41:40.113

servlet api没有自带标准JDK，需要从外部下载并添加到classpath中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T07:46:52.220

Servlet api 不是标准 JDK 的一部分。

# mysql - 如何归档最少使用的数据？

> ID：11574958
> 
> 赞同：1
> 
> 时间：2012-07-20T07:40:02.623
> 
> 标签：mysql, hibernate, persistence

环境：JSF2、Hibernate 持久化、MySQL

由于一个包含图像数据的表，我有一个正在快速填充的数据库。该数据永远不会被搜索，而只能通过 id 直接访问。问题是它保留在数据库中，因此扩大了数据库的备份和运行时内存使用量。

我认为可能有多种解决方案：

*   告诉 MySQL 该表不应该被缓存和/或保存在内存中。
*   根本不要对那个表使用 MySQL。只是让持久性知道这应该直接存储在磁盘上。
*   ？？？

但我也没有找到办法。请指教。

谢谢，米洛范德泽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:57:30.987

存储类型取决于 MySQL 中的存储引擎。只有具有 MEMORY 存储引擎的表存储在 RAM 中，其他表存储在磁盘上。

在选择查询中，您可以`SELECT SQL_NO_CACHE`用来告诉 MySQL 不要在 MySQL 查询缓存中缓存查询数据。

您可以通过在表上定义分区来对表进行分区。这将使插入和选择更快。

您还可以创建像 table_name_2012_07_20 这样的日间表和具有旧日期的存档表，并以压缩格式存储数据，您可以使用存档存储引擎，或者如果您正在使用 MyIsam 存储引擎，则执行 myisamchk 或 myisampack 以节省硬盘驱动器上的磁盘空间.

# android - Android NDK 简单

> ID：11574959
> 
> 赞同：0
> 
> 时间：2012-07-20T07:40:05.987
> 
> 标签：android, c, android-ndk

我是 Android NDK 的新手，所以我希望我的问题不是一个愚蠢的问题。

我遵循了本教程，在此链接上找到：

[http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/](http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/)

一切都很顺利，我遵循了每一个指示。但是，当我运行应用程序时，它在我的 logcat 中给了我这些错误：

```
07-20 07:35:25.253: D/dalvikvm(390): Trying to load lib /data/data/com.example.testndk/lib/libndkfoo.so 0x40515310
07-20 07:35:25.253: D/dalvikvm(390): Added shared lib /data/data/com.example.testndk/lib/libndkfoo.so 0x40515310
07-20 07:35:25.253: D/dalvikvm(390): No JNI_OnLoad found in /data/data/com.example.testndk/lib/libndkfoo.so 0x40515310, skipping init
07-20 07:35:25.503: W/dalvikvm(390): No implementation found for native Lcom/example/testndk/NdkFooActivity;.invokeNativeFunction ()Ljava/lang/String;
07-20 07:35:25.513: D/AndroidRuntime(390): Shutting down VM
07-20 07:35:25.513: W/dalvikvm(390): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-20 07:35:25.534: E/AndroidRuntime(390): FATAL EXCEPTION: main
07-20 07:35:25.534: E/AndroidRuntime(390): java.lang.UnsatisfiedLinkError: invokeNativeFunction
07-20 07:35:25.534: E/AndroidRuntime(390):  at com.example.testndk.NdkFooActivity.invokeNativeFunction(Native Method)
07-20 07:35:25.534: E/AndroidRuntime(390):  at com.example.testndk.NdkFooActivity.onCreate(NdkFooActivity.java:23)
07-20 07:35:25.534: E/AndroidRuntime(390):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-20 07:35:25.534: E/AndroidRuntime(390):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-20 07:35:25.534: E/AndroidRuntime(390):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-20 07:35:25.534: E/AndroidRuntime(390):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-20 07:35:25.534: E/AndroidRuntime(390):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-20 07:35:25.534: E/AndroidRuntime(390):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-20 07:35:25.534: E/AndroidRuntime(390):  at android.os.Looper.loop(Looper.java:123)
07-20 07:35:25.534: E/AndroidRuntime(390):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-20 07:35:25.534: E/AndroidRuntime(390):  at java.lang.reflect.Method.invokeNative(Native Method)
07-20 07:35:25.534: E/AndroidRuntime(390):  at java.lang.reflect.Method.invoke(Method.java:507)
07-20 07:35:25.534: E/AndroidRuntime(390):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-20 07:35:25.534: E/AndroidRuntime(390):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-20 07:35:25.534: E/AndroidRuntime(390):  at dalvik.system.NativeStart.main(Native Method) 
```

有没有人有一点线索可能是什么问题？我试图弄清楚，甚至从头开始学习教程，但是问题仍然存在。提前致谢。

我的安卓java代码：

```
package com.example.testndk;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;

public class NdkFooActivity extends Activity {

      // load the library - name matches jni/Android.mk 
      static {
        System.loadLibrary("ndkfoo");
      }

      // declare the native code function - must match ndkfoo.c
      private native String invokeNativeFunction();

      @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            // this is where we call the native code
            String hello = invokeNativeFunction();

            new AlertDialog.Builder(this).setMessage(hello).show();
        }

} 
```

C源代码：

```
#include <string.h>
#include <jni.h>

jstring Java_com_mindtherobot_samples_ndkfoo_NdkFooActivity_invokeNativeFunction(JNIEnv* env, jobject javaThis) {
  return (*env)->NewStringUTF(env, "Hello from native code!");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:44:24.020

你有`java.lang.UnsatisfiedLinkError`因为，可能是 c 函数名与你的 java 类的完全限定名不匹配。签入`ndkfoo.c`以匹配目标 java 类的包和类名：

`jstring Java_com_mindtherobot_samples_ndkfoo_NdkFooActivity_invokeNativeFunction(JNIEnv* env, jobject javaThis)`

这应该是：

`jstring Java_com_example_testndk_NdkFooActivity_invokeNativeFunction(JNIEnv* env, jobject javaThis)`

或将您的 java 项目中的包名称更改为：`package com.mindtherobot.samples.ndkfoo;`

然后您需要在测试之前单击 [Project]->[Clean]，以便 eclipse 知道它必须重新编译。

# c# - 母版页 - 页面中只能添加一个 ScriptManager 实例

> ID：11574964
> 
> 赞同：4
> 
> 时间：2012-07-20T07:40:38.033
> 
> 标签：c#, asp.net

我在我的项目中使用 ajax 工具包。我的项目有一个母版页，我在我的网页中继承了这个母版页。我在每个页面上都使用脚本管理器，但现在要求在母版页上也显示一个实时时钟。我使用 Timer 编写了代码在母版页上显示实时时钟，但我收到错误“只能将 ScriptManager 的一个实例添加到页面。”。

如何解决此问题，因为我不想从网页中删除脚本管理器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T07:48:22.457

`ScriptManager`每页只能使用一个

但是，如果您需要使用`ScriptManager`示例提供的功能来注册自定义脚本（这在您创建服务器控件或处理内容页面时非常有用），有一种方法。

改用`<asp:ScriptManagerProxy runat="server" />`服务器控件

来自 MSDN：

> 当 ScriptManager 控件已在父元素中定义时，允许嵌套组件（例如内容页面和用户控件）向页面添加脚本和服务引用。

[来源](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanagerproxy.aspx)

欲了解更多信息：

*   [何时需要 ScriptManager/ScriptManagerProxy？](https://stackoverflow.com/q/1312397/1268570)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:43:04.403

好吧，消息很清楚，在母版页中定义脚本管理器并将其从使用该母版页的所有页面中删除。

# jquery - jQuery Ligthbox 立即打开和关闭

> ID：11574965
> 
> 赞同：2
> 
> 时间：2012-07-20T07:40:38.523
> 
> 标签：jquery, lightbox

我有一个功能可以从数据库中删除一些商业，我希望确认出现在一个灯箱中。它确实在灯箱中打开，但几乎立即关闭 =/

jQuery：

```
 $('a#MontrerSuppression').click(function(){

    $('#BackgroundSuppression,#Suppression').fadeIn('fast');

});

$('a#CacherSuppression').click(function(){

    $('#BackgroundSuppression,#Suppression').fadeOut('fast');

}); 
```

php/html:

```
<a href='myaccount.php?IDCommerce=<?php echo $Commerce['IDCommerce'];?>' id="MontrerSuppression">Supprimer Commerce</a> 
```

CSS：

背景抑制{宽度：100%; 高度：100%；位置：绝对；顶部：0；左：0；背景颜色：#999；不透明度：0.5；z-index：1；显示：无；}

抑制{位置：绝对；宽度：375px；背景：#fff; 边框：1px 实心#000；填充：20px 20px 10px 10px；最高：50%；边距顶部：-130px；左：50%；左边距：-250px；z指数：2；显示：无；文本对齐：中心；}

表格：

```
 <div id="Suppression">
            <a href="#" id="CacherSuppression"><strong>×</strong></a>

            <?php supprimerCommerce(); ?>

            <form method="POST" action="myaccount.php">
                <p>Êtes vous sur de vouloir supprimer votre commerce?</br>Une fois supprimer les informations seront perdu à jamais.</p>
                <input type="submit" name="Confirmer" value="Oui"/>
                <input type="submit" name="Annuler" value="Annuler"/>
            </form>
        </div> 
```

认为问题出在我将 html 链接“链接”到 jQuery 函数的方式上，但不知道什么是正确的方法。

真的很感激如果有人可以给我一些帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:04:53.463

试试这个[小提琴](http://jsfiddle.net/dMpNE/)，让我知道它是否适合你

**编辑**

好的，我明白了。事实上，onclick 事件被 href 链接覆盖。试试这个小提琴版本：http: [//jsfiddle.net/dMpNE/1/](http://jsfiddle.net/dMpNE/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:48:08.980

我希望`a#MontrerSuppression`包含一个 href 属性。因此，要将其从单击中删除，请尝试以下操作。

```
$('a#MontrerSuppression').click(function(event){
    event.preventDefault();
    $('#BackgroundSuppression,#Suppression').fadeIn('fast');
}); 
```

# wpf - 在不使用 RichTextBox 控件的情况下突出显示文本框中的文本

> ID：11574969
> 
> 赞同：1
> 
> 时间：2012-07-20T07:40:53.967
> 
> 标签：wpf, textbox, richtextbox, highlighting

我有一个 WPF 文本框（不是 RichTextBox），在这个文本框中，我想突出显示搜索结果（如在 Web 浏览器中）

例如，如果我搜索“abc”，则应突出显示所有出现的“abc”（例如，使用一些红色背景或字体）

我想知道这是否可能不使用 RichTextBox 控件，或者不是真的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:52:12.237

这是可能的，但它更容易使用，`RichTextBox`因此您可以考虑改用它，而且您不能更改字体大小，只能更改颜色（背景和/或前景）和效果。

首先，您必须从中派生自己的类，`TextBox`因为您将覆盖其渲染方法。现在重写该`OnRender()`方法，在这里您将使用该`DrawingContext.DrawText()`方法来绘制文本（将所有内容放在一个`FormattedText`对象中，主要您必须调整其属性以使其类似于标准`TextBox`）。

现在你所拥有的是一个简单的`TextBox`地方**，**你可以在其中绘制你的文本。从这个起点，您可以选择：

*   完全覆盖`TextBox`文字绘图：将`TextBox.Foreground`属性设置为`Brushes.Transparent`。用户将与“真实”文本进行交互，但他会看到您绘制的文本。请注意，要使其正常工作，您必须准确模仿原始`TextBox`.

*   添加您需要保留基本`TextBox`文本绘图的突出显示功能：计算要突出显示的文本的位置，然后绘制适当的背景。

**参考**
这个（简化的！）算法来自[CodeBox2](http://www.codeproject.com/Articles/35413/CodeBox-2-An-Extended-and-Improved-Version-of-the)，它最初是为了扩展 a而设计的，`TextBox`具有一些简单的类似编辑器的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:49:21.487

对此没有内置功能。此外，TextBox 仅支持整个文本的单一字体样式。

如果文本应该是只读的，您可以使用流或固定文档并在运行元素中格式化文本。

# vb.net - 在 ComponentOne 图表中排序图例项

> ID：11574980
> 
> 赞同：0
> 
> 时间：2012-07-20T07:42:12.890
> 
> 标签：vb.net, silverlight, componentone

我在重新排序图表图例中的项目时遇到了很多问题。问题是我喜欢图表中的顺序，但我认为图例中的顺序是错误的，我想颠倒这个顺序。

我尝试的是：

CType(Me.Content, C1Chart).LegendItems = CType(Me.Content, C1Chart).LegendItems.Reverse()

但看起来 LegendItems 属性是只读的：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:29:07.240

最后我找到了这个问题的解决方案。花了几个小时试图找到一个好的解决方案来修复我认为这是一个错误....最后我找到了一个简单的方法。

在图表图例中，您可以包含此属性：`FlowDirection="RightToLeft"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T06:48:17.023

我通过仅反转一个成功地反转了传说`ChartGroup`：

```
C1Chart1.ChartGroups.ChartGroupsCollection(0).LegendReversed = False
C1Chart1.ChartGroups.ChartGroupsCollection(1).LegendReversed = True 
```

# html - 自动在网页上显示电子邮件内容？

> ID：11574983
> 
> 赞同：0
> 
> 时间：2012-07-20T07:42:32.650
> 
> 标签：html, email

对于某个应用程序，我需要在网站上显示电子邮件的附件..（这是一个私人网站，因此不向公众开放）..附件是一个 html 文件。该文件每 30 分钟通过电子邮件发送到我指定的地址。我需要在自动刷新网页上显示这些内容。完成这项工作的最简单方法是什么？我正在考虑编写一个cronscript，每30分钟检查一次邮件服务器，下载附件并将其放置在某个位置..但也许有人有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:54:31.403

是的，将这项任务分成几部分看起来是合理的。制作一个将传入消息下载到有序存储的 cronscript（如果您对备份持谨慎态度，文件系统就足够了）。然后制作一个网页，展示该存储的一些视图。

另一种更直接的解决方案是使用一个网页脚本来轮询电子邮件服务器、下载最新文件并显示它。如果它工作得太慢，您可以添加一些适当超时的磁盘缓存。如果您要显示一条消息，则适用于这种情况。

# android - onTouch 提供奇怪的接触点 Android

> ID：11574985
> 
> 赞同：7
> 
> 时间：2012-07-20T07:42:44.873
> 
> 标签：android, android-relativelayout, android-imageview, ontouchlistener

这是我正在做的非常简单的事情，我以前做过，但现在它没有像我预期的那样运行。无论如何，让我简要解释一下我正在尝试做什么以及我得到了什么::

**场景：：** 我有一个放置`RelativeLayout`了一个`ImageView`，现在我设置`touchlistener`如下：`imageview.setOnTouchListener(this);`

它要求我覆盖`onTouch(View v,MotionEvent event)`我所做的函数......并且在`Action_Move`我得到**x**和**y**并将它们添加到左边距和上边距，这样我正在移动我的图像。

**奇怪的问题：** 我`ImageView`正在移动，但震动非常明显，就像我朝正确的方向移动一样，`ImageView`会向右侧移动，但在途中它又回到左侧，因此看起来图像不稳定，它在振动。 . 类似的东西.. 我给出了我得到的x**和**y **......**`log`希望这能给你这个想法。

```
ACTION_DOWN[#0(pid 0)=160,233]  Going right..
ACTION_MOVE[#0(pid 0)=160,233]  ////
ACTION_MOVE[#0(pid 0)=160,233]  //
ACTION_MOVE[#0(pid 0)=174,231]  //
ACTION_MOVE[#0(pid 0)=176,233]  //
ACTION_MOVE[#0(pid 0)=196,232]  //
ACTION_MOVE[#0(pid 0)=152,232]  // suddenly i got 152 as location for x... image comes     back
ACTION_MOVE[#0(pid 0)=167,232]  // again started to go right
ACTION_MOVE[#0(pid 0)=180,233]  // going right
ACTION_MOVE[#0(pid 0)=173,233]  // again comes a little back
ACTION_MOVE[#0(pid 0)=187,232]  // same thing goes till end..
ACTION_MOVE[#0(pid 0)=159,232]
ACTION_MOVE[#0(pid 0)=174,231]
ACTION_MOVE[#0(pid 0)=177,233]
ACTION_MOVE[#0(pid 0)=189,231]
ACTION_MOVE[#0(pid 0)=155,232]
ACTION_MOVE[#0(pid 0)=171,231]
ACTION_MOVE[#0(pid 0)=183,230]
ACTION_MOVE[#0(pid 0)=161,234]
ACTION_MOVE[#0(pid 0)=171,233]
ACTION_MOVE[#0(pid 0)=174,230]
ACTION_MOVE[#0(pid 0)=183,230]
ACTION_MOVE[#0(pid 0)=162,234]
ACTION_MOVE[#0(pid 0)=170,233]
ACTION_MOVE[#0(pid 0)=176,233]
ACTION_MOVE[#0(pid 0)=165,233]
ACTION_MOVE[#0(pid 0)=175,232]
ACTION_MOVE[#0(pid 0)=163,233]
ACTION_MOVE[#0(pid 0)=171,233]
ACTION_MOVE[#0(pid 0)=167,233]
ACTION_MOVE[#0(pid 0)=172,232]
ACTION_MOVE[#0(pid 0)=178,232]
ACTION_MOVE[#0(pid 0)=158,234]
ACTION_MOVE[#0(pid 0)=170,234]
ACTION_MOVE[#0(pid 0)=170,232]
ACTION_MOVE[#0(pid 0)=177,231]
ACTION_MOVE[#0(pid 0)=157,234]
ACTION_MOVE[#0(pid 0)=160,234]
ACTION_MOVE[#0(pid 0)=169,232]
ACTION_MOVE[#0(pid 0)=165,233]
ACTION_MOVE[#0(pid 0)=167,233]
ACTION_MOVE[#0(pid 0)=159,233]
ACTION_UP  [#0(pid 0)=161,233] 
```

相对布局的 XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="#99000000">

    <ImageView
        android:id="@+id/imageview"
        android:layout_width="400dp"
        android:layout_height="400dp"
        android:layout_marginLeft="100dp"
        android:layout_marginTop="100dp"
        android:scaleType="matrix" />
</RelativeLayout> 
```

所以，这是最大的，我可以解释我的问题，如果你需要什么，请告诉我。

**更新：：**`ImageView`在其容器 中移动的代码，即`RelativeLayout`：

```
case MotionEvent.ACTION_MOVE:
            LayoutParams params = (LayoutParams) imageview.getLayoutParams();

            params.leftMargin = params.leftMargin + x;
            params.topMargin = params.topMargin + y;

            imageview.setLayoutParams(params);
            break; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T09:55:55.220

中的 X 和 Y 变量`onTouch`是相对于`onTouchListener`附加视图的 X 和 Y。`ImageView`所以 10, 10 会从你的not of the 的左上角算起`RelativeLayout`。

如果你使用这些值来移动你的`ImageView`，那么你自然会得到不稳定的行为，每个移动动作也会触发一个稍微不同的 OnTouchEvent 导致另一个移动动作——这个递归给你一个“振动”的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T10:14:48.680

当我通过该方法`event.getRawY()`而不是`event.getY()`移动 View 获得 Y 坐标时，摇晃的行为消失了。因此，如果您使用过该`getY()`方法，请尝试更改它。

# javascript - phonegap +jquery 移动 + JSON

> ID：11574989
> 
> 赞同：0
> 
> 时间：2012-07-20T07:43:03.453
> 
> 标签：javascript, jquery, cordova

如果我想将此 json 测试插入我的 phonegap 页面（其中包含 jquery mobile），我会遇到问题：

```
var JSONObject = {  "name" : "Amit",
                 "address"  : "B-123 Bangalow",
                 "age"  : 23, 
                 "phone"   : "011-4565763",
                 "MobileNo"  : 0981100092
             };

             document.write("<h2><font color='blue'>Name</font>::"
                            +JSONObject.name+"</h2>");  
             document.write("<h2><font color='blue'>Address</font>::"
                            +JSONObject.address+"</h2>");  
             document.write("<h2><font color='blue'>Age</font>::"
                            +JSONObject.age+"</h2>");  
             document.write("<h2><font color='blue'>Phone No.</font>::"
                            +JSONObject.phone+"</h2>");  
             document.write("<h2><font color='blue'>Mobile No.</font>::"
                            +JSONObject.MobileNo+"</h2>"); 
```

然后它不起作用..我的问题是，phonegap + jquery mobile实际上可以使用JSON吗？

将来我想要一个以 JSON 格式返回数据的 web 服务，以便我可以在我的 phonegap 应用程序中使用这个 json 数据。我现在正在测试 json 数据是否有效，通过使用硬编码数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T07:47:47.633

页面加载完成后可能会调用此代码。

所以使用 document.write 没有任何意义。

只需使用[html](http://api.jquery.com/html/)函数来填充您要填充的内容（可能是 div）。

请注意，您必须等待 DOM 完全加载。最佳实践是使用 onload 事件处理程序并将脚本元素放在正文的末尾。

```
<div id=idOfTheDivWhereYouWantToWrite></div>
<script>
$(document).ready(function() {
    var JSONObject = {  "name" : "Amit",
             "address"  : "B-123 Bangalow",
             "age"  : 23, 
             "phone"   : "011-4565763",
             "MobileNo"  : 0981100092
    };
    var html= "<h2><font color='blue'>Name</font>::"+JSONObject.name+"</h2>" 
    html += "<h2><font color='blue'>Address</font>::" +JSONObject.address+"</h2>";  
    html += "<h2><font color='blue'>Age</font>::" +JSONObject.age+"</h2>";  
    html += "<h2><font color='blue'>Phone No.</font>::"+JSONObject.phone+"</h2>";  
    html += "<h2><font color='blue'>Mobile No.</font>::"+JSONObject.MobileNo+"</h2>";
    $('#idOfTheDivWhereYouWantToWrite').html(html);
});
</script> 
```

此外，“JSON 对象”的意义不大，因为 JSON 是一种交换格式。这只是一个普通的 javascript 对象。

# c++ - 异常被捕获两次

> ID：11574995
> 
> 赞同：12
> 
> 时间：2012-07-20T07:43:34.060
> 
> 标签：c++, exception, constructor

```
class A{
    public:
        A() { throw string("exception A"); };
};

class B{
    A a;
    public:
        B() try : a() {} catch(string& s) { cout << &s << " " << s << endl; };
};

int main(){    
    try{
        B b;
    }catch(string& s){
        cout << &s << " " << s << endl;
    }
    return 0;
} 
```

输出是：

```
0x32c88 exception A
0x32c88 exception A 
```

既然异常已经在 的构造函数中被捕获`B`，为什么它仍然出现在 main 函数中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-20T07:46:15.200

当 contol 的流程到达构造函数的 function-try-block 的处理程序末尾时，将自动重新抛出捕获的异常。

您不能抑制在派生类构造函数中构造基类或成员期间引发的异常，因为这会导致构造的派生对象的基类或成员构造失败。

这个 GOTW 是相关的：[http ://www.gotw.ca/gotw/066.htm](http://www.gotw.ca/gotw/066.htm)

来自 ISO/IEC 14882:2011 15.3 [except.handle] / 15：

> 如果控制到达构造函数或析构函数的*函数尝试块*的处理程序的末尾，则重新抛出当前处理的异常。[...]

# ubuntu - 如何在 linux 的 QT Creator 中添加 FANN 库

> ID：11574996
> 
> 赞同：-1
> 
> 时间：2012-07-20T07:43:41.267
> 
> 标签：ubuntu, qt-creator, fann

我正在尝试在 qt 环境中使用 fann 库。我制作了一个项目来测试 fann 的一个简单示例，并将“LIBS += -L/usr/local/lib -lfann”添加到“.pro 文件”，但无论何时尝试运行示例我反驳了这个错误：

```
undefined reference to 'sin'      libfann.so
undefined reference to 'exp'      libfann.so
undefined reference to 'log'      libfann.so
undefined reference to 'cos'      libfann.so
undefined reference to 'pow'      libfann.so
undefined reference to 'sqrt'     libfann.so
undefined reference to 'floor'    libfann.so 
```

. . . 似乎数学函数有问题，但是应该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:02:32.307

好的，最终发现了错误。这是[链接库](http://www.network-theory.co.uk/docs/gccintro/gccintro_17.html)的问题。

有几种方法可以解决它：

1.  从 fann 复制所需的 .h 和 .c 文件并将它们添加到您的项目中（例如，如果您运行 xor 示例，您应该将 fann.h 和 fann.c 直接复制并粘贴到您的项目中）

2.  更好的方法：构建静态库“libfann.a”并将其添加到项目中。

    *   构建它，如下：

        *   [http://comments.gmane.org/gmane.comp.lib.qt.general/40928](http://comments.gmane.org/gmane.comp.lib.qt.general/40928)
        *   或者，[官方 git repo的 README.md 文件](https://github.com/libfann/fann)
    *   添加它：

        *   使用 Qmake：如果您的 libfann.so 安装在“usr/local/lib”中，请使用“LIBS += -L/usr/local/lib -lfann”而不是“LIBS += -lfann”
        *   使用 Cmake：添加最后两行
            `# after add_executable(${PROJECT_NAME} "main.cpp") link_directories(/usr/local/lib) # -L flags target_link_libraries(${PROJECT_NAME} fann) # -l flags`