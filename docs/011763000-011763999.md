# StackOverflow 问答 11763000-11763999

# sqlite - 在 clojure 的 sqlite 中启用空间扩展

> ID：11763000
> 
> 赞同：1
> 
> 时间：2012-08-01T15:52:18.107
> 
> 标签：sqlite, clojure, spatialite

我正在尝试使用来自 clojure 的空间数据库进行一些简短的空间查询。我正在使用 xerial sqlite-jdbc 连接器进行连接。

我尝试加载空间扩展名失败，出现“未授权”错误：

```
(sql/with-connection db
  (try
    (sql/with-query-results foo
        ["SELECT load_extension('/usr/local/lib/libspatialite.dylib');"]
      (dorun (map #(println foo))))
    (catch Exception e (print e))))

#<SQLException java.sql.SQLException: [SQLITE_ERROR] SQL error or missing database (not authorized)>#<SQLException java.sql.SQLException: [SQLITE_ERROR] SQL error or missing database (not authorized)> 
```

[本页](http://www.gaia-gis.it/spatialite-2.4.0-4/splite-jdbc.html)描述了 Java 中的一种方法，您可以在其中实例化 SQLiteConfig 对象，设置一些属性，然后在设置数据库连接时传递配置对象。

作为 Clojure 的新手，这让我大吃一惊。任何人都可以提供连接到启用空间的 sqlite 数据库的示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:08:42.530

`db`尝试在地图中包含以下键值。

```
{
  <other key/val>
  :enable_load_extension true
} 
```

# java - 我可以创建任意数量的线程吗？

> ID：11763001
> 
> 赞同：0
> 
> 时间：2012-08-01T15:52:22.157
> 
> 标签：java, multithreading

我正在开发一个 REST Web 服务，它应该从客户端接收文件并处理它们。之后我收到文件我想创建一个新线程来处理文件，所以我没有义务等待处理函数结束。

如果我收到很多文件，我会创建很多线程。这样做有什么限制或危险吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:54:20.333

> 如果我收到很多文件，我会创建很多线程。这样做有什么限制或危险吗？

就在这里。我不确定线程​​数是否有限制，但在某些时候你*会*耗尽内存。每个线程都有堆栈和其他将加起来的本地存储。

如果已达到限制，我将通过不接受新连接来限制您分叉的线程数。然后其他连接将在 TCP 队列中等待，直到先前的请求完成。

更好的机制可能是使用固定`ExecutorService`线程池，而不是为每个请求派生一个新线程：

```
// create a thread pool with 10 workers
ExecutorService threadPool = Executors.newFixedThreadPool(10);
while(!shutdown) {
   // receive a request from your service -- this is tricky
   // process it using the thread pool
   threadPool.submit(new MyRequest(...));
}
...
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown(); 
```

棘手的部分是如何确定哪些连接是可读的。这需要 NIO 代码、通道选择器等来复用您必须查看哪些连接可以读取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T16:02:38.283

当您从客户端收到文件时，它将自动在新线程中处理。线程数量受两点限制： 1\. 应用服务器配置（例如 Jboss 或 Tomcat 默认可以同时处理 100 个线程）；2\. 有时似乎 WS 提供程序包含线程队列。例如，默认情况下 CXF 不允许同时处理 10 个线程（以防您不更改此配置）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:56:18.770

例如，最好的方法是使用[线程池](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)，这将提供更好的线程创建性能（它们将是预先创建的）和更好的资源管理，以免系统过载和内存不足。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:58:37.870

从理论上讲，您可以创建机器可以处理的尽可能多的线程。线程数没有限制，但如果您打开超过 1000 个线程，您的机器预计会变慢。

我很抱歉这么说，但您的问题表明您正在尝试重新发明轮子。

首先，人们在创建服务器时倾向于使用线程池。这可以防止他们的应用程序创建额外的线程以提高性能。其次，所有现代服务器都使用 NIO，并且不会为每个请求创建线程。第三，也是最后一个：你为什么要开发已经开发的东西？有很多完美的支持标准 API 的 Java Web 服务器。有很多 REST 框架。即使是最有才华的程序员也没有机会开发出比在合理时间内运行得更好的 Web 服务器。

如果您正在实施家庭作业，最后一点是无关紧要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T15:59:56.553

使用线程池...

```
private static final int THREAD_COUNT = 10;

    private static final ThreadPoolExecutor pool = new ThreadPoolExecutor(
                THREAD_COUNT, THREAD_COUNT, 10, TimeUnit.SECONDS,
                new LinkedBlockingQueue<Runnable>());
    public static void submitAgentToPool(Runnable thread) {
        try {
            if(thread != null) {
            LOG.info("ActiveThreads :" + pool.getActiveCount());
            pool.execute(thread);
            }
        catch (Exception e) {
            LOG.error("Exception while Starting thread: " + e.getMessage(), e);
        }
    } 
```

继续将你的线程添加到这个池中......它将确保瞬间只有 10 个线程在运行

# c# - 向前和向后访问不断更新的列表

> ID：11763002
> 
> 赞同：1
> 
> 时间：2012-08-01T15:52:29.647
> 
> 标签：c#, list

我有一个非常特殊的问题，很难将其分解为几行代码和几句话，但我会尝试这样做。我目前正在开发一种用于实时优化过程工厂警报的软件。每次出现新警报时，软件都会从服务器接收新警报。其中几个警报具有相同的根本原因，我的软件会分析这些警报并将它们分组（如果它们彼此相关）。我的问题是将新警报与旧警报进行比较。我将旧警报存储在一个全局列表中，并在它们出现时将新警报附加到此列表中。必须分析新警报是否可以与其自身和旧警报分组。旧警报无需再次重新组合。例如，我有三个旧的 (o) 警报和三个新的 (n)。该列表看起来像 o1 o2 o3 n1 n2 n3。现在必须将 n1 与 o1、o2、o3、n2 和 n3 进行比较。n2 必须与 o1,o2,o3 和 n3 等进行比较。

我使用以下代码来执行此操作：

```
 List<ALARM_ITEM> puffer = new List<ALARM_ITEM>();
            puffer.AddRange(localOldAlarmList);
            puffer.AddRange(localNewAlarmList);
            localMergedList = puffer;

    int mainListCounter = localOldAlarmList.Count;

    for (; mainListCounter < localMergedList.Count; mainListCounter++)
                {
                    /*if there are new elements just these elemnts will be used as static items*/
                    ALARM_ITEM staticAlarmItem = localMergedList[mainListCounter];

        for (int j = -1; j <= 1; j += 2)
        {

                            if (j < 0)
                                counterRunner = localOldAlarmListLength - 1;
                            else
                                counterRunner = mainListCounter + 1;

                            //Check against any ALARM_ITEM in timeframe
                            bool inTimeframe = true;

                            while (inTimeframe)
                            {

                                if ((counterRunner >= localMergedList.Count) || (counterRunner) < 0)
                                        break;

                                 ALARM_ITEM groupCandidate = new ALARM_ITEM();
                                    groupCandidate = localMergedList[counterRunner];

                                 //... several if clauses

                                MergeTwoAlarmGroups(staticAlarmItem, groupCandidate);

                                 if (j < 0)
                                        counterRunner -= 1;
                                    else
                                        counterRunner += 1;

                }
            }
        } 
```

现在我该说什么……我修改了这种方法，现在工作了大约 36 个工作小时，但该软件仍然只是比较彼此之间的新警报，而不是将其链接到旧警报。分组算法有几页长，我试图尽可能地分解它。如果有人能给我一个建议，我做错了什么，我会很高兴，因为我对这个问题很生气。这是我第一次真正被困在这个项目中，并且我正在为这个软件编程三个多月。

亲切的问候拉里莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:01:02.353

好的...让我们看看我是否可以尝试一下，其中大部分将是伪代码，所以这里是：

```
List listOfAllAlarms //a specific subset contianing a representative instance of EACH old alarm GROUP!!, and the new alarms
List listOfNewAlarms //Only the new alarms

foreach (alarm a in listOfNewAlarms)
{
    foreach (alarm b in listOfAllAlarms)
    {
        if (a.Equals(b))
            continue;

        Group = //compare a and b

        if (Group != null) //new group
            //Assign a to group b
    }
} 
```

重要的一点是这两个组，以及您遍历它们的方式。在外部列表中，您只查看最新的警报。在内部列表中，您将与全局警报集进行比较。我实际上更愿意将新警报保留在分组集中，但我确实理解您最终可能会在新警报列表中出现多个警报，这些警报都属于一个组，但它不是已经存在的组。如果您可以将它们分开，我会这样做：

```
List listOfAlarmGroups //a specific subset contianing a representative instance of only the already existing old alarm groups
List listOfNewAlarms //Only the new alarms

foreach (alarm a in listOfNewAlarms)
{
    Group G = null;//set -> ReSet G
    foreach (alarm b in listOfAlarmGroups)
    {
        G = //compare a and b

        if (G != null) 
            break;//found the group
    }

    if (G != null)
        //assign a to group G
    else
    {
        //create new group for a
        //add new group to listOfAlarmGroups
    }
} 
```

两者的区别在于，内部循环只查看组，但从不主动与其他新项目进行比较，但如果发现未分组到现有组的 Item ，它会得到一个新组，并且 NEXT警报将与旧组一起与该新组进行比较。效果相同，算法略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:04:27.997

我不完全理解你的算法。我会用一个

```
Dictionary<ALARM_ITEM, HashSet<ALARM_ITEM>> 
```

作为数据结构，其中值是事件组，键是每个组的代表。当一个新的警报`a`到达时，算法将是

1.  对于每个键`k`，检查是否`a`与`k`
    *   如果是这样，将其添加到存储在的哈希集中`k`并中断
2.  否则，创建一个`values`包含 just的新哈希集`a`，并添加`(a, values)`到字典中

换句话说，您将警报组存储在一个字典中，其键是组的“代表”警报。要添加新警报，您只需将其与代表性警报进行比较。

* * *

这假设 if`a`组`b`和`b`组`c`然后`a`组`c`。如果不是这种情况，则不一定有一致的方式对警报进行分组。如果是这种情况，那么分组关系是[等价](http://en.wikipedia.org/wiki/Equivalence_relation)的，因此算法将起作用。

# ruby-on-rails - rails 如何从 gem 中隐式导入函数？

> ID：11763003
> 
> 赞同：9
> 
> 时间：2012-08-01T15:52:29.537
> 
> 标签：ruby-on-rails, ruby

我是 ruby​​ 和 rails 的新手。我看到我包含的任何 gem，我可以直接在我的代码中使用它的功能。我没有看到代码的任何导入，也没有看到函数的任何名称空间。如果宝石包含具有相同名称的函数，这不是冲突的秘诀吗？

所以 -

ruby/rails 如何导入函数，如何将函数映射到 gem ？当 2 个 gem 包含相同的功能时会导致冲突吗？如果我想显式使用 ruby​​ 库，我将如何导入它的代码？红宝石中有命名空间吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T16:25:45.350

## 红宝石

ruby 将一个文件中声明的函数导入另一个文件的方式是通过`require`函数。`load`完成类似的事情，但出于一般目的，`require`通常是您想要的（有关更多详细信息，请参阅[http://ionrails.com/2009/09/19/ruby_require-vs-load-vs-include-vs-extend/](http://ionrails.com/2009/09/19/ruby_require-vs-load-vs-include-vs-extend/)）

**hello_lib.rb**

```
def say_hello
  puts "hello"
end

# that's right, you can execute code when a library is required,
# so the sky's the limit of what you can do
puts "Hey, I've been required!" 
```

**hello_caller.rb**

```
# load the code from `hello_lib.rb` in the same directory
require './hello_lib.rb' 
```

**子目录/hello_other_caller.rb**

```
# for illustrative purposes, adding the parent directory to the load path
# so that ruby will look there for files I want to require
$: << '..'
require 'hello_lib.rb'
say_hello 
```

## 宝石

Gems 可以被认为是一个 ruby​​ 代码包或一个库。有几种加载 gem 的方法，但最常见的是通过`require`假设您已安装`progressbar`gem 以在终端中显示简单的进度条 ( `gem install progressbar`)

**进度条测试.rb**

```
require 'rubygems'
require 'progressbar'

# this also works
# gem 'progressbar', '~> 0.9.2'

pbar = ProgressBar.new("test", 100)
100.times do
  sleep 0.1
  pbar.inc
end
pbar.finish 
```

这样做的原因是，当我们需要时`rubygems`，它会将进度条 gem 添加到 ruby​​ 查找所需文件的路径中。

## 导轨

Rails 只是一组 gem，其中一些提供可执行脚本。在以前的版本中，您必须指定要加载的 gem，就像我们上面所做的那样。但是现在，有了`bundler`，我们可以在一个中指定所有的 gem `Gemfile`，以及版本控制和源信息。然后，Bundler 将计算出 gem 之间的依赖关系，并将项目的特定版本控制在`Gemfile.lock`. 由于`bundler`它本身就是一个 gem，你会经常看到这样的代码：

**配置/应用程序.rb**

```
require 'bundler'
Bundler.require(:default, Rails.env) 
```

这段代码告诉 Bundler 加载我们在 gemfile 中简单列出的所有依赖项，以及我们在与当前 rails env 对应的组中列出的那些依赖项（例如：development）。

## 命名空间

是的，您可以通过几种方式遇到问题。两个宝石可以具有相同的名称，尽管在这种情况下它们不能被推送到 ruby​​gems，你会很快发现。一个更微妙的命名空间问题是，如果两个文件执行以下操作：

**你好1.rb**

```
def hello
  puts "Hi"
end 
```

**你好2.rb**

```
def hello
  puts "Hello, there!"
end 
```

**你好3.rb**

```
require './hello1'
require './hello2'
hello 
```

在这里，我们看到当我们在全局命名空间中发生命名空间冲突时会发生什么。如果两个库在同一个类名中定义了同一个方法，就会发生类似的事情（这种猴子补丁虽然不鼓励，但仍然会发生！）。在实践中，您不会遇到太多这种情况，尤其是在使用模块命名空间代码方面使用良好的纪律时，例如我正在编写 gem `hello`：

```
module Hello
  # not such a good name, but won't conflict with ::Object
  class Object
    def to_s
      puts 'this is a bad idea'
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:04:27.947

Gems 是名称空间的，因此您可以通过以下方式显式调用方法

```
ModuleName::Class 
```

如果你没有显式调用一个包含的类，ruby 将遍历它的所有类，直到找到你调用的类，如果没有，那么它会抛出一个 NoMethod 错误。

要让 Ruby 看到该库，您需要它：

```
require 'some_library' 
```

要将库包含在类中，您：

```
class SomeClass
 include SomeLibrary
 ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-17T01:25:11.833

如果您查看`config/application.rb`，您会看到它是如何做到的：

```
Bundler.require(*Rails.groups) 
```

而已！Bundler 会自动处理所有需要的 gem，因此您不必在使用的每个文件中都处理。有关更多详细信息，请参阅[文档](https://bundler.io/v1.12/bundler_setup.html#setting-up-your-application-to-use-bundler)。

# sql - 从第二个数据库更新表列

> ID：11763005
> 
> 赞同：1
> 
> 时间：2012-08-01T15:52:39.007
> 
> 标签：sql, sql-server, ssms

我已经按照其他帖子中的示例来实现这一点，但出现以下错误：

> FROM 子句中的对象“otherDB.dbo.someTable”和“someDB.dbo.someTable”具有相同的公开名称。使用相关名称来区分它们。

这是 SQL 语句

```
UPDATE [someDB].[dbo].[someTable]
SET [someDB].[dbo].[someTable].[Name] = [otherDB].[dbo].[someTable].[Name]
FROM [someDB].[dbo].[someTable]
INNER JOIN [otherDB].[dbo].[someTable]
   ON [someDB].[dbo].[someTable].[ID] = [otherDB].[dbo].[someTable].[ID] 
```

如您所见，我只是`[Name]`想`[someBD].[someTable]`从`[otherDB].[someTable]`

从我在其他类似查询中看到的情况来看，这应该可以工作，但我想知道我是否需要做一些不同的事情，因为它来自不同的数据库？

非常感谢任何指针/帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T15:58:46.793

您是否尝试过使用别名？

```
UPDATE db1
SET db1.[Name] = db2.[Name]
FROM [someDB].[dbo].[someTable] db1
INNER JOIN [otherDB].[dbo].[someTable] db2
   ON db1.[ID] = db2.[ID] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T16:00:50.937

好吧，错误消息要求提供相关名称。我认为这意味着它希望您为其中一个表名命名。尝试这个：

```
UPDATE [someDB].[dbo].[someTable]
SET [someDB].[dbo].[someTable].[Name] = T.[Name]
FROM [someDB].[dbo].[someTable]
INNER JOIN [otherDB].[dbo].[someTable] T
   ON [someDB].[dbo].[someTable].[ID] = T.[ID] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T15:56:54.810

尝试使用别名：

```
UPDATE
[someDB].[dbo].[someTable]
SET
s.[someDB].[dbo].[someTable].[Name] = o.[otherDB].[dbo].[someTable].[Name]
FROM
[someDB].[dbo].[someTable] s
INNER JOIN
[otherDB].[dbo].[someTable] o
ON
s.[someDB].[dbo].[someTable].[ID] = o.[otherDB].[dbo].[someTable].[ID] 
```

# android - XML — 如何让两个按钮并排？

> ID：11763006
> 
> 赞同：0
> 
> 时间：2012-08-01T15:52:39.917
> 
> 标签：android, xml, android-linearlayout, android-relativelayout

我试图让两个按钮“运行”和“结果”并排。但是我运气不太好。

我已经尝试使用`RelativeLayout`并添加`layout_weight`到这两个按钮，但它们似乎只是消失了并且地图接管了屏幕。

谁能指出我做错了什么以及可以做些什么来解决它？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

      <TextView
          android:id="@+id/myLocationText"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/hello" />
      <TextView
          android:id="@+id/resultsHomeTest"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="" />

      <Button
          android:id="@+id/btnRun"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"

          android:text="Run" />

      <Button
          android:id="@+id/btnResults"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="Results" />

      <TextView
          android:id="@+id/resultsTextView"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text=""
          android:textAppearance="?android:attr/textAppearanceMedium" />

  <com.google.android.maps.MapView
    android:id="@+id/myMapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
    android:clickable="true"
    android:apiKey="02kgJwy0ijcQsVCaCzD9sFv69dOi4gXBEUjIbuQ"

  />

    <!--

    Desktop key: 02kgJwy0ijcTK7fd-wxv7OsPUFEveXTUt16lrRA
    Laptop key : 02kgJwy0ijcQsVCaCzD9sFv69dOi4gXBEUjIbuQ
      -->
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:55:17.010

您也可以使用，但 lint 说如果嵌套它会影响您的性能

你可以像下面的代码一样使用

```
<LinearLayout android:layout_height="wrap_content"
    android:layout_width="fill_parent">
    <TextView android:layout_height="wrap_content"
        android:layout_width="fill_parent" android:text="Slashdot"
        android:id="@+id/textUser" android:layout_weight="1"
        android:textStyle="bold"/>
    <TextView android:layout_height="wrap_content"
        android:layout_width="fill_parent" android:gravity="right"
        android:layout_weight="1" android:id="@+id/textCreatedAt"
        android:text="10 minutes ago"/> 
</LinearLayout> 
```

但是如果你有它像下面的代码，lint 会说它会影响你的性能。

```
<RelativeLayout>
    <LinearLayout>
        <LinearLayout>
            <ImageView
            android:layout_weight="0.3"/>
        </LinearLayout>

    </LinearLayout>

</RelativeLayout> 
```

您也可以使用相对布局，但不要使用权重。如果你像下面的代码那样放置它们，你只需要管理边距。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/button1"
        android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:56:59.910

将两个按钮包裹在一个水平线中`LinearLayout`：

```
<LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:orientation="horizontal">

    <Button
              android:id="@+id/btnRun"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"

              android:text="Run" />

          <Button
              android:id="@+id/btnResults"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="Results" />
    </LinearLayout> 
```

# mysql - 如何按不在唯一索引中的列对 MySQL 表进行分区

> ID：11763008
> 
> 赞同：9
> 
> 时间：2012-08-01T15:52:43.990
> 
> 标签：mysql, partitioning, unique-index

让我们有一个简单的产品表。每个产品都有其唯一的 ID 和类别。用户经常按类别搜索，所以我想按类别划分产品。一个分区中的每个类别，例如

我该怎么做？因为当然我的 ID 列上有一个主键，并且需要我的 ID 是唯一的。在每个类别中不是唯一的。

但是 partitiong 有这个限制，即“表上的每个唯一键都必须使用表的分区表达式中的每一列”。

好吧，这不是让分区有点没用吗？还是我错过了什么？我应该怎么办？

[http://dev.mysql.com/doc/refman/5.1/en/partitioning-limitations-partitioning-keys-unique-keys.html](http://dev.mysql.com/doc/refman/5.1/en/partitioning-limitations-partitioning-keys-unique-keys.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T16:28:15.920

诀窍是将该字段添加`category`到您当前的主键中。（您的主键将仍然是主键）
然后您可以按类别对表进行分区。

这是您可以使用的代码：

```
ALTER TABLE `products` DROP PRIMARY KEY , ADD PRIMARY KEY ( `id` , `category` );
ALTER TABLE `products` PARTITION BY KEY(category) PARTITIONS 6; 
```

如果您希望它真正唯一，请在 id 中添加`auto_increment`选项，并且在向表中插入数据时不要指定 id 值。id 将在插入时由数据库服务器确定。

如有必要，更改字段名称和键名称。

文档：
[分区类型](http://dev.mysql.com/doc/refman/5.5/en/partitioning-types.html)
[KEY 分区](http://dev.mysql.com/doc/refman/5.5/en/partitioning-key.html)

# javascript - 比较用 jquery 加载的字符串

> ID：11763011
> 
> 赞同：0
> 
> 时间：2012-08-01T15:52:58.010
> 
> 标签：javascript, jquery

伙计们，我有以下 javascript 函数，它应该检查表中列的索引。问题是 columnName 和表中的名称的比较。我用columnName 'ID' 测试过，在表中找到了这个列，但是比较不正确，所以没有返回索引。

我的代码：

```
function getColumnIndex(columnName, grid) {
    console.log("loading column index for column: [" + columnName + "]");
    $('div.hDivBox > table > thead > tr > th', grid).each(function(index) {
         var name = $(this).attr('title');
         console.log("Checking cell: [" + name + "]");
         if (String(name) == columnName) {
              return index;
         }
    });
    console.log("no cell found with name: " + columnName);
    return -1;
} 
```

日志语句：

> 为列加载列索引：[ID]
> 检查单元格：[ID]
> 检查单元格：[名称]
> 检查单元格：[描述]
> 检查单元格：[AddTime]
> 检查单元格：[UpdTime]
> 未找到名称为 ID 的单元格

由 javascript 函数分析的 HTML 示例：

```
<div class="hDivBox">
<table cellspacing="0" cellpadding="0">
    <thead>
        <tr>
            <th align="center" hidden="" axis="col0" title="ID" style="display: none;">
                <div style="text-align: center; width: 30px;">ID</div>
            </th>
            <th align="center" axis="col1" title="Name" class="">
                <div style="text-align: center; width: 250px;">Name</div>
            </th>
            <th align="center" axis="col2" title="Description" class="">
                <div style="text-align: center; width: 250px;">Beschreibung</div>
            </th>
            <th align="center" axis="col3" title="AddTime">
                <div style="text-align: center; width: 120px;">hinzugefügt</div>
            </th>
            <th align="center" axis="col4" title="UpdTime">
                <div style="text-align: center; width: 120px;">aktualisiert</div>
            </th>
        </tr>
    </thead>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:00:30.523

`return`传递给 jQuery 函数的匿名函数内部的语句仅从`.each()`该函数返回**，**它不会也从该`getColumnIndex()`函数返回。

相反，我会执行以下操作：

```
function getColumnIndex(columnName, grid) {
    console.log("loading column index for column: [" + columnName + "]");
    var index = -1;
    $('div.hDivBox > table > thead > tr > th', grid).each(function(i) {
        var name = $(this).attr('title');
        console.log("Checking cell: [" + name + "]");
        if (String(name) == columnName) {
            index = i;
            return;
        }
    });
    if(index == -1)
        console.log("no cell found with name: " + columnName);
    return index;
} 
```

基本原则是，不是从匿名函数返回索引，而是将正确的索引存储在其范围之外的变量中，因此您可以在`.each()`调用完成执行后访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:00:02.483

只需使用[jQuery 属性选择器](http://api.jquery.com/attribute-equals-selector/)来匹配标题并使用[index()](http://api.jquery.com/index/)而不是自己循环。

```
function getIndexByTitle( title ) {
 return $('th[title="' + title + '"]').index();
}

alert(getIndexByTitle("ID"));
alert(getIndexByTitle("Name")); 
```

[例子](http://jsfiddle.net/CYJdK/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T16:03:27.557

您正在使用[`.each()`](http://api.jquery.com/each)功能

```
.each(function(){
    ...
    return index;
});
return -1; 
```

这将从回调中返回（如果`index`是，则可能停止每个循环`false`），但永远不会中断并从外部`getColumnIndex`函数返回！所以，那个总是会回来`-1`的。

快速解决：

```
function getColumnIndex(columnTitle, grid) {
    var index = -1;
    $('div.hDivBox > table > thead > tr:first > th', grid).each(function(i) {
        if ($(this).attr('title') == columnTitle) {
            index = i;
            return false; // break each-loop
        }
    });
    return index;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T16:04:11.030

您正在从`each`迭代中调用的内部函数返回。您需要将索引保存在每次调用之外，以便之后访问它。

```
function getColumnIndex(columnName, grid) {
    var columnIndex;
    console.log("loading column index for column: [" + columnName + "]");
    $('div.hDivBox > table > thead > tr > th', grid).each(function(index) {
         var name = $(this).attr('title');
         console.log("Checking cell: [" + name + "]");
         if (String(name) == columnName) {
              columnIndex = index;
              // return false to exit the each iteration early
              return false;
         }
    });

    if (typeof columnIndex !== "undefined") {
        return columnIndex;
    };

    console.log("no cell found with name: " + columnName);
    return -1;
} 
```

# android - Android：淡化编辑文本字段的技术

> ID：11763015
> 
> 赞同：4
> 
> 时间：2012-08-01T15:53:14.380
> 
> 标签：android, user-interface

我想知道以编程方式淡出编辑文本字段的最佳方法是什么？

例如，我希望编辑文本字段看起来像这样：

![在此处输入图像描述](../Images/a9e13746fe430b5efc86d73dbf36c438.png)

目前我只是使用我使用 gimp 淡出的静态图像，但我会将它们全部更改为淡入淡出的编辑文本字段。

非常感谢任何输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:04:58.087

您可以使用渐变获得类似的结果。

首先在drawable forlder xml文件中创建`shape`元素，例如：

```
<!-- mygradient.xml -->
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid android:color="@color/black" />

    <gradient
        android:angle="90"
        android:centerColor="@color/grey"
        android:endColor="@color/white"
        android:startColor="@color/black"
        android:type="linear" />

</shape> 
```

接下来使用您的 xml 作为某些视图的背景：

```
<TextView
    android:background="@drawable/mygradient"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content" /> 
```

有关形状可绘制和渐变的更多信息，请查看[此处](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-20T19:45:40.440

我相信对此有一个更简单的答案，并且它内置在控件中。由于图片尺寸极小，很难判断这是否正是您想要的。

我在尝试查找有关淡化 EditTexts 的更多信息时发现了这一点，所以我想我会分享我已经知道的东西，因为接受的答案非常复杂

```
EditText textbox = (EditText) findViewById(R.id.textbox);

// This enables the fading automatically. 
// Use Horizontal if you want the sides to fade!
textbox.setVerticalFadingEdgeEnabled(true);  

// This allows you to change to depth of the fade
// Low values like 10 has an incredible small fade, but values like 100 seem to be really good!
textbox.setFadingEdgeLength(100); 
```

# graphics - 在 Linux 上绘制有向图

> ID：11763017
> 
> 赞同：1
> 
> 时间：2012-08-01T15:53:22.020
> 
> 标签：graphics, graph

我需要（以 PDF 或光栅格式）绘制有向无环图。顶点的数量很少（大约几十个），我需要对边缘的外观进行一些自定义。例如，我想要“波浪”边缘、彩色边缘和标签覆盖边缘。

我听说过 dot 语言和 Graphviz，它们应该可以完成这项工作，但我想知道它是否支持我正在寻找的那种边缘可定制性。所以，问题是：你知道有哪些适用于 Linux 的 LaTeX 包/应用程序/库可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:07:31.943

查看[yEd](http://www.yworks.com)以获得一个不错的应用程序（手动，它是一个图形编辑器）。有各种各样的库和东西可以编写代码来完成它，但是你是否想要一个应用程序或编写自己的代码的能力取决于你需要多久做一次，我猜......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T09:42:57.167

TiKZ 是我正在寻找的包。易于使用、大量定制和大量扩展使其几乎完美。

# java - Java：快速双欧元字符串表示

> ID：11763018
> 
> 赞同：0
> 
> 时间：2012-08-01T15:53:21.813
> 
> 标签：java, string, double

我需要显示很多货币（欧元）值，这些值在使用滑块时可能会发生变化。因此，我创建了一个*更快的* **Double to Euro**函数，而不是使用数字格式化程序（无需内部化，在资源有限的 android 设备上运行）。

虽然这个函数比默认的数字格式化程序快得多，但如果它可以更快的话会很有趣。有什么创意吗？

```
/*
 * Ugly but fast double to euro string function
 */
public static final String getEuroString(Double euro) {
    if(euro == null) {
        return "0,00 €";
    }

    final double    d_euro  = euro;
    final int       post    = Math.abs((int) Math.round((d_euro % 1) * 100));

    return ((int) d_euro) + "," + (post < 10 ? "0" + post : post) + " €";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:00:50.007

如果您给出四舍五入或表示错误，您需要对结果进行四舍五入。

尝试

```
public static void main(String[] args) {
    System.out.println(print(70e12));
    System.out.println(print(70e12 + 0.01));
}

public static String print(double euro) {
    long eurocents = Math.round(euro * 100);
    String centsStr = Long.toString(100 + eurocents%100).substring(1);
    return eurocents / 100 + "," + centsStr + " €";
} 
```

[在https://ideone.com/NAonp0](https://ideone.com/NAonp0)上打印

```
70000000000000,00 €
70000000000000,01 € 
```

使用这种方法，您可以毫无错误地存储 70 万亿欧元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:58:19.253

不要使用双精度存储货币值，使用大十进制或[joda-money.sourceforge.net](http://joda-money.sourceforge.net/)

# c# - CollectionViewSource 将一项分组到多个组

> ID：11763019
> 
> 赞同：0
> 
> 时间：2012-08-01T15:53:24.123
> 
> 标签：c#, wpf, grouping, one-to-many, collectionviewsource

我正在尝试模仿 msn messenger 联系人列表树视图显示。我有一个联系人对象，它有一个 Groups 属性，该属性返回联系人所属的数组 msngroups，这意味着我有如下内容

```
Class Contact
{
    string Name;
    string[] Groups {get;set;}
 }

 ObservableCollection<Contact> ContactList; 
```

所以一个联系人可以在多个组中，是否可以使用 CollectionViewSource 生成正确的视图来提供 wpf TreeView？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:41:23.180

The grouping would work when you flatten this hierarchy i.e. "Contact having Groups" into "Repeated Contacts having each single group" ...

e.g.

If you have **4 items with groups** like ...

```
Dog { mammal, quadruped }
Man { mammal, biped }
PrayingMantis { insect, quadruped }
Pegion { bird, biped } 
```

Then you new **flat list** should be like this...

```
<mammal, Dog>
<mammal, Man>
<bird, Pigeon> 
<insect, PrayingMantis>
<biped, Man>
<biped, Pigeon>
<quadruped, Dog>
<quadruped, PrayingMantis> 
```

So after applyin **grouping** on the `Keys` above it should be

```
mammal { Dog, Man }
bird { Pigeon }
insect { PrayingMantis }
biped { Man,  Pigeon }
quadruped { Dog, PrayingMantis } 
```

**C# Code:**

```
//Flatten the groups into a KeyValuePair<string, Contacts> list using LINQ.
var flatGroups 
    = listGroups.SelectMany(
        ctc => ctc.Groups.Select(
             grp => new KeyValuePair<string, Contact>(grp, ctc))).ToList();          

//Apply CollectionViewSource group on the `Key`.
var collectionVwSrc = new CollectionViewSource();
collectionVwSrc.Source = flatGroups;
collectionVwSrc.GroupDescriptions.Add(new PropertyGroupDescription("Key"));

//Apply groups as itemssource to the TreeView.
MyGroupsTree.ItemsSource = collectionVwSrc.View.Groups; 
```

**XAML**

```
 <TreeView x:Name="MyGroupsTree">
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Items}">
                <!--GroupItem.Name--> 
                <TextBlock Text="{Binding Path=Name}" 
                           FontWeight="Bold"/>
                <HierarchicalDataTemplate.ItemTemplate>
                    <DataTemplate>
                        <!--Contact.Name-->
                        <TextBlock Text="{Binding Value.Name}"/>
                    </DataTemplate>
                </HierarchicalDataTemplate.ItemTemplate>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

Let me know if this helps...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T10:22:58.300

```
////DataItem.cs
public class DataItem
{
    public string Name { get; set; }
    public string Path { get; set; }
    public string[] GroupProperties { get; set; }
}
////MainWindow.xaml.cs
public partial class MainWindow : Window
{
    public ObservableCollection<DataItem> DataList { get; set; }
    public MainWindow()
    {
        DataList = new ObservableCollection<DataItem>(new DataItem[] { 
            new DataItem(){ Name = "1111", Path = "C:\\1111", GroupProperties = new string[]{"HeNan", "JiangSu", "BeiJing"} },
            new DataItem(){ Name = "2222", Path = "C:\\2222", GroupProperties = new string[]{"HeNan", "TianJin", "ShenZhen"} },
            new DataItem(){ Name = "3333", Path = "C:\\1111", GroupProperties = new string[]{"GuangZhou", "XiAn", "BeiJing"} },
            new DataItem(){ Name = "4444", Path = "C:\\4444", GroupProperties = new string[]{"HeNan", "NanJing", "KunMing"} }
        });

        InitializeComponent();           

    }
}
 ////MainWindow.xaml
<Window x:Class="CultureDemo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
    Title="MainWindow" Height="350" Width="525" DataContext="{Binding RelativeSource={RelativeSource Self}}">
<Window.Resources>
    <CollectionViewSource x:Key="ListBoxSource2" Source="{Binding DataList}">
        <CollectionViewSource.SortDescriptions>
            <scm:SortDescription Direction="Descending" PropertyName="Name">                    
            </scm:SortDescription>
        </CollectionViewSource.SortDescriptions>
        <CollectionViewSource.GroupDescriptions>
            <PropertyGroupDescription PropertyName="Path" StringComparison="OrdinalIgnoreCase"></PropertyGroupDescription>
        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>

    <CollectionViewSource x:Key="ListBoxSource3" Source="{Binding DataList}">
        <CollectionViewSource.SortDescriptions>
            <scm:SortDescription Direction="Ascending" PropertyName="Name">                    
            </scm:SortDescription>
        </CollectionViewSource.SortDescriptions>
        <CollectionViewSource.GroupDescriptions>
            <PropertyGroupDescription PropertyName="GroupProperties" StringComparison="OrdinalIgnoreCase"></PropertyGroupDescription>
        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>

</Window.Resources>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="180*" />
        <ColumnDefinition Width="169*" />
        <ColumnDefinition Width="154*" />
    </Grid.ColumnDefinitions>
    <ListBox Name="listBox1" ItemsSource="{Binding DataList}" DisplayMemberPath="Name">
    </ListBox>
    <ListBox Grid.Column="1" Name="listBox2" ItemsSource="{Binding Source={StaticResource ListBoxSource2}}" >
        <ListBox.GroupStyle>
            <GroupStyle>

            </GroupStyle>
        </ListBox.GroupStyle>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}"></TextBlock>
            </DataTemplate>
        </ListBox.ItemTemplate>            
    </ListBox>
    <ListBox Grid.Column="2" Name="listBox3"  ItemsSource="{Binding Source={StaticResource ListBoxSource3}}">
        <ListBox.GroupStyle>
            <GroupStyle>

            </GroupStyle>
        </ListBox.GroupStyle>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}"></TextBlock>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid>
</Window> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:00:08.790

Bea Stollnitz[涵盖了这个确切的情况。](https://web.archive.org/web/20120403203458/http://bea.stollnitz.com/blog/?p=18)`CollectionViewSource`支持定义 ，`GroupDescriptions`也`TreeView`支持它。检查那个链接。

# android - 如何将字符串与android中的按钮文本匹配？

> ID：11763021
> 
> 赞同：0
> 
> 时间：2012-08-01T15:53:24.763
> 
> 标签：android

我有 3`Buttons`。

当我单击任何一个时，如果文本与变量中的 a匹配`Buttons`，我希望改变的颜色`Button``Button``String``String ans;`发生变化。

有人能帮我吗？

这是我尝试过的：

```
public void onClick(View v) {
        // TODO Auto-generated method stub
        if((btn10.getId())==(R.id.btn10))
        {
            if(btn10.getText().toString().equals(ans))
            {
                btn10.setBackgroundColor(Color.GREEN);
                score=score+10;

            }
            else
            {
                if((btn11.getId())==(R.id.btn11))
                {
                    btn10.setBackgroundColor(Color.RED);

                }
                if((btn12.getId())==(R.id.btn12))
                {
                    btn12.setBackgroundColor(Color.RED);

                }
                ch=ch-1;
            }
        }
        else if((btn11.getId())==(R.id.btn11))
        {
            if(btn11.getText().toString().equals(ans))
            {
                btn11.setBackgroundColor(Color.GREEN);
                score=score+10;
            }
            else
            {
                if((btn12.getId())==(R.id.btn12))
                {
                    btn12.setBackgroundColor(Color.RED);

                }
                if((btn10.getId())==(R.id.btn10))
                {
                    btn10.setBackgroundColor(Color.RED);

                }
                ch=ch-1;
            }
        }
        else if((btn12.getId())==(R.id.btn12))
        {
            if(btn12.getText().toString().equals(ans))
            {
                btn12.setBackgroundColor(Color.GREEN);
                score=score+10;
            }
            else
            {
                if((btn11.getId())==(R.id.btn11))
                {
                    btn11.setBackgroundColor(Color.RED);
                }
                if((btn10.getId())==(R.id.btn10))
                {
                    btn10.setBackgroundColor(Color.RED);

                }
                ch=ch-1;
            }
        }
    } 
```

任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:02:36.443

首先，将所有按钮放在一个集合中，

```
Collection<Button> buttons = new HashSet<Button>();
buttons.add(findViewById(R.id.btn10);
buttons.add(findViewById(R.id.btn11);
... 
```

如果所有按钮都在一个公共容器下，你可以这样做，

```
ViewGroup parent = findViewById(...);
for (int i = 0, l = parent.getChildCount(); i++) {
  Button b = (Button) parent.getChildAt(i);
  buttons.add(b);
} 
```

定义一个`onClickListener`正确设置按钮颜色，

```
View.OnClickListener ocl = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
      for (Button b: buttons) {
        if (b.getText().toString().equals(ans)) {
          b.setBackgroundColor(Color.GREEN);
        } else {
          b.setBackgroundColor(Color.RED);
        }
      }    
    }
}; 
```

`onClickListener`为每个按钮设置

```
for (Button b: buttons) {
  b.setOnClickListener(ocl);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T15:58:52.127

阅读可用于 Button 的 API。这将帮助您解决问题。或者您可以通过结构维护按钮的顺序.. 像 Hashmap 或其他东西，当其中一个按钮单击发生时，然后您从数据结构中检索它并将其与答案进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:00:46.823

此代码可能会帮助您：

```
public void onClick(View v) {
switch(v.getId(){
case R.id.btn10:
if(v.getText().equals("ans")) {
v.setBackgroundColor(Color.RED);
} else {
v.setBackgroundColor(Color.Green);
}
break;
case R.id.btn11:
break;
case R.id.btn12:
break;
default:
break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:03:06.460

好吧，您会发现[这个线程](https://stackoverflow.com/questions/3320115/android-onclicklistener-identify-a-button)对您的问题非常有帮助，他们写了一些您在实现中可能缺少的提示。就像那个“v”是一个按钮，实际上是你按下的按钮，所以阅读那篇文章将是一个好的开始，祝你好运。

# html - VBScript 从表单中获取值

> ID：11763026
> 
> 赞同：0
> 
> 时间：2012-08-01T15:53:30.707
> 
> 标签：html, css, vbscript

我有一个简单的表格

```
<div id="stylized" class="myform">
 <form id="mysmartform">
 <h1>CourtSmart Server Status</h1>
 <p>Are the servers running?</p>

<label>Yes
 <span class="small">All Servers Are Running</span>
 </label>
 <input type="radio" name="formradio" id="stylized" value="yes" />

<label>No
 <span class="small">We Have A Problem</span>
 </label>
 <input type="radio" name="formradio" id="stylized" value="no" />

<label>eMail
    <span class="small"></span>
</label>
<select name="formemail" size="1">
    <option value="someone@example.com" selected="selected">someone@example.com</option>
    <option value="someone@example.com">someone@example.com</option>
    <option value="someone@example.com">someone@example.com</option>
    <option value="someone@example.com">someone@example.com</option>
    <option value="someone@example.com">someone@example.com</option>
</select>

<button type="submit" id="sendReport">Send Status Report</button>
 <div class="spacer"></div> 
```

使用 VBScript 我想访问所选单选按钮和所选电子邮件地址的值，只需执行一个简单的 MsgBox 即可显示它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:28:53.153

```
Option Explicit
Dim objIE : Set objIE = CreateObject("InternetExplorer.Application")

objIE.Visible = False
objIE.Navigate "file://C:/form.html"
Do Until objIE.ReadyState = 4
WScript.Sleep 100
Loop

Dim value_running
Dim value_problem
Dim result

value_running = objIE.Document.getElementsByTagName("input").item(0).value
value_problem = objIE.Document.getElementsByTagName("input").item(1).value

If StrComp(value_running,"yes")=0 Then
    result = 0
ElseIf StrComp(value_problem,"yes")=0 Then
    result = 1
Else
    result = -1
End If

Wscript.Echo Result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:25:49.957

如果您的意思是运行 vbscript，在 IE 中放置一些 GUI 并获取值，这里是一个示例

```
Set web = CreateObject("InternetExplorer.Application") 
If web Is Nothing Then 
  msgbox("Error while loading Internet Explorer") 
  Wscript.Quit 
Else 
  with web 
    .Width = 300 
    .Height = 175 
    .Offline = True 
    .AddressBar = False 
    .MenuBar = False 
    .StatusBar = False 
    .Silent = True 
    .ToolBar = False 
    .Navigate "about:blank" 
    .Visible = True 
  end with 
End If 

'Wait for the browser to navigate to nowhere 
Do While web.Busy 
  Wscript.Sleep 100 
Loop 

'Wait for a good reference to the browser document 
Set doc = Nothing 
Do Until Not doc Is Nothing 
  Wscript.Sleep 100 
  Set doc = web.Document 
Loop 

'Write the HTML form 
doc.Write "Give me a name<br><form><input type=text name=name ><input type=button name=submit id=submit value='OK' onclick='javascript:submit.value=""Done""'></form>" 
Set oDoc = web.Document 
Do Until oDoc.Forms(0).elements("submit").Value <> "OK" 
  Wscript.Sleep 100 
  If web Is Nothing or Err.Number <> 0 Then 
    msgbox "Window closed" 
    Wscript.Quit 
  End If 
Loop 
name = oDoc.Forms(0).elements("name").value 
oDoc.close 
set oDoc = nothing 
web.quit 
set web = nothing 
Wscript.echo "Hello " & name 
```

# string - 如何将字符串和/或数字分隔成数组？

> ID：11763027
> 
> 赞同：2
> 
> 时间：2012-08-01T15:53:34.017
> 
> 标签：string, lua, lua-table

我正在使用 Lua 语言，并且我有一长串二进制数，我想将其放入一个数组中，每个数字都作为数组中自己的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:13:57.733

```
local str, out = "01101101010010010", {}
for i = 1, #str do
  out[#out+1] = string.sub(str,i,i)
end 
```

`out[#out+1] = tonumber(string.sub(str,i,i))`如果您希望数组包含数字而不是字符串，请将第 3 行更改为。

# python - Python 3 - urllib，HTTP 错误 407：需要代理身份验证

> ID：11763028
> 
> 赞同：17
> 
> 时间：2012-08-01T15:53:41.423
> 
> 标签：python, authentication, proxy, urllib

我正在尝试使用 urllib.request.urlopen() 打开一个网站（我在公司代理后面），但出现错误：

```
urllib.error.HTTPError: HTTP Error 407: Proxy Authentication Required 
```

我可以在 urllib.request.getproxies() 中找到代理，但是如何指定要使用的用户名和密码呢？我在官方文档中找不到解决方案。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-01T16:12:22.647

```
import urllib.request as req

proxy = req.ProxyHandler({'http': r'http://username:password@url:port'})
auth = req.HTTPBasicAuthHandler()
opener = req.build_opener(proxy, auth, req.HTTPHandler)
req.install_opener(opener)
conn = req.urlopen('http://google.com')
return_str = conn.read() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-20T02:34:40.817

您可以使用您的凭据（用户名和密码）设置代理服务器身份验证，以使用请求连接到网站。这对我有用。要获取您的代理服务器名称：使用

```
import urllib.request as req
import os
#get your proxy server url details using below command
req.getproxies() 

#user your credentials and url to authenticate

os.environ['http_proxy'] = "http://username:pwd@url:80"
os.environ['https_proxy'] = "http://username:pwd@url:80"

#replace username, pwd and url with your credentials.

conn = req.urlopen('https://Google.com')
return_str = conn.read() 
```

# java - 访问加密狗的 Java API？

> ID：11763031
> 
> 赞同：0
> 
> 时间：2012-08-01T15:53:47.430
> 
> 标签：java, mysql, dongle

我计划实现一个桌面应用程序，它将接收到加密狗的所有短信和发件人号码存储在 MySQL 数据库中。那么，有什么方法可以用来访问加密狗以达到上述目标功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:09:59.603

如果您的加密狗分配了一些串行端口，您应该能够访问它并使用 AT 命令。

查看“Java 通信 API”，这里有一个代码示例：

[http://www.java-samples.com/showtutorial.php?tutorialid=22](http://www.java-samples.com/showtutorial.php?tutorialid=22)

# c# - 如何向窗体元素添加动画？

> ID：11763034
> 
> 赞同：2
> 
> 时间：2012-08-01T15:54:02.043
> 
> 标签：c#, .net, winforms, animation, user-experience

来自 Silverlight 环境，创建动画面板非常容易 - 我只是将所有控件放在画布上，并在 XAML 中添加以下行

```
 <Storyboard x:Name="canvasRight" 
                        Completed="canvasRight_Completed">
                <DoubleAnimation From="0" To="500" 
                                 Duration="0:0:0.6" 
                                 Storyboard.TargetName="aboutCanvas" 
                                 Storyboard.TargetProperty="(Canvas.Left)">

                    <DoubleAnimation.EasingFunction>
                        <QuinticEase EasingMode="EaseIn"/>
                    </DoubleAnimation.EasingFunction>

                </DoubleAnimation>
            </Storyboard> 
```

现在，每当用户单击某处的“关于”按钮时，带有一些图像和指向我的网页的链接的画布就会很好地从右侧滑出。现在很明显，我知道在执行 Forms 应用程序时这并不容易，但我根本看不到任何方法可以做到这一点。从我收集到的画布等价物是一个面板，我在上面放置了一些控件。我可以使面板可见或不可见，但我想为其添加相同类型的“滑出”效果。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:14:28.013

我用过这个 APi，它的简单而完整的文档可以在 [http://code.google.com/p/dot-net-transitions/wiki/CodingWithTransitions](http://code.google.com/p/dot-net-transitions/wiki/CodingWithTransitions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T16:07:18.047

动画在 WinForms 中无法正常工作。不同的技术。

您可以尝试使用[AnimateWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632669%28v=vs.85%29.aspx) api 来接近。

来自[pinvoke.net](http://pinvoke.net/default.aspx/user32/AnimateWindow.html)：

```
[DllImport("user32")]
static extern bool AnimateWindow(IntPtr hwnd, 
                                 int time,
                                 AnimateWindowFlags flags); 
```

# php - 如何让用户通过点击发送给他们的电子邮件中的链接来激活他们的订阅，在php中？

> ID：11763035
> 
> 赞同：-6
> 
> 时间：2012-08-01T15:54:04.967
> 
> 标签：php

我知道通过使用：

```
function checkEmail( $email ){
    return filter_var( $email, FILTER_VALIDATE_EMAIL );
} 
```

我们可以检查一封有效的电子邮件，但我想通过向用户发送一封带有激活链接的电子邮件来了解它是假的还是真实的，他们需要点击该链接进行注册。

您如何使用 PHP 完成整个过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:58:13.887

[http://net.tutsplus.com/tutorials/php/how-to-implement-email-verification-for-new-members/](http://net.tutsplus.com/tutorials/php/how-to-implement-email-verification-for-new-members/)

逐步尝试。

这是谷歌上的结果二：

```
php check email subscription link 
```

# c++ - IDL 接口、C++、CORBA，我正在处理“指定的返回类型冲突”和“成员函数‘虚拟...’的无效抽象返回类型”

> ID：11763036
> 
> 赞同：2
> 
> 时间：2012-08-01T15:54:08.087
> 
> 标签：c++, compiler-errors, corba, idl, omniorb

3 多天以来，我一直在处理 CORBA 和 C++ 以及我用 IDL 编写的应用程序界面。

我的应用界面如下所示：

```
#ifndef __FORUM_INTERFACE_IDL__
#define __FORUM_INTERFACE_IDL__

#include "Forum.idl"
typedef sequence<Forum> Forums;

interface ForumInterface
{
    Forums getForumList(in Forum f);
    Forums getUsersForumList(in long UsersID);
    void addNewTopic(in Forum f, in long UsersID, in string title);
};

#endif 
```

**我通过以下方式将其“编译”为 *.hh 和 *.cc 文件：omniidl -bcxx ForumInterface.idl**

我的论坛对象（也在 IDL 中定义）如下所示：

```
#ifndef __FORUM_IDL__
#define __FORUM_IDL__

interface Forum
{
    long getForumID();
    void setForumID(in long id);
    string getForumName();
    void setFroumName(in string name);
    Forum getForumParent();
    void setForumParent(in Forum f);
};

#endif 
```

**我通过以下方式将其“编译”为 *.hh 和 *.cc 文件：omniidl -bcxx Forum.idl**

我尝试编写 Forum 和 ForumInterface 的实现。我从论坛开始，这里是 FroumImpl 类的定义：

```
#ifndef __FORUMIMPL_H__
#define __FORUMIMPL_H__

#include "Forum.hh"

class ForumImpl : public POA_Forum
{
    private :

        long id;
        char *name;
        ForumImpl parent;

    public :

        long getForumID();
        void setForumID(long id);
        char* getForumName();
        void setFroumName(const char* name);
        ForumImpl getForumParent();
        void setForumParent(ForumImpl f);
};

#endif 
```

它是声明（现在它是空的）：

```
#include "ForumImpl.h"

long ForumImpl::getForumID(){}
void ForumImpl::setForumID(long id){}
char* ForumImpl::getForumName(){}
void ForumImpl::setFroumName(const char* name){}
ForumImpl ForumImpl::getForumParent(){}
void ForumImpl::setForumParent(ForumImpl f){} 
```

我试图编译它，

```
g++ -c ForumImpl.cpp -I$OMNIORB_HOME/include -I$OMNIORB_HOME/include/omniORB4 
```

但出现错误：

> 在来自 ForumImpl.cpp:1:0 的文件中：ForumImpl.h:12:19：错误：字段“父”的类型不完整 ForumImpl.h:20:19：错误：为“虚拟 ForumImpl ForumImpl::”指定的返回类型冲突getForumParent()' Forum.hh:161:21：错误：覆盖 'virtual _objref_Forum* _impl_Forum::getForumParent()' ForumImpl.h:20:19：错误：成员函数 'virtual ForumImpl ForumImpl::getForumParent 的抽象返回类型无效()' ForumImpl.h:6:7: 注意：因为以下虚函数在 'ForumImpl' 中是纯函数：Forum.hh:162:16: 注意：virtual void _impl_Forum::setForumParent(Forum_ptr) ForumImpl.h:21： 14：错误：不能将参数'f'声明为抽象类型'ForumImpl'ForumImpl.h：6：7：注意：因为类型'ForumImpl'具有纯虚函数ForumImpl.cpp：在成员函数'virtual ForumImpl ForumImpl::getForumParent()'：ForumImpl.cpp:7:11：错误：成员函数'virtual ForumImpl ForumImpl::getForumParent()'的抽象返回类型无效ForumImpl.h:6:7：注意：因为'ForumImpl'类型具有纯虚拟函数 ForumImpl.cpp：在全局范围内：ForumImpl.cpp:8:42：错误：无法将参数“f”声明为抽象类型“ForumImpl”ForumImpl.h:6:7：注意：因为类型“ForumImpl”具有纯虚函数

最糟糕的是我不知道为什么这段代码会给我这样的错误......我的意思是，我定义了所有`ForumImpl`函数......所以它们中的任何一个现在都是虚拟的。我花了好几个小时试图弄清楚这有什么问题，但不知道:(

有人可以帮忙吗？**我的文件：[http](http://www6.zippyshare.com/v/69552292/file.html) ://www6.zippyshare.com/v/69552292/file.html我在这个 tar 存档中添加了一个 Makefile，所以只需运行命令“make all”，这将完成所有操作**。

如果有人能告诉我为什么会出现这些错误以及如何解决这个问题，我将非常感激，我真的需要它。干杯：）

**编辑：**

我改变了我的 ForumImpl.h 和 ForumImpl.cpp：

```
#ifndef __FORUMIMPL_H__
#define __FORUMIMPL_H__

#include "Forum.hh"

class ForumImpl : public POA_Forum
{
    private :

        long id;
        char *name;
        ForumImpl *parent;

    public :

        long getForumID();
        void setForumID(long id);
        char* getForumName();
        void setFroumName(const char* name);
        ForumImpl* getForumParent();
        void setForumParent(ForumImpl *f);
};

#endif

#include "ForumImpl.h"
long ForumImpl::getForumID(){}
void ForumImpl::setForumID(long id){}
char* ForumImpl::getForumName(){}
void ForumImpl::setFroumName(const char* name){}
ForumImpl* ForumImpl::getForumParent(){}
void ForumImpl::setForumParent(ForumImpl *f){} 
```

但这给了我那些错误：

> g++ -c ForumImpl.cpp -IMNIORB_HOME/include -IMNIORB_HOME/include/omniORB4 在从 ForumImpl.cpp:1:0 包含的文件中：ForumImpl.h:20:20: 错误：'virtual ForumImpl* ForumImpl:: 的无效协变返回类型getForumParent()' Forum.hh:161:21: 错误：覆盖 'virtual _objref_Forum* _impl_Forum::getForumParent()'</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:13:46.873

的签名`ForumImpl::getForumParent()`应如下所示：

```
Forum_ptr getForumParent(); 
```

有关更多信息，您应该[从 OMG 网站下载 IDL 到 C++ 的映射文档](http://www.omg.org/spec/CPP/1.3/)。还可以查看 Henning 和 Vinowski 的书*Advanced CORBA Programming with C++*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:26:34.613

ForumImpl 中的方法签名应与 Forum.hh 中生成的基类匹配。他们应该只返回论坛。我不详细了解 omniorb，但 TAO 有数百个使用它的示例，例如我们的银行示例，您也可以在[https://svn.dre.vanderbilt.edu/viewvc/Middleware/trunk/在线找到它TAO/examples/Simple/bank/](https://svn.dre.vanderbilt.edu/viewvc/Middleware/trunk/TAO/examples/Simple/bank/)

# extjs - 如何将条件滚动添加到 extjs 视口

> ID：11763043
> 
> 赞同：1
> 
> 时间：2012-08-01T15:54:23.640
> 
> 标签：extjs, extjs4

我有以下容纳我的应用程序的视口...

```
Ext.define('my.view.Viewport', {
    extend: 'Ext.Viewport',
    id: 'viewport',
    layout: 'border',
    autoDestroy: true,

    initComponent: function() {
        this.items = [
            {xtype: "widget.HeaderContainer"},
            {xtype: "widget.BodyContainer"},
            {xtype: "widget.FooterContainer"}
        ];
        this.callParent(arguments);
    }
}); 
```

当浏览器窗口调整大小时，所有组件都很好地填充了空间，但是当窗口低于 1024x768 时，我希望出现滚动条。视口中的所有组件都应该像窗口是 1024x768 一样绘制（如果窗口视图再次大于 1024x768，然后消失）

希望这是有道理的。可能是一些简单的事情，但我无法找到一种方法来做到这一点而不会太麻烦。

感谢您的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:01:31.973

根据 Ext Docs：[视口不提供滚动，因此视口中的子面板应在需要时使用 autoScroll 配置提供滚动。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.Viewport)

您必须注意构造函数或 initComponent 上每个组件的大小，并执行类似的操作

```
constructor:function(config){
    var config= Ext.apply({},config,{    
        autoscroll:((window.innerWidth<1024) && window.innerHeight < 768))?true:false
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:32:19.963

这是我所做的：将页眉和页脚高度固定为特定的 px 值。中心区域有一个带有 layout=fit 的容器（尽管这不是必需的）。此容器将主应用程序视图作为一个项目获取，这意味着该视图将填充视口分配给它的任何空间。放入中心区域容器的视图的 autoScroll 属性设置为 true，并且不会指定高度或宽度。它也不是子组件。这是一个[http://jsfiddle.net/dbrin/UqfFH/](http://jsfiddle.net/dbrin/UqfFH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T22:25:50.097

执行此操作的正常方法是在视口*children*`minHeight`上使用和配置。`minWidth`

 *您还必须确保将`autoScroll: true`配置包含在孩子身上。

例如：对于这些中的每一个：

```
this.items = [
    {xtype: "widget.HeaderContainer"},
    {xtype: "widget.BodyContainer"},
    {xtype: "widget.FooterContainer"}
]; 
```

一个简单的`minWidth: 1024`配置就可以了。

根据您的和是否为静态高度，`minHeight`配置会有点棘手。`HeaderContainer``FooterContainer`

如果它们是，那么您可以简单地`minHeight`在`BodyContainer`其上包含一个相当于`768 - staticHeaderHeight - staticFooterHeight`.

如果您希望页眉或页脚也可以单独调整大小（它们不是静态大小），您将不得不通过在其中一个兄弟姐妹的高度发生变化时重置最小尺寸来跳过一些环节。*

# jquery - 从输入 jquery 中删除 HTML

> ID：11763045
> 
> 赞同：0
> 
> 时间：2012-08-01T15:54:30.427
> 
> 标签：jquery

如果我从文本输入中获取 .val() ，我如何确保那里没有 HTML 而只有纯文本？

我正在编写一个小型聊天程序，但我不希望用户能够输入 HTML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:14:25.143

您可以通过获取他们输入的 HTML 的 textContent 来做到这一点：

```
// Get the value of the input
var inputText = $('#my-input').val();
// Store only the text and no HTML elements.
inputText = $(inputText)[0].textContent; 
```

这是一个例子：

[http://jsfiddle.net/thom801/5A3sQ/1/](http://jsfiddle.net/thom801/5A3sQ/1/)

# ajax - 在 mvc 中将表单的 ajax 脚本（什么控制器）放在哪里？

> ID：11763046
> 
> 赞同：2
> 
> 时间：2012-08-01T15:54:31.577
> 
> 标签：ajax, model-view-controller, symfony-1.4, coupling, cohesion

这是我的情况：我有一个视图（我们称之为视图**V**），它带有一个带有多个组合框的表单，用于选择一些参数。

我想通过 AJAX 调用动态加载这些组合框的选项（在组合框中选择一个项目将加载其他带有数据的项目）

每个组合框向框架上的不同控制器（依次调用不同模型以获取数据）发出 AJAX 请求。让我们将这些控制器称为**C1**、**C2**、**C3**和模型**M1**、**M2**、**M3**。

**C1**、**C2**和**C3**上的这些 AJAX 脚本*很可能*在未来的其他视图上使用

但我怀疑这是否是正确的方法。我把那些 AJAX 脚本放在哪里？在每个控制器或单独的控制器上（可能称为 FormAPI 或类似的东西）

在每个控制器上放置一个 ajax 脚本我将 V 与**C1**、**C2**和**C3**耦合，而为三个请求制作一个控制器只会将我的视图 V 与一个控制器耦合。此外，从我的角度来看，这样的控制器将具有高度的凝聚力。

但是，我可能不会保持我的代码 DRY，因为**C1**、**C2**和**C3**已经有一些逻辑来接收“获取**M1**、**M2**和**M3**的列表”类型的请求，我可以将其呈现为 JSON 并将其返回到视图**V**

如果我有另一个视图**V2**需要对**C1**、**C2**、**C3**、 ... **CN**的请求，将来会发生什么？我想很快我的代码将是“意大利面条耦合”

你怎么看？

另一个问题：我是否应该在 M1、M2、M3 上有逻辑来获取数组和项目列表？例如，如果 M1 有多个 M2 实例，创建方法 M1->getM2asArray() 是否正确

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:13:24.487

我有一个类似的案例，但它不是带有自动完成功能的组合框，所有脚本都是脚本文件夹，引用 mvc 视图中的脚本文件。

我的 MVC 上有几个自动完成功能，我添加了一个名为它`AutoCompleteController`的控制器（返回 Json 数据）并在布局页面上添加了 jQuery 和我的自定义脚本，因此它们可以在所有页面上使用（在我的应用程序中，90% 的页面都有自动完成）

我的自动完成控制器示例

```
namespace ADM.Ntrasal.Web.UI.Browser.Controllers
{
    public class AutoCompleteController : Controller
    {
         private readonly IRepositories Repositories;
         public AutoCompleteController()
        {  //Prefare to use Ioc but for simplicity
            this.Repositories = new Repositories();
        }
        //
        // GET: /AutoComplete/

        public ActionResult EmployeeNames(string term)
        {
            var count = 10;
            var UserProfileRepostery = this.Repositories.Create<UserProfile>();

            var result = UserProfileRepostery.GetAll().Where(x =>
                  x.Employee_Name.ToLower().Contains(term.ToLower()))
              .Take(count).Select(x =>
                  new
                  {
                      label = x.Employee_Name,
                      id = x.UserID
                  });
            return Json(result, JsonRequestBehavior.AllowGet);
        }

    }
} 
```

我做了一个 AutoCompleteViewModule

```
public class AutoCompleteViewModule
{
public AutoCompleteViewModule()
{
    //default values
    AutocompleteCount = 10;
    Type = AutoCompleteTypes.EmployeeNames;
}
public string Id { get; set; }
public string Name { get; set; }
public string Field { get; set; }
public int AutocompleteCount { get; set; }
public AutoCompleteTypes Type { get; set; } 
```

我添加了一个编辑器模板来管理自动完成输出 html

```
@model ADM.Ntrasal.UI.Web.Browser.Models.AutoCompleteViewModule
 <input type="text"  name="AutocompleteTextBox"
     data-target='@Model.Field'
     data-autocomplete="@Url.Action(@Model.Type.ToString(), 
     "AutoComplete", new { count =    @Model.AutocompleteCount })"
     value='@Model.Name' />
@Html.Hidden(@Model.Field) 
```

如果我不想为自动完成添加所需的脚本，我会将其放在可选部分中，并在需要自动完成的任何视图上引用该脚本。

我将在我的观点中使用以下内容：

```
@Html.EditorFor(x=>@Model.AutocompleteField) 
```

我在博客上详细介绍过，如果您觉得有帮助，我可以放一个链接

对于第二个问题，我将按照您的建议获取每个模型中的数据并在我的自动完成控制器中调用它，以便为自动完成模板（或部分视图）提供所需的数据

# c# - C# xml 序列化 - 属性的多种选择

> ID：11763048
> 
> 赞同：0
> 
> 时间：2012-08-01T15:54:45.823
> 
> 标签：c#, xml, serialization, xml-serialization

我有一个变量失败，它可以有三个值：通过、失败或错误。我希望在序列化期间发生的是基于值创建一个元素。对于通过，我想忽略该元素。对于失败，我想要一个失败元素。对于错误，我想要一个错误元素。如何才能做到这一点？

在 Test 类中，有一个名为 m_steps 的步骤列表。在 Step 中有一个名为 m_failure 的变量，它保存通过、失败或错误。我希望 m_steps 创建的元素是非元素（通过）、失败或错误。

```
[XmlRoot("testsuite")]
public class Suite
{
    [XmlAttribute("name")]
    public string m_name;

    [XmlElement("testcase")]
    public List<Test> m_tests;

    [XmlIgnore]
    public string m_timestamp;

public class Test
{
    [XmlAttribute("name")]
    public string m_name;

    [XmlElement("failure")] // want to be ignore, failure or error instead of just failure
    public List<Step> m_steps;

    [XmlAttribute("assertions")]
    public int m_assertions;
}

public class Step
{
    [XmlIgnore]
    public string m_failure; // holds passed, failure, or error

    [XmlTextAttribute]
    public string m_message;

    [XmlIgnore]
    public string m_image;

    [XmlAttribute("type")]
    public string m_type;
} 
```

寻找：

至：

```
<?xml version="1.0" encoding="UTF-8"?>
-<testsuite name=" SimpleCalculationsSuite" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
  -<testcase name="Add 3+4" assertions="1"></testcase>
  -<testcase name="Fail 3-4" assertions="1"> 
     <failure type="Text">The control text is not correct. Expected-7 Actual--1</failure> 
   </testcase> 
  -<testcase name="Error 3*4" assertions="1"> 
     <error type="Click">The * button was not found</error> 
 </testsuite> 
```

从：

```
Suite: SimpleCalculationsSuite
Test:Add 3+4
Passed:Text:The control text, 7, is correct.
Test:Fail 3-4
Failed:Text:The control text is not correct. Expected-7 Actual--1
Test:Error 3*4
Error:Click: The * button was not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:00:48.557

简短回答：http: [//msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:40:27.060

我最终修改了 Test 以包含错误列表。有了这个，我能够在 XML 文件中同时出现故障和错误节点。我还必须修改一些程序以允许这种情况发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:01:23.723

我不会使用您示例中的相同类，我将举一个我自己的小例子。

您需要实现方法 public bool ShouldSerialize* *Name* *() 其中 Name 是您希望控制其序列化的属性的名称。

例如，我有这个类：

```
[Serializable]
public class SerializeExample
{
    public string ResultType { get; set; }

    public string Error { get; set; }

    public string Failure { get; set; }

    public List<string> Steps { get; set; }

    public bool ShouldSerializeError()
    {
        return "Error".Equals(ResultType);
    }

    public bool ShouldSerializeFailure()
    {
        return "Failure".Equals(ResultType);
    }

    public bool ShouldSerializeSteps()
    {
        return ShouldSerializeError() || ShouldSerializeFailure();
    }
} 
```

如果我有这个类实例：

```
SerializeExample ex1 = new SerializeExample { ResultType = "Success" }; 
```

然后，只有这个 XML 被序列化：

```
<SerializeExample>
  <ResultType>Success</ResultType>
</SerializeExample> 
```

如果我创建这个其他类并序列化它：

```
SerializeExample ex2 = new SerializeExample { ResultType = "Error", Error = "Invalid data from user", Steps = new List<string>() }; 
```

然后，生成此 XML。

```
<SerializeExample>
  <ResultType>Error</ResultType>
  <Error>Invalid data from user</Error>
  <Steps />
</SerializeExample> 
```

# mysql - 从 table1 插入或替换到 table2

> ID：11763052
> 
> 赞同：0
> 
> 时间：2012-08-01T15:55:01.673
> 
> 标签：mysql, insert

我想使用 'insert into' mysql 命令将 table1 的内容移动到 table2，但 table2 可能具有“相同”的主键。执行插入语句时，我想用 table1 的记录替换 table2 的记录（具有相同的主键）。我可以使用“或替换”来实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T15:59:43.340

尝试这样的事情（不知道你的确切架构，这只是一个例子）

```
INSERT INTO tbl_a (a,b,c)
SELECT a,b,c FROM tbl_b 
ON DUPLICATE KEY UPDATE b = tbl_b.b, c = tbl_b.c 
```

从文档中[`INSERT on DUPLICATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

> 如果您指定 ON DUPLICATE KEY UPDATE，并且插入的行会导致 UNIQUE 索引或 PRIMARY KEY 中的重复值，则会执行旧行的 UPDATE

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:00:48.790

使用带有 ON DUPLICATE KEY UPDATE 子句的 INSERT ... SELECT：

```
INSERT INTO table2 
  SELECT * FROM table1 ON DUPLICATE KEY UPDATE table2.field1 = table1.field1 
```

*注意*使用 * 为简洁起见，但在 update 子句中您*必须*单独指定字段，并且在 insert 和 select 子句中也*应该*这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:14:20.097

如果 table2 中与 table1 中的键重复的主键在其他地方没有被外键引用，最简单的方法是使用[REPLACE ... INTO](https://dev.mysql.com/doc/refman/5.5/en/replace.html)：

“REPLACE 的工作方式与 INSERT 完全相同，只是如果表中的旧行与 PRIMARY KEY 或 UNIQUE 索引的新行具有相同的值，则在插入新行之前删除旧行。”

所以，你会做这样的事情：

```
REPLACE INTO table2 (a, b, c)
SELECT a, b, c FROM table1; 
```

它将为您整理出键，因此与行`table2`具有相同 ID 的任何行都会被的行数据`table1`覆盖。`table1`

# javascript - Nodejitsu：有没有办法用密码保护应用程序？

> ID：11763061
> 
> 赞同：2
> 
> 时间：2012-08-01T15:55:29.130
> 
> 标签：javascript, authentication, http-authentication, nodejitsu

使用 Nodejitsu：有没有办法用密码保护应用程序？我不确定我是否可以部署一个 .htaccess 左右...我只需要保护该网站免受意外访问者的影响

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T21:23:41.367

```
//Load express
var express = require('express');

//User validation
  var auth = express.basicAuth(function(user, pass) {     
   return (user == "super" && pass == "secret");
  },'Super duper secret area');

 //Password protected area
 app.get('/admin', auth, routes.admin); 
```

# nhibernate - NH 3.3 Composite-ID mapping by code

> ID：11763066
> 
> 赞同：5
> 
> 时间：2012-08-01T15:55:43.597
> 
> 标签：nhibernate, nhibernate-mapping

![图表](../Images/645e6c1635df6f592fc85d20aea908a3.png)

我在这里拉头发，试图弄清楚如何映射下面列出的 UsersRoles 表。我的秃头看起来不太好，所以请帮忙:)

//这里是实体

```
public class UsersRole
{
    public UsersRole() { }
    public virtual User User { get; set; }
    public virtual Role Role { get; set; }
    public virtual System.Guid UserId { get; set; }
    public virtual System.Guid RoleId { get; set; }

} 
```

//这是目前为止的映射

```
public class UsersRoleMap : ClassMapping<UsersRole>
{
    public UsersRoleMap()
    {
        Table("UsersRoles");
        Lazy(true);

       // ComponentAsId(); How does this work??

        Property(x => x.UserId, map => map.Column(c =>
            {
                c.Name("UserId");
                c.NotNullable(true);
                c.Length(30);
                c.SqlType("uniqueidentifier");
            }));
        Property(x => x.RoleId, map => map.Column(c =>
            {
                c.Name("RoleId");
                c.NotNullable(true);
                c.Length(30);
                c.SqlType("uniqueidentifier");
            }));
    }
} 
```

请参阅 ComponentAsId 映射中的注释

如果有人能让我走上正轨，请提前感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T16:15:54.217

您正在寻找的方法称为`ComposedId`：

```
public class UsersRoleMap : ClassMapping<UsersRole>
{
    public UsersRoleMap()
    {
        ComposedId(map => 
        {
            map.Property(x => x.UserId);
            map.Property(x => x.RoleId);
        });
    }
} 
```

回答您有关如何`ComponentAsId`工作的问题。你应该有以下类来使用`ComponentAsId`方法

```
public class UsersRoleId
{
    public System.Guid UserId { get; set; }
    public System.Guid RoleId { get; set; }
}

public class UsersRole
{
    public virtual User User { get; set; }
    public virtual Role Role { get; set; }
    public virtual UsersRoleId Id { get; set; }
} 
```

现在您可以将 UsersRole.Id 映射为`ComponentAsId`

```
public class UsersRoleMap : ClassMapping<UsersRole>
{
    public UsersRoleMap()
    {
        ComponentAsId(x => x.Id);
    }
} 
```

*PS*：为什么需要映射`UsersRoles`表？我建议您将用户映射到角色作为多对多关系。

```
public class UsersMap : ClassMapping<User>
{
    public UsersMap()
    {
        Set(x => x.Roles, x => { }, x => x.ManyToMany());
    }
}

public class RolesMap : ClassMapping<Role>
{
    public RolesMap()
    {
        Set(x => x.Users, x => { }, x => x.ManyToMany());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:13:57.613

你真的需要`UsersRole`作为一个实体吗？通常，当您在数据库表中有一些额外的列时，您只创建一个多对多实体，除了两个 id。

此外，即使您需要创建一个单独的实体，您也不需要拥有`UserId`和`RoleId`属性。拥有`User`和`Role`属性就足以与 NHibernate 进行映射。

请查看多对多映射，并像这样定义您的用户实体：

```
public class User
{
    // other properties
    public virtual IList<Role> Roles { get; set; }
} 
```

现在您可以使用映射来映射该角色属性[`ManyToMany`](http://notherdev.blogspot.com/2012/01/mapping-by-code-onetomany-and-other.html)：

```
Bag(x => x.Roles, collectionMapping =>
{
    collectionMapping.Table("UsersRole");
    collectionMapping.Key(k => k.Column("RoleId"));
}, map => map.ManyToMany(p => p.Column("UserId"))); 
```

这里还有一个[例子](https://stackoverflow.com/questions/9573326/nhibernate-3-2-many-to-many-mapping-by-code)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T00:03:45.477

以下是您可以使用 NHibernate Mapping-By-Code 实现复合键映射的两种方法。

```
ComponentAsId(x => x.Key, m =>
{
    m.Property(x => x.KeyPart);
    // etc.
});

ComposedId(m =>
{
    m.Property(x => x.KeyPart);
    // other key parts
}); 
```

# jquery - jquery从点击传递数据

> ID：11763070
> 
> 赞同：0
> 
> 时间：2012-08-01T15:55:50.367
> 
> 标签：jquery, click, live

我正在尝试将数据从一个单击功能传递到另一个单击功能，但不知道如何制作它。我有多个 div，但我将向您展示两个 div 的主要思想：

```
<div class="classname" id='prev'></div>
<div class="classname" id='next'></div>

$('#next).click(function() { 
   $('.classname').trigger('click')

})

$('#prev).click(function() { 
   $('.classname').trigger('click')

})

$('.classname').live('click', function () {
 [a lot of code here depending on who called click]

}) 
```

现在，我想传递一个这样的变量（或者以某种方式熟悉

```
$('#prev').click(function() { 
   a = 1;
   $('.classname').trigger('click', a)

})

$('.classname').live('click', function (a) {
 if ( a == 1 ) { do something } else { do something else }
 [a lot of code here depending on who called click]

}) 
```

如何根据“a”变量的值将“a”变量发送到实时点击以使其具有不同的 baheva？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:58:14.983

我想你正在寻找这个（***见[演示](http://jsfiddle.net/7y38U/1/)***）：

```
$('#prev').click(function () {
    $('.classname').trigger('click', [1])
});

$('.classname').live('click', function (event, param) {
    if (param == 1) {
        alert('do something');
    } else {
        alert('do something else');
    }
})​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:04:42.407

您*非常*接近，传递给事件的额外参数需要表示为数组。

```
$('.classname').trigger('click', a) 
```

本来应该

```
$('.classname').trigger('click', [a]) 
```

然后可以将其作为该事件处理程序上的附加参数进行访问

```
$('.classname').live('click',function(e,a){
    // a is whatever was passed into the first element of the array above
}) 
```

现场示例：http: [//jsfiddle.net/4KRFV/](http://jsfiddle.net/4KRFV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:04:03.740

抱歉，但我认为您这样做的方式过于复杂。从两个事件处理程序调用一个公共函数。根据您调用它的事件处理程序使用不同的参数。远离使用 .trigger 和 .live。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:59:18.270

这已经是可能的了！示例代码来自：[http ://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

```
$("p").click( function (event, a, b) {
// when a normal click fires, a and b are undefined
// for a trigger like below a refers to "foo" and b refers to "bar"

} ).trigger("click", ["foo", "bar"]); 
```

您还可以创建一个自定义`event`对象并在其中发送一些数据：

```
var event = jQuery.Event("logged");
event.user = "foo";
event.pass = "bar";
$("body").trigger(event); 
```

或者您可以使用此替代方法：

```
$("body").trigger({
    type:"logged",
    user:"foo",
    pass:"bar"
}); 
```

# javascript - Google Maps/Fusion Tables Javascript HTML 不会显示/可视化所有多边形数据（通过色标）

> ID：11763074
> 
> 赞同：2
> 
> 时间：2012-08-01T15:55:59.210
> 
> 标签：javascript, html, api, google-maps, google-fusion-tables

我还有一周的时间来完成这个项目，所以非常感谢任何帮助。我正在尝试让我的 javascript HTML 代码正常工作。出于某种原因，并不是所有的多边形颜色值都在谷歌地图中进行样式化/可视化，因为一些多边形颜色仍然是默认的红色，因此它们的值没有被直观地显示。我不确定这是代码错误还是内置样式限制。我希望有人可以为我提供更新的 javascript 代码，以便它工作。

这是链接，右键单击源代码的页面。 [http://jonkowba.weebly.com/new-page.html](http://jonkowba.weebly.com/new-page.html)

谢谢，乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:08:05.533

通过 javascript API 应用的样式限制为 5 种。

从[文档](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)中：

> 限制
> 
> 您可以使用 Maps API 将最多五个 Fusion Tables 图层添加到地图中，其中一个可以使用最多五个样式规则进行样式设置

# android - 我可以在 PhoneGap 中为原生 Android 和 iOS 应用程序使用 Perl 脚本吗？

> ID：11763078
> 
> 赞同：1
> 
> 时间：2012-08-01T15:56:23.190
> 
> 标签：android, ios, perl, html, cordova

我是 PhoneGap 的新手。我正在为 Android 和 iOS 构建一个原生应用程序。并且想知道，我是否可以在 Perl 中使用 Perl 脚本？如果是，我如何在 PhoneGap (Android) Eclipse 中添加它们？如果没有，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:51:53.160

我认为您不能将 Perl 脚本直接添加到 PhoneGap 中。即使您找到某种方法，它也绝对不会跨平台兼容，这是使用PhoneGap的主要原因之一。

您的解决方案是使用 JavaScript 编写代码或使用 Ajax 请求来联系您在 Web 上运行的 Perl 脚本。在后一种情况下，如果用户在飞行模式或没有网络信号的情况下使用应用程序，则应用程序的一部分将无法工作。

# cloud-foundry - 如果安装了 VCAP 的 VM 的 IP 发生更改，CloudController 不会启动

> ID：11763083
> 
> 赞同：1
> 
> 时间：2012-08-01T15:56:58.707
> 
> 标签：cloud-foundry

我在 EC2 上托管的 64 位 Ubuntu 10.04 服务器 VM 上安装了 VCAP。我按照[https://github.com/cloudfoundry/oss-docs/tree/master/vcap/single_and_multi_node_deployments_with_dev_setup](https://github.com/cloudfoundry/oss-docs/tree/master/vcap/single_and_multi_node_deployments_with_dev_setup)中提到的步骤进行操作。请注意，这是一个单节点部署，所有 CloudFoundry 组件都部署在一个实例上。

我启动和停止了 VCAP，所有组件都按预期运行，包括 CloudController。

## 问题

我停止了 EC2 实例，然后再次启动它。然后我执行了启动 VCAP 的命令。但状态显示为 - CloudController 已停止，所有其他组件正在运行。

**一些附加信息**- 每当 EC2 实例重新启动时，其公共和私有 IP 都会更改。我做了一些谷歌搜索，并意识到 devsetup 脚本（参考[https://github.com/cloudfoundry/oss-docs/tree/master/vcap/single_and_multi_node_deployments_with_dev_setup](https://github.com/cloudfoundry/oss-docs/tree/master/vcap/single_and_multi_node_deployments_with_dev_setup)）在各个地方对 IP 进行了硬编码。因此，当我重新启动 EC2 实例时，IP 地址会更改并且 VCAP 不会启动。

我正在寻找一些关于如何更正缓存 IP 的信息？

谢谢， 安基特

> **在原始帖子中添加更多信息**

**EC2 实例重启后的原始 IP** 10.142.81.107
**新 IP** 10.142.159.0

**执行以下命令将 VCAP 指向新 IP：**
cd ~/cloudfoundry/.deployments/devbox/config/
sed -i 's/10.142.81.107/10.142.159.0/g' *.yml

**结果**云控制器未启动。所有其他组件都启动了。

**~/cloudfoundry/.deployments/devbox/log/cloud_controller.log**
的内容 Rails 错误：无法访问日志文件。请确保存在并且是 chmod 0666。日志级别已提高到 WARN 并且输出定向到 STDERR，直到问题得到解决。耙中止！无法连接到服务器：连接被拒绝 服务器是否在主机“10.142.159.0”上运行并接受端口 5432 上的 TCP/IP 连接？

任务：TOP => db:migrate（通过使用 --trace 运行任务查看完整跟踪） Rails 错误：无法访问日志文件。请确保存在并且是 chmod 0666。日志级别已提高到 WARN 并且输出定向到 STDERR，直到问题得到解决。/home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/connection_adapters/postgresql_adapter。 rb:950:in `initialize': could not connect to server: Connection refused (PGError) Is the server running on host "10.142.159.0" and accepting TCP/IP connections on port 5432? from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/connection_adapters/postgresql_adapter.rb:950:in`new' 来自 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/ lib/active_record/connection_adapters/postgresql_adapter.rb:950:in`connect' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/connection_adapters/postgresql_adapter.rb:246:in`从 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/connection_adapters 初始化/postgresql_adapter.rb:25:in `new' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/connection_adapters/postgresql_adapter.rb:25:in`postgresql_connection' 来自 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0 .14/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `new_connection' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/connection_adapters/abstract/connection_pool.rb:237:in`checkout_new_connection' 来自 /home/ubuntu/cloudfoundry/cloud_controller/cloud_controller/config/initializers/fiber_connection_pool.rb:42:in`checkout' from /home/ubuntu/cloudfoundry/cloud_controller/cloud_controller/config/initializers/fiber_connection_pool.rb:26:in`来自 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/connection_adapters 的连接/abstract/connection_pool.rb:317:in `retrieve_connection' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/connection_adapters/abstract/connection_specification.rb:97:in`retrieve_connection' 来自 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord -3.0.14/lib/active_record/connection_adapters/abstract/connection_specification.rb:89: `connection' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/base.rb:602:in`inquoted_table_name' 来自 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby /gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/relation/query_methods.rb:275:in`build_select' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/relation/query_methods.rb:189:in`build_arel' 来自 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/relation /query_methods.rb:149:in `arel' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/relation/calculations.rb:169:in`perform_calculation' 来自 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0 .14/lib/active_record/relation/calculations.rb:152:in `calculate' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/relation/calculations.rb:58:in`count' 来自 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9 .1/gems/activerecord-3.0.14/lib/active_record/relation.rb:92:in `empty?' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.14/lib/active_record/relation.rb:100:in`any？来自/home/ubuntu/cloudfoundry/cloud_controller/cloud_controller/config/final_stage/check_database.rb:3:in`<top (required)>' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.14/lib/active_support/dependencies.rb:242:in`需要'来自/home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.14/lib/active_support/dependencies .rb:242:in `block in require' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.14/lib/active_support/dependencies.rb:227:in`load_dependency' 来自 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.14 /lib/active_support/dependencies.rb:242:in `require' from /home/ubuntu/cloudfoundry/cloud_controller/cloud_controller/config/final_stage/activate.rb:6:in`'来自 /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/ activesupport-3.0.14/lib/active_support/dependencies.rb:242:in `require' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.14/lib/active_support/dependencies.rb:242:in`block in require' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/ gems/1.9.1/gems/activesupport-3.0.14/lib/active_support/dependencies.rb:227:in`load_dependency' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.14/lib/active_support/dependencies.rb:242:in`需要'来自/home/ubuntu/cloudfoundry/cloud_controller/cloud_controller/config/environment.rb:17：`<top (required)>' from /home/ubuntu/cloudfoundry/cloud_controller/cloud_controller/config.ru:3:in`需要'来自/home/ubuntu/cloudfoundry/cloud_controller/cloud_controller/config.ru:3:in `block in <main>' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/rack-1.2.5/lib/rack/builder.rb:46:in`instance_eval'来自/home/ ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/rack-1.2.5/lib/rack/builder.rb:46:in`initialize' from /home/ubuntu/cloudfoundry/cloud_controller/cloud_controller/config.ru:1:in`新的'来自/home/ubuntu/cloudfoundry/cloud_controller/cloud_controller/config.ru:1:in `<main>' from /home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:36:in`eval'来自/home/ubuntu/cloudfoundry/.deployments/devbox/deploy/rubies/ruby-1.9.2-p180/lib/ ruby/gems/1.9.1/gems/thin-1.3.1/lib/rack/adapter/loader.rb:36:in `load' from /home/ubuntu/cloudfoundry/cloud_controller/cloud_controller/bin/cloud_controller:79:in`'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:46:29.643

解决这个问题的最简单方法是用户 sed 修改 ~/cloudfoundry/.deployments/devbox/config/ 中所有 .yml 配置文件中的 IP 地址

例如，要将 192.168.1.100 更改为 192.168.1.200 使用；

```
sed -i 's/192\.168\.1\.100/192.168.1.200/g' *.yml 
```

记得之后也要重新启动 vcap！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T05:19:55.873

那么问题出在PostgreSQL上。应该更改 PostgreSQL 的配置文件，然后重新启动 PostgreSQL。详细步骤如下：

**在 IP 更改的情况下进行修复**

```
~/cloudfoundry/vcap/dev_setup/bin/vcap_dev stop
cd ~/cloudfoundry/.deployments/devbox/config/
sed -i 's/<OLDIP>/<NEWIP>/g' *.yml
vi /etc/postgresql/8.2/main/postgresql.conf # CHANGE THE IP ADDRESS AT THE END
vi /etc/postgresql/9.0/main/postgresql.conf # CHANGE THE IP ADDRESS AT THE END
sudo /etc/init.d/postgresql-8.4 restart
~/cloudfoundry/vcap/dev_setup/bin/vcap_dev start
~/cloudfoundry/vcap/dev_setup/bin/vcap_dev status 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T20:07:18.887

您可以通过在 conf 目录中运行以下命令简单地将所有本地 IP 更改为 0.0.0.0（包括在 PostgreSQL 配置文件中）

```
sed -i 's/XXX\.XXX\.XXX\.XXX/0\.0\.0\.0/g' *.yml 
```

# java - 解析从js发送到Java的json字符串时出错

> ID：11763088
> 
> 赞同：0
> 
> 时间：2012-08-01T15:57:13.483
> 
> 标签：java, javascript, json

我正在尝试将 json 字符串从 js 发送到 servlet。我使用 ajax jquery 发布到 servlet。

我可以看到 servlet 帖子被调用，但是当我在 java 中检索 json 字符串时发生异常，我错过了什么

**Javascript方面：**

```
var jsonText = JSON.stringify(SomeString);

    $.ajax({
        dataType: 'json',
        url: fullpath,
        type: 'POST',
        data: jsonText 
  }); 
```

Java端：

```
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.IOException;
import java.io.PrintWriter;

import com.json.JSONException;
import com.json.JSONObject;
import com.json.JSONArray; 
```

**在后**

```
 response.setContentType("application/json");    
JSONObject jObj = new JSONObject(request.getParameter("jsonText"));//Null pointer exception 
```

**错误：**

```
 java.lang.NullPointerException
        at java.io.StringReader.<init>(StringReader.java:33)
        at com.json.JSONTokener.<init>(JSONTokener.java:84)
        at com.json.JSONObject.<init>(JSONObject.java:314) 
```

JSON字符串：

```
{ "CustomerDetails": [{'name':'Amy','age':'23'},{'name':'Amj','age':'25'},{'name':'Amg','age':'27'}]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:06:41.893

在您的`POST`中，没有`jsonText`参数。您只是将 JSON 字符串作为帖子正文发布。

尝试像这样发送它：

```
$.ajax({
    dataType: 'json',
    url: fullpath,
    type: 'POST',
    data: {jsonText: jsonText}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:05:09.133

这表明没有名为 jsonText 的 POST 参数

# facebook - Joomla 中的 Facebook 元标记：使用“阅读更多”图像和文本

> ID：11763091
> 
> 赞同：0
> 
> 时间：2012-08-01T15:57:20.880
> 
> 标签：facebook, facebook-graph-api, user-interface, joomla, content-management-system

我试图将 facebook 的“喜欢”按钮添加到我的 joomla 网站。目前我使用插件将元标记添加到我的文章中。问题在于它非常手动。我想要做的是使用我文章的“阅读更多”字段中的信息来填充 Facebook 的“喜欢”评论和图像。我在整个网站中都使用“read me”介绍文本，这样可以很容易地将我的旧文章与“like”按钮集成在一起，这也意味着对于任何新文章，我仍然只需要编写主要文章和“阅读更多”信息。

Havent 设法找到任何提供此功能的插件。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:18:12.223

我个人建议为您的文章使用[K2 扩展](http://getk2.org/)。每篇文章都包含一个 Facebook 点赞、推文和 Google+ 按钮。设置起来也不会很麻烦，您可以将所有默认的 Joomla 文章导入到组件中，因此您不必再次创建每篇文章。

# java - 尝试构建正确的 SOAP 请求

> ID：11763092
> 
> 赞同：13
> 
> 时间：2012-08-01T15:57:23.060
> 
> 标签：java, android, xml, soap, android-ksoap2

我一直在努力尝试使用 ksoap2 for Android 构建正确的 SOAP 请求，但没有成功。理想的请求如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <AuthorizationToken xmlns="http://www.avectra.com/2005/">
      <Token>string</Token>
    </AuthorizationToken>
  </soap:Header>
  <soap:Body>
    <ExecuteMethod xmlns="http://www.avectra.com/2005/">
      <serviceName>string</serviceName>
      <methodName>string</methodName>
      <parameters>
        <Parameter>
          <Name>string</Name>
          <Value>string</Value>
        </Parameter>
      </parameters>
    </ExecuteMethod>
  </soap:Body>
</soap:Envelope> 
```

我正在使用以下代码生成我的请求：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD);
    request.addProperty("serviceName", SERVICENAME);
    request.addProperty("methodName", METHODNAME);

    SoapObject nestedParameters = new SoapObject(NAMESPACE, "parameters");
    SoapObject param = new SoapObject(NAMESPACE, "Parameter");
    param.addProperty("Name", name);
    param.addProperty("Value", value);
    nestedParameters.addSoapObject(param);
    request.addSoapObject(nestedParameters);

    SoapSerializationEnvelope envelope = 
            new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    envelope.dotNet = true;
    envelope.implicitTypes = true;

    envelope.headerOut = new Element[1];
    Element header = new Element().createElement(NAMESPACE, "AuthorizationToken");
    Element token = new Element().createElement(NAMESPACE, "Token");
    token.addChild(Node.TEXT, this.AUTH_TOKEN);
    header.addChild(Node.ELEMENT, token);
    envelope.headerOut[0] = header; 
```

ksoap2 正在构建的是：

```
<v:Envelope xmlns:i="http://www.w3.org/1999/XMLSchema-instance" xmlns:d="http://www.w3.org/1999/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
  <v:Header>
    <n0:AuthorizationToken xmlns:n0="http://www.avectra.com/2005/">
      <n0:Token>string</n0:Token>
    </n0:AuthorizationToken>
  </v:Header>
  <v:Body>
    <ExecuteMethod xmlns="http://www.avectra.com/2005/" id="o0" c:root="1">   
      <serviceName>AHAWebServices</serviceName>
      <methodName>MemberDirectory</methodName>
      <parameters i:type="n1:parameters" xmlns:n1="http://www.avectra.com/2005/">
        <Parameter i:type="n1:Parameter">
          <Name>string</Name>
          <Value>string</Value>
        </Parameter>
      </parameters>
    </ExecuteMethod>
  </v:Body>
</v:Envelope> 
```

我感觉问题出在带有 n0 前缀的标题中，但我不知道如何摆脱它们。我通过将implicitTypes 设置为true 从正文中删除了它们，但我找不到标题的类似设置。我是 SOAP 新手，因此非常感谢任何其他建议。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:43:19.987

**当使用 KSOAP 这对我有用**

```
SoapObject request = new SoapObject(WEBSERVICE_NAMESPACE, methodName);
    if(null != parameterMap && !parameterMap.isEmpty()){
        for(Entry<String, String> entry: parameterMap.entrySet()){
            request.addProperty(entry.getKey(), entry.getValue());
        }
    }
    // Declare the version of the SOAP request

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.implicitTypes = true;
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(ApplicationConstants.WEBSERVICE_WSDL_URL);

    // this is the actual part that will call the webservice
    try {

        androidHttpTransport.debug = true;
        androidHttpTransport.call(soapActionUrl, envelope);
        String ss = androidHttpTransport.responseDump;

        // Get the SoapResult from the envelope body.

        Log.d(TAG, "request: " + androidHttpTransport.requestDump);
        Log.d(TAG, "response: "+    androidHttpTransport.responseDump);

        SoapObject result = (SoapObject) envelope.getResponse();

        Log.d("soap response", "" + result);            
    } catch (IOException e) {
        Log.e(TAG, "IOException", e);
    } 
```

笔记：

```
androidHttpTransport.debug = true; 
```

解决了我的问题。撞了我的头，但无法解释为什么设置 debug true 有助于解决问题。

为什么需要使用 ksoap？只需将 SOAP 请求的静态方作为字符串，将值附加到静态部分，您最终就可以获得完整的 SOAP 请求。最后使用 HTTP 方法发送您的 post 请求。

没有额外的 JAR

ksoap 也存在诸如 OOM 等问题，用于大响应等。

[KSOAP OOM 问题](http://code.google.com/p/ksoap2-android/issues/detail?id=137)

**您可以使用以下代码**

```
import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.util.HashMap;
import java.util.Map.Entry;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;

import android.util.Log;

public final class SOAPRequest{

private static final String TAG = "SOAPRequest";
private static final String TAG_SOAP_HEADER_START = "<?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"><soap:Header>";
private static final String TAG_AUTHORIZATION_START = "<AuthorizationToken xmlns=\"http://www.avectra.com/2005/\">";
private static final String TAG_TOKEN_START = "<TOKEN>";
private static final String TAG_TOKEN_END = "</TOKEN>";
private static final String TAG_AUTORIZATION_END = "</AuthorizationToken>";
private static final String TAG_SOAPHEADER_END = "</soap:Header>"; 
private static final String TAG_SOAP_BODY_START = "<soap:Body>";
private static final String TAG_PARAM_NAME_START = "<Name>";
private static final String TAG_PARAM_NAME_END = "</Name>";
private static final String TAG_PARAM_VALUE_START = "<Value>";
private static final String TAG_PARAM_VALUE_END = "</Value>";
private static final String TAG_METHOD_START = "<methodName>";
private static final String TAG_METHOD_END = "</methodName>";
private static final String TAG_SERVICE_START = "<serviceName>";
private static final String TAG_SERVICE_END = "</serviceName>";
private static final String TAG_PARAMS_START = "<parameters><Parameter>";
private static final String TAG_EXE_METHOD_START = "<ExecuteMethod xmlns=\"http://www.avectra.com/2005/\">";
private static final String TAG_SOAP_REQ_END = "</Parameter></parameters></ExecuteMethod></soap:Body></soap:Envelope>";

/**
 * Constructor intentionally made private 
 */
private SOAPRequest() {

}
/**
 * Builds a SOAP request with the specified value
 * @param token Value of token
 * @param serviceName Value of servicename
 * @param methodName Value of methodName
 * @param paramsMap Collection of parameters as set of name value pair which needs to be sent
 * @return the complete soap request
 */
public static String buildRequest(String token, String serviceName, String methodName, HashMap<String, String> paramsMap){
    StringBuilder requestBuilder = new StringBuilder(TAG_SOAP_HEADER_START);
    requestBuilder.append(TAG_AUTHORIZATION_START);
    requestBuilder.append(TAG_TOKEN_START);
    requestBuilder.append(token);
    requestBuilder.append(TAG_TOKEN_END);
    requestBuilder.append(TAG_AUTORIZATION_END);
    requestBuilder.append(TAG_SOAPHEADER_END);
    requestBuilder.append(TAG_SOAP_BODY_START);
    requestBuilder.append(TAG_EXE_METHOD_START);
    requestBuilder.append(TAG_SERVICE_START);
    requestBuilder.append(serviceName);
    requestBuilder.append(TAG_SERVICE_END);
    requestBuilder.append(TAG_METHOD_START);
    requestBuilder.append(methodName);
    requestBuilder.append(TAG_METHOD_END);
    requestBuilder.append(TAG_PARAMS_START);
    for(Entry<String, String> param :paramsMap.entrySet()){
        requestBuilder.append(TAG_PARAM_NAME_START);
        requestBuilder.append(param.getKey());
        requestBuilder.append(TAG_PARAM_NAME_END);
        requestBuilder.append(TAG_PARAM_VALUE_START);
        requestBuilder.append(param.getValue());
        requestBuilder.append(TAG_PARAM_VALUE_END);
    }
    requestBuilder.append(TAG_SOAP_REQ_END);
    return requestBuilder.toString();
}

/**
 * Connection timeout set for the HttpClient
 */
private static final int CONNECTION_TIMEOUT= 6000;
/**
 * Socket timeout set for the HttpClient
 */
private static final int SOCKET_TIMEOUT = 10000; 

/**
 * @return httpClient An instance of {@link DefaultHttpClient}
 */
private static DefaultHttpClient getHttpClient() {
    HttpParams httpParameters = new BasicHttpParams();
    // Set the timeout in milliseconds until a connection is established.
    // The default value is zero, that means the timeout is not used.
    HttpConnectionParams.setConnectionTimeout(httpParameters,CONNECTION_TIMEOUT);
    // Set the default socket timeout (SO_TIMEOUT)
    // in milliseconds which is the timeout for waiting for data.
    HttpConnectionParams.setSoTimeout(httpParameters, SOCKET_TIMEOUT);

    return new DefaultHttpClient(httpParameters);
}

/**
 * Sends a SOAP request to the specified service endpoint. 
 * 
 * @param serviceEndpoint The service endpoint which will be hit
 * @param soapRequest The SOAP request
 * @return The string representing the response for the specified SOAP request. 
 */
public static String send(String serviceEndpoint, String soapRequest){
    HttpPost httppost = new HttpPost(serviceEndpoint);          
    StringEntity se = null;
    try {
        se = new StringEntity(soapRequest,HTTP.UTF_8);
    } catch (UnsupportedEncodingException e) {
        Log.e(TAG,"send", e);
        return null;
    }

    se.setContentType("text/xml");  
    httppost.setHeader("Content-Type","application/soap+xml;charset=UTF-8");
    httppost.setEntity(se);  
    String result = null;
    HttpClient httpclient = getHttpClient();
    try {
        HttpResponse httpResponse = httpclient.execute(httppost);
        HttpEntity responseEntity = httpResponse.getEntity();
        if(null!= responseEntity){
            //if you have a huge chunk of data read it using a buffer
            result =EntityUtils.toString(responseEntity);
        }
    } catch (ClientProtocolException e) {
        Log.e(TAG,"send", e);
    } catch (IOException e) {
        Log.e(TAG,"send", e);
    } catch (Exception e){
        Log.e(TAG,"send", e);
    }

    return result;
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:55:51.820

我认为您需要另一种方法来创建标头，它看起来像 jax-ws，所以我将使用几个月前所做的 jax ws 实现。

首先你需要一个 HeaderHandler 类，它创建了soap header 元素，它应该是这样的：

* * *

```
 import javax.xml.namespace.QName;
    import javax.xml.soap.SOAPElement;
    import javax.xml.soap.SOAPEnvelope;
    import javax.xml.soap.SOAPHeader;
    import javax.xml.ws.handler.MessageContext;
    import javax.xml.ws.handler.soap.SOAPHandler;
    import javax.xml.ws.handler.soap.SOAPMessageContext;

    public class HeaderHandler implements SOAPHandler<SOAPMessageContext> {

        public boolean handleMessage(SOAPMessageContext smc) {
            Boolean outboundProperty = (Boolean) smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
            String AUTH_TK = "http://www.avectra.com/2005/";
            String PREFIX="";//no prefix
            String PREFIX_XMLNS="xmlns";
            String value =  "123456";
            if (outboundProperty.booleanValue()) {
                try {
                    SOAPEnvelope envelope = smc.getMessage().getSOAPPart().getEnvelope();
                    SOAPHeader header = envelope.addHeader();
                    //<AuthorizationToken xmlns="http://www.avectra.com/2005/">
                    SOAPElement authorizationToken = header.addChildElement("AuthorizationToken", PREFIX_XMLNS, AUTH_TK);
                    //<Token>value</Token>
                    SOAPElement usernameToken =
                        authorizationToken.addChildElement("Token", PREFIX);
                        usernameToken.addTextNode(value);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            return outboundProperty;
        }

        public Set<QName> getHeaders() {
            return null;
        }

        public void close(MessageContext arg0) {

        }

        public boolean handleFault(SOAPMessageContext arg0) {
            return false;
        }
    } 
```

之后，您创建一个 HeaderHandlerResolver 来处理标头创建并将其插入到处理程序链中：

* * *

```
 import java.util.ArrayList;
    import java.util.List;
    import javax.xml.ws.handler.Handler;
    import javax.xml.ws.handler.HandlerResolver;
    import javax.xml.ws.handler.PortInfo;

    public class HeaderHandlerResolver implements HandlerResolver {

    @SuppressWarnings("unchecked")
    public List<Handler> getHandlerChain(PortInfo portInfo) {
          List<Handler> handlerChain = new ArrayList<Handler>();
          HeaderHandler hh = new HeaderHandler();
          handlerChain.add(hh);
          return handlerChain;
       }
    } 
```

之后，您在客户端中添加：

* * *

```
 try{
            //new service instance (your service should be extending javax.xml.ws.Service;)
            YourServiceProxy service = new YourServiceProxy();
            //calls the header handler resolver ;)
            service.setHandlerResolver(new HeaderHandlerResolver());
            //get the service
            YourService port = (YourService)service.getYourService();
            //call the service 
            port.yourMethod()   
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

顺便说一句，我没有测试这个特定的头文件，我修改了我以前的头文件处理程序，所以它可能不准确，但我认为它非常接近，我真的希望它对你有帮助，试试看并告诉我们如何它来了，如果它仍然不起作用，我会尽力帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T15:17:08.973

放

```
 envelope.implicitTypes = true; 
```

并且不要设置

```
 envelope.setAddAdornments(false) 
```

这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T22:53:45.697

您是否检查过 kSOAP 为`parameters`(ie `i:type="n1:parameters"`) 和`Parameter`(ie `i:type="n1:Parameter"`) 节点生成的类型是否正确（它们是在 wsdl 中定义的）？

尝试设置

```
envelope.implicitTypes = true; 
```

还可以玩

```
envelope.setAddAdornments(false); 
```

强制 kSOAP 不包括类型属性和名称空间。

# oracle-apex - 获取选择列表的选定项

> ID：11763093
> 
> 赞同：1
> 
> 时间：2012-08-01T15:57:24.340
> 
> 标签：oracle-apex

我是一个顶点初学者，我有一个问题。

我有一个空白页，我想添加 2 个选择列表。
像这样：

![在此处输入图像描述](../Images/8dfff6d7f0d389ca7adfdfa42e8ae723.png)

第二个列表的值取决于第一个列表的选定值。
我怎样才能访问这个选定的值？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:50:35.860

您正在寻找的功能是级联选择列表，这在 Apex 4.0 及更高版本中原生提供。如果您使用的是较低版本，BoeroBoy 的方式可能会让您到达那里。

查看 apex 开发团队的 Patrick Wolf 撰写的博客文章。
4.0 之前：http : [//www.inside-oracle-apex.com/generic-solution-for-cascading-select-listslovs/](http://www.inside-oracle-apex.com/generic-solution-for-cascading-select-listslovs/)
4.0 及更高版本：http: [//www.inside-oracle-apex.com/oracle-apex -4-0-cascading-lovsselect-lists/](http://www.inside-oracle-apex.com/oracle-apex-4-0-cascading-lovsselect-lists/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:46:06.743

你可以通过几种方式做到这一点。您可以在选择更改期间使顶部选择框提交页面，然后底部选择列表将使用您的新选项刷新，但这将提交并刷新整个页面。您还可以应用一些 Javascript。

我建议你从这里开始阅读：

[http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/apex/r41/dynactions/dynactions.htm](http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/apex/r41/dynactions/dynactions.htm)

相关选择列表的更具体示例如下： [http ://www.oracle.com/webfolder/technetwork/tutorials/obe/db/hol08/apexweb20/ajax_otn.htm#t1](http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/hol08/apexweb20/ajax_otn.htm#t1)

希望这可以帮助！

# social-networking - P2P 框架（用于社交网络项目）

> ID：11763097
> 
> 赞同：2
> 
> 时间：2012-08-01T15:57:51.093
> 
> 标签：social-networking, p2p

对于我的执照学位（我是 CS 学生），我必须建立一个 P2P 社交网络。我在互联网上进行了一些研究，但我找不到关于如何实现这一目标的明确信息或与此类项目相关的任何好的资源。

这就是为什么我想问你是否知道一些我应该使用的关于 P2P 社交网络框架的非常好的资源；你对这个问题的看法！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:35:46.943

看看 Newebe 一个与您的描述非常吻合的 P2P 社交网络。它可以给你一些想法。

[http://newebe.org/](http://newebe.org/)

# facebook - FB App 提交到 App Center 后没有出现

> ID：11763098
> 
> 赞同：0
> 
> 时间：2012-08-01T15:57:51.033
> 
> 标签：facebook, flash, heroku

我有两个用 Flash 和 Heroku 构建的 Facebook 应用程序。我向 App Center 提交了一个，但现在 Flash 没有出现：

[http://apps.facebook.com/punchromney](http://apps.facebook.com/punchromney)

但是，这个还没有提交到应用中心，它工作正常：

[http://apps.facebook.com/punchobama](http://apps.facebook.com/punchobama)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:02:35.600

传播到应用服务器可能需要几分钟时间。等到那时再回来检查。

# php - 卸载 PEAR 包后无法重新安装它们（Auth & DB）

> ID：11763100
> 
> 赞同：1
> 
> 时间：2012-08-01T15:58:01.437
> 
> 标签：php, pear

所以我在 Larry Ullman 的 PHP 5 Advanced 书籍中工作，第 4 章让我使用 PEAR 安装 Auth 和 DB（即使 DB 包已被弃用）。所以我不得不停下来做一些关于 PEAR 的教程，因为我以前从未使用过它。

在检查和测试安装/卸载命令的过程中，我在尝试**重新安装**Auth、DB 和其他一些命令时遇到了这个错误：

```
 No releases available for package "pear.php.net/Auth"
    install failed 
```

我只在那些选择的几个包中得到这个错误。我可以整天卸载并重新安装所有其他人。我曾尝试过安装/卸载 [options] 组合，但在尝试安装时仍会收到此消息。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:49:50.260

尝试清除缓存，然后重新安装包：

```
$ pear clear-cache
$ pear install auth 
```

# ruby-on-rails - 错误：无法识别命令

> ID：11763106
> 
> 赞同：0
> 
> 时间：2012-08-01T15:58:16.980
> 
> 标签：ruby-on-rails, command, rvm

[我终于在这个](http://pullmonkey.com/2008/07/23/open-flash-chart-ii-plugin-for-ruby-on-rails-ofc2/comment-page-6/#comment-19004)页面上找到了一个我可以理解的图表插件，现在我正在执行这些步骤，我收到了这个错误：

```
$ rails testing_ofc_2
Error: Command not recognized
Usage: rails COMMAND [ARGS]

The most common rails commands are:... 
```

当我用 rvm 输入一些命令时，我也得到了这个错误

```
-bash: rvm: command not found 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:07:02.157

看起来说明已经过时了。尝试

```
$ rails new testing_ofc_2
$ cd testing_ofc_2
$ script/rails plugin install git://github.com/pullmonkey/open_flash_chart.git 
```

# c# - C# TripleDES 解密时输入长度不正确

> ID：11763112
> 
> 赞同：1
> 
> 时间：2012-08-01T15:58:33.923
> 
> 标签：c#, encryption, 3des, tripledes

加密字符串时没有错误，但是尝试解密字符串时出现错误，它说 Input.Length 无效。有任何想法吗？

```
public class Crypt
    {
        public string Encrypt(string Key, string Input)
        {
            ICryptoTransform crypted = tran(Key).CreateEncryptor();
            UTF8Encoding utf8 = new UTF8Encoding();
            return utf8.GetString(crypted.TransformFinalBlock(utf8.GetBytes(Input), 0, Input.Length));
        }
        public string Decrypt(string Key, string Input)
        {
            ICryptoTransform crypted = tran(Key).CreateDecryptor();
            UTF8Encoding utf8 = new UTF8Encoding();
            return utf8.GetString(crypted.TransformFinalBlock(utf8.GetBytes(Input), 0, Input.Length));
        }
        private TripleDESCryptoServiceProvider tran(string Key)
        {
            MD5CryptoServiceProvider md5 = new MD5CryptoServiceProvider();
            UTF8Encoding utf8 = new UTF8Encoding();
            TripleDESCryptoServiceProvider tDES = new TripleDESCryptoServiceProvider();
            tDES.Key = md5.ComputeHash(utf8.GetBytes(Key));
            tDES.Mode = CipherMode.ECB;
            tDES.Padding = PaddingMode.PKCS7;
            return tDES;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:06:42.603

加密过程返回的字节不是 UTF8，但您是这样对待它们的。如果您想要加密数据的文本表示，您需要做的不仅仅是将任意字节转换为 UTF8。

Skeet[在这里](https://stackoverflow.com/questions/7996955/encoding-to-use-to-convert-bytes-array-to-string-and-vice-versa)的回答应该会让你上路。

# python - pyramid_oauth2 服务提供者文档或示例

> ID：11763115
> 
> 赞同：1
> 
> 时间：2012-08-01T15:58:46.413
> 
> 标签：python, pyramid, oauth-provider

我需要在金字塔中创建一个 api，我认为 oauth2 可以很好地实施而不是重新发明轮子，已经安装了 pyramid_oauth2 包但不确定文档或示例。有人知道任何好的资源吗？一个 github 项目或 oauth2 服务提供商的东西会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:55:04.570

如果你在谈论我的包裹，这里是我网站上的一个样本。它仍然是相当实验性的，但它应该可以与 facebook 和其他一些 oauth2 提供商一起使用。不幸的是，twitter事实上只有oauth1.0，这是一个问题。

所以你需要像这样包含 pyramid_oauth2

```
config.include('pyramid_oauth2') 
```

或者在 config.ini 文件中。

然后，您可以在包含配置后将其添加到其他地方：

```
config.add_oauth2_provider(
    Provider(
        'vkontakte',
        'client_id',
        'client_secret',
        'https://api.vk.com/oauth/authorize',
        'https://oauth.vk.com/access_token'
    )
) 
```

这将创建一个路径`/oauth/vkontakte/authenticate`。这是重定向流的请求开始的地方。然后它将重定向到`authorize url`并且它还创建一个`/oauth/vkontakte/callback`接收代码的哪个。然后它将该代码发送回`access_token`路径。

如果某些东西不起作用，请随时报告一些问题，可以向`Provider`构造函数发送额外的参数，例如作用域等。目前这些参数是针对所有请求发送到服务器的。

哦，您必须向提供者提供回调函数。我将通过回调等示例更新答案。

如果还不清楚，我可以用 facebook 制作一个小示例应用程序，并在今天或明天将其推送到 github 上。

回调只是一个可调用的接收`request`和`data`，访问令牌应该包含在数据中。

我想到获取访问令牌的方式应该很简单，一旦收到访问令牌，就应该可以执行一些标准回调来注册 oauth api 等等。我相信并不是每个人都在寻找 oauth，只是为了对 facebook connect 等网站进行身份验证。可能有兴趣将 access_token 用于身份验证以外的其他用途。此外，由于金字塔与 sqlalchemy 和其他数据库无关，因此它不强制执行任何操作。换句话说，用 ZODB 实现它，SQLAlchemy 应该很容易。

我相信流程实际上非常简单，而且我实际上（我猜）并没有为当前的客户端流程正确实施 oauth2。缺少一些属性，例如grant_type 等。它们可以作为额外参数传递，但取决于 oauth2 服务器，它可能无法在任何地方正常工作。

顺便说一句，我希望将提供程序添加到 ini 文件中，以便可以从那里加载它们而不是在代码中。这样你就可以为 dev、prod 等维护不同的应用程序。

# ruby-on-rails - 只有当它包含参数时，Rails 才会渲染 Json

> ID：11763119
> 
> 赞同：0
> 
> 时间：2012-08-01T15:59:05.467
> 
> 标签：ruby-on-rails, ruby, regex, api

我正在玩 Groupon API。使用 rails，我将如何仅显示包含用户设置的某些参数的 Json 结果。

例如，如果用户只想查看包含“跳伞”的交易。或者一个更简单的例子是，只有当valid_deal：true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:28:58.300

1.  解析 Json，这将给出一个哈希或数组对象
2.  从上述哈希中创建一个具有所需结果的新对象。如果你想保留大部分结果，只是想删除一些，你可以只删除同一个对象的一些元素。
3.  将步骤 2 中创建的对象渲染为 json

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:33:10.097

您是否设法从 API 获取 json 对象？

要将 json 解析为更有用的哈希，请使用

```
deals_hash = your_json['deals'] 
```

从valid_deal = true的哈希中获取所有交易

```
deals_hash.select{|deal| deal['valid_deal'] == true} 
```

您可能必须使用“true”，具体取决于 ruby​​ 将类型视为字符串还是布尔值。

至于搜索，我会将所有交易存储在数据库中，并使用全文搜索 gem，例如 solr 或acts_as_indexed。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:30:36.617

您可以根据需要解析 json 对象并将结果显示在哈希/数组中。

可以选择将参数传递给 groupon Api，这将返回包含这些参数的结果。

遍历哈希以提取您要显示的特定参数。

# android - Google Play Installer_referrer 问题

> ID：11763126
> 
> 赞同：0
> 
> 时间：2012-08-01T15:59:41.063
> 
> 标签：android, android-intent, google-play, referrer

所以，我冒着在这个问题上加倍加倍的风险，人们为此向我扔石头..：/

任何人都可以阐明市场网络界面如何不“点燃” `com.android.vending.INSTALL_REFERRER`广播接收器。

谷歌对此有官方声明吗？

判决结果是什么？

（顺便说一句，与网络市场版本相反，从市场应用程序安装我的应用程序确实带有推荐人字符串）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:26:09.117

已知问题，第 2 点：

“Google Play 广告系列跟踪目前不支持从网络 Play 商店启动的网络到设备安装。”

[https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#known-issues](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#known-issues)

# c# - MailDefinition 类是否仅用于 ASP？

> ID：11763129
> 
> 赞同：2
> 
> 时间：2012-08-01T15:59:55.027
> 
> 标签：c#, winforms, email, smtp

[MailDefinition](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.maildefinition.aspx#Y1938)类是否仅用于 ASP？它似乎拥有我需要的一切，但显然我需要在 Web.Config 文件中添加 SMTP 服务器信息。我想在 WinForms 应用程序中使用这个类。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:40:52.853

当然，您应该能够从 WinForms 应用程序中使用它。您需要将 SMTP 主机名传递给 System.Net.Mail.SmtpClient 构造函数。像这样的东西：

```
using System.Net.Mail;
using System.Web.UI.WebControls;

// namespace etc

private void SendEmail()
{
    string to = "to@somewhere.com,to2@somewhere.com";

    MailDefinition mailDefinition = new MailDefinition();
    mailDefinition.IsBodyHtml = false;

    string host = "smtpserver";  // Your SMTP server name.
    string from = "from@somewhere.com";
    int port = -1;               // Your SMTP port number. Defaults to 25.

    mailDefinition.From = from;
    mailDefinition.Subject = "Boring email";
    mailDefinition.CC = "cc@somwhere.com,cc2@somwhere.com";

    List<System.Net.Mail.Attachment> mailAttachments = new List<System.Net.Mail.Attachment>();
    // Add any attachments here

    using (MailMessage mailMessage = mailDefinition.CreateMailMessage(to, null, "Email body", new System.Web.UI.Control()))
    {
        SmtpClient smtpClient = new SmtpClient(host);
        if (port != -1)
        {
            smtpClient.Port = port;
        }
        foreach (System.Net.Mail.Attachment mailAttachment in mailAttachments)
        {
            mailMessage.Attachments.Add(mailAttachment);
        }
        smtpClient.Send(mailMessage);
    }
} 
```

# c# - 使用 C# 泛型从方法（不是“新”）创建泛型对象

> ID：11763133
> 
> 赞同：1
> 
> 时间：2012-08-01T16:00:01.740
> 
> 标签：c#, generics

我习惯了 C++ 模板，并意识到 C# 中的工作方式略有不同。这就是我想要的：

```
 T CreateButton<T>() {
       T test = T.create(...some vars...);
       return test;
    } 
```

我想也许使用定义了“create”方法的基类的派生约束可以解决问题，但它仍然无法编译。

我得到这个编译错误：`**error CS0119: Expression denotes a 'type parameter', where a 'variable', 'value' or 'type' was expected**`

有没有办法完成我在 C# 中尝试做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:07:20.997

您的问题是您调用 T.Create 就好像它是泛型 T 上的静态方法。这带来了两个问题 - 首先，您不能继承静态（您必须这样做才能将 T 的类型限制为定义“静态创建”以便 T.Create 可以编译的基类）。其次，即使您可以继承静态，基类 .Create() 也必须“知道”才能返回 T。

你在这里追求的是一个工厂。定义一个充当 T 工厂的类，然后你可以编写

T test = Factory < T >.Create(... some vars ...);

这感觉就像它会导致各种各样的巨大 switch 语句 - 基于 T 的真实类型做正确的事情。但这是控制反转和依赖注入可以帮助您的地方。为您需要的每种类型的 T 定义一个带有“插件”的工厂。使用 IoC 将插件注入您的工厂。

[在这里](https://stackoverflow.com/questions/1380087/whats-the-correct-alternative-to-static-method-inheritance-c)查看讨论

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:06:37.890

这应该是你所追求的：

```
class MyFactory<T> where T : new()
{
    public T CreateMyStuff()
    {
        return new T();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:01:47.240

您必须定义和实现一个接口（或一个基类）。您还必须限制`new()`. 然后，您可以对其使用通用约束。

您不能针对泛型参数调用静态方法。IE：你不能在`T`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:08:02.297

问题在于特定的行`T.Create(...)`

T 是一个类型，而不是变量，所以除非 Create() 方法是该类型的静态方法，否则它不会编译，即使这样 T 也不知道 create 实际上是什么，所以你将无法编译函数调用开始。如果您以某种方式约束 T 以便代码知道 Create() 函数存在，那么您可以这样做。

**例子**

假设 T 将始终是某个基类的成员或继承成员，则函数将声明如下：

```
T CreateButton<T>() where T : BusinessObjectBase
{
   T test = (T)BusinessObjectBase.create(...some vars...);
   return test;
} 
```

在这种情况下，静态函数 Create() 在 BusinessObjectBase 中声明，并且作为 T 传入的类型被限制为该类或从该类扩展，从而保证 T 能够调用 Create() 的代码功能。

当然，正如其他人所提到的，使用 new() 约束要容易得多。这使您可以简单地返回 new T(); 远没有那么复杂，但是您会丢失 create 函数中的所有参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T16:53:08.630

除了满足`new`约束的类型外，没有任何方法可以创建泛型类型的新对象，只给定类型。相反，您最好的选择可能是让需要创建事物的方法接受适合该任务的委托。

```
// 假设你需要能够创建构造函数应该采用的东西
// 一个 Int32。然后执行以下操作：

void MakeLotsOfTs<T>(Func<Int32, T> CreationProc) // 以及你想要的任何其他东西
{
  ...每当您需要给定整数 N 的新 T 时，请调用 CreationProc(N)
}

```

如果您有一个类`Foo`的构造函数采用`Int32`，并且您希望将其传递给上述方法，请使用

```

```
  MakeLotsOfTs<Foo>( (Int32 param) => new Foo(param) );

```

请注意，即使您想将其与构造函数需要其他内容的类一起使用，这种方法也可以使用（例如，可以执行以下操作：

  MakeLotsOfTs<Bar>( (Int32 参数) =>
    new Bar(String.Format("Bar #{0}", param)) );

```

与指定“参数化”约束相比，这种方法需要为调用者做更多的工作`new`，但功能更强大。

# tfs - 在 TFS 2012 PBI 中显示剩余工作汇总值

> ID：11763134
> 
> 赞同：1
> 
> 时间：2012-08-01T16:00:06.287
> 
> 标签：tfs

在 TFS 2012 中，是否可以在产品待办事项项目上显示一个字段，该字段表示所有子任务的总剩余工作量？

我尝试将 Microsoft.VSTS.Scheduling.RemainingWork 字段添加到工作项类型布局中，但这实际上没有意义，因为它如何知道从哪里汇总？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:56:27.867

最简洁的答案是不。您必须自定义代码。如果您想走这条路，这篇文章（以及此博客上的其他文章）可以帮助您入门。

[关联](http://www.dotnetcurry.com/ShowArticle.aspx?ID=336)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T06:20:40.387

我知道它已经晚了，但如果有人想要一个简单的答案，这里是关于此事的最新更新......

对于敏捷模板，它是一个直接属性 (Microsoft.VSTS.Scheduling.OriginalEstimate)，对于 scrum，您需要更改 WIT xml，如下面的链接所述。

```
<FIELD name="Original Estimate" refname="Microsoft.VSTS.Scheduling.OriginalEstimate" type="Double" reportable="measure" formula="sum">
    <HELPTEXT>Initial value for Remaining Work - set once, when work begins</HELPTEXT>
</FIELD>
<FIELD name="Completed Work" refname="Microsoft.VSTS.Scheduling.CompletedWork" type="Double" reportable="measure" formula="sum">
    <HELPTEXT>The number of units of work that have been spent on this task</HELPTEXT>
</FIELD> 
```

[https://msdn.microsoft.com/en-us/library/dn769080.aspx](https://msdn.microsoft.com/en-us/library/dn769080.aspx)

# android - 启动单个流程及其相关活动

> ID：11763138
> 
> 赞同：1
> 
> 时间：2012-08-01T16:00:18.150
> 
> 标签：android, android-activity, process

我有一个正在运行的进程列表，当用户单击相关图标时，我想启动一个进程及其相关活动。

```
ActivityManager actvityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
List<RunningAppProcessInfo> procInfos = actvityManager.getRunningAppProcesses(); 
```

我有这个正在运行的应用程序列表。通过使用 OpenGL，我为每个正在运行的应用程序显示一个图标。我只想知道当用户单击我以这种方式获得的相关图标时如何在前台启动活动进程：

```
icon = pk.getApplicationIcon(procInfos.get(i).processName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:06:31.057

不是每个进程都附加到一个`Activity`所以试图打开一个任意进程并没有真正的意义。

相反，为什么不直接使用`PackageManager.getLaunchIntentForPackage (String packageName)`.

然后调用`Context.startActivity(Intent i);`应该足以启动应用程序。

# iphone - 在 IOS 中使用本机控件进行本地化

> ID：11763139
> 
> 赞同：0
> 
> 时间：2012-08-01T16:00:23.247
> 
> 标签：iphone, ios, ipad, localization, internationalization

我正在 IOS 中创建一个多语言应用程序。我的应用支持 4 种语言（en、zh、ja&pt）。通过我的应用程序，用户可以使用这种方法更改语言，因为标签和文本已使用用户选择的语言进行本地化，但本机控件（如电子邮件、打印和上下文菜单）始终以英文显示，我该如何更改本机控件标签用我自己的文字。

请指教...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:04:01.910

为什么您要为用户提供更改应用程序语言的功能？

我建议您查看此[链接](https://developer.apple.com/internationalization/#resources)

因为您应该使用 Apple 为您提供的本地化功能，即根据运行设备的语言设置语言。如果您的应用程序不支持特定语言，那么它将以您的应用程序的默认语言显示。

如果您使用 UIKIt 或其他苹果框架的元素，苹果包含的语言比您拥有的多，因此这些元素将以运行它们的设备的所选语言显示。你不应该试图改变它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:47:18.900

您的用户是否在设置中更改设备语言以及区域？一些本地内容与设备语言设置->国际->语言和区域格式无关。Apple 将其交给了用户，因此其原生标签将以用户选择的语言显示。

# php - PHP如何检查与外部源的连接时间长度

> ID：11763142
> 
> 赞同：1
> 
> 时间：2012-08-01T16:00:33.533
> 
> 标签：php, logging, timer

我们正在使用一个应用程序服务器来提供我们的数据。

有时与应用服务器的连接需要很长时间才能响应，但实际上并没有连接失败（即使连接成功，速度也会在 pingdom 上记录为停机时间）

**如何在 php 中计时连接，以便在一定时间后记录响应缓慢的事件（即使连接尚未响应）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:35:47.240

好吧，尽管如此，我必须同意 eis 关于这一点。PHP 可能不是最好的语言，这是我的建议......

**第一个文件：**

```
//Write "1" to text file (loading.txt)
//Run secondary php file (loading.php) asyncronously
//I would suggest curl_post_async or exec(url)

//Start Connection

//Upon load finish write "0" to text file (loading.txt) 
```

这是关于请求页面而不等待加载的一个很好的讨论： [php request url without waiting for response](https://stackoverflow.com/questions/4191294/php-request-url-without-waiting-for-response)

**第二个文件（loading.php）：**

```
$start=mktime();
while (true) {
    if ("loading.txt" if value = 0) {
        break;
    else if (($start-mktime()) > MAX WAIT TIME) {
        //Log as "slow-to-respond"
        break;
    }
} 
```

您可能需要修改 php.ini 并相应地设置最大执行时间。

我再次觉得这有点草率。我真的建议使用其他语言。

基本上，在您开始连接之前，您运行另一个 php 文件，该文件将继续循环，直到 1\. 它从 loading.txt 文件中读取您已完成连接或 2\. 您已准备好将其记录为“反应迟钝”的例子。在这种情况下，第二个 php 文件结束并且您已经达到了您想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:00:02.517

一个想法浮现在我的脑海。在请求开始时，您可以设置一个数据库条目或包含您提出的请求的文件，类似于[Rawr 提出](https://stackoverflow.com/a/11763725/365237)的建议。然后，您可以在超过限制后从 PHP 触发 unix [at 命令](http://en.wikipedia.org/wiki/At_(Unix))运行 - 然后该命令将激活 shell 或 PHP 脚本，该脚本将检查文件/数据库条目的存在并采取相应措施。

这同样是 hacky，但它的好处是不需要一直运行额外的脚本和轮询内容，而是只激活一次。

# java - 在同一个变量中同时支持 HttpURLConnection 和 HttpsURLConnection？

> ID：11763152
> 
> 赞同：3
> 
> 时间：2012-08-01T16:00:55.680
> 
> 标签：java, http

我正在创建一个处理 HTTP 连接的类，我想同时处理 HTTP 和 HTTPS，但使用相同的变量（所以我可以使用相同的代码来发送数据等）目前，我的代码看起来像这样：

```
if (ssl)
{
    conn = (HttpsURLConnection) new URL(...).openConnection();
    conn.setHostnameVerifier(...);
}
else
{
    conn = (HttpURLConnection) new URL(...).openConnection();
} 
```

当“conn”是 HttpsURLConnection 类型时，HttpURLConnection 转换失败。当“conn”的类型为 HttpURLConnection 或 URLConnection 时，“setHostnameVerifier”和其他 HTTPS 相关方法无法访问。

鉴于 HttpsURLConnection 是 HttpURLConnection 类的子类，我认为强制转换它会起作用，但我显然错了。有什么方法可以让这段代码工作，以便我可以在需要时访问 HTTPS 方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T16:05:26.520

只需在块中保留并`conn`创建`URLConnection`更具体的本地引用`if`。

```
URLConnection conn;

// ...

conn = new URL(...).openConnection();

// ...

if (conn instanceof HttpsURLConnection) {
    HttpsURLConnection httpsConn = (HttpsURLConnection) conn;
    httpsConn.setHostnameVerifier(...);
}

// ... 
```

要不就

```
// ...

if (conn instanceof HttpsURLConnection) {
    ((HttpsURLConnection) conn).setHostnameVerifier(...);
}

// ... 
```

请记住，在 Java 中，您处理的是引用，而不是值。所以这里没有创建副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:06:19.183

试试这个：

```
((HttpsURLConnection) new URL(...).openConnection()).setHostnameVerifier(...); 
```

# php - 从按钮动态触发PHP中的回调？

> ID：11763156
> 
> 赞同：0
> 
> 时间：2012-08-01T16:01:17.147
> 
> 标签：php

我想知道我是否可以模拟类似于 ASPX 如何与他们的表单系统一起工作的东西。当我单击一个按钮时，它会调用同一个页面，但不是重新加载整个页面，而是调用页面内的某个函数。例如，它可以调用一个函数，该函数将验证表单元素是否已填写。这在PHP中可能吗？我不知道如何提供一个例子，我很抱歉含糊不清......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:03:17.547

Ajax 是您的方法。PHP 是服务器端，因此根据定义，您必须前往服务器才能获得所需的内容。

如果你真的是 Ajax 恐惧症，[XAJAX](http://www.xajaxproject.org/)将允许你直接调用 PHP 函数，而无需大量类似 Ajax 的 javascript 代码。不过，它并不是记录最多的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:03:06.770

它需要是一个PHP调用吗？您可以使用简单的 Javascript 或通过 AJAX 调用来完成此操作。

编辑：添加了通过 AJAX 调用 PHP 函数的示例。（使用 jQuery）

这是一个例子：

```
<?php
if(isset($_POST['functionToCall'])) 
{
    $args = $_POST;
    array_shift($args);
    call_user_func($_POST['functionToCall'], $args);
} else {
?>  
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    </head>
    <body>
        <form id="myForm">
            <input id="mytext" type="text" value="some value"/>
            <input type="submit"/>
        </form>
        <button id="callBTN">Call Validation</button>
        <div id="result"></div>
        <script>
        $(document).ready(function()
        {
            $('#callBTN').click(function()
            {
                //Values to pass (validate)
                var inputVal = $('#mytext').val();

                // Function to call in the PHP Side
                var functionName = 'myFunctionCall';

                //Form validation with pure JS+jquery (without calling PHP)
                /*
                if( !inputVal)
                {
                    alert('text is empty');
                } else {
                    alert('text is not empty');
                }
                */

                //Form Validation by calling a PHP function through AJAX
                var selfURL = document.URL; //An example of calling itself
                $.post(selfURL, {"functionToCall": functionName, "mytext": inputVal}, function(data) {
                    $('#result').html(data);
                });
            });
        });
        </script>
    </body>
</html>
<?php
}
function myFunctionCall($args)
{
    if(!empty($_POST['mytext']))
    {
        print 'The text submited was -> ' . $_POST['mytext'];
    } else {
        print 'There was no text submitted';
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:05:44.470

PHP 中没有回调。您将不得不使用前端技术来组织和处理您的活动。为了与您的后端通信，您使用 AJAX。（发布/获取到不同的 php 页面）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:10:29.507

它可能看起来像这样，假设你会使用`jQuery`

```
<script>
   $('#form).submit(function(e){
      e.preventDefault();
      $.post($(this).attr('action'), $(this).serialize(), function(data){
          // in data you'll have response from server, preferably JSON
      }
   });
</script>
<form action="form/handler.php" method="post" id="form">
    <input type="text" name="name" value="" />
    <input type="submit" />
</form>

form/handler.php

if(isset($_POST['name)){
    // implement any logic you want and construct JSON response you need
    $response = array('name' => $_POST['name']);
    echo json_encode($response);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-01T16:04:19.697

这仅在概念上可能使用 PHP（即您可以模拟有状态的行为），通过利用客户端上的“模型、视图、控制器”设计模式和 AJAX。

PHP 以“无状态”方式运行，这意味着每次有 Web 请求时，PHP 都会做自己的事情，并在发送响应时完全“消失”。如果你正确地构建了一个 MVC 应用程序，你可以将 web 请求高度集中到应用程序中的给定方法上，然后在实际允许表单“提交”之前使用 AJAX 使用表单内容调用该方法。

我说的是“概念上”，但请注意，这是大型现代 Web 应用程序中常见且推荐的做法。我这样说的原因是，就 PHP 而言，您仍在使用“完整”Web 请求（该按钮不会“调用”PHP 函数，就像常规网页刷新一样）。但是，使用 MVC 等架构，您可以将每个页面加载转换为方法调用。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-01T16:04:25.940

您可以通过`get`控制调用哪些代码块来传递参数。

即返回自我的链接：

```
siteurl/page.php?what_to_do=2 
```

然后是顶部的一些控制代码：

```
if($_GET['what_to_do']==1)
{
    showMain();
}
elseif($_GET['what_to_do']==2)
{
    showSpecial();
} 
```

像这样的事情，没有写出整个程序来回答。

# android - 在许多设备中看到的屏幕失真（黑线）

> ID：11763161
> 
> 赞同：-2
> 
> 时间：2012-08-01T16:01:34.733
> 
> 标签：android

![在此处输入图像描述](../Images/7d7bd9a28f6d0f254bf3a2c7e51d0c7e.png)

我的设备通过 USB 电缆长时间连接到 PC。后来当我转到我的应用程序并按下屏幕时，我得到了如图所示的黑线。我检查了我的 ADB 日志

```
08-01 18:11:57.170: I/InputReader(533): Touch event's action is 0x0 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0, s=0.522 ]
08-01 18:11:57.170: I/InputDispatcher(533): Delivering touch to current input target: action: 0x0
08-01 18:11:57.170: I/InputDispatcher(533): Delivering touch to current input target: action: 0x0
08-01 18:11:57.170: I/InputDispatcher(533): Delivering touch to current input target: action: 0x0
08-01 18:11:57.190: E/memalloc(9818): clean_buffer: ION_IOC_CLEAN_INV_CACHES failed with error - Invalid argument
08-01 18:11:57.190: E/msm8960.gralloc(9818): cannot flush handle 0x83c7c8 (offs=0 len=398000, flags = 0xa8) err=Invalid argument
08-01 18:11:57.240: E/memalloc(9818): clean_buffer: ION_IOC_CLEAN_INV_CACHES failed with error - Invalid argument
08-01 18:11:57.240: E/msm8960.gralloc(9818): cannot flush handle 0x83c7c8 (offs=0 len=398000, flags = 0xa8) err=Invalid argument
08-01 18:11:57.280: E/memalloc(9818): clean_buffer: ION_IOC_CLEAN_INV_CACHES failed with error - Invalid argument
08-01 18:11:57.280: E/msm8960.gralloc(9818): cannot flush handle 0x83c7c8 (offs=0 len=398000, flags = 0xa8) err=Invalid argument
08-01 18:11:57.300: I/InputReader(533): Touch event's action is 0x1 (deviceType=0) [pCnt=1, pending(waiting finished signal)=1, s=]
08-01 18:11:57.300: I/InputDispatcher(533): Delivering touch to current input target: action: 0x1
08-01 18:11:57.300: I/InputDispatcher(533): Delivering touch to current input target: action: 0x1
08-01 18:11:57.300: I/InputDispatcher(533): Delivering touch to current input target: action: 0x1
08-01 18:11:57.610: I/InputReader(533): Touch event's action is 0x0 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0, s=0.523 ]
08-01 18:11:57.610: I/InputDispatcher(533): Delivering touch to current input target: action: 0x0
08-01 18:11:57.610: I/InputDispatcher(533): Delivering touch to current input target: action: 0x0
08-01 18:11:57.610: I/InputDispatcher(533): Delivering touch to current input target: action: 0x0
08-01 18:11:57.620: E/memalloc(9818): clean_buffer: ION_IOC_CLEAN_INV_CACHES failed with error - Invalid argument
08-01 18:11:57.620: E/msm8960.gralloc(9818): cannot flush handle 0x83c7c8 (offs=0 len=398000, flags = 0xa8) err=Invalid argument
08-01 18:11:57.670: E/memalloc(9818): clean_buffer: ION_IOC_CLEAN_INV_CACHES failed with error - Invalid argument
08-01 18:11:57.670: E/msm8960.gralloc(9818): cannot flush handle 0x83c7c8 (offs=0 len=398000, flags = 0xa8) err=Invalid argument
08-01 18:11:57.710: E/memalloc(9818): clean_buffer: ION_IOC_CLEAN_INV_CACHES failed with error - Invalid argument
08-01 18:11:57.710: E/msm8960.gralloc(9818): cannot flush handle 0x83c7c8 (offs=0 len=398000, flags = 0xa8) err=Invalid argument
08-01 18:11:57.740: I/InputReader(533): Touch event's action is 0x1 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0, s=]
08-01 18:11:57.740: I/InputDispatcher(533): Delivering touch to current input target: action: 0x1
08-01 18:11:57.740: I/InputDispatcher(533): Delivering touch to current input target: action: 0x1
08-01 18:11:57.740: I/InputDispatcher(533): Delivering touch to current input target: action: 0x1 
```

正如在日志系统中试图做“memalloc”“gralloc”！不知道出了什么问题！！请帮忙

使用设备：三星 Galaxy S3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T02:07:29.643

这似乎是设备端的问题。这里改变的变量是我正确的设备吗？两个设备上的代码都是一样的（如果我错了请纠正我），所以关键是寻找S2和S3之间的不同之处（即屏幕密度、显示、api级别）。所以这就是我要做的：在另一部手机上试用你的应用程序（可能是你朋友的手机或其他），看看会发生什么。而不是试图找到手机的系统属性之间的相似之处，试图拼凑出导致错误的原因。我希望这个帮助能祝你好运！S3似乎发生了一些事情。我今天才发现这个[问题](https://stackoverflow.com/questions/11936491/android-samsung-galaxy-s3-image-loading)。看看[这个](https://stackoverflow.com/questions/11399851/performance-issue-galaxy-s3)也

# c# - 如何拦截.Net中来自/到第三方库的非虚拟方法的调用？

> ID：11763166
> 
> 赞同：4
> 
> 时间：2012-08-01T16:02:05.903
> 
> 标签：c#, .net, reflection, disassembly, dynamic-proxy

我认为我需要的是被 .net 人称为“透明动态代理”的东西，但到目前为止我所看到的所有实现（Castle DynamicProxy、Spring.NET AOP 等）都要求我至少执行以下一项操作：

1.  将拦截的方法声明为虚拟的
2.  包装类并创建包装器的实例而不是包装类
3.  更改继承或实现接口

显然，如果调用者和被调用者都是非虚拟的并且来自第三方闭源库，就是这种情况，我无能为力。

如果 C# 是像 Python 这样的动态语言，我会这样做：

```
foo = ThirdyPartyLibA.Foo()
def interceptor(self, *args, **kwargs):
    do_something_before(self, *args, **kwargs)
    result = ThirdyPartyLibB.Bar.intercepted(self, *args, **kwargs)
    do_something_after(self, result, *args, **kwargs)
    return result
foo.bar.intercepted = interceptor # bar is an instance of ThirdyPartyLibB.Bar
foo.do_its_job() # Foo.do_its_job calls Bar.intercepted 
```

我需要这个来改变与 ThirdyPartyLibB.Bar 交互时 ThirdyPartyLibA.Foo 的不良行为。由于反汇编程序，我确切地知道导致这种行为的原因以及如何更改 Foo 或 Bar 来修复此错误。

一些（不太可能奏效）的想法：

*   反汇编 ThirdyPartyLibA，更改代码并生成兼容的程序集（不太可能工作，因为它是强名称程序集）
*   编辑二进制文件以使 Foo 的错误方法虚拟化并更改使其保持有效程序集所需的任何内容，以便我可以使用动态代理（非常不可能工作，也因为与上述想法相同的原因）
*   找到适合的透明动态代理实现（我认为没有基于此论坛主题：[http ://www.pcreview.co.uk/forums/overriding-non-virtual-methods-using-il-and-reflection-发射-t2605695.html](http://www.pcreview.co.uk/forums/overriding-non-virtual-methods-using-il-and-reflection-emit-t2605695.html) )
*   联系创建库的公司（他们不再支持该产品）
*   停止使用该库或使用替代方案（不可能，因为它是我们绑定的 RAD IDE 运行时的一部分，因为有大量代码是使用 IDE 自己的语言编写的）
*   控制对有问题的方法的调用以避免错误（我们已经这样做了，但并没有完全解决问题）

你还有别的想法吗？

PS：对不起我的英语不好。另外，对不起我的 Python。这段代码只是为了说明我需要什么，不要把它当作食谱，因为它太可怕了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:17:17.623

## 可能的解决方案1：

包装库并使用 ReSharper 之类的工具来查找库的所有用法并替换为包装器类。您还可以利用这个机会清理第三方库可能很糟糕的界面。

## 可能的解决方案2：

虽然[TypeMock](http://www.typemock.com/)通常用作测试工具，但它可以让您模拟所有内容。因为它将自己作为代码分析器注入，所以您可以模拟的内容包括类的私有和静态成员。作为奖励，任何重写的方法都不需要是虚拟的，因此您可以通过这种方式拦截调用。

## 我的推荐

我建议您使用解决方案 1。包装器非常容易理解，它会给您一个真正改进代码的好机会。我什至建议您将第三方库包装为一般规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:10:24.930

如果 Bar 是静态的，您也许可以使用[Moles](http://msdn.microsoft.com/en-us/library/ff798308.aspx)绕过方法调用。请注意，这是修复错误的一种非常严厉的方法，实际上不建议用于生产代码，但如果您不顾一切，这是一个选择。

# iphone - 如何更改 plist 文件

> ID：11763169
> 
> 赞同：1
> 
> 时间：2012-08-01T16:02:19.640
> 
> 标签：iphone, xcode

我有这样的问题：我有一个 plist 文件，我通过将它添加到另一个项目的资源文件中来制作它，现在我可以阅读它，但我现在不知道如何更改它。如果可以的话，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:55:38.960

我们不能直接写入我们的应用程序包，因此我们需要将我们的 plist 复制到应用程序的文档目录以供此使用：

```
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"yourPlistName.plist"];

NSFileManager *fileManager = [NSFileManager defaultManager];

if (![fileManager fileExistsAtPath: path])
{
     NSString *bundle = [[NSBundle mainBundle] pathForResource:@”yourPlistName” ofType:@”plist”];

     [fileManager copyItemAtPath:bundle toPath: path error:&error];
} 
```

然后用于编辑 plist 使用：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:@"yourPlistName.plist"];
    NSFileManager *fileManager = [NSFileManager defaultManager];

if ([fileManager fileExistsAtPath: plistPath ]) 
{
    NSMutableDictionary* infoDict = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath];
    [infoDict setObject:[NSNumber numberWithBool:hidden] forKey:@"yourKey"];
    [infoDict writeToFile:plistPath atomically:YES];
} 
```

这`yourPlistName.plist`是您的 plist，并且`yourKey`是您为其设置新值的键。

有关更多信息，请查看此[视频](http://www.youtube.com/watch?v=3Oy-evy2xD8)。

# java - 我可以在 iPhone 4s 上运行 MIDlet 吗？

> ID：11763170
> 
> 赞同：1
> 
> 时间：2012-08-01T16:02:23.860
> 
> 标签：java, iphone, ios, netbeans, midlet

我正在尝试使用 Netbeans 7.2 为学校的一个项目制作一个类似于常用“Hello World”的简单应用程序。我只是想知道我是否可以在 iPhone 4s 上运行它？如果没有，三星 GT-15503 可以工作吗（我最初计划制作一个 Android 应用程序，但它对我来说不太好用）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:26:31.053

iOS 没有 Java 实现，所以不，您的应用程序不会在 iPhone 4S 上运行。据我所知，三星也不会直接运行 MIDlet。您最好查看 developer.android.com 以获取有关如何开始 Android 开发的指南。

# eclipse-rap - Eclipse RAP，Tabris：刷新浏览器后样式消失了

> ID：11763178
> 
> 赞同：1
> 
> 时间：2012-08-01T16:02:44.070
> 
> 标签：eclipse-rap, tabris

我使用 Tabris 编写了一个 Web 应用程序。我在 ApplicationConfiguration 中使用以下行自己设置了应用程序的样式：

```
application.addStyleSheet("SandboxTheme", "sandbox.css");
application.addStyleSheet("SandboxTheme", "sandbox-table.css");
Map<String, String> properties = ImmutableMap.of(WebClient.THEME_ID, "SandboxTheme");
application.addEntryPoint("/sandbox", EntryPoint.class, properties); 
```

如果我这样做，我会遇到刷新浏览器时未应用我的 css 文件中定义的样式的情况。它仅在第一次应用（重新启动服务器并打开 Web 应用程序后）。

请在[此处](https://github.com/baumato/TabrisSandbox/blob/master/TabrisSandbox/src/org/tobbaumann/tabris/sandbox/Configuration.java)查看完整的源代码。它使用 default.css 文件的副本。请看[这张照片](http://dl.dropbox.com/u/962415/RefreshCausesStyleError.jpg)。

非常有趣的是没有出现刷新问题，如果我使用这样的默认主题：

```
//application.addStyleSheet("SandboxTheme", "sandbox.css");
//application.addStyleSheet("SandboxTheme", "sandbox-table.css");
application.addStyleSheet(RWT.DEFAULT_THEME_ID, "sandbox-table.css");
//Map<String, String> properties = ImmutableMap.of(WebClient.THEME_ID, "SandboxTheme");
application.addEntryPoint("/sandbox", EntryPoint.class, null); 
```

期待您的答复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:54:30.413

这听起来很奇怪。我想这是一个 tabris 错误。没有进一步调查，我只能猜测问题是什么。我已经打开了一个 Tabris 问题来追踪它，请参阅[https://github.com/eclipsesource/tabris/issues/13](https://github.com/eclipsesource/tabris/issues/13)

# c++ - C++：从运行时维度信息创建指针类型

> ID：11763181
> 
> 赞同：0
> 
> 时间：2012-08-01T16:02:56.787
> 
> 标签：c++, templates, generics, generic-programming

我想做这样的事情：

```
template<typename CType, unsigned int targetDimensions> struct GeneratePointerType
{
    typedef typename GeneratePointerType<CType, targetDimensions-1>::type* type;
    static const unsigned int dimensions = GeneratePointerType<CType, targetDimensions-1>::dimensions+1;
};
template<typename CType> struct GeneratePointerType<CType, 0>
{
    typedef CType type;
    static const unsigned int dimensions = 0;
};

Dictionary<int, GeneratePointerType<int, valueDimensions>::type > 
```

所以基本上我想为指针类型实例化一个容器模板，但我不知道要在运行前创建的指针的指针级别，所以上面的方法当然不能编译，因为“维度”不是一个编译时常量。

有没有办法（与纯 C++03 兼容，没有任何 C++11 唯一功能）来实现预期的行为？

编辑：“如果你能告诉我们真正的问题，我们可能会有更好的解决方案。” “所以为了澄清，你想要一个 N 维数组/对象的映射，其中 N 是运行时值？奇怪。我无法想象一个用例”好的，让我告诉你一些关于用例的话：

我有一个类模板字典，它基本上就像 C# 或 Java 字典泛型一样。

此类在 C 库周围的 C++ 包装器库中使用。

因此，我有转换函数，可以在 C++ 容器类的实例和 C 容器结构的实例之间转换数据。

如你所知，C 没有泛型，所以在 C++ 中我可以创建这样的容器：

```
Dictionary<int, int**> dict; 
```

在 CI 中必须这样做：

```
CDictionary dic;
dic.keytype = TYPECODE_INT;
dic.valuetype = TYPECODE_INT;
dic.valueDimensions = 2; 
```

现在，当将 C 字典转换为 C++ 字典时，我很难生成正确数量的 *，因为存储在 C 字典中的信息不是编译时间常数。

EDIT2：实际上，我从底层 C 接口获取运行时维度计数并不重要，因为 C 库从通过网络传入的序列化数据创建这些结构，并且不可能知道库的编译时间，从另一个应用程序以可能的另一种编程语言通过网络传入的数组将具有多少个数组维数，反序列化的 C++ 实现仍然必须根据运行时信息确定字典的值类型数组维度。

EDIT3：“好的，我认为你需要说明你想如何使用这个结构，因为我显然没有正确解释你的问题，而且这些信息都不在问题中。你可以编辑一些伪代码来显示你的内容'再努力实现？” 调用公共接口：

```
Dictionary<int, int*> dic;
int* arr = new int[10];
dic.put(1, arr, a0);
delete arr;

send(dic); // dic gets serialized and sent over the netwowork 
```

收到序列化的 dic 时，我想在将其传递给回调之前将其反序列化：

```
// read out typecodes and dimnesions from the serialized data
// [...]
// create the Dictionary from that info
switch(valueTypeCode)
{
    case TYPECODE_SHORT:
        return new Dictionary<int, GeneratePointerType<short, valueDimensions>::type>[size]();
    case TYPECODE_INTEGER:
        return new Dictionary<int, GeneratePointerType<int, valueDimensions>::type>[size]();
}
// fill it with the deserialized payload afterwards
// [...] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:03:19.150

如果参数`N`在编译时未知，则不能使其成为静态类型的一部分。因此，您肯定必须使用*某种*运行时调度。

可能的选择是：

1.  只需对`C`结构进行浅层包装（提供运算符重载和其他方法，封装底层数据）并以完全相同的方式访问它

    ```
    class Dictionary {
        CDictionary *inner;
    public:
        // C++ syntactic sugar here
    }; 
    ```

2.  如果*上面*`N`有一些合理的值（例如，你可以假设），你可以为每个有效的 N 实例化一个模板类，它实现了一个抽象接口。然后你的模板实例被隐藏在一个翻译单元中，它只公开一个公共（虚拟）接口和一个工厂函数；实际访问使用运行时多态性*`N < 10`*

     *```
    class AbstractDictionary {
    public:
        virtual ~AbstractDictionary() = 0;
        // virtual methods
    };
    AbstractDictionary* wrap(CDictionary *); 
    ```*

# r - R下对文件（txt，csv）的低级访问（仅读取选定的行，而不将整个文件读入内存）

> ID：11763184
> 
> 赞同：1
> 
> 时间：2012-08-01T16:03:07.127
> 
> 标签：r, perl, csv, bigdata

是否有任何简单的 R 函数可以在不将整个文件读入内存的情况下从文本文件（*.txt 或特别是 *.csv）中读取特定行？我想只读取文件的选定行，例如只读取具有以下内容的行`x1==b`：

```
x1 x2 x3
a  1  1
a  2  2
b  2  3
b  1  4
a  2  1
->   
x1 x2 x3
b  2  3
b  1  4 
```

也许是 R 的一些 Perl 工具，但它容易吗（对于 R 用户）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:11:27.137

默认`read.*`函数都默认读取所有内容。因此，一种选择是使用外部过滤器——例如 awk 或 sed 脚本，或 grep 表达式——然后`read.table()`在过滤后从该流中读取。

# tomcat - Tomcat 独立从外部 ip 访问

> ID：11763185
> 
> 赞同：2
> 
> 时间：2012-08-01T16:03:09.297
> 
> 标签：tomcat, ip, external

我的tomcat服务器在eclipse中运行良好，但是当我使用独立的tomcat时，我无法从本地主机的外部ip访问它..有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:15:46.907

在 Tomcat 安装目录中的目录下查找`server.xml`文件。`/conf`找到`<Connector>`声明并添加`address="0.0.0.0"`：

```
<Connector port="8080" address="0.0.0.0" 
```

# c# - WebBrowser 文档完成事件 C#

> ID：11763189
> 
> 赞同：3
> 
> 时间：2012-08-01T16:03:40.290
> 
> 标签：c#, webbrowser-control

下面是我用作浏览器`DocumentCompleted`事件的函数，也是`navBtnClick()`负责创建 Web 浏览器并导航到特定 url 的方法。

```
public void WebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) {

                MessageBox.Show( ((WebBrowser)sender).Url.ToString() );

}

private void navBtnClick(object sender, EventArgs e)
{
            WebBrowser wbrowser = new WebBrowser();
            wbrowser.DocumentCompleted +=new WebBrowserDocumentCompletedEventHandler(WebBrowser_DocumentCompleted);
            wbrowser.Navigate("http://www.google.com");

} 
```

现在执行此行后`wbrowser.Navigate("http://www.google.com");`，会出现一个正确显示 url 的消息框，然后稍后会显示另一个具有相同 url 的消息框。所以，发生的事情是，无论`DocumentCompleted`事件处理程序上的什么，都会被执行两次。有人可以帮我让它只执行一次吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T16:35:19.970

我记得，如果要导航到的文档具有嵌入其他网页的 iframe，则 DocumentCompleted 将触发多次。

如果您只想接收一次事件，只需取消订阅 DocumentCompleted 处理程序：

```
public void WebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) 
{
   var webBrowser = sender as WebBrowser;
   webBrowser.DocumentCompleted -= WebBrowser_DocumentCompleted;
   MessageBox.Show(webBrowser.Url.ToString() );
}    

private void navBtnClick(object sender, EventArgs e)
{
     var wbrowser = new WebBrowser();
     wbrowser.DocumentCompleted +=new WebBrowserDocumentCompletedEventHandler(WebBrowser_DocumentCompleted);
     wbrowser.Navigate("http://www.google.com");
} 
```

* * *

或者，您可以使用 System.IObservable 和[ReactiveExtensions](http://msdn.microsoft.com/en-us/library/hh242978%28v=vs.103%29)来订阅一个事件触发：

```
private void navBtnClick(object sender, EventArgs e)
{
     var browser = new WebBrowser();
     var docCompleted = Observable.FromEventPattern<WebBrowserDocumentCompletedEventArgs>(browser, "DocumentCompleted")
     docCompleted
         .Take(1) // Take only one event firing
         .Subscribe(i => MessageBox.Show(browser.Url.ToString()));

     browser.Navigate("http://www.google.com");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:31:43.950

对我来说，[http://www.google.com](http://www.google.com)重定向到[http://www.google.ca](http://www.google.ca)。如果您发生类似的事情，您可能会为这两个文档中的每一个获取文档完成事件。尝试输出/跟踪`WebBrowserDocumentCompletedEventArgs.Url`以查看完成的文档。

# c++ - std::vector 适用于不可默认构造的类？

> ID：11763203
> 
> 赞同：11
> 
> 时间：2012-08-01T16:04:13.847
> 
> 标签：c++, stl, vector, c++11

我在几个地方读到 std::vector 要求它的模板参数是默认可构造的。今天我刚刚用我的一个具有`delete`d 默认构造函数的类进行了尝试，令我惊讶的是，它似乎工作得很好（使用 std::vector 的默认构造函数）。这是可移植的行为，还是 gcc 的 STL 的实现细节，我应该假设 vector 要求它的模板参数是默认可构造的？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-01T17:10:07.887

There are two `vector<T>` members that require a default constructible `T` in C++11:

```
explicit vector(size_type n);
void resize(size_type sz); 
```

Nothing else does. So if you use these signatures, you need to have a default constructible type, else you do not.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-01T16:13:59.157

C++03 中的要求是存储在容器中的类型是`CopyConstructible`和`Assignable`（参见 §23.1 容器要求）。但是，在 C++11 中，这些要求被放宽了，并且倾向于适用于在容器上执行的操作。因此，一个简单的默认构造没有任何要求（参见 teble 96, §23.1 in C++11 标准）。

只要您尝试复制矢量或向其中插入元素，您将满足`CopyInsertable`, `CopyAssignable`, `EmplaceConstructible`,`MoveInsertable`等`MoveAssignable`要求

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-01T16:56:36.990

`std::vector`不无条件地要求其元素类型是默认可构造的。

(C++98, C++03)的原始规范`std::vector`甚至从未尝试在内部默认构造其元素。所有新元素总是从“从外部”（由调用代码）作为参数提供的对象*复制构造。*这意味着每次您需要向量中的默认构造元素时，您*的*代码（调用者）必须默认构造它并将其`std::vector`作为要复制的“原始”元素提供。

例如，当你在 C++98 中做这样的事情时

```
std::vector<some_type> v(42);
v.resize(64); 
```

it actually expands into

```
std::vector<some_type> v(42, some_type(), allocator_type());
v.resize(64, some_type()); 
```

through the default argument mechanism. In other words, the default-constructed "original" element is supplied to vector's constructor by the calling code, not created internally by the vector.

C++11 changed that and now `std::vector` has methods that perform default construction of its elements *internally*. This still does not unconditionally require vector elements to be default-constructible. It just means that you need default-constructible elements to use those specific `std::vector`'s methods.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-01T16:10:35.237

嗯，模板在某种意义上是弱类型的。也就是说，在您的代码调用使用它的方法之前，可能不会在内部检测到缺少的默认构造函数——这将产生编译时错误。

但是，除非您不接触在内部使用默认构造函数的方法，否则您是“安全的”。但是，我不知道哪个是“安全”子集，并且我怀疑它没有被标准定义。示例：向量复制可能使用`resize`，而后者又可能使用默认构造函数。

# python - 如何使用 pandas read_csv 函数有效地处理欧洲小数点分隔符？

> ID：11763204
> 
> 赞同：9
> 
> 时间：2012-08-01T16:04:15.617
> 
> 标签：python, csv, decimal, pandas

我`read_csv`用来将 CSV 文件读入 Pandas 数据帧。我的 CSV 文件包含大量小数/浮点数。这些数字使用欧洲十进制表示法编码：

```
1.234.456,78 
```

这意味着'.' 用作千位分隔符，',' 是小数点。

熊猫 0.8。提供一个`read_csv`名为“千”的参数来设置千位分隔符。还有一个额外的论点来提供小数点吗？如果不是，解析欧式十进制数的最有效方法是什么？

目前我正在使用字符串替换，我认为这是一个显着的性能损失。我使用的编码是这样的：

```
# Convert to float data type and change decimal point from ',' to '.'
f = lambda x: string.replace(x, u',', u'.')
df['MyColumn'] = df['MyColumn'].map(f) 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2019-05-13T14:47:24.770

对于欧式编号，请使用 中的`thousands`和`decimal`参数`pandas.read_csv`。

例如：

```
pandas.read_csv('data.csv', thousands='.', decimal=',') 
```

从[文档](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html)：

> **千**：
> 
> str，可选的千位分隔符。
> 
> **十进制**：
> 
> str，默认 '.' 识别为小数点的字符（例如，对欧洲数据使用​​“,”）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T16:21:23.337

您可以使用`converters`kw in `read_csv`。像这样给出`/tmp/data.csv`：

```
"x","y"                                                                         
"one","1.234,56"                                                                
"two","2.000,00" 
```

你可以做：

```
In [20]: pandas.read_csv('/tmp/data.csv', converters={'y': lambda x: float(x.replace('.','').replace(',','.'))})
Out[20]: 
     x        y
0  one  1234.56
1  two  2000.00 
```

# c++ - 我缺少什么来创建套接字？

> ID：11763210
> 
> 赞同：-2
> 
> 时间：2012-08-01T16:04:29.333
> 
> 标签：c++, sockets

我正在尝试通过 C 创建客户端/服务器，这是我的第一次 C 编程学习，我只想通过 localhost 进行连接，而不是通过互联网，我缺少什么。我该如何修复它并让我的服务器启动并运行，我应该输入什么来让我的客户端连接到我的服务器。

我需要创建一个可以与客户端发送和接收的服务器。对不起，我是 C 编程的新手，只是在学习阶段，请原谅我缺乏经验，并且很想向这里的专家学习。

下面是我的主要代码

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <sys/un.h>
#include <sys/types.h>
#include <sys/socket.h>

using namespace std;

int main()
{
int serverFd;
int clientFd;
struct sockaddr_un serverAddress;

cout << "" << endl;
cout << "Running server program 'css' ...... " << endl;
cout << "" << endl;

// SOCKET CREATION PART - SERVER
serverFd = socket (AF_LOCAL, SOCK_STREAM, 0);

/* Set domain type */
serverAddress.sun_family = AF_LOCAL; 

/* Set name */ 
strcpy (serverAddress.sun_path, "Server"); 

/* Remove file if it already exists */ 
unlink ("Server"); 

/* Create file */
bind (serverFd, serverSockAddrPtr, serverLen);

// SOCKET CREATION END - SERVER

return 0;
} 
```

我得到的错误：

```
CountryServer.c:39:17: error: ‘serverSockAddrPtr’ was not declared in this scope
CountryServer.c:39:36: error: ‘serverLen’ was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:30:15.457

正如错误所说，您正在使用尚未声明的名称（`serverSockAddrPtr`和）。`serverLen`你想要的是结构的*地址*和*大小*`serverAddress`：

```
bind (serverFd, 
      reinterpret_cast<sockaddr const *>(&serverAddress), 
      sizeof serverAddress); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:09:08.007

您缺少一些标题。

根据[此联机帮助页](http://basepath.com/aup/ex/structsockaddr__un.html)，`struct sockaddr_un`在`sys/un.h`.

# php - 具有用户本地列表的网站，仅用于存储数据，简单表

> ID：11763215
> 
> 赞同：0
> 
> 时间：2012-08-01T16:04:54.553
> 
> 标签：php, mysql, database, database-design

这就是我所做的。它是一个带有登录页面的网站。登录后，您可以访问一个表格，您可以在其中修改以保存有关漫画书的信息（例如，您拥有哪些漫画书、发行、卷等）。我有一个带有两个表的 MySql 数据库，用户信息和漫画信息。我已经设置，如果您在用户表中（例如已注册），那么您可以访问数据库，但数据库是全局的。用户中的每个人都会看到相同的漫画列表。

（对不起，解释太长了，只是想尽可能清楚）

我不担心安全性，因为它仅供大约 10 个人（朋友）使用，而且我对 PHP 和 mysql 也比较陌生。上述工作是大量研究和教程的结果。

我的问题是，我将如何让每个用户拥有他们自己的个人列表，他们可以在其中修改以添加他们自己的漫画信息，并且只有他们在登录后才能访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:09:48.613

创建一个包含两个字段的表，`user_id`然后`comic_id`.

该表中的每个条目对应于`user_id`拥有 id 漫画的 id用户`comic_id`。

这就是通常所说的用户和漫画之间的多对多关系。

### 补充材料：

*   [MySQL 高级 - 介绍多对多第 1 部分（在 YouTube 上）](http://youtu.be/SENtNG5SSIc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:20:06.177

一种方法是在您的表上添加一个“user_id”列`comicbook`。

然后可以修改您的 SELECT 查询以在 WHERE 子句中添加谓词

```
SELECT c.id
 FROM comicbook c
 WHERE c.user_id = ? 
```

您为查询中“登录”的用户提供 user_id 值，以代替该问号。

对于 DML 操作 INSERT 语句，您将“登录”用户的值插入到`user_id`列中。

对于 UPDATE 和 DELETE 操作，您向 WHERE 子句添加谓词，就像您对 SELECT 所做的那样。

使用这种方法，您可以有效地使单个`comicbook`表看起来像每个登录用户的单独表，其中每个用户只能查看和更新​​表的“部分”，而不能查看或修改未“标记”的行与他们的 user_id。

这可能是实现您既定目标的最简单方法。

* * *

此方法无法满足某些要求，例如当您想开始授予某些用户“特权”以查看其他用户的漫画时，但不是全部。但是当你开始实现它时，你仍然会认为`comicbook`表中的一行“属于”用户。

# javascript - 为什么我会得到：Object [object Object] 在 jquery 中没有方法？

> ID：11763224
> 
> 赞同：0
> 
> 时间：2012-08-01T16:05:25.270
> 
> 标签：javascript, jquery, html, dom

我正在尝试使用[jquery 垂直自动收](http://www.jugbit.com/jquery-vticker-vertical-news-ticker/)报机我尝试了一个仅包含自动收报机的测试页面，它工作正常。但是当我将它集成到我想要部署它的真实页面中时，它会给出这个错误：

```
Uncaught TypeError: Object [object Object] has no method 'vTicker' index.jsp:46
(anonymous function) index.jsp:46
jQuery.Callbacks.fire jquery-1.7.js:1064
jQuery.Callbacks.self.fireWith jquery-1.7.js:1182
jQuery.extend.ready jquery-1.7.js:437
DOMContentLoaded 
```

那是我的代码：

```
 <style type="text/css">

     #news-container
    {
        width: 400px; 
        margin: auto;
        margin-top: 30px;
        border: 5px solid #333333;
    }

    #news-container ul li div
    {
       border: 1px solid #aaaaaa;
       background: #ffffff;
     }
  </style>

 <script type="text/javascript" src="../assets/js/lib/jquery-1.7.js"></script>
        <script type="text/javascript" src="../assets/js/lib/jquery.vticker.js">   </script>
 <script type="text/javascript">

 jQuery(function(){
jQuery('#news-container').vTicker({ 
    speed: 500,
    pause: 3000,
    animation: 'fade',
    mousePause: false,
    showItems: 3
});
});
</script>
<script type="text/javascript" src="../assets/js/lib/all-concat.js"/> 
```

这是正文中的 html div：

```
 <div id="news-container">
<ul>
    <li>
        <div>
            1) Lorem ipsum dolor sit amet, porta at, imperdiet id neque. more info
        </div>
    </li> 
    <li>
        <div>

            2) Lorem ipsum dolor sit amet, consectetur adipiscing elit. more info
        </div>
    </li> 
    <li>
        <div>
            3) Lorem ipsum dolor sit amet more info more info more info more info
        </div>
    </li>   
    <li>
        <div>
            4) jugbit.com jquery vticker more info more info more info more info more info
        </div>
    </li>
</ul> 
```

知道为什么它在单独的页面中工作而不在这里工作吗？

# facebook - facebook 通过 Facebook javascript SDK 获取用户邮件

> ID：11763227
> 
> 赞同：-1
> 
> 时间：2012-08-01T16:05:34.427
> 
> 标签：facebook, facebook-javascript-sdk

如何检索登录到 fb 的用户邮件 ID（使用 Fb javascript sdk），我确实参考[了这里](https://stackoverflow.com/questions/7820485/how-to-get-email-id-of-facebook-user-using-javascript-sdk)，但我仍然得到**未定义的结果** ，这是我的代码：

```
 FB.getLoginStatus(function(response) 
    if (response.status === 'connected') {
    FB.api('/me', function(response) {

                 alert('Your mail is ' + response.email);

                },{scope:'email'});}
); 
```

请让我知道我错在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:06:49.917

除非您有权限，否则您无法检索电子邮件。您首先需要请求扩展权限。

# iphone - 查看导航问题 - 'NSInternalInconsistencyException'，原因：'无法在包中加载 NIB

> ID：11763230
> 
> 赞同：1
> 
> 时间：2012-08-01T16:05:53.073
> 
> 标签：iphone, objective-c

我是目标 C 编程的新手，所以我觉得这只是我正在做或没有做的非常愚蠢的事情......

我有一个 iPhone 应用程序并试图从一个视图导航到另一个视图。我连接了一个 segue，当我调用它时，如下所示：

```
[self performSegueWithIdentifier:@"ShowPolicyInformation" sender:sender]; 
```

它工作得很好。但是现在我想将一个值传递给我的新视图，据我所知，我不能用 segue 做到这一点。所以我在上面设置了一些属性，并试图更手动地导航到它：

```
PolicyInfoViewController *pol =[[PolicyInfoViewController alloc] initWithNibName:@"PolicyViewController" bundle:nil];
pol.PropertyOne=txtOne.text;
pol.strPropertyTwo=txtTwo.text;
[[self navigationController] pushViewController:pol animated:YES]; 
```

当我用上面的代码替换 performSeque 代码时，它构建得很好，但是当我运行它时出现这个错误： **Terminating app due to uncaught exception 'NSInternalInconsistencyException'，原因：'Could not load NIB in bundle:'NSBundle (loaded) ' 名称为 'MainMobileViewController''**

当我寻求有关此问题的帮助时，显示的所有建议都在谈论确保正确命名 .xib 文件....这是我完全迷失的地方，因为我没有任何 .xib我可以看到的文件。我正在使用情节提要，只需将视图拖放到上面并将其连接到我创建的类。那么......我犯了什么新手错误？我错过了什么？我正在使用 xCode 4.4，所以这只是与我在这些搜索中找到的不同的代码吗？任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:59:35.797

您可以仅使用 Story Board 来执行此操作，而不必为 PolicyInfoViewController 提供单独的 nib 文件……这样做可能更容易。

所以保留第一行代码：

```
[self performSegueWithIdentifier:@"ShowPolicyInformation" sender:sender]; 
```

您需要重写此方法来操作 PolicyInfoViewController 的属性

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"ShowPolicyInformation"]) 
    {
        PolicyInfoViewController *pol = segue.destinationViewController;
        pol.PropertyOne=txtOne.text;
        pol.strPropertyTwo=txtTwo.text;
    }
} 
```

那么这里发生了什么？您告诉控件执行情节提要中的特定转场的第一段代码。第二点你告诉控制当一个特定的 segue 被调用时要做什么。

# asp.net - GridView PageIndexChanging 事件

> ID：11763232
> 
> 赞同：1
> 
> 时间：2012-08-01T16:06:03.213
> 
> 标签：asp.net, gridview

我有一个gridview，我在后面的代码和我设置的PageIndexChanging事件上设置了boundfields和数据源：

```
protected void grvList_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
   grvList.PageIndex = e.NewPageIndex;    
    grvList.DataBind();
} 
```

BoundFields 也来自数据库，我这样添加它们：

```
foreach (DataRow drColumn in dtColumns.Rows)
{
   BoundField bfEmbeddedColumn = new BoundField();    
   bfEmbeddedColumn.HeaderText = drColumn["ColName"].ToString();    
   bfEmbeddedColumn.DataField = drEmbeddedTaskColumn["ColName"].ToString();    
   bfEmbeddedColumn.ItemStyle.Width = 120;    
   grvList.Columns.Add(bfEmbeddedColumn);
} 
```

它确实显示了下一页上的记录，但我的问题是每次更改页面索引时都会再次添加绑定字段。我怎样才能防止这种情况发生，有办法解决这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:17:41.153

您必须将以下索引移动到变量 e 到寻呼机。
尝试这个：

```
 grdSqlQuery.PageIndex = e.NewPageIndex
    grdSqlQuery.DataSource = ViewState("dts_Sqlquery")
    grdSqlQuery.DataBind() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:18:21.463

找到了解决方案。我的问题是由于`Page_Load`我`boundfields`一遍又一遍地添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:31:33.357

```
protected void GridView1_PageIndexChanged(object sender, EventArgs e)
{
        try
        {
        int count = 0;
        SetData();
        GridView1.AllowPaging = false;
        GridView1.DataBind();
        ArrayList arr = (ArrayList)ViewState["SelectedRecords"];
        count = arr.Count;
        for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            if (arr.Contains(GridView1.DataKeys[i].Value))
            {
                Session.Add("PatientID", GridView1.DataKeys[i].Value.ToString());
                arr.Remove(GridView1.DataKeys[i].Value);
                Response.Redirect("~/EditPaitientDetails.aspx");
            }
        }
        ViewState["SelectedRecords"] = arr;
        hfCount.Value = "0";
        GridView1.AllowPaging = true;
        BindGrid();

        //ShowMessage(count);
    }
    catch (Exception ex)
    {

    }

}
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    BindGrid();
} 
```

# cordova - 在电话间隙中获取应用程序目录

> ID：11763233
> 
> 赞同：10
> 
> 时间：2012-08-01T16:06:05.637
> 
> 标签：cordova

使用 phone gap build 的文件 api，我想获取应该存储所有文件的应用程序目录。

我需要使用什么命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:12:33.677

```
function gotFS(fileSystem) {
    console.log("got filesystem");
    // save the file system for later access
    console.log(fileSystem.root.fullPath);
    window.rootFS = fileSystem.root;
}

document.addEventListener('deviceready', function() {                
    window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}, false); 
```

使用此代码，您将拥有存储在全局变量“rootFS”中的应用程序根目录的 DirectoryEntry 对象。您可以像这样获取该文件夹的路径：

```
rootFS.fullPath 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-31T07:12:02.863

您可以使用 cordova.file.applicationDirectory 来获取您的应用程序目录。它将解析为 android 中的 file:///android_asset/ 和 IOS 中的 /var/mobile/Applications//.app/

您可以在 android 和 iOS 的 www 目录中获取所有应用程序文件。

```
window.resolveLocalFileSystemURL(cordova.file.applicationDirectory+'www/index.html',success,fail);
function success(fileEntry){
console.log("got the file object")
}
function fail(error){
console.log("error");
} 
```

要在将存储您的应用程序文件的文件系统上获取应用程序目录，可以通过 cordova.file.applicationStorageDirectory 获取，该目录还包含两个目录文件，并且缓存都是持久的。

您可以查看链接以获取更多详细信息..

[https://github.com/apache/cordova-plugin-file/blob/master/doc/index.md](https://github.com/apache/cordova-plugin-file/blob/master/doc/index.md)

# jquery - 带有可拖动事件的 Jquery Colorbox？

> ID：11763235
> 
> 赞同：1
> 
> 时间：2012-08-01T16:06:13.690
> 
> 标签：jquery, draggable, colorbox, jquery-ui-draggable

我正在尝试在我的[颜色框](http://www.jacklmoore.com/colorbox)弹出窗口上实现一个可拖动的选项。有人遇到过这个吗？我已经使用[Ui draggabl](http://jqueryui.com/demos/draggable/) e 以防万一。

这**例如。**下面还展示了如何将它与 jScrollPane 一起使用。

```
 $('#TGB .terms-conditions').colorbox({
        width: 466,
        height: 526,
        inline: true,
        'opacity': 0.6,
        onComplete: function () {
            $('#cboxLoadedContent').jScrollPane({animateTo: true});
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:28:00.950

这是解决方案：

我使用了 UI JQUERY

$('#colorbox').draggable();

# java - java rest流式上传

> ID：11763237
> 
> 赞同：3
> 
> 时间：2012-08-01T16:06:14.587
> 
> 标签：java, rest, upload, streaming

使用 Rest webservices (WS) 上传大小在 10 到 50 MB 之间的文件 目前，我们使用 Java、Jax-RS 和 CXF 来完成。

这个堆栈的行为是通过将上传的文件写入临时文件来缓冲上传的文件（因为我们有大文件）。这对大多数用户来说都很好。

是否可以直接从套接字输入流式传输？（不是来自内存中的整个文件，也不是来自临时文件）

我的目的是减少 IO 和 CPU 的开销（每个文件被写入两次：1 个缓冲区和 1 个最终文件）。WS 只需将文件（有时在同一个 HTTPrequest 中的多个文件）写入我从 HTTP 查询字符串计算的路径。

感谢您的关注

# c# - 如果我运行一个需要 5 分钟才能完成的存储过程，我的代码序列会在存储过程完成之前继续吗？

> ID：11763242
> 
> 赞同：4
> 
> 时间：2012-08-01T16:06:20.857
> 
> 标签：c#

如果我有一个程序运行一个需要大约 5 分钟才能运行的存储过程，例如：

```
Database.RunJob(); -- takes 5 mins to complete
MessageBox.Show("Hi"); 
```

问题 - 在Database.RunJob() 完成**之前**，消息框是否会显示“Hi” ？

如果是这样，在继续执行下一行代码之前，如何确保查询已完成？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T16:10:00.107

信息不足，无法给出有意义的答案。

我们可以给出的最佳答案是：这取决于 Database.RunJob() 是同步的还是异步的。

*   如果 .RunJob 是同步的（即在当前线程上运行），则 MessageBox.Show 在 .RunJob 完成之前不会运行。

*   如果它是异步的，产生其他线程来完成工作，那么 MessageBosh 将在工作完成之前立即执行。

由于您没有展示 RunJob 的实际作用，因此我们无法更准确地回答。

* * *

**假设 .RunJob 是异步的。**如果那个方法的设计者值得他的盐，他会从那个方法中返回一些东西；理想情况下是[Task<T>](http://msdn.microsoft.com/en-us/library/dd321424.aspx)。

如果他返回一个任务，您可以像这样编写您的 C# 5 代码：

```
async void RunJobAndShowSuccessMessage()
{
     await Database.RunJob();
     MessageBox.Show("Hi, the job is done!");
} 
```

* * *

**假设 .RunJob 是同步的**，仅在当前线程上运行。这意味着您可能不想在 UI 线程上运行它；这样做会导致您的应用程序 UI 冻结 5 分钟。

为了避免这种情况，让我们自己在不同的线程上运行数据库作业，以便应用程序 UI 保持响应：

```
async void RunJobAndShowSuccessMessage()
{
    // Spawn a task to run in the background.
    await Task.Factory.Start(() => Database.RunJob());
    MessageBox.Show("Hi, the job is done!");
} 
```

# php - 元刷新不会刷新

> ID：11763243
> 
> 赞同：1
> 
> 时间：2012-08-01T16:06:23.570
> 
> 标签：php, html, page-refresh

是否需要让您的元刷新线高于您的`</head>`线？就我而言，我不能，因为我必须解析一些变量来指示页面自动刷新的秒数。所有这些都发生在我的页面中间，我也把这个标签放在中间。我的成功率一直很好，但有时根本不会刷新。

是否有任何其他我可以使用的刷新代码可以保证 100% 的成功率？

我在这里使用的标签是：

```
<meta http-equiv="refresh" content="<?=$now['rsecs'];?>" url="&session<?=rand(1,999999999999)?>"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:13:07.267

您的语法错误：

```
<meta http-equiv="refresh" content="<?php echo $now['rsecs'];?>;URL='&session=<?php echo rand(1,999999999999);?>'"> 
```

我不确定仅将 &session 添加到 url 路径是否会将您发送到正确的位置。也许包括完整的网址？

```
URL='http://www.your-site.com/page.html?othervars=othervals&session=<?php echo rand(1,999999999999);?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:12:16.760

看到这个网址： -

[http://davidwalsh.name/automatically-refresh-page-javascript-meta-tags](http://davidwalsh.name/automatically-refresh-page-javascript-meta-tags)

[http://www.techtricky.com/how-to-refresh-page-or-part-of-the-page-automatically/](http://www.techtricky.com/how-to-refresh-page-or-part-of-the-page-automatically/)

尝试这个

JavaScript 方法

```
var timer = null;
function auto_reload()
{
  window.location = 'http://domain.com/page.php';
}

 <body onload="timer = setTimeout('auto_reload()',10000);"> 
```

或者

META标签方法

以下内容每 30 秒刷新一次页面。

```
<head>
<meta http-equiv="refresh" content="30" />
</head> 
```

或者

```
<meta http-equiv="refresh" content="0;http://www.example.com" /> 
```

或者

```
<meta http-equiv="refresh" content="0;URL=http://www.example.com" /> 
```

或者

```
<meta http-equiv="refresh" content="30;URL=http://intranet/page.asp?x=123" /> 
```

# javascript - d3.json() 为单个响应多次调用回调

> ID：11763250
> 
> 赞同：0
> 
> 时间：2012-08-01T16:06:39.667
> 
> 标签：javascript, ajax, json, jquery, d3.js

我创建了几个通用的函数来包装 d3.json() AJAX 函数。

```
this.getData4 = function(url, returnFunc, param1, param2, param3) {
  d3.json(url, function(returnData) {
    if (returnData !== null) {
      returnFunc(returnData, param1, param2, param3);
    }
  });
} 
```

是的，这很丑陋。忍受我。在此代码段的第二行和第三行插入断点将显示我的请求已正确发送。例如，我发送了 4 个请求，其中`param1`= 0、1、2 和 3。然后响应返回到匿名回调函数中，并且大多数将被重复 - 例如，我可能会返回一系列响应，其中`param1`= 1 , 1, 1, 0, 2, 2, 2, 3, 3, 3。

查看我的服务器日志，只有 4 个请求命中。查看 Chrome 中的网络选项卡，我看到了正确数量的响应。但是回调函数从 d3 内部被多次调用。

更多信息：我正在使用 d3 2.4.2。我还替换了 d3/lib 中的 jQuery 版本——d3 附带的 jQuery 是 1.4.2，即使是最新的 d3 似乎也是如此。然而，这个 jQuery 在其 AJAX 方法中存在严重的内存泄漏，为了解决这个问题，我在 jQuery 1.7.2 中删除了这个问题。D3 从未抱怨过更换，但由于我找不到有关此问题的其他信息，我怀疑这两个 jQueries 之间可能没有严格的兼容性。

# c# - 在 asp.net 中调用 gridview.Columns.RemoveAt 时出错

> ID：11763258
> 
> 赞同：0
> 
> 时间：2012-08-01T16:07:08.297
> 
> 标签：c#, asp.net, gridview

我收到一个错误：**索引超出范围。必须为非负数且小于集合的大小。\r\n参数名称：** 下面执行我的代码 gvGrid.Columns.RemoveAt(0) 时的索引。这里缺少什么？

```
gvGrid.DataSource = eCustomerMgr.GetCustHistory(oCust);
gvGrid.DataBind();  
gvGrid.Columns.RemoveAt(0); 
```

该代码块用于将数据导出到 Excel。

**更新：**使用@Lajos Arpad 的建议，这就是我所看到的：

![在此处输入图像描述](../Images/e5148e4a882e345fd9ad87ffa0022484.png)

但是，当我将鼠标悬停在 gvGrid.Columns.Count 上时，我得到 0

![在此处输入图像描述](../Images/e14c6ef837288c6823bed2f2d362b0bc.png)

为什么网格数显示为 0 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T00:53:53.603

我不知道为什么 Columns.Count 显示 0，但如果您对替代方案感兴趣，也许您可​​以尝试`gvGrid.HeaderRow.Cells[0].Visible = false;`0 是您要删除的列 # 的位置。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:09:02.707

在绑定之前先绑定，然后删除或删除数据源的列

```
gvGrid.DataSource = eCustomerMgr.GetCustHistory(oCust);
gvGrid.DataBind();  
gvGrid.Columns.RemoveAt(0); 
```

在将列绑定到网格之前删除列，假设您有数据表

```
 DataTable t;
   t.Columns.Remove("columnName");
   t.Columns.RemoveAt(columnIndex); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T16:32:16.130

```
gvGrid.DataSource = eCustomerMgr.GetCustHistory(oCust);
gvGrid.DataBind();  
if (gvGrid.Columns.Count > 0)
{
    gvGrid.Columns.RemoveAt(0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:09:40.320

如果您确定数据，则首先是 DataBind，然后是 RemoveAt。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T16:12:02.480

首先确保`eCustomerMgr.GetCustHistory(oCust);`在删除列之前返回数据并绑定网格..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T17:50:15.783

首先确保您已经完成 `AutoGenerateColumns="False"`并定义了列名。

如果要动态删除列，则必须预定义列名称。例如。

```
 <Columns>
            <asp:BoundField DataField="Name" />
            <asp:BoundField DataField="Address" />
        </Columns> 
```

现在，当您删除零列时，它将删除该列。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-06T07:02:50.697

```
 if (gvGrid.Rows.Count > 0) {

  gvGrid.HeaderRow.Cells[0].Visible = false;

  for (int i = 0; i < gvGrid.Rows.Count; i++) {
   gvGrid.Rows[i].Cells[0].Visible = false;

  }
 } 
```

# angularjs - AngularJS 将值绑定到数据属性中

> ID：11763263
> 
> 赞同：15
> 
> 时间：2012-08-01T16:07:33.177
> 
> 标签：angularjs

有谁知道如何使用 AngularJS 将插值绑定到数据属性中？

```
<input type="text" data-custom-id="{{ record.id }}" /> 
```

Angular 似乎没有插入该值，因为它是元素结构的一部分。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T17:21:31.143

看起来毕竟没有问题。模板已解析，我的控制器正在下载数据，但是在解析模板时数据还不存在。我提出的指令需要数据在操作系统中，同时它只是拾取空的宏数据。

我解决这个问题的方法是使用 $watch 命令：

```
$scope.$watch('ready', function() {
  if($scope.ready == true) {
    //now the data-id attribute works
  }
}); 
```

然后，当控制器加载了所有 ajax 内容时，您可以执行以下操作：

```
$scope.ready = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T00:09:42.810

在我看来，您真正追求的是[Promise / Deferred](http://docs.angularjs.org/api/ng.%24q)：

```
// for the purpose of this example let's assume that variables '$q' and 'scope' are
// available in the current lexical scope (they could have been injected or passed in).

function asyncGreet(name) {
  var deferred = $q.defer();

  setTimeout(function() {
    // since this fn executes async in a future turn of the event loop, we need to wrap
    // our code into an $apply call so that the model changes are properly observed.
    scope.$apply(function() {
      if (okToGreet(name)) {
        deferred.resolve('Hello, ' + name + '!');
      } else {
        deferred.reject('Greeting ' + name + ' is not allowed.');
      }
    });
  }, 1000);

  return deferred.promise;
}

var promise = asyncGreet('Robin Hood');
promise.then(function(greeting) {
  alert('Success: ' + greeting);
}, function(reason) {
  alert('Failed: ' + reason);
); 
```

编辑：对，这是一个使用带有控制器和绑定的 Promise 的简单示例：

```
var app = angular.module('myApp', []);

app.controller('MyCtrl', function($scope, $q) {
    var deferredGreeting = $q.defer();
    $scope.greeting = deferredGreeting.promise;

    /**
     * immediately resolves the greeting promise
     */
    $scope.greet = function() {
        deferredGreeting.resolve('Hello, welcome to the future!');
    };

    /** 
     * resolves the greeting promise with a new promise that will be fulfilled in 1 second
     */
    $scope.greetInTheFuture = function() {
        var d = $q.defer();
        deferredGreeting.resolve(d.promise);

        setTimeout(function() {
            $scope.$apply(function() {
                d.resolve('Hi! (delayed)');
            });
        }, 1000);
    };
});​ 
```

工作 JSFiddle：http: [//jsfiddle.net/dain/QjnML/4/](http://jsfiddle.net/dain/QjnML/4/)

基本上这个想法是你可以绑定承诺，一旦异步响应解决它，它就会被实现。

# facebook - 打开 Graph 标签和 Facebook Like 按钮

> ID：11763265
> 
> 赞同：1
> 
> 时间：2012-08-01T16:07:36.063
> 
> 标签：facebook, api, facebook-like

一个非常基础的问题

我希望使用 Open Graph 中内置的“Like”按钮 - [https://developers.facebook.com/docs/opengraph/actions/builtin/likes/](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)

根据文档，我必须为要“喜欢”的对象提供以下对象属性

我在这里放了图片，但被告知我没有足够的声誉这样做

对象属性： TitleString DescriptionString ImageImage[] URLURL

我的问题是，我是否应该将 og 类型标签用于“like”对象属性，这些属性用于其他时间线对象的属性（参见下图，了解我正在创建的另一个对象的属性的图像）或这个对象是否只使用标准元标记？

属性：NameTypeSetting og:urlURLRequired og:titleStringRequired og:imageImage[]Required og:descriptionStringRequired 显示可选属性

他们目前在我的网站上设置了 Like 按钮，Facebook 似乎从 Og 标签和非 og 标签中提取数据。例如，目前我的 Like 按钮当前从我的描述元标记中提取与任何类型的 og 属性无关的信息 - og:description 根本没有被使用。

任何输入将不胜感激

# azure - 如果我将操作系统从 Windows Server 2008 切换到 Azure 中的 Windows Server R2，我是否应该期待任何变化？

> ID：11763272
> 
> 赞同：0
> 
> 时间：2012-08-01T16:08:05.860
> 
> 标签：azure, windows-server-2008, windows-server-2008-r2, production-environment

Azure 服务配置允许更改[`osFamily`](http://msdn.microsoft.com/en-us/library/windowsazure/ee758710.aspx). 目前有两种选择。值`1`（默认值）选择 Windows Server 2008，值`2`选择 Windows Server 2008 R2。

我目前使用默认值（2008）。

如果我只是更改为 R2，我应该期待哪些更改？会更快吗？有什么可能会破裂吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:28:02.173

您应该看到这一点，就好像您正在从 Windows Vista 升级到 Windows 7，如以下问题所述：[Windows Server 2008、2008 SP2 和 2008 R2 之间有什么区别？](https://serverfault.com/a/55422).

如果您正在构建 Web 应用程序，那么最大的影响可能来自 IIS。Windows Server 2008 使用 IIS 7.0，Windows Server 2008 R2 使用 7.5。在此处阅读差异：[Web 服务器 (IIS) 角色 (IIS 7) 中的新增功能](http://technet.microsoft.com/en-us/library/dd560629%28v=ws.10%29.aspx)

还有一份白皮书描述了新的和更改的功能和特性：[Windows Server 2008 R2 中的功能更改](http://www.microsoft.com/en-us/download/details.aspx?id=10237)。

要回答您的问题，如果有任何问题，我会说不（尽管总有可能出错）。我已经将许多应用程序部署到 Windows Azure，这从来没有给我带来任何问题。当我从 Windows Vista 升级到 Windows 7 时，感觉就像我在使用一个更成熟、更稳定、性能更好的系统，我敢相信服务器版本也是如此。优点是您将拥有可用的新功能，例如 Win32 支持挂载 VHD 文件（我认为这与您的 VHD 问题有关）。

# wordpress - WordPress 页面没有 .php 扩展名

> ID：11763276
> 
> 赞同：-2
> 
> 时间：2012-08-01T16:08:14.603
> 
> 标签：wordpress, seo

将我的网站转换为 WordPress 后，我确实注意到这些页面不再具有 php 扩展名。我的所有页面都被 Google 索引了，我一直想知道缺少 .php 扩展名是否会损害 SEO。有没有办法添加 .php 扩展名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:12:34.810

不，但是如果您不执行从旧 URL 到新 URL 的 301 重定向，那么您将在排名中受到影响，因为您实际上是重新开始。301 重定向会告诉 Google 和用户，您的网页已移动以及移至何处。完成后，PageRank 和页面排名（两个不同的东西）将被保留。不这样做会使每个页面看起来像一个没有链接等的新页面，因此不会像以前那样排名。

# javascript - 在 QML 中访问父函数

> ID：11763278
> 
> 赞同：4
> 
> 时间：2012-08-01T16:08:27.003
> 
> 标签：javascript, qml, blackberry-10

我目前正在创建一个 Twitter 客户端，作为学习为 Blackberry 10 开发的一种方式。我目前正在尝试为自定义 ListView 项创建一个上下文菜单，在选择时将在主布局中显示一个对话框。但是，我无法让选定的列表项从父页面调用任何函数。

这是我的自定义列表项中的 QML：

```
import bb.cascades 1.0

Container {

    property alias avatar: tracker.imageSource
    property alias username: txtTweetUser.text
    property alias tweetText: txtTweetContent.text
    property alias tweetTime: txtTweetTime.text

    signal sendReply(string username)

    function cout(text) {
        console.debug("[DEBUG] " + text);
    }

    id: itemTweet

    preferredWidth: 768;
    preferredHeight: 200

    // Actions
    contextActions: [
        ActionSet {

            title: "Action Set"
            subtitle: "This is an action set."

            actions: [
                ActionItem {                    
                    title: "Reply"
                    imageSource: "asset:///reply.png"
                    onTriggered: {
                        itemTweet.sendReply(txtTweetUser.text);
                    }
                },
                ActionItem {
                    title: "Retweet"
                    imageSource: "asset:///retweet.png"
                },
                ActionItem {
                    title: "Favourite"
                    imageSource: "asset:///fav.png"
                }
            ]
        } // end of ActionSet   
    ] // end of contextActions list

   <Layout for the List Item>...

    }
} 
```

对于主 QML 文件：

```
import bb.cascades 1.0

TabbedPane {
    id: tabbedPane
    showTabsOnActionBar: true

    Tab {
        id: tabTimeline
        title: "Timeline"
        imageSource: "asset:///twitter-white.png"

        Page {         
            id: pageTimeline

            signal openReply
            signal showNewTweet

            function cout(text) {
            console.debug("[DEBUG] " + text);
        }

            function showTweetWindow(username) {
                pageTimeline.dialogNewTweet.text = username;
                pageTimeline.dialogNewTweet.visible = true;
            }

            // Title bar
            titleBar: TitleBar {
                visibility: Overlay
                title: "Twitter"

                acceptAction: ActionItem {
                    id: btnNewTweet
                    title: "+"
                    ActionBar.placement: ActionBarPlacement.OnBar
                    onTriggered: {
                       pageTimeline.cout("action selected");
                       dialogNewTweet.visible = true;
                    }
                }
            }

            // Main content
            content: Container {

                layout: AbsoluteLayout {}

                Container { 
                    // Listview for the tweets
                    ListView {
                        id: lstTweets
                        objectName: "lstTweets"                 

                // Components to display the rows                   
                        listItemComponents: [
                            ListItemComponent {
                                id: listItem
                                type: "listItem"
                                TweetItem {                                                                                     
                                    tweetText: ListItemData.content
                                    tweetTime: ListItemData.time
                                    avatar: ListItemData.avatar
                                    username: ListItemData.username

                                    onSendReply: {
                                        cout("Reply selected in parent to " + username);
                                        pageTimeline.showTweetWindow(username);
                                    }
                                }
                            }
                        ]

                        onSelectionChanged: {
                        }

                        function itemType(data, indexPath) {
                            if (indexPath.length == 1) {
                                return "header";
                            } else {
                                return "listItem";
                            }
                        } 

                    }
                }

                DialogNewTweet {
                    id: dialogNewTweet
                    visible: false

                    onShowNewTweet: {
                        dialogNewTweet.visible = true;
                    }
                }

            }
            // End container    
        }
    }
    ... <Other tabs> ...

} 
```

因此，当主 QML 文件接收到 SendReply 信号时，应该调用`showTweetWindow(username)`它然后使其`dialogNewTweet`可见，但我得到了错误`ReferenceError: Can't find variable: pageTimeline`。这绝对是一个范围问题，但我无法弄清楚我做错了什么，或者我是否需要重组它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:25:28.490

在这里回答：

[https://community.blackberry.com/message/182467#182467](https://community.blackberry.com/message/182467#182467)

> 我需要实现的是对数据列表进行操作，例如使用QML ListItem 中的ContextAction 删除一个项目，然后在QmlDocument 的contextProperty 中调用一个对象的C++ 方法。我是这样做的：
> 
> C++ 代码：
> 
> ```
> QmlDocument *qml = QmlDocument::create("accounts.qml");
> root = qml->createRootNode<AbstractPane>();
> 
> //Here set the context property, accountsManager was already created
> qml->setContextProperty("accountsManager", accountsManager);
> 
> //Set the model for the list view
> ListView* accountsListView = root->findChild<ListView*>("accountsListView");
> accountsListView->setDataModel(accountsManager->getDataModel()); 
> ```
> 
> QML 代码：
> 
> ```
> Page {
>     content: Container {     
>         ListView {
>             id: listView
>             objectName: "accountsListView"     
> 
>         listItemComponents: [
>                 ListItemComponent {
>                     type: "listItem"
>                     StandardListItem{
>                         id: accountItem
>                         title: ListItemData.username                        
>                         contextActions: [
>                             ActionSet {
>                                 deleteAction: DeleteActionItem {
>                                     title: "Delete"
>                                     onTriggered: {
>                                         //it does not work here, "ReferenceError: Can't find variable: accountsManager"
>                                         accountsManager.doSometing();
>                                     }
>                                 }
>                             }
>                         ]
>                     }
>                 } 
>             ]
> 
>         function itemType(data, indexPath) {
>             return "listItem";
>           }     
>         } // end of ListView
>     } // end of Container
> 
>     actions: [
>         ActionItem {
>             title: "Add account"
>             ActionBar.placement: ActionBarPlacement.OnBar
> 
>             onTriggered: {
>                 //It works fine here
>                 accountsManager.doSomething();
>             }
>         }
>     ]
> } // end of Page 
> ```

还有另一种方法：

[https://community.blackberry.com/message/453794#453794](https://community.blackberry.com/message/453794#453794)

> 在顶部页面级别添加以下行以使标签可访问。
> 
> ```
> Page {
>     id: topPage    
>     onCreationCompleted: { Qt.topLabel = topLabel; } 
> ```
> 
> 然后在按钮定义中，您可以从列表中引用 Qt.topLabel。
> 
> ```
>  listItemComponents: [
>             ListItemComponent {
>                 type: "item"
>                 Button {
>                     text: "Change To Three"
>                     onClicked: {
>                         Qt.topLabel.text = "Three";
>                     }                        
>                 }
>             }
>         ] 
> ```

# html - 为什么我的 html 页面顶部有一个空行？

> ID：11763280
> 
> 赞同：0
> 
> 时间：2012-08-01T16:08:46.717
> 
> 标签：html

这是我的html代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<div>
kjkj
</div>
</body>
</html> 
```

Lve 演示： [http ://tinkerbin.com/O2MwkUTj](http://tinkerbin.com/O2MwkUTj)

为什么我的网页顶部有一个空白行？

我注意到删除 div 或删除 doctype 可以解决问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:14:29.387

这是因为廷克宾越来越糊涂了。

如果您将 HTML 放入文件中，它可以正常工作。在 Tinkerbin 中，预览中会发生以下情况：

```
<body>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <div>
    kjkj
    </div>
</body> 
```

我认为它正在删除一些标签，例如`<html>`,`<head>`和`<body>`输出页面时，以便显示在为预览创建的页面内。

# javascript - JQuery Masonry - 将 div 扩展到其他 div

> ID：11763285
> 
> 赞同：1
> 
> 时间：2012-08-01T16:09:03.083
> 
> 标签：javascript, jquery, jquery-masonry

我正在制作类似于 iphone 布局的东西（一堆带有图片/数字的图块，您可以单击以获取更多信息）。设置布局后，我想要一个点击事件来将其中一个图块展开为全屏。现在，它移动图块以重新调整布局。是否有可能让砖石停止渲染，以便一个瓷砖比其他瓷砖放大？

以下是我尝试过的（但没有成功）。注意：它使用 d3.js 生成 div 供砌体使用。

```
function drawGrid(divname,orders)
{   
var mydiv = d3.select(divname);
$(divname).masonry({
    itemSelector: '.g1',
    isAnimated: true,
    //isResizable: true
});

var myd = mydiv.selectAll("div");
var mygs = myd.data(orders,function(d){ return d.orderid;})
    .enter().append("div")  
    .attr("class","g1")
    .append("g");

var x1 = mygs.append("div")
        .attr("class","tickerdiv")
        .text(function(d){ return d.ticker; }); 

var ActiveOrder = "1";
$(divname+' .g1').click(function() {  
    //$(this).show('maximised');
    console.log("clicked")

    $(this).animate({"display":"none","position": "absolute",
        "top": "0",
        "left": "0",
        "width": "100%",
        "height": "100%",
        "z-index": 1000 }, 1000);
});
var x = [];
x.redraw = function(o)
{           
    x1.text(function(d){ return d.ticker; });
}
return x;
} 
```

并从 css 文件中：

```
.g1 { min-height:80px; width: 100px; margin: 15px; float: left; background-color: RGB(223,224,224); border-radius: 10px; vertical-align: middle; text-align: center; padding-top: 20px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:17:23.107

**编辑**好的，我的第一个答案在这里没有用 - 在砌体/同位素的相对定位容器中包含绝对定位元素的情况下，绝对定位将不起作用；解决方案是在单击时将 masonry/Isotope 元素的内容从 DOM 中取出，并将其临时附加到正文中。[你可以在我肮脏的瑞典沙箱中](http://www.hopfnordin.se/demo.html)看到基本的想法

```
<!-- masonry/Isotope item large -->

<div class="item large">
    <div class="header">
        <p>Click here</p>
    </div>
    <div class="minimised">
        <p>Preview</p>
    </div>
    <div class="maximised">
        <p>Content</p>
        <button id="screen-overlay-on">Screen overlay on</button>
        <div id="screen-overlay-background"></div>
        <div id="screen-overlay-content">
            <p>Content</p>
            <button id="screen-overlay-off">Screen overlay off</button>
        </div>​
    </div>
</div>

<script type="text/javascript">
$(document).ready(function(){

    $('#screen-overlay-on').click(function(){

        var sob = $('#screen-overlay-background').detach();
        var soc = $('#screen-overlay-content').detach();

        sob.appendTo('body');
        soc.appendTo('body');

        $('#screen-overlay-background').toggleClass("active");
        $('#screen-overlay-content').toggleClass("active");
    });

    $('#screen-overlay-background, #screen-overlay-off').click(function(){
        $('#screen-overlay-background').toggleClass("active");
        $('#screen-overlay-content').toggleClass("active");
    });

});
</script> 
```

像 CSS 一样

```
#screen-overlay-background {
display: none;
position: fixed;
top: 0;
left: 0;
height: 100%;
width: 100%;
background-color: #333;
zoom: 1;
filter: alpha(opacity=50);
opacity: 0.5;
z-index: 1000;
}

#screen-overlay-content {
display: none;
position: absolute;
top: 50%;
left: 50%;
height: 240px;
width: 320px;
margin: -120px 0 0 -160px;
background-color: #FFF;
z-index: 1000;
}

#screen-overlay-background.active, #screen-overlay-content.active {
display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T01:56:23.223

您可以在 css 中为元素添加 :hover 并更改 z-index。您也可以通过单击类轻松更改此设置...

```
.item {
    z-index:1
}

.item:hover{
    z-index:2500;
} 
```

# ruby-on-rails - 在 Rails 应用程序中分析 PostgreSQL 请求的最佳方法是什么？

> ID：11763288
> 
> 赞同：3
> 
> 时间：2012-08-01T16:09:07.897
> 
> 标签：ruby-on-rails, ruby, postgresql, profiling

当我的 Rails 应用程序在开发模式下运行时，我想在每个页面的底部显示一些 PostgreSQL 请求（以及每个单独的请求信息）。有没有现成的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T18:20:12.283

railscasts.com 介绍了一个新的解决方案，它是 MiniProfiler。

关于宝石 -> [http://samsaffron.com/archive/2012/07/12/miniprofiler-ruby-edition](http://samsaffron.com/archive/2012/07/12/miniprofiler-ruby-edition)

截屏视频-> [http://railscasts.com/episodes/368-miniprofiler](http://railscasts.com/episodes/368-miniprofiler)

# wordpress - wordpress orderby=rand 不工作

> ID：11763290
> 
> 赞同：0
> 
> 时间：2012-08-01T16:09:10.347
> 
> 标签：wordpress

```
$hpPromo = new WP_Query(array('post_type' => 'homepage_promo', 'orderby' => 'rand'));
print_r($hpPromo->posts); 
```

每次`array`都是完全相同的顺序。为什么我的帖子不是随机的？是因为我使用的是*自定义* `post_type`吗？请指教。

** 编辑 **

与此同时，我这样做是我知道的唯一方法（效率低下）。无论如何，请发布一个比这个更好的答案（为了各地的开发人员！）

```
$hpPromo = new WP_Query(array('post_type' => 'homepage_promo', 'orderby' => 'rand'));
$count = count($hpPromo->posts);
$posts = (array)$hpPromo->posts;
$promo_id = $posts[rand(0, $count-1)]->ID;
wp_reset_query();
$hpPromo = new WP_Query(array('post_type' => 'homepage_promo', 'p' => $promo_id));
$hpPromo->the_post();
the_content(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T16:35:42.847

尝试删除可能会干扰 orderby 查询的过滤器。

```
remove_all_filters('posts_orderby');
$hpPromo = new WP_Query(array('post_type' => 'homepage_promo', 'orderby' => 'rand'));
print_r($hpPromo->posts); 
```

# c# - 可以将 ServiceReference (ASMX) 添加到 Visual Studio 模板 (VSIX) 吗？

> ID：11763292
> 
> 赞同：2
> 
> 时间：2012-08-01T16:09:15.100
> 
> 标签：c#, silverlight, asmx, vsix

当我将服务引用 (" `MyWebService.asmx`") 添加到我的模板时，我有两个问题。

1.  总是有这样的`References.svcmap`事情：`Silverlight_Application_Template.MyWebService.ZrrayOfXElement.datasource`. 我不认为我真的想要文件名中的模板名称。相反，我希望他们重命名为更像：“ `$SafeProjectName$.MyWebService.ZrrayOfXElement.datasource`”其中“ `SafeProjectName`”是用户在创建模板时为项目输入的名称所替换的名称。

2.  `PathTooLongException` 由于上面列出的文件，我在运行 VSIX 时得到了一个。

有没有办法让它工作？我可以告诉用户在他们使用模板创建项目后立即添加一个 ServiceReference，但消除一个额外的步骤总是很好的。

**感谢您阅读和任何/所有帮助/提示/建议。有一个伟大的星期三！**

# python - 使用 Python 向串口发送命令参数

> ID：11763295
> 
> 赞同：4
> 
> 时间：2012-08-01T16:09:28.067
> 
> 标签：python, serial-port, hex, pyserial

我正在使用 python 的 pySerial 库与机器通信（如果你必须知道，月球光度计）。这台机器内置了一些场景，我可以通过 com/serial 端口发送与这些场景相对应的特定十六进制值来调用这些场景。例如，以下代码适用于机器中的“Park secnario”。

```
s.write('\x11') #s is my serial object, '\x11' is the command for the park senario
s.write('\x12') #'\x12' is the command for the TrackSun scenario 
```

上面的代码按预期工作，机器响应这些命令。但是，Goto 场景中有一个 bult，它由命令 '\x02' 激活。我的问题是 goto 命令也以这种格式 GoTo 将水平和垂直角度作为参数，其中 xxxx 和 yyyy 是两个角度。我如何在我的 s.write() 命令中传递这些参数。我试过： s.write('\x02 xxxx yyyy') 似乎不起作用。我在传递参数时做错了吗？当我使用带有以下代码的超级终端（以十六进制模式）时，该命令可以正常工作：

```
8/1/2012 11:37:36.048 [TX] - 02 30 34 3B 30 3F 3A 3D 3B 03 
8/1/2012 11:37:51.166 [RX] - 01 
```

编辑：这是使用超级终端发送的“Park Scenario”命令的示例，以防万一。

```
8/1/2012 12:14:56.649 [TX] - 11 
8/1/2012 12:15:07.962 [RX] - 01 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:51:59.497

以下调用与`s.write()`您在超级终端上发送的调用相同：

```
s.write('\x02\x30\x34\x3b\x30\x3f\x3a\x3d\x3b\x03') 
```

一般解决方案将取决于您的角度是如何编码的。我无法从您的示例中确定编码。

# java - 如何建模不同父实体和一个公共子实体之间的关系

> ID：11763296
> 
> 赞同：2
> 
> 时间：2012-08-01T16:09:29.243
> 
> 标签：java, hibernate, database-design, modeling

我正在寻找一些关于建模各种实体及其文档（二进制文件，如 PDF、TIFF 等）之间关系的最佳实践建议。这些实体是存储在 PostgreSQL 数据库中的标准 JPA/Hibernate。文档本身将存储在 MongoDb 数据库中。

计划是创建一个子实体来表示文档，其中包含二进制数据的 id，以便根据需要检索它。但是这种关系会是怎样的呢？

如果我只是为每个父实体创建了一个这些文档实体，那么简单的一对多关系将起作用，但这似乎是多余的。

我可以简单地放置一个“type”列来指示文档属于哪个实体，然后使用“id = ? and type = ?”的命名查询来查询文档表。我想这会奏效，但有些事情我也不为之疯狂——只是不能把我的手指放在上面:) 也许这很好。

我看过的另一个选项（尽管我承认我以前从未使用过它，并且需要更多地研究它）是使用单向一对多的连接表。但是，我认为这也行不通，因为不能保证不会有重复的父键。我对所有基本关系表的主键都使用了一个序列，这应该可以保证，但这听起来仍然不是一个好主意。

最后，我考虑过是否创建一个实体，然后为每个父实体扩展它，但我认为这会有相同的缺陷——非唯一父 ID 的理论存在。

在我做出最终决定之前，我想看看社区可能会提供哪些其他建议。

提前感谢您的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:19:23.213

> 如果我只是为每个父实体创建了一个这些文档实体，那么简单的一对多关系将起作用，但这似乎是多余的。

我有点困惑。如果为每个父母创建一个文档，那不是一对一而不是一对多吗？听起来你想要一个一对多的关系。在这种情况下，您只需为引用它的所有父实体创建一个文档。

# ubuntu - DNS / Webmin / BIND9 & 脚本配置

> ID：11763303
> 
> 赞同：1
> 
> 时间：2012-08-01T16:09:53.537
> 
> 标签：ubuntu, dns, webmin, nameservers

**1- 我的 DNS 是否已经配置？**

当我打开文件时：/etc/network/interfaces

自动 lo iface lo inet 环回

```
# The primary network interface
auto eth0
iface eth0 inet static
        address 75.101.163.170
        netmask 255.255.254.0
        network 75.101.163.0
        broadcast 75.101.163.255
        gateway 75.101.163.1
        dns-nameservers 60.60.120.223 60.60.120.224
        dns-search serverpronto.com
        pre-up iptables-restore < /etc/iptables.up.rules
        # dns-* options are implemented by the resolvconf package, if installed 
```

我的 DNS 服务器是否已配置？我尝试使用 60.60.120.223 和 60.60.120.224 作为 godaddy.com 的 setnameservers 下的 ns1 和 ns2 名称服务器，它返回：**无效的 TLD。**

**2-怀疑必须进入NS1，NS2地址的IP**

我对在专用服务器机器下使用 ubuntu 12.04 下的 Bind 的名称服务器有一些疑问。

我需要创建一个脚本来告诉名称服务器的 IP 地址。假设服务器机器的 ip 地址是 75.101.163.170，我应该添加一个这样的 ns 条目吗？

```
ns1.adomain.com.           IN    A         75.101.163.170
ns2.adomain.com.           IN    A         75.101.163.171 
```

必须输入什么IP地址？

我只有一个专用的服务器机器IP。我不知道如何放置这些 NS1、2... ips 等。

它们应该是 IP 地址本身还是我可以添加另一个 IP？如果我添加另一个 IP，我认为这是不正确的，因为我只有一台具有 IP 地址的专用机器。我对此有点困惑。

**1- 我的域名是在 GoDaddy.com 上购买的，如何指向他们？**

我在 Godaddy.com 下购买了我的域名。我知道有一个区域可以设置名称服务器，所以我可以放置名称服务器 1、名称服务器 2 等地址。

我应该把 ns1.adomainexample.com ns1.adomainexample.com

我的疑问是：如果我配置一个域名服务器，godaddy 怎么知道 ns1.adomainexample.com 与我的机器相关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:16:58.387

对于最后一部分，您需要向 Go Daddy 注册您自己的名称服务器。以下是执行此操作的步骤：

注册您自己的域主机

1.  登录您的客户经理。
2.  在域旁边，单击启动。
3.  单击要用于注册为您自己的名称服务器的域名。
4.  在主机摘要部分中，单击添加。
5.  在主机名中，输入您要注册的主机名。

    注意：此处输入的值将附加到您的域名以创建主机名。不要使用“www”前缀。示例：对于域名coolexample.com，在此处输入“ns1”会生成ns1.coolexample.com。

6.  在主机 IP 字段中，输入要添加到主机的两个唯一 IP 地址。

    注意：名称服务器不能共享 IP 地址；因此需要两个唯一的 IP 地址。

7.  单击确定。

完成上述操作后，您可以将域设置为指向您创建的自定义名称服务器。您还需要使用上面使用的相同 IP 在您的区域文件中为 ns1 和 ns2 添加 A 记录。

# jquery - 在将元素附加到 DOM 之前阻止浏览器加载图像

> ID：11763304
> 
> 赞同：1
> 
> 时间：2012-08-01T16:09:53.933
> 
> 标签：jquery, dom, image

我的思路是浏览器在附加到 DOM 之前不会尝试加载源，但是当我使用 jQuery 创建图像标记时，它会尝试在附加之前加载图像源。创建图像标签时，jQuery 是否会临时附加元素？

在此示例中，无效 URL 会导致控制台中出现错误日志，即使附加命令已被注释掉（[在 jsFiddle 中查看](http://jsfiddle.net/hvPDK/1)）。

```
 ​$(document).ready(function() {
    var $img = $("<img>", {
        height:"100px"
        ,width:"100px"
        ,src: "http://content.com/bad.url.jpg"
    });
    //$img.appendTo($("#container"));
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:16:42.170

图像一旦设置就开始加载图像文件（实时或从缓存中）`src`，无论它们是否附加到 DOM 中的任何内容。请参阅：[https ://developer.mozilla.org/en/Canvas_tutorial/Using_images](https://developer.mozilla.org/en/Canvas_tutorial/Using_images)

# jquery - html5随着背景的变化而倍增效果

> ID：11763307
> 
> 赞同：1
> 
> 时间：2012-08-01T16:10:05.443
> 
> 标签：jquery, html, background

我想在我的图像上创建 Photoshop 倍增效果。这并不难，我发现了它是如何工作的。（见：[http](http://albertogasparin.it/articles/2011/05/html5-multiply-filter-canvas/) ://albertogasparin.it/articles/2011/05/html5-multiply-filter-canvas/ ）

问题是，我想将它与不断变化的背景结合起来。我想要一个彩色背景，从一种颜色慢慢褪色到另一种颜色。Multiply 效果应该以与背景相同的方式改变。

我认为可以为颜色创建一个变量，然后将该颜色放在两个对象上。它不起作用。如果我这样做，我会破坏语法，或者图像变黑。最新的工作版本可以在这里找到：[http](http://www.sythe.nl/baum/) ://www.sythe.nl/baum/ （绿色画布有乘法效果）

我将背景颜色转换为 RGB：

```
 var cols = ["rgb(254,240,221)","rgb(248,226,232)"] 
```

但现在它也应该放在这里：

```
multiplyFilter.init('base', [66, 176, 153]); 
```

谁能告诉我应该如何解决这个问题。甚至有可能做到吗？我希望绿色画布以与背景相同的方式进行更改。

# c - 链表 && 结构

> ID：11763310
> 
> 赞同：-1
> 
> 时间：2012-08-01T16:10:31.263
> 
> 标签：c, linked-list, structure

我想知道我的程序设计是否正确，以及了解我的评论区域是否正在做它应该做的事情。我得到这些可能与我的代码注释段相关的编译错误，我会撒谎以获得一些帮助。谢谢！

```
 part1.c:15:6: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'insert'
  part1.c: In function 'main':
  part1.c:43:14: error: incompatible types when assigning to type 'struct point' from               type 'int'
  part1.c:49:44: error: invalid type argument of '->' (have 'struct point')
  part1.c:49:59: error: invalid type argument of '->' (have 'struct point')
  part1.c:55:5: error: incompatible type for argument 1 of 'free'
 /usr/include/stdlib.h:488:13: note: expected 'void *' but argument is of type 'struct point'

char *chars[3]= {"a","b","c"};

int nums[3]= {5,8,9};

struct point {char *letter;
                int number;
           struct point *next;};

struct point* insert(struct point list[],char *rqdLetters, int rqdNums) 
{  
     struct point *new;

     new = (struct point*)malloc(sizeof(struct point));
     if(new == NULL)
     fprintf(stderr,"error!");

     new->letter = rqdLetters;
     new->number = rqdNums; 

     new->next = head;
     head = new; 

     //not sure if i'm returning the a pointer to the start of new list
     return head;
}

int main(int argc, char **argv)                                             
{
   //not sure if i need to declare these here or in the insert 
    struct point list[3];          
    struct point *head = NULL;
    struct point *next; 
    struct point *new;

    int i;
    for (i = 0; i < 3; i++) 
    {
       //return result put back into the pointer to the start of the list
       head[i] = insert(list[i], chars[i], nums[i]);
    }

    int j;
    for(j = 0; j < 3; j++)
    {
       printf("letter %s and number %d\n", list[j]->letter, list[j]->number);
    }

    int z;
    for(z = 0; z < 3; z++)
    {
       free(list[z]);
    }

    return 0;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:40:38.147

乍一看，您的代码存在几个问题。首先，您没有正确声明变量。

```
new = list; 
```

应该：

```
struct point* new; 
```

您的函数签名看起来也有点可疑。如果你返回一个指向你的数据结构的指针，它应该是这样的：

```
struct point* insert(...) { ... } 
```

在更一般的层面上，我确实似乎您对链表的想法可能有点偏离。要表示一个列表，您应该只需要保留列表的`head`和`tail`，而不是保留一个点数组。

如果您创建一个数据结构来保存这些指针，通常会有所帮助。然后，您可以将此结构传递给对列表进行操作的函数，例如`insert()`函数。

作为一个简单的例子（未经测试）：

```
struct node {
  struct node *next;
  char letter;
  int number;
}

struct list {
  struct node *head;
  struct node *tail;
}

/* create a new list */
struct list* list_new(void) {
  struct list *L = malloc(sizeof(struct list));
  L->head = NULL;
  L->tail = NULL;
}

/* add a new node to the list */
void list_insert(struct list *list, char in_letter, int in_number) {
  struct node *node = malloc(sizeof(struct node));
  node->letter = in_letter;
  node->number = in_number;
  node->next = NULL;

  if (list->head == NULL) {  /* empty list */
    list->head = node;
    list->tail = node;
  } else { /* append to list */
    list->tail->next = node;
    list->tail = node;
  }
} 
```

然后，您可以这样使用它：

```
int i;
char chars[3]= {"a","b","c"};
int nums[3]= {5,8,9};

struct list *mylist = list_new();

for (i = 0; i < 3; i++) 
{
   list_insert(mylist, chars[i], nums[i]);
} 
```

* * *

回应：

> ...而且我不确定我是否应该在 insert 或 main 中声明它，但是我在 main 中声明了

这取决于您打算在何处使用变量以及这些变量的预期寿命。如上面评论中所述，您可能希望加深对范围规则的理解。

# video - 在opencv中显示视频错误

> ID：11763312
> 
> 赞同：0
> 
> 时间：2012-08-01T16:10:34.690
> 
> 标签：video, opencv, frame, capture

```
#include <cv.h>
#include <highgui.h>

int main(int argc,char** argv[])
{

         cvNamedWindow("video",CV_WINDOW_AUTOSIZE);
     CvCapture* capture = cvCreateFileCapture("Input_1.avi");
     if (!capture)
      {
           std::cout << "!!! cvCreateFileCapture didn't found the file !!!\n";
            return -1; 
           }
    IplImage* frame;

    while(1)
    {
        frame = cvQueryFrame(capture);
        if (!frame)
           break;
        cvShowImage("video",frame);
        char c=cvWaitKey(40);
        if (c==27)
            break;
    }
    cvReleaseCapture(&capture);
    cvDestroyWindow("video");
} 
```

这是我尝试过的代码。每当我按如下方式构建解决方案时，我都会收到警告：

```
 Hello_World.cpp

1>c:\opencv231\include\opencv2\flann\logger.h(66): warning C4996: 'fopen': This function or variable may be unsafe. Consider using fopen_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.

1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\stdio.h(234) : see declaration of 'fopen'

1>c:\opencv231\include\opencv2\flann\flann.hpp(233): warning C4996: 'cv::flann::Index_<T>': was declared deprecated

1>          c:\opencv231\include\opencv2\flann\flann.hpp(278) : see reference to class template instantiation 'cv::flann::Index_<T>' being compiled

1>  Hello_World.vcxproj -> C:\Users\KARTHICK\Documents\Visual Studio 2010\Projects\Hello_World\Debug\Hello_World.exe

========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ========== 
```

即使我跑步，我也看不到视频流！当我按 ESC 键退出时，我有类似的东西

```
loaded , unloaded dlls ,cannot find or open PDB file ,
thread has exited with code 0 ,
Native has exited with code 0 . 
```

请帮帮我。我只是opencv的初学者。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:21:12.613

检查您的机器上是否有 opencv_ffmpeg231.dll。如果没有，[这篇](https://stackoverflow.com/questions/8414947/why-cant-i-open-avi-video-in-opencv)文章有一个解决方案。

# sql - SQL-如何在每个总和列的最后一列中获取总和列

> ID：11763315
> 
> 赞同：0
> 
> 时间：2012-08-01T16:10:39.377
> 
> 标签：sql

我正在使用用户 Keevas 的示例，但提出了一个不同的问题......

```
select Master_Code, SUM(Jan), SUM(Feb), SUM(Mar)
 from dbo.foobar
WHERE Participating_City = 'foofoo'
GROUP BY Master_Code ORDER BY Master_Code ASC 
```

像这样的东西：

```
Master_Code sum(Jan) Sum(Feb) sum(Mar)  Total
        1     4         5       4        13
        2     5         5       5        15 
```

如何获得总值列？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:13:12.870

这应该有效：

```
select Master_Code
    , SUM(Jan)
    , SUM(Feb)
    , SUM(Mar)
    , (SUM(Jan + Feb + Mar)) As Total
 from dbo.foobar
WHERE Participating_City = 'foofoo'
GROUP BY Master_Code 
ORDER BY Master_Code ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:13:18.513

只需使用加号添加它们。

```
SELECT Master_Code, SUM(Jan), SUM(Feb), SUM(Mar), SUM(Jan) + SUM(Feb) + SUM(Mar) FROM... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:12:03.707

```
select Master_Code, 
       SUM(Jan), 
       SUM(Feb),
       SUM(Mar),
       SUM(Jan+Feb+Mar) as Total
from dbo.foobar
WHERE Participating_City = 'foofoo'
GROUP BY Master_Code
ORDER BY Master_Code ASC 
```

# javascript - 从函数返回并重新声明一个变量

> ID：11763322
> 
> 赞同：0
> 
> 时间：2012-08-01T16:11:15.987
> 
> 标签：javascript, variables, return, redeclare

在为我的 Intro Programming 课程做作业时，我创建了一个函数，并在这里得到了一些人的帮助（非常感谢），现在我遇到了一个新问题。我有两个变量，我声明并在启动我的函数之前提示输入一个值，如果它没有通过，它会提示它输入一个新值。但是现在当我返回它们时，它不会更改代码之外的变量。

```
// 1 Declare Variables
var numTrees;
var counter = 0;
var answer = "no";

function treeFunction(answer, counter, numTrees) {
while (answer == "no" && counter < 3)
{
    if (numTrees < 5 || numTrees > 10)
    {
        alert("That is an incorrect value.\nThe sample size should be less than 5 or greater than 10.\nPlease try again.");
        answer = "no";
        numTrees = prompt("Please reenter the amount of trees in your sample.");
        alert("You have entered: " + numTrees)
        counter + 1;
    }
    else 
    {
        answer = "yes";
    }
}
if (answer == "no") {
    alert("You have entered an incorrect number too many times.\nThe Program will now end.");
    window.open('', '_self', '');
    window.close();
} else if (answer == "yes") {
    return numTrees;
}
}
// 2 Prompt the Instructor for the number of Trees
numTrees = prompt("How many trees are in your sample?");
alert("You have entered: " + numTrees);
treeFunction(answer, counter, numTrees)
document.write(numTrees); 
document.write("<br/>")
document.write("<br/> <br/>" + "End of Program."); 
```

编辑：我已经改变了我正在做的事情，我不再需要返回两个变量，只需要返回 numTrees。然而，由于某种原因，document.write 显示的是原始值，而不是返回后在函数中更改为的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:19:23.113

`answer, counter, numTrees`是全局的，但是当您将它们作为参数传递给函数时；

```
function treeFunction(answer, counter, numTrees) { 
```

你会得到一组新的局部变量，它们恰好与全局变量同名，因此*隐藏*了它们。

要使用全局变量，请不要传递它们

```
function treeFunction() {
   answer = .... 
```

（您还想`counter += 1`实际增加变量）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:16:43.370

1.  一个函数只能返回一个值。所以， `return numTrees; return answer;`

第二条语句不会被执行。

1.  由于变量是在函数外部声明的，因此它们是全局的。所以，你不需要退货。即，函数完成执行后，它将具有修改的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:16:14.647

而不是调用`return`两次（无论如何都不起作用），您可以返回一个`Array`.

```
return [numTrees, answer]; 
```

所以现在我们可以通过分配返回值来捕获它并访问它：

```
var ret = treeFunction(answer, counter, numTrees);

// ret[0] is "numTrees"
// ret[1] is "answer" 
```

# ios - 使用 Interface Builder 为 UITabBarViewController 设置委托时应用程序崩溃

> ID：11763323
> 
> 赞同：1
> 
> 时间：2012-08-01T16:11:21.833
> 
> 标签：ios, xcode, delegates, interface-builder, storyboard

我正在尝试为我的故事板标签栏控制器创建一个 UITabBarControllerDelegate ......

```
#import <Foundation/Foundation.h>

@class CountryPickerViewController;

@interface TabBarDelegate : NSObject <UITabBarControllerDelegate>

@property (strong) CountryPickerViewController *countryPickerViewController;

- (void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController;

@end 
```

使用 Interface Builder 我创建了一个对象，然后将其分配为这样的委托：

![界面构建器故事板编辑](../Images/f55f2077a78d15c969b1553e94fe2571.png)

当我切换到另一个选项卡时，它会导致崩溃。这是怎么回事，我该如何解决？

**编辑**：顺便说一句，方法实现为`tabBarController:didSelectViewController:`空（不包含任何特定逻辑）

**EDIT2**：我没有得到像样的堆栈跟踪，我得到：

![违规线程](../Images/68d0e62d94c76ecaa92a334943aecfa1.png)

并且`EXC_BAD_ACCESS`，我会假设该`Tab Bar Delegate`对象可能为零？为什么会这样？

**EDIT3**：我启用了 NSZombies 并发现由于某种原因我在 Interface Builder 中创建的对象发布得太早了？这是正常的吗？

```
2012-08-01 12:41:11.591 MyApp[15437:707] *** -[TabBarDelegate respondsToSelector:]: message sent to deallocated instance 0x194fe0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:53:17.517

不保留 IBOutlets。您需要对标签栏委托的强引用，以使其保持足够长的时间以供您的视图使用。现在它在视图加载后立即被释放。

# java - 为 webdriver 记录 selenium

> ID：11763327
> 
> 赞同：3
> 
> 时间：2012-08-01T16:11:34.903
> 
> 标签：java, logging, selenium, webdriver

有没有人为 webdriber 使用[loggingselenium](http://loggingselenium.sourceforge.net/)？我正在尝试创建一个漂亮的 HTML 格式的报告，其中包括失败测试的堆栈跟踪，包括屏幕截图。如上所述，Loggingselenium 是最适合 porpose 的库。我在我的项目中使用 maven 和[surefire](http://maven.apache.org/plugins/maven-surefire-report-plugin/)，我需要为我的项目使用日志记录 selenium，这是使用 webdriver 完成的。或找出其他可以帮助我做同样事情的解决方案。当我使用 junit 进行测试时，我想要这样的东西[。](http://loggingselenium.sourceforge.net/samples/sampleResultJunitAssertionFailed.html)任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:11:14.300

您应该尝试[QAF 以前的 ISFW](https://qmetry.github.io/qaf/)。它具有出色的日志记录和[报告](https://qmetry.github.io/qaf/latest/qaf_reporting.html)功能以及一些设计概念，特别是对于使用 selenium 1 或 2 的 Web 功能测试自动化。您可以阅读以下有用的博客： [关于 ISFW](http://blog.infostretch.com/806) [常见问题](http://blog.infostretch.com/isfw-faq)

# c# - REST 服务接收空参数

> ID：11763330
> 
> 赞同：0
> 
> 时间：2012-08-01T16:11:43.057
> 
> 标签：c#, wcf, web-services, c#-4.0, rest

我正在尝试与我的休息服务进行通信，但这一个总是返回我发送的参数是空的，但在我的客户端控制台中他是填充的。

这是接口类：

```
[ServiceContract]
    public interface IMyTest
    {
        [OperationContract]
        [WebInvoke(UriTemplate = "TestMe", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped)]
        string TestMe(string parameter);        
    } 
```

我的服务端方法：

```
 public string TestMe(string parameter)
            {
            if (string.IsNullOrEmpty(parameter)
                return "Empty";
            return "OK";
            } 
```

我的客户 ：

```
string content = "{\"Param\" : \"TEST\"}";
var request = WebRequest.Create("http://localhost/MyTestURL/MyTest.svc/TestMe");
                request.Method = "POST";
                request.ContentType = "application/json";
                using (var writer = new StreamWriter(request.GetRequestStream()))
                {
                    writer.Write(content);
                }

                var res = (WebResponse)request.GetResponse();

                StreamReader reader =
                  new StreamReader(res.GetResponseStream(), Encoding.UTF8);
                System.Console.WriteLine("Response");
                System.Console.WriteLine(reader.ReadToEnd().ToString()); 
```

我的客户代码不行吗？我的配置不行？...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:16:42.353

如果要将请求作为字符串获取，请使用 Stream 而不是 String 参数

```
public void TestMe(Stream dataStream) 
```

但如果不是，请使用可序列化到 Json 对象作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:12:56.403

我创建了一个很好的[教程](http://www.codeproject.com/Articles/275279/Developing-WCF-Restful-Services-with-GET-and-POST) ，帮助我使用流参数实现该方法。谢谢。

# maven - 将 NuGet（或 Maven）用于企业项目依赖项时进行编码？

> ID：11763332
> 
> 赞同：2
> 
> 时间：2012-08-01T16:11:49.200
> 
> 标签：maven, mercurial, project-management, build-automation, nuget

假设一个大型项目被拆分为多个项目，每个项目都位于一个单独的 Mercurial 存储库中（根据[在 Mercurial 中组织具有共享依赖项的项目的好方法是什么？](https://stackoverflow.com/questions/6020936/whats-a-good-way-to-organize-projects-with-shared-dependencies-in-mercurial)）。

还假设在内部使用依赖管理器（我们使用的是 NuGet，但同样适用于 Maven），这样：

*   ProjectA 依赖于 Ninject 和 MongoDB
*   ProjectB 依赖于 ProjectA 和 log4net

A、B项目可以独立搭建；NuGet 会自动从 NuGet 服务器（在本例中为 ProGet）下载 OSS 和内部依赖项。

最后假设 ProjectB 依赖于 ProjectA 的 v1.2.3.4-SNAPSHOT，并且 CI 服务器不断更新 NuGet 服务器中的 ProjectA.1.2.3.4-SNAPSHOT 包。因此，ProjectB 将始终根据 ProjectA 的最新签入更改进行开发。

如果项目 A 和 B 都需要相关更改怎么办？有什么巧妙而巧妙的方法可以正确地做到这一点？一些想法：

*   开发人员签出项目 A 和 B。对 A 进行更改、构建和签入。开发人员等待 CI 服务器构建和更新 NuGet 服务器。对 B 进行了更改、构建和签入。（我不喜欢这样做，因为代码正在作为开发过程的一部分进行签入。）
*   开发人员检查项目 A 和 B，并重新连接 B 以使用 A 源作为依赖项（而不是 NuGet 包 ProjectA）。对 A 和 B 都进行了更改。在适当的测试后，对 A 和 B 一起执行签入，但开发人员必须确保不签入依赖项更改。

我不是特别擅长这个，所以我认为有人会用一些非常聪明的东西把我的想法从水中吹走。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:14:02.687

我不知道 NuGet 是如何做到的，但是对于 Maven，您的第二个想法可以正常工作，除了“重新连接 B 以使用 A 源作为依赖项”是不必要的。您只需在本地构建 A（使用`install`），它就会安装到您本地的 Maven 存储库中。然后在构建 B 时，它会选择新构建的 A，而不是来自中央仓库的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T04:46:11.490

我可以用 nuget 想到以下内容： 在项目 A 中，将包放在中心位置（在本例中，我将其放在 c:\localpackages 中）

使用 MSBUILD.exe /t:Build,Package A.csproj 构建 A

使用项目 B，您可以添加一个 .nuget\nuget.config 指定（您可以在此处阅读有关指定包文件夹位置的更多信息[http://docs.nuget.org/docs/release-notes/nuget-2.1](http://docs.nuget.org/docs/release-notes/nuget-2.1)）这应该选择项目 A 所做的更改。当您为 A 删除了不同版本的 nuget 包时，这可能会变得很棘手

希望这可以帮助。

# inheritance - 扩展持久 CFC 时出现 NullPointerException

> ID：11763339
> 
> 赞同：1
> 
> 时间：2012-08-01T16:12:20.343
> 
> 标签：inheritance, orm, coldfusion, nullpointerexception, cfc

尝试使用 County 扩展 Unit 时发生错误，特别是在重新启动应用程序以初始化 ORM 时。[注意：我正在尝试单表继承]

ORM 正在管理我的数据库模式：`this.ormsettings.dbcreate=dropcreate`

当我从模型目录中删除 County.cfc 时，ORM 初始化并且应用程序正常启动。当我将 County.cfc 放回模型目录时，错误再次出现。

ColdFusion 版本 10,282462 MSSQL IIS

单元：

```
<cfcomponent persistent="true" entityname="Unit" table="Units" discriminatorColumn="type">
    <cfproperty name="id" fieldtype="id" column="unit_id" generator="identity">  
    <cfproperty name="name" default="" type="string" length="50"> 
    <cfproperty name="description" type="string" sqltype="varchar(max)" default="">
    <cfproperty name="active" type="boolean" default="true"> 
</cfcomponent> 
```

县：

```
<cfcomponent persistent="true" entityname="County" table="Units" extends="Unit" discriminatorValue="county">
    <cfproperty name="officeAddress" type="string">
</cfcomponent> 
```

堆栈跟踪：

```
java.lang.NullPointerException at
org.hibernate.mapping.PersistentClass.createPrimaryKey(PersistentClass.java:322) at
org.hibernate.cfg.HbmBinder.bindRootPersistentClassCommonValues(HbmBinder.java:405) at
org.hibernate.cfg.HbmBinder.bindRootClass(HbmBinder.java:321) at
org.hibernate.cfg.HbmBinder.bindRoot(HbmBinder.java:172) at
org.hibernate.cfg.Configuration.add(Configuration.java:771) at
org.hibernate.cfg.Configuration.addDocument(Configuration.java:586) at
coldfusion.orm.hibernate.HibernateConfiguration.buildConfiguration(HibernateConfiguration.java:611) at
coldfusion.orm.hibernate.HibernateConfiguration.initHibernateConfiguration(HibernateConfiguration.java:208) at
coldfusion.orm.hibernate.HibernateConfiguration.<init>(HibernateConfiguration.java:181) at
coldfusion.orm.hibernate.ConfigurationManager.initConfiguration(ConfigurationManager.java:67) at
coldfusion.orm.hibernate.HibernateProvider.InitializeORMForApplication(HibernateProvider.java:185) at
coldfusion.orm.hibernate.HibernateProvider.onPageRequestStart(HibernateProvider.java:151) at
coldfusion.filter.ApplicationFilter.firePageRequestStart(ApplicationFilter.java:599) at 
coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:407) at
coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48) at
coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40) at
coldfusion.filter.PathFilter.invoke(PathFilter.java:112) at
coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:94) at
coldfusion.filter.BrowserDebugFilter.invoke(BrowserDebugFilter.java:79) at
coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28) at
coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38) at
coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46) at
coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38) at
coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22) at
coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62) at
coldfusion.CfmServlet.service(CfmServlet.java:204) at
coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89) at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at
coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42) at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46) at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224) at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928) at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:414) at
org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:203) at
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539) at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298) at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) at
java.lang.Thread.run(Thread.java:662) 
```

奇怪的是，我已经在与另一个实体做类似的事情（DiscussionPost 扩展了 Post）：

邮政：

```
<cfcomponent persistent="true" entityname="Post" table="Posts" discriminatorColumn="type">
    <cfproperty name="id" fieldtype="id" column="post_id" generator="identity">
    <cfproperty name="promotions" fieldtype="one-to-many" cfc="PostPromotion" fkcolumn="post_id" singularname="promotion">
    <cfproperty name="comments" fieldtype="one-to-many" cfc="PostComment" fkcolumn="post_id" singularname="comment">    
    <cfproperty name="user" fieldtype="many-to-one" cfc="User" fkcolumn="user_id">
    <cfproperty name="text" type="string" sqltype="varchar(1000)">
    <cfproperty name="timestamp" type="date" ormtype="timestamp">
</cfcomponent> 
```

讨论帖：

```
<cfcomponent persistent="true" entityname="DiscussionPost" table="Posts" extends="Post" discriminatorValue="discussionpost">
    <cfproperty name="discussion" fieldtype="many-to-one" cfc="Discussion" fkcolumn="discussion_id">
    <cfproperty name="title" type="string" sqltype="varchar(200)">

</cfcomponent> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:58:17.850

看起来您可能缺少 County.cfc 中 officeAddress 属性的 sqltype 属性

这能解决你的问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:43:50.160

看起来这可能是您遇到的问题：[https ://hibernate.onjira.com/browse/HBX-54](https://hibernate.onjira.com/browse/HBX-54)

我认为解决方法是向 County.cfc 添加一个 id 属性：

```
<cfproperty name="id" fieldtype="id" column="county_id" generator="identity"> 
```

上面的代码假定您的 id 列名为“county_id”。这能解决你的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T02:07:23.190

好的。事实证明，这个问题的答案非常简单。通过在我的代码库上进行全局搜索和替换，将“单元”替换为“容器”，我能够让我的应用程序中的单表继承正常工作。严重地。这就是我所做的所有改变，并且奏效了。'Unit' 显然不是 CF 中的保留字，因为实体独立`Unit`工作，但它一定在某些内部过程中引起了问题（可能`getColumnIterator()`正如@MikeCauser 所建议的那样）。

感谢大家的建议。

**编辑：结果证明这是一个偶然的修复，而不是针对问题根源的修复，无论它可能是什么。真正的解决方案还有待找到。**

**编辑 2：我现在确信手头的问题与 ColdFusion/Hibernate 内部有关，只需重新启动 ColdFusion 服务即可刷新。**

是的，在我的头在我的办公桌上不停地敲了两个星期之后，我重新启动了 ColdFusion 应用程序服务，我的问题就解决了。从那时起，我已经将容器组件扩展了 3 次。一切看起来都很好，我已经继续我的申请了。

# c# - 强制 IKVMC 将 JAR 转换为 DLL？

> ID：11763342
> 
> 赞同：3
> 
> 时间：2012-08-01T16:12:23.270
> 
> 标签：c#, java, .net, jar

我正在尝试使用 IKVMC 将我们研究人员使用的一些“开箱即用”JAR 文件转换为我可以在 C# 项目中使用的 DLL。虽然我能够为某些 JAR 成功完成此操作——包含 Main() 方法的 JAR 被转换为 .exe 文件（如 IKVMC 中所述）。我不知道如何处理这些。

有谁知道我怎么能：

1.  在我的 C# 应用程序中使用输出 EXE
2.  让 IKVMC 将 JAR 生成到 DLL 中，即使 JAR 包含 Main() 方法

**IKVMC 命令提示符输出：**

```
ikvmc xom.jar
Note IKVMC0004: using main class "nu.xom.Info" based on jar mainfest
Note IKVMC0002: output file is "xom.exe" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:10:13.363

To force IKVMC to output to a DLL add `-target:library` to the command line args.

```
ikvmc -target:library xom.jar 
```

Found the answer by stumbling upon this: [Using Java Classes in your .NET Application](http://www.codeproject.com/Articles/13549/Using-Java-Classes-in-your-NET-Application)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:15:38.653

EXE 文件只是带有入口点的 DLL。您可以像引用外部 DLL 文件一样在 C# 项目中引用 EXE。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-14T10:23:39.540

我知道这已经得到解答，但是如果您想控制 dll 的名称并扩展 bharris9 的答案，那么您可以使用 out 参数。

```
ikvmc -out:myapp.dll -target:library xom.jar 
```

来源：[http ://www.ikvm.net/userguide/ikvmc.html#Options](http://www.ikvm.net/userguide/ikvmc.html#Options)

# css - IE7 改变 CSS 选择器的顺序

> ID：11763343
> 
> 赞同：0
> 
> 时间：2012-08-01T16:12:30.390
> 
> 标签：css, internet-explorer-7, css-selectors

我有一些 CSS 代码仅在另一个元素的值为 0 时隐藏某个元素

```
 #type_46[value="0"] ~ .exercise_dur {
    display: none;
  } 
```

这适用于除 ie7 之外的所有浏览器（ie9 处于 ie7 模式/ie7 文档模式）

使用 ie 开发工具进行故障排除时，如果我直接查看样式列表，我会看到：

```
[value='0']#type_46 ~ .exercise_dur 
```

这显然会破坏选择器并导致它不起作用。如果我手动（在开发工具中）更正此问题，它可以完美运行，没有任何问题。有没有人遇到过这个问题？如果是这样，除了将元素隐藏在javascript中之外，还有其他解决方法吗？

编辑：（还不能回答我自己的问题，所以我必须编辑）看来问题是ie7没有动态更新css。当代码初始化时，它不起作用，因为在 css 加载之前没有设置值。如果我强制它（即更改代码或禁用/重新启用样式），它会更新，但在再次强制之前不会更新（即使我更改了值）。ie7 对这个项目来说并不是一个很大的优先级，隐藏元素也不是绝对必要的，所以我想我现在先离开这个，如果以后有必要在 jquery 中实现它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:33:57.177

IE7 中对通用同级选择器的支持充其量是错误的。我建议找出另一种选择元素的方法，或者使用 jQuery。

[阅读更多。](http://www.impressivewebs.com/buggy-css-selectors-cross-browser-jquery/)

# html - iframe 和标题

> ID：11763347
> 
> 赞同：-1
> 
> 时间：2012-08-01T16:12:34.927
> 
> 标签：html, iframe

我的 html 页面上有两个 iframe，每个 iframe 的高度为 45%。如何在每个 iframe（简单文本）上方添加一个标题，并在第一个 iframe 和第二个标题之间添加一个空格，以便它们消耗 10%。换句话说，我没有什么右边的滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T13:42:20.383

use scrolling="no"

```
<iframe scrolling="no"></iframe> 
```

see [jsfiddle](http://jsfiddle.net/modaloda/RQ62f/31/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-05-19T13:28:23.730

要创建一个小的单行空间，请放置一个**`<br>`**标签，它也不需要关闭标签，例如**`</br>`**不需要！

对于一个小标题，只需放置*`<h1>tile name here</h1>`*另一个*`<h2>title</h2>`*

# perl - 在 Perl 中提取和替换文件扩展名

> ID：11763351
> 
> 赞同：1
> 
> 时间：2012-08-01T16:12:59.380
> 
> 标签：perl

在开始之前，我想告诉你我不是 Perl 专家。由于分配给我的一些特定任务，我才刚刚开始。

此任务的要求是提取文件的扩展名 ( `.dat`) 并将其替换为`.trg`. 问题是我们正在压缩`.dat`要制作的文件`$filename.dat.gz`，当我们提取扩展名并替换它时，我们得到了`$filename.dat.trg`理想的结果`$filename.trg`。

至于代码（请注意，这似乎是一个非常古老的“遗留”代码，我不想过多地修改它，因为它曾经/正在由另一个人维​​护），这就是它被放下的方式

```
#prepare the trigger file
#get the extension  
my @contains_extension = split (/\./ , $filename);
my $ext = $contains_extension[-1];

#replace with  a ".trg" extension
my $remote_trgfile = $filename;
$remote_trgfile =~ s/$ext$/trg/;
my $trgfile = $out;
$trgfile =~ s/$ext$/trg/; 
```

记住`$filename`在上面的代码中是带`.dat.gz`ie后缀的，文件名是`$filename.dat.gz`

如果有人可以帮助我用一种更简单的方法来提取扩展名（`.dat`和`.gz`）并将其替换为，我将不胜感激`.trg`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:57:52.773

因此，您想更改文件名的“扩展名”，包括可选的`.gz`? 尝试：

```
$filename =~ s{\.[^.]*(?:\.gz)?$}{.trg} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:24:40.763

尝试

```
$filename =~ s/\..*$/.trg/; 
```

无需做所有花哨的拆分东西来尝试捕获扩展:)

分解：

. 火柴 。.* 匹配所有内容（换行符除外） $ 匹配字符串的结尾

那么您只需将其替换为 .trg

所以你基本上只是在第一个“。”之后拿走所有东西。并替换为 .trg

希望有帮助:)

# jquery - JQuery TableSorter：排序箭头不显示

> ID：11763352
> 
> 赞同：11
> 
> 时间：2012-08-01T16:13:01.233
> 
> 标签：jquery, tablesorter

我正在实现 jQuery 的表格排序器，但箭头似乎无法显示。

这是我到目前为止所做的：

```
<script type="text/javascript" src="/path/to/jquery-latest.js"></script> 
<script type="text/javascript" src="/path/to/jquery.tablesorter.js"></script> 
```

和

```
$(document).ready(function() 
    { 
        $("#myTable").tablesorter(); 
    } 
); 
```

表格排序很好，但箭头不显示。我在这里错过了什么吗？
我什至添加了以下但没有工作：

```
<LINK rel="StyleSheet" type="text/css" href="../tablesorter/themes/green/style.css"> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T16:19:40.810

在此页面上使用 tablesorter 时我遇到了同样的问题 - [http://ajthomas.co.uk/fpl/](http://ajthomas.co.uk/fpl/)。但是，这是因为我错过了添加[下载](http://tablesorter.com/docs/#Download)中的样式表和图像。看起来你也是。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T21:26:09.343

如果您级联他们的样式表，它将看起来与 TableSorter 站点上的外观完全相同。您甚至不需要将其从他们的包裹中移出。只需在样式表声明后添加这一行：

```
<link href="[YOUR PATH TO]/tablesorter/themes/blue/style.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-02T00:33:43.713

为了让箭头出现，我必须做几件事。

首先是添加css。我将 tablesorter-blue.css 与我的其余样式一起移动到目录中，然后使用以下标记将其导入。

```
<link rel="stylesheet" href="/styles/tablesorter-blue.css"> 
```

其他答案遗漏的部分是在定义表格时指定样式。

```
<script>$(function() {$('#table_to_sort').tablesorter({"theme": "blue"});});</script> 
```

当您查看 tablesorter-*.css 文件时，您会看到样式是使用诸如 tablesorter-blue 或 tablesorter-green 之类的名称定义的。通过指定主题，它将主题名称附加到“tablesorter-”，以便您可以包含所有主题，并将不同的主题应用于不同的表。

在最新版本中，实际图像以 Base64 格式在 CSS 中提供，因此不再需要将图像文件复制到您的项目中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-24T20:29:04.330

我在最新版本中遇到了这个问题。（可能与原始问题无关，因为它已经很老了）

我包含了我的主题（蓝色）的样式，并且该样式包含了 Base 64 编码的箭头图像，因此它应该可以正常工作。

简单的问题是除了tablesorter之外我没有tablesorter-blue类，所以它正在加载默认主题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-11T19:29:47.157

如果有人仍然遇到 tablesorter 不显示排序箭头的问题，这是我在初始化回调中使用的一个小技巧：

```
$("table.sort").tablesorter({
  theme : 'dropbox',
  cssIcon: 'tablesorter-icon',
  initialized : function(table){
    $(table).find('thead .tablesorter-header-inner').append('<i class="tablesorter-icon"></i>');
  }
}); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-10-16T19:19:28.847

您需要将类 **tablesorter**添加到您的表中

# java - 用不同的方式从列表中删除重复项

> ID：11763362
> 
> 赞同：-5
> 
> 时间：2012-08-01T16:13:35.913
> 
> 标签：java, collections

我有一个名为 employee 的类，它是 pojo ，我已经创建了这个 pojo 类型的员工类型手段的列表。现在我想从列表中删除重复项，请告知实现该目标的各种方法是什么。

```
class Emp implements Comparable
{
      String name,job;
      int salary;
      public Emp(String n,String j,int sal)
      {
         name=n;
         job=j;
         salary=sal;
       }
      public void display()
      {
        System.out.println(name+"\t"+job+"\t"+salary);
       }
      public boolean equals(Object o)
      {
          Emp p=(Emp)o;
          return this.name.equals(p.name)&&this.job.equals(p.job)           &&this.salary==p.salary;
       }
       public int hashCode()
       {
          return name.hashCode()+job.hashCode()+salary;
       }  
       public int compareTo(Object o)
       {
          Emp e=(Emp)o;
          return this.name.compareTo(e.name);
           //return this.job.compareTo(e.job);
          // return this.salary-e.salary;

        }
} 
```

这是我的员工类型列表..

```
import java.util.*;
class EmpListDemo
{
      public static void main(String arg[])
      {
          ArrayList list=new ArrayList();
          list.add(new Emp("Ram","Trainer",34000));
          list.add(new Emp("Sachin","Programmer",24000));
          list.add(new Emp("Priyanka","Manager",54000));
          list.add(1,new Emp("Ravi","Administrator",44000));
                 list.add(new Emp("Ram","Trainer",34000));
          list.add(new Emp("Anupam","Programmer",34000));
list.add(new Emp("Sachin","Programmer",24000));
          list.add(new Emp("Sachin","Team Leader",54000));
          System.out.println("There are "+list.size()+" elements in the list.");
          System.out.println("Content of list are : ");
          ListIterator itr=list.listIterator();
          while(itr.hasNext())
          {
            Emp e=(Emp)itr.next();  
            e.display();
          }   

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:20:04.820

要从数组列表中删除重复元素，您应该考虑使用不允许重复的哈希集 b/c。

```
// Declare your reference variables
ArrayList list = new ArrayList();
HashSet hashSet = new HashSet();

// Put all list elements into hashset
hashSet.addAll(list);
list.clear();
list.addAll(hashSet); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:25:47.463

您可以使用 LinkedHashSet 来保留元素顺序，如下所示：

```
List list = new ArrayList();
// list initialization

LinkedHashSet set = new LinkedHashSet();
set.addAll(list);
list.clear();
list.addAll(set); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T16:21:09.297

立即想到三种方法：

*   遍历每个元素的列表，检查所有其他元素并在碰撞时删除另一个元素。运行时间在 O(n^2)

*   对列表进行排序，遍历它，跟踪当前项 A；删除后续项目，直到有项目 B != A; 继续直到列表结束。运行时是排序 + 迭代，所以介于 O(n log n) 和 O (n^2) 之间

*   将您的项目放入某种散列数据结构中，清空您的列表，然后从散列结构中只取一个项目，每个散列值将重新插入到您的列表中。如果正确完成，运行时间应该是 O(n)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T16:37:11.090

**1.**当**唯一性**很重要时，使用`Set`.

**2.**我会建议你使用类`HashSet`，**但如果除了唯一性，排序也很重要，那么使用** `TreeSet`实现接口，进一步扩展**接口** 。`SortedSet``Collection`

**3.此外，您可以****通过多种方式对...进行排序...通过**`TreeSet`使用界面**。****`Comparator`**

# mysql - SQL：查找行之间的差异

> ID：11763364
> 
> 赞同：5
> 
> 时间：2012-08-01T16:13:38.030
> 
> 标签：mysql, sql, group-by, distinct

我想计算每个用户在“5”内的行数。

例如，Don - 501 和 Don - 504 应该计算在内，而 Don - 501 和 Don - 1600 则不应计算在内。

开始：

```
Name        value
_________   ______________
Don         1235
Don         6012
Don         6014
Don         6300
James       9000
James       9502
James       9600
Sarah       1110
Sarah       1111
Sarah       1112
Sarah       1500
Becca       0500
Becca       0508
Becca       0709 
```

结束：

```
Name            difference_5
__________      _____________
Don             1
James           0
Sarah           2
Becca           0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:21:02.120

结合子查询中的自联接使用[ABS()函数：](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_abs)

所以，像：

```
SELECT name, COUNT(*) / 2 AS difference_5
FROM (
  SELECT a.name name, ABS(a.value - b.value) 
  FROM  tbl a JOIN tbl b USING(name)
  WHERE ABS(a.value - b.value) BETWEEN 1 AND 5
) AS t GROUP BY name 
```

*根据安德烈亚斯的评论进行编辑。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:32:15.357

假设每个`name`->对都是唯一的，这将为您提供***每个 name***`value`值在 5 以内的次数：

 *```
SELECT    a.name, 
          COUNT(b.name) / 2 AS difference_5
FROM      tbl a
LEFT JOIN tbl b ON a.name = b.name AND 
                   a.value <> b.value AND
                   ABS(a.value - b.value) <= 5
GROUP BY  a.name 
```

正如您会注意到的，我们还必须排除与自身相等的对。

但是，如果您想计算每个名称的值***在 table 中任何值的***5 以内的次数，您可以使用：

```
SELECT    a.name,
          COUNT(b.name) / 2 AS difference_5
FROM      tbl a
LEFT JOIN tbl b ON NOT (a.name = b.name AND a.value = b.value) AND
                   ABS(a.value - b.value) <= 5
GROUP BY  a.name 
```

* * *

有关这两种解决方案，请参阅[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/7ae8c/12/1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:48:15.737

因为 OP 还想要零计数，所以我们需要一个自左连接。如果一个人有两个完全相同的值，则需要额外的逻辑，这些值也应该只计算一次。

```
WITH cnts AS (
        WITH pair AS (
                SELECT t1.zname,t1.zvalue
                FROM ztable t1
                JOIN ztable t2
                ON t1.zname = t2.zname
                WHERE ( t1.zvalue < t2.zvalue
                        AND t1.zvalue >= t2.zvalue - 5 )
                OR (t1.zvalue = t2.zvalue AND t1.ctid < t2.ctid)
                )
        SELECT DISTINCT zname
        , COUNT(*) AS znumber
        FROM pair
        GROUP BY zname
        )
, names AS (
        SELECT distinct zname  AS zname
        FROM ztable
        GROUP BY zname
        )
SELECT n.zname
        , COALESCE(c.znumber,0) AS znumber
FROM names n
LEFT JOIN cnts c ON n.zname = c.zname
        ; 
```

结果：

```
DROP SCHEMA
CREATE SCHEMA
SET
CREATE TABLE
INSERT 0 14
 zname | znumber 
-------+---------
 Sarah |       3
 Don   |       1
 Becca |       0
 James |       0
(4 rows) 
```

注意：对于 CTE 抱歉，我没有看到 mysql 标签，我只是喜欢这个问题 ;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:56:24.020

```
SELECT
    A.Name,
    SUM(CASE WHEN (A.Value < B.Value) AND (A.Value >= B.Value - 5) THEN 1 ELSE 0 END) Difference_5
FROM
    tbl A INNER JOIN
    tbl B USING(Name)
GROUP BY
    A.Name 
```*

# php - Left Join After Where 子句

> ID：11763365
> 
> 赞同：2
> 
> 时间：2012-08-01T16:13:38.237
> 
> 标签：php, mysql, left-join

我在使用此查询时遇到问题，该查询根据不同表中的回复数对论坛主题进行排序。我在 where 之前尝试了 Left join ，但在我的 while 循环中遗漏了一些数据。

```
SELECT forum_topics.*, COUNT(forum_posts.comment_id) AS replies 
FROM forum_topics 
WHERE forum_topics.subcat_id = '$subcatid' 
LEFT JOIN forum_posts 
ON forum_topics.topic_id=forum_posts.topic_num  
ORDER BY replies DESC 
```

它给了我一个错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 'LEFT JOIN forum_posts ON 
forum_topics.topic_id=forum_posts.topic_num ORDER BY r' at line 1 
```

这是之前工作的查询：

```
SELECT * FROM forum_topics WHERE subcat_id = '$subcatid' ORDER BY date DESC 
```

为了回声，我使用：

```
$getChildCategory = mysql_query($query) or die(mysql_error());
$num = mysql_num_rows($get); 
if($num == 0){ echo 'No Posts';}
else{
    while ($row = mysql_fetch_assoc($get)){ 
```

回显时，左连接只得到 1 个结果，但旧连接得到 2 个，这是我所期望的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T16:14:33.637

那是因为条款的顺序错误。

这是正确的语法（**根据下面的评论编辑**）：

```
SELECT `forum_topics`.*, COUNT(`forum_posts`.`comment_id`) AS `replies`
FROM `forum_topics`
LEFT JOIN `forum_posts` 
ON `forum_topics`.`topic_id` = `forum_posts`.`topic_num`
WHERE `forum_topics`.`subcat_id` = '$subcatid'
GROUP BY `forum_posts`.`topic_num`
ORDER BY `replies` DESC 
```

当您执行任何类型的操作时`JOIN`，您将创建一种“虚拟表”，它是所有相关表的合并。where 子句在此“虚拟表”上运行，因此如果您考虑一下，只有`WHERE`在创建此表之后该子句才有意义。

# jsf-2 - 无法在 ui 中使用参数调用 ajax 方法：使用 f:ajax 重复

> ID：11763366
> 
> 赞同：0
> 
> 时间：2012-08-01T16:13:42.610
> 
> 标签：jsf-2, xhtml, facelets

我有一个循环呈现的链接列表。单击我想设置一个 bean 属性的链接`selectedIndex`。我试图通过在 Ajax 参数上传递它来做到这一点，但完整的表单正在刷新。即使那样，`notificationPreferencesBean.retrievePreferences`也不会被解雇。这种方法正确吗？

这是我的模板片段：

```
<ui:repeat value="#{notificationPreferencesBean.userNotificationPreferences}"
   var="userNotificationPreferenceVar" varStatus="idx">
    <li>
        <h:commandLink
           value="#{userNotificationPreferenceVar.notificationClassName.label}"
           styleClass="#{userNotificationPreferenceVar.cssClassName}"
           action="#{notificationPreferencesBean.retrievePreferences}">
           <f:ajax execute="@form" render="@none">
                <f:param value="#{idx}" name="idx" />
           </f:ajax>
        </h:commandLink>
    </li>
</ui:repeat> 
```

这是bean声明：

```
@ManagedProperty(value = "#{param.idx}")
private Integer selectedIndex; 
```

有趣的是，下面的代码可以 Ajaxfully 工作，但它只是调用`notificationPreferencesBean.retrievePreferences`并且没有设置 selectedIndex（正如预期的那样，因为我没有传递任何参数）

```
 <ui:repeat value="#{notificationPreferencesBean.userNotificationPreferences}"
   var="userNotificationPreferenceVar" varStatus="idx">
    <li>
        <h:commandLink
          value="#{userNotificationPreferenceVar.notificationClassName.label}"
          styleClass="#{userNotificationPreferenceVar.cssClassName}"
          action="#{notificationPreferencesBean.retrievePreferences}">
            <f:ajax execute="@form" render="@none" />
        </h:commandLink>
    </li>
</ui:repeat> 
```

还有其他方法吗？我只想在单击链接时设置 selectedIndex 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:08:37.213

您不需要为此使用注释`@ManagedProperty`。

只需使用[`f:setPropertyActionListener`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/f/setPropertyActionListener.html)：

```
<ui:repeat value="#{notificationPreferencesBean.userNotificationPreferences}"
   var="userNotificationPreferenceVar" varStatus="idx">
    <li>
        <h:commandLink
           value="#{userNotificationPreferenceVar.notificationClassName.label}"
           styleClass="#{userNotificationPreferenceVar.cssClassName}"
           action="#{notificationPreferencesBean.retrievePreferences}">
           <f:setPropertyActionListener value="#{idx}"
               target="#{notificationPreferencesBean.selectedIndex}" />
           <f:ajax execute="@form" render="@none" />
        </h:commandLink>
    </li>
</ui:repeat> 
```

# android - 在 LinearLayout 中对齐图像

> ID：11763370
> 
> 赞同：0
> 
> 时间：2012-08-01T16:13:57.077
> 
> 标签：android, image, android-linearlayout

我有`LinearLayout`并且我想投入其中`ImageView`。有什么简单的方法可以将此图像放在屏幕的右侧吗？现在，图像放在左边，填充和标记不能解决这个问题，因为这应该是动态完成的，图像每次都不一样。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:36:11.203

您是否尝试将重力属性设置为`right`？

```
<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:contentDescription="@string/imageDesc"
    android:src="@drawable/image" /> 
```

# python - 在便携式版本的 Django 上安装 cx_oracle？

> ID：11763375
> 
> 赞同：0
> 
> 时间：2012-08-01T16:14:07.677
> 
> 标签：python, django, portability, cx-oracle

我正在尝试在便携式版本的 Django 中执行此操作：

```
from django.db import load_backend
myBackend = load_backend('django.db.backends.oracle') # or 'mysql', 'sqlite3', 'oracle' 
```

但是，这会导致错误：`Error loading cx_Oracle module: No module named cx_Oracle`. 我认为这只是意味着`cx_oracle`没有安装。当我做了一个`pip install cx_oracle`（与需要的其他模块相同）时，它会导致此错误：

```
 Traceback (most recent call last):
      File "<string>", line 14, in <module>
      File "e:\PortableDjango\development\tools\virtualenvs\test_djangoproj\build\cx-Oracle\setup.py", line 132, in <module>
        raise DistutilsSetupError("cannot locate an Oracle software " \
    distutils.errors.DistutilsSetupError: cannot locate an Oracle software installation

    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):
  File "<string>", line 14, in <module>
  File "e:\PortableDjango\development\tools\virtualenvs\test_djangoproj\build\cx-Oracle\setup.py", line 132, in <module>
    raise DistutilsSetupError("cannot locate an Oracle software " \
distutils.errors.DistutilsSetupError: cannot locate an Oracle software installation

----------------------------------------

Command python setup.py egg_info failed with error code 1 in e:\PortableDjango\development\tools\virtualenvs\test_djangoproj\build\cx-Oracle

Exception information:
Traceback (most recent call last):
  File "e:\PortableDjango\development\tools\virtualenvs\test_djangoproj\lib\site-packages\pip-1.1-py2.7.egg\pip\basecommand.py", line 104, in main
    status = self.run(options, args)
  File "e:\PortableDjango\development\tools\virtualenvs\test_djangoproj\lib\site-packages\pip-1.1-py2.7.egg\pip\commands\install.py", line 245, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
  File "e:\PortableDjango\development\tools\virtualenvs\test_djangoproj\lib\site-packages\pip-1.1-py2.7.egg\pip\req.py", line 1009, in prepare_files
    req_to_install.run_egg_info()
  File "e:\PortableDjango\development\tools\virtualenvs\test_djangoproj\lib\site-packages\pip-1.1-py2.7.egg\pip\req.py", line 225, in run_egg_info
    command_desc='python setup.py egg_info')
  File "e:\PortableDjango\development\tools\virtualenvs\test_djangoproj\lib\site-packages\pip-1.1-py2.7.egg\pip\__init__.py", line 256, in call_subprocess
    % (command_desc, proc.returncode, cwd))
InstallationError: Command python setup.py egg_info failed with error code 1 in e:\PortableDjango\development\tools\virtualenvs\test_djangoproj\build\cx-Oracle 
```

我假设它正在寻找 Oracle 客户端，该客户端位于 PATH 变量中。我还忽略了什么，或者在可移植版本的 Django 中获得 Oracle 支持的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:37:14.227

您需要修改`LD_LIBRARY_PATH`以指向 Oracle 客户端库（`lib`目录）或 Windows - 下载[相应的 windows 二进制文件](http://cx-oracle.sourceforge.net/)。

# linux - linux中netstat和ss的区别？

> ID：11763376
> 
> 赞同：48
> 
> 时间：2012-08-01T16:14:10.883
> 
> 标签：linux, sockets, netstat

在 linux 中，netstat 命令告诉我们系统中活动套接字的信息。

我了解`netstat`用于`/proc/net/tcp`获取系统网络信息。

由于`netstat`手册页说 netstat 已过时，所以我们应该使用 'ss'。

```
NOTE
   This program is obsolete.  Replacement for netstat is ss.   Replacement
   for  netstat -r is ip route.  Replacement for netstat -i is ip -s link.
   Replacement for netstat -g is ip maddr. 
```

我发现它`ss`执行类似的功能，但它不 `/proc/net/tcp`用于获取系统网络信息。

现在我很好奇如何`ss`获取系统网络套接字信息？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-02T13:22:37.140

它直接使用使用经典[套接字](http://www.linuxjournal.com/article/7356)API的[Netlink](http://en.wikipedia.org/wiki/Netlink)从内核空间获取它们。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-02T11:07:00.360

`ss`包含在 iproute2 包中，是`netstat`. `ss`用于转储套接字统计信息。它显示类似于 的信息`netstat`。它可以显示比其他工具更多的 TCP 和状态信息。它是一种新的、非常有用且速度更快（与 netstat 相比）的工具，用于跟踪 TCP 连接和套接字。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-05-19T03:57:11.303

我制作了一个[比较表（在 Google Docs 中）](https://docs.google.com/spreadsheets/d/1_iZPZv6j2LqDA2TynvhKPGlRNBuaVcb6_hXfNhdPRzE/edit)（[轻量级 HTML 链接](https://docs.google.com/spreadsheets/d/e/2PACX-1vRkIfCk6z95RRPiYuRKM0C_8PzmKPAyGW3dK6NWsRHFiAAo-M9-X3RIcR47-pa8Eyc5mVj8Uniz_qOa/pubhtml)`netstat`），用于在和`ss`参数之间进行转换。它太大了，无法在此处包含和更新。

[![谷歌文档截图](../Images/b723e665562d7c97b9dbe76855353951.png)](https://i.stack.imgur.com/AS4QH.png)

简短参数之间的区别的简短版本是：

需要注意的论点： `r N i g M W T v C F c A U 2 f`

可以安全离开的论点： `h V l a n Z s p e o 4 6 x t u S w`

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-03-19T19:46:02.973

查看 ss 的来源：

[https://github.com/shemminger/iproute2/blob/master/misc/ss.c](https://github.com/shemminger/iproute2/blob/master/misc/ss.c)

基本上它直接查询内核并且可以比`netstat`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-21T13:31:53.617

`ss`是用于研究 Linux 和 Unix 系统中的套接字的实用程序。它显示类似于`netstat`并且能够转储套接字统计信息的信息。

但`netstat`不能完全替换为`ss`. 一些`netstat`命令更好地对应于`ip`命令。

```
 $ netstat -r   replaced by  $ ip route
    $ netstat -i   replaced by  $ ip -s lin
    $ netstat -g   replaced by  $ ip maddr 
```

我会说“旧”`netstat`命令可以同时替换为`ss`and`ip`命令。

# android - 在代码中向上移动 imageButton 会使应用程序崩溃

> ID：11763378
> 
> 赞同：0
> 
> 时间：2012-08-01T16:14:15.713
> 
> 标签：android, xml

我有一个主要的 relativeLayout 包含：

1.  里面有一堆按钮的相对布局
2.  滑动抽屉
3.  设置图像按钮

该应用程序工作正常，但是当我打开抽屉时，我在它上面有设置按钮，我不想要，我希望抽屉隐藏它，所以我在代码中将 imageButton 移动到滑动抽屉上方，但是这使我的应用程序崩溃。为什么？这没有任何意义，有没有另一种方法可以让 imageButton 在抽屉后面？

编辑：这是代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/img_blue_background" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageButton
        android:id="@+id/btn_call"
        android:layout_width="125dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="20dp"
        android:layout_toLeftOf="@+id/left_divider"
        android:background="@drawable/img_transparent"
        android:padding="20dp"
        android:src="@drawable/img_call_icon" />

    <ImageButton
        android:id="@+id/btn_directions"
        android:layout_width="125dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_toLeftOf="@+id/center_divider"
        android:background="@drawable/img_transparent"
        android:padding="20dp"
        android:src="@drawable/img_directions_icon" />

    <ImageButton
        android:id="@+id/btn_voice"
        android:layout_width="125dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_toRightOf="@id/center_divider"
        android:background="@drawable/img_transparent"
        android:padding="20dp"
        android:src="@drawable/img_microphone_icon" />

    <ImageButton
        android:id="@+id/btn_music"
        android:layout_width="125dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:layout_toRightOf="@+id/right_divider"
        android:background="@drawable/img_transparent"
        android:padding="20dp"
        android:src="@drawable/img_music_icon" />

    <ImageView
        android:id="@+id/center_divider"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        android:src="@drawable/img_icon_divider" />

    <ImageView
        android:id="@+id/left_divider"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:layout_toLeftOf="@id/btn_directions"
        android:src="@drawable/img_icon_divider" />

    <ImageView
        android:id="@+id/right_divider"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        android:layout_toRightOf="@id/btn_voice"
        android:src="@drawable/img_icon_divider" />

</RelativeLayout>

<SlidingDrawer
    android:id="@+id/slidingDrawer1"
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:layout_alignParentBottom="true"
    android:content="@+id/content"
    android:handle="@+id/time" >

    <TextView
        android:id="@+id/time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+string/time"
        android:textColor="#ffff"
        android:textSize="25dp" />

    <HorizontalScrollView
        android:id="@+id/content"
        android:layout_width="fill_parent"
        android:layout_height="170dp"
        android:background="@drawable/img_widget_holder"
        android:fillViewport="true"
        android:paddingLeft="0dp"
        android:paddingRight="0dp" >

        <LinearLayout
            android:id="@+id/widgetHolder"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="left|right|fill_horizontal"
            android:layout_marginLeft="0dp"
            android:layout_marginRight="0dp" >

        </LinearLayout>
    </HorizontalScrollView>

</SlidingDrawer>

        <ImageButton
    android:id="@+id/btn_settings"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="10dp"
    android:background="@drawable/img_transparent"
    android:padding="10dp"
    android:src="@drawable/img_settings_icon" /> 
```

# java - 具有高效添加和索引获取方法的已排序 java 数据结构

> ID：11763382
> 
> 赞同：1
> 
> 时间：2012-08-01T16:14:26.620
> 
> 标签：java, data-structures

是否有在 java 中实现的数据结构提供以下保证：

*   元素总是排序的
*   添加一个元素至少执行 O(lg n)
*   在特定索引处获取元素至少执行 O(lg n)

基本上我希望能够做到以下几点：

```
SomeDataStructure elements = new SomeDataStructure();
elements.add(5);
elements.add(1);
elements.add(10);
assertEquals(1, elements.get(0));
assertEquals(5, elements.get(1));
assertEquals(10, elements.get(2)); 
```

其中`add`和`get`方法都至少在 O(lg n) 时执行。

这似乎应该能够用树结构来完成，但我找不到任何提供索引 get 方法的实现。我还研究了为此使用/扩展 java.util.TreeMap ，但所有的旋转逻辑都是私有的，所以我无法跟踪树是如何被改变的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:59:54.490

看起来您可以使用`TreeMap`, 然后添加一个`get`遍历树以获取该索引的方法？

您也许可以使用`keySet`迭代器按顺序遍历它们，但没有关于其性能的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:19:12.150

如果您不需要交错读取和写入 - 即，您想一次构建所有数据结构，然后在其中查找内容，而无需在构建后对其进行修改 - 那么我会简单地构建一个列表，对其进行排序，然后在列表中使用索引。在这种情况下，一棵树是多余的，因为在构建它时不需要保持结构的排序。

```
List<Integer> elements = new ArrayList<Integer>(3);
elements.add(5);
elements.add(1);
elements.add(10);

Collections.sort(elements);

assertEquals(1, elements.get(0));
assertEquals(5, elements.get(1));
assertEquals(10, elements.get(2)); 
```

每次添加发生在 O(1) 时间（因此添加 n 项需要 O(n)），排序发生在 O(n * log(n)) 时间，给你一个 O(n + n * log) 的整体复杂度(n)) = O(n * log(n)) 用于构建结构。这与每次在 O(log(n)) 时间内添加 n 个元素相同。但是，查找将在恒定 (O(1)) 时间内发生，从而为您提供比基于树的解决方案更好的效率。

如果您想保证结构永远不会被修改（即永远不会丢失其排序），您可以将上面的第 5 行替换为：

```
elements = Collections.unmodifiableList(Collections.sort(elements)); 
```

如果有人试图修改列表，这将引发异常，这将提示您正在发生错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T16:17:32.213

来自 TreeMap 的[JavaSE 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TreeMap.html)：

> 此实现为 containsKey、get、put 和 remove 操作提供有保证的 log(n) 时间成本。

您可以通过查找有关您正在使用的任何实现的信息来找到相同的信息。

# mongodb - 使用新的 _id 在 MongoDB 中复制文档

> ID：11763384
> 
> 赞同：59
> 
> 时间：2012-08-01T16:14:27.640
> 
> 标签：mongodb

好的，我想这是一个愚蠢的问题，可能有一个简单的答案。

如何在 MongoDB 中复制文档，更改新文档的 _id？

想象你有原始文件：

```
> var orig = db.MyCollection.findOne({_id: 'hi'}) 
```

现在我想要集合中的另一个文档，其中 _id 为“再见”。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-08-01T16:17:11.637

只需更改 id 并重新插入即可。

```
> db.coll.insert({_id: 'hi', val: 1})
> var orig = db.coll.findOne({_id: 'hi'})
> orig._id = 'bye'
bye
> db.coll.insert(orig)
> db.coll.find()
{ "_id" : "hi", "val" : 1 }
{ "_id" : "bye", "val" : 1 } 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-06-04T09:49:56.640

您可以为副本 Document 提供一个新的 ObjectId。在 mongo 外壳中

```
var copy = db.collection.findOne();
for (var i = 0; i< 30; i++){ 
    copy._id = new ObjectId(); 
    db.collection.insert(copy);
} 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-09-13T17:31:28.580

对@689 响应的一点改进

```
var copy = db.collection.findOne({},{_id:0});
for (var i = 0; i< 30; i++){ 
    db.collection.insert(copy);
} 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2018-01-09T13:31:26.907

您可以使用以下代码：

**使用单行运行：**

```
db.collectionName.find({"_id" : ObjectId("5a4e47e0a21698d455000009")}).forEach(function(doc){var newDoc = doc; delete newDoc._id; db.collectionName.insert(newDoc); }) 
```

**用于理解的结构格式：**

```
db.collectionName.find({"_id" : ObjectId("5a4e47e0a21698d455000009")}).forEach(function(doc){
    var newDoc = doc;
    delete newDoc._id;
    db.collectionName.insert(newDoc);
}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-23T04:16:16.183

在 mongo shell 中：**没关系**

```
db.products.find().forEach( function(doc){db.products.insert(
{
    "price":doc.price,
    "name":doc.name,
    "typeName":doc.typeName,
    "image":doc.image
}
)} ); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-11-12T12:28:29.547

单线

```
(function(doc){delete doc._id; db.collection.insert(doc)})(db.collection.findOne({ _id: ObjectId("60c9a684c7d51907c35ad463")}))
```

结构化的

```
(function(doc) {
  delete doc._id;
  db.collection.insert(doc);
})(db.collection.findOne({ _id: ObjectId('60c9a684c7d51907c35ad463') }));

// (function(doc){...})(doc) 
```

# html - 奇怪的 标签行为

> ID：11763387
> 
> 赞同：0
> 
> 时间：2012-08-01T16:14:35.243
> 
> 标签：html, css

当我尝试在文本已被换行的 div 之后放置一个 hr 标签时，该 div 看起来像[这样](http://jsfiddle.net/ah4VG/1/)。如果你仔细看，这条线在旁边，在段落的中间。如果文本没有被换行，它可以正常工作，但是我如何为多行帖子解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T16:16:07.750

添加`hr { clear: both; }`到您的样式定义中。否则，它将呈现在左浮动的封闭段落旁边。

我相应地更新了您的[jsFiddle 示例](http://jsfiddle.net/ah4VG/4/)。

# java - 使用 throw/catch (java) 的鼠标监听器

> ID：11763388
> 
> 赞同：1
> 
> 时间：2012-08-01T16:14:35.770
> 
> 标签：java, swing, try-catch, mouselistener, throw

我在名为 test2 的包中名为 Test2.java 的文件中有以下代码；

```
package test2;

import java.io.IOException;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

public class Test2 {
    public static void main(String[] args) {
        int k = 7;
        while(true) {
            try {
                JFrame mainWindow = new HtmlWindow(k);
            } catch(UnsupportedOperationException numberChosen) {
                JOptionPane.showInternalMessageDialog(null, "information",
                        "You clicked on number " + numberChosen, 
                        JOptionPane.INFORMATION_MESSAGE);
                Integer l = new Integer("0" + numberChosen);
            }
        }
    }
} 
```

我在同一个包中名为 HtmlWindow 的文件中有以下代码；

```
package test2;

import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.io.IOException;
import javax.swing.JFrame;
import javax.swing.JLabel;

class HtmlWindow extends JFrame implements MouseListener {
    public HtmlWindow(int k) throws UnsupportedOperationException {
        super("blah");
        setSize(150, 200);
        Container content = getContentPane();
        content.setLayout(new FlowLayout());
        JLabel[] coloredLabel = new JLabel[k];
        String[] labelText = new String[k];
        for(int i=0; i<=k-1; i++) {
            labelText[i] = "<html><img src = "
                + "\"http://images.nycsubway.org/bullets/lines/"
                + (i+1)
                + ".GIF\">"
                + "</html>";
            coloredLabel[i] = new JLabel(labelText[i]);
            coloredLabel[i].setName((i + 1) + " ");
            coloredLabel[i].addMouseListener(this);
            addMouseListener(this);
            content.add(coloredLabel[i]);
        }
        this.setVisible(true);
        while(true) {
        }
    }

@Override
public void mousePressed(MouseEvent me) {
}

@Override
public void mouseReleased(MouseEvent me) {
}

@Override
public void mouseEntered(MouseEvent me) {
}

@Override
public void mouseExited(MouseEvent me) {
}

@Override
public void mouseClicked(MouseEvent me) {
    throw new UnsupportedOperationException(me.getComponent().getName());
}
} 
```

当我运行它时，会按预期出现一个窗口，其中包含数字图片，但是当我单击其中任何一个时，不会捕获抛出的异常。为什么是这样？指针应该在 HTMLWindow 构造函数中的“while”部分周围，因此仍然在“try”部分内，因此应该被捕获。我的猜测是这是因为 mouseClicked 部分不在 HTMLWindow 构造函数中，异常是在 try 块之外抛出的？

如果这不是从 GUI 获取信息返回原始程序的最佳方式，那是什么？我不认为这是通过使用“return”，因为

*   构造函数没有返回类型
*   mouseClicked 无论如何都不在构造函数中

除了 - 当我移动数字等时，我并不特别希望程序做任何事情，只需点击它们。那么为什么我需要 mousePressed 块等等？没有它们，程序将无法编译。就这样把它们留空可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:18:02.170

> 指针应该在 HTMLWindow 构造函数中的“while”部分周围，因此仍然在“try”部分内，因此应该被捕获。

它仍在`try`块内 - 但显然该`while`循环不会引发异常，是吗？

您似乎在*假设*：

*   UI 将在不同的线程上运行
*   UI线程上抛出的任何异常都会以某种方式编组到包含构造函数的线程

我不知道第一个子弹，但第二个*肯定*是不正确的。（而且紧密的`while(true)`循环*永远不是*正确的解决方案......）

> 如果这不是从 GUI 获取信息返回原始程序的最佳方式，那是什么？

目前还不清楚您要实现什么，但通常 GUI 是“面向事件的” - 所以也许您应该考虑一种方法让 GUI 公开某种侦听器，您的其他代码可以连接到该侦听器。

> 除了 - 当我移动数字等时，我并不特别希望程序做任何事情，只需点击它们。那么为什么我需要 mousePressed 块等等？没有它们，程序将无法编译。就这样把它们留空可以吗？

不要`MouseListener`直接实现，而是使用实现相关接口的适配器类之一（例如[`MouseAdapter`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseAdapter.html)），为您提供无操作实现。但显然你不能让你的窗口扩展`MouseAdapter` *-* `JFrame`你应该在这里有两个单独的类。

# regex - 在 matlab 的文件名中找到所需的符号

> ID：11763390
> 
> 赞同：0
> 
> 时间：2012-08-01T16:14:41.780
> 
> 标签：regex, string, matlab, file-io, filenames

我有各种名称的文件。我知道他们的结局，例如：....known_file_end.mat。我想检查名称中是否有一些数字，就在 .known_file_end.mat 之前，如果有，请将其删除。我怎样才能以最强大的方式做到这一点？

我还想知道是否有可能，例如我可以检查文件名的开头是否有一个整数，所以在我不知道的区域。

任何帮助表示赞赏，干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:58:09.553

我建议使用正则表达式来检查文件名中的数字。如果您只处理整数，您可以尝试匹配模式`\d+\.known_file_end\.mat`，即一个或多个数字后跟字符串`.known_file_end.mat`。

在 Matlab 中，这看起来像

```
pattern = '\d+\.known_file_end\.mat';
~isempty(regexp('something_10.known_file_end.mat', pattern))  % returns true
~isempty(regexp('something.known_file_end.mat', pattern))  % returns false 
```

通过修改`\d+`模式中的部分，您还可以检查更复杂的数字，例如对于简单的十进制数字，使用`\d+\.\d+`，它是一个或多个数字后跟一个句点，然后是一个或多个数字。

# jaxb - Spring WS 和 CXF 绑定

> ID：11763395
> 
> 赞同：2
> 
> 时间：2012-08-01T16:15:09.010
> 
> 标签：jaxb, cxf, spring-ws

我想使用 Spring WS JAXB 和 CXF 实现一个 web 服务客户端。我使用 CXF 从 WSDL 文件生成我的存根。此 WSDL 包含以下模式： 对于此模式，cxf 生成的唯一内容是 ObjectFactory 并且没有存根。我想使用 Spring Ws marshalSendAndReceive 方法向我的服务发送请求，但我不知道如何根据 CXF 生成的内容构造我的请求对象。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:14:55.307

您真的不需要 CXF 从 WSDL 文件生成 JAXB 类型，JDK 附带了一个名为 xjc 的工具，它可以为您执行此操作 - [http://docs.oracle.com/javase/6/docs/technotes/tools /share/xjc.html](http://docs.oracle.com/javase/6/docs/technotes/tools/share/xjc.html)

您可以尝试使用它并查看使用此工具创建的工件是否足够。

# android - 带有 phonegap 的 Android 应用程序

> ID：11763396
> 
> 赞同：0
> 
> 时间：2012-08-01T16:15:10.000
> 
> 标签：android, html, animation, cordova

我已经使用 Phonegap 开发了一个应用程序。HTML 是使用 HYPE 创建的。功能明智的应用程序运行良好。我面临的问题是，应用程序的动画太慢了。我已经在谷歌上进行了足够的搜索，但它并没有解决我的问题。我现在应该怎么做才能获得更流畅的动画？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:21:03.820

它是在实际设备（哪一个）或模拟器上运行变慢？

你可以尝试做一些分析。如果尚未完成，请尝试封装前端代码，以便您可以在桌面 Web 浏览器中进行测试。然后你可以在ie Firebug中做一些性能测试

# oracle - Oracle10g 连接字符串超时

> ID：11763397
> 
> 赞同：0
> 
> 时间：2012-08-01T16:15:13.460
> 
> 标签：oracle, web-config, oracle10g, connection-string

如何在 Oracle 10g 连接字符串中设置正确的超时？

现在我有：

```
 <add name="ConnectionString" connectionString="Data Source=DBNAME;User ID=someUser;Password=somePassword;Unicode=True; Connection Timeout=60"
  providerName="System.Data.OracleClient" /> 
```

每当遇到此连接字符串，尤其是我的 GridView 时，它都会说不支持“连接超时”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:42:00.917

`Connection Timeout`不是此提供程序的有效参数。请参阅[此处](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracleconnection.connectionstring.aspx)哪些参数对 Microsoft 提供程序有效。

该参数对`Oracle.DataAccess.Client.OracleConnection`Oracle 提供的 Oracle.DataAccess.dll 有效。这是当前推荐的提供程序，因为`System.Data.OracleClient`命名空间已被弃用，并将根据[本文从 .NET 的未来版本中删除。](http://msdn.microsoft.com/en-us/library/77d8yct7%28v=vs.100%29)

# c - 哪个运算符更快（> 或 >=）、（< 或 <=）？

> ID：11763399
> 
> 赞同：7
> 
> 时间：2012-08-01T16:15:22.247
> 
> 标签：c, performance, optimization, assembly, operators

`<`比 便宜（快）`<=`，同样，`>`比 便宜（快`>=`）？

免责声明：我知道我可以测量，但这只会在我的机器上，我不确定答案是否可能是“特定于实现”或类似的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T16:28:30.170

# TL;博士

四个操作员之间似乎几乎没有区别，因为它们对我来说几乎都在同一时间执行（*在不同的系统上可能会有所不同！*）。因此，当有疑问时，只需使用对情况最有意义的运算符（尤其是在使用 C++ 时）。

所以，事不宜迟，这里是长解释：

***假设整数比较：***

就生成的程序集而言，结果取决于平台。在我的电脑上（Apple LLVM Compiler 4.0, x86_64），结果（生成的程序集如下）：

```
a < b (uses 'setl'):

movl    $10, -8(%rbp)
movl    $15, -12(%rbp)
movl    -8(%rbp), %eax
cmpl    -12(%rbp), %eax
setl    %cl
andb    $1, %cl
movzbl  %cl, %eax
popq    %rbp
ret

a <= b (uses 'setle'):

movl    $10, -8(%rbp)
movl    $15, -12(%rbp)
movl    -8(%rbp), %eax
cmpl    -12(%rbp), %eax
setle   %cl
andb    $1, %cl
movzbl  %cl, %eax
popq    %rbp
ret

a > b (uses 'setg'):

movl    $10, -8(%rbp)
movl    $15, -12(%rbp)
movl    -8(%rbp), %eax
cmpl    -12(%rbp), %eax
setg    %cl
andb    $1, %cl
movzbl  %cl, %eax
popq    %rbp
ret

a >= b (uses 'setge'): 

movl    $10, -8(%rbp)
movl    $15, -12(%rbp)
movl    -8(%rbp), %eax
cmpl    -12(%rbp), %eax
setge   %cl
andb    $1, %cl
movzbl  %cl, %eax
popq    %rbp
ret 
```

这并不能告诉我太多。所以，我们跳到一个基准：

女士们先生们，结果出来了，我创建了以下测试程序（我知道“时钟”不是计算这样的结果的最佳方法，但现在必须这样做）。

```
#include <time.h>
#include <stdio.h>

#define ITERS 100000000

int v = 0;

void testL()
{
    clock_t start = clock();

    v = 0;

    for (int i = 0; i < ITERS; i++) {
        v = i < v;
    }

    printf("%s: %lu\n", __FUNCTION__, clock() - start);
}

void testLE()
{
    clock_t start = clock();

    v = 0;

    for (int i = 0; i < ITERS; i++)
    {
        v = i <= v;
    }

    printf("%s: %lu\n", __FUNCTION__, clock() - start);
}

void testG()
{
    clock_t start = clock();

    v = 0;

    for (int i = 0; i < ITERS; i++) {
        v = i > v;
    }

    printf("%s: %lu\n", __FUNCTION__, clock() - start);
}

void testGE()
{
    clock_t start = clock();

    v = 0;

    for (int i = 0; i < ITERS; i++) {
        v = i >= v;
    }

    printf("%s: %lu\n", __FUNCTION__, clock() - start);
}

int main()
{
    testL();
    testLE();
    testG();
    testGE();
} 
```

在我的机器上（用 编译`-O0`），它给了我这个（5 次单独运行）：

```
测试号：337848
测试LE：338237
测试G：337888
测试GE：337787

测试号：337768
测试LE：338110
测试G：337406
测试GE：337926

测试号：338958
测试LE：338948
测试G：337705
测试GE：337829

测试号：339805
测试LE：339634
测试G：337413
测试GE：337900

测试L：340490
测试LE：339030
测试G：337298
测试GE：337593

```

我认为这些运算符之间的差异充其量是很小的，在现代计算世界中并没有太大的影响力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T18:03:14.597

它会有所不同，首先要检查不同的指令集以及编译器如何使用这些指令集。以 openrisc 32 为例，它显然受到 mips 的启发，但条件不同。对于 or32 有比较和设置标志指令，比较这两个寄存器如果小于或等于无符号则设置标志，比较这两个寄存器如果相等则设置标志。然后有两个条件分支指令在标志设置时分支和在标志清除时分支。编译器必须遵循这些路径之一，但小于、小于、小于或等于、大于等都将使用相同数量的指令，条件分支的执行时间相同，不执行的执行时间相同条件分支。

现在对于大多数架构来说，执行分支肯定比不执行分支花费更长的时间，因为必须刷新和重新填充管道。有些人做分支预测等来帮助解决这个问题。

现在某些体系结构的指令大小可能会有所不同，比较 gpr0 和 gpr1 与比较 gpr0 和立即数 1234，可能需要更大的指令，例如 x86 会看到很多。因此，尽管这两种情况都可能是一个分支，如果少于您的编码方式，则取决于哪些寄存器碰巧保存了哪些值可以产生性能差异（确保 x86 做了很多流水线处理、大量缓存等来弥补这些问题）。另一个类似的例子是 mips 和 or32，其中 r0 始终为零，它不是真正的通用寄存器，如果你写它它不会改变，它被硬连线为零，所以如果等于 0 比较可能会花费你如果需要一或两条额外的指令来用该立即数填充 gpr 以便进行比较，则如果等于某个其他数字，则不仅仅是比较，

有些架构有条件执行，如 arm，对于完整的 arm（不是 thumb）指令，您可以在每条指令的基础上执行，所以如果您有代码

```
if(i==7) j=5; else j=9; 
```

arm 的伪代码是

```
cmp i,#7
moveq j,#5
movne j,#7 
```

没有实际的分支，所以没有管道问题，你飞轮通过，非常快。

如果这是一个有趣的比较，那么一种架构与另一种架构，如提到的 mips 或 32，您必须专门执行某种指令进行比较，其他如 x86、msp430 和绝大多数 alu 操作都会更改标志、arm 和如果您告诉它更改标志，例如更改标志，否则不会如上所示。所以一个

```
while(--len)
{
  //do something
} 
```

循环减 1 也设置标志，如果循环中的内容足够简单，您可以使整个事情有条件，因此您可以节省单独的比较和分支指令，并节省管道惩罚。Mips通过比较解决了这个问题，分支是一条指令，它们在分支之后执行一条指令以节省一点管道。

一般的答案是您不会看到差异，指令数量、执行时间等对于各种条件都是相同的。小立即数与大立即数等特殊情况可能会对极端情况产生影响，或者编译器可能会根据您所做的比较简单地选择以不同的方式进行操作。如果您尝试重新编写算法以使其给出相同的答案但使用小于而不是大于和等于，则您可能会更改代码以获得不同的指令流。同样，如果您执行的性能测试过于简单，编译器可以/将优化比较完成并仅生成结果，这可能会因您的测试代码而异，从而导致不同的执行。所有这一切的关键是反汇编你想要比较的东西，看看指令有什么不同。这将告诉您是否应该看到任何执行差异。

# html - 正确使用 CSS 属性

> ID：11763400
> 
> 赞同：1
> 
> 时间：2012-08-01T16:15:24.853
> 
> 标签：html, css, semantic-markup

由于不建议将`table`元素用于布局目的（非表格数据），因为应用于这些元素的特殊格式[将来可能会发生变化](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html#answer-84986)，是否也不建议使用 CSS 属性，例如`text-align`设计用于使用在文本上，对于`img`相同语义原因的元素？

我一直在查看 w3c 规范，例如，`line-height`它似乎是为文本目的而设计的，并且在文档中对字体大小有很多引用，所以在`img`元素上使用这个属性是否合适或滥用，仅仅是因为它们被显示作为`inline`？

我可以理解 W3C 的[语义 Web](http://en.wikipedia.org/wiki/Semantic_Web)理念如何使用 CSS 从页面中删除样式信息，将数据仅保留在 HTML 中以供内容可访问性使用。但是*CSS 的原始基本原理文档在哪里*，为什么他们不`horizontal-align`从一开始就使用极其抽象的属性，而不是为每种显示类型使用唯一的对齐方式（例如`text-align: center`，可以用于所有`display: inline`元素，例如`img`元素）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:34:10.927

不，CSS 纯粹是展示性的。一些属性命名不当（text-align 是一个很好的例子，它*旨在*对齐所有内联子项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:22:49.123

在表格单元格中使用它非常好，`text-align`只需按照您应该做的方式设置表格样式。如果你想。只需在 CSS 中完成即可。不要使用`align="right"`.

[https://developer.mozilla.org/en/CSS/text-align](https://developer.mozilla.org/en/CSS/text-align) 说它适用于：块级元素、表格单元格和内联块。因此，这是一种记录在案并有意使用的用​​途。如果您有内联内容，请使用此属性设置其对齐方式。

[http://www.w3.org/TR/CSS21/text.html#propdef-text-align](http://www.w3.org/TR/CSS21/text.html#propdef-text-align)还声明

> 此属性描述块容器的内联级内容如何对齐。

所以它不仅仅是文本，而是所有内联内容。

# c++ - 在关闭按钮上设置未保存的文件标记

> ID：11763401
> 
> 赞同：0
> 
> 时间：2012-08-01T16:15:28.340
> 
> 标签：c++, objective-c, macos

如何控制 OS X 中未保存的文件标记？我说的是应用程序关闭按钮上的这个小点。我不知道它实际上是如何调用的，所以我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:22:42.423

我终于[找到了](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html)。它在 NSWindow 类中。

# python - Python、ctypes、DLL 和 PCOMM 仿真。如何预先分配变量？

> ID：11763405
> 
> 赞同：2
> 
> 时间：2012-08-01T16:15:36.407
> 
> 标签：python, dll, ctypes, emulation

学了很久python，终于有了一些突破：

我正在使用以下代码连接到个人通信终端：

```
from ctypes import *
import sys
PCSHLL32 = windll.PCSHLL32
hllapi = PCSHLL32.hllapi

def connect_pcomm(presentation_space):
    function_number = c_int(1)
    data_string = c_char_p(presentation_space)
    lenght = c_int(4)
    ps_position = c_int(0)
    hllapi(byref(function_number), data_string, byref(lenght), byref(ps_position)) 
```

到目前为止一切都很好。它确实连接到终端，我可以使用其他功能将键发送到屏幕、断开连接等。

我的问题在于 IBM 文档定义的函数 5：

[http://publib.boulder.ibm.com/infocenter/pcomhelp/v5r9/index.jsp?topic=/com.ibm.pcomm.doc/books/html/emulator_programming08.htm](http://publib.boulder.ibm.com/infocenter/pcomhelp/v5r9/index.jsp?topic=/com.ibm.pcomm.doc/books/html/emulator_programming08.htm)

''复制表示空间函数将连接主机的表示空间的内容复制到您在 EHLLAPI 应用程序中定义的数据字符串中。''

我为此编写的代码（这并不特别）：

```
def copy_presentation_space():
    function_number = c_int(5)
    data_string = c_char_p("")
    lenght = c_int(0)
    ps_position = c_int(0)
    hllapi(byref(function_number), data_string, byref(lenght), byref(ps_position)) 
```

主要问题是 data_string var 应该是：“预先分配的目标字符串是主机表示空间的大小。”

由于我并不完全了解这意味着什么，我只是尝试运行代码。并且 pythonw.exe 崩溃了。史诗般的。终端窗口也开始崩溃。它没有给出任何类型的错误，它只是说它停止工作。

现在，我的主要问题是，如何像 IBM ref 中提到的那样预先分配字符串。材料？

我可以在复制屏幕后简单地添加一个“打印数据字符串”以查看信息，还是我需要使用一些 ctypes 才能查看复制的信息？

编辑：我忘了提到我不需要使用那个功能，我可以使用这个：

将表示空间复制到字符串 (8)

我尝试使用它，但 data_string 变量永远不会改变值。

EDIT2：按照 kwatford 的建议，我改变了行

```
data_string = c_char_p("") 
```

至

```
data_string = create_string_buffer(8000) 
```

现在该函数不会崩溃并返回值 0，表示：“'主机演示空间内容已复制到应用程序。目标演示空间处于活动状态，并且键盘已解锁。' 但是当我尝试打印变量 data_string 时，我仍然得到一个空的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:48:27.260

您可以使用[`ctypes.create_string_buffer`](http://docs.python.org/library/ctypes.html#ctypes.create_string_buffer).

但是，您仍然需要知道缓冲区的大小。我不熟悉您尝试运行的软件，但听起来您需要：

*   至少 25x80 Unicode 字符的空间
*   这些字符的扩展属性可能有空间

所以作为一个粗略的猜测，我会说字符串应该至少有`25*80*2*2 = 8000`字节。

如果这不起作用，我建议更深入地阅读文档以确定正确的值。

# android - 安卓初始化替换

> ID：11763411
> 
> 赞同：1
> 
> 时间：2012-08-01T16:16:04.400
> 
> 标签：android, init

我知道在 Android 启动序列中，Linux 内核启动后，它会寻找`init`.

我替换`init`为我的自定义 C 应用程序`myapp`。在`myapp`中，我等待用户输入 5 秒。如果什么也没收到，我想运行原来`init`的，我将它重命名为`init_original`. 如果我收到用户输入，我想继续做我的事情。

我根据[http://android-dls.com/wiki/index.php?title=HOWTO:_Unpack%2C_Edit%2C_and_Re-Pack_Boot_Images](http://android-dls.com/wiki/index.php?title=HOWTO:_Unpack%2C_Edit%2C_and_Re-Pack_Boot_Images)中的说明将我的自定义`init`和解压缩的 ramdisk 和 cpio-ed 和 gzip-ed`init_original`

`init_original`使用 execve() 从我的程序中成功调用。但是，我得到以下输出：

```
[    3.851928] cpuidle: initiated for CPU0.
[    3.857116] cpuidle: initiated for CPU1.
[    3.862579] Freeing init memory: 320K

===============================================================================

Application started
Press enter in 1 second to enter test tool...
1 second is up, starting normal init

[    4.883422] init: /init.rc: 865: ignored duplicate definition of service 'ril-daemon'
[    8.247894] av8100_hdmi av8100_hdmi.3: HDMI display probed
[    9.694915] init: Timed out waiting for /dev/.coldboot_done
[    9.839630] init: cannot find '/system/bin/logwrapper', disabling 'cspsa'
[    9.847137] init: cannot execve('/system/bin/logwrapper'): No such file or directory
[    9.855102] init: /system/bin/logwrapper terminated with status 127.
[    9.869934] init: cannot find '/system/xbin/watchdog-kicker', disabling 'watchdog-kicker'
[    9.887695] init: cannot find '/system/bin/ifconfig', disabling 'shrm-netdev'
[    9.894836] init: cannot find '/system/bin/sh', disabling 'modem'
[    9.907714] init: cannot find '/system/bin/modem-supervisor', disabling 'modem-supervisor'
[    9.916015] init: cannot find '/system/bin/copsdaemon', disabling 'copsd'
[    9.922851] init: cannot find '/system/bin/cn_server', disabling 'cn_server'
[    9.929931] init: cannot find '/system/bin/simd', disabling 'simd'
.... 
```

知道有什么问题吗？与我调用`init_original`的方式有关，或者与我重新打包 ramdisk.img 的方式有关，还是其他原因？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:57:06.603

您可以尝试一些非常基本的东西，例如指导 a 的输出 `ls -l`或类似于输出流或文件的东西。从您尝试执行您自己的应用程序的位置进行此调用，以查看它是否具有执行的适当文件权限。

Using `umask(0)`设置用户创建的文件的文件权限。这就像使用 `chmod()`但在文件实际创建之前执行。因此，在您的情况下，您使用 `umask(0)`的结果是 `'777'`文件权限，因此您的应用程序能够运行，因为它具有所需的文件权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:11:56.930

好的，我找到了答案。

我是反过来做的，原来`init.c`的被编辑为调用。`myapp`

在android的 /system/core/init:`init.c`中，我`myapp`在行后调用

```
/* clear the umask */
umask(0);
// call program here 
```

如果`myapp`在之前调用`umask(0)`，则会发生与上述相同的错误。我不知道为什么它会这样工作。如果有人可以向我解释`umask(0)`正在做什么（设置权限或我认为的类似内容），我将不胜感激。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T17:24:05.090

有同样的问题，在 /sbin 中，ueventd 和 watchdogd 是 ../init 的符号链接

所以改变那些： ln -s ../init_original 并让 myapp 调用 init_original 应该可以工作。=)

# javascript - 丢失全局变量值

> ID：11763414
> 
> 赞同：1
> 
> 时间：2012-08-01T16:16:14.680
> 
> 标签：javascript, node.js, scope

这是一个游戏应用程序，我声明了变量skipnpc，该变量旨在指示非玩家角色已经使用了他的回合，并且与他的行为相关的任何AI代码都会被跳过一段时间。我遇到的问题是我以某种方式失去了skipnpc的值，我指出我在console.log命令中发出的位置与可变范围有关，但我不明白如何解决它。

```
function npcMovement() {
    skipnpc = false;...
    sql4 = "SELECT id FROM game_moblist WHERE spawn_id =" + spawnid + " AND posx=" + parseInt(mobpathx[mobpathx.length - 1]) + " AND posy=" + parseInt(mobpathy[mobpathy.length - 1])
    connection.query(sql4, function (err, send, fields) {
        console.log("skipnpc pathing")
        io.sockets.emit('groupmoveresult', send, parseInt(mobpathx[mobpathx.length - 1]), parseInt(mobpathy[mobpathy.length - 1]))
        skipnpc = true
        console.log("skipnpc=true:" + skipnpc)
    });
    console.log("skipnpc = false:" + skipnpc) 
```

后来我用

```
if (skipnpc==false){
  ... 
```

在尝试任何进一步的 AI 代码之前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:23:43.273

connection.query 是异步执行的。因此，您可以在完成之前到达您的最后一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:50:35.850

简单地说，`skipnpc`保证在`false`你最后一次击球时仍然存在`console.log(...)`。`connection.query(...)`在尝试查看其结果之前，您没有给您任何时间来执行。任何依赖于结果的东西`connection.query(...)`都必须作为你传递给它的回调的一部分来执行；否则，当您尝试访问它们时，任何结果都不会出现。

异步编程需要一些时间来适应。您也许可以使用 async 模块并使用它的`waterfall(...)`方法重新组织您的代码，这样一切就不会陷入深度嵌套。但是您必须意识到，如果您进行异步调用，您的代码将直接流过它。

# database - vb.net 更新数据库问题

> ID：11763420
> 
> 赞同：0
> 
> 时间：2012-08-01T16:17:01.497
> 
> 标签：database, vb.net

我的问题发生在 da.Update(dt)。我收到“OleDbException 未处理，INSERT INTO 语句中的语法错误”错误。当我使用没有字段名称且只有 10 列的基本表时，它起作用了，但现在我有 25 个项目，它不起作用。

```
Dim dt As New DataTable
    Dim ds As New DataSet

    con.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source= C:\TPComplete.accdb;Persist Security Info=False;"

    con.Open()
    MsgBox("here")
    ds.Tables.Add(dt)

    Dim da As New OleDbDataAdapter

    da = New OleDbDataAdapter("SELECT * FROM DReview", con)

    da.Fill(dt)

    Dim newRow As DataRow = dt.NewRow

    newRow.Item("Caller") = Caller
    newRow.Item("Associate Name") = Associate
    newRow.Item("Store Number") = "1"
    newRow.Item("Number of Rings") = Ring
    newRow.Item("Time on Hold") = HoldTime
    newRow.Item("Greeting: 3 or fewer rings") = GreetingRings
    newRow.Item("Greeting: Asked for your name") = GreetingAskName
    newRow.Item("Greeting: Offered his/her name") = GreetingOfferedName
    newRow.Item("Greeting: Mentioned TIRE PROS in the greeting") = GreetingTirePros
    newRow.Item("Greeting: Associated acted like they are glad") = GreetingGlad
    newRow.Item("Hold for longer than 1 minute") = holdUpdate
    newRow.Item("Ask for the type of car AND look up the size") = LookupSize
    newRow.Item("Ask appropriate questions about the type of driving") = DailyDriving
    newRow.Item("1st Price Mentioned") = SingleTirePrice
    newRow.Item("1st OTD Price Mentioned") = SingleTireOutDoorPrice
    newRow.Item("Tire Brand") = TireBrand
    newRow.Item("Tire Model") = TireModel
    newRow.Item("Offered several tire choices and prices") = SeveralChoices
    newRow.Item("Did they offer financing options") = Financing
    newRow.Item("Mentioned benefits of the location") = Benefits
    newRow.Item("Appointment") = Appointment
    newRow.Item("How long does it take to put them on") = InstallTime
    newRow.Item("Associate Score") = AssociateScore
    newRow.Item("Time Completed") = hms
    newRow.Item("Completed Date") = ymd

    dt.Rows.Add(newRow)
    Dim cb As New OleDbCommandBuilder(da)
    cb.GetInsertCommand()
    da.Update(dt)
    MsgBox("Saved")
    con.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:31:59.970

错误“INSERT INTO 语句中的语法错误”可能意味着问题在于 OleDb 命令生成器无法正确处理您正在使用的列名。这些行：

```
 newRow.Item("Store Number") = "1"
    newRow.Item("Number of Rings") = Ring
    newRow.Item("Time on Hold") = HoldTime
    newRow.Item("Greeting: 3 or fewer rings") = GreetingRings
    newRow.Item("Greeting: Asked for your name") = GreetingAskName
    newRow.Item("Greeting: Offered his/her name") = GreetingOfferedName
    newRow.Item("Greeting: Mentioned TIRE PROS in the greeting") = GreetingTirePros
    newRow.Item("Greeting: Associated acted like they are glad") = GreetingGlad 
```

表明你有“非变量类型”的列名，这基本上是你不能用作变量名的任何类型的名称。那只是 { AZ, 0-9 和 "_" }。包含空格之类的非变量类型名称不是无效的，但必须特别引用它们，如下所示：

```
 newRow.Item("[Store Number]") = "1" 
```

不幸的是，一些连接提供程序（在这种情况下我认为 OleDb 就是其中之一）无法处理它并且会为您取消*引用*它们，从而导致生成的 SQL 命令无效。

最简单的解决方案是返回列号而不是名称（可能是他们最初拥有的原因）。或者，您可以重命名所有列名以删除所有非可变类型字符（空格、冒号等）。

# javascript - 使用 Javascript 将图像加载到 div onClick

> ID：11763422
> 
> 赞同：0
> 
> 时间：2012-08-01T16:17:05.193
> 
> 标签：javascript, onclick

我已经尝试了两天来弄清楚我做错了什么。我真的认为这段代码应该可以工作，但事实并非如此。如果我在第 57 行换出变量，它将打开一个文件 onClick. 所以从逻辑上讲，问题是变量。但是当我在第 60 行跟踪变量时，变量返回了正确的值。那么为什么图像不能正确加载呢？当我单击按钮时，什么也没有发生。

++编辑++

我已经尝试了很多东西，问题绝对出在变量 $file 上。不管我怎么测试，$file 对应的是列表中item的id号。但是当我按下按钮时，它总是拉出第 1 项。我什至回去编辑代码以阅读：

```
<img id="loadingImage" src="../maps/<?php echo $name['id']?>.gif" style="visibility:hidden"/> 
```

地球上没有理由我可以发现这不起作用。'id' 正在正确迭代。那么为什么只有在我按下按钮后它才会认为 'id'=1 呢？

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>List of Parks</title>
        <link href="guide.css" rel="stylesheet" type="text/css">
        <style type="text/css"></style>

        <script type="text/javascript" src="../jQuery/jQuery.js"></script>
        <script type="text/javascript">

        <!--
        function showImage() {
            document.getElementById('loadingImage').style.visibility = 'visible';
        }
        -->
        </script>
    </head>
    <body>
        <div id="container">
            <div id="state"></div>

            <div id="list">
                <?php foreach ($datas as $name):
                {
                    if ($name['state'] == 'PA')
                    {
                ?>

                <input type="hidden" name="id" value="<?php echo $name['id']; ?>">

                <h2><?php echo htmlspecialchars($name['name'], ENT_QUOTES, 'UTF-8');?></h2>
                <?php htmlspecialchars($name['site'], ENT_QUOTES, 'UTF-8');?>
                <?php $link = $name['site']; ?>
                <ul id="link">
                    <li class="l1"><?php echo "<a href=$link>$link</a>" ?></li>
                </ul>
                <br>
                <?php echo htmlspecialchars($name['description'], ENT_QUOTES, 'UTF-8');?>
                <?php echo htmlspecialchars($name['street'], ENT_QUOTES, 'UTF-8');?>
                <br>
                <?php echo htmlspecialchars($name['city'], ENT_QUOTES, 'UTF-8');?> ,
                <?php echo htmlspecialchars($name['state'], ENT_QUOTES, 'UTF-8');?>
                <?php echo htmlspecialchars($name['zip'], ENT_QUOTES, 'UTF-8');?>

                <?php $file = $name['id'];
                $image = '../maps/'.$file.'.gif';?>
                <input type="button" value="click for map" onclick="showImage();" />

                <div id="trailmap">
                    **<img id="loadingImage" src="<?php $image ?>" style="visibility:hidden" />**
                </div>

                <?php echo $image?>

                <hr width="100%" size="3" black />

                <?php
                    }
                }
                endforeach; ?>
            </div>
        </div>

        <div class="fixbox">
            <div id="statemap"></div>
            <div id="home"></div>
            <div id="guide"></div>
        </div>

    </body>
</html> 
```

# ios - iOS - 使用密码连接到 WiFi

> ID：11763425
> 
> 赞同：1
> 
> 时间：2012-08-01T16:17:18.437
> 
> 标签：ios, wifi, iphone-privateapi, ssid

是否可以使用提供的所有私人信息（ssid 和密码）连接到无线接入点？即使使用私有框架也可以。我没有在 appstore 中发布它，所以我只想知道它是否可以在 iOS 中完成。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T00:00:02.110

这是答案： [我在哪里可以找到 iOS Obj-C 代码来扫描并连接到 wifi（私有 API）](https://stackoverflow.com/questions/11725553/where-do-i-find-ios-obj-c-code-to-scan-and-connect-to-wifi-private-api)

你需要一个越狱的设备。我在 iOS 5、6 和 7 上对其进行了测试。

# html - 窗口调整大小时元素相互重叠

> ID：11763426
> 
> 赞同：0
> 
> 时间：2012-08-01T16:17:22.700
> 
> 标签：html, css, responsive-design

在我使用[Foundation构建的](http://Foundation.zurb.com "Foundation")[这个模板](http://d.dancodes.com.ar/private/thrace/ "这个模板")上，除了两个导航栏外，一切看起来都正确且响应迅速。它们都是独立的，但在调整窗口大小时它们会相互重叠。`<div class="row">`

（`@media only screen and (max-width: 767px)`如果有帮助的话，应该让它看起来更干净）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:31:51.713

实际上，如果您使用开发人员工具在 chrome 上打开页面，或者使用 firebug 在 firefox 中打开页面，您会看到当您使页面小于 767px 宽度时，就会出现问题，因为您的 @media 仅屏幕和（最大宽度： 767 像素）。我建议检查 css 的原因，如果你从 html 中删除它，你会得到更好的结果，所以你可以检查 css 中的哪些属性让你的 div 变得疯狂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:52:31.890

尝试将foundation.css（第148行附近）.row类高度增加到140px并将主链接移动到主内容顶部的某个位置？该代码严重需要使用高度/边距或 div 块 imo :)

编辑：粗略编辑foundation.css行不是您需要的，为该特定高度设置创建单独的css类，并通过正确的媒体查询（导致问题发生的宽度）触发使用它。这样你就可以在顶部导航周围调整你喜欢的任何类，它不是很漂亮，但它可以让事情顺利进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:40:10.443

正如[Jorge Aguilar](https://stackoverflow.com/a/11763665/101066)所说，问题`float: none`在于适用于每个`<li>`. 此外，我使用了一个`width: 100%`属性在整个屏幕上拉伸元素（就像它最初使用浮动一样，但没有重叠）

# php - 使用 jQuery 复制特定于列的表单值

> ID：11763429
> 
> 赞同：0
> 
> 时间：2012-08-01T16:17:32.480
> 
> 标签：php, jquery, forms

我以前使用 jQuery 将帐单地址复制到送货地址，但是如果我从 PHP 动态生成具有各种值的表单行，我如何设置表单以便在复选标记时，将自动复制推荐的项目*数量*到同一项目的数量？

这是计费/运输副本脚本的基本版本。

```
<script src="../Scripts/jquery-1.7.2.min.js"></script>
<script>
$(document).ready(function(){ 
    $("input#same").click(function()
    { 
        if ($("input#same").is(':checked')) 
        { 
            // Checked, copy values 
            $("input#qty").val($("input#same").val()); 
        } 
        else 
        { 
            // Clear on uncheck 
            $("input#quantity").val(""); 

        } 
    }); 
});
</script> 
```

这是动态收集项目及其建议数量的 PHP 代码。

```
while( $row = mysql_fetch_array($histresult) )
{
    echo '<tr height = "50px">';

    echo '<td>'.$product_id.'</td>';
    echo '<td>'.$suggested_quantity.'<input id="same" name="same" type="checkbox" value ="'.$suggested_quantity.'"/> </td>';
    echo '<td><input name="qty" type="text"size="4" maxlength="4"></td>';
    ///Other form elements go here, as well as an Add to Cart Button
} 
```

对于每个项目，从数据库中检索基于用户最喜欢项目的建议批发数量。还有一个文本字段，以便他们可以在将其发送到购物车之前输入他们想要的任何金额。但如果他们选中复选框，我希望它将该值复制到文本字段。

不仅这段代码似乎不起作用，这与计费/运输副本之间的区别在于，现在我正在处理动态数量的字段。如何让每一行都完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:51:10.183

使用 jQuery，您基本上希望从复选框中获取建议的值并将其放入另一个表单元素中。假设这是您的 HTML：

```
<table>
   <tr>
      <td>
         100 <input id="check-1" name="same" type="checkbox" value ="100"/>
             <input id="qty-1" name="qty" type="text"size="4" maxlength="4">
      </td>
      <td>
         100 <input id="check-2" name="same" type="checkbox" value ="100"/>
         <input id="qty-2" name="qty" type="text"size="4" maxlength="4">
      </td>
      <td>
         100 <input id="check-3" name="same" type="checkbox" value ="100"/>
         <input id="qty-3" name="qty" type="text"size="4" maxlength="4">
      </td>
   </tr>
</table> 
```

然后这将是您的 javascript/jQuery：

```
// Bind click event to ALL checkboxes
$("#same-*").live("click", function(e) {

   // Only change it if box is checked
   if( $(this).is(":checked") ) 
   {
      // Get suggested value
      suggested_val = $(this).val();

      // Place in next element (textbox)
      $(this).next().val(suggested_val);       
   }
)}; 
```

我没有对此进行测试，但这基本上是它的工作方式。

在您的 PHP 中，您可能希望动态生成这些 ID 号，以便每一行都使用一个唯一的 ID。这通常很简单，可以匹配您的数据库行 ID。

```
<td>'.$suggested_quantity.'<input id="same-' . $row->id . '" name="same" type="checkbox" value ="'.$suggested_quantity.'"/> </td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:51:39.040

以这种方式更改您的代码

```
<script>
$(document).ready(function(){ 
    $("input.same").click(function()
    { 
        if ($(this).is(':checked')) 
        { 
            // Checked, copy values 
            var temp = $(this).attr("title");
            $("input#qty"+temp).val($("input#same"+temp).val()); 
        } 
        else 
        { 
            // Clear on uncheck 
            $("input#qty"+temp).val(""); 

        } 
    }); 
});
</script>

$i=0;
while( $row = mysql_fetch_array($histresult) )
{
    echo '<tr height = "50px">';

    echo '<td>'.$product_id.'</td>';
    echo '<td>'.$suggested_quantity.'<input class="same" id="same'.$i.'" title="'.$i.'" name="same'.$i.'" type="checkbox" value ="'.$suggested_quantity.'"/> </td>';
    echo '<td><input  class="qty" name="qty'.$i.'" id="qty'.$i.'" type="text"size="4" maxlength="4"></td>';
    ///Other form elements go here, as well as an Add to Cart Button
    $i++;
} 
```

希望这对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T16:52:37.620

我发现在几个 html 元素中回收 ID/名称是一个坏主意。

我认为最好让它们独一无二。

但无论如何，这里的建议不会修改你的 html 结构很多。

更改表单标签如下：

```
<form id="Order">
...
</form> 
```

如下更改您的 PHP 代码（添加标签标签以更好地在 DOM 中隔离您建议的数量，为您的复选框去除一些不必要的结构）：

```
while($row=mysql_fetch_array($histresult))
        {
            echo '<tr height = "50px">';

            echo '<td>'.$product_id.'</td>';
            echo '<td><label>'.$suggested_quantity.'<label><input type="checkbox" class="Same"/> </td>';
            echo '<td><input name="qty" id="qty_'.$product_id.'" type="text"size="4" maxlength="4"></td>';
                            ///Other form elements go here, as well as an Add to Cart Button
                   } 
```

最后，这里是 jQuery 代码：

```
 <script src="../Scripts/jquery-1.7.2.min.js"></script>
<script>
    jQuery(document).ready(function(){ 
    jQuery("form#Order").click(function(Event){ //One event handler for the form, more efficient that way and you need less html structure to keep track of things
        var Target = jQuery(Event.target); //This is the html element that got clicked on
        if(Target.is("input:checkbox.Same")) //Make sure it's a checkbox that suggests quantity
        {
            var Text = jQuery(Target.closest('tr').children().get(2)).children();   //Get the parent TR tag, get it's third child (td tag containing the text field), get it's child (the text field)
            var Suggested_quantity = Target.prev().html(); //Get the previous sibling which is the label containing the quantity and get it's html content which is the quantity
            if(Target.is(":checked"))
            {
                Text.val(Suggested_quantity);
            }
            else
            {
                Text.val("");
            }
    }); 
});
</script> 
```

编辑：删除了一些多余的 html 代码。添加了一个类来隔离正确的复选框。为文本字段添加了 ID（忘记了）。

# svn - SVN：“在修订文件中发现格式错误的标题 [...]”

> ID：11763430
> 
> 赞同：3
> 
> 时间：2012-08-01T16:17:33.067
> 
> 标签：svn, mysqldump, revision, svnadmin

这是[Svn non-LF line ending questions with svn:ignore on dump load 问题](https://stackoverflow.com/questions/11638380/svn-non-lf-line-ending-problems-with-svnignore-on-dump-load)的延续，但是一个非常不同的问题。

背景故事：使用创建转储文件后`svnadmin`，我收到此错误：

```
svnrdump: E125005: Cannot accept non-LF line endings in 'svn:ignore' property 
```

最终，我找到了导致此问题的文件，并`^M`从下面看到的行尾删除了 ，并相应地调整了字符数。

```
PLAIN
K 10 
svn:ignore
V 35
.*^M
classes^M
faces-config.xml.l4t^M

END
ENDREP 
```

但是，现在当我尝试转储存储库时，出现此错误：

```
svnadmin: E160004: Found malformed header ' 0.0.r233/2200' in revision file 
```

此标头仅位于修订文件的最后几行：

```
other stuff here
END
ENDREP
id: 0.0.r233/2200
type: dir
pred: 0.0.r232/3179
count: 233
text: 233 2082 105 105 8892ed0c073a063ccf02d7ad39463b16
cpath: /
copyroot: 0 /

2u.6.t232-1 modify false true /trunk/other/stuff/here

2200 2339 
```

我尝试对文件进行一些细微的更改，但我无法弄清楚这个错误的含义。我尝试过以各种方式跳过它，在导入时将其转换，当然还可以在谷歌上搜索问题，但无法提出任何建议。我对所有内容都有 root 访问权限并进行了备份，所以我不担心破坏任何东西。有谁知道我可以做些什么来解决这个问题？

# css - CSS 图标垂直对齐

> ID：11763433
> 
> 赞同：2
> 
> 时间：2012-08-01T16:17:41.313
> 
> 标签：css

我正在尝试使用最少的 css 元素在 css 中实现以下对齐：

中间：

```
==============================================================
= [icon]                                                     =
= [    ] Text                                                =
= [    ]                                                     =
============================================================== 
```

底部：

```
==============================================================
= [icon]                                                     =
= [    ]                                                     =
= [    ] Text                                                =
============================================================== 
```

右中：

```
==============================================================
=                                                     [    ] =
=  Text                                               [    ] =
=                                                     [    ] =
============================================================== 
```

右下角：

```
==============================================================
=                                                     [    ] =
=                                                     [    ] =
=  Text                                               [    ] =
============================================================== 
```

中间真的很容易：

假设文本行高 = 10px，图标高度 = 30px

```
<div class="container">
    Text
</div>

<div class="container right">
    Text
</div>

.container {
    line-height: 30px;
    background: url(...) no-repeat center left
    padding-left: 38px;
}
.container.right {
    line-height: 30px;
    background: url(...) no-repeat center right
    padding-right: 38px;
} 
```

问题是：如何进行底部对齐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T20:14:10.777

从父元素垂直对齐元素的唯一方法是将其设置为使用 和 显示为表格单元`display:table-cell;`格`vertical-align:`。如果这不可接受，则必须从子元素和相对定位开始。

[http://jsfiddle.net/VdvmJ](http://jsfiddle.net/VdvmJ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:50:12.267

我认为这没什么大不了的。首先将背景图像位置设置为左上角，然后根据您的图像高度增加行高。

[**检查这个 jsfiddle 示例**](http://jsfiddle.net/libinvbabu/ySYTb/)

对于右对齐部分，我`text-align:right;`也设置了。

希望你正在努力做到这一点。

# java - Display a big number of images into a grid

> ID：11763435
> 
> 赞同：1
> 
> 时间：2012-08-01T16:17:48.737
> 
> 标签：java, swing, memory-management, bufferedimage

I have an application, in which I want to displaying a number of image components. Each item of this will be a `custom jcomponent` which will has the image in a `BufferedImage` object to draw it in `paintcomponents(Graphics g)` overrided method. I will also use a `JPanel` for the grid with a `gridlayout` or `flowlayout` for place the custom image `jcomponents`, also the grid's layout will be inside an `JscrollPane`.

My question is what happens, when the number of the images I must to put into the grid will become big. With use of the `jscrollpane`, the number of the components so the number of the images must be draw will be smaller like 20-30 components, but each component inserted into the grid will have an object of BufferedImage to keep the corresponding image. This is bad for the perfomance and the memory consuption? May can use some pattern? for example if I use a main point of reference to load the images from disk to `bufferedimage` and depending of which rectangle of the `scrollpane` the user then release some bufferedimage where they putted away in the grid from the current position of the `jscrollpane`?

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:01:59.250

1.  线程加载图像，以便 UI 不会因加载而延迟
2.  缩放图像，可能适合面板的大小，浪费内存没有意义

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T19:01:18.247

您将不得不对基本变量进行原型设计并分析结果。然后将这些结果与您的最低公分母目标平台上可用的功能进行比较。sscce[是](http://sscce.org/)无价的。例如，这[一个](https://stackoverflow.com/a/3078354/230513)会让你轻松改变`N`图像的数量。

[这里](https://stackoverflow.com/a/7665982/230513)提到了一些视图替代方案。

注释中指出：为了节省内存，请考虑使用[LRU 缓存](https://stackoverflow.com/q/221525/230513)。

# java - Passing an object to Rest from javascript

> ID：11763437
> 
> 赞同：1
> 
> 时间：2012-08-01T16:17:50.190
> 
> 标签：java, javascript, jquery, rest

Here is the scenario I have a REST service defined as follow:

```
@Path("/company/{companyName}/sessions")
public class RESTSessionController {

    RESTService service = new RESTService();
     @GET
     @Produces({"application/json"})
     @Path("/{username}/{password}") 
     public Result getFriend(@PathParam ("companyName") String companyName ,
             @PathParam ("username") String username,
             @PathParam ("password") String password){

         System.out.println(companyName);
         return service.login(username,password);
     }
} 
```

To call this I have a javascript as follow:

```
$.ajax({
    url: 'http://localhost:8888/rest/company/hertz/sessions/amir/help',
    dataType: 'json',
    data: null,
    success: function(data) { 
        $("#abc").html(dumpObj(data,"Result",'',0));
         }
    }); 
```

This works fine and I get this back:

```
{"code":"200","description":"Amir is now logged in.","payload":{"@type":"xs:string","$":"Amir123"}} 
```

which is perfectly fine.

Now I'm trying to go one step further and call my service using an object so I changed my code to:

```
$.ajax({
    qObj={username:"Amir",password:"123",companyName:"hertz"}
    url: 'http://localhost:8888/rest/company/',
    dataType: 'json',
    data: JSON.stringify(qObj),
    success: function(data) { 
        $("#abc").html(dumpObj(data,"Result",'',0));
         }
    }); 
```

And it won't work.

My question is simple, how to I call a REST service with parameter in the path (or without it) using jquery/javascript?

Thx for the help

Amir

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:39:05.180

找到解决方案 如果您正在寻找相同的答案，这里是我的发现： 1) 您不能将路径中使用的用户变量作为发送到 REST 服务的对象的一部分。所以在我的情况下 {companyName} 不能真正作为 json 对象的一部分传递。2）在方法声明中，它必须是一个指示该方法需要一个 json 对象的指令，就是这种情况，所以我将代码更改为：

```
 @PUT
 @Produces(MediaType.APPLICATION_JSON)
 @Consumes(MediaType.APPLICATION_JSON)
 @Path("/")
 public API_Session login(API_Session_Request request){ 
```

一切都像一个魅力。

3) 在 javascript 中，您应该使用 JSON.stringify 您的对象：

```
var qObj={username:"Amir",password:"123",company_name:"hertz"}
$.ajax({
    type:'PUT',
    url: 'http://localhost:8888/rest/company/sessions',
    dataType: 'json',
    data: JSON.stringify(qObj),
    contentType: "application/json; charset=utf-8",
    success: function(data) { 
        $("#abc").html(dumpObj(data,"Result",'',0));
         }
    }); 
```

希望这可以帮助您节省一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:24:34.817

为什么必须使用 JSON.stringify？试试这个，让我知道:)

```
$.ajax({
    url: 'http://localhost:8888/rest/company/',
    dataType: 'json',
    data: {username:"Amir",password:"123",companyName:"hertz"},
    success: function(data) { 
        $("#abc").html(dumpObj(data,"Result",'',0));
         }
    }); 
```

# php - Get polygon coordinates from geojson in yii framework

> ID：11763438
> 
> 赞同：0
> 
> 时间：2012-08-01T16:17:52.910
> 
> 标签：php, postgresql, yii, geojson

I use Yii framework with GeoExt to develop map based web application.In this app i have a feature that user can draw polygon and when click on it i send polygon information with ajax to controller action to save this polygon on database.For saving polygon on database i need coordinates of polygon.For get polygon coordinates i use below code in my controller action.But i don't know i can get polygon coordinates or no for understand about it i send coordinates to $.ajax success function in my action code but i get error in my browser console!
**Action Code:**

```
public function actionTest()
{
   if(isset($_POST['polygon']) && isset($_POST['name'])){
            $str = $_POST['polygon'];
            $polygon = CJSON::decode($str);
            $coordinates = $polygon->polygon->geometry->coordinates[0];
   }
   echo CJSON::encode(array('polygon'=> $coordinates));
} 
```

**$.ajax code:**

```
function save(feature) {
        var geojson_format = new OpenLayers.Format.GeoJSON();
        var str = geojson_format.write(feature);
        str = str.replace(/,/g, ', ');
        Ext.MessageBox.prompt('Name', 'Please enter district name:', function(btn, text){
                if (btn == 'ok' && text.length > 0){
                    <?php 
                        echo CHtml::ajax(array(
                            'url'=>array('site/test'),
                            'data'=>array('polygon'=>'js:str',
                                'name'=>'js:text'),
                            'type'=>'POST',

                            'success'=>"function(data){
                                    console.log(data);
                                }"
                        ));
                    ?>
                    $("#output").val(str);
                }
                else if(btn == 'ok' && text.length == 0)
                    Ext.MessageBox.alert('Error', 'Please Enter Name For Polygon To Save');
            });
} 
```

Error in browser console:

```
POST http://localhost/FleetManagement/index.php/site/test 500 (PHP Error) jquery.js:8102 jQuery.ajaxTransport.send jquery.js:8102 jQuery.extend.ajax jquery.js:7580 modify.mode/FleetManagement/:254(anonymous function) 
```

But when i use below code for action i can get String in console:

```
public function actionTest()
{
   if(isset($_POST['polygon']) && isset($_POST['name'])){
            $str = $_POST['polygon'];
            $polygon = CJSON::decode($str);
   }
   echo CJSON::encode(array('polygon'=> $polygon ));
} 
```

after using above code i can get below string in browser console:

```
{"polygon":{"type":"Feature","properties":[],"geometry":{"type":"Polygon","coordinates":[[[-7302732.4720101,6527844.6333235],[-3193477.8319711,6606116.1502766],[-5111129.9973226,5001550.0527375],[-6637424.5779086,4884142.7773079],[-7772361.5737289,5158093.0866438],[-7302732.4720101,6527844.6333235]]]},"crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:OGC:1.3:CRS84"}}}} 
```

why i can't get coordinates and how can i do this?
I see below code for output of var_dump in chrome console!

```
<pre class='xdebug-var-dump' dir='ltr'>
<b>array</b>
'type' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'Feature'</font> <i>(length=7)</i>
'properties' <font color='#888a85'>=&gt;</font> 
<b>array</b>
<i><font color='#888a85'>empty</font></i>
'geometry' <font color='#888a85'>=&gt;</font> 
<b>array</b>
'type' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'Polygon'</font> <i>(length=7)</i>
'coordinates' <font color='#888a85'>=&gt;</font> 
<b>array</b>
0 <font color='#888a85'>=&gt;</font> 
<b>array</b>
 ...
'crs' <font color='#888a85'>=&gt;</font> 
<b>array</b>
'type' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'name'</font> <i>(length=4)</i>
'properties' <font color='#888a85'>=&gt;</font> 
<b>array</b> 
```

i don't know why coordinates doesn't appear in console an show ... stead of themes!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:48:37.203

我不确定您为什么要尝试将多边形坐标传回；听起来好像您应该将其保存到您的 actionTest 中的数据库中，并且无需将其发送回客户端？

无论如何，我认为您的代码应该在这一行抛出 PHP 错误：

```
$coordinates = $polygon->polygon->geometry->coordinates[0]; 
```

你确定 $polygon 是一个对象吗？我认为它是一个数组，所以你需要使用数组引用，例如：

```
$coordinates = $polygon['polygon']['geometry']['coordinates'][0]; 
```

在任何情况下，在您的 actionTest 中执行一些 var_dump() 以确保值是您期望的值，然后再将其传递回您的 JS。

# windows-runtime - 关于 Metro 风格应用程序的几个问题

> ID：11763441
> 
> 赞同：1
> 
> 时间：2012-08-01T16:18:00.060
> 
> 标签：windows-runtime, windows-store-apps

我有几个关于 Metro 风格应用程序的问题。

1.  他们需要 .NET Framework 还是任何框架？
2.  哪些编程语言可用于创建 Metro 风格的应用程序？
3.  它们可以跨平台吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:52:05.260

1.  它不需要使用 .NET - 您可以使用 C++ 或 C++/CX 构建本机应用程序或使用 HTML 和 Javascript
2.  C#、Visual Basic、C++、C++/CX、XAML、Javascript、HTML、CSS
3.  这取决于你对跨平台的理解——这些应用程序可以在任何 Windows 8 平台上运行，但不能在 Windows Phone、Mac 或 Linux 上运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:19:15.600

Metro 应用程序使用 Microsoft .Net (c#) 或 C++ 或 HTML 5 / Javascript 开发

[Metro应用的API参考](http://msdn.microsoft.com/en-US/library/windows/apps/br211369)

有关更多详细信息，请查看此页面：http: [//msdn.microsoft.com/library/windows/apps/](http://msdn.microsoft.com/library/windows/apps/)

* * *

**HTML5 - Javascript** 这些是任何浏览器使用的语言，使它们在任何系统上都兼容

**Microsoft .Net** 只能在 Windows 计算机上运行，​​但您可能需要检查[Mono](http://www.mono-project.com/Main_Page)以编译用 C# 制作的多平台应用程序

**C++** 好吧，C++ 就是 C++……它几乎可以在任何地方做任何事情

# jsf - 你如何让行号显示在 ?

> ID：11763444
> 
> 赞同：2
> 
> 时间：2012-08-01T16:18:10.967
> 
> 标签：jsf, datatable

我有以下 JSF 数据表：

```
<h:dataTable border="1" var="f2" value="#{someEJB.list}">
    <h:column>
        <f:facet name="header">No</f:facet>
    </h:column>
    <h:column>
        <f:facet name="header">Name</f:facet>#{f2.name}
    </h:column>
</h:dataTable> 
```

如何显示行号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:57:22.857

你可以用[`UIData#getRowIndex()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIData.html#getRowIndex%28%29)这个。

```
<h:dataTable binding="#{table}" ...>
    <h:column>
        #{table.rowIndex + 1}
    </h:column>
</h:dataTable> 
```

# xcode - 线程 1 SIGABRT 错误

> ID：11763446
> 
> 赞同：0
> 
> 时间：2012-08-01T16:18:22.293
> 
> 标签：xcode

我刚开始使用 Xcode 编程，当我在没有任何额外代码、方法、属性或类的情况下运行我的应用程序时遇到了我的第一个问题。我从模板 SINGLE VIEW 开始，将 .xib 更改为 MainWindow，并添加了一个基本上称为 App Delegate 的对象。我从 MainWindow.xib 中删除了单个视图对象，并将其替换为 UIWindow。

我收到以下经典的 THREAD 1 SIGABRT 错误：

```
App[4178:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "ViewController" nib but the view outlet was not set.'
*** First throw call stack:
(0x14f8022 0xef8cd6 0x14a0a48 0x14a09b9 0x1222dd 0x122779 0x12299b 0x81401 0x81670 0x81836 0x8872a 0x1ff5 0x59386 0x5a274 0x69183 0x69c38 0x5d634 0x13e2ef5 0x14cc195 0x1430ff2 0x142f8da 0x142ed84 0x142ec9b 0x59c65 0x5b626 0x1d2d 0x1c95 0x1)
terminate called throwing an exception(lldb) 
```

我已经审查了现有的帖子，但我无法更明智地处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-29T04:39:46.357

看起来很混乱，但实际上很简单。Thread1: SIGABRT 故障意味着某些东西正在中断您的连接。

这可能是由于将您的连接声明为弱，并在您的代码中将其声明为强。为了告诉您通过单击有问题的对象来声明您的连接，然后转到连接检查器（带圆圈箭头的符号）。这将使您看到连接。

现在尝试将您的代码声明从强更改为弱（或相反），然后运行您的程序。如果这不起作用，请尝试删除实体的代码，并通过将鼠标悬停在连接检查器中的连接上并单击显示的“X”来删除连接。

删除连接后，代码尝试重新连接实体，代码应自行重新安装。

# python - 如果列表列表中缺少元素，如何报告错误

> ID：11763448
> 
> 赞同：0
> 
> 时间：2012-08-01T16:18:25.087
> 
> 标签：python

认为

```
list1 = [['a', (1, 1)], ['a', (1, 3)], ['a', (1, 4)], ['b', (2,1)], ['b', (2,2)], ['b',(2, 4)]]

list2 = [[(1, 1), (1, 3), (2, 1), (2, 2), (2, 4)]] 
```

现在我该如何报告 list1 缺少 ['b', (1, 2)] 或 ['b', (2, 3)] 的错误

同样对于 list2 应该有报告错误 (1, 2) 或 (2, 3) 丢失

我的意图是报告错误，例如，如果缺少某些东西，例如 (1,1)，然后是 (1,2)，然后是 (1,3)，如果缺少 (1,2)，则错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:43:20.410

```
from collections import defaultdict
set1 = set(list1)
set2 = set(list2)
missing = []
dict1 = defaultdict(lambda: defaultdict(list))
dict2 = defaultdict(list)
for key, sublist in set1:
    dict1[key][sublist[0]].append(sublist[1])
for key, value in set2:
    dict2[key].append(value)
for key, subdict in sorted(dict1.iteritems()):
    for subkey, values in sorted(subdict.iteritems()):
        subkey_misses = []
        last_value = None
        for value in values:
            if last_value is not None and last_value + 1 != value:
                subkey_misses.extend(range(last_value + 1, value))
            last_value = value
        if subkey_misses:
            misses.append('%s.%d missing %s' % (key, subkey, subkey_misses))
for key, values in sorted(dict2.iteritems()):
    key_misses = []
    last_value = None
    for value in values:
        if last_value is not None and last_value + 1 != value:
            key_misses.append(range(last_value + 1), value))
        last_value = value
    if key_misses:
        misses.append('%d missing %s' % (key, key_misses))
print misses 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:04:16.343

您应该使用字典而不是列表。但这是使用您的结构的解决方案。`s1`与上一个答案的想法相似，但*请注意不必要的长列表理解*以获得您拥有的模式`list1`。而且您需要一个特定的 for 循环来检查而不是设置“ `-`”运算符。

```
>>> s1 = [[x, (c, d)] for x in ['a', 'b']
...                   for c in range(1, 3)
...                   for d in range(1, 5)
...                   if x=='a' and c==1 or x=='b' and c==2]
>>> s1
[['a', (1, 1)], ['a', (1, 2)], ['a', (1, 3)], ['a', (1, 4)],
 ['b', (2, 1)], ['b', (2, 2)], ['b', (2, 3)], ['b', (2, 4)]]
>>>
>>> list1 = [['a', (1, 1)], ['a', (1, 3)], ['a', (1, 4)],
...          ['b', (2, 1)], ['b', (2, 2)], ['b', (2, 4)]]
>>> for thing in s1:
...     if thing not in list1:
...         print 'missing: ', thing
...         # or raise an error if you want
...         
missing:  ['a', (1, 2)]
missing:  ['b', (2, 3)] 
```

对 重复相同的操作`list2`。使用上面的示例创建`s2`应该更容易`s1`。

顺便说一句，字典看起来像这样`list1`：

```
dict1 = {'a': [(1, 1), (1, 3), (1, 4)], 'b': [(2, 1), (2, 2), (2, 4)]} 
```

然后创建 s1 稍微简化了一点，但是比较循环可能会加长两行。

* * *

要回答您的问题以**概括**，然后是**1.**先知道字母还是**2.**知道数字/字母数量？

**认识字母：**

```
>>> set_of_letters = ('a', 'b', 'c')
>>> s1 = [[x, (ord(x)-96, d)]
...       for x in set_of_letters
...       for d in range(1, 5)]
>>> s1
[['a', (1, 1)], ['a', (1, 2)], ['a', (1, 3)], ['a', (1, 4)],
 ['b', (2, 1)], ['b', (2, 2)], ['b', (2, 3)], ['b', (2, 4)],
 ['c', (3, 1)], ['c', (3, 2)], ['c', (3, 3)], ['c', (3, 4)]] 
```

**认识数字：**

```
>>> number_of_letters = 3
>>> s1 = [[chr(c+96), (c, d)]
...       for c in range(1, number_of_letters + 1)
...       for d in range(1, 5)]
>>> s1
[['a', (1, 1)], ['a', (1, 2)], ['a', (1, 3)], ['a', (1, 4)],
 ['b', (2, 1)], ['b', (2, 2)], ['b', (2, 3)], ['b', (2, 4)],
 ['c', (3, 1)], ['c', (3, 2)], ['c', (3, 3)], ['c', (3, 4)]] 
```

# android - 如何将项目添加到顶部 ActionBar？

> ID：11763450
> 
> 赞同：7
> 
> 时间：2012-08-01T16:18:40.047
> 
> 标签：android, android-actionbar

我想将新图标添加到顶部操作栏，打赌而不是添加到顶部，图标出现在屏幕底部。如何将项目添加到顶部 ActionBar？

XML:

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">    
    <item android:id="@+id/preferences"
        android:icon="@drawable/preferences"    
        android:title="Preferences"
        android:showAsAction="always|withText"/>

    <item android:id="@+id/help"
        android:title="Help"
        android:icon="@drawable/ic_action_search" />    
</menu> 
```

爪哇：

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_ygo_main, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T16:23:27.080

取自[http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar](http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar)

> 要启用拆分操作栏，只需将 uiOptions="splitActionBarWhenNarrow" 添加到您的或清单元素。

所以如果你想在顶部有一个项目。确保此行不在您的代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:22:50.683

检查您的 AndroidManifest.xml 中的活动定义中是否有 android:uiOptions="splitActionBarWhenNarrow"。这就是使操作栏拆分到底部的原因。

检查 ActionBarSherlock 你在做什么。它将在较旧的 android 版本上提供 ActionBar 功能，并在支持时使用本机 ActionBar。它的示例应用程序展示了其大部分设置[http://actionbarsherlock.com/index.html](http://actionbarsherlock.com/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:32:37.500

如果您不希望栏拆分，请给该图标更多空间，例如删除“withText”或缩短栏上的标题，并在 showAsAction 参数中添加“ifRoom”。

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T16:03:03.763

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="18" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:uiOptions="splitActionBarWhenNarrow"  

     >
    <activity
        android:name="com.example.androidactionbarbottam.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这是mani feast的主线你应该这样做来解决你的问题

android:uiOptions="splitActionBarWhenNarrow"

# android - 广播接收器和内存使用

> ID：11763453
> 
> 赞同：1
> 
> 时间：2012-08-01T16:18:46.473
> 
> 标签：android, memory, broadcastreceiver, android-3.0-honeycomb

我没有时间玩接收器，而且我对 2.3.x 以上的任何东西都不熟悉，所以当我读到这个问题时我完全感到困惑：
[在 AndroidManifest 中注册的 BroadcastReceiver 在应用程序进程被终止时可以接收意图吗？](https://stackoverflow.com/q/11740247/813951)

它的作者能够在任务管理器列表中看到 BroadcastReceiver 应用程序，当应用程序被杀死时，广播接收器不再被调用。这是由于 3.1 中引入的新机制：http:
[//developer.android.com/sdk/android-3.1.html#launchcontrols](http://developer.android.com/sdk/android-3.1.html#launchcontrols)

在该链接中，提到了应用程序的停止状态。文档中的任何地方都没有解释应用程序生命周期，AFAIK，所以我猜一个应用程序可以处于以下三种状态之一：

*   已停止（不在 RAM 中）
*   已启动（在 RAM 中，未运行）
*   运行（在 RAM 中）

为了让用户能够在任务管理器中看到应用程序，它应该处于启动或运行状态（我在这里猜测，因为我不知道是否还有更多状态）。并且似乎该应用程序在列表中显示了很长时间。如果接收器应用程序已启动或运行，它必须有一个带有自己的 Dalvik VM 实例的 linux 托管进程。这与我之前对接收器应该如何工作的信念相冲突：

*   当接收器不运行时，系统不会受到性能损失。
*   一旦需要通知接收器，就会产生一个新的前台进程（如果尚未运行），实例化一个新的接收器，并`onReceive`调用该方法。
*   在 10 秒的最大处理时间后，`onReceive`返回，并且如果没有额外的服务或活动，托管进程很可能被杀死，从而释放资源。

所以，我的问题：

1.  如果应用程序显示在任务管理器中（因此有一个进程），但尚未收到通知，为什么操作系统会为接收者生成一个甚至没有收到通知（并且可能根本没有收到通知）的进程. 如果应用程序已收到通知，但该进程尚未被终止，（因此它在任务管理器中列出），为什么操作系统不会在它完成后立即终止它？在这里，我假设任务管理器仅在分配了进程时才显示应用程序，但这会引发以下问题：
2.  在任务管理器中列出接收器进程的可能性有多大？即使停止，任务管理器也会显示接收方应用程序吗？如果是这样，这是 3.1+ 的新行为，以便用户可以注意到它的存在并强制关闭它？如果不是，则仅当应用程序处于调用中间`onReceive`或返回后并且有资格被杀死时，才应在此处列出该应用程序，根据文档，这应该是一个短时间间隔。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:31:43.800

> 所以我猜一个应用程序可以处于以下三种状态之一：停止（不在 RAM 中）、启动（在 RAM 中，未运行）、正在运行（在 RAM 中）

不完全是，至少我会这样说，尽管这可能是一个术语和/或语言问题。

进程正在运行或未运行。它不能“在 RAM 中”和“未运行”。

*独立于这个概念*，应用程序可以`BroadcastReceivers`禁用或启用其清单注册，从 Android 3.1 开始。文档将禁用状态称为“已停止”，对于 Google 而言，这是一个非常不幸的术语选择，我曾多次抱怨过。当您看到对此状态的引用时，请忽略“停止”一词的任何其他定义。实际上，您可能想为这种状态编造一些其他术语，例如“snicklefritzed”。

您的应用程序在安装后立即被 snicklefritzed。一旦某项明确运行您的组件之一（例如，用户从主屏幕手动启动活动），您的应用程序就会进入“正常”状态。当用户从设置中强制停止您的应用程序时，您的应用程序将被移回 snicklefritzed。有关应用程序是正常还是 snicklefritzed 的信息保存在某些操作系统管理的文件中，并且（AFAIK）缓存在操作系统进程中。

因此，应用程序是：

*   没有运行（没有进程）和 snicklefritzed
*   未运行（无进程）且未 snicklefritzed
*   运行（有一个过程）而不是 snicklefritzed

（不可能正在运行和 snicklefritzed，因为运行某些东西的行为会使您脱离 snicklefritzed 状态，并且强制停止会终止您的进程）

> 当接收器不运行时，系统不会受到性能损失。

正确的。

> 一旦需要通知接收器，就会产生一个新的前台进程（如果尚未运行），实例化一个新的接收器，并调用 onReceive 方法。

正确的。

> 在 10 秒的最大处理时间后，onReceive 返回，并且如果没有额外的服务或活动，托管进程很可能被杀死，从而释放资源。

我将其表述为“托管进程有资格被杀死，并且在优先级队列中将被杀死，因为操作系统需要 RAM 用于其他进程”。

> 为什么操作系统会为甚至没有被通知（并且可能根本没有被通知）的接收者生成一个进程。

它没有。一个 snicklefritzed 应用程序的清单注册`BroadcastReceivers`被忽略。

> 在任务管理器中列出接收器进程的可能性有多大？

进程运行时 100%。进程未运行时为 0%。

> 这是 3.1+ 的新行为，以便用户可以注意到它的存在并强制关闭它？

当你说“这个”和“它”时，我不知道你指的是什么。

> 或者当系统有足够的可用内存时这是正常行为，即使对于 2.x 操作系统也是如此？

当你说“它”时，我仍然不知道你指的是什么。

# javascript - 如何以最佳方式提供和加载 JavaScript 文件？

> ID：11763458
> 
> 赞同：7
> 
> 时间：2012-08-01T16:18:49.220
> 
> 标签：javascript, networking, download, cdn, assetic

我希望在全球范围的 Web 应用程序方面有更多经验的人能够澄清我的一些问题、假设和可能的误解。

让我们假设一个站点（大量客户端/动态组件）在全球拥有数十万用户，并且从一个位置（比方说中欧）提供资源。

1.  如果应用程序依赖于流行的 JavaScript 库，最好从 Google CDN 获取它并将其编译成一个缩小的 JS 文件（以及所有特定于应用程序的 JavaScript）还是从 Google CDN 单独加载它？
2.  Assetic VS [headjs](http://headjs.com/)：加载单个 JS 文件或并行加载所有脚本（按依赖顺序执行）是否更有意义？

**我的假设**（请纠正我）：

将所有特定于应用程序的/本地 JS 代码编译到一个文件中，使用 Google 等流行库的 CDN 等，但通过 headjs 并行加载所有这些似乎是最佳选择，但我不确定。服务器端将第三方 JS 和特定于应用程序的 JS 编译到一个文件中似乎*几乎*违背了使用 CDN 的目的，因为无论如何该库可能都为用户缓存在某个地方。

除了缓存之外，从 Google 的 CDN 下载第三方库可能比托管应用程序的中央服务器更快。

如果一个流行的 JS 库的新版本发布了，性能有了很大的提升，用应用程序进行测试然后实现：

*   如果所有的 JS 都被编译成一个文件，那么即使应用程序代码没有改变，每个用户都必须重新下载这个文件。
*   如果第三方脚本是从 CDN 加载的，那么用户只能从 CDN（或从某处的缓存）下载新版本。

在所描述的情况下，是否有以下任何合理的担忧？

*   一些用户（或浏览器）一次只能与一个主机名建立一定数量的连接，因此从第三方 CDN 检索一些脚本将导致整体加载时间更快。
*   一些用户可能在受限环境中使用应用程序，因此应用程序的域可能会被列入白名单，但 CDN 的域不会。（如果这可能是现实问题，是否有可能尝试从 CDN 加载并在出现故障时从中央服务器加载？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T17:32:09.580

> 将所有应用程序特定/本地 JS 代码编译到一个文件中

由于我们的一些关键目标是[减少 HTTP 请求的数量](http://developer.yahoo.com/performance/rules.html/)并[最小化请求开销](https://developers.google.com/speed/docs/best-practices/request)，因此这是一种非常广泛采用的最佳实践。

我们可能考虑不这样做的主要情况是在缓存频繁失效的可能性很高的情况下，即当我们对代码进行更改时。这里总会有权衡：提供单个文件很可能会增加缓存失效率，而提供许多单独的文件可能会导致缓存为空的用户启动速度变慢。

出于这个原因，偶尔内联特定页面的 JavaScript 并不像某些人所说的那样邪恶。但总的来说，将 JS 连接并压缩到一个文件中是很好的第一步。

> 使用像谷歌这样的 CDN 用于流行的库等。

如果我们谈论的是我们使用的代码相当不可变的库，即不太可能受到缓存失效的影响，我可能更倾向于通过将 HTTP 请求包装到您的整体本地 JS 文件中来保存它们。对于大量基于例如特定 jQuery 版本的大型代码库来说尤其如此。在这种情况下，更改库版本几乎肯定会涉及到对您的客户端应用程序代码的重大更改，从而抵消了将它们分开的优势。

尽管如此，[混合请求域是一个重要的胜利](https://developers.google.com/speed/docs/best-practices/rtt#ParallelizeDownloads)，因为我们不希望受到每个域上限的最大连接数的过度限制。当然，子域也可以为此提供服务，但 Google 的域具有无 cookie 的优势，并且可能已经在客户端的 DNS 缓存中。

> 但是通过headjs并行加载所有这些似乎是最佳的

虽然新兴的 JavaScript“加载器”宿主有很多优势，但我们应该记住，使用它们确实会对页面启动产生负面影响，因为浏览器需要先获取我们的加载器，然后加载器才能请求我们的其余资源。换句话说，对于缓存为空的用户，在开始任何实际加载之前，需要与服务器进行一次完整的往返。再一次，“编译”步骤可以派上用场 - 请参阅[require.js](http://requirejs.org/docs/optimization.html#setup)以获得出色的混合实现。

确保脚本不会阻止 UI 绘制的最佳方法仍然是将它们放在 HTML 的末尾。如果您希望将它们放在其他地方，`async`或`defer`属性现在为您提供了这种灵活性。所有现代浏览器都并行请求资产，因此除非您需要支持特定风格的旧客户端，否则这不应该是主要考虑因素。[Browserscope 网络表](http://www.browserscope.org/?category=network)是这类东西的一个很好的参考。可以预见，IE8 是主要攻击者，在加载脚本之前仍会阻止图像和 iFrame 请求。甚至在[3.6](http://www.browserscope.org/?category=network&ua=Firefox%203%2a&v=3)版本的Firefox 中，除了 iFrame 之外的所有东西都是完全并行的。

> 一些用户可能在受限环境中使用应用程序，因此应用程序的域可能会被列入白名单，但 CDN 的域不会。（如果这可能是现实问题，是否有可能尝试从 CDN 加载并在出现故障时从中央服务器加载？）

确定客户端机器是否可以访问远程主机总是会导致严重的性能损失，因为我们必须等待它无法连接才能加载我们的保留副本。我更倾向于在本地托管这些资产。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T16:56:55.940

1.  由于许多原因，包括更改/依赖项/要求，许多小型 js 文件比少数大型 js 文件要好。
2.  JavaScript/css/html 和任何其他静态内容由任何当前的 Web 服务器（Apache/IIS 和许多其他服务器）非常有效地处理，大多数情况下，一个 Web 服务器能够服务于每秒 100 和 1000 次请求，并且在任何情况下，此静态内容都可能缓存在客户端和您的服务器之间的某处。
3.  为您想在生产环境中使用的代码使用任何外部（不受您控制）存储库是不可以的（对我和许多其他人来说），您不希望整个站点突然发生、灾难性和不可恢复的故障JavaScript 功能只是因为有人在某个地方按下了提交而不考虑或检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:09:52.923

> 将所有特定于应用程序的/本地 JS 代码编译到一个文件中，使用 Google 等流行库的 CDN 等，但通过 headjs 并行加载所有这些似乎是最佳选择......

我会说这基本上是对的。不要将多个外部库合并到一个文件中，因为——正如你所知道的——这将否定大多数情况下用户的浏览器已经缓存了（单个）资源。

对于您自己的特定于应用程序的 JS 代码，您可能需要考虑的一个因素是更新频率。例如，如果有一个功能核心不会经常更改，但一些较小的组件可能会定期更改，那么仅将核心编译（我假设您的意思是缩小/压缩）到一个文件中同时继续提供较小的零件零碎。

您的决定还应考虑您的 JS 资产的大小。如果——这不太可能，但有可能——你提供了*大量*的 JavaScript，将它们全部连接到一个文件中可能会适得其反，因为某些客户端（例如移动设备）对它们将缓存的内容有非常严格的限制。在这种情况下，您最好为少数较小的资产提供服务。

这些只是您要注意的随机花絮。我想说的主要一点是，你的第一直觉（上面引用）可能是正确的方法。

# svn - XCode 4.4 上的 SVN 错误，提交 15k 个文件

> ID：11763459
> 
> 赞同：1
> 
> 时间：2012-08-01T16:19:07.080
> 
> 标签：svn, commit, xcode4.4

因为我已经将 XCode 更新到 4.4，所以我的 svn 存储库的行为似乎很奇怪。当我尝试提交对文件的任何更改时，它说我有 15570 个文件要提交，当然，我不能提交任何项目文件。如果我取消选中所有文件（这些文件范围从我的用户文件夹中的文件夹和文件，到我的项目的实际 svn 文件），然后选择提交其中一个，它会再次选择所有 15k 文件。我也尝试重新安装并尝试使用 XCode 4.5，但它是一样的。

我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:08:17.047

好的，过了一会儿，我意识到管理器的存储库选项卡上有一个额外的存储库。这是我的用户文件夹，因此它对其中的所有内容进行了版本控制。我不知道它是如何创建的，但删除后一切正常。我对那个存储库感到惊讶。我很确定我没有创建它，所以我想知道它是如何创建的...

# java - 使用 SAXParser 仅解析 CDATA

> ID：11763462
> 
> 赞同：0
> 
> 时间：2012-08-01T16:19:11.700
> 
> 标签：java, xml-parsing, sax

快速提问：

如果我有这样的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<cop xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="cop.xsd">
    <auth>
        <uid mioattributo="20">16<![CDATA[
function matchwo(a,b) ]]></uid>
    </auth>
</cop> 
```

所以`uid`有两个孩子吧？之一`Node.CDATA_SECTION_NODE`和之一`Node.TEXT_NODE`。

实现这个快速类（扩展通常的 DefaultHandler）：

```
public class MyHandler extends DefaultHandler {
    /**
     * Logger for this class
     */
    private static final Log log = LogFactory.getLog(MyHandler.class);
    private StringBuilder sb;

    @Override
    public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    System.out.println("STARTUri: " + uri);
    System.out.println("STARTLocalName: " + localName);
    System.out.println("STARTqName: " + qName);
//  for(int i=0;i<attributes.getLength();i++) {
//      System.out.println("LocalName: "+attributes.getLocalName(i));
//      System.out.println("Type: "+attributes.getType(i));
//      System.out.println("qName: "+attributes.getQName(i));
//      System.out.println("URI: "+attributes.getURI(i));
//      System.out.println("Value: "+attributes.getValue(i));
//  }
    sb = new StringBuilder();
    //super.startElement(uri, localName, qName, attributes);
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
    sb.append(ch, start, length);
    System.out.println("TEMPORARY: " + sb.toString());
    System.out.println();
    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
    System.out.println("ENDUri: " + uri);
    System.out.println("ENDLocalName: " + localName);
    System.out.println("ENDqName: " + qName);
    System.out.println("Content: " + sb.toString());
    sb.replace(0, sb.length()-1,"");
    }

} 
```

输出的解析将类似于：

```
Is Validating: true
STARTUri: 
STARTLocalName: cop
STARTqName: cop
TEMPORARY: 

STARTUri: 
STARTLocalName: auth
STARTqName: auth
TEMPORARY: 

STARTUri: 
STARTLocalName: uid
STARTqName: uid
TEMPORARY: 16

TEMPORARY: 16
function matchwo(a,b) 

ENDUri: 
ENDLocalName: uid
ENDqName: uid
Content: 16
function matchwo(a,b) 
TEMPORARY:  

ENDUri: 
ENDLocalName: auth
ENDqName: auth
Content:  

TEMPORARY:  

ENDUri: 
ENDLocalName: cop
ENDqName: cop
Content: 
```

从输出中我们可以看到该方法`characters()`在节点内被调用了两次，`uid`因此它可以识别两个孩子。有没有办法知道哪个是 CDATA 哪个是 TEXT？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:25:07.233

您应该查看告诉您有关 CDATA 开始/结束的[LexicalHandler 。](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/ext/LexicalHandler.html)

请注意，SAX 解析器可以`characters()`根据需要随意多次（或尽可能少地）调用您的方法，以便您构建一个字符串（只有在`endElement()`被调用时才知道它是完整的），而您不能依靠它来确定文档结构。

# android - [SQLite 查询]：使用 0 值构建选项卡

> ID：11763469
> 
> 赞同：0
> 
> 时间：2012-08-01T16:19:51.527
> 
> 标签：android, sql, sqlite

我正在尝试实现一个查询，但我不知道如何构建它。我的标签是这样的：

**日期，类型_水果，价格**

和记录是这样的：

```
date_1, orange, 10$
date_1, orange, 5$
date_2, peach, 3$
date_3, banana, 25$
date_3, apple, 10$ 
```

我的目标是建立一个这样的标签：

```
| ---------------------------------------
|            | orange | banana |  apple |
| date_1     |   15$  |   0$   |    0$  |
| date_3     |    0$  |  25$   |   10$  |
|---------------------------------------- 
```

但是……但是……只取前三名买的水果！因此，从 SQLite DB 中只取橙色（10 美元+5 美元）、香蕉（25 美元）和苹果（10 美元），而不取桃子（仅 3 美元）。有人可以帮我吗？

PS：我希望我清楚地解释了我的问题，对于一些英语错误，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:21:31.290

这是 SQL SERVER 的示例。如果您使用另一个数据库，则可能会收取费用。

```
if  OBJECT_ID('tempdb..#example') IS NOT NULL

drop table  #example

go

create table #example

(

    [date] date,

    type_fruit varchar(100),

    price int

)

insert into #example

select

 getdate() as [date], 'orange' as type_fruit, 10 as price

union select

getdate(), 'orange', 5

union select

getdate()-1, 'peach', 3

union select

getdate()-2, 'banana', 25

union select

getdate()-2, 'apple', 10

SELECT [DATE], ISNULL(orange,0)orange, ISNULL(banana,0)orange,ISNULL(apple,0)orange

FROM (

SELECT [date],  type_fruit, price

FROM #example) up

PIVOT (SUM(PRICE) FOR type_fruit IN ( orange, banana,apple)) AS pvt

WHERE isnull(orange,-1)+isnull(banana,-1)+ISNULL(apple,-1) <> -3

GO 
```

我希望这会帮助你。

# c# - 是否可以使用 UserPrincipal.FindByIdentity 从受信任域中找到用户

> ID：11763474
> 
> 赞同：0
> 
> 时间：2012-08-01T16:20:08.920
> 
> 标签：c#, active-directory, account-management

我们有两个具有单向信任的域。

将外部单向信任配置为域 INT 的域 EXT。所以我想通过使用 EXT 域用户凭据连接到 EXT 域并搜索 INT 域中的用户。

**问题**- 是否可以通过使用默认 API 来实现？：

```
var found = UserPrincipal.FindByIdentity(context, 
    IdentityType.SamAccountName, 'a.someone'); 
```

其中 'a.someone' 是来自 INT 域的用户的 SamAccountName。

其中“上下文”初始化如下：

```
var contextOptions = ContextOptions.Negotiate | 
ContextOptions.Signing | ContextOptions.Sealing;

var context = new PrincipalContext(ContextType.Domain, "EXT.loc", 
null, contextOptions, "EXT\\Administrator", "password"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:24:54.230

这是[关于 AD 搜索的主题](https://stackoverflow.com/questions/7628977/limiting-the-attributes-returned-in-an-ldap-query)。PrincipalContext 还不错，在少数情况下易于使用，但不够完整。

关于身份验证，它取决于执行环境。这里有人问到[这一点](https://stackoverflow.com/questions/11930580/how-to-modify-ad-object-on-parent-domain-controller-from-child-dc/11931237#11931237)。

我希望这有帮助。

# android - 如何启动一个安卓网络服务器服务？

> ID：11763475
> 
> 赞同：3
> 
> 时间：2012-08-01T16:20:09.977
> 
> 标签：android, http, service

我有一个`WebServerService`我想在按下切换按钮时开始。同一个按钮还会启动一个对话框并通知用户。

我从我的主要活动中尝试了以下代码：

```
startService(new Intent(MyActivity.this, WebServerService.class)); 
```

但是应用程序 UI 冻结并且对话框不显示并且应用程序强制关闭。该类的代码`WebServerService`是：

```
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;

public class WebServerService extends Service { 
    private WebServer server = null;

    @Override
    public void onCreate() {
        Log.i("HTTPSERVICE", "Creating and starting httpService");
        super.onCreate();
        server = new WebServer(this);
        server.startServer();   
    }

    @Override
    public void onDestroy() {
        Log.i("HTTPSERVICE", "Destroying httpService");
        server.stopServer();
        super.onDestroy();
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

我一直在努力让它发挥作用。我也看过，`AsyncTask`但我不确定这是否适用于我的情况。任何帮助或正确方向的指针将不胜感激。

WebServer 类如下：

```
package com.xlnc.webapp;  
import java.io.IOException;  
import java.net.ServerSocket;  
import java.net.Socket;  
import java.net.SocketException;  

import org.apache.http.HttpException;
import org.apache.http.impl.DefaultConnectionReuseStrategy;
import org.apache.http.impl.DefaultHttpResponseFactory;
import org.apache.http.impl.DefaultHttpServerConnection;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.BasicHttpProcessor;
import org.apache.http.protocol.HttpRequestHandlerRegistry;
import org.apache.http.protocol.HttpService;
import org.apache.http.protocol.ResponseConnControl;
import org.apache.http.protocol.ResponseContent;
import org.apache.http.protocol.ResponseDate;
import org.apache.http.protocol.ResponseServer;

import android.content.Context;

public class WebServer {

public static boolean RUNNING = false;
public static int serverPort = 8080;

private static final String ALL_PATTERN = "*";
private static final String EXCEL_PATTERN = "/*.xls";
private static final String HOME_PATTERN = "/home.html";

private Context context = null;

private BasicHttpProcessor httpproc = null;
private BasicHttpContext httpContext = null;
private HttpService httpService = null;
private HttpRequestHandlerRegistry registry = null;

public WebServer(Context context) {
    this.setContext(context);

    httpproc = new BasicHttpProcessor();
    httpContext = new BasicHttpContext();

    httpproc.addInterceptor(new ResponseDate());
    httpproc.addInterceptor(new ResponseServer());
    httpproc.addInterceptor(new ResponseContent());
    httpproc.addInterceptor(new ResponseConnControl());

    httpService = new HttpService(httpproc,
        new DefaultConnectionReuseStrategy(), new DefaultHttpResponseFactory());

    registry = new HttpRequestHandlerRegistry();

    registry.register(HOME_PATTERN, new HomeCommandHandler(context));

    httpService.setHandlerResolver(registry);
}

private ServerSocket serverSocket;

public void runServer() {
    try {
        serverSocket = new ServerSocket(serverPort);

        serverSocket.setReuseAddress(true);

        while (RUNNING) {
            try {
                final Socket socket = serverSocket.accept();

                DefaultHttpServerConnection serverConnection = new DefaultHttpServerConnection();

                serverConnection.bind(socket, new BasicHttpParams());

                httpService.handleRequest(serverConnection, httpContext);

                serverConnection.shutdown();
            } catch (IOException e) {
                e.printStackTrace();
            } catch (HttpException e) {
                e.printStackTrace();
            }
        }

        serverSocket.close();
    } catch (SocketException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    RUNNING = false;
}

public synchronized void startServer() {
    RUNNING = true;
    runServer();
}

public synchronized void stopServer() {
    RUNNING = false;
    if (serverSocket != null) {
        try {
            serverSocket.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

public void setContext(Context context) {
    this.context = context;
}

public Context getContext() {
    return context;
}
} 
```

* * *

*编辑*：这里是日志：

```
08-01 22:55:04.406: I/PackageManager(65): /data/app/vmdl40565.tmp changed; unpacking
08-01 22:55:04.550: D/installd(31): DexInv: --- BEGIN '/data/app/vmdl40565.tmp' ---
08-01 22:55:04.637: D/dalvikvm(143): GC freed 2787 objects / 185600 bytes in 239ms
08-01 22:55:05.226: D/dalvikvm(205): DexOpt: load 39ms, verify 132ms, opt 1ms
08-01 22:55:05.236: D/installd(31): DexInv: --- END '/data/app/vmdl40565.tmp' (success) ---
08-01 22:55:05.526: I/installd(31): move /data/dalvik-cache/data@app@vmdl40565.tmp@classes.dex -> /data/dalvik-cache/data@app@com.xlnc.webapp.apk@classes.dex
08-01 22:55:05.526: D/PackageManager(65): New package installed in /data/app/com.xlnc.webapp.apk
08-01 22:55:05.696: D/MountListener(65): handleEvent ums_disabled
08-01 22:55:05.756: D/MountListener(65): handleEvent ums_disconnected
08-01 22:55:05.766: D/AndroidRuntime(162): Shutting down VM
08-01 22:55:05.766: D/dalvikvm(162): DestroyJavaVM waiting for non-daemon threads to exit
08-01 22:55:05.766: D/dalvikvm(162): DestroyJavaVM shutting VM down
08-01 22:55:05.776: D/dalvikvm(162): HeapWorker thread shutting down
08-01 22:55:05.776: D/dalvikvm(162): HeapWorker thread has shut down
08-01 22:55:05.776: D/jdwp(162): JDWP shutting down net...
08-01 22:55:05.776: I/jdwp(162): adbd disconnected
08-01 22:55:05.789: D/dalvikvm(162): VM cleaning up
08-01 22:55:05.826: E/AndroidRuntime(162): ERROR: thread attach failed
08-01 22:55:05.826: D/dalvikvm(162): LinearAlloc 0x0 used 621708 of 5242880 (11%)
08-01 22:55:06.396: D/dalvikvm(65): GC freed 4364 objects / 319160 bytes in 245ms
08-01 22:55:06.596: D/MediaScannerService(179): start scanning volume internal
08-01 22:55:06.716: I/ActivityManager(65): Start proc com.android.mms for broadcast com.android.mms/.transaction.MmsSystemEventReceiver: pid=212 uid=10014 gids={3003, 1015}
08-01 22:55:07.306: D/installd(31): DexInv: --- BEGIN '/system/app/Mms.apk' ---
08-01 22:55:07.476: D/AndroidRuntime(210): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
08-01 22:55:07.496: W/ResourceType(65): Resources don't contain package for resource number 0x7f0700e5
08-01 22:55:07.496: D/AndroidRuntime(210): CheckJNI is ON
08-01 22:55:07.508: W/ResourceType(65): Resources don't contain package for resource number 0x7f020031
08-01 22:55:07.508: W/ResourceType(65): Resources don't contain package for resource number 0x7f020030
08-01 22:55:07.508: W/ResourceType(65): Resources don't contain package for resource number 0x7f050000
08-01 22:55:07.516: W/ResourceType(65): Resources don't contain package for resource number 0x7f060000
08-01 22:55:07.667: W/ResourceType(65): Resources don't contain package for resource number 0x7f060001
08-01 22:55:08.236: D/AndroidRuntime(210): --- registering native functions ---
08-01 22:55:10.246: I/MediaProvider(179): Upgrading media database from version 0 to 78, which will destroy all old data
08-01 22:55:10.656: D/dalvikvm(219): DexOpt: load 677ms, verify 1526ms, opt 36ms
08-01 22:55:10.746: D/installd(31): DexInv: --- END '/system/app/Mms.apk' (success) ---
08-01 22:55:10.757: I/ActivityManager(65): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.xlnc.webapp/.WirelessDropActivity }
08-01 22:55:10.827: D/AndroidRuntime(210): Shutting down VM
08-01 22:55:10.827: D/dalvikvm(210): DestroyJavaVM waiting for non-daemon threads to exit
08-01 22:55:10.836: D/dalvikvm(210): DestroyJavaVM shutting VM down
08-01 22:55:10.836: D/dalvikvm(210): HeapWorker thread shutting down
08-01 22:55:10.836: D/dalvikvm(210): HeapWorker thread has shut down
08-01 22:55:10.836: D/jdwp(210): JDWP shutting down net...
08-01 22:55:10.836: I/jdwp(210): adbd disconnected
08-01 22:55:10.836: D/dalvikvm(210): VM cleaning up
08-01 22:55:10.916: E/AndroidRuntime(210): ERROR: thread attach failed
08-01 22:55:10.927: D/dalvikvm(210): LinearAlloc 0x0 used 637292 of 5242880 (12%)
08-01 22:55:11.076: I/ActivityManager(65): Start proc com.xlnc.webapp for activity com.xlnc.webapp/.WirelessDropActivity: pid=227 uid=10024 gids={3003}
08-01 22:55:11.746: D/(212): unable to unlink '/data/data/com.android.mms/shared_prefs/com.android.mms_preferences.xml.bak': No such file or directory (errno=2)
08-01 22:55:11.746: I/dalvikvm(165): Debugger has detached; object registry had 1 entries
08-01 22:55:11.756: D/(212): unable to unlink '/data/data/com.android.mms/shared_prefs/_has_set_default_values.xml.bak': No such file or directory (errno=2)
08-01 22:55:11.926: I/ARMAssembler(65): generated scanline__00000177:03515104_00000001_00000000 [ 73 ipp] (95 ins) at [0x3e1138:0x3e12b4] in 1170007 ns
08-01 22:55:12.026: I/ARMAssembler(65): generated scanline__00000077:03545404_00000004_00000000 [ 47 ipp] (67 ins) at [0x44e5b8:0x44e6c4] in 585431 ns
08-01 22:55:12.486: D/ddm-heap(212): Got feature list request
08-01 22:55:12.597: D/ddm-heap(227): Got feature list request
08-01 22:55:12.666: D/ddm-heap(165): Got feature list request
08-01 22:55:13.176: D/ddm-heap(179): Got feature list request
08-01 22:55:13.227: I/ActivityManager(65): Displayed activity com.xlnc.webapp/.WirelessDropActivity: 2203 ms (total 2203 ms)
08-01 22:55:13.346: I/ARMAssembler(65): generated scanline__00000077:03545404_00000A04_00000000 [ 29 ipp] (51 ins) at [0x437570:0x43763c] in 411860 ns
08-01 22:55:13.776: D/(165): unable to unlink '/data/data/com.android.alarmclock/shared_prefs/AlarmClock.xml.bak': No such file or directory (errno=2)
08-01 22:55:13.808: W/BackupManagerService(65): dataChanged but no participant pkg='com.android.providers.settings' uid=10017
08-01 22:55:13.877: W/BackupManagerService(65): dataChanged but no participant pkg='com.android.providers.settings' uid=10017
08-01 22:55:13.916: I/ActivityManager(65): Start proc com.android.email for broadcast com.android.email/com.android.exchange.BootReceiver: pid=240 uid=10023 gids={3003, 1015}
08-01 22:55:14.126: D/ddm-heap(240): Got feature list request
08-01 22:55:14.176: D/dalvikvm(29): GC freed 276 objects / 10576 bytes in 266ms
08-01 22:55:14.309: D/installd(31): DexInv: --- BEGIN '/system/app/Email.apk' ---
08-01 22:55:14.346: D/dalvikvm(29): GC freed 45 objects / 2000 bytes in 164ms
08-01 22:55:14.487: D/dalvikvm(29): GC freed 2 objects / 48 bytes in 139ms
08-01 22:55:17.596: D/dalvikvm(246): DexOpt: load 283ms, verify 2203ms, opt 85ms
08-01 22:55:17.665: D/installd(31): DexInv: --- END '/system/app/Email.apk' (success) ---
08-01 22:55:17.806: I/ActivityThread(240): Publishing provider com.android.email.provider: com.android.email.provider.EmailProvider
08-01 22:55:17.866: I/ActivityThread(240): Publishing provider com.android.email.attachmentprovider: com.android.email.provider.AttachmentProvider
08-01 22:55:18.036: D/Exchange(240): BootReceiver onReceive
08-01 22:55:18.086: D/EAS SyncManager(240): !!! EAS SyncManager, onCreate
08-01 22:55:18.456: D/EAS SyncManager(240): !!! EAS SyncManager, onStartCommand
08-01 22:55:18.586: D/EAS SyncManager(240): !!! EAS SyncManager, stopping self
08-01 22:55:19.186: I/ActivityManager(65): Start proc com.svox.pico for broadcast com.svox.pico/.VoiceDataInstallerReceiver: pid=252 uid=10012 gids={}
08-01 22:55:19.386: D/ddm-heap(252): Got feature list request
08-01 22:55:19.416: D/Eas Debug(240): Logging: 
08-01 22:55:19.456: D/installd(31): DexInv: --- BEGIN '/system/app/PicoTts.apk' ---
08-01 22:55:19.736: D/dalvikvm(258): DexOpt: load 40ms, verify 22ms, opt 1ms
08-01 22:55:19.736: D/installd(31): DexInv: --- END '/system/app/PicoTts.apk' (success) ---
08-01 22:55:19.821: D/EAS SyncManager(240): !!! EAS SyncManager, onDestroy
08-01 22:55:19.947: D/MediaScanner(179): opendir /system/media/ failed, errno: 2
08-01 22:55:19.966: D/MediaScanner(179):  prescan time: 12539ms
08-01 22:55:19.980: D/MediaScanner(179):     scan time: 48ms
08-01 22:55:19.980: D/MediaScanner(179): postscan time: 1ms
08-01 22:55:19.980: D/MediaScanner(179):    total time: 12588ms
08-01 22:55:20.124: D/MediaScannerService(179): done scanning volume internal
08-01 22:55:23.136: I/Notification(227): show Notification Entered
08-01 22:55:23.546: I/HTTPSERVICE(227): Creating and starting httpService
08-01 22:55:28.896: W/ResourceType(65): Resources don't contain package for resource number 0x7f0700e5
08-01 22:55:28.896: W/ResourceType(65): Resources don't contain package for resource number 0x7f020031
08-01 22:55:28.896: W/ResourceType(65): Resources don't contain package for resource number 0x7f020030
08-01 22:55:28.896: W/ResourceType(65): Resources don't contain package for resource number 0x7f050000
08-01 22:55:28.987: W/ResourceType(65): Resources don't contain package for resource number 0x7f060000
08-01 22:55:28.987: W/ResourceType(65): Resources don't contain package for resource number 0x7f060001
08-01 22:55:59.739: W/WindowManager(65): Key dispatching timed out sending to Service Started
08-01 22:55:59.739: W/WindowManager(65): Dispatch state: null
08-01 22:55:59.746: W/WindowManager(65): Current state:  {{null to Window{44e51758 Service Started paused=false} @ 1343861759751 lw=Window{44e51758 Service Started paused=false} lb=android.os.BinderProxy@44e515e0 fin=false gfw=true ed=true tts=0 wf=false fp=false mcf=Window{44e51758 Service Started paused=false}}}
08-01 22:55:59.816: I/ActivityManager(65): ANR in process: com.xlnc.webapp (last in com.xlnc.webapp)
08-01 22:55:59.816: I/ActivityManager(65): Annotation: keyDispatchingTimedOut
08-01 22:55:59.816: I/ActivityManager(65): CPU usage:
08-01 22:55:59.816: I/ActivityManager(65): Load: 1.45 / 0.77 / 0.29
08-01 22:55:59.816: I/ActivityManager(65): CPU usage from 30971ms to 54ms ago:
08-01 22:55:59.816: I/ActivityManager(65):   system_server: 4% = 2% user + 1% kernel / faults: 24 minor
08-01 22:55:59.816: I/ActivityManager(65):   com.svox.pico: 1% = 0% user + 0% kernel / faults: 2607 minor
08-01 22:55:59.816: I/ActivityManager(65):   d.process.acore: 0% = 0% user + 0% kernel / faults: 3 minor
08-01 22:55:59.816: I/ActivityManager(65):   m.android.phone: 0% = 0% user + 0% kernel / faults: 1 minor
08-01 22:55:59.816: I/ActivityManager(65):   qemud: 0% = 0% user + 0% kernel
08-01 22:55:59.816: I/ActivityManager(65):   adbd: 0% = 0% user + 0% kernel
08-01 22:55:59.816: I/ActivityManager(65):   com.xlnc.webapp: 0% = 0% user + 0% kernel
08-01 22:55:59.816: I/ActivityManager(65):   pdflush: 0% = 0% user + 0% kernel
08-01 22:55:59.816: I/ActivityManager(65):   logcat: 0% = 0% user + 0% kernel
08-01 22:55:59.816: I/ActivityManager(65): TOTAL: 5% = 3% user + 1% kernel
08-01 22:55:59.816: I/Process(65): Sending signal. PID: 227 SIG: 3
08-01 22:55:59.816: I/dalvikvm(227): threadid=7: reacting to signal 3
08-01 22:55:59.836: I/dalvikvm(227): Wrote stack trace to '/data/anr/traces.txt'
08-01 22:56:00.069: I/Process(65): Sending signal. PID: 65 SIG: 3
08-01 22:56:00.069: I/dalvikvm(65): threadid=7: reacting to signal 3
08-01 22:56:00.146: I/dalvikvm(65): Wrote stack trace to '/data/anr/traces.txt'
08-01 22:56:00.413: I/Process(65): Sending signal. PID: 252 SIG: 3
08-01 22:56:00.413: I/dalvikvm(252): threadid=7: reacting to signal 3
08-01 22:56:00.436: I/dalvikvm(252): Wrote stack trace to '/data/anr/traces.txt'
08-01 22:56:00.655: I/Process(65): Sending signal. PID: 240 SIG: 3
08-01 22:56:00.655: I/dalvikvm(240): threadid=7: reacting to signal 3
08-01 22:56:00.676: I/dalvikvm(240): Wrote stack trace to '/data/anr/traces.txt'
08-01 22:56:00.886: I/Process(65): Sending signal. PID: 165 SIG: 3
08-01 22:56:00.886: I/dalvikvm(165): threadid=7: reacting to signal 3
08-01 22:56:00.906: I/dalvikvm(165): Wrote stack trace to '/data/anr/traces.txt'
08-01 22:56:01.142: I/Process(65): Sending signal. PID: 212 SIG: 3
08-01 22:56:01.142: I/dalvikvm(212): threadid=7: reacting to signal 3
08-01 22:56:01.256: I/dalvikvm(212): Wrote stack trace to '/data/anr/traces.txt'
08-01 22:56:01.397: I/Process(65): Sending signal. PID: 179 SIG: 3
08-01 22:56:01.397: I/dalvikvm(179): threadid=7: reacting to signal 3
08-01 22:56:01.418: I/dalvikvm(179): Wrote stack trace to '/data/anr/traces.txt'
08-01 22:56:01.630: I/Process(65): Sending signal. PID: 118 SIG: 3
08-01 22:56:01.630: I/dalvikvm(118): threadid=7: reacting to signal 3
08-01 22:56:01.716: I/dalvikvm(118): Wrote stack trace to '/data/anr/traces.txt'
08-01 22:56:01.859: I/Process(65): Sending signal. PID: 143 SIG: 3
08-01 22:56:01.859: I/dalvikvm(143): threadid=7: reacting to signal 3
08-01 22:56:01.877: I/dalvikvm(143): Wrote stack trace to '/data/anr/traces.txt'
08-01 22:56:02.135: I/Process(65): Sending signal. PID: 116 SIG: 3
08-01 22:56:02.135: I/dalvikvm(116): threadid=7: reacting to signal 3
08-01 22:56:02.176: I/dalvikvm(116): Wrote stack trace to '/data/anr/traces.txt'
08-01 22:56:02.406: W/WindowManager(65): No window to dispatch pointer action 1
08-01 22:56:02.476: W/WindowManager(65): No window to dispatch pointer action 1
08-01 22:56:02.646: I/ARMAssembler(65): generated scanline__00000077:03515104_00000000_00000000 [ 33 ipp] (47 ins) at [0x480dd8:0x480e94] in 473574 ns
08-01 22:56:02.769: I/ARMAssembler(65): generated scanline__00000177:03515104_00001001_00000000 [ 91 ipp] (114 ins) at [0x480e98:0x481060] in 786862 ns
08-01 22:56:05.066: I/ActivityManager(65): Killing process com.xlnc.webapp (pid=227) at user's request
08-01 22:56:05.086: I/Process(65): Sending signal. PID: 227 SIG: 9
08-01 22:56:05.226: I/ActivityManager(65): Process com.xlnc.webapp (pid 227) has died.
08-01 22:56:05.226: W/ActivityManager(65): Scheduling restart of crashed service com.xlnc.webapp/.WebServerService in 83846ms
08-01 22:56:05.236: I/WindowManager(65): WIN DEATH: Window{44e72108 com.xlnc.webapp/com.xlnc.webapp.WirelessDropActivity paused=false}
08-01 22:56:05.236: I/WindowManager(65): WIN DEATH: Window{44e51758 Service Started paused=false}
08-01 22:56:05.346: E/gralloc(65): [unregister] handle 0x4811e8 still locked (state=40000001)
08-01 22:56:05.367: I/UsageStats(65): Unexpected resume of com.android.launcher while already resumed in com.xlnc.webapp
08-01 22:56:05.637: W/InputManagerService(65): Got RemoteException sending setActive(false) notification to pid 227 uid 10024
08-01 22:56:05.676: E/ActivityThread(65): Failed to find provider info for android.server.checkin
08-01 22:56:05.687: W/Checkin(65): Can't log event SYSTEM_SERVICE_LOOPING: java.lang.IllegalArgumentException: Unknown URL content://android.server.checkin/events 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:12:59.553

Service 中的 onCreate() 是从 GUI 线程调用的。您正试图在 GUI 线程中运行整个 Web 服务器：您不会返回，而是在 WebServer.runServer() 中“永远”结束。对于任何“长时间”运行的任务，您需要将其放入一个新的非 GUI 线程中，以不阻塞 GUI 线程。

Thread 类甚至为您提供了取消线程的函数，这会为 selects() 和其他等待的东西抛出一个容易捕获的 InteruptedException。不需要一些潜在危险的静态“运行”标志。请始终尝试解决任何类型的静态数据。

# jquery - 滑块在 Mac 上不起作用，知道为什么吗？无法重现

> ID：11763476
> 
> 赞同：0
> 
> 时间：2012-08-01T16:20:16.067
> 
> 标签：jquery, macos, slider

就像树对伐木工人说的那样，我很难过。请参阅[http://cookware.lecreuset.com](http://cookware.lecreuset.com)

在我的无线网络之外查看时，滑块在 Mac OSX 上不起作用。我无法重现该问题，因为它在我可以在内部使用的 Mac、iPad 和 iPhone 上运行良好。Browserlab 不会在任何浏览器中显示该功能，因此这无济于事。

如果有人知道为什么这不适用于 Mac，请分享。此外，如果我无法在我可用的机器上重现此类问题，是否有任何关于解决此类问题的提示？也许我可以下载一些有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:26:36.937

您的 js 文件似乎都没有加载。获取`404`以下文件

```
"NetworkError: 404 Not Found - http://lecreuset-stg2.crossview.inc/wcsstore/CVWEB/images/home/hp-slider/jquery.cycle.js"
jquery.cycle.js
"NetworkError: 404 Not Found - http://lecreuset-stg2.crossview.inc/wcsstore/CVWEB/images/home/hp-slider/slideshow.js"
slideshow.js
"NetworkError: 404 Not Found - http://lecreuset-stg2.crossview.inc/wcsstore/CVWEB/images/home/hp-slider/jquery.cycle.js"
jquery.cycle.js
"NetworkError: 404 Not Found - http://lecreuset-stg2.crossview.inc/wcsstore/CVWEB/images/home/hp-slider/slideshow.js" 
```

此外，当我尝试在浏览器窗口中打开上述任何内容时，我得到了

`Your requested host "lecreuset-stg2.crossview.inc" could not be resolved by DNS.`

# linux - SCP 和 UMASK Linux Centos

> ID：11763478
> 
> 赞同：1
> 
> 时间：2012-08-01T16:20:29.640
> 
> 标签：linux, ssh, scp, openssh, umask

我需要控制服务器上文件的传输。有些文件是通过 scp 发送到我的服务器的，我希望这样的文件具有一组特定的权限，比如说 770。我尝试`pam_umask.so`过`/etc/pam.d/login`并设置`umask`，`/etc/profile`但它似乎不起作用。

在 Linux 上，对通过 scp 传输的文件强制使用 umask 的最佳方法是什么？

问候， 安德里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-26T21:53:33.543

AFAIK，`scp`不初始化外壳，因此不要获取任何文件，例如`.profile`, `.bashrc`, `/etc/profile`.

因此，正如 Stefan Ferstl 所评论的那样，这样做的唯一方法似乎是使用 pam 模块`pam_umask.so`。

`/etc/pam.d/sshd`如果您想将此行为限制为 ssh 会话，该文件可能是最好的地方：

```
session optional pam_umask.so umask=0007 
```

# python - Python 中的多种格式选项

> ID：11763480
> 
> 赞同：4
> 
> 时间：2012-08-01T16:20:42.083
> 
> 标签：python

在 Python 中，如何一次执行多种格式：

所以我想让一个数字没有小数位并且有一个千位分隔符：

数量 = 80000.00

我希望它是 80,000

我知道我可以单独做这两件事，但我将如何将它们结合起来：

```
"{:,}".format(num) # this will give me the thousands separator
"{0:.0f}".format(num) # this will give me only two decimal places 
```

那么可以将这些结合在一起吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T16:23:04.583

您可以组合这两个格式字符串。逗号在冒号之后：

```
>>> "{:,.0f}".format(80000.0)
'80,000' 
```

请注意，当仅格式化单个值时，您也可以使用 free`format()`函数而不是方法：`str.format()`

```
>>> format(80000.0, ",.0f")
'80,000' 
```

**编辑**：`,`在 Python 2.7 中引入了包含千位分隔符，因此上述转换在 Python 2.6 中不起作用。在该版本中，您将需要滚动自己的字符串格式。一些临时代码：

```
def format_with_commas(x):
    s = format(x, ".0f")
    j = len(s) % 3
    if j:
         groups = [s[:j]]
    else:
         groups = []
    groups.extend(s[i:i + 3] for i in range(j, len(s), 3))
    return ",".join(groups) 
```

# powershell - 使用 Powershell 的用户登录/注销信息

> ID：11763481
> 
> 赞同：3
> 
> 时间：2012-08-01T16:20:49.790
> 
> 标签：powershell

我希望能够检查远程计算机的用户登录/注销会话和时间，并且我有以下从 stackoverflow 获得的代码，但我无法弄清楚如何告诉脚本检查远程计算机：

```
$UserProperty = @{n="User";e={(New-Object System.Security.Principal.SecurityIdentifier  
$_.ReplacementStrings[1]).Translate([System.Security.Principal.NTAccount])}}
$TypeProperty = @{n="Action";e={if($_.EventID -eq 7001) {"Logon"} else {"Logoff"}}}
$TimeProeprty = @{n="Time";e={$_.TimeGenerated}}

Get-EventLog System -Source Microsoft-Windows-Winlogon | select $UserProperty,$TypeProperty,$TimeProeprty 
```

我确实抛出了一个 $Computername 变量和一个 Foreach 循环语句，如下所示，试图让它在远程计算机上运行，​​但它一直在检查我所在的本地系统，而不是远程系统：

```
$Computername = Read-Host "Enter Computername Here"

Foreach $Computer in $Computername

    {
        $UserProperty = @{n="User";e={(New-Object System.Security.Principal.SecurityIdentifier $_.ReplacementStrings[1]).Translate([System.Security.Principal.NTAccount])}}
        $TypeProperty = @{n="Action";e={if($_.EventID -eq 7001) {"Logon"} else {"Logoff"}}}
        $TimeProeprty = @{n="Time";e={$_.TimeGenerated}}

        Get-EventLog System -Source Microsoft-Windows-Winlogon | select $UserProperty,$TypeProperty,$TimeProeprty
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-23T20:39:32.237

我知道这是一个老问题，但从未接受过任何答案。问题之一是脚本没有显示用户登录的机器。无论如何，我把它修好了（包括错字）。

`Get-LogonHistory.ps1`：

```
param(
    [alias("CN")]
    $ComputerName="localhost"
)

$UserProperty = @{n="User";e={(New-Object System.Security.Principal.SecurityIdentifier $_.ReplacementStrings[1]).Translate([System.Security.Principal.NTAccount])}}
$TypeProperty = @{n="Action";e={if($_.EventID -eq 7001) {"Logon"} else {"Logoff"}}}
$TimeProperty = @{n="Time";e={$_.TimeGenerated}}
$MachineNameProperty = @{n="MachinenName";e={$_.MachineName}}

foreach ($computer in $ComputerName) {
    Get-EventLog System -Source Microsoft-Windows-Winlogon -ComputerName $computer | select $UserProperty,$TypeProperty,$TimeProperty,$MachineNameProperty
} 
```

这样，它将显示用户登录的机器。可以将多台远程计算机传递到命令行，每台计算机之间使用逗号（无空格）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:30:59.660

您需要使用`Get-EventLog`cmdlet 的`ComputerName`参数：

```
Get-EventLog -ComputerName $Computer System -Source Microsoft-Windows-Winlogon `
    | select $UserProperty,$TypeProperty,$TimeProeprty 
```

`$TimeProeprty`此外，您的变量中似乎有错字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-01T09:12:44.467

有点修改和它的工作

```
# Specify the location you want the report to be saved
$filelocation = "C:\report.csv"

[void][System.Reflection.Assembly]::LoadWithPartialName('Microsoft.VisualBasic') 
[string]$Computer = [Microsoft.VisualBasic.Interaction]::InputBox("Enter     ComputerName", "Computer Name", "Computer Name")
[int]$DayPrompt = [Microsoft.VisualBasic.Interaction]::InputBox("Enter Number of Days to     check", "Days to Check", "15")
$Days = $DayPrompt
cls

$Result = @()
Write-Host "Gathering Event Logs, this can take awhile..."
$ELogs = Get-EventLog System -Source Microsoft-Windows-WinLogon -After (Get-Date).AddDays(-    $Days) -ComputerName $Computer
If ($ELogs)
{ Write-Host "Processing..."
ForEach ($Log in $ELogs)
{ If ($Log.InstanceId -eq 7001)
{ $ET = "Logon"
}
ElseIf ($Log.InstanceId -eq 7002)
{ $ET = "Logoff"
}
Else
{ Continue
}
$Result += New-Object PSObject -Property @{
Time = $Log.TimeWritten
'Event Type' = $ET
User = (New-Object System.Security.Principal.SecurityIdentifier $Log.ReplacementStrings[1]).Translate([System.Security.Principal.NTAccount])
}
}
$Result | Select Time,"Event Type",User | Sort Time -Descending | Export-CSV $filelocation
Write-Host "Done look at $filelocation"
}
Else
{ Write-Host "Problem with $Computer."
Write-Host "If you see a 'Network Path not found' error, try starting the Remote Registry service on that computer."
Write-Host "Or there are no logon/logoff events (XP requires auditing be turned on)"
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T16:30:36.007

您没有将计算机名称传递给循环中的任何命令。因此，它只是针对 $computerName 中的许多对象循环执行相同的命令尝试将最后一行更改为：

```
 Get-EventLog System -Source Microsoft-Windows-Winlogon -ComputerName $computer | select $UserProperty,$TypeProperty,$TimeProperty 
```

如果这不起作用，请确保您的 foreach 循环正在传递正确的数据：

```
$computerName | Foreach-Object{Write-Host $_} 
```

这应该显示您尝试在其上运行的每台机器的计算机名称。

但看起来你正试图在一台计算机上运行它，所以删除 Foreach 循环并`-ComputerName $computername`在你的 select 语句之前添加到 Get-Eventlog 命令的末尾

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-27T20:29:10.213

基于[https://gallery.technet.microsoft.com/Log-Parser-to-Identify-8aac36bd](https://gallery.technet.microsoft.com/Log-Parser-to-Identify-8aac36bd)

```
Get-Eventlog -LogName Security | where {$_.EventId -eq "4624"} | select-object @{Name="User"
;Expression={$_.ReplacementStrings[5]}} | sort-object User -unique 
```

您可以从 ReplacementStrings 获取其他信息。您还可以在 Get-Eventlog 命令中指定远程计算机。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-11-17T20:07:35.183

```
# Specify the location you want the report to be saved
$filelocation = "C:\Path\report.csv"

[void][System.Reflection.Assembly]::LoadWithPartialName('Microsoft.VisualBasic') 
[string]$Computer = [Microsoft.VisualBasic.Interaction]::InputBox("Enter     ComputerName", "Computer Name", "Computer Name")
[int]$DayPrompt = [Microsoft.VisualBasic.Interaction]::InputBox("Enter Number of Days to     check", "Days to Check", "15")
$Days = $DayPrompt
cls

$Result = @()
Write-Host "Gathering Event Logs, this can take awhile..."
$ELogs = Get-EventLog System -Source Microsoft-Windows-WinLogon -After (Get-Date).AddDays(-    $Days) -ComputerName $Computer
If ($ELogs)
{ Write-Host "Processing..."
ForEach ($Log in $ELogs)
{ If ($Log.InstanceId -eq 7001)
{ $ET = "Logon"
}
ElseIf ($Log.InstanceId -eq 7002)
{ $ET = "Logoff"
}
Else
{ Continue
}
$Result += New-Object PSObject -Property @{
Time = $Log.TimeWritten
'Event Type' = $ET
User = (New-Object System.Security.Principal.SecurityIdentifier $Log.ReplacementStrings[1]).Translate([System.Security.Principal.NTAccount])
}
}
$Result | Select Time,"Event Type",User | Sort Time -Descending | Export-CSV $filelocation -  TypeInformation
Write-Host "Done."
}
Else
{ Write-Host "Problem with $Computer."
Write-Host "If you see a 'Network Path not found' error, try starting the Remote Registry service on that computer."
Write-Host "Or there are no logon/logoff events (XP requires auditing be turned on)"
} 
```

# ios - NSJSONSerialization 无法处理空值

> ID：11763483
> 
> 赞同：2
> 
> 时间：2012-08-01T16:21:00.060
> 
> 标签：ios, ios5

我有一些看起来像这样的代码：

```
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data
                                                     options:kNilOptions
                                                       error:&error];

NSArray *arrRequests = [NSJSONSerialization JSONObjectWithData:data
                                                       options:NSJSONReadingMutableContainers
                                                         error:nil];

// Loop through the array and generate the necessary annotation views
for (int i = 0; i<= arrRequests.count - 1; i++)
{
    //now let's dig out each and every json object
    NSDictionary *dict = [arrRequests objectAtIndex:i];

    NSString *is_private = [NSString
                            stringWithString:[dict objectForKey:@"is_private"]];
                            ... 
```

它在 is_private 的值为 1 或 0 时起作用，但如果它为 null，则会在此行出现异常并崩溃：

```
NSString *is_private = [NSString stringWithString:[dict objectForKey:@"is_private"]]; 
```

有没有办法检查它是否不为空或处理它以便能够将 nil 放入 NSString *is_private 变量中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:24:47.903

您应该能够像这样处理它：

```
id value = [dict valueForKey:@"is_private"];
NSString *is_private = [value isEqual:[NSNull null]] ? nil : value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:24:19.677

你为什么不只是检查是否`[dict objectForKey:@"is_private"]`是`nil`或`[NSNull null]`在传递给它之前`stringWithString:`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T16:24:28.307

您的问题与`NSJSONSerialization`您将`nil`值传递给`stringWithString:`. 为什么不只是简单地那行来`NSString *is_private = [dict objectForKey:@"is_private"];`？

另外，为什么要使用 an`NSString`来存储布尔值？安`NSNumber`会更适合。

# ruby-on-rails - Rails：在嵌套模型表单中，子属性不会反映在表单上

> ID：11763489
> 
> 赞同：0
> 
> 时间：2012-08-01T16:21:11.043
> 
> 标签：ruby-on-rails, ruby

我正在关注嵌套模型 Railscast 的修订版：[http ://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

我有一个类似的表格，railscast使用模型调查，问题，答案；但我有成员、孩子和看护人。

我的代码几乎与 railscast 完全相同。我正在使用 Rails 3.1.3 和 Ruby 1.9.2。

我的问题是，子属性没有反映在表单上。据此： http: [//archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes](http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes)没有必要在控制器上做任何事情......

> 该解决方案的美妙之处在于，它将您的控制器从组合中剔除，并使提交标准完美地工作，而不会在控制器级别受到干扰。

如果我不这样做`@member.children << Child.new`，表单的嵌套子项部分就不会出现。

```
def new
  @member = Member.new
  @member.children << Child.new

  respond_to do |format|
    format.html
  end
end 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:32:57.143

你仍然需要模型的子记录才能让表单看到它我会稍微改变你的控制器以使用构建而不是添加到数组

```
def new
  @member = Memeber.new
  @member.children.build
end 
```

# c# - 使用 MarshalAs 时接口方法的语法是什么

> ID：11763492
> 
> 赞同：0
> 
> 时间：2012-08-01T16:21:44.303
> 
> 标签：c#, asp-classic, marshalling

我正在尝试创建一个包含方法的 COM 对象。该方法返回一个必须编组的数组，因为 Classic ASP 正在使用它。

我发现了有关堆栈溢出的问题，这些问题向我展示了如何针对属性而不是针对方法执行此操作。

这是我尝试过的：

```
public interface IMine
{
  [DispId(1)]
  object stringSize(string txt, string fontName, float fontSize)
  {
    [return: MarshalAs(UnmanagedType.Struct, SafeArraySubType = VarEnum.VT_ARRAY)]
  }
} 
```

这显然是错误的，因为我收到了错误：

```
The name 'MarshalAs' does not exist in the current context 
```

这对我来说毫无意义。

实际的方法是：

```
 public object stringSize(string txt, string fontName, float fontSize)
    {
        System.Drawing.SizeF result = _textSize(txt, fontName, fontSize);
        return new object[] { result.Width, result.Height };
    } 
```

有人请纠正我的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:18:54.837

您必须将属性目标定义**放在**方法声明之上：

```
public interface IMine 
{ 
  [DispId(1)]
  [return: MarshalAs(UnmanagedType.Struct, SafeArraySubType = VarEnum.VT_ARRAY)]  
  object stringSize(string txt, string fontName, float fontSize) 
  { 
    // stuff...
  } 
} 
```

# php - 将 http:// 组件插入 POST 变量

> ID：11763493
> 
> 赞同：0
> 
> 时间：2012-08-01T16:21:45.927
> 
> 标签：php

如何将 'http://' 组件添加到 post 变量中，以便它自动添加该部分，因此如果有人提交： 'www.google.com' 将注册为[http://www.google.com](http://www.google.com)。这是我到目前为止的代码：

```
$domain = '<a target="_blank" href="' .$_POST['domain'] . '">' . $_POST['domain'] .'</a>'; 
```

那么我在哪里插入'http://'？我尝试了一些变化但没有成功，也许有人可以启发我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:25:58.590

```
function startsWith($haystack, $needle) {
  $length = strlen($needle);
  return (substr($haystack, 0, $length) === $needle);
}

$address = startsWith($_POST['domain'], 'http://') ? $_POST['domain'] : 'http://' . $_POST['domain'];

$domain = '<a target="_blank" href="' . $address . '">' . $_POST['domain'] .'</a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:23:40.217

也许我不明白你的问题，但这是你想做的吗？

```
$domain = '<a target="_blank" href="http://' .$_POST['domain'] . '">' . $_POST['domain'] .'</a>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:24:22.143

```
href = "http://'.$_POST['domain'].'"; 
```

# ios - 如何在 Safari 和 Native App 之间共享上下文？

> ID：11763494
> 
> 赞同：9
> 
> 时间：2012-08-01T16:21:50.717
> 
> 标签：ios, html, native

我需要**通过 Safari**（上下文令牌）设置一些上下文，然后**从本机 iOS 应用程序中读取该上下文**。这样做的最佳做法是什么？

到目前为止的一些想法：

1.  在 HTML 5 数据库中设置上下文，但我不确定这是否可行，因为该数据库可能只能从 Safari 访问。**在本机应用程序中使用 WebUIView 是否允许我访问与 Safari 相同的 HTML5 数据库/本地存储**？
2.  在设备存储中设置上下文，但我不确定这是否可行，因为我不知道 Safari 是否真的可以写入设备存储。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:47:11.550

我会建议以下两个选项之一：

*   让网络服务器在应用程序和网站上跟踪用户，例如通过创建用户帐户。

或者

*   通过将您的应用程序注册为协议处理程序，立即通过 URL 方案将上下文令牌传递给应用程序，请[在此处查看更多信息](http://mobileorchard.com/apple-approved-iphone-inter-process-communication/)

    建议方式：

    1.  发送带有链接和上下文令牌的电子邮件，当用户单击链接时，将上下文令牌保存在 safari 的 cookie 中，然后重定向到应用商店进行应用下载。
    2.  当用户下载应用程序并打开它时，为用户显示一个按钮，当用户单击它时，在 safari 中打开一个网页。
    3.  Safari 使用上下文令牌加载 cookie，然后使用诸如 yourAppName://contextToken=12345678 之类的 URL 方案触发另一个链接。该链接将打开您的应用程序，该应用程序从 URL 读取上下文令牌。

没有直接在 safari 和本机应用程序之间直接共享数据的最佳实践，而且您根本不应该这样做。每个应用程序的所有 cookie 和存储都被沙盒化，并且 safari 有自己的沙盒。

让您的服务器通过用户帐户完成工作是 imo 最好和最干净的方式这就是您拥有用户帐户的原因。如果您没有尝试使用协议处理程序来读取特定的 URL，我认为这也可以很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:46:32.960

您能否让应用程序在首次启动时点击一个由服务器托管的 URL，该 URL 在 safari 中重定向用户，并比较 IP 地址、时间、iOS 版本等以获得至少近似匹配？如果近似匹配不足，您可以在看到近似匹配时让您的应用打开 safari 以通过 cookie 确认其身份。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T00:33:54.153

[使用WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge)在 UIWebView 和您的本机之间发送消息很容易。

但是，在您的情况下，接受的答案建议使用自定义 URL 方案（直接从电子邮件到应用程序，安装后）是最有意义的。

# jquery - Yii ajaxLink 从下拉列表传递参数并使用 POST 方法提交

> ID：11763495
> 
> 赞同：0
> 
> 时间：2012-08-01T16:21:51.683
> 
> 标签：jquery, yii

我想从下拉列表中检索选定的值，并通过 POST 方法使用 Yii 的 ajaxLink 函数传递它。

我可以检索`beforeSend`零件中的值，例如，

```
array( // ajaxOptions
    'type' => 'POST',
    'beforeSend' => "function() {                                  
         start_time = jQuery('#start_time').find(':selected').val();
         end_time = jQuery('#end_time').find(':selected').val();

         this.data += '&start_time='+start_time;
         this.data += '&end_time='+end_time;
    }",
    ....... 
```

我可以格式化字符串，传递它并在控制器中解析它，但我正在使用 CSRF 保护，如果我将参数作为单个字符串传递，我会收到“无法验证 CSRF 令牌”错误。

期待您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:31:44.380

将所有内容放入表单并提交（通过 AJAX 请求） - 然后表单将照常发布，您不必修改任何值。或者，您可以通过 htmlOptions 将 AJAX 直接附加到下拉列表，例如：

```
<form>
<?php
    echo CHtml::listBox('field', '', $fieldData,
        array('ajax' => array(
            'type' => 'POST',
            'url' => Controller :: createUrl($controllerAction),
            'dataType'=>'json',
            'success'=>'function(data) { console.log(data) }'
            ),
        )
    );  
?> 
```

这样，详细信息将通过表单 POST 提交；提交值后，您可以在 PHP 中进行所需的任何修改。

如果您需要提交类型的项目，我会使用 ajaxSubmitButton() 而不是 ajaxLink()，然后您将获得所有表单数据。

# python - 带参数的 Python 装饰器中的最大代码重用

> ID：11763503
> 
> 赞同：3
> 
> 时间：2012-08-01T16:22:27.987
> 
> 标签：python, decorator

我设法编写了一个带有参数的装饰器，但我对两个实际的装饰器具有相同的代码行这一事实感到困扰：

```
def wrapper(*args, **kwargs):
    r = fn(*args) 
```

并且想知道是否有某种方法可以解决这种违反 DRY 的问题

```
def fix(double):
    def outer(fn):
        if double:
            def wrapper(*args, **kwargs):
                r = fn(*args)
                return 2 * r
            return wrapper
        else:
            def wrapper(*args, **kwargs):
                r = fn(*args)
                return r
            return wrapper
    return outer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:07:59.903

另一种可能是

```
def fix(double):
    def outer(fn):
        def wrapper(*args, **kwargs):
            r = fn(*args, **kwargs) # do that right!
            return 2 * r if double else r
        return wrapper
    return outer 
```

甚至 - 因为如果`double`是- 你不会改变任何东西`False`- ：

```
def fix(double):
    def outer(fn):
        if not double: return fn
        def wrapper(*args, **kwargs):
            r = fn(*args, **kwargs) # do that right!
            return 2 * r
        return wrapper
    return outer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:28:09.197

如果 double 为 False，您可以乘以 1：

```
def fix(double):
    def outer(fn):
        factor = 2 if double else 1
        def wrapper(*args, **kwargs):
            r = fn(*args)
            return factor * r
        return wrapper
    return outer 
```

# javascript - Javascript + HTML 中的现成日期选择器？（需要：DD、MM、YY 的单独字段加上日历选择器）

> ID：11763504
> 
> 赞同：0
> 
> 时间：2012-08-01T16:22:30.637
> 
> 标签：javascript, html, calendar

我需要这样一个表单元素：日、月和年的 3 个单独的下拉菜单，以及显示日历选择器的“日历”按钮。下拉列表应该表现得聪明并且知道彼此的状态（例如，2 月 31 日应该是不可能的，闰年应该被正确处理）。日历选择器应该显示一个小日历，用户可以在其中选择一个日期，然后将选择传递给下拉菜单。

如果您指出我现有的解决方案，我将不胜感激。

我不打算使用 ExtJS 或类似的高端框架，更多的是在 JQuery 级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:26:06.613

在 datepicker 上搜索 jquery 演示。您会发现很多日期选择器以及源代码。您可以在其中进行选择。我主要使用 jquery UI datepicker。

# ios - 有像 WPF Grid 这样的 UIView 吗？

> ID：11763508
> 
> 赞同：3
> 
> 时间：2012-08-01T16:22:47.780
> 
> 标签：ios, layout, xamarin.ios

在 iOS 中是否有一个 UIView 可以在一列（或行）中布置两个子视图，以便一个视图具有固定的高度（或宽度），而另一个视图扩展以填充空白空间？

例如， WPF 具有[System.Windows.Controls.Grid](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx)类。我会用它来解决这个问题，如下所示：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="123" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Label Grid.Row="0" Content="I have a fixed height" />
    <Label Grid.Row="1" Content="My height expands to fill the empty space" />
</Grid> 
```

# android - Android - 正确打开默认音乐库

> ID：11763511
> 
> 赞同：0
> 
> 时间：2012-08-01T16:22:51.760
> 
> 标签：android

在我的 Android 应用程序中，我有一个按钮可以打开设备的音乐库。我现在正在使用以下代码

```
Intent intent = new Intent("android.intent.action.MUSIC_PLAYER");
startActivity(intent); 
```

我了解可能存在没有默认音乐库的设备。所以，我想要代码片段，如果可能的话，它将打开音乐库并显示一些消息（或其他东西），否则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:35:42.980

将其包围在 try/catch 块中。如果`ActivityNotFoundException`抛出 an ，则设备上没有能够接收该意图的组件：

```
 try {
     Intent intent = new Intent("android.intent.action.MUSIC_PLAYER");
     startActivity(intent);
 catch (ActivityNotFoundException anfe) {
     // Handle no component found here (e.g. show a toast or dialog)
 } 
```

# html - 设置为内联的标题元素在容器 div 之外展开

> ID：11763512
> 
> 赞同：1
> 
> 时间：2012-08-01T16:23:02.020
> 
> 标签：html, css, css-float

*在 www.cssgrid.net 上基于 CSS 网格系统编写简单的 php/html/css 站点*

我已将标题设置`display: inline`为能够在与我的部分标题**相同的行上打印“返回顶部”链接。**像这样：

```
<h2 id="section1">Section 1</h2>
<a href="#top" class="scroll small">Back to top</a> 
```

这呈现如下*（Stackoverflow 不支持这一点，所以想象粗体文本是标题）*

> **第 1 节** *回到顶部*

这**一切都很好**而且花花公子，正如我想要的那样，问题出现在我使用标题的**其他地方**，例如在以下上下文中。*（请注意，这不是天气或不使用 CSS 网格模板的问题，而是关于标题的问题。所以请不要对一般结构发表任何评论）*。

```
<div class="container" id="main">
    <div class="row">
        <div class="eightcol" id="first-div">
            <h1>This is a header</h1>
            <p>This is a p-tag</p>
        </div>
        <div class="fourcol last" id="second-div">
            <div id="twitter">
                <p>Twitter here</p>
            </div>
        </div>
    </div>
</div> 
```

这不*正确*，至少不是按照**我想要**的。这呈现为以下模型显示：

```
main
--------------------------
| first-div | second-div |
| This is a header       |
| This is a | Twitter    |
| p-tag     | here       |
-------------------------- 
```

也许不是最具艺术性的 ascii 渲染，但关键是**标题扩展**到浮动在它旁边的 div 区域。

我应该怎么做才能使它包含在其**包含的 div 中**？

**编辑：** *我用代码创建了一个小提琴，但那里没有发生错误。不知道发生了什么。[http://jsfiddle.net/nefGZ/](http://jsfiddle.net/nefGZ/)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:15:45.893

我相信我找到了问题所在。

如果您检查 Chrome 上的标头（编辑为 HTML），您将获得以下信息：

```
<h1>HEJ&nbsp;och&nbsp;välkommen&nbsp;till&nbsp;Basårsmottagningens&nbsp;hemsida!</h1> 
```

都是那些`&nbsp;`阻止自动换行的人。

*由问题作者编辑：始终检查您复制粘贴的文本，尤其是从 PDF 或 Word 粘贴时。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:41:24.083

放一个

> 显示：内联块

H1上的风格，我想你会没事的

# struts2 - 如何在 Struts2 中垂直对齐单选按钮

> ID：11763514
> 
> 赞同：0
> 
> 时间：2012-08-01T16:23:05.303
> 
> 标签：struts2

> **可能重复：**
> [如何使 Struts 单选标记创建单选按钮的垂直列表](https://stackoverflow.com/questions/5809211/how-to-make-struts-radio-tag-create-a-vertical-list-of-radio-buttons)

如何在 Struts2 中垂直对齐单选按钮，因为生成的单选按钮默认是水平对齐的。我在一个列表上迭代它。

```
<s:radio theme="simple" list="masterList" name="selectedDatabase" onclick="gotoAction(this)"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:08:11.253

```
<s:iterator value="masterList"> 
  <s:radio theme="simple" name="selectedDatabase" list="#{id:name}"/><br>
</s:iterator> 
```

where`id`将是列表的属性，您要提交，并且`name`将是单选按钮的标签。

# apache-flex - Flex 移动应用程序中的标签文本 Autosize(fontSize)

> ID：11763515
> 
> 赞同：0
> 
> 时间：2012-08-01T16:23:22.033
> 
> 标签：apache-flex, flex4

有没有办法在 Flex 移动应用程序的标签组件中自动调整文本的 fontSize？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:18:22.507

文本会根据设备的分辨率自动缩放。

参见例如在此处[输入链接描述](http://help.adobe.com/en_US/flex/mobileapps/WS19f279b149e7481c682e5a9412cf5976c17-8000.html "Adobe Flex 帮助")：“文本文本（不是文本本身）的字体大小被缩放以匹配分辨率。”

# php - php 保留一个数组复选框

> ID：11763516
> 
> 赞同：3
> 
> 时间：2012-08-01T16:23:23.630
> 
> 标签：php, arrays

我是一个完整的菜鸟，但我到处搜索，找不到解决方案。

我拥有的是从我的数据库中提取的一系列课程（例如：数学、艺术、科学）。这些可以改变，所以我必须一直添加新课程。

当用户勾选 3 门课程中的 2 门（例如）但未能添加他的用户名时，在验证后我希望这 2 个复选框保持原来的勾选，因此他必须只重新填写他的用户名才能继续。

我得到的是所有勾选的复选框：{

我很混乱。

```
<?PHP
$check="unchecked";
?>

<?PHP
if ($_SERVER['REQUEST_METHOD'] == 'POST'){
    foreach ($_POST['cid'] as $cid ) {
        $check="checked";
    }
}
?>

<?PHP 
$course_data = "SELECT * FROM course ORDER BY cname";
$get_course = mysql_query($course_data) or die (mysql_error());

while ($db_field = mysql_fetch_assoc($get_course)){
    $cname= $db_field['cname'] ;//course name
    $cid= $db_field['cid'] ;// course id

    print"<BR>". 
    "<FONT COLOR='blue' SIZE='4'><B>$cname</B></FONT>".
    "<input type='checkbox'  name='cid[]' value='$cid' $check>"; // here are the courses(checkboxes)
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:34:11.533

这是你想要的吗？

```
<?PHP
if ($_SERVER['REQUEST_METHOD'] == 'POST'){

    $cid_array = $_POST['cid'];

/*foreach ($_POST['cid'] as $cid ) {
$check="checked";
}*/
}
?>

<?PHP 
$course_data = "SELECT * FROM course ORDER BY cname";
$get_course = mysql_query($course_data) or die (mysql_error());

while ($db_field = mysql_fetch_assoc($get_course)){
    $cname= $db_field['cname'] ;//course name
    $cid= $db_field['cid'] ;// course id
    if(is_array($cid_array))
{
    if(in_array($cid, $cid_array))
    {
        $check="checked='checked'";
    }
    else
    {
        $check="";
    }
}
else//it is not array because nothing was checked
{
    if($cid == $cid_array)
    {
        $check="checked='checked'";
    }
    else
    {
        $check="";
    }
}

print"<BR>". 
"<FONT COLOR='blue' SIZE='4'><B>$cname</B></FONT>".
"<input type='checkbox'  name='cid[]' value='$cid' $check>"; // here are the courses(checkboxes)
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:27:33.580

您必须`$checked`为每个复选框独立设置变量。

```
$checkedBoxes = array();
foreach($cid as $id) {
    $checkedBoxes[$id] = "checked='false'";
}

foreach ($_POST['cid'] as $cid) {
    $checkedBoxes[$cid] = "checked='true'";
} 
```

然后在输出复选框的循环中，打印相应的 $checked 值。

```
while ($db_field = mysql_fetch_assoc($get_course)){
    $cname= $db_field['cname'] ;//course name
    $cid= $db_field['cid'] ;// course id

    print"<BR>". 
    "<FONT COLOR='blue' SIZE='4'><B>$cname</B></FONT>".
    "<input type='checkbox'  name='cid[]' value='$cid' {$checkedBoxes[$cid]}>"; // here are the courses(checkboxes)
} 
```

# android - AndEngine 示例不起作用

> ID：11763518
> 
> 赞同：2
> 
> 时间：2012-08-01T16:23:36.183
> 
> 标签：android, andengine

一天前，我按照视频教程在我的 Eclipse 上配置了 AndEngine 示例。它运行良好。但是第二天，当我尝试运行该示例时，它说您的项目包含错误。我检查了项目的属性和其他东西，但没有发现任何错误。我无法弄清楚是什么导致了项目的构建。任何人都可以在这方面帮助我吗？

我看不到任何错误。我只是在示例项目上展示了一个十字架。我删除了所有扩展和示例并重新下载，但错误仍然存​​在。这是eclipse的截图。 ![在此处输入图像描述](../Images/c8fee852750d1c5b44251c03b8dd9094.png)

有时，当我删除其他项目时，它会给出以下错误消息：

```
An internal error occurred during Re-indexing repository AndEngine Empty path not permitted. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:30:01.470

啊，我摆脱了问题。实际上我的调试证书已过期。这就是为什么它没有建立这个项目。我从 .android 文件夹中删除了 Debug.keystore 文件以重新生成密钥库。

# sorting - setOutputKeyComparator - Mapreduce 二次排序（ValueGrouping 之后）

> ID：11763523
> 
> 赞同：0
> 
> 时间：2012-08-01T16:24:04.797
> 
> 标签：sorting, hadoop, mapreduce, key, grouping

我只是在 AskUbuntu 数据集上尝试使用 Mapreduce 程序。

我的映射器输出是

**句法**

```
Key: TAG-<TAG_NAME>-<PARAM>  Value: <PARAM>-<Count> 
```

**例子：**

```
Key - TAG-windows-QUE Value - QUE-1241
Key - TAG-windows-VIEWS Value - VIEWS-4369
Key - TAG-windows-QUE Value - QUE-1
Key - TAG-windows-VIEWS Value - VIEWS-1 
```

我使用**Partitioner**根据 key 的前三个字符对其进行分区。IE。标签

我也使用**ValueGroupingComparator**对一组值进行分组，即。标签窗口

```
public static class ValueGroupingComparator implements RawComparator<Text> {

        /*value grouping comparator will group by the first few letters of the key till a second hyphen (“-”) symbol  is found. */
        public int compare(byte[] b1, int s1, int l1, byte[] b2, int s2, int l2) {
            String sOne = new String(b1);
            String sTwo = new String(b2);

            // return new Character((char)b1[0]).compareTo((char)b2[0]);
            return sOne.substring(0, sOne.indexOf('-', 4)).compareTo(
                    sTwo.substring(0, sTwo.indexOf('-', 4)));
        }

        public int compare(Text o1, Text o2) {
            return compare(o1.getBytes(), 0, o1.getLength(), o2.getBytes(), 0,
                    o2.getLength());
        }
    } 
```

*

> 然后我需要使用 KeyComparator 根据 in 键对键进行排序。

*

该 api 传达了 setOutputKeyComparator 可以结合使用来模拟对值进行二次排序的消息。 [http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/JobConf.html](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/JobConf.html)

**我对Reducer**的预期输入

 **```
Key - TAG-windows-QUE 
Value - 1241-QUE,1-QUE,4369-VIEWS,1-VIEWS 
```

这样我就可以从我的 Reducer 输出以下内容

```
Key - TAG-windows Value - QUE-1242, VIEWS-4370 
```

我尝试了以下**KeyComparator**。但我无法达到我的预期输出

```
public static class KeyComparator extends WritableComparator {
    public KeyComparator() {
        super(Text.class);
    }

    public int compare(byte[] b1, int s1, int l1, byte[] b2, int s2, int l2) {

        int hypen = '-';
        int s1Ind = 0;
        int s2Ind = 0;
        for (int i = 4; i < b1.length; i++) {
            if (b1[i] == hypen) {
                s1Ind = i;
                break;
            }
        }

        for (int i = 4; i < b2.length; i++) {
            if (b2[i] == hypen) {
                s2Ind = i;
                break;
            }
        }

        if (s1Ind == 0 || s2Ind == 0)
            System.out.println(s1Ind + "<->" + s2Ind);

        int compare = compareBytes(b1, s1, s1Ind, b2, s2, s2Ind);
        if (compare == 0) {
            return compareBytes(b1, s1Ind + 1, l1 - s1Ind + 2, b2,
                    s2Ind + 1, l2 - s2Ind + 2);             
        }
        return compare;
    }
} 
```

*在这里需要 hadoop mapreduce 专家的帮助。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:21:44.013

我在 stackoverflow 中找到了与我的问题相关的以下两个链接。

[Map-Reduce 中的二次排序](https://stackoverflow.com/questions/11188971/secondary-sorting-in-map-reduce)

[MapReduce（二级）排序/过滤 - 如何？](https://stackoverflow.com/questions/5505735/mapreduce-secondary-sorting-filtering-how)

让我试试运气。**

# javascript - 使用 javascript 附加到 DOM

> ID：11763524
> 
> 赞同：-1
> 
> 时间：2012-08-01T16:24:06.953
> 
> 标签：javascript, jquery-mobile

我正在尝试将此附加到我的 jQuery Mobile Listview。附加工作正常，但是当用户单击列表视图时，触发 goToSurveyResults，它认为此函数中的第三个参数是对变量名称的引用，而实际上我只是想要字符串文字名称。例如，如果我的函数是 goToResults(1,2,dog)，那么它认为 dog 是对变量的引用。有没有办法让javascript承认它实际上不是变量名而是字符串？

```
$('ul#myList').append('<li><a href="javascript:void(goToResults(' + listOfSubjects[i].id + ',' + listOfSubjects[i].numberOfSubjects + ',' + listOfSubjects[i].name + '));"><h1>title<h1></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:37:59.983

尝试在您的字符串值参数周围添加转义引号，例如：

```
$('ul#myList').append('<li><a href="javascript:void(goToResults(' + listOfSubjects[i].id + ',' + listOfSubjects[i].numberOfSubjects + ',\'' + listOfSubjects[i].name + '\'));"><h1>title<h1></li>'); 
```

代码工作示例：http: [//jsfiddle.net/nqnpv/1/](http://jsfiddle.net/nqnpv/1/)

# c# - 如何最小化启动 Outlook？

> ID：11763528
> 
> 赞同：1
> 
> 时间：2012-08-01T16:24:18.710
> 
> 标签：c#, process, outlook, minimize

我认为开始一个最小化的过程应该很简单，但我对前景没有运气。如何以最小化的方式启动 Outlook？

我的尝试是这样的：

```
[DllImport("user32.dll")]
private static extern bool ShowWindowAsync(IntPtr hWnd, int nCmdShow);

static void Main(string[] args)
{
    ProcessStartInfo startInfo = new ProcessStartInfo();
    startInfo.FileName = "OUTLOOK.EXE";

    IntPtr hWnd = Process.Start(startInfo).Handle;

    bool state = false;
    if (!hWnd.Equals(IntPtr.Zero))
        state = ShowWindowAsync(hWnd, 2);

    // window values: http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx

    Console.WriteLine(state.ToString());
    Console.Read();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:28:04.470

您是否尝试过使用[`ProcessStartInfo.WindowStyle`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.windowstyle.aspx)，将其设置为[`ProcessWindowStyle.Minimized`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processwindowstyle.aspx)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:37:24.543

我发现如果您等到 Outlook 启动并且您发送窗口下方的命令将最小化到托盘。现在，为了最大限度地减少前景，唯一要做的就是循环直到它准备好:-)

```
var hWnd = Process.Start(startInfo);
ShowWindowAsync(hWnd.MainWindowHandle, 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T21:02:18.090

我已经解决了，但如果您认为可以改进解决方案，我想听听您的意见。我还在我的博客上发布了解决方案，并在[http://jwillmer.de/blog/2012/08/01/how-to-start-outlook-minimized-with-c/上提供了更多详细信息](http://jwillmer.de/blog/2012/08/01/how-to-start-outlook-minimized-with-c/)

```
[DllImport("user32.dll")]
private static extern bool ShowWindowAsync(IntPtr hWnd, int nCmdShow);

// console application entry point
static void Main()
{
    // check if process already runs, otherwise start it
    if(Process.GetProcessesByName("OUTLOOK").Count().Equals(0))
        Process.Start("OUTLOOK");

    // get running process
    var process = Process.GetProcessesByName("OUTLOOK").First();

    // as long as the process is active
    while (!process.HasExited)
    {
        // title equals string.Empty as long as outlook is minimized
        // title starts with "öffnen" (engl: opening) as long as the programm is loading
        string title = Process.GetProcessById(process.Id).MainWindowTitle;

        // "posteingang" is german for inbox
        if (title.ToLower().StartsWith("posteingang"))
        {
            // minimize outlook and end the loop
            ShowWindowAsync(Process.GetProcessById(process.Id).MainWindowHandle, 2);
            break;
        }

        //wait awhile
        Thread.Sleep(100);

        // place for another exit condition for example: loop running > 1min
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-12T11:44:33.517

你可以使用this.Application.ActiveExplorer().WindowState = Outlook.OlWindowState.olMinimized;

它最小化您当前的 Outlook 窗口（this = ThisAddIn 类）

# button - outlook add-in 2010 我怎么知道用户按下了回复按钮？

> ID：11763529
> 
> 赞同：1
> 
> 时间：2012-08-01T16:24:20.103
> 
> 标签：button, outlook, reply

我正在 c#/.net 中开发 Outlook 2010 加载项。假设我有一些项目需要从收件箱导出到特定位置。但是在用户回复此邮件项目的同时（之前导出的 - 我在导出时更改了 MessageClass），当用户发送回复时我也需要导出回复。我捕获了新的检查器事件并将发送事件设置为我的项目，但我不知道如何确定用户按下回复而不是转发例如？！我在检查器中找不到任何可以确定已按下回复按钮的属性。

你有什么想法？！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:13:58.650

有几种方法可以实现这一目标。假设您已经检查了它是新消息还是已发送消息（*通过[`MailItem.Sent`](http://msdn.microsoft.com/en-us/library/office/ff868242)*），您只需检查是否指定了任何收件人（*通过[`MailItem.To`](http://msdn.microsoft.com/en-us/library/office/ff860378.aspx)或[`MailItem.Recipients`](http://msdn.microsoft.com/en-us/library/office/ff865320)*）即可知道该消息是**转发**还是**回复**。

```
bool isReply = !string.IsNullOrEmpty(MailItem.To) || MailItem.Recipients.Count > 0 ; 
```

# android - 在 Android 中以编程方式将 EditText 添加到 LinearLayout

> ID：11763531
> 
> 赞同：2
> 
> 时间：2012-08-01T16:24:24.587
> 
> 标签：android, android-edittext, android-linearlayout, layoutparams

我不能让我并排`EditTexts`适应共享相同的空间。`LinearLayout`

这是执行此操作的代码：

```
LinearLayout.LayoutParams lparams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        textFieldsLayout = (LinearLayout) findViewById(R.id.LinearLayout2);

        for(int i=1; i <= 8; i++){

            final EditText ed = new EditText(this);

            ed.setText("" + i);

            ed.setInputType(2);

            ed.setLayoutParams(lparams);

            textFieldsLayout.addView(ed);
        }   
    } 
```

这段代码设法添加`EditText`到我的布局中，但它们并排出现，并且末尾有空白空间`LinearLayout`，当我将参数更改为 时`WRAP_CONTENT`，仅首先`EditText`添加到布局中填充布局，而其他代码不会出现在那里，知道什么我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:30:07.727

将 layout_weight 添加到布局参数

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams
                       (LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT, 1f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:26:48.433

要使您的视图拉伸以填充 LinearLayout，您必须确保将宽度设置为 0 并将权重设置为 1。

这将使他们平分秋色。它基本上是在告诉系统推迟设置宽度，直到测量其父级。然后上来，让孩子们填满他们拥有的任何空间。

# performance - Dojo 浏览器性能，在加载模块文件方面

> ID：11763539
> 
> 赞同：1
> 
> 时间：2012-08-01T16:24:48.423
> 
> 标签：performance, dojo

Dojo 的按需加载结构实际上是一种性能改进吗？至少对我来说？

我公司的网站将切换到主要使用 Dojo 的 IBM Websphere。我的公司非常关心页面性能，主要是在“页面加载秒数”方面。因此，我们得到的指令是“尽量减少对服务器的点击”，所以在我们当前的网站上，我们在推广到生产之前汇总了所有的 .js 文件。

但该指令现在基本上正在成为法律，所以如果我要反对它，我需要一个很好的理由。除了“这是个好主意”和“仅在需要时加载”（后者实际上仅基于前者，至于我可以告诉）。

然后，如果我将所有内容都压缩到一个文件中，我将根本无法使用 dojo.require() 语句，不是吗？（想法是，如果我可以将开发方面按模块拆分以使组织更加合理，然后将生产版本放在一个文件中，但是 dojo.require() 在那里不再有意义，然后我就有了一个越来越复杂的情况，我需要构建对 javascript 做一些侵入性的事情来打包生产。）

请抵制“这取决于”的答案。我见过的最佳实践文档（雅虎、谷歌等）几乎只是说“减少页面加载”，并没有太多“它取决于”。但是 Dojo 的框架对于它的方法似乎如此明确，我想知道是否有更有说服力的论据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:31:17.057

Dojo 实际上结合了这两种方法。在开发模式下，您有许多文件使用`define`（`dojo.require`已过时）动态加载其他模块。这对于抽象和开发非常有用。

然后是“生产模式”，您可以使用 dojo 构建系统将所有这些小文件编译成一个或多个（也称为层）缩小的 Javascript 文件。这减少了对服务器的命中，同时仍保持所有模块化。使用分层方法，以后需要的应用程序数据将自动从单独的文件中加载。

见： [http ://dojotoolkit.org/blog/learn-more-about-amd](http://dojotoolkit.org/blog/learn-more-about-amd)

[http://dojotoolkit.org/reference-guide/1.7/build/](http://dojotoolkit.org/reference-guide/1.7/build/)

# asp.net - 图片按钮不会在页面加载时隐藏

> ID：11763541
> 
> 赞同：0
> 
> 时间：2012-08-01T16:24:58.310
> 
> 标签：asp.net, imagebutton, directcast

我使用下面的代码在页面加载时隐藏模板字段 Imagebutton 但它不起作用，在此先感谢：

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
            Dim ImageButton1 As ImageButton = DirectCast(GridView1.FindControl("ImageButton1"), ImageButton)
            If User.Identity.Name.Substring(InStr(User.Identity.Name, "\")).ToUpper = "User1" Then
                ImageButton1.Visible = False
            End If
        End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:29:16.247

假设你有`binding grid before and it has rows`. *在某行网格中查找 ImageButton 而不是在 gridview 中查找*。您所拥有的`if`条件似乎永远不会成立，因为您正在将 ToUpper 之后的字符串与不是大写的字符串进行比较，`Change User1 to USER1`因为您正在使用 ToUpper。

**改变**

```
 Dim ImageButton1 As ImageButton = DirectCast(GridView1.FindControl("ImageButton1"), ImageButton) 
 If User.Identity.Name.Substring(InStr(User.Identity.Name, "\")).ToUpper = "User1" Then
            ImageButton1.Visible = False
 End If 
```

**到**

```
 Dim ImageButton1 As ImageButton = DirectCast(GridView1.Rows(0).FindControl("ImageButton1"), ImageButton)
 If User.Identity.Name.Substring(InStr(User.Identity.Name, "\")).ToUpper = "USER1" Then
       ImageButton1.Visible = False
 End If 
```

**循环迭代整个网格**

```
For Each row As GridViewRow In GridView1.Rows
 Dim ImageButton1 As ImageButton = DirectCast(row.FindControl("ImageButton1"), ImageButton)
     If User.Identity.Name.Substring(InStr(User.Identity.Name, "\")).ToUpper = "USER1" Then
           ImageButton1.Visible = False
     End If
Next 
```

# javascript - jQuery 脚本未在初始页面加载时执行

> ID：11763548
> 
> 赞同：0
> 
> 时间：2012-08-01T16:25:17.903
> 
> 标签：javascript, jquery, html, css

我创建了一个自定义 jQuery 插件，它为我的网站做了一些简单的图像调整。这是网站：[http ://www.daemondeveloper.com/photography/gallery.php](http://www.daemondeveloper.com/photography/gallery.php)

如您所见，出于调试目的，我将纵向图像的不透明度设置为 0.5，将横向图像的不透明度设置为 1。我使用此自定义插件将图像分类为纵向或横向：

```
(function($) {

$.fn.superFit = function(options) {

    var $this = $(this);
    var parent = $this.parent();
    var parentW = parent.width();
    var parentH = parent.height();
    var imgW = $this.width();
    var imgH = $this.height();

    var imgRatio = imgH / imgW;
    var parentRatio = parentH / parentW;

        if(imgRatio < parentRatio) //We have a landscape image
        {
            //First set the height of image to be 100%;
            $this.css('height', '100%');
            imgW = $this.width();
            parentW = parent.width();

            //Now center the image
            $this.css('margin-left', -(imgW/2)+(parentW/2));

        }else{ //We have a portrait image
            $this.css('width', '100%');
            $this.css('opacity', '0.5');
        }

}
    })(jQuery); 
```

我希望肖像图像填充其父级的宽度但溢出父级的底部。这似乎工作正常。但是，jQuery 将应具有风景分类的全景图像（有 2 个）视为肖像。也就是说，直到您刷新页面。如果您单击“图库”菜单项或单击“刷新”，插件会突然工作，您可以看到横向图像变为不透明度 1 并按应有的方式填充父项。

**那么是什么导致jQuery仅在再次刷新页面后才触发？**我猜它一定与图片的加载方式有关。

最后，这是运行插件功能的代码：

```
$('#gallery ul li').each(function() {
var $frame = $(this).children('div');

    var fw = $frame.width();
    var fh = $frame.height();
    $frame.children('img').superFit(); 

}); 
```

这是在 document.ready 上运行的

**更新：**实际上使用刷新或 F5 并不能解决问题。出于某种原因，只有当您单击图库菜单项或将焦点放在地址栏上并按 Enter 时，它才会起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:32:15.017

> 我猜它一定与图片的加载方式有关。

是的，您将无法在加载之前获取图像的尺寸。刷新时，图像将在 DOMready 之前从缓存中加载。

相反，挂钩[`.load()`事件](http://api.jquery.com/load-event/)。

# ajax - 在 Eclipse 中制作的 Android PhoneGap 应用程序不会运行 jQuery ajax 调用

> ID：11763549
> 
> 赞同：0
> 
> 时间：2012-08-01T16:25:21.947
> 
> 标签：ajax, eclipse, cordova

我在 Eclipse 中有一个准系统 index.html，Android Phonegap 项目，它不会执行 jQuery Mobile ajax 调用。LogCat 显示以下消息并且应用程序崩溃 CordovaWebView: TIMEOUT ERROR! CordovaWebViewClient.onReceivedError: 错误代码=-6 描述=与服务器的连接不成功。

有趣的事实： 1.) 如果我注释掉 ajax 调用，Eclipse 可以正常安装和运行应用程序。2.) 我在 .apk 中使用与通过 PhoneGap Build 处理 html-css-javascript 应用程序获得的相同的 ajax 模式，它工作正常。

详细信息：在 Eclipse Juno 中，我有一个带有 index.html 文件的 Android PhoneGap 项目（它使用 ADT 和 cordova-1.9.0.jar），该文件按以下顺序包含以下 .js 文件：

```
<script type="text/javascript" src="Scripts/cordova-1.9.0.js"></script>
<script type="text/javascript" src="Scripts/jquery-1.6.2.min.js"></script>
<script src="Scripts/temp.js" type="text/javascript"></script> 
```

temp.js 文件中有这个

```
$(document).ready(function(){
var theUrl = 'http://www.myDomain.biz/WebServices/gg.svc/';
console.log("theUrl + GetHelpFile = " + theUrl + "GetHelpFile");
$('div#divTarget').html("theUrl + GetHelpFile = " + theUrl + "GetHelpFile");

$.ajax({
type: "GET",
cache: false,
dataType: 'jsonp',
url: theUrl + "GetHelpFile",
contentType: "text/plain",
success: function (theJson) {
var help_file = $(theJson);
$('div#divHelpFile').html(help_file);
},
error: function ($theData) {
var tt = $theData;
alert(tt);
}
});
}); 
```

该项目有

*   cordova-1.9.0.jar 在其构建路径中
*   一个 AndroidManifest.xml 文件，其中包含我的 .java 文件android:name=".java_activity" 和
    android:name="org.apache.cordova.DroidGap"的 <application><activity>

和所有 <uses-permissions>

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" /> 
```

我在 Eclipse 中使用的运行配置以 4.0 AVD 为目标，一切正常。当我注释掉 ajax 调用时，Eclipse 会创建 .apk 文件，打开 AVD，安装应用程序，它运行良好。另外，我在 IIS 中为同一个目录中的同一个 index.html 文件创建了一个网站，并且页面在浏览器中加载并且 ajax 运行良好。

我增加了超时时间，但这并没有帮助

```
super.setIntegerProperty("loadUrlTimeoutValue", 60000); 
```

你认为我需要做什么才能在我的 Eclipse-Android-PhoneGap 项目中执行 ajax 调用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:32:59.647

You should use different type of ajax call:

```
$.get('http://yourdomain.com/index.php', function (data) {
alert(data);
}); 
```

[phonegap android ajax call doesnt work](https://stackoverflow.com/questions/11986082/phonegap-android-ajax-call-doesnt-work#comment15983889_11986082) here is my solution.

# mercurial - Hg sub repos 依赖项

> ID：11763552
> 
> 赞同：0
> 
> 时间：2012-08-01T16:25:33.690
> 
> 标签：mercurial, dvcs

我目前正在从 CVSNT 迁移到 Mercurial，但遇到了我过去使用 CVS 模块能够实现的问题。我有两个项目 A 和 B，它们都依赖于目录 C 中的公共代码。如果我对目录 C 中的代码进行更改，我希望这些更改同时反映在项目 A 和 B 中。（这似乎是[这里](https://stackoverflow.com/questions/5621670/hg-sub-repository-dependencies)的问题完全相反）

我认为这可以使用 subrepos 来实现，但是项目 A 和 B 中的 .hgsubstate 会记录我列出的提交的子 repo 中的变更集。即我在项目 A 上提交了 C 的更改，我必须手动打开 B 来更新和提交。（实际上，还有更多的项目只有 A 和 B，是的，我知道公共代码应该在共享库中，但 PHB 坚持！）

有没有办法做到这一点？理想情况下，我希望它对用户来说是透明的 repos 的结构，即他们可以提交对 C 的更改，而不必意识到它是他们项目的子 repo。（目前 tortoise Hg 使用“S”表示子存储库是脏的）。我想我需要的是爸爸回购和部分退房，但肯定有更好的方法吗？我在 Windows 上，所以符号链接不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:43:30.043

您必须手动更新（并提交）子存储库的事实是非常有意的。在 CVS 和 SVN 中发现的这个错误特性被故意忽略了。

如果它会自动将子存储库更新为最新提交，则无法保证代码将继续工作。例如，如果您要更改 C 的 API，则 A 和 B 在您相应地更改它们之前都不会起作用。而且由于您永远不能同时以原子方式推送多个存储库，因此不可避免地会出现一个窗口，在此期间 A 和 B 不起作用。在实践中，这个窗口可能会变得相当大，尤其是当其中一个依赖项目受到较少的开发关注时。如果项目 B 被搁置一段时间，项目 A 对 C 的更改将立即破坏它。

更糟糕的是，更新到早期版本将无法将子存储库恢复到当时的状态。因此，一旦您对子存储库进行向后不兼容的更改，旧版本将不再工作！这大大降低了版本控制的有用性。它会导致分支问题，例如二等分将无法工作。

这就是为什么您需要手动更新到最新版本的 C，测试一切是否仍然有效，并签入该子存储库更新的原因。从而将存储库版本紧密锁定到子存储库版本。你牺牲了一点便利，但你获得了代码稳定性，我希望我能够弄清楚为什么这会更好:)。

至于从父存储库中透明地提交到子存储库，据我所知，它计划这样做，但到目前为止还没有人真正实现它。

# c++ - C++ 重载 = 运算符

> ID：11763554
> 
> 赞同：0
> 
> 时间：2012-08-01T16:25:42.923
> 
> 标签：c++, oop, visual-c++

重载 = 运算符时，应该使一个对象的内容等于另一个对象的内容，还是使对象的指针指向同一个对象？

回顾这个问题，似乎应该复制内容而不是指针。但我就是想不通，所以如果有人能解释我应该做什么，我将不胜感激，我知道如何同时做，我只是不确定选择哪一个。

```
class IntObject
{
private:
    int *pi_One;

public:

    IntObject(void);

    IntObject::IntObject(int const &i_one);

    ~IntObject(void);

    IntObject & operator=(const IntObject&);

};

IntObject::IntObject()
{
    pi_One = new int(0); 
}

IntObject::IntObject(int const &i_one)
{
    pi_One = new int(i_one); 
}

IntObject::~IntObject(void)
{
    delete pi_One;
}

IntObject & IntObject::operator=(const IntObject& c) {
//This copies the pointer to the ints
    this->pi_One = c.pi_One;

    return *this;  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:32:05.260

这取决于您希望在类型中具有什么语义。如果您想要值语义，则复制内容（深拷贝，如 中的情况`std::vector`），如果您想要引用语义（浅拷贝，如中`std::shared_ptr`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:45:52.680

您绝对应该复制内容，而不是指针。想想当持有相同指针的对象之一被销毁时你会做什么；你不能删除指针，因为另一个对象也会受到影响，但你也不能不删除它，因为你会导致内存泄漏。您必须使用引用计数，一切都会变得更加复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:29:22.263

内容应该被复制（事实上，改变对象的指针实际上是不可能的——我无法想象你会怎么做——即使是这样，你也不应该这样做）。您还必须注意深拷贝和浅拷贝之间的差异，特别是如果您的类包含指针（或其中包含指针的容器）。

现在我想起来了，我什至不确定您可能想要重新分配*哪个指针。*除非您已经在使用指针 - 那些已经有一个不应该重载的 '=' 运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:29:32.633

最小惊讶原则会说复制内容。在任何其他对象上使用`operator=`时，您不会期望它复制指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T16:45:56.993

如果你保持你的析构函数不变，那么你应该改变赋值重载。没有人试图将 IntObject 分配给自己也是明智的：

```
IntObject & IntObject::operator=(const IntObject& c) {
    if (this != &c)
    {
        //This copies the pointer to the ints
        *this->pi_One = *c.pi_One;
    }
    return *this;  
} 
```

否则，将尝试在 IntObject 的析构函数中释放已释放的内存

# magento - 将费用从一种运输方式转移到另一种运输方式

> ID：11763560
> 
> 赞同：0
> 
> 时间：2012-08-01T16:25:53.010
> 
> 标签：magento, magento-1.4

我有一个棘手的运输问题，我正在努力解决。我有一个自定义扩展，可以计算所有国内运输的表费率。但是对于国际产品，一种产品（A 类）是 35 美元/产品的固定运费，其余产品（B 类和 C 类）由 UPS 和 USPS 计算。如果客户购买这两种类型的产品，我能够弄清楚如何正确计算运费的唯一方法是为 A 类创建一个表格费率，然后将其作为手续费传递给 UPS/USPS。有没有我可以用于这个过程的变量/方法？我还没有找到一个。

根据要求，这是我的功能：

```
public function collectRates(Mage_Shipping_Model_Rate_Request $request)
{

    // Cut out code where it adds up the categories and the number of items in each category

    $rates = $this->getRates($request, $_categories);
    if (!empty($rates))
    {   
        $rateTypes = array();
        foreach($rates as $rate)
        {
            $rateTypes[] = $rate['method_name'];
        }
        $rateTypes = array_unique($rateTypes);

        $i=0;
        // Create array to pass along to UPS/USPS, if needed
        $tempCategories = $_categories;

        foreach($rateTypes as $rateType)
        {   
            $groupPrice = 0;

            foreach($_categories as $category=>$catQty)
            {
                $rateExists = false;
                $standardRate = 0;
                foreach($rates as $rate)
                {   
                    $rateCats = explode(',',$rate['category_list']);
                    if(in_array($category,$rateCats) && $rate['method_name'] == $rateType )
                    {   
                        $rateExists = true;
                        if($rate['condition_type'] == 'I'){
                            $ratePrice = $rate['price']  * $catQty;

                        }
                        else if ($rate['condition_type'] == 'O') {
                            $ratePrice = $rate['price'];
                        }
                        unset($tempCategories[$category]);

                    }
                    else if(in_array($category,$rateCats) && $rate['method_name'] == "Standard" && $rateType != "Standard")
                    {
                        if($rate['condition_type'] == 'I'){
                            $standardRate += $rate['price']  * $catQty;

                        }
                        else if ($rate['condition_type'] == 'O') {
                            $standardRate += $rate['price'];
                        }
                        unset($tempCategories[$category]);
                    }

                }

                if($rateExists == false)
                {
                    $groupPrice += $standardRate;                   
                }
                else
                    $groupPrice += $ratePrice;

            }
            if(count($tempCategories) > 0)
            {
                // Figure out how to pass the $groupPrice to other shipping methods here
            }
            else {

                $method = Mage::getModel('shipping/rate_result_method');
                $method->setCarrier('shippingcodes');
                $method->setCarrierTitle($this->getConfigData('title'));
                $method->setMethod('shippingcodes_'.$rateType);
                $method->setMethodTitle($rateType);
                $method->setPrice($groupPrice);
                $result->append($method);
            }
        }

    }
    else
        return false;
    return $result;
} 
```

# perl - Perl STDOUT 重定向在子进程中不起作用

> ID：11763562
> 
> 赞同：1
> 
> 时间：2012-08-01T16:25:56.377
> 
> 标签：perl

在运行以下 Perl 程序时，子脚本的输出将打印到终端而不是进入`$v`. 请让我知道如何解决它。

```
open (OUTPUT, '>', \$v);
select OUTPUT;
$| = 1;

open (SUB, "| sh print_user_input.sh");
print SUB "Hello World\n";
close(SUB);

close(OUTPUT);
select STDOUT;

print "Output: $v\n"; 
```

程序的输出是：

你好世界输出：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T16:50:13.993

1.  `select`不会改变标准输出。
2.  `open '>', \$buf`不创建系统文件句柄。（谁会从中读取数据并将数据放入`$buf`？另一个进程不能直接写入`$buf`，即使是`perl`一个进程。）

一种解决方案：

```
use IPC::Run3 qw( run3 );
run3 [ 'sh', 'print_user_input.sh' ],
   \"Hello World\n",
   \my $v; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T16:51:03.307

你有2个问题。 [select](http://perldoc.perl.org/functions/select.html)不会改变 STDOUT，它只是改变了 Perl 关于它应该打印到哪个文件句柄的想法。像您尝试使用的内存中文件句柄只能在单个 Perl 进程中工作；您不能在子进程中使用它们。

您想查看[IPC::Open3](http://search.cpan.org/perldoc?IPC%3a%3aOpen3)或类似模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T17:02:52.880

使用[`IPC::Open2`](https://metacpan.org/module/IPC%3a%3aOpen2)的`open2`功能：

```
#!/usr/bin/env perl

use strict;
use warnings;

use IPC::Open2;

my $pid = open2( \*CHLD_OUT, \*CHLD_IN, 'sh print_user_input.sh' );
print CHLD_OUT "Hello World\n";
close CHLD_OUT;

my $output = do { local $/; <CHLD_OUT> };
print "Output: $output"; 
```

# java - 为什么调用 ThreadPoolExecutor.run()？

> ID：11763564
> 
> 赞同：4
> 
> 时间：2012-08-01T16:26:03.410
> 
> 标签：java, eclipse, debugging

> **可能重复：**
> [Eclipse 调试器总是阻塞在 ThreadPoolExecutor 上，没有任何明显的异常，为什么？](https://stackoverflow.com/questions/6290470/eclipse-debugger-always-blocks-on-threadpoolexecutor-without-any-obvious-excepti)

Eclipse 在 finally 块中的以下行中不断暂停 run() 方法中的执行：workDone(this);

我没有在这里设置任何断点，我的应用程序似乎按预期工作。

关于为什么会发生这种情况的任何指示？

```
 java.util.concurrent.ThreadPoolExecutor

   public void run() {
        try {
            Runnable task = firstTask;
            firstTask = null;
            while (task != null || (task = getTask()) != null) {
                runTask(task);
                task = null;
            }
        } finally {
            workerDone(this);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:31:42.260

您的方法调用很可能`workerDone`会引发异常，该异常未处理并在`run`方法之外冒泡。线程因此突然结束，但 Eclipse 允许您在异常逃逸方法之前检查这种情况。那是一个自动的“异常断点”。

# java - 在 Java 中调用 SQL Server 用户定义函数 (UDF)

> ID：11763569
> 
> 赞同：0
> 
> 时间：2012-08-01T16:26:16.963
> 
> 标签：java, sql-server-2008, user-defined-functions

和执行存储过程一样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:35:17.237

不可以，必须使用其模式名称引用 SQL 函数，并且必须是 SELECT 语句的适当部分的一部分。对于标量值函数，这类似于`SELECT dbo.MyLookupFunction(12)`. 对于表值函数，`SELECT columnA, columnB, columnC FROM dbo.MyTableLookupFunction(12)`. 有关 SQL 中的函数的详细信息，请参阅[CREATE FUNCTION (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms186755%28v=sql.105%29.aspx)和[执行用户定义的函数（数据库引擎） 。](http://msdn.microsoft.com/en-us/library/ms175562%28v=sql.105%29.aspx)

当然，java 代码与任何其他查询相同。

# php - PHP5 OOP：访问更改的父属性

> ID：11763570
> 
> 赞同：3
> 
> 时间：2012-08-01T16:26:19.593
> 
> 标签：php, oop, inheritance, extending

这是我的第一个问题，也让我很困惑。我不确定这是否是简单的事情，我忽略了它还是不可能的事情。

下面是我原始代码的一个非常简化的版本。最终目标是输出如下：

```
1: 
2: this is a test
3: this is another test
4: this is another test 
```

然而，在当前状态下的代码，它的实际输出是这样的：

```
1: 
2: this is a test
3: this is another test
4: 
```

我希望对象'B'能够在 first_function() 改变它之后访问 test_variable 的值。

当我将 test_variable 声明为静态时它工作正常，但是在实际应用程序中它不起作用，当我尝试回显 parent::test_variable 时它输出“对象 ID #17”等等。

```
class A
{
    public $test_variable;

    function __construct()
    {
        echo '1: ' . $this->test_variable . "<br />";
        $this->test_variable = 'this is a test';
        echo '2: ' . $this->test_variable . "<br />";
    }

    function first_function()
    {
        $this->test_variable = 'This is another test';
        echo '3: ' . $this->test_variable . "<br />";
        $b = new b;
        $b->second_function();
    }
}

class B extends A
{
    function __construct()
    {
        /* Dont call parent construct */
    }

    function second_function()
    {
        echo '4: ' . $this->test_variable;
    }
}

$a = new A;
$a->first_function();

// Outputs:
// 1:
// 2: this is a test
// 3: this is another test
// 4: 

// but I want it to output
// 1: 
// 2: this is a test
// 3: this is another test
// 4: this is another test 
```

非常感谢您的任何回复。我非常感谢他们。

菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:00:21.163

在类内部声明`public $test_variable;`意味着类的每个实例（对象）都有一个副本。`$test_variable`A 类中的内存地址与`$test_variable`B 类中的内存地址不同。这样做是为了允许范围并删除全局状态。正如您之前所说，将其声明为**静态**将起作用，因为每个实例共享相同的变量。

在这种情况下，`$test_variable`本质上是 B 类需要的依赖项。您可以通过构造函数注入相当容易地获得该依赖项：

```
class A
{
    public $test_variable;

    function __construct()
    {
       echo '1: ' . $this->test_variable . "<br />";
       $this->test_variable = 'this is a test';
       echo '2: ' . $this->test_variable . "<br />";
    }

    function first_function()
    {
       $this->test_variable = 'This is another test';
       echo '3: ' . $this->test_variable . "<br />";

       // Instantiate instance passing dependency
       $b = new b($this->test_variable);

       $b->second_function();
    }
}

class B extends A
{
    function __construct($dependency)
    {
       // Set dependency
       $this->test_variable = $dependency;
    }

    function second_function()
    {
       echo '4: ' . $this->test_variable;
    }
}

$a = new A;
$a->first_function(); 
```

所以，这只是关于如何考虑处理这个问题的想法。

# c++ - C++11 比较和交换获取/释放语义

> ID：11763571
> 
> 赞同：2
> 
> 时间：2012-08-01T16:26:20.837
> 
> 标签：c++, c++11, atomic

假设我有以下代码（玩具示例）：

```
std::atomic<K *> data;
K *old_value = NULL;
K *new_value = new K();
if (!data.compare_exchange_strong(old_value, new_value, m1, m2)) {
    delete new_value;
}
do_something(old_value); 
```

或者

```
std::atomic<K *> data;
K *i = data.load(m3);
K *j;
do {
   j = i + 1;
} while (data.compare_exchange_weak(i, j, m4, m5);
do_something(j); 
```

`m1`、`m2`、`m3`和`m4`的有效值是什么`m5`？我的解读是，所有代码都可以`std::memory_order_relaxed`作为整个代码强烈依赖于先前操作的结果（假设`do_something`只使用指针而不改变全局共享状态）。我的阅读正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T17:29:25.197

这个问题仅在具有明确定义的共享状态的多线程场景中才有意义。在不知道其他线程做什么的情况下，我只能假设它读取/写入`data`。仅通过这个单点同步，完全放松的排序就可以了。对于独立于其他同步点考虑的任何给定原子，操作仍然是原子的，并且它们的相对顺序仍然是正确的。

现在，如果共享状态由几个变量组成（这就是“排序”发挥作用的地方），那将是一个完全不同的故事；你将不得不担心获取/释放/等。语义。在这种情况下：

`relaxed`

*   不保证从一个线程对多个变量的更改将以相同的顺序对另一个线程可见；
*   不保证对独立于不同线程（例如线程 1 组`data1`和线程 2 组`data2`）的多个变量的更改将以相同的顺序对所有其他线程可见。

`acquire/release`（分别用于每次读/写时；对于不同的排序参数模式，第一项可能会变得更轻松）

*   保证从一个线程对多个变量的更改将以相同的顺序对另一个线程可见；
*   不保证对独立于不同线程的多个变量的更改将以相同的顺序对所有其他线程可见。

`seq_cst`（再次，在每次读/写时使用）：

*   保证从一个线程对多个变量的更改将以相同的顺序对另一个线程可见；
*   保证对独立于不同线程的多个变量的更改将以相同的顺序对所有其他线程可见，无论它可能是什么。

# php - SQL语法错误，我就是看不到

> ID：11763573
> 
> 赞同：4
> 
> 时间：2012-08-01T16:26:31.990
> 
> 标签：php, mysql, sql

这是我的代码：

```
<?php
$con = mysql_connect("localhost","solidarity","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("database", $con);

$sql="INSERT INTO show_reviews (username, date, content, show) VALUES (".addslashes($_POST[username]).",".addslashes($_POST[date]).",".addslashes($_POST[content]).",".addslashes($_POST[show]).")";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
?> 
```

所以我使用了 fsprint，现在我刚刚使用了 w3schools 代码，这是我的两段代码的输出：

> 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“show) VALUES (Solidarity, 17:02 - Wed, 1st Aug 2012,Testing,kr1971) 附近使用正确的语法

我对评论系统使用了非常相似的语法并且没有这个问题。如果它也有帮助，我也尝试过本地 sql 服务器和远程服务器，但仍然没有运气。

请帮我 ：（。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T16:28:30.187

将值放在单引号内：

```
$sql=" INSERT INTO show_reviews (username, date, content, show) 
       VALUES ('".addslashes($_POST[username])."','".addslashes($_POST[date])."','".addslashes($_POST[content])."','".addslashes($_POST[show])."')"; 
```

此外，正如其他人所说，**show**是 MySQL 中的保留关键字。[您可以在http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)查看 MySQL 5.5 保留关键字的完整列表

您可以使用反引号引用保留字以便能够使用它们：

```
INSERT INTO show_reviews (username, date, content, `show`) 
```

**引用标识符：** [http ://dev.mysql.com/doc/refman/5.5/en/identifiers.html](http://dev.mysql.com/doc/refman/5.5/en/identifiers.html)

最后，总结一下关于使用`addslashes()`转义的评论。我会让 Chris Shiflett 解释它为什么不好：[http ://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string](http://shiflett.org/blog/2006/jan/addslashes-versus-mysql-real-escape-string)

您真的应该使用 PDO 或至少使用 MySQLi 加入准备好的语句/参数化查询潮流。这是您查询的外观示例：

```
$dbh = new PDO($connection_string);
$sql = "INSERT INTO show_reviews (username, date, content, show) VALUES (?, ?, ?, ?)"; 
$stmt = $dbh->prepare($sql);
$stmt->execute(array($_POST['username'],
                    $_POST['date'],
                    $_POST['content'],
                    $_POST['show']
));
while ($row = $stmt->fetch()) {
   print_r($row);
} 
```

这纯粹是一个示例，对 $_POST 变量进行清理并尽最大努力确保您收到的数据正是您想要获得的数据仍然是一个好主意。**这些准备好的语句会为您正确地**转义，如果使用 PDO，则为您的特定数据库引擎提供正确的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T16:28:28.307

`show`是一个mysql关键字。因此，它不能是列名。如果您想使用 show 作为列名，则必须对其进行转义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T16:28:36.903

`show`是 SQL 中的保留关键字。您必须用反引号括起来才能用作列名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T16:29:25.463

请使用此查询

```
$sql= 'INSERT INTO show_reviews (username, date, content, show) 
       VALUES ("'.addslashes($_POST[username]).'",".'addslashes($_POST[date]).'","'.addslashes($_POST[content]).'","'.addslashes($_POST[show]).'")'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T16:29:27.280

您的值需要用引号括起来。

```
$sql="INSERT INTO show_reviews (username, date, content, show) VALUES ('".addslashes($_POST[username])."','".addslashes($_POST[date])."','".addslashes($_POST[content])."','".addslashes($_POST[show])."')"; 
```

另外 show 是一个保留字，所以你需要用反引号括起来。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T17:00:11.867

要详细说明 Sebastian 的评论，请使用 PDO：它对 SQL 注入攻击更具弹性（或免疫？）。代码将*如下*所示：

```
<?php

try {
    $handle = new PDO('mysql:host=localhost;dbname=myDatabaseName', 'username','password');

    $prepared = $handle->prepare("INSERT INTO show_reviews (username, date, content, show) VALUES (?,?,?,?)");

    if($prepared->execute(array($_POST['username'], $_POST['date'], $_POST['content'], $_POST['show']))) {
    echo "1 record inserted...";
    }else {        
        echo "insert failed...";
    }    
}catch(PDOException $ex) {
    // error connecting to database
}
?> 
```

# mysql - 不等于的 mySQL LIKE 运算符

> ID：11763574
> 
> 赞同：1
> 
> 时间：2012-08-01T16:26:33.130
> 
> 标签：mysql, sql-like

我如何编写一个 mySQL 查询，其中我正在使用 LIKE 运算符查找某些内容，而不是等于什么是 LIKE？

```
select * from ets_fi where name like '%barcode&' <> '%barcode%'; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T16:28:12.713

不喜欢

```
select * from ets_fi where name NOT LIKE '%barcode%'; 
```

或者，如果我误解了您的意图，您可能想要：

```
select * from ets_fi where name LIKE '%barcode%' AND name != 'barcode'; 
```

# coldfusion - 我可以将文件从一台服务器复制到另一台服务器吗？

> ID：11763580
> 
> 赞同：1
> 
> 时间：2012-08-01T16:27:03.290
> 
> 标签：coldfusion, coldfusion-8

我正在使用 ColdFusion 8。

我正在尝试在网络路径 Windows 上编写文件。

```
// THIS WORKS
CatalogDirectory = getDirectoryFromPath("E:\INETPUB\WWWROOT\AVCATALOGS\AVCAT\");

// THIS DOES NOT WORK
CatalogDirectory = getDirectoryFromPath("\\ourserver\e$\InetPub\wwwroot\AVCATALOGS\"); 
```

我找不到任何关于你不能做什么的好文档。

```
// TOO VAGUE
http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_e-g_36.html 
```

有没有办法将文件从一台服务器写入网络驱动器上的另一台服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:43:43.667

您必须以网络用户身份运行 ColdFusion，并且该用户必须有权访问您要连接的服务器。

# html - 如何将我的链接保留在我的表中的 1 行？

> ID：11763581
> 
> 赞同：0
> 
> 时间：2012-08-01T16:27:10.677
> 
> 标签：html, css, html-table

好的，所以在我的表格单元格中，我在左侧有一个图像，一个我想要顶部对齐的链接，然后是下面的一个小描述。

现在我的图像在左侧，链接顶部对齐。我的问题是链接文本在图像下方进行，而不是停留在图像的右侧并在单元格的宽度处切断。

这是我的链接的css。设置宽度没有任何作用。我尝试将显示设置为阻止，但随后将链接置于图像下方。我对html很陌生，我的无知如此赤裸裸。

```
.jobLink {
    color:black;
    vertical-align:top;
    width:100px;
} 
```

**编辑1：**

感谢您的所有建议。今晚我将尝试测试一下。另外，感谢您仔细检查我是否真的需要一张桌子。我想得越多，我真的不需要一个表格，就像我设置每个列表项的方式一样。使用列表更有意义。

**编辑2：**

好的，这就是我想要的外观。

![在此处输入图像描述](../Images/92a1d44b8bc1d3f7d2088c40df4c87ef.png)

根据大家的建议，我已从表格切换到列表。数据并不是真正的表格。

**编辑 3**

这是我在列表中使用的更新后的 css。

```
.jobList {
    background: white;
    color:black;
    width:inherit;
    font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;
    font-size:10pt;
    font-weight:bold;
    list-style:none;
    float:left;
    padding:0;
    margin:0;
}

.jobList li 
{
    float:left;    
    overflow:hidden;
    width:inherit;
}

.jobList li a
{
    color:Black;
    vertical-align:top;
    white-space:nowrap;
}

.jobList li img
{
    float:left;    
} 
```

**编辑 4**

这是图像，这里是有问题的列表项。此外，列表本身还有一个包装器 div，这可能是关键。我已经添加了那个css。

![在此处输入图像描述](../Images/4ec90a62fcdca60ba0a4e594c23f30b2.png)

```
.jobsListWrapper {
    width:318px;
    height:500px;
    overflow:auto;
    float:left;
}

<li>
<div>
<img src="/images/page.png">
<a id="5182" href="/jobs.aspx?rid=1016&amp;jid=5182">MyJobID - This is my long title for the task that I need to complete</a>
</div>
</li> 
```

编辑 5

我刚刚看到了。包装器导致列表项自动溢出......好吧，那么我如何只垂直溢出？好的，不，那不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:42:22.557

尝试添加：

```
position:relative;
display:block;
overflow:hidden; 
```

到`<ul>`css

和

```
postion:absolute; 
```

到`<li>`CSS。

这样做的原因是，如果`<ul>`绝对定位，它将从文档流中移除，这反过来意味着将相对于`<li>`视口定位并忽略`overflow:hidden``<ul>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:44:13.533

尽管我不建议使用表格，除非这是真正的表格内容，但以下解决方案应该适用于任何容器元素，包括表格单元格。

如果您在图像上使用“float:left”的 css 规则，则图像显然会浮动到其容器的左侧。这将确保图像停止将内容推到其下方，并且内容将简单地*环绕*图像。

在这种情况下，这意味着图像将自身定位在左侧，而链接和描述性文本将紧挨着它，在其右侧。

我假设表格单元格中的 HTML 如下所示：

```
<img src="http://www.heliam.net/Gein/_Media/apple_icon.png">
<a href="#">Here is a link</a>
<p>And here is some descriptive text</p> 
```

现在，如果是这种情况，那么您的 CSS 应该简单地确保图像向左浮动：

```
img {
  float: left;
} 
```

你可以在这里看到这一切：http: [//jsfiddle.net/aySEe/](http://jsfiddle.net/aySEe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:39:17.893

可以尝试将每个元素包装在 DIV 中并使用浮点数。请原谅内联 CSS。

```
<td style="width: 15%">
    <div style="float: Left">
        <img alt="" src="Image.png" />
        <a href="" class="jobLink">Hello!</a>
    </div>
    <div style="float: Right">
        <p>Hey This is something.</p>
    </div>
</td> 
```

然后，您可以使用表格单元格上的宽度将它们推得更近

```
<td style="width: 15%"> 
```

让我知道这是否有帮助！

# html - 内联 CSS 使 Firefox 数学符号更大

> ID：11763587
> 
> 赞同：2
> 
> 时间：2012-08-01T16:27:40.320
> 
> 标签：html, css, firefox, math, unicode

我遇到了数学符号（例如“∠”）在 Firefox 中显示太小的问题。我已经通过使用解决了这个问题`<span style="font-size:200%;">&ang;</span>`，但是在其他浏览器中它太大了。

有没有办法使用内联 CSS（我不能更改文档头或外部 CSS）来使大小增加仅适用于 Firefox？

另一个选项是 MathML 生成的图像，但这会使搜索精确的方程字符串变得不可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T19:31:45.183

这是一个字体问题，应该在字体级别解决。这只是一个间接的浏览器问题：当在文档本身建议的任何字体中都找不到字符时，不同的浏览器有不同的默认字体和不同的备用字体列表。（有关此类问题的一般性，请参阅我[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。）

这意味着您应该检查包含所需字符的字体列表，并且 [http://www.fileformat.info/info/unicode/char/2220/fontsupport.htm](http://www.fileformat.info/info/unicode/char/2220/fontsupport.htm) 相当不错（它不包括所有字体，但可能是 Joe Q. Public 在他的计算机中可能拥有的所有字体）。然后根据您的需要选择可以接受渲染的字体，同时考虑到您的复制文本字体选择。

例如，在我的系统（Win 7）上，Firefox 显示的无样式“∠”确实比 IE 小，但这不是由字体大小差异引起的。更改字体大小将是在黑暗中拍摄。相反，如果我使用

```
<span style="font-family: Lucida Sans Unicode">&ang;</span> 
```

我在系统中的两个（或所有）浏览器上都获得了相同的渲染。Lucida Sans Unicode 在 Windows 上可用（我想是普遍的），所以你可以考虑在`font-family`列表中添加一些备份字体，比如 Dejavu Sans。（大多数包含角字符的字体都很少可用，即使你可以看看外观，它们也可能不值得在下面列出。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:35:23.820

您可以应用一个类（或仅使用`span`）并在您的 css 中执行此操作；

```
<style type="text/css">
@-moz-document url-prefix() {
    span {
        font-size:200%;
    }
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:46:46.870

该`url-prefix`规则将规则应用于 URL 以它开头的任何页面。

```
@-moz-document url-prefix() {
  /*your needs*/
} 
```

`@-moz-`是 Gecko 布局引擎特定的规则。它不是标准规则。它是 mozilla 特定的扩展。

# c++ - BFS 实施

> ID：11763590
> 
> 赞同：1
> 
> 时间：2012-08-01T16:27:43.587
> 
> 标签：c++, data-structures, graph-algorithm, breadth-first-search

我最近正在解决一个 bfs 问题，其中每个节点都是数组元素的不同排列。但我无法想出一个合适的数据结构来跟踪扩展树中的访问节点。通常节点是不同的字符串，所以我们可以使用地图将节点标记为已访问但在上述情况下我应该使用什么 DS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T19:00:13.017

考虑以下伪代码：

```
type Node;  // information pertaining to a node
type Path;  // an ordered list of nodes
type Area;  // an area containing linked neighboring nodes
type Queue; // a FIFO queue structure

function Traverse(Area a, Node start, Node end) returns Path:
    Queue q;
    Node n;
                        // traverse backwards, from finish to start
    q.push(end);        // add initial node to queue
    end.parent = end;   // set first node's parent to itself

    while (not q.empty()):
        n = q.pop();    // remove first element

        if (n == start) // if element is the final element, we're done
            break;

        for (Node neighbor in a.neighbors(n)): // for each neighboring node
            if (neighbor.parent != Null):      // if already visited, skip
                continue;
            neighbor.parent = n;               // otherwise, visit 
            q.push(neighbor);                  // then add to queue

    Path p;             // prepare to build path from visited list

    for (Node previous = Null, current = n;
              previous != current;
              previous = current, current = current.parent):
        p.add(current); // for each node from start to end, add node to p
                        // Note that the first node's parent is itself
                        // thus dissatisfying the loop condition
    return p; 
```

“访问列表”存储为节点的父节点。将其编码为 C++，您可能会将大多数节点作为引用或指针处理，因为此伪代码依赖于引用行为。

您从一个区域开始，它是一个节点字段。该区域知道每个节点相对于其他节点的位置。您从一个特定节点开始，即“开始”节点，并将其推入队列。

遍历区域就像从区域中获取相邻节点的列表一样简单，如果它们已经被访问过，则跳过它们，否则设置它们的父节点并将它们添加到队列中。当从队列中删除的节点等于目标节点时，遍历结束。当最初遇到节点时，您可以通过在邻居循环期间执行此检查来稍微加快算法速度。

**注意：**您不需要在开始遍历之前在区域内生成每个可能的节点，区域只需要在创建节点后跟踪它。这可能有助于您使用字符串或数组排列的情况：您可以将起始节点和结束节点推送到区域中，并且它可以动态生成和缓存相邻节点。您可以将它们存储为向量，可以使用 == 运算符根据它们的顺序和内容来比较它们是否相等。 [请参阅此示例。](http://ideone.com/pE6tX)

遍历是向后而不是向前，因为它使重建路径更容易（而不是在结束节点结束，每个父节点在它之前的节点，你在开始节点结束，每个父节点在它之后）

## 数据结构总结

`Node`需要跟踪足够的信息`Area`以唯一地识别它（通过数组索引或名称或其他东西）以及父节点。父节点应在遍历之前设置为 NULL 以避免奇怪的行为，因为遍历将忽略具有其父集的任何节点。这也跟踪访问状态：访问等同于 (parent != NULL)。这样做还可以让您不必跟踪队列中的整个路径，这将是非常计算密集的。

`Area`需要维护一个列表`Node`，并且需要一个邻居映射，或者一个哪些节点与哪些其他节点相邻的映射。这种映射可能是使用函数动态生成的，而不是从表或一些更典型的方法中查找。它应该能够向调用者提供节点的邻居。拥有一个清除每个节点的父节点的辅助方法可能会有所帮助。

`Path`基本上是一个列表类型，包含一个有序的节点列表。

`Queue`是任何可用的 FIFO 队列。你可以用一个链表来做到这一点。

我喜欢语法突出显示在我的 Wuggythovasp++ 上的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-15T05:25:33.310

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author VAISAKH N
 */
public class BFSME {

public static String path = "";
public static String add = "";

public static void findrec(String temp, String end, String[][] m, int j) {
    if (temp.equals(m[j][1])) {
        add = m[j][0] + temp + end + "/";
        end = temp + end;
        System.out.println(end);
        path = path + add;
        temp = "" + add.charAt(0);
        System.out.println("Temp" + temp);
        for (int k = 0; k < m.length; k++) {
            findrec(temp, end, m, k);
        }
    }
}

public static void main(String[] args) {

    String[][] data = new String[][]{{"a", "b"}, {"b", "c"}, {"b", "d"}, {"a", "d"}};
    String[][] m = new String[data.length][2];
    for (int i = 0; i < data.length; i++) {
        String temp = data[i][0];
        String end = data[i][1];
        m[i][0] = temp;
        m[i][1] = end;
        path = path + temp + end + "/";
        for (int j = 0; j < m.length; j++) {

            findrec(temp, end, m, j);
        }

    }
    System.out.println(path);
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T17:58:36.043

至少作为开始，您可以尝试使用/实现类似 Java 的 Arrays.toString() 并使用地图。每种排列都会产生不同的字符串，因此它至少会到达某个地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-08T02:22:54.543

只是为了理解，我在这里提供了我的示例代码（它在 C# 中）

```
 private void Breadth_First_Travers(Node node)
  {
        // First Initialize a queue - 
        // it's retrieval mechanism works as FIFO - (First in First Out)
        Queue<Node> myQueue = new Queue<Node>();

        // Add the root node of your graph into the Queue
        myQueue.Enqueue(node);

        // Now iterate through the queue till it is empty
        while (myQueue.Count != 0)
        {
            // now, retrieve the first element from the queue 
            Node item = myQueue.Dequeue();
            Console.WriteLine("item is " + item.data);

            // Check if it has any left child   
            if (item.left != null)
            {
                // If left child found - Insert/Enqueue into the Queue
                myQueue.Enqueue(item.left);
            }

            // Check if it has right child 
            if (item.right != null)
            {
                // If right child found Insert/Enqueue into the Queue  
                myQueue.Enqueue(item.right);
            }

            // repeat the process till the Queue is empty
        }
   } 
```

这里的示例代码是参考[http://en.wikipedia.org/wiki/Binary_tree](http://en.wikipedia.org/wiki/Binary_tree)给出的， 因为树是它自身的一种图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-30T21:55:54.200

这是使用 C++ STL（邻接列表）的 BFS 实现。这里使用三个 Array 和一个 Queue 来完成实现。

```
#include<iostream>
#include<bits/stdc++.h>
using namespace std;

//Adding node pair of a Edge in Undirected Graph 
void addEdge( vector<int> adj[], int u, int v){
    adj[u].push_back(v);  // 1st push_back
    adj[v].push_back(u);  //2nd push_back
    //for Directed Graph use only one push_back i.e., 1st push_back() rest is same 
}
//Traversing through Graph from Node 0 in Adjacency lists way
void showGraph( vector<int>adj[], int size){
    cout<<"Graph:\n";
    for(int i=0; i<size ; i++){
        cout<<i;
        for( vector<int>::iterator itr= adj[i].begin() ; itr!=adj[i].end(); itr++){
        cout<<" -> "<<*itr;
    }
    cout<<endl;
}
}
//Prints Array elements
void showArray(int A[]){
    for(int i=0; i< 6; i++){
        cout<<A[i]<<" ";
    }
}

void BFS( vector<int>adj[], int sNode, int N){

    //      Initialization
    list<int>queue; //Queue declaration
    int color[N]; //1:White, 2:Grey, 3:Black
    int parentNode[N];  //Stores the Parent node of that node while   traversing, so that you can reach to parent from child using this 
    int distLevel[N];   //stores the no. of edges required to reach the node,gives the length of path

    //Initialization
    for(int i=0; i<N; i++){
        color[i] = 1;   //Setting all nodes as white(1) unvisited
        parentNode[i] = -1;  //setting parent node as null(-1)
        distLevel[i] = 0;  //initializing dist as 0
    }

    color[sNode] = 2;  //since start node is visited 1st so its color is grey(2)
    parentNode[sNode] = -1;  //parent node of start node is null(-1)
    distLevel[sNode] = 0;    //distance is 0 since its a start node
    queue.push_back(sNode);  //pushing start node(sNode) is queue

    // Loops runs till Queue is not empty if queue is empty all nodes are visited
    while( !queue.empty()){

    int v = queue.front();  //storing queue's front(Node) to v
    // queue.pop_front();//Dequeue poping element from queue

    //Visiting all  nodes connected with v-node in adjacency list
    for(int i=0; i<adj[v].size() ;i++){

        if( color[ adj[v][i] ] == 1){// if node is not visited, color[node]==1  which is white 
            queue.push_back(adj[v][i]);  //pushing that node to queue
            color[adj[v][i]]=2;  //setting as grey(2)
            parentNode[ adj[v][i] ] = v; //parent node is stored                distLevel[ adj[v][i] ] = distLevel[v]+1;  //level(dist) is incremented y from dist(parentNode)
        }
    }//end of for
    color[v]=3;
    queue.pop_front();//Dequeue

}

printf("\nColor: \n");showArray(color);
printf("\nDistLevel:\n");showArray(distLevel);
printf("\nParentNode:\n");showArray(parentNode);
}

int main(){

int N,E,u,v;//no of nodes, No of Edges, Node pair for edge
cout<<"Enter no of nodes"<<endl;
cin>>N;
vector<int> adj[N];  //vector adjacency lists

cout<<"No. of edges"<<endl;
cin>>E;

cout<<"Enter the node pair for edges\n";
for( int i=0; i<E;i++){
    cin>>u>>v;
    addEdge(adj, u, v);  //invoking addEdge function
}

showGraph(adj,N);  //Printing Graph in Adjacency list format
BFS(adj,0,N);  /invoking BFS Traversal
} 
```

# php - 使用 Facebook Graph API 将带有 @ 标签的照片发布到用户的时间轴

> ID：11763591
> 
> 赞同：1
> 
> 时间：2012-08-01T16:27:46.193
> 
> 标签：php, facebook, facebook-graph-api, tags

我正在构建一个应用程序，用户可以在其中将照片直接从我们的应用程序发布到他们的时间线。我们想用一些品牌文字和品牌 Facebook 页面的链接预先填充它。例如，类似：“查看我在 XYZ 活动中的照片”。XYZ 将是指向[http://facebook.com/xyz的链接](http://facebook.com/xyz)

我能找到的最接近的是：http: [//digitizor.com/2011/01/24/tag-user-facebook-graph/](http://digitizor.com/2011/01/24/tag-user-facebook-graph/)但似乎这个技巧不再有效。

我们正在使用 CURL 将照片上传到用户墙，并将以下数组转换为 CURLOPT_POSTFIELDS 的字符串：

```
$graph_url= "https://graph.facebook.com/me/photos?"
. "access_token=" .$access_token;
$fields = array(
'url'=>"http://" . $imgPath,
'message'=>urlencode(stripslashes($_POST['message'] . " @[$brandFBUID:1:$brandName]" )) ); 
```

# ios - 对于以下情况，合适的设计模式是什么？

> ID：11763593
> 
> 赞同：0
> 
> 时间：2012-08-01T16:27:57.467
> 
> 标签：ios, design-patterns

作为练习，我正在为 iPad 开发一个简单的绘图应用程序。我正在使用`UISplitView`, 绘图视图作为详细视图。在主视图控制器中，我呈现（在表格视图中）到目前为止绘制的形状列表。

用户可以从主视图控制器编辑或删除任何形状，还可以通过在详细视图控制器中触摸它来选择和编辑形状。

为了通知每个视图控制器另一个所做的更改，我想到了使用委托，但我不确定这是否是正确的使用模式。

首先，据我了解，当某个对象遇到他们不知道如何处理的事件时，应该使用委托。在这种情况下，他们将所有信息传递给委托并让它处理事件。这不是这里的情况，因为两个视图控制器都需要对信息做一些事情。在此处使用委托可能会导致代码重复。

我考虑不使用委托的另一个原因是，将来我可能希望其他视图控制器获取绘图更改的信息。我可以使用多个代表（一般来说这是一种好的做法吗？）但我也不确定这是否是一个好的解决方案。

我应该考虑其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:34:55.507

相反，我认为委托可能是在这里使用的正确模式——您不一定*只*在您无法处理事件时委托（尽管这*可能*是您要委托的一种情况）。

相反，当您根本不知道该对象可能是什么时，请考虑委托一种从另一个对象获取信息或从另一个对象获取信息的方法。例如，Apple 在使用 UITableViews 时使用委托模式；在那个委托协议中，表格视图非常清楚在每种情况下要做什么，但仍然会在某些操作即将发生时通知您的代码。我认为这与您的情况非常相似。（请注意，在 UITableView “数据源”中也存在与您的问题假设平行的情况，其中表格视图确实需要一些信息。）

如果您真的对代表死心塌地，您可以考虑使用的另一种技术是使用通知。您可以让每个控制器订阅特定的通知，然后让您的形状（或详细视图控制器）在可观察到的更改发生时发布 NSNotification 的实例。这样，您仍然可以处理发生在不同控制器中的事件，但无需维护委托列表。

至于代码重复，只要在遇到重复的情况时考虑重构即可；也许您应该为公共代码设计一个委托或通知订阅者对象，然后只在每个其他控制器中执行特定于类的事情？

# mysql - MySQL 更新 SET 值

> ID：11763599
> 
> 赞同：4
> 
> 时间：2012-08-01T16:28:10.250
> 
> 标签：mysql

我正在尝试创建一个`Trigger`将通过一些`IF ELSEIF`语句运行并检查新值`NULL`但是它只适用于第一个`IF`语句。

这`Trigger`是`AFTER UPDATE`. 我的问题是，如果我只是`SET`一个列值，其他列是什么`SET`，是它们`NULL`还是什么。`SET`如果此列不在此`UPDATE`命令上，我该如何测试它。

示例更新：

```
UPDATE  `stations_us`.`current_prices` SET  `midPrice` =  '3.59' WHERE  `current_prices`.`_id` =1; 
```

目前还有其他列不更新，但可以根据 PHP 脚本进行更新。

扳机：

```
BEGIN
-- Definition start
IF(NEW.regPrice IS NOT NULL) THEN
INSERT INTO prices (stationID, price, type, 
prevPrice, prevDate, dateCreated, apiKey, uid) 
VALUES(NEW.stationID, NEW.regPrice, 'reg', OLD.regPrice,
OLD.regDate, NEW.regDate, NEW.lastApiUsed, NEW.lastUpdatedBy);

ELSEIF(NEW.midPrice IS NOT NULL) THEN
INSERT INTO prices (stationID, price, type, 
prevPrice, prevDate, dateCreated, apiKey, uid) 
VALUES(NEW.stationID, NEW.midPrice, 'mid', OLD.midPrice,
OLD.midDate, NEW.midDate, NEW.lastApiUsed, NEW.lastUpdatedBy);

ELSEIF(NEW.prePrice IS NOT NULL) THEN
INSERT INTO prices (stationID, price, type, 
prevPrice, prevDate, dateCreated, apiKey, uid) 
VALUES(NEW.stationID, NEW.prePrice, 'pre', OLD.prePrice,
OLD.preDate, NEW.preDate, NEW.lastApiUsed, NEW.lastUpdatedBy);
END IF;
-- Definition end
END 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T16:37:20.203

您无法在触发器内部判断 SET 子句中引用了哪些列。

您只能通过比较和`col`的值来检查语句的值是否被更改。`NEW.col``OLD.col`

```
IF NOT (NEW.regPrice <=> OLD.regPrice) 
```

测试`(NEW.col IS NOT NULL)`不足以判断该值是否已更改。考虑旧值为 4.95 且新值为 NULL 的情况，看起来您可能想要检测该更改。

* * *

请注意，一条 UPDATE 语句可能会为多个列设置值：

```
UPDATE foo SET col1 = 'a', col2 = 'b', col3 = 'c' WHERE ... 
```

另请注意，可以将列设置为 NULL，并且可以将列设置为其现有值

```
UPDATE foo SET col1 = 'a', col2 = NULL, col3 = col3 WHERE ... 
```

在这种情况下，在您的触发器内部，`NEW.col2`将评估为 NULL，`(NEW.col3 <=> OLD.col3)`并将评估为 1 (TRUE)，因为 OLD 和 NEW 值相等。

（您的 AFTER UPDATE 触发器真正看到的是已存储的值，如果 BEFORE INSERT 触发器与该值混淆并为该列提供了不同的值，则不一定是 UPDATE 语句中的值。）

如果您的意图是记录值的更改，您可能不想要 ELSIF，而是希望遍历所有列以检查其值是否已更改。

# git - 为什么不推送配置文件夹？

> ID：11763609
> 
> 赞同：0
> 
> 时间：2012-08-01T16:28:50.890
> 
> 标签：git, deployment, heroku

尽管我确信在推送之前我已将所有文件和文件夹添加并提交到我的本地 git 存储库中

我不知道为什么远程仓库缺少配置文件夹

我不知道如何调查这个问题，当然我没有将配置文件夹名称添加到 .gitignore 或 .slugignore ，但是，它永远不会被推送！

我做了`git init`，git `add .`，`git commit`然后

```
git push heroku master 
```

那么，关于这个问题的想法？

编辑

当我尝试手动在配置中添加文件时，我得到：

```
sam@ubuntu:~/RubymineProjects/dcaclab$ cd config
sam@ubuntu:~/RubymineProjects/dcaclab/config$ git add *
sam@ubuntu:~/RubymineProjects/dcaclab/config$ git commit -m "config files"
# On branch master
nothing to commit (working directory clean)
sam@ubuntu:~/RubymineProjects/dcaclab/config$ git push heroku master
Everything up-to-date
sam@ubuntu:~/RubymineProjects/dcaclab/config$ 
```

编辑 2

```
# See http://help.github.com/ignore-files/ for more about ignoring files.
#
# If you find yourself ignoring temporary files generated by your text editor
# or operating system, you probably want to add a global ignore instead:
#   git config --global core.excludesfile ~/.gitignore_global

# Ignore bundler config

# Ignore the default SQLite database.
/db/*.sqlite3

# Ignore all logfiles and tempfiles.
/log/*.log
/tmp
sam@ubuntu:~/RubymineProjects/dcaclab$ ls config/
application.rb  boot.rb  database.yml  environment.rb  environments  initializers  locales  newrelic.yml  routes.rb 
```

编辑 3

```
sam@ubuntu:~/RubymineProjects/dcaclab$ ls config
application.rb  database.yml    environments  locales       routes.rb
boot.rb         environment.rb  initializers  newrelic.yml 
```

编辑 4

```
sam@ubuntu:~/RubymineProjects/dcaclab$ cd config
sam@ubuntu:~/RubymineProjects/dcaclab/config$ echo 'test' > test_file
sam@ubuntu:~/RubymineProjects/dcaclab/config$ ls config
ls: cannot access config: No such file or directory
sam@ubuntu:~/RubymineProjects/dcaclab/config$ dir
application.rb  database.yml    environments  locales       routes.rb
boot.rb     environment.rb  initializers  newrelic.yml  test_file
sam@ubuntu:~/RubymineProjects/dcaclab/config$ git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   test_file
nothing added to commit but untracked files present (use "git add" to track)
sam@ubuntu:~/RubymineProjects/dcaclab/config$ git add .
sam@ubuntu:~/RubymineProjects/dcaclab/config$ git commit -m "a file"
[master 55a0159] a file
 1 file changed, 1 insertion(+)
 create mode 100644 config/test_file
sam@ubuntu:~/RubymineProjects/dcaclab/config$ git push heroku master
Counting objects: 6, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (4/4), 336 bytes, done.
Total 4 (delta 2), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rack app detected
-----> Installing dependencies using Bundler version 1.2.0.rc
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Using rake (0.9.2.2)
       Using i18n (0.6.0)
       Using multi_json (1.3.4)
       Using activesupport (3.2.3)
       Using builder (3.0.0)
       Using activemodel (3.2.3)
       Using erubis (2.7.0)
       Using journey (1.0.3)
       Using rack (1.4.1)
       Using rack-cache (1.2)
       Using rack-test (0.6.1)
       Using hike (1.2.1)
       Using tilt (1.3.3)
       Using sprockets (2.1.3)
       Using actionpack (3.2.3)
       Using mime-types (1.18)
       Using polyglot (0.3.3)
       Using treetop (1.4.10)
       Using mail (2.4.4)
       Using actionmailer (3.2.3)
       Using arel (3.0.2)
       Using tzinfo (0.3.33)
       Using activerecord (3.2.3)
       Using activeresource (3.2.3)
       Using bcrypt-ruby (3.0.1)
       Using cancan (1.6.7)
       Using cocoon (1.0.20)
       Using coffee-script-source (1.3.1)
       Using execjs (1.3.2)
       Using coffee-script (2.2.0)
       Using rack-ssl (1.3.2)
       Using json (1.7.1)
       Using rdoc (3.12)
       Using thor (0.14.6)
       Using railties (3.2.3)
       Using coffee-rails (3.2.2)
       Using commonjs (0.2.6)
       Using daemons (1.1.8)
       Using orm_adapter (0.0.7)
       Using warden (1.1.1)
       Using devise (2.0.4)
       Using eventmachine (0.12.10)
       Using google-analytics-rails (0.0.2)
       Using haml (3.1.4)
       Using jquery-rails (2.0.2)
       Using jquery-rails-cdn (0.1.0)
       Using json_pure (1.6.6)
       Using less (2.2.1)
       Using less-rails (2.2.3)
       Using libv8 (3.3.10.4)
       Using on_the_spot (1.0.0)
       Using pg (0.13.2)
       Using bundler (1.2.0.rc)
       Using rails (3.2.3)
       Using routing-filter (0.3.0)
       Using sass (3.1.17)
       Using sass-rails (3.2.5)
       Using simple_form (2.0.1)
       Using therubyracer (0.10.1)
       Using thin (1.3.1)
       Using twitter-bootstrap-rails (2.1.0) from git://github.com/seyhunak/twitter-bootstrap-rails.git (at master)
       Using uglifier (1.2.4)
       Using validate_url (0.2.0)
       Your bundle is complete! It was installed into ./vendor/bundle
       Cleaning up the bundler cache.
-----> Discovering process types
       Procfile declares types     -> (none)
       Default types for Ruby/Rack -> console, rake, web
-----> Compiled slug size is 18.7MB
-----> Launching... done, v20
       http://dcaclab3.herokuapp.com deployed to Heroku

To git@heroku.com:dcaclab3.git
   f434d33..55a0159  master -> master
sam@ubuntu:~/RubymineProjects/dcaclab/config$ heroku run bash -a dcaclab3
Running `bash` attached to terminal... up, run.1
~ $ dir
app  config.ru  doc  Gemfile.lock  public    README.rdoc  test
bin  db     Gemfile  lib           Rakefile  script       vendor 
```

编辑 5

为了确保推送中的问题以及我的本地提交工作正常：

```
sam@ubuntu:~/RubymineProjects/dcaclab$ git ls-files config/
config/application.rb
config/boot.rb
config/database.yml
config/environment.rb
config/environments/development.rb
config/environments/production.rb
config/environments/test.rb
config/initializers/backtrace_silencers.rb
config/initializers/devise.rb
config/initializers/inflections.rb
config/initializers/mail.rb
config/initializers/mime_types.rb
config/initializers/secret_token.rb
config/initializers/session_store.rb
config/initializers/simple_form.rb
config/initializers/task_scheduler.rb
config/initializers/wrap_parameters.rb
config/locales/ar.yml
config/locales/devise.en.yml
config/locales/en.yml
config/locales/simple_form.en.yml
config/newrelic.yml
config/routes.rb
config/test_file 
```

编辑 6

确保没有其他 .gitignore 潜伏

```
sam@ubuntu:~/RubymineProjects/dcaclab$ ~/.gitignore
bash: /home/sam/.gitignore: No such file or directory

sam@ubuntu:~/RubymineProjects/dcaclab$ find ~/RubymineProjects/dcaclab -name ".gitignore"
/home/sam/RubymineProjects/dcaclab/.gitignore 
```

1.  从 $GIT_DIR/info/exclude 读取的模式。

    sam@ubuntu:~/RubymineProjects/dcaclab$ cat ~/RubymineProjects/dcaclab/.git/exclude cat: /home/sam/RubymineProjects/dcaclab/.git/exclude: 没有这样的文件或目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:42:21.157

# 1个空目录

git 不会签入空目录，因此如果您的“配置”目录为空，它将不会包含在您的提交中。通过添加一个虚拟文件来“修复”它

```
touch config/nada
git add config/nada
git commit config/nada -m "dummy file to force inclusion of config/"
git push heroku master 
```

# 2 gitignore

可能您的 config/ 目录中的文件位于某个全局或系统范围的 .gitignore 文件中

*编辑1：*

有多种方法可以指定 git 排除的文件。您可能需要检查所有这些以查看您是否忽略了配置目录：

*   命令行参数（可能不是你的问题）

*   git 存储库目录中的 .gitignore 文件

*   $GIT_DIR/信息/排除

*   由 core.excludes 属性指定的文件（系统范围或全局）

    `git config core.excludes`

    `git config --global core.excludes`

    `git config --system core.excludes`

检查所有可能性，最终将它们发布在这里（或一些粘贴箱）

无论如何，您应该能够通过显式添加文件来覆盖排除：

```
git add config/foo.conf
git commit config/foo.conf -m "manually added foo.conf"
git push heroku master 
```

*编辑2：*

# 3推...

我不认为“推送”是问题，而是将文件添加到存储库中。确认，配置文件确实在 git 控制之下。例如，在添加/提交文件后：

```
git ls-files config/ 
```

并确保文件在那里。

*编辑3：*

此外，很可能您正在正确推送到heroku，但他们没有按预期将您的存储库同步到部署，因此远程控制台不显示配置（或者因为它被排除在同步之外，因为它结束了其他地方或者因为它在显示时被过滤掉了；或者因为你实际上看错了地方）

这样做：

```
$ git add config/foo.conf
$ git commit config/foo.conf -m "manually added foo.conf"
$ git push heroku master

$ cd /tmp
$ git clone <remote-url-for-heroku> testclone
$ ls testclone/config/ 
```

如果这有效，那么在 heroku 网站上的结帐有问题。也许你需要做这样的事情：

```
$ heroku run bash -a dcaclab3
[...]
$$ git pull
$$ ls config/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:17:59.090

git 查找被忽略文件的位置有限。让我们检查所有这些（转述自`man gitignore`）：

```
1\.   Patterns read from the command line for those commands that support them.

2\.   Patterns read from a .gitignore file in the same directory as the path, or in any parent directory, with patterns in the higher level files (up to
     the toplevel of the work tree) being overridden by those in lower level files down to the directory containing the file. These patterns match
     relative to the location of the .gitignore file. A project normally includes such .gitignore files in its repository, containing patterns for files
     generated as part of the project build.

3\.   Patterns read from $GIT_DIR/info/exclude.

4\.   Patterns read from the file specified by the configuration variable core.excludesfile. 
```

不是`1`。您正在使用不支持 CLI 排除的瓷器命令。它仍然可以`2`基于您当前的编辑。里面有什么`~/.gitignore`，并发出`find ~/RubymineProjects/dcaclab -name ".gitignore"`确认你没有其他人潜伏的问题。进行测试`3`，发出`cat ~/RubymineProjects/dcaclab/.git/exclude`。在输出中进行测试`4`、发布`git config core.excludefile`和`git config --global core.excludefile`编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:13:24.537

当我联系 heroku 时，我们发现删除文件 .gitignore 旁边的文件 .slugignore 解决了这个问题！

所以，这是heroku方面的一个错误，遗憾的是这就是原因，感谢每个试图帮助解决这个问题的人。

# python - 具有频率的 Ngram 的 Python 列表

> ID：11763613
> 
> 赞同：16
> 
> 时间：2012-08-01T16:29:20.090
> 
> 标签：python, nltk, scikit-learn

我需要从文本中获取最流行的 ngram。Ngrams 长度必须为 1 到 5 个单词。

我知道如何获得二元组和三元组。例如：

```
bigram_measures = nltk.collocations.BigramAssocMeasures()
finder = nltk.collocations.BigramCollocationFinder.from_words(words)
finder.apply_freq_filter(3)
finder.apply_word_filter(filter_stops)
matches1 = finder.nbest(bigram_measures.pmi, 20) 
```

但是，我发现 scikit-learn 可以获得不同长度的 ngram。例如，我可以获得长度从 1 到 5 的 ngram。

```
v = CountVectorizer(analyzer=WordNGramAnalyzer(min_n=1, max_n=5)) 
```

但是 WordNgramAnalyzer 现在已被弃用。我的问题是：*如何从我的文本中获得 N 个最佳单词搭配，搭配长度从 1 到 5。我还需要获取此搭配/ngrams 的 FreqList。*

我可以用 nltk/scikit 做到这一点吗？我需要从一个文本中获取不同长度的 ngram 组合吗？

例如，使用 NLTK 二元组和三元组，其中我的三元组包括我的位元，或者我的三元组是更大的 4 元组的一部分。例如：

**位图：你好，我的**三字： 你好，**我的名字**

我知道如何从三元组中排除二元组，但我需要更好的解决方案。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-01T19:18:17.827

**更新**

从 scikit-learn 0.14 开始，格式已更改为：

```
n_grams = CountVectorizer(ngram_range=(1, 5)) 
```

完整示例：

```
test_str1 = "I need to get most popular ngrams from text. Ngrams length must be from 1 to 5 words."
test_str2 = "I know how to exclude bigrams from trigrams, but i need better solutions."

from sklearn.feature_extraction.text import CountVectorizer

c_vec = CountVectorizer(ngram_range=(1, 5))

# input to fit_transform() should be an iterable with strings
ngrams = c_vec.fit_transform([test_str1, test_str2])

# needs to happen after fit_transform()
vocab = c_vec.vocabulary_

count_values = ngrams.toarray().sum(axis=0)

# output n-grams
for ng_count, ng_text in sorted([(count_values[i],k) for k,i in vocab.items()], reverse=True):
    print(ng_count, ng_text) 
```

它输出以下内容（请注意，`I`删除该词不是因为它是停用词（不是），而是因为它的长度：[https](https://stackoverflow.com/a/20743758/) ://stackoverflow.com/a/20743758/ ）：

```
> (3, u'to')
> (3, u'from')
> (2, u'ngrams')
> (2, u'need')
> (1, u'words')
> (1, u'trigrams but need better solutions')
> (1, u'trigrams but need better')
... 
```

这几天应该/可能会简单得多，imo。您可以尝试类似的东西[`textacy`](https://textacy.readthedocs.io/en/latest/api_reference.html#textacy.doc.Doc.to_bag_of_terms)，但有时可能会带来一些复杂的情况，例如初始化 Doc，它目前不适用于 v.0.6.2 [，如他们的 docs 所示](https://textacy.readthedocs.io/en/latest/api_reference.html#textacy.doc.Doc)。[如果 doc 初始化按承诺工作](https://stackoverflow.com/q/51431112/)，理论上以下内容会起作用（但不会）：

```
test_str1 = "I need to get most popular ngrams from text. Ngrams length must be from 1 to 5 words."
test_str2 = "I know how to exclude bigrams from trigrams, but i need better solutions."

import textacy

# some version of the following line
doc = textacy.Doc([test_str1, test_str2])

ngrams = doc.to_bag_of_terms(ngrams={1, 5}, as_strings=True)
print(ngrams) 
```

**旧答案**

`WordNGramAnalyzer`自 scikit-learn 0.11 以来确实已弃用。创建 n-gram 和获取词频现在在[sklearn.feature_extraction.text.CountVectorizer](http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html#sklearn.feature_extraction.text.CountVectorizer)中结合。您可以创建从 1 到 5 的所有 n-gram，如下所示：

```
n_grams = CountVectorizer(min_n=1, max_n=5) 
```

更多示例和信息可以在 scikit-learn 关于[文本特征提取](http://scikit-learn.org/stable/modules/feature_extraction.html#text-feature-extraction)的文档中找到。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-06T19:21:20.060

如果您想生成原始 ngram（也许自己计算它们），还有`nltk.util.ngrams(sequence, n)`. 它将为*n*的任何值生成一个 ngram 序列。它有填充选项，请参阅文档。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-26T17:55:18.680

查看[http://nltk.org/_modules/nltk/util.html](http://nltk.org/_modules/nltk/util.html)我认为 nltk.util.bigrams() 和 nltk.util.trigrams() 是使用 nltk.util.ngrams() 实现的

# c# - 等待异步导致与启动它的控制器方法不同的控制器方法

> ID：11763615
> 
> 赞同：1
> 
> 时间：2012-08-01T16:29:24.033
> 
> 标签：c#, asp.net-mvc, model-view-controller, asynchronous

如何在控制器方法中等待异步结果？似乎实现起来很简单，但到目前为止我还没有找到一个干净优雅的好例子。

这是问题所在。我有两种控制器方法。方法 A 和方法 B。方法 A 通过 TaskFactory 启动一个长时间运行的进程，并在进程完成时使用 ContinueWith 更新缓存值。A 和 B 之间有一些中间步骤。现在当我进入方法 B 时，我需要检查缓存中的值。如果缓存中的值尚未更新，我需要等待 x 秒，并定期检查该值是否已更新。

我更愿意在控制器中处理所有这些，因此客户端不必轮询结果（并且必须重写控制器来处理轮询）。但是我还没有找到一种方法来实现控制器方法中的轮询，该方法在超时到期之前不会阻塞（我担心线程池饥饿）。也许我可以在这里使用没有一个干净的实现。如果投票是正确的或唯一的答案，我将不得不接受它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:31:09.747

HTTP 是一种无状态协议。您无法在不阻塞的情况下在服务器上实现此类轮询。你有两种可能性：

*   在客户端上轮询 - 让客户端定期使用 AJAX 请求锤击您的服务器
*   使用推送并让服务器在某些任务完成时通知客户端 - 结帐[SignalR](https://github.com/SignalR/SignalR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:24:26.997

您可以等待 mvc 4 获得异步控制器或获得 mvc 4 和 .net 4.5 的 beta。

# c# - Selenium Webdriver C# - 未选择 Firefox 下拉菜单文本

> ID：11763624
> 
> 赞同：2
> 
> 时间：2012-08-01T16:29:37.403
> 
> 标签：c#, c#-4.0, selenium, webdriver, selenium-webdriver

我正在尝试使用 C# 中的 Selenium webdriver 从下拉菜单中选择一个文本它与 Chrome 浏览器完美配合，但不适用于 Firefox。任何人都可以帮我解决这个问题。

我正在使用的代码如下所示。

```
public void SelectCountry1(string country)
{
var countryDropDown = Driver.FindElement(By.XPath(xpathidofthecountrydropdown));
countryDropDown .Click();
//Driver.FindElement(By.XPath(xpathidofthecountrydropdown)).Click;
var selectElement = new SelectElement(countryDropDown);
selectElement.SelectByText(country);
} 
```

我可以调用此函数，并且成功执行，没有任何错误消息。即使它存在，我也无法选择预期的关键字。

目前，我有一种解决方法，即两次单击相同的 id，这会使代码正常工作。注释部分未注释但我认为这不是正确的解决方法。让我知道你对此的看法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:23:52.817

通常，选择类无需您单击下拉菜单即可处理选择。它应该在 FF 和 Chrome 中都可以工作，即 Select 有一些其他问题。尽量不要点击下拉按钮。如果 Select 类没有按照它假设的方式运行，则尝试单击和导航选项发送向上向下键，然后按 Enter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T06:56:14.407

是的，它不适用于 Firefox。我不得不将其用作使用 jQuery 的解决方法。如果页面上没有 jQuery，请随意使用常规 JavaScript 修改此代码。

```
public static void SetDropdownSelectedOptionByText(IWebDriver driver, string tagId, string newText, int sleepTime)
{
    // not working when selecting client id of certain types of ASP.NET user controls
    //new SelectElement(driver.FindElement(By.Id(tagId))).SelectByText(newText);  

    IJavaScriptExecutor js = driver as IJavaScriptExecutor;
    js.ExecuteScript("$('#" + tagId + " option:contains(" + Element.NonNullValue(newText) + ")').attr('selected', 'selected')");
    js.ExecuteScript("$('#" + tagId + "').change()");
    System.Threading.Thread.Sleep(sleepTime);  // wait for dependent dropdown to load its values
} 
```

# java - 数据库连接关闭监视器

> ID：11763626
> 
> 赞同：1
> 
> 时间：2012-08-01T16:30:00.420
> 
> 标签：java, jdbc

我有以下用例。

我们的客户端应用程序将进行一个 API（这是我）调用，该调用在对客户端应用程序执行 db 调用后返回一个 java 结果集。我想知道客户端何时使用结果集完成，以便我可以关闭结果集以及与之关联的连接。所以我认为的设计是发送包装在一个新对象中的结果集，该对象具有关闭结果集和与之关联的连接的行为。此清理方法必须由客户端调用。现在，由于某种原因，如果客户端应用程序从未调用过此清理方法，那么我们将以打开的连接和未释放的数据库资源结束。有没有办法更好地监控这一点并确保所有数据库资源都被及时释放。此外，如果有任何设计模式可能有助于此用例，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:39:40.077

永远不要将昂贵的数据库资源返回`ResultSet`到您失去所有控制权的 API 之外。而是将其映射到一个`List<Map<String, Object>>`或可重用的东西并返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:35:52.793

一种方法是使用幻像引用从对象中清理结果集/连接（我更喜欢使用 finalize） - 这样，您应该能够清理对象并将其简单地返回到池中。根据您的用例，您也可以查看超时。

此外，同意其他关于尽可能不传递结果集的建议。
希望能帮助到你。

# html - 有没有办法阻止 Outlook 在电子邮件中添加不需要的分页符？

> ID：11763635
> 
> 赞同：3
> 
> 时间：2012-08-01T16:30:26.790
> 
> 标签：html, email, outlook, page-break

我们生成了相当大的 HTML 电子邮件 - 因此遇到了 Outlook 电子邮件客户端问题/软件缺陷，如果它认为电子邮件已达到 A4 字符数，它决定将分页符插入电子邮件。[这是由于 Outlook 电子邮件客户端使用 Word 引擎呈现 HTML。]

这对我们来说不是问题，除了

1.  它可能出现在一些 HTML 的中间。

2.  这是破坏性的。

示例 1：如果您有一些 html

```
<img src="http:// 
```

您可能会在 `><img` **此处获得分页符**

`src="http://`

示例 2：如果您有一些 html

```
<img src="http:// 
```

你可能会得到 `>**PAGE BREAK HERE** img src="http://`

这破坏了“ `<img`”标签的“<”。

我们的电子邮件是动态的，因此每封电子邮件的不同点都可能存在此分页问题。:o( 我们试图通过“牺牲”空白区域来吸收分页符来绕过它——但是随着我们的电子邮件随着时间的推移变得越来越复杂，这个系统开始崩溃。

对我们不起作用的潜在解决方法示例： [Mike The Coder - Page Break Before Always](http://mikethecoder.com/post/861597102/outlook-2007-screws-up-spacing-where-page-breaks-would) Post 提到了该领域的问题： [Outlook 2007 和 2010 中的水平间距问题](http://www.emailonacid.com/blog/details/C13/horizontal_spacing_issues_in_outlook_2007_and_2010)

人们是否知道其他尝试阻止此问题或在 Outlook 电子邮件客户端中解决此问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:22:12.073

本文讨论了一种可能的修复方法，但需要进行注册表编辑：

[http://www.msofficeforums.com/outlook/6277-prevent-outlook-adding-line-breaks.html](http://www.msofficeforums.com/outlook/6277-prevent-outlook-adding-line-breaks.html)

这是另一篇文章，其中包含可能对您有用的解决方法，而无需编辑注册表：

[http://answers.microsoft.com/en-us/office/forum/office_2010-outlook/line-break-in-plain-text-emails-in-outlook-2010/11d69847-f576-4002-b2fb-67bc59a69ce6? tab=所有回复&tm=1329162544193](http://answers.microsoft.com/en-us/office/forum/office_2010-outlook/line-break-in-plain-text-emails-in-outlook-2010/11d69847-f576-4002-b2fb-67bc59a69ce6?tab=AllReplies&tm=1329162544193)

# oracle - 如何阻止用户输入重复值

> ID：11763636
> 
> 赞同：0
> 
> 时间：2012-08-01T16:30:30.083
> 
> 标签：oracle, jakarta-ee, duplicates

在我的一个 Java EE 应用程序中，我使用注册页面来注册新用户，一旦注册，他/她的注册值将被插入到 Oracle 数据库中。但是没有办法检测重复值。所以我考虑`unique`为某些列值添加约束。但后来我了解到，我不能将多个列声明为`unique`（在我的情况下，我已经声明`userid`为主**键**）。但我需要使多个列值*唯一*（如`emialid`字段）。再次仅添加`unique`无济于事，就像用户提交具有**重复值**的表单一样，将捕获异常并且用户将无法理解，因为他将被重定向到*空白页面*. 所以我有2个问题。

> 1）如何通知用户插入重复值？

和

> 2) 如何在 Oracle 中使多个列唯一？

**注意**我不知道javascript！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:38:42.547

首先，您当然可以在一个表上声明多个唯一约束。您可以声明它`userid`是主键，然后声明`emailid`为唯一的。您可以声明任意数量的唯一约束。

其次，您的应用程序需要捕获重复键约束并对其进行一些有用的操作。将用户重定向到空白页面没有用——您的应用程序应该捕获约束异常并向用户显示有用的消息。例如，如果您收到一个说明`UK_EMAILID`违反了约束的异常，您可能希望向用户显示一条错误消息，说明“此电子邮件地址已存在”之类的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:36:20.220

如果你使用 JPA，你可以建立一个独特的约束：

```
@Entity
@Table(name = "entity_table_name", uniqueConstraints={
   @UniqueConstraint(columnNames={"uniqueField1"}), // Unique value on one field.
   @UniqueConstraint(columnNames={"uniqueField2", "uniqueField3"}) // Unique combination.
})
public class YourEntity {
  private Long id;
  private String uniqueField1;
  private String uniqueField2;
  private String uniqueField3;
  private String uniqueField4;

// ...
} 
```

实现（hibernate、eclipseLink）将负责 oracle 部分。

# agda - Agda：用数字解析字符串

> ID：11763639
> 
> 赞同：6
> 
> 时间：2012-08-01T16:30:36.713
> 
> 标签：agda, dependent-type

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T18:43:32.780

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T23:13:57.987

I had a go at it trying not to be clever and using simple recursive functions rather than stdlib magic. `parse xs m ns` parses `xs` by recording the (possibly empty) prefix already read in `m` while keeping the list of numbers already parsed in the accumulator `ns`.

If a parsing failure happens (non recognized character, two consecutive `,`, etc.) everything is thrown away and we return `nothing`.

```
module parseList where

open import Data.Nat
open import Data.List
open import Data.Maybe
open import Data.Char
open import Data.String

isDigit : Char → Maybe ℕ
isDigit '0' = just 0
isDigit '1' = just 1
isDigit '2' = just 2
isDigit '3' = just 3
isDigit _   = nothing

attach : Maybe ℕ → ℕ → ℕ
attach nothing  n = n
attach (just m) n = 10 * m + n

Quote : List Char → Maybe (List ℕ)
Quote xs = parse xs nothing []
  where
    parse : List Char → Maybe ℕ → List ℕ → Maybe (List ℕ)
    parse []         nothing  ns = just ns
    parse []         (just n) ns = just (n ∷ ns)
    parse (',' ∷ tl) (just n) ns = parse tl nothing (n ∷ ns)
    parse (hd ∷ tl)  m        ns with isDigit hd
    ... | nothing = nothing
    ... | just n  = parse tl (just (attach m n)) ns

stringListToℕ : String → Maybe (List ℕ)
stringListToℕ xs with Quote (toList xs)
... | nothing = nothing
... | just ns = just (reverse ns)

open import Relation.Binary.PropositionalEquality

test : stringListToℕ ("12,3") ≡ just (12 ∷ 3 ∷ [])
test = refl 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T17:35:23.207

Here is the Code from Vitus as a running example that uses the Agda Prelude

```
module Parse where

open import Prelude

-- Install Prelude
---- clone this git repo:
---- https://github.com/fkettelhoit/agda-prelude

-- Configure Prelude
--- press Meta/Alt and the letter X together
--- type "customize-group" (i.e. in the mini buffer)
--- type "agda2"
--- expand the Entry "Agda2 Include Dirs:"
--- add the directory 

open import Data.Product using (uncurry′)
open import Data.Maybe using ()
open import Data.List using (sequence)

splitBy : ∀ {a} {A : Set a} → (A → Bool) → List A → List (List A)
splitBy {A = A} p = uncurry′ _∷_ ∘ foldr step ([] , [])
  where
    step : A → List A × List (List A) → List A × List (List A)
    step x (cur , acc) with p x
    ... | true  = x ∷ cur , acc
    ... | false = []      , cur ∷ acc

charsToℕ : List Char → Maybe ℕ
charsToℕ []   = nothing
charsToℕ list = stringToℕ (fromList list)

notComma : Char → Bool
notComma c = not (c == ',')

-- Finally:

charListToℕ : List Char → Maybe (List ℕ)
charListToℕ = Data.List.sequence Data.Maybe.monad ∘ map charsToℕ ∘ splitBy     notComma

stringListToℕ : String → Maybe (List ℕ)
stringListToℕ = charListToℕ ∘ toList

-- Test

test1 : charListToℕ ('1' ∷ '2' ∷ ',' ∷ '3' ∷ []) ≡ just (12 ∷ 3 ∷ [])
test1 = refl

test2 : stringListToℕ "12,33" ≡ just (12 ∷ 33 ∷ [])
test2 = refl

test3 : stringListToℕ ",,," ≡ nothing
test3 = refl

test4 : stringListToℕ "abc,def" ≡ nothing
test4 = refl 
```

# sql - 提升以下简单 SQL 查询性能的技巧

> ID：11763642
> 
> 赞同：1
> 
> 时间：2012-08-01T16:30:52.487
> 
> 标签：sql, performance, sap-ase

我希望在提高`SQL`查询性能方面获得帮助。查询非常简单，但执行起来需要相当长的时间，所以我想了解一些关于如何增强查询的提示：

```
 SELECT
    *
  FROM
    SOME_DB_TABLE
  WHERE
    SUBSTRING(TIME, 1, 8)
  BETWEEN
    "20110101" AND "20111231"
  AND
    CONDITION_COL = "C"
  GROUP BY
    TIME
  ORDER BY
    TIME ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:48:05.177

substring 函数可能会减慢您的查询速度。

像下面这样的东西会起作用吗？

```
time >= "20110101" 
and time < "20120101" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:38:49.563

您应该像这样索引时间列：

`CREATE INDEX some_index ON SOME_DB_TABLE (TIME)`

这将使对该列的搜索更快。
另外，你真的需要每一列吗？使用`SELECT *`是

*   一个坏习惯
*   如果您采用不重要的列，则执行时间会很耗时

# javascript - 使用 TreeStore 和 TreePanel 更正 JSON 和模型

> ID：11763648
> 
> 赞同：3
> 
> 时间：2012-08-01T16:31:13.843
> 
> 标签：javascript, extjs4.1

我有一个来自服务器端的 JSON 字符串：

```
{"success":"true","total":"6","list":
  [{"id":"1","name":"folder1","parentid":"null","type":"0"},
   {"id":"2","name":"r1","parentid":"1","type":"1"},
   {"id":"3","name":"folder2","parentid":"1","type":"0"},
   {"id":"4","name":"r2","parentid":"3","type":"1"},
   {"id":"5","name":"r3","parentid":"null","type":"1"},
   {"id":"6","name":"folder3","parentid":"null","type":"0"}]} 
```

我怎么把它变成一棵树？谁能建议我如何获取列表中的元素（id、name、parentid、type）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T14:57:15.340

我使用了以下结构：

**模型**

```
Ext.define('MyApp.model.MyTreeModel', {
    extend: 'Ext.data.Model',
    fields: [
         'someStringIdentifier',
         'children',
         'dataForThisNode',
    ],
}); 
```

**店铺**

```
Ext.define('MyApp.store.MyTreeStore', {
    extend: 'Ext.data.TreeStore',
    model: 'MyApp.model.MyTreeModel',
    storeId: 'cubeDynamicStoreId',
    autoLoad: false,

    proxy: {
        type: 'ajax',
        api: {
            read : '/myapp/rest/myquery',
        },
        reader: {
            type: 'json',
            root: 'children',
            successProperty: 'success',
            idProperty: 'id',
        },
    },

    // bug in extjs4.1 autoLoad is ignored
    // specifying "loaded: true" resolves the problem
    root: {
        expanded: true,
        loaded: true,
    },
}); 
```

示例 JSON（使用[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)可视化）

使用叶子属性在任何节点停止扩展

```
{"children":{"leaf":false,"someStringIdentifier":"Total","dataForThisNode":{},"children":[{"leaf":true,"someStringIdentifier":"data1","dataForThisNode":{},"children":[{"leaf":false,"someStringIdentifier":"2012","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2013","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2014","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2015","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2016","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2017","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2018","dataForThisNode":{},"children":null}]},{"leaf":true,"someStringIdentifier":"data2","dataForThisNode":{},"children":[{"leaf":false,"someStringIdentifier":"2012","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2013","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2014","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2015","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2016","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2017","dataForThisNode":{},"children":null},{"leaf":false,"someStringIdentifier":"2018","dataForThisNode":{},"children":null}]}]},"success":true} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:31:44.773

让我们从商店定义开始：

```
Ext.define('app.store.Tasks', {

    extend: 'Ext.data.TreeStore',    
    model:  'app.model.Task',

    autoSync: true,
    autoLoad: true,

    root: {
        text: 'Root',
        id: 'NULL',
        expanded: true
    },
}); 
```

需要注意的重要一点是，我们在`TreeStore`这里进行了扩展。因此，我们的模型记录将用 包装`Ext.data.NodeInterface`，其中包括许多与树相关的字段（例如，`parentNode`）。

然后到模型定义：

```
Ext.define('app.model.Task', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'name'     , type: 'string'},

        {name: 'iconCls'  , type: 'string', defaultValue: 'treenode-no-icon'},
        {name: 'expanded' , type: 'boolean', defaultValue: true, persist: false},
        {name: 'index'     , type: 'int'},        
    ],

    proxy: {
        type: 'direct',

        api: {
            create:  Tasks.Create,
            read:    Tasks.Read,
            update:  Tasks.Update,
            destroy: Tasks.Destroy,
        },
    },

}); 
```

我们定义的唯一“真实”字段是`name`，所有其他字段都是`NodeInterface`:的一部分，`iconCls`默认值为无图标；`expanded`设置为`persist:false`折叠/展开节点不会导致更新服务器调用；`index`包含在内，因此如果用户重新排序节点（使用拖放），将进行服务器调用。

请注意，没有`id`字段，因为 aa 模型的默认`idProperty`值为`id`，ExtJS 足够聪明，可以判断如果您的 JSON 中有`id`字段 - 它表示记录的唯一 id。

另请注意，没有`parentId`字段 - 通过提供正确的 JSON（具有具有`children`属性的节点），计算`NodeInterface`出每个节点的正确性`parentNode`。

然后是 JSON：

```
{
    "success":true,
    "children":[
     {
        "id":"1",
        "name":"Home",
        "children":[
           {
              "id":"6",
              "name":"Emails",
              "leaf":true
           },
           {
              "id":"7",
              "name":"Bath",
              "leaf":true
           }
        ],
        "leaf":false
     },         
    ]
} 
```

差不多就是这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T21:55:48.467

Izhaki 对这个主题的第一个回答很好，但它似乎具有误导性，并且如果您期望看到节点的描述，它就不会按原样工作。我花了几个小时来解决这个问题。查看此描述的唯一方法是将“名称”重命名为“文本”。见下文。

```
Ext.define('app.model.Task', {
extend: 'Ext.data.Model',
fields: [
    {name: 'text'     , type: 'string'},

    {name: 'iconCls'  , type: 'string', defaultValue: 'treenode-no-icon'},
    {name: 'expanded' , type: 'boolean', defaultValue: true, persist: false},
    {name: 'index'     , type: 'int'},        
], 
```

# extjs - 将标头添加到 Ajax 请求

> ID：11763651
> 
> 赞同：13
> 
> 时间：2012-08-01T16:31:24.140
> 
> 标签：extjs, extjs4, extjs4.1

如何向 ExtJS ajax 请求添加请求标头？

我特别想添加标题：`accept-encoding`等于真。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T22:36:36.200

您可以像这样指定请求标头：

```
Ext.Ajax.request({
    url: 'yourUrl',
    headers: {
        'accept-encoding': 'true'
    }
})​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T20:50:44.030

您是否尝试过[**`headers`**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax-method-request)Ajax 请求中的配置：

```
Ext.Ajax.request({
    url: 'someURL',
    headers: {
        'accept-encoding': true
    }
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-31T19:58:48.643

如果要为*所有*Extjs ajax 请求添加标头：

```
Ext.Ajax.defaultHeaders = {
    'accept-encoding' : true
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-07T09:22:38.110

使用 ExtJs 6\. Ext.Ajax.defaultHeaders 不起作用。但是使用以下设置器有效

```
Ext.Ajax.setDefaultHeaders({
    'accept-encoding' : true
}); 
```

# r - 导入 DAT 文件 - 解析问题

> ID：11763652
> 
> 赞同：1
> 
> 时间：2012-08-01T16:31:28.600
> 
> 标签：r, import

我有一个制表符分隔的 DAT 文件，我想读入 R。当我使用 导入数据时`read.delim`，我的数据框的列数正确，但行数比预期的多。

我的数据文件代表对调查的回复。在深入挖掘之后，当有一个“。”时，R 似乎正在创建一个新记录。在代表开放式响应的列中。似乎有时受访者可能会点击“输入”来添加新行。

有没有办法解决这个问题？我阅读了帮助，但我不确定如何告诉 R 在字符响应中忽略该字符。

这是一个解析不正确的示例响应。这是一个响应，但您可以看到，当 R 解析时，有返回将其放在多行上。

```
possible ask for size before giving free tshirt.
 Also maybe have the interview in conference rooms instead of tight offices. I felt very cramped.
 I would of loved to have gone, but just had to make a choices and had more options then I expected. 
```

我正在使用 SPSS 分析数据，并且数据很好，但是，我需要使用 R 进行更高级的建模

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:35:32.540

有一个“na.strings”参数。您不提供任何测试用例，但也许您可以这样做：

```
read.delim(file="myfil.DAT", na.strings=".") 
```

我认为如果您可以对您的问题进行编辑以更好地说明问题，那将是一件好事。我无法通过简单的努力创建错误：

```
> read.delim(text="a\tb\t.\nc\td\te\n",header=FALSE)
  V1 V2 V3
1  a  b  .
2  c  d  e
> read.delim(text="a\tb\t.\nc\td\te\n",header=FALSE, na.strings=".")
  V1 V2   V3
1  a  b <NA>
2  c  d    e 
```

（在澄清上述评论不是特别相关之后。）这将引入一个包含换行符的字段....但它要求在原始文件中引用“字段”：

```
> scan(file=textConnection("'a\nb'\nx\t.\nc\td\te\n"), what=list("","","") )
Read 2 records
[[1]]
[1] "a\nb" "c"   

[[2]]
[1] "x" "d"

[[3]]
[1] "." "e" 
```

# asp.net - 与 C# 表达式一起使用时，ASP.NET 表达式 <%= ...%> 给出错误 CS 1518

> ID：11763654
> 
> 赞同：0
> 
> 时间：2012-08-01T16:31:33.543
> 
> 标签：asp.net, compiler-errors

我整个早上都在戳这个，我似乎找不到这样做的方法。

我有一个 Web 应用程序，它必须在它的一个 div-s 上显示一个工具提示。工具提示的内容来自一些数据库查询

< div style="height: 10px; clear: both;" title="<%=dbCount %> 本组中版本为 <%=devVersion %> 的设备">

这工作正常。

如果我尝试用`<%=dbCount %>`表达式替换：

```
< div style="height: 10px; clear: both;" title="<%=dbCount > 0 ? ""+dbCount : "No " %>  device(s) with version <%=devVersion %> in this group"> 
```

然后在 PageLoad 我得到一个异常 CS1518: Expected class, delegate, enum。

无论我如何构造表达式，是否放置括号，是否使用 String.Format 或三元表达式 - 除了仅使用变量名之外，任何类型的表达式都会导致错误。

我尝试用 <%# 替换 <%= 并尝试 <% Response.Write(dbCount>0 ? "some" : "none") %> 并得到相同的错误。这是我正在编辑的 aspx 中唯一的一行，因此错误是由它引起的，而不是页面上的其他地方。

我可以使用 <% if(...){ 构造，但是设计师在找到关闭的 div 时遇到了麻烦，我不想用太多垃圾污染源，我宁愿保留原始版本。

您知道为什么会出现编译器错误吗？如何防止它并使用输出表达式 <%= devCount>0?"some":"none" %>？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:43:51.900

所有这些变体在这里都运行良好，在 C# 示例中，我包括您提到的运行良好的案例：

在 VB.NET 中

标记：

```
<body>
    <form id="form1" runat="server">
    <div id="<%If dbCount = 1 Then%><%="22"%><%Else%><%="55"%><% End If%>">   
    <%=dbCount.ToString()%>
    </div>
    </form>
</body> 
```

代码隐藏：

```
Partial Class varIn
    Inherits System.Web.UI.Page

    Public dbCount As Short = 0

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

         If Not Page.IsPostBack Then
           dbCount = 1
         End If

    End Sub    
End Class 
```

在 C# 中

标记：

```
<div id="<%if (dbCount == 1) { %><%="22"%><%;}else{%><%="55"%><%;}%>">   
<%=dbCount.ToString()%>
</div> 
```

或者：

```
<div id="<%=dbCount > 0 ? ""+dbCount : "No " %>">   
<%=dbCount.ToString()%>
</div> 
```

代码隐藏：

```
public partial class _Default : System.Web.UI.Page 
{

    public short dbCount;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            dbCount = 1;            

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:45:06.983

我创建了一个测试网络应用程序，您的代码 (<%=dbCount > 0 ? ""+dbCount : "No " %>) 工作正常（我假设 "< div" 是一个错误类型）。我假设 dbCount 是一个 int 而 devVersion 是一个字符串。还有其他事情吗？dbCount 是调用方法的公共属性吗？它是一个公共变量吗？

您的应用程序中的 dbCount 是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:30:22.067

不要写这样的代码。Aspx 文件仅支持向后兼容。

如果你真的必须这样做，那么只写公共属性。

参考：[嵌入式代码块](http://msdn.microsoft.com/en-us/library/ms178135%28v=vs.80%29.aspx#Y0)

> ASP.NET 网页支持嵌入式代码块，主要是为了保持与旧 ASP 技术的向后兼容性。一般来说，将嵌入式代码块用于复杂的编程逻辑并不是最佳实践，因为当代码与标记混合在页面上时，可能难以调试和维护。此外，由于代码仅在页面的呈现阶段执行，因此在将代码范围限定到页面处理的适当阶段时，与使用代码隐藏或脚本块代码相比，您的灵活性要低得多。

也就是说，该链接确实向您展示了如何正确使用嵌入代码。

如果您真的必须这样做，请使用 Response.Write。

```
< div style="height: 10px; clear: both;" title="<% 
  { 
    string countMessage = dbCount > 0 ? ""+dbCount : "No "; 
    Response.Write(countMessage ); 
  }
%>  device(s) with version <%=devVersion %> in this group"> 
```

# c# - 在 C# 中使用 CultureInfo 对象的随机值

> ID：11763655
> 
> 赞同：-1
> 
> 时间：2012-08-01T16:31:37.727
> 
> 标签：c#, cultureinfo

我一直在查看以下链接

[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx)

但我仍然不明白如何使用 CultureInfo 类（例如“en”或“fr”......等）随机*检索有效的 2 个字母的文化值。*

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:34:52.497

（我不确定您究竟为什么想要这个，但是...）您可以使用[CultureInfo.GetCultures](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx)获得随机文化，然后从结果中随机选择：

```
var allCultures = CultureInfo.GetCultures(CultureTypes.AllCultures);
var random = new Random();
int index = random.Next(0, allCultures.Length);

var culture = allCultures[index];

string twoLetterCode = culture.TwoLetterISOLanguageName; 
```

请注意，这没有考虑到具有相同 2 个字母代码的文化不是偶数。这将在所有文化中随机选择，但不是通过 2 个字母代码均匀选择。如果你想要一个更随机的分布，你可以使用：

```
var uniqueCultureCodes = CultureInfo.GetCultures(CultureTypes.AllCultures)
                      .Select(c => c.TwoLetterISOLanguageName)
                      .Distinct()
                      .ToList();

var random = new Random();
int index = random.Next(0, uniqueCultureCodes.Count);

string twoLetterCode = uniqueCultureCodes[index]; 
```

这将创建两个字母代码的不同列表，然后从中随机选择。

* * *

编辑：如果您的目标只是创建一个`CultureInfo`给定的两个字母代码，例如“en”或“fr”，您可以这样做：

```
CultureInfo culture = new CultureInfo("en"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:44:22.847

如果您不关心该区域（ 的最后一部分`<language>-<region>`），您将需要使用：

```
CultureInfo[] languages = CultureInfo.GetCultures(CultureTypes.NeutralCultures); 
```

检索不同的语言。如果您使用：

```
CultureInfo[] cultures = CultureInfo.GetCultures(CultureTypes.AllCultures); 
```

英语比德语有更大的变化（英语文化比德语多）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T16:33:57.677

> 但我仍然不明白如何使用 CultureInfo 类（例如“en”或“fr”......等）随机创建一个有效的 2 字母文化值。

你的意思是你想得到一个随机的文化？只需[获取所有*有效*的文化](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx)，并从该集合中获取一个随机元素。（您可以使用[`System.Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)，但请注意[您需要处理的各种问题](http://csharpindepth.com/Articles/Chapter12/Random.aspx)。）

编辑：请注意，如果您*只想*从已知缩写中获取单一文化，我建议您使用[`CultureInfo.GetCultureInfo`](http://msdn.microsoft.com/en-us/library/yck8b540.aspx)而不是`CultureInfo`构造函数。这允许缓存，并为您提供几乎可以肯定是您想要的只读文化。（关于只读数据的推理更容易......）

# javascript - Javascript：为什么复制价值但不改变

> ID：11763657
> 
> 赞同：1
> 
> 时间：2012-08-01T16:31:41.563
> 
> 标签：javascript

我有这个设置器，但我不知道为什么设置值并且它不会改变：

```
 this.setHead = function(head){
        console.log('Head: x:'+this.getHead().getX()+' y:'+this.getHead().getY());
        console.log('temp Head: x:'+head.getX()+' y:'+head.getY());
        this.head = head;
        console.log('Head: x:'+this.getHead().getX()+' y:'+this.getHead().getY());
    } 
```

Chrome日志中的结果是：

```
Head: x:5 y:10 // old value
temp Head: x:1 y:7 //temporary value decide to copy
Head: x:5 y:10     // and the new valụe : NO CHANGE 
```

我已经阅读了 Javascript 通过引用传递对象，我不知道它与 Java 有什么不同。如果不是，我不知道为什么会这样。请告诉我。

谢谢 ：）

@已编辑：我为日志添加了一行，并看到了奇怪的结果：

```
console.log('Head: x:'+this.head.getX()+' y:'+this.head.getY());
Head: x:1 y:7 
```

这很奇怪，因为我认为它应该与下面的行相同，但事实并非如此

> console.log('头：x:'+this.getHead().getX()+'y:'+this.getHead().getY());

我`getHead()`的是：

```
this.getHead = function() {
            return head;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:47:40.000

Javascript不会通过引用传递任何东西，设置`this.head`不会神奇地`head`引用其他东西（这就是引用所暗示的）

您的`.getHead()`方法返回`head`, not `this.head`，因此分配根本不会影响`getHead()`。它们指的是不同的对象。

尝试这个：

```
this.getHead = function() {
    return this.head;
} 
```

* * *

基本上你所拥有的最有可能：

```
function Ctor( head ) {

    this.getHead = function() {
        return head;
    }

    this.setHead = function( head ) {
        this.head = head;
    }

} 
```

`setHead`set 对象属性，其中 as`getHead`返回`head`初始化时传递给构造函数的变量。

为了避免这种混淆，您应该只使用对象属性和原型，这一切都非常简单：

```
function Ctor( head ) {
    this.head = head;
}

Ctor.prototype.getHead = function() {
    return this.head;
};

Ctor.prototype.setHead = function(head) {
    this.head = head;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:39:59.123

```
var o = function(){
  var self = this; // assign 'this' function to a variable
                   // so that it can be accessed in child functions
  var head = {};

  this.getHead = function(){
   ...
   return self.head;
  }
  this.setHead = function(head){
   ...
   self.head = head;
  }
} 
```

# vba - 如何让多个数据透视表在 Excel 中仅在该工作表上模仿另一个过滤器（报告和行标签）？

> ID：11763659
> 
> 赞同：1
> 
> 时间：2012-08-01T16:31:41.553
> 
> 标签：vba, excel, pivot-table

所以我在excel的一张表上有多个数据透视表。我在行标签中有很长的月份列表。报告过滤器可按名称过滤。枢轴中的所有列都只是数据的总和。

我正在寻找的（我猜宏是唯一的方法），是一种能够更改该工作表上一个枢轴的过滤器并仅更新其他枢轴的方法表来模仿我更改的过滤器（报告和行标签）。其他数据透视表中的任何其他内容都不应更改 - 只是过滤器。

不幸的是，我对 vba 编码一无所知（我知道一些 java 和东西，但我从未做过任何宏编码）。我能够从互联网上复制一个宏，它完成了我需要的部分工作；它会更新报告过滤器，但不会更新行标签过滤器中的日期。这是它的编码：

```
Option Explicit
Private Sub Worksheet_PivotTableUpdate(ByVal Target As PivotTable)
On Error Resume Next
Dim wsMain As Worksheet
Dim ws As Worksheet
Dim ptMain As PivotTable
Dim pt As PivotTable
Dim pfMain As PivotField
Dim pf As PivotField
Dim pi As PivotItem
Dim bMI As Boolean

On Error Resume Next
Set wsMain = ActiveSheet
Set ptMain = Target

Application.EnableEvents = False
Application.ScreenUpdating = False

'change all fields for all pivot tables on active sheet

For Each pfMain In ptMain.PageFields
    bMI = pfMain.EnableMultiplePageItems
        For Each pt In wsMain.PivotTables
            If pt <> ptMain Then
                pt.ManualUpdate = True
                Set pf = pt.PivotFields(pfMain.Name)
                        bMI = pfMain.EnableMultiplePageItems
                        With pf
                            .ClearAllFilters
                            Select Case bMI
                                Case False
                                    .CurrentPage = pfMain.CurrentPage.Value
                                Case True
                                    .CurrentPage = "(All)"
                                    For Each pi In pfMain.PivotItems
                                        .PivotItems(pi.Name).Visible = pi.Visible
                                    Next pi
                                    .EnableMultiplePageItems = bMI
                            End Select
                        End With
                        bMI = False

                Set pf = Nothing
                pt.ManualUpdate = False
            End If
        Next pt
Next pfMain

Application.EnableEvents = True
Application.ScreenUpdating = True

End Sub 
```

反正有没有做我想做的事？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:44:58.733

在没有看到您的数据透视表的情况下，您似乎对上述代码所需要做的就是重复设置数据透视字段值以反映日期的步骤。这是通过添加由以下行设置的循环的变体来完成的：

```
 set pf = pt.pivotfields(pfmain.name) 
```

至

```
 set pf = pt.pivotfields(pfmain.nameofyourrowfiltervariable) 
```

完整的代码如下，我也会避免错误恢复下一个

```
 Option Explicit
    Private Sub Worksheet_PivotTableUpdate(ByVal Target As PivotTable)
    On Error Resume Next
    Dim wsMain As Worksheet
    Dim ws As Worksheet
    Dim ptMain As PivotTable
    Dim pt As PivotTable
    Dim pfMain As PivotField
    Dim pf As PivotField
    Dim pi As PivotItem
    Dim bMI As Boolean

    On Error Resume Next
    Set wsMain = ActiveSheet
    Set ptMain = Target

    Application.EnableEvents = False
    Application.ScreenUpdating = False

    'change all fields for all pivot tables on active sheet

    For Each pfMain In ptMain.PageFields
        bMI = pfMain.enablemultiplepageitems
        For Each pt In wsMain.PivotTables
          If pt <> ptMain Then
            pt.ManualUpdate = True
            Set pf = pt.PivotFields(pfMain.Name)
                    bMI = pfMain.EnableMultiplePageItems
                    With pf
                        .ClearAllFilters
                        Select Case bMI
                            Case False
                                .CurrentPage = pfMain.CurrentPage.Value
                            Case True
                                .CurrentPage = "(All)"
                                For Each pi In pfMain.PivotItems
                                    .PivotItems(pi.Name).Visible = pi.Visible
                                Next pi
                                .EnableMultiplePageItems = bMI
                        End Select
                    End With
                    bMI = False

               Set pf = pt.pivotfields(pfMain.nameofdatevariable)
               dates = pfMain.enablemultiplepageitems
               with pf
                   .clearallfilters
                   select case dates
                       case false
                               .currentpage = pfmain.currentpage.value
                       case true
                               .currentpage = "(All)"
                               for each pi in pfmain.pivotitems
                                    .pivotitems(pi.nameofdatevariable).visible = pi.visible
                                next pi
                                .enablemultiplepageitems = dates
                       end select
               end with
               date = false
               set pf = nothing
               pt.ManualUpdate = False
           End If
       Next pt
   Next pfMain

  Application.EnableEvents = True
  Application.ScreenUpdating = True

  End Sub 
```

试试看它是否有效我没有测试过这个

# regex - Apache ModRewrite 正则表达式

> ID：11763669
> 
> 赞同：0
> 
> 时间：2012-08-01T16:32:09.813
> 
> 标签：regex, mod-rewrite

这是我想做的：

```
/gestion/aa/       => /gestion/aa.php
/gestion/bb/       => /gestion/bb.php
/gestion/a/b/      => /gestion/a/b.php
/gestion/a/b/c/    => /gestion/a/b/c.php 
```

* * *

```
/cmd/aa/           => /cmd/aa.php
/cmd/bb/           => /cmd/bb.php
/cmd/a/b/          => /cmd/a/b.php
/cmd/a/b/c/        => /cmd/a/b/c.php 
```

* * *

```
/json/aa/          => /json/aa.php
/json/bb/          => /json/bb.php
/json/a/b/         => /json/a/b.php
/json/a/b/c/       => /json/a/b/c.php 
```

这让我想到了这个简单的正则表达式：

```
^/(gestion|cmd|json)/(([^/]+/)*)$ /$1/$2.php [QSA,L] 
```

问题是它`$2`总是**在**内部`/`，所以结果是：

```
/json/aa/          => /json/aa/.php
/json/bb/          => /json/bb/.php
/json/a/b/         => /json/a/b/.php
/json/a/b/c/       => /json/a/b/c/.php 
```

知道如何获得正确的正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:34:53.250

`^/(gestion|cmd|json)/(.+)/$ /$1/$2.php [QSA,L]`应该做的伎俩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:37:26.773

用这个：

```
^(gestion|cmd|json)(/.*)/$ /$1$2.php 
```

# windows-phone-7 - WP7 mp3 波形

> ID：11763671
> 
> 赞同：0
> 
> 时间：2012-08-01T16:32:11.720
> 
> 标签：windows-phone-7, mp3, waveform, mediastreamsource

有没有办法在 WP7 中显示 mp3 歌曲的波形？我尝试使用 MediaStreamSource，但没有真正解决。

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:20:36.073

没有库存组件可以做到这一点。此时您最好的选择是构建您自己的，因为您正在直接从您正在谈论的 MP3 文件中读取频率。

# spring - 在 Spring MVC 中使用会话属性

> ID：11763676
> 
> 赞同：0
> 
> 时间：2012-08-01T16:32:22.967
> 
> 标签：spring, jsp, session

我正在使用 Spring MVC 开发一个 Web 应用程序。我只想要一个简单的例子来说明如何进行会话管理。我看过很多论坛，但我无法清楚地了解这一点

我的要求是

我有一个对象，我想在所有控制器和 JSP 中都可以访问它我想在控制器中设置它并在 JSP 中获取它

我正在寻找类似的东西

```
 Session.setAtribute(); 
```

你能告诉我一个非常简单的例子吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:44:34.957

在 Spring MVC 中有多种访问 servlet 会话的方法。但我认为这个是最适合你的问题的一个。您可以创建一个会话范围的 bean，其中包含您想要的信息：

```
@Component("myObjectHolder")
@Scope(WebApplicationContext.SCOPE_SESSION)
public class MyObjectHolderImpl implements MyObjectHolder {

    private long userId;
    private String username;
    private Theme theme;

    // Getters & Setter
} 
```

然后，您可以从其他 bean 访问它：

```
@Controller
public class MyController {

    @Autowired private MyObjectHolder myObjectHolder;

    @RequestMapping
    public ModelAndView switchTheme(String themeId) {
        ...
        Theme newTheme = themeService.get(themeId);
        myObjectHolder.setTheme(newTheme);      
        ...
    }

} 
```

您也可以直接从您的视图中访问，但您必须对其进行配置：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    ...
    <property name="exposedContextBeanNames" value="myObjectHolder" />
</bean> 
```

在您的 JSP 中：

```
Hi ${myObjectHolder.username}, you switched 
application theme to ${myObjectHolder.theme.name} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:38:39.440

最简单的方法是`HttpSession`通过将其注入您的处理程序方法来直接访问：

```
@RequestMapping("/page")           
public ModelAndView page(HttpSession session) {           
    session.getAttribute("foo");
} 
```

# mysql - Doctirne 查询生成器，按生日过滤（使用 DateTime）？

> ID：11763678
> 
> 赞同：1
> 
> 时间：2012-08-01T16:32:40.360
> 
> 标签：mysql, sql, datetime, doctrine-orm

我有一个构建器，用于选择电话号码 not `null`、权限标志`true`（在第一个构建器调用中）以及生日模板不在`null`此函数中的人。还有一个`birthday`字段：

```
public function getAllForBirthdaySmsSend()
{
    $qb    = $this->getAllSuitableForSmsQueryBuilder();
    $alias = $qb->getRootAlias();
    $today = new \DateTime();

    return $qb->andWhere(
            $qb->expr()->andX(
                $qb->expr()->isNotNull("$alias.sms_birthday_template"),
                /* Filter if today is his birthday */
            ))
    ;
} 
```

现在我应该按生日过滤人，也就是说，如果生日列格式化为`'m-d-' . date('Y')`equals `$today`。

任何人都知道如何使用查询生成器来做到这一点？我不想编写纯 SQL 查询，但我更喜欢重用其他查询生成器来干燥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:05:01.460

您可以使用本机 sql 然后对其进行映射以处理使用 og 的真实实体`ResultSetMapping`。诅咒，YEAR 被忽略：

映射查询字段：

```
$rsm = new Doctrine\ORM\Query\ResultSetMapping;

    $rsm->addEntityResult('models\User', 'u');
    $rsm->addFieldResult('u', 'id', 'id');
    $rsm->addFieldResult('u', 'username', 'username');
    $rsm->addFieldResult('u', 'birthday', 'birthday'); 
```

使用本机日期函数创建查询（现在每个选定的列都已映射）：

```
$query = $this->doctrine->em->createNativeQuery('
    SELECT id, username, birthday 
    FROM user 
    WHERE  TIMESTAMPDIFF(YEAR, birthday, CURRENT_DATE)
    > TIMESTAMPDIFF(YEAR, birthday, CURRENT_DATE - INTERVAL 1 DAY)', $rsm); 
```

获取用户：

```
$users = $query->getResult(); 
```

**提示**：当您想要进行查询时，尽量避免转换列值。它强制 MySQL（如果是你的情况）在执行比较之前将列转换为 CHAR 并改变性能。

**编辑**生日列是日期时间类型。并且用户模型的 birtdate 属性映射为`\DateTime object`

# ruby-on-rails - RoR - 所有模型的全局方法

> ID：11763679
> 
> 赞同：2
> 
> 时间：2012-08-01T16:32:44.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个小问题要理解我应该在哪里添加一个所有模型都可以访问它的方法。我阅读了其他类似的帖子，但不清楚在哪里添加。他们中的一些人说把它作为一个模块添加到“/lib”上，然后将它包含在模型类中（已经尝试过这个没有运气）。那么添加这个的最佳实践是什么？

我正在尝试以下操作：

我的模块在：**/lib/search.rb**

```
module Search     
   def self.search(params,columns_search)
        srch = params[:search]

        if srch.blank?
          scoped
        else
          search= []
          #Add conditions for the search
          columns_search.map do |column|
            search << (sanitize_sql_for_conditions ["LOWER(CAST(#{column} as TEXT)) LIKE ?", "%#{srch.downcase}%"])
         end

          where("(#{conditions.join(" and ")})")

    end
end 
```

在我的模型**car.rb**

```
class Cars < ActiveRecord::Base
  include Search

  attr_accessible :name

end 
```

但我在控制台上收到以下错误：

> 在 2012-08-01 11:56:54 -0500 开始为 127.0.0.1 获取“/cars”
> 
> ActionController::RoutingError (未初始化常量 Car::Search): app/models/car.rb:2:in `'

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T16:42:12.890

您提到的技术似乎是一种合理的方法 - 创建一个模块（可能会存在`/lib`），定义您希望模型具有的方法，然后将其包含在需要它的每个模型中。

例如，我当前的项目有图像、视频和音频，所有这些都有一定的方法应该可供他们使用，因为它们都是媒体类型。我定义了一个模块`lib/media.rb`：

```
module Media
  def self.included(base)
    # Associations etc. go here
    base.has_many :things
    base.mount_uploader :image, ImageUploader
    base.attr_accessible :image
    base.before_save :do_something
  end

  def do_something(argument=nil)
    #stuff
  end

end 
```

然后在每个媒体模型中，我将其包括在内：

```
class Video < ActiveRecord::Base
  include Media

end 
```

然后我可以调用`Video.first.do_something`，就像在模型中定义了方法一样。

# sql - 在数据库架构中加入表？

> ID：11763681
> 
> 赞同：0
> 
> 时间：2012-08-01T16:33:02.157
> 
> 标签：sql, database-design, ms-access-2007, jointable

我一直在研究一个数据库应用程序（Access 2007）并且有几个关于架构的问题。这是迄今为止我编写的最复杂的应用程序。

我目前有 5 个表，每个表都有自己唯一的 ID 字段：

*   平台
*   车辆
*   手册
*   程序
*   故障

同一个故障可能出现在多个程序中，同一个程序可能出现在多个手册中。我想为用户提供复制和删除记录的机会，以及表之间的交叉链接记录。

目前，我在上面列出的每个表之间都有连接表，

*   平台_车辆
*   车辆手册
*   manuals_procedures
*   程序故障

编辑主表之间的关系（通过编辑连接表的内容）变得相当复杂，因为复制和删除操作对其他表有级联影响。在我看来，这可以使用递归有效地执行，但实际上让它工作完全是另一回事。

问题 #1：我描述的架构是安排这些数据的“好”方式，还是不必要地复杂？（我有这样做的习惯。）

问题 #2：是否有“首选”方法来执行此操作？

问题 #3：我最好以不同的方式组织表格，例如：

只有5张桌子，

*   平台
*   车辆
*   手册
*   程序
*   故障

每个表都有一个用于其内容字段的键，以及另一个表示其在下一个更高表中的父记录的键。例如，

*   平台
*   平台ID、平台名称
*   车辆
*   平台ID、车辆ID、车辆名称
*   手册
*   车辆 ID、手册 ID、手册名称
*   ...

这对我来说似乎更简单，当然也不那么复杂。如果大家愿意提供一些专业的反馈，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:05:48.940

您需要使用 MS Access 的关系工具来设置参照完整性规则。这样，您可以自动级联删除和更新。我会避免“连接表”，因为只要父键在表中（称为外键），它们就是不必要的。

# jquery - jquery datepicker上的自定义动态验证直到第二个焦点才起作用

> ID：11763683
> 
> 赞同：3
> 
> 时间：2012-08-01T16:33:13.543
> 
> 标签：jquery, validation, datepicker

我有一个带有验证的日期选择器，它会弹出一条消息和“！” 直到用户选择一个日期 - 然后它显示一个“O”代替“！” 并且一部分弹出窗口停留在屏幕上，表明您已完成此字段。

我遇到的问题是验证弹出窗口不会停留在屏幕上，直到您第二次将焦点放在日期选择器文本字段上。

使用验证 jquery 它有很多代码，所以我真的不想在这里全部包含它，但这里有一个[jsfiddle](http://jsfiddle.net/LeXHE/)

有什么想法为什么它不是第一次运行而是后续运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T21:42:35.563

看起来好像`blur()`在选择和验证日期之前被调用。这是一个简单的解决方案：选择有效日期时淡入“O”，而不是模糊。

**[工作 JSFiddle 演示](http://jsfiddle.net/bmgonzal/LeXHE/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:25:53.217

问题存在于您的`inputElementBlur(e)`函数中。具体来说，你打电话

```
if (!$(e).attr("required") && ($(e).val() == "" 
         || $(e).val() == $(e).attr("defaultValue"))) {
        alert('sniarf!');
        $(blurredElement).next("div.tooltipContainer").find("span.formValid").fadeOut(100);
    } 
```

我在那里添加了警报，以便您可以*看到*代码的行为。我看到，当`defaultValue`您在验证逻辑中使用该属性时，您实际上并没有在设置值时更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T10:23:59.287

There is no such thing as `"defaultValue"` attribute. It's a DOM property. Fixing that made the O appear after first pickings:

[http://jsfiddle.net/LeXHE/9/](http://jsfiddle.net/LeXHE/9/)

Then there was some logic error with:

```
if (!$(e).attr("required") && ($(e).val() == "" || $(e).val() === $(e).prop("defaultValue"))) {
    $(blurredElement).next("div.tooltipContainer").find("span.formValid").fadeOut(100);
} 
```

Which I changed to:

```
if (!$(e).attr("required") && $(e).val() == "") {
    $(blurredElement).next("div.tooltipContainer").find("span.formValid").fadeOut(100);
} 
```

# javascript - 水平菜单子菜单

> ID：11763685
> 
> 赞同：0
> 
> 时间：2012-08-01T16:33:48.333
> 
> 标签：javascript, jquery, html, css, menu

我有一个水平列表菜单和每个菜单项的另一个水平列表子菜单。现在，当页面第一次加载时，如果我将鼠标移开或将鼠标悬停在其他顶部菜单项上，第一个顶部菜单及其子菜单和其他顶部菜单应该会显示并保持打开状态。当我将鼠标悬停在其他菜单上时，应显示其相应的子菜单。

有人可以告诉我如何仅使用 javascript 或 jquery 或 css 来做到这一点吗？

```
<div id="mytabs1" class="basictab">
    <ul>
        <li class="basictab1" id="li1"><a id="link1" href="http://mysite/Benefits.aspx" rel="sc1" >Benefits</a></li>
        <li class="basictab1" id="li2"><a id="link2" href="http://mysite/BESTPlan.aspx" rel="sc2">BEST Plan</a></li>
        <li class="basictab1" id="li3"><a id="link3" href="http://mysite/Insurance.aspx" rel="sc3">Insurance</a></li>
    </ul>
</div>

<DIV class="tabcontainer">
    <div id="sc1" class="tabcontent">
        <ul>
        <li><a id="link1-1" href="http://test.com">Link 1a</a></li>
        <li><a id="link1-2" href="http://test.com">Link 1b</a></li>
        </ul>
    </div>  
    <div id="sc2" class="tabcontent">
        <ul>
        <li><a id="link2-1" href="http://test.com">Link 2a</a></li>
        <li><a id="link2-2" href="http://test.com">Link 2b</a></li>
        </ul>
    </div>  
    <div id="sc3" class="tabcontent">
        <ul>
        <li><a id="link3-1" href="http://test.com">Link 3a</a></li>
        <li><a id="link3-2" href="http://test.com">Link 3b</a></li>
        </ul>
    </div>  
</DIV> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:45:11.510

这是一个为您指明正确方向的示例。

```
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <style>
            ul, li
            {
                display: block;
            }
            .sublinks
            {
                display: none;
            }
        </style>
    </head>
    <body>
        <div id="mytabs1" class="basictab">
            <ul>
                <li class="basictab1" id="li1">
                    <a id="link1" href="http://mysite/Benefits.aspx" rel="sc1" >Benefits</a>
                    <ul class="sublinks">
                        <li><a id="link1-1" href="http://test.com">Link 1a</a></li>
                        <li><a id="link1-2" href="http://test.com">Link 1b</a></li>
                    </ul>
                </li>
                <li class="basictab1" id="li2">
                    <a id="link2" href="http://mysite/BESTPlan.aspx" rel="sc2">BEST Plan</a>
                    <ul class="sublinks">
                        <li><a id="link2-1" href="http://test.com">Link 2a</a></li>
                        <li><a id="link2-2" href="http://test.com">Link 2b</a></li>
                    </ul>
                </li>
                <li class="basictab1" id="li3"><a id="link3" href="http://mysite/Insurance.aspx" rel="sc3">Insurance</a></li>
            </ul>
        </div>
        <script>
            $('.basictab1').hover(function()
            {
                $(this).find('ul').toggle();
            });
        </script>
    </body>
</html> 
```

# mysql - pma_history 创建错误

> ID：11763686
> 
> 赞同：0
> 
> 时间：2012-08-01T16:33:48.440
> 
> 标签：mysql, sql, phpmyadmin

从文档中，我正在创建`pma_history`表格。

这是唯一`scripts/create_tables.sql`失败的部分：

```
CREATE TABLE IF NOT EXISTS `pma_history` (
  `id` bigint(20) unsigned NOT NULL auto_increment,
  `username` varchar(64) NOT NULL default '',
  `db` varchar(64) NOT NULL default '',
  `table` varchar(64) NOT NULL default '',
  `timevalue` timestamp(14) NOT NULL,
  `sqlquery` text NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `username` (`username`,`db`,`table`,`timevalue`)
)
  ENGINE=MyISAM COMMENT='SQL history for phpMyAdmin'
  DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 
```

这是服务器所说的：

```
#1064 - You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use
near '(14) NOT NULL, `sqlquery` text NOT NULL, PRIMARY KEY (`id`), 
KEY `user' at line 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:36:16.757

`timestamp`离开列的长度

```
`timevalue` timestamp NOT NULL 
```

> 在 4.1 版本之前，MySQL 检索和显示 TIMESTAMP 值的格式取决于显示大小

取自[这里](http://dev.mysql.com/doc/refman/4.1/en/timestamp-pre-4-1.html)

# java - 单击按钮在 IE9 中不起作用，但没有错误消息（它在 chrome 中起作用）

> ID：11763688
> 
> 赞同：0
> 
> 时间：2012-08-01T16:33:53.450
> 
> 标签：java, javascript, html

我想试试[这个小程序。](http://www.openoces.org/demo/entrance_opensign.html)

当单击按钮继续时，`IE`它不起作用，而在`chrome`它起作用。

为什么？没有错误信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:38:07.333

在您的 JavaScript 控制台（在 IE9 中）中，您会收到错误消息。

> 对象不支持属性或方法“修剪”

IE < 9 不支持`String.prototype.trim`. 您的页面在“Quirks 模式”下运行，这意味着它的运行方式就像在旧版本的 IE 中一样。

尝试通过将其添加到以下内容来强制 IE 以正确的模式运行页面`<head>`：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

您还应该在页面中添加一个[文档类型](http://en.wikipedia.org/wiki/Document_Type_Declaration)。这是 HTML5 的（把它放在页面顶部（之前`<html>`）：

```
<!DOCTYPE html> 
```

# html - 我如何等待使用 idHTTP 加载 Ajax？

> ID：11763701
> 
> 赞同：2
> 
> 时间：2012-08-01T16:34:40.360
> 
> 标签：html, ajax, delphi, indy

我使用 IdHTTP.get 来获取 url 的 HTMl，但是在这个 url 中是一个使用 ajax 加载的表，我必须等待几秒钟才能加载它并在它获取页面的 HTML 之后。

我可以等吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:56:07.373

Ajax 使用客户端脚本向服务器发送后台 HTTP 请求并操作浏览器中已加载的 HTML 页面。 `TIdHTTP`将下载原始 HTML 数据，但是如果您希望它执行某些操作，则必须自己执行 Ajax 脚本并自己发送这些额外请求。 `TIdHTTP`（以及一般的 Indy）无法为您处理 Ajax。

# php - array_walk 参数用户数据已修改

> ID：11763705
> 
> 赞同：0
> 
> 时间：2012-08-01T16:34:54.420
> 
> 标签：php, segmentation-fault

我在我的应用程序中发现了一些奇怪的东西。

很难描述我的概率，因为我无法与您分享可复制的样本。

主要问题是关于 array_walk 函数的第三个参数。

```
$row = array("user_id" => 1, "first_name" => "bobby");
$data = array("user_id" => "fc_name", "first_name" => "fc2_name", "email" => "fc3_name");
$res = array_walk( $row, 'fu', $aParams);

function fu(&$cell, $key, $data) {
    return call_user_func_array($data[$cell], array($cell, $key, $data));
} 
```

当我运行脚本时，它被中止而没有错误。调试后发现$data被修改，变成了递归数组。

```
Array
 *RECURSION* 
```

我无法理解 $data 在通过 copy 传递时如何修改？我知道您没有关于执行的所有信息，并且在 call_user_func_array 中还有许多其他调用。

谢谢

PS：我用 Xdebug 记录所有跟踪，但我找不到奇怪的东西。

* * *

**UPDATE1**：如果我在 foreach 循环中翻译 array_walk 没问题

**UPDATE2**：Update1 让我明白问题不是纯粹的 PHP 代码，我为什么要寻找“堆栈溢出”（真正的 :)）或段错误。我在官方 php 错误报告[https://bugs.php.net/bug.php?id=61730](https://bugs.php.net/bug.php?id=61730)上发现了这个错误，我的 php 版本不固定（5.3.2）我检查了我的 array.c。这个场景很接近我的，所以我会尽可能更新 php（企业流程......）。

我期待很多这个修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:22:42.327

PHP bug [https://bugs.php.net/bug.php?id=61730](https://bugs.php.net/bug.php?id=61730)修复在 php 5.3.10 刚刚更新了 php

# ruby-on-rails - 服务器崩溃，我重新启动，现在设计坏了？

> ID：11763711
> 
> 赞同：0
> 
> 时间：2012-08-01T16:35:15.577
> 
> 标签：ruby-on-rails, ruby, devise

我正在开发一个封闭的博客和讨论网络式应用程序，一切都很好；设计，cancan，登录，一切正常。当我正在调整实现用户/关系模型以关注其他用户时，服务器崩溃了。这是运行服务器的控制台的结果。希望它不会显示我是多么混乱的编码器。我不知道这个粘贴有多少是相关的，但实际的崩溃是在最底部。

```
Started GET "/user/dyylannnn" for 127.0.0.1 at Wed Aug 01 12:12:48 -0400 2012

SQLite3::ConstraintException (columns follower_id, followed_id are not unique):
  activerecord (3.2.7) lib/active_record/connection_adapters/sqlite_adapter.rb:69:in `close'
  activerecord (3.2.7) lib/active_record/connection_adapters/sqlite_adapter.rb:69:in `dealloc'
  activerecord (3.2.7) lib/active_record/connection_adapters/sqlite_adapter.rb:58:in `clear'
  activerecord (3.2.7) lib/active_record/connection_adapters/sqlite_adapter.rb:57:in `each'
  activerecord (3.2.7) lib/active_record/connection_adapters/sqlite_adapter.rb:57:in `clear'
  activerecord (3.2.7) lib/active_record/connection_adapters/sqlite_adapter.rb:144:in `clear_cache!'
  activerecord (3.2.7) lib/active_record/connection_adapters/sqlite_adapter.rb:138:in `disconnect!'
  activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:151:in `clear_reloadable_connections!'
  activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:149:in `each'
  activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:149:in `clear_reloadable_connections!'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
  activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:147:in `clear_reloadable_connections!'
  activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:386:in `clear_reloadable_connections!'
  activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:386:in `each_value'
  activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:386:in `clear_reloadable_connections!'
  activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_specification.rb:186:in `__send__'
  activerecord (3.2.7) lib/active_record/connection_adapters/abstract/connection_specification.rb:186:in `clear_reloadable_connections!'
  activerecord (3.2.7) lib/active_record/railtie.rb:96:in `_callback_before_3'
  activesupport (3.2.7) lib/active_support/callbacks.rb:429:in `_run__2144987145__prepare__4__callbacks'
  activesupport (3.2.7) lib/active_support/callbacks.rb:405:in `send'
  activesupport (3.2.7) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.7) lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
  activesupport (3.2.7) lib/active_support/callbacks.rb:81:in `send'
  activesupport (3.2.7) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.7) lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
  actionpack (3.2.7) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (3.2.7) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.7) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.7) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.7) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.7) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.7) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.7) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.7) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.7) lib/rails/engine.rb:479:in `call'
  railties (3.2.7) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.7) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
  rack (1.4.1) lib/rack/handler/webrick.rb:13:in `run'
  rack (1.4.1) lib/rack/server.rb:265:in `start'
  railties (3.2.7) lib/rails/commands/server.rb:70:in `start'
  railties (3.2.7) lib/rails/commands.rb:55
  railties (3.2.7) lib/rails/commands.rb:50:in `tap'
  railties (3.2.7) lib/rails/commands.rb:50
  script/rails:6:in `require'
  script/rails:6

  Rendered /Library/Ruby/Gems/1.8/gems/actionpack-3.2.7/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.2ms)
  Rendered /Library/Ruby/Gems/1.8/gems/actionpack-3.2.7/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Library/Ruby/Gems/1.8/gems/actionpack-3.2.7/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (13.5ms)
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.7/lib/active_record/connection_adapters/sqlite_adapter.rb:69: [BUG] Segmentation fault
ruby 1.8.7 (2009-06-12 patchlevel 174) [universal-darwin10.0]

Abort trap 
```

所以我就像“嗯，这很奇怪”，然后重新启动了服务器，但现在一切都坏了。肇事者似乎是设计者。如果不是'current_user 不是未定义的局部变量或方法'，那是我的导航栏（bootstrap ftw）中的设计实现也被破坏了。但是，无论出现什么错误，我网站上的每个页面都已损坏，而且似乎都与设计有关。

我做这个项目是为了让自己熟悉 Rails，我非常喜欢它，但我还是新手，我不知道 wtf 刚刚发生。帮助？我可以粘贴你们可能要求的任何其他代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:16:00.357

你可能有一个损坏的宝石。尝试

```
bundle exec gem uninstall <devise gem name> 
```

对于您使用的任何版本的设计。然后`bundle install`再次运行。这应该卸载并重新安装设计 gem。

如果这不起作用，您可以尝试将存储库克隆到新目录的蛮力方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:29:35.913

如果它是您的开发机器，请尝试重新创建数据库

```
rake db:drop
rake db:create 
```

# javascript - JavaScript - 将复选框计算添加到总价中

> ID：11763716
> 
> 赞同：2
> 
> 时间：2012-08-01T16:35:24.333
> 
> 标签：javascript, checkbox, quotes

好的，所以我是一个初学者（一天前开始了这段旅程），慢慢地自学了 javascript，我为一个简单的报价器编写了一个代码......但现在我试图在它的基础上进行构建。我知道代码的格式真的很糟糕（我不知道空格应该去哪里以及那些括号：S）但是我想出的工作......间距和东西对程序很重要吗？或者是出于美学原因和易于调试等...

所以我的报价......它有一些关于总价格、时间、镜头和 DVD 的方程......它们都是输入字段，现在我想在方程中添加复选框......如果它们被选中一个值将被添加到总数中...我将它们放在计算器中，但没有附加脚本...只有三个复选框具有设定值 ...2 个复选框将具有乘以 dvd 数量的值在被添加到总数之前......最后一个复选框将是另一个类似于我已经拥有的文本输入......

我尝试了很多东西，比如另一个函数，但它可能还是做错了大声笑，我尝试了另一个计算函数、加法函数、updatecost 函数、一些 chkbox 函数（我忘记了名字）......但我不知道如何得到计算的值在该复选框的函数中，进入计算函数的方程。我尝试了 parsefloat 的东西，如果我检查了值，它只会半工作......

我尝试的另一件事是在输入复选框的值之前放置一个输入隐藏值 0，两者都具有相同的名称...一些研究告诉我，如果未选中该复选框，它将默认为我设置的隐藏值相同的名称（即 0）...它不起作用...或者我可能没有在等式中输入它...请指导我正确的方向 :) 我正要拔掉我的头发！！！

[http://jsfiddle.net/yetanothercoder/uFD3y/](http://jsfiddle.net/yetanothercoder/uFD3y/)

```
<html>

<head>
    <style type="text/css">
        .tableheader {
            font-weight: bold;
            font-size: 20px;
            font-family: calibri;
            text-align: center;
        }
        .regreelfont {
            font-size: 15px;
            font-family: calibri;
            text-align: right;
            background-color: #96C6FF;
        }
        .supreelfont {
            font-size: 15px;
            font-family: calibri;
            text-align: right;
            background-color: #7CB8FF;
        }
        .sixreelfont {
            font-size: 15px;
            font-family: calibri;
            text-align: right;
            background-color: #55A1FE;
        }
        .bottomfonts {
            font-family: calibri;
            font-size: 16px;
            font-weight: 900;
        }
        .cellcolor {
            text-align: center;
            background-color: #D2E7FF;
        }
        .cellcolor2 {
            text-align: left;
            background-color: #D2E7FF;
        }
        .rightside {
            background-color: #D2E7FF;
            text-align: right;
        }
        .border {
            border-width: 10px;
            border-radius: 20px;
            border-style: solid;
            border-color: #CBCBCB;
        }
        .leftside {
            text-align: left;
        }
        .bottwo {
            border-bottom-right-radius: 10px;
            border-bottom-left-radius: 10px;
        }
        .addons {
            font-family: Lucida Console;
            font-size:11px;
            font-weight;
            bold;
        }
        .topleft {
            border-top-left-radius: 10px;
        }
        .topright {
            border-top-right-radius: 10px;
        }
        .orange {
            color: #fef4e9;
            border: solid 1px ##197BFB;
            border-radius: 10px;
            background: #f78d1d;
            background: -webkit-gradient(linear, left top, left bottom, from(#197BFB), to(#4A5C75));
            background: -moz-linear-gradient(top, #197BFB, #207DF6);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#197BFB', endColorstr='#4A5C75');
        }
        .orange:hover {
            background: #C3D9FF;
        }
        .orange:active {
            color: #000000;
    </style>
    <script language="javascript" type="text/javascript">
        function calculate() {

            var type;

            price = parseFloat(0.20);

            regthree = parseFloat(document.form.regthree.value);
            if (isNaN(regthree)) {
                regthree = 0;
            }
            regfour = parseFloat(document.form.regfour.value);
            if (isNaN(regfour)) {
                regfour = 0;
            }
            regfive = parseFloat(document.form.regfive.value);
            if (isNaN(regfive)) {
                regfive = 0;
            }
            regsix = parseFloat(document.form.regsix.value);
            if (isNaN(regsix)) {
                regsix = 0;
            }
            regseven = parseFloat(document.form.regseven.value);
            if (isNaN(regseven)) {
                regseven = 0;
            }
            supthree = parseFloat(document.form.supthree.value);
            if (isNaN(supthree)) {
                supthree = 0;
            }
            supfour = parseFloat(document.form.supfour.value);
            if (isNaN(supfour)) {
                supfour = 0;
            }
            supfive = parseFloat(document.form.supfive.value);
            if (isNaN(supfive)) {
                supfive = 0;
            }
            supsix = parseFloat(document.form.supsix.value);
            if (isNaN(supsix)) {
                supsix = 0;
            }
            supseven = parseFloat(document.form.supseven.value);
            if (isNaN(supseven)) {
                supseven = 0;
            }
            sixthree = parseFloat(document.form.sixthree.value);
            if (isNaN(sixthree)) {
                sixthree = 0;
            }
            sixfour = parseFloat(document.form.sixfour.value);
            if (isNaN(sixfour)) {
                sixfour = 0;
            }
            sixfive = parseFloat(document.form.sixfive.value);
            if (isNaN(sixfive)) {
                sixfive = 0;
            }
            sixsix = parseFloat(document.form.sixsix.value);
            if (isNaN(sixsix)) {
                sixsix = 0;
            }
            sixseven = parseFloat(document.form.sixseven.value);
            if (isNaN(sixseven)) {
                sixseven = 0;
            }

            regthreetot = parseFloat(regthree * 50);
            regfourtot = parseFloat(regfour * 100);
            regfivetot = parseFloat(regfive * 200);
            regsixtot = parseFloat(regsix * 300);
            regseventot = parseFloat(regseven * 400);
            supthreetot = parseFloat(supthree * 50);
            supfourtot = parseFloat(supfour * 100);
            supfivetot = parseFloat(supfive * 200);
            supsixtot = parseFloat(supsix * 300);
            supseventot = parseFloat(supseven * 400);
            sixthreetot = parseFloat(sixthree * 50);
            sixfourtot = parseFloat(sixfour * 100);
            sixfivetot = parseFloat(sixfive * 200);
            sixsixtot = parseFloat(sixsix * 300);
            sixseventot = parseFloat(sixseven * 400);

            rthreet = parseFloat(regthree * 3.5);
            if (isNaN(regthree)) {
                regthree = 0;
            }
            rfourt = parseFloat(regfour * 7);;
            if (isNaN(regfour)) {
                regfour = 0;
            }
            rfivet = parseFloat(regfive * 14);
            if (isNaN(regfive)) {
                regfive = 0;
            }
            rsixt = parseFloat(regsix * 22);
            if (isNaN(regsix)) {
                regsix = 0;
            }
            rsevent = parseFloat(regseven * 29);
            if (isNaN(regseven)) {
                regseven = 0;
            }
            sthreet = parseFloat(supthree * 3);
            if (isNaN(supthree)) {
                supthree = 0;
            }
            sfourt = parseFloat(supfour * 6);
            if (isNaN(supfour)) {
                supfour = 0;
            }
            sfivet = parseFloat(supfive * 13);
            if (isNaN(supfive)) {
                supfive = 0;
            }
            ssixt = parseFloat(supsix * 20);
            if (isNaN(supsix)) {
                supsix = 0;
            }
            ssevent = parseFloat(supseven * 26);
            if (isNaN(supseven)) {
                supseven = 0;
            }
            sithreet = parseFloat(sixthree * 1.5);
            if (isNaN(sixthree)) {
                sixthree = 0;
            }
            sifourt = parseFloat(sixfour * 3);
            if (isNaN(sixfour)) {
                sixfour = 0;
            }
            sifivet = parseFloat(sixfive * 7);
            if (isNaN(sixfive)) {
                sixfive = 0;
            }
            sisixt = parseFloat(sixsix * 11);
            if (isNaN(sixsix)) {
                sixsix = 0;
            }
            sisevent = parseFloat(sixseven * 14);
            if (isNaN(sixseven)) {
                sixseven = 0;
            }

            totalprice = parseFloat(regthreetot + regfourtot + regfivetot + regsixtot + regseventot + supthreetot + supfourtot + supfivetot + supsixtot + supseventot + sixthreetot + sixfourtot + sixfivetot + sixsixtot + sixseventot) * price;
            tottime = parseFloat(rthreet + rfourt + rfivet + rsixt + rsevent + sthreet + sfourt + sfivet + ssixt + ssevent + sithreet + sifourt + sifivet + sisixt + sisevent)
            totalfoot = parseFloat(regthreetot + regfourtot + regfivetot + regsixtot + regseventot + supthreetot + supfourtot + supfivetot + supsixtot + supseventot + sixthreetot + sixfourtot + sixfivetot + sixsixtot + sixseventot)

            dvdcal = parseFloat(tottime / 60)
            totdvd = Math.ceil(dvdcal)

            document.form.quote.value = totalprice;
            document.form.totalfootage.value = totalfoot;
            document.form.ttime.value = tottime;
            document.form.totdvd.value = totdvd;
            document.form.totad.value = music
        }
    </script>
</head>

<body>
    <form name="form">
        <table class="border" cellspacing="0" cellpadding="3">
            <tr>
                <td class="tableheader cellcolor topleft">Reel Size</td>
                <td class="tableheader cellcolor topright"># of Reels</td>
            </tr>
            <tr>
                <td class="regreelfont">3" Regular8 (50 ft)</font>
                </td>
                <td class="cellcolor">
                    <input type="text" name="regthree" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td class="regreelfont">4" Regular8 (100 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="regfour" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td class="regreelfont">5" Regular8 (200 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="regfive" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td class="regreelfont">6" Regular8 (300 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="regsix" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td class="regreelfont">7" Regular8 (400 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="regseven" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
                <tr></tr>
                <td class="supreelfont">3" Super8 (50 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="supthree" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td class="supreelfont">4" Super8 (100 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="supfour" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td class="supreelfont">5" Super8 (200 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="supfive" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td class="supreelfont">6" Super8 (300 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="supsix" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td class="supreelfont">7" Super8 (400 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="supseven" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td class="sixreelfont">3" 16mm (50 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="sixthree" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td td class="sixreelfont">4" 16mm (100 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="sixfour" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td td class="sixreelfont">5" 16mm (200 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="sixfive" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td td class="sixreelfont">6" 16mm (300 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="sixsix" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td td class="sixreelfont">7" 16mm (400 ft)</td>
                <td class="cellcolor">
                    <input type="text" name="sixseven" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:30px; width:60px; font-size:21px">
                </td>
            </tr>
            <tr>
                <td class="cellcolor addons leftside" colspan="2">BACKGROUND MUSIC - $14.99
                    <input type="checkbox" name="ckBox" id="ckBox">
                </td>
            </tr>
            <tr>
                <td class="cellcolor addons leftside" colspan="2">TITLES (PER DVD) - $9.99
                    <input type="checkbox" name="titles">
                </td>
            </tr>
            <tr>
                <td class="cellcolor addons leftside" colspan="2">TRANSITIONS (PER DVD) - $9.99
                    <input type="checkbox" name="transitions"
                    </td>
            </tr>
            <tr>
                <td class="cellcolor addons leftside" colspan="2">FILM REPAIR AND SPLICING - $14.99
                    <input type="checkbox" name="adees" value="14.99">
                </td>
            </tr>
            <tr>
                <td class="cellcolor addons leftside" colspan="2">SPECIAL FILM EDITING - $100.00
                    <input type="checkbox" name="adees" value="100">
                </td>
            </tr>
            <tr>
                <td class="cellcolor addons leftside" colspan="2">EXTRA COPIES - $9.99 PER COPY
                    <input type="text" name="copies" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:25px; width:50px; font-size:15px">
                </td>
            </tr>
            <tr>
                <td class="cellcolor" colspan="2"></td>
            </tr>
            <tr>
                <td class="rightside bottomfonts" colspan="2">TOTAL PRICE ($)
                    <input type="text" name="quote" style="font-family:Verdana; background-color:#FFFFE5; height:25px; text-align:center; width:100px; font-size:16px">
                </td>
                <tr/>
                <tr>
                    <td class="rightside bottomfonts" colspan="2">FOOTAGE (ft)
                        <input type="text" name="totalfootage" size="7" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:25px; width:100px; font-size:16px"
                        </td>
                </tr>
                <tr>
                    <td class="rightside bottomfonts" colspan="2">TOTAL TIME (min)
                        <input type="text" name="ttime" size="7" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:25px; width:100px; font-size:16px">
                    </td>
                </tr>
                <tr>
                    <td class="rightside bottomfonts" colspan="2">TOTAL DVDs
                        <input type="text" name="totdvd" size="7" style="font-family:Verdana; background-color:#FFFFE5; text-align:center; height:25px; width:100px; font-size:16px">
                    </td>
                </tr>
                <tr>
                    <td class="cellcolor bottwo" colspan="2">
                        <input type="button" class="orange" style="font-size: 18px; width:60px;height:35px"
                        value="Clear" onClick="this.form.reset()">&nbsp
                        <input type="button" name="Button" class="orange" style="font-size: 18px; width:120px;height:35px"
                        value="Calculate" onClick="calculate()">
                    </td>
                </tr>
        </table>
    </form>
</body> 
```

# f# - MonoDevelop 的 F#/MonoMac 项目

> ID：11763717
> 
> 赞同：1
> 
> 时间：2012-08-01T16:35:25.773
> 
> 标签：f#, monodevelop, monomac

如何在 MonoDevelop 中创建 F# Monomac 项目？两人在一起的事，我好像也查不出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:00:14.727

目前没有适用于 MonoMac 的 F# 项目模板，但根据miguel.de.icaza 去年所做[的博客文章](http://tirania.org/monomac//archive/2011/Mar.html)（在“下一步”下），计划在未来添加这些模板（以及其他语言的模板）。

# python - 从查询中确定 xpath 输出的类型（节点、字符串）

> ID：11763718
> 
> 赞同：0
> 
> 时间：2012-08-01T16:35:26.963
> 
> 标签：python, xpath, types, lxml

有没有一种方法可以独立于 XML 文档来确定来自 xpath 的返回值的类型？具体来说，我使用的是 lxml。

例子：

*   `//a`并将`//b[a/@href]`始终返回零个或多个元素的列表。
*   `//a/text()`并将`//a/@href`始终返回零个或多个字符串的列表。

虽然我可以想出各种尝试分析这些的方法，但感觉就像是在尝试重新发明轮子。有没有更好的方法来做到这一点？

**背景**

当事实证明没有任何`a`标签并且我已经编写了`root.xpath('//a')[0]`. 而且我不想盲目地抓住一切。所以我写了一组函数，它们总是返回正确类型的东西。和替换工作得很好，但如果不知道输出应该是什么，`cssselector`我`attrib`就无法满足输出的期望。`xpath`

如果你真的在乎，这是我的代码。[https://scraperwiki.com/editor/raw/irked](https://scraperwiki.com/editor/raw/irked)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:55:14.443

假设您的 XPath 表达式 like`//b[a/@href]`是静态的，则将始终返回相同的类型。（在这种情况下是元素列表。）您只想知道列表是否为空。一个简单的`if`语句可以做到这一点：

```
results = document.xpath('//b[a/@href]')
if results:
    do_something(results[0]
else:
    no_result() 
```

# java - 无法启动 Eclipse Helios

> ID：11763721
> 
> 赞同：1
> 
> 时间：2012-08-01T16:35:38.800
> 
> 标签：java, eclipse, ide, helios

我刚刚安装了 Eclipse Helios。一旦我解压缩并打开 Eclipse，它就会询问我的工作区。我选择了路径，它说好的。它打开了工作区并说工作台正在加载，突然 Eclipse IDE 关闭了，在主 Eclipse 文件夹中我得到了一个`hs_err_pid6040`显示为日志的文本文件。

以下是日志文件的内容。我只是包括其中的一部分。其余显示进程、其他线程、VM 参数、Env 变量和我的系统配置信息。我不明白错误是什么或如何调试。请帮忙。

```
#
# An unexpected error has been detected by Java Runtime Environment:
#
#  Internal Error (nmethod.cpp:1707), pid=6040, tid=6344
#  Error: guarantee(cont_offset != 0,"unhandled implicit exception in compiled code")
#
# Java VM: Java HotSpot(TM) 64-Bit Server VM (10.0-b19 mixed mode windows-amd64)
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x0000000006a7d400):  JavaThread "Worker-1" [_thread_in_Java, id=6344, stack(0x000000000bac0000,0x000000000bbc0000)]

Stack: [0x000000000bac0000,0x000000000bbc0000]
[error occurred during error reporting (printing stack bounds), id 0xc0000005]

[error occurred during error reporting (printing native stack), id 0xc0000005] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:59:03.773

是否有可能您的系统上安装了多个 JDK，而 Eclipse 选择了不正确的一个？

请通过编辑您的 eclipse.ini 来检查虚拟机（这应该在您提取或安装 Eclipse Helios 的文件夹中）

为此，请参阅[此处](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse?#eclipse.ini)的文档。

简而言之，您需要`-vm`在 eclipse.ini 中添加或更正参数以指向您要使用的 JDK 的 javaw.exe，如下所示：

```
-vm
c:/Program Files/Java/jdk/bin/javaw.exe 
```

更正上面的路径以指向您的 javaw.exe。

认为它超出了 OP 问题的范围，您可能想尝试考虑使用 jvm.dll 的路径而不是 javaw.exe。看到[这个](https://stackoverflow.com/a/316535/325742)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:01:05.110

> 问：我看到了一个错误。没有解决方案？

A：你看的不够仔细。该错误已在您的版本 (6.04) 中注明，并在后续版本中修复：

*   [http://bugs.sun.com/view_bug.do?bug_id=6739357](http://bugs.sun.com/view_bug.do?bug_id=6739357)

升级你的 JVM :)

# c# - 在 ItemsControl 中使用的 DataTemplate 中的 WPF ComboBox 的默认 SelectedItem 不起作用

> ID：11763724
> 
> 赞同：2
> 
> 时间：2012-08-01T16:35:44.273
> 
> 标签：c#, wpf, xaml, mvvm, combobox

如何在严格遵守 MVVM 模式的同时，获得一个位于元素`ComboBox`内的 WPF并始终拥有一个 default ？`DataTemplate``ItemsControl``SelectedItem`

我的目标是定义一个“表单域”列表，然后通过模板将其翻译成实际的表单域（即 - `TextBox`、`ComboBox`、`DatePicker`等）。字段列表是 100% 动态的，并且可以随时（由用户）添加和删除字段。

伪实现是：

```
MainWindow
    -> Sets FormViewModel as DataContext
FormViewModel (View Model)
    -> Populated the `Fields` Property
Form (View)
    -> Has an `ItemsControl` element with the `ItemsSource` bound to FormViewModel's `Fields` Property
    -> `ItemsControl` element uses an `ItemTemplateSelector` to select correct template based on current field's type**
FormField
    -> Class that has a `DisplayName`, `Value`, and list of `Operators` (=, <, >, >=, <=, etc.)
Operator
    -> Class that has an `Id` and `Label` (i.e.: Id = "<=", Label = "Less Than or Equal To")
DataTemplate
    -> A `DataTemplate` element for each field type* that creates a form field with a label, and a `ComboBox` with the field's available Operators
    *** The `Operators` ComboBox is where the issue occurs *** 
```

** 实际字段的“类型”和其中包含的实现不包含在此问题中，因为它与显示问题无关。

以下是生成表单所需的主要类，基于上面的伪实现：

窗体视图模型.cs

```
public class FormViewModel : INotifyPropertyChanged {
    protected ObservableCollection<FormField> _fields;
    public ObservableCollection<FormField> Fields {
        get { return _fields; }
        set { _fields = value; _onPropertyChanged("Fields"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void _onPropertyChanged(string propertyName) {
        if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    public FormViewModel() {
        // create a sample field that has a list of operators
        Fields = new ObservableCollection<FormField>() {
            new FormField() {
                DisplayName = "Field1",
                Value = "Default Value",
                Operators = new ObservableCollection<Operator>() {
                    new Operator() { Id = "=", Label = "Equals" },
                    new Operator() { Id = "<", Label = "Less Than" },
                    new Operator() { Id = ">", Label = "Greater Than" }
                }
            }
        };
    }
} 
```

表单.xaml

```
<UserControl.Resources>
    <ResourceDictionary Source="DataTemplates.xaml" />
</UserControl.Resources>
<ItemsControl
    ItemsSource="{Binding Fields}"
    ItemTemplateSelector="{StaticResource fieldTemplateSelector}">
    <ItemsControl.Template>
        <ControlTemplate TargetType="ItemsControl">
            <ItemsPresenter />
        </ControlTemplate>
    </ItemsControl.Template>
</ItemsControl> 
```

表单.xaml.cs

```
public partial class Form : UserControl {
    public static readonly DependencyProperty FieldsProperty = DependencyProperty.RegisterAttached("Fields", typeof(ObservableCollection<FormField>), typeof(Form));

    public ObservableCollection<FormField> Fields {
        get { return ((ObservableCollection<FormField>)GetValue(FieldsProperty)); }
        set { SetValue(FieldsProperty, ((ObservableCollection<FormField>)value)); }
    }

    public Form() {
        InitializeComponent();
    }
} 
```

FieldTemplateSelector.cs

```
public class FieldTemplateSelector : DataTemplateSelector {
    public DataTemplate DefaultTemplate { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container) {
        FrameworkElement element = (container as FrameworkElement);
        if ((element != null) && (item != null) && (item is FormField)) {
            return (element.FindResource("defaultFieldTemplate") as DataTemplate);
        }
        return DefaultTemplate;
    }
} 
```

数据模板.xaml

```
<local:FieldTemplateSelector x:Key="fieldTemplateSelector" />
<DataTemplate x:Key="defaultFieldTemplate">
    <StackPanel Orientation="Vertical">
        <TextBlock Text="{Binding Path=DisplayName}" />
        <TextBox Text="{Binding Path=Value, UpdateSourceTrigger=PropertyChanged}" />
        <ComboBox
            ItemsSource="{Binding Path=Operators}"
            DisplayMemberPath="Label" SelectedValuePath="Id"
            SelectedItem="{Binding SelectedOperator, Mode=TwoWay}"
            HorizontalAlignment="Right"
        />
    </StackPanel>
</DataTemplate> 
```

表单域.cs

```
public class FormField : INotifyPropertyChanged {
    public string DisplayName { get; set; }
    public string Value { get; set; }

    protected ObservableCollection<Operator> _operators;
    public ObservableCollection<Operator> Operators {
        get { return _operators; }
        set {
            _operators = value;
            _onPropertyChanged("Operators");
        }
    }

    protected Operator _selectedOperator;
    public Operator SelectedOperator {
        get { return _selectedOperator; }
        set { _selectedOperator = value; _onPropertyChanged("SelectedOperator"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected void _onPropertyChanged(string propertyName) {
        if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

运算符.cs

```
public class Operator {
    public string Id { get; set; }
    public string Label { get; set; }
} 
```

表格已正确生成；列表中的所有“表单字段”`Fields`都被创建为`TextBox`元素，其名称显示为标签，并且它们每个都有`ComboBox`完整的运算符。但是，`ComboBox`默认情况下没有选择项目。

我解决这个问题的第一步是`SelectedIndex=0`在`ComboBox`; 这没有用。经过反复试验，我选择使用`DataTrigger`如下：

```
<ComboBox
    ItemsSource="{Binding Path=Operators}"
    DisplayMemberPath="Label" SelectedValuePath="Id"
    SelectedItem="{Binding SelectedOperator, Mode=TwoWay}"
    HorizontalAlignment="Right">
    <ComboBox.Style>
        <Style TargetType="{x:Type ComboBox}">
            <Style.Triggers>
                <!-- select the first item by default (if no other is selected) -->
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=SelectedItem}"  Value="{x:Null}">
                    <Setter Property="SelectedIndex" Value="0"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ComboBox.Style>
</ComboBox> 
```

我添加的触发器将检查当前`SelectedItem`是否是`null`，如果是，则将其设置`SelectedIndex`为 0。这有效！当我运行应用程序时，`ComboBox`默认情况下每个项目都有一个选项！但是等等，还有更多：如果一个项目随后从`Fields`列表中删除并在任何时候添加回来，`ComboBox`则没有再次选择项目。基本上，发生的事情是，当第一次创建该字段时，数据触发器选择操作符列表中的第一项并将其设置为该字段的`SelectedItem`. 当该字段被删除然后重新添加时，原来的 DataTrigger 不再起作用`SelectedItem`。`null`奇怪的是，尽管 SelectedItem 属性显然存在绑定，但当前选定的项目并未被选中。

总结：在`ComboBox`DataTemplate 中使用 a 时，`SelectedItem`for`ComboBox`不使用其绑定属性作为默认值。

我试过的：

1.  DataTrigger`SelectedItem`为 null 时选择列表中的第一项。
    结果：创建字段时正确选择了项目；当字段从显示中删除然后重新添加时丢失项目。

2.  与 1 相同，加上一个 DataTrigger for when `SelectedItem`is not null 以重新选择列表中的第一项。
    结果：与#1 结果相同 + 当字段从显示中删除然后添加回来时，正确选择列表中的第一项；如果使用已创建的项目重新创建整个`Fields`列表本身`FormField`，则所选项目再次为空。此外，最好预先选择先前选择的运算符（虽然不是必需的）。

3.  用于`SelectedIndex`代替`SelectedItem`, 带 - 和不带 - DataTriggers（如 #1 和 #2 中所示）。
    结果：在这两种情况下都没有成功选择默认项目，几乎就像`SelectedIndex`在`ItemsSource`.

4.  使用 DataTrigger 检查`Items.Count`属性；如果它大于零，则将 设置`SelectedItem`为列表中的第一个元素。
    结果：没有成功选择项目。

5.  与 4 相同，但使用`SelectedIndex`而不是`SelectedItem`.
    结果：与 #1 结果相同

6.  `IsSynchronizedWithCurrentItem`与`True`和`False`值一起使用。
    结果：未选择任何内容。

7.  将 XAML 属性重新排序以放置`SelectedItem`（并且`SelectedIndex`在使用时）放在`ItemsSource`. 这是为每个测试完成的，因为我在网上看到它有帮助。
    结果：没有帮助。

8.  为该`Operators`属性尝试了不同类型的集合。我用过`List`, `IEnumerable`, `ICollectionView`, 目前正在使用`ObservableCollection`.
    结果：所有都提供了相同的输出，除了`IEnumerable`- 它在字段被删除/重新添加后丢失了值。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:51:10.863

虽然我重组了我的应用程序并且上述问题不再存在，但我也找到了解决它的解决方案！

步骤：

1.  从 Will 的评论中得到提示，我更新了`Form`'s 代码隐藏以[`PropertyMetadata`](http://msdn.microsoft.com/en-us/library/ms597502.aspx)向`FieldsProperty`.

2.  来自 #1 的回调遍历整个字段列表，并用于在[-priority 级别](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)[`Dispatcher.BeginInvoke()`](http://msdn.microsoft.com/en-us/library/ms591206.aspx)上调用 Delegate-Action ，它将当前字段设置为字段列表中的第一个运算符。[`Input`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)`SelectedOperator``Operators`

    *   如果不使用`.BeginInvoke()`或任何其他较低优先级，更新将在 GUI 生成之前尝试访问该字段并且会失败。
3.  `DataTriggers`从中删除了`Operators` `ComboBox`（`DataTemplate`现在，它与`DataTemplates.xaml`我的问题中的第一个代码示例相同）。

新的工作代码（仅限更新）：

表格.cs

```
...
public static readonly DependencyProperty FieldsProperty =
    DependencyProperty.RegisterAttached("Fields", typeof(ObservableCollection<FormField>), typeof(Form), new PropertyMetadata(_fieldsListUpdated));
...
// PropertyMetaData-callback for when the FieldsProperty is updated
protected static void _fieldsListUpdated(DependencyObject sender, DependencyPropertyChangedEventArgs args) {
    foreach (FormField field in ((Form)sender).Fields) {
        // check to see if the current field has valid operators
        if ((field.Operators != null) && (field.Operators.Count > 0)) {
            Dispatcher.CurrentDispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Input, (Action)(() => {
                // set the current field's SelectedOperator to the first in the list
                field.SelectedOperator = field.Operators[0];
            }));
        }
    }
} 
```

对上述内容的轻微警告是，`SelectedOperator`将始终设置为列表中的第一个。对我来说，这不是问题 - 但我可以看到“最后选择的操作员”想要重新选择的情况。

调试后，当`Field`重新添加到 的列表时`Fields`，它仍然保留以前的`SelectedItem`值 - 然后立即将`ComboBox`'s`SelectedIndex`设置为`-1`。在设置器中防止这种情况`FormField.SelectedOperator`（并通过尝试`SelectedItem`/ `SelectedIndex`）没有帮助。

`FormField`相反，在命名中创建第二个“占位符”属性`LastOperator`并将其设置为`SelectedOperator`当 setter 被传递`null`时，然后更新`field.Operator =`行`Form.cs`似乎有效：

表单域.cs

```
...
public Operator SelectedOperator {
    get { return _selectedOperator; }
    set {
        if (value == null) LastOperator = _selectedOperator;
        _selectedOperator = value; _onPropertyChanged("SelectedOperator");
    }
}

public Operator LastOperator { get; set; } 
```

表格.cs

```
...
field.SelectedOperator = ((field.LastOperator != null) ? field.LastOperator : field.Operators[0]);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:10:17.747

尝试以下操作：

表单域.cs

```
protected ObservableCollection<Operator> _operators;
public ObservableCollection<Operator> Operators {
    get { return _operators; }
    set {
        _operators = value;
        _onPropertyChanged("Operators");
    }
}

private QuestionOption _selectedItem;
    public QuestionOption SelectedItem
    {
        get
        {
            return _selectedItem;
        }
        set
        {
            if (_selectedItem != value)
            {
                if (SelectedIndex == -1)
                    SelectedIndex = Operators.IndexOf(value);
                _selectedItem = value;
                _onPropertyChanged("SelectedItem");
            }
        }
    }

    private int _selectedIndex = -1;
    public int SelectedIndex
    {
        get { return _selectedIndex; }
        set
        {
            if (_selectedIndex != value)
            {
                _selectedIndex = value;
                _onPropertyChanged("SelectedIndex");
            }
        }
    } 
```

数据模板.xaml

```
<ComboBox Width="Auto" 
          ItemsSource="{Binding Operators}"
          SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
          SelectedIndex="{Binding SelectedIndex, Mode=TwoWay}"
          DisplayMemberPath="Label" SelectedValuePath="Id"> 
```

至于确保对 Fields 的更改触发 PropertyChanged 事件，请尝试以下操作以强制触发事件：

```
// Set the changes to the modifiedFormField placeholder
ObservableCollection<FormField> modifiedFormField;
this.Fields = new ObservableCollection<FormField>(modifiedFormField); 
```

我在处理 MVVM Silverlight 5 应用程序时遇到了类似的问题，并做了类似的事情来使绑定工作。这些概念应该可以与 WPF 互换。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-02T14:19:50.077

在 DataTemplate 内部使用带有数据绑定 SelectedItem 的 ComboBoxes 很棘手。我通过以下方式解决了这个问题：而不是使用 SelectedItem，（TwoWay）仅绑定**SelectedValue**（到您的自定义类型属性 - SelectedOperator）并设置**DisplayMemberPath**（但不是 SelectedValuePath - 拥有整个自定义类型实例作为值）

# c# - 在 C# 中从用户控件访问表单变量

> ID：11763726
> 
> 赞同：0
> 
> 时间：2012-08-01T16:35:47.273
> 
> 标签：c#, winforms

我有一个由多种形式组成的应用程序。有一个 MainForm，然后在此 MainForm 中打开其他表单。打开的子窗体之一（我们将称之为 Form1）包含一个用户控件，其中包含控件，例如数据网格视图。这个datagridview 控件有几个被触发的事件，一个是“cellclick”事件。

此单击事件必须访问在 Form1 中声明的公共计时器对象。

目前只是为了让它工作，我使用了代码：

```
((Form1)this.Parent.Parent.Parent.Parent.Parent).clickTimer.Start(); 
```

然而，这似乎不是我可以访问此 Timer 对象的最佳方式，并且可能对 Form1 及其用户控件的未来开发来说是一个令人头疼的问题。

从用户控件的 datagridview 点击事件内部访问我的 Form1 计时器的替代方法是什么？

感谢任何建议，因为我现在对此一无所知。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:37:59.590

您可以让用户控件将 Timer 实例作为构造函数参数并将其存储在私有支持字段中以供将来访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:10:30.200

好吧，我想出了更优雅的方式来访问我的 Form1 对象（而不是使用 Parent.Parent.Parent ......等）：

`Control activeForm = this.FindForm();`

所以现在我有：

```
((Form1)activeForm).clickTimer.Start(); 
```

上面的代码为我提供了 userControl 存在于内部的表单（Form1），并且由于 UC 存在于内部的 Forms 将始终有一个 Timer，因此即使将用户控件放置在不同的表单上（例如 Form2），它也应该可以工作。

然而，@Darin 确实提供了一个很好的替代方案，但我选择使用我的解决方案，因为它为我提供了最快的方法来解决我的问题，只需最少的代码更改，但仍然为我的表单提供低可维护性。当然，具体到我的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:47:33.457

您可以在子表单中创建一个静态事件并在父表单中注册它。

在“cellclick”上触发事件并在父表单的事件处理程序中触发计时器。

# mysql - 如何通过 openquery 和链接服务器在 VS 中使用 MySQL 数据为 SSRS 2008 报告创建数据集

> ID：11763734
> 
> 赞同：4
> 
> 时间：2012-08-01T16:36:15.903
> 
> 标签：mysql, sql, reporting-services

我已经成功地在 SQL Server 2005 中创建了一个链接服务器到 MySQL 数据库。我需要从 VS 调用/执行 MySQL 存储过程（以刷新 MySQL 中的表数据），然后使用此数据创建一个数据集，用于 SSRS 2008 中的报告。

我可以毫无问题地从 SSMS 查询窗口运行以下命令：

```
select * from openquery(myLinkedSrvrname,'call myMySQLprocname') 
```

但是，我无法从 VS 中的查询设计器窗口运行此语句来创建数据集。它会产生语法错误。任何人都可以建议修复上述 openquery 语句或知道如何从 Reporting Services 执行 MySQL 存储过程来创建数据集吗？

**错误代码**

> 执行查询时出错。错误[42000][MySQL][ODBC 5.1 驱动程序][mysqld-5.5.16]。您的 SQL 语法有错误；与您的 MySQL 服务器版本相对应的手册，以便在第 1 行的 ('myLinkedSrvrname, 'myMySQLprocname')' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:00:21.700

您可以 1) 直接从 SSRS 创建连接（需要在 SSRS 服务器和您的开发机器上建立 ODBC 连接）[http://dev.mysql.com/downloads/connector/odbc/](http://dev.mysql.com/downloads/connector/odbc/ "MySQL ODBC 连接器")

或者

2) 您可以将此 openquery MySQL 调用包装在 SQL Server 存储过程中。这将使您能够将报表中的参数传递到 SQL Server 存储过程，然后再传递到 MySQL 存储过程。然而，它需要在 SQL Server 过程中使用动态 SQL。

如果您使用第一个选项，您可能可以直接调用存储过程，但我只使用不通过 ODBC 的 Oracle 连接来完成此操作，因此 SSRS 可能会使该选项变灰。

使用第二个选项，您可能会遇到更多的 2-hop 身份验证问题，具体取决于您运行的服务器操作系统。从 SSMS 调用 MySQL proc 只有 1 跳，所以不会出现这个问题。

编辑：显然可以将 MySQL ADO.NET 连接器添加到 SSRS： [http ://www.mazsoft.com/blog/post/2010/11/04/Using-SQL-Server-2008-Reporting-Services-(SSRS )-with-MySQL.aspx](http://www.mazsoft.com/blog/post/2010/11/04/Using-SQL-Server-2008-Reporting-Services-%28SSRS%29-with-MySQL.aspx)

听起来很复杂，但如果你做很多 MySQL，它会比使用 ODBC 更好。

# php - PHP代码文件通过shell运行

> ID：11763739
> 
> 赞同：0
> 
> 时间：2012-08-01T16:36:33.307
> 
> 标签：php, shell

我有非常重的 PHP 代码文件，它在 200,000 条记录上创建 PDF。PDF 页面的总数将高达 150,000。我尝试通过浏览器运行我的代码，但它无法做到这一点。我想我必须通过 shell 运行它 - 或者任何人都可以提出替代方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:43:45.300

如果您希望 PHP 脚本将其调用到 shell 中，则：

```
exec("php path/to/script.php&"); 
```

否则，只需执行终端引号中的内容即可。

此外，检查您的 php.ini 文件，它可能会在一定时间后设置为超时。那可能是你的问题。如果是这种情况，最好将其交给用 C 或 C++ 等低级语言编写的程序，然后再交给 PHP。您也可以将 timout 增加到更高的值，但如果花费的时间太长，它可能会使您的服务器陷入困境。

如果您想在浏览器中看到它何时完成。确保您可以获取进程的 pid，然后创建一个脚本来查看进程的状态。完成后让 AJAX 将其加载到当前帧中。

### 更新：

像这样的东西：

```
$pid = exec("nohup $command > /dev/null 2>&1 & echo $!"); 
```

其中命令是你想要做的。

然后像一些jquery：

```
<script>
$(document).ready(function()
{
   checkStatus();
});

function checkSatus()
{
   $.get("/path/to/checkStatus.php,{pid: <?php echo $pid;?>},function(){
     if(data.running == 1) alert("PDFS done");
   window.setTimeOut(checkStatus,30000);
}
</script> 
```

然后是另一个 checkStatus.php 文件：

```
<?php
  $pid = $_GET["pid"];
  $isRunning = file_exists( "/proc/$pid" );
  if($isRunning){
    json_encode(Array("running"=>1));
  }
  else
  {
    json_encode(Array("running"=>0));
  } 
```

*不保证代码。它很快就放在一起了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:57:02.243

一些想法可能太大而无法发表评论：

*   您需要考虑减小此 PDF 的大小 - 150,000 页对于 PDF 来说太大了。将其拆分为多个报告
*   这应该在您的专用服务器的后台创建。您如何执行此操作以及执行频率取决于运行所需的时间以及您需要数据的新鲜程度
*   您可以使用`cron`，如前所述，或者像 RabbitMQ 或 Gearman 这样的排队系统 - 两者都可以从 PHP 访问。然而，一个合适的队列系统确实比一个简单的预定脚本具有更陡峭的学习曲线。
*   你应该愿意对这个问题做一些研究。您的回复*请详细说明*，*任何有解决方案*的人都建议您相信这里会为您编写完整的代码解决方案 - 这不是 StackOverflow 的工作方式。只有你知道你的情况的全部细节，你需要从这里的不同人那里得到指示，并应用它们 - 连同额外的研究 - 以获得一个可行的解决方案。

# php - PHP 开关/案例 json_encode

> ID：11763740
> 
> 赞同：0
> 
> 时间：2012-08-01T16:36:36.163
> 
> 标签：php, json

我对此感到很困惑。在使用下面的开关/案例时，如果我回显案例 1，我的结果如下：

```
Metal Cover (300)
Plexi (300)
Flat Cover (200)
Paper Cover (250) 
```

当我回显 json_encode 时，它​​返回以下内容：

```
{"300":"Plexi (300)","200":"Flat Cover (200)","250":"Paper Cover (250)"} 
```

为什么我失去了我的一排？- 谢谢

**代码**

```
$type = 'cover';
    $stt = 1;
    $productId = 81;

        $results = array();
        switch ($type) {
        case "cover":
            $query = mysql_query("SELECT * 
                                    FROM albumcover 
                                    WHERE productId = '{$productId}'
                                ");
            $results[0] ="None";
            switch ($stt){
                case 1:
                    while($row = mysql_fetch_array($query)){
                        echo $results[$row['price2']] = $row['coverupgrade'] . ' (' . $row['price2'] . ')<br>';
                    }
                break;
                case 2:
                    while($row = mysql_fetch_array($query)){
                        $results[$row['price3']] = $row['coverupgrade'] .' (' . $row['price3'] . ')';
                    }
                    break;
                case 3:
                    while($row = mysql_fetch_array($query)){
                        $results[$row['price4']] = $row['coverupgrade'] .' (' . $row['price4'] . ')';
                    }
                    break;
                default :
                    while($row = mysql_fetch_array($query)){
                        $results[$row['price1']] = $row['coverupgrade'].' ('.$row['price1'].')';
                    }
                    break;
            }
            echo json_encode($results); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T16:39:48.313

金属盖和 Plexi 具有相同的键 (300)。键必须是唯一的，因此后者会覆盖第一个。

如果要为单个键存储多个值，则必须使用另一个数组（但不确定这是否是您想要的）：

```
$results[$row['priceX']][] = $row['coverupgrade'].' ('.$row['priceX'].')'; 
```

JSON 编码的它看起来像这样：

```
{
  "300":["Metal Cover (300)", "Plexi (300)"],
  "200":["Flat Cover (200)"],
  "250":["Paper Cover (250)"]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:41:49.333

您正在丢失一行，因为您使用的值`$row['pricex']`作为键，并且您有两行价格相同，因此后面的值会覆盖第一行。为了有效地传输数据，您需要更改 JSON 的结构：

```
$type = 'cover';
$stt = 1;
$productId = 81;

$results = array();
switch ($type) {
    case "cover":
        $query = mysql_query("
            SELECT * 
            FROM albumcover 
            WHERE productId = '{$productId}'
        ");
        $results[0] ="None";
        switch ($stt){
            case 1:
                while($row = mysql_fetch_array($query)){
                    $results['data'][] = array('price'=>$row['price2'], 'coverupgrade' => $row['coverupgrade'] . ' (' . $row['price2'] . ')<br>';
                }
                break;
            case 2:
                while($row = mysql_fetch_array($query)){
                    $results['data'][] = array('price'=>$row['price3'], 'coverupgrade' => $row['coverupgrade'] . ' (' . $row['price3'] . ')<br>';
                }
                break;
            case 3:
                while($row = mysql_fetch_array($query)){
                    $results['data'][] = array('price'=>$row['price4'], 'coverupgrade' => $row['coverupgrade'] . ' (' . $row['price4'] . ')<br>';
                }
                break;
            default:
                while($row = mysql_fetch_array($query)){
                    $results['data'][] = array('price'=>$row['price1'], 'coverupgrade' => $row['coverupgrade'] . ' (' . $row['price1'] . ')<br>';
                }
                break;
        }
        break;
}
echo json_encode($results); 
```

鉴于您显示的数据，这应该输出：

```
{
  "0": "none",
  "data": [
    {
      "price": "300",
      "coverupgrade": "Metal Cover (300)"
    },
    {
      "price": "300",
      "coverupgrade": "Plexi (300)"
    },
    {
      "price": "200",
      "coverupgrade": "Flat Cover (200)"
    },
    {
      "price": "250",
      "coverupgrade": "Paper Cover (250)"
    }
  ]
} 
```

# xml - 自 JRE6 更新 24 以来 javax.xml.validation.Validator 非常慢？

> ID：11763741
> 
> 赞同：3
> 
> 时间：2012-08-01T16:36:38.707
> 
> 标签：xml, performance, validation, java

我们遇到了一个问题，即 Java JRE 中的 XML 验证器在 JRE 1.6u24 中变得非常慢，即使在最近的更新中也存在这种情况。

验证 1000 个 XML 需要：

版本 <= 1.6u23 约为 1.4 秒；对于 >= 1.6u24 的版本，约 15.2 秒

慢了 10 倍！我试图搜索是否有人已经发现了这个问题，但我找不到任何东西。

我们当然可以通过使用另一个库（如woodstox）来解决它，但我们更喜欢纯JRE，我不敢相信它会存在这么长时间而没有任何改进......

我们测试的代码如下所示：

```
public static void main(String[] args) throws XMLStreamException, SAXException, IOException, ParserConfigurationException {
    SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    Schema schema = factory.newSchema(new Source[] {
            new StreamSource(new File("schema1.xsd")),
            new StreamSource(new File("schema2.xsd")) });

    Validator validator = schema.newValidator();
    XMLInputFactory staxFactory = XMLInputFactory.newInstance();
    String xml = FileUtils.readFileToString(new File("to_validate.xml"), "UTF-8");

    Date start = new Date();
    for (int i = 0; i < 1000; i++) {
        XMLStreamReader xmlr = staxFactory.createXMLStreamReader(new StringReader(xml));
        StAXSource ss = new StAXSource(xmlr);
        validator.validate(ss);
    }
    Date end = new Date();

    System.out.println("seconds needed: " + (end.getTime() - start.getTime()) / 1000f);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:22:20.330

我不认为 Woodstox 包含 XSD 验证器。如果你想要一个替代方案，你可以试试 Xerces 的 Apache 版本（通常比 JDK 版本好得多），或者 Saxon-EE。

出现这种减速的最可能原因是您正在从 W3C 网站获取 DTD。我不知道为什么这会在 JDK 版本之间发生变化，但这肯定是在一年前发生的变化，当时 W3C 做出了一项政策决定，通过故意延迟响应来限制对常见 DTD 的请求。如果这是问题，那么解决方案是使用目录将访问重定向到本地副本；或者，如果您使用 Saxon 9.4，它具有内置的最常见 DTD 的副本。

# c - 如果和其他，我应该放更可能的部分吗？

> ID：11763747
> 
> 赞同：10
> 
> 时间：2012-08-01T16:37:56.057
> 
> 标签：c, if-statement, control-flow

我想知道语言是否存在很大的性能差异，是否应该将更有可能执行的代码放在`if`子句中`else`。这是一个例子：

```
// x is a random number, or some key code from the user
if(!somespecific_keycode)
   do the general stuff
else
   do specific stuff 
```

和另一个解决方案

```
if(somespecific_keycode)
   do the specific stuff
else
   do general stuff 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T16:41:25.097

更喜欢将它们放在使代码更清晰的顺序中，这通常更有可能首先执行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T16:42:26.610

正如其他人所说：就性能而言，您最好依靠编译器和硬件（分支预测、推测执行）来做正确的事情。

如果您真的担心这两个对您的帮助不够，GCC 提供了一个[内置](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)函数 (__builtin_expect)，您可以使用它明确指示分支的预期结果。

在代码可读性方面，我个人更喜欢最有可能的情况。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T16:39:45.510

除非您遇到性能问题，否则不要担心。

如果您确实遇到性能问题，请尝试切换它们并*测量*哪个变体更快（如果有的话）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T16:40:35.557

常见的规则是把更可能的大小写放在第一位，它被认为更具可读性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T16:39:33.040

分支预测将导致其中一个更有可能发生，并且如果在循环内，它将导致性能差异。但大多数情况下，如果您不在汇编程序级别思考，您可以忽略这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-01T16:43:32.967

这不一定是性能问题，但我通常从特定到一般来防止这样的情况：

```
int i = 15;

if(i % 3 == 0)
   System.out.println("fizz");
else if(i % 5 == 0)
   System.out.println("buzz");
else if(i % 3 == 0 && i % 5 == 0)
   System.out.println("fizzbuzz"); 
```

在这里，上面的代码永远不会说“fizzbuzz”，因为 15 同时匹配`i % 3 == 0`and`i % 5 == 0`条件。如果您重新订购更具体的内容：

```
int i = 15;

if(i % 3 == 0 && i % 5 == 0)
   System.out.println("fizzbuzz");
else if(i % 3 == 0)
   System.out.println("fizz");
else if(i % 5 == 0)
   System.out.println("buzz"); 
```

现在上面的代码将在被更一般的条件停止之前达到“fizzbuzz”

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-17T10:58:59.910

所有答案都有有效点。这是一个附加的：

*   避免双重否定：*如果**不是**这个，那就是那个，否则某些事情*往往会让读者感到困惑。因此，对于给出的示例，我倾向于：

    ```
    if (somespecific_keycode) {
        do_the_specific_stuff();
    } else {
        do_general_stuff();
    } 
    ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-01T16:41:10.323

它几乎没有什么区别，但有时如果您的 ifs 正在检查某事是否为真或相等，并且 else 在不是这种情况时处理，则有时更容易阅读和调试。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-01T16:42:15.213

正如其他人所说，除非您多次使用它（例如在循环中），否则它不会产生巨大的影响。在这种情况下，将最有可能的条件放在第一位，因为它将有最早的机会突破条件检查。

当您开始有许多 'else if' 时，它变得更加明显。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-01T16:42:29.247

可能出现的任何差异都与上下文有关，而不是与`if-else`结构本身有关。因此，您可以在这里做的最好的事情就是开发自己的测试来检测任何差异。

除非您正在优化已经完成的系统或软件，否则我建议您**避免过早优化**。可能你已经听说他们是邪恶的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-01T16:43:14.487

AFAIK 与现代优化 C 编译器没有直接关系，您如何组织您的`if`or 循环和生成代码中的实际分支指令。此外，不同的 CPU 具有不同的分支预测算法。

所以：

*   在看到与此代码相关的不良性能之前不要进行优化

*   如果您确实优化、衡量和比较不同的版本

*   使用不同特征的真实数据进行性能测量

*   在这两种情况下查看编译器生成的汇编代码。

# android - 如何在 SQLite 中合并 3 个表并将其与另一个表连接起来

> ID：11763753
> 
> 赞同：0
> 
> 时间：2012-08-01T16:38:18.983
> 
> 标签：android, sqlite

所以我有三个表，每个表都有不同的列和一个超类表。对于超类表和它自己的表中的每个实体，我都有一个唯一的 ID。

我想联合这三个表，然后将结果与基于 id 的超类表连接起来。

我该怎么做？我只有唯一的 ID，没有其他信息。

**编辑：** 我尝试了你的建议，但得到了这个例外：

```
08-01 18:49:05.365: E/AndroidRuntime(10737): Caused by:      
android.database.sqlite.SQLiteException: SELECTs to the left and right of UNION do not 
have   the same number of result columns: , while compiling: SELECT * FROM ((SELECT * FROM 
pois UNION SELECT * FROM routes UNION SELECT * FROM events) t INNER JOIN features ON (pid 
= t.features_pid)) WHERE pid = "poi2114" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:41:24.730

嵌套查询可以用作 FROM 子句中的表。

```
select * from (
    select ID from TableA
    union
    select ID from TableB) ab inner join TableX x on ab.ID = x.FooID 
```

构造表中的字段名称`ab`遵循构成 的第一个选择中的名称`ab`。因此，如果 TableB 中的字段被称为其他名称，它仍将位于 ID 列下。这就是 UNION 查询的工作方式。

另外，请注意 UNION ALL/UNION DISTINCT 的区别。

# ruby-on-rails - 服务器崩溃后锁定文件上的 Rails/Devise Errno::ENOENT

> ID：11763755
> 
> 赞同：0
> 
> 时间：2012-08-01T16:38:33.313
> 
> 标签：ruby-on-rails, devise, openid

我有一个使用 Devise 的 Rails 3.2.5 应用程序，使用 OpenID 进行身份验证（Google），在 nginx/unicorn 上运行。

今天，我的服务器崩溃了。我重新开始了。现在无法登录。这是发生的事情：

*   已注销的用户访问应用程序
*   已注销的用户重定向到`/users/sign_in`
*   用户单击“使用 GMail 登录”按钮
*   **500 错误。**在日志文件中，我看到：

    ```
    Started GET "/users/auth/google" for ...
    Errno::ENOENT (No such file or directory - /tmp/temp/tmp20120801-4155-1scxc9o.lock): 
    ```

如何解决此错误？我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:28:49.820

这是一个访问问题。不确定根本原因，但毫无疑问，这与我在配置应用程序时犯的一些错误有关。

**解决：**

```
$ cd /tmp
$ chmod 777 temp
$ chmod 777 associations
$ chmod 777 nonces 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T05:22:46.213

确保您的 OpenID 文件存储设置正确，即..

`OpenID::Store::Filesystem.new('./tmp')`

（注意 /tmp 前面的 .）

# objective-c - 您如何以编程方式检测 iPad 的世代？

> ID：11763759
> 
> 赞同：2
> 
> 时间：2012-08-01T16:38:46.460
> 
> 标签：objective-c, ios, ipad, camera, detection

我正在开发一个程序，该程序需要能够检测 iPad 中是否存在相机硬件。我认为最简单的方法是确定设备是哪一代，但如果有更简单的方法来检测也可以工作的硬件。该应用程序所设计的 iPad 可能是最近购买的，并且在标准更新版本的 iOS 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:46:40.410

不，您可以简单地检查正在使用的设备！

检查所有 iOS 设备：

```
NSString *deviceType = [UIDevice currentDevice].model;
NSLog(deviceType); 
```

为了检查相机

```
if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera])
    //there is a camera 
```

# android - adbd 和 monkey runner 将如何影响 android 设备的性能

> ID：11763770
> 
> 赞同：1
> 
> 时间：2012-08-01T16:39:26.800
> 
> 标签：android, adb, monkeyrunner

我正在对设备进行一些性能测试，并希望使用 adb 和 monkey runner 来自动化 Andorid UI*。担心的是后台进程会影响设备的实际性能。问题是：

Monkey runner是通过什么机制工作的？

设备上运行的 adb 和 monkeyrunner 的服务对性能*有多大影响？

*通过 adb 发送命令运行monkey runner 并拉取logcat。*硬件性能：cpu mem power

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:20:09.563

这[介绍页面](http://developer.android.com/tools/help/monkeyrunner_concepts.html)很好地描述了 MonkeyRunner 的工作原理。根据我使用 MonkeyRunner 的个人经验，应该不会影响您的应用程序的性能，但是 MonkeyRunner 本身有时会很慢，所以我永远不会使用 MonkeyRunner 来衡量我的应用程序的性能。

# rest - 触发河流更新elasticsearch

> ID：11763774
> 
> 赞同：4
> 
> 时间：2012-08-01T16:39:40.667
> 
> 标签：rest, full-text-search, nosql, search-engine, elasticsearch

我有一个使用 jdbc river 插件的弹性搜索河设置，它只是执行一个简单的 select * from 并索引该表。

但我希望能够通过 API 以及标准时间间隔按需触发河流，以便在将文档插入此表时将其索引。

有谁知道目前是否有这样做的？

IE `/_river/my_river/_refresh`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T04:56:54.653

我看不到触发 JDBC River 实时索引特定更新文档的好方法，而且我不确定它是否打算用于此目的。

您为什么不直接从更新代码中索引文档，而不是触发 JDBC 河来索引您的文档？

JDBC 河是一种输入大量数据流的好方法，并且有[用于保持与轮询的一致性的文档](https://github.com/jprante/elasticsearch-river-jdbc)。但我认为满足您的实时要求并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T05:19:27.847

听起来您正在努力解决经典的“[推与拉](http://elasticsearch-users.115913.n3.nabble.com/keeping-datastore-and-index-in-sync-Push-Vs-Pull-best-approach-td4032591.html)”索引问题。Rivers 旨在每隔一段时间从数据库中提取数据。它们很容易设置，但就像计算机科学中的所有事物一样，它们是一种权衡。具体来说，您失去了实时索引。您可以触发的一条河流可能是两全其美的，或者它可能会用大量不必要的流量淹没您的服务器（即，当您确切知道哪个文档已更新时，为什么还要执行“SELECT * ...”？）。

如果您有实时索引要求（就像我一样），您可以将更新“推送”到 Elasticsearch。您只需要编写一个 Elasticsearch 客户端，它将在保存更新的记录时将其传送到 Elasticsearch。FWIW，我通过在服务总线上触发消息解决了这个问题，而在另一端等待的服务从 SQL 检索实体并对其进行索引。一旦你有了这个基础设施，编写一个小应用程序来进行 SQL 数据的初始导入或创建一个计划的作业来索引数据就不是什么大问题了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T22:01:00.103

谢谢你的建议。非常欢迎您提供反馈，请加入 elasticsearch 社区。[我将在https://github.com/jprante/elasticsearch-river-jdbc/issues](https://github.com/jprante/elasticsearch-river-jdbc/issues)打开一个触发提取的问题

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-05T08:37:56.113

或者将logstash与jdbc插件一起使用

[https://www.elastic.co/guide/en/logstash/current/plugins-inputs-jdbc.html](https://www.elastic.co/guide/en/logstash/current/plugins-inputs-jdbc.html)

1.  下载logstash
2.  安装 input-jdbc-plugin

示例配置：

```
 input {
            jdbc {
                    jdbc_connection_string => "jdbc:oracle:thin:@localhost:1521:XE"
                    jdbc_user => "user"
                    jdbc_driver_library => "/home/logstash/lib/ojdbc6.jar"
                    jdbc_driver_class => "Java::oracle.jdbc.driver.OracleDriver"
                    statement => "select * from events where update_date > :sql_last_value order by update_date"
                    last_run_metadata_path => "run_metadata_event.log"
                    schedule => "* * * * *"
                    jdbc_password => "password"
            }
    }
    # The filter part of this file is commented out to indicate that it is
    # optional.
    filter {
           mutate {
                   split => { "field_1" => ";"}

           }
    }

    output {
        elasticsearch {
            #protocol => "http"
            hosts => ["localhost:9200"]
            index => "items"
            document_type => "doc_type"
            document_id => "%{doc_id}"
        }
    } 
```

# java - 如何在 Spring MVC 3.1 中重定向后读取 flash 属性？

> ID：11763779
> 
> 赞同：41
> 
> 时间：2012-08-01T16:39:49.687
> 
> 标签：java, spring-mvc

我想知道如何在 Spring MVC 3.1 中重定向后读取 flash 属性。

我有以下代码：

```
@Controller
@RequestMapping("/foo")
public class FooController {

  @RequestMapping(value = "/bar", method = RequestMethod.GET)
  public ModelAndView handleGet(...) {
    // I want to see my flash attributes here!
  }

  @RequestMapping(value = "/bar", method = RequestMethod.POST)
  public ModelAndView handlePost(RedirectAttributes redirectAttrs) {
    redirectAttrs.addFlashAttributes("some", "thing");
    return new ModelAndView().setViewName("redirect:/foo/bar");
  }

} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-01T16:43:42.517

使用`Model`，它应该预先填充了 flash 属性：

```
@RequestMapping(value = "/bar", method = RequestMethod.GET)
public ModelAndView handleGet(Model model) {
  String some = (String) model.asMap().get("some");
  // do the job
} 
```

或者，您可以使用[`RequestContextUtils#getInputFlashMap`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/support/RequestContextUtils.html#getInputFlashMap%28javax.servlet.http.HttpServletRequest%29)：

```
@RequestMapping(value = "/bar", method = RequestMethod.GET)
public ModelAndView handleGet(HttpServletRequest request) {
  Map<String, ?> inputFlashMap = RequestContextUtils.getInputFlashMap(request);
  if (inputFlashMap != null) {
    String some = (String) inputFlashMap.get("some");
    // do the job
  }
} 
```

PS 你可以`return new ModelAndView("redirect:/foo/bar");`在`handlePost`.

**编辑**：

JavaDoc 说：

> 调用方法时，RedirectAttributes 模型为空，并且永远不会使用，除非该方法返回重定向视图名称或 RedirectView。

它没有提到`ModelAndView`，所以也许改变 handlePost 以返回`"redirect:/foo/bar"`字符串或`RedirectView`：

```
@RequestMapping(value = "/bar", method = RequestMethod.POST)
public RedirectView handlePost(RedirectAttributes redirectAttrs) {
  redirectAttrs.addFlashAttributes("some", "thing");
  return new RedirectView("/foo/bar", true);
} 
```

我`RedirectAttributes`在我的代码中使用`RedirectView`and`model.asMap()`方法，它工作正常。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-08-01T19:50:13.360

试试这个：

```
@Controller
public class FooController
{
    @RequestMapping(value = "/foo")
    public String handleFoo(RedirectAttributes redirectAttrs)
    {
        redirectAttrs.addFlashAttribute("some", "thing");
        return "redirect:/bar";
    }

    @RequestMapping(value = "/bar")
    public void handleBar(@ModelAttribute("some") String some)
    {
        System.out.println("some=" + some);
    }
} 
```

适用于 Spring MVC 3.2.2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T04:20:01.367

对于所有像我这样在验证失败时在浏览器中查看 POST url 时遇到问题的人。

POST url 是一个私有 url，不应向用户公开，但在验证失败时会自动呈现。即，如果一个字段低于最小长度。我正在使用@Valid。我希望表单的原始 GET url 始终显示，即使验证反弹回表单，所以我做了以下操作：

```
 if (validation.hasErrors()) {

        redirectAttributes.addFlashAttribute("org.springframework.validation.BindingResult.story", validation);
        redirectAttributes.addFlashAttribute("story", story);
        return new ModelAndView("redirect:/january/2015"); 
```

其中 story 是表单对象表示，redirectAttributes 是您放入方法签名中的 RedirectAttributes，validation 是 BindingResult。/january/2015 是表单所在的 GET 控制器的映射。

在此实施之后，在 /january/2015 的映射中，story 完好无损，如下所示：

```
Story story= (Story) model.asMap().get("story");
//story from the POST method 
```

我不得不增加我的 GET 方法并检查这是否不为空。如果不为空，则将其发送到表单，否则我会将新初始化的 Story 类型作为之前的默认行为发送到表单。

以这种方式，我能够返回到具有完整绑定结果的表单（错误显示在表单上），但我的 GET url 代替了 post url。

# .net - 如何访问 WCF 数据服务客户端中的 WebResponse，以便我可以使用它包含的 cookie？

> ID：11763785
> 
> 赞同：0
> 
> 时间：2012-08-01T16:40:03.217
> 
> 标签：.net, authentication, wcf-data-services, odata

我正在编写一个调用 WCF 数据服务的 .NET 应用程序，该服务需要在 HTTP 标头中传递身份验证凭据。我在 DataServiceContext.SendingRequest 事件处理程序中设置该标头。然后该服务在 cookie 中返回一个身份验证令牌。客户端应在后续调用中提供此 cookie。我可以在 SendingRequest 事件中设置 cookie，但我一直无法找到一种方法来挂钩响应以便首先获取 cookie。（为什么没有 DataServiceContext.ResponseReceived 事件？）谁能告诉我（1）如何挂钩响应以便我可以读取 HttpWebResponse.Cookies 集合，或者（2）如何配置 WCF 数据服务客户端管道自动处理cookies？

感谢您的任何见解或方向！

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:45:04.673

我想不出一种通过事件处理程序来做到这一点的方法。但是您可以通过 OperationResponse 获得它。例如，如果您通过运行 Execute 调用查询，它会返回一个派生自 OperationResponse (http://msdn.microsoft.com/en-us/library/system.data.services.client.operationresponse.aspx) 的实例。这会暴露响应标头。SaveChanges 等也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:16:59.550

尚不清楚您需要在哪里访问 cookie 值，但您应该能够通过在服务的构造函数中连接事件处理程序来连接到处理管道，例如：

```
public ScratchService()
{
    ProcessingPipeline.ProcessingRequest += (source, e) =>
        {
            WebHeaderCollection headers = e.OperationContext.RequestHeaders;
            string acceptHeader = headers["CustomCookie"];
            if (acceptHeader == null || !acceptHeader.Equals("Passw0rd"))
            {
                throw new DataServiceException(403, "You had a bad cookie.");
            }
        };
} 
```

ProcessingRequest 在调用管道的其余部分之前发生，因此这应该是您进行身份验证的合理位置。显然，您需要比上面的示例更安全的东西。:)

# c++ - 基于标准模板库的 TimerCallback 函数，无需 Boost

> ID：11763786
> 
> 赞同：7
> 
> 时间：2012-08-01T16:40:07.337
> 
> 标签：c++, stl, timer

是否有使用 STL 实现的 TimerCallback 库。我无法将 Boost 依赖项引入我的项目。

到期的定时器应该能够回调注册的函数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T17:09:30.510

标准库中没有特定的计时器，但很容易实现：

```
#include <thread>

template <typename Duration, typename Function>
void timer(Duration const & d, Function const & f)
{
    std::thread([d,f](){
        std::this_thread::sleep_for(d);
        f();
    }).detach();
} 
```

使用示例：

```
#include <chrono>
#include <iostream>

void hello() {std::cout << "Hello!\n";}

int main()
{
    timer(std::chrono::seconds(5), &hello);
    std::cout << "Launched\n";
    std::this_thread::sleep_for(std::chrono::seconds(10));
} 
```

请注意，该函数是在另一个线程上调用的，因此请确保它访问的任何数据都得到适当的保护。

# javascript - 当不使用键盘触发时，jQuery 上的文本更改事件

> ID：11763789
> 
> 赞同：1
> 
> 时间：2012-08-01T16:40:27.883
> 
> 标签：javascript, jquery, html, javascript-events

有没有办法在我每次更改文本时触发一个事件，`<input type="text">`而不是按键盘上的键进行更改？

我的意思是我想在有人输入时捕获，右键单击-> 在输入上粘贴或拖动选定的文本，而不仅仅是在按下键时。

我试过了：

```
<input id="some-id" onchange="alert('fired')"> 
```

和

```
$('#some-id').on('change', ev_handler);
$('#some-id').change(ev_handler); 
```

唯一触发的事件是与按键相关的事件，但它们不会在粘贴或拖动时触发

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:52:16.783

**oninput**事件可以满足您的需求，但请注意它在较旧的浏览器中没有得到很好的支持。[您可以在 Dottoro 上](http://help.dottoro.com/ljhxklln.php)找到更多信息。

如果您需要像您提到的那样涵盖所有浏览器和所有用例，那么确实没有更好的方法可以使用 JavaScript 定期检查（例如每 500 毫秒）您的输入值。

[您可以在 StackOverflow 上](https://stackoverflow.com/questions/1948332/detect-all-changes-to-a-input-type-text-immediately-using-jquery)找到关于此的讨论。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-01T16:46:37.570

尝试 onChange 事件，每次更改输入时都应该发出该事件，无论如何。

# c# - 一个视图中带有 ID 的多个模型

> ID：11763790
> 
> 赞同：0
> 
> 时间：2012-08-01T16:40:28.377
> 
> 标签：c#, asp.net-mvc-3

在这个项目上工作，我又被困住了。我认为我需要在侧面显示一个菜单。菜单是从表中提取的。除此之外，我还有一个问题来自另一张桌子。在这里面，会有一些建议是从另一个表中提取的。对于这个问题，我有几个输入、单选按钮和一个用于反馈的文本框，它们最终会出现在不同的表格中。所有这些都必须使用主表中的 ID 进行，这样当信息保存在结果表中时，它也知道它属于哪个主记录。可以使用 /Audit/302 调出该页面，但是当您将子菜单更改为下一个问题时，您如何获得该问题并维护 ID。对于每个问题，都会有该 ID 的条目。我已经建立了关系，这就是它的样子。 ![关系](../Images/c3e8054fec903eb9970adae392befa25.png)

2011 年 8 月 2 日

我添加了一个 ViewModel，它从名为 Score (OK, Concern, N/A) 的表中提取复选框列表

我拥有的页面使用 ID 呈现，它从 AuditSchedules 中提取记录并检索一些信息。在布局中，我还有一个侧面菜单（部分），它呈现将选择不同部分的操作链接列表和一个 MainQuestion（部分）。我们一直在努力。由于我添加了 viewModel 来填充复选框并将文本保存到具有 AuditSchedule 和 MainQuestion 的 ID 的表中。我的问题是我要求 id 从表中为分数选择 id，它正在从 AuditSchedule 中获取 id。给我一个没有找到数据。这是我的控制器：

```
 //get
    public ActionResult _Forms(int score)
    {
        AuditFormEdit viewModel = new AuditFormEdit();
        viewModel.ScoreInstance = _db.Scores.Single(r => r.ScoreID == score);
        viewModel.InitializeScoreCheckBoxHelperList(_db.Scores.ToList());
        return View(viewModel);
    }

    //post
    [HttpPost]
    public ActionResult _Forms(int score, AuditFormEdit viewModel)
    {
        if (ModelState.IsValid)
        {
            viewModel.PopulateCheckBoxsToScores();
            _db.Entry(viewModel.ScoreInstance).State = System.Data.EntityState.Modified;
            _db.SaveChanges();
            return RedirectToAction("/");
        }
        else
        {
            return View(viewModel);
        }
    } 
```

这是我的视图模型：

```
 public class AuditFormEdit
{
    public Models.Score ScoreInstance { get; set; }

    public List<ScoreCardCheckBoxHelper> ScoreCardCheckBoxHelperList { get; set; }

    public void InitializeScoreCheckBoxHelperList(List<Models.Score> ScoreList)
    {
        if (this.ScoreCardCheckBoxHelperList == null)
            this.ScoreCardCheckBoxHelperList = new List<ScoreCardCheckBoxHelper>();

        if (ScoreList != null
            && this.ScoreInstance != null)
        {
            this.ScoreCardCheckBoxHelperList.Clear();
            ScoreCardCheckBoxHelper spacerProductCheckBoxHelper;
            string spacerTypes =
                string.IsNullOrEmpty(this.ScoreInstance.ScoreName) ?
                string.Empty : this.ScoreInstance.ScoreName;
            foreach (Models.Score scoreType in ScoreList)
            {
                spacerProductCheckBoxHelper = new ScoreCardCheckBoxHelper(scoreType);
                if (spacerTypes.Contains(scoreType.ScoreName))
                    spacerProductCheckBoxHelper.Checked = true;
                this.ScoreCardCheckBoxHelperList.Add(spacerProductCheckBoxHelper);
            }
        }
    }

    public void PopulateCheckBoxsToScores()
    {
        this.ScoreInstance.ScoreName = string.Empty;
        var scoreType = this.ScoreCardCheckBoxHelperList.Where(x => x.Checked)
                              .Select<ScoreCardCheckBoxHelper, string>(x => x.ScoreName)
                              .AsEnumerable();
        this.ScoreInstance.ScoreName = string.Join(", ", scoreType);
    }

    public class ScoreCardCheckBoxHelper : Models.Score
    {
        public bool Checked { get; set; }

        public ScoreCardCheckBoxHelper() : base() { }

        public ScoreCardCheckBoxHelper(Models.Score scoreCard)
        {
            this.ScoreID = scoreCard.ScoreID;
            this.ScoreName = scoreCard.ScoreName;
        }
    }

} 
```

这是拉动页面的链接和控制器，这是布局的主体：

```
 public ActionResult Audit(int id)
    {
        var auditToDetail  = _db.AuditSchedules.Single(r => r.AuditScheduleID == id);
        return View(auditToDetail);
    } 
```

链接如下所示：

```
/AuditSchedule/Audit/257 
```

需要帮助请叫我。

我使用了代码优先的方法，并且所有表都具有调用关系的模型。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:03:45.857

你的问题很笼统 - 但这里有一些事情需要考虑。

首先，在 MVC3 中，您通常希望将视图强类型化到模型中。在您的情况下，您希望每个模型都有一个视图。您不希望“一个视图中有多个模型”，而是希望多个视图一起呈现在一个页面上 - 所有这些都由一些公共数据链接。

实现此目的的一种方法是`[ChildActionOnly]`在控制器中设置编写“子操作”（使用：属性），以填充每个单独的模型，将它们发送到各自的单独视图。您可以在任何视图中使用 [Html.RenderAction][3] 函数来渲染任何其他视图。组织它的最简单方法通常是使用布局 4 - 您可以使用 渲染所有视图`Html.RenderAction()`，然后将主窗体渲染为主视图（在布局中显示`@RenderBody()`）。

要填充每个模型，您可能需要知道一些数据（如 id），这些数据可以存储在 ViewBag 或 ViewData 中，并作为`Html.RenderAction`函数中的对象传入。（如果您使用 razor，则视图中的调用可能类似于：`@{Html.RenderAction("actionName", new {object1 = "xyz", object2 ="abc"});}`为了清楚起见，逻辑流程将如下所示

1.  使用渲染子视图所需的数据填充 ViewBag，
2.  为主窗体填充模型，然后调用主窗体的视图（您的主视图）。
3.  您的主视图定义了一个布局视图，该视图反过来调用`Html.RenderAction`，使用 ViewBag 数据设置适当的对象。
4.  布局还将主视图呈现为“主体”( `@RenderBody()`)。

这样做的最终结果是视图可以 [强类型化][7] 到各个视图，以及每个模型的各个控制器操作。这是一件好事，因为它使您的视图可以在任何地方重用，并且隔离了填充每个模型的逻辑（因为每个模型在控制器中都有自己的操作）。如果您对模型进行后续更改，则很容易知道需要修改哪个 Action/Model/View。

以下是一些资源，可帮助您开始了解在单个页面上呈现多个模型的选项。我很抱歉没有在这篇文章中添加指向有用项目的漂亮链接，但作为一个新的回答者，我仅限于两个......谷歌将不得不成为你其他人的指南。

希望这会有所帮助 - 祝你好运！

资源：

[Html.RenderAction 和 Html.Action - http://haacked.com 博客](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)

[何时在 ASP.NET MVC Razor 视图中使用 Html.RenderPartial 和 Html.RenderAction - http://www.arrangeactassert.com](http://www.arrangeactassert.com/when-to-use-html-renderpartial-and-html-renderaction-in-asp-net-mvc-razor-views/)

# javascript - 刷新页面后保持计数器？

> ID：11763794
> 
> 赞同：0
> 
> 时间：2012-08-01T16:40:59.840
> 
> 标签：javascript, jquery, html, storage

我需要为我正在制作的游戏保留一个柜台。每次他们赢了一场比赛，我都想在柜台上加一个。但是，每次他们获胜时，页面都会刷新以开始新游戏。即使重新加载页面，有没有办法让这个计数器保持更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:43:53.593

如果使用兼容的浏览器，则将值存储在 cookie 或 localStorage 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:43:59.747

您可以使用 cookie，这是一个非常简单的 jQuery cookie 插件示例：

代码：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

使用示例：[http ://www.electrictoolbox.com/jquery-cookies/](http://www.electrictoolbox.com/jquery-cookies/)

**设置cookie：**

```
$.cookie("example", "foo", { expires: 7 }); 
```

**获取 cookie 值：**

```
alert( $.cookie("example") ); 
```

非常干净紧凑:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:44:03.413

把它放在饼干里。嗯……饼干。好吃。

[https://developer.mozilla.org/en/DOM/document.cookie](https://developer.mozilla.org/en/DOM/document.cookie)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:45:22.297

[w3school cookie](http://www.w3schools.com/js/js_cookies.asp)给出了一个简单的解释。
很快，这是一种将浏览器数据保存在本地计算机上的方法。

```
// So, you may try
setCookie("win_count",value,exdays); // to set some data to "win_count"
// and after the page was reloaded to restore the win counter with the help of:
getCookie("win_count"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T16:45:50.407

***使用 cookie***

jQuery：

```
$.cookie("example", "foo", { expires: 7 }); 
```

纯 JavaScript：

```
function getCookie(name) {
    var matches = document.cookie.match(new RegExp("(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"))
    return matches ? decodeURIComponent(matches[1]) : undefined
}

function setCookie(name, value, props) {
    props = props || {}
    var exp = props.expires

    if (typeof exp == "number" && exp) {
        var d = new Date()
        d.setTime(d.getTime() + exp * 1000)
        exp = props.expires = d
    }

    if (exp && exp.toUTCString) {
        props.expires = exp.toUTCString()
    }

    value = encodeURIComponent(value)

    var updatedCookie = name + "=" + value

    for (var propName in props) {
        updatedCookie += "; " + propName
        var propValue = props[propName]
        if (propValue !== true) {
            updatedCookie += "=" + propValue
        }
    }

    document.cookie = updatedCookie
}

function deleteCookie(name) {
    setCookie(name, null, {
        expires: -1
    })
} 
```

# php - 永久链接更改 wordpress 中的每个帖子更新

> ID：11763795
> 
> 赞同：1
> 
> 时间：2012-08-01T16:41:05.457
> 
> 标签：php, wordpress, wordpress-theming, permalinks

我想为 WordPress 中的每个新帖子创建一个自定义永久链接，例如：http: [//mysite.com/x5Kvy6](http://mysite.com/x5Kvy6)。

```
function wp_unique_post_slug($col,$table='wp_posts'){
     global $wpdb;

     $alphabet = array_merge( range(0, 9), range('a','z') );

     $already_exists = true;
     do {

         $guidchr = array();
         for ($i=0; $i<32; $i++)
         $guidchr[] = $alphabet[array_rand( $alphabet )];

         $guid = sprintf( "%s", implode("", array_slice($guidchr, 0, 12, true)) );

       // check that GUID is unique
       $already_exists = (boolean) $wpdb->get_var("
       SELECT COUNT($col) as the_amount FROM $table WHERE $col = '$guid'
       ");

      } while (true == $already_exists);

     return $guid;
} 
```

当我替换 post.php（wordpress 核心）中的字体时，这个脚本运行良好，但不幸的是，每次更新后的永久链接都会发生变化。如何避免这种情况？以及如何编辑自定义可选关键字 (http://mysite.com/keyword)。

欢迎任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:19:01.563

读这个

[http://codex.wordpress.org/Using_Permalinks](http://codex.wordpress.org/Using_Permalinks)

![在此处输入图像描述](../Images/d954da5a299db5514fe05b3f88d4a9f1.png)

或者

```
function wp_unique_post_slug( $slug, $post_ID, $post_status, $post_type, $post_parent ) {

if($slug!=""){
  $random=rand(11111,99999); //I needed 5 digit random
  $slug = $random;
}
return $slug;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:50:53.383

你想试试这个插件。

[http://wordpress.org/extend/plugins/custom-permalinks/](http://wordpress.org/extend/plugins/custom-permalinks/)

# doctrine-orm - Symfony 2 和 Doctrine 2：实体之间的复杂关系

> ID：11763796
> 
> 赞同：1
> 
> 时间：2012-08-01T16:41:07.097
> 
> 标签：doctrine-orm, many-to-many

我有两个实体。首先称为“状态”：

```
<?php
class Status {
    protected $id;
    protected $type = null; // standarized type of status (f.e. "locked", "disabled")
    protected $value = true; // true or false (value of status)
    protected $change_reason = null;
    protected $changed_by;
    protected $changed_at;
} 
```

我已清除注释以提高可读性。

第二个称为例如。帐户。因为帐户不是唯一使用状态的实体，所以状态和任何其他“可状态”实体（我认为）的关系应该是多对多的。对于 Account 会有连接表 account_status 等。

另外一种状态仅属于一个实体。

这一切都适用于该配置，但我真的不知道如何检索具有最新状态的帐户列表。

我编写了一个 SQL 查询来检索实际状态：

```
SELECT * FROM (
    SELECT t.type, t.value
    FROM status AS t
    ORDER BY t.changed_at DESC
) AS t1 GROUP BY t1.type 
```

我的问题是：

1.  这个想法完全正确吗？
2.  如何检索具有所有最新状态的帐户列表？

对不起我的英语不好。

**编辑**：我只想获取一个帐户，加入其最新状态，然后通过以下方式简单地获取它们： $task -> getStatus('highlighted') 以获取“突出显示”类型的最新（最年轻）状态的值

**EDIT2**：理想的仍然能够按给定类型的状态进行排序和过滤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:48:56.913

```
class Task {

    // this is list of all statuses
    protected $statusHistory;

    protected $lastStatus;

    public function __construct() {
        $this->statusHistory = new Arraycollection();
    }

    public function addStatus($status) {
        $this->statusHistory[] = $status;
        $this->lastStatus = $status;
    }

    public function getStatusHistory() {
        return $this->statusHistory;
    }

    public function getLastStatus() {
        return $this->lastStatus;
    }
}

// to get list of statuses
$task->getStatusHistory();

// to get last status, it returns Status object, not collection
$task->getLastStatus(); 
```

当您需要集合中的第一个/最后一个元素并且获取整个集合可能是开销时，这或多或少是标准方法。

# django - 使用主干/余烬使 django 成为一个简单的 REST API？

> ID：11763798
> 
> 赞同：14
> 
> 时间：2012-08-01T16:41:18.060
> 
> 标签：django, backbone.js, ember.js

我已经阅读了几篇关于使用新的 JS 框架（如 Backbone.js 或 Ember.js）的文章

我提出了这样的说法：如果我使用像 Backbone.js/Ember.js 这样的 JS 框架，那么我会将逻辑从后端（Django）移动到前端。

因此，Django 真的会只用于它的模型吗？这是否意味着不再需要 Django 视图和 Django 模板，并且 Django 后端有点变成了将由前端使用的“基本”REST API。

你同意？在这种情况下，这是 Django 的目的吗？

将 django 后端转换为 REST API 是在前端使用像 Backbone.js/Ember.js 这样的框架时最合适的用例之一吗？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T20:09:04.390

Django 非常适合以这种方式使用，您仍然可以获得管理员、模型、orm 和所有第三方插件。但是，它的速度并不快，因此，如果您正在执行简单的文档级别、非关系 REST 映射，您可能不想查看 node.js 和 mongoDB。

如果您坚持使用 django（就像我们一样，我们喜欢它给我们的结构），您可以使用 REST 插件之一：

*   [Django Rest Framework](http://django-rest-framework.org/)自 DRF 2.0 以来的完美匹配，正在非常积极的开发中！
*   [Django Tastypie](https://github.com/toastdriven/django-tastypie)（结帐[骨干-tastypie.js](https://github.com/PaulUithol/backbone-tastypie)以进行集成）
*   [Django Piston](https://bitbucket.org/jespern/django-piston/src/7c90898072ce/piston)（可能有点陈旧或最近有发展？）

如果您只想进行前端开发，请查看后端即服务站点，例如[cloudmine.me](http://cloudmine.me)或[firebase.com](http://firebase.com)，它们会为您处理所有后端内容，当然要付出代价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:01:43.420

一旦您开始考虑单页解决方案和 Javascript 应用程序，Django 可能看起来就没有必要了，但是如果您希望您的网站能够“防故障”，那么开发网站的客户端 Javascript 版本和后端并不是不可能的django 端以防用户或您网站的 javascript 在某种程度上失败。当然，这需要创建您的站点两次，并且在现代浏览器时代可能不需要，但这将是您将两者混合以获得完整解决方案的少数情况之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T18:29:31.950

是的，就是这样。您可以使用它来管理对资源等的身份验证，也可以为您的应用程序使用主视图，但您不需要使用服务器端模板，因为这些框架是为处理 json/xml 响应而设计的。

这就是为什么很多人转向更轻量级的后端/主干或 ember 组合，而不是像 django 这样的完整解决方案。您还可以使用 django 来缓存 json 响应，从而使您的应用程序看起来更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T19:45:59.650

我们正在这样做并使用 django-piston 让您更轻松。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T00:47:22.507

通常你在 Django 下创建你的整个网站，并且只有一个页面是使用主干.js 的“单个应用程序页面”，通常该页面是一个非常互动的页面，有很多经常发生的小更新，需要非常快速地显示出来用户。这个页面，由于大量的变化和用户交互是在客户端构建的，所以你使用的是他的PC资源而不是服务器的，其余页面可以使用django，因为它为你提供了一个非常稳定和安全的服务端框架

# asp.net-mvc-2 - 使用 asp.net mvc 2.0 将数据库中的数据绑定到下拉列表

> ID：11763799
> 
> 赞同：0
> 
> 时间：2012-08-01T16:41:22.260
> 
> 标签：asp.net-mvc-2

我从表 tblemployee 中选择的数据有问题，我想将其绑定到下拉列表。

**模型**

```
 public class UserModels
{
    public string EmployeeName { get; set; }
    public int EmployeeCode { get; set; }
    public IEnumerable<SelectListItem> Employee { set; get; }
} 
```

**控制器**

```
public ActionResult Education() {

        var query = (from e in context.tblEmployee_Employee
                     select new
                     {
                         empID = e.Code,
                         EmpName = e.NameEng
                     }
                              ).ToList();

        var model = new UserModels();
        var _Emp = query;
        foreach (var item in _Emp)
        {
            model.EmployeeCode = item.empID;
            model.EmployeeName = item.EmpName;
            model.Employee = new SelectList(_Emp, "EmpName", "EmpName");

        }

        return View(model);
    } 
```

**看法**

```
 <%= Html.DropDownListFor(x => x.EmployeeName, Model.Employee, "select EmployeeName")%> 
```

我收到错误消息“对象引用未设置对象的实例”。任何知道的人请告诉我如何解决它。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:43:54.927

试试这样：

```
public ActionResult Education() 
{
    var model = new UserModels();
    model.Employee = context
        .tblEmployee_Employee
        .ToList()
        .Select(e => new SelectListItem
        {
            Value = e.Code.ToString(),
            Text = e.NameEng
        });
    return View(model);
} 
```

并确保您的视图是强类型的`UserModels`视图模型，然后：

```
<%= Html.DropDownListFor(
    x => x.EmployeeName, 
    Model.Employee, 
    "select EmployeeName"
) %> 
```

# java - 如何像 Java 文档一样用 Java 记录我的方法？

> ID：11763803
> 
> 赞同：17
> 
> 时间：2012-08-01T16:41:28.453
> 
> 标签：java, documentation, javadoc

我希望当我将鼠标悬停在一个方法上时，当我将鼠标悬停在 Java 的方法上时，我能够看到该方法的文档，我知道 /** */ 是如何完成的，但是：

1.  你如何解释 Params 代表什么？

2.  你如何创建一个新行，或者使一个单词粗体或斜体？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-01T17:01:25.797

在大多数主流 IDE 中，例如 IntelliJ 的 IDEA、Apache Netbeans 或 Eclipse；你可以输入

```
/** 
```

然后回车，它会为你的方法生成Javadoc，包括参数、返回值等。你只需要输入描述。

这同样适用于类声明（Javadoc 注释始终与以下元素相关）

**例如**

```
/**
 * create_instance
 * @param array of attributes for instance containing web, db, arrival_rate, response_time for instance 
 * respectively.
 * @return Instance object
 */ 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-01T16:44:01.407

> 你如何解释 Params 代表什么？

使用`@param`标签：

```
/**
 * @param paramName Explanation of the param
 */
public void foo(String paramName); 
```

> 你如何创建一个新行，或者使一个单词粗体或斜体？

使用标准 HTML，即`<p></p>`, `<br/>`, `<strong>`and `<em>`（或语义较少的`<b>`and `<i>`）

# unity3d - 具有 DirectionalLight 组件的 GameObject 未被照亮

> ID：11763815
> 
> 赞同：1
> 
> 时间：2012-08-01T16:42:28.703
> 
> 标签：unity3d, light, orthographic, qcar-sdk, gameobject

我正在使用 Unity3D 和 Vuforia 做一个增强现实应用程序。
对于我的增强现实场景中的每个游戏对象，我都会向它添加一个 Light 组件并将其定义为 DirectionalLight。在这个场景中，游戏对象被照亮，但是当我切换到另一个场景（不破坏游戏对象）时，它们没有。
我已经检查过了，他们仍然有 Light 组件，但由于某种原因没有被照亮。
你们有什么线索可能是什么问题吗？

PS：第二个场景是正常场景，与手机摄像头没有互动。并且相机上的投影是正交的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:07:22.077

如果没有更多细节，很难肯定地说，但我首先怀疑的是你是否在灯光或相机上剔除图层。

灯在哪个“层”上？相机是否设置为忽略这些图层？

灯光设置为照亮哪些“层”？这些层上的对象是什么？

# mysql - 通过在 has_many 中验证唯一性

> ID：11763817
> 
> 赞同：1
> 
> 时间：2012-08-01T16:42:41.290
> 
> 标签：mysql, ruby-on-rails, validation, has-many-through

我有一个`User`可以有很多`Restaurants`。我也可以有多个用户。

我想拥有它，以便如果**用户 A**创建**Restaurant A**，他***不***应该能够创建另一家同名的餐厅。

但是，如果**用户 B**去创建**餐厅 A** ，那应该是允许的，但之后仍然不能创建*另一个* **餐厅 A。**

我有以下`has_many through`关系：

**餐厅.rb**

```
has_many :ownerships
has_many :users, :through => :ownerships

# This following ensures uniqueness of the name within the 
#   Restaurants table regardless of who the User is that created it.
validates :name, presence: true, uniqueness: true 
```

**用户.rb**

```
has_many :ownerships
has_many :restaurants, :through => :ownerships 
```

**所有权.rb**

```
belongs_to :restaurant
belongs_to :user 
```

* * *

## 我试过的

**1\. 添加 :uniqu => true**

我尝试将 :uniq => true 添加到 restaurant.rb 文件，所以它看起来像这样：

```
has_many :ownerships
has_many :users, :through => :ownerships, :uniq => true 
```

并`uniqueness: true`从验证中删除，所以它看起来像这样：

```
validates :name, presence: true 
```

但这没有任何用处。

**2.在ownership.rb中添加验证**

我尝试将验证添加到`ownership.rb`文件中：

```
validates :restaurant, uniqueness: {:scope => :user} 
```

但我得到：

```
NoMethodError in RestaurantsController#create
undefined method `text?' for nil:NilClass 
```

而且我似乎无法告诉它在此验证中查找用户范围内的餐厅名称。

**3\. 创建 before_create 回调函数**

在我的`restaurant.rb`文件中，我声明了以下内容：

```
before_create :check_uniqueness

def check_uniqueness?
  user = User.find_by_id(self.user_ids)

  isUnique = false
  user.restaurants.each do |restaurant|
    if !Restaurant.find_by_name(self.name).nil? # Restaurant w/ same now found
      isUnique = false
    else
      isUnique = true
    end
    return isUnique
  end
end 
```

我的假设是，在创建餐厅记录之前，它会进行此`check_uniqueness`检查，如果函数返回 false，则不会保存。

但是当我点击提交按钮时出现以下错误：

```
NameError in RestaurantsController#create
undefined local variable or method `check_uniqueness' for #<Restaurant:0x007f95a16d10f8> 
```

* * *

## 工作解决方案

感谢[Robert Chuchro 在下面的帮助](https://stackoverflow.com/a/11763973/1393002)，我能够进行验证。这是我所做的：

**餐厅.rb**

```
before_create :unique_per_user?

def unique_per_user?
  user = User.find_by_id(self.user_ids)
  restaurant = user.restaurants.find(:all, :conditions => ["name = ?", self.name])

  if restaurant.size > 0
    self.errors.add(:name, ": You've already created a restaurant with this name.")
  end

  return (restaurant.size <= 0)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:54:26.537

您可以尝试在餐厅模型中定义一种方法来执行此操作

```
def unique_per_user?
  #get user trying to create restaurant, either by paramter or association
  #check if any of the user's current restaurant names match this name (return true/false)
end 
```

现在，无论您在哪里定义一个新餐厅，检查它的 unique_per_user 是否？在决定保存之前。

# javascript - 定义 CommonJS 模块时的 fn.call(this) 与 fn()

> ID：11763819
> 
> 赞同：3
> 
> 时间：2012-08-01T16:42:53.880
> 
> 标签：javascript, node.js, commonjs

使用以下习惯用法定义 CommonJS 模块是很常见的：

```
(function() {
   var logThis = function() { console.log(this); }
   module.exports = logThis;
}).call(this); 
```

例如，[Underscore.js就是这样做的。](https://github.com/documentcloud/underscore/blob/master/underscore.js)

我只花了半个小时和一位同事讨论他们为什么用`call(this)`. 这将导致`this`闭包内部的值从调用者继承，而不是设置为全局对象。但是，当我在 Node.js 中对此进行测试时，`this`模块内部的值始终是全局对象，即使我像这样加载并运行它：

```
var bar = {};
bar.foo = function() { var foo = require("./foo"); foo(); } 
```

我真的希望`bar`在控制台中看到该对象，但实际上我看到的是全局对象。然后我想到这可能是因为像 Underscore.js 这样的模块也用于 Web 上下文。但在那种情况下，它会被加载一个 <script> 标签，所以无论如何它`this`总是等于全局对象。

是什么赋予了？我确信使用这种结构是有原因的，但在这种特殊情况下，无论模块是在 Node.js 中还是在网页中使用，我都看不出实际的区别。

**更新：**为了澄清，我可以想到一些*可能会*产生影响的情况。例如，如果我说：

```
var bar = {}
var foo = require("./foo");
bar.foo = foo;
bar.foo(); 
```

（感谢@Pointy 纠正我原来的例子。）

我希望模块中的闭包在`require()`被调用时被评估，这意味着它`this`内部的值将绑定到全局对象，即使`foo()`随后作为“bar”的成员调用，也会将其写入控制台“ 目的。但是，即使在此示例中，我也会在控制台中看到“栏”对象。我想这`this`并没有像我预期的那样被关闭？

简而言之，我正在寻找一个示例，其中像 Underscore.js 这样的模块将具有不同的行为，因为它被包装在一个调用的闭包中，`fn.call(this)`而不是只是`fn()`在 Node.js 或网页中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:45:44.440

您在“bar.foo”中对“foo”的调用是在没有任何上下文的情况下进行的，因此使用了全局上下文。`this`它在引用“bar”的函数内部的事实是不相关的；这不是 JavaScript 的工作方式。换句话说，唯一重要的是函数是如何被调用的，而不是*在哪里被调用。*

如果“bar.foo”看起来像这样：

```
bar.foo = function() { require("./foo"); foo.call(this); } 
```

然后你会在控制台中看到“栏”。或者，您可以这样做：

```
var bar = {};
require("./foo");
bar.foo = foo; 
```

然后调用`bar.foo()`也会记录“bar”对象。（这在 Node 中真的有效吗？也就是说，我认为`require()`返回了一个对象，并且它不只是将事物留在全局范围内。不过，我是 Node 的新手。）

*编辑*-好的，感谢您的更新。因此，我的示例将更正如下。首先，我认为你的模块应该是这样的：

```
(function() {
   var logThis = function() { console.log(this); }
   module.exports.logThis = logThis;
}).call(this); 
```

也就是说，我认为您想探索“logThis”函数，因此需要将它作为命名属性绑定到“exports”对象。

然后：

```
var bar = {};
var foo = require("./foo");
// At this point, foo.logThis is the function 
bar.foo = foo.logThis;
// Now the "foo" property of "bar" is a reference to the same function
bar.foo(); // logs the "bar" object

var fee = { fie: foo.logThis };
fee.fie(); // logs the "fee" object 
```

# winapi - MiniDumpReadDumpStream 和多个相同类型的流

> ID：11763820
> 
> 赞同：1
> 
> 时间：2012-08-01T16:42:56.377
> 
> 标签：winapi, dump

我正在使用以下函数来读取包含用户定义流的 .dmp 文件。现在我的问题是，在我的转储中，存在多个流类型相同的流。

```
BOOL WINAPI MiniDumpReadDumpStream(
  __in   PVOID BaseOfDump,
  __in   ULONG StreamNumber,
  __out  PMINIDUMP_DIRECTORY *Dir,
  __out  PVOID *StreamPointer,
  __out  ULONG *StreamSize
); 
```

据我在测试中看到的，上述函数只会返回给我这种流的第一次出现，而忽略所有其他的，因为它按流的类型而不是出现的索引检索流。如果我使用 dumpchk.exe 实用程序分析我的转储文件，它会正确显示所有其他存在的流​​。我也能够用我自己的阅读器代码正确读出流，这很丑陋，所以我真的不想使用它。

所以只是为了澄清。这是 MiniDumpReadDumpStream 函数的问题，还是有禁止具有相同类型的多个流的规则？我在文档（msdn）中找不到这样的说明......或者有没有办法让函数返回其他流？

期待您的回答...

最好的问候，法比安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:42:07.560

事实上，[MINIDUMP_STREAM_TYPE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680394%28v=vs.85%29.aspx)中枚举的流类型是唯一的，这些类型在同一个转储中出现 0 次或 1 次。自定义流 ( [MINIDUMP_USER_STREAM](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680527%28v=vs.85%29.aspx) ) 可以在同一个转储中存在 0 次或多次。无法使用 MiniDumpReadDumpStream 索引自定义流。由于自定义流的大小是众所周知的 - 以编程方式将这些流放入转储的人 - 一旦使用 MiniDumpReadDumpStream 检索到第一个自定义流，您可以通过在内存中移动光标来解决所有这些问题。

# c# - 读取字符串每个数字c#

> ID：11763821
> 
> 赞同：5
> 
> 时间：2012-08-01T16:43:06.000
> 
> 标签：c#, list

假设这是我的 txt 文件：

```
line1
line2
line3
line4
line5 
```

我正在阅读此文件的内容：

```
 string line;
List<string> stdList = new List<string>();

StreamReader file = new StreamReader(myfile);
while ((line = file.ReadLine()) != null)
{                
    stdList.Add(line);           
}
finally
{//need help here
} 
```

现在我想读取 stdList 中的数据，但每 2 行只读取一次值（在这种情况下，我必须读取“line2”和“line4”）。谁能让我以正确的方式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T16:48:19.433

甚至比 Yuck 的方法更短*，并且*不需要一次性将整个文件读入内存:)

```
var list = File.ReadLines(filename)
               .Where((ignored, index) => index % 2 == 1)
               .ToList(); 
```

诚然，它确实需要 .NET 4。关键部分是它的[重载`Where`](http://msdn.microsoft.com/en-us/library/bb549418.aspx)提供了索引以及谓词要作用的值。我们并不真正关心值（这就是我将参数命名为的原因`ignored`）——我们只需要奇数索引。显然，我们在构建列表时关心值，但这很好——它只被谓词忽略。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T16:45:55.657

您可以将文件读取逻辑简化为一行，然后以这种方式遍历每一行：

```
var lines = File.ReadAllLines(myFile);
for (var i = 1; i < lines.Length; i += 2) {
  // do something
} 
```

**编辑**：从你`i = 1`的`line2`例子开始。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-01T16:45:55.217

在循环内添加条件块和跟踪机制。（循环体如下：）

```
int linesProcessed = 0;
if( linesProcessed % 2 == 1 ){
  // Read the line.
  stdList.Add(line);
}
else{
  // Don't read the line (Do nothing.)
}
linesProcessed++; 
```

该行`linesProcessed % 2 == 1`说：取我们已经处理过的行数，并找到`mod 2`这个数的。（将该整数除以 2 时的余数。）这将检查处理的行数是偶数还是奇数。

如果您没有处理任何行，它将被跳过（例如第 1 行，您的第一行。）如果您已经处理了一行或任何奇数行，请继续处理当前行（例如第 2 行。）

如果模块化数学给您带来任何麻烦，请参阅问题：[https ://stackoverflow.com/a/90247/758446](https://stackoverflow.com/a/90247/758446)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T16:46:52.287

试试这个：

```
string line;
List<string> stdList = new List<string>();

StreamReader file = new StreamReader(myfile);
while ((line = file.ReadLine()) != null)
{
    stdList.Add(line);
    var trash = file.ReadLine();  //this advances to the next line, and doesn't do anything with the result
}
finally
{
} 
```

# c# - MonoGame - Android SamplerState.LinearWrap

> ID：11763826
> 
> 赞同：1
> 
> 时间：2012-08-01T16:43:25.760
> 
> 标签：c#, android, .net, xamarin.android, monogame

我们`SamplerState.LinearWrap`过去常常在游戏中平铺很多东西。我们的游戏共享一个`SpriteBatch`对象，调用`Begin()`如下：

```
_spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend, SamplerState.LinearWrap, DepthStencilState.None, _rasterState); 
```

这适用于 Windows 上的 XNA 以及 iOS 上的 MonoGame。

问题是，在 Android 上，如果打开 LinearWrap，任何非二次幂大小的纹理都会呈现为黑色矩形，即使它是以不需要包裹的方式绘制的。如果我们切换到`SamplerState.LinearClamp`（默认），这些纹理在 Android 上不再呈现黑色。通常，如果您尝试平铺它们（在其他平台上），两个纹理的非幂次方会留下空白空间，直到下一个最大的二次方幂。

这是 Android 上 OpenGL 的限制，还是 MonoGame 中的问题？我不想将每个纹理的大小调整为 2 的幂，但如果这是唯一的选择（或者有充分的理由），我们会这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:43:59.210

通过 MonoGame 挖掘，我在 ESTexture2D.cs 中发现了这个：

```
 _width = imageSource.Width;
                _height = imageSource.Height;

                // There are rules for npot textures that we must abide by (wrap = ClampToEdge and filter = Nearest or Linear)
                if (!MathHelper.IsPowerOfTwo(_width) || !MathHelper.IsPowerOfTwo(_height))
                {
                    //filter = ALL11.Linear;
                    //wrap = ALL11.ClampToEdge;
                    _width = (int)Math.Pow(2, Math.Min(10, Math.Ceiling(Math.Log10(imageSource.Width) / Math.Log10(2))));
                    _height = (int)Math.Pow(2, Math.Min(10, Math.Ceiling(Math.Log10(imageSource.Height) / Math.Log10(2))));
                } 
```

我注释掉了 和 的更改，`filter`并将`wrap`大小调整为 2 的幂。

这解决了我的问题，但我不确定是否是 MonoGame 的有效修复。不知道你用了会有什么效果`SamplerState.LinearClamp`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T17:21:27.337

我相信这已在develop3d 分支中修复。

D.

# asp.net - 一个用于显示和编辑/更新信息的 ASP.NET 网页

> ID：11763829
> 
> 赞同：0
> 
> 时间：2012-08-01T16:43:28.940
> 
> 标签：asp.net, ado.net

我已经看到 ASP.NET`DetailsView`控件可以在同一个网页中插入、显示、编辑/更新信息。我想在不使用`DetailsView`或任何其他 ADO.NET 控件的情况下执行此操作。

如何在同一个 ASP.NET 网页中显示帐户信息、编辑信息和更新（而不是插入）？你能详细描述一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:47:34.113

我看过一些使用gridview 完成的教程。通常有一个标记为 EDIT 的列，它启动编辑模式。

[http://msdn.microsoft.com/en-us/library/ms972948.aspx](http://msdn.microsoft.com/en-us/library/ms972948.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:52:13.117

是的，你绝对可以自己做。

您可以在页面上创建标签和文本框，并将它们与类后面代码中的公共变量绑定。

然后调用`Page.DataBind()`绑定数据。

样本：

ASP:

```
Name: <asp:textbox id=txt text="<%# Name %>" runat=server />
Age: <asp:textbox id=txt text="<%# Age %>" runat=server /> 
```

aspx.cs：

```
public string Name { get; set; }

public int Age { get; set; }

void Page_Load(Object sender, EventArgs e) 
{
   Name = "Pascal";
   Age = 1;
   Page.DataBind();
} 
```

请参阅[Asp.net 数据绑定概述](http://support.microsoft.com/kb/307860)

# php - 如何让内置的联系表单在 Magento 的 CMS 页面中工作？

> ID：11763832
> 
> 赞同：0
> 
> 时间：2012-08-01T16:43:36.850
> 
> 标签：php, xml, magento, contact-form, magento-1.7

[我在这里](http://prodetailcarcare.evermight.com/2/contact/)将联系表实现为 CMS 页面。

如您所见，表格显示得很好。但是，当我填写表格进行测试并单击“发送”时，没有任何消息指示邮件是正确发送还是发送失败。但是会加载一个新页面，所以我认为它正在做一些事情。当我检查我的电子邮件时，没有电子邮件来。我也检查过垃圾邮件文件夹。

当前设置：

在 CMS 页面中，我有以下代码：

```
{{block type="core/template" name="contactForm" form_action="/contacts/index/post" template="contacts/form.phtml"}} 
```

在 form.phtml 文件中，我已将 form 标记 action 属性修改为：

```
<form action="/contacts/index/post/" id="contactForm" method="post"> 
```

我已经尝试过的东西：

而且我不认为它是服务器，因为我在登录管理员时尝试了“忘记密码”，并且我收到了一封重置密码的电子邮件。

在系统配置中，我已验证“启用联系我们”为“是”。“禁用电子邮件通信”为“否”。如果“设置返回路径”为“是”或“否”，则没有区别。

它设置为发送到与 Magento 站点所在的服务器不同的电子邮件地址。电子邮件地址是 Google Apps 电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:51:55.713

好的，我想通了。由于某种原因，需要另一个父文件夹的操作属性中的路径。所以在我的情况下，它应该是

```
<form action="/2/contacts/index/post/" id="contactForm" method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T12:55:27.420

只需转到 app/design/frontend/your_theme/default/template/contacts/form.phtml 并将表单操作设置为`<?php echo $this->getFormAction(); ?>`

```
<form action="<?php echo $this->getFormAction(); ?>" id="contactForm" method="post"> 
```

# python - 将数字字符串与数字单词字符串进行比较

> ID：11763833
> 
> 赞同：0
> 
> 时间：2012-08-01T16:43:38.700
> 
> 标签：python

我有两个字符串。一个包含数字，另一个包含单词。我无法预测哪个是哪个，也无法预测数字的大小。

```
S1  = "thirteen things that don't make sense"
S2 = "13 Things That Don't Make Sense" 
```

明显地

```
S1 != S2 
```

在 python 中测试两个字符串包含相同信息的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:53:04.463

该模块可能可以帮助您：

[http://sourceforge.net/projects/pynum2word/](http://sourceforge.net/projects/pynum2word/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:56:24.547

您可以创建应被视为与其他字符串等效的字符串映射，然后在比较之前转换每个句子以删除大小写差异并使用映射替换单词，例如：

```
S1 = "thirteen things that don't make sense"
S2 = "13 Things That Don't Make Sense"
eq_map = {'one': '1', 'two': '2', 'thirteen': '13'}

def convert(s):
    s = s.lower()
    return [eq_map.get(w, w) for w in s.split()]

assert convert(S1) == convert(S2) 
```

这里的难点在于创建一个全面`eq_map`的、[CosmicComputer 链接](https://stackoverflow.com/a/11763961/505154)的模块可能有用。

您可能还想在此处删除标点符号，您可以通过添加类似`s = re.sub(r'[^\w\s]+', '', s)`to 来完成此操作`convert()`。

# ios - JSONKit（或类似）生成的对象内的 NSNull 值

> ID：11763840
> 
> 赞同：0
> 
> 时间：2012-08-01T16:43:58.110
> 
> 标签：ios, serialization, jsonkit

我将 JSONKit 解析的结果存储在键/值数据库 (LevelDB) 中，但是我正在下载的 JSON 的某些字段设置为 null，这不会让您序列化相应的生成对象（NSArray 或 NSDictionary） , 将其存储为对象。

¿ 知道如何深入迭代 NSSomething（字典或数组）来更改这些值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:27:46.793

有一篇文章[https://github.com/johnezang/JSONKit/issues/25](https://github.com/johnezang/JSONKit/issues/25)解释了如何修改框架以从字典和数组中省略它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:57:56.717

有时我碰巧将一个空值设置为既不是 NSNull 也不是 NSString 的东西。因此，在我用 NSJSONSerialization 解析它之前，我已经替换了 json 字符串中的所有空字符串。我已经将数据读入 NSData 对象，将其复制到 NSString 对象中，替换空字符串并将其再次复制到 NSData 对象中，因为 NSJSONSerialization 需要一个 NSData 对象。也许你可以把它写得更短，但它确实有效。

这是代码

```
NSString *jsonPath = [myPath stringByAppendingPathComponent:@"myDataFile.json"];
NSMutableData *myJSON = [[NSMutableData alloc] initWithContentsOfFile:jsonPath];
NSString *jsonString = [[NSString alloc] initWithBytes:myJSON.bytes length:myJSON.length encoding:NSUTF8StringEncoding];
jsonString = [jsonString stringByReplacingOccurrencesOfString:@"null" withString:@"\"placeholder\""];
NSData * jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSMutableDictionary *json = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&jsonParsingError]; 
```

之后，所有先前的空值都将包含一个占位符字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:43:58.110

我将 JSON 解析为 mutableObject `[[JSONDecoder decoder] mutableObjectWithUTF8String:(const unsigned char *) [json UTF8String] length:[json lengthOfBytesUsingEncoding:NSUTF8StringEncoding] error:nil ];`，然后使用此代码修复它：

```
-(id) fixObject: (id) a
{
   if([a isKindOfClass:[NSMutableDictionary class]])
   {
      NSMutableDictionary *ad = a;
      for (NSObject *key in ad)
      {
          if([[ad objectForKey:key] isKindOfClass:[NSMutableDictionary class]] || [[ad objectForKey:key] isKindOfClass:[NSMutableArray class]])
              [self fixObject:[ad objectForKey:key]];
          else 
          {
              if((NSNull *)[ad objectForKey:key] == [NSNull null]) [ad setObject:@"" forKey:key];
          }

      }
  }else if([a isKindOfClass:[NSMutableArray class]])
  {
      NSMutableArray *ar = a;
      for (NSObject *ob in ar)
      {
          if([ob isKindOfClass:[NSMutableDictionary class]] || [ob isKindOfClass:[NSMutableArray class]])
          {
             [self fixObject:ob];
          }
          else if((NSNull *)ob == [NSNull null])
          {
              [ar removeObject:ob];
          }

      }
  }
  return a;
} 
```

如果您找到更好的方法来做到这一点，请告诉我！

# c# - 从 web.template.xml 转换的 web.config 不起作用

> ID：11763841
> 
> 赞同：7
> 
> 时间：2012-08-01T16:43:58.227
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, visual-studio, web-config

我正在尝试使 web.config 转换按[此处](http://sedodream.com/CommentView,guid,68b7e248-b9f5-4d07-bdfe-eb037bcf2cbb.aspx)所述进行工作。我们已经在其他项目上使用过这种方法，它可以正常工作，但在这个新项目上却没有。

这是我尝试过的没有成功的测试

*   更改 wpp.targets 文件的名称以防我弄错项目名称。我知道我正在使用的当前一个工作，因为它是唯一一个导致 web.config 从 web.template.xml 重建这个转换工作。只有子模板不起作用。
*   尝试使用 xdt:Locator="Match(name)"
*   尝试了 .config 扩展名与 .xml，我们其他适用的项目使用 .xml
*   配置管理器设置为对我正在处理的项目使用“测试”配置。
*   web.template.Test.xml 对我要替换的部分有 xdt:Transform="Replace"
*   web.template.xml 有占位符
*   尝试按照下面链接的堆栈问题中的建议从 wpp.targets 中删除“CopyWebTemplateConfig”部分。我们的其他项目有这个，并且“PropertyGroup”部分被注释掉了，我已经尝试了这两种组合。

我已经多次阅读了上面的链接和这个相关的堆栈[问题](https://stackoverflow.com/questions/3922291/use-visual-studio-web-config-transform-for-debugging)，但看不到问题是什么。

**注意**发布转换确实以某种方式工作。它会创建一个包含来自 web.template.Test.xml 的值的 web.template.xml 文件，但不会按照 wpp.targets 的指示创建 web.config.xml。所以这似乎是让构建转换工作的更多问题。

有人知道缺少什么吗？

**wpp.targets**

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!-- Make sure web.config will be there even for package/publish -->
  <Target Name="CopyWebTemplateConfig" BeforeTargets="Build">
    <Copy SourceFiles="web.template.xml"
          DestinationFiles="web.config"/>
  </Target>

  <PropertyGroup>
    <PrepareForRunDependsOn>
      $(PrepareForRunDependsOn);
      UpdateWebConfigBeforeRun;
    </PrepareForRunDependsOn>
  </PropertyGroup>

  <!-- This target will run right before you run your app in Visual Studio -->
  <Target Name="UpdateWebConfigBeforeRun">
    <Message Text="Configuration: $(Configuration): Web.template.$(Configuration).xml"/>
    <TransformXml Source="web.template.xml"
              Transform="web.template.$(Configuration).xml"
              Destination="web.config" />
  </Target>

  <!-- Exclude the config template files from the created package -->
  <Target Name="ExcludeCustomConfigTransformFiles" BeforeTargets="ExcludeFilesFromPackage">
    <ItemGroup>
      <ExcludeFromPackageFiles Include="web.template.xml;web.template.*.xml"/>
    </ItemGroup>
    <Message Text="ExcludeFromPackageFiles: @(ExcludeFromPackageFiles)" Importance="high"/>
  </Target>
</Project> 
```

**web.template.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>           
    <sectionGroup name="TestSettings"></sectionGroup>
    ....
  </configSections>
    ....
  <TestSettings>
  </TestSettings>
   ....
</configuration> 
```

**web.template.Test.xml**

```
<?xml version="1.0"?>
<!-- For more information on using transformations 
     see the web.config examples at http://go.microsoft.com/fwlink/?LinkId=214134\. -->
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <TestSettings xdt:Transform="Replace">
    ...
  </TestSettings>
</configuration> 
```

**MSBuild 输出**

```
Target "UpdateWebConfigBeforeRun: (TargetId:143)" in file "C:\...\Project.wpp.targets" from project "C:\...\Project.csproj" (target "PrepareForRun" depends on it):
Task "Message" (TaskId:93)
  Configuration: Test: Web.template.Test.xml (TaskId:93)
Done executing task "Message". (TaskId:93)
Task "TransformXml" (TaskId:94)
  Transforming Source File: Web.template.xml (TaskId:94)
    Applying Transform File: Web.template.Test.xml (TaskId:94)
    Executing Replace (transform line 5, 18) (TaskId:94)
      on /configuration/TestSettings (TaskId:94)
      Applying to 'TestSettings' element (source line 121, 4) (TaskId:94)
      Replaced 'TestSettings' element (TaskId:94)
    Done executing Replace (TaskId:94)
    Output File: web.config (TaskId:94)
  Transformation succeeded (TaskId:94)
Done executing task "TransformXml". (TaskId:94)
Done building target "UpdateWebConfigBeforeRun" in project "Project.csproj".: (TargetId:143) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T00:46:02.303

我已经安装了`StyleCop`，那正在为我做覆盖。

所以我卸载了它，问题得到了解决。

有趣的是我重新安装了`StyleCop`转换仍然有效！

同样在某些时候，我注意到我也应该删除`CopyWebTemplateConfig`目标部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T23:49:19.610

我有一个解决我的问题的方法，但不确定原因是什么，所以不确定这是否会在其他情况下解决它。

我查看了 MSBuild 诊断的输出，并注意到最后有另一个部分将 web.template 复制到了 web.config。请注意，这是在 UpdateWebConfigBeforeRun 目标已经运行并将其从子模板转换文件更新到 web.config 之后。看起来最后一步是用我想要的转换覆盖 web.config。

我不确定最后一组复制指令是从哪里来的，所以我搜索了我 PC 上的所有文件，寻找其他 wpp.target 文件。我在 Slow Cheetah 的扩展文件夹中找到了另一个，并看到顶部的某些部分将属性“transformOnBuild”设置为 false。

认为与 SlowCheetah 存在冲突，我将其卸载，并且转换开始按预期工作。这仍然有点奇怪，因为其他解决方案在启用 SlowCheetah 的情况下工作。一时兴起，我重新安装了 SlowCheetah，转换继续按预期工作。

所以我的解决方案最终是重新安装 SlowCheetah。我仍然对这个问题的原因感到困惑，所以如果其他人对此发表答案，我会给他们赏金。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:43:56.433

上周我遇到了类似的问题。事实证明，每当您将项目添加到 VS 2010 中的解决方案时，都不会始终应用正确的项目配置。因此，您认为您有一个配置处于活动状态，但另一个实际上在该项目上处于活动状态，因此您期望的转换不会得到应用。

检查此问题最后评论中的步骤：[自定义解决方案配置未显示在 Visual Studio 2010 中](https://stackoverflow.com/questions/3111622/custom-solution-configuration-not-showing-up-in-visual-studio-2010)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T17:33:56.320

“我知道我正在使用的当前一个工作，因为它是唯一一个导致从 web.template.xml 重建 web.config 这个转换工作。只有子模板不起作用。”

这是否意味着转换有效，但仅 TestSettings 部分不会转换？

您可以将详细程度设置为诊断/详细的 msbuild 共享构建输出吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-06T05:39:58.373

我写了一篇关于这个主题的博客文章。我每天都在我们的 Web 应用程序中使用它。我写这篇博文是因为 slowcheetah 中的功能还没有准备好。 [http://www.locktar.nl/general/use-config-transforms-when-debugging-your-web-application/](http://www.locktar.nl/general/use-config-transforms-when-debugging-your-web-application/)

# html - 伪元素和按钮标签：如何防止伪元素被点击？

> ID：11763844
> 
> 赞同：0
> 
> 时间：2012-08-01T16:43:59.387
> 
> 标签：html, css

我在`<button>`一行文本的末尾插入了一个按钮（标签，但呈现为链接）。我需要在按钮和文本之间做出明确的区分，所以我使用`:before`带有属性的伪元素`content: "—";`来实现这一点。到现在为止还挺好。

这是一个例子：http: [//jsfiddle.net/Anto/UPjQL/](http://jsfiddle.net/Anto/UPjQL/)

问题是伪元素的内容就像按钮本身一样：当它悬停时，`default`光标变成了`pointer`光标并且元素被下划线。这是有道理的，但我想阻止这种行为，让它看起来就像一个普通的文本字符。

任何的想法 ？

* * *

我*知道*将按钮包装在一个`span`元素中，*然后*将`:before`属性赋予该包装器将是一个更优雅的解决方案，但在这种情况下，我负担不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:03:56.763

看看小提琴[http://jsfiddle.net/joplomacedo/UPjQL/3/](http://jsfiddle.net/joplomacedo/UPjQL/3/)

```
.button-rendered-as-a-link {
    position: relative; <-------------
    border: none;
    padding: 0;
    margin: 0;
    background: none;
    -moz-border-radius: none;
    -webkit-border-radius: none;
    border-radius: none;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
    color: #8A89BA;
    font-weight: bold;
    left: 2em; <-------------
}
.button-rendered-as-a-link:hover {
    text-decoration: underline;
    cursor: pointer;
}

.button-rendered-as-a-link:before {
    content:" — ";
    position: absolute; <-------------
    right: 100%; <-------------
    padding: 0 5px;
    color: grey;
    cursor: default !important;
    pointer-events: none; <-------------
} 
```

箭头代表我添加的内容。

我基本上通过使用 position: absolute 从流中删除了伪元素。这使得按钮的宽度等于没有伪元素的宽度，因此，它的下划线不超过该宽度。left 和 right 属性将它们放回原处。

然后，为了不触发按钮悬停，我将伪元素的指针事件设置为无。你可以在这里阅读更多关于它的信息[https://developer.mozilla.org/en/CSS/pointer-events/](https://developer.mozilla.org/en/CSS/pointer-events/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:03:16.560

在您的情况下，我只会使用 JavaScript，该`insertBefore`方法应该可以很好地解决问题！

```
var buttons = document.getElementsByClassName("button-rendered-as-a-link");
for (key in buttons)
  try{
   buttons[key].parentNode.insertBefore(document.createTextNode(" - "),buttons[key]);
  }catch(e){}// this may throw an error? 
```

# javascript - 未捕获的类型错误：无法调用未定义的方法“每个”

> ID：11763846
> 
> 赞同：0
> 
> 时间：2012-08-01T16:44:02.317
> 
> 标签：javascript, jquery, undefined, typeerror

尝试运行 mediaelement 播放器时出现此错误。

错误报告在`mediaelement-and-player.min.js:44`。

编辑：我很抱歉，我从[mediaelementjs.com](http://mediaelementjs.com)支持网站发布了这个。

我试图使用 mediaelement.js 在我的网站上播放音频。

编辑 8/2：有趣的是，当我加载完整`mediaelement-and-player.js`而不是`minified`版本时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:09:02.420

我刚刚在尝试使用 Drupal 模块[http://drupal.org/project/mediaelement](http://drupal.org/project/mediaelement)时处理了同样的问题。

结果证明，一个核心 Drupal javascript 文件 drupal.js 正在调用 jQuery.noConflict() ，这将 $ 变量从全局范围内的定义中删除，从而暴露了 mediaelement-and-player.js 中的这个错误。

这是在 mediaelement 项目的问题队列中报告的，看起来修复刚刚提交：[https ://github.com/johndyer/mediaelement/pull/570](https://github.com/johndyer/mediaelement/pull/570)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:48:12.040

很可能您尚未将 jquery 库加载到您的脚本中。

您必须通过 url 从页面标题中引用库（一个 js 文件）。url 可以指向您保存在本地或公共站点的 jquery 副本。

# javascript - W3Schools 的功能破坏了我的脚本？

> ID：11763848
> 
> 赞同：0
> 
> 时间：2012-08-01T16:44:07.750
> 
> 标签：javascript, cookies

所以我的网站管理员面板上有一大段 JavaScript。几乎一切似乎都可以工作......直到我添加了这个功能！我从 W3Schools 得到它，这就是我感到惊讶的原因。尽管我的所有凝视和语法突出显示，但我找不到任何语法错误或任何东西，所以我完全不知道为什么这会杀死我的脚本。

```
function getCookie(c_name)
{
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++)
    {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x === c_name)
        {
            return unescape(y);
        }
    }
} 
```

基本上，如果我将它添加到脚本中，Firebug 会给我一个`Reference Error, FUNCTIONNAME is not defined`, 与`FUNCTIONNAME`调用其他任何函数。但是，如果我从脚本中注释掉这个代码片段，我就不会再收到错误了。

为什么这个函数会这样做？它出什么问题了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:59:16.530

unescape() 已弃用，您的浏览器是否无法识别？此外，只需尝试注释掉一些代码行，直到将其缩小到发生错误的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:06:25.487

呃，发现了问题，它实际上与我提供的代码片段无关。后来，当我调用脚本时，它是 if 语句的一部分，如下所示：

```
if (getCookie("menu_maindiv"))
{
     /*  ....  */
} 
```

但是，这似乎不起作用。将值设置为等于解决了问题，如下所示：

```
if (getCookie("menu_maindiv") !== NULL)
{
     /*  ....  */
} 
```

我很惊讶这会解决它，但 JavaScript 一直是我的弱点。谢谢各位。：/

# azure - 在 sql azure 中替换“select * into”？

> ID：11763854
> 
> 赞同：5
> 
> 时间：2012-08-01T16:44:33.417
> 
> 标签：azure, azure-sql-database

**我需要一种方法来通用地获取一个表并将其数据复制到一个新表中——这与SELECT * INTO**在常规 SQL Server 中所做的基本相同。有没有办法在 SQL Azure 中做到这一点？此时我只有现有的和新的表名。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-11T10:01:25.573

我遇到了同样的问题，作者的回答不是很详细，所以我将提供更多信息，关于我是如何解决的。

我需要将以给定前缀（'from_'）开头的表复制到带有前缀（'to_'）的新表中。

**生成 CREATE 语句**

我使用这个查询（在[stackoverflow](https://stackoverflow.com/questions/21547/in-sql-server-how-do-i-generate-a-create-table-statement-for-a-given-table)上找到）为每个以“from_”前缀开头的表生成所有 CREATE 语句。

```
 select  'create table [' + so.name + '] (' + o.list + ')' + CASE WHEN tc.Constraint_Name IS NULL THEN '' ELSE 'ALTER TABLE ' + so.Name + ' ADD CONSTRAINT ' + tc.Constraint_Name  + ' PRIMARY KEY ' + ' (' + LEFT(j.List, Len(j.List)-1) + ')' END as query
OBJECTPROPERTY(object_id(TABLE_NAME), 'TableHasIdentity') as tablehasidentity
from    sysobjects so
cross apply
    (SELECT 
        '  ['+column_name+'] ' + 
        data_type + case data_type
            when 'sql_variant' then ''
            when 'text' then ''
            when 'ntext' then ''
            when 'decimal' then '(' + cast(numeric_precision as varchar) + ', ' + cast(numeric_scale as varchar) + ')'
            else coalesce('('+case when character_maximum_length = -1 then 'MAX' else cast(character_maximum_length as varchar) end +')','') end + ' ' +
        case when exists ( 
        select id from syscolumns
        where object_name(id)=so.name
        and name=column_name
        and columnproperty(id,name,'IsIdentity') = 1 
        ) then
        'IDENTITY(' + 
        cast(ident_seed(so.name) as varchar) + ',' + 
        cast(ident_incr(so.name) as varchar) + ')'
        else ''
        end + ' ' +
         (case when IS_NULLABLE = 'No' then 'NOT ' else '' end ) + 'NULL ' + 
          case when information_schema.columns.COLUMN_DEFAULT IS NOT NULL THEN 'DEFAULT '+ information_schema.columns.COLUMN_DEFAULT ELSE '' END + ', ' 

     from information_schema.columns where table_name = so.name
     order by ordinal_position
    FOR XML PATH('')) o (list)
left join
    information_schema.table_constraints tc
on  tc.Table_name       = so.Name
AND tc.Constraint_Type  = 'PRIMARY KEY'
cross apply
    (select '[' + Column_Name + '], '
     FROM   information_schema.key_column_usage kcu
     WHERE  kcu.Constraint_Name = tc.Constraint_Name
     ORDER BY
        ORDINAL_POSITION
     FOR XML PATH('')) j (list)
where   xtype = 'U'
AND name    NOT IN ('dtproperties') AND name like 'from_%' 
```

此查询产生一组值：

```
['query'] = create table [from_users_roles] (  [uid] int  NOT NULL DEFAULT ((0)),   [rid] int  NOT NULL DEFAULT ((0)), )ALTER TABLE from_users_roles ADD CONSTRAINT from_users_roles_pkey PRIMARY KEY  ([uid], [rid])
['tablehasidentity'] = 1 or 0 
```

现在将查询 'from_' 中的前缀替换为 'to_' 并且 CREATE 语句完成：

```
create table [to_users_roles] (  [uid] int  NOT NULL DEFAULT ((0)),   [rid] int  NOT NULL DEFAULT ((0)), )ALTER TABLE to_users_roles ADD CONSTRAINT to_users_roles_pkey PRIMARY KEY  ([uid], [rid]); 
```

**创建 INSERT 语句**

当您要将数据从一个表插入到另一个表时，您必须区分两种情况：

*表有身份 == 0*

```
INSERT INTO to_users_roles SELECT * FROM from_users_roles 
```

*表有身份 == 1*

这个案例有点复杂。该语句需要一个列列表并打开 IDENTITY_INSERT。

```
DECLARE @Query nvarchar(4000)
DECLARE @columnlist nvarchar(4000)

// Result of this query e.g.: "[cid], [pid], [nid], [uid], [subject]"
SET @columnlist = (SELECT SUBSTRING((SELECT ', ' + QUOTENAME(COLUMN_NAME) FROM INFORMATION_SCHEMA.COLUMNS  WHERE TABLE_NAME = 'from_users_roles' ORDER BY ORDINAL_POSITION FOR XML path('')), 3,  200000))

SET @query ='SET IDENTITY_INSERT to_users_roles ON; INSERT INTO to_users_roles (' + @columnlist + ')  SELECT  ' + @columnlist + ' FROM from_users_roles; SET IDENTITY_INSERT to_users_roles OFF'
exec sp_executesql @query; 
```

这对我来说效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-06T01:16:41.263

最新版本的 Azure SQL DB（现为预览版）支持 SELECT INTO 语法，不再需要聚集索引。有关其功能的详细说明以及如何使用它，请参阅[http://azure.microsoft.com/en-us/documentation/articles/sql-database-preview-whats-new/](http://azure.microsoft.com/en-us/documentation/articles/sql-database-preview-whats-new/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T14:41:28.970

经过更多研究，似乎没有简单的方法可以做到这一点。您基本上必须阅读表的架构信息并基于该信息创建新表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-18T17:41:25.653

SQL DB V12 现在支持 Select into。只需升级您的服务器并开始使用该语法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-25T00:35:53.627

[我在这个博客](http://blog.kevinyu.org/2012/06/workaround-for-select-into-in-sql-azure.html)上发现了一个聪明的把戏

而不是使用“选择进入”使用“插入选择”。

首先，您必须创建目标表。为此，请右键单击 SQL Management Studio 中的源表，然后选择“脚本表为”->“创建到”->“新建查询窗口”。

然后，更改查询中的表名，并执行查询。下面是我将今天的日期添加到新表的示例，将其命名为“Entities_2015_08_24”（旧表称为“Entities”）：

```
CREATE TABLE [dbo].[Entities_2015_08_24](
    [Url] [nvarchar](max) NULL,
    [ClientID] [nvarchar](max) NULL
) 
```

然后，从旧表（实体）中“插入选择”到新表（实体_2015_08_24）中：

```
INSERT INTO [dbo].[Entities_2015_08_24]
           ([Url]
           ,[ClientID]
           )
SELECT 
       [Url]
      ,[ClientID]
  FROM [dbo].[Entities] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-01T16:48:51.330

问：你试过吗？
问：你看过[SQL Azure 文档吗？](http://msdn.microsoft.com/en-us/library/windowsazure/ee336281.aspx)

## 附录

AFAIK，您*不能*使用`select into`语法在 Azure SQL 中“克隆”表。因为 Azure 需要一个聚集索引，并且`select into`没有定义一个。

详细信息和潜在的解决方法在这里：

[http://blogs.msdn.com/b/windowsazure/archive/2010/05/04/select-into-with-sql-azure.aspx](http://blogs.msdn.com/b/windowsazure/archive/2010/05/04/select-into-with-sql-azure.aspx)

# web-applications - chaplin.js SyncMachine 调用

> ID：11763858
> 
> 赞同：0
> 
> 时间：2012-08-01T16:44:52.537
> 
> 标签：web-applications, coffeescript, chaplinjs

我目前正在 chaplin.js 中创建一个带有 loadingIndicator 的[CollectionView](https://github.com/chaplinjs/chaplin)。在我相应集合的初始化函数中，我必须这样`initSyncMachine()`调用

```
initialize: ->
    super
    @initSyncMachine() 
```

我意识到这是必要的，以便集合触发我的 CollectionView 监听的同步事件。但是我真的必须调用`beginSync()`所有其他函数吗？这不是由[backbone.js 中的同步方法](http://documentcloud.github.com/backbone/#Sync)完成的吗？

我的初始化函数目前看起来像这样：

```
initialize: ->
  super
  @initSyncMachine()
    @fetch
      success: =>
        @finishSync()
      error: =>
        @abortSync() 
```

chaplin.js [facebook 示例](https://github.com/chaplinjs/facebook-example/blob/master/coffee/models/likes.coffee)执行此操作，但有正当理由这样做。它在调用另一个函数时覆盖该`fetch()`方法并调用。`beginSync()``finishSync()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T22:30:38.213

事实证明，这是尚未实施的事情。所以是的：我将不得不手动调用这些函数。
似乎这是要实现的东西：[https ://github.com/chaplinjs/chaplin/issues/91](https://github.com/chaplinjs/chaplin/issues/91)

# mysql - 从ios连接mysql数据库

> ID：11763859
> 
> 赞同：-2
> 
> 时间：2012-08-01T16:45:02.553
> 
> 标签：mysql, ios, database

从 iphone 应用程序连接到数据库的正确方法是什么？我建立了一个网站，现在我想开发一个可以输入和查看数据库信息的应用程序，例如 autotrader 和 rightmove 他们如何在 iphone 应用程序中的网站上获取相同的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:49:04.310

您需要创建一个 REST API (PHP) 从集中式 Mysql DB 获取和更新数据。你可以通过 NSURLConnection 调用它。您的 REST API 从您的编码返回 XML 或 JSON。您可以编写编码来解析。

# html - 固定宽度 div

> ID：11763862
> 
> 赞同：0
> 
> 时间：2012-08-01T16:45:14.337
> 
> 标签：html, position, css-position

我将我的 div 设置为固定位置，当我将页面滚动到最底部时，或者如果我使用智能手机或平板电脑等较小的屏幕，我的固定 div 会浮在我的页脚上。我怎样才能解决这个问题？

这是我的固定 div：

```
.infoItem{
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    border: 1px #e4e4e4 solid;
    width: 227px;
    background:#f8f6f7;
    position: fixed;
} 
```

这是我的包装：

```
.wrapper { 
  min-width:954px;
} 
```

我也尝试将我`infoteam`的 div 包装在另一个 div 中并将新 div 设置为，`position: absolute`但这也不起作用。

固定 div html

```
<div class="box-collateral box-up-sell">

        <div class="infoItem">
            <p class="heading">Add to your </p>
            <p class="content">

                        <div class='upsellContainer'>

                               <div>

                               </div>
                        </div>

            </p>
        </div>
    </div> 
```

页脚CSS

```
.footer { background:url(../images/footer-top-border.png) repeat-x;}
/* .footer-container { border-top:15px solid #b6d1e2; }*/

.footer { width:904px; margin:0 auto; padding:30px 10px 50px; }
.footer .store-switcher { display:inline; margin:0 5px 0 0; color:#fff; }
.footer .store-switcher label { font-weight:bold; vertical-align:middle; }
.footer .store-switcher select { padding:0; vertical-align:middle; }
.footer a {text-decoration:none; }
.footer a:hover { text-decoration:underline; }
.footer .bugs { margin:13px 0 0; }
.footer .bugs a { text-decoration:underline; }
.footer .bugs a:hover { text-decoration:none; }
.footer address { margin:0 0 20px; }
.footer address a {text-decoration:underline; }
.footer address a:hover { text-decoration:none; }
.footer ul { display:inline; }
.footer ul.links { display:block; }
.footer li {  background:url(../images/bkg_pipe2.gif) 100% 60% no-repeat; padding:0 7px 0 4px; }
.footer li.last { background:none !important; padding-right:0 !important; }
.footer-container .bottom-container { margin:0 0 5px; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:49:28.620

在 div 之后和页脚之前添加另一个 div，如下所示：

```
<div style="clear:both"></div> 
```

这将迫使其下方的任何元素向下。您还想确保页脚也有`clear:both`（页脚应该始终如此）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:56:08.360

`clear:both`在内部使用或`footer div`应用 clear:both 在 css 中，例如：

```
#footer{
  clear: both;
} 
```

# netbeans - 读取清单文件“...datanucleus-core-3.0.0-release.jar!/plugin.xml”时出错

> ID：11763868
> 
> 赞同：0
> 
> 时间：2012-08-01T16:45:50.210
> 
> 标签：netbeans, import, jdo, datanucleus

我遇到了一个非常奇怪的错误。这就是我所做的：

我创建了一个项目（使用 Netbeans），其中包括 datanucleuse-core-3.0.0-release.jar。该项目可以成功构建。当我尝试使用 Netbeans 运行它或通过命令提示符在 dist 文件夹中运行“java -jar <.jar bundle>”时，它也运行顺利。

问题是，当我将该 dist 文件夹复制到另一个位置并尝试使用命令提示符再次运行它时，它给出了以下错误：

> 线程“main”中的异常 读取清单文件“jar:file:/E:/!new/BTJ/NCRServer/lib/datanucleus-core-3.0.0-release.jar!/plugin.xml”时出错 org.datanucleus.exceptions .NucleusException：在 org.datanucleus.plugin 读取清单文件“jar:file:/E:/!new/BTJ/NCRServer/lib/datanucleus-core-3.0.0-release.jar!/plugin.xml”时出错。 NonManagedPluginRegistry.registerBundle(NonManagedPluginRegistry.java:481) at org.datanucleus.plugin.NonManagedPluginRegistry.registerExtensions(No nManagedPluginRegistry.java:219) at org.datanucleus.plugin.NonManagedPluginRegistry.registerExtensionPoin ts(NonManagedPluginRegistry.java:160) at org. datanucleus.plugin.PluginManager.(PluginManager.java:62) 在 org.datanucleus.NucleusContext.(NucleusContext.java:211) 在 org.datanucleus.NucleusContext.(NucleusContext.java:166) at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.(JDOPersis tenceManagerFactory.java:360) at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenc eManagerFactory(JDOPersistenceManagerFactory.java:290)在 org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceMa nagerFactory(JDOPersistenceManagerFactory.java:191) 在 com.ncr.server.Server.(Server.java:68) 在 com.ncr.server.Server.main(Server.java :91) 原因：java.io.FileNotFoundException: E:\ (系统找不到指定的路径) at java.util.zip.ZipFile.open(Native Method) at java.util.zip.ZipFile.(ZipFile .java:114) 在 java.util.jar.JarFile.(JarFile.java:135) 在 java.util.jar.JarFile.(JarFile.java:99) at org.datanucleus.plugin.NonManagedPluginRegistry.registerBundle(NonManagedPluginRegistry.java:390) ... 10 多个嵌套 Throwables StackTrace: java.io.FileNotFoundException: E:\ (系统找不到指定的路径) at java. util.zip.ZipFile.open(Native Method) 在 java.util.zip.ZipFile.(ZipFile.java:114) 在 java.util.jar.JarFile.(JarFile.java:135) 在 java.util.jar。 JarFile.(JarFile.java:99) 在 org.datanucleus.plugin.NonManagedPluginRegistry.registerBundle(NonManagedPluginRegistry.java:390) 在 org.datanucleus.plugin.NonManagedPluginRegistry.registerExtensions(No nManagedPluginRegistry.java:219) 在 org.datanucleus。 plugin.NonManagedPluginRegistry.registerExtensionPoints(NonManagedPluginRegistry.java:160) 在 org.datanucleus.plugin。PluginManager.(PluginManager.java:62) at org.datanucleus.NucleusContext.(NucleusContext.java:211) at org.datanucleus.NucleusContext.(NucleusContext.java:166) at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.(JDOPersis tenceManagerFactory.java:360) at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenc eManagerFactory(JDOPersistenceManagerFactory.java:290) at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.getPersistenceMa nagerFactory(JDOPersistenceManagerFactory.java:191) at com.ncr .server.Server.(Server.java:68) 在 com.ncr.server.Server.main(Server.java:91)166) 在 org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenc eManagerFactory(JDOPersistenceManagerFactory.java:290) 在 org.datanucleus.api.jdo 的 org.datanucleus.api.jdo.JDOPersistenceManagerFactory.(JDOPersis tenceManagerFactory.java:360)。 JDOPersistenceManagerFactory.getPersistenceM nagerFactory(JDOPersistenceManagerFactory.java:191) 在 com.ncr.server.Server.(Server.java:68) 在 com.ncr.server.Server.main(Server.java:91)166) 在 org.datanucleus.api.jdo.JDOPersistenceManagerFactory.createPersistenc eManagerFactory(JDOPersistenceManagerFactory.java:290) 在 org.datanucleus.api.jdo 的 org.datanucleus.api.jdo.JDOPersistenceManagerFactory.(JDOPersis tenceManagerFactory.java:360)。 JDOPersistenceManagerFactory.getPersistenceM nagerFactory(JDOPersistenceManagerFactory.java:191) 在 com.ncr.server.Server.(Server.java:68) 在 com.ncr.server.Server.main(Server.java:91)getPersistenceMa nagerFactory(JDOPersistenceManagerFactory.java:191) 在 com.ncr.server.Server.(Server.java:68) 在 com.ncr.server.Server.main(Server.java:91)getPersistenceMa nagerFactory(JDOPersistenceManagerFactory.java:191) 在 com.ncr.server.Server.(Server.java:68) 在 com.ncr.server.Server.main(Server.java:91)

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:33:38.777

真的很对不起大家，尤其是 StackOverflow 中的 datanucleus 成员。

显然问题出在我身上，而不是 netbeans、datanucleus API，也不是任何人。从“jar:file:/E:/!new/BTJ/NCRServer/lib/datanucleus-core-3.0.0-release.jar!/plugin.xml”中可以看到，我将“dist”文件夹从 Netbeans在“E:/!new”文件夹中。我不知道为什么，但是“！new”文件夹似乎会导致“release.jar！”中出现额外的感叹号（！）。

我将 dist 文件夹移动到 D:/ 并且它有效！

因此，如果有人遇到过这个问题（文件夹名称前面带有感叹号，并且不小心在其中放置了一个带有 datanucleus-core-3.0.0-release.jar 的项目），那就是解决方案。

谢谢你。

# javascript - 用字符串中的空格交换 +（加号）

> ID：11763873
> 
> 赞同：-2
> 
> 时间：2012-08-01T16:46:01.400
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何使用 jQuery 解码 URL？](https://stackoverflow.com/questions/3803716/how-can-i-decode-a-url-with-jquery)

有人可以帮我取一个字符串（即 URL 参数）并将 +（加号）或 %20 删除到常规空格（“”）吗？

例如，要改变这个：

```
"my+string+to+change" or "my%20string%20to%20change" 
```

对此：

```
"my string to change" 
```

我已经使用了很多 jQuery，这样就可以了。或者纯javascript，如果这更容易的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:47:53.670

利用`decodeURIcomponent(stringToDecode)`

请注意，这不是 jquery 功能，而是常规 javascript 函数。

# class - 在 apex 中包含内部类的正确方法是什么？

> ID：11763874
> 
> 赞同：1
> 
> 时间：2012-08-01T16:46:02.160
> 
> 标签：class, salesforce, apex-code

我正在创建一个类，该类最终将使用批处理 APEX 按计划更新记录。我在编写内部类时遇到了麻烦，并且尝试了我能想到的所有可能的语法组合。

## 代码：

```
public with sharing class AddendumsExpired {

    public List<Id> opportunityIds{get;set;}
    public List<Id> addendumIds{get;set;}

    public List<Id> OppIds(){

        for(Opportunity thisOpp :[SELECT Id,StageName,Name,Addendum_Amount__c,Addendum_Amount_No_Discounts__c,Agreement_Balance__c FROM Opportunity WHERE (NOT StageName LIKE '%Proposed%') AND (NOT StageName LIKE '%Accepted%')]){
            opportunityIds.add(thisOpp.Id);
        }

        return opportunityIds;
    }

    public List<Id> AddIds(){

        for(Addendum__c thisAdd :[SELECT Id FROM Addendum__c WHERE Opportunity__c IN :opportunityIds AND Expiration__c < TODAY]){
            addendumIds.add(thisAdd.Id);
        }

        return addendumIds;
    }

    public class debugging {
        system.debug('opportunityIds :: '+opportunityIds);
        system.debug('addendumIds :: '+addendumIds);
        system.debug('OppIds() :: '+OppIds());
        system.debug('AddIds() :: '+AddIds());
    }
} 
```

我仍处于测试阶段，`debugging`班级正在抛出错误。我需要为最终的生产部署提供多个内部类。

我之前使用过 ( `public class classname {`) 上面的语法没有任何问题。但是，当我执行匿名此代码块时，我收到错误：

```
Compile error at line 24 column 8
unexpected token: 'class' 
```

如果有人能对这种情况有所了解，我将不胜感激！我很困惑，想知道为什么这种语法可以在其他十几个类中工作，但不是这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:07:06.647

你班上的代码：

```
public class debugging {
        system.debug('opportunityIds :: '+opportunityIds);
        system.debug('addendumIds :: '+addendumIds);
        system.debug('OppIds() :: '+OppIds());
        system.debug('AddIds() :: '+AddIds());
    } 
```

错误地放置在声明部分，而不是任何实际代码应该放置的位置（不包括静态、getter 和 setter）。

将 system.debug 代码放在内部类（可能是构造函数）内的方法中，它会编译并运行得很好。当然，您需要先实例化您的调试类，以便它有一个实例来执行它包含的代码。

像这样：

```
public class Debugging 
{
   public Debugging(List<Id> opportunityIds)
   {
      system.debug('opportunityIds :: '+opportunityIds);
   }
} 
```

然后你可以创建一个实例来执行这些调试语句，将你的机会ID列表传递给你的内部类的构造函数：

```
Debugging d = new Debugging(opportunityIds); 
```

编辑：

将您的 getter 和 setter 更改为以下内容。这些包含列表的正确初始化代码（使用 retVal 在每个列表中声明一个新列表）：

```
public List<Id> opportunityIds
{
   get
   {
      List<Id> retVal = new List<Id>();
      for(Opportunity thisOpp :[SELECT Id,StageName,Name FROM Opportunity WHERE (NOT StageName LIKE '%Proposed%') AND (NOT StageName LIKE '%Accepted%')])
      {
         opportunityIds.add(thisOpp.Id);
      }
      return retVal;
   }
   private set;
}

public List<Id> addendumIds
{
   get
   {
      List<Id> retVal = new List<Id>();
      for(Addendum__c thisAdd :[SELECT Id FROM Addendum__c WHERE Opportunity__c IN :opportunityIds AND Expiration__c < TODAY])
      {
         addendumIds.add(thisAdd.Id);
      }
      return retVal;
   }
   private set;
} 
```

# perl - 用于文本比较的 Perl 模块

> ID：11763875
> 
> 赞同：5
> 
> 时间：2012-08-01T16:46:21.177
> 
> 标签：perl, cpan

谁能推荐一个 Perl 模块来比较两个字符串并返回它们匹配的程度？我广泛搜索了 CPAN，虽然有类似的模块，如**String::Approx**和**Data::Compare**，但它们不是我想要的。假设我有两根弦：**我爱你**，我爱**你**。我想要比较这两个字符串的功能，考虑到许多参数，以正确顺序匹配单词（**love**作为字符串中的第一个单词不应该“匹配” **love**作为第二个字符串中的第四个单词，即使两者字符串有那个词），词不匹配但拼写几乎相似（比如说**love**和**loge**)，单词的数量等并返回一个索引，比如一个从 0 到 1 的数字，以 1 为单位，表示两个字符串之间的相似程度。有没有这样的 Perl 模块？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T17:44:25.483

有很多这样的模块。但是，通常情况下，您必须以某种特殊方式利用它们来解释您自己的假设。大多数像这样的字符串比较工具只是实现了一些用于比较一个字符串和另一个字符串的算法。大多数人认为，如果您有具体的政策决定要做出，您将自己编写代码。

就个人而言，我不确定是否会推荐[Text::Levenshtein](http://metacpan.org/module/Text%3a%3aLevenshtein)，因为存在错误和缺乏 ut8 支持。不过，我也没有更好的建议。

但是，这些搜索将揭示许多您可以研究的潜在模块，并确定最适合您的目的的模块（基于执行此类操作的常用算法的名称）：

*   [https://metacpan.org/search?q=levenshtein](https://metacpan.org/search?q=levenshtein)
*   [https://metacpan.org/search?q=wagner+fischer](https://metacpan.org/search?q=wagner+fischer)
*   [https://metacpan.org/search?q=edit+distance](https://metacpan.org/search?q=edit+distance)

如果您对口语相似性感兴趣，还可以查看语音比较：

*   [https://metacpan.org/search?q=phonetic](https://metacpan.org/search?q=phonetic)
*   [https://metacpan.org/search?q=soundex](https://metacpan.org/search?q=soundex)
*   [https://metacpan.org/search?q=metaphone](https://metacpan.org/search?q=metaphone)

# android - Phonegap Android 我可以将事件添加到 Android 的日历吗？

> ID：11763876
> 
> 赞同：1
> 
> 时间：2012-08-01T16:46:28.457
> 
> 标签：android, cordova

我想从 Phonegap 应用程序调用 Android 的日历并在该日历中写入。

那可能吗？

# iphone - id没有警告？

> ID：11763895
> 
> 赞同：4
> 
> 时间：2012-08-01T16:48:01.447
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我刚刚发现了一些我有点困惑的事情，不知道是否有人会为我澄清一下。

```
NSArray *nextArray = [NSArray arrayWithObjects:@"ONE", @"TWO", @"THREE", nil];
for(id eachObject in nextArray) {
    NSLog(@"COUNT: %d", [eachObject length]);
} 
```

为什么上述内容没有抱怨/警告我要求 id 的长度这一事实？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T16:57:10.730

在 Objective-C`id`中，它是任何类型的对象的通用类型，而不管类如何，并且可以用于类的实例和类对象本身。该`id`类型是完全**非限制性的，它没有关于对象的信息**，除了它是一个对象。所以编译器无法知道该对象是否可以响应方法，因为它不知道它是什么类型的对象。通过在您的代码中使用它，您基本上是在说“无论它指向什么，执行此操作”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T16:52:25.447

编译器永远不会键入发送到 id 的检查消息。这部分是使 Objective-C 充满活力的原因。

如果 eachObject 是任何其他类型，那么如果编译器无法解析方法名称，则会出现错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T17:00:54.550

当您`id`特别不想进行编译器类型检查时使用。您可以在没有警告的情况下将任何消息发送到`id`类型，并且可以将 an 分配`id`给任何其他类型而无需进行类型转换。

这允许您在不使用强制转换的情况下从数组中获取对象。例如，你可以假设数组包含 NSStrings：

```
NSString* someString = [myArray objectAtIndex:1]; 
```

它还允许您在没有强制转换或警告的情况下向对象发送消息。事实上，您希望发送的消息可能不属于任何正式的类或协议：

```
id someObject = [myArray objectAtIndex:1];
if ([someObject respondsToSelector:@selector(setName:)])
{
    [someObject setName:@"Foo"];
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-01T16:57:24.630

可能包含不同的`NSArray`对象类型，例如：

```
NSArray *thArray = [[NSArray alloc] initWithObjects:@"Stack",@"Overflow",[NSNumber numberWithInt:10],nil];
for(id theObject in thArray) {
    NSLog(@"COUNT: %lu", [theObject length]);
} 
```

`id`可以表示任何对象（在本例中为或`NSString`）`NSNumber`，
因此编译器无法知道原始方法是否`length`存在。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T16:56:09.917

简单地说，id 表示所有 Objective-C 类。所以，它属于一个 NSString 类的长度方法。编译器不会向您发出警告。id 在运行时动态确定，在编译时未知。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T16:54:07.817

Objective-C 中的每个对象都知道它有什么类以及它是否可以处理消息。检查类的不是编译器，而是运行时的对象本身。

一个对象的类可以在编译时未定义，但在运行时每个对象都有一个已定义的类。

# php - PHP将字符串日期和时间转换为MySQL DateTime

> ID：11763897
> 
> 赞同：5
> 
> 时间：2012-08-01T16:48:05.243
> 
> 标签：php, mysql, datetime

我有两个文本字段，一个是 08/01/2012 格式的日期，另一个是包含时间的字段。我目前有格式为 09:41am 的时间字段，但我对它的格式有一些灵活性（例如，如果 24 小时更容易）。

我打算只连接字符串然后转换。我应该先将日期转换为 2012-08-01 吗？

我怎样才能最终转换为日期时间（2012-08-01 09:41:00）？如何将其转换回 08/01/2012 和 09:41am 格式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T16:52:21.847

```
SELECT STR_TO_DATE(concat('08/01/2012', '09:41am'),'%d/%m/%Y%h:%i'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:55:27.207

在数据库端，您可以使用：

`STR_TO_DATE()`使用[此表](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)中的说明符转换为数据库友好格式。[参考](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

`DATE_FORMAT()`然后将返回您想要的该数据库时间的任何部分。[参考](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

在 PHP 端，您可以使用：

*   `strtotime()`- 将任何英文文本日期时间描述解析为 Unix 时间戳
*   `date`- 格式化本地时间/日期

`strotime`将根据传递给它的任何字符串日期/时间生成一个 Unix 时间戳。如果您同时传递您的两个字段（08/01/2012 和 09:41am），它将基于它生成一个时间戳。要反转该过程，请使用`date("m/d/Y H:ia")`.

```
$field1 = '08/01/2012';
$field2 = '09:41am';

$stamp = strtotime($field1 . ' ' . $field2);

echo date("m/d/Y H:ia", $stamp); 
```

我没有对此进行测试，但它应该可以工作。

# c# - .NET下需要FitNesse SetUpFixture的简单例子

> ID：11763899
> 
> 赞同：1
> 
> 时间：2012-08-01T16:48:14.613
> 
> 标签：c#, fitnesse, fitsharp

我一直在尝试为我们的 C# 应用程序实现 FitNesse 测试。我正在使用最新的 FitNesse jar 和 fitSharp .NET 2.2 4.0 库。

我已经能够使用 Slim 成功使用场景。但是，为了使测试对非技术人员更易读，我对实现 感兴趣`DoFixtures`，并且我想我需要`SetUpFixtures`为测试创建通用数据条件。

不过，我似乎无法将我设置的数据放入`DoFixture`实例中。我查看了几个资源（其中包括[Gojko 的书](http://gojko.net/FitNesse/book/)主），但似乎没有人孤立地谈论这个概念。将 Visual Studio 作为调试器附加到测试运行并没有产生任何见解。我真的可以用一个简单的例子来分析和构建。

有人愿意分享一个例子，其中包括：

*   `SetUpFixture`设置一些数据 的类
*   `DoFixture`使用来自 SetUpFixture 的数据的 类
*   Wiki 语法来调用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T21:56:39.947

我得到了部分答案。

使用这些类：

```
public class BirdCall : fitlibrary.SetUpFixture
{
    public void BirdNameNoise(string birdName, string noise)
    {
        BirdName = birdName;
        Noise = noise;
    }

    public string BirdName; 
    public string Noise;

    public override string ToString()
    {
        return string.Format("BirdCall: {0}, {1}", BirdName, Noise);
    }
}

public class SkylarkBunting : fitlibrary.DoFixture
{
    public BirdCall BirdCall;
    public string Call;

    public Fixture CryOut()
    {
        BirdCall = new BirdCall();
        Call = BirdCall.Noise;
        return BirdCall;
    }

    public string GetCall()
    {
        return BirdCall.Noise;
    }

    public string GetName()
    {
        return BirdCall.BirdName;
    }
} 
```

和这个 Wiki 标记：

```
!define TEST_RUNNER {C:\temp\fitsharp\Runner.exe}
!define COMMAND_PATTERN {%m -r fitnesse.fitserver.FitServer,c:\temp\fitsharp\fit.dll %p}
!path C:\temp\FitNesseIntegration\bin\Debug\FitnesseIntegration.dll

!|import|
|FitnesseIntegration|

!|FitNesseIntegration.Skylark.SkylarkBunting|

!3 Testing getting data from a setup fixture into a do fixture

!|cry out|
|bird name|noise|
|Tweetie|Caw!|

|check|call||
|check|get call||
|check|get name||
|check|bird call|| 
```

我得到：

```
|check|call|null|
|check|get call|Caw!|
|check|get name|Tweetie|
|check|bird call|BirdCall: Tweetie, Caw!| 
```

这很好，我有变量`DoFixture`通过执行`SetUpFixture`FitNesse 通过页面注入的值来填充。

不过，我仍然想知道为什么 Call 返回`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T22:04:03.027

看起来 SetUp 没有被调用。用于`Debugger.Launch()`调试

更新：

```
!|BirdCall|
|birdName|noise|
|duck|quack|

public class SkylarkBunting : fitlibrary.DoFixture
{
    public BirdCall BirdCall;

    public SkylarkBunting(BirdCall birdCall)
    {
        BirdCall = birdCall;
    }

    public string GetCall()
    {
        return BirdCall.Noise;
    }

    public string GetName()
    {
        return BirdCall.BirdName;
    }
} 
```

# java - 这个 Java 代码（简单的 CardLayout 程序）有什么问题？

> ID：11763908
> 
> 赞同：0
> 
> 时间：2012-08-01T16:48:42.377
> 
> 标签：java, nullpointerexception, jframe, jlabel, cardlayout

[http://pastie.org/4372510](http://pastie.org/4372510) - 单击此链接获取代码。（没有在此处发布以保持问题清洁）

我最近试图创建一个简单的 Java 程序来学习 cardLayout。我希望这个程序在开始时显示一个 JLabel 说“Label1”。当用户点击标签时，我想切换卡片。即显示Label2。

```
"Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at potpie.changeLabel(potpie.java:34)" 
```

这是我得到的错误。它说我粘贴的代码中的第 50 行有问题。

我似乎无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:55:24.333

```
 public void mouseClicked(MouseEvent arg0) 
    {
        potpie ccObj = new potpie();
        ccObj.changeLabel();
    } 
```

*在一个新*的potpie上调用changeLabel （我讨厌你的类名和方法名，顺便说一句，它们毫无意义），而不是在main中实例化的那个（调用.koko）。

# javascript - 正则表达式在 javascript 中无法按预期工作

> ID：11763909
> 
> 赞同：0
> 
> 时间：2012-08-01T16:48:45.923
> 
> 标签：javascript, regex

我有以下正则表达式：`^-?([0-9]{0,3}$|[0-9]{0,2}\.?[0-9]{0,1}$)`

它不应该允许 4 位数字，例如 4444。如果我[在这里](http://tools.netshiftmedia.com/regexlibrary)尝试，表达式工作正常，但在 javascript 中，代码无法按预期工作。它允许 4 位数字。所有其他验证工作正常。

这是我的代码：

[http://jsfiddle.net/PAscG/](http://jsfiddle.net/PAscG/)

```
reg0str = "^-?([0-9]{0,3}$|[0-9]{0,2}\.?[0-9]{0,1}$)";
var reg0 = new RegExp(reg0Str);
if (reg0.test(temp)) return true; 
```

更新解释功能：

我只想允许 3 位数字。因此，要么我只能允许小数点后 1 位，小数点前 2 位，要么我可以允许小数点前最多 3 位，小数点后不允许。

所以我的第一部分：
`[0-9]{0,3}$`我认为这应该允许最多 3 位数字，并且只允许数字。

下一部分： `[0-9]{0,2}\.?[0-9]{0,1}$`应该允许最多小数点前 2 位数字和小数点后最多 1 位数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:34:00.020

试试这个：

```
 var reg0str = "^\-?[0-9]{0,2}[\.]?[0-9]?$"; 
```

我不知道为什么，但如果没有封装在一个类中，句点似乎被视为通配符。

这是更新的[jsfiddle](http://jsfiddle.net/PAscG/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:12:08.243

在OP的澄清之后

正则表达式是

```
/^-?(\d{0,3}\.?|\d{0,2)\.\d)$/

  ^        start of string
  -?       optional minus sign (use [-+]? if you accept a plus sign)
  (        start of OR group
    \d{0,3}  0 1, 2 or 3 digits
    \.?      optional decimal point
  |        OR
    \d{0,2}  0 1, or 2 digits
    \.       decimal point
    \d       final decimal
  )        end of OR grouping
  $        end of string 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T18:18:41.500

`"…\.…"`是字符串文字 - 反斜杠将点转义为点，正则表达式点匹配数字。您需要转义反斜杠以在`RegExp`构造函数中传递带有反斜杠的字符串：

```
new RegExp("^-?([0-9]{0,3}$|[0-9]{0,2}\\.?[0-9]{0,1}$)") 
```

或者您使用正则表达式文字（简化，但仍然匹配相同）：

```
/^-?\d{0,2}\.?\d?$/ 
```

# java - 玩！框架。模板“包括”

> ID：11763912
> 
> 赞同：9
> 
> 时间：2012-08-01T16:48:53.397
> 
> 标签：java, scala, web, playframework-2.0, web-development-server

我正在计划我的网站结构如下：

> *   header.scala.html
> *   XXX
> *   页脚.scala.html

现在，应该有一个特定页面而不是“xxx”（即“UsersView.scala.html”）。
我需要的是将页脚和页眉的来源（与众所周知的语言一样）包含在中间页面的代码中。

**所以我的问题是：**

1.  你如何使用 scala 模板在另一个页面中包含一个页面？
2.  你认为这是一个很好的 Play 范例！基于框架的网站？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-11T04:26:30.827

只需像方法一样调用另一个模板。如果你想包含**footer.scala.html**：

`@footer()`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-01T17:02:17.407

一种常见的模式是创建一个包含样板的模板，并采用 HTML 类型的参数。比方说：

main.scala.html

```
@(content: HTML)

@header
// boilerplate

@content

// more boilerplate
@footer 
```

实际上，您并不需要使用这种方法分离页眉和页脚。

您的 UsersView.scala.html 然后看起来像这样：

```
@main {

// all your users page html here.

} 
```

您通过将用户视图作为参数传递给 main 来包装用户视图。

您可以在示例中看到这样的[示例](https://github.com/playframework/Play20/tree/master/samples)

我通常的主模板涉及更多内容，大致如下所示：

```
@(title: String)(headInsert: Html = Html.empty)(content: Html)(implicit user: Option[User] = None)
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>@title</title>
  // bootstrap stuff here
  @headInsert
</head>
<body>
  @menu(user)
  <div id="mainContainer" class="container">  
    @content
  </div>

</body>
</html> 
```

这样，模板可以传入头部插入和标题，并使用户可用，当然还有内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-29T15:39:17.913

Play 提供了一种非常方便的方式来帮助实现它！

官方文档中的布局部分：

首先我们有一个base.html（这是我们在django中调用的-_-）

```
// views/main.scala.html
@(title: String)(content: Html)
<!DOCTYPE html>
<html>
  <head>
    <title>@title</title>
  </head>
  <body>
    <section class="content">@content</section>
  </body>
</html> 
```

如何使用base.html？

```
@main(title = "Home") {

  <h1>Home page</h1>

} 
```

更多信息[在这里](https://www.playframework.com/documentation/2.4.x/JavaTemplateUseCases)

# objective-c - 移动 UIView

> ID：11763913
> 
> 赞同：0
> 
> 时间：2012-08-01T16:48:55.180
> 
> 标签：objective-c, ios, animation, uiview

我正在尝试使用以下方法以编程方式移动 UIView：

```
-(void)animatePlaybackLine: (int) currentBeat{
    CGRect newFrame = CGRectMake(currentBeat*eighthNoteWidth, 0, eighthNoteWidth, 320);
    [playbackLine setFrame:newFrame];
    NSLog(@"Line animated to %i", currentBeat);
    NSLog(@"New frame origin %f", playbackLine.frame.origin.x);
} 
```

当调用该方法时，NSLogs 显示变量 currentBeat 正在按其应有的方式递增，playbackLine 的帧（我的 UIView）似乎正在按应有的方式移动。但是，屏幕上的对象并没有移动。我也尝试过设置边界和中心而不是框架，它们都有相似的结果。我也尝试使用动画而不是设置框架，但无济于事。

我还应该做些什么来使屏幕上的图像显示变化的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:56:23.000

我猜你是在循环中调用那个方法？在您的代码完成执行之前，iOS 不会重绘屏幕。你不能像这样循环并看到迭代结果。

要为视图设置动画，您应该使用 UIKit 为您提供的原生支持。特别是，请查看[UIView 类参考中的动画部分](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW131)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:56:33.297

试试这个

```
 [UIView animateWithDuration:0.3
                      delay:0.0
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
                     datePickerView.frame = imageFrame;
                 } 
                 completion:^(BOOL finished){
                     self.datePickerViewFlag = NO;
                 }]; 
```

# jquery - 使用 jQuery 和 Regex 更改所有图像 SRC 属性？

> ID：11763918
> 
> 赞同：0
> 
> 时间：2012-08-01T16:49:29.367
> 
> 标签：jquery, regex

我正在一个有大约 100 张图片的网站上工作。这些图像都有浅色和深色版本。光有字符串_lt，黑暗有字符串_dk。我有可以手动更改图像的代码。

```
$('img#devbprnt').mouseover(function() {
$('img#devbprnt').attr('src', 'Images/btn_devbprnt_dk.png');    
});
$('img#devbprnt').mouseout(function() {
$('img#devbprnt').attr('src', 'Images/btn_devbprnt_lt.png');    
}); 
```

理想情况下，我想做的是在鼠标悬停时使用 $('img') 作为选择器和 _lt 到 _dk 的任何实例，并在鼠标悬停时进行保留。我认为这可能与正则表达式有关，但我对它们的理解不够好。这可能吗？如果是这样，你能帮我指出正确的方向吗？

谢谢你，杰森。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:55:30.770

正如其他人所指出的，这应该通过 CSS 完成。

如果由于某种原因无法完成，以下是如何在 JavaScript 中完成：

```
$('img[src$="_lt.png"]').hover(function() {
    this.src = this.src.replace(/lt\.png$/, 'dk.png');
}, function() {
    this.src = this.src.replace(/dk\.png$/, 'lt.png');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T16:58:38.123

jQuery 还提供了一个`hover()`函数来做到这一点，

```
var dark = new RegExp('_dk$'),
    light = new RegExp('_lt$');
$('img').hover(function(){
   var image = $(this);
   image.attr('src', image.attr('src').replace(dark, '_lt'));
},
function(){
   var image = $(this);
   image.attr('src', image.attr('src').replace(light, '_dk'));
}); 
```

[http://jsfiddle.net/qj5rw/](http://jsfiddle.net/qj5rw/)

# c# - 如何使用 C# 读取 excel 表的所有行并在 Selenium 测试脚本中运行？

> ID：11763919
> 
> 赞同：1
> 
> 时间：2012-08-01T16:49:31.200
> 
> 标签：c#, excel, c#-4.0, selenium-rc, selenium-webdriver

我需要帮助从 excel 表中读取所有行作为我的 selenium 测试用例中的测试数据。

我只能使用以下代码读取 Excel 工作表的一行。

//设置硒测试

```
 public void SetupTest()
    {
        selenium = new DefaultSelenium("localhost", 4444, "*googlechrome", "http://www.google.com/");
        selenium.Start();
        verificationErrors = new StringBuilder();
    } 
```

//将我连接到我的 Excel 表 SampleTestData.xls

```
public void ConnectExcel()
{
 excel.Application excelApp = new excel.Application();
 excelApp.Visible = true;
 string ExcelDataPath = @"C:\SampleTestData.xls";
 excel.Workbook excelWorkBook = excelApp.Workbooks.Open(ExcelDataPath, 0, false, 5, "", "", false, excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false);
 excel.Sheets excelSheets = excelWorkBook.Worksheets;
 excel.Worksheet DataworkSheet = (excel.Worksheet)excelSheets.get_Item("Sheet1");
 System.String Search1 = ((excel.Range)DataworkSheet.get_Range("A1", Type.Missing)).Value2 as string;
 } 
```

//selenium 代码运行测试

```
public void StartTest()
{
selenium.open("");
selenium.WaitForPageToLoad("100000");
selenium.Type("gbqfif", search1);
selenium.Click("btnG");
selenium.WaitForPageToLoad("100000");

} 
```

此代码让我只选择包含 search1 值的一行。但是，我需要对其进行迭代，使其继续运行 StartTest() 方法，直到输入了 excel 表中的所有行（50）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:15:37.487

这个答案可能对您有帮助，也可能对您没有帮助，但我将借此机会发布 2 个您可以使用的代码示例。

示例 #1

```
using System;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel; 

namespace WindowsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Excel.Application xlApp ;
            Excel.Workbook xlWorkBook ;
            Excel.Worksheet xlWorkSheet ;
            Excel.Range range ;

            string str;
            int rCnt = 0;
            int cCnt = 0;

            xlApp = new Excel.ApplicationClass();
            xlWorkBook = xlApp.Workbooks.Open("csharp.net-informations.xls", 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

            range = xlWorkSheet.UsedRange;

            for (rCnt = 1; rCnt <= range.Rows.Count; rCnt++)
            {
                for (cCnt = 1; cCnt <= range.Columns.Count; cCnt++)
                {
                    str = (string)(range.Cells[rCnt, cCnt] as Excel.Range).Value2 ;
                    MessageBox.Show(str);
                }
            }

            xlWorkBook.Close(true, null, null);
            xlApp.Quit();

            releaseObject(xlWorkSheet);
            releaseObject(xlWorkBook);
            releaseObject(xlApp);
        }

        private void releaseObject(object obj)
        {
            try
            {
                System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
                obj = null;
            }
            catch (Exception ex)
            {
                obj = null;
                MessageBox.Show("Unable to release the Object " + ex.ToString());
            }
            finally
            {
                GC.Collect();
            }
        } 

    }
} 
```

示例 #2

```
FileStream stream = File.Open(filePath, FileMode.Open, FileAccess.Read);

//1\. Reading from a binary Excel file ('97-2003 format; *.xls)
IExcelDataReader excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
//...
//2\. Reading from a OpenXml Excel file (2007 format; *.xlsx)
IExcelDataReader excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);
//...
//3\. DataSet - The result of each spreadsheet will be created in the result.Tables
DataSet result = excelReader.AsDataSet();
//...
//4\. DataSet - Create column names from first row
excelReader.IsFirstRowAsColumnNames = true;
DataSet result = excelReader.AsDataSet();

//5\. Data Reader methods
while (excelReader.Read())
{
    //excelReader.GetInt32(0);
}

//6\. Free resources (IExcelDataReader is IDisposable)
excelReader.Close(); 
```

示例#3

```
using (FileStream fileStream = File.Open(inputFilenames[0], FileMode.Open, FileAccess.Read))
{
    IExcelDataReader excelReader;
    if (Path.GetExtension(inputFilenames[0]) == ".xls")
        excelReader = Factory.CreateReader(fileStream, ExcelFileType.Binary);
    else
        excelReader = Factory.CreateReader(fileStream, ExcelFileType.OpenXml);

    excelReader.NextResult();
    while (excelReader.Name != this.Worksheet)
        excelReader.NextResult();                

    while (excelReader.Read())
    {
        if (FirstRowHasColumnNames)
        {
            FirstRowHasColumnNames = false;
        }
        else
        {
            //do stuff
            var test = GetColumnData(excelReader, 1);
        }
    }

    this.Save(outputFilename);
} 
```

您也可以查看此链接 [Read from Excel File](http://blog.themobilebrand.com/technology/c/reading-an-excel-workbook-using-c-and-oledb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T19:48:34.533

尝试这个：-

```
 //Reading from a OpenXml Excel file (2007 format; *.xlsx)
        IExcelDataReader excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);

        // DataSet - Create column names from first row
        excelReader.IsFirstRowAsColumnNames = true;
        DataSet result = excelReader.AsDataSet();

        while (excelReader.Read())
        {    // Reading from row and get columns by index           
            var test = excelReader.GetString(1);

        } 
```

# c++ - 检查写入组合内存

> ID：11763920
> 
> 赞同：1
> 
> 时间：2012-08-01T16:49:40.047
> 
> 标签：c++, windows

使用 C++/Windows，如何检查分配的内存块是否被写入组合？我自己没有分配内存，但可以访问它。

# apache - Lightbox 不适用于服务器 Apache

> ID：11763923
> 
> 赞同：0
> 
> 时间：2012-08-01T16:50:11.223
> 
> 标签：apache, lightbox2

我有问题。我正在使用 lightbox2 来显示图像，并且在我的本地机器上一切正常。但是，一旦我上传到我的服务器，它就不起作用了。我的服务器使用 Apache

有人遇到过这个吗？

在 Firefox 上使用 Firebug 会显示此错误：

```
<link rel="stylesheet" href="css/lightbox.css">
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>404 Not Found</title>
</head><body>
<h1>Not Found</h1>
<p>The requested URL /css/lightbox.css was not found on this server.</p>
<p>Additionally, a 404 Not Found
error was encountered while trying to use an ErrorDocument to handle the request.</p>
</body></html>
</link> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:58:55.660

路径问题：您想要的是相对于文档根目录。

因此 Apache 从绝对路径设置（在面板中设置，默认值：/home/USER/DOMAIN/）获取文档根目录，然后一切都是相对的。

例如：文档根目录：/home/username/website.com 到 css 的相对路径：assets/css/lightbox.css 到 css 的绝对路径（这在浏览器中不起作用，但适用于在服务器上发出的命令，例如 cp ：/home/用户名/website.com/assets/css/lightbox.css

如果你放了测试`<link rel="stylesheet" href="http://website.com/css/lightbox.css">`，它应该可以工作。

# php - PHP MySQL 连接持久化

> ID：11763929
> 
> 赞同：7
> 
> 时间：2012-08-01T16:50:20.363
> 
> 标签：php, mysql, persistence

我已经阅读了大量关于 PHP 和 MySQL 之间持久性数据库连接的文章（mysql_connect 与 mysql_pconnect）。与 PDO 和 MySQLi 相同。这绝对是我对这一点缺乏了解，但是如何在网页之间保持数据库连接？在这段代码中：

```
$conn = mysql_pconnect( $server , $user, $pass );
mysql_select_db( $dbname ); 
```

如果两个用户同时加载这个页面，使用两个不同的 $dbname 变量，PHP 会只建立一个或两个数据库连接吗？我相当肯定

```
$conn = mysql_connect( $server , $user, $pass ); 
```

将建立两个连接。

如果 pconnect 重用第一个用户打开的连接，mysql_select_db 调用是否对第二个用户有效？

理想情况下，我正在寻找一种减少数据库连接但仍然能够在每个 PHP 脚本中设置默认数据库的方法。我有客户都使用相同的 PHP 脚本，但数据存储在他们自己的客户端数据库中（因此，$dbname 总是不同的，但 MySQL 连接参数是相同的 - 相同的 mysql ip 地址、用户和密码）。

希望这是有道理的。我们可以使用 MySQL、MySQLi 或 PDO，只需要知道如何以最佳方式完成此操作，而不会让客户端意外将数据写入其他人的数据库！提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T17:10:08.403

持久性由嵌入在网络服务器中的 PHP 副本完成。通常你是对的——如果 PHP 在 CGI 模式下运行，就不可能有持久连接，因为当请求完成并且 PHP 关闭时，没有任何东西可以持久存在。

但是，由于网络服务器中嵌入了 PHP 的副本，并且网络服务器本身在请求之间保持运行，因此可以在该“永久”PHP 中维护一个持久连接池。

但是，请注意，在 Apache 多工作器类型的服务器模型上，连接池是按孩子维护的。如果将池限制设置为 10，则每个 Apache 子节点将有 10 个连接。20 个孩子 = 200 个连接。

持久连接还会导致死锁和其他难以调试的问题的长期问题。请记住 - 不能保证用户的 HTTP 请求将由 SAME apache child/mysql 连接提供服务。如果脚本在数据库事务的中途终止，该事务将**不会**回滚，因为 MySQL 看不到 HTTP 方面的内容 - 它所看到的只是 mysql<->apache 连接仍然打开并假设一切正常.

下一个点击特定 apache/mysql 子/连接组合的用户现在将神奇地结束在该事务的中间，不知道该事务已打开。基本上，它相当于一个未冲水马桶的网络——之前用户的所有“垃圾”仍然存在。

使用非持久连接，每次连接时都可以保证拥有一个“干净”的环境。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T17:03:28.700

通过阅读文档和评论，我看到：

mysql_pconnect 上的文档（不推荐使用的方法）

> 其次，脚本执行结束时不会关闭与 SQL 服务器的连接。相反，该链接将保持打开以供将来使用（mysql_close() 不会关闭由 mysql_pconnect() 建立的链接）。

以及对该页面的评论

> 持久连接适用于由 fastCGI 管理的 CGI PHP，与上面的建议相反，它们仅适用于模块版本。那是因为 fastCGI 让 PHP 进程在请求之间运行。这种模式下的持久连接也很容易不受连接限制的影响，因为您可以设置 PHP_FCGI_CHILDREN << mysql's max_connections <<< Apache's MaxClients。这也节省了资源。

mysqli_connect 上的文档（新方法）

> p 前置主机：打开一个持久连接。mysqli_change_user() 在从连接池打开的连接上自动调用。

mysqli_change_user 的文档：

> 更改指定数据库连接的用户并设置当前数据库。

所以我的理解如下： pconnect 在脚本结束后保持连接打开，但是当一个进程（或者可能是一组进程）仍然存在时（比如在设置了 FCGI 的服务器中）。一次只有一个脚本使用连接，当一个新脚本获取该连接时，用户和数据库都会更新。

因此，如果您使用 FCGI 和持久连接，您可以减少打开的数据库连接的数量，但同时运行的脚本不会共享同一个连接。连接被混淆选择哪个数据库没有问题。

# javascript - Firebug 控制台中的对象

> ID：11763932
> 
> 赞同：2
> 
> 时间：2012-08-01T16:50:58.497
> 
> 标签：javascript, firefox, firebug

这是我在[此处](https://stackoverflow.com/questions/11750145/javascript-trouble-using-for-in-to-iterate-through-an-object)发布的问题的扩展。

我在操作 js 对象时遇到问题，我认为这与**范围**或对象的填充方式有关。我正在尝试使用 Firebug 来解决问题，但确实发现了一个我无法解释的差异。 **有谁知道为什么有时控制台会显示这样的对象**： ![在此处输入图像描述](../Images/853df429c3734ed3a0ae3c507c2d4ffb.png)

*它在哪里显示对象的内容*

**有时像这样：**

![在此处输入图像描述](../Images/ec3a8dc6f775f63b66e0e1ae31e334fe.png)

*看起来好像对象是空的*

但是，该对象**不是空**的——当我点击上面屏幕截图中的**Object { }**时，我被带到 DOM 检查器，它确实显示了该对象的内容： ![在此处输入图像描述](../Images/f4d80ebab9316b7a5155c308795611e0.png)

不用说，它以第一种方式工作（我硬编码对象的键/值），但不是第二种方式（动态添加它们）。我在想如果我能弄清楚为什么控制台以不同的方式显示这两个看似相似的对象，我也许能够在我的代码中找到问题的根源。如果两次问类似的问题是不好的形式，我深表歉意，但我认为这是一个特定于 Firebug 的问题，另一个是与 javascript 相关的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:26:31.337

**解决** 回想起来真的很简单，我认为@amnotiam 的最后一条评论走在了正确的轨道上。发生的事情是我在创建对象`console.log()` *之后*调用，但*在*添加任何值之前。当我单击它在 DOM 中检查它时，所有值都已添加。

有关原始帖子答案的更多详细信息，请[点击此处](https://stackoverflow.com/questions/11750145/javascript-trouble-using-for-in-to-iterate-through-an-object)。

# hadoop - 使用 chmod 安装 hadoop

> ID：11763935
> 
> 赞同：0
> 
> 时间：2012-08-01T16:51:11.400
> 
> 标签：hadoop, fedora, hive

我正在关注[这篇博客文章](http://krishnasblog.com/2012/05/17/datawarehouse-implementation-using-hadoophbasehivespringbatch-part-2/)，它展示了如何在 ubuntu 上安装 hadoop 我正在 Fedora 15 上尝试它

我在以下行有问题

```
sudo chown <login user>:<machine name>/app/hadoop/tmp 
```

我的登录名是 john，机器名是 localhost.localdomain 我在 vm ware 上安装了 fedora 命令给我以下错误

> chown：在 `john:localhost.localdomain/app/hadoop/tmp' 之后缺少操作数

请帮我找出问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:29:01.807

您可以创建一个名为 hadoop 的组，并在该组中创建一个名为 hadoop 的用户，如下所示：

$sudo addgroup hadoop

$sudo adduser --ingroup hadoop hadoop

$sudo chown -R hadoop:hadoop /app/hadoop/tmp

这是本[教程设置 hadoop 集群的教程](http://students.cis.uab.edu/animeshj/hadoop/setuphadoopcluster.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:00:59.417

尝试：

```
sudo chown john:localhost.localdomain /app/hadoop/tmp 
```

# regex - 正则表达式匹配前面没有爆炸的字符串

> ID：11763937
> 
> 赞同：1
> 
> 时间：2012-08-01T16:51:15.970
> 
> 标签：regex, bash

在 bash 中，我试图匹配数组中存在的有效属性。属性可以通过在它们前面加上一个 bang（感叹号，！）来“禁用”，在这种情况下它们不能匹配。我有这个：

```
[[ ${TESTS[@]} =~ [^\!]match ]] 
```

如果单词 'match' 在 TESTS 中并且前面没有!，它将返回 true。

它可以工作，除非单词匹配位于数组中的第一个位置。问题是正则表达式在说*“匹配之前不是一个！”* . 当它是第一项时，它前面没有任何内容，因此不匹配。

我如何修改上面的内容以说*“匹配前面没有！”* ?

从阅读我尝试过的其他问题的答案*(?<!!)match*但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:54:41.093

使用这个：

```
([^\!]|^)match 
```

使用示例：

```
$ [[ match =~ (^|[^\!])match ]] && echo matches || echo "doesn't match"
matches
$ [[ xmatch =~ (^|[^\!])match ]] && echo matches || echo "doesn't match"
matches
$ [[ '!match' =~ (^|[^\!])match ]] && echo match || echo "doesn't match"
doesn't match 
```

一般来说，在这里使用断言也是正确的，但是 bash 使用 POSIX 正则表达式，它们对断​​言一无所知。但是使用`grep`(GNU grep)、or`perl`或任何支持 PCRE 的东西，你都可以做到：

```
$ echo match | grep -qP '(?<!!)match' && echo matches || echo "doesn't match"
matches
$ echo xmatch | grep -qP '(?<!!)match' && echo matches || echo "doesn't match"
matches
$ echo '!match' | grep -qP '(?<!!)match' && echo matches || echo "doesn't match"
doesn't match 
```

# pdf - 在 Windows Azure VM 上安装打印驱动程序

> ID：11763940
> 
> 赞同：2
> 
> 时间：2012-08-01T16:51:33.313
> 
> 标签：pdf, azure, pdf-generation

我们有一个原生的、独立的 Win32 应用程序，用于生成 .PDF 文件。它是命令行驱动的，用于获取我们的一个数据文件并生成 PDF 文件。它与安装在计算机上的打印驱动程序结合使用。

我知道我们可以在 Azure 中使用用于在 .NET 中生成 PDF 文件的库，但是，我们必须支持在我们的应用程序中执行的特定类型布局，并且该逻辑尚未在服务器端。这是一个短期的欺骗，在我们从 C/C++ 移植（或重写）我们已有 20 年历史的类型布局引擎之前。这里有很多复杂的代码。

我看到我们现在可以在 Azure 中运行本机应用程序（耶）。但是，我的问题似乎是这个本机应用程序需要安装打印驱动程序。我无法找到有关在 Azure 辅助角色中安装打印驱动程序的任何信息。

我发现了这个讨论：[https](https://stackoverflow.com/questions/9125385/printing-to-pdf-from-azure-worker-role) ://stackoverflow.com/questions/9125385/printing-to-pdf-from-azure-worker-role 。这样做的最终结果是在 Azure 上使用 PDF 库，这对我们来说并不适用。

另外，我知道每次有人想在我们的网站上预览他们的数据文件时，使用服务器启动生成 PDF 文件的过程并不是最好的方法。当用户想要在浏览器中预览我们的专有数据格式时，我们计划通过向用户显示 PDF 来作弊。这是一个项目的第一阶段，用 C# 重写我们已有 20 年历史的类型布局引擎将需要更长的时间才能完成，我们正在谈论这个（承认的 hack）作为短期（在更大的意义上）措施。

如何在 Windows Azure 辅助角色中安装打印驱动程序？可能吗？还有其他选择吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:56:45.763

如果您可以执行命令行，静默安装 yms 提到的 Amyuni 软件，那么您可以将其作为您的工作角色的启动任务的一部分运行，可能具有提升的权限。人们使用启动任务来做各种各样的事情，他们中的许多人写过关于它的博客文章或在[SO](https://stackoverflow.com/search?q=azure%20startup%20task%20install&submit=search)上回答有关它们的问题，但一个好的起点是[官方文档](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:41:42.247

这可能会有所帮助：[Amyuni PDF Converter](http://www.amyuni.com/en/developer/pdfconverter/features)是一个 PDF 打印机驱动程序，其 API 作为 COM 接口和网络公开。允许您以编程方式静默安装和卸载驱动程序的程序集。这可以通过使用应用程序中的[PDFDriverInit](http://www.amyuni.com/WebHelp/Amyuni_Document_Converter/Printer_Installation_and_Activation/Methods/PDFDriverInit,_HTMLDriverInit,_RTFDriverInit.htm)和[DriverEnd](http://www.amyuni.com/WebHelp/Amyuni_Document_Converter/Printer_Installation_and_Activation/Methods/DriverEnd.htm)方法来完成。

应用程序安装驱动程序后，您可以[使用内存流作为目标打印为 PDF 并将其上传到 Microsoft Azure Blob 存储](http://blog.amyuni.com/?p=1693)。

Amyuni PDF Converter有两种安装方式：

1- 使用随包提供的安装程序。
2- 将 dll 文件复制到其相应的文件夹，然后调用方法 DriverInit。

这里解释了完整的过程： [使用 Amyuni 文档转换器的开发者版本](http://www.amyuni.com/WebHelp/Amyuni_Document_Converter/Using_the_Developer_Amyuni_Converter.htm)

关于您的特定场景，如果您有一个使用 Amyuni PDF Converter 的应用程序，那么确实应该安装一个打印机驱动程序。您的应用程序可能会在每次启动时安装驱动程序并在关闭时将其删除，或者它可能仅在安装程序期间安装它。

如果您没有此应用程序的源代码，但仍有 Amyuni 提供的库的许可信息，您可以尝试构建一个小型应用程序或批处理脚本来处理安装过程。您可以联系[Amyuni 支持](http://www.amyuni.com/en/support/getsupport/)以获取指向您正在使用的版本的最新版本的链接。

您提到您使用的是 Windows Azure VM，因此我假设[您拥有虚拟系统的管理权限](http://www.windowsazure.com/en-us/home/features/virtual-machines/)，并且您可以使用远程桌面连接到它并运行任何类型的应用程序。

*通常的免责声明适用*

# .net - 类型 XX 存在于两个 DLL 中

> ID：11763942
> 
> 赞同：6
> 
> 时间：2012-08-01T16:51:40.267
> 
> 标签：.net, silverlight, namespaces, assemblies, assembly-references

我正在开发一个 silverlight C# 应用程序，我添加了对 Microsoft DLL 的引用并收到以下消息：

> 该类型存在于两个 DLL 中

因为我使用的是在两个 DLL 中定义的控件（一个与 SDK 相关联，另一个是我自己添加的）。

在网上做了一些研究后，我尝试为这两个 DLL 创建一个别名，并使用`extern alias <alias_name>`. 这种方法解决了后面xaml.cs代码中的一些问题，但并没有真正解决xaml中的问题。完成此操作后，Visual Studio 抱怨其中一个控件（来自我添加的 DLL）未在命名空间中定义。

所以我想知道是否有一种方法可以使用别名在 XML 中指定命名空间？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T18:11:54.593

[堆栈溢出](https://stackoverflow.com/questions/9463863/assembly-alias-in-xaml)

[MSDN](http://social.msdn.microsoft.com/Forums/da-DK/vseditor/thread/87f0caa0-c57a-4146-a999-c794947ae28e)

您只需要使用逗号分隔符向您的程序集添加第二个别名。

例如

```
<Aliases>global,alias_name</Aliases> 
```

XAML 将使用全局别名，您可以在您的类中进行选择。

.

如果您需要在一个地方使用这两个程序集，[我认为这个解决方案是唯一的一个。](https://stackoverflow.com/questions/3815492/external-alias-in-xaml)

基本上，在您自己的项目中为每个必需的类在单独的命名空间中创建两个包装类，然后引用包装命名空间而不是冲突的程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-08T13:45:00.410

如果您在 C# 代码（不在 XAML 中）中使用重复命名空间中的类，那么有一个好方法 [http://csc-technicalnotes.blogspot.ru/2009/07/type-exists-in-both-dlls.html](http://csc-technicalnotes.blogspot.ru/2009/07/type-exists-in-both-dlls.html)

使用外部程序集别名。指定 DLL 引用的“别名”属性。

1.  在 Visual Studio 解决方案资源管理器中，打开 References 文件夹。
2.  右键单击 DLL 引用，选择属性
3.  在“别名”属性中输入别名值。
4.  示例：MyDLLv1.dll 引用的别名可能是“LegacyMyDLL”。

在 C# 源代码中指定别名：

```
// Old way
using MyNamespace;

// New way
extern alias LegacyMyDLL;
using LegacyMyDLL.MyNamespace; 
```

# android - 可绘制的 Android 库

> ID：11763945
> 
> 赞同：0
> 
> 时间：2012-08-01T16:52:04.390
> 
> 标签：android, image, gallery, out-of-memory, recycle

我正在创建一个简单`Gallery`的可绘制对象 - 它们中的每一个几乎都有屏幕大小，因此它们需要相当多的内存。对于每个条目，我正在为标题创建一个自定义`LinearLayout`项。正如你们大多数人所知，android不会回收视图，因此它的画廊在低内存手机上很容易崩溃（在我的情况下，在 16mb ram 限制加载 4 个可绘制对象之后）。`ImageView``TextView``Gallery`

这是一个简单的问题 - 你如何实现这样的画廊，所以它不会耗尽内存？你如何回收这些图像？一个工作代码示例会很棒。

几点注意事项：

*   inSampleSize 不可行，我无法缩小这些图像

*   在从资源加载的 Drawable 上调用 recycle() 是不可能的，因为它会在 Android 4.0+ 上崩溃（它会在其内部缓存中回收 drawable）

*   不要让我发布代码，因为没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:56:00.030

您不应该使用 Gallery，因为它已被弃用。特别是因为到目前为止还没有编写任何代码。文档建议使用 Horizo​​ntalScrollView 或 ViewPager。

我觉得 ViewPager 是您正在寻找的，因为它最多只能在内存中保留 3 张图片并为​​您处理所有回收。这是一篇有关如何实现一个[android viewPager 实现的更多信息的帖子](https://stackoverflow.com/questions/7244813/android-viewpager-implementation)

# ajax - Ajax.ActionLink 在哪里放置 pushState

> ID：11763956
> 
> 赞同：0
> 
> 时间：2012-08-01T16:52:41.943
> 
> 标签：ajax, asp.net-mvc-3, html, view-helpers

我想知道在使用 Ajax.ActionLink时应该何时放置[“pushState”html5 。](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)

我不知道是否应该在 AjaxOptions 中的 OnBegin 或 OnComplete 事件上或单击链接时更改它（最后一个是我见过的推荐）...

我知道有关于这个问题的答案，但我没有找到任何可以澄清我两者之间区别的答案。

谢谢

# javascript - 自动完成输入问题

> ID：11763959
> 
> 赞同：1
> 
> 时间：2012-08-01T16:52:48.760
> 
> 标签：javascript, jquery

但是，我有一个引用几个 jquery 文件的 html 文件，并且有一个数组来提取输入列表的数据；当我运行程序时，我不断收到 JS 数组的错误消息“预期对象”。任何帮助，将不胜感激。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title></title>
    <script type="text/javascript">  
      $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $("#tags").autocomplete({
            source: availableTags
        });
    });
    </script>

    <script src="jquery-1.7.1.js" type="text/javascript"></script>
    <script src="jquery.ui.widget.js" type="text/javascript"></script>

    <script src="jquery.ui.core.js" type="text/javascript"></script>

    <script src="jquery.ui.autocomplete.js" type="text/javascript"></script>

    <script src="jquery-ui.js" type="text/javascript"></script>
</head>
<body>
<div>
    <label for="tags">Tags: </label>
    <input id="tags" />
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:58:00.463

尝试在 jQuery 代码之前包含 jQuery（和相关文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T16:54:58.543

为了使像 jQuery 这样的外部脚本/库有用，您需要在实际使用它们之前包含它们。只需将`<script>`标记的内容移动到所有外部脚本之后，它应该可以正常工作。

```
<script src="jquery-1.7.1.js" type="text/javascript"></script>
<script src="jquery.ui.widget.js" type="text/javascript"></script>
<script src="jquery.ui.core.js" type="text/javascript"></script>
<script src="jquery.ui.autocomplete.js" type="text/javascript"></script>
<script src="jquery-ui.js" type="text/javascript"></script>

<script type="text/javascript">  
  $(function() {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
    $("#tags").autocomplete({
        source: availableTags
    });
});
</script> 
```

# php - 在根文件夹之外托管子域时的 Open_basedir 限制

> ID：11763962
> 
> 赞同：0
> 
> 时间：2012-08-01T16:53:04.610
> 
> 标签：php, cpanel, open-basedir

好的，我的主目录是 /home/tubzandm

我的实时站点的根文件夹是 /home/tubzandm/public_html

我们的开发站点是 /home/tubzandm/develop/public_html

域 dev.tubzandmore.com 指向 /home/tubzandm/develop/public_html

域 cp.dev.tubzandmore.com 指向 /home/tubzandm/develop/public_html/cp

当我在 cp.dev.tubzandmore.com 上托管的脚本尝试调用 require_once 时，我得到：

```
Warning: require_once() [function.require-once]: open_basedir restriction in effect. File(/home/tubzandm/develop/public_html/includes/mainlib.inc) is not within the allowed path(s): (/home/tubzandm/develop/public_html/cp:/usr/lib/php:/usr/local/lib/php:/tmp) in /home/tubzandm/develop/public_html/cp/lib/functions.php on line 4 
```

第 4 行的 functions.php 中的代码说

```
require_once('/home/tubzandm/develop/public_html/includes/' . 'mainlib.inc'); 
```

我们使用 Apache DSO 风格的指令。

当然，我可以进入 PHP open_basedir Tweak 并禁用对该域名的保护。但是我们的项目经理对安全性非常挑剔，不希望我们这样做。

有谁知道解决方法？或者一个很好的解释为什么我们应该有 open_basedir 保护？

**mainlib.inc 位于 /home/tubzandm/develop/public_html/includes。当我尝试从位于 /home/tubzandm/develop/public_html/cp/lib 中的 functions.php 内部要求该错误时，出现错误**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:59:32.990

你不觉得这

`require_once('/home/tubzandm/develop/public_html/includes/' . 'mainlib.inc');`

应该

`require_once('/home/tubzandm/develop/public_html/cp/includes/' . 'mainlib.inc');`?

正如您所说，您的`cp.dev.tubzandmore.com`域被指向`/home/tubzandm/develop/public_html/cp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:48:28.963

为这个域禁用了 open_basedir 并且它起作用了。对此不满意，但这似乎是唯一可行的解​​决方案

# opencl - 我如何知道内核是否同时执行？

> ID：11763963
> 
> 赞同：3
> 
> 时间：2012-08-01T16:53:06.197
> 
> 标签：opencl

我有一个带有 CC 3.0 的 GPU，所以它应该支持 16 个并发内核。我通过循环 clEnqueueNDRangeKernel 10 次来启动 10 个内核。我如何知道内核是同时执行的？

我想到的一种方法是在 NDRangeKernel 语句之前和之后获取时间。我可能不得不使用事件来确保内核的执行已经完成。但我还是觉得循环会顺序启动内核。有人可以帮我吗..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T12:33:34.207

要确定您的内核执行是否重叠，您必须对它们进行分析。这需要几个步骤：

### 1\. 创建命令队列

仅当使用以下属性创建命令队列时才会收集分析数据`CL_QUEUE_PROFILING_ENABLE`：

```
cl_command_queue queues[10];
for (int i = 0; i < 10; ++i) {
  queues[i] = clCreateCommandQueue(context, device, CL_QUEUE_PROFILING_ENABLE,
                                   &errcode);
} 
```

### 2\. 确保所有内核同时启动

您的假设是正确的，即 CPU 按顺序排列内核。但是，您可以创建单个用户事件并将其添加到所有内核的等待列表中。这会导致内核在用户事件完成之前不开始运行：

```
// Create the user event
cl_event user_event = clCreateUserEvent(context, &errcode);

// Reserve space for kernel events
cl_event kernel_events[10];

// Enqueue kernels
for (int i = 0; i < 10; ++i) {
  clEnqueueNDRangeKernel(queues[i], kernel, work_dim, global_work_offset,
                         global_work_size, 1, &user_event, &kernel_events[i]);
}

// Start all kernels by completing the user event
clSetUserEventStatus(user_event, CL_COMPLETE); 
```

### 3\. 获取分析时间

最后，我们可以收集内核事件的时间信息：

```
// Block until all kernels have run to completion
clWaitForEvents(10, kernel_events);

for (int i = 0; i < 10; ++i) {
  cl_ulong start;
  clGetEventProfilingInfo(kernel_event[i], CL_PROFILING_COMMAND_START,
                          sizeof(start), &start, NULL);
  cl_ulong end;
  clGetEventProfilingInfo(kernel_event[i], CL_PROFILING_COMMAND_END,
                          sizeof(end), &end, NULL);
  printf("Event %d: start=%llu, end=%llu", i, start, end);
} 
```

### 4\. 分析输出

现在您有了所有内核运行的开始和结束时间，您可以检查重叠（手动或以编程方式）。输出单位是纳秒。但是请注意，设备计时器仅精确到某个分辨率。您可以使用以下方法查询分辨率：

```
size_t resolution;
clGetDeviceInfo(device, CL_DEVICE_PROFILING_TIMER_RESOLUTION,
                sizeof(resolution), &resolution, NULL); 
```

FWIW，我在带有 CC 2.0（应该支持并发内核）的 NVIDIA 设备上进行了尝试，并观察到内核是按顺序运行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T15:44:47.423

[您可以通过使用C Framework for OpenCL](http://fakenmc.github.io/cf4ocl/)避免其他答案中建议的所有样板代码（顺便说一句是正确的），这大大简化了此任务，并为您提供有关 OpenCL 事件（内核执行、数据传输等）的详细信息)，包括专门用于重叠执行所述事件的表格和绘图。

我开发这个库是为了简化其他答案中描述的过程。[您可以在此处](http://www.fakenmc.com/cf4ocl/docs/latest/group___c_c_l___p_r_o_f_i_l_e_r.html#details)查看基本用法示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:08:06.530

是的，按照您的建议，尝试使用事件，并分析所有 QUEUED、SUBMIT、START、END 值。这些应该是“设备时间”中的绝对值，您可以查看不同内核的处理（开始到结束）是否重叠。

# firefox-addon - 将信息发送到上下文菜单的内容脚本

> ID：11763966
> 
> 赞同：4
> 
> 时间：2012-08-01T16:53:28.207
> 
> 标签：firefox-addon, firefox-addon-sdk

我见过很多关于上下文菜单和双向通信的问题，看来我知道我的问题的答案......“你不能”，但无论如何我都会尝试。

在每个页面上都有一个由 page-mod 创建的模态 div。此模式旨在当用户将鼠标悬停在文本节点中的单词上以给出单词的翻译时显示。这完美地工作，我对 page-mod 没有任何问题。

我现在要做的是允许用户突出显示文本选择，右键单击以调出上下文菜单，我的新菜单项将是“翻译选择”，然后在模态 div 中显示选择。这就是问题开始的地方。我可以响应内容脚本中的上下文和单击事件，如果我不必进行翻译，这很好。翻译由 Web 服务完成，并且内容脚本无法调用 Web 服务，因为回调不存在于内容脚本的上下文中，因为它位于代理沙箱中。这意味着所有 Web 服务调用都需要来自 main.js（这就是它在 page-mod 中的工作方式）。问题是 main.js 中的 context-menu 对象无法访问 DOM 来更新模态 div 的内容并显示它，并且它不能向内容脚本发送信息，以便内容脚本可以更新 DOM 并显示模态 div。那么如何从上下文菜单的附加脚本中获取到 DOM 的翻译呢？

我想用 SDK 做的事情是可能的，还是我必须撤消很多小时的工作才能让我的项目回到“老派”的做事方式，这样我才能让上下文菜单正常工作？

这就是我所拥有的（page-mod 有效，需要上下文菜单的帮助）：

```
exports.main = function (options, callbacks) {
    'use strict';
    var myAppMenuItem,
        myAppContextMenu,
        myAppPanel,
        myAppMod,
        self = require('self'),
        contextMenu = require('context-menu');

    myAppMenuItem = require('menuitems').Menuitem();

    if (myAppMenuItem.getAttribute('checked') === 'false') {
        return;
    }

    myAppMod = require('page-mod');
    myAppMod.PageMod({
        include: '*',
        contentScriptWhen: 'ready',
        contentScriptFile: [self.data.url('jquery-1.7.2.min.js'), self.data.url('myAppmod.js')],
        contentStyleFile: self.data.url('myAppmod.css'),
        onAttach: function (worker) {
            worker.port.on(
                'translate',
                function (data) {   
                    require('request')
                        .Request({
                            url: 'http://api.microsofttranslator.com/V2/Ajax.svc/Translate',
                            content: {
                                appid : 'myappid',
                                to : data.to,
                                from : data.from,
                                text : data.text
                            },
                            onComplete: function (response) {
                                worker.port.emit('translation', { response : response.text, elementId : data.elementId });
                            }
                        })
                        .get();
                }
            );
        }
    });

    myAppContextMenu = contextMenu.Item({
        label: "Translate Selection",
        context: contextMenu.SelectionContext(),
        contentScriptFile : [self.data.url('jquery-1.7.2.min.js'), self.data.url('myAppcontextmenu.js')],
        onMessage: function (data) {
            require('request')
                .Request({
                    url: 'http://api.microsofttranslator.com/V2/Ajax.svc/Translate',
                    content: {
                        appid : 'myappid',
                        to : data.to,
                        from : data.from,
                        text : data.text
                    },
                    onComplete: function (response) {
                        <what can I do here to send the information to the content script?>
                    }
                })
                .get();
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:03:14.600

感谢弗拉基米尔！以下代码执行我想要的操作：

在上下文菜单的 main.js 中：

```
myAppContextMenu = contextMenu.Item({
    label: "Translate Selection",
    context: contextMenu.SelectionContext(),
    contentScriptFile : [self.data.url('jquery-1.7.2.min.js'), self.data.url('myAppcontextmenu.js')],
    onMessage: function (data) {
        var text = require('selection').text;
        require('request')
            .Request({
                url: 'http://api.microsofttranslator.com/V2/Ajax.svc/Translate',
                content: {
                    appid : 'myappid',
                    to : data.to,
                    from : data.from,
                    text : text
                },
                onComplete: function (response) {
                    var index,
                        tabs = require('sdk/tabs');

                    for (index = 0; index < workers.length; index += 1) {
                        if (workers[index].tab === tabs.activeTab) {
                            workers[index].port.emit('selectionTranslation', { text: text, response : response.text, leftOffset : data.leftOffset, topOffset : data.topOffset });
                        }
                    }
                }
            })
            .get();
    }
}); 
```

并在内容脚本中：

```
self.on(
    'click',
    function (node, data) {
        'use strict';
        var selectedElement = $(node),
            messageData =
                {
                    to : 'es',
                    from : 'en',
                    topOffset : selectedElement.offset().top + (selectedElement.height() / 2),
                    leftOffset : selectedElement.offset().left + (selectedElement.width() / 2)
                };

        self.postMessage(messageData);
    }
); 
```

函数中定义了一个全局`workers`数组变量，该变量由页面模块`exports.main`的函数填充，如下所示：`onAttach`

```
 workers.push(worker);

        worker.on(
            'detach',
            function () {
                var index = workers.indexOf(worker);
                if (index >= 0) {
                    workers.splice(index, 1);
                }
            }
        ); 
```

# c# - 此 Linq 查询是否会产生对 SQL Server 的多次运行行程？

> ID：11763967
> 
> 赞同：1
> 
> 时间：2012-08-01T16:53:30.820
> 
> 标签：c#, sql-server, linq-to-sql, linq-to-entities

这是代码：

```
public IEnumerable<SomeItem> DescendantsAndSelf()
{
    yield return this;
    foreach (var item in Children.SelectMany(x => x.DescendantsAndSelf())
    {
        yield return item;
    }
} 
```

我从这里得到这个代码： [https ://stackoverflow.com/a/4814278/184773](https://stackoverflow.com/a/4814278/184773)

这是一个递归 linq 查询。我想实现这一点，但担心它会使我的服务器停机。你知道这是否会执行多次运行到服务器的行程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:55:01.973

如果您只想进行一次调用，您可以使用[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.100%29.aspx)在 SQL 中实现递归查询，并将其作为可以从 LINQ 调用的存储过程公开给您的应用程序。

# datatables - Jeditable + 数据表 + 服务器端处理

> ID：11763970
> 
> 赞同：2
> 
> 时间：2012-08-01T16:53:55.133
> 
> 标签：datatables, jeditable

我有这段代码...

```
 $(document).ready(function() {
   var oTable = $('#example').dataTable( {
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "../listagem/listar_manuais.php",
    "sPaginationType": "full_numbers",
    "fnDrawCallback": function () {
        $('td', this.fnGetNodes()).editable( 'update.php', {
            "callback": function( sValue, y ) {
                var aPos = oTable.fnGetPosition( this );
                oTable.fnUpdate( sValue, aPos[0], aPos[1] );
            },
            "submitdata": function ( value, settings ) {
                return { "row_id": this.parentNode.getAttribute('id') };
            },
            "height": "14px"
        } );
    }
});
} ); 
```

它所做的是数据表的服务器端搜索......

我的问题是，我不知道从这里做什么，通过服务器端处理来获得 Jeditable 功能......

任何人都可以帮忙吗？：秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:58:02.040

这些值将在您的 update.php 中的 HTTP 请求对象中。根据上面的代码，您更新的值在“value”中，row_id 在“row_id”中。

# python - 安排图像大小 matplotlib

> ID：11763972
> 
> 赞同：3
> 
> 时间：2012-08-01T16:54:15.327
> 
> 标签：python, plot, matplotlib

我拍了一张图片，`imread()`但图片的大小与图片不同。此外，当我保存图形时，图像周围的白色/灰色空间被认为是图像的一部分。

我想要的是获得一张图像，经过一些处理后保存它，并拥有一个尺寸相同且没有白色/灰色空间的图像。

实际上，我尝试做的是使用 NetworkX 包在图像上绘制图形并保存我在其他地方使用的图形。

代码就是这样；

```
import matplotlib.pyplot as plt 
import networkx as nx 
import matplotlib.image as mpimg 

G = nx.cycle_graph(80) 
pos = nx.circular_layout(G) 
img = mpimg.imread(path1) 
plt.imshow(img)

nx.draw(G,pos) 
nx.draw(G, pos=pos) 

plt.axis('off')
plt.show() 
plt.savefig('test.png') 
```

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:57:43.157

这取决于您如何保存图像 - 您可能应该使用

```
import matplotlib.pylab as pp
pp.imwrite('savedimage.png', matrix) 
```

而不是`savefig`创建图形的选项-我想那是您生成边框的地方。

如果由于绘图中添加了其他元素而需要保存图形，则需要做三件事，

*   调整轴的大小以填充图形
*   确保图形与原始图像具有相同的纵横比
*   设置`dpi`图形的 ，使保存的图像与输入图像具有相同的尺寸。

这些都是在`matplotlib`

第1步：

```
ax = pp.gca()
ax.set_position([0,0,1,1]) 
```

第2步：

```
asprat = float(img.shape[0])/img.shape[1]
sz = fig.get_size_inches()
fig.set_figsize_inches([sz[0], asprat * sz[1]) 
```

第 3 步：

```
fig.set_dpi( img.shape[0]/sz[0] ) 
```

试试看 - 如果图像被绘制旋转或其他东西，我可能已经切换了一个维度。

# ant - Jenkins CI 为长流程构建超时

> ID：11763974
> 
> 赞同：4
> 
> 时间：2012-08-01T16:54:26.247
> 
> 标签：ant, continuous-integration, jenkins

我们使用 Jenkins CI（版本 1.454）作为自动化测试的执行引擎（通过 Ant 触发）。我的一项测试至少运行 1-2 天。我无法完全找到，因为 Jenkins 总是在我的测试完成之前终止它。上次约 20,5 小时后。

我们安装了“构建超时”插件，但是有问题的测试项目没有配置超时，所以它不应该中断。测试在从节点上运行。全局 Jenkins 配置不包含任何超时设置。

我见过另外两个人有类似的问题，但到目前为止还没有答案

堆栈跟踪：

```
INFO: Test-Linux-lts-mc #31 aborted
java.lang.InterruptedException
at java.lang.Object.wait(Native Method)
at hudson.remoting.Request.call(Request.java:127)
at hudson.remoting.Channel.call(Channel.java:681)
at hudson.remoting.RemoteInvocationHandler.invoke(RemoteInvocationHandler.java:158)
at $Proxy37.join(Unknown Source)
at hudson.Launcher$RemoteLauncher$ProcImpl.join(Launcher.java:859)
at hudson.Launcher$ProcStarter.join(Launcher.java:345)
at hudson.tasks.Ant.perform(Ant.java:217)
at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:703)
at hudson.model.Build$RunnerImpl.build(Build.java:178)
at hudson.model.Build$RunnerImpl.doRun(Build.java:139)
at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:473)
at hudson.model.Run.run(Run.java:1408)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:238) 
```

控制台日志不显示任何错误或超时指示。它只是说构建中止并清理节点工作区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T21:32:01.453

Jenkins 本身没有超时。我有 24 小时的性能测试，詹金斯不会中止它们。

这`java.lang.InterruptedException`让我觉得你的构建过程中有一个信号会逃脱并击中詹金斯。您是否使用`Invoke Ant`构建步骤运行 ant 目标？如果是，您可以尝试执行 shell 构建步骤并在 shell 中运行`ant yourtarget`。

# python - Python http.client json 请求和响应。如何？

> ID：11763976
> 
> 赞同：29
> 
> 时间：2012-08-01T16:54:39.787
> 
> 标签：python, python-3.x

我有以下代码要更新到 Python 3.x 所需的库将更改为 http.client 和 json。

我似乎无法理解该怎么做。你能帮忙吗？

```
import urllib2
import json

data = {"text": "Hello world github/linguist#1 **cool**, and #1!"}
json_data = json.dumps(data)

req = urllib2.Request("https://api.github.com/markdown")
result = urllib2.urlopen(req, json_data)

print '\n'.join(result.readlines()) 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-01T17:12:03.180

```
import http.client
import json

connection = http.client.HTTPSConnection('api.github.com')

headers = {'Content-type': 'application/json'}

foo = {'text': 'Hello world github/linguist#1 **cool**, and #1!'}
json_foo = json.dumps(foo)

connection.request('POST', '/markdown', json_foo, headers)

response = connection.getresponse()
print(response.read().decode()) 
```

我会引导你完成它。首先，您需要创建一个用于与远程服务器通信的 TCP 连接。

```
>>> connection = http.client.HTTPSConnection('api.github.com') 
```

--[`http.client.HTTPSConnection()`](http://docs.python.org/py3k/library/http.client.html#http.client.HTTPSConnection)

Thẹ̣n 您将需要指定请求标头。

```
>>> headers = {'Content-type': 'application/json'} 
```

在这种情况下，我们说请求正文的类型为 application/json。

接下来，我们将从 python dict() 生成 json 数据

```
>>> foo = {'text': 'Hello world github/linguist#1 **cool**, and #1!'}
>>> json_foo = json.dumps(foo) 
```

然后我们通过 HTTPS 连接发送一个 HTTP 请求。

```
>>> connection.request('POST', '/markdown', json_foo, headers) 
```

得到响应并阅读它。

```
>>> response = connection.getresponse()
>>> response.read()
b'<p>Hello world github/linguist#1 <strong>cool</strong>, and #1!</p>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T18:30:03.307

为了使您的代码与 Python 3 兼容，更改导入语句和编码/解码数据就足够了，假设`utf-8`无处不在：

```
import json
from urllib.request import urlopen

data = {"text": "Hello world github/linguist№1 **cool**, and #1!"}
response = urlopen("https://api.github.com/markdown", json.dumps(data).encode())
print(response.read().decode()) 
```

请参阅[另一个 https 帖子示例](https://gist.github.com/1841962#file_http_post_urllib.py)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:57:25.933

```
conn = http.client.HTTPSConnection('https://api.github.com/markdown')
conn.request("GET", "/markdown")
r1 = conn.getresponse()
print r1.read() 
```

# php - jquery 与 PHP mySQL 聊天

> ID：11763979
> 
> 赞同：5
> 
> 时间：2012-08-01T16:54:50.263
> 
> 标签：php, jquery, mysql, chat

我今天给自己设定了一个挑战，要在半小时内编写一个 jQuery 聊天。最终我花了40分钟。

但是，我想改进它，这样服务器和浏览器上的负载就不会太可怕了。

当前，用户在文本框中输入内容，按回车键，此数据将发送到 .php 文件，该文件更新 mySQL 表并输出表上的所有行。

如果有人在没有用户按下回车的情况下说出任何内容，则每两秒在 div 上设置一个间隔来更新。

我只是想知道如何以更好的方式或最有效的方式执行此操作。我想了解使用的最佳技术及其原因。

感谢您的所有输入，我喜欢堆栈溢出，它对我来说非常宝贵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:32:07.483

对带有“php back”/“javascript front”技术堆栈的聊天应用程序使用 ajax 轮询将不可避免地导致服务器负载过重。Http 并不是为这种通信而设计的，如果您使用的是 apache（我假设），那么每个请求的开销都会非常大。

正如一些评论所指出的，您可以使用全栈javascript框架（即后端的[Node.js ）进行调查。](http://nodejs.org/)

当我的任务是使用 php 后端和 Javascript 前端（使用定期 ajax 轮询）加速现有的聊天应用程序时，我最终使用了第 3 方服务器端产品来处理轻量级[XMPP](http://xmpp.org/)请求。这个服务器端产品是[OpenFire](http://www.igniterealtime.org/projects/openfire/)，但您可以使用[eJabberd](http://www.ejabberd.im/)以获得更好的性能 - 虽然 OpenFire 更易于设置和维护。结果非常令人满意，服务器负载显着下降，消息立即传递给大约 1000 名在线聊天的用户（在性能低于平均水平的专用 linux 机器上）。

很难解释 SO 答案范围内的所有微小细节，但幸运的是 Ben Werdmuller @IBM 特意写了一篇关于这个主题的[精彩教程。](http://www.ibm.com/developerworks/xml/tutorials/x-realtimeXMPPtut/)

# firefox - 为了向现有的 Firefox 客户端添加新功能，我是否需要创建扩展程序或插件？

> ID：11763985
> 
> 赞同：1
> 
> 时间：2012-08-01T16:55:22.237
> 
> 标签：firefox, firefox-addon, npapi

More specifically, the idea is to allow the user to open Firefox, highlight a word on a web page, right click on it, and have an additional option that, when selected, calls c++ code that does something with the input string (must call不幸的是，C++ 代码），并显示一个显示结果的对话框。

我仍然不确定是否为了实现这个功能我需要创建一个 Firefox 插件或扩展。有人可以指出我正确的方向吗？

此外，如果有人可以向我展示示例代码以帮助我入门，我将不胜感激。（XPCOM，我什至不确定我应该使用什么，对于这个看似简单的项目来说似乎有点复杂。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:10:25.817

你需要一个常规的 Firefox 扩展。它可以[在上下文菜单中添加一个项目](https://developer.mozilla.org/en/XUL/PopupGuide/Extensions#Modifying_the_context_menu)，NPAPI 插件不能这样做。单击它时，它可以[获取选定的文本](https://developer.mozilla.org/en/DOM/window.getSelection)并将其发送到您的二进制库。在这个库中调用函数的最佳方式是[js-ctypes](https://developer.mozilla.org/en/js-ctypes)，不需要 XPCOM。

# jquery - 从jquery中的href链接获取值

> ID：11763991
> 
> 赞同：0
> 
> 时间：2012-08-01T16:55:34.990
> 
> 标签：jquery, href

我正在尝试从位置 href 链接中获取价值，并且能够通过 jquery 获取位置 href 链接，我使用了

```
 var loc =$(location).attr('href'); 
```

使用这个我得到了价值

```
 localhost/example.com/buy.php?ev=product_search&type=sb&search=sony&cat=3 
```

现在很热门从这个链接获取类型、搜索和猫的价值？

例如

```
 type=sb
      search=sony
      cat=3 
```

我的完整代码

```
 $("input:radio[name=type_radio]").click(function() {
 var loc =$(location).attr('href');

var value = $(this).val();
var type="condition";
alert(loc);
var dataString="value="+ value + "&type=" + type;
   $('.srchcntntagn').css('display','block');
     $('.by-product-list').addClass('opfxsc');
  $.ajax({
  type: "POST",
  url: "modules/buy&sell/load_search.php",
  data: dataString,
  cache: false,

  success: function(html){
  $('.by-product-list').removeClass('opfxsc');
  $('.by-product-list').html(html).fadeIn('slow');
  $('.srchcntntagn').css('display','none');
 }
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:03:38.137

我通常使用这里找到的这个“gup”功能：http: [//www.netlobo.com/url_query_string_javascript.html](http://www.netlobo.com/url_query_string_javascript.html)

您只需将函数添加到脚本中，然后执行以下操作：

```
var type = gup( 'type' ); 
```

这也消除了使用 .attr('href') 调用获取 URL 的需要。

函数本身是：

```
function gup( name )
{
 name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
 var regexS = "[\\?&]"+name+"=([^&#]*)";
 var regex = new RegExp( regexS );
 var results = regex.exec( window.location.href );
 if( results == null )
  return "";
else
 return results[1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:00:56.763

快速简单 -

1.  首先用问号拆分整个 url，以将查询与 URL 分开
2.  然后使用 . 对查询字符串进行另一个拆分`&`。
3.  每个元素上的进一步拆分将从值中分离出键。

```
var url="localhost/example.com/buy.php?ev=product_search&type=sb&search=sony&cat=3";
var queryString = url.split('?')[1];
var variables = queryString.split('&');
var varObj = {};
$.each(variable,function(index,elem){
  var valueKeyPair = elem.split('=');
  varObj[valueKeyPair[0]] = valueKeyPair[1];
}); 
```

`varObj`现在包含您需要的所有信息。

```
Object
  cat: "3"
  ev: "product_search"
  search: "sony"
  type: "sb" 
```

例如，要访问该`cat`值，您所要做的就是使用`varObj['cat']`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T16:59:02.297

`location.search`将为您提供 url 的查询字符串（包括？）。

你可以剥离 ? 并将字符串拆分为数组`&`

```
var queries = location.search.substr(1).split('&'); 
```

如果您使用的字符串*不是*当前 URL，请尝试：

```
var queries = some_url_string.split('?')[1].split('&'); 
```

要么会给你一个像这样的数组：

```
['type=sb','search=sony','cat=3'] 
```

然后，您可以再次拆分每个元素`=`以获取键/值对：

```
for(i=0;i<queries.length;i++) {
  queries[i] = queries[i].split('=');
} 
```

这会给你：

```
[['type','sb'],['search','sony'],['cat','3']] 
```

或者，创建一个查询对象：

```
var queryObj = {};
for(i=0;i<queries.length;i++) {
  var q = queries[i].split('=');
  queryObj[q[0]] = q[1];
} 
```

这会给你一个像这样的对象：

```
{
  type: 'sb',
  search: 'sony',
  cat: '3'
} 
```

但是，如果你真的需要单个变量，你可以这样做：

```
for(i=0;i<queries.length;i++) {
  var q = queries[i].split('=');
  window[q[0]] = q[1];
} 
```

这将在全局范围内创建变量`type`、`search`和。**但是**，我不建议这样做，因为您可能会根据正在解析的查询字符串覆盖现有变量。`cat`

# php - PHP：在 SOAP 响应中读取 XML 属性

> ID：11763993
> 
> 赞同：3
> 
> 时间：2012-08-01T16:55:40.663
> 
> 标签：php, soap, soap-client

我正在尝试使用具有稍微复杂的 WSDL 结构的 PHP5 内置 Soap 客户端，如下所示：http: [//cmis.alfresco.com/cmis/NavigationService ?wsdl](http://cmis.alfresco.com/cmis/NavigationService?wsdl)

我定义了所有类型类和类型映射，并且可以在 __doRequest 函数中看到有效的 SOAP XML 请求和响应。但是，在 __doRequest 返回并且 PHP 将数据转换为对象和数组之后，我丢失了所有作为 XML 属性而不是作为元素返回的信息。

这是发送到服务器的 SOAP 请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" 
xmlns:ns1="http://docs.oasis-open.org/ns/cmis/messaging/200908/" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:ns2="http://docs.oasis-open.org/ns/cmis/ws/200908/" 
xmlns:ns3="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">

<env:Header>
<ns3:Security env:mustUnderstand="true">
<Timestamp xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<Created>2012-08-02T17:16:11Z</Created>
<Expires>2012-08-02T18:16:11Z</Expires>
</Timestamp>
<ns3:UsernameToken><ns3:Username>***</ns3:Username>
<ns3:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">***</ns3:Password></ns3:UsernameToken>
</ns3:Security>
</env:Header>

<env:Body>
<ns1:getChildren xsi:type="ns2:getChildren">
<ns1:repositoryId>a8b08c6a-96e0-4783-a062-bc0ae106a2f2</ns1:repositoryId>
<ns1:folderId>workspace://SpacesStore/b461d5ac-5df9-48ec-84ed-03257c411227</ns1:folderId>
<ns1:filter>*</ns1:filter><ns1:orderBy/><ns1:includeAllowableActions/><ns1:includeRelationships/>
<ns1:renditionFilter/><ns1:includePathSegment/><ns1:maxItems/><ns1:skipCount/><ns1:extension/>
</ns1:getChildren>
</env:Body></env:Envelope> 
```

这是返回的 SOAP 响应，简称为重复条目：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Header>
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-1464665770">
<wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">2012-08-01T15:16:19.407Z</wsu:Created>
<wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">2012-08-01T15:21:19.407Z</wsu:Expires>
</wsu:Timestamp>
</wsse:Security>
</soap:Header>

<soap:Body>
  <getChildrenResponse xmlns="http://docs.oasis-open.org/ns/cmis/messaging/200908/" 
  xmlns:ns2="http://docs.oasis-open.org/ns/cmis/core/200908/" 
  xmlns:ns3="http://www.alfresco.org">
  <objects>
    <objects>
      <object>
        <ns2:properties>
          <ns2:propertyId propertyDefinitionId="cmis:objectTypeId">
            <ns2:value>cmis:folder</ns2:value>
          </ns2:propertyId>
          <ns2:propertyString propertyDefinitionId="cmis:path">
            <ns2:value>/Data Dictionary</ns2:value>
          </ns2:propertyString>
          <ns2:propertyString propertyDefinitionId="cmis:name">
            <ns2:value>Data Dictionary</ns2:value>
          </ns2:propertyString>
          <ns2:propertyDateTime propertyDefinitionId="cmis:creationDate">
            <ns2:value>2012-06-24T11:08:45.282+02:00</ns2:value>
          </ns2:propertyDateTime>
          <ns2:propertyString propertyDefinitionId="cmis:lastModifiedBy">
            <ns2:value>System</ns2:value>
          </ns2:propertyString>
          <ns2:propertyString propertyDefinitionId="cmis:createdBy">
            <ns2:value>System</ns2:value>
          </ns2:propertyString>
          <ns2:propertyId propertyDefinitionId="cmis:objectId">
            <ns2:value>workspace://SpacesStore/14f3706f-a999-4e56-a19a-49c34db0fbe8</ns2:value>
          </ns2:propertyId>
          <ns2:propertyId propertyDefinitionId="cmis:baseTypeId">
            <ns2:value>cmis:folder</ns2:value>
          </ns2:propertyId>
          <ns2:propertyDateTime propertyDefinitionId="cmis:lastModificationDate">
            <ns2:value>2012-06-24T11:08:53.940+02:00</ns2:value>
          </ns2:propertyDateTime>
          <ns2:propertyId propertyDefinitionId="cmis:parentId">
            <ns2:value>workspace://SpacesStore/b461d5ac-5df9-48ec-84ed-03257c411227</ns2:value>
          </ns2:propertyId>
          <ns3:aspects>
            <ns3:appliedAspects>P:sys:localized</ns3:appliedAspects>
            <ns3:appliedAspects>P:cm:titled</ns3:appliedAspects>
            <ns3:appliedAspects>P:app:uifacets</ns3:appliedAspects>
            <ns3:properties>
              <ns2:propertyString propertyDefinitionId="cm:title">
                <ns2:value>Data Dictionary</ns2:value>
              </ns2:propertyString>
              <ns2:propertyString propertyDefinitionId="cm:description">
                <ns2:value>User managed definitions</ns2:value>
              </ns2:propertyString>
              <ns2:propertyString propertyDefinitionId="app:icon">
                <ns2:value>space-icon-default</ns2:value>
              </ns2:propertyString>
            </ns3:properties>
          </ns3:aspects>
        </ns2:properties>
      </object>
    </objects>

    ...

    <hasMoreItems>false</hasMoreItems>
    <numItems>5</numItems>
  </objects>
  </getChildrenResponse>
</soap:Body>

</soap:Envelope> 
```

结果对象的 var_dump 提供以下输出。propertyDefinitionId 的所有属性数据完全丢失：

```
array(5) {
  [0]=>
  object(cmisObjectInFolderType)#137 (3) {
    ["object"]=>
    object(cmisObjectType)#136 (9) {
      ["properties"]=>
      array(8) {
        [0]=>
        object(cmisPropertyString)#132 (5) {
          ["value"]=>
          array(1) {
            [0]=>
            string(16) "/Data Dictionary"
          }
          ["propertyDefinitionId"]=>
          object(stdClass)#133 (0) {
          }
          ["localName"]=>
          NULL
          ["displayName"]=>
          NULL
          ["queryName"]=>
          NULL
        }
        [1]=>
        object(cmisPropertyString)#140 (5) {
          ["value"]=>
          array(1) {
            [0]=>
            string(15) "Data Dictionary"
          }
          ["propertyDefinitionId"]=>
          object(stdClass)#133 (0) {
          }
          ["localName"]=>
          NULL
          ["displayName"]=>
          NULL
          ["queryName"]=>
          NULL
        }
        [2]=>
        object(cmisPropertyString)#141 (5) {
          ["value"]=>
          array(1) {
            [0]=>
            string(6) "System"
          }
          ["propertyDefinitionId"]=>
          object(stdClass)#133 (0) {
          }
          ["localName"]=>
          NULL
          ["displayName"]=>
          NULL
          ["queryName"]=>
          NULL
        }
        [3]=>
        object(cmisPropertyString)#142 (5) {
          ["value"]=>
          array(1) {
            [0]=>
            string(6) "System"
          }
          ["propertyDefinitionId"]=>
          object(stdClass)#133 (0) {
          }
          ["localName"]=>
          NULL
          ["displayName"]=>
          NULL
          ["queryName"]=>
          NULL
        }
        [4]=>
        object(cmisPropertyId)#143 (5) {
          ["value"]=>
          array(1) {
            [0]=>
            string(11) "cmis:folder"
          }
          ["propertyDefinitionId"]=>
          object(stdClass)#133 (0) {
          }
          ["localName"]=>
          NULL
          ["displayName"]=>
          NULL
          ["queryName"]=>
          NULL
        }
        [5]=>
        object(cmisPropertyId)#144 (5) {
          ["value"]=>
          array(1) {
            [0]=>
            string(60) "workspace://SpacesStore/14f3706f-a999-4e56-a19a-49c34db0fbe8"
          }
          ["propertyDefinitionId"]=>
          object(stdClass)#133 (0) {
          }
          ["localName"]=>
          NULL
          ["displayName"]=>
          NULL
          ["queryName"]=>
          NULL
        }
        [6]=>
        object(cmisPropertyId)#145 (5) {
          ["value"]=>
          array(1) {
            [0]=>
            string(11) "cmis:folder"
          }
          ["propertyDefinitionId"]=>
          object(stdClass)#133 (0) {
          }
          ["localName"]=>
          NULL
          ["displayName"]=>
          NULL
          ["queryName"]=>
          NULL
        }
        [7]=>
        object(cmisPropertyId)#146 (5) {
          ["value"]=>
          array(1) {
            [0]=>
            string(60) "workspace://SpacesStore/b461d5ac-5df9-48ec-84ed-03257c411227"
          }
          ["propertyDefinitionId"]=>
          object(stdClass)#133 (0) {
          }
          ["localName"]=>
          NULL
          ["displayName"]=>
          NULL
          ["queryName"]=>
          NULL
        }
      }
      ["allowableActions"]=>
      NULL
      ["relationship"]=>
      NULL
      ["changeEventInfo"]=>
      NULL
      ["acl"]=>
      NULL
      ["exactACL"]=>
      NULL
      ["policyIds"]=>
      NULL
      ["rendition"]=>
      NULL
      ["any"]=>
      NULL
    }
    ["pathSegment"]=>
    NULL
    ["any"]=>
    NULL
  }
... 
```

显然，我无法更改 WSDL 文件。我读过一些评论说 PHP SOAP 不支持 SOAP 消息中的属性数据。如果这是真的，那么 PHP SOAP 对这个应用程序几乎没有用处。

有谁知道如何使用内置 SOAP 扩展解析响应？还是我需要寻求完全绕过 PHP SOAP 功能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:58:26.940

我终于能够自己追踪到这一点。

问题是 WSDL 文件中属性的类型定义：

```
<xs:attribute name="propertyDefinitionId" type="xs:anySimpleType" /> 
```

PHP WSDL 解析器不喜欢**xs:anySimpleType**类型。**用xs:string**替换它会使整个问题消失。也许这是PHP中的一个错误。

# awk - awk：连接字符串与dict值中的数字

> ID：11763994
> 
> 赞同：1
> 
> 时间：2012-08-01T16:55:47.420
> 
> 标签：awk

我有下一个 awk oneliner ：

```
{dict[$2"@"$6]=($(NF-2)/($(NF-2)+$NF))*100 } END {for (a in dict) {  printf "%s %d :" ,  a, int(dict[a]) }} 
```

我需要的是添加到每个字典键组合的值

```
($(NF-2)/($(NF-2)+$NF))*100 " out of"  $(NF-2)+$NF 
```

所以我希望 awk 计算所有数学，然后编写字符串并将其作为字典值。我已经尝试过一些空格和括号的组合，但仍然没有运气。

变量从输入流中填充：

```
$2 - host , not unique in input stream
$3 - partition , not unique in input stream
$NF - space avail 
$NF-2 - space used
$(NF-2)+$NF - gives you overall capacity of partiton 
```

输出是

```
80% host1@/local/1 
```

预期输出：

```
80% host1@/local/1   out of 112G 
```

- - - - - - - - - - - 解决方案 - - - - - - - - - - - - - - --------

有了下面的好消息，我解决了这个问题。问题是我在 printf 部分做了 int() ，截断了输出。尽管如此，我的环绕式外壳部分还面临其他问题，因此我的最终代码与我预期的问题不同。

```
'{key=($2 "@" $6 " out of " int((($(NF-2)+$NF)/1000)/1000) "GB" ) ; dict[key]=($(NF-2)/($(NF-2)+$NF))*100 } END {for (a in dict) {  printf "%s ,  %d :" ,  a, int(dict[a]) }}' 
```

我已经将“out of”和容量部分移到了字典键中，因为在我的情况下字典值不能是字符串，进一步我会将它与 INT 进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:38:25.367

串联工作正常。这不是问题。

问题是您`int()`在打印时正在计算字典值。由于该值是一个字符串，因此结果被截断。如果您需要`int()`在执行计算时而不是在打印时使用它。

顺便说一句，如果您提供了一些示例数据，那么测试您的代码并提供答案会容易得多。这一点尤其重要，因为有时，就像这里一样，问题出在预期之外的地方。

# intellij-idea - IntelliJ IDEA 的输出窗口截断输出

> ID：11763996
> 
> 赞同：191
> 
> 时间：2012-08-01T16:55:49.513
> 
> 标签：intellij-idea, console-output

看起来它显示的行数有限制。

我在设置里找不到。

***有没有办法让 IDEA 将所有内容都保留在“输出”窗口中？***

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2015-11-19T09:43:15.387

`Preferences/Settings -> Editor -> General -> Console`，选中 旁边的框`Override console cycle buffer size`，设置为大于 1024 KB 的数字。

[![设置窗口截图](../Images/156be902fa90e61e41a6fa9a47732300.png)](https://i.stack.imgur.com/eGWqf.png)

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2012-10-26T23:45:55.757

无法获得更多选票来结束这个问题，所以我必须自己回答。

IDEA_HOME\bin\idea.properties

```
#-----------------------------------------------------------------------
# This option controls console cyclic buffer: keeps the console output size not higher than the specified buffer size (Kb). Older lines are deleted.
# In order to disable cycle buffer use idea.cycle.buffer.size=disabled
idea.cycle.buffer.size=1024 
```

# android - 无法使用android正确登录和注销facebook

> ID：11763998
> 
> 赞同：1
> 
> 时间：2012-08-01T16:56:00.123
> 
> 标签：android, facebook

我正在创建一个简单的应用程序来获取和发布任何 Facebook 帐户上的一些信息！

我无法通过登录和退出。我查看了 facebook 教程网站，但无济于事！我已经讨论这个问题好几天了。

这是我写的代码。我需要知道我在哪里搞砸了。代码构建没有错误，但当我单击“登录”按钮时崩溃。

我还在代码之后复制了 LogCat。

```
package com.thenewboston.travis;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.MalformedURLException;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

import com.facebook.android.*;
import com.facebook.android.AsyncFacebookRunner.RequestListener;
import com.facebook.android.Facebook.*;

public class FbExample extends Activity implements OnClickListener {

Facebook facebook = new Facebook("xxxxxxx");
AsyncFacebookRunner mAsyncRunner;
Button login;
TextView logoutResult;
private SharedPreferences mPrefs;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fbexample);
    login = (Button) findViewById(R.id.bLogin);
    logoutResult = (TextView) findViewById(R.id.tvLogoutResult);
    login.setOnClickListener(this);
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);
    if (access_token != null) {
        facebook.setAccessToken(access_token);
    }
    if (expires != 0) {
        facebook.setAccessExpires(expires);
    }

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    if (v.getId() == R.id.bLogin) {
        if (!facebook.isSessionValid()) {
            facebook.authorize(this, new String[] {}, new DialogListener() {
                public void onComplete(Bundle values) {
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token",
                            facebook.getAccessToken());
                    editor.putLong("access_expires",
                            facebook.getAccessExpires());
                    editor.commit();
                    login.setText("Logout");

                }

                public void onFacebookError(FacebookError error) {
                }

                public void onError(DialogError e) {
                }

                public void onCancel() {
                }
            });
        }
        if (facebook.isSessionValid()) {
            mAsyncRunner.logout(this,
                    new RequestListener() {

                        public void onComplete(String response, Object state) {
                            login.setText("Login");
                        }

                        public void onIOException(IOException e,
                                Object state) {
                            String error = e.getMessage();
                            logoutResult.setText(error);

                        }

                        public void onFileNotFoundException(
                                FileNotFoundException e, Object state) {
                            String error = e.getMessage();
                            logoutResult.setText(error);
                        }

                        public void onMalformedURLException(
                                MalformedURLException e, Object state) {
                            String error = e.getMessage();
                            logoutResult.setText(error);
                        }

                        public void onFacebookError(FacebookError e,
                                Object state) {
                            String error = e.getMessage();
                            logoutResult.setText(error);
                        }
                    });

        }
    }

}
} 
```

日志猫

```
08-02 02:20:26.859: W/dalvikvm(302): threadid=1: thread exiting with uncaught
exception (group=0x4001d800)
08-02 02:20:26.878: E/AndroidRuntime(302): FATAL EXCEPTION: main
08-02 02:20:26.878: E/AndroidRuntime(302): java.lang.NullPointerException
08-02 02:20:26.878: E/AndroidRuntime(302):  at     com.thenewboston.travis.FbExample.onClick(FbExample.java:81)
08-02 02:20:26.878: E/AndroidRuntime(302):  at android.view.View.performClick(View.java:2408)
08-02 02:20:26.878: E/AndroidRuntime(302):  at android.view.View$PerformClick.run(View.java:8816)
08-02 02:20:26.878: E/AndroidRuntime(302):  at android.os.Handler.handleCallback(Handler.java:587)
08-02 02:20:26.878: E/AndroidRuntime(302):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-02 02:20:26.878: E/AndroidRuntime(302):  at android.os.Looper.loop(Looper.java:123)
08-02 02:20:26.878: E/AndroidRuntime(302):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-02 02:20:26.878: E/AndroidRuntime(302):  at java.lang.reflect.Method.invokeNative(Native Method)
08-02 02:20:26.878: E/AndroidRuntime(302):  at java.lang.reflect.Method.invoke(Method.java:521)
08-02 02:20:26.878: E/AndroidRuntime(302):  at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-02 02:20:26.878: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-02 02:20:26.878: E/AndroidRuntime(302):  at dalvik.system.NativeStart.main(Native Method)
08-02 02:20:29.368: I/Process(302): Sending signal. PID: 302 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:30:48.363

您没有在调用 mAsyncRunner.logout() 之前实例化 mAsyncRunner

您可以更改以下行：

```
 AsyncFacebookRunner mAsyncRunner; 
```

至

```
 AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook); 
```

请让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:52:22.813

在第 81 行有一个空指针异常。放置一个断点，看看它为什么为空。