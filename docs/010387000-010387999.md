# StackOverflow 问答 10387000-10387999

# c# - 数据库和域层之间的同步

> ID：10387001
> 
> 赞同：0
> 
> 时间：2012-04-30T16:20:42.790
> 
> 标签：c#, domain-driven-design

我有一个关于领域驱动设计的一般性问题。我的代码中有一个地方，我的数据库表架构与它的域对象不同。

让我给场景

```
Database table - 
EmployeeDepartment table has columns
1\. DepartmentKey - (Integer Type)
2\. DepartmentName - (Varchar)
3\. FacilityName - (Varchar)

The C# domain class for it has the following 
1\. Key (Integer)
2\. DepartmentName (String)
3\. FacilityName (Sting)
4\. Employees (IList<Employees>) 
```

在这种情况下，同一实体的数据库设计和域设计之间存在差距。在数据库中 - 我使用桥接表来访问组中的员工列表。但在 C# 代码中，我使用 IList 来访问员工列表。

我想知道

1.  如果这是一个好的设计。领域驱动开发领域的专家是否有办法绕过这一差距？

2.  我可以通过继续这样的设计来预见问题。执行映射测试会有所帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:22:40.213

> 我的代码中有一个地方，我的数据库表架构与它的域对象不同。

欢迎来到对象关系[阻抗失配](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch):)

这是一个可以使用对象/关系映射框架解决的经典问题。

领域驱动设计是一种领域优先的方法，出现这种不匹配是完全正常的。只需按照您认为合适的方式设计您的聚合和实体，而无需首先担心数据库。然后创建关系模型。很可能它不会是表和实体之间的一对一匹配，这就是需要 ORM 的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:26:04.440

我认为你的设计没有任何问题。如果您选择两种不同类型的对象，我建议使用 Automapper 来映射这两个对象。有关该选项的更多信息，请查看以下链接：

[http://www.codeproject.com/Articles/61629/AutoMapper](http://www.codeproject.com/Articles/61629/AutoMapper)

并且：您应该始终使用单元测试来验证代码的功能！更好的是应用测试驱动开发，因为你必须编写代码才能实现你的逻辑。但这是我的意见！

问候

# php - PHP loadHTMLFile(table.html) 错误

> ID：10387002
> 
> 赞同：1
> 
> 时间：2012-04-30T16:20:43.617
> 
> 标签：php, domdocument

这是我从旧表加载数据的脚本，也就是说它是一种“不可编辑”的方式。

```
$document = new DOMDocument();
$document -> loadHTMLFile('http://www.table.html');
$rows   = $document -> getElementsByTagName('tr'); 
```

之后，我将`<td>`'s 加载到数组中：

```
 $numRow = 0;
    foreach($rows as $result){

// 15 columns to load.
        for($i = 0; $i < 15; $i++){
        $array[$numRow][$i] = $result
        ->getElementsByTagName('td')
        ->item($i)
        ->nodeValue;
        }
    $numRow++;
    } 
```

到目前为止一切顺利，但问题开始了。所有行都有一个用于“描述”的字符串列，并且在描述中经常出现人为错误输入错误，例如：

这是一个单元格：（`<td>Suppor<</td>`有人在此错误地提示 IDK 如何）错误：`Tag o invalid`

或者当单元格包含像这样的“&”时：

另一个例子：`<td>From A&A Limited.</td>`错误： `htmlParseEntityRef: expecting ';'`

错误总是参考这一行`$document -> loadHTMLFile('http://www.table.html');`

如您所见，该表已`15 columns`成为`$i = 4`字符串列。我不是一个真正的专业程序员，也没有真正看到这一点。预先感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:27:21.693

我认为您不会找到任何神奇的方法来修复损坏的 HTML，但是您可以稍微更改 libxml（为 DOMDocument 提供支持）处理错误的方式，以便为您提供尽可能多的可用输出。您是否尝试过将错误处理更改为内部？查看[libxml_use_internal_errors()](http://www.php.net/manual/en/function.libxml-use-internal-errors.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:49:27.567

我找到了这样做的解决方案：

```
@$document -> loadHTMLFile('http://www.table.html');
$rows   = $document -> getElementsByTagName('tr');

$nodeListLength = htmlentities($rows->length);
for ($i = 0; $i < $nodeListLength; $i ++)
{
    $node = $gastos->item(0);
    //-> VALORES A MOSTRAR EN TU QUERY
} 
```

我希望它可以帮助另一个有同样问题的人。感谢检查我的问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-14T15:59:56.110

尝试使用`libxml_use_internal_errors(true);`之前`$document->loadHTMLFile(...);`

# c# - 如何初始化反射数据的线程安全静态缓存

> ID：10387010
> 
> 赞同：3
> 
> 时间：2012-04-30T16:21:10.827
> 
> 标签：c#, multithreading, caching, reflection, static

我已经思考了几个小时，我对它的挑战性感到有点惊讶。我正在尝试从将要从多个线程访问的基类中为给定对象初始化反射数据的静态缓存。我很难想出初始化缓存的正确模式。

我的第一个想法是，我只需将静态缓存初始化为 null，在构造函数中检查它是否为 null，如果不是，则构建并设置它。IE：

```
class TestBase
{
  private static ConcurrentDictionary<string, PropertyInfo> Cache;

  protected TestBase()
  {
    if(Cache == null)
    {
      ConcurrentDictionary<string, PropertyInfo> cache =
        new ConcurrentDictionary<string, PropertyInfo>();
      // Populate...
      Cache = cache;
    }
  }
} 
```

这有一个缺陷，如果我在第一个对象仍在填充缓存时构造另一个对象，我最终将构建两个缓存，而第二个将（可能，但不总是）覆盖第一个。这可能没问题，因为它们都是完整的缓存，但它看起来很老套，我希望我们能做得更好。

所以我的第二个想法是在静态构造函数中初始化缓存，在创建任何实例之前每个 AppDomain 只调用一次。StackOverflow 似乎对指向这个方向的类似问题有几个答案。这似乎很棒，直到我意识到静态构造函数无法访问派生类型的反射数据。

我总是可以在构造函数中同步访问，以确保只有一个线程正在创建/填充缓存，并且在发生这种情况时任何其他访问都应该阻塞，但是我锁定每个构造只是为了保护应该只发生一次的操作。我不喜欢这样做的性能影响。

我现在拥有的是使用 Interlocked.Exchange 和 ManualResetEventSlim 设置的标志。它看起来像这样：

```
class TestBase
{
  private static ConcurrentDictionary<string, PropertyInfo> Cache;
  private static volatile int BuildingCache = 0;
  private static ManualResetEventSlim CacheBuilt =
    new ManualResetEventSlim();

  protected TestBase()
  {
    if(Interlocked.Exchange(ref BuildingCache, 1) == 0)
    {
      Cache = new ConcurrentDictionary<string, PropertyInfo>();
      // Populate...
      CacheBuilt.Set();
    }
    CacheBuilt.Wait();
  }
} 
```

我怀疑可能已经有一种被接受的，或者至少是已知的做这种事情的方式——是这样吗？如果没有，是否有更好的方法来同步缓存初始化？请注意，问题不在于如何使缓存访问线程安全，这可以通过使用 ConcurrentDictionary （或类似的）来假设。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:01:47.933

您可以使用[`Lazy<T>`](http://msdn.microsoft.com/en-us/library/dd642331.aspx)该类以线程安全的方式懒惰地初始化某些东西，而无需编写自己的管道。

如果您想急切地缓存反射数据，则需要使用`Assembly.GetTypes()`扫描兼容类型（例如，用特定属性修饰的类型）。例如：

```
var types = typeof(TestBase).Assembly.GetTypes().Where(type => --some condition--); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:58:29.853

您应该在构造函数 ( `private static ConcurrentDictionary<string, PropertyInfo> Cache = new ConcurrentDictionary<string, PropertyInfo>();`) 之外创建字典并检查 Count 以确定是否需要构建缓存。然后，如果您`TryAdd`在构建缓存时使用执行添加操作，则根本不需要执行任何自己的线程锁定。

您可以处理您在评论中提出的问题，只需使用另一个属性 IsCahceValid 来指示缓存已完成。由于您将使用 TryAdd ，因此您甚至不需要锁定变量，因为在初始完成的任何时候将其设置为 true 都可以正常工作。

# vb.net - System.Windows.Forms.dll 中发生“System.ExecutionEngineException”

> ID：10387013
> 
> 赞同：0
> 
> 时间：2012-04-30T16:21:27.047
> 
> 标签：vb.net

我正在使用 AxMSChart20L​​ib.AxMSChart 在 VB.net 中动态创建图表。我需要将此图表保存为硬盘上的 bmp，所以我所做的是调用 EditCopy() 函数，以便它使用图表更新剪贴板，我可以稍后保存。

如果我尝试访问它，即使用 My.Computer.Clipboard.ContainsImage

我得到 System.Windows.Forms.dll 中出现“System.ExecutionEngineException”类型的未处理异常，请指导。

问候， 萨克兰

# domain-driven-design - 放置复杂的多领域相关逻辑：在服务层还是模型本身？

> ID：10387014
> 
> 赞同：0
> 
> 时间：2012-04-30T16:21:28.020
> 
> 标签：domain-driven-design, business-logic, service-layer, domain-model

我想在我的项目中应用领域驱动设计原则，但无法确定我应该如何处理依赖模型的业务逻辑。

例如，假设这种情况：
我有`Person`和`Car`域模型。每个人都适合根据年龄/预算/偏好/等从 db 购买某些汽车。在我的模型中，我想要一个`SuitableCars`适合此人的汽车列表 ( )。

```
public class Person
{
    public List<Car> SuitableCars {get; set;}
} 
```

但现在为了做到这一点，我必须调用一个服务方法 ( `GetSuitableCarsForPerson`) 从 db（带有存储库的 DI）中获取数据，运行我的（有时相当复杂的多模型相关）自定义逻辑并获取汽车。

```
public class PersonService : IPersonService
{
    private IRepository _repo;

    public PersonService(IPRepository repository)
    {
        _repo = repository;
    }

    public List<Car> GetSuitableCarsForPerson(Person person)
    {
        // business goes here right now.
    }

} 
```

所以`SuitableCars`财产的声明会变成：

```
private IPersonService _personService;
public List<Car> SuitableCars 
{
    get
    {
        // I have to inject a PersonService in my model. Bad practice?
        return _personService.GetSuitableCarsForPerson(this);
    }
} 
```

AFAIK，服务应该保持精简（[参考](http://martinfowler.com/bliki/AnemicDomainModel.html)）并用于让您将与非域模型相关的业务放入其中。但我相信我所描述的逻辑属于模型本身。

那么，如何处理这些我应该访问相关模型并进行各种自定义验证/过滤器以获取适当数据的逻辑？
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:09:12.890

希望这个答案[https://stackoverflow.com/a/1209765/145595](https://stackoverflow.com/a/1209765/145595)将提供一些指导如何继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:05:42.800

It seems like the definition of the set of suitable cars for a person depends on factors outside of the person model and can vary independent of the person. The set of suitable cars depends not only on the person's preferences but also on the set of all cars. The set of cars varies independently of the person and so the set of suitable cars for a given person is a cache of an operation that determines the set of suitable cars. These observations indicate that a repository or domain service should return sets of suitable cars for a person and the association between a person and the set of suitable cars should not be expressed on the person model directly. What could be an appropriate association to express directly on the person model is the set of cars that person specified as preferred models because in this case the person is the "owner" of this data. In DDD, it is acceptable to express associations directly in models or through the use of repositories and selecting a specific approach depends on several factors, some of which are outlined above. Take a look at [this series of articles](http://dddcommunity.org/library/vernon_2011) for an in-depth treatment of how to design your models.

# css - 显示被用户代理样式表覆盖的属性

> ID：10387019
> 
> 赞同：2
> 
> 时间：2012-04-30T16:21:55.507
> 
> 标签：css

很明显，我不是 CSS 专家。我有一堂课

```
.hidden{
 display:hidden
} 
```

和一个 div

```
<div class="hidden">
</div> 
```

但是页面渲染时div并没有隐藏。当我查看 Chrome 中的 Computed 样式时，它说 display 属性已被用户代理样式表覆盖。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T16:23:16.997

CSS：

```
.hidden {    
    display: none
} 
```

是正确的语法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T16:30:19.293

如果您希望元素不可见并且不占用任何空间，您应该这样做：

```
.hidden { display: none; } 
```

但是，如果你想隐藏元素，但让它占据空间，你应该这样做：

```
.hidden { visibility: hidden; } 
```

有关示例，请参见这个[简单的演示](http://jsfiddle.net/PeeHaa/gydZV/)。

您认为样式被用户代理覆盖的事实是用户代理无法识别您尝试使用的样式（因为它无效）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:24:03.347

`display:none`改为使用

或者使用`visibility: hidden`或`opacity: 0`但请不要浏览器支持是粗略的

# javascript - 了解 JavaScript 变量

> ID：10387020
> 
> 赞同：3
> 
> 时间：2012-04-30T16:21:55.987
> 
> 标签：javascript, jquery

我试图更好地了解如何使用 JavaScript 和 jQuery 存储变量。

使用下面的代码，为每个 .default-value 元素创建一个名为 default_value 的单独变量。这个对吗？只能从创建它的匿名函数中访问它吗？我听说过“命名空间”这个词，它适用吗？请提供任何其他详细信息，以便我更好地了解发生了什么。

接下来，如果我想将其应用于具有给定 ID 的元素而不是给定类的组，那么使用 each() 似乎是不必要的。应该如何修改？

```
$('.default-value').each(function() {
    var default_value = this.value;
    $(this).focus(function() {
        if(this.value == default_value) {
            this.value = '';
        }
    });
    $(this).blur(function() {
        if($.trim(this.value) == '') {
            this.value = default_value;
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T16:25:21.170

> 使用下面的代码，为每个 .default-value 元素创建一个名为 default_value 的单独变量。这个对吗？

是的。每个函数都被调用，并且变量的范围（通过`var`）到函数。

> 只能从创建它的匿名函数中访问它吗？

是（请注意，该函数创建了更多匿名函数，并且它们在传递给的函数内，`each`因此它们也可以访问它）。

> 我听说过“命名空间”这个词，它适用吗？

不

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T16:26:15.613

您在谈论的是[范围界定](https://stackoverflow.com/questions/500431/javascript-variable-scope)。

基本上，当您在函数中并使用`var`关键字（您应该这样做）时，该变量仅在当前范围内可用（在您的情况下为匿名函数）。

如果您跳过`var`关键字，则该变量将在`global`范围内可用。

当您想在 DOM 中获取具有 id（始终唯一）的元素时，您可以简单地执行以下操作：

```
$('#theid').focus(function() { }); 
```

您可以做的另一件事是使用[`hover`](http://api.jquery.com/hover/)处理 the`.focus()`和 的Jquery `.blur()`：

```
$('#theid').hover(function() {
  // focus in your code
}, function() {
  // blur in your code
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T16:29:41.153

如果您在 javascript 中使用 var 作为变量的前缀，它将包含在它被调用的范围内，因此在您的情况下，在您创建的每个循环之外都无法访问 var defaulf_value。

如果没有 var 声明，它将在页面上是全局的。

您可以在 JavaScript 中使用 JSON 样式对象命名变量。

当我写 javascript 时，我会倾向于定义一个这样的命名空间：

```
mynamespace = {}; 
```

然后，当您想在该命名空间中创建变量时，您可以调用：

```
mynamespace.variableA = "Hello there"; 
```

如果您不想覆盖页面上已经存在的变量，这是一种方便的机制。例如：

```
variableA = "First hello there";
mynamespace.variableA = "Second hello there";

console.log(variableA);
console.log(mynamespace.variableA); 
```

将打印出：

```
"First hello there"
"Second hello there"; 
```

即使您使用了相同的变量名称，扩展第二个变量也不会覆盖第一个变量，因为它位于不同的命名空间 =)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T16:39:36.227

> 为每个 .default-value 元素创建一个名为 default_value 的单独变量。这个对吗？

是的你是对的。为文档中找到的每个 jQuery 节点创建 default_value。每次定义函数时，都会创建一个可以包含私有变量的对象。

> 只能从创建它的匿名函数中访问它吗？

是的，但也可以从该匿名函数内部创建的函数访问它。

> 我听说过“命名空间”这个词，它适用吗？

术语命名空间表示函数和变量的容器。如果创建一个新的 JS 库，避免与其他库发生冲突非常重要。因此，您无需创建全局“加载”函数，而是创建一个包含该函数的命名空间：

```
var myLibraryUniqueName = {};
myLibraryUniqueName.load = function() {}; 
```

当然，如果库很复杂，您可以创建内部命名空间：

```
myLibraryUniqueName.loginModule = {};
myLibraryUniqueName.animationModule = {};
... 
```

接下来你问：

> 如果我想将其应用于具有给定 ID 的元素而不是给定类的组，那么使用 each() 似乎是不必要的。应该怎么修改

```
function defaultValue(node) {
  var default_value = node.value;
  node.focus(function() {
      if(node.value == default_value) {
          node.value = '';
      }
  });
  node.blur(function() {
      if($.trim(node.value) == '') {
          node.value = default_value;
      }
  }
}
defaultValue($('#id')); 
```

# javascript - 加载 HTML 网站时，android 上的窗口高度错误

> ID：10387028
> 
> 赞同：1
> 
> 时间：2012-04-30T16:22:31.587
> 
> 标签：javascript, android, css, html, mobile

我正在尝试编写一个移动 html5 网站，其中有一个 Div 占据了移动设备窗口的整个大小。
我创建了一个高度为 100% 的 DIV 并将其放在正文中，它的高度也为 100%，HTML 标记的高度为 100%。
由于某些原因，当页面在 android 中加载时，它只需要一半的窗口大小，当我查询窗口的高度时，它说它是 229px 而不是实际的 450px。
当我旋转手机并向后旋转时，窗口高度变为 450px。
为什么会这样？有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:31:21.727

使用视口：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T10:28:59.457

将相同的解决方案发布到： [Android 浏览器的 screen.width、screen.height & window.innerWidth & window.innerHeight are unreliable](https://stackoverflow.com/questions/10610743/android-browsers-screen-width-screen-height-window-innerwidth-window-inner/12724847#12724847)

`window.innerHeight`,`window.outerheight`等中唯一的常数是`screen.height`.

这段代码给了我outerheight：

```
screen.height / window.devicePixelRatio - window.screenTop 
```

此外，为了支持旧版本的 android，请将您的代码放在`setTimeout`

我希望这会有所帮助 =)

# iphone - 如何检测父视图控制器中模态视图控制器的解除？

> ID：10387039
> 
> 赞同：64
> 
> 时间：2012-04-30T16:23:14.953
> 
> 标签：iphone, objective-c, ios, xcode, modalviewcontroller

> **可能重复：**
> [在底层 ViewController 中调用函数作为模态视图控制器被解雇](https://stackoverflow.com/questions/4150677/call-function-in-underlying-viewcontroller-as-modal-view-controller-is-dismissed)

我几乎什么都试过了。这是我尝试过的：

```
-(void)viewWillAppear:(BOOL)animated
{

NSLog(@"Test");

}

-(void)viewDidAppear:(BOOL)animated
{

NSLog(@"Test");

}

-(void)viewDidLoad
{

NSLog(@"Test");

} 
```

当模态视图控制器被解除时，为什么这些都不能在我的父视图控制器中工作？我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-04-30T16:57:22.713

*这个答案被重写/扩展以解释 3 种最重要的方法（[@galambalazs](https://stackoverflow.com/users/378024/galambalazs)）*

## 1\. 块

最简单的方法是使用回调[`block`](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html)。如果您只有**一个侦听**器（父视图控制器）对解雇感兴趣，这很好。您甚至可以通过事件传递一些数据。

在*MainViewController.m*

```
SecondViewController* svc = [[SecondViewController alloc] init];
svc.didDismiss = ^(NSString *data) {
    // this method gets called in MainVC when your SecondVC is dismissed
    NSLog(@"Dismissed SecondViewController");
};
[self presentViewController:svc animated:YES completion:nil]; 
```

在*SecondViewController.h*

```
@interface MainViewController : UIViewController
    @property (nonatomic, copy) void (^didDismiss)(NSString *data);
    // ... other properties
@end 
```

在*SecondViewController.m 中*

```
- (IBAction)close:(id)sender 
{
    [self dismissViewControllerAnimated:YES completion:nil];

    if (self.didDismiss) 
        self.didDismiss(@"some extra data");
} 
```

* * *

## 2\. 委托

[**`Delegation`**](https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html#//apple_ref/doc/uid/TP40008195-CH14)是 Apple 推荐的模式：

> **关闭呈现的视图控制器**
> 
> 如果呈现的视图控制器必须向呈现的视图控制器返回数据，请使用[委托](https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html#//apple_ref/doc/uid/TP40008195-CH14)设计模式来促进传输。委托使在应用程序的不同部分重用视图控制器变得更加容易。通过委托，呈现的视图控制器存储对委托对象的引用，该委托对象实现了正式[协议](https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Protocol.html#//apple_ref/doc/uid/TP40008195-CH45)中的方法。当它收集结果时，呈现的视图控制器在其委托上调用这些方法。在典型的实现中，呈现视图控制器使自己成为其呈现视图控制器的代表。

**主视图控制器**

在*MainViewController.h*

```
@interface MainViewController : UIViewController <SecondViewControllerDelegate>
    - (void)didDismissViewController:(UIViewController*)vc;
    // ... properties
@end 
```

*MainViewController.m*中的某处（呈现）

```
SecondViewController* svc = [[SecondViewController alloc] init];
svc.delegate = self;
[self presentViewController:svc animated:YES completion:nil]; 
```

*MainViewController.m*中的其他地方（被告知解雇）

```
- (void)didDismissViewController:(UIViewController*)vc
{
    // this method gets called in MainVC when your SecondVC is dismissed
    NSLog(@"Dismissed SecondViewController");
} 
```

**第二视图控制器**

在*SecondViewController.h*

```
@protocol SecondViewControllerDelegate <NSObject>
- (void)didDismissViewController:(UIViewController*)vc;
@end

@interface SecondViewController : UIViewController
@property (nonatomic, weak) id<SecondViewControllerDelegate> delegate;
// ... other properties
@end 
```

*SecondViewController.m*中的某处

 *```
[self.delegate didDismissViewController:self];
[self dismissViewControllerAnimated:YES completion:nil]; 
```

*（注意：带有 didDismissViewController: 方法的协议可以在整个应用程序中重用）*

* * *

## 3\. 通知

另一种解决方案是发送[**`NSNotification`**](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/). 这也是一种有效的方法，如果您只想*通知*解雇而不传递太多数据，它可能比委托更容易。但它的主要用例是当您需要**多个侦听**器来处理解雇事件时（不仅仅是父视图控制器）。

但请确保在完成后**始终**将自己从*NSNotificationCentre*中删除！否则，即使在您被解除分配后，您也可能会因被要求通知而崩溃。 *[编者注]*

在*MainViewController.m*

```
- (IBAction)showSecondViewController:(id)sender 
{
    SecondViewController *secondVC = [[SecondViewController alloc] init];
    [self presentViewController:secondVC animated:YES completion:nil];

    // Set self to listen for the message "SecondViewControllerDismissed"
    // and run a method when this message is detected
    [[NSNotificationCenter defaultCenter] 
     addObserver:self
     selector:@selector(didDismissSecondViewController)
     name:@"SecondViewControllerDismissed"
     object:nil];
}

- (void)dealloc
{
    // simply unsubscribe from *all* notifications upon being deallocated
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 

- (void)didDismissSecondViewController 
{
    // this method gets called in MainVC when your SecondVC is dismissed
    NSLog(@"Dismissed SecondViewController");
} 
```

在*SecondViewController.m 中*

```
- (IBAction)close:(id)sender 
{
    [self dismissViewControllerAnimated:YES completion:nil];

    // This sends a message through the NSNotificationCenter 
    // to any listeners for "SecondViewControllerDismissed"
    [[NSNotificationCenter defaultCenter] 
     postNotificationName:@"SecondViewControllerDismissed" 
     object:nil userInfo:nil];
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-30T16:36:21.850

模态视图应该告诉它的父级关闭它，然后父级会知道，因为它负责执行关闭。

`Utility Application`如果您创建一个新项目并选择模板，则可以看到一个示例。*

# mysql - Mysql通过通配符选择查询分组

> ID：10387047
> 
> 赞同：1
> 
> 时间：2012-04-30T16:23:54.703
> 
> 标签：mysql, select, sum, wildcard

无法通过通配符对活动论坛总和结果进行分组。

最终，我希望将所有具有相似名称的结果分组并汇总在不同的行中。

表：论坛

栏目：游戏、帖子

当前查询：

```
SELECT game, sum(posts) FROM forums WHERE posts>1 AND game like
'%rift%' OR game like '%swiftsure%' GROUP BY name 
```

当前结果：

> 游戏 **帖子**
> 
> Rift (PVP Defiant): Briarcliff **3406**
> 
> 裂谷指南 **100**
> 
> 裂谷领袖 **1541**
> 
> 秘境突袭讨论 **1336**
> 
> 秘境突袭领导 **533**
> 
> 秘境：牧师 **85**
> 
> 秘境：法师 **87**
> 
> 裂谷：私人**411**
> 
> 秘境：PVE 领导力 **113**
> 
> 裂谷：盗贼 **56**
> 
> 裂谷：战士**29**
> 
> 星球大战旧共和国 PvP - Swiftsure **7**
> 
> SWTOR Swiftsure 领导力 **0**
> 
> SWTOR：Swiftsure Private **7**

所需的结果如下所示：

> 游戏 | **帖子**
> 
> 裂痕 | **7697**
> 
> 迅捷| **14**

我当然感谢任何和所有的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:58:54.213

由于您正在寻找通用分组，我会做一个 CASE/WHEN 作为列...

```
SELECT case when game like '%rift%'      then 'Rift   '
            when game like '%swiftsure%' then 'Swiftsure'
       end as GroupName,
       count(*) as  PostCount
   from
      forums
   where
         game like '%rift%' 
      OR game like '%swiftsure%' 
   GROUP BY
      GroupName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:10:43.737

试试这个：[http ://www.sqlfiddle.com/#!2/f6be7/4](http://www.sqlfiddle.com/#!2/f6be7/4)

```
select x.Name, COUNT(p.Name)
from
(
  SELECT 'JOHN' AS NAME
  UNION
  SELECT 'PAUL'  
  ) as x
LEFT JOIN Person p ON p.Name LIKE CONCAT('%',x.NAME, '%')
GROUP BY x.Name 
```

样本数据：

```
create table person
(
  name varchar(100)
  );

insert into person values
('JOHN LENNON'),
('WINSTON JOHN LENNON'),
('MICHAEL JOHN FOX'),
('PAUL McCartney'),
('SEAN PAUL DATA'),
('GREAT PAUL OF FIRE'),
('ST PAUL OF X'); 
```

输出：

```
NAME    COUNT(P.NAME)
JOHN    3
PAUL    4 
```

* * *

如果要数 GEORGE，只需在 UNION 上添加即可：

```
select x.Name, COUNT(p.Name)
from
(
  SELECT 'JOHN' AS NAME
  UNION
  SELECT 'PAUL'  
  UNION
  SELECT 'GEORGE'
  ) as x
LEFT JOIN Person p ON p.Name LIKE CONCAT('%',x.NAME, '%')
GROUP BY x.Name 
```

输出：

```
NAME    COUNT(P.NAME)
GEORGE  0
JOHN    3
PAUL    4 
```

* * *

太糟糕了 MySQL 没有 unnest 功能。使用 Postgresql 更简单：[http ://www.sqlfiddle.com/#!1/87c74/5](http://www.sqlfiddle.com/#!1/87c74/5)

```
select x.Name, count(p.Name)
from 
unnest(array['John','Paul','George']) as x(Name)
left join Person p ON p.Name ilike concat('%',x.Name, '%')
group by x.Name 
```

您甚至可以直接将服务器端语言中的逗号分隔字符串用于 Postgresql，只需在该逗号分隔字符串周围放置一个大括号：[http ://www.sqlfiddle.com/#!1/87c74/17](http://www.sqlfiddle.com/#!1/87c74/17)

```
select x.Name, count(p.Name)
from 
unnest('{John,Paul,George}'::text[]) as x(Name)
left join Person p ON p.Name ilike concat('%',x.Name, '%')
group by x.Name 
```

这也适用于 Postgresql，值列表可以直接在查询中使用（而在 MySQL 中，值列表只能在 DDL 上使用）：[http ://www.sqlfiddle.com/#!1/87c74/9](http://www.sqlfiddle.com/#!1/87c74/9)

```
select x.Name, count(p.Name)
from 
(values('John'),('Paul'),('George')) as x(Name)
left join Person p ON p.Name ilike concat('%',x.Name, '%')
group by x.Name 
```

FROM 子句上的值列表也适用于 Microsoft Sql Server：[http ://www.sqlfiddle.com/#!3/87c74/3](http://www.sqlfiddle.com/#!3/87c74/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:40:45.710

我可能会选择：

```
 INSERT INTO working_table (keyword, connection)
  VALUES ('rift', connection_id())('swiftsure', connection_id());

  SELECT w.keyword, count(*)
  FROM forums f
  INNER JOIN working_table w
  ON f.game LIKE CONCAT('%', w.keyword, '%')
  WHERE w.connection=connection_id()
  AND forms.posts>1
  GROUP BY w.keyword;

  DELETE FROM working_table
  WHERE connection=connection_id(); 
```

不过它会像一条两条腿的狗一样奔跑。真的，如果我这样做，我会使用适当的搜索引擎模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-21T02:11:42.023

您需要将两个 OR'd 条件放在括号中。没有它们，AND 具有更高的优先级。

```
SELECT case when game like ... end as game, sum(posts)
FROM forums
WHERE posts > 1 AND (game like '%rift%' OR game like '%swiftsure%')
GROUP BY name 
```

# java - 与 JMS 简单聊天

> ID：10387053
> 
> 赞同：0
> 
> 时间：2012-04-30T16:24:07.607
> 
> 标签：java, jms

我正在使用 JMS 制作一个简单的聊天应用程序，但我的代码无法正常工作，我不知道为什么。这是我的代码，我与 JBoss 一起使用，所以我打开了 pub 并编写了这个，当我单击启动 Eclipse 时，给我这个错误消息：

```
<pre>
Topic or username missingjava.lang.ArrayIndexOutOfBoundsException: 0
    at chat.pub.main(pub.java:105)
</pre>

and this is the code, what is the problem?

    package chat;

    import javax.jms.*;
    import javax.naming.*;
    import java.io.*;
    import java.io.InputStreamReader;
    import java.util.Properties;

    public class pub implements javax.jms.MessageListener{
        private TopicSession pubSession;
        private TopicSession subSession;
        private TopicPublisher publisher;
        private TopicConnection connection;
        private String username;

        /* Constructor. Establish JMS publisher and subscriber */
        public pub(String topicName, String username, String password)
        throws Exception {
            // Obtain a JNDI connection
            Properties env = new Properties( );
            env.put(Context.SECURITY_PRINCIPAL, "guest"); 
            env.setProperty("java.naming.factory.initial", "org.jnp.interfaces.NamingContextFactory"); 
            env.setProperty("java.naming.provider.url", "localhost:1099"); 
            env.setProperty("java.naming.factory.url.pkgs", "org.jboss.naming");

            // ... specify the JNDI properties specific to the vendor

            InitialContext jndi = new InitialContext(env);

            // Look up a JMS connection factory
            TopicConnectionFactory conFactory =
            (TopicConnectionFactory)jndi.lookup("TopicConnectionFactory");

            // Create a JMS connection
            TopicConnection connection =
            conFactory.createTopicConnection(username,password);

            // Create two JMS session objects
            TopicSession pubSession =
            connection.createTopicSession(false,
                                          Session.AUTO_ACKNOWLEDGE);
            TopicSession subSession =
            connection.createTopicSession(false,
                                          Session.AUTO_ACKNOWLEDGE);

            // Look up a JMS topic
            Topic chatTopic = (Topic)jndi.lookup(topicName);

            // Create a JMS publisher and subscriber
            TopicPublisher publisher1 = 
                pubSession.createPublisher(chatTopic);
            TopicSubscriber subscriber = 
                subSession.createSubscriber(chatTopic);

            // Set a JMS message listener
            subscriber.setMessageListener(this);

            // Intialize the Chat application
            set(connection, pubSession, subSession, publisher1, username);

            // Start the JMS connection; allows messages to be delivered
            connection.start( );

        }
        /* Initialize the instance variables */
        public void set(TopicConnection con, TopicSession pubSess,
                        TopicSession subSess, TopicPublisher pub, 
                        String username) {
            this.connection = con;
            this.pubSession = pubSess;
            this.subSession = subSess;
            this.publisher = pub;
            this.username = username;
        }
        /* Receive message from topic subscriber */
        public void onMessage(Message message) {
            try {
                TextMessage textMessage = (TextMessage) message;
                String text = textMessage.getText( );
                System.out.println(text);
            } catch (JMSException jmse){ jmse.printStackTrace( ); }
        }
        /* Create and send message using topic publisher */
        protected void writeMessage(String text) throws JMSException {
            TextMessage message = pubSession.createTextMessage( );
            message.setText(username+" : "+text);
            publisher.publish(message);
        }
        /* Close the JMS connection */
        public void close( ) throws JMSException {
            connection.close( );
        }
        /* Run the Chat client */
        public static void main(String [] args){
            try{
                if (args.length!=3)
                    System.out.println("Topic or username missing");

                // args[0]=topicName; args[1]=username; args[2]=password
                pub chat = new pub(args[0],args[1],args[2]);

                // Read from command line
                BufferedReader commandLine = new 
                  java.io.BufferedReader(new InputStreamReader(System.in));

                // Loop until the word "exit" is typed
                while(true){
                    String s = commandLine.readLine( );
                    if (s.equalsIgnoreCase("exit")){
                        chat.close( ); // close down connection
                        System.exit(0);// exit program
                    } else 
                        chat.writeMessage(s);
                }
            } catch (Exception e){ e.printStackTrace( ); }
        }
    }
    i do this ![enter image description here][1]
    and now i get this eroor 
    ![enter image description here][2]
    and i dont no what i do not ok i will be happy for help thanks!!

      [1]: http://i.stack.imgur.com/c04o1.gif
      [2]: http://i.stack.imgur.com/dxCIU.gif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:29:24.530

```
java.lang.ArrayIndexOutOfBoundsException: 0 at chat.pub.main(pub.java:105) 
```

这意味着您在没有给它参数的情况下启动了程序

然后在第 105 行

```
pub chat = new pub(args[0],args[1],args[2]); 
```

当 args 为空时，您正在访问 args 的第 0 个元素。

重新运行程序并根据需要提供参数 (3)。

编辑：

为了在 Eclipse 中运行提供参数：

运行 -> 运行配置 -> 选择 pub （因为您已经尝试在 eclipse 中运行它） -> 选择参数 -> 在程序参数下指定以空格分隔的参数

[图片视图](http://www.javaprogrammingforums.com/java-jdk-ide-tutorials/362-how-send-command-line-arguments-eclipse.html)

# c# - 如何以元组列表作为参数声明 af# 方法？

> ID：10387056
> 
> 赞同：2
> 
> 时间：2012-04-30T16:24:16.953
> 
> 标签：c#, f#, tuples, c#-to-f#

如何编写一个等同于以下 c# 代码的 F# 方法？试图用谷歌搜索，但找不到任何有效的。谢谢。

```
public List<Tuple<long, string, string>> Fun(List<Tuple<long, string>> param)
{
  var ret = new List<Tuple<long, string, string>>();

  foreach (var tuple in param)
  {
    ret.Add(new Tuple<long, string, string>(tuple.Item1, tuple.Item2, "new val"));
  }

  return ret;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T16:28:54.067

如果您想使用惯用的功能列表，那么您可以编写：

```
let func (param:(int64 * string) list) = 
  [ for n, s in param -> n, s, "new val" ] 
```

我添加了注释`(int64 * string) list`以确保您获得与 C# 中相同的类型。如果您没有添加它，那么 F# 编译器会推断该函数是通用的 - 因为实际上元组的前两个元素的类型是什么并不重要。注释也可以用 C# 样式表示法编写，使用`param:list<int64 * string>`它可能更容易阅读。

如果您想使用 .NET`List`类型（通常不推荐在 F# 中使用），您可以使用 F# 别名`ResizeArray`并编写：

```
let func (param:(int64 * string) ResizeArray) = 
  ResizeArray [ for n, s in param -> n, s, "new val" ] 
```

这将创建一个 F# 列表，然后将其转换为 .NET`List<T>`类型。这应该为您提供与 C# 版本完全相同的公共 IL 签名，但我建议使用 F# 特定类型。

作为旁注，第二个示例可以使用命令式 F# 代码实现（`for`就像在 C# 中一样迭代元素）。这会生成与 C# 完全相同的 IL，但如果您稍后需要优化某些 F# 代码，这将非常有用。所以我不推荐这个版本（它也更长:-)）：

```
let func (param:(int64 * string) ResizeArray) = 
  let res = new ResizeArray<_>()
  for n, s in param do
    res.Add(n, s, "new val")
  res 
```

您还可以使用高阶函数，例如`List.map`并编写：

```
let func (param:(int64 * string) list) = 
  params |> List.map (fun (n, s) -> n, s, "new val") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:32:08.350

这是一个字面翻译：

```
member __.Fun (param:ResizeArray<int64 * string>) =
    ResizeArray(param |> Seq.map (fun (a, b) -> a, b, "new val")) 
```

然而，这不是很地道。

# matlab - Matlab 三角剖分和绘制 3D 圆柱点云

> ID：10387057
> 
> 赞同：1
> 
> 时间：2012-04-30T16:24:19.610
> 
> 标签：matlab, 3d, plot, triangulation, delaunay

我有一个关于在 Matlab 中绘制圆柱面的问题。我的数据集由`X, Y, Z`具有相应强度值的坐标点云组成`C`。

`scatter3`我可以使用以下函数绘制它们：

```
figure
scatter3(X,Y,Z,8,C) 
```

结果如下图：

但是，我想绘制这个对象的表面而不是点。我尝试使用 Delaunay 三角测量来实现这一点

```
tri     = delaunay(X,Y);
figure
trisurf(tri,X,Y,Z,C,'FaceColor','interp') 
```

[链接到屏幕截图](https://www.dropbox.com/s/1xh0faskno7m46e/01.jpg)

正如您从图像中看到的那样，结果不是我想要的，因为三角测量存在困难。`X`在我看来，算法似乎不能很好地处理我得到相同并`Y`多次坐标的事实。

按照帮助页面上介绍的示例，`TriRep`我尝试使用以下方法：

```
dt = DelaunayTri(X,Y,Z);
tr = TriRep(dt, X, Y, Z); 
```

`TriRep`唉，没有成功，因为我在调用函数时收到以下错误消息：

？？？错误使用 ==> TriRep 参数必须是“双矩阵”。

我想我必须限制我的几何形状，并且我认为我在这里通过使用函数找到了[示例 1](http://www.mathworks.co.uk/help/techdoc/ref/trirep.freeboundary.html)`freeBoundary`中的解决方案- 尽管我确实需要`TriRep`函数的输出来计算它。这就是我卡住的地方。如您所见，我不是三角测量方法的专家，我非常感谢您提供的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:52:35.987

我认为您想要的不是简单的三角剖分，而是您的一组点的凸包。

2d 中凸包的经典类比 -
如果您将一组点想象成板上的钉子，那么凸包是通过在您的点周围拉伸橡皮筋形成的多边形 - 也就是说，它触及外点而不是内点。

扩展这一点，您可以将 3d 凸包视为点云中外部点的“皮肤”。

凸包是更复杂的计算几何技术的起点，但在您的情况下，将为您提供您正在寻找的网格。

我没有使用 Matlab 的版本，但它看起来很简单： http: [//www.mathworks.com/help/techdoc/ref/convhulln.html](http://www.mathworks.com/help/techdoc/ref/convhulln.html)

编辑：在看到您的评论后：如果您已经在使用 TriRep 结构，您可以使用它来获取面法线，然后删除其面法线接近垂直向上/向下的任何三角形。例如，如果您从 Matlab 的 FaceNormals 文档页面[http://www.mathworks.com/help/techdoc/ref/trirep.facenormals.html](http://www.mathworks.com/help/techdoc/ref/trirep.facenormals.html)中的示例开始：

```
numpts = 100;
thetha = rand(numpts,1)*2*pi;
phi = rand(numpts,1)*pi;
x = cos(thetha).*sin(phi);
y = sin(thetha).*sin(phi);
z = cos(phi);
dt = DelaunayTri(x,y,z);
[tri Xb] = freeBoundary(dt);
tr = TriRep(tri, Xb);
P = incenters(tr);
fn = faceNormals(tr);
trisurf(tri,Xb(:,1),Xb(:,2),Xb(:,3), 'FaceColor', 'cyan', 'faceAlpha', 0.8); 
```

然后您可以简单地遍历法线，并删除任何具有高 z 幅度的面：

```
for(i=196:-1:1)
    if(abs(fn(i,3))>0.8)
        tri(i)=[];
    end
end
trisurf(tri,Xb(:,1),Xb(:,2),Xb(:,3),'FaceColor','red','faceAlpha',0.7); 
```

HTH--钢筋混凝土

# objective-c - 占位符和 NSLocalizedString

> ID：10387060
> 
> 赞同：6
> 
> 时间：2012-04-30T16:24:29.250
> 
> 标签：objective-c, cocoa, nslocalizedstring

我正在尝试翻译我的应用程序，但当有半个占位符时，我发现很难翻译。我需要找到以下代码：

```
[textView1 insertText:[NSString stringWithFormat:@"%@ è il %i/%i/%i. Il giorno delle settimana è %@. La Festa è compresa nel calcolo. \n", nomeFesta, giornoFesta, meseFesta, annoFestaModificato, ggSett]]; 
```

我把文件localizable.string（英文）：

```
"festaCompresa" = @"%@ is the %i/%i/%i. the day of the week is %@. The holidays is included in the calculation. \n"; 
```

然后我编辑了这段代码：

```
[textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresaW, @""), nomeFesta, giornoFesta, meseFesta, annoFestaModificato, ggSett]]; 
```

这没用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T18:47:27.383

您的字符串文件有一个小错误，您已将`@`字符串作为`NSString`常量包含在内 - 文件格式使用引号中的字符串：

```
"festaCompresa" = "%@ is the %i/%i/%i. the day of the week is %@. The holidays is included in the calculation. \n"; 
```

顺便说一句：在为本地化创建格式字符串时，您可能需要使用*位置*格式，其中每个格式规范都包含参数的数量。例如：

```
"festaCompresa" = "%1$@ is the %2$i/%3$i/%4$i. the day of the week is %@. The holidays is included in the calculation. \n"; 
```

显然，上述字符串中不需要这样做，因为参数按提供的顺序包含在内。然而，在某些语言中，它们可能需要以不同的顺序排列，这就是它的完成方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T18:54:34.733

你复制粘贴代码了吗？还是你重新输入的？因为如果你复制粘贴它，问题就在那里：

```
[textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresaW, @""), nomeFesta, giornoFesta, meseFesta, annoFestaModificato, ggSett]]; 
```

我想应该是

```
[textView1 insertText:[NSString stringWithFormat:NSLocalizedString(@"festaCompresa", @""), nomeFesta, giornoFesta, meseFesta, annoFestaModificato, ggSett]]; 
```

所以基本上是一个`"`而不是`W`。

此外，在 Localizable.strings 中，您不要放在`@`引号前面，所以：

```
"festaCompresa" = @"%@ is the %i/%i/%i. the day of the week is %@. The holidays is included in the calculation. \n"; 
```

应该是这样的：

```
"festaCompresa" = "%@ is the %i/%i/%i. the day of the week is %@. The holidays is included in the calculation. \n"; 
```

希望能帮助到你

# javascript - 使用 OAuth 对 javascript 应用程序进行身份验证

> ID：10387067
> 
> 赞同：1
> 
> 时间：2012-04-30T16:24:45.117
> 
> 标签：javascript, oauth, oauth-2.0

我正在用 javascript 构建一个 web 应用程序，它可以离线工作，使用本地存储，并与同一域上的 API 通信。我希望用户能够执行初始身份验证（用户名和密码），然后可能每 10 天左右进行一次定期身份验证，我想使用 OAuth 来执行此操作。我想使用 2-legged 身份验证，因为我不希望用户在身份验证后必须确认访问。但是，我知道秘密不能安全地存储在 javascript 中，这可能吗？如果是，我该如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:43:43.203

是的，您可以使用[资源所有者密码凭据授予类型](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-25#section-4.3)来实现此目的。这是一个简单的 HTTP POST 到 OAuth 授权服务器，带有 client_id、grant_type、用户名和密码。返回的是 access_token 和一些关于它的元数据（类型、到期、刷新令牌）。刷新令牌可用于为您的“10 天”场景请求新的访问令牌，访问令牌可能更适合几分钟（会话超时）。

对于此授权类型，客户端身份验证（使用 client_secret）是可选的。

# ios - 如何在 UITextView 中的特定单词之上创建不可见的 uibuttons？

> ID：10387069
> 
> 赞同：1
> 
> 时间：2012-04-30T16:24:46.923
> 
> 标签：ios, cocoa-touch, uibutton, uitextview, hyperlink

我正在尝试设计一个向用户显示一些说明的应用程序。我正在通过 UITextView 显示这些说明，现在我正在尝试添加一个功能，用户可以在其中单击特定单词并在另一个视图中查看它的定义。

具体的词都将来自一个 sqlite 数据库。所以我的问题是：实现这一目标的最佳方法是什么？

我正在考虑将不可见的 UIButtons 覆盖在单词之上，但我不知道如何将它们放置在 UITextView 内的单词之上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T21:19:58.917

实现所需的最简单方法是使用 UIWebView 而不是 UITextView。您可以将指令文本转换为 HTML 文件，如下所示：

```
<html>
   <head></head>
   <body>
      <div>This is a dummy text with a <a href="definition://id1234">clickable keyword</a> inside the text</div>
   </body>
</html> 
```

当您将可点击的关键字放入`标签中时，它们变为可点击的，您可以在 UIWebView 的委托方法中拦截此点击。`

 `因此，将您的 HTML 文本加载到 UIWebView 中：

```
UIWebView *webView = [[UIWebView alloc] init];
webView.delegate = self;
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://yourdomain.com/text.html"]]]; 
```

当您将委托分配给您的 webview（如上面的代码片段中）时，每次 UIWebView 发出请求时都会调用以下方法。在这里，您可以拦截对关键字的点击。我为关键字 HTML 链接提供了他们自己的方案（“definition://”），以使拦截更容易和更可靠。（您以后可以在 HTML 中包含其他链接。）

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
   if ([[request.URL scheme] isEqualToString:@"definition"]) {
      NSString *definitionWordID = [request.URL host];
      NSLog(@"show definition for word with ID: %@", definitionWordID);
      return NO;
   }
   return YES;
} 
```

这就是我将如何实现您想要实现的目标。使用 HTML 具有很大的优势，您不必担心文本中的关键字位置，因为您使用的是关键字的 HTML 链接。除此之外，使用 HTML 还让您有机会通过 CSS 设置文本样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:44:43.640

我不确定这是最好的方法，但我会按照你的要求回答这个问题：

```
// This assumes you have already determined the frame for the button
// i.e., you know the origin and size of the word in the UITextView
UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
[btn setBackgroundColor:[UIColor clearColor]];
[btn setFrame:wordFrame];
[textView addSubview:btn];
// Now, you need to also figure out how to handle the user pressing the button
[btn addTarget:self action:@selector(wordButtonWasPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

现在，对于不同的建议，您可能想要创建自己的 UIView 子类，自己执行自定义绘图（这也将实现跟踪单词位置的逻辑），然后实现触摸事件处理，交叉检查触摸位置您的单词位置列表。我不确定哪个会更好，但是如果您正在谈论添加大量 UIButton，您可能会相对较快地遇到性能问题。

要在自定义 UIView 子类中处理触摸事件，请查看以下方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event 
````

# ruby-on-rails - meta_search 与文本搜索 gem 冲突

> ID：10387073
> 
> 赞同：1
> 
> 时间：2012-04-30T16:25:13.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, meta-search, texticle

我使用需要 meta_search gem 的 active_admin gem，并注意到它与 texticle 冲突，因为它们都使用搜索方法并因此中断。我在几个地方读到了关于 solr 的类似问题，他们能够使用替代方法 solr_search 但我发现使用 texticle 没有这样的运气。

```
NoMethodError (undefined method `relation' for []:ActiveRecord::Relation): 
```

有什么想法可以避免这种情况吗？

# ruby-on-rails - haml中的Rails3 hidden_ field

> ID：10387077
> 
> 赞同：10
> 
> 时间：2012-04-30T16:25:41.693
> 
> 标签：ruby-on-rails, haml, hidden-field

我使用rails和haml，haml-rails。

我如何在haml中创建hidden_​​field？

我有领域：

```
.field
= f.label :submit_date
= f.datetime_select :submit_date 
```

我将隐藏此字段。用户无法手动修改日期时间。创建对象时，我将存储在 db datetime 中。我完全不知道该怎么做。我知道如何在 erb 中做到这一点，但我会使用 haml。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-30T16:34:44.200

如果您想创建一个带有 customer_id 的隐藏字段，您可以：

```
= f.hidden_field :customer_id, value: @customer.id 
```

注意：您提到要在创建对象时存储 created_at 。如果您的模型上有“时间戳”或“created_at”和“updated_at”列，rails 会为您处理这个问题（并且是推荐/标准做法）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-30T20:25:04.180

我认为这是 rails FormHelper 方法。如果您想在 HAML 中执行此操作，可以使用以下内容：

```
%input{:type=>"hidden", :value=>params[:order], :name=>:order} 
```

# c# - 更新投影背后的数据？

> ID：10387080
> 
> 赞同：0
> 
> 时间：2012-04-30T16:25:50.497
> 
> 标签：c#, linq, entity-framework

我有 2 个实体，`Line`其中有多个`Tags`：

![在此处输入图像描述](../Images/733b10189732dbcac3f842402d6def14.png)

**在我的用户界面中，我有一个列表框：**

![在此处输入图像描述](../Images/a1523fb98d79d8650ecbaeda774ce4af.png)

**此列表框绑定到一个投影：**

```
var tagNames = someline.Tags.OrderBy(x=>x.Name).Select(x => x.Name).ToList();
var tagsList = from t in rs.Tags join n in tagNames on t.Name equals n into tags select new { Name = t.Name, IsTagged = tags.Any()};
dgvTags.DataSource = tagsList; 
```

**问题 ：**

我希望选中该复选框，它会自动添加标签 / 或从 Line.Tags 集合中删除未选中的标签。这是否可能以简单的方式进行，还是我必须抓住点击并完成工作并刷新网格？

问题 2... 在执行上述操作之前，我注意到复选框甚至没有选中，这是有原因的吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:09:11.417

If you bind data source to projection you are creating something like readonly (one-way) data binding - there are no entities on behind which could be updated. Moreover this is not a case for some automagic data binding. You are showing information about all tags and selecting which tags must be added to your line. That means that you must manually handle events fired by your UI, get Id of selected tag and use it to add real tag entity to your line.

# ruby-on-rails - Ruby：使用 multipart/form-data 上传多个文件

> ID：10387081
> 
> 赞同：0
> 
> 时间：2012-04-30T16:25:51.117
> 
> 标签：ruby-on-rails, ruby, file-upload

我对 Ruby 和 Ruby on Rails 非常陌生，但我在现有框架之上进行开发。我正在尝试使用“multipart/form-data”将多个文件上传到服务器。当我选择多个文件进行上传时，只有最后选择的文件会通过并实际上传。这是一个示例请求有效负载：

```
------WebKitFormBoundarybQW0C702DEMnqySc
Content-Disposition: form-data; name="file"; filename="test 2.txt"
Content-Type: text/plain

------WebKitFormBoundarybQW0C702DEMnqySc
Content-Disposition: form-data; name="file"; filename="test.txt"
Content-Type: text/plain

------WebKitFormBoundarybQW0C702DEMnqySc-- 
```

我确信单个文件上传可以使用这种表示法，但我想知道是否有一种本地方式可以以这种格式上传多个文件。我应该以某种方式循环浏览这些数据吗？我对此感到茫然，因为我对 Ruby/Rails 非常缺乏经验。

我需要在这里支持 IE9，所以我不能对 FormData 对象进行任何操作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:41:11.940

看看这个[https://github.com/valums/file-uploade](https://github.com/valums/file-uploader)

# linux - Unix IPC套接字：关闭一端而不读取它

> ID：10387082
> 
> 赞同：3
> 
> 时间：2012-04-30T16:26:00.193
> 
> 标签：linux, sockets, unix, ipc, pipe

我有一个父进程和一个分叉的子进程，它们共享一个 Unix 域 IPC 套接字，使用`socketpair(AF_UNIX, SOCK_STREAM, 0, sockets)`. 两个进程都关闭套接字对的一端，并将另一端保存到`sock`变量中。之后他们这样做：

```
int sock; // Unix-domain socket

void child_main()
{
  printf("I am child\n");      
  sleep(1);      
  close(sock);
}

void parent_main()
{
  printf("I am parent\n");

  write(sock, "hello", 5);

  char buf[100];
  int ret = read(sock, buf, 100); // this read will return ECONNRESET
  if (ret == -1) { 
    perror("read");
    exit(-1);
  }
} 
```

父进程将一些数据写入套接字，子进程*不*读取它。相反，孩子关闭了套接字。现在我担心的是，`read`在父进程中，ECONNRESET（对等连接重置）失败，而我希望它会返回“0”，表示流结束。因为套接字的另一端通过调用*优雅地*`close`关闭了.

现在，我了解这种行为（关闭套接字而不读取挂起的数据会生成 ECONNRESET），但是这在哪里记录？[`man read`](http://linux.die.net/man/2/read)对 ECONNRESET 只字未提，但它提到：

> 可能会出现其他错误，具体取决于连接到 fd 的对象

unix 域套接字的[手册页](http://linux.die.net/man/7/unix)只说：

> ECONNRESET：远程套接字意外关闭。

但是由于 Unix 域套接字是本地 IPC 的东西，我想它可能更具体地说明可能发生此错误的情况。

我的“更深层次的想法”是这样的：如果规范说 eg`close`只有在没有数据要从套接字读取的情况下才会生成流结束标记，它如何​​知道其他进程是否不只是要写入一些？这不会造成竞争条件吗？内核如何知道连接是否会正常关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:37:17.100

对于有状态套接字（unix 域或 tcp），区分“无可用数据”和另一端套接字关闭的最佳方法是首先使用 select()，传递一个 readfds（参见 man 2 select）。当且仅当 select 指示读取事件时，才尝试在套接字上执行 read()。如果读取的字节数为 0，则表示套接字已关闭（对等方重置连接）。

# jquery - 为什么 Backbone 的事件 obj 缺少属性？

> ID：10387084
> 
> 赞同：5
> 
> 时间：2012-04-30T16:26:04.423
> 
> 标签：jquery, javascript-events, backbone.js

我正在开发一些拖放功能，并通过标准的 Backbone 方式附加事件：

```
events: { 
 'dragenter': 'dragEnter',
 'dragend': 'dragEnd'
 ....,
 .....
} 
```

我注意到在我的函数中`event`传递给它的对象不包含 html5 规范中概述的某些属性。

具体来说，`dataTransfer`缺少 obj。

我创建了一个快速演示来[演示我的问题](http://jsfiddle.net/ColdToast/QxSVb/1/)。只需将文件或其他内容拖到其上即可在日志中查看。

我的问题是为什么会发生这种情况？我浏览了[文档](http://documentcloud.github.com/backbone/docs/backbone.html)，似乎找不到它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T14:16:09.037

如果您使用的是 Backbone 事件，Backbone 会在实际事件之上放置一个层。如果要访问原始事件，则必须使用：**event.originalEvent**。

在 originalEvent 中，您会找到 dataTransfer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:41:30.063

Backbone 事件实际上将事件绑定到您的 Dom 库（jQuery、Zepto ...），因此如果您想要可拖动事件，则应该加载 jqueryui

# c# - 从一个 XAML 页面检索值并在另一个页面中使用它

> ID：10387086
> 
> 赞同：1
> 
> 时间：2012-04-30T16:26:09.417
> 
> 标签：c#, silverlight, xaml

我在使用的 XAML 页面的标签中保存了一个字符串值。当用户打开一个新的 Silverlight 子窗口时，我希望能够在新窗口中使用该字符串值。我尝试了以下 -

```
firstWindow FW = new firstWindow();
string textValue = FW.textBox1.Text; 
```

但是，这不起作用，因为它正在创建 firstWindow 的新实例，其中文本框还没有文本。打开新的子窗口后如何获取字符串值？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:31:41.960

在子窗口代码隐藏上创建一个公共属性，并在实例化之后和显示子窗口之前在父窗口中设置该值。

```
ChildWindow child = new ChildWindow();
child.PropertyName = this.textBox1.Text;
child.Show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T07:26:08.667

@Chris你是对的......或者，你也可以在任何内部静态全局变量中设置属性并在以后的任何地方检索它。这消除了创建对象的依赖关系，它可以在项目中的任何地方使用

# c# - 匿名类型中的特殊字符

> ID：10387087
> 
> 赞同：4
> 
> 时间：2012-04-30T16:26:10.340
> 
> 标签：c#, asp.net, asp.net-mvc-3

我想在变量名中创建一个带有特殊字符的匿名类型

例如我有这个：

```
new { status = "Active" } 
```

我想要类似的东西

```
new { status = "Active", $exists = true } 
```

这最终会序列化为 JSON，所以我知道我可以使用 JObject 或类似的东西，但作为匿名类型会容易得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:33:54.243

你必须遵守规则！您的代码将无法编译，因为您将其编写为代码中的匿名类型（而不是字符串），因此键必须是语言中的标识符。

语言有规则。标识符必须以有效的`identifier-start-character`, 定义的开头：

> Lu、Ll、Lt、Lm、Lo 或 Nl 类的 Unicode 字符

根据此规则：

[http://www.jaggersoft.com/csharp_grammar.html#identifier-start-character](http://www.jaggersoft.com/csharp_grammar.html#identifier-start-character)

使用这个表，第三列告诉我们'$'在'Sc'类中，所以你不能使用它。

[http://www.unicode.org/Public/UNIDATA/UnicodeData.txt](http://www.unicode.org/Public/UNIDATA/UnicodeData.txt)

如果我是你，我会做以下三件事之一：

1.  修复您的 API 规范，使其不依赖在您使用的语言中不是有效标识符的密钥（痛苦）
2.  编写一个简单的翻译层，在发送之前重写你的 JSON（混乱）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:32:47.677

我想你会很难接受的。特殊字符就是这样 - 特殊。它们对编译器具有重要意义，要克服它并不容易（如果不是不可能的话）。

此外，如果您确实设法创建了一个名为 的变量`$exists`，那么您将创建一些令人困惑的代码。该`$`符号在 C# 和 jQuery 中具有含义，因此阅读您的代码的任何人都可能想知道发生了什么。

在我看来，这可能比它的价值更麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:34:37.680

您的 $exists 将不起作用，因为最终它会被编译器转换为具有相同名称的属性。在属性值上，不允许使用这种命名约定！

# c# - 如何为 Nhibernate 生成域服务类？

> ID：10387088
> 
> 赞同：0
> 
> 时间：2012-04-30T16:26:11.523
> 
> 标签：c#, .net, silverlight, nhibernate, wcf-ria-services

我有一个通过 WCF RIA 服务进行调用的 Silverlight 应用程序。我有引用实体框架和 Linq to SQL 的概念服务证明示例，但现在我的项目需要 NHibernate 而不是 EF 或 L2S。

我将如何添加一个使用已经生成的 NHibernate 类而不是其他框架之一的域服务类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T22:05:11.237

找到了一个使用 NHibernate 的域服务的[工作示例](http://code.msdn.microsoft.com/NHibernate-Sample-16eaf868)，以及从头开始创建基本空域服务的快速[演练。](http://beyondrelational.com/blogs/dinesh/archive/2010/10/02/getting-started-with-wcf-ria-services.aspx)

此外，您返回的服务中的任何对象都必须在属性上具有 Key 属性，否则 Silverlight 端的 Web.g.cs（生成的代码）文件将不会生成，您将无法调用，不会在数据源窗口等中看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:31:02.723

NHibernate 并没有真正强制执行一些特殊的类约定。NHibernate 能够与 POCO 一起工作。更重要的是，如果您在 EF + Linq2SQL 和 NHibernate 之间进行了良好的设计更改，那么您的服务客户端应该是不可见的。

# c# - 在 C# 中将 Int 转换为通用枚举

> ID：10387095
> 
> 赞同：103
> 
> 时间：2012-04-30T16:26:45.723
> 
> 标签：c#, generics, casting, enums

类似于[在 C# 中将 int 转换为枚举，](https://stackoverflow.com/questions/29482/cast-int-to-enum-in-c-sharp)但我的枚举是通用类型参数。处理这个问题的*最佳*方法是什么？

例子：

```
private T ConvertEnum<T>(int i) where T : struct, IConvertible
{
    return (T)i;
} 
```

生成编译器错误`Cannot convert type 'int' to 'T'`

完整代码如下，其中value可以包含int，也可以为null。

```
private int? TryParseInt(string value)
{
    var i = 0;
    if (!int.TryParse(value, out i))
    {
        return null;
    }
    return i;
}

private T? TryParseEnum<T>(string value) where T : struct, IConvertible
{
    var i = TryParseInt(value);
    if (!i.HasValue)
    {
        return null;
    }

    return (T)i.Value;
} 
```

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-04-30T16:30:18.277

我发现的最简单的方法是通过向`object`.

```
return (T)(object)i.Value; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-30T16:34:28.540

你应该能够使用`Enum.Parse`这个：

```
return (T)Enum.Parse(typeof(T), i.Value.ToString(), true); 
```

本文讨论了为扩展方法解析通用枚举：

*   [使用扩展方法的通用枚举解析](http://geekswithblogs.net/sdorman/archive/2007/09/25/Generic-Enum-Parsing-with-Extension-Methods.aspx)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-10-10T00:02:41.713

这是一个非常快速的解决方案，它滥用了运行时创建静态泛型类的多个实例这一事实。释放你内心的优化恶魔！

当您以通用方式从流中读取 Enums 时，这真的很出色。结合一个还缓存枚举的底层类型的外部类和一​​个 BitConverter 来释放真棒。

```
void Main() 
{
    Console.WriteLine("Cast (reference): {0}", (TestEnum)5);
    Console.WriteLine("EnumConverter: {0}", EnumConverter<TestEnum>.Convert(5));
    Console.WriteLine("Enum.ToObject: {0}", Enum.ToObject(typeof(TestEnum), 5));

    int iterations = 1000 * 1000 * 100;
    Measure(iterations, "Cast (reference)", () => { var t = (TestEnum)5; });
    Measure(iterations, "EnumConverter", () => EnumConverter<TestEnum>.Convert(5));
    Measure(iterations, "Enum.ToObject", () => Enum.ToObject(typeof(TestEnum), 5));
}

static class EnumConverter<TEnum> where TEnum : struct, IConvertible
{
    public static readonly Func<long, TEnum> Convert = GenerateConverter();

    static Func<long, TEnum> GenerateConverter()
    {
        var parameter = Expression.Parameter(typeof(long));
        var dynamicMethod = Expression.Lambda<Func<long, TEnum>>(
            Expression.Convert(parameter, typeof(TEnum)),
            parameter);
        return dynamicMethod.Compile();
    }
}

enum TestEnum 
{
    Value = 5
}

static void Measure(int repetitions, string what, Action action)
{
    action();

    var total = Stopwatch.StartNew();
    for (int i = 0; i < repetitions; i++)
    {
        action();
    }
    Console.WriteLine("{0}: {1}", what, total.Elapsed);
} 
```

启用优化的 Core i7-3740QM 上的结果：

```
Cast (reference): Value
EnumConverter: Value
Enum.ToObject: Value
Cast (reference): 00:00:00.3175615
EnumConverter: 00:00:00.4335949
Enum.ToObject: 00:00:14.3396366 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-06-21T08:22:13.930

或者，如果您可以将枚举不是作为泛型类型，而是作为类型，那么只需使用

```
Enum.ToObject 
```

[https://msdn.microsoft.com/en-us/library/system.enum.toobject(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.enum.toobject(v=vs.110).aspx)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-01-14T12:15:06.287

在 .NET 核心中，现在可以像这样使用[System.Runtime.CompilerServices.Unsafe](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.unsafe)代码：

```
return Unsafe.As<int, TEnum>(ref int32); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-07T11:19:55.740

```
public static class Extensions
    {
        public static T ToEnum<T>(this int param)
        {
            var info = typeof(T);
            if (info.IsEnum)
            {
                T result = (T)Enum.Parse(typeof(T), param.ToString(), true);
                return result;
            }

            return default(T);
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-19T20:38:34.973

((T[])Enum.GetValues(typeof(T))) 可用于构建从 int 到 Enum 类型的字典/查找表 总体而言，我更喜欢 Ramon 使用“Unsafe.As”的演员阵容，因为枚举是如此薄的饰面在整数上，似乎不值得在假装周围建造城堡（并不是说薄是一件坏事）。请注意 c# 7.3 中的 Enum 类型约束。（基本的事情是我们可以在通用枚举约束下转换 T 的数组）

（如果我有代表，这将是一条评论）

```
 public static TEnum IntToEnum<TEnum>(int i)
    where TEnum : Enum
    {
        Array array = Enum.GetValues(typeof(TEnum));
        int[] intValues = (int[])array;
        TEnum[] enumValues = (TEnum[])array;
        var b = intValues.Zip(enumValues);
        //Consider saving the dictionary to avoid recreating each time
        var c = b.ToDictionary<(int n, TEnum e), int, TEnum>(p => p.n, p => p.e);
        return c[i];//KeyNotFoundException possible here
    } 
```

在@trinalbadger587 指出的可怕错误之后应该可以工作（谢谢.. [https://dotnetfiddle.net/1oYWjD](https://dotnetfiddle.net/1oYWjD)）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-20T15:59:14.513

这是一个新的答案，因为它是不同的。古老的问题，但我昨天正在这样做......所以

类似于@Ramon-de-Klein 并使用来自@trinalbadger587 的dotnet-fiddle 示例

相当简洁和不透明，但有时没关系。请注意，如果枚举存储在字节或 16 位 ushort 中，则它需要正确的基础值类型

```
 //Int to Enum using the hot span newness - but without unsafe{}
        Span<int> XS = stackalloc int[] { 100 };
        Console.WriteLine(MemoryMarshal.Cast<int, Bla>(XS)[0]);

        //Int to Enum using good old arrays
        Console.WriteLine(((Bla[])(Array)(new int[] { 100 }))[0]);

        //Enum to Int
        Console.WriteLine(((int[])(Array)(new Bla[] { Bla.B }))[0]);

enum Bla
{
    A = 0,
    B = 100
} 
```

# javascript - 二维弹道？

> ID：10387100
> 
> 赞同：0
> 
> 时间：2012-04-30T16:26:58.743
> 
> 标签：javascript, jquery, math

我的对象有一个点 x,y，当鼠标在 800x600 的框内拖动它时，它总是会发生变化。我的对象也可以旋转到鼠标设置的角度，它可以是任何 360 度。我现在的问题是如何从那个角度发射弹丸，当然还有那个 XY 位置。抛射物只需要直线运动，但它需要像主物体一样以正确的角度移动。我有角度，我有 XY 位置，我所需要的只是让它从适当的角度穿过网格的公式。

编辑 - 当前的 JSFIDDLE，弹丸没有以正确的角度射击。 [http://jsfiddle.net/vbk4Z/16/](http://jsfiddle.net/vbk4Z/16/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:29:59.383

标准公式为：

```
xn = x0 + v * t * cos(theta)
yn = y0 + v * t * sin(theta) 
```

`(x0, y0)`原始位置在哪里，`v`是所需的速度，`theta`是角度（以弧度为单位），`t`是自射弹发射以来的时间。

请注意，这使用了经典的笛卡尔约定，即相对于正 x 轴*逆时针*测量角度，并且 y 轴朝上。

如果您正在使用浏览器坐标，并且碰巧选择了使用方位角（相对于“向上”/“北”的顺时针方向），那么您需要交换一些符号和三角函数：

```
xn = x0 + v * t * sin(theta)
yn = y0 - v * t * cos(theta) 
```

# ios - 如何使 CSS 像 iOS xcode 故事板中的自动布局一样浮动？

> ID：10387103
> 
> 赞同：2
> 
> 时间：2012-04-30T16:27:32.447
> 
> 标签：ios, xcode, layout, storyboard, css-float

我想连续放置几个图像视图。在运行时，我将动态显示/隐藏图像视图，是否可以在情节提要中设置任何内容，以便当其中一个被隐藏时，其右侧的其余部分将“浮动”到左侧以填充其位置。在 html 中，我可以设置所有 div 的样式来浮动，在 iOS 中有什么类似的吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:14:34.703

据我所知，这是不可能的。在 CSS 中，将对象设置为不可见将（默认情况下）将其从布局过程中删除。在 iOS 中并非如此，因为对象的位置并不以相同的方式依赖于其他对象。在 CSS 中，它是一个从左到右、自上而下的引擎。在 iOS 中，减震器和支柱以及灵活/固定的边距/高度/宽度是一个不同的问题。

要按照您的建议进行操作，您可能必须编写自己的布局引擎，它（可能）会获取一组 UIImageView 对象，检查每个对象的`hidden`属性并将其布局或跳过（将其设置为`frame`等于`CGRectZero`或东西）根据需要。我不认为设置这个引擎太难，但它会是定制的。

这是否回答你的问题？

# html - 在 UIWebView 而不是视频中加载 Youtube 页面

> ID：10387105
> 
> 赞同：0
> 
> 时间：2012-04-30T16:27:51.817
> 
> 标签：html, uiwebview, io, youtube, embed

```
 NSString *youTubeHTMLTemplate = @"<html><body style=\"margin:0;padding:0;\"><iframe class=\"youtube-player\" type=\"text/html\" width=\"%f\" height=\"%f\" src=\"http://www.youtube.com/embed/%@\" frameborder=\"0\" allowfullscreen></iframe></body></html>";
    finalHtml = [NSString stringWithFormat:youTubeHTMLTemplate, htmlFrameWidth, htmlFrameHeight, videoID];
[videoWebView loadHTMLString:finalHtml baseURL:nil]; 
```

上面的代码正确加载视频（仅），但如果我提供小的高度和宽度（<100），UIWebView 会加载整个页面（视频+评论和所有）。我可以滚动查看整个页面。我希望只加载视频。

知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:52:23.320

我找到了这个。如果有人觉得有用，请写一个答案。这来自 YouTube 的 JS API 文档“要为关键播放器功能留出空间，播放器必须至少为 200 像素 x 200 像素”。

# ruby-on-rails - 如何为 Timeout::error 定义类范围的救援方法？

> ID：10387107
> 
> 赞同：2
> 
> 时间：2012-04-30T16:27:58.970
> 
> 标签：ruby-on-rails, ruby, timeout, savon

我有一个使用 savon 作为 gem 与 SOAP API 对话的类。并且有时服务器无法访问，因此实现soap方法的方法会抛出一个`Timeout::Error`. 实施这样的救援不是问题：

```
begin 
  ...
rescue Timeour::Error 
  ...
end 
```

但是我定义了大约 50 种可能会受到影响的方法，我不想重复相同的代码 50 次。那绝对不干。有没有办法解决这个问题？我已经想过这样的事情：

```
def safe_call method, params
  begin
    self.send method, params
  rescue Timeour::Error
    # do sth heroic to rescue the method
  end
end 
```

但这很糟糕，因为我必须更改使用该类的所有脚本中的每个调用。有没有办法进行全班救援？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:38:49.487

我认为您可以使用rescue_from。你可以在这里阅读：http: [//api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html)

简而言之，你可以把它放在你的应用程序控制器中：

```
rescue_from 'Timeout::Error' do |exception|
  # Rescue logic here.
end 
```

# php - php str_replace

> ID：10387108
> 
> 赞同：0
> 
> 时间：2012-04-30T16:28:05.810
> 
> 标签：php, string

我正在使用此代码进行简单的加密：

```
 function idEncrypt($string)
{
    $multiply = 2457;
    $original = array('1', '2','3', '4', '5', '6', '7', '8', '9', '0');
    $replace = array('6', '3', '9', '1', '2', '8', '5', '0', '4', '7');
    $idEncrypt = str_replace($original, $replace, $string);
    //$idEncrypt = $idEncrypt * $multiply;
    return $idEncrypt;      
} 
```

它应该取一个数字，并用 $replace 数组中的正确数字替换它。我输入“234”，得到“441”作为答案，我应该得到“391”。
有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:32:39.543

问题在于`str_replace`，对于数组中的每个元素，它被一遍又一遍地应用。

对于“234”，首先将 2 替换为 3，然后将 3 替换为 9，然后将 9 替换为 4。

将 3 替换为 9，然后将 9 替换为 4。

最后，将 4 替换为 1，创建“441”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:33:11.393

重要的一点可以在[`str_replace`](http://php.net/str_replace)函数的文档中找到：

> ### 更换订单陷阱
> 
> 因为 str_replace() 从左到右替换，所以在进行多次替换时，它可能会替换先前插入的值。另请参阅本文档中的示例。

对于您*简单*的“加密”，您想使用 PHP 的[`strtr`](http://php.net/strtr)功能：

```
function transform($string) {
  $original = '1234567890';
  $replace = '6391285047';
  return str_replace($string, $original, $replace);
} 
```

注意。请不要自己做“加密”功能。使用成熟的、经过良好测试的算法和库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:35:29.833

尝试[`strtr`](http://php.net/strtr)改用。您需要将代码更改为：

```
$original = "1234567890";
$replace = "6391285047"; 
```

这就是绕过`str_replace`.

# mysql - Mysql：语法“--log-slow-queries”已弃用，将在 fu$ 中删除

> ID：10387109
> 
> 赞同：0
> 
> 时间：2012-04-30T16:28:06.890
> 
> 标签：mysql, innodb

我刚刚更改了我的 mysql 设置以使用 innodb，但我在 msqld.log 中不断收到此警告

'语法'--log-slow-queries'已被弃用，将在fu$中删除'

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:31:37.713

> 默认情况下，慢查询日志是关闭的。要明确指定初始慢查询日志状态，请使用 --slow_query_log[={0|1}]。没有参数或参数为 1，--slow_query_log 启用日志。如果参数为 0，此选项将禁用日志。要指定日志文件名，请使用 --slow_query_log_file=file_name。要指定日志目标，请使用 --log-output（如第 5.2.1 节“选择常规查询和慢查询日志输出目标”中所述）。启用慢查询日志文件的旧选项 --log-slow-queries 已弃用。

[http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html](http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html)

# php - 邮件正文中显示的邮件标题，没有文件，没有 html

> ID：10387110
> 
> 赞同：2
> 
> 时间：2012-04-30T16:28:09.013
> 
> 标签：php, email, header

我在处理带有附件的电子邮件时遇到问题。标题，包括html（解析为文本）和文件（也解析为文本），都在标题中，作为消息体出现。这段代码曾经可以工作，但我不知道发生了什么变化。

有一个随机因素，有时邮件确实正确到达，但我似乎无法弄清楚会破坏邮件/使其工作的模式（假设有）。

这是我生成邮件的代码：

```
$file = $path.$filename;
$file_size = filesize($file);
$handle = fopen($file, "r");
$content = fread($handle, $file_size);
fclose($handle);
$content = chunk_split(base64_encode($content));
$uid = md5(uniqid(time()));
$name = basename($file);
$header .= "MIME-Version: 1.0\r\n";
$header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
$header .= "This is a multi-part message in MIME format.\r\n";
$header .= "--".$uid."\r\n";
$header .= "Content-Type: text/html; charset=utf-8\r\n";
$header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$header .= $message."\r\n\r\n";
$header .= "--".$uid."\r\n";
$header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; 
// use different content types here
$header .= "Content-Transfer-Encoding: base64\r\n";
$header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
$header .= $content."\r\n\r\n";
$header .= "--".$uid."--";
$mailto = 'yanivshimony@gmail.com';
if (mail($mailto, $subject, "", $header)) {

    echo "1"; // or use booleans here
} else {
    echo "mail send ... ERROR!";
} 
```

我尝试删除所有标题，只留下以下标题使其工作：

```
$header .= "Content-Type: text/html; charset=utf-8\r\n";
$header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$header .= $message."\r\n\r\n"; 
```

所以它非常无用，因为它只是一个普通的 html 电子邮件，没有多部分/附件/任何东西 - 但 HTML 已被解析:)

知道什么会破坏标题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:46:25.430

标题显示您的变量以不正确`$header`的内容开头...*标题*不应以边界开头，而应以正文开头（因此第一个条目应为）。很难说这是在哪里发生的，特别是考虑到您删除了我添加的代码格式修复但切换了行：`--38fd5b8f9b812b5db3ec89cd01b6bd9c`*`MIME-Version: 1.0`*

 *```
$header.= "MIME-Version: 1.0\r\n"; 
```

至：

```
$header= "MIME-Version: 1.0\r\n"; 
```

应该阻止任何先前的定义`$header`潜入那里。*

# facebook - Facebook 注册框从 iframe 中出来

> ID：10387115
> 
> 赞同：0
> 
> 时间：2012-04-30T16:28:36.607
> 
> 标签：facebook, iframe

我的 iframe 代码就是这样设置的

```
<iframe 
    src="
          https://www.facebook.com/plugins/registration
          ?client_id=
          &redirect_uri=
          &fields=
          [
            {'name':'name'},
            {'name':'email'}, 
            {'name':'phone', 'description':'Your Phone Number','type':'text'},
            {'name':'available','description':'When are you available?'}
          ]
        "

    scrolling="auto"
    frameborder="no"
    style="border:none;"
    allowTransparency="true"
    width="100%"
    height="400">
</iframe> 
```

而且效果很好，功能没有问题。我的问题是输入框出现在 iframe 的边缘，这是我不想要的。

我正在响应地构建我的网站，因此容器正在调整大小并且在移动浏览器（纵向视图）上看起来像这样

![输入突破 iframe](../Images/42fd5eeccf8ea89959424560e34fec30.png)

有什么方法可以设置这个插件的样式，而不是像这样 ![在此处输入图像描述](../Images/bc0d6cc88a65c445d050254eaff4d06b.png)

我可以拥有它

```
Name of Field
[input] 
```

等等？

还是可以更轻松地选择只是转到一个新页面/加载一个带有注册表单的 facebook 弹出窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:18:47.993

虽然 iFrame 方法不提供宽度小于约 340 像素的干净调整大小，但[XFBML](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse)集成应该更好地处理低至 260 像素的窄宽度，并允许标签和字段位于不同的行上，如您所描述的。[有关更多详细信息，请参阅注册插件文档](https://developers.facebook.com/docs/plugins/registration/)的 XFBML 部分。

下面包含示例代码，以及 FF13 中此流程的屏幕截图。

```
<div id="fb-root"></div>
<script src="//connect.facebook.net/en_US/all.js#appId={YOUR_APP_ID}&xfbml=1"></script>
<fb:registration 
  fields="[{'name':'name'},{'name':'email'}, {'name':'phone', 'description':'Your Phone Number','type':'text'},{'name':'available','type':'text','description':'When are you available?'}]" 
  redirect-uri="https://developers.facebook.com/tools/echo/"
  width="260">
</fb:registration> 
```

![例子](../Images/dba091351bdfcc0fe1a16bdef58da7e1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:36:54.880

这些字段似乎设置了最小宽度和大小。右侧为 240 像素，左侧为 38%。我试图破解它，但看起来唯一的方法是自己构建注册表并通过身份验证机制发布：http: [//developers.facebook.com/docs/plugins/registration/#fb-root](http://developers.facebook.com/docs/plugins/registration/#fb-root)

# sql - SQL 查询：如何创建“会话”列

> ID：10387118
> 
> 赞同：1
> 
> 时间：2012-04-30T16:28:50.880
> 
> 标签：sql, tsql, sql-server-2005

我需要找到一种在查询中添加`Session`列的方法。`SELECT`我正在使用 SQL Server 2005。

这是初始示例数据：

```
ID    Name      VisitCounter    
1     TOM           1   
2     TOM           2   
3     TOM           3   
4     DICK          1       
5     DICK          2       
6     DICK          3       
7     DICK          4       
8     HARRY         1       
9     HARRY         2       
10    TOM           1   
11    TOM           2   
12    DICK          1       
13    DICK          2 
```

我需要编写一个查询，该查询将添加一个名为“会话”的列，然后在每次名称更改时递增，并且`visitcounter = 1`.

所以查询应该是这样的：

```
ID    Name      VisitCounter    Session
1     TOM           1               1
2     TOM           2               1
3     TOM           3               1
4     DICK          1               2
5     DICK          2               2
6     DICK          3               2
7     DICK          4               2
8     HARRY         1               3
9     HARRY         2               3
10    TOM           1               4
11    TOM           2               4
12    DICK          1               5
13    DICK          2               5 and so on 
```

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:52:24.473

在您的示例数据中，会话不重叠。如果一般情况下是这样，您可以计算以前启动的会话数：

```
select  yt.ID
,       yt.Name
,       yt.VisitCounter
,       count(prev.ID) as Session
from    YourTable yt
join    YourTable prev
on      prev.ID <= yt.ID and
        prev.VisitCounter = 1
group by
        yt.ID
,       yt.Name
,       yt.VisitCounter
order by 
        yt.ID 
```

[SQL Fiddle 的工作示例。](http://sqlfiddle.com/#!3/2ec80/20)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T16:46:37.613

最好避免数据库中的数据重复。我不知道您是否可以更改数据库结构，但如果可以，您应该创建两个表：

*   表“用户”包含会话 ID 和用户名（唯一）。
*   表“访问”包含访问 ID 和用户 ID。

可以通过查询检索访问次数。

# c# - 在 ServiceHost（控制台应用程序）中运行的 WCF 服务

> ID：10387119
> 
> 赞同：2
> 
> 时间：2012-04-30T16:28:53.507
> 
> 标签：c#, wcf, endpoint, servicehost

我正在尝试将以前在任务栏中的 .asmx 服务中运行的 WCF 服务包装到控制台应用程序中。

以下是包装 WCF 服务的代码：

```
class Program
{
    static void Main(string[] args)
    {
        Uri uri = new Uri("http://localhost:5000");

        using (ServiceHost host = new ServiceHost(typeof(CheckoutService), uri))
        {
                Console.WriteLine("Prepping CheckoutService server");
                ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
                smb.HttpGetEnabled = true;
                smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
                host.Description.Behaviors.Add(smb);

                host.Open();

                Console.Clear();
                Console.WriteLine("CheckoutService server up and running");
                Console.WriteLine("Press Return to stop service at any point");
                Console.ReadLine();
                host.Close();
        }
    } 
```

但是，应该接收此服务的客户端应用程序（在服务被包装到控制台应用程序之前曾经工作）现在崩溃并出现错误：

> 在[http://localhost:5000/CheckoutService.svc](http://localhost:5000/CheckoutService.svc)上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

app.config 中此客户端的端点配置为：

```
<endpoint 
    address="http://localhost:5000/CheckoutService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICheckoutService"
    contract="CheckoutServiceServer.ICheckoutService" name="BasicHttpBinding_ICheckoutService" /> 
```

我想也许我`.config`在托管 WCF 服务的控制台项目中缺少某种形式的文件，但我可能错了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:33:34.500

看起来您正在关闭主机而不等待用户输入。你失踪了`Console.ReadLine()`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:43:27.163

您尚未为您的`ServiceHost`实例配置终端节点。您引用的配置文件没有被使用，但基于此文件，您需要配置您的`ServiceHost`实例以使用[BasicHttpBinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.aspx)绑定和您的`CheckoutServiceServer.ICheckoutService`合同以通过该`ServiceHost.AddServiceEndpoint()`方法配置您的服务端点。

有关托管 WCF 服务的帮助，请参阅[本文](http://msdn.microsoft.com/en-us/library/ms730935.aspx)。

# sql - Oracle CONNECT BY 分层查询中对父列的引用

> ID：10387124
> 
> 赞同：2
> 
> 时间：2012-04-30T16:29:24.423
> 
> 标签：sql, oracle, hierarchical-data, connect-by

我的数据如下所示：

```
KEY1   KEY2      KEY3   LKEY1  LKEY2     LKEY3  FLAG
====== ========= ====== ====== ========= ====== =====
09/10  10000     A1234  09/10  AU000123  A1234  1
09/10  10000     A1234  09/10  AU000456  A1234  1
09/10  10000     A1234  09/10  AX000001  A1234  1
09/10  AX000001  A1234  09/10  AE000010  A1234  0
09/10  AX000001  A1234  09/10  AE000020  A1234  0
09/10  AX000001  A1234  09/10  AE000030  A1234  0
09/10  10000     A1234  09/10  AX000002  A1234  0
09/10  AX000002  A1234  09/10  AE000040  A1234  0
09/10  10000     A1234  09/10  AU000789  A1234  0 
```

这是分层数据，我将查询根复合键（在本例中`09/10 10000 A1234`）；该`FLAG`字段是指由`LKEYx`键标识的“对象”。可以有任意数量的嵌套级别。（请注意，`KEY1`and`KEY3`字段不必像上面的示例中那样保持不变，只要保留层次结构即可。）

我要检索的是叶子节点，**但是**如果叶子的父节点与第二个字符`KEY2`的长度相同`LKEY2`或包含一个`X`，则返回直接父节点。在这种情况下，我们还需要将记录标记为可选......所以，像这样：

```
KEY1   KEY2      KEY3   OPTION  FLAG
====== ========= ====== ======= =====
09/10  AU000123  A1234  0       1
09/10  AU000456  A1234  0       1
09/10  AX000001  A1234  1       1
09/10  AX000002  A1234  1       0
09/10  AU000789  A1234  0       0 
```

我写了一个这样的查询，但它并不漂亮。此外，为了区分可选记录，它假设所有叶子节点都在树的同一层；但是，这不一定是正确的。我的查询如下：

```
with queryKeys as (
  select '09/10' key1,
         '10000' key2,
         'A1234' key3,
  from   dual
),
subTree as (
  select     tree.key1,
             tree.key2,
             tree.key3,

             tree.lkey1,
             tree.lkey2,
             tree.lkey3,

             tree.flag,

             connect_by_isleaf isLeaf,
             level thisLevel

  from       tree,
             queryKeys

  start with tree.key1 = queryKeys.key1
  and        tree.key2 = queryKeys.key2
  and        tree.key3 = queryKeys.key3

  connect by tree.key1 = prior tree.lkey1
  and        tree.key2 = prior tree.lkey2
  and        tree.key3 = prior tree.lkey3
),
maxTree as (
  select max(thisLevel) maxLevel
  from   subTree
)
select lkey1 key1,
       lkey2 key2,
       lkey3 key3,
       1 - isLeaf option,
       flag

from   subTree,
       maxTree
where (isLeaf = 1 or thisLevel = maxLevel - 1)
and   (length(key2) != length(lkey2) or substr(lkey2, 2, 1) != 'X'); 
```

原因`queryKeys`是因为它在更大的查询中的其他地方使用并且可以包含多个记录。`maxTree`部分是问题，超出了一般的怪癖！

现在，这篇文章标题的原因是因为如果我可以引用父字段，这个查询可以*更直接。*`FLAG`我尝试了一种`JOIN`方法来实现这个想法——在相关键上将树与自身连接——但是，除非我弄错了，否则会导致递归问题，你必须不断迭代树才能找到正确的父键（因为`KEYx`和`LKEYx`字段都定义了记录的完整组合键）。

（PS 使用 Oracle 10gR2，如果它有所作为。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:38:08.903

只需使用：

```
PRIOR FLAG 
```

它会给你你想要的——父行的标志字段。

```
subTree as (            
select     tree.key1,            
         tree.key2,            
         tree.key3,            
         tree.lkey1,            
         tree.lkey2,            
         tree.lkey3,            
         tree.flag,            
         PRIOR TREE.FLAG PRIOR_FLAG
         connect_by_isleaf isLeaf,            
         level thisLevel            

from       tree,            
         queryKeys 
(...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:51:19.400

我假设您的帖子归结为问题，“如何`FLAG`在分层查询中引用父行的属性？”

我不知道我想出的 SQL 是否正确。如果不是，我很抱歉。不过，总的来说，这是我的方法：

在层次结构的每一层，我将所有键 ( `SYS_CONNECT_BY_PATH`) 串在一起。然后使用`SUBSTR`,`INSTR`和`LEVEL`，我`SUBSTR`找出了相当于父级密钥的内容。最后，在 的定义中`PARENT_FLAG`，我选择`FLAG`其键与这个`SUBSTR`被取出的键匹配的行的 。

设置：

```
CREATE TABLE tree (
    key1        VARCHAR2(5)
,   key2        VARCHAR2(10)
,   key3        VARCHAR2(5)
,   lkey1       VARCHAR2(5)
,   lkey2       VARCHAR2(10)
,   lkey3       VARCHAR2(5)
,   flag        VARCHAR2(1)
);
INSERT INTO tree VALUES ('09/10','10000','A1234','09/10','AU000123','A1234','1');
INSERT INTO tree VALUES ('09/10','10000','A1234','09/10','AU000456','A1234','1');
INSERT INTO tree VALUES ('09/10','10000','A1234','09/10','AX000001','A1234','1');
INSERT INTO tree VALUES ('09/10','AX000001','A1234','09/10','AE000010','A1234','0');
INSERT INTO tree VALUES ('09/10','AX000001','A1234','09/10','AE000020','A1234','0');
INSERT INTO tree VALUES ('09/10','AX000001','A1234','09/10','AE000030','A1234','0');
INSERT INTO tree VALUES ('09/10','10000','A1234','09/10','AX000002','A1234','0');
INSERT INTO tree VALUES ('09/10','AX000002','A1234','09/10','AE000040','A1234','0');
INSERT INTO tree VALUES ('09/10','10000','A1234','09/10','AU000789','A1234','0'); 
```

询问：

```
COL flag          FOR A4
COL same_length   FOR A11
COL has_x_2nd     FOR A9
COL full_key_path FOR A50
COL parent_key    FOR A30
COL parent_flag   FOR A11
WITH querykeys AS (
  SELECT '09/10' key1
  ,      '10000' key2
  ,      'A1234' key3
  FROM   DUAL
)
, subtree1 AS (
  SELECT     tree.key1
  ,          tree.key2
  ,          tree.key3
  ,          tree.lkey1
  ,          tree.lkey2
  ,          tree.lkey3
  ,          tree.flag
  ,          CONNECT_BY_ISLEAF isleaf
  ,          LEVEL thislevel
  ,          DECODE(LENGTH(tree.key2)
             ,      LENGTH(tree.lkey2), '1'
             ,      '0') same_length
  ,          DECODE(UPPER(SUBSTR(tree.key2,2,1))
             ,      'X', '1'
             ,      '0') has_x_2nd
  ,          SYS_CONNECT_BY_PATH(tree.key1 || '|' || tree.key2 || '|' || tree.key3,'\')
             || '\'
             || tree.lkey1 || '|' || tree.lkey2 || '|' || tree.lkey3 || '\' full_key_path
  FROM       tree
  ,          querykeys
  START WITH tree.key1 = querykeys.key1
  AND        tree.key2 = querykeys.key2
  AND        tree.key3 = querykeys.key3
  CONNECT BY tree.key1 = PRIOR tree.lkey1
  AND        tree.key2 = PRIOR tree.lkey2
  AND        tree.key3 = PRIOR tree.lkey3
)
, subtree2 AS (
    SELECT  st1.key1
    ,       st1.key2
    ,       st1.key3
    ,       st1.lkey1
    ,       st1.lkey2
    ,       st1.lkey3
    ,       st1.flag
    ,       st1.isleaf
    ,       st1.thislevel
    ,       st1.same_length
    ,       st1.has_x_2nd
    ,       st1.full_key_path
    ,       SUBSTR(st1.full_key_path
            ,      INSTR(st1.full_key_path,'\',1,st1.thislevel) + 1
            ,      INSTR(st1.full_key_path,'\',1,st1.thislevel + 1)
                   - INSTR(st1.full_key_path,'\',1,st1.thislevel) - 1) parent_key
    FROM    subtree1    st1
)
SELECT  st2.key1
,       st2.key2
,       st2.key3
,       st2.lkey1
,       st2.lkey2
,       st2.lkey3
,       st2.flag
,       st2.isleaf
,       st2.thislevel
,       st2.same_length
,       st2.has_x_2nd
,      (SELECT t_prime.flag
        FROM   tree   t_prime
        WHERE  t_prime.key1 = SUBSTR(st2.parent_key
                              ,      1
                              ,      INSTR(st2.parent_key,'|',1,1) - 1)
        AND    t_prime.key2 = SUBSTR(st2.parent_key
                              ,      INSTR(st2.parent_key,'|',1,1) + 1
                              ,      INSTR(st2.parent_key,'|',1,2)
                                   - INSTR(st2.parent_key,'|',1,1) - 1)
        AND    t_prime.key3 = SUBSTR(st2.parent_key
                              ,      INSTR(st2.parent_key,'|',1,2) + 1)
        -- Following assumes all rows with parent keys have same flag value.
        -- Avoids ORA-01427: single-row subquery returns more than one row.
        AND    ROWNUM = 1) parent_flag
FROM    subtree2    st2
; 
```

结果：

```
KEY1  KEY2       KEY3  LKEY1 LKEY2      LKEY3 FLAG     ISLEAF  THISLEVEL SAME_LENGTH HAS_X_2ND PARENT_FLAG
----- ---------- ----- ----- ---------- ----- ---- ---------- ---------- ----------- --------- -----------
09/10 10000      A1234 09/10 AU000123   A1234 1             1          1 0           0         1
09/10 10000      A1234 09/10 AU000456   A1234 1             1          1 0           0         1
09/10 10000      A1234 09/10 AU000789   A1234 0             1          1 0           0         1
09/10 10000      A1234 09/10 AX000001   A1234 1             0          1 0           0         1
09/10 AX000001   A1234 09/10 AE000010   A1234 0             1          2 1           1         0
09/10 AX000001   A1234 09/10 AE000020   A1234 0             1          2 1           1         0
09/10 AX000001   A1234 09/10 AE000030   A1234 0             1          2 1           1         0
09/10 10000      A1234 09/10 AX000002   A1234 0             0          1 0           0         1
09/10 AX000002   A1234 09/10 AE000040   A1234 0             1          2 1           1         0

9 rows selected.

SQL> 
```

正如我所说，我不能 100% 确定我完全了解了您的数据模型，但我希望您能够遵循我的方法。

# c# - 在 C# 中将列表数据插入 mySQL 数据库的有效方法

> ID：10387127
> 
> 赞同：0
> 
> 时间：2012-04-30T16:29:30.507
> 
> 标签：c#, mysql, database, loops

我有 csv 文件，我想将其转储到数据库中。所以我创建了一个文件循环，在循环内我为每一行创建了一个名为 data 的列表

```
StreamReader file = new StreamReader(itemChecked.ToString());//read the file

while ((line = file.ReadLine())  != null)
{
    if (start_flag == true) // start processing the numbers, get the real data
    {
        List<string> data = new List<string>();
        data.AddRange(line.Replace("\"", "").Split(',').AsEnumerable());
    }
} 
```

到目前为止，一切都很好。

现在我想将列表数据插入数据库。名单相当大。我不想像这样输入每一个：

```
insert into table1 (tablenames) values (a, b, c on and on) 
```

如何循环列表并将数据插入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:48:18.500

首先，您需要使用[ADO.NET Driver for MySQL (Connector/NET)](http://www.mysql.com/products/connector/)连接到数据库。

其次，您将要打开与数据库的连接，然后插入一些数据：

```
var connection = new MySqlConnection();
connection.ConnectionString =
   "server=localhost;"
    + "database=DBNAME;"
    + "uid=USERNAME;"
    + "password=PASSWORD;";

connection.Open();

foreach(var datum in data) 
{
    var command = connection.CreateCommand();
    command.CommandText =
        "insert into table1 (tablenames)"
        + " values "
        + "(a, b, c on and on)";

    var result = command.ExecuteReader();
} 
```

我的例子是[基于这篇文章](http://markalexanderbain.suite101.com/how-to-add-records-to-mysql-with-c-a120775)。这不是一个完美的解决方案，但它应该让你开始。您可能希望[查看 MySQL Transactions](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html)以将您的插入批处理成有效的分组（取决于数据大小，一次可能为 100-1000。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:52:11.043

我会使用 bulkcopy 一次从 csv 文件中导入所有数据。您可以在此处找到示例：

[http://www.codeproject.com/Articles/30705/C-CSV-Import-Export](http://www.codeproject.com/Articles/30705/C-CSV-Import-Export)

我希望这就是你要找的

问候

# ios - 从网站获取图像列表并显示它

> ID：10387129
> 
> 赞同：2
> 
> 时间：2012-04-30T16:29:36.443
> 
> 标签：ios, xcode

我正在创建一个 iOS 应用程序，它假设获取网站上存在的图像列表并将它们显示为屏幕上的图块（类似于显示照片库中的图像）。我可以在 UIImageView 中显示来自 URL 的单个图像，但是在显示来自网站的完整图像列表时，我一无所知。任何正确方向的帮助或任何有用的教程将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:20:22.777

这个问题有两个部分。我会给你一个快速的回应每一个。

1：下载图片列表

如果您可以完全控制您的网站，这可能与使用 +arrayWithContentsOfURL: 一样简单。请务必调度下载以避免阻塞 UI 线程。

```
NSURL *URL = self.URLOfImages;
dispatch_queue_t dispatch = dispatch_queue_create("fetch.images", NULL);
dispatch_async(dispatch, ^{
    NSArray *images = [NSArray arrayWithContentsOfURL:URL];
    dispatch_async(dispatch_get_main_queue(), ^{
        self.images = images;
    });
});
dispatch_release(dispatch); 
```

注意：URL 必须返回 NSArray 期望的确切格式，并且 self.images 必须通知视图它需要重新加载自身，即。`[self.tableView reloadData]`.

如果您对 URL 的控制较少，则需要使用 NSURLRequest 之类的东西创建请求，使用 NSURLConnection 之类的东西获取数据，并从响应中解析出图像列表以创建图像数组。

在更复杂的场景中，将涉及分页。这将只需要下载一些列表，然后需要更多图像来请求更多图像。

2：显示图片列表

这可以像使用 UITableView 和使用 UITableViewCellStyleDefault 样式的 UITableViewCells 一样简单，然后在每个单元格中设置 imageView 属性。

为了更好地查看图像，您可以编写使用从 UITableViewCell 子类化的自定义表格视图单元格。这将允许您使用图像的自定义位置并将图像的大小设置为您想要的任何大小。

在更复杂的场景中，您可以创建自己的自定义视图，其中包含一个 UIScrollView，您可以在其中放置所有图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:35:05.467

我会设置一个网络服务来抓取这个“列表”（假设你实际上没有对服务器的内部访问）。我建议使用 libcurl 和 PHP 来获得该列表。

[http://www.sitepoint.com/own-web-service-php-xml-rpc/](http://www.sitepoint.com/own-web-service-php-xml-rpc/)

然后以 JSON 格式输出列表并使用 iOS 可用的库对其进行解析：

[iOS 中的原生 JSON 支持？](https://stackoverflow.com/questions/3562478/native-json-support-in-ios)

（可能需要看看最近在 JSON 解析方面取得了哪些进展，我似乎记得关于这个特定主题的一些事情在最近的历史中经历了变化）。

关于 libcurl 和 PHP 的官方文档：

[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

**（取自上述堆栈溢出问题）：**

> iOS 5 的更新答案：
> 
> JSON 支持现在是 iOS 原生的 NSJSONSerialization，但在性能方面，它与 JSONKit 相比就相形见绌了。
> 
> 我建议您使用 JSONKit 而不是 NSJSONSerialization。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-10T20:29:23.160

在谷歌浏览器中：

1.  导航到您要查看所有图像的页面
2.  按 f12
3.  选择“网络”选项卡
4.  滚动浏览所有请求图像，这些是页面呈现的顺序。

还：

1.  选择“应用程序”选项卡
2.  在图像下，浏览图像列表

# android - 位图会自我复制，直到 android 应用程序崩溃

> ID：10387137
> 
> 赞同：1
> 
> 时间：2012-04-30T16:30:40.477
> 
> 标签：android, bitmap, surfaceview

所以我得到了一个应用程序，应该将 2 个位图放在相机预览的顶部。但是，位图会自我复制直到崩溃，因为我切换到表面视图而不是视图以允许相机预览到位。任何人都可以帮忙吗？

CameraActivity.java:

```
package com.cs461.Ian;

//TODO:Add accelerometer support
//TODO:Add Clickable ghosts
//TODO:Add camera background
/*Completed:(As of 2:30am 4/16)
 * Activity launches
 * Ghost appears on screen
 * Ghost will randomly move around the screen
 */

import java.io.IOException;
import java.util.Random;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.hardware.Camera;
import android.os.Bundle;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class CameraActivity extends Activity{

Bitmap g;
Ghost a;
Ghost still;
SurfaceHolder mSurfaceHolder;
boolean firsttime=true;
int draw_x,draw_y,xSpeed,ySpeed;
static int score=0;
static TextView t;
static Camera bgCamera;

@Override
public boolean dispatchTouchEvent(MotionEvent event){
    return false;

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.game);
    a = new Ghost(getApplicationContext());
    still = new Ghost(getApplicationContext());

    a.Initalize(BitmapFactory.decodeResource(getResources(), R.drawable.ghost), 120, 120);
    still.Initalize(BitmapFactory.decodeResource(getResources(), R.drawable.ghost), 120, 120);

    /*a.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN){
                score++;
                t.setText("Score: "+score);
                Log.w("CLICKED","Clicked on ghost "+score+" times");

            }
            return true;
        }
    });
    Log.w("Added","Still added ontouchlistener");
    still.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN){
                score++;
                t.setText("Score: "+score);
                Log.w("CLICKED","Clicked on ghost "+score+" times");

            }
            return true;
        }
    });*/

    setContentView(new Panel(this));
}

class DrawThread extends Thread {
    private SurfaceHolder _surfaceHolder;
    private Panel _panel;
    private boolean _run = false;

    public DrawThread(SurfaceHolder surfaceHolder, Panel panel) {
        _surfaceHolder = surfaceHolder;
        _panel = panel;
    }

    public void setRunning(boolean run) {
        _run = run;
    }

    @Override
    public void run() {

        runOnUiThread(new Runnable() {
             public void run() {
                 Canvas c;

        //stuff that updates ui             

        while(_run) {
            c = null;
            try {
                c = _surfaceHolder.lockCanvas(null);
                synchronized(_surfaceHolder) {
                    _panel.invalidate();
                    _panel.onDraw(c);
                }
            } finally {
                if (c != null) {
                    _surfaceHolder.unlockCanvasAndPost(c);
                }
            }

        }
             }
        });
    }
}

class Panel extends SurfaceView implements SurfaceHolder.Callback {
    private DrawThread _thread;

    public Panel(Context context) {
        super(context);
        getHolder().addCallback(this);
        _thread = new DrawThread(getHolder(), this);
    }

    @Override
    public void onDraw(Canvas canvas) {
        //g.Initalise(BitmapFactory.decodeFile("/res/drawable-hdpi/ghost.png"), 200, 150, 5, 5);;
        update(canvas);
        invalidate();
    }

    /*Places ghost on screen and bounces it around in the screen. My phone is apparently only API level 4(the most up to date is 15) so i didn't code it
     *for the accelerometer yet.
     */
    public void update(Canvas canvas) {
        Random rand = new Random();

        if(firsttime){
            draw_x = Math.round(System.currentTimeMillis() % (this.getWidth()*2)) ;
            draw_y = Math.round(System.currentTimeMillis() % (this.getHeight()*2)) ;
            xSpeed = rand.nextInt(10);
            ySpeed = rand.nextInt(10);
            still.draw(canvas);
            firsttime=false;
        }
         draw_x+=xSpeed;
         draw_y+=ySpeed;
         draw_x = Math.round(System.currentTimeMillis() % (this.getWidth()*2)) ;
         draw_y = Math.round(System.currentTimeMillis() % (this.getHeight()*2)) ;
         if (draw_x>this.getWidth()){
          draw_x = (this.getWidth()*2)-draw_x;
          xSpeed = rand.nextInt(10);
          if(xSpeed >=5)
              xSpeed=-xSpeed;
         }
         if (draw_y>this.getHeight()){
          draw_y = (this.getHeight()*2)-draw_y;
          ySpeed = rand.nextInt(10);
          if(ySpeed >=5)
              ySpeed=-ySpeed;
         }

         //g = BitmapFactory.decodeResource(getResources(), R.drawable.ghost);
         //canvas.drawBitmap(g, 0, 0, null);

         a.update(canvas);

    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub
        invalidate();
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        _thread.setRunning(true);
        _thread.start();

        new Cam().execute(getApplicationContext());
         //try {
            //bgCamera.setPreviewDisplay(getHolder());
        //} catch (IOException e) {
            // TODO Auto-generated catch block
        //  e.printStackTrace();
        //}
       // bgCamera.startPreview();

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
         boolean retry = true;
            _thread.setRunning(false);
            while (retry) {
                try {
                    _thread.join();
                    invalidate();
                    retry = false;
                } catch (InterruptedException e) {
                    // we will try it again and again...
                }
            }

    }

}

} 
```

鬼.java：

```
package com.cs461.Ian;

import java.util.Random;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Rect;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;

public class Ghost extends View implements View.OnTouchListener{
public Ghost(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

private Bitmap mAnimation;
private int mXPos;
private int mYPos;
private Rect mSRectangle;
private int mSpriteHeight;
private int mSpriteWidth;
View v;
Rect dest;
int score = 0;

/*public Ghost() {
    mSRectangle = new Rect(0,0,0,0);
    mXPos = 80;
    mYPos = 200;
}*/

public void Initalize(Bitmap theBitmap, int Height, int Width) {
    mSRectangle = new Rect(0,0,0,0);
    mXPos = 80;
    mYPos = 200;
    mAnimation = theBitmap;
    mSpriteHeight = Height;
    mSpriteWidth = Width;
    mSRectangle.top = 0;
    mSRectangle.bottom = mSpriteHeight;
    mSRectangle.left = 0;
    mSRectangle.right = mSpriteWidth;
    dest = new Rect(mXPos, mYPos, mXPos + mSpriteWidth,
            mYPos + mSpriteHeight);

}
public void draw(Canvas canvas) {

    canvas.drawBitmap(mAnimation, mXPos, mYPos, null);
}

public void update(Canvas canvas) {
    new Random();
    canvas.translate(1, 1);
    mXPos = Math.round(System.currentTimeMillis() % (canvas.getWidth()*2)) ;
    mYPos = Math.round(System.currentTimeMillis() % (canvas.getHeight()*2)) ;
    if (mXPos>canvas.getWidth())
      mXPos = (canvas.getWidth()*2)-mXPos;
    if (mYPos>canvas.getHeight())
      mYPos = (canvas.getHeight()*2)-mYPos;

     draw(canvas);

}

public Rect getRect() {
    return mSRectangle;
}
@Override
public boolean onTouch(View v, MotionEvent event) {
    score++;
    //CameraActivity.t.setText("Score: "+CameraActivity.score);
    Log.w("CLICKED","Clicked on ghost "+score+" times");
    return true; //doesn't work if returns false either
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:49:32.137

每次重绘时尝试释放位图资源。如果 a 是您的位图，请致电`a.release()`

# .net - 如何以编程方式将元素添加到 ConfigurationElementCollection？

> ID：10387141
> 
> 赞同：11
> 
> 时间：2012-04-30T16:30:58.047
> 
> 标签：.net, unit-testing, configuration, app-config

我正在尝试对 custom 进行单元测试[`ConfigurationElementCollection`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelementcollection.aspx)，但在以编程方式填充集合时遇到问题。当我打电话时[`BaseAdd()`](http://msdn.microsoft.com/en-us/library/19tyhxbx.aspx)，我得到以下异常：

> ConfigurationErrorsException ：元素“添加”已被锁定在更高级别的配置中。

但是，此问题仅在运行多个测试时出现。考虑这两个测试：

```
private Fixture Fixtures = new Fixture();  // AutoFixtures

[Test]
public void test1()
{
    var tc = Fixtures.CreateAnonymous<TenantCollection>();
    var t = Fixtures.CreateAnonymous<Tenant>();
    tc.Add(t);
}

[Test]
public void test2()
{
    var tc = Fixtures.CreateAnonymous<TenantCollection>();
    var t = Fixtures.CreateAnonymous<Tenant>();
    tc.Add(t);
} 
```

每个单独的测试在单独执行时都会通过。一起运行时，会抛出锁定异常。

这里发生了什么？我怎样才能解锁收藏或解决该锁？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-07T16:20:36.940

我仍然不完全确定`ConfigurationElement`锁定是如何工作的，但我确实找到了一个至少对于单元测试来说似乎很好的解决方法：在添加新项目之前，设置`LockItem`为 false。

所以在我的自定义中，`ConfigurationElementCollection`我有方法`Add()`（我在 OP 中调用）。它需要修改为如下所示：

```
public class TenantCollection : ConfigurationElementCollection
{
    public void Add(Tenant element)
    {
        LockItem = false;  // the workaround
        BaseAdd(element);
    }
} 
```

# ruby - 在模块中包含外部 Ruby 模块？

> ID：10387142
> 
> 赞同：1
> 
> 时间：2012-04-30T16:31:00.427
> 
> 标签：ruby, inheritance, module

我正在为 Ruby 制作一个 Rack 框架，它`App::Router`在以下内容中运行一个模块：

```
module App
    Router = HttpRouter.new do
        get('/') { |env| erb('home') }
    end
end 
```

注意`erb()`我希望在路由器中使用的方法。问题是将方法从外部源（我的框架）获取到模块中并传递到内部的`do`块中。

有没有一种可能的方法将模块从外部源获取到另一个文件中的模块中？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:49:57.737

erb 是您在某处定义的方法吗？尝试这样的事情：

```
 require 'path/to/module/with/erb_method'
    module App
      include YourModule
      Router = HttpRouter.new do
        get('/') { |env| erb('home') }
      end
    end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:40:41.330

```
module App
  def foo
    "bar"
  end
end

module Route
  include App
end

include Route

foo
 => "bar" 
```

# .net - 从 RFT 获取 .net 工具提示

> ID：10387143
> 
> 赞同：0
> 
> 时间：2012-04-30T16:31:02.257
> 
> 标签：.net, tooltip, rft

使用 Rational Functional Tester，我需要验证在 .net 中创建的工具提示对象。我可以使用反射来调用我使用 RFT 找到的 .net 控件上的方法，但[似乎没有办法](https://stackoverflow.com/questions/10235387/given-a-net-control-can-i-get-the-tooltip)从控件本身获取与控件关联的工具提示对象。是否有一些特殊的 RFT 方法可以获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:45:42.287

似乎秘密在于只有一个工具提示对象可以根据鼠标当前悬停的控件来更新其文本。

它不是它所属应用程序的子应用程序或后代，而是一个拥有的对象。实际拥有的对象有一个看起来像废话的类；我们的是“WindowsForms10.tooltips_class32.app.0.33c0d9d”。我怀疑这是因为它实际上是一个 win32 对象，而不是一个 .net 对象。这个对象有一个子类“.Tooltip”，它有一个包含工具提示文本的属性“.text”。

# c++ - 如何在 Windows 上隐藏/取消隐藏文件而不删除 C++ 中的其他属性

> ID：10387145
> 
> 赞同：3
> 
> 时间：2012-04-30T16:31:06.563
> 
> 标签：c++, windows, winapi, filesystems

我希望能够在 C++ 中隐藏/取消隐藏 Windows 中的文件，但我担心会擦除其他属性（如 FILE_ATTRIBUTE_READONLY、FILE_ATTRIBUTE_ARCHIVE、...）。

这是当前代码：

```
//Hiding the file
SetFileAttributes(path, FILE_ATTRIBUTE_HIDDEN);

// Un-Hiding the file
SetFileAttributes(path, FILE_ATTRIBUTE_NORMAL); 
```

这适用于常规文件，但隐藏文件会删除 READONLY 标志吗？取消隐藏文件会删除它吗？

如果是的话，我打算做这样的事情：

```
//Hiding the file
int attr = GetFileAttributes(path);
if ((attr | FILE_ATTRIBUTE_HIDDEN) == 0) {
    SetFileAttributes(path, attr & FILE_ATTRIBUTE_HIDDEN);
}

//Unhiding the file
int attr = GetFileAttributes(path);
if ((attr | FILE_ATTRIBUTE_HIDDEN) == FILE_ATTRIBUTE_HIDDEN) {
    SetFileAttributes(path, attr & FILE_ATTRIBUTE_HIDDEN);
} 
```

那行得通吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T17:05:58.340

这个测试不起作用，它总是错误的：

```
if ((attr | FILE_ATTRIBUTE_HIDDEN) == 0) 
```

它应该说

```
if ((attr & FILE_ATTRIBUTE_HIDDEN) == 0) 
```

同样，要测试文件是否已经隐藏：

```
if ((attr & FILE_ATTRIBUTE_HIDDEN) == FILE_ATTRIBUTE_HIDDEN) 
```

最终更正的代码：

```
//Hiding the file
int attr = GetFileAttributes(path);
if ((attr & FILE_ATTRIBUTE_HIDDEN) == 0) {
    SetFileAttributes(path, attr | FILE_ATTRIBUTE_HIDDEN);
}

//Unhiding the file
int attr = GetFileAttributes(path);
if ((attr & FILE_ATTRIBUTE_HIDDEN) == FILE_ATTRIBUTE_HIDDEN) {
    SetFileAttributes(path, attr & ~FILE_ATTRIBUTE_HIDDEN);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T16:38:11.923

是的，第一个代码将删除所有其他属性。

第二个代码几乎是正确的，但是您错过了`~`符号：

```
// Hiding the file

int attr = GetFileAttributes(path);

if ((attr & FILE_ATTRIBUTE_HIDDEN) == 0) {
    SetFileAttributes(path, attr | FILE_ATTRIBUTE_HIDDEN);
}

// Unhiding the file

int attr = GetFileAttributes(path);

// Is it currently visible?
if ((attr & FILE_ATTRIBUTE_HIDDEN) == FILE_ATTRIBUTE_HIDDEN) {
    SetFileAttributes(path, attr & ~FILE_ATTRIBUTE_HIDDEN);
} 
```

# c# - 在 C# 或 Java 中使用的 C++ DLL

> ID：10387151
> 
> 赞同：0
> 
> 时间：2012-04-30T16:31:22.877
> 
> 标签：c#, java, c++, dll, graphviz

我对 C++ 编程很陌生...

我被分配了在 C++ 中执行 SkipList 的任务，该任务将执行一些功能。除了这些功能之外，还包括以下内容：

> 将跳过列表导出到可以在 GraphViz 中呈现的 .DOT 文件

任何想法我怎么能做到这一点？此外，我需要导出 DLL，以便可以在 Java 或 C# 中使用它。

任何帮助是极大的赞赏

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:40:18.927

如果您希望在 Java 中使用 C++ 代码，请查看[JNI](http://en.wikipedia.org/wiki/JNI)。它要求您使用 JNI 包装器修改您的 C++ 代码（有关示例，请参见 Wikipedia 链接）。

另一方面，C# 可以`extern "C" __declspec(dllexport)`通过[PInvoke](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)调用正常导出的 DLL 函数，即使用.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:36:50.347

Java 有一个 JNI 技术实际上它是 c/c++（带有外部“c”调用）库，具有一些特定的类型和规则

是的，您可以通过一些 jni 桥在 Java 中使用您的 dll

# mysql - 连接多个表

> ID：10387156
> 
> 赞同：1
> 
> 时间：2012-04-30T16:31:53.923
> 
> 标签：mysql, join, database-design, multiple-tables, normalize

我对规范化表格相当陌生，并且在从 3 个表格中获取正确信息时遇到了一些麻烦。我举了一个例子，涉及从不同图书馆预订书籍。我有 3 张桌子。书籍、地点、预订（如下所列）：

```
//SQL query:
$sql =
"SELECT * FROM books
JOIN (location LEFT JOIN reservations ON location.locID = reservations.locID)
ON books.bookID = location.bookID
WHERE location.locID=2
"; 
```

如果我要列出校园 B 中的书籍，我希望达到的输出：

```
title |locName |status
Book 1|Campus B|1
Book 2|Campus B|0
Book 3|Campus B|0
Book 4|Campus B|0
Book 5|Campus B|1 
```

出于某种原因，我绝对没有得到我认为我应该得到的输出，我很好奇是否有人有一些建议。我敢肯定，一旦我看到发生了什么，我就会明白我做错了什么。

```
table: books
bookID|title
   1  |  Book 1
   2  |  Book 2
   3  |  Book 3
   4  |  Book 4
   5  |  Book 5

table: location
locID|locName
  1  |  campus A
  2  |  campus B
  3  |  campus C

table: reservations
bookID|locID|status
   1  |  1  |  1
   3  |  1  |  1
   4  |  1  |  1
   1  |  2  |  1
   5  |  2  |  1
   4  |  3  |  1
   5  |  3  |  1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:37:03.030

我认为这更符合您的要求：

```
SELECT *
FROM books b
LEFT JOIN reservations r ON b.bookID = r.bookID
JOIN location l on r.locID = l.locID
WHERE l.locID = 2 
```

这将返回在 locID=2 的位置保留的书籍列表。

在这种情况下，我有一个 LEFT JOIN 来保留您的原始查询，但是鉴于您的 WHERE 子句，将不会选择 location.locID 字段中具有 NULL 的任何记录。

因此，我可以使用所有 INNER 连接重写您的查询，如下所示：

```
SELECT *
FROM books b
JOIN reservations r ON b.bookID = r.bookID
JOIN location l on r.locID = l.locID
WHERE l.locID = 2 
```

您可能会感兴趣的其他查询：

获取所有书籍，无论它们是否在任何地方保留：

```
SELECT *
FROM books b
LEFT JOIN reservations r ON b.bookID = r.bookID
JOIN location l on r.locID = l.locID 
```

获取所有位置，无论那里是否保留书籍：

```
SELECT *
FROM books b
JOIN reservations r ON b.bookID = r.bookID
RIGHT JOIN location l on r.locID = l.locID 
```

获取所有书籍和所有位置：

```
SELECT *
FROM books b
LEFT JOIN reservations r ON b.bookID = r.bookID
RIGHT JOIN location l on r.locID = l.locID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:49:10.017

```
SELECT
 books.title
 , location.locName
 , IFNULL(reservations.status, 0) status
FROM 
 books
 JOIN location 
 LEFT JOIN reservations ON (
  location.locID = reservations.locID
  AND books.bookID = location.bookID
 )
WHERE location.locID = 2 
```

# javascript - Facebook 脚本 all.js 在 Chromium 浏览器中崩溃：Uncaught SyntaxError: Unexpected identifier all.js:57

> ID：10387157
> 
> 赞同：2
> 
> 时间：2012-04-30T16:31:57.543
> 
> 标签：javascript, facebook, syntax

我使用以下代码来初始化 Facebook。在我更改了 HTML 页面加载的单独 Javascript 文件中的许多内容后，我在 Facebook 脚本中得到了一个未捕获的语法错误（它以下面的形式嵌入在 HTML 页面中），但我不知道原因对于这个错误以及导致它的原因。

```
fbAsyncInitDone = false;
window.fbAsyncInit = function() {
    FB.init({
        appId  : '{{app_id}}',
        status : true, // check login status
        cookie : true, // enable cookies to allow the server to access the session
        xfbml  : true  // parse XFBML
    });
    //fillinFriends();
    fbAsyncInitDone = true;
};

(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
  }(document)); 
```

我怎样才能让 all.js 再次工作？我认为这个错误与 Chromium 有关，因为 Firefox 仍然有效。我非常需要一个有效的 Facebook Javascript，因为页面上的几个 Facebook 元素都在使用它。

# c# - 有没有办法以编程方式修改这些列定义？

> ID：10387165
> 
> 赞同：0
> 
> 时间：2012-04-30T16:32:37.050
> 
> 标签：c#, wpf, xaml

我有一个显示项目列表的页面。

我的标记基本上是

```
<Grid x:Name="ItemGrid">
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="30*" x:Name="Column1Header"/>
    <ColumnDefinition Width="15*" x:Name="Column2Header"/>
    <ColumnDefinition Width="15*" x:Name="Column3Header"/>
...
<ItemsControl Name="ItemsList">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <Grid x:Name="Items">
        <ColumnDefinition Width="30*" x:Name="Column1"/>
        <ColumnDefinition Width="15*" x:Name="Column2"/>
        <ColumnDefinition Width="15*" x:Name="Column3"/>
... 
```

使用星号大小的两个单独的网格（这意味着我不能使用 SharedSizeGroups。现在我必须添加一个配置选项来隐藏`Column3`和标题。我可以通过在代码中将宽度设置为 0 来轻松隐藏标题，但我不知道out how to hide `Column3`. 循环遍历项目总是会导致 null。

```
foreach (var item in ItemsList.Items)
{
  var container = ItemsList.ItemContainerGenerator.ContainerFromItem(item) as FrameworkElement;
  // container is null
} 
```

基本上两列需要相同的大小。网格每 30 秒填充一次新的项目列表（如果重要），但网格大小在加载后不会改变。

我还尝试让两列共享一个定义宽度的样式，然后尝试通过代码更改样式，但这也没有成功。

```
<Style TargetType="{x:Type ColumnDefinition}" x:Key="Column3Width">
   <Setter Property="Width" Value="15*"/>
</Style> 
```

修改它导致错误：“在使用'SetterBase'（密封）后，它不能被修改。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:41:18.180

您可以将项目列的宽度绑定到标题列：

```
Width="{Binding Width, ElementName=ColumnXHeader}" 
```

# java - 在以下情况下适当委派责任？

> ID：10387168
> 
> 赞同：0
> 
> 时间：2012-04-30T16:32:48.977
> 
> 标签：java, tdd, separation-of-concerns

我对 TDD 设计比较陌生，并且正在开展一个项目以获取相关经验。我的项目是一个塔防风格的游戏——我从一个基本的 Creep（怪物）开始，并根据测试的行为来设计它。然而，creep如何移动是一个相当复杂的方法。它目前看起来类似于：

```
public void moveToward(Point2D destination) {
  if (canMove()) {
    if (speedGreaterThanDistance(destination) {
      leftoverDistance = calculateLevtoverDistance(destination);
      currentLocation.setLocation(destination);
    } else {
      // do math to calculate x distance and y distance to move
      Point2D newLocation = new Point2D.Double(oldX + xTrans, oldY + yTrans);
      currentLocation.setLocation(newLocation);
    }
  }
} 
```

这真的感觉不像是正确的设计和结构，但我不确定如何分割它。有没有人有任何建议或链接指向我如何去做这件事？我的设计有一个 Creep 对象作为我的业务逻辑的一部分，所以我知道它至少必须有点复杂，但我现在似乎还没有做到这一点。我的问题的一部分可能是我没有适当的价值对象吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:37:09.420

如果我正确理解您的问题，您有一个带有 CurrentPosition（Point2D）、Direction（矢量 xTrans、yTrans）和 Destination（Point2D）的 Creep。

据我了解，蠕变行为是：

*   当 Creep 不能移动时，它的 CurrentPosition 在转弯后应该保持不变，
*   当 Creep 可以移动并且 CurrentPosition 和 Destination 之间的距离小于 Direction 的范数时，转弯后 CurrentPosition 应该是 Destination，
*   当 Creep 可以移动并且 CurrentPosition 和 Destination 之间的距离严格大于 Direction 的范数时，转弯后的 CurrentPosition 应该是 CurrentPosition + Direction。

从这个角度来看，我倾向于将计算/几何部分提取到几何类中，并将蠕变行为声明为

```
public void moveToward(Point2D destination) 
{
  if (CanMove()) 
  { 
    var distanceToDestination = Geometry.Distance(CurrentPosition, destination);
    var distancePerTurn = Geometry.Length(Direction);
    if (distanceToDestination <= distancePerTurn)
    {
      CurrentPosition = destination;
    }
    else
    {
      CurrentPosition = Geometry.Add(CurrentPosition, Direction);
    }   
  }
} 
```

您现在可以测试 Geometry 类的方法，Creep 的 3 个行为也应该是可测试的。

# javascript - iframe 中的 location.hash 在 Firefox 上不起作用

> ID：10387183
> 
> 赞同：3
> 
> 时间：2012-04-30T16:33:46.427
> 
> 标签：javascript, firefox, iframe

我正在尝试在 iframe 中显示 HTML5 幻灯片（基于[Google 的 html5slides](http://code.google.com/p/html5slides/)）。当前幻灯片编号设置在 URL 哈希中，以便能够直接跳转到它。

但它在 Firefox 中不起作用。棘手的部分是我使用 javascript 填充 iframe 的内容，所以我的 iframe 没有 src 属性。当我在 iframe 中加载幻灯片的代码时，它可以正确显示在 Chrome、Opera、Safari 甚至 IE9 上。但在 Firefox 上，它会加载一瞬间，然后将我的父页面加载到 iframe 中。

我怀疑在 iframe 中设置哈希在 firefox 中不起作用，因为我没有 src 属性（我用空的 src 属性进行了测试，结果是一样的）

那么是否有另一种方法可以在 javascript 中设置 iframe 的 url 哈希值，该方法可以与 firefox 一起使用？

如果您将此页面内容粘贴到带有实时预览的 jsbin.com 中，您可以在 firefox 中看到错误：http: [//html5slides.googlecode.com/svn/trunk/template/index.html](http://html5slides.googlecode.com/svn/trunk/template/index.html) 在 firefox 中，jsbin 将自行加载到预览 iframe。

# sql - PostgreSQL 数据库 - 错误帮助

> ID：10387188
> 
> 赞同：0
> 
> 时间：2012-04-30T16:33:56.997
> 
> 标签：sql, postgresql

我正在尝试创建一个查询，将 table 的值和内部的值更新为`rgn_no`table`chp_cd`的`bue`值`rgn_no`和`chp_cd`内部的值`chapterassociation`。我认为 WHERE 子句没有任何问题，但是当我运行它时出现以下错误：

SQL错误：

```
ERROR:  insert or update on table "bue" violates foreign key constraint "bue_chp_cd_fkey"
DETAIL:  Key (chp_cd)=(CA3) is not present in table "chapter". 
```

* * *

非常感谢任何帮助！

SQL查询：

```
UPDATE bue SET
 rgn_no = chapterassociation.rgn_no,
 chp_cd = chapterassociation.chp_cd
FROM
 chapterassociation
WHERE
 bue.mbr_no IS NULL AND bue.chp_cd IS NULL
 AND bue.work_state = chapterassociation.work_state
 AND bue.bgu_cd = chapterassociation.bgu_cd 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:40:23.920

阅读错误信息：

```
ERROR: insert or update on table "bue" violates foreign key constraint
"bue_chp_cd_fkey" DETAIL: Key (chp_cd)=(CA3) is not present in table "chapter". 
```

它说您的一个更新想要将 chp_cd 设置为“CA3”，但 CA3 不是允许的值，因为外键约束希望值“CA3”出现在表“章节”中。仅此而已。

您的查询语法没有任何问题，只是您的查询会导致数据与数据模型中的约束冲突。

# python - 为什么可以将属性添加到对象子类的实例，但不能添加到对象实例？

> ID：10387190
> 
> 赞同：4
> 
> 时间：2012-04-30T16:34:18.803
> 
> 标签：python, object, attributes

为什么这会引发错误：

```
o = object()
o.i = 1 
```

但这不会：

```
class A(object):
    pass

a = A()
a.i = 1 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T16:38:48.223

因为内置类型没有与之关联的字典来保存添加的属性：

```
>>> o = object()
>>> dir(o)
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__'] 
```

看？没有`__dict__`。

但是添加一个子类可以使该属性有去处：

```
>>> class A(object):
....    pass
....
>>> a = A()
>>> dir(a)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__'] 
```

说它是“因为它们是在 C 中定义的”并不是“为什么”。您当然可以使用实例字典在 C 中定义类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:37:41.187

`object`[是在 C 中定义的。除非您在类型定义中填充适当的槽，否则您](http://docs.python.org/extending/newtypes.html#attribute-management)不能将任意属性添加到 C 中定义的类型的实例。

# java - 将变量传递给 findViewByID

> ID：10387193
> 
> 赞同：1
> 
> 时间：2012-04-30T16:34:33.907
> 
> 标签：java, android

我有以下设置。在我的 xml 中，我有一堆图像视图。我试图根据首选项中设置的数字和星期几仅显示其中一个。这一定很容易，但我找不到将变量传递给 findViewByID 的正确方法。这是代码片段：

```
String groupName = "R.id."+prefs.getString("groupListKey", "<unset>")+"_"+(Calendar.getInstance().get(Calendar.DAY_OF_WEEK));

ImageView image = (ImageView) findViewById(groupName); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:39:40.767

findViewById() 期望您向它传递一个表示资源标识符的整数。您正在尝试将其传递给字符串

您最好的选择是有一个条件语句来评估您的星期几并返回正确的 ID，而不是按照您的方式进行操作

```
 int resourceId = 0;
 switch (Calendar.getInstance().get(Calendar.DAY_OF_WEEK)) {
     case Calendar.SUNDAY:
         resourceId = R.id.sundayView;
         break;

     case Calendar.MONDAY:
         resourceId = R.id.mondayView;
         break;

     ...etc
 }

ImageView image = (ImageView) findViewById(resourceId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:39:49.923

`findViewById`接收 an`int`作为参数，它是`R.id`类中生成的参数之一。

你可以有一个带有你的 id 的数组：

```
int[] imagesIds = new int[] { R.id.image1, ... R.id.image7 }; 
```

然后根据您的条件确定索引：

```
int imageIndex = ...
ImageView image = (ImageView) findViewById(imagesIds[imageIndex]); 
```

# c# - C# int- 或 object-to-double 转换错误解释

> ID：10387195
> 
> 赞同：11
> 
> 时间：2012-04-30T16:34:37.993
> 
> 标签：c#, casting, int, double

以下代码在最后一次分配中失败：

```
static void Main(string[] args)
{
    int a = 5;
    object b = 5;

    System.Diagnostics.Debug.Assert( a is int && b is int );

    double x = (double)a;
    double y = (double)b;
} 
```

如果 a 和 b 都是`int`，这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-30T16:36:56.180

这是一个非常常见的问题。有关说明，请参见[http://blogs.msdn.com/b/ericlippert/archive/2009/03/19/representation-and-identity.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/03/19/representation-and-identity.aspx)。

* * *

片段：

> 我收到了很多关于 C# cast 运算符的问题。我得到的最常见的问题是：
> 
> ```
> short sss = 123;
> object ooo = sss;            // Box the short.
> int iii = (int) sss;         // Perfectly legal.
> int jjj = (int) (short) ooo; // Perfectly legal
> int kkk = (int) ooo;         // Invalid cast exception?! Why? 
> ```
> 
> 为什么？因为一个装箱的`T`只能拆箱`T`。(*) 一旦它被拆箱，它只是一个可以照常转换的值，所以双重转换工作得很好。
> 
> (*) 或`Nullable<T>`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-30T16:36:45.060

拆箱需要确切的类型 - 您可以这样做：

```
double y = (double)(int)b; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-18T21:04:59.437

这是 System.Convert 派上用场的罕见情况之一。如果您事先不知道它将是 int，则可以使用 System.Convet.ToDouble(obj) 将其淘汰。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T16:46:20.637

隐式转换是一种编译时操作。`b`type是不可能的`object`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T16:38:48.113

`a`是 an `int`，但是`b`是对 an 对象的引用`int`- 这就是所谓的装箱 int。它们是两种不同的事物，因此具有不同的行为。

# amazon-ec2 - 为 Ejabberd 集群推荐的 EC2 实例大小

> ID：10387205
> 
> 赞同：6
> 
> 时间：2012-04-30T16:35:01.903
> 
> 标签：amazon-ec2, ejabberd

创建大型（100k+ 用户）Ejabberd 集群的推荐 Amazon EC2 实例大小是多少？

我的意思是，使用更多的小型实例还是使用更少的大型实例更有效/成本更低？

用于集群计算的 HVM 镜像是否对 Ejabberd 集群有任何用途，或者标准镜像是否足以满足此目的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T16:49:27.343

eJabberd 可以使用大量内存但不会使用大量 CPU，因此内存是最大的考虑因素。这真的取决于你在谈论多少个连接。100k+ 连接，您至少需要一个大型实例。

来自[MetaJacks 博客](http://metajack.wordpress.com/2008/08/26/choosing-an-xmpp-server/)（Strophe 的[创建](http://strophe.im/)者，Javascript XMPP 库）

“对于 Chesspark，我们为数百个连接使用超过一档的 RAM。Jabber.org 的 10k+ 连接使用大约 2.7GB 的 RAM。”

一个大型实例有 7.5GB 的 RAM，这对于 100k+ 连接来说是不够的。我会说您正在查看大型实例或高内存实例的 2-3 服务器集群。

只有当您需要软件虚拟机不提供的硬件支持（例如显卡处理）时，才真正需要 HVM。内存或 CPU 不需要。

# ios - iOS 使用日期选择器动态更改单元格的内容

> ID：10387208
> 
> 赞同：1
> 
> 时间：2012-04-30T16:35:08.033
> 
> 标签：ios, uitableview, datepicker

我有一个嵌入了 UITableView 的 UIView。同一视图中的一个文本字段应控制表格的单元格编号。如果用户输入数字 4，TableView 应立即更改其单元格编号以反映用户输入的内容。单元格的内容将类似于“请选择”。

然后，当用户选择一个单元格时，将提出日期选择器，让用户选择日期/时间，然后，当拾取器被拆除时，该单元格应更改为所选的日期/时间。

两天多以来，我都为此发疯了。我没有在这里放任何代码，因为我真的不知道从哪里开始，到目前为止我尝试过的所有事情都完全失败了。

如果有人能引导我找到解决方案，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:40:06.343

如果您在 iPad 上，您可以在用户选择它时从所选单元格中显示一个 UIPopOverController。在 iPhone 上，您可以呈现模态视图控制器。

为此，请参阅`-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`。

当 UIDatePicker 的呈现视图控制器被解除时，您必须实现处理从 UIDatePicker 获取值的代码。此外，您必须将 UIDatePicker 托管在视图控制器中，因为（据我所知）无法自行呈现它。

所以，我提出的解决方案是：

1.  创建一个新的视图控制器来托管您要呈现的 UIDatePicker。
2.  在该视图控制器上，放置“确定”和“取消”按钮。
3.  向该视图控制器添加一个引用您的“主”视图控制器的属性。这样，当您选择完日期后，承载 UIDatePicker 的视图控制器就可以向“主”视图控制器发送消息。
4.  在您的“主”视图控制器中，`tableView:didSelectRowAtIndexPath:`为您的 UITableView 处理事件。
5.  呈现视图控制器以向用户显示 UIDatePicker。
6.  如果用户选择“确定”，则关闭 modal/popOver 视图控制器并使用新信息更新单元格（您可能需要一个 NSDate 值数组和`[tableView reloadData]`执行此操作的调用）。
7.  如果用户选择“取消”，则关闭模态/popOver 视图控制器并且不要更新任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T11:57:21.027

i think [this tutorial](http://masteringios.com/blog/2013/10/31/ios-7-in-line-uidatepicker/) will help you.. i have followed that too..i was also faced the same problem that you have..

# c# - 将 Eval 格式化为货币，强制 en-US

> ID：10387209
> 
> 赞同：1
> 
> 时间：2012-04-30T16:35:12.943
> 
> 标签：c#, asp.net

我有这行代码：

```
<%# Eval( "Balance", "{0:C}" )%> 
```

无论他们设置了什么语言环境，我如何始终强制它以 en-US 显示货币？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T17:02:15.403

尝试这个：

```
<%# String.Format( new System.Globalization.CultureInfo("en-US"), "{0:C}", Eval("Balance") %> 
```

您还可以为整个页面或整个应用程序设置文化，如此处[所述](http://msdn.microsoft.com/en-us/library/bz9tc508.aspx)。

# php - PHP 阅读目录

> ID：10387211
> 
> 赞同：0
> 
> 时间：2012-04-30T16:35:19.393
> 
> 标签：php, directory

所以我正在通过 PHP Docs 阅读和写入 PHP 中的文件，有一个我不太明白的例子：

[http://php.net/manual/en/function.readdir.php](http://php.net/manual/en/function.readdir.php)

如果到最后它显示了一个这样的例子：

```
<?php
if ($handle = opendir('.')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            echo "$entry\n";
        }
    }
    closedir($handle);
}
?> 
```

在什么情况下会`.`或`..`曾经被阅读？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:38:40.657

`readdir`API 调用遍历所有目录。因此，假设您遍历当前目录（由“ `.`”表示），那么您将进入无限循环。此外，避免遍历父目录（用“ `..`”表示）以将列表限制在当前目录及其下方。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T17:06:22.530

如果您想使用 PHP 读取目录，我建议您使用该`scandir`函数。下面是scandir的演示

```
$path = __DIR__.'/images';
$contents = scandir($path);
foreach($contents as $current){
  if($current === '.' || $current === '..') continue ;
  if(is_dir("$path/$current")){
    echo 'I am a directory';
  } elseif($path[0] == '.'){
    echo "I am a file with a name starting with dot";
  } else {
    echo 'I am a file';
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:42:51.607

因为据我所知，在 UNIX 文件系统中，`.`就像路标一样。`..`无论如何，肯定是这个PHP函数。

把它们放在那里，否则你会得到一些奇怪的结果（比如无限循环等）！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T16:56:37.777

在 *nix 中。是当前工作目录，.. 是父目录。但是，任何以“。”开头的文件或目录。被认为是隐藏的，所以我更喜欢以下内容：

```
...
if ($entry[0] !== '.') {
    echo "$entry\n";
}
... 
```

这样可以确保您不会“向上”解析目录树，不会无休止地循环当前目录，并且会忽略任何隐藏的文件/文件夹。

# .net - 使用 HttpWebRequest 访问多个页面

> ID：10387216
> 
> 赞同：0
> 
> 时间：2012-04-30T16:35:44.247
> 
> 标签：.net, vb.net, httpwebrequest, httpwebresponse

我正在尝试对需要 POST 登录身份验证的网站进行屏幕截图。我可以在我的第一个请求中很好地进行身份验证，但是当我尝试转身并点击下一页时，我会重定向回登录页面（基本上是说我没有登录）。

代码：

```
Public Function GetPage(ByVal PageName As String, ByVal UserName As String, ByVal Password As String) As String
    Dim ReturnString As String = ""
    Dim Cookies As New CookieContainer
    Dim AuthURI As Uri = New Uri(AuthURL)
    Cookies.GetCookieHeader(AuthURI)
    Cookies.GetCookies(AuthURI)

    'Set Header/Meta Info
    System.Net.ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3
    Dim request As HttpWebRequest = HttpWebRequest.Create(AuthURL)
    request.Method = "POST"
    request.CookieContainer = Cookies
    request.UserAgent = "Mozilla/5.0 (Windows; U;Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1"

    'Set POST Info
    Dim postData As String = "userName=" & HttpUtility.UrlEncode(UserName) & "&password=" & HttpUtility.UrlEncode(Password)
    Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)
    request.ContentType = "application/x-www-form-urlencoded"
    request.ContentLength = byteArray.Length

    'Write to the request stream
    Dim dataStream As Stream = request.GetRequestStream()
    dataStream.Write(byteArray, 0, byteArray.Length)
    dataStream.Close()

    ' Get the response.
    Dim response As HttpWebResponse = request.GetResponse()
    dataStream = response.GetResponseStream()
    Dim reader As New StreamReader(dataStream)
    Dim responseFromServer As String = reader.ReadToEnd()
    ReturnString = responseFromServer

    'Append cookie data
    For Each c As Cookie In response.Cookies
        Cookies.Add(c)
    Next

    ' Clean up the streams.
    reader.Close()
    dataStream.Close()
    response.Close()

    'Bail on fail
    If ReturnString.Contains("Login failed") Then Return Nothing

    'Generate new request
    request = HttpWebRequest.Create(URLStub & PageName)
    request.Method = "POST"
    request.UserAgent = "Mozilla/5.0 (Windows; U;Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1"
    request.CookieContainer = Cookies

    'Set POST Info
    postData = "userName=" & HttpUtility.UrlEncode(UserName) & "&password=" & HttpUtility.UrlEncode(Password)
    byteArray = Encoding.UTF8.GetBytes(postData)
    request.ContentType = "application/x-www-form-urlencoded"
    request.ContentLength = byteArray.Length

    'Write to the request stream
    dataStream = request.GetRequestStream()
    dataStream.Write(byteArray, 0, byteArray.Length)
    dataStream.Close()

    'Get the response.
    response = request.GetResponse
    dataStream = response.GetResponseStream
    reader = New StreamReader(dataStream)
    responseFromServer = reader.ReadToEnd
    ReturnString = responseFromServer

    'Clean up the streams.
    reader.Close()
    dataStream.Close()
    response.Close()

    Return ReturnString
End Function 
```

这段代码模仿了另一个用 PHP 编写的页面。PHP 代码页可以正常工作，而且我使用的 URL 与 PHP 版本相同，因此我有 99% 的把握确定问题不在服务器端。

我也搜索过关于这个问题的其他帖子，**看来**我在语法方面做的一切都是正确的，但也许我错过了一些小而愚蠢的东西？

有任何想法吗？我已经为此奋斗了几天了。先感谢您。:)

* * *

**编辑：**我一直在使用会话 cookie，并且一直在比较初始登录和实际请求。这是我所拥有的：

```
FIRST:
ORA_WX_SESSION: "1FAA2AB1EF40DF4BC291DD3326F1DC3C596F56CF-2#3"
JSESSIONID: a2c38b128e1e54051a2c95c5a3a1e3a4cb0cb5b7ba74cd260aaec531856d722f.e34SahmMbNaMe34Sa3yPaN8Sc40
XYZCustomerServiceUserName: (login-name)
XYZ: d53f8dcd87b861a61d99ac21ec53bb2b

LAST:
ORA_WX_SESSION: 1FAA2AB1EF40DF4BC291DD3326F1DC3C596F56CF-2#3
JSESSIONID: a2c38b128e1e54051a2c95c5a3a1e3a4cb0cb5b7ba74cd260aaec531856d722f.e34SahmMbNaMe34Sa3yPaN8Sc40 
```

我注意到两件事……首先， ORA_WX_SESSION 的引号被从其中剥离（即使我试图在响应和请求之间强制它们返回）。XYZCustomerServiceUserName 和 XYZ 值也被剥离。除此之外，两次连接尝试之间的会话信息是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:52:05.443

使您注销的东西可以是服务器想要您提供而您没有提供的任何东西。我们使用 System.Net 类进行了一些自动化操作，结果证明您可以做的最好的事情是使用[Watin](http://watin.org/)或[Selenium](http://seleniumhq.org/)。我们正在使用Watin。通过使用这样的工具，您不会受到服务器端的简单更改的影响。

# javascript - 性能效率.... Javascript 中的条件语句与逻辑表达式

> ID：10387219
> 
> 赞同：1
> 
> 时间：2012-04-30T16:35:54.697
> 
> 标签：javascript, performance, loops, conditional

以下哪种方法更高效、更快

1.  嵌套条件

    ```
    if( a == b ) {

      if( b1 == c ) {

        if( c1 == d ) {
        }

      }

    } 
    ```

2.  逻辑表达式

    ```
    if( a==b && b1 == c && c1 == d) {
    } 
    ```

一般来说，上述哪种方法更快，为什么？编写库时应该首选哪一个？我知道在第一种方法中，只有当上面的 if 语句结果为真时才会执行一个块。在第二种方法中，由于条件评估是从左到右的，它也会跳过下一个条件，如果前面的条件是假的..我是对的吗？

如果是这样，这两种方法之间是否有任何性能差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:38:34.497

我怀疑它们之间会有任何显着的性能差异，因为正如您所怀疑的那样，`&&`并且`||`JavaScript 中的短路（因此`b == c`如果`a == b`为 false 并被`&&`使用，则不会执行）并且 JavaScript 不必为输入做任何特定的管道块（因为它还没有块范围变量）。

但是这些事情因实施而异，真正了解的唯一方法是在您的目标引擎上进行测试，如果针对浏览器，可能使用[http://jsperf.com之类的网站。](http://jsperf.com)

* * *

更重要的问题是：**重要吗？**与可读性、可维护性等相反。我想说可读性/可维护性/清晰度将大大胜过任何潜在的性能节省。

另请注意，如果您真的很喜欢这些东西，那么您可能希望在高级模式下使用诸如[Closure Compiler](https://developers.google.com/closure/compiler/)之类的东西，它将对代码进行实际优化（它不仅仅是一个缩小器）。

# android - 使视图在Android布局中占据固定宽度

> ID：10387220
> 
> 赞同：0
> 
> 时间：2012-04-30T16:35:58.357
> 
> 标签：android, android-layout, android-xml

我将此作为布局的一部分：

```
<LinearLayout 
    android:layout_width="fill_parent" 
    android:layout_height="0dip"
    android:orientation="horizontal"
    android:layout_weight="0.15">

        <TextView 
            android:id="@+id/question_text"
            android:layout_width="0dip"
            android:layout_height="fill_parent" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:text="@string/score_label" />

        <TextView
            android:id="@+id/score_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right" />

</LinearLayout> 
```

第一个`TextView`在应用程序开始时为空。它的内容是动态变化的。这使得它占用零空间，以便第二个`TextView`对齐到左侧，即使它`layout_gravity`设置为`right`。

**如何在不考虑内容的情况下使其占据固定宽度？**
我考虑过使用`layout_weight`，但我知道建议反对使用嵌套权重（父级`ViewGroup`有一个`layout_weight`属性）。也许我应该使用`RelativeLayout`?

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:43:36.727

我使用`android:ems="<some number>"`. `TextView`“ems”是字符“M”的宽度。此属性使 TextView 完全符合给定的编号。ems 宽。 [http://developer.android.com/reference/android/widget/TextView.html](http://developer.android.com/reference/android/widget/TextView.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:41:40.733

您已将所有`TextViews`宽度设置为`android:layout_width="wrap_content"`，这意味着如果那里没有任何东西，它将没有宽度。您需要将其设置为`"match_parent"`使其与父容器的宽度相同或将其设置为固定值，例如`android:layout_width="100dp"`.

# extjs - Ext Direct 超时

> ID：10387221
> 
> 赞同：2
> 
> 时间：2012-04-30T16:36:21.443
> 
> 标签：extjs

我正在使用 Ext Direct 与服务器端进行通信。我的服务器端需要超过 45 秒才能将所有数据返回到 extjs。我可以在网络中（在 chrome 浏览器中）看到我的请求被取消，因为操作花费了 30 多秒。

我在哪里可以覆盖此设置？

可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T13:57:34.707

我在 Leo 的回答中了解到他建议直接编辑 ExtJS 代码，我认为这不是一个好习惯，更何况参数存在于`REMOTING_API`：

```
Ext.app.REMOTING_API = {
    "url":"/usermanagement/extdirect/router",
    "actions":{"myService":[{"len":0,"name":"myMethod"}]},
    "type":"remoting",
    "timeout":120
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:01:55.920

在您的 ext-all-debug.js 中，

在下面

```
Ext.define('Ext.data.Connection', { timeout:30000 
```

您可以将超时时间编辑为更高的值，默认值为 30 秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:57:00.183

我很确定这是浏览器的事情。不是 ExtJs 破坏了您的连接尝试，而是浏​​览器本身。

**更新**：我没有尝试过使用 ExtDirect 处理大量数据。老实说 - 你不应该强迫你的用户等待加载这么长时间。这是非常糟糕的设计。如果您有需要那么长时间的事情 - 您需要提供某种进度反馈并将整个沟通分成更小的部分。

# javascript - JQuery淡出淡出太快

> ID：10387227
> 
> 赞同：8
> 
> 时间：2012-04-30T16:36:44.450
> 
> 标签：javascript, jquery, html

我试图让段落标签在 10 秒内淡出，但它的淡出速度比预期的 10 秒快得多。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

<p>
    If you click on this paragraph you'll see it just fade away.
</p>
<script type="text/javascript">
    $("p").click(function () {
        $("p").fadeOut("10000");
    });
</script> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-30T16:38:27.147

去掉引号使其以毫秒为单位工作，否则它将只使用默认值，因为“10000”是一个字符串而不是时间值，它不是像“slow”或“fast”这样的可接受的字符串。

```
$("p").click(function () {
    $("p").fadeOut(10000);
}); 
```

另外，我喜欢引用范围内的内容，例如`this`：

```
$("p").on('click', function () {
    $(this).fadeOut(10000);
}); 
```

[小提琴](http://jsfiddle.net/adeneo/8rmYB/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T16:39:40.800

删除淡出时间周围的引号。如果您使用的是慢速快，则仅引用淡出

```
$("p").click(function () {
    $("p").fadeOut(10000);
}); 
```

对比

```
$("p").click(function () {
    $("p").fadeOut("slow");
}); 
```

[摆弄这两个例子](http://jsfiddle.net/VTwU9/1/)

# objective-c - 我怎样才能获得父实体对象，并且是否可能存在可选关系？

> ID：10387230
> 
> 赞同：0
> 
> 时间：2012-04-30T16:36:50.130
> 
> 标签：objective-c, ios, xcode, core-data

我当前的 Core Data 实现没有任何关系，因此非常糟糕且难以在需要时获取信息。

我要去这种关系：

病人——一对多——>医生——一对多——>时间表

现在假设你有一个`NSManagedObject`from schedules，我如何获取他的父医生管理对象？

我仍然可以单独使用 schedules 实体（与医生没有关系的时间表）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:13:35.473

您可以实现它，但这不是推荐的方法。

1：获取医生对象数组。

2：遍历医生对象，为每个医生对象获取它的时间表数组并遍历每个时间表以找到匹配项。

正确的方法是在时间表和医生之间建立反比关系，这正是 Apple 所说的（没有它，xcode 也会标记警告）！

这是一段代码。在这里，我假设每个计划对象都有一个“scheduleId”，以便识别它们中的每一个。

```
- (NSManagedObjectContext *)getContext {

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *managedObjectContext = [appDelegate managedObjectContext];
    return managedObjectContext;
}

- (NSArray *)getAllDoctors {
    NSManagedObjectContext *managedObjectContext = [self getContext];
    NSEntityDescription *messageEntity = [NSEntityDescription entityForName:@"Doctor" 
                                                 inManagedObjectContext:managedObjectContext];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    [fetchRequest setEntity:messageEntity];

    NSError *error = nil;
    NSArray *allDoctors = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
    return allDoctors;
}
- (Doctor *)pickDoctorScheduledFor:(NSString *)scheduleId {
    NSArray *allDoctors = [self getAllDoctors];

    for (Doctor *doctor in allDoctors) {

        NSArray *schedulesForThisDoctor = [doctor.schedules allObjects]; // one to many relation!
        for (Schedule *schedule in schedulesForThisDoctor) {
            if ([schedule. scheduleId isEqualToString: scheduleId]) {
                return doctor;
            }
        }
    }
    return nil;
} 
```

# api - Foursquare 场地统计数据 - 一站式

> ID：10387235
> 
> 赞同：0
> 
> 时间：2012-04-30T16:36:57.850
> 
> 标签：api, foursquare, rate-limiting

我有一个托管场所的列表。

有一个[场地统计](https://developer.foursquare.com/docs/venues/stats)端点，它允许我获取给定场地的统计数据。

是否有一个 API（现有的或计划的）可以一次性获取所有托管场地的此类统计数据？

如果您有数百个场地，很容易达到速率限制。

而且文件输出不是我们喜欢的——我们更愿意使用 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:48:04.690

目前无法访问一组场地的汇总统计数据，但这是一个很好的建议，我会询问相关团队是否可以考虑支持这种行为。感谢您的反馈！

# asp.net - 如何从 ModalPopupExtender 中的下拉列表中获取值

> ID：10387239
> 
> 赞同：-1
> 
> 时间：2012-04-30T16:37:05.760
> 
> 标签：asp.net, drop-down-menu, modalpopupextender

我有一个modalpopup，它在页面启动时自动显示。我在 Page_Load 事件中这样做。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            InitiallizeAll();
        }
    }

    private void InitiallizeAll()
    {
        ModalPopupExtender1.Show();
    } 
```

在 aspx 方面，我在 modalpopup 上有一个下拉列表，但索引始终将零发布到 javascript 代码中。

```
 <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server"           
                            TargetControlID="lnkPopup"
                            PopupControlID="panEdit" 
                            BackgroundCssClass="modalBackground" 
                            OkControlID="btnGonder"
                            OnOkScript="onOk()">
    </asp:ModalPopupExtender>
<asp:Panel ID="panEdit" runat="server" Height="180px" Width="400px" CssClass="modalPopup">
    <table width="100%">
        <tr>
            <td class="labelCell">
                <asp:Label ID="lblBolge" Text="Bölge" runat="server" />
            </td>
            <td>
                <asp:DropDownList ID="ddlIl" runat="server" 
                                  AutoPostBack="False" 
                                  DataTextField="Isim"
                                  DataValueField="Id" 
                                  DataSourceID="ObjectDataSource1" 
                                  Width="176px">
                </asp:DropDownList>
                <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
                                      SelectMethod="GetAllIl"
                                      TypeName="ERK.Lasos.Business.CustomEntities.Il">
                    <SelectParameters>
                        <asp:QueryStringParameter DefaultValue="0" 
                                                  Name="ilId" 
                                                  QueryStringField="bolge"
                                                  Type="Int32" />
                    </SelectParameters>
                </asp:ObjectDataSource>
            </td>
        </tr> 
    </table>
    <br />
    <asp:Button ID="btnGonder" runat="server" Text="Devam Et" />
</asp:Panel>
<a id="lnkPopup" runat="server">Show Popup</a> 
```

这是我的 javascript 代码

```
 <script type="text/javascript">
        function onOk() {
        var e = document.getElementById("ddlIl");
        var selectedIlId = e.options[e.selectedIndex].value;
        window.location = "/Pages/AnaSayfa/LasosAnaSayfa.aspx?bolge=" + selectedIlId;
        }
        </script> 
```

但我总是让 selectedIlId 为“0”。值不会改变我从下拉列表中选择的任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:45:40.500

首先，您应该检查您是否获得了良好的选择索引。：

暂时替换`var selectedIlId = e.options[e.selectedIndex].value;`为`var selectedIlId = e.selectedIndex;`

如果没问题，您应该通过确保`Id`字段正确来检查您的数据源，最简单的方法是设置`DataTextField="Id"`您的 DropdownList 并检查其中出现的值。

# iphone - 占位符和 ${PRODUCT_NAME:rfc1034identifier}

> ID：10387240
> 
> 赞同：0
> 
> 时间：2012-04-30T16:37:07.757
> 
> 标签：iphone

在提交到苹果商店之前做最后的检查，并注意到一件事：

捆绑标识符设置为 com.overwaitea.${PRODUCT_NAME:rfc1034identifier}，

那样行吗？我之所以问，是因为苹果商店的一条指南说“带有占位符文本的应用程序将被拒绝”...我想知道这是否算作占位符，尤其是 rfc 部分...

我应该用实际名称替换所有 ${PRODUCT_NAME} 等吗？还是建造过程实际上会为我解决？

*更新*“bundle createer os type code”是??????，应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:56:10.337

这将替换`${PRODUCT_NAME:rfc1034identifier}`为项目配置中定义的产品名称。但也许这不是你想要的。也许您在 iTunes 开发者门户中创建了一个不是应用程序名称的应用程序 ID。所以你可以简单地用`${PRODUCT_NAME:rfc1034identifier}`你的应用程序的 id 替换。

但是，如果您更换`${PRODUCT_NAME}`，那么如果以后您希望更改产品的名称（这不是您选择的标识符，而是显示的名称）。您将不得不更换您刚刚更换的任何东西。

# c# - 使用属性将枚举序列化为 JSON.NET 中的字符串

> ID：10387243
> 
> 赞同：8
> 
> 时间：2012-04-30T16:37:15.963
> 
> 标签：c#, json, json.net

我想使用 JSON.NET 使用类似于的属性将枚举序列化为字符串`[JsonIgnore]`

示例类：

```
enum Gender { Male, Female }
class ABC
{
    public Gender { get; set; }
} 
```

如果我使用 JSON.NET 对其进行序列化：

```
var a = new ABC();
var str = JsonConvert.SerializeObject(a); 
```

`str`设置为`{Gender:0}`，我更喜欢`{Gender:Male}`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T16:55:31.650

看看`[JsonConverter(typeof(StringEnumConverter))]`。应该做你想做的。

**编辑： http:** [//james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_Converters_StringEnumConverter.htm](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_Converters_StringEnumConverter.htm)提供了一些信息。

# java - 接口内的类

> ID：10387259
> 
> 赞同：0
> 
> 时间：2012-04-30T16:38:26.367
> 
> 标签：java

我正在尝试开发一个接口，该接口将包含静态类

```
class C1 {

    static interface I // A static interface or class can contain static members.Static members can be
    //accessed without instantiating the particular class
    {

        static class C2 {
        }
    }

    public static void main(String a[]) {
        C1.I.C2 ob1 = new C1.I.C2();
        System.out.println("object created");
    }
} 
```

但我的疑问是接口可以包含非静态的类，如果是，那么它们的对象将如何创建，请告知。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:43:37.267

> 接口可以包含类吗？

是的。例如，在

```
interface Widget {
  static class Factory {
    static Widget create() { return new Widget() {}; }
  }
} 
```

内部类可以访问为

```
Widget w = Widget.Factory.create(); 
```

所以要引用内部类，您可以只使用接口名称，然后是一个点，然后是内部类名称

```
import my.pkg.MyInterface;

...

  MyInterface.InnerClass ic = new MyInterface.InnerClass(); 
```

# javascript - 在 ajax-requests 中删除 http 引用主机和有关站点的其他信息

> ID：10387267
> 
> 赞同：0
> 
> 时间：2012-04-30T16:38:42.920
> 
> 标签：javascript, jquery, ajax

在进行ajax请求时，有什么方法可以删除当前站点的引用者或主机或其他信息？

这是我到目前为止用 jQuery 尝试过的：

```
$.ajax({
    type: "POST",
    url: $.appData.edit_item_ajax_url,
    data: ajax_params,
    beforeSend: function(jqXHR, settings) {
        jqXHR.setRequestHeader('Host', 'This gets owerwritten');
        jqXHR.setRequestHeader('Referer', 'This gets owerwritten');
        jqXHR.setRequestHeader('Test-param', 'This is fine...');
    }
}).done(function( msg ) {
    debug( "Data Saved: " + msg );
}); 
```

但遗憾的是，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:02:57.133

用 javascript 是不可能的。您始终可以使用代理。

# php - PHP从变量中获取字符串并避免引用

> ID：10387268
> 
> 赞同：0
> 
> 时间：2012-04-30T16:38:44.450
> 
> 标签：php, string, session

我首先要提一下，我不是在寻找替代方法。我实际上想尝试弄清楚如何解决这个问题。我相信很多人都熟悉这段代码：

```
$pageURL = 'http';
if ($_SERVER["HTTPS"] == "on") 
{
   $pageURL .= "s";
}
   $pageURL .= "://";

if ($_SERVER["SERVER_PORT"] != "80") 
{
   $pageURL.=_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
}
else {
   $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
} 
```

此代码获取使用它的当前页面的 URL。我想要做的是从 URL 中获取一个字符串并将其放入会话中。我试过使用这样的代码：

```
$_SESSION['pageURL']=$pageURL;

//and

$_SESSION['pageURL']= (string)$pageURL; 
```

到目前为止，我所有的努力都没有结果，任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:41:50.470

> $_SESSION['pageURL']=$pageURL; //显然行不通

这实际上工作得很好......确保你已经调用了[session_start()](http://php.net/manual/en/function.session-start.php)？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T16:41:57.393

`$pageURL`已经是一个字符串，所以：

```
$_SESSION['pageURL']=$pageURL; 
```

应该可以正常工作。

你在`session_start()`某处使用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:41:55.133

session_start(); $_SESSION['pageURL']=$pageURL;

# xcode - 导航视图中的 TabBar selectedindex 按钮

> ID：10387275
> 
> 赞同：0
> 
> 时间：2012-04-30T16:39:19.660
> 
> 标签：xcode, cocoa-touch, uitabbarcontroller

我有一个带有 tabBar 的应用程序，我想使用调用的 UIViewControllers 上的按钮来设置选定的索引。

tabBar 是在情节提要中创建的，所以我的层次结构如下所示：

```
mainTabBarController Scene
  First Reponder
  mainTabBarController
    mainTabBar
  multiple relationships for the proper ViewControllers 
```

这个想法是这样的：

选项卡 A       *       选项卡 B       *       选项卡 C       *       选项卡 D*
    | | | |
navCon1 navCon2 navCon3 navCon4

我想要一个按钮（如 1-4 所示，已经正确调用）导航控制器，它将使用按钮将父 TabBarController 的 selectedIndex 设置为 ABC 或 D。我尝试务实地添加按钮，但我不明白如何引用 tabBarBontroller 以强制更改所选索引：

**这很好用，因为我有一个名为 refreshPage 的函数**

```
UIBarButtonItem *refreshButton = [[UIBarButtonItem alloc]
                              initWithMarButtonStyleItem:UIBarButtonSystemItemRefresh target:self;
                              action:@selector(refreshPage:)
                              ]; 
```

**这不起作用，因为我可能不正确地引用父 tabBarController**

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc]
                              initWithMarButtonStyleItem:UIBarButtonSystemItemCancel target:self;
                              action:[self.tabBarController selectedIndex:1]
                              ]; 
```

我给 tabBarController 起了一个名字，里面的 tabBar .. 但我似乎也不能用这些名字来引用它们。任何建议将不胜感激。

这只是我遇到的一个问题，因为当我转到另一个选项卡时，我还希望 TabBar 子项默认返回主选项卡（或父视图控制器），这样当我在 TAb A 上并导航到控制器 1 或 1a 时等，如果我转到选项卡 B，选项卡 A 将自动恢复到其层次结构的顶部......但这是另一个问题:)

谢谢银虎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:50:48.470

使用第一种方法并在“refreshPage”方法中调用[self.tabBarController selectedIndex:1]。

# package-managers - Gentoo ebuild 使用带有 '*' 的标签

> ID：10387282
> 
> 赞同：1
> 
> 时间：2012-04-30T16:39:52.497
> 
> 标签：package-managers, gentoo

我使用emerge来检查ebuild的状态，我得到了这个：

```
gentoo ~ # emerge -pv libvirt

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R    ] app-emulation/libvirt-0.9.10-r4  USE="libvirtd lxc nls policykit python udev -avahi* -caps -debug -iscsi -lvm -macvtap -nfs -numa -openvz -parted -pcap -phyp -qemu -sasl* (-selinux) -uml -virt-network* -virtualbox* -xen" 0 kB 
```

USE 标签 avahi*, virt-network*, sasl*, virt-network* virtualbox* ，这些标签中的“*”是什么意思。谢谢。我认为这些软件包已经安装。对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:53:38.957

只需查看手册页： http: [//linuxreviews.org/man/emerge/](http://linuxreviews.org/man/emerge/)一切都在那里解释。

'R' 代表：rebuild（已经安装了特定版本的包）

'*' 代表：从/到启用状态的改变' - 如果使用标志改变了，portage 会提示你重建包，因为使用标志可能对包的功能有重大影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T00:49:20.310

与您当前安装的 libvirt 相比，这个新的emerge 将删除 avahi 模块。

这可能来自几种可能性：

*   make.conf 使用中的变化
*   /etc/portage/package.use 中的更改
*   更改个人资料
*   以前使用强制 USE 标志编译的 libvirt（即 USE="avahi"emerge libvirt）

# java - 如何使用其键获取 LinkedHashMap 中键/值的位置

> ID：10387290
> 
> 赞同：38
> 
> 时间：2012-04-30T16:40:36.910
> 
> 标签：java, linkedhashmap

我有一个`LinkedHashMap`（称为信息），其中包含名称/年龄（字符串/整数）对。如果我输入键，如何获得键/值的位置？例如，如果我`LinkedHashMap`看起来像这样`{bob=12, jeremy=42, carly=21}`并且我要搜索`jeremy`，它应该返回`1`位置 1。我希望我可以使用类似`info.getIndex("jeremy")`.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-30T16:43:10.313

`HashMap`一般来说，实现是无序的`Iteration`。

`LinkedHashMap`可**预测**地为`Iteration`（插入顺序）排序，但不公开`List`接口，并且 a `LinkedList`（这反映了键集插入顺序）本身也不跟踪索引位置，查找索引也非常低效。`LinkedHashMap`也不公开对内部的引用`LinkedList`。

> 实际的*“链接列表”*行为是特定于实现的。有些人可能实际上使用了`LinkedList`一些实例，其中许多只是 `Entry`跟踪前一个和下一个`Entry`并将其用作其实现。不看源头就不要假设任何事情。

包含键的`KeySet`也不能保证顺序，因为散列算法用于放置在继承的支持数据结构中`HashMap`。所以你不能使用它。

在不编写自己的实现的情况下执行此操作的唯一方法是遍历`Iterator`使用镜像的对象`LinkedList`并记录您所在的位置，这对于大型数据集将非常低效。

**解决方案**

听起来您想要的是**原始插入顺序索引位置**，您必须镜像 in 中的键，`KeySet`例如 an `ArrayList`，使其与更新同步`HashMap`并使用它来查找位置。创建一个子类`HashMap`，比如说`IndexedHashMap`并在内部添加这个，然后在`ArrayList`内部添加一个`.getKeyIndex(<K> key)`代表`ArrayList` `.indexOf()`可能是解决这个问题的最好方法。

这就是所做`LinkedHashMap`的，但使用`LinkedList`镜像`KeySet`而不是`ArrayList`.

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-04-22T06:31:29.940

```
int pos = new ArrayList<String>(info.keySet()).indexOf("jeremy") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-19T03:08:38.463

我从这个问题的副本之一看到了一个建议

[如何根据索引而不是键从 LinkedHashMap 获取值？](https://stackoverflow.com/questions/13581997/how-get-value-from-linkedhashmap-based-on-index-not-on-key)

我喜欢评论中@schippi 中描述为伪代码的建议。我认为一些有效的 Java 代码可能对其他人有用

```
import java.util.ArrayList;
import java.util.LinkedHashMap;

public class IndexedLinkedHashMap<K,V> extends LinkedHashMap<K,V> {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    ArrayList<K> al_Index = new ArrayList<K>();

    @Override
    public V put(K key,V val) {
        if (!super.containsKey(key)) al_Index.add(key);
        V returnValue = super.put(key,val);
        return returnValue;
    }

    public V getValueAtIndex(int i){
        return (V) super.get(al_Index.get(i));
    }

    public K getKeyAtIndex(int i) {
        return (K) al_Index.get(i);
    }

    public int getIndexOf(K key) {
        return al_Index.indexOf(key);
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-09T10:09:13.143

考虑到 LinkedHashMap 保持插入顺序，您可以像这样使用 keySet() 和 List.copyOf() （从 Java 10 开始）方法：

```
List<String> keys = List.copyOf( yourLinkedHashMap.keySet() );

System.out.println( keys.indexOf("jeremy") ); // prints '1' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T16:57:05.997

LinkedHashMap 具有“可预测的迭代顺序”（[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)）。但是，项目不知道它们的位置，因此您必须迭代集合才能获得它。如果您要维护大型地图，您可能希望使用不同的存储结构。

编辑：澄清迭代

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-08T17:51:21.613

您可以[`com.google.common.collect.LinkedListMultimap`](http://google.github.io/guava/releases/snapshot/api/docs/index.html?com/google/common/collect/Multimap.html)从**Google Guava library**使用。您不需要此类的多映射行为您想要的是该`keys()`方法保证它们按插入顺序返回，然后可以用于构造一个 List，您可以使用`indexOf()`找到所需的索引位置

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-17T13:34:47.680

我确实将键的位置提取到这样的并发映射中：

对于 Map，someListOfComplexObject() 将是 entrySet()，而 getComplexStringKeyElem() 将是 getKey()

可能来自

```
 final int[] index = {0};
 Stream<ComplexObject> t = someListOfComplexObject.stream();
 ConcurrentMap<String, List<Integer>> m = 
      t.collect(Collectors.groupingBy(
           e -> e.getComplexStringKeyElem(),
           Collectors.mapping(
                e -> index[0]++,
                Collectors.toList()
           ),
           ConcurrentSkipListMap::new)); 
```

# php - 将 PHP 变量动态传递给 AJAX JavaScript 函数

> ID：10387297
> 
> 赞同：1
> 
> 时间：2012-04-30T16:41:25.977
> 
> 标签：php, javascript, ajax, forms, variables

我有一个 JavaScript 函数（该论坛上的用户慷慨地帮助我构建），它通过 POST 将变量传递到 PHP 文件，其中包含用于将数据插入 MySQL 数据库的查询。

对于从 MySQL 数据库中吐出的一系列 2000 多行，该函数被调用“onchange”。我使用行的 ID 为每个表单字段提供唯一的名称/ID，如下所示：

```
echo "=<select name='$AdvertisersSQLResult[id]geolocation' id='$AdvertisersSQLResult[id]geolocation' onchange = 'insertAdvertiser()'>"; 
```

JavaScript 函数如下所示：

```
function insertAdvertiser() {
var data = $('#<?php echo $AdvertisersSQLResult[id]?>dataid,#<?php echo $AdvertisersSQLResult[id]?>industry,#<?php echo $AdvertisersSQLResult[id]?>geolocation').serialize();
$.post('/database/InsertAdvertiserRelationship2.php', data);
return false;
} 
```

如您所见，我试图将 PHP 变量作为表单 id 值的一部分传递。但是，这不起作用，因为该函数被写入页面一次（在该部分中），而尚未填充任何变量。

换句话说，我想让这个 JavaScript 函数利用动态传递给它的任何 PHP 变量。我查看了有关将 PHP 变量传递给 JavaScript 函数的其他线程，但我找不到任何关于如何动态完成此操作的参考，因此 JavaScript 函数每次都会更改为使用不同的 PHP 变量（如果说得通）。

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:48:57.570

您可以创建一个全局 JavaScript 变量并在脚本中使用它。

```
<script type="text/javascript">
   myVariable = <?php echo $x; ?>;
</script> 
```

您可以将变量存储在某个地方，然后通过 JavaScript 访问它们。

```
<input type="hidden" class="myVariable" value="<?php echo $x; ?>"

<script type="text/javascript">
   var myVar = $('.myVariable').val();
</script> 
```

在 JavaScript 中获得数据后，您可以使用它做任何您想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:50:08.400

好吧，是的，因为您需要`insertAdvertiser()`为系统上的每个广告商使用单独的方法。

一个更好的方法是这样做：Javascript：

```
// This line turns your PHP array into a Javascript object
var advertisers = <?php echo json_encode($AdvertiserSQLResult); ?>; 

function insertAdvertiser(id) {
 $.post('/database/InsertAdvertiserRelationship2.php', advertisers[id]);
}

// Try not to use attributes to bind events, use handlers like this instead.
$(document).ready(function() {
 $('select').on('change', function() {
   // Reads the advertiser id from the data attribute
   insertAdvertiser($(this).data('advertiserid'));
 });
}); 
```

HTML：

```
<select data-advertiserid="<?php echo $AdvertiserSQLResult['id']; ?> class="advertiser-select">...</select> 
```

我一边写一边写，如果我忽略了一些东西，我深表歉意。

看：

*   [jQuery 数据](http://api.jquery.com/jQuery.data/)
*   [jQuery .on()](http://api.jquery.com/on/)

# asp.net - 对象引用未设置为 Session 中对象的实例

> ID：10387298
> 
> 赞同：-2
> 
> 时间：2012-04-30T16:41:26.433
> 
> 标签：asp.net, linq, session

我在这行代码中遇到错误`Session.Linq<Employees>()`：

> " 非静态字段、方法或属性 'System.Web.UI.Page.Session.get' 需要对象引用。

这是我的代码：

```
 public static object GetData(Dictionary<string, object> tableParams)
        {
            IQueryable<Employees> Employee = Session.Linq<Employees>();
            if (tableParams.ContainsKey("sEcho")) 
            {
                var parser = new DataTableParser<Employees>(tableParams, Employee);
                return parser.Parse();
            }
            return Employee;
        } 
```

如果我使用 `HttpContext.Current.Session.Linq<Employees>();` ，那么我得到：

> “System.Web.SessionState.HttpSessionState”不包含“Linq”的定义，并且找不到接受“System.Web.SessionState.HttpSessionState”类型的第一个参数的扩展方法“Linq”

我需要做什么才能让它工作？我是否缺少关于 Session 的 Linq 命名空间？我正在使用`System.Linq`and `System.Linq.Expression`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:01:28.680

我认为你误解了一些东西。您尝试做的事情与 Linq 没有任何关系，至少在从会话中检索对象的上下文中没有。

您需要从会话中检索对象并将其拆箱：

```
var list = Session["MyList"] as List<int>;
if (list != null)
{
    //the list was found and you can start using it here
} 
```

# c# - 如何以编程方式启用远程桌面连接？

> ID：10387299
> 
> 赞同：3
> 
> 时间：2012-04-30T16:41:29.580
> 
> 标签：c#, remote-desktop, rdp

我正在尝试创建一个小应用程序来设置新的 Windows 7 系统。这本质上是为了让我可以制作所有设置完好无损的硬盘驱动器图像。

我将如何从 C# 启用远程桌面？

我觉得很有趣，每个人都在抨击我，但没有人回答这个问题，sysprep 无法完成我在设置映像时需要的所有必要操作。我想启用 RDP 不运行它。我将更改注册表项并添加防火墙设置。

我将需要此图像在多个硬件上执行。

这是我需要完成的任务清单。

静态 IP 地址，取决于计算机。更改文件夹权限，取决于域。更改计算机名称 安装 Rysnc 服务器 安装自定义应用程序 安装自定义服务 防火墙权限 驱动程序 禁用交互式登录 更改日期 时间 取决于要发送系统的位置 激活 Windows 组策略设置。

我不认为 sysprep 可以做所有这些事情吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-30T16:51:10.330

我在以前的项目中使用了以下内容，它似乎运行良好：

```
 try
        {
            RegistryKey key = RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, TargetMachine.Name);
            key = key.OpenSubKey(@"SYSTEM\CurrentControlSet\Control\Terminal Server", true);
            object val = key.GetValue("fDenyTSConnections");
            bool state = (int)val != 0;
            if (state)
            {
                key.SetValue("fDenyTSConnections", 0, RegistryValueKind.DWord);
                MessageBox.Show("Remote Desktop is now ENABLED");
            }
            else
            {
                key.SetValue("fDenyTSConnections", 1, RegistryValueKind.DWord);
                MessageBox.Show("Remote Desktop is now DISABLED");
            }
            key.Flush();
            if (key != null)
                key.Close();
        }
        catch
        {
            MessageBox.Show("Error toggling Remote Desktop permissions");
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T16:46:43.803

最好使用 windows [Sysprep](http://support.microsoft.com/kb/302577)自带的工具。它将做的是准备系统，以便您可以进行所需的所有设置，运行`sysprep`，然后关闭计算机并制作映像。（[这里是](http://technet.microsoft.com/en-us/windows/ee530017)关于如何使用 Sysprep 和 ImageX 的视频教程，这两个 Windows 工具旨在完全按照您的要求进行操作）

当您第一次启动映像时，它将通过“设置 Windows”屏幕输入计算机名称等内容（或者您可以放入一个 xml 文件以跳过该步骤并预先填写该信息）。

这样做的一个重要原因是（[我自己也被咬了](https://serverfault.com/questions/360863/domain-user-invisable-on-local-remote-desktop-users-group)，这就是我了解该工具的方式）如果您使用的是域，那么每台机器的 RID 都将相同，这将与您的 AD 系统发生冲突。

* * *

> 这是我需要完成的任务清单。
> 
> 静态 IP 地址，取决于计算机。更改文件夹权限，取决于域。更改计算机名称 安装 Rysnc 服务器 安装自定义应用程序 安装自定义服务 防火墙权限 驱动程序 禁用交互式登录 更改日期 时间 取决于要发送系统的位置 激活 Windows 组策略设置。

所有这些东西都可以放在`unattend.xml`答案文件中并进行设置。 [这是一个非视频教程](http://theitbros.com/sysprep-a-windows-7-machine-%E2%80%93-start-to-finish)，向您展示如何创建`unattend.xml`文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-03T13:51:41.187

此代码在注册表中设置了 3 个不同的值：（我发现 SysTracer v2.6 的注册表更改）

```
 AllowRemoteAssistance = true;
            RemoteDesktopSelectNumber = 2;
            RegistryKey key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Default);
            key = key.OpenSubKey(@"SYSTEM\CurrentControlSet\Control\Remote Assistance", true);
            if (AllowRemoteAssistance)
                key.SetValue("fAllowToGetHelp", 1, RegistryValueKind.DWord);
            else
                key.SetValue("fAllowToGetHelp", 0, RegistryValueKind.DWord);
            key.Flush();
            if (key != null)
                key.Close();

            if (RemoteDesktopSelectNumber == 1 || RemoteDesktopSelectNumber == 2)
            {
                key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Default);
                key = key.OpenSubKey(@"SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp\", true);
                key.SetValue("UserAuthentication", 0, RegistryValueKind.DWord);
                key.Flush();
                if (key != null)
                    key.Close();

                key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Default);
                key = key.OpenSubKey(@"SYSTEM\CurrentControlSet\Control\Terminal Server", true);
                if (RemoteDesktopSelectNumber == 1)
                    key.SetValue("fDenyTSConnections", 1, RegistryValueKind.DWord);
                else
                    key.SetValue("fDenyTSConnections", 0, RegistryValueKind.DWord);
                key.Flush();
                if (key != null)
                    key.Close();
            }
            else if (RemoteDesktopSelectNumber == 3)
            {
                key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Default);
                key = key.OpenSubKey(@"SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp\", true);
                key.SetValue("UserAuthentication", 1, RegistryValueKind.DWord);
                key.Flush();
                if (key != null)
                    key.Close();
            } 
```

# yii - Yii cgridview 参考复选框

> ID：10387301
> 
> 赞同：1
> 
> 时间：2012-04-30T16:41:36.973
> 
> 标签：yii

因为在表单中将 CCheckBoxColumn 添加到我的 vgridview 时，作为回报，我没有用于处理复选框数据的精确索引。因此，我尝试添加“uncheckValue”，但无法将其链接到表的参考值。有没有办法访问当前行的这个值？（我的代码中的 $data->reference 返回一个未定义的变量）。

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'gview',
'dataProvider'=>$dataProvider,
'columns'=>array(
    'client',
    'reference',
    array(
        'class'=>'CCheckBoxColumn',
        'id'=>'CB',
        'selectableRows'=>2,
        'checkBoxHtmlOptions'=>array(
            'uncheckValue'=>$data->reference, ),

    )),)); 
```

Tks 任何人都可以让我上路（如果有的话......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:07:54.403

我终于找到一种方法是扩展CCheckBoxColumn。在这段代码中，我可以访问 $data。现在我的表单返回复选框，他的“名字”作为我表的“参考”列，所以我可以做进一步的批处理。uncheckValue 隐藏字段不适合，因为它只为未选中字段（！）提供索引。

我相信这段代码不应该留在视图中，而是在扩展中......仍然欢迎任何评论......

```
Yii::import('zii.widgets.grid.CCheckBoxColumn');
class LIndexCheckBoxColumn extends CCheckBoxColumn {

public $linkId; 

public function renderDataCellContent($row,$data)
    {
    if($this->value!==null)
        $value=$this->evaluateExpression($this->value,array('data'=>$data,'row'=>$row));
    else if($this->name!==null)
        $value=CHtml::value($data,$this->name);
    else
        $value=$this->grid->dataProvider->keys[$row];

    $checked = false;
    if($this->checked!==null)
        $checked=$this->evaluateExpression($this->checked,array('data'=>$data,'row'=>$row));

    $options=$this->checkBoxHtmlOptions;
    //$name=$options['name'];
    $varLink=$this->linkId;
    $name=$data->$varLink;
    unset($options['name']);
    $options['value']=$value;
    $options['id']=$this->id.'_'.$row;
    echo CHtml::checkBox($name,$checked,$options);
}

    }

$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        'client',
        'reference',
        array(
            'class'=>'LIndexCheckBoxColumn',
            'id'=>'cb',
            'selectableRows'=>2,
            'linkId'=>'reference',
    )),)); 
```

# php - 如何从给定的值php中获取特定的参数值

> ID：10387304
> 
> 赞同：1
> 
> 时间：2012-04-30T16:41:45.633
> 
> 标签：php

如果 $url = 'http://yalumalu.com/watch_video.php?v=UXNWH2YA43RU'; 是我的网址，

如何在参数“V=”中获取值？

我尝试使用explode url，但它返回一个空值？帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:43:35.040

编辑考虑@Brad建议

```
$pos = strpos($url,'?') + 1;

parse_str(substr($url,$pos),$arg);
echo $arg['v']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:46:24.353

您是否尝试过 parse_url：

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

```
<?php
$url = 'http://username:password@hostname/path?arg=value#anchor';

print_r(parse_url($url));

echo parse_url($url, PHP_URL_PATH);
?> 
```

应该给

```
Array
(
    [scheme] => http
    [host] => hostname
    [user] => username
    [pass] => password
    [path] => /path
    [query] => arg=value
    [fragment] => anchor
)
/path 
```

所以你想要这样的东西：

```
$parsedUrl = parse_url($url);

var_dump($parsedUrl['query']);

$result = explode('=', $parsedUrl['query']);

$v = $result[1];

var_dump($v); 
```

哪个应该输出

```
UXNWH2YA43RU 
```

# android - 永久更改按钮图像

> ID：10387307
> 
> 赞同：0
> 
> 时间：2012-04-30T16:41:54.900
> 
> 标签：android, button, sharedpreferences

我有一个 TableLayout，每个 TableRow 中有很多按钮。在 XML 中，每个按钮如下所示：

```
<Button
        android:id="@+id/a1"
        android:text="Button1" 
        android:textColor="#FFFFFF"
        android:textSize="10sp" 
        android:background="#000000"
        android:drawableTop="@drawable/image1" /> 
```

在我的应用程序中，我在 Activity 中有一个选项，用于“添加到收藏夹”按钮。问题是，我怎样才能永久更改按钮图像（即使用户离开应用程序），直到用户再次按下选项（从收藏夹中删除）？我想我必须使用 sharedpreferences，但我不知道该怎么做。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:56:06.310

`SharedPreference`只是一个文件，您可以从中保存和检索值。以下是在活动中使用 a 的最简单步骤`SharedPreference`：

您需要创建一个`sP`指向`SharedPreferences`您将使用的文件的变量：

```
 SharedPreferences sP = getSharedPreferences("MyPrefs", MODE_PRIVATE); 
```

您需要创建一个变量，该变量`sPeD`将指向该文件的“编辑器”，这将使您可以将值放入该文件：

```
 SharedPreferences.Editor sPeD = sP.edit(); 
```

然后，您可以从该文件中提取存储的值。这些值由`String`您定义的“键”索引：

```
 String myString = sP.getString("keyTextYouDefine", "Oops!"); 
```

如果 key处没有存储值，`"keyTextYouDefine"`则等于。`getString()``myString``"Oops!"`

为了存储该键的值，请使用以下命令：

```
 sPeD.putString("keyYouDefine","The string I want to save.");
    sPeD.commit(); 
```

如果您`commit()`在将内容放入文件后忘记执行操作，那么它们实际上并没有放在那里。

这应该会让你顺利上路。

稍后添加：

然后，您可以使用它来确定按钮上的图像。

假设您已经正确定义了您的按钮

```
Button button = findViewById(R.id.myButton) // or whatever you are actually using 
```

然后从任何地方设置图像，如果有任何东西存储在`ShardPreference`

```
 int which = sP.getInt("WhichImage", 1); // assuming image1 is the "default"
    switch (which) {
        case 1:
            button.setCompoundDrawables(null, @drawable/image1, null, null);
            break;
        case 2:
            button.setCompoundDrawables(null, @drawable/image2, null, null);
            break;
        default: // no image
    } 
```

在您的活动的其他地方，当您决定将按钮图像切换到 image2 时：

```
 if (whatever) {  // condition for changing to image 2
        button.setCompoundDrawables(null, @drawable/image2, null, null);
        sP.edit().putInt("WhichImage", 2).commit();
    } 
```

我从未使用过`setCompoundDrawables()`自己，因此您的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:54:07.843

Shared Preference 用于显而易见的用途。

您可以从此处[链接 1](https://stackoverflow.com/questions/5734721/android-shared-preferences)、[链接 2](http://saigeethamn.blogspot.in/2009/10/shared-preferences-android-developer.html)、[开发人员站点获取有关共享首选项的教程](http://developer.android.com/guide/topics/data/data-storage.html#pref)

您需要实施的事情如下。

将字符串存储在共享首选项中。将其命名为 buttonImageData。使用媒体存储类查找使用 MediaStore.Audio.Media._ID 存储的所有歌曲的 _id。

将所有这些 id 存储在一个整数数组中。然后，当应用程序关闭时，将所有具有标记符号的歌曲的 _id 存储在以“”（空格）作为分隔符的字符串中。简单的 for 循环和字符串追加功能就可以解决。

再次启动应用程序时，获取 sharedpreference 中的字符串。使用以下代码获取所有歌曲的 _id

生成的字符串类似于 buttonImageData= *"23 43 42 54 12 567 653 234 543"* 在 android 中，Mediaprovider 提供了一个数据库，其中歌曲始终具有唯一且永久的 _id，因此跟踪 _id 将有助于使应用程序健壮，甚至如果歌曲文件的名称或任何属性被更改。

```
StringTokenizer st = new StringTokenizer(buttonImageData);
     while (st.hasMoreTokens()) {
         array[i++]=Integer.parseInt(st.nextToken());
     } 
```

现在很简单，您拥有由用户标记的所有歌曲的所有 _id 的数组。所以更新按钮

我希望你得到这个。如果有任何疑问询问。据我所知，这是最有效的方法。

# oracle9i - oracle外连接查询

> ID：10387310
> 
> 赞同：1
> 
> 时间：2012-04-30T16:42:07.350
> 
> 标签：oracle9i

我有 3 个 oracle 表。A 连接到 B，B 连接到 C。我想要 A 中的所有记录，而不管 B 或 C 中是否存在相应的记录。我写了一个这样的查询：

```
select a.name from a,b,c where a.a_id = b.b_id(+) and b.b_id = c.c_id(+) 
```

这个查询对我来说似乎不正确，尤其是在第二次加入时。如果 A 中有记录但 B 和 C 中没有相应的记录，会发生什么？它还会获取记录吗？

出于某种原因，上面的查询返回的记录数与`select a.name from a` 所以我猜这个查询是对的？还有更好的方法来重写查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:44:26.667

我认为更好的查询可以是

```
Select a.name from A a left join B b on a.a_id=b.b_id inner join C c on b.b_id=c.c_id 
```

这应该给出你所期望的结果

[http://rajanmaharjan.com.np](http://rajanmaharjan.com.np)

# java - 如何从（内部）https 页面抓取 html 内容

> ID：10387311
> 
> 赞同：0
> 
> 时间：2012-04-30T16:42:07.777
> 
> 标签：java, html, web-scraping

我正在尝试将源下载到我的 Intranet 上的页面。我无需显式登录即可访问所有浏览器上的页面。

当我尝试使用下面的代码来获取页面内容时，它会失败并显示以下错误代码：

```
public scrape() throws IOException{

    String httpsURL = "https://myurl.aspx";
    URL myurl = new URL(httpsURL);
    HttpsURLConnection con = (HttpsURLConnection)myurl.openConnection();
    InputStream ins = con.getInputStream();  //breaks here
    InputStreamReader isr = new InputStreamReader(ins);
    BufferedReader in = new BufferedReader(isr);

    String inputLine;

    while ((inputLine = in.readLine()) != null)
    {
        System.out.println(inputLine);
    }

    in.close();

} 
```

错误：线程“主”java.io.IOException 中的异常：服务器返回 HTTP 响应代码：500 用于 URL：[https://myurl.aspx](https://myurl.aspx)

它专门打破在线 -> InputStream ins = con.getInputStream();

我不确定如何纠正这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:32:39.510

首先要做的是，作为他/她的评论中的nsfyn55，使用浏览器检查您的标题。有些网站会在返回响应之前检查用户代理 HTTP 标头。第二件事是，在使用 HTTPS 时，您需要正确初始化安全层。检查这个类：

```
public class SSLConfiguration {

    private static boolean isSslInitialized = false;
    private static final String PROTOCOL = "SSL";
    public static boolean ACCEPT_ALL_CERTS = true;

    public static void initializeSSLConnection() {
        if (!isSslInitialized) {
            if (ACCEPT_ALL_CERTS) {
                initInsecure();
            } else {
                initSsl();
            }
        }
    }

    private static void initInsecure() {
        TrustManager[] trustAllCerts = new TrustManager[]{
            new X509TrustManager() {

                @Override
                public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                    return null;
                }

                @Override
                public void checkClientTrusted(
                        java.security.cert.X509Certificate[] certs, String authType) {
                }

                @Override
                public void checkServerTrusted(
                        java.security.cert.X509Certificate[] certs, String authType) {
                }
            }
        };

        // Install the all-trusting trust manager
        try {
            SSLContext sc = SSLContext.getInstance(PROTOCOL);
            sc.init(null, trustAllCerts, new java.security.SecureRandom());
            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
        } catch (Exception e) {
        }
        HttpsURLConnection.setDefaultHostnameVerifier(
                new HostnameVerifier() {

                    @Override
                    public boolean verify(String string, SSLSession ssls) {
                        return true;
                    }
                });
        isSslInitialized = true;
    }

    private static void initSsl() {
        SSLContext sc = null;
        try {
            sc = SSLContext.getInstance(PROTOCOL);
        } catch (NoSuchAlgorithmException ex) {
            throw new RuntimeException(ex);
        }
        try {
            sc.init(null, null, new SecureRandom());
        } catch (KeyManagementException ex) {
            throw new RuntimeException(ex);
        }
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
        HostnameVerifier hv = new HostnameVerifier() {

            @Override
            public boolean verify(String urlHostName, SSLSession session) {
                /* This is to avoid spoofing */
                return (urlHostName.equals(session.getPeerHost()));
            }
        };

        HttpsURLConnection.setDefaultHostnameVerifier(hv);
        isSslInitialized = true;
    }
} 
```

连接很可能会失败 - 特别是如果网站没有正确的证书。在您的代码中，在您的类的构造函数中，插入以下代码：

```
SSLConfiguration.initializeSSLConnection(); 
```

还有一些需要考虑的事情 - 在`openConnection`建议您添加以下内容之后：

```
con.setRequestMethod(METHOD);
con.setDoInput(true);
con.setDoOutput(true);
con.setUseCaches(false); 
```

但是，我倾向于相信，由于您从远程服务器获得响应，因此更多的是指定正确的标头，尤其是`User-Agent`和`Accept`. 如果上述方法不能帮助您解决问题，请打印出错误的堆栈跟踪并读取错误流（来自远程）以获得更有意义的错误消息。如果您使用 Firefox，[Live HTTP Headers](https://addons.mozilla.org/en-US/firefox/addon/live-http-headers/)是一个非常方便的解决方案。在处理 HTTP 请求时，[cURL也是最重要的命令行工具。](http://curl.haxx.se/)

# javascript - 检测输入类型=“日期”是否支持占位符

> ID：10387313
> 
> 赞同：5
> 
> 时间：2012-04-30T16:42:27.850
> 
> 标签：javascript, jquery, html, modernizr

是否可以检测浏览器是否支持`input type="date"`with `placeholder`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T16:53:03.660

W3 验证器说占位符属性在日期输入上无效。验证此 HTML：

```
<!doctype html>
<title>date placeholder test</title>
<input type="date"  placeholder="enter a date"> 
```

给出错误：“ `Attribute placeholder not allowed on element input at this point.`” ...并说您可以使用属性“ `placeholder when type is text, search, url, tel, e-mail, password, or number`”。

此外，Chrome 不会显示日期输入的占位符，即使它认为 JS 中存在该属性（这大致是 Modernizr 检查属性的方式）：

```
var test = document.createElement(element);
test.type = 'date';
alert('placeholder' in test); 
```

# javascript - 根据选择添加价值

> ID：10387314
> 
> 赞同：0
> 
> 时间：2012-04-30T16:42:33.467
> 
> 标签：javascript, html

如何根据上面下拉框中的用户选择将“变量值”添加到我的文本区域。

这是我到目前为止的代码：

```
<html>
<head>

<body>

<select id="dropdown">
    <option value="">None</option>
    <option value="textArray1">text1</option>
    <option value="textArray2">text2</option>
    <option value="textArray3">text3</option>
    <option value="textArray4">text4</option>
</select>

<br /><br />

<textarea id="mytext"></textarea>

<script type="text/javascript">

var textArray1 = 'this is going to be a long sting of text for text 1 value';
var textArray2 = 'this is going to be a long sting of text for text 2 value';
var textArray3 = 'this is going to be a long sting of text for text 3 value';
var textArray4 = 'this is going to be a long sting of text for text 4 value';

var mytextbox = document.getElementById('mytext');
var mydropdown = document.getElementById('dropdown');

mydropdown.onchange = function(){
      mytextbox.value = mytextbox.value  + this.value; //to appened
     //mytextbox.innerHTML = this.value;
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:49:28.813

尝试在 onchange 函数中进行此更改：

```
mytextbox.value = mytextbox.value  + window[this.value]; //to appened 
```

您也可以在 this.value 上使用 eval()，但 eval() 与红发继子一样受欢迎。有关差异的更多信息，请参阅[此](https://stackoverflow.com/questions/3294262/difference-between-window-and-eval-javascript)问题。

**[jsFiddle 示例](http://jsfiddle.net/j08691/cM5SM/)**

# javascript - Javascript随机数限制字符 - 硒

> ID：10387315
> 
> 赞同：0
> 
> 时间：2012-04-30T16:42:49.863
> 
> 标签：javascript, random, selenium

javascript 新手 - 我正在尝试为我的 selenium 测试脚本生成随机用户 ID。我将这条线用于我的价值：

```
javascript{Math.floor(Math.random()*11111)} 
```

但是，一个特定的字段需要一个恰好包含 8 个数字的值 - 有没有办法编写它以返回确切的数字位数？

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T16:53:10.007

```
Math.floor(Math.random()*90000000) + 10000000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:52:57.713

```
function r() {
  return Math.floor(Math.random() * 9.9999999);
}

function sequence() {
  var n = "";
  for (var i = 0; i < 8; i++) {
    n += r();
  }
  return n;
}

sequence(); 
```

# c# - 在 C# 中用斜线分割字符串

> ID：10387317
> 
> 赞同：0
> 
> 时间：2012-04-30T16:42:54.117
> 
> 标签：c#

我有以下类型的字符串。一个带三个斜线，一个带两个：

```
a) filepath = "/F00C/Home/About"

b) filepath = "/Administration/Menus" 
```

我需要做的是一个函数，它允许我获取“home”和“administration”的值并将其放入 topMenu 变量并获取“Menus”和“About”的值并将其放入 subMenu 变量中。

我熟悉函数 slashes = filePath.Split('/'); 但我的情况并不是那么简单，因为有两种类型的变量，在这两种情况下我只需要得到最后两个词。

有没有一种简单的方法可以让 Split 函数在没有任何复杂的情况下对两者都有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:46:18.077

这样的事情有什么问题？

```
var splits = filePath.Split('/');
var secondLast = splits[splits.Length-2];
var last = splits[splits.Length-1]; 
```

评论：

*   缺少对拆分数组长度（必须 >= 2）的任何检查。
*   此外，此代码仅适用于正斜杠 ( `'/'`)。要同时支持反斜杠和正斜杠分隔符，请查看[@Saeed 的回答](https://stackoverflow.com/a/10387355/316644)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:45:38.710

```
var items = filePath.Split('/');
first = items[items.Length - 2];
second = items[items.Length - 1]; 
```

此外，如果这是一个实际路径，您可以使用[Path](http://msdn.microsoft.com/en-us/library/system.io.path%28v=vs.100%29.aspx)：

```
var dir = Path.GetDirectoryName(filePath);
dir  = Path.GetFileName(dir);
var file = Path.GetFileName(filePath); 
```

**编辑：**我编辑了路径版本，就像讨论我的 digEmAll 一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:46:43.997

我是遗漏了什么还是你只是想要：

```
var split = filepath.Split('/');
var last = split[split.Length -1];
var prev = split[split.Length -2]; 
```

# objective-c - 在objective-c中从uilabel获取文本

> ID：10387319
> 
> 赞同：2
> 
> 时间：2012-04-30T16:43:16.450
> 
> 标签：objective-c, ios, xcode, uitextfield, uilabel

我有一个项目，我试图从 Web 服务填充的 uilabel 中获取文本。我可以很好地抓取和操作文本，但我需要将字符串中的某些字符发送到另一个 Web 服务调用。我不知道如何获取字符串中的第一个、第二个和最后一个字符。我既是 Objective-C 的新手，也是编程的新手，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T16:51:02.977

你可以这样做：

```
UILabel * l = [[UILabel alloc] init];
l.text = @"abcdef"; //set text to uilabel
[self.view addSubview:l];

NSString * text = l.text; //get text from uilabel
unichar first = [text characterAtIndex:0]; //get first char
unichar second = [text characterAtIndex:1];
unichar last = [text characterAtIndex:text.length -1]; 
```

如果您需要将结果作为字符串，您可以使用：

```
NSString * firstAsString = [text substringWithRange:NSMakeRange(0, 1)]; //first character as string 
```

或者您可以像这样将 unichar 转换为字符串：

```
NSString * x = [NSString stringWithFormat:@"%C", last]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:51:11.933

根据这一点，它应该相当容易：

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UILabel_Class/Reference/UILabel.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UILabel_Class/Reference/UILabel.html)

```
textLabel.text = @"Foo"; 
```

`textLabel`实例在哪里`UILabel`

# clojure - Core.logic的简明解释

> ID：10387320
> 
> 赞同：20
> 
> 时间：2012-04-30T16:43:22.093
> 
> 标签：clojure, scheme, logic-programming, minikanren, clojure-core.logic

我想使用 Clojure 的 Core.logic。但是，我也想了解它是如何工作的。在某处是否有简明的解释？（比如实现一个元循环评估器？）

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-01T22:38:27.843

core.logic 是 miniKanren 的一个实现——最初由 Dan Friedman、William Byrd、Oleg Kiselyov 等人在 Scheme 中编写和设计。这是在 Lisp 中嵌入 Prolog 风格的关系编程的尝试。

如果您想了解它是如何工作的，您需要阅读 William Byrd 论文的前三章：[https ://scholarworks.iu.edu/dspace/bitstream/handle/2022/8777/Byrd_indiana_0093A_10344.pdf?sequence=1](https://scholarworks.iu.edu/dspace/bitstream/handle/2022/8777/Byrd_indiana_0093A_10344.pdf?sequence=1)

Reasoned Schemer 还详细介绍了统一器。然而，miniKanren 更微妙的目标部分没有得到全面的处理 - 你需要查看 Byrd 的论文。

即便如此，与元循环解释器一样 - 如果不尝试用各种编程语言自己实现系统，就无法获得许多见解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T22:53:16.393

您还可以从 Strange Loop 2012 中看到[David 关于 core.logic 的演讲。](http://www.youtube.com/watch?v=A7de6pC-tnU)

有关该主题的非常简单的介绍，另请参阅：[sokuza-kanren](https://gist.github.com/3952082)

# java - 在 android 中拍照时出现问题，请关闭我的应用程序“(...) ResultInfo {who = null, request = 1, result = 0, data = null} to activity ...”

> ID：10387322
> 
> 赞同：0
> 
> 时间：2012-04-30T16:43:26.777
> 
> 标签：java, android, android-intent, android-photos

好朋友，我这几天一直在努力解决这个问题，我看到论坛里有好几个，但没有一个能够解决我的问题。

我有一个 ImageView 和一个 Button 来拍照。如果是按钮，我有以下代码：

```
 oButton.setOnClickListener(new OnClickListener() {             
                    public void onClick(View v) {
                        //oImageActual is the final ImageView
                        oImageActual = oView;
                        Intent intent =  new Intent(MediaStore.ACTION_IMAGE_CAPTURE);                           
                        startActivityForResult(intent, TAKE_PICTURE);
                    }                       
                }); 
```

和活动的结果，我有这个：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == TAKE_PICTURE && (resultCode == Activity.RESULT_OK)) {            
        if (data != null) {
            if (data.hasExtra("data")) {                    
                 Bitmap photo = (Bitmap) data.getExtras().get("data"); 
                 oImageActual.setImageBitmap(photo);                    
            }
        }
    }
} 
```

问题是它工作了好几次，又失败了好几次，我的意思是，funcina，拍照并把它放在 ImageView 中，但很多时候你关闭了应用程序。我必须重新启动手机才能再次工作。

这是我们遇到的主要问题：

(...)java.lang.RuntimeException: 将结果 ResultInfo{who=null, request=1, result=-1, data=Intent { act=inline-data (has extras) }} 传递给 activity(... )

如果有人有答案，请在这里等待，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:26:07.923

> “拍摄照片并将其放入 ImageView 中，但很多时候您关闭了应用程序。”

如果我理解这一点，您将在返回结果之前关闭活动。onActivity result 只有在整个事件期间父activity没有关闭的情况下才会得到结果。

# django - django set_cookie 方法是否加密 cookie 值？

> ID：10387328
> 
> 赞同：1
> 
> 时间：2012-04-30T16:43:41.937
> 
> 标签：django, cookies, encryption

这就是我想知道的。如果我必须手动加密 cookie 值，或者该方法会自动加密。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:56:13.290

对于 cookie，您可能更关心签名（有人可以修改或伪造数据）而不是加密（有人可以阅读它）。

也就是说，根据[本](https://docs.djangoproject.com/en/dev/topics/http/sessions/#using-cookie-based-sessions)文档，如果您使用基于 cookie 的会话，django 从 1.4 版开始就支持它

# java - 在 switch-case 中使用枚举值的字符串表示

> ID：10387329
> 
> 赞同：21
> 
> 时间：2012-04-30T16:43:43.023
> 
> 标签：java, enums, switch-statement, case, tostring

为什么不能在 switch case 中使用枚举值作为字符串？（或者这有什么问题：）

```
String argument;
switch (argument) {
    case MyEnum.VALUE1.toString(): // Isn't this equal to "VALUE1" ?
    // something    
break;
    case MyEnum.VALUE2.toString():
    // something else
break; 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-30T16:47:06.130

您只能使用在编译时已知的字符串。编译器无法确定该表达式的结果。

也许你可以试试

```
String argument = ...
switch(MyEnum.valueOf(argument)) {
   case VALUE1:

   case VALUE2: 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T16:46:39.623

> case MyEnum.VALUE1.toString(): // 这不等于 "VALUE1" 吗？

不，不一定：您可以自由地提供自己的实现`toString()`

```
public enum MyType {
VALUE1 {
    public String toString() {
        return "this is my value one";
    }
},

VALUE2 {
    public String toString() {
        return "this is my value two";
    }
} 
```

}

此外，维护您的代码的人可以在您离开公司后添加此实现。这就是为什么您不应该依赖 String 值，而是坚持使用s 的数值（由常量`MyEnum.VALUE1`、`MyEnum.VALUE2`等表示） 。`enum`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T18:21:42.153

要添加到 Peter Lawrey 的评论，请查看去年的[这篇文章，其中讨论了在 JDK7 之前和之后在 Java 中切换字符串。](https://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java)

# objective-c - 没有可见的@interface

> ID：10387330
> 
> 赞同：31
> 
> 时间：2012-04-30T16:43:49.737
> 
> 标签：objective-c, ios, xcode, interface

我曾多次收到此错误，但不清楚通常是什么原因导致该错误。在堆栈溢出和谷歌上寻找了一个多小时后，我仍然没有答案。有人可以帮忙吗？

我已经看到了几个具体的答案，但没有说明错误发生的原因，只有“do x”或“do y”。

我还没有包含代码，因为我想知道这个错误通常发生的原因，所以我可以在以后遇到这个错误时修复我的代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T17:13:31.740

它可能发生的原因有很多，但通常是说在它标记的代码行中，它没有看到任何证据表明您引用的选择器位于它认为对象具有的类型的接口中。

在这个例子中，

[没有可见的界面错误](https://stackoverflow.com/questions/9574597/no-visible-interface-error)

他们用错误的类型声明了operandStack。

在这一

[http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=3312](http://www.raywenderlich.com/forums/viewtopic.php?f=2&t=3312)

他们在选择器名称中有错字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:31:01.090

我刚遇到这个问题；我的原因是我将方法设置为类方法而不是实例方法。很傻。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-04T20:01:43.653

另一个原因可能是在库中使用类别并且您没有在其他链接器标志中设置 -ObjC（或 -all_load）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T18:05:35.377

您是否有机会在 Xcode 4.2（或更低版本）上运行在 Xcode 4.3 上编写的代码？在**4.3+ 中，Xcode 根本不需要你声明私有方法**，它只是假设写在实现文件中的方法（接口中没有声明）是私有的。但在**Xcode <= 4.2 中，这会引发错误**，并且这些方法至少需要私下声明

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T15:13:03.140

另一个常见的错误是忘记写 [someInstance ***setSomeValue*** :3]; 而不是 [someInstance someValue:3] (<- 错误)。那是发生在我身上的事。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-10T09:29:18.950

当我遇到这个问题时，事实证明 Xcode 在更改 Git 分支后没有重新索引文件。解决办法是`Delete Derived Data`。

使用 Xcode 10.0 版`File -> Workspace Settings...(or Project Settings...) -> click on the little green circle and manually remove all files in DerivedData folder`

[![在此处输入图像描述](../Images/fd893c8598ccd92e154c2518ef98582f.png)](https://i.stack.imgur.com/Jb3lD.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-10T02:23:53.947

我有这个问题`NSSavePanel` `-beginSheetModalForWindow::`，这显然存在。我尝试进行干净的重建以及删除 DerivedData，但没有运气。我已经复制粘贴然后进行了修改，但我将其注释掉并输入了调用`-beginSheetModalForWindow`并开始工作。据我所知，我在最初的电话中没有任何错误。

# sql - 如何返回按日期分组的一组行的最大值

> ID：10387331
> 
> 赞同：0
> 
> 时间：2012-04-30T16:43:57.987
> 
> 标签：sql, sql-server, aggregate

所以我需要找到 zCumuEnrolled 的最大数量并且只返回一次该值。这就是我到目前为止所拥有的。

```
SELECT Distinct(MAX(zCumuEnrolled)) as total, 
       DateName(mm,zDate) as date, 
       DatePart(yyyy,zDate) as date2
FROM vRecruitment  
Where zDate Between '2010-05-01' AND '2010-05-30' 
GROUP BY zDate 
```

当我这样做时，我得到：

```
total|Date|Date2
    0| May|2010
    1| May|2010 
```

我真正想要的只是返回总计 = 1 的记录。任何建议将不胜感激！！！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:12:32.333

您按完整日期分组，为了获得正确的结果，您需要按月和年分组。将所有日期设置为 XXXX-XX-01 格式，然后按此表达式分组。

`dateadd(day, - datePart(day, zDate) + 1, zDate)`

尝试下一个代码

```
SELECT 
    MAX(zCumuEnrolled) as total,
    DateName(mm, d) as date1,
    DatePart(yyyy, d) as date2
FROM 
    (select *, dateadd(day, - datePart(day, zDate) + 1, zDate) as d from vRecruitment) t
Where 
    zDate Between '2010-05-01' AND '2010-05-30' 
GROUP BY 
    d 
```

如果您想按月获得最大值，这很有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:52:13.053

按 zDate 分组会导致结果对 zDate 的每个不同值都有记录；如果您想要整个日期范围内的最大值，请消除 GROUP BY 子句。（为什么你需要 Max 与众不同？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T16:54:36.497

```
Select Max(zCumuEnrolled) as Total From ZRecruitment 
where zDate Between '2010-05-01' AND '2010-05-30' 
```

如果我得到你，有点令人困惑的问题。如果您想要具有该最大值的记录的月份和年份，则必须澄清。

PS最大怎么可能是总数...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T16:56:27.717

像这样：

```
SELECT zCumuEnrolled, zDate
FROM vRecruitment  
Where zDate Between '2010-05-01' AND '2010-05-30' 
    AND zCumuEnrolled = (SELECT MAX(zCumuEnrolled) FROM vRecruitment) 
```

这是你想做的吗？

# iphone - Xcode/iPhone——下一个事件进入我的代码时中断？

> ID：10387332
> 
> 赞同：1
> 
> 时间：2012-04-30T16:44:08.390
> 
> 标签：iphone, xcode, debugging, breakpoints

我正在开发一个大型（> 30k 行）事件驱动应用程序。我有一系列产生错误的输入。我想要做的是在最终输入进入我的代码后立即中断。

有没有一般的方法可以做到这一点？

我知道对于任何特定的输入序列，我可以找出最后一个输入将在哪里输入我的代码，然后在那里设置一个断点。我想做的是采取“找出最后一个输入进入我的代码的位置”的步骤。换句话说，我正在模拟器中运行应用程序，并且我想在某处设置一个标志，上面写着“下次你要输入非系统 Objective C 代码时中断”。然后我发送导致问题的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:00:55.080

我明白你在问什么，但你试过使用**异常断点**吗？这基本上就像在抛出异常的代码段上自动插入断点一样。如果这对您不起作用，请尝试使用符号断点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:15:46.550

如果你想拦截 UI 事件，你可以尝试继承`UIWindow`并覆盖它的`sendEvent:`方法，然后在你的主 XIB 文件中将这个类设置为 UIWindow 对象的类。`sendEvent:`每次用户生成触摸事件时都会调用。不幸的是，此时您还不知道哪个 UI 对象将最终使用该事件（阅读：最终将调用哪个事件处理程序代码），因为这取决于响应者链的实际状态。但无论如何，您可以使用此方法将事件注入系统。

# python - 使用 Python 的纽约时区

> ID：10387335
> 
> 赞同：0
> 
> 时间：2012-04-30T16:44:19.380
> 
> 标签：python, django, timezone

我想为我的 Django 应用程序提供当前时间，客户端将使用 Javascript 解析此日期时间戳。我包括我的时区：

```
Apr 30, 2012 12:38:08 -400n 
```

我目前使用以下方式来做到这一点：

```
datetime.now().strftime("%b %d, %Y %H:%M:%S -400n") 
```

然而，最终部分`-400n`是有问题的，省光和所有其他的，它可以改变，简单的编码将是无意义的，有没有另一种方法可以自动实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:48:18.460

升级到 django 1.4，然后阅读[关于时区支持的文档](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/)，这是 1.4 的一个新特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:48:59.193

您需要使用另一个库。我已经使用了[PyTZ](http://pytz.sourceforge.net/)和[dateutil](http://labix.org/python-dateutil)。

# python - 带有序列化的 Redis 的 Pythonic 包装器

> ID：10387336
> 
> 赞同：2
> 
> 时间：2012-04-30T16:44:19.937
> 
> 标签：python, serialization, redis, wrapper

我试过[redish](https://github.com/ask/redish)。它看起来很不错，但它似乎已经死了，并且没有 auth 选项（在某些 fork 中进行了改进）。我看了一下[redis-natives](https://github.com/peta/redis-natives-py)和[redis_wrap](https://github.com/amix/redis_wrap)，但似乎没有序列化。

我对过去的“不是在这里发明”综合症并不感到自豪，所以我正在寻找一些好的包装器，如果它存在的话。:)

UDP：django 中最简单的自有自行车，恕我直言，如下所示：

```
from django.forms.models import model_to_dict
import redis
import anyjson

r = redis.Redis(password=setting('REDIS_PASSWORD'))

class ToRedisMixIn(object):
    def save(self, *args, **kwargs):
        super(ToRedisMixIn, self).save(*args, **kwargs)
        exclude = ['id']
        redis_exclude = getattr(self, 'redis_exclude', None)
        redis_key_name = getattr(self, 'redis_key_name', None) or '%ss' % self.__class__.__name__.lower()
        if redis_exclude:
            exclude += redis_exclude
        model_dict = model_to_dict(self, exclude=exclude)
        r.hset(redis_key_name, self.id, anyjson.serialize(model_dict)) 
```

用法：

```
class Device(ToRedisMixIn, models.Model):
    host            = models.IPAddressField()
    name            = models.CharField(max_length=32)
    description     = models.CharField(max_length=200, blank=True)

    redis_exclude = ['description']
    redis_key_name = 'devices' 
```

不是最好的，但有效。

# maven - 如何为基于 Maven 的 Datanucleus 应用程序启用日志记录？

> ID：10387339
> 
> 赞同：0
> 
> 时间：2012-04-30T16:44:36.917
> 
> 标签：maven, jdo, datanucleus

我的问题很简单。给定以下 POM：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.datanucleus</groupId>
            <artifactId>maven-datanucleus-plugin</artifactId>
            <version>3.0.0-release</version>
            <configuration>
                <log4jConfiguration>${basedir}/src/main/resources/log4j.properties</log4jConfiguration>
                <verbose>true</verbose>
                <props>${basedir}/src/main/resources/datanucleus.properties</props>
            </configuration>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
<repositories>
    <repository>
        <id>DataNucleus_Repos2</id>
        <name>DataNucleus Repository</name>
        <url>http://www.datanucleus.org/downloads/maven2</url>
    </repository>
    <repository> <!-- Required for transaction-api transitive dep -->
        <id>Java_Net_LEGACY</id>
        <name>Java.Net legacy</name>
        <url>http://download.java.net/maven/1/</url>
        <layout>legacy</layout>
    </repository>
</repositories>
<pluginRepositories>
    <pluginRepository>
        <id>DataNucleus_2</id>
        <url>http://www.datanucleus.org/downloads/maven2/</url>
    </pluginRepository>
</pluginRepositories>

<dependencies>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <scope>runtime</scope>
        <version>3.0.2</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jdo</artifactId>
        <version>3.0.2</version>
    </dependency>        
    <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-rdbms</artifactId>
        <version>3.0.2</version>
    </dependency>
    <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.9</version>
        </dependency>
    <dependency>
        <groupId>javax.jdo</groupId>
        <artifactId>jdo-api</artifactId>
        <version>3.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-jpa_2.0_spec</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.18</version>
        </dependency>
</dependencies> 
```

鉴于我在预期的位置有文件 log4j.properties 和 datanucleus.properties，当我运行时

```
mvn compile 
```

我得到（取自 datanucleus.log 文件）

> 19:36:11,297（主）错误 [DataNucleus.Enhancer] - DataNucleus 增强器完成但出现错误。请查看增强器日志以获取完整详细信息。某些类可能已得到增强，但有些导致错误为 API“JDO”创建 MetaDataManager 时出错：org.datanucleus.exceptions.NucleusException：为 API“JDO”创建 MetaDataManager 时出错：在 org.datanucleus.NucleusContext.getMetaDataManager(NucleusContext.java :964) 在 org.datanucleus.enhancer.DataNucleusEnhancer.getMetaDataManager(DataNucleusEnhancer.java:261) 在 org.datanucleus.enhancer.DataNucleusEnhancer.getFileMetadataForInput(DataNucleusEnhancer.java:716) 在 org.datanucleus.enhancer.DataNucleusEnhancer.enhance(DataNucleusEnhancer. java:590) 在 org.datanucleus.enhancer.DataNucleusEnhancer.main(DataNucleusEnhancer.java:1390)
> 
> 原因：sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at java.lang java.lang.reflect.InvocationTargetException .reflect.Constructor.newInstance(Unknown Source) at org.datanucleus.plugin.NonManagedPluginRegistry.createExecutableExtension(NonManagedPluginRegistry.java:681) at org.datanucleus.plugin.PluginManager.createExecutableExtension(PluginManager.java:314) at org.datanucleus.NucleusContext .getMetaDataManager(NucleusContext.java:958) ... 还有 4 个
> 
> 引起：java.lang.NoSuchFieldError: supportORM at org.datanucleus.api.jdo.metadata.JDOMetaDataManager.(JDOMetaDataManager.java:142) ... 11 更多

我想启用日志记录以查看我的应用程序正在执行哪些查询。需要注意的是，当从 POM 中删除 log4j 依赖项时，增强效果很好。当然，日志文件不再更新，但类得到了增强。

任何与上述行为相关的想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:53:07.603

文档给出了插件配置的不同外观，特别是在执行中：

```
<executions>
  <execution>
    <phase>process-classes</phase>
    <goals>
      <goal>enhance</goal>
    </goals>
  </execution>
</executions> 
```

这可能会带来很多问题。此外，您应该从您的 pom 中删除存储库定义，因为基于简短检查所有这些依赖项都可以通过 maven Central 获得。如果您确实需要配置存储库，则应该使用存储库管理器。

# jquery - JQuery动画2个div - 宽度和左侧属性

> ID：10387342
> 
> 赞同：0
> 
> 时间：2012-04-30T16:44:41.830
> 
> 标签：jquery, jquery-animate

我有一个容器内有两个 div 的布局，[这是 layout 的 JSFiddle](http://jsfiddle.net/YNAJZ/29/)。我想将右列从显示屏上设置为动画，并将左列调整为 100% 宽度以填充新创建的空间。这是我的 jQuery 代码：

```
if ($('div#right').offset().left > $('#container').width()) {
         // Bring right-column back onto display

          $('div#right').animate({
            left:'0'
          }, 600);

          $('div#left').animate({
            width:'50%'
          }, 200);
        } else {

// Animate column off display.
          $('div#right').animate({
            left:'+50%'
          }, 600);

          $('div#left').animate({
            width:'100%'
          }, 1000);
        } 
```

容器溢出-x 设置为隐藏。我遇到的问题是，将左列扩展到 100% 会导致右列出现在左列下方，因为它仍然占用容器内的空间，而左列正逐渐朝着占据 100% 的方向移动容器的宽度。

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:54:33.683

```
 $('#container').click(function(){
    if (parseInt($('div#right').css('right'),10) < 0) {
             // Bring right-column back onto display
              $('div#right').animate({
                  right:'0%'
              }, 1000);

              $('div#left').animate({
                width:'45%'
              }, 600);
            } else {

    // Animate column off display.
              $('div#right').animate({
                  right:'-45%'
              }, 600);

              $('div#left').animate({
                width:'100%'
              }, 1000);
    } 
```

});

这是一个更好的解决方案。使用绝对定位而不是浮动：jsFiddle：http: [//jsfiddle.net/YNAJZ/38/](http://jsfiddle.net/YNAJZ/38/)

# android - 在用户交互之前，Android WebView 无法完全呈现内容

> ID：10387345
> 
> 赞同：18
> 
> 时间：2012-04-30T16:44:45.147
> 
> 标签：android, webkit, webview, scroll, render

我有一个自定义类扩展显示 HTML 内容的 WebView。当用户单击 HTML 文档中的链接时，我计算要滚动到的 X 值，然后使用 scrollTo(x,y) 通过可运行对象显示该位置（见下文）

```
 post( new Runnable() {

            @Override
            public void run() {

                scrollTo( x, 0 );
                MyWebView.this.invalidate();
                MyWebView.this.buildDrawingCache();
                MyWebView.this.refreshDrawableState();
                MyWebView.this.postInvalidate();
            }
        } ); 
```

滚动后，webview 有可能无法渲染整个文档。矩形的空白块显示在文本应该在的位置，每次看似随机放置。这是截图：http: [//i.imgur.com/g192Y.jpg](http://i.imgur.com/g192Y.jpg)

当我触摸 webview 进行滚动时，它会立即呈现缺失的部分。

到目前为止，这种行为仅限于三星 Galaxy 10.1" 平板电脑。

有谁知道解决方法/如何强制 webkit 重新渲染页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T15:59:35.060

好吧，我在该平板电脑上遇到了完全相同的问题，唯一的区别是我使用**[iscroll](http://cubiq.org/iscroll-4)**进行所有滚动。我为这个问题使用的解决方案是通过 JavaScript “滚动”一个隐藏的 DIV 并解决了这个问题。我希望这可以帮助任何有同样问题的人。如果您使用 iscroll 他们有一种方法可以“滚动”到固定位置，也许这​​也可以帮助您，如果不是那么难检测到**touchmove**或**mousemove**事件。**这里的要点是，即使不可见，您只需要在 html 上的任何位置伪造滚动即可。**

# iphone - willSelectRowAtIndexPath 上的预期表达式

> ID：10387346
> 
> 赞同：0
> 
> 时间：2012-04-30T16:44:51.513
> 
> 标签：iphone, objective-c, ios, uitableview

在我的`UITableView`，我有 2 行。我正在尝试禁用第二行，所以我已经完成了图片中显示的以下操作。当我运行程序时，虽然该行无法推送到另一个视图，但当我单击它时蓝色突出显示仍然闪烁。

所以，我把下面的代码也放在了`if (indexPath.row == 1)`表达式中，但是出现了错误。

我怎样才能摆脱错误？

谢谢。

![在此处输入图像描述](../Images/b3c4b7d5af6a25a9cd3ec7e65ff6e386.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:48:29.420

放

```
 {

} 
```

之后`if`再把代码里面再写`else`.. :D 菜鸟错误。

```
if(indexPath.row==1){
[tableView deselectRowAtIndexPath:indexPath animated:NO];
return nil;
}else
 return indexPath; 
```

# c++ - 除了静态库之外，我还可以使用“gcc -llibnamehere”绑定共享库吗？

> ID：10387347
> 
> 赞同：1
> 
> 时间：2012-04-30T16:44:56.330
> 
> 标签：c++, c, linux, linker, shared-libraries

两个项目：

*   加载器，一个独立的可执行文件（只加载模块）
*   任何模块，一个共享库（librainbowdash.so）（可以有很多模块）

现在，该模块与 链接`-lpthreads`，但我得到了一些奇怪的错误，这让我认为 pthreads 仅绑定为共享对象，并且当加载器加载模块时 pthreads 没有被加载。（用 GDB 调试是不可能的，那种错误）。

我以为`-l`开关只允许静态库？可以？不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:48:13.687

`-l`指定库名称。由链接器将库名称解析为静态库或要链接的共享对象。加载使用的任何共享库是加载器的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:05:44.870

如果您查看 ld 和 gcc 联机帮助页，可以定义“选项组”，我可能有点生疏，但它应该类似于

```
gcc -o yourprog -Wl,-Bstatic yourprog.c -lstatic_lib -Wl,-Bdynamic -ldynamic_lib 
```

确切的咒语可能是错误的。

根据经验，通过静态库的完整路径已证明比弄清楚上述咒语的确切形式要容易得多。

话虽如此，我怀疑您是否会通过静态链接 pthread 获得很多好处。

我想你也可以使用

```
gcc -pthread ... 
```

也是。

使用简单的 -static 将使输出及其所有依赖项变为静态。这可能不是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T16:58:52.067

可能是您的共享库指向`lpthread`错误的位置。使用`ldd`例如工具`ldd libfoo.so`通常是查找此类链接问题的非常有效的方法。

# windows-7 - Virtualbox 在 ubuntu 11.10 到 12.04 LTS 之后失败

> ID：10387349
> 
> 赞同：1
> 
> 时间：2012-04-30T16:45:03.103
> 
> 标签：windows-7, virtualbox

主机从 11.10 移植到 12.04 LTS (Xubuntu)

Virtualbox镜像是win7 x64

随着升级 /dev/vboxdrv 丢失，所以在突触中我重新安装了：

*   virtualbox（4.1.12dsfg-2 不是 OSE）
*   virtualbox-qt 4.1.12dsfg
*   virtualbox-dkms 4.1.12dsfg

然后它再次工作，但我的窗户严重崩溃。一旦启动并且桌面图标弹出它真的很慢并且崩溃（网络图标也被阻止）

我重新安装了客人添加，但没有任何区别。

没有什么是严重的，因为我仍然有可用的快照。

我正在寻求建议，例如如何清理重新安装（清除参数）vbox？有什么解决方法，还是我需要等待新的 12.04LTS 更新才能通过魔法修复这个 pbm？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T13:06:35.270

我可以在我的两台 Ubuntu 12.04 机器（i7 台式机、三星双核笔记本电脑）上确认这个错误：

在升级/重新安装到 Ubuntu Precise 后，我所有在 Ubuntu 11.10 下工作的 Windows（Win7、WinServer2003、WinServer 2008）64 位客户机的行为方式相同：

在来宾启动期间或启动后不久（有时我什至可以访问来宾的桌面片刻）整个系统主机 + 来宾完全冻结。

Vbox.log 不包含任何提示。即使是全新安装的 Ubuntu Precise 也会出现相同的错误（使用相同的客户机）。

我还没有找到任何可以防止这种冻结的访客设置组合。即使使用 Virtualbox 4.1.12-UbuntuR7724S 的 OSE 版本也有同样的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:02:08.053

我不能确定我是否遇到了同样的问题，但我也刚刚从 ubuntu 11.10 升级到 12.04 并尝试引导我的虚拟机（xp 32bit）会导致主机冻结。

解决方法是执行以下操作：

*   启用绝对指针设备（几乎可以肯定这不是修复它，但是嘿嗬！）
*   启用 VT-x/AMD-V 加速和嵌套分页（在设置->系统->加速下找到）
*   禁用视频加速（再次不认为是这样，但我不喜欢摆弄现在它可以工作）

希望这对你也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T15:29:15.527

[可能相关的 VirtualBox 错误票](https://www.virtualbox.org/ticket/10528)说它已在 VirtualBox 源代码中修复，并且还详细介绍了通过 grub 的解决方法。

Debian 错误在[这里](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=655202)。

希望该补丁将应用于 Ubuntu-12.04 。

（这个答案也在：[https](https://askubuntu.com/questions/130726/win-7-virtual-box-vm-fails-to-start-after-upgrade-to-12-04) ://askubuntu.com/questions/130726/win-7-virtual-box-vm-fails-to-start-after-upgrade-to-12-04 ）

# regex - Codeigniter 电子邮件正则表达式

> ID：10387351
> 
> 赞同：2
> 
> 时间：2012-04-30T16:45:27.600
> 
> 标签：regex, codeigniter

codeigniter 用于验证电子邮件地址的正则表达式是什么？我计划在表单验证的 javascript 部分使用相同的正则表达式，这样正则表达式就不会发生冲突，例如 xy#@spic7.com 可能会传入 javascript 部分，但不会传入 php 部分）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:58:11.170

您本可以在发布此问题所花费的相同时间内自己查看源代码，但无论哪种方式，这是 CI 用来验证电子邮件的方法，直接来自`system/libraries/Form_validation.php`：

```
/**
 * Valid Email
 *
 * @access  public
 * @param   string
 * @return  bool
 */
function valid_email($str)
{
    return ( ! preg_match("/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/ix", $str)) ? FALSE : TRUE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:04:51.633

也许最好的解决方案是调用电子邮件助手并检查电子邮件有效性：

```
$this->load->helper('email');

if (valid_email('email@somesite.com')) echo 'email is valid'; 
```

# macos - 从 Ubuntu 12.04 访问 OSX 文件和文件夹

> ID：10387352
> 
> 赞同：1
> 
> 时间：2012-04-30T16:45:29.640
> 
> 标签：macos, ubuntu

我想双启动 ubuntu 12.04 和 OSX Lion。有没有一种方法可以让我从我的 ubuntu 分区访问我的所有音乐、文档等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:28:39.843

您应该能够从 Ubuntu 读取 OSX 分区而无需任何修改。您可能必须挂载该分区，尽管我希望 Ubuntu 自动以只读方式挂载它，因此您只需在文件浏览器中找到该分区并打开它。

默认情况下，OSX 使用日志式 HFS+ 作为文件系统。Ubuntus 内核内置了对这个文件系统的支持。如果你想对 OSX 分区进行读/写访问，你必须在 OSX 中禁用日志。以下是一些更详细的指南：

[https://help.ubuntu.com/community/hfsplus](https://help.ubuntu.com/community/hfsplus)
[http://manpages.ubuntu.com/manpages/intrepid/man7/hfsplus.7.html](http://manpages.ubuntu.com/manpages/intrepid/man7/hfsplus.7.html)

请注意，我不建议禁用日志，也不建议从不同的操作系统写入 OSX 系统分区。如果您想从两个操作系统读取和写入某些文件，您应该为此创建一个单独的分区。非日志式 HFS+ 可以作为文件系统工作，FAT 32 也应该可以工作。

# php - MySQL：从所有记录中删除数字前缀

> ID：10387356
> 
> 赞同：4
> 
> 时间：2012-04-30T16:45:42.323
> 
> 标签：php, mysql, sql, php-5.3

我在下面有这张`page`表，我想从 的列中删除“ **999**`template_id` ”的编号前缀，

```
page_id    template_id    url
1          9991           a
2          9992           b
3          9993           c
4          4              d 
```

所以我可以得到下面的更新数据，

```
page_id    template_id    url
1          1              a
2          2              b
3          3              c
4          4              d 
```

知道如何删除这种前缀吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T17:15:00.687

要获取问题中显示的数据：

```
SELECT
  page_id,
  SUBSTRING(template_id, IF(template_id RLIKE '^999', 4, 1)) AS template_id,
  url
FROM page 
```

或者，如果您想永久更新表格：

```
UPDATE page
SET template_id = SUBSTRING(template_id, 4)
WHERE template_id RLIKE '^999' 
```

MySQL 的[隐式类型转换](http://dev.mysql.com/doc/refman/5.5/en/type-conversion.html)将处理其余部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:03:19.057

如果您不想进行复杂查询或需要进一步操作，您可以执行以下操作：

```
while($r = mysql_fetch_assoc($q)) {
   $newTemplateID = (string) $r['template_id'];
   if (substr($newTemplateID,0,3) === 999 ) {
     $newTemplateID = substr($newTemplateID,3);

     mysql_query("UPDATE tbl 
                    SET template_id = {$newTemplateID} 
                    WHERE page_id = {$r['page_id']} 
                    LIMIT 1");
   }
} 
```

# java - 在线 Java 编译器（多文件支持）

> ID：10387357
> 
> 赞同：0
> 
> 时间：2012-04-30T16:45:52.417
> 
> 标签：java, file, compiler-construction

我想知道是否有人知道在线支持多个文件的java编译器。我曾尝试使用 JXXX 编译器（[http://www.innovation.ch/java/java_compile.html](http://www.innovation.ch/java/java_compile.html)），但它只有足够的空间容纳 5 个源文件。我正在处理的程序有超过 10 个文件，我正在使用的计算机由于某种原因安全程序使其无法解压缩文件，这意味着 JDK 和 JRE 将无法正常工作。如果有人知道支持 10+ java 文件的在线编译器，请回复或留下链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-20T08:54:19.043

[Codiva.io 在线 Java 编译器](https://www.codiva.io/ "Codiva 在线 Java 编译器")支持多个文件。

1.  Codiva 支持多个文件和包、子包。
2.  您可以运行交互式程序。
3.  在您键入时编译并具有自动完成功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T00:31:21.057

如果有人仍在寻找具有多文件支持且**易于使用**的在线 Java 编译器，请查看[http://www.compilejava.net/](http://www.compilejava.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-09T16:04:51.390

我过去用过这个，效果很好，试试看[Java Online Compiler](http://www.javaonlinecompiler.com)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-12T13:13:59.713

[https://paiza.IO/](https://paiza.IO/)在线编译器可处理多个文件，支持 Java 9。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-08-02T23:34:50.190

尝试这样做。首先一次编译每5个*.java组，编译一个5个*.jar组，创建单个jar等。

# ruby-on-rails - 如何根据用户输入的邮政编码/国家/地区进行城市/州/国家/地区代码查找？

> ID：10387360
> 
> 赞同：0
> 
> 时间：2012-04-30T16:46:11.143
> 
> 标签：ruby-on-rails, google-maps-api-3, geocoding

有没有办法根据用户输入的邮政编码/国家/地区进行城市/州/国家/地区代码查找？我的网站将是国际化的，因此要求用户输入他们的国家。

我在想用户输入邮政编码和国家/地区，它们会保存到数据库中，然后 Google 地理编码 API 会将其转换为城市、州和国家，并将输出打印到他们的用户配置文件中。例如：

**用户输入：**

```
Zip - 92646

Country - USA 
```

**输出：**

```
Huntington Beach, CA, USA 
```

我可以让用户输入他们的城市、州和国家，但将来我想做一些地理编码。因此，现在设置它而不是在稍后阶段迁移数据库是有意义的。还是你认为我在这里做错了？我有一个在 Rails 中构建的网站。提前致谢。

** 评论：看起来[RubyCoder](http://www.rubygeocoder.com/) Gem 上的演示允许您输入 zip 和国家来打印 City/State/Country/Zip，这正是我所追求的。关于 Geocoder 与 Google goecoder API 的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:13:26.010

我建议使用地理编码器 gem 并允许用户在一个字段中输入他们的地址。用户更容易以方便的格式只输入一个字段。并将其保留为完整地址。然后将此地址提供给地理编码器（通常地理编码器会自动完成），然后从那里获取坐标、城市、州等。如果用户输入了错误的地址，他只需澄清一下即可。这只是我的意见，不是规则。

# java - Java：自定义 DI 配置如何适用于 WAR 和 EAR

> ID：10387361
> 
> 赞同：1
> 
> 时间：2012-04-30T16:46:13.010
> 
> 标签：java, dependency-injection, war, ear

我编写了`Bootstrapper`一个从类路径读取 XML 文件的类，并且可以在运行时被其他类用作轻量级依赖注入器：

```
<!-- myAppConfig.xml -->
<appConfig>
    <environment runningOn="LOCAL" host="localhost.example.com" system="Windows 7"/>
</appConfig>

public class Bootstrapper
{
    private String runningOn = "Unknown";
    private String host = "Unknown";
    private String system = "Unknown";

    public Bootstrapper(final String appConfigFileName)
    {
        setRunningOn(extractRunningOn(appConfigFileName));
        setHost(extractHost(appConfigFileName));
        setSystem(extractSystem(appConfigFileName));
    }

    public String getHost()
    {
        return host;
    }

    // Rest of class ommitted for brevity...
}

// Then in an executable JAR's main method:
public static void main(String[] args)
{
    Bootstrapper bootstrapper = new Bootstrapper("myAppConfig.xml");

    // Prints: "This app is running on the localhost.example.com server node."
    System.out.println("This app is running on the " +
        bootstrapper.getHost() + " server node.");
} 
```

从这个意义上说`appConfig`，`Bootstrapper`作为**超**轻量级“DI”机制。

**我想知道的是：如何将此设计转换为 WAR 的 web.xml 和 EAR 的 server.xml？**

而在可执行 JAR 中，该`main`方法显式实例化 a `Bootstrapper`，然后可以查询其字段/属性，而在 WAR/EAR 中，所有内容都在 XML 文件 ( `web.xml`/ `server.xml`) 中定义，没有单个“入口点”。因此，在 WAR 或 EAR 中，如果我有多个类，每个类都需要知道本地主机名是什么，我将不得不`Bootstrapper`一遍又一遍地实例化相同的类，每次都传递相同的内容`myAppConfig.xml`。

我想知道是否有一种方法可以配置 web.xml 和 server.xml 以`Bootstrapper`在启动/部署时实例化一个，并在那时和那里自动注入/填充我的依赖类（或者，至少，给每个依赖类*访问*`Bootstrapper`XML 文件中定义的全局/单例）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T07:59:54.860

对于战争（以及耳朵，因为它将包含战争）项目，您可以使用 ServletContextListener 来实例化您的引导程序。

[此处](http://www.mkyong.com/servlet/what-is-listener-servletcontextlistener-example/)是如何使用 ServletContextListener 的一个很好的示例。

但是，如果您使用的是 Java EE 6，那么更好的方法是使用 EJB 3.1 Singleton 和一些 CDI。

```
import javax.ejb.Singleton
import javax.ejb.Startup
import javax.enterprise.context.ApplicationScoped

@Singleton         // EJB 3.1 Singleton
@Startup           // Telling the container to eagerly load on startup
@ApplicationScoped // CDI Scope
public class Bootstrapper {

    private String host = "Unknown";

    @PostConstruct
    public void readConfiguration() {
        // ... load your xml file
    }

    public String getHost() {
        return host;
    }
} 
```

使用上述内容，您现在可以使用简单的@Inject 或@EJB 注释在大多数EE 6 生态系统中注入这个Bootstrapper bean。

# iphone - AudioServicesPlaySystemSound 和主线程

> ID：10387369
> 
> 赞同：6
> 
> 时间：2012-04-30T16:46:39.203
> 
> 标签：iphone, objective-c, ios, cocoa-touch, grand-central-dispatch

`AudioServicesPlaySystemSound`将调用放入队列以避免阻塞主线程是否被认为是一种好习惯？这是人们做的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T17:31:38.237

我问自己同样的问题，并使用将此调用放在后台线程中。真的不需要。根据这篇[文章](http://www.devsrealm.com/objective-c/playing-audio-in-your-ios-app/)，声音已经在后台线程中播放，你不知道它什么时候播放。我也在自己的代码中验证了这种行为。

# android - 在ViewPager android中处理listview的点击事件

> ID：10387380
> 
> 赞同：1
> 
> 时间：2012-04-30T16:47:05.673
> 
> 标签：android, listview, android-viewpager, onitemclick

我在android中开发了一个带有自定义列表视图的viewpager。我按照教程[View Pager Part 1-3](http://blog.stylingandroid.com/archives/577)进行操作。我开发的主要区别是我在寻呼机的视图中使用了自定义列表视图。列表视图中的列表项还支持单击事件以显示有关项目的更多信息。

这是问题所在；我在instantiateItem 方法中处理了onItemClick，但我注意到当单击一个项目时，显示的内容是相邻列表视图的内容（即，如果单击第2 页的第2 项，则显示的信息是第3 页的第2 项）。

我意识到发生这种情况是因为寻呼机加载相邻列表以便为用户更快地呈现，所以我的代码使用预加载列表而不是当前显示中的列表。

我想找出适当的方法来处理 viewpager、代码片段、链接中的 listview 单击事件，.. 真的会有所帮助。用于处理点击事件的适当方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:21:27.450

您必须从列表视图的适配器（onItemClick 方法的第一个参数）中获取它：

```
@Override
public void onItemClick(AdapterView<?> a, View v, int position, long id) {
     // NOT THIS!: mValue = (HereYourClass) listView.getItemAtPosition(position);
     mValue = (HereYourClass)a.getAdapter().getItem(position);
} 
```

# c# - 如何将带有键/值的数组转换为 JSON c#

> ID：10387382
> 
> 赞同：13
> 
> 时间：2012-04-30T16:47:09.423
> 
> 标签：c#, .net, arrays, json

我对 C# 完全陌生，我已经让自己头疼了。我知道这对你来说可能是孩子们的东西，但我花了一个多小时在谷歌上搜索，但似乎无法解决。

我要做的就是将数组转换为 JSON。我很了解 PHP，所以这是我正在尝试做的一个例子（在 PHP 中）：

```
$myarr=array("key1"=>"value for key 1","key2"=>"value for key 2");

$jsonArray=json_encode($myarr); 
```

所以`$jsonArray`将是：`{"key1":"value for key 1","key2":"value for key 2"}`

现在，我正试图做到这一点，但在 C# 中。

这是我到目前为止所拥有的：

```
 String[] keys = new String[] { "emailSend","toEmail"};
 String[] values = new String[] {textBox2.Text,textBox1.Text};
 JavaScriptSerializer js = new JavaScriptSerializer();
 string json = js.Serialize(keys);//final json result
 MessageBox.Show(json);//show me 
```

我正在使用 Visual Studio C# 2010，它抛出了这个错误（使用上面的代码）：

> 找不到类型或命名空间名称“JavaScriptSerializer”（您是否缺少 using 指令或程序集引用？）

关于我在这里做错了什么的任何想法？谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-30T16:48:50.867

看起来你没有正确的`using`说法？将以下内容添加到文件顶部：

`using System.Web.Script.Serialization;`

**编辑**：要获得正确格式的 JSON，请`Dictionary`改用：

```
var keyValues = new Dictionary<string, string>
               {
                   { "emailSend", textBox1.Text },
                   { "toEmail", textBox2.Text }
               };

JavaScriptSerializer js = new JavaScriptSerializer();
string json = js.Serialize(keyValues);
MessageBox.Show(json); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-30T16:55:31.430

使用 JSON.NET 和 JObject 类怎么样？

```
var obj = new JObject();

obj["One"] = "Value One";
obj["Two"] = "Value Two";
obj["Three"] = "Value Three";

var serialized = JsonConvert.SerializeObject(obj); 
```

给你

```
{"One":"Value One","Two":"Value Two","Three":"Value Three"} 
```

# extjs4 - 文本框中的搜索选项

> ID：10387383
> 
> 赞同：1
> 
> 时间：2012-04-30T16:47:10.260
> 
> 标签：extjs4

我正在使用 ExtJs4。我的 Web 应用程序中有一个表单，其中有文本框。场景是在文本框中按下任何键时提供类似 AJAX 的搜索（如 Google）。搜索将查看 Web 服务并在 drop 中显示结果（JSON 对象）。类似于 Google 搜索。

这样做有什么想法、链接或教程吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:55:58.983

试试这个例子：[http ://docs.sencha.com/ext-js/4-0/#!/example/form/forum-search.html](http://docs.sencha.com/ext-js/4-0/#!/example/form/forum-search.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:56:12.677

您可以为此使用**ComboBox 。**有或没有触发器（看起来像一个**TextBox**）。

Sencha 提供了很好的例子：[http ://docs.sencha.com/ext-js/4-0/#!/example/form/combos.html](http://docs.sencha.com/ext-js/4-0/#!/example/form/forum-search.html)
[http://docs.sencha.com/ext-js/4-0](http://docs.sencha.com/ext-js/4-0/#!/example/form/combos.html)
[/#!/example/form/forum-search.html](http://docs.sencha.com/ext-js/4-0/#!/example/form/forum-search.html)

这是一个简单的例子：

```
{
        xtype: 'combo',
        id: 'myCombo',
        store: Ext.create('Ext.data.ArrayStore', {
                model: Ext.define('ComboModel', {
                        extend: 'Ext.data.Model',
                        fields: ['id','data1','data2']
                }),
                proxy: {
                        type: 'ajax',
                        url : 'data.json',
                        reader: {
                                type: 'array'
                        }
                }

        }),
        triggerAction: 'query',
        minChars: 2,
        fieldLabel: 'Search',
        displayField: 'data1',
        msgTarget: 'side',
        triggerCls : 'x-form-search-trigger', // Search Icon For Instance
        listConfig: {
                getInnerTpl: function() {
                        return '<div>{data1}</div><div>{data2}</div>';
                }
        }
} 
```

和**JSON**文件：

```
[
    ['1','data1-1','data2-1'],
    ['2','data1-2','data2-2'],
    ['3','data1-3','data2-3'],
    ['4','data1-4','data2-4'],
    ['5','data1-5','data2-5']
] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:59:11.163

我认为这个例子[http://docs.sencha.com/ext-js/4-1/#!/example/form/forum-search.html](http://docs.sencha.com/ext-js/4-1/#!/example/form/forum-search.html)对你来说会很有趣。这个实现使用标准的组合框控件。在您的情况下，您需要设置 minChars 属性 = 1，在这种情况下，绑定到 Combobox 的存储将生成带有过滤器参数的标准 READ 查询到服务器。您可以在那里生成结果。

# php - T-SQL 中 LIMIT 的等价物

> ID：10387386
> 
> 赞同：1
> 
> 时间：2012-04-30T16:47:39.063
> 
> 标签：php, sql-server-2005

在 PHP 中，我在需要 (LIMIT) 类型功能的地方进行 SQL Server 查询。我已经知道 TOP 通常用于 SQL Server 而不是 LIMIT （这是 MySQL 语法）。但是，TOP 不允许您像 LIMIT 那样设置“偏移”。在我的查询中，我需要动态的“偏移量”和“行数”。例子：

```
LIMIT $startRow, $maxRow 
```

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:52:08.817

Sql Server 2005 没有上述限制语法，直到 2012 年才添加。您将需要使用 OVER 子句和公用表表达式。

[来自 SqlTeam 的示例](http://www.sqlteam.com/article/server-side-paging-using-sql-server-2005)

```
WITH Members  AS
(
    SELECT  M_NAME, M_POSTS, M_LASTPOSTDATE, M_LASTHEREDATE, M_DATE, M_COUNTRY,
            ROW_NUMBER() OVER (ORDER BY M_POSTS DESC) AS RowNumber
    FROM    dbo.FORUM_MEMBERS
)
SELECT  RowNumber, M_NAME, M_POSTS, M_LASTPOSTDATE, M_LASTHEREDATE, M_DATE, M_COUNTRY
FROM    Members
WHERE   RowNumber BETWEEN 1 AND 20
ORDER BY RowNumber ASC; 
```

# android - 处理游戏android中的碰撞

> ID：10387387
> 
> 赞同：1
> 
> 时间：2012-04-30T16:47:46.463
> 
> 标签：android, multithreading, canvas

我在做游戏。游戏有： - 一个进度条 - 一个球在屏幕中移动 - 一个“血” 球将在屏幕中移动。当它与“血”碰撞时，进度条会产生一个值，血会消失。我希望血藏在 10 秒后出现在 5 秒内。我试着去做。这是我的代码：

位图 = BitmapFactory.decodeResource(getResources(), R.drawable.ball);

私人列表血=新的ArrayList（）；

公共类 TimeThread 扩展 Thread{

```
 public void run(){
        while(h < 10000000){
            try {
                sleep(5000);
                h++;
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

for（血：血）{

```
 if(h%2==0 && h>0)   
            blood.onDraw(canvas);  
            }
            for (int i = bloods.size() - 1; i >= 0; i--) {
                Blood blood = bloods.get(i);
                if (blood.isCollition(x2, y2 ,x2 +bitmap.getWidth() , y2 +bitmap.getHeight())) {
                      bloods.remove(blood);
                      progressBar.incrementProgressBy(+40);
                      break;
                }
            } 
```

当发生碰撞时，命令“bloods.remove(blood);” 已实现。但是因为“sleep(5000);” 应该图像血不会立即消失，它会等待5s。那么，它如何立即消失？请帮助我。谢谢，

# powershell - 在 PowerShell 中，如何获得有关“更多”命令用法的帮助？

> ID：10387388
> 
> 赞同：3
> 
> 时间：2012-04-30T16:47:57.593
> 
> 标签：powershell

当我使用`more`时，最常见的是通过`help`，有某些键可以做特殊的事情（`q`结束`more`命令，`Enter`向下滚动等）。

PowerShell 本身有没有办法获得这些密钥的帮助，还是我需要谷歌搜索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T17:39:01.410

`more`在 Powerhsell 中只是一个具有以下定义的函数：

```
param([string[]]$paths)
$OutputEncoding = [System.Console]::OutputEncoding

if($paths)
{
    foreach ($file in $paths)
    {
        Get-Content $file | more.com
    }
}
else
{
    $input | more.com
} 
```

因此，在命令行中，您应该能够执行`more.com /?`并查看帮助，其中包含以下文本，这就是您要查找的内容：

```
If extended features are enabled, the following commands
are accepted at the -- More -- prompt:

P n     Display next n lines
S n     Skip next n lines
F       Display next file
Q       Quit
=       Show line number
?       Show help line
<space> Display next page
<ret>   Display next line 
```

# android - 我如何在多选或清单视图中获取联系人列表？

> ID：10387392
> 
> 赞同：0
> 
> 时间：2012-04-30T16:48:24.103
> 
> 标签：android, android-intent, checkbox, android-contacts

我需要知道如何在复选框列表中列出电话簿的联系人以同时选择多个联系人，因为我需要它来获取选中的电话号码并发送到多联系人列表短信

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:00:36.343

这是一个非常广泛/冗长的问题。我已经为我的一个应用程序完成了此操作，因此我可以为您概述步骤并为您提供指导。

**获取电话号码**

您需要与联系人 API 进行交互。更具体地说，ContactsContract。 [http://dev.schmid.pro/android/get-contacts-on-android-2-0](http://dev.schmid.pro/android/get-contacts-on-android-2-0)

[如何在 Android 2.0 上读取联系人](https://stackoverflow.com/questions/1721279/how-to-read-contacts-on-android-2-0)

最好将数据放在 ArrayList 中。

**显示**

您可以使用多选列表视图，这很容易实现

或者

如果您设置创建带有复选框的列表视图，则必须创建一个自定义适配器，以便您可以控制单击复选框、文本视图、整行等。 [http://windrealm.org/tutorials/android/ listview-with-checkboxes-without-listactivity.php](http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php)

自定义适配器比使用 ListView 更复杂，但是，它们功能强大且有用，我建议无论如何都要学习它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:53:05.113

您不需要复选框列表，而是需要具有适当设置的列表视图。

如果您将[choiceMode](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3achoiceMode)设置为multipleChoice 或multipleChoiceModal (3.0+)，它会自动呈现列表项，右侧有一个复选框。用户`getCheckedItemPositions()`访问选中的项目。

# iphone - 添加具有多个视图的 UIView 时 UIScrollView 滞后

> ID：10387395
> 
> 赞同：0
> 
> 时间：2012-04-30T16:48:41.517
> 
> 标签：iphone, uiview, uiscrollview, lag, uiscrollviewdelegate

我已经在填字游戏应用程序上工作了一段时间，无论我尝试什么，这个问题都会不断出现。

实际游戏在 UIScrollView 中运行，因为玩家应该能够缩放、平移等。

在 UIScrollview 中，我添加了一个 UIView。首先，我尝试向 UIView 添加多个 UIImageViews 和 UILabels，但它导致滚动性能非常差。

现在，我尝试创建 3 个子类 UIView，并为每个 UIView 编写了自定义 drawRect 方法。我需要 3 个 UIVIew，因为其中只有两个需要重绘，但不能同时重绘。第三个包含恒定的线索编号。

我的 UIScrollView 层次结构如下所示：

```
UIScrollView
   UIView
      UIImageView (show the game board image)
      UIView (shows the marked row/column)
      UIView (shows the text the user writes)
      UIView (shows the clue numbers) 
```

我认为问题是我在一个 UIView 中有 UIImageView + 3 UIViews。当我尝试创建此层次结构时，它不会滞后，但我无法缩放、平移、滚动等：

```
UIScrollView
   UIImageView (show the game board image)
   UIView (shows the marked row/column)
   UIView (shows the text the user writes)
   UIView (shows the clue numbers) 
```

你能不能试着指导我正确的方向。如果我不必更改太多，我将不胜感激，因为三个 UIVIew 中的代码很长。

提前致谢 ：）

**编辑**

截图：[http ://crosswords-plus.com/puzzles/screen.png](http://crosswords-plus.com/puzzles/screen.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:21:37.010

首先，我建议缩小你的 UIScrollView 并将包含线索的 UIView 拉出来。听起来它不需要平移/缩放，所以你只是通过将它包含在 UIScrollView 中来增加开销。

其次，如果没有看到您的实现，很难给出很多答案，但在我看来，可以将 UIImageView/UIView/UIView 层次结构转换为 1 个子类，该子类绘制空的、涂黑的或填充的正方形加上行/列根据需要编号。这样，您在 UIScrollView 中只有 1 个 UIView，所有这一切可能要简单得多。

这有帮助吗？您使用 UIImageView 作为背景是否有原因？您是否有理由将行/列编号与用户输入的文本分开？

# javascript - 如何打印 JavaScript 异常的完整回溯？

> ID：10387396
> 
> 赞同：1
> 
> 时间：2012-04-30T16:48:44.553
> 
> 标签：javascript, debugging, exception, node.js

当我的 Node.js 应用程序中抛出异常时，打印的堆栈跟踪被限制为 10 的深度。不幸的是，有时这不足以找到异常的来源。有没有办法配置 Node 以打印更深入的异常回溯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:16:37.573

```
$ node
> Error.stackTraceLimit
10 
```

看起来你可以在运行时更改

# groovy - getXmlHolder 和 context.expand - 参数描述是什么意思

> ID：10387399
> 
> 赞同：1
> 
> 时间：2012-04-30T16:48:55.410
> 
> 标签：groovy, soapui

我正在尝试使用 groovy 脚本将值插入请求并捕获来自 soapui pro Testsuite/testcase/testStep 的响应，而不使用soapui pro 向导创建任何属性或断言。我试图在 Soapui pro 中使用 groovy 脚本文件所做的一切。但经过 11 天的自学过程后，我不得不在论坛中提问：

我浏览了近 100 个讨论如何获取请求/响应值的站点。但没有人解释以下内容：

1.  ***getXmlHolder*** ("DeliverStatus#Request") "deliveryStatus" & "Request" 是什么意思以及它包含什么。它是xml文件的哪一部分。它意味着什么
2.  ***上下文.expand***

对于我所有的尝试，我都得到了 Null 异常。但是我已经能够在“响应部分的脚本选项卡”中使用 groovy 成功编写脚本。但无法在使用 testsuite Groovy Script 时做。

请帮忙..提前谢谢大家

问候

是

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:05:48.533

`DeliverStatus`基本上没有意义 - 它是**您的**测试步骤的名称。

`Request`意味着您查看将由 发送的 XML 请求`SoapUI`。

您可以替换`Request`为`Response`并获取 API 调用的结果。

`context.expend`允许您获取请求或响应的值以及`XPath`其中的特定 s。我不熟悉该`getXmlHolder`方法 - 但它看起来像是将 XML 字符串作为输入（可以是片段）并将其转换为您可以使用的对象。

我的建议 - 如果您还没有使用它，请右键单击`Groovy`编辑区域并选择`Get Data`--> `Test Suite`--> `Test Case`--> `Test Step`--> `Response`--> 并导航到您要访问的响应中的路径. 这会将该 XML 片段的值设置为您选择的字符串变量。

之后，您可以使用 将该`getXmlHolder`字符串转换为对象。我还建议使用[XmlSlurper](http://groovy.codehaus.org/api/groovy/util/XmlSlurper.html)将 XML 字符串解析为对象。

# css - Chrome, CSS - 缩放敏感布局

> ID：10387404
> 
> 赞同：7
> 
> 时间：2012-04-30T16:49:12.657
> 
> 标签：css, google-chrome, zooming

## 设置：

我有一个带有圆角的简单框，它有一个标题并根据文本的数量进行扩展，如 Dan Cederholm 的防弹网页设计 (ISBN 0-321-34693-9) 中所述。

效果很好，除了在谷歌浏览器中放大。然后框的右边距消失。

它可以在 IE 和 FireFox 中正常运行。

## 例子：

[jsFiddle 中的示例](http://jsfiddle.net/e4dT4/5/)

在 chrome 中，它在缩放 110% 和其他缩放时也失败了。在 IE 或 FireFox 中没有问题。

## 问题：

1.  任何想法是什么原因造成的？

2.  一般来说，是什么让布局缩放敏感（如果存在任何这样的一般规则......）？

3.  Dan Cederholm 的书真的是防弹的吗……？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T17:44:36.280

您需要兼容多远？

我的意思是，如果你可以放弃 IE7/8，你应该使用 css3 圆角。如果您需要支持 IE8/7，您绝对应该考虑在这种情况下使用[优雅降级。](http://jonraasch.com/blog/graceful-degradation-with-css3)到处追求完美可能不值得花时间和精力。当浏览器永远不会再次更新时，这只是一个无法实现的目标。

**1）可能是什么原因造成的**

这是一个相当广泛的问题，我无法重现该问题，或者真的无法在 Chrome 20（测试版）中找到问题，所以我只列出一些可能会搞砸的事情。

*   一般浏览器舍入错误，浏览器不精确，未设计为精确的子像素
*   将 px 值与其他值混合，不同的 rodings 使值加起来不同..
*   受页面上其他流入元素影响的流入元素的定位（这些通常很难追踪）
*   父元素属性（例如，具有溢出隐藏、固定大小的父元素，我认为这可能是 jsfiddle 中的问题）
*   浏览器中的错误
*   以上结合

在这种情况下，jsfiddle 在页面上有大量容器和框架（溢出设置为隐藏、固定高度/宽度、基于像素）等，即使在“全屏”视图中也是如此。因此，如果您真的想确定，请在您自己的电脑上打开/测试一个 html 文件。

**2）一般来说，是什么让布局缩放敏感（如果存在任何这样的一般规则......）？**

在今天的浏览器中，这可能并不那么重要，因为缩放功能通常非常先进，甚至可以缩放基于全像素的布局而没有太多问题。今天仍在使用的唯一真正有问题的浏览器是 IE7。IE7 的缩放功能非常糟糕，因此您应该只对文本使用基于 % 或 em 的值。

唯一的“官方”相关指南可以在[WCAG 2.0](http://www.w3.org/TR/WCAG20-TECHS/)中找到，w3 可访问性指南/技术文章：

*   [http://www.w3.org/TR/WCAG20-TECHS/G142.html](http://www.w3.org/TR/WCAG20-TECHS/G142.html)

所以浏览器可以扩展，现代浏览器在这里没有问题，但设计不准确，这也是混合单位（em、%、px）的不可能完成的任务。

**3) Dan Cederholm 的书真的是防弹的吗……？**

在我开始之前，我还没有读过这本书……我一生中从未读过 CSS 书籍（大量其他资源），但我的首要技能是梦想它。

让我们从“什么是防弹？”开始。网页设计中的防弹意味着它可以在任何地方工作，并且不会在任何地方破坏。仅此一项就应该为您提供线索。

当他写那本书时，它很可能是万无一失的，但网络是一个充满活力的地方，即使我为这本书发布了最新的公告博客文章，它也可以追溯到去年 12 月。从那时起，至少出现了 3 个新的 Chrome 版本（粗略估计），甚至更多的 Firefox 版本。微软这次坐以待毙（如果他们决定制定快速发布计划，我们将遇到大麻烦）。

事情发生了变化，从那以后肯定会引入新的错误。

不管是什么破坏了它，没有什么是万无一失的，只是非常非常接近你想要总是发生的事情，浏览器之间略有不同。

这并不意味着这是一本糟糕的书，从他的简历来看，他绝对是网页设计方面的大师，所以他在该领域的很多事情上可能都是正确的。我只是希望他能解释为什么事情会以某种方式完成，因为这会让你比仅仅学习做事更明智。

```
A: "You always use EMs for text! EMs are annoying! Why do you do that anyway?!"
B: "I dunno, read somewhere I should..."
A: "Lets just use pixels! Pixels always work."
B: "Hmmm ok." 
```

你刚刚失去了对 IE7 的支持。（这是否是一件坏事，是另一个讨论）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T17:19:51.230

首先，您使用的是背景图像，我希望您能提到这一点。

1）所以是的，正如您帖子下方的评论中所提到的，这只是 div 的舍入错误，它会裁剪背景图像。

2）遗憾的是，我没有来源，但根据我的经验，使用文本作为度量的对象是缩放敏感的，图片有时不会相对于其他所有内容缩放，并且内容具有预定的“设置”大小（例如文本区域、单选按钮、 ETC）。

3) 没有什么是万无一失的，尤其是像网络这样不断变化的事物，在不同的浏览器上表现也不同。贸易的危害。

# iphone - 如何准确地继承 CALayer 并使用自定义属性？

> ID：10387406
> 
> 赞同：16
> 
> 时间：2012-04-30T16:49:23.477
> 
> 标签：iphone, core-animation, calayer

我正在尝试创建一个`CALayer`具有自定义`index`属性的子类，我可以直接设置动画和更改，以便根据索引显示不同的图片。

在标题中，我声明：

```
@property NSUInteger index; 
```

在实现中，我覆盖了`needDisplayForKey`：

```
+ (BOOL)needsDisplayForKey:(NSString *)key
{
    if ([key isEqualToString:@"index"])
        return YES;
    else
        return [super needsDisplayForKey:key];
} 
```

现在，在`display`方法中，我想根据索引显示一张图片。但是，在动画期间，值`self.index`永远不会改变，所以我必须查询表示层的值，这与[通过子类化提供 CALayer 内容](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/coreanimation_guide/Articles/ProvidingCALayerContent.html#//apple_ref/doc/uid/TP40006642-SW1)的示例相反：

```
- (void)display
{
    NSUInteger presentationIndex = [(CustomLayer *)[self presentationLayer] index];
    self.contents = (id)[[images objectAtIndex:presentationIndex] CGImage];
} 
```

问题是，如果这样做，我不能`index`直接在动画之外设置值，因为它只会更改模型层，并且该`display`方法会显式查询表示层。

如果我添加一个复制 的值的初始化方法`index`，它会起作用：

```
- (id)initWithLayer:(id)layer
{
    self = [super initWithLayer:layer];
    if (self) {
        if ([layer isKindOfClass:[CustomLayer class]])
            self.index = [(CustomLayer *)layer index];
    }
    return self;
} 
```

但是，在动画之后或之前，总是会出现 1 个图像故障，因为演示文稿或模型值不匹配（取决于我是否设置`index`为目标值）。

*   令人惊讶的是，该方法似乎`drawInContext:`总是具有正确的值`[self index]`，但这不是我想要使用的方法，因为我只是`content`用图像设置了属性。
*   `index`根据我实现属性的方式，我会得到不同的行为。如果我使用`@dynamic index`（即使文档没有说自定义属性 getter/setter 将被动态实现），`display`则在每次`index`更改的值时调用。如果我使用`@synthesize`或实现 setter，`display`则不会调用，所以我也需要更改`content`setter。
*   我应该使用实例变量吗？我应该使用动态实现吗？还是我应该`setValue:forKey:`改用？

如您所见，我对如何获得我想要的结果以及如何使用自定义属性正确实现 CALayer 的子类有点困惑。任何帮助和解释，将不胜感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T01:21:31.027

网上有一个很好的教程，解释了如何创建一个具有动画属性的自定义 CALayer 子类。我还没有机会尝试它，但我把它加了书签。链接在这里：

[使用自定义 CALayer 动画饼片](http://blog.pixelingene.com/2012/02/animating-pie-slices-using-a-custom-calayer/)

看起来主要技巧是：

对自定义 CALayer 的动画属性使用 @dynamic，而不是 @synthesize。

覆盖 actionForKey:、initWithLayer: 和 needsDisplayForKey:，也许还有 drawInContext:

# html - 如何使用 groovy 从 XML 文件中提取 HTML 代码

> ID：10387407
> 
> 赞同：0
> 
> 时间：2012-04-30T16:49:25.243
> 
> 标签：html, xml, grails, groovy

我有这个 XML 文件，我需要从“mono”元素中提取 HTML 代码，但我需要 html 标签。我需要使用 groovy 编程语言。

“mono”元素内的所有 div 都是 HTML 标签，包括 div

先感谢您。

```
<dataset>
    <chapters>
        <chapter id="700" name="Immunology">
            <title>Immunology</title>   
            <monos>
                <mono id="382727">

                    <div>
                        <h1>blah blah</h1>
                    </div>
                    <div>
                        <p>blah blah</p>
                    </div>

            </mono>
            </monos>
        </chapter>  
        <chapter id="701" name="hematology">
            <title>Inmuno Hematology</title>    
            <monos>
                <mono id="blah blah">
                    <div>
                        <h1>blah blah</h1>
                    </div>
                    <div>
                        <div class="class1">blah blah</div>
                    </div>
                </mono>
            </monos>
        </chapter>
    </chapters>
</dataset> 
```

我努力了 ：

```
import javax.xml.parsers.*;

xml = new XmlParser().parse("languages.xml")

println("There are " +xml.chapters.chapter.size() +" Chapters")

for (int i = 0; i < xml.chapters.chapter.size(); i++) {

            def chapter = xml.chapters.chapter[i]
            def chapterName = chapter.'@name'
            println chapterName

            println("----  Monos List ----\n\n")

            for (int j = 0; j < chapter.monos.mono.size(); j++) {

                        def mono = chapter.monos.mono[j]
                        println("Mono Content: " + mono.toString());
            }

           println("---- End Monos List ----\n\n")

} 
```

但我只得到以下输出：

有 2 章免疫学 ---- Monos List ----

单声道内容：mono[attributes={id=382727}; 值=[div[属性={}; 值=[h1[属性={}; value=[blah blah]]]], div[属性={}; 值=[p[属性={}; value=[blah blah]]]]]] ---- End Monos List ----

血液学 ---- Monos List ----

单声道内容：mono[attributes={id=blah blah}; 值=[div[属性={}; 值=[h1[属性={}; value=[blah blah]]]], div[属性={}; 值=[div[属性={class=class1}; value=[blah blah]]]]]] ---- End Monos List ----

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:57:39.170

```
import groovy.xml.*

def src="""
<dataset>
    <chapters>
        <chapter id="700" name="Immunology">
            <title>Immunology</title>   
            <monos>
                <mono id="382727">

                    <div>
                        <h1>blah blah</h1>
                    </div>
                    <div>
                        <p>blah blah</p>
                    </div>

            </mono>
            </monos>
        </chapter>  
        <chapter id="701" name="hematology">
            <title>Inmuno Hematology</title>    
            <monos>
                <mono id="blah blah">
                    <div>
                        <h1>blah blah</h1>
                    </div>
                    <div>
                        <div class="class1">blah blah</div>
                    </div>
                </mono>
            </monos>
        </chapter>
    </chapters>
</dataset>
"""

def parsed=new XmlSlurper().parseText(src)

parsed.'**'.findAll{it.name()=='mono'}.each{mono->
    mono.children().each {htmlElement->
        println new StreamingMarkupBuilder().bind{out << htmlElement}.toString()
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:44:42.530

您可以使用 XmlSlurper 或 XmlParser 来解析 xml 内容。

[http://groovy.codehaus.org/Reading+XML+using+Groovy](http://groovy.codehaus.org/Reading+XML+using+Groovy)的+XmlSlurper [http://groovy.codehaus.org/Reading+XML+using+Groovy](http://groovy.codehaus.org/Reading+XML+using+Groovy)的+XmlParser

```
import groovy.xml.*
def RECORDS = '''
        <dataset>
        <chapters>
            <chapter id="700" name="Immunology">
                <title>Immunology</title>   
                <monos>
                    <mono id="382727">

                            <div>
                                <h1>blah blah</h1>
                            </div>
                            <div>
                                <p>blah blah</p>
                            </div>

                    </mono>
                </monos>
                </chapter>    
                <chapter id="701" name="hematology">
                    <title>Inmuno Hematology</title>    
                    <monos>
                        <mono id="blah blah">
                            <div>
                                <h1>blah blah</h1>
                            </div>
                            <div>
                                <div class="class1">blah blah</div>
                            </div>
                        </mono>
                    </monos>
                </chapter>
            </chapters>
        </dataset>    
  '''
def records = new XmlSlurper().parseText(RECORDS)
def monos = records.depthFirst().findAll{ it.name().equals('mono') }
assert monos[0].toString() == "blah blahblah blah";
XmlUtil.serialize( monos[0] ); 
```

输出：

```
<?xml version="1.0" encoding="UTF-8"?><mono id="382727">
  <div>
    <h1>blah blah</h1>
  </div>
  <div>
    <p>blah blah</p>
  </div>
</mono> 
```

# node.js - Redis 的 Nodejs 对象文档模型

> ID：10387412
> 
> 赞同：16
> 
> 时间：2012-04-30T16:49:34.007
> 
> 标签：node.js, redis, mongoose, odm, ohm

我想在 node.js 中为 redis 使用 ODM。有人有任何使用经验吗？理想情况下，我想要一些类似于[猫鼬](https://github.com/LearnBoost/mongoose)的东西（除了 Redis 而不是 Mongodb）。

到目前为止，我听说过的两个是[nohm](https://github.com/maritz/nohm)和[ron](http://www.adaltas.com/projects/node-ron/)。有人可以比较使用其中任何一种的体验吗？我也读过关于[redback](https://github.com/chriso/redback)的文章，我很好奇它是否能很好地与 ODM 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:34:06.177

Redis 非常简单，可以直接使用或包装您自己的对象，但您可以使用像[Nohm](http://maritz.github.com/nohm/)这样的 OHM（对象哈希映射器） ：

*   来源：[https ://github.com/maritz/nohm](https://github.com/maritz/nohm)
*   文档： http: [//maritz.github.com/nohm/](http://maritz.github.com/nohm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T08:03:14.693

你可以试试[红刀](https://github.com/newghost/redblade)

只有一个文件。帮助您自动创建和删除索引字段。

# c# - 在 c# 中，Array.ToArray() 是否执行深度复制？

> ID：10387415
> 
> 赞同：8
> 
> 时间：2012-04-30T16:49:52.630
> 
> 标签：c#, arrays, deep-copy, shallow-copy, toarray

这应该是一个非常基本的问题，但我一直很难找到一个明确的答案。

当您有一个值数组并使用该`.ToArray()`方法时，它会创建数组的深副本还是浅副本？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T16:50:30.863

不。

您可以通过编写一个小程序进行测试来轻松验证这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-13T12:35:19.717

严格来说，`ICollection.ToArray()`创建一个新`T[]`元素并将原始集合中的每个元素分配给新数组，使用`Array.CopyTo()`.

## 笔记：

如果`T`是值类型，则分配值而不是引用。这将表现为人们对“深度”副本的期望。

```
int[] foo = { 1, 2, 3, 4 };
int[] bar = foo.ToArray();

for (int i = 0; i < foo.Length; i++) foo[i] += 10;

Console.WriteLine(string.Join(',', foo)); // 11, 12, 13, 14
Console.WriteLine(string.Join(',', bar)); // 1, 2, 3, 4 
```

# html - 内联 CSS 元素没有空格

> ID：10387419
> 
> 赞同：2
> 
> 时间：2012-04-30T16:50:13.400
> 
> 标签：html, css

在我的代码中，我有这个：

```
<p><b>Foo</b> bar</p> 
```

但它呈现为

**富**吧

如何在行内元素前后保留空格？我想要以下结果：

```
<p><b>Foo</b> bar</p> 
```

**富**吧

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:51:12.863

[你这样做是不对的。](http://jsfiddle.net/PeeHaa/4M2KH/).

或者更确切地说，你做错了什么，因为你所拥有的应该只是工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:58:24.897

### [渲染得很好，](http://jsfiddle.net/wUGQH/)

唯一需要担心的是额外的空间。HTML 不会呈现**多个**空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:25:54.123

伙计只需使用nbsp，它看起来像`"`

`**Foo**  bar`

`"`

**富**  吧

# javascript - 不能使用 $.getJSON

> ID：10387431
> 
> 赞同：0
> 
> 时间：2012-04-30T16:51:26.727
> 
> 标签：javascript, jquery, ajax

我正在尝试从我的服务器获得答案。仅从服务器获取，`var json.src = "http://image/path/file.jpg"`但我什至无法进入该`getJSON`功能。

[JSFiddle](http://jsfiddle.net/FyMKd/)

我一定是忽略了一些东西，但我不能使用`$.getJSON`，也`$.get` 不会感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T16:54:39.607

如果您尝试将内容从不同的服务器加载到发出请求的服务器上，这将不起作用。这是由于[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

另外，`url`您问题中的图像是什么？那不是 JSON。

# android - 带有 2 个指标的进度条

> ID：10387435
> 
> 赞同：7
> 
> 时间：2012-04-30T16:52:01.027
> 
> 标签：android, progress-bar, greenfoot

我想要有 2 个指标的进度条。

一个指示器以绿色显示任务 A 的进度，第二个指示器以红色显示任务 B 的进度，全部在一个进度条中。其余显示任务 A 和 B 的剩余部分。

是否有（简单的）解决方案来实现这一目标？我阅读了文档但没有找到帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T20:37:54.247

这可以通过将两个指标编码为同一进度条的主要进度和次要进度来完成。

为进度条创建一个子类。

```
public class TextProgressBar extends ProgressBar {
    private Paint textPaint;

    public TextProgressBar(Context context) {
        super(context);
        textPaint = new Paint();
        textPaint.setColor(Color.BLACK);
    }

    public TextProgressBar(Context context, AttributeSet attrs) {
        super(context, attrs);
        textPaint = new Paint();
        textPaint.setColor(Color.BLACK);
        setMax(30);
        setProgress(12);
        setSecondaryProgress(20);

    }

} 
```

必须使用这个子类来引用进度条的 XML 条目。

```
<com.darsh.doubleProgressBar.TextProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="15sp"
    android:layout_marginLeft="1sp"
    android:layout_marginRight="1sp"
    android:layout_marginTop="10sp"
    android:progressDrawable="@drawable/progress" /> 
```

现在在资源目录中创建drawable

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

<item android:id="@android:id/background">
    <shape>
        <corners android:radius="5dip" />

        <gradient
            android:angle="270"
            android:centerColor="#ff5a5d5a"
            android:centerY="0.75"
            android:endColor="#ff747674"
            android:startColor="#ff5a5d5a" />
    </shape>
</item>
<item android:id="@android:id/secondaryProgress">
    <clip>
        <shape>
            <corners android:radius="5dip" />

            <gradient
                android:angle="270"
                android:centerColor="#32cd32"
                android:centerY="0.75"
                android:endColor="#32cd32"
                android:startColor="#32cd32" />
        </shape>
    </clip>
</item>
<item android:id="@android:id/progress">
    <clip>
        <shape>
            <corners android:radius="5dip" />

            <gradient
                android:angle="270"
                android:endColor="#33B5E5"
                android:startColor="#33B5E5" />
        </shape>
    </clip>
</item>
</layer-list> 
```

可以在此可绘制对象中更改主要和次要指标的颜色。

在您的代码中使用它们，如下所示：

```
TextProgressBar textProgress;
textProgress = (TextProgressBar)findViewById(R.id.progressBar1);
textProgress.setMax(100);
textProgress.setProgress(10); //
textProgress.setSecondaryProgress(50); //green 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:09:24.690

制作自定义布局并将两个进度条放入其中。然后，您需要通过获取它们的句柄来操作进度条。如果它用于通知，则必须将其设置为远程视图。

# f# - 使用 F# 解析日期

> ID：10387437
> 
> 赞同：0
> 
> 时间：2012-04-30T16:52:07.797
> 
> 标签：f#, parsec, fparsec

是否有一些“日期解析器”库对日期执行 FParsec 对字符串的处理？

也就是说，您可以指定规则，它会匹配它们以识别提供的模式。

* * *

相反，是否有任何库可以根据一些解析规则生成日期？这个想法是为用户提供“实时”完成，以指导他进行有效的未来 fparsec 匹配。

（这个生成解析的问题在僻静的解析圈子里有名字吗？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T17:36:09.377

您可以定义一种简单的领域特定语言 (DSL) 来表达这些类型的规则。与您的“解析器”对应的类型实际上只是一个接受日期并返回布尔值的函数：

```
type DateClassifier = DC of (DateTime -> bool) 
```

您可以轻松定义一些简单的函数：

```
// Succeeds when the date is wednesday
let wednesday = DC (fun dt -> dt.DayOfWeek = DayOfWeek.Wednesday)

// Succeeds if the date is after specified limit
let after limit = DC (fun dt -> dt > limit)

// Succeeds if the day is the specified value
let day d = DC (fun dt -> dt.Day = d)

// Takes two date classifiers and succeeds if either of them succeeds
let (<|>) (DC f) (DC g) = (fun dt -> f dt || g dt)

// Takes two date classifiers and succeeds if both of them succeed
let (<&>) (DC f) (DC g) = (fun dt -> f dt && g dt) 
```

要指定您的条件 - “本月 5 日之后的下一个星期三” - 您需要一个助手来生成在 5 日之后的任何一天成功的函数，可以这样完成（这有点低效，但它是使用现有原语进行合成，这很好）：

```
let afterDay d = 
  [ for n in d + 1 .. 31 -> day n ] |> Seq.reduce (<|>) 
```

仅在您描述的那一天成功的规范（或“解析器”）是：

```
after DateTime.Now (wednesday <&> afterDay 5) 
```

# matlab - 如何绕轴旋转立方体 - MATLAB

> ID：10387444
> 
> 赞同：0
> 
> 时间：2012-04-30T16:52:26.047
> 
> 标签：matlab, geometry

我正在为我的课程做作业，我需要围绕给定的轴旋转立方体。我不能使用 MATLAB 函数，所以我需要手动操作。

这是我的尝试，但无济于事。`

```
function [ CV ] = rotateCubeX( CV, degrees )
    %CV = input vertices/Return val
    %degrees = amount of degrees to rotate
    alpha = degrees * pi/180;
    rotate = zeros(3,3);
    rotate(1,1) = 1;
    rotate(2,2) = cos(alpha);
    rotate(2,3) = -sin(alpha);
    rotate(3,2) = sin(alpha);
    rotate(3,3) = cos(alpha);
    CV = CV * rotate;
    end 
```

前：

```
25.2000 5.9000 2.5000 
25.7000 5.9000 2.5000 
25.7000 7.9000 2.5000 
25.2000 7.9000 2.5000 
25.2000 5.9000 2.8000 
25.7000 5.9000 2.8000 
25.7000 7.9000 2.8000 
25.2000 7.9000 2.8000 
```

后：

```
-10.3544 -23.7200 2.5000 
-10.6536 -24.1205 2.5000 
-9.0513 -25.3175 2.5000 
-8.7521 -24.9169 2.5000 
-10.3544 -23.7200 2.8000 
-10.6536 -24.1205 2.8000 
-9.0513 -25.3175 2.8000 
-8.7521 -24.9169 2.8000 
```

图像没有变化。

我确定我忘记了一些愚蠢的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:27:14.007

您希望旋转的轴是什么？你是如何在你的代码中解释这一点的？

如果您试图绕**任意**轴旋转，那么绕任意轴旋转的通用公式在[这里](http://www.fastgraph.com/makegames/3drotation/)。（查看构建旋转矩阵的其他方法）。注意惯用手以及您使用的是行优先还是列优先矩阵！

# mobile - 移动网络友好的支付网关？

> ID：10387446
> 
> 赞同：0
> 
> 时间：2012-04-30T16:52:50.103
> 
> 标签：mobile, payment-gateway

任何人都可以推荐一个针对移动设备优化的支付网关吗？.. 我刚刚在移动设备上查看了 paypal，虽然它没有大量数据要下载，但它远未针对移动用户进行优化经验...即您必须捏缩放才能填写表格等...有人知道移动友好的支付网关吗？...亲切的问候J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:34:14.937

PayPal 具有出色的移动体验，如果使用移动设备，它会自动切换到该体验。您现在如何集成 PayPal？您只是使用标准按钮吗？你创建它多久了？

如果您查看 www.givemobiley.org，您会看到移动体验中 PayPal 的一个很好的例子。我使用 jQuery Mobile 开发了它，并使用了 PayPal 的 Express Checkout API。

如果您将演示加载到您的计算机上，您将在那里看到您期望的体验，如果您将它加载到您的移动设备上，您将在那里看到您期望的体验。

# c# - asp.net mvc框架如何处理Null值

> ID：10387447
> 
> 赞同：0
> 
> 时间：2012-04-30T16:52:56.917
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我在理解 asp.net mvc 如何处理 Null 值时遇到了一些问题。在第一种情况下，我有以下操作方法：-

```
[HttpPost]
        public ActionResult Delete(int labtestid, int visitid)
        {
try
            {
                var vlr = repository.GetVisitLabResult(labtestid,visitid);
                string desc = vlr.LabTest.Description; 
                repository.DeleteVisitLabResult(vlr);
                repository.Save();
                return Json(new { IsSuccess = "True", id = labtestid, description =    desc }, JsonRequestBehavior.AllowGet);
            } 
```

如果存储库方法`var vlr = repository.GetVisitLabResult(labtestid,visitid);`不返回任何结果 ( `var vlr is null`)，则将在`string desc = vlr.LabTest.Description`;上引发以下异常 **用户代码未处理 NullReferenceException**。那么为什么框架会引发异常而不是仅仅为字符串 desc 分配一个空值！！！BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:55:20.503

看起来实际对象本身为空。您有一个 null 对象，并且您正在尝试访问它的属性，因此运行时将抛出一个`NullReferenceException`. 你最好先检查对象是否为空，然后再尝试访问它的成员:)

# cakephp - CakePHP 下拉，选中的项目重定向到项目查看

> ID：10387449
> 
> 赞同：0
> 
> 时间：2012-04-30T16:53:01.190
> 
> 标签：cakephp, redirect, drop-down-menu

我想要下拉列表药物，重定向到所选特定药物的视图。所以说他们点击药物“对乙酰氨基酚”我希望它把他们送到那个药物的视图。我可以在不添加提交按钮的情况下做到这一点吗？

我的下拉代码：

```
<?php
echo $form->input('Drug.generic', array('type' => 'select', 'label' => 'Quick Select:',
  'empty' => 'Select', 'options' => $alldrugs)
);
?> 
```

索引控制器动作（查看下拉是打开的）

```
 function index() {
    $this->set('drugs', $this->Drug->find('all'));
    $this->set('alldrugs', $this->Drug->find('list', array('fields' => array('id','generic'), 'order' => 'Drug.generic', 'recursive' => -1,)));
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:23:32.230

您可以将根 url 存储在 js 变量中，`default.ctp`如下所示：

将此代码放在 default.ctp`<head></head>`部分中。

```
<script>
  var _ROOT = "<?php echo $this->Html->url('/', true); ?>";
</script> 
```

并在`<head>`标签中在`</head>`结束之前附加这一行：

```
<?php echo $this->Html->script(array('jquery', 'drug_list')); ?> 
```

然后使用以下`_ROOT`类似：

```
window.location = _ROOT + 'drugs/view/' + val; 
```

放置 jquery 库并`YOURNAME.js`在文件夹中创建一个文件`app/webroot/js`，并将以下代码与`YOURNAME.js`文件一起放置。

**YOURNAME如你所愿**

```
$(function() {
   $('#ID_OF_YOUR_SELECT_BOX').change(function() {   // replace the ID_OF_YOUR_SELECT_BOX with the id to your select box given by Cake
       var val = $(this).val();  // val is the drug id
       window.location = _ROOT + 'drugs/view/' + val;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:14:40.170

我会将选择放在没有提交按钮的表单中，然后`onclick`在选择中添加一个（您实际上并不需要一个完整的框架）：

```
<?php
echo $form->input('Drug.generic', array('type' => 'select', 'label' => 'Quick Select:',
  'empty' => 'Select', 'options' => $alldrugs, 'onchange'=>'this.form.submit();')
);
?> 
```

当然，在控制器中，您必须检查`this->data`并根据选择将用户重定向到正确的页面，或者如果您不想重定向用户，只需更改 find() 上的条件。

希望这可以帮助，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:28:28.800

通过混合使用 jQuery 和 PHP，您可以直接重定向到您想要的操作：

```
<?php
echo $form->input('Drug.generic', array('type' => 'select', 'label' => 'Quick Select:',
  'empty' => 'Select', 'options' => $alldrugs, 'id' => 'drug_select')
);
?>

$(document).ready(function(){

    $("#drug_select").change(function(){
        var drug_id = $(this).val();
        if(drug_id.length > 0)
        {
            window.location = "<?php echo Router::url(array('controller' => 'drugs', 'action' => 'view'), true) ?>/" + drug_id;
        }
    });

}); 
```

# jquery - yslow / 减少 jquery

> ID：10387451
> 
> 赞同：0
> 
> 时间：2012-04-30T16:53:06.060
> 
> 标签：jquery, html

我正在使用 Yslow 来查看速度。

问题是我链接的脚本太多，我试图减少重复： 问题在于前 2 个脚本：我尝试只使用 jquery 1.8，即使它的所有内容都来自 jquery 站点。1.7.2 中有一些东西是必需的，我不知道。

我还用 jquery-1.3.min 替换了 1.7，它可以工作。由于 HTTP 请求的数量，Yslow 在这方面给了我一个低分，总共我实际上有 9 个外部 Javascript 脚本和 5 个外部 css 脚本。（3为风格切换）

如果我将第二个脚本设为第一个，则自动完成功能不起作用。

```
 <script type="text/javascript" src="js/jquery-1.7.2.js"></script> 
        <script type="text/javascript" src="js/jquery-ui-1.8.19.custom.min.js"></script>

          <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyAOpIKcVcsbojjjFIwnAOSsDwi_lARLp8o&sensor=false"></script>
          <script type="text/javascript" src="http://gmaps-samples-v3.googlecode.com/svn/trunk/geolocate/geometa.js"></script>

     <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
     <script src="js/jquery.ui.autocomplete.js"></script>
     <script type="text/javascript" src="scripts/downloadxml.js"></script> 
```

简而言之，我试图减少外部 j/s + css 的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:12:57.847

看起来你可以合并这两个

```
<script src="js/jquery.ui.autocomplete.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.19.custom.min.js"></script> 
```

由于自动完成功能包含在 UI 中。如果您不想要整个 UI，只需在自定义构建中包含自动完成功能。

你也可以为你的 jQuery 使用公共资源，谷歌和公司有一个分布式的服务器网络，所以从他们到你的用户的机会比从你到你的用户的要少。

总之试试这个组合：

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script> 
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyAOpIKcVcsbojjjFIwnAOSsDwi_lARLp8o&sensor=false"></script>
<script type="text/javascript" src="http://gmaps-samples-v3.googlecode.com/svn/trunk/geolocate/geometa.js"></script>
<script type="text/javascript" src="scripts/downloadxml.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:15:21.593

首先，为什么要用 1.3 代替 1.7？这很愚蠢。

其次，我建议[Minify](http://code.google.com/p/minify/)将您的 JS 合并到一个组合和缩小的文件中。

Minify`groupsConfig.php`为您的脚本提供了一个包含数组的文件，基本上是这样的：

```
'js' => array( 
    '//js/jquery-1.7.2.js',
    '//js/jquery-ui.js',
    '//js/libs/geolocate/geometa.js',
    '//js/libs/downloadxml.js'
), 

'css' => array(
  // same thing with css files
) 
```

那么你只有一个`<script src="/min/?g=js"></script>`标签和一个`<link rel="stylesheet" src="/min/?g=css" />`标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:15:30.187

一种选择是将所有源代码（js 和 css）放在手边，然后缩小并合并源文件。

通过这种方式，您可以拥有 1 个主 css 文件和 1 个主 js 文件，以及用于特定页面的可选额外 js 文件（也组合/缩小）。

# azure - 在 ServiceDefinition.csdef 中的 Azure IIS 站点上绑定 127.0.0.1

> ID：10387456
> 
> 赞同：1
> 
> 时间：2012-04-30T16:53:25.767
> 
> 标签：azure, azure-worker-roles

如何？

`hostHeader`我只在`ServiceDefinition.csdef` `Bindings`部分看到。我在哪里放IP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:40:42.883

无法在 ServiceDefinition.csdef 文件中添加到 127.0.0.1 的绑定。相反，您必须将绑定节点添加到 D:\Windows\System32\inetsrv\config\applicationHost.config 的相应站点部分。

你可以通过两种方式做到这一点：

1.  使用[Microsoft.Web.Administration](http://blogs.msdn.com/b/carlosag/archive/2006/04/17/microsoftwebadministration.aspx)程序集更改 applicationHost.config。例如，您可以将以下代码添加到 RoleEntryPoint 派生类的 OnStart 方法中：

    ```
    Microsoft.Web.Administration.Site site = server.Sites.FirstOrDefault(s => s.Name.Equals("NameOfWebsite"));

    Microsoft.Web.Administration.Binding binding = site.Bindings.FirstOrDefault(b => b.Protocol == "http");
    site.Bindings.Remove(binding);
    site.Bindings.Add("*:80:", "http");
    server.CommitChanges(); 
    ```

2.  使用 D:\Windows\System32\inetsrv\appcmd.exe 在启动任务中更改 applicationHost.config（请参阅[此链接](http://technet.microsoft.com/en-us/library/cc731692%28v=WS.10%29.aspx)）。

出于好奇，您为什么要将 127.0.0.1 绑定添加到您的 Web 角色？

# flash - 使用纯动作脚本播放视频

> ID：10387457
> 
> 赞同：0
> 
> 时间：2012-04-30T16:53:30.713
> 
> 标签：flash, actionscript, actionscript-2

创建一个空影片剪辑并将其附加到舞台上，我想只使用 actionscript 2 播放一个 flv .. 我听到音频，但没有视频。

```
import flash.display.*;
import flash.filters.*;
import flash.geom.*;
import flash.net.*;
import mx.utils.*;
import flash.external.ExternalInterface;

_root.createEmptyMovieClip("vidsurface",_root.getNextHighestDepth());
vidsurface.beginFill(0x000000, 100);
vidsurface.moveTo(0, 0);
vidsurface.lineTo(100, 0);
vidsurface.lineTo(100, 100);
vidsurface.lineTo(0,100);
vidsurface.lineTo(0,0);
vidsurface._visible=true;

var nc:NetConnection = new NetConnection();
nc.connect(null);
var ns:NetStream = new NetStream(nc);
vidsurface.attachVideo(ns);
ns.play("http://nicolasguy.free.fr/flv/cpe.flv");

ns.onStatus = function(info:Object)
{
    trace("NetStream.onStatus called: ("+getTimer()+" ms)"+"  "+info.code);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:31:15.653

很久没做AS2了，你需要做的就是在IDE的库中创建一个视频对象。您使用哪种类型取决于您拥有的 IDE，它曾经只是一个视频实例，然后我认为我们有 MediaDisplay，然后是 FLVPlayback。检查组件面板以查看哪些实例可供您使用。

给视频对象一个实例名称并使用该名称将您的 netStream 附加到。

例如：

```
myVideo.attachVideo(ns); 
```

然后你会看到视频。

# java - 抛出和记录异常，更好的方法

> ID：10387458
> 
> 赞同：7
> 
> 时间：2012-04-30T16:53:34.167
> 
> 标签：java, error-handling

最终，我想

```
if (badThingsHappen) {
 log the issue
 throw exception with description
} 
```

这里明显的冗余是异常描述和要记录的消息（通常）是相同的。

这看起来不必要的冗长

```
if (badThingsHappen) {
 logger.error("oh no! not again!");
 throw new AppException("oh no! not again!");
} 
```

声明临时字符串感觉不对

```
if (badThingsHappen) {
 String m = "oh no! not again!";
 logger.error(m);
 throw new AppException(m);
} 
```

**是否可以让 Exception 的构造函数处理日志记录？有没有更好（更清洁）的方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:02:02.737

您可以使用实用方法：

```
public class AppException extends Exception {
    public static AppException logAndThrow(Logger logger, String message) throws AppException {
        AppException e = new AppException(message);
        // log the stack trace as well
        logger.error(message, e);
        throw e;
    }
} 
```

并使用它：

```
if (badThingsHappen) {
    AppException.logAndThrow(logger, "oh no! not again!");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:59:49.260

我通常更喜欢在捕获异常时记录异常，而不是在抛出异常时记录它们。

这会更多地清理日志，并且还可以让“客户端”代码更精确地处理异常和信息输出，因为您希望在记录时与异常关联的信息可能取决于上下文。

如果您*确实*想在它发生时立即记录，我会构建异常并在抛出之前记录它，例如：

```
if(badthingshappen){
    Exception e = new Exception("holy $%##");
    logger.log(e);
    throw e;
} 
```

有点冗长是的......但这*是*java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T18:55:53.520

今天自己写了一个错误记录方法（这个是用来记录错误，如果它们发生在监听器方法中，所以它也记录了发生错误的方法和实现监听器的对象以帮助跟踪） ：

```
protected void listenerError(String listenerMethodName, Object listener,
        RuntimeException e) {
    logger.error("Exception while calling " + listenerMethodName
            + " on object " + listener, e);
    throw e;

} 
```

我在有问题的类（或者确切地说是基类）中编写了它，因为您可能想在该类（以及所有子类）中使用记录器。另一种选择是在实用程序类中创建实用程序方法（我不会为它编写异常类），并提供记录器作为参数：

```
class ExceptionUtil {

  public static error(Exception e, Logger logger) {
     logger.error(e);
     throw e;
  }
} 
```

当然，您可以根据需要提供方法和对象作为此方法（或其重载版本）的参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T17:00:39.790

通常在处理异常和日志记录要求时，我会在异常中包含日志记录支持。

异常*通常*从我们项目中的 Base Exception 类继承，并且它具有用于日志记录`log4j`或其他日志记录实用程序的挂钩。

```
class Problem extends java.lang.Exception {
  private boolean debug=false;
  public Problem(String message) {
    if(debug) {
      logging.exception(message);
      /* Maybe a stack trace? */
    }
  }
} 
```

# javascript - 使用 JavaScript 验证加载 CSS

> ID：10387459
> 
> 赞同：0
> 
> 时间：2012-04-30T16:53:37.870
> 
> 标签：javascript, css, validation, xhtml

我有两个样式表，一个默认样式和一个圣诞样式。我希望圣诞节样式在 12 月加载，并且默认每隔一个月使用一次。

我已经编写了下面的代码来实现我想要的，但是如果我将它放入验证器中，我会收到错误：“文档类型不允许元素“链接”在这里”。我想知道如何使此代码验证？

```
<head>
    <script type="text/javascript">
        var i = new Date();
        var m = i.getMonth();
        if (m==11) {
            document.write('<link rel="stylesheet" type="text/css" href="mystyle-christmas.css" />');
        } else {
            document.write('<link rel="stylesheet" type="text/css" href="mystyle-default.css" />');
        }
    </script>
</head> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:00:23.130

验证器有问题，因为您没有使用 CDATA，因此验证器将解析您的 javascript。使用以下方法解决您的问题：

```
<head>
    <script>
    //<![CDATA[
        // Your code here
    // ]]>
    </script>
</head> 
```

顺便说一句，以下是更好的方法：

```
<head>
    <script type="text/javascript">
        var i = new Date(),
            m = i.getMonth(),
            l = document.createElement( 'link' )

        l.rel = 'stylesheet'

        if ( m === 11 ) {
            l.href = 'mystyle-christmas.css'
        }
        else {
            l.href = 'mystyle-default.css'
        }

        document.getElementsByTagName( 'HEAD' )[ 0 ].appendChild( l )
    </script>
</head> 
```

一个更好的方法是将你的 javascript 放在一个外部 js 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:00:31.320

尝试创建元素而不是使用`document.write`：

```
 var christmas = document.createElement("link");
  christmas.setAttribute("rel", "stylesheet");
  christmas.setAttribute("type", "text/css");
  christmas.setAttribute("href", "mystyle-christmas.css");

  document.getElementsByTagName("head")[0].appendChild(christmas) 
```

# java - 执行后从缓存中删除 Java Jar

> ID：10387464
> 
> 赞同：1
> 
> 时间：2012-04-30T16:54:06.947
> 
> 标签：java, caching, jnlp, itar

我们开发了一个带有集中式服务器和客户端的 Java RMI 应用程序，该应用程序捆绑在一个 jar 包中，并使用 Java WebStart 下载到主机。由于在主机上缓存客户端应用程序，可能会出现与 ITAR 相关的复杂情况。我们希望允许用户执行客户端应用程序（jar），然后将其从他们的机器中删除，这样如果用户携带他们的笔记本电脑进行国际商务旅行，就不会出现任何残留。

有没有办法告诉 Java WebStart，“不要缓存这个文件。”？我知道这可以在每台客户端计算机上完成，但我们的组织负责 ITAR 安全，而不是用户，所以我们需要在系统中构建一些东西，以确保没有文件留在用户的计算机上。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:07:38.963

> 如果可能，Java Web Start 将始终从缓存中启动应用程序，并且它会同时对服务器执行后台检查以获取更新。如果有可用更新，它将通知用户，并在下次启动更新版本。这种方法确保了在没有更新的常见情况下快速启动时间，并确保可以离线启动应用程序。
> 
> 对于 1.0 版本，可以通过在客户端的 javaws.cfg 文件中添加行 javaws.cfg.forceUpdate=true 来覆盖此行为。这将强制 Java Web Start 第一次检查更新。不幸的是，设置此标志将导致离线模式无法正常工作。
> 
> 在 Java Web Start 的未来版本中，我们希望更改更新检查的行为，以便在有可用更新时立即启动较新版本的应用程序，同时仍保留离线启动

1.  尝试 javaws.cfg.forceUpdate=false

2.  您可以尝试删除客户端计算机上的缓存文件夹。检查[https://stackoverflow.com/a/1517367/643500](https://stackoverflow.com/a/1517367/643500)

3.  您还可以修改 jnlp 以自定义管理缓存。阅读[http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/examples.html](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/examples.html)

    ```
    import javax.jnlp.*;

    DownloadService ds; 

    try { 
        ds = (DownloadService)ServiceManager.lookup("javax.jnlp.DownloadService"); 
    } catch (UnavailableServiceException e) { 
        ds = null; 
    } 

    if (ds != null) { 
        try { 
            // determine if a particular resource is cached
            URL url = new URL("http://java.sun.com/products/javawebstart/lib/draw.jar"); 
            boolean cached = ds.isResourceCached(url, "1.0"); 
            // remove the resource from the cache 
            if (cached) { 
                ds.removeResource(url, "1.0"); 
            } 
            // reload the resource into the cache 
            DownloadServiceListener dsl = ds.getDefaultProgressWindow(); 
            ds.loadResource(url, "1.0", dsl); 
        } catch (Exception e) { 
            e.printStackTrace(); 
        } 
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:17:17.733

我从未尝试过，但您可能会查看以“删除”开头的方法的[`DownloadService`方法摘要。](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/DownloadService.html#method_summary)

# monotouch.dialog - Monotouch.Dialog ImageLoader

> ID：10387469
> 
> 赞同：0
> 
> 时间：2012-04-30T16:54:46.433
> 
> 标签：monotouch.dialog

Monotouch 5.2.11 评估版（测试）

在模拟器上，无论我尝试加载什么图像，我都会收到此错误：

```
Error fetching picture for [url to image] to....
Problem with [url to image] System.Net.WebException: The request timed out
  at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00046] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/HttpWebRequest.cs:824 
  at System.Net.HttpWebRequest.GetResponse () [0x0000e] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/HttpWebRequest.cs:836 
  at MonoTouch.Dialog.Utilities.ImageLoader.Download (System.Uri uri, System.String target) [0x00038] 
```

[url to image] 工作正常，我实际上可以在模拟器浏览器上输入 url 并加载.. 我已经下载了 Monotouch.Dialog 项目并将请求超时增加到 100000，这似乎没有多大作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T19:12:39.033

当我有一个基于一些 json 响应的嵌套对话框时，我收到了这个错误。大约有 1000 张照片，图像加载器试图将它们全部加载。我认为它仅在单击时才被调用，但事实并非如此。似乎下载使系统充满了太多的请求。

我通过重用 1 UIViewController 来显示最后一个嵌套级别（上面有照片）来解决这个问题。

# c# - C#，转义双引号不能按预期工作

> ID：10387474
> 
> 赞同：2
> 
> 时间：2012-04-30T16:55:09.443
> 
> 标签：c#, .net, c#-4.0

我试图在 xpath 字符串中转义引号，如下所示：

```
var mktCapNode = htmlDoc.DocumentNode.SelectSingleNode("//*[@id=""yfs_j10_a""]"); 
```

我想要传递的实际字符串是：

```
//*[@id="yfs_j10_a"] 
```

这会产生编译器错误：`) expected`和`; expected`

我敢肯定这很简单，但我很难过。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T16:56:17.560

您需要将其设为逐字字符串以将其`""`用作转义

```
@"//*[@id=""yfs_j10_a""]" 
```

对于普通字符串文字，您需要使用反斜杠来转义双引号

```
"//*[@id=\"yfs_j10_a\"]" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:02:25.203

或者使用转义字符'\'：

```
"//*[@id=\"yfs_j10_a\"]" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:14:25.103

在 C# 中，\ 字符用于转义（参见[文档](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)）。这与 VB 不同，在 VB 中没有转义字符，除了“”转义为“。

这意味着在 C# 中，您不需要 vbCrLf 来开始新行，也不需要 vbTab 来将制表符添加到字符串中。而是使用“\r\n”和“\t”。

您也可以使用 @ 字符使字符串成为文字，但我认为这不适用于引号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T16:57:43.877

将`@`前缀添加到您的字符串。

```
@"//*[@id=""yfs_j10_a""]" 
```

或用 a 转义引号`\`

```
"//*[@id=\"yfs_j10_a\"]" 
```

# c# - 如何在 .NET 中生成程序集版本？

> ID：10387485
> 
> 赞同：5
> 
> 时间：2012-04-30T16:55:54.627
> 
> 标签：c#, .net, vb.net

> **可能重复：**
> [程序集版本的详细信息](https://stackoverflow.com/questions/3387108/details-of-assembly-version)

汇编版本是如何在 VS/.NET 中生成的？我知道 AssemblyInfo.cs 或 AssemblyInfo.vb 中有几个字符串，如下所示：

```
' Version information for an assembly consists of the following four values:
'
'      Major Version
'      Minor Version 
'      Build Number
'      Revision
'
' You can specify all the values or you can default the Build and Revision Numbers 
' by using the '*' as shown below:
' <Assembly: AssemblyVersion("1.0.*")> 

<Assembly: AssemblyVersion("1.0.0.0")> 
<Assembly: AssemblyFileVersion("1.0.0.0")> 
```

但是最终的组装版本是如何创建的呢？它是如何递增的？最后一个值存储在哪里？我们有一个自定义的内部发布环境，我想自定义程序集版本......我在谷歌上四处寻找，但找不到任何东西......任何指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:59:02.737

使用汇编版本的“1.0.*”设置将执行以下操作：

*   主要版本：1（如您所示）
*   次要版本：0（如您所述）
*   内部版本号：自 2000 年 1 月 1 日以来的天数。
*   修订：自 12:00 AM（UTC？）以来的毫秒数

所以这就是递增的工作方式......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T17:00:28.747

主要和次要版本没有被添加，它们由指定的内容固定。内部版本号是自 2000 年 1 月 1 日以来的天数。修订号是自午夜（当地时间）以来的秒数除以 2。

您可以在[MSDN上查看更多详细信息](http://msdn.microsoft.com/en-us/library/c405shex%28VS.90%29.aspx)

> ...构建等于自当地时间 2000 年 1 月 1 日以来的天数，修订版等于自当地时间当天午夜以来的秒数除以 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:49:08.537

如果您不喜欢内置行为，请查看 AssemblyInfo 任务！

[http://archive.msdn.microsoft.com/AssemblyInfoTaskvers](http://archive.msdn.microsoft.com/AssemblyInfoTaskvers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T17:01:37.437

只需按照您需要的方式生成包含版本的文件，至少对于官方版本。来自同一“构建”的程序集之间的版本不同是令人困惑的。

您可能还希望对版本进行更多控制，以了解构建是来自某人的机器还是某种官方构建。

另一个考虑因素：如果您有任何类型的公共 API 并且需要提供向后/向前兼容性，自动生成版本几乎是不可能的。

# android - getView() 后 Listview 更新图像

> ID：10387488
> 
> 赞同：1
> 
> 时间：2012-04-30T16:56:09.853
> 
> 标签：android, listview, listener

我正在编写一个应用程序，在从 Internet 下载图像后在列表视图中显示图像。`getView()`如果调用时尚未下载图像，则我有一个占位符图像。这样做的问题是，如果`getView()`在下载图像之前调用，并且用户不再滚动，则占位符图像将保留在那里，直到用户滚动并返回再次调用`getView()`该位置。

我正在寻找一种方法来侦听正在创建的文件，并在创建时更新该行。这可能吗？我用谷歌搜索，但似乎找不到任何东西。我想我必须调用一个`adapter.notifyDataSetChanged()`，但我不知道如何监听正在创建的文件。

# database-design - 数据库设计阅读材料

> ID：10387490
> 
> 赞同：2
> 
> 时间：2012-04-30T16:56:13.400
> 
> 标签：database-design, database-schema

我敢肯定这以前会被问到，但我很困惑！

假设我有一个 SQL Server 数据库，其中包含以下表格

![在此处输入图像描述](../Images/8ff24f5fed85dbab38a044f63410ff67.png)

和数据...

```
INSERT [dbo].[Organisation] ([id], [name]) VALUES (1, N'ABC Ltd')
INSERT [dbo].[Organisation] ([id], [name]) VALUES (2, N'XYZ Ltd')

INSERT [dbo].[Employee] ([id], [name], [organisationId]) VALUES (1, N'Dave', 1)

INSERT [dbo].[Message] ([id], [text], [employeeId], [created]) VALUES (1, 'My 1st message', 1, '2012 01-01 00:00:00')
INSERT [dbo].[Message] ([id], [text], [employeeId], [created]) VALUES (2, 'My 2nd message', 1, '2012 01-02 00:00:00')
INSERT [dbo].[Message] ([id], [text], [employeeId], [created]) VALUES (3, 'My 3rd message', 1, '2012 01-03 00:00:00') 
```

因此，我们可以看到在 ABC Ltd 工作的 Dave 连续 3 天创建了 3 条消息。世界上一切都很好。

如果事实证明 Dave 从未为 ABC Ltd 工作，但实际上为 XYZ Ltd 工作，那很好，我们更改组织 ID，仅此而已。

但是，如果他确实为 ABC 工作，但后来在 2012-01-02 更改为 XYZ Ltd，我该怎么办。

任何询问每个组织提出了多少消息的报告，如果在我们更改 Daves 组织 ID 的前一天运行，ABC 会显示 100%，如果后天运行，XYZ 会显示 100%。错，错，错！！

我的问题不是让某人来解决这个难题，而是向我指出我可以研究的可以帮助我的主题的方向。

我今天一直在搜索以下术语“数据仓库”、“基于时间的系统”和“时态数据库”，并阅读了一些非常令人困惑的文章（对我来说很困惑，我相信它们是很棒的文章）。

那么，那里的任何人都可以通过向正确的方向轻推我来帮助我吗？我相信你可以从这条消息中得知我需要一个关于这个主题的“傻瓜”指南......不管那个主题是什么！！！

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:11:19.160

> 但是，如果他确实为 ABC 工作，但后来在 2012-01-02 更改为 XYZ Ltd，我该怎么办。

您刚刚定义了多对多关系。一个员工可以为多个组织工作，一个组织拥有多个员工。

[从这篇关于数据规范化](http://en.wikipedia.org/wiki/Data_normalization)的维基百科文章开始。在 Google 图片中搜索“多对多关系”。这些图像将引导您做出一些很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:43:28.977

这是一种非常简单的方法来模拟这种情况：

![在此处输入图像描述](../Images/761bb7ea1825b691e9374dd7c9f41f8c.png)

从本质上讲，您不是将信息与员工（人）联系起来，而是与特定的就业时期联系起来。假设这很好用：

*   失业人员永远不能与消息相关联。
*   您满足于在应用程序级别强制执行时间关系。例如，`Message.Created`应该属于相应`Employment`的 '`StartDate`和`TerminationDate`，但数据库本身不会强制执行它（至少不是声明式的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:08:31.433

多年来，我多次看到同样的问题出现。这是未能认识到“这是 Dave 现在（或我们最后一次检查）工作的地方”与“这是 Dave 工作历史的一部分”不同的关系。工作历史关系是有状态的，因为每个关联都有一个开始日期和可以为空的结束日期。我第一次看到这种设计模式是在健身俱乐部会员系统中。

显然，您不想使用“Dave 现在工作的地方”关系来查询消息数据。我可以想到 2 种方法来解决眼前的问题：要么将消息直接与公司相关联，要么按照工作历史推导出公司。在实践中，我看到后一种方法变得过于复杂。如果你决定走那条路，请确保你从你关心的数据方面得到了一些东西。当然，您应该考虑采用简单的解决方案，只捕获您知道自己关心的直接消息/公司关系。这也可以解决戴夫兼职的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T17:20:28.923

好的，当您需要按时间报告时，您需要以这种方式存储数据。因此，不要将这些视为规范化表，您需要将它们视为查找表，然后将所需的值存储在消息表中。

这不是非规范化，因为数据会随着时间而变化。因此，例如，如果我有一条消息需要知道是哪个组织发送的以及哪个员工发送的，那么我需要将两者都存储在消息表中，而不是回复员工和组织之间的连接（我可能需要了解其他事情。）

对于某些事情，您甚至不想将 id 字段存储在最终表中，而是存储实际的文本数据。因此，如果您需要报告发送消息时的组织（或人员）的名称，您可能希望将员工姓名和组织名称以及 ID 存储在消息表中。与其他一些事情相比，消息似乎不太可能，所以让我举个例子，你有一个订单应用程序。在订单详细信息表中，您不想只存储零件编号，还希望存储零件的名称（这可能会随着时间而改变，但是当客户有问题时，他会查看您的文书工作当时寄给他）和价格（几乎肯定会随着时间的推移而改变），也许还有其他细节。

# c - 如何在 c/matlab 中显示 8 位 256x256 数组？

> ID：10387494
> 
> 赞同：0
> 
> 时间：2012-04-30T16:56:37.177
> 
> 标签：c, image, matlab, rgb, 8-bit

我在c中有一个数组：

```
unsigned char image_in[256*256] = {
     72,  57,  55,  67,  79,  58,  52,  72,  96,  81,  72,  76,  93, 107,  91,  84,  95,  66,....IT GOES ON AND ON 256x256.....} 
```

每个值都是索引像素的 8 位 rgb。

现在的问题是我如何显示这张照片？我可以使用 C 或 matlab 或其他任何东西..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:33:54.117

哎呀，这个问题真的没有很好地表达 - 有很多缺失的细节，比如：你需要灰度/RGB图像吗？您想以编程方式（即从您的 C 代码）执行此操作，还是只是快速的一次性快照？您可以将这些值复制到某个 *.csv 文件或 Matlab 脚本（参见 Casliho 的评论）吗？

如果您只想在 Matlab 中将图像显示为灰度，请调用该[`imshow`](http://www.mathworks.com/help/toolbox/images/ref/imshow.html)函数：

```
m = randint(256,256,256); % This creates a random 256x256 array of integers - replace with your values
imshow(m);                % This creates a greyscale image 
```

从绘图对象中，您将能够将图像导出为多种格式（*.jpg、*.png 等）

# c++ - 从 const void * 转换为浮点数组

> ID：10387496
> 
> 赞同：2
> 
> 时间：2012-04-30T16:56:55.390
> 
> 标签：c++, pointers, casting, rtos

我正在为 mbed 平台使用 rtos 库。我希望能够跳入线程，以恒定速率递增某个值，然后在结束时关闭线程。问题是从 mbed RTOS 库中实现 Thread 的方法只能接受一个`const void *`参数。这没什么大不了的，除非我需要向它发送一个浮点值数组，其中一个值是指向我需要递增的值的指针（`*joint`），而其他值可以简单地`const`控制范围和速度增量。我以为我已经控制住了，并在这里找到了一些可以正确转换的简洁代码，但我仍然不断提出 0 值：`//float (*vals)[4] = (float (*)[4])args;`

下面是代码，只剩下参与线程工作的两个函数。

```
void increment( void const *args ) { //float *joint, float inc, float target, int speed ) 
    //float (*vals)[4] = (float (*)[4])args;
    float *vals = (float* )args;

    // joint is the outside value I want to increment
    float *joint  = &vals[0];
    float inc    = vals[1];
    float target = vals[2];
    int   speed  = (int)vals[3];
    float start = 0.5;

    if( inc < 0 ) 
        for( *joint = start; *joint > target; *joint+=inc ) {
             wait( 0.1 / speed );
        }
    }

void thread_inc( float *joint, float inc, float target, int speed ){
    float args[4] = { *joint, inc, target, (float)speed };
    //Thread move( increment, args );
    Thread move( increment, &args );
    return;
} 
```

提前感谢您为我指明正确方向的任何事情！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:23:05.633

我绝对是从 jlunavtgrad、Pat 和 Burton Samograd 那里偷来的。我觉得他们的三个答案都真正回答了 OP。

1.  使用表示要传递给新线程上下文的参数的结构来更好地管理这一点。

2.  args 数组位于堆栈上，并受`thread_inc`. 通过用结构替换它，您仍然无法解决此处涉及的范围问题。因此，需要以另一个线程上下文可以正确使用它们的方式分配参数（以任何形式）——这可以通过全局或堆上来完成。

3.  的`float *joint`参数`thread_inc`被取消引用，并且该值用于填充参数。这似乎不是所需的行为，因为只会修改参数数组中的复制值。

代码中的建议修改：

```
struct thread_args {
  float * joint;
  float inc;
  float target;
  int speed;
};

void increment( void const *args ) {
  thread_args* threadArgs = static_cast<thread_args*>( args );

  float *joint  = threadArgs->joint;
  float inc    = threadArgs->inc;
  float target = threadArgs->target;
  int   speed  = threadArgs->speed;
  float start = 0.5;

  if( inc < 0 ){ 
    for( *joint = start; *joint > target; *joint+=inc ) {
       wait( 0.1 / speed );
    }
  }

  delete threadArgs;
}

void thread_inc( float *joint, float inc, float target, int speed ){
  thread_args* threadArgs = new thread_args;
  threadArgs->joint = joint;
  threadArgs->inc = inc;
  threadArgs->target = target;
  threadArgs->speed = speed;

  //Thread move( increment, args );
  Thread move( increment, threadArgs );
  return;
} 
```

与此解决方案相关的最后一个建议是不要使用原始形式的`new`and `delete`，而是使用各种智能指针，例如`shared_ptr`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:05:50.740

我建议不要尝试通过 void* 传递 args 列表，而是为您的 Thread args 定义一个结构，其中每个 arg 都有一个字段。填写它，然后将结构的地址作为 void* 传递。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T17:06:44.110

从风格上讲，我建议使用结构将此信息传递给您的线程。这将使您的代码更具可读性并在一定程度上清理语法。

```
struct thread_args {
   float * joint;
   float inc;
   float target;
   int speed;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T17:03:56.137

您正在堆栈上创建 args 数组，因此当您创建线程时，函数返回时它超出了范围。您应该使用 new/malloc 分配 args 数组，对其进行初始化，然后将其传递给移动线程。移动线程完成后，您可以释放数组。另一种选择是在调用函数中创建传递给 thread_inc 的数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T17:06:33.940

您在将 *joint 传递给 increment 函数时取消引用它，因此该函数永远无法更新该值。

尝试这个：

```
void increment( void const *args ) { //float *joint, float inc, float target, int speed ) 
    //float (*vals)[4] = (float (*)[4])args;
    float *vals = (float* )args;

    // joint is the outside value I want to increment
    float *joint  = (float *)vals[0];
    float inc    = vals[1];
    float target = vals[2];
    int   speed  = (int)vals[3];
    float start = 0.5;

    if( inc < 0 ) 
        for( *joint = start; *joint > target; *joint+=inc ) {
             wait( 0.1 / speed );
        }
    }

void thread_inc( float *joint, float inc, float target, int speed ){
    float args[4] = { (float)joint, inc, target, (float)speed };
    //Thread move( increment, args );
    Thread move( increment, &args );
    return;
} 
```

# facebook - Heroku 如何安装/上传应用程序

> ID：10387500
> 
> 赞同：1
> 
> 时间：2012-04-30T16:57:18.910
> 
> 标签：facebook, command-line, heroku, cloud

如何将我的文件上传到 Heroku？我得到了一个免费的 MB 来构建一个 Facebook 应用程序，但是对于像我这样的初学者来说，它的教程很难理解。

我停了下来`$ git commit -am "changed greeting"`。

我创建了文件夹并添加了文件`c/pc/herokuname123/view/index.ejs`。写`$ git commit -am "changed greeting"`的时候有错误...

有人可以给我发一个分步教程之类的吗？

我正在 Facebook 上创建多人游戏，所以我想使用 Heroku 云，它是命令行 gitbush。

我尝试遵循本教程：[https ://devcenter.heroku.com/articles/facebook](https://devcenter.heroku.com/articles/facebook)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:07:24.877

除非 Heroku 上的某些内容发生了变化，并且我认为没有实施任何更改，否则您无法将文件上传到 Heroku 应用程序。

我使用 S3 存储桶在 Heroku 上存储我的应用程序上传的文件，这恰好是 Rails 应用程序。Heroku 文件系统，除了 temp 目录，是只写的。

也许这与他们的 Facebook 云服务集成技术不同。我查看了您帖子中提到的文档，没有发现任何表明文件存储能力已更改的内容。

# python - Python。获取对象的大小

> ID：10387501
> 
> 赞同：21
> 
> 时间：2012-04-30T16:57:20.533
> 
> 标签：python

我需要知道我的 python 程序中对象的大小。我有`for`循环，我需要知道对象的大小。如果我使用`sys.getsizeof`，那么内存不会立即释放，我看不到实际大小。有办法吗？

我的对象是 json 和字符串。在最坏的情况下，我可以将它们保存到文件中并查看文件大小。但是如何从 python 代码中查看文件大小？

**编辑**：序列化对象的大小对我来说更重要。所以问题的第二部分是必不可少的。

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-30T17:07:33.880

考虑到`type(json.dumps(something))==str`您应该能够从字面上使用`len`.

考虑以下

```
obj = {'content' : 'something goes here'}
json_obj = json.dumps(obj)
json_size = len(json_obj)

serialized_size = len(serialized_object)

if json_size < serialized_size:
  print "I'd use the JSON with this..." 
```

# php - Symfony 路由规则在没有脚本名称的情况下不起作用

> ID：10387505
> 
> 赞同：-1
> 
> 时间：2012-04-30T16:57:26.793
> 
> 标签：php, symfony1, symfony-1.4

我正在尝试在 localhost 上运行 symfony 项目。我的网址是：[http://hmh/index/newyork/london.php](http://hmh/index/newyork/london.php)。“.php”是后缀（它总是添加到 url）。应该处理 url 的路由规则是：

```
distance:
  url:   /index/:from/:to/*
  param: { module: main, action: distance, template: distance,sf_culture: en } 
```

不幸的是，它仅在我指定脚本名称时才有效：[http://hmh/index.php/index/newyork/london.php](http://hmh/index.php/index/newyork/london.php)。否则使用默认规则。

你知道为什么它的行为如此奇怪吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:03:37.513

我刚刚从 Symfony[文档](http://www.symfony-project.org/gentle-introduction/1_4/en/03-Running-Symfony)中复制了 httpd.conf 的内容并且它有效。一定是一些服务器配置错误。

# android - 所有安卓设备都可以通过USB驱动连接到Windows吗？

> ID：10387506
> 
> 赞同：0
> 
> 时间：2012-04-30T16:57:28.043
> 
> 标签：android, usb, device-driver

我只是开始使用 Android 并打算使用 Basic4Android 编写应用程序。

要将应用程序上传到 Android 设备，推荐的解决方案是安装 USB 驱动程序：

[http://developer.android.com/sdk/oem-usb.html#Drivers](http://developer.android.com/sdk/oem-usb.html#Drivers)

Medion Lifetab P9514 (MD 98052) 平板电脑在附近的商店有售，所以我需要知道是否所有 Android 设备都提供了所需的 USB 驱动程序以便它们可以连接到 Windows，或者是否已知某些品牌缺少在这方面（在这种情况下：您会为平板电脑和智能手机推荐哪个品牌）？

谢谢你。

# java - JSoup 抛出 IO 异常：尝试加载 URL 时发生了太多重定向

> ID：10387510
> 
> 赞同：1
> 
> 时间：2012-04-30T16:57:51.023
> 
> 标签：java, http, exception, post, jsoup

我正在尝试为 minecraft.net 制作一个用户名迁移器作为一个 mod，这样人们就可以迁移他们的游戏帐户以阻止破解帐户。为此，我需要在网站上发布表格。[我设法成功获取了 cookie，因此authenticityToken 将保持不变，但是每当我尝试将数据发布回站点时，它都会抛出'java.io.IOException：尝试加载 URL https://account](https://account.mojang.com/migrate)时发生了太多重定向。 [mojang.com/migrate](https://account.mojang.com/migrate) '

我真的不确定为什么会发生这种情况，但可能与网站有关。authentityToken 绝对匹配。我在不发布到网站并提供相同的 cookie 时检查了这一点。这是我目前正在使用的代码

```
try {
        Response response = Jsoup.connect("https://account.mojang.com/migrate").execute(); //downloads site to get the cookies
        String auth = response.body();
        String auth2 = auth.split("name=\"authenticityToken\" value=\"")[1];
        auth = auth2.split("\">")[0];
        Map<String, String> cookies = response.cookies();
        Connection connection = Jsoup.connect("https://account.mojang.com/migrate").data("action", "/migrate/check")
                .data("authenticityToken", auth)
                .data("mcusername", "username")
                .data("password", "password")
                .method(Method.POST)
                .followRedirects(true);
        for (Entry<String, String> cookie : cookies.entrySet()) {
            connection.cookie(cookie.getKey(), cookie.getValue());
        }
        connection.execute(); //exception thrown here
        Document document = connection.get();
        String docHtml = document.html();
        System.out.println(docHtml);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:12:17.477

```
final Response response = 
    Jsoup.connect("https://account.mojang.com/migrate").execute();
// parse the response as a document, so that we can extract stuff
final Document doc = response.parse();
// correct way to extract parsed html
final Element authToken = doc.select("input[name^=authenticityToken]").get(0);
final Map<String, String> cookies = response.cookies();
// action isn't part of the querystring. The form POST URL is our target.
final Connection connection = 
        Jsoup.connect("https://account.mojang.com/migrate/check")
            .data("authenticityToken", authToken.val()) // correct way to extract val
            .data("mcusername", "username")
            .data("password", "password")
            .method(Method.POST)
            .followRedirects(true);
for (final Entry<String, String> cookie : cookies.entrySet()) {
    connection.cookie(cookie.getKey(), cookie.getValue());
}
final Response postResponse = connection.execute(); // consume response
System.out.println(postResponse.body()); 
```

响应 JSON：

```
{"error":"Invalid username or password."} 
```

你的错误：

1.  表单操作不是查询字符串参数。因此`.data("action", "/migrate/check")`是不正确的。如我上面的代码所示，表单操作是 POST URL 的一部分。

2.  `Document document = connection.get();`正在向 URL 发出 GET 请求。这是不正确的。`connection.execute()`已经发了一个帖子。只需阅读回复，`final Response postResponse = connection.execute()`.

3.  不需要像这样解析隐藏的输入，authenticityToken。正如我所展示的，Jsoup 可以为您做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:59:04.790

`HttpConnection.Responce`具有 `MAX_REDIRECTS`等于​​ 20 的常量。您的执行超出了此限制，因此引发了 IOException。

似乎连接陷入了无限循环的重定向。尝试改变发布数据的方法。

**编辑** 是的，重定向后的每个新页面都有 302 状态码。所以问题可能出在您的要求上。

# javascript - 。消除（）; jquery附加的div

> ID：10387512
> 
> 赞同：0
> 
> 时间：2012-04-30T16:58:03.153
> 
> 标签：javascript, jquery, append

## [http://jsfiddle.net/VTD9P/2/](http://jsfiddle.net/VTD9P/2/)

```
$("button").click(function(){
    $("body").append('<div  class="vidminclose">X</div>');
});
$(".vidminclose").click(function(){
    $(this).remove();
}); 
```

为什么当我点击它时`div.miniclose`它不会删除......以及绕过它的方法是什么。我也看过类似的问题，但我似乎无法用他们的解决方案来解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T17:00:58.183

`.vidmeclose`不存在在`.click`触发时将 click 事件绑定到它，因为它稍后会附加到 DOM。您需要做两件事之一（这也取决于您的 jQuery 版本）。

# 解决方案#1

```
$("#button").click(...
    $("body").append(...
    $(".vidmeclose").click(... 
```

[http://jsfiddle.net/VTD9P/4/](http://jsfiddle.net/VTD9P/4/)

# 解决方案#2

```
$("button").click(...

$("body").on('click', '.vidmeclose', function () ... 
```

请注意，如果可用，在第二个示例中使用更具体的选择器可能会很有用。

[http://jsfiddle.net/VTD9P/5/](http://jsfiddle.net/VTD9P/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:00:55.140

这是因为 vidminclose 还不存在。需要使用`live`（旧 jquery）或`on`（新 jquery）。

# c# - 用户登录系统中的密码问题。C＃

> ID：10387513
> 
> 赞同：0
> 
> 时间：2012-04-30T16:58:04.130
> 
> 标签：c#, database, visual-studio-2010

我在 Visual Studio 2010 中开发了一个 Web 应用程序，并试图向该应用程序添加一个用户登录系统。到目前为止，我无法验证用户密码，因为程序告诉我所有密码都不正确，即使它与与该用户名关联的密码匹配。这是我给儿子写的代码：

```
 protected void n_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
        con.Open();
        string cmdStr = "select count(*) from Registration where UserName='" + TextBoxUserName.Text + "'";
        SqlCommand CheckUser = new SqlCommand(cmdStr, con);
        int Temp = Convert.ToInt32(CheckUser.ExecuteScalar().ToString());
        if (Temp == 1)
        {
            string cmdStr2 = "Select Password from Registration where UserName ='" + TextBoxUserName.Text + "'";
            SqlCommand pass = new SqlCommand(cmdStr2, con);
            string password = pass.ExecuteScalar().ToString();
            con.Close();

            if (password == TextBoxPassword.Text)
            {
                Session["New"] = TextBoxUserName.Text;
                Response.Redirect("HomePage.aspx");
            }
            else
            {
                Label1.Visible = true;
                Label1.Text = "Password is invalid";
            }
        }
        else
        {
             Label1.Visible = true;
             Label1.Text = "Username is invalid";
        }

    }
} 
```

}

无论输入什么密码，程序都会输出“密码无效”，这表明问题出在 if 语句的第一部分？或者它使用的变量？可能还值得一提的是，无效的用户名会以同样的方式标记出来，这很好用。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:11:27.647

请改用[ASP.NET 身份验证](http://msdn.microsoft.com/en-us/library/eeyk640h.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:03:39.920

你正在做的事情对于它应该做的事情来说似乎太复杂了..

编辑：在用户评论后我编辑了我的答案：

```
 public bool Login(String uName, String pasw)
{
    using (SqlConnection myConnection = new SqlConnection(connString))
    {
        string oString = "Select ID from yourTable where username = @username AND paswoord = @password";
        SqlCommand oCmd = new SqlCommand(oString, myConnection);
        oCmd.Parameters.AddWithValue("@username", uName);
        oCmd.Parameters.AddWithValue("@password", pasw);
        string id = null;
        myConnection.Open();
        using (SqlDataReader oReader = oCmd.ExecuteReader())
        {              
            while (oReader.Read())
            {
                id = oReader["id"].ToString();
            }
            myConnection.Close();
        }
        if (id == null)
        {
            return false;
        }
        else
        {
            return true;
        }         
    }
} 
```

你可以尝试这样的事情。此外，它可能与它无关，但是当您将属性命名为“密码”时，某些数据库不喜欢它，您可以尝试将其更改为“pw”或“pasw”或其他。

# ruby - 为什么在 Ruby 中将 0 视为 True？

> ID：10387515
> 
> 赞同：38
> 
> 时间：2012-04-30T16:58:13.193
> 
> 标签：ruby, programming-languages

我正在阅读优秀的[Ruby on Rails 教程](http://ruby.railstutorial.org/)并遇到以下代码。

```
if 0
  true
else
  false
end 
```

上面返回`true`并说明了与许多语言不同（C 是明显的例子），ruby`0`将`true`. 我认为这种与惯例的重大背离是有充分理由的，而不是认为这种行为是特殊的。例如，Python 将`0`视为`False`，正如人们所期望的那样。

简而言之，设计 ruby​​ 的基本原理是`0`什么`true`？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-30T17:02:20.867

我猜想 Matz 想要“真实性”的概念简单性——唯一的“错误”值是`false`and `nil`。时期。

使用 just`false`将是最干净的，但包含`nil`. 将整数零作为特例包括在内可能会打开质疑其他类型真实性的心理闸门。字符串呢，是`""`假的吗？而数组，是`[]`假的吗？和哈希，是`{}`假的吗？疯狂（见 JavaScript）...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-30T17:09:56.890

在 ruby​​ 中，如果存在，则为 true。如果不是，那就是假的。

因此，对于 Ruby null（未分配地址）和 false 只是错误的。

所有其他都是真的，因为它有分配给它的地址。

我是这样想的；“它存在吗？”

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-19T03:39:50.393

在 Common Lisp 中，0 也被视为真。例如，以下代码返回`true`.

```
(if 0 'true 'false) 
```

毫无疑问，Ruby 遵循了与 Lisp 相同的设计决策。在 Lisp 中，只有一个空列表（由 表示`nil`）是错误的。

# ios - iOS - 从 Web 应用程序中的链接打开 Microsoft 标签阅读器

> ID：10387516
> 
> 赞同：0
> 
> 时间：2012-04-30T16:58:15.177
> 
> 标签：ios, tags, microsoft-tag

我们正在构建一个使用 QR 码和重定向的网络应用程序。我们还使用 Microsoft Tag 来读取 QR 码。我们想要在我们的网络应用程序中打开标签阅读器的链接。我一直在搜索所有内容，最接近的是关于 android 的链接……但这是 iOS。

有谁知道打开本机应用程序的语法？我已经看到其他网站这样做了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:20:51.213

您必须知道 Microsoft Tag 应用程序的 URL 方案。我不知道在哪里或者是否可以得到它。

如果您碰巧找到它，您可以使用以下内容打开应用程序：

```
 <a href="applicationurlscheme:">Open the Microsoft Tag application</a>; 
```

或者在 Objective-C 中：

```
NSString *stringURL = @"applicationurlscheme:";
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url]; 
```

有关更多信息，请参阅[此](http://wiki.akosma.com/IPhone_URL_Schemes)、[此](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)和[此](http://iphonedevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)。

# php - ckfinder 配置文件中的 maxSize 不起作用

> ID：10387517
> 
> 赞同：1
> 
> 时间：2012-04-30T16:58:22.957
> 
> 标签：php, ckfinder

我使用 ckfinder 2.0 版。

问题是 maxSize 属性不起作用！这是我的资源类型配置。

```
$config['ResourceType'][] = Array(
    'name' => 'Files',              // Single quotes not allowed
    'url' => $baseUrl . 'files',
    'directory' => $baseDir . 'files',
    'maxSize' => "10M",
    'allowedExtensions' => '7z,aiff,asf,avi,bmp,csv,doc,docx,fla,flv,gif,gz,gzip,jpeg,jpg,mid,mov,mp3,mp4,mpc,mpeg,mpg,ods,odt,pdf,png,ppt,pptx,pxd,qt,ram,rar,rm,rmi,rmvb,rtf,sdc,sitd,swf,sxc,sxw,tar,tgz,tif,tiff,txt,vsd,wav,wma,wmv,xls,xlsx,zip',
    'deniedExtensions' => '');

$config['ResourceType'][] = Array(
    'name' => 'Images',
    'url' => $baseUrl . 'images',
    'directory' => $baseDir . 'images',
    'maxSize' => "10M",
    'allowedExtensions' => 'bmp,gif,jpeg,jpg,png',
    'deniedExtensions' => '');

$config['ResourceType'][] = Array(
    'name' => 'Flash',
    'url' => $baseUrl . 'flash',
    'directory' => $baseDir . 'flash',
    'maxSize' => "10M",
    'allowedExtensions' => 'swf,flv',
    'deniedExtensions' => ''); 
```

但仍然得到“文件太大”的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T14:33:43.220

您需要获得访问服务器上 php.ini 文件的权限。在 php.ini 中，您将找到该行`upload_max_filesize`。您可以将其设置为`upload_max_filesize=10M`然后重新启动网络服务器。

它对我有用。

# javascript - 默认 Javascript 事件和 Jquery 交互

> ID：10387519
> 
> 赞同：1
> 
> 时间：2012-04-30T16:58:26.403
> 
> 标签：javascript, jquery

我正在开发我们公司开发的专有电子商务平台。我严格参与前端开发。

不幸的是，很多购物车都在使用内联 javascript 事件将数据发布到我们的数据库中。我计划在不久的将来将内联 javascript 转换为 Jquery，但现在，它们仍然存在。

我遇到的一个具体问题是“从购物车中删除商品”图标，该图标在购物车中的每个订单项上重复出现。有一个内联 javascript 事件使用后端 Delphi 代码从购物车中删除商品：

```
document.SPI_KitFormName.SPI_KitOrdQtyFieldName.value='DEL';
document.SPI_KitFormName.Action.value='Recalc_Kit'; 
```

我刚刚添加了一个 Jquery 对话框以在单击此“从购物车中删除项目”图标时弹出，要求用户确认。我在对话框中添加了“删除项目”和“取消”按钮。

我遇到的问题是，当单击图标时，内联 javascript 事件将在对话框 jquery 之前运行。我明白了。因此，我添加到我的 jQuery 代码`e.preventDefault()`中以防止内联 javascript 首先运行。问题是，当我点击对话框中的“删除项目”按钮时，我不知道如何重新启用它。

这是我当前的代码：

```
var currentForm;
$(function() {
    jQuery('#confirm-itemdelete').dialog({
        autoOpen: false,
        height: 160,
        modal: true,
        resizable: false,
        buttons: {
            'Delete Item': function() {
                $(this).dialog("close");
                $(".deleteitembutton a").die('click');
                currentForm.submit();
            },
            'Cancel': function(){
                $(this).dialog("close");
            }
        }
    });

    $('.deleteitembutton a').live('click', function(e) {
        currentForm = $(this).closest('form');
        e.preventDefault();
        $('#confirm-itemdelete').dialog('open');
    });
}); 
```

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:27:38.997

这是一个不常见的问题，因为许多后端系统仍然坚持通过点击等方式将自己与表示层纠缠在一起。这非常令人沮丧。

由于 JSF，我遇到了同样的情况，它坚持使用内联 onclick 事件来做所有事情。

解决方案很老套，但有效。我所做的是在页面呈现时，我抓取所有的 onclick 属性，然后将它们缓存为 jquery 数据属性，然后删除原始的 onclick。

然后我可以将我自己的 jQuery 事件绑定到它们，并根据一些逻辑，我可以决定是否要触发原始的 onclicks。

例子：

```
<span id="test" onclick="alert('onclick')">test</span> 
```

文档准备好后，我缓存 onclick：

```
$('#test')
    .data('inlineOnclick',$('#test').attr('onclick'))
    .removeAttr('onclick'); 
```

然后我绑定我自己的点击事件

```
$('#test') 
    .click(function(){
        if(confirm('delete this?')){
            //fire off original onclick event via anonymous function
            var anonFunc = eval("(function(){" + $(this).data('inlineOnclick') + "})");
            anonFunc.call(this);
        }
    }); 
```

示例：http: [//jsbin.com/ebotam](http://jsbin.com/ebotam)

话虽如此，请注意，大多数人会因为使用它而对你大喊大叫，`eval`因为它显然是邪恶的。它可能是。也许有更好的方法来处理这个问题，但它对我来说是一个好的解决方法。而且，除此之外， inline`onclick`也是邪恶的，所以也许与邪恶作斗争是可以的。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:08:55.110

你能做这样的事情吗：

```
currentForm.submit = function(){
   return false;
} 
```

我认为这将阻止表单提交，然后在您希望提交时将其设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:22:34.527

这是一种快速而肮脏的方法，您可以让它发挥作用。在文档准备就绪时，运行一个脚本，该脚本会删除违规元素的所有内联代码，并将其作为字符串存储在元素的数据属性中。而且您需要一个更高级别的变量来存储您单击的按钮。

```
$(document).ready(function(){
    var buttonClicked; // Lets you know which one was just clicked.
    $('.deleteitembutton a')each(function(){
        $(this).data('cEvent', $(this).attr('onClick'));
        $(this).removeAttr('onClick');
    });
} 
```

我不知道内联脚本与哪个属性相关联，因此将“onClick”替换为它所在的任何属性。

完成后，您需要稍微修改对话代码并创建一个新事件。

```
// Add this to the 'click' event
buttonClicked = $(this);

// The new event
$('.deleteitembutton a').on('newEvent', function() {
    eval($(this).data('cEvent'));
}

// Add this line to your 'Delete Item' button in your dialog
$('.deleteitembutton a').trigger('newEvent');

// Add this to your 'Cancel' button in your dialog
buttonClicked = ''; 
```

就像我说的那样，这既快又脏，但它可能会奏效。

# facebook - facebook 链接发布未使用 C# SDK 显示缩略图

> ID：10387526
> 
> 赞同：0
> 
> 时间：2012-04-30T16:58:54.767
> 
> 标签：facebook, facebook-c#-sdk, thumbnails

我使用下面的代码发布使用 C# SDK 的链接

```
var client = new FacebookClient(this._accessToken);
dynamic parameters = new ExpandoObject();
parameters.message = "In House testing ";
parameters.link = "code.gigyonline.com";
parameters.picture = "lonnnnnnnnnng image path/EM10000_thumbnail.jpg";
parameters.name = "My Post";
parameters.caption = "My Post Caption";
parameters.description = "Nothing now";
dynamic result = client.Post("{page ID}/feed", parameters); 
```

上面的帖子工作正常，除了缩略图。然后我假设图像 url 长度可能太长，所以我创建了一个短 url 仍然没有显示缩略图。

所以我的新图片网址更改如下

```
parameters.picture = "http://www.cprpt.com/L/3e39fd3"; 
```

1.  任何解决此问题的建议将不胜感激
2.  对于发布链接的缩略图图像，我们是否有任何 url 长度限制

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:42:27.970

问题不在于我相信的长图像路径。它仅取决于您用于缩略图的图像大小。我使用了另一个小图像，它的工作路径很长。

始终认为这是缩略图并相应地选择图像:)

# ruby-on-rails - rails 和重构，针对 vim 用户的建议工具和技术？

> ID：10387527
> 
> 赞同：8
> 
> 时间：2012-04-30T16:58:55.827
> 
> 标签：ruby-on-rails, ruby, vim, refactoring

作为一个相当新的 Rails 开发人员，上周我第一次尝试重构，我不得不重命名控制器和模型以更好地反映我们正在使用的域。我使用 .NET 多年，并且理所当然地认为 Resharper 之类的工具可以很容易地重命名类。我想知道 Rails 世界中的人们如何缓解重构问题？我最感兴趣的是那些主要使用 vim（或除 IDE 之外的任何东西）的人。

我最感兴趣的是：

*   特定于 Rails 的有效 vim 插件可能有助于处理
*   内置的 vim 工具也可能有助于该过程

我花了将近两个小时进行重构，并希望提高效率，所以 Rails 专家的任何建议都会很棒。干杯。

请注意，我意识到这个问题类似于 [哪些工具可用于 Ruby 重构？](https://stackoverflow.com/questions/7794178/what-tools-are-available-for-ruby-refactoring) 但我已经知道 IDE 就像我的 ruby​​ 一样，我最感兴趣的是人们如何使用 vim 来完成这类任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:23:41.980

看看这个vim插件： [https ://github.com/sandeepravi/refactor-rails.vim](https://github.com/sandeepravi/refactor-rails.vim)

著名的 tim pope 的 rails.vim，有一些重构助手： [http ://www.vim.org/scripts/script.php?script_id=1567](http://www.vim.org/scripts/script.php?script_id=1567)

这是重构的红宝石： [https ://github.com/jcrisp/rails_refactor](https://github.com/jcrisp/rails_refactor)

这是 Ruby 的重构工具，但我认为它对 Rails 项目也很有用： [https ://github.com/ecomba/vim-ruby-refactoring](https://github.com/ecomba/vim-ruby-refactoring)

在这里你可以找到一些使用它的帮助：http: [//justinram.wordpress.com/2010/12/30/vim-ruby-refactoring-series/](http://justinram.wordpress.com/2010/12/30/vim-ruby-refactoring-series/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T05:36:37.690

我实际上是[https://github.com/sandeepravi/refactor-rails.vim](https://github.com/sandeepravi/refactor-rails.vim)的作者，该插件仍在开发中（尽管可用），我计划添加很多新功能 - 主要是 RubyMine 提供的功能。

RubyMine 也是一个出色的重构工具，但它占用大量内存并且速度很慢；虽然功能还不错。我基本上也想在 vim 上拥有这些功能。

虽然我有偏见 ;) ，vim 插件非常好，它只会改进。此外，与其他任何东西相比，它都很快（呃！）。

# visual-studio-2010 - 有没有人有一些链接/在线材料来解释编码的 UI 测试是如何工作的？

> ID：10387529
> 
> 赞同：0
> 
> 时间：2012-04-30T16:59:05.827
> 
> 标签：visual-studio-2010, unit-testing, ui-automation, coded-ui-tests, microsoft-ui-automation

我们使用 UI 自动化来自动化我们的应用程序，并希望将脚本从 UI 自动化移动到编码的 UI。我需要了解它在幕后是如何工作的。请分享任何可以提供一些想法的链接/文档。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:51:50.533

开始之前：最重要的（可能是交易障碍）是操作系统/浏览器兼容性：http: [//msdn.microsoft.com/en-us/library/dd380742.aspx](http://msdn.microsoft.com/en-us/library/dd380742.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:18:47.570

大部分入门信息都在这里：

[http://blogs.msdn.com/b/mathew_aniyan/archive/2010/02/11/content-index-for-coded-ui-test.aspx](http://blogs.msdn.com/b/mathew_aniyan/archive/2010/02/11/content-index-for-coded-ui-test.aspx)

所有主题的链接列表，让您开始。

# facebook - 当页面被喜欢时，og：描述标签不被尊重

> ID：10387530
> 
> 赞同：0
> 
> 时间：2012-04-30T16:59:26.657
> 
> 标签：facebook, facebook-opengraph

我已将 og:description 元标记添加到我的网页，元素的内容是页面的特定于语言环境的描述。通过查看页面源代码，我已验证元标记是否包含特定于语言环境的描述。但是，当最终用户喜欢该页面时，将改为发布该页面的英语描述。

我已经提供了所有必需的开放图形元素，如此[处](http://developers.facebook.com/docs/opengraphprotocol/)所述。我已经通过 FB 调试器运行了该页面，但没有收到任何错误或警告。有趣的是，在调试器中，og:description 也不是特定于语言环境的版本，而是英文版本！

这是 Open Graph 的已知问题吗？有没有其他人经历过这种情况，你做了什么来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T18:21:57.467

我通过将语言环境添加到 og:url 来使其工作，例如：

<meta property="og:url" content="http://mywebsite.com/myservlet?a_parameter=a_value&another_parameter=another_value&locale=fr_CA"/>

虽然这让我能够绕过这个问题，但根本问题 - og:description 属性没有得到尊重 - 仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:05:01.200

官方错误报告工具上有[12 个包含 og:description 的开放错误。](https://developers.facebook.com/bugs?search_view=search&&search_statuses%5B0%5D=open&search_texts%5B0%5D=og%3adescription)也许从那里开始？

# php - sql / php - 登录检查

> ID：10387531
> 
> 赞同：0
> 
> 时间：2012-04-30T16:59:28.027
> 
> 标签：php, sql

我有一个包含在我所有网页上的文件，其中包含 $db_login_status。它在该文件中设置为 0，当您在我的登录页面上输入正确的信息时，它会设置

```
$db_login_status = 1; 
```

或者，

```
$db_login_status = 2; 
```

取决于用户的水平。

如果某人未登录，我会尝试将他们重定向回登录页面，但是此代码只会使我的页面无法加载。根本不重定向我。

我在这里的某个地方出错了吗？谢谢。

```
<?php

// ----------------------
// Check for logged in

if ($db_login_status = 0;) {
     header("location: index.php");
     exit();
}

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T17:01:49.353

`;`在您的 if 语句中删除并再添加一个`=`

```
<?php

// ----------------------
// Check for logged in

if ($db_login_status == 0) {
     header("location: index.php");
     exit();
}

?> 
```

# linux - 搜索给定目录以外的文件

> ID：10387537
> 
> 赞同：1
> 
> 时间：2012-04-30T17:00:10.523
> 
> 标签：linux, shell, find

我有一个`./src`包含文件的目录。我想提取其中的所有文件`.c`，除了. 我已经尝试过`.c``./src/test`

```
find ./src -name "*.c" -and -not -name ./src/test 
```

（灵感来自[这里](https://stackoverflow.com/questions/4210042/exclude-directory-from-find-command)）但没有一个成功。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:02:49.587

你能用`grep`吗？

`find ./src -name \*.c | grep -v ./src/test`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T17:04:30.050

我会使用`grep -v`后过滤器，假设您的路径中没有换行符（空格可以）：

```
find ./src -name "*.c" | grep -v '/src/test/' 
```

我认为您的问题是只`-name`查看路径的最后一个元素，因此其中`-name`带有斜线的 a 根本不起作用。

如果您的版本`find`支持它，则使用`-path`代替`-name`可能会起作用：

```
find ./src -name "*.c" -and -not -path './src/test/*' 
```

注意修改后的操作数`-path`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T17:15:47.037

您想`-regex`匹配整个路径（`-name`仅匹配当前目录中的文件名）并`-prune`消除树的那部分：

```
find ./src -regex '^./src/test$' -prune -o -name '*.c' -print0 | xargs -0 .... 
```

`find``-print0`如果有人创建了一个带有空格的文件名（或者更糟的是换行符），那么没有几乎总是一个等待发生的问题。

# recursion - 计算 Scheme 中的对数

> ID：10387539
> 
> 赞同：1
> 
> 时间：2012-04-30T17:00:28.737
> 
> 标签：recursion, scheme

我有一个作业，我需要计算输入中的对数。

这是我到目前为止所拥有的：

```
(define x 0)

(define number-of-pairs
  (lambda (v)
    (if (pair? v)
        (+ x 1)
        (+ x 0)))) 
```

然后我按如下方式使用它：

```
(number-of-pairs (cons (cons 'a 'b) 'c)) 
```

在这里它应该产生 2，但它却产生 1，因为它只通过函数一次。如果我尝试

```
(number-of-pairs 10) 
```

它产生 0，因为没有对。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T19:21:43.733

您必须考虑两种情况：

1.  如果当前元素*不是*一对会发生什么？
2.  如果当前元素*是*一对会发生什么？

对于第二种情况，我们可以在总数中加一个，因为我们知道当前元素是一对，然后我们在这对的两个部分上调用递归——因为我们不知道其中任何一个是否在转一对。

以下是需要做什么的总体思路，请填空：

```
(define (number-of-pairs v)
  (if (not (pair? v))
      <???>
      (+ <???>
         (number-of-pairs <???>)
         (number-of-pairs <???>)))) 
```

使用这些示例来测试您的程序：

```
(number-of-pairs 10)
> 0

(number-of-pairs (cons (cons 'a 'b) 'c))
> 2

(number-of-pairs '(a b c))
> 3

(number-of-pairs (cons 'a (cons 'b (cons (cons 'c (cons (cons 'd '()) '())) '()))))
> 6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T18:31:59.237

使用武力，卢克！

呃。我的意思是使用设计配方。

请参阅如何设计程序中的 9.3 和 9.4 节：

[http://htdp.org/2003-09-26/Book/curriculum-ZH-13.html#node_sec_9.3](http://htdp.org/2003-09-26/Book/curriculum-Z-H-13.html#node_sec_9.3)

如果您不熟悉 HtDP，那么其理念是为您提供系统编写程序的工具，而不仅仅是提供示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:42:56.963

正如现在所写的那样，您的代码只会返回 1 或 0。为了使此过程按预期工作，您需要了解有关方案的两个重要事项：递归调用如何工作，以及赋值如何工作。

任务：

我在方案中写了一个非常深入的[赋值](https://stackoverflow.com/questions/9955074/scheme-assignment/10049112#10049112)分解，但在这种情况下，简短的版本是你没有改变`x`你调用时的值`(+ x 1)`。如果您想实际更改方案中绑定的值，则必须使用该`set!`过程（但在这种情况下您确实不需要这样做）。

递归：

回想一下，递归是当您从自身内部调用过程时。递归解决方案有两个必要元素：空值和归约公式。

在加法或减法的情况下，你的 null 值是 0，对于乘法它是 1，因为`cons`它是空列表`'()`。

减少公式是您如何将问题分解为更简单的部分，或者如何让问题更接近于每一步的解决。

例子：

```
(define count-elements
    (lambda (lst)
        (if (null? lst) 0 ; <-- I'm done? return the null value
            (+ 1 (count-elements (cdr lst)))))) ;<-- otherwise +1 and reduce the problem 
```

由于这是家庭作业，我不会为您明确解决这个问题，但您的答案应该与计数元素的形式基本相同，您只需要另一个谓词来确定您是否真的需要添加任何东西。

# asp.net-mvc-3 - 我可以在我的 asp.net MVC 中删除对象后检索对象属性吗

> ID：10387546
> 
> 赞同：0
> 
> 时间：2012-04-30T17:00:49.417
> 
> 标签：asp.net-mvc-3

我有以下 DeletePOST 操作方法：-

```
[HttpPost]
        public ActionResult Delete(int id)
        {
            try
            {
                var lb = repository.GetLabTest(id, false);

                repository.DeleteLabTest(lb);
                repository.Save();
                return Json(new { IsSuccess = "True", id = id, description = lb.Description }, JsonRequestBehavior.AllowGet);
            }
//code goes here.... 
```

当我编写代码时，我认为它会在 , 上返回错误`description = lb.Description`，因为我正在删除`lb`对象，然后`lb.Description`在`return Json`. 但是代码能够检索`Description`刚刚删除的对象的值。那么这是怎么发生的呢？BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:23:18.750

`var lb`该 IMO 是因为您从数据库中删除了对象而不是内存，如果您这样做，该对象的副本仍以 的形式驻留在内存中

```
repository.Save();
lb=null; 
```

那么您的代码将抛出异常，可能是对象引用未设置的排序

# sql - 如何在导入包含中间空行的平面文件时删除空格？

> ID：10387550
> 
> 赞同：4
> 
> 时间：2012-04-30T17:01:05.080
> 
> 标签：sql, ssis

我有一个非常简单的文本文件，其中包含两个大约 100 行长的逗号分隔值。该文件是由自动化过程（我无法控制）创建的，我通过 SSIS 将该文件导入 SQL。

我的工作非常好，除非文件中有空行。我的意思是它完全是空白的——没有逗号或其他字符。当文件中存在这个时，它后面的记录将被导入，在导入的值之前有**两个空格。**

例如，如果文本行包含“ABC,123”，则导入的 SQL 值将是第一列的“ABC”。我试图通过使用带有 TRIM 语句的派生列来删除它，但这没有效果。REPLACE 功能也不起作用。真正奇怪的部分是，如果我直接在数据流目标之前添加一个数据查看器，该值看起来很好。我什至添加了星号，以便我可以“看到”空格（如果存在），如下所示：

```
"*" + REPLACE([Column 0]," ","") + "*" 
```

这是一个**非常**烦人的问题，我将不胜感激任何建议。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T18:42:39.723

这是一种方法。您可以`Script Component`在*数据流任务*中使用转换来清理数据。

*   这是一个示例文件，代表与您的问题类似的数据。注意第二行有两个空格，没有实际数据。

![有问题的文件](../Images/946ca02fbca35a5d768afe752819735f.png)

*   当使用平面文件源和 OLE DB 目标将文件直接导入表时，在将第二行导入文件之前存在空白问题。

![无效数据](../Images/084e5eedf766527eabeda5c2810a013b.png)

*   要解决此问题，必须在平面文件和 OLE DB 目标之间引入脚本组件转换。拖放脚本组件时，选择*Transformation*。

![转型](../Images/6a7c232ca4999286ad2592511b6a5825.png)

*   您的数据流任务看起来像这样。

![数据流任务](../Images/6c065fa1ddfb2a86ac0bfcb8c61d06d3.png)

*   双击脚本组件以打开脚本转换编辑器。在输入列上，选择从文件中读取的第一列。在这种情况下，列是`Name`。

![输入列](../Images/d2e3c831c84096e364cd8a0da420677d.png)

*   在 Inputs and Outputs 部分，创建一个名为`CleansedData`data type的新列`string`。这个新列将保存没有空格的干净输出。

![输入和输出](../Images/52f7f793f48252c1fd7179de3318d813.png)

*   在脚本部分，单击编辑脚本按钮以打开脚本编辑器。

![脚本](../Images/89feb495abde2acd50662351209961ae.png)

*   在脚本编辑器中，更改方法中的代码，`Input0_ProcessInputRow`如下所示。此代码用空白文本替换回车 + 换行符，然后修剪文本周围的任何空格。

*脚本代码*：

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    Row.CleansedData = Row.Name.Replace(@"\r\n", string.Empty).Trim();
} 
```

![脚本代码](../Images/bb5d066e5911e6927fb50b683bbbf096.png)

*   现在，在您的 OLE DB 目标中，将旧列替换`CleansedData`为列映射部分中的这个新列。

*   进行上述更改后，对包含空格的同一文件执行包。这次在第二行之前没有插入空格。

希望有帮助。

![干净的数据](../Images/0f9292b17a6fa8015b1e59ad5ebe1f7a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:40:17.407

Got it - someone else replied to this in another forum. I needed to remove the invisible CRLF characters that were coming across like this:

```
LTRIM(REPLACE(REPLACE([Column 0],"\n",""),"\r","")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-07T16:05:47.610

这很有帮助！我不需要擦洗空格，而是需要时间擦洗，这篇文章向我展示了我所需要的。

这可能不是发布此内容的正确论坛，但这是我的代码片段：

```
 DateTime dt = DateTime.Now;
    string str_test = "";

    try
    {
        str_test = Row.SomeDate;

        if (str_test.Length == 8)
        {
            // date example: 20151231
            str_test = str_test.Insert(6, @"/");
            str_test = str_test.Insert(4, @"/");

            dt = Convert.ToDateTime(str_test);
            Row.CleansedDate = Row.SomeDate.;
        }
        else
        {
            // test for some other date
            dt = Convert.ToDateTime(str_test);
            Row.CleansedDate = Row.SomeDate;
        }
    }
    catch (Exception)
    {
        // this is not a date, return nothing
        Row.CleansedDate = null;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-09T14:03:40.673

确保在 Columns 菜单下的 Row Delimiter 下拉框中选择 {CR}{CL}。

# css - 需要帮助尝试通过 CSS 使网站更大。我已经包含了示例

> ID：10387552
> 
> 赞同：-1
> 
> 时间：2012-04-30T17:01:14.797
> 
> 标签：css, wordpress

我正在尝试创建一个更大的站点（响应式），例如 goo.gl/FnBGO ...我在 goo.gl/c9zLP 上运行相同的主题 - 看起来侧边栏图像的宽度为 370，将转到300 和小，因为您调整浏览器的大小。此外，我不确定是填充还是其他东西使我当前的侧边栏图像显示的宽度甚至小于 300（应该是这样）。期待任何反馈/建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:22:29.340

这是使用子主题和媒体查询完成的。有关如何完成此操作的更多信息，请参阅关于儿童主题的 wordpress 代码和 twitter 引导程序网站。

# javascript - Chosen.js 并验证 jquery

> ID：10387553
> 
> 赞同：14
> 
> 时间：2012-04-30T17:01:17.003
> 
> 标签：javascript, jquery, validation, jquery-chosen

我正在使用 validate.jquery.js ：工作正常。但是当我添加 selected.js 时，选择下拉列表的验证不再起作用。

这是我正在使用的 JS [http://pastebin.com/S9AaxdEN](http://pastebin.com/S9AaxdEN)

这是我的选择表格：

```
<select name="category" id="category" placeholder="" class="{validate:{required:true}}">
<option value=""><?php echo lang('category_choice'); ?></option>
<option value="vtt">VTT</option>
<option value="autre">Autre type de v&eacute;lo</option>
</select> 
```

不知道为什么 selected.js 禁用验证，知道吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T15:06:26.007

您可以通过将不采用属性“ignore”的类“chzn-done”添加到“validate.settings”来解决此问题：

```
var settings = $.data($('#myform')[0], 'validator').settings;
settings.ignore += ':not(.chzn-done)'; 
```

[例子](http://jsfiddle.net/adescalzo/ykL5d/)

HTML：

```
<form method="post" id="form1" action="">
    <fieldset>
        <legend>Login Form</legend>
        <div>
            <label>datos</label>
            <select name="data-select" title="data-select is required" class="chzn-select {required:true}" style="width:150px;">
                <option></option>
                <option value="1">uno</option>
                <option value="2">dos</option>
            </select>
        </div>
        <div>
            <label for="phone">Phone</label>
            <input id="phone" name="phone" class="some styles {required:true,number:true, rangelength:[2,8]}" />
        </div>
        <div>
            <label for="email">Email</label>
            <input id="email" name="email" class="{required:true,email:true}">
        </div>

        <div class="error"></div>
        <div>
            <input type="submit" value="enviar datos"/>
        </div>
    </fieldset>
</form> 
```

JS：

```
$(function() {

    var $form = $("#form1");

    $(".chzn-select").chosen({no_results_text: "No results matched"});
    $form.validate({
        errorLabelContainer: $("#form1 div.error"),
        wrapper: 'div',
    });

    var settings = $.data($form[0], 'validator').settings;
    settings.ignore += ':not(.chzn-done)';

    $('form').each(function(i, el){

        var settings = $.data(this, 'validator').settings;
        settings.ignore += ':not(.chzn-done)';

    });

}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T20:41:49.357

我只想为错误放置添加​​它，它将在隐藏旁边附加元素，因此您可能希望通过在验证函数上使用以下代码作为选项参数来更改放置

```
errorPlacement: function(error,element) {
        if (element.is(":hidden")) {
            //console.log(element.next().parent());
            element.next().parent().append(error);
        }
        else {
            error.insertAfter(element);
        }

    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-17T14:12:27.857

这不仅解决了无法查看验证的问题，而且还将标准的**“input-validation-error”**类应用于 selected.js 样式的选择。

有两种情况需要在提交表单和选择更改时都应用它。请参阅下面的三段代码。

1.  第一个设置表单验证以验证隐藏元素。
2.  第二个检查提交时选择的验证。
3.  第三个检查更改时选择的验证。

**设置表单验证以显示隐藏：**

```
var validator = $("#FormID").data('validator');
validator.settings.ignore = ":hidden:not(select)"; 
```

**检查表单提交：**

```
$('#FormID').on('submit', function () {
    var ChosenDropDowns = $('.chzn-done');
    ChosenDropDowns.each(function (index) {
        var ID = $(this).attr("id");
        if (!$(this).valid()) 
        {
            $("#" + ID + "_chzn a").addClass("input-validation-error");
        }
        else 
        {
            $("#" + ID + "_chzn a").removeClass("input-validation-error");
        }
    });
}); 
```

**检查选择更改：**

```
$(".chzn-select").chosen().change(function () {
    var ID = $(this).attr("id");
    if (!$(this).valid()) {
        $("#" + ID + "_chzn a").addClass("input-validation-error");
    }
    else {
        $("#" + ID + "_chzn a").removeClass("input-validation-error");
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-27T21:55:24.243

还有一个问题是在提交表单*后验证所选的选择菜单。*如果菜单上有验证错误，则将菜单更改为有效，验证错误不会消失。表单仍然可以提交，但由于显示了验证错误，因此并不明显。

`invalidHandler`这是使用and修复它的一个示例`valid()`。

```
// We'll use this flag so we don't have to validate fields before
// the form has been submitted.
var validatingForm = false;

// This line before validate() is called allows
// chosen menus to be validated
$.validator.setDefaults({ ignore: ":hidden:not(select)" });

$("#yourForm").validate({
    invalidHandler: function() {
        // Now we can validate the fields onChange
        validateForm = true;
    },
        rules: {
            // Probably your validation rules here
        }
    });

//  Now set an onChange event for the chosen menu
$("yourChosenMenu").change(function(){

    // Check that we've tried to submit the form
    if(validateForm) {
        // We tried to submit the form, re-validate on change
        $("yourChosenMenu").valid();
    }
}); 
```

# mysql - 获取某个类别中产品的平均价格

> ID：10387556
> 
> 赞同：0
> 
> 时间：2012-04-30T17:01:33.627
> 
> 标签：mysql, sql

我的数据库看起来像：

```
Table - Products
products_id 
products_price 

Table - Products_to_Categories
categories_id
products_id 

Table - Products_Descriptions
products_name

Table - Categories_Descriptions
categories_name 
```

还有一堆其他的专栏，但这些是我需要的。

我想选择以上所有列，但我还想得到**每个类别的平均产品价格**

我知道它可能会包含 AVG() 函数，但我尝试了一堆不同的查询（我有点学习），如果我能找出可行的方法，我会很烦恼。甚至可以只用一个查询来做到这一点吗？我现在无法理解它。

任何帮助将不胜感激。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:09:13.187

使用聚合函数时，您可能需要使用 GROUP BY 子句。

以下是使用 AVG 函数直接来自手册的示例：http: [//dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)

您的查询会稍微复杂一些，因为您需要加入您的表，但使用 group by 背后的想法是相同的。

如果您好奇，这里有更多关于 GROUP BY 的信息 [http://dev.mysql.com/doc/refman/5.6/en/group-by-modifiers.html](http://dev.mysql.com/doc/refman/5.6/en/group-by-modifiers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:04:56.330

这是一个针对一个类别的查询，然后您可以更改每个类别的类别 ID。

```
SELECT AVG(product_price) FROM Products WHERE products_id IN (SELECT products_id FROM Products_to_Categories WHERE categories_id = x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:30:05.990

加入表格，然后按 category_name 和/或 category_id 分组。Jrod 上面突出显示的链接是很好的参考：

```
SELECT AVG(p.product_price), c.category_name
FROM Products p
    INNER JOIN Products_to_Categories pc ON p.product_id = pc.product_id
    INNER JOIN Categories c on pc.category_id = c.category_id
GROUP BY c.category_name 
```

# ruby-on-rails - 奇怪的循环行为 - 这里发生了什么？

> ID：10387559
> 
> 赞同：0
> 
> 时间：2012-04-30T17:01:42.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

让我自己都对我认为的双循环感到困惑，不知道如何解决它。谁能救我免于完全发疯？

这在我的显示视图中有效：

```
<% @releases_tracks_temp.each do |releases_track| %>
  <tr>
    <td><%= releases_track.track.id %> / <%= releases_track.position %></td>
    <td><%= releases_track.track.name %>
        <%= releases_track.track.artists.map { |a| a.name}.join (", ") %></td>
    <td><%= releases_track.track.isrc %></td>
    <td><%#= link_to image_tag("icons/delete.png"), releases_track, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %> 
```

我正在尝试使用自定义操作和视图为多个轨道呈现表单：

```
<%= form_for @release do |f| %>
  <%= f.fields_for :tracks do |builder| %>
     <%= render 'track_fields', :f => builder %>
  <% end %>
  <%= link_to_add_fields "Add track", f, :tracks %> 
```

然后是字段本身：

```
<% @releases_tracks_temp.each do |releases_track| %>
  <%= f.text_field :name, :class => "text" %>
  <%= f.text_field :artist_tokens, "data-pre" => releases_track.track.artists.map(&:attributes).to_json, :class => "track_artist_tokens" %>
  <%= f.text_field :version, :class => "text" %>
  <%= f.text_field :isrc, :class => "text" %>
  <%= f.select(:asset_tier, options_for_select([['Front', 'Front'], ['Mid', 'Mid'], ['Back', 'Back']]), {}, :class => "tier-select") %>
  <%= f.text_field :preview_start, :class => "text small" %>
  <%= f.check_box :parental_advisory %>
  <%= f.check_box :available_separately, {:checked => true} %>
  <%= f.check_box :_destroy %>
<% end %> 
```

我最终让它循环，但是这个数字有很多轨道，例如 5 轨道显示 5 次！所以25个结果。我想我看到了一个双循环，但我不确定如何解决这个问题，并且仍然可以通过以下方式访问每个轨道的（多个）艺术家：

```
releases_track.track.artists.map(&:attributes) 
```

有任何想法吗？

哦，@releases_tracks_temp 在我的发布控制器中定义为：

```
 @releases_tracks_temp = @release.releases_tracks.find(:all, :order => "position") 
```

轨道被接受为嵌套在版本下。

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:54:04.137

对于每个版本，每个轨道打印列表。无需在轨道上循环两次

有一个表格而不是 2 个

```
<%= form_for @release do |f| %>
  <%#= f.fields_for :tracks do |builder| %>
    <%= render 'track_fields', :f => f %>
  <%# end %>
<% end %> 
```

编辑 - 以这种方式尝试

```
<%= form_for([@release, @release.tracks.build]) do |f| %>
  <%= f.text_field :name, :class => "text" %>
  <%= f.text_field :artist_tokens, "data-pre" => releases_track.track.artists.map(&:attributes).to_json, :class => "track_artist_tokens" %>
  <%= f.text_field :version, :class => "text" %>
  <%= f.text_field :isrc, :class => "text" %>
  <%= f.select(:asset_tier, options_for_select([['Front', 'Front'], ['Mid', 'Mid'], ['Back', 'Back']]), {}, :class => "tier-select") %>
  <%= f.text_field :preview_start, :class => "text small" %>
  <%= f.check_box :parental_advisory %>
  <%= f.check_box :available_separately, {:checked => true} %>
  <%= f.check_box :_destroy %>

  <%= link_to_add_fields "Add track", f, :tracks %>
<% end %> 
```

# ruby-on-rails - Nginx - 乘客 - Rails 3.2没有响应

> ID：10387563
> 
> 赞同：0
> 
> 时间：2012-04-30T17:01:54.740
> 
> 标签：ruby-on-rails, ruby, nginx, passenger

我正在努力让我的 rails 3.2 应用程序在 nginx-passenger-ruby 1.9.3 设置上运行。

这是我已经做过的：

```
installed passenger gem
installed rvmsudo passenger-install-nginx-module 
```

我在 /opt/nginx/conf/nginx.conf 将它添加到我的 nginx conf

```
server {
  listen 80;
  passenger_enabled on;
  passenger_spawn_method smart;
  rails_env staging;
  root /var/rails/current/public;
} 
```

我通过 Capistrano 进行了部署，一切似乎都已正确部署。我在第一次尝试时遇到了一些问题（找不到database.yml）并且出现了乘客异常页面，所以我猜乘客正在运行。

如果模型中存在错误，乘客异常页面也会显示，因此乘客似乎可以访问所有代码。

修复此问题后，Rails 应用程序似乎没有启动。`HTTP 504`staging.log 保持空白，几分钟后对我的域的调用最终会出现错误。

**[像http://mydomain.com/500.html](http://mydomain.com/500.html)****这样的 rails 公共目录中的静态错误页面可以** 毫无问题地提供。

这种行为的原因是什么？我可以检查乘客/nginx 日志文件吗？

更新：我在 EC2 Ubuntu 实例上运行所有这些 - 也许这很重要。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T11:26:20.617

经过数小时试图找到错误后，我决定使用 Ubuntu 11.04 而不是 Ubuntu 12 设置一个新实例，并且它在完全相同的设置下没有任何问题！

# android - java未知主机异常android

> ID：10387565
> 
> 赞同：2
> 
> 时间：2012-04-30T17:02:01.520
> 
> 标签：android, httprequest

大家好，我正在尝试连接到我在服务器上的网页。我已经检查了我的代码，其中没有错误，它可以在模拟器上运行，但是我在实际设备上强制关闭，并且日志中显示未知主机异常。有没有其他人遇到过这个。

http 连接java.net.UnknownHostException 中的错误：my.url.com

```
 try{

     HttpClient httpclient = new DefaultHttpClient();
     HttpPost httppost = new HttpPost("http://my.url.com/test/stock.php");
     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
     HttpResponse response = httpclient.execute(httppost);
     HttpEntity entity = response.getEntity();
     is = entity.getContent();
     }catch(Exception e){
         Log.e("log_tag", "Error in http connection"+e.toString());
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T17:18:12.720

首先，做一个快速的健全性检查，确保您可以使用浏览器从您的设备访问该 URL。如果没有，那么您的设备上存在 wifi/连接问题。

如果您从浏览器访问 URL 没有问题，请确保您在 Android 清单中设置了正确的权限：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

# css - IE7 和 IE8 中的响应式网站问题

> ID：10387569
> 
> 赞同：0
> 
> 时间：2012-04-30T17:02:08.330
> 
> 标签：css, html, internet-explorer-8, internet-explorer-7

我正在尝试使标准站点具有响应性。到目前为止，它适用于 IE9、Firefox 和 Chrome，但它在 IE7 和 IE8 中失败，即使有内联黑客：

[http://surfingthebluemarble.com/rtest2.html](http://surfingthebluemarble.com/rtest2.html)

正在发生的事情是，在 IE7 和 IE8 中，当 div 达到 99% 宽度时，它们无法堆叠。

一如既往地感谢您的帮助。

翁布雷

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T17:12:06.310

您正在使用 CSS 媒体查询，这在旧版本的 IE 中不起作用。

你需要[respond.js](https://github.com/scottjehl/Respond)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T09:31:38.413

IE 小于 9 不支持开箱即用的媒体查询。

使用像 css3-mediaqueries-js 或 Respond 这样的扩展。 [https://code.google.com/p/css3-mediaqueries-js/](https://code.google.com/p/css3-mediaqueries-js/)

# python - 使用 Python 插入 Google 融合表

> ID：10387575
> 
> 赞同：0
> 
> 时间：2012-04-30T17:02:31.753
> 
> 标签：python, google-fusion-tables

我需要一些帮助，使用 python 写入 Google Fusion Tables。我可以阅读它们，但那是一个 GET，我认为我需要一个 POST。

下面是我最接近的尝试，但我被卡住了。

```
import httplib, urllib
query = 'sql=INSERT INTO 3686128 (column1, column2) VALUES (12,16)'
params = urllib.urlencode({'sql': query})
##headers = {"Content-type": "application/x-www-form-urlencoded","Accept": "text/plain"}
conn = httplib.HTTPConnection("https:\\www.google.com\fusiontables\api\query", 80)
conn.request("POST", "", params)#, headers)
response = conn.getresponse()
print response.status, response.reason
data = response.read()
print data
conn.close() 
```

谢谢！

-卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:52:20.660

您需要登录才能进行插入或更新。[Google Code fusion-table-client-python](http://code.google.com/p/fusion-tables-client-python/)中有一个不错的 python 库可以为您处理大部分内容，其中包括[示例代码](http://code.google.com/p/fusion-tables-client-python/source/browse/#svn%2Ftrunk%2Fsrc%2Fsamples)。

# asp.net - 向下拉列表添加额外选项

> ID：10387577
> 
> 赞同：2
> 
> 时间：2012-04-30T17:02:46.847
> 
> 标签：asp.net

我有一个从 sqldatasource 填充的 asp.net 下拉列表。我的问题是第一个选项必须是（全部）。无论如何要在 eqldatasource 列表之前将此额外选项添加到列表中？

```
 <asp:DropDownList ID="REGIONS" runat="server" 
      Width="70px"  AutoPostBack="True" DataTextField="REGION_CD" 
      DataValueField="REGION_CD" DataSourceID="SqlDataSource1"  >
     </asp:DropDownList>

     <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
      ConnectionString="<%$ ConnectionStrings:PRODUCTION %>" 
      ProviderName="<%$ ConnectionStrings:PRODUCTION.ProviderName %>" 
      SelectCommand="select distinct(region_cd) from mv_gauge_filter_dist where     region_cd is not null">
  </asp:SqlDataSource> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T17:16:28.253

未经测试，但这应该可以工作：

```
<asp:DropDownList ID="REGIONS" AppendDataBoundItems="true" runat="server" 
  Width="70px"  AutoPostBack="True" DataTextField="REGION_CD" 
  DataValueField="REGION_CD" DataSourceID="SqlDataSource1"  >
  <asp:ListItem Text="ALL" Value="" />
 </asp:DropDownList>

 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
  ConnectionString="<%$ ConnectionStrings:PRODUCTION %>" 
  ProviderName="<%$ ConnectionStrings:PRODUCTION.ProviderName %>" 
  SelectCommand="select distinct(region_cd) from mv_gauge_filter_dist where region_cd is not null">
</asp:SqlDataSource> 
```

记下 AppendDataBoundItems="true"...

# java - Java 静态作用域

> ID：10387581
> 
> 赞同：5
> 
> 时间：2012-04-30T17:03:09.370
> 
> 标签：java

我有以下一段取自 Sun Certified Java Programmer 模拟考试的代码：

```
public class Static
{ 
      static 
      { 
            int x = 5; 
      }

      static int x,y; 
      public static void main(String args[]) 
      { 
            x--; myMethod(); 
            System.out.println(x + y + ++x); 
      }

      public static void myMethod() 
      { 
             y = x++ + ++x; 
      }
} 
```

测试要求您提供此行的结果：

```
System.out.println(x + y + ++x); 
```

答案是 3，但我不完全理解为什么是 3。如果我完全忽略，我可以得出那个答案：

```
 static 
      { 
            int x = 5; 
      } 
```

我的问题是，上面的代码片段是什么意思？为什么它不改变变量'x'的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T17:05:57.353

那是一个*静态初始化块*。但这在这种情况下并不重要，因为它正在修改本地变量的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T17:06:26.840

`int x = 5;`确实被执行了，但`x`这里是一个局部变量，而不是`static int x`成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:06:56.110

它是一个静态块，因此您在那里定义的变量不能超出.`{`和. 的范围`}`。工作 - 在这个意义上 - 与方法相同的方式

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T17:06:57.243

它改变了名为 的局部变量的值`x`，但不改变名为的静态成员字段，`x`即它只是 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T17:06:48.833

x 的值设置为 5，但仅在静态块的上下文中

```
static 
      { 
            int x = 5; 
      } 
```

中声明的变量 x`static int x,y;`具有类级别的范围，并受引用它的其余代码的影响。

# iphone - 通过特定属性检查数组是否包含对象，objective-c

> ID：10387582
> 
> 赞同：3
> 
> 时间：2012-04-30T17:03:10.450
> 
> 标签：iphone, objective-c

我有两个自定义对象数组。两者都具有 NSString *name 的属性。我想检查是否

```
object.name in array1 == object.name in array2 
```

我该怎么做？我必须形成一个谓词吗？我知道我可以强行使用它，只需枚举 array2 中的对象以检查它是否具有相同的名称，但我不知道是否有更好或理想的方法来完成这项任务。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:17:15.320

使用 NSMutableSet 的`intersectSet:`方法。

1.  拉出要相交的属性值数组，并将第一个数组转换为可变集：`NSMutableSet *setA = [NSMutableSet setWithArray:[arrayA valueForKey:@"name"]];`

2.  将它与数组 B 中的属性值相交。`[setA intersectSet:[NSSet setWithArray:[arrayB valueForKey:@"name"]];`

如果你想把它组合成一条很长的线，你可以这样做：

```
NSSet *commonProperties = [[NSMutableSet setWithArray:[arrayA valueForKey:@"name"]] intersectSet:[NSSet setWithArray:[arrayB valueForKey:@"name"]]]; 
```

当然，这只会给你 name 属性，而不是对象本身。如果您想要整个对象，请覆盖`isEqual:`并在那里进行名称检查。然后您可以消除该`valueForKey:`部分并与两组相交。

其余值将是公共值。`NSSet`字符串比较在对象`isEqualToString:`的幕后使用`NSString`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:11:17.370

你想的很好。在您知道类型的范围内，指定它们以便编译器和将来阅读代码的人清楚。此外，使用 isEqualToString: 比较字符串。

```
for (Foo *foo in myFooCollection) {
    for (Bar *bar in myBarCollection) {
        if ([foo.name isEqualToString:bar.name]) {
            // match
        }
    }
} 
```

您可能会考虑的另一件事是在 Foo 和 Bar 对象上实现 compare:。

```
// Foo.m
- (NSComparisonResult)compare:(id)otherObject {
    if ([otherObject isKindOfClass:[Bar self]]) {
        Bar *itsABar = (Bar *)otherObject;
        return [self.name compare:itsABar.name];
    } 
    return [super compare:otherObject];
} 
```

酒吧也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:15:03.247

即使您使用谓词，在内部它也会获取数组中的每个对象并进行比较。数组`collection`不是原始数据类型，无法一次性进行比较。

# c# - 如何在 C# 中隐藏/取消隐藏进程？

> ID：10387586
> 
> 赞同：5
> 
> 时间：2012-04-30T17:03:32.143
> 
> 标签：c#, visual-studio-2010, process

我正在尝试在 Visual C# 2010 - Windows Forms 应用程序中启动一个外部进程。目标是将进程作为隐藏窗口启动，并在以后取消隐藏该窗口。

我更新了我的进度：

```
//Initialization
[DllImport("user32.dll")]
private static extern bool ShowWindow(IntPtr hwnd, int nCmdShow);
[DllImport("user32.dll")]
private static extern bool EnableWindow(IntPtr hwnd, bool enable);
[DllImport("user32.dll")]
private static extern bool MoveWindow(IntPtr handle, int x, int y, int width, 
int height, bool redraw);

SW_SHOW = 5; 
```

以下内容放在我的主要功能中：

```
ProcessStartInfo info = new ProcessStartInfo("process.exe");
info.WindowStyle = ProcessWindowStyle.Hidden;
Process p = Process.Start(info);

p.WaitForInputIdle();
IntPtr HWND = p.MainWindowHandle;

System.Threading.Thread.Sleep(1000);    

ShowWindow(HWND, SW_SHOW);
EnableWindow(HWND, true);
MoveWindow(HWND, 0, 0, 640, 480, true); 
```

但是，由于该窗口是作为“隐藏”启动的`p.MainWindowHandle = 0`。我无法成功显示窗口​​。我也试过`HWND = p.Handle`没有成功。

有没有办法为我的窗口提供一个新的句柄？这可能会解决我的问题。

参考：

[MSDN 展示窗口](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)

[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/windowsmobiledev/thread/12d1840d-e894-4097-ae41-46e69bb5b5c0/)

[如何导入 .dll](http://en.csharp-online.net/Attributes)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T15:44:54.017

最后，该过程运行正常。感谢您的所有帮助，我想出了这个修复程序。

p.MainWindowHandle 为 0，所以我不得不使用 user32 FindWindow() 函数来获取窗口句柄。

```
//Initialization
int SW_SHOW = 5;

[DllImport("user32.dll",SetLastError=true)]
private static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

[DllImport("user32.dll")]
private static extern bool ShowWindow(IntPtr hwnd, int nCmdShow);

[DllImport("user32.dll")]
private static extern bool EnableWindow(IntPtr hwnd, bool enabled); 
```

在我的主要功能中：

```
ProcessStartInfo info = new ProcessStartInfo();
info.FileName = "notepad";
info.UseShellExecute = true;
info.WindowStyle = ProcessWindowStyle.Hidden;

Process p = Process.Start(info);
p.WaitForInputIdle();
IntPtr HWND = FindWindow(null, "Untitled - Notepad");

System.Threading.Thread.Sleep(1000);

ShowWindow(HWND, SW_SHOW);
EnableWindow(HWND, true); 
```

参考：

[pinvoke.net: FindWindow()](http://pinvoke.net/default.aspx/user32/FindWindow.html)

编辑：从 dllImport 声明中删除了 WindowShowStyle：您可以将其定义为 int 。我定义了一个名为 WindowShowStyle 的枚举来定义[本文](https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-showwindow)中概述的常量。定义枚举而不是使用常量或硬编码值更适合我的编码模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:31:21.780

取消隐藏窗口的示例代码：

```
int hWnd;
Process[] processRunning = Process.GetProcesses();
foreach (Process pr in processRunning)
{
    if (pr.ProcessName == "notepad")
    {
        hWnd = pr.MainWindowHandle.ToInt32();
        ShowWindow(hWnd, SW_HIDE);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:15:29.753

要使用的文档详细信息也`ProcessWindowStyle.Hidden`必须设置`ProcessStartInfo.UseShellExecute`为 false。 [http://msdn.microsoft.com/en-us/library/system.diagnostics.processwindowstyle.aspx](http://bit.ly/KoEj1j)

您必须以某种方式知道窗口句柄才能在以后取消隐藏它。

# javascript - Mootools - 如何链接多个 jsonp 请求

> ID：10387587
> 
> 赞同：0
> 
> 时间：2012-04-30T17:03:34.737
> 
> 标签：javascript, api, mootools, cross-domain, jsonp

我正在使用 youtube api 来检索视频列表的信息。所以我必须使用 Request.JSONP 类。

我的问题是我必须对 youtube API 进行多次调用，但我无法将其设为“链式”。文档说我只需要添加选项`link:'chain'`并在同步模式下使用`async:false`（女巫在简单的请求对象上工作正常）。

这是我尝试过的：

```
var MyClass = new Class({
    listVideos: [],
    videosInfo: [],
    initialize : function(listVideos){
        this.listVideos = listVideos;
        this.getVideosInfo();
    },
    getVideosInfo : function(){
        var request = new Request.JSONP({
            callbackKey: 'callback',
            link : 'chain',
            async : false,
            onComplete: function(data){
                this.videosInfo.push(data.entry);
                console.log(this.videosInfo);
            }.bind(this)
        });

        this.listVideos.each(function(videoId){
            request.options.url = 'http://gdata.youtube.com/feeds/api/videos/' + videoId + '?v=2&alt=json-in-script&format=5';
            request.send();
        });
        console.log("this should be displayed AFTER the requests, not BEFORE u_u");
        console.log(this.videosInfo);
    }
});

var test = new MyClass(['AJso1SJT7Js','hlO5UBxuJlY']) 
```

这是[jsfiddle](http://jsfiddle.net/pleasedontbelong/RNJAK/)，所以你可以玩它 n_n

基本上我想要的是`videosInfo`在所有请求完成后处理数组。

有任何想法吗？

提前致谢

**PS：** 我为我的问题找到了一个“肮脏的解决方案”，[http://jsfiddle.net/pleasedontbelong/gLF5h/1/](http://jsfiddle.net/pleasedontbelong/gLF5h/1/) 但如果其中一个请求失败，我一点也不觉得舒服......失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T23:50:27.123

您可能不应该 disable `async`，以免在 HTTP 请求和响应期间冻结 UI 线程。

[Request.JSONP](http://mootools.net/docs/more/Request/Request.JSONP) API 支持`onComplete`回调。

`onComplete`您可以通过让每个调用后续请求来链接请求而不会失去 AJAX 的异步特性。

# emacs - 如何为 emacs 宏和/或查询替换添加动态触摸？

> ID：10387588
> 
> 赞同：5
> 
> 时间：2012-04-30T17:03:49.013
> 
> 标签：emacs, lisp, elisp

我经常发现自己需要连续执行几个查询和替换操作，因为例如我想将一行中所有出现的 23 更改为 24，然后将下一行中的 24 更改为 25，依此类推（通常是因为我写一行中的一个表达式，我在后续行中多次拉取并需要稍微修改）...

在这样的情况下，具有 Cx q 或常规执行多个查询替换的宏似乎不够强大..是否有更通用/灵活的方法来处理像这样的变量替换或变量宏变体，我可以研究一下？我相信我曾经在网上遇到过一个示例，其中将 lisp 表达式引入某些命令以使其更强大，但我不记得这个或我在哪里读到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T19:22:07.083

我不确定这是否完全回答了您的问题，但我发现寄存器是构建强大宏的有用工具。最重要的功能是：

*   `C-x r n` `number-to-register`将该点的数字复制到寄存器中
*   `C-x r +` `increment-register`递增存储在寄存器中的值
*   `C-x r i` `insert-register`将寄存器的值插入缓冲区

使用这些函数，您可以解决将每行上的递增数字替换为：

*   将第一个数字播种到寄存器中`number-to-register`
*   开始宏定义
*   选择一行
*   `replace-string`, `insert-register`, `increment-register`,`insert-register`
*   移动到下一行的开头
*   结束宏定义

在 emacs 手册中有更多关于寄存器的信息：[https ://www.gnu.org/software/emacs/manual/html_node/emacs/Registers.html](https://www.gnu.org/software/emacs/manual/html_node/emacs/Registers.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T11:03:57.420

除了巧妙地使用现有命令（例如 ataylor 所示的命令）外，还可以使用键盘宏来执行几乎任意复杂的动态行为。

特别要注意的是，`C-u``M-:`会将您输入的任何 elisp 表单的结果插入到当前缓冲区中——当然，该表单可以作为宏的一部分构建——因此，即使不存在用于特定操作的命令，您也可以不太可能阻止使用宏来实现您的目标。

（当然，如果 elisp 不是答案，`C-u``M-!`也`C-u``M-|`可以让您轻松访问合并 shell 命令输出。）

当然，在某些情况下，可以使用更有针对性的解决方案，而宏比它的价值更麻烦（评论中链接的“使用 elisp 评估搜索和替换”技术也非常强大，而且通常是理想的解决方案）；然而，键盘宏也提供了惊人的功能，而且只需极少的努力，并且可以轻松完成一些您可能难以实现的事情。

我最喜欢的示例之一是在一个缓冲区中使用“旧 -> 新”映射数据（几乎可以采用任何可以想象的格式），并使用它对另一个缓冲区中的这些值执行搜索和替换。只需简单的移动和编辑击键，您就可以临时做这种事情的速度是惊人的。

如果第一次不正确，宏编辑器还可以轻松调整宏，而无需重新记录所有步骤。

有一次我读到了一些有用的建议，它只是想在遇到不平凡的事情时始终考虑是否可以使用键盘宏来完成任务。您使用它们的次数越多，您就越会意识到*可以*使用它们的不同方式，很快您的工具箱中就会出现一个新的不可或缺的工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T13:32:46.323

您询问的具体情况听起来像是使用的理想场所`query-replace-regexp`。

```
M-x query-replace-regexp
Regexp: \([0-9]+\)
Replace with: \,(+ 1 (string-to-number \1)) 
```

该用法将找到所有一组一个或多个数字（Emacs 正则表达式不支持`\d`）并用它们的增量替换它们，每次都会提示。

关键要点是：

*   捕获的组是您可以在替换操作中调用的字符串
*   您可以将任意代码拼接到替换操作中`\,`
*   您可以在以这种方式拼接的任何代码中使用捕获的组作为参数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T14:06:06.467

这是您陈述的问题的另一种可能的解决方案，使用 elisp 替换和键盘宏计数器，您可以使用数字前缀参数作为种子。

（我不会说这*更好*，但它展示了另一个可用的选项。）

所以假设 23 是起始数字，您可以定义以下宏，从：

`C-2``C-3``F3`

```
C-SPC       ;; set-mark-command
C-e         ;; move-end-of-line
<<replace-regexp>>  ;; replace-regexp
<f3>        ;; kmacro-start-macro-or-insert-counter
C--         ;; negative-argument
M-@         ;; mark-word
M-w         ;; kill-ring-save
RET         ;; indent-new-comment-line
\           ;; self-insert-command
,(1+        ;; self-insert-command * 4
SPC         ;; self-insert-command
C-y         ;; yank
)           ;; self-insert-command
RET         ;; indent-new-comment-line 
```

并`F4`停止录制。

（注：此宏假定区域中的每一行都包含序列中的一个值。）

然后突出显示剩余的行并使用`C-x``C-k``r`更新该区域中的所有行。

您可以将宏计数器重新设置为任何所需的值，`C-x``C-k``C-c`以便在另一个区域重新播放宏。

并且根据您的数据的实际外观，您可以通过完全消除替换正则表达式来大大简化它，而只是移动到您知道数字所在的位置，删除现有数字，并在其位置插入计数器值。

# java - MongoDb 聚合

> ID：10387592
> 
> 赞同：2
> 
> 时间：2012-04-30T17:04:19.010
> 
> 标签：java, mongodb, mongodb-query, aggregation-framework, nosql

如何使用 mongdoDb 聚合编写 simial 查询

```
select count(*) as ccount from a group by a.someField order by ccount desc limit 1 
```

使用 mondoDb 中的组函数，我想按特定键对我的集合进行分组并返回 1 行，这种情况发生得更频繁

下面的 Java 代码，返回列表，在字段 someField 上应用 group by 并返回元素集合，其中每个元素都有 2 个字段，“someField”和“count”（出现次数）我想避免在客户端上进行第二次迭代一边找出最大计数

```
new GroupCommand(myCollection,
                 new BasicDBObject("someField ", true),
                 null,
                 new BasicDBObject("count", 0),
                "function(key,val){ val.count++;}", 
                 null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:40:13.210

MongoDB 的 group 命令无法使用 SQL 的 order 或 limit 之类的东西。当前开发版本（2.1 版）中的聚合框架提供了 $sort 和 $limit 运算符：

[http://www.mongodb.org/display/DOCS/Aggregation+Framework](http://www.mongodb.org/display/DOCS/Aggregation+Framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T17:12:22.773

在 mongoDB 3 中，您可以使用限制并跳过：

[http://docs.mongodb.org/manual/reference/operator/aggregation/](http://docs.mongodb.org/manual/reference/operator/aggregation/)

# php - Adobe 是否提供用于将 HTML 转换为 PDF 的服务器端库？

> ID：10387594
> 
> 赞同：2
> 
> 时间：2012-04-30T17:04:24.957
> 
> 标签：php, pdf, adobe

我联系了 Adob​​e，被调了五次，没有人理解我的问题。感谢土坯！

我知道有大量的第三方应用程序可以做到这一点，但其中大多数是远程转换的（其中最好的是 pdfcrowd.com）。有一些提供本地库（princexml.com），但它们不支持我需要的所有功能（例如 UTF8）。

我假设 Adob​​e 是该领域的专家（尽管根据我今天早上的电话重新考虑）。我想知道他们是否提供我可以用来在我自己的服务器上生成 PDF 的库/api（最好带有 PHP 接口）。

2012 年 5 月 29 日星期二 17:13:44 - 仅供参考，我最终选择了[pdfcrowd](http://pdfcrowd.com)。尽管它是一项远程服务，但它提供了我发现的最一致和最有吸引力的转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:10:30.137

我之前使用过[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)几次，效果很好。我怀疑 Adob​​e 是否有任何产品可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T23:09:27.543

还有这个是完全免费的！

[http://simplehtmltopdf.com](http://simplehtmltopdf.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:09:45.153

我对[wkpdf](http://plessl.github.com/wkpdf/)很幸运，但它只是 Mac OS。我听说过关于[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)的好消息，但我从未使用过它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T17:07:43.170

我喜欢这个：[http ://www.fpdf.org/](http://www.fpdf.org/)

# javascript - 页面滚动，保持页面垂直，而部分页面是水平的

> ID：10387596
> 
> 赞同：0
> 
> 时间：2012-04-30T17:04:32.383
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个页面，其中整个页面在垂直方向上很长（超过 3000 像素），并且某些页面可以滚动到超出原始页面宽度的右侧。我现在一直在寻找答案，但我似乎无法让它正常工作。

基本上，页面设置为仅查看宽度为 1024 像素的视图。在页面的大约一半处，我希望它滚动所有 4000 像素的宽度并设置 768 像素的高度。一旦用户通过该部分，宽度就会恢复到原来的 1024 像素。简而言之，我就像一个 T 形路口。

我只能使用 HTML、CSS、javascript 和 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-08T10:16:32.600

溢出 CSS 属性使您可以直接在 div 中嵌入滚动条。您可以通过使第二部分的内容更宽并使用此属性来创建页面。

HTML：

```
<section>
    <div class="wider">
        <!--Your wider content-->
    </div>
</section> 
```

CSS：

```
section{
    overflow-x: scroll;
    overflow-y: hidden;
}

.wider{
    width: 200%;
} 
```

这是一个演示：http: [//jsfiddle.net/y42Dw/](http://jsfiddle.net/y42Dw/)

# mysql - 如何在 MySQL 中使用通配符搜索和替换字符串？

> ID：10387601
> 
> 赞同：0
> 
> 时间：2012-04-30T17:04:49.477
> 
> 标签：mysql, sql

在我的数据库中，有这样的东西：

```
<span class=\"zem_slink freebase/guid/9202a8c04000641f80000000001656cc\">
<span class=\"zem_slink freebase/guid/9202a8c04000641f80000000001656cc\">
<span class=\"zem_slink freebase/guid/9202a8c04000641f800000000654556cc\">
<span class=\"zem_slink freebase/guid/920ddhdjh6667001656cc\"> 
```

如何选择从类到结尾的所有内容“（不删除跨度）并使用 SQL 查询删除它们？

# c# - P/Invoke ioctl 系统调用

> ID：10387603
> 
> 赞同：4
> 
> 时间：2012-04-30T17:05:00.963
> 
> 标签：c#, linux, mono, pinvoke

我正在开发一个需要与 Video4Linux 抽象交互的应用程序。该应用程序是用 C# 开发的，使用 mono 框架。

我面临的问题是我无法 P/Invoke`ioctl`系统调用。或者，更准确地说，我可以 P/Invoke 它，但它崩溃得很厉害。

外部声明如下：

```
[DllImport("libc", EntryPoint = "ioctl", SetLastError = true)]
private extern static int KernelIoCtrl(int fd, int request, IntPtr data); 
```

到现在为止还挺好。

使用的实际例程`KernelIoCtrl`如下：

```
protected virtual int Control(IoSpecification request, object data)
{
    GCHandle dataHandle;
    IntPtr dataPointer = IntPtr.Zero;

    try {
        // Pin I/O control data
        if (data != null) {
            dataHandle = GCHandle.Alloc(data, GCHandleType.Pinned);
            dataPointer = dataHandle.AddrOfPinnedObject();
        }
        // Perform I/O control
        int result =  KernelIoCtrl(mFileDescriptor, request.RequestCode, dataPointer);
        int errno = Marshal.GetLastWin32Error();

        // Throw exception on errors
        if (errno != (int)ErrNumber.NoError)
            throw new System.ComponentModel.Win32Exception(errno);

        return (result);
    } finally {
        if (dataPointer != IntPtr.Zero)
            dataHandle.Free();
    }
} 
```

上面所有的代码看起来都不错。该类`IoSpecification`用于计算遵循标头规范的 I/O 请求代码（基本上它遵循`_IOC`在`/usr/include/linux/asm/ioctl.h`.

参数是一个结构体`data`，声明如下：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct Capability
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 16)]
    public string Driver;

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]
    public string Device;

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]
    public string BusInfo;

    public UInt32 Version;

    public CapabilityFlags Capabilities;

    [MarshalAs(UnmanagedType.ByValArray, SizeConst=4)]
    public UInt32[] Reserved;
} 
```

它应该模仿以下结构（在 声明`/usr/include/linux/videodev2.h`）：

```
struct v4l2_capability {
    __u8    driver[16];     /* i.e. "bttv" */
    __u8    card[32];       /* i.e. "Hauppauge WinTV" */
    __u8    bus_info[32];   /* "PCI:" + pci_name(pci_dev) */
    __u32   version;        /* should use KERNEL_VERSION() */
    __u32   capabilities;   /* Device capabilities */
    __u32   reserved[4];
}; 
```

在发生崩溃之前，IOCTL 请求代码计算存在问题，并且`KernelIoCtrl`按预期工作（返回`errno`等于*EINVAL*）。当我纠正错误（并且确实具有正确的 IOCTRL 请求代码）时，调用已开始导致崩溃。

总之，结构编组似乎存在问题，但我看不出它出了什么问题。

我担心问题出在变量参数列表上，因为*ioctl*例程声明如下（取自 man）：

```
int ioctl(int d, int request, ...); 
```

但是我看到很多代码将上述例程声明为`int ioctl(int d, int request, void*);`，并且我可以确保特定的 IOCTRL 请求只接受一个参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T17:44:45.200

*示例用法：*

```
Capability capability;

if (UnsafeNativeMethods.Ioctl(handle, request, ref capability) == -1)
{
    throw new UnixIOException();
} 
```

*能力：*

```
[StructLayout(LayoutKind.Sequential, Size = 104)]
internal struct Capability
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 16)]
    public string Driver;

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]
    public string Device;

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]
    public string BusInfo;

    public uint Version;

    public CapabilityFlags Capabilities;
} 
```

*UnsafeNative 方法：*

```
internal static class UnsafeNativeMethods
{
    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
    [DllImport("libc", EntryPoint = "close", SetLastError = true)]
    internal static extern int Close(IntPtr handle);

    [DllImport("libc", EntryPoint = "ioctl", SetLastError = true)]
    internal static extern int Ioctl(SafeUnixHandle handle, uint request, ref Capability capability);

    [DllImport("libc", EntryPoint = "open", SetLastError = true)]
    internal static extern SafeUnixHandle Open(string path, uint flag, int mode);

    internal static string Strerror(int error)
    {
        try
        {
            var buffer = new StringBuilder(256);
            var result = Strerror(error, buffer, (ulong)buffer.Capacity);
            return (result != -1) ? buffer.ToString() : null;
        }
        catch (EntryPointNotFoundException)
        {
            return null;
        }
    }

    [DllImport("MonoPosixHelper", EntryPoint = "Mono_Posix_Syscall_strerror_r", SetLastError = true)]
    private static extern int Strerror(int error, [Out] StringBuilder buffer, ulong length);
} 
```

*安全Unix句柄：*

```
[SecurityPermission(SecurityAction.InheritanceDemand, UnmanagedCode = true)]
[SecurityPermission(SecurityAction.Demand, UnmanagedCode = true)]
internal sealed class SafeUnixHandle : SafeHandle
{
    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
    private SafeUnixHandle()
        : base(new IntPtr(-1), true)
    {
    }

    public override bool IsInvalid
    {
        get { return this.handle == new IntPtr(-1); }
    }

    [ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
    protected override bool ReleaseHandle()
    {
        return UnsafeNativeMethods.Close(this.handle) != -1;
    }
} 
```

*UnixIO异常：*

```
[Serializable]
public class UnixIOException : ExternalException
{
    private readonly int nativeErrorCode;

    [SecurityPermission(SecurityAction.Demand, UnmanagedCode = true)]
    public UnixIOException()
        : this(Marshal.GetLastWin32Error())
    {
    }

    [SecurityPermission(SecurityAction.Demand, UnmanagedCode = true)]
    public UnixIOException(int error)
        : this(error, GetErrorMessage(error))
    {
    }

    [SecurityPermission(SecurityAction.Demand, UnmanagedCode = true)]
    public UnixIOException(string message)
        : this(Marshal.GetLastWin32Error(), message)
    {
    }

    public UnixIOException(int error, string message)
        : base(message)
    {
        this.nativeErrorCode = error;
    }

    public UnixIOException(string message, Exception innerException)
        : base(message, innerException)
    {
    }

    protected UnixIOException(SerializationInfo info, StreamingContext context)
        : base(info, context)
    {
        this.nativeErrorCode = info.GetInt32("NativeErrorCode");
    }

    public int NativeErrorCode
    {
        get { return this.nativeErrorCode; }
    }

    public override void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        if (info == null)
        {
            throw new ArgumentNullException("info");
        }

        info.AddValue("NativeErrorCode", this.nativeErrorCode);
        base.GetObjectData(info, context);
    }

    private static string GetErrorMessage(int error)
    {
        var errorDescription = UnsafeNativeMethods.Strerror(error);
        return errorDescription ?? string.Format("Unknown error (0x{0:x})", error);
    }
} 
```

# c# - Quartz.net + 澳大利亚当地时间执行

> ID：10387604
> 
> 赞同：0
> 
> 时间：2012-04-30T17:05:15.500
> 
> 标签：c#, .net, quartz.net, timezone-offset

我是 Quartz.NET 的新手，我很难创建一个在澳大利亚当地时间上午 11 点每天都会触发的事件。

我知道我必须使用 ScheduleJob 方法，但我该如何添加澳大利亚的时间？我对 UTC/GMT 不是很好。对此的任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:29:46.797

您可以使用该`ToUniversalTime`方法 ( [http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime(v=vs.100).aspx) ) 将本地时间转换为 UTC。这并不简单，但可以阻止您自己摆弄 UTC。

# objective-c - 与 NSArray 类型的表达式不兼容的指针类型

> ID：10387605
> 
> 赞同：1
> 
> 时间：2012-04-30T17:05:16.750
> 
> 标签：objective-c, pointers, nsarray

在我已注释掉的 .m 文件中，我收到了两个关于“与类型为 NSArray 的表达式不兼容的指针类型”的警告。

不完全理解这一点，也不知道如何解决这个问题。你能解释一下，以便我修复它吗？

提前致谢。

项目视图控制器.m

```
#import "ItemsViewController.h"
#import "BNRItemStore.h"
#import "BNRItem.h"

@implementation ItemsViewController // Incomplete implementation

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  DetailViewController *detailViewController = [[DetailViewController alloc]init];

  NSArray *items = [[BNRItemStore sharedStore]allItems];
  BNRItem *selectedItem = [items objectAtIndex:[indexPath row]];

  //Give detail view controller a pointer to the item object in a row
  [detailViewController setItem:selectedItem];

  // Push it onto the top of the navigation controller's stack
  [[self navigationController]pushViewController:detailViewController animated:YES];
}

-(id)init
{
  // Call the superclass's designated initializer
  self = [super initWithStyle:UITableViewStyleGrouped];
  if (self) {

  }
  return self;
}

-(id)initWithStyle:(UITableViewStyle)style
{
  return [self init];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  return [[[BNRItemStore sharedStore]allItems]count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

  // Check for a reusable cell first, use that if it exists
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

  // If there is no reusable cell of this type, create a new one
  if (!cell) {
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];
  } 

  // Set the text on the cell with the description of the item
  // that is at the nth index of items, where n = row this cell
  // will appear in on the tableview
  BNRItem *p = [[[BNRItemStore sharedStore]allItems]objectAtIndex:[indexPath row]];

  [[cell textLabel]setText:[p description]];

  return cell;
}

-(UIView *)headerView
{
  // If we haven't loaded the headerView yet
  if (!headerView) {
    //Load HeaderView.xib
    [[NSBundle mainBundle]loadNibNamed:@"HeaderView" owner:self options:nil];
  }
  return headerView;
}

-(UIView *)tableView:(UITableView *)tv viewForHeaderInSection:(NSInteger)sec
{
  return [self headerView];
}

-(CGFloat)tableView:(UITableView *)tv heightForHeaderInSection:(NSInteger)sec
{
  // The height of the header view should be determined from the height of the 
  // view in the XIB file
  return [[self headerView]bounds].size.height;
}

-(IBAction)toggleEditingMode:(id)sender
{
  // If we are currently in editing mode
  if ([self isEditing]) {
    // Change text of button to inform user of state
    [sender setTitle:@"Edit" forState:UIControlStateNormal];
    // Turn off editing mode
    [self setEditing:NO animated:YES];
  } else {
    // Change text of button to inform user of state
    [sender setTitle:@"Done" forState:UIControlStateNormal];
    // Enter editing mode
    [self setEditing:YES animated:YES];
  }
}

-(IBAction)addNewItem:(id)sender
{
  // Create a new BNRItem and add it to the store
  BNRItem *newItem = [[BNRItemStore sharedStore]createItem]; //Incompatible pointer types initializing 'BNRItem *__strong' with an expression of type 'NSArray*'

  // Figure out where that item is in the array
  int lastRow = [[[BNRItemStore sharedStore]allItems]indexOfObject:newItem];

  NSIndexPath *ip = [NSIndexPath indexPathForRow:lastRow inSection:0];

  // Insert this new row into the table
  [[self tableView]insertRowsAtIndexPaths:[NSArray arrayWithObject:ip] withRowAnimation:UITableViewRowAnimationTop];
}

-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
  // If the table view is asking to commit a delete command...
  if(editingStyle == UITableViewCellEditingStyleDelete)
  {
    BNRItemStore *ps = [BNRItemStore sharedStore];
    NSArray *items = [ps allItems];
    BNRItem *p = [items objectAtIndex:[indexPath row]];
    [ps removeItem:p];

    // We also remove that row from the table view with an animation
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
  }
}

-(void)tableView:(UITableView *)tableView
  moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath 
         toIndexPath:(NSIndexPath *)destinationIndexPath
{
  [[BNRItemStore sharedStore]moveItemAtIndex:[sourceIndexPath row] 
                                     toIndex:[destinationIndexPath row]];
}

-(void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];
  [[self tableView] reloadData];
}

@end 
```

ItemsViewController.h

```
#import <Foundation/Foundation.h>
#import "DetailViewController.h"

@interface ItemsViewController : UITableViewController
{
  IBOutlet UIView *headerView;
}

-(UIView *)headerView;
-(IBAction)addNewItem:(id)sender;
-(IBAction)toggleEditingMode:(id)sender;

@end 
```

BNRItemStore.m

```
#import "BNRItemStore.h"
#import "BNRItem.h"

@implementation BNRItemStore

+(BNRItemStore *)sharedStore
{
  static BNRItemStore *sharedStore = nil;
  if (!sharedStore) 
    sharedStore = [[super allocWithZone:nil]init];

  return sharedStore;
}

-(id)init
{
  self = [super init];
  if (self) {
    allItems = [[NSMutableArray alloc]init];

  }
  return self;
}

-(NSArray *)allItems
{
  return allItems;
}

-(NSArray *)createItem
{
  BNRItem *p = [BNRItem randomItem];
  [allItems addObject:p];
  return p; //Incompatible pointer types returning 'BNRItem*__strong' from a function with result type 'NSArray*'
}

-(void)removeItem:(BNRItem *)p
{
  [allItems removeObjectIdenticalTo:p];
}

-(void)moveItemAtIndex:(int)from 
               toIndex:(int)to
{
  if(from==to) {
    return;
  }
  // Get pointer to object being moved so we can re-insert it
  BNRItem *p = [allItems objectAtIndex:from];

  // Remove p from array
  [allItems removeObjectAtIndex:from];

  //Insert p in array at new location
  [allItems insertObject:p atIndex:to];
}

@end 
```

BNRItemStore.h

```
#import <Foundation/Foundation.h>

@class BNRItem;

@interface BNRItemStore : NSObject
{
  NSMutableArray *allItems;
}

// Notice that this is a class method and prefixed with a + instead of a -
+(BNRItemStore *)sharedStore;

-(void)removeItem:(BNRItem *)p;
-(void)moveItemAtIndex:(int)from 
               toIndex:(int)to;

-(NSArray *)allItems;
-(NSArray *)createItem;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:09:49.147

在这里：

```
-(NSArray *)createItem
{
  BNRItem *p = [BNRItem randomItem];
  [allItems addObject:p];
  return p; //Incompatible pointer types returning 'BNRItem*__strong' from a function with result type 'NSArray*'
} 
```

`p`是一个类型的变量`BNRItem*`。您的方法声称其返回值是`NSArray*`警告是因为这些是不同的。

如果要返回整个数组，请返回`allItems`。

如果要退回新商品，请更改退货类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:47:02.580

```
-(void)moveItemAtIndex:(int)from 
               toIndex:(int)to 
```

该方法将按书面方式工作；如果`to`是 after `from`，您会将对象移动到错误的索引，并且可能会在此过程中导致超出范围的异常。

* * *

正如其他人所说，您的`createItem`方法被声明为返回 an`NSArray*`但您返回的是 a `BNRItem*`。

修复返回类型也将修复其他警告。

* * *

在您对“quixoto”的评论中，您提出了一些建模问题。听起来您真的应该使用 CoreData，它被明确地设计为允许进行此类建模任务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T17:08:18.150

查看方法定义的返回类型，然后查看您返回的 var 的类型。

```
-(NSArray *)createItem
{
  BNRItem *p = [BNRItem randomItem];
  [allItems addObject:p];
  return p; //Incompatible pointer types returning 'BNRItem*__strong' from a function with result type 'NSArray*'
} 
```

似乎您应该返回`allItems`而不是`p`.

或者将返回类型更改为`BNRItem *`.

# java - Maven JAXB2 XJC 插件：未涵盖 M2E 插件执行

> ID：10387610
> 
> 赞同：11
> 
> 时间：2012-04-30T17:05:37.483
> 
> 标签：java, maven, jaxb, xjc, maven-jaxb2-plugin

我正在使用`jaxb2 xjc`插件从`XSD`. 因此我曾经配置我的 pom.xml 如下：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxb2-maven-plugin</artifactId>
            <version>1.3</version>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>xjc</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <packageName>com.mypackage.model</packageName>
                <schemaDirectory>${basedir}/src/main/resources/XSD</schemaDirectory>
            </configuration>
        </plugin>
        <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-compiler-plugin</artifactId>
           <configuration>
               <source>1.6</source>
               <target>1.6</target>
           </configuration>
       </plugin>
    </plugins>
</build> 
```

我将我的开发环境更改为 Eclipse Indigo，但这不再起作用。错误说：“生命周期配置未涵盖插件执行”。我知道我必须以不同的方式定义我的插件的执行，以便它在我的新环境中工作。

我按照此页面上的说明[执行未涵盖的 M2E 插件执行](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)`generate-sources`，但执行阶段时未生成源文件。

谁能告诉我如何准确地重构我的 pom 以便正确生成我的文件？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-17T17:44:19.340

事实证明，我最终***确实***找到了答案！Eclipse 与 Maven 的集成已知与许多 Maven 插件的兼容性问题。

当您可以从 Eclipse 之外的命令行成功运行 Maven 构建，但 Eclipse 在您的 POM 中显示“执行未覆盖”错误时，请尝试添加此插件：

```
<build>
    ...
    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings 
                only. It has no influence on the Maven build itself. -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.codehaus.mojo</groupId>
                                    <artifactId>jaxb2-maven-plugin</artifactId>
                                    <versionRange>[1.3,)</versionRange>
                                    <goals>
                                        <goal>xjc</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute />
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

如上面的评论所示，这个插件在 Eclipse 之外不做任何事情。它只是告诉 Eclipse 何时执行 JAXB 插件，因为 Eclipse 不够聪明，无法自行解决。

[我在另一个 StackOverflow 问题](https://stackoverflow.com/questions/8745229/publishing-wsdl-java)上找到了这个片段，并将其应用于“jaxb2-maven-plugin”插件，而不是另一个问题中的问题插件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T17:55:48.890

您也可以切换到[`maven-jaxb2-plugin`](https://github.com/highsource/maven-jaxb2-plugin)支持 M2E 的那个。不过，Steve Perkins 的上述回答通常适用于 M2E 不支持的那些插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-10T17:28:35.787

我不确定这是否适用于您的环境，但如果应用程序被拆分为 Maven 模块，那么到目前为止我发现的满足我需求的最佳解决方案是从 Eclipse IDE 中删除所有受影响的模块。每当我需要重新生成时，我只需使用 mvn install 从命令行构建。然后 Eclipse 使用来自 repo 的包，而不是尝试自己构建，不需要`runOnIncremental`摆弄（我使用了很长一段时间），没有红色模块/行，构建速度也更快。

# android - Android 如何仅在同一数组的列表视图中显示某些项目？

> ID：10387612
> 
> 赞同：2
> 
> 时间：2012-04-30T17:05:54.623
> 
> 标签：android, listview, android-arrayadapter, listadapter

我一直在关注几个教程，这些教程让我成功地从我的数据库中获取信息，从我的网站到我的应用程序，然后我可以在列表视图中显示它，但我想要做的不是显示完整列表，我想有几个按钮让我只显示符​​合某些标准的数据，比如底部 1 只显示 medio=Periodicos 的列表项，按钮 2 显示 medio=Radios 的项目 这是我正在使用的代码

在我的主要活动中

```
FancyAdapter aa = null;
static ArrayList<String> resultRow;

//after onCreate
//this button I'm usin now but I'm getting the hole list!
Button periodicos = (Button) findViewById(R.id.btnPeriodicos);
            periodicos.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                weballamar = "http://www.mysite.com/mydbjsonstring.php";
                webcall();
            }});

//webcall gets the info from the internet and displays the list
public void webcall(){
    ListView myListView = (ListView) findViewById(R.id.mylistView);
    aa = new FancyAdapter();
    myListView.setOnItemClickListener(onPeriodicosListClick);
    myListView.setAdapter(aa);
    PeriodicosListLayout.setVisibility(View.VISIBLE);
    webLayout.setVisibility(View.GONE);

    try {
        String result = "";
                    try {
                        HttpClient httpclient = new DefaultHttpClient();
                        HttpPost httppost = new HttpPost(weballamar);
                        // httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                        HttpResponse response = httpclient.execute(httppost);
                        HttpEntity entity = response.getEntity();
                        InputStream webs = entity.getContent();
                        // convert response to string
                        try {
                            BufferedReader reader = new BufferedReader(
                                    new InputStreamReader(webs, "iso-8859-1"), 8);
                            StringBuilder sb = new StringBuilder();
                            String line = null;
                            while ((line = reader.readLine()) != null) {
                                sb.append(line + "\n");
                            }
                            webs.close();

                            result = sb.toString();
                        } catch (Exception e) {
                            Log.e("log_tag", "Error converting result " + e.toString());
                        }
                    } catch (Exception e) {
                        Log.e("log_tag", "Error in http connection " + e.toString());
                    }

                    // parse json data
                    try {
                        JSONArray jArray = new JSONArray(result);
                        for (int i = 0; i < jArray.length(); i++) {
                            JSONObject json_data = jArray.getJSONObject(i);
                            webResult resultRow = new webResult();
                            resultRow._id = json_data.getString("id");
                            resultRow.Name = json_data.getString("Id_Nombre");
                            resultRow.Medio = json_data.getString("Medio");
                            resultRow.Pais = json_data.getString("Pais");
                            resultRow.Estado = json_data.getString("Estado");
                            resultRow.Ciudad = json_data.getString("Ciudad");
                            resultRow.website = json_data.getString("website");
                            resultRow.Url = json_data.getString("Url");
                            resultRow.Url2 = json_data.getString("Url2");
                            resultRow.InfAnex = json_data.getString("InfAnex");
                            arrayOfWebData.add(resultRow);
                        }
                    } catch (JSONException e) {
                        Log.e("log_tag", "Error parsing data " + e.toString());
                    }
    } catch (Exception e) {
        // this is the line of code that sends a real error message to the
        // log
        Log.e("ERROR", "ERROR IN CODE: " + e.toString());
        // this is the line that prints out the location in
        // the code where the error occurred.
        e.printStackTrace();
    }
}

class FancyAdapter extends ArrayAdapter<webResult> {
    FancyAdapter() {
        super(mainActivity.this,
                android.R.layout.simple_list_item_1, arrayOfWebData);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            LayoutInflater inflater = getLayoutInflater();
            convertView = inflater.inflate(R.layout.listitem, null);
            holder = new ViewHolder(convertView);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.populateFrom(arrayOfWebData.get(position));

        return (convertView);
    }
}

class ViewHolder {
    public TextView name = null;
    public TextView estado = null;
    public TextView ciudad = null;
    ViewHolder(View row) {
        name = (TextView) row.findViewById(R.id.periodicoName);
        estado = (TextView) row.findViewById(R.id.periodicoEstado);
        ciudad = (TextView) row.findViewById(R.id.periodicoCiudad);
    }

    void populateFrom(webResult r) {
        name.setText(r.Name);
        estado.setText(r.Estado);
        ciudad.setText(r.Ciudad);
    }
} 
```

如您所见，我在列表视图中显示了名称庄园和城市的完整列表，但该列表包含的项目在 medio 列中要么是周期性的要么是无线电的，所以我怎样才能让我的适配器区分并选择显示只有那些女巫 medio=periodico，从那里我可以做相反的事情来选择 medio=radio Tahnks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T17:35:53.903

无法测试此代码，但这里有一些可行的方法

1）创建另一个仅包含过滤项目的列表

```
public ... ArrayList<webResult> FilteredArrayOfWebItems; 
```

2）在您的适配器中创建一个方法，让您设置“类型”（周期或收音机）字符串类型；

```
public void SetType(String type)
{ 
     /* Maybe something like this */
     //Clear the FilteredArrayOfWebItems first. Not on eclipse, at the moment, but I suspect FilteredArrayOfWebItems.clear() might be call you need

    for(JSONObject currentItem: arrayOfWebItems)
    {
        //Check if the Medio property of the current item matches the typ
        if(currentItem.Medio.equals(type))
        {
            //Add it to the Filtered list
            FilteredArrayOfWebItems.add(currentItem);

        }
     } 
```

}

3) 您可能需要重写 getCount() 方法来获取过滤项目的计数，而不是完整列表

4）在你的get View中，从过滤列表中读取信息

```
holder.populateFrom(FilteredArrayOfWebItems.get(position)); 
```

5) 每当您想更改过滤器时，从您的主方法调用 SetType

6）从主方法中，`adapter.notifyDataSetChanged()`在您更改过滤器后调用适配器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:30:39.083

在自定义列表活动中，删除您不需要的元素并将列表存储到某个临时列表中并将该临时列表传递给您的适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:40:00.423

在布局文件夹 **fake.xml中创建一个 xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"> 
```

```
public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

    if (convertView == null) {
        LayoutInflater inflater = getLayoutInflater();
        convertView = inflater.inflate(R.layout.listitem, null);
        holder = new ViewHolder(convertView);
        convertView.setTag(holder);

    /*****  add this code in your getView method() ********/
      if(position ==3)
      {
            LayoutInflater inflater = getLayoutInflater();
            convertView = inflater.inflate(R.layout.fake, null);
            convertView.setTag(holder);
            returns convertview;
       }
     /*****  add this code in your getView method() ********/

    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    holder.populateFrom(arrayOfWebData.get(position));

    return (convertView);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-02T18:36:38.360

如果你这样做就足够了：

```
if(position >2)
  {
        return convertView;
   } 
```

它不会显示超过 3 个结果 (0,1,2)

# string - Visual Studio / R# 键盘快捷键：选择带或不带引号的字符串

> ID：10387617
> 
> 赞同：5
> 
> 时间：2012-04-30T17:06:21.757
> 
> 标签：string, visual-studio-2010, resharper, keyboard-shortcuts

我检查了标题相似的问题，并进行了搜索，但一无所获。但我发誓我以前见过有人这样做。

假设我有以下内容：

```
var mystr = "here is some text I want to select"; 
```

有没有办法将光标插入字符串中，然后使用快捷方式在不带引号的情况下选择它？另一个用引号选择的快捷方式？

如果这在 ReSharper 中可用，那么那里的快捷方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T17:15:22.113

您可以`Ctrl + W`在 Visual Studio 中使用（扩展选择）快捷方式。如果您在一个单词中，它将选择该单词，再次按下它将选择不带引号的字符串，然后选择带引号的字符串，然后是语句，然后是下一个逻辑元素...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-05T09:37:09.380

您可以使用`alt + shift + left`或`alt + shift + right`选择引号之间的内容，而不是拖动鼠标来选择所有内容

# java - Junit 4中的参数化套件？

> ID：10387622
> 
> 赞同：7
> 
> 时间：2012-04-30T17:06:43.190
> 
> 标签：java, junit, parameterized, suite

我可以将`@RunWith( Suite.class )`测试类分组到一个测试套件中并一起运行它们。我可以对`@RunWith( Parameterized.class )`不同的参数运行相同的测试。我想要的是为不同的参数运行一个测试套件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:13:42.253

我总是建议人们切换到 TestNG，它就像 JUnit 4，除了功能更多。

它具有对参数化和分组的内置支持。

我怀疑您尝试使用 TestNG 做的事情会很容易 - JUnit 没有 TestNG 所具有的“分组”功能。

[http://testng.org/doc/migrating.html](http://testng.org/doc/migrating.html)

[http://www.mkyong.com/unittest/testng-parameter-testing-example/](http://www.mkyong.com/unittest/testng-parameter-testing-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T15:44:44.677

我偶然发现了同样的问题。最后，我为 JUnit 编写了一个自定义扩展并将其开源。您可以在此处查看该库及其文档：[https ://github.com/PeterWippermann/parameterized-suite](https://github.com/PeterWippermann/parameterized-suite)

# c++ - 在头文件中

> ID：10387630
> 
> 赞同：9
> 
> 时间：2012-04-30T17:07:13.190
> 
> 标签：c++, string, header

我正在尝试在头文件的类定义中定义字符串类型的变量。是否可以？例子：

```
/* Foo.h */   
#include <string>
class Foobar{
     int a;
     string foo;

} 
```

因为在 main 中我可以以某种方式声明一个字符串变量，但在标题中它无法识别我的字符串类型。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-30T17:08:57.413

`string`生活在命名空间中`std`。做到这一点：

```
#include <string>

class Foobar {
    int a;
    std::string foo;
}; 
```

# java - 从 HttpServletRequest 中提取上下文路径和其他 URL 信息

> ID：10387633
> 
> 赞同：3
> 
> 时间：2012-04-30T17:07:25.360
> 
> 标签：java, url, servlets

我在 localhost 的 8080 端口运行我的应用程序。基本 url 是：[http://localhost:8080/EMSApplication/otherparts](http://localhost:8080/EMSApplication/otherparts) ...

现在`HttpServletRequest`我如何提取[http://localhost:8080/EMSApplication 部分](http://localhost:8080/EMSApplication)？

目前我正在这样做：

```
String schema = request.getScheme();
String serverName = request.getServerName();
int serverPort = request.getServerPort();
String contextPath = request.getContextPath();
String path = schema + "://" + serverName + ":" + serverPort + contextPath;
System.out.println(path); 
```

这里 request 是`HttpServletRequest`.

这个程序对吗？

有没有其他方法可以获取信息？

如果我托管我的应用程序并说 URL 是[http://my.domain.com/EMSApplication/otherparts](http://my.domain.com/EMSApplication/otherparts) ... 那么上述程序代码会起作用吗？

* * *

我发现的另一种方法：

```
String requestUrl = request.getRequestURL().toString();
String contextPath = request.getContextPath();
String path = requestUrl.substring(0, requestUrl.indexOf(contextPath) + contextPath.length()); 
```

* * *

我需要这个的地方：

```
HttpServletRequest request = (HttpServletRequest) getRequest().getContainerRequest();
String requestUrl = request.getRequestURL().toString();
String contextPath = request.getContextPath();
String path = requestUrl.substring(0, requestUrl.indexOf(contextPath) + contextPath.length());          
submitLink.add(new WebMarkupContainer("submitImage").add(new AttributeModifier("src", path + "/ASSETS/css/images/login-btn.png"))); 
```

我正在开发一个 Wicket 应用程序，我需要在其中指定`<img/>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:28:10.903

Either way is fine, but I prefer the first. There isn't anything more direct that comes to mind, although if you explained why you want this value, there might be.

# asp.net - GDI+ 中发生一般错误（大部分时间都有效）

> ID：10387637
> 
> 赞同：2
> 
> 时间：2012-04-30T17:07:38.933
> 
> 标签：asp.net, gdi+

我有一个 asp.net 处理程序，它被调用来生成动态图像（圆形图标指示填充级别和不同填充级别的不同颜色）。图像完全在内存中生成，过程中不加载图像文件。这段代码在生产中 99.9% 的时间都可以工作，但是偶尔处理程序会退出工作，并抛出下面的异常。IIS 重置将解决此问题。我正在运行 Windows Server 2008 r2 标准版，其中包含所有最新和最好的更新。我在下面包含了相关代码。任何想法表示赞赏。

我已经看过几十篇文章和 microsoft kb 文章，几乎所有文章都围绕文件和目录权限展开。这似乎不适用于这里。

异常：System.Runtime.InteropServices.ExternalException：GDI+ 中出现一般错误。在 System.Drawing.Image.Save(Stream 流，ImageCodecInfo 编码器，EncoderParameters encoderParams) 在 System.Drawing.Image.Save(Stream 流，ImageFormat 格式)

代码：

```
var fillPercentString = context.Request.QueryString["fillPercent"];
var iconSizeString = context.Request.QueryString["size"];
var colorString = context.Request.QueryString["fillColor"];
double fillPercent;
double.TryParse(fillPercentString, out fillPercent); //0.01 * (!string.IsNullOrEmpty(fillPercentString) ? int.Parse(fillPercentString) : 0);
fillPercent = 0.01 * fillPercent;
var iconSize = !string.IsNullOrEmpty(iconSizeString) ? int.Parse(iconSizeString) : 16;
var iconWidth = iconSize;
var iconHeight = iconSize;
var memStream = new MemoryStream();
var color = System.Drawing.Color.FromName(colorString);
if (iconSize < 0)
{
    throw new InvalidOperationException("Invalid size.");
}

if (fillPercent < 0 || fillPercent > 100)
{
    throw new InvalidOperationException("Invalid fill percentage.");
}

using (var bitmap = new Bitmap(iconWidth + 1, iconHeight + 1))
using (var graphic = Graphics.FromImage(bitmap))
using (var backgroundFillBrush = new SolidBrush(Color.White))
using (var fillBrush = new SolidBrush(color))
using (var outlinePen = new Pen(Color.Black, 1f))
{
    graphic.SmoothingMode = SmoothingMode.AntiAlias;

    var circleBounds = new Rectangle(0, 0, iconWidth, iconHeight);

    // fill with transparent
    graphic.FillRectangle(backgroundFillBrush, 0, 0, bitmap.Width, bitmap.Height);

    // fill a full circle
    graphic.FillEllipse(fillBrush, circleBounds);

    // draw a rectangle to clip out unneeded region
    if (fillPercent < 1.00)
    {
        graphic.FillRectangle(backgroundFillBrush, new RectangleF(0, 0, bitmap.Width, (int)((1 - fillPercent) * bitmap.Height)));
    }

    // draw the circle outline
    graphic.DrawEllipse(outlinePen, circleBounds);

    // finalize and save to cache
    bitmap.MakeTransparent(bitmap.GetPixel(1, 1));
    bitmap.Save(memStream, ImageFormat.Png);
    var returnBytes = memStream.ToArray();

    // write the image to the output stream
    if (context.Response.IsClientConnected)
    {
        context.Response.ContentType = "image/png";
        context.Response.OutputStream.Write(returnBytes, 0, returnBytes.Length);
    }
} 
```

# c - CRC 字节序变换

> ID：10387638
> 
> 赞同：4
> 
> 时间：2012-04-30T17:07:38.950
> 
> 标签：c, embedded, arm, crc

我正在使用具有硬件 CRC 计算单元的 ARM cortex M3 板。它支持 3 个标准 CRC 多项式。该模块的接口非常简单。我需要提供一个指向数据和数据长度的指针。我遇到的问题是它首先计算 LSB。我需要先知道 CRC Msb (xmodem crc16-itt)。有没有办法先把它得到的计算转换成msb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T03:36:16.023

编辑/重写：

根据提供的信息，我认为您有以下选择：

1）在主机上安排数据（假设它不像微控制器那样受资源限制），这样微控制器就不必做太多的工作。

2）尽可能使用功能/指令制作数据的（字节交换）副本以使其更快，然后让硬件CRC引擎计算crc。

3）不要使用硬件crc引擎，使用软件计算crc。

4）忽略CRC。

5）使用不同的微控制器（可以处理这个用例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:55:12.103

> [...]我首先需要知道 CRC Msb (xmodem crc16-itt)。有没有办法先把它得到的计算转换成msb？

xmodem crc16-itt 将**字节**作为数据进行操作。因此，最高有效字节优先或最低有效字节优先仅与 CRC 值的*表示有关。*只需交换计算值 - 例如使用`__REV16()`CMSIS 函数。

编辑：

我假设双方都`0x01 0x02 0x03 0x04`这么认为。如果一侧看到不同的字节，例如`0x04 0x03 0x02 0x01`在内存中，则 CRC 将失败。但无论如何，您可能希望尽快解决这个问题，因为这会让您在处理数据时非常头疼。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T17:14:28.013

只需像这样交换 2 个字节：

```
unsigned short crc_little_endian = ...; // call to your CRC function
unsigned short crc_big_endian = (crc_little_endian >> 8) | (crc_little_endian << 8); 
```

# wpf - mvvm 图形编辑器

> ID：10387646
> 
> 赞同：0
> 
> 时间：2012-04-30T17:08:21.973
> 
> 标签：wpf, mvvm, graph

我正在使用 WPF 开发图形编辑器，我想知道如何在 MVVM 模式的帮助下设计这个系统。

有3个部分：

1.  模型：具有 2 个属性的类 Graph：public List States 和 public List 以及 Add/Edit/Remove States/Transitions 方法

2.  ViewModel 类 GraphVM 具有 2 个属性：public List States 和 public List 以及 Add/Edit/Remove States/Transitions 方法

3.  看法

这是一个好方法还是我应该为状态和转换实现单独的虚拟机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:44:42.170

虽然这取决于你的 UI 中的确切功能，但我建议不管怎样，每个状态和转换的虚拟机都是一个好主意。通常，您迟早会发现自己需要它们，因此您不妨预先创建它们。另一种方法是让您的视图直接绑定到您的模型，这不仅会创建紧密耦合，以后可能很难且耗时地打破它，而且还会抑制您在它们之上添加特定于 UI 的行为的能力（例如选择和拖放）。

# java - 如何在多线程环境java中关闭线程

> ID：10387647
> 
> 赞同：1
> 
> 时间：2012-04-30T17:08:29.430
> 
> 标签：java, multithreading, sockets

因此，我的服务器应用程序导致平均大约 95% 的巨大 cpu 使用率。我认为原因是它不断产生新线程但没有关闭它。当发生任何这种情况时，我应该如何关闭一个线程：刷新页面、注销、浏览器关闭。

对于服务器部分，我的代码或多或少是这样的。

ThreadedEchoServer.java

```
public class ThreadedEchoServer {
    // using port 2000
    static final int PORT = 2000;

    public static void main(String args[]) {
        ServerSocket serverSocket = null;
        Socket socket = null;

        try {
            serverSocket = new ServerSocket(PORT);
        } catch (IOException e) {
            e.printStackTrace();

        }
        while (true) {
            try {
                socket = serverSocket.accept();
            } catch (IOException e) {
                System.out.println("I/O error: " + e);
            }

            // new thread for a client
            new EchoThread(socket).start();
        }
    }
} 
```

EchoThread.java

```
/*
Class for java server to accept incoming stream
and create a new thread to save log file data in server
*/
public class EchoThread extends Thread {
    protected Socket socket;

    public EchoThread(Socket clientSocket) {
        this.socket = clientSocket;
    }

    public void run() {
        /*Create a File*/
        int i = 1;
        try {
            File directory = new File("F:/temp/tmplog/" + getDate());
            if(!directory.exists()) {
                directory.mkdir();
            }

            String fileName = "F:/temp/tmplog/" + getDate() + "/" + getDateTime() + ".txt";
            File file = new File(fileName);

            //Double Make Sure it create the file
            while(file.exists()) {
                file = new File(fileName + "." + i);
                i++;
            }
            FileOutputStream fis = new FileOutputStream(file, true);
            PrintStream out = new PrintStream(fis);
            System.setOut(out);

            while (true) {
              try {
                InputStream is = socket.getInputStream();
                BufferedReader br = new BufferedReader(new InputStreamReader(is, "US-ASCII"));

                String line = null;

                while ((line = br.readLine()) != null) {
                  System.out.println(line);
                }
              } catch (IOException exception) {
                // Just handle next request.
              } finally {
                if (socket != null) {
                  try {
                    socket.close();
                  } catch (IOException ignored) {
                  }
                }
                fis.close();
              }
            }

        } catch (IOException ignored) {
        }
    } 
```

这个服务器应用程序基本上会为每个线程/客户端打开一个新的并写一个日志文件。我认为问题是我在使用后没有关闭线程。这就是为什么它只是不断产生新线程..有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:25:14.663

如果我了解您要查找的内容，则可以使用超时来处理这种情况。当超时到期时，您将终止线程。

回声线

```
/*
Class for java server to accept incoming stream
and create a new thread to save log file data in server
*/
public class EchoThread extends Thread {
    protected Socket socket;

    public EchoThread(Socket clientSocket) {
        this.socket = clientSocket;
        this.socket.setSoTimeout(10000); //Sets timeout to 10 seconds
    }

    public void run() {
        /*Create a File*/
        int i = 1;
        try {
            File directory = new File("F:/temp/tmplog/" + getDate());
            if(!directory.exists()) {
                directory.mkdir();
            }

            String fileName = "F:/temp/tmplog/" + getDate() + "/" + getDateTime() + ".txt";
            File file = new File(fileName);

            //Double Make Sure it create the file
            while(file.exists()) {
                file = new File(fileName + "." + i);
                i++;
            }
            FileOutputStream fis = new FileOutputStream(file, true);
            PrintStream out = new PrintStream(fis);
            System.setOut(out);

            while (true) {
              try {
                InputStream is = socket.getInputStream();
                BufferedReader br = new BufferedReader(new InputStreamReader(is, "US-ASCII"));

                String line = null;

                while ((line = br.readLine()) != null) {
                  System.out.println(line);
                }
              } catch (IOException exception) {
                // Just handle next request.
              } finally {
                if (socket != null) {
                  try {
                    socket.close();
                  } catch (IOException ignored) {
                  }
                }
                fis.close();
              }
            }

        } catch (IOException ignored) {
        } catch (SocketException e) { //Exception thrown by timeout
            socket.close(); //We close the socket
            this.stop(); //We stop the thread
        }
    } 
```

# curl - 使用 Open Graph 操作自动在墙上发布

> ID：10387648
> 
> 赞同：0
> 
> 时间：2012-04-30T17:08:33.160
> 
> 标签：curl, facebook-opengraph

我在具有自定义值的开放图中使用自己的操作类型。该操作正在起作用，因为如果我查看了一个项目，我可以在我的活动框中看到：

Ildikó 审查了“XY”应用程序中的 xy 项目。

但是，我在墙上/时间线上看不到任何其他内容。我的意思是我喜欢在我的时间轴上看到一个帖子，当我可以看到我评论的项目名称，我评论的第一句话等等。

我使用 curl 调用 url ：

网址是“https://graph.facebook.com/me/appnamespace:review”；其中 appnamespace 是我的应用程序，并发布访问令牌、此 url、我所指的项目和描述（评论的一部分）。

```
$url =  'https://graph.facebook.com/me/'.$this->namespace.':review';

    curl_setopt_array($this->_curl(), array(
        CURLOPT_URL  => $url,
        CURLOPT_POST => true,
        CURLOPT_POSTFIELDS => array(
            'access_token' => $token,
            'caption'       => $review,
            'book'         => 'http://www.url.com/' . $id,
        ),
        CURLOPT_RETURNTRANSFER => true,
    )); 
```

我做错了什么？我是否还需要再调用一个函数来共享我的时间线？

[文档](https://developers.facebook.com/docs/opengraph/actions/)说使用上面的url就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T13:18:47.740

You need to enable explicit sharing.

Click on the action type and enable explicit sharing as shown below.

Then you need to submit the action for approval.

![enter image description here](../Images/ade6170ad9b1089d0f69c67d552b556e.png)

[https://developers.facebook.com/docs/submission-process/opengraph/guidelines/action-properties/#explicitlyshared](https://developers.facebook.com/docs/submission-process/opengraph/guidelines/action-properties/#explicitlyshared)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:58:32.387

您的商品网址是否有 og 标签，以便 Facebook 将其识别为有效的 FB 图形对象？

它也可能有助于完成我的演示[为 Facebook 时间线开发应用程序](http://www.slideshare.net/chaffeet/developing-apps-for-facebook-timeline)不幸的是，没有很好的注释，但它确实显示了使时间线应用程序工作所需的最小设置。

如演示文稿中所述，您还可以[在 github 上找到实际工作代码](http://github.com/tchaffee/fdgl-timeline-app)，这也可能有所帮助。

最后，请注意时间线和墙（新闻源）行为之间存在差异。如果您发布到时间线，您将始终在那里看到它（以单独或汇总的形式）。时间线上的一些内容可能会出现在新闻源中。这取决于FB。他们展示了他们认为用户会感兴趣的内容。

# java - NIO2 n00b，FileVisitor/BufferedWriter

> ID：10387655
> 
> 赞同：0
> 
> 时间：2012-04-30T17:09:04.860
> 
> 标签：java, nio2

我正在自学 NIO2 并做一些实践来测试理论。目前我已经实现了 FileVisitor，它可以编译和运行，并在 fileVisit 中执行我期望的操作，但在 postFileVisit 中没有。也就是说，它会计算 .xml 和 .xhtml 文件中的表格行数，并使用结果创建一个文本文件，但它不会附加给定目录的表格行总数。然而，postFileVisit 确实做了一些事情，如果一个目录没有 .xml 或 .xhtml 文件，仍然会创建一个日志文件并加盖时间戳，但代码行 97 到 101 似乎没有效果。所以，我相信这是我搞砸的 BufferedWriter 的问题。谢谢您的帮助：

```
 package com.purposeful_play.BasicIO;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.nio.file.*;
import java.io.IOException;
import java.nio.charset.Charset;
import java.nio.file.attribute.BasicFileAttributes;
import java.nio.file.attribute.BasicFileAttributeView;
import java.nio.file.attribute.FileTime;

/**
 *
 * @author Michael-Mosher
 */

public class CharacterCounter<T> implements FileVisitor<T> {
    static int count = 0;

    public static void main (String[] args){
        Path path = FileSystems.getDefault().getPath(args[0]);

        try { 
Files.walkFileTree(path, new CharacterCounter<Path>());
        }
        catch (IOException x) { System.err.format("Unable to read file: %s%n", x); }

    }

    @Override
    public FileVisitResult preVisitDirectory(Object dir, BasicFileAttributes attrs) throws IOException {
        return FileVisitResult.CONTINUE;
    }

    @Override
    public FileVisitResult visitFile(Object file, BasicFileAttributes attrs) throws IOException {
       Path fname = (Path)file;
        if((fname.getFileName().toString().contains(".xhtml"))||(fname.getFileName().toString().contains(".xml"))){
        boolean withindiv = false;
        int fcount = 0;
        StringBuilder div = new StringBuilder("<div ID=center");
        StringBuilder notdiv = new StringBuilder("</div");
        StringBuilder table = new StringBuilder("<tr");
        Charset cs = Charset.forName("UTF-8");
        try (BufferedReader input = Files.newBufferedReader((Path)file, cs)){
        while(input.ready()){
            String line = input.readLine();
            withindiv = line.contains(div) ? line.contains(div) : withindiv;
            if(withindiv){
                withindiv = !(line.contains(notdiv));
                if(!withindiv){
                    line = line.split("</div")[0];
                }
                fcount = line.split("<tr", 0).length-1;
                count += fcount;
            }
        }

            }
        Path path = (Path)file;
        String ss = path.toString();
        path = path.getParent().resolve("logfile.txt");
        boolean newfile = Files.exists(path);
        try (BufferedWriter output = Files.newBufferedWriter(
                path, cs, StandardOpenOption.CREATE, 
                StandardOpenOption.APPEND)){
        output.write(ss);
        output.newLine();
        ss = new Integer(fcount).toString();
        output.write(ss);
        output.newLine();
        long currentTime = System.currentTimeMillis();
        FileTime ft = FileTime.fromMillis(currentTime);
        if(!newfile)
            Files.getFileAttributeView(path, BasicFileAttributeView.class).setTimes(ft, null, ft);
        else 
            Files.getFileAttributeView(path, BasicFileAttributeView.class).setTimes(ft, null, null);
        }
    } // End if(...xhtml || ...xml)
        return FileVisitResult.CONTINUE;
    }

    @Override
    public FileVisitResult visitFileFailed(Object file, IOException exc) throws IOException {
        System.err.printf("visitFileFailed error: %s%n", exc);
        return FileVisitResult.CONTINUE;
    }

    @Override
    public FileVisitResult postVisitDirectory(Object dir, IOException exc) throws IOException {
        Path path = (Path)dir;
        path = path.resolve("logfile.txt");
        Charset cs = Charset.forName("UTF-8");
        BufferedWriter output = Files.newBufferedWriter(path, cs, 
                StandardOpenOption.CREATE, StandardOpenOption.SYNC, StandardOpenOption.WRITE, StandardOpenOption.APPEND);
        String ss = "Total occurences: ";
        output.write(ss);
        output.newLine();
        ss = new Integer(count).toString();
        output.write(ss);
        output.newLine();
        count = 0;
        long time = System.currentTimeMillis();
        FileTime ft = FileTime.fromMillis(time);
        Files.setLastModifiedTime(path, ft);
        return FileVisitResult.CONTINUE;
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:14:54.400

你永远不会关闭你的 BufferedWriter。所以你的输出是缓冲的，永远不会刷新到底层文件。

由于您正在试验 Java 7 的新 API，您应该使用新的[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)，它会自动关闭编写器并避免此类错误。（顺便说一句，您使用它来读取，但不用于写入。始终使用它，或始终在 finally 块中关闭流、读取器和写入器）

# php - 不能 array_unique 合并数组以不同方式创建并以不同方式显示

> ID：10387656
> 
> 赞同：1
> 
> 时间：2012-04-30T17:09:06.887
> 
> 标签：php, arrays

我有这两个数组。

一个是使用标准 SELECT 查询生成的，另一个是使用以下语句生成的：

```
$file = file(DOC_ROOT."robots.txt");
foreach($file as $text) {
$test[] = $text;
} 
```

第一个数组输出如下：

```
Array
(
    [0] => Disallow: /admin/
    [1] => Disallow: /m/
    [2] => Disallow: /private/
) 
```

另一个是这样的：

```
Array
(
[4] => Disallow: /admin/

[5] => Disallow: /m/

[6] => Disallow: /private/

[7] => Disallow: /success.php
) 
```

* * *

现在的问题是，在合并两个数组后，array_unique 不起作用，我猜它可能是由第二个数组生成的空格引起的，我尝试删除它们但没有运气。现在我的问题是，真的是空间导致了这种情况，还是我的流程有问题？为了您的方便，这里是数组代码，这并不重要。我将如何解决这个问题？谢谢你。

```
$result = array_merge($lines,$test);
    $result = array_unique($result);
    echo '<pre>';
    echo print_r($result);
    echo '</pre>'; 
```

结果：

```
Array
(
[0] => Disallow: /admin/
[1] => Disallow: /m/
[2] => Disallow: /private/

[32] => 

[33] => Disallow: /admin/

[34] => Disallow: /m/

[35] => Disallow: /private/

[36] => Disallow: /success.php
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:10:48.867

array_unique() 适用于数组的值。在您的示例中，没有任何共同值，因此它不会删除任何值。

是的，空格使 array_unique 看到 2 个不同的值，所以这 2 个值基本上是不一样的：

```
[0] => 'hello1   hello2'
[1] => 'hello1 hello2' 
```

和 array_unique 保留两个值

您在 pre 中的键之间有那个空间，因为 file() 保持`\n`和`\r`. 所以做一个：

```
file(,FILE_IGNORE_NEW_LINES); 
```

# actionscript-3 - ActionScript 3 Flash CS5 网站：如何在页面更改之前播放淡出动画？

> ID：10387659
> 
> 赞同：2
> 
> 时间：2012-04-30T17:09:21.773
> 
> 标签：actionscript-3, flash, flash-cs5

我创建了一个 Flash 网站，通过关键帧上的标签进行导航。

导航时如何让我的页面淡入淡出？

这不是动画问题，而是动作脚本 3 问题。

导航代码如下所示：

```
aboutbtn.addEventListener(MouseEvent.CLICK, gotohome);

function gotohome(event:MouseEvent):void

{gotoAndStop("home");} 
```

整个页面在一个框架上超过 3 层。我有 5 个主要页面和 2 个子页面。

那么如何在页面改变之前播放淡出动画呢？

帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:18:51.853

尝试：

```
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;

function gotohome(event:MouseEvent):void{
   var mytween:Tween = new Tween(stage, "alpha", Strong.easeOut, 1, 0, 1, true);
   mytween.addEventListener(TweenEvent.MOTION_FINISH, showHome); 

}
function showHome(event:TweenEvent):void{
   new Tween(stage, "alpha", Strong.easeOut, 0, 1, 1, true);
   gotoAndStop("home");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:39:42.023

创建一个白色背景的影片剪辑 fade_Mc。把它放在舞台上。

因此，代码将如下所示：

```
aboutbtn.addEventListener(MouseEvent.CLICK, gotohome);

function gotohome(event:MouseEvent):void
{

gotoAndStop("home");
 fade_Mc.visible = true 
addEventListener(Event.ENTER_FRAME, fadeOut)

}

function fadeOut(e:Event)
{

    fade_Mc.alpha -= 0.5 // change this value as per the speed of fade required

    if ( fade_Mc.alpha <=0 )
    {
     fade_Mc.visible = false
     fade_Mc.alpha = 1 ;
     removeEventListener(Event.ENTER_FRAME, fadeOut)
     }

} 
```

# c++ - 将二进制数据块解码为结构

> ID：10387660
> 
> 赞同：0
> 
> 时间：2012-04-30T17:09:26.650
> 
> 标签：c++

我有一个 Visual Studio 2008 C++ 项目，我需要将一个 6 字节的数据数组解码为一个结构。

我的想法是做这样的事情：

```
#pragma pack( push, 1 )
struct Map 
{
    BYTE alpha    : 8;
    BYTE bravo    : 8;
    UINT charlie  : 24;
    BYTE delta    : 8;
    BYTE padding0 : 8;  // ensure correct byte boundary
    BYTE padding1 : 8;
};
#pragma pack( pop )
// sizeof( Map ) == 8 bytes

BYTE test_data[ 6 ] = { 0x07,     // alpha
                        0x0B,     // bravo
                        0x00,     // charlie high byte
                        0x00,     // charlie med byte
                        0x01,     // charlie low byte
                        0x33 };   // delta
Map map = { };
memcpy( &map, test_data, sizeof( test_data ) );
ASSERT( map.alpha == 0x07 );
ASSERT( map.bravo == 0x0B );
ASSERT( map.charlie == 0x01 );
ASSERT( map.delta == 0x33 ); 
```

但是，`charlie`和`delta`中的数据永远不会正确。

有没有办法构建我的结构以使其正确，或者我是否坚持单独设置每个字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:26:01.920

要以便携式方式执行此操作：

```
struct Map 
{
    BYTE alpha;
    BYTE bravo;
    UINT charlie;
    BYTE delta;

    Map(const BYTE data[6])
     : alpha(data[0])
     , bravo(data[1])
     , charlie((data[2] << 16) | (data[3] << 8) | data[4])
     , delta(data[5])
    {}
};

int main()
{
    BYTE test_data[ 6 ] = { 0x07,     // alpha
                0x0B,     // bravo
                0x00,     // charlie high byte
                0x00,     // charlie med byte
                0x01,     // charlie low byte
                0x33 };   // delta
    Map map(test_data);
    ASSERT( map.alpha == 0x07 );
    ASSERT( map.bravo == 0x0B );
    ASSERT( map.charlie == 0x01 );
    ASSERT( map.delta == 0x33 );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:14:08.720

您不能天真地序列化复合类型。自己写吧：

```
std::tuple<char, char, unsigned int, char>
parse(char const * buf)
{
    return std::make_tuple(buf[0],
                           buf[1],
                           buf[2] + 256 * buf[3] + 256 * 256 * buf[4],
                           buf[5]);
} 
```

当然，您必须将整数的字节序与您的序列化格式记录的字节序匹配，在我的示例中为 little-endian。

# javascript - 属性包含选择器 * 替代

> ID：10387661
> 
> 赞同：1
> 
> 时间：2012-04-30T17:09:28.333
> 
> 标签：javascript, jquery, css-selectors, onchange

注意：使用 jQuery 1.3.2（是的，我正在升级，但仍然需要为此使用 1.3.2）

寻找更好的方法来实现这一点

HTML 元素（来自自定义 PHP 框架，更改起来非常麻烦）：

```
<select id="car[0][car_id]" name="car[0][car_id]">
    ... 100+ options
</select> 
```

我可以动态添加另一个下拉列表，如下所示：

```
<select id="car[1][car_id]" name="car[1][car_id]">
    ... 100+ options
</select> 
```

和

```
<select id="car[2][car_id]" name="car[2][car_id]">
    ... 100+ options
</select> 
```

现在我像这样遍历它们：

```
function showCarinfo() {
    for ( var car_number = 0; $("#car\\["+car_number+"\\]\\[car_id\\]").length > 0; car_number++ ) {
        // do stuff
    }
} 
```

关于更改选择：

```
$("input[name*=car_id]").change(function(){
    // display info for each car selected from each drop down select menu
    showCarinfo(); 
}); 
```

有没有更好的方法来实现改变和迭代方法？我正在使用“属性包含选择器”（[http://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)），但看起来它会导致 on change 事件出现很大的性能问题。

更新：

我已将 * 替换为 $ 以搜索最后一部分，这（我认为）确实对性能有所帮助，但仍在寻找这是否是最佳解决方案

```
$("input[name$=car_id]").change(function(){
    // display info for each car selected from each drop down select menu
    showCarinfo(); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:25:18.313

性能问题在于您的`showCarinfo`功能。您正在循环执行 DOM 选择。

不要那样做。而是缓存选择...

```
function showCarinfo() {
    var cars = $("input[name*=car_id]");
    for ( var car_number = 0; car_number < cars.length; car_number++ ) {
        cars.eq(i); // do stuff
    }
} 
```

* * *

或者你可以使用`.each()`

```
function showCarinfo() {
    $("input[name*=car_id]").each(function() {
        // do stuff
    });
} 
```

* * *

此外，如果处理程序唯一要做的就是调用该函数，那么一个小的优化就是这样做......

```
$("input[name*=car_id]").change(showCarinfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:14:49.623

只是作为猜测，但我会尝试将`change`事件绑定到所有`input`元素并在调用事件时过滤它们：

```
$("input").change(function() {
  if ($(this).attr('name').indexOf('car_id') == 0) {
    showCarinfo();
  }
}); 
```

这样 jQuery 就不必阻止页面执行以将事件处理程序附加到基于选择器的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:20:42.387

你可以使用这个：

```
$('input[name$="[car_id]"]').change(function(){
  // codes
}); 
```

# c# - ASP .NET SQL 查询总和、总计和新列

> ID：10387662
> 
> 赞同：0
> 
> 时间：2012-04-30T17:09:42.740
> 
> 标签：c#, asp.net, mysql, web

我已经考虑了好几个小时，但仍然无法找到如何做到这一点。您如何获得每年的商品总销售额。

到目前为止，我得到的是：

```
SQLCommand.CommandText = @"SELECT SUM SalesNo AS TotalYearSales FROM SalesTable WHERE Product = " + ddItems.SelectedItem + "";. 
```

表格标题如下产品、年份、销售额。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:17:16.647

```
SQLCommand.CommandText = @"SELECT DatePart( YY, SalesDate ), SUM( SalesNo ) AS TotalYearSales FROM SalesTable WHERE Product = ? GROUP BY DatePart( YY, SalesDate ) ";
SQLCommand.Parameters.Add( "parmForProduct", ddItems.SelectedItem ); 
```

正如 Daniel 指出的那样，您会对 sql 注入攻击持开放态度，并且应该对查询进行参数化。

要按年份获取总数，您还必须添加年份作为查询的基础。我不知道交易所基于的表格中的“日期”列，因此您必须进行调整。这 ”？” 在查询中是紧随其后添加的参数的“占位符”。参数的添加顺序应与查询中列出的顺序相同。一些 SQL 引擎允许“命名”参数并使用“@ProductIWant”之类的东西，而您的参数将使用相同的...

由于您只查询特定产品，因此不需要在列表中。除非您希望所有产品按年份分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:17:28.017

就像是

```
Select Year(SalesDate),Sum(SalesNo) From SalesTable where Product = "Navel Defluffer"
Group By Year(SalesDate) 
```

正如@Daniel 所暗示的，使用参数化查询而不是字符串连接。

# ios - 无法访问实例变量

> ID：10387666
> 
> 赞同：0
> 
> 时间：2012-04-30T17:09:53.783
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, uikit

我有一个 UTableView 分组。我想将我的数据分成“类别”组。我有一个实例变量，其中包含我数据库中的所有组。

```
@interface TableViewController : UITableViewController {

    // Response from server
    NSString* serverResponse;
    NSMutableArray *categories;     // This NSMutableArray contains all category's server    
}

@property (strong) NSString *serverResponse;
@property (strong) NSMutableArray *categories; 
```

我用 requestFinished 方法填充我的 NSMutableArray （一切都很好）

```
- (void)requestFinished:(ASIHTTPRequest *)request
{  
    NSString *result = request.responseString;

    NSArray *jsonArray = (NSArray*)[result JSONValue];

    int count = [jsonArray count]; 
    int i;
    NSDictionary *jsonDict = [[NSDictionary alloc] init];

    for (i = 0; i < count; i++) {
        jsonDict = [jsonArray objectAtIndex:i];
        NSString *current = [jsonDict objectForKey:@"categoriy"];

        [categories addObject:current];
        NSLog(@"%d", [categories count]) // Shows 4 -> ok !
    }
} 
```

但是当我用这种方法调用它时：

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    NSLog(@"%d", [categories count])   // Show 0 -> bad !
    return [categories count];
} 
```

它显示在控制台“0”上！

我真的不明白为什么！

也许有人可以帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:22:44.020

问题可能是`numberOfSectionsInTableView:`在调用之前`requestFinished:`调用。

我认为您必须重新加载表格视图。

尝试将`[self.tableView reloadData]`或类似的东西放在`requestFinished:`.

# foreman - 工头注册仅在重新启动后更改

> ID：10387667
> 
> 赞同：1
> 
> 时间：2012-04-30T17:09:55.383
> 
> 标签：foreman

> **可能重复：**
> [工头未反映更改](https://stackoverflow.com/questions/10634944/foreman-not-reflecting-changes)

谁能帮我解决这个问题：

*   工头注册仅在重新启动后更改

当我刷新我的页面时，我需要做什么工头注册更改

# javascript - Javascript画廊幻灯片向尽头减慢

> ID：10387670
> 
> 赞同：0
> 
> 时间：2012-04-30T17:10:08.180
> 
> 标签：javascript, jquery, performance, gallery, slide

我对一个非常好的 JS Gallery 有疑问，这个：

[http://jsfiddle.net/roXon/p44af/](http://jsfiddle.net/roXon/p44af/)

我已经根据需要对其进行了编辑和调整，但我注意到滑向终点或回到起点时，“滑动速度”会减慢。我想摆脱它，因为当画廊到达极端时它变得非常缓慢。

例如，如果我有 40 张图像，当到达 30 时它开始逐渐减速，而从 35 到 40 则需要很长时间。我怀疑它与“CompensationSpeed”有关，但我已经尝试过多次编辑它但都失败了。

帮助任何人？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:23:16.893

要获得您想要的效果，请将行更改`posX += (- MouseRelXpos - posX) / 14`为`posX += (- MouseRelXpos - posX) / 2`. 这将消除边缘的减速。

[更新了 JSFiddle。](http://jsfiddle.net/p44af/156/)

# database - web2py - 下拉菜单

> ID：10387672
> 
> 赞同：1
> 
> 时间：2012-04-30T17:10:23.797
> 
> 标签：database, drop-down-menu, web2py

我正在尝试为用户提供一个下拉菜单来选择数据库表。我在 db.py 中定义了几个表，我希望用户从下拉菜单中选择一个特定的表并插入条目。现在我使用 SQLFORM：

```
def index():
    form=SQLFORM(db.selectedtable)  #want to change the table name#
    if form.process().accepted:
       response.flash = 'form accepted'
    elif form.errors:
       response.flash = 'form has errors'
    else:
       response.flash = 'please fill out the form'
    return dict(form=form) 
```

我需要用户从显示数据库中所有可用表的下拉列表中选择“selectedtable”值。我不一定想从数据库中检索表值。我可以定义一个包含可用表的列表，下拉菜单可以从该列表中提取表名。到目前为止，我只发现 IS_IN_DB 可以自动创建下拉列表和 PluginDropdown() 但这不符合我的目的。如果有人能指导我以正确的方式处理这项任务，我将非常感激。

问候。

* * *

**更新：**

在安东尼的建议之后，我尝试了以下操作，因为我对 JS 不太熟悉。

```
{{extend 'layout.html'}}
{{select='NONE'}}

<form>    
<select>
{{for item in TOOLS:}}
<option value="{{select=item}}">{{=item}}</option>{{pass}}
</select>
 <input type="submit" value="Go!"/>
</form>

<h2>Input form</h2>
{{=form}}

<h2>{{=select}}</h2> 
```

如您所见，这不能正常工作。我试图做的是让用户选择值来“选择”变量。但它不起作用。它总是获取 ITEMS 中的最后一个元素（此列表在 db.py 中定义）。我的下一个选择是调用另一个控制器函数，将用户选择的值作为参数传递。然后它可以使用传递的值准备表单并发送到视图以显示

```
<h2>Input form</h2>
    {{=form}} 
```

但我不确定如何将用户选择的值分配给参数，然后使用该参数值调用另一个控制器函数。如果您有任何建议，我可以如何修改它以获得用户选择的值，非常感谢。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:42:29.553

您可以创建一个`<select>`列出所有表的元素，然后通过 Ajax将与所选表关联的表单作为[web2py 组件加载。](http://web2py.com/books/default/chapter/29/12#Components)在主页面的视图中（例如，/views/default/index.html）：

```
<script>
jQuery(function() {
  jQuery('#table').change(function() {
    web2py_component("{{=URL('default', 'form.load')}}" + "/" +
      jQuery(this).val(), target='form')
  })
})
</script>
{{=SELECT('Select a table', *db.tables, _id='table')}}
<div id="form"></div> 
```

在控制器中（例如，default.py）：

```
def form():
    if request.args(0) in db.tables:
        response.generic_patterns = ['load']
        return dict(form=SQLFORM(db[request.args(0)]).process())
    else:
        raise HTTP(404) 
```

注意，`db.tables`是在连接对象上定义的所有表的列表`db`——它`SELECT()`在视图中的帮助器中用于生成`<select>`所有表的列表。视图中的脚本注册了一个 jQuery 事件处理程序，每当从下拉列表中选择不同的表时就会触发该事件处理程序。处理程序调用该`web2py_component()`函数（位于 /static/js/web2py.js 中），该函数通过 Ajax 将表单组件加载到 id="form" 的 div 中。它将所选表的值附加到 URL。

在控制器中，该`form()`函数检查 request.args(0) 中的 db 表名。然后设置`response.generic_patterns`为允许“generic.load”视图（默认情况下，通用视图仅对本地请求启用）。或者，您可以定义自己的“form.load”视图，甚至使用不同的扩展名（例如，“form.html”）。

因为表单是作为 web2py Ajax 组件加载的，所以表单提交也会被捕获并通过 Ajax 提交，因此不会导致整个页面重新加载。

# php - GET 表单的 mvc 重写规则

> ID：10387674
> 
> 赞同：0
> 
> 时间：2012-04-30T17:10:29.867
> 
> 标签：php, .htaccess

我有这个规则： `RewriteRule ^(.+)$ index.php?url=$1 [QSA,L]`

当我发送 GET 表单时，它不起作用。例如`http://192.168.1.100/site/admin/analytics/chart?view=daily`应该是`http://192.168.1.100/site/admin/analytics/chart/view/daily`

第二条规则应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:41:00.110

你在这里谈论的是不同的东西。你只有你需要的部分代码。

您对已有的规则是正确的-

```
RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

此规则将“捕获”**任何传入请求**并将域名之后的所有内容`index.php`作为`$_GET`参数传递 - `?url=$1`。这`$1`是您在正则表达式中捕获的内容`^(.+)$`- 括号之间的所有内容都被捕获。所以到目前为止你还好...

下一个难题是您在`index.php`其中接收原始 URL 作为 GET 参数的内容。您必须解析*该*参数才能知道要返回给用户的页面。

让我们以这样的事情为例 -

`http://yourdomain.com/user/123`

你在里面`index.php`会做的是这样的——

```
$originalURL = $_GET['url'];
$URLParts = explode('/',$originalURL); 
```

现在你有`$URLParts`

```
Array (
 'user',
 '123'
) 
```

从这里您决定如何将数据准确地输出给用户 - 但为了清楚起见，我将举一个粗略的例子 -

```
// Get base module - array_pop() also removes it from the array 
$baseModule = array_pop($URLParts); 
$requestData = $URLParts; // Collect all other data that was passed
switch($baseModule){
  case "user":
    // If we know the request is for a user page, we know the next URL part
    // will be the user id.  Use it to fetch user information from our database.
    $userID = $requestData[0]
    $user = getUserByID($userID);
    echo $user['name'] . "<br/>";
    echo "<img src='". $user['picture'] ."' width='300' >";
    break;
  case "picture":
    echo "<img src='http://i.imgur.com/s5cH9.png' width='300' >";
    break;
  case "video":
    echo "<a href='http://youtu.be/Xk_XaJ7gE4Q' target='_blank' >Video Link</a>";
    break;
  default:
    echo "404 - The page you requested was not found.";
    break;
}
exit(); 
```

使用此代码，您的系统将确切知道当请求进入时该怎么做 -

*   `http://yourdomain.com/user/123`
*   `http://yourdomain.com/picture`
*   `http://yourdomain.com/video`

即使你给它一些垃圾 URL，它也会给你一个保守的信息，即你​​请求的页面没有找到。

* * *

这里要注意的一件事是，在使用传入数据时应始终小心。一些恶意脚本可能会发出请求，试图在您的系统中找到安全漏洞。您应该将所有传入数据（例如 中的任何内容`$_GET`）视为潜在威胁。你需要确保你知道你手中有什么数据。

一个实际的例子是使用在 SQL 查询中发送给我们的 user_id。我们知道我们是通过他们的 ID 来查找用户的，所以我们拥有的数据**必须是 numeric**。您可以通过调用来验证这一点[`.intval()`](http://php.net/manual/en/function.intval.php)- 这将确保您的 SQL 中有一个数值。还有更多（可能更好）的技术可以防止这些事情发生，但这是一个不同的主题，这只是一篇已经很长的帖子末尾的注释。:)

# java - Servlet 的销毁方法并没有关闭数据库连接，即使我也告诉过它

> ID：10387676
> 
> 赞同：0
> 
> 时间：2012-04-30T17:10:37.520
> 
> 标签：java, servlets, jdbc

所以我有一个每分钟查询数据库的 servlet，所以我想我只会永远打开一个连接（嗯，直到 webapp 停止）。因此我在 init() 中打开一个连接并在 destroy() 中关闭它。问题是，如果我在 tomcat 中停止应用程序后查看数据库，则连接仍然打开。发生了什么？

这是我的代码：

```
public void init() throws ServletException
{
    try
    {
        // Prepare the DB connection
        DriverManager.registerDriver(new com.informix.jdbc.IfxDriver());
        informixConnection = DriverManager.getConnection(DBURL, DBUsername, DBPassword);
    }
    catch(SQLException e)
    {
        throw new UnavailableException("Error connecting to the database");
    }
}

public void destroy()
{
    try
    {
        informixConnection.close();     
    }
    catch(Exception e)
    {
    }
} 
```

还有一个实际执行查询的方法和一个 doGet 以便用户可以获得最新的响应，但我还没有完成这些（尽管我已经测试了它们并且数据库连接有效）。

* * *

我不知道为什么这不起作用。我在 destroy 方法中添加了一些日志记录，以确认它在应用程序关闭并且突然开始工作时被调用。诡异的。

好的，现在以非 servlet 的方式编写它...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:35:16.173

根据文档，`destroy()`只有在 servlet 中的所有线程都退出或发生超时后才会调用。所以理论上应该总是调用destroy，除非容器没有优雅地停止。

1.  验证容器是否正常停止。
2.  `destroy()`方法内部没有异常
3.  尝试在方法请求时记录一些字符串或在调试器中设置断点。

此外，如果您使用的是旧版本的 Tomcat，请注意此[错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=29521)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:59:12.070

如果您使用的是 Tomcat，您可以创建一个资源

```
 <Resource name="jdbc/AutoOracle"
        auth="Container"
        type="javax.sql.DataSource"
        driverClassName="oracle.jdbc.driver.OracleDriver"
        username="usrname"
        password="pswd"
        url="jdbc:oracle:thin:@yourdb:1521:yourdb"
        maxActive="1500"
        maxIdle="30"
        maxWait="5000"
        removeAbandoned="true"
        removeAbandonedTimeout="900"
        timeBetweenEvictionRunsMillis="300000"
        minEvictableIdleTimeMillis="1800000"
        testOnBorrow="true"
        testWhileIdle="true"
        validationQuery="select 'test' from Dual"
        validationQueryTimeout="3"
        /> 
```

在您的 servlet 中创建一个 Context

```
Context dataSourceContext = new InitialContext(); 
```

然后使用上下文在需要连接的方法内创建您的数据库连接。

```
 Connection conn = null;
  try{
    DataSource ds = (DataSource)ctx.lookup("java:comp/env/jdbc/AutoOracle");
    conn = ds.getConnection();
    if(conn == null){
      log.error("Connection is null");
    }else{
      // do some work
    }
  }catch(Exception e){
    // handle exceptions
  }finally{
    try{
      conn.close();
    }catch(Exception e){
      // handle exception
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:27:03.667

init() 和 destroy() 方法与 Servlet 的生命周期相关联。

典型 servlet 的生命周期是容器中应用程序的生命周期。

在正常情况下，对于通用 servlet，应用程序被部署到容器中，并启动应用程序。此时，servlet 不存在。

一旦请求被定向到映射到 Servlet 的 URL，容器将检查它是否还没有启动该 Servlet 的实例。如果没有，它将调用 Servlet 上的 init() 方法，然后开始将请求路由到它。一个应用程序中通常一次只有一个 Servlet 实例。

作为替代方案，可以在 web.xml 中使用 load-on-startup 参数配置 Servlet，如果存在，则 Servlet 将在应用程序启动期间初始化，而不是等待初始化 Servlet 的请求。

稍后，当容器关闭或应用程序被取消部署时，容器将对在应用程序生命周期内已初始化的任何 Servlet 调用 destroy() 方法。

因此，总而言之，如果您期望 init() 和 destroy() 方法与单个请求相关联，那么您的期望就错了。为此，您将使用 ServletRequestListener（Servlet 3.0）或使用 Servlet 过滤器（3.0 之前）的特殊东西。

# c++ - easypng 替代/超级简单的数据可视化库 (c++)

> ID：10387679
> 
> 赞同：1
> 
> 时间：2012-04-30T17:10:50.190
> 
> 标签：c++, data-visualization

我偶然发现了easypng，作为我正在尝试的一些机器学习项目显示数据的一种方式。

然而，它完全过时了，自 2009 年以来没有得到维护，我无法编译它。

是否有任何替代库（理想情况下与平台无关）允许程序以直接的方式编写像素，例如

```
writepixel(x,y,colour) 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:27:48.587

我最终使用了 hochl 建议的 QT

# php - 使用 jQuery 或 Javascript 查找下拉选项值

> ID：10387682
> 
> 赞同：0
> 
> 时间：2012-04-30T17:11:09.953
> 
> 标签：php, javascript, jquery

当用户加载它时，我在页面上动态生成一个下拉列表。我想使用 jquery 或 javascript 获取下拉列表的值。

棘手的部分是下拉列表将具有这样的值：“我爱兔子（19.95 美元）”

我想获取下拉列表的值，然后隔离括号内的值。有任何想法吗？

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T17:14:00.970

获得价值很容易，使用[`val()`](http://api.jquery.com/val). 那将是一个字符串。

然后，您只需使用[正则表达式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)（可能使用捕获组）来获取值；例如：

```
var value, m, innerValue;
value = $("selector for select box").val();
m = /\(([^)]+)/.exec(value);
if (m) {
    innerValue = m[1];
} 
```

那个正则表达式说：“找到一个`(`然后捕获它后面不是一个`)`”的所有东西。然后我们取捕获组的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T17:19:05.710

您不能选择以下格式：

```
<select name="opinions_price">
<option value="19.45">I love rabbits (£19.45)</option>
<option value="12.45">I hate parakeets (£12.45)</option>
<option value="3.24">I am indifferent to possums (£3.24)</option>
</select> 
```

然后只需执行以下操作：

```
var price = $('select option:selected').val(); 
```

如果您想改用数据属性（假设选择处于循环中，您知道该怎么做）：

```
<select name="opinions_price">
<?php foreach($things as $thing) { ?>
<option data-price="<?php echo $thing['price']; ?>" data-id="<?php echo $thing['id']; ?>">[..]</option>
<?php } ?>
</select> 
```

然后只需执行以下操作：

```
var price = $('select option:selected').data('price');
var id = $('select option:selected').data('id'); 
```

节省（可能）昂贵的正则表达式？

# jquery - 如何垂直对齐 Twitter Bootstrap Carousel 的箭头？

> ID：10387683
> 
> 赞同：2
> 
> 时间：2012-04-30T17:11:11.830
> 
> 标签：jquery, css, twitter, xhtml, twitter-bootstrap

正如您在旋转木马上看到的那样，有一个箭头可以向右或向左滑动。

> [http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

我不使用字幕。因此，我希望它垂直居中。现在是这样的

![在此处输入图像描述](../Images/0441551172366657bf86cec74296f55f.png)

我怎样才能垂直居中箭头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T17:23:44.477

元素最终落在您的布局中的位置可能会受到数量惊人的因素的影响。如果没有看到您的标记，您的问题的特定解决方案是不可能的。

但是，如果您知道轮播的高度将保持不变，那么您可以很容易地调整这些元素的位置，无论它适合您多少像素。

使用 jQuery，您可以找到元素的位置，然后添加 20 个像素。

通过[偏移文档](http://api.jquery.com/offset/)使用 jQuery 。

```
// on carousel load or document load
$(".arrows").each(function() {
    // Scoot the icons down from where they are
    var newTop = $(this).offset.top + 30;
    var sameLeft = $(this).offset.left;
    $(this).offset({top:newTop, left:sameLeft });
}); 
```

但是，您也可以只在箭头的 CSS 中指定所需的位置。但是，在没有看到这些图标的 css 的情况下，我不确定什么 css 可以帮助您安排它们，因为可能建议的任何内容都可能*与*您已经布置它们的方式发生冲突。

**编辑**：

通过 twitter.github.com 站点，我查看了那些 carousel-control 的 css 并调整了以下 css，它似乎达到了您想要的效果：

```
.carousel-control {
    position: absolute; /* already here */
    top: 50%;  /* Was top: 40% */
    ...
} 
```

您应该在自己的 css 文件中覆盖该 css。添加您自己的类并将其也添加到箭头上，或者仅使用它已有的类并`!important`在必要时使用。

# virtualhost - apache 虚拟主机 SSL + 非 SSL

> ID：10387688
> 
> 赞同：5
> 
> 时间：2012-04-30T17:11:25.140
> 
> 标签：virtualhost, apache, httpd.conf

我无法弄清楚设置 SSL 虚拟主机 + 其非 SSL 副本的正确方法是什么。

我现在有这样的：
`<VirtualHost myip:80>
plenty of directives here
</VirtualHost>`

和

`<VirtualHost myip:443>
same directives as above
</VirtualHost>`

它工作正常，但每次我在其中一个虚拟主机中编辑指令时，我也必须在另一个虚拟主机中执行此操作。有什么更干净更优雅的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T18:01:56.613

要在 HTTP 和 HTTPS URL 上运行网站，您唯一的选择是使用相同的 DocumentRoot 运行 2 个单独的 VirtualHost。

如果指令上下文允许，您可以在两个 DocumentRoots 的父文件夹中的 .htaccess 文件中保留一些常用设置。

# jquery - 全屏毯仅覆盖可见屏幕。如果向下滚动，则不存在

> ID：10387690
> 
> 赞同：4
> 
> 时间：2012-04-30T17:11:34.423
> 
> 标签：jquery, html, css

这可能是一个简单的问题，但我似乎无法弄清楚。

我正在使用 jquery 创建一个弹出窗口。单击编辑按钮时，会出现一个弹出窗口，并且一条毯子覆盖它后面的所有东西，给人一种淡出的印象。

我让它正常工作，但背景毯只覆盖可见的屏幕空间。这意味着您可以向下滚动并查看毯子的结束位置。

我试图让它覆盖页面上的所有内容，甚至是那些除非你滚动才能看到的东西。

这是我目前拥有的CSS，

```
#blanket {  
 background-color:#111;
 opacity: 0.65;
 filter:alpha(opacity=65);
 height:100%;
 width:100%;
 position:absolute;
 top:0;
 left:0;
 z-index:2000} 
```

我怎样才能让它涵盖所有内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T17:13:32.513

更改`position: absolute`为以`position: fixed`使覆盖背景（毯子）不会随页面滚动。

# c++ - C++ 类的虚函数表存储在哪里？

> ID：10387691
> 
> 赞同：4
> 
> 时间：2012-04-30T17:11:37.040
> 
> 标签：c++

我试图找到为 c++ 类存储虚拟函数表的确切位置。我找到了一些答案，例如“函数指针的静态数组”，所以它会存储在数据段只读内存中吗？（初始化一个）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:15:45.073

很可能是的。但是，这不是强制性的。甚至没有强制要求多态性通过虚函数表实现，但在大多数平台上都是如此。这些是实现细节，只要编译器遵循标准设定的行为，它就可以为所欲为。

A`vftable`是每个类一个，并且只存储在内存中的一个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:16:04.183

当您将任何函数设为虚拟时，编译器将在您的类中插入一个 vptr。结果，类的大小将增加 4 个字节（在 Win32 上）。此指针保存虚拟表 (vtable) 的地址。vtable 是由编译器在编译时构造的，基本上只是一个函数指针数组。函数指针实际上是指向该特定类的虚函数的指针。更准确地说，虚拟表是一个函数指针的静态数组，因此同一类的不同实例可以共享该虚拟表。由于静态成员存储在数据段 (.data) 中，因此 vtable 也存储在可执行文件的数据段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T23:01:45.467

它依赖于实现，是的。

而对于 g++ (4.9.0)，虚拟表（不是指针）存储在 ELF 文件的 .rodata 部分及其对应的内存段 LOAD 中。

# php - mysql - php 倒数计时器 - 服务器端

> ID：10387692
> 
> 赞同：0
> 
> 时间：2012-04-30T17:11:43.553
> 
> 标签：php, mysql

我正在使用 php 和 mysql 并且没有 Java 知识。搜索后，我发现了许多用于 javascript 的倒数计时器，但它们是客户端的。我正在寻找基于服务器端的东西。我在 mysql 中有一个表，其中有一列名为 TimeRemaining。该列存储未来的时间记录。我需要加载剩余时间最少的记录，以便当它达到零时，该记录将从表中删除，并且新的倒计时计时器从剩余时间最少的下一条记录开始。此外，如果插入的新记录的剩余时间少于剩余时间最短的前一个记录，则需要使用新记录更新计时器。这是否可能和/或建议通过使用触发器来更新 mysql 中的事件，或者我可以在 php.ini 中创建倒数计时器。

谢谢大家的帮助。编辑：我提到 Java/Javasript 是因为我想避免它，因为我对此一无所知，并且通过研究，我看到大多数使用 java 的帖子。为了更好地了解我想要做什么，多个用户被禁止在论坛中创建帖子 7 天。我在 mysql 中有一个表，用于存储该禁令及其到期时间。当 7 天到期时，我需要自动从表中删除该记录。用户不应该控制这个计时器。我不需要在网页上显示剩余时间。我需要在没有用户干预的情况下在后台发生这种情况。这更清楚吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:18:28.337

你想在客户端做这个。在页面加载时，您可以从 SQL 表中提取倒计时时间和客户端倒计时时间。时间完成后，您可以再次调用（同步或 AJAX）到服务器 (PHP) 以删除该记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:15:55.320

考虑到您说您对 javascript 知之甚少，我会在您的页面中制作一个小 iframe，它会自动刷新并相应地显示上次检查的时间。

# asp.net - 带有 Active Directory 错误的 MVC2 登录 =“无法与服务器建立安全连接”

> ID：10387693
> 
> 赞同：0
> 
> 时间：2012-04-30T17:11:57.333
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-2, login, active-directory

我收到了这个奇怪的错误信息：

> 无法与服务器建立安全连接

当我尝试使用我的 AD 帐户登录时。我尝试在 ASP.NET 网络表单中连接到 LDAP，它似乎在那里工作正常，我不认为它是导致问题的连接字符串。

但是当我使用 MVC 时，会出现解析器错误。我也试图环顾四周并用谷歌搜索，但我似乎找不到正确的解决方案。根据配置错误，它说源错误是：

```
<add name="AspNetActiveDirectoryMembershipProvider" 
     type="System.Web.Security.ActiveDirectoryMembershipProvider" 
     connectionStringName="ADConnectionString" 
     connectionUsername="cn=actualUser" 
     connectionPassword="actualUsersPassword" />` 
```

这是我的`web.config`：

```
<connectionStrings>
    <add name="ADConnectionString" connectionString="LDAP://IPadress/DC=example,DC=test"/>
</connectionStrings>
<system.web>
    <authentication mode="Forms">
      <forms name=".ADAuthCookie" loginUrl="~/Account/LogOn" timeout="15" 
             slidingExpiration="false" protection="All" />
    </authentication>
    <authorization>
      <deny users="?" />
      <allow users="*" />
    </authorization>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <membership defaultProvider="AspNetActiveDirectoryMembershipProvider">
      <providers>
        <clear/>
        <add name="AspNetActiveDirectoryMembershipProvider" 
             type="System.Web.Security.ActiveDirectoryMembershipProvider" 
             connectionStringName="ADConnectionString" 
             connectionUsername="cn=actualUser" connectionPassword="actualUsersPassword" />
      </providers>
    </membership>
    <trust level="Full" />
    <pages>
       <namespaces>
          <add namespace="System.Web.Mvc" />
          <add namespace="System.Web.Mvc.Ajax" />
          <add namespace="System.Web.Mvc.Html" />
          <add namespace="System.Web.Routing" />
       </namespaces>
    </pages>
</system.web> 
```

这是我的课程，我从“ if (Membership.ValidateUser(model.UserName, model.Password)) {” 收到错误消息，它指向 web.config 中的成员资格提供程序：

```
 [HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
   if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName,Convert.ToBoolean(model.Password));
            if ((!String.IsNullOrEmpty(returnUrl)))
            {
                return Redirect(returnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:15:45.380

您是否尝试将 Windows 身份验证模式设置为 Windows ？

```
<authentication mode="Windows" /> 
```

# python - SQLAlchemy 声明式。指定要选择的列

> ID：10387697
> 
> 赞同：2
> 
> 时间：2012-04-30T17:12:26.947
> 
> 标签：python, sqlalchemy

声明基础：

```
Base = declarative_base()
Base.query = Session.query_property() 
```

班上：

```
class Cheat(Base):

  __tablename__ = 'cheats'

  id = Column(Integer, primary_key = True, autoincrement = True)
  cheat = Column(Text)
  name = Column(String(255), index = True)
  _html = Column('html', Text)
  _slug = Column('slug', String(255))

  @hybrid_property
  def html(self):
    return self._html

  @html.setter
  def set_html(self, md):
    from markdown import markdown
    self._html = markdown(md)

  @hybrid_property
  def slug(self):
    return self._slug

  @slug.setter
  def set_slug(self, name):
    self._slug = slugify(name)

  def __init__(self, name, cheat):
    self.name = name
    self.slug = name
    self.cheat = cheat
    self.html = cheat

  def __repr__(self):
    return "Cheat<%s>" % self.name 
```

现在我可以从作弊中得到一切：

```
Cheat.query.all() 
```

SQLAlchemy 将生成类似于以下内容的 SQL 语句：

`SELECT name, slug, cheat, html FROM cheats`

但我希望我的 SQL 语句是：

`SELECT name, slug FROM cheats`

所以我需要指定我想要检索哪些列，因为我真的不需要通过网络从数据库中提取大量文本。我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T17:44:22.410

将它们定义为[deferred](http://docs.sqlalchemy.org/en/latest/orm/loading_columns.html?highlight=deferred%20column#deferred-column-loading)，那么它们只会在被访问时被获取

```
from sqlalchemy.orm import deferred

class Cheat(Base):

  __tablename__ = 'cheats'

  id = Column(Integer, primary_key = True, autoincrement = True)
  cheat = deferred(Column(Text))
  name = Column(String(255), index = True)
  _html = Column('html', Text)
  _slug = deferred(Column('slug', String(255))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T22:58:13.397

```
for name, slug in session.query(Cheat.name, Cheat.slug):
    print name, slug 
```

# java - ThreadPoolExecutor 实用程序方法

> ID：10387705
> 
> 赞同：0
> 
> 时间：2012-04-30T17:13:11.060
> 
> 标签：java, multithreading, threadpool

我正在我的程序中编写一个线程池实用`multithreading`程序。我只需要验证以下方法是否正确，它们是否为我返回正确的值。我使用的是`LinkedBlockingQueue`大小为 1 的 a。我还参考了 java 文档，它总是说“方法将返回**近似**的”数字短语。所以我怀疑以下天气条件是否正确。

```
public boolean isPoolIdle() {
    return myThreadPool.getActiveCount() == 0;
}

public int getAcceptableTaskCount() {
    //initially poolSize is 0 ( after pool executes something it started to change )
    if (myThreadPool.getPoolSize() == 0) {
        return myThreadPool.getCorePoolSize() - myThreadPool.getActiveCount();
    }
    return myThreadPool.getPoolSize() - myThreadPool.getActiveCount();
}

public boolean isPoolReadyToAcceptTasks(){
    return myThreadPool.getActiveCount()<myThreadPool.getCorePoolSize();
} 
```

请让我知道您的想法和建议。

更新

有趣的是，如果池返回我，则该`getAcceptableTaskCount`方法有 3 个线程可用，当我将 3 个任务传递给池时，有时一个任务被拒绝，它由`RejectedExecutionHandler`. 有时池会处理我通过的所有任务。我想知道为什么池被拒绝任务，因为我根据可用线程数传递任务。

--------- 灰色答案的执行---

```
class MyTask implements Runnable {

@Override
public void run() {
    try {
        Thread.sleep(1000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    System.out.println("exec");
} 
```

}

```
@Test
public void testTPool(){

    ExecutorService pool = Executors.newFixedThreadPool(5);

    List<Future<MyTask>> list = new ArrayList<Future<MyTask>>();

    for (int i = 0; i < 5; i++) {
        MyTask t = new MyTask();
        list.add(pool.submit(t, t));
    }

    for (int i = 0; i < list.size(); i++) {

        Future<MyTask> t = list.get(i);

        System.out.println("Result -"+t.isDone());

        MyTask m = new MyTask();

        list.add(pool.submit(m,m));
    }
} 
```

这将在控制台中打印`Result -false`，表示任务未完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:45:53.590

从您的评论中：

> 我需要知道池是否空闲或池是否可以接受任务。如果池可以接受，我需要知道池中有多少空闲线程。如果是 5，我将发送 5 个任务到池中进行处理。

我认为您不应该自己进行池核算。对于您的线程池，如果您使用`Executors.newFixedThreadPool(5)`，那么您可以提交任意数量的任务，并且它只会在 5 个线程中运行它们。

> 所以我从向量中获取前 5 个任务并将它们分配给池。忽略向量中的其他任务，因为它们可能会从单独的循环中更新/删除

好的我明白了。所以你想最大化并行化，同时又不想预加载作业？我认为类似以下伪代码的东西会起作用：

```
 int numThreads = 5;
  ExecutorService threadPool = Executors.newFixedThreadPool(numThreads);
  List<Future<MyJob>> futures = new ArrayList<Future<MyJob>>();
  // submit the initial jobs
  for (int i = 0; i < numThreads; i++) {
      MyJob myJob = getNextBestJob();
      futures.add(threadPool.submit(myJob, myJob));
  }
  // the list is growing so we use for i
  for (int i = 0; i < futures.size(); i++) {
      // wait for a job to finish
      MyJob myJob = futures.get(i);
      // process the job somehow
      // get the next best job now that the previous one finished
      MyJob nextJob = getNextBestJob();
      if (nextJob != null) {
         // submit the next job unless we are done
         futures.add(threadPool.submit(myJob, myJob));
      }
  } 
```

但是，我不太明白线程数会如何变化。如果您使用更多详细信息编辑您的问题，我可以调整我的回复。

# php - 如何解决这个错误加载模块 MySQL 服务器已经消失了大型 joomla 数据库网站

> ID：10387706
> 
> 赞同：0
> 
> 时间：2012-04-30T17:13:16.413
> 
> 标签：php, mysql, sql-server, joomla, phpmyadmin

我开发了一个带有大型数据库的 joomla 网站，特别是 jos_users，它拥有大约 200 万用户。

当我尝试在 joomla 管理员（联系人组件）的后端创建新联系人时，出现以下错误

我有专用服务器，并告诉我主机提供商查看是否有从他们这边或我这边到 MYSQL 服务器的更改...

但他们说脚本需要优化或其他什么......下面是错误

```
Error Loading Modules
MySQL server has gone away 
```

SQL：

```
SELECT m.* FROM jos_modules as m LEFT JOIN jos_modules_menu AS mm ON mm.moduleid = m.id WHERE m.published = 1 AND m.access <= 2 AND m.client_id = 1 ORDER BY m.position, m.ordering 
```

错误：

```
Warning: mysql_query() [function.mysql-query]: Unable to save result set in /home/jamesBOND/public_html/libraries/joomla/database/database/mysql.php on line 223

Warning: array_merge() [function.array-merge]: Argument #2 is not an array in /home/jamesBOND/public_html/libraries/joomla/html/html/list.php on line 152

Warning: Invalid argument supplied for foreach() in /home/jamesBOND/public_html/libraries/joomla/html/html/select.php on line 68

Warning: array_merge() [function.array-merge]: Argument #2 is not an array in /home/jamesBOND/public_html/libraries/joomla/html/html/list.php on line 201

Warning: Invalid argument supplied for foreach() in /home/jamesBOND/public_html/libraries/joomla/html/html/select.php on line 68

Warning: Invalid argument supplied for foreach() in /home/jamesBOND/public_html/libraries/joomla/html/html/select.php on line 68 
```

好心提醒..

调试记录的查询：

```
SELECT * FROM jos_session WHERE session_id = '0f293fd651b31502ec2be43876b'
DELETE FROM jos_session WHERE ( TIME < '1335799136' )
SELECT * FROM jos_session WHERE session_id = '0f293fd651b31502ec2be43876b'
UPDATE `jos_session` SET `time`='1335808136',`userid`='62',`usertype`='Super Administrator',`username`='admin',`gid`='25',`guest`='0',`client_id`='1',`data`='__default|a:8:{s:15:\"session.counter\";i:56;s:19:\"session.timer.start\";i:1335804352;s:18:\"session.timer.last\";i:1335808118;s:17:\"session.timer.now\";i:1335808124;s:22:\"session.client.browser\";s:109:\"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19\";s:8:\"registry\";O:9:\"JRegistry\":3:{s:17:\"_defaultNameSpace\";s:7:\"session\";s:9:\"_registry\";a:4:{s:7:\"session\";a:1:{s:4:\"data\";O:8:\"stdClass\":9:{s:27:\"com_advancedmodules_0search\";s:0:\"\";s:33:\"com_advancedmodules_0filter_order\";s:10:\"m.position\";s:37:\"com_advancedmodules_0filter_order_Dir\";s:0:\"\";s:33:\"com_advancedmodules_0filter_state\";s:1:\"P\";s:32:\"com_advancedmodules_0filter_type\";s:10:\"mod_custom\";s:36:\"com_advancedmodules_0filter_position\";s:1:\"0\";s:36:\"com_advancedmodules_0filter_template\";s:1:\"0\";s:34:\"com_advancedmodules_0filter_access\";s:0:\"\";s:37:\"com_advancedmodules_0filter_menuitems\";s:0:\"\";}}s:11:\"application\";a:1:{s:4:\"data\";O:8:\"stdClass\":1:{s:4:\"lang\";s:0:\"\";}}s:6:\"global\";a:1:{s:4:\"data\";O:8:\"stdClass\":1:{s:4:\"list\";O:8:\"stdClass\":1:{s:5:\"limit\";s:2:\"20\";}}}s:21:\"com_advancedmodules_0\";a:1:{s:4:\"data\";O:8:\"stdClass\":1:{s:10:\"limitstart\";i:0;}}}s:7:\"_errors\";a:0:{}}s:4:\"user\";O:5:\"JUser\":19:{s:2:\"id\";s:2:\"62\";s:4:\"name\";s:13:\"Administrator\";s:8:\"username\";s:5:\"admin\";s:5:\"email\";s:25:\"bahrain.promote@gmail.com\";s:8:\"password\";s:65:\"da30ab3ea34d7ae9e04b8a7289344:j0EoSOVq4TtehmS4Qr5Q2iAahxFFiPAN\";s:14:\"password_clear\";s:0:\"\";s:8:\"usertype\";s:19:\"Super Administrator\";s:5:\"block\";s:1:\"0\";s:9:\"sendEmail\";s:1:\"1\";s:3:\"gid\";s:2:\"25\";s:12:\"registerDate\";s:19:\"2011-08-04 00:03:49\";s:13:\"lastvisitDate\";s:19:\"2012-04-29 23:04:51\";s:10:\"activation\";s:0:\"\";s:6:\"params\";s:64:\"admin_language=\nlanguage=\neditor=ckeditor\nhelpsite=\ntimezone=0\n\n\";s:3:\"aid\";i:2;s:5:\"guest\";i:0;s:7:\"_params\";O:10:\"JParameter\":7:{s:4:\"_raw\";s:0:\"\";s:4:\"_xml\";N;s:9:\"_elements\";a:0:{}s:12:\"_elementPath\";a:1:{i:0;s:64:\"/home/jatink/public_html/libraries/joomla/html/parameter/element\";}s:17:\"_defaultNameSpace\";s:8:\"_default\";s:9:\"_registry\";a:1:{s:8:\"_default\";a:1:{s:4:\"data\";O:8:\"stdClass\":5:{s:14:\"admin_language\";s:0:\"\";s:8:\"language\";s:0:\"\";s:6:\"editor\";s:8:\"ckeditor\";s:8:\"helpsite\";s:0:\"\";s:8:\"timezone\";s:1:\"0\";}}}s:7:\"_errors\";a:0:{}}s:9:\"_errorMsg\";N;s:7:\"_errors\";a:0:{}}s:13:\"session.token\";s:32:\"1357096eb06e94b7329f1a5b9a1\";}' WHERE session_id='0f293b8fff7d651b31502ec2be43876b'
SELECT * FROM jos_components WHERE parent = 0
SELECT folder AS TYPE, element AS name, params FROM jos_plugins WHERE published >= 1 AND access <= 2 ORDER BY ordering
SELECT config FROM jos_fua_config WHERE id='fua' LIMIT 1
SELECT template FROM jos_templates_menu WHERE client_id = 1 AND menuid = 0
SELECT COUNT(*) FROM jos_contact_details AS cd
SELECT cd.*, cc.title AS category, u.name AS USER, v.name AS editor, g.name AS groupname FROM jos_contact_details AS cd LEFT JOIN jos_groups AS g ON g.id = cd.access LEFT JOIN jos_categories AS cc ON cc.id = cd.catid LEFT JOIN jos_users AS u ON u.id = cd.user_id LEFT JOIN jos_users AS v ON v.id = cd.checked_out ORDER BY category, cd.ordering LIMIT 0, 20
SELECT id AS VALUE, title AS text FROM jos_categories WHERE SECTION = 'com_contact_details' AND published = 1 ORDER BY ordering
SELECT m.* FROM jos_modules AS m LEFT JOIN jos_modules_menu AS mm ON mm.moduleid = m.id WHERE m.published = 1 AND m.access <= 2 AND m.client_id = 1 ORDER BY m.POSITION, m.ordering
SELECT a.name, a.admin_menu_link, a.admin_menu_img FROM jos_components AS a INNER JOIN jos_components AS b ON b.id = a.parent WHERE b.OPTION = 'com_contact' AND b.parent = 0 ORDER BY a.ordering ASC
SELECT a.*, SUM(b.home) AS home FROM jos_menu_types AS a LEFT JOIN jos_menu AS b ON b.menutype = a.menutype GROUP BY a.id
SELECT * FROM jos_components WHERE `option` <> "com_frontpage" AND `option` <> "com_media" AND enabled = 1 ORDER BY ordering, name
SELECT COUNT(*) FROM jos_messages WHERE state = 0 AND user_id_to = 62
SELECT COUNT( session_id ) FROM jos_session WHERE guest <> 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:20:55.537

那是一个大 jos_users 表，但是您要询问的查询根本不包括该表，因此它可能是在该表之前运行的 sql 语句。要查看它可能是什么，请在系统配置中打开 Joomla 调试，并查看在该 SQL 语句之前的 SQL 语句 - 可能是页面上的最后一个。

# html - 带图像格式的单选按钮

> ID：10387707
> 
> 赞同：0
> 
> 时间：2012-04-30T17:13:19.887
> 
> 标签：html, css, forms

我试图在每行中包含三个图像，每个图像下方都有一个单选按钮。我对表单不太熟悉，我只是无法弄清楚为什么图像会以这种方式呈现。有人对如何创建这个有任何想法或想法吗？

/jess/design.html

编辑：想通了它的一部分......表格宽度的问题。如果有人对此无能为力，仍在尝试弄清楚如何在下面获取单选按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:26:17.357

只需将每个单选按钮及其图像放在一个带有 的 div 中`width: 100%`，它就可以了。

编辑：不用等待，这会将收音机放在图像的右侧，尝试在包装 div 内向图像添加 100% 宽度，并将包装 div 的宽度设置为所需列数所需的值（2 列 50%）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:41:19.310

嵌套 div 并应用适当的规则：

在这里看到它：http: [//jsfiddle.net/SREMB/4/](http://jsfiddle.net/SREMB/4/)

```
html, body {
    width: 100%;
}

.row {
  text-align: center;
  width: 100%;
  display: inline-block;
  white-space: nowrap;
}

.cell {
  padding: 10px;
  display: inline-block;
  text-align: center;
}

img {
  border: 2px solid black;
}
​ 
```

**HTML**

```
<div class="row">

<div class="cell">
<img src="http://connorreaumond.com/jess/images/beads/grey.gif"><br>
<input type="radio" name="bead" value="grey" />
</div>

<div class="cell">
<img src="http://connorreaumond.com/jess/images/beads/ivory.gif"><br>
<input type="radio" name="bead" value="ivory" />
</div>

<div class="cell">
<img src="http://connorreaumond.com/jess/images/beads/mattsmoke.gif"><br>
<input type="radio" name="bead" value="mattsmoke" />
</div>
</div>

<br><br>

<div class="row">

<div class="cell">
<img src="http://connorreaumond.com/jess/images/beads/grey.gif"><br>
<input type="radio" name="bead" value="grey" />
</div>

<div class="cell">
<img src="http://connorreaumond.com/jess/images/beads/ivory.gif"><br>
<input type="radio" name="bead" value="ivory" />
</div>

<div class="cell">
<img src="http://connorreaumond.com/jess/images/beads/mattsmoke.gif"><br>
<input type="radio" name="bead" value="mattsmoke" />
</div>
</div>

<br><br>

<div class="row">

<div class="cell">
<img src="http://connorreaumond.com/jess/images/beads/grey.gif"><br>
<input type="radio" name="bead" value="grey" />
</div>

<div class="cell">
<img src="http://connorreaumond.com/jess/images/beads/ivory.gif"><br>
<input type="radio" name="bead" value="ivory" />
</div>

<div class="cell">
<img src="http://connorreaumond.com/jess/images/beads/mattsmoke.gif"><br>
<input type="radio" name="bead" value="mattsmoke" />
</div>
</div>

<br><br> 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:51:49.740

你可以这个，[http://jsfiddle.net/ayBeh/](http://jsfiddle.net/ayBeh/)

我建议你ID应该在同一页面按时使用，所以请使用.bead而不是“#bead”，对不起BRO，我看到你的代码，不太干净，有很多清理问题，我想你不熟悉也可以使用 HTML，但无论如何你已经尽力了，请继续保持，如果需要帮助，请随时联系我，

# google-chrome-extension - 通过快捷键激活分机

> ID：10387712
> 
> 赞同：4
> 
> 时间：2012-04-30T17:13:41.217
> 
> 标签：google-chrome-extension

是否可以通过快捷键打开/启动 google chrome 扩展程序。例如，我想分配一个快捷方式，比如说，`CTRL + E`打开我的扩展程序并启动它。

有没有人这样做过？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T19:31:00.800

***更新***(5/24/2013)：您可以使用新的[`chrome.commands`](http://developer.chrome.com/dev/extensions/commands.html)API，它为键盘命令提供内置框架支持。

原答案如下：

**第 1 步：**使用[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)将按键侦听器绑定到每个页面。

```
// in the content script, listen for Crtl+Shift+E (upper or lowercase)
document.documentElement.addEventListener("keypress", function(event) {
    if((e.keyCode == 69 || e.keyCode == 101) && e.ctrlKey && e.shiftKey) {
        // do something (step 2, below)
    }
}, true); 
```

**第2步：**对于内容脚本之外的动作，使用[消息传递](https://code.google.com/chrome/extensions/messaging.html)通知后台页面快捷键已被按下，它应该执行一些动作。

**第 3 步**：后台页面执行一些操作。目前不可能（并且可能[永远不可能](http://code.google.com/p/chromium/issues/detail?id=30491)）以编程方式打开浏览器操作弹出窗口，但您可以发送交互式[桌面通知](http://code.google.com/chrome/extensions/notifications.html)、打开新选项卡或执行许多其他操作。

[**编辑：**编辑代码以包含 Rob W. 的建议；在下面的评论中查看他关于安全的重要说明。]

# c# - 使用 EntityFrameWork 删除 Db 元素

> ID：10387714
> 
> 赞同：0
> 
> 时间：2012-04-30T15:56:46.657
> 
> 标签：c#, .net, database, entity-framework

我正在尝试实现一种删除数据库表元素的方法。

下面的代码没有抛出任何异常，但元素在执行后仍然存在于表中。

```
namespace SuitTest_tt_content_2
{
    class DBUtils
    {
        public static StandardResponse checkContent(long id)
        {
            using (OnlineRedesignIndexEntities DB = new OnlineRedesignIndexEntities())
            {
                try
                {
                    Console.WriteLine("          ************** TEST ADD_CONTENT **************          ");
                    var ContentId = (from elemento in DB.Contenuto where elemento.PK_Content_ID == id select elemento).First();

                    if (ContentId.PK_Content_ID==id)
                    {
                        DB.Attach(ContentId);
                        DB.DeleteObject(ContentId);
                        DB.Detach(ContentId);
                    }
                    else
                    {
                        throw new Exception("Errore nel reperimento dell'elemento");
                    }
                }
                catch (Exception e)
                {
                    return new StandardResponse() { Success = false, Message = e.Message };
                }

                try
                {
                    DB.SaveChanges();
                }
                catch (Exception e)
                {
                    throw new Exception("Errore nel salvataggio modifiche sul DB." + e.Message);
                }
            }

            return new StandardResponse() { Success = true };
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:14:24.313

您缺少 DB.SaveChanges()。最好在 StackExchange.Com 上提出此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:00:31.143

删除分离呼叫。当您执行 SaveChanges 时，上下文会查看它正在跟踪的所有对象。由于您执行了 Detach，因此它不再跟踪该实例。

# html - 引导占位符字段不起作用？

> ID：10387718
> 
> 赞同：4
> 
> 时间：2012-04-30T17:14:00.580
> 
> 标签：html, twitter-bootstrap

我在输入字段上使用占位符属性，就像在我的 Bootstrap 示例中一样，但它没有出现在我的元素中。我错过了什么吗？是否有一些我缺少的文档类型？我像在 Boostrap 的示例中一样使用它，看似一个简单的属性，但没有显示任何内容。

```
<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

            <form class="form-search">
                <input type="text" class="input-medium search-query" placeholder="Search by Tag">
                <button type="submit" class="btn btn-primary">Search</button>
            </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T00:52:51.937

像往常一样责怪我的愚蠢 - 我正在使用其中一个“可下载的 Bootstrap 主题”，而这个特定的主题将占位符设置为#ffffff，并将输入的背景设置为#ffffff。

# asp.net - ASP.NET 将页面重定向到新的 URL

> ID：10387721
> 
> 赞同：1
> 
> 时间：2012-04-30T17:14:16.867
> 
> 标签：asp.net, html, redirect

我有一个网站，它有一个名为 Test.htm 的启动页面。该站点暂时关闭，我们希望在站点加载时显示错误页面。我有一个名为error.htm 的页面。这怎么可能 ？？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:23:42.880

ASP.NET 提供了三种主要方法，允许您在错误发生时捕获和响应错误：**Page_Error**、**Application_Error**和**应用程序配置**文件 (Web.config)。

1.Page_Error 事件处理程序提供了一种捕获**页面级别**发生的错误的方法 2.您可以使用 Application_Error 事件处理程序来捕获应用程序中发生的错误**3.** 如果您不调用 Server.ClearError 或将错误捕获在Page_Error 或 Application_Error 事件处理程序，根据 Web.config 文件部分中的设置处理错误。在里面**部分，您可以将**重定向页面**指定为默认错误页面 (defaultRedirect) 或根据引发的 HTTP 错误代码指定到特定页面。**

 **例如，您需要在 Global.asax 页面**customErrors**部分添加以下代码以将用户重定向到自定义页面

`<customErrors defaultRedirect="http://hostName/applicationName/errorStatus.htm" mode="On"> </customErrors>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:18:34.990

只是一个想法，但看了一个 response.redirect？

[在 ASP.NET MVC 中，response.redirect 是如何工作的？](https://stackoverflow.com/questions/2822562/in-asp-net-mvc-how-does-response-redirect-work)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:20:00.700

让它[“离线”](http://www.codeguru.com/csharp/.net/net_asp/article.php/c19653/Taking-an-ASPNET-20-Application-Offline.htm)

请参阅：[IIS：将所有请求重定向到一页？](https://stackoverflow.com/questions/300416/iis-redirect-all-requests-to-one-page)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:47:23.987

您可以使用**app_offline.htm**页面。如果 asp.net 在 root 上找到这个页面，那么无论你问它什么都显示这个页面，并且该站点已关闭。

第二种方式，即不关闭站点，在 Application Begin Request 上，将重定向到您喜欢的页面：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    string cTheFile = HttpContext.Current.Request.Path;

    // just double check in case that htm proceed from asp.net
    if(!cTheFile.EndsWith("test.htm"))
    {
         System.Web.HttpContext.Current.Response.Redirect("test.htm", true);
         return;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T17:50:42.980

您可以破解您的 web.config 以强制您的应用程序在请求时返回 404。然后将 404 错误页面覆盖为您的“错误”页面。

```
<httpRuntime enable="false" />

<customErrors mode="On" defaultRedirect="~/errors/GeneralError.aspx">
<error statusCode="404" redirect="~/error.htm" />
</customErrors> 
```**

# sql - Symfony2 / Doctrine2 SQL Select 有条件的子句

> ID：10387723
> 
> 赞同：0
> 
> 时间：2012-04-30T17:14:24.617
> 
> 标签：sql, symfony, doctrine-orm, native

我正在 Symfony2 中创建一个表单，我想用自定义查询的结果填充一个下拉列表。这是一个示例 php 代码：

```
<?php
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        //...
        ->add('type', 'entity', array(
            'class'         => 'EventBundle:Event',
            'query_builder' => function (EntityRepository $er) {
                return $er
                    ->createQueryBuilder('e')
                    ->add('select', 'e.id, CONCAT(IF (e.modified > NOW(), "Pending: ", ""), e.name) as name')
                ;
            }
        ))
    ;
}
?> 
```

不过，我找不到设置此 SELECT 子句的方法。我正在寻找类似于 Zend 框架中的“new Zend_Db_Expr(...)”的东西。有没有一种方法可以使用复杂的 SELECT 子句创建此查询，而无需将其键入为本机 SQL 代码？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:12:03.440

好吧，您提供的查询应该是 DQL，而不是 SQL。

并且看到 IF() 是[无效的 DQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html)，我不确定你能做些什么来解决这个问题。也许让实体类本身通过[属性选项](http://symfony.com/doc/current/reference/forms/types/entity.html#property)进行连接？

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        //...
        ->add('type', 'entity', array(
            'class'         => 'EventBundle:Event',
            'property'      => 'modifiedName',
        ))
    ;
} 
```

然后在 EventBundle\Entity\Event

```
public function getModifiedName()
{
  return $this->modified > new \DateTime() 
    ? 'Pending: ' . $this->getName()
    : $this->getName()
  ;
} 
```

# xmlreader - PHP中的xmlReader - 让它正常工作的问题

> ID：10387726
> 
> 赞同：0
> 
> 时间：2012-04-30T17:14:33.757
> 
> 标签：xmlreader

我有一个非常大的文件需要在 php 中解析，所以我使用的是 xmlReader。我刚刚开始使用 xml 并且遇到了一些问题....

这是xml的结构...

```
<?xml version="1.0" encoding="utf-8"?>
    <devices>
        <os name="os1">
            <device user_agent="uaValue1">
                <device_name>name1</device_name>
                <device_os>osValue1</device_os>
            </device>
            <device user_agent="uaValue2">
                <device_name>name2</device_name>
                <device_os>osValue2</device_os>
            </device>   
        </os>
        <os name="os2">
            <device user_agent="uaValue3">
                <device_name>name3</device_name>
                <device_os>osValue5</device_os>
            </device>
            <device user_agent="uaValue4">
                <device_name>name4</device_name>
                <device_os>osValue4</device_os>
            </device>   
        </os>
        <manufacturer name="mf1">
            <device user_agent="uaValue5">
                <device_name>name5</device_name>
                <device_os>osValue5</device_os>
            </device>
            <device user_agent="uaValue6">
                <device_name>name6</device_name>
                <device_os>osValue6</device_os>
            </device>       
        </manufacturer>
        <manufacturer name="mf2">
            <device user_agent="uaValue7">
                <device_name>name7</device_name>
                <device_os>osValue7</device_os>
            </device>
            <device user_agent="uaValue8">
                <device_name>name8</device_name>
                <device_os>osValue8</device_os>
            </device>       
        </manufacturer> 
    </devices> 
```

我正在尝试使用以下函数来读取 xml（其中 $findby 将传递 os 或制造商 / $atr_value 是 $findby 值的属性名称 / $ua_str 是用户代理）。

```
function get_data($findby,$atr_value,$ua_str) {
    $data['device_name'] = '';
    $data['device_os'] = '';

    $xml = new XMLReader;
    $xml->open('devices.xml');

    while($xml->read()) {
        if ($xml->name == $findby) {
            if ($xml->getAttribute('name') == $atr_value) {
                while($xml->read()) {
                    if ($xml->name == "device") {
                        if ($xml->getAttribute('user_agent') == $ua_str) {
                            while($xml->read()) {                               
                                if ($xml->name == "device_name") {
                                    $data['device_name'] = $xml->value;
                                }
                                if ($xml->name == "device_os") {
                                    $data['device_os'] = $xml->value;
                                }
                            }
                        }
                    }                   
                }
            }
        }
    }
    $xml->close();
    return $data;
} 
```

通过在这里和那里回显一些值，它似乎将数据拉到用户代理，但不会得到 device_name 或 device_os。

显然，这是行不通的。我在想 xml 不能以这种方式构建，这可能是问题并且很容易解决。然而，在我以前的一个版本中，它提取了数据，但它来自错误的用户代理。所以我认为这是我尝试使用 xmlReader 提取数据的方式。

有人对为什么这不起作用有任何想法吗？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:00:43.643

您没有在外部 while 循环中检查标签类型。XMLReader 向您发送开始标签、结束标签、标签内容，您至少需要处理其中一些事件。

在您的外部循环中，检查`$reader->nodeType == XMLReader::ELEMENT`开头、`XMLReader::END_ELEMENT`结尾和`XMLReader::TEXT`标记内容。还有很多其他的 - 请参阅此类的 PHP 文档（[值 0-17](http://uk.php.net/manual/en/class.xmlreader.php)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T02:37:22.863

我最终只是添加了我想要的元素作为属性并像这样调用它来获取数据......

```
function get_data($ua_str) {
    $data = array();

    $xml = new XMLReader;
    $xml->open('devices.xml');

    while($xml->read()) {
        if ($xml->nodeType == XMLReader::ELEMENT && $xml->name == 'device') {
            while($xml->read()) {
                if ($xml->getAttribute('user_agent') == $ua_str) {
                    $data['device_mf'] = $xml->getAttribute('device_mf');
                    $data['device_os'] = $xml->getAttribute('device_os');
                    $data['device_name'] = $xml->getAttribute('device_name');
                }
            }
        }
    }
    $xml->close();
    return $data;
} 
```

# html - 我可以为网络制作聊天室吗？

> ID：10387731
> 
> 赞同：0
> 
> 时间：2012-04-30T17:14:57.080
> 
> 标签：html, ajax, chat, chatroom

例如，如果我在一所大学有一小群人，我想创建一个聊天室应用程序，每个用户都可以下载该应用程序，然后打开以查看所有可用用户的列表，然后单击列表中的一个用户然后会弹出一个窗口，您输入的任何文本都会发送给该特定人员。我怎样才能做到这一点？我已经使用 AJAX 和 html 等创建了一个聊天室，但我从来没有为你在学校或工作场所的网络创建过聊天室。我需要什么语言？感谢所有帮助，因为我对此完全陌生。

我在 Internet 上阅读了有关 winsock 连接的内容，但找不到太多内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:28:13.230

您可以在 java 中使用套接字进行网络编程。

看看这个 Deitel 的关于 java messenger 应用程序的教程。

[http://www.deitel.com/books/jhtp7/DeitelMessenger.pdf](http://www.deitel.com/books/jhtp7/DeitelMessenger.pdf)

# twitter-bootstrap - twitter bootstrap 中的五个相等的列

> ID：10387740
> 
> 赞同：402
> 
> 时间：2012-04-30T17:15:28.130
> 
> 标签：twitter-bootstrap, twitter-bootstrap-3, bootstrap-4

我想在我正在构建的页面上有 5 个相等的列，但我似乎无法理解这里如何使用 5 列网格：http: [//web.archive.org/web/20120416024539/http ://domain7 .com/mobile/tools/bootstrap/responsive](http://web.archive.org/web/20120416024539/http://domain7.com/mobile/tools/bootstrap/responsive)

上面演示的五列网格是 twitter bootstrap 框架的一部分吗？

* * *

## 回答 #1

> 赞同：578
> 
> 时间：2014-04-02T00:21:07.013

# 对于引导程序 4

Bootstrap 4 现在默认使用 flexbox，因此您可以直接使用它的神奇力量。查看根据嵌套列数动态调整宽度的[自动布局列。](https://v4-alpha.getbootstrap.com/layout/grid/#auto-layout-columns)

这是一个例子：

```
<div class="row">
   <div class="col">
      1 of 5
   </div>
   <div class="col">
      2 of 5
   </div>
   <div class="col">
      3 of 5
   </div>
   <div class="col">
      4 of 5
   </div>
   <div class="col">
      5 of 5
   </div>
</div> 
```

[**工作演示**](http://jsfiddle.net/k1hon1o2/3/)

* * *

# 对于引导程序 3

[在这里](https://web.archive.org/web/20140410144231/http://www.wearesicc.com/quick-tips-5-column-layout-with-twitter-bootstrap/)创建了一个带有 Twitter Bootstrap的奇妙的**全宽**5 列布局。

这是迄今为止最先进的解决方案，因为它与 Bootstrap 3 无缝协作。它允许您一次又一次地重用这些类，与当前的 Bootstrap 类配对以进行响应式设计。

**CSS：**
将其添加到您的全局样式表，甚至添加到`bootstrap.css`文档的底部。

```
.col-xs-5ths,
.col-sm-5ths,
.col-md-5ths,
.col-lg-5ths {
    position: relative;
    min-height: 1px;
    padding-right: 15px;
    padding-left: 15px;
}

.col-xs-5ths {
    width: 20%;
    float: left;
}

@media (min-width: 768px) {
    .col-sm-5ths {
        width: 20%;
        float: left;
    }
}

@media (min-width: 992px) {
    .col-md-5ths {
        width: 20%;
        float: left;
    }
}

@media (min-width: 1200px) {
    .col-lg-5ths {
        width: 20%;
        float: left;
    }
} 
```

**投入使用！**
例如，如果你想创建一个 div 元素，它在中等屏幕上表现得像五列布局，而在小屏幕上表现得像两列，你只需要使用这样的东西：

```
<div class="row">
    <div class="col-md-5ths col-xs-6">
       ...
    </div>
</div> 
```

[**工作演示**](http://jsfiddle.net/sct3j/283/)- 展开框架以查看列变得响应。

[**另一个演示**](http://jsfiddle.net/fx2k7/91/)- 将新`col-*-5ths`类与其他类合并，例如`col-*-3`和`col-*-2`。调整框架大小以`col-xs-6`在响应视图中查看它们全部更改。

* * *

## 回答 #2

> 赞同：432
> 
> 时间：2012-12-21T23:12:17.617

使用五个具有 span2 类的 div，并给第一个类 offset1。

```
<div class="row-fluid">
    <div class="span2 offset1"></div>
    <div class="span2"></div>
    <div class="span2"></div>
    <div class="span2"></div>
    <div class="span2"></div>
</div> 
```

瞧！五个等距且居中的列。

* * *

在 bootstrap 3.0 中，这段代码看起来像

```
<div class="row">
    <div class="col-md-2 col-md-offset-1"></div>
    <div class="col-md-2"></div>
    <div class="col-md-2"></div>
    <div class="col-md-2"></div>
    <div class="col-md-2"></div>
</div> 
```

* * *

## 更新

由于 bootstrap 4.0 默认使用 Flexbox：

```
<div class="row">
    <div class="col"></div>
    <div class="col"></div>
    <div class="col"></div>
    <div class="col"></div>
    <div class="col"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：170
> 
> 时间：2014-01-15T15:52:42.633

对于**Bootstrap 3**，如果你想要**全角**并且正在使用`LESS`,`SASS`或类似的东西，你所要做的就是利用[Bootstrap 的 mixin 函数](http://getbootstrap.com/css/#grid-less) `make-md-column`,`make-sm-column`等。

较少的：

```
.col-lg-2-4{
  .make-lg-column(2.4)
}
.col-md-2-4{
  .make-md-column(2.4)
}
.col-sm-2-4{
  .make-sm-column(2.4)
} 
```

萨斯：

```
.col-lg-2-4{
  @include make-lg-column(2.4)
}
.col-md-2-4{
  @include make-md-column(2.4)
}
.col-sm-2-4{
  @include make-sm-column(2.4)
} 
```

您不仅可以使用这些 mixin 构建**真正的全角引导列类**，还可以构建所有**相关的辅助类**，如`.col-md-push-*`、`.col-md-pull-*`和`.col-md-offset-*`：

较少的：

```
.col-md-push-2-4{
  .make-md-column-push(2.4)
}
.col-md-pull-2-4{
  .make-md-column-pull(2.4)
}
.col-md-offset-2-4{
  .make-md-column-offset(2.4)
} 
```

萨斯：

```
.col-md-push-2-4{
  @include make-md-column-push(2.4)
}
.col-md-pull-2-4{
  @include make-md-column-pull(2.4)
}
.col-md-offset-2-4{
  @include make-md-column-offset(2.4)
} 
```

其他答案谈论`@gridColumns`完全有效的设置，但这会改变所有引导程序的核心列宽。使用上述 mixin 函数将在默认引导列的顶部添加 5 列布局，因此不会破坏任何 3rd 方工具或现有样式。

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2017-02-14T12:48:57.053

## 2019 年更新

**引导 4.1+**

这是使用[自动布局网格](https://getbootstrap.com/docs/4.1/layout/grid/#auto-layout-columns)的 5 个相等的全宽列（**没有额外的 CSS 或 SASS** ） ：

```
<div class="container-fluid">
    <div class="row">
        <div class="col">1</div>
        <div class="col">2</div>
        <div class="col">3</div>
        <div class="col">4</div>
        <div class="col">5</div>
    </div>
</div> 
```

[http://codeply.com/go/MJTglTsq9h](http://codeply.com/go/MJTglTsq9h)

该解决方案有效，因为 Bootstrap 4 现在是 flexbox。您可以`.row`使用分隔符（例如每 5 列`<div class="col-12"></div>`或`<div class="w-100"></div>`每 5 列）将 5 列包裹在同一列中。

另请参阅：[Bootstrap - 5 列布局](https://stackoverflow.com/questions/31944691/bootstrap-5-column-layout?noredirect=1&lq=1)

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2013-08-01T23:00:49.873

下面是 @machineaddict 和 @Mafnah 答案的组合，为 Bootstrap 3 重新编写（到目前为止对我来说效果很好）：

```
@media (min-width: 768px){
    .fivecolumns .col-md-2, .fivecolumns .col-sm-2, .fivecolumns .col-lg-2  {
        width: 20%;
        *width: 20%;
    }
}
@media (min-width: 1200px) {
    .fivecolumns .col-md-2, .fivecolumns .col-sm-2, .fivecolumns .col-lg-2 {
        width: 20%;
        *width: 20%;
    }
}
@media (min-width: 768px) and (max-width: 979px) {
    .fivecolumns .col-md-2, .fivecolumns .col-sm-2, .fivecolumns .col-lg-2 {
        width: 20%;
        *width: 20%;
    }
} 
```

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2013-07-04T08:41:28.320

保留原始引导程序的 12 列，不要自定义它。您需要做的唯一修改是原始引导响应 css**之后的一些 css，如下所示：**

以下代码已针对 Bootstrap 2.3.2 进行了测试：

```
<style type="text/css">
/* start of modification for 5 columns */
@media (min-width: 768px){
    .fivecolumns .span2 {
        width: 18.297872340425532%;
        *width: 18.2234042553191494%;
    }
}
@media (min-width: 1200px) {
    .fivecolumns .span2 {
        width: 17.9487179487179488%;
        *width: 17.87424986361156592%;
    }
}
@media (min-width: 768px) and (max-width: 979px) {
    .fivecolumns .span2 {
        width: 17.79005524861878448%;
        *width: 17.7155871635124022%;
    }
}
/* end of modification for 5 columns */
</style> 
```

和html：

```
<div class="row-fluid fivecolumns">
    <div class="span2">
        <h2>Heading</h2>
        <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
        <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
    <div class="span2">
        <h2>Heading</h2>
        <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
        <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
    <div class="span2">
        <h2>Heading</h2>
        <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
        <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
    <div class="span2">
        <h2>Heading</h2>
        <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
        <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
    <div class="span2">
        <h2>Heading</h2>
        <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
        <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
</div> 
```

**注意：**即使 span2 乘以 5 不等于 12 列，您也明白了 :)

可以在这里找到一个工作示例[http://jsfiddle.net/v3Uy5/6/](http://jsfiddle.net/v3Uy5/6/)

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-03-18T12:17:26.057

如果您不需要**完全相同**宽度的列，您可以尝试使用嵌套创建 5 列：

```
<div class="container">
    <div class="row">
        <div class="col-xs-5">
            <div class="row">
                <div class="col-xs-6 column">Column 1</div>
                <div class="col-xs-6 column">Column 2</div>
            </div>
        </div>
        <div class="col-xs-7">
            <div class="row">
                <div class="col-xs-4 column">Column 3</div>
                <div class="col-xs-4 column">Column 4</div>
                <div class="col-xs-4 column">Column 5</div>
            </div>
        </div>
    </div>
</div> 
```

[jsfiddle](https://jsfiddle.net/DraggonZ/obrbmpes/)

前两列的宽度等于 5/12 * 1/2 ~ 20.83%

最后三列：7/12 * 1/3 ~ 19.44%

这种 hack 在许多情况下给出了可接受的结果，并且不需要任何 CSS 更改（我们仅使用本机引导类）。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-09-08T22:41:32.453

# 为 5 列布局创建自定义引导下载

进入[Bootstrap 2.3.2](http://getbootstrap.com/2.3.2/customize.html#variables)（或[Bootstrap 3](http://getbootstrap.com/customize/#variables-basics)）自定义页面，设置以下变量（不要输入分号）：

```
@gridColumns:           5;
@gridColumnWidth:       172px;
@gridColumnWidth1200:   210px;
@gridColumnWidth768:    128px;
@gridGutterWidth768:    21px; 
```

下载您的构建。这个网格将适合默认容器，保留默认的装订线宽度（几乎）。

**注意：**如果您使用的是 LESS，请`variables.less`改为更新。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-11-09T18:12:49.327

用 flexbox [http://output.jsbin.com/juziwu](http://output.jsbin.com/juziwu)

```
.flexrow {
  display: flex;
  background: lightgray; /*for debug*/
}
.flexrow > * {
  flex: 1;
  margin: 1em;
  outline: auto green;
}
```

```
<div class="flexrow">
  <div>...</div>
  <div>...</div>
  <div>...</div>
  <div>...<br>..</div>
  <div>...</div>
</div>
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-01-24T08:12:09.957

```
<div class="equal row-fluid">
    <div class="span2"></div>
    <div class="span2"></div>
    <div class="span2"></div>
    <div class="span2"></div>
    <div class="span2"></div>
</div>

.equal .span2 {
    width: 20%;
} 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2013-05-13T16:31:07.413

我投票赞成 Mafnah 的回答，但再看一遍，如果您保持默认边距等，我建议以下内容会更好。

```
<div class="equal row-fluid">
    <div class="span2"></div>
    <div class="span2"></div>
    <div class="span2"></div>
    <div class="span2"></div>
    <div class="span2"></div>
</div>

.equal .span2 {
    width: 17.9%;
} 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2016-05-08T20:48:14.873

使用类 col-sm-2 创建 5 个元素，并将类 col-sm-offset-1 添加到第一个元素

ps 这不会是全角（会从屏幕左右缩进一点）

代码应该看起来像这样

```
<div class="col-sm-2 col-sm-offset-1"></div>
<div class="col-sm-2"></div>
<div class="col-sm-2"></div>
<div class="col-sm-2"></div>
<div class="col-sm-2"></div> 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2018-05-29T15:24:53.193

# Bootstrap 4，每行的列数可变

如果你想每行*最多有*五列，这样更少的列数仍然只占每行的 1/5，解决方案是使用 Bootstrap 4 的[mixins](https://getbootstrap.com/docs/4.1/layout/grid/#mixins)：

SCSS：

```
.col-2-4 {
    @include make-col-ready(); // apply standard column margins, padding, etc.
    @include make-col(2.4); // 12/5 = 2.4
}
.col-sm-2-4 {
    @include make-col-ready();
    @include media-breakpoint-up(sm) {
        @include make-col(2.4);
    }
}
.col-md-2-4 {
    @include make-col-ready();
    @include media-breakpoint-up(md) {
        @include make-col(2.4);
    }
}
.col-lg-2-4 {
    @include make-col-ready();
    @include media-breakpoint-up(lg) {
        @include make-col(2.4);
    }
}
.col-xl-2-4 {
    @include make-col-ready();
    @include media-breakpoint-up(xl) {
        @include make-col(2.4);
    }
} 
```

HTML：

```
<div class="container">    
  <div class="row">
    <div class="col-12 col-sm-2-4">1 of 5</div>
    <div class="col-12 col-sm-2-4">2 of 5</div>
    <div class="col-12 col-sm-2-4">3 of 5</div>
    <div class="col-12 col-sm-2-4">4 of 5</div>
    <div class="col-12 col-sm-2-4">5 of 5</div>
  </div>
  <div class="row">
    <div class="col-12 col-sm-2-4">1 of 2</div> <!-- same width as column "1 of 5" above -->
    <div class="col-12 col-sm-2-4">2 of 2</div> <!-- same width as column "2 of 5" above -->
  </div>
</div> 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2019-12-28T11:25:55.103

**对于引导 4.4+**

使用全新的`row-cols-n`类。

1.  将`row-cols-5`类添加到您的`.row`div。无需自定义 CSS。
2.  有关行列，请参见此处的 4.4 文档：[https ://getbootstrap.com/docs/4.4/layout/grid/#row-columns](https://getbootstrap.com/docs/4.4/layout/grid/#row-columns)

**对于 Bootstrap 4.4 之前的 Bootstrap 4 版本**

1.  复制下面的 CSS（Bootstrap 作者的优秀 CSS）并将其添加到您的项目中

2.  阅读上面引用的文档以正确使用它。

    `.row-cols-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}@media (min-width:576px){.row-cols-sm-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-sm-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-sm-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-sm-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-sm-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-sm-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}}@media (min-width:768px){.row-cols-md-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-md-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-md-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-md-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-md-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-md-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}}@media (min-width:992px){.row-cols-lg-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-lg-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-lg-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-lg-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-lg-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-lg-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}}@media (min-width:1200px){.row-cols-xl-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-xl-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-xl-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-xl-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-xl-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-xl-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}}`

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2014-07-22T14:31:02.950

在 Bootstrap 3 中启用 5 列的另一种方法是修改 Bootstrap 默认使用的 12 列格式。然后创建一个 20 列的网格（使用 Bootstrap 网站上的自定义或使用 LESS/SASS 版本）。

要在引导网站上进行自定义，请转到[自定义和下载](http://getbootstrap.com/customize/)页面，将变量 `@grid-columns`从更新`12`为`20`。然后您将能够创建 4 列和 5 列。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2016-02-28T18:32:39.460

Bootstrap 默认可以扩展到 12 列？这意味着如果我们想创建一个等宽的 12 列布局，我们将在 div class="col-md-1" 中写入十二次。

```
<div class="row">
<div class="col-md-1"></div>    
<div class="col-md-2">1</div>
<div class="col-md-2">2</div>
<div class="col-md-2">3</div>
<div class="col-md-2">4</div>
<div class="col-md-2">5</div>
<div class="col-md-1"></div>
</div> 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2021-08-09T19:08:26.603

# 最好的办法

仅将**.row-cols-5**类添加到您的行中。所以每行有 5 个 div 。

```
<div class="container-fluid">
    <div class="row row-cols-5">
        <div class="col">1</div>
        <div class="col">2</div>
        <div class="col">3</div>
        <div class="col">4</div>
        <div class="col">5</div>
        <div class="col">6</div>
        <div class="col">7</div>
        <div class="col">8</div>
        <div class="col">9</div>
        <div class="col">10</div>
    </div>
</div> 
```

使用响应式 .row-cols-* 类快速设置最能呈现您的内容和布局的列数。虽然普通的 .col-* 类适用于单个列（例如，.col-md-4），但行列类作为快捷方式设置在父 .row 上。

*   行列-*
*   行-cols-sm-*
*   行-cols-md-*
*   行列-lg-*
*   行-cols-xl-*

你也可以使用附带的 Sass mixin，row-cols()：

```
.element {
  // Three columns to start
  @include row-cols(3);

  // Five columns from medium breakpoint up
  @include media-breakpoint-up(md) {
    @include row-cols(5);
  }
} 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2014-03-12T14:36:42.717

它可以通过嵌套和使用一点 css 覆盖来完成。

```
<div class="col-sm-12">
<div class="row">
  <div class="col-sm-7 five-three">
    <div class="row">
      <div class="col-sm-4">
      Column 1
      </div>
      <div class="col-sm-4">
      Column 2
      </div>
      <div class="col-sm-4">
      Column 3
      </div><!-- end inner row -->
    </div>
  </div>
  <div class="col-sm-5 five-two">
    <div class="row">
      <div class="col-sm-6">
        Col 4
      </div>
      <div class="col-sm-6">
      Col 5
      </div>
    </div><!-- end inner row -->
  </div>
</div>​&lt;!-- end outer row --> 
```

然后一些CSS

```
@media  (min-width: 768px) {
div.col-sm-7.five-three {
width: 60% !important;
}

div.col-sm-5.five-two {
width: 40% !important;
} 
```

}

这是一个示例：[5 等列示例](https://www.uakron.edu/it/cms/responsive-guide/gridding/five-col.dot)

这是我在 coderwall 上的完整文章

[bootstrap 3中的五个相等的列](https://coderwall.com/p/wo1f-g)

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2014-08-09T13:53:34.887

在我看来，最好将它与 Less 语法一起使用。此答案基于@fizzix的[答案](https://stackoverflow.com/a/22799354/3356028 "对于 Bootstrap 3 及更高版本")

这样，列使用用户可能已覆盖的变量（@grid-gutter-width，媒体断点），并且五列的行为与 12 列网格的行为相匹配。

```
/*
 * Special grid for ten columns, 
 * using its own scope 
 * so it does not interfere with the rest of the code
 */

& {
    @import (multiple) "../bootstrap-3.2.0/less/variables.less";
    @grid-columns: 5;
    @import  (multiple) "../bootstrap-3.2.0/less/mixins.less";

    @column: 1;
    .col-xs-5ths {
        .make-xs-column(@column);
    }

    .col-sm-5ths {
        .make-sm-column(@column);
    }

    .col-md-5ths {
        .make-md-column(@column);
    }

    .col-lg-5ths {
        .make-lg-column(@column);
    }
}

/***************************************/
/* Using default bootstrap now
/***************************************/

@import  (multiple) "../bootstrap-3.2.0/less/variables.less";
@import  (multiple) "../bootstrap-3.2.0/less/mixins.less";

/* ... your normal less definitions */ 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2015-06-17T14:33:21.263

这太棒了：[http ://www.ianmccullough.net/5-column-bootstrap-layout/](http://www.ianmccullough.net/5-column-bootstrap-layout/)

做就是了：

```
<div class="col-xs-2 col-xs-15"> 
```

和 CSS：

```
.col-xs-15{
    width:20%;
} 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2015-12-21T04:32:19.107

默认情况下，Bootstrap 不提供允许我们创建五列布局的网格系统，您需要按照 Bootstrap 在您的 css 文件中创建一些自定义类和媒体查询的方式创建默认列定义

```
.col-xs-15,
.col-sm-15,
.col-md-15,
.col-lg-15 {
    position: relative;
    min-height: 1px;
    padding-right: 10px;
    padding-left: 10px;
}
.col-xs-15 {
    width: 20%;
    float: left;
}
@media (min-width: 768px) {
.col-sm-15 {
        width: 20%;
        float: left;
    }
}
@media (min-width: 992px) {
    .col-md-15 {
        width: 20%;
        float: left;
    }
}
@media (min-width: 1200px) {
    .col-lg-15 {
        width: 20%;
        float: left;
    }
} 
```

和一些html代码

```
<div class="row">
    <div class="col-md-15 col-sm-3">
    ...
    </div>
</div> 
```

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2016-07-12T09:13:38.417

***具有 Twitter Bootstrap 样式的 5 列布局***

```
.col-xs-15 {
    position: relative;
    min-height: 1px;
    padding-right: 10px;
    padding-left: 10px;
}

.col-xs-15 {
    width: 100%;
    float: left;
}
@media (min-width: 768px) {
.col-xs-15 {
        width: 50%;
        float: left;
    }
}
@media (min-width: 992px) {
    .col-xs-15 {
        width: 20%;
        float: left;
    }
}
@media (min-width: 1200px) {
    .col-xs-15 {
        width: 20%;
        float: left;
    }
} 
```

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2017-03-01T16:38:10.090

一个不需要大量 CSS 的解决方案，也不需要调整引导程序默认的 12col 布局：

[http://jsfiddle.net/0ufdyeur/1/](http://jsfiddle.net/0ufdyeur/1/)

HTML：

```
<div class="stretch">
  <div class="col-lg-2"></div>
  <div class="col-lg-2"></div>
  <div class="col-lg-2"></div>
  <div class="col-lg-2"></div>
  <div class="col-lg-2"></div>
</div> 
```

CSS：

```
@media (min-width: 1200px) { /*if not lg, change this criteria*/
  .stretch{
    width: 120%; /*the actual trick*/
  }
} 
```

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2017-05-14T19:04:53.750

只需创建一个新类并根据需要为每个媒体查询定义其行为

```
@media(min-width: 768px){
  .col-1-5{
    width: 20%;
    float: left;
    position: relative;
    min-height: 1px;
    padding-right: 5px;
    padding-left: 5px;
  }
}

<div class="container-fluid">
  <div class="row">
    <div class="col-1-5">col 1</div>
    <div class="col-1-5">col 2</div>
    <div class="col-1-5">col 3</div>
    <div class="col-1-5">col 4</div>
    <div class="col-1-5">col 5</div>
  </div>
</div> 
```

这是一个工作演示[https://codepen.io/giorgosk/pen/BRVorW](https://codepen.io/giorgosk/pen/BRVorW)

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2019-09-07T17:38:25.040

**引导程序 4**

我阅读了所有答案，但没有找到“明显的答案”。基本上，您需要做的是获取任何引导列（例如`col-2`）并编辑一些值。在这个例子中，我使用的是`.col-custom`类。

五列相等意味着每一列占据`20%`，所以：`flex:0 0 20%`和`max-width:20%`。以同样的方式，您可以创建其他数量的列（7、9、11、84 或任何您想要的）。

您可以创建具有自定义宽度的 CSS 变量，并在您的项目中使用它。像这样的东西：

```
:root {
  --col-custom: 20%;
}

.col-custom {
  flex: 0 0 var(--col-custom);
  max-width: var(--col-custom);
} 
```

* * *

**工作示例：**

```
.col-custom,
.col-sm-custom,
.col-md-custom,
.col-lg-custom,
.col-xl-custom {
  position: relative;
  width: 100%;
  padding-right: 15px;
  padding-left: 15px;
}

.col-custom {
  flex: 0 0 20%;
  max-width: 20%;
}

@media (min-width: 576px){
  .col-sm-custom {
    flex: 0 0 20%;
    max-width: 20%;
  }
}
@media (min-width: 768px){
  .col-md-custom {
    flex: 0 0 20%;
    max-width: 20%;
  }
}
@media (min-width: 992px){
  .col-lg-custom {
    flex: 0 0 20%;
    max-width: 20%;
  }
}
@media (min-width: 1200px){
  .col-xl-custom {
    flex: 0 0 20%;
    max-width: 20%;
  }
}

/*DEMO*/
.col-custom,.col-sm-custom,.col-md-custom,.col-lg-custom,.col-xl-custom{height:100px;border:1px red solid}
```

```
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

<div class="container-fluid">
  <div class="row">
    <div class="col-sm-custom"></div>
    <div class="col-sm-custom"></div>
    <div class="col-sm-custom"></div>
    <div class="col-sm-custom"></div>
    <div class="col-sm-custom"></div>
  </div>
</div>
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2015-07-08T09:10:36.397

在引导程序 3 中，我认为我们可以做类似的事情，以删除左右边距：

```
<div class="row this_row">
    <div class="col-md-2 col-md-offset-1"></div>
    <div class="col-md-2"></div>
    <div class="col-md-2"></div>
    <div class="col-md-2"></div>
    <div class="col-md-2"></div>
</div> 
```

和 CSS

```
.this_row {
    margin: 0 -5%;
} 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2015-09-17T09:50:24.653

如何在引导程序中添加 5 列网格

```
.col-lg-1-5,.col-md-1-5,.col-sm-1-5,.col-xs-1-5{min-height:1px;padding-left:15px;padding-right:15px;position:relative; width:100%;box-sizing:border-box;}
.item{width:100%;height:100px; background-color:#cfcfcf;}
.col-xs-1-5{width: 20%;float:left;} }

@media (min-width: 767px){ .col-sm-1-5{width: 20%;float:left;} }
@media (min-width: 992px){ .col-md-1-5{width: 20%;float:left;} }
@media (min-width: 1200px){ .col-lg-1-5{width: 20%;float:left;} }
```

```
<div class="row">
  <div class="col-sm-1-5">
    <div class="item">Item 1</div>
  </div>
  <div class="col-sm-1-5">
    <div class="item">Item 2</div>
  </div>
  <div class="col-sm-1-5">
    <div class="item">Item 3</div>
  </div>
  <div class="col-sm-1-5">
    <div class="item">Item 4</div>
  </div>
  <div class="col-sm-1-5">
    <div class="item">Item 5</div>
  </div>
</div>
```

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2016-03-02T06:53:40.580

无需编辑 CSS 的最简单的解决方案是：

```
<div class="row">
  <div class="btn-group btn-group-justified">
    <div class="btn-group">
      <div class="col-sm-12">Column 1</div>
    </div>
    <div class="btn-group">
      <div class="col-sm-12">Column 2</div>
    </div>
    <div class="btn-group">
      <div class="col-sm-12">Column 3</div>
    </div>
    <div class="btn-group">
      <div class="col-sm-12">Column 4</div>
    </div>
    <div class="btn-group">
      <div class="col-sm-12">Column 5</div>
    </div>
  </div>
</div> 
```

如果您需要这些突破任何断点，只需制作 btn-group 块。希望这可以帮助某人。

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2016-05-08T17:36:25.013

五列显然不是引导程序的设计部分。

但是使用 Bootstrap v4 (alpha)，有两件事可以帮助复杂的网格布局

1.  Flex（[http://v4-alpha.getbootstrap.com/getting-started/flexbox/](http://v4-alpha.getbootstrap.com/getting-started/flexbox/)），新元素类型（官方-https: [//www.w3.org/TR/css-flexbox-1/](https://www.w3.org/TR/css-flexbox-1/)）
2.  响应式实用程序（[http://v4-alpha.getbootstrap.com/layout/responsive-utilities/](http://v4-alpha.getbootstrap.com/layout/responsive-utilities/)）

简单来说，我正在使用

```
<style>
.flexc { display: flex; align-items: center; padding: 0; justify-content: center; }
.flexc a { display: block; flex: auto; text-align: center; flex-basis: 0; }
</style>
<div class="container flexc hidden-sm-down">
  <!-- content to show in MD and larger viewport -->
  <a href="#">Link/Col 1</a>
  <a href="#">Link/Col 2</a>
  <a href="#">Link/Col 3</a>
  <a href="#">Link/Col 4</a>
  <a href="#">Link/Col 5</a>
</div>
<div class="container hidden-md-up">
  <!-- content to show in SM and smaller viewport, I don't think 5 cols in smaller viewport are gonna be alright :) -->
</div> 
```

无论是 5、7、9、11、13 还是其他赔率，都可以。我很确定 12 格标准能够服务于超过 90% 的用例 - 所以让我们这样设计 - 开发也更容易！

很好的 flex 教程在这里“ [https://css-tricks.com/snippets/css/a-guide-to-flexbox/](https://css-tricks.com/snippets/css/a-guide-to-flexbox/) ”

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2016-06-06T13:09:56.430

我已经为任意数量的列创建了基于引导定义的 SASS 混合定义（个人在 12 之外，我使用 8、10 和 24）：

```
// Extended bootstrap grid system
//
// Framework grid generation
//
// Based on Bootstrap 'bootstrap/_grid-framework.scss'. Generates classes in form of `.col-(size)-x-num` of width x/num.

@mixin make-extended-grid-columns($num-columns, $i: 1, $list: ".col-xs-#{$i}-#{$num-columns}, .col-sm-#{$i}-#{$num-columns}, .col-md-#{$i}-#{$num-columns}, .col-lg-#{$i}-#{$num-columns}") {
    @for $i from (1 + 1) through $num-columns {
        $list: "#{$list}, .col-xs-#{$i}-#{$num-columns}, .col-sm-#{$i}-#{$num-columns}, .col-md-#{$i}-#{$num-columns}, .col-lg-#{$i}-#{$num-columns}";
    }
    #{$list} {
        position: relative;
        min-height: 1px;
        padding-left:  ($grid-gutter-width / 2);
        padding-right: ($grid-gutter-width / 2);
    }
}

@mixin float-extended-grid-columns($class, $num-columns, $i: 1, $list: ".col-#{$class}-#{$i}-#{$num-columns}") {
    @for $i from (1 + 1) through $num-columns {
        $list: "#{$list}, .col-#{$class}-#{$i}-#{$num-columns}";
    }
    #{$list} {
        float: left;
    }
}

@mixin calc-extended-grid-column($index, $num-columns, $class, $type) {
    @if ($type == width) and ($index > 0) {
        .col-#{$class}-#{$index}-#{$num-columns} {
            width: percentage(($index / $num-columns));
        }
    }
    @if ($type == push) and ($index > 0) {
        .col-#{$class}-push-#{$index}-#{$num-columns} {
            left: percentage(($index / $num-columns));
        }
    }
    @if ($type == pull) and ($index > 0) {
        .col-#{$class}-pull-#{$index}-#{$num-columns} {
            right: percentage(($index / $num-columns));
        }
    }
    @if ($type == offset) and ($index > 0) {
        .col-#{$class}-offset-#{$index}-#{$num-columns} {
            margin-left: percentage(($index / $num-columns));
        }
    }
}

@mixin loop-extended-grid-columns($num-columns, $class, $type) {
    @for $i from 1 through $num-columns - 1 {
        @include calc-extended-grid-column($i, $num-columns, $class, $type);
    }
}

@mixin make-extended-grid($class, $num-columns) {
    @include float-extended-grid-columns($class, $num-columns);
    @include loop-extended-grid-columns($num-columns, $class, width);
    @include loop-extended-grid-columns($num-columns, $class, pull);
    @include loop-extended-grid-columns($num-columns, $class, push);
    @include loop-extended-grid-columns($num-columns, $class, offset);
} 
```

您可以通过以下方式简单地创建类：

```
$possible-number-extended-grid-columns: 8, 10, 24;

@each $num-columns in $possible-number-extended-grid-columns {

  // Columns

  @include make-extended-grid-columns($num-columns);

  // Extra small grid

  @include make-extended-grid(xs, $num-columns);

  // Small grid

  @media (min-width: $screen-sm-min) {
    @include make-extended-grid(sm, $num-columns);
  }

  // Medium grid

  @media (min-width: $screen-md-min) {
    @include make-extended-grid(md, $num-columns);
  }

  // Large grid

  @media (min-width: $screen-lg-min) {
    @include make-extended-grid(lg, $num-columns);
  }

} 
```

我希望有人会觉得它有用

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2016-11-02T16:36:24.180

Bootstrap 或其他网格系统并不总是意味着更简单和更好。在您的 .container 或 .row （以保持您的响应式布局）内，您可以创建 5 个 div（使用类 .col fe）并像这样添加 css：
`.col { width: 20%; float: left };`

更新：现在最好使用 flexbox

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2018-06-09T08:56:00.900

是否有人使用 bootstrap-sass (v3)，这是使用 bootstrap 混合的 5 列的简单代码：

```
 .col-xs-5ths {
     @include make-xs-column(2.4);
  }

  @media (min-width: $screen-sm-min) {
     .col-sm-5ths {
        @include make-sm-column(2.4);
     }
  }

  @media (min-width: $screen-md-min) {
     .col-md-5ths {
        @include make-md-column(2.4);
     }
  }

  @media (min-width: $screen-lg-min) {
     .col-lg-5ths {
        @include make-lg-column(2.4);
     }
  } 
```

确保您已包括：

```
@import "bootstrap/variables";
@import "bootstrap/mixins"; 
```

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2021-11-09T17:16:48.903

## 对于 Bootstrap 5 或更高版本

您可以使用`row-cols-`类名。

例如：`row-cols-1`, `row-cols-5`,`row-cols-lg-5`

```
<div class="container">
  <div class="row row-cols-5">
     // place your all cols here
  </div>
</div> 
```

更多信息请阅读[官方文档](https://getbootstrap.com/docs/5.0/layout/grid/#row-columns)

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2014-12-22T09:38:20.227

```
.col-xs-2-4 {
  position: relative;
  float: left;
  width: 20%;
  min-height: 1px;
  padding-left: 15px;
  padding-right: 15px;
}
.col-sm-2-4 {
  position: relative;
  min-height: 1px;
  padding-left: 15px;
  padding-right: 15px;
}
@media (min-width: 768px) {
  .col-sm-2-4 {
    float: left;
    width: 20%;
  }
}
.col-md-2-4 {
  position: relative;
  min-height: 1px;
  padding-left: 15px;
  padding-right: 15px;
}
@media (min-width: 992px) {
  .col-md-2-4 {
    float: left;
    width: 20%;
  }
}
.col-lg-2-4 {
  position: relative;
  min-height: 1px;
  padding-left: 15px;
  padding-right: 15px;
}
@media (min-width: 1200px) {
  .col-lg-2-4 {
    float: left;
    width: 20%;
  }
}
```

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2015-01-21T13:45:01.937

对于 twitter bootstrap 3，这是实现此目的的最简单方法：

```
<section class="col col-sm-3" style="width: 20%;">
<section class="col col-sm-3" style="width: 20%;">
<section class="col col-sm-3" style="width: 20%;">
<section class="col col-sm-3" style="width: 20%;">
<section class="col col-sm-3" style="width: 20%;"> 
```

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2015-07-13T16:51:50.863

如果我们需要使用 LESS 迭代的 5 列网格，则对 @lightswitch 的回答进行即兴创作

```
.make-fifth-col(@index) when (@index > 0) {
  @class-name: ~".col-md-5th-@{index}";

  @{class-name} {
    .make-md-column(1.2*@index);
  }

  .make-fifth-col(@index - 1);
}

.make-fifth-col(10); 
```

`.col-md-5th-1, col-md-5th-2, col-md-5th-3,`这将生成分别对应于`10%`, `20%`, `30%`...的css 类等

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2015-09-18T06:24:53.890

引导网格系统分成 12 个网格。所以我把它分成两个网格 (7+5)。这 7 和 5 也包含完整的 12 个网格。这就是我分开 7(4+4+4) 和 5(6) 的原因+6) 所以它会占用所有内容，简单

HTML

```
<div class="col-sm-12">
  <div class="row">
    <div class="col-sm-7 five-three">
      <div class="row">
        <div class="col-sm-4">
          Column 1
        </div>
        <div class="col-sm-4">
          Column 2
        </div>
        <div class="col-sm-4">
          Column 3
        </div>
      </div>
    </div>
    <div class="col-sm-5 five-two">
      <div class="row">
        <div class="col-sm-6">
          Col 4
        </div>
        <div class="col-sm-6">
          Col 5
        </div>
      </div>
    </div>
  </div>
</div> 
```

CSS

```
div.col-sm-7.five-three {
  width: 60% !important;
}
div.col-sm-5.five-two {
  width: 40% !important;
} 
```

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2016-02-24T11:37:33.750

您可以使用这个小技巧使 col-md-2 与偏移解决方案全宽。它使用引导程序删除（隐藏）15px 填充的方式。

我的意思是添加“-”边距。实际上是 calc(-10% - 15px); 两边的边距。（10% 是偏移宽度，15px 是内边距）。

唯一的缺点是它会使页面水平滚动，因此您需要在行的父级上使用 overflow-x:hidden。

```
css:
.row-xs-5 {
    margin-left: calc(-10% - 15px);
    margin-right: calc(-10% - 15px);
}
@media (min-width: 768px) {
  .row-sm-5 {
    margin-left: calc(-10% - 15px);
    margin-right: calc(-10% - 15px);
  }
}
@media (min-width: 992px) {
  .row-md-5 {
    margin-left: calc(-10% - 15px);
    margin-right: calc(-10% - 15px);
  }
}
@media (min-width: 1200px) {
  .row-lg-5 {
    margin-left: calc(-10% - 15px);
    margin-right: calc(-10% - 15px);
  }
}

html:
<div style="overflow-x:hidden;">
  <div class="row row-md-5">
    <div class="col-xs-6 col-md-2 col-md-offset-1">col1</div>
    <div class="col-xs-6 col-md-2">col2</div>
    <div class="col-xs-6 col-md-2">col3</div>
    <div class="col-xs-6 col-md-2">col4</div>
    <div class="col-xs-6 col-md-2 text-right">col5</div>
  </div>
</div> 
```

这是演示：http: [//jsfiddle.net/sct3j/171/](http://jsfiddle.net/sct3j/171/)

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2018-09-06T12:27:29.483

```
.col-half-offset{
    margin-left:4.166666667% !important;
    float: left;
}

<div className="row1 marginTop20">
    <div className="col-xs-12 col-sm-2 col-md-2">
        1
    </div>
    <div className="col-xs-12 col-sm-2 col-md-2 col-half-offset">
        2
    </div>
    <div className="col-xs-12 col-sm-2 col-md-2 col-half-offset">
        3
    </div>
    <div className="col-xs-12 col-sm-2 col-md-2 col-half-offset">
        4
    </div>
    <div className="col-xs-12 col-sm-2 col-md-2 col-half-offset">
        5
    </div>
    <div className="clearfix"></div>
</div> 
```

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2018-09-26T17:29:46.197

我对这个问题的首选方法是使用基于 mixin 的现有 Bootstrap 变量创建一个 SASS [`make-grid-columns`](https://github.com/twbs/bootstrap/blob/v4.1.3/scss/mixins/_grid-framework.scss#L6)mixin。

```
// Custom Grid Columns
// 
// $name - determines the class names: eg. ".col-5ths, .col-sm-5ths ..."
// $size - determines the width (2.4 is one fifth of 12, the default number of columns)
@mixin custom-grid-columns($name, $size, $grid-columns: $grid-columns, $breakpoints: $grid-breakpoints) {
    $columns: round($grid-columns / $size);

    %custom-grid-column {
        @include make-col-ready();
    }

    @each $breakpoint in map-keys($breakpoints) {
        $infix: breakpoint-infix($breakpoint, $breakpoints);

        .col#{$infix}-#{$name} {
            @extend %custom-grid-column;
        }

        @include media-breakpoint-up($breakpoint, $breakpoints) {
            // Create column
            .col#{$infix}-#{$name} {
                @include make-col($size);
            }

            // Create offset
            @if not ($infix=="") {
                .offset#{$infix}-#{$name} {
                    @include make-col-offset($size);
                }
            }
        }
    }
} 
```

然后您可以调用 mixin 来生成自定义列和偏移量类。

```
@include custom-grid-columns('5ths', 2.4); 
```

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2019-03-03T13:01:43.243

在 bootstrap v4.3.1 中，它是 12 / 5 = 2.4 列宽的列。我们称它为 col-2dot4（和 col-sm-2dot4、col-md-2dot4、...）。

每列应该有 20% 的可用空间。

出来的 SCSS 代码如下：

```
@mixin make-5-grid-column($columns: $grid-columns, $gutter: $grid-gutter-width, $breakpoints: $grid-breakpoints) {

  // Common properties for all breakpoints
  %grid-column {
    position: relative;
    width: 100%;
    padding-right: $gutter / 2;
    padding-left: $gutter / 2;
  }

  @each $breakpoint in map-keys($breakpoints) {
    $infix: breakpoint-infix($breakpoint, $breakpoints);

    .col#{$infix}-2dot4 {
      @extend %grid-column;
    }

    .col#{$infix},
    .col#{$infix}-auto {
      @extend %grid-column;
    }

    @include media-breakpoint-up($breakpoint, $breakpoints) {

      // Provide basic `.col-{bp}` classes for equal-width flexbox columns
      .col#{$infix} {
        flex-basis: 0;
        flex-grow: 1;
        max-width: 100%;
      }

      .col#{$infix}-auto {
        flex: 0 0 auto;
        width: auto;
        max-width: 100%; // Reset earlier grid tiers
      }

      .col#{$infix}-2dot4 {
        @include make-col(1, 5);
      }
    }
  }
}

@if $enable-grid-classes {
  @include make-5-grid-column();
} 
```

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2020-03-02T21:49:53.780

boostrap 今天提供了使用内置类均匀填充一行的可能性，该类不告诉跨越十二列中有多少列：

你可以使用`col`/ `col-xx` ：

```
div div div {
  border: solid;
  margin: 2px;/* this can be added without breaking the row */
}
div div div:before {
content:attr(class);/* show class used */
color:crimson
```

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" />
<p>Class used , play snippet in full page to test behavior on resizing :</p>
<div class="container">
  <div class="row">
    <div class="col-sm"></div>
    <div class="col-sm"></div>
    <div class="col-sm"></div>
    <div class="col-sm"></div>
    <div class="col-sm"></div>
  </div>
  <div class="row">
    <div class="col-md"></div>
    <div class="col-md"></div>
    <div class="col-md"></div>
    <div class="col-md"></div>
    <div class="col-md"></div>
  </div>
  <div class="row">
    <div class="col"></div>
    <div class="col"></div>
    <div class="col"></div>
    <div class="col"></div>
    <div class="col"></div>
  </div>
</div>
```

flex-grow-x 也可以使用

```
div div div {
  border: solid;
  /* it allows margins too */
  margin: 3px;
}

div div div:before {
  content: attr(class);
  /* show class used */
  color: crimson
}
```

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" />

<div class="container">
  <div class="row">
    <div class="flex-grow-1"></div>
    <div class="flex-grow-1"></div>
    <div class="flex-grow-1"></div>
    <div class="flex-grow-1"></div>
    <div class="flex-grow-1"></div>
  </div>
</div>
```

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2021-10-20T09:59:18.597

如果使用引导程序 4 和 SASS（+引导程序变量），您可以使用这个简化的答案：

```
@each $breakpoint in map-keys($grid-breakpoints) {
  $infix: breakpoint-infix($breakpoint, $grid-breakpoints);

  .col#{$infix}-fifth {
    @extend %grid-column;
  }

  @include media-breakpoint-up($breakpoint, $grid-breakpoints) {
    .col#{$infix}-fifth {
      flex: 0 0 20%;
      max-width: 20%;
    }
  }
} 
```

还支持断点，您可以简单地添加新`.col#{$infix}-xxx`类

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2021-05-17T17:37:30.967

最简单的方法是添加`row-cols-5`到您的行中。**[在这里阅读更多](https://getbootstrap.com/docs/5.0/layout/grid/#row-columns)**

```
<div class="container">
  <div class="row row-cols-5">
    <div class="col">Col 1</div>
    <div class="col">Col 2</div>
    <div class="col">Col 3</div>
    <div class="col">Col 4</div>
    <div class="col">Col 5</div>
  </div>
</div> 
```

```
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container">
<div class="row row-cols-5">
  <div class="col border bg-primary">Col 1</div>
  <div class="col border bg-primary">Col 2</div>
  <div class="col border bg-primary">Col 3</div>
  <div class="col border bg-primary">Col 4</div>
  <div class="col border bg-primary">Col 5</div>
  <div class="col border bg-primary">Col 6</div>
  <div class="col border bg-primary">Col 7</div>
</div>
</div>
```

* * *

## 回答 #45

> 赞同：-3
> 
> 时间：2015-01-27T08:27:34.983

```
var cols = $(".container .item").length;
if (cols == 5){
    $('div.item').removeClass('col-md-2..etc').addClass('col-md-3').css('width', '20%');
 } 
```

Jquery 和完成！框架！

# python - 如何修改 FileField“浏览”按钮属性（字体、颜色、大小等）

> ID：10387744
> 
> 赞同：0
> 
> 时间：2012-04-30T17:15:38.910
> 
> 标签：python, django, django-forms

我想更改 FileField 的默认“浏览”按钮的大小、字体颜色和字体大小。以下代码不起作用：

```
class SubmitForm(forms.Form):
    uploadedfile = forms.FileField(required=True, label='File to upload:')

    def __init__(self, *args, **kwargs):
        super(SubmitForm, self).__init__(*args, **kwargs)
        self.fields['uploadedfile'].widget.attrs['style'] = 'width: 280px; size: 100px;' 
```

你对如何做到这一点有任何想法吗？提前致谢！

# java - 如何在 ANTLR 中迭代生产

> ID：10387745
> 
> 赞同：5
> 
> 时间：2012-04-30T17:15:39.953
> 
> 标签：java, parsing, antlr, rules, production

让我们假设以下具有 2 个 ANTLR 语法的场景：

1)

```
expr     : antExp+;
antExpr  : '{' T '}' ;
T        : 'foo'; 
```

2)

```
expr     : antExpr; 
antExpr  : '{' T* '}' ;
T        : 'bar'; 
```

在这两种情况下，我都需要知道如何迭代 antExp+ 和 T*，因为我需要为它们的每个元素生成一个 ArrayList。当然我的语法更复杂，但我认为这个例子应该解释我需要什么。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T17:25:03.527

ANTLR 中的生产规则可以有一个或多个返回类型，您可以在循环中引用它们（a`(...)*`或`(...)+`）。因此，假设您要打印规则匹配的每个`T`'s 文本。`antExp`这可以这样做：

```
expr
 : (antExp {System.out.println($antExp.str);} )+
 ;

antExpr returns [String str]
 : '{' T '}' {$str = $T.text;}
 ;

T : 'foo'; 
```

相同的原则适用于例如语法 #2：

```
expr     : antExpr; 
antExpr  : '{' (T {System.out.println($T.text);} )* '}' ;
T        : 'bar'; 
```

### 编辑

请注意，您不限于返回单个引用。运行从以下位置生成的解析器：

```
grammar T;  

parse
 : ids {System.out.println($ids.firstId + "\n" + $ids.allIds);}
 ;

ids returns [String firstId, List<String> allIds]
@init{$allIds = new ArrayList<String>();}
@after{$firstId = $allIds.get(0);}
 : (ID {$allIds.add($ID.text);})+
 ;

ID    : ('a'..'z' | 'A'..'Z')+;
SPACE : ' ' {skip();}; 
```

在输入`"aaa bbb ccc"`上将打印以下内容：

```
aaa
[aaa, bbb, ccc] 
```

# c++ - 为引用成员变量提供默认值

> ID：10387751
> 
> 赞同：0
> 
> 时间：2012-04-30T17:16:04.023
> 
> 标签：c++, class, reference, constructor, object-lifetime

所以我在 C++ 中创建了一个类，它有 2 个引用类型成员：

```
class Edge{
private:
const Node& base;
const Node& target;

public:
    Edge(const Node& new1, const Node& new2); 
```

我想为 C'tor 中的 base 和 target 提供默认值。意思就是：

```
Edge() 
```

不会出错，但会创建一个 Edge 对象。我怎么做？

编辑：我也在尝试做：

```
Edge::Edge(const Node& newBase, const Node& newTarg)
{
    m_base=newBase;
    m_target=newTarg;
} 
```

但它不会让我，它说没有运算符“=”与此运算符匹配。但我确实为节点创建了一个“=”运算符并检查它是否有效......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T17:23:09.247

您可以像任何其他参数一样给出`new1`和默认值。`new2`诀窍在于，由于它们是通过引用传递的，并且（可能）您正在使用它们进行设置`base`，并且`target`它们需要足够长的时间才能使这有意义。您可以通过将静态“虚拟”`Node`设置为未指定的默认值来做到这一点，例如：

```
class Node {};

class Edge{
private:
static const Node none;
const Node& base;
const Node& target;

public:
    Edge(const Node& new1=none, const Node& new2=none) : base(new1), target(new2) {}
};

const Node Edge::none;

int main() {
  Edge e;
} 
```

不过，这是否是好的设计是另一个问题。对于您要解决的潜在问题，很可能有一个更聪明的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:23:52.137

这是一个也适用于非常量引用的版本：

```
struct Bar { /* ... */ }:

struct Foo
{
    Foo(Bar & br) : b(br)          { }
    Foo()         : b(default_bar) { }
private:
    static Bar default_bar;
    Bar & b;
};
Bar Foo::default_bar; 
```

这样，所有默认构造的`Foo`实例都包含对公共静态`default_bar`对象的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-14T13:41:52.903

另一种解决方案是使用可复制的包装器

```
struct Reference
    {
    T* r_noncopyable_object;
    }; 
```

# wcf - 从 WCF 服务返回对象时出现反序列化错误

> ID：10387753
> 
> 赞同：1
> 
> 时间：2012-04-30T17:16:07.993
> 
> 标签：wcf

在返回 Activity 对象数组时，我得到下面显示的错误。无法理解哪里出了问题。任何人都可以帮我解决这个问题。

这是错误

> 预期来自命名空间“http://schemas.datacontract.org/2004/07/BusinessEntities”的结束元素“ActivityTypeId”。从命名空间“http://schemas.datacontract.org/2004/07/BusinessEntities”中找到元素“a:Code”。第 1 行，位置 450。

UI相关代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        TimeSheetManagementServiceClient serviceClient = new TimeSheetManagementServiceClient("WSHttpBinding_ITimeSheetManagementService");
        Activity[] activities=serviceClient.GetActivities();
        GridView1.DataSource = activities;
        GridView1.DataBind();

    } 
```

WCF服务代码

```
 public class TimeSheetManagementService:ITimeSheetManagementService 
    {
        public BusinessEntities.Activity[] GetActivities()
        {
            TimeSheetManagementDataController controller= new TimeSheetManagementDataController();
            var activities = controller.GetActivities().Select(activity => new BusinessEntities.Activity()
                                                                               {
                                                                                   Code = activity.Code,
                                                                                   Description = activity.Description,
                                                                                   Status =
                                                                                       (EntityStatus)
                                                                                       Enum.Parse(typeof(EntityStatus), ((activity.Status==true) ? 0 : 1).ToString()),
                                                                                   ActivityTypeId = new BusinessEntities.ActivityType()
                                                                                                        {
                                                                                                          Code=activity.ActivityType.Code,
                                                                                                          Description = activity.ActivityType.Description,
                                                                                                          Name = activity.ActivityType.Name
                                                                                                        }

                                                                               });
            return activities.ToArray();
        }

    } 
```

服务合同

```
 [ServiceContract]
    interface ITimeSheetManagementService
    {
        [OperationContract]
        Activity[] GetActivities();
    } 
```

数据合约

```
[DataContract]
public class Activity
{
    [DataMember]
    public string Code { get; set; }
    [DataMember]
    public string Description { get; set; }
    [DataMember]
    public EntityStatus Status { get; set; }
    [DataMember]
    public ActivityType  ActivityTypeId { get; set; }
}
[DataContract]
public enum EntityStatus
{
    [EnumMember]
    Active=0,
    [EnumMember]
    Inactive=1
}

[DataContract]
public class ActivityType
{
    [DataMember]
    public string Code { get; set; }
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string Description { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:20:09.790

我不确定，但我认为问题在于 Activity 类的数据成员的字母顺序。只是为了测试，考虑在 Datamember 属性中指定 order 属性。 [http://msdn.microsoft.com/en-us/library/ms729813%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms729813%28v=vs.90%29.aspx)

希望这会有所帮助

# c++ - boost::flyweight 是否进行引用计数？

> ID：10387754
> 
> 赞同：2
> 
> 时间：2012-04-30T17:16:16.160
> 
> 标签：c++, boost, flyweight-pattern, boost-flyweight

我一直在阅读文档，[`boost::flyweight`](http://www.boost.org/doc/libs/1_41_0/libs/flyweight/doc/index.html)但我没有看到任何提及释放或引用计数策略的内容。基本上，享元对象的行为应该类似于不同值的存储库，但不清楚不再使用不同值时会发生什么。

是否已经支持？可以通过一些自定义工厂启用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T17:20:02.650

与享元中的大多数事情一样，这种行为是由策略决定的，特别是由[Tracking Policy](http://www.boost.org/libs/flyweight/doc/reference/tracking.html#tracking)决定。[默认跟踪](http://www.boost.org/libs/flyweight/doc/reference/flyweight.html#instantiation_types)`refcounted`策略是：

> 跟踪策略提供具有引用计数语义的享元实例：当与给定值关联的所有享元对象都被销毁时，相应的条目将从享元的内部工厂中删除。

# ruby-on-rails - 接受 mongoid 的嵌套属性约定

> ID：10387755
> 
> 赞同：3
> 
> 时间：2012-04-30T17:16:20.437
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在尝试使用 mongoid 创建具有嵌套属性的表单。我的模型有以下代码：

```
def Company
  field :name

  has_many :users, autosave: true, dependent: :destroy
  accepts_nested_attributes_for :users
end

def User
  belongs_to :company
  has_one :profile
end

def Profile
  belongs_to :user
end 
```

从表单返回的参数按以下顺序排列：

```
"company"=>
  {"users_attributes"=>
    {"0"=>
      {"profile_attributes"=>
        {"first_name"=>"123123abcd123", "last_name"=>"abcd123123123"},
       "email"=>"abcd@abcd.com123123123",
       "password"=>"123123123123",
       "password_confirmation"=>"123123123123"}},
   "name"=>"abcd123123123",
   "subdomain"=>"abcd123123123"} 
```

调用 Company.create(params[:company]) 似乎有效，但它没有正确创建用户对象。当我执行 company.users 时，我可以看到该对象，但是当我执行 User.find 时，该文档不可用。阅读文档后，我意识到应该通过以下方式传递参数：

```
"company"=>
  {"users_attributes"=>
    [{"profile_attributes"=>
       {"first_name"=>"123123123", "last_name"=>"123123123"},
      "email"=>"testin321@gmail.com",
      "password"=>"123123",
      "password_confirmation"=>"123123"}],
   "name"=>"abcd123123123",
   "subdomain"=>"abcd123123123"} 
```

请注意将数组用于 users_attributes 而不是散列的细微差别。这很好用，但它似乎不像 Active Record 那样开箱即用（以及它应该如何在 Rails 中使用）。我不想获取参数哈希并修改数据以使其遵循某些约定。有没有更好的方法，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:37:00.583

您可以发布表单的代码吗？然后我们可以深入了解它以某种方式格式化的原因。（这应该是一个评论，但一旦有关于这个问题的更多细节，我会提供一个答案。）

关于视图中表单的问题的旁注。我注意到您正在尝试创建一家公司，它是嵌套的用户和用户，它也是嵌套的配置文件属性。如果您希望用户接受配置文件的嵌套属性，则需要将其放入用户模型中。

```
def User
  belongs_to :company
  has_one :profile, dependent: destroy, autosave: true
  accepts_nested_attributes_for :profile
end 
```

这可能会解决您的问题，该错误可能是由于用户试图在没有明确说明的情况下批量分配配置文件属性而引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:33:54.907

如果你可以命名`inputs as user_attributes[]`那将组成数组。

所以而不是`user_attributes[0][profile_attributes]`（我认为你有这样的东西）

让它拥有`user_attributes[][profile_attributes]`

# javascript - 复选框值根据选择添加或删除到文本区域

> ID：10387761
> 
> 赞同：0
> 
> 时间：2012-04-30T17:17:05.553
> 
> 标签：javascript, html

如何根据用户对上面复选框的选择将复选框“变量值”添加到我的文本区域。我需要它来添加或删除，下拉菜单工作正常只需要复选框的帮助似乎无法让它们工作。

这是我到目前为止的代码：

```
<html>
<head>

</head>

<body>

  Image 1 <input type="checkbox" name="ImageVar1" id="ImageVar1" /><br />
  Image 2 <input type="checkbox" name="ImageVar2" id="ImageVar2" /><br />
  Image 3 <input type="checkbox" name="ImageVar3" id="ImageVar3" /><br />
  Image 4 <input type="checkbox" name="ImageVar4" id="ImageVar4" />

<p>&nbsp;</p>

  <select id="dropdown">
    <option value="">None</option>
    <option value="textVar1">text 1</option>
    <option value="textVar2">text 2</option>
    <option value="textVar3">text 3</option>
    <option value="textVar4">text 4</option>
  </select>

<p>&nbsp;</p>

  <textarea id="mytext"></textarea>

<script type="text/javascript">

var textVar1 = 'this is going to be a long sting of text for text 1 value ';
var textVar2 = 'this is going to be a long sting of text for text 2 value ';
var textVar3 = 'this is going to be a long sting of text for text 3 value ';
var textVar4 = 'this is going to be a long sting of text for text 4 value ';

var ImageVar1 = 'Image 1 value ';
var ImageVar2 = 'Image 2 value ';
var ImageVar3 = 'Image 3 value ';
var ImageVar4 = 'Image 4 value ';

var mytextbox = document.getElementById('mytext');
var mydropdown = document.getElementById('dropdown');

mydropdown.onchange = function(){
mytextbox.value = mytextbox.value  + window[this.value];

}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:01:54.487

这是一种无框架（无 jQuery/原型）的方法。

示例：http: [//jsfiddle.net/S5vcW/6/](http://jsfiddle.net/S5vcW/6/)

虽然一些浏览器支持`document.querySelectorAll("input[type='checkbox']")`这将使脚本更简单，更高效。

```
var inputs = document.getElementsByTagName("input");
for(var i = 0; i < inputs.length; i++) {
    if(inputs[i].type === "checkbox" && inputs[i].name.indexOf('ImageVar') > -1) {
        inputs[i].onchange = function(){
            if(this.checked){
                mytextbox.value = mytextbox.value  + ImageVars[this.name];
            }else{
                mytextbox.value = mytextbox.value.replace(ImageVars[this.name], ""); 
            }
        }
    }  
} 
```

这是一个完成同样事情的 jQuery 版本。

示例：http: [//jsfiddle.net/S5vcW/5/](http://jsfiddle.net/S5vcW/5/)

```
$("input[type='checkbox'][name*='ImageVar']").change(function(){
    var $chk = $(this); 
    if($chk.prop('checked')){
        $mytextbox.val($mytextbox.val() + ImageVars[$chk.attr('name')]);
    }else{
        $mytextbox.val($mytextbox.val().replace(ImageVars[$chk.attr('name')], "")); 
    }
}); 
```

# c# - 在 C# 中处理大文件

> ID：10387772
> 
> 赞同：7
> 
> 时间：2012-04-30T17:17:45.023
> 
> 标签：c#, byte, large-files, replace

我有一个 4Gb 文件，我想在其上执行基于字节的查找和替换。我已经编写了一个简单的程序来执行此操作，但是仅进行一次查找和替换需要很长时间（90 分钟以上）。我尝试过的一些十六进制编辑器可以在 3 分钟内完成任务，并且不会将整个目标文件加载到内存中。有谁知道我可以完成同样事情的方法？这是我当前的代码：

```
 public int ReplaceBytes(string File, byte[] Find, byte[] Replace)
    {
        var Stream = new FileStream(File, FileMode.Open, FileAccess.ReadWrite);
        int FindPoint = 0;
        int Results = 0;
        for (long i = 0; i < Stream.Length; i++)
        {
            if (Find[FindPoint] == Stream.ReadByte())
            {
                FindPoint++;
                if (FindPoint > Find.Length - 1)
                {
                    Results++;
                    FindPoint = 0;
                    Stream.Seek(-Find.Length, SeekOrigin.Current);
                    Stream.Write(Replace, 0, Replace.Length);
                }
            }
            else
            {
                FindPoint = 0;
            }
        }
        Stream.Close();
        return Results;
    } 
```

顺便说一下，与 4Gb“文件”相比，查找和替换相对较小。我可以很容易地看出为什么我的算法很慢，但我不确定如何才能做得更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:21:01.090

部分问题可能是您一次读取一个字节的流。尝试阅读更大的块并对其进行替换。我会从大约 8kb 开始，然后用一些更大或更小的块进行测试，看看什么能给你最好的性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T17:24:46.693

有很多更好的算法可以在字符串中查找子字符串（这基本上就是您正在做的事情）

从这里开始：

[http://en.wikipedia.org/wiki/String_searching_algorithm](http://en.wikipedia.org/wiki/String_searching_algorithm)

它们的要点是您可以通过分析子字符串来跳过很多字节。这是一个简单的例子

> 4GB 文件开头为：ABCDEFGHIJKLMNOP
> 
> 您的子字符串是：NOP

1.  您跳过 substring-1 的长度并检查最后一个字节，因此将 C 与 P 进行比较
2.  它不匹配，所以子字符串不是前 3 个字节
3.  此外，C 根本不在子字符串中，因此您可以再跳过 3 个字节（子字符串的 len）
4.  比较 F 和 P，不匹配，F 不在子串中，跳过 3
5.  比较 I 和 P 等

如果匹配，请向后退。如果字符不匹配，但在子字符串中，那么您必须在此时进行更多比较（阅读链接了解详细信息）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T17:23:00.877

而不是逐字节读取文件，而是通过缓冲区读取文件：

```
buffer = new byte[bufferSize];            
currentPos = 0;
length = (int)Stream .Length;
while ((count = Stream.Read(buffer, currentPos, bufferSize)) > 0)
{
   currentPos += count;
   ....
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T17:26:34.613

您应该尝试使用[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)。C# 从 4.0 版开始支持它们。

> 内存映射文件包含虚拟内存中文件的内容。
> 
> 持久文件是与磁盘上的源文件相关联的内存映射文件。当最后一个进程完成对文件的处理后，数据将保存到磁盘上的源文件中。**这些内存映射文件适用于处理非常大的源文件。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T17:24:21.993

一次读取多个字节的另一种更简单的方法：

```
var Stream = new BufferedStream(new FileStream(File, FileMode.Open, FileAccess.ReadWrite)); 
```

将此与 Saeed Amiri 的如何读入缓冲区的示例相结合，更好的二进制查找/替换算法之一应该会给您更好的结果。

# android - 检测应用程序何时关闭

> ID：10387774
> 
> 赞同：12
> 
> 时间：2012-04-30T17:17:47.690
> 
> 标签：android, android-activity, detect

我想知道应用程序何时关闭，因为我需要在用户关闭应用程序时擦除数据库，就在用户关闭应用程序的那一刻是擦除 SQLite 数据库的正确时机，我该如何检测到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-30T17:58:20.967

这是一个有缺陷的设计理念，它反映了对系统的误解——当整个进程死亡时，它就死了，这意味着你的代码不再运行。

出于礼貌，您可以进行一些跟踪并让最后一个 onDestory() 的活动进行清理，但不要假设它总是会实际发生（并不*总是*调用该方法）。如果有一个过时的副本是一个问题，请在下次运行时清理它。

也就是说，您可以尝试使用 ndk 为进程终止信号提供处理程序，但我仍然不能指望它在所有情况下都能正常工作。除非您已经熟悉所涉及的概念，否则从中获得任何健全功能的有限潜力可能无法证明努力的合理性。

并且不要为安全机制清理一分钟错误，因为该文件在您的应用程序运行时就在那里，并且如果您的应用程序以意外方式终止，它将保留。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-30T17:57:17.997

假设您不是`finish()`主要活动，那么在该活动的方法中清除数据库`onDestroy()`可能是您想要完成的最接近的事情。正如评论中所指出的，请参阅[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)。

# java - 在 Tomcat 上安装游戏。新手在这里

> ID：10387780
> 
> 赞同：2
> 
> 时间：2012-04-30T17:18:36.067
> 
> 标签：java, jsp, tomcat

这可能是一项艰巨的任务，也可能非常简单。我想在我的网站上运行这个游戏：[https ://github.com/ajanata/PretendYoureXyzzy](https://github.com/ajanata/PretendYoureXyzzy)

不幸的是，我不知道如何做这样的事情。似乎没有安装文件，所以我只能想象这对于熟悉这类事情的人来说是非常明显的。我最近订购了一个共享 Tomcat 服务器的试用版，因为我假设它是运行所有 Java 好东西所必需的。

如果我应该遵循任何简单的说明来安装它，如果您能分享它们，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:50:01.590

您需要从您提供的 Github[链接](https://github.com/ajanata/PretendYoureXyzzy/zipball/master)下载源代码，然后下载[Eclipse-Java EE](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr2)。然后打开 Eclipse 并选择`File->Import->General->Existing Projects Into Workspace`刚刚下载的文件夹。然后，您可以选择`Export->Web->WAR file`并导出 WAR 文件。

[然后按照此处](http://www3.ntu.edu.sg/home/ehchua/programming/howto/tomcat_howto.html)所述下载并设置 Tomcat （在 Tomcat 运行后忽略部分，您可以在此处访问它）并按照[此处](https://stackoverflow.com/questions/5109112/how-to-deploy-war-in-tomcat-7)`http://localhost:8080`所述安装 WAR 。

如果你觉得特别懒惰，我在[这里](http://www.filefactory.com/file/757z0w9w2ubv/n/cah_war)建立了战争。您只需将其放入`webapps`Tomcat 安装的文件夹中，然后重新启动服务器。然后，您可以在以下位置访问它：

`http://localhost:8080/cah`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:32:15.993

如果不深入研究项目很难说，如果他们以某种方式创建了 .war 文件，只需将 .war 文件复制到 [tomcat home]/webapps 目录，您的应用程序就会被部署。然后，您可以在 yourmachine:8080/warname 访问它，其中warname == 没有.war 扩展名的war 文件的名称。

该项目似乎也有一个 SQL 脚本，不确定是否有一些您可能需要设置的数据库，这可能会变得棘手。

# android - Android 警告消息：尝试检索无效或处于循环中的包

> ID：10387787
> 
> 赞同：6
> 
> 时间：2012-04-30T17:19:08.800
> 
> 标签：android

我在 LogCat 中看到警告消息说：

ResourceType：尝试检索无效或处于循环中的包 0x7f080015。

警告信息重复 50 多次，这真的很烦人。这是什么意思？我如何让它消失？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T15:49:33.783

原因是该项目在“values-fr”下定义了一个样式，但在默认值文件夹下没有对应的样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-17T22:26:53.100

我收到该消息是因为我使用以下方法覆盖不同 API 级别的样式：

```
<style name="ToolBar" parent="ToolBar.Base"/>

<style name="ToolBar.Base">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">?actionBarSize</item>
    <item name="android:background">@color/primary</item>
</style> 
```

然后添加

```
<style name="ToolBar" parent="ToolBar.Base">
    <item name="android:elevation">4dp</item>
</style> 
```

在我的 v21/styles 文件中。这是导致问题的 ToolBar 和 Base 之间的时间段。用下划线或没有句点的其他名称替换它，你应该没问题。有关原因的更多信息，请阅读 Android 对[Style 和 Theme Inheritance](http://developer.android.com/guide/topics/ui/themes.html#Inheritance)的评价。

不管怎样，我改成`ToolBar.Base`了`ToolBar_Base`，没有更多的错误信息。

# java - 从 Visual FoxPro 调用 JBoss Web 服务时出现“找不到子元素”错误

> ID：10387788
> 
> 赞同：0
> 
> 时间：2012-04-30T17:19:11.970
> 
> 标签：java, web-services, jboss, seam, visual-foxpro

我有这个问题。我使用 Seam 框架创建了一个在 JBoss 5 之上运行的 Web 服务。Web 服务有一个称为“登录”的方法。当我从 Java 客户端使用服务时，它工作正常，但是当我尝试从 Visual FoxPro 客户端（我真正需要）使用时，我收到一条错误消息：

```
Error 1429 - OLE IDispatch exception code 0 from ?: Cannot find child element: username 
```

来自 JBoss 的错误堆栈跟踪：

```
12:02:32,396 ERROR [SOAPFaultHelperJAXWS] SOAP request exception
org.jboss.ws.WSException: Cannot find child element: username
    at org.jboss.ws.core.CommonSOAPBinding.getParameterFromMessage(CommonSOAPBinding.java:917)
    at org.jboss.ws.core.CommonSOAPBinding.unbindRequestMessage(CommonSOAPBinding.java:361)
    at org.jboss.ws.core.server.ServiceEndpointInvoker.invoke(ServiceEndpointInvoker.java:197)
    at org.jboss.wsf.stack.jbws.RequestHandlerImpl.processRequest(RequestHandlerImpl.java:474)
    at org.jboss.wsf.stack.jbws.RequestHandlerImpl.handleRequest(RequestHandlerImpl.java:295)
    at org.jboss.wsf.stack.jbws.RequestHandlerImpl.doPost(RequestHandlerImpl.java:205)
    at org.jboss.wsf.stack.jbws.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:131)
    at org.jboss.wsf.common.servlet.AbstractEndpointServlet.service(AbstractEndpointServlet.java:85)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Unknown Source) 
```

我的网络服务类：

```
@Name("ServiceName")
@WebService(name = "ServiceName", serviceName = "ServiceName")
@SOAPBinding(style = SOAPBinding.Style.RPC)
@Stateless
public class ServiceName implements ServiceNameRemote {
    @WebMethod
    @Override
    public boolean login(@WebParam(name = "username") String username, @WebParam(name = "password") String password) {
        // logic..
        return result;
    }   
} 
```

WSDL 来自`localhost:8080/app-app/ServiceName?wsdl`

```
<definitions name="ServiceName"
targetNamespace="http://service.namespace/"
xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
xmlns:tns="http://service.namespace/"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<types />
<message name="ServiceName_login">
    <part name="username" type="xsd:string" />
    <part name="password" type="xsd:string" />
</message>
<portType name="ServiceName">
    <operation name="login" parameterOrder="username password">
        <input message="tns:ServiceName_login" />
        <output message="tns:ServiceName_loginResponse" />
    </operation>
</portType>
<binding name="ServiceNameBinding" type="tns:ServiceName">
    <soap:binding style="rpc"
        transport="http://schemas.xmlsoap.org/soap/http" />
    <operation name="login">
        <soap:operation soapAction="" />
        <input>
            <soap:body namespace="http://service.namespace/"
                use="literal" />
        </input>
        <output>
            <soap:body namespace="http://service.namespace/"
                use="literal" />
        </output>
    </operation>
</binding>
<service name="ServiceName">
    <port binding="tns:ServiceNameBinding" name="ServiceNamePort">
        <soap:address
            location="http://localhost:8080/app-app/ServiceName" />
    </port>
</service>
</definitions> 
```

客户端代码（使用 MS Soap Toolkit 3.0）：

```
LOCAL loServiceNamePort AS "XML Web Service"
* LOCAL loServiceNamePort AS "MSSOAP.SoapClient30"
* Do not remove or alter following line. It is used to support IntelliSense for your XML Web service.
*__VFPWSDef__: loServiceNamePort = http://localhost:8080/app-app/ServiceName?wsdl , ServiceName , ServiceNamePort
LOCAL loException, lcErrorMsg, loWSHandler
TRY
    loWSHandler = NEWOBJECT("WSHandler",IIF(VERSION(2)=0,"",HOME()+"FFC\")+"_ws3client.vcx")
    loServiceNamePort = loWSHandler.SetupClient("http://localhost:8080/app-app/ServiceName?wsdl", "ServiceName", "ServiceNamePort")
    * Call your XML Web service here.  ex: leResult = loServiceNamePort.SomeMethod()
    MESSAGEBOX(loServiceNamePort.login("username", "password"))
CATCH TO loException
    lcErrorMsg = "Error: "+TRANSFORM(loException.Errorno)+" - "+loException.Message
    DO CASE
    CASE VARTYPE(loServiceNamePort)#"O"
        * Handle SOAP error connecting to web service
        WAIT WINDOW "Error connecting to web service" NOWAIT
    CASE !EMPTY(loServiceNamePort.FaultCode)
        * Handle SOAP error calling method
        lcErrorMsg = lcErrorMsg + CHR(13) + loServiceNamePort.Detail
        WAIT WINDOW "SOAP error calling method" NOWAIT
    OTHERWISE
        * Handle other error
    ENDCASE
    * Use for debugging purposes
    MESSAGEBOX(lcErrorMsg)
FINALLY
ENDTRY 
```

客户端代码（使用 PocketSOAP）：

```
LOCAL loException, lcErrorMsg, loFactory, loProxy
TRY
    loFactory = createObject("pocketsoap.Factory")
    loProxy = loFactory.CreateProxy("http://localhost:8080/app-app/ServiceName?wsdl", "http://service.namespace/")
    MESSAGEBOX(loProxy.login("username", "password"))
CATCH TO loException
    lcErrorMsg = "Error: "+TRANSFORM(loException.Errorno)+" - "+loException.Message
    DO CASE
    CASE VARTYPE(loServiceNamePort)#"O"
        * Handle SOAP error connecting to web service
        WAIT WINDOW "Error connecting to web service" NOWAIT
    CASE !EMPTY(loServiceNamePort.FaultCode)
        * Handle SOAP error calling method
        lcErrorMsg = lcErrorMsg + CHR(13) + loServiceNamePort.Detail
        WAIT WINDOW "SOAP error calling method" NOWAIT
    OTHERWISE
        * Handle other error
    ENDCASE
    * Use for debugging purposes
    MESSAGEBOX(lcErrorMsg)  
FINALLY
ENDTRY 
```

我一直在寻找关于为什么会发生这种情况的解释，但没有找到。我尝试了在谷歌搜索时发现的几件事：我将具有相应值的命名空间属性添加到 @WebParam 注释中，添加了带有名称和命名空间的 @WebResult 注释，将 SOAP 绑定从 RPC 更改为 Document，但都无济于事。非常感谢您在这里给我的任何帮助。

**编辑**：我们放弃了 SOAP 服务，现在使用 REST 服务，我们发现它更容易从 Visual Fox 中使用，不需要任何桥接应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:34:53.593

没关系。通过 ASP.NET WS 转发 Java WS，并让 VFP 客户端使用它。有用。

# c# - 优化 SQL/NHibernate 查询

> ID：10387790
> 
> 赞同：1
> 
> 时间：2012-04-30T17:19:26.880
> 
> 标签：c#, sql, sql-server, nhibernate

我有一个表 ReadNews 如下：

```
id: int
User_id: int
News_id : int
DateRead : Datetime
FacebookUser_id: int 
```

这存储在一个表中。

我通过对 fb 的休息调用和存储`IEnumerable<string>`在内存中来获取我的朋友 ID 列表。

我需要查找我的朋友`(IEnumerable<string>)`阅读的按日期时间降序排列的最新消息。我正在使用 NHibernate。

构建此查询的最有效方法是什么？

本质上，我拥有 fb 用户阅读的所有新闻，但我只想获得朋友阅读的新闻。

我正在考虑这样做：

```
select * from readnews where FacebookUser_id in (IEnumerable<string>); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:29:57.383

原则上，如果你都被适当地索引了，那么使用 IN(x,y,z) 是相当高效的，linq/nh 应该对你很好。试试 nhibernate rino 来确定。

[http://nhprof.com/](http://nhprof.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:25:49.543

您是否发现任何性能问题？FacebookUser_id 上的 top n + index 应该可以。

这完全取决于您拥有的数据量等。问问自己是否没有发现任何问题，您是否正在尝试过早优化？

# php - Wordpress 不显示我的两个帖子的永久链接

> ID：10387791
> 
> 赞同：0
> 
> 时间：2012-04-30T17:19:41.183
> 
> 标签：php, jquery, wordpress

这是我的网页：[http](http://dastousgroupeconseil.com/faq-2/)
://dastousgroupeconseil.com/faq-2/ 这是我的网页的完整代码：http: [//pastebin.com/PQUsYdha](http://pastebin.com/PQUsYdha)

我使用这个 php 代码来显示我的帖子的摘录和超链接，但其中一些不想显示。是因为我在每个 endforeach 之后重置了 $post 变量吗？

`<?php global $post;`

> `$args = array( 'numberposts' => 4, 'offset'=> 0, 'category' => 140 );`
> `$myposts = get_posts( $args );`
> `foreach( $myposts as $post) : setup_postdata($post); ?>`
> 
> `<a href="<?php the_permalink(); ?>" target='_blank' ><?php the_excerpt(); ?></a>` `<?php endforeach; wp_reset_postdata(); ?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:51:36.357

我自己在使用 setup_postdata 时遇到过几次问题，我倾向于完全跳过它，只使用检索到的 $post 对象。

所以对于永久链接：

`<?php echo get_permalink($post->ID); ?>`

# jquery - 隐藏过滤器输入框而不是禁用+ tablesorter 2

> ID：10387792
> 
> 赞同：2
> 
> 时间：2012-04-30T17:19:49.007
> 
> 标签：jquery, tablesorter

我需要一点帮助。我正在使用 JQuery TableSorter 2 (http://mottie.github.com/tablesorter/) 的一个分支来工作和过滤我的表。如果我不想将某些列用作过滤器，我只需将“filter-false”作为一个类添加到选定的列标题。

我的主要问题是是否有一种方法可以真正隐藏选定列上的过滤器框，而不仅仅是禁用它们...

谢谢

伊曼纽尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T15:28:02.690

这是默认的CSS：

```
/* optional disabled input styling */ 
table.tablesorter thead tr.tablesorter-filter-row input.disabled { 
    opacity: 0.5; 
    filter: alpha(opacity=50); 
} 
```

正如所见，一个`disabled`类应用于那些禁用的过滤器，因此您可以使用 css 来应用`display:none`或应用`visibility:hidden`它：

```
tr.tablesorter-filter-row input.disabled {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:55:09.370

我建议简单地坚持：

```
/* optional disabled input styling */ 
table.tablesorter thead tr.tablesorter-filter-row input.disabled { 
   opacity: 0.0; 
    filter: alpha(opacity=0); 
} 
```

由于隐藏了那个，还删除了表格的内边框，从而产生了令人不快的视觉效果。

# java - 使用 Eclipse 在 Android 虚拟机中启动 Android java 项目时出现问题

> ID：10387793
> 
> 赞同：0
> 
> 时间：2012-04-30T17:19:49.350
> 
> 标签：java, android, eclipse, virtual-machine

我已经安装并设置了 Eclipse 和插件 ADT，以便使用 Android SDK。到目前为止，一切都很好。但是，当我尝试为我选择的任何 android 平台（例如：android 3.2）启动 VM（虚拟机）时，我只是将皮肤与键盘控制台和电话按钮一起启动，它似乎启动到一个状态并且然后什么都不做，只是在 vm 主屏幕上显示 android 徽标，仅此而已 - 没有更多！，没有 VM 功能！，这是怎么回事？我错过了一些步骤吗？请帮忙...

在每种情况下，有时要等待超过 10 分钟才能启动模拟器。

我启动/运行了一个 Android 项目测试样本；安装适用于 Android 的 ADT 插件后，来自 Eclipse 环境的“hello world”这些是我在控制台 ddms 中显示的错误消息：

> [2012-04-30 14:31:20-HelloAndroid]
> 
> [2012-04-30 14:31:20 - HelloAndroid] Android 发布！
> 
> [2012-04-30 14:31:20 - HelloAndroid] adb 运行正常。
> 
> [2012-04-30 14:31:20 - HelloAndroid] 执行 com.example.helloandroid.HelloAndroidActivity 活动启动
> 
> [2012-04-30 14:31:20 - HelloAndroid] 自动目标模式：启动具有兼容 AVD 'leighs_basic_hardware_secound_virtual_device' 的新模拟器
> 
> [2012-04-30 14:31:20 - HelloAndroid] 使用虚拟设备“leighs_basic_hardware_secound_virtual_device”启动新模拟器
> 
> [2012-04-30 14:31:40 - 模拟器] 警告：未找到 DNS 服务器
> 
> [2012-04-30 14:31:52 - 仿真器] 仿真器：仿真器窗口不在视野范围内并重新定位 [2012-04-30 14:31:52 - 仿真器]
> 
> [2012-04-30 14:31:53 - HelloAndroid] 发现新模拟器：emulator-5554
> 
> [2012-04-30 14:31:53 - HelloAndroid] 等待 HOME ('android.process.acore') 启动...
> 
> [2012-04-30 14:49:03 - HelloAndroid] HOME 在设备 'emulator-5554' 上启动 [2012-04-30 14:49:03 - HelloAndroid] 将 HelloAndroid.apk 上传到设备'emulator-5554'
> 
> [2012-04-30 14:49:03 - HelloAndroid] 安装 HelloAndroid.apk...
> 
> [2012-04-30 14:51:38 - HelloAndroid] 无法在设备 'emulator-5554 上安装 HelloAndroid.apk！
> 
> [2012-04-30 14:51:38 - HelloAndroid] (null) [2012-04-30 14:51:39 - HelloAndroid] 发布已取消！

除了我的模拟器上显示的 Android 徽标外，我什么都没有。我尝试了各种平台模拟器 - 它们都没有执行！

在检查运行配置菜单中擦除的用户数据后，我在测试运行中收到的第二批错误是：结果

> ：[2012-04-30 17:20:27 - 模拟器] 分配内存失败：1455 [2012-04-30 17:20:27 - 模拟器]
> 
> [2012-04-30 17:20:27 - Emulator] 此应用程序已请求运行时以不寻常的方式终止它。[2012-04-30 17:20:27 - Emulator] 请联系应用程序的支持团队以获取更多信息。

如果有人想检查，我的计算机使用 Novabench 的基准测试结果是：

> 30/04/2012 17:45:59 Microsoft Windows 7 Starter Intel Atom N550 1.50GHz @ 1500 MHz 显卡：Intel(R) Graphics Media Accelerator 3150 1014 MB 系统 RAM（分数：78）- RAM 速度：1610 MB/s CPU 测试（分数：70） - 浮点运算/秒：24110532 - 整数运算/秒：43813828 - MD5 散列生成/秒：159380 图形测试（分数：1） - 3D 帧每秒：3 硬件测试（分数：6 ) - 主分区容量：87 GB - 驱动器写入速度：14 MB/s

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T15:54:02.683

你是运行你的项目还是只启动一个模拟器？启动模拟器后，单击“运行”按钮并选择“作为 Android 项目运行”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T16:20:36.700

我不确定你等了多长时间，但第一次启动模拟器（在你有快照之前）可能需要很长时间。根据您的硬件，启动可能需要 10 分钟以上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T02:52:24.817

我有一个类似的问题，通过创建一个新的模拟器并运行它来解决。您可以通过 DDMS 在设备视图中查看进度。有时，当启用快照的模拟器因错误而挂起时，可能会出现此问题，这可以通过在擦除用户数据的情况下启动模拟器来解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T11:47:03.680

如果您有一段时间没有对其进行任何活动，则仿真器线程会自动切断.. 所以.. 继续运行您的应用程序以保持仿真器处于实时状态！

我的建议 - 如果你有一部 android 手机.. 请 USB 调试它并在你的手机上调试你的应用程序......你会从模拟器的长时间运行中解脱出来............运行！:)

# mysql - 缓慢的 MySQL IN 查询——如何转换为 JOIN？

> ID：10387795
> 
> 赞同：3
> 
> 时间：2012-04-30T17:19:59.297
> 
> 标签：mysql, sql, database, join

我目前在我的应用程序中运行当前的 MySQL 查询最多需要 10 秒：

```
SELECT tagid, tag FROM tags WHERE tagid IN 
(SELECT DISTINCT tagid FROM news_tags WHERE newsid IN 
(SELECT newsid FROM news_tags WHERE tagid IN (16,32)
GROUP BY newsid HAVING COUNT(newsid)>=2)) 
AND tagid NOT IN (16,32) ORDER BY level, tagid 
```

使用的表格是：

*   表`news_tags`，有列`newsid`，`tagid`
*   表`tags`, 有列`tagid`, `tag`,`level`

查询的目的是找到标签为`tagid`16**和**32 的“新闻”项目，然后找到这些新闻项目也被标记的其他标签，以便用户进一步缩小“新闻”的范围" 具有更具体标签组合的项目。最终目标是从表中获取剩余的`tag`相关`tagid`列`tags`。

我已经尝试过不同的尝试，`JOIN`但未能选择`tagid`新闻项目上附加了提供的标签的所有剩余 s。

这是我的`EXPLAIN`SQL 结果，以防它们指出我遗漏的另一个缓慢原因：

```
id|select_type |table |type |possible_keys|key |key_len|ref |rows|Extra
 1|PRIMARY |标签 |范围 |PRIMARY |PRIMARY| 4|空| 55|在哪里使用；使用文件排序
 2|相关子查询|news_tags|index_subquery|tagid |tagid | 4|功能| 26|使用索引；使用哪里
 3|相关子查询|news_tags|index |tagid |PRIMARY| 8|空| 11|在哪里使用；使用索引

```

只是为了澄清这个问题：我想要用标签 16 和 32 标记的新闻项目的剩余标签，而不是 16 或 32。抱歉有任何混淆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:33:28.447

```
SELECT DISTINCT tags.tagid, tags.tag
FROM
       tags                             -- tags from the ...
  JOIN news_tags AS n0 USING (tagid)    -- ... news items tagged with ...
  JOIN news_tags AS n1 USING (newsid)   -- ... tagid = 16 and ...
  JOIN news_tags AS n2 USING (newsid)   -- ... tagid = 32
WHERE
  n1.tagid = 16 AND n2.tagid = 32
  AND tags.tagid NOT IN (16,32)         -- not the tags we already know about
ORDER BY tags.level, tags.tagid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:06:28.780

**编辑**：我的查询严格基于提供的 sql OP，只是想按照问题标题中的要求加快查询速度。

```
SELECT DISTINCT t.tagid, t.tag FROM tags AS t
JOIN            news_tags AS nt1 USING (tagid) 
JOIN            news_tags AS nt2 USING (newsid)
WHERE           nt2.tagid IN (16, 32) AND t.tagid NOT IN (16, 32) 
GROUP BY        nt2.newsid HAVING COUNT(nt2.newsid)>=2
ORDER BY        t.level, t.tagid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:34:54.130

我最终提出了一个快速查询，使用 JOINS 而不是 IN 语句解决了这个问题：

```
SELECT tags.tagid,tags.tag FROM tags 
INNER JOIN (SELECT DISTINCT news_tags.tagid FROM news_tags
INNER JOIN (SELECT newsid FROM news_tags WHERE tagid IN (16,32) 
GROUP BY newsid HAVING count(newsid) >= 2) tagged_news 
ON news_tags.newsid = tagged_news.newsid 
WHERE news_tags.tagid NOT IN (16,32)) rem_tags
ON tags.tagid = rem_tags.tagid
ORDER BY level, tagid 
```

这显然不像 eggyal 的解决方案那样干净或优雅，所以我最终在我的应用程序中采用了他的解决方案。

我很想听听更多客观原因（除了优雅），为什么 eggyval 的解决方案优于上述 SQL 语句，既可以找到解决问题的最佳 SQL 语句，也可以为未来学习。感谢到目前为止的所有帮助。

# django - 如何使用 Django PayPal Payment Pro 向我的客户付款

> ID：10387798
> 
> 赞同：0
> 
> 时间：2012-04-30T17:20:07.647
> 
> 标签：django, paypal, django-paypal

我想用 Paypal Payment Pro 向我的客户付款，我的意思是从我的商家帐户向个人帐户汇款。目前，我只能要求客户提供他的信用卡信息，然后将钱汇到我的商家帐户，但我想要相反。

PS：我使用 Django WPP [https://github.com/johnboxall/django-paypal](https://github.com/johnboxall/django-paypal)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T01:34:29.357

使用批量付款。我正在查看[这个站点](http://djangosnippets.org/snippets/1181/)以了解如何将它与 django 一起使用。它就像一个魅力。不过，您的客户需要有贝宝帐户，但如果您向他们付款，我认为这不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:41:59.167

这不是 PayPal Payment Pro API 的工作方式。它允许您收钱，而不是汇款。您想使用[Mass Payments](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_masspay)或[Adaptive Payments API](https://www.x.com/developers/paypal/products/adaptive-payments)。

# ios - 在故事板中编辑 UITableViewController 的 UITableView

> ID：10387802
> 
> 赞同：0
> 
> 时间：2012-04-30T17:20:25.987
> 
> 标签：ios, storyboard, uitableview

我已经按照这个[Parse Tutorial](https://parse.com/tutorials/parse-query-table)创建了一个自定义 UITableViewController。我希望能够在情节提要中编辑 UITableView。我想在本教程的某个地方我会将 ViewController 链接到 TableView，但我也没有。如何在链接到此 ViewController 的 stroyboard 中访问此 TableView 以进行 UI 编辑？

这是 GitHub 上的 ViewController[代码](https://github.com/ParsePlatform/TodoTable/blob/master/ParseStarterProject/MyTableController.m)。

编辑：这真的与 Parse API 无关。表格视图不在情节提要中 - 这是我要解决的问题。本教程指示我将其添加到 AppDelegate.m：

```
MyTableViewController *controller = [[MyTableViewController alloc] init];

self.window.rootViewController = controller; 
```

这对 MyTableViewController.m：

```
- (id)initWithStyle:(UITableViewStyle)style

{

self = [super initWithStyle:style];

if (self) {

    // Custom the table

    // The className to query on

    self.className = @"Artists"; 

    // The key of the PFObject to display in the label of the default cell style

    self.keyToDisplay = @"artistName"; 

    // Whether the built-in pull-to-refresh is enabled

    self.pullToRefreshEnabled = YES;

    // Whether the built-in pagination is enabled

    self.paginationEnabled = YES;

    // The number of objects to show per page

    self.objectsPerPage = 50;

 }

return self;

} 
```

该应用程序运行良好，但我在情节提要中只有一个空白视图。我是否需要创建一个 TableView 并将其链接到 MyTableViewController？我猜我必须从 AppDelegate 中删除 self.window... 代码。

编辑：更新代码：

```
#import "MyTableViewController.h"

@implementation MyTableViewController
@synthesize tableView = _tableView;

#pragma mark - View lifecycle

- (void)viewDidLoad
{
[super viewDidLoad];

    // Custom the table

    // The className to query on
    self.className = @"Artists";

    // The key of the PFObject to display in the label of the default cell style
    self.keyToDisplay = @"artistName";

    // Whether the built-in pull-to-refresh is enabled
    self.pullToRefreshEnabled = YES;

    // Whether the built-in pagination is enabled
    self.paginationEnabled = YES;

    // The number of objects to show per page
    self.objectsPerPage = 50;

// Uncomment the following line to preserve selection between presentations.
// self.clearsSelectionOnViewWillAppear = NO;

// Uncomment the following line to display an Edit button in the navigation bar for this     view controller.
 self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
[self setTableView:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
[super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:            (UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)didReceiveMemoryWarning
{
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

#pragma mark - Parse

- (void)objectsDidLoad:(NSError *)error {
[super objectsDidLoad:error];

// This method is called every time objects are loaded from Parse via the PFQuery
}

- (void)objectsWillLoad {
[super objectsWillLoad];

// This method is called before a PFQuery is fired to get more objects
}

// Override to customize what kind of query to perform on the class. The default is to query for
// all objects ordered by createdAt descending.
- (PFQuery *)queryForTable {
PFQuery *query = [PFQuery queryWithClassName:self.className];

// If no objects are loaded in memory, we look to the cache first to fill the table
// and then subsequently do a query against the network.
if ([self.objects count] == 0) {
    // ** There are other caching options in Parse iOS guide
    query.cachePolicy = kPFCachePolicyNetworkElseCache;
}

[query orderByDescending:@"tweetInfluence"];

return query;
}
// Override to customize the look of a cell representing an object. The default is to display
// a UITableViewCellStyleDefault style cell with the label being the first key in the object. 
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath object:(PFObject *)object {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

// Configure the cell
cell.textLabel.text = [object objectForKey:@"artistName"];
cell.detailTextLabel.text = [NSString stringWithFormat:@"Tweet Influence: %@", [object objectForKey:@"tweetInfluence"]];

return cell;
}
#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
[super tableView:tableView didSelectRowAtIndexPath:indexPath];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:29:20.790

如果您使用的是故事板，那么您应该删除

```
MyTableViewController *controller = [[MyTableViewController alloc] init];

self.window.rootViewController = controller; 
```

来自 AppDelegate。使用故事板，应用程序的入口点由故事板本身控制，由向右箭头表示。

此外，就目前的代码而言，您的应用正在调用`init`视图控制器上的函数，而不是`initWithStyle`函数。您应该将当前存在的代码放入`initWithStyle`视图控制器的`viewDidLoad`函数中，以确保调用它。

# android - 如何在同一屏幕中显示 2 个不同 ListView 的 2 个元素之间的连接？

> ID：10387810
> 
> 赞同：1
> 
> 时间：2012-04-30T17:20:54.880
> 
> 标签：android, listview, overlay

想象一下，我在同一个屏幕上有 2 个 ListView，如下所示：

![2个ListViews在同一个屏幕上](../Images/7e9d95ce2a39193efb67d4d8fc70512f.png)

所以，现在我想将左边的一个元素连接到右边的一个元素。该连接应该用一条线表示。

左侧的任何项目都可以连接到右侧的项目。并且左起一个item可以连接多个right，一个right只能有一个left（虽然这种限制如果解决了第一个问题应该很简单）。

考虑到用户可以滚动两个列表并且应该在滚动后重新绘制连接，我看不到这样做的方法。此外，与不在屏幕上的项目（已滚动）的连接应该具有某种表示形式。

关于如何做到这一点的任何建议？

**编辑**

每个项目的大小会更大，因此连接不会那么混乱。最多我们一次将有 5-6 个连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:40:57.230

你可以得到你想连接的每个项目的中心点，然后在android.graphics.canvas中使用drawLines()

[画线](http://developer.android.com/reference/android/graphics/Canvas.html#drawLine%28float,%20float,%20float,%20float,%20android.graphics.Paint%29)

[view.getLocationOnScreen](http://developer.android.com/reference/android/view/View.html#getLocationOnScreen%28int%5B%5D%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:36:39.287

映射每一个连接，不管有没有滚动，听起来到处都会有线条，难以阅读。如果您在每个项目上设置一个 clickListener 以突出显示与相对列的每个连接，那将更易于阅读，但您必须单击每个项目才能一次查看所有连接。

# python - python的mechanize可以提取与控件关联的文本吗？

> ID：10387816
> 
> 赞同：0
> 
> 时间：2012-04-30T17:21:20.160
> 
> 标签：python, web-crawler, mechanize

我正在编写一个爬虫，并且我不断遇到表单控件，对于这些控件，机械化无法为我提供除类型之外的任何信息。有什么方法可以获得与控件关联的人类可读文本？我知道这是一个有点模糊的领域，因为没有完美的方式来获取这些信息，但也许有什么可以帮助的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T05:40:38.357

在兄弟节点和父节点的文本上查找文本，因为那是它们经常出现的地方。如果您确实必须解析 html，LXML 可能会有所帮助。

# jquery - Cufon + jQuery 在 IE 上搞砸了

> ID：10387820
> 
> 赞同：1
> 
> 时间：2012-04-30T17:21:48.407
> 
> 标签：jquery, internet-explorer, cufon, sizzle

我对此很陌生，我真的没有解决方案。现在我正在定制一个 Opencart 主题来满足我的需求。

这是网站： http: [//lasarito.ro/lenjerie-de-pat](http://lasarito.ro/lenjerie-de-pat)。

它在 Chrome 和 FF 上运行完美，但 IE 却搞砸了一切。在我的研究中，我了解到嵌入在 jQuery 中的 sizzle 库不是 Cufon 的朋友，所以我想这就是为什么 IE 会抛出一堆 javascript 错误并弄乱渲染。

另一个我无法解决的问题是为什么当我使用 firebug 显示 HTML 时，一切都搞砸了，css 和 js 包含在正文部分而不是头部，因为它们出现在源代码中。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:30:21.967

在我从事的一个项目中，我在 jQuery 的文档就绪事件处理程序中添加了 Cufon.replace 调用。我会试试看：

```
$(document).ready(function () {
    Cufon.replace('h1,.name, h2,.box .box-heading', { fontFamily: 'Josefin Sans Std Light' });
    Cufon.replace('.price-range', { fontFamily: 'Helvetica CE 55 Roman' });
}); 
```

在 Cufon 之前包含 jQuery 并且 jQuery 已经完成加载是至关重要的。Cufon 依赖于 jQuery 的选择器引擎来提供选择器，而不仅仅是标记名（即类、ID 等）。我发现旧版浏览器（< ie 9）在这里非常敏感。

您可以尝试的另一件事是[https://github.com/sorccu/cufon/wiki/Usage](https://github.com/sorccu/cufon/wiki/Usage)上的*第 4 步*：

> 第 4 步 – 让 Internet Explorer 正常运行
> 
> 不幸的是，Internet Explorer 仍然存在一个问题。在大多数情况下，在替换文本之前会有短暂但可见的延迟。您可以通过在结束标记之前（或在任何外部脚本（如 Google Analytics）之前）插入以下代码段来避免此问题：

```
<script type="text/javascript"> Cufon.now(); </script> 
```

# c# - 使用下拉列表和文本框过滤器进行网格视图搜索？

> ID：10387822
> 
> 赞同：4
> 
> 时间：2012-04-30T17:22:01.463
> 
> 标签：c#, sql, gridview

先生/女士现在我的问题是我想使用下拉列表和文本框过滤页面的网格视图。

我的意思是说就像我们编写 SQL 一样：

```
Select  * from student where roll_no = 101; 
```

正确的，

现在我`roll_no`应该通过下拉列表选择列（在上面的语句中），并且应该在文本框中输入值（上面的语句中的 101）。

简而言之，我想通过单击按钮使用下拉列表和文本框的值填充我的网格视图。

对于开发，我正在使用数据集和表适配器。

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:07:53.260

我使用下拉列表（组合框）和文本框来过滤我`DataGridView`的以下方式，我认为这就是您要寻找的。

首先，填充您的`DataGridView`. 您声明您正在使用`DataSet`and `TableAdapters`。我猜您正在使用 a`BindingSource`将您的数据绑定到您的`DataGridView`. 如果是这种情况，那么您可以`Filter`通过`BindingSource`.

我的设置与此类似：

![在此处输入图像描述](../Images/ac27c32568c08c0a33a8bca15fabd191.png)

我的组合框包含我想在过滤器中使用的字段，文本框是我将应用的值。组合框中的值是用户友好的名称，因此他们将了解他们正在过滤的字段。

应用过滤器的代码是：

```
private void ApplyFilter()
{
     var filterEntered = FilterTextBox.Text.Trim().ToLower();

     MyBindingSource.RemoveFilter(); // remove previous filter

     string filterText = string.Empty;
     string filterComboText = string.Empty;

     switch (FilterComboBox.Text)
     {
         case "Profile":
            filterComboText = "TSProfile"; // column name in the query
            break;
         case "User Id":
            filterComboText = "TSUserId";
            break;
         case "Center":
            filterComboText = "TSCenter";
            break;
         case "Prefix":
            filterComboText = "TSPrefix";
            break;
     }

     filterComboText = filterComboText + " = '";

     filterText += (string.IsNullOrEmpty(filterComboText) ? string.Empty : filterComboText);
     filterText += (!string.IsNullOrEmpty(filterText) && !string.IsNullOrEmpty(filterEntered) ? filterEntered + "'" : string.Empty);

     MyBindingSource.Filter = filterText;
} 
```

基本上它在做什么，是获取组合框的文本名称，然后是文本框中的文本，并将过滤器应用于 BindingSource。

[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.filter.aspx)有一篇关于过滤的文章，其中包含完整的示例代码。

我推荐的一件事是为用户提供一种轻松删除过滤器的方法，我使用“删除过滤器”按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:51:26.167

如果您先向我们展示一些代码会很有帮助..

你可以尝试这样的事情：

在您的代码隐藏中，将项目添加到您的下拉列表中。

```
List<yourObject> list = new List<yourObject>();
foreach (yourObject i in list)
 {
  DropdownList1.Items.Add(new ListItem("" i.name, "" + i.id));
 } 
```

我只是在这里举个例子，i.name 可以是某个学生的名字，i.id 将是与该给定学生关联的 id。

确保将下拉列表的 autopostback 属性设置为 true，如下所示：

```
 <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
        onselectedindexchanged="DropDownList1_SelectedIndexChanged"> 
```

然后在下拉列表的选定索引更改事件中，执行以下操作：

```
 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
yourDataControl.DataSource = someMethod(Convert.toInt32(DropDownList1.SelectedValue));
yourDatacontrol.DataBind();
} 
```

正如我所说，我不完全确定您要做什么或您要如何做。我描述的方式，您不需要文本框输入某个值，通过在下拉列表中选择一个项目，您将自动获得一个值：在这种情况下，与下拉列表中所选项目关联的 ID。

# jquery - 在“this”jquery上方找到兄弟姐妹

> ID：10387823
> 
> 赞同：1
> 
> 时间：2012-04-30T17:22:29.887
> 
> 标签：jquery

我无法使用我的 jQuery 代码选择正确的元素。这就是 DOM 的基本外观：

```
<div class='bad_link'>
    <p><a href='...'>...</a></p>
    <p><a href='...'>...</a></p>
    <input type='text' size='100' name='....' />
    <input class='check_button' type='button' name='check_link' value='Check' />
</div> 
```

我正在尝试获取“检查”按钮正上方的输入字段的值，但我无法做到这一点。

这是我现在的 jQuery 代码：

```
$(document).ready(function() {
    $(".check_button").on('click', function() {
        window.alert($(this).siblings().find('input').text());
    });
}); 
```

我怎样才能抓住那个价值？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T17:23:33.180

`.prev()`将选择复选框的前一个元素。

```
 $(".check_button").on('click', function() {
        window.alert($(this).prev('input[type="text"]').val());
    }); 
```

`$(this).prev().val();`也是一种选择

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:24:46.347

使用[prev()](http://api.jquery.com/prev/)选择前一个兄弟，使用[val()](http://api.jquery.com/val/)获取输入的值：

```
window.alert($(this).prev().val()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:27:37.950

您可能需要考虑与此不同的方法来查找要对其执行操作的元素。当您使用兄弟姐妹时，它会将您的功能与通常被认为是错误形式的 HTML 紧密联系在一起。很难理解仅仅移动标签或添加另一个标签会导致功能中断。

相反，我建议您提供要与类一起使用的元素。像`obj_myElement_xxx`xxx 是元素的 id 之类的东西。然后在您的按钮中设置一个与元素的 id 相对应的属性，以便您可以使用：

```
$(".obj_myElement_" + $(this).attr("data-myElementId")) 
```

抓住你试图操纵的元素。

# android - Android ListView 固定高度项

> ID：10387826
> 
> 赞同：9
> 
> 时间：2012-04-30T17:22:38.613
> 
> 标签：android, android-listview, android-relativelayout

出了点小问题。我想创建一个 android 列表视图活动，列表中的所有项目都具有固定的高度。

因此，我的项目布局 (thread_item.xml) 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="300dip"
        >
    <TextView android:id="@+id/thread_item_title"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="[dummy]"
              android:textSize="20dip"
              android:textStyle="bold"
            />
    <ImageView android:id="@+id/thread_first_image"
               android:layout_below="@id/thread_item_title"
               android:scaleType="centerInside"
               android:maxWidth="100dip"
               android:maxHeight="100dip"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:adjustViewBounds="true" />
    <TextView
            android:id="@+id/thread_item_preview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@id/thread_first_image"
            android:text="[dummy]"
            android:textSize="15dip">
    </TextView>
</RelativeLayout> 
```

我将根元素的 layout_height 设置为 300dip 并希望所有项目都具有相同的高度，但事实并非如此。当我运行应用程序时，它看起来像具有 wrap_content 值的高度。

此外，活动本身看起来像这样：

```
public class ThreadListActivity extends ListActivity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);        
        /*
         Code to get items from the storage.
        */

        setListAdapter(new ThreadItemAdapter(this, R.layout.thread_item, itemsArray)));

        getListView().setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
                /*Start new Activity. Unrelated stuff.*/
            }
        });
    }
} 
```

我正在使用的适配器如下所示：

```
public class ThreadItemAdapter extends ArrayAdapter<ThreadItem> {

    Activity context;
    List<ThreadItem> items;

    public ThreadItemAdapter(Activity context, int textViewResourceId, List<ThreadItem> items) {
        super(context, textViewResourceId, items);
        this.context = context;
        this.items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inf = this.context.getLayoutInflater();
        View result;
        if (convertView == null) {
            result = inf.inflate(R.layout.thread_item, null);
        } else {
            result = convertView;
        }

        TextView tbTitle = (TextView) result.findViewById(R.id.thread_item_title);
        TextView tbPreview = (TextView) result.findViewById(R.id.thread_item_preview);
        ImageView ivFirstImage = (ImageView) result.findViewById(R.id.thread_first_image);

        ThreadItem item = items.get(position);

        tbTitle.setText(item.getThreadTitle());
        ivFirstImage.setImageBitmap(item.getFirstImage());

        SimpleLeadingMarginSpan span = new SimpleLeadingMarginSpan(item.getFirstImage() != null ? 5 : 0, 115); // TODO: const
        SpannableString previewText = new SpannableString(item.getThreadPreview());
        previewText.setSpan(span, 0, previewText.length(), 0);
        tbPreview.setText(previewText);

        return result;
    }
} 
```

我不明白为什么所有列表项仍然包装它们的内容并且不保持 300dip 的高度。它们可能比 300dip 更小或更大。我正在使用 android 2.3.3，在 HTC Evo 3D 设备和模拟器上进行测试（都显示相同的结果）。

提前非常感谢。

**升级版：**

感谢米格尔和山姆。解决方案是将 maxHeight 设置为 textView，这会使我的列表项增长（即`+id/thread_item_preview`）并将 RelativeLayout 的 minHeight 设置为 300dip，以防止其缩小。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-30T17:50:59.273

当为 convertView 充气时，而不仅仅是

```
result = inf.inflate(R.layout.thread_item, null); 
```

做

```
result = inf.inflate(R.layout.thread_item, parent, false); 
```

有问题的方法是`inflater.inflate(int viewId, ViewGroup parent, boolean attachToRoot)`——因为你不尊重提供的`parent`（在这种情况下是 ListView），你提供给 listview 项的任何维度默认设置为 layout_width=fill_parent，layout_height=wrap_content，忽略 300dip您在 xml 中指定的高度。通过提供父视图并传递`false`，充气机将遵守 300dip 高度，而不会将其附加到根（父）。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-30T17:30:36.140

如果将行中的所有子视图高度从`wrap_content`更改为`match_parent`怎么办？

* * *

**来自评论**

您是否尝试过`minHeight`and`maxHeight`属性？例如：

```
android:minHeight="300dp" 
```

您还应该观看 Android 的 Romain Guy[讨论适配器和`getView()`](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html).

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-30T17:51:03.347

尝试改变这个

```
android:layout_height="300dip" 
```

至

```
android:minHeight="300dip" 
```

这对我使用 ExpandableListView 有用，所以我想它适用于这种情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-10T17:26:08.863

您可以通过为 Min 和 Max 指定相同的维度来实现此目的。这解决了我的问题。

```
<ImageView
    android:id="@+id/appIconImageView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginBottom="8dp"
    android:layout_marginLeft="8dp"
    android:layout_marginTop="8dp"
    android:adjustViewBounds="true"
    android:maxHeight="50dp"
    android:maxWidth="50dp"
    android:minHeight="50dp"
    android:minWidth="50dp"
    android:src="@drawable/ic_launcher" /> 
```

![在此处输入图像描述](../Images/00731dba4c3c099439fc52c49c7eb3cc.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-24T17:51:44.000

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:minHeight="60dp"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:gravity="center"
    android:weightSum="1"
    android:background="@color/main_color">

    <ImageView
        android:id="@+id/img_left_menu"
        android:layout_weight="0.4"
        android:focusable="false"
        android:maxHeight="50dp"
        android:maxWidth="50dp"
        android:minHeight="50dp"
        android:minWidth="50dp"
        android:layout_width="0dp"
        android:scaleType="centerInside"
        android:adjustViewBounds="true"
        android:layout_height="wrap_content"/>

    <TextView
        android:id="@+id/tx_left_menu"
        android:layout_width="0dp"
        android:textSize="18dp"
        android:layout_gravity="center_vertical"
        android:layout_weight="0.6"
        android:singleLine="true"
        android:layout_height="wrap_content"
        android:focusable="false"
        />
</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T17:46:32.113

尝试将内容 TextView 的高度设置为`0dp`，然后将其设置`layout_alignParentBottom`为`true`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-09T12:24:50.903

如果我没记错的话，listView会自动将自定义视图的LayoutParams修改为wrap_content，wrap_content。但是，上面的答案是正确的，如果你设置了 minHeight 或 minWidth ，它会很好地工作。

# facebook - Facebook 注册插件教程

> ID：10387830
> 
> 赞同：1
> 
> 时间：2012-04-30T17:22:55.487
> 
> 标签：facebook, plugins, registration

我正在寻找一个可以阅读如何使用 Facebook 注册插件的教程。

在该插件的 Facebook 页面上，它不是很容易理解。

# java - Java - 对象的默认序列化

> ID：10387832
> 
> 赞同：1
> 
> 时间：2012-04-30T17:23:04.600
> 
> 标签：java, serialization

> 对象的默认序列化机制写入对象的类、类签名以及所有非瞬态和非静态字段的值

1.  这里的“对象类”和“类签名”有什么区别吗？
2.  由于“类签名”和“类”也通过了，JVM 是否在目标系统上加载默认类？（或）在序列化对象中传递的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:29:49.157

“写对象的类”这句话的真正意思是“写对象的类*名*”。java对象序列化不写类字节，只写类名。稍后反序列化对象时，它将使用当前 jvm 中定义的类字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:34:36.060

您不存储某种序列化的类定义，只存储您序列化的实例的内容。反序列化时，JVM 将使用在其类路径中找到的类定义。

所以你必须了解[版本控制的工作原理](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/version.html)......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T17:35:08.790

我相信“类签名”应该是指类'（和可序列化的超类'）字段名称和类型，以及序列版本 UID。

默认情况下，`ObjectInputStream`在“最新”类加载器（即调用堆栈上最接近的非引导类加载器）中查找类名。使用指定的类加载器查找合理的子类。默认情况下，RMI（使用系统属性将其关闭）查找位置（URL）以从嵌入在流中的注释中加载新类。

# audio - 44100 的采样率究竟是什么？

> ID：10387845
> 
> 赞同：3
> 
> 时间：2012-04-30T17:24:08.080
> 
> 标签：audio, pcm

我正在使用 FMOD 库从 MP3 中提取 PCM。我得到了整个 2 通道 - 16 位的东西，而且我还得到 44100hz 的采样率是 1 秒内 44,100 个“声音”样本。我不明白的是，16 位值究竟代表什么。我知道如何在 xy 轴上绘制坐标，但我在绘制什么？y轴代表时间，x轴代表什么？声级？和振幅一样吗？如何确定构成此值的不同声音。我的意思是，我如何从 16 位数字中获得频谱。

这可能是一个单独的问题，但它实际上是我真正需要回答的问题：如何获得每 25 毫秒的幅度？我是否取 44,100 个值除以 40 (40 * 0.025 秒 = 1 秒)？这给出了 1102.5 个样本；那么我是否会将 1102 个值输入到一个黑盒中，以便及时为我提供那个时刻的幅度？

编辑原始帖子以添加我计划很快测试的代码：（注意，我将帧速率从 25 毫秒更改为 40 毫秒）

```
// 44100 / 25 frames = 1764 samples per frame -> 1764 * 2 channels * 2 bytes [16 bit sample] = 7056 bytes
private const int CHUNKSIZE = 7056;
uint    bytesread = 0;
var squares = new double[CHUNKSIZE / 4];
const double scale = 1.0d / 32768.0d;

do
{
    result = sound.readData(data, CHUNKSIZE, ref read);

    Marshal.Copy(data, buffer, 0, CHUNKSIZE);

    //PCM samples are 16 bit little endian
    Array.Reverse(buffer);

    for (var i = 0; i < buffer.Length; i += 4)
    {
        var avg = scale * (Math.Abs((double)BitConverter.ToInt16(buffer, i)) + Math.Abs((double)BitConverter.ToInt16(buffer, i + 2))) / 2.0d;
        squares[i >> 2] = avg * avg;
    }

    var rmsAmplitude = ((int)(Math.Floor(Math.Sqrt(squares.Average()) * 32768.0d))).ToString("X2");

    fs.Write(buffer, 0, (int) read);

    bytesread += read;

    statusBar.Text = "writing " + bytesread + " bytes of " + length + " to output.raw";
} while (result == FMOD.RESULT.OK && read == CHUNKSIZE); 
```

加载 mp3 后，我的 rmsAmplitude 似乎在 3C00 到 4900 的范围内。我做错了吗？我期待更广泛的传播。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:26:07.443

是的，样本代表幅度（在那个时间点）。

要获得频谱，您通常会将其从时域转换为频域。

最后一个问题：使用了多种方法 - 您可能需要[RMS](https://en.wikipedia.org/wiki/Root_mean_square)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:32:26.983

通常，x 轴是时间值，y 轴是幅度。要获得频率，您需要对数据进行傅里叶变换（很可能使用快速傅里叶变换 [fft] 算法）。

要使用最简单的“声音”之一，我们假设您有一个频率为 f 的单频噪声。这表示（在幅度/时域中）为 y = sin(2 * pi * x / f)。如果将其转换为频域，则最终会得到频率 = f。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-17T12:10:49.470

每个样本代表给定时间模拟信号的电压。

# java - 关于首要原则

> ID：10387850
> 
> 赞同：-1
> 
> 时间：2012-04-30T17:24:41.490
> 
> 标签：java

我正在开发一个程序，将覆盖的概念牢记在我的脑海中。

```
class Parent
{
    private void method1 () {
        System.out.println ("Parent's method1 ()");
    }
    public void method2 () {
        System.out.println ("Parent's method2 ()");
            method1 ();
    }
}

class Child extends Parent
{
    public void method1 ()  {
        System.out.println ("Child's method1 ()");
    }
       //overriding
    public void method2 ()  {
        System.out.println ("Child's method2 ()");
    }

    public static void main (String args []) {
        Parent p = new Child ();
        p.method2 ();//parent
    }
} 
```

现在，当我调用 method2() 时，父类 method2() 被调用，如上所示，我在创建对象时传递父引用，但如果我想访问子类 method2()，则以类似的方式，那么一种方法是直接创建子类的对象，但如果我想通过传递父引用以类似的方式调用子类 method2() 那么如何可能请告知。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-30T17:41:15.887

Srinivas Reddy Thatiparthy 回答了您之前版本的问题。

如果您覆盖子类中的方法，则任何子实例都将使用子类方法。

您可以通过在子方法中包含`super.method2()`方法调用来从子方法执行父方法。

或者，您可以将子对象强制转换为父对象，然后调用该方法。：

```
Parent parent = (Parent) child;
parent.method2(); 
```

# google-analytics - 在 Google Analytics 中，我应该在重定向之前应用延迟吗？

> ID：10387852
> 
> 赞同：0
> 
> 时间：2012-04-30T17:24:43.053
> 
> 标签：google-analytics

使用谷歌分析，我正在跟踪一个链接的点击（链接是同一个网站的）。

在使用 trackPageViews 跟踪点击后，是否有必要在重定向之前应用一些延迟？

我看到人们建议延迟出站链接，但我想，同样的理由也适用于将用户带到同一网站的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:40:25.410

问题实际上是`_trackPageview`在您离开当前页面之前，跟踪像素请求（来自 ）是否已经完成。

所以，是的——如果链接在现有窗口中打开，您将需要延迟点击链接，无论是否留在网站上。

顺便说一句，虽然`_trackPageview`用于跟踪点击会起作用，但它也会增加您网站的实际页面浏览量——您可能希望使用事件跟踪（带有`_trackEvent`）。请参阅 [事件跟踪指南](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

# button - ASP.NET 以编程方式添加带有事件的按钮

> ID：10387856
> 
> 赞同：3
> 
> 时间：2012-04-30T17:25:06.927
> 
> 标签：button, asp.net-2.0

我正在制作一个动态表，只要单击添加行按钮，它就会添加行。我正在以编程方式创建按钮并将其添加到表头。在该按钮下方，在同一列上也会有删除行按钮。

但是我遇到了一个问题，当我单击按钮时，没有调用该事件。我是否正确创建了按钮？如果没有，那我该怎么做？如果我是，那你知道问题出在哪里吗？

# 区域 Add_Table_Header

```
 TableHeaderCell thcOne = new TableHeaderCell();
    TableHeaderCell thcTwo = new TableHeaderCell();
    TableHeaderCell thcThree = new TableHeaderCell();
    TableHeaderCell thcrFour = new TableHeaderCell();
    TableHeaderCell thcFive = new TableHeaderCell();
    TableCell thcRowAction = new TableCell(); //THIS IS THE COLUMN WITH THE 
                                              //ADD BUTTON

    thcOne.Text = "Who";
    thcTwo.Text = "Date Started";
    thcThree.Text = "Date Ended";
    thcrFour.Text = "Causes?";
    thcFive.Text = "Result";

            //HERE IS WHERE I CREATE AND ADD THE BUTTON

    Button addRowButton = new Button();
    addRowButton.Text = "Add Row";
    addRowButton.Click += new EventHandler(this.AddNewRow_Click);
    thcRowAction.Controls.Add(addRowButton);

    TableHeaderRow headerRow = new TableHeaderRow();
    headerRow.Cells.Add(thcOne);
    headerRow.Cells.Add(thcTwo);
    headerRow.Cells.Add(thcThree);
    headerRow.Cells.Add(thcrFour);
    headerRow.Cells.Add(thcFive);
    headerRow.Cells.Add(thcRowAction);

    table.Rows.Add(headerRow);

    #endregion

protected void AddNewRow_Click(object sender, EventArgs e)
    {
        if (ViewState["RowsCount"] != null)
        {
            numOfRows = Convert.ToInt32(ViewState["RowsCount"]);
            GenerateTable(numOfRows);
        }
    } 
```

再次出现按钮，但它没有输入正确的事件方法。感谢您的帮助和时间:)

顺便说一句，当我以声明方式执行此操作时，例如：

```
<asp:Button ID="BTNAdd" runat="server" Text="Add New Row" OnClick="AddNewRow_Click" /> 
```

该活动将注册并完全正常工作。

新信息：我也出现了一个删除按钮，我没有使用它注册任何类型的事件，但是当我单击它时，它与添加行按钮完全相同，这可能是因为母版页还是不同的源是告诉按钮先做什么还是默认做什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T17:35:18.913

您应该在 Page 的 Init 事件处理程序中添加动态控件，以便适当地触发 ViewState 和事件。

尝试这样做：

```
protected void Page_Init(object sender, EventArgs e)     
     {         
         Button btn = new Button();         
        btn.ID = "btnTest";         
         btn.Text = "I was dynamically created";         
         btn.Click += new EventHandler(btnTest_Click);         
        Panel1.Controls.Add(btn);     
     } 
```

# php - 从 Symfony 2 测试用例运行控制台命令

> ID：10387857
> 
> 赞同：24
> 
> 时间：2012-04-30T17:25:10.237
> 
> 标签：php, symfony

有没有办法从 Symfony 2 测试用例运行控制台命令？我想运行用于创建和删除模式的学说命令。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-08-01T08:42:45.627

本[文档章节](http://symfony.com/doc/current/components/console.html#calling-an-existing-command)解释了如何从不同的地方运行命令。请注意，`exec()`根据您的需要使用是非常肮脏的解决方案......

Symfony2中执行控制台命令的**正确方法**如下：

# 选项一

```
use Symfony\Bundle\FrameworkBundle\Console\Application as App;
use Symfony\Component\Console\Tester\CommandTester;

class YourTest extends WebTestCase
{
    public function setUp()
    {
        $kernel = $this->createKernel();
        $kernel->boot();

        $application = new App($kernel);
        $application->add(new YourCommand());

        $command = $application->find('your:command:name');
        $commandTester = new CommandTester($command);
        $commandTester->execute(array('command' => $command->getName()));
    }
} 
```

* * *

# 选项二

```
use Symfony\Component\Console\Input\StringInput;
use Symfony\Bundle\FrameworkBundle\Console\Application;

class YourClass extends WebTestCase
{
    protected static $application;

    public function setUp()
    {
        self::runCommand('your:command:name');
        // you can also specify an environment:
        // self::runCommand('your:command:name --env=test');
    }

    protected static function runCommand($command)
    {
        $command = sprintf('%s --quiet', $command);    

        return self::getApplication()->run(new StringInput($command));
    }

    protected static function getApplication()
    {
        if (null === self::$application) {
            $client = static::createClient();

            self::$application = new Application($client->getKernel());
            self::$application->setAutoExit(false);
        }

        return self::$application;
    }
} 
```

* * *

*PS 伙计们，不要因为打电话给 Symfony2 感到羞耻`exec()`......*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T23:33:36.877

[文档](http://symfony.com/doc/2.0/components/console/introduction.html#calling-an-existing-command)告诉您建议的方法。示例代码粘贴在下面：

```
protected function execute(InputInterface $input, OutputInterface $output)
{
    $command = $this->getApplication()->find('demo:greet');

    $arguments = array(
        'command' => 'demo:greet',
        'name'    => 'Fabien',
        '--yell'  => true,
    );

    $input = new ArrayInput($arguments);
    $returnCode = $command->run($input, $output);

    // ...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T17:40:28.927

是的，如果你的目录结构看起来像

```
/symfony
    /app
    /src 
```

然后你会跑

`phpunit -c app/phpunit.xml.dist`

从您的单元测试中，您可以使用以下方式运行 php 命令

```
passthru("php app/console [...]") (http://php.net/manual/en/function.passthru.php)
exec("php app/console [...]") (http://www.php.net/manual/en/function.exec.php) 
```

或通过将命令放在反引号中

`php app/consode [...]`

如果您从 symofny 以外的目录运行单元测试，则必须调整应用程序目录的相对路径才能使其正常工作。

要从应用程序运行它：

```
// the document root should be the web folder
$root = $_SERVER['DOCUMENT_ROOT'];

passthru("php $root/../app/console [...]"); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-01T16:06:55.307

自我上次回答以来，文档已更新，以反映调用现有命令的正确 Symfony 2 方式：

[http://symfony.com/doc/current/components/console/introduction.html#calling-an-existing-command](http://symfony.com/doc/current/components/console/introduction.html#calling-an-existing-command)

# iphone - 如何将变量传递给 UIAlertView 委托？

> ID：10387862
> 
> 赞同：24
> 
> 时间：2012-04-30T17:25:47.203
> 
> 标签：iphone, objective-c, ios, uialertview

如何将变量传递给`UIAlertView`委托？

我有一个要在警报视图委托中使用的变量。它仅用于显示`UIAlertView`和`UIAlertView`委托的函数中，所以我认为它不应该是控制器上的属性。有没有办法将变量附加到`UIAlertView`委托并在委托中检索它？

```
- (void) someUserCondition:(SOCode *)userCode {
    if ([userCode warrentsConfirmation] > 0) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"Are you sure?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK",nil];        
        [alert setAlertViewStyle:UIAlertViewStyleDefault];  
        //TODO somehow store the code variable on the alert view
        [alert show];
    }
}

- (void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex   {
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if ([title isEqualToString:@"OK"]){
       SOCode *userCode = //TODO somehow get the code from the alert view
       [self continueWithCode:code];
    }                                 
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-30T21:00:37.537

在接口之前的 .h 中：

```
extern const char MyConstantKey;
@interface ViewController... 
```

在 .m 导入中：

```
import <objc/runtime.h> 
```

在 .m 实施前

```
const char MyConstantKey; 
```

在 .m 实现中

```
-(void)viewDidAppear:(BOOL)animated{ //or wherever

    NSString *aString = @"This is a string";

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Testing" message:@"test is test" delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil];

    [alert show];

    [alert release];

    objc_setAssociatedObject(alert, &MyConstantKey, aString, OBJC_ASSOCIATION_RETAIN_NONATOMIC);

 } 
```

在 .m alertview 回调中

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

     NSString *associatedString = objc_getAssociatedObject(alertView, &MyConstantKey);

     NSLog(@"associated string: %@", associatedString);

} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-30T20:36:58.283

使用关联对象。这里有更详细的描述：[你的新朋友：Obj-C 关联对象](http://blog.andymatuschak.org/post/173646741/your-new-friends-obj-c-associated-objects)

要设置您使用的对象，请使用：

```
objc_setAssociatedObject(alert, &key, userCode, OBJC_ASSOCIATION_RETAIN); 
```

然后将其取回：

```
SOCode *userCode = objc_getAssociatedObject(alertView, &key); 
```

您还需要添加`static char key;`使其在 moth 方法的范围内。

## 更新

我已将其包装到`UIAlertView`. 您可以使用 Cocoapods 将其引入：

```
pod 'HCViews/UIAlertViewHCContext', '~> 1.2' 
```

源代码在这里：[https ://github.com/hypercrypt/HCViews/blob/master/Categories/UIAlertView%2BHCContext.h](https://github.com/hypercrypt/HCViews/blob/master/Categories/UIAlertView%2BHCContext.h)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-05T21:20:46.520

A lot of posts talk about the concepts behind associated objects (which is good!) but sometimes you just want to see the code. Here's a clean and quick category that you can either put in a separate file or above the interface of one of your existing `.m` files (you could even replace `UIAlertView` with `NSObject` and effectively add a `context` property to any object):

```
#import <objc/runtime.h>

@interface UIAlertView (Private)
@property (nonatomic, strong) id context;
@end

@implementation UIAlertView (Private)
@dynamic context;
-(void)setContext:(id)context {
    objc_setAssociatedObject(self, @selector(context), context, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}
-(id)context {
    return objc_getAssociatedObject(self, @selector(context));
}
@end 
```

And then you'll be able to do something like:

```
NSObject *myObject = [NSObject new];

UIAlertView *alertView = ...
alertView.context = myObject; 
```

**IMPORTANT:** And don't forget to nil the context in `dealloc`!!

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-30T20:44:45.377

`UIAlertView`是一个子类，`UIView`它有一个`tag`可以设置为整数的属性。不幸的是，如果您需要整数以外的东西来识别/将信息传递给委托，那么您将需要在委托本身上设置一些属性（或设置一个带有标签索引的数组）。Advaith 的方式可能会奏效，但在技术上不受 Apple 支持。

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"Are you sure?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK",nil];        
    [alert setAlertViewStyle:UIAlertViewStyleDefault];  
    alert.tag = SOMEINTEGER;
    [alert show]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T17:35:17.760

我怀疑最直接的方法是警报视图的委托类中的属性。警报视图没有“用户信息”的任何规定，也不支持子分类，这删除了唯一能想到的快捷方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T20:32:46.260

子类 UIAlertView，添加一个名为 userInfo 的属性，该属性具有您选择的类型。在创建 Subclassed UIAlertView 的实例时设置用户信息值，并从委托方法中检索它。（在那里您将获得包含 userInfo 的子类实例）

# java - HTML 表单帖子与 PHP 表单帖子

> ID：10387863
> 
> 赞同：1
> 
> 时间：2012-04-30T17:25:48.020
> 
> 标签：java, php, html

我目前必须将 HTML 表单发布到 Java 服务器，如（ www.example.com/file.do ）。Java 服务器只接受 HTML 请求。因此，每当我使用 html 文件发布请求时，它都可以正常工作。但是每当我从 php 发布它时它就不起作用（相同的 html 文件只需将扩展名更改为 php）。我也尝试通过使用 .htaccess 将 php 更改为 html 来使用 mod-rewrite，但没有任何反应仍然无法正常工作。所以我在想html表单帖子和php表单帖子有什么区别吗？或者有没有其他解决方案，所以我可以通过 php 将 html 表单发布到 java？

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:54:36.453

我认为您是从本地主机发布的。尝试从实时服务器发布。希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:29:21.700

技术上没有区别。

检查是否有一些特殊的http headers被你的服务器不接受，即

X-Powered-By 等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:30:15.587

要从 PHP 脚本创建 POST 请求，您需要使用[`curl`](http://php.net/curl); 但是要从*浏览器**提交表单*，所呈现的文件的扩展名是什么并不重要。

# jquery - 对 jQuery Uploadify 使用 Codeigniter 控制器/方法方法

> ID：10387868
> 
> 赞同：0
> 
> 时间：2012-04-30T17:26:05.220
> 
> 标签：jquery, codeigniter, plugins, file-upload, uploadify

是否有人知道如何将 Codeigniter 控制器/方法方法与 jQuery Uploadify 插件一起使用。

传统上（没有 Codeigniter），我们使用这个 JS 代码来上传文件（使用 Uploadify 版本 3）：

```
$(function(){
    $('#upload-input').uploadify({
        'swf':         'uploadify.swf',
        'uploader':    'uploadify.php'
    });
}); 
```

但就我而言，我希望文件成为类（例如：**profile**`uploader` ）的方法（例如：**upload** ） ，该方法以与我们相同的方式执行文件上传（在我的情况下是图像）.**`uploadify.php`**

 **我试过这个：

```
$(function(){
    $('#upload-input').uploadify({
        'swf':         'uploadify.swf',
        'uploader':    '<?= base_url() ?>profile/upload/'
    });
}); 
```

这向我显示了一个`HTTP Error (500)`上传框。

任何想法？

我的最终目标是在该方法中执行一些 GD 任务，例如图像大小调整和数据库更新。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:51:50.667

如果您在服务器端使用 POST 方法并启用了 CSRF 保护，您可能会返回错误 500。如果这是真的，您必须传递 csrf_token 的值。**

# web-services - 处理 web api 失败

> ID：10387871
> 
> 赞同：0
> 
> 时间：2012-04-30T17:26:16.550
> 
> 标签：web-services, api, http, httpwebrequest

如果我有一个 web api 服务（订单通知），它允许第三方客户端定期（每 10 分钟）打电话（他们必须打电话给我们，而不是使用推送给他们）并获得尚未收到的新订单，我该如何处理失败？

例如，客户自上次调用以来尚未收到 10 个新订单。客户调用我们的订单通知服务。我们检索尚未发送的订单（在本例中为 10 个）。我们将这 10 个订单更新为已发送并将响应返回给客户端。

但是客户端没有收到响应（有时在离开我们之后发生，例如 http 超时或其他）。

所以现在我们遇到了一个问题，我们已经将订单标记为已发送，但客户从未收到它们。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:28:40.420

只是一个想法，您能否为调用者分配某种标识符，当调用者成功时，它会回复说它已确认请求？除非客户端报告，否则服务器永远不会知道客户端是否发生了故障。

例如，当调用者 A 调用请求时，它可能会执行以下操作：

```
call -> http://server/requests 
```

服务器回复一些 xml，其中包含此调用者的结果集以及唯一标识符，它将跟踪以了解该特定调用是否有响应（您可以在合理的时间段后超时此标识符）

当客户端收到请求时，它可以再次回调

```
call -> http://server/requestComplete?id=[generatedID] 
```

并且服务器将其标记为成功。

许多 API 需要某种标识令牌，因此它已经很适合这种发送/确认消息传递系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:32:27.767

如果您可以访问系统的双方，您可以创建一个接收到的请求，这样一旦客户端接收到数据，它就会向原始主机发出请求，告知它已成功接收。

# jquery - getJSON Facebook 调用在 IE 中不起作用

> ID：10387874
> 
> 赞同：1
> 
> 时间：2012-04-30T17:26:31.243
> 
> 标签：jquery, facebook, internet-explorer, getjson

所以我试图在所有浏览器中提取一个 Facebook 提要，但不是 IE。

它提取提要并将其输出到主页中的 a。

有什么建议么？

```
 $.getJSON("https://graph.facebook.com/"+user+"/feed&limit="+limit+"?"+token+"", function(data) {
          for(emp in data.data) {
              console.log(data.data[emp]);
           //  If adding CSS style the DIVS below can change the P tags
              var newRow = "<div class=\"FB-post\">"+
              // note using the fuzzyFacebookTime to convert JSON time tag to readable time.
                              "<p><a href='https://www.facebook.com/pages/123456789/123456789' target='_blank'><img src='/123456789/images/facebook_logo_20x20.jpg' style='padding-right:10px;' /></a><small><i>Posted "+fuzzyFacebookTime(data.data[emp].updated_time.replace(/-/g,'/'))+"</i></small></p>"+
                              "<p>"+data.data[emp].message+"</p>"+
                              "<p class=\"FB-more-link\"><a href='https://www.facebook.com/pages/123456789/123456789' target='_blank'>click here to read more</a></p>"+
                           "</div>";
              $("#EmpNewTable").prepend(newRow);
          } 
      });

  }); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:28:32.490

`console`在 IE 中未定义删除该行

```
 console.log(data.data[emp]); 
```

你很高兴，或者你可以在登录前检查

```
if (typeof console != "undefined") {
     console.log(data.data[emp]);
} 
```

# ruby-on-rails - RoR 设计创建用户

> ID：10387876
> 
> 赞同：0
> 
> 时间：2012-04-30T17:26:59.267
> 
> 标签：ruby-on-rails, devise

我有 2 个表：联系人和用户（设计）。我想在每次创建联系人时创建一个用户。联系人belongs_to :user 用户has_one :contact

当您添加新联系人时，contact.rb 文件中的以下代码会创建用户：

```
before_create :create_user

protected
def create_user
  self.user = User.new({ :email => self.email, :password => '123456' })
  return user.save
end 
```

但是，联系人字段 user_id（外键）没有更新为新的用户 ID。怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:50:41.173

试试这个

```
def create_user
  self.user = User.create({ :email => self.email, :password => '123456' })
end 
```

我的猜测是关联没有被注册，因为在`User.new`调用之后对象还没有被保存到数据库中并且没有被分配一个 id 属性，而 id 属性是记录关联所必需的。`User.create`初始化对象并一步将其保存到数据库中（假设所有验证都通过）。

# php - 优化代码，将 27000*2 键从纯文本文件插入数据库

> ID：10387878
> 
> 赞同：0
> 
> 时间：2012-04-30T17:27:05.533
> 
> 标签：php, optimization, mysqli

我需要从纯文本文件中插入数据，将每行分解为 2 个部分，然后插入到数据库中。我就是这样做的，但是这个程序可以优化速度吗？

*该文件有大约 27000 行条目*
DB 结构 [唯一键 (ext,info)]

*   分机 [varchar]
*   信息 [varchar]

代码：

```
$string = file_get_contents('list.txt');  
$file_list=explode("\n",$string);  
$entry=0;  

$db = new mysqli('localhost', 'root', '', 'file_type');  
$sql = $db->prepare('INSERT INTO info (ext,info) VALUES(?, ?)');  

$j=count($file_list);  
for($i=0;$i<$j;$i++)  
{  
 $data=explode(' ',$file_list[$i],2);   
 $sql->bind_param('ss', $data[0], $data[1]);  
 $sql->execute();  
 $entry++;  
}   
$sql->close();  
echo $entry.' entry inserted !<hr>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:41:16.713

如果您确定该文件包含唯一的 ext/info 对，您可以尝试禁用导入密钥：

```
ALTER TABLE `info` DISABLE KEYS; 
```

导入后：

```
ALTER TABLE `info` ENABLE KEYS; 
```

这样，唯一索引将为所有记录重建一次，而不是每次插入某些内容时。

为了进一步提高速度，您应该将此文件的格式更改为与 CSV 兼容并使用 mysql [LOAD DATA](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)以避免解析 php.ini 中的每一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:44:25.870

当要插入多个项目时，您通常将所有数据放入 CSV 文件中，创建一个包含与 CSV 匹配的列的临时表，然后执行[LOAD DATA [LOCAL] INFILE](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)，然后将该数据移动到目标表中。但正如我所见，您不需要太多额外的处理，因此您甚至可以将输入文件视为 CSV，而不会遇到任何额外的麻烦。

```
$db->exec('CREATE TEMPORARY TABLE _tmp_info (ext VARCHAR(255), info VARCHAR(255))');
$db->exec("LOAD DATA LOCAL INFILE '{$filename}' INTO TABLE _tmp_info
           FIELDS TERMINATED BY ' '
           LINES TERMINATED BY '\n'"); // $filename = 'list.txt' in your case
$db->exec('INSERT INTO info (ext, info) SELECT t.ext, t.info FROM _tmp_info t'); 
```

之后您可以运行`COUNT(*)`临时表以显示那里有多少记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:31:44.493

这是神奇的解决方案 [3 秒 vs 240 秒]

**更改表`info`禁用键；**

```
$db->autocommit(FALSE);
//insert
$db->commit(); 
```

**更改表`info`启用键；**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T17:59:28.747

如果你可以使用像[Talend](http://uk.talend.com/index.php)这样的东西。这是一个 ETL 程序，简单且免费（有付费版本）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T17:45:55.530

如果您有一个要读取的大文件，我不会使用`file_get_contents`. 通过使用它，您可以强制解释器一次将全部内容存储在内存中，这有点浪费。

以下是摘自[此处](http://www.ibm.com/developerworks/library/os-php-readfiles/)的片段：

```
$file_handle = fopen("myfile", "r");
while (!feof($file_handle)) {
   $line = fgets($file_handle);
   echo $line;
}
fclose($file_handle); 
```

这是不同的，因为您在单个实例中及时将文件保存在内存中的是一行（不是文件的全部内容），在您的情况下，这可能会降低脚本的运行时内存占用. 在您的情况下，您可以使用相同的循环来执行您的 INSERT 操作。

# search-engine - 多个站点的单一搜索引擎（MediaWiki、JIRA 等）

> ID：10387886
> 
> 赞同：2
> 
> 时间：2012-04-30T17:27:38.900
> 
> 标签：search-engine, mediawiki

我有一个问题想讨论。我的公司正在开展一个项目，我们有 wiki (MediaWiki)、一个错误数据库 (JIRA) 和其他几个与项目相关的站点。所有网站都托管在同一个网络服务器上，问题是搜索一条信息（可能在这些网站中的任何一个中都可以找到）非常不舒服。如果重要的话，所有站点都从 linux 中的 apache 运行。

我想知道是否可以选择在内部集成谷歌（或任何其他质量搜索引擎），以便它将所有网站索引到一个搜索引擎中，以便所有员工都能够搜索一个搜索引擎并找到正确的参考（因为我们都在使用互联网时工作）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:33:02.603

看看 Solr

[http://lucene.apache.org/solr/](http://lucene.apache.org/solr/)

# java - 对需要在 Java EE 平台上进行 Ajax 身份验证的新项目的建议？

> ID：10387888
> 
> 赞同：0
> 
> 时间：2012-04-30T17:27:42.673
> 
> 标签：java, ajax, authentication

如果我开始一个新项目以在 Java EE 平台上执行，并且我希望能够进行用户友好的登录（比如在需要时弹出一个模式对话框以获取凭据，或者像 twitter 或 SO 这样的登录选项一直可用） ，实现它的最佳方法和工具是什么？

我发现改造使用安全约束的现有项目非常困难，所以我想知道如何让我的生活更轻松！

默认情况下，我希望使用 Dojo 作为我的 JavaScript 框架并部署到像 WebSphere 这样的 Java EE 应用服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:31:04.727

最好的方法和工具？

去寻找像 PrimeFaces 这样的 JSF 库！

检查[这个](http://www.primefaces.org/showcase/ui/dialogLogin.jsf)例子

IMO，这是制作富 Web 应用程序的最快和最简单的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:34:12.267

请参阅此处的第二个答案：[登录后自动登录到 JSF 应用程序重新访问](https://stackoverflow.com/questions/9810224/automatic-login-to-jsf-application-on-revisits-after-once-logged-in)

> 如果您使用的是 Spring Security 或 Apache Shiro，它们都通过适当的过滤器支持这一点。在后端，Spring Security 通过持久存储记住我的令牌来工作，我认为 Shiro 签署了一个哈希值。
> 
> 这是弹簧指南： [http ://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html)
> 
> 这是 shiro 指南： [http ://shiro.apache.org/java-authentication-guide.html](http://shiro.apache.org/java-authentication-guide.html)
> 
> 如果您使用的是 Java EE 安全性（请告诉我不是这样），除非您想设计客户登录过滤器，否则您将受限于您的容器可以支持的内容。客户过滤器可以使用 MAC 代码对 cookie 进行签名，并根据数据库对其进行验证。我不相信tomcat 7内置了这个，你可能需要检查GlassFish（它支持SSO，我认为它不支持记住我）。

# php - OOP（有益的用法）

> ID：10387889
> 
> 赞同：1
> 
> 时间：2012-04-30T17:27:52.753
> 
> 标签：php, oop

对于我关于**如何以有益的方式使用 OOP 的**问题，我假设一个 BASKET 作为一个例子，它的所有者（Tom）具有一定的地址（NY）可以添加文章（自行车，汽车）。最后打印一张包含所有这些信息的账单。

我的问题是：如何处理从多个对象收集所需的信息（这里：所有者、城市、物品数量）？因为我认为按照下面的方式手动执行此操作是愚蠢的（见 4.），不是吗？（由于现实中信息量的增加，甚至更多）

那么创建账单/收集此示例所需信息的“干净方式”是什么？

```
<?php
$a = new basket('Tom','NY');
$a->add_item("Bike",1.99);
$a->add_item("Car",2.99);

$b = new bill( $a );
$b->do_print(); 
```

1.

```
class basket {

    private $owner = "";
    private $addr = "";
    private $articles = array();

    function basket( $name, $city ) {
        // Constructor
        $this->owner = $name;
        $this->addr = new addresse( $city );

    }

    function add_item( $name, $price ) {
        $this->articles[] = new article( $name, $price );
    }

    function item_count() {
        return count($this->articles);
    }

    function get_owner() {
        return $this->owner;
    }

    function get_addr() {
        return $this->addr;
    }

} 
```

2.

```
class addresse {

    private $city;

    function addresse( $city ) {
        // Constructor
        $this->city = $city;
    }

    function get_city() {
        return $this->city;
    }

} 
```

3.

```
class article {

    private $name = "";
    private $price = "";

    function article( $n, $p ) {
        // Constructor
        $this->name = $n;
        $this->price = $p;
    }   

} 
```

4.

```
class bill {

    private $recipient = "";
    private $city = "";
    private $amount = "";

    function bill( $basket_object ) {

        $this->recipient = $basket_object->get_owner();
        $this->city = $basket_object->get_addr()->get_city();
        $this->amount = $basket_object->item_count();

    }

    function do_print () {
        echo "Bill for " . $this->recipient . " living in " . $this->city . " for a total of " . $this->amount . " Items.";
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:28:27.393

如果您执行[Tell Dont Ask](http://pragprog.com/articles/tell-dont-ask)，您确实会向您传递 BillRenderer 实例的账单添加一个渲染方法。Bill 然后会告诉 BillRenderer 如何渲染 Bill。这符合[InformationExpert 和高内聚原则](https://secure.wikimedia.org/wikipedia/en/wiki/GRASP_%28object-oriented_design%29)，这些原则建议在具有最多信息的对象上执行任务的方法。

```
class Bill
{
    …
    public function renderAs(BillRenderer $billRenderer)
    {
        $billRenderer->setRecipient($this->owner);
        $billRenderer->setAddress($this->address);
        …
        return $billRenderer->render();
    }
} 
```

BillRenderer（一个接口）然后会知道输出格式，例如，你会为 PlainText 或 HTML 或 PDF 编写具体的渲染器：

```
class TxtBillRenderer implements BillRenderer
{
    …
    public function render()
    {
        return sprintf('Invoice for %s, %s', $this->name, $this->address);
    }
}

echo $bill->renderAs(new TxtBillRenderer); 
```

如果您的 Bill 包含其他对象，那么这些对象也将实现 renderAs 方法。然后，Bill 会将渲染器向下传递给这些对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:38:17.883

篮子和账单都可能与仓位项目相关 - 一个表示零个或多个项目的有序列表的对象，其中包含计数和价格。

由于这样的列表是它自己的对象，因此很容易传递：

```
$bill = new Bill($buyer, $address, $basket->getPositions()); 
```

但是账单的打印应该由 来完成`BillPrinter`，因为打印本身不是账单的工作：

```
$billPrinter = new BillPrinter($bill, $printerDevice);
$billPrinter->print(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T05:02:24.390

首先，在 PHP5 中的构造函数吧`public function __construct()`。你在那里使用的是 PHP4 方式。然后你的代码还有其他问题：

*   而不是将城市**名称**`Basket`传递给（您的意思是`Cart`？），您应该创建地址对象实例并传递它。
*   不要根据名称和金额添加项目到篮子，而是添加项目的整个实例，否则在切换站点语言或货币时会遇到很多问题。
*   `Articles`（你的意思是`Items`？）应该基于 ID 创建，而不是基于名称。原因与上述相同+您将遇到唯一性问题。然后一些项目可能有更低的价格，当组合购买时。您需要一种安全识别它们的方法。

至于清理那里的代码：

*   您应该停止从构造函数中的给定参数创建实例。虽然这并不总是一件坏事，但在你的情况下，你在那里弄得一团糟。
*   `Bill`不应对印刷本身负责。

就像是 ：

```
class Basket
{
    // -- other code 

    public function handleInvoice( Bill $invoice )
    {
        $invoice->chargeFor( $this->items );
        $invoice->chargeTo( $this->account );
        return $invoice->process();
    }
} 
```

..然后将其用作

```
$cart = new Basket(..);
// some operation with it

$invoice = new Bill;
$cart->handleInvoice($invoice);

$printer = new PDFPrinter;
// OR new JpegPrinter; OR new FakePrinter OR anything else
$printer->print( $invoice ); 
```

这会给你一个`Bill`类外的实例，然后你可以打印或发送给某人。

此外，您可能会从观看柳树讲座中受益：

*   [继承、多态性和测试](http://www.youtube.com/watch?v=4F72VULWFvc)
*   [不要找东西！](http://www.youtube.com/watch?v=RlfLCWKxHJ0)
*   [清洁代码 I：参数](http://vimeo.com/13439458)

# php - 抽象类中定义的函数不会返回变量的值

> ID：10387891
> 
> 赞同：0
> 
> 时间：2012-04-30T17:28:05.610
> 
> 标签：php, inheritance, abstract-class, instance

如何通过抽象类中定义的函数获取在扩展它的类的实例中更改的抽象类中定义的变量的值？以下代码应该有助于说明我的问题：

抽象类：

```
abstract class Kontroler {
    private $pogled;
    function __construct(){
    }
    public function pogled(){
        return $this->pogled;
    }
    abstract function defolt();
} 
```

扩展类`Kontroler`：

```
class E404 extends Kontroler{
    function __construct (){
    }
    function defolt(){
        $this->pogled = 'aplikacija/viewsi/404/404.v.htm';
    }
} 
```

我的问题是我更改了类`$pogled`实例内部的值`E404`，但是当我调用`$instanceOfE404->pogled();`PHP 时返回 null 值，这是`$pogled`在抽象类中定义的值。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T17:29:51.727

*父级中的私有*将在父级中保持私有-子类看不到它。创建一个 getter 函数或使其受到保护。

请参阅[可见性^(*文档*)](http://php.net/manual/language.oop5.visibility.php)。

# python - 跟进：从python执行.sql文件

> ID：10387892
> 
> 赞同：10
> 
> 时间：2012-04-30T17:28:06.677
> 
> 标签：python, sql, sql-server, pyodbc, python-db-api

一年多以前，有人问过这个问题：[Execute .sql files that are used to run in SQL Management Studio in python](https://stackoverflow.com/questions/5174269/execute-sql-files-that-are-used-to-run-in-sql-management-studio-in-python)。

我正在用 python 编写一个脚本，该脚本连接到 SQL 服务器，并基于大型（几 GB）.sql 文件中的 SQL 命令创建和填充数据库。

看起来 SQLCMD 需要下载并安装 SQL Server Express。是否有其他方法可以从 python 执行 .sql 文件，而无需使用我的脚本的每个人都下载和安装 SQL Server？pyodbc 有这个能力吗？

**编辑：**

这是另一个类似的问题： [execute *.sql file with python MySQLdb](https://stackoverflow.com/questions/4408714/execute-sql-file-with-python-mysqldb)

在这里，同样，解决方案是从命令（在本例中为 mysql.exe）调用实用程序，并将文件列为参数。

在我看来，应该有一种方法可以使用 Python 的 DB API 库之一来执行此操作，但我还没有找到它，所以我正在寻找可以用来运行该文件的 SQLCMD 或 MYSQL 之类的 *.exe从命令行。

PS如果我看的不正确，请随时纠正我。也许下面的代码与从命令行运行一样高效：

```
for line in open('query.sql','r'):
    cursor.execute(line) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-09T16:36:45.897

我发现在 python 中读取文件并使用 pyodbc 批量执行实际上比在外部使用 SQLCMD 实用程序更快（而且我不必在运行脚本的每台计算机上安装 SQLCMD！）。

这是我使用的代码（因为 pyodbc 似乎没有`executescript()`方法）：

```
with open(scriptPath, 'r') as inp:
    for line in inp:
        if line == 'GO\n':
            c.execute(sqlQuery)
            sqlQuery = ''
        elif 'PRINT' in line:
            disp = line.split("'")[1]
            print(disp, '\r')
        else:
            sqlQuery = sqlQuery + line
inp.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:26:59.990

不确定这是否是您要问的，但为什么不直接从 Python 使用 MS SQL？有像 pymssql 这样的库可以让你做到这一点。或者您可以使用 ODBC。

有关Python MS SQL 驱动程序的列表，请参阅[http://wiki.python.org/moin/SQL%20Server](http://wiki.python.org/moin/SQL%20Server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:17:19.310

SQLCMD 和其他管理实用程序可免费下载。它们是 Microsoft 所称的“SQL Server 功能包”的一部分。

我了解您想要进行大批量导入。为此，您可能需要查看 BCP 实用程序。下载[http://www.microsoft.com/en-us/download/details.aspx?id=16978](http://www.microsoft.com/en-us/download/details.aspx?id=16978)

使用 SQL，您还可以执行 BULK INSERT。此命令可以将文件中的数据插入 SQL 数据库。

另一种方法当然是使用 SQL Server Integration Services 来处理纯 ETL 作业。

# python - 无法在 Ubuntu 上使用 OpenCV 和 Python 捕获视频

> ID：10387894
> 
> 赞同：0
> 
> 时间：2012-04-30T17:28:13.500
> 
> 标签：python, ubuntu, opencv, webcam, video-capture

我正在尝试编写一个简单的 python 脚本来使用 OpenCV 从网络摄像头捕获图像。这是在 Ubuntu 11.10 32 位上运行的。

当我在终端运行 lsusb 时，我得到：

> > 总线 002 设备 002：ID 045e:00f7 Microsoft Corp. LifeCam VX-1000

这让我相信相机的驱动程序已安装

在 python shell 中我输入： capture=cv.CaptureFromCAM(0) # 也试过 -1, 1, 2, 3

但捕获始终为空。

我也试过： capture = cv.CreateCameraCapture(0)

但我得到相同的结果。

将不胜感激任何帮助

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T21:09:36.807

仅仅探测驱动程序并不能验证相机是否可以工作。

这是一个关于使用 vlc 测试相机的[ubuntu 支持页面](https://help.ubuntu.com/community/Webcam)

基本上你应该尝试类似的东西：

```
$ vlc v4l2:///dev/video0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:07:02.960

我不认为 OpenCV 支持这个相机。

OpenCV 有一个[兼容性列表](http://opencv.willowgarage.com/wiki/Welcome/OS)，检查你的是否在那里。

# wpf - 检测组合键

> ID：10387897
> 
> 赞同：7
> 
> 时间：2012-04-30T17:28:26.667
> 
> 标签：wpf, keyboard-input

我想检测何时在 WPF 应用程序中按下 Ctrl-C 之类的组合。我在网上读到的内容是在 KeyDown（或 KeyUp）事件中使用类似以下内容：

```
if ((Keyboard.Modifiers == ModifierKeys.Control) && (e.Key == Key.S))
{
    MessageBox.Show("Save!");
} 
```

我只是想了解这是如何工作的。据我了解， e.Key 包含触发事件的按下键， Keyboard.Modifiers 包含有关 Control 键状态的信息**now**。假设在处理 KeyDown 事件时 Control 键仍处于关闭状态是否安全？

例如，我重新启动 Firefox，它加载了一堆标签，同时我在我的应用程序中按了 Ctrl-S。到达 KeyDown 有延迟，应用程序认为只有 S 被按下。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T17:51:07.557

您可以改用[`KeyBindings`](http://msdn.microsoft.com/en-us/library/system.windows.input.keybinding.aspx)它们，它们定义完整的手势而没有这种分离。

# delphi - 添加一个空白行，然后使用 Delphi/DataSnap/dbExpress 中的对话框进行填充

> ID：10387898
> 
> 赞同：0
> 
> 时间：2012-04-30T17:28:30.527
> 
> 标签：delphi, datasnap, dbexpress

我计划创建一个对话框，该对话框将在 Firebird 数据库中创建一条空白记录，然后使用从该对话框中的文本编辑框中获取的值填充字段。

我正在使用以下内容：dbExpress DataSnap Delphi XE2

也许它应该是这样的：

```
DataSource.DataSet.Append;
(call the dialog with the db text boxes pointing to DataSource)
if ModalResult = mrOK then
    DataSource.DataSet.Post; 
```

有任何想法吗？我想知道要使用哪些组件（ClientDataSet、SQLQuery 或 SQLDataSet）。我不知道该怎么做。

编辑：代码格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:59:51.037

换句话说，您想创建一个带有非数据感知控件的对话框。为此，您需要三个 TSQLQueries：一个用于在进入对话框时检索数据（在编辑数据的情况下），一个用于插入，一个用于更新。

这是我前几天写的这样一个对话框中的一些（编辑过的）代码。参数'n'是要编辑的元组的id；如果我要插入一条新记录，它的值为 -1。

```
Function TEditCashbox.Execute (n: longint): boolean;
var
 q: TSqlQuery;

begin
 if n = -1 then
  begin
   edDate.Text:= datetostr (date);
   edAmount.text:= '0';
  end
 else with qGetCashbox do
  begin
   params[0].asinteger:= n;
   open;
   edDate.text:= fieldbyname ('curdate').asstring;
   edAmount.text:= fieldbyname ('amount').asstring;
   edDetails.text:= fieldbyname ('details').asstring;
   close
  end;

 if showmodal = mrOK then
  begin
   if n = -1 then
    begin
     q:= qInsertCashbox;
     q.ParamByName ('p0').asinteger:= dm.GenerateID ('cashbox')
    end
   else
    begin
     q:= qUpdateCashbox;
     q.ParamByName ('p0').asinteger:= n
    end;

  with q do
   begin
    parambyname ('p1').asdate:= strtodate (edDate.text);
    parambyname ('p2').asinteger:= strtoint (edAmount.Text);
    parambyname ('p3').asstring:= edDetails.text;
    execsql
   end;
  end
end. 
```

qGetCashbox 是一个查询，定义为 select curdate, amount, details from cashbox where id = :p1

qInsertCashbox 被插入到钱箱（id，curdate，amount，details）值（：p0，：p1，：p2，：p3）

qUpdateCashbox 是更新钱箱设置 curdate = :p1, amount = :p2, details = :p3 where id = :p0

当然，您也可以使用需要“三位一体”的数据感知组件 - TSQLDataSet、TDataSetProvider 和 TClientDataSet。使用数据感知组件更容易，但有时这种方法并不适合。如果您确实使用数据感知组件，那么我的模板代码如下

```
sdsEditDeposit.params[0].AsInteger:= n;   // this is the TSQLDataSet
with qEditDeposit do    // this is the clientdataset
 begin
  open;
  if n = -1 then        // new tuple
   begin
    insert;
    fieldbyname ('amount').asinteger:= 0;
    fieldbyname ('curdate').asdatetime:= date;
   end;

  edit;
  if showmodal = mrOK then
   begin
    if n = -1 then 
     begin
      n:= dm.GenerateID;
      fieldbyname ('id').asinteger:= n;
     end;
    result:= n;
    post;
    applyupdates (0)
   end
  else
   begin
    cancel;
    result:= 0
   end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:34:03.087

您可能还希望允许取消...

```
DataSource.DataSet.Append;
(call the dialog with the db text boxes pointing to DataSource)
if ModalResult = mrOK then
    DataSource.DataSet.Post
else 
    Datasource.Dataset.cancel; 
```

我将 TADOQuery 组件与 MS-SQL 一起使用，它工作可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:36:14.377

您需要为您的数据库配置一个 TSQLConnection 和（为了方便起见）一个 TSQLTable。将 TSQLTable 链接到 TSQLConnection 并在 TableName 属性中选择所需的表。接下来将 TDataSetProvider 拖放到表单上并将其与 TSQLTable 连接。现在获取一个 TClientDataSet，将其 Provider 设置为 TDataSetProvider 并将 DataSource 连接到 TClientDataSet。

请记住：要将数据实际写入数据库，您必须调用 TClientDataSet.ApplyUpdates。

更多信息[在这里](http://docwiki.embarcadero.com/RADStudio/XE2/en/Tutorial%3a_Using_dbExpress_to_View_and_Update_Databases_in_an_Application)

# jquery - 如何在折叠的手风琴中创建指向项目的链接？

> ID：10387904
> 
> 赞同：1
> 
> 时间：2012-04-30T17:28:52.207
> 
> 标签：jquery, hyperlink, jquery-ui-accordion

尝试创建指向包含折叠折叠项的页面的链接，每个折叠项由 div ID 号标识。

通过向我的链接添加参数来链接和打开特定项目的失败尝试如下所示：

```
sample.html#itemIdX  // opens to the page but not the item

sample.html?itemIdX  // same result 
```

这些项目使用一个`H3`类：

```
itemPreviewTitle accordionHeader ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false" aria-selected="false" tabindex="-1" style="zoom: 1; 
```

如何创建使我的 itemX 具有展开状态的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:22:21.230

事实证明这比看起来要复杂一些，因为[Accordion API 文档](http://docs.jquery.com/UI/Accordion)并不是那么容易理解，而且该`activate()`功能似乎不像宣传的那样工作。

从您的问题来看，听起来您想通过引用 div ID 打开手风琴部分。这不可能开箱即用。您只能使用从 0 开始的索引来识别部分（例如，0 = 第一部分，1 = 第二部分等）。

话虽如此，这种方法将起作用：

像这样定义链接：

```
<a href="10387904_Accordion_link_2.html?openAccordionId=0">Open first item</a>
<a href="10387904_Accordion_link_2.html?openAccordionId=1">Open second item</a>
<a href="10387904_Accordion_link_2.html?openAccordionId=2">Open third item</a> 
```

在包含手风琴的页面上，使用以下代码从查询字符串中提取 ID，并在激活相关部分的情况下初始化手风琴：

```
// Using the parseQueryString extension from
// http://paulgueller.com/2011/04/26/parse-the-querystring-with-jquery/
$.extend({
    parseQuerystring: function () {
        var nvpair = {};
        var qs = window.location.search.replace('?', '');
        var pairs = qs.split('&');
        $.each(pairs, function (i, v) {
            var pair = v.split('=');
            nvpair[pair[0]] = pair[1];
        });
        return nvpair;
    }
});

// Get the index of the section we want to open from the querystring.
var openAccordionId = parseInt($.parseQuerystring()["openAccordionId"]);

// Initialise the accordion with the active section defined.
var accordion = $("#accordion").accordion({ active: openAccordionId });

// Note: for some reason, the following does not work:
//  var accordion = $("#accordion").accordion();
//  accordion.activate(openAccordionId); 
```

# scala - Scala - 获取另一个堆栈的内容（不是地址）

> ID：10387907
> 
> 赞同：1
> 
> 时间：2012-04-30T17:29:12.223
> 
> 标签：scala, stack

如果我有一个使用可变 scala 堆栈集合的堆栈，有没有办法可以复制堆栈，以便我可以通过弹出它来分析它的元素而不改变原始堆栈？例如，假设我有一个堆栈和代码如下：

```
import scala.collection.mutable.Stack
var stack1 = new Stack[Int]
/** Code that pushes integers on stack1*/
var stackCopy = stack1
while (!stackCopy.isEmpty) {
    println(stackCopy.pop)
} 
```

我想使用一个while循环来打印stack1中的所有元素。但是当我制作一个副本并弹出该副本时，原始堆栈（即stack1）也被更改了。我想保留原始堆栈，那么我怎样才能获取内容，而不是地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:54:32.857

您可以用于理解：

```
for( i <- stack1 ) { println(i) } 
```

或简单地调用该`foreach`方法：

```
stack1 foreach println 
```

如果您坚持使用`while`循环，您可以先将其转换为列表：

```
var is = stack1.toList
while( is.nonEmpty ) {
  println( is.head )
  is = is.tail
} 
```

使用所有这些方法，原始堆栈将被保留。

# java - Tomcat调用Windows bat文件的某处是否有1000个字符的限制？

> ID：10387908
> 
> 赞同：0
> 
> 时间：2012-04-30T17:29:13.337
> 
> 标签：java, windows, tomcat, batch-file

我有一个 Tomcat servlet，它通过 java 的 ProcessBuilder 调用 Windows BAT 文件。似乎如果我在 BAT 文件中的命令上有超过 1000 个字符，则该过程将失败，并从 ProcessBuilder 返回代码 128。

这很奇怪 - 我可以编辑 BAT 文件并在有问题的命令中放置几个​​空格并导致错误......或者我可以删除空格并且一切运行干净。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:33:26.123

您超出 shell 的命令名称限制的可能性要大得多。

在 BAT 文件中，CMD.EXE 程序正在读取行，而不是 Tomcat。Tomcat 负责启动 CMD.EXE 进程（使用提供的 BAT 文件参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:34:04.333

不是java的tomcat的限制。这是Windows的限制。顺便说一句，即使是 Unix 系统也有这种限制，只是它通常要大得多。

所以，要解决这个问题，不要创建这么长的命令行。如果您无法修改您的 bat 文件，请创建其他运行您的不可修改文件的批处理文件。第二个 bat 文件可以在运行时在用户 temp 下的某处动态创建。然后您可以运行它并在不再需要它时将其删除。

# mysql - MySQL - 索引优化 - 与游戏相关的用户

> ID：10387914
> 
> 赞同：0
> 
> 时间：2012-04-30T17:29:48.530
> 
> 标签：mysql, optimization, indexing

我有一个名为游戏的表（由 int 唯一）。

我有一个名为 members 的表（按用户名唯一）。

在每场比赛中，一次最多可以有 6 名成员参与。

但是，成员可以退出游戏 - 但我仍然需要记录他们参与该游戏的记录。

我需要做以下单独的搜索：

1.  会员的活跃游戏。

2.  为会员退出游戏。

3.  在游戏中搜索一个空位（即没有由成员填充的位置）。

最好的表结构是什么？我应该为会员输入一个文本字段，其中包含所有已退出游戏的列表，并用逗号分隔？（我可以看到的一个问题是我最终将需要这些游戏的游戏信息，因此我随后需要在游戏表上为这些游戏编号中的每一个进行单独搜索。这对于服务器来说似乎真的很慢。 )

在游戏中，我是​​否应该有 6 个文本字段，例如 SLOT1、SLOT2 等以及当前玩家的用户名？但同样，辞职的成员呢？

现在我的问题的主要部分（这引起了上面的所有混乱）：

我将如何在我的表上设置我的索引？

当我进行搜索时，我会在游戏中查看 SLOTS1 等，看看是否有任何与玩家用户名匹配的内容。所以这是一个 6 次 ORed 搜索。我该怎么做才能针对这些操作优化数据库上的索引？

那么根据我对每场比赛的退会成员怎么做，那我该怎么做索引呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:01:05.343

使用交叉引用表。这是一个包含三列的表，`game`（table 的外键`games`）、`user`（table 的外键`users`）和`player_number`（1 到 6 之间的可空整数，表示玩家占据了哪个“座位”；null 表示球员辞职）。（这取决于你的游戏是如何运作的，以及你希望东西如何组合在一起，但主要的是你有外键`games`和`users`。）

上述建议中的主键将是`(game, user, player_number)`或`(user, game, player_number)`在您方便时。

像这样搜索交叉引用表比进行涉及六列 ORing 的查询要容易得多（对您和您的数据库而言）。

`users`正如@Jermin Bazazian 所建议的那样，切换到表的整数主键可能是一个好主意。

# c++ - 如何以预定的时间间隔更新 GUI，同时仍进行非 GUI 工作？

> ID：10387919
> 
> 赞同：0
> 
> 时间：2012-04-30T17:30:04.307
> 
> 标签：c++, qt

基本上，我正在做一些图像处理并在 QLabel 中使用 QImage 来显示视频序列中的当前帧。假设我想以 30 fps 将 QImage 更新到下一帧（或者如果某些处理没有在 30 fps 间隔内完成，请等到它完成），但我不希望整个程序在 30 fps 期间停止.

所以流量是...

```
if (done_some_work && 30fps_interval_has_passed)
{
   updateQImage();
} 
```

这是如何在 Qt 中完成的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:37:55.340

并使用[QTimer](http://qt-project.org/doc/qt-4.8/qtimer.html#interval-prop)每 1000/30 毫秒发送一个信号重绘帧

```
myTimer= new QTimer(this);
myTimer->setInterval(1000/fps); // ms
connect(myTimer, SIGNAL(timeout()), this, SLOT(doNextFrame())); 

// where
public slots:
    virtual void doNextFrame() {repaint();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:36:17.343

评论是正确的，您应该在另一个线程中完成您的工作，然后在您想要直观地更新某些内容时发出您想要更新 UI 线程的信号。不要在 UI 线程上进行处理工作，否则您的 GUI 将无响应。这与其说是一个 QT 问题，不如说是一个 GUI 问题。

# c++ - 为什么在达到容量后在向量中进行插入时，C++ 不处理迭代器？

> ID：10387923
> 
> 赞同：5
> 
> 时间：2012-04-30T17:30:25.907
> 
> 标签：c++, vector, iterator

我写这个小代码只是为了看看迭代器实际上是如何失效的，并且在达到其容量后不指向向量的更改位置。

这里向量和容量的大小最初都是 5 。之后，我在 vector 中插入了一些其他元素，并且没有重新初始化我的迭代器以指向`myvector.begin()`. 再次打印矢量元素后，这会导致`49`我的输出中出现垃圾值。`maximum size of vector is : 1073741823`

`myvector.begin()`我的问题是为什么 C++在所有元素都复制到新位置后不会再次使点迭代器有效？
这也可能导致一些难以调试的行为。我知道一种安全的工作方式是始终在使用迭代器之前重新初始化它。

```
 #include<iostream>
  #include<vector>
  #include<stdio.h>

  using namespace std;

  int main()
  {
    vector<int> myvector;
    vector<int>::iterator it;
    int myarray[]= {100,200,300,400};
    myvector.insert(it,500);
    it=myvector.begin();
    myvector.insert(it,myarray,myarray+4);
    it=myvector.begin();
    for(;it!=myvector.end();++it)
    cout <<*it<<endl;
    cout <<"size of vector is :" << myvector.size() <<"\n"; 
    cout <<"capacity of vector is : " << myvector.capacity()<<"\n";  
    cout <<"maximum size of vector is : " << myvector.max_size()<<"\n"; 
    myvector.push_back(600);
    for(;it!=myvector.end();++it)
    cout <<*it<<endl;
  }
  Output of program :-
  100
  200
  300
  400
  500
  size of vector is :5
  capacity of vector is : 5
  maximum size of vector is : 1073741823
  49
  100
  200
  300
  400
  500
  600 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T17:32:55.447

因为这是不切实际的，而且可能是不可能的。

向量是否应该保留**所有**迭代器的列表，并且一旦调用无效触发方法，它们就会修改**所有迭代器？**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T17:34:37.507

迭代器没有以任何有意义的方式与向量绑定（如果是，它如何实现为指针？）。向量不知道迭代器。不使用无效的迭代器是你的工作。

因此，您建议为向量类添加大量复杂性……究竟是什么目的？在我们知道做这样的事情是个坏主意的现实世界中，这如何解决问题？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T17:34:26.020

大概是因为向量必须跟踪所有迭代器的列表，并在它们变得无效时通知它们。这将引入相当多的开销。STL 容器的操作都有非常明确的失效规则，你只需作为程序员遵循它们。

请注意，根据标准，您不能依赖向量迭代器在插入或删除后完全有效。在调整大小之前它仍然对您有用，这是一个实现细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T20:29:52.160

STL 没有尝试实现所有可能的容器。虽然您的容器设计当然是可能的，但它只是不包括在内。`std::vector<T>`看起来很相似，但它试图成为一个比`T[]`几乎没有开销的更好的数组。该目标与您的目标不直接兼容。

幸运的是，STL 设计是模块化的，因此即使您确实编写了自己的容器来执行此操作，您仍然可以重用所有 STL 算法以及与 STL 兼容的算法（例如那些在 boost 中的算法）。

# playframework - Play Mini 的 REST 如何支持参数？

> ID：10387924
> 
> 赞同：1
> 
> 时间：2012-04-30T17:30:27.623
> 
> 标签：playframework, akka, play2-mini

我正在使用 Akka 和 Play Mini（它只是 Netty 之上的一个 REST 层）。我正在从 Java 中使用它。语法很简单，在 GitHub 上的自述文件中有介绍：

```
 @URL("/coco/*/name/*") 
```

这工作正常，但意味着所有 URL 都必须是长路径。我发现[这个线程](https://stackoverflow.com/questions/207477/restful-url-design-for-search)有一些人声称参数是禁止的，而另一些人则说他们绝对不是。我希望戏剧文档刚刚表明了他们的立场，但是，唉。我正在寻找支持以下格式的 url 的能力：

```
 /search/query=dogs 
```

也许常规的 Play 文档解决了这个问题。会继续找。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:38:48.667

也许这会帮助其他人。

```
@URL("/hello/*\\?*")
public static Result show() {
    Map<String, String[]> queryString = request().queryString();

    Map<String, String> data = new HashMap<String, String>();
    for (String key : queryString.keySet()) {
        for (String value : queryString.get(key)) {
            data.put(key, value);
        }
    }
    response().setContentType("text/html");
    return ok(data.toString());
} 
```

如果你测试：`curl "http://localhost:9000/hello/test?param1=0&param2=yes"`

结果将是：

```
test{param1=0, param2=yes} 
```

# sql - 随时间变化的字段值并查询它们

> ID：10387926
> 
> 赞同：1
> 
> 时间：2012-04-30T17:30:33.933
> 
> 标签：sql, date

想象一下，您有一个网站，其中列出了可用的酒店房间及其价格。酒店业主为每个房间设定了每天的价格 - 它只需要像“1999 年 1 月 1 日花费 100 美元”而不是“1999 年 1 月 1 日花费 50 美元，2000 年 1 月 1 日花费 100 美元”一样复杂。粒度仅限于日费率。

在数据库中表示这一点的最有效方式（就查询房间时的负载而言）是什么？对于每个房间，有一个单独的表格，其中包含一个日期字段和一个价格字段？即每个房间 365 个条目。

我看到了解决这个问题的方法，但是当用户希望执行诸如“8 月 7 天，预算为 500 美元”之类的查询时，问题会变得稍微复杂一些。这是我非常想实现的功能。

用户界面将允许业主将房价设置为时间段而不是单个天价——例如，如果 1 月至 6 月的房价为 50 美元，7 月至 12 月的房价为 100 美元，那么这是两个价格段。显然，如果需要，可以将其转换为 365 个日期类型字段，但使用两个日期范围类型字段的解决方案会更可取。

任何关于我可以在哪里学习技术的指针都将不胜感激。我搜索了谷歌并找到了有关日历表的信息，但任何其他提示或信息将不胜感激。

从历史上看，我使用过 MySQL，但任何事情都会被考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:07:16.713

在 Ralph Kimball 的术语中，这被称为缓慢变化的维度。

我建议你看看其中一本书。最新版本的“数据仓库工具包”应该很好地涵盖了这个主题。

# php - 使用 JQuery、AJAX 和 PHP

> ID：10387929
> 
> 赞同：3
> 
> 时间：2012-04-30T17:30:35.710
> 
> 标签：php, javascript, ajax, jquery

我正在创建一个 PHP 站点并遇到了以下问题，我希望能够单击页面上的超链接，将小数据项发送到 php 脚本，让脚本执行其功能，然后返回结果。

我在这个网站上使用 AJAX 让每个页面加载到网站的 div 部分，所有页面、数据和响应都加载到这个中央 div 中，如下所示：

```
<html>
    <body>
        <div id="topMenuBar">
            <div id="contents">
            //ALL DATA IS LOADED HERE...//
            </div>
        </div>
    </body>
</html> 
```

因此，当从顶部菜单中选择一个页面时，我只需运行以下代码：

```
$('#topMenuBar a').click(function(e)
{
    e.preventDefault();
    $('#contents').load($(this).attr('href'), function()
    {
    });
}); 
```

现在页面加载到内容部分，我正在加载一个名为“results.php”的页面，该页面连接到数据库，查询它，并创建一个带有结果的 HTML 表。每个表格行都有一个小的超链接，单击该超链接时，旨在将一个值发送到另一个 PHP 脚本，然后清除内容 div，然后使用来自该脚本 (getInfo.php) 的响应重新填充 div。例如，一行将有以下 PHP 代码生成一个链接：

```
<label class="moreInfo"><a name="test01" onClick="getInfoFromPHP(<?php echo $data[$id]; ?> )">Get Info</a></label> 
```

所以当PHP生成表格时，点击链接时会传递一个JS函数的值。

我现在需要做的是将值发送到 PHP 脚本，该脚本将再次查询数据库，并将结果插入“内容”div。我一直在尝试以下功能。

```
function getInfoFromPHP(myVar){
    var netID = myVar;
    $.ajax({
        url: "getInfo.php",
        type: "POST",     
        data: { 
            networkID: netID
        }, 
        success: function(html) {
            $('#contents').empty();
            $('#contents').load(html);
        }      
    });
}; 
```

当我调用该函数时，它似乎确实将数据发送到脚本，但我从 firebug 收到以下错误：

> POST [http://127.0.0.1/private/networks/includes/leave_a_network.php](http://127.0.0.1/private/networks/includes/leave_a_network.php) - 200 OK -15ms
> GET [http://127.0.0.1/%3Ch2%3EHello](http://127.0.0.1/%3Ch2%3EHello) 403 Forbidden 21ms "NetworkError: 403 Forbidden - [http://127.0 .0.1/%3Ch2%3E](http://127.0.0.1/%3Ch2%3EHello)你好"你好

PHP 脚本仅执行以下操作：

```
<?php
    session_start();
    $networkID = $_POST['networkID'];
    echo "<h2>Hello World</h2>";
?> 
```

将数据发送到 PHP 脚本并将其加载到 div 中的最佳方法是什么？

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T17:37:45.200

在成功函数中，放入 $('#contents').html(html); 而不是负载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T17:38:09.040

```
success: function(html) { 
```

正在将 html 作为字符串返回，不需要像您在此处尝试那样再次“加载”-

```
$('#contents').load(html); 
```

将该行更改为此

```
$('#contents').html(html); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T17:35:11.973

更好的方法是使用 $.ajax 发送请求。在成功回调中，您可以分析结果，然后执行您想要的操作：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - Java ComboBox 不同的值来命名

> ID：10387932
> 
> 赞同：6
> 
> 时间：2012-04-30T17:30:37.967
> 
> 标签：java, swing, combobox, jcombobox

我有一个 Java 组合框和一个链接到 SQLite 数据库的项目。如果我有一个具有关联 ID 和名称的对象：

```
class Employee {
    public String name;
    public int id;
} 
```

将这些条目放入 JComboBox 以便用户看到员工姓名的最佳方法是什么，但我可以在这样做时检索员工 ID：

```
selEmployee.getSelectedItem(); 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T17:39:10.793

第一种方法：`toString()`在Employee类上实现，并使其返回名称。使您的组合框模型包含 Employee 的实例。从组合中获取选定对象时，您将获得一个 Employee 实例，因此您可以获得它的 ID。

第二种方法：如果`toString()`返回名称以外的内容（例如调试信息），请执行与上述相同的操作，但另外为您的组合设置自定义单元格渲染器。此单元格渲染器必须将值转换为 Employee，并将标签的文本设置为员工的姓名。

```
public class EmployeeRenderer extends DefaulListCellRenderer {
    @Override
    public Component getListCellRendererComponent(JList<?> list,
                                                  Object value,
                                                  int index,
                                                  boolean isSelected,
                                                  boolean cellHasFocus) {
        super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
        setText(((Employee) value).getName());
        return this;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T17:38:06.603

将员工对象添加到 JComboBox 并覆盖员工类的 toString 方法以返回员工姓名。

```
Employee emp=new Employee("Name Goes here");
comboBox.addItem(emp);
comboBox.getSelectedItem().getID();
...
public Employee()  {
  private String name;
  private int id;
  public Employee(String name){
      this.name=name;
  }
  public int getID(){
      return id;
  }
  public String toString(){
      return name;
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-10T13:40:49.357

我认为**最好和最简单**的方法是在使用`HashMap`ResultSet 填充 JComboBox 时使用类似的方法

```
HashMap<Integer, Integer> IDHolder= new HashMap<>();

int a=0;
while(rs.next())
{
    comboBox.addItem(rs.getString(2)); //Name Column Value
    IDHolder.put(a, rs.getInt(1)); //ID Column Value
    a++;
} 
```

现在，每当您想获取任何选定组合框项目的 id 的 id 时，您只需简单地这样做

```
int Id = IDHolder.get(comboBox.getSelectedIndex()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T17:37:12.890

您可以创建您的自定义`DefaultComboBoxModel`. 在你的情况下创建你的数据向量`Vector<Employee> empVec`。您还需要重写该`getSelectedItem()`方法并使用`getSelectedIndex()`来从向量中检索值。

# javascript - Bootstrap/jQuery 模式无法正常运行

> ID：10387933
> 
> 赞同：0
> 
> 时间：2012-04-30T17:30:48.800
> 
> 标签：javascript, jquery, twitter-bootstrap

我有以下页面：

[http://www.poker-labs.com/571010001-1050-Super-Tuesday-300K-Gtd.html](http://www.poker-labs.com/571010001-1050-Super-Tuesday-300K-Gtd.html)

正如您所看到的，由于某种原因，虽然我已经定义了模态，但最初启动了模式`show: false`，此外，“x”按钮应该可以工作，但事实并非如此。

我觉得我错过了一些非常基本的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:42:10.587

有没有加

```
$(".modal").modal("hide"); 
```

到你的页面？另外，添加：

```
<div class="modal hide fade"> 
```

到您声明模式的 div 标签

# join - SQLite3 数据库查询优化

> ID：10387937
> 
> 赞同：0
> 
> 时间：2012-04-30T17:31:08.237
> 
> 标签：join, sqlite, query-optimization

我想要一个通过组合 4 个表的结果。以前我使用 4 个不同的查询来提高性能，从加入表和从单个表查询开始。但是性能并没有什么改善。

后来我了解到 SQLite 将 join 语句转换为“where 子句”，我可以直接使用“Where”子句而不是 join，这样可以节省一些 CPU 时间。

但是“Where”子句的问题是，如果四个条件中的一个条件失败，则结果集为空。如果一个条件失败，我想要一个包含其余列（匹配其他条件）的表，而不是一个空表。有没有办法实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:52:52.600

您是否考虑过使用 LEFT OUTER JOIN ？

例如

```
SELECT Customers.AcctNumber, Customers.Custname, catalogsales.InvoiceNo 
FROM Customers 
LEFT OUTER JOIN catalogsales ON Customers.Acctnumber = catalogsales.AcctNumber 
```

在这个例子中，如果 "catalogsales" 中没有任何匹配的行，那么它仍然会返回 "left" 表中的数据，在这种情况下是 "Customers"

如果没有示例 SQL，很难知道您尝试过什么。

# java - 无法从 Eclipse 中查看 Tomcat 启动期间引发的异常

> ID：10387940
> 
> 赞同：1
> 
> 时间：2012-04-30T17:31:21.860
> 
> 标签：java, eclipse, exception, tomcat

我正在使用 Eclipse 通过本地安装的 Tomcat 调试 Web 应用程序。

当我通过 Eclipse 启动 Tomcat 服务器并观察`catalina.out`解压 WAR 文件时，Eclipse 调试器将`NoClassDefFoundError`在启动期间暂停并多次（5-6）跳转到引导线程中的 a。它这样做的唯一原因是因为我在`NoClassDefFoundError`. 应用程序按预期部署和运行，但我仍然想知道`NoClassDefFoundError`.

`catalina.out`没有显示任何关于这些异常的信息，除了断点被命中的事实之外，我找不到任何关于导致这种情况的信息。

任何人都知道我如何告诉 Eclipse 向我展示所抛出异常的具体情况？我有堆栈跟踪，但它不是很有帮助，因为我没有为它发生的库附加源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:41:02.407

如果您修改登录级别，可能会看到更多详细信息。如果您使用没有自定义修改的默认 Tomcat，则编辑该文件`${catalina.base}/conf/logging.properties`并在几行中替换为 FINEST：

```
org.apache.catalina.level=FINEST 
```

在您的应用程序中，添加文件`WEB-INF/classes/logging.properties`

有关详细信息，请参阅[http://tomcat.apache.org/tomcat-6.0-doc/logging.html](http://tomcat.apache.org/tomcat-6.0-doc/logging.html)

# c# - Visual Studio 中更改的目标 .NET Framework 会产生错误

> ID：10387941
> 
> 赞同：0
> 
> 时间：2012-04-30T17:31:22.287
> 
> 标签：c#, .net, visual-studio

我最初是为 .NET 4.0 编写程序...但是，最近我更改了 .NET 3.5 的目标框架...该程序仍然可以正常工作，但现在我遇到了一个相当奇怪的错误。过去，当我构建程序时，它会生成 .exe，仅此而已。现在它会生成一个 .exe 和一个 .exe.config。

应该还是没问题吧？不，在 .exe.config 文件中，它具有以下代码：

```
<configSections>
    <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        ...
    </sectionGroup>
</configSections> 
```

正如你所看到的，它说`Version=4.0.0.0`，正因为如此，当我运行程序时，我得到一个未处理的异常汇编错误。它很容易修复，我只需删除 .exe.config 文件，一切都很好。但它开始成为一种痛苦，在每一个构建上都这样做。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:59:19.667

可能会解决你的问题。我发现了一些相似的问题及其答案在这里

> 找到答案，删除app.config。
> 
> app.config 是根据 settings.settings 自动创建的。Visual Studio 没有构建它，即使它需要更新。
> 
> 注意：清理和重建不会强制 Visual Studio 清理和重建它
> 
> 删除它，强制 Visual Studio 重建，它修复了它。

这是[Visual Studio 2010：Properties.Settings 在将项目重新定位到 .NET Framework 3.5 后损坏](https://stackoverflow.com/questions/8141424/visual-studio-2010-properties-settings-broken-after-retargetting-project-to-ne)

# android - Android自动完成空指针

> ID：10387942
> 
> 赞同：0
> 
> 时间：2012-04-30T17:31:34.480
> 
> 标签：android, autocomplete, nullpointerexception

我在 android 中的自动完成 textview 遇到了一些问题。我用联系人姓名填充数组，但它仍然给我这个错误。有什么问题？

这是代码：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        contactArr = new ArrayList<Contacts>();
        names=new ArrayList<String>();
        t = (TextView) findViewById(R.id.textView1);
        et = (EditText) findViewById(R.id.editText1);
        button = (Button) findViewById(R.id.button1);
        test();
        Log.v("test", names.get(3));
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                R.layout.list_item, names);
//      autoComplete.setThreshold(2);
        autoComplete.setAdapter(adapter);
        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

            }
        });
} 
```

以下是名称数组列表的填充方式：

```
Cursor phones = getContentResolver().query(
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,
                null, null);
        while (phones.moveToNext()) {
            String name = phones
                    .getString(phones
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            String phoneNumber = phones
                    .getString(phones
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            names.add(name); //populated here 
```

最后是来自 logcat 的错误：

```
04-30 19:26:15.389: E/AndroidRuntime(25176): FATAL EXCEPTION: main
04-30 19:26:15.389: E/AndroidRuntime(25176): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.contact/com.contact.ContactInfoActivity}: java.lang.NullPointerException
04-30 19:26:15.389: E/AndroidRuntime(25176):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at android.os.Looper.loop(Looper.java:130)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at android.app.ActivityThread.main(ActivityThread.java:3835)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at java.lang.reflect.Method.invokeNative(Native Method)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at java.lang.reflect.Method.invoke(Method.java:507)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at dalvik.system.NativeStart.main(Native Method)
04-30 19:26:15.389: E/AndroidRuntime(25176): Caused by: java.lang.NullPointerException
04-30 19:26:15.389: E/AndroidRuntime(25176):    at com.contact.ContactInfoActivity.onCreate(ContactInfoActivity.java:41)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-30 19:26:15.389: E/AndroidRuntime(25176):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
04-30 19:26:15.389: E/AndroidRuntime(25176):    ... 11 more 
```

当我删除此行时 autoComplete.setThreshold(2); log cat 中的新错误是->

```
04-30 19:37:10.319: E/AndroidRuntime(25564):    at com.contact.ContactInfoActivity.onCreate(ContactInfoActivity.java:42) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:41:10.690

变量 autoComplete 为空。setThreshhold 和 setAdapter 正在引发 NPE 异常，因为您正在尝试访问尚未实例化的对象。

要对此进行测试，只需检查：

```
if(autoComplete == null) {
    Log.e("MyApp", "autoComplete is null");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:40:39.020

如果`autoComplete.setThreshold(2);`导致一个空指针，那么听起来你还没有定义`autoComplete.`

您需要像这样设置它：

```
AutoCompleteTextView autoComplete = (AutoCompletetextView) findViewById(R.id.autoComplete); 
```

# python - 比较/组合两个字典

> ID：10387945
> 
> 赞同：2
> 
> 时间：2012-04-30T17:31:53.690
> 
> 标签：python, dictionary, python-2.7

我有两个带有键值对的字典，如下所示：

```
dict-1  ch:23, 100
        ch:24, 95

dict-2  Ch:23, 98
        ch:25, 100 
```

并非所有的键都出现在两个字典中，每个字典包含大约 200,000 个键值对。我想要做的是比较或组合这两者并生成一个输出文本文件，如果键在两个字典中，我会得到两个值，输出文件格式如下：

```
ch:23   100   98         
ch:24   95    .    
Ch:25   .     100 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T17:42:07.903

**注意**如果您使用的是字典（除非 OrderedDict），则不会保留该顺序，因此您的结果的最终顺序将与您在示例中描述的不同

回到你的例子如果

```
>>> d1={'ch:23': 100, 'ch:24': 95}
>>> d2={'ch:23': 98 ,'ch:25': 100} 
```

你可以试试这个

```
>>> d3=collections.defaultdict(list)
>>> for k,e in d1.items()+d2.items():
    d3[k].append(e) 
```

如果要保留订单，则需要首先将原始字典创建为有序字典

然后你可以这样做

```
>>> d1
OrderedDict([('ch:23', 100), ('ch:24', 95)])
>>> d2
OrderedDict([('ch:23', 98), ('ch:25', 100)])
>>> d3=collections.OrderedDict()
>>> for k,e in d1.items()+d2.items():
    d3.setdefault(k,[]).append(e)   
>>> d3
OrderedDict([('ch:23', [100, 98]), ('ch:24', [95]), ('ch:25', [100])])
>>> 
```

# mongodb - MongoDB与c#确保记录在处理时被锁定

> ID：10387952
> 
> 赞同：2
> 
> 时间：2012-04-30T17:32:30.447
> 
> 标签：mongodb, mongodb-.net-driver

嗨，我正在使用 mongodb 作为我的数据库。我的问题是如何确保当我查询一个文档或大量文档时。例子：

```
mongo.GetCollection("orders").Find(Query.EQ("OrderStatus", "unshiped")).ToList(); 
```

如何确保此列表中的文档已锁定并且没有人可以编辑它们以及当我将它们循环为真然后保存它们时我在代码中对这些记录所做的一切它应该解锁它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:58:10.413

> MongoDB 支持对单个文档的原子操作。由于多种原因，MongoDB 不支持传统的锁定和复杂事务：
> 
> *   首先，在分片环境中，分布式锁可能既昂贵又缓慢。Mongo DB 的目标是轻量和快速。
> *   我们不喜欢死锁的概念。我们希望系统简单且可预测，不会出现这些意外。
> *   我们希望 Mongo DB 能够很好地解决实时问题。如果执行的操作可能会锁定大量数据，它可能会在很长一段时间内停止一些小型轻量查询。

我认为你最好的选择是`locked`在你的文件中添加一个属性，然后从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-17T08:55:30.030

您可以在集合中添加 isLocked 字段。在更新之前，您可以锁定和解锁以完成工作。如果您想要更特殊的锁定机制，请在 LockedId 字段中添加 Guid。

# wpf - 以编程方式删除数据网格列

> ID：10387953
> 
> 赞同：0
> 
> 时间：2012-04-30T17:32:33.300
> 
> 标签：wpf, datagrid, columnheader

我在 wpf 中有数据网格。当我将鼠标悬停在列标题上时，会出现一个关闭按钮。

我想要一些功能，所以当我点击那个按钮时，应该删除整列。

我写了这个。

```
 <DataTemplate x:Key="AdornerDataTemplate">
    <Grid HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,0,0,0">
        <Button Content="X" Width="26" Height="26" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ctrls:RhinoDataGrid}}, Path=RemoveColumnCommand}" Background="{DynamicResource GridHeaderMouseOverBrush}"></Button>
    </Grid> 
```

我可以看到 RemoveColumnCommand 已执行，但它没有列索引。我怎么知道我点击了哪一列。

![截屏](../Images/33fc0bf07b86e496619f6bb53a176b6a.png)

请帮助我。

谢谢迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:41:05.283

您可以尝试`CommandParameter`通过绑定传递列。不需要索引本身。

# sql - sql重复字段

> ID：10387956
> 
> 赞同：0
> 
> 时间：2012-04-30T17:32:59.133
> 
> 标签：sql

这是我的桌子。

```
ProductID 标题 UPC 显示
43 Motobecane Fantom 2634 0
14 重力 FSX 3301 1
19 重力 FSX 1.0 3301 1
56 芒果金刚鹦鹉 2834 1

```

我想选择具有重复 UPC 的行，其中 Display=1。这是我的代码不起作用：

```
Select ProductID, Title, UPC, Display from Products
Where Display=1
group by UPC having count(*) > 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:39:11.400

此解决方案假定 SQL Server：

```
SELECT    ProductID,
          Title,
          UPC,
          Display
FROM      Products
WHERE     UPC IN(
                     SELECT   UPC
                     FROM     Products
                     WHERE    DISPLAY = 1
                     GROUP BY UPC
                     HAVING   COUNT(UPC) > 1
                )
AND       Display = 1 
```

# serialization - 将数据表序列化为二进制文件，然后将新行添加到文件中

> ID：10387959
> 
> 赞同：0
> 
> 时间：2012-04-30T17:33:03.290
> 
> 标签：serialization, datatable

问题 ：

我需要将数据表以二进制格式保存到二进制文件中，以便加快处理速度，因为数据表可能包含多达一千万行。因此，XML 不受欢迎，因为它会使文件变大，并且处理过程会很慢。我设法将数据表保存到二进制文件中，它工作正常，但是当我尝试向现有二进制文件添加新行时出现问题（使用具有相同架构但不同行数据的数据表），它复制了架构将数据表转换为二进制文件，使其非常大。

需要什么：

我需要能够只向现有的二进制文件添加行。如果您尝试下面的代码并运行 3 次，它应该会创建二进制文件，然后每次保存添加 5 行，即保存 15 行。但这种情况并非如此。它将保存表模式和 5 行（二进制格式）>>> 然后表模式和 5 行（二进制格式）>>>表模式和 5 行（二进制格式）。表架构本身非常大，并且消耗很多文件大小。我只需要保存一次文件架构，然后是 15 行。

我的代码：函数 GetTable() As DataTable

```
Dim table As New DataTable ' Create new DataTable instance.

table.Columns.Add("Dosage", GetType(Integer)) ' Create four typed columns in the DataTable.
table.Columns.Add("Drug", GetType(String))
table.Columns.Add("Patient", GetType(String))
table.Columns.Add("Date", GetType(DateTime))
' Add five rows with those columns filled in the DataTable.
table.Rows.Add(25, "Indocin", "David", DateTime.Now)
table.Rows.Add(50, "Enebrel", "Sam", DateTime.Now)
table.Rows.Add(10, "Hydralazine", "Christoff", DateTime.Now)
table.Rows.Add(21, "Combivent", "Janet", DateTime.Now)
table.Rows.Add(100, "Dilantin", "Melanie", DateTime.Now)
Return table
End Function

Private Sub SaveDataTabletoBinary()
dt = GetTable()

Dim format As New Binary.BinaryFormatter
Dim ds As New DataSet
' ds = DataGridView1.DataSource

Using fs As New FileStream("c:\sar1.txt", FileMode.Append)
dt.RemotingFormat = SerializationFormat.Binary

'Other option is SerilaizationFormat.XML 
format.Serialize(fs, ds)
End Using
End Sub 
```

任何想法。?

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:05:27.517

尝试使用扩展名为的二进制文件`.bin`

# data-structures - 需要对简洁数据结构有一个很好的概述

> ID：10387965
> 
> 赞同：6
> 
> 时间：2012-04-30T17:33:20.700
> 
> 标签：data-structures, binary-tree, variable-length, large-data

> ### 交叉发布：[需要对简洁数据结构算法有一个很好的概述](https://cstheory.stackexchange.com/q/11261/1761)

由于我了解[简洁数据结构](http://en.wikipedia.org/wiki/Succinct_data_structure)，因此我迫切需要对该领域的最新发展有一个很好的概述。

我已经用谷歌搜索并阅读了很多我可以在谷歌搜索结果顶部看到的文章，这些文章来自我头顶的请求。我仍然怀疑我在这里错过了一些重要的事情。

以下是我特别感兴趣的主题：

1.  二叉树的简洁编码，具有获取父、左/右子、子树中元素数量的有效操作。

    这里的主要问题如下：我所知道的所有方法都假设树节点以呼吸优先顺序枚举（如该领域的先驱工作*Jacobson, G. J (1988)。简洁的静态数据结构*），它没有似乎适合我的任务。我处理深度优先布局中给出的巨大二叉树，深度优先节点索引是其他节点属性的关键，因此更改树布局对我来说有一些成本，我希望将其最小化。因此，有兴趣参考考虑其他 BF 树布局的作品。

2.  外部存储器中的大型可变长度项目数组。数组是不可变的：我不需要添加/删除/编辑项目。唯一的要求是 O(1) 元素访问时间和尽可能低的开销，比直接的偏移和大小方法更好。以下是我为我的任务收集的一些典型数据的统计数据：

    典型的项目数量 - 数亿，高达数千万；

    大约 30% 的项目长度不超过 1**位**；

    40%-60% 的项目长度小于 8 位；

    只有少数项目的长度在 32 到 255 位之间（255 位是限制）

    平均项目长度 ~4 位 +/- 1 位。

    项目长度的任何其他分布在理论上都是可能的，但所有实际有趣的案例都有接近上述的统计数据。

任何复杂文章的链接、任何晦涩难懂的教程、或多或少记录在案的 C/C++ 库——任何在类似任务中对你有用的东西或你有根据的猜测看起来像的东西——所有这些东西都非常感谢。

**更新：**我忘了补充问题 1：我正在处理的二叉树是不可变的。我没有改变它们的要求，我只需要以各种方式遍历它们，总是从节点移动到子节点或父节点，因此此类操作的平均成本是 O(1)。

此外，典型的树有数百万个节点，不应该完全存储在 RAM 中。

**更新 2**只是如果有人感兴趣。我在[https://cstheory.stackexchange.com/a/11265/9276](https://cstheory.stackexchange.com/a/11265/9276)中有几个很好的链接。

# php - update_option 来自预先填充的表单数组

> ID：10387966
> 
> 赞同：-1
> 
> 时间：2012-04-30T17:33:21.537
> 
> 标签：php, arrays, forms, wordpress, options

我如何在 wordpress 中更新选项：我所做的一切似乎都不起作用，我必须缺少一些简单的东西。

```
$l1teams = array(
    1=>"Caterham-Renault",
    2=>"Ferrari",
    3=>"Force India-Mercedes",
    4=>"HRT-Cosworth",
    5=>"Lotus-Renault",
    6=>"Marussia-Cosworth",
    7=>"Mercedes GP",
    8=>"Mclaren-Mercedes",
    9=>"Red Bull-Renault",
    10=>"Sauber",
    11=>"Toro Rosso-Ferrari",
    12=>"Williams-Renault",
    );

<td><select name="league1_driver1_team"><?php foreach($l1teams as $team){?> <option value="<?php echo $l1d1t ?>"><?php echo $team ?></option> <?php } ?> </select></td> 
```

我正确设置了所有其他代码，我只是无法将此值插入 wordpress 中的数据库并将其回显:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:41:00.457

您试图`$l1d1t`在您的示例中似乎未定义的选项标签中回显。您可能想要将代码更改为以下内容：

```
<td><select name="league1_driver1_team"><?php foreach($l1teams as $team_id => $team_name){?> <option value="<?php echo $team_id; ?>"><?php echo $team_name; ?></option> <?php } ?> </select></td> 
```

本质上，我正在做的是将数组索引设置为`$team_id`，将数组值设置为`$team_name`.

# vba - 保留几列并根据输入的数据保持休息

> ID：10387967
> 
> 赞同：1
> 
> 时间：2012-04-30T17:33:24.353
> 
> 标签：vba, excel, excel-2007

嗨，我有一个 Excel 表，每个月有 5 个类似的列（一月、二月等）。

![在此处输入图像描述](../Images/907d18fd6ef7082f237808e0656730f5.png)

我有 VBA 代码，它会自动为下个月创建列（在这种情况下是 3 月）。输入 March 数据后，我希望我的文件保存为 March.xls，删除本月剩余时间的数据（同时保留原始文件中的所有月份数据）。有没有办法用 VBA 做到这一点？我将不胜感激您的回复相同。我希望我的每个月文件在下面“另存为”：![在此处输入图像描述](../Images/ca647f7851613c99be6706e4d80e64c7.png)

我在网上找到了下面的代码，它正在工作。唯一的问题是我必须在此代码中输入要删除的列的名称，例如：代码中的“April”。是否可以使此代码以自动保留最后四列和第一列（ID 列）并删除其余部分的方式工作。谢谢

```
Sub DeleteData()
    Dim ws As Worksheet
    Dim ColList As String, ColArray() As String
    Dim LastCol As Long, i As Long, k As Long, l As Long, m As Long, j As Long
    Dim boolFound As Boolean
    Dim delCols As Range, delCols1 As Range, delCols2 As Range, delCols3 As Range
    Application.ScreenUpdating = False
    Set ws = Sheets("Sheet1")
    ColList = "April"
    ColArray = Split(ColList, ",")
    LastCol = ws.Cells.Find(What:="*", After:=ws.Range("A1"), Lookat:=xlPart, _
    LookIn:=xlFormulas, SearchOrder:=xlByColumns, SearchDirection:=xlPrevious, _
    MatchCase:=False).Column
    For i = 8 To LastCol
    boolFound = False
    For j = LBound(ColArray) To UBound(ColArray)
    If UCase(Trim(ws.Cells(1, i).Value)) = UCase(Trim(ColArray(j))) Then
    boolFound = True
    Exit For
    End If
    Next
    If boolFound = False Then
    If delCols Is Nothing Then
    Set delCols = ws.Columns(i)
    Else
    Set delCols = Union(delCols, ws.Columns(i))
    End If
    End If
    Next i
    If Not delCols Is Nothing Then delCols.Delete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:53:50.720

```
Sub Copyandsave()
    Dim i As Long
    Rows("1:2").Select 'based on which rows that the name of months are inside let's suppose it is in row 1 or 2
        For Each cell In Selection 'search through aforementioned rows  for march label you can change it for other months

    If InStr(cell.Text, January) Or InStr(cell.Text, February) Or InStr(cell.Text, March) _
    Or InStr(cell.Text, April) Or InStr(cell.Text, May) Or InStr(cell.Text, June) _
    Or InStr(cell.Text, July) Or InStr(cell.Text, August) Or InStr(cell.Text, September) _
    Or InStr(cell.Text, October) Or InStr(cell.Text, November) Or InStr(cell.Text, September) Then
              i = 1 + i
          cell.Select
          Columns(Selection.Column).Select 'gets column number of cell
          Selection.Cut

        Workbooks.Add
        ActiveWorkbook.ActiveSheet.Paste
                ActiveWorkbook.SaveAs Filename:=Workbooks(1).path & i & ".xls", _
                FileFormat:=xlNormal, Password:="", WriteResPassword:="", _
                ReadOnlyRecommended:=False, CreateBackup:=False 'saves the document with name

    End If
                 Workbooks(1).Activate

        Next

    End Sub 
```

# java - 如何在Java字符串中的空格之间导出数字？

> ID：10387973
> 
> 赞同：0
> 
> 时间：2012-04-30T17:33:56.793
> 
> 标签：java, string

我想`String`从键盘输入这样的“5 4 34”。如何导出空格之间的数字？还想将它们导出到`int[]`数组中，并在屏幕上打印出来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T17:36:49.177

您可以使用将to[`String.split("\\s")`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)拆分，然后在每个元素上使用以将数字作为.`String``String[]`[`Integer.parseInt()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)`int`

或者，您可以使用 a[`Scanner`](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCgQFjAA&url=http://download.oracle.com/javase/6/docs/api/java/util/Scanner.html&ei=mc2eT6aGNsSRswadpKRK&usg=AFQjCNGIsPc-k02EuYm_B89nvn2-g7OMow&sig2=gjzHXp1LJbpXJfbQ2EEttg)及其[`nextInt()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)方法

由于其他人已经向您展示了如何使用它来完成`split()`，这里有一个如何使用的示例`Scanner`，直接来自`System.in`（我假设您想要什么，因为您说您是从键盘读取的，当然您可以使用任何[`Readable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Readable.html)或`String`构建你的`Scanner`）：

**代码：**

```
Scanner inputScanner = new Scanner(System.in);
Scanner scanner = new Scanner(inputScanner.nextLine());
List<Integer> list = new ArrayList<Integer>();
while (scanner.hasNextInt()) {
    list.add(scanner.nextInt());
}
Integer[] arr = list.toArray(new Integer[0]); 
```

或者，如果您想要 an`int[]`而不是 an`Integer[]`而不是最后一行，请使用：

```
int[] arr = new int[list.size()];
int i = 0;
for (Integer x : list) { 
    arr[i++] = x;
} 
```

要打印数组，只需打印以下结果[`Arrays.toString()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29)：

```
System.out.println(Arrays.toString(arr)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T17:36:26.607

添加一个异常处理程序，您的状态就很好：

```
String values = "5 4 34";
String [] tokens = values.split("\\s+");
List<Integer> numbers = new ArrayList<Integer>();
for (String number : tokens) {
    numbers.add(Integer.valueOf(number);
} 
```

或者像这样：

```
String values = "5 4 34";
String [] tokens = values.split("\\s+");
int [] numbers = new int[tokens.length];
for (int i = 0; i < tokens.length; ++i) {
    numbers[i] = Integer.valueOf(tokens[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T17:35:30.770

```
 String[] stringArray = "5 4 34".split( " " );
    int[] intArray = new int[ stringArray.length ];

    for ( int i = 0 ; i < stringArray.length ; i++ )
    {
        intArray[ i ] = Integer.parseInt( stringArray[ i ] );
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T17:36:04.573

```
String string = "5 4 34";
String[] components = string.split(" "); // [5, 4, 34] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T10:22:48.833

没有太多样板：

```
List <Integer> numbers = new ArrayList <Integer> ();
for (String number : "5 4 34";.split ("\\s+")) {
    int v = Integer.parseInt (number);
    System.out.println (v);
    numbers.add (v);
} 
```

或使用扫描仪：

```
Scanner scanner = new Scanner ("5 4 34");
List <Integer> list = new ArrayList <Integer> ();
while (scanner.hasNextInt()) {
    int v = scanner.nextInt ();
    list.add (v);
    System.out.println (v);
} 
```

# java - KeyListener 有问题

> ID：10387975
> 
> 赞同：1
> 
> 时间：2012-04-30T17:34:03.703
> 
> 标签：java, swing, keylistener

我是图形编程的新手，在使用 KeyListener 向左或向右移动和图像时遇到了一些困难。目前我的代码甚至没有注册一个键被按下。如果有人可以帮我注册它，那么我可以自己做剩下的事情。

这是框架代码：

```
import java.awt.CardLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class FrameMain extends JFrame {

    final JPanel pnlShow;
    PanelHome pnlHome = new PanelHome();
    PanelPlayerInfo pnlPlayerInfo = new PanelPlayerInfo();
    PanelPlay pnlPlay = new PanelPlay(pnlPlayerInfo);
    PanelInstruction pnlInstructions = new PanelInstruction();
    PanelStore pnlStore = new PanelStore();
    PanelHighscores pnlHighscores = new PanelHighscores();
    ControlActionListenter CAL = new ControlActionListenter();

    public FrameMain() {
        pnlShow = new JPanel(new CardLayout());
        pnlShow.add(pnlHome, "Home");
        pnlShow.add(pnlPlay, "Play");
        pnlShow.add(pnlInstructions, "Instructions");
        pnlShow.add(pnlStore, "Store");
        pnlShow.add(pnlHighscores, "Highscores");
        pnlShow.add(pnlPlayerInfo, "PlayerInfo");

        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.setTitle("TANKS");
        this.setVisible(true);
        this.setSize(806, 628);
        this.setResizable(false);
        this.add(pnlShow);
        this.addKeyListener(new Move());

        pnlHome.btnExit.addActionListener(CAL);
        pnlHome.btnExit.setActionCommand("Exit");
        pnlHome.btnPlay.addActionListener(CAL);
        pnlHome.btnPlay.setActionCommand("PlayerInfo");
        pnlHome.btnInst.addActionListener(CAL);
        pnlHome.btnInst.setActionCommand("Instructions");
        pnlHome.btnHigh.addActionListener(CAL);
        pnlHome.btnHigh.setActionCommand("Highscores");
        pnlInstructions.btnBack.addActionListener(CAL);
        pnlInstructions.btnBack.setActionCommand("Main");
        pnlPlay.pnlToolbar.btnHome.addActionListener(CAL);
        pnlPlay.pnlToolbar.btnHome.setActionCommand("Main");
        pnlHighscores.btnBack.addActionListener(CAL);
        pnlHighscores.btnBack.setActionCommand("Main");
        pnlPlayerInfo.btnPlay.addActionListener(CAL);
        pnlPlayerInfo.btnPlay.setActionCommand("Play");
        pnlPlayerInfo.btnBack.addActionListener(CAL);
        pnlPlayerInfo.btnBack.setActionCommand("Main");

    }

    class ControlActionListenter implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            CardLayout cl = (CardLayout) (pnlShow.getLayout());
            String cmd = e.getActionCommand();

            if (cmd.equals("Main")) {
                cl.show(pnlShow, "Home");
            } else if (cmd.equals("Exit")) {
                System.exit(0);
            } else if (cmd.equals("Play")) {
                pnlPlay.arpPlayer[0].populateName(pnlPlayerInfo.txtPlayer1.getText());
                pnlPlay.arpPlayer[1].populateName(pnlPlayerInfo.txtPlayer2.getText());
                pnlPlay.pnlPlayer.lblPlayer1.setText(pnlPlay.arpPlayer[0].sPlayer);
                pnlPlay.pnlPlayer.lblPlayer2.setText(pnlPlay.arpPlayer[1].sPlayer);
                cl.show(pnlShow, "Play");
            } else if (cmd.equals("PlayerInfo")) {
                cl.show(pnlShow, "PlayerInfo");
            } else if (cmd.equals("Instructions")) {
                cl.show(pnlShow, "Instructions");
            } else if (cmd.equals("Highscores")) {
                cl.show(pnlShow, "Highscores");
            }
        }
    }

    class Move implements KeyListener {

        public void keyPressed(KeyEvent e) {
            System.out.println("rp");
        }

        public void keyTyped(KeyEvent e) {
            System.out.println("rp");
        }

        public void keyReleased(KeyEvent e) {
            System.out.println("rp");
        }
    }
} 
```

我在框架中添加了一个 keylistener 并创建了一个实现这个 keylistener 的类。就像我说的，我想做的就是让程序在我按下键盘上的一个键时输出一些东西。如果我需要向您展示其他任何内容，请告诉我，我会发布它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T17:44:53.033

尝试添加`KeyListener`到您需要的组件，而不是整个`JFrame`. 并确保他们专注。

此外，您可能会发现[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)很有用，可以替代键侦听器。

# opengl-es - 交互式 3d 网络技术

> ID：10387981
> 
> 赞同：1
> 
> 时间：2012-04-30T17:34:42.307
> 
> 标签：opengl-es, 3d, webgl, dxf

我想在网页中使用交互式 3D 模型。所需的功能是：

*   导入定义和显示房间的 dxf 文件。
*   从 javascript 添加/移动预建对象
*   添加/移动从 javascript 投射阴影的灯
*   将房间尺寸返回到 javascript
*   将对象位置返回到 javascript

我可以将 dxf 文件导入任何 WebGL 引擎吗？

我有一个小的重复用户群，所以浏览器安装完全没有问题。有没有我可以使用的插件技术？Java小程序？统一？我可以使用 OpenGL 引擎作为插件吗？java3d小程序怎么样？

我将从台式机开始，但需要尽快瞄准平板电脑和两年左右的手机。

我越来越确信我需要聘请专家来写这篇文章，但我想了解这些选项。你能推荐一个合适的技术吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T21:13:54.930

我认为 WebGL 是这个应用程序的绝佳选择；您描述的图形功能完全在其能力范围内。不过，我无法评论模型加载，因为我不熟悉 WebGL 引擎。

然而，移动是一个大问题。关于你提到的技术：

*   Chrome 和 Firefox for Android 支持 WebGL。在 iOS 上，Mobile Safari 不*启用*WebGL，但存在一个实现（严格用于应用内广告），因此将来可能会有更广泛的 WebGL 支持（可能需要自定义 Web 视图包装器来启用它） .

*   Android 或 iOS 上的任何浏览器都不支持 Java 小程序。

*   团结是一个可行的选择；Unity Web Player 浏览器插件允许在网页中嵌入 Unity 内容。但是，移动操作系统设备没有这样的插件；Unity 内容可以*编译到适用*于 iOS 或 Android 的应用程序中，但无法在网页中查看。

    **截至 2014 年 8 月的新闻：** Unity 宣布即将推出的 Unity 5 将包括发布到 JavaScript + WebGL（不需要插件）。假设这按承诺工作，如果您的目标平台具有支持 WebGL 的浏览器，则可以使用 Unity。

**因此，如果您现在**绝对需要包括 iOS 在内的跨平台 3D ，Unity 就在其中，但 WebGL 现在是桌面和 Android 的不错选择，并且将来可能会在移动设备上得到改进，并且是嵌入 3D 的唯一方法*在网页中，而不是*跨桌面和 Android 的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T15:54:26.190

WebGL 不是在网页中嵌入 3D 的唯一方法 - 请参阅 phoria.js： [http ://www.kevs3d.co.uk/dev/phoria/](http://www.kevs3d.co.uk/dev/phoria/)

[https://github.com/kevinroast/phoria.js](https://github.com/kevinroast/phoria.js)

three.js 也有一个没有 web-gl 的画布渲染。

Phoria.js 和其他类似的东西可以在不支持 web-gl 的 iPhone/iPad 和 Android 手机上运行。当然，性能要低得多，但如果您没有复杂的模型并希望它在任何地方都能工作......

# android - DialogFragment 方向独立于主 Activity 方向

> ID：10387983
> 
> 赞同：0
> 
> 时间：2012-04-30T17:34:57.420
> 
> 标签：android, android-layout, android-activity, android-dialogfragment

我的应用程序绘制了一个固定为纵向的足球场 (SurfaceView)。DialogFragment（半透明，以便该字段在背景中可见）不时向用户显示选项。我希望 DialogFragment 随着设备的变化而改变方向，但是，无论设备位置如何，足球场都必须保持方向固定（始终为纵向）。我尝试使用 2 个活动，活动“A”设置为方向“肖像”（足球场），活动“B”设置为“传感器”（这个创建对话框）。问题是，每次对话由“B”创建并改变方向时，整个背景足球场也会改变。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:25:52.733

不是我眼中最好的解决方案，但是...必须通过旋转足球场来解决，以便在设备改变方向后它保持在我想要的方向上。

# javascript - Soundcloud：为流媒体准备多个音轨？

> ID：10387993
> 
> 赞同：1
> 
> 时间：2012-04-30T17:35:51.263
> 
> 标签：javascript, soundcloud, soundmanager2

在[Soundcloud：尝试播放歌曲时无法设置未定义的属性 'id'](https://stackoverflow.com/questions/10385015/)已解决（再次感谢）我将进行下一步 - 我想准备多个 SM2 实例以按需播放多个曲目。

这是代码（这次为了可读性而没有编译CoffeeScript，整个jsbin可以在这里看到[http://jsbin.com/ejapin/edit#javascript,html](http://jsbin.com/ejapin/edit#javascript,html)）

```
$ ->
    SOUNDCLOUD_ID = '6d5064768cc29c71e1f66691f435589a'
    PLAYLIST_ID = '1768866'
    SC.initialize client_id: SOUNDCLOUD_ID

    tracks = []
    tracks_total = 0

    tracks_ready = ->
        for track in tracks
          console.log track
          track.play()

    SC.get '/playlists/' + PLAYLIST_ID, (pl) ->
        tracks_total = pl.tracks.length
        for track in pl.tracks
            console.log "Fetching"
            SC.stream "/tracks/#{track.id}", {}, (sound) ->
                tracks.push sound
                console.log "+ Fetched #{tracks.length}"
                if tracks.length == tracks_total
                    tracks_ready() 
```

我看到 Fetching 记录了 11 次，并且我还看到 SM2 的 swf 被请求相同的次数。

但是只为（*更新*的）**LAST**轨道调用回调（但声音播放正常）。

UPD：顺便说一句，它还多次插入 SM2 js，这看起来像是一个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:14:41.680

SC JS SDK 中存在导致此问题的错误。我们今天部署了一个修复程序，应该可以解决这个问题。感谢您报告此事！如果还有问题，请告诉我。

# android - 如何以友好名称获取绑定的蓝牙设备列表

> ID：10387995
> 
> 赞同：2
> 
> 时间：2012-04-30T17:35:55.667
> 
> 标签：android, bluetooth, friendly-id

我正在尝试获取手机上绑定的蓝牙设备的列表。我的问题是我以“不友好”的方式得到它。这是我的代码：

```
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
    ArrayList<String> listview = 
        new ArrayList<String>(Arrays.asList(pairedDevices.toString())); 
```

我越来越：`00:23:7f:5f:fe:1c...`

我怎样才能得到友好的名字而不是数字？

只是补充一下，我知道`getname()`，但据我了解，它仅适用于连接的设备，而不适用于绑定的设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T18:01:12.310

设备类的`getName()`方法`BluetoothDevice`会帮助你。只需遍历`Set`并调用`getName()`每个`BluetoothDevice`对象的方法。

# random - 整数分区的共轭

> ID：10387996
> 
> 赞同：1
> 
> 时间：2012-04-30T17:36:01.020
> 
> 标签：random, combinatorics, partition-problem

从n的所有分区集合中随机选择的整数分区的共轭也是均匀随机样本吗？我的结果表明是的，这是令人鼓舞的，因为它可以快速生成长度为 s 的 n 的随机分区，但我无法解释为什么应该或不应该这样做。

顺便说一句，我的结果基于 1.) 为特定长度 (s) 的小 n (<70) 生成所有分区 2.) 将每个分区的方差计算为宏状态描述符和 3.) 比较内核整个可行集（长度为 s 的 n 的所有分区）与小随机样本（即 <500 个随机生成的长度匹配 s 或共轭长度匹配 s 的 n 分区）的方差的密度曲线。随机样本的核密度曲线与整个可行集的曲线非常匹配（即所有匹配的 n 个分区）。这直观地说明了随机样本（其中大多数是共轭分区）捕获了基于 n 和 s 的可行集的分区之间的方差分布。我只是无法解释为什么它应该像看起来那样工作；

注意：产生随机样本的许多其他程序会产生明显有偏差的样本（即形状不同且高度不重叠的核密度曲线）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:24:43.270

是的。共轭是双射运算，因此每个分区都映射到一个唯一的共轭，而该共轭又映射回原始分区。因此，随机选择均匀分区的共轭不会引入任何偏差。

我不认为这可以帮助您随机生成固定长度的分区 - 您可能应该调整 Nijenhuis & Wilf 的算法以正确执行此操作。这应该不是很难做到，因为 n 到 k 部分的分区数可以很容易地计算出来，而随机生成算法实际上只依赖于此。

Knuth 在 TAOCP 第 4A 卷的第 7.2.4.1 节中包含了一个关于生成随机分区的练习 (47)。这将是一个有效的算法以随机均匀地生成固定长度分区的一个很好的起点。