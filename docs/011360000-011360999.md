# StackOverflow 问答 11360000-11360999

# c - 为什么右移 64 位是恒等式而不是幂零（返回 0）？

> ID：11360000
> 
> 赞同：-1
> 
> 时间：2012-07-06T09:57:41.893
> 
> 标签：c, gcc, x86-64, bit-shift

这段代码不言自明，但除非我在这里说些什么，否则我无法发布问题！

```
#include <stdio.h>
#include <limits.h>

void rightshift_test(int const shift_amount) {
  unsigned long a = 0xabcd1234abcd1234UL;
  printf("a: %lx, shift_amount:%d\n", a, shift_amount);
  unsigned long const b = a >> shift_amount;
  printf("b: %lx\n", b);
}

int main() {
  rightshift_test(56);
  rightshift_test(60);
  rightshift_test(61);
  rightshift_test(62);
  rightshift_test(63);
  rightshift_test(64);
  return 0;
} 
```

它仍然不允许我发布问题。这里代码正在运行：

```
gcc -Wall -Wextra -Werror foo.c -o foo
./foo
a: abcd1234abcd1234, shift_amount:56
b: ab
a: abcd1234abcd1234, shift_amount:60
b: a
a: abcd1234abcd1234, shift_amount:61
b: 5
a: abcd1234abcd1234, shift_amount:62
b: 2
a: abcd1234abcd1234, shift_amount:63
b: 1
a: abcd1234abcd1234, shift_amount:64
b: abcd1234abcd1234 
```

这里是我的编译器和我的机器的细节，以防这不是很明显。

```
$ gcc --version
i686-apple-darwin10-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3)

$ echo $MACHTYPE
x86_64-apple-darwin10.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:14:55.167

ISO C99 标准有这个处理位移运算符的小片段：

> `shift-expression:`
>        `additive-expression`
>        `shift-expression << additive-expression`
>        `shift-expression >> additive-expression`
> 
> 对每个操作数执行整数提升。结果的类型是提升的左操作数的类型。**如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。**

换句话说，一旦您开始尝试将 64 位（在您的实现中）移动`unsigned long`64 位或更多位，所有的赌注都没有了。它可以返回 0、原始值或 42。它甚至可以格式化您的硬盘驱动器并将色情邮件发送给您的老板（尽管我从未见过真正*做到*这一点的实现）。

您可能会发现某些实现（甚至实现的底层硬件）将通过仅有效地使用相关位来优化这些指令。换句话说，对于一个 64 位的值，它很可能只使用最低有效的 7 位（有效地使用`and`-ing `0x3f`）来为您提供 0 到 63 的操作数。

在这种情况下，因为`64 & 0x3f`等于 0，所以它实际上是一个空操作。

无论如何，*为什么*它会以现在的方式行事是假设。未定义的行为是您真正应该避免的。如果您*真的*希望行为按预期工作，请更改：

```
unsigned long const b = a >> shift_amount; 
```

变成类似的东西：

```
unsigned long const b = (shift_amount < 64) ? a >> shift_amount : 0; 
```

如这段代码所示（64 位值是我系统上的 ULL）：

```
#include <stdio.h>
#include <limits.h>

void rightshift_test(int const shift_amount) {
    unsigned long long a = 0xabcd1234abcd1234ULL;
    printf("a: %llx, shift_amount:%d: ", a, shift_amount);
    unsigned long long const b = (shift_amount < 64) ? a >> shift_amount : 0;
    printf("b: %llx\n", b);
}

int main() {
    rightshift_test(56);
    rightshift_test(60);
    rightshift_test(61);
    rightshift_test(62);
    rightshift_test(63);
    rightshift_test(64);
    rightshift_test(99);
    return 0;
} 
```

这个的输出是：

```
a: abcd1234abcd1234, shift_amount:56: b: ab
a: abcd1234abcd1234, shift_amount:60: b: a
a: abcd1234abcd1234, shift_amount:61: b: 5
a: abcd1234abcd1234, shift_amount:62: b: 2
a: abcd1234abcd1234, shift_amount:63: b: 1
a: abcd1234abcd1234, shift_amount:64: b: 0
a: abcd1234abcd1234, shift_amount:99: b: 0 
```

# javascript - 如果光标放置，则在光标位置的文本区域中插入文本，否则文本应最后附加在 IE 中

> ID：11360003
> 
> 赞同：1
> 
> 时间：2012-07-06T09:57:54.450
> 
> 标签：javascript

如果放置光标，我想在光标位置的 textarea 中插入文本，否则文本应附加在 IE 中现有文本的末尾。

我已经使用了这个函数，它在 Mozilla 中运行良好，但在它附加到现有文本的起始位置时却没有。

```
function insertAtCursor(text) {   

    var field = document.frmMain.Expression;

    if (document.selection) {

        field.focus();

        sel = document.selection.createRange();
        sel.text = text;
    }
} 
```

如果没有放置光标，我想在现有文本的末尾附加文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:15:24.107

检查该字段是否已经具有焦点，`TextRange`如果是，则使用从选择中生成的。`TextRange`如果没有，请为该字段创建一个并将其折叠到最后。

在其他浏览器中，您似乎没有任何用于在光标处插入文本的代码，但也许您忽略了这一点。

现场演示：http: [//jsbin.com/ixoyes/2](http://jsbin.com/ixoyes/2)

代码：

```
function insertAtCursor(text) {   
    var field = document.frmMain.Expression;

    if (document.selection) {
        var range = document.selection.createRange();

        if (!range || range.parentElement() != field) {
            field.focus();
            range = field.createTextRange();
            range.collapse(false);
        }
        range.text = text;
        range.collapse(false);
        range.select();
    }
} 
```

# java - 如何启动“设置”应用程序？

> ID：11360005
> 
> 赞同：1
> 
> 时间：2012-07-06T09:58:07.983
> 
> 标签：java, android

当用户运行我的应用程序时，我希望我的应用程序将用户转发到设置 -> 位置和安全 -> 使用无线网络。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:01:18.170

启动无线设置为：

```
Intent intent=new Intent(Settings.ACTION_WIRELESS_SETTINGS);
ComponentName cName = new ComponentName("com.android.settings","com.android.settings.WirelessSettings");
intent.setComponent(cName);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:23:51.610

试试这个，

```
startActivity(new Intent(Settings.ACTION_WIRELESS_SETTINGS)); 
```

# pointers - 如何使用 PYQt' QImage scanline() 访问像素数据

> ID：11360009
> 
> 赞同：4
> 
> 时间：2012-07-06T09:58:27.640
> 
> 标签：pointers, pyqt4, pixel, qimage, python-sip

我需要使用 PyQt4 访问 qimage 对象中的像素数据。

.pixel() 太慢了，所以文档说要使用 scanline() 方法。

在 c++ 中，我可以获取 scanline() 方法返回的指针，并从缓冲区读取/写入像素 RGB 值。

使用 Python，我得到了指向像素缓冲区的 SIP voidptr 对象，因此我只能使用 bytearray 读取像素 RGB 值，但我无法更改原始指针中的值。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T17:20:25.723

这里有些例子：

```
from PyQt4 import QtGui, QtCore
img = QtGui.QImage(100, 100, QtGui.QImage.Format_ARGB32)
img.fill(0xdeadbeef)

ptr = img.bits()
ptr.setsize(img.byteCount())

## copy the data out as a string
strData = ptr.asstring()

## get a read-only buffer to access the data
buf = buffer(ptr, 0, img.byteCount())

## view the data as a read-only numpy array
import numpy as np
arr = np.frombuffer(buf, dtype=np.ubyte).reshape(img.height(), img.width(), 4)

## view the data as a writable numpy array
arr = np.asarray(ptr).reshape(img.height(), img.width(), 4) 
```

# asp.net - 显示剩余的数字字符以达到 Telerik 的最大长度：RadTextBox

> ID：11360013
> 
> 赞同：0
> 
> 时间：2012-07-06T09:59:05.963
> 
> 标签：asp.net, web-applications, textbox, telerik

我的asp .net web 应用程序需要一个telerik:RadTextBox，它最多可以接受160 个字符。每次在此文本框中输入一个字符时，我希望我可以键入的剩余字符数作为标签显示在此文本框附近。谁能告诉我应该使用哪个事件并提供 javascript 代码来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:16:26.060

我用一系列包含文本框的用户控件做了类似的事情。我建议使用 onkey up 和 onkey down 事件来增加/降低您的计数器。

这是我们使用的javascript。

```
<script type="text/javascript" language="Javascript">
    //Character count script!
    function textCounter(field, countfield, maxlimit) {
        if (countfield == null) { return; }

        if (field.value.length > maxlimit)
            field.value = field.value.substring(0, maxlimit) + " Characters Remaining";
        else
            countfield.value = maxlimit - field.value.length + " Characters Remaining";
    }
</script> 
```

这是类似于下面带有计数器字段的文本框的内容。

```
 <telerik:RadTextBox ID="txtTextBox" runat="server"  />
    <input readonly="readonly" enableviewstate ="false" type="text" runat="server" id="charCount" size="25" name="charCount" tabindex="-1" value="" 
        style="border: solid 0px white; display:none; background: white; font-size: 11px; color: #FF0000; text-align: right; float:right" /> 
```

如果文本框有最大长度，则在加载时添加属性。

```
 txtTextBox.Attributes.Item("onblur") = charCount.ClientID + ".style.display='none';"
        txtTextBox.Attributes.Item("onfocus") = charCount.ClientID + ".style.display='block';"
        txtTextBox.Attributes.Item("onkeyup") = "textCounter(this, " + charCount.ClientID + "," + myMaxLength.ToString + ");"
        txtTextBox.Attributes.Item("onkeydown") = "textCounter(this, " + charCount.ClientID + "," + myMaxLength.ToString + ");" 
```

当所有这些结合起来时，如果你设置了一个最大限制，它就会增加计数器，只有当那个文本框有焦点时。一旦焦点消失，脚本 onblur 将再次隐藏文本框。计数器在 onkeyup 和 onkeydown 上触发，因此计数将保持准确。它将倒数到 0，一旦达到 0，用户将无法输入更多文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:11:44.100

以下是关于您的问题的一些提示：

为了计算字符数并排除换行符，您可以使用以下命令：

```
<telerik:RadTextBox ID="RTB1" runat="server" TextMode="MultiLine" ClientEvents-OnKeyPress="KeyPress" />

<script type="text/javascript">

function KeyPress(sender, args)
{
    var text;
    if ($telerik.isIE || args.get_domEvent().rawEvent.keyCode == 0 || args.get_domEvent().rawEvent.keyCode == 13) // 13 : Enter key
    {
        text = escape(sender.get_value() + args.get_keyCharacter());
    }
    else
    {
        text = escape(sender.get_value());
    }

    while (text.indexOf("%0D%0A") != -1)  // IE
    {
        text = text.replace("%0D%0A", " ");
    }
    while (text.indexOf("%0A") != -1)
    {
        text = text.replace("%0A", " ");
    }
    while (text.indexOf("%0D") != -1)
    {
        text = text.replace("%0D", " ");
    }

    var calculatedLength = unescape(text).length;

    if (args.get_domEvent().rawEvent.keyCode == 8 && calculatedLength > 0) // 8 : backspace
    {
        calculatedLength -= 1;
    }

    document.title = calculatedLength;
}

</script> 
```

这样你就可以做到这一点。

甚至您也可以查看[http://www.telerik.com/community/forums/aspnet-ajax/input/counting-characters.aspx](http://www.telerik.com/community/forums/aspnet-ajax/input/counting-characters.aspx)了解更多详情。

谢谢，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:12:22.843

使用 onFocus 客户端事件：

例如。

```
textBox1.Attributes.Add("onFocus", "Counter('textBox1','LabelID',160)");

<script>
function Counter(textboxID, LabelID, MaxCharacters) {
  var count = MaxCharacters - document.getElementById(textboxID).value.length;
    document.getElementById(LabelID).innerHTML = count; 
}
</script> 
```

# android - Android中的Java空指针错误

> ID：11360019
> 
> 赞同：0
> 
> 时间：2012-07-06T09:59:29.480
> 
> 标签：android, nullpointerexception

我在 android 模拟器上收到此错误。我正在使用它从用户那里获取 int 值：它适用于 String 值，但不适用于 int 值。也尝试了 parseInt() 但没有运气。

```
 public void btnAddTest(View view)
    {
   dbHelper= new DatabaseHelper(this);    
     boolean ok=true;
    try
    {           String tname=test.getText().toString();
    String Unit=unit.getText().toString();
        Spannable spn=a.getText();
        Spannable spn1=f.getText();
        Spannable spn2=t.getText();
        Spannable _aft=aft.getText();
        Spannable x2=calx2.getText();
        Spannable _x=calx.getText();
        Spannable val=num.getText();

        int avalue=Integer.parseInt(spn.toString());
        int fvalue=Integer.parseInt(spn1.toString());
        int tvalue=Integer.parseInt(spn2.toString());
        int AFTID=Integer.parseInt(_aft.toString());
        int num1=Integer.parseInt(x2.toString());

        int num2=Integer.parseInt(_x.toString());

        int num3=Integer.parseInt(val.toString());
//      process p=new process(AFTID,avalue,fvalue,tvalue);

        testname t= new testname(tname,Unit,num1,num2,num3,AFTID);
        setTitle("Processing");
        dbHelper.testname(t);
    //  dbHelper.process(p);

    }
    catch(Exception ex)
    {
        ok=false;
        CatchError(ex.toString());
    }
    finally
    {
        if(ok)
        { 
```

// NotifyEmpAdded(); class1.ShowAlert2(this);

```
 }
    }}
void CatchError(String Exception)
{
    Dialog diag=new Dialog(this);
    diag.setTitle("Add new Test");
    TextView txt=new TextView(this);
    txt.setText(Exception);
    diag.setContentView(txt);
    diag.show();
}Spannable spn=a.getText();
  int avalue=Integer.valueOf(spn.toString()); 
```

这是日志：

```
 07-06 14:37:43.063: E/AndroidRuntime(864): FATAL EXCEPTION: main
   07-06 14:37:43.063: E/AndroidRuntime(864): java.lang.RuntimeException: Unable to instantiate application android.app.Application: java.lang.NullPointerException
   07-06 14:37:43.063: E/AndroidRuntime(864):   at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3938)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at android.app.ActivityThread.access$1300(ActivityThread.java:123 )
   07-06 14:37:43.063: E/AndroidRuntime(864):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at android.os.Handler.dispatchMessage(Handler.java:99)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at android.os.Looper.loop(Looper.java:137)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at android.app.ActivityThread.main(ActivityThread.java:4424)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at java.lang.reflect.Method.invokeNative(Native Method)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at java.lang.reflect.Method.invoke(Method.java:511)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at dalvik.system.NativeStart.main(Native Method)
   07-06 14:37:43.063: E/AndroidRuntime(864): Caused by: java.lang.NullPointerException
   07-06 14:37:43.063: E/AndroidRuntime(864):   at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:362)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at android.app.LoadedApk.getClassLoader(LoadedApk.java:305)
   07-06 14:37:43.063: E/AndroidRuntime(864):   at android.app.LoadedApk.makeApplication(LoadedApk.java:474)
   07-06 14:37:43.063: E/AndroidRuntime(864):   ... 11 more
   07-06 14:38:05.103: I/dalvikvm(897): threadid=3: reacting to signal 3
   07-06 14:38:05.343: I/dalvikvm(897): Wrote stack traces to '/data/anr/traces.txt'
   07-06 14:38:05.681: I/dalvikvm(897): threadid=3: reacting to signal 3
   07-06 14:38:05.802: I/dalvikvm(897): Wrote stack traces to '/data/anr/traces.txt'
   07-06 14:38:05.934: D/dalvikvm(897): GC_FOR_ALLOC freed 60K, 4% free 6524K/6787K, paused 66ms 
```

这是 xml 文件布局：

```
 <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#ffffffff"
            android:ems="10"
            android:gravity="center_horizontal"
            android:inputType="number"
            android:textColor="#ff000000" >

            <EditText
                android:id="@+id/id1"
                android:inputType="number" />

            <EditText
                android:id="@+id/a1"
                android:inputType="number" />

            <EditText
                android:id="@+id/f1"
                android:inputType="number" />

            <EditText
                android:id="@+id/t1"
                android:inputType="number" />

        </TableRow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:04:21.473

```
Spannable spn=(Spannable)a.getText();
int avalue=Integer.parseInt(spn.toString()); 
```

* * *

**更新：**

像这样试试

```
int avalue=Integer.parseInt(a.getText().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:08:47.237

```
 if ( a!=null ) {
      Spannable spn=a.getText();
      int avalue=Integer.valueOf(spn.toString());
  } 
```

祝你好运！

# python - 为什么在隐式 __getitem__ 调用中不调用 __getattribute__？

> ID：11360020
> 
> 赞同：9
> 
> 时间：2012-07-06T09:59:38.763
> 
> 标签：python, magic-methods

在尝试包装任意对象时，我遇到了字典和列表的问题。经过调查，我设法想出了一段简单的代码，我根本不理解它的行为。我希望你们中的一些人能告诉我发生了什么：

```
>>> class Cl(object): # simple class that prints (and suppresses) each attribute lookup
...   def __getattribute__(self, name):
...     print 'Access:', name
... 
>>> i = Cl() # instance of class
>>> i.test # test that __getattribute__ override works
Access: test
>>> i.__getitem__ # test that it works for special functions, too
Access: __getitem__
>>> i['foo'] # but why doesn't this work?
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'Cl' object has no attribute '__getitem__' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T10:02:54.403

魔术`__methods__()`被特殊对待：它们被内部分配到类型数据结构中的“槽”以加快它们的查找速度，并且只在这些槽中查找它们。如果插槽为空，您将收到错误消息。

有关详细信息，请参阅文档中的[新样式类的特殊方法查找。](http://docs.python.org/reference/datamodel.html#new-style-special-lookup)摘抄：

> 除了为了正确性而绕过任何实例属性之外，隐式特殊方法查找通常也会绕过`__getattribute__()`对象元类的方法。
> 
> […]
> 
> 以这种方式绕过`__getattribute__()`机制为解释器中的速度优化提供了很大的空间，但代价是处理特殊方法的一些灵活性（特殊方法必须在类对象本身上设置，以便解释器始终调用） .

# spring - JSF/Spring Session 在用户之间共享

> ID：11360024
> 
> 赞同：3
> 
> 时间：2012-07-06T10:00:02.450
> 
> 标签：spring, session, jsf

我有一个 JSF 管理的会话范围 bean。它也是一个弹簧组件，因此我可以注入一些字段：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import org.springframework.stereotype.Component;

@ManagedBean
@SessionScoped
@Component
public class EpgBean {...} 
```

问题是会话是在用户之间共享的！如果一个用户做了一些事情并且另一台计算机上的另一个用户连接，他会看到另一个用户的 SessionScoped 数据。

是因为弹簧 @Component 会迫使 bean 成为单例吗？解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T12:18:11.050

`@Scope("session"`我使用 spring 范围注释）而不是 JSF解决了这个问题`@SessionScopped`。我想既然 spring 被配置为 FacesEl 解析器，那么重要的是 spring 作用域，而 JSF 作用域被忽略了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:51:39.290

我使用的方法是将托管 bean 保留在 JSF 容器中，并通过托管属性上的 EL 将 Spring bean 注入其中。请参阅[相关问题](https://stackoverflow.com/questions/2814535/integrating-jsf-with-spring)。

为此，请在 中设置SpringBeanFacesELResolver [，](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/web-integration.html#jsf-springbeanfaceselresolver)`faces-config.xml`以便 JSF EL 可以解析 Spring bean：

```
<application>
    ...
    <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    ...
</application> 
```

之后，您可以像这样在 @ManagedBean 注释的 bean 中注入 Spring bean：

```
@ManagedBean
@ViewScoped
public class SomeMB {
    // this will inject Spring bean with id someSpringService
    @ManagedProperty("#{someSpringService}")
    private SomeSpringService someSpringService;

    // getter and setter for managed-property
    public void setSomeSpringService(SomeSpringService s){
        this.someSpringService = s;
    }
    public SomeSpringService getSomeSpringService(){
        return this.someSpringService;
    }
} 
```

可能有比这更好的方法，但这是我最近一直在使用的方法。

# java - 引用 Object 类型时使用 final

> ID：11360025
> 
> 赞同：0
> 
> 时间：2012-07-06T10:00:12.647
> 
> 标签：java, final

```
private final  List<KeyListener> keyListeners= new CopyOnWriteArrayList<KeyListener>();

public void addKeyListener(KeyListener keyListener){
  keyListeners.add(keyListener);
} 
```

在上面的代码中，我将 keyListeners 声明为 final 并且它是线程安全的。我假设 final 我的意思是侦听器的状态在构造后不能改变。但是我在 addKeyListener() 方法中没有做同样的事情吗？为什么编译器不给我警告？我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:02:17.763

添加`final`关键字意味着将在整个程序中`keyListeners`指向相同的关键字。`CopyOnWriteArrayList`这样做是违法的：

```
keyListeners = null 
```

但是，方法`keyListeners`仍然可以自由调用。它们是否影响底层数据结构并不是编译器关心的事情。

* * *

```
class Foo {
    public int bar = 1;

    public static void test() {
       final Foo x = new Foo();

       //This is perfectly legal:
       x.bar = 2;

       //This is not:
       x = new Foo();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T10:05:01.297

final 关键字用于告诉变量只能分配一次。但是即使它“更改”对象属性，您也可以对其调用方法。

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)：

> 一旦分配了最终变量，它总是包含相同的值。如果最终变量持有对对象的引用，则对象的状态可能会通过对对象的操作而改变，但变量将始终引用同一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:01:58.613

只是因为 final 引用了 keyListeners 的内部地址而不是列表本身。

# prolog - Prolog 附加切割运算符

> ID：11360026
> 
> 赞同：12
> 
> 时间：2012-07-06T10:00:15.433
> 
> 标签：prolog, prolog-cut

当我们将 append 与 cut 运算符一起使用时会出现什么问题？

```
 append2([],L,L):-!.
   append2([H|T],L,[H|TL]):-append2(T,L,TL). 
```

我尝试了几种不同的输入，但总是成功。

```
?- append2([1,2],[5],L).
L = [1, 2, 5].

?- append2([1,2],[1,2],L).
L = [1, 2, 1, 2].

?- append2([],[1,2],L).
L = [1, 2].

?- append2([1,2],[],L).
L = [1, 2]. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T14:46:52.913

有时引入绿色切割确实很有意义 - 甚至引入`append/3`，但必须注意这样的切割仍然是绿色切割。也就是说，确实提高了效率（在一定程度上）并且不影响答案的削减。

引入绿色切割有一个非常简单的经验法则：如果你在一个没有任何保护的纯单调程序中添加一个切割，你可以很确定这将是一个破坏你程序意义的红色切割。

这个经验法则很少有例外。例如，如果没有进一步的规则等，您可以在可变的自由目标之后添加一个削减。尝试找出受削减影响的案例绝对是一个很好的培训。

但回到你的程序`append2/3`。目前，即使替代规则确实适用，剪切总是会剪切，在这种情况下，剪切会删除我们想要避免的答案。

那么第一个子句什么时候才是唯一相关的呢？

如果第一个参数是`[]`，那么`append2([], Xs, Ys).`- 而且如果最后一个参数是`[]`（还有更多更复杂的情况）。让我们用原始的无切割定义尝试这两种情况：

```
?- 附加（[]，Ys，Zs）。
Ys = Zs。

?- 附加（Xs，Ys，[]）。
Xs = Ys, Ys = [] ;
错误的。

```

因此，在第一种情况下，系统能够立即确定存在单一解决方案，同时产生答案。然而，在第二种情况下，Prolog 系统*不确定*是否需要另一个答案——可以说它“留下了一个选择点”。很遗憾，因为确定在这种情况下也只存在一个答案是相当简单的。削减将是理想的帮助。但是，毫无防备的切割弊大于利。

如果第三个参数是 a ，则剪切可能会剪切`[]`：

```
append3(Xs, Ys, Zs) :-
   (  Zs == [] -> ! ; true ),
   Xs = [],
   Ys = Zs.
append3([X|Xs], Ys, [X|Zs]) :-
   append3(Xs, Ys, Zs). 
```

这个程序现在更有效，因为它不会打开选择点，如果只知道第三个参数。

```
?- 附加（Xs，Ys，[1]）。
Xs = [],
Ys = [1] ;
Xs = [1]，
是 = [] ;
错误的。

?- append3(Xs,Ys,[1])。
Xs = [],
Ys = [1] ;
Xs = [1]，
是 = []。

```

该程序不一定更快，因为测试本身可能很昂贵。理想情况下，Prolog 系统将能够在内部执行此类操作，但有时程序员必须提供一些帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T10:40:33.240

有两种[切割](https://secure.wikimedia.org/wikipedia/en/wiki/Cut_%28logic_programming%29)方式；绿色切割和红色切割。插入绿色切割只是为了提高效率并且不改变程序的语义。另一方面，红色切割可以。根据定义，绿色削减不会造成任何问题。

那么，如果没有削减，有没有办法改变行为？

让我们来看看; 对于要匹配的第一个子句，L1 应该与 [] 一致，L2 与 L 和 L3 与 L 一致，或者换句话说，L2 与 L3 一致。

当 L1 为 [] 时，第二个子句不能匹配；所以切割没有任何效果

当 L1 未实例化时：如果此时 L2 和 L3 的长度已知，则它们必须相等，否则第一个子句将不匹配；因此，第二个子句无法匹配，因为在每一步 L3 的长度都会减少 1，并且终止的唯一方法需要 L2=L3

如果 L3 或 L2 的长度未知：那么我们有一个问题，因为第二个子句可能会产生解决方案。

确实：

```
 3 ?- append2(L1,L2,[1,2,3]).
    L1 = [],
    L2 = [1, 2, 3].

    4 ?- append2(L1,[1,2,3],L3).
    L1 = [],
    L3 = [1, 2, 3].

    5 ?- append2(L1,L2,L3).
    L1 = [],
    L2 = L3.

    6 ?- append2(L1,[E1,E2],L3).
    L1 = [],
    L2 = [E1, E2].

    7 ?- append2(L1,L2,[E1,E2]).
    L1 = [],
    L2 = [E1, E2]. 
```

虽然我们期望：

```
8 ?- append(L1,L2,[1,2,3]).
L1 = [],
L2 = [1, 2, 3] ;
L1 = [1],
L2 = [2, 3] ;
L1 = [1, 2],
L2 = [3] ;
L1 = [1, 2, 3],
L2 = [] ;
false.

9 ?- append(L1,[1,2,3],L3).
L1 = [],
L3 = [1, 2, 3] ;
L1 = [_G24],
L3 = [_G24, 1, 2, 3] ;
L1 = [_G24, _G30],
L3 = [_G24, _G30, 1, 2, 3] ;
L1 = [_G24, _G30, _G36],
L3 = [_G24, _G30, _G36, 1, 2, 3] ;
L1 = [_G24, _G30, _G36, _G42],
L3 = [_G24, _G30, _G36, _G42, 1, 2, 3] ;
...

10 ?- append(L1,L2,L3).
L1 = [],
L2 = L3 ;
L1 = [_G22],
L3 = [_G22|L2] ;
L1 = [_G22, _G28],
L3 = [_G22, _G28|L2] ;
....

11 ?- append(L1,[E1,E2],L3).
L1 = [],
L3 = [E1, E2] ;
L1 = [_G78],
L3 = [_G78, E1, E2] ;
L1 = [_G78, _G84],
L3 = [_G78, _G84, E1, E2] ;
L1 = [_G78, _G84, _G90],
L3 = [_G78, _G84, _G90, E1, E2] ;
...

12 ?- append(L1,L2,[E1,E2]).
L1 = [],
L2 = [E1, E2] ;
L1 = [E1],
L2 = [E2] ;
L1 = [E1, E2],
L2 = [] ;
false. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-06T11:49:53.487

尝试例如最一般的查询：

```
?- append2(X, Y, Z). 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-06T10:18:12.403

当前两个参数是可变的时，它将不起作用：

```
?- append(X, Y, [1, 2, 3]).
X = [],
Y = [1, 2, 3] ;
X = [1],
Y = [2, 3] ;
X = [1, 2],
Y = [3] ;
X = [1, 2, 3],
Y = [] ;
false.

?- append2(X, Y, [1, 2, 3]).
X = [],
Y = [1, 2, 3]. 
```

# c# - 是否可以将 UInt16 编组为枚举？

> ID：11360027
> 
> 赞同：2
> 
> 时间：2012-07-06T10:00:21.197
> 
> 标签：c#, pinvoke

我有一个字节数组需要编组到以下结构中：

```
[StructLayout(LayoutKind.Sequential, Pack = 4)]
internal struct ACSEventHeader_t
{
    public UInt32 acsHandle;
    public EventClasses eventClass;
    public UInt16 eventType;
}; 
```

EventClasses 枚举定义为：

```
internal enum EventClasses
{
    Request = 0,
    Unsolicited = 1,
    ConnectionConfirmation = 2,
    CommandConfirmation = 5
} 
```

我用来执行此操作的代码如下所示（eventBuf.Data 的类型为 byte[]）：

```
ACSEventHeader_t h = new ACSEventHeader_t();
IntPtr pt1 = Marshal.AllocHGlobal(eventBuf.Data.Length);
Marshal.Copy(eventBuf.Data, 0, pt1, eventBuf.Data.Length);
h = (ACSEventHeader_t)Marshal.PtrToStructure(pt1, typeof(ACSEventHeader_t));
Marshal.FreeHGlobal(pt1); 
```

按照代码执行此操作将毫无例外地工作，但 ACSEventHeader_t 结构的 eventClass 属性具有错误的值。将类型更改为 UInt16 会得到正确的值，但是我没有枚举。

我试图将 [MarshalAs(UnmanagedType.U2)] 添加到 eventClass 属性，但这会产生此异常：

```
Cannot marshal field 'eventClass' of type 'ACSEventHeader_t': 
enter code here`Invalid managed/unmanaged type combination (Int32/UInt32 must be
paired with I4, U4, or Error). 
```

任何帮助将非常感激...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T10:03:26.110

只需更改您声明的方式`enum`：

```
internal enum EventClasses : short
{
    Request = 0,
    Unsolicited = 1,
    ConnectionConfirmation = 2,
    CommandConfirmation = 5
} 
```

默认情况下`enum`s 是类型`Int32`，但您可以将它们的类型显式设置为您需要的类型。

# javascript - 商店同步问题

> ID：11360028
> 
> 赞同：0
> 
> 时间：2012-07-06T10:00:24.503
> 
> 标签：javascript, extjs, sencha-touch-2

## 我正在尝试做的事情：

让用户能够在本地存储数据，直到他决定全部上传。为此，我将表单中的数据填充到模型中，然后使用该模型填充存储（同步）。这家商店有一个本地存储代理。
*离线商店.js*：

```
Ext.define('blahblah.store.offlineStore',{
extend:'Ext.data.Store',
config:{
    model:'blahblah.model.myModel',
    id: 'offlineRegisterStore',
    sorters:'xyz',
    grouper:function(record){
        return record.get('xyz')[0];
    },
    proxy: {
        type: 'localstorage',
        id: 'offlineRegisterStoreid'
    }
 ... 
```

现在，当用户按下同步按钮时，我将数据从该离线商店复制到另一个具有执行 REST 调用的代理的商店：
*OnlineStore*：

```
 Ext.define('blahblah.store.upStore', {
     extend: 'Ext.data.Store',
     config: {
        model: 'blahblah.model.myModel',
        id: 'abc',
        sorters: 'xyz',
        grouper: function (record) {
          return record.get('xyz')[0];
        },
        proxy: {
        type: 'rest',
        url: HOST,
        headers: HEADERS,
        reader: {
            type: 'json'

        },
        writer: {
            type: 'json'
        }
    ... 
```

## 问题：

不幸的是，在我将**离线商店**中的数据添加到其中之后，我的**在线商店**甚至没有执行。因此，不会进行 REST 调用。我意识到当商店同步未更改的数据时会发生这种情况。这很奇怪，因为在将数据从离线商店复制到在线商店之前，我没有向在线商店添加任何内容。 `store.sync()`

 **所以我在创建它之后`console.log`就在**网上商店做了一个。**我看到这家商店已经有填写好的表格数据了。而且，我猜这就是为什么`sync()`不执行，因为我正在将相同的数据添加回其中，就在这一次，来自**离线商店**。我对这**家在线商店**如何以及从何处获取数据感到困惑。**在将线下商店**中的任何内容添加到**在线商店**之前，
我也尝试过，但它对商店内容没有影响。 `store.removeAll()`

 ****一定要告诉您是否需要查看更多代码。

**编辑 1**：我如何填充离线商店 - 我创建模型的一个实例，用表单数据填充它并执行`offlineStore.add(myModel)`. 在这之后我做`offlineStore.sync()`。这就是我用数据填充模型的方式：

```
var myModel = Ext.create('blahblah.model.myDataModel',{  
    datafield1 = formdata1,
    datafield2 = formdata2
}); 
```

我在什么时候检查在线商店：
当用户单击表单的提交按钮时，我**获取**离线商店并**创建**在线商店。令人惊讶的是，我刚刚观察到不仅在线商店，甚至离线商店在我做的时候也有表单数据`getStore`。`sync()`所以基本上数据甚至在我执行它们或添加数据填充模型之前就进入了离线和在线商店？这让我更加困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:28:23.453

[终于从Sencha 论坛](http://www.sencha.com/forum/showthread.php?154390-Store-not-syncing-properly&p=850819&viewfull=1#post850819)找到了解决我的问题的方法：设置[`record.phantom = true`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-property-phantom)。

在向在线商店（从离线商店）添加记录之前，我执行了上面的代码。现在，当存储同步时，它认为新添加的记录确实是一条新记录，因此发出了 POST 请求。

我还必须补充一点，如果您改为设置[`record.dirty = true`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-property-dirty)，则商店会发送 PUT 请求而不是 POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:28:01.340

当您说您“将数据从表单填充到模型中”时，我猜这两个商店都会获取该数据，因为它们都绑定到该模型。您究竟在什么时候检查在线商店并查看表单数据？它会在表单内的每次击键时更新吗？

关于如何解决这个问题的一些想法：

*   **没有`Ext.data.Store`离线数据**- 您可能希望将数据存储在完全分离的结构中，直到用户提交它，某种自定义表单支持对象而不是离线存储。这可能意味着复制模型的某些部分，但肯定有一种方法可以防止这种情况（例如在其他地方定义字段并使用它们扩展 ExtJS 模型和您的自定义对象）。

*   **覆盖`sync`函数和过滤数据**- 您可以添加模型属性`submitted`并覆盖商店的同步方法以仅同步具有`submitted===true`. 因此，您在本地拥有存储中的所有数据，但仅将批准的数据项传输到服务器。

*   **相同的商店对象**- 您是否碰巧以不同的名称拥有相同的商店对象？您正在定义具有不同 ID 的不同商店，但您是否检查过它们实际上是不同的？听起来他们现在随时都会持有相同的数据？！

让我知道这是否有帮助。******

# jsf - 在 JSF 中向 selectOneMenu 添加“未选择”选项的最佳方法

> ID：11360030
> 
> 赞同：43
> 
> 时间：2012-07-06T10:00:25.553
> 
> 标签：jsf, selectonemenu

我想知道什么是允许用户在 selectOneMenu 中不选择任何内容的最佳或最简单的方法。

我的例子：我有一个注册用户列表，管理员应该能够按一些标准过滤显示的用户列表。这些标准，如用户类型（员工、客户、...）可以由 selectOneMenus 选择，如下所示：

```
<h:selectOneMenu value="#{myBean.selectedUsertype}" converter="#{usertypeConverter}">
<f:selectItems value={myBean.usertypes}" />
</h:selectOneMenu> 
```

当相应的 selectOneMenu 由使用转换器的 POJO 列表支持时，如何向列表中添加一个项目，表明用户没有选择任何特定项目？目前我有一个显示标签“---”的虚拟用户类型对象，但这在我的应用程序的其他领域引起了一些问题，我认为这不是最好的解决方案。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-07-09T14:48:57.633

只需将选择项值显式设置为`null`.

```
<h:selectOneMenu value="#{bean.selectedItem}">
    <f:selectItem itemValue="#{null}" itemLabel="--select--" />
    <f:selectItems value="#{bean.availableItems}" />
</h:selectOneMenu> 
```

不，像这样的空字符串`itemValue=""`是不够的。它真的必须是`null`。否则，您会遇到本问答中所述的麻烦：[在 ap:selectOneMenu 中使用带有空值/空值的“请选择” f:selectItem](https://stackoverflow.com/questions/17052503/using-a-please-select-fselectitem-with-null-empty-value-inside-a-pselectonem/)。

如果该项目恰好是`required="true"`并且您使用的是 JSF 2.x，那么您*可以*添加`noSelectionOption="true"`到选择项目。这仅在您*还*设置了选择组件**时才有用。**一旦最终用户选择了不同的项目，它将在列表中隐藏空选项，从而无法重新选择空选项。*`hideNoSelectionOption="true"`*

 *```
<h:selectOneMenu value="#{bean.selectedItem}" hideNoSelectionOption="true">
    <f:selectItem itemValue="#{null}" itemLabel="--select--" noSelectionOption="true" />
    <f:selectItems value="#{bean.availableItems}" />
</h:selectOneMenu> 
```

另请参阅“选择项标签”部分下[的 JSF 权威指南的第 114 页：](https://books.google.nl/books?id=29ddDwAAQBAJ&pg=PA114&lpg=PA114&dq=%22note%20that%20a%20select%20item%20with%20value%22&source=bl&ots=IG2HUaZFFL&sig=ACfU3U2zT2c7EHbUieDPsih0a9KM3YH2Yw&hl=en&sa=X&ved=2ahUKEwj4hbex7IXyAhWXkWoFHdRVAoEQ6AEwAHoECAIQAw#v=onepage)

> 请注意，如果与选择组件的属性`#{null}`关联的 bean 属性为 ，则可以使用值为 的选择项来呈现默认选择。如果您查阅过 的标签文档，那么您可能已经注意到该属性并认为它旨在表示“无选择选项”。事实上，这不是真的。许多初学者确实是这样认为的，正如您在互联网上的许多论坛、问答网站和劣质教程中看到的那样。尽管具有误导性的属性名称，但它并不代表“无选择选项”。`value``null``<f:selectItem>``noSelectionOption`
> 
> 更好的属性名称应该是`hideWhenOtherOptionIsSelected`，即使这样，它也仅在父选择组件具有明确的`hideNoSelectionOption="true"`属性集时才有效。因此，`hideWhenOtherOptionIsSelectedAndHideNoSelectionOptionIsTrue`最终将是最不言自明的属性名称。`noSelectionOption`不幸的是，当在 JSF 1.2 中实现时，这并没有得到很好的考虑。不需要两个属性才能使该属性起作用。该属性对的主要目的是防止网站用户在组件已经选择了非`null`值时能够重新选择“无选择选项”。例如，通过在方法中准备它，或者通过在表单提交后使用非值`@PostConstruct`重新渲染组件。`null`

[版权免责声明：本书是我写的。]

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-06T10:28:18.813

添加一个具有空值的**selectItem ；**

```
<h:selectOneMenu value="#{bean.question}" required="true" requiredMessage="Please select a question">
    <f:selectItem itemValue="#{null}" itemLabel="Select" />
    <f:selectItems value="#{bean.questions}" />
</h:selectOneMenu> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-19T11:55:48.100

我们可以在 primefaces 中（当我们必须使用`<p:selectOneMenu`... 出于某种原因，例如使用`<p:ajax`..）添加以下空项：

```
<f:selectItem itemValue="#{null}" itemLabel="--select--"  itemDisabled="#{Mybean.value ne null}" /> 
```

注意：在这种情况下，我们不需要以下两个标签：

```
hideNoSelectionOption="true" 
```

和

```
noSelectionOption="true" 
```*

# linq-to-sql - 是否可以创建投影方法？[linq2sql]

> ID：11360032
> 
> 赞同：0
> 
> 时间：2012-07-06T10:00:30.307
> 
> 标签：linq-to-sql, c#-4.0

我希望能够做这样的预测：

```
var result = from record in MyTable
             select MapTo( record );

             /*
             select new RecordModel( )
             {
                 RecordId = record.Id,
                 Property1 = record.Property1
             };
             */

private RecordModel MapTo( MyTable dbRecord )
{
    return new RecordModel( )
    {
        RecordId = dbRecord.Id,
        Property1 = dbRecord.Property1
    };
} 
```

但我总是得到一个“NotSupportedException”（不支持对 sql 的翻译）。我不确定这是否可能，但它会很好^^

也许当我使用表达式时这是可能的，但我不知道如何编写这样的表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:09:09.927

Linq 尝试将该方法添加到查询中，但发现它无法转换为 Sql。

为了能够在 Linq 查询中执行任何 CLR 方法，您需要先执行它的 sql 部分，以便您对内存中的对象进行操作。像这样：

```
var result = from record in MyTable.ToList()
             select MapTo(record); 
```

任何强制 MyTable 枚举其条目的东西都应该有效。

# google-sheets - 如何连接一列数据的一部分

> ID：11360035
> 
> 赞同：-1
> 
> 时间：2012-07-06T10:00:36.633
> 
> 标签：google-sheets, google-sheets-formula

是否可以使用单元格来定义公式范围的结尾？

本质上，我想使用该`JOIN()`语句来连接一列数据的一部分。

数据从一个单元格开始，比如 A5，然后运行到一个包含单词“total”的单元格。我创建了一个单元格（我们称之为 L12），它返回可用数据的行数。

我想使用该单元格来构成`JOIN()`公式范围详细信息的一部分，因此：

```
=JOIN(" ", A5: A[the value in L12]). 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T19:52:33.787

我发现indirect() 函数完全符合我的需要。

查看谷歌函数列表[https://support.google.com/docs/bin/static.py?hl=en&topic=25273&page=table.cs](https://support.google.com/docs/bin/static.py?hl=en&topic=25273&page=table.cs)

# javascript - 从 mongodb 打印查询的问题

> ID：11360036
> 
> 赞同：0
> 
> 时间：2012-07-06T10:00:38.990
> 
> 标签：javascript, json, node.js, mongodb, express

我正在尝试了解更多关于 node.js（express 框架）和 mongodb（官方驱动程序）的信息。

我有这个代码

```
 db.open(function(err,db){
    if(!err){
      console.log ('we are connected');

      db.collection('post',function(err,collection){

        collection.find(function(err,posts){
          if(!err){
          res.json(posts);
          }
        });

     });

  }
 }); 
```

它应该查询数据库并打印结果。但我不知道如何以 json 格式将查询打印到浏览器。

我已经尝试过 JSON.stringify 但没有任何结果:(

正在做：

```
 collection.find().toArray(function(err,posts){
      if(!err){
        res.json(posts);
      }
    }); 
```

（注意 toArray 函数）它可以工作，但我听说这是一种不好的做法，因为会浪费大量内存。

有没有更有效的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:58:30.677

您还可以使用游标方法`.each()`或`.nextObject()`一次对单个文档进行操作，而无需将所有内容都拉入内存中的数组中`toArray()`。

详细信息：[https ://github.com/mongodb/node-mongodb-native/#find](https://github.com/mongodb/node-mongodb-native/#find)

# oracle-adf - ADF：在 java 方法中获取 InputText 的值

> ID：11360038
> 
> 赞同：1
> 
> 时间：2012-07-06T10:00:44.957
> 
> 标签：oracle-adf

我有以下问题：从一个按钮调用一个java方法，这个方法在同一页面中会有inputText的当前值，你可以这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T12:40:49.950

1.create a managed bean. 2.define your method use this code ::

```
FacesContext facesContext = FacesContext.getCurrentInstance();
    UIViewRoot root = facesContext.getViewRoot();
    RichInputText inputText = (RichInputText)root.findComponent("it1");
    String val=inputText.getValue();

where it1 is id for your input text 
```

3.select button's action listener from the button property window. 4.call your managed bean and method

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:34:46.700

`value`在 inputText 上指定一个属性，并使用对具有 View 或更高范围（例如`value="#{viewScope.Bean.field}"`）的托管 bean 中的字段的 EL 引用，在您的 bean 中，您将拥有：

```
private String field;
public String getField(){ 
    return field; 
};
public void setField(String field){
    this.field = field;
}; 
```

然后在同一个 bean 中指定一个`actionListener`对`commandButton`处理程序方法的引用：`actionListener="#{viewScope.Bean.handleButton}"`。`field`以这种方式访问​​：

```
public void handleButton(ActionEvent event){
    System.out.println('Input field content: ' + getField());
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T15:52:26.603

有点难以说出你在问什么，但如果你想问：当我单击一个按钮时，我希望该按钮调用支持 Java bean 中的方法并访问 ADF Faces 页面上输入文本字段的值，答案是肯定的。您需要在输入文本字段上设置 Binding 属性并向按钮添加方法调用。使用按钮的 ActionListener 属性，并使用 actionlistener 方法指定或创建支持 bean。然后为输入文本字段设置绑定属性。支持 bean 应该具有文本字段的 get/set 方法，您可以使用它们来获取对文本字段的引用并调用 get/setValue() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-05T05:14:21.800

明白了）

```
 <af:panelFormLayout id="pfl1">
      <f:facet name="footer">
        <af:commandButton text="отправить" id="cb1" 
                          actionListener="#{inBean.doSave}" partialSubmit="true"/>
      </f:facet>
      <af:inputText label="Ввести данные:" value="#{inBean.myParam}"  id="it1"/>
      <af:outputText value="#{inBean.myParam}" id="ot1" partialTriggers="cb1"/>
    </af:panelFormLayout>

    public void doSave(ActionEvent actionEvent) {
   // ActionResponse response = (ActionResponse)FacesContext.getCurrentInstance().getExternalContext().getResponse();
   // response.setRenderParameter("myParam", myParam);
    FacesContext context = FacesContext.getCurrentInstance();
    UIViewRoot root = context.getViewRoot();
    RichInputText inputText = (RichInputText) root.findComponent("it1");
    myParam = (String)inputText.getValue();
} 
```

# java - 引用类的索引违规，Morphia

> ID：11360039
> 
> 赞同：1
> 
> 时间：2012-07-06T10:00:45.340
> 
> 标签：java, mongodb, java-ee-6, morphia

我正在尝试与 morphia(0.99)/mongoDB(2) 保持一对（所有者）对多（汽车）的关系。当我尝试使用对类 Owner 的引用来持久化 Car 类时，Morphia 会引发 MongoException$DuplicateKey 异常。这很奇怪，因为我认为 morphia 中不存在级联持续存在。

当我坚持 Car 时，为什么 morphia 会在引用的类 Owner 上为索引 *index_username* 抛出重复键异常？

波乔：

```
@Entity(noClassnameStored=true, value="base")
public class Base {

    @Id
    private ObjectId id;
    ...

@Entity(value = "owner", noClassnameStored = true)
@Polymorphic
public class Owner extends Base {

    @Indexed(value = IndexDirection.ASC, unique=true, dropDups=true, name="index_username")
    private String userName;

    @Reference
    private Set<Car> cars = new HashSet<Car>();
    ... 

@Entity(value="car", noClassnameStored=true)
@Polymorphic
public class Car extends Base{
    @Reference
    private Owner owner 
```

豆：

```
car.setOwner(owner);
BeanUtil.getDataStore().save(car); 
```

例外：

```
com.mongodb.MongoException$DuplicateKey: E11000 duplicate key error index: myapp.car.$index_username  dup key: { : null } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:09:45.613

您不能添加多个`null`参考。为所有实体添加一个值（最多 1 个`null`）或`sparse=true`在索引上设置，以便您可以拥有唯一值，但允许多个`null`

# php - 带有 nginx 和子目录的 php 的 .user.ini

> ID：11360042
> 
> 赞同：1
> 
> 时间：2012-07-06T10:01:08.607
> 
> 标签：php, nginx, fastcgi, ini

# 设置

我已经安装了 nginx 1.2.2 和 PHP 5.4.4。我已经将 PHP 配置为运行为 FastCGI 的 nginx。

nginx 配置片段：

```
location ~ \.php$ {
    root           E:/Websites/localhost;
    fastcgi_pass   127.0.0.1:9000;
    fastcgi_index  index.php;
    fastcgi_param  SCRIPT_FILENAME  E:/Websites/localhost/$fastcgi_script_name;
    include        fastcgi_params;
} 
```

我有许多在同一系统上运行的本地虚拟站点。为了自定义每个要求，我在每个站点的根文件夹中创建了 .user.ini 文件，根据 PHP 文档，该文件也应该适用于子文件夹。

请注意，这是一个开发环境，不是实时的。所以我可以灵活地定制一些东西。

# 问题

当我从浏览器访问任何站点时，它都可以正常工作，除非我不深入某个子文件夹。似乎 .user.ini 在子目录中不起作用 - 至少在我的配置中。

根据 PHP 文档（[http://www.php.net/manual/en/configuration.file.per-user.php](http://www.php.net/manual/en/configuration.file.per-user.php)）：

> 除了主 php.ini 文件之外，PHP 还会扫描每个目录中的 INI 文件，**从请求的 PHP 文件的目录开始，一直到当前文档根目录**

# 求救

有没有人在 nginx 下配置 .user.ini - 请您帮帮我。

注意：有人在2009年报告了一个错误：[https ://bugs.php.net/bug.php?id=50374](https://bugs.php.net/bug.php?id=50374)

# 更多信息（编辑）

PHPInfo() 说（在根目录和子文件夹中）：
* 服务器 API：*CGI/FastCGI*
* user_ini.filename：*.user.ini*（本地和主）

php_sapi_name() 说*cgi-fcgi*

这些值存在于根文件夹和子目录的 phpinfo() 中。所以 PHPInfo() 没有区别。

进一步确认它作为**CGI/FastCGI**运行的是根文件夹从**.user.ini**获取配置，而不是子文件夹。

```
// .user.ini
auto_prepend_file = "E:\Websites\localhost\user.ini.php" 
```

和

```
// user.ini.php
<?php
printf('Hi from: %s', __FILE__);
?> 
```

这实际上可能是一个错误，但有没有人以这种方式使用 nginx 配置 PHP 并且没有遇到问题。在这种情况下请求分享版本号和平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T06:21:38.510

您只部分引用了您链接到的 PHP 文档。它还说`These files are processed only by the CGI/FastCGI SAPI`。

我怀疑您使用的不是 CGI/FastCGI SAPI，而是其他一些 SAPI ... PHP-FPM SAPI 也许？

正如您可能已经从上面了解到的，运行 FastCGI 并不等同于使用 CGI/FastCGI SAPI。您还可以使用其他 SAPI（例如 PHP-FPM）运行 FastCGI。

BTW SAPI = 服务器 API。您可以在 phpinfo 文件中查找您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T20:14:54.830

这实际上是一个比 nginx 更大的问题，但有一个永久的解决方案可用。添加指令选项的替代 ini_set 方法具有很大的局限性，因此它并不是一个真正好的长期解决方案。谢谢。 [http://www.ait-pro.com/aitpro-blog/4349/misc-projects/wordpress-tips-tricks-fixes/php5-3-x-php5-4-x-user-ini-file-does- not-work-known-php5-3-x-user-ini-fastcgi-wordpress-zend-issue/](http://www.ait-pro.com/aitpro-blog/4349/misc-projects/wordpress-tips-tricks-fixes/php5-3-x-php5-4-x-user-ini-file-does-not-work-known-php5-3-x-user-ini-fastcgi-wordpress-zend-issue/)

# iphone - 我们可以使用新的 Titanium 移动 SDK 创建和播放多个视频播放器吗？

> ID：11360043
> 
> 赞同：0
> 
> 时间：2012-07-06T10:01:13.297
> 
> 标签：iphone, ipad, video, titanium

现在，我们可以在单个窗口上创建多个视频播放器吗？与之前的 SDK 一样，我们只有全屏视频播放器，之后我们可以嵌入视频播放器，但它只能播放最后一个视频播放器。随着新 SDK 的推出，现在是否可行？

我正在尝试循环创建多个视频播放器。我正在使用 Titanium 移动 SDK 2.0.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:56:34.770

尝试使用这个模块。您可能会发现它对您有帮助

[https://marketplace.appcelerator.com/apps/736?532321060](https://marketplace.appcelerator.com/apps/736?532321060)

# c - gcd计算优化

> ID：11360044
> 
> 赞同：0
> 
> 时间：2012-07-06T10:01:13.783
> 
> 标签：c, optimization

我有一个算法，它很大程度上基于使用有符号整数的最大公约数，所以我试图让它更快。请不要告诉我这种优化是不必要的，因为我已经将性能提高了 50%。我没有看到任何优化的潜力，但我可能错了。

在以下代码中，断言 b != 0

```
Integer gcd(Integer a, Integer b)
{
   if ( a == 0 )
   {
      return b;
   }
   if ( a == b )
   {
      return a;
   }
   const Integer mask_a = (a >> (sizeof(Integer) * 8 - 1));
   a = (a + mask_a) ^ mask_a; // a = |a|
   const Integer mask_b = (b >> (sizeof(Integer) * 8 - 1));
   b = (b + mask_b) ^ mask_b; // b = |b|
   if ( ~a & 1 )
   {
      if ( b & 1 )
      {
         // 2 divides a but not b
         return gcd(a >> 1, b);
      }
      else
      {
         // both a and b are divisible by 2, thus gcd(a, b) == 2 * gcd( a / 2, b / 2)
         return gcd(a >> 1, b >> 1) << 1;
      }
   }
   if ( ~b & 1 )
   {
      // 2 divides b, but not a
      return gcd(a, b >> 1);
   }
   if ( a > b )
   {
      // since both a and b are odd, a - b is divisible by 2
      // gcd(a, b) == gcd( a - b, b)
      return gcd((a - b) >> 1, b);
   }
   else
   {
      // since both a and b are odd, a - b is divisible by 2
      // gcd(a, b) == gcd( a - b, b)
      return gcd((b - a) >> 1, a);
   }
} 
```

附带说明：整数是`int`,`long`或`long long`. 它是上面某处的typedef。

如您所见，在将 a 和 b 带到其各自的绝对值方面进行了优化，这在我的机器上运行良好（不一定在所有 afaik 上）。我有点不喜欢分支混乱。有什么方法可以改善吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:19:14.593

另一种变体，二进制 GCD，带有班次查找表，

```
typedef unsigned /* long long int */ UInteger;

Integer lookup(Integer a, Integer b) {
    static const int lut[] =
        { 8, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 4, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 5, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 4, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 6, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 4, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 5, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 4, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 7, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 4, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 5, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 4, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 6, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 4, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 5, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        , 4, 0, 1, 0, 2, 0, 1, 0
        , 3, 0, 1, 0, 2, 0, 1, 0
        };
    if (a == 0) return b;
    const Integer mask_a = a >> (sizeof(Integer) * 8 - 1);
    UInteger a1 = (a + mask_a) ^ mask_a;
    const Integer mask_b = b >> (sizeof(Integer) * 8 - 1);
    UInteger b1 = (b + mask_b) ^ mask_b;

    int sa = 0, sb = 0, shift;
    do {
        shift = lut[a1 & 0xFF];
        a1 >>= shift;
        sa += shift;
    }while(shift == 8);
    do {
        shift = lut[b1 & 0xFF];
        b1 >>= shift;
        sb += shift;
    }while(shift == 8);
    // sa holds the amount to shift the result by, the smaller of the trailing zeros counts
    if (sa > sb) sa = sb;
    // now a1 and b1 are both odd
    if (a1 < b1) {
        UInteger tmp = a1;
        a1 = b1;
        b1 = tmp;
    }
    while(b1 > 1) {
        do {
            a1 -= b1;
            if (a1 == 0){
                return (b1 << sa);
            }
            do {
                a1 >>= (shift = lut[a1 & 0xFF]);
            }while(shift == 8);
        }while(b1 < a1);
        do {
            b1 -= a1;
            if (b1 == 0){
                return (a1 << sa);
            }
            do {
                b1 >>= (shift = lut[b1 & 0xFF]);
            }while(shift == 8);
        }while(a1 < b1);
    }
    return (1 << sa);
} 
```

在我的机器上，这比欧几里得算法快一点，欧几里得算法比递归二进制 GCD 或没有移位查找表的算法快很多。具有 16 元素查找表的版本比 Euclid 稍慢。

但是，如果您的输入非常小，正如您在评论中所说，为 GCD 本身计算查找表可能会更快，至少对于小的`a`和`b`（例如`0 <= a,b <= 50`），并且只有在输入为时才回退到计算大于查找表所允许的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:40:19.180

我已经做了一些测试和简单的算法，如下所示：

```
int gcd(int a,int b)
{
    while(1)
    {
        int c = a%b;
        if(c==0)
          return abs(b);
        a = b;
        b = c;
    }
} 
```

比您的代码快 5 倍左右。

* * *

试试这个：

```
Integer gcd( Integer a, Integer b )
{
    if( a == b )
        return a;

    if( a == 0 )
        return b;

    if( b == 0 )
        return a;

    while( b != 0 ) { 
        Integer t = b;
        b = a % b;
        a = t;
    }

    return a;
} 
```

开头是@unkulunkulu 的代码 + 你的 IF。如果您的输入有很多琐碎的案例，它会更快。不幸的是，如果是这样的话，它不会比你的代码快多少，你也无能为力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T10:23:32.850

您可以通过用循环替换递归来优化它。即使您的编译器将尾递归调用优化为跳转，您仍然会在`a == 0`递归调用中进行不必要的检查和绝对值计算。

要处理非尾递归`gcd(a >> 1, b >> 1) << 1`，您必须引入一个累加器变量，该变量从零开始，用于将 . 之前的结果左移`return`。

示例（未经测试）：

```
Integer gcd(Integer a, Integer b)
{
    const Integer mask_a = a >> (sizeof(Integer) * 8 - 1);
    a = (a + mask_a) ^ mask_a;
    const Integer mask_b = b >> (sizeof(Integer) * 8 - 1);
    b = (b + mask_b) ^ mask_b;

    int shift = 0;
    while (a != 0 && a != b) {
        if (~a & 1) {
            a >>= 1;
            if (!(b & 1)) {
                b >>= 1;
                shift++;
            }
        } else if (~b & 1) {
            b >>= 1;
        } else if (a > b) {
            a = (a - b) >> 1;
        } else {
            b = (b - a) >> 1; // the error was here and i have to write 6 chars about it, formerly it was a = (b - a) >> 1;
        }
    }
    return b << shift;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T10:23:36.047

如果您的编译器支持它，您可以使用内置函数，例如`likely()`or `unlikely()` for each `if()`，这将允许编译器进行更多优化。

这些函数是在 Linux 内核中定义的。使用 gcc 将其替换为`__builtin_expect()`.

# .htaccess - modx rev 中的好网址 - 得到 403

> ID：11360048
> 
> 赞同：0
> 
> 时间：2012-07-06T10:01:19.373
> 
> 标签：.htaccess, modx

在设置中打开 nice url 后出现 403 错误。
这是我的 htaccess 文件：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

设置的设置方式相同，我在不同的网站上使用了很好的网址。
我有清除缓存。

当我添加到页面`<a href="[[~1]]" title="some title">Some Page</a>`时，我得到正确的链接，但是在我转到此页面后，我再次得到 403 页面。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:14:31.380

您的 .htaccess 似乎是正确的 [这是默认设置]

*   从磁盘中删除所有缓存文件，不要只从管理器中清除缓存。

*   检查：'Check for Duplicate URIs Across All Contexts'，'Use Friendly Alias Path'被检查，资源实际上有一个别名。

但是，您得到的是 403 而不是 404？很确定您应该收到 404 错误您是否设置了资源组？确保您在测试时是该组的成员。

# exchange-server - 用户转发时，交换服务器是否会复制电子邮件数据？

> ID：11360052
> 
> 赞同：0
> 
> 时间：2012-07-06T10:01:32.953
> 
> 标签：exchange-server

假设我们有一个用户 a@domain.com，它向用户 b@domain.com 发送一封电子邮件。然后，用户 b@domain.com 将电子邮件转发到 c@domain.com 和 d@domain.com。

假设它是同一封电子邮件，交换服务器是否保留了 4 个不同的电子邮件数据副本，或者它只是将用户指向同一封电子邮件（仅具有不同的标题）？

如果用户 b@domain.com 添加了一个简单的行（或更多，这并不重要），但保持旧的电子邮件数据完整，交换服务器是否保留该邮件的修订历史并仅发送增量，或者它只是为 c@domain.com 和 d@domain.com 构建一个全新的电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:20:49.223

> 假设它是同一封电子邮件，交换服务器是否保留了 4 个不同的电子邮件数据副本，或者它只是将用户指向同一封电子邮件（仅具有不同的标题）？

无论您的任何具体要求如何，发送的每封电子邮件*都是*一封新电子邮件（所有新的标头信息等都是电子邮件的一部分）。如果您向 30 个人发送 1 封电子邮件（都在同一个交换商店），那么系统中只有 1 个完整电子邮件版本，并且 30 个人中的每人都有 30 个电子邮件链接。附件也以这种方式存储。

> 如果用户 b@domain.com 添加了一个简单的行（或更多，这并不重要），但保持旧的电子邮件数据完整，交换服务器是否保留该邮件的修订历史并仅发送增量，或者它只是为 c@domain.com 和 d@domain.com 构建一个全新的电子邮件？

我不确定修订历史，但再次发送的任何电子邮件都是*新*电子邮件，无论交换商店如何，都会完整发送。如果转发的电子邮件包含附件且收件人位于同一 Exchange 商店，则 Exchange 不会复制该附件。

（这个问题很可能会移到[http://serverfault.com](http://serverfault.com)）

# android - 将 EditText / TextView 转换为字符串？

> ID：11360060
> 
> 赞同：0
> 
> 时间：2012-07-06T10:02:02.360
> 
> 标签：android, string, textview, android-edittext

我们的示例代码

```
EditText txtData = (EditText) findViewById(R.id.txtData);
Button btnReadSDFile = (Button) findViewById(R.id.btnReadSDFile);
btnReadSDFile.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        // write on SD card file data in the text box
        try {
            //Read a file from SDCard to TextBox(EditText)
            File myFile = new File("/mnt/sdcard/config_data.med");
            FileInputStream fIn = new FileInputStream(myFile);
            BufferedReader myReader = new BufferedReader(new InputStreamReader(fIn));
            String aDataRow = "";
            String aBuffer = "";
            while ((aDataRow = myReader.readLine()) != null) {
                aBuffer += aDataRow + "\n";
            }
            txtData.setText(aBuffer);
            myReader.close();
            String s = txtData.getText().toString();
            Log.e("txtData",s);
        }catch (Exception e) {
            Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
        }
    }
}); 
```

我们的原始文件内容

```
Welcome
To
All 
```

我们的日志结果截图

![在此处输入图像描述](../Images/f23e2273c9ab6ca03f6343c9c4572c83.png)

为什么我们的内容在这里崩溃？我们如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:04:51.377

这应该是编码问题。尝试这个：

```
FileInputStream fIn = new FileInputStream(myFile);
BufferedReader myReader = new BufferedReader(new InputStreamReader(fIn, "UTF-8")); 
```

参考不同的编码字符集 [编码字符集](http://developer.android.com/reference/java/nio/charset/Charset.html "编码字符集")

# ruby-on-rails - ActiveRecord 方法减量！也更新其他属性。这是为什么？

> ID：11360063
> 
> 赞同：1
> 
> 时间：2012-07-06T10:02:13.507
> 
> 标签：ruby-on-rails, activerecord

我有一个基本的身份验证系统，就像 Michael Hartl 的[Ruby on Rails 教程](http://ruby.railstutorial.org/chapters/sign-in-sign-out?version=3.2#sec:remember_me)中的一样。基本上，记住令牌存储在 cookie 中。我从 Railscast #124 实现了 Ryan Bate 的[Beta-Invitations](http://railscasts.com/episodes/124-beta-invitations)，您可以在其中发送有限数量的邀请。这样做时，我遇到[了当前用户在发送邀请后退出](https://stackoverflow.com/questions/10064057/rails-mailer-has-issues-with-session-persistence-and-with-sending-email)的问题。这是由邀请模型中的代码引起的：

邀请.rb

```
belongs_to :sender, :class_name => 'User'
[...]
before_create :decrement_sender_count, :if => :sender
[...]
def decrement_sender_count
  sender.decrement! :invitation_limit
end 
```

在日志中我看到了 sender.decrement！不仅更新了invitation_limit，还更新了remember_token：

```
UPDATE "users" SET "invitation_limit" = 9982, "remember_token" = 'PYEWo_om0iaMjwltU4iRBg', "updated_at" = '2012-07-06 09:57:43.354922' WHERE "users"."id" = 1 
```

我发现了一个[丑陋的解决方法](https://stackoverflow.com/a/11359742/422656)，但我很想知道问题到底是什么。由于我不知道从哪里开始，我将向您展示来自用户控制器的更新方法。还有什么相关的？

users_controller.rb

```
def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user])
    flash[:success] = t('success.profile_save')
    sign_in @user
    redirect_to @user
  else
    flash.now[:error] = t('error.profile_save')
    render 'edit'
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:21:05.223

在我看来，您在 ActiveRecord 更新方法中遇到了一个常见的陷阱：

[在这里](http://apidock.com/rails/ActiveRecord/Persistence/decrement!)查看 ActiveRecord 文档，您可以看到减量的实际实现！方法：

```
def decrement!(attribute, by = 1)
  decrement(attribute, by).update_attribute(attribute, self[attribute])
end 
```

有趣的部分是在 self 对象上调用的 update_attribute - 虽然该方法暗示 ActiveRecord 只会更新指定的属性，但它确实更新了 self 对象的所有脏属性。

这意味着，如果您在任何时候更改了对象的记住令牌属性，它将在 update_attributes 调用期间保存到数据库中。

如果我是对的，那就是问题所在 - 只需确保在运行时没有对 remember_token 属性进行任何更改。

除此之外，您可以考虑使用[ActiveRecord 的 update_column](http://apidock.com/rails/v3.2.1/ActiveRecord/Persistence/update_column)方法，该方法将更新数据库上的单个列，而无需对对象执行保存方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:30:00.833

`decrement!`调用`save`当然会触发保存回调。看起来这本书指导你做

```
before_save :create_remember_token
def create_remember_token
  self.remember_token = SecureRandom.urlsafe_base64
end 
```

这意味着保存用户将始终使记住令牌无效。我认为这是因为当用户更改密码时，记住令牌也会更改，但这意味着显然会有一些附带损害。

你可以使用`decrement_counter`which 本质上是

```
update users set counter_name = counter_name - 1 where id =12345 
```

不运行任何回调。这也避免了一些竞争条件场景。但是，每当用户更改时更改令牌必然会在您不期望的时候更改令牌 - 您可能只想在相关时更改它（也许当凭据已更改时）

# java - 如何在 Hibernate 中使用 fetch='join'？

> ID：11360067
> 
> 赞同：0
> 
> 时间：2012-07-06T10:02:20.480
> 
> 标签：java, hibernate

我在使用 Hibernate 时遇到了问题。表A一对一表B和表A一对一表C。现在我用get(A.class, id)方法，但是Hibernate生成了两条sql：第一个a join b，第二个是"select c" 在a和c中使用属性c时， fetch="join" 失败，谁能帮我找出原因？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:21:32.207

```
from Cat as cat
inner join cat.mate as mate
left outer join cat.kittens as kitten 
```

更多示例[在这里](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

# mysql - SQL 调试 - 忽略条件

> ID：11360070
> 
> 赞同：0
> 
> 时间：2012-07-06T10:02:24.457
> 
> 标签：mysql, sql

有人可以解释一下吗。我的 SQL：

```
SELECT 
    `offers`.`id`, 
    `offers`.`max_available`, 
    (SELECT COUNT( coupons.id ) FROM coupons WHERE coupons.status = 'Y' AND coupons.offer_id = offers.id) AS coupons_sold
FROM 
    `offers`
WHERE 
    `offers`.`status` IN ('P', 'S') AND 
    `offers`.`published_at` < 1341612000 AND 
    `offers`.`end_at` >1341567914 AND 
    `coupons_sold` < `offers`.`max_available` 
ORDER BY `offers`.`created_at` DESC
LIMIT 4 OFFSET 0 
```

这将返回我这 4 行：

```
id      max_available   coupons_sold
195     19              20
194     9999            0
193     9999            0
159     9999            93 
```

`ID 195`如果我在 where 有这种情况，怎么可能包含该行`coupons_sold < offers.max_available`？我一无所知！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:23:41.670

此查询会产生错误，因为您不能使用列表中`WHERE`的别名 in 子句`SELECT`。除非表`offers`也有`coupons_sold`列！

试试这个查询，而不是：

```
SELECT id, max_available, coupons_sold
FROM
  ( SELECT 
        `offers`.`id`, 
        `offers`.`max_available`, 
        ( SELECT COUNT( coupons.id ) 
          FROM coupons 
          WHERE coupons.status = 'Y' 
            AND coupons.offer_id = offers.id
         ) AS coupons_sold
         offers.created_at
    FROM 
        `offers`
    WHERE 
        `offers`.`status` IN ('P', 'S') AND 
        `offers`.`published_at` < 1341612000 AND 
        `offers`.`end_at` >1341567914
  ) AS tmp
WHERE coupons_sold < max_available 
ORDER BY created_at DESC
  LIMIT 4 OFFSET 0 ; 
```

# android - WebViewClient 类不适用于 android api 级别 15

> ID：11360071
> 
> 赞同：1
> 
> 时间：2012-07-06T10:02:28.407
> 
> 标签：android, android-layout, android-webview

在我的课堂上，我的 webview 是从 WebViewClient 扩展而来的

给出了代码片段：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);
    view = (WebView)findViewById(R.id.webView1);
    view.getSettings().setJavaScriptEnabled(true);
    view.loadUrl("http://192.168.1.102:8086/QOSKO/"); 
    view.setWebViewClient(new HelloWebChrome());
}

private class  HelloWebChrome extends WebViewClient{
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // TODO Auto-generated method stub
        view.loadUrl(url);
        return super.shouldOverrideUrlLoading(view, url);
    }
} 
```

在此我试图在 WebViewClient 类的帮助下将网站打开到我的应用程序中。此代码在 android api 级别 8 上运行，但相同的代码未在 android api 级别 15 上运行。

```
my ques is how to run WebViewClient class on android api level 15. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:13:56.083

我认为你的问题是这样的：

```
view.loadUrl(url); 
```

bcz 你有两次加载 url 首先是 view.loadUrl("http://192.168.1.102:8086/QOSKO/"); 另一个是 view.loadUrl(url); 在 webviewchromeclient 中发生异常尝试从这两个中删除一行并检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:12:31.587

这是一个[开放的问题](http://code.google.com/p/android/issues/detail?id=21177)

**sol1：**您需要动态地将 webview 添加到视图中。目前您正在使用`view = (WebView)findViewById(R.id.webView1);`

```
WebView view=new WebView(this); 
```

**sol2：**添加`android:hardwareAccelerated="true"`到 Webview 包含在 Manifest 中的实际 Activity。希望这对你有用。

# magento - Magento - 在不使用 CMS 的情况下在主页上显示某个类别的产品

> ID：11360075
> 
> 赞同：3
> 
> 时间：2012-07-06T10:02:36.690
> 
> 标签：magento, categories

我正在尝试呈现某个类别（主页产品）中的产品，该类别在我的 homepage.phtml 模板上具有类别 ID 123。

我还想使用我创建的新列表模板，该模板位于 /app/design/frontend/default/mytemplate/catalog/product/homeproducts.phtml 。它基本上是 list.phtml 的副本，但删除了工具栏和添加到购物车按钮。

我需要添加到 phtml 文件中以使用模板 homeproducts.phtml 调用类别 (123)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:07:03.343

## 将 Magento 类别配置为主页

**TL;DR：在系统 > 配置 > Web > 默认页面的管理员中执行此操作**

![首页路由配置截图](../Images/6d6a82f7f336f380091807c95d193a47.png)

Magento 使用 URL 字符串将（调度和匹配）请求路由到给定的动作控制器类。但是，当 URL 是

```
 http://site.com/ 
```

没有路由信息 - 没有匹配的字符串。在这种情况下，当[Front Controller](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/app/code/core/Mage/Core/Controller/Varien/Front.php#L28)调度时，由于其[`_getDefaultPath()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.1/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php#L259)方法，请求匹配标准（前端）路由器。这有效地使用了配置 ( `web/default/front`) 中的值来匹配，从而为您的主页提供 GUI 管理的值。

默认情况下，此值为“cms”，也称为“cms/index/index”，默认情况下是“home”标识的 CMS 页面。

您可以将此字符串更改为您喜欢的任何内容。将此值设置为示例数据的“目录/类别/视图/id/10”将使您的主页成为“家具”类别。

***SEO NB：****您将需要处理重复的内容问题。为类别启用规范 URL 可能会有所帮助。*

# servlets - 删除 cookie

> ID：11360077
> 
> 赞同：2
> 
> 时间：2012-07-06T10:02:38.020
> 
> 标签：servlets

如何使用 servlet 从客户端浏览器中删除 cookie？

```
 HttpSession ses=request.getSession(false);
        Cookie c[]=request.getCookies();

        for (int i=0; i<c.length; i++)  //Removing cookie, if present
        {
            if(c[i].getName().equals("UserID"))
            {
                System.out.println(c[i].getValue()+" is logging out --- Cookie Set to expire!");
                c[i].setMaxAge(0);
                response.addCookie(c[i]);
                break;
            }
        } 
```

有没有其他方法可以删除？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:08:51.970

`setMaxAge(0)`是删除 cookie 的唯一方法。最好在删除时设置这些 cookie 属性：

*   小路
*   领域

    ```
    Cookie c[]=request.getCookies();

    for (int i=0; i<c.length; i++)  //Removing cookie, if present
    {
        if(c[i].getName().equals("UserID"))
        {
            System.out.println(c[i].getValue()+" is logging out --- Cookie Set to expire!");
            c[i].setMaxAge(0);
            c[i].setPath(path);
            c[i].setDomain(domain);
            response.addCookie(c[i]);
            break;
        }
    } 
    ```

# mysql - mysql排序字段增量值

> ID：11360082
> 
> 赞同：5
> 
> 时间：2012-07-06T10:02:50.447
> 
> 标签：mysql, increment

说我有一张桌子

```
name             rank
-----------------------
John             1
Tit              3
Bernard          4 
```

Rank 2 丢失，可能已被删除或其他什么。我需要一个查询来增加排名字段。所以约翰是第一名，但蒂特现在是第二名，伯纳德是第三名。

任何地方都可能有多达 100 个等级，还有几个缺失。只要最小的等级被重置为数字 1，并且所有跟随增量，它应该是好的。

有任何想法吗？

用于更新排名字段的查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T10:13:20.940

这将更新 rank 字段，使其在没有漏洞的情况下递增：

```
SET @i := 0;
UPDATE tbl SET rank = @i:=@i+1 ORDER BY rank; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:12:18.753

您可以在不使用外部变量的情况下做到这一点：

```
UPDATE tbl a
INNER JOIN
(
    SELECT a.name, a.rank, COUNT(*) AS newrank
    FROM tbl a
    INNER JOIN tbl b ON a.rank >= b.rank
    GROUP BY a.rank
) b ON a.name = b.name AND a.rank = b.rank
SET a.rank = b.newrank 
```

# iphone - 我需要用 TableView 修复内存泄漏

> ID：11360084
> 
> 赞同：-3
> 
> 时间：2012-07-06T10:02:55.490
> 
> 标签：iphone, objective-c, xcode, ios5

这些是我得到的内存泄漏：http: [//twitter.com/AWEHOFFICIAL/status/221182174811004929/photo/1/large](http://twitter.com/AWEHOFFICIAL/status/221182174811004929/photo/1/large)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:08:43.440

如果您打开右侧窗格，您应该会看到泄漏的堆栈跟踪，这将帮助您追踪它。您还可以尝试使用应用程序的调试版本进行分析，以获得更好的符号信息。这可以通过在 Xcode 中修改项目的方案来实现。

# java - 没有 X11 的 Jfreechart

> ID：11360088
> 
> 赞同：2
> 
> 时间：2012-07-06T10:03:19.073
> 
> 标签：java, jfreechart

我正在使用 Jfreechart 创建图表。我正在创建`BufferedImage`图表并将其写入`OutputStream`.

它在显示环境中工作正常，但在`headless`环境中不工作。

请帮助您如何使其在这样的环境中工作。

我进入日志的异常：

```
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/WebAdmin] threw exception [Handler processing failed; nested exception is java.lang.InternalError: Can't connect to X11 window server using ':0.0' as the value of the DISPLAY variable.] with root cause
java.lang.InternalError: Can't connect to X11 window server using ':0.0' as the value of the DISPLAY variable.
    at sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)
    at sun.awt.X11GraphicsEnvironment.access$200(X11GraphicsEnvironment.java:65)
    at sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:110)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:74)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at java.awt.GraphicsEnvironment.createGE(GraphicsEnvironment.java:102)
    at java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironment.java:81)
    at sun.swing.SwingUtilities2.isLocalDisplay(SwingUtilities2.java:1457)
    at javax.swing.plaf.metal.MetalLookAndFeel.initComponentDefaults(MetalLookAndFeel.java:1556)
    at javax.swing.plaf.basic.BasicLookAndFeel.getDefaults(BasicLookAndFeel.java:148)
    at javax.swing.plaf.metal.MetalLookAndFeel.getDefaults(MetalLookAndFeel.java:1592)
    at javax.swing.UIManager.setLookAndFeel(UIManager.java:536)
    at javax.swing.UIManager.setLookAndFeel(UIManager.java:576)
    at javax.swing.UIManager.initializeDefaultLAF(UIManager.java:1345)
    at javax.swing.UIManager.initialize(UIManager.java:1455)
    at javax.swing.UIManager.maybeInitialize(UIManager.java:1422)
    at javax.swing.UIManager.getDefaults(UIManager.java:656)
    at javax.swing.UIManager.getColor(UIManager.java:698)
    at org.jfree.chart.JFreeChart.<clinit>(JFreeChart.java:263)
    at org.jfree.chart.ChartFactory.createBarChart(ChartFactory.java:893) 
```

我编辑的 catalina.sh 部分：

```
#   JSSE_HOME       (Optional) May point at your Java Secure Sockets Extension
#                   (JSSE) installation, whose JAR files will be added to the
#                   system class path used to start Tomcat.
#
#   CATALINA_PID    (Optional) Path of the file which should contains the pid
#                   of catalina startup java process, when start (fork) is used
#
# $Id: catalina.sh 609438 2008-01-06 22:14:28Z markt $
# -----------------------------------------------------------------------------

JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms1536m 
-Xmx1536m -XX:NewSize=256m -XX:MaxNewSize=256m -XX:PermSize=256m 
-XX:MaxPermSize=256m -XX:+DisableExplicitGC" 
```

感谢你的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:07:48.390

您很可能希望以[无头模式](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/headless/)调用您的 Java 程序：

```
java -Djava.awt.headless=true -cp ... come.your.Class 
```

或者，在任何图形代码之前的运行时（例如在一个`static {}`块中）：

```
System.setProperty("java.awt.headless", "true"); 
```

# google-maps - 如何触发谷歌地图天气层标记点击？

> ID：11360090
> 
> 赞同：2
> 
> 时间：2012-07-06T10:03:32.717
> 
> 标签：google-maps, weather

我试图触发对谷歌地图实例的天气层的点击，以打开城市的天气信息窗口：

```
//Create the map
var options = {
  center: new google.maps.LatLng(49.265984,-123.127491),
};
var map = new google.maps.Map(document.getElementById("map_canvas"), options);

//Create the weather layer
var weatherLayer = new google.maps.weather.WeatherLayer();
weatherLayer.setMap(map);

//Create the event, how?
var event = ?;

//Trigger the click
google.maps.event.trigger(weatherLayer, 'click', event); 
```

问题是我必须传递给触发函数的事件。它必须是[WeatherMouseEvent](https://developers.google.com/maps/documentation/javascript/reference#WeatherMouseEvent)的一个实例。当用户单击其标记之一时，此实例由图层创建，我不知道如何生成此事件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T11:08:09.203

目前这是不可能的。我收到了[一位 Google 员工的回复](https://groups.google.com/d/msg/google-maps-js-api-v3/mWtrWktyCsU/9OydYX7V7XUJ)：

> 不幸的是，无法以编程方式打开天气图层信息窗口。如果您想在 API 中看到此内容，请提交功能请求：[http ://code.google.com/p/gmaps-api-issues/issues/list](http://code.google.com/p/gmaps-api-issues/issues/list)
> 
> 以诺

我创建了一个[功能请求](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4254)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T06:22:23.597

尝试这个：

```
var infoWindow = new google.maps.InfoWindow();

var wEvent = google.maps.event.addListener(weatherLayer, 'click', myWeatherClick);

function myWeatherClick(wme) {
    infoWindow.setPosition(wme.latLng);
    infoWindow.setContent(wme.infoWindowHtml);
    infoWindow.open(map);
} 
```

触发事件：

```
var wme = {
        latLng: map.getCenter(),
        infoWindowHtml:'I\'ve been clicked'
    }
    google.maps.event.trigger(weatherLayer, 'click', wme); 
```

# html - 如何在objective-c中解析字符串

> ID：11360091
> 
> 赞同：0
> 
> 时间：2012-07-06T10:03:36.023
> 
> 标签：html, objective-c, ios, xcode, parsing

我想解析一个字符串来替换一些元素。
如果我的字符串包含一个，`<ol>`那么我想解析`<li>`元素以用数字替换它们。

我知道我可以检查`rangeOfString`包含的字符串。

```
if ([myString rangeOfString:@"<ol>"].location != NSNotFound) {
    //Do stuff here  
} 
```

**我怎样才能只解析`<ol>`和`</ol>`元素之间？**

**编辑1：**这是我的解决方案

```
- (NSString *)parseOrderedList:(NSString *)str {

NSMutableString *html = [NSMutableString stringWithCapacity:[str length]];

NSScanner *scanner = [NSScanner scannerWithString:str];
NSString *tempText = nil;

while (![scanner isAtEnd])
{
    [scanner scanUpToString:@"<ol>" intoString:&tempText];
    [scanner scanUpToString:@"</ol>" intoString:&tempText];

    if (tempText != nil) {
        [html appendString:tempText];
        html = [[[html stringByReplacingOccurrencesOfString:@"</li>" withString:@" "] mutableCopy] autorelease];

            while ([html rangeOfString:@"<li>"].location != NSNotFound) {
                html = [[[html stringByReplacingOccurrencesOfString:@"<li>" withString:[NSString stringWithFormat:@"%i.", i]] mutableCopy] autorelease];
                i++;
            }

    }

    if (![scanner isAtEnd])
        [scanner setScanLocation:[scanner scanLocation] + 0];

    tempText = @" ";

}

return html;
} 
```

**但是我该如何更换**

*   **与当前循环计数？每次第一次计数时我都会得到。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:16:57.740

做这个

```
NSString * aString = @"your string";
NSMutableArray *substrings = [NSMutableArray alloc]init];
NSScanner *scanner = [NSScanner scannerWithString:aString];
[scanner scanUpToString:@"<ol>" intoString:nil]; // Scan all characters before <ol>
while(![scanner isAtEnd]) 
{
  NSString *substring = nil;
  [scanner scanString:@"<ol>" intoString:nil]; // Scan the <ol> character
  if([scanner scanUpToString:@"</ol>" intoString:&substring]) 
  {
  // If the space immediately followed the <ol>, this will be skipped
  [substrings addObject:substring];
  }
 [scanner scanUpToString:@"<ol>" intoString:nil]; // Scan all characters before next <ol>
} 
```

你在 nsmutablearray 中有字符串，可以用来替换你的字符串

可以对其他标签重复相同的方法

# uiview - 为我的 iphone 应用 UIView 设置背景纹理

> ID：11360093
> 
> 赞同：1
> 
> 时间：2012-07-06T10:03:39.153
> 
> 标签：uiview, uiimageview, background-image, textures

我是 iphone 应用程序和这个论坛的新手。

我想为我的 UIView 放置一个背景纹理，它应该覆盖整个 iPhone 屏幕。我目前在此视图上放置了控件。稍后，我希望我的所有控件都是透明的，因此用户必须能够使用控件，但除了文本之外什么都看不到。

这是我尝试过的：

创建了一个 UIView 派生视图 - 具有简单的背景颜色，没有图像 放置了我的控件 - UIButtons、标签 正确编程所有这些以反映我的游戏逻辑

现在我改变主意了。我认为为我的视图和控件设置背景纹理会更好。

1) 我尝试了[在 Interface Builder 中添加背景图像](https://stackoverflow.com/questions/8695143/adding-a-background-image-in-interface-builder)中提到的内容， 但这涵盖了我的 UI 控件。

2）通过Interface builder，我尝试将纹理图像拖放到我的视图上（这反过来可能创建了一个背景图像=我的纹理的UIImageview）。但这又隐藏了我过去的所有工作。然后我开始使用 alpha 值（0.1、0.8 等）——它给了我一些结果，但我不再能够设计我的控件。我也无法在运行时单击（=触摸）它们。

请给我一个不会干扰我工作的方法（我讨厌重做我的控件的所有插座接线），但仍然允许我实现我的目标。

如果我问的东西太傻了，或者没有搜索足够的东西，请原谅我。这是我的第一个问题，很乐意尝试任何有用的解决方案！

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T19:26:56.453

怎么样：

```
self.view.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"texture.png"]]; 
```

# couchbase - Couchbase 还原错误

> ID：11360094
> 
> 赞同：0
> 
> 时间：2012-07-06T10:03:42.187
> 
> 标签：couchbase

服务器系统：Ubuntu 10.04.2

沙发底座：1.8.1

蟒蛇：2.7.3

备份文件：cbbackup ./default-data/default /data/Couchbase_backups/default_20120705

恢复：cbrestore -a default_20120705/default*

```
root@945f14b6-3015-4dac-b486-a8914a3f553d:~# cbrestore -a /data/Couchbase_backups/default_20120706/defaults*
Error on key 'sk_deviceHistory_F118C61C-8B30-4667-A7E2-2959836734BD': Memcached error #32:  Auth failure
Error on key 'sk_deviceHistory_F118C61C-8B30-4667-A7E2-2959836734BD': Memcached error #32:  Auth failure
Error on key 'sk_deviceHistory_F118C61C-8B30-4667-A7E2-2959836734BD': Memcached error #32:  Auth failure
Error on key 'sk_deviceHistory_F118C61C-8B30-4667-A7E2-2959836734BD': Memcached error #32:  Auth failure
^Z
[1]+  Stopped                 cbrestore -a /data/Couchbase_backups/default_20120706/defaults*
root@945f14b6-3015-4dac-b486-a8914a3f553d:~# ps -ef|grep python
root       711   512  1 15:46 pts/2    00:00:00 python /opt/couchbase/lib/python/cbrestore -a /data/Couchbase_backups/default_20120706/defaults /data/Couchbase_backups/default_20120706/defaults-0.mb /data/Couchbase_backups/default_20120706/defaults-1.mb /data/Couchbase_backups/default_20120706/defaults-2.mb /data/Couchbase_backups/default_20120706/defaults-3.mb
root       726   512  0 15:46 pts/2    00:00:00 grep --color=auto python
root@945f14b6-3015-4dac-b486-a8914a3f553d:~# kill -9 711
root@945f14b6-3015-4dac-b486-a8914a3f553d:~# ps -ef|grep python
root       729   512  0 15:47 pts/2    00:00:00 grep --color=auto python
[1]+  Killed                  cbrestore -a /data/Couchbase_backups/default_20120706/defaults*
root@945f14b6-3015-4dac-b486-a8914a3f553d:~# ps -ef|grep python
root       731   512  0 15:47 pts/2    00:00:00 grep --color=auto python
root@945f14b6-3015-4dac-b486-a8914a3f553d:~# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T23:55:55.223

你试过 -u BUCKET_NAME 和 -p BUCKET_PASSWORD 参数吗？这样 cbrestore 工具可以成功地向正确的存储桶进行身份验证？

对于更多标志和用法，还有 -h / --help 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T07:49:15.163

```
sudo ./cbbackup HOST:PORT ~/Documents/ -u ‘username’ -p ‘password‘ -b BUCKET_NAME 
```

这对我有用。

# nginx - 可以使用 Nginx 代替 Gunicorn 来管理多个本地 OpenERP 工作服务器吗？

> ID：11360095
> 
> 赞同：1
> 
> 时间：2012-07-06T10:03:52.093
> 
> 标签：nginx, load-balancing, openerp, gunicorn

我目前使用**Nginx**作为**Openerp**的网络服务器。它用于处理 SSL 和缓存静态数据。我正在考虑使用该`upstream`模块扩展它的用途，以处理故障转移和与第二台服务器的负载平衡。

在此过程中，我想到 Nginx 也可以在同一台机器上的多个 Openerp 服务器上执行此操作，因此我可以利用多个内核。但**Gunicorn**似乎是这方面的首选工具。

问题是：Nginx 能否很好地处理多个本地 OpenERP 服务器的流量，完全绕过对 Gunicorn 的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:29:49.020

让我们先谈谈他们俩的基本情况。

**Nginx**是一个纯 Web 服务器，旨在提供静态内容和/或将请求重定向到另一个套接字以处理请求。

**Gunicorn**基于 pre-fork worker 模型。这意味着有一个中央主进程管理一组工作进程。主人对个别客户一无所知。所有请求和响应都完全由工作进程处理。

如果您仔细查看 Gunicorn 是由 Unicron 设计的，请[点击链接](https://github.com/blog/517-unicorn)了解更多差异，其中显示了 Gunicron 上的 ngix 和 unicro 相同模型的工作。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-06T12:45:53.547

nginx 不是“纯网络服务器”:) 它是一个能够进行负载平衡、缓存、SSL 终止、请求路由和静态内容的网络加速器。“纯网络服务器”类似于 Apache - 历史上是用于静态内容、CGI 以及后来用于 mod_something 的网络服务器。

# iphone - Xcode 显示联系人卡片（联系人应用程序）

> ID：11360096
> 
> 赞同：1
> 
> 时间：2012-07-06T10:03:55.533
> 
> 标签：iphone, xcode, hyperlink, contacts

到目前为止我没有找到任何解决方案。我正在尝试从苹果链接到“联系人”应用程序。例如，我有一个名字和一个姓氏，也许还有一个电话号码，是否可以通过此信息显示联系人中匹配的“联系人卡片”？所以我的应用程序应该打开联系人应用程序并显示这个人的“联系人卡片”，我在我的应用程序中有名字和姓氏。感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:07:25.093

NO，没有 URL Scheme 顶部打开联系人应用程序。

您可以使用 SDK 直接与用户设备上的联系人进行交互。有一个[地址簿](https://developer.apple.com/library/ios/navigation/#section=Frameworks&topic=AddressBook)API 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:08:51.653

如果适合您的需要，您可以使用[AddressBook 框架。](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/AddressBook_iPhoneOS_Framework/_index.html)

# c - 如何验证从 LBA 读取的数据是否正确？

> ID：11360097
> 
> 赞同：1
> 
> 时间：2012-07-06T10:03:57.310
> 
> 标签：c, linux, diskspace, hard-drive

我有这个程序从 LBA（逻辑块地址）读取数据，但每次我提供的 LBA 编号，它都会给出相同的输出。

我如何验证它？

```
#include <stdio.h>
#include <fcntl.h>
#include <stdlib.h>
#include <linux/fs.h>
//#include "common.h"

typedef unsigned long long int var64;

int getSectorSize(int handle)
{
        int sectorSize = 0;

        //get the physical sector size of the disk
        if (ioctl(handle, BLKSSZGET, &sectorSize)) {

                printf("getSectorSize: Reading physical sector size failed.\n");

                sectorSize = 512;
        }

        return sectorSize;
}

var64 readLBA(int handle, var64 lba, void* buf, var64 bytes)
{
        int ret = 0;
        int sectorSize = getSectorSize(handle);
        var64 offset = lba * sectorSize;

        printf("readFromLBA: entered.\n");

        lseek64(handle, offset, SEEK_SET);
        ret = read(handle, buf, bytes);
        if(ret != bytes) {

              printf("read LBA: read failed.\n");

                return -1;
        }

        printf("read LBA: retval: %lld.\n", ret);
        return ret;
}

int main()
{
  int sectorSize, fd;
  char buff[100];
  printf("Calling getSectorSize\n");

  fd = open("/dev/sda1", O_RDONLY);

  if(fd == -1)
  {
    printf("open /dev/sda1 failed");
    exit(1);
  }
  sectorSize = getSectorSize(fd);
  printf("Sector size = %u\n", sectorSize);
  memset(buff, 0, sizeof(buff)); 
  readLBA(fd, 1, buff, 2); // if i put the 2nd arg as -12378 gives same answer
} 
```

这是输出：

```
sles10-sp3:~ # gcc getSectorSizeMain.c
getSectorSizeMain.c: In function ‘main’:
getSectorSizeMain.c:75: warning: incompatible implicit declaration of built-in function ‘memset’
sles10-sp3:~ # ./a.out
Calling getSectorSize
Sector size = 512
read LBA: entered.
read LBA: retval: 8589934594\. // This is always constant, how to validate? If i tell to read an invalid LBA number like -123456 the answer remains same. How to validate? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:43:08.930

`retval`不包含您感兴趣的数据，但 read() 的字节数已存储到您的缓冲区中，因此它总是包含相同的值是很自然的。但是在您的测试输出中，您尝试使用“%lld”（long long int）打印它，即使它只是一个普通的 int，所以 printf 会将它的值与它在堆栈上找到的任何东西结合起来（注意 8589934594= =0x200000002 - 最后一个数字是你的价值，第一个可能是垃圾）。

您要检查/使用/任何内容的数据都在数组 buff 中。

# java - 在 Google App Engine 上使用提供的 x509 证书发出 HTTPS 请求

> ID：11360099
> 
> 赞同：0
> 
> 时间：2012-07-06T10:04:07.077
> 
> 标签：java, google-app-engine

如果 Google App Engine 提供了一种使用 X.509 证书来创建 HTTPS 连接的方法，我很感兴趣（我必须连接的服务器提供公共证书 - 加密我发送的数据和解密数据的私钥从该服务器接收）。

根据这篇文章[https://groups.google.com/forum/?fromgroups#!topic/google-appengine-python/C9RSDGeIraE](https://groups.google.com/forum/?fromgroups#!topic/google-appengine-python/C9RSDGeIraE)这是不可能的，但自发布此答案以来已经过去了 3 年。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:11:35.043

AppEngine 能够在您的自定义域上使用 SSL 证书，这意味着您可以将证书分配给在 AppEngine 上运行的域。
您不能 AFAIK 提出请求并为每个请求提供自定义证书。

[AppEngine SSL 文档。](https://developers.google.com/appengine/docs/ssl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T02:55:48.167

当前不支持 SSL 客户端证书。功能请求在[这里](http://code.google.com/p/googleappengine/issues/detail?id=3719)。

# php - php数组按顺序排序

> ID：11360100
> 
> 赞同：-4
> 
> 时间：2012-07-06T10:04:09.787
> 
> 标签：php, arrays, sorting

> **可能重复：在 PHP 中对**
> [关联数组进行](https://stackoverflow.com/questions/777597/sorting-an-associative-array-in-php)
> [排序 在 PHP 中对多维数组进行排序？](https://stackoverflow.com/questions/1795244/sorting-a-multidimensional-array-in-php)

我有一个允许将订单分配给送货司机的系统。以下来源列出了当前可用的分销商列表，以及他们与客户的距离：

```
$franchise_a_status = array();
  $franchise_a_status[] = array('id' => '', 'text' => 'Please Select');
  $franchise_query = mysql_query("select franchise_id, franchise_surname, franchise_firstname, franchise_postcode, franchise_availability  from " . TABLE_FRANCHISE . " where franchise_availability=1");
    $origin = $cInfo->entry_postcode;
  while ($franchise = mysql_fetch_array($franchise_query)) {
    $destination = $franchise['franchise_postcode'];
    $json = file_get_contents("http://maps.googleapis.com/maps/api/distancematrix/json?origins=$origin&destinations=$destination&mode=driving&sensor=false&units=imperial");
    $result = json_decode($json, true);
    $distance = $result['rows'][0]['elements'][0]['distance']['text'];

    $franchise_a_status[] = array('id' => $franchise['franchise_id'],
                                'text' => $franchise['franchise_surname']. ' ' .$franchise['franchise_firstname'].' '.'('.$distance.')');
                 } 
```

该列表使用下拉菜单显示：

```
 array('text' => tep_draw_pull_down_menu('franchise_id',$franchise_a_status)); 
```

我需要按照最短距离到最高距离的顺序对数组进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:11:40.863

1.  将距离添加到`$franchise_a_status`。
2.  根据距离排序（[usort](http://php.net/usort)）。
3.  创建一个没有距离值的新数组（[array_map](http://php.net/array_map)或[foreach](http://php.net/foreach)）。

# java - java：布尔值的未知返回（'L'）类型

> ID：11360110
> 
> 赞同：1
> 
> 时间：2012-07-06T10:04:45.050
> 
> 标签：java

在这种方法中，符号值可以是任何股票符号（例如 GOOG、C、DAC-----等）

```
private boolean isC(String symbol) {
    char code = symbol.charAt(symbol.length() - 2);
    return code <= 'L';
} 
```

有人可以让我知道这个返回类型到底是什么意思吗？

我很困惑，因为我认为返回类型是`true`or `false`，但是有人可以告诉我这 `'L'`到底是什么意思吗？

提前致谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:06:57.950

如果变量 'code' 中字符的 ascii 码小于或等于 L 的 ascii 码，则返回 true。

否则为假

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:10:48.350

因为您在 return 关键字之后声明了一个条件，所以首先评估条件，然后返回评估结果。

并且因为一个条件只能是真或假，所以这个方法的返回类型是布尔值。

在这里，当您将 <= 运算符与 char 类型应用时，您正在比较 char 的数字 ASCII 表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:14:06.040

您可以在此处查看某些字符的[ascii 代码](http://www.asciitable.com/)。`code <= 'L'`是值`code`和的ASCII码之间的比较`'L'`

# rubymotion - RubyMotion >> 如何发帖？

> ID：11360111
> 
> 赞同：1
> 
> 时间：2012-07-06T10:04:45.177
> 
> 标签：rubymotion

我一直在检查 RestKit 和 GET 工作

```
@client.get("/?amount=5", delegate:self) 
```

有谁知道如何进行 POST 并接收结果？

文档提到它看起来像这样 -

```
@client.post("/ask", params:@paramvar, delegate:self) 
```

你封装了什么@paramvar？我已经将它作为数组、哈希甚至 nil 进行了尝试——但是，它们都没有产生任何结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T16:19:03.127

看一下气泡包装库。它包括一些非常好的 HTTP 助手。

[http://bubblewrap.io/](http://bubblewrap.io/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T05:27:35.700

在 RubyMotion_Cookbook 中找到了一个示例。

[https://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_8/06_sendinghttppost](https://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_8/06_sendinghttppost)

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    @window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds)
    @window.rootViewController = RootController.new

    url_string = "http://rubymotion-cookbook.herokuapp.com/post"
    post_body = "bodyParam1=BodyValue1&bodyParam2=BodyValue2"

    url = NSURL.URLWithString(url_string)
    request = NSMutableURLRequest.requestWithURL(url)
    request.setTimeoutInterval(30)
    request.setHTTPMethod("POST")
    request.setHTTPBody(post_body.to_s.dataUsingEncoding(NSUTF8StringEncoding))
    queue = NSOperationQueue.alloc.init

    NSURLConnection.sendAsynchronousRequest(request,
      queue: queue,
      completionHandler: lambda do |response, data, error|
        if(data.length > 0 && error.nil?)
          html = NSString.alloc.initWithData(data, encoding: NSUTF8StringEncoding)
          p "HTML = #{html}"
        elsif( data.length == 0 && error.nil? )
          p "Nothing was downloaded"
        elsif(!error.nil?)
          p "Error: #{error}"
        end
      end
    )

    @window.makeKeyAndVisible
    true
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T17:43:27.980

来源： [https ://github.com/rubymotion/BubbleWrap](https://github.com/rubymotion/BubbleWrap)

安装：-
在控制台中运行“gem install bubble-wrap”或在 Gemfile 中提及“gem bubble-wrap”

要在 'app_delegate.rb' 文件中添加的行（此 Bubblewrap api 可通过应用程序获得）：-
需要 'bubble-wrap/http'

语法示例代码：-
BW::HTTP.get(" [https://api.github.com/users/mattetti](https://api.github.com/users/mattetti) ", {credentials: {username: 'matt', password: 'aimonetti'}}) 做 |response | p response.body.to_str # 打印响应的正文结尾

# javascript - 将节点添加到 KendoUI TreeView 无法按预期工作

> ID：11360112
> 
> 赞同：0
> 
> 时间：2012-07-06T10:04:45.720
> 
> 标签：javascript, jquery, kendo-ui

我正在研究文档中的 Kendo TreeView 小部件。我正在尝试向 TreeView 结构添加一个预定义的节点（这是一个带有一些输入元素的 div）。这是我遵循的示例：

[http://demos.kendoui.c​​om/web/treeview/api.html](http://demos.kendoui.com/web/treeview/api.html)

我只能附加节点一次，它就会消失。我对 jquery 和 javascript 不是很熟悉，因此非常感谢任何有关工作示例的帮助。这是 jsfiddle 示例：

[http://jsfiddle.net/MwHNd/454/](http://jsfiddle.net/MwHNd/454/)

要重现该错误，请尝试多次使用 AppendNode 按钮添加节点。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:23:19.083

改变

```
 treeview.append($("#text"), selectedNode); 
```

到

```
treeview.append($("#text").clone(), selectedNode); 
```

问题是您正在附加相同的元素，因此它会被分离并重新连接。

# c++ - 如何使用 tolua++ 将 lua 字符串（二进制）传递给 c++

> ID：11360115
> 
> 赞同：1
> 
> 时间：2012-07-06T10:04:51.897
> 
> 标签：c++, lua

我有一个类：</p>

```
class SomeClass
{
   void initFromBuffer(void* buffer,int length);
   void initFromString(const std::string& str);
} 
```

使用 tolua++，得到如下绑定：

```
static int SomeClass_initFromBuffer00(lua_State* tolua_S)
{
  SomeClass* self = (SomeClass*)  tolua_tousertype(tolua_S,1,0);
  void* buffer = ((void*)  tolua_touserdata(tolua_S,2,0));
  int length = ((int)  tolua_tonumber(tolua_S,3,0));
  self->initFromBuffer(buffer,length);
} 
```

和：

```
static int SomeClass_initFromString00(lua_State* tolua_S)
{

   SomeClass* self = (SomeClass*)  tolua_tousertype(tolua_S,1,0);
   const std::string str = ((const std::string)  tolua_tocppstring(tolua_S,2,0));
   self->initFromString(str);
   tolua_pushcppstring(tolua_S,(const char*)str);
} 
```

现在，我想将二进制数据从 lua 传递到 c++，二进制中有 '\0'，所以如果我使用 initFromString 传递它，二进制数据将被修剪。但是如果我使用 initFromBuffer 来传递它，我在 `void* buffer = ((void*) tolua_touserdata(tolua_S,2,0)); 处得到了错误的 ptr，指针为空。

那么，我如何将二进制字符串从 lua 传递到 C++？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:55:48.817

也许你应该停止使用 Tolua 的糟糕 API，而使用普通 Lua 真正*好的*API。std::string 和 Lua 字符串都能够存储嵌入的空字符。导致截断的唯一原因`tolua_tocppstring`是函数名是谎言。它不会将其转换为 C++ 字符串；它将其转换为*C 字符串*a `const char*`。

正确的答案是使用[正确的 API 函数](http://www.lua.org/manual/5.1/manual.html#lua_tolstring)：

```
std::string fromLuaStack(lua_State *lua, int stackIx)
{
  size_t len;
  const char *str = lua_tolstring(lua, stackIx, &len);
  return std::string(str, len);
} 
```

同样，您可以使用[lua_pushlstring](http://www.lua.org/manual/5.1/manual.html#lua_pushlstring)将 a 压入`std::string`堆栈。

不幸的是 Tolua 没有更好的文档，因为可能有一个函数可以直接完成这一切。如果有，我找不到。

# java - 将一个类中创建的对象传递给另一个类

> ID：11360118
> 
> 赞同：1
> 
> 时间：2012-07-06T10:05:04.760
> 
> 标签：java

我有一个名为`StatisticFrame`. 此类创建一个`stats`在方法内命名的对象。如何将这个从`StatisticFrame`类创建的对象传递给另一个类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:29:56.877

在 StatisticFrame 类中保留一个指向接收器对象（比如 TargetFrame 类）的变量，然后调用接收器对象中定义的方法（比如 SetStatsObject(object obj)）来接收对象。

您的 StaticFrame 类将如下所示

```
class StatisticFrame {

     private TargetFrame targetObject = null;

     public StatisticFrame (TargetFrame obj) {
          this.targetObject = obj;
     }      

     public void Send (Object stats) {
          object stats = GetStatsObject(); // this will create and returns stats object
          targetObject.SetStatsObject(stats);
     }

     //... 
 } 
```

你的 TargetFrame （接收对象的类）应该是这样的

```
class TargetFrame {

     public void SetStatsObject(Object stats) {
            // Do what ever you want with stats
     }

     // .....rest of the methods follows
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:30:48.933

您可以将创建的对象作为**参数传递给**另一个类**构造函数或其方法**。

```
class Apples{
    public static void main(String[] args){

        ApplesTestDrive obj = new ApplesTestDrive();
        ApplesSampleTestDrive objOne = new ApplesSampleTestDrive();
        // Pass created object obj as argument to ApplesSampleTestDrive method.
        objOne.paint(obj);

        }
    }

class ApplesTestDrive{
    public String bucket;
    public ApplesTestDrive(){
      bucket = "blue";
    }
}

class ApplesSampleTestDrive{

    public void paint(ApplesTestDrive obj){
        System.out.println("Paint apple one: " + obj.bucket);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T10:13:56.197

一种方法是您可以在“另一个类”中创建方法，该方法将接受您要传递的参数对象，然后从基类中调用该方法

```
class Sender{
    public void createAndSend(Reciever reciver){
        String s="some data from Producer";
        reciver.recieve(s);
    }
}

class Reciever{
    public void recieve(String data){
        System.out.println("I recieved "+data);
    }
}

//lets test it
class TestX{
    public static void main(String[] args) {
        Sender s=new Sender();
        Reciever r=new Reciever();
        s.createAndSend(r);

    }
} 
```

输出：`I recieved some data from Producer`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T10:14:58.160

有多种方法可以实现这一目标。要么将方法的返回类型设置为`stats` ，然后在其他类中创建对象`StatisticFrame`并调用该方法。

```
StatisticFrame sf=new StatisticFrame();
Stats st=sf.method(); 
```

另一种方法是，如果您不想将返回类型设置为`Stats`然后创建类型的全局`private`变量`Stats`并在您的方法中分配它，然后一个`public` `getter`方法会将这个对象返回给其他类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T10:07:51.757

`Another class`需要一个方法作为`argument`期望您的`stats`对象并从您的类中调用该方法并传递您的 stats 对象

```
private void yourmethod(){

 Stats stas =
 AnotherClass ac = new AnotherClass();
ac.thatMethod(stats);
}

 class AnotherClass {

  public void thatMethod(Stats stats){

  }
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T10:25:03.237

您可以使用接受新创建对象的构造函数为要传递该对象的其他类创建一个对象。另一种可以使用接口的回调函数的方法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-16T08:04:23.440

单程 ：-

假设您有一个类 Xyz 您想要为其创建 getter 方法的对象，在另一个类 Abc 中创建 Xyz 的对象，并使用该对象调用 getter 方法并将其返回存储在您当前的类中

第二种方式：-

使用继承使类成为超级类

类 Abc 扩展 Xyz 通过这个你将直接访问所有对象，超类中存在的方法

希望这对你有意义

# jsf - Spring Web Flow中的弹出窗口

> ID：11360121
> 
> 赞同：1
> 
> 时间：2012-07-06T10:05:10.337
> 
> 标签：jsf, popup, spring-webflow

我还是spring的新手。在spring web flow中单击按钮时，我需要制作一个弹出窗口。

让我们在 html 文件中说

```
 <h:commandLink value="Sick Leave" action="sickleave" id="sickleave" /></div> 
```

当单击操作命令链接时，我必须在页面本身上填充一些值。

在我的 flow.xml

```
 <transition on="sickleave" to="sickLeave"></transition>

    <view-state id="sickLeave" view="sickLeave.xhtml" popup="true"></view-state> 
```

我添加了 popup=true。但我仍然无法获得弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:48:12.403

我认为您需要使用**sf:commandLink**组件而不是**h:commandLink**设置 reRender 标记，如下所示：

```
<sf:commandLink value="Sick Leave" action="sickleave" reRender="#{flowRenderFragments}"  processIds="*" id="sickleave" /> 
```

我不确定是否需要“processIds”标签，所以不管有没有它都可以试试。

# web - 通过 Jsoup 抓取网站

> ID：11360123
> 
> 赞同：1
> 
> 时间：2012-07-06T10:05:16.617
> 
> 标签：web, screen-scraping, jsoup

我花了几个小时使用 jsoup 登录网站。但它总是给出相同的登录页面。
为了澄清我在 facebook 网站上尝试过的问题。它也给出了相同的结果。下面我提到了我的代码

```
String url ="http://www.facebook.com/";
Document doc;
doc = Jsoup.connect(url)
      .data("email","abc@gmail.com","pass","xyz")
      .userAgent("Mozilla").post();
System.out.println(doc); 
```

任何人都可以指出我在哪里犯了错误，我该如何解决这个问题？
在数据部分中，“ **email** ”和“ **pass** ”是 Facebook 登录页面的输入字段 ID。
谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T01:45:28.487

尝试这个：

```
String url ="http://www.facebook.com/";
        Document doc;
        doc = Jsoup.connect(url)
        .data("email","abc@gmail.com")
        .data("pass","xyz")
        .userAgent("Mozilla")
        .post(); 
```

无论如何，Jsoup**一点也不差**，你只需要如何正确使用它，但你还需要记住，Facebook 期望通过 POST 模拟网页导航成功登录的参数更多。

举例：

charset_test
default_persistent
lgnjs
lgnrnd
locale
lsd pass
persistent
timezone

如果您需要进行身份验证并获取正确的数据，我建议您必须尝试使用​​适用于 Android 的 Facebook SDK：

[https://github.com/facebook/facebook-android-sdk/](https://github.com/facebook/facebook-android-sdk/)

# android - Google Current (Android) 等文章中的导航（分页）

> ID：11360126
> 
> 赞同：0
> 
> 时间：2012-07-06T10:05:26.517
> 
> 标签：android, navigation, pagination

我想要一些关于 Android 应用程序的帮助。我使用了新的 Google Currents 应用程序，并了解了用户如何在文章中导航。这就像 iOS 的点，但用条代替点。

你能给我一些关于谷歌是如何做到的线索吗？我不是在问代码，而是在问方法，因为我不知道如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:08:09.767

您可以尝试将 ViewPager 与 ViewPagerIndicator 一起使用，例如 Google Currents 中的 ViewPagerIndicator

更多关于

[浏览器](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

[ViewPagerIndicator](http://viewpagerindicator.com/)：

您指的是“圆圈” ViewPagerIndicator ，如下所示：

![在此处输入图像描述](../Images/dc5dc6bbbd60a8bfc5a899f932a8fd73.png)

有关更多信息，请尝试[从 Play 商店下载示例 ViewPagerIndicator 应用程序](https://play.google.com/store/apps/details?id=com.viewpagerindicator.sample)

# com - 如何加载 COM dll 模块并将其接口公开为进程外服务器

> ID：11360127
> 
> 赞同：0
> 
> 时间：2012-07-06T10:05:37.490
> 
> 标签：com, windows-services, atl

我有一个基于 ATL 服务 VC++2010 模板的进程外服务器。现在我不会通过动态加载包含自己的 COM 类的附加 dll 来扩展他的 COM 接口。要加载的 dll 基于 ATL dll VC++2010 模板，包含一个简单的 ATL 对象“IMModule”。我更改了相应的 .rgs 文件，通过添加 LocalServer 部分和服务器的 AppID 将类从 dll 连接到 EXE 服务器，如下所示：

```
HKCR
{
  NoRemove CLSID
  {
    ForceRemove {59276614-A811-4D27-B131-514656E643D3} = s 'IMModule Class'
    {
      ForceRemove Programmable
      LocalServer32 = s 'path to the service exe'
      {
    val ServerExecutable = s 'path to the service exe'
      }
      TypeLib = s '{250685C7-CBD3-4FF8-A3A6-2AF668794CFC}'
      Version = s '1.0'
      val AppID = s '{7EFD508A-53C6-4EA0-B21A-D29277B86CBC}'
    }
  }
} 
```

在加载 dll 后由服务调用的 dll init() 方法中，我调用 CoRegisterClassObject 来注册 IMModule 类对象。但我不确定如何获取 IUnknown 接口指针（ CoRegisterClassObject 的第二个参数）。我尝试了以下方法：

```
CIMModule::_ClassFactoryCreatorClass* pClassFak = 
    new CIMModule::_ClassFactoryCreatorClass;
IUnknown* pUnk;
HRESULT hr =
pClassFak->CreateInstance(CIMModule::_ClassFactoryCreatorClass::CreateInstance, 
                            IID_IIMModule, (LPVOID*)&pUnk); 
```

但是对 CreateInstance 的调用失败并显示 E_NOINTERFACE。那么，如何注册我在 dll 中实现的 IMModule 类，以便从我的进程外服务器可供 COM 客户端使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:18:19.573

在 Roman.RI 的帮助下，获得我需要的行为。我不能说谢谢，@roman-r。我将准确描述我所做的事情，所以也许有人可以追溯这些步骤并给我一些回应。

首先，我创建了一个基于 ATL 的 Windows 服务（名为 UmbrellaService）。在 UmbrellaService 中，我添加了一个名为 Control 的简单 ATL-Object 并添加了方法：

```
 FindMeAnInterface(BSTR moduleName, IDispatch** ppDispach); 
```

这就是 VC++ 向导的全部内容。然后我通过添加以下内容来修复 Control.rgs 文件：

```
 val AppID = s '%APPID%' 
```

为什么 VC++ 经过 17 年的演进，仍然存在这样的 bug？（请参阅 [CoCreateInstance 未启动或连接到 ATL COM 服务](https://stackoverflow.com/questions/5813681/cocreateinstance-does-not-start-or-connect-to-atl-com-service)）然后我创建了一个名为 MyModule 的 ATL-dll 项目，其中包含一个“模块”简单的 ATL-Object。Module 类有一个方法

```
testMethod (LONG a, LONG b, LONG* sum)" 
```

MyModule dll 注册为进程内服务器。此外，dll 有一些类使 dll 成为我需要的插件。

在 UmbrellaService 的 PreMessageLoop 方法中，MyModule dll 将使用 LoadLibrary 加载，并通过 GetProcAddress 获取工厂创建方法的地址。工厂创建方法返回一个依赖于插件的 FactoryClass，它充当插件入口点。这是我的独立于 COM 的插件机制。

现在要通过 UmbrellaService 接口从插件 dll 导出模块接口，我做了以下操作： 在 FactoryClass 上，我添加了方法：

```
IDispatch* getInterface(); 
```

在我调用的 getInterface 方法中

```
CoCreateInstance(__uuidof(Module), NULL , CLSCTX_INPROC_SERVER , __uuidof(IDispatch), (VOID**) &pDispatch); 
```

并返回获取到的 IDispatch 接口。在将传递给 FindMeAnInterface 的名称与 FactoryClass 提供的名称进行比较之后，在 UmbrellaService 的 Control::FindMeAnInterface 方法中调用 FactoryClass::getInterface 方法。FindMeAnInterface 将随后获得的 IDispatch 指针返回给客户端。

在客户端，我从 UmbrellaService 导入 tlb 文件，从适当的插件 dll 导入 tlb。我调用 testMethod 如下：

```
IControlPtr pControl(__uuidof(Control));
_bstr_t moduleName("Module");
IDispatchPtr moduleDisp = pControl->FindMeAnInterface(moduleName);
IModulePtr pModule(moduleDisp );
LONG res = pModule->testMethod(42,23); 
```

这一切确实有效，但我不确定这是否是这样做的方法。我错过了一些关于引用计数的事情吗？插件DLL会被加载两次吗？第一次通过我的插件机制，第二次通过 CoCreateInstance？还有什么我应该注意的吗？

谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:09:02.080

到目前为止我找不到我的代码。但我确实查看了我最喜欢的网站之一，The Code Project。它曾经很流行，尤其是在 COM 等较旧的技术中（是的，确实如此）。我希望您已经确信必须使用 COM 而不是新的 WFC 或其他技术。

请检查良好的文档和示例代码[@ATL COM EXE doc](http://www.codeproject.com/Articles/9878/ATL-COM-EXE-Server-with-MFC-support)。我相信我使用这个网页作为我过去项目的开始。

祝好运并玩得开心点。

# cordova - 科尔多瓦未加载：对象不支持属性或方法 addEventListener

> ID：11360128
> 
> 赞同：1
> 
> 时间：2012-07-06T10:05:44.580
> 
> 标签：cordova

我是唯一得到“对象不支持属性或方法 addEventListener”错误的人吗？

这是显示代码错误的图像：

[显示错误的图像](http://is100.imagesocket.com/images/2012/07/06/2496945-9wti.png)

我正在使用 cordova 1.9.0 并在 Windows Phone 中开发，我正在使用 build.phonegap.com 来构建应用程序，并在安卓上下载它。

在 Windows 手机模拟器中它运行良好，但是当我部署到手机时它却没有。

这可能是我安装它时它没有在实际手机上运行的原因吗？

**编辑解决：**

当使用 phonegap/cordova build (build.phonegap.com)

您的包含脚本标签 src 应如下所示：src="cordova.js"，其中没有任何版本号

并且**不要**将脚本包含在您的**.zip**文件中。

帮助我的链接：

[使用phonegap构建后cordova未加载](http://community.phonegap.com/nitobi/topics/getting_started_with_cordova_fails_with_phonegap_build_do_i_need_to_rename_the_cordova_1_9_0_js_file)

# blackberry - 黑莓中的分享功能

> ID：11360131
> 
> 赞同：0
> 
> 时间：2012-07-06T10:05:59.120
> 
> 标签：blackberry, share

在android中，share函数是使用`MIME`type。

```
Intent sharingIntent = new Intent(
                        android.content.Intent.ACTION_SEND);
                sharingIntent.setType("text/plain");

                sharingIntent.putExtra(Intent.EXTRA_TEXT,
                        Config_ConstantVariable.sharelink + newsid);
                startActivity(Intent.createChooser(sharingIntent,
                        "Share via")); 
```

黑莓RIM怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:03:37.000

您可以尝试在 BlackBerry Java SDK 7.0 中使用 Send Menu API，它提供了类似的功能，但功能并不丰富。官方文档对 Send Menu API 进行了以下说明。

> 您可以使用发送菜单 API 将发送菜单项添加到应用程序的菜单中。发送菜单项允许您使用 BlackBerry 设备上的其他应用程序（例如消息应用程序或 BlackBerry Messenger）将应用程序中的内容发送给收件人。要发送的内容封装在 JSONObject 对象中，该对象从您的应用程序传递到从设备发送内容的应用程序。
> 
> 当 BlackBerry 设备用户单击发送菜单项时，将显示一个子菜单，其中包含可用于发送内容的应用程序列表。当用户单击这些应用程序之一时，所选应用程序开始时会自动填充要发送的内容的某些字段。用户可以完成剩余的字段并发送内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:29:51.440

不幸的是，没有这样的 API。您可以使用调用 API 通过短信、电子邮件发送消息。但是没有公共 API 可以与 FB 或 Twitter 等第三方应用程序共享内容。您可以自己使用 FB SDK 或自己实现 Twitter API 来完成。

# java - 编组/解组 java 方法

> ID：11360133
> 
> 赞同：0
> 
> 时间：2012-07-06T10:06:04.640
> 
> 标签：java, jakarta-ee, jaxb, xml-serialization, jax-ws

我有一个 java 类，其中包含一个带有一些逻辑控制的方法。此类可通过 web 服务方法输出到 java swing 客户端。

我的问题听起来很疯狂，但是当他从 wsdl 文件生成类时，是否可以编组/解组该方法以使其对客户端可用？

谢谢。

ps：我使用的是 Metro/jax-ws 和 glassfish 3.1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:09:02.863

您的意思是，您可以将一些逻辑发送到客户端以在那里执行？
恐怕答案是否定的——这不是 Web 服务的工作方式。
所有逻辑都在服务器端执行。

你为什么要这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:24:08.130

为什么不向客户端提供此类（您的 VO），以便服务器和客户端都在编组/解组同一类？然后两者都可以使用您的方法...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T17:51:00.537

> Marshalling”是指将数据或对象转换为字节流的过程，“unmarshalling”是将字节流转换回其原始数据或对象的逆过程。转换是通过“序列化”实现的。
> 
> “编组/解组”过程的目的是在 RMI 系统之间传输数据。

更多[http://ws.apache.org/old/jaxme/manual/ch02s02.html](http://ws.apache.org/old/jaxme/manual/ch02s02.html)

# java - 无法从同一网络 java 访问 web 服务

> ID：11360138
> 
> 赞同：0
> 
> 时间：2012-07-06T10:06:22.153
> 
> 标签：java, web-services, tomcat, jboss

我的 web 服务在 jboss 上运行，客户端在 tomcat 上，客户端和 web 服务在我的本地机器上运行完美。但是如果我在另一台机器上设置客户端，客户端程序给出错误消息 404 not found 我已经通过网络共享了我的 jboss，我可以使用 http:192.168.1.26:8080/FalconServer/SearchService 从另一台机器访问 webservice wsdl？ wsdl 我在客户端代码中设置了相同的 url。但它不会工作，任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T21:17:44.617

我想将此作为评论，但我似乎找不到评论按钮。您是否开始将 jboss 绑定到您的 IP 地址。一种方法：

运行-b

# c# - 静默安装字体

> ID：11360139
> 
> 赞同：2
> 
> 时间：2012-07-06T10:06:44.873
> 
> 标签：c#, .net, .net-4.0

我需要检查机器上是否没有安装字体，如果没有，我的程序在没有用户界面的情况下安装它。

有谁知道如何做到这一点？

我知道我需要先将字体复制到字体目录但要启用它需要重新启动机器，我不想要这个。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:12:56.930

看[这里](https://stackoverflow.com/questions/1616053/c-sharp-install-font-into-windows-font-folder)。

也许试试这个：

```
[DllImport("gdi32", EntryPoint = "AddFontResource")]
public static extern int AddFontResourceA(string lpFileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:13:24.087

> 有谁知道如何做到这一点？

是的。它不是。安装字体不是您的工作 - 管理员很可能会告诉您下地狱（例如：您的程序/用户无权这样做）。我必须检查一下，但我很安静，普通用户无法将字体复制到字体目录。

这就是安装人员所做的。您可以静默启动安装程序，但随后您再次进入权限问题，因此除非用户是 - 啊 - ;) 好 - 不是普通用户，否则它不会真正起作用。

> 机器需要重新启动，我不想要这个。

没有人关心你想要什么。MS 制定了安装指南，必须遵守。我自己去过那里——你做的任何把戏都会回来咬你。谦虚规则在这里 - 遵守规则。

仍然有太多软件是由有问题的人写出来的 - 啊 - 问题 - 例如将配置/用户数据写入他们的文件夹（现在是写保护的 - 并且在过去 10 年中被记录下来）。

# alfresco - 如何将共享嵌入另一个网站？

> ID：11360147
> 
> 赞同：0
> 
> 时间：2012-07-06T10:07:27.467
> 
> 标签：alfresco, alfresco-share

我有一个网站，我想使用 iframe 在其中嵌入共享。问题是如何防止用户必须登录（在 iframe 中）。此时它们已经通过身份验证。

生成 iframe 的父应用程序与 Alfresco 安装在同一服务器/域上。

父应用程序有自己的身份验证，但不是存储自己的密码，而是通过 REST 查询 Alfresco。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:25:28.627

有两种方法，我认为：

*   第一个是提供令牌（你应该在你的父应用程序中有一个）在 iFrame 中共享，所以使用一些 javascript；
*   第二种是使用portlet，例如在[liferay wiki](http://www.liferay.com/community/wiki/-/wiki/Main/Alfresco+integration)上看看，至少[应该](http://alfrescoshare.wordpress.com/2010/06/11/alfresco-share-repository-integrated-into-a-portal-liferay/)可以访问文档库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-15T13:29:30.527

如果您使用的是 php（Wordpress、joomla 等），那么这可能很有用。首先，您需要配置 share-security-config 以允许将共享内容放入 iframe[配置 iframe](https://www.alfresco.com/blogs/ewinlof/2013/03/12/introducing-the-securityheaderspolicy-in-alfresco-share/)。

```
<config evaluator="string-compare" condition="SecurityHeadersPolicy">
  <headers>         
     <header>
        <name>X-Frame-Options</name>
        <value>ALLOW-FROM https://www.x.com</value>
        <!--or just allow all-->
        <!--<enabled>false</enabled>-->
     </header> 
```

然后[配置外部身份验证](http://docs.alfresco.com/5.1/concepts/auth-external-intro.html)，最后使用[配置 Alfresco Share 传递标头以使用外部 SSO](http://docs.alfresco.com/5.1/tasks/auth-alfrescoexternal-sso.html)。

# android - Android MapView Overlay 刷新时间

> ID：11360153
> 
> 赞同：2
> 
> 时间：2012-07-06T10:08:00.303
> 
> 标签：android, android-mapview, android-animation, android-overlay

我需要一个以 2Hz 刷新的叠加层 - 用于动画[叠加层](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/Overlay)。[第二种`draw()`](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/Overlay#draw%28android.graphics.Canvas,%20com.google.android.maps.MapView,%20boolean,%20long%29)方法会在您返回时触发[重绘](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/Overlay#draw%28android.graphics.Canvas,%20com.google.android.maps.MapView,%20boolean,%20long%29)`true`。

```
public boolean draw(android.graphics.Canvas canvas,
                    MapView mapView,
                    boolean shadow,
                    long when) { 
```

这一切都很好，但我需要放慢速度，因为它不会消耗那么多 CPU 和电池。- 我认为关键是这个`long when`参数，但我在理解如何使用它时遇到了问题（因为我把它作为一个参数，我看不到设置它的方法）。该文档也没有真正帮助那里。

# javascript - 在 onclick 函数中传递 id

> ID：11360155
> 
> 赞同：0
> 
> 时间：2012-07-06T10:08:03.277
> 
> 标签：javascript, html, arrays

我有这样的： var array = ["name1","imagesrc1","name2",imagesrc2","name3","imagesrc3",...];

我打印了图像，但我想调用一个函数，当我单击图像时，它会在某处写入名称（或使用名称发出警报）。

我的代码是：

```
function RightTable(objecto,wrappercontent)
{
for(j=0;j<objecto.length;j++)
    {
        var div= document.createElement('div');
        var immagine = document.createElement('img');
        immagine.src= "http://www.mysite.com/png/public/card/" + objecto[j+1] + "?width=292";

        immagine.setAttribute('class', 'card');
        immagine.setAttribute('id' , objecto[j]);
        immagine.setAttribute('onClick', "alertID(*idoftheimage*));

        div.appendChild(immagine);
        wrappercontent.appendChild(div);

        j+1;

    }
} 
```

如何将作为用户名的图像的 ID 传递给 alertID()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:09:47.183

`immagine.setAttribute('onClick', "alertID(this.id)");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:11:23.693

尝试：

```
for(j=0;j<objecto.length;j++)
{
  (function(j){
        var div= document.createElement('div');
        var immagine = document.createElement('img');
        immagine.src= "http://www.mysite.com/png/public/card/" + objecto[j+1] + "?width=292";

        immagine.setAttribute('class', 'card');
        immagine.setAttribute('id' , objecto[j]);
        immagine.setAttribute('onClick', "alertID(*idoftheimage*)");

        div.appendChild(immagine);
        wrappercontent.appendChild(div);

        j+1;

  })(j);
} 
```

# jsp - struts2 中没有将任何源加载到浏览器

> ID：11360158
> 
> 赞同：0
> 
> 时间：2012-07-06T10:08:13.457
> 
> 标签：jsp, jakarta-ee, struts2

在 Struts2 应用程序中，任何其他源（图像、css、javascript 文件）都无法检索到浏览器。

例如，我 `<img src="myimage.jpg" />`在 JSP 页面中添加，但在浏览器中看不到图像。JSP页面和图像存在于`web`文件夹中，而不是`WEB-INF`我确定图像存在于给定路径中（我使用Netbeans IDE，它也自动提供路径），我在相关位置手动检查了图像，它是好的。

我不确定这是否是 Struts 的问题（我不这么认为），但我创建了另一个普通的 Java EE 项目，它只有 JSP 页面，没有包含 struts 框架，然后一切正常（调用图像、css、js） . 请任何人告诉我我的错在哪里？提前致谢。

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>/org.apache.struts2.dispatcher.FilterDispatcher</welcome-file>
    </welcome-file-list>
    <jsp-config>
        <jsp-property-group>
            <url-pattern>/account.jsp</url-pattern>
            <include-prelude>/header/header.jsp</include-prelude>
        </jsp-property-group>
        <jsp-property-group>
            <display-name>TopBanner</display-name>
            <url-pattern>/*</url-pattern>
            <include-prelude>/header.jsp</include-prelude>
        </jsp-property-group>
    </jsp-config>
        <servlet-name>ItemAction</servlet-name>
        <url-pattern>/ItemAction</url-pattern>
    </servlet-mapping-->
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:24:44.350

如果您的`images`目录或文件夹位于您的`web`目录中。做这个

```
<img src="<%=request.getContextPath()%>/images/myimage.jpg" /> 
```

这解决了它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:22:50.453

您必须了解浏览器不知道您的请求是由 servlet 处理的，然后是由 JSP 处理的。当它解析相对路径时，它不会使用 JSP 的路径作为基本路径来解析它们，而是使用调用的 URL 的路径。

例如，如果浏览器地址栏包含以下地址：

```
http://localhost/app/foo/bar/baz.action 
```

并且生成的 HTML 包含

```
<img src="myimage.jpg"/> 
```

浏览器将在其中查找图像

```
http://localhost/app/foo/bar/myimage.jpg 
```

即使生成 HTML 的 JSP 位于 webapp 的根目录中（即在 URL 处`http://localhost/app/theJsp.jsp`）

我建议始终对图像、JS 文件和其他资源使用绝对路径：

```
<img src="<c:url value='/myimage.jpg'/>"/> 
```

# iphone - iPhone GPS（以半径为单位）的准确度如何？

> ID：11360160
> 
> 赞同：6
> 
> 时间：2012-07-06T10:08:22.893
> 
> 标签：iphone, ios5, xcode4.3

我想知道我们在 iphone 4/4S 上的 gps 有多准确，因为我的新项目正在使用 gps 来跟踪某些东西。我的意思是准确的大约是米。我已经搜索过类似我的其他问题，但我没有答案。是否可以仅说 1 米来跟踪半径？gps iphone 4/4s 的精度有多长（至少）？10米？1米怎么样？它可以跟踪1米半径吗？哦，我公司的下一个项目是户外应用。我知道我可以自己测试它，但从这里得到答案会更快。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:24:39.030

简单的答案是：不，精确到 1m 是不准确的。

在某些情况下，虽然它是，但不要指望它。在城市景观中，我有时会被移动大约 20m。但似乎所有设备的位移都相同，因此您可以检测它们是否接近。

编辑：我应该说我在 iphone 上的定位服务上做了很多工作，所以我绝对确定这个答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T13:25:15.603

我已经使用标准 GPS 测试对 4S 进行了测试，该测试将设备定位在已知点（测量点 - 1 厘米精度）上特定时间段。这个 30 分钟的连续测试是使用 GPS Photo-Link 在亚利桑那州图森（良好的 GPS 区域）与纽约市（高楼和更北）进行的。所以我们通常会寻找 10 米的精度，这意味着 92% 到 97% 的点在已知点的 10 米 NSEW 范围内。iPhone 没有通过第一次测试，所以我放弃了结果并停止了测试。我正在等待手机上的 WAAS 以看到手机改进 GPS，但我认为大多数电话公司都会把钱投入到改进相机上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T10:12:10.543

好吧，也许你可以设置你想要的精度

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;
locationManager.distanceFilter = 10; 
[locationManager startUpdatingLocation]; 
```

有关更多信息，请参阅[苹果文档](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html) 希望这对您有所帮助。祝你好运。

# c++ - 类型错误：abspath() 只需要 1 个参数（给定 2 个）

> ID：11360161
> 
> 赞同：0
> 
> 时间：2012-07-06T10:08:27.237
> 
> 标签：c++, python, networking

我在运行 python 脚本（由 ./waf --run 调用）时收到此错误：TypeError: abspath() 只需要 1 个参数（给定 2 个）

问题是它确实是用：obj.path.abspath(env) 调用的。

这不是 python 问题，因为该代码以前可以完美运行，并且它是一个巨大项目 (ns3) 的一部分，所以我怀疑它被破坏了。

但是，我的设置中一定发生了一些变化，因为这段代码以前有效，现在无效。

您能帮我弄清楚为什么会出现此错误吗？

这是python代码： http: [//pastebin.com/EbJ50BBt](http://pastebin.com/EbJ50BBt)。错误发生在第 61 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:08:00.180

该方法的文档[`Node.abspath()`](http://docs.waf.googlecode.com/git/apidocs_16/Node.html#waflib.Node.Node.abspath)声明它不需要额外的`env`参数，我通过检查 git 历史确认它从未这样做过。我建议更换

```
if not (obj.path.abspath().startswith(launch_dir)
        or obj.path.abspath(env).startswith(launch_dir)):
    continue 
```

和

```
if not obj.path.abspath().startswith(launch_dir):
    continue 
```

如果这段代码以前工作过，这可能是由于`or`表达式的第一个运算符碰巧总是`True`，所以第二个运算符从未执行过。无论如何，这似乎是您的代码中的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:23:39.550

您应该在回溯中具有文件名和行号。转到该文件和行并找出“obj”和“obj.path.abspath”是。一个简单的解决方案是将违规行放在 try/except 块中以打印（或记录）更多信息，即：

```
# your code here
try:
    whatever = obj.path.abspath(env)
except Exception, e:
    # if you have a logger
    logger.exception("oops : obj is '%s' (%s)" % (obj, type(obj)))
    # else 
    import sys
    print >> sys.stderr, "oops, got %s on '%s' (%s)" % (e, obj, type(obj))
    # if you can run this code directly from a shell,
    # this will send you in the interactive debugger so you can
    # inspect the offending objet and the whole call stack.
    # else comment out this line
    import pdb; pdb.set_trace()

    # and re-raise the exception
    raise 
```

我敢打赌，“obj.path”不是 python 的“os.path”模块，而“obj.path.abspath”是一个实例方法，它只接受“self”作为参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T00:28:13.117

问题来自这样一个事实，显然 waf 不喜欢符号链接，python 代码不能为这种情况准备。

问题已解决，谢谢大家的帮助

# java - 是否有用于从 .class 文件（字节码）中提取类、方法、成员和字段依赖项名称的库？

> ID：11360162
> 
> 赞同：2
> 
> 时间：2012-07-06T10:08:31.083
> 
> 标签：java, scala, dependencies, bytecode, .class-file

正如标题所说，是否有任何库用于从 .class 文件（字节码）中提取类、方法、成员和字段依赖项名称？

例如，如果我编译的 Scala .class 文件使用如下内容：

```
var xs = new List[java.lang.String]();
"blah" :: xs;
xs(0).charAt(0); 
```

我应该知道我使用这些类和方法：

```
java.lang.String
java.lang.String#charAt
scala.collection.immutable.List
scala.collection.immutable.List#apply 
```

是否有任何带有 API 的库可以在我自己的 Scala 程序中使用，可以为我做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T13:49:31.243

这是[ASM](http://asm.ow2.org/)框架[教程](http://asm.ow2.org/doc/tutorial-asm-2.0.html)，解释如何从类中收集依赖项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T10:10:50.070

您需要能够阅读方法体的代码。我会使用字节码库，例如 ObjectWeb 的 ASM、BCEL 或 JavaAssist。

# c++ - 当我包含 iomanip 时出错

> ID：11360163
> 
> 赞同：0
> 
> 时间：2012-07-06T10:08:31.533
> 
> 标签：c++

我刚开始写程序，就发现了一些我不明白的地方。我已经定义了一个名为“时间”的结构。当我尝试定义一个名为“time1”的结构变量时，它会发出一个错误：“expected an ';'”。但是当我删除头文件“iomanip”时，错误消失了！当我再次包含它时，错误又回来了。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:31:33.263

让我们试试这段代码：

```
#include <iomanip>

struct time
{
    int a;
};

int main()
{
    time t1;
} 
```

这是错误，以及当我尝试编译它时我在 QtCreator 中收到的警告（我的编译器是 g++ 4.6.3）。编译器认为`time`这里不是语句，而是函数名：

![](../Images/c893c839b9085021c2dffccfe739eae4.png)

显然，`<iomanip>`不知何故包含`<time.h>`，并且`time.h`有一个[名为 time() 的函数](http://www.cplusplus.com/reference/clibrary/ctime/time/)。因此，基本上，只需将您的结构重命名为“myTime”或类似的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:33:36.893

如果您不想重命名结构的名称，则可以将其更改为：

```
#include <iomanip>

struct time
{
    int a;
};

int main()
{
    struct time t1;
} 
```

# android - 在 FlashBuilder 中重新配置 PHP 服务

> ID：11360164
> 
> 赞同：0
> 
> 时间：2012-07-06T10:08:31.393
> 
> 标签：android, apache-flex, flash-builder

我使用 Flash Builder 4.6 创建了一个 android Flex 项目。最初，根 URL 是 localhost，Web 根是 /Applications/XAMPP/xamppfiles/htdocs/。该应用程序在模拟器上运行良好。

我还创建了一些用于访问数据的 PHP 服务，并在 localhost 上对其进行了测试。

现在，我想在实际设备上测试生成的 apk。为此，我将 rootURl 重新配置为我的服务器的全局 IP，并保持 Web 根目录不变。但是当我使用这些设置运行生成的 apk 时，应用程序无法访问服务器。

可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:26:15.953

在本地测试时，通常指定的根 URL 是

> ```
> http://localhost/ 
> ```

服务所在的目录隐含地从 Web 根目录和项目设置派生。

但是在使用实际服务器执行生产构建时，根 URL 需要准确指向服务所在的目录。

因此，如果服务位于服务器中的以下路径：

> %some prefix%/ProjectName/services

相应的根 URL 将是

> http://%serverip%/ProjectName

注意：不需要指向服务目录，因为生成的构建已经配置为在根 URL 中查找服务目录。

# export - 如何在 Google BigQuery 中导出公共维基百科表？

> ID：11360167
> 
> 赞同：1
> 
> 时间：2012-07-06T10:08:42.347
> 
> 标签：export, wikipedia, google-bigquery

我正在使用 Google BigQuery，它提供了很少的公共示例表。其中之一是维基百科修订历史 [publicdata:samples.wikipedia]

出于某些测试目的，我想将其导出并保存到 Google Cloud Storage。

但是，如果我在 Googel BigQuery 中运行导出作业，它会运行 5 个小时并且作业失败:(

唯一返回的消息是 **错误：后端错误。作业中止。**

可能是因为数据大小在 35GB 左右。所有其他提供的样本都小于 25 GB，我已成功将它们导出到 Google Cloud Storage。

有谁知道问题是什么以及解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:28:25.310

看起来导出作业超时，会在 2 小时后杀死它们（然后重试两次）。因为我们目前按顺序处理导出（即我们一次读取并转换一行数据并写出到单个文件），如果结果很大，处理可能需要很长时间。

如果您提供文件 glob 模式（例如`gs://foo/bar*`）作为目标路径，BigQuery 可以将导出拆分为多个部分并并行执行，从而减少提取时间。

最近的变化也将使出口过程更快。

# xamarin.android - TinyIoC 和发布版本

> ID：11360172
> 
> 赞同：1
> 
> 时间：2012-07-06T10:08:53.737
> 
> 标签：xamarin.android, tinyioc

我正在做我的第一个发布版本，并且在使用 TinyIoC 和解决通过 TinyIoC 使用的接口时遇到问题。

我们得到的架构是：

Universal.Mobile.Droid.application - 主应用程序

Universal.Mobile.Droid.Interfaces - 包含 IUniversalMobileDroidDAO 的定义

Universal.Mobile.Droid.DAO.UltraliteDAO - 包含 IUniversalMobileDroidDAO 的实现

当我在我的设备上进行发布构建和部署/运行时，出现错误：

```
07-06 10:30:23.706 I/dalvikvm( 4783): Turning on JNI app bug workarounds for target SDK version 12...
07-06 10:30:23.816 I/ActivityThread( 4783): Pub UniversalMonoPhone.UniversalMonoPhone.__mono_init__: mono.MonoRuntimeProvider
07-06 10:30:23.816 D/dalvikvm( 4783): Trying to load lib /data/data/UniversalMonoPhone.UniversalMonoPhone/lib/libmonodroid.so 0x4104d468
07-06 10:30:23.846 D/dalvikvm( 4783): Added shared lib /data/data/UniversalMonoPhone.UniversalMonoPhone/lib/libmonodroid.so 0x4104d468
07-06 10:30:23.846 W/MonoDroid-Debugger( 4783): Trying to initialize the debugger with options: --debugger-agent=transport=dt_socket,loglevel=0,address=127.0.0.1:8977,server=y,embedding=1
07-06 10:30:23.866 W/MonoDroid-Debugger( 4783): Accepted stdout connection: 41
07-06 10:30:24.656 E/mono    ( 4783): WARNING: The runtime version supported by this application is unavailable.
07-06 10:30:24.656 E/mono    ( 4783): Using default runtime: v2.0.50727
07-06 10:30:25.126 I/monodroid-gc( 4783): environment supports jni NewWeakGlobalRef
07-06 10:30:25.166 W/monodroid-gc( 4783): GREF GC Threshold: 46800
Loaded assembly: Universal Mono Phone.dll
Loaded assembly: Universal.Mobile.Droid.Interfaces.dll
Loaded assembly: Autoforms.Universal.Mobile.Core.Interfaces.Droid.dll
Loaded assembly: Autoforms.Universal.Mobile.Core.Objects.Droid.dll
Loaded assembly: Universal.Mobile.Droid.DAO.UltraliteDAO.dll
Loaded assembly: UltraliteForMono.dll
Loaded assembly: Mono.Android.dll [External]
Loaded assembly: System.Core.dll [External]
Loaded assembly: MonoDroidConstructors [External]
Unhandled Exception:

TinyIoC.TinyIoCResolutionException: Unable to resolve type: Autoforms.Universal.Mobile.Droid.Interfaces.IUniversalMobileDroidDAO 
```

我需要调整我的构建/链接器/清单来解决这个问题吗？

问候，

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:31:40.793

感谢 Atsushi 在 Mono For Android 论坛上提供的解决方案。

我需要做的是在项目属性的链接中选择“仅 SDK 程序集”。

我误读了“链接”的含义-认为这定义了要包含的程序集，而不是不使用时要排除的程序集！我认为。

# android - 使用 Android 应用程序在索尼爱立信中打开本机短信收件箱

> ID：11360175
> 
> 赞同：1
> 
> 时间：2012-07-06T10:09:06.283
> 
> 标签：android

我正在做一个应用程序，单击按钮可以导航到设备的本机短信收件箱。

```
 Intent intent = getPackageManager().getLaunchIntentForPackage("com.android.mms");
        PendingIntent pendingIntent = PendingIntent.getActivity(context , 0,intent,0)  ;         
      remoteViews.setOnClickPendingIntent(viewId, pendingIntent ); 
```

它适用于三星设备。但对摩托罗拉和索尼爱立信设备没有响应。任何人都可以建议任何其他方法来执行所有设备通用的相同活动吗？

提前致谢

# jquery - 在 Jquery 中创建具有自定义 HTML 属性的元素

> ID：11360178
> 
> 赞同：4
> 
> 时间：2012-07-06T10:09:10.647
> 
> 标签：jquery, html

我正在尝试使用 jQuery 生成一个锚点，使用一些自定义 HTML5 属性来获得类似的东西。

```
$('<a/>', {href : "#local_anchor",text: "DUMMY_TOKEN", onClick:"remote_function('token')"}).attr("data-toggle", "modal") 
```

如果我使用此代码，它工作得很好。

```
$('<a/>', {
   href : "#local_anchor",
   text: "DUMMY_TOKEN",
   onClick:"remote_function('token')"
}).attr("data-toggle", "modal") 
```

但我想将 data-toggle 作为参数传递给第一个 href、文本等。当我尝试这样做时，我得到一个语法错误。

我也尝试使用 .data() 但我无法在标记中设置值，只能在 DOM 中设置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T10:11:15.203

只需引用`data-toggle`，它就会起作用：

```
$("<a/>", {
    href: "#local_anchor",
    text: "DUMMY_TOKEN",
    onClick: "remote_function('token')",
    "data-toggle": "modal"
}); 
```

# iphone - 允许用户访问位于 Iphone 应用程序中的图像

> ID：11360179
> 
> 赞同：0
> 
> 时间：2012-07-06T10:09:13.793
> 
> 标签：iphone, ios

首先让我说这是我第一次尝试制作 ios 应用程序，所以如果每个人都将我视为一个完整的菜鸟，我将不胜感激。

在这里和谷歌搜索了 2 小时后，我决定问一下，我意识到我可能在某个地方错过了它，所以如果它位于其他地方，请不要咬我的头。

所以我被要求为一位艺术家设计一个画廊应用程序，用户可以在其中预览他的作品，然后根据需要购买高分辨率图像包。我所做的是创建了一个“主要”免费应用程序，其中包含所有艺术作品的缩略图组织到画廊中。每个画廊都有一个购买按钮，该按钮将链接到包含该画廊高分辨率图像的单独应用程序。因此，我的问题是，我想让用户完全访问图像。IE 我不希望他们只能在应用程序中查看它们，我希望他们能够将 jpg 用于他们想要的任何东西（壁纸、网站等）。

最好的方法是什么？将它们添加到 iphone / ipad 的图库应用中？只是一个包含图像的外部文件夹？还有一个人将如何去做，记住我只使用界面构建器构建了这整个东西，并且根本不知道如何在目标 c 中编码，所以请在响应时考虑到这一点。

提前感谢您的帮助，我越来越绝望，艺术家越来越不耐烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:15:38.940

您将不得不编写一些代码（或寻找程序员）。不疼（太疼了……）

试着看看[这个问题](https://stackoverflow.com/questions/4301012/saving-images-to-iphone-photo-library)，看看你能走多远

# c# - 如何将 HTML 表（用于结构）中的多个用户输入控件（下拉列表、文本框等）值提交到 sql 数据库中？

> ID：11360180
> 
> 赞同：0
> 
> 时间：2012-07-06T10:09:23.673
> 
> 标签：c#, asp.net, .net

我正在开发一个在线时间表提交系统（在 ASP.NET C#'sharp' 中），我想将所有输入数据（来自各种控件）提交到 SQL 服务器数据库中。我还没有在网上看到将多个控制值处理到同一个目标数据库中。控件存储在 HTML 表格的单元格中（用于结构）。用户从多个下拉列表（项目 = 1-12）中选择他们的工作时间，并且下拉列表中的 selectedItem 被计算为“总小时数”，只读文本框。其他控件包括非只读文本框（用于用户名）和其他文本框（用于评论）。理想情况下，单击“提交我的时间表”后，我希望将所有信息保存到 SQL 数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:17:47.640

在代码中为要保存在数据库中的每个控件的值创建变量。

然后按照步骤：：我只是提到您可以编写我猜的代码的步骤。

使用 SqlConnection 类创建数据库连接。

将您的插入脚本写为字符串。例如

sting strInsertScript = "INSERT INTO TIME_SHEET (值.....)";

然后使用 ExecuteNonQuery 执行命令 bu，如下所示

使用 SqlCommand 类创建数据库命令。

SqlCommand objCommand = new SqlCommand(strInsertScript);

objCommand.ExecuteNonQuery();

现在您的数据已保存在数据库中。

# php - javascript 等价于 PHP 字符串追加

> ID：11360182
> 
> 赞同：0
> 
> 时间：2012-07-06T10:09:28.407
> 
> 标签：php, javascript, string

在 php 中，我这样做是为了连接字符串

（伪代码）

```
$myString = "";
for($i = 0;$i < 10;$i++)
    $myString .= $i;
echo $myString; 
```

会给我0123456789

你明白了，现在，我怎样才能在 javascript 中做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:11:23.190

```
var myString = "";
for(var i = 0;i < 10;i++)
    myString += i;
alert(myString); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T10:12:58.117

您应该使用 += 运算符。

所以在伪代码中你的代码应该是这样的

```
myString = "";
for(i = 0;i < 10;i++)
    myString += i;
alert(myString); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T10:18:33.653

Javascript 使用加号进行字符串连接。所以：

```
mystring = 'this' + 'that';   //gives string value "thisthat" 
```

值得注意的是，Javascript 也使用加号进行数字加法。这意味着您可能会遇到变量类型的麻烦。

```
var myInt = 5;
var myString = "5";

alert(myInt + 5);     //gives the string value "55".
alert(myString + 5);  //gives the integer value 10. 
```

这意味着根据您的问题，您将数字加在一起以生成字符串的 PHP 技巧只有在您以字符串变量开头时才有效。由于 concat 运算符，PHP 可以自己识别出您打算将其作为字符串操作；Javascript 没有这种能力，所以你必须通过确保你的变量是正确的类型来明确地告诉它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T10:11:51.803

在这里它会做到的。

```
var $myString = "";
    for(var $i = 0;$i < 10;$i++){
        $myString += $i;//+=  the equivalent of .= in JS
}
    alert( $myString ); 
```

# visual-studio-2010 - 使用 NSubstitute 的项目的代码分析 CA0001 错误

> ID：11360184
> 
> 赞同：0
> 
> 时间：2012-07-06T10:09:35.793
> 
> 标签：visual-studio-2010, code-analysis, mscorlib, nsubstitute

我有一个（.NET 4）测试项目，它引用（.NET 4）NSubstitute.dll。

当我对项目运行 CodeAnalysis 时，我收到了一些 CA0001 错误：

运行代码分析...

> MSBUILD：错误：CA0001：读取模块“NSubstitute”时遇到以下错误：无法解析类型引用：[mscorlib，版本=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089]System.Runtime.CompilerServices.ExtensionAttribute。
> 
> MSBUILD：错误：CA0001：Rule=Microsoft.Interoperability#CA1404，Target=arcplan.test.engage.admin.ecmFramework.CAppSettingsTest.#IsSettingsStoreReadyToUse_SettingsStoreIsNotReady_ReturnsFalse()：读取模块“ECMFrameworkTest”时遇到以下错误：方法类型参数在位置0 无效。
> 
> MSBUILD：错误：CA0001：Rule=Microsoft.Security#CA2122，Target=arcplan.test.engage.admin.ecmFramework.CAppSettingsTest.#IsSettingsStoreReadyToUse_SettingsStoreIsNotReady_ReturnsFalse()：读取模块“ECMFrameworkTest”时遇到以下错误：方法类型参数在位置0 无效。

（ETC。）

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:35:16.333

您使用的是 1.4.1 版吗？此版本的构建有一个问题，原因是[使用安装了 .NET 4.5 的 ilmerge](http://www.mattwrock.com/post/2012/02/29/What-you-should-know-about-running-ILMerge-on-Net-45-Beta-assemblies-targeting-Net-40.aspx)。从 NSubstitute 的 1.4.2 版（此评论的最新版本）开始，此问题已得到修复。

[有关修复此问题的提交](https://github.com/nsubstitute/NSubstitute/commit/60486f5f83fddc92f77850e16cd29f129bd0c9b9)提供了更多详细信息。

# ruby-on-rails - 使用rubyzip解压后读取xml文件

> ID：11360185
> 
> 赞同：0
> 
> 时间：2012-07-06T10:09:42.877
> 
> 标签：ruby-on-rails, ruby, zip, rubyzip

```
 require 'active_support/core_ext'
 require 'open-uri'
 require 'zip/zip'

 zipfilename = open(url which returns a zip file with no of xml files inside)
 Zip::ZipFile.open(zipfilename) do |zipfile|
   zipfile.each do |entry|  
    xml = File.open(entry).read
    xml_to_hash = Hash.from_xml(xml)
   end
end 
```

当我打印尝试打印变量条目时，它以 file_name.xml 的形式出现。错误来自 xml = File.open(entry).read。

错误：

```
test.rb:51:in `initialize': can't convert Zip::ZipEntry into String (TypeError)
from test.rb:51:in `open'
from test.rb:51:in `block (2 levels) in <main>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:34:15.073

代替

```
xml = File.open(entry).read 
```

尝试

```
xml = zipfile.read(entry) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:25:33.070

`entry`您正在迭代的不是真实文件。它只是代表档案中的一个文件。我认为您需要将输入的类型`Zip::ZipEntry`转换为可以阅读的内容。

请参阅[http://rubyzip.sourceforge.net/classes/Zip/ZipFile.html中的示例](http://rubyzip.sourceforge.net/classes/Zip/ZipFile.html)

据我所见，您可以通过调用`get_input_stream`或仅调用读取来获得类似 io 的对象：[http ://rubyzip.sourceforge.net/classes/Zip/ZipEntry.html#M000135](http://rubyzip.sourceforge.net/classes/Zip/ZipEntry.html#M000135)

# php - jquery实时更新数据库中的行

> ID：11360188
> 
> 赞同：1
> 
> 时间：2012-07-06T10:09:54.423
> 
> 标签：php, mysql, ajax

我有一个 MySQL 数据库，其中有许多行，并且经常更新。我想要发生的是，如果用户打开一个网页并且有 78 行，那么页面中间会有一个数字显示 0，但是如果用户在该网页上时行数增加，那么页面中间的数字每次添加新行都会增加数据库中的行数，所以如果用户在页面上并且在20秒后有81行，那么它将显示一个数字3 in页面的中间。我在 Ajax 方面没有经验，因此将不胜感激。我正在使用 PHP 和 mysql 数据库

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:22:19.453

尝试这个 ：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
jQuery.ajax({
           类型：“发布”，
           网址：“文件名.php，
           数据：这里的数据，
           成功：函数（返回）{
                // 在这里做任何事情
               }
           });
</脚本>

```

在数据中，只需将要发送的值发送到 php 文件

# java - Android：下载受 NTLM 身份验证保护的文件

> ID：11360189
> 
> 赞同：8
> 
> 时间：2012-07-06T10:09:58.327
> 
> 标签：java, android, sharepoint, authentication, ntlm

我想从我的**Android应用程序中使用****NTLM身份验证保护的****Sharepoint**服务器下载文件。我找到了一些教程，但无法成功。

 ****我尝试使用[Java CIFS 客户端库](http://jcifs.samba.org/)并没有再次成功。

我调查了这篇文章：[Manipulating SharePoint list items with Android (JAVA) and NTLM Authentication](http://www.robertkuzma.com/2011/07/manipulating-sharepoint-list-items-with-android-java-and-ntlm-authentication/)但我不想使用 Web 服务，我只想下载一个文件。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:19:29.437

您是否使用标准 Java `java.net.Authenticator` [http://developer.android.com/reference/java/net/Authenticator.html](http://developer.android.com/reference/java/net/Authenticator.html)？如果它不支持 NTLM，请检查[http://developer.android.com/reference/org/apache/http/auth/NTCredentials.html](http://developer.android.com/reference/org/apache/http/auth/NTCredentials.html)和相关`org.apache.http`包。另请查看博客[http://mrrask.wordpress.com/2009/08/21/android-authenticating-via-ntlm/](http://mrrask.wordpress.com/2009/08/21/android-authenticating-via-ntlm/)，其中显示了如何使用它。平价

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T14:04:44.050

为什么要把事情复杂化

您应该能够在 Uri 中发送身份验证。

```
URL url = new URL ("http://user:pass@sub.domain.com/FolderName/FileName.docx"); 
```

此技术应适用于 Windows 身份验证和基本身份验证

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T01:09:27.217

尝试使用 Chilkat，虽然它不是免费的。但您可以轻松地在代码中实现它。

[奇卡特链接](http://www.chilkatsoft.com/)****

# java - H2数据库快速增长失控

> ID：11360192
> 
> 赞同：2
> 
> 时间：2012-07-06T10:10:18.513
> 
> 标签：java, database, h2

嗨，希望有人可以帮助我，我目前正在运行一个 H2 数据库，当缓存时它会迅速失控。完成缓存后，我发现它应该是大约 32MB，但经过一小段时间后它已经增长到接近 5GB。我创建了一个副本并一次删除了一个表，以尝试确定是什么原因造成的，但它没有任何效果，这让我相信它正在自动存储元数据或其他我看不到但我仍然无法看到的东西不知道它是如何成倍增长的。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:46:58.617

You could create a SQL script to check what the database contains (using the SCRIPT statement).

If there is not much data in the SQL script, it could be a long running open transaction that prevents the transaction log from shrinking. To analyze this, run the [Recover tool](http://h2database.com/javadoc/org/h2/tools/Recover.html) and check if there is an open transaction (see the "transaction log" section).

# python - 在 pyglet 中使用 pymunk 重力

> ID：11360195
> 
> 赞同：1
> 
> 时间：2012-07-06T10:10:31.183
> 
> 标签：python, game-physics, pyglet, pymunk

此代码`assassin1.png`在 (50, 80) 位置静止不动的黑屏上显示图像。

目标是在该图像上引起 pymunk 重力，使其下落。我遵循了使用 pygame 编写的[pymunk 教程](http://code.google.com/p/pymunk/wiki/SlideAndPinJointsExample)并尝试对其进行调整。我不知道为什么我的代码没有对我的图像应用重力。有人可以告诉我我做错了什么以及我应该改变什么以使其正常工作吗？

```
import pyglet
import pymunk

class PymunkSpace(object):
    def assassin_space(self, space):
        self.space = space
        self.mass = 91
        self.radius = 14
        self.inertia = pymunk.moment_for_circle(self.mass, 0, self.radius) 
        self.body = pymunk.Body(self.mass, self.inertia) 
        self.body.position = 50, 80 
        self.shape = pymunk.Circle(self.body, self.radius) 
        self.space.add(self.body, self.shape) 
        return self.shape 

class Assassin(pyglet.sprite.Sprite):
    def __init__(self, batch, img, x, y):
        pyglet.sprite.Sprite.__init__(self, img, x , y )

class Game(pyglet.window.Window):
    def __init__(self):
        pyglet.window.Window.__init__(self, width = 315, height = 220)
        self.batch_draw = pyglet.graphics.Batch()
        self.a_space = PymunkSpace().assassin_space(space)
        self.player1 = Assassin(batch = self.batch_draw, img = pyglet.image.load("assassin1.png"), x = self.a_space.body.position.x ,y = self.a_space.body.position.y )

    def on_draw(self):
        self.clear()
        self.batch_draw.draw()
        self.player1.draw()
        space.step(1/50.0) 

if __name__ == "__main__":
    space = pymunk.Space() 
    space.gravity = (0.0, -900.) 
    window = Game()
    pyglet.app.run() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T12:08:04.633

问题是您设置了`Sprite`一次的位置：

```
self.player1 = Assassin(batch = self.batch_draw, img = pyglet.image.load("assassin1.png"), x = self.a_space.body.position.x ,y = self.a_space.body.position.y )

class Assassin(pyglet.sprite.Sprite):
  def __init__(self, batch, img, x, y):
      pyglet.sprite.Sprite.__init__(self, img, x , y ) 
```

但这个位置永远不会更新。

另一个问题是，在 pygame 示例中，`space.step(1/50.0)`主循环的每次迭代都被调用，而您的仅在绘制窗口时被调用。

因此，首先，您应该确保`space.step`每一帧都被调用。通过使用`clock`：

```
class Game(pyglet.window.Window):
    def __init__(self):
        ...
        pyglet.clock.schedule(self.update)

    def on_draw(self):
        self.clear()
        self.batch_draw.draw()
        self.player1.draw()

    def update(self, dt):
        space.step(dt) 
```

下一步是确保精灵的位置与 pyglet 对象保持同步。

改变你的刺客职业：

```
class Assassin(pyglet.sprite.Sprite):
    def __init__(self, batch, img, space):
        self.space = space
        pyglet.sprite.Sprite.__init__(self, img, self.space.body.position.x , self.space.body.position.y)

    def update(self):
        self.x = self.space.body.position.x
        self.y = self.space.body.position.y 
```

像这样创建你的刺客实例：

```
class Game(pyglet.window.Window):
    def __init__(self):
        pyglet.window.Window.__init__(self, width = 315, height = 220)
        self.batch_draw = pyglet.graphics.Batch()
        self.a_space = PymunkSpace().assassin_space(space)
        self.player1 = Assassin(batch = self.batch_draw, img = pyglet.image.load("assassin1.png"), space = self.a_space)
        pyglet.clock.schedule(self.update) 
```

并调用`self.player1.update()`你的新`update`方法：

```
class Game(pyglet.window.Window):
    def __init__(self):
        ...

    def on_draw(self):
        ...

    def update(self, dt):
        self.player1.update()
        space.step(dt) 
```

（你可能应该摆脱一些不需要的实例成员，但这是另一个话题）

# java - 强制回滚事务会导致嵌套事务也回滚？

> ID：11360196
> 
> 赞同：2
> 
> 时间：2012-07-06T10:10:31.097
> 
> 标签：java, spring, hibernate, transactions

情况 - 故事时间：
我“继承”了一个程序，一个用于访问数据库的相当简单的 Web 服务。这个程序在某个地方有一个缺陷：它试图更新一个没有更新授权的表。该程序仅有权更新数据库队列 (Oracle)，以保存谁访问了什么信息。这是不受欢迎的行为，现在我修复了它。注意：这与这个问题本身无关，它只是导致我提出这个问题的原因。

该程序使用 Spring + Hibernate 来管理和访问数据和事务。

因为该程序的需求量很大，并且错误被认为是无法容忍的，所以我有一个快速的想法来添加一个修补程序，只是强制回滚每个事务，直到我找到实际操作它不应该操作的数据的软件部分。

该软件使用 2 个`@Transactional`注释。一个在整个过程中，另一个在写入日志数据的部分。第二个与`Requires_New`传播设置一起使用。据我了解，第二个事务总是会创建一个新事务并在其跨度（在本例中：一种方法）结束时刷新它。

`TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();`然后，在嵌套事务结束后，我添加了一个直接的回滚语句，以回滚外部事务（从而撤消操作）。但它没有那样工作。两个事务都回滚了。谁能给我任何指示为什么会发生这种情况？它有点矛盾，我认为我知道系统是如何工作的。是否`currentTransactionStatus()`包括与当前会话相关的所有事务？

相关代码片段（为清晰起见缩短）

```
@Override
@Transactional
@PreAuthorize(Rollen.INFOVN)
public InfoVNAntwort infoVNAnfrage(final InfoVNAnfrage infoVNAnfrage) {

    // extract data from request
    final InfoVNDatenhalter datenhalter = (InfoVNDatenhalter) this.getController().erzeugeNeuenDatenhalter(ProzessNamen.INFOVN);
    datenhalter.setAnfrageFin(StringUtils.trimToNull(infoVNAnfrage.getFIN()));
    datenhalter.setAnfrageZB2(StringUtils.trimToNull(infoVNAnfrage.getZB2()));
    final String username = this.getCurrentUserName();
    datenhalter.setBenutzerkennung(username);
    datenhalter.setErgaenzungstext(infoVNAnfrage.getErgaenzungstext());
    datenhalter.setAnfragegrund(infoVNAnfrage.getAnfrageanlass());

    // actual fetch of database data
    final DialogAntwort da = (DialogAntwort) this.getController().verarbeite(datenhalter);

    // convert to ws response
    final InfoVNAntwort vnAntwort = this.getMapper().map(da, InfoVNAntwort.class);

    // log who did what
    this.erstelleBewirt(vnAntwort, infoVNAnfrage, new DateTime(), username);

    // roll back outer transaction
    TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();

    return vnAntwort;
}

@Transactional(propagation = Propagation.REQUIRES_NEW)
private void erstelleBewirt(final InfoVNAntwort vnAntwort, final InfoVNAnfrage infoVNAnfrage, final DateTime zeitpunktAuskunft, final String username) {
    final InfoVNBewirt eintrag = new InfoVNBewirt();
    eintrag.setZeitpunktErteilungAuskunft(zeitpunktAuskunft);
    eintrag.setSteuerelement(STEUERELEMENT_INFOVN);
    eintrag.setAnfrageAnlass(infoVNAnfrage.getAnfrageanlass());
    this.completeEintrag(username, eintrag);
    this.logdatenPersister.persistiereLogdaten(eintrag);
} 
```

数据库连接：

```
 <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource"></property>
        <property name="packagesToScan">
            <list>
                <value>de.mm.vwn</value>
                <value>de.mm.cfo.allgemein.kenauthent</value>
                <value>de.mm.cfo.infovn.logdaten</value>
            </list>
        </property>
        <property name="hibernateProperties" ref="hibernateProperties"></property>
    </bean>

    <bean id="hibernateProperties"
        class="org.springframework.beans.factory.config.PropertiesFactoryBean">
        <property name="properties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.hbm2ddl.auto">none</prop>
                <prop key="hibernate.show_sql">false</prop>
                <prop key="hibernate.format_sql">false</prop>
                <prop key="hibernate.cache.use_second_level_cache">true</prop>
<prop key="hibernate.cache.use_query_cache">true</prop>
<prop key="hibernate.cache.region.factory_class">net.sf.ehcache.hibernate.EhCacheRegionFactory</prop>
<prop key="hibernate.jdbc.use_scrollable_resultset">true</prop>
<prop key="hibernate.jdbc.batch_size">25</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="dataSource" ref="dataSource" />
        <property name="sessionFactory" ref="sessionFactory"></property>
    </bean>

    <tx:annotation-driven /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:57:18.413

好的。问题是我想的那个。

下面是 Spring 使 bean 具有事务性的方式：当您从 Spring bean 工厂获取事务性 bean 时，或者由于依赖注入，Spring 不会为您提供 bean 类的实例。它为您提供了一个代理，它与您的 bean 类具有相同的接口，并将所有方法调用委托给您的 bean 类的实例，除了它在调用方法之前启动事务（如果需要），并回滚/提交事务（如果需要）在方法返回后：

```
Client ----> transactional proxy ----> bean.infoVNAnfrage() 
```

如果从您的 bean 类实例 ( `InfoVNAntwort`) 调用同一个 bean 的另一个方法，则方法调用不会通过代理：

```
Client ----> transactional proxy ----> bean.infoVNAnfrage() ----> bean.erstelleBewirt() 
```

所以 Spring 没有办法为`erstelleBewirt()`.

更简单的方法是将`erstelleBewirt()`方法放入另一个事务性 Spring bean 中，并将这个另一个 Spring bean 注入到您当前的 bean 中：

```
Client ----> transactional proxy ----> bean.infoVNAnfrage() ----> transactional proxy ----> otherBean.erstelleBewirt() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:36:23.270

我认为您只需要`@Transactional`在方法上使用单个（您也可以在类级别上使用）。像这个例子：

```
@Transactional(propagation = Propagation.REQUIRES_NEW)
public void updateFoo(Foo foo) {//transaction1
    // do something
    updateFoo1(); 
}

public void updateFoo1() {//transaction 2
    // do something
} 
```

# facebook - Soundcloud 应用程序通过 Facebook 连接连接无法运行回调脚本

> ID：11360202
> 
> 赞同：1
> 
> 时间：2012-07-06T10:10:58.110
> 
> 标签：facebook, soundcloud

这似乎是 Soundcloud 的问题。如果您在 Soundcloud 上有一个应用程序并且您的成员尝试连接到此应用程序，他们将看到两个选项：

1.  使用您的 Soundcloud 帐户登录。
2.  使用您的 Facebook 帐户登录。

问题在于 Facebook 连接。

通常，如果您单击 Facebook 连接按钮，它必须打开一个弹出窗口，然后您接受并登录。但是 Soundcloud Facebook 连接按钮不会打开任何弹出窗口，这就是它无法运行试图到达 window.opener 范围的 javascript 代码的原因。

这是萤火虫错误：

```
window.opener is null
popup_callback.html?returnTo=http%3A%2F%2Fdev.giggem.com%2Fprofile%3Fcode%3D4a360828894b6fc6d4029fa3e9fbf108()popup_...9fbf108 (line 9)
[Break On This Error]   

...ar params    = window.opener.$.helpers.urlencodedToObject(window.location.search... 
```

我在 Soundcloud 的网站上找不到任何页面来报告这一点，这就是我在这里写它的原因。

如何通过 Soundcloud/Facebook 建立连接？

注意：在 Ubuntu Linux 下使用 Firefox 13.0.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:54:35.333

是的，我有同样的问题，几个月来一直这样。这是帮助确定问题所在的屏幕截图：

[http://d.pr/i/NFf](http://d.pr/i/NFf) ![SO11360202 示例](../Images/3336e23bbd4182c7a93ce9e69d9fc998.png)

查看代码，这似乎是有问题的脚本：

```
var params    = window.opener.$.helpers.urlencodedToObject(window.location.search) 
```

# android - 如何在 csvwriter 中使用 default_line_end？

> ID：11360205
> 
> 赞同：0
> 
> 时间：2012-07-06T10:11:05.530
> 
> 标签：android

已经集成了一个 jar 文件，其中包含来自 au.com.bytecode.opencsv.CSVWriter 的 jar，但问题是如何为其创建新行.... CSVWriter 对象没有新行的方法....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:33:09.487

在我看来，它是根据他们的文档自动执行的（只要您使用正确的构造函数）。

看起来有两个构造函数允许您设置行终止：

```
CSVWriter(Writer writer, char separator, char quotechar, char escapechar, String lineEnd) 
```

> 使用提供的分隔符、引号字符、转义字符和行尾构造 CSVWriter。

或者

```
CSVWriter(Writer writer, char separator, char quotechar, String lineEnd) 
```

> 使用提供的分隔符、引号字符和行尾构造 CSVWriter。

因此，您将使用以下方法实例化该类：

```
CSVWriter(writer, separator, quotechar, escapechar, DEFAULT_LINE_END) 
```

或者

```
CSVWriter(writer, separator, quotechar, DEFAULT_LINE_END) 
```

# drupal-7 - Drupal：$node->content['body'][0]['#markup']：什么，何时，何地？

> ID：11360216
> 
> 赞同：1
> 
> 时间：2012-07-06T10:11:38.153
> 
> 标签：drupal-7

在我的模块中，我使用 hook_node_view 在查看内容时对其进行更改。为此，我获取并设置 $node->content['body'][0]['#markup']。它工作正常，但我最近在我的预告视图中遇到了一些问题，这让我跟踪从 $node->content['body'][0]['#markup'] 获取的数据的问题。

看起来里面的内容至少取决于视图模式，因为如果我写

```
print $node->content['body'][0]['#markup']; 
```

无论是模式“完整”还是“预告片”，我都会得到不同的结果。由于某种原因，当我将内容视为预告片时，$node->content['body'][0]['#markup'] 的内容非常短。甚至比预告片的长度还要短。

这让我更加想知道 $node->content['body'][0]['#markup'] 中的内容，以及设置的时间和地点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:15:11.837

我建议不要使用 hook_node_view，而是使用 hook_node_load。

[http://api.drupal.org/api/drupal/modules%21node%21node.api.php/function/hook_node_load/7](http://api.drupal.org/api/drupal/modules%21node%21node.api.php/function/hook_node_load/7)

# memory - C++ memory issue

> ID：11360224
> 
> 赞同：2
> 
> 时间：2012-07-06T10:12:13.057
> 
> 标签：memory, c++-cli, numbers

I'm currently building a prime number finder, and am having a memory problem:

> This may be due to a corruption of the heap, which indicates a bug in PrimeNumbers.exe or any of the DLLs it has loaded.

PS. Please don't say to me if this isn't the way to find prime numbers, I want to figure it out myself!

**Code:**

```
// PrimeNumbers.cpp : main project file.

#include "stdafx.h"
#include <vector>

using namespace System;
using namespace std;

int main(array<System::String ^> ^args)
{
Console::WriteLine(L"Until what number do you want to stop?");
signed const int numtstop = Convert::ToInt16(Console::ReadLine());
bool * isvalid = new bool[numtstop];

    int allattempts = numtstop*numtstop; // Find all the possible combinations of numbers

    for (int currentnumb = 0; currentnumb <= allattempts; currentnumb++) // For each number try to find a combination
    {
        for (int i = 0; i <= numtstop; i++)
        {
            for (int tnumb = 0; tnumb <= numtstop; tnumb++)
            {
                if (i*tnumb == currentnumb)
                {
                    isvalid[currentnumb] = false;
                    Console::WriteLine("Error");
                }
            }
        }
    }

    Console::WriteLine(L"\nAll prime number in the range of:" + Convert::ToString(numtstop));

    for (int pnts = 0; pnts <= numtstop; pnts++)
    {
        if (isvalid[pnts] != false)
        {
            Console::WriteLine(pnts);
        }
    }

return 0;
} 
```

I don't see the memory problem.

Please help.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:15:34.590

You are allocating `numtstop` booleans, but you index that array using a variable that ranges from zero to `numtstop*numtstop`. This will be severely out of bounds for all `numstop` values greater than `1`.

You should either allocate more booleans (`numtstop*numtstop`) or use a different variable to index into `isvalid` (for example, `i`, which ranges from `0` to `numstop`). I am sorry, I cannot be more precise than that because of your request not to comment on your algorithm of finding primes.

* * *

P.S. If you would like to read something on the topic of finding small primes, here is a link to a [great book by Dijkstra](http://www.cs.utexas.edu/~EWD/ewd02xx/EWD249.PDF). He teaches you how to construct a program for the first 1000 primes on pages 35..49.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:13:36.383

Problem is that you use native C++ in managed C++/CLI code. And use new without delete of course.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:15:14.147

```
`currentnumb` : 
```

is bigger than the size of the array, which is just `numtstop`. You are probably going out of bound, this might be your issue.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T10:17:26.447

You never `delete[]` your `isvalid` local, this is a memory leak.

# flash - 我怎样才能得到一个“正方形” Flex4中的宽度等于高度？

> ID：11360229
> 
> 赞同：0
> 
> 时间：2012-07-06T10:12:41.223
> 
> 标签：flash, apache-flex, flex4

在 Flex4 中，我想确保一个`<mx:Box>`组件是方形的（宽度 = 高度），宽度是从父组件继承的“100%”。但是`<mx:Box width="100%" height="width">`还是`<mx:Box width="100%" height="{height}">`不行。我怎样才能做到？非常感谢！~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:15:58.393

采用

```
<mx:Box width="{parent.width}" height="{parent.width}"> 
```

或者，使用

```
<mx:Box width="100%" height="{myBox.width}" id="myBox"> 
```

# c# - 如何在c#中动态获取类元素

> ID：11360237
> 
> 赞同：3
> 
> 时间：2012-07-06T10:13:16.057
> 
> 标签：c#, visual-studio-2010, type-conversion

我可能在这里缺少基本知识，但我会去问它。

假设我们有一个字符串数组：

```
ItemCode
ItemDescription 
```

我们有一堂课：

```
public class InventoryItem
    {
        public string ItemCode { get; set; }
        public string ItemDescription { get; set; }
    } 
```

我希望能够根据数组的值动态引用 InventoryItem 的属性。

我需要遍历数组并通过数组的当前字符串成员获取类的属性值。

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T10:14:47.117

您使用反射：

```
foreach (var name in propertyNames)
{
    // Or instance.GetType()
    var property = typeof(InventoryItem).GetProperty(name);
    Console.WriteLine("{0}: {1}", name, property.GetValue(instance, null));
} 
```

看：

*   [`Type.GetProperty`](http://msdn.microsoft.com/en-us/library/system.type.getproperty.aspx)
*   [`Type.GetProperties`](http://msdn.microsoft.com/en-us/library/system.type.getproperties.aspx)（找到他们所有）
*   [`PropertyInfo.GetValue`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.getvalue.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:44:32.893

Jon Skeet 的回答是绝对正确的（他还有其他类型的吗？）如果您需要动态访问 1000 个 InventoryItem 对象，则效果很好。但是，如果您需要动态访问更多对象，例如 1000 万个对象，反射开始变得非常缓慢。我有一个我不久前制作的小助手类，通过创建和编译访问属性的动态方法，可以轻松地访问比反射快约 26 倍的属性（至少在我的计算机上）。它远不及静态访问它的速度，但由于您需要动态访问它，因此甚至不需要考虑。以下是你如何使用它：

```
var accessor = new DynamicPropertyAccessor(typeof(InventoryItem).GetProperty("ItemCode"));

foreach (var inventoryItem in warehouse13)
{
    Console.WriteLine("{0}: {1}", accessor.Name, accessor[inventoryItem]);
} 
```

您还可以使用它来设置一个值：`accessor[item] = "newValue"`。如果您需要动态访问多个属性，您可以拥有一组访问器。当您为`DynamicPropertyAccessor`每个属性创建一次并重用以访问多个对象（或多次访问同一个对象）时，性能提升将是巨大的。

我在`DynamicPropertyAccessor`这里发布了课程：[https ://gist.github.com/3059427](https://gist.github.com/3059427)

# ios - UIPopoverController 奇怪的调整大小行为

> ID：11360238
> 
> 赞同：3
> 
> 时间：2012-07-06T10:13:19.077
> 
> 标签：ios, ipad, uipopovercontroller, window-resize

我使用 UINavigationController 为 iPhone 开发了一个静态库并推送一些 UIViewControllers。

我正在实施一种方法，允许 ipad 开发人员将我的库包含到他们的 iPad 应用程序中。为此，我想在大小为 iphone 的 UIPopoverController 中显示我的库控制器。

那是我开发的，但是每次我推送一个新的 viewController 时，Popover 都会以一种非常奇怪的方式调整自己的大小：

![在此处输入图像描述](../Images/2a96aac7d550fe4ca6116a5fc7d0ecaa.png)

我检查了我的视图控制器（通过界面生成器），并且 AutoResize 行为已停用。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T12:17:35.200

`UIViewController`显示器需要`UIPopoverViewController`设置此属性：

```
contentSizeForViewInPopover 
```

指示其显示大小，并且`UIPopoverViewController`将根据该属性的值调整大小。例如：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.contentSizeForViewInPopover = self.view.frame.size;
    // Do any additional setup after loading the view from its nib.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:32:31.993

据我了解您的问题，每当您将控制器推送到 时，弹出框都会调整大小`UINavigationController`，这是您的根控制器`UIPopoverController`。我不能说为什么会发生这种情况，但是您可以通过将 popoverController ( `popoverControllerReference`，您可以创建单例引用) 的引用发送到视图控制器并`popoverContentSize`在推送控制器时手动设置来摆脱它：`popoverControllerReference.popoverContentSize = CGSizeMake(320, 460);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T15:41:48.237

接受的答案使用现在在 iOS 7.0 中已弃用的方法。

我遇到了同样的问题，并且使用 popoverContentSize 取得了成功。

下面的一些东西：

```
[_popoverSegue.popoverController setPopoverContentSize:CGSizeMake(320.0f, 460.0f)]; 
```

其中 _popoverSegue 是 UIStoryboardPopoverSegue 的一个实例

希望这可以帮助未来的游客......

（对不起，我可能应该评论接受的答案，但我没有足够的声誉......）

# objective-c - iOS - UITableView 崩溃

> ID：11360241
> 
> 赞同：0
> 
> 时间：2012-07-06T10:13:26.430
> 
> 标签：objective-c, ios, uitableview, didreceivememorywarning

我将图像加载到 UITableViewCell 中。这些图像的大小并不大——每张可能只有 6 KB。

但是有 500 行。当我滚动时，它一开始很慢，并给我内存警告消息，但再滚动几次后，应用程序崩溃了。我也使用了一些工具，它表明当我滚动时内存使用率越来越高！`dequeueReusableCellWithIdentifier:CellIdentifier`是不是工作不正常，或者我应该以某种方式“消除”图像？！

顺便说一句，我已经关闭了我设备上的所有其他应用程序，并且我的 iPod Touch 上有超过 1.5 GB 的可用空间。

这是配置单元格的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    int cellNumber = indexPath.row + 1;
    NSString *cellImage1 = [NSString stringWithFormat:@"c%i.png", cellNumber];
    UIImage *theImage = [UIImage imageNamed:cellImage1];

    [cell.imageView setImage:theImage];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:18:54.010

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] 
            initWithStyle:UITableViewCellStyleDefault 
            reuseIdentifier:CellIdentifier];
}

UITableViewCell *cell = [[UITableViewCell alloc] 
                         initWithStyle:UITableViewCellStyleDefault 
                         reuseIdentifier:CellIdentifier]; 
```

这里发生了什么？您正在重新分配相同的内存两次。

# iphone - 控制主音量 - iPhone、Cocoa Touch

> ID：11360242
> 
> 赞同：3
> 
> 时间：2012-07-06T10:13:26.370
> 
> 标签：iphone, ios, cocoa-touch, volume, mpvolumeview

我想用 UISlider 控制 iPhone 的主音量。有一种无需代码即可完成的方法，但我忘记了如何操作。所以代码或在xib中，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:36:23.763

您可以尝试以下方法： 将其放入您的 XIB 中。

1.  打开要放置滑块的 XIB
2.  将 UIView 添加到您的视图
3.  将类标识从 UIView 更改为 MPVolumeView
4.  更改背景颜色以清除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:37:32.590

假设您已经有一个 MPVolumeView 类的实例，您需要搜索它的子视图以找到 MPVolumeSlider 视图：

```
UISlider *volumeViewSlider;

// Find the MPVolumeSlider
for (UIView *view in [volumeView subviews])
{
   if ([[[view class] description] isEqualToString:@"MPVolumeSlider"]) 
   {
       volumeViewSlider = view;
   }
}

[volumeViewSlider setValue: 1.0f animated:YES];
[volumeViewSlider _commitVolumeChange]; 
```

希望这可以帮助你。

# perforce - P4V(Perforce) 使用逻辑运算符过滤挂起的更改列表

> ID：11360244
> 
> 赞同：1
> 
> 时间：2012-07-06T10:13:42.837
> 
> 标签：perforce, p4v

使用最新的 P4V (Perforce) 客户端，我们可以使用 AND/OR 等逻辑运算符过滤待处理的更改列表吗？例如，按“ `Owner=me`”、“ `Client=myClientA AND myClientB`”过滤？当从另一个客户上架时，这将很方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:22:41.447

（除了想知道您使用的是什么 GUI，我在“待处理”选项卡上看到“用户：”和“工作区：”）P4V 仅支持**一个条目**或**空字段**进行过滤，因此如果您没有太多客户端清除“工作区” :" 字段应列出您要取消搁置的候选人。

# visual-c++ - 在基于 mfc 对话框的应用程序中添加 sql 数据库

> ID：11360247
> 
> 赞同：0
> 
> 时间：2012-07-06T10:13:58.687
> 
> 标签：visual-c++, mfc

我有一个基于 MFC 对话框的项目，现在我想在该项目中添加数据库。我不知道该怎么做。任何人都可以提供有用的链接吗？

实际上，当我创建一个新的基于对话框的 MFC 项目时，数据库支持是隐藏的。所以我想问

**MFC对话框库项目是否支持数据库**

当我创建新的基于对话框的 MFC 项目时

![在此处输入图像描述](../Images/fd9555f51ca64d552ae9b73773f19c27.png)

数据库支持是隐藏的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:25:34.197

appwizard 中的数据库支持是针对 doc/view 架构的。它将快速帮助您创建 ODBC 类。

绝对可以在 MFC 应用程序中使用数据库。您可以使用 ODBC/ADO 连接到数据库并访问它。你可以参考这些网站

1.  [http://www.informit.com/library/content.aspx?b=Visual_C_PlusPlus&seqNum=190](http://www.informit.com/library/content.aspx?b=Visual_C_PlusPlus&seqNum=190)
2.  [http://msdn.microsoft.com/en-us/library/fk4h509a(VS.80).aspx](http://msdn.microsoft.com/en-us/library/fk4h509a(VS.80).aspx)
3.  [http://msdn.microsoft.com/en-us/library/w2c4cthk%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/w2c4cthk%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T05:10:02.227

您最好直接使用`CDatabase`和`CRecordset`类打开数据库，读取/写入表，或者使用不同的`CRecordset`对象调用SQL。

您只需要一个`CDatabase`对象，并将其附加到不同的`CRecordset`实例（**一次**一个）。您可以直接在循环中使用`CRecordset`和使用`GetFieldValue`方法（由`IsEOF`方法控制）。或者您可以继承`CRecordset`并实现`DoFieldExchange`. [看这里。](http://msdn.microsoft.com/en-us/library/czxt1e3z%28v=vs.71%29.aspx)

# exception - 异常跟踪解决方案

> ID：11360258
> 
> 赞同：3
> 
> 时间：2012-07-06T10:14:56.820
> 
> 标签：exception, tracking, bug-tracking, saas

AirBrake 和 Exceptional.io 有什么替代品吗？我都试过了，我认为它们更面向 Ruby/Rails 项目。我正在寻找的是一个跟踪 Java 异常的 SaaS 解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:04:49.057

Yes, there is: [Coalmine](https://getcoalmine.com) It's mavenized, extremely easy to use, and reliable. The [Java connector](https://github.com/coalmine/coalmine_java) is officially supported by the company.

I am a co-founder of Coalmine ;) Let me know if you have any specific questions on how to get started.

# gtk - gtk 绘制“暴露事件”并重绘

> ID：11360260
> 
> 赞同：0
> 
> 时间：2012-07-06T10:15:12.687
> 
> 标签：gtk, redraw

我想用来`expose-event`画一些东西然后更新或重画。也就是说，窗口中有一个绘图区和一个按钮。单击按钮时，绘图区域将相应地重新绘制。我的问题是

1.  在下面的代码中，如果我更改`gtk_container_add (GTK_CONTAINER (box), canvas);`为`gtk_box_pack_start(GTK_BOX(box), canvas, FALSE, FALSE, 0);`，则不会绘制任何内容。通常我们用`gtk_box_pack_start`来往盒子里加东西。这次怎么不行了？

2.  该功能`build_ACC_axis`刷新（删除已绘制的内容）绘图区域并准备新的绘图。但它并没有删除已绘制的内容。为什么？如何刷新绘图区？

如果源文件是test.c，那么编译是

> gcc -o test test.c `pkg-config --cflags --libs gtk+-2.0`

代码如下：

```
#include <gtk/gtk.h>
#include <glib.h>

static void draw (GdkDrawable *d, GdkGC *gc)
{
  /* Draw with GDK */
  gdk_draw_line (d, gc, 0, 0, 50, 50);
  gdk_draw_line (d, gc, 50, 50, 50, 150);
  gdk_draw_line (d, gc, 50, 150, 0, 200);

  gdk_draw_line (d, gc, 200, 0, 150, 50);
  gdk_draw_line (d, gc, 150, 50, 150, 150);
  gdk_draw_line (d, gc, 150, 150, 200, 200);

  gdk_draw_line (d, gc, 50, 50, 150, 50);
  gdk_draw_line (d, gc, 50, 150, 150, 150);
}

static gboolean expose_cb (GtkWidget *canvas, GdkEventExpose *event, gpointer user_data)
{
  GdkGC *gc;

  gc = gdk_gc_new (canvas->window);
  draw (canvas->window, gc);
  g_object_unref (gc);

  return FALSE;
}

void build_ACC_axis (GtkWidget *button, GtkWidget *widget)
{
  GdkRegion *region;

  GtkWidget *canvas = g_object_get_data(G_OBJECT(widget), "plat_GA_canvas");

  region = gdk_drawable_get_visible_region(canvas->window);
  gdk_window_invalidate_region(canvas->window, region, TRUE);
  gtk_widget_queue_draw(canvas);
  /* gdk_window_process_updates(canvas->window, TRUE); */
  gdk_region_destroy (region);
}

int main (int argc, char **argv)
{
  GtkWidget *window;
  GtkWidget *canvas, *box, *button;

  gtk_init (&argc, &argv);

  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_size_request(window, 500, 300);
  g_signal_connect (G_OBJECT (window), "destroy", G_CALLBACK (gtk_main_quit), NULL);

  box = gtk_vbox_new(FALSE, 0);
  gtk_container_add (GTK_CONTAINER (window), box);

  canvas = gtk_drawing_area_new ();
  g_object_set_data(G_OBJECT(window), "plat_GA_canvas", canvas);
  /* gtk_box_pack_start(GTK_BOX(box), canvas, FALSE, FALSE, 0); */
  gtk_container_add (GTK_CONTAINER (box), canvas);
  g_signal_connect (G_OBJECT (canvas), "expose-event", G_CALLBACK (expose_cb), NULL);

  button = gtk_button_new_with_label ("ok");
  gtk_box_pack_start(GTK_BOX(box), button, FALSE, FALSE, 0);
  /* gtk_container_add (GTK_CONTAINER (box), button); */
  gtk_signal_connect(GTK_OBJECT(button), "clicked", GTK_SIGNAL_FUNC(build_ACC_axis), window);

  gtk_widget_show_all (window);

  gtk_main ();
} 
```

我想回答我的第二个问题。单击按钮后，它将发送`expose-event`信号并运行`expose_cb`。由于功能没有变化`draw`，我们看不到刷新。以下是可以显示刷新的更新代码。关键是添加变量`factor`。但是对于第一个问题，我仍然不知道为什么。

```
#include <gtk/gtk.h>
#include <glib.h>

int factor;
static void draw (GdkDrawable *d, GdkGC *gc, double fac)
{
  /* Draw with GDK */
  gdk_draw_line (d, gc, 0, 0, 50, 50 * fac);
  gdk_draw_line (d, gc, 50, 50, 50, 150);
  gdk_draw_line (d, gc, 50, 150, 0, 200);

  gdk_draw_line (d, gc, 200, 0, 150, 50);
  gdk_draw_line (d, gc, 150, 50, 150, 150);
  gdk_draw_line (d, gc, 150, 150, 200, 200);

  gdk_draw_line (d, gc, 50, 50, 150, 50);
  gdk_draw_line (d, gc, 50, 150, 150, 150);
}

static gboolean expose_cb (GtkWidget *canvas, GdkEventExpose *event, gpointer user_data)
{
  GdkGC *gc;

  gc = gdk_gc_new (canvas->window);
  draw (canvas->window, gc, factor);
  g_object_unref (gc);

  return FALSE;
}

void build_ACC_axis (GtkWidget *button, GtkWidget *widget)
{
  GdkRegion *region;

  GtkWidget *canvas = g_object_get_data(G_OBJECT(widget), "plat_GA_canvas");

  region = gdk_drawable_get_visible_region(canvas->window);
  gdk_window_invalidate_region(canvas->window, region, TRUE);
  /* gtk_widget_queue_draw(canvas); */
  gdk_window_process_updates(canvas->window, TRUE);
  gdk_region_destroy (region);
  factor++;

}

int main (int argc, char **argv)
{
  GtkWidget *window;
  GtkWidget *canvas, *box, *button;

  gtk_init (&argc, &argv);

  factor = 1;
  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_size_request(window, 500, 300);
  g_signal_connect (G_OBJECT (window), "destroy", G_CALLBACK (gtk_main_quit), NULL);

  box = gtk_vbox_new(FALSE, 0);
  gtk_container_add (GTK_CONTAINER (window), box);

  canvas = gtk_drawing_area_new ();
  g_object_set_data(G_OBJECT(window), "plat_GA_canvas", canvas);
  /* gtk_box_pack_start(GTK_BOX(box), canvas, FALSE, FALSE, 0); */
  gtk_container_add (GTK_CONTAINER (box), canvas);
  g_signal_connect (G_OBJECT (canvas), "expose-event", G_CALLBACK (expose_cb), NULL);

  button = gtk_button_new_with_label ("ok");
  gtk_box_pack_start(GTK_BOX(box), button, FALSE, FALSE, 0);
  /* gtk_container_add (GTK_CONTAINER (box), button); */
  gtk_signal_connect(GTK_OBJECT(button), "clicked", GTK_SIGNAL_FUNC(build_ACC_axis), window);

  gtk_widget_show_all (window);

  gtk_main ();
} 
```

# java - 加载音池时活动屏幕变为空白

> ID：11360262
> 
> 赞同：1
> 
> 时间：2012-07-06T10:15:14.970
> 
> 标签：java, android, android-layout

我正在加载大约 100 个小声音的声音池，我在活动中的应用程序中需要它们。当此活动开始时，屏幕变为空白，加载所有音池后加载背景。

如何让它在加载声音池时显示已经在 xml 中添加的背景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:28:30.880

使用 AsyncTask 来处理这个问题。

```
private class MyBackgroundTask extends AsyncTask<String, Void, Boolean> {

    @Override
    protected void onPreExecute() {
        //initialize views like progress dialog.
    }

    @Override
    protected Boolean doInBackground(String... params) {
        //Add code which you want to run in background.
        //In your case, code to load sound pools
    }

    @Override
    public void onPostExecute(Boolean success) {
        //update UI with the result
    }
} 
```

在 onCreate 方法中，

```
new MyBackgroundTask().execute(); 
```

# excel - 通过 Excel VBA 访问 MS

> ID：11360264
> 
> 赞同：1
> 
> 时间：2012-07-06T10:15:24.387
> 
> 标签：excel, ms-access, vba, activex, ms-access-2010

我遇到了一个众所周知的问题，但我找不到任何解决方案。我有一个使用 Excel 用 VBA 编写的旧应用程序（我不知道到底有多旧），它使用了一些 Access 数据 (*.mdb)。该应用程序是在 32 位系统上编写的。我尝试使用 Office 2010 将其更新到新的 64 位系统。

这是我用来加载 Access DB 的代码：
`Set Db = DBEngine.OpenDatabase(.sChemin & .sNom, False, False, ";pwd=******")`

我得到的错误是：
`429 Activex Component Cant Create Object`

以下是我的参考资料：

*   适用于应用程序的 Visual Basic
*   Microsoft Excel 14.0 对象库
*   OLE 自动化
*   Microsoft Forms 2.0 对象库
*   Microsoft 脚本运行时
*   Microsoft 数据访问组件安装版本
*   Microsoft DAO 3.6 对象库

我已经尝试使用 注销/重新注册 DAO dll `regsvr32 "C:\Program Files (x86)\Common Files\microsoft shared\DAO\dao360.dll"`，当我尝试使用工作区时遇到了同样的问题。

我不知道它是否会有所帮助，但是当我使用 CreateObject("Access.Application") 并且我在两个不同的时间安装 Excel / Word 和 Access 时，Access 工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:40:46.600

尝试删除对 的引用`Microsoft DAO 3.6 Object Library`，它很旧。添加对`Microsoft Office 14.0 Access database engine Object Library`.

# iphone - NSMutableArray 或 NSArray 结构

> ID：11360266
> 
> 赞同：1
> 
> 时间：2012-07-06T10:15:27.680
> 
> 标签：iphone, xcode, nsmutablearray

在 NSMutableArray 或 NSArray 中如何设置行结构。我能找到的所有示例都只处理一维整数或字符串。

那么如何设置数组行结构，例如：

整数、字符串、日期

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:32:44.117

您需要创建一个数组数组或字典数组，如果您想按名称而不是索引来引用数据，则第二种方法会更好：

```
NSMutableArray *rows = [[NSMutableArray alloc] init];
NSMutableDictionary *firstRow = [NSMutableDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:12], @"fieldWithNumber",
    [NSString stringWithFormat:@"A formatted string %ld", 34], @"fieldWithString",
    [NSDate date], @"fieldWithDate",
    nil];
[rows addObject:firstRow];
// etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:25:13.940

您可以制作自定义类并将这些对象的集合添加到数组中。

例如，请假设我们必须对地点进行一些行，然后创建一个类 PLACE.h

```
@interface PLACE : NSObject 
{
   NSString *title;
   NSString *summary;
   NSString *url;
   NSString *latitude;
   NSString *longitude;
}

@property   (nonatomic, retain) NSString    *title;
@property   (nonatomic, retain) NSString    *summary;
@property   (nonatomic, retain) NSString    *url;
@property   (nonatomic, retain) NSString    *latitude;
@property   (nonatomic, retain) NSString    *longitude;

@end 
```

地点.m

```
@implementation PLACE

@synthesize title;
@synthesize summary;
@synthesize url;
@synthesize latitude;
@synthesize longitude;

- (void) dealloc
{
  [title release];
  [summary release];
  [url release];
  [latitude release];
  [longitude release];
  [super dealloc];
}
@end 
```

为每个地方创建类的实例`PLACE`并将对象保存在数组中。我认为这可以解决您的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T10:19:36.070

数组只是对象的集合。

只需创建一个包含整数、日期和字符串的对象，然后将它们的实例添加到数组中。

# php - 关闭浏览器可以终止服务器上的 PHP 脚本吗？

> ID：11360274
> 
> 赞同：24
> 
> 时间：2012-07-06T10:15:59.850
> 
> 标签：php, webserver

假设用户单击了一个按钮，这导致将 jquery ajax 请求发送到我的服务器。

服务器响应 ajax 请求开始一个复杂的过程。假设该过程需要 5 分钟才能完成。

与此同时，用户感到无聊并关闭了他的浏览器窗口。

服务器上的脚本会继续处理直到它在正常时间完成，还是会停止？

如果用户访问一个 url，同样的事情，例如 example.com/process.php?data=xxx。这将启动 process.php，它开始处理数据，需要 5 分钟才能完成处理。

这个处理是否会一直继续，或者如果用户关闭浏览器，它会停止吗？

（我问是因为我担心该过程会完成一半并导致数据损坏）。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-06T10:19:05.633

PHP 不会注意到浏览器关闭了连接，除非它试图输出一些东西（例如 echo）。如果它无法输出某些内容，脚本将被终止，除非[`ignore_user_abort`](http://php.net/ignore_user_abort)是 On。

因此，仅当满足以下条件时，脚本才会终止：

*   脚本尝试输出一些东西（因为脚本直到那时才注意到用户中止了连接）
*   AND php 的[`ignore_user_abort`](http://php.net/ignore_user_abort)设置是关闭的（如果设置是关闭的，如果输出失败，php 将终止脚本）

您可以通过启用来避免脚本终止[`ignore_user_abort`](http://php.net/ignore_user_abort)。

您可以[`connection_aborted()`](http://php.net/manual/en/function.connection-aborted.php)随时使用来检查浏览器是否中止了请求。

脚本可能因其他原因意外终止（例如最大执行时间、异常等）；所以你应该使用事务，这样如果脚本异常终止，半完成的更改就会被取消。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T10:21:24.917

请参阅： http: [//php.net/manual/en/function.ignore-user-abort.php](http://php.net/manual/en/function.ignore-user-abort.php)。这取决于 ignore_user_abort 设置和其他一些条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T10:43:12.677

**PHP 的默认行为是，当远程客户端断开连接时，您的脚本将中止，这**通常是由用户关闭浏览器或点击停止按钮引起的。当有人关闭与在 CLI 模式下运行的脚本的远程连接时，也会发生这种情况。脚本中止的一个例外是，如果您使用`register_shutdown_function()`. 有关详细说明，请参阅 PHP 文档中的[连接处理](http://www.php.net/manual/en/features.connection-handling.php)页面。

脚本实际终止的点取决于何时`flush()`被调用，它实际上试图将当前输出一直推送到浏览器/客户端。此时，如果连接状态为，`ABORTED`则脚本将终止，除非我们忽略用户中止。

**需要注意的重要一点是，您可以控制是否发生此行为**，因为您指定有时不希望发生这种情况。使用`ignore_user_abort()`函数或在 php.ini 中设置相关指令。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-06T10:17:50.593

除非它作为后台进程启动，即以 & 结尾...它只会终止。

关闭浏览器多一点...它最终会停止，但会在网络服务器意识到连接消失之前处理一段时间。

# android - 动态处理图片资源

> ID：11360276
> 
> 赞同：0
> 
> 时间：2012-07-06T10:16:03.247
> 
> 标签：android, dynamic, bitmap

我想动态更改位图的图像资源。但我不能用可绘制类中的名称来称呼它们。

```
bmp = BitmapFactory.decodeResource(getResources(), R.drawable.getImage(foldername + "/" + imagename)); 
```

我需要做类似的事情，但我找不到正确的方法。，

已编辑

我想我应该更清楚。我将我的图像存储在可绘制文件夹下，并将它们分隔到其他文件夹中。

例如;

可绘制/图像集1，可绘制/图像集2，

我想根据用户输入更改位图的图像资源。

例如：用户从第一个微调器中选择 imageset5，并从另一个微调器中选择 image5.png。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:21:40.783

我希望这会做你想要的

```
BitmapFactory.decodeResource(getResources(), getResources().getIdentifier(foldername + "/" + imagename , "drawable", getPackageName()); 
```

编辑：

而上面的代码只有在你遵循不允许drawable文件夹中的子目录的android规则时才有效，所以上面的代码只有在直接从drawable访问图像时才有效。

```
BitmapFactory.decodeResource(getResources(), getResources().getIdentifier( imagename , "drawable", getPackageName()); 
```

正如这些链接所描述的

[如何访问 res/drawable/“文件夹”](https://stackoverflow.com/questions/7551810/how-to-access-res-drawable-folder)

[Android可绘制目录可以包含子目录吗？](https://stackoverflow.com/questions/1077357/can-the-android-drawable-directory-contain-subdirectories)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:21:29.127

你不能这样做。你必须在drawable中添加所有图像并像使用它一样使用它

`myImage.setBackgroundResource(R.drawable.imageName)`

或从网络下载图像后，您可以申请为

```
myImage.setBitmap(BitmapFactory.decodeStream(in)); 
```

获取位图在哪里`InputStream`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:04:56.160

只需尝试以下操作：您的名为“imagename”的图像必须在文件夹中

```
String IMAGE_FOLDER_NAME = "YOUR_IMAGE_CONTAINING_FOLDER"; 
```

现在，使用以下代码：

```
String imagename = "YOUR_IMAGE_NAME";    
String PACKAGE_NAME=getApplicationContext().getPackageName();    
int imgId = getResources().getIdentifier(PACKAGE_NAME+":"+IMAGE_FOLDER_NAME+"/"+imagename , null, null);
System.out.println("IMG ID :: "+imgId);    //    check this in log
System.out.println("PACKAGE_NAME :: "+PACKAGE_NAME);    //    check this in log
Bitmap bitmap = BitmapFactory.decodeResource(getResources(),imgId); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T10:18:28.513

制作一组图片资源

```
int []a = int[]
{
   R.drawable.one,
   R.drawable.two,
   R.drawable.three,
   R.drawable.four,
}; 
```

然后循环访问

```
for(int i=0;i<a.length;i++)
{
   //  a[i]
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T10:20:38.060

它是存储在drawables文件夹中的资源吗？然后从 BitmapFactory 尝试这个方法

```
public static Bitmap decodeResource (Resources res, int id) 
```

在哪里

```
res = getResources() 
```

并且 id 是可绘制对象的 id

```
R.drawable.picture 
```

[在这里](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeResource%28android.content.res.Resources,%20int%29)查看

# javascript - 使用javascript计算两个日期之间的天数

> ID：11360277
> 
> 赞同：1
> 
> 时间：2012-07-06T10:16:15.440
> 
> 标签：javascript, html

```
<link rel="stylesheet" type="text/css" media="all" href="jsDatePick_ltr.min.css" />
<script type="text/javascript" src="jsDatePick.min.1.3.js"> </script>
<script type="text/javascript">
    window.onload = function(){
        var fromObj,toObj;
        fromObj=new JsDatePick({
            useMode:2,  target:"inputField1",dateFormat:"%d-%M-%Y"

        });     
        toObj=new JsDatePick({
            useMode:2,
            target:"inputField2",
            dateFormat:"%d-%M-%Y"

        });             

function viewAlert(){
    //what i need to put it here?   

}

    };
</script>
</head>
<body>
<form name="form1">

<table align="center">
    <tr><td>from:</td><td><input type="text" size="12" id="inputField1" name="from" /></td></tr>
    <tr><td>to:</td><td><input type="text" size="12" id="inputField2" name="to" onblur="viewAlert()" /></td></tr>
    </table>

    </form> 
```

我创建了两个从 jsDatePicker 获取日期的输入字段。输入这些日期后，我需要在警报框中显示所选日期的天数。为此我需要做什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:24:23.987

```
var msDay = 24*60*60*1000; 
var days = Math.round(Math.abs((fromObj.getTime() - toObj.getTime())/(msDay ))); 
```

# header - 检测文件是否为 MP3 文件？

> ID：11360286
> 
> 赞同：17
> 
> 时间：2012-07-06T10:17:31.280
> 
> 标签：header, mp3, detect, decoding, flac

我正在编写一个 C++ 库，用于在不同格式/编解码器之间解码和编码音频。在加载所需的编解码器库之前，我有一个快速检测格式的例程。

对于 WAV 文件，可以简单地在文件开头查找 ASCII 值“RIFF”和“WAVE”。这同样适用于 FLAC，我们可以简单地读取前 4 个字节，即“fLaC”。

但是如何快速检测文件是否为 MP3？我不能依赖文件扩展名。我也无法尝试解码第一个 MP3 帧，因为文件开头可能有其他数据（例如：ID3、封面图像等）。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-06T10:32:43.700

检测文件是否为 MP3 比在文件中搜索固定模式更复杂。

`Some concepts`

（详见[http://www.codeproject.com/Articles/8295/MPEG-Audio-Frame-Header](http://www.codeproject.com/Articles/8295/MPEG-Audio-Frame-Header)）

*   MP3 文件由一系列帧组成，每个帧的开头都有一个标题。
*   标头以 11 位同步字的字节边界开始，全为 1。因此同步字是 0xFFE 或 0XFFF。
*   每帧的长度是根据头参数计算的。

`Algorithm to determine if a file is MP3 or not`

*   在文件中搜索同步字（0xFFF 或 0xFFE）。
*   解析头参数。
*   使用标头参数确定帧长度。
*   使用帧长度寻找下一帧。
*   如果您在查找后发现另一个同步词，则该文件主要是 MP3 文件。
*   可以肯定的是，重复该过程以找到 N 个连续的 MP3 帧。可以增加 N 以获得更好的命中率。

# c++ - Microsoft Windows 7 Pro 上的实时应用程序

> ID：11360287
> 
> 赞同：1
> 
> 时间：2012-07-06T10:17:37.017
> 
> 标签：c++, windows, multithreading, visual-studio-2010, real-time

在尝试了很多东西之后，我打开了这个新线程。我的应用程序（VS2010 上的 C++）必须抓取图像，详细说明图像，通过 UDP 发送结果。问题是频率：200次/秒。所以我有一个相机，它以 200Hz 的频率在双缓冲区中记录图像，我必须在 5 毫秒内详细说明图像。该应用程序在 99,999 % 的时间内工作，但我认为 Win7 Pro 取消了我的实时优先级，因此在 100000 例中有 1 例出现问题。看msdn论坛之类的，我只能用：

1.  SetPriorityClass(GetCurrentProcess(), REALTIME_PRIORITY_CLASS); 在以管理员权限启动进程时获得进程的实时优先级
2.  SetThreadPriority(HANDLE, THREAD_PRIORITY_ABOVE_NORMAL); 或 THREAD_PRIORITY_HIGHEST 或 THREAD_PRIORITY_TIME_CRITICAL。

现在，我启动了 5 个线程（_beginthreadex），并且在相机的已编译 DLL 中启动了几个线程。我认为如果我为我的所有 5 个线程设置时间关键优先级，它们中的任何一个都没有比其他线程更高的优先级。

所以我有两个问题：

*   我可以在没有 Windows 滞后的情况下以 200 Hz 的频率工作吗？
*   你对我的线程设置有什么建议吗？

谢谢！！再见保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:38:00.967

哦，我会为此使用两个以上的缓冲区。包含 200 个图像对象的池似乎是一个更好的选择。

总体而言，您可以承受多少延迟？视频流始终是同一个故事——您可以拥有一致的、无暂停的操作或低延迟，但不能两者兼而有之。

客户端的视频图像缓冲队列有多大？

编辑：

'我必须每 5 毫秒发送一个 UDP 数据报' :((

好的，所以你有一个图像输出队列，它有一个 5 毫秒循环的 UDP 发送线程，是吗？队列绝不能为空。听起来确实像阐述是瓶颈。

您是否有 [number of cores+] 线程池进行详细说明？

# python - 使用 or 语句的 ORM 查询

> ID：11360296
> 
> 赞同：0
> 
> 时间：2012-07-06T10:18:38.357
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我正在尝试使用语句[http://www.w3schools.com/sql/sql_in.asp通过 id 列表查询用户](http://www.w3schools.com/sql/sql_in.asp)

可以在没有字符串查询和执行功能的情况下做到这一点吗？

我正在寻找类似下面的东西

```
users = User.query.filter_by(id=[1,5,12,4]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:39:50.267

你试过了`User.query.filter(User.id.in_([1, 5, 12, 4]))`吗？

# matlab - Matlab如何找出一个矩阵是否在另一个矩阵中

> ID：11360297
> 
> 赞同：1
> 
> 时间：2012-07-06T10:18:38.880
> 
> 标签：matlab

让我用一个例子来描述我的问题。假设我们有矩阵`A`：

```
A =

     1     0     1
     1     1     1
     0     1     1 
```

和矩阵`B`：

```
B =

     1     1
     1     1 
```

我如何编写函数`C = func(A, B)`来检查是否`B`存在`A`？
如果它存在于 中`A`，则函数返回`C = [0 0 0; 0 1 1; 0 1 1]`，如果不存在，则函数返回`C = [0 0 0; 0 0 0; 0 0 0];`。

**编辑：**
应该提到的是，如果`A`是*m* × *n*并且`B`是*p* × *q*，那么*m* > *p*和 *p* > *q*总是。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T02:34:52.343

最高效的需要信号处理工具箱。然后你可以简单地使用`xcorr2()`. 按照您的示例，以下内容应该有效：

```
C = xcorr2 (A, B);
[Row, Col] = find (C == max (C(:)));
%% these are not the coordinates for the center of the best match, you will
%% have to find where those really are
%% The best way to understand this is to strip the "padding"
row_shift = (size (B, 1) - 1)/2;
col_shift = (size (B, 2) - 1)/2;
C = C(1+row_shift:end-row_shift, 1+col_shift:end-col_shift)
[Row, Col] = find (C == max (C(:)));
if (B == A(Row-row_shift:Row+row_shift, Col-col_shift:Col+col_shift))
    disp ("B shows up in A");
endif 
```

上面的代码看起来有点复杂，因为我试图覆盖任何大小的输入（仍然只有奇数大小），但应该可以工作。

如果你没有这个工具箱，我认为你可以使用[Octave 代码，](https://sourceforge.net/p/octave/code/11447/tree/trunk/octave-forge/main/signal/inst/xcorr2.m)这应该只需要小的调整。基本上，重要的只有三行（注意代码在 GPL 下）：

```
[ma,na] = size(a);
[mb,nb] = size(b);
c = conv2 (a, conj (b (mb:-1:1, nb:-1:1))); 
```

在 Octave 中，如果您至少使用信号包 1.2.0，xcorr2 还可以采用额外的选项“coeff”来计算归一化互相关。当匹配完美时，它的值为 1，因此您可以通过以下方式简化它：

```
C = xcorr2 (A, B, "coeff");
if (any (C(:) == 1)
    display ("B shows up in A");
endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:55:51.310

我会做一个循环来检查 A 的调整大小的子矩阵。我的代码在找到 B 后停止，但可以更新它以计算找到的出现次数。

```
A = [1 0 1; 1 1 1; 0 1 1; 0 0 0];
B = [1 1; 1 1]; 

[m n] = size(A);
[p q] = size(B);

found = 0;
x = 0;

while ~found && (x+p-1 < m)
    y = 0;
    x = x + 1;
    while ~found && (y+q-1 < n)
        y = y + 1;
        A(x:x+p-1,y:y+q-1)
        found = isequal(A(x:x+p-1,y:y+q-1),B);
    end
end

fprintf('Found Matrix B in A(%d:%d, %d:%d)\n',x,x+p-1,y,y+q-1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:35:18.733

也许有一些矢量方式，但这是一个直接的函数，它只是在 A 上滑动并检查 B：

```
function ret=searchmat(A,B)
    ret=zeros(size(A));
    for k=0:size(A,1)-size(B,1)
        for l=0:size(A,2)-size(B,2)
            if isequal(A(1+k:size(B,1)+k,1+l:size(B,2)+l),B)
                ret(1+k:size(B,1)+k,1+l:size(B,2)+l)=1; % or B as you wish
            end
        end
    end
end 
```

如果 B 被发现不止一次，它也会被标记为 1。如果你想在第一场比赛后退出，你可以`return`在 if 子句中加入一条语句。

# asp.net-mvc-3 - asp.net mvc3 razor 中的分页、排序、过滤

> ID：11360301
> 
> 赞同：0
> 
> 时间：2012-07-06T10:19:04.213
> 
> 标签：asp.net-mvc-3

我想在不使用 webgrid 的情况下对 asp.net mvc3 razor 中的表进行分页、排序、过滤。我看过分页列表..

[从这个链接](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

这里的分页看起来像这样 << < Prev Next> >> 但是我想显示与 webgrid 中相同的分页格式，例如 < 1 2 3 4 5 > 是否有可能.. 如果不能，请给我另一个建议方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:53:36.913

您可以使用`Skip`and `Take`from Linq 来实现分页：[其他问题](https://stackoverflow.com/questions/4659978/asp-net-mvc-pagination-using-take-and-skip)

您可以使用`Where`过滤和`OrderBy`订购

# java - JAX -WS 网络服务

> ID：11360302
> 
> 赞同：1
> 
> 时间：2012-07-06T10:19:05.840
> 
> 标签：java, jax-ws

我在我的 java 应用程序中使用[JAX-WS Web 服务。](http://java.sun.com/developer/technicalArticles/J2SE/jax_ws_2/)每当我的网络服务有任何变化时。我的客户端需要更新，客户端是桌面应用程序。在互联网上分发给用户。我是网络服务的新手。

我应该使用什么技术/方法来使我的客户端能够自动更新。目前，如果我的网络服务有变化，

我更新我的网络服务，部署在服务器上，然后更新我的客户端，

我的意思是我在客户端更新我的 Web 服务存根，然后重新编译我的客户端，从我的客户端创建 Jar，然后分发给我的用户。

最好的方法是什么，如果 Web 服务有小更新，我的存根应该自动更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:53:13.620

您可以使用自上而下的方法进行 Web 服务开发。这意味着您可以先开发 WSDL 文档，然后生成可以在客户端应用程序和实现中使用的 API 类。目前我使用这种技术。我认为当 WSDL 文档更改时，不可能自动更新客户端，但是当您使用自上而下的方法时，您的客户端会产生编译时错误，这可能表明您更改了 WSDL。但是有些更改不会导致编译时出错，只会在运行时发现（例如，向请求添加参数不会产生任何错误，客户端应用程序会忽略它）。然而，从 WSDL 生成 API 类并同时将它们用于客户端和实现是很容易的。

# customization - 如何修改自定义 Confluence 页面，使其像默认选项一样可见

> ID：11360305
> 
> 赞同：1
> 
> 时间：2012-07-06T10:19:12.497
> 
> 标签：customization, velocity, confluence

我正在执行在我的 Confluence 设置中添加自定义选项卡的任务。我选择了“高级”区域作为实现这一点的有利位置。所以我点击空间名称。然后我转到“浏览>>高级”并查看[此](http://imageshack.us/f/405/advanc.png) [http://imageshack.us/f/405/advanc.png](http://imageshack.us/f/405/advanc.png)。我们在这张图片中看到的“高速公路项目创建”选项卡是我自定义添加的。我写了这堂课

```
package com.atlassian.myorg;

import com.atlassian.confluence.core.ConfluenceActionSupport;
import com.atlassian.confluence.pages.AbstractPage;
import com.atlassian.confluence.pages.actions.PageAware;
import com.opensymphony.xwork.Action;

 /**
 * The simplest action possible
  */
public class ExampleAction extends ConfluenceActionSupport
{
    @Override
    public String execute() throws Exception
    {
    return Action.SUCCESS;
    }

  } 
```

使用了这个 atlassian-plugin.xml

```
 <atlassian-plugin key="${project.groupId}.${project.artifactId}" name="${project.name}" plugins-version="2">

<plugin-info>
    <description>${project.description}</description>
    <version>${project.version}</version>
    <vendor name="${project.organization.name}" url="${project.organization.url}" />
</plugin-info>

    <resource type="i18n" name="i18n" location="message"  />
   <web-item name="add-fpc-label-action-web-ui" key="add-fpc-label-action-web-ui" section="system.space" weight="150">
    <description key="item.add-fpc-label-action-web-ui.link.desc">Allows the Create   Freeway Project functionality.</description>
    <label key="Freeway Project Creation"/>
    <link linkId="add-fpc-label-action">/plugins/examples/hello.action?key=$helper.space.key</link>
</web-item>

    <xwork name="My Example Action" key="example-action">
    <description>Shows a simple "Hello, World!" Action</description>
    <package name="examples" extends="default" namespace="/plugins/examples">
        <default-interceptor-ref name="validatingStack" />

        <action name="hello" class="com.atlassian.myorg.ExampleAction">
            <result name="success" type="velocity">/templates/example/hello.vm</result>
        </action>
    </package>
</xwork>          
</atlassian-plugin> 
```

下面看到的是VM

```
<html>
<head>
   <title>This is my Example action!</title>
   <meta name="decorator" content="atl.general" />
</head>
<body>
 <strong>Hello, Confluence World!</strong>
</body>
</html> 
```

结果，当我点击这个名为“高速公路项目创建”的选项卡时，我看到了这个页面[http://imageshack.us/f/846/imageprf.png/](http://imageshack.us/f/846/imageprf.png/)

好吧，这已经足够好了。但我想在侧边栏旁边的“正文区域”中看到这个页面。例如，如果我们单击“空间管理员”选项卡，然后单击侧栏中的“编辑空间标签”；[我们在标有http://imageshack.us/f/809/bodyarea.png](http://imageshack.us/f/809/bodyarea.png) /的“正文区域”中看到生成的页面。

想就如何实现这一目标提出您的建议吗？

谢谢

一种

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:30:07.047

请试试这个

```
##requireResource("confluence.web.resources:space-admin")
<html>
<head>
   <title>This is my Example action!</title>
   <meta name="decorator" content="atl.general" />   
 </head>

 <content tag="key">$action.space.key</content>

<body>    

#applyDecorator("root")
    #decoratorParam("helper" $action.helper)
    #decoratorParam("context" "space-administration")
    #decoratorParam("mode" "view-space-administration")

    #applyDecorator ("root")
        #decoratorParam ("context" "spaceadminpanel")
        #decoratorParam ("selection" "add-fpc-label-action-web-ui")
        #decoratorParam ("title" $action.getText("action.name"))
        #decoratorParam ("selectedTab" "admin")
        #decoratorParam("helper" $action.helper) 

        <strong>Hello, Confluence World!</strong>
    #end
#end    
</body>
</html> 
```

# jquery - 检查 div 是否包含 li 然后使用 jquery 删除另一个元素

> ID：11360306
> 
> 赞同：0
> 
> 时间：2012-07-06T10:19:18.607
> 
> 标签：jquery

如果`div#FeatureIconsWrapper`包含 NO`li`

然后`div#productInfoGrid`被css隐藏或完全删除。

我试过（这是正确的吗？）：

```
$("div#FeatureIconsWrapper:not(li)")({
    $("div#productInfoGrid").hide();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:20:30.830

试试这个，

**[现场演示](http://jsfiddle.net/8T4ka/1/)**

```
if($("div#FeatureIconsWrapper li").length == 0)
{
    $("div#FeatureIconsWrapper").hide();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T10:22:06.163

您可以使用[`:has`](http://api.jquery.com/has-selector/)：

```
if (!$("#FeatureIconsWrapper:has(li)").length) {
    $("#productInfoGrid").hide();   // or remove()
}​ 
```

**演示：http:** [//jsfiddle.net/8T4ka/2/](http://jsfiddle.net/8T4ka/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T10:21:58.417

请试试这个：

接口：[http ://api.jquery.com/has/](http://api.jquery.com/has/)

```
$(document).ready(function() {

       if ($("div#FeatureIconsWrappet:not(:has(li))")) { //.hide()
               $("div#productInfoGrid").hide();
        }
}); 
```

# java - 为什么那些对 base64 类的调用会返回不同的结果？

> ID：11360307
> 
> 赞同：0
> 
> 时间：2012-07-06T10:19:20.237
> 
> 标签：java, base64

我的代码：

```
private static String convertToBase64(String string)
{
    final byte[] encodeBase64 =
            org.apache.commons.codec.binary.Base64.encodeBase64(string
                    .getBytes());
    System.out.println(Hex.encodeHexString(encodeBase64));

    final byte[] data = string.getBytes();
    final String encoded =
            javax.xml.bind.DatatypeConverter.printBase64Binary(data);
    System.out.println(encoded);

    return encoded;
} 
```

现在我调用它：`convertToBase64("stackoverflow");`并得到以下结果：

```
6333526859327476646d56795a6d787664773d3d
c3RhY2tvdmVyZmxvdw== 
```

为什么我得到不同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:27:14.280

我认为 Hex.encodeHexString 会将您的字符串编码为十六进制代码，第二个是普通字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:38:52.157

来自以下 API 文档`Base64.encodeBase64()`：

> byte[] 在其 UTF-8 表示中包含 Base64 字符。

所以与其

```
System.out.println(Hex.encodeHexString(encodeBase64)); 
```

你应该写

```
System.out.println(new String(encodeBase64, "UTF-8")); 
```

顺便说一句：你不应该使用`String.getBytes()`没有显式编码的版本，因为结果取决于默认平台编码（对于 Windows，这通常是“Cp1252”和 Linux “UTF-8”）。

# java - 编写java程序远程监控linux中运行的应用程序

> ID：11360308
> 
> 赞同：0
> 
> 时间：2012-07-06T10:19:24.810
> 
> 标签：java, connectivity

亲爱的，我想要一个可以连接到在 linux 操作系统上运行的远程主机并能够从该远程主机启动和停止任何应用程序的 java 程序。是否可以使用 java 程序执行此任务，无论是否有任何服务包装器！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:22:11.600

检查 Ant SSHEXEC 任务。

[关联...](http://ant.apache.org/manual/Tasks/sshexec.html)

看起来 Java 中没有 AntBuilder 实现。Groovy 是此类任务的理想工具。您可以编写一个 Groovy 并像使用 Java 中的任何其他类一样访问它。如果您使用的是 NetBeans，那么 Groovy 和 Java 可以共存于同一个包中。

```
 def String execute(def cmd, def host, def uname, def pwd)throws Exception {
        def ant = new AntBuilder()
        ant.sshexec(host : host,
            username : uname,
            password : pwd,
            command : "ls -l,
            trust : "true",
            outputproperty : "result")

        return ant.project.properties."result"
    } 
```

# sql - SQL查询参数化

> ID：11360311
> 
> 赞同：0
> 
> 时间：2012-07-06T10:19:39.700
> 
> 标签：sql

有人可以回答以下问题吗？

```
Statement statement;

string sql;

sql = "SELECT gender FROM people WHERE gender = 'M' ";

results = statement.executeQuery(sql); 
```

在我的字符串 SQL 查询中，我必须做什么样的格式来表示“M”？

注意：性别是“M”或“F”，我想返回所有性别为“M”的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:37:37.603

`'M'``VARCHAR`如果您手动编写查询，这是为列指定值的正确方法。

但更好的方法通常是使用准备好的语句：

```
stmt = connect.prepareStatement("SELECT gender FROM people WHERE gender = ?");
stmt.setString( 1, "M" ); 
```

这种方法的优点是 JDBC 会自动为您转换参数、正确转义等。

例如，在您尝试将`D'Angelo`（常见的意大利名称）添加到您的数据库后，您的代码对于人名将变得更加复杂。

# java - 代理“抛出异常”

> ID：11360312
> 
> 赞同：0
> 
> 时间：2012-07-06T10:19:46.930
> 
> 标签：java

假设我有下面的代码需要在不修改函数的情况下从匿名函数中抛出异常：

```
FOO.doSomething(new Transactable(){
 public void run(FOO foo) {
     // How to proxy a exception throw
     // from here, without modifying the class
 }
}); 
```

像：

```
@Override
public void run() throws MyCustomException{
       FOO.doSomething(new Transactable(){
           public void run(FOO foo) {
               // How to proxy a exception throw
               // from here, without modifying the class
           }
        });             
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:28:43.423

我怀疑我是否正确理解了这一点，但这是我的镜头。我猜您正试图以某种方式将异常从匿名类中移出并从父方法中抛出：

```
class ExceptionWrapper {
    public Exception exception;
}

@Override
public void run() throws MyCustomException{
       final ExceptionWrapper ew = new ExceptionWrapper();

       FOO.doSomething(new Transactable(){
           public void run(FOO foo) {
               try {
                   ...
               } catch(MyCustomException ex) {
                   ew.exception = ex;
               }
           }
        });             

        if(ew.exception != null) throw (MyCustomException)ew.exception;
} 
```

# python - 樱桃和 IIS 7

> ID：11360314
> 
> 赞同：0
> 
> 时间：2012-07-06T10:19:49.610
> 
> 标签：python, iis, cherrypy

如何将cherrypy与IIS一起部署。我无法使用 IP 从外部访问机器。如果我使用 localhost 运行它可以工作。如果我在另一台机器的浏览器中提供 IP 地址，那么 IIS7 就会出现。

谢谢拉曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:09:54.767

如果您发布有关您的问题的更多信息会有所帮助，但这听起来像是一个经典的配置问题。如果您在 localhost (127.0.0.1) 上监听 CherryPy，那么它只会在该地址上应答。如果您希望它在那里回答，您必须将其配置为侦听外部 IP 地址。[这是另一个涵盖如何执行此操作的问题](https://stackoverflow.com/questions/115773/how-do-i-configure-the-ip-address-with-cherrypy)。

听起来您也正试图在同时运行 IIS7 的机器上运行 CherryPy。如果是这种情况，并且您希望继续运行两者，则需要将 CherryPy 配置为使用与 IIS7 不同的端口，或者必须将 IIS7 配置为将请求重定向到 CherryPy。[这是关于使用 IIS6 执行后者的类似问题](https://stackoverflow.com/q/1677828/196626)

# c# - 查询不更新数据库

> ID：11360315
> 
> 赞同：1
> 
> 时间：2012-07-06T10:19:53.107
> 
> 标签：c#, asp.net, sql, linq

早晨，

我的一些代码有问题......基本上我正在尝试更新或插入数据库。添加新产品时的第一个 if 语句 if for。然后 else 应该更新任何现有产品。

但是，当我运行它时，它不会更新数据库中的现有产品。但是，它正在设置准备更新的项目。有任何想法吗？

非常感谢...

```
using (aboDataDataContext dc = new aboDataDataContext())
            {
                foreach (abcProduct p in abcProducts)
                {

                    var match = (from t in dc.abcProducts
                                 where t.sku == p.productcode
                                 select t).FirstOrDefault();

                    if (match == null)
                    {

                        // Watch out here; there is some type conversion required for certain fields!
                        abcProduct prod = new abcProduct();

                        prod.sku = p.productcode;
                        prod.categoryId = dc.Categories.Single(c => c.Name == p.category).Id;
                        prod.title = p.name;
                        prod.brand = p.manufacturer;
                        prod.description = p.description;
                        prod.abcPrice = p.price;
                        prod.size = decimal.TryParse(p.size.Replace("cl", ""), out size) == true ? (int?)size : null;
                        prod.country = p.country;
                        prod.region = p.region;
                        prod.vintage = int.TryParse(p.vintage, out vintage) == true ? (int?)vintage : null;
                        prod.weight = Convert.ToDecimal("1.50");
                        prod.strength = p.strength;
                        prod.bottler = p.bottler;
                        prod.age = int.TryParse(p.age, out age) == true ? (int?)age : null;
                        prod.caskType = p.casktype;
                        prod.series = p.series;
                        prod.flavour = p.flavour;
                        if (p.freestock <= 0) { prod.stock = 0; } //check to see if stock is 0
                            else { prod.stock = p.freestock; }
                        prod.abcUpdated = false;
                        prod.stockUpdated = false;
                        prod.priceUpdated = false;
                        prod.pricePublished = false;
                        prod.stockPublished = false;
                        prod.imgPublished = false;
                        prod.prodPublished = false;
                        prod.lastUpdated = DateTime.Now;

                        // Add the new object to the abcProducts table (only in memory here)
                        dc.abcProducts.InsertOnSubmit(prod);
                    }
                    else
                    {
                        // update row
                        match.abcUpdated = true;
                        //Set if an item has been updated or not.
                        if (match.stock == p.freestock) { match.stockUpdated = false; }
                        else { match.stockUpdated = true; }
                        if (match.abcPrice == p.price) { match.priceUpdated = false; }
                        else { match.priceUpdated = true;}
                        match.sku = p.productcode;
                        match.categoryId = dc.Categories.Single(c => c.Name == p.category).Id;
                        match.title = p.name;
                        match.brand = p.manufacturer;
                        match.description = p.description;
                        match.stock = p.freestock;
                        match.abcPrice = p.price;
                        match.size = decimal.TryParse(p.size.Replace("cl", ""), out size) == true ? (int?)size : null;
                        match.weight = Convert.ToDecimal("1.50");
                        match.country = p.country;
                        match.region = p.region;
                        match.vintage = int.TryParse(p.vintage, out vintage) == true ? (int?)vintage : null;
                        match.strength = p.strength;
                        match.bottler = p.bottler;
                        match.age = int.TryParse(p.age, out age) == true ? (int?)age : null;
                        match.caskType = p.casktype;
                        match.series = p.series;
                        match.flavour = p.flavour;
                        if (p.freestock <= 0) { match.stock = 0; } //check to see if stock is 0
                            else { match.stock = p.freestock; }
                        match.abcUpdated = true;
                        match.pricePublished = false;
                        match.stockPublished = false;
                        match.imgPublished = false;
                        match.prodPublished = false;
                        match.lastUpdated = DateTime.Now;
                    }
                }

                // Finally, request Linq to perform the database updates.
                dc.SubmitChanges();
            }
            return null;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:40:01.413

设置匹配时，上下文会丢失对象的跟踪。

在 else 语句的底部插入

```
dc.abcProducts.Attach(match); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T10:35:24.667

您的代码存在问题，您正在遍历产品表并获取`match`变量中的值。在 if 语句中match 不为 null 的部分，您将`dc.SubmitChanges();`对象设置为新值，但您没有调用`match`，它被分配了新的值。

您需要调用 dc.SubmitChanges(); 更新匹配值后。

```
foreach (abcProduct p in abcProducts)
                {

                    var match = (from t in dc.abcProducts
                                 where t.sku == p.productcode
                                 select t).FirstOrDefault();

                    if (match == null)
                    {
                       //insertion code commented out
                        dc.abcProducts.InsertOnSubmit(prod);
                    }
                    else
                    {
                        ///.... setting up all fields. 
                        match.stockPublished = false;
                        match.imgPublished = false;
                        match.prodPublished = false;
                        match.lastUpdated = DateTime.Now;
                        dc.SubmitChanges(); //Call this otherwise you will
                                            //loose the match values in the next iteration
                    }
                } 
```

# javascript - 如何使用页面加载时给出的 id 调用名称空间

> ID：11360316
> 
> 赞同：0
> 
> 时间：2012-07-06T10:19:55.610
> 
> 标签：javascript, jquery, namespaces, onload

如何使用页面加载时给出的 id 调用名称空间

我有以下命名空间

```
 var panel = panel || {};

        panel = (function() {
            var div_pass = function (id) {
                id_given=id;

            };
            var type = function(type_pass) {

                type_given=type_pass;

            };

            return {

                divid : function() {

                    return type_given;
                 }

            };

        }()); 
```

我在页面加载时将其称为

```
onload="panel.div_pass('window')" 
```

这不调用 div_pass 我发出警报但显示在 div_pass

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:22:34.073

如果你想打电话，`panel.div_pass`那么你需要在面板上返回 div_pass。

```
return {
  divid : function() {
    return type_given;
  },
  div_pass: div_pass
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:17:57.630

试试这个

```
var panel = panel || {};
panel =  {
     divid : function() {
         return type_given;
     },
      div_pass:function(id){
          alert(id)
      }
}; 
```

# tsql - 表变量和执行

> ID：11360317
> 
> 赞同：6
> 
> 时间：2012-07-06T10:20:00.843
> 
> 标签：tsql, exec, local-variables

如何在执行命令字符串时使用表变量？

```
DECLARE @FileIDs TABLE 
(
   File_ID int
)
insert into @FileIDs select ID from Files where Name like '%bla%';

DECLARE @testquery as varchar(max);
set @testquery = 'select * from @FileIDs';
exec(@testquery); 
```

返回以下错误

Msg 1087, Level 15, State 2, Line 1 必须声明表变量“@FileIDs”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T10:23:43.760

该表`@FileIDs`不在范围内`exec(@testquery)`。

这就是为什么你有这个问题。

* * *

要解决此问题，您可以使用`temporary table`：

```
CREATE table #FileIDs
(
   File_ID int
)
insert into #FileIDs select ID from Files where Name like '%bla%'; 

DECLARE @testquery as varchar(max);
set @testquery = 'select * from #FileIDs';
exec(@testquery);

drop table #FileIDs 
```

**或**将表格放在范围内：

```
DECLARE @sql nvarchar(2000)

SET @sql='DECLARE @FileIDs TABLE (   File_ID int);'
SET @sql=@sql+'insert into @FileIDs select ID from Files where Name like ''%bla%'';'
set @sql=@sql+ 'select * from @FileIDs;'
EXECUTE sp_executesql @sql 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T10:52:06.990

确实表超出了范围，试试这个：

```
DECLARE @sql nvarchar(2000)

SET @sql='DECLARE @FileIDs TABLE (   File_ID int);'
SET @sql=@sql+'insert into @FileIDs select ID from Files where Name like ''%bla%'';'
set @sql=@sql+ 'select * from @FileIDs;'
EXECUTE sp_executesql @sql 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T10:44:18.773

```
 CREATE table #FileIDs
(
   File_ID int
)
insert into #FileIDs select ID from Files where Name like '%bla%'; 

DECLARE @testquery as varchar(max);
set @testquery = 'select * from #FileIDs';
exec(@testquery);

drop table #FileIDs 
```

# php - 如何使这段代码间隔

> ID：11360318
> 
> 赞同：0
> 
> 时间：2012-07-06T10:20:03.240
> 
> 标签：php, spacing

关于间距的简单和新手问题，如何在 $tag 之前制作间距？

```
$key[rand(0, count($ey)-1)] . $tag 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:23:11.540

您可以简单地添加一个空格并将其余部分连接起来：

```
$key[rand(0, count($ey)-1)] . ' ' . $tag 
```

# ruby-on-rails-3 - rails/bootstrap 中的媒体查询

> ID：11360321
> 
> 赞同：2
> 
> 时间：2012-07-06T10:20:09.957
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我无法让媒体查询在引导程序中工作（使用 rails）。以下是媒体查询

```
 @media (min-width: 768px) {

   .center.navbar .nav, .center.navbar .nav > li {
    display:inline-block;
    float:none;
     vertical-align:top;
    width:100%;
    }

  .center .dropdown-menu {
  display: none;
  text-align:left;

   }

 .center .dropdown.open ul {

 display: block;

   } 
```

无论屏幕大小如何，上面的媒体查询都会覆盖所有默认行为。我从@baptme 收到了一些建议（非常感谢）来解释正在发生的事情（我现在明白了），基本上是因为查询使用了两个类并且默认行为使用 1 类然后媒体查询覆盖。所以我的问题是如何让媒体查询仅在此示例中的屏幕尺寸低于 768px 时才起作用，并在没有时覆盖默认样式

然而，这是我有点困惑的地方，因为在检查 Firebug 中的元素时，默认值如下

```
 .center.navbar .nav, .center.navbar .nav > li {
       display: inline-block;
       float: none;
       vertical-align: top;
       }

      .center .dropdown-menu {
      text-align: left;
        } 
```

任何人都可以对此有所了解，任何帮助表示赞赏，如果您想看到它的实际效果，请访问

```
 http://46.32.253.11/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:29:05.207

从你的例子：

这将隐藏下拉菜单，移除黑色悬停并在左侧对齐的另一个下方显示链接：

```
@media (max-width: 979px) {
  .navbar  .dropdown-menu {display:none}
  .navbar .nav > li a:hover { background-color:transparent}
  .center.navbar .nav, .center.navbar .nav > li {display: table;clear:both};
} 
```

![结果](../Images/7881a81e2e3568e89ef28eb5493a55bd.png)

# java - java.lang.ThreadLocal - 每个线程如何拥有自己的、独立初始化的变量副本？

> ID：11360322
> 
> 赞同：2
> 
> 时间：2012-07-06T10:20:18.823
> 
> 标签：java, thread-local

关于 java.lang.ThreadLocal 类的 javadoc 让我感到困惑。他们说每个访问线程局部变量的线程都有自己的，独立初始化的变量副本。这是一个示例（不是真实的示例），它证明了线程局部变量中保存的变量可以被许多线程共享：

```
package com.mohamad.test.threadlocal;

import java.util.List;

public class ThreadLocalExample {

    private static final ThreadLocal<List<Integer>> myThreadLocal = new ThreadLocal<List<Integer>>();

    public static List<Integer> get() {
        return (myThreadLocal.get());
    }

    public static void set(List<Integer> value) {
        myThreadLocal.set(value);
    }
}

package com.mohamad.test.threadlocal;

import java.util.ArrayList;
import java.util.List;

public class TestThreadLocal implements Runnable {

    private static List<Integer> MY_TEST_LIST = new ArrayList<Integer>(){
        /** The serialVersionUID */
        private static final long serialVersionUID = -2419885728976816054L;
        {add(1);}
    };

    /* (non-Javadoc)
     * @see java.lang.Runnable#run()
     */
    public void run() {
        ThreadLocalExample.set(MY_TEST_LIST);
        List<Integer> integers = ThreadLocalExample.get();
        integers.remove(0);
        System.out.println(Thread.currentThread().getName() + " finished successfully, The list's size is: "  + ThreadLocalExample.get().size() + "\n");
    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        TestThreadLocal thread1 = new TestThreadLocal();
        Thread t1 = new Thread(thread1);
        t1.start();
        TestThreadLocal thread2 = new TestThreadLocal();
        Thread t2 = new Thread(thread2);
        t2.start();
    }
} 
```

如果我们运行这个例子， a`java.lang.IndexOutOfBoundsException`将被抛出，因为和`MY_TEST_LIST`共享。（正如我们所见，当 thread1 和 thread2 调用 的方法，即调用变量的 set 方法时，它并没有创建 的独立本地副本）`thread1``thread2``set(MY_TEST_LIST)``ThreadLocalExample``ThreadLocal``MY_TEST_LIST`

如果有人已经问过这个问题，请给出答案的链接，因为我在 google 上进行研究时没有发现任何有趣的东西。

问候，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T10:26:46.747

一切都很好。变量hold in`ThreadLocal`是线程本地的。在您的情况下，它是本地*引用*，而不是列表本身。每个线程都有自己的引用副本，但所有这些引用都指向同一个位置。换句话说：每个线程都可以保留对不同的引用，`List`但在您的情况下，它们都指向同一个。

如果您希望您的示例起作用，则每个示例`ThreadLocal`都应指向不同`ArrayList`的（副本）：

```
myThreadLocal.set(new ArrayList<Integer>(value)); 
```

让`ThreadLocal`s 都指向同一个对象没有多大意义，因为在这种情况下，您只需要一个全局可用的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:30:41.603

您将相同的列表引用存储在两个线程局部变量中。这并不意味着 ThreadLocal 没有每个线程的值。您的测试应该启动一个将某些内容存储到线程本地的线程，然后启动另一个线程来查看线程本地变量是否包含任何内容（它不会）。

这就像你有两个地图，并在两个地图中存储了相同的列表。显然，如果您修改存储在一个映射中的列表，则存储在另一个映射中的列表将被修改，因为它是同一个列表。但是清除一张地图并不能清除另一张地图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T11:02:20.810

ThreadLocal 并不强制每个线程具有不同的引用，它允许每个线程可能拥有自己的副本，具体取决于您的设置方式。

就像每个对象都有自己的字段一样，您仍然可以将每个对象中的字段设置为相同的值，或者您可以将值设置为不同的值。

可能值得阅读 java.lang.Threads 类的源代码以了解 ThreadLocal 是如何实际实现的。

# shell - 使每一行双vim

> ID：11360325
> 
> 赞同：4
> 
> 时间：2012-07-06T10:20:45.050
> 
> 标签：shell, vim, vi

我有一个看起来像这样的文件：

```
file1
file2
file3
.
.
.
filen 
```

我想将其转换为：

```
echo "file1"
cat file1
echo "file2"
cat file2
.
.
.
.
echo "filen"
cat filen 
```

一种方法是有一个 for 循环并读取原始文件的内容并将修改后的内容写入另一个文件，我这样做了，它奏效了。`vim`在through`:g`或任何其他命令中是否有任何命令可以执行相同的操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T10:26:42.323

尝试这个：

```
:%s/.*/echo "\0"\rcat \0/g 
```

***解释：***

`:%s/a/b/g`表示搜索整个文件并替换`a`为`b`.

`.*`表示匹配一行中的所有内容。

`\0`表示匹配的东西。

`\r`表示新行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T11:04:22.867

或者你可以应用一个宏

```
yypha"<esc>^iecho "<esc>j^icat <esc>j 
```

*   `yypha"`拉动当前行将其置于当前行之下并与`h`
*   `a"<esc>`附加 a`"`并返回正常模式
*   `^iecho "<esc>`放在`echo "`前面，`file*`然后又恢复正常
*   `j^icat<esc>`在下一行添加 cat 和
*   `j`最后转到下一行以准备重新应用宏

您可以通过按下`qq`和 描述的按钮来录制宏，或者

write `yypha"^[^iecho "^[j^icat ^[j`with**`^[`**被输入 as `Ctrl-V`then`Esc`然后`"qyy`在第 q 个寄存器中抽出该行，这也是一个可执行宏。

宏本身可以运行`@q`一次或`30@q`三十次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T21:52:52.097

# javascript - Internet Explorer 卡顿请求

> ID：11360330
> 
> 赞同：0
> 
> 时间：2012-07-06T10:20:51.823
> 
> 标签：javascript, internet-explorer

对于一个特殊的项目，我选择编写自己的微型 Web 服务器，使用 .Net 框架（HttpListener 类）实际上很容易。

直到昨天我开始使用 Internet Explorer 进行测试时，一切都运行良好。

我的服务器因任何 ie 请求而不断崩溃！我终于设法找出原因：即口吃！（至少 ie7 和 ie8，我还没有尝试过其他版本）。

FireFox、Chrome 和 Opera 都不会出现这个问题。

更具体地说，我在网页中使用动态 javascript 插入来绕过跨域调用场景中的同源策略。该脚本向我的微型服务器生成一个请求。假设构建的请求是：

```
http://localhost:8081/myService?p1=A,p2=B,p3=C,p4=D,p5=E 
```

使用 FFox、Chrome 或 Opera，我的服务器确实会收到来自浏览器的单个请求：

```
http://localhost:8081/myService?p1=A,p2=B,p3=C,p4=D,p5=E 
```

即，我的服务器会收到随机数量的部分请求，例如：

```
http://localhost:8081/myService?p1=A,
http://localhost:8081/myService?p1=A,p2=B,
http://localhost:8081/myService?p1=A,p2=B,p3=C,
http://localhost:8081/myService?p1=A,p2=B,p3=C,p4=D, 
```

（事实上​​很多，因为我有 20 个左右的参数......）

最后：

```
http://localhost:8081/myService?p1=A,p2=B,p3=C,p4=D,p5=E 
```

这基本上没什么大不了的，因为我的逻辑能够处理缺少参数的情况。问题是每个不完整的请求实际上都会关闭连接（错误 1229）。这使试图响应每个请求的服务器崩溃。修复很简单，但我仍然不喜欢服务器充斥着那些中间“无法回答”并因此无用的请求的事实。（此外，请求有时看起来像：

```
http://localhost:8081/myService?p1=A,p2=B,p3=C,?p1=A,p2=B,p3=C,p4=D,p5=E 
```

！！！)

我跟踪了 javascript：生成函数只被调用一次（无论是什么浏览器），所以这听起来确实像一个 ie 问题。

有没有人有想法防止这种行为发生？

# sql-server-2005 - SQL Server 合并复制错误“架构脚本 'xxx.sch' 无法传播到订阅者”

> ID：11360331
> 
> 赞同：1
> 
> 时间：2012-07-06T10:20:53.240
> 
> 标签：sql-server-2005, merge-replication

我最近对合并复制下的工作出版物进行了一些更改，这似乎破坏了订阅者的同步。

我收到的错误消息是：

```
The schema script 'ftdb_arcmessagefac64b65_76.sch' could not be propagated
to the subscriber. (Source: MSSQL_REPL, Error number: MSSQL_REPL-2147201001)
Get help: http://help/MSSQL_REPL-2147201001
The process could not read file 'D:\Program Files\Microsoft SQL
Server\MSSQL.1\MSSQL\ReplData\unc\xxx\20120701000581\xxxx.sch' due to OS error 3\. (Source: MSSQL_REPL, Error number: MSSQL_REPL0)
Get help: http://help/MSSQL_REPL0 
```

我查看了 unc 目录，没有 directory `20120701000581`，但有一个目录`20120706110881`来自更新出版物快照时的目录。

我已尝试重新初始化订阅并重新创建快照，但该过程仍然无法预期`20120701000581`.

我还没有尝试删除和重新创建订阅，因为我宁愿在尝试之前了解问题的根源。有人可以解释可能发生的事情以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T06:41:08.683

发生这种情况是因为订阅者无法找到快照，因此您可以使用 UNC 在网络中共享快照文件夹

[http://msdn.microsoft.com/en-us/library/ms151151.aspx](http://msdn.microsoft.com/en-us/library/ms151151.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T10:47:05.037

经过进一步调查，我似乎能够对订阅中的文章属性进行一些更改，并且一旦重建快照，订阅重新同步就会成功运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-21T14:21:51.013

查看快照代理状态-> 监控-> 右键单击​​错误订阅并选择重新初始化。祝你好运

# c# - 如何将 IDS 集合“分解”为 DISTINCT IDS 的单个集合？

> ID：11360332
> 
> 赞同：0
> 
> 时间：2012-07-06T10:20:55.133
> 
> 标签：c#, .net, linq

假设我有这个 LINQ 查询（在 .NET 4.0 上）：

```
IEnumerable<Service> listService = (from MyObject myObj in new MyObjects()
                                        select myObj.Services); 
```

如您所见，`listService`是“集合”`Services`的集合（是“服务”的集合，其中包含标题、ID（我需要的）和其他一些字段。）。

我想在 LINQ 中做的是通过该查询获得一个, 以及每个`IEnumerable<int>`的不同 ID 列表。`Service``Services`

有没有办法在 LINQ 上执行此操作，或者我需要使用一些 foreach 循环并使用另一个数组进行管理？

例子 ：

```
my first myObj (so, MyObjects[0]) have got a collection, called Service, which contain single Service. Every Service have got a single id, respectively : "1", "2", "4"

my second myObj (so, MyObjects[1]) have got a collection, called Service, which contain single Service. Every Service have got a single id, respectively : "4", "5", "1", "2"} 
```

我需要的是一个“单一”集合，其中包含来自每个 myObj 的每个服务集合的 ID 列表。此列表必须具有 Distinct 值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:22:16.430

编辑：更新假设初始查询应该*真正*阅读如下内容：

```
IEnumerable<IEnumerable<int>> listService = ...; 
```

假设您只是想使结果变平，听起来您可能只想：

```
var results = listService.SelectMany(service => service)
                         .Distinct(); 
```

（如果这不是您所追求的，请澄清这个问题 - 目前相当混乱。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:25:54.880

在查询语法中：

```
IEnumerable<int> listService = (
       from MyObject myObj in new MyObjects()
       from id in myObj.Services).Distinct(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T10:56:28.237

由于您尚未显示课程的内容，因此我实现了从您的描述中可以猜到的内容。这与您的对象匹配吗？

```
class Service
{
    public int ID { get; set; }
    public string Name { get; set; }
}

class MyObject
{
    public IEnumerable<Service> Services { get; set; }
}

class MyObjects : List<MyObject>
{

} 
```

如果是这样，那么如果我在构造函数中粘贴以下内容`MyObjects`：

```
class MyObjects : List<MyObject>
{
    public MyObjects()
    {
        Add(new MyObject 
            { 
                Services = new List<Service>()
                    {
                        new Service { ID = 1, Name = "foo" },
                        new Service { ID = 2, Name = "bar" },
                    }
            });
        Add(new MyObject
        {
            Services = new List<Service>()
                    {
                        new Service { ID = 3, Name = "baz" },
                        new Service { ID = 4, Name = "foo1" },
                        new Service { ID = 1, Name = "dup 1"}
                    }
        });
    }
} 
```

我可以像这样获得不同的 ID：

```
var distinctIDs = (from myObj in new MyObjects()
               from service in myObj.Services
               select service.ID).Distinct(); 
```

以下测试程序：

```
static void Main(string[] args)
{
    var objects = new MyObjects();
    var distinctIDs = (from myObj in new MyObjects()
                       from service in myObj.Services
                       select service.ID).Distinct();
    var notDistinctIDs = from myObj in new MyObjects()
                         from service in myObj.Services
                         select service.ID;
    foreach (var id in distinctIDs)
    {
        Console.WriteLine("Distinct ID: {0}", id);
    }
    Console.WriteLine("---");
    foreach (var id in notDistinctIDs)
    {
        Console.WriteLine("Not Distinct ID: {0}", id);
    }
} 
```

印刷：

```
Distinct ID: 1
Distinct ID: 2
Distinct ID: 3
Distinct ID: 4
---
Not Distinct ID: 1
Not Distinct ID: 2
Not Distinct ID: 3
Not Distinct ID: 4
Not Distinct ID: 1 
```

# iphone - 从 ACAccount 在 TWTweetComposeViewController 中设置默认用户名

> ID：11360333
> 
> 赞同：4
> 
> 时间：2012-07-06T10:21:03.463
> 
> 标签：iphone, objective-c, ios5, twitter, account

我正在使用`TWTweetComposeViewController`并且在我的推特设置中有多个帐户（来自您设备中的设置的推特），它显示了一个选择器，因此我们可以从中选择任何用户名，默认情况下它从您的帐户中获取第一个用户名，如图所示在`image`
![在此处输入图像描述](../Images/bae2319ed473c2d7576b8fffa3ba592e.png).

> 现在，我想将我的任何帐户设置为默认值，并且不想显示选择器。可能吗 ？

我知道 ACAccount 框架，其中包含我不同的 Twitter 帐户数组，因此我可以从中获取不同的用户名。

**或者**

> 当我从选择器中选择任何用户名时，有任何方法可以获取用户名`TWTweetComposeViewController`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:40:04.790

提交时不能指定 twitter 帐户`TWTweetComposeViewController`。当用户拥有多个帐户时，必须从列表中选择它。您只能检测是否至少有一个帐户使用`canSendTweet`.

如果您真的想预先选择一个，`ACAccount`您需要使用较低级别的 API，即`TWRequest`（`SLRequest`在 iOS 6 中）并自己创建 UI。使用此类，您可以设置用于推文请求的帐户（属性），并且您可以做的不仅仅是推文。

# c# - 使用 c# 过滤事件日志条目

> ID：11360336
> 
> 赞同：-1
> 
> 时间：2012-07-06T10:21:06.583
> 
> 标签：c#

我正在使用 EventLog 类来查询本地计算机中的事件日志条目。但我无法确定在此处应用过滤器的方法。我只想查询具有特定事件 ID 的错误事件类型。这门课可以吗？或者我应该使用不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:31:47.983

您可以使用 EventLogEntry 类中的 EventLogEntryType 来比较事件类型。

```
EventLogEntry evntEntry; //Fill it using your own code like loading from event log list

if(evntEntry.EntryType == EventLogEntryType.Error)
{
  //
} 
```

您还可以使用“EventID”属性以类似的方式添加事件 ID 检查

# javascript - 获取从默认设置更改的所有复选框的 id

> ID：11360337
> 
> 赞同：0
> 
> 时间：2012-07-06T10:21:11.210
> 
> 标签：javascript, jquery, checkbox

我有以下内容`html`：

```
<table id="share">                          
        <tr class="row">
                <td class="optionsCell">Share Clip postings : </td>
                <td class="cell"><input type="checkbox" id="shareClipPost" /><span>Yes</span></td>
        </tr>
        <tr class="row">
                <td class="optionsCell">Share my favorites : </td>
                <td class="cell"><input type="checkbox" id="shareFavorites" /><span>Yes</span></td>
        </tr>
        <tr class="row">
                <td class="optionsCell">Share all ratings given/changed : </td>
                <td class="cell"><input type="checkbox" id="shareRating" /><span>Yes</span></td>
        </tr>
        <tr class="row">
                <td class="optionsCell">Share all shows recorded : </td>
                <td class="cell"><input type="checkbox" id="shareRecorded" /><span>Yes</span></td>
        </tr>
        <tr class="row">
                <td class="optionsCell">Share all shows viewed : </td>
                <td class="cell"><input type="checkbox" id="shareView"/><span>Yes</span></td>
        </tr>
</table> 
```

现在我想要实现的是一种合适的方式，以便我可以获取选中或未选中的复选框。最初，我从`ajax`请求获得的数据中将复选框标记为选中，其余其他框保持未选中状态。这是我的设置。所以现在我需要找到一种方法来获取用户更改的复选框的值，这些复选框可能是取消选中先前选中的复选框或选中任何未选中的框。然后我只能通过`id` 已更改的复选框。现在我通过所有`id's`的单一变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:33:03.917

我认为您需要存储“原始状态”，例如`rel`在所有复选框中添加一个属性。在此属性中，您只需编写`id`一个隐藏字段，该字段存储您的复选框的原始状态。

```
<td class="cell"><input type="checkbox" id="shareRecorded" rel="shareRecordedState" /><span>Yes</span></td>
<input type="hidden" id="shareRecordedState" value="1"/> 
```

最后你只需要检查原始状态。

# active-directory - 活动目录：member 和 memberof 属性关系

> ID：11360339
> 
> 赞同：6
> 
> 时间：2012-07-06T10:21:12.733
> 
> 标签：active-directory

修改`member`Active Directory 中组的属性（假设使用`asdiedit`），自动修改`memberOf`相应用户的属性？

作为次要问题，在`allowedAttributesEffective`组中设置成员会自动在`allowedAttributesEffective`所有用户的属性中添加成员？

我还没有修改`member`属性的权限，所以我不能自己测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T15:32:03.957

是的，如果您修改`member`组的属性。它会自动更新`memberOf`属性。

`memberOf`属性称为*计算反向链接属性*或*构造属性*。它由 Active Directory 维护和计算。您不能修改此属性。

同样，`allowedAttributesEffective`是一个*计算属性*，反映了在 AD 对象上设置的实际 ACL。您不能直接设置此属性，但可以修改 AD 对象上的 ACL。该属性将反映事实。

`allowedAttributesEffective`组的属性和用户的没有关系`allowedAttributesEffective`。他们是独立的。在组对象上设置 ACL 不会影响组包含的用户对象上的 ACL。

# php - 重复的会员表格

> ID：11360343
> 
> 赞同：0
> 
> 时间：2012-07-06T10:21:37.063
> 
> 标签：php, javascript

我有一个预订表格，如下所示：

```
<table border=0> 
    <tr>  
            <td colspan="2"><h2>Book Now</h2>   </td>  
            </tr> 
        <tr>  
            <td width="139"> Select Date (dd/mm/yy):</td>  
            <td width="351"> <input type="text"  id="datepicker"> </td>  
        </tr> 
        <tr>
          <td>Select Category:</td>
          <td>&nbsp;</td>
        </tr>
         <tr>
          <td colspan="2"><select name="orgSelect" class="orgSelect">
<option value="0">----Select CAtegory----</option>
<option value="1">CAtegory 1</option>
<option value="2">CAtegory 2</option>
</select></td>
<tr>
<td>Select Product:</td><td>&nbsp;</td>
</tr>
          </tr>
        <tr>

        </tr>
        <tr>
          <td colspan="2"><select name="terrSelect" class="terrSelect">
<option value="0" class="static">----Select Product----</option>
<option value="1" class="sub_1">Product1</option>
<option value="2" class="sub_1">Product2</option>
</select>
   </td>
        </tr>       
        <tr>  
            <td> Number of Persons</td>  
            <td>
              <select name="persons" id="persons">
                <option>select</option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
              </select></td>  
        </tr>  
        <tr>  
            <td><strong>Information:</strong></td>  
            <td>&nbsp;</td>  
        </tr>
         <tr>  
            <td>1st Member: </td>  
            <td>&nbsp;</td>  
        </tr>
         <tr>
           <td>First Name:</td>
           <td><input type="text" name="date" value=""></td>
         </tr>
         <tr>
           <td>Last Name:</td>
           <td><input type="text" name="date" value=""></td>
         </tr>
         <tr>
           <td>Email:</td>
           <td><input type="text" name="date" value=""></td>
         </tr>
         <tr>
           <td>Phone</td>
           <td><input type="text" name="date" value=""></td>
         </tr>
         <tr>
           <td>Mobile Phone</td>
           <td><input type="text" name="date" value=""></td>
         </tr> 
    </table>
    <p>Add Member</p> 
```

但我有一个问题，最后它说“添加会员”我喜欢复制预订表格，第二个我们的第三个人也预订，我怎样才能让这个复制预订表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:00:56.207

有很多方法可以存档。一种简单的方法是将所有数据提交到服务器，在服务器上重建整个表单。在 javascript 端执行此操作可以通过模板来完成（我假设您使用 jquery）。

服务器端解决方案（作为最终提交）要求您的输入名称是明智地形成的。

例子：

```
data[members][{$memberId}][name] 
```

如果您想确定表单是否以最终表单提交，或者只是添加成员，您可以像这样形成提交按钮：

```
<input type="submit" name="btn[submit]" value="submit booking" />
<input type="submit" name="btn[add]" value="submit booking" /> 
```

在 php 方面，这可以通过以下方式确定：

```
$btnType = isset($_REQUEST['btn']) && is_array($_REQUEST['btn']) ? array_shift(array_keys($_REQUEST['btn'])) : 'submit'; 
```

仍有改进可应用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:47:39.437

您可以使用多个表格主体，这将使解决方案非常简单，并且在客户端浏览器中禁用 javascript 的情况下也可以工作：

```
<body>

<table border=0 id="table1">

    <tbody>
        <tr>  
            <td colspan="2"><h2>Book Now</h2>   </td> 
            ...
            <select name="persons" id="persons" onchange="change_persons(this.value)">
            ...
            <td><strong>Information:</strong></td>
            <td>&nbsp;</td>
        </tr>
    </tbody>

    <tbody>
        <tr>
            <td>1st Member: </td>
            ...
            <td>Mobile Phone</td>
            <td><input type="text" name="mobile1" value=""></td>
        </tr> 
    </tbody>

    <tbody>
        <tr>
            <td>2nd Member: </td>
            ...
            <td>Mobile Phone</td>
            <td><input type="text" name="mobile2" value=""></td>
        </tr>
    </tbody>

    <tbody>
        <tr>
            <td>3rd Member: </td>
            ...
            <td>Mobile Phone</td>
            <td><input type="text" name="mobile3" value=""></td>
        </tr>
    </tbody>
</table>

<script language="javascript">
<!--
function change_persons(show) {
    var bodies = document.getElementById('table1').tBodies;
    for (var i=1, l=bodies.length; i<l; i++) {
        bodies[i].style.display = (i<=show)? 'block':'none';
    }
}
change_persons(1); // at startup we show only 1 person
//--></script>

</body> 
```

完整的html[在这里](http://pastebin.com/TNt9dhYi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:10:27.937

编辑：只是为了不让你感到困惑，我刚刚意识到我使用了 Stano 和 Eric 的 html 来进行表格布局。

我强烈推荐使用 jQuery，它会让事情变得更容易。您可以使用以下行将其添加到您的页面：

```
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script> 
```

然后我会使用一个按钮来添加成员选项：

```
<button id='addMember'>Add new member</button> 
```

你还应该给你的桌子一个 id

```
<table id='bigTable' border=0> 
```

在 js 文件中，您可以使用如下内容：

```
$(document).ready(function() {
 var currentMember = 2;
 $(function() {
  $('#addMember').click(function(event) {
   $('<tbody>')
    .attr('id', 'subTableMember'+currentMember);
    .appendTo('#bigTable');
   $('<tr>')
    .attr('id', 'tableRowMember'+currentMember);
    .appendTo('#subTableMember'+currentMember);
   $('<td>')
    .html(currentMember+'th member')
    .appendTo('#tableRowMember'+currentMember);
   $('<td>')
    .html('<input type="text" name="mobile'+currentMember+'">');
    .appendTo('#tableRowMember'+currentMember);
   currentMember++;
  });
 });
}); 
```

我尚未测试代码，但它应该可以帮助您入门。

另一个编辑：如果忘记了服务器部分。在您的 php 代码中，您现在可以使用以下内容：

```
foreach($_POST as $key=>$val) {
 if(substr($key, 0, 6) == 'mobile') {
  //This is a member mobile, add it to your DB or whatever
  echo $key.' => '.$val;
 }
} 
```

这样，用户可以添加他想要的所有成员，您都可以处理它们。

# android - Android keytool 证书

> ID：11360344
> 
> 赞同：3
> 
> 时间：2012-07-06T10:21:37.617
> 
> 标签：android, import, key, apk, keytool

我有一个 RFC 1421 格式的证书。我使用 keytool 将其导入密钥库。

```
keytool -import -trustcacerts -keypass android -storepass android 
-alias my_key -file my_crt.crt -keystore my_project.jsk 
```

当我尝试在 Idea 中导出我的 apk 时，出现此错误：

> **错误：**受信任的证书条目不受密码保护

你知道如何解决吗？

# glsl - 仅对某些 3D 对象应用后处理效果

> ID：11360345
> 
> 赞同：1
> 
> 时间：2012-07-06T10:21:37.363
> 
> 标签：glsl, webgl, three.js

首先，我是 glsl 和 Three.js 的初学者 :)。

这是我的shader1的顶点和片段着色器（非常简单）：

```
 void main() {

    gl_Position = projectionMatrix * modelViewMatrix * vec4( position,1.0);             
}       

void main() {
gl_FragColor = vec4(1.0,0.0,0.0,1.0);
} 
```

在我的 init() 函数中有：

```
var geometry = new THREE.CubeGeometry(2, 2, 2);
var material = new THREE.MeshLambertMaterial({color: 0xffaaff});
cube = new THREE.Mesh(geometry, material);
scene.add(cube);

var effect1 = new THREE.ShaderPass(THREE.ShaderExtras[ "shader1" ]);
effect1.renderToScreen=true;
composer = new THREE.EffectComposer( renderer);
composer.addPass(renderScene);
composer.addPass(effect1); 
```

在我的函数 render() 中：

```
Renderer.clear() ;
composer.render(); 
```

但最后我所有的屏幕都是红色的，不仅是我的立方体。怎么了 ？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:59:37.637

我不知道 Three.js，但是你安装着色器的方式看起来像是被用作全屏后处理效果，而不是应用于你的几何体——而且由于你无条件地将输出像素设置为红色，整个屏幕是红色的。您需要使用其他一些操作来告诉 Three.js 您希望您的着色器用于渲染您的立方体（或场景中的所有几何体）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:17:05.833

要将后处理着色器应用于某些屏幕区域或对象，您需要使用模板（OpenGL 术语）。

这是一个有点复杂的话题，所以我建议你要么在通用 OpenGL 教程中阅读它们，要么研究现有的 Three.js 做模板的例子。

我认为这个例子做了一些相关的事情：

[http://mrdoob.github.com/three.js/examples/webgl_postprocessing.html](http://mrdoob.github.com/three.js/examples/webgl_postprocessing.html)

# asp.net - ASP.NET 奇怪的行为

> ID：11360347
> 
> 赞同：0
> 
> 时间：2012-07-06T10:21:41.523
> 
> 标签：asp.net, webforms, forms-authentication

我的`Register`页面仅对经过身份验证的用户可用，因此任何输入的人`http://localhost:52874/register.aspx`都无法访问它。

但是我有一个从登录页面指向它的链接，当点击它时，`DOES`无需使用身份验证即可转到注册页面`Server.Transfer("Register.aspx", false);`

现在这是我喜欢的东西，这意味着它只能从 Login.aspx 页面获得，这很好。

但是，当我按下`Submit`注册页面上的按钮时（从 login.aspx 传输后），它会立即让我回到`login.aspx`没有任何处理的状态。

然后我必须添加：

```
 <location path="Register.aspx">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>
  </location> 
```

到 web 配置以允许它工作，这意味着它现在可以通过 url 访问。那么为什么会出现这种行为，为什么允许我使用`Server.Tranfer`但不让我处理按钮点击呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:32:45.767

如果您在执行 Server.Transfer 时查看浏览器地址栏，则 URL 不会更改 - 这是因为它会停止处理当前页面并开始处理新页面，而浏览器不会意识到这一点。因此，它会绕过身份验证，直到您回发即单击按钮，此时它会将您发送回登录。

您应该做的是一个 Response.Redirect 它将更改 URL 并且身份验证将正确进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:29:02.680

这是因为 Server.Transfer 将**当前**请求的处理转移到不同的页面。这发生在检查您是否有权访问所请求的页面之后。即，当使用 Server.Transfer 时，请求是针对您有权访问的页面的，但是您通过将该页面的处理传递给您无权访问的页面来规避安全性。

查看[Server.Transfer Vs。响应.重定向](https://stackoverflow.com/questions/224569/server-transfer-vs-response-redirect)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:29:17.047

[http://www.4guysfromrolla.com/articles/120705-1.aspx](http://www.4guysfromrolla.com/articles/120705-1.aspx) - 查看这篇关于会员提供者的文章。它可能会有所帮助:)

如果您只允许用户在登录后访问该页面，您可能需要拒绝用户 =“？” 这将拒绝匿名用户访问该页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T10:33:28.617

来自[MSDN](http://msdn.microsoft.com/en-us/library/y4k58xk7.aspx)：

> ASP.NET 不会验证当前用户是否有权查看由 Transfer 方法传递的资源。尽管 ASP.NET 授权和身份验证逻辑在调用原始资源处理程序之前运行，但 ASP.NET 直接调用 Transfer 方法指示的处理程序，并且不会为新资源重新运行身份验证和授权逻辑。如果您的应用程序的安全策略要求客户端具有适当的授权来访问资源，则应用程序应强制重新授权或提供自定义访问控制机制。

因此，设计上`Server.Transfer("Register.aspx", false);`不会在您的场景中进行身份验证。

我认为任何人都应该能够看到注册页面——用户应该能够通过 URL 到达那里。因此，请确保未经身份验证的用户可以使用您概述的 web.config 文件更改注册页面。

# prolog - SWI Prolog - 如何通过命令行参数增加全局堆栈大小

> ID：11360350
> 
> 赞同：1
> 
> 时间：2012-07-06T10:21:50.403
> 
> 标签：prolog, swi-prolog

我正在尝试执行以下 Prolog 命令来运行 SUPPLE 解析器

**swipl -x supple.swi -- -o /tmp/SUPPLE--OUT--1532979011690236349 /tmp/SUPPLE--IN--6114638903011376120**

对于大型文档，它会向我抛出 Global Stack 错误，如下所示。

```
ERROR: Prolog initialisation failed: ERROR: Out of global stack 
```

SWI Prolog 手册提到我们可以使用 '-G<memorysize>' 选项来增加全局堆栈内存大小。但是我无法在我已经提到其他选项的上述命令中传递该参数。

当我尝试在上述命令中包含“-G1g”以将全局堆栈大小增加到 1gb 时，例如

**swipl -G1g -x supple.swi -- -o /tmp/SUPPLE--OUT--1532979011690236349 /tmp/SUPPLE--IN--6114638903011376120**

我最终得到错误，如 ERROR: supple.swi:72: Prolog initialisation failed: supple.swi:72:471: Syntax error: String too long (see style_check/1)

有人可以建议我将此参数添加为参数的正确方法。

谢谢。

# android - 当 STREAM_VOICE_CALL 正在进行时，为什么其他应用程序会听到音频？

> ID：11360355
> 
> 赞同：1
> 
> 时间：2012-07-06T10:22:07.683
> 
> 标签：android

在我的应用程序中，当我开始我的音频通话/音频广播时，我已请求音频管理器获得音频焦点。

```
audioManager.requestAudioFocus(null,audioManager.STREAM_VOICE_CALL, AudioManager.AUDIOFOCUS_GAIN_TRANSIENT| AudioManager.AUDIOFOCUS_GAIN_TRANSIENT_MAY_DUCK); 
```

如果用户按下`Home`并导航到另一个媒体应用程序，然后如果他们播放任何媒体，该文件也会以低音量播放。接听电话的人也可以听到该媒体声音文件。

当我的音频通话正在进行时，如果用户尝试播放任何音频资源，我如何告诉音频管理器仅将偏好设置给我的应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T17:39:40.427

您所描述的是Android上的默认行为（我相信）。话虽如此，您应该能够做您希望做的事情。Android SDK 允许您将单个流类型设置为独奏 - 导致所有其他流被静音。为此，您应该使用以下`AudioManager` `setStreamSolo()`调用：

`audioManager.setStreamSolo(AudioManager.STREAM_VOICE_CALL, true);`

您需要在播放开始时执行此操作，然后在播放结束或您的活动结束时将流独奏设置为 false。让我知道这是否有用。

一些可能有用的资源：

*   相关的 SO 帖子：[Android - 我可以静音当前正在播放的音频应用程序吗？](https://stackoverflow.com/questions/1993471/android-can-i-mute-currently-playing-audio-applications)
*   Android 开发者文档：[监听音频焦点变化](http://developer.android.com/reference/android/media/AudioManager.OnAudioFocusChangeListener.html)
*   另一个 SO 帖子：[Android：检测另一个应用程序已开始播放音频](https://stackoverflow.com/questions/3576160/android-detect-another-application-has-started-playing-audio)

# jquery - 在所有 div 中淡入淡出，每个后一个

> ID：11360357
> 
> 赞同：0
> 
> 时间：2012-07-06T10:22:12.990
> 
> 标签：jquery, html, jquery-animate, fadein

我有以下 html

```
<div class="post">
            <span class="fr">27.03.2012 - 14:07</span>
            <div class="uzytkownik fl" ><img src="inc/img/awatar.jpg" alt="awatar">
                <h3>Michał Lach</h3>
                <h4>Moderator</h4>
        </div>
        <!--koniec uzytkownik -->   
            <div class="wiadomosc fr"><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.  
        </p>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.  
        </p>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.  
        </p>
        </div>
            <div class="clear"></div>
        </div>
        <!--koniec posta -->    
        <div class="post">
            <span class="fr">27.03.2012 - 18:52</span>
            <div class="uzytkownik fl" ><img src="inc/img/awatar2.jpg" alt="awatar">
                <h3>Jan Kowalski</h3>
                <h4>Użytkownik</h4>
        </div>
        <!--koniec uzytkownik -->   
            <div class="wiadomosc fr"><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.  
        </p>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.  
        </p>
        </div>
            <div class="clear"></div>
        </div>
        <!--koniec posta -->    
        <div class="post">
            <span class="fr">28.03.2012 - 4:53</span>
            <div class="uzytkownik fl" ><img src="inc/img/awatar.jpg" alt="awatar">
                <h3>Michał Lach</h3>
                <h4>Moderator</h4>
        </div>
        <!--koniec uzytkownik -->   
            <div class="wiadomosc fr"><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.  
        </p>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.  
        </p>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.  
        </p>
        </div>
            <div class="clear"></div>
        </div>
        <!--koniec posta -->    

        <div class="post">
            <span class="fr">29.03.2012 - 16:28</span>
            <div class="uzytkownik fl" ><img src="inc/img/awatar2.jpg" alt="awatar">
                <h3>Michał Lach</h3>
                <h4>Moderator</h4>
        </div>
        <!--koniec uzytkownik -->   
            <div class="wiadomosc fr"><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.  
        </p>
        </div> 
```

我的想法是从视图中隐藏所有 div，然后将它们全部淡入，但我只想在 fadeIn 方法在前一个 div 上完成后才启动 fadeIn 方法。

到目前为止，我已经在 jquery 中完成了这个：

```
(function() {
  var post =  $('.post').hide();
  post.each(function(){
        $(this).fadeIn('slow');
        console.log('ok');
    });

})(); 
```

然而它不起作用，结果是所有 divs 女巫类同时淡入淡出，而不是一个接一个。

有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:27:36.690

Paul Irish 给出了三种很好的方法来实现这一点，但他使用了 fadeOut 而不是 FadeIn。我已经提到了下面的链接。我敢打赌，你不会得到更好的解决方案。[http://paulirish.com/2008/sequentially-chain-your-callbacks-in-jquery-two-ways/](http://paulirish.com/2008/sequentially-chain-your-callbacks-in-jquery-two-ways/)

以下是他提到的三种方式，最好通过链接。

自执行回调链

```
(function showVehicle(elem){
  elem.fadeIn('slow',function(){
    $(this).next().length && showVehicle($(this).next()); 
  });
})( $("div.vehicle:first") ); 
```

自定义事件触发

```
$('div.vehicle')
  .bind('showVehicle',function(e) {$(this).fadeIn('slow',function(){ 
    $(this).next().length && $(this).next().trigger("showVehicle"); 
  })})
  .eq(0)
    .trigger('showVehicle'); 
```

任意 jQuery 对象上的自执行回调链

```
(function hidenext(jq){
    jq.eq(0).fadeOut("fast", function(){
        (jq=jq.slice(1)).length && hidenext(jq);
    });
})($('div#bodyContent a')) 
```

# mysql - vb2010用mysqlconnector登录系统

> ID：11360358
> 
> 赞同：0
> 
> 时间：2012-07-06T10:22:13.370
> 
> 标签：mysql, vb.net

我为我的程序制作了一个简单的登录代码。

在我的网站上，我为存储用户名、电子邮件和密码的程序创建了一个 mysql 数据库，我已查询数据库 2 次以插入 2 个帐户。

我可以使用第一个帐户登录而不会出现问题，但使用第二个和第三个帐户则不能，依此类推。

无论如何，这是代码：

```
Dim dbConn As New MySqlConnection
                        Dim UsernameVerify As New MySqlCommand
                        Dim PasswordVerify As New MySqlCommand
                        Dim EmailVerify As New MySqlCommand
                        Dim typeverify As New MySqlCommand
                        Dim lgnUsername As String
                        Dim lgnPassword As String
                        Dim lgnEmail As String
                        Dim lgntype As String
                        'server info
                        dbConn.ConnectionString = "server=*************;UserID=*******;password=********;database=*****"
                        Try
                            dbConn.Open()
                            UsernameVerify.Connection = dbConn
                            UsernameVerify.CommandText = "Select USERNAME from users"
                            PasswordVerify.Connection = dbConn
                            PasswordVerify.CommandText = "Select PASSWORD from users"
                            EmailVerify.Connection = dbConn
                            EmailVerify.CommandText = "Select EMAIL from users"
                            typeverify.Connection = dbConn
                            typeverify.CommandText = "Select TYPE from users"

                            lgnUsername = UsernameVerify.ExecuteScalar
                            lgnPassword = PasswordVerify.ExecuteScalar
                            lgnEmail = EmailVerify.ExecuteScalar
                            lgntype = typeverify.ExecuteScalar
                            dbConn.Close()
                            If ComboBox1.Text = lgnUsername And ComboBox2.Text = lgnPassword And ComboBox3.Text = lgnEmail And ComboBox4.Text = lgntype Then
                                Panel1.BackgroundImage = mpng2
                                Label5.Text = "Succesfully verified user !"
                                Me.Close()

                            Else
                                Panel1.BackgroundImage = mpng
                                Label5.Text = "Could not find user check your credentials"
                                ComboBox1.Focus()

                            End If
                        Catch ex As MySqlException
                            Label5.Text = "Error while verifying "
                            MessageBox.Show("Error when connecting to database|" + ex.Message)
                            dbConn.Dispose()
                            verifying.Close()

                        End Try 
```

有谁知道如何解决这个问题。

我已经在考虑使用 while 循环或其他东西，或者还有其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:34:13.423

没有必要循环，而您正在为自己的生活变得艰难。请记住始终保持简单。

简单的登录代码可能如下所示：

```
Protected Sub btnLogin_Click(ByVal sender As Object, ByVal e As SYstem.EventArgs) Handles btnLogin.Click

    Dim conn As New MysqlConnection("Server=****;Database=****;User=****;Password=****;")

    Dim sql As String = "SELECT userid, username, password, email, type FROM users WHERE username = xname AND password = xpass"

    Dim args As New List(Of MySqlParameter)
    args.Add(New MySqlParameter("xname", txtUsername.Text))
    args.Add(New MySqlParameter("xpass", txtPassword.Text))

    Dim cmd As MySqlCommand = New MySqlCommand(sql, conn)
    cmd.Parameters.AddRange(args.ToArray) ' You might want to check this, not sure if it needs the .ToArray

    Dim drLogin As MySqlDataReader = cmd.ExecuteReader()

    If drLogin.HasRows

        ' do login code here (I'll store user details out the DataReader and redirect)
        dr.Read()

        Session("userid") = dr("userid")
        Session("username") = dr("username")
        Session("usertype") = dr("type")

        Response.Redirect("~/Members/Home.aspx")
    Else
        lblerr.Text = "Invalid username/password"
        lblerr.ForeColor = System.Drawing.Color.Red
    End If
End Sub 
```

此代码在 1 个单一查询中获取您可能需要的所有用户信息（有利于限制数据库的开销）。sql 中的 WHERE 子句意味着它只会获取用户名和密码与用户登录时匹配的行。

简单地存储输入的`List(Of SqlParameter)`值以在 sql 中使用。这有助于更多地保护表单，因为这种方式不太可能进行 sql 注入。我在这里将此列表转换为数组，因为我不确定 SqlCommand.Paramaters.AddRange 是否接受列表。一种或另一种方式将起作用。

会话变量对于显示仅与登录用户相关的内容很有用。您可以使用用户标识来限制来自数据库的结果，以仅获取用户标识与 Session("userid") 值相同的内容。

希望这可以帮助！

# jquery - 附加类上的jquery toggleClass

> ID：11360361
> 
> 赞同：1
> 
> 时间：2012-07-06T10:22:29.050
> 
> 标签：jquery, hover, append

我有一个通过 ajax 请求创建并附加到页面的动态生成的表。当用户将鼠标悬停在每个单元格上时，我需要更改背景。（这不是一个 html 表 - 该表是通过 css 生成的，因此没有等...）。

到目前为止，我的代码如下。

```
$(document).on('hover', '.day_holder1a', function(){
    $(this).toggleClass('forum_hover');
}); 
```

我认为问题出在“this”并且它引用了 $(document) 但我的更改没有成功。

我已经删除了 toggleClass 中 forum_hover 之前的点，因为这是我的错误，应该检查我粘贴的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:24:41.073

不，问题不在于`this`对象。

问题出`.`在您的 toggleClass 函数中

```
$(document).on('hover', '.day_holder1a', function(){
    $(this).toggleClass('forum_hover');
}); 
```

注意：而不是`hover`使用`mouseenter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:26:06.327

只需删除`.`toggleClass 功能。
阅读[文档](http://api.jquery.com/toggleClass/)

# c# - 使用正则表达式 (Regex) 根据输入字符串的长度去除字符

> ID：11360368
> 
> 赞同：1
> 
> 时间：2012-07-06T10:22:58.177
> 
> 标签：c#, .net, regex, strip

我希望使用 .NET Regex 创建一个正则表达式，它接受一个输入字符串并输出一个从前面删除字符的字符串，但删除的字符数取决于输入字符串的长度。

输入字符串可以是：

1.  ROC1230NNNNNNNN
2.  ROC1230NNNNNNNN
3.  ROCNNNNNNNN
4.  ROCNNNNNNNN

“N”始终是数字，“123”可以是任意数字组合。前两种情况下的“0”始终为“0”，“ROC”始终为“ROC”。

在每种情况下，我只想返回“N”部分。IE：

1.  NNNNNNNN
2.  NNNNNNNNN
3.  NNNNNNNN
4.  NNNNNNNNN

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:40:38.097

我假设“123”部分总是3位数，试试这个：

```
string value = Regex.Match(input, @"^ROC(\d{3}0)?(\d+)$").Groups[2].Value; 
```

# c# - 获取所有类中的所有方法名

> ID：11360372
> 
> 赞同：2
> 
> 时间：2012-07-06T10:23:23.767
> 
> 标签：c#, reflection, method-names

我正在尝试通过 ac# forms 应用程序获取 vb.net 项目中所有类中的所有方法名称。

我已经走到了这一步：

```
private void BindMethods()
{
    var assembly = typeof(VBProject.Class1).Assembly;
    var publicClasses = assembly.GetExportedTypes().Where(p => p.IsClass);

    foreach (var classItem in publicClasses)
    {
        BindMethodNames<classItem>();
    }
}

private void BindMethodNames<T>()
{
    MethodInfo[] methodInfos = typeof(T).GetMethods(BindingFlags.Public | BindingFlags.Static);

    Array.Sort(methodInfos,
        delegate(MethodInfo methodInfo1, MethodInfo methodInfo2)
        {
            return methodInfo1.Name.CompareTo(methodInfo2.Name)
        });

    foreach (var methodInfo in methodInfos)
    {
        this.comboMethods.Items.Add(methodInfo.Name);
    }
} 
```

现在问题来了，（因为我做错了什么）它不允许我在 BindMethodNames<>() 的调用中使用类型作为“classItem”。

我想整个方法是错误的，我很想得到一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:28:19.460

Your call to 'BindMethodNames' should use a type for the generic , not an instance, but you can't write code to do this without using reflection.

Then again, there is no point in using a generics here - wouldn't this work?

```
private void BindMethods() 
{ 
    var assembly = typeof(VBProject.Class1).Assembly; 
    var publicClasses = assembly.GetExportedTypes().Where(p => p.IsClass); 

    foreach (var classItem in publicClasses) 
    { 
        BindMethodNames(classItem); 
    } 
} 

private void BindMethodNames(Type type) 
{ 
    MethodInfo[] methodInfos = type.GetMethods(BindingFlags.Public | BindingFlags.Static); 

    Array.Sort(methodInfos, 
        delegate(MethodInfo methodInfo1, MethodInfo methodInfo2) 
        { 
            return methodInfo1.Name.CompareTo(methodInfo2.Name) 
        }); 

    foreach (var methodInfo in methodInfos) 
    { 
        this.comboMethods.Items.Add(methodInfo.Name); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:28:17.823

这种情况的泛型并不是特别有用。您已经在迭代`Type`从所选程序集中检索的实例列表，因此您的第二种方法只需要接收目标类型作为参数。

```
private void BindMethodNames(Type target)
{
    MethodInfo[] methodInfos = target.GetMethods(
        BindingFlags.Public | BindingFlags.Static);

    Array.Sort(methodInfos,
        delegate(MethodInfo methodInfo1, MethodInfo methodInfo2)
        {
            return methodInfo1.Name.CompareTo(methodInfo2.Name);
        });

    foreach (var methodInfo in methodInfos)
    {
        this.comboMethods.Items.Add(methodInfo.Name);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:26:15.803

您需要使用反射调用该方法：

```
var method = typeof(Foo).GetMethod("BindMethodNames", BindingFlags.Instance |
                                                      BindingFlags.NonPublic);
var generic = method.MakeGenericMethod(classItem);
generic.Invoke(this); 
```

# java - 当一个 SelectionKey 在 java nio 中变为可写时

> ID：11360374
> 
> 赞同：1
> 
> 时间：2012-07-06T10:23:34.197
> 
> 标签：java, nio

现在我的服务器从客户端读取所有消息。现在它是一种单向通信。我想通过服务器向客户端发送消息。现在服务器在密钥为可读状态时读取消息它没有变成可写状态我只想知道密钥何时变为可写状态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T00:42:55.080

> 我只想知道密钥何时变为可写

它几乎总是可写的。`OP_WRITE`每当套接字发送缓冲区中有可用空间时触发，这几乎是所有时间。只需调用`write(),`，如果您得到零回报，*那么*您就会开始对`OP_WRITE`: 您使用它来告诉您通道何时再次变得可写。

但是你不需要等待这个事件，*除非*你刚刚从零长度返回。`write().`在正常情况下，你应该只在准备好时写，并且只在返回零和它不返回`OP_WRITE`之间的时间间隔内注册' `write()`t 在您重试注册`OP_WRITE`并触发后。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T03:38:25.640

`key.interestOps(SelectionKey.OP_WRITE);`

# gwt - GWT CellTree 搜索：突出显示搜索到的节点

> ID：11360380
> 
> 赞同：0
> 
> 时间：2012-07-06T10:23:56.007
> 
> 标签：gwt, gwt2

我正在研究 GWT CellTree 上的搜索功能。

我有一个有 4 个级别的 cellTree。即Root->Session->Uproc->Batch。

我需要做的是，当我从数据库中获取搜索到的节点及其父节点时，我需要展开其父节点并突出显示该节点。

我可以展开父节点，但如何突出显示搜索到的节点？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:50:20.547

最简单的方法是在`SelectionModel`.

如果这不是您想要的，而您只想要某种其他类型的突出显示，那么它会变得很棘手：您必须以某种方式与您沟通，`Cell`必须以突出显示状态绘制特定值，然后重新绘制单元格。
第一部分取决于您如何构建代码；对于第二部分，您必须为突出显示的节点的*父*`TreeViewModel.NodeInfo`级获取实例（或者如果您使用`TreeViewModel.DefaultNodeInfo`, 在其上`AbstractDataProvider`）的句柄，以便您可以触发子列表的重绘（突出显示的项目所在的位置） . 这又取决于您是如何做到的，但是您必须以某种方式调用's （代表子列表）*`HasData``setRowData`，将与已显示的数据完全相同的数据传递给它（但这足以触发重绘，以便为项目`Cell`生成*突出显示的状态*）。*

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T11:17:59.227

你可以试试这个：

您可以通过给它 css 来突出显示搜索到的节点。这是CSS：

```
.selected_tree_node {
    font-weight:  bold;
} 
```

将此 CSS 应用到您的节点：

```
yourNode.setStyleName("selected_tree_node"); 
```*

# c++ - 如何将“int”值放入“const char*”

> ID：11360383
> 
> 赞同：0
> 
> 时间：2012-07-06T10:24:03.590
> 
> 标签：c++, c, string, opencv, char

> **可能重复：**
> [C++ 将 int 和 string 转换为 char*](https://stackoverflow.com/questions/1766150/c-convert-int-and-string-to-char)

我使用的函数如下所示：

```
int cvSaveImage(const char* filename,const CvArr* image); 
```

这个函数需要一个`const char*`作为第一个参数。例如：

```
cvSaveImage("ImageName",img) 
```

是对的。

但是，我想在“ImageName”中放置一个`int`变量值而不是“Name”。我试过这样的东西，但根本不起作用，它崩溃了：

```
int num = 10;
char buffer[1024];
sprintf(buffer,"Image%d",num);
cvSaveImage((const char *)buffer,img); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:54:48.347

您必须指定文件的扩展名。这是 openCV 确定写入格式的唯一方法。OpenCV 引发异常，这很可能是您的程序崩溃的原因。

此外，如果您正在开发一个新项目，请考虑迁移到 openCV 的 C++ 接口。它更加结构化，具有更多功能，也值得推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:07:51.163

如果您使用的是字符串，则此函数应该可以解决问题：

```
#include <sstream>
#include <string>

std::string IntToString(int N)
{
    ostringstream ss("");
    ss << N;
    return ss.str();
} 
```

# php - 使用条件匹配多维数组中的值

> ID：11360385
> 
> 赞同：0
> 
> 时间：2012-07-06T10:24:15.580
> 
> 标签：php, multidimensional-array, indexing, compare

我正在尝试使用 if 语句来比较两个数组值。我不是在比较索引。如果这些值相互匹配，那么我想从多维数组中打印出一个值。我尝试使用以下解决方案：

1.  [如何比较两个数组并从中删除匹配元素以进行下一个循环？](https://stackoverflow.com/questions/225371/how-to-compare-two-arrays-and-remove-matching-elements-from-one-for-the-next-loop)

2.  [多维数组中的数组值](https://stackoverflow.com/questions/5292638/array-values-in-multidimensional-array)

3.  [来自多维数组的 Array_values](https://stackoverflow.com/questions/9694072/array-values-from-multidimensional-arrayin)

但是，这些示例并不能完全回答我的问题。我不需要生成一个新数组，我想循环遍历这些值，如果有匹配项，则将一个值回显到屏幕上。

请在下面查看我的代码，问题在“////////////////////////”标记下方：

```
<?php

$str ="";

// events array
$events = array( array("PokeMon", "Hall D" , "1:00 AM"),
                 array("Sonic the Hedgehog", "WorkShop 1" , "11:00 AM"),
                 array("Tasbura", "Video 3" , "2:00 PM"),
                 array("Sailor Moon ", "Panel 4" , "6:00 PM") 
               );

// location array
$row=array(
"Arena","Hall D","Video 1","Video 2","Video 3","Video 4","Video 5","Video 6","HD Theater",
"Panel 1","Panel 2","Panel 3","Panel 4","WorkShop 1","WorkShop 2","WorkShop 3","WorkShop 4",
"Autograph 1","Autograph 2"
 );

// event start time array
$col=array(
"","9:00 AM","10:00 AM","11:00 AM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM","6:00 PM",
"7:00 PM","8:00 PM","9:00 PM","10:00 PM","11:00 PM","12:00 AM","1:00 AM","2:00 AM",
 );

// length of  location and start time arrays 
$rowLength=count($row);
$colLength=count($col);

$str .= "<table><tr><td bgcolor='green'><table border='1' bordercolor='black'><tr>";

for($i = 0; $i < $colLength; $i++){
   $str .= "<td width='100' height='25'  bgcolor='yellow'>";
   $str .= $col[$i];
   $str .= "</td>";

}

   for ($j = 0; $j < $rowLength; $j++){
    $str .= "<tr><td width='100' height='25' bgcolor='pink'>";
    $str .= $row[$j];
    $str .= "</td> ";

        for ($k = 0; $k < $colLength-1; $k++){

            $str .= "<td width='100' height='25'  bgcolor=' #70DBDB'>";

//////////////////////Here is where I need to compare the arrays:

            if( ($row[$j]==$events[$j][1]) && ($col[$k+1]==$events[$k+1][2])){

                $str .= $events [$j][0];
///////////////////////////////////////////////////////////////////     

            }else{

            $str .= " ";

            } 

            $str .= "</td>";

        }

        $str .= " </tr>";

    }

 echo $str ."</table></td></tr></table>";

?> 
```

这是我正在尝试创建的示例：http: [//leobee.com/android/push/so/stdt2.php](http://leobee.com/android/push/so/stdt2.php)

以下是示例中的代码：

```
<?php
// Report simple running errors
error_reporting(E_ERROR | E_WARNING | E_PARSE);

// Reporting E_NOTICE can be good too (to report uninitialized
// variables or catch variable name misspellings ...)
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);

// Report all errors except E_NOTICE
// This is the default value set in php.ini
error_reporting(E_ALL ^ E_NOTICE);

// Report all PHP errors (see changelog)
error_reporting(E_ALL);

// Report all PHP errors
error_reporting(-1);

// Same as error_reporting(E_ALL);
ini_set('error_reporting', E_ALL);

$str ="";
$row=array(
'Arena',"Hall D","Video 1","Video 2","Video 3","Video 4","Video 5","Video 6","HD Theater",
"Panel 1","Panel 2","Panel 3","Panel 4","WorkShop 1","WorkShop 2","WorkShop 3","WorkShop 4",
"Autograph 1","Autograph 2"
 );

$col=array(
"","9:00 AM","10:00 AM","11:00 AM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM","6:00 PM",
"7:00 PM","8:00 PM","9:00 PM","10:00 PM","11:00 PM","12:00 AM","1:00 AM","2:00 AM",
 );

$rowLength=count($row);
$colLength=count($col);
//echo $rowLength." ".$colLength."<br>";

$str .= "<table><tr><td bgcolor='green'><table border='1' bordercolor='black'><tr>";

for($i = 0; $i < $colLength; $i++){
   $str .= "<td width='100' height='25'  bgcolor='yellow'>";
   $str .= $col[$i];
   $str .= "</td>";

}

   for ($j = 0; $j < $rowLength; $j++){
   $str .= "<tr><td width='100' height='25' bgcolor='pink'>";
   $str .= $row[$j];

   $str .= "</td> ";

    for ($k = 0; $k < $colLength-1; $k++){
   $str .= "<td width='100' height='25'  bgcolor=' #70DBDB'>";
////////////////////////////////////////////////////////////////////////////    
        if( ($row[$j]=="Arena") && ($col[$k+1]=="9:00 AM")){

             $str .= "Poketmon";

        }else{
            $str .= "";
        }

 ///////////////////////////////////////////////////////////////////////////
   $str .= "</td>";

    }

   $str .= " </tr>";

}

 echo $str ."</table></td></tr></table>";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:42:14.393

我一直在使用您的代码并得出以下解决方案。我希望你喜欢并理解它：

```
<?php

// events array
$events = array(
    array('PokeMon', 'Hall D' , '1:00 AM'),
    array('Sonic the Hedgehog', 'WorkShop 1' , '11:00 AM'),
    array('Tasbura', 'Video 3' , '2:00 PM'),
    array('Sailor Moon ', 'Panel 4' , '6:00 PM') 
);

$events_flat = array();

foreach($events as $event)
{
    $events_flat[$event[0]] = $event[1] . $event[2];
}

// location array
$locations = array(
    'Arena', 'Hall D', 'Video 1', 'Video 2', 'Video 3',
    'Video 4', 'Video 5', 'Video 6', 'HD Theater', 'Panel 1', 
    'Panel 2', 'Panel 3', 'Panel 4', 'WorkShop 1', 'WorkShop 2',
    'WorkShop 3', 'WorkShop 4', 'Autograph 1', 'Autograph 2'
);

// event start time array
$times = array(
    '9:00 AM', '10:00 AM', '11:00 AM', '1:00 PM', '2:00 PM',
    '3:00 PM', '4:00 PM', '5:00 PM', '6:00 PM', '7:00 PM',
    '8:00 PM', '9:00 PM', '10:00 PM', '11:00 PM', '12:00 AM',
    '1:00 AM', '2:00 AM'
);

$html = '<table><tr><td bgcolor="green"><table border="1" bordercolor="black"><tr><td></td>';

foreach ($times as $time)
{
    $html .= '<td width="100" height="25" bgcolor="yellow">';
    $html .= htmlspecialchars($time);
    $html .= '</td>';
}

foreach ($locations as $location)
{
    $html .= '<tr><td width="100" height="25" bgcolor="pink">';
    $html .= htmlspecialchars($location);
    $html .= '</td>';

    foreach ($times as $time)
    {
        $html .= '<td width="100" height="25" bgcolor="#70DBDB">';

        $event = array_search($location . $time, $events_flat);

        if ($event === FALSE)
        {
            $html .= ' ';
        }
        else
        {
            $html .= htmlspecialchars($event);
        }

        $html .= '</td>';
    }

    $html .= ' </tr>';
}

$html .=  '</table></td></tr></table>';

echo $html;

?> 
```

# xcode - 从 uisplitview 调用第二个 uitableview

> ID：11360387
> 
> 赞同：0
> 
> 时间：2012-07-06T10:24:25.337
> 
> 标签：xcode, uitableview, uisplitview

我是 IOS 编程新手，但做了一些练习。我已经创建了这个 uisplit 视图，修复了我的单元格等等……等等……但我想要做的是深入到我的第二个可分割视图。虽然我认为我做的一切都是正确的......当我单击单元格转到下一个表格视图时，Uitableview 加载并且还给了我一个后退按钮，但是单元格是空白的，好像我的数组代码没有填充它我尽力不使用界面生成器并以编程方式完成所有操作。

如果有人想看，这是我项目的上传副本。谢谢 [http://www.sendspace.com/file/zxt9b0](http://www.sendspace.com/file/zxt9b0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:59:44.597

该链接上的项目副本不包含任何`SecondView`会显示任何单元格的代码，但我认为您更大的问题是您创建了两个不同的`SecondView`对象。其中一个是在应用程序委托中创建并提供`species`数据，而另一个是在点击`LeftViewController`并推送单元格时创建的。

将实例信息存储在特定类型的一个对象中并不能仅仅因为它们是同一类型而使其对其他对象可用。

# security - Magento/Zend XMLRPC 安全漏洞？

> ID：11360396
> 
> 赞同：7
> 
> 时间：2012-07-06T10:25:09.073
> 
> 标签：security, zend-framework, magento, xml-rpc

我有两家 Magento 商店，并了解到存在一个重要的安全问题。

我已经下载了补丁文件，但似乎无法理解如何正确地修补文件，一个商店有 SSH 访问托管 - 但另一个没有。

如何在每台机器上正确修补文件？

资源。[http://www.magentocommerce.com/blog/comments/important-security-update-zend-platform-vulnerability/](http://www.magentocommerce.com/blog/comments/important-security-update-zend-platform-vulnerability/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-06T10:31:26.760

有几种方法可以解决您的问题，

## 为您的服务器使用 SSH

这是一个关于如何通过 SSH 为 1.4 商店应用补丁文件的示例

```
cd /home/mystore/public_html
wget -O zendxml_fix.patch  http://www.magentocommerce.com/downloads/assets/1.7.0.2/CE_1.4.0.0-1.4.1.1.patch
patch -p0 < zendxml_fix.patch 
```

以下是每个补丁的 URL，

1.  [社区版 1.4.0.0 到 1.4.1.1](http://www.magentocommerce.com/downloads/assets/1.7.0.2/CE_1.4.0.0-1.4.1.1.patch)
2.  [社区版 1.4.2.0](http://www.magentocommerce.com/downloads/assets/1.7.0.2/CE_1.4.2.0.patch)
3.  [社区版 1.5.0.0 到 1.7.0.1](http://www.magentocommerce.com/downloads/assets/1.7.0.2/CE_1.5.0.0-1.7.0.1.patch)

## 对于没有 SSH 的服务器

我们已经下载了所有安装并为无权访问命令行或`patch`应用程序的人预先修补了文件。文件内容太大，无法在此处发布，但您可以直接从我们的网站下载

**社区版 1.4.0.0 到 1.4.1.1**

1.  [./lib/Zend/XmlRpc/Request.php](http://security.sonassi.com/1.4.0.0_lib_Zend_XmlRpc_Request.php.txt)
2.  [./lib/Zend/XmlRpc/Response.php](http://security.sonassi.com/1.4.0.0_lib_Zend_XmlRpc_Response.php.txt)

**社区版 1.4.2.0**

1.  [./lib/Zend/XmlRpc/Request.php](http://security.sonassi.com/1.4.2.0_lib_Zend_XmlRpc_Request.php.txt)
2.  [./lib/Zend/XmlRpc/Response.php](http://security.sonassi.com/1.4.2.0_lib_Zend_XmlRpc_Response.php.txt)

**社区版 1.5.0.0 到 1.7.0.1**

1.  [./lib/Zend/XmlRpc/Request.php](http://security.sonassi.com/1.5.0.0_lib_Zend_XmlRpc_Request.php.txt)
2.  [./lib/Zend/XmlRpc/Response.php](http://security.sonassi.com/1.5.0.0_lib_Zend_XmlRpc_Response.php.txt)

## 了解更多信息

[我们已经在我们自己的网站http://www.sonassi.com/knowledge-base/magento-kb/important-magento-security-update-zend-platform-vulnerability/](http://www.sonassi.com/knowledge-base/magento-kb/important-magento-security-update-zend-platform-vulnerability/)上发布了关于该问题的解释和解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:36:51.107

仅供参考，WebGuys 提供了一个界面来检查您的 magento 商店是否易受攻击：
[http ://webguys.de/magento-exploit-test/](http://webguys.de/magento-exploit-test/)

为了应用补丁文件，您可以使用以下两种方法之一：
1> 通过以下命令使用 SSH：

```
patch -p0 < CE_1.5.0.0-1.7.0.1.patch 
```

（确保您将补丁文件上传到 Magento 安装的 www-root 并从那里运行 ssh 命令）

2> 手动浏览文件：`lib/Zend/XmlRpc/Response.php`&`lib/Zend/XmlRpc/Request.php`并添加/删除 .patch 文件中提到的行。

希望这可以帮助。

# java - Java 同步列表

> ID：11360401
> 
> 赞同：65
> 
> 时间：2012-07-06T10:25:16.170
> 
> 标签：java, multithreading

我有一个预先填充的数组列表。而且我有多个线程将从数组列表中删除元素。每个线程调用下面的 remove 方法并从列表中删除一项。以下代码是否给了我一致的行为？

```
ArrayList<String> list = Collections.synchronizedList(new ArrayList<String>());

void remove(String item)
{
     do something; (doesn't work on the list)
     list.remove(item);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-06T10:32:46.953

是的，如果您也在迭代列表，请小心，因为在这种情况下，您将需要对其进行同步。从[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList(java.util.List))：

> 用户在迭代返回的列表时必须手动同步它：

```
List list = Collections.synchronizedList(new ArrayList());
    ...
synchronized (list) {
    Iterator i = list.iterator(); // Must be in synchronized block
    while (i.hasNext())
        foo(i.next());
} 
```

或者，您可以使用`CopyOnWriteArrayList`哪个写入速度较慢但没有此问题。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-06T10:32:08.970

只要您不需要“删除”方法是原子的，那应该没问题。

换句话说，例如，如果“做某事”检查该项目在列表中出现多次，那么当您到达下一行时，该检查的结果可能会出错。

此外，请确保在迭代时同步列表：

```
synchronized(list) {
    for (Object o : list) {}
} 
```

正如 Peter Lawrey 所提到的，[CopyOnWriteArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)可以让您的生活更轻松，并且可以在高度并发的环境中提供更好的性能。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-06T10:34:57.893

来自`Collections#synchronizedList(List)`javadoc

> 返回由指定列表支持的同步（线程安全）列表。为了保证串行访问， 对备份列表的**所有**访问都通过返回列表完成是至关重要的......当迭代返回列表时，用户必须手动同步返回列表。不遵循此建议可能会导致不确定的行为。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T20:59:29.037

列表可能有 2 个不同的问题：
1) 如果您在迭代中进行修改，即使在单线程环境中，您也会遇到 ConcurrentModificationException，如下例所示：

```
List<String> list = new ArrayList<String>();
for (int i=0;i<5;i++)
   list.add("Hello "+i);

for(String msg:list)
   list.remove(msg); 
```

所以，为了避免这个问题，你可以这样做：

```
for(int i=list.size()-1;i>=0;i--)
   list.remove(i); 
```

2）第二个问题可能是多线程环境。如上所述，您可以使用 synchronized(list) 来避免异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T10:45:14.243

Yes, it will work fine as you have `synchronized` the list . I would suggest you to use `CopyOnWriteArrayList`.

```
CopyOnWriteArrayList<String> cpList=new CopyOnWriteArrayList<String>(new ArrayList<String>());

    void remove(String item)
    {
         do something; (doesn't work on the list)
                 cpList..remove(item);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T10:37:42.880

它将为添加/删除操作提供一致的行为。但是在迭代时，您必须显式同步。[参考这个链接](http://bmraoblog.blogspot.in/2006/11/using-collectionssynchronizedlist.html)

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2014-05-22T07:50:32.807

```
synchronized(list) {
    for (Object o : list) {}
} 
```

# apache-flex - flex：如何创建皮肤/自定义菜单？

> ID：11360402
> 
> 赞同：0
> 
> 时间：2012-07-06T10:25:20.663
> 
> 标签：apache-flex, flex4

我的客户要求我定制一个 flex flex 4 菜单（菜单而不是菜单栏）

我在其他 Flex 组件（按钮）上使用了一些 CSS 和一些皮肤，但我不知道从哪里开始菜单项。

![在此处输入图像描述](../Images/874db084f34b8b0a05844786f786fdeb.png)

这是所需的菜单外观

关于从哪里开始的任何线索？

回复

# cluster-analysis - 如何确定 k-means 算法的 K 值？

> ID：11360403
> 
> 赞同：0
> 
> 时间：2012-07-06T10:25:25.803
> 
> 标签：cluster-analysis, k-means

> **可能重复：**
> [使用 k-means 聚类时如何确定 k？](https://stackoverflow.com/questions/1793532/how-do-i-determine-k-when-using-k-means-clustering)

我们如何确定 k-means 算法的 K（簇数）的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:34:09.863

有时。

有多种方法，通常需要**尝试不同的 k 值**并测量最有效的方法。

以下是您错过的一些重复问题：

> [如何在 K 中优化 K - 均值算法](https://stackoverflow.com/questions/6212690/how-to-optimal-k-in-k-means-algorithm?lq=1)
> 
> [K-Means 算法](https://stackoverflow.com/questions/6353537/k-means-algorithm?lq=1)
> 
> [Kmeans 不知道集群的数量？](https://stackoverflow.com/questions/6615665/kmeans-without-knowing-the-number-of-clusters?lq=1)
> 
> [K 表示当肘部图是平滑曲线时找到肘部](https://stackoverflow.com/questions/10955378/k-means-finding-elbow-when-the-elbow-plot-is-a-smooth-curve?lq=1)

# android - 如何在没有嵌套 IF ELSE 语句的情况下处理 Android onSharedPreferenceChanged

> ID：11360407
> 
> 赞同：1
> 
> 时间：2012-07-06T10:25:34.453
> 
> 标签：android, if-statement

我有一个 Activity 为我的 Shared Preferences 实现了一个监听器，所以当用户拉起 FragmentPrefs 并更改 onSharedPreferenceChanged(SharedPreferences prefs, String key) 的值时，很好。

```
SharedPreferences prefs;
OnSharedPreferenceChangeListener listener;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    prefs = PreferenceManager.getDefaultSharedPreferences(this);
    registerPreferenceListener();
}

private void registerPreferenceListener()
{
    listener = new SharedPreferences.OnSharedPreferenceChangeListener() {
    public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {

    Debug.out("LISTENING! - Pref changed for: " + key + " pref: " +
    prefs.getString(key, null) );
      }
    };

    prefs.registerOnSharedPreferenceChangeListener(listener);
} 
```

问题是我试图找到一种方法来优雅地处理更改偏好的事件，而不会在代码中产生难闻的气味。

我有很多需要管理的首选项，因此嵌套的 IF ELSE 语句会变得冗长乏味。我考虑过实现多态性，这会很好，但我仍然需要一个 if/else 来决定调用哪个类的实现。

开关可能会更好，因为我可以引用 R.string.pref_name，尽管 changedPref 方法使用字符串作为键标识符。

我是不是把事情复杂化了，还是我错过了一些微不足道的事情？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:44:26.153

它不是嵌套的 IF-ELSE。当您需要评估 String 参数时，它只是一个普通的 IF-ELSE 结构。没有错。其他任何事情都绝对过于复杂。

```
if (key.equals(PREFS_KEY_A)) {
    ...
} else if (key.equals(PREFS_KEY_B)) {
    ...
} else if (key.equals(PREFS_KEY_C)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:42:19.250

if/else 没什么问题。我不确定你能逃脱它。毕竟，您需要检查即将到来的项目。多态性可能看起来更好，但请记住，在 Android 中创建对象比在桌面上更昂贵。因此，有时为了性能而丑陋的代码是值得的（注意：除非您可以使用静态方法并避免使用新方法）。

# python - 如何在python的for循环中创建字典？

> ID：11360410
> 
> 赞同：4
> 
> 时间：2012-07-06T10:26:05.570
> 
> 标签：python, python-2.7

我是 python 的新手，想在 for 循环中创建一个新字典。例如：

```
for x in data:
    a_data = x.a
    model_obj = modelname.objects.get(id=x.b)
    b_data = model_obj.address
    c_data = x.c
    d_data = x.d 
```

我想创建一个字典，它应该像第一次迭代一样工作

```
'a_data': x.a
'b_data':model_obj.address
'c_data':x.c
'd_data':x.d 
```

以此类推，以进行下一次迭代。我认为我们可以使用 :`list of dictioanry`或`dictionary of dictionary`. 我什至不知道哪个更好。我必须将此数据呈现给模板。

任何帮助都将是可观的:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T10:45:53.163

Is this what you want?

```
listofobjs = []
for x in data:
    d = {
      'a_data': x.a,
      'b_data':model_obj.address,
      'c_data':x.c,
      'd_data':x.d,
    }
    listofobjs.append(d) 
```

# ios - IOS TabBar 预加载所有选项卡

> ID：11360412
> 
> 赞同：0
> 
> 时间：2012-07-06T10:26:09.150
> 
> 标签：ios, json, cocoa, uitabbarcontroller, preloader

我有一个基于标签栏的应用程序。在每个 VC（选项卡）上，我都有一个 JSON 服务调用。预加载选项卡上所有视图的最佳方法是什么，所以当用户点击选项卡时，它已经加载了？有什么方法可以使视图加载吗？

谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:31:26.353

最好的方法是遵循 MVC 设计模式并使服务调用独立于 UI。当您的应用程序启动时开始加载所有（使用单例类或您的“ `ServiceCommunicator`”类的实例`AppDelegate`）。然后，当单击特定选项卡并加载 UIViewController 时，它会检查您的“ `ServiceCommunicator`”类，如果它仍在加载数据，它将显示一些加载消息，否则它将显示下载的数据...

# php - 从 PHP 运行时，带有子查询的查询既不返回数据也不返回错误

> ID：11360416
> 
> 赞同：0
> 
> 时间：2012-07-06T10:26:22.573
> 
> 标签：php, sql-server

我准备了对 MSSQL 数据库的查询。在 Manager 中执行时，它工作得非常好，但显然它不会向 PHP 脚本返回任何行。最有问题的部分可能是这个专栏：

```
Difference = t0.col1 - ISNULL((SELECT t1.col1 FROM table AS t1 WHERE t1.date =
(SELECT MAX(t2.date) FROM table AS t2 WHERE t2.date < t0.date)), 0) 
```

或者它可能是这样的：

```
(SELECT NORMA FROM base2.dbo.ODB_S_PO WHERE <condition>) 
```

将 PHP 与 MS SQL 一起使用时，我可以使用子查询吗？这些查询可以指向不同的数据库吗？我可以在一个 PHP 查询中排列多个语句，例如定义一个变量吗？

编辑：发布完整查询：

```
SELECT t0.TA_DATA,
col1+' '+col2,
t0.TA_STAN_LICZNIKA,
Difference = t0.TA_STAN_LICZNIKA - ISNULL((SELECT t1.TA_STAN_LICZNIKA FROM tab1 AS t1 WHERE t1.TA_DATA =
(SELECT MAX(t2.TA_DATA) FROM tab1 AS t2 WHERE t2.TA_DATA < t0.TA_DATA AND t2.TA_ID_PJ = '03102')), 0),
t0.TA_ILE,
(SELECT NORMA FROM db2.dbo.ODB_S_PO WHERE KOD = '03102')
FROM tab1 AS t0
INNER JOIN tab2 ON t0.TA_ID_KI = KI_ID
WHERE t0.TA_ID_PJ = '03102' ORDER BY t0.TA_DATA DESC 
```

这是完整的查询。使用一个数据库我引用同一个表三次来计算差异并尝试访问另一个数据库以获取某个变量。从另一个数据库中省略选择并在单独的查询中获取变量并没有帮助。

EDIT2：我尝试使用 Management Studio 中使用的帐户，以及专用于 Web 界面的帐户。根据建议，这是（几乎）完整的 PHP 脚本：

```
$car = $_POST['id'];
include '../bd.php';
$nazwa_hosta = '';
$username = '';
$passwd = '';
$baza = 'gps';
//print_r($_POST);
$res_dbase = new BD($nazwa_hosta, $username, $passwd, $baza);
$res_dbase->bd_polacz();
$query = "SELECT MARKA, NRR,
 CONVERT(varchar, [DATE_TIME], 104) AS Dzien,
 DATE_TIME,
 CAST(DISTANCE AS FLOAT) / 1000 AS DIST,
 Diff = CAST(t0.DISTANCE - ISNULL((SELECT t1.DISTANCE FROM reports AS t1 WHERE t1.ID =
(SELECT MAX(t2.ID) FROM reports AS t2 WHERE t2.ID < t0.ID AND t2.DEVICE_ID = t0.DEVICE_ID)), 0) AS FLOAT) / 1000,
 IGNITION_SWITCH_STATE AS Stac,
 SPEED,
 KI_NAZWISKO+' '+KI_IMIE AS Kier
 FROM Mediator.dbo.ODB_S_PO AS pojlist
 INNER JOIN mikrostacje.dbo.MS_BLACK_BOX ON pojlist.KOD = '0'+CONVERT(VARCHAR, BB_ID_PJ)
 INNER JOIN gps.dbo.reports AS t0 ON DEVICE_ID = BB_ID
 INNER JOIN mikrostacje.dbo.MS_KIEROWCA ON KI_ID = (SELECT IDK_ID_KI FROM mikrostacje.dbo.MS_ID_KARTA_KIEROWCA WHERE IDK_RFID_NO = RFID)
 WHERE KOD = '$car'
 ORDER BY DATE_TIME DESC";
echo $query."<br />";
if(!($res_dbase->bd_zapytaj($query))) //the code fails here - otherwise I wouldn't get any message from the server. And the only message I get is that it changes the context to 'gps'
{
    echo mssql_get_last_message();
}
$marka = "";
$nrr = "";
$result = "";
while(false !== ($row = $res_dbase->bd_pobierzTabliceAsocjacyjna()))
{
    $marka = $row['MARKA'];
    $nrr = $row['NRR'];
    $result .= "<tr><td>".$row['Dzien']."</td><td>".$row['DATE_TIME']."</td><td>".$row['Dist']."</td><td>".$row['Diff']."</td><td>".$row['Stac']."</td><td>".$row['Kier']."</td></tr>".PHP_EOL;
}
$head = "<div style='text-align: center; margin: auto'><b>$nrr $marka</b><table>";
$result .= "</table></div>";
$echo = remove_pl($head.$result, "latin2"); // Removing Polish characters, since the target is encoded in Windows-1250
echo $echo; 
```

# actionscript-3 - 在不干扰物理的情况下检查两个物体的碰撞（Box2D）

> ID：11360426
> 
> 赞同：0
> 
> 时间：2012-07-06T10:26:54.823
> 
> 标签：actionscript-3, box2d

我目前正在开发一个小型益智游戏，其中的重点是用一个球对另外两个球射击，以使所有（3）颗星星都聚集在它们的路径上。

这是一个插图，以获得一个想法：

![例子](../Images/933b576237b837ef79e2e2a302061a7d.png)

所有的圆形物体都是动态物体。星体的质量设置为 0。我使用 Box2D ContactListener 类来检查碰撞。在接触开始时，我移除了星星的主体和纹理。但它似乎仍然会影响弹丸，就像它仍然击中什么东西一样。我知道我做错了什么，但就是想不通。

我使用了正确的方法吗？还是我忘记了什么？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:24:18.383

在框 2D 中尝试传感器，这样它就不会与任何物体发生碰撞，但会接受事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:32:29.750

就是这样，传感器不会在碰撞时移动。您所要做的就是在创建时更改星星的夹具定义。

```
StarFixtureDef.isSensor = YES; 
```

# javascript - 在javascript中使用方法的局部变量

> ID：11360430
> 
> 赞同：0
> 
> 时间：2012-07-06T10:27:53.880
> 
> 标签：javascript

我想知道我们如何在javascript中读取另一个类/类实例中的局部变量的值。

例如：

我在一个类中有一个方法：

```
myClass1.prototype.myMethod0 = function()

{
 this._myVar = null; //initialize this._myVar
}

myClass1.prototype.myMethod1 = function(list)
{
 this._myVar = msg.list;
} 
```

和

```
myClass1.prototype.myMethod2 = function()
{
 //do something 
// and update the list like say:

list1 = this._myVar; //access the this_myVar.

} 
```

在我的另一个课程中说，

```
myClass2.prototype.myMethod = function()
{
 //call the class1's method here..

myClass1.prototype.myMethod2();

} 
```

`myMethod2`是一个回调，我将它绑定在`myClass2`.

这意味着，实际上，`myMethod2`是这样调用的：`myClass1.callback();`

但我的问题是，当我打电话时`myClass1.prototype.myMethod2();`，`list1 = this._myVar;`它没有得到更新，它正在变成`undefined`。我没有得到相同的修复。

问题是变量，“this._myVar”在 myclass1 的 myMethod2 中是“未定义”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:34:43.030

做什么是可能的，但不是你做的方式：

1.  如果没有`var`关键字，变量就不是局部变量而是全局变量。因此，您的代码实际上创建了一个**全局**变量`this_myVar`，该变量由同一页面上的所有 JavaScript 代码共享。

2.  `list1``myMethod1()`如果从未调用过，将是未定义的。

请参阅 [此处了解 JavaScript OO 编程简介][1]。

**[编辑]**我看到您更新了您的问题，现在可以通过`this`. `this`仅当函数作为“方法”调用时才分配自动变量。

`myClass1.prototype.myMethod2()`将调用原始定义并且`this`将是未定义的。

你必须使用这样的代码：

```
var inst = new myClass1();
inst.myMethod2(); 
```

在 中`myMethod2`，变量将具有与您这样调用它`this`相同的值。`inst`

**[EDIT2]**如果你想访问实例属性，那么你**必须**`myMethod2()`通过一个实例调用`myClass1`- JavaScript 不会试图读懂你的代码可能意味着什么。

所以当你想调用 的任何方法时`myClass1`，你必须有它的一个实例。尝试在以下位置创建一个`myClass2`：

```
var myClass2 = function() {
    this.inst1 = new myClass1();
}

myClass2.prototype.myMethod = function() {
    this.inst1.myMethod2();
} 
```

或者，您必须将实例传递给方法：

```
myClass2.prototype.myMethod = function(inst1) {
    inst1.myMethod2();
} 
```

但是如果你`myMethod2()`像任何其他全局方法一样调用，`this`将不会有任何有用的价值。有办法说“当我调用带有前缀的函数时`myClass1.prototype.`，然后查找一个实例`myClass1`并将其放入`this`”。当有 15 个这种类型的实例时，JavaScript 应该做什么？随机选择一个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:49:12.657

这里 this_myVar 是函数内部的一个局部变量，所以一旦你从函数中出来

它的价值丢失了。

所以你会得到一个未定义的值。

为了保留值，您必须将 this_myVar 声明为类内的数据成员。

# php - PHP 文件中的 Html 代码 - 我收到错误

> ID：11360437
> 
> 赞同：-2
> 
> 时间：2012-07-06T10:28:16.340
> 
> 标签：php, html

```
<input type="text"  class="inputtext big" name="headline" 
value="<?php echo $row['headline'];?>" 
<?php if(isset($stop)){echo'disabled="disabled"'; } ?>  /> 
```

当我使用上面的代码时......文本框没有被禁用......

我在那里设置了一个停止变量...

可能是什么问题加上输入框结束标记`/>`以不同的颜色显示...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:35:56.903

如果没有看到您生成的 HTML，很难确定，但看起来您最终得到的标记在 value="" 属性和 disabled 属性之间没有空格。似乎您在 echo 和 'disabled' 之间没有空格。

将您的禁用逻辑更改为：

```
<?php if(isset($stop)){echo ' disabled="disabled"'; } ?>  /> 
```

# asp.net - 如何将 Asp.Net 数据集转换为 xml 格式并作为请求发送到服务器并在 [.aspx] 页面中获取结果

> ID：11360446
> 
> 赞同：0
> 
> 时间：2012-07-06T10:28:29.047
> 
> 标签：asp.net

我有一个 [.Aspx] 页面，我必须从该页面向服务器发送来自三个文本框的请求

在 [xml] 格式中，服务器应连接到数据库并从

数据库并在 [.aspx] 页面中显示结果请发送此问题的代码

就在我等待的时候

```
 Thanks
                                                                             Regards 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:40:30.730

好的。

如果我没有错，您需要根据 3 个文本框值从数据库中获取数据。

1：您可以在后面的代码中将值存储在3个变量中

字符串 strTextbox1 = txtTextBox1.Text; // 获取第一个文本框的值

// 类似地获取值 3 文本框。

2：创建与数据库的连接

SqlConnection objConn = new SqlConnection();

objConn.ConnectionString = "" // 给出你的连接字符串。

string strQuery = "" // 在这里写下你的选择查询

// 创建一个sql命令

SqlCommand objCom = new SqlCommand(strQuery);

//创建数据表

数据表 objData = new DataTable();

SqlDataAdapter objAdap = new SqlDataAdapter(objCom );

objAdap.Fill(objData);

// 现在您在 objData 中获得了来自数据库的所需数据。

但是第一个请告诉我为什么需要 XML？

# php - PHP PDO fetchAll() returns empty array

> ID：11360451
> 
> 赞同：0
> 
> 时间：2012-07-06T10:28:49.297
> 
> 标签：php, mysql, pdo

This is my code

```
$PageNumber = $_GET["p"];
if (!isset($PageNumber) || $PageNumber < 1 || !is_int($PageNumber))
    $PageNumber = 1;
$PageSize = 3;
$strSQL = $dbCon->prepare("SELECT * FROM News WHERE isActive = 1 ORDER BY NewsID DESC LIMIT (:PageNumber - 1)*:PageSize, :PageSize;");
$strSQL->bindParam(":PageNumber", $PageNumber, PDO::PARAM_INT);
$strSQL->bindParam(":PageSize", $PageSize, PDO::PARAM_INT);
$strSQL->execute();
$Result = $strSQL->fetchAll();
if (count($Result) != 0) {
    print_r($Result);
} else {
    echo "no record";
} 
```

im sure rows exist but output is `no record`, When i replace parameters with default value like `LIMIT 0,3` it works well.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:32:58.590

Since you are not catching exceptions but i guess that what you are doing wrong .In PDO your bindValue or bindParam variable should be equal to used in query. I mean

```
$strSQL = $dbCon->prepare("SELECT * FROM News WHERE isActive = 1 ORDER BY NewsID DESC LIMIT :Start, :PageSize;");
$strSQL->bindParam(":Start",($PageNumber - 1)*$PageSize, PDO::PARAM_INT);
$strSQL->bindParam(":PageSize", $PageSize, PDO::PARAM_INT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:32:24.723

Try this, since you tried using mathematical operators inside prepared statement i just replaced them and did it at the place of assigning.

```
$PageNumber = $_GET["p"];
if (!isset($PageNumber) || $PageNumber < 1 || !is_int($PageNumber))
    $PageNumber = 1;
$PageSize = 3;
$strSQL = $dbCon->prepare("SELECT * FROM News WHERE isActive = 1 ORDER BY NewsID DESC LIMIT :PageNumber, :PageSize;");
$strSQL->bindParam(":PageNumber", ($PageNumber - 1) * $PageSize, PDO::PARAM_INT);
$strSQL->bindParam(":PageSize", $PageSize, PDO::PARAM_INT);
$strSQL->execute();
$Result = $strSQL->fetchAll();
if (count($Result) != 0) {
    print_r($Result);
} else {
    echo "no record";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:08:46.347

I think that the problem is that you have used the same token two times (":PageSize").

As said in [php documentation of PDO::prepare()](http://www.php.net/manual/en/pdo.prepare.php):

> You cannot use a named parameter marker of the same name twice in a prepared statement.

So you can only use once each token, so you must use two different tokens, for example ":PageSizeA" and ":PageSizeB".

```
$strSQL = $dbCon->prepare("SELECT * FROM News WHERE isActive = 1 ORDER BY NewsID DESC LIMIT (:PageNumber - 1)*:PageSizeA, :PageSizeB;");
$strSQL->bindParam(":PageNumber", $PageNumber, PDO::PARAM_INT);
$strSQL->bindParam(":PageSizeA", $PageSize, PDO::PARAM_INT);
$strSQL->bindParam(":PageSizeB", $PageSize, PDO::PARAM_INT); 
```

Anyway, @user1432124 or @Ramesh's solution is better because it process data in php and not in mysql, witch is where it must be done.

# c - 如何使用 GTK Webkit 和 WebkitWebView 下载

> ID：11360453
> 
> 赞同：0
> 
> 时间：2012-07-06T10:28:57.007
> 
> 标签：c, webkit, download, signals, webkitgtk

我有一个 WebKitWebView。在一个网站上有一个下载请求。我不知道如何编写信号下载请求下载开始并保存到给定目录。我将 Ubuntu 12.04 LTS 与 Anjuta 一起使用。我正在用 C 编程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T02:07:02.760

1.  连接信号：

    ```
    gboolean ret = FALSE;
    g_signal_connect(webView, "download-requested", G_CALLBACK(downloadRequested), &ret); 
    ```

2.  编写信号处理程序：

    ```
    static gboolean downloadRequested(WebKitWebView* webView, WebKitDownload *download,     gboolean *handled)
    {
        const gchar* dest = g_strdup_printf("%s", "file://xxx"); // The 'dest' path should be customized path using 'webkit_download_get_uri'
        webkit_download_set_destination_uri(download, dest);
        return TRUE;
    } 
    ```

    如果你想自己处理下载过程，你应该`return FALSE;`在这里。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-03-24T04:02:27.253

他忘记开始下载了！

```
static gboolean downloadRequested(WebKitWebView* webView, WebKitDownload *download, gboolean *handled)
{
  const gchar* dest = g_strdup_printf("%s", "file:///home/administrator/Downloads/test.jpg");
  webkit_download_set_destination_uri(download, dest);
  webkit_download_start(download);  //start the download
  return TRUE;
} 
```

# r - 使用现有数据框的条件计算新变量

> ID：11360457
> 
> 赞同：0
> 
> 时间：2012-07-06T10:29:10.443
> 
> 标签：r

我在 R 中有一个带有变量的数据框，并且想要计算一个新变量 D。

变量 A 具有一个区域的 ID，变量 B 具有不同的物种（1、2、3 等），变量 C 具有不同的值，我现在想计算一个新变量，其中 D = 物种 1 的变量 C 的平均值（变量 B ）在区域 1（变量 A）等等，对于每个地块中的每个不同物种，我都需要这样一个新值。

我希望你能理解我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:34:05.123

我认为这应该可以解决问题：

```
df$D <- ave(df$C, list(df$A, df$B)) 
```

如果你想忽略 NA 值`df$c`，你必须修改上面的如下：

```
df$D <- ave(df$C, list(df$A, df$B), FUN = function (x) mean(x, na.rm=T)) 
```

# python - 在python中将字节字符串转换为字符串

> ID：11360460
> 
> 赞同：2
> 
> 时间：2012-07-06T10:29:17.140
> 
> 标签：python

我正在使用 PyCrypto 和 python 2.7.3。我正在尝试将常规字符串添加到散列以创建链式散列，但为了保持格式一致，我需要“打印”形式的字符串 s 而不是二进制形式。有没有办法将二进制字符串转换为可操作的“正常”字符串？

```
from Crypto.Hash import SHA256
h = SHA256.new()
s = h.digest() #return binary "non-printable" digest

s
>>>"\xe3\xb0\xc4B\x98\xfc\x1c\x14\x9a\xfb\xf4\xc8\x99o\xb9$'\xaeA\xe4d\x9b\x93L\xa4\x95\x99\x1bxR\xb8U"
print(s)
>>> ã°ÄB˜üšûôÈ™o¹$'®Aäd›“L¤•™xR¸U 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:32:27.997

您`s`在交互式解释器中输入时看到的是字符串的*表示*。你不应该关心这是什么样子——实际的字符串内容是你使用 print 时打印的内容。`print`由于字符串已经*具有*该内容，因此无法将字符串“转换”为使用时打印的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:34:47.513

尝试`.hexdigest()`改用。您将得到一个字符串表示为十六进制数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T11:26:56.970

不确定我是否正确，但如果您的意思是十六进制表示，您可以查看`binascii`std-lib 的 -module：

```
from binascii import b2a_hex #bin to ascii: hex-format
print b2a_hex(s)
'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855' 
```

如果您只想在 s 前添加一个字符串，就像 Sven Marnach 所说，不要打扰打印的内容，只需将 s 附加到您的前缀，例如：

```
prefix = 'username:'
combined_string = prefix + s 
```

# php - 使用PHPExcel制作自动生成的excel文件

> ID：11360461
> 
> 赞同：13
> 
> 时间：2012-07-06T10:29:19.943
> 
> 标签：php, mysql, phpexcel

我想让我的 excel 文件填充一些从数据库中获取的数据，例如某人的姓名和年龄。

假设我的数据库中有 10 个人。我希望我的 Excel 文件中有这 10 个人。

所以基本上，你会得到：

姓名年龄

人 1 20 岁

人2 25 岁

等等。我知道如何设置 NAME 和 AGE 的东西，但是我将如何循环数据并将其写入 excel 文件中？我在 PHPExcel 的文档中找不到任何关于它的信息。

这是我的 MySQL：

```
$query = "SELECT * FROM bestelling"; 

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
    $name = $row['name'];
    $age = $row['age'];
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-06T10:42:50.987

我假设您已经创建了 excel 对象。我将其称为 $objPHPExcel 以符合他们的示例。在这种情况下，您可以循环您的结果集并以这种方式填充电子表格：

```
$objPHPExcel = new PHPExcel();
$objPHPExcel->setActiveSheetIndex(0);
$rowCount = 1;
while($row = mysql_fetch_array($result)){
    $objPHPExcel->getActiveSheet()->SetCellValue('A'.$rowCount, $row['name']);
    $objPHPExcel->getActiveSheet()->SetCellValue('B'.$rowCount, $row['age']);
    $rowCount++;
}
$objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel);
$objWriter->save('some_excel_file.xlsx'); 
```

编辑：我更新了示例以提供完整的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-15T06:21:53.337

这是创建excel文件的完整代码：

```
require "PHPExcel/Classes/PHPExcel.php";
require "PHPExcel/Classes/PHPExcel/Writer/Excel5.php"; 

$objPHPExcel = new PHPExcel();
// Set document properties
$objPHPExcel->getProperties()->setCreator("Govinda")
                             ->setLastModifiedBy("Govinda")
                             ->setTitle("Office 2007 XLSX Test Document")
                             ->setSubject("Office 2007 XLSX Test Document")
                             ->setDescription("Test document for Office 2007 XLSX, generated using PHP classes.")
                             ->setKeywords("office 2007 openxml php")
                             ->setCategory("Test result file");

// Add some data
$objPHPExcel->getActiveSheet()->getColumnDimension('A')->setWidth(5);
$objPHPExcel->getActiveSheet()->getColumnDimension('B')->setWidth(30);
$objPHPExcel->getActiveSheet()->getColumnDimension('C')->setWidth(25);

$objPHPExcel->setActiveSheetIndex(0)
            ->setCellValue('A1', 'Sr no')
            ->setCellValue('B1', 'Name')
            ->setCellValue('C1', 'Age')

// Miscellaneous glyphs, UTF-8
while($row = mysql_fetch_array($result)){
      $objPHPExcel->getActiveSheet()->SetCellValue('A'.$rowCount, $row['name']);
      $objPHPExcel->getActiveSheet()->SetCellValue('B'.$rowCount, $row['age']);
      $rowCount++;
}

// Rename worksheet
$objPHPExcel->getActiveSheet()->setTitle('UserList');
// Set active sheet index to the first sheet, so Excel opens this as the first sheet
$objPHPExcel->setActiveSheetIndex(0);

// Redirect output to a client’s web browser (Excel5)
header('Content-Type: application/vnd.ms-excel; charset=UTF-8');
header('Content-Disposition: attachment;filename="userList.xls"');
header('Cache-Control: max-age=0');
// If you're serving to IE 9, then the following may be needed
header('Cache-Control: max-age=1');

// If you're serving to IE over SSL, then the following may be needed
header ('Expires: Mon, 26 Jul 1997 05:00:00 GMT'); // Date in the past
header ('Last-Modified: '.gmdate('D, d M Y H:i:s').' GMT'); // always modified
header ('Cache-Control: cache, must-revalidate'); // HTTP/1.1
header ('Pragma: public'); // HTTP/1.0

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save('php://output'); 
```

# .net - .NET SQLConnection 成语

> ID：11360469
> 
> 赞同：1
> 
> 时间：2012-07-06T10:29:58.890
> 
> 标签：.net, sqlconnection

是否在每个请求的基础上（例如在 IOC 容器中）实例化一个 .NET SQLConnection 对象，以用于该请求期间要执行的所有查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:34:11.610

是的，这是相当普遍的：因为[*连接池*](http://msdn.microsoft.com/en-us/library/8xx3tyca%28v=vs.80%29.aspx)是一种优化技术，可以让您的程序隐式地重用与数据库的连接，这不会像人们想象的那样对性能产生不利影响。

# android - 通知区域的下拉列表

> ID：11360471
> 
> 赞同：1
> 
> 时间：2012-07-06T10:30:15.060
> 
> 标签：android, list, listview, notifications

是否可以显示可转换为通知列表的通知（比如说传入的消息）。就像用户界面中的普通下拉列表一样。

例如

1.  应用程序将 5 条传入消息显示为 1 条通知
2.  当用户选择通知时，它会转换为包含 5 个通知的列表
3.  现在用户可以选择 5 个通知之一并打开特定的一个

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:34:54.550

我不明白为什么不。您创建一个创建通知列表的活动，然后创建一个链接到该活动的通知？虽然它可能不会很漂亮。它会起作用。

# python - 引发的 KeyError 异常被引用了两次

> ID：11360474
> 
> 赞同：1
> 
> 时间：2012-07-06T10:30:22.283
> 
> 标签：python

所以我在我的一个类中有一个 to string 方法：

```
def __str__(self):
    # some irrelevant code
    raise KeyError("aaa") 
```

然后在我的测试中我做：

```
with self.assertRaises(KeyError) as cm:
    str(myobject)
self.assertEquals("%s" % cm.exception, "aaa") 
```

我得到这个输出：

```
self.assertEquals("%s" % cm.exception, "aaa")
AssertionError: "'aaa'" != 'aaa' 
```

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:37:31.517

将 a 格式化`KeyError`为字符串时，包含有问题的键的表示：

```
>>> d = {}
>>> d[2]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 2
>>> d["a"]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'a' 
```

字符串的表示形式包括周围的单引号，因此您应该使用

```
self.assertEquals("%s" % cm.exception, "'aaa'") 
```

或更直截了当

```
self.assertEquals(str(cm.exception), "'aaa'") 
```

# asp.net-mvc-3 - 根据控制器asp.net mvc3的下拉选择填充多个文本框

> ID：11360478
> 
> 赞同：1
> 
> 时间：2012-07-06T10:30:34.293
> 
> 标签：asp.net-mvc-3

嗨，我正在尝试使用 asp.net mvc3 开发一个 Web 应用程序我有一个包含下拉列表的视图，当用户选择下拉列表时，文本框必须自动填写，我如何在控制器中执行此操作我想放在我看来代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:37:15.710

以下 JQuery 插件可能对您有用。

[http://dropdown-check-list.googlecode.com/svn/trunk/doc/dropdownchecklist.html](http://dropdown-check-list.googlecode.com/svn/trunk/doc/dropdownchecklist.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:43:18.000

假设你有这样的 HTML 标记

```
<select id="states">
  <option value="1">MI</option>
  <option value="1">MI</option>
</select>
<input type="text" id="txtCity1" value="" />
<input type="text" id="txtCity2" value="" /> 
```

该脚本应该填充数据，假设您已将 jQuery 加载到您的页面。

```
$(function(){
 $("#states").change(function(){
     var itemVal=$(this).val();
     $("#txtCity1").val("Selected item is "+itemVal);
     $("#txtCity2").val("Ann Arbor");
 });
}); 
```

工作样本：http: [//jsfiddle.net/JuAhm/4/](http://jsfiddle.net/JuAhm/4/)

如果您正在寻找一种从服务器获取数据并填写文本框的方法，您应该进行 jQuery ajax 调用并以 JSON 格式获取数据并读取该 JSON 并将值设置到不同的文本框。像这样的东西

```
$(function(){
 $("#states").change(function(){
     var itemVal=$(this).val();

     $.getJSON("Url.Action("GetCities","State")"+"?id=itemVal,function(data){
        if(data.Status=="True")
        {
           //you may set the textbox values here by reading json result here
           //ex :   $("#txtCity2").val(data.Status);
          //If you want to loop thru each items under Cities 
          $.each(data.Cities,function(index,item){
            //  alert(item.Name)
          });
        }
        else
        {
           alert("No data found!");
        }

     });         

 });
}); 
```

假设您的控制器名称是`State`并且您有一个调用的`HTTPGET`操作方法，该方法调用`GetCities`了一个参数`id`并以以下格式返回`JSON`数据。

```
{
    "Status": "True",
    "Cities": [
               {  "ID": "1", "Name": "Ann Arbor" },
               {  "ID": "2", "Name": "Detroit"}
              ]
} 
```

# python - 从python字典中提取信息

> ID：11360479
> 
> 赞同：1
> 
> 时间：2012-07-06T10:30:40.973
> 
> 标签：python, dictionary

我有一个字典对象`obj_1`，它的值如下所示：

```
{u'd':{u'results': [{u'Desc':u'This is a description...',
                    u'Title':u'This is a title...',
                     u'data': {u'Url': u'www.site.com'}},

                   {u'Desc':u'This is a description...', 
                    u'Title':u'This is a title...',
                     u'data': {u'Url': u'www.site.com'}}]
}} 
```

这是解码的 json（使用`requests`模块解码器解码）。如何`u'Title'`仅提取值和 URL 值？我在任何教程中都没有看到任何这样的字典类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:41:50.063

假设你的“obj_1”真的是这样的：

```
obj_1 = {u'd':{u'results': [{u'Desc':u'This is a description...',
                            u'Title':u'This is a title...'},

                            {u'Desc':u'This is a description...', 
                            u'Title':u'This is a title...'}]
        }} 
```

然后它很简单：

```
titles = [d['Title'] for d in obj_1['d']['results']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:03:13.633

```
>>> obj_1 = {u'd':{u'results': [{u'Desc':u'This is a description...',
...                     u'Title':u'This is a title...',
...                      u'data': {u'Url': u'www.site.com'}},
... 
...                    {u'Desc':u'This is a description...', 
...                     u'Title':u'This is a title...',
...                      u'data': {u'Url': u'www.site.com'}}]
... }}
>>> [(x[u'Title'], x[u'data'][u'Url']) for x in obj_1[u'd'][u'results']]
[(u'This is a title...', u'www.site.com'), (u'This is a title...', u'www.site.com')] 
```

# django - Django 管理界面在 Apache2 中不起作用

> ID：11360480
> 
> 赞同：0
> 
> 时间：2012-07-06T10:30:41.273
> 
> 标签：django, django-admin, apache2

我在我的测试服务器上设置了 Django 1.4，一切正常，除了管理界面，它返回 404 或 403 错误，具体取决于我的配置。

我还注意到“static/admin”目录只包含 css、js 和 img 目录。

任何帮助将不胜感激！

**编辑** 这是我的 apache 配置的相关部分：

```
DocumentRoot /home/jmetzler/www/public

WSGIDaemonProcess mezgrvm python-path=/home/jmetzler/www/private/py-bin:/home/jmetzler/www/private/py-bin/mezgrman:/usr/lib/python2.7/site-packages processes=1 threads=1 display-name=%{GROUP}
WSGIProcessGroup mezgrvm
WSGIApplicationGroup %{GLOBAL}
WSGIScriptAlias / /home/jmetzler/www/private/py-bin/mezgrman/wsgi.py

Alias /admin /usr/local/lib/python2.7/dist-packages/django/contrib/admin/static/admin

Alias /images /home/jmetzler/www/public/images
Alias /css /home/jmetzler/www/public/css
Alias /error /home/jmetzler/www/public/error

<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /home/jmetzler/www/public/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all

    ErrorDocument 400 /error/400.html
    ErrorDocument 401 /error/401.html
    ErrorDocument 403 /error/403.html
    ErrorDocument 404 /error/404.html
    ErrorDocument 410 /error/410.html
    ErrorDocument 500 /error/500.html
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:42:34.903

我认为`Alias /admin /usr/local/lib/python2.7/dist-packages/django/contrib/admin/static/admin`在 apache conf 中不合适。

您的 urls.py 应该像这样适当地处理它 `url(r'^admin/', include(admin.site.urls)),`

如果您想为管理站点处理静态文件，它们应该驻留在您的`static`目录中，无论是符号链接的还是复制的。

如果您正在符号链接管理媒体，那么您应该添加 元素`Options +FollowSymLinks`。`Directory`例如

```
<Directory "/home/user1/website1/static">
        Order allow,deny
        Options Indexes +FollowSymLinks
        Allow from all
        IndexOptions FancyIndexing
</Directory> 
```

# php - 调用第二类的静态方法来声明类中的变量

> ID：11360485
> 
> 赞同：0
> 
> 时间：2012-07-06T10:30:53.547
> 
> 标签：php, oop, class

为什么我不能这样做：

```
class MyClass{
    public $dir = 'root/'.Util::getDir();

    public function getURL($file){
        $fullUrl = $this->dir . $file;
        return $fullUrl;
    }
}

echo MyClass::getUrl('my.pdf'); 
```

基本上，问题出在第二行。在类中声明变量时，我无法调用静态方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:48:49.283

你不能这样做，因为语言不支持它。

在 PHP5 对象模型中，方法要么是静态的，要么是动态的。你必须选择。同上类属性。

但是，没有什么可以阻止您使用私有类变量并通过声明[__get()](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)来调用类内或类外的静态方法来使用对象重载。只需执行 isset 测试私有变量并调用您的静态方法第一次调用。

请记住，您始终可以使用`self::`构造来引用静态属性和方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:50:35.377

您在编译时分配 $dir 您可以在对象初始化时在构造函数中执行此操作

```
class MyClass{
  public $dir;
  public function __construct(){    
     $this->dir = 'root/'.Util::getDir();
    }
} 
```

当您将创建此类的实例时`$this->dir`将被设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T10:53:11.390

您需要将其定义为：

```
public static $dir= '/some/path/'; 
```

那么你可以这样做：

```
self::$dir; 
```

在静态函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T10:36:55.570

你不必做类似的事情

```
class MyClass{
    public $dir;

    public function setDir(){
        $this->dir = 'root/'.Util::getDir(); 
    }
} 
```

# silverlight - 如何基于 IsReadOnly 创建 DataGridCell 的样式？

> ID：11360493
> 
> 赞同：0
> 
> 时间：2012-07-06T10:31:39.957
> 
> 标签：silverlight

我正在尝试在 Silverlight 中为 DataGrid 创建一个样式，该样式根据其 IsReadOnly 属性显示背景颜色。我的情况是我有一个有四列的 DataGrid，第一列和第二列是只读的，第三列和第四列不是只读的（不设置此属性或将其设置为 false。）

我试图添加，但没有奏效。我想知道，我怎样才能在 Silverlight 5 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:03:07.087

您可以绑定 CellTemplate 的背景，并根据您的选择使用转换器将布尔值转换为颜色。

要了解转换器，请参阅 [http://www.exploresilverlight.com/2012/06/converter-in-silverlight.html](http://www.exploresilverlight.com/2012/06/converter-in-silverlight.html)

干杯! 维诺德

# c# - 如何更新 COM1 端口默认设置（波特率，奇偶校验）C#

> ID：11360496
> 
> 赞同：2
> 
> 时间：2012-07-06T10:31:51.090
> 
> 标签：c#, baud-rate

我使用的是 Windows XP 专业版。

作为我的项目要求，我想将 COM1 端口默认设置更新为我的自定义设置。

我的电脑 -> 管理 -> 设备管理器 -> 端口 -> 通信端口 -> 端口设置 ->

默认设置是，

1.  波特率 === 9600
2.  数据位 === 8
3.  奇偶校验 == 无
4.  停止位 == 1

我想将上述设置更改为

1.  波特率 === 2400
2.  数据位 === 7
3.  奇偶校验 == 偶数
4.  停止位 == 2

（我在代码中所做的任何更改都应反映在设备管理器 -> 端口设置中

提前致谢

# mysql - 从 MySQL 表的特定行中检索值

> ID：11360497
> 
> 赞同：0
> 
> 时间：2012-07-06T10:31:53.800
> 
> 标签：mysql

我想从`MySQL`表的特定行中检索值，例如：如果我的表有 5 行，我想检索第二行的值。这样做的查询是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:51:24.470

“我想检索第二行的值。”

这个问题对关系数据库没有意义。在关系数据库中，没有行顺序的内在概念，因此没有“第一行”或“第四行”之类的东西。

在关系数据库中，表应该有一个或多个键。键是不能为 NULL 的列或其组合，并且对于任何不同的值组合最多有一行。然后，您可以使用该键检索行。

对行强加特定顺序可能是有意义的，之后您可以按序号位置引用行。排序是使用 ORDER BY 完成的，后跟一个确定顺序的表达式列表，然后是一个 LIMIT 子句来指定要检索的结果的哪个“切片”。

其他答案提到了 LIMIT，但省略了 ORDER BY 子句。这意味着您有零保证，当您下次执行完全相同的查询时，现在作为第 #x 行返回的任何内容都将返回。

与其将行视为具有位置，不如将行视为具有键，并使用它来检索特定行，如下所示：

```
SELECT ...
FROM   table
WHERE  column1 = value 
```

或者如果您有一个复合键（键中有多个列），如下所示：

```
SELECT ...
FROM   table
WHERE  column1 = value1
AND    column2 = value2
...
AND    columnN = valueN 
```

如果你真的还想使用仓位，一定要使用 ORDER BY 来强行下单：

```
SELECT ...
FROM   table
ORDER BY column1, ..., columnN
LIMIT <offset>, <count> 
```

where 是指定序数位置的整数文字，并且是指定从该位置开始获取多少行的整数文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:36:48.517

您可以在下面的代码中使用`LIMIT`子句 ( [MySQL docu](http://dev.mysql.com/doc/refman/5.0/en/select.html) )，但请注意，除非您应用某种排序 ( `ORDER BY col`)，否则输出的实际行可能会有所不同，因为 SQL 中没有内在排序- 表。

```
SELECT *
  FROM yourTable
  LIMIT 1,1 
```

更好的解决方案是向表中添加一个附加列`id`，然后按该列进行选择`id`。或者至少使用该`id`列进行订购，如前所述。

# php - 使用 JQuery 从表记录中显示下一个/上一个

> ID：11360503
> 
> 赞同：0
> 
> 时间：2012-07-06T10:32:10.017
> 
> 标签：php, mysql

在页面加载时，我使用 PHP 从 mysql 表中读取了 10 条随机记录。现在我想在同一页面上使用 JQUERY 使用 Next/Previous 按钮显示每条记录。最好的方法是什么？它不是分页，因为我必须显示我在页面加载时阅读的 10 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:40:05.117

嘿，我知道这不是分页，但请查看此链接...这可能会解决您的问题... [http://www.plus2net.com/php_tutorial/php_paging2.php](http://www.plus2net.com/php_tutorial/php_paging2.php)

# javascript - 无法调用方法 tinymce

> ID：11360505
> 
> 赞同：3
> 
> 时间：2012-07-06T10:32:20.230
> 
> 标签：javascript, tinymce

为什么会这样`'cannot call method getContent of undefined'`，这怎么可能？它使用 tinyMCE 设置我的文本区域，但不能执行 getContent。

```
tinyMCE.init({
            plugins: 'paste',
            theme : "advanced",
            mode : "specific_textareas",
            editor_selector : element,
            width : width,
            theme_advanced_buttons1 : "bold,italic,underline,strikethrough,bullist,numlist,undo,redo,",
            theme_advanced_buttons2 : "",
            theme_advanced_buttons3 : "",
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            content_css : "hhhng.css",
            paste_text_sticky : true,
            //select pasteAsPlainText on startup
            setup : function(ed) {
                    ed.onInit.add(function(ed) {
                    ed.pasteAsPlainText = true;
                });
            }
});
var x = tinyMCE.get(element).getContent(); 
```

**更新**

当我通过按钮单击调用时可以工作，但为什么在tinymce 初始化后它不能立即工作？是的，它位于文档就绪块中。这对我来说没有意义：S

```
$("#button").click( function(e) {

    e.preventDefault();
    console.log(tinyMCE.activeEditor.getContent());

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T11:10:59.113

即使它位于文档就绪块中，也可能是 TinyMCE 在调用 init 时不会立即创建自己。如果您想在初始化后运行代码，那么您应该查看它是否提供了传递回调函数的方法。一旦它自己准备好，它就会调用这个函数。

实际上，您似乎已经在使用这样的函数和这段代码：

```
//select pasteAsPlainText on startup
setup : function(ed) {
        ed.onInit.add(function(ed) {
        ed.pasteAsPlainText = true;
    });
} 
```

只需将您的 post init 代码添加到该函数体即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:12:01.570

除了 alnorths 答案之外，我还想向您展示如何尽早获取内容。正在创建 tinymce 编辑器实例，这需要一些时间，正如 alnorth 所说，当您请求它时它不存在。

如果您使用 tinymce 配置 (init) 参数设置并在那里设置 onInit 处理程序，您可以请求内容并且编辑器在那里响应。这里是：

```
setup : function(ed) {

    ed.onInit.add(function(ed, evt) {
        var x = tinyMCE.get(element).getContent();
        console.log(x);
    });
},

... 
```

tinymce onInit 事件在编辑器准备好（待使用）后立即被触发。

# c# - 在窗口周围移动控件

> ID：11360508
> 
> 赞同：0
> 
> 时间：2012-07-06T10:32:28.090
> 
> 标签：c#, wpf

所以我有一个`Border`，`TranslateTransform`这样我就可以在我的窗口周围移动它。在`Border`我的内容里面有一些控件加上一个`ScrollViewer`. 拖动工作正常，但是当我单击滚动条时，整个边框会跳跃，因此我的光标现在位于我单击的最后一个点上。非常烦人，我不明白为什么它会发生在我的滚动条上而不是我的其他控件上。

（我正在使用 Denis Morozov 的简单、出色的指南[http://denismorozov.blogspot.ie/2008/01/drag-controls-in-wpf-using.html](http://denismorozov.blogspot.ie/2008/01/drag-controls-in-wpf-using.html)）

这是我在代码中所做的；

```
private void Canvas_MouseDown(object sender, MouseButtonEventArgs e)
    {
        this.current.X = Mouse.GetPosition((IInputElement)sender).X;
        this.current.Y = Mouse.GetPosition((IInputElement)sender).Y;

        // Ensure object receives all mouse events.
        this.current.InputElement.CaptureMouse();
    }

    private void Canvas_MouseUp(object sender, MouseButtonEventArgs e)
    {
        if (this.current.InputElement != null)
            this.current.InputElement.ReleaseMouseCapture();
    }

    private void Canvas_MouseMove(object sender, MouseEventArgs e)
    {
        // if mouse is down when its moving, then it's dragging current
        if (e.LeftButton == MouseButtonState.Pressed)
            this.current.IsDragging = true;
        else
            this.current.IsDragging = false;

        if (this.current.IsDragging && current.InputElement != null)
        {
            // Retrieve the current position of the mouse.
            double newX = Mouse.GetPosition((IInputElement)sender).X;
            double newY = Mouse.GetPosition((IInputElement)sender).Y;

            // Reset the location of the object (add to sender's renderTransform

            // newPosition minus currentElement's position
            Transform rt = ((UIElement)this.current.InputElement).RenderTransform;
            double offsetX = rt.Value.OffsetX;
            double offsetY = rt.Value.OffsetY;
            rt.SetValue(TranslateTransform.XProperty, offsetX + newX - current.X);
            rt.SetValue(TranslateTransform.YProperty, offsetY + newY - current.Y);

            // Update position of the mouse
            current.X = newX;
            current.Y = newY;
        }
    }

    public void MouseLeftBtnDown(object sender, MouseButtonEventArgs e)
    {
        this.current.InputElement = (IInputElement)sender;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:55:18.757

实际上是在丹尼斯页面的评论中找到的。问题在于没有重置东西`Canvas_MouseUp`。该方法实际上应该是；

```
if (this.current.InputElement != null)
{
this.current.IsDragging = false;
this.current.InputElement.ReleaseMouseCapture();
this.current.InputElement = null;
} 
```

现在就像一个魅力;）

# php - PHP : rename() 如何找到错误原因？

> ID：11360511
> 
> 赞同：7
> 
> 时间：2012-07-06T10:32:39.143
> 
> 标签：php

我想打印出错误的原因。

error_get_last() 似乎没有返回任何东西。rename() 返回 TRUE|FALSE 而不是异常。

```
if (!rename($file->filepath, $full_path)) {
  $error = error_get_last();
  watchdog('name', "Failed to move the uploaded file from %source to   %dest", array('%source' => $file->filepath, '%dest' => $full_path));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:37:23.120

首先，最好在之前添加一些安全检查：

```
if (file_exists($old_name) && 
    ((!file_exists($new_name)) || is_writable($new_name))) {
    rename($old_name, $new_name);
} 
```

二、可以开启报错：

```
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T03:52:03.577

[答案是“另一个错误处理程序”正在根据http://php.net/manual/en/function.error-get-last.php](http://php.net/manual/en/function.error-get-last.php)的 php 手册中的注释捕获错误。在这种情况下，它是 drupal 错误处理程序，并且错误被捕获到那里的错误日志中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T10:39:09.493

另一种方法是`copy()`使用消息复制到所需的新名称（您可以验证）...然后使用 unlink() 删除原始名称。

但是，是的，`rename()`完全按照你说的做，当它不起作用时不会产生错误:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T10:39:51.710

您似乎正在尝试移动上传的文件，请改用[move_uploaded_file](http://php.net/manual/en/function.move-uploaded-file.php)。

# android - 在 Android 中，是否存在与屏幕分辨率和尺寸无关的测量值？

> ID：11360512
> 
> 赞同：1
> 
> 时间：2012-07-06T10:32:40.107
> 
> 标签：android

例如，我们有像素。但是，像素不是恒定的。我想高分辨率的安卓屏幕会有更多的像素。

然后我们有密度，这似乎没有多大帮助。它不像像素那么精确，也不是恒定的。高分辨率将具有大量“密度”

我们是否有大约 10% 的屏幕尺寸。程序员这样做是否普遍？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:11:22.393

从不（或几乎从不）使用绝对像素。

如果您想处理屏幕布局的百分比，请使用`layout_weight`.

以下精简的 XML 布局文件显示了一个`LinearLayout`包含两个`TextView`小部件的垂直布局，每个小部件都包含在自己的`LinearLayouts`. 内部`LinearLayouts`将其高度设置为，`0dp`但“权重”（0.9 + 0.1）的“总和”等于 1，因此第一个内部 `LinearLayout`自动扩展到屏幕高度的 90%，而第二个得到 10%。

您使用的数字无关紧要……它们可以是 9 和 1 或 90 和 10 或 900 和 100 ……归结为总和以及每个代表的百分比。布局膨胀过程将完成其余的工作，您无需了解绝对像素。

```
<LinearLayout
    android:orientation="vertical"
    ... >
    <LinearLayout
        ...
        android:layout_height="0dp"
        android:layout_weight="0.9" >
        <Textview
            ... >
    </LinearLayout>
    <LinearLayout
        ...
        android:layout_height="0dp"
        android:layout_weight="0.1" >
        <Textview
            ... >
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:44:19.600

答案是否定的，你没有那个。但是您可以制作自己喜欢的屏幕百分比。您将无法在 xml 中使用它，但您可以从代码中动态设置它。以下方法可用于获取屏幕的高度和宽度：

```
public static int getScreenHeight(Context context) {
    DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    return(metrics.heightPixels);
}

public static int getScreenWidth(Context context) {
    DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    return(metrics.widthPixels);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:49:48.367

据我所知，没有这样的事情。

但是您可以使用自己的代码实现相同的功能。获取显示的宽度和高度，然后在设置布局参数之前对它们进行自己的操作。

```
 Display display = getWindowManager().getDefaultDisplay();
    int width = display.getWidth();
    int height = display.getHeight();
    yourLinearLayout.setLayoutParams(new LinearLayout.LayoutParams(
            (width/2), height/4)); // assuming that you want 50% width n 25% height of the display. 
```

# c# - 可以在 Visual Studio C 中编译的文件大小是否有限制？

> ID：11360518
> 
> 赞同：2
> 
> 时间：2012-07-06T10:32:56.797
> 
> 标签：c#, c, visual-studio-2010, auto-generate, filesize

我正在开发一个生成大量 C 代码的 C# 程序。它生成一个 .c 文件和随附的头文件。在一个非常基本的层面上，程序从用户那里接受一个字符串，然后将它与在 autogen 期间放置在头文件中的数千个其他字符串进行比较。

头文件包含超过 800k 行代码，.c 文件包含大约 300k。可以想象，这些都是非常大的文件。现在，我意识到拥有这么大的文件是不好的编码习惯。最好的办法是将这个文件分解成更小的文件并以这种方式编译它，但是我们可以假设这两个文件结构对于我的项目将如何在总体方案中使用是必要的。

考虑到这一点，我在 Visual Studio IDE 和命令行中编译该程序时遇到了问题。事实上，这并不完全正确。每次我用任何一种方法尝试它时，它似乎都可以编译（诚然，这需要一段时间）。但是，当我开始运行程序时，问题就出现了。它很好地到达了输入循环，但是在接受用户输入后，程序崩溃并出现以下错误：

“Prototype.exe 中 0x008105f9 处未处理的异常：0xC0000005：访问冲突写入位置 0x00000000。”

我相当确定这不是我的代码导致问题。我已经运行了在调试模式下生成的代码的一个版本，它要小得多并且运行良好。唯一的区别是由 C# 程序写入头文件的字符串的数量。较小文件的大小分别为 14k 和 5k 行。此外，IDE 不允许我在使用完整大小的代码编译和运行后使用断点进行调试，而我的较小代码可以。

我的问题是：C 语言或 Visual Studio 编译器对单个大文件是否有任何限制或问题会导致上述错误？如果是这样，有没有办法在保留我的两文件结构的同时规避这个限制？我尝试在属性对话框中将堆和堆栈大小增加到 4mb，但这没有帮助。

我意识到这是一种生成和运行代码的异常方式，但我会很感激任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:42:18.987

> 我意识到拥有这么大的文件是不好的编码习惯

不它不是。

拥有一个像这样手动维护的 LOGIC 文件是不好的做法。

拥有一个庞大的常量文件是有争议的，

但是像这样生成的文件不会出现在编码实践中，因为你不编码。你生成它。

生成代码的文件很少有好处，例如易于生成。VS.ENT 自己做这件事 - EntityFramework 等生成一个包含大量类的 cs 文件，所有这些都来自一个输入模型。

> C 语言或 Visual Studio 编译器对单个 arge 文件是否有任何限制或问题会导致上述错误？

没有任何记录。您可能会遇到很少有人见过的错误。我担心您需要重写或 - PSS 支持案例（Microsoft 支持服务），如果您发现编译器错误，它可能是免费的。

或者，它可能是您的代码 - 如果您的调试案例要小得多，则可能是您的代码对完整数据集产生错误，这比编译器问题更有可能。

我建议您使用 FULL 文件而不是一小部分文件进行调试运行。调试器可能会将您指向一个令人惊讶的位置。

# javascript - JavaScript：递归函数不能正常工作

> ID：11360524
> 
> 赞同：2
> 
> 时间：2012-07-06T10:33:11.577
> 
> 标签：javascript

我正在尝试执行递归函数来按类查找 HTMLelement，但由于某种原因，它在到达没有子元素的子元素后停止。这是代码：

* * *

```
var alpha = Obj.elementByClass(document.body, "message");

Obj.elementByClass = function(element, cl) {
   var elementChildren = element.children,
       elementChildrenLength = elementChildren.length;

   for(var num=0; num<elementChildrenLength; num++) {
      if(elementChildren[num].className && elementChildren[num].className.indexOf("cl") > -1) {
         return elementChildren[num];
      }
      else if(elementChildren[num].children.length !=0) {
         return Obj.elementByClass(elementChildren[num], cl);
      }
   }
}; 
```

* * *

请不要建议 jquery 或其他库，我想了解为什么当它到达没有孩子的元素时它会停止。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:44:33.500

```
Obj.elementByClass = function(element, cl) {
   for(var i=0, len = element.children.length; i<len; i++) {
    if (element.children[i].className && new RegExp('\\b'+cl+'\\b').test(element.children[i].className))
       return element.children[i];
    else if(element.children[i].children.length)
       return Obj.elementByClass(element.children[i], cl);
   }
}; 
```

几点：

*   您在定义之前调用了该函数（并且，由于这不是一个提升的函数，所以会出错）
*   该类的测试现在更严格了，因为它现在不允许在共享相同单词的其他类名中找到类名（现在使用 REGEXP 完成检查，使用单词边界）
*   您`indexOf()`正在明确寻找字符串“cl”，我认为您的意思是参数`cl`
*   为了便于阅读，我把它剪掉了一点
*   由于代码当前，您只返回第一个匹配节点，而不是全部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:52:10.857

据我所知，您正在搜索带有 className 'message' 的 body 元素的第一个子元素。我可以建议这个替代方案吗？

```
document.querySelector('body .message') 
```

函数返回`undefined`是因为第一个条件 AND`else if(elementChildren[num].children.length !=0)`两者都不为真。所以，什么都不做，退出，什么都没有返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T10:36:00.757

因为`for`当元素没有子元素时，循环永远不会执行，因为两者都存在`num`并且条件永远不会为真。`elementChildrenLength``0``num<elementChildrenLength`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T10:36:48.027

非元素节点（例如文本节点）没有 childNodes 属性，因此尝试读取`.children.length`它们会引发错误，从而中止执行。

您必须验证该节点是一个元素：

```
for(var num=0; num<elementChildrenLength; num++) {
    if (elementChildren[num].nodeType !== 1) {
        continue;
    }
    ... 
```

或者在访问之前检查节点是否有 childNodes 属性：

```
else if(elementChildren[num].children && elementChildren[num].children.length !=0) { 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T10:37:46.073

如果`elementChildrenLength`等于 0，那么整个 for 循环块将不会执行。

避免这种情况的最佳方法是用以下内容包装 for 循环块：

```
if(elementChildrenLength==0){
    return 0;
}else{
   for(var num=0; num<elementChildrenLength; num++) {
       //for loop block here
   }
} 
```

# linux-kernel - Linux 设备驱动程序

> ID：11360525
> 
> 赞同：0
> 
> 时间：2012-07-06T10:33:13.477
> 
> 标签：linux-kernel, linux-device-driver

我正在开始 linux 设备驱动程序开发，我经常看到这种代码并且无法理解它究竟做了什么：

```
#<linux/fs.h>
loff_t (*llseek) (struct file *, loff_t,int); 
```

llseek 方法用于改变文件中的读写位置。loff_t 是一个长偏移参数。我不明白的是上面的语法以及它是如何工作的。有人可以阐明一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:39:59.887

```
 loff_t (*llseek) (struct file *, loff_t,int); 
```

这只是说它`llseek`是一个指向返回 a`loff_t`并接受三个参数的函数的指针。第一个参数是指向 a 的指针`struct file`。第二个是一个`loff_t`。第三个是一个`int`。

但是，如果您仔细观察，您会发现它出现在`struct file_operations`. 这意味着`struct file_operations`包含一个被调用的成员`llseek`，它是一个指向返回 a`loff_t`并接受这三个参数的函数的指针。

顺便说一句，如果您不了解如何使用包含函数指针的结构之类的东西在 C 中进行 OOP 编程，那么您在内核设备驱动程序附近真的没有任何业务。（如果您熟悉 C++，那么只需了解带有函数指针的结构基本上就是您在 C 中伪造类的方式。）

# position - Google BIgQuery 中的 POSITION(field) 是什么？

> ID：11360526
> 
> 赞同：1
> 
> 时间：2012-07-06T10:33:15.477
> 
> 标签：position, google-bigquery

我使用 Google BigQuery 并且对它提供的 POSITION(field) 函数有疑问。

我认为 POSITION 函数返回嵌套字段中查询中值的位置。

但我很惊讶它也适用于非嵌套字段。

例如。

```
SELECT url, POSITION(url) FROM [publicdata:samples.github_timeline] WHERE url="https://github.com/oscardelben/sheet"; 
```

输出是

```
Row  url                                 f0_
1  https://github.com/oscardelben/sheet  1
2  https://github.com/oscardelben/sheet  2
3  https://github.com/oscardelben/sheet  3
4  https://github.com/oscardelben/sheet  4
5  https://github.com/oscardelben/sheet  5
6  https://github.com/oscardelben/sheet  6
7  https://github.com/oscardelben/sheet  1
8  https://github.com/oscardelben/sheet  2
9  https://github.com/oscardelben/sheet  3
....
...
..
. 
```

在这种情况下，POSITION(url) 是什么意思？谷歌 BigQuery 样本还提供了我可以测试的任何嵌套字段吗？

我很感激哟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:34:10.450

据我所知，对于非嵌套字段， POSITION 将返回数据分片中的行偏移量——也就是说，如果基础数据被分成 100 块，并且你的结果每块有 10 行，你会有 1-10 的位置值重复 100 次。这不太可能特别有用。可以说，这应该返回全局位置（即在上述情况下它将返回 1-1000），如果您同意，请告诉我，我会看看是否可以更改。

# php - 在 cygwin 终端上找不到 phpize 命令

> ID：11360530
> 
> 赞同：1
> 
> 时间：2012-07-06T10:33:48.590
> 
> 标签：php, cygwin, pear, gearman

当我在 cygwin 终端上给 phpize 找不到 phpize 命令时。然后我尝试了 which phize

它显示了：

> 没有 phpize 在 (/usr/local/bin:/usr/bin:/cygdrive/c/Program Files/PC 连接解决方​​案:/cygdrive/c/Windows/system32:/cygdrive/c/Windows:/cygdrive/c/Windows /System32/Wbem:/cygdrive/c/Windows/System32/WindowsPowerShell/v1.0:/cygdrive/c/Program Files/Lenovo/蓝牙软件:/cygdrive/c/xampp/php/PEAR)

我应该如何使 phpize 命令工作，因为我需要它来构建 Gearman 扩展。我是否需要安装任何东西才能使命令工作。我的 php 版本是 5.2.4。我检查了 php 文件夹，没有找到 phpize

# django - 与模型有关系 , 要么没有安装要么是抽象的

> ID：11360532
> 
> 赞同：1
> 
> 时间：2012-07-06T10:34:04.697
> 
> 标签：django

```
from django.db import models    
from audit_trail.audit import AuditTrail    
from my_base_model.classes import BaseUuidModel                                    
from my_class_base import BaseClass

class Mini(BaseMaternalVisitModel):
    my_class_base = models.ForeignKey(BaseClass) 

class MiniHu(BaseUuidModel): 
    myclass = models.ForeignKey(Mini)   

    class Meta:
         app_label="classes" 
```

当我运行时出现`python manage.py validate`此错误

```
<MiniHu> has a relation with model <Mini>, which has either not been installed or is abstract. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T22:34:51.983

添加 ：

```
class Meta:
    app_label="classes" 
```

给 Mini 上课，这样他们就可以在同一个应用程序中找到彼此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:52:43.627

你跑来`python manage.py syncdb`创建必要的数据库表了吗？您还提到`Mini`该类是 的子类`BaseMaternalVisitModel`，您尚未在此处导入该类（尽管如果您遇到该错误，我猜您在此处发布时只是忘记了该行）。

当您对 Django 模型进行子类化时，您应该注意“普通”模型和“抽象”模型之间的区别。当一个模型是“抽象的”时，它不会被创建`syncdb`——只有当你对它进行子类化时，在这种情况下，只有子类化的模型会在数据库中创建，包含它自己的所有字段以及它从父类继承的字段：抽象类. 这就是“未安装或抽象”错误的原因：就数据库而言，抽象模型不存在。Django 试图访问数据库中不存在的模型：要么是因为您还没有运行`syncdb`并创建它，要么是因为它是一个抽象模型并且在数据库中不存在。

# android - android.view.Surface - OutOfResourcesException

> ID：11360534
> 
> 赞同：3
> 
> 时间：2012-07-06T10:34:08.660
> 
> 标签：android, exception, canvas, resources, surfaceview

我有这个奇怪的错误，并没有发现任何可能的解决方案。在使用我的应用程序玩了一下之后，问题总是随机出现。该应用程序几乎可以在所有设备上完美运行。仍然存在此问题的设备之一正在运行 CM 7.1.0，我知道很多 CM7 用户都在抱怨类似的问题。

不幸的是，我有一些用户对应用程序有同样的问题，但我不知道他们是否使用了 CM7。由于我无法在同一 ROM 上的其他应用程序中重现此错误，因此它必须与其他内容有关。

正如我之前所说，它看起来完全是随机的，所以复制源代码没有任何意义。这是日志，希望有人已经遇到过同样的问题并且可以帮助我。谢谢。

```
msm7k.gralloc(1306): alloc mmap(fd=150, size=614400, prot=3) failed (Try again)
msm7k.gralloc(1306): gralloc failed err=Try again
GraphicBufferAllocator(1306): alloc(320, 480, 1, 00000033, ...) failed -11 (Try again)
GraphicBufferAllocator(1306): Allocated buffers:
GraphicBufferAllocator(1306):   0x20a8d0:  300.00 KiB |  320 ( 320) x  480 |  4 | 0x00000133
GraphicBufferAllocator(1306):   0x20c110:  531.25 KiB |  320 ( 320) x  425 |  1 | 0x00000133
GraphicBufferAllocator(1306):   0x292db0:   31.25 KiB |  320 ( 320) x   25 |  1 | 0x00000133
GraphicBufferAllocator(1306):   0x299568:  300.00 KiB |  320 ( 320) x  480 |  4 | 0x00000133
GraphicBufferAllocator(1306):   0x4a2288:  331.25 KiB |  320 ( 320) x  265 |  1 | 0x00000133
GraphicBufferAllocator(1306):   0x4b2518:   31.25 KiB |  320 ( 320) x   25 |  1 | 0x00000133
GraphicBufferAllocator(1306): Total allocated: 1525.00 KB
SurfaceFlinger(1306): Layer::requestBuffer(this=0x3a7618), index=0, w=320, h=480 failed (Try again)
Surface(7024): Surface (identity=224) requestBuffer(0, 0, 0, 0, 00000033) returned a buffer with a null handle
Surface(7024): getBufferLocked(0, 0, 0, 0, 00000033) failed (Out of memory)
Surface(7024): dequeueBuffer failed (Out of memory)
ViewRoot(7024): OutOfResourcesException locking surface
ViewRoot(7024): android.view.Surface$OutOfResourcesException
ViewRoot(7024):     at android.view.Surface.lockCanvasNative(Native Method)
ViewRoot(7024):     at android.view.Surface.lockCanvas(Surface.java:314)
ViewRoot(7024):     at android.view.ViewRoot.draw(ViewRoot.java:1461)
ViewRoot(7024):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1263)
ViewRoot(7024):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
ViewRoot(7024):     at android.os.Handler.dispatchMessage(Handler.java:99)
ViewRoot(7024):     at android.os.Looper.loop(Looper.java:130)
ViewRoot(7024):     at android.app.ActivityThread.main(ActivityThread.java:3835)
ViewRoot(7024):     at java.lang.reflect.Method.invokeNative(Native Method)
ViewRoot(7024):     at java.lang.reflect.Method.invoke(Method.java:507)
ViewRoot(7024):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
ViewRoot(7024):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
ViewRoot(7024):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T10:30:21.257

经过长时间的拉动我的 git 提交后，我终于找到了一个没有这个问题的。由于我正在开发的应用程序在屏幕上显示敏感数据，因此我试图更改在“最近的应用程序”部分中显示为缩略图的图像。为了实现这一点，我将安全标志设置为窗口：

[http://developer.android.com/reference/android/view/Window.html#setFlags(int](http://developer.android.com/reference/android/view/Window.html#setFlags(int) , int) [http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SECURE](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SECURE)

原来这是导致异常和显示黑屏的问题。在我删除它之后，一切正常。希望这个技巧能帮助其他面临同样问题的开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T08:40:48.053

我有类似的问题，但与硬件表面有关。

我有 ProgressDialog 和 SignIn 组件。这个组件之间的所有通信都是通过 Handler 类完成的。

在我的情况下，唯一可以避免崩溃的是关闭特定活动的硬件加速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:36:18.740

`release()`如果你不再使用你的，你需要打电话`android.view.Surface`。

[http://developer.android.com/intl/es/reference/android/view/Surface.html#release](http://developer.android.com/intl/es/reference/android/view/Surface.html#release) ()

# ruby-on-rails - 工头无法连接到 potsgresql 服务器（Rails）

> ID：11360540
> 
> 赞同：3
> 
> 时间：2012-07-06T10:34:17.590
> 
> 标签：ruby-on-rails, postgresql

这是我第一次使用 postgresql。我已经检查过，服务器肯定似乎正在运行，但是当我启动工头时出现此错误

```
[...]postgresql_adapter.rb:1206:in `initialize': could not connect to server: No such file or directory (PG::Error) 
```

任何想法出了什么问题？

谢谢

更新：

我打开 pgAdmin 并将数据库设置为侦听端口 8000 而不是 5432（这似乎是 rails 想要的）。我尝试创建一个新连接并将其设置为 5432，但出现此错误：

服务器不听

服务器不接受连接：连接库报告

```
无法连接到服务器：连接被拒绝
服务器是否在主机“localhost”(::1) 上运行并接受端口 5432 上的 TCP/IP 连接？
无法连接到服务器：连接被拒绝
服务器是否在主机“localhost”(127.0.0.1) 上运行并接受端口 5432 上的 TCP/IP 连接？
无法连接到服务器：连接被拒绝
服务器是否在主机“localhost”（fe80::1）上运行并接受端口 5432 上的 TCP/IP 连接？

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:47:00.537

`database.yml`我通过修改我的文件让 Foreman 再次工作。我不得不将端口更改为`8000`（postgres 正在监听的端口）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T20:33:56.903

更改端口对我不起作用。[我使用Postgres.app](http://postgresapp.com/documentation#toc_3)在 Mac 上安装了 postgres

我必须更新 Rails DB 配置（database.yml）以添加主机字段并将其设置为 localhost 并删除用户名和密码字段

```
development:
  adapter: postgresql
  encoding: unicode
  database: project_development
  host: localhost
  pool: 5 
```

修复该错误后，我连接的数据库不存在。要解决此问题，请使用 psql 连接到 postgres 并创建数据库

```
CREATE DATABASE project_development; 
```

用适合您情况的数据库名称替换数据库名称。

Postgres.app 文档也有在其他环境中配置的附加信息 [http://postgresapp.com/documentation#toc_3](http://postgresapp.com/documentation#toc_3)

# facebook-like - Facebook 发送按钮显示错误的 href URI 并返回错误

> ID：11360543
> 
> 赞同：1
> 
> 时间：2012-07-06T10:34:30.973
> 
> 标签：facebook-like

在过去的一年中，我在 4 个网站上安装了 Facebook Like/Send 按钮（使用异步 javascript），但我注意到 Send 按钮不再有效（尽管在安装测试时它确实有效）。

例如#1：[http ://www.libbiking.com/](http://www.libbiking.com/)

在相关页面上，我添加了：

```
<meta property="og:title" content="Libbi King" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.libbiking.com/" />
<meta property="og:image" content="http://www.libbiking.com/mygallery/site/img/www_libbiking_com_facebook_01.gif" />
<meta property="og:site_name" content="Libbi King" />
<meta property="fb:admins" content="618598922" />
<meta property="fb:app_id" content="251724341605334" />
<meta property="og:description" content="Illustrator &amp; Set Designer in London | libbi@libbiking.com | tel: 07706 553 288" /> 
```

和

```
 <div id="fb-root"></div>        
        <script type="text/javascript">
          window.fbAsyncInit = function() {
            FB.init({
              appId      : '251724341605334', // App ID
              channelUrl : '//www.libbiking.com/mygallery/site/libbiking/fb_channel.php', // Channel File
              status     : true, // check login status
              cookie     : true, // enable cookies to allow the server to access the session
              xfbml      : true  // parse XFBML
            });

            // Additional initialization code here
          };

          // Load the SDK Asynchronously
          (function(d){
             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all.js";
             ref.parentNode.insertBefore(js, ref);
           }(document));
        </script>

    <fb:like href="http://www.libbiking.com/" send="true" layout="button_count" width="180" show_faces="false" font="segoe ui"></fb:like> 
```

使用 fb_channel.php：

```
<?php
$cache_expire = 60*60*24*365;
header("Pragma: public");
header("Cache-Control: max-age=".$cache_expire);
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$cache_expire) . ' GMT');
?>
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

奇怪的是，它现在向 Facebook 页面（而不是网站）显示一个安全的 https URI。发送时返回错误消息：

“我们在发送您的消息时遇到以下错误：由于服务器返回状态代码 200，无法访问[https://www.facebook.com/pages/Libbi-King/355311097871934的页面”](https://www.facebook.com/pages/Libbi-King/355311097871934)

我已经通过 Facebook Linter/Debugger 解析了该页面，并且响应代码 200 的 OG 似乎很好。我不确定为什么这会导致错误，因为我的理解是响应代码 200 是一个成功的页面检索。如果我用不正确的 URI 替换按钮 href，则发送按钮实际上可以工作！

我注意到在注册应用程序时，类型描述最近从“网站”更改为“使用 Facebook 登录的网站”。我不知道这是否会导致问题...

# iphone - UITableView 淡入背景

> ID：11360547
> 
> 赞同：1
> 
> 时间：2012-07-06T10:34:51.120
> 
> 标签：iphone, ios, uitableview

我在互联网上看到很多人都在问如何在边缘淡化他们的 tableview 的问题。有一些解决方案几乎可以工作。一个例子是：

```
CAGradientLayer *maskLayer = [CAGradientLayer layer];

CGColorRef outerColor = [UIColor colorWithWhite:1.0 alpha:1.0].CGColor;
CGColorRef innerColor = [UIColor colorWithWhite:1.0 alpha:0.0].CGColor;

maskLayer.colors = [NSArray arrayWithObjects:(__bridge id)innerColor, (__bridge id)outerColor, nil];
maskLayer.locations = [NSArray arrayWithObjects:
                       [NSNumber numberWithFloat:0.8], 
                       [NSNumber numberWithFloat:1.0], nil];

maskLayer.bounds = CGRectMake(0, 0,
                              self.historyTable.frame.size.width,
                              self.historyTable.frame.size.height + self.headerLabel.frame.size.height);
maskLayer.anchorPoint = CGPointZero;

[self.view.layer addSublayer:maskLayer]; 
```

此代码运行良好，但它的问题是它只能将其淡化为纯色。我想要做的是淡出背景图像（它将有图案并且可以将屏幕更改为屏幕）。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T14:40:52.940

Had the same problem, assuming we are talking about the [Cocoanetics tutorial](https://stackoverflow.com/a/21262188/2242359), replace your last line:

```
[self.view.layer addSublayer:maskLayer]; 
```

With this one:

```
self.historyTable.layer.mask = maskLayer; 
```

Basically skip the last step of the tutorial but attach the mask to the tableView's layer.

**Also check [this](https://stackoverflow.com/a/21262188/2242359) answer for complete solution including handling top and bottom of table..**

# iphone - 按钮操作没有响应 iphone

> ID：11360548
> 
> 赞同：0
> 
> 时间：2012-07-06T10:34:53.683
> 
> 标签：iphone, ios, uibutton, uibarbuttonitem

当我按下下一个按钮时，它是 UIBarButton。然后不执行相关操作。

```
UIButton *nextButton1=[UIButton buttonWithType:UIButtonTypeCustom];
[nextButton1 setBackgroundImage:[UIImage imageNamed:@"next.png"] forState:UIControlStateNormal];
[nextButton1 addTarget:self action:@selector(goToItems) forControlEvents:UIControlEventTouchUpOutside];
[nextButton1 sizeToFit];

UIBarButtonItem *nextButton=[[UIBarButtonItem alloc]initWithCustomView:nextButton1];
self.navigationItem.rightBarButtonItem=nextButton; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:35:38.393

```
[nextButton1 addTarget:self action:@selector(goToItems) forControlEvents:UIControlEventTouchUpInside]; 
```

你正在路过`UIControlEventTouchUpOutside`，应该是`UIControlEventTouchUpInside`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:39:21.437

您将 forcontrolevent 作为 UIControlEventTouchUpoutside 传递，而不是使用

```
[nextButton1 addTarget:self action:@selector(goToItems) forControlEvents:UIControlEventTouchUpInside];

[nextButton1 addTarget:self action:@selector(goToItems) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:19:49.803

明显的错误是`UIControlEventTouchUpOutside`，您应该将其更改为`UIControlEventTouchUpInside`.

但是，与其制作一个单独的按钮，然后将其作为视图分配给`UIBarButtonItem`，您可以简单地`UIBarButtonItem`使用所需的图像制作 a 并将所需的操作与它相关联。

例如：

```
UIBarButtonItem *nextButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"next.png"]
                                                               style:UIBarButtonItemStylePlain
                                                              target:self 
                                                              action:@selector(goToItems)];

self.navigationItem.rightBarButtonItem = nextButton;

[nextButton release]; 
```

# c# - 将 MySql 数据库导出到文件中

> ID：11360552
> 
> 赞同：1
> 
> 时间：2012-07-06T10:35:10.190
> 
> 标签：c#, c++, mysql, database, vba

我创建了一个 VBA 代码，它通过服务器上的 mysql 将数据插入到我的数据库中。我的 VBA 代码将由 C++ 或 C# 可执行文件调用。但是如果我的 VBA 代码失败，我想恢复我的数据库的备份。所以我有一些问题：

是否可以在 VBA 中创建我的数据库的备份文件？如果我的代码失败，是否可以将此备份文件恢复到我的主数据库中？

如果没有，是否有其他方法或建议来解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:44:50.740

我以前没有使用过 MySQL，但它支持[事务](http://dev.mysql.com/doc/refman/5.0/en/commit.html)。您可以在代码失败时进行回滚，并在代码成功时进行提交。

# jquery - 如何选择不透明度的复选框：0.5

> ID：11360555
> 
> 赞同：2
> 
> 时间：2012-07-06T10:35:26.210
> 
> 标签：jquery, css, jquery-selectors, dom-traversal

如何选择复选框`opacity: 0.5`？

选择器`:checkbox[style~='opacity: 0.5']`不会选择它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T10:42:38.847

该[`filter()`](http://api.jquery.com/filter/)方法允许您编写一个函数，该函数将为所有元素运行，并且仅在函数返回 true 时将它们包含在结果集中。

```
$('input[type="checkbox"]').filter(function () {
    return $(this).css('opacity') == 0.5;
}).addClass('marked');​ 
```

^(这将在每个不透明度为 0.5 的元素上添加一个“标记”类。)

**注意**：您应该[使用类](http://api.jquery.com/category/manipulation/class-attribute/)而不是直接从 Javascript 操作和查询 CSS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:42:05.680

尝试这个：

```
$('input').filter(function() {
     return $(this).css('opacity') == '0.5';
}); 
```

# javascript - 在 Google Chrome 中调试 CSP 违规

> ID：11360557
> 
> 赞同：21
> 
> 时间：2012-07-06T10:35:36.257
> 
> 标签：javascript, security, google-chrome, tinymce, content-security-policy

我在使用以下 Content-Security-Policy HTTP 标头时尝试使用 TinyMCE：

```
X-WebKit-CSP: default-src 'self'; script-src 'self' 'unsafe-eval'; img-src *; media-src *; frame-src *; font-src *; style-src 'self' 'unsafe-inline'; report-uri /:reportcspviolation 
```

我在工具 - JavaScript 控制台中收到以下错误：

```
Refused to execute JavaScript URL because it violates the following Content Security Policy directive: "script-src 'self' 'unsafe-eval'".
 about:blank:1
Refused to execute inline event handler because it violates the following Content Security Policy directive: "script-src 'self' 'unsafe-eval'".
 test.xhtml:1
Refused to execute JavaScript URL because it violates the following Content Security Policy directive: "script-src 'self' 'unsafe-eval'".
 about:blank:1
Refused to execute inline event handler because it violates the following Content Security Policy directive: "script-src 'self' 'unsafe-eval'".
 test.xhtml:1 
```

但是，**其中没有可执行的 JS 代码，`test.xhtml`**因为它仅使用外部`<script>`来处理给定的 CSP 标头。对的**引用`about:blank`也同样无效**。

**任何想法如何找出违反 CSP 的原因在哪里？**

Chrome 的内部 JS 调试器似乎无法识别来源。

此外，由于某种原因，Chrome 在工具 - 开发人员工具 - 网络中将 CSP 违规报告显示为“待处理”，但检查要发送的数据不会提供任何额外信息。例子：

```
{"csp-report":{"document-uri":"about:blank","referrer":"url-of/test.xhtml","violated-directive":"script-src 'self' 'unsafe-eval'","original-policy":"default-src 'self'; script-src 'self' 'unsafe-eval'; img-src *; media-src *; frame-src *; font-src *; style-src 'self' 'unsafe-inline'; report-uri /:reportcspviolation"}} 
```

我能够弄清楚错误消息是关于`onclick`在 TinyMCE 动态加载的一些 HTML 中使用 eg 属性，但是要查找什么文件？另一个错误可能是一段 TinyMCE HTML，其中一些`href`具有以开头的值，`javascript:`但如果没有来自 Chrome 的任何指针，也很难找到。整个设置适用于 Firefox 13（使用相应的 CSP 标头）。

**有没有办法让 Chrome 为每个 CSP 违规抛出异常？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T17:23:45.947

确保在您的网站上测试 CSP 时禁用所有 Chrome 扩展程序 - 例如，AdBlock 和 PhotoZoom 扩展程序都将它们自己的内联样式添加到触发违规的 DOM（如果您启用了该功能，则随后点击报告 uri ，而其他扩展可能也会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-08T08:17:56.290

虽然这个问题很老了，但答案还是一样的。TinyMCE 编写的默认代码不符合 csp。

Tinymce 将内联 css 插入到它添加 dom 的元素中。不一定要这样，但这是他们写的方式。如果您使用 google 或 firefox 开发工具检查 dom，您可以看到它，这是一个可以在它插入的 iframe 中找到的示例：

```
<body spellcheck="false" id="tinymce" class="mce-content-body " onload="window.parent.tinymce.get('story_story').fire('load');" contenteditable="true"><p><br></p></body> 
```

浏览器检测到这一点并提出违规报告，因为您的 csp 不允许这样做。有两种方法可以使此错误消失：

1) 将“inline”或“unsafe-inline”添加到该页面的 csp script-src

或者

2) 重新编码 tinymce javascript 文件。这将要求您打开所有 javascript 文件并更改它插入的代码以排除内联 js 部分。然后必须将这些脚本放入插入到 dom 中的脚本文件中，以使代码仍然可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T07:48:05.943

如果 TinyMCE iframe 域和您网站的域不同，则无法通过 javascript 访问 iframe 并在控制台中收到错误消息。在这种情况下，没有标题对您没有帮助。iframe 和地址是否在同一个域中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-19T09:21:40.937

这个问题的原因是 TinyMCE 为其编辑器的实现创建了一些隐藏的 iframe 元素。然后 TinyMCE 实现尝试`onclick`在其中一个 iframe 元素中使用例如内联属性运行 JS，这显然会因 CSP 规则而失败。

通常，如果脚本生成一个新框架（例如`about:blank`），然后尝试在其中运行一些代码，则 Google Chrome 无法在控制台中提供任何有意义的内容，也无法向 CSP 报告 URL 提供任何内容。你得到的只是`about:blank:1`.

这是因为 Google Chrome 不会保留有关内联`onclick`属性来源的信息。基本上，浏览器需要有关`document.write()`添加行为不端`onclick`代码的代码的信息！我想为每个人都这样做`document.write()`对于运行时性能来说太昂贵了。我希望他们能够跟踪创建该特定 iframe 的代码位置，因为这可能有助于跟踪问题的根源。此外，当 TinyMCE 创建了多个不可见的 iframe 元素时，Google Chrome 无法将您指向*正确*的iframe，因为每个元素的 URL 都`about:blank`在通过`document.write()`.

Nowadays you can add `'report-sample'` to the `Content-Security-Policy` which may help tracking down the problem a bit. Sometimes you can identify the problematic code from the script sample you get in the report.

# jquery - 在 jquery.load 之后重新加载 Cufon

> ID：11360558
> 
> 赞同：0
> 
> 时间：2012-07-06T10:35:37.093
> 
> 标签：jquery, cufon

我知道，这个问题已经在这里讨论过很多次了，但我看不到明确的解决方案。我已经尝试过[https://github.com/sorccu/cufon/wiki/API](https://github.com/sorccu/cufon/wiki/API)解决方案。这是我的代码

```
function jload(){
  $('#main').load('ajax_load.html', function() {
Cufon.refresh('h3');
  });
} 
```

但它不起作用..为什么？

# wpf - 由于 Xaml 是基于矢量的，大形状是否使用更多内存？

> ID：11360560
> 
> 赞同：2
> 
> 时间：2012-07-06T10:35:41.990
> 
> 标签：wpf, xaml, vector

正如标题所暗示的那样，我很想知道大形状是否在 WPF 应用程序中占用更多内存，或者它是否全部基于算法而这并不重要？

干杯，可汗

* * *

附录，我问的原因是我想在我的页面顶部有一个视觉弯曲的标题。我已经使用位于页面顶部的一个非常大的椭圆来完成此操作，其中大部分都离开了页面，我只查看了其中的一小部分，但它提供了所需的视觉效果。（希望这是有道理的）

我只是想知道在屏幕上显示这个巨大的椭圆是否真的效率低下，而是考虑创建一个自定义路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:48:25.110

就像符文安徒生所说，这取决于。

但是如果你经常重绘窗口的所有内容，比如平移和缩放，使用矢量可能会很慢，因为他每次都需要重新计算每个矢量。

**编辑：**

您应该始终将椭圆转换为路径。我们的团队做了很多性能测试，Ellipse 可能是最差的。在 Blend 中，右键单击 Ellipse，您可以选择：转换为路径。如果您只想发布椭圆，我会给您路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:10:32.833

我认为 [http://en.wikipedia.org/wiki/Vector_graphics](http://en.wikipedia.org/wiki/Vector_graphics)

或多或少总结了使用基于矢量的表示与位图的优缺点。

表示为矢量的图形可以缩放，并且通常是最紧凑的表示。

如果您使用某些图像处理对图像进行矢量化，您最终会得到很多矢量，其中一些可能只代表一个像素 - 您可以获得非常大的矢量表示。

然而，形状的内存需求取决于其复杂性，而不是像素大小。

因此，如果您将复杂形状缩放为图标大小并且从不将其显示得更大，则最好使用位图格式。

# python - __init__.py 中的单个文件名有助于 django 项目 @readthedocs.org 的拆分设置管理

> ID：11360566
> 
> 赞同：0
> 
> 时间：2012-07-06T10:36:06.327
> 
> 标签：python, django, django-settings

[https://github.com/rtfd/readthedocs.org/tree/master/readthedocs/settings](https://github.com/rtfd/readthedocs.org/tree/master/readthedocs/settings)

[我从https://code.djangoproject.com/wiki/SplitSettings](https://code.djangoproject.com/wiki/SplitSettings)到达上面的链接。

有人可以解释该特定配置是如何工作的吗？`settings/__init__.py`特别是，仅包含特定设置文件（在本例中为 postgres.py）的名称所发挥的作用。我试图对我的项目这样做，而 django 抱怨找不到合适的模块，那么它对 readthedocs 是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:30:41.650

他们的所作所为实际上很糟糕。`__init__py`在这种情况下是一个符号链接到`postres.py`. 当您在 github 上打开它时，它只会显示它指向的文件，因为这是强制显示时符号链接的外观。这与只是自己创建文件并添加带有文件名的行不同。

但是，实际提交符号链接并不好，因为它们不适用于所有操作系统。此外，这里的重点是允许您在 postgres 或 sqlite3 设置之间切换，但是如果您删除`__init__.py`并创建一个新的符号链接，`sqlite.py`您实际上已经更改了源代码（因为它已提交），并且您不会无法在不恢复到原始`postgres.py`符号链接的情况下提取新更改。

但是，`__init__.py`必须在那里，否则 Python 不会将其识别为模块。他们应该做的是：

```
# __init__.py

from local import * 
```

并且，然后创建一个符号链接到他们想要在`local.py`. 那么，该文件不会被提交，也没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:08:13.930

在这种情况下，`settings/__init__.py`它不是一个有效的 Python 模块，因此很明显它是一个指向`settings/postgres.py`.

wrt/`__init__.py`文件，它们是 Python 用来将文件夹视为 Python 包的标记（参见[http://docs.python.org/tutorial/modules.html#packages](http://docs.python.org/tutorial/modules.html#packages)）。该`__init__.py`文件是在您导入时导入`import mypackage`的，就像它是一个模块一样。

# google-api - Google 查询 URL 所需的最低参数

> ID：11360567
> 
> 赞同：2
> 
> 时间：2012-07-06T10:36:10.003
> 
> 标签：google-api, google-search-api

我已经搜索了一段时间，但没有成功找到 url 中搜索字符串所需的最小 google 搜索参数。

现在，如果我想为关键字 hello 创建一个搜索 url ...我需要：

```
https://www.google.com/#hl=en&output=search&sclient=psy-ab&q=hello&oq=hello&gs_l=hp.3..0l10.3385.5629.1.6345.5.5.0.0.0.0.168.445.4j1.5.0...0.0.qSMjvq4fR4M&psj=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=853bac6d7e512bb7&biw=1440&bih=710 
```

更新：上面的 url 有效，但我需要将其分解到最低限度，以便我可以将自己的字符串放在一起并构建自己的直接 url。

有谁知道在 google 中搜索工作 hello 所需的最低字符串是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:40:19.870

一个简单的

```
https://www.google.com/#q=hellooo 
```

似乎对我有用。

# jquery - symfony2 和 jquery $.post()

> ID：11360573
> 
> 赞同：0
> 
> 时间：2012-07-06T10:36:42.260
> 
> 标签：jquery, symfony

`$.post()`当我使用 jquery和函数时，如何在我的 symfony2 控制器中获取 post 参数`serialize()`？

假设我有这样的表格：

```
<form id="formSuppression" method="post" action="#" name="formSuppression">

<input id="form_raison_0" type="radio" value="0" required="required" name="form[raison]">
<input id="form_raison_1" type="radio" value="1" required="required" name="form[raison]">
<input id="form_raison_2" type="radio" value="2" required="required" name="form[raison]">

<input id="form_annonce" type="hidden" name="form[annonce]" value="113664890">

<input id="btnSupprimer" type="submit" style="float: right" value="Envoyer" name="btnSupprimer">
</form> 
```

和 jquery 函数：

```
$("#formSuppression").submit(function(event) {
        event.preventDefault(); 
        var r = $(this).serialize();        
        var url = $(this).attr("action");       
        $.post(url, {
            a:r, 
           }, function(result){
            alert(resul);
        }, "text");                
    }); 
```

控制器：

```
if ($request->isXmlHttpRequest()) {                    
               $id = $request->request->get('a');
                ... 
```

使用该控制器，我有类似的东西：`form%5Braison%5D=2&form%5Bannonce%5D=113664890`对于`$id`变量

但我想要“=”符号之后的值。如果不使用控制器中的任何其他 PHP 函数（如explode、substring...），我该如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:48:25.433

尝试这个

$FormData = $$request->request->get('form');

这个 $formData 包含您提交的所有表单字段值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:51:05.320

```
$.post(url, {
        r, 
       }, function(result){
        alert(resul);
    }, "text"); 
```

将其更改为

```
$.post(url, {
        r, 
       }, function(result){
        alert(result);
    }, "text"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:46:39.830

在 jquery post 方法的 params 参数中，不要使用 {a:r} 而只使用 {r}

```
$.post(url, {
        r, 
       }, function(result){
        alert(resul);
    }, "text"); 
```

然后在控制器中

```
$form_value = $request->get("form"); 
$raison = $form_value['raison'];
$annonce = $form_value['annonce']; 
```

# c# - LINQ to XML - 更新节点并将其保存到 XML 文件

> ID：11360574
> 
> 赞同：1
> 
> 时间：2012-07-06T10:36:43.690
> 
> 标签：c#, xml, linq-to-xml, save

我有一个 XML 文件。我想对其进行更新（添加一些节点）。以下是代码的外观：

```
var xmlDocuments = XDocument.Load(filePath);
var documentElementToEdit = xmlDocuments.Element("Container").Element("Documents").Elements("Document").Where(x => x.Element("GUID").Value == GUID).FirstOrDefault();
missingIndexData1 = new XElement("IndexData");
XElement indexData1 = new XElement("Name", "somename");
XElement indexData2 = new XElement("Value", somevalue);
XElement indexData3 = new XElement("DataType", "3");
XElement indexData4 = new XElement("CreationTime", DateTime.Now.ToString("O"));
XElement indexData5 = new XElement("CreationTimeUTC", DateTime.UtcNow.ToString("O"));
missingIndexData1.Add(indexData1);
missingIndexData1.Add(indexData2);
missingIndexData1.Add(indexData3);
missingIndexData1.Add(indexData4);
missingIndexData1.Add(indexData5);
documentElementToEdit.Element("IndexDatas").Add(missingIndexData1);
documentElementToEdit.Save(filePath); 
```

这样做是它仅使用此文档节点覆盖原始 XML 文件。如何更新原始文件中的文档节点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:39:22.653

> 这样做是它仅使用此文档节点覆盖原始 XML 文件。如何更新原始文件中的文档节点？

您需要保存整个文档，而不仅仅是更改的元素。当然，这将重写整个文件，但没有简单的方法可以解决这个问题。

```
xmlDocuments.Save(filePath); 
```

# django - 你的想法 ？！...“django-mptt”是否适合这个课程结构系统？

> ID：11360582
> 
> 赞同：-1
> 
> 时间：2012-07-06T10:37:05.867
> 
> 标签：django, django-models, tree, hierarchical-data, django-mptt

让我们考虑一个学习管理系统的课程结构（称之为在线学校）。

我们有这样的事情：

```
Course 1
    Topic 1
        Sub-Topic 1-1
        sub-Topic 1-2
    Topic 2
        Sub-Topic 2-1
        Sub-Topic 2-2

Course 2
    Topic 1
        Sub-Topic 1-1
        sub-Topic 1-2
    Topic 2
        Sub-Topic 2-1
        Sub-Topic 2-2
    ... 
```

例如，我们有**“数学1”的课程，** “**线性代数”**的主题和**“线性方程”的子主题**。

重要的一点是我们可以为这些节点中的每一个分配一些**内容**和一些**测试。**

现在 django-mptt 出来了：

1）我需要在导航栏中填充课程树。我想这应该很容易和微不足道。你有什么想法？

2）也许我想同时**指向**一个测试`Sub-Topic 1-1 in Course 1` **AND** `Sub-Topic 2-2 in course 2`。它不会***破坏***树木的理论吗？好吧，我相信它们不是树的一部分。它们只是**指向**一些节点。你怎么看 ？

提前感谢您的回答..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:51:24.237

只能回答第2点对不起。

关于理论，您所描述的不是树，而是不再是树的 DAG（有向无环图）。

然而，许多建立在 django-mptt 之上的 CMS 以这种方式解决了这个问题（感谢 django-mptt 能够处理森林而不仅仅是一棵树）：

*   他们会将共享节点（您的案例中的测试）放在单独的树中。
*   共享节点将在树中的位置，在您的情况下，在子主题 1-​​1 和 2-2 下方，它们添加了某种虚拟节点，其唯一作用是指向另一个节点，该节点包含您的测试案子。

这很像文件系统上的符号链接。

然后你可以在一棵树上做所有事情：

```
Fall semester 2012
  Course 1
    Topic 1
      sub-topic 1-1
      sub-topic 1-2
    Topic 2
      sub-topic 2-1
      sub-topic 2-2
    Test -------------+
  Course 2            |
    Topic 1           |
      sub-topic 1-1   |
      sub-topic 1-2   |
    Topic 2           |
      sub-topic 2-1   |
      sub-topic 2-2   |
    Test  ------------+
  Tests               |
    Test 1 <----------'
      Part 1
      Part 2 
```

或使用几棵树：

```
Course 1
  Topic 1
    sub-topic 1-1
    sub-topic 1-2
  Topic 2
    sub-topic 2-1
    sub-topic 2-2
  Test -------------+
                    |
Course 2            |
  Topic 1           |
    sub-topic 1-1   |
    sub-topic 1-2   |
  Topic 2           |
    sub-topic 2-1   |
    sub-topic 2-2   |
  Test  ------------+
                    |
Test 1 <------------'
  Part 1
  Part 2 
```

# objective-c - UIView drawRect：增强现实应用中的性能

> ID：11360599
> 
> 赞同：0
> 
> 时间：2012-07-06T10:38:06.923
> 
> 标签：objective-c, performance, uiview, drawrect

我现在正在构建一个增强现实应用程序，但是在 drawrect 上遇到了一些问题：我的 UIView。

首先，我将向您展示我的代码：

```
- (void)drawRect:(CGRect)rect {

CGContextRef context = UIGraphicsGetCurrentContext();
for(AREALocation *loc in self.locations) {
    CGContextSetLineWidth(context, 1.0);
    CGContextSetRGBStrokeColor(context, 0.0, 0.0, 0.0, 1.0);
    CGContextSetRGBFillColor(context, 0, 0.373, 0.659, 0.5);
    CGRect frame = CGRectMake(loc.point.x - 15, loc.point.y - 15, 30, 30);
    CGContextAddEllipseInRect(context, frame);
    CGContextDrawPath(context, kCGPathFillStroke);

    CGSize textSize = [loc.name sizeWithFont:[UIFont fontWithName:@"Helvetica" size:14]];

    CGContextSetRGBStrokeColor(context, 0, 0.373, 0.659, 1.0);
    CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);

    CGRect textRect = CGRectMake(loc.point.x - textSize.width/2.0 - 4, loc.point.y + 20, textSize.width + 8, textSize.height + 2);        
    CGFloat radius = 5.0;

    CGFloat minx = CGRectGetMinX(textRect);
    CGFloat midx = CGRectGetMidX(textRect);
    CGFloat maxx = CGRectGetMaxX(textRect);
    CGFloat miny = CGRectGetMinY(textRect);
    CGFloat midy = CGRectGetMidY(textRect);
    CGFloat maxy = CGRectGetMaxY(textRect);
    CGContextMoveToPoint(context, minx, midy);
    CGContextAddArcToPoint(context, minx, miny, midx, miny, radius);
    CGContextAddArcToPoint(context, maxx, miny, maxx, midy, radius);
    CGContextAddArcToPoint(context, maxx, maxy, midx, maxy, radius);
    CGContextAddArcToPoint(context, minx, maxy, minx, midy, radius);
    CGContextClosePath(context);
    CGContextDrawPath(context, kCGPathFillStroke);

    CGContextSetRGBStrokeColor(context, 0.0, 0.0, 0.0, 1.0);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 0.0, 1.0);        
    [loc.name drawInRect:CGRectMake(loc.point.x - textSize.width/2.0 + 1, loc.point.y + 21, textSize.width, textSize.height) withFont:[UIFont fontWithName:@"Helvetica" size:14]];
}
} 
```

AREALoctions 是一个类，它包含`"Point of interest"`屏幕上的特定位置以及有关名称等的更多信息。

问题是，`[setNeedsDisplay]`必须每 1/50.0 秒调用一次 UIView（我使用 NSTimer 来执行此操作），以便在移动设备时显示点。尤其是当数组的大小增长时，`drawRect:`速度非常慢，因此会出现滞后。

你有什么提高性能的想法`drawRect:`吗？也许更喜欢 CALayer 而不是 UIView？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:47:32.930

不能确切地告诉你在那里画什么——但是，是的，经常调用 drawRect 会导致严重的滞后。为每个元素“整体”创建一个自定义 UIView，然后仅在需要时移动它们/更新文本等。

当然，这完全取决于您所绘制的内容的性质。

# php - dompdf 不显示 PHP 文件生成的图像

> ID：11360603
> 
> 赞同：4
> 
> 时间：2012-07-06T10:38:37.060
> 
> 标签：php, codeigniter, dompdf

我正在使用 dompdf 生成 PDF 文件。在文件中，我包含了一个由 PHP 通过使用动态生成的图像；

`<img src="image.php" />`

当我查看该页面时，我可以看到一条错误消息“找不到图像”，它链接到据称未找到的图像，当您单击它时显示正常。

我尝试向生成图像的页面添加 .png 扩展名，但这没有任何区别。我还将生成的图像保存到服务器并链接到它，它工作正常。

我能想到的解决此问题的唯一方法是将图像保存在服务器上，然后链接到该图像。理想情况下，我不想这样做，所以我想知道以前是否有人遇到过这个问题，或者是否有人能想到解决办法。

我正在使用的 dompdf 版本是 0.6.0 beta 3，我将它与 CodeIgniter 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:38:58.637

您如何将 HTML 文档加载到 dompdf 中？`$dompdf->load_html()`? `$dompdf->load_html_file()`? 要访问 PHP 生成的图像，您应该使用后者。此外，除非您通过 Web 服务器加载文档，否则 dompdf 将获取文件本身，而不是呈现的文件。由于 image.php 不是有效的图像类型 dompdf 将无法加载它。

有两种解决方案：

1.  通过您的网络服务器加载您的文档，例如`$dompdf->load_html_file('http://example.com/mydoc.html');`. 当您这样做时，图像参考将被解释为`http://example.com/image.php`.
2.  使用完整的 URL（包括域）引用您的图像，以便您的服务器在将其发送回 dompdf 之前对其进行处理，例如`<img src="http://example.com/image.php" />`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-04T21:31:51.350

首先添加这个标签`img src="image.php"`，你需要指定你的图片所在的完整根目录，所以它大部分以JPG或PNG等所需的格式结尾，并且在配置文件（`dompdf_config.inc.php`）中你需要更改这一行`DOMPDF_ENABLE_REMOTE`，他的默认值为 false 将其更改为 true ，仅此而已:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T17:46:28.960

您可以使用支持的 Base64 图像数据作为替代方案

```
$html = '<div>
    <p>IMAGE</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABMCAIAAACnG28HAAAABmJLR0QA/wD/AP%2BgvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH1AgeBS42B7vBqgAAEhBJREFUeNrtnd%2BPHEcVhfcfBoknxAOIh0g88EsIIqKI1UprObYVe23FwQmskO0EYSskkCgkEo5MCMgoGBABhBDkIXzV3%2Byh6Onu6ZnZ2Zm1u1Qa9fb0VFfdOvfcW7du9%2B59NpWpbKDsTSKYygSsqUzAmsoErKlMZQLWVDZeHj3%2B67vvf/DSjZcODy/%2B9N5bH374O85MwJrKWpACT/vPfe%2B5Z5/97re/8cxXv/L1rz3DwcEPngdhS8FrAtZUZgWWuvHiJcBkBVugivrlL30RbB0eHLx5784ErKksUWCj6zd/DHqAEZD6wuc/x8GNo6uvvnLLPwGZZnEC1lSWsH1CSnKyiq3LV657Ust45dLFCVhTGVXACoiJOyWe8LHEmSdfu3NbK7krphBtgDzp0zR/uynSt3/xJl65AKLKVaDq4YN3WQny%2Bdrxy5cv7MNb1KXs4AaBRc/UhqX4cyrDnhCOjjhgptfHKI3IVVR569Wb1/78x0f1ZWCL88BrKbraFLAgT/CkNkzAOi2uCqqs6/AWremtp7Log8D%2B/emnrSvhLSC1LKo2AixFoD8ItQIv2GtCxvp0VTvXiHcdqbLcC6RwzJkjUTUPLI1Pi8a2Ayw6gaMXKbBqBfUTMtYsPzq%2BG08IF3sdYIFRHCmNIKjieAVC2gKwGLBeocCi6whlQsb6RkBPKLGAldUV10qMGlXHi9pEn08fWFAUfhXunr0HYRDYClw6lRpYiLQ2hQh22WVaC6OGFZisDU3N6QMLDaC7ki0uIeZ8ijisDyzE6GIo2GKFtEJT%2BOz8lnZ0rTbnpZw%2BsDDYAAvG0n%2BffKz1S4lPHl3Vu8AOruy8S1dx/7Ekm%2BvzBhjrzu2oFxXSegrtIFNo8slptebGi8DSxwJYnYu44RWAnKd3hSt8noDFgI3YylhQ7kYHsGvUgutDRbtgbkTBGfVqHe0CWDAWKiosXBsuuySiJ86IaTBM0EYVfm8Twi2kdfOaw8DZWs0bOHcFGDHZKBKONkNGnUAYxyCM84hFyawWJsAIACwhlbSWpRKkErsCVTS1ocXgqQELYSFBPiMvIEXFfkvd5og9DVwFaJgwgcUB3gxjRxRMP9gqJw8vMrsYtWUTMrkeaBp5j/PO8XjKYXYuX7lOf6iJiO4osPQhkKYsTeVPrD49dksnOWJPPGMxcGadITNnVNDDkJMj4CauAikr5cOLLM24YAy83B%2BkmsHilk4ChOPJL0FRezhgB51WWrZ6Jp/1ZacMLG9MR8ETyocmISM6ypgRKF3hJFUfa6nxOxJNhgdb9LuXWqww8abzFhAcHMBS2kGEAHPzybclntdooJeBswHOkKLkmGRyBlL672XP%2BJVb4912usHd458AbmuSF6ia8mxH6iLzSTf4oV2iemD/6Wrn/O6toJ2aOW42k2YjShMZEFlR2ZvXSip%2B42xyfgxEVPE4Afyc1pbNs14fUnT14YN3A%2B5RJubCPl1ljvkEOoh7ngw4w/lco6D6RqdyImQFIra0X5wxpZPKwch4AQ26Tk%2BSTNDZqn3n/cpbJ0Ir9eqxzQ95OWDRxYLxkxVftgXMkPFYgDsGBIFAF4JDolYvNRY2qM%2B7vp1a2AEukGPMduKTP8cAy0cP6HCBQoOqgYsLtnBAGzeLWl9cBw6iVCYg6E4IMs4HWMhqpHAYSCDVh5sxNZAKn4FsRsQ6YHVgaafqXAvgRaOCLGk9iQ4HeXDmwhminYAy9IsetKS/Ylzt%2BGUmfrgPBggcnQZoTGobfXOMdBgRj4kDF5f0xUsynG6WOQUCywi7Bitg0k%2BP255pljMWylbrNkBFnYyV9UFCskJKh0fLiCIxlr4O7I20EfRP60brrf1wBCq8vHEQrX5wfnjxwvSE8OpURj3NdRx/WgYfwEUPuk8E6gw3MrPbboxZc%2Bity1gjyYMuCSyxVQMr6Ubqlaprl2orlulX2n3oT%2BxjmH4SFcs%2BT3ysaHgsieRE/0NRAzO7N9Ka6HUiRK1bJ%2Bu4qVlvaTEA/hy4vaE/fbUAK7lc8lbfnA0YOL9i8kLdzGIf%2Bem0mk4pT4iVYcZKvNHJGOkL0gfDEGipZldUgQOjCXmmTzAhVfQWAcZbiGAV1HwnvUWfI1VvCgliJOyQuZ0ROHBDhTtoiurBsvtyeyPpKls0A7k76mISHR0DEhzYeWC%2BXf3q9TMeBpDgqiOHctTs1rwCBaQwj1o1lftGv3XXOkPVZpGrM67gCsM3JC%2Bj9PWc66P3/HykuPWf4u%2B7LcNYolc6UjTeyhLWSuq81wZrHlj0vH7YZp6iTGwPdBC4Se6nG4jfGxWaO7H6w8sQembcIT4BUkBMfTYIgSrEJFwLIG1riQ438TANTQ0soVPWI4cXW0B3kW/QSAIID80nSZs6xmQbfNLvKUGBJm7E%2Bb6eM1K9n9Dh2AX10VUDyPGxuIU%2BUFZCfQnmDM2u1gvDeXut6aj99NrpLl7Bhf0zSAtYzFiJrTGRCy9m%2BhlqGMsVYqezopSpSopZj8YgVnEgjZkqGF%2BEmYhj28pTM28JROpdImLuwidnuFErJmlwAQCpNgafjAWI2oGlg3ZwZqxHeNAWqJfGaZYBIlVm1ycaYvcl74GbcnHNQ/M7hsgQgegDBHy6xdK/wD2D2M3eMF0Z%2BdXej0lgldjVmFnc%2BcJ%2BJ7CQiHbdAbccqZJ700TLbIc%2BIDKBRZc8qRaGROP8JhjGDHEXLqDyFcdxlrkdf7oE0wjSfon33LwmNAV93xzbtxmLH10dE84w5KPCcGujMHw6Rs3TcNRUz8Gn/5KhAExb14BXuuQ1RmWZAsMis0SmTWbLjAKWCyUty8g9y%2BL6Nb/SXTDKPG8p9FXjqM5fYOK8sFPiwUSdsl2LyTBB%2BEb3qzAWNq4Ji3ClJpW7a%2B9KmKBZOkiW5mX4fJGbfX3%2BuxbfaOcYYKlsVCOfCTQUvT04CLWDieFMGDPfW4v/vvCNN9KdUM7zHL8FYM3oCt1F40cn67nPkzBptjJi5lrgKM9Ddpn8YlKPX3YdpDjyGEnCE9ISkhVAQiE7/16vz6TLrGlzf9OMA7uXuxsf575uJIubedAYbRf0C/dVwlXJpzXBQUPM%2BcT/Mt8D2DL/s14YdmYlMZCEA9x%2BVoddIpzN1u3egGuFFAqRsvgah3F3LeQS5WgkpvafamA5VC7rbM0ncd3ZqJdIkpCkqF4ar6LGC6bb3ggACQK7YdTbQRkkaw2Nm2o15C1JrtUx2oz2c%2BVAVMLN6YQP1KJoiLLStVqouuq5tJegA8clTD2IbLfgEhJDOGeTHrc3HCPWYI3xrspyrPFD9cQ17fEW494qU9lCJ4wr%2B1ZeXIaO8ll7x3r9%2BkbaIykhe5dBYRaYTqr%2BU1ntN6gquwJzm/wGO0r/T%2BLjncAKgnXd%2BhxtWVkfDgRrlAWWK2i9BaNHC%2BOIrhaTOaLrSUUaA6sH7b6rb0e9ZWDp9srhC7tiKpIKoVK6wgqw9B7qELPIkDY6H5XkJ1HomhXcUpXJZslPjc8emqxVX7eJani9cFvjHrlQ6iQJJs98Ms1Wa6u4LLuaZW/SBFrus8sCjY6m1uWLNSrqKwjUDUfR56gZ8TGU6Ps53EuVvdSBAdbUjMSdXee5sdMBFjSQVdsAY%2BmySFEGymfT2Tg38YSCnpnvfLKtUczcyc5Gi64Uh3vSLaGL2gA3gdAS15kzbcWkNvgwwm7OxfyVLRNsCqjOQEhLdPpkW%2BJkIs8tFLXFITt2ac90j1o/pcawKVci8M5sC8677SEEdf%2BL2jdRXBclA7FcA3XZh90ysLTojFzvpLZl2Ycya0Kzkuf/Y1nqxUhc7HjfmhsbT4ZgeEtcZs9h3lYmcFrvznaaNt%2BaYgJnsppokzN9gWaBZbw0mTBJLEYstY8l6MNhMTeJoRfao7Vml62tkM2TATOfr0GYgdmkScnrehQ2aMTcZY2LviTh9FlDlbAG1jZNoeKT0rPg15thwFKFU5X95pbgijfQCE49Q76xhrNlQWPLdD%2BNMKn3Sjy8zQXzInNhmFBWNs46sWJ%2BFX3OLiRtDguFn8y8sWaHx/18408mQWjCXM0Z6w%2BHJS1OMvaNGvMkobdk1fKaEpP9YF0ILZ0%2BiUEfV3yCVehnd6jTTy2W/YT7Hf42gaWW64zXxF7vtCdVpnMDUV9EWjLiYAacjCWN%2B21B6ouXCi9euY4IkpI6sHuvnxGuEit99lr%2By17nsGWv49euSSWtbPjotImA2YMJTQA5cTW9LgMcbn32EYlEWGxis1Zl4EJZUIokCYnPFsVKq2aBa4s7TaGzEGLTnm7Zx8quZ5IY67fehPMHNp7UlfrJVYGl7chDrUJqFoY9ySM1ublvIS1jOZ3GlwcCImptYuUjQycMKhPPb%2BlPFm609r9XvjZ%2BNOThOlHJFG%2B9mfWBbV3xBJhMBcvuoV6dPCSk%2Bp6oCefp2psU2eItlcoFPkNQu7a8KtQqaQVmWUcnK/zZY/%2BL3h0oM%2Bmc%2BvM6yCn/S/KumRNechEwMH4DV/bBXaPhnXlR4n7%2ByD18hu/mvxsv9DZzxu2yVhBJySQ2rDCSEvQWXCrWXp0UyHmaNW1maJHRtFCEeXQVbLUuFlh5Rmj7prAm0iAgzwUMjLaTWuoHDF0AhrRUUF14HVWnanjwyqt4xE2Ec2RnVkgL6Uxniyl0R8V8qQS7l21/9lLGhqv09JMOZcvDChMfrk9t3PBOFslOAKveHzBfZ1nZmTCZJz2SgWToUt/CBZGU5kpnx1/URs/jC%2BPIn8rTRAh2IYwG%2BtM3NbNNqsbZjU%2B8ibdhrQKsNeXlO0KCmzqyYMRSnVstTXGLwNLp3PG3f81sTpPEoU%2B88mtqdgtYWWGZI%2BourJ6m/6Tls3NYDN9nM3TH30yBxuq2J8D2JDBW7cW7gNLY%2ByjiOX0LjY5jWf1duT7m2bKt9zbeyCzi%2BGQwVgxicjtdBJ3Tl2aVvaYmJd8IPmSw46%2BVE1h5%2Bqi8FXbriX6nji3reX%2BJcr1d2PmczA7yax58op7NC9Knf3myuo8lsOY3j7dV/vaX33eqgYHuAGv7Oe%2BbLv9pyjmC1L/%2B8fizk3wBfWEfpdTN%2BvV7b3gZB1QvbhXO//bhr6he/M5br99//ZiDV2/d%2BuFLR9Y7xzdblZNewDHXW/ktP/T47u2fcMy3nrHlAEsfK9aQP89A7Htno0ZKWYkzZgSBmC6/UNwuKsdKCol//OjhhvQ4srYznPcr7uhNc96Tdphf%2BUOmzQ7X%2BfjuRzF53/nWN1t1//nvOzqrZ6jzV/pV5/lTqebz5Mk8jsWroIxknJ3UWv9XARaT6nTWRNqpbZ18GwWKxuSgFmuT13dQiy9S7pQp1zuLN66%2BoAjqe1Gjzd6OUXBlKj8cnsXWtxx7uzETbHCIAZl6kMwCSOXo2g3asTJeqs36Z0TBZV55fHzbevfuz/ikEQ6ohRffef/%2BvfvUN37%2BNn%2B%2B994DD7wsLdgsB/xJB%2BoGvSxvXM7CsESk9/9vUjpHna9ovJatxCnXRlfn6WCvT3y06KS2MMTJ8WrnADJmRqt0WgWp/eajj5WmIuYnSyklN6qPlbhC8e7MEI1zd9oXAV7g9NfVn1jpCT9Jn%2Bkk1ciccSwfIm2FsmLic/DJ3/9JzQUcO941WYFf1c32LTWSXG%2B4QR/rwQcfRfKP//TJoz885jjIZuCZMpCEKLQwHMi%2BfVUuoBZgpRO0wgTQHE0MTyRTwj1UC7tIz2yEA8/U8lrTqNMglQkGHAqCT44Ljf/yHaXDBc5WLeu%2B%2B7bmtXVmeLZkLJPJ9F12/JWFyZrMI0wLF%2Ba13BR%2BJhdBCUFORlelTzVWftlbKHd/Xxjr3n0xvlD0T3zx8cPkbox/GHpry9iT51zM7dloEFHkTeGG1UNZeQ7Ct07sbG/zTpe8nOgMgroTsFYpeSWOby7Z8ZCvGbnZK5yAtdPAmqV9jk5N22LxscRkZpfHIauHhH0v5gSsXSlmUJ2L7Skjunn/Vt447MtRzKKegDWVVTzCkpJ1eDGvfjRb32f4NmTKJ2A9FcWnhvKWnrwrS4RtYh99AtZTUcqLSU8eAa/fpy17TYw1ldWtoW5W3ouc9yX3vZRlAtZUFhcfi8q/PMlrz/2/hxOwprKWNfTB2sTfh9%2BBPQFrKmOtoU/x5%2BVQG32qYgLW00Va/vcb/z3nRu81AevpKr5tYPi9EhOwprK7ZQLWVCZgTeX8lP8CuDenorrKqfIAAAAASUVORK5CYII%3D">
</div>':

require_once('dompdf/dompdf_config.inc.php');
$dompdf = new DOMPDF ();
$dompdf->load_html ($html);
$dompdf->render ();
$dompdf->stream ("Test.pdf", array ("Attachment" => false)); 
```

从base64中的php获取图像：

```
//getIMG.php?data=1&id=123
if ($data == 1) {
    echo "data:image/".$adj->type.";base64,"
            .str_replace ("\n", "", base64_encode ($adj->imageBinary));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-06T13:33:55.407

```
<?php 

 //Use this code to convert your image to base64
 // Apply this in a view 

$path = base_url('images/your_img.png');// Modify this part (your_img.png
$type = pathinfo($path, PATHINFO_EXTENSION);
$data = file_get_contents($path);
$base64 = 'data:image/' . $type . ';base64,' . base64_encode($data); <br>
?>

// using image tag that will output to the browser.

<img src="<?=$base64?>" /> // This will output the image in pdf to the browser. 
```

# asp.net-mvc - 使用 mvc3 在全球化中传递带有消息字符串的变量

> ID：11360608
> 
> 赞同：0
> 
> 时间：2012-07-06T10:38:54.933
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在为全球化定义资源文件中的键时遇到问题。我想显示这样的消息“你好'xyz'。你成功登录你的用户名是'UserName'，密码是'412341'”

对于这个任务，现在我需要定义至少 5 个键是资源文件。这些是我传递不会以特定语言更改的变量的任何方式。

```
@Resources.Hello waheed   @Resources.Msg @Resources.UserName xyz @Resources.Password 1234 
```

我想在单个消息中执行此操作，例如

```
@Resource.Msg(user,username, password) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:52:37.740

在具有值的资源文件中定义“MessageString”键：

```
"Hello '{0}'. you are successfully logged in your username is '{1}' and password is '{2}' " 
```

并像这样使用：

```
String.Format(@Resources.MessageString, user,username, password); 
```

# javascript - 从滑块输出制作 JS 公式

> ID：11360609
> 
> 赞同：0
> 
> 时间：2012-07-06T10:38:55.883
> 
> 标签：javascript, slider, formula

我确信这可以通过 JavaScript 实现，但我无法通过搜索找到我正在寻找的确切内容，而且我的脚本技能非常差。

我在一个页面上有 3 个滑块，它们将它们的值输出到 3 个单独的 div（带有 id 成本、长度、收入）。我想要一个公式来获取每个 div 的内容并给出最终结果，例如`result = (income-cost)*length`在一个单独的 div 中。理想情况下，结果会随着每个滑块的移动而更新，但也许“计算”按钮会更容易？

这是[相关页面的链接](http://chestervanmen.co.uk/sliders/sliders.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:55:44.680

考虑您有三个 div，如下所示。检查代码

```
<div id="cost"></div>
<div id="income"></div>
<div id="length"></div>

<div id="total"></div>

<script>
var cost=document.getElementById('cost').innerHTML;
var income=document.getElementById('income').innerHTML;
var length=document.getElementById('length').innerHTML;

var total=(Number(income)-Number(cost))*(Number(length));

//This would give you the total value

document.getElementById('total').innerText=total;//To insert the element into div

</sctipt> 
```

请检查小提琴链接[http://jsfiddle.net/ZKTeu/](http://jsfiddle.net/ZKTeu/)

# sql - MS SQL 根据带有 DISTINCT 的 MAX(ID) 选择多个列

> ID：11360610
> 
> 赞同：0
> 
> 时间：2012-07-06T10:38:57.347
> 
> 标签：sql, sql-server

我正在尝试合并两个查询。目的是获得一个记录集，其中包含唯一的客户电子邮件以及他们的姓名和基于 MAX(ID) 的最新列表的标题。

使用 DISTINCT 我可以获得电子邮件和 ID，但显然添加标题会破坏这一点。

这是我到目前为止所拥有的：

```
SELECT DISTINCT MAX(EV_ID) As EV_ID, EV_ContactEmail, EV_CusName
FROM tblEvents ev
INNER JOIN tblCustomers cus ON cus.CUS_ID = ev.EV_CustomerID
WHERE (
    CUS_IsAdmin = 'y'
    AND CUS_Live = 'y' 
    AND EV_Live = 'y' 
    AND EV_EndDate >= '2012/7/5 12:00:00 AM'
    AND EV_ContactEmail <> ''
    )
GROUP BY EV_ContactEmail 
```

我在这里发现了一些帖子，表明我需要进行自我加入，但我无法让它返回相同数量的记录，但使用标题，它会返回更多。

```
SELECT DISTINCT MAX(EV_ID) As EV_ID, ev.EV_Title, EV_ContactEmail, EV_CusName
FROM tblEvents ev
INNER JOIN tblCustomers cus ON cus.CUS_ID = ev.EV_CustomerID
INNER JOIN (
    SELECT EV_Title, MAX(EV_ID) AS MaxID
    FROM tblEvents
    GROUP BY EV_Title
) groupedev ON ev.EV_Title = groupedev.EV_Title AND ev.EV_ID = groupedev.MaxID
WHERE (
    CUS_IsAdmin = 'y' 
    AND CUS_Live = 'y' 
    AND EV_Live = 'y' 
    AND EV_EndDate >= '2012/7/5 12:00:00 AM'
    AND EV_ContactEmail <> ''
)
GROUP BY EV_ContactEmail, ev.EV_Title 
```

谁能告诉它有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:50:50.453

像这样的东西？

```
SELECT DISTINCT EV_ID, EV_ContactEmail, EV_CusName, EV_Title
FROM tblEvents ev
    INNER JOIN tblCustomers cus 
        ON cus.CUS_ID = ev.EV_CustomerID
    INNER JOIN (SELECT MAX(EV_ID) AS  MaxID
                FROM tblEvents
                GROUP BY EV_ContactEmail) sub
        ON ev.EV_ID = sub.MaxID
WHERE CUS_IsAdmin = 'y'
    AND CUS_Live = 'y' 
    AND EV_Live = 'y' 
    AND EV_EndDate >= '2012/7/5 12:00:00 AM'
    AND EV_ContactEmail <> '' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:19:17.753

```
SELECT e.EV_ID, e.EV_ContactEmail, e.EV_CusName
FROM
        events AS e
    INNER JOIN
        ( SELECT MAX(EV_ID) As EV_ID
          FROM tblEvents ev
            INNER JOIN tblCustomers cus 
              ON cus.CUS_ID = ev.EV_CustomerID
          WHERE CUS_IsAdmin = 'y'
            AND CUS_Live = 'y' 
            AND EV_Live = 'y' 
            AND EV_EndDate >= '20120705T00:00:00'   --- notice the unambiguous
            AND EV_ContactEmail <> ''               --- datetime format
          GROUP BY EV_ContactEmail
        ) AS tmp
      ON tmp.EV_ID = e.EV_ID ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:54:42.670

而不是`distinct`，您可以先排序`EV_ContactEmail, EV_CusName, EV_ID desc`，然后对所有其他列进行分组

```
SELECT MAX(EV_ID) As EV_ID, EV_ContactEmail, EV_CusName
FROM 
(
   SELECT EV_ID As EV_ID, EV_ContactEmail, EV_CusName 
   FROM tblEvents ev 
   INNER JOIN tblCustomers cus ON cus.CUS_ID = ev.EV_CustomerID 
   WHERE (     
      CUS_IsAdmin = 'y'     
      AND CUS_Live = 'y'      
      AND EV_Live = 'y'      
      AND EV_EndDate >= '2012/7/5 12:00:00 AM'     
      AND EV_ContactEmail <> ''     
   ) 
   ORDER BY EV_ContactEmail, EV_CusName, EV_ID DESC -- you can add title also here before ev_id
)
GROUP BY EV_ContactEmail, EV_CusName  -- if you need title in query, also add title here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T11:20:52.530

请将 'inner join' 更改为 'left external join' ：
SELECT DISTINCT MAX(EV_ID) As EV_ID, EV_ContactEmail, EV_CusName
FROM tblEvents ev
left external join tblCustomers cus ON cus.CUS_ID = ev.EV_CustomerID
WHERE (
CUS_IsAdmin = 'y'
AND CUS_Live = 'y'
AND EV_Live = 'y'
AND EV_EndDate >= '2012/7/5 12:00:00 AM'
AND EV_ContactEmail <> ''
) GROUP BY EV_ContactEmail

# matlab - 在另一个信号中找到一个子信号

> ID：11360615
> 
> 赞同：-1
> 
> 时间：2012-07-06T10:39:25.383
> 
> 标签：matlab, signals, signal-processing

假设我们有一个信号，例如：

```
x = [1 2 9 16 18 19 18 16 9 7 4 2 1 1 0 0]; 
```

我们想找到信号的位置：

```
y = [10 8 4 3 1]; 
```

`[9 7 4 2 1]`在这个例子中是接近并且是`n = 9`。

你怎么去寻找`n`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:55:19.833

**回答原始问题：**
要找到*确切的*子向量，您可以使用[`findstr`](http://www.mathworks.com/help/techdoc/ref/findstr.html)：

```
n = findstr(y, x) 
```

**对修改后的问题的回答：**
要找到*最接近*的匹配子信号，您可以使用[`conv2`](http://www.mathworks.com/help/techdoc/ref/conv2.html)：

```
M = conv2(A(:), flipud(B(:)), 'valid');
NA = conv2(A(:) .^ 2, ones(size(B(:))), 'valid');
NB = round(norm(B(:)) ^ 2);
D1 = abs(NA - NB);
D2 = abs(M .^ 2 - NA * NB);
idx = find(D1 == min(D1));
n = idx(find(D2(idx) == min(D2(idx)), 1)) 
```

这依赖于一个将幅度和能量相关性都考虑在内的经验度量。
在大多数情况下，它工作得非常准确。在此示例中，它正确产生：

```
n =

    9 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T11:08:30.570

正如您所说，您需要使用某种成本或似然函数。这是一个 for 循环开始，我会让你自己找到成本函数：

```
x = [1 2 9 16 18 19 18 16 9 7 4 2 1 1 0 0];
y = [10 7 4 3 1];

cor = 9999;
n=0;
for i=1:(length(x)-length(y))

    % Complete this line to check if x matches y at this point
    score = SomeFunctionChecking( x(i : (i+length(y)-1) ),  y ));

    if (score < cor)
        cor = score;
        n = i;
    end
end

display(n); 
```

# c - OpenVMS 计时器精度，优于毫秒精度。

> ID：11360616
> 
> 赞同：5
> 
> 时间：2012-07-06T10:39:27.550
> 
> 标签：c, performance, openvms, benchmarking

我想知道哪个函数在 C 中为 OpenVMS 上的计时提供最佳精度/准确度。

我们有一个运行 OpenVMS V8.3-1H1 的 HP Integrity rx2660 服务器。

到目前为止，我的搜索指向 $GETTIM_PREC，它提供 100 纳米的分辨率，但精度为毫秒。它比这更好吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:59:10.453

从[系统服务参考手册](http://h30266.www3.hp.com/odl/axpos/opsys/vmsos84/4527/4527pro_067.html)：

> 在 Integrity 服务器上，$GETTIM_PREC 会在考虑自系统时间的最后一毫秒更新以来经过的时间后返回系统时间。
> 
> 在 Alpha 上，此服务等同于 $GETTIM 服务，只是返回最后更新的系统时间。ALPHA 上服务的成功完成状态为 SS$_LOWPREC。

因此，在 Integrity 上，它可能优于 1ms 的精度，但似乎并没有承诺任何特定的精度。

`EXE$GL_ABSTIM_TICS`仅提供 10ms 的精度。我不知道任何其他更准确的内部值，也没有偶然发现 V8 的 IDSM。

# java - 什么是“私有构造函数捕获”习语的 Java 示例？

> ID：11360619
> 
> 赞同：9
> 
> 时间：2012-07-06T10:39:47.713
> 
> 标签：java

有人可以通过示例向我解释**私有构造函数捕获习语**并指出我们实际需要/不需要这种设计的地方吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T10:45:59.103

目的是在施工期间获取临时价值。

[*Java Puzzlers*](http://www.amazon.co.uk/JavaTM-Puzzlers-Pitfalls-Corner-ebook/dp/B001U5VJVS/)的解决方案 53 中给出了一个示例：

```
public class MyThing extends Thing {
    private final int arg;

    public MyThing() {
        this(SomeOtherClass.func());
    }

    private MyThing(int i) {
        super(i);
        arg = i;
   }
} 
```

在这种情况下，我们想要捕获并存储我们希望传递给超类构造函数的参数。为此，我们创建了一个私有辅助构造函数，然后我们的公共构造函数调用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-03T15:33:11.503

[Java Concurrency In Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)第 4 章 4.3.5 节给出了一个示例。

```
public class SafePoint {
    private int x, y;

    private SafePoint(int[] a) {
        this(a[0], a[1]);
    }

    public SafePoint(SafePoint p) {
        this(p.get());
    }

    public SafePoint(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public synchronized int[] get() {
        return new int[] { x, y };
    }

    public synchronized void set(int x, int y) {
        this.x = x;
        this.y = y;
    }
} 
```

私有构造函数的存在是为了避免如果复制构造函数被实现为 this(px, py) 会发生的竞争条件。

这意味着，如果您没有私有构造函数并且您通过以下方式实现复制构造函数：

```
public SafePoint(SafePoint p) {
    this(p.x, p.y);
} 
```

现在假设线程 A 可以访问 SafePoint **p**正在复制构造函数的 this(px, py) 指令之上执行，并且在不幸的时间另一个线程 B 也可以访问 SafePoint **p**在对象上执行 setter set(int x, int y)**磷**。由于您的复制构造函数在没有适当锁定的情况下直接访问**p**的**x**和**y**实例变量，因此它可能会看到对象**p**的不一致状态。

由于私有构造函数通过同步的 getter 访问**p**的变量**x**和**y**，因此您可以保证看到对象**p**的一致状态。

# java - 用Java读取文件时如何避免在开头添加一个空字符？

> ID：11360621
> 
> 赞同：2
> 
> 时间：2012-07-06T10:39:51.397
> 
> 标签：java, file, line-by-line

我有几个用 Java 读取的字典文件，在逐行读取它们时，我使用以下代码：

```
 public static void main(String args[]) { 

    try {

        FileInputStream fstream1 = new FileInputStream("de-DE.dic");
                    DataInputStream in = new DataInputStream(fstream1);
                BufferedReader br = new BufferedReader(new InputStreamReader(in,"UTF-8"));

      String str;
      while ((str = br.readLine()) != null) {
         String str_uc=str.toUpperCase(Locale.GERMAN);
          if(hasApostrophe(str_uc)){
              allletters.add(str_uc);
          if(str.length()==3)
              threeletter.add(str_uc);
          else if(str.length()==4)
              fourletter.add(str_uc);
          else if(str.length()==5)
              fiveletter.add(str_uc);
          else if(str.length()==6)
              sixletter.add(str_uc);
          else if(str.length()==7)
              sevenletter.add(str_uc);
       }
      }
      in.close();

    }
    catch (Exception e) {
      System.err.println(e);
    } 
```

但是，它总是在第一行单词中添加一个空字符，例如，如果第一行中包含三个字母的单词，则将其添加到四字母数组中。我怎样才能防止这种情况发生？谢谢。

添加：

这是文件中的几行：

```
Aachens
Aachen
Aal
Aale
Aalen
Aales
Aals
Aas
Aases
Aasgeier
Aasgeiern
Aasgeiers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:43:00.017

**可能是正确的修复**

Java 有两种类型的流：

二进制流 - 这些可以读取任何类型的数据，但是为了读取数据，您必须知道它是什么类型

文本流 - 这里同意您正在阅读文本

你正在做的是打开一个`FileInputStream`二进制流的形式，然后用 BufferedReader 装饰它，它首先由 dataInputStream 装饰。

更正确的方法是首先打开 FileReader，然后用 BufferedReader 装饰它（仅在需要时，性能方面）。

请参阅[FileReader的 JAVA API](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileReader.html)

如果您切换到 FileReader，您的“意外”问题将得到解决（这是因为当您认为以二进制格式存储文件时，您从文件中读取字符串的方式，这意味着 DataInput 期望读取这些字符的“指示”是实际字符串之前的字符串）

**快速修复** 此外，如果您不想切换，您可以随时调用 String 类的[trim](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#trim%28%29)方法。

**另一个快速修复**

使用扫描仪代替您打开的所有流，扫描仪接受文件名参数并打开文件，您可以使用扫描仪的 next() 方法并具有非常高级的解析能力，请参阅[扫描仪](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:50:05.343

**编辑：**这是一个记事本问题。读[这个](https://stackoverflow.com/a/6543595/925202)

利用

```
String str_uc=str.trim().toUpperCase(Locale.GERMAN); 
```

trim() 将删除行首或行尾的空白字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-16T23:11:36.093

根据 PC. 的回答，我可能会建议您将文件编码转换为 Notepad++ 中的以下内容

[![](../Images/cce52af1730c511a26905eb08407f90a.png)](https://i.stack.imgur.com/GkcN0.png)

# google-app-engine - DKIM 签名是否适用于 App Engine 上的多租户？

> ID：11360638
> 
> 赞同：1
> 
> 时间：2012-07-06T10:40:40.103
> 
> 标签：google-app-engine, dkim

[文档](https://developers.google.com/appengine/docs/python/mail/overview#DKIM)说：

> 如果应用程序代表自定义域上的地址发送邮件，则它会在响应自定义域上的请求时对邮件进行签名，例如，[http](http://example.com/) ://example.com/ 上的请求代表 emma@example 发送邮件.com。如果用户浏览[http://appid.appspot.com/](http://appid.appspot.com/)而不是自定义域，则应用程序不会签署邮件。

因此，如果我有一个启用多租户的应用程序，每个租户帐户都有自定义子域，并且在我的应用程序中注册的 Google Apps 用户通过我的应用程序发送电子邮件。在这些情况下是否会签署消息：

1.  乔（通过应用程序）将电子邮件浏览发送到[http://tenant.myapp.com/foo/bar](http://tenant.myapp.com/foo/bar)，
    使用他们自己的电子邮件*joe@tenant.com*作为发件人？

2.  乔（通过应用程序）将电子邮件浏览发送到[http://tenant.myapp.com/foo/bar](http://tenant.myapp.com/foo/bar)，
    使用应用程序管理员帐户电子邮件*bounce@myapp.com*作为发件人
    并将回复设置为*joe@tenant.com*？

[如果没有，除了通过http://myapp.com/foo/bar](http://myapp.com/foo/bar)页面电子邮件发送之外，还有其他方法可以使用 DKIM 签名来处理案例吗？

PS。我已经在 App Engine 应用程序使用的 Google Apps 自定义域 myapp.com（和 DNS）中设置了 DKIM。

# php - 大小超过 2 MB 的电子邮件附件出错

> ID：11360639
> 
> 赞同：0
> 
> 时间：2012-07-06T10:40:42.080
> 
> 标签：php

我正在尝试发送大小超过 2MB 的电子邮件附件。但它给出错误 **“致命错误：允许的 31457280 字节的内存大小已用尽”。** 我还尝试了以下

```
memory_limit =30M
max_execution_time =3600 
post_max_size = 20M   
upload_max_filesize = 20M 
```

在 php.ini file.bt 中它不起作用。

```
<?php
//sending Email using SMTP server
    include "phpmailer/class.smtp.php"; 
    include "phpmailer/class.phpmailer.php";

    $Host = "mail.gmail.com";                       // SMTP servers
    $Username = "YourEmail@gmail.com";  // SMTP password
    $Password = "******";                   // SMTP username

    $From = "YourEmail@gmail.com";
    $FromName = "Your Name";

    ////multilple mail id 
    $str =$_SESSION['MailAll'];

    $arr=explode(",",$str);
    $Tos=$arr;  

    $Ccs = array(
        "CC Name 1" => "cc-email-1@yahoo.com",
        "CC Name 2" => "cc-email-2@gmail.com"
    );

    $Subject ="Project Abstract";
    ///Message Body
    $Body =$_POST['mailcont'] ;;

    $mail = new PHPMailer();

    $mail->IsSMTP();                    // send via SMTP
    $mail->Host     = $Host; 
    $mail->SMTPAuth = true;             // turn on SMTP authentication
    $mail->Username = $Username;  
    $mail->Password = $Password; 

    $mail->From     = $From;
    $mail->FromName = $FromName;
    foreach($Tos as $key => $val){
        $mail->AddAddress($val , $key); 
    }

    $mail->WordWrap = 50;               // set word wrap
    $mail->Priority = 1; 
    $mail->IsHTML(true); 
///// Multiple attachment file pass to $arr by $str
    $str=$_SESSION['DOCFILE'];

    $arr=explode(",",$str);

  for($i=0;$i<count($arr)-1;$i++){
     $mail->AddAttachment($arr[$i]);

}
    $mail->Subject  =  $Subject;
    $mail->Body     =  $Body;

     if(!$mail->Send())
    {
        echo "Mailer Error: " . $mail->ErrorInfo;
    }
    else
    {
      header('location:sendABS.php');
     //   echo 'Message has been sent.';
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:42:21.627

memory_limit =30M 用于整个 php 脚本...变量、对象、常量、数据其他代码调用/包含等等。

为什么它仍然设置为这个？默认为 128M。

# java - 关闭异常流 - 可以假设异常发生在哪里？

> ID：11360642
> 
> 赞同：0
> 
> 时间：2012-07-06T10:41:05.773
> 
> 标签：java, exception-handling, io

这更像是一个风格和挑剔的问题，但我很好奇对此的看法。考虑以下代码（并忽略我可以使用不同的函数来避免该问题）：

```
FileUtils.copyInputStreamToFile(new FileInputStream(f1), f2); 
```

`copyInputStreamToFile`来自 apache.commons.io 并将关闭流。我认为这应该在所有常见情况下关闭 InputStream，因为如果在创建时发生异常，`InputStream`则没有什么可以关闭，如果内部发生异常，`copyInputStreamToFile`那么这个函数将为我关闭流。

`InputStream`但是，假设在中创建和开始尝试块之间没有异常或错误真的安全`copyInputStreamToFile`吗？我在想不寻常的事情，比如`OutOfMemoryError`or `ThreadDeath`。因此，我们可以将上面的代码重写为：

```
InputStream is = null;
try {
    is = new FileInputStream(f1);
    FileUtils.copyInputStreamToFile(is, f2);
} finally {
    IOUtils.closeQuietly(is);
} 
```

那应该是安全的，但你认为有必要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:08:45.893

我认为这取决于您的应用程序是否并发。如果是，您不能假设在**InputStream的创建和****copyInputStreamToFile**的主体之间没有其他代码将运行。

**Marko Topolnik**回答了应用程序不并发的情况。

# c# - 我应该*总是*同步对从多个线程使用的所有双字段/属性/变量的访问吗？

> ID：11360645
> 
> 赞同：6
> 
> 时间：2012-07-06T10:41:22.763
> 
> 标签：c#, synchronization

注意我倾向于编写无锁代码，所以我尽量避免任何类型的锁。相反，我只使用`while(true)`循环，因为我有很多 CPU 能力。

根据[http://msdn.microsoft.com/en-us/library/aa691278%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa691278%28VS.71%29.aspx) `double`变量更新不是原子的。

我担心两个问题：

*   如果一个线程修改字段或属性的变量，而另一个线程**同时读取它，**我想获得以前的值或新的值，但我不想收到奇怪的东西。即，如果一个线程将值从 5.5 更改为 15.15，我希望在另一个线程中有这两个数字之一，但不是 5.15 或 15.5 或其他任何值。
*   如果一个线程已经更新了值，而另一个线程在**之后**读取了它，我想接收最新的、最新的值。我在想*volatile*关键字可以帮助解决这个问题，但似乎不能，因为“Volatile 不保证值的新鲜度。它阻止了一些优化，但不保证线程同步。” 正如这里所说[，c# 原始数组是易失性的吗？](https://stackoverflow.com/questions/11357997/are-c-sharp-primitive-arrays-volatile)

问题：

*   如果没有同步，这两个问题都可能出现，我是否正确？
*   如果你能给我一个简短的例子来证明没有同步它就行不通——那就太好了
*   **我应该如何访问双字段或变量或属性以始终具有真实的最新值？**“同步”能保证“新鲜”吗？最快的方法是什么？自旋锁什么的？

`double`目前我在我的程序中使用了很多`decimal`变量/字段/属性，几乎所有东西都可以正常工作，所以我真的很困惑，因为我经常在没有任何同步的情况下从不同的线程访问它们，而这只是工作......但现在我在想使用`float`“内置同步”可能会更好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:55:12.817

是的，你需要做点什么。`double`并且**不能保证是 atomic**`decimal`，所以如果你不保护它，你可能会得到一个撕裂的价值 - 即你的第一个子弹是完全正确的。

 **回复`volatile`; 没有实际意义；你**不能**有一个`volatile`字段是`double`or `decimal`，所以最简单的答案是：`lock`。

`double`失败是皇家皮塔饼；但这里有一个撕裂值示例`decimal`（注意成功/失败的数量会改变每次迭代，即使数据相同；这是线程调度的随机性）：

```
using System;
using System.Threading;
static class Program
{
    private static decimal shared ;
    static void Main()
    {
        Random random = new Random(12345);
        decimal[] values = new decimal[20];
        Console.WriteLine("Values:");
        for (int i = 0; i < values.Length; i++)
        {
            values[i] = (decimal)random.NextDouble();
            Console.WriteLine(values[i]);
        }
        Console.WriteLine();
        object allAtOnce = new object();
        int waiting = 10;
        shared = values[0];
        int correct = 0, fail = 0;
        for(int i = 0 ; i < 10 ; i++)
        {
            Thread thread = new Thread(() =>
            {
                lock(allAtOnce)
                {
                    if (Interlocked.Decrement(ref waiting) == 0)
                    {
                        Monitor.PulseAll(allAtOnce);
                    } else
                    {
                        Monitor.Wait(allAtOnce);
                    }
                }
                for(int j = 0 ; j < 1000 ; j++)
                {
                    for(int k = 0 ; k < values.Length ; k++)
                    {
                        Thread.MemoryBarrier();
                        var tmp = shared;
                        if(Array.IndexOf(values, tmp) < 0)
                        {
                            Console.WriteLine("Invalid value detected: " + tmp);
                            Interlocked.Increment(ref fail);
                        } else
                        {
                            Interlocked.Increment(ref correct);
                        }
                        shared = values[k];
                    }
                }
                if (Interlocked.Increment(ref waiting) == 10)
                {
                    Console.WriteLine("{0} correct, {1} fails",
                        Interlocked.CompareExchange(ref correct, 0, 0),
                        Interlocked.CompareExchange(ref fail, 0, 0));
                    Console.WriteLine("All done; press any key");
                    Console.ReadKey();
                }
            });
            thread.IsBackground = false;
            thread.Start();
        }
    }
} 
```

关键点；该语言不**保证**. `double`实际上，我希望你会没事的，但是线程引起的大多数微妙问题都是由于使用“我期望”而不是“我可以保证”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:44:10.367

如果你想保证一个代码块在另一个线程操作它之前被执行和完成，用一个`lock`.

您可能很幸运，线程可能永远不会为使用变量而争吵，但要确保它永远不会发生，确保采取预防措施不会造成伤害。

看看这里 - 这可能会有所帮助：http: [//msdn.microsoft.com/en-us/library/ms173179%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms173179%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:53:08.550

一般的答案是 - 应该为所有“共享”变量同步更新。确切答案需要查看代码片段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T11:04:56.557

是的，如果多个线程同时读/写双精度，您需要锁定以确保获得正确的结果。

这是一个失败的例子

```
[TestFixture]
public class DoubleTest
{
    private double theDouble;

    [Test]
    public void ShouldFailCalledParallell()
    {
        theDouble = 0;
        const int noOfTasks = 100;
        const int noOfLoopInTask = 100;
        var tasks = new Task[noOfTasks];
        for (var i = 0; i < noOfTasks; i++)
        {
            tasks[i] = new Task(() =>
                                    {
                                        for (var j = 0; j < noOfLoopInTask; j++)
                                        {
                                            theDouble++;
                                        }
                                    });
        }
        foreach (var task in tasks)
        {
            task.Start();
        }
        Task.WaitAll(tasks);
        theDouble.Should().Be.EqualTo(noOfTasks * noOfLoopInTask);
    }
} 
```**

# wcf - ServiceEndpointCollection.RemoveAt() 错误配置是只读的

> ID：11360649
> 
> 赞同：1
> 
> 时间：2012-07-06T10:41:51.317
> 
> 标签：wcf, app-config, endpoint

我正在尝试修改我的 app.config 文件

我正在尝试删除/添加新的 ServiceEndPoint（Requireemnt 是更改端点地址的能力）

**我的服务**

```
class SVNServerUIService : ISVNServerUIService
{
    public string SetServerData(int portNumber)
    {
                  var clientSection   = ConfigurationManager.GetSection("system.serviceModel/services") as ServicesSection ;

        var endpoint2 = new ServiceEndpointElement
            (new Uri("http://localhost:64445/SVNServerUIService"),
            "SVNManagementService.ISVNServerUIService");

        //This line is giving Error 

        clientSection.Services["SVNManagementService.SVNServerUIService"].Endpoints.RemoveAt(1); 
        clientSection.Services["SVNManagementService.SVNServerUIService"].Endpoints.Add(endpoint2);
        clientSection.CurrentConfiguration.Save();

        return clientSection.Services["SVNManagementService.SVNServerUIService"].Endpoints[1].Address.ToString();
    }

    public ClientCompositeType GetDataUsingDataContract(ClientCompositeType composite)
    {
        throw new NotImplementedException();
    }
} 
```

**应用程序配置**

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="basicHttpSecuredBinding">
      <security mode="Transport">
        <message clientCredentialType="Certificate" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<services>      
  <service behaviorConfiguration="behaviorMetadata" name="SVNManagementService.SVNClientUIService">
    <endpoint address="http://localhost:8888/SVNClientService" binding="basicHttpBinding"
      name="basicHttpEndPoint" contract="SVNManagementService.ISVNClientUIService">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="net.tcp://localhost:8889/SVNService/mextcp"
      binding="mexTcpBinding" name="mexTcpEndPoint" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/SVNManagementService/Service1/" />
      </baseAddresses>
    </host>
  </service>

  <service behaviorConfiguration="behaviorMetadata" name="SVNManagementService.SVNServerUIService">
    <endpoint address="http://localhost:9998/SVNServerService" binding="basicHttpBinding"
      name="basicHttpEndPoint" contract="SVNManagementService.ISVNServerUIService">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="net.tcp://localhost:9997/SVNService/mextcp"
      binding="mexTcpBinding" name="mexTcpEndPoint" contract="IMetadataExchange" />
    <host>          
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="behaviorMetadata">
      <serviceMetadata httpGetEnabled="false" httpGetUrl="http://localhost:8888/SVNService/metadata"
        httpsGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
</system.serviceModel> 
```

如何在 app.config 中更改服务的地址，然后保存。

# css - 我可以注入一个总是出现在现有 div 上方的 div 吗？

> ID：11360654
> 
> 赞同：2
> 
> 时间：2012-07-06T10:42:16.327
> 
> 标签：css, safari-extension

相对 CSS 菜鸟在这里。

我正在编写一个 Safari 扩展，当单击它的工具栏按钮时，会在网页中弹出一个“对话框横幅”（一些文本和几个按钮）。横幅是我在扩展程序的结束脚本中按需注入页面的 div。

问题是，如何设置 div 的样式（或者甚至可以这样做），以保证无论我无法控制的现有网页内容如何，​​它都是可见的？通过将我的 div 创建为`position:fixed`，并将其作为 的第一个子级插入 DOM `<body>`，它在大多数情况下都可以正常工作，无论页面的当前滚动位置如何，它都浮动在窗口的顶部。

但是，它在某些具有自己的标题横幅的页面上失败 - 例如，[http://planet.gnome.org](http://planet.gnome.org)和[http://www.ign.com](http://www.ign.com)。在这些情况下，我的 div 被页面横幅遮住了。调整`z-index`我的 div 没有任何区别。

是否有可能做我想做的事情，或者只是我永远无法预测其他人的网页是如何结构的，所以我应该找到一种不同的方式来展示我的 UI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:43:22.850

好的，事实证明这*基本上*只是一个简单的 z-index 问题，我可以静态解决，也可以使用 @biziclop 的动态方法之类的方法来解决。我以为我在发布之前已经用尽了那条线的调查，但显然不是……部分原因是`!important`我的样式表中的一个杂散掩盖了我修复的尝试。哦。

# c# - 在 ac# Windows 窗体中调用链接的 WPF 用户库控件的许多实例

> ID：11360658
> 
> 赞同：0
> 
> 时间：2012-07-06T10:42:34.133
> 
> 标签：c#, charts, wpf-controls, 2d, graphic

我正在开发一个软件，它收集一堆我想在二维图形中显示的数据。

我用[这个项目](http://www.codeproject.com/Articles/17097/WPF-Chart-Control-With-Pan-Zoom-and-More)来执行它。它非常适用于对该 WPF 嵌入控件的一次调用。

但问题是我需要多次调用它（对于每个数据集），并且我需要将每个实例化对象保存在内存中，以便我可以在我的 C# 窗口中使用 WPF 控制功能（缩放、移动、...）形式。

问题是我在同一时刻尝试访问它超过 1 次时遇到异常（因为我正在调用库）。我收到一条错误消息，告诉我该库已被另一个线程使用...

有没有办法解决/避免这个问题？（我已经测试了很多 2d 图形项目，这个似乎更易于使用并且适合我）

# javascript - Javascript、SublimeCodeIntel 和提示代码智能自动完成

> ID：11360659
> 
> 赞同：28
> 
> 时间：2012-07-06T10:42:37.247
> 
> 标签：javascript, autocomplete, ide, sublimetext, code-intelligence

***是否有使用Sublime Text 2***和***SublimeCodeIntel***设置 Javascript 自动完成的提示或教程？

*   Code Intel 自动完成的限制是什么（包装函数内的模块等）

*   Javascript 命名空间树是如何构建的，当英特尔无法正确猜测代码时，您能否提供手动提示（例如，在注释中给出某种@class my.module.Foobar 提示）

问题是 SublimeCodeIntel 本身并没有描述该过程，并且 Code Intelligence 的原始作者假设您将它与 Komodo IDE 一起使用（我所听到的它工作正常）

[这里](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=7311)也有没有答案的论坛线程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-01T16:21:58.860

我查看了[SublimeCodeIntel](https://github.com/SublimeCodeIntel/SublimeCodeIntel) (SCI) 源代码，我的理解是[lang_javascript.py](https://github.com/SublimeCodeIntel/SublimeCodeIntel/blob/master/libs/codeintel2/lang_javascript.py)描述了 SCI 的能力。该文件的简单 grep[表明](http://pastebin.com/VDNzBEer)它依赖于自己的实现，并且不使用外部 JavaScript 词法分析器。它[试图检查](https://github.com/SublimeCodeIntel/SublimeCodeIntel/blob/master/libs/codeintel2/lang_javascript.py#L316)JSDoc 到某个点，但对我来说，实现看起来更像是一个临时的。

JavaScript 词法分析器似乎没有任何测试，因此很难确切知道它可以做什么，但是有日志记录命令，因此您[可以启用它们](https://github.com/SublimeCodeIntel/SublimeCodeIntel/blob/master/libs/codeintel2/lang_javascript.py#L105)并试一试它的功能。就个人而言，我对 SCI 的体验相当糟糕（对我来说它很慢而且不够准确），所以我会尝试使用更强大的东西——它现在已经过时了，因为问题已经存在两年了。

这不是对您问题的直接回答，它只是一个分析，如果您仍然感兴趣，您将不得不联系作者或在源代码中挖掘更多内容（这很容易，因为它是用 Python 编写的）。

* * *

虽然源代码中有[隐藏的宝石：](https://github.com/SublimeCodeIntel/SublimeCodeIntel/blob/master/libs/codeintel2/lang_javascript.py#L1105)

> `# Everything is JS is an object.... MUMUHAHAHAHAHAHAAAA.......`

:-)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-10T07:53:10.990

这是一个很好的问题。但是，您的答案不是通过这个论坛可以得到的。由于 SublimeCodeIntel 项目是开源的，你最好的资源就是简单地阅读代码。这可能很耗时，尤其是在文档薄弱的情况下，但它最终是使用开源产品的最佳方式。好的（而且，IMO，很酷）的事情是，如果愿意，您可以轻松地为使其成为更好的产品做出贡献。

您显然对 Sublime Text 2 足够熟悉，它是代码完成插件，以至于您可以轻松地提出这个问题。有人可以通读代码并用勺子喂你一个答案，但考虑到你的兴趣，这对任何人都没有帮助，尤其是你。我亲身经历了一些关于 Sublime Text 插件的问题，只是学会了在宣传这个 IDE 的基本优点时幸福地忽略它们。

我期待（在这一点上）看到有人发布一个总结你的问题的列表的可能性——我也会觉得它很有帮助......但是，只有一个星期。它是开源的，因此变化很快。您的问题最终只能在您希望为其进一步发展做出贡献的努力范围内得到回答。

[https://github.com/Kronuz/SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)

# qt - waf : 将编译器标志传递给 qt 的 moc

> ID：11360662
> 
> 赞同：0
> 
> 时间：2012-07-06T10:42:37.667
> 
> 标签：qt, waf, moc

我试图运行一个项目，使用`waf`它使用`boost`library 。为了克服一个[问题](https://bugreports.qt-project.org/browse/QTBUG-22829)，我需要将`-DBOOST_TT_HAS_OPERATOR_HPP_INCLUDED`参数传递给`MOC`. 我尝试在`wscript`as中这样做

```
 bld(features ='cxx',
       source   ='GSTEngine.cpp',
       target   = 'GSTEngine.o',
       includes = qtinc+gstinc+taginc,use=['BOOST'],
       uselib   = qtlibs,
       cxxflags = ['-DQT_NO_KEYWORDS','-DBOOST_TT_HAS_OPERATOR_HPP_INCLUDED']) 
```

但它失败了。如何将参数传递给`MOC`using `waf`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:02:34.420

这里可能的问题是`waf`调用一个[新任务`moc`](https://code.google.com/p/waf/source/browse/waflib/Tools/qt4.py#209)可能与 `cxxflags`您上面定义的任务生成器不同。

一个可能的解决方法是将定义添加到`waf`环境中，如下所示：

```
conf.env.append_unique('DEFINES',
    ['QT_NO_KEYWORDS','BOOST_TT_HAS_OPERATOR_HPP_INCLUDED']) 
```

如果您只想将定义添加到`moc`任务中，您可以实现自定义功能并将其添加到您的任务生成器中，该生成器会挖掘出`moc`任务并添加定义。

# android - 如何在android中捕获屏幕并将其转换为图像

> ID：11360664
> 
> 赞同：0
> 
> 时间：2012-07-06T10:42:38.913
> 
> 标签：android, capture, screens

> **可能重复：**
> [屏幕截图 Android](https://stackoverflow.com/questions/2661536/screenshot-android)

任何人请帮我解决这个问题..

如何以编程方式在android中捕获屏幕内容/.//

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:49:21.580

试试这个代码，不要忘记在你的 Manifest.xml 中添加这个权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/screen"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/capturescreen"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Capture Screen" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:background="@drawable/roundcorner"
        android:scaleType="fitXY"
        android:src="@drawable/android_awesome" />

</RelativeLayout> 
```

**ScreenCaptureActivity.java**

```
public class ScreenCaptureActivity extends Activity {

    Bitmap bmScreen;
    RelativeLayout mLayout;
    Dialog screenDialog;
    static final int ID_SCREENDIALOG = 1;

    ImageView bmImage;
    Button btnScreenDialog_OK;
    // TextView TextOut;

    View screen;
    EditText EditTextIn;

    /** Called when the activity is first created. */

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        screen = (View) findViewById(R.id.screen);
        Button btnCaptureScreen = (Button) findViewById(R.id.capturescreen);

        btnCaptureScreen.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                screen.setDrawingCacheEnabled(true);
                bmScreen = screen.getDrawingCache();
                saveImage(bmScreen);
                // showDialog(ID_SCREENDIALOG);
            }
        });
    }

    protected void saveImage(Bitmap bmScreen2) {
        // TODO Auto-generated method stub

        // String fname = "Upload.png";
        File saved_image_file = new File(
                Environment.getExternalStorageDirectory()
                        + "/captured_Bitmap.png");
        if (saved_image_file.exists())
            saved_image_file.delete();
        try {
            FileOutputStream out = new FileOutputStream(saved_image_file);
            bmScreen2.compress(Bitmap.CompressFormat.PNG, 100, out);
            out.flush();
            out.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:48:59.973

因为您需要使用问题中描述的相同代码

```
// image naming and path  to include sd card  appending name you choose for file
 String mPath = Environment.getExternalStorageDirectory().toString() + "/" + ACCUWX.IMAGE_APPEND;   

 // create bitmap screen capture
 Bitmap bitmap;
 View v1 = mCurrentUrlMask.getRootView();
 v1.setDrawingCacheEnabled(true);
 bitmap = Bitmap.createBitmap(v1.getDrawingCache());
 v1.setDrawingCacheEnabled(false);

 OutputStream fout = null;
 imageFile = new File(mPath);

 try {
     fout = new FileOutputStream(imageFile);
     bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fout);
     fout.flush();
     fout.close();

 } catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
     e.printStackTrace();
 } catch (IOException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
 } 
```

如本问题所述

[如何以编程方式在 Android 中截取屏幕截图？](https://stackoverflow.com/questions/2661536/screenshot-android)

# php - PHP - 在数组中显示数据

> ID：11360665
> 
> 赞同：0
> 
> 时间：2012-07-06T10:42:40.937
> 
> 标签：php, jquery

在我的页面上的自动完成对象中引用了以下代码

```
<?php
require('json.php');
error_reporting(E_ALL);
mysql_connect("localhost", "root", "") or
    die("Could not connect: " . mysql_error());
mysql_select_db("timetable") or die("No such database");
$sql = sprintf("SELECT id,dsc FROM module WHERE dsc LIKE '%%%s%%'",
               mysql_real_escape_string($_REQUEST['term']));
$result = mysql_query($sql)
  or die(mysql_error());
$all = array();
while ($row = mysql_fetch_array($result))
    $all[] = array('value'=>$row[1],'label'=>$row[1]);
print json_encode($all);
?> 
```

自动完成工作正常，但没有选项可以显示数据。谁能看到我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:15:37.523

试试这个 JS：

```
$(function(){
  $('#who').autocomplete({
    source: function() {
      $.get('scripts/searchstaff.php', function(data) {
        $(target).text(data);
        return data;
      }
    }
  });
}); 
```

自动完成仅在内部使用来自您的 php 的回显/返回，您必须捕获数据并将其写出客户端。

注意：数据将是一个 json 字符串，您可以使用 将其解析为一个对象`JSON.parse(data)`，然后对该对象做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:11:25.657

你能试试这个吗？它可能会帮助你

```
 <?php
    require('json.php');
    error_reporting(E_ALL);
    mysql_connect("localhost", "root", "") or
        die("Could not connect: " . mysql_error());
    mysql_select_db("timetable") or die("No such database");
    $sql = sprintf("SELECT id,dsc FROM module WHERE dsc LIKE '%%%s%%'",
                   mysql_real_escape_string($_REQUEST['term']));
    $result = mysql_query($sql)
      or die(mysql_error());
    $all = array();
    while ($row = mysql_fetch_array($result))
    {
    array_push($all,array('value'=>$row[1],'label'=>$row[1]));
    }
    echo(json_encode($all));
    ?> 
```

# smarty - 在 Smarty 中启用 PHP

> ID：11360674
> 
> 赞同：0
> 
> 时间：2012-07-06T10:43:23.523
> 
> 标签：smarty

我们正在使用基于 smarty 的软件。但是，我们不能在 smarty 模板中使用 PHP，因为出于安全原因，它已在 /includes/libs/smarty/ 中禁用。该目录未加密。我们如何仍然启用 PHP？

谢谢！

亲切的问候，

桑德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:17:09.903

如果它已被安全策略禁用，并且您无法覆盖该策略（因为它是加密的或类似的），那么您就不走运了。

除了 {php} 已被弃用（因此将来会被删除）之外，将 PHP 集成到模板中的“正确方法”是将必要的函数注册为 smarty 插件。请参阅[registerPlugin()](http://www.smarty.net/docs/en/api.register.plugin.tpl)。

但是，如果您无法覆盖安全策略，我怀疑您是否能够注册自定义插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-17T12:07:16.587

php标签默认是关闭的，你可以自己开启：

> {php} 标签默认是禁用的。使用 $smarty->allow_php_tag=true 启用。

# python - 在日期范围内切片熊猫数据框

> ID：11360675
> 
> 赞同：6
> 
> 时间：2012-07-06T10:43:35.297
> 
> 标签：python, time-series, pandas

我正在使用熊猫来分析财务记录。

我有一个`DataFrame`来自 csv 文件的文件，如下所示：

```
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 800 entries, 2010-10-27 00:00:00 to 2011-07-12 00:00:00
Data columns:
debit                      800  non-null values
transaction_type           799  non-null values
transaction_date_raw       800  non-null values
credit                     800  non-null values
transaction_description    800  non-null values
account_number             800  non-null values
sort_code                  800  non-null values
balance                    800  non-null values
dtypes: float64(3), int64(1), object(4) 
```

我正在根据交易金额选择一个子集：

```
c1 = df['credit'].map(lambda x: x > 1000)
milestones = df[c1].sort() 
```

并希望根据里程碑之间的日期创建原始 df 的切片：

```
delta = dt.timedelta(days=1)
for i in range(len(milestones.index)-1):
        start = milestones.index[i].date()
        end = milestones.index[i+1].date() - delta
        rng = date_range(start, end) 
```

这会生成一个新系列，其中包含我的里程碑之间的日期。

```
<class 'pandas.tseries.index.DatetimeIndex'>
[2010-11-29 00:00:00, ..., 2010-12-30 00:00:00]
Length: 32, Freq: D, Timezone: None 
```

我遵循了几种方法来使用这些新系列（rng）对我的 df 进行切片，但都失败了：

```
df.ix[start:end] or
df.ix[rng] 
```

这引发：IndexError：无效切片

```
df.reindex(rng) or df.reindex(index=rng) 
```

引发：异常：重新索引仅对具有唯一值的索引对象有效

```
x = [v for v in rng if v in df.index]
df[x]
df.ix[x]
df.index[x] 
```

这也会引发无效切片，因此：

```
df.truncate(start, end) 
```

我是 pandas 的新手，我正在关注 Oreilly 的早期版本，并且非常喜欢它。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:12:49.260

看起来您在非唯一索引处理中遇到了几个已知错误：

[https://github.com/pydata/pandas/issues/1201/](https://github.com/pydata/pandas/issues/1201/)

[https://github.com/pydata/pandas/issues/1587/](https://github.com/pydata/pandas/issues/1587/)

很快就会发布错误修复版本，因此请在一周左右的时间内查看 pandas 网站或 PyPI。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:28:07.467

我已经设法规避了上面突出显示的一些问题，这是一个“解决方案”，直到 Chang She 提到的错误得到解决。

我像以前一样从原始的 TimeSeries 索引 DataFrame 开始。我对 df 进行排序，这按日期对记录进行排序（使用 TimeSeries 索引）。

```
df = df.sort() 
```

排序后，我将 df.index 替换为数字索引

```
df.index = range(len(df)) 
```

我随后像以前一样提取了我的里程碑，不同的是现在这些将有一个正整数索引，并创建该索引的列表：

```
milestones_list = milestones_df.index.tolist() 
```

并使用数字索引从原始 df 中提取我的里程碑之间的数据，如下所示：

```
datasets = {}
    for milestone in milestones_list:
        milestone_index = milestones_list.index(milestone)
        print "milestone {0} index {1}".format(milestone, milestone_index)
        if milestone_index < len(milestones_list) -1:
            x = df[milestones_df.index[milestone_index]:milestones_df.index[milestone_index+1]]
        else:
            x = df[milestones_df.index[milestone_index]:df.index.max()]

        n = str(int(x.index.min())) +'-'+  str(int(x.index.max()))
        datasets[n] = x 
```

这会为每个里程碑时间间隔创建一个带有 DataFrames 的字典，命名为它们所代表的索引间隔。

```
print datasets.keys()
['592-650', '448-527', '382-447', '264-318', '319-381', '118-198', '528-591', '728-798', '54-117', '199-263', '651-727'] 
```

虽然诚然不是理想的解决方案，但我希望它可以帮助有类似问题的人。

# jquery - dataTables - 在指定位置添加行

> ID：11360678
> 
> 赞同：1
> 
> 时间：2012-07-06T10:44:00.810
> 
> 标签：jquery, datatables

如何设置 fnAddData 以在指定位置添加行.. 例如。作为顶部的第二行？

```
var giCount = 2;

$(document).ready(function() {
  $('#example').dataTable();
} );

function fnClickAddRow() {
  $('#example').dataTable().fnAddData( [
    giCount+".1",
    giCount+".2",
    giCount+".3",
    giCount+".4" ]
  );

  giCount++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:17:39.570

位置由应用于表格的排序指定 - 即添加到表格的数据与表格中的所有其他数据一样排序。因此，如果您希望它进入给定位置，那么行中的数据需要考虑到这一点，并且排序会定位它。

# c# - 在 C# 或 Javascript 中获取文件视频信息

> ID：11360679
> 
> 赞同：0
> 
> 时间：2012-07-06T10:44:03.297
> 
> 标签：c#, javascript, file, video

我正在通过 HTML5 开发视频上传和查看解决方案，我想知道是否有办法在 javascript 中获取客户端中的视频信息。我认为这是不可能的。在其他方面，我想它可能在 C# 中是可行的。

你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:50:49.967

如果您可以在 C# 中获取视频信息，那么也可以获取它`Javascript`，因为您只需公开一个服务即可`javascript`使用 MVC WebApi、Asp.net、WCF 或 Asp.net MVC 获取视频信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:30:40.077

最后我在客户端没有得到任何信息，仅是扩展名，所以你对客户端中的编解码器、分辨率和其他内容一无所知。您必须将其发送到服务器并进行处理，对我来说最好的选择是 FFMPEG。

# php - php 为什么在声明属性时不能为属性赋值？

> ID：11360691
> 
> 赞同：1
> 
> 时间：2012-07-06T10:44:30.217
> 
> 标签：php, oop

> **可能重复：**
> [将属性声明为对象？](https://stackoverflow.com/questions/2202995/declare-property-as-object)

为什么这在php中无效

```
public $var1 = 'hello ' . 'world'; 
```

我知道您必须将字符串分配给方法中的属性，但我只是想知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:53:19.533

由于[PHP 文档](http://ru2.php.net/language.oop5.properties)：

属性是通过使用关键字*public*、*protected*或*private*之一定义的，后跟一个普通的变量声明。这个声明可能包括一个初始化，但是这个初始化必须是一个常数值——也就是说，**它必须能够在编译时被评估，**并且不能依赖于运行时信息才能被评估。

# java - 如何使用 JAVA (1.5) 将图像转换为十六进制字符串？

> ID：11360696
> 
> 赞同：0
> 
> 时间：2012-07-06T10:44:51.767
> 
> 标签：java, string, image, hex

我已经为此苦苦挣扎了一段时间，由于我原本不是程序员，因此我将不胜感激。情况如下：

1.我在文件系统上有一个图像文件，并转换为 byteArrayOutputStream 和 ByteArray。（目前选择哪个并不重要，因此其中任何一个都适用于输入数据）

2\. 我需要将图像表示为带有 HEX 代码和 0x 前缀的字符串，如下所示：

图像->字符串=' **0xFFD8FFE000104A46494600010200000100010000FFDB0** '

提前感谢任何试图提供帮助的人！任何示例代码或库将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:50:57.927

使用 Apache [commons-codec](http://commons.apache.org/proper/commons-codec/apidocs/src-html/org/apache/commons/codec/binary/Hex.html#line.160)：

```
String s = "0x" + Hex.encodeHexString(bytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:58:17.940

没有什么比现成的库更能将图像转换为十六进制的了。你必须检查这个主题：

[Java：文件到十六进制？](https://stackoverflow.com/questions/1314568/java-file-to-hex) :)

如果您的十六进制已准备好，您可以使用@JB Nizet 的另一个答案中的方法将其转换为字符串，或者试试这个库：

```
String hex = HexBin.encode(bytes[]); // add "0x" of course. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:13:14.793

这是对我有用的代码：

```
public static String getHexString(byte[] b) throws Exception {
  String result = "";
  for (int i=0; i < b.length; i++) {
    result +=
          Integer.toString( ( b[i] & 0xff ) + 0x100, 16).substring( 1 );
  }
  return result;
} 
```

无论如何感谢您的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T05:38:14.837

我认为您不应该使用 HexString 将 Image 存储为字符串，因为它会获得

数据很多。

您应该使用 base-64 编码而不是十六进制编码来保存。

我建议你使用`Base64`apache 的 util`commons-codec`

# .net - Windows 服务的 .net 组件中的 AsyncOperationManager

> ID：11360699
> 
> 赞同：0
> 
> 时间：2012-07-06T10:45:04.390
> 
> 标签：.net, multithreading, windows-services, components, synchronizationcontext

我们开发了一个非常适合 WinForms 的 .Net 组件。该组件使用 a`SynchronizationContext`从底层线程编组到 UI 线程引发事件（当然组件会`WindowsFormsSynchronizationContext`自动获取并使用它将事件发布到应用程序的 UI 线程）。

现在我们要创建一个重用这个组件的 nt 服务。由于 Windows 服务不`SynchronizationContext`自动提供，我认为我们可以使用`AsyncOperationManager`（和它的`SynchronizationContext`）来将在该组件的底层线程中触发的所有事件编组到单个处理器线程。这是一个好方法吗？

在我的测试中，我使用`AsyncOperationManager.CreateOperation(null);`来自不同线程的调用来检查发布的异步操作的行为（一个执行`MyService.OnStart()`方法......和另一个我在我的服务中运行的内部处理线程）。令我惊讶的是，发布的异步操作的线程 ID 始终是执行该`MyService.OnStart()`方法的线程 ID，因此可能是 SCM 线程。

MSDN 上没有关于此的文档，但我认为调用的线程`AsyncOperationManager.CreateOperation`将是异步操作将被编组到的线程。

有人可以在这里阐明一下吗？`AsyncOperationManager`另外，您会发现我在 Windows 服务中使用它的意图有什么问题吗？还有哪些方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T16:15:15.350

我创建了自己的线程模型，该模型由一个处理器线程组成，该线程从其他线程获取请求，然后创建回响应。

# php - 验证 URL 并删除重复项

> ID：11360701
> 
> 赞同：1
> 
> 时间：2012-07-06T10:45:09.313
> 
> 标签：php, validation

我做了一个简单的函数来验证通过 textarea 提交的 URL（每行 1 个链接）：

```
function validate_urls($value)
{
    //final array of links
    $links = array();

    $value = array_map(function($a) use (&$links){
        $a = trim($a);
        if(strlen($a) !== 0 and (strpos($a, 'http') !== 0 or strpos($a, 'https') !== 0)){
            $a = 'http://'.$a;
        }
        $url = parse_url($a,PHP_URL_HOST);
        if($url != null and !in_array($a, $links) and filter_var($a, FILTER_VALIDATE_URL) !== false and checkdnsrr($a)){
            $links[] = $a;
        }
        return false;
    }, explode("\n",$value));
    return $links;
}

var_dump(validate_urls($_POST['links']); 
```

这样做是检查是否

*   网址有效
*   该 URL 处于活动状态
*   URL 不是重复的

问题是，为什么它不起作用（返回一个空数组）？我已经检查了每一项检查，它应该可以工作，但它没有。对不起，如果代码很乱，我还在努力学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:11:14.977

```
if(strlen($a) !== 0 and (strpos($a, 'http') !== 0 or strpos($a, 'https') !== 0)){ 
```

`A and B or C`不会转换`(A and B) or (A and C)`为 AND 具有比 OR 更高的优先级。所以你想把它改成`A and (B or C)`.

* * *

[FILTER_VALIDATE_URL](http://de3.php.net/manual/en/filter.filters.validate.php)上的文档状态»请注意，该函数只会找到有效的 ASCII URL；«。所以这是一个非常严格的选择。它遵循已被[RFC 3986取代的](https://www.rfc-editor.org/rfc/rfc3986)[RFC 2396](https://www.rfc-editor.org/rfc/rfc2396)中给出的 URL 规范。

在没有更彻底地研究这个过滤器的情况下，这两条信息（对我来说）足以将该过滤器标记为完全无用。

* * *

```
checkdnsrr($a) 
```

正在测试整个 URL 而不仅仅是主机。即使您要检查主机，您也会寻找 MX 记录（即，如果该主机可通过邮件访问）。`A`将检查该主机是否具有 IP 集，`CNAME`将检查该主机是否是另一个 DNS 记录的别名，...。您可能正在寻找`NS`哪个会检查该主机是否有任何 DNS 记录。

因此，如果您将检查更改为`checkdnsrr($url, "NS")`您将验证该 URL 的主机组件是否确实为 DNS 所知。您没有检查该主机是否实际上正在侦听指定的端口。而且您没有检查给定资源（例如/foo/bar.html）是否存在。

* * *

If you wanted to make sure an URL actually points to something useful, you'd have to make a `HEAD` request and check the response. You can do that easily with [curl](http://php.net/curl). If curl is not available, you could implement a simple HTTP client yourself using [fsockopen()](http://php.net/fsockopen) - with the disadvantage of not being able to speak HTTP (HTTP through SSL) and having to implement redirection following and similar stuff yourself. Short: you don't want to go down that road.

That said, there is also a performance problem up ahead. The HTTP requests are done synchronously. Should a host be failing to reply in an acceptable time frame, your script might time out - or at least take ages to finish, depending on the number of URLs you're checking and the quality of service behind them.

# java - Show the differences of the 2 java objects using the Audit Trial

> ID：11360703
> 
> 赞同：0
> 
> 时间：2012-07-06T10:45:11.823
> 
> 标签：java

Hi I have implemented java code for finding the difference of 2 java objects using the comparator interface with the help of few folks here. Now i want to implement the code which has to log(Audit Trial) all the differences between 2 objects. My code is here,

```
public class A implements Comparator<A> {
    private int id1, id2; 
    /* setters and getters for id1 and id2 */                 

    public int compare(A o1, A o2) {
        if (o1 == o2) {
            return 0;
        } else if (o1 == null) {
            return -1;
        } else if (o2 == null) {
            return 1;
        }
        if (o1.getId1() != o2.getId1()) {
            return o1.getId1() - o2.getId1();
        } else {
            return o1.getId2() - o2.getId2();
        }
    }   
    public static void main(String args[]) {

        A obj1 = new A();
        obj1.id1 = 10;
        obj1.id2 = 20;

        A obj2 = new A();
        obj2.id1 = 10;
        obj2.id2 = 30;

        if (obj1.compare(obj1, obj2) == 0) {
            System.out.println("EQUALS");
        } else {
            System.out.println("NOT EQUALS");
        }
       }

 Please advise me how i can implement the code for AuditTrial here. Thanks. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:48:21.700

Use `java Reflection` API to achieve this.I have done this earlier where for Audit Trail we can not use `tigers`.

Pass the array of properties where you want to compare it takes the two beans of same type.

```
public static List<String[]> compareBeans(Object bean1, Object bean2,
        String... propertyNames) throws IntrospectionException,
        IllegalAccessException, InvocationTargetException {
    List<String[]> lList=new ArrayList<String[]>();
    Set<String> names = new HashSet<String>(Arrays.asList(propertyNames));
    BeanInfo beanInfo = Introspector.getBeanInfo(bean1.getClass());

    for (PropertyDescriptor prop : beanInfo.getPropertyDescriptors()) {
        if (names.remove(prop.getName())) {
            Method getter = prop.getReadMethod();
            Object value1 = getter.invoke(bean1);
            Object value2 = getter.invoke(bean2);
            if (value1 == value2
                    || (value1 != null && value1.equals(value2))) {
                continue;
   // if values are equal then no need to log it in database.
            } else {

                String[] changeArray=new String[4];
                changeArray[0]=getTableName(bean1);
                changeArray[1]=prop.getName();
                changeArray[2]=value1.toString();
                changeArray[3]=value2.toString();
                lList.add(changeArray);

            }
        }
    }

    for(String[] s:lList)
        System.out.println(s[0]+" , "+ s[1]+" , "+s[2]+" , "+s[3] );
    return lList;
}
   // Above code will compare two beans and give you the difference .

   // below method get the class name and then get the table name.
private static String getTableName(Object obj){

    String qualiFiedName=obj.getClass().getName();
    String name=qualiFiedName.substring(qualiFiedName.lastIndexOf(".")+1);

    // Your logic to get table name mapped with corresponding object

    return name;

} 
```

Once you got all the details where in which column , table the changes are easily your AuditDao can log these changes in database.

Hopefully i have answered your question.

# ruby-on-rails - NilClass:Class 的未定义方法“model_name”

> ID：11360704
> 
> 赞同：4
> 
> 时间：2012-07-06T10:45:12.043
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller

浏览器在 Locals#show 中返回了以下错误：

NilClass:Class 的未定义方法“model_name”

```
51: <%= form_for(@food) do |f| %>
52:   <%= render 'shared/error_messages', object: f.object %>
53:   <div class="field">
54:     <%= f.label :nome %> 
```

这是我的 locals_controller.rb （显示操作）

```
 def show
   @local = Local.find(params[:id])
   @foods = @local.foods.paginate(page: params[:page])
   respond_to do |format|
   format.html # show.html.erb
   format.json { render json: @local }
end 
```

结尾

这里 food_controller.rb （创建动作）

```
def create
@food = @local.foods.build(params[:food])
if @food.save
  flash[:success] = "Food created!"
  redirect_to '/locals'
else
  flash[:error] = "Error on creating food"
  render '/locals'
end
end 
```

Food 模型和 Local 模型与 :has_many 和 belongs_to 相关

有什么问题？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T11:56:39.530

然后将您的视图代码更改为：

```
<%= form_for :food, :url => {:action => :create} do |f| %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:23:11.930

通过添加以下代码进行检查（我假设您的模型是本地的）
`@food = Local.new`
在您的新操作中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T01:42:42.333

如果在您编辑时发生这种情况，但在您创建时它有效

您必须添加一个之前的操作并设置食物

```
 before_action :set_food, only: [:show, :edit, :update, :destroy] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-05T11:04:34.977

您可以使用以下任何代码：

```
<%= form_for :food, :url => {:controller => :food, :action => :create} do |f| %>

<%= form_for :food, url: food_create_path do |f| %>

<%= form_for Food.new , url: food_create_path do |f| %> 
```

# java - 阿帕奇战鹰 标签不起作用

> ID：11360706
> 
> 赞同：0
> 
> 时间：2012-07-06T10:45:23.023
> 
> 标签：java, jakarta-ee, tomcat, jsf-2, jsf-1.2

我正在尝试使用带有 JSF 2.0 的 Apache tomhawk 上传文件，但是当我尝试导航到相应的视图时，我收到以下错误：

```
javax.faces.view.facelets.TagAttributeException: /jsf/importReport.xhtml @30,51 value="#{import.uploadedFile}" Failed to parse the expression [#{import.uploadedFile}]
at com.sun.faces.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:401)
at com.sun.faces.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:351)
at com.sun.faces.facelets.tag.jsf.ValueHolderRule$DynamicValueExpressionMetadata.applyMetadata(ValueHolderRule.java:129)
at com.sun.faces.facelets.tag.MetadataImpl.applyMetadata(MetadataImpl.java:81)
at javax.faces.view.facelets.MetaTagHandler.setAttributes(MetaTagHandler.java:129)
at javax.faces.view.facelets.DelegatingMetaTagHandler.setAttributes(DelegatingMetaTagHandler.java:102)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.doNewComponentActions(ComponentTagHandlerDelegateImpl.java:402)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:159)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:103)
at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:178)
at com.sun.faces.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:395)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:366)
at com.sun.faces.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:108)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.tag.jsf.core.ViewHandler.apply(ViewHandler.java:186)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:82)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:155)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:82)
at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:744)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:509)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:109)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619)
Caused by: javax.el.ELException: Failed to parse the expression [#{import.uploadedFile}]
at org.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:146)
at org.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:172)
at org.apache.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:217)
at org.apache.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:67)
at com.sun.faces.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:385)
... 87 more
Caused by: javax.el.ELException: The identifier [import] is not a valid Java identifier as required by section 1.19 of the EL specification (Identifier ::= Java language identifier). This check can be disabled by setting the system property org.apache.el.parser.SKIP_IDENTIFIER_CHECK to true.
at org.apache.el.parser.AstIdentifier.setImage(AstIdentifier.java:133)
at org.apache.el.parser.ELParser.Identifier(ELParser.java:1217)
at org.apache.el.parser.ELParser.NonLiteral(ELParser.java:1193)
at org.apache.el.parser.ELParser.ValuePrefix(ELParser.java:1019)
at org.apache.el.parser.ELParser.Value(ELParser.java:968)
at org.apache.el.parser.ELParser.Unary(ELParser.java:950)
at org.apache.el.parser.ELParser.Multiplication(ELParser.java:714)
at org.apache.el.parser.ELParser.Math(ELParser.java:634)
at org.apache.el.parser.ELParser.Compare(ELParser.java:446)
at org.apache.el.parser.ELParser.Equality(ELParser.java:340)
at org.apache.el.parser.ELParser.And(ELParser.java:284)
at org.apache.el.parser.ELParser.Or(ELParser.java:228)
at org.apache.el.parser.ELParser.Choice(ELParser.java:185)
at org.apache.el.parser.ELParser.Expression(ELParser.java:177)
at org.apache.el.parser.ELParser.DeferredExpression(ELParser.java:115)
at org.apache.el.parser.ELParser.CompositeExpression(ELParser.java:43)
at org.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:115)
... 91 more* 
```

我正在使用以下 web.xml：

```
<servlet>
<servlet-name>Faces Servlet</servlet-name>
<servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
<servlet-name>Faces Servlet</servlet-name>
<url-pattern>*.faces</url-pattern>
</servlet-mapping>

<filter>
<filter-name>MyFacesExtensionsFilter</filter-name>
<filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
    <init-param>
        <param-name>uploadMaxFileSize</param-name>
        <param-value>20m</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>MyFacesExtensionsFilter</filter-name>

    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping>

<filter-mapping>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <url-pattern>/faces/myFacesExtensionResource/*</url-pattern>
</filter-mapping>

<context-param>
<param-name>javax.faces.CONFIG_FILES</param-name>
<param-value>/WEB-INF/config/faces-config.xml</param-value>
</context-param>
<context-param>

<param-name>javax.faces.STATE_SAVING_METHOD</param-name>
<param-value>client</param-value>
</context-param>
<context-param>
<param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
<param-value>resources.application</param-value>
</context-param>

<listener>
<listener-class>com.sun.faces.config.ConfigureListener</listener-class>
</listener> 
```

我正在为视图使用以下 JSF 代码：

```
<ui:define name="content">
<div id="midbody" class="span-24">
<h:form enctype="multipart/form-data">
<t:inputFileUpload value="#{import.uploadedFile}"></t:inputFileUpload>
<h:commandButton action="#{import.getFile}"></h:commandButton>
</h:form>
</div>

</ui:define> 
```

我的托管bean如下：

```
public class ImportMB {
    private UploadedFile uploadedFile;

    public String getFile(){
       String fileName = FilenameUtils.getName(uploadedFile.getName());
       try {
InputStream myInput = uploadedFile.getInputStream();
System.out.println(fileName);
} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
return "importReport";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:20:03.820

看看你的堆栈跟踪，它说：

javax.el.E​​LException：标识符 [import] 不是 EL 规范第 1.19 节要求的有效 Java 标识符（标识符 ::= Java 语言标识符）。可以通过将系统属性 org.apache.el.parser.SKIP_IDENTIFIER_CHECK 设置为 true 来禁用此检查。

更改bean名称将起作用。

# alfresco - Alfresco - 使用 Web 服务客户端执行自定义操作不起作用

> ID：11360709
> 
> 赞同：0
> 
> 时间：2012-07-06T10:45:43.307
> 
> 标签：alfresco

我为添加简单工作流的空间创建了规则。如果用户从该工作流中批准文件，则该文件将被移动到另一个空间。

现在我想使用露天网络服务客户端批准文件。为此我使用以下代码，但不知何故它没有将文件移动到另一个空间（不执行批准操作）

```
ActionServiceSoapBindingStub actionService = WebServiceFactory.getActionService();
Rule[] rules = actionService.getRules(parentRef, new RuleFilter());
for (int i = 0; i < rules.length; i++) {
  Rule rule = rules[i];
  if(rule.getTitle().equals("Upload workflow rule")) {
    ActionExecutionResult[] results = actionService.executeActions(predicete, 
       new Action[{rule.getAction()});
  }
} 
```

谢谢，约格什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:25:08.767

我找到了解决方案，只需要使用特定参数调用 CommandServlet。

示例 - (http://localhost:8080/alfresco/command/workflow/approve/workspace/SpacesStore/0000-0000-0000)

这里“0000-0000-0000”是我想要执行工作流批准的节点ID。

谢谢。

# php - Cron Job - 删除特定文件夹中的所有文件

> ID：11360710
> 
> 赞同：5
> 
> 时间：2012-07-06T10:45:50.217
> 
> 标签：php, cron

我想使用 php 并使用 Cron Job 删除名为“data”的文件夹中的所有文件，

Cron Job 设置为每小时运行一次脚本，但我不知道应该写什么

文本字段以及如何删除 php 中特定文件夹内的所有文件？

请有人解释我并帮助我...

![在此处输入图像描述](../Images/43fcbb017fdb987ca09d8761e3c0f19b.png)

**修复：**

将 delete.php 放在空字段内

并在 delete.php 中写下下面的代码：

```
<?php

define('PATH', 'folder/');

function destroy($dir) {
    $mydir = opendir($dir);
    while(false !== ($file = readdir($mydir))) {
        if($file != "." && $file != "..") {
            chmod($dir.$file, 0777);
            if(is_dir($dir.$file)) {
                chdir('.');
                destroy($dir.$file.'/');
                rmdir($dir.$file) or DIE("couldn't delete $dir$file<br />");
            }
            else
                unlink($dir.$file) or DIE("couldn't delete $dir$file<br />");
        }
    }
    closedir($mydir);
}
destroy(PATH);
echo 'all done.';

?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-03-24T10:33:22.407

如果要删除包含其内容的文件夹，请在 cpanel 中转到 cron 作业：

```
rm -rf /home/user/public_html/folder 
```

如果要删除此文件夹中的所有内容，但保留文件夹本身：

```
rm -f /home/user/public_html/folder/* 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T11:08:00.077

这是 PHP 中的一个可以删除文件的函数。

[http://se2.php.net/unlink](http://se2.php.net/unlink)

还有，这里的例子；[http://se2.php.net/manual/en/function.unlink.php#108940](http://se2.php.net/manual/en/function.unlink.php#108940)

包含有关如何从目录中删除文件的信息（只需跳过底部的 rmdir）

编辑：忘记了 cron 的事情。:)

如果您在 /home/a1206305/ 中创建一个名为 directory.php 的文件，其内容如下：

```
<?php
    $path = "/home/a1206305/domain.com/data/";
    foreach(glob($path . "*") as $file)
    {
        if(is_file($path . $file))
            unlink($path . $file);
    }
?> 
```

然后在 cron 的第二个字段中，只需写入 directory.php

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T10:50:48.690

只需在此处提供您的 php 文件的完整文件路径（可以包括域名，就像我们在浏览器中运行页面一样），然后在该页面中编写代码以删除任何文件夹中的所有文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T11:06:45.583

输入您的 php 文件的完整路径并编写代码以删除相应目录中的所有文件。php文件代码：

```
$dir = 'your directory path';
foreach(glob($dir.'*.*') as $v){
unlink($v);
} 
```

# php - Page not working after JQuery .load()

> ID：11360714
> 
> 赞同：0
> 
> 时间：2012-07-06T10:46:01.230
> 
> 标签：php, javascript, ajax

If mysql code is in index.php file, it working fine, but it cant be refreshed I have tried to move it to another file and then load it with JQuery function .load(),

```
$("#pagesn").load("data.php"); 
```

now it can be refrehed, but links not working anymore any Ideas?

Mysql code:

```
<?php
 require_once 'libs/db.class.php';
require_once 'libs/global.inc.php';

    $sql1="select * from zinutes LIMIT 3";
    $result1=$db->select($sql1);

          $query="select count(*) as tot from zinutes";
          $countset=$db->runquery($query);
          $count=$db->get_row($countset);
          $tot=$count['tot'];
          $page=1;
          $ipp=3;//items per page
          $totalpages=ceil($tot/$ipp);
          echo"<ul class='pages'>";
          for($i=1;$i<=$totalpages; $i++)
          {
              echo"<li class='$i'>$i</li>";
          }
          echo"</ul>";
        ?> 
```

JS code for clicking the links:

```
$(document).ready(function(){
    function showLoader1(){
        $('.search-background1').fadeIn(200);
    }
    function hideLoader1(){
        $('.search-background1').fadeOut(200);
        alert("yra");
    }

    $("#pagesn").on("click",".pages li",function(){
        showLoader1();  
        $("#pagesn .pages li").css({'background-color' : ''});
        $(this).css({'background-color' : '#A5CDFA'});                
        $("#resn").load("data1.php?page=" + $(this).attr("class"), hideLoader1);
    });     
}); 
```

Tried to include that php file to specific div and then refresh it with JS, got same, not working result.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:50:59.723

尝试使用 .ajax() 函数

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

这是一个使用我在[这里使用的 XMLHTTPRequest 的更广泛的示例](http://www.upgrade-world.com/)

```
// generate section content depending on request type
var requesttype = getUrlVars()["requesttype"];
if (requesttype == undefined) {
  mainmenu();
  document.getElementById("results").innerHTML = "<table border='0' cellspacing='0' cellpadding='0'><tr><td style='border-right:1px solid #E2E2E2'>" + mainmenuContent + "</td></tr></table>";
}

// mainmenu
function mainmenu() {
  document.title = "Upgrade World > Home";
  document.getElementById("breadcrumb").innerHTML = "<span style='color:#000;'>Home</span>";
  if (window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest
  } else {
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP")
  }
  xmlhttp.open("GET", "proxy.php?requesttype=ModelManufacturers&requestlanguage=" + requestlanguage, false);
  xmlhttp.send();
  xmlDoc = xmlhttp.responseXML;
  var a = xmlDoc.getElementsByTagName("modelmanufacturer");
  prefix = "<table border='0' cellspacing='0' cellpadding='5'>"
  mainmenuContent = "";
  suffix = "</table>"
  for (i = 0; i < a.length; i++) {
    mainmenuContent = mainmenuContent + "<tr><td><a href='index.html?requesttype=ModelTypes&requestlanguage=" + requestlanguage + "&modelmanufacturer=" + encodeURIComponent(a[i].childNodes[0].data) + "'>" + a[i].childNodes[0].data + "</a></td></tr>";
  }
  mainmenuContent = prefix + mainmenuContent + suffix;
} 
```

# django - Django modelforms customization

> ID：11360715
> 
> 赞同：0
> 
> 时间：2012-07-06T10:46:10.413
> 
> 标签：django, forms, twitter-bootstrap, django-crispy-forms

I'm using modelforms in my django-app and as I read in the documentation I can customize them by overriding the default field types or widgets. Does anyone know if I can do the customization by using django-crispy-forms in order to use bootstrap?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:03:02.940

我从未使用过`cripsy-forms`，但是通过阅读[文档](https://github.com/maraujop/django-crispy-forms/)并查看[示例](https://gist.github.com/1838193)，似乎`cripsy-forms`只是增强了 django 的内置表单以提供更好的渲染（通过使用辅助模型字段和模板标签）所以是的，您仍然可以像你一样定制你的表格

# ios - How to display one by one images when click the next button?

> ID：11360717
> 
> 赞同：2
> 
> 时间：2012-07-06T10:46:23.610
> 
> 标签：ios, objective-c

I have images in a array but it return the NULL

I have use this code

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    images= [[NSArray arrayWithObjects:   
                        [UIImage imageNamed:@"1.png"],
                        [UIImage imageNamed:@"2.png"],
                        [UIImage imageNamed:@"3.png"],
                        [UIImage imageNamed:@"4.png"],
                        nil] retain];  
}
-(IBAction)Next
{
    currentImage++;
    if(currentImage >= [images count])
    {
        currentImage=0;
    }

    UIImage *img=[images objectAtIndex:currentImage];
    [animalphoto setImage:img];
    NSLog(@"print:%@",currentImage);
} 
```

first time click button images display but second time not display image and that return NULL value.. give any suggestion and source code which is apply in our code.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:49:31.860

除了打印 currentImage 之外，您的代码完全正确，因为 currentImage 是整数类型，但您`%@`在 NSLog 中提到了“”字符串类型。这就是为什么它显示错误。您只需将其更改为

```
NSLog(@"print:%d",currentImage); 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:56:40.547

在您的方法中添加验证代码`viewDidLoad`以检查图像是否正确加载：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    images= [[NSArray arrayWithObjects:   
                        [UIImage imageNamed:@"1.png"],
                        [UIImage imageNamed:@"2.png"],
                        [UIImage imageNamed:@"3.png"],
                        [UIImage imageNamed:@"4.png"],
                        nil] retain];  
    NSAssert([images count] == 4, @"Failed to load one or more images");
} 
```

你的`IBAction`方法应该有一个`sender`参数，不是吗？

```
-(IBAction)Next:(id)sender
{
    currentImage = (currentImage + 1) % [images count];
    NSLog(@"currentImage=%d",currentImage);
    UIImage *img=[images objectAtIndex:currentImage];
    [animalphoto setImage:img];
} 
```

您的代码对我来说看起来不错（但我是 Mac 开发人员），所以我怀疑这是一个打包问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:58:04.383

使用此方法和 currentImage = 0：

```
 -(IBAction)Next
{

  if(currentImage>=[images count])
  {
    currentImage=0;
  }

UIImage *img=[images objectAtIndex:currentImage];
[animalphoto setImage:img];
NSLog(@"print:%@",currentImage);
currentImage++;

} 
```

# eclipse - Sonar-Eclipse Plugin, Sonar-Eclipse(OEPE)-Helios Integration

> ID：11360720
> 
> 赞同：0
> 
> 时间：2012-07-06T10:46:32.140
> 
> 标签：eclipse, eclipse-plugin, sonarqube, eclipse-3.6

I am trying to integrate eclipse(OEPE)-Helios with sonar but got failure all the time. i am doing this by downloading sonar-eclipse plugin via Help --> install New Softwares feature of eclipse ide. but always it through below error..

"could not find [http://dist.sonar-ide.codehaus.org/eclipse/](http://dist.sonar-ide.codehaus.org/eclipse/)"

can anybody guide me to do this activity? OR am i doing it right way? OR is it possible to integrate sonar with eclipse(OEPE)-Helios?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:52:24.433

此 URL 完全有效且可访问，您应该没有任何问题。

您可能在防火墙后面，需要配置 Eclipse 以使用代理（“Eclipse Preferences > General > Network connections”）。

# mysql - Importing Test Database to Main Database

> ID：11360725
> 
> 赞同：0
> 
> 时间：2012-07-06T10:46:49.227
> 
> 标签：mysql, database, database-design, database-migration

My problem is that I decided to have a Test Database where I put the data I'm testing and where I can play around without any issue. When everything seems ok I migrate the data to the "official" database, where I plan to migrate different Test DBs.

The problem are child tables. I have:

```
Table1:          Table2:          Child:
- id             -id              -idTable1
- name           -name            -idTable2
- url            -type            -quantity 
```

To migrate Table1 and Table2 I thought to create a temporaryID on the "official" Database. When I want to migrate the table "Child" the only thing I can think of is to check every single row and update it with the corresponding new ids. Isn't there a better way to do this?

I also thought to simply forget about Test DB and work only with the "official" one, but I am afraid of having to start again from scratch every time I make a mistake.

I think I've seen a couple of examples here on SO, but they seems much more complicated than what I need.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:24:40.343

如果问题是您不想避免 2 个（或更多）数据库上的重复 ID，您应该阅读“自动增量”和“自动增量偏移”。

如果服务器 1 有：

```
auto-increment-increment                        = 4
auto-increment-offset                           = 1 
```

那么在该服务器上生成的 ID 号将是：1,5,9,13...

和第二台服务器配置为

```
auto-increment-increment                        = 4
auto-increment-offset                           = 2 
```

第二台服务器上的 ID 号将是 2,6,10,14..

允许您在服务器之间复制数据，包括 ID 号

# php - how to set trendline dynamically in php fusioncharts

> ID：11360731
> 
> 赞同：0
> 
> 时间：2012-07-06T10:47:06.293
> 
> 标签：php, mysql, fusioncharts

I have already using the fusioncharts and i am getting the values from database. I am searching for how to set the trendvalues for a line graph in fusion charts php. Actually i have to get the value from database and set the trendline. Is there any way to do it. I google a lot but i didnt find the answer.

```
Here is my code:

while ($row = mysql_fetch_array($result)) { 
    $categories .= "<category name='" . $row["ondate"] . "' />";
    $systolic .= "<set  value='" . $row["systole_reading"] . "'  hoverText='Systolic' />";
    $diaolic .= "<set value='" . $row["diastole_reading"] . "'  hoverText='Diastolic'/>";
    $map.="<set value='" . $row["map"] . "' hoverText='Mean Arterial Pressure'/>";
    }
$strXML .=" <trendlines>
    <line startValue='".$row["target"]."'  color='ff0000' displayValue='Systolic Target'  showOnTop='1' valueOnRight = '1'/>
  </trendlines>";

TAI

ramsai 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:52:23.607

要在 PHP 中为折线图设置 TrendValues，您需要以与数据点类似的方式连接 XML 字符串。

参考。代码：

```
$strXML =" ";
while ($row = mysql_fetch_array($result)) { 
 $categories .= "<category name='" . $row["ondate"] . "' />";
 $systolic .= "<set  value='" . $row["systole_reading"] . "'  hoverText='Systolic' />";
 $diaolic .= "<set value='" . $row["diastole_reading"] . "'  hoverText='Diastolic'/>";
 $map .="<set value='" . $row["map"] . "' hoverText='Mean Arterial Pressure'/>";
 $target .= "<line startValue='" . $row["target"] . "' color='ff0000' displayValue='Systolic Target' showOnTop='1' valueOnRight = '1'/>";
}

$strXML .= "<chart><categories>" . $categories . "</categories><dataset>" . $systolic . "</dataset><dataset>" . $diaolic . "</dataset><trendLines>" . $target . "</trendLines></chart>"; 
```

# java - Fragments in Knopflerfish

> ID：11360733
> 
> 赞同：0
> 
> 时间：2012-07-06T10:47:19.873
> 
> 标签：java, osgi, knopflerfish

I really need help here, i have a bundle that basically load the right locale property file in order to load the right language.

Now, these files, FlashcardsMessages_es.properties,FlashcardsMessages_de.properties are in a separated package as a fragment but for some reason it seems that my bundle is not finding the fragment.

```
java.util.MissingResourceException: Can't find bundle for base name de.tud.cs.se.flashcards.ui.FlashcardsMessages, locale es_MX
  at java.util.ResourceBundle.throwMissingResourceException(Unknown Source)
  at java.util.ResourceBundle.getBundleImpl(Unknown Source)
  at java.util.ResourceBundle.getBundle(Unknown Source)
  at de.tud.cs.se.flashcards.ui.Messages.getMessage(Messages.java:65) 
```

This is the error i got.

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: FlashCardOSGiED
Bundle-SymbolicName: FlashCardOSGiED
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: Activator
Export-Package: .,
 de.tud.cs.se.flashcards.model,
 de.tud.cs.se.flashcards.model.learning,
 de.tud.cs.se.flashcards.model.learning.basic,
 de.tud.cs.se.flashcards.persistence,
 de.tud.cs.se.flashcards.ui,
 de.tud.cs.util
Bundle-RequiredExecutionEnvironment: JavaSE-1.7
Import-Package: javax.imageio,
 javax.swing,
 javax.swing.border,
 javax.swing.event,
 org.osgi.framework,
 org.osgi.util.tracker 
```

This is my bundle's manifest

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: LocaleFragment
Bundle-SymbolicName: LocaleFragment;singleton:=true
Bundle-Version: 1.0.0.qualifier
Fragment-Host: FlashCardOSGiED
Bundle-RequiredExecutionEnvironment: JavaSE-1.7
Export-Package: de.tud.cs.se.flashcards.ui 
```

And this is my fragment's manifest.

If someone could give me some idea what could be wrong t would be awesome.

EDIT: I found the problem, so eclipse or java wont put any resource like properties files or images files inside the jar when the the compiler runs, so my solution was to put the properties files inside the "classes" folder and then after compiling eclipse did put the files inside the jar files correctly. I found this in some other website but some of the suggestions here inspired me into looking in to that direction so thanks a lot.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:14:56.577

尝试刷新主机包。

如果片段已附加到主机，则可能是您将资源打包到片段包中的方式，或者您如何在主机代码中设置资源的路径。

# linux - Linux Command to find out "count" of running process?

> ID：11360735
> 
> 赞同：0
> 
> 时间：2012-07-06T10:47:29.450
> 
> 标签：linux

There are 3 processes. I have to find the "count" of running process in current directory.

```
# named ../sample 
```

And:

```
[root@sp3 sample]# ps -eaf|grep perl
root     14104     1 58 08:39 ?        03:31:34 perl example1.pl
root     17441     1 41 09:09 ?        02:17:24 perl example2.pl
root     24543     1  0 Jul05 ?        00:00:00 perl sample.pl
[root@sp3 sample]# 
```

The result I have to return is 3.

I have currently in sample directory and I have to count the number of process in same directory

Please post any solution.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T10:48:34.310

Try

```
LOCAL_PWD = pwd
ps -auxeaf| grep $LOCAL_PWD| wc -l 
```

wc -l counts lines

Regarding how to show full path of processes please take a look at [here](https://superuser.com/questions/103309/how-can-i-know-the-absolute-path-of-a-running-process)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T10:49:28.253

这真的不是适合这个的地方（stackexchange 有一个 linux 部分）。但是你可以用它`wc`来计算任何输出中的行数，所以像这样将你的命令传递给它`ps -eaf | grep perl | wc -l`：顺便说一句，我还建议`grep`通过执行使命令与自身不匹配`grep [p]erl`（将 [] 放在任何一个字符周围仍将仅匹配“perl”，但 grep 命令不再包含“perl”）。

如果它对你有用，我已经整理了一个脚本，就像我在下面的评论中提到的那样。

```
total=0
for file in $(find -executable -type f) ; do
    echo "Checking $file:"
    count=$(ps -ef | awk '{print $8}' | grep "^.*/*${file##*/}$" | wc -l)
    echo "$count processes found."
    total=$(($total + $count))
done
echo $total 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-08T14:25:49.573

简单：ps -eaf | grep perl | grep -v grep | wc -l

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-14T14:43:05.167

我知道这个话题很老，但是这个问题没有解决方案。

* * *

***解决方案 1***

`ps ax |egrep "^/your/path/to/Script" |wc -l`

*   ps ax = 进程列表
*   egrep = 从列表中获取所有以指定路径开头的进程。您需要使用 Path/Script.pl 而不是 ./script 来启动您的 Perl 脚本。^ = 多行 - 您也可以使用普通**的 grep "/your/path/to/script"**

*   wc -l = 统计所有结果

*   输出 = 3

* * *

***解决方案 2***

使用特定标识符命名脚本并对其进行 grep，例如：

script_example_ident .pl **_**

`ps ax |grep "ident" |wc -l`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-06T10:50:54.703

如果通过运行您的意思是“排队等待执行”：

```
ps ax -o stat,args |grep '^R'|wc -l 
```

# database - 何时存储预先计算的值与检索它们时计算它们？

> ID：11360738
> 
> 赞同：9
> 
> 时间：2012-07-06T10:47:41.360
> 
> 标签：database, database-design, normalization, denormalization

我进退两难了。我正在处理大量遗留代码，并且在表结构中看到大量冗余信息。它们主要以两种形式存在：

A. 要保存在“连接”上的冗余信息。例如：

```
event_id, event_name, event_creator_id
       3       test1                43

subevent_id, event_id, event_creator_id 
         21         3               43 
```

请注意 event_creator_id 的重复性。以前的“高级”开发人员给出的理由是，当我们需要事件创建者 id 时，我们只需要查询一个表，而不是进行“昂贵的”连接来检索值。

B. 节省计算的冗余信息。例如：

```
event_id, event_default_price
       3                  100

discount_id, discount_code, discount_percentage
          7,          ABCD,                  50

special_event_id, event_id, discount_id, discounted_price
              21         3            7,               50 
```

请注意，不是为这个特殊事件计算最终的“discounted_price”（因为对 discount_id 的引用已经存在），代码将“计算”值保存在这里。同样，理由是“速度”，常态下地狱。

我有两个问题：

1.  我可以告诉新开发人员这些结构没有标准化，但他们可以说它更快。我该如何反击？我反对吗？其他人是否像这样构建他们的数据库？！
2.  有没有一个经验法则或一套原则，我可以用来说 - “哦，它会更慢，但只有 1%，所以可以这样做*”*等等？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-06T11:33:56.610

关于你的两个问题：

> 我可以告诉新开发人员这些结构没有标准化，但他们可以说它更快。我该如何反击？我反对吗？其他人是否像这样构建他们的数据库？！

它可能更快，但不一定如此：每当您决定向表中添加额外信息（在您的情况下为额外字段）时，您也会增加性能损失，因为表变得更大，这可能意味着更多数据来自服务器到客户端，或者被调入或调出内存......如果该字段用于加速查询，它可能会有一个或多个索引，这在更新和插入期间再次有性能损失。不过，要点是我在评论中暗示的一点：“缓存”和“预计算”值使系统在数据完整性方面更加脆弱。您确定“event_creator_id”始终正确指向真正的创建者，即使有人修改了原始值？如果是，这也有成本，

对于“折扣价”或运行总计等汇总值也是如此……更改原始数据可能比更改“事件创建者”信息更频繁。同样，是否有适当的“缓存失效”机制来确保在有人完成销售时重新计算总销售额？退回的物品怎么办？有没有人考虑过确保完整性的成本？

相反，运行总计和其他派生值应该通过使用视图来实现，以便缓存（如果有）由知道如何正确处理这一点的实际 DBMS 引擎执行。

> 是否有一个经验法则或一组原则，我可以用来说 - “哦，它会慢一些，但只有 1%，所以可以这样做”等等？

DB（或可以说是任何类型的计算系统）应该“首先正确”，以便您可以找到如何使其“足够快，其次”。以正确性换取速度是您在设计数据库时不应该做出的决定，除非您已经知道及时性被认为比正确性更重要。即您的要求明确指出，拥有可能错误或过时的信息不如响应时间重要。

换句话说：设计一个带有冗余缓存信息的表是过早优化的另一个例子，应该不惜一切代价避免。

另请参阅[-](https://stackoverflow.com/questions/293425/in-terms-of-databases-is-normalize-for-correctness-denormalize-for-performanc?rq=1)特别是答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T21:28:06.190

我读过的任何关于关系设计的数据库书籍都包含关于“计划的”冗余或“有限的”反规范化的部分。这取决于环境。Wells Fargo 预先计算银行对账单总额并存储预先计算的数据。

想象一下，如果他们在打印语句时等到每个周期结束时进行这些计算需要多长时间。

计划冗余是正常的！

# python - 缩小图像

> ID：11360744
> 
> 赞同：1
> 
> 时间：2012-07-06T10:48:23.007
> 
> 标签：python, pyqt, pyqt4

我有以下代码，它从磁盘加载图像并尝试将其缩小到 30 x 30。稍后我将标签添加到网格布局。不幸的是，图像没有按比例缩小到预期的大小，所以我在网格布局中的所有单元格都有不同的大小。

```
 pixmap = QtGui.QPixmap(filename)
 pixmap.scaled(QtCore.QSize(30,30), QtCore.Qt.KeepAspectRatio, QtCore.Qt.FastTransformation)
 self.L.append(pixmap)
 lbl = QtGui.QLabel(self)
 lbl.setPixmap(pixmap)
 lbl.setScaledContents(True)
 column=len(self.L)
 self.ui.gridLayout.addWidget(lbl,0,column,Qt.AlignLeft | Qt.AlignTop) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:50:15.463

您确定`pixmap.scaled`对图像进行就地转换吗？我本来希望它返回一个新的、缩放的图像 - 将它分配给一个变量并使用它。

根据[此文档](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qpixmap.html#scaled-2)：

> 返回图像的缩放副本。返回的图像使用指定的转换模式缩放到给定的高度。像素图的宽度是自动计算的，以便保留像素图的纵横比。

所以，我想你应该这样做：

```
 pixmap = QtGui.QPixmap(filename)
 # FIXED:
 scaled_pixmap = pixmap.scaled(QtCore.QSize(30,30), QtCore.Qt.KeepAspectRatio, QtCore.Qt.FastTransformation)
 self.L.append(scaled_pixmap) # FIXED
 lbl = QtGui.QLabel(self)
 lbl.setPixmap(pixmap)
 lbl.setScaledContents(True)
 column=len(self.L)
 self.ui.gridLayout.addWidget(lbl,0,column,Qt.AlignLeft | Qt.AlignTop) 
```

# sql - 计算Access中一个表中行出现的次数

> ID：11360745
> 
> 赞同：1
> 
> 时间：2012-07-06T10:48:32.587
> 
> 标签：sql, count, subquery, ms-access-2003

我想显示一个名称在 Access 2003 表的字段中出现的次数。这是表结构和内容：

[我在这里](https://stackoverflow.com/questions/7437619/counting-how-many-times-a-value-appeared)使用了这个例子：

标签：

```
 1  - Name1   
     1  - Name2
     2  - Name1
     2  - Name3
     3  - Name1
     3  - Name2 
```

结果

```
 Name1 - 3
    Name2 - 2
    Name3 - 1 
```

这是我的代码

```
SELECT DISTINCT [tbl funktietitels].persoon, 

           [tbl funktietitels].funktiecode, [tbl funktietitels].funktietitel, [tbl funktietitels].userID, [tbl funktietitels].adres, [tbl funktietitels].dept, EXISTS
           (
               SELECT  [tbl funktietitels].funktiecode, COUNT([tbl funktietitels].funktiecode)
               FROM    [tbl funktietitels] 
               GROUP BY [tbl funktietitels].funktiecode 
           ) AS 'AMOUNT'
FROM ([tbl goedkeuring]

          INNER JOIN [tbl funktietitels] ON [tbl goedkeuring].goedk1 = [tbl funktietitels].funktiecode) 
          INNER JOIN [tbl doc] ON [tbl goedkeuring].volgnummer = [tbl doc].goedID

WHERE ((([tbl goedkeuring].bevestiging)=False)); 
```

结果显示如下：

```
 persoon   funktiecode   funktietitel     userID   adres   dept    'AMOUNT'
Name, Name2 DLB          King of the sea       JGO            LOG      � 
```

如何计算一个字段在表格中出现的次数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:54:56.910

我想你想要一个代码与主表相同的计数。此示例别名`[tbl funktietitels]`为 t 和 f。

```
SELECT DISTINCT f.persoon, 
          f.funktiecode, 
          f.funktietitel, 
          f.userID, 
          f.adres, 
          f.dept, 
           (
               SELECT  COUNT(t.funktiecode)
               FROM    [tbl funktietitels] t
               WHERE   t.funktiecode = f.funktiecode
           ) AS 'AMOUNT'
       FROM ([tbl goedkeuring]
       INNER JOIN [tbl funktietitels] f 
          ON [tbl goedkeuring].goedk1 = f.funktiecode) 
       INNER JOIN [tbl doc] 
          ON [tbl goedkeuring].volgnummer = [tbl doc].goedID
       WHERE ((([tbl goedkeuring].bevestiging)=False)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T06:32:17.340

我想出的解决方案：

```
 SELECT DISTINCT [tbl funktietitels].persoon, 
           [tbl goedkeuring].goedk1, 
           [tbl goedkeuring].db_user

             (SELECT  count(*)
              FROM  [tbl goedkeuring]
              WHERE [tbl goedkeuring].goedk1 = [tbl funktietitels].funktiecode
                     AND ((([tbl goedkeuring].bevestiging)=False))
             ) AS aantal

  FROM [tbl goedkeuring] 
       INNER JOIN [tbl funktietitels] 
           ON [tbl goedkeuring].goedk1 = [tbl funktietitels].funktiecode; 
```

# haskell - 追踪 Haskell 段错误

> ID：11360748
> 
> 赞同：6
> 
> 时间：2012-07-06T10:48:35.540
> 
> 标签：haskell

这**太气人了！**>_<

我编写了一个庞大而复杂的 Haskell 库。我写了一个小测试程序，到目前为止，我已经花了大约 8 个小时试图弄清楚为什么它一直在我身上崩溃。有时 GHC 会抱怨“奇怪的封闭类型”。有时我只是得到一个段错误。*显然*问题是内存损坏。

库本身是 100% 纯 Haskell。但是，测试程序使用了几个与数组相关的不安全 GHC 原语。这显然是导致问题的原因。事实上，如果我注释掉该`writeArray#`行，程序就会停止崩溃。但这完全是在炒我的面条……据我所知，我使用的所有数组边界都是*完全有效*的。程序将它们全部打印出来，它们都是正数并且小于数组大小。

我编写了第二个程序，它与第一个程序做同样的事情，但不涉及庞大而复杂的库。我已经尝试了又尝试了，但我根本无法让它崩溃。我所做的一切似乎都不会让它崩溃，但它对实际数组的作用几乎完全相同。

有没有人有任何进一步的故障排除提示？有什么方法可以追踪内存损坏的确切时刻吗？（而不仅仅是系统*注意到*损坏的那一刻。）

* * *

**更新：**

问题有什么作用？

好吧，本质上，它创建了一个表示像素缓冲区的数组。它生成一个线程，该线程遍历每个像素并将相应的值写入其中。它会产生第二个线程来读取数组，并使用相当复杂的协议将像素写入网络套接字。（因此我要测试的大型图书馆。）

如果我不生成作者线程，崩溃就会消失。如果我在作者线程中注释掉`writeArray'`调用，崩溃就会消失。在写入每个像素之前，写入器线程会打印出像素坐标*和*数组索引。它打印出来的所有东西看起来都很完美。然而......它不会停止崩溃。

我几乎想知道 GHC 的数组原语是否不是线程安全的。（如果有任何不同，读取器线程看起来像的数组副本已被不安全地冻结，而写入器线程继续同时对其进行变异。）

但是，我编写了一个程序，它做同样的事情，但不通过网络发送流量。*这个*程序在每一个细节上都能完美运行。只有真正复杂的程序是行不通的。这有多烦人？！

这有效：[http ://hpaste.org/70987](http://hpaste.org/70987)

这不是：[http ://hpaste.org/70988](http://hpaste.org/70988)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T12:24:46.620

您已经在记录您对不安全原语的使用。

您是否编写了一个程序来查看这些日志是否违反不变量？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T13:41:45.223

将已知不安全的函数替换为安全、经过检查的版本。检查您的日志以查找将导致的异常，并修复您的代码。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-06T13:42:26.187

可能测试程序和带库的程序的区别在于，后一种情况下分配更多，所以GC调用更频繁。

> 读取器线程看起来像的数组副本已被不安全地冻结，而写入器线程继续并发地对其进行变异。

可能 GC 无法跟踪冻结后仍然引用可变数组。在这种情况下，GC 可能会移动冻结的数组，但 writeArray# 使用旧指针执行写入。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-06T14:08:59.877

**可能会修复：**

我改变了一些东西，代码不再崩溃。这可能只是侥幸，或者我可能已经“真正”解决了这个问题。很难说。

**假设：**

问题似乎是从并发线程中读取同一数组的可变和不可变副本。（即使简化的测试确实做到了这一点并且不会崩溃。）

我让网络线程从一个不相关的不可变数组中读取，并且崩溃停止了。我什至添加了一个循环来将数据从一个可变数组复制到另一个新的可变数组，然后新的数组被冻结并检查。这似乎完美无缺。

因此，这似乎只是 GHC 处理对同一数组的两个版本的并发访问的一个小故障。

（要么是那个，要么是侥幸。有几次我在程序中改变了一些东西，它停止了崩溃，然后又开始崩溃了......）

**更新：**这似乎已完全修复。自从我做了这个改动后，我再也没有发生过崩溃。感谢所有在这里帮助我的人。:-)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-06T10:54:52.240

我知道的唯一有用的是使用 Debug.Trace

```
import Debug.Trace 
```

和

```
debug = flip trace 
```

进而

```
main = (1 + 2) `debug` "adding or whatever and whatnot (also can have code here)" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-26T17:00:03.317

出于 GC 的目的，GHC 以不同的方式处理可变和不可变的指针数组。写入可变数组需要将对象放在*可变列表中并在**卡表*中设置一个位。不可变数组没有这些。所以当你尝试写入一个已经被冻结的可变数组时，你可以写一个指向老年代的新生代指针。在次要 GC 期间不会扫描老年代，因此当次要 GC 运行时，会收集该值。然后你segfault因为数组指向垃圾。

解决方案：不要冻结数组。如果必须，请`unsafePerformIO`用于读取。

# symfony - Symfony2：配置 yaml 中的引用字符串或数组

> ID：11360754
> 
> 赞同：3
> 
> 时间：2012-07-06T10:49:06.167
> 
> 标签：symfony, yaml

在 symfony2 中，我使用了以下配置 yaml：

```
// config.yml
parameters:
  something: 
    content: 
      price:  2.30
      mainText: 'Some text here.'
      redText:  'This is a text here plus price: ' %price% 
```

%price% 错误并给我一个错误，但系统告诉它一个数组，那么如何指向某事['content'][price]？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T17:20:18.727

这是你可以做到的

```
parameters:
    something.content.price: 2.30
    something:
        content:
            mainText: 'Some text here.'
            redText:  'This is a text here plus price: %something.content.price%' 
```

这里我们只有 2 个参数，`something.content.price`一个包含一个浮点数，`something`一个包含一个数组。

这意味着您将只能在 DI 配置中直接访问这 2 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-13T23:43:51.633

[一样的答案，不一样的帖子](https://stackoverflow.com/questions/19839157/how-to-access-nested-parameter-values-in-symfony2/19839599#19839599)

有点晚了，但这是您正在寻找的解决方案：P

```
// parameters.yml
parameters:
    something: 
    content: 
        price:  2.30
        mainText: 'Some text here.'
        redText:  'This is a text here plus price: ' 
```

使用数组中定义的价格的方法类似于：

```
//config.yml 
twig:
    globals:
        fee: content['price'] 
```

**说明**：
当您将参数文件导入 config.yml 文件时，您可以自动访问其中定义的所有变量。请记住，当您使用您定义的结构时。

**您正在定义一个名为content**的键值对数组，其中包含许多键值对，并且引用它们的方式如上所述。

希望这对那些可能正在寻找它的人有用！:)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-07T00:04:13.363

也许`%something.content.price%`

# c# - 将 Powerpoint 节目嵌入到 C# 应用程序中

> ID：11360758
> 
> 赞同：5
> 
> 时间：2012-07-06T10:49:24.977
> 
> 标签：c#, winforms, powerpoint

我希望能够将 powerpoint 演示文稿嵌入到 C# 表单 (WinForms) 中。基本上我们有一个 52' 的显示器，想法是在一个角落我们将有一个 PPT on loop，然后其他 3 个角落将显示来自程序本身的信息。

我原以为这很简单，但似乎我错了。

有人建议我使用 WebBrowser 控件，但这不起作用，而是将 powerpoint 文件视为下载，即给我一个“保存，打开”对话框。

有什么建议么？

AK

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T08:31:56.640

您可以只运行 PowerPoint，获取窗口句柄，并使用[SetParent](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633541%28v=vs.85%29.aspx)函数设置新的父窗口。

* * *

您所需要的只是 PowerPoint 窗口的窗口类的名称，但感谢[Spy++](http://msdn.microsoft.com/en-en/library/dd460760.aspx)，这没什么大不了的。

![间谍++](../Images/50f06838849a7545a958cceab0f6ecd4.png)

* * *

这是在自定义应用程序“内部”运行的 PowerPoint 的屏幕截图：

![微软幻灯片软件](../Images/b9def2dc259b64c66e7e407d05eeefdf.png)

* * *

完整示例（取自[此处](http://social.msdn.microsoft.com/Forums/sk/winforms/thread/cb19ac9e-e345-4b7d-a29f-78e62d559d3b)并针对 PowerPoint 进行了修改）：

```
public partial class Form1 : Form
{
    public Form1()
    {
        this.Size = new System.Drawing.Size(800, 600);
        this.TopMost = true;
        this.Text = "My Application";
        this.FormBorderStyle = FormBorderStyle.FixedToolWindow;
        Func<bool> run = () =>
            Window.Find(hwnd =>
            {
                var cn = Window.GetClassName(hwnd);
                var res = (cn == "PPTFrameClass");
                if (res)
                {
                    this.Controls.Clear();
                    Window.SetParent(hwnd, this.Handle);
                    Window.SetWindowPos(hwnd, new IntPtr(0), -8, -30, this.Width + 10, this.Height + 37, 0x0040);
                }
                return res;
            });

        new Button { Parent = this, Text = "Start" }
            .Click += (s, e) =>
            {
                if (run() == false)
                    MessageBox.Show("Open PowerPoint");
            };
    }
}

public static class Window
{
    public static bool Find(Func<IntPtr, bool> fn)
    {
        return EnumWindows((hwnd, lp) => !fn(hwnd), 0) == 0;
    }
    public static string GetClassName(IntPtr hwnd)
    {
        var sb = new StringBuilder(1024);
        GetClassName(hwnd, sb, sb.Capacity);
        return sb.ToString();
    }
    public static uint GetProcessId(IntPtr hwnd)     // {0:X8}
    {
        uint pid;
        GetWindowThreadProcessId(hwnd, out pid);
        return pid;
    }
    public static string GetText(IntPtr hwnd)
    {
        var sb = new StringBuilder(1024);
        GetWindowText(hwnd, sb, sb.Capacity);
        return sb.ToString();
    }

    delegate bool CallBackPtr(IntPtr hwnd, int lParam);

    [DllImport("user32.dll")]
    static extern int EnumWindows(CallBackPtr callPtr, int lPar);

    [DllImport("user32.dll")]
    static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount);

    [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
    static extern int GetClassName(IntPtr hWnd, StringBuilder lpClassName, int nMaxCount);

    [DllImport("User32", CharSet = CharSet.Auto, ExactSpelling = true)]
    public static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndParent);

    [DllImport("user32.dll", SetLastError = true)]
    public static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int W, int H, uint uFlags);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T08:14:58.767

作为可嵌入 Active/X 控件的 PowerPoint 查看器应该是可行的方法 - 你可以试试[这个](http://www.viscomsoft.com/products/powerpointviewer/index.html)（显然它不起作用 - 见评论）或[这个](http://pptocx.com/)

有关在 Windows 窗体应用程序中嵌入 Active/X 控件的信息，请参阅[此内容](http://msdn.microsoft.com/en-us/library/8ccdh774%28VS.80%29.aspx)

如果您计划显示 PowerPoint 的窗口没有改变大小，您也可以将 PowerPoint 幻灯片转换为位图，然后只显示位图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:59:00.327

我真的不知道是否可以在 winforms 中嵌入一个 ppt-viewer。我确实有另一个建议给你：使用浏览器控件（如果你想要更好的 html5 支持，或者下载一个用于 webkit 的控件）并使用像 impress.js 这样的 js 库来呈现演示文稿。只是一个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T08:31:11.930

最初由@danish 发布，[在这里](https://stackoverflow.com/questions/1259369/embed-powerpoint-viewer-in-c-sharp-win-form)。

请参阅此[链接](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/739d453e-092e-46c3-8bc2-1836d5a9b4f8)。您还可以在 WebBrowser 控件中显示 ppt。[这](http://support.microsoft.com/kb/304662)也可能有用。

基本上，它还允许您在可以轻松嵌入的 WebBrowser 控件中打开 ppt。如果您需要有关它的更多信息，请告诉我。

# mysql - 使用 MySQL 和 ejabberd 进行高效的外部排班

> ID：11360759
> 
> 赞同：10
> 
> 时间：2012-07-06T10:49:25.650
> 
> 标签：mysql, erlang, xmpp, ejabberd

# 问题

### *请注意，使用 Eugen 的视图想法直接在下面解决此问题！*

我正在为一个 PHP/MySQL 用户驱动的站点编写一个聊天模块，该站点允许两个用户交朋友，并且选择了 eJabberd 作为聊天系统。

我已经使用 PHP 守护程序成功设置了外部身份验证，现在我已经成功地通过手动使用`mod_roster_odbc`和填充 MySQL`rosterusers`表来将友谊引入 eJabberd。经过大量挖掘，我设法发现[这个特定的评论](http://www.ejabberd.im/node/2973#comment-52164)非常有助于了解将每列设置为什么，以便在聊天模块的朋友列表中表示这种友谊。

我目前处理友谊的方法是在`rosterusers`表中插入两行：

```
# Relationship user1 => user2
INSERT INTO rosterusers (username, jid, subscription, ask, server, type)
VALUES ('user1', 'user2@myserver.org', 'B', 'N', 'B', 'item');

# Relationship user2 => user1
INSERT INTO rosterusers (username, jid, subscription, ask, server, type)
VALUES ('user2', 'user1@myserver.org', 'B', 'N', 'B', 'item'); 
```

我对此不太满意，因为互惠友谊需要两行。

我了解 XMPP 按照标准允许用户之间的单链路和双链路。正如我的问题的性质所推断的那样，我自己的应用程序的朋友系统使用一行来表示友谊。

我的主要问题：

1.  是否有可能将这种友谊巩固在一行中？我从这个[非官方文档](http://www.ejabberd.im/node/2973#comment-52164)中尝试了一些组合，但没有成功。我正在通过使用 Pidgin 客户端连接到我的 XMPP 服务器进行测试。
2.  保持两个数据库（朋友和 XMPP 名册）同步的最佳方法是什么？我认为 MySQL`TRIGGER`可能是目前最干净的选择。

如果不是，那么我的另一个选择是更改`rosterusers`表并让它引用我自己的应用程序的朋友行，以便它像跨数据库外键一样工作。

# 解决方案代码

我按照 Eugen 的建议创建了一个视图。该代码不是最优雅的，但我已经对其进行了测试，它适用于 MySQL 5.5 上的 eJabberd 2.1。

我的确切设置使用了两个数据库，因此我使用`main_database.table_name`.

该代码是两个查询的联合 - 第一个查询 User, Friend，然后第二个插入 Friend, User。我正在使用`UNION ALL`速度，并让“重复”通过。

我认为这是处理问题的一种非常好的方法，因为不需要对应用程序进行任何更改，并且它会立即更新。

```
CREATE VIEW rosterusers AS

SELECT LCASE(ua1.Username) AS `username`, CONCAT(LCASE(ua2.Username), '@myserver.org') AS `jid`,
'B' AS `subscription`,
'N' AS `ask`,
'N' AS `server`,
'item' AS `type`,
'B' AS `subscribe`,
d1.Created AS `created_at`,
ua2.Username AS `nick`,
'' AS `askmessage`

FROM main_database.User_Friend AS `d1`

INNER JOIN main_database.User AS `ua1` ON `d1`.UserID = `ua1`.ID
INNER JOIN main_database.User AS `ua2` ON `d1`.FriendID = `ua2`.ID

WHERE d1.IsApproved = 1

UNION ALL

SELECT LCASE(ub2.Username) AS `username`, CONCAT(LCASE(ub1.Username), '@myserver.org') AS `jid`,
'B' AS `subscription`,
'N' AS `ask`,
'N' AS `server`,
'item' AS `type`,
'B' AS `subscribe`,
d2.Created AS `created_at`,
ub1.Username AS `nick`,
'' AS `askmessage`

FROM main_database.User_Friend AS `d2`

INNER JOIN main_database.User AS `ub1` ON `d2`.UserID = `ub1`.ID
INNER JOIN main_database.User AS `ub2` ON `d2`.FriendID = `ub2`.ID

WHERE d2.IsApproved = 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:05:36.777

IIUC，该表在您的服务器应用程序`rosterusers`的 POV 中是只读的。`eJabberd`这将使它变得简单，将其替换为 a `view`，在您自己的朋友表中的 1 行中创建所需的 2 行。

不知道自己友谊表的结构，我不能给你完整的代码，但是这里是我认为的伪SQL

```
CREATE VIEW rosterusers AS SELECT * FROM (
    SELECT 
        selfuser.name AS username, 
        frienduser.jid AS jid,
        -- ....,
        selfuser.jid AS jid_as_id
    FROM
        users AS selfuser
        INNER JOIN friendships ON ....
        INNER JOIN users AS frienduser ON ...
    UNION SELECT 
        frienduser.name AS username, 
        selfuser.jid AS jid,
        -- ....,
        frienduser.jid AS jid_as_id
    FROM
        users AS selfuser
        INNER JOIN friendships ON ....
        INNER JOIN users AS frienduser ON ...
); 
```

进而

```
SELECT
    username, jid, subscription, ask, server, type
FROM rosterusers
WHERE jid_as_id='user1@myserver.org' 
```

`UNION`应该给你 2 行，一个来自视图中的每个部分

# c# - 未设置主题

> ID：11360761
> 
> 赞同：0
> 
> 时间：2012-07-06T10:49:31.127
> 
> 标签：c#, asp.net, themes, preinit

我正在使用此代码更改应用程序主题

```
 protected void Page_PreInit(object sender, EventArgs e)
    {
        MasterPage m = Master;
        string theme = Session["theme"].ToString();
        Page.Theme = theme;
    } 
```

会话中的主题是 Theme Aqua ，但主题正在重置为标准。我正在使用带有 devexpress 控件的 devexpress 主题

这也是设置主题的好方法吗，有没有一种方法可以设置你的主题程序，而不是逐页进行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T10:59:11.697

您可以通过添加主题将主题应用于整个网站

```
<pages Theme="themeName"> 
```

元素添加到`<system.web>`Web.config 文件的部分。

这将自动将主题应用于您网站中的所有页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:54:06.630

要改变你的主题（这样你在创建控件时不需要重复它）把它放在你的 global.asax

```
protected void Application_PreRequestHandlerExecute(object sender, EventArgs e)
{
    DevExpressHelper.Theme = "Aqua";
} 
```

你可以使用 DevExpress 工具“ThemeDeployer”来复制你想要的主题文件:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:28:51.343

在 web.config 中为所有页面声明祖先并不少见

```
<pages pageBaseType="NicolasPierre.Page" etc 
```

然后将您的逻辑置于覆盖 OnPreInit 方法中。也可能对其他东西有用，比如前置标题。

# android - 软键盘按钮

> ID：11360767
> 
> 赞同：2
> 
> 时间：2012-07-06T10:50:03.310
> 
> 标签：android, android-softkeyboard

我的问题很简单。我只需要知道这个关闭键盘按钮会产生什么事件。我想监听事件并在捕获事件时执行一个简单的方法......我搜索了很多问题，但我尝试的所有解决方案都针对其他关键事件。

![键盘关闭按钮](../Images/9b870d34ad8522d67e14a15dd4414646.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:44:17.077

我之前对此进行了一些研究，并不断地在人们说没有这样的事件可以捕捉的地方进行交叉对话。

不确定您要捕获此事件的目的，但是，这里有一些解决方法可以帮助我：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    final int proposedheight = MeasureSpec.getSize(heightMeasureSpec);
    final int actualHeight = getHeight();

    if (actualHeight > proposedheight){
        // Keyboard is shown
    } else {
        // Keyboard is hidden
    }

    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
} 
```

[来源](https://stackoverflow.com/a/6324350/1134705)。让我知道这是否有帮助

# wso2 - WSO2 API 管理器 - 收到错误 - 身份验证失败

> ID：11360769
> 
> 赞同：1
> 
> 时间：2012-07-06T10:50:07.883
> 
> 标签：wso2, wso2-am

我正在尝试 WS02 API Manager，但在发送 REST API 调用时出现以下错误 -

```
<ams:fault xmlns:ams="http://wso2.org/apimanager/security">
   <ams:code>900901</ams:code>
   <ams:message>Authentication Failure</ams:message>
   <ams:description>Authentication failure for API: /api, version: 1 with key:     h0Bwxc94aBf6RJVnhtZeBqwp_hIa</ams:description>
</ams:fault> 
```

密钥是用户的生产密钥，并且该用户订阅了此 API。

原始请求如下所示

```
GET http://192.168.13.83:8280/api/1 HTTP/1.1
Accept-Encoding: gzip,deflate
Authorization: Bearer h0Bwxc94aBf6RJVnhtZeBqwp_hIa 
```

堆栈跟踪显示 -

```
[2012-07-06 14:38:40,210] ERROR - APIAuthenticationHandler API authentication failure
org.wso2.carbon.apimgt.handlers.security.APISecurityException: Authentication failure       for API: /api, version: 1 with key: h0Bwxc94aBf6RJVnhtZeBqwp_hIa
        at      org.wso2.carbon.apimgt.handlers.security.oauth.OAuthAuthenticator.authenticate(OAuthAuthent    icator.java:77)
        at     org.wso2.carbon.apimgt.handlers.security.APIAuthenticationHandler.handleRequest(APIAuthenti    cationHandler.java:82)
        at org.apache.synapse.rest.API.process(API.java:251)
        at     org.apache.synapse.rest.RESTRequestHandler.dispatchToAPI(RESTRequestHandler.java:76)
        at     org.apache.synapse.rest.RESTRequestHandler.process(RESTRequestHandler.java:63)
        at      org.apache.synapse.core.axis2.Axis2SynapseEnvironment.injectMessage(Axis2SynapseEnvironment    .java:180)
        at     org.apache.synapse.core.axis2.SynapseMessageReceiver.receive(SynapseMessageReceiver.java:83     )
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
        at      org.apache.axis2.transport.http.util.RESTUtil.invokeAxisEngine(RESTUtil.java:144)
        at     org.apache.axis2.transport.http.util.RESTUtil.processURLRequest(RESTUtil.java:139)
        at      org.apache.synapse.transport.nhttp.util.RESTUtil.processGetAndDeleteRequest(RESTUtil.java:1    39)
        at     org.apache.synapse.transport.nhttp.DefaultHttpGetProcessor.processGetAndDelete(DefaultHttpG    etProcessor.java:464)
        at     org.wso2.carbon.transport.nhttp.api.NHttpGetProcessor.process(NHttpGetProcessor.java:296)
        at org.apache.synapse.transport.nhttp.ServerWorker.run(ServerWorker.java:258)
        at     org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:172)
        at     java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at     java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

谁能告诉我这里有什么问题。

# php - 我需要为 php 5.2 重写这个 php 行

> ID：11360772
> 
> 赞同：1
> 
> 时间：2012-07-06T10:50:18.553
> 
> 标签：php

在这里出错..

```
$mail = new SendGrid\Mail(); 
```

这条线在 php 5.2 中不起作用，我已经阅读了 php 5.3 之后出现的斜线。

我该如何解决这个问题以与 php 5.2 兼容？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:52:43.243

只要`SendGrid\Mail`类是使用命名空间实现的（php >= 5.3 特性） - 没有解决方案只改变行

```
$mail = new SendGrid\Mail(); 
```

所以你还需要修改那个邮件类并删除所有 php 5.2 不兼容的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:54:18.760

您将必须删除所有[命名空间](http://php.net/manual/en/language.namespaces.php)。PHP 5.3 之前完全不支持，会导致解析错误。

您必须声明没有命名空间的类，并在没有命名空间的情况下实例化它们。如果您现有的代码使用命名空间为您提供的任何功能 - 例如重复的类名，这可能非常重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T10:53:21.487

看起来您正在使用仅兼容 PHP 5.3+ 的库（使用命名空间功能）。

恐怕唯一的解决方案是升级您的安装，或使用不使用命名空间功能的另一个库（或库的版本）。

[在此处查看 SendGrid PHP 包装器列表](http://docs.sendgrid.com/documentation/api-libraries/)。你应该找到一个与 PHP 5.2 兼容的，例如[这个](https://github.com/alonbendavid/SendGrid-Newsletter-PHP-Library).

您还可以尝试修改当前库以删除命名空间的使用，如其他答案中所建议的那样。由于库很小，您可以尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T10:53:49.673

直接包含文件并

$mail = 新邮件（）；

但可能会有更多的问题，而不是这个，最好是另一个图书馆。

# ios - UIScrollView 行为如何在我需要时不允许水平滑动

> ID：11360773
> 
> 赞同：0
> 
> 时间：2012-07-06T10:50:24.683
> 
> 标签：ios, iphone, cocoa-touch, uiscrollview, uikit

我需要制作一个带有滚动视图的应用程序。但我需要一个想法。我需要制作可以水平和垂直滑动的uiscrollview，但是当我向下滑动时，我需要不允许横向滑动。有可能吗？如何？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:56:40.343

我认为`directionalLockEnabled`属性`UIScrollView`是你要找的。

# ios - 达到触发条件时弹出警报视图

> ID：11360778
> 
> 赞同：2
> 
> 时间：2012-07-06T10:50:40.997
> 
> 标签：ios, xcode4, uialertview, xcode4.3, alert

我正在尝试在 Xcode 上制作游戏，并且我希望在用户达到某个分数（例如 100 分）时弹出一条警报消息。我有代码可以在视图加载时弹出警报。但我想要的是警报消息仅在玩家达到特定分数时显示。

游戏的计分方式是这样的：玩家每点击/点击一个按钮，他就得一分，所以点击 100 次后，他得到 100 分。

这是在视图加载时弹出警报消息的代码：

```
- (void)viewDidLoad
{  
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Tile" message:@"This is the message" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];

    [alert show];
    [alert release];

    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:25:40.370

在您的按钮操作调用方法中，当点达到 100 时显示警报。

例如

```
- (void) buttonAction {
    point++;
    if(point == 100)
      [self showAlert];
}

- (void) showAlert {

        UIAlertView *alert = [[UIAlertView alloc]

                          initWithTitle:@"Tile"
                          message:@"This is the message" 
                          delegate:nil 
                          cancelButtonTitle:@"Dismiss" 
                          otherButtonTitles:nil];

       [alert show];
        [alert release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:11:31.060

1.  不要将警报放在 viewDidLoad 中，而是将其放在调用任何名称的方法中。
2.  在您的按钮操作事件处理程序中，当计数达到 100 时，调用上面任何名称的方法以显示警报。

# java - 带参数的扩展策略模式：如何设置值

> ID：11360787
> 
> 赞同：0
> 
> 时间：2012-07-06T10:51:03.013
> 
> 标签：java, parameters, strategy-pattern

所以基本上我有不同的科学模型（算法）来计算某个值。每个算法都可以有一组不同的参数来微调模型。这些参数必须可由用户更改。（现在它将是一个简单的属性文件）。我使用的语言是Java。

所以我试着关注这个出版物

[http://www.hillside.net/plop/2010/papers/sobajic.pdf](http://www.hillside.net/plop/2010/papers/sobajic.pdf)

这是上面pdf的代码示例，我假设它是C#：

```
abstract class Algorithm
{
    public Algorithm()
        { }
    protected Parameter[] parameters;
    public Parameter[] getParameters()
        { return parameters.copy(); }
    public abstract void execute();
}

abstract class Parameter
{
    private string name;
    public string GetName()
        { return name; }
    public Parameter(string name)
        { this.name = name; }
}
class BoolParameter : Parameter
{
    private bool Value;
    public bool GetValue()
        { return Value; }
    public void SetValue(bool value)
        { Value = value; }
    public BoolParameter(string name, bool defaultvalue)
        : base(name)
    {
    Value = defaultvalue;
    }
}
class IntParameter : Parameter
{
private int min;
    private int max;
    private int Value;
    public int GetValue()
        { return Value; }
    public void SetValue(int value)
    {
        if (value < min)
        throw new ArgumentOutOfRange(GetName() + " can’t be less than " + min);
        if (value > max)
        throw new ArgumentOutOfRange(GetName() + " can’t be greater than " + max);
        Value = value;
    }
    public IntParameter(string name, int min, int max, int defaultvalue) : base(name)
    {
        this.min = min;
        this.max = max;
        Value = defaultvalue;
    }
} 
```

如何设置参数值？假设具体算法返回 2 个参数的数组或列表，一个是 IntegerParameter，另一个是 StringParameter。然而，上述模式中的 Parameter 接口没有 setValue 方法，因此客户端如何设置参数值并知道其类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:29:02.123

我会将所有参数视为一个，`int`或者`double`即使只有两个可能的值，例如使用 0 和 1 而不是 true 和 false。

您的算法需要一个可以更改的参数集合，以便产生结果。

# extjs4 - 如何向标签和文本字段添加值

> ID：11360788
> 
> 赞同：0
> 
> 时间：2012-07-06T10:51:13.463
> 
> 标签：extjs4, extjs4.1

我需要知道如何`Label`用`Store`. 在我的`Model`我定义了一个名为`bookname`. 我需要用书名填充这个标签。

我知道如何为 Grid 执行此操作，但不知道如何为 a`Label`或 a执行此操作`Textfield`。

在网格中；

```
{ text: "Book Name", dataIndex: 'bookname'}, 
```

但是，我们如何向标签和文本字段添加值。

**更新**

我仍然有这个问题。我无法将值设置为标签。（从商店加载后）。标签会显示，但不会填充从 STORE 获得的值。没有这样的错误。

```
Ext.define('Ex.view.info', {
    extend: 'Ext.window.Window',
    alias: 'widget.info',
    initComponent: function() {
        var st = Ext.getStore('peopleinformation');
        st.load();
        this.items = [
            {

                xtype: 'label',
                forId: 'myFieldId',
                text: 'My Awesome Field',
                name: 'personfirstname',
                margins: '0 0 0 10'

            }
        ];
        this.callParent(arguments);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:16:15.193

对于仅设置 label 的值，您可以使用标签 [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Label-method-setText中描述的 setText 方法](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Label-method-setText)

```
yourLabel.setText('value'); 
```

对于 textField - [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.Text-method-setValue](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.Text-method-setValue)

更新：

```
// in your store
 proxy: {
    type: 'ajax',
    url: 'you url',
    method: 'GET',
    headers: { 'Content-Type': 'application/json' },  //your response type like xml, json        
    reader: { type: 'json',            
        getResponseData: function (response) {
            var data = Ext.decode(response.responseText);
            //loop here , if more labels are there
            // get the object referance of label and update that
        }
    } 
```

更新：你试过：

```
 text: st.yourFieldName, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:53:18.617

各种`fields`通常组合为`form`- 中的项目（参见[http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Panel](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Panel)）。表单有一种方法`getForm().loadRecord(model)`可以将模型中的数据（记录在您的商店中）加载到表单中的所有字段。

PS：看起来您还没有阅读 Sencha 指南 (http://docs.sencha.com/ext-js/4-0/#!/guide)，因为我在您的其他问题上建议过您。你仍然没有大致了解事情是如何运作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:32:26.490

Ext 4.1 引入其中混入，使其`setFieldLabel()`在.`Ext.form.Labelable``Ext.form.field.Base``Ext.form.field.Text`

因此你可以打电话`myTextField.setFieldLabel("My Label Text")`

# sql-server - 从一个返回结果集的存储过程调用到另一个存储过程以组合该结果集

> ID：11360789
> 
> 赞同：2
> 
> 时间：2012-07-06T10:51:21.057
> 
> 标签：sql-server

我有一个提供一个输入参数的存储过程。它比较同一个表中两个列的值，并显示它是“可用”还是“不可用”。它将该表的所有行 (30) 作为结果集返回。当我运行它时，它就像

```
1   available
2   available
3   not available
4   not available
5   not available
6   available
7   not available
8   not available
9   available
10  available
11  available
12  not available 
```

但我想将 1 和 2 配对，然后将 3 和 4 配对。然后使用 OR 运算符显示“可用”或“不可用”。假设如果 1 是 'available' 并且 2 是 'available' ，那么将其显示为 'available'。只有该对的两个值都可用，然后将其显示为“不可用”。我将如何使用上述存储过程的结果集编写另一个存储过程。现在这个存储过程的结果集是 30 行，但我想通过配对 1 和 2、3 和 4 等来获得 15 个结果集。我想我必须将一个存储过程调用到另一个过程，但是我将如何在第二个存储过程中比较这些结果。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:39:04.693

```
-- Declare a table variable that captures
-- the output from your SP
declare @T table
(
  ID int,
  A varchar(15)
)

-- Add rows from SP to @T
insert into @T
exec GetValues

-- Query the table variable
select T1.ID as ID1,
       T2.ID as ID2,
       case when 'available' in (T1.A, T2.A)
            then 'available' 
            else 'not available'
       end as A 
from @T as T1
  inner join @T as T2
    on T1.ID + 1 = T2.ID
where T1.ID % 2 = 1 
```

结果与您的测试数据：

```
ID1         ID2         A
----------- ----------- -------------
1           2           available
3           4           not available
5           6           available
7           8           not available
9           10          available
11          12          available 
```

# c# - 如何填充具有列表的 ViewModel 单击提交按钮 mvc 3 后的属性？

> ID：11360795
> 
> 赞同：0
> 
> 时间：2012-07-06T10:52:11.857
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我想使用 viewModel 制作一周中的某一天复选框。视图上一切正常，但是，如果我单击提交以保存更改，`weeklySchedule`则在我的 httppost 方法中为空。

为什么为`weeklySchedule`空？如何将选定的复选框值发送到我的`HttPost`操作？任何建议都会有所帮助。

![在此处输入图像描述](../Images/d7c3e217d3f40b584cef61b1fa5cc6c7.png)

**模型：**

```
public class Settings
{
    public class WeeklySetting
    {
        public string DisplayName { get; set; }
        public string Value { get; set; }
        public bool IsChecked { get; set; }
    }
} 
```

**查看型号：**

```
public class ViewModels
{
    public class Weekly
    {
        public List&#60;Settings.WeeklySetting&#62; Settings { get; set; }
    }
}

public ActionResult CreateWeekly()
   {
       var model = new ViewModels.Weekly
       {
             Settings = new[] 
             {
             new Settings.WeeklySetting{ DisplayName="Monday", Value="MON", IsChecked=false},
             new Settings.WeeklySetting{ DisplayName="Tuesday", Value="TUE", IsChecked=false},
             new Settings.WeeklySetting{ DisplayName="Wednesday", Value="WED", IsChecked=false},
             new Settings.WeeklySetting{ DisplayName="Thursday", Value="THU", IsChecked=false},
             new Settings.WeeklySetting{ DisplayName="Friday", Value="FRI", IsChecked=false},
             new Settings.WeeklySetting{ DisplayName="Saturday", Value="SAT", IsChecked=false},
              new Settings.WeeklySetting{ DisplayName="Sunday", Value="SUN", IsChecked=false},
            }.ToList()
       };
           return View(model);

   }
   [HttpPost]
   public ActionResult CreateWeekly(string submitButton, ViewModels.Weekly weeklySchedule)
   {

    //Do something
       return View("CreateWeekly", weeklySchedule);
   } 
```

**看法：**

```
`<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<MyProject.Controllers.ViewModels.Weekly>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    CreateWeekly
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<% using (Html.BeginForm())
      { %>

```
 &#60;div&#62;
  &#60;%foreach (var item in Model.Settings)
    {%&#62;

        &#60;%:Html.CheckBoxFor(q=&#62;item.IsChecked) %&#62;
        &#60;%:Html.LabelFor(q=&#62;item.IsChecked,item.DisplayName) %&#62;
        &#60;%:Html.HiddenFor(q=&#62;item.Value) %&#62;
   &#60;% } %&#62;

  &#60;/div&#62;
&#60;br /&#62;
   &#60;input value="GenerateForWeekly" name="submitButton" type="submit" /&#62;
      &#60;%} %&#62; 
```` 

`</asp:Content>` 
```

* * *

 `## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:38:07.530

当您开始在视图中使用 foreach() { } 循环时，模型绑定不会很好地工作。如果您将 EditorTemplate 用于 WeeklySetting，您会发现它会更好地为您整理所有索引。

例如（这是 MVC3 Razor 视图语法）

(1)为WeeklySetting创建一个编辑器模板：

```
@model Settings.WeeklySetting
@Html.CheckBoxFor(m => m.IsChecked)
@Html.LabelFor(m => m.IsChecked,Model.DisplayName)
@Html.HiddenFor(m => m.DisplayName)
@Html.HiddenFor(m => m.Value) 
```

(2) 使用 EditorFor 在您的视图中渲染（无 foreach）：

```
@using (Html.BeginForm())
{
    <div>
        @Html.EditorFor(m => m.Settings)
    </div>
    <br />
    <input value="GenerateForWeekly" name="submitButton" type="submit" />
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T20:02:59.593

如果您使用`for`循环而不是`foreach`. 如此处所示：http: [//haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)`

# python - 如何生成多个手册页？

> ID：11360797
> 
> 赞同：4
> 
> 时间：2012-07-06T10:52:13.200
> 
> 标签：python, python-sphinx, manpage

我有一个用 Python 编写的命令行程序。我想用 Sphinx 生成手册页。

我想通过以下命令获得一页：

`man myprog foo`--> 重定向到`foo`命令的手册页。

`man myprog foo2`--> 重定向到`foo2`命令的手册页。

等等

问题是 Sphinx 只生成**一个**包含所有手册页的手册页。

我怎样才能得到我的预期结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:06:03.437

给定结构

```
 docs/
    docs/source
    docs/source/conf.py
    docs/source/manable1/includable.rst
    docs/source/index.rst 
```

然后，如果您使用的是 docs 类型

```
 sphinx-build -b man -c source  source/manable1/ man/other_man 
```

您可以通过修补makefile或bash中的一个衬里来自动化它

```
 for i in source/man*; do
            sphinx-build -b man -c source  $i man/$( basename $i );
    done 
```

（未经测试，但应该接近）

当心包含路径，亲戚，交叉引用....

它可能会限制您在 Rst 中可以做的事情

# css - 背景图像从右边缘 x px

> ID：11360799
> 
> 赞同：3
> 
> 时间：2012-07-06T10:52:17.053
> 
> 标签：css

我`<select>`在网站上有各种宽度的元素。我想`13px`从选择宽度的右边缘定位背景图像。在伪代码中：

```
select {
    background-image: url(../images/select-arrow.png), 
    background-position: center (right - 13px);
} 
```

我将如何在 CSS 中做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T11:17:03.970

[CSS3 重新定义了 background-property](http://www.w3.org/TR/css3-background/#the-background-position)，这样你就可以说：

```
background-position: right 13px top; 
```

~~然而，浏览器支持并不是最好的 atm。~~

要解决此问题，您可以：

~~*   向图像本身添加透明像素并将其定位在右上角~~
*   ~~或在元素宽度已知后用javascript计算位置~~

编辑：[您现在可以安全地使用此功能。](http://caniuse.com/#search=background-position)

# java - 如何在构造函数中获取具有泛型参数的类的构造函数

> ID：11360800
> 
> 赞同：2
> 
> 时间：2012-07-06T10:52:26.337
> 
> 标签：java

问题：获取C类中A的子类（如下图H类）的参数化构造函数引用。

```
Class A<T extends B> {
  public A(T objectT, D objectD, E objectE, F objectF) {

  }

  public T aMethodWithTAsReturnType();
}

Class B { }

Class C<T extends A<?>> {
  private Constructor<?> classAConstructor;
  public C(Class<T> classA) {
     classAConstructor=classA.getConstructor(B.class, D.class,E.class,F.class)
  }
}

Class H extends A<X> {
  public H(X objectX, D objectD, E objectE, F objectF) {}
}

Class X extends B {}

new C(new H(objectX,objectD,objectE,objectF)); 
```

上面的代码配置会导致`NoSuchMethodException`一个新的 Class C 对象被创建，因为它找不到 Class A 的构造函数

我现在正在尝试使用：

```
Method methodInA = classA.getMethod('aMethodWithTAsReturnType')
Class<?> TClassInA = methodInA.getReturnType(); 
```

作为行中的替代品，`B.class`因为`classA.getConstructor`我猜这就是问题所在，因为 B 类是 T 的超类型（在 A 类中）。

但是...当我使用 methodInA.getReturnType() 它返回 B.class！而不是扩展 B 的类。然后我找到了一个`getGenericReturnType()`方法，但它返回一个 Type 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:25:18.203

这对我有用：

```
public class G {
    static class A<T extends B> {
        A(T objectT, D objectD, E objectE, F objectF) { }
    }

    static class B { }

    static class C<XT extends B, T extends A<XT>> {
        private Constructor<?> classAConstructor;
        public C(Class<T> classA, Class<XT> classX) throws SecurityException, 
            NoSuchMethodException {
            classAConstructor = classA.getConstructor(classX, D.class,
                    E.class, F.class);
        }
    }
    static class D { }
    static class E { }
    static class F { }

    static class X extends B { }

    public static class H extends A<X> {
        public H(X objectT, D objectD, E objectE, F objectF) {
            super(objectT, objectD, objectE, objectF);
        }
    }

    public static void main(String[] args) throws SecurityException,
        NoSuchMethodException {
        new C<X, H>(H.class, X.class);
    }
} 
```

更新：您需要找到某种将 A 的参数化传递给 C 的方法。我已经更新了您的代码以说明这样做的一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:00:21.667

`getConstructor()`仅返回*公共*构造函数。尝试使用`getDeclaredConstructor()`.

编辑：

问题是 H 构造函数不接受 B 作为参数，而是 X（它是 B 的子类）。因此，构造函数的签名是`H(X, D, E, F)`。此构造函数仅接受 的实例`X`作为其第一个参数。它不接受任何类型的`B`实例，而只接受`X`.

# c# - 如何使用 dbSchema 实体框架为类名添加前缀

> ID：11360801
> 
> 赞同：2
> 
> 时间：2012-07-06T10:52:27.577
> 
> 标签：c#, entity-framework, t4

我的问题是我必须从现有数据库中导入我的实体。数据库有模式，一些表在不同的模式中共享相同的名称。当这生成模型时，我得到 MyTable 和 MyTable1 （如果这就是它们的名称）。

我想做的是将它们命名为 MyTable 如果它使用 dbo 模式，但如果它是任何其他模式，则使用模式名称作为前缀，例如。MySchema_MyTable。

我知道我可以通过更改设计器中的名称手动执行此操作，但这可能无法单独由我自己完成，并且更多表和模式将添加到此数据库中。所以我想强制执行这个命名约定。

我在想最好的方法是使用 t4 模板。我可以轻松地将其更改为添加前缀，这很有效，但我不知道如何获取该特定实体的数据库模式名称。T4 模板不附带智能感知。

我将不胜感激您的建议。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T01:04:15.857

您可以使用 TiraggoEdmx 获取数据库信息。请参阅[http://brewdawg.github.io/Tiraggo.Edmx/](http://brewdawg.github.io/Tiraggo.Edmx/)您可以通过 Visual Studio 中的 NuGet 安装它，它会提供 Microsoft 隐藏的 EDMX 文件中的所有元数据，非常简单，效果很好。

# sql - 需要按照以下格式从 SQL 生成 XML

> ID：11360802
> 
> 赞同：2
> 
> 时间：2012-07-06T10:52:37.190
> 
> 标签：sql, sql-server, xml

我在 SQL 服务器数据库中有一个表，我正在使用这个查询从表中生成一个 XML。

```
SELECT OrderNumber, CustomerID, ITEM
FROM OrderHeader
FOR XML RAW('Order'), ELEMENTS, ROOT('Orders') 
```

我得到这样的 XML：

```
<Orders>
<Order>
    <OrderNumber>SO101</OrderNumber>
    <CustomerID>1</CustomerID>
            <Item>item 1</Item>
</Order>
<Order>
    <OrderNumber>SO102</OrderNumber>
    <CustomerID>1</CustomerID>
            <Item>item 2</Item>
</Order>
</Orders> 
```

但我需要生成以下格式的 XML。

```
<Orders>
<Order OrderNumber= 'SO101'>        
    <CustomerID>1</CustomerID>
            <Item>item 1</Item>
</Order>
  <Order OrderNumber= 'SO102'>      
    <CustomerID>1</CustomerID>
            <Item>item 2</Item>
</Order>
</Orders> 
```

即订单号列需要显示为订单节点的属性。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:12:41.800

我想您会发现 XML RAW 会限制您的选择。

尝试使用 XML PATH，如下所示：

```
SELECT OrderNumber AS @Id, CustomerID, ITEM
FROM OrderHeader
FOR XML PATH('Order'), ELEMENTS, ROOT('Orders') 
```

我想看看这是否能解决问题，目前也试图改进我的 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:12:33.487

试试这个，

```
SELECT 
    OrderNumber AS "Order/@OrderNumber", 
    CustomerID, 
    ITEM
FROM 
    OrderHeader
FOR XML PATH, ELEMENTS, ROOT('Orders') 
```

了解更多[详情](http://www.a2zdotnet.com/View.aspx?Id=69#.T_bGr_WfZNE)

# accumulo - 配置 accumulo 时的问题

> ID：11360809
> 
> 赞同：9
> 
> 时间：2012-07-06T10:52:49.407
> 
> 标签：accumulo

在我的系统中，Hadoop 和 zookeeper 工作正常。现在我刚刚配置了 Accumulo。但是当我要初始化 Accumulo 时

**累积初始化**

它显示以下错误。

* * *

```
[root@hydDev32 bin]# ./accumulo init

Uncaught exception: Provider com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl not found
javax.xml.parsers.FactoryConfigurationError: Provider com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl not found
        at javax.xml.parsers.DocumentBuilderFactory.newInstance(Unknown Source)
        at org.apache.accumulo.start.classloader.AccumuloClassLoader.getAccumuloString(AccumuloClassLoader.java:307)
        at org.apache.accumulo.start.classloader.AccumuloClassLoader.getAccumuloClasspathStrings(AccumuloClassLoader.java:291)
        at org.apache.accumulo.start.classloader.AccumuloClassLoader.findAccumuloURLs(AccumuloClassLoader.java:217)
        at org.apache.accumulo.start.classloader.AccumuloClassLoader.getAccumuloClassLoader(AccumuloClassLoader.java:375)
        at org.apache.accumulo.start.classloader.AccumuloClassLoader.getClassLoader(AccumuloClassLoader.java:393)
        at org.apache.accumulo.start.Main.main(Main.java:39)

[root@hydDev32 bin]# 
```

* * *

任何人都可以帮我解决这个问题... ??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T23:57:03.580

我刚刚遇到了同样的问题，结果证明`JAVA_HOME`我的环境中有一个糟糕的设置。一旦我清除了它，`JAVA_HOME`设置就`accumulo-env.sh`接管了，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T00:37:10.993

我无法评论以询问更多信息，因此这可能是在黑暗中拍摄。但是没有找到 com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl。这应该包含在 rt.jar（OSX 中的 classes.jar）中，它是 java 运行时的一部分。所以我会调查你正在使用的java版本。

另外，如果我弄错了，请您澄清一下Accumulo、Hadoop和Java的版本。

# php - PHP 通过引用传递混淆

> ID：11360810
> 
> 赞同：5
> 
> 时间：2012-07-06T10:53:01.547
> 
> 标签：php, pass-by-reference

长话短说，我有以下功能作为我的框架的一部分：

```
public function use_parameters()
{
    $parameters = func_get_args();

    $stack = debug_backtrace();

    foreach($stack[0]['args'] as $key => &$parameter)
    {
        $parameter = array_shift($this->parameter_values);
    }
} 
```

$this->parameter_values = array('value1', 'value2', 'value3', 'value4', 'value5', ...);

在以下情况下使用：

```
$instance->use_parameters(&$foo, &$bah); 
```

分配：

```
$foo = 'value1';
$bah = 'value2'; 
```

再次调用它

```
$instance->use_parameters(&$something); 
```

将设置

```
$something = 'value3' 
```

等等。

从 5.3 开始，它将返回“已弃用：调用时传递引用已被弃用”警告。为了符合 5.3 的工作方式，我删除了 & 的结果：

```
$instance->use_parameters($foo, $bah); 
```

不幸的是，这导致无法设置论点，我正在努力想出一个解决方案。

为了它的价值，我在 Apache/2.2.16 (Debian) 上运行 PHP v5.3.3-7

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:50:57.633

你不能在 PHP 中这样做，你正在滥用引用的概念。您必须明确指定引用参数，尽管使用默认值。 *但是*，您不想使用 NULL 作为默认值，因为这是未分配的引用变量将被设置的值。所以你需要定义一些你知道不会用作参数的常量，现在代码看起来像

```
 const dummy="^^missing^^";

    public function use_parameters(&$a, &$b=self::dummy, &$c=self::dummy ) {
        $a=array_shift($this->parameter_values);
        if($b!==self::dummy) $b=array_shift($this->parameter_values);
        if($c!==self::dummy) $c=array_shift($this->parameter_values);
        # add $d,$e,$f,... as required to a sensible max number
    } 
```

请注意，因为您正确使用了引用，所以您不需要 debug_backtrace() 垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:24:00.873

你不能在 PHP 5 中这样做，或者......正如你所见，你可以这样做，但它已被弃用并引发警告。您必须具有预定义的最大函数参数数或使用数组：

```
public function use_parameters(&$arg1, &$arg2 = NULL, &$arg3 = NULL)
{
    // if ($arg2 !== NULL)
    // if ($arg3 !== NULL)
}

$parameters = array(0 => &$foo, 1 => &$bah);

public function use_parameters($args)
{
    // Handle the array elements
} 
```

# progress-4gl - 进展4GL基础学习

> ID：11360817
> 
> 赞同：1
> 
> 时间：2012-07-06T10:53:33.407
> 
> 标签：progress-4gl, openedge

您认为**Progress 4GL 的基础**会涉及哪些主题？请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T11:57:59.203

除了任何语言的基本编程之外，您可以通过浏览在线文档来获取这些内容——http: [//communities.progress.com/pcom/docs/DOC-107735](http://communities.progress.com/pcom/docs/DOC-107735)和[http://documentation.progress .com/output/OpenEdge111/pdfs/dvref/dvref.pdf](http://documentation.progress.com/output/OpenEdge111/pdfs/dvref/dvref.pdf)，使 Progress 4GL 最独特的概念是：

*   Progress DB 不是 SQL。不要试图表现得像这样。
*   事务是隐式自动启动的。
*   Buffer（记录）、Lock 和 Transaction 的作用域不同，但它们是相互影响的。

另外——Progress 几乎总是被使用，因为它是构建应用程序所使用的语言。该应用程序可能具有某种框架。不要与框架抗争。学习使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-17T16:49:11.710

我认为这个问题目前对 Stackoverflow 来说太模糊了；我建议编辑这个问题并提出更尖锐的问题，而不是投下如此广泛的网络。但是，我会回答一些我刚开始时想知道的项目。

除了汤姆的回答，我建议您**查看语法**。有一些怪癖可能会绊倒一直在使用其他更流行的语言进行开发的人。

沿着语法主题，**数据类型的命名方式**与大多数语言不同。CHARACTER 表示字符串。LOGICAL 表示布尔值。? （不在引号中）在大多数语言中的行为类似于 NULL。有关一些差异，请参阅我的答案的评论。

与具有与 SQL 交互的 PL 语句的 PL/SQL 不同，**Progress 的语句和查询是交织在一起**的 - 没有“独立即席查询”的概念，除非编写一个包含显示语句的快速过程。

定义表格时，**可以定义显示格式；但是，这不会限制某人编写“破坏”该格式的程序**。例如，一个十字符的字段可以包含数千个字符，而不会引发异常。如果以默认格式显示，查看者将看到“????????????”和一条消息。默认显示格式可以在任何程序中被覆盖。

# git - Git：如何使用 Git 管理网站？如何使用 Git 进行网站部署？

> ID：11360818
> 
> 赞同：1
> 
> 时间：2012-07-06T10:53:35.320
> 
> 标签：git, apache, document-root

最初，我以为我的问题是，`How to maintain branches in Apache's DocumentRoots?`但意识到正确的问题实际上是`How to use Git to deploy stuff to web -server such as Apache?`。

我觉得我现在已经理解 DocumentRoot -问题，它需要我想要避免的 Apache 黑客攻击，因为使用副作用和将 repo 放在部署 -dir 之外的更简单的解决方案，但现在理解 git-fetch-hook 和如果外部的东西是一个大的目录，如何部署东西，也许只是 cp 除了然后是 mv - 但必须有一些更好的同步部署 -dir 的方法，思考。

> **DocumentRoot 问题**
> 
> > DocumentRoots 在 httpd.conf 中为可托管材料指定目录。现在在这样的文件夹中，我想要 ticgit -branches 和 feature -branches。当我在某个 DocumentRoot 中创建分支时，我将 master 和另一个分支混淆了。`$ git checkout --orphan feature-0.01`不为空，但包含 master -things。`$ ti new ...`创建一个包含来自 master 的东西的分支，显然是 Ticgit 中的一些错误（它在小型存储库中工作，但为较大的存储库创建 ticgit -branch，例如我的 DocumentRoot 导致严重破坏）。那么如何在 Apache 的 DocumentRoot 中维护您的分支？你那里有门票吗？你的功能分支呢？看我对此感到困惑，`$ git checkout feature-0.1`现在apache如何知道它应该托管哪些文件？主人里面的东西还是里面的东西`feature-0.1`？
> 
> **我对 DocumentRoot 问题的最新理解**
> 
> > 现在后者的问题是部署并不意味着像这样工作。我知道 SethRobertson 的指南介绍了一些使用 git 进行部署的方法。我认为它们是迄今为止最好的方法，而不是在部署 -dir（通常是 www）中使用 git -repo 来破解 Apache。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T02:48:12.473

> 错误的！

不要在你的部署 -dir 中开发（在 Apache 中通常是 www）。[在其他地方开发并使用此处](http://sethrobertson.github.com/GitBestPractices/#workflow)的 SethRobertson 指南中概述的副作用和适当的版本控制良好规则，特别是关于版本 1.0 和标记的部署分支的规则，以便您维护随着时间的推移事情如何发展的时间表。他在下面声明了一个不要搞乱开发和部署的活动，这对您的用户来说也可能不是一件好事（他们可能不想在浏览时看到您对网站的编辑）。

**SethRobertson 的指南指出不要搞乱部署和开发**

> 使用 git 作为 web 部署工具
> 
> 是的，它可以在一个足够简单/非关键的环境中完成，例如 Abhijit Menon-Sen 关于使用 git 管理网站的文档以提供帮助，尽管还有其他示例。但是，这不会为您提供原子更新、同步数据库更新或工业部署系统的其他配件。

所以`Using Git to manage a web site`-tutorial [here](http://toroid.org/ams/git-website-howto)， e​​xample [here](https://gist.github.com/1714235)和[here](http://joemaller.com/990/a-web-focused-git-workflow/) - 但请注意他的警告`"however, this does not give you atomic updates, synchronized db--"`。

# jquery - Superfish 下拉列表 - 可能仅适用于一个顶级 LI？

> ID：11360821
> 
> 赞同：0
> 
> 时间：2012-07-06T10:53:44.290
> 
> 标签：jquery, css, wordpress, superfish

我正在将 Superfish 应用于菜单，但实际上只有一个顶级 LI 需要它，我希望其他 LI 项没有它！

由于 wordpress PHP 正在生成源代码，因此我想到了一种方法 - 只需使用 JQuery 删除其他顶级 LI 项目中的任何 UL。

```
$('#navmain > li').each(function(index) {

    if($(this).attr('id' ) !== 'menu-item-14') {
        $(this).find('ul').remove();
    }
}); 
```

然而，Superfish 有更好的方法吗？即一个回调，也许我可以将我想要下拉的LI id 传递给它？

# android - Android 2.2 - ActionBar 替代品 - 更改视图的方法？

> ID：11360823
> 
> 赞同：0
> 
> 时间：2012-07-06T10:53:46.873
> 
> 标签：android

我无法让 ActionBarSherlock 工作，我会遇到很多错误，而且我真的不知道该怎么做......

所以我问是否有Action Bar的替代品，或者一个很酷、简单的方法（对于用户）来改变一个视图......

谢谢。

这是（一个）ABS错误：

```
...
[2012-07-06 12:01:45 - ANDA] Jar mismatch! Fix your dependencies 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:56:59.157

您遇到依赖问题的原因是 ActionBar 是为 Android 3.0 及更高版本引入的，但我相信您正在为 Android 2.2 开发。因此，您的 Android 2.2 应用程序中不能有 ActionBar。

但是如果你确实需要使用 ActionBar，那么试试这个很棒的 AP​​I： http: [//actionbarsherlock.com/](http://actionbarsherlock.com/)

SherlockActionBar 的示例 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.test.sherlock"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="13" />

<application android:icon="@drawable/icon" android:label="@string/app_name" android:theme="@style/Theme.Sherlock" >
    <activity android:name=".SherlockSimpleActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

否则，如何使用 Tabs 切换视图？我建议您使用 TabHost 来动态更改视图。看看文档：http: [//developer.android.com/reference/android/widget/TabHost.html](http://developer.android.com/reference/android/widget/TabHost.html)

如果您想逐步了解它，请查看本教程： [http ://www.mkyong.com/android/android-tablayout-example/](http://www.mkyong.com/android/android-tablayout-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:18:38.477

您的项目中的 可能与 ABS中`android-support-v4.jar`的冲突。`android-support-v4.jar`尝试从`/libs/`目录中删除。

# hibernate - 严重：初始 SessionFactory 创建失败。java.lang.NoSuchMethodError：org.objectweb.asm.ClassWriter。 (Z)V

> ID：11360825
> 
> 赞同：1
> 
> 时间：2012-07-06T10:53:52.153
> 
> 标签：hibernate

我正在使用netbeans，并希望将struts和hibernate集成为一个简单的应用程序，以在jsp页面上显示表的所有数据。

但我收到以下错误

```
type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.lang.reflect.InvocationTargetException 
```

在 glassfish 服务器的日志中，我收到以下错误

```
 SEVERE: Initial SessionFactory creation failed.org.hibernate.HibernateException: /hibernate.cfg.xml not found
SEVERE: Initial SessionFactory creation failed.java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(Z)V 
```

HibernateUtil.java：

```
package controller;

import org.hibernate.cfg.Configuration;
import org.hibernate.SessionFactory;

/**
 * Hibernate Utility class with a convenient method to get Session Factory
 * object.
 *
 * @author ROMO
 */
public class HibernateUtil {

    private static final SessionFactory sessionFactory;

    static {
        try {
            // Create the SessionFactory from standard (hibernate.cfg.xml) 
            // config file.
            sessionFactory = new Configuration().configure().buildSessionFactory();
        } catch (Throwable ex) {
            // Log the exception. 
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

查找问题.java：

```
package controller;

import beans.Question;
import com.opensymphony.xwork2.ActionSupport;
import java.util.ArrayList;
import java.util.List;
import org.hibernate.Session;

/*
 * @author ROMO
 */
public class FindQuestion extends ActionSupport {

    private String q = null;
    private String categoryname = null;
    private List questionList = new ArrayList();

    @Override
    public String execute() throws Exception {
        q = "Question";
        categoryname = "Category";
        try {
            Session session = HibernateUtil.getSessionFactory().getCurrentSession();
            session.beginTransaction();
            this.questionList = (List<Question>) session.createQuery("from Question").list();
            session.getTransaction().commit();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return SUCCESS;
    }

} 
```

有人可以请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:35:24.210

您的*asm*版本与您的 Hibernate 版本不兼容。检查兼容版本的一种方法是查看 maven 依赖项，例如 [hibernate-core](http://mvnrepository.com/artifact/org.hibernate/hibernate-core)。即使您不进行 Maven 构建，它也是可用的方式。

例如，一种工作组合是：

*   休眠 3.6.10，
*   cglib 2.2
*   汇编 3.1。

如果您需要更适合您的答案，您必须分享有关当前包含哪些库的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T14:14:54.710

我找到了这个：

[http://www.hildeberto.com/2008/05/hibernate-and-jersey-conflict-on.html](http://www.hildeberto.com/2008/05/hibernate-and-jersey-conflict-on.html)

本质上，以防万一上面的完整解释：我通过使用 cglib-nodep-2.2.3.jar 修复了 asm 的类加载问题。这需要替换的原因是 ASM 是一个流行的库。Hibernate 是针对 asm 1.5.3 构建的，但 asm 现在是版本 4。在某个地方，我容器中的类加载器正在选择更新版本的 asm，并且 ClassWriter 类已更改。Hibernate 在幕后使用 cglib，而后者又使用 asm 1.5.3。这就是问题所在。cglib-nodep 是为解决这个问题而构建的。asm 类已从其标准包移至 cglib 包，nodep 库使用的正是这些 cglib 版本。

Spring 采用了非常相似的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-29T20:14:25.980

只需添加到您的 pom.xml ：

```
<dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-asm</artifactId>
        <version>1.0</version>
</dependency> 
```

# javascript - 玩！框架。如何获取 JPA 对象中的字段子集并在模板中对其进行处理

> ID：11360827
> 
> 赞同：0
> 
> 时间：2012-07-06T10:53:57.753
> 
> 标签：javascript, ajax, json, playframework, playframework-2.0

我试图只检索我的 JPA 对象的一部分属性以在我的 Play 中使用！模板。

这是在我的控制器应用程序中：

```
public static List<Object> all2D() {
    EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("defaultPersistenceUnit");
    EntityManager entityManager = entityManagerFactory.createEntityManager();

    TypedQuery<Object> query = entityManager.createQuery("SELECT title, unitPrice FROM Item i", Object.class);
    return query.getResultList();
} 
```

这是我之前使用的代码，用于从我的 JPA 对象中获取每个字段，称为 Item

```
<script type="text/javascript">

$(function(){
    get_itemz();       
});

var get_itemz = function() {       
    $.ajax({
        url: '@routes.Application.getJson()',
        processData:false,
        type: 'GET',
        beforeSend:function(jqXHR, settings){                   
            jqXHR.setRequestHeader("Content-Type", "application/json");                 
        },
        success: function(data, textStatus, jqXHR){                 
            process_itemz(data);   
        },
        error: function(jqXHR, textStatus, errorThrown){                
        },
        complete: function(jqXHR,textStatus){                   
        }   
    });
};

var process_itemz = function(itemz){      
    var contentDiv=$("div#content");
    contentDiv.append("<ul>");            
    $.each(itemz,function(i,item){
        contentDiv.append("<li>" + item.name + "</li>");
    });
    contentDiv.append("</ul>");                 
};
</script> 
```

我如何转换 javascript 以处理对象列表并打印名称和单位价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:02:29.197

我知道您为此要求使用 Javascript，但如果 Javascript 不是强制性的，则使用 scala.html 的替代方法可能大致如下。

由于您已经生成了列表，因此只需将其传递给您的模板。

```
@(objects: List[Object]) 
```

然后，由于您只想打印名称和单价，因此只需遍历列表并输出您的字段。

```
@for(event <- eventsList){
     object.name object.unitPrice    
} 
```

您也可以在表格中使用 for 循环，但这应该或多或少地完成您想要做的事情，以简单地引用模板中的元素。

# c# - 对象引用未设置为 if (!string.IsNullOrEmpty(tdcd.Text) && !string.IsNullOrEmpty(tdrcd.Text)) 处的对象实例

> ID：11360828
> 
> 赞同：0
> 
> 时间：2012-07-06T10:54:00.623
> 
> 标签：c#, javascript, asp.net, c#-4.0, code-behind

```
 protected void EditButton_Click(object sender, EventArgs e)
    {

        TextBox tdcd = (TextBox)FormViewDiagnostic.FindControl("DIAG_COMPL_DATETextBox");
        TextBox tdrcd = (TextBox)FormViewDiagnostic.FindControl("DIAG_REVIEW_COMPL_DATETextBox");
        RadioButtonList rbl =(RadioButtonList)FormViewDiagnostic.FindControl("DIAG_LL_APPROVALRadioButtonList");
        TextBox tll = (TextBox)FormViewDiagnostic.FindControl("DIAG_LL_COMMENTSTextBox");

        //if (!"".Equals(tdcd) && !"".Equals(tdrcd))

        if (!string.IsNullOrEmpty(tdcd.Text) && !string.IsNullOrEmpty(tdrcd.Text))
        {

            //tdcd.Visible = true;
            //tdrcd.Visible = true;

            FormViewDiagnostic.FindControl("DIAG_LL_APPROVALRadioButtonList").Visible = true;
            FormViewDiagnostic.FindControl("DIAG_LL_COMMENTSTextBox").Visible = true;
        }
        else
        {
            //tdcd.Visible = false;
            //tdrcd.Visible = false;
            FormViewDiagnostic.FindControl("DIAG_LL_APPROVALRadioButtonList").Visible = false;
            FormViewDiagnostic.FindControl("DIAG_LL_COMMENTSTextBox").Visible = false;
        }
    } 
```

对象引用未设置为行中对象的实例

```
if (!string.IsNullOrEmpty(tdcd.Text) && !string.IsNullOrEmpty(tdrcd.Text)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:55:08.283

您的`tdcd`or`tdrcd`为空。这就是为什么你会得到这个例外。您可以先检查它们是否为空。

```
if ((tdcd != null && tdrcd!=null) && (!string.IsNullOrEmpty(tdcd.Text) && !string.IsNullOrEmpty(tdrcd.Text))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:56:56.223

`tdcd`或者`tdrcd`是`null`您搜索它，并且不能保证您总是会得到它。

```
TextBox tdcd = (TextBox)FormViewDiagnostic.FindControl("DIAG_COMPL_DATETextBox");
TextBox tdrcd = (TextBox)FormViewDiagnostic.FindControl("DIAG_REVIEW_COMPL_DATETextBox"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T11:01:03.863

`tdcd`或`tdrcd`为空。这意味着`FormViewDiagnostic.FindControl()`为其中一个返回 null 。

这可能意味着或者`"DIAG_COMPL_DATETextBox"`不是`"DIAG_REVIEW_COMPL_DATETextBox"`控件的正确 ID。

检查这些 ID 是否与表单上实际声明的内容相匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T11:08:13.847

`TextBox`引用（和`tdcd`/或`tdrcd`）为空。

您应该使用`FormView.ItemDataBound`适当的事件`FormViewMode`（检查 的[`CurrentMode`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.currentmode%28v=vs.100%29)属性`FormView`）来获取对控件的引用。

您还需要`DataBind`以前的 FormView 来创建控件。

例如（假设`TextBoxes`在 The 中`EditItemTenmplate`）：

```
protected void EditButton_Click(object sender, EventArgs e)
{
    Object someSource=null;
    FormViewDiagnostic.ChangeMode(FormViewMode.Edit);
    FormViewDiagnostic.DataSource = someSource;
    FormViewDiagnostic.DataBind();
}

protected void FormViewDiagnostic_DataBound(Object sender, EventArgs e)
{
    var view = (FormView)sender;
    if (view.CurrentMode == FormViewMode.Edit)
    {
        var txt1 = (TextBox)view.FindControl("DIAG_COMPL_DATETextBox");
        var txt2 = (TextBox)view.FindControl("DIAG_REVIEW_COMPL_DATETextBox");
        var txt3 = (TextBox)view.FindControl("DIAG_LL_COMMENTSTextBox");
        var rbl = (RadioButtonList)view.FindControl("DIAG_LL_APPROVALRadioButtonList");
        txt3.Enabled = rbl.Enabled = txt1.Text.Length != 0 && txt2.Text.Length != 0;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T10:56:32.763

做这样的检查

```
if(tdcd != null && tdrcd != null)
{
// do stuff
} 
```

# php - 名称为“ysdf.player_comment”的表已存在

> ID：11360830
> 
> 赞同：1
> 
> 时间：2012-07-06T10:54:05.097
> 
> 标签：php, orm, doctrine, doctrine-orm

当我执行 orm:schema-tool:create 时，我正在试验这个错误。这是我第一次使用 Doctrinem，所以我有几个疑问，我认为导致错误的一个原因是我有一个带有 3 个 Comment 对象数组的 Player 类。我对 db 方案的想法是：

```
player_comment(id_player,id_comment)
commentsliked(id_player,id_comment)
commentsdisliked(id_player,id_comment) 
```

请注意，comments 是双向关系，尽管 commentsLiked 和 commentsDisliked 不是。

据我了解，Doctrine 想将之前的 3 个表命名为“player_comment”。

提前致谢。

我的类 Player 看起来像这样：

```
/**
 * @Entity @Table(name="players") 
 */
class Player
{
/** 
 * @Id @Column(type="integer") @GeneratedValue 
 * @var int
**/
private $id;

/** 
     * @OneToMany(targetEntity="Comment", mappedBy="writer")
 * @var Comment[]
    **/
private $comments = null;
/**
 * @ManyToMany(targetEntity="Comment")
     * @Table(name="commentsliked")
 * @var Comment[]
**/
private $commentsLiked = null;
/**
 * @ManyToMany(targetEntity="Comment")
     * @Table(name="commentsdisliked")
 * @var Comment[]
**/
private $commentDisliked = null;
} 
```

我的班级评论如下所示：

```
/**
 * @Entity @Table(name="comments")
 */
class Comment {
/** 
 * @Id @Column(type="integer") @GeneratedValue 
 * @var int
**/
private $id;

/** 
     * @ManyToOne(targetEntity="Player", inversedBy="comments") 
 * @var Player
    **/
private $writer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T21:22:27.170

我从关联类注释中定义的连接表和 ManyToMany 注释中定义的连接表的冲突中遇到了这个问题。

具有直接多对多关系的两个实体中的映射定义似乎导致使用“joinTable”注释自动创建连接表。但是，连接表已经由其基础实体类中的注释定义，我希望它使用此关联实体类自己的字段定义，以便使用其他自定义字段扩展连接表。

解释和解决方案感谢论坛“[教义注释问题](http://forum.symfony-project.org/viewtopic.php?t=36745&p=122235)”中的这篇文章。这篇文章提请注意有关[ManyToMany 单向关系](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#many-to-many-unidirectional)的 Doctrine 文档。查看有关使用“关联实体类”的方法的注释，从而将两个主要实体类之间的多对多注释映射直接替换为主实体类中的一对多注释和两个“多对多” -one' 关联实体类中的注释。此论坛帖子中提供了一个[带有额外字段的关联模型](https://groups.google.com/forum/#!topic/doctrine-user/cw8fyH9_ebY)的示例：

```
public class Person {

  /** @OneToMany(targetEntity="AssignedItems", mappedBy="person") */
  private $assignedItems;

}

public class Items {

    /** @OneToMany(targetEntity="AssignedItems", mappedBy="item") */
    private $assignedPeople;
}

public class AssignedItems {

    /** @ManyToOne(targetEntity="Person")
    * @JoinColumn(name="person_id", referencedColumnName="id")
    */
private $person;

    /** @ManyToOne(targetEntity="Item")
    * @JoinColumn(name="item_id", referencedColumnName="id")
    */
private $item;

} 
```

另请参阅[Doctrine 2.x 多对多关联类的示例](http://codemonkeys.be/2013/02/example-of-a-doctrine-2-x-many-to-many-association-class/#sthash.eeDqUGSe.dpuf)和[Doctrine2：使用引用表中的额外列处理多对多的最佳方法](https://stackoverflow.com/questions/3542243/doctrine2-best-way-to-handle-many-to-many-with-extra-columns-in-reference-table?rq=1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:35:00.663

我使用了@JoinTable，如[http://docs.doctrine-project.org/en/latest/reference/association-mapping.html#many-to-many-unidirectional](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html#many-to-many-unidirectional)中所示。

我更新了commentsLiked和commentsDisliked的注释：

```
/**
 * @ManyToMany(targetEntity="Comment")
 * @JoinTable(name="commentsliked",
 * joinColumns={@JoinColumn(name="player_id", referencedColumnName="id")},
 * inverseJoinColumns={@JoinColumn(name="commment_id",referencedColumnName="id")})
 * @var Coments[]
**/
private $commentsLiked = null;
/**
 * @ManyToMany(targetEntity="Comment")
 * @JoinTable(name="commentsDisliked",
 * joinColumns={@JoinColumn(name="player_id", referencedColumnName="id")},
 * inverseJoinColumns={@JoinColumn(name="comment_id",referencedColumnName="id")})     )
 * @var Comment[]
**/
private $commentsDisliked = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T10:13:25.503

一个很酷的解决方案是为`ManyToMany`关联提供一个“可更新视图”，并为矩阵实体使用一个真实的表。这样，您将从这两种方法中受益。

# algorithm - 关于无分支二分查找

> ID：11360831
> 
> 赞同：4
> 
> 时间：2012-07-06T10:54:06.317
> 
> 标签：algorithm, branch

我问了一个关于减少未命中预测的问题。

Jerry Coffin 给了我一个令人印象深刻的答案。

[关于减少分支未命中预测](https://stackoverflow.com/questions/11349221/about-reducing-the-branch-miss-prediciton)

二进制搜索是无分支的，但是当我在我的集​​合交集算法中使用它时，我发现它比原来的二进制搜索慢得多。什么原因？

**更新：**

我使用以下事件来测试 i7 处理器的分支未命中预测数：BR_MISS_PRED_RETIRED。我发现无分支版本的分支缺失大约是原始版本的一半。

对于缓存未命中：我使用 LLC_MISSES 来测试最后一级缓存未命中的数量，也是一半。

但时间是原来的2.5倍左右。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-01-20T03:06:10.567

当数组很大并且内存访问时间相对于分支错误预测很大时，就会出现条件移动（无分支）搜索的问题。

条件移动搜索类似于：

```
int needle; // value we are searching for
int *base = ...; // base pointer
int n; // number of elements in the current region
while (n > 1) {
  int middle = n/2;
  base += (needle < *base[middle]) ? 0 : middle;
  n -= middle;
} 
```

请注意，我们有条件地更新`base`而不使用分支（至少假设编译器不决定将三元运算符实现为分支）。问题在于，`base`每次迭代中的值都*依赖*于前一次迭代中比较的结果，因此每次访问内存都会发生一次，并通过数据依赖关系进行序列化。

对于大型数组的搜索，这消除了*内存级并行性*的可能性，并且您的搜索需要类似`log2(N) * average_access_time`. 基于分支的搜索没有这样的数据依赖性：它只有迭代之间的推测控制依赖性：CPU 选择一个方向并跟随它。如果它猜对了，您将同时加载当前迭代和下一次迭代的结果！它并没有就此结束：猜测仍在继续，您可能同时有十几个负载在飞行。

当然，CPU 并不总是猜对！在最坏的情况下，如果分支完全不可预测（您的数据和针值没有偏差），那么一半的时间都是错误的。尽管如此，这意味着平均而言，它将`0.5 + 0.25 + 0.125 + ... = ~1`在当前访问之外维持额外的访问。这不仅仅是理论上的：尝试对随机数据进行二分搜索，由于并行性加倍，您可能会看到基于分支的搜索速度比无分支搜索快 2 倍。

对于许多数据集，分支方向并非完全随机，因此您可以看到超过 2 倍的加速，就像您的情况一样。

对于适合缓存的小型阵列，情况正好相反。无分支搜索仍然存在同样的“串行依赖”问题，但加载延迟很小：几个周期。另一方面，基于分支的搜索经常遭受错误预测，其成本约为 20 个周期，因此在这种情况下，无分支通常会更快结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:46:01.983

因为那个版本正在做大量的加载和存储。

像这样的紧密循环中的分支预测通常没有效果，因为处理器有多个流水线。在评估分支测试时，两个代码路径都已被解码和评估。只保留一条路径的结果 - 但通常不会有来自分支的管道停顿。

另一方面，写入内存可能会产生影响。通常您正在写入 CPU 上的内存缓存，但 MMU 必须保持缓存线与系统的其余部分同步缓存未命中并使 CPU 重新加载内存缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-09T02:52:40.350

不久前我看到了一种有趣的方法，可能也是在 stackoverflow 上，关于避免数据获取成本。有人编写了二进制搜索，他们将数组视为隐式树并预取左孩子*和*右孩子。这是在当前元素与测试值进行比较之前完成的。

将内存需求增加两倍实际上可以加快搜索速度，这似乎非常违反直觉，但显然更早开始获取弥补了额外的内存命中。

如果我没记错的话，一半的读取实际上是非依赖的，因为没有使用这些值。它可以通过推测性预取加载、非相关加载或普通加载来完成，其中提取的值之一在循环时被移动到保存当前元素的寄存器中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T11:11:18.713

然后使用您的原始二进制搜索。对随机位置的数组访问并不比分支未命中好多少，特别是因为在这种情况下编译器不能为变量使用寄存器。

# android - 在我的可扩展列表视图中隐藏键盘重置数据

> ID：11360834
> 
> 赞同：0
> 
> 时间：2012-07-06T10:54:18.953
> 
> 标签：android, expandablelistview

我有一个带有我自己的适配器的可扩展列表视图，在孩子们中，我有微调器、edittext 等。如果我编辑任何一个，当键盘隐藏时，重置数据。我怎样才能解决这个问题？我把我最男人的：

```
<activity
        android:name=".PresupuestoYCierre"
        android:configChanges="keyboardHidden|orientation|keyboard"
        android:windowSoftInputMode="adjustPan" >
    </activity> 
```

任何帮助¿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:30:10.763

我想问题不在于键盘。它是因为列表视图回收。

在使用 Spinners 和 EditText 自定义列表视图之前，您需要了解列表视图在 android 中的工作原理。android中的Listview不会存储任何值，您需要维护一个新的数据源来存储用户在列表中输入的值。

我希望这个网址会有所帮助。

[http://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/](http://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/)

[http://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296)

# c# - 锁定或不锁定 ASP.Net 应用程序中的单例公共方法

> ID：11360835
> 
> 赞同：3
> 
> 时间：2012-07-06T10:54:18.953
> 
> 标签：c#, asp.net, thread-safety

我有一个引用包含单例的 DLL 的 ASP.Net 应用程序。单例只包含两个可公开访问的方法，没有公共属性。Web App 在 Application_Start 期间创建此单例的实例。然后在整个应用程序生命周期中都可以使用。

单例维护与第三方应用程序的连接，并侦听在第三方应用程序中触发的许多不同事件。这些事件在发生时在单例中记录和处理。

当用户访问 Web 应用程序时，他们的请求会使用单例中的公共方法，而单例又使用私有成员数据来调用第三方应用程序上的方法。这些调用位于 try...catch 块中。

我是否应该锁定公共方法以维护线程安全，如果是这样，一个仅用于锁定目的的 System.Object 类型的简单私有成员就足够了吗？

这是单例的一些“伪代码”。我希望我的问题可以理解。

```
using My3rdPartyDLL;

public sealed class MySingleton
{
    private static MySingleton instance = new MySingleton();
    private Object lockObj = new Object();

    private My3rdPartyAPI myAPI = null;

    public static MySingleton Instance
    {
        get{ return instance; }
    }   

    static MySingleton()
    {
    }

    private MySingleton() 
    {
        Initialise(); // Creates third party API and hooks up events.
    }

    // Here is the public method that I want to ensure is
    // thread safe.
    public void SomePublicMethod(String myString)
    {
        lock (lockObj)
        {
            try
            {
                My3rdPartyDLL.MyMethod(myString);
            }
            catch (Exception ex)
            {
                // deal with exception
            }
        }
    }

    private void My3rdParty_Event(EventObj obj)
    {
        MyEventLogger.WriteToLog(obj);  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:58:34.667

> 好一点，但我不知道第 3 方是否是线程安全的。因此，我创建了单例来维护我的 Web 应用程序和 API 之间的单点内聚。我想如果我不能确定 3rd Party API 是线程安全的，我应该采取防御措施并在我自己的代码中处理它。也许我刚刚回答了我自己的问题......如果是这种情况，使用 lockObj 是一种处理这个问题的好方法吗？

鉴于您无法确定外部方法是否是线程安全的，最好同步对它的调用。

您可以锁定一个 static `lockObj`，但要注意性能。如果您每秒处理大量请求，那么您将遇到问题（请求等待其他请求释放监视器），如果该方法在每个请求或接近一次/请求（或更多）时调用.

由于您要锁定单个方法，因此您应该可以使用`lock`. `ManualResetEvent`所以这里对于,`Monitor`和替代品没有真正的用途。

# database - 在 OAS 10g 上通过 JSP 页面连接到 Oracle 数据库时出错

> ID：11360836
> 
> 赞同：0
> 
> 时间：2012-07-06T10:54:20.250
> 
> 标签：database, oracle, jsp

我正在使用 Oracle 应用服务器 10.1.2.0.2。我正在尝试将 oracle 数据库与 jsp 登录页面连接..稍后将重定向到表单。现在我只是想将我的页面与数据库连接起来。

我的“connect.jsp”在目录“C:\DevSuiteHome2\forms\j2ee\formsapp\formsweb”中

我可以通过[http://p---w0--4.lo-----a.com:8889/forms/helloworld.jsp](http://p---w0--4.lo-----a.com:8889/forms/helloworld.jsp) [工作 jsp 文件]访问 jsp 文件

connect.jsp的源代码：

`<%@ page import="java.sql.*" %>` `<HTML>` `<HEAD>` `<TITLE>Simple JSP/Oracle Query Example</TITLE>` `</HEAD>` `<BODY>`

`<%`

`Class.forName("oracle.jdbc.OracleDriver");`

`Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@p---w0--4.lo---a.com:8889:xii", "i----er", "i----er");` `// @//machineName:port:SID, userid, password`

`%>` `</BODY>` `</HTML>`

现在当我尝试访问：[http](http://p---w0--4.lo-----a.com:8889/forms/connect.jsp) ://p---w0--4.lo-----a.com:8889/forms/connect.jsp它给出了以下错误：

500 Internal Server Error java.sql.SQLException: Io exception: Bad packet type at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:137) at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:174)在 oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:286) 在 oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:327) 在 oracle.jdbc.driver.PhysicalConnection.(PhysicalConnection.java:433)在 oracle.jdbc.driver.T4CConnection.(T4CConnection.java:150) 在 oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:31) 在 oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:571)在 java.sql.DriverManager.getConnection(DriverManager.java:512) 在 java.sql.DriverManager.getConnection(DriverManager.java:171) 在 _loginbox._check1._jspService(_check1.java:50) [SRC:/LOGINBOX/check1.jsp:12] 在 com.orionserver[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].http.OrionHttpJspPage.service(OrionHttpJspPage.java:56) 在 oracle。 jsp.runtimev2.JspPageTable.service(JspPageTable.java:350) 在 oracle.jsp.runtimev2.JspServlet.internalService(JspServlet.java:509) 在 oracle.jsp.runtimev2.JspServlet.service(JspServlet.java:413) 在 javax com.evermind 上的 .servlet.http.HttpServlet.service(HttpServlet.java:853)[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:824) at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:330) at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1\. 2.0.2)]。server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java:830) at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.HttpRequestHandler.run(HttpRequestHandler.java:285) at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.HttpRequestHandler.run(HttpRequestHandler.java:126) at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0) .2)].util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:186) 在 java.lang.Thread.run(Thread.java:534)evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.HttpRequestHandler.run(HttpRequestHandler.java:126) at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2) )].util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:186) 在 java.lang.Thread.run(Thread.java:534)evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2)].server.http.HttpRequestHandler.run(HttpRequestHandler.java:126) at com.evermind[Oracle Application Server Containers for J2EE 10g (10.1.2.0.2) )].util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:186) 在 java.lang.Thread.run(Thread.java:534)

您的回复将不胜感激。我是初学者所以请原谅一些新手问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:29:04.767

感谢您的回复，但这是我的错误。我传入了错误的主机作为参数。我上面的代码可以正确连接到 Oracle 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:52:23.657

我认为这是你应该做的

```
<html>
   <head> 
      <title>Simple JSP/Oracle Query Example</title> 
   </head> 
   <body>
<%
     Class.forName("oracle.jdbc.OracleDriver");
     Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@//your_host_name_or_your_ip:1521/your_database_name", "user", "password");
     System.out.println("Is connection equal to null");
     System.out.println(conn == null);
%>
   </body>
</html> 
```

您可以检查[此](http://www.orafaq.com/wiki/JDBC)以获取要使用的适当 url。如果您还有问题，请告诉我。

# c# - 如何从设定位置更改滚动条轨道颜色？

> ID：11360837
> 
> 赞同：1
> 
> 时间：2012-07-06T10:54:22.793
> 
> 标签：c#

我有两个水平滚动条，它们一起移动，我的两个文档的宽度不同。

不会一直滚动的滚动条必须在不会影响 Web 浏览器滚动的位置上突出显示红色。

在下面的图片中，右侧的网络浏览器是完整的 webBrowser2Document.Body.ScrollRectangle.Right 但左侧的浏览器仍然可以滚动更多。

因此，当网络浏览器位置达到 webBrowser2Document.Body.ScrollRectangle.Right 时，如何将剩余轨道变为红色？

或者更好的是，我如何从病房的某个位置将轨道颜色的一部分设置为红色。

![在此处输入图像描述](../Images/0b4337ed61e55e5bb4bcfe418064cbdd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:38:03.083

如果您将 XAML 用于您的 GUI，我建议您根据此样式为 ScrollBar 制作一种新样式：http: [//msdn.microsoft.com/en-us/library/ms742173.aspx](http://msdn.microsoft.com/en-us/library/ms742173.aspx)

更改 Track.IncreaseRepeatButton 的样式以使用将红色设置为前景色的新样式。

# memory - 分段内存管理

> ID：11360840
> 
> 赞同：1
> 
> 时间：2012-07-06T10:54:28.410
> 
> 标签：memory, virtual, segments

这是一个非常简单的问题！它与编程挑战有关，您必须编写基于分段内存模型的虚拟机，该模型具有 16 字节段大小（符号 seg:offset）。我们还有 2 个段寄存器（cs、ds）！机器初始化为 cs=0x0 和 ds =0x10

[http://www.canyoucrackit.co.uk//15b436de1f9107f3778aad525e5d0b20.js](http://www.canyoucrackit.co.uk//15b436de1f9107f3778aad525e5d0b20.js)

问题：

1) 为什么 ds = 0x10 (=16) ？对于特定的虚拟机，这是任意的吗？

2) 如果 cs=0 且 ds = 16，则数据和代码段相互重叠！代码段和数据段如何重叠？

3) 代码段和数据段是固定大小的（在本例中为 16 字节）！我认为它们的尺寸是动态的！更通用：当我们说“代码段”时，我们的意思是我们有一个动态大小的段，可以进一步分成固定大小的小段？

我在这里想念什么？

# c++ - QThread：使用 GUI 反馈阻塞进行并行执行？

> ID：11360842
> 
> 赞同：3
> 
> 时间：2012-07-06T10:54:38.770
> 
> 标签：c++, multithreading, qt, qthread

# 设想

可以说，我有一个名为`parallelRun`. 它需要一个工人列表，每个工人都有一个`getWorkAmount():int`，一个`run()`方法，一个`finished()`信号和一个`cancel()`槽：

```
void parallelRun( std::vector< Worker* > workers ); 
```

其实施应：

## 1.打开一个`QPogressDialog`：

```
unsigned int totalWorkAmount = 0;
for( auto it = workers.begin(); it != workers.end(); ++it )
{
    totalWorkAmount += ( **it ).getWorkAmount();
}

LoadUI ui( 0, totalWorkAmount, this ); 
```

和

```
class LoadUI : public QObject
{
    Q_OBJECT

public:

    LoadUI( int min, int max, QWidget* modalParent )
        : totalProgres( 0 )
        , progressDlg( "Working", "Abort", min, max, modalParent )
    {
        connect( &progressDlg, SIGNAL( canceled() ), this, SLOT( cancel() ) );

        progressDlg.setWindowModality( Qt::WindowModal );
        progressDlg.show();
    }

    bool wasCanceled() const
    {
        return progressDlg.wasCanceled();
    }

public slots:

    void progress( int amount )
    {
        totalProgres += amount;

        progressDlg.setValue( totalProgres );
        progressDlg.update();

        QApplication::processEvents();
    }

signals:

    void canceled();

private slots:

    void cancel()
    {
        emit canceled();
    }

private:

    int totalProgres;
    QProgressDialog progressDlg;
} 
```

## 2.为每个worker创建一个线程

```
std::vector< std::unique_ptr< QThread > > threads;
for( auto it = workers.begin(); it != workers.end(); ++it )
{
    std::unique_ptr< QThread > thread( new QThread() );

    Worker* const worker = *it;
    worker->moveToThread( thread.get() );

    QObject::connect( worker, SIGNAL( finished() ), thread.get(), SLOT( quit() ) );
    QObject::connect( &ui, SIGNAL( canceled() ), worker, SLOT( cancel() ) );
    QObject::connect( *it, SIGNAL( progressed( int ) ), &ui, SLOT( progress( int ) ) );

    thread->start( priority );

    threads.push_back( std::move( thread ) );
} 
```

## 3.同时运行它们

```
for( auto it = workers.begin(); it != workers.end(); ++it )
{
    QMetaObject::invokeMethod( *it, "run", Qt::QueuedConnection );
} 
```

`load()`当用户单击 UI 按钮时运行。

# 问题

如果我想`parallelRun`阻塞直到所有工作人员完成，我应该如何扩展这段代码，而不冻结`QProgressDialog`？

## 审议

### 使用屏障

`parallelRun`我尝试在例程末尾添加以下代码：

```
QApplication::processEvents();
for( auto it = threads.begin(); it != threads.end(); ++it )
{
    ( **it ).wait();
} 
```

这几行额外代码的影响是，`LoadUI::progress`永远*不会进入*，因为 GUI 线程处于*休眠*状态，因此它的事件循环没有被处理：在 Qt 中，信号通过将它们发布到事件循环来传递到插槽线程，与插槽所属的对象相关联。这就是为什么`progressed`永远不会传递工人的信号的原因。

我认为，适当的解决方案是在工作人员发出信号时`QApplication::processEvents()` *在 GUI 线程中运行。*`progressed`另一方面，我想这是不可能的，因为 GUI 线程已经睡着了。

### 另一种可能的解决方案

另一种可能性是使用类似*主动等待*的解决方案：

```
for( auto it = threads.begin(); it != threads.end(); ++it )
{
    while( ( **it ).isRunning() )
    {
        QApplication::processEvents();
    }
}
for( auto it = threads.begin(); it != threads.end(); ++it )
{
    ( **it ).wait();
} 
```

这还需要在之后添加以下代码行`thread->start( priority );`：

```
while( !thread->isRunning() ); 
```

我不认为这是一个很好的解决方案，但至少它有效。如果没有主动等待的缺点，如何做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:00:29.423

而不是自己构建。也许 QThreadPool 是您正在寻找的？

QThreadPool 有一个等待所有工作线程的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:50:45.557

您可以使用线程的`finished()`信号来等待它们在主 GUI 循环中完成，而不是使用`QApplication::processEvents`. 进度对话框模式将确保只有该对话框窗口处于活动状态，直到它被显式关闭。

```
class WorkerManager : public QObject {
    Q_OBJECT
private:
    // to be able to access the threads and ui, they are defined as a members
    std::vector<std::unique_ptr<QThread> > threads;
    LoadUI *ui;

    int finishedThreadCount;
public:
    WorkerManager() 
        : finishedThreadCount(0)
    {
        // Open the QProgressDialog
        ...
        // Create and start the threads
        ...
        // Connect the finished() signal of each thread 
        // to the slot onThreadFinished
        for( auto it = threads.begin(); it != threads.end(); ++it )  {
            QObject::connect(
                it->get(), SIGNAL(finished()), 
                this, SLOT(onThreadFinished()) );
        }
    }

private slots:
    void onThreadFinished() {
         ++finishedThreadCount;

         if(finishedThreadCount == threads.size()) 
         {
              // clean up the threads if necessary
              // close the dialog
              // and eventually destroy the object this itself
         }
    }
}; 
```

或者你可以运行一个嵌套`QEventLoop`来等待线程同步完成，同时仍然保持 GUI 响应：

```
// Open the QProgressDialog
...
// Create and start the threads
...
// Create and run a local event loop,
// which will be interrupted each time a thread finishes
QEventLoop loop;
for( auto it = threads.begin(); it != threads.end(); ++it )  
{
    QObject::connect(
        it->get(), SIGNAL(finished()), 
        &loop, SLOT(quit()) );
}  
for(int i = 0, threadCount = threads.size(); i < threadCount; ++i) 
    loop.exec(); 
```

如果只有在工作完全完成时进度才达到最大值，您可以使用which`progressDlg->exec()`代替`QEventLoop`which 将阻塞直到达到最大值或直到用户单击“取消”按钮。

# iphone - 音频频率和幅度

> ID：11360846
> 
> 赞同：0
> 
> 时间：2012-07-06T10:54:49.580
> 
> 标签：iphone, audio, frequency, waveform, spectrogram

我需要从 iPhone 录制音频。在录制过程中，我需要知道当前时刻有多少个音频波以及每个波的频率和幅度。在我看来，avaudiorecorder 帮不了我。

我查看了 Apple 的 SpeakHere 示例代码，但我只能从这里获得幅度（据我所知）。

我查看了 Apple 的 aurioTouch 示例代码。看起来，它确实是我需要的，但是示例代码非常大，而且主要是用 C++ 编写的，所以我很难理解它。

谁能给我例子，如何获得音频频率和幅度。如果你给我代码示例会更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:16:33.323

Apple 的 aurioTouch 示例应用程序似乎是毫无理由地使用某些 C++ 编写的。将代码转换为纯 C，也许你会更好地理解它。近乎实时的 DSP 音频分析并没有变得容易得多，因此请阅读该主题。

# javascript - 用于 javascript 中电子邮件验证的正则表达式

> ID：11360847
> 
> 赞同：0
> 
> 时间：2012-07-06T10:54:49.920
> 
> 标签：javascript, regex

我正在尝试使用正则表达式验证电子邮件。我几乎完成了，但仅在一个条件下我就失败了，那就是“'-'（连字符）后面不应该跟着'@'”。我尝试了不同的方式，但没有奏效。下面是我目前正在使用的正则表达式。

```
regex = /^(?!.*\.{2})[a-zA-Z0-9][a-zA-Z0-9#$%&\*\+-/=\?\_`|~]*@[a-zA-Z0-9][a-zA-Z0-9-_.]*\.[a-zA-Z]{2,4}$/; 
```

PS：我知道上述正则表达式停止使用两个连续期间，但它是我的项目要求:(

请帮助我验证“-”后跟“@”，反之亦然。

谢谢，耶斯万斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:00:16.083

最简单的方法是`(?!.*-@)`在您的第一次前瞻之后添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:17:56.143

为什么不直接添加

```
[a-zA-Z0-9#$%&\*\+-/=\?\_`|~]*[a-zA-Z0-9#$%&\*\+/=\?\_`|~]@ 
```

代替

```
[a-zA-Z0-9#$%&\*\+-/=\?\_`|~]*@ 
```

?

是否可以在狗面前有一个`+`，或者说，一个权利？`#`

# c++ - 在 C++ 接口中返回父类型

> ID：11360852
> 
> 赞同：0
> 
> 时间：2012-07-06T10:54:58.190
> 
> 标签：c++

在 C++ 中使用接口时；你有你的抽象（父）类。然后你有从父类继承并实现纯虚函数的子类。

当另一个类使用（子）接口时，此时抽象类的意义何在？如果您尝试在函数中使用父类型，即返回类型Parent，您会得到编译器错误（可能是因为编译器不知道要分配多少内存）。

谁能告诉我上面的怎么做？

IE

父级 = 形状。孩子 = 矩形。第三个类，其中包含返回形状类型的方法？

提前感谢您的任何帮助/信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:03:05.020

一个很大的优势是所有孩子共享相同的界面。如果你有第二个从父类继承的子类（Child = Circle），那么无论具体的子类如何，它们都可以使用相同的功能。

想象一下，你有一个带有指向形状指针的向量（vector < Shape* >），那么你在向量中有哪些形状并不重要，如果你的基类 Shape 有一个虚拟方法 Draw()，你可以使用它在没有明确知道如何实现 Draw 方法的情况下，从向量的每个元素中提取方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:04:29.560

您不能实例化抽象类。时期。如果您有一个要通过基类接口访问的子级，则必须通过指针或对基类的引用来访问该子级。

```
class A
{
public:
  virtual void doit() = 0;
}

class B : public A
{
public:
  virtual void doit()
  {std::cout << "Hi.";}
}

...later, in main

A *a = new B;
a->doit(); //this calls B's implementation. 
```

如果你不知道为什么这很方便，你应该研究一下“多态性”这个术语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:03:28.343

我认为您正在返回堆栈上的对象，这不起作用，因为您根本无法实例化抽象类型：

```
Parent Child::foo() {
  return Child(12);
} 
```

这意味着，编译器为 a 保留（或者更确切地说，将保留）空间`Parent`。`Parent`并在调用时尝试复制构造`foo`。

你的意思*可能*是这样的：

```
Parent* Child::foo() {
  return new Child(12); // actually you should really be using a shared pointer here, but that's a different story
} 
```

这是可行的，因为指向的指针`Parent`和指向的指针`Child`具有大小和对齐方式。

`Child`由于协方差，您甚至可以直接返回 a 。C++ 允许您像`Parent* Parent::foo();`继承自.`Child* Child::foo();``Child``Parent`

# java - 在硒中测试页面加载时间的正确方法？

> ID：11360854
> 
> 赞同：10
> 
> 时间：2012-07-06T10:55:01.207
> 
> 标签：java, selenium, delay, web-testing

我正在尝试以编程方式测试网站列表的加载时间。目的是粗略地模拟用户将感知的页面加载时间。

我的第一种方法是在循环中调用以下内容：

```
 startTime = System.currentTimeMillis();
    driver.get("http://" + url);
    diff = System.currentTimeMillis() - startTime;
    System.out.println("Load time was " + diff); 
```

问题是有时我在页面真正加载之前得到时间结果（即我得到 50 毫秒时间），所以我猜控制在完成之前被交给下一条指令`driver.get()`。

我应该怎么做才能改进这个测试？

**编辑：**

正如 user1258245 建议的那样，我可以等待一个元素加载，但问题是我不知道哪些页面会提前加载。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T14:58:57.173

有两种方法可以为您提供有意义的数据。

1.  将 Browsermob 代理与 Selenium 一起使用。这是python中的一个示例，但在Java中几乎相同

    ```
    from browsermobproxy import Server
    server = Server("path/to/browsermob-proxy")
    server.start()
    proxy = server.create_proxy()

    from selenium import webdriver
    profile  = webdriver.FirefoxProfile()
    profile.set_proxy(proxy.selenium_proxy())
    driver = webdriver.Firefox(firefox_profile=profile)

    proxy.new_har("google")
    driver.get("http://www.google.co.uk")
    proxy.har # returns a HAR JSON blob

    proxy.stop()
    driver.quit() 
    ```

从 返回的 HAR 文件`proxy.har`（只是一个 JSON blob）将为您提供所需的信息。今年早些时候我[在博客上写过](http://www.theautomatedtester.co.uk/blog/2012/automating-web-performance-data-collection-with-browsermob-proxy-and-selenium.html)

2.  另一种方法是使用现代浏览器中可用的导航计时规范。您需要做的就是执行一些 javaScript，您将获得页面加载等的详细信息。

    ```
    ((JavascriptExecutor)driver).executeScript("var performance = window.performance || {};" + 
                "var timings = performance.timing || {};"+
                "return timings;");

    /* The hashmap returned will contain something like the following.
     * The values are in milliseconds since 1/1/1970
     *
     * connectEnd: 1280867925716
     * connectStart: 1280867925687
     * domainLookupEnd: 1280867925687
     * domainLookupStart: 1280867925687
     * fetchStart: 1280867925685
     * legacyNavigationStart: 1280867926028
     * loadEventEnd: 1280867926262
     * loadEventStart: 1280867926155
     * navigationStart: 1280867925685
     * redirectEnd: 0
     * redirectStart: 0
     * requestEnd: 1280867925716
     * requestStart: 1280867925716
     * responseEnd: 1280867925940
     * responseStart: 1280867925919
     * unloadEventEnd: 1280867925940
     */ 
    ```

# android - 在 web 视图中打开 youtube 视频

> ID：11360855
> 
> 赞同：-1
> 
> 时间：2012-07-06T10:55:02.380
> 
> 标签：android, android-webview

我想在 web 视图中打开 youtube 视频。在 web 视图中，我转到 youtube 中的视频页面，当我尝试播放视频时，它没有启动。是否可以在 web 视图中播放 youtube 视频？如果不是，我如何指示我的应用程序使用手机的本机媒体播放器打开视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:00:46.787

试试这个代码：

```
myWebView = (WebView) findViewById( R.id.webview);

String playVideo= "<html><body>Youtube video .. <br> <iframe class=\"youtube-player\" type=\"text/html\" width=\"640\" height=\"385\" src=\"http://www.youtube.com/embed/bIPcobKMB94\" frameborder=\"0\"></body></html>";

myWebView.loadData(playVideo, "text/html", "utf-8"); 
```

是的，不要忘记在您的清单中添加权限：

```
<uses-permission  android:name="android.permission.INTERNET"/> 
```

我希望这能帮到您。

# vim - Macvim：在粘贴之前修改剪贴板寄存器的内容

> ID：11360856
> 
> 赞同：1
> 
> 时间：2012-07-06T10:55:02.463
> 
> 标签：vim, clipboard, macvim

假设我在 Safari 中选择了一些文本并将其复制到剪贴板，例如“foo, bar”（不带引号）。我现在可以`"*`通过键入在寄存器中的 Macvim 中看到它`:reg`中的 Macvim 中看到它。我可以使用快捷方式或使用编辑->粘贴将此寄存器的内容复制到 Vim 编辑器中。但是在粘贴之前，我如何修改这个寄存器（或任何寄存器）的内容。例如，我将如何应用搜索和替换例程，例如搜索“，”并将其替换为“.”，以便寄存器现在包含“foo.bar”？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:03:00.893

```
:reg *
original content

let @*='altered content'

:reg * 
altered content 
```

您可以对每个命名寄存器执行此操作。

你的例子可以处理：

```
let @a=substitute(@*,',','.','g')
"ap 
```

但是在实际做任何太复杂的事情之前，你可能应该做一些备份：

```
:reg a
original content

let a_orig = @a

let @a='altered content'
"ap
altered content

let @a=a_orig

:reg a
original content 
```

# python - Python中的EAFP原理是什么？

> ID：11360858
> 
> 赞同：165
> 
> 时间：2012-07-06T10:55:04.633
> 
> 标签：python

Python中的“使用EAFP原则”是什么意思？你能提供任何例子吗？

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2012-07-06T10:56:31.237

从[词汇表](https://docs.python.org/3/glossary.html#term-EAFP)：

> 请求宽恕比请求许可更容易。这种常见的 Python 编码风格假设存在有效的键或属性，如果假设被证明是错误的，则捕获异常。这种干净快速的风格的特点是存在许多`try`和`except`陈述。该技术与许多其他语言（如 C）常见的[LBYL 风格形成鲜明对比。](https://docs.python.org/3/glossary.html#term-LBYL)

一个示例是尝试访问字典键。

EAFP：

```
try:
    x = my_dict["key"]
except KeyError:
    # handle missing key 
```

LBYL：

```
if "key" in my_dict:
    x = my_dict["key"]
else:
    # handle missing key 
```

LBYL 版本必须在字典中搜索关键字两次，并且可能也被认为可读性稍差。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2019-05-08T08:50:16.887

我将尝试用另一个例子来解释它。

在这里，我们尝试访问文件并在控制台中打印内容。

## LBYL - 在你跳跃之前先看看：

我们可能想检查我们是否可以访问该文件，如果可以，我们将打开它并打印内容。如果我们无法访问该文件，我们将点击该`else`部分。这是一个竞争条件的原因是因为我们首先进行了访问检查。当我们到达`with open(my_file) as f:`时，由于某些权限问题（例如另一个进程获得了独占文件锁），我们可能无法再访问它了。这段代码可能会抛出一个错误，我们将无法捕获该错误，因为我们认为我们可以访问该文件。

```
import os

my_file = "/path/to/my/file.txt"

# Race condition
if os.access(my_file, os.R_OK):
    with open(my_file) as f:
        print(f.read())
else:
    print("File can't be accessed") 
```

## EAFP - 请求宽恕比请求许可更容易：

在这个例子中，我们只是试图打开文件，如果我们不能打开它，它会抛出一个`IOError`. 如果可以，我们将打开文件并打印内容。因此，我们不是*问*什么，而是*试图*去做。如果它有效，那就太好了！如果没有，我们会捕获错误并处理它。

```
# # No race condition
try:
    f = open(my_file)
except IOError as e:
    print("File can't be accessed")
else:
    with f:
        print(f.read()) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-29T05:28:06.610

我称之为“乐观编程”。这个想法是大多数时候人们会做正确的事情，错误应该很少。因此，首先编写代码以使“正确的事情”发生，然后在错误发生时捕获错误。

我的感觉是，如果用户要犯错误，他们应该是承担时间后果的人。以正确方式使用该工具的人被加速通过。

# opencv - 可以为 Angstrom (BeagleBoard) 下载和构建 OpenCV，而不是作为工具链的一部分吗？

> ID：11360867
> 
> 赞同：1
> 
> 时间：2012-07-06T10:55:31.903
> 
> 标签：opencv, cross-compiling, beagleboard, toolchain, angstrom-linux

简单的问题：我可以在 Angstrom (BeagleBoard) 上构建 OpenCV 而不将其作为工具链的一部分下载吗？意思是下载Unix版本的代码并构建它

（当然，构建过程本身必须通过工具链完成，但我***是否必须***将 OpenCV***作为工具链的一部分***下载，而不是稍后作为单独的文件下载）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:25:30.020

您可以下载 OpenCV 源代码并使用工具链进行编译。您可能需要自己进行一些修补，但[您不会是第一个成功](http://buntyke.blogspot.com.br/2011/05/installing-opencv-on-beagleboardfrom_29.html)的人。

# html - 使用 display:table-cell 时无法在 div 之间留出空格

> ID：11360869
> 
> 赞同：1
> 
> 时间：2012-07-06T10:55:54.003
> 
> 标签：html, css, css-tables

我想对齐 3 个 div，彼此相邻。所以我习惯`display:table`了父 div 和`display:table-cell`内部 3 个 div。

前 2 个 div 的宽度是已知的，而第 3 个 div 的宽度是未知的。所以使用`display:table-cell`非常适合我来调整第三个 div 的宽度。

现在，如果我想使用`margin-left`or给出 3 个 div 之间的间距`margin-right`，则没有效果。[请在此处](http://jsbin.com/avozik/edit#javascript,html)检查代码。

让我知道我们是否可以这样做。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:03:27.830

这应该有效：

```
 #wrapper div {
      display: table-cell;
      height:100px;
      /* creates space */
      border:5px solid transparent;
      background-clip:padding-box;
  } 
```

您可能希望通过以下方式设置不同的 box-model 以将边框包含在元素的宽度中：

```
box-sizing:border-box; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:58:13.587

使用边框属性给空间

```
border:solid 10px transparent; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:11:29.727

尝试这个

```
#wrapper {
    display: table;
    table-layout: fixed;
    width:100%;
    height:100px;
    background-color:Gray;
    border-spacing:10px;
} 
```

[**演示。**](http://jsbin.com/avozik/7/edit#preview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T07:04:02.853

表格单元格不能有边距。您可以通过使用透明边框对其进行一些调整，如果这不能解决您的问题，那么就没有其他办法了。

# sql-server - Sql Server 2008 中的全文搜索

> ID：11360872
> 
> 赞同：1
> 
> 时间：2012-07-06T10:56:19.623
> 
> 标签：sql-server, sql-server-2008

我有一个名为**tblJobs**的表 ，我想在其上实现**全文搜索**。有一个名为**jobdescription**的列，将在该列 上执行搜索。我正在使用 SQL Server 2008 (RTM)..，但我**的全文索引**选项仍然被禁用。我做了很多事情，按照各个网站的每一步..，但似乎没有任何帮助。谁能帮我摆脱这个问题。提前致谢..！

# php - jquery php mysql 和 json 返回循环数据

> ID：11360873
> 
> 赞同：0
> 
> 时间：2012-07-06T10:56:22.417
> 
> 标签：php, jquery, mysql

我以前没有尝试过，我的解决方案没有奏效。

在 mysql 中，我可以使用 while 循环来编写它，但我试图通过 ajax 提取数据。

有人可以帮忙吗

```
var qString = 'country=' +country+'&continent='+continent;

$.post('/assets/inc/get-country.php', qString, function (data) {    
    $('#'+continent).append('<li>'+data[0].country+' '+data[0].company+'</li>');
}, "json"); 
```

以上在 console.log 的 ajax 响应中返回以下内容

```
[{
    "continent": "Europe",
    "country": "Spain",
    "company": "Universidade de Vigo CITI",
    "comments": "We are very satisfied with the disrupter. It's equipment is very easy to use and effective in breaking cells. I also would like to thank Constant System for for the assistance provided."
}, {
    "continent": "Europe",
    "country": "Spain",
    "company": "IPLA",
    "comments": "The Constant Systems cell disruptor has made extraction of membrane proteins from Gram positives a reproducible and efficient task in our lab."
}] 
```

我怎样才能让它在我的页面上显示为 li 列表？

提前致谢

编辑

```
$("#comments-tabs div.country a").click(function(e){
    e.preventDefault();
    var continent = $(this).parent().attr("id");
    var country = $(this).attr("name");
    console.log(continent+country);
var qString = 'country=' +country+'&continent='+continent;
    $.post('/assets/inc/get-country.php', qString, function (data) {    
        for(company_nr in data){
            $('#'+continent).append('<li>'+data[company_nr].country+' '+data[company_nr].company+'</li>')
        }
    }, "json");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:06:32.723

只需在javascript中循环它：

```
function (data)
{
   for(company_nr in data)
   {
      $('#'+continent).append('<li>'+data[company_nr].country+' '+data[company_nr].company+'</li>')
   }
} 
```

# java - 休眠序列化/反序列化对象并保存

> ID：11360874
> 
> 赞同：0
> 
> 时间：2012-07-06T10:56:24.720
> 
> 标签：java, hibernate, jakarta-ee, serialization

我有一个 POJO 类的对象，并将其保存在我的**Redis** *(NoSql)*服务器上`byte[]`。

现在，当我从 Redis 服务器取回对象时，进行一些更改并调用`session.saveOrUpdate()`，它会引发异常。

`a different object with the same identifier value was already associated with the session`

我正在使用`SerializationHelper`类`serialize()`和`deserialize()`对象及其工作正常。

在休眠中有什么方法可以保存那个反序列化对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:10:30.943

`saveOrUpdate()`尝试将分离（或瞬态）对象附加到会话。

由于 Hibernate 保证会话永远不会拥有相同附加实体的 2 个实例，因此它会抛出此异常。

如果要将分离对象的状态复制到附加对象，请使用`session.merge()`（返回附加的修改对象）。

# android - 将数据文件从平板爱可视导出到 PC 或 SD 卡、USB 密钥

> ID：11360875
> 
> 赞同：0
> 
> 时间：2012-07-06T10:56:25.637
> 
> 标签：android, file-io, xamarin.android, android-sdcard

> **可能重复：**
> [将数据从平板电脑传输到 PC](https://stackoverflow.com/questions/11359214/transfer-data-from-tablet-to-pc)

我正在为爱可视平板电脑编写应用程序。我与 .apk 文件（如资产）同时加载文件。我可以从我的应用程序中读取这个文件，但我不能写入它。

我也不知道如何在 PC 上读取它以使用写入的数据（实际上是导出、文件、从平板电脑到 PC）。或者另一种方式，将数据从平板电脑导出到 PC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T06:05:06.333

只是细节......

我创建文件夹和 MyTextFile.txt。我可以使用这个文件，但文件是在本地创建的：/sdcard/MyFolder。我可以读写这个文件，但它不在物理 SD 卡中。我不知道如何在 SD 卡或 USB 密钥上写入（外部，在我的 Archos101 平板电脑的端口中）。

很好的想法，我现在可以将数据从平板电脑导出到 PC.... 但是，如果我可以使用外部支持存储这个文件，那就更好了。

你知道如何思考 SDcard 和 USB 的“通过路径”吗？Android.OS.Environment.ExternalStorageDirectory 为我提供实习路径（本地：/sdcard/MyFolder），而不是 SD 卡或 USB 密钥路径。谢谢你。

哔叽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:03:55.703

在 Android 上无法写入 Assets，只能从 Assets 中读取。因此，您必须将文件保存到 SD 卡或 USB 密钥。

可以通过以下方式写入其中之一：

```
var folder = Android.OS.Environment.ExternalStorageDirectory + Java.IO.File.Separator + "MyFolder";

try
{
    if (!Directory.Exists(folder))
        Directory.CreateDirectory(folder);

    folder = folder + Java.IO.File.Separator;

    using (var sw = new StreamWriter(folder + "MyTextFile.txt"))
    {
        sw.WriteLine("Testing");
    }

    //This saves Bitmap
    using (var fs = new FileStream(folder + "MyImageFile.png", FileMode.OpenOrCreate))
    {
            _myBitmap.Compress(Bitmap.CompressFormat.Png, 100, fs);
    } 
}
catch
{
    //handle the exception
} 
```

为`Android.OS.Environment.ExternalStorageDirectory`您提供 SD 卡或 USB 密钥的路径。

# wordpress - 没有域名的WordPress永久链接

> ID：11360879
> 
> 赞同：1
> 
> 时间：2012-07-06T10:56:29.817
> 
> 标签：wordpress, trim, permalinks

好的，这听起来可能很奇怪，但我正面临着 wordpress 的一个很好的挑战。在回`the_permalink();`显和检查投资组合页面时，我得到一个类似这样的链接：

```
http://www.domain.com/?portfolio=test 
```

（其中 test 是投资组合名称）。

是否有任何选项可以返回修剪的永久链接以`?portfolio=test`阻止域 url？问的时候，我想我已经得到了答案（`trim()`），但我也想听听你的想法。

每一个答案将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:02:04.070

您可以通过执行以下操作来获取帖子的永久链接：

```
<?php 
    function my_permalink() {
        echo substr(get_permalink(), strlen(get_option('home')));
    }
?> 
```

get_option 方法替换了已弃用的 get_settings 方法，并允许您从数据库中检索命名的选项值：

[http://codex.wordpress.org/Function_Reference/get_option](http://codex.wordpress.org/Function_Reference/get_option)

传递给 get_option 方法的 'home' 值将返回站点 URL。

# java - SOAP 请求有效负载

> ID：11360883
> 
> 赞同：1
> 
> 时间：2012-07-06T10:56:33.773
> 
> 标签：java, web-services, jakarta-ee, jax-ws

我有一个网络服务，其中请求有效负载如下

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:poc="http://www.poc.mbo.demo.com">
<soapenv:Header/>
<soapenv:Body>
  <poc:doTransaction>
     <!--Optional:-->
     <dealerid>1</dealerid>
     <!--Optional:-->
     <partid>1</partid>
     <!--Optional:-->
     <quantity>2</quantity>
     <!--Optional:-->
     <orderdate>12-DEC-2012</orderdate>
  </poc:doTransaction>
</soapenv:Body>
</soapenv:Envelope> 
```

但如果我这样尝试，它没有回应。可能是什么问题

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:poc="http://www.poc.mbo.demo.com">
<soapenv:Header/>
<soapenv:Body>
   <poc:doTransaction>
     <!--Optional:-->
      <poc:dealerid>1</poc:dealerid>
      <!--Optional:-->
     <poc:partid>1</poc:partid>
     <!--Optional:-->
     <quantity>2</quantity>
     <!--Optional:-->
     <poc:orderdate>12-DEC-2012</poc:orderdate>
  </poc:doTransaction>
 </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:48:27.300

第一个示例中的`doTransaction`元素不在`http://www.poc.mbo.demo.com`命名空间中。

您的请求要么验证失败（假设验证已启用），要么服务器忽略无效元素并将请求视为等同于：

```
<soapenv:Envelope
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"  
    xmlns:poc="http://www.poc.mbo.demo.com">
<soapenv:Header/>
<soapenv:Body>
  <poc:doTransaction />
</soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:51:07.943

根据您的服务的 WSDL，该元素将与命名空间（XSD）相关联，但其他元素可能是另一个命名空间（XSD）的一部分，

要清楚地了解这一点，只需检查 WSDL 的类型部分和操作，检查哪个类型（元素）与哪个 XSD 相关联。你可以很容易地理解它失败了。

将命名空间视为导入的类和类型，因为它是状态之一（:) 只是为了便于理解）

# html - 子域上的静态图像仅偶尔显示或在重新加载后显示

> ID：11360886
> 
> 赞同：0
> 
> 时间：2012-07-06T10:56:45.963
> 
> 标签：html, dns, webserver, subdomain

我希望你能在这里帮助我。

在我们的网络空间中，我有一个如下的目录结构。为简单起见，我更改了所有名称。

根
根/website1
根/website2
根/图像

这些网站在两个不同的域下可用：www.website1.com 和 www.website2.de。

root/images 中的图像由两个网站共享。出于这个原因，我有一个（子）域 images.anotherwebsite.net 指向根/图像。我还认为从另一个域加载图像会增加加载时间。

现在我遇到的问题是偶尔不显示位于子域上的图像。使用 Firebug 检查网络活动，我可以看到图像没有被加载。加载页面后检查源代码（图像未显示）我可以看到源代码看起来不错 - 显示如下：

```
<img src="http://images.anotherwebsite.net/testimage.jpg" border="0" width="100" height="100" alt="Test" /> 
```

那么，如果源代码看起来像这样，那么为什么浏览器不显示图像呢？

在重新加载图像总是出现。

我在 Chrome、Firefox、IE 上试过这个。同样的问题。

任何帮助，将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:06:36.580

我相信显示来自不同域的图像的浏览器实际上会与网络服务器建立另一个连接，以在页面加载时尝试检索图像。也许网络服务器不会同时接受来自同一连接的多个连接？这可能会给您与您描述的相同类型的症状。检查网络服务器上的任何连接限制。

# java - JAVA - 解密“DES”加密随机数

> ID：11360889
> 
> 赞同：1
> 
> 时间：2012-07-06T10:56:55.853
> 
> 标签：java, encryption, des

我想知道如何破译使用特定密钥加密的随机数 DES/CBC。

我的协议规定如下： 我正在发送一个 KeyNo（例如 0x00） 在发送 KeyNo 后，我得到一个 8 字节（DES）随机数。这个随机数是用选定的密钥加密的。

我的问题是如何破译收到的数据，使用 Cipher 找到随机数

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:59:12.137

要解密 DES 加密流，只需执行以下操作：

```
Key key = SecretKeyFactory.getInstance("DES").generateSecret(new DESKeySpec(bytesOfThe Key)); // bytesOfTheKey should be 8 bytes long
Cipher cipher = Cipher.getInstance("DES");
cipher.init(Cipher.DECRYPT_MODE, key);
return new CipherInputStream(inputStream, cipher); 
```

您可能还对适用于 byteBuffers 的[doFinal](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html#doFinal%28java.nio.ByteBuffer,%20java.nio.ByteBuffer%29)方法感兴趣。

# linux - 删除 tar 产生的尾随空字符

> ID：11360891
> 
> 赞同：5
> 
> 时间：2012-07-06T10:56:56.613
> 
> 标签：linux, tar

我正在尝试压缩一些文件并通过 php passthru 命令将它们传递给用户。

问题是即使 tar 文件应该只有 2k 它总是 10240。有趣的数字对吗？

所以我把它分解为：

```
-sh-4.1# tar czf -  test | wc -c
10240 
```

对比：

```
-sh-4.1# tar czf test.tar.gz test && wc -c test.tar.gz
2052 test.tar.gz 
```

所以 tar 显然是用 NULL 填充文件。

那么我怎样才能让 tar 停止这样做。或者，我如何去除尾随的 NULL。

我正在运行`tar (GNU tar) 1.15.1`并且无法在我的工作站上重现`tar (GNU tar) 1.23`，因为这是一个嵌入式项目升级不是我正在寻找的答案（还）。

编辑：我希望有一个确实需要写入文件系统的解决方法。也许是一种阻止它填充或通过 sed 管道它或去除填充的东西的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:22:07.567

您可以通过使用较小的块大小来减弱填充效果，尝试将 -b1 传递给 tar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-18T01:55:41.947

您可以通过将块大小设置为可能的最小值来最小化填充 - 在我的系统上这是 512。

```
$ cat test
a few bytes
$ tar -c test | wc -c
10240
$ tar -b 1 -c test | wc -c
2048
$ tar --record-size=512 -c test | wc -c
2048
$ 
```

这将填充保持在最多 511 个字节。没有通过程序来删除填充、重写块头和重新创建归档结束签名，我认为这是你能做的最好的事情。那时你可能会考虑使用脚本语言，它是直接的本地 tar 实现，例如：

*   PHP的`PharData`（[http://php.net/manual/en/class.phardata.php](http://php.net/manual/en/class.phardata.php)）
*   Perl 的`Archive::Tar`( [https://perldoc.perl.org/Archive/Tar.html](https://perldoc.perl.org/Archive/Tar.html) )
*   Python的`tarfile`（[https://docs.python.org/2/library/tarfile.html](https://docs.python.org/2/library/tarfile.html)）

# facebook - 显示来自 Facebook 页面的评论

> ID：11360894
> 
> 赞同：1
> 
> 时间：2012-07-06T10:57:02.963
> 
> 标签：facebook, api

我在 Facebook 上有一个公共页面，人们可以在其中发表评论，我想在 C# 应用程序中列出我所有的页面评论。

我发现这个[http://developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/)

但它不起作用，例如：[https](https://graph.facebook.com/comments/?ids=http://www.facebook.com/Diablo) ://graph.facebook.com/comments/?ids=http://www.facebook.com/Diablo返回 1 条评论，但评论超过 5xxxx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T20:15:54.923

尝试：`https://graph.facebook.com/comments/?ids={YOUR PAGE URL}` 确保您输入完整的网址

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:03:10.840

评论插件适用于 Facebook 主站点之外的 Open Graph 页面。您不能将插件用于您的 Facebook 粉丝页面。

考虑使用`PAGE_ID/feed`连接，请参阅[http://developers.facebook.com/docs/reference/api/page/#feed](http://developers.facebook.com/docs/reference/api/page/#feed)了解更多信息

# iphone - 如何在fb中获取朋友的个人资料图片

> ID：11360896
> 
> 赞同：3
> 
> 时间：2012-07-06T10:57:16.227
> 
> 标签：iphone, facebook-graph-api

```
FB_Graph_Response = [FB_Graph doGraphGet:@"me/friends" withGetVars:nil];

//  NSLog(@"%@",[FB_Graph_Response.htmlResponse JSONValue]);

arrFriendsList = [[[FB_Graph_Response.htmlResponse JSONValue]objectForKey:@"data"]retain]; 
```

我已使用 fb graph api（以上请求）访问了我的应用程序中的朋友列表，但我无法获取朋友的个人资料图片。如何得到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:28:21.370

获取用户的 id（或昵称），并从[https://graph.facebook.com/idOrNick/picture](https://graph.facebook.com/idOrNick/picture)
获取图片 这无需任何身份验证即可工作。
小样本：

```
NSString id = getTheIdOrNick;
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/%@/picture", id]];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *image = [UIImage imageWithData:data];
//UIImageView *imgView = [[UIImageView alloc]init];
//imgView.image = image; 
```

# java - Hibernate + MySql DB + Tomcat - 无法连接

> ID：11360897
> 
> 赞同：-1
> 
> 时间：2012-07-06T10:57:25.110
> 
> 标签：java, mysql, hibernate, relational-database

> **可能重复：**
> [配置休眠以通过 JNDI 数据源连接到数据库](https://stackoverflow.com/questions/5303671/configure-hibernate-to-connect-to-database-via-jndi-datasource)

我尝试通过休眠获得数据库访问，但我得到一个配置的 SessionFactory：null。我在我的 tomcat/lib 文件夹中有 mysql 连接器数据库，而不是在我的项目中。但我认为它应该像这样工作。

**对于 MySQL 数据库：**

上下文.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

    <Context>

    <!-- myDatabase = database name -->

     <Resource name="jdbc/myDatabase" 

                  auth="Container"

                  type="javax.sql.DataSource" 

                  username="admin" 

                  password="geheim"

                  driverClassName="com.mysql.jdbc.Driver"

                  url="jdbc:mysql://localhost:3306/myDatabase"

                  maxActive="15" 

                  maxIdle="3"/>

    </Context> 
```

网页.xml：

```
 <!-- DB -->
     <resource-ref>
       <description>MyDatabase Description</description>
        <res-ref-name>jdbc/myDatabase</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
     </resource-ref> 
```

**休眠**

休眠.cfg.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE hibernate-configuration PUBLIC
            "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
            "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
    <hibernate-configuration>
        <session-factory>
            <!-- Database connection settings -->
                <!-- <property name="connection.datasource">java:comp/env/jdbc/myDatabase</property>-->
                <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/myDatabase</property>
                <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
                <property name="current_session_context_class">thread</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.username">admin</property>
        <property name="hibernate.connection.password">geheim</property>

                <!-- <mapping resource="com/bachelor/EstateDTO.hbm.xml"/> -->
                <mapping resource="com/bachelor/hibernateobject/Event.hbm.xml"/>
        </session-factory>
    </hibernate-configuration> 
```

用途：

```
 public class HibernateUtil {
        private static SessionFactory sessionFactory;
        private static ServiceRegistry serviceRegistry;

        public static SessionFactory buildSessionFactory() {
            try {
                // Create the SessionFactory from hibernate.cfg.xml
                Configuration configuration = new Configuration();
                System.out.println("1");
                configuration.configure();
                System.out.println("2");
                serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();    
                System.out.println("3");
                return new Configuration().configure().buildSessionFactory(serviceRegistry);
            } catch (Throwable ex) {
                // Make sure you log the exception, as it might be swallowed
                System.err.println("Initial SessionFactory creation failed." + ex);
                throw new ExceptionInInitializerError(ex);
            }
        }

        public static SessionFactory getSessionFactory() {
            return sessionFactory;
        }
    } 
```

**称呼**

mysql 数据库连接适用于：

```
 Context initCtx = new InitialContext();
            Context envCtx = (Context) initCtx.lookup("java:comp/env");
            System.out.println(envCtx);
            DataSource ds = (DataSource) envCtx.lookup("jdbc/myDatabase");
            System.out.println(ds); 
```

休眠调用不会：

```
 Session session = HibernateUtil.buildSessionFactory().openSession();
    session.beginTransaction();

    Event theEvent = new Event();
    theEvent.setTitle("My Event");
    theEvent.setDate(new Date());
    session.save(theEvent);

    session.save(theEvent);

    session.getTransaction().commit(); 
```

**堆栈跟踪：**

```
06.07.2012 16:52:09 com.sun.jersey.server.impl.application.WebApplicationImpl   _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.12 02/15/2012 04:51 PM'
06.07.2012 16:52:09     com.sun.jersey.server.impl.application.DeferredResourceConfig$ApplicationHolder     <init>
INFO: Instantiated the Application class com.bachelor.core.MyApplication
06.07.2012 16:52:11 org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
06.07.2012 16:52:11 org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.3.Final}
06.07.2012 16:52:11 org.hibernate.cfg.Environment <clinit>
NFO: HHH000206: hibernate.properties not found
06.07.2012 16:52:11 org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
1
06.07.2012 16:52:11 org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
06.07.2012 16:52:11 org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
06.07.2012 16:52:11 org.hibernate.cfg.Configuration addResource
INFO: HHH000221: Reading mappings from resource:    com/bachelor/hibernateobject/Event.hbm.xml
06.07.2012 16:52:11 org.hibernate.internal.util.xml.DTDEntityResolver   resolveEntity
WARN: HHH000223: Recognized obsolete hibernate namespace    http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/  instead. Refer to Hibernate 3.6 Migration Guide!
06.07.2012 16:52:11 org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null
2
3
06.07.2012 16:52:11 org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
06.07.2012 16:52:11 org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
06.07.2012 16:52:11 org.hibernate.cfg.Configuration addResource
INFO: HHH000221: Reading mappings from resource:    com/bachelor/hibernateobject/Event.hbm.xml
06.07.2012 16:52:11 org.hibernate.internal.util.xml.DTDEntityResolver   resolveEntity
WARN: HHH000223: Recognized obsolete hibernate namespace h  ttp://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/   instead. Refer to Hibernate 3.6 Migration Guide!
06.07.2012 16:52:11 org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null
06.07.2012 16:52:11 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
06.07.2012 16:52:11     org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000115: Hibernate connection pool size: 20
06.07.2012 16:52:11     org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl     configure
INFO: HHH000006: Autocommit mode: false
06.07.2012 16:52:11     org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl     configure
INFO: HHH000401: using driver [com.mysql.jdbc.Driver] at URL    [jdbc:mysql://localhost:3306/myDatabase]
06.07.2012 16:52:11     org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl     configure
INFO: HHH000046: Connection properties: {user=admin, password=****}
06.07.2012 16:52:14 org.hibernate.engine.jdbc.internal.JdbcServicesImpl configure
WARN: HHH000342: Could not obtain connection to query metadata : Communications     link failure

The last packet sent successfully to the server was 0 milliseconds ago. The     driver has not received any packets from the server.
06.07.2012 16:52:14 org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
06.07.2012 16:52:14 org.hibernate.engine.jdbc.internal.LobCreatorBuilder    useContextualLobCreation
INFO: HHH000422: Disabling contextual LOB creation as connection was null
06.07.2012 16:52:14     org.hibernate.engine.transaction.internal.TransactionFactoryInitiator   initiateService
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
06.07.2012 16:52:14 org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
06.07.2012 16:52:16 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 0, SQLState: 08S01
06.07.2012 16:52:16 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The     driver has not received any packets from the server.
06.07.2012 16:52:16 com.sun.jersey.spi.container.ContainerResponse  mapMappableContainerException
SCHWERWIEGEND: The RuntimeException could not be mapped to a response, re-  throwing to the HTTP container
org.hibernate.exception.JDBCConnectionException: Could not open connection
at  org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:131)
at  org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
at o    rg.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
at 
```

似乎应用程序能够直接建立与数据库的连接，但不能通过休眠。

编辑：

我的 hibernate.cfg.xml 中的 url 路径有什么问题？

编辑：

休眠依赖：

```
 <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-core</artifactId>
                <version>4.1.3.Final</version>
            </dependency>

            <!-- Because this is a web app, we also have a dependency on the servlet api. -->
            <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>servlet-api</artifactId>
        <version>6.0.35</version>
    </dependency>

            <!-- Hibernate uses slf4j for logging, for our purposes here use the simple backend -->
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-simple</artifactId>
                <version>1.6.4</version>
            </dependency>

            <!-- Hibernate gives you a choice of bytecode providers between cglib and javassist -->
            <dependency>
                <groupId>javassist</groupId>
                <artifactId>javassist</artifactId>
                <version>3.12.1.GA</version>
            </dependency>

                    <!-- Hibernate library dependecy end -->

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-08T09:58:21.593

代码正在运行。只有 MySQL 服务器没有启动。

# iphone - 在 iOS 应用程序中解析 BBCode

> ID：11360898
> 
> 赞同：2
> 
> 时间：2012-07-06T10:57:26.450
> 
> 标签：iphone, objective-c, ios, forum, bbcode

我正在为论坛编写应用程序。我可以将帖子作为 HTML 获取，但我需要对帖子做很多自定义的事情，因为我没有在 UIWebView 中显示它，而是在本机作为富文本（`[youtube][/youtube]`标签的自定义处理）显示它。所以我得到了更清晰的 BBCode 输出。

[本教程](http://www.ultramegatech.com/2009/04/creating-a-bbcode-parser/)似乎很好地满足了我的需求，但是它存在一些明显的问题。如果用户输入格式错误的 BBC，我会返回错误的 HTML。省略结束 [/b] 作为示例。

我想我可能只需要遍历输出的 HTML 并跟踪最后是否有未关闭的标签，但是我希望可能有更好的方法来解析 iPhone 上的 BBCode。

另外，最后我知道这可能是错误的方法（如上所述），但我在 BBCode 解析中发现的每个堆栈溢出问题都表示不要重新发明轮子，而只使用现有的 PHP 库。但是，当然，这是一个 iOS 应用程序，所以我不能使用任何用 PHP 编写的代码。

问题是，在 iOS 上解析 BBCode 的最佳方法是什么（如果没有可用的库或示例，那么是否有关于自己编写高质量的教程）？

# iphone - 如何创建 webview 覆盖方法

> ID：11360899
> 
> 赞同：0
> 
> 时间：2012-07-06T10:57:31.263
> 
> 标签：iphone, ios, webview, overriding

我有

```
 1.webview
      a.webview.xib
      b.webview.h
      c.webview.m
   2.webview1
      a.webview1.xib
      b.webview1.h
      c.webview1.m files 
```

我想从 webview1.m 文件中为 webview.m 创建覆盖方法。无论我在 webview1 中加载了什么内容，它都应该在 webview 中加载...

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:32:12.120

Webview 应该是 WebView1 的子类

# java - 将 K 个项目排列在 N 个插槽中的所有可能方式

> ID：11360900
> 
> 赞同：1
> 
> 时间：2012-07-06T10:57:32.983
> 
> 标签：java, algorithm, combinations

我正在寻找一种算法来查找 K 值到 n 项的所有组合。

例子：

K 值为 [R,B] & N 为 2 所以我得到 {RR, RB, BR, BB} 2*2 = 4 种方式

K 值为 [R,B] & N 为 3 所以我得到 {RRR, RRB, RBB, RBR, BRR, BRB, BBR, BBB} 2*2*2 = 8 种方式

我需要找出通用算法，以找到可以将 K 项排列在 N 个插槽中的所有可能方式。（允许重复）

另一个例子是：

K 值为 [R,G,B] & N 为 5，所以我需要找到 3^5 = 81 种组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:09:47.667

这个问题非常适合递归解决方案。

一般情况下的解决方案显然是通过获取 的解决方案`N - 1`，然后将每个集合的元素依次添加到结果中来形成的。在伪代码中：

```
f(options, 0) = []
f(options, n) = options foreach o => o ++ f(options, n-1) 
```

`n`这可以在 Java 中递归实现，但是对于中等大的;值，您会遇到堆栈溢出错误。而且我还怀疑 JIT 编译器在优化递归算法方面效率较低，因此性能会受到影响。

但是，递归算法总是可以转换为等效的循环。在这种情况下，它可能看起来像：

```
List<String> results = new ArrayList<String>();
results.add(""); // Seed it for the base case n=0
for (int i = 0; i < n; i ++) {
    List<String> previousResults = results;
    results = new ArrayList<String>();
    for (String s : options) {
       for (String base : previousResults) {
           results.add(s + base);
       }
    }
}
return results; 
```

这工作（我希望！）类似于递归方法 - 在每次迭代中，它将当前进度（即 的结果`n-1`）“保存”到`previousResults`，然后依次迭代选项，以获得将它们添加到前一个的结果结果。

看看通过任何自动递归到迭代算法传递递归解决方案的效果，并将可读性和性能与这个手工创建的算法进行比较，将会很有趣。这留给读者作为练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:20:27.963

我将在基础桶中使用 N 位计数器：k=3, n=5

```
(0,0,0,0,0)
(0,0,0,0,1),
....
(2,2,2,2,2) 
```

实现这样一个计数器很简单，只需保持大小为 n+1 的数组，首先将所有元素设置为零，每次增加最新元素，如果从 k-1 开始超过，则增加下一个邻居（直到邻居超过 k-1 ）。当 n+1 个元素设置为 1 时，动作终止。

如果您尝试过但不能这样做，请用评论告诉它。

# asp.net-mvc - MVC 3 HttpPost 模型列表 似乎失去了属性

> ID：11360901
> 
> 赞同：0
> 
> 时间：2012-07-06T10:57:38.033
> 
> 标签：asp.net-mvc, asp.net-mvc-3, data-binding, http-post

好吧，我对此毫无用处（请参阅前面的问题）

为什么，当我使用以下内容时，我会得到一个可爱的复选框列表，它工作得很好：（使用扩展方法）

**模型**

```
public class My : BusinessCategory
{
        public class MyTypes
        {
            public int MyTypeId { get; set; }
            public string MyTypeName { get; set; }
            public bool? MyTypeValue { get; set; }
        }
        public List<MyTypes> MyTypeListModel { get; set; }
} 
```

**看法**

```
<fieldset>
    <legend>My Management</legend>
    <div style="text-align: left; padding-left: 47%;">
        @Html.CheckBoxListForListType(model => model.MyTypeListModel, (MultiSelectList)ViewBag.MyType, Model.ReviewId)
    </div>
    <p>
        <input type="submit" value="Continue" />
    </p>
</fieldset> 
```

CheckBoxListForListType**扩展**（我知道那里的命名很糟糕）

```
public static MvcHtmlString CheckBoxListForListType<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, IEnumerable<TProperty>>> expression, MultiSelectList multiSelectList, Guid reviewId, object htmlAttributes = null)
        {
            //Derive property name for checkbox name
            MemberExpression body = expression.Body as MemberExpression;
            string propertyName = body.Member.Name;

            //Get currently select values from the ViewData model
            IEnumerable<TProperty> list = expression.Compile().Invoke(htmlHelper.ViewData.Model);

            //Convert selected value list to a List<string> for easy manipulation
            List<string> selectedValues = new List<string>();

            if (list != null)
            {
                selectedValues = new List<TProperty>(list).ConvertAll<string>(delegate(TProperty i) { return i.ToString(); });
            }

            //Create div
            TagBuilder divTag = new TagBuilder("div");
            divTag.MergeAttributes(new RouteValueDictionary(htmlAttributes), true);

            //Add checkboxes
            foreach (SelectListItem item in multiSelectList)
            {
                divTag.InnerHtml += String.Format("<div><input type=\"checkbox\" name=\"{0}\" id=\"{0}_{1}\" " +
                                                    "value=\"{1}\" {2} /><label for=\"{0}_{1}\">{3}</label></div>",
                                                    propertyName,
                                                    item.Value,
                                                    GetValueFromDatabaseList(reviewId, propertyName, item.Text.ToLower()),
                                                    item.Text);
            }

            return MvcHtmlString.Create(divTag.ToString());
        } 
```

**控制器**

```
 public ActionResult My(Guid id)
        {
            try
            {
                var model = Model(id);
                SetMyTypeList(model.My);
                ViewBag.MyType = new MultiSelectList(model.My.MyTypeListModel, "MyTypeValue", "MyTypeName");
                return View(model.My);
            }
            catch (Exception ex)
            {
                ExceptionHelper.WriteLog(ex);
                return RedirectToAction("Error");
            }
        }

private void SetMyTypeList(My model)
        {
            model.MyTypeListModel = new List<My.MyTypes>();
            model.MyTypeListModel.Add(new My.MyTypes { MyTypeId = 1, MyTypeName = GetName.GetDisplayName(model, m => m.Option1), MyTypeValue = model.Option1});
            model.MyTypeListModel.Add(new My.MyTypes { MyTypeId = 2, MyTypeName = GetName.GetDisplayName(model, m => m. Option2), MyTypeValue = model.Option2 });
            model.MyTypeListModel.Add(new My.MyTypes { MyTypeId = 3, MyTypeName = GetName.GetDisplayName(model, m => m. Option3), MyTypeValue = model.Option3});
            model.MyTypeListModel.Add(new My.MyTypes { MyTypeId = 4, MyTypeName = GetName.GetDisplayName(model, m => m.Option4), MyTypeValue = model.Option4});         
        } 
```

然而，当我执行 HttpPost 操作结果时，MyTypeListModel '失去'它的属性，即我可以看到，说已经进行了两个选择，但它们的名称、值、id 不存在。

```
 [HttpPost]
    public ActionResult My(Guid id, My model)
    {
        try
        {
            model.ReviewId = id;
            var sessionModel = Model(id); 
            sessionModel.My = model;
            MapCheckBoxListResultswithDatabaseBoolsMy(model);
            UpdateDb(Categories.catMy, sessionModel);

            return RedirectToAction("BusinessSummary", new { id = sessionModel.ReviewId });
        }
        catch (Exception ex)
        {
            ExceptionHelper.WriteLog(ex);
            return RedirectToAction("Error");
        }
    } 
```

我是否必须重新转换为类型，如果需要，在哪里？

像往常一样，许多人为我的漫无边际的话题道歉。希望事情会很快开始点击:'(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:07:41.623

连接动作参数的过程称为模型绑定，默认情况下，MVC 会询问表单、查询字符串和数据路由以尝试填充您的类型。在您的情况下，问题将是您的表单字段没有以它期望的列表的默认方式命名。[您可以在Phil Haack 的这篇文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)中找到有关绑定列表的一些信息。请记住，您正在寻找子属性，因此您需要适当地为类型添加前缀。

我发现有用的一件事是将源代码获取到 ASP.NET MVC，然后在本地调试它以查看模型绑定时它在寻找什么。

不要忘记，如果您不想遵循常规约定（尽管这是明智的），您可以为您的类型指定自己的[自定义模型绑定](https://stackoverflow.com/questions/1193453/asp-net-mvc-custom-model-binding-explanation)器。

# ios - 当应用程序处于后台时（例如，在多任务处理时）使用 gameKit 点对点连接

> ID：11360903
> 
> 赞同：0
> 
> 时间：2012-07-06T10:57:56.630
> 
> 标签：ios, background, sleep, multitasking, gamekit

我正在尝试构建一个应用程序，该应用程序将使用 iPhone 上的游戏工具包点对点连接，以便找到您周围使用该应用程序的其他人并与他们交换信息。

我的问题是 - 当应用程序在后台运行并且 iPhone 处于睡眠状态时，是否可以使用点对点连接？如果是，我需要做一些特别的事情吗？

此外，当应用程序在后台运行/iPhone 处于睡眠模式时，我能否使用地理位置、本地通知和 HTTP 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:35:28.243

iOS 中的后台模式非常严格。

当您的应用程序移至后台时，您有操作系统授予的“有限时间”让您正确完成工作（完成下载、保存文件、关闭某些连接等）。之后，对于 iOS 允许的一些长任务，您将无能为力。iOS 允许您运行的唯一长任务是：

*   声音的
*   地理位置
*   网络电话
*   报摊
*   外部附件
*   蓝牙中心

（[来源](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)）

因此，如果您通过蓝牙使用对等连接，您可以（理论上）在后台模式下执行此操作。这与地理位置相同。

但是，如果您想使用本地通知，则需要在移动到后台之前注册它们，对于 HTTP 请求也是如此。有关更多信息，请查看此文档：[App States and Multitasking](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)。

# javascript - 控制台返回未定义

> ID：11360904
> 
> 赞同：8
> 
> 时间：2012-07-06T10:58:01.997
> 
> 标签：javascript

所以我劫持了控制台功能：

```
var log = Function.prototype.bind.call(console.log, console);
console.log = function (a) {
    log.call(console, a);
    submitmsg("Log", a);
}; 
```

这具有预期的效果。但是，它也会返回“未定义”作为意外奖励。

我不明白为什么这导致我认为这里有些问题。

![在此处输入图像描述](../Images/52fbe715c877ec563f4ea659924b5b89.png)

Hello world 是按`log.call(console, a)`预期生成的

`submitmsg()`是我的自定义功能

这正是我想要的。正如我所说，我有点担心由于我不明白的原因它也会返回“未定义”。

* * *

**注意：**以下代码由 OP 作为问题的答案发布。对答案的评论已移至对问题的评论。

* * *

那么正确的代码应该如下吗？

```
var log = Function.prototype.bind.call(console.log, console);
console.log = function (a) {
    return log.call(console, a);
    submitmsg("Log", a)
}; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T11:00:53.427

如果我正确理解了您的问题，那是因为您没有明确地从函数中返回任何内容。当您不从函数返回值时，它会隐式返回`undefined`.

例如：

```
function example() {}
console.log(example()); //undefined 
```

这是在[`[[Call]]`内部方法规范](http://es5.github.com/#x13.2.1)中定义的（相关点以粗体显示）：

> 1.  令 funcCtx 为使用 F 的 [[FormalParameters]] 内部属性的值、传递的参数 List args 和 10.4.3 中所述的 this 值为函数代码建立新执行上下文的结果。
> 2.  让 result 是对作为 F 的 [[Code]] 内部属性的值的 FunctionBody 求值的结果。如果 F 没有 [[Code]] 内部属性，或者它的值为空 FunctionBody，则结果为（正常、未定义、空）。
> 3.  退出执行上下文funcCtx，恢复之前的执行上下文。
> 4.  如果 result.type 被抛出，则抛出 result.value。
> 5.  **如果返回result.type，则返回result.value。**
> 6.  **否则 result.type 必须是正常的。返回未定义。**

# objective-c - Objective-C - 用一个空格替换换行符

> ID：11360905
> 
> 赞同：10
> 
> 时间：2012-07-06T10:58:02.753
> 
> 标签：objective-c, replace, nsstring, newline

如何用一个空格替换换行符 (\n) 序列。

即用户输入了一个双换行符（“\n\n”），我希望将其替换为一个空格（“”）。或者用户输入了三个换行符（“\n\n\n”），我希望它也替换为一个空格（“”）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-06T11:03:07.513

尝试这个：

```
NSArray *split = [orig componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];
split = [split filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"length > 0"]];
NSString *res = [split componentsJoinedByString:@" "]; 
```

这是它的工作原理：

*   第一行由换行符分割
*   第二行删除为一行中的多个分隔符插入的空项目
*   第三行使用单个空格作为新分隔符将字符串连接回来

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-28T08:57:34.260

性能是使用的 3 倍`componentsSeparatedByCharactersInSet`

```
NSString *fixed = [original stringByReplacingOccurrencesOfString:@"\\n+"
                                                     withString:@" "
                                                        options:NSRegularExpressionSearch
                                                          range:NSMakeRange(0, original.length)]; 
```

可能的替代正则表达式模式：

*   仅替换空格：`[ ]+`
*   替换空格和制表符：`[ \\t]+`
*   替换空格、制表符和换行符：`\\s+`
*   替换换行符：`\\n+`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T11:11:46.147

正如 wattson 所说，您可以这样做，`NSRegularExpression`但代码非常冗长，因此如果您想在多个地方执行此操作，我建议您使用辅助方法，甚至`NSString`使用类似方法或类似方法的类别`-[NSString stringByReplacingMatchingPattern:withString:]`。

```
NSString *string = @"a\n\na";
NSLog(@"%@", [[NSRegularExpression regularExpressionWithPattern:@"\\n+"
                                                        options:0
                                                          error:NULL]
              stringByReplacingMatchesInString:string
              options:0
              range:NSMakeRange(0, [string length])
              withTemplate:@" "]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T11:02:42.960

使用正则表达式，例如“s/\n+/\w/”（将匹配 1 个或多个换行符并替换为单个空格的替换）

这个问题有一个正则表达式库的[链接](https://stackoverflow.com/questions/1633331/replacing-in-nsstring-with-wildcards-regular-expressions-cocoa)，但也有 NSRegularExpression 可用

# android - 使用报警管理器重复报警

> ID：11360910
> 
> 赞同：0
> 
> 时间：2012-07-06T10:58:22.677
> 
> 标签：android, alarmmanager, android-alarms, repeatingalarm

我正在尝试制作一个警报应用程序，该应用程序从用户那里获取多个“n”时间输入并在这些特定时间响铃。为此，我为小时和分钟条目创建了一个 EditTexts 数组。在开始按钮的 onclick 监听器中，我希望为所有输入的时间输入初始化警报管理器。

在创建一组日历之后，我是否应该创建一组意图和待处理的意图以及警报管理器对象——每个日历对象一个？

这是我的开始按钮的代码：

```
public void setAlert(View view) {

    int length = editHour.length;
    int h[] = new int[length];
    int m[] = new int[length];
    Calendar[] cal = new Calendar[length];
    for (int i = 0; i < length; i++) {
        cal[i] = Calendar.getInstance();
    }
    for (int i = 0; i < length; i++) {
        try {

            m[i] = Integer.parseInt(editHour[i].getText().toString());

            h[i] = Integer.parseInt(editMinute[i].getText().toString());

            cal[i].set(Calendar.HOUR, h[i]);
            cal[i].set(Calendar.MINUTE, m[i]);

            Intent intent = new Intent(this, AlarmService.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(this,
                    12345, intent, PendingIntent.FLAG_CANCEL_CURRENT);
            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
            alarmManager.set(AlarmManager.RTC_WAKEUP,
                    cal[i].getTimeInMillis(), pendingIntent);
            Toast.makeText(this, "Alarm set", Toast.LENGTH_LONG).show();

        } catch (Exception ex) {
            ex.printStackTrace();
            System.out.print("OOPS!");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-09T16:14:27.900

您的请求代码是唯一的，这是您的问题。您必须为不同的警报使用唯一代码。您的带有一个请求代码的代码会覆盖警报时间。（对不起我的英语不好，这不是我的语言！）

使用此代码：

```
for (int i = 0; i < length; i++) {
    .
    .
    .

    int requestCode = (int) (System.currentTimeMillis());
    PendingIntent pendingIntent = PendingIntent.getActivity(this,
                requestCode, intent, PendingIntent.FLAG_CANCEL_CURRENT);
    Thread.sleep(10);

    .
    .
    .
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:54:12.140

如果您想要 5 个不同的警报，那么您的 PendingIntent 应该不同。您可以通过在其中添加额外内容来使 PendingIntent 独一无二。但无论如何，您的代码至少应该生成一个警报。验证您在日历中设置的时间是否正确。

无论如何，您不需要 5 个单独的日历、意图或任何东西。只需更新它们并设置警报。您绝对不需要将它们保存在数组中。

# java - 糟糕的 XML 解析 Java

> ID：11360912
> 
> 赞同：0
> 
> 时间：2012-07-06T10:58:28.580
> 
> 标签：java, xml-parsing

我开发了一种在 XML 文件中插入新元素的方法。我正在测试它读取输入文件的第一个元素 Usuario 并将其附加到最后。

输入：

```
<Usuarios>
        <Usuario>
                <id>identificador</id>
                <email>nn@gmail.com</email>
                <rol>profesor</rol>
                <alta>01/01/2012</alta>
                <baja>30/08/2021</baja>
        </Usuario>
        <Usuario>
                <id>00000000H</id>
                <email>pertur@gmail.com</email>
                <rol>profesor</rol>
                <alta>01/01/2012</alta>
                <baja>30/08/2021</baja>
        </Usuario>
        <Usuario>
                <id>970104</id>
                <email>kk@gmail.com</email>
                <rol>alumno</rol>
                <alta>01/01/2012</alta>
                <baja>30/08/2021</baja>
        </Usuario>
</Usuarios> 
```

输出：

```
<Usuarios>
        <Usuario>
                <id>identificador</id>
                <email>nn@gmail.com</email>
                <rol>profesor</rol>
                <alta>01/01/2012</alta>
                <baja>30/08/2021</baja>
        </Usuario>
        <Usuario>
                <id>00000000H</id>
                <email>pertur@gmail.com</email>
                <rol>profesor</rol>
                <alta>01/01/2012</alta>
                <baja>30/08/2021</baja>
        </Usuario>
        <Usuario>
                <id>970104</id>
                <email>kk@gmail.com</email>
                <rol>alumno</rol>
                <alta>01/01/2012</alta>
                <baja>30/08/2021</baja>
        </Usuario>
<Usuario>
        <id>identificador</id>
        <email>nn@gmail.com</email>
        <rol>profesor</rol>
        <alta>01/01/2012</alta>
        <baja>30/08/2021</baja>
    </Usuario>
</Usuarios> 
```

我在做什么坏事？有两个问题：

1.- 输入中的元素在输出文件中没有正确缩进。变压器不会重新缩进所有寄存器？2.- 新元素正确缩进，但新实例没有。

想法？

资源：

```
public void almacenarUsuario(UsuarioNegocio usuario) throws Exception {
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(new File(directorio + "personas.xml"));

    Element nUsuario = (Element) doc.getElementsByTagName("Usuarios").item(0);
    Node node = doc.createElement("Usuario");         
    nUsuario.appendChild(node);         

    Element nid = doc.createElement("id");         
    nid.appendChild(doc.createTextNode(usuario.getIdUsuario()));
    node.appendChild(nid);

    Element nemail = doc.createElement("email");         
    nemail.appendChild(doc.createTextNode(usuario.getEmail()));
    node.appendChild(nemail);

    Element nrol = doc.createElement("rol");         
    nrol.appendChild(doc.createTextNode(usuario.getRol()));
    node.appendChild(nrol);

    Element nalta = doc.createElement("alta");         
    nalta.appendChild(doc.createTextNode(usuario.getFecha_alta()));
    node.appendChild(nalta);

    Element nbaja = doc.createElement("baja");         
    nbaja.appendChild(doc.createTextNode(usuario.getFecha_baja()));
    node.appendChild(nbaja);    

    // Formatter //                                       
    TransformerFactory transformerFactory = TransformerFactory.newInstance();
    transformerFactory.setAttribute("indent-number", new Integer(25));
    Transformer transformer = transformerFactory.newTransformer();
    transformer.setOutputProperty(OutputKeys.METHOD, "xml");
    transformer.setOutputProperty(OutputKeys.ENCODING, "utf-8");   
    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");   
    transformer.setOutputProperty(OutputKeys.INDENT, "yes");   
    transformer.setOutputProperty("{http://xml.apache.org/xalan}indent-amount","4");        

    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult(new File("/opt/icxp1/Temporal/jose/personal/nuevo.xml"));
    transformer.transform(source, result);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:09:59.183

转型前，

```
transformer.setOutputProperty(OutputKeys.INDENT, "yes"); 
```

# android - 如何在编辑文本中设置日期

> ID：11360915
> 
> 赞同：3
> 
> 时间：2012-07-06T10:58:29.810
> 
> 标签：android, datepicker

我有一个编辑文本框，我调用了 ontouchlistener，它显示了一个自定义对话框，当我单击 setdate 按钮时，日期选择器上的日期应该设置在编辑文本上，并且对话框应该被关闭。但我不知道如何从日期选择器中获取日期以及如何在编辑文本框中进行设置。我在 date.init(year, monthOfYear, dayOfMonth, new MyOnDateChangedListener()) 中遇到错误；并且错误是这一行的多个标记 - dayOfMonth 无法解析为变量 - year 无法解析为变量 - monthOfYear 无法解析为变量

```
 et4.setOnTouchListener(new OnTouchListener() {
    final Dialog setdatedialog = new Dialog(DropboxActivity.this);                      
    public void onClick(View v) {
    }
    public boolean onTouch(View arg0, MotionEvent arg1) {
    setdatedialog.setContentView(R.layout.datedialog);
    setdatedialog.setTitle("select date of puchase");
    setdatedialog.setCancelable(true);
    setdatedialog.show();
    Button back = (Button)setdatedialog.findViewById(R.id.back3);
    back.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
    setdatedialog.dismiss();
    }
    });
    Button setdate=(Button)setdatedialog.findViewById(R.id.setdate);
    DatePicker date = (DatePicker)setdatedialog.findViewById(R.id.datePicker1);                         
    class MyOnDateChangedListener implements OnDateChangedListener {
        public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth){
            et4.setText( "" + dayOfMonth + "-" + (monthOfYear + 1) + "-" + year );
    }
    };
    date.init( year, monthOfYear, dayOfMonth, new MyOnDateChangedListener() );

    return false;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T11:34:42.357

在 xml 和以下代码中定义 editText 和 Button 在您的活动中：

```
 editText=(EditText) findViewById(R.id.date);
        button=(Button) findViewById(R.id.play);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                showDialog(DATE_DIALOG_ID);
            }
        });

        Calendar c=Calendar.getInstance();
        mYear=c.get(Calendar.YEAR);
        mMonth=c.get(Calendar.MONTH);
        mDay=c.get(Calendar.DAY_OF_MONTH); 
```

现在添加这两个函数来调用 DatePicker Dialog 并在 Edittext 中设置日期

```
protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this,
                        mDateSetListener,
                        mYear, mMonth, mDay);

        }

        return null;

    }
    private DatePickerDialog.OnDateSetListener mDateSetListener =new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;
            editText.setText(new StringBuilder().append(mDay).append("/").append(mMonth+1).append("/").append(mYear));

        }

    }; 
```

全局定义：

```
 static final int DATE_DIALOG_ID = 0;
    private int mYear,mMonth,mDay; 
```

这将帮助您在 editText 中设置日期。希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:02:40.527

你必须使用`DatePickerDialog.OnDateSetListener`

```
 private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
            public void onDateSet(DatePicker view, int year, int monthOfYear,
                    int dayOfMonth) {
                String date_selected = (monthOfYear + 1) + "/" + dayOfMonth + "/"
                        + year;

                editText.setText(date_selected);

            }
        }; 
```

像往常一样创建对话框

```
 @Override
        protected Dialog onCreateDialog(int id) {
            switch (id) {
            case 1:
                return new DatePickerDialog(this, mDateSetListener, cyear, cmonth,
                        cday);
            }
            return null;
        } 
```

# intellij-idea - 如何粘贴代码而不在 IDEA 中重新格式化

> ID：11360916
> 
> 赞同：61
> 
> 时间：2012-07-06T10:58:33.740
> 
> 标签：intellij-idea

我想防止 Intellij IDEA 在我粘贴代码时重新格式化我的代码。
我怎样才能做到这一点？

PS 它是必需的，因为我无法为 Erlang（ErlGray 插件）自定义代码格式

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-11-17T15:53:58.923

如果其他人遇到这种情况并且不想更改他们的项目范围设置，我最近发现了一个“粘贴简单”命令（Ctrl+Alt+Shift+V）。我不确定它添加了什么版本，但它从 IntelliJ 13 开始就存在。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-07-06T12:51:59.447

设置`Settings`（`Preferences`在 Mac 上）| `Editor`| `Smart Keys`| `Reformat on Paste`到**无**：

![重新格式化粘贴](../Images/3776df6d23966d813bbdf80a6697234b.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-29T10:59:26.103

我发现仅将粘贴上的重新格式化更改为无对我不起作用。我还必须取消勾选“智能缩进粘贴线”

[![在此处输入图像描述](../Images/1c9be8c174acce4792fd343bcd416cc6.png)](https://i.stack.imgur.com/3FTqs.png)

# silverlight - DateTime.Today 值在发送到服务器时发生变化

> ID：11360922
> 
> 赞同：1
> 
> 时间：2012-07-06T10:59:07.713
> 
> 标签：silverlight, datetime, timezone

我正在使用 Silverlight，但遇到了问题。在我的数据库中，我存储了一些格式为 yyyy/mm/dd 00:00:00 的日期，这意味着我只存储年、月和日，将时间设为 00:00:00。

当客户端执行操作并发送到服务器时，我得到 DateTime.Today，它将保持我的数据库日期的格式，但是当它是 sendind 时，我得到 yyyy/mm/dd 22:00:00，所以当我的服务器端函数获取日期，它不会从数据库返回任何值。

如何解决此问题以获得正确的日期时间？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:23:02.513

使用 UTC 时间来确保您不会遇到时区问题。

您可以通过检查 Kind 属性来查看 DateTime 是 UTC 还是基于本地，并且您可以通过 DateTime.UtcNow 获取当前的 UTC 时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:20:35.427

DateTime 结构在序列化时非常容易受到 DST、时区和文化的影响。

你是在推送之前在客户端序列化它吗？客户端和服务器时区有什么区别？

我建议您尝试使用 DateTime.UtcNow 然后序列化数据。我更喜欢使用不变文化进行序列化

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T11:35:16.453

除了将 UTC 时间存储在数据库中之外，您还可以使用 DateTime 类的 Date 属性将所有日期值的时间硬设置为 12:00:00。

```
DateTime.UtcNow.Date 
```

您可以使用 ToLocalTime 方法以当地时区向用户显示日期：

```
DateTime.ToLocalTime().Date 
```

我确信每个数据库引擎都有类似的功能，但是获取 UTC 日期的 SQL Server 功能是（令人惊讶的是）：

```
GETUTCDATE() 
```

我希望这有帮助。

# jquery-validate - 如何清除 jquery 验证错误

> ID：11360925
> 
> 赞同：15
> 
> 时间：2012-07-06T10:59:20.063
> 
> 标签：jquery-validate, unobtrusive-validation

我正在劫持现有表单并发布到服务器。jQuery validate 完成大部分验证，但如果服务器上的验证失败，我们会将错误以 JSON 形式返回给客户端。

下面是执行此操作的代码：

```
<script type="text/javascript">

    $(function () {

        $("form").submit(function (e) {
            var $form = $(this);
            var validator = $form.data("validator");

            if (!validator || !$form.valid())
                return;

            e.preventDefault();

            $.ajax({
                url: "@Url.Action("index")",
                type: "POST",
                data: $form.serialize(),
                statusCode: {
                    400: function(xhr, status, err) {                           
                        var errors = $.parseJSON(err);
                        validator.showErrors(errors);
                    }
                },
                success: function() {
                    // clear errors
                    // validator.resetForm();
                    // just reload the page for now
                    location.reload(true);
                }
            });
        });

    });

</script> 
```

问题是如果 POST 成功，我似乎无法清除验证错误。我试过打电话`validator.resetForm()`，但这没有区别，`showError()`调用添加的错误消息仍然显示。

注意我也在使用 jQuery.validate.unobtrusive 插件。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-12T11:31:36.017

前段时间发的，不知道解决了没？我对 jQuery validate 和*jQuery.validate.unobtrusive*插件有同样的问题。

在检查了源代码和一些调试之后，我得出的结论是问题出在不显眼的插件处理错误消息的方式上。它删除了`errorClass`jQuery.validate*插件*设置的，因此当表单被重置时，jQuery validate 找不到要删除的错误标签。

我不想修改插件的代码，所以我能够通过以下方式克服这个问题：

```
// get the form inside we are working - change selector to your form as needed
var $form = $("form");

// get validator object
var $validator = $form.validate();

// get errors that were created using jQuery.validate.unobtrusive
var $errors = $form.find(".field-validation-error span");

// trick unobtrusive to think the elements were succesfully validated
// this removes the validation messages
$errors.each(function(){ $validator.settings.success($(this)); })

// clear errors from validation
$validator.resetForm(); 
```

*注意：我使用变量的 $ 前缀来表示包含 jQuery 对象的变量。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-13T15:08:19.087

在**.NET Core**中，我在内置的**Bootstrap**模式中有表单。

现在，一旦模态开始显示，我将通过使用`.text-danger`错误消息容器的附加类来手动从它们的容器中删除错误消息跨度，如下所示：

```
$('#my-form').find('.text-danger').empty(); 
```

这样我就不会依赖`.field-validation-error`可能已经切换到`.field-validation-valid`.

库**jquery.validate**和**jquery.validate.unobtrusive**的**min.js**版本是通过局部视图**_ValidateScriptsPartial.cshtml**加载的，所以我和它们一起玩，看看/和原生 html 表单做了什么。******`resetForm()``valid()``reset()`******

 ******所以在我的例子中，`$('#my-form').data("validator").resetForm()`只重置了一些验证器内部，而不是表单，它不会触发`onReset()`不显眼的库中的函数。确实消除了模态中的`$('#my-form').valid()`错误，但前提是模态完全显示且有效。原生 html 表单`reset()`是唯一同时触发`onReset()`不显眼的库和`resetForm()`验证器的表单。所以看起来我们需要触发原生 html 表单`document.querySelector('#my-form').reset()`来激活两个库/插件的重置功能。

有趣的是，不显眼的库仅在其函数中`empty()`在`.field-validation-error`类（错误跨度消息的容器）上运行简单的 jQuery `onSuccess()`，而不是`onReset()`. 这可能就是为什么`valid()`能够删除错误消息的原因。不显眼`onReset()`的看起来只负责将`.field-validation-error`类切换到`.field-validation-valid`. `<span id="___-error">The error message</span>`因此，我们在容器内留下了一个`<span class="text-danger field-validation-error">...</span>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-13T11:08:59.190

```
$("#form").find('.field-validation-error span').html('') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-28T07:29:59.047

清除这样的错误可能是我错了：

```
function clearError(form) {
    $(form + ' .validation-summary-errors').each(function () {
        $(this).html("<ul><li style='display:none'></li></ul>");
    })
    $(form + ' .validation-summary-errors').addClass('validation-summary-valid');
    $(form + ' .validation-summary-errors').removeClass('validation-summary-errors');
    $(form).removeData("validator");
    $(form).removeData("unobtrusiveValidation");
    $.validator.unobtrusive.parse($(form));
}; 
```

我尝试了**AaronLS**在评论中给出的答案，但没有得到解决方案，所以我就这样做了。

也许对某人有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-26T20:30:57.243

这是我最终用来清除/重置所有错误的代码。那里可能有一些冗余，但它对我有用。

```
function removeValidationErrors(frmId) {
    var myform = $('#' + frmId);
    myform.get(0).reset();
    var myValidator = myform.validate();
    $(myform).removeData('validator');
    $(myform).removeData('unobtrusiveValidation');
    $.validator.unobtrusive.parse(myform);
    myValidator.resetForm();
    $('#' + frmId + ' input, select').removeClass('input-validation-error');
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-31T14:15:20.630

这仍然是一个问题（甚至 6 年之后）的原因是 jQuery Validation 没有一个事件处理程序来处理您的表单何时有效；仅适用于无效时。

Unobtrusive Validation 利用 Invalid 处理程序将您的错误添加到您的 Validation Summary 元素中。（具体来说，任何带有 . 的元素`data-valmsg-summary=true`）但是因为没有 Valid 处理程序，所以 Unobtrusive Validation 无法知道何时可以清除它们。

但是，jQuery Validation 确实允许您提供自己的`showErrors`方法，在每次验证检查后调用该方法，无论结果是有效还是无效。因此，您可以编写一个自定义函数，如果您的表单有效，它将清除这些验证摘要框。

这是一个将在全球范围内应用它的示例。（您可以使用 将它应用于验证器的特定实例`settings`，但由于我一直想要这个功能，所以我只是将它放在`defaults`对象中。）

```
$.validator.defaults.showErrors = function () {
    if (!this.errorList.length) {
        var container = $(this.currentForm).find("[data-valmsg-summary=true]");
        container.find("ul").empty();
        container.addClass("validation-summary-valid").removeClass("validation-summary-errors");
    }

    // Call jQuery Validation's default showErrors method.
    this.defaultShowErrors();
}; 
```

这还具有在表单有效时清除验证摘要框的好处，而不必等待用户请求表单提交。******

# xml - 带有 Java 代码的 XML 解析器

> ID：11360927
> 
> 赞同：0
> 
> 时间：2012-07-06T10:59:30.693
> 
> 标签：xml

我想通过 XML 文件填充下拉列表。我已经创建了 XML 文件，并且我首先编写的代码是为了读取 xml 文件，只是给我 xml 文件中的项目正在编译，但是当我想稍后运行代码时给我错误。

```
public ArrayList readXML(){

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db;

        try {
            db = dbf.newDocumentBuilder();

    Document dom;

        dom = db.parse("PVS_XML.xml");

    Element docEle = dom.getDocumentElement();

    NodeList nl = docEle.getElementsByTagName("item");
    System.out.println(((Node) nl).getNodeValue());

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    return null;
} 
```

错误信息：

```
java.lang.ClassCastException: com.sun.org.apache.xerces.internal.dom.DeepNodeListImpl cannot be cast to org.w3c.dom.Node
at de.sidion.pvsng.pages.InputPage.readXML(InputPage.java:222)
at de.sidion.pvsng.pages.InputPage.init(InputPage.java:255)
at de.sidion.pvsng.pages.InputPage.<init>(InputPage.java:183)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T11:04:24.520

您不能将节点列表强制转换为节点。如果这是您想要的，请获取列表的第一个元素

```
NodeList nl = docEle.getElementsByTagName("item");
...
((Node) nl).getNodeValue() <-- this 
```

如果您真的想要，请浏览列表或获取列表中的一个元素：

```
for(Node n : nl)
    System.out.println(n.getNodeValue()); 
```

**编辑**

我的错误，它是不可迭代的，尝试按大小来做：

```
for(int i=0; i < nl.getLength(); i++)
{
   Node childNode = nl.item(i);
   System.out.println(childnode.getNodeValue());
} 
```

但是，我怀疑这仍然不是您想要做的，因为您得到的是元素，而元素没有值，它们具有具有值的文本节点。这意味着您需要子节点（文本节点）。所以你可能想要类似的东西

```
for(int i=0; i<nodeList.getLength(); i++)
{
   Element childElement = (Element)nodeList.item(i);
   NodeList innernodes = childElement.getChildNodes();

   System.out.println(innernodes.item(0).getNodeValue());
} 
```

# linux - “visudo：警告：Cmnd_Alias `NOPASSWD' 已引用但未定义”是什么意思？

> ID：11360928
> 
> 赞同：0
> 
> 时间：2012-07-06T10:59:31.947
> 
> 标签：linux, shell, permissions, sudoers

我正在使用 visudo 命令编辑文件 sudoer。当我完成保存文件时，会出现此警告。

```
visudo: Warning: Cmnd_Alias `NOPASSWD' referenced but not defined 
```

我无法以非 root 用户身份远程执行特定文件。我认为这个警告可能与它有关。

如何解决此警告？

编辑：实际上是 NOPASSWD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:20:35.387

就像 Paulo Scardine 所说，不看 sudoers 文件是很难判断的。

警告仍然存在，但我无法远程 sudo 的原因是因为我没有放

```
Defaults !visiblepw 
```

[https://bugzilla.redhat.com/show_bug.cgi?id=583911](https://bugzilla.redhat.com/show_bug.cgi?id=583911)

我们需要关闭或打开它，但我们不能没有它。

# entity-framework-4.1 - WCF RIA 变更集提交订单。为什么在父实体之前插入子实体？

> ID：11360932
> 
> 赞同：0
> 
> 时间：2012-07-06T11:00:02.947
> 
> 标签：entity-framework-4.1, wcf-ria-services, changeset, domaincontext

这是我的问题：我正在使用 Silverlight+ WCF RIA + EntityFramework 和域数据源。我在客户端插入一个父实体，然后是一个子实体（父实体可以有很多子实体），如下所示：

```
 Parent p = new Parent();
   p.PropertyA = "MyTest";

   if (!this.domainContext.Parents.Contains<Parent>(p))
   this.domainContext.Parents.Add(p);

   Child c = new Child();
   c.PropertyOfC = "Togodo";

   if (!this.domainContext.Childs.Contains<Child>(c))
      this.domainContext.Childs.Add(c);

   c.parent = p;
   p.Child.Add(c);

   // Submit update RAISE ERROR
   domainContext.SubmitChanges(submitOp =>
   {
       // Declare error
       Exception error = null;

       // Set error or result
       if (submitOp.HasError)
       {
            error = submitOp.Error;
       }

       // Invoke completion callback
       if (completed != null)
                completed(error);
       }, null);
   } 
```

当我在服务器端调用“submitChanges”时，子实体的“插入方法”在父实体之前调用。因此由于外键约束而发生异常。这里的代码被简化了。在实际情况下，我不能两次调用提交更改（一次在创建父实体后，一次在子实体创建后）

如何控制服务器端的插入顺序，或者我做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T07:30:13.263

感谢您的帮助，但我发现了问题。

实际上，我是通过存储过程插入父实体，并且没有正确配置 Id 的“输出结果绑定”。因此，在插入数据库后，我的实体模型上的父 ID 没有正确更新。

# c# - 如何在 c# 中使用数据表获取数据库列的大小

> ID：11360938
> 
> 赞同：1
> 
> 时间：2012-07-06T11:00:35.080
> 
> 标签：c#, database

我想使用 C# 中的数据表来获取表中任何列的最大大小。例如，如果我在数据库中有一个名为 dept 的表，它的属性是 NAME 和 ADDRESS，并且我将 NAME 的大小设置为 varchar(50)，将地址设置为 varchar(30)。

现在我想得到50和30.....

我写了这段代码

```
DataSet ds1 = new DataSet();
    DataSet ds = new DataSet();
        string query = Form1.query1Pass;

        SqlCommand cmd = new SqlCommand(query.ToString(), con);
        this.tablename1 = query.Substring(query.LastIndexOf("from")+4); ;
        cmd.ExecuteNonQuery();

        SqlDataAdapter adp = new SqlDataAdapter(cmd);

        adp.Fill(this.ds);
          string query2 = Form1.query2Pass;
        cmd = new SqlCommand(query2, con);
        adp = new SqlDataAdapter(cmd);

        adp.Fill(this.ds1);

            StringBuilder datatype2 = new StringBuilder();
            this.datatype2.Append("Data Type Conflict: ");
            this.datetimeCon.Append("DateTime Format Conflict: ");
            DataTable table1 = this.ds.Tables[0];
            DataTable table2 = this.ds1.Tables[0]; ;
            DataColumnCollection col1 = table1.Columns;
            DataColumnCollection col2 = table2.Columns;
            foreach (DataColumn ds in col1) {
                foreach (DataColumn ds2 in col2) {
                    if (ds.ColumnName.Equals(ds2.ColumnName)) {
                        if (!ds.DataType.Equals(ds2.DataType)) {
                            this.datatype2.Append(ds.ColumnName + "<" + ds.DataType + ">, " + ds2.ColumnName + "<" + ds2.DataType + ">,");
                        }
                        else 
                            if (ds.MaxLength!=ds2.MaxLength) {
                            maxLength.Append(ds.ColumnName+"<"+ds.MaxLength+">, "+ds2.ColumnName+"<"+ds2.MaxLength+">,");
                        }

                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T12:18:45.140

我假设这些列不是`Text`列。该[`MaxLength`属性](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.maxlength)仅在带有 的列上设置`DataType=String`。[MSDN](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.maxlength)：

> `MaxLength`对于非文本列，该属性将被忽略。如果 您分配给非列，`ArgumentException`则会引发异常。`MaxLength``string`

顺便说一句，您可能想要使用 LINQ 方法，但这只是个人喜好问题：

```
var t1Cols = table1.Columns.Cast<DataColumn>();
var t2Cols = table2.Columns.Cast<DataColumn>();

var diffTypes =  
    from t1Col in t1Cols
    join t2Col in t2Cols on t1Col.ColumnName equals t2Col.ColumnName
    where t1Col.DataType != t2Col.DataType
    select string.Format("{0}<{1}>,{2}<{3}>",
        t1Col.ColumnName, t1Col.DataType, t2Col.ColumnName, t2Col.DataType);
var diffMaxLength = 
    from t1Col in t1Cols
    join t2Col in t2Cols on t1Col.ColumnName equals t2Col.ColumnName
    where t1Col.MaxLength != t2Col.MaxLength
    select string.Format("{0}<{1}>,{2}<{3}>",
        t1Col.ColumnName, t1Col.MaxLength, t2Col.ColumnName, t2Col.MaxLength);

Console.WriteLine("diff. Types: " + string.Join(", ", diffTypes));
Console.WriteLine("diff. max Length: " + string.Join(", ", diffMaxLength)); 
```

# batch-file - 批处理脚本：goto 出乎意料。使用 find xyz file.log && goto pass || 失败

> ID：11360941
> 
> 赞同：0
> 
> 时间：2012-07-06T11:00:44.897
> 
> 标签：batch-file, adb, goto

我的批处理脚本有一个非常奇怪的错误。尽管代码使用了 Android Debugging Bridge，但我确信这是与 cmd 而不是 adb 相关的错误。所以，基本上如果有人在乎，脚本只会检查 root 访问权限。这是代码的片段：

```
@echo off
adb kill-server
adb start-server
adb shell "su" >check.log 2>&1
adb kill-server
"%windir%\system32\find.exe" "#" check.log && goto pass || goto fail
:fail
echo No root access!
pause
:pass
echo Root access detected!
pause 
```

输出是：

```
* daemon not running. starting it now on port XXXX *
* daemon started successfully *
* server not running *
---------- CHECK.LOG
goto was unexpected at this time 
```

并且窗口自动关闭。

如果我通过手动输入命令在命令窗口中运行它，这就是我得到的：

```
J:\tools>adb kill-server

J:\tools>adb start-server
* daemon not running. starting it now on port XXXX *
* daemon started successfully *

J:\tools>adb shell su >check.log 2>&1

J:\tools>"%windir%\system32\find.exe" "#" check.log && echo pass || echo fail

---------- CHECK.LOG
fail 
```

谁能想到解决方案？我试着这样做：

```
@echo off
adb kill-server
adb start-server
adb shell "su" >check.log 2>&1
adb kill-server
SET tr=0
"%windir%\system32\find.exe" "#" check.log >nul && SET tr=1 || SET tr=0
if "%tr%"=="1" goto pass
if "%tr%"=="0" goto fail 
```

我仍然收到 goto 的错误。：/我很困惑，我以前用过其他这样的说法。感谢您通读！:)

哦，system32 有时不存在于路径中，因为这是供其他人使用的，所以我需要使用 %windir%\system32\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:16:04.267

我跑了你的`find`电话，对我来说效果很好。尝试使用`%errorlevel%`作为解决方法，这在我的电脑上也可以正常工作

```
find "#" check.log
if %errorlevel%==0 goto pass
if %errorlevel%==1 goto fail 
```

*注意：您不需要`find`像`system32`在`PATH`变量中那样指定 的完整路径。*

希望这可以帮助！

# php - 从 ajax 调用解析 JSON 数据

> ID：11360947
> 
> 赞同：1
> 
> 时间：2012-07-06T11:01:14.470
> 
> 标签：php, javascript, sql, ajax, codeigniter

我之前发布了一些关于如何做同样事情的问题，人们给我指出了正确的方向。因此，如果这变得重复，我深表歉意。不过，我这次发帖是想看看是否有人可以抽出几秒钟来帮助我使用 javascript。

我有一个已经将数据提交到不同表中的表单，并且想要实现“预装响应功能”。这仅仅是一个下降列表的选择，当`onChange`事件启动选项列表的事件时，它运行的JavaScript可以使用适当的数据填充以下文本区域。

我相信因为它已经在一个表单中，我不能简单地将它放在另一个表单中并使用提交，而且，我希望能够在不刷新页面的情况下做到这一点。

```
<form action="<?=base_url();?>ticket/addmessage/<?=$ticket_details['id'];?>/" enctype="multipart/form-data" method="post" name="message">

        <label for="frm_precan">Canned Response</label>
        <span class="input">                        
            <select id="frm_precan" name="precan" onchange="updateText()">
                <option value="">--Please Select--</option>
                <?php foreach($precan_list as $precan) :?>
                    <option value="<?=$precan['id']; ?>"><?=$precan['name'];?></option>
                <?php endforeach; ?>            
            </select>
        </span>

        <ul>
            <li><label for="message">Message<span class="req">*</span></label><span class="input"></span><br/></li> 
        </ul>   
        <textarea style="width: 100%; margin: 0; padding: 0; border-width: 1; font-family: courier;" name="message" rows="10" id="text_area"></textarea>
        <button type="submit"><span>Add Message</span></button>

</form> 
```

这是我的 HTML 表单。它通过 SQL 使用 PHP 来填充选项列表，因为预装消息存储在 SQL 表中。

所以我需要做的是以某种方式链接这个 Javascript（在 上调用`onChange`）：

```
 function updateText()
       {
       var message = document.getElementById('frm_precan').value;
       $('#text_area').val(message)
       }; 
```

（非常基本，我知道，但这是我挣扎的地方）所以这段代码想要将`('frm_precan').value;`（这是表中的 ID，以及我想要查询正确消息的字段）... 传递给 php 文件看起来像这样：

```
 public function get_message($message_id)
    {
        $sql_list  =
        "
        SELECT *
        FROM  ".$this->tables_automessages."
        WHERE id = '".mysql_real_escape_string($message_id)."'";

        $query = $this->db->query($sql_list);
        if($query->num_rows() > 0)
            {
            foreach ($query->result_array() as $row)
                {
                $return[] =
                array(
                        'message'                   =>  $row['message']

                    );
                }
            return $return;
            }
        else return false;
        }
} 
```

哦，我正在使用代码点火器，所以这也可能是我感到困惑的一个原因。所以变量想要从 javascript 出来进入一个控制器，然后去 SQL 查询。

如果有人能理解我的意思，我会感到惊讶......并且非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:10:31.553

您的 updateText 函数可以更改为此从控制器获取值并将生成的文本放在文本区域中。

```
function updateText()
{
    var messageId = $('#frm_precan').val();
    $.get('/yourcontroller/get_message/' + messageId, function(data) {
        $('#text_area').val(data)
    });
} 
```

查看您的 get_message 函数，您应该将其更改为仅返回消息文本而不是数组，否则您需要对结果进行 json_encode 并将 jQuery .get 调用更改为 .getJSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:22:24.140

要在您的 ajax 调用中使用 post：

```
function updateText()
{
    $.ajax({
        url: '/controller/get_message',
        data: {message_id:$('#frm_precan').val()},//no need to json encode, jQ does this for you
        type: 'POST',
        dataType: 'json',//or omit, jQ does an intelligent guess
        success: function(response)
        {
            console.log(responese);
            //function will be called when the ajax call is completed
        }
    });
} 
```

在您的控制器中，get_message 成员函数可能如下所示：

```
public function get_message()
{
    $id = $this->input->post('message_id');//=== data key used to send request
    //do your query 
} 
```

[这](https://stackoverflow.com/questions/308054/learning-how-to-use-ajax-with-codeigniter?rq=1)是一个类似的问题顺便说一句
，[在这里](http://api.jquery.com/jQuery.ajax/)`jQuery.ajax`，您可以找到可以使用该方法指定的各种事物（`$.ajax`是同一事物，`$`并且`jQuery`是同义词）

# android - 在 Android OS Ice Cream Sandwich 中保护数据库密码

> ID：11360948
> 
> 赞同：1
> 
> 时间：2012-07-06T11:01:19.373
> 
> 标签：android, sqlcipher

我正在使用 Sql 密码来保护数据库密码，但它不适用于 Ice Cream Sandwich，Sql 密码是否可用于 android 4.0.3，如果没有，是否还有其他方法可以做到这一点。

请帮忙。

NB 方式应该是开源的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:53:39.200

[SQLCipher for Android](https://github.com/sqlcipher/android-database-sqlcipher)支持 Android 2.1 - 4.0.3。在我们的 1.1 版本中添加了对 ICS 的支持，但是我们当前的库版本是 2.0.8，您可以在[此处](https://github.com/sqlcipher/android-database-sqlcipher/downloads)获取。

# java - 给定时间时如何找到时差

> ID：11360956
> 
> 赞同：1
> 
> 时间：2012-07-06T11:01:49.883
> 
> 标签：java

我有以下格式的时间。

```
String deptTime ="08:00 PM";
String arrTime = "04:00 AM"; 
```

如何准确地用**1 小时 30 分钟**这样的词来获得不同的小时数..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:37:07.030

```
 Calendar cal1 = Calendar.getInstance();
    cal1.set(Calendar.HOUR, 8);
    cal1.set(Calendar.AM_PM, Calendar.PM);

    Calendar cal2 = Calendar.getInstance();
    cal2.set(Calendar.HOUR, 4);
    cal2.set(Calendar.AM_PM, Calendar.AM);
    System.out.println(((cal1.getTimeInMillis()-cal2.getTimeInMillis())/1000)/3600); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:05:12.283

使用 apache commons-lang jar 文件.. 将 deptTime 和 arrTime 作为**StringBuffer**

```
 SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
    Calendar calendar = Calendar.getInstance();
    String dateIs = dateFormat.format(calendar.getTime());
    if (departureTime.reverse().substring(0,2).equalsIgnoreCase(arrivalTime.reverse().substring(0,2))) {
        departureTime.reverse().insert(0, dateIs + " ");
        arrivalTime.reverse().insert(0, dateIs + " ");
    } else {
        departureTime.reverse().insert(0, dateIs + " ");
        calendar.add(Calendar.DATE, 1);
        arrivalTime.reverse().insert(0,dateFormat.format(calendar.getTime()) +" ");
    }
    dateFormat.applyPattern("dd/MM/yyyy hh:mm aa");
    Date dateOne = dateFormat.parse(departureTime.toString());
    Date dateTwo = dateFormat.parse(arrivalTime.toString());

    DurationFormatUtils.formatDurationHMS(dateTwo.getTime() - dateOne.getTime());
    System.out.println(DurationFormatUtils.formatDurationWords(dateTwo.getTime() -
                                                               dateOne.getTime(),
                                                               true, true)); 
```

# java - 在 OrientDB 中查询嵌入列表

> ID：11360957
> 
> 赞同：9
> 
> 时间：2012-07-06T11:01:49.983
> 
> 标签：java, orientdb

我的 OrientDB 数据库（版本 1.0.1）中有一个文档，其结构大致如下：

```
{
    "timestamp": "...",
    "duration": 665,
    "testcases": [
        {
            "testName": "test01",
            "type": "ignore",
            "filename": "tests/test1.js"
        },
        {
            "iterations": 1,
            "runningTime": 45,
            "testName": "test02",
            "type": "pass",
            "filename": "tests/test1.js"
        },
        ...
        {
            "testName": "test05",
            "type": "ignore",
            "filename": "tests/test1.js"
        }
    ]
} 
```

我如何查询整个列表，例如。如果我想查找所有包含“忽略”类型的测试用例的文档？

我尝试了以下查询

```
select from testresult where testcases['type'] = 'ignore' 
```

但这会导致`NumberFormatException`.

```
select from testresult where testcases[0]['type'] = 'ignore' 
```

有效，但显然只查看每个文档的第一个列表元素。

```
select from testresult where testcases contains(type = 'ignore') 
```

不提供任何结果，但查询被接受为有效。

**更新：** 如果测试用例存储为单独的文档而不是嵌入列表，则以下查询按预期工作。

```
select from testresult where testcases contains (type = 'ignore') 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-05T04:12:15.657

我知道这是一个老问题，但我遇到了同样的问题，只是在这里找到了答案： [https ://www.mail-archive.com/orient-database@googlegroups.com/msg00662.html](https://www.mail-archive.com/orient-database@googlegroups.com/msg00662.html)

以下应该工作。在我非常相似的用例中确实如此。

```
select from testresult where 'ignore' in testcases.type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T10:26:31.520

我有类似的问题并最终得到：

```
select * from testresult 
  let $tmp = (select from 
    (select expand(testcases) from testresult ) 
  where 
    value.type = 'ignore') 
where 
  testcases in $tmp.value 
```

这将为您提供包含至少一个类型为忽略的测试用例的所有测试结果文档。此查询适用于嵌入式列表。注意在 OrientDB >= 1.4.0 中可以使用扩展功能。

内部查询：

```
select from (select expand(testcases) from testresult) where value.type='ignore' 
```

仅选择 type = 'ignore' 的不同测试用例。结果是测试用例。为了获得整个文档，我们将这些测试用例与每个文档中包含的测试用例（$tmp.value 中的测试用例）进行匹配。

我不知道是否有更简单的方法来查询嵌入列表...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:27:21.967

尝试

```
select from testresult where testcases traverse ( type = 'ignore' ) 
```

检查遍历运算符（[https://groups.google.com/forum/?fromgroups#!topic/orient-database/zoBGmIg85o4](https://groups.google.com/forum/?fromgroups#!topic/orient-database/zoBGmIg85o4)）以了解如何使用 fetchplan 或将 any() 而不是 testcases 放在“where”之后。

例如，我们有一个名为 Country 的类，它有一个带有一些 isoCode 的嵌入列表属性。如果我们尝试以下查询：

```
select name,description,isoCodes,status from Country where isoCodes traverse ( value = 'GB' OR value = 'IT' ) 
```

Orientdb Rest 接口提供：

```
{
  "result": [{
      "@type": "d", "@version": 0, 
"name": "Italy", 
  "isoCodes": [
    {
      "@type": "d", "@version": 0, 
    "code": "iso3166-A2", 
    "value": "IT"
      }, 
    {
      "@type": "d", "@version": 0, 
    "code": "iso3166-A3", 
    "value": "ITA"
      }], 
  "status": [
    {
      "@type": "d", "@version": 0, 
    "status": "1", 
    "startingDate": "2012-04-24"
      }]
    }, {
      "@type": "d", "@version": 0, 
"name": "United Kingdom", 
  "isoCodes": [
    {
      "@type": "d", "@version": 0, 
    "code": "iso3166-A2", 
    "value": "GB"
      }, 
    {
      "@type": "d", "@version": 0, 
    "code": "iso3166-A3", 
    "value": "GBR"
      }], 
  "status": [
    {
      "@type": "d", "@version": 0, 
    "status": "1", 
    "startingDate": "2012-04-24"
      }]
    }
  ]
} 
```

希望能帮助到你！！。

问候。

# groovy - 实际安装葡萄进口

> ID：11360958
> 
> 赞同：1
> 
> 时间：2012-07-06T11:01:50.387
> 
> 标签：groovy, import, grape

我有一个脚本，我很快就使用`@Grab`注释来导入包 - 即[HttpBuilder](http://groovy.codehaus.org/modules/http-builder/home.html)。现在我想实际安装 HttpBuilder 并在将脚本投入生产之前摆脱注释 - 我不想在产品服务器上动态获取依赖关系。

我实际上如何告诉 Grape 一劳永逸地安装依赖项？有没有办法做到这一点？如果没有，我应该如何在部署之前安装这个包？

**编辑**根据 tim_yates 的建议，我从 HttpBuilder 网站下载了所有 teh JAR，并将它们添加到类路径中。但是，当我运行时`groovy -cp dependencies/* myApp.groovy`，我得到的是一堆错误，比如

```
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
/path/to/dependencies/httpclient-4.0.3.jar: 1: unexpected char: 0x3 @ line 1, column 3.
   PK
     ^ 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:05:05.690

如果您转到 HttpBuilder 的[下载页面](http://groovy.codehaus.org/modules/http-builder/download.html)，您可以按照第一段中的链接下载`http-builder-xxx-all.zip`您想要的版本...

展开这个，它包含 jar，以及`dependencies`文件夹中的依赖 jar

然后，只需以通常的方式将它们添加到类路径并摆脱该`@Grab`行

# java - 在 JTabbedpane 选项卡上添加图标

> ID：11360964
> 
> 赞同：6
> 
> 时间：2012-07-06T11:02:13.913
> 
> 标签：java, swing, jframe

我的表单上有一个 JTabbedPane。问题是我想在我的 TabbedPane 的选项卡上显示图标。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T11:04:46.893

使用以下`setIconAt`方法`JTabbedPane`：

[http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#setIconAt(int, javax.swing.Icon)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#setIconAt%28int,%20javax.swing.Icon%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T11:06:25.123

请先阅读 Java 教程，它们非常有用： [http ://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)

# extjs - 将自定义 JSON 解析为 ExtJS 4.1 TreeStore

> ID：11360966
> 
> 赞同：2
> 
> 时间：2012-07-06T11:02:22.573
> 
> 标签：extjs

我有一个响应 JSON 字符串的 HTTP 服务器。它们看起来像这样：

```
{
  ...
  “价值”：{
    “孩子们”：[
      {
        "路径":"KEY_518693",
        "名称":"KEY_518693",
        "children_count_overall":0,
        "children_page":1,
        “children_pages”：1，
        “children_pagesize”：10
        ...
      }
    ],
    "children_count_overall":1,
    "children_page":1,
    “children_pages”：1，
    "children_pagesize":1,
    “名称”：空，
    “路径”：空，
    ...
  }
}

```

每个请求都有父节点（in `"value"`），我为此请求了子节点和这个子节点（in `"children"`），还有一些分页信息。

如果未指定父节点，则将根节点作为虚拟根节点的子节点返回。

我将`"root"`代理的属性设置为`"value"`，因此代理知道在哪里搜索节点，但是`tree`我的 TreeStore 的成员在 a 之后有一个奇怪的结构`load()`：

```
tree: {
  childNodes: [
    {
      childNodes: [], <-- no child?
      data: {
        children: [
          { ...the raw data of the "children" node (like in the example above)...}
        ],
        ... the data of the "value" node and some data from the implicit node model...
      }
    }
  ]
} 
```

不知何故，对象`"value"`被转换为节点并插入到树中，但`"children"`数组中的对象不会被转换并最终成为该`"value"`节点的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:43:46.073

TreeStore 旨在使用以下 JSON 对象：

```
{
  "success": true, 
  "Root": [
          {...},{...},{...} //Children
          ]
} 
```

由于您没有在 Root 节点内指定数组，因此所有这些信息都作为原始数据传递。此外，如果您希望能够访问您的数据而不必通过“原始”信息，最好指定一个模型，您可以在其中指定每个节点数据内的字段。

所以基本上我会说最好重做你的服务器响应或自己检查原始数据。

# android - 安卓蓝牙异常

> ID：11360968
> 
> 赞同：0
> 
> 时间：2012-07-06T11:02:27.563
> 
> 标签：android, bluetooth

好的，我再试一次。

我在 ubuntu 中有一个设备 sdptool，我的设备说明了以下内容：

```
# sdptool browse  C0:1B:DC:1F:E2:F1
Browsing C0:1B:DC:1F:E2:F1 ...
Service Name: OBEX Object Push
Service RecHandle: 0x10000
Service Class ID List:
 "OBEX Object Push" (0x1105)
Protocol Descriptor List:
 "L2CAP" (0x0100)   
 "RFCOMM" (0x0003)
 Channel: 9 
 "OBEX" (0x0008)
Profile Descriptor List:
 "OBEX Object Push" (0x1105)
  Version: 0x0100 
```

如您所见，该设备确实支持 RFCOMM 协议和用于文件传输的 OBEX。我的 android 应用程序有一个简单的代码，它试图通过不安全的 RFCOMM 通道连接到这个设备，只是为了没有用户交互。我想连接到这个设备，所以我使用设备 mac-address 进行连接，并且套接字已准备好，logcat 是这样说的。

但我只得到错误：

```
Connection refused 
```

请记住，java 代码中的 mac-address 与上面列出的不同。

所以这是我的代码：

```
import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.UUID;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class SimpleConnectAndroidActivity extends Activity {

final static String toast = "IAM HERE"; 

final static String TAG ="SimpleConnect";
UUID MY_UUID;

BluetoothDevice bd;
BluetoothAdapter ba;

Button connectButton;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //MY_UUID = new UUID(0x0100 , 0x1000);
    // MY_UUID = UUID.fromString("8e1f0cf7-508f-4875-b62c-fbb67fd34812");

    connectButton = (Button)findViewById(R.id.button1);
    connectButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            BluetoothSocket tmp = null; 

                BluetoothDevice device = BluetoothAdapter.getDefaultAdapter().getRemoteDevice("00:1B:DC:0F:EC:7E");
                Method m = null;

                try {
                    m = device.getClass().getMethod("createInsecureRfcommSocket", new Class[] {int.class});
                } catch (NoSuchMethodException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                try {
                    tmp = (BluetoothSocket) m.invoke(device, 1);
                } catch (IllegalArgumentException e) {

                    Toast.makeText(getApplicationContext(), "Exception: " + e.getMessage(), Toast.LENGTH_LONG).show();

                } catch (IllegalAccessException e) {

                    Toast.makeText(getApplicationContext(), "Exception: " + e.getMessage(), Toast.LENGTH_LONG).show();

                    e.printStackTrace();

                } catch (InvocationTargetException e) {

                    Toast.makeText(getApplicationContext(), "Exception: " + e.getMessage(), Toast.LENGTH_LONG).show();

                    e.printStackTrace();
                }

                try {
                    tmp.connect();
                } catch (IOException e) {

                    Toast.makeText(getApplicationContext(), "Exception: " + e.getMessage(), Toast.LENGTH_LONG).show();

                    try {
                        tmp.close();
                    } catch (IOException e1) {

                        Toast.makeText(getApplicationContext(), "Socket closed!" + e.getMessage(), Toast.LENGTH_LONG).show();
                    } 

                }
                boolean con = tmp.isConnected();

                if(con)
                    Toast.makeText(getApplicationContext(), "Connection was made!", Toast.LENGTH_LONG).show();
                else
                    Toast.makeText(getApplicationContext(), "Connection was not made!", Toast.LENGTH_LONG).show();

            }
    });  
} 
```

}

我已经阅读了几个地方，它应该通过取消配对并再次配对来工作，但这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:09:04.830

好吧，你的问题已经有一个多月了，但如果你还在寻找答案，这里有一个：

sdptool 表示您的 RFCOMM 频道是 9，但在您的代码中，您有：

`tmp = (BluetoothSocket) m.invoke(device, 1);`

尝试 9 而不是 1 作为您的最后一个参数（如果这不起作用，请尝试其他整数，例如 2 到 15）。

您可能还想查看[这个答案](https://stackoverflow.com/questions/4395386/android-bluetooth-bluetoothsocket-cannot-connect)。

Stack上似乎有这个问题的很多变体，但对“标准”推荐代码的理解并不多（即，用定义和调用“方法m”的行修改了蓝牙聊天示例）——我知道是因为我是那些为此苦苦挣扎的人之一。我试图将我的手机连接到我的 MacBook，并收到“连接被拒绝”的消息，直到我意识到我需要在上面的代码行中使用 5。

# apache-poi - 使用 Apache POI 3.8 (HWPF) 格式化文本

> ID：11360969
> 
> 赞同：2
> 
> 时间：2012-07-06T11:02:30.697
> 
> 标签：apache-poi, hwpf

我正在尝试使用 Apache POI 3.8 在文档中插入以下文本：

> **[粗体]** [正常]，

但输出文件有这个：

> [粗体][正常]

编码：

```
import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.usermodel.*;
import java.io.*;

public class Main {
    public static void main(String[] args) throws IOException {
        final HWPFDocument doc = new HWPFDocument(new FileInputStream("empty.dot"));

        final Range range = doc.getRange();
        final CharacterRun cr1 = range.insertAfter("[Bold]");
        cr1.setBold(true);

        final CharacterRun cr2 = cr1.insertAfter("[Normal]");
        cr2.setBold(false);

        doc.write(new FileOutputStream("output.doc"));
    }
} 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-08-02T07:34:16.743

我这样做。使用 POI 3.11

```
paragraph = doc.createParagraph();
paragraph.setStyle(DOG_HEAD_STYLE);
XWPFRun tmpRun = paragraph.createRun();
tmpRun.setText("non bold text ");

tmpRun = paragraph.createRun();
tmpRun.setBold(true);
tmpRun.setText("bold text");
tmpRun = paragraph.createRun();
tmpRun.setBold(false);
tmpRun.setText(" non bold text again"); 
```

# google-app-engine - 在 db.* 中使用游标进行“向后”分页，在 ndb.* 的 Guido 示例之后使用未记录的技巧

> ID：11360973
> 
> 赞同：2
> 
> 时间：2012-07-06T11:03:01.793
> 
> 标签：google-app-engine, google-cloud-datastore

来自后向光标的代码是否兼容？

这是一个高级问题，因为它与 *.db 和 Google App Engine 的未记录功能有关 - 也许它针对 cursor() 的一些文档！ [https://developers.google.com/appengine/docs/python/datastore/queryclass?hl=pl#Query_fetch](https://developers.google.com/appengine/docs/python/datastore/queryclass?hl=pl#Query_fetch)

无论以下文档*...将来调用**同一**查询...*不会提供向后游标功能。我被倒转的查询方向向后退。

我正在研究 ndb.* 的 Guido 示例，发现可以在 db.* 中实现反向游标，并使用 ndb.* 中用于 cursor.reserve() (+/-) 的一些技巧！ [带有光标的向后分页正在工作但缺少一个项目](https://stackoverflow.com/questions/10240454/backward-pagination-with-cursor-is-working-but-missing-an-item)

所以查询是DeleteMe.all().order('rank')，倒过来是DeleteMe.all().order('-rank')。我假设在排序之前我们可以应用一些过滤器，它仍然会使用相同的索引扫描。

现在是在 db.* 中执行真正向后光标的代码，**我想确认它是否兼容**- 如果可能的话。

```
messages = []

class DeleteMe(db.Model):
  rank = db.IntegerProperty()

db.delete(DeleteMe.all(keys_only=True))

for rank in range(50):
  e = DeleteMe(rank = rank)
  e.put()

messages.append('forward +5')     
q = DeleteMe.all().order('rank')
r = q.fetch(5)
for e in r:
  messages.append(e.rank)
endCursor = q.cursor()
messages.append('end to %s' % endCursor)

messages.append('forward +5')
startCursor = endCursor
messages.append('start from %s' % startCursor)     
q = DeleteMe.all().order('rank').with_cursor(startCursor)
r = q.fetch(1)
# 1st trick
backwardCursor = q.cursor()
messages.append('backward cursor %s' % backwardCursor)
q.with_cursor(backwardCursor)
r.extend(q.fetch(5-1))
for e in r:
  messages.append(e.rank)
endCursor = q.cursor()
messages.append('end to %s' % endCursor)

messages.append('backward +5')
startCursor = backwardCursor 
messages.append('modified start from %s' % startCursor)     
# 2st trick
q = DeleteMe.all().order('-rank').with_cursor(startCursor)
r = q.fetch(5)
for e in r:
  messages.append(e.rank)
endCursor = q.cursor()
messages.append('end to %s' % endCursor) 
```

以及向后工作光标的结果：

```
forward +5
0
1
2
3
4
end to E-ABAOsB8gEEcmFua_oBAggE7AGCAhxqCGVyZXN0MjRochALEghEZWxldGVNZRjNnQYMFA==
forward +5
start from E-ABAOsB8gEEcmFua_oBAggE7AGCAhxqCGVyZXN0MjRochALEghEZWxldGVNZRjNnQYMFA==
backward cursor E-ABAOsB8gEEcmFua_oBAggF7AGCAhxqCGVyZXN0MjRochALEghEZWxldGVNZRjOnQYMFA==
5
6
7
8
9
end to E-ABAOsB8gEEcmFua_oBAggJ7AGCAhxqCGVyZXN0MjRochALEghEZWxldGVNZRjSnQYMFA==
backward +5
modified start from E-ABAOsB8gEEcmFua_oBAggF7AGCAhxqCGVyZXN0MjRochALEghEZWxldGVNZRjOnQYMFA==
4
3
2
1
0
end to E-ABAOsB8gEEcmFua_oBAggA7AGCAhxqCGVyZXN0MjRochALEghEZWxldGVNZRjJnQYMFA== 
```

有点长，但应该是。如果这样使用 db.* 是安全的，请给出一些提示，因为它允许非常快速的分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:52:16.833

我不认为这是你应该这样做的。使用反向游标时，您还应该使用反向查询——在您的情况下，这意味着 order('-rank')。

# jquery - IE7 大纲：0 不工作

> ID：11360979
> 
> 赞同：3
> 
> 时间：2012-07-06T11:03:11.987
> 
> 标签：jquery, html, css, internet-explorer, internet-explorer-7

我了解大纲用于可访问性，但另一种方法是：

```
a {
   outline: 0;
} 
```

在 IE7 中有效的东西

也许使用 Jquery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T12:51:08.650

对于 jquery，你可以尝试这样的事情

```
$('a').focus(function() {
  $(this).blur();
}); 
```

它本质上与仅 IE 7 的解决方案相同，它说当锚点聚焦时，将其模糊。我在 Mac VM IE 7 上试过这个，它可以工作

[http://jsfiddle.net/QnMLR/2/](http://jsfiddle.net/QnMLR/2/)

顶部有轮廓，底部没有

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:04:08.657

现在习惯了`focus`

```
a:hover, a:active, a:focus{
outline:0;
} 
```

更多信息[http://css-tricks.com/removing-the-dotted-outline/](http://css-tricks.com/removing-the-dotted-outline/)

* * *

更新即解决方案是

```
a:focus, *:focus {
    noFocusLine: expression(this.onFocus=this.blur());
} 
```

更多信息[http://www.cssjunction.com/css/remove-dotted-border-in-ie7/](http://www.cssjunction.com/css/remove-dotted-border-in-ie7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:45:30.823

这也适用于 jquery，并且不会弄乱标签顺序：

```
$(function ()
{
    $("a").each(function() {
        $(this).attr("hideFocus", "true").css("outline", "none");
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-08T07:16:00.913

我认为 _noFocusLine 在 IE7 中确实有效

```
a{
    outline: none;
    _noFocusLine: expression(this.hideFocus=true);
} 
```

我从[这里](http://rodleviton.com/blog/remove-dotted-border-on-ie7-links)找到了这个，我自己试过了。希望这会帮助你。

# c# - 如何使用 c# ASP.net 返回 sql 查询结果消息

> ID：11360982
> 
> 赞同：2
> 
> 时间：2012-07-06T11:03:19.370
> 
> 标签：c#, sql-server

我尝试了以下代码，但我无法从中找到成功消息。这里`commandText`可以是插入、更新、删除或选择查询，如果它是一个选择查询，我需要数据集，否则像 sql 结果中的成功消息`output("12 row(s) inserted successfully")`。我不能使用`ExecuteScalar`或`ExecuteNonQuery`方法，因为在执行选择查询时我需要数据集输出。

```
public static  DataSet ExecuteDataset(string connectionString, CommandType commandType, string commandText, params SqlParameter[] commandParameters)
    {
        using (SqlConnection cn = new SqlConnection(connectionString))
        {
            cn.InfoMessage += delegate(object sender, SqlInfoMessageEventArgs e)
            {
                MessageInfo += "\n" + e.Message;
            };
            cn.FireInfoMessageEventOnUserErrors = true;

            cn.Open();
            using (SqlCommand command = new SqlCommand(commandText, cn))
            {

                using (SqlDataAdapter adapter = new SqlDataAdapter(command))
                {
                    DataSet dt = new DataSet();
                    adapter.Fill(dt); // Do something with DataTable
                    return dt;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-31T18:07:22.750

我正在使用 System.Data 版本 4.0.0.0，以下适用于我的 UPDATE、INSERT、DELETE 和 SELECT 语句。

```
using (SqlDataAdapter adapter = new SqlDataAdapter(command))
{
    var rowsAffected = -1;

    adapter.SelectCommand.StatementCompleted += delegate (object sender, StatementCompletedEventArgs e)
    {
        rowsAffected = e.RecordCount;
    };

    DataSet dt = new DataSet();
    adapter.Fill(dt); // Do something with DataTable
    return dt;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:02:53.923

我设法通过以下方式解决了它，但希望应该有更好的方法。

```
 string type = Query.Trim().Split(' ')[0].ToLower();
    if ( type == "select")
    {
        DataSet result = SqlHelper.ExecuteDataset(CommandType.Text, Query);                

    }
    else
    {                
        if(type == "insert") type="inserted."; else type=type+"d.";
        int a=(int)SqlHelper.ExecuteNonQuery(CommandType.Text, Query);
        if (a > 0)
        {
            lblInfo.Text = "Query executed successfully. " + a.ToString() + " row(s) " + type;                

        }
    } 
```

我又找到了一个，比上面那个好。

```
query = resultQuery + "  SELECT '('+CONVERT(VARCHAR(10),@@ROWCOUNT)+' row(s) affected)' AS RESULT";
DataSet result = DataSet result = SqlHelper.ExecuteDataset(CommandType.Text, query);

        if (result.DefaultViewManager.DataViewSettingCollectionString.Contains("Table") == true)
        {
            sqlGrid.Visible = true;
            sqlGrid.DataSource = result;
            sqlGrid.DataBind();
        }
        if (sqlGrid.Rows.Count==1 && sqlGrid.Rows[0].Cells.Count==1)
        {
            string text = (sqlGrid.Rows[0].Cells[0]).Text;
            if (text.Contains("row(s) affected"))
            {
                lblInfo.Text=text;
                lblInfo.Visible=true;
                sqlGrid.DataSource = null;
                sqlGrid.DataBind();
            }
        } 
```

# c++ - 在 C++ 中初始化静态成员

> ID：11360984
> 
> 赞同：0
> 
> 时间：2012-07-06T11:03:21.710
> 
> 标签：c++

据我了解，您在 .cpp 文件中而不是在 .h 中初始化静态成员的原因是，获取该成员的多个实例是没有风险的。然后以这个例子为例：

```
 //Foo.h
   #ifndef FOO_H
   #define FOO_H

   class Foo{
      static int a;

   }; 
   int Foo::a = 95; 
   #endif 
```

预处理器指令确保这个 .h 文件只编译一次，从而确保静态成员只有一个实例。是否可以这样做而不是在 .cpp 文件中启动静态成员？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T11:05:44.147

不，它只保证`Foo.h`每个编译单元（`.cpp`文件）包含一次。不在整个项目中。您应该在其中定义静态成员`Foo.cpp`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T11:07:10.950

考虑有两个源代码文件`a.cpp`和`b.cpp`，它们都包含标头。由于它们是相互独立编译的，因此标头保护不起作用，您最终将得到两个目标文件`a.o`，`b.o`并且*都*定义了`Foo:a`. 试图将它们联系在一起会失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T11:05:45.440

如果标头包含在多个`.cpp`文件（翻译单元）中，这将导致链接器错误：

```
//a.cpp
#include <Foo.h>

//b.cpp
#include <Foo.h> 
```

编译后，`a.obj`包含 的定义`Foo::a`和`b.obj`包含 的定义`Foo::b`。如果尝试将这两个`.obj`文件链接到单个二进制文件中，则会发生多重定义错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T11:06:42.587

*不，包含保护确保每个编译单元*最多包含一次标头。如果你的程序有多个编译单元（`.cpp`文件），包括头文件，那么你最终会得到多个`Foo::a`.

# java - 取消选中/取消选择 singleChoice ListView

> ID：11360991
> 
> 赞同：0
> 
> 时间：2012-07-06T11:03:46.950
> 
> 标签：java, android, user-interface, android-listview, user-interaction

### 组合 - 具有写入未列出值的选项的列表

```
<ListView
        android:id="@+id/category_choices"
        android:choiceMode="singleChoice"
        android:layout_width="400dp"
        android:layout_height="wrap_content">
</ListView>

<EditText
        android:id="@+id/other_please_specify"
        android:singleLine="true"    
        android:layout_height="wrap_content" android:layout_width="326dp"/> 
```

### 数据绑定工程

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getContext(),
        android.R.layout.simple_list_item_single_choice, categories);
listView.setAdapter(adapter);

listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
       public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) {
           selectedItem = (String) (listView.getItemAtPosition(myItemInt));
        }
}); 
```

### 在 EditText 中输入任何文本时如何清除单选按钮选择？

*我尝试了以下方法，但它不起作用*

```
editText.setOnKeyListener(new OnKeyListener() {
    @Override
    public boolean onKey(View view, int i, KeyEvent keyEvent) {
        if (selectedItem != null) {
            int checkedItem = listView.getCheckedItemPosition();
            listView.setItemChecked(checkedItem, false);
            selectedItem = null;
        }
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:10:02.077

您必须使用[Text Watcher](http://developer.android.com/reference/android/text/TextWatcher.html) for Edit Text 来监听输入的文本：

```
editText.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
                         // do your stuffs here
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
            Log.e("TextWatcherTest", "afterTextChanged:\t" + s.toString());
        }
    }); 
```

# actionscript-3 - 游戏设计编码错误

> ID：11360993
> 
> 赞同：0
> 
> 时间：2012-07-06T11:04:01.813
> 
> 标签：actionscript-3, flashdevelop

/*问题*/

我已经在这里待了大约一个星期，但仍然找不到问题。我使用了跟踪语句，但我不知道是这个还是那个。因为我自己还很缺乏经验。我正在使用 Flash 开发。谢谢。

/* 这是我得到的错误，我正在尝试删除 dango 一旦它被破坏并在游戏结束后再次删除它 */

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at mcDango/destoryDango()[J:\catchMeDango\mcDango.as:72]
    at catchMeDango/checkEndGameCondition()[J:\catchMeDango.as:195]
    at catchMeDango/gameLoop()[J:\catchMeDango\catchMeDango.as:171]

--------------------------------------------------------------------------------------- 
```

/*这是catchMeDango文档*/

```
package  
{
    import flash.display.Loader;
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.KeyboardEvent;
    import flash.events.TimerEvent;
    import flash.net.URLRequest;
    import flash.text.TextField;
    import flash.utils.Timer;

    /**
     * ...
     * @author 
     */
    public class catchMeDango extends MovieClip 
    {
        public var skewerPlayer:MovieClip;

        private var leftKeyIsDown:Boolean;
        private var rightKeyIsDown:Boolean;
        private var upKeyIsDown:Boolean;
        private var downKeyIsDown:Boolean;

        private var aDangoArray:Array;
        private var aBlackDangoArray:Array;

        public var scoreTxt:TextField;
        public var lifeTxt:TextField;
        public var menuEnd:mcEndGameScreen;

        private var nScore:Number;
        private var nLife:Number;
        private var tDangoTimer:Timer;
        private var tBlackDangoTimer:Timer;
        private var menuStart:mcStartGameScreen;
        private var startHow:Loader;

        public function catchMeDango() 
        {   
            //hides the endGameScreen
            menuEnd.hideScreen();

            //Create loader object
            var startLoader:Loader = new Loader();
            //Add event listener to listen the complete event
            startLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, startLoaded);
            //Load our loader object
            startLoader.load(new URLRequest("startGameScreen.swf"));
        }

        private function startHowToPlay(e:Event):void 
        {
            //Create loader object
            startHow = new Loader();
            //Add event listener to listen the complete event
            startHow.contentLoaderInfo.addEventListener(Event.COMPLETE, HowToPlay);
            //Load our loader object
            startHow.load(new URLRequest("howToPlay.swf"));
        }

        private function HowToPlay(e:Event):void 
        {
            //add the how to play movie clip to stage
            addChild(startHow);
            startHow.addEventListener("BEGIN_GAME", playGameAgain);
        }

        private function startLoaded(e:Event):void 
        {
            //Get a reference to the loaded movieclip
            menuStart = e.target.content as mcStartGameScreen;
            //Listen for start game event
            menuStart.addEventListener("START_GAME", playGameAgain);
            menuStart.addEventListener("HOW_TO_PLAY", startHowToPlay);
            //Add to stage
            addChild(menuStart);
        }

        private function playGameAgain(e:Event):void 
        {   
            //I had to remove this function becuase is was causing errors
            //When I click on the "how to play" then go back to the start screen, it hides fine with no issues
            //startHow.visible = false;
            menuStart.visible = false;

            //set keyboard control to false
            leftKeyIsDown = false; 
            rightKeyIsDown = false;
            upKeyIsDown = false;
            downKeyIsDown = false;

            //Initialize variables
            aDangoArray = new Array();
            aBlackDangoArray = new Array();
            nScore = 0;
            nLife = 1;

            skewerPlayer.visible = true;

            menuStart.hideScreen();

            menuEnd.addEventListener("PLAY_AGAIN", playGameAgain);
            menuEnd.hideScreen();

            updateScoreText();
            updateLifeText();

            //trace ('Catch Me Dango Loaded');
            //Set up listerners for when an key is pressed
            stage.addEventListener(KeyboardEvent.KEY_DOWN, keyDown);
            stage.addEventListener(KeyboardEvent.KEY_UP, keyUp);

            //Set up a game loop listener
            stage.addEventListener(Event.ENTER_FRAME, gameLoop)

            //Create a timer object for Dango for every 1 second
            tDangoTimer = new Timer(1000)
            //Listen for timer ticks/intervals
            tDangoTimer.addEventListener(TimerEvent.TIMER, addDango)
            //Start timer object
            tDangoTimer.start();

            //Create a timer object for Black Dango for every 10 seconds
            tBlackDangoTimer = new Timer(10000)
            //Listen for timer ticks/intervals
            tBlackDangoTimer.addEventListener(TimerEvent.TIMER, addBlackDango)
            //start timer object
            tBlackDangoTimer.start();
        }

        //Display Score Text (Starting form: 0)
        private function updateScoreText():void
        {
            scoreTxt.text = "Score: " + nScore;
        }

        //Display Life Text (Starting from: 5)
        private function updateLifeText():void
        {
            lifeTxt.text = "Life: " + nLife;
        }

        private function addBlackDango(e:TimerEvent):void 
        {
            //create new black dango object
            var newBlackDango:mcBlackDango = new mcBlackDango();
            //Add our new black dango 
            stage.addChild(newBlackDango);
            aBlackDangoArray.push(newBlackDango);
            trace(aBlackDangoArray.length);
        }

        private function addDango(e:TimerEvent):void 
        {
            //create new dango(enemy) object
            var newDango:mcDango = new mcDango();
            //Create enemy to the stage
            stage.addChild(newDango);
            //Add our new dango(enemy) to dango(enemy) array collection
            aDangoArray.push(newDango);
            trace(aDangoArray.length);
        }

        private function gameLoop(e:Event):void 
        {
            playerContorl();
            clampPlayerToStage();
            checkDangosOffScreen();
            checkSkewerHitsDango();
            checkBlackDangosOffScreen();
            checkSkwerHitsBlackDango();
            checkEndGameCondition();
        }

        //HELP
        private function checkEndGameCondition():void 
        {
            //Check if the player has 0 life left
            if (nLife == 0) 
            {
                //Stop player movement
                stage.removeEventListener(KeyboardEvent.KEY_UP, keyUp);
                stage.removeEventListener(KeyboardEvent.KEY_DOWN, keyDown);

                //Hide the player
                skewerPlayer.visible = false;

                //Stop spawning dango and black dango
                tDangoTimer.stop();
                tBlackDangoTimer.stop();

                //Clear the dango currently on screen
                for each(var dango:mcDango in aDangoArray)
                {   
                    //this destory function had to be removed as well. because it was destorying the dango twice when it was already removed from the stage.
                    //by commenting out this, it was able to destory and remove without any errors and only doing it once.
                    //Destory the dango the were curretly up to in the for loop
                    dango.destoryDango();
                    trace("black dango removed")
                    //Remove from dango from dango array
                    aDangoArray.splice(0, 1); 
                }

                //Clear the black dango currently on screen
                for each(var blackDango:mcBlackDango in aBlackDangoArray)
                {
                    //Destory the dango tat were curretly up to in the for loop
                    blackDango.destoryBlackDango();
                    //Remove from dango from dango array
                    aBlackDangoArray.splice(0, 1); 
                }

                //Stop the game loop
                if (aDangoArray.length == 0 && aBlackDangoArray.length == 0)
                {
                stage.removeEventListener(Event.ENTER_FRAME, gameLoop);
                }

                //Show end game screen
                menuEnd.showScreen();
            }
        }

        // Checks if the Skewer Hits or makes conatct with the Black Dango
        private function checkSkwerHitsBlackDango():void 
        {
            //Loop through our current Black dango
            for (var i:int = 0; i < aBlackDangoArray.length; i++)
            {
                //Get our current Black Dango in the loop
                var currentBlackDango:mcBlackDango = aBlackDangoArray[i];

                //Test if our skewer is hitting the black dango
                if (skewerPlayer.hitTestObject(currentBlackDango))
                {
                    //remove the current dango from stage
                    currentBlackDango.destoryBlackDango()
                    //Remove the dango from out dango array
                    aBlackDangoArray.splice(i, 1);

                    //Minus one to our score
                    nScore--;
                    updateScoreText();

                    //Minus one to our life
                    nLife--;
                    updateLifeText();
                }   
            }
        }

        // Remove the black dango of the stage and from the array
        private function checkBlackDangosOffScreen():void 
        {
            //loop through all our black dango
            for (var i:int = 0; i < aBlackDangoArray.length; i++)
            {
                //Get our current dango in the loop
                var currentBlackDango:mcBlackDango = aBlackDangoArray[i];
                //When dango starts on the top AND our curent enemy has gone past the bottom side if the stage
                if (currentBlackDango.y > (stage.stageHeight + currentBlackDango.y / 2))
                {
                    //Remove black dango (enemy) from array
                    aBlackDangoArray.splice(i, 1);
                    //Remove black dango (enemy) from stage
                    currentBlackDango.destoryBlackDango();
                }
            }
        }

        // Checks if the Skewer Hits or makes conatct with the Dango
        private function checkSkewerHitsDango():void 
        {
            //Loop through all our current dango
            for (var i:int = 0; i < aDangoArray.length; i++)
            {
                //Get our current dango in the loop
                var currentDango:mcDango = aDangoArray[i];

                //Test if our skewer is hitting dango
                if (skewerPlayer.hitTestObject(currentDango))
                {
                    //remove the current dango from stage
                    currentDango.destoryDango()
                    //Remove the dango from out dango array
                    aDangoArray.splice(i, 1);

                    //Add one to our score
                    nScore++;
                    updateScoreText();
                }

            }

        }

        // Remove the dango of the stage and from the array
        private function checkDangosOffScreen():void 
        {
            //loop through all our dangos(enemies)
            for (var i:int = 0; i < aDangoArray.length; i++)
            {
                //Get our current dango in the loop
                var currentDango:mcDango = aDangoArray[i];

                //When dango starts on the top AND our curent enemy has gone past the bottom side if the stage
                if (currentDango.y > (stage.stageHeight + currentDango.y / 2))
                {
                    //Remove dango (enemy) from array
                    aDangoArray.splice(i, 1);
                    //Remove dango (enemy) from stage
                    currentDango.destoryDango();
                } 
            }   

        }

        private function clampPlayerToStage():void 
        {
            //If our player is to the left of the stage
            if (skewerPlayer.x < skewerPlayer.width/2)
            {

                //Set our player to left of the stage
                skewerPlayer.x = skewerPlayer.width/2;
            } else if (skewerPlayer.x > (stage.stageWidth - (skewerPlayer.width / 2)))

            //If our player is to the right of the stage
            {

                //Set our player to right of the stage
                skewerPlayer.x = stage.stageWidth - (skewerPlayer.width / 2);
            }

            //If our player is to the top(up) of the stage
            if (skewerPlayer.y  < 0)
            {

                //Set our player to the top(up) of the stage
                skewerPlayer.y = 0;
            } else if (skewerPlayer.y > (stage.stageHeight - (skewerPlayer.height / 1)))

            //If our player is to the bottom(down) of the stage
            {

                //Set our player to the bottom(down) of the stage
                skewerPlayer.y = stage.stageHeight - (skewerPlayer.height / 1);
            }
        }

        // right, left, top and bottom Key Functions
        private function playerContorl():void 
        {
            //if our left key is currently down
            if (leftKeyIsDown == true)
            {

                //move our player to the left
                skewerPlayer.x -= 5;
            }
            //if our right key is currently down
            if (rightKeyIsDown) 
            {

                //move our player to the right
                skewerPlayer.x += 5;
            }
            //if our up key is currently down
            if (upKeyIsDown) 
            {

                //move our player to the top
                skewerPlayer.y -= 5;
            }
            //if our down key is currently down
            if (downKeyIsDown) 
            {

                //move our player to the bottom
                skewerPlayer.y += 5;
            }

        }

        private function keyUp(e:KeyboardEvent):void 
        {   
            //if our left key is released
            if (e.keyCode == 37)
            {
                //left key is released  
                leftKeyIsDown = false;
            }
            //if our right key is released
            if (e.keyCode == 39)
            {
                //right key is released
                rightKeyIsDown = false;
            }
            //if our up key is released
            if (e.keyCode == 38)
            {
                //up key is released    
                upKeyIsDown = false;
            }
            //if our down key is released
            if (e.keyCode == 40)
            {
                //down key is released
                downKeyIsDown = false;
            }
        }

        private function keyDown(e:KeyboardEvent):void
        {
            //if our left key is pressed
            if (e.keyCode == 37)
            {
                //left key is pressed   
                leftKeyIsDown = true;
            }
            //if our right key is pressed
            if (e.keyCode == 39)
            {
                //right key is pressed
                rightKeyIsDown = true;
            }   
            //if our up key is pressed
            if (e.keyCode == 38)
            {
                //up key is pressed 
                upKeyIsDown = true;
            }
            //if our down key is pressed
            if (e.keyCode == 40)
            {
                //right key is pressed
                downKeyIsDown = true;
            }   
        }

    }

}

--------------------------------------------------------------------------------- 
```

/*这是给 mcDango 文档的 */

```
package  
{
    import flash.display.MovieClip;
    import flash.events.Event;

    /**
     * ...
     * @author 
     */
    public class mcDango extends MovieClip 
    {
        private var nSpeed:Number;
        private var nRandom:Number;

        public function mcDango() 
        {
            // listen for when the Dango is added to the stage
            addEventListener(Event.ADDED_TO_STAGE, onAdd);
        }

        private function onAdd(e:Event):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, onAdd);
            init();
        }

        private function init():void 
        {   //Number of frames you have in Flash
            var nDango:Number = 12;
            //Pick random number between 1 and our number of enemies(dango)
            var nRandom:Number = randomNumber(1, nDango)
            //Setup our player of this enemey(dango) clip to pur random dango
            this.gotoAndStop(nRandom);
            //Setup our enemies(dango) start position
            setupStartPosition();
        }

        private function setupStartPosition():void 
        {
            //Pick a random speed for enemy(dango)
            nSpeed = randomNumber(5, 10);

            //Set your ramdon X postion
            nRandom = randomNumber(9, 775);

            //Start our enemy(dango) on the top side
            this.y = -50;

            //set random pos X
            this.x = nRandom

            //move our enmey(dango)
            startMoving();
        }

        private function startMoving():void 
        {
            addEventListener(Event.ENTER_FRAME, dangoLoop)
        }

        private function dangoLoop(e:Event):void 
        {
            //Test what direction our enemy(dango) is moving in
            //If our enemy(dango) is moving right

            //Move our enemy(dango) down
            this.y += nSpeed
        }

        public function destoryDango():void
        {
            //Remove dango from stage
            parent.removeChild(this);
            trace("the dango has been removed")
            //Remove any event listeners in our enemy object
            removeEventListener(Event.ENTER_FRAME, dangoLoop);
        }

        function randomNumber(low:Number=0, high:Number=1):Number
        {
            return Math.floor(Math.random() * (1+high-low)) + low;  
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:43:49.300

看一眼代码，看起来问题出在 for-each-in 循环之后

```
for each(var dango:mcDango in aDangoArray) {   
//this destory function had to be removed as well. because it was destorying the dango twice when it was already removed from the stage.
//by commenting out this, it was able to destory and remove without any errors and only doing it once.
//Destory the dango the were curretly up to in the for loop
dango.destoryDango();
trace("black dango removed")
//Remove from dango from dango array
aDangoArray.splice(0, 1);
} 
```

检查使用

```
while(aDangoArray.length > 0) {
var dango = aDangoArray[0]
dango.destoryDango();
trace("black dango removed")
aDangoArray.splice(0, 1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T03:32:25.377

好吧，看起来问题出在您尝试访问 parent.removeChild 方法时。也许你已经把它从舞台上移除了，它不再有父级了。尝试这样做：

```
 public function destoryDango():void
    {
        //Remove dango from stage
        if(parent != null)
            parent.removeChild(this);
        trace("the dango has been removed")
        //Remove any event listeners in our enemy object
        removeEventListener(Event.ENTER_FRAME, dangoLoop);
    } 
```