# StackOverflow 问答 11744000-11744999

# javascript - Highcharts, make the yAxis start at zero

> ID：11744003
> 
> 赞同：21
> 
> 时间：2012-07-31T15:46:42.990
> 
> 标签：javascript, highcharts

I suppose this should be a no brainer for some, but I couldn't find it in those awful auto generated documentation

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-31T15:57:38.280

You should add in your yAxis property in chart object `min : 0` It's simillar question to: [How to set Highcharts chart maximum yAxis value](https://stackoverflow.com/questions/6847244/how-to-set-highcharts-chart-maximum-yaxis-value?rq=1)

# sql - 从数据库脚本中删除表空间引用

> ID：11744005
> 
> 赞同：1
> 
> 时间：2012-07-31T15:46:51.680
> 
> 标签：sql, database, oracle

我对 SQL 比较陌生，只在需要时才涉足它。我对此进行了一些研究，但收效甚微。我需要从代码中删除表空间引用。数据库中已存在默认表空间的设置。顺便说一下，它是一个 Oracle 数据库。

如果我有这些代码行：

```
EXECUTE IMMEDIATE 'CREATE TABLE RAND_CATEGORY(
-------- insert random vars ---------------
CONSTRAINT RAND_CATEGORY PRIMARY KEY(cat_id,ver_num)
USING INDEX TABLESPACE VG_NDX ENABLE
)TABLESPACE VG_DATA'; 
```

这是我到目前为止所拥有的：

```
EXECUTE IMMEDIATE 'CREATE TABLE RAND_CATEGORY(
-------- insert random vars ---------------
CONSTRAINT RAND_CATEGORY PRIMARY KEY(cat_id,ver_num)
USING INDEX TABLESPACE VG_NDX ENABLE
)'; 
```

我的问题是，我应该删除整行：

```
USING INDEX TABLESPACE VG_NDX ENABLE 
```

或者我应该删除“TABLESPACE VG_NDX”并将其保留为：

```
USING INDEX ENABLE 
```

请记住，我是新手，我只需要帮助。过去两周我一直在学习 SQL，表空间对我来说有点奇怪。提前致谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T14:04:04.057

阅读这份文件：

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7003.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7003.htm)

它很好地概述了表空间是什么以及应该解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:15:11.010

该`USING INDEX`子句允许对约束相关的索引创建进行更多控制，请参见[http://docs.oracle.com/cd/B28359_01/server.111/b28310/indexes003.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28310/indexes003.htm)。在您的情况下，`TABLESPACE`存储条款。

如果您想让 Oracle 使用默认表空间，您可以`USING INDEX`完全删除该子句 leave `ENABLE`。

尽管在`CREATE TABLE`主键约束中关联索引是自动启用的（除非我错过了什么），所以我看不到保留`ENABLE`.

# jquery - Convert unordered list into following styled dropdown list in jquery I wonder how to convert the following unordered list:

*   [Category A](/)
*   [> ID：11744008
    > 
    > 赞同：0
    > 
    > 时间：2012-07-31T15:47:00.437
    > 
    > 标签：jquery, drop-down-menu

    * * *

    ## 回答 #1

    > 赞同：1
    > 
    > 时间：2012-07-31T19:53:48.060

    首先，遍历列表项并使用 jQuery 构建一个选择下拉列表 - 检查`active`每个列表项上调用的类。如果列表项具有`active`类，则将`selected`选项元素的属性设置为`selected`。接下来，将下拉列表附加到您想要的任何位置。](</h1) 

    [](</h1)[工作 JSFiddle 演示](http://jsfiddle.net/bmgonzal/SkGDq/7/)

    * * *

    ## 回答 #2

    > 赞同：0
    > 
    > 时间：2012-07-31T19:47:03.993

    ```
    var items=$("ul.menu li"),slc=$("<select />");
    items.each(function(i,e){
      var no=$("<option />"),a=$(">a",$(e));
      if($(e).hasClass("active")){no.attr("selected","selected");}
      no.text(a.text());
      no.attr("value",a.attr("href"))
    }); 
    ```

    这应该可以解决问题。让我知道它是否有问题。

# r - Finding the maximum gradient of a growth curve

> ID：11744012
> 
> 赞同：4
> 
> 时间：2012-07-31T15:47:13.447
> 
> 标签：r, ggplot2, derivative

I have made a graph with four growth curves using ggplot2.

Hopefully the code below should produce the graph if anyone wants to try.

I want to find a value for the maximum slopes on each of the lines, taken over say 4 time points.

Can anyone give any ideas how to go about this?

```
library(ggplot2)
dat <- structure(list(TIME = c(0L, 2L, 4L, 6L, 8L, 10L, 12L, 14L, 16L, 
                           18L, 20L, 22L, 24L, 26L, 28L, 30L, 0L, 2L, 4L, 6L, 8L, 10L, 12L, 
                           14L, 16L, 18L, 20L, 22L, 24L, 26L, 28L, 30L, 0L, 2L, 4L, 6L, 
                           8L, 10L, 12L, 14L, 16L, 18L, 20L, 22L, 24L, 26L, 28L, 30L, 0L, 
                           2L, 4L, 6L, 8L, 10L, 12L, 14L, 16L, 18L, 20L, 22L, 24L, 26L, 
                           28L, 30L), OD600 = c(0.2202, 0.2177, 0.2199, 0.2471, 0.2834, 
                                                0.357, 0.4734, 0.647, 0.898, 1.1959, 1.3765, 1.3978, 1.3948, 
                                                1.3928, 1.3961, 1.4018, 0.24, 0.2317, 0.2328, 0.2522, 0.2748, 
                                                0.3257, 0.4098, 0.5455, 0.7387, 0.9904, 1.2516, 1.3711, 1.3713, 
                                                1.3703, 1.3686, 1.3761, 0.2266, 0.2219, 0.2245, 0.2401, 0.2506, 
                                                0.2645, 0.3018, 0.3484, 0.4216, 0.5197, 0.666, 0.872, 1.1181, 
                                                1.2744, 1.3079, 1.2949, 0.2389, 0.2242, 0.2315, 0.2364, 0.2372, 
                                                0.2373, 0.2306, 0.2385, 0.236, 0.2331, 0.2379, 0.2334, 0.2336, 
                                                0.2339, 0.2389, 0.2349), MMS = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                                                                                 0, 0, 0, 0, 0, 0, 0.005, 0.005, 0.005, 0.005, 0.005, 0.005, 0.005, 
                                                                                 0.005, 0.005, 0.005, 0.005, 0.005, 0.005, 0.005, 0.005, 0.005, 
                                                                                 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 
                                                                                 0.01, 0.01, 0.01, 0.01, 0.01, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 
                                                                                 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02, 0.02)), .Names = c("TIME", 
                                                                                                                                                          "OD600", "MMS"), class = "data.frame", row.names = c(NA, -64L
                                                                                                                                                                                                               ))
graph = ggplot(data=dat, aes(x=TIME, y=OD600))
graph + geom_line(aes(colour=factor(MMS)), alpha=1) +
opts(title="Log growth curves: change in cell density with increasing concentrations of MMS")+
scale_y_log10() 
```

Many thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T17:15:37.917

If you do not need interpolation, @lockedoff 's solution is fine, but are you sure you want 14 for both initial concentrations?

To get better values, you should find the time of inclination, i.e. where the second derivative is zero. This can be tricky with real data, and you should plot the derivatives first to see if this is possible.

You will note that concentration 0.02 is hopeless, and if this were my experiment, I would go back to the lab to check if this really was 0.02 or rather 0.2\. If not, you have a VERY unusual substance, be careful, the reviewer will send it back without a good explanation.

Use predict.smooth.spline to compute the derivatives, and uniroot to find the point where the slope ==0\.

```
library(plyr)
smoothingDf = 8 # Adujst this. Larger values-> Smoother curves
# Check smoothing of second derivatives
deriv2 = ddply(dat,.(MMS),function(x){
  data.frame(predict(smooth.spline(x$TIME,x$OD600,df=smoothingDf),0:max(x$TIME),2))
})
ggplot(data=deriv2, aes(x=x, y=y))+ geom_line(aes(colour=factor(MMS)))
# No chance to get a good value for 0.02, remove it
dat1 = dat[dat$MMS != 0.02,]

ld50 = ddply(dat1,.(MMS),function(x){
  sp = smooth.spline(x$TIME, x$OD600, df=smoothingDf)
  # Try to find a good initial range
  app = predict(sp,min(x$TIME):max(x$TIME),2)
  lower = app$x[which.max(app$y)]
  upper = app$x[which.min(app$y)]
  uniroot(function(t)  predict(sp,t,2)$y ,lower=lower,upper=upper )$root
}) 
```

Result look ok, but without 0.02

```
 MMS       V1
1 0.000 16.23093
2 0.005 17.43714
3 0.010 22.29317 
```

![Second derivatives. Note that 0.02 is not useful](../Images/cb168cd933c016801e628aa23e7a4811.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T16:24:06.693

Something like this?

```
cbind(
  MMS = unique(dat$MMS),
  do.call(
    rbind,
    lapply(
      unique(dat$MMS),
      function(x) {
        tdat <- dat[dat$MMS == x, ]
        response <- tdat$OD600
        timepoints <- tdat$TIME
        rise <- (response[4:length(response)] - response[1:(length(response) - 3)])
        run <- (timepoints[4:length(timepoints)] - timepoints[1:(length(timepoints) - 3)])
        slopes <- c(rep(NA, 3), rise/run)
        return(
          list(
            max_slope = max(slopes, na.rm = T), 
            time = timepoints[which(slopes == max(slopes, na.rm = T)) - 3]
          )
        )
      }
    )
  )
) 
```

Gives:

```
 MMS   max_slope   time
[1,] 0     0.1215833   14  
[2,] 0.005 0.1176833   14  
[3,] 0.01  0.1014      20  
[4,] 0.02  0.002166667 2 
```

# facebook - 如何允许人们标记我的业务页面

> ID：11744016
> 
> 赞同：1
> 
> 时间：2012-07-31T15:47:20.073
> 
> 标签：facebook, tags

我有一个 Facebook 业务页面，有人告诉我，当人们尝试在图片中标记它时，它不会显示出来。我在页面的管理权限部分检查了“人们可以标记按企业*名称*发布的照片​​”，他们喜欢我的页面，但它仍然没有显示。

有人对我做错了什么有任何想法吗？

# apache-flex - esc from fullscreen using video in full screen 最小化 flex 中的整个应用程序

> ID：11744017
> 
> 赞同：0
> 
> 时间：2012-07-31T15:47:21.283
> 
> 标签：apache-flex, actionscript, fullscreen, video-player

我有一个打算以全屏模式运行的应用程序。为了防止它退出全屏，我做了：

```
protected function windowedapplication_preinitializeHandler(event:FlexEvent):void
{
     nativeWindow.stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
     nativeWindow.stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE;
}

protected function onKeyDown(event:KeyboardEvent):void
{
   if (event.keyCode == 27)
   {
      event.preventDefault();
    }
} 
```

这可以防止应用程序退出全屏，但我的应用程序有一个视频播放器，可以选择全屏播放视频，然后当我按下 esc 整个应用程序时，视频会变小。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:44:07.713

您可以侦听 FullScreenEvent 并将 stage.displayState 设置为在调度 FullScreenEvent.FULL_SCREEN 时返回全屏。

这样，即使用户在视频播放器中单击全屏按钮退出全屏模式，应用程序也会变回全屏。

```
private function onApplicationComplete(event:Event):void{

      stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE;
      stage.addEventListener(FullScreenEvent.FULL_SCREEN, onFullScreenChange);

}

private function onFullScreenChange(event:FullScreenEvent):void{

      stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:52:31.957

您无法阻止 ESC 键退出全屏模式。这是安全问题。

# php - 使用 javascript 更新数据库

> ID：11744019
> 
> 赞同：0
> 
> 时间：2012-07-31T15:47:23.597
> 
> 标签：php, javascript, pdo

由于布局我不能使用另一个`<form>`标签，所以我试图使用 javascript 来更新数据库。

由于代码只是更改了 URL，`window.location.href`而不是重新加载页面来运行`if`语句。

这是我的代码：

```
$check_view = $member->getUsersView($user_id);
if((isset($_GET['view-all'])) && $check_view != $_GET['view-all'])
{
    $view_all = $_GET['view-all'];
    $database->query('UPDATE users SET view_all = :viewall WHERE id = :userid', array(':viewall' => $view_all, ':userid' => $user_id));
}

<div onclick="javascript:window.location.href = \'page.php?action=list&'.(isset($_GET['view-all']) && $_GET['view-all']=="No" && $check_view=="No" ? 'view-all=Yes' : 'view-all=No').'\';">'.(isset($_GET['view-all']) && $_GET['view-all']=="No" && $check_view=="No" ? 'Show All' : 'Hide').'</div> 
```

任何人都可以帮我解决这个问题吗？

**编辑：**感谢马特的帮助，我能够让它工作：

```
if(isset($_GET['view-all']))
{
    $check_view = $member->getUsersView($user_id);

    if($check_view != $_GET['view-all'])
    {
        $view_all = $_GET['view-all'];

        $database->query('UPDATE users SET view_all = :viewall WHERE id = :userid', array(':viewall' => $view_all, ':userid' => $user_id));
    }
}

$users_view = $member->getUsersView($user_id);

$view_all = "No";
$hide_show = "Hide";
if((isset($_GET['view-all']) && ($_GET['view-all']=="No")) || ($users_view=="No"))
{
    $view_all = "Yes";
    $hide_show = "Show All";
}

$data = '<a href="page.php?action=list&view-all='.$view_all.'">'.$hide_show.'</a>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:10:11.483

```
<a href="page.php?action=list&view-all=<?=(isset($_GET['view-all']) && $_GET['view-all']=="No" && $check_view=="No" ? "Yes" : "No"?>">
<?=isset($_GET['view-all']) && $_GET['view-all']=="No" && $check_view=="No" ? 'Show All' : 'Hide'?>
</a> 
```

上面的代码可以工作，但是***UGLY AS SIN***。尝试清理它：

```
<?php
$view_all = "No";
$hide_show = "Hide";
if (isset($_GET['view-all']) && $_GET['view-all']=="No" && $check_view=="No") {
    $view_all = "Yes";
    $hide_show = "Show All";
}
?>

<a href="page.php?action=list&view-all=<?= $view_all ?>"><?= $hide_show ?></a> 
```

# sql - microsoft access 查询总计

> ID：11744020
> 
> 赞同：0
> 
> 时间：2012-07-31T15:47:24.993
> 
> 标签：sql, ms-access

我有一个微软访问查询，它工作正常并给出所需的结果，但我想在底部添加一个总计行

我的查询是

```
SELECT Product.Description
    , Count(Product.PID) AS CountOfPID
    , Sum(SalesOrderProduct.NbrItemsDispatched) AS SumOfNbrItemsDispatched
    , Sum(SalesOrderProduct.ExtendedPrice)
FROM Product 
LEFT JOIN 
(
    SalesOrder 
    RIGHT JOIN SalesOrderProduct 
        ON SalesOrder.SOID = SalesOrderProduct.SOID
) 
    ON Product.PID = SalesOrderProduct.PID
GROUP BY Product.Description, SalesOrder.Status
HAVING SalesOrder.Status <>  'Open' or  SalesOrder.Status is null; 
```

并且在没有数据的情况下，必须显示 0 并且不应该显示 $ 符号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:52:30.327

我强烈建议你不要这样做。最近有几个问题以问题结束。总计是一个显示问题，属于另一个查询或报表。

如果您仍然觉得需要这样做，您可以在查询中使用 UNION。

联合查询可能如下所示：

```
SELECT 0 As srt, AText, Count(ID)  FROM Table1
GROUP BY Srt, AText
UNION
SELECT 1 As Srt, "Total" As AText ,Count(ID) FROM Table1 
```

# excel - Bash 将列式文件合并为一个包含行的文件

> ID：11744023
> 
> 赞同：0
> 
> 时间：2012-07-31T15:47:26.900
> 
> 标签：excel, bash

我有很多这种格式的数据文件：

```
-1597.5421
-1909.6982
-1991.8743
-2033.5744 
```

但我想将它们全部合并到一个数据文件中，每个原始数据文件占据一行，中间有空格，这样我就可以将它导入到 excel 中。

```
-1597.5421 -1909.6982 -1991.8743 -2033.5744
-1789.3324 -1234.5678 -9876.5433 -9999.4321 
```

等等。每个文件都被命名`ALL.ene`，并且我的工作目录中的每个目录都包含它。有人可以给我一个快速修复吗？谢谢！

：编辑。每个文件有 11 个条目。这些只是例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:54:40.310

```
for i in */ALL.ene
do
echo $(<$i)
done > result.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:17:09.810

**假设：**

我假设您所有的数据文件都是这种格式：

```
<something1><newline>
<something2><newline>
<something3><newline> 
```

因此，例如，如果缺少最后一个换行符，则以下脚本将丢失对应的字段`<something3>`。

**用法：** `./merge.bash -o <output file> <input file list or glob>`

该脚本附加到以前运行的任何现有输出文件。它也没有对每个输入文件有多少数据字段做任何假设。它盲目地将每一行放入输出文件中的一行，以空格分隔。

```
#!/bin/bash

# set -o xtrace # uncomment to debug

declare output

[[ $1 =~ -o$ ]] && output="$2" && shift 2 || { \
    echo "The first argument should always be -o <output>";
    exit -1; } 

declare -a files=("${@}") row

for file in "${files[@]}";
do
    while read data; do
    row+=("$data")
    done < "$file"
    echo "${row[@]}" >> "$output"
    row=()
done 
```

**例子：**

```
$ cat data1
-1597.5421
-1909.6982
-1991.8743
-2033.5744
$ cat data2
-1789.3324
-1234.5678
-9876.5433
-9999.4321
$ ./merge.bash -o test data{1,2}
$ cat test
-1597.5421 -1909.6982 -1991.8743 -2033.5744
-1789.3324 -1234.5678 -9876.5433 -9999.4321 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T16:29:49.920

这是`coreutils` `paste`擅长的，试试：

```
paste -s data_files* 
```

# c++ - C++ 自动类型转换：容器类的错误行为

> ID：11744028
> 
> 赞同：9
> 
> 时间：2012-07-31T15:47:32.843
> 
> 标签：c++, templates, types, casting

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T15:51:13.073

Use `std::common_type`:

```
template <std::size_t s, typename L, typename R>
MyMathVector<typename std::common_type<L, R>::type, s> operator+(MyMathVector<L, s> const& l, MyMathVector<R, s> const& r)
{
    // do addition
} 
```

Ot in case of the member function (in the class body, where `T` and `s` are visible):

```
template <typename TRHS>
MyMathVector<typename std::common_type<T, TRHS>::type, s> operator+(MyMathVector<TRHS, s> const& rhs) const
{
    // do addition
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T15:52:29.250

Use the [`std::common_type`](http://en.cppreference.com/w/cpp/types/common_type) trait to figure out the correct result type for a mixed operation.

The linked page even has an example that's very similar to your case.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-31T15:53:03.540

Absolutely; use `decltype`:

```
template<typename Other>
auto operator+(const MyMathVector<Other, size> &other)
    -> MyMathVector<decltype(std::declval<T>() + std::declval<Other>()), size>; 
```

As a non-member operator, it might be better to say what you mean by actually referencing a vector member:

```
template<typename size, typename L, typename R>
auto operator+(const MyMathVector<L, size> &l, const MyMathVector<R, size> &r)
    -> MyMathVector<decltype(l[0] + r[0]), size>; 
```

# php - 无法使用 SSH2 连接

> ID：11744034
> 
> 赞同：1
> 
> 时间：2012-07-31T15:47:55.387
> 
> 标签：php, ssh

我在我的项目中使用[phpseclib](http://phpseclib.sourceforge.net/index.html)。我已经安装了它，并正在使用以下与[此处](http://phpseclib.sourceforge.net/ssh/examples.html)的示例类似的代码对其进行测试。

**更新代码：**

```
1           require("Net/SSH2.php");
2   
3           if (!class_exists('Net_SSH2')) die("Class Net_SSH2 doesn't exist!");
4           
5           $ssh = new Net_SSH2('***');   // the host IP address 
6           
7           if (!method_exists($ssh, 'Net_SSH2')) die("Net_SSH2 class doesn't have Net_SSH2 method!");
8    
9           if (!$ssh->login('***', '***')) {   // (verified) username and password
10              echo "LOG: " . $ssh->getLog() . "<br>";
11              exit('Login failed!');
12          } 
```

**代码更新 2：**

```
1       require("Net/SSH2.php");
2
3       define('NET_SSH2_LOGGING', NET_SSH2_LOG_COMPLEX);
4
5       if (!class_exists('Net_SSH2')) die("Class Net_SSH2 doesn't exist!");
6       
7       $ssh = new Net_SSH2('***');   // the host IP address 
8       
9       if (!method_exists($ssh, 'Net_SSH2')) die("Net_SSH2 class doesn't have Net_SSH2 method!");
10
11      if (!$ssh->login('***', '***')) {   // (verified) username and password
12          echo "LOG: " . $ssh->getLog() . "<br>";
13          echo "ALL ERRORS: ";
14          print_r($ssh->getErrors());
15          echo "<br>LAST ERROR: " . $ssh->getLastError() . "<br>";
16          exit('Login failed!');
17      } 
```

它在第 16 行退出。`getLog()`没有给出任何信息，因此很难知道问题出在哪里。我使用 PuTTY 测试了登录凭据。它也无法登录到其他服务器。我无法理解*导致*问题的原因。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:21:20.570

`Net_SSH2`不是函数，这是该类中的一个类和构造函数。所以第三行应该是

```
if (!class_exists('Net_SSH2')) die("Class Net_SSH2 doesn't exist!"); 
```

如果您想进一步检查第 5 行之后`Net_SSH2`的类中是否存在方法，`Net_SSH2`您可以添加以下内容：

```
if (!method_exists($ssh, 'Net_SSH2')) die("Net_SSH2 class doesn't have Net_SSH2 method"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:16:58.283

如果您点击您提供的链接上的“启用日志记录”按钮，您将看到在包含 Net/SSH2.php 之后立即完成以下操作：

```
define('NET_SSH2_LOGGING', NET_SSH2_LOG_COMPLEX); 
```

试试看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T15:12:56.123

尝试在 PHP 脚本的顶部执行此操作：

```
error_reporting(E_USER_NOTICE); 
```

将 error_reporting 设置为 0 会抑制 user_error，因此您的 PHP 设置很可能只是抑制了错误。例如。

```
error_reporting(E_USER_NOTICE);

user_error('zzzz', E_USER_NOTICE); 
```

对比

```
error_reporting(0);

user_error('zzzz', E_USER_NOTICE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:17:21.463

当然，您可以将第 3 行更改为：

```
if( !class_exists('Net_SSH2')... 
```

但我建议您进行一些异常处理。使用 PHPSecLib 时，除了问题什么都没有，所以我创建了[这个 SSH2 类](http://www.highonphp.com/php-ssh2-class-with-exception-handling)，它确实需要安装 PHP SSH2 扩展。

您应该尝试调用：`getLog()`以找出失败的原因。

```
echo $ssh->getLog(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T19:14:13.747

我最终将我的代码托管在我试图连接的服务器（服务器 B）上。相同的代码以相反的方向工作（我可以连接到我之前的代码所在的服务器 A）！我最终得出结论，服务器 A 存在环境问题。我很感激那些在这里帮助我的人！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T09:31:41.843

鉴于最新的评论，我假设您的代码存在于第 8 行（其中 Net_SSH2() 对象被实例化）......

我只是有一个非常相似的问题，一旦部署，`include()`就可以工作，但是`check_exists()`实例化一个新`Net_SSH2`对象会失败......但是使用 php 命令行工具解析我的 php 文件（在部署之前）可以正常工作......

**所以问题出在服务器上（在我的例子中是 Apache）：安装 phpseclib 的目录设置了权限，所以我什`cd`至无法访问它。**

碰巧的是，我的 hoem 制作的部署脚本只是简单地复制服务器上的文件并设置奇怪的权限，以便无法访问 SSH2.php。

也许你在这里有类似的问题？

# c# - 打印小数点后的数字

> ID：11744039
> 
> 赞同：1
> 
> 时间：2012-07-31T15:48:08.850
> 
> 标签：c#, decimal-point

如何在小数点后打印浮点/双精度变量的数字？例如，`435.5644`它将输出`5644`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:50:39.150

尝试

```
fraction = value - (long) value; 
```

或者 ：

```
fraction = value - Math.Floor(value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:54:19.983

您可以尝试以下方法：

```
 double d = 435.5644;
  int n = (int)d;

  var v = d - n;

  string s = string.Format("{0:#.0000}", v);

  var result = s.Substring(1); 
```

结果：5644

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T16:04:01.913

EDIT: reference to another question (http://stackoverflow.com/questions/4512306/get-decimal-part-of-a-number-in-javascript) You can do the following:

```
double d = 435.5644;
float f = 435.5644f;
Console.WriteLine(Math.Round(d % 1, 4) * 10000);
Console.WriteLine(Math.Round(f % 1, 4) * 10000); 
```

That will give you the integer part you looking for.

Best is to do it as Aghilas Yakoub answered, however, here below another option using string handling. Assuming all amounts will have decimals and that decimal separator is a dot (.) you just need to get the index 1.

```
double d = 435.5644;
Console.WriteLine(d.ToString().Split('.')[1]);

float f = 435.5644f;
Console.WriteLine(f.ToString().Split('.')[1]); 
```

Otherwise you may get a Unhandled Exception: System.IndexOutOfRangeException.

# ios5 - iOS 5 ScrollView 添加子视图导致 EXC_BAD_ACCESS

> ID：11744046
> 
> 赞同：0
> 
> 时间：2012-07-31T15:48:24.470
> 
> 标签：ios5, uiviewcontroller, uiscrollview

弧，iOS 5，XCode 4.2

我正在尝试使用页面控件（类似于主屏幕）实现分页滚动视图，但我似乎无法让它工作。相关代码为：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [scroll setDelegate:self];
    [scroll setContentSize:CGSizeMake(2 * [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height)];
    [scroll setPagingEnabled:YES];

    pageControl.currentPage = 0;
    pageControl.numberOfPages = 2;

    UIView* view = [[self.storyboard instantiateViewControllerWithIdentifier:@"VALID_ID_1"] view];
    view.frame = CGRectMake(0, 0, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height);

    [scroll addSubview:view];

    UIView *aView = [[self.storyboard instantiateViewControllerWithIdentifier:@"VALID_ID_2"] view];
    aView.frame = CGRectMake([[UIScreen mainScreen] bounds].size.width, 0, [[UIScreen mainScreen] bounds].size.width, [[UIScreen mainScreen] bounds].size.height);

    [scroll addSubview:aView];
} 
```

调用该`instantiateViewControllerWithIdentifier`方法会返回一个结果。

**我尝试过的事情：**

*   在此特定文件上禁用 ARC
*   `alloc] init]`在视图控制器上使用

**编辑**：我可能应该显示声明：

```
//MyViewController.h
@property (strong, nonatomic) IBOutlet UIScrollView* scroll;

...

//MyViewController.m
@synthesize scroll; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:04:57.767

最有可能的`scroll`是`nil`。请检查..！

# javascript - Node.js 初学者 - 如何在比网页中的 DOM 节点低一级立即解析所有子节点

> ID：11744048
> 
> 赞同：2
> 
> 时间：2012-07-31T15:48:36.727
> 
> 标签：javascript

我了解对于存储在名为“父”的变量中的网页节点，我可以使用以下命令获取其所有子节点

```
var children=parent.childNodes; 
```

我这里有两个问题——

(a) 上述代码行是否只提供直接子节点？或者甚至低于直接子级的节点也会存储在“子级”变量中？

(b) 如何解析“children”变量中的每个节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:51:18.120

1）它只会返回直接子节点，但它们又将包含它的所有子节点......等等。

2)

```
for(var i=0;i<children.length;i++)
{
    children[i].......
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:53:31.343

a）它只会返回直接的孩子（但是，当然每个孩子都可能包含孩子）

b)

```
var children = parent.childNodes;

for(var i = 0; i < children.length; i++) 
{
    var singleChild = children[i]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:52:20.783

a) 是的，只列出直接子节点

b) 例如使用 ES5 魔法

```
[].forEach.call(children, function( node ) {
    console.log( node );
}); 
```

所以我们可以有一个递归调用，循环所有子节点：

```
(function _loop( current ) {
    [].forEach.call( current.children, function( node ) {
        if( node.children.length ) {
            _loop( node );
        }
        else {
           console.log( node );
        }
    });
}( children )); 
```

# php - 如何在php文件中插入模板

> ID：11744051
> 
> 赞同：1
> 
> 时间：2012-07-31T15:48:44.557
> 
> 标签：php, templates

我使用以下代码动态创建 PHP 文件

```
$value = 5;
$file = $compname.'.php';
$file_pointer = fopen( $file, 'w' );
$string = '<?php $var = '. $value .' ?>';
fwrite( $file_pointer, $string );
fclose($file_pointer);
include($file);
echo $var; 
```

是否可以在该php文件中插入模板并且文件名包含空格是否可以删除这些空格并添加“-”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:06:27.170

正如@ianhales 提到的，您可以使用 str_replace() 替换名称中的空格。如果我正确理解您的问题，您想使用模板文件来生成 PHP 文件的内容。为此，我将执行以下操作。

创建 template.txt 文件

```
<?php
 $var = #THEVAR#;
?> 
```

然后你使用模板：

```
<?php
 ...
 $value = 5;
 $template = file_get_contents('template.txt');
 $template = str_replace("#THEVAR#", $value, $template);
 $newFile = fopen($compname.'.php', 'w');
 fwrite($newFile, $template);
 fclose($newFile);
 ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:52:10.920

[str_replace( )](http://php.net/manual/en/function.str-replace.php)将执行您的 ' ' 到 '-' 替换。你剩下的问题我不明白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:40:30.620

您没有提到是否要先对模板文件进行 PHP 解析。这种方法可以做（或不做）：

```
function getTemplateContent($includeFile, $parsePhp = TRUE) {
$cont = '';
if ($parsePhp) {
    try {
        ob_start();
        require($includeFile);
        $cont = ob_get_contents();
        ob_end_clean();
    } catch (Exception $ex) {
        $cont = '';
    }
} else {
    $cont = file_get_contents($includeFile); #
}
return $cont;
} 
```

要在书面文件中包含模板内容，可以这样做，例如

```
$string = '<?php $var = '. $value . ';' . getTemplateContent($templateFile, TRUE/FALSE) . ' ?>' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:57:53.787

你的意思是你想要一个预制的PHP文件并在那里改变一些东西吗？

例如，您可以使用占位符。

示例 PHP 文件

```
<?php
$var = '[%%VAR1%%]';
?> 
```

文件编辑器：

```
//Change filename
str_replace(' ', '-', $compname);

//File "template editor"   
$value = 5;
$file = file_get_contents($compname.'.php');
str_replace('[%%VAR1%%]',$value, $file);
file_put_contents($compname.'.php', $file); 
```

# sql - 需要将存储过程移动到系统存储过程文件夹中

> ID：11744054
> 
> 赞同：0
> 
> 时间：2012-07-31T15:48:59.863
> 
> 标签：sql, sql-server, stored-procedures

当我以某种方式创建存储过程时，我设法将它放在存储过程文件夹中，但不在*系统*存储过程文件夹中（系统 SP 文件夹存在于存储过程文件夹中）。如何将它向下移动到系统存储过程文件夹中？

编辑：阅读下面的答案后，我认为问题在于我如何告诉我的 C# 程序访问存储过程。我有这行代码抛出异常，告诉我它找不到它：

```
SqlCommand cmd = new SqlCommand("<database_name>.dbo.<stored_procedure_name>.sql", conn); 
```

如果有人可以就如何正确调用存储过程提供任何帮助，我们将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T16:08:16.630

**你没有**，或者至少不应该。

这适用于`system`存储过程，它内置在 RDBMS 中并用于`system`功能，例如重命名对象或检查服务器上的用户。

不要将这些视为文件系统中的文件夹 - 它们只是根据现有元数据（`Stored procedure`或`View`？`System`对象或`User`对象？）组织您的对象

您可以想象将其标记为系统对象，但这只是一个糟糕的主意。

你为什么要混淆你的程序？如果您正在创建它，它显然是一个用户程序，而不是系统程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T16:07:19.687

我真的不确定你为什么需要这样做，但你可以：

```
exec sp_ms_marksystemobject myprocname 
```

它没有记录 - 所以如果你尝试使用它，我将不会得到任何支持，并且它可能会从 SQL Server 的未来版本中删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T17:02:28.120

+1 @JNK 上面的评论。

此外，请确保您已在您认为的架构下创建了存储过程。如果你执行这样的语句：

```
create procedure foobar as ... 
```

存储过程`foobar`是在您的*默认*架构下创建的，这可能不是`dbo`. 您应该**始终**创建和引用至少具有 2 级模式限定名称的数据库对象：

```
create procedure dbo.foobar ...
create procedure some_schema.foobar ... 
```

以免你射中自己的脚。您还应该对引用进行模式限定。参考像

```
select * from some_table
exec some_stored_procedure 
```

而不是

```
select * from dbo.some_table
exec dbo.some_stored_procedure 
```

通过首先在*默认*模式下探测所需名称和类型的对象来解决。如果找到，那就是用于解析引用的对象。如果没有找到这样的对象，则在 schema 下进行探测`dbo`。

此外，您通常不应为存储过程命名以`sp_`: 开头的名称，这会进一步复杂化（并减慢）解析，从而将`master`数据库的探针混入其中。

# asp.net - MasterPage 中带有 runat=server 的 html 标记

> ID：11744055
> 
> 赞同：0
> 
> 时间：2012-07-31T15:49:00.030
> 
> 标签：asp.net, master-pages

Masterpage.cs 无法识别带有`runat=server`

例如在 Masterpage 中：

```
 <input type="checkbox" runat="server" id="ckb" /> 
```

使用时在代码隐藏中给出以下错误`ckb`

> 当前上下文中不存在名称“ckb”

**更新**输入在`<HeaderTemplate>`中继器内

我怎样才能找到他并改变他的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:00:20.753

如果您在`Template`基于控件（例如 a `<asp:Repeater>`）中使用控件，那么您将无法直接访问控件，就像直接放置在页面/用户控件/母版页上的控件一样。

相反，您需要`FindControl`在模板控件本身上使用。

例如，如果您设置一个`ItemDataBind`事件处理程序，您将能够执行以下操作...

```
protected void repeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
  if(e.Item.ItemType == ListItemType.Header)
  {
    HtmlInputCheckBox chk = (HtmlInputCheckBox)e.Item.FindControl("chk");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:54:15.447

`id`你给予的控制权是，`ckb`不是`checkAll`。

`ckb`会在后面的代码中识别。

# java - SQLite：返回 SQLException 的结果集

> ID：11744062
> 
> 赞同：2
> 
> 时间：2012-07-31T15:49:17.373
> 
> 标签：java, sql, sqlite

我有以下数据库`ShorthandText`

```
textid | text
-------------------------- 
1      | just a test
2      | just another test 
```

我正在使用以下代码尝试返回`text`列中的两个字符串

```
public List<String> executeSQLWithMulipleReturns(String sql) throws SQLException{
    List<String> results = null;
    connection = ConnectDb();
    stat = connection.createStatement();
    resultSet = stat.executeQuery(sql); // sql = "SELECT text FROM ShorthandText;"
    while(resultSet.next()){
        results.add(resultSet.getString(resultSet.getRow()));
        System.out.println(resultSet.toString());
    }

    closeAll(); // closes all connections         
    return results;
} 
```

但是我收到以下错误

```
java.sql.SQLException: column 2 out of bounds [1,1]
at org.sqlite.RS.checkCol(RS.java:64)
at org.sqlite.RS.markCol(RS.java:71)
at org.sqlite.RS.getString(RS.java:245)
at Java.ConnectToDatabase.executeSQLWithMulipleReturns(ConnectToDatabase.java:46)
at GUI.ShorthandText.jButton1ActionPerformed(ShorthandText.java:123)
at GUI.ShorthandText.access$000(ShorthandText.java:18)
at GUI.ShorthandText$2.actionPerformed(ShorthandText.java:82)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
...... 
```

这发生在这一行：`results.add(resultSet.getString(resultSet.getRow()));`

谁能解释我为什么会收到这个错误？

**编辑：空指针异常**

代码

```
while(resultSet.next()){
        results.add(resultSet.getString("text"));
        System.out.println(resultSet.toString());
    }

while(resultSet.next()){
        results.add(resultSet.getString(1));
        System.out.println(resultSet.toString());
    } 
```

两者都给出了这个例外

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at Java.ConnectToDatabase.executeSQLWithMulipleReturns(ConnectToDatabase.java:46)
at GUI.ShorthandText.jButton1ActionPerformed(ShorthandText.java:123)
at GUI.ShorthandText.access$000(ShorthandText.java:18)
at GUI.ShorthandText$2.actionPerformed(ShorthandText.java:82)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
....... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:54:33.813

问题在这里：

```
results.add(resultSet.getString(resultSet.getRow())); 
```

[`resultSet.getString`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getString%28java.lang.String%29)获取列索引作为参数，但您正在传递`resultSet.getRow()`

如果你想得到 ids `results`，你应该使用：

```
results.add(resultSet.getString("textid")); 
```

或者

```
results.add(resultSet.getString(0)); 
```

如果您想将文本放入`results`，您应该使用：

```
results.add(resultSet.getString("text")); 
```

或者

```
results.add(resultSet.getString(1)); 
```

**更新**

哦，天哪，这太简单了！你实际上有两个问题。我们已经解决了第一个问题。这是你的第二个问题：

```
List<String> results = null; 
```

`List<String> results`尚未初始化，因此 .' 这行`NullPointerException`应该是：

```
List<String> results = new ArrayList<String>(); 
```

这将解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:59:25.850

getRow 返回结果集中的行号

您有一个单列结果集

使用索引为 1的调用 getString 的第一次迭代`results.add(resultSet.getString(resultSet.getRow()));`（并且将起作用）

使用索引为 2 调用 getString 的第二次迭代`results.add(resultSet.getString(resultSet.getRow()));`（并且将失败，因为结果集中只有一列）

我认为你应该这样做`results.add(resultSet.getString(1));`

每次从结果集中读取时，您都希望将第一项从结果集中取出。

# android - 使用 VoicemailContract 出现权限错误

> ID：11744063
> 
> 赞同：1
> 
> 时间：2012-07-31T15:49:17.277
> 
> 标签：android, permissions, voicemail

我正在尝试使用 VoicemailContract，但我不断收到权限错误，即使我在清单中包含了权限。任何人都可以阐明发生了什么吗？

尝试访问语音邮件提供商时出现此错误：

```
java.lang.SecurityException: Permission denied for URI: content://com.android.voicemail/voicemail?source_package=com.google.android.apps.googlevoice
Requires com.android.voicemail.permission.READ_WRITE_ALL_VOICEMAIL permission. 
```

我在清单中添加了以下两个权限：

```
<uses-permission android:name="com.android.voicemail.permission.ADD_VOICEMAIL" />
<uses-permission android:name="com.android.voicemail.permission.READ_WRITE_ALL_VOICEMAIL" /> 
```

我也没有得到以下广播意图：

```
<receiver
    android:name=".VoicemailReceiver"
    android:exported="true" > 
    <intent-filter> 
        <action android:name="android.intent.action.NEW_VOICEMAIL" />
    </intent-filter> 
</receiver> 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:18:30.840

看来我会再次回答我自己的问题。我刚刚发现了一些未包含在 VoicemailContract 的 Google 文档中的信息：

[http://developer.android.com/about/versions/android-4.0.html](http://developer.android.com/about/versions/android-4.0.html)（向下滚动到“语音邮件提供商”）

> **语音信箱提供商**
> 
> 新的语音邮件提供程序允许应用程序向设备添加语音邮件，以便在单个可视化演示中呈现所有用户的语音邮件。例如，用户可能有多个语音邮件源，例如一个来自电话服务提供商，另一个来自 VoIP 或其他替代语音服务。这些应用程序可以使用语音邮件提供程序 API 将其语音邮件添加到设备。然后，内置的电话应用程序将所有语音邮件以统一的方式呈现给用户。虽然系统的电话应用程序是唯一可以读取所有语音邮件的应用程序，但每个提供语音邮件的应用程序都可以读取它已添加到系统中的那些（但不能读取来自其他服务的语音邮件）。
> 
> ***由于 API 当前不允许第三方应用程序读取系统中的所有语音邮件，因此唯一应该使用语音邮件 API 的第三方应用程序是那些将语音邮件传递给用户的应用程序。***
> 
> VoicemailContract 类定义了 Voicemail Provder 的内容提供者。VoicemailContract.Voicemails 和 VoicemailContract.Status 子类提供了表格，应用程序可以在其中插入语音邮件数据以存储在设备上。有关语音邮件提供商应用程序的示例，请参阅语音邮件提供商演示。

所以……基本上，即使他们有这个新的 API（很酷而且很有用），你也只能访问你的应用程序插入数据库的语音邮件。您无权访问您的设备拥有的任何其他语音邮件。

我仍然不确定是否应该为设备上的所有应用程序或仅系统应用程序触发广播意图，但由于我没有收到此广播，我只能假设它仅适用于系统应用程序.

随意确认或否认此信息。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:07:20.963

我认为您需要添加您的项目包名称，即“content://com.android.voicemail/voicemail?source_package="+ ctx.getPackageName();

# html - 在 Rails 中禁用下拉菜单

> ID：11744068
> 
> 赞同：2
> 
> 时间：2012-07-31T15:49:35.040
> 
> 标签：html, ruby-on-rails

我想在 Rails 中禁用 HTML DropDown，我找到了这个解决方案： [how to disable the entire dropdown control in html](https://stackoverflow.com/questions/1227212/how-to-disable-the-entire-dropdown-control-in-html)

所以，我有这个：

```
f.select( ...., :disabled => true) 
```

但是，问题是，当 DropDown 被禁用时，它不会显示在`params`集合中。

编辑：
这是我的情况：
我有一个带有 a`text_field`和一个`select`字段的表单。有两种情况：

*   用户直接创建一个新项目。如果是这样，她将从选择字段中选择一个类别。
*   用户从类别页面重定向后创建一个新项目。在这种情况下，选择字段被设置为类别的值，并且应该被禁用。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T18:47:57.250

正如我在原始问题中的评论中提到的，禁用的表单元素值不会出现在表单提交的参数中。要解决此问题，请尝试使用隐藏字段来保存并提交您想要的值。

假设设置了一些变量和诸如此类的东西来帮助决定是否应该禁用选择字段：

```
# ...
f.select(..., :disabled => @category_already_chosen)
f.hidden_field(...) if @category_already_chosen
# ... 
```

显然，这可以根据您的需要进行更改，但基本思想就在那里。如果您已经选择了一个类别并希望禁用选择字段，请创建一个隐藏字段。如果您没有选择类别，请省略隐藏字段并允许用户使用选择字段。

[如我发布](https://stackoverflow.com/questions/1191113/disable-select-form-field-but-still-send-the-value)的链接所示，这可能是绕过此限制的最简单方法，无需在表单提交后使用 Javascript 来处理参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:12:42.233

我会将查询字符串参数添加到您的 redirect_to 调用中

```
redirect_to :action => form_path, :category => :whatever_category_they_came_from, :disabled => true 
```

然后以你的形式

```
:selected => params[:category], :disabled => params[:disabled] 
```

# google-maps - 如何使用 ElasticSearch 创建像 Redfin.com 这样的多面搜索？

> ID：11744076
> 
> 赞同：3
> 
> 时间：2012-07-31T15:50:00.820
> 
> 标签：google-maps, geospatial, elasticsearch

我正在尝试使用 ElasticSearch 创建与 Redfin.com 非常相似的搜索。有一个地理距离方面，但这似乎不是我想要的。这是一个 Redfins 搜索的示例，它具有类似于“地图集群”的功能：

[http://www.redfin.com/homes-for-sale#!disp_mode=M&lat=33.488012063731574&long=-117.406087074585&market=socal&v=8&zoomLevel=9](http://www.redfin.com/homes-for-sale#!disp_mode=M&lat=33.488012063731574&long=-117.406087074585&market=socal&v=8&zoomLevel=9)

重要笔记：

1.  返回的数据不仅仅是与 Google Maps Map Clusters 系统聚类的地图标记列表。我试过了，数据太多了。返回的数据已经汇总

2.  位置点动态移动，因此似乎也没有使用具有多个位置的地理距离方面。

谢谢， DK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:36:53.820

Elasticsearch 还没有“地理集群方面”。如果您有兴趣，请关注[https://github.com/elasticsearch/elasticsearch/issues/1689](https://github.com/elasticsearch/elasticsearch/issues/1689)。

我不知道 Redfin 是在动态进行聚类，还是为不同的缩放级别预定义了区域。如果是后者，您可以使用简单的术语 facet 来获取每个区域的命中数。

# git - 为什么 git 提示我输入拉后合并提交消息？

> ID：11744081
> 
> 赞同：155
> 
> 时间：2012-07-31T15:50:19.320
> 
> 标签：git, git-pull

最近，在 any 之后`git pull`，git 开始生成我的文本编辑器，并要求合并提交消息。提交消息已经预先填充，我只需要保存并关闭窗口即可完成拉取。

过去，它会默默地进行合并，并带有标准的提交消息（沿线`Merge branch 'dev' of remote.com:/repo into dev`）。

我最近将 git 更新到 1.7.11.3 版本（通过自制软件），但想不出我可能会做些什么来改变这种行为。这是一个设置，还是有其他方法可以恢复到原来的样子？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-07-31T16:10:01.537

在 git 1.7.10 中，git 开发人员认为合并提交太容易了。正如[这篇博文中所解释的，](http://git-blame.blogspot.com/2012/02/anticipating-git-1710.html)强制交互式提交消息行为应该使这些提交消息更加详细，并且可以减少不必要的合并的总体频率。

您可以使用该`--no-edit`标志来避免这种行为，但是，不要。合并提交，就像对历史的任何提交一样，应该构造良好。你的历史应该是有用的。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-12-14T18:34:03.530

要创建供将来使用的快捷方式，可以：-

使用以下内容编辑您`~/.gitconfig`的：

```
[core]
    mergeoptions = --no-edit 
```

或者在终端中执行以下

`git config --global core.mergeoptions --no-edit`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-01-27T22:11:11.883

首先，请注意上面克里斯托弗的回答中的警告。

然后，如果您仍想禁用自动合并提交消息编辑，请设置此环境变量：

```
 GIT_MERGE_AUTOEDIT=no 
```

This environment variable and its "no" setting are documented on the [git merge](https://git-scm.com/docs/git-merge) doc page. It is recommended to use it only in scripts that need to merge non-interactively, but of course it can be set as part of your shell environment to make its effects more permanent.

# php - 缓存和竞争条件

> ID：11744087
> 
> 赞同：4
> 
> 时间：2012-07-31T15:50:50.147
> 
> 标签：php, caching, race-condition

我正在使用 memcache（不是 memcached），我可能同时有 10000 个请求命中缓存。这可能会导致竞争条件，所以我使用此代码[http://terrychay.com/article/keeping-memcache-consistent.shtml](http://terrychay.com/article/keeping-memcache-consistent.shtml)来获取锁而不是设置密钥。

现在从日志记录中我看到，当一个请求 A 正在等待缓存时，其他请求 B 可能会完成获取数据并放入缓存，因此请求 A 没有等待和覆盖数据的点。

所以我认为一种解决方案是：当请求等待锁定时，它会检查数据是否存在于 key 处。如果它在那里而不是从键返回数据而不是更新它。其他人能想到任何建议吗？等待锁定时检查密钥会炸毁内存缓存服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:45:36.183

我认为对锁定获取代码进行太多修改是不值得的。一旦你有了锁，你可以简单地做一个`get`，如果数据在那里，清除锁并简单地返回数据而不访问数据库。

这样做还应该减少整体等待时间。

# javascript - PhantomJS 从字符串创建页面

> ID：11744089
> 
> 赞同：34
> 
> 时间：2012-07-31T15:50:59.783
> 
> 标签：javascript, node.js, phantomjs

是否可以从字符串创建页面？

例子：

```
html = '<html><body>blah blah blah</body></html>'

page.open(html, function(status) {
  // do something
}); 
```

我已经尝试过上述方法，但没有运气....

另外，我认为值得一提的是，我正在使用带有 phantomjs-node 的 nodejs（https://github.com/sgentle/phantomjs-node）

谢谢！

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-08-02T05:20:13.313

很简单，看一下[colorwheel.js](https://github.com/ariya/phantomjs/blob/master/examples/colorwheel.js)的例子。

```
var page = require('webpage').create();
page.content = '<html><body><p>Hello world</p></body></html>'; 
```

就这样！然后您可以操作页面，例如将其渲染为图像。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-04-06T09:48:59.037

**为此，您需要将页面内容设置为您的字符串。**

```
phantom.create(function (ph) {
  ph.createPage(function (page) {
      page.set('viewportSize', {width:1440,height:900})

      //like this
      page.set('content', html);

      page.render(path_to_pdf, function() { 
        //now pdf is written to disk.
        ph.exit();
      });
  });
}); 
```

你需要用来`page.set()`设置html内容。

根据[https://github.com/sgentle/phantomjs-node#functionality-details](https://github.com/sgentle/phantomjs-node#functionality-details)

> 不能直接获取/设置属性。
> 而是使用**page.get('version', callback)**或 page.set('viewportSize', {width:640,height:480}) 等。
> 
> 可以通过在键中包含点来访问嵌套对象，例如 **page.set('settings.loadImages', false)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T17:48:17.903

查看 phantomjs [API](http://code.google.com/p/phantomjs/wiki/Interface)， page.open 需要一个 URL 作为第一个参数，而不是 HTML 字符串。这就是为什么您尝试的方法不起作用的原因。

但是，您可能能够实现从字符串创建页面效果的一种方法是在带有 URL（可能是 localhost）的地方托管一个空的“骨架页面”，然后将 Javascript（使用 includeJs）包含到空白页。您包含在空白页面中的 Javascript 可用于`document.write("<p>blah blah blah</p>")`向网页动态添加内容。

我曾经这样做过，但是AFAIK这应该可行。

示例骨架页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head></head>
<body></body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-11T22:27:21.843

只是想提一下我最近有类似的需求，发现我可以将 file:// 样式引用作为 URL 参数传递，所以我将 HTML 字符串转储到本地文件中，然后将完整路径传递给我的捕获脚本 (django_screamshot)基本上使用 casperjs 和 phantomjs + capture.js 脚本。

无论如何，它只是工作并且相当快..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-06T18:54:59.227

我得到了以下在 PhantomJS 2.0.0 版中的工作。而之前，我使用 page.open() 从文件系统打开页面并设置回调：

```
page.open("bench.html", pageLoadCallback); 
```

现在，我通过 HTML 页面的字符串变量完成同样的事情。该`page.setContent()`方法需要一个 URL 作为第二个参数，这用于`fs.absolute()`构造一个*file://* URL。

```
page.onLoadFinished = pageLoadCallback;
page.setContent(bench_str, "file://" + fs.absolute(".") + "/bench.html"); 
```

# python - 在 Python 中将变量写入 hex 文件

> ID：11744090
> 
> 赞同：0
> 
> 时间：2012-07-31T15:51:08.440
> 
> 标签：python, file, io, hex

所以，我有一个浮点值：-1.0f，或者其他什么。以及如何将其写入 Python 中的十六进制格式的文件？我的意思是我们在记事本中打开文件，我们不会看到十六进制值，只有 ASCII 码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:43:05.507

在 Python 3 中：

```
>>> import struct
>>> "".join("{0:02X}".format(b) for b in struct.pack(">f", -1.0))
'BF800000' 
```

在 Python 2 中：

```
>>> import struct
>>> "".join("{0:02X}".format(ord(b)) for b in struct.pack(">f", -1.0))
'BF800000' 
```

# android - ListView onItemLongClickListener 不会阻止链接点击

> ID：11744094
> 
> 赞同：6
> 
> 时间：2012-07-31T15:51:16.590
> 
> 标签：android, listview

**环境：** 我有一个 Android `ListView`，其中的行由 TextViews 组成，其中包含一些带有可点击链接 ( `URLSpans`) 的 HTML。在 ListView 上，我设置了一个`OnItemLongClickListener`监听各个行的长按事件。

**目标：** 当我收到长点击事件时，我想禁用对同一触摸事件的链接的点击，但我不知道如何做到这一点。长按正确触发，但只要我抬起手指，链接点击也会触发。

**我已经尝试过的：** 我尝试过在该`onItemLongClick`方法上返回真（和假）——这两种方式似乎都没有什么不同。我试图`MotionEvent.ACTION_UP`在长按后拦截 ，以便我可以暂时使用链接水龙头，但`ACTION_UP`不会触发 - 至少不会在`ListView`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:57:01.727

我做了一些更多的搜索，发现了一个类似问题的答案：[Android TextView Linkify intercepts with parent View gestures](https://stackoverflow.com/questions/7236840/android-textview-linkify-intercepts-with-parent-view-gestures)

我使用这个答案中的概念来解决我的问题。我扩展了`TextView`课程并覆盖`onTouchEvent`并查看是否正在点击有关着陆事件的链接。如果我是，我会保存该链接并以编程方式“单击”它，`ListView.onItemClick`如果我没有遇到`LongClick`第一个。呸。

如果其他人有更优雅的方法来解决问题，请将其发布，如果可行，我将接受您的回答。如果没有，我会在几天内接受我自己的答案。

# html - CSS 目标主题

> ID：11744096
> 
> 赞同：0
> 
> 时间：2012-07-31T15:51:24.203
> 
> 标签：html, css

我想知道 CSS 中是否有办法将特定 div 下的样式打包为不同的样式。这是我想要完成的示例：

```
<html>
<body>
  <div id="enableTheme">
     <p>some themed html</p>
  </div>
  <div id="disableTheme">
     <p>some none-themed html</p>
  </div>
</body>
</html> 
```

CSS会做这样的事情：

```
#enableTheme{
    p{
       css styles
    }
    label{
       different styles
    }
    div{
       even more different styles
    }
    ...
 } 
```

id 为“enableTheme”的 div 下的所有内容都将以我想要的方式进行主题化。

预先感谢您的帮助

*编辑*：对不起，我的问题不是很清楚。我知道

```
#enableTheme p{ 
   //Styles
} 
```

但我的问题是我有一个hude css文件，我不想一个一个地为每个元素添加“#enableTheme”，这就是为什么我想知道是否有一种方法可以在全局范围内为一组样式我已经预制了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:55:01.217

你几乎在那里。尝试

```
#enableTheme p {
  /* styles */
}

#enableTheme label {
  /* and on and on */
} 
```

顺便说一句，如果您使用[SCSS](http://sass-lang.com/)，您编写的内容将准确输出您在这种情况下想要的 CSS。

编辑：...但我建议在进入 Less/Sass/SCSS 之前了解更多关于 CSS 的知识

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:54:10.857

在常规 CSS 中，不，你不能这样做。但是您可以执行以下操作：

```
#enableTheme p{
       css styles
}
#enableTheme label{
       different styles
}
#enableTheme div{
       even more different styles
} 
```

请注意，有一些选项，例如[LESS](http://lesscss.org/)和[SASS](http://sass-lang.com/)，可以让您按照您的建议进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:54:15.833

使用该语法：

```
#enableTheme p{
   css styles
}
#enableTheme label{
   different styles
}
#enableTheme div{
   even more different styles
}
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:54:41.097

（这可能是重复的，但无论如何）

是的，这是[Descendant Selector](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)。只需这样做：

```
#enableTheme p
{
   css styles
}

#enableTheme label
{
   different styles
}

#enableTheme div
{
   even more different styles
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T15:56:39.833

尝试

```
#enableTheme p {

}

#enableTheme label {

}

#enableTheme div {

} 
```

或者，如果他们是直系后代，您可以使用

```
#enableTheme > p {

}

#enableTheme > label {

}

#enableTheme > div {

} 
```

# amazon-ec2 - 如何在 Windows EC2 实例中下载文件？

> ID：11744097
> 
> 赞同：1
> 
> 时间：2012-07-31T15:51:25.217
> 
> 标签：amazon-ec2, windows-server-2008-r2

我 RDP 进入了一个实例，但是当我尝试下载文件时，会出现一条错误消息：“您的当前设置不允许下载此文件。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:40:20.400

如果您知道要下载的文件的确切 URL，则可以使用 PowerShell 作为解决方法：

```
$client = New-Object System.Net.WebClient
$client.DownloadFile("http://example.com/path/to/file", "path/to/destination/file.zip") 
```

# ruby-on-rails - 如何使用 Rails 3 Rspec 和 Capybara 访问 Selenium 2 的默认 webdriver？

> ID：11744099
> 
> 赞同：7
> 
> 时间：2012-07-31T15:51:29.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, selenium, rspec, selenium-webdriver

几天来，我一直在尝试实现 Selenium webdriver 来进行 javascript 测试。我已安装 gem 并将其包含`selenium-webdriver`在我的`Gemfile`. 通过添加`, js: true`到 Rspec 测试可以通过一些简单的测试。

没有其他必要了：运行测试时，Firefox 窗口打开前面在 Capybara 文件中指定的当前页面`visit path("/news/#{news_item.id}")`，然后单击一个按钮，显示一个隐藏的表单，填充字段，然后按下提交按钮，没问题。测试通过，浏览器关闭。

推进到更复杂的测试需要我调用 webdriver 上的方法，但我不知道如何访问它，因为我没有明确地创建一个。但是，如果我想创建自己的，我可以创建自己的，`driver = Selenium::WebDriver.for :firefox`但这会导致第二个浏览器实例打开，并且它是完全空白的，而不是打开 Capybara 导航到的页面。

我的问题是：我怎样才能访问正在使用的默认 webdriver，以便我可以调用诸如`empty_stars = driver.find_element(:class, "empty-stars-container")`和之类的方法`driver.action.move_to(empty_stars).perform`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T16:36:03.167

您可以使用以下方法访问 Capybara 中的 webdriver：

```
page.driver.browser 
```

所以你会想做这样的事情：

```
empty_stars = page.driver.browser.find_element(:class, "empty-stars-container") 
```

# asp.net - SignalR - 从外部 Http 上下文向 Silverlight 推送通知

> ID：11744104
> 
> 赞同：0
> 
> 时间：2012-07-31T15:51:42.403
> 
> 标签：asp.net, silverlight-5.0, signalr, httpcontext, signalr-hub

我是 SignalR 的新手，正在尝试向 Silverlight 客户端发送推送通知。

我们的 Web 项目不是 Asp.Net MVC - 只是 ASP.NET。

我创建了一个简单的 Hub 类：

```
 [HubName("ServerHub")] 
public class ServerHub: Hub
{
    public Task SendMessage(string message)
    {
        return Clients.NewMessage(message);
    }
} 
```

问题是我们有一些消息通过消息队列（Rhino 服务总线）进入我们的 Web 服务器。处理消息时，我们希望向 UI 发送通知。但是 RSB 工作线程在 HttpContext 之外运行，因此在调用 SendMessage 方法时，Clients 属性为空。

我试图通过将 ServerHub 添加到 Http 缓存中来解决此问题，然后从消息使用者中检索它。仍然有同样的问题 - 集线器的属性为空。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:06:56.597

好吧，做错了。没有使用 GlobalHost.DependencyResolver.Resolve()。

问候。

# uiviewcontroller - 如何从 MainStoryboard 为 UIViewController 分配标识符？

> ID：11744106
> 
> 赞同：1
> 
> 时间：2012-07-31T15:51:44.610
> 
> 标签：uiviewcontroller, uipopovercontroller, xib, nib, xcode-storyboard

在我使用 initWithNibName 分配和初始化视图控制器之前，其中 Nib 名称的参数只是 xib/nib 文件的名称。

但是，现在 Xcode/IB 与 Storyboards 一起工作的方式，我不确定我需要做什么来用它各自的 xib/nib 初始化视图控制器类。

在我的故事板中，我创建了视图控制器并引用了它（从另一个视图控制器）并将其指定为 Popover 类型。

任何想法如何实现？

谢谢。

*** 更新 ***

苹果文档说

> 要识别情节提要中的特定视图控制器或 segue，请使用 Interface Builder 为其分配一个唯一标识它的标识符字符串。

但我不知道如何通过 IB 分配唯一 ID。这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:33:21.660

```
XCode 4.4 and earlier: Identifier; 
XCode 4.5: Storyboard ID 
```

[STORYBOARD - 不包含带有标识符的视图控制器](https://stackoverflow.com/questions/8295471/storyboard-doesnt-contain-a-view-controller-with-identifier)

# for-loop - 文件名被多次附加

> ID：11744107
> 
> 赞同：2
> 
> 时间：2012-07-31T15:51:46.077
> 
> 标签：for-loop, cmd, append, dos, filenames

我正在使用批处理文件来附加多个文件名。

对于文件：1.txt、2.txt、3.txt、4.txt、5.txt - 我想附加 copy_1.txt

```
set "nname=copy_"

for %%A in (*.txt) do (
ren %%A %nname%%%A
)
exit 
```

但是，循环似乎循环回到第一个文件并重新附加文件名。

这是cmd输出：

```
> for %A in (*.txt) do (ren %A copy_%A )
> (ren 1.txt copy_1.txt )
> (ren 2.txt copy_2.txt )
> (ren 3.txt copy_3.txt )
> (ren 4.txt copy_4.txt )
> (ren 5.txt copy_5.txt )
> (ren copy_1.txt copy_copy_1.txt ) 
```

有人可以向我解释为什么会发生这种情况以及如何避免这个问题？

我试图添加一个“异常处理程序”，但它没有用。

```
set "nname=copy_"

for %%A in (*.txt) do (
if exist %nname%%%A goto :exit
ren %%A %nname%%%A
)
:exit
echo file exists 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:02:47.520

Shell 在开始处理您的重命名命令之前不会完成其文件列表，因此第一个重命名命令的结果，即 copy_1.txt，将与 *.txt 匹配。

避免它的一种方法：

```
for /F "usebackq" %%A in (`dir /b *.txt`) do (ren %%A %nname%%A) 
```

# c# - 无法实例化服务客户端

> ID：11744109
> 
> 赞同：1
> 
> 时间：2012-07-31T15:51:47.410
> 
> 标签：c#, wpf, web-services

我有一个调用 Web 服务 AddressValidationService 的 wpf C# 应用程序。我知道它曾经可以工作（在我开始从事该项目之前），但现在不行了。异常发生在这里：

```
var addrSvc = new AddressValidationServiceReference.AddressValidationServiceClient(); 
```

例外是：

> 在 ServiceModel 客户端配置部分中找不到引用合同“AddressValidationServiceReference.IAddressValidationService”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

这是来自我的 app.config：

```
 <client>
        <endpoint address="http://rdbval/EASTServices/AddressValidationService.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IPolicyRetriever"
            contract="AddressValidationServiceReference.IPolicyRetriever"
            name="BasicHttpBinding_IPolicyRetriever" />
        <endpoint address="http://rdbval/EASTServices/AddressValidationService.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IAddressValidationService"
            contract="AddressValidationServiceReference.IAddressValidationService"
            name="BasicHttpBinding_IAddressValidationService" />
    </client> 
```

也许有人可以告诉什么是错的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:33:47.227

`endpoints`您需要`.config`在`ServiceModel client`项目中插入或更新`IAddressValidationService`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:03:27.860

Probably stupid guess, but anyway: are you sure your config file is the one from your client application? =). try reading some AppSetting from it for example to ensure you are using the correct one if you are not sure. The config itself looks fine.

# sql - 在可能有也可能没有主键的表上插入行和更新行

> ID：11744113
> 
> 赞同：1
> 
> 时间：2012-07-31T15:51:55.943
> 
> 标签：sql, sql-server, database, primary-key, insert-update

我正在尝试更新一个表，以便添加缺少的行，并使用来自不同数据库的另一个表的信息作为参考来更新不是最新的行。

但是，有些表有主键，有些则没有。如果有主键插入命令将不会运行，如果没有主键，行将重复。

有没有办法让插入命令跳过已经存在的主键值？

我正在使用 sql server management studio 2005，这是迄今为止我为具有主键（PKcolumn）的表所拥有的代码：

```
INSERT [testDB].[dbo].[table1]
SELECT * FROM [sourceDB].[dbo].[table1]

UPDATE test
SET 
 test.[PKcolumn] = source.[PKcolumn]
,test.[column2] = source.[column2]
,test.[column3] = source.[column3] 
FROM 
[sourceDB].[dbo].[sourceDB] AS source
INNER JOIN 
[testDB].[dbo].[PKcolumn] AS test
ON source.[PKcolumn] = test.[PKcolumn] 
```

更新工作完美，但即使有一个重复项，插入也根本不会运行。

有关如何使此代码工作的任何建议？

另外，在没有主键的表上做同样事情的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:57:05.260

您需要使用 LEFT OUTER JOIN 在 INSERT 查询中排除表中已经存在的行：

```
INSERT [testDB].[dbo].[table1]
SELECT * FROM [sourceDB].[dbo].[table1]
LEFT OUTER JOIN [testDB].[dbo].[table1] ON [sourceDB].[dbo].[table1].[PKcolumn] = [testDB].[dbo].[table1].[PKcolumn]
WHERE [testDB].[dbo].[table1].[PKcolumn] IS NULL 
```

对于没有主键的表，我想您需要加入所有列以避免重复。

# c# - RX - 如何订阅条件状态，但仅当此状态在 x 时间段内不改变时？

> ID：11744124
> 
> 赞同：5
> 
> 时间：2012-07-31T15:52:33.313
> 
> 标签：c#, system.reactive

你知道如何订阅保持 x 时间的条件状态吗？

例如，如果我有`BehaviorSubject<int>`0 - 100 之间的表示 int 值，并且该值随时间变化，我想在该值连续 10 秒低于 50 时订阅。

如果值暂时回到 50 以上，然后再次下降 50，我想再次计数 10 秒。我怎样才能做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T02:07:05.073

这是一个相当简洁的可观察查询，对我来说似乎可以正常工作：

```
var below50longerthan10seconds =
    subject
        .Select(x => x < 50)
        .DistinctUntilChanged()
        .Select(x =>
            Observable.Delay(
                Observable.Return(x),
                TimeSpan.FromSeconds(10.0)))
        .Switch()
        .Where(x => x)
        .Select(x => Unit.Default); 
```

这是故障。

将值从 0 更改为 100 到`true`小于 50 时，`false`否则：

```
 .Select(x => x < 50) 
```

只保留`true`&之间的实际变化`false`：

```
 .DistinctUntilChanged() 
```

将值投影到延迟 10 秒的新 observable 中：

```
 .Select(x =>
            Observable.Delay(
                Observable.Return(x),
                TimeSpan.FromSeconds(10.0))) 
```

现在执行一个`.Switch()`- 如果一个新`x`的在延迟的 observable 之前出现，那么它会被忽略，因为一个新的延迟的 observable 即将到来：

```
 .Switch() 
```

仅选择`true`原始流低于 50 时的值：

```
 .Where(x => x) 
```

选择只是因为没有任何值`Unit.Default`的值流很奇怪：`true``false`

```
 .Select(x => Unit.Default); 
```

所以现在你有一个`IObservable<Unit>`当原始流产生的值小于 50 并且在 10 秒内没有产生大于或等于 50 的值时释放一个新值。

那是你想要的吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T09:11:13.293

我希望我不会错过任何东西，但我认为最简单的方法是：

```
BehaviorSubject<int> value = new BehaviorSubject<int>(0);

value.Select(v => v < 50).DistinctUntilChanged().Throttle(TimeSpan.FromSeconds(10))
.Where(x => x).Subscribe(b => DoSomething()); 
```

[Enigmativity](https://stackoverflow.com/questions/11744124/rx-how-to-subscribe-for-condition-state-but-only-when-this-state-doesnt-chan/11751666#11751666)的答案让我开始如何处理这个问题。谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T21:35:33.427

@GideonEngelberth 提出了一个很好的观点，即我的原始解决方案（如下）不起作用。我从@Enigmativity 中窃取了一些想法，但是在他没有实际使用“切换流”从源中检索值的地方，我已经采取了额外的步骤。

结果是这个扩展函数：

```
public static IObservable<T> WhereTimed<T>(this IObservable<T> source, Func<T,bool> pred, TimeSpan minTime)
{
    var published = source.Publish().RefCount(); // we make multiple subscriptions, let's share them

    var switches = published.Select(pred).DistinctUntilChanged();

    return published.Window(switches.Where(x => x), _ => switches.Where(x => !x))
                    .SelectMany(xs => xs.SkipUntil(Observable.Timer(minTime)).TakeWhile(pred));
} 
```

这使用为我们提供了一个流，当我们低于阈值 ( )`Select(pred).DistinctUntilChanged()`时触发一次，并且每当我们超过阈值 ( ) 时触发一次。`true``false`

`true`然后我们利用这个流在和之间的可观察对象上创建一个窗口`false`。我们跳过该新流的前 N ​​秒，并在我们仍然低于阈值时进行。

* * *

**原文：（**不工作）

这个问题分解为：

当流低于 50 时，跳过前 10 秒的值，然后返回流。这样做直到流超过 50。然后重新开始。

RX 的美妙之处在于它可以按原样翻译为相关功能。这是一个简单的扩展方法，可以做到这一点：

```
public static IObservable<T> WhereTimed<T>(this IObservable<T> source, Func<T,bool> pred, TimeSpan minTime)
{
    var published = source.Publish().RefCount(); // we make multiple subscriptions, let's share them

    var openers = published.Where(pred);            // start taking at this point
    var closers = published.Where(z => !pred(z));   // stop taking at this point

    return openers.SkipUntil(Observable.Timer(minTime))
                  .TakeUntil(closers)
                  .Repeat();
} 
```

这是一个显示它工作的测试：

```
var ws = Observable.Repeat(1,10);
var xs = Observable.Repeat(2,10);
var ys = Observable.Repeat(100,10);
var zs = ws.Concat(xs.Delay(TimeSpan.FromSeconds(2)).Concat(ys)).Repeat(5);

zs.WhereTimed(z => z <= 50, TimeSpan.FromSeconds(1)).Subscribe(Console.WriteLine); 
```

这里的`zs`流是：

```
(1 x 10) <2 second pause> (2 x 10) (100 x 10) [repeat 5 times] 
```

根据我们的规则，这应该会导致前 2 秒的暂停触发流，并显示该`2`值 10 次。`100`但是，当被击中时应该立即重置，然后在`1`播放时，没有足够的暂停`1`来显示任何内容。然后重复几次，只显示数字`2`。

# c# - WPF ValidatesOnDataErrors=False 不工作

> ID：11744127
> 
> 赞同：3
> 
> 时间：2012-07-31T15:52:44.733
> 
> 标签：c#, wpf, validation

我有自己的错误提供程序，不想使用任何内置的 WPF 东西。我有一个绑定到整数的文本框，并且我有 ValidatesOnExceptions=False 和 ValidatesOnDataErrors=False。但是当我在文本框中输入一个非整数时，我会得到一个红色边框。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:22:54.940

你有几个选择

1.  您可以将数据类型更改为字符串，以便默认转换器在转换数据时不会引发异常。
2.  您可以使用自定义值转换器，当您尝试将字符串哄骗为整数时不会引发异常

    ```
    class CustomConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return value.ToString();
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            int x = -1;
            Int32.TryParse(value.ToString(), out x);
            return x;
        }
    } 
    ```

3.  您可以将 UpdateSourceTrigger 更改为显式并精确控制数据绑定的更新时间。

4.  您可以使用表达式混合来编辑 TextBox 模板的本地副本并删除与绑定验证错误相关的所有内容

# php - 从 PHP 传递 JSON 的有效方法

> ID：11744129
> 
> 赞同：1
> 
> 时间：2012-07-31T15:52:57.960
> 
> 标签：php, sql, json

这是我拥有的 JSONArray：

```
 [{"items_id":"13","total":"1"}, {"items_id":"216","total":"0"},{"items_id":"16","total":"1"}] 
```

有时，每个对象都有两个以上的属性（属性？）。但我只是在这里展示原理。在 Java 中，我只需要抓取“总数”。我不需要“items_id”。

我认为它会显示出来，因为这是我在 PHP 中的 MySQL 查询：

```
$count_query_result=mysql_query("
SELECT items.items_id, 
COUNT(ratings.item_id) AS total
FROM `items`
LEFT JOIN ratings ON (ratings.item_id = items.items_id)
WHERE items.cat_id = '{$cat_id}'  AND items.spam < 5
GROUP BY items_id ORDER BY TRIM(LEADING 'The ' FROM items.item) ASC;"); 
```

这是我的 JSON 输出（我只显示了上面三个查询之一）：

```
print(json_encode(array($output,$output2,$output3))); 
```

我只想要用 JSON 编码的三个属性（三个输出变量中的每一个）。我想要属性“total”、“rate”和“item”。

所以我的问题是，我可以摆脱不需要的 items_id 属性吗？或者我什至需要？（我知道我需要在 SQL 中使用它来使查询工作——但我怎样才能在 JSONArray 中删除它？）

我在想，如果我有一个包含数百或数千个项目的列表，我可以通过仅输出我需要的 JSON 属性来节省一半的空间（和时间？）——这种想法正确吗？

**编辑**：根据要求提供更多代码：

```
while($row=mysql_fetch_assoc($count_query_result))
    $output[]=$row;
while($row=mysql_fetch_assoc($average_query_result))
    $output2[]=$row;
while($row=mysql_fetch_assoc($items_query_result))
    $output3[]=$row;

print(json_encode(array($output,$output2,$output3)));
mysql_close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:12:52.623

[http://php.net/unset](http://php.net/unset)

取消设置不需要的值，然后输出 json

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:01:05.227

我认为您的 SQL 查询中不需要它。如果您仅在查询的上下文中需要来自数据库的数据，则不需要`SELECT`它。尝试只做：

> `SELECT COUNT(*) FROM ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:57:42.437

使用 JSONObject 解析字符串。只需将字符串作为参数放在 JSONObject 的构造函数中即可。

```
jObject = new JSONObject(myString); 
```

在您可以从 JSONObject 中检索所有变量之后。

对于php方面：

使用[json_decode](http://www.php.net/manual/de/function.json-decode.php) end json_encode 在 json 和混合变量之间切换。混合变量后，删除不需要的内容并将其转换回 json。

# .net - 为什么 .net 中不包含 windows 常量？

> ID：11744130
> 
> 赞同：8
> 
> 时间：2012-07-31T15:53:00.300
> 
> 标签：.net, windows, constants

每次我看到调用 kernel32.dll 或 User32.dll 的代码时，即使在 MSDN 上，代码片段也总是要求开发人员将任何所需的常量（例如 WM_SETREDRAW = 11）硬编码到例程中。既然这些常量从不改变定义并且总是有一个标准定义，为什么 .net 不在某个地方提供它们呢？我觉得我们最终都会根据需要创建自己的常量库和标准 Windows dll 调用。这种重复工作似乎是浪费并且容易出错。

也许我看的不够仔细，他们都在某个地方，如果可以，有人可以提供他们的位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:16:47.687

我认为只有.Net团队才能提供实际答案，我们只能做出假设。

可能有很多原因。以下是一些猜测：

*   Win32 API 太容易出错了。许多 Win32 方法要求开发人员操作不安全句柄（通常表示为对象）`IntPtr`，这不是 .Net 的处理方式（例如，您应该使用 FileStream 而不是`CreateFile`// `ReadFile`/ `WriteFile`）`CloseHandle`
*   在 mscorlib 中添加整个 Win32 API 毫无意义，只有 0.1% 的开发人员实际使用它
*   微软更喜欢开发人员编写托管代码
*   .Net 框架旨在与平台无关。这就是为什么您会找到[`Environment.NewLine`](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)例如 ( `A string containing "\r\n" for non-Unix platforms, or a string containing "\n" for Unix platforms.`) 的原因。所以添加整个 Win32 API 是没有意义的。

Microsoft 在 namespace 中添加了一些特定于 Windows 的类[`Microsoft.Win32`](http://msdn.microsoft.com/en-us/library/gg145011)，但它非常有限，并且这些功能是必不可少的（注册表操作、文件对话框......）。

关于 pinvoke.net，我不会过分依赖它。我经常看到写得不好的方法声明会在 x64 系统上崩溃（`int`而不是`IntPtr`结构布局问题......）。另一个例子：[`WriteFile`](http://www.pinvoke.net/default.aspx/kernel32.writefile)方法声明不一致。`SafeHandle`与`IntPtr`...等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:25:37.747

原因不止一个，还有很多。我可以想到以下任何一项在决定不包括它们的过程中发挥了作用：

*   甚至在框架程序集上工作的团队也没有共享一组通用的 pinvoke 声明，每个团队都编写了自己的
*   Microsoft 仅维护一个单一的 winapi 源，即 Windows SDK
*   SDK 的维护者是一个不同的组，与任何在 .NET 上工作的组没有密切关系
*   不仅仅是一个 winapi，它严重依赖于目标 Windows 版本，这是您在构建 C/C++ 程序时指定的。这与 .NET 的本质背道而驰，它与版本无关
*   winapi 是巨大的，没有人会对部分版本感到满意
*   winapi 函数的 pinvoke 声明通常从其原始形式重写，以使使用更加简单。特别是采用不透明指针的函数，SendMessage() 是典型的例子
*   .NET 旨在确保您不必依赖 winapi。无论如何，您都可以使用自己的 pinvoke 声明来回填缺失的部分，但是这将在任何可以运行 .NET 程序的 Windows 版本上工作的保证丢失了。Windows 98 和 2000 仍然受到 2.0 的官方支持

您可以使用[Pinvoke 互操作助手](http://clrinterop.codeplex.com/releases/view/14120)工具。它提供的声明是从 Windows SDK 标头自动生成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:30:35.910

.NET 被设计成一个完整的生态系统。放入 Windows API 是一种 hack，不包括常量是 Microsoft 阻止它的方式。

# java - 尝试将按钮用作导航菜单时未处理的异常类型

> ID：11744133
> 
> 赞同：0
> 
> 时间：2012-07-31T15:53:05.117
> 
> 标签：java, android, button

我正在尝试将不同的按钮链接到不同的活动。所以实际上创建了一个导航菜单。

我正在尝试使用更少的代码，因此我正在尝试创建一个可以传递值的函数，以便动态识别按钮 ID 并为其提供指向活动的链接。

这是我的xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/nav1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="@string/nav1" />

    <Button
        android:id="@+id/nav2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/nav1"
        android:text="@string/nav2" />

</RelativeLayout> 
```

这是我的Java：

```
package com.example.myfirstapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Nav extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_nav);

        String nav1 = "nav1";
        String nav2 = "nav2";

        String MainActivity = "MainActivity";
        String SQLite = "SQLite";

        navButton(nav1, MainActivity);
        navButton(nav2, SQLite);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_nav, menu);
        return true;
    }

    private void navButton(String buttonId, String activityName){
        String bId = buttonId;
        final Class<?> aName = Class.forName(activityName);
        int resId = getResources().getIdentifier(bId, "id", getPackageName());
        Button b = (Button) findViewById(resId);
        OnClickListener onClickListener = new OnClickListener(){
            @Override
            public void onClick(View v) {
                Intent i = new Intent(Nav.this, aName);
                startActivity(i);
            }};
        b.setOnClickListener(onClickListener);
    }
} 
```

我在网上收到一个错误：

```
final Class<?> aName = Class.forName(activityName); 
```

它说：

```
Unhandled exception type ClassNotFoundException 
```

或者很简单，最好的方法是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:01:58.417

每当我使用 Class.forName 时，我都会传入一个限定名称，例如“mypackage.myclass”。我不确定它是否适用于不合格的名称。

无论如何，为什么要传入字符串然后执行forName？为什么不更改签名以获取 Class 对象并传入 MainActivity.class 等？然后你会在编译时而不是运行时捕获任何丢失的类或拼写错误。

*更新以回应评论*

```
public class Nav extends Activity { 

  @Override 
  public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.activity_nav); 

    navButton("nav1", MainActivity.class); 
    navButton("nav2", SQLite.class); 
} 

@Override 
public boolean onCreateOptionsMenu(Menu menu) { 
    getMenuInflater().inflate(R.menu.activity_nav, menu); 
    return true; 
} 

private void navButton(String buttonId, Class aName){ 
    String bId = buttonId; 
    // aName now passed in so doesn't need to be looked up
    ... etc ...
} 
} 
```

我认为上面应该编译并运行。我没有尝试过，但我做过类似的事情。根据你的包的设置方式，你可能需要导入 MainActivity 和 SQLite，或者完全质量它们，以便获取 .class。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:57:31.283

您是否在应用程序中定义了活动`AndroidManifest.xml`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:02:57.493

您没有捕获已检查的异常`ClassNotFoundException`。您需要将相关代码包装在 try/catch 块中，例如

```
try {
    final Class<?> aName = Class.forName(activityName);
    //etc...
} catch (ClassNotFoundException e) {
    //Do whatever cleanup you have to do in case this situation occurs.
} 
```

不过，这似乎是一种设置点击侦听器的异常尴尬的方式。为什么您不能只将类本身传递给您的 navButton 方法而不是进行反射（如果有替代方法，这应该始终是最后的手段）？

# python - 从大型 CSV (1GB) 中删除逗号

> ID：11744136
> 
> 赞同：8
> 
> 时间：2012-07-31T15:53:14.370
> 
> 标签：python, matlab, csv, comma

我有一个大的 CSV 文件 (1GB)，我想从中删除逗号。数据都是正整数。我尝试过的方法包括使用空格作为分隔符的 dlmwrite，但输出随后以十进制格式输出。我也尝试过使用 fprintf 命令，但后来我失去了矩阵的形状（即所有数据都出现在一行或一列中）。

因此，

有没有一种简单的方法可以从 CSV (input.txt) 中读取：

```
1, 2, 3, 4, 5
2, 3, 4, 5, 6 
```

然后以如下形式输出到文本文件（output.txt）：

```
1 2 3 4 5
2 3 4 5 6 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T16:21:03.897

在 Python 中，如果格式真的那么简单（并且每个逗号后面已经有一个空格）：

```
with open("infile.csv") as infile, open("outfile.csv", "w") as outfile:
    for line in infile:
        outfile.write(line.replace(",", "")) 
```

如果您不能确定空格：

```
import re
with open("infile.csv") as infile, open("outfile.csv", "w") as outfile:
    for line in infile:
        outfile.write(re.sub(r"\s*,\s*", " ", line)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:09:14.317

就个人而言，我喜欢使用 sed，一个替换字符串的命令行程序。

此应用程序可在 linux 上使用，也可通过 cygwin 安装在 Windows 中使用。

使用

```
sed -i 's/,/ /g' filename 
```

文件中的所有逗号都替换为空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:44:12.487

python 有一个`csv`用于 CSV 文件 i/o 的模块。

```
import csv
with open("input.txt") as infile:
    with open("output.txt", "w") as outfile:
        for line in csv.reader(infile):
            outfile.write(' '.join(line)+'\n') 
```

同样matlab有一个csvread函数

```
M = csvread('input.txt');
dlmwrite('output.txt', M, 'delimiter', ' ', 'precision', '%ld'); 
```

但是这段代码有问题。首先，您以单个大块读取文件，而不是逐行读取：您可能会耗尽内存。Second`csvread`总是返回一个`double`数组，因此在读取大整数时可能会丢失精度。最后，如果`input.txt`有可变数量的列，则矩阵`M`为零填充。

强烈推荐python解决方案！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:02:27.240

您可以使用 fgetl 从文件描述符中逐行读取，如下所示：

```
fid=fopen('file.csv');
if (fid==-1)
    return
end
sl=fgetl(fid);        
while (~feof(fid))
    sl=fgetl(fid);  
    icol=find(sl==',');
end  

fclose(fid); 
```

在 sl 中，您可以将 , 替换为空格并再次写入磁盘

# cakephp - cake.bat 的问题

> ID：11744137
> 
> 赞同：0
> 
> 时间：2012-07-31T15:53:24.090
> 
> 标签：cakephp, windows-shell

我是 php 和蛋糕 php 的新手。我正在尝试在 Windows 命令提示符中烘焙一些 cakephp 代码。当我在 C:\xampp\htdocs\cake\lib\Cake\Console 中执行命令“cake bake”时，我没有得到任何结果，只是一个闪烁的光标。有没有其他人发生过这种情况或有任何可能有用的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:01:45.730

转到目录`C:\xampp\htdocs\cake\app`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:39:56.460

不知道你用的是哪个版本的Windows。但是，您必须访问**环境变量**以任何方式访问它。在Windows7中：右键单击我的电脑->属性->单击高级系统设置->最后一个按钮环境变量在那里，单击它从系统变量列表中选择路径，然后按编辑按钮。您将看到一行代码，在其末尾添加如下内容：

```
;C:\xampp\htdocs\cakephp\cake\console\;C:\xampp\php 
```

第一个路径是找到 cake.bat 文件的路径 第二个路径是找到 php.exe 的路径。

重新启动您的计算机，您会发现 cake bake 在您想要的任何目录下都可以正常工作。

# html - 基于用户屏幕分辨率的网页尺寸

> ID：11744140
> 
> 赞同：0
> 
> 时间：2012-07-31T15:53:37.557
> 
> 标签：html, css

现在我已经确定了我希望我的网站的外观，我需要一种方法让它在任何屏幕分辨率上看起来都很好。为了让我的生活更轻松，我在设计时设置了静态尺寸。尺寸设置为 1040x690。在家里我使用 1920x1080 分辨率，而我老板的笔记本电脑是 800x600。该网站看起来太大或太小。

我意识到我可以在我的 CSS 中设置百分比来解决这个问题。问题是网页上的图像根据我的设计尺寸大小不同。如何使我的网站的尺寸动态化，而不会因为图片的大小使其看起来很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:55:40.267

您可以尝试使用**媒体查询**。

例如，像这样

```
 @media only screen and (max-width: 1023px) and (min-width: 768px) {
         div#container {width: 768px;}

        } 
```

试试这个链接

[http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries) http://www.danstorm.com/dan-storm-article-css-15.html

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:59:34.967

这称为*响应式设计*，通常用于重新格式化移动设备的布局。不同尺寸的格式化通常使用*媒体查询*来完成，媒体查询根据用户的屏幕尺寸应用不同的样式表。

一般来说，网站不会为非移动版本的不同分辨率制作不同的版本，而是坚持常用的分辨率：一般为 960 宽。一旦您开始支持不同尺寸的图像，支持每种分辨率所增加的复杂性通常是不值得的。

简而言之，您可以支持各种分辨率，但工作量要大得多。考虑你的听众，让它为大多数人服务。

98% 的人都有一台大于 1024 宽的显示器，所以你的老板是个奇怪的人。

见： http: [//gs.statcounter.com/#resolution-ww-monthly-201106-201206](http://gs.statcounter.com/#resolution-ww-monthly-201106-201206)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:57:02.683

您可以使用名为 Foundation 的 CSS 框架和原型设计。您可以在以下 URL 找到它：http: [//foundation.zurb.com/](http://foundation.zurb.com/)

它将为您的网页提供灵活且易于使用的设计，适用于许多设备和分辨率。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-10T18:58:25.903

是的，您可以通过CSS 的*scale*属性缩放您的*html*分区（即 HTML 标记覆盖的区域 - 整个站点）来做到这一点。CSS 提供名为 scale 的属性，可以缩放文档中任何元素的大小（宽 x 高）。

 *例如，

`<div id ="t_div"></div>`

现在我们可以按如下方式缩放分区的大小：

`#t_div { -moz-transform:scale(1.5,1.5); //for Firefox }`

上面的代码会将除法的大小增加 x1.5 。您可以使用 CSS 的此属性来缩放您网站的主要标签（<html>），以根据屏幕大小调整大小。下面给出的链接以非常详尽的方式描述了如何将此*比例*属性动态应用于您的站点。这里看看这个。[http://khuntronak.blogspot.com/2013/12/how-to-fixsolve-screen-resolution.html](http://khuntronak.blogspot.com/2013/12/how-to-fixsolve-screen-resolution.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-31T15:56:37.287

尝试在头部添加这个：<meta name="viewport" content="width=device-width">*

# php - 忘记了 PHP MySQL 的密码 URL 令牌

> ID：11744141
> 
> 赞同：0
> 
> 时间：2012-07-31T15:53:42.077
> 
> 标签：php, mysql, passwords, token, sha1

我是 PHP 新手，到目前为止创建了一个登录、注册和忘记密码，目前用户是从 MySQL 表中发送密码的。我现在已经使用 sha1 加密了密码。我目前正在编写代码：

当用户点击忘记密码链接时，他们输入用户名和电子邮件地址（已验证）。

我目前发现很难在已发送的电子邮件中向他们发送 url 链接以将他们引导到要重置的页面。

任何帮助将不胜感激（代码片段、教程、方法链接等。）

塔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T16:01:32.853

1.  您甚至不应该存储用户密码的（未加盐的）哈希值：您应该首先生成一个随机字符串（“盐”），将其与密码连接，对结果进行哈希处理（使用 SHA1 或您喜欢的任何算法）并存储数据库中的哈希和盐。如果攻击者能够访问您数据库中的哈希值，这将击败预先计算的字典（“彩虹表”）攻击。

2.  完成此操作后，您也不应该将用于密码重置的临时令牌存储在数据库中：如果攻击者可以访问您的用户表，他们只需要填写您的“我忘记密码”表格并从数据库，以便在没有看到生成的电子邮件的情况下重置该用户的密码。因此，令牌被称为“密码等价物”，应该以与密码本身完全相同的方式进行保护：加盐和散列。

3.  存储了重置令牌的加盐哈希后，您现在可以在 URL 的查询字符串中向您的用户发送带有用户 ID 和重置令牌的链接，例如`http://www.example.com/resetpassword.php?user=235747&token=347659864124567532256`.

4.  在点击该链接后，提供的用户和令牌将可用于您的 PHP 脚本，如`$_GET['user']`和`$_GET['token']`; 然后，您可以从数据库中检索盐，与提供的令牌连接，计算预期的哈希值并与数据库记录中的哈希值进行比较。如果它们匹配，则您确信用户收到了您发送的电子邮件，然后您可以提示他们输入所需的新密码。

# php - 在 SQL 中使用 PHP 变量

> ID：11744162
> 
> 赞同：3
> 
> 时间：2012-07-31T15:54:39.710
> 
> 标签：php, mysql, sql, variables

我正在尝试在 INSERT SQL 语句中使用 PHP 变量。我已经看到了以前的答案，但无法让我的工作。这是代码..

```
mysql_query("INSERT INTO message (message_id, from, content) values ('', " . $uid . ", 'test message content')"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T15:55:53.827

主要问题是这`from`是一个[保留字](http://dev.mysql.com/doc/refman/5.6/en/reserved-words.html)，应该在反引号中。

```
mysql_query("INSERT INTO message (message_id, `from`, content) VALUES ..."); 
```

但我也建议您停止使用已弃用的`mysql_*`功能。我建议您查看 PDO 和带参数的预处理语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:56:54.467

如果 message_id 是主键，除非您有值，否则您不需要将其包含在查询中。

```
mysql_query("INSERT INTO message (`from`, `content`) values (" . $uid . ", 'test message content')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:58:23.433

您的查询中至少存在三个问题。其中两个是语法错误，一个是巨大的漏洞。

要使查询工作，您应该将其编写如下：

```
mysql_query("INSERT INTO message (message_id, `from`, content) values ('', '" . $uid . "', 'test message content')");` 
```

以下是错误摘要：
- 正如另一位用户所指出的，“from”是一个关键字，您不应该使用它来命名表列。如果你真的想使用这样的名字，你必须在查询中使用反引号来表示它。
- $uid 的值应该用单引号括起来。
- 第三个也是最重要的错误是您的查询容易受到[SQL Injection](http://en.wikipedia.org/wiki/SQL_injection)的攻击。您应该使用准备好的语句，这将保护您免受此类攻击。

# grails - 无法将 grailsApplication 注入服务

> ID：11744169
> 
> 赞同：2
> 
> 时间：2012-07-31T15:54:50.020
> 
> 标签：grails, dependency-injection

我在将 grailsApplication 注入我在 Grails 2.1 中创建的服务时遇到问题。我已经构建了一个简单的测试应用程序（希望我能解决这个问题，然后将修复移植到我的真实应用程序），它由一个控制器、视图和服务组成。

控制器如下所示：

```
class IncidentController {

    static allowedMethods = [save: "POST", update: "POST", delete: "POST"]

    def incidentService

    def index() {
        incidentService.serviceMethod()
        redirect(action: "list", params: params)
    }

    // Other stuff
} 
```

我的服务包括以下内容：

```
class IncidentService {

def grailsApplication

    def serviceMethod() {
        System.out.println("Grails application: " + grailsApplication)
    }
} 
```

我在我的 resources.groovy 中声明了 IncidentService 的注入，如下所示：

```
beans = {
    incidentService(org.myorg.test.IncidentService)
} 
```

现在我在网上阅读的所有内容都表明这应该可以正常工作，并且我应该能够通过服务中的 grailsApplication 访问我的配置。但是，每当我尝试时， grailsApplication 都是空的。如果我将 a 添加`ConfigObject`到服务并通过`grailsApplication.getConfig()`从控制器传递来设置它，它工作正常。

谁能指出我正确的方向以找出问题所在？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T18:03:39.963

您不必将 IncidentService 添加到 resources.groovy。如果该服务在 grails-app/services 下，它将为您完成。删除它，然后再试一次。我认为这可能是你的问题

# c# - 单元测试 TypeInitializationException 错误

> ID：11744177
> 
> 赞同：5
> 
> 时间：2012-07-31T15:55:43.390
> 
> 标签：c#, unit-testing

我正在对表单调用 Tester.cs 中的函数进行单元测试，以下是错误：

```
Error   7/31/2012 10:43:11 PM   One of the background threads threw exception: 
System.TypeInitializationException: The type initializer for 'Tester.Tester' threw an exception. ---> System.ArgumentNullException: Value cannot be null.
Parameter name: String
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.Int32.Parse(String s)
   at Tester.Tester..cctor() in E:\Incubator\Tester\Tester\Tester.cs:line 35
   --- End of inner exception stack trace ---
   at Tester.Tester.Dispose(Boolean disposing)
   at System.ComponentModel.Component.Finalize()    MY-PC 
```

第 35 行是一个代码，它基本上从配置文件中检索值并将其转换为整数：

```
private static int _part = int.Parse(ConfigurationManager.AppSettings["Part"]); 
```

错误是什么？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:58:17.067

可能性是`ConfigurationManager.AppSettings["Part"]`返回null。Hense 解析异常。

您的单元测试项目是否在其配置中定义了应用程序设置？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T15:58:31.417

您应该将 app.config（或 web.config）文件复制到测试项目中。否则测试项目找不到它。请记住，配置与主机进程有关，而不是与 dll 本身有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:01:56.280

将断点放在第 35 行，有一些不应该是 null 的东西...... Null 值无法解析为 INT....

确保配置文件正确放置在运行应用程序的目录中

# python - 在 ipython 中运行 python 脚本

> ID：11744181
> 
> 赞同：144
> 
> 时间：2012-07-31T15:55:55.490
> 
> 标签：python, path, ipython

是否可以从 ipython 内部运行 python 脚本（不是模块）而不指示其路径？我试图设置 PYTHONPATH 但它似乎只适用于模块。我想执行

```
%run my_script.py 
```

不在包含该文件的目录中。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2015-03-12T16:44:31.137

从“my_script.py”的目录中，您可以简单地执行以下操作：

```
%run ./my_script.py 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-02-11T19:12:42.043

### 如何在 Ipython 中运行脚本

```
import os
filepath='C:\\Users\\User\\FolderWithPythonScript' 
os.chdir(filepath)
%run pyFileInThatFilePath.py 
```

应该这样做

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-31T18:13:42.920

魔术`%run`有一个参数`file_finder`，用于获取要执行的文件的完整路径（请参见[此处](https://github.com/ipython/ipython/blob/master/IPython/core/magics/execution.py#L322)）；正如您所注意到的，它只是在当前目录中查找，并在必要时附加“.py”。

似乎没有办法*从*魔术中指定要使用哪个文件查找器`%run`，但是没有什么可以阻止您定义自己的魔术命令，该命令`%run`使用适当的文件查找器调用。

作为一个*非常*`file_finder`讨厌的黑客，你可以用你自己的覆盖默认值：

```
IPython.core.magics.execution.ExecutionMagics.run.im_func.func_defaults[2] = my_file_finder 
```

老实说，按照 IPython API 的变化速度，这很可能会继续发挥作用，就像定义自己的魔法一样。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-07-31T16:02:39.673

在 python 中，模块和脚本没有区别；您可以执行脚本和模块。该文件必须在 pythonpath AFAIK 上，因为 python 必须能够找到有问题的文件。如果从目录执行 python，则该目录会自动添加到 pythonpath。

请参阅[从另一个 Python 脚本调用 Python 脚本的最佳方法是什么？](https://stackoverflow.com/questions/1186789/what-is-the-best-way-to-call-a-python-script-from-another-python-script)有关模块与脚本的更多信息

还有一个内置函数 execfile(filename) 可以做你想做的事

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-07-06T21:41:50.737

不完全是您问题的答案，但您可以在脚本执行结束时使用 ipython 的`-i`参数进入 ipython：

```
ipython -i my_script.py 
```

在脚本结束时，您将进入 ipython 提示符，脚本的变量可供您使用，就像`python -i`.

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-04-16T16:10:13.357

对于 Python 3.6.5

```
import os
os.getcwd()
runfile('testing.py') 
```

# gwt - 带有子行的 GWT 2.5 DataGrid SelectionModel

> ID：11744198
> 
> 赞同：6
> 
> 时间：2012-07-31T15:56:54.660
> 
> 标签：gwt, celltable, selectionmodel, gwt-2.5

用于[`TableBuilder`](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/cellview/client/DefaultCellTableBuilder.java?r=10791)创建行和子行时，选择模型未按预期工作。当单击子行的复选框时，该行未被选中，但是，父行被选中。

我试图重载[`onBrowserEvent`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/cell/client/CheckboxCell.html#onBrowserEvent%28com.google.gwt.cell.client.Cell.Context,%20com.google.gwt.dom.client.Element,%20java.lang.Boolean,%20com.google.gwt.dom.client.NativeEvent,%20com.google.gwt.cell.client.ValueUpdater%29)以[`CheckboxCell`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/cell/client/CheckboxCell.html)手动处理选择，但似乎 DataGrid 本身在按下复选框单元格时触发了选择事件。

如果行和子行来自同一类型，如何添加支持行和子行的选择模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T04:47:20.677

```
@Override
public void onBrowserEvent(Context context, Element elem, final T object,
        NativeEvent event) {
    // The provided row is always the root row, so we need to find the
    // correct one when a sub row was edited
    actualIndex = context.getSubIndex();
    actualObject = object;
    if (0 != context.getSubIndex() && object instanceof RowDTO) {
        actualIndex = context.getSubIndex();
        actualObject = (T) ((RowDTO) object).getChild(actualIndex - 1);
        context = new Context(context.getIndex(), context.getColumn(),
                actualObject, actualIndex);
    }

    ValueUpdater<C> valueUpdater = (getFieldUpdater() == null) ? null
            : new ValueUpdater<C>() {
                @Override
                public void update(C value) {
                    getFieldUpdater().update(actualIndex, object, value);
                }
            };

    getCell().onBrowserEvent(context, elem, getValue(actualObject), event,
            valueUpdater);
} 
```

# jquery - 超大插件出现在身体背景后面

> ID：11744199
> 
> 赞同：1
> 
> 时间：2012-07-31T15:56:55.963
> 
> 标签：jquery, css, background, supersized

我的网站上的 Supersized jQuery 插件有问题，我的插件工作正常，但没有图像显示。他们似乎被困在身体背景的“后面”。

这是 jsfiddle [http://jsfiddle.net/DSW5X/](http://jsfiddle.net/DSW5X/)我已经验证了 html 和 css，没有什么明显的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:09:09.763

添加css规则：

```
body {background:transparent !important;} 
```

你是这个意思吗？[**演示**](http://jsfiddle.net/ed9Xr/)

# css - 子 div 不随内容扩展

> ID：11744200
> 
> 赞同：-1
> 
> 时间：2012-07-31T15:56:58.680
> 
> 标签：css, layout, html

我已经在stackoverflow中查看了一些答案，但没有成功，所以让我在这里发布我的链接：

[http://www.copycopy.it/index.php?go=how](http://www.copycopy.it/index.php?go=how)

例如，在此页面上，白色 div (#body_content_container) 应随内容扩展，但事实并非如此。此页面也是如此：http: [//www.copycopy.it/index.php?go=termsAndConditions](http://www.copycopy.it/index.php?go=termsAndConditions)

知道我在这里做错了什么吗？我已经尝试`clear:both;`过儿童div，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:03:16.643

尝试移除高度：100%；从你的元素。如果您希望它扩展到内容的长度，您不想指定高度。此外，无论如何它只会扩展到窗口的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:35:19.357

1.  `height: 85%;`从中删除`#content_text`。
2.  将`position:absolute;`和`position:relative;`替换为`float:left;`。
3.  替换任何`top`,`left`或`padding`。`margin`

例如 ：

```
#columnHeader {
    float: left;
    text-align: center;
    width: 940px;
}

#column1 {
    float: left;
    margin: 0 10px 0 0;
    text-align: justify;
    width: 285px;
}

#column2 {
    float: left;
    margin: 0 0 0 40px;
    text-align: justify;
    width: 275px;
}

#column3 {
    float: left;
    margin: 0 0 0 10px;
    text-align: justify;
    width: 320px;
} 
```

# android - Android Sensor.TYPE_ORIENTATION 完美运行，加速度计和磁力计无法获得相同的结果

> ID：11744201
> 
> 赞同：2
> 
> 时间：2012-07-31T15:56:59.127
> 
> 标签：android, android-sensors

我正在尝试使用此非弃用版本的代码来获取方向。但是，我无法让它像只使用已弃用的 Sensor.TYPE_ORIENTATION 一样顺畅和完美地工作。我错过了什么吗？

//老的

```
@Override
public void onSensorChanged(SensorEvent arg0) {
    m_lastYaw = arg0.values[0];
    invalidate();
} 
```

//新的

```
@Override
public void onSensorChanged(SensorEvent event) {
    if (event.accuracy == SensorManager.SENSOR_STATUS_UNRELIABLE){
        return;
    }

    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
        System.arraycopy(event.values, 0, m_lastAccels, 0, 3);
    }
    if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD) {
        System.arraycopy(event.values, 0, m_lastMagFields, 0, 3);
    }

    if (SensorManager.getRotationMatrix(m_rotationMatrix, null, m_lastAccels, m_lastMagFields)) {
        SensorManager.getOrientation(m_rotationMatrix, m_orientation); 

        m_lastYaw = (float)Math.toDegrees(m_orientation[0]);
        invalidate();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T22:09:55.327

我使用了我[在这里](https://stackoverflow.com/a/18299336/2210921)提出的代码，它只有在手机（三星 Galaxy S3）平放时才能正常工作。但这只是一个开始：它的效果并不好`Sensor.TYPE_ORIENTATION`也不差。

# c# - MVC 3 传统数据库或数据集到下拉列表

> ID：11744204
> 
> 赞同：0
> 
> 时间：2012-07-31T15:57:09.593
> 
> 标签：c#, sql, asp.net-mvc, ms-access

我有一些遗留代码，我正在慢慢迁移到 C# MVC。如何从数据表或数据集创建下拉列表？我不想创建属性并遍历列表，因为我有太多古老的 MS Access 查询要处理。

控制器：

```
 using (SqlConnection Connection = new SqlConnection(ConnectionString))
        {
            string commandstring = "select column1 from table1";
            SqlCommand command = new SqlCommand(commandstring, Connection);
            Connection.Open();
            SqlDataAdapter da = new SqlDataAdapter();
            DataSet ds = new DataSet();
            da.SelectCommand = command;
            da.Fill(ds, "data1");
            Connection.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:02:46.777

正如 George 所说，我建议将域逻辑移动到数据访问层并使用实体来保存从查询返回的对象。您可以使用[Dapper](http://code.google.com/p/dapper-dot-net/)，它允许您使用原始 SQL 查询并将结果映射到模型。其性能与`SqlDataReader`. 这是一个扩展方法，它将获取模型列表并将它们转换为下拉列表。

```
public static IEnumerable<SelectListItem> ToSelectList<T, TTextProperty, TValueProperty>(this IEnumerable<T> instance, Func<T, TTextProperty> text, Func<T, TValueProperty> value, Func<T, bool> selectedItem = null)
{
    return instance.Select(t => new SelectListItem
    {
        Text = Convert.ToString(text(t)),
        Value = Convert.ToString(value(t)),
        Selected = selectedItem != null ? selectedItem(t) : false
    });
} 
```

然后你可以使用类似的代码......

```
var list = SomeQuery();
list.ToSelectList(x => x.Name, x => x.id, x => x.id == selectedId); 
```

# c++ - 在我的 C++ 程序中构建错误

> ID：11744205
> 
> 赞同：1
> 
> 时间：2012-07-31T15:57:09.707
> 
> 标签：c++, netbeans, build

这是我的第三个 C++ 应用程序，所以我是初学者。请看下面的代码

主文件

```
#include<iostream>
#include <string>
#include "GradeBook.h"

using namespace std;

int main()
{
    GradeBook myGradeBook1("Java");
    GradeBook myGradeBook2("C++");

    cout << "Course Name is: " << myGradeBook1.getCourseName() << endl;
    cout << "Course Name2 is: " << myGradeBook2.getCourseName() << endl;
} 
```

成绩簿.h

```
#include <iostream>
#include <string>

using namespace std;

class GradeBook
{
private:
    string courseName;

public:

    GradeBook(string name)
    {
        setCourseName(name);
    }

    void setCourseName(string name)
    {
        courseName = name;
    }

    string getCourseName()
    {
        return courseName;
    }

    void displayMessage()
    {
        cout << "Welcome to " << getCourseName() << endl;
    }
}; 
```

现在，当我运行程序时（我使用 netbeans，编译器是 cygwin），它给出了以下错误：

```
> "/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS=
> .build-conf make[1]: 进入目录
> `/cygdrive/c/Users/Yohan/Documents/NetBeansProjects/LearnCPlusPlus'
> "/usr/bin/make" -f nbproject/Makefile-Debug.mk
> dist/Debug/Cygwin-Windows/learncplusplus.exe make[2]: 进入
> 目录
> `/cygdrive/c/Users/Yohan/Documents/NetBeansProjects/LearnCPlusPlus'
> mkdir -p 构建/调试/Cygwin-Windows rm -f
> 构建/调试/Cygwin-Windows/ClassWithPara.od g++ -c -g -MMD -MP -MF
> 构建/调试/Cygwin-Windows/ClassWithPara.od -o
> 构建/调试/Cygwin-Windows/ClassWithPara.o ClassWithPara.cpp
> ClassWithPara.cpp:28:4: 警告：文件 mkdir -p 末尾没有换行符
> dist/调试/Cygwin-Windows g++ -o
> dist/调试/Cygwin-Windows/learncplusplus
> 构建/调试/Cygwin-Windows/IfStatement.o
> 构建/调试/Cygwin-Windows/ClassWithConstructors.o
> 构建/调试/Cygwin-Windows/HelloWorld.o
> 构建/调试/Cygwin-Windows/ClassWithSetters.o
> 构建/调试/Cygwin-Windows/ClassWithPara.o
> 构建/调试/Cygwin-Windows/FirstClass.o
> 构建/调试/Cygwin-Windows/AddIntegers.o  
> nbproject/Makefile-Debug.mk:68：目标配方
> `dist/Debug/Cygwin-Windows/learncplusplus.exe' 失败 make[2]: 离开
> 目录
> `/cygdrive/c/Users/Yohan/Documents/NetBeansProjects/LearnCPlusPlus'
> nbproject/Makefile-Debug.mk:65：目标“.build-conf”的配方失败
> make[1]: 离开目录
> `/cygdrive/c/Users/Yohan/Documents/NetBeansProjects/LearnCPlusPlus'
> nbproject/Makefile-impl.mk:39：目标“.build-impl”的配方失败
> /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../libcygwin.a(libcmain.o)：在
> 功能“主要”：
> /usr/src/debug/cygwin-1.7.16-1/winsup/cygwin/lib/libcmain.c:39:
> 未定义对 `_WinMain@16' collect2 的引用：ld 返回 1 退出
> 状态 make[2]: *** [dist/Debug/Cygwin-Windows/learncplusplus.exe]
> 错误 1 ​​make[1]: *** [.build-conf] 错误 2 make: *** [.build-impl]
> 错误 2
>
>
> BUILD FAILED（退出值2，总时间：11s）
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:47:20.940

那里唯一的具体信息说

```
ClassWithPara.cpp:28:4: warning: no newline at end of file mkdir -p 
```

您是否尝试过在该文件末尾添加换行符？

（从技术上讲，这是必需的，尽管并不总是强制执行。）从您给出的输出中不清楚这是否真的只是一个警告，或者它是否被视为错误。

# ms-word - 用户填写 Adob e 表单

> ID：11744206
> 
> 赞同：0
> 
> 时间：2012-07-31T15:57:10.607
> 
> 标签：ms-word, adobe

我正在使用 Adob​​e 生命周期设计器在我的应用程序中创建文档....我的所有文档都是 Word，我使用 Adob​​e 生命周期设计器中的导出到选项，我得到了转换的文档，现在我需要一个用户填写导出的文档..所以有人可以建议我怎么做，我们使用后面的java脚本....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:16:07.287

您可以让他们在 Adob​​e 领域填写表单，然后使用脚本方法 exportData 将表单数据作为 XML 获取，然后将该 XML 作为自定义 xml 部分注入到您的 Word docx 中。

从那里，Word 将在绑定到它的任何内容控件中使用 XML。

# javascript - JS 框自动关闭，可能是目录重写问题？

> ID：11744208
> 
> 赞同：1
> 
> 时间：2012-07-31T15:57:14.450
> 
> 标签：javascript, ruby-on-rails, url-rewriting

当尝试在 fatfreecrm 或任何触发相同类似链接的内容中创建新活动时，它会在 1-2 秒后再次强制关闭该框。

我刚刚按照说明安装了 FFCRM，所以我不知道可能是什么问题。

我正在从 apache2 的子目录运行 fatfreecrm。主目录安装了 wordpress 并启用了重写引擎。

我注意到点击链接时地址栏没有显示完整路径（见视频）。

会不会和我的重写有关？我通过添加关闭了这个目录

```
RackBaseURI /ffcrm
RailsEnv development
<Directory /home/petralian.com/public_html/ffcrm>
Options +FollowSymlinks
Options -MultiViews
RewriteEngine Off
</Directory> 
```

按照我的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:39:26.083

将应用程序移至其自己的子目录并将其从 cloudflare 中删除可解决此问题。它与以下内容有关：

错误：不推荐使用“throw $continue”，在 cloudflare.min.js 中使用“return”代替（第 37 行）

# mysql - 格式化 MySQL 日期

> ID：11744210
> 
> 赞同：-1
> 
> 时间：2012-07-31T15:57:21.297
> 
> 标签：mysql

如果我有一个如下的 MySQL 日期`2012-07-29 22:02:50`，并且我希望将其格式化为`Jul 29 2012`，有没有一种简单的方法可以使用 SELECT 语句来做到这一点？

目前我的 sql 语句如下所示：

```
$rs = mysql_query("SELECT Id, DATE_FORMAT(Date,\"%Y-%m-%d\") AS Date FROM infoTable WHERE credential = '$credential'"); 
```

这输出`2012-07-29`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:00:14.273

试试这个：

```
 $rs = mysql_query("SELECT Id, DATE_FORMAT(Date,\"%b %e %Y\") AS Date FROM infoTable WHERE credential = '$credential'"); 
```

[来源](http://davidwalsh.name/format-date-mysql-date_format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:01:19.887

将 DATE_FORMAT 表达式更改为：

```
DATE_FORMAT(Date,\"%b %e %Y\") 
```

[您可以在DATE_FORMAT](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)参考页面查看所有可能的格式选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:02:16.330

```
$rs = mysql_query("SELECT Id, DATE_FORMAT(Date,\"%b %e %Y\") AS Date FROM infoTable WHERE credential = '$credential'"); 
```

[http://www.w3schools.com/sql/func_date_format.asp](http://www.w3schools.com/sql/func_date_format.asp)

# c++ - 通过反射在 XML 中的 C/C++ 头文件中定义的嵌套结构/联合

> ID：11744216
> 
> 赞同：0
> 
> 时间：2012-07-31T15:57:40.567
> 
> 标签：c++, visual-c++, reflection

我有一个表示如下的结构：（示例）

```
struct struct3
{
   struct structchild4
   {  
      float child5;
   } child6;
   unsigned int child7;
}; 
```

我希望它在 XML 中表示如下：

```
<tag1= "struct3">
        <name>struct3</name>
        <input_type>byte</input_type>
        <method></method>
        <tag_ref = "structchild4">
            <name>child6</name>
        </tag_ref>
        <tag2= "child7">
            <name>child7</name>
            <len>4</len>
            <value> </value>
        </tag2>
    </tag1> 
```

我遵循的方法是将其转换为 gccXML 格式，然后使用 Visual C++ 对其进行解析。我使用 xerces-c DOM 解析器。

有人可以建议如何去做吗？对此进行温和的反弹。无论如何我可以发送我的代码吗？它巨大并且超过了字符限制。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:02:28.537

[如您所知，gccXML 有一些重大限制，这里](https://stackoverflow.com/questions/526797/good-tools-for-creating-a-c-c-parser-analyzer)描述了许多开源 C++ 解析器。不幸的是，C++ 中的 relfection 对编码人员来说是很多工作（但仍然是一个很好的练习），我最喜欢的方法是使用[clang python API](http://eli.thegreenplace.net/2011/07/03/parsing-c-in-python-with-clang/)，clang 是一个优秀的 C++ 解析器，但由你决定如何处理这些信息（通过输出到 XML 或 JSON）。曾经有一个[用于 Clang 的 XML 打印机，](https://stackoverflow.com/questions/5309405/can-i-get-an-xml-ast-dump-of-c-c-code-with-clang-without-using-the-compiler)但不幸的是我不相信它仍然处于活动状态，不过您也许可以使用早期版本。祝你好运！

# eclipse - 无法使用 Eclipse (EGit) 从 Github 获取或提取，因为存储了错误的密码

> ID：11744224
> 
> 赞同：12
> 
> 时间：2012-07-31T15:57:54.857
> 
> 标签：eclipse, github, egit

我第一次使用 Eclipse (EGit) 从 Github 输入拉取请求的密码时，我可能打错了密码。现在它会自动使用这个密码，每次我尝试拉/取或推到上游时，我都会收到一个未经授权的错误。但是我在任何地方都找不到如何修复错误的凭据。有谁知道吗？

![在此处输入图像描述](../Images/37e9f5e626fd769b732f51caf0ba7794.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T17:57:57.383

我认为`Preferences > General > Security > Secure Storage > Clear Passwords`这清除了一切。或者您也可以有选择地从`<user directory>\.eclipse\org.eclipse.equinox.security\secure_storage`

# python - 如何测试 gevent 的套接字导致超时的假设？

> ID：11744225
> 
> 赞同：0
> 
> 时间：2012-07-31T15:57:58.253
> 
> 标签：python, sockets, gevent, evented-io

我有使用 gevent 的复杂 python 程序。

我一直遇到这个可怕的问题，它在读取套接字时超时了几分钟。在这些情节中，我重试了多次，但仅在几分钟后才成功。

我非常确定在套接字上监听的那个人仍在正常工作，因为在其中一个情节中，因为我可以从另一个未发生事件的进程中读取该套接字。

这可能是一个[已在 gevent 1.0 中修复的错误，](http://code.google.com/p/gevent/issues/detail?id=97)但升级并非易事，在花费一两个星期升级之前，我想更加确信 gevent 的套接字确实是我的问题。

将我的程序更改为非事件也并非易事。

如何检验我的假设，即 gevent 的套接字有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:45:56.530

如果这是一个与 libevent 相关的 gevent 错误，那么它很有可能在 1.0bx 中得到修复，因为它使用了 libev。试试[gevent-1.0b3](http://code.google.com/p/gevent/downloads/list)并找出答案。

# jpa - Eclipselink with criteria - (isEmpty for subquery with wrong result)

> ID：11744226
> 
> 赞同：0
> 
> 时间：2012-07-31T15:58:00.547
> 
> 标签：jpa, orm, eclipselink

我正在使用 EclipsLink 并且遇到了这个问题。

JPQL bellow 只给我带来一个结果，那就是正确的结果：

`select distinct c from Car c join c.person p where p.dogs is empty`.

结果是：车名：Yellow Submarine

_

但是当我创建以下标准时：

`CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder(); CriteriaQuery<Car> criteriaQuery = criteriaBuilder.createQuery(Car.class); Root<Car> mainRoot = criteriaQuery.from(Car.class); criteriaQuery.select(mainRoot); criteriaQuery.distinct(true); Join<Person, Car> join = mainRoot.join("person", JoinType.INNER); // Is this right? criteriaQuery.where(criteriaBuilder.and(criteriaBuilder.isEmpty(join.get("dogs").as(List.class))));`

给出错误结果：车名：Black Horse，车名：White Thunder，车名：Herbie，车名：Yellow Submarine

它带来了数据库中的所有数据。我错过了什么吗？

上述相同的标准适用于 Hibernate。=/

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:30:48.927

生成的 SQL 是什么？

试一试，

```
criteriaQuery.where(criteriaBuilder.isEmpty(join.<Collection>get("dogs")); 
```

也尝试最新版本。

# php - 让 htaccess 传递多个变量

> ID：11744227
> 
> 赞同：0
> 
> 时间：2012-07-31T15:58:01.357
> 
> 标签：php, .htaccess, variables

我想要的是 subcategory/1/date 所以它通过 subcat_id->1 sort->date。我只能在 PHP 中获得第一个。

```
RewriteRule ^subcategory/([0-9]+) subcategory.php?subcat_id=$1
RewriteRule ^subcategory/([0-9]+)(/([a-zA-Z0-9_-]+)) subcategory.php?subcat_id=$1&sort=$2 
```

知道我的代码哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:11:51.700

好的，我通过切换规则并将“/”放在外面来解决我的问题。感谢ctrahey，还添加了$。

```
RewriteRule ^subcategory/([0-9]+)/([a-zA-Z0-9_-]+)$ subcategory.php?subcat_id=$1&sort=$2
RewriteRule ^subcategory/([0-9]+)$ subcategory.php?subcat_id=$1 
```

不过感谢您的帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:13:22.660

尝试颠倒顺序，所以如果存在更多参数，它将首先被捕获

```
RewriteRule ^subcategory/([0-9]+)/([a-zA-Z0-9_-]+)$ subcategory.php?subcat_id=$1&sort=$2
RewriteRule ^subcategory/([0-9]+)$ subcategory.php?subcat_id=$1 
```

该死的，它领先于我！！

# python - 使用 lxml、xpath 在 Python 中解析 HTML

> ID：11744228
> 
> 赞同：2
> 
> 时间：2012-07-31T15:58:03.140
> 
> 标签：python, html, xpath, lxml

我正在尝试使用带有 lxml 和 xpath 的 python 解析值表单 html。

这是我的html数据

```
<table>
<tr>
<td class="u"><input class="wide" name="record[13][name]" value="exampledomain1.com"></td>
      <td class="u">
       <select name="record[13][type]">
         <option SELECTED value="A" >A</option>
         <option value="AAAA" >AAAA</option>
         <option value="CNAME" >CNAME</option>
         <option value="HINFO" >HINFO</option>
         <option value="MX" >MX</option>
         <option value="NAPTR" >NAPTR</option>
         <option value="NS" >NS</option>
         <option value="PTR" >PTR</option>
         <option value="SOA" >SOA</option>
         <option value="SPF" >SPF</option>
         <option value="SRV" >SRV</option>
         <option value="SSHFP" >SSHFP</option>
         <option value="TXT" >TXT</option>
         <option value="RP" >RP</option>
         <option value="URL" >URL</option>
         <option value="MBOXFW" >MBOXFW</option>
         <option value="CURL" >CURL</option>
       </select>
      </td>
      <td class="u"><input class="wide" name="record[13][content]" value='10.10.10.1'></td>

<td class="u"><input class="wide" name="record[14][name]" value="exampledomain2.com"></td>
      <td class="u">
       <select name="record[14][type]">
         <option SELECTED value="CNAME" >A</option>
         <option value="AAAA" >AAAA</option>
         <option value="CNAME" >CNAME</option>
         <option value="HINFO" >HINFO</option>
         <option value="MX" >MX</option>
         <option value="NAPTR" >NAPTR</option>
         <option value="NS" >NS</option>
         <option value="PTR" >PTR</option>
         <option value="SOA" >SOA</option>
         <option value="SPF" >SPF</option>
         <option value="SRV" >SRV</option>
         <option value="SSHFP" >SSHFP</option>
         <option value="TXT" >TXT</option>
         <option value="RP" >RP</option>
         <option value="URL" >URL</option>
         <option value="MBOXFW" >MBOXFW</option>
         <option value="CURL" >CURL</option>
       </select>
      </td>
      <td class="u"><input class="wide" name="record[14][content]" value='exampledomain1.com'></td>

<td class="u"><input class="wide" name="record[15][name]" value="exampledomain3.com"></td>
      <td class="u">
       <select name="record[15][type]">
         <option SELECTED value="A" >A</option>
         <option value="AAAA" >AAAA</option>
         <option value="CNAME" >CNAME</option>
         <option value="HINFO" >HINFO</option>
         <option value="MX" >MX</option>
         <option value="NAPTR" >NAPTR</option>
         <option value="NS" >NS</option>
         <option value="PTR" >PTR</option>
         <option value="SOA" >SOA</option>
         <option value="SPF" >SPF</option>
         <option value="SRV" >SRV</option>
         <option value="SSHFP" >SSHFP</option>
         <option value="TXT" >TXT</option>
         <option value="RP" >RP</option>
         <option value="URL" >URL</option>
         <option value="MBOXFW" >MBOXFW</option>
         <option value="CURL" >CURL</option>
       </select>
      </td>
      <td class="u"><input class="wide" name="record[15][content]" value='10.10.10.3'></td>
</tr>
</table> 
```

我想要的是解析值并打印如下：

```
exampledomain1.com A 10.10.10.1
exampledomain2.com CNAME exampledomain1.com
exampledomain3.com A 10.10.10.3 
```

这是我尝试过的

```
#!/usr/bin/python
import lxml.html
from lxml import etree

doc = lxml.html.document_fromstring("""Here whole html data""")
txt1 = doc.xpath('//*[@class="wide"]/@value')
txt2 = doc.xpath('//@SELECTED/text()')
print txt1
print txt2 
```

但它没有按我的意愿工作。任何帮助，将不胜感激。

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:49:27.613

我修复了代码以返回以下内容，这与您的要求非常接近：

```
(py26_default)[mpenning@Bucksnort ~]$ python parse.py
exampledomain1.com 10.10.10.1
exampledomain2.com exampledomain1.com
exampledomain3.com 10.10.10.3
(py26_default)[mpenning@Bucksnort ~]$ 
```

您无法`record[13][type]`使用 xpath 进行检索...还有其他方法可以遍历它，但我将把它作为 OP 的练习。请注意，我确实修复了 OP 问题中的 HTML 以包含`<table>`和`<tr>`标记...

```
import lxml.html
from lxml import etree
from lxml.etree import XMLParser

parser = XMLParser(ns_clean=True, recover=True)
doc = etree.fromstring("""Here whole html data""", parser)
elem1 = doc.xpath('//input[@name="record[13][name]"]')
# NOTE: <option SELECTED> cannot be retrieved with xpath... SELECTED must have
#   a value to do so...
#elem2 = doc.xpath('//select[@name="record[13][type]"]/option[@SELECTED]')
elem3 = doc.xpath('//input[@name="record[13][content]"]')

for idx, val in enumerate(elem1):
    print val.attrib['value'], elem3[idx].attrib['value'] 
```

* * *

```
<!-- The (fixed) html source I used -->
<table>
<tr>
<td class="u"><input class="wide" name="record[13][name]" value="exampledomain1.com"></td>
      <td class="u">
       <select name="record[13][type]">
         <option SELECTED value="A" >A</option>
         <option value="AAAA" >AAAA</option>
         <option value="CNAME" >CNAME</option>
         <option value="HINFO" >HINFO</option>
         <option value="MX" >MX</option>
         <option value="NAPTR" >NAPTR</option>
         <option value="NS" >NS</option>
         <option value="PTR" >PTR</option>
         <option value="SOA" >SOA</option>
         <option value="SPF" >SPF</option>
         <option value="SRV" >SRV</option>
         <option value="SSHFP" >SSHFP</option>
         <option value="TXT" >TXT</option>
         <option value="RP" >RP</option>
         <option value="URL" >URL</option>
         <option value="MBOXFW" >MBOXFW</option>
         <option value="CURL" >CURL</option>
       </select>
      </td>
      <td class="u"><input class="wide" name="record[13][content]" value='10.10.10.1'></td>

<td class="u"><input class="wide" name="record[13][name]" value="exampledomain2.com"></td>
      <td class="u">
       <select name="record[13][type]">
         <option SELECTED value="CNAME" >A</option>
         <option value="AAAA" >AAAA</option>
         <option value="CNAME" >CNAME</option>
         <option value="HINFO" >HINFO</option>
         <option value="MX" >MX</option>
         <option value="NAPTR" >NAPTR</option>
         <option value="NS" >NS</option>
         <option value="PTR" >PTR</option>
         <option value="SOA" >SOA</option>
         <option value="SPF" >SPF</option>
         <option value="SRV" >SRV</option>
         <option value="SSHFP" >SSHFP</option>
         <option value="TXT" >TXT</option>
         <option value="RP" >RP</option>
         <option value="URL" >URL</option>
         <option value="MBOXFW" >MBOXFW</option>
         <option value="CURL" >CURL</option>
       </select>
      </td>
      <td class="u"><input class="wide" name="record[13][content]" value='exampledomain1.com'></td>

<td class="u"><input class="wide" name="record[13][name]" value="exampledomain3.com"></td>
      <td class="u">
       <select name="record[13][type]">
         <option SELECTED value="A" >A</option>
         <option value="AAAA" >AAAA</option>
         <option value="CNAME" >CNAME</option>
         <option value="HINFO" >HINFO</option>
         <option value="MX" >MX</option>
         <option value="NAPTR" >NAPTR</option>
         <option value="NS" >NS</option>
         <option value="PTR" >PTR</option>
         <option value="SOA" >SOA</option>
         <option value="SPF" >SPF</option>
         <option value="SRV" >SRV</option>
         <option value="SSHFP" >SSHFP</option>
         <option value="TXT" >TXT</option>
         <option value="RP" >RP</option>
         <option value="URL" >URL</option>
         <option value="MBOXFW" >MBOXFW</option>
         <option value="CURL" >CURL</option>
       </select>
      </td>
      <td class="u"><input class="wide" name="record[13][content]" value='10.10.10.3'></td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T05:21:01.450

```
record_13_name = tree.xpath("//select[@name='record[13][name]']/text()")
record_13_type = tree.xpath("//select[@name='record[13][type]']/option/text()")
record_13_content = tree.xpath("//input[@name='record[13][content]']/text()")

record_14_name = tree.xpath("//select[@name='record[14][name]']/text()")
record_14_type = tree.xpath("//select[@name='record[14][type]']/option/text()")
record_14_content = tree.xpath("//input[@name='record[14][content]']/text()")

record_15_name = tree.xpath("//select[@name='record[15][name]']/text()")
record_15_type = tree.xpath("//select[@name='record[15][type]']/option/text()")
record_15_content = tree.xpath("//input[@name='record[15][content]']/text()") 
```

# windows - 批量替换多个不同的字符串

> ID：11744230
> 
> 赞同：5
> 
> 时间：2012-07-31T15:58:07.047
> 
> 标签：windows, string, batch-file, replace

我在下面找到了替换字符串的解决方案，但我并不完全理解。
如何更改代码以每行替换 3 个字符串？
我的更改（第 12 行和第 13 行）尚未生效。

是否可以不运行第二个和第三个循环？

```
ECHO off
SETLOCAL enabledelayedexpansion

SET source="C:\source.srt"
SET target="C:\target.srt"

IF EXIST %target% DEL /f %target%

FOR /f "delims=" %%i IN ('FINDSTR . %source%') DO (
   SET line=%%i
   SET line=!line:ö=oe!
   SET line=!line:ä=ae!
   SET line=!line:ü=ue!
   ECHO !line! >> %target%
) 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-31T17:02:30.830

你不想使用[sed](http://gnuwin32.sourceforge.net/packages/sed.htm)吗？这将是一个简单的单行命令。

```
sed -e 's/ö/oe/g' -e 's/ä/ae/g' -e 's/ü/ue/g' source.srt 
```

# objective-c - 从 textFieldDidEndEditing 调用 reloadData 后，针对 UITableView 的 indexPath 不正确

> ID：11744233
> 
> 赞同：0
> 
> 时间：2012-07-31T15:58:13.910
> 
> 标签：objective-c, uitableview, uitextfield, nsindexpath, becomefirstresponder

因此，我试图在管理电话号码时模拟标准 Apple 代码在联系人应用程序上的工作方式。具体来说，我正在努力从 tableview 中删除一行，如果它为空并且用户导航到任何其他行

我的问题是，由于 tableview 重新加载导致 UITextField 辞职其响应者，我需要为用户导航到的文本字段再次设置响应者

我有 UITextField 委托并且正在处理通常的`textFieldShouldBeginEditing , textFieldDidBeginEditing , textFieldShouldEndEditing , textFieldDidEndEditing`

为了处理该功能，我的代码在 内`textFieldDidEndEditing`，因此我从 tableview 数组中删除数据，并且由于 tableview 有 2 个部分，我正在调用：

```
[MyTableView reloadSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationNone]; 
```

在`textFieldDidBeginEditing`我保存正在编辑的 textField 的 indexPath 期间，使用：

```
EditableCustomCell *textFieldCell = (EditableCustomCell *)[[textField superview] superview];
NSIndexPath *indexPath = [MyTableView indexPathForCell:(EditableCustomCell *)textFieldCell];
responderIndexPath = [NSIndexPath indexPathForRow:indexPath.row inSection:indexPath.section]; 
```

然后，我使用以下代码将正确的行 textField 设置为第一响应者：

```
EditableCustomCell *customCell = (EditableCustomCell *)[MyTableView cellForRowAtIndexPath:responderIndexPath];
[customCell.editableTextField becomeFirstResponder]; 
```

一切似乎都很好，直到接近处理结束时，突然`textFieldDidBeginEditing`开始为 indexPath 返回第 0 行第 0 节（即使在检查标签值或包含的文本时返回文本字段的正确值）

以下是上述过程开始时的日志：

```
- textFieldDidEndEditing started  <-- start of delete processing
- textFieldDidEndEditing - tableviewData - replacing object at index 1
    CustomTableViewController.deleteRow - delete called for indexPath section 1 ... row 1
- reloading MyTableView
- CustomTableViewController-cellForRowAtIndexPath started
    CustomTableViewController-cellForRowAtIndexPath section=1 row=0
    CustomTableViewController-cellForRowAtIndexPath ending
    CustomTableViewController-cellForRowAtIndexPath section=1 row=1
    CustomTableViewController-cellForRowAtIndexPath ending
    CustomTableViewController-cellForRowAtIndexPath section=1 row=2
    CustomTableViewController-cellForRowAtIndexPath ending
- textFieldShouldBeginEditing started
    indexPath for textFieldShouldBeginEditing is : section 1 row 1
- textFieldShouldBeginEditing ending
- textFieldDidBeginEditing started
    indexPath for textFieldDidBeginEditing is : section 1 row 1 text 3 tag 1
- textFieldDidBeginEditing ending
- textFieldDidEndEditing ending  <-- end of delete processing
- textFieldDidBeginEditing started
- textFieldDidBeginEditing ... setting responderIndexPath section 0 row 0
    indexPath for textFieldDidBeginEditing is : section 0 row 0 text 123 tag 0
- textFieldDidBeginEditing ending 
```

从日志的最后一部分可以看出，`textFieldDidEndEditing`完成后，`textFieldDidBeginEditing`调用但返回第 0 节和第 0 行（这些行始终保持显示和可见）

我既不明白为什么要调用它，也不明白为什么它没有返回正确的 indexPath。可以看出，该值的文本被返回（在这种情况下，输入值为 123），我已经用其他数据和其他行验证了这一点（对于文本字段的文本和标签）

也许我的 inside 设置`becomeFirstReponsder`不`textFieldDidEndEditing`正确，但如果这是真的，我不知道在哪里处理这个

希望有人对此有更好的理解可以帮助我，正如你所知道的，我已经经历了几个小时没有任何解决方案

谢谢伊兹

**编辑 1：** *在代码中，所有调用都是`becomeFirstReponder`在`textFieldDidEndEditing`完成之前。当您在完成后查看日志时`cellForRowAtIndexPath`，它进入并存在文本字段 TWICE，一次是针对刚刚删除的行下方的行，然后当它为 indexPath 的部分/行返回 0 时再次存在？我不明白是什么事件序列导致这个帖子表重新加载方法触发*

**编辑 2：只是我，还是** *在日志末尾**之前**没有 NO 似乎真的很奇怪？是不是我通过在 期间重新加载表格来搞砸内部流程？有没有更好的地方来做到这一点（即删除一行并重新加载表格视图以显示 UI 更新）？`textfieldSHOULDbeginEditing``textFieldDidBeginEditing``textFieldDidEndEditing`*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T12:50:52.480

好的，回答我自己的问题...

经过大量调试，似乎...

*我通过在期间重新加载**表格视图来干扰标准 UI 工作流程**`textfieldDidEndEditing`*

调用 reloaddata 会破坏 tableview 单元格（以及单元格中包含的所有对象，即 UITextFields、UILabels 等）并重新创建它们，从而导致

通过将此调用移到一个独立的按钮，它按预期运行，而 indexPath 没有返回 0（当它到达这一点时，我仍然不完全理解调用堆栈，但是嘿）

现在我的大问题是决定何时以编程方式调用重新加载，因为我希望它摆脱离开文本字段的事件......我觉得另一个问题来了：\

希望我的胡言乱语可以帮助将来尝试做类似事情的人...

# objective-c - 如何使 iPhone 应用程序国际化

> ID：11744237
> 
> 赞同：0
> 
> 时间：2012-07-31T15:58:19.797
> 
> 标签：objective-c, ios, internationalization, ibtool

我正在尝试将几年前编写的 iPhone 应用程序国际化，不幸的是，当时内部化并不是首要任务。由于有很多 nib 文件，我使用 ibtool 以编程方式为每个国家/地区生成 nib 文件。运行 ibtool 实用程序后，我必须打开 project.pbxproj 文件并插入西班牙语的手动条目。由于我必须更新很多条目，我没有选择这条路线。

我想知道如何生成特定于区域的 nib 文件并将条目反映在 project.pbxproj 文件中。

其次，我无法使用 gestrings 选项，因为代码没有在每个硬编码文本的地方都使用 NSLocalized 方法。虽然我更喜欢这个选项，但是否有一种安全机制可以找出代码库中所有可以国际化的字符串？

为长长的问题道歉。关于我应该如何将应用程序国际化的任何建议？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:56:53.667

我最近解决了这个问题并遇到了以下链接[iphone-applications-localization-guide](http://www.bdunagan.com/2009/03/15/ibtool-localization-made-easy/)和[ibtool-localization](http://www.icanlocalize.com/site/tutorials/iphone-applications-localization-guide/)和[Merging-changes-into-a-localized-nib-file](http://www.scribd.com/doc/62541695/202/Figure10-1-Merging-changes-into-a-localized-nib-file)

也许它会帮助你。

# variables - SPSS 自动为 Logistic 回归创建交互变量

> ID：11744238
> 
> 赞同：0
> 
> 时间：2012-07-31T15:58:21.440
> 
> 标签：variables, effects, interaction, spss

我正在使用 SPSS 并有大约 300 个变量（分类、标量和序数）进行建模。我需要一种简单/快速的方法来为存在交互的 Logistic 回归创建交互变量组合。R 会自动执行此操作并创建大约 158 个组合（具有交互作用的变量）——似乎没有任何自动化方式可以在 SPSS 中创建和输入交互作用变量；每次我运行一个新模型时都必须手动输入和/或测试这 158 个复合材料，这将是很多工作！关于快速执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:40:19.190

如果您要重复运行此模型并需要一种方法来创建这些合成变量，您很可能应该创建一个语法文件来为您完成它。当您使用 SPSS 中的 GUI 运行命令时，SPSS 在输出窗口中生成语法。您可以复制此语法并使用它来创建您自己的脚本。因此，例如，您可能会编写如下内容：

```
DO IF (!MISSING Var1).
COMPUTE Var2 = Var1 * dummy1.
END IF.
EXECUTE. 
```

可悲的是，是的，您必须在第一次运行时编写此代码块 300 次，但将来您可以简单地运行它并计算所有新变量。

另一种方法是按顺序命名变量并使用循环来处理它们。因此，假设您的变量按顺序命名为 VarA、VarB 和 VarC，那么您可以执行如下循环：

```
VECTOR VectorVar = VarA TO VarC.
LOOP #cnt = 1 to 3 by 1.
   COMPUTE VectorVar(#cnt) = VectorVar * dummy1.
ENDLOOP.
EXECUTE. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:21:47.067

您是否真的希望输入所有 158 个交互项？我会怀疑这种方法。但是，如果您想构建表示所有这些交互项的变量而不是在模型中指定它们，您可以使用 SPSS 社区网站 (www.ibm.com/developerworks/spssdevcentral) 上提供的 CREATE DUMMIES 扩展命令来完成。

您还可以使用 Python 可编程性在逻辑过程中构建显式交互项。

HTH，乔恩·派克

# c++ - Lib svm，如何将 MyModel.mat 转换为 MyModel.model

> ID：11744244
> 
> 赞同：3
> 
> 时间：2012-07-31T15:58:38.330
> 
> 标签：c++, matlab, file-io, libsvm, svm

我有一个 matlab 可以轻松读取的 .mat 文件，但我需要将其转换为 C++ 可读的 .model 文件。有没有办法做到这一点（手动，或者以编程方式）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T16:41:23.503

您可以将 MATLAB 中的数据矩阵作为任何常规 MAT 文件加载：

```
load data.mat 
```

然后使用 libsvm MATLAB 接口附带的 MEX 函数`libsvmwrite`，将其写入所谓的“稀疏”格式：

```
libsvmwrite('data.txt', label_vector, instance_matrix) 
```

如果您谈论的是经过训练的模型而不是数据，那么快速搜索就会显示[此页面](http://ick.mech.kumamoto-u.ac.jp/kumon/ja/node/26)（我没有亲自测试过）。

* * *

## 编辑：

好的，看来我提到[的代码](http://ick.mech.kumamoto-u.ac.jp/kumon/ja/node/26)需要一些调整。下面是我的修改版。我使用最新的 libSVM-3.12 对其进行了测试，使用 VS2010 作为编译器：

### svm_savemodel.c

```
#include "../svm.h"
#include "mex.h"
#include "svm_model_matlab.h"

static void fake_answer(mxArray *plhs[])
{
    plhs[0] = mxCreateDoubleMatrix(0, 0, mxREAL);
}

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{
    struct svm_model *model;
    char *filename;
    const char *error_msg;
    int status;

    // check input
    if(nrhs != 2) {
        mexPrintf("Usage: svm_savemodel(model, 'filename');\n");
        fake_answer(plhs);
        return;
    }
    if(!mxIsStruct(prhs[0])) {
        mexPrintf("model file should be a struct array\n");
        fake_answer(plhs);
        return;
    }
    if(!mxIsChar(prhs[1]) || mxGetM(prhs[1])!=1) {
        mexPrintf("filename should be given as char(s)\n");
        fake_answer(plhs);
        return;
    }

    // convert MATLAB struct to C struct
    model = matlab_matrix_to_model(prhs[0], &error_msg);
    if(model == NULL) {
        mexPrintf("Error: can't read model: %s\n", error_msg);
        fake_answer(plhs);
        return;
    }

    // get filename
    filename = mxArrayToString(prhs[1]);

    // save model to file
    status = svm_save_model(filename,model);
    if (status != 0) {
        mexWarnMsgTxt("Error occured while writing to file.");
    }

    // destroy model
    svm_free_and_destroy_model(&model);
    mxFree(filename);

    // return status value (0: success, -1: failure)
    plhs[0] = mxCreateDoubleScalar(status);

    return;
} 
```

假设您编译了上述 MEX 文件，下面是一个示例用法：

```
[labels, data] = libsvmread('./heart_scale');
model = svmtrain(labels, data, '-c 1 -g 0.07');
svm_savemodel(model, 'mymodel.model'); 
```

创建的文本文件如下所示：

### mymodel.model

```
svm_type c_svc
kernel_type rbf
gamma 0.07
nr_class 2
total_sv 130
rho 0.426412
label 1 -1
nr_sv 63 67
SV
1 1:0.166667 2:1 3:-0.333333 4:-0.433962 5:-0.383562 6:-1 7:-1 8:0.0687023 9:-1 10:-0.903226 11:-1 12:-1 13:1 
0.6646947579781318 1:0.125 2:1 3:0.333333 4:-0.320755 5:-0.406393 6:1 7:1 8:0.0839695 9:1 10:-0.806452 12:-0.333333 13:0.5 
.
. 
```

# wcf - wcf 消息响应参数

> ID：11744248
> 
> 赞同：0
> 
> 时间：2012-07-31T15:58:46.223
> 
> 标签：wcf

我已阅读有关 wcf 中动态响应的示例[http://msdn.microsoft.com/en-us/library/ee476510.aspx 。](http://msdn.microsoft.com/en-us/library/ee476510.aspx)底部的样本非常符合我的目标。这就是我所做的：

```
 [OperationContract]
    [WebGet(UriTemplate = "/salaries({queryString})")]
    Message GetSalaryByQuery(string queryString); 
```

和我的 GetSalaryByQuery 方法：

```
public Message GetSalaryByQuery(string querystring)
    {
        if (WebOperationContext.Current.IncomingRequest.Accept == "application/json")
            return WebOperationContext.Current.CreateJsonResponse<Result>(Salary.GetSalaryByQueryJson(querystring));
        else
            return WebOperationContext.Current.CreateAtom10Response(Salary.GetSalaryByQuery(querystring));          
    } 
```

这与我找到的示例非常相似。但它不起作用。它说除了消息之外还有另一个参数。我用谷歌搜索了消息类，在我看来，不可能将参数添加到消息响应中。

有没有办法通过请求传递参数并获得带有消息对象的响应？

有没有另一种方法来获得动态响应？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:08:07.937

我让它工作。我刚刚删除了 Metadata-Enpoint 和行为。我的 Web 服务自己提供元数据，因此不需要定义 mex 元数据。

# ios - 钥匙串：SecItemAdd：缺少权利（发布版本）

> ID：11744250
> 
> 赞同：2
> 
> 时间：2012-07-31T15:58:52.433
> 
> 标签：ios, keychain

我的应用程序使用 PDKeychainBindings 将用户名/密码保存在钥匙串中。

当我从 xCode（调试版本）启动我的应用程序时，它可以工作，但是当我编译发布版本时，将其退出（使用 erica sadun 的 signit shell 脚本）并将其安装到我的设备中，保存到钥匙串中总是失败。

我得到这个钥匙串错误：

```
Jul 31 11:44:50 Thierrys-iPhone securityd[1903] <Error>: myAPP[1898] SecItemCopyMatching: missing entitlement
Jul 31 11:44:50 Thierrys-iPhone securityd[1903] <Error>: myAPP[1898] SecItemCopyMatching: missing entitlement
Jul 31 11:44:50 Thierrys-iPhone securityd[1903] <Error>: myAPP[1898] SecItemAdd: missing entitlement
Jul 31 11:44:50 Thierrys-iPhone securityd[1903] <Error>: myAPP[1898] SecItemCopyMatching: missing entitlement
Jul 31 11:44:50 Thierrys-iPhone securityd[1903] <Error>: myAPP[1898] SecItemCopyMatching: missing entitlement 
```

你知道有什么问题吗？

非常感谢你的帮助。

蒂埃里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:30:22.510

I've had this problem as well. I was using the [floatsign.sh](https://gist.github.com/mediabounds/1367348) script - and have now modified it to correctly handle resizing for keychains. To do so, the entitlements file has to be update to reflect the new provisioning file. Check out the [gist](https://gist.github.com/Weptun/5406993)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:35:42.510

似乎用 erica 的脚本辞职会导致问题。使用 xCode 签名并分发构建不会导致此问题。

# .htaccess - .htaccess URL 重写不起作用

> ID：11744251
> 
> 赞同：0
> 
> 时间：2012-07-31T15:58:59.827
> 
> 标签：.htaccess

我编写了 .htaccess 文件来将 url 转换为 SEO 友好：

原始网址是：

```
http://palestinianz.com/?page=person&p=Alex-Atalla 
```

.htaccess 的内容是：

```
RewriteEngine On
RewriteRule ^([^/]*)\.html$ /?page=person&p=$1 [L] 
```

它应该产生这样的链接：

```
http://palestinianz.com/Alex-Atalla.html 
```

但是，尽管我将文件放在我网站的根目录中，但它没有任何效果！哪里有问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:17:27.097

你可以试试：

```
RewriteCond %{REQUEST_URI} (.+)\.html$
RewriteRule ^(.+)\.html$ ./index.php?page=person&p=$1 [L] 
```

唯一的问题是任何`.html`页面都会经历这个。可能要更改为以下内容：

```
 # URL: domain.com/person/Alex-Atalla.html

 RewriteCond %{REQUEST_URI} (.+)/(.+)\.html$
 RewriteRule ^(.+)/(.+)\.html$ ./index.php?page=$1&p=$2 [L] 
```

这将使您在更改页面变量时也更加稳健

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:38:55.763

如果希望地址栏中的 URL 发生变化，则需要重定向浏览器，然后在服务器上重写。此答案的第一部分解释了您想要的过程：[https ://stackoverflow.com/a/11711948/851273](https://stackoverflow.com/a/11711948/851273)

所以看看第二个列表，如果一个丑陋的链接被请求到一个漂亮的链接，这个过程是重定向浏览器：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /\?page=person&p=([^\ ]+)
RewriteRule ^$ /%1.html? [R=301,L] 
```

现在，在服务器端，您需要在内部将其重写为丑陋的 url，这或多或少是您已经拥有的：

```
RewriteRule ^([^/]*)\.html$ /?page=person&p=$1 [L] 
```

# java - 在 Java 中执行 python 编译脚本 (.pyc)

> ID：11744253
> 
> 赞同：3
> 
> 时间：2012-07-31T15:59:04.430
> 
> 标签：java, python, pyc

我有一个 python 编译脚本（script.pyc，我没有 .py 文件），它在我的 windows 命令提示符下运行良好，我想从我的 Java 应用程序中执行它。我尝试使用 runtime() 方法：

```
 Runtime runtime = Runtime.getRuntime();
    runtime.exec(new String[] {"C:\\toto\\tools\\script.pyc" ,"arg","arg2" }); 
```

但我收到一个错误：

```
Exception in thread "main" java.io.IOException: Cannot run program "C:\Nuance\VoCon Hybrid\SDK_v4_3\tools\clctodict.pyc": CreateProcess error=193, %1 n?est pas une application Win32 valid 
```

该脚本在我的终端中运行良好（“arg”是一个 txt 文件，“arg2”是输出名称，脚本可以毫无问题地完成其工作）。

我还尝试使用 getDesktop() 启动我的脚本：

```
 File fie = new File("C:\\toto\\tools\\script.pyc" ,"arg","arg2");
    Desktop.getDesktop().open(fie); 
```

没有问题，但我无法添加参数，所以我只能看到一个终端窗口在几秒钟内打开，然后立即消失。我也尝试过使用 JPython，但也没有成功（也许我们不能在 .pyc 上使用方法“execfile”？？？？？？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:23:12.057

就像你需要一个 jvm 来运行一个 .class 一样，你需要一个 python 解释器来运行一个 .pyc。

尝试类似：

```
runtime.exec(new String[] {"c:\\Python26\\bin\\python.exe", "C:\\toto\\tools\\script.pyc" ,"arg","arg2" }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T14:32:48.937

你可以做类似的事情

```
Process p = Runtime.getRuntime().exec(new String[]{"python.exe" ... other args) 
```

然后您可以调用 p.waitFor() 来等待进程结束并调用 p.exitValue() 来测试程序是否成功退出。

您还可以通过 p.getOutputStream() 获取输出流，以检索您的 python 脚本打印的文本

请参阅类文档以获取更多信息：[http ://docs.oracle.com/javase/6/docs/api/java/lang/Process.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)

# asp.net - asp HyperLinkField - 需要显示文本

> ID：11744255
> 
> 赞同：2
> 
> 时间：2012-07-31T15:59:17.393
> 
> 标签：asp.net

我有以下超链接字段：

```
 <asp:HyperLinkField DataTextField="SysID" DataNavigateUrlFields="SysID"  
      DataNavigateUrlFormatString="pgmtasklist.aspx?sysid={0}"  Text="Click Here" /> 
```

我需要超链接文本说单击此处，但不能按预期工作。它显示了实际的 SysID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:15:00.963

删除 DataTextField 定义，它应该可以工作：

```
<asp:HyperLinkField DataNavigateUrlFields="SysID"  
    DataNavigateUrlFormatString="pgmtasklist.aspx?sysid={0}" Text="Click Here" /> 
```

由于您有 DataTextField 它也需要一个`DataTextFormatString`值，但在您的情况下您也不需要。

# mysql - sql选择很多计数

> ID：11744257
> 
> 赞同：0
> 
> 时间：2012-07-31T15:59:19.873
> 
> 标签：mysql

在过去的两天里，我遇到了一个让我发疯的问题。我基本上有4个按以下顺序继承的表：

```
 users
               |
categories   blogs
     |      |     |
     ---- pages visits 
```

所以一个用户有很多博客，这些博客有很多页面和访问量。每个页面也属于一个类别。

我想要的只是提取具有以下关联计数的所有用户：

1.  每个用户拥有的博客总数
2.  每个用户拥有的总页数
3.  每个用户拥有博客的类别总数
4.  每个用户的总访问次数
5.  每个用户拥有的访问者总数（访问，但我们按不同的 ip_address 计数）

我的查询如下：

```
SELECT
    u.id
    u.username,
    COUNT(b.id) as blogs_count,
    COUNT(p.id) as pages_count,
    COUNT(v.id) as visits_count,
    COUNT(distinct ip_address) as visitors_count
    COUNT(c.id) as categories_count
FROM
    users u
LEFT JOIN
    blogs b ON(b.user_id=u.id)
LEFT JOIN
    pages p ON(p.blog_id=b.id)
LEFT JOIN
    visits v ON(v.blog_id=b.id)
LEFT JOIN
    categories c ON(v.category_id=c.id)
GROUP BY u.id, blogs_count, pages_count, visits_count, 
         visitors_count, categories_count 
```

我应该得到 24 个用户的计数，但是考虑到我有近 300,000 次访问，我让我的 SQL 数据库永远挂起，可能试图提取数百万行。我不是数据库专家，这很明显。有人能以某种方式指出我正确的方向，这样我就可以做出一个很好的查询，甚至可以在数百万条记录上表现良好（当然使用正确的硬件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:27:58.547

尝试这个：

```
SELECT    u.id,
          u.username,
          COUNT(b.id)                     AS blogs_count,
          COALESCE(MAX(p.pagecnt), 0)     AS pages_count,
          COALESCE(MAX(v.visitscnt), 0)   AS visits_count,
          COALESCE(MAX(v.visitorscnt), 0) AS visitors_count,
          COALESCE(MAX(c.catcnt), 0)      AS categories_count
FROM      users u
LEFT JOIN blogs b ON u.id = b.user_id
LEFT JOIN (
          SELECT   blog_id, 
                   COUNT(*) AS pagecnt
          FROM     pages
          GROUP BY blog_id
          ) p ON b.id = p.blog_id
LEFT JOIN (
          SELECT   blog_id, 
                   COUNT(*) AS visitscnt, 
                   COUNT(DISTINCT ip_address) AS visitorscnt
          FROM     visits
          GROUP BY blog_id
          ) v ON b.id = v.blog_id
LEFT JOIN (
          SELECT   aa.id,
                   COUNT(DISTINCT dd.id) AS catcnt
          FROM     users aa
          JOIN     blogs bb ON aa.id = bb.user_id
          JOIN     pages cc ON bb.id = cc.blog_id
          JOIN     categories dd ON cc.category_id = dd.id
          GROUP BY aa.id
          ) c ON u.id = c.id
GROUP BY  u.id, 
          u.username 
```

* * *

## 分解

这也应该适用于不同的 DBMS，如 PGSQL、SQL-Server 等。

挑战在于您拥有这种 1:M 关系的层次结构，在这种层次结构中，将它们全部连接在一起可以很容易地摆脱不同类型的计数（因为您希望在某些地方有不同的计数，但在其他地方需要总计数）。

我决定做的是首先选择每个页面的计数并访问/不同的访问者，按`blog_id`. 这确保我们每个 仅获得一行`blog_id`，即使在加入 blogs 表上的子选择之后也是如此。

对于类别计数，您需要每个***用户***的不同类别计数，但挑战在于类别在关系层次结构（到 pages 表）中链接得很深，因此您必须创建一个单独的子选择来连接 user_id 而不是blog_id。

即使这个查询包含尽可能多的子选择，它仍然应该很快，因为没有两个子选择相互连接。只要在连接的任一侧都有一个索引表（子选择实际上是未索引的临时表），你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:05:19.620

```
SELECT
    u.id
    u.username,
    COUNT(b.id) as blogs_count,
    COUNT(p.id) as pages_count,
    COUNT(v.id) as visits_count,
    COUNT(distinct ip_address) as visitors_count
    COUNT(c.id) as categories_count
FROM
    users u
LEFT JOIN
    blogs b ON(b.user_id=u.id)
LEFT JOIN
    pages p ON(p.blog_id=b.id)
LEFT JOIN
    visits v ON(v.blog_id=b.id)
LEFT JOIN
    categories c ON(v.category_id=c.id)
GROUP BY u.id 
```

尝试按声明从您的组中删除 blogs_count、pages_count、visits_count、visitors_count、categories_count。

# php - 用于从各种文件格式中提取信息的 PHP 库/类

> ID：11744260
> 
> 赞同：1
> 
> 时间：2012-07-31T15:59:26.273
> 
> 标签：php, file

我正在寻找一个`PHP`可以从文件中动态提取信息而无需任何手动工作的类/库。例如：

**任何类型的文件：**大小、名称、路径、扩展名、mime 类型、md5sum...
**图像：**宽度、高度、使用的颜色...
**存档：**压缩级别、存档中包含的文件列表...
**视频/音频文件：**持续时间，元数据...
**文档：**字数/字符/页数...

我不是在寻找像这些[`PHP`基于文件管理器/资源管理器](https://stackoverflow.com/questions/209103/what-is-the-best-web-based-file-explorer)的前端，我想要的是一个可以从尽可能多的文件格式返回尽可能多信息的库（我看过重用一些来自这些文件管理器/资源管理器，但它只能在这里和那里只有几行，因为我正在寻找的东西通常在文件管理器/资源管理器的逻辑中被破坏）。

到目前为止，我发现的只是包装器和小型实现，它们专注于一种类型的文件（例如[`FileInfo`](http://php.net/manual/en/book.fileinfo.php)，用于通用目的、[`ImageMagick`](http://www.imagemagick.org/script/api.php#php)用于图像、[`Zend_Service_LiveDocx`](http://www.phplivedocx.org/articles/pdf-generation-with-zend-framework/)用于文档......）但无论如何我想问这个问题只是为了确保我没有错过任何重大的事情。

**是否有已经可用的 PHP 类/库可以检索有关许多不同文件格式的大量信息？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:15:29.623

您也许可以将一些 PEAR 库组合在一起：

[http://pear.php.net/package/MIME_Type](http://pear.php.net/package/MIME_Type)

[http://pear.php.net/package/Image_Remote](http://pear.php.net/package/Image_Remote)

[http://pear.php.net/packages.php?catpid=9&catname=文件+系统](http://pear.php.net/packages.php?catpid=9&catname=File+System)

# c# - C#如何在不四舍五入的情况下将双精度位格式化为小数点后一位

> ID：11744264
> 
> 赞同：22
> 
> 时间：2012-07-31T15:59:39.573
> 
> 标签：c#, string-formatting, rounding

我需要将双精度值格式化为小数点后一位而不四舍五入。

```
double value = 3.984568438706
string result = ""; 
```

我尝试过的是：

1)

```
result = value.ToString("##.##", System.Globalization.CultureInfo.InvariantCulture) + "%"; 
// returns 3.98% 
```

2)

```
result = value.ToString("##.#", System.Globalization.CultureInfo.InvariantCulture) + "%"; 
// returns 4% 
```

3)

```
 result = value.ToString("##.0", System.Globalization.CultureInfo.InvariantCulture) + "%"; 
 // returns 4.0% 
```

4）（遵循其他建议）

```
value = (value / 100);
result = String.Format("{0:P1}", Math.Truncate(value * 10000) / 10000);
// returns 4.0%

result = string.Format("{0:0.0%}",value); // returns 4.0% 
```

我需要显示的是值 3.9%

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-31T16:03:52.807

```
result=string.Format("{0:0.0}",Math.Truncate(value*10)/10); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T16:05:09.720

我会做一个实用的方法来处理这个：

```
static double Truncate(double value, int digits)
{
    double mult = System.Math.Pow(10.0, digits);
    return System.Math.Truncate(value * mult) / mult;
} 
```

然后你可以这样做：

```
result = Truncate(value, 1).ToString("##.#", System.Globalization.CultureInfo.InvariantCulture) + "%"; 
```

请注意，您可能还需要[Math.Floor](http://msdn.microsoft.com/en-us/library/e0b5f0xb)而不是截断 - 但这取决于您希望如何处理负值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-05T11:11:21.563

我知道这是一个旧线程，但我不得不这样做。虽然这里的方法有效，但我想要一种能够影响大量调用的简单方法，因此在对 string.format 的所有调用中使用 Math.Truncate 并不是一个好的选择。

因此，我制作了一个自定义格式提供程序，它允许我将截断添加到格式化字符串，例如

```
string.format(new FormatProvider(), "{0:T}", 1.1299); // 1.12
string.format(new FormatProvider(), "{0:T(3)", 1.12399); // 1.123
string.format(new FormatProvider(), "{0:T(1)0,000.0", 1000.9999); // 1,000.9 
```

实现非常简单，很容易扩展到其他需求。

```
public class FormatProvider : IFormatProvider, ICustomFormatter
{
    public object GetFormat(Type formatType)
    {
        if (formatType == typeof (ICustomFormatter))
        {
            return this;
        }
        return null;
    }

    public string Format(string format, object arg, IFormatProvider formatProvider)
    {
        if (arg.GetType() != typeof (double))
        {
            try
            {
                return HandleOtherFormats(format, arg);
            }
            catch (FormatException e)
            {
                throw new FormatException(string.Format("The format of '{0}' is invalid.", format));
            }
        }

        if (format.StartsWith("T"))
        {
            int dp = 2;
            int idx = 1;
            if (format.Length > 1)
            {
                if (format[1] == '(')
                {
                    int closeIdx = format.IndexOf(')');
                    if (closeIdx > 0)
                    {
                        if (int.TryParse(format.Substring(2, closeIdx - 2), out dp))
                        {
                            idx = closeIdx + 1;
                        }
                    }
                    else
                    {
                        throw new FormatException(string.Format("The format of '{0}' is invalid.", format));
                    }
                }
            }
            double mult = Math.Pow(10, dp);
            arg = Math.Truncate((double)arg * mult) / mult;
            format = format.Substring(idx);
        }

        try
        {
            return HandleOtherFormats(format, arg);
        }
        catch (FormatException e)
        {
            throw new FormatException(string.Format("The format of '{0}' is invalid.", format));
        }
    }

    private string HandleOtherFormats(string format, object arg)
    {
        if (arg is IFormattable)
        {
            return ((IFormattable) arg).ToString(format, CultureInfo.CurrentCulture);
        }
        return arg != null ? arg.ToString() : String.Empty;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T16:07:40.537

`ToString()`不这样做。您必须添加额外的代码。其他答案显示了数学方法，我下面的方法有点开箱即用。

```
string result = value.ToString();
Console.WriteLine("{0}", result.Substring(0, result.LastIndexOf('.') + 2)); 
```

这是一种相当简单的蛮力方法，但当小数点为“.”时，它就可以解决问题。这是一种减轻痛苦的扩展方法（并处理小数点）。

```
public static class Extensions
{
    public static string ToStringNoTruncate(this double me, int decimalplaces = 1)
    {
        string result = me.ToString();
        char dec = System.Globalization.CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator[0];
        return result.Substring(0, result.LastIndexOf(dec) + decimalplaces + 1);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T16:08:32.957

```
( Math.Truncate( ( value * 10 ) ) / 1000 ).ToString( "#.#%" ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T16:09:23.087

只需使用模运算符 + 内置`ToString`：

```
result = (value - (value % 0.1)).ToString("N1") + "%"; 
```

# c++ - 如何返回可以更改的成员？

> ID：11744265
> 
> 赞同：0
> 
> 时间：2012-07-31T15:59:41.720
> 
> 标签：c++

多线程环境。Foo 的内容可以是多线程的。

```
class Foo
{
public:
   const A & getA() {return a_;} //has guard
   void setA(A newA){a_ = newA;} //has guard

private:
    A a_;
}; 
```

呼叫者：

```
A a  = foo.getA(); 
```

在我问的另一个问题中，有人告诉我， [如果您返回 const& ，则可以保证变量的生命周期将延长到引用的生命周期](http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/) ，因此根据此我不需要复制该值并且即使调用 setA 也是安全的foo 在我调用 getA 后立即完成，但是提出了很多反对它的论点，所以我觉得这是不正确的。

我想安全起见，所以我将签名更改为：

```
A & getA() {return a_;} 
```

但是编译器仍然给我警告说我引用了局部变量。我不明白为什么，因为据我了解（cpp 新手）返回值是 foo.a 的副本，那么这有什么问题呢？

我不担心 a_ 内容的变化。(_a.age =4) 。我担心呼叫设置并且我在呼叫者中的“a”将是非法的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T16:02:32.933

你需要更加小心你听谁的。*如果临时对象*立即绑定到 const 引用，则唯一一次延长某物的生命周期。例如，像这样：

```
Foo bar() { return Foo(); }

int main()
{
    Foo const & f = bar();

    /* stuff */

} // the object referred to by f is extended till here 
```

你的情况不是这样的。特别是，*返回一个 const-reference*不会创建一个临时对象，所以这里没有什么可以延长寿命。特别是，以下*绝对*是一个错误：

```
A const & bar() { Foo x; return x.getA(); }

int main()
{
    A const & a = bar(); // dangling reference; object dies upon return from Foo::getA()
} 
```

# android - 应用无法通过 Android ICS 连接到网络

> ID：11744266
> 
> 赞同：5
> 
> 时间：2012-07-31T15:59:50.900
> 
> 标签：android, cordova

我正在尝试将 Phonegap/Cordova 应用程序移植到 Android。它适用于早期版本的 SDK，但不适用于 android ICS (SDK 14)。我要么得到`java.io.IOException: An established connection was aborted by the software in your host machine`，要么应用程序加载，但无法连接到互联网。

我已经`<uses-permission android:name="android.permission.INTERNET"></uses-permission>`检查过它们没有重复运行的 adb 或 eclipse.exe。它也无法在运行 android 4+ 的外部设备上连接到互联网。

我的清单有`<uses-sdk android:targetSdkVersion="14" android:minSdkVersion="7" />`

我被指向跟踪视图的方向，当我尝试运行网络统计信息时，我收到错误“从所选设备读取 xt_qtaguid 网络统计信息时出现问题”。

[此处](https://stackoverflow.com/questions/8241068/weird-exceptions-under-android-4-0-with-eclipse)的 SO 答案表明内核可能存在问题并建议进行反向移植，但不知道如何执行此操作或是否正确。我的 Eclipse 版本是 Eclipse SDK 3.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:29:31.960

从android 4开始。当有人试图在UI Thread android中做网络事情时抛出一个android.os.NetworkOnMainThreadException。也许这是个问题？

# java - Java Scanner 奇怪的行为

> ID：11744267
> 
> 赞同：0
> 
> 时间：2012-07-31T15:59:57.663
> 
> 标签：java

我有一个 java 扫描器和两个循环来处理用户输入，但是它`NoSuchElement`在第二次遇到第一个循环时抛出异常，而不要求用户提供任何输入。

```
Scanner Guess_input = new Scanner( System.in );

    while (guess > 0){
        failure = true;
        while(failure)
        {

            System.out.println("Please input");
            try
            {
                if (Guess_input.nextLine().length() == 1 && guesses.size() >= 1) {
                    guesses.add(Guess_input.nextLine());
                    System.out.println("You guessed" + guesses.get(guesses.size()) + "");
                }
                else if (Guess_input.nextLine().length() == 0) {
                    System.err.println("ERROR:");
                    Guess_input.nextLine();   //Clean Buffer
                    failure = true;
                }
                else 
                {
                    System.err.println("ERROR");
                    Guess_input.nextLine();   //Clean Buffer
                    failure = true;
                }
            }   
            catch(InputMismatchException ime)

            {
                System.err.println("error");
            }
            finally
            {
                Guess_input.close();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:18:25.480

从java文档中，当使用类的`next()`方法时`Scanner`，你会得到

```
NoSuchElementException - if no such tokens are available 
```

每当您调用该`nextLine()`方法时，您都应该输入一个`String`. 您应该首先将结果存储`nextLine()`在局部变量中，除非这是您想要的。

另一个问题是`try catch finally`你的`while loop`. 这意味着对于每次迭代，您的`finally`bloc 每次都会执行，因此您会认为存在异常，而可能没有异常。应用这些更改

```
try {
   while (guess > 0) {
       while (.....) {
           .....
       }
   }
} catch (...){
   ....
  }
finally{ .... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:06:50.903

错误的说法是`guesses.get(guesses.size())`。在 Java 列表中使用从零开始的索引，即第一个元素的索引始终为 0，最后一个元素的大小为 - 1。根据定义，列表的大小是无效索引。

您可能应该在将下一行添加到列表之前将其保留在其自己的变量中，以便您的 sysout 语句可以仅引用该变量，而不是将值从列表中拉出。但简单的解决方案是将代码更改为`guesses.get(guesses.size() - 1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:12:05.500

您调用gueses.nextLine() 的次数太多了。每次调用 nextLine() 都会阻塞应用程序并期待输入。此外，还有其他需要担心的问题......就像其他人指出的那样。

不过我会坚持使用扫描仪。

# oracle - 在 Oracle 下创建存储过程时出错 - PLS-00103

> ID：11744271
> 
> 赞同：0
> 
> 时间：2012-07-31T16:00:05.060
> 
> 标签：oracle, stored-procedures, pls-00103

我试图创建一个**多次调用另一个的存储过程**。这是通过**使用 for each 循环来**完成的。所有的开发都在**oracle sql developer Version 3.0.04**下。

```
 CREATE OR REPLACE PROCEDURE Z_INBILLABILITYSERV
    IS BEGIN
      DECLARE
        ano VARCHAR2(4); 
      BEGIN
        select EXTRACT(YEAR FROM sysdate) into ano from dual;
        FOR dat IN (SELECT * FROM Z_FECHOMES WHERE MES <= 
                   (select EXTRACT(MONTH FROM sysdate) from dual )and ANO = ano)
        LOOP
          call z_insertbillability(dat.periodo_inicio,dat.periodo_fim,
                                                                dat.ano,dat.mes);
        END LOOP;
      END;
    END; 
```

我有以下错误：

**错误（9,12）：PLS-00103：在预期以下情况之一时遇到符号“Z_INSERTBILLABILITY”：:=。( @ % ; 符号 ":=" 被替换为 "Z_INSERTBILLABILITY" 以继续。**

如果有人有想法或提示，我现在会很高兴并且会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:11:42.433

你不需要这个词`call`；做就是了：

```
 LOOP
      z_insertbillability(dat.periodo_inicio,dat.periodo_fim,
                                                            dat.ano,dat.mes);
    END LOOP; 
```

错误消息可能有点无用，但它试图显示它可以尝试解释单词的所有方式`call`，因为它不会将它识别为关键字。并显示它接下来会看到的内容：作为变量名称（后跟`:=`for 赋值；或模式名称（后跟`.`）；或函数/过程名称（后跟`(`for参数列表）等。

# java - 我的 SSL 客户端 (Java) 没有通过双向 SSL 握手将证书发送回服务器

> ID：11744273
> 
> 赞同：10
> 
> 时间：2012-07-31T16:00:12.400
> 
> 标签：java, ssl, ssl-certificate, keystore, two-way

在 Windows 7 上运行的 Java 1.7 应用程序中，我正在尝试使用服务器执行 2 路 SSL（智能卡令牌通过 openSC 提供我的客户端证书）。服务器的证书得到客户端的验证就好了，但客户端没有响应服务器的证书请求。我相信这是因为客户端无法将我的证书链接到服务器请求的证书之一（即使存在这样的链）。

这是服务器证书请求和客户端空响应的 SSL 调试：

```
*** CertificateRequest
Cert Types: RSA, DSS, ECDSA
Cert Authorities:
<CN=c4isuite-SDNI-DC02-CA, DC=c4isuite, DC=local>
<CN=DoD Root CA 2, OU=PKI, OU=DoD, O=U.S. Government, C=US>
    ...
*** ServerHelloDone
*** Certificate chain
*** 
```

我的客户证书如下：

```
found key for : Certificate for PIV Authentication
chain [0] = [
[
  Version: V3
  Subject: CN=<...>, OU=CONTRACTOR, OU=PKI, OU=DoD, O=U.S. Government, C=US
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 2048 bits

  Issuer: CN=DOD CA-30, OU=PKI, OU=DoD, O=U.S. Government, C=US
  SerialNumber: [    05bf13] 
```

通过密钥工具，我还在信任库（java cacerts 文件）中安装了我的证书颁发者 DOD CA-30 和服务器请求的 DoD Root CA 2 之间的链接。

从 SSL 调试：

```
adding as trusted cert:
  Subject: CN=DOD CA-30, OU=PKI, OU=DoD, O=U.S. Government, C=US
  Issuer:  CN=DoD Root CA 2, OU=PKI, OU=DoD, O=U.S. Government, C=US
  Algorithm: RSA; Serial number: 0x1b5
  Valid from Thu Sep 08 10:59:24 CDT 2011 until Fri Sep 08 10:59:24 CDT 2017

adding as trusted cert:
  Subject: CN=DoD Root CA 2, OU=PKI, OU=DoD, O=U.S. Government, C=US
  Issuer:  CN=DoD Root CA 2, OU=PKI, OU=DoD, O=U.S. Government, C=US
  Algorithm: RSA; Serial number: 0x5
  Valid from Mon Dec 13 09:00:10 CST 2004 until Wed Dec 05 09:00:10 CST 2029 
```

那么问题来了，为什么客户端不能为响应制作证书链呢？以下是相关代码：

```
 // Create the keyStore from the SmartCard certs
    Provider provider = new sun.security.pkcs11.SunPKCS11(configName);

    Security.addProvider(provider);
    keyStore = KeyStore.getInstance("PKCS11", "SunPKCS11-SCR3310test");
    char[] pin = PIN.toCharArray();
    keyStore.load(null, pin);

        // Init the trustmanager
        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        tmf.init(trustStore);

        // Create the client key manager
        LOG.info("Installing keystore with pin");
        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance("SunX509");
        keyManagerFactory.init(clientKeyStore, clientKeyPassword.toCharArray());        

        sslContext.init(keyManagerFactory.getKeyManagers(), tmf.getTrustManagers(), null);

        // Init SSL context
        SSLSocketFactory socketFactory = sslContext.getSocketFactory();

        URL url = new URL(urlString);
        URLConnection connection = url.openConnection();
        if (connection instanceof HttpsURLConnection) {
            LOG.info("Connection is HTTPS");
            ((HttpsURLConnection) connection).setSSLSocketFactory(socketFactory);
        }

        // Send the request.
        connection.connect();

        InputStreamReader in = new InputStreamReader((InputStream) connection.getContent());
        ... 
```

我得到的错误是服务器返回 403。很可能是因为客户端没有向它发送客户端证书。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:26:46.597

尽管看起来您只是将服务器发送的 CA 列表的一部分复制到了这个问题中，但我假设它`CN=DOD CA-30, OU=PKI, OU=DoD, O=U.S. Government, C=US`不在这个列表中。

链中似乎缺少的是此证书（您稍后会提到）：

```
 Subject: CN=DOD CA-30, OU=PKI, OU=DoD, O=U.S. Government, C=US
  Issuer:  CN=DoD Root CA 2, OU=PKI, OU=DoD, O=U.S. Government, C=US
  Algorithm: RSA; Serial number: 0x1b5
  Valid from Thu Sep 08 10:59:24 CDT 2011 until Fri Sep 08 10:59:24 CDT 2017 
```

将证书导入客户端的信任库对客户端发送的证书绝对没有影响。*需要在客户端密钥库*中设置客户端证书（及其私钥）。此外，如果您想发送客户端证书链（如果服务器在其列表中未提供此中间 CA 证书，则此处需要），您需要将完整链与该证书条目相关联。将其他证书放入密钥库是不够的。

要解决此问题，您应该使用客户端证书链配置您的密钥库条目。这可以按照[这个答案](https://stackoverflow.com/a/9300727/372643)中的描述来完成。然而，这是一个通过 PKCS#11 访问的硬件令牌这一事实可能会使这变得更加复杂（也许卡提供了另一个证书管理工具，可能独立于 Java）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T15:39:37.210

因为我知道我需要使用哪个证书对服务器进行身份验证，所以我可以通过扩展 X509ExtendedKeyManager 强制客户端发送该特定证书，并覆盖 chooseClientAlias() 方法以始终返回该证书的别名。代码：

```
public class MyX509KeyManager extends X509ExtendedKeyManager
  {
    X509KeyManager defaultKeyManager;

    public MyX509KeyManager(X509KeyManager inKeyManager) {
        defaultKeyManager = inKeyManager;
    }

    public String chooseEngineClientAlias(String[] keyType,
            Principal[] issuers, SSLEngine engine) {
        return "<Alias of my cert>";
    }

    @Override
    public String chooseClientAlias(String[] strings, Principal[] prncpls, Socket socket) {
        return "<Alias of my cert>";
    }

    @Override
    public String[] getClientAliases(String string, Principal[] prncpls) {
        return defaultKeyManager.getClientAliases(string, prncpls);
    }

    @Override
    public String[] getServerAliases(String string, Principal[] prncpls) {
        return defaultKeyManager.getServerAliases(string, prncpls);
    }

    ... 
```

正如你所看到的，我接受了一个 defaultKeyManager，除了我想要覆盖的东西之外，我对它的任何东西都遵循。然后，要在您的 sslContext 中使用它，请执行以下操作：

```
// clientKeyStore is initialized elsewhere from the SmartCard
KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance("SunX509");
keyManagerFactory.init(clientKeyStore, clientKeyPassword.toCharArray());

MyX509KeyManager customKeyManager = new MyX509KeyManager((X509KeyManager) keyManagerFactory.getKeyManagers()[0]);
sslContext.init(new KeyManager[] {customKeyManager}, tmf.getTrustManagers(), null); 
```

# c - 更改共享库的链接

> ID：11744278
> 
> 赞同：1
> 
> 时间：2012-07-31T16:00:23.690
> 
> 标签：c, libraries, shared

我有一个可执行文件 A 用于`dlopen`打开共享库 libB.so （位于同一目录中，所以我执行 LD_LIBRARY_PATH=. 让我的程序正确找到它）。这个库 libB.so 应该在 libC.so 中找到它的一些符号，它也位于同一目录中。

但是，/usr/lib64 中还有一个 libC.so（它已使用不同的参数编译，因此它没有相同的符号），并且由于未知原因，libB.so 尝试打开这个而不是那个那是在同一个目录中。当我做 a`ldd libB.so`我可以看到`libC.so => /usr/lib64/libC.so`而不是`libC.so => /path/to/program/A/libC.so`.

有没有办法改变 libB.so 中的这个链接（如果可能的话不重新编译），或者如果我应该重新编译 libB.so，是什么让编译器选择在 /usr/lib64 中使用 libC.so 而不是另一个？

（注意：替换 /usr/lib64 中的 libC.so 不是一个选项，因为我不是平台的管理员）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:24:55.060

我弄清楚了问题所在：我在超级计算机上运行，​​当然在程序实际运行之前，有些事情是在后台使用环境变量完成的。这弄乱了我的共享库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:13:42.817

如果我正确理解了手册页，则 LD_LIBRARY_PATH 应该取代系统范围的路径，例如`/usr/lib64`，所以我不确定为什么这不起作用。

它是一个 setuid / setgid 程序吗？LD_LIBRARY_PATH 被忽略。

当前路径 ( `.`) 是否正在发生变化，以至于`LD_LIBRARY_PATH=.`不再让 libB 找到 libC？

通过[strace](http://linux.die.net/man/1/strace)运行程序应该可以让您看到 ldd 正在检查 libC 的目录；这可能会帮助您调试搜索的位置和方式。

# php - 在 PHP 中读取 Json/Array 字符串

> ID：11744280
> 
> 赞同：2
> 
> 时间：2012-07-31T16:00:25.137
> 
> 标签：php, arrays, json, indexing

我有一个有效 Json 格式的字符串，它看起来像这样：

```
{
    "message": "success",
    "result": {
        "46620": {
            "course_id": "29",
            "en_title": "Google Analytics (Basic)",
            "fa_title": "Ù…Ø¨Ø§Ù†ÛŒ Ú¯ÙˆÚ¯Ù„ Ø¢Ù†Ø§Ù„ÛŒØªÛŒÚ©Ø²",
            "badge_link": "http://www.darsnameh.com/badge/index.php?user=46620&badge="
        },
        "49449": {
            "course_id": "16",
            "en_title": "Multimedia Reporting 1- Reporting in the Internet Age",
            "fa_title": "Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯Ø±ÛŒ Ú†Ù†Ø¯Ø±Ø³Ø§Ù†Ù‡â€ŒØ§ÛŒ Û±- Ú¯Ø²Ø§Ø±Ø´Ú¯Ø±ÛŒ Ø¯Ø± Ø²Ù…Ø§Ù†Ù‡â€ŒÛŒ Ø§ÙŠÙ†ØªØ±Ù†Øª",
            "badge_link": "http://www.darsnameh.com/badge/index.php?user=49449&badge="
        },
        "55480": {
            "course_id": "33",
            "en_title": "HTML for Journalists and Bloggers",
            "fa_title": "Ø¢Ø´Ù†Ø§ÛŒÛŒ Ø¨Ø§ Ø§Ú†â€ŒØªÛŒâ€ŒØ§Ù…â€ŒØ§Ù„ Ùˆ ÙÙ†Ø§ÙˆØ±ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¨Ø±Ø§ÛŒ Ø±ÙˆØ²Ù†Ø§Ù…Ù‡â€ŒÙ†Ú¯Ø§Ø±Ø§Ù† Ùˆ ÙˆØ¨Ù„Ø§Ú¯â€ŒÙ†ÙˆÛŒØ³â€ŒÙ‡Ø§",
            "badge_link": "http://www.darsnameh.com/badge/index.php?user=55480&badge="
        },
        "59250": {
            "course_id": "31",
            "en_title": "Twitter",
            "fa_title": "ØªÙˆÛŒÛŒØªØ±",
            "badge_link": "http://www.darsnameh.com/badge/index.php?user=59250&badge="
        },
        "103716": {
            "course_id": "42",
            "en_title": "How to write a CV?",
            "fa_title": "Ú†Ú¯ÙˆÙ†Ù‡ Ø±Ø²ÙˆÙ…Ù‡ Ø¨Ù†ÙˆÛŒØ³ÛŒÙ…ØŸ",
            "badge_link": "http://www.darsnameh.com/badge/index.php?user=103716&badge="
        }
    }
} 
```

我想读取不同的字段，例如所有 fa_titles，我使用 $obj = json_decode($str, true); 将其转换为 Json，然后 echo sizeof($obj['result']); 显示它有 5 个结果对象，但我现在如何访问 fa_title 或 en_title 字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:05:05.040

要遍历所有结果，应该这样做：

```
$obj = json_decode($str);
foreach ($obj->result as $result)
{
    $fa_title = $result->fa_title;
    $en_title = $result->en_title;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:05:30.957

在 JSON 中，数组由方括号 ( `[`and `]`) 指定，而字典只有大括号 ( `{`and `}`)。

您可以通过执行单独访问每个结果对象`$obj['result']['46620']['en_title']`。结果对象是关联数组的关联数组（也称为字典）。

您还可以使用循环遍历每个对象`foreach`，如[this question所示](https://stackoverflow.com/questions/26007/iterating-over-a-complex-associative-array-in-php)

# php - 使用 Codeigniter 在 InnoDB/MySQL 数据库中模拟全文搜索的最佳方法

> ID：11744281
> 
> 赞同：4
> 
> 时间：2012-07-31T16:00:27.907
> 
> 标签：php, mysql, codeigniter, search, innodb

我正在 codeigniter php 框架中构建一个电子商务系统，它需要一个完整的产品搜索。我在 MySQL 数据库中使用了 InnoDB 引擎，因为它的优点是支持外键来强制引用完整性或行锁定而不是表锁定，但它不支持全文索引:'(

唯一的问题是我需要搜索产品表以进行站点搜索，因此我需要一种替代全文索引的方法，该方法也与 Codeigniter 兼容。有没有人有任何建议？我已经研究过创建一个单独的可搜索表和狮身人面像，但它们看起来令人困惑：S

**编辑**

与主机核对后，我无法使用 Sphinx，因为该站点位于共享主机上，并且我的主机提供商不允许安装，因为它需要 root 级别权限，并且他们不会进行系统范围的安装，因为它是第 3 方他们不能保证它的安全性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-13T07:16:00.427

我建议你简单地更新你的 MySQL。 [InnoDB 全文搜索 (FTS) 终于在 MySQL 5.6.4 版本中可用。](http://dev.mysql.com/doc/refman/5.6/en/innodb-storage-engine.html#idp107829680)

这些索引在物理上表示为整个 InnoDB 表，由 SQL 关键字（例如 CREATE INDEX 语句的 FULLTEXT 子句、SELECT 语句中的 MATCH() ... AGAINST 语法和 OPTIMIZE TABLE 语句）执行。来自[全文索引](http://dev.mysql.com/doc/refman/5.6/en/innodb-table-and-index.html#innodb-fulltext-index)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:27:17.363

最简单的方法是为产品的文本数据创建一个 MyISAM 表并针对它运行搜索查询。然后你可以每天用一个 cron 作业重建 MyISAM 表中的数据，以确保一致性。或者您可以让您的模型在每次更新时更新 MyISAM 表中的数据。

# java - 如何将平面文件中的记录插入到 sql 数据库表中？

> ID：11744282
> 
> 赞同：-3
> 
> 时间：2012-07-31T16:00:27.350
> 
> 标签：java, sql

我目前正在尝试将数据从平面文件复制到 SQL 表中，并将此事务记录在日志表平面文件列中

```
table name=personal data

firstname,
lastname,
age,
date_of_birth,
state,
country 
```

和 sql 表名=收件箱

```
colums=
firstname varchar,
lastname varchar,
age int,
date_of_birth date,
state varchar,
country varchar, 
```

平面文件中的数据用逗号分隔。我希望该表对数据类型敏感，例如 firstname colum 不应包含 int 数据类型等。如果数据类型错误，它应该将平面文件发送到另一个名为 outbox 的表

我还希望它有一个名为 audit_rec 的日志表，用于跟踪所有完成的副本和失败的列 =

```
timecopied timespam()
name_of_file
failed_to_copy
reason_of_failure 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:12:10.357

据我所知，没有标准的 SQL 方法来导入平面文件，但许多 SQL 实现都包含一个扩展来提供这种功能。例如 MySQL 有“加载数据”语句，而 Postgres 有“复制自”。您应该检查您正在使用的任何数据库的文档，看看有什么可用的以及语法是什么。

也就是说，您声明当数据类型不正确时，您希望将记录写入另一个文件，这可能会使您超出任何内置语言功能将为您做的事情。您可能必须编写一个程序，逐个读取记录，解析每个记录，检查错误，然后对适当的文件执行插入语句。

# perl - 对于 Perl 中的每个循环

> ID：11744283
> 
> 赞同：0
> 
> 时间：2012-07-31T16:00:34.667
> 
> 标签：perl

我想打印一个用制表符分隔的数组中的每个元素。这是我写的代码：

`print FILEOUT $_,"\t" foreach @data;`

我在打印时遇到问题。额外选项卡从第二行开始打印。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T16:03:00.713

Use [join](http://perldoc.perl.org/functions/join.html) instead:

```
print FILEOUT join("\t", @data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:55:35.163

我认为@array 的每个元素的末尾都有一个“\n”。

```
my @data = ("1\n", "2\n", "3\n");
print join "\t", map { chomp; $_; } @data;
print "\n"; 
```

# jaxb - 从 WSDL 创建 JAXB 类时出错

> ID：11744285
> 
> 赞同：0
> 
> 时间：2012-07-31T16:00:46.433
> 
> 标签：jaxb, wsdl, schema, xjc

首先，我刚刚开始研究 Web 服务，但我陷入了第一步，即从提供的 wsdl/xsd 创建 java 类。我正在运行以下 ant 任务来创建 java 类并将它们包装在给定位置的 jar 文件中。

**错误 ：**

```
[xjc] [ERROR] s4s-elt-schema-ns: The namespace of element 'definitions' must be from the schema namespace, 'http://www.w3.org/2001/XMLSchema'.
      [xjc]   line 2 of file:/Users/deblinakarmakar/Desktop/work/Wland/wonderland/hybris/bin/custom/wonderlandcore/resources/taxware/BatchTaxCalculationManagerService.wsdl
      [xjc] 
      [xjc] [ERROR] s4s-elt-invalid: Element 'definitions' is not a valid element in a schema document.
      [xjc]   line 2 of file:/Users/deblinakarmakar/Desktop/work/Wland/wonderland/hybris/bin/custom/wonderlandcore/resources/taxware/BatchTaxCalculationManagerService.wsdl 
```

**这是我的 WSDL 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="http://ws.taxware.com/service" xmlns:wns="http://ws.taxware.com/service" xmlns:tns="http://ws.taxwareenterprise.com" xmlns:ens="http://ws.taxware.com/exception" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">

 <wsdl:types>
  <schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://ws.taxwareenterprise.com" elementFormDefault="qualified">

   <!-- This schema import is for the common complex types for both batch and tax. -->
   <!-- PLEASE DO NOT OVVERRIDE THIS WSDL FILE WITH ANY COMMON COMPLEX TYPE USED BY BOTH TAX AND BATCH WSDLs -->
   <import namespace="http://ws.taxwareenterprise.com" schemaLocation="TaxBatchCommon.xsd"/>
   <import namespace="http://ws.taxwareenterprise.com" schemaLocation="BatchTaxCalculationTypes.xsd"/>

  <xs:element name="batchCalculateDocumentRequest" type="tns:BatchTaxCalculationRequest"/>
  <xs:element name="batchCalculateDocumentRequestResponse"/>
  <xs:element name="cancelBatchRequestResponse"/>
  <xs:element name="endBatchRequestResponse"/>
  <xs:element name="cancelBatchRequest" type="tns:BatchIdRequest"/>
  <xs:element name="endBatchRequest" type="tns:BatchIdRequest"/>
  <xs:element name="removeBatchResultsRequest" type="tns:BatchIdRequest"/>
  <xs:element name="getBatchExceptionsRequest" type="tns:BatchIdRangeRequest"/>
  <xs:element name="getBatchExceptionsResponse" type="tns:ExceptionsResponse"/>
  <xs:element name="getBatchResultsRequest" type="tns:BatchIdRangeRequest"/>
  <xs:element name="getBatchResultsResponse" type="tns:GetBatchResultsResponse"/>
  <xs:element name="getBatchSuccessCountRequest" type="tns:BatchIdRequest"/>
  <xs:element name="getBatchSuccessCountResponse" type="tns:CountResponse"/>
  <xs:element name="isBatchCompleteRequest" type="tns:BatchIdRequest"/>
  <xs:element name="isBatchCompleteResponse" type="tns:IsBatchCompleteResponse"/>
  <xs:element name="startBatchRequest" type="tns:StartBatchRequest"/>
  <xs:element name="startBatchResponse" type="tns:BatchIdResponse"/>
  </schema>
 </wsdl:types>

 <wsdl:message name="cbRequest">
   <wsdl:part name="request" element="tns:cancelBatchRequest"/>
  </wsdl:message>

  <wsdl:message name="cbResponse">
    <wsdl:part name="request" element="tns:cancelBatchRequestResponse"/>
  </wsdl:message>

  <wsdl:message name="ebRequest">
   <wsdl:part name="request" element="tns:endBatchRequest"/>
  </wsdl:message>

  <wsdl:message name="ebResponse">
   <wsdl:part name="request" element="tns:endBatchRequestResponse"/>
  </wsdl:message>

  <wsdl:message name="bcdRequest">
   <wsdl:part name="request" element="tns:batchCalculateDocumentRequest"/>
  </wsdl:message>

  <wsdl:message name="bcdResponse">
    <wsdl:part name="request" element="tns:batchCalculateDocumentRequestResponse"/>
 </wsdl:message>

 <wsdl:message name="gbeRequest">
  <wsdl:part name="request" element="tns:getBatchExceptionsRequest"/>
 </wsdl:message>

 <wsdl:message name="gbeResponse">
  <wsdl:part name="result" element="tns:getBatchExceptionsResponse"/>
 </wsdl:message>

 <wsdl:message name="gbrRequest">
  <wsdl:part name="request" element="tns:getBatchResultsRequest"/>
 </wsdl:message>

 <wsdl:message name="gbrResponse">
  <wsdl:part name="result" element="tns:getBatchResultsResponse"/>
 </wsdl:message>

 <wsdl:message name="gbscRequest">
  <wsdl:part name="request" element="tns:getBatchSuccessCountRequest"/>
 </wsdl:message>

 <wsdl:message name="gbscResponse">
  <wsdl:part name="result" element="tns:getBatchSuccessCountResponse"/>
 </wsdl:message>

 <wsdl:message name="ibcRequest">
  <wsdl:part name="request" element="tns:isBatchCompleteRequest"/>
 </wsdl:message>

 <wsdl:message name="ibcResponse">
  <wsdl:part name="result" element="tns:isBatchCompleteResponse"/>
 </wsdl:message>

 <wsdl:message name="rbrRequest">
  <wsdl:part name="request" element="tns:removeBatchResultsRequest"/>
 </wsdl:message>

 <wsdl:message name="sbRequest">
  <wsdl:part name="request" element="tns:startBatchRequest"/>
 </wsdl:message>

 <wsdl:message name="sbResponse">
  <wsdl:part name="result" element="tns:startBatchResponse"/>
 </wsdl:message>

 <wsdl:message name="twFault">
  <wsdl:part name="fault" element="tns:tweFault"/>
 </wsdl:message>

 <wsdl:portType name="BatchTaxCalculationManagerServiceInterface">
 <wsdl:operation name="calculateDocument">
    <wsdl:input message="wns:bcdRequest"/>
    <wsdl:fault name="twFault" message="wns:twFault"/>
  </wsdl:operation>

   <wsdl:operation name="cancelBatch">
    <wsdl:input message="wns:cbRequest"/>
    <wsdl:fault name="twFault" message="wns:twFault"/>
   </wsdl:operation>

   <wsdl:operation name="endBatch">
    <wsdl:input message="wns:ebRequest"/>
    <wsdl:fault name="twFault" message="wns:twFault"/>
   </wsdl:operation>

   <wsdl:operation name="getBatchExceptions">
    <wsdl:input message="wns:gbeRequest"/>
    <wsdl:output message="wns:gbeResponse"/>
    <wsdl:fault name="twFault" message="wns:twFault"/>
   </wsdl:operation>

   <wsdl:operation name="getBatchResults">
    <wsdl:input message="wns:gbrRequest"/>
    <wsdl:output message="wns:gbrResponse"/>
    <wsdl:fault name="twFault" message="wns:twFault"/>
   </wsdl:operation>

   <wsdl:operation name="getBatchSuccessCount">
    <wsdl:input message="wns:gbscRequest"/>
    <wsdl:output message="wns:gbscResponse"/>
    <wsdl:fault name="twFault" message="wns:twFault"/>
   </wsdl:operation>

   <wsdl:operation name="isBatchComplete">
    <wsdl:input message="wns:ibcRequest"/>
    <wsdl:output message="wns:ibcResponse"/>
    <wsdl:fault name="twFault" message="wns:twFault"/>
   </wsdl:operation>

   <wsdl:operation name="removeBatchResults">
    <wsdl:input message="wns:rbrRequest"/>
     <!--<wsdl:output message="wns:ibcResponse"/>-->
    <wsdl:fault name="twFault" message="wns:twFault"/>
   </wsdl:operation>

   <wsdl:operation name="startBatch">
    <wsdl:input message="wns:sbRequest"/>
    <wsdl:output message="wns:sbResponse"/>
    <wsdl:fault name="twFault" message="wns:twFault"/>
  </wsdl:operation>

 </wsdl:portType>

 <wsdl:binding name="BatchTaxCalculationManagerServiceSoapBinding" type="wns:BatchTaxCalculationManagerServiceInterface">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="calculateDocument">
        <soap:operation soapAction="http://ws.taxwareenterprise.com/calculateDocument"  style="document" /> 
        <wsdl:input>
            <soap:body use="literal"/>
         </wsdl:input>
         <wsdl:fault name="twFault">
            <soap:fault name="twFault" use="literal"/>
        </wsdl:fault>   
    </wsdl:operation>

    <wsdl:operation name="cancelBatch">
        <soap:operation soapAction="http://ws.taxwareenterprise.com/cancelBatch"  style="document" />   
        <wsdl:input>
        <soap:body use="literal"/>
    </wsdl:input>
    <wsdl:fault name="twFault">
        <soap:fault name="twFault" use="literal"/>
        </wsdl:fault>   
    </wsdl:operation>

    <wsdl:operation name="endBatch">
        <soap:operation soapAction="http://ws.taxwareenterprise.com/endBatch"  style="document" />  
        <wsdl:input>
        <soap:body use="literal"/>
    </wsdl:input>
    <wsdl:fault name="twFault">
        <soap:fault name="twFault" use="literal"/>
        </wsdl:fault>   
     </wsdl:operation>

     <wsdl:operation name="getBatchExceptions">
        <soap:operation soapAction="http://ws.taxwareenterprise.com/getBatchExceptions"  style="document" />
        <wsdl:input>
              <soap:body use="literal"/>
         </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
         </wsdl:output>
         <wsdl:fault name="twFault">
            <soap:fault name="twFault" use="literal"/>
        </wsdl:fault>
     </wsdl:operation>

     <wsdl:operation name="getBatchResults">
        <soap:operation soapAction="http://ws.taxwareenterprise.com/getBatchResults"  style="document" />
        <wsdl:input>
            <soap:body use="literal"/>
         </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
         </wsdl:output>
         <wsdl:fault name="twFault">
            <soap:fault name="twFault" use="literal"/>
        </wsdl:fault>
     </wsdl:operation>

     <wsdl:operation name="getBatchSuccessCount">
        <soap:operation soapAction="http://ws.taxwareenterprise.com/getBatchSuccessCount"  style="document" />
        <wsdl:input>
              <soap:body use="literal"/>
          </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
         </wsdl:output>
         <wsdl:fault name="twFault">
            <soap:fault name="twFault" use="literal"/>
        </wsdl:fault>
     </wsdl:operation>

    <wsdl:operation name="isBatchComplete">
        <soap:operation soapAction="http://ws.taxwareenterprise.com/isBatchComplete"  style="document" />
        <wsdl:input>
            <soap:body use="literal"/>
         </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
         </wsdl:output>
         <wsdl:fault name="twFault">
            <soap:fault name="twFault" use="literal"/>
        </wsdl:fault>
    </wsdl:operation>

    <wsdl:operation name="removeBatchResults">
        <soap:operation soapAction="http://ws.taxwareenterprise.com/removeBatchResults"  style="document" />
        <wsdl:input>
             <soap:body use="literal"/>
         </wsdl:input>
         <wsdl:fault name="twFault">
            <soap:fault name="twFault" use="literal"/>
        </wsdl:fault>
    </wsdl:operation>

    <wsdl:operation name="startBatch">
        <soap:operation soapAction="http://ws.taxwareenterprise.com/startBatch"  style="document" />
        <wsdl:input>
            <soap:body use="literal"/>
         </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
         </wsdl:output>
         <wsdl:fault name="twFault">
            <soap:fault name="twFault" use="literal"/>
        </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>

  <wsdl:service name="BatchTaxCalculationManagerServiceService">
   <wsdl:port name="BatchTaxCalculationManagerService" binding="wns:BatchTaxCalculationManagerServiceSoapBinding">
    <soap:address location="http://localhost:8086/twe/services/BatchTaxCalculationManagerService"/>
   </wsdl:port>
  </wsdl:service>

</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:05:04.997

嘿，谢谢你的回答，但我自己解决了这个问题。问题出在我的蚂蚁任务上。从 wsdl 为 Taxware 生成身份验证服务 JAXB

```
 <property name="taxware.schema.dir" location="${wonderlandcore}/resources/taxcalculation" />
            <make_jaxb_jar extname="wonderlandcore"
                    package="org.wonderlandcore.taxcalculation.jaxb"
                    schemadir="${taxware.schema.dir}"
                    bindingdir="${taxware.schema.dir}"
                    includes="**/*.wsdl"
                    excludes=""
                    destjarname="taxware_calculation"
                    xjc-arg="-wsdl"
                     />
    </target> 
```

我之前错过了“xjc-arg="-wsdl"，所以没有为 wsdl 设置任务。现在工作正常。

# php - 上传 FTP 时 PHP 脚本更改为随机字符

> ID：11744287
> 
> 赞同：0
> 
> 时间：2012-07-31T16:00:52.840
> 
> 标签：php, ftp, ascii, filezilla

这里有点奇怪的问题。

我在我的工作机器上使用 FileZilla 和 Notepad++。

基本上每当我上传 PHP 脚本时，所有代码都会变成随机字符

例如这段代码：

```
<?php echo 'hello world'; ?> 
```

变成

```
<?php ਍攀挀栀漀 ✀栀攀氀氀漀✀㬀ഀ ?> 
```

我的 FTP 传输模式设置为 ASCII。我做错了什么，是不是一个糟糕的 FTP 设置？

谢谢彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:23:23.750

祝你的新办公室好运！xD

仅当您使用纯文本文件并且只有当您拥有需要正确编码文本文件的代码、脚本时，使用 ASCII 模式的 ftp 传输才（曾经）有用。

**ASCII 模式实际上意味着“将此文件作为文本文件处理”**

您**可能**需要正确编码的文本文件是“真正的文本文件”： **txt、ini、conf**（php 输出 html/xml，然后行尾不相关）

由 FTP ASCII 模式对行结束字节进行的替换可能会损坏整个文件，并带有一些编码......实际上这不应该发生在 UTF-8 上，那么显然，您正在使用其他一些编码。 ..

在我看来，在 2012 年，最好保留上传的文件：客户端、脚本和应用程序应该能够正确解析任何系统的任何文本文件。

然后：**作为二进制文件上传，并确保您的脚本可以处理任何行尾字节序列**

例如，如果您需要按行尾拆分，请使用

```
// works everywhere with any file with any line ending
preg_split('/\r\n|\r|\n/', $text); 
```

代替

```
// works everywhere but only with files that contain
// line endings equivalent to the actual PHP_EOL content
explode(PHP_EOL, $text); 
```

希望已经清楚...随时纠正我的英语！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:41:53.190

您的 ftp 客户端破坏了您输入的字符集。将上传模式更改为二进制，您就完成了。

# php - 在页面刷新时保留基于选择框的值

> ID：11744288
> 
> 赞同：0
> 
> 时间：2012-07-31T16:00:56.743
> 
> 标签：php, jquery

我有一种形式，在选择框中我有两个选项“oui”和“non”：

*   选择“oui”时显示“hello”
*   选择“non”时显示“not valid”

我的问题是当我提交表单后刷新页面时，“oui”或“non”被正确选择，但不是基于它的值，如“hello”或“not valid”

这是一些代码

```
<p>choose option: <select name="opt" class="slct">
    <option value="0" selected="selected">--</option>
    <option value="oui">Oui</option>
    <option value="non">Non</option>
    </select>
</p>
<div id="oui" class="brandDiv">
  hello
</div>
<div id="non" class="brandDiv">
  not valid
</div> 
```

和jQuery

```
function showhide() {
$("div.brandDiv").hide();
$("select.slct").bind('change', function() {
    $('div.brandDiv').hide();
    var targetId = $(this).val();
    $('div#' + targetId).show();
});
} 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:10:51.403

你不能只触发（）dom 上的更改事件吗？

```
$("select.slct").trigger('change'); 
```

或者

```
$("select.slct").change(); 
```

或者，如果我理解正确，您有一个名为 showhide() 的函数

```
$(function(){  // <-- on dom ready
      showhide(); // <-- run function
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:05:32.153

那么添加以下内容呢？

```
$( function() {
    $("select.slct").each(
      function() {
        $('div.brandDiv').hide();
        var targetId = $(this).val();
        $('div#' + targetId).show();
      }
    );
  }
) 
```

# javascript - Facebook JS SDK 注销问题 - 预期的可疑登录检测

> ID：11744291
> 
> 赞同：1
> 
> 时间：2012-07-31T16:01:00.260
> 
> 标签：javascript, authentication, facebook-javascript-sdk, facebook-authentication

我们有一个信息亭/终端风格的解决方案，其中我们遵循以下流程：

1.  用户在我们的系统中识别自己。
2.  用户登陆我们系统上的个人资料页面并点击添加 FB 帐户。
3.  用户授予权限。
4.  用户被重定向到我们的注销页面。
5.  用户在退出前可以选择喜欢一个页面。
    1.  在这个问题的情况下，FB Like Social Plugin 的小 iframe 会重定向到 Connection Error 页面
    2.  显然，正如预期的那样，甚至 Logout 链接也停止工作。
6.  在没有错误的情况下，用户使用我们注销页面上的注销链接注销。
7.  用户退出 Facebook 并重定向到我们系统上的个人资料页面。
8.  用户退出我们的系统。

对在场的多个用户重复上述内容。

可以在[此处](https://gist.github.com/d4952a6ba58c8aa961ff)找到与问题相关的使用的整体流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:26:02.060

参考新的js sdk：

乍一看，如果like按钮被破坏，这可能是由于您的文档设置或时间问题......我建议从js sdk async中加载like按钮并使用xfbml解析它

```
<div id="likebutton"></div>
<div id="fb-root"></div>
<script>
function likebutton(){
var likeb=document.getElementById('likebutton');
likeb.innerHTML+='<div class="fb-like-box" data-href="<?=$fblike;?>" data-width="500" data-show-faces="false" data-stream="false" data-header="false"></div>';
FB.XFBML.parse(likeb);
};
window.fbAsyncInit = function() {
        FB.init({
    appId  : 'AppID',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true, // parse XFBML
    oauth  : true // enable OAuth 2.0
        });
likebutton();
      };
  // Load the SDK Asynchronously
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 
```

# javascript - 自动完成组合框

> ID：11744293
> 
> 赞同：0
> 
> 时间：2012-07-31T16:01:03.540
> 
> 标签：javascript, html, json, asp.net-mvc-3

我使用 HTML、JavaScript、ASP .NET MVC3 和 JSON 进行自动完成。

我有一个文本框，我在其中实现了自动完成功能。但我想将文本框更改为组合框。我可以使用某种标签轻松地将其更改为组合框吗？如果有，标签的一些属性是什么？例如不允许搜索自定义文本，以便只能提交来自自动完成的建议输入。如果不是，我该如何实现这种组合框。这就是我现在的代码。

HTML：

```
<div id = "inputTable">
<table>
    <tr>
        <td><span class="labelText">Text1</span></td> 
        <td><input id="text1" type="text" placeholder="Enter Text1" data-text1autocomplete="@Url.Action("searchText1", "Scan")"/> </td> 
        <td style="width: 200px; text-align: left; margin-left: 5px"><button class="medium awesome blue" id="sendText1Button">Send Text1</button></td>
    </tr>
    <tr>
        <td> <span class="labelText">Text2</span> </td> 
        <td><input id="text2" type="text" placeholder="Enter Text2" data-text2autocomplete="@Url.Action("searchText2", "Scan")"/> </td>   
        <td style="width: 200px; text-align: left; margin-left: 5px"> <button class="medium awesome blue" id="sendText2Button">Send Text2</button> </td>
    </tr>
</table> 
```

JavaScript：

```
<script type="text/javascript">
$(document).ready(function () {

    $(':input[data-text1autocomplete]').each(function () {
        $(this).autocomplete({ source: $(this).attr("data-text1autocomplete") });
    });

    $(':input[data-text2autocomplete]').each(function () {
        $(this).autocomplete({ source: $(this).attr("data-text2autocomplete") });
    });

    $('#sendText1Button').click(function () {
        var text1 = $("#text1").val();
        $('#loadingUsageInfo').css({ 'visibility': 'visible' });
        if (text1 == "" || text1 == 'Enter Text1') {
            alert('Enter Text1 First');
            return;
        }
        $.ajax({
            url: '@Url.Action("ShowTable1", "Scan")',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify({ inputText1: text1 }),
            traditional: true,
            success: function (result) {
                $('#hostusageinfo').html(result);
            }
        });
        $('#text1').val("");
        $('#text2').val("");
    });

    $('#sendText2Button').click(function () {
        var text2 = $("#text2").val();
        $('#loadingUsageInfo').css({ 'visibility': 'visible' });
        if (text2 == "" || text2 == 'Enter Text2') {
            alert('Enter Text2 First');
            return;
        }

        $.ajax({
            url: '@Url.Action("ShowTable2", "Scan")',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify({ inputText2: text2 }),
            traditional: true,
            success: function (result) {
                $('#hostusageinfo').html(result);
            }
        });
        $('#text1').val("");
        $('#text2').val("");
    });

    $('#text1, #text2').keypress(function (e) {
        if (e.which == 13) {
            var text1 = $("#text1").val();
            var text2 = $("#text2").val();
            if ((text1 == "" || text1 == 'Enter Text1') && (text2 == "" || text2 == 'Enter Text2')) {
                alert('Enter Text First');
                return;
            }
            else if (text1 == "" || text1 == 'Enter Text1')
                $('#sendText2Button').trigger('click');
            else if (text2 == "" || text2 == 'Enter Text2')
                $('#sendText1Button').trigger('click');
        }
    });

}); 
```

感谢任何可以提供帮助的人！

# spring-mvc - xml根元素的静态内部类的请求体

> ID：11744295
> 
> 赞同：0
> 
> 时间：2012-07-31T16:01:07.313
> 
> 标签：spring-mvc, jaxb2

我正在尝试从 XML（请求正文）中解析出一个对象。我的控制器方法的标题是

```
public ModelAndView differentTypeOfIds(@RequestBody DiffIdsRequest.DescBatch body){ 
```

其中 DescBatch 是静态内部类

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = { 
    "descBatch"
})  
@XmlRootElement(name = "diffIdsRequest")
public class DiffIdsRequest {

    @XmlElement(name = "desc-batch", required = true)
    protected DiffIdsRequest.DescBatch descBatch;

    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = { 
        "descItem"
    })  
    public static class DescBatch { 
```

一小段 servlet 配置

```
<oxm:jaxb2-marshaller id="marshaller">
    <oxm:class-to-be-bound name="eu.eudml.restModel.DiffIdsRequest$DescBatch" />
</oxm:jaxb2-marshaller> 
```

在日志中我可以看到行

```
2012-07-31 17:34:11,604   [] [pool-2-thread-1] INFO  o.s.oxm.jaxb.Jaxb2Marshaller - Creating JAXBContext with clas    ses to be bound [class eu.eudml.restModel.DiffIdsRequest$DescBatch] 
```

似乎没问题，但是当我发送一些数据（没有任何命名空间的 xml）时，不会调用 differentTypeIds 方法。ModelAndView 为空（日志）。

内部类或其他有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:21:24.403

你似乎失踪了`@XmlRootElement`或`@XmlType`在`DescBatch`. 此外，您必须确保将 Accept 标头`application/xml`作为请求的一部分发送。

# javascript - 如何根据表单字段 type="number" 自动更新价格

> ID：11744296
> 
> 赞同：2
> 
> 时间：2012-07-31T16:01:07.197
> 
> 标签：javascript, input, field, auto-update

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:03:45.717

You need to use the [`change`](http://api.jquery.com/change/) event.

```
$(document).ready(function(){
    $('#product').change(function(){
        $('#result').text($(this).val() * 25.99);
    });    
});​ 
```

Also, you might want to add a minimum value for your input field:

```
<input name="shares" id="product" type="number" min=0 /> 
```

# wolfram-mathematica - Rule 30 Cellular Automata 3 colors in Mathematica

> ID：11744297
> 
> 赞同：0
> 
> 时间：2012-07-31T16:01:15.833
> 
> 标签：wolfram-mathematica, cellular-automata

May I ask you if I can use the CA rule 30 with 3 colors in Mathematica?

Regards,

Daniele

# python - Add field from another model Django

> ID：11744301
> 
> 赞同：5
> 
> 时间：2012-07-31T16:01:22.657
> 
> 标签：python, django, admin

I have the follow Models (an example, not really one):

```
class ModelB(models.Model):
  name = models.CharField(max_length=50)

  def __str__(self):
    return self.name

class ModelA(models.Model):
  code = models.CharField(max_length=50, unique=True, help_text="Code unique")
  foreignkey = models.ForeignKey(ModelB, unique=True) 
```

And in my admin.py I have:

```
class ModelBAdmin(admin.ModelAdmin):
  list_display = ('name',)

class ModelAAdmin(admin.ModelAdmin):
  list_display = ('code', 'foreignkey')

admin.site.register(ModelA, ModelAAdmin)
admin.site.register(ModelB, ModelBAdmin) 
```

I would make something similar to:

```
class ModelBAdmin(admin.ModelAdmin):
   list_display = ('name', 'code') 
```

The code must be the code-relation from ModelA-code. How I can make this?

P.D.: Sorry for my english...

Thx a lot, Antonio.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T16:25:30.097

您的评论表明，实际上您感兴趣的根本不是列表显示，而是编辑。为此，您应该使用内联表单：

```
class ModelAInline(admin.StackedInline):
  model = ModelA

class ModelBAdmin(admin.ModelAdmin):
  list_display = ('name',)
  inlines = [ModelAInline]

admin.site.register(ModelA, ModelAAdmin) 
```

现在，在编辑表单上，每个 ModelA 都有一个 ModelB 列表，您可以在下面直接编辑。

（请注意，您应该使用 OneToOneField，而不是使用 unique=True 的 ForeignKey。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T16:52:19.737

您可以通过这种方式定义自定义项`list_display`：

```
class ModelBAdmin(admin.ModelAdmin):

    def modelA_Codes(self, inst):
        return ','.join([b.code for b in inst.modela_set.all()])

    list_display = ('name', 'modelA_Codes') 
```

由于一个模型B 可以附加到多个模型A 项目，您可能需要返回指定模型B 的适用代码列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T17:14:41.040

感谢@vartec、@DanielRoseman 和@Tisho。最后，根据您的建议，我提出了下一个（我认为不，它非常有效......但其他方法会引发错误......）

```
class SubvencionCAAdmin(admin.ModelAdmin):
  search_fields = ['nombre', 'tipo', 'resumen']

  def Subvencion_Code(self):
      lista_subvenciones = Subvencion.objects.all()
      for subvencion in lista_subvenciones :
            if (self.nombre == subvencion.CA.nombre):
                return subvencion.codigo

  list_display = ('nombre', Subvencion_Code) 
```

SubvencionCAAdmin 相当于“ModelB”，“Subvencion”相当于“ModelA”。

非常感谢

# html - 导航栏未正确填充屏幕宽度

> ID：11744305
> 
> 赞同：0
> 
> 时间：2012-07-31T16:01:37.917
> 
> 标签：html, css

所以，我正在为我的网站制作一个导航栏，但问题是，我似乎无法让它适合整个屏幕宽度。（注意：仍在工作吧，所以如果有任何无用的代码，请尽量忽略它：P）

当我做自动宽度（在左边距上）时，它只填充屏幕的一小部分，但是当我做 100% 宽度时，它不会显示实际的按钮。我可以做 px 或 em，因为它会与不同的屏幕尺寸混淆。

任何帮助都会很棒，谢谢！

HTML-`

```
<ul class="menu">  
<li class="menu"><a href="/wordpress/">Home</a></li>
<li><a href="/wordpress/">About</a></li>
<li><a href="/wordpress/">Blog</a></li>
<li><a href="/wordpress/">Services</a></li>
<li><a href="/wordpress/">Portfolio</a> </li>
<li><a href="/wordpress/">Contacts</a></li> 
```

* * *

CSS-

```
 ul.menu a {  
    display: inline-block;  
    padding: 0 30px;
    border-left: 0px solid rgba(255,255,255,0.1);  
    border-right: 0px solid rgba(0,0,0,0.1);  
    text-align: center;  
    line-height: 50px;  
    background-image: linear-gradient(bottom, #363636 19%, #1A1A1A 53%, #000000 80%);
    background-image: -o-linear-gradient(bottom, #363636 19%, #1A1A1A 53%, #000000 80%);
    background-image: -moz-linear-gradient(bottom, #363636 19%, #1A1A1A 53%, #000000 80%);
    background-image: -webkit-linear-gradient(bottom, #363636 19%, #1A1A1A 53%, #000000 80%);
    background-image: -ms-linear-gradient(bottom, #363636 19%, #1A1A1A 53%, #000000 80%);

    -webkit-transition-property: c0c0c0;  
    -webkit-transition-duration: 300ms;  
    -moz-transition-property: c0c0c0;  
    -moz-transition-duration: 300ms;
    margin-top: -8.3em;
    position: fixed;
    }   

}  

ul {  
    margin-left: -18px;  
    padding: 0;
    position: fixed;
    width: 100%;

}  

ul.menu {  
    height: 30px;  
    border-left: 0px solid ;  
    border-right: 0px solid ;
    float:left; 

    padding:0;
}  

ul.menu li {  
    display:inline-block;
    list-style: none;
    float:left;  
    height: 30px;  
    text-align: center;  

    }  

ul li a:hover {  
    background: #000000;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:10:52.563

将链接放在各个 < li ></li > 标记之间。要将元素扩展到屏幕宽度，请使用 width: 100%;。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:16:28.247

尝试做这样的事情......

我在想你的按钮没有以 100% 的宽度显示的原因是因为你需要显示你的`<li>`as 块或 inline-block，并且因为你的标记不太正确。

```
.menu {  
    margin-left: -18px;  
    padding: 0;
    position: fixed;
    width:100%;
}

.menu li {
    display:inline-block;
    float:left;
} 
```

然后正如 Kwon 提到的......你的 HTML 应该是这样的......

```
<ul class="menu">  
    <li><a href="/wordpress/">Home</a></li>
    <li><a href="/wordpress/">About</a></li>
    <li><a href="/wordpress/">Blog</a></li>
    <li><a href="/wordpress/">Services</a></li>
    <li><a href="/wordpress/">Portfolio</a> </li>
    <li><a href="/wordpress/">Contacts</a></li>
</ul> 
```

# jquery - 如何使不区分大小写的jquery包含？

> ID：11744308
> 
> 赞同：0
> 
> 时间：2012-07-31T16:01:39.890
> 
> 标签：jquery, jquery-selectors

我正在使用以下代码来测试两个表列值。唯一的问题是如何在与 itemNames 匹配之前将 .colNameivr 值转换为大写。

```
jQuery('.colNametns').each(function(i) {
var itemName = jQuery(this).text().toUpperCase();     //1
var match = jQuery('.colNameivr:contains("' + itemName + '")');  //2
  if(!match.length){
      jQuery(this).toggleClass('red');
      counter = i;
  }
if(match.length){
     alert(i+"--"+itemName );
    callme1(itemName);
  }          
 }); 
```

这里的示例 - [http://jsfiddle.net/w7akB/53/](http://jsfiddle.net/w7akB/53/)
在上面的示例中 -countryCode 不应突出显示，因为字符串是相同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:07:36.717

```
jQuery.expr.filters.icontains = function(elem, i, m) {
    return (elem.innerText || elem.textContent || "").toLowerCase().indexOf(m[3].toLowerCase()) > -1;
}

$("div:icontains('text')") 
```

[http://jsfiddle.net/SXsbP/](http://jsfiddle.net/SXsbP/)

# android - 任何内置的 Android 功能来包装 Canvas 绘图？

> ID：11744310
> 
> 赞同：1
> 
> 时间：2012-07-31T16:01:44.773
> 
> 标签：android, android-canvas, repeat, android-bitmap

我正在使用 Canvas 在位图上绘图。

考虑这是我的位图（点只是空白，x 标记点）：

```
........
......x.
........
........
........ 
```

如果我画这个框：

```
###
###
### 
```

从 开始`x`，我会得到这个：

```
........
......##(#)
......##(#)
......##(#)
........ 
```

但我希望在最左边绘制那些“泄漏” `#`，就好像这个位图被包裹了一样。就像吃豆人一样。

所以基本上，我想要的是某种方式来指示 Canvas 不要在 ( ) 处绘制像素，`x, y`而是在 ( )处绘制像素`x % width, y % height`。有什么简单的方法可以实现这一点吗？

另一个例子，假设我想从 (width - 1, height - 1) 开始绘制相同的 3x3 框/正方形，那么我想得到这个：

```
##.....#
##.....#
........
........
##.....# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:25:43.500

你不能用

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

x=metrics.heightPixels;
y=metrics.widthPixels; 
```

和

```
 u=bitmap.getWidth();
  v=bitmap.getHeight(); 
```

您可以从这四个数字中轻松找出应该在哪里绘制方框。

回答您的编辑：如果正方形的一部分偏离屏幕右侧 xx，则将其绘制在屏幕上的 xx 位置。如果它偏离左侧 xx，则在 screenWidth-xx 位置绘制它。

如果屏幕“移动”，即您可以在屏幕上滚动，那么您将不得不做更多的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:00:30.290

我不认为你可以总结出同样的形象。您可以做的是在右侧的图像离开屏幕时在左侧插入第二张图像。

因此，例如.. 让图像为 4x4 单位。如果它离开屏幕（右侧）1 个单位，则右侧可见 3x4，左侧可见 1x4（新图像）。同样的方式你可以解决顶部和底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T18:08:29.917

据我从文档中可以看出，没有内置功能可以让您实现所需的功能。由于您直接处理画布对象，因此假设应用程序将处理所有像素级绘图信息。

就像您提到的那样，在应用程序中有不止一种方法可以做到这一点，但不幸的是没有开箱即用的方法。

# android - 操作栏夏洛克错误 - Android

> ID：11744327
> 
> 赞同：0
> 
> 时间：2012-07-31T16:02:06.487
> 
> 标签：android

我已经创建了一个 Action Bar Sherlock 库项目，我已经将该库添加到我的项目中。

我得到错误：

```
R cannot be resolved to a variable 
```

我使用 min sdk 7，目标 sdk 15。

我已经在 Eclipse 中清理了项目和我的所有项目。

我已经重新启动了eclipse。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:12:47.753

尝试按照此处的步骤操作： [http ://www.slideshare.net/androidstream/action-bar-sherlock-tutorial](http://www.slideshare.net/androidstream/action-bar-sherlock-tutorial)

并看看：[http ://androidfragments.blogspot.com/2011/10/how-to-use-actionbar-sherlock.html](http://androidfragments.blogspot.com/2011/10/how-to-use-actionbar-sherlock.html)

还要确保将 actionbar sherlock 项目添加到项目的构建路径中

# javascript - 使用 jQuery 捕获站点范围的文件下载

> ID：11744333
> 
> 赞同：0
> 
> 时间：2012-07-31T16:02:28.893
> 
> 标签：javascript, jquery, regex, google-analytics, tracking

我正在尝试使用[gaAddons Google Analytics jQuery 插件](http://jsfiddle.net/shamel67/VzbPw/1/)来跟踪我网站上的下载，因此我想通过执行一些跟踪代码来跟踪已下载的任何 .JPG、.PNG、.PDF 等。

显然有些东西工作不正常，因为我似乎无法`_trackEvent`启动。

这是驻留在 gaAddons 插件中的 JavaScript。

```
///////////////////
// _trackDownloads
jQuery(document).ready(function($) {
    // helper function - allow regex as jQuery selector
    $.expr[':'].regex = function(e, i, m) {
        var mP = m[3].split(','),
            l = /^(data|css):/,
            a = {
                method: mP[0].match(l) ? mP[0].split(':')[0] : 'attr',
                property: mP.shift().replace(l, '')
            },
            r = new RegExp(mP.join('').replace(/^\s+|\s+$/g, ''), 'ig');
        return r.test($(e)[a.method](a.property));
    };

    $('a:regex(href,"\\.(zip|mp\\d+|mpe*g|pdf|docx*|pptx*|xlsx*|jpe*g|png|gif|tiff*)")$').live('click', function(e) {
        _gaq.push(['_trackEvent', 'download', 'click', this.href.replace(/^.*\/\//, '')]);
    });
}); 
```

我在页面上有上面的代码，我的简单锚链接到下面的 PDF 文件。

```
<a href="http://www.ayrshireminis.com/downloads/Files/pdfs/turnberry.pdf" target="blank">DOWNLOAD</a> 
```

JavaScript 有问题还是有更简单的方法来检查 jpg/png/pdf 文件下载？我可能会忽略 zip/ppt/tiff 文件，因为它们不会出现在网站上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:32:32.173

我已经搜索了几个小时并遇到了这个解决方案，希望这可以帮助某人：

```
jQuery(document).ready(function($) {
    var filetypes = /\.(zip|exe|pdf|doc*|xls*|ppt*|mp3)$/i;
    var baseHref = '';
    if (jQuery('base').attr('href') != undefined)
        baseHref = jQuery('base').attr('href');
        jQuery('a').each(function() {
            var href = jQuery(this).attr('href');
            if (href && href.match(filetypes)) {
                jQuery(this).click(function() {
                    var extension = (/[.]/.exec(href)) ? /[^.]+$/.exec(href) : undefined;
                    var filePath = href;
                    _gaq.push(['_trackEvent', 'Download', 'Click-' + extension, filePath]);
                    if (jQuery(this).attr('target') != undefined && jQuery(this).attr('target').toLowerCase() != '_blank') {
                        setTimeout(function() { location.href = baseHref + href; }, 200);
                        return false;
                    }
                });
            }
        });
}); 
```

# eclipse - 我可以根据掩码从任务创建 Intellij 更改列表吗？

> ID：11744335
> 
> 赞同：1
> 
> 时间：2012-07-31T16:02:36.470
> 
> 标签：eclipse, version-control, intellij-idea, mylyn

在 Eclipse 中使用 Mylyn，有一个全局设置允许我为要为任务的 VC 提交生成的提交注释设置掩码。

有没有办法在 IntelliJ 中做到这一点（目前使用 11.1.3）？

基本上，在'Mylyn | 团队”，我将“提交评论模板”设置为`[${task.key}] ${task.description} - ${task.url}`.

然后，当我为任务提交更改时，Eclipse 会自动生成一个提交注释，其中填充了变量。

在 Intellij 中，我希望以相同的方式设置变更集（为任务生成时）的默认注释。

这是必需的，因为我们需要将提交链接到它们所执行的 JIRA 任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:23:28.803

该设置在项目设置 -> 任务 -> 服务器 -> 提交消息选项卡中可用。

# php - Filtering results from a DB with a Javascript that will make a DIV reload it's contents based on new arguments

> ID：11744339
> 
> 赞同：3
> 
> 时间：2012-07-31T16:02:52.270
> 
> 标签：php, javascript, jquery

I need to create a form with Checkboxes to filter results extracted from a MySQL table. Ideally, after clicking on specific checkboxes, a DIV will be reloaded running the appropriate PHP and PDO query to filter on the selected criteria.

This is my code so far, but it doesn't seem to work...

Any suggestions?

Thanks!

```
<script>
    $(document).ready(function() {
        $("#colors").change(function() {
            console.log("changed...");
            var data = $(this).serialize();
            console.log(data);
            $("#indexMain").load("index.php?data="+data)
        });
    })
</script>
<div class="colors">
    <form method="post" action="index.php">
        <?php
            $colors = mysql_query("SELECT DISTINCT color_base1 FROM item_descr ORDER BY color_base1");
            while ($colorBoxes = mysql_fetch_array($colors))
            {
                echo "<input type='checkbox' name='color' value='".$colorBoxes[color_base1]."' /> ".$colorBoxes[color_base1]."<br />";
            }
        ?>
        <input type="submit" onclick="document.formName.submit();" />
    </form>
</div> 
```

and I get the value in my div as follows:

```
$color = $_POST['color'];
if ($selectedColor == '') 
{
$items = mysql_query("SELECT * FROM item_descr");
}
else 
{
$items = mysql_query("SELECT * FROM item_descr ORDER BY $color");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:17:21.907

`Colors`是您的 div 的名称，但我认为您希望在您的复选框上触发 on-change，其名称为`color`，而没有`s`.

```
$(document).ready(function() {
    $("input[type=checkbox][name=color]").change(function() {
        console.log("changed...");
        var data = $(this).serialize();
        console.log(data);
        $("#indexMain").load("index.php?data="+data)
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:23:36.460

`#colors`正在寻找带有 的元素`id='colors'`。要找到一个类，你的选择器必须以点开头，像这样`.color`。在您的任务中，更改`<div class="colors">`为`<div id="colors">`

我也没有找到带有`id=indexMain`( `$("#indexMain")`) 的元素。

你的代码可以这样写：

```
<script>
$(function() { // short form of jQuery usage
    $(".color").change(function() {
        console.log("changed...");
        var data = $(this).serialize();
        console.log(data);
        $("#indexMain").load("index.php?data="+data)
    })
})
</script>

....

<select class="color"> // your options here
    <option value="option1">Option 1</option> 
    <option value="option2">Option 2</option>
</select>

....

<div id="indexMain"></div> 
```

但它使用了一个选择列表，我没有对其进行测试——在编辑器中编写了代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T18:05:48.223

也许你的意思是：

```
 $('input[name=color]').change(.... 
```

# iphone - send URL via image view

> ID：11744340
> 
> 赞同：0
> 
> 时间：2012-07-31T16:02:53.283
> 
> 标签：iphone, objective-c, xcode, url, imageview

Is it possible to send an url via image by clicking the image, then opening the browser, for an app on the iPhone?

I'm using Xcode 4.4

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:39:10.570

是的，这是可能的。

第一个 A) 向 UIView 添加一个gestureRecognizer 并使用以下两行代码...

1st B）或使用带有背景图像的按钮并使用以下两行代码...

```
NSURL *url = [NSURL URLWithString:@"http://www.stackoverflow.com"];
[[UIApplication sharedApplication] openURL:url]; 
```

还有其他问题吗？

# vba - Excel VBA Workbook not adding to Object Collection

> ID：11744344
> 
> 赞同：0
> 
> 时间：2012-07-31T16:03:05.270
> 
> 标签：vba, excel, automation, office-automation

I am trying to create a collection of workbooks that will allow me to more easily keep track of all the workbooks that are opened. Because the workbooks will be named differently each time, and because I need to make this work without assuming that Excel has no other workbooks open, I cannot use the index. Therefore I have decided to use a collection. However, I keep getting an error when i put in a second workbook, and I am not sure what is going on. I have set the code up in two modules (I am not sure if that would be a problem), but i have just provided the relevant code for easy reading.

```
Sub run()
   Dim usedWorkbooks As New Collection
   Dim mainWorkBook As Workbook
   Set mainWorkBook = ActiveWorkbook
   Dim testwb As Workbook

   usedWorkbooks.Add Item:=mainWorkBook, key:="main" 'Added successfully
   usedWorkbooks.Add Item:=testwb, key:="test" 'Added successsfully
   addNewFile(usedWorkBooks)
End Sub

'In a separate module
Public Sub addNewFile(ByRef usedWorkBooks as Collection) 
   Dim ptCsv As String
   ptCsv = someFilePath
   'Filegrabber.grab simply returns the path of the desired workbook and works correctly
   'This is not the problem, can be substituted with any file path string
   ptCsv = FileGrabber.grab(ptCsv) 
   Dim ptCsvWorkBook As Workbook
   Set ptCsvWorkBook = Workbooks.Open(ptCsv) 'Successfully opens workbook

   'Prints out the type of object as "Workbook"
   MsgBox "the object is: " & TypeName(ptCsvWorkBook)
   'Fails to add. Says I need an object  
   usedWorkbooks.Add Item:=ptCsvWorkBook, key:="ptCsv"
End Sub 
```

I am not sure if it is because the collection is in a different module, or if there is something wrong with my code above. I am at a total loss. Any help would be great.

**UPDATE**

I have since answered this question, but on a related note, it seems that each time i reference the collection it is wiping out all of the previous parts of the Collection. I placed this code below in my answer, but i am adding it here modified for reference:

```
'UserForm to login to system
Dim usedWorkbooks As New Collection 
Private Sub login_Click()
   Dim mainWorkBook As Workbook
   Set mainWorkBook = ActiveWorkbook

   usedWorkbooks.Add Item:=mainWorkBook, key:="main"
   usedWorkBooks.Add Item:=testwb, key:="test"
   MsgBox "the size of the array is: " & usedWorkBooks.Count 'Prints out 2 as the size

   intializeProcess 'a worksheet is added to the array here
   'This will print out as saying there are 0 worksheets
   MsgBox "the size of the array is: " & usedWorkBooks.Count
End Sub

Public Sub addNewFile(filepath As String, sheetKey As String)
   Dim newWorkBook As Workbook

   Set newWorkBook = Workbooks.Open(filepath)

   usedWorkBooks.Add Item:=newWorkBook, key:=sheetKey
   MsgBox "the size of the array is: " & usedWorkBooks.Count

End Sub

'Part of the initialize Module
Public Sub intializeProcess()
   Call LoginModule.login(username, password, "pt", ie)
   ptCsv = FileGrabber.grab(ptCsv) 'ptcsv is set to some filepath by the grab sub

   'This will print out that the array size is 1
   UserLogin.addNewFile ptCsv, "ptCsv"  
End Sub 
```

I don't understand what is going on. It seems like you are unable to pass the reference of collections in VBA? I have read posts about how the New operation doesn't actually create an object, but that was unclear to me. If you think this should be a separate question let me know and i will make it so. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:31:26.787

上面的代码被重写以防止页面上有太多的代码。我不确定我做了哪些更改解决了这个问题，所以我在这里添加了我之前拥有的原始代码，以防有人想要解决原始问题。以后遇到问题时，我可能应该发布整个代码：

```
'UserForm to login to system
Dim usedWorkbooks As New Collection 'Correct placement of collection
Private Sub login_Click()
   Dim usedWorkbooks As New Collection 'Should be defined outside of this sub
   Dim mainWorkBook As Workbook
   Set mainWorkBook = ActiveWorkbook

   usedWorkbooks.Add Item:=mainWorkBook, key:="main"
   intializeProcess
End Sub

Public Sub addToWorkbookCollection(obj As Workbook, name As String)
   usedWorkBooks.Add Item:=obj, key:=name
End Sub

'Part of the initialize Module
Public Sub intializeProcess()
   ptCsv = FileGrabber.grab(ptCsv)
   Dim ptCsvWorkBook As Workbook

   Set ptCsvWorkBook = Workbooks.Open(ptCsv)

   MsgBox "the object is: " & TypeName(ptCsvWorkBook)
   UserLogin.addToWorkbookCollection ptCsvWorkBook, "ptCsv"

End Sub 
```

在阅读了我刚刚在上面输入的代码之后，我意识到我在 login_click() 子中创建了集合，从而产生了范围问题。对不起这个问题，但至少它帮助解决了我的问题。

# javascript - expand the menu for web help generated by madcap

> ID：11744347
> 
> 赞同：0
> 
> 时间：2012-07-31T16:03:19.453
> 
> 标签：javascript, html, madcap

I know this might be a long shot but i have been Google and reading the javascript code generated for days now without any result.

I'm looking to have the menu expand for the web help generated by madcap when you going directly to a specific subject in the help by a link. This seems to work fine if you use the tool provided by madcap but if you look at the page in a web browser the menu don't expand.

The javascript code is over 10 000 lines of code so skipped to post it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:05:05.290

我找不到如何更改 javascript 以使其正常工作的答案，但我确实在这一代中找到了解决此问题的选项。

“您可以自定义您的输出，以便用户始终可以在目录 (TOC) 中看到当前主题所属的位置，即使他们没有通过 TOC 访问该主题。这可以通过在皮肤编辑器中选择“自动同步 TOC”选项来完成。当用户在输出中从一个主题导航到另一个主题时，TOC 会自动相应地更改，突出显示打开的主题。”</p>

# html - Floating divs and headline with vertical margin are wrongly aligned

> ID：11744351
> 
> 赞同：4
> 
> 时间：2012-07-31T16:03:43.733
> 
> 标签：html, css, css-float

I have following markup:

```
<div class="twocol float-left">
    <h4>left</h4>
    <p>first</p>
    <p>second</p>
    <p>third</p>
</div>

<div class="twocol">
    <h4>right</h4>
    <p>foo</p>
    <p>bar</p>
    <p>foobar</p>
</div>​ 
```

CSS:

```
.twocol {
    margin-right: 1em;
}

.float-left {
    float: left;
}

h4 {
    margin: 1em 0;
    font-weight: bold;
} 
```

​<a href="http://jsfiddle.net/Hu5ZH/" rel="nofollow noreferrer">DEMO

**Problem**

The headlines' vertical position should be equal, but "right" is `1 em` above "left". Why? And how to fix this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T16:08:39.890

这里的问题是由于利润率下降。默认情况下，body 上有一些边距。当两个边距相遇时，浏览器选择两者中较大的一个并应用它。当您浮动一列时，这会破坏折叠边距并且两个边距都被应用。

我在你的小提琴中添加了一些背景颜色来说明这一点。 [http://jsfiddle.net/Hu5ZH/2/](http://jsfiddle.net/Hu5ZH/2/)

要了解有关折叠边距的更多信息：http: [//www.w3.org/TR/CSS2/box.html#collapsing-margins](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:12:29.180

添加类浮动从左到右栏

```
<div class="twocol float-left">
  <h4>left</h4>
  <p>first</p>
  <p>second</p>
  <p>third</p>
</div>

<div class="twocol float-left">
  <h4>right</h4>
  <p>foo</p>
  <p>bar</p>
  <p>foobar</p>
</div>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:06:35.503

将`float-left`课程添加到您的右侧`div`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:06:52.367

给`float:left`_`.twcol`

```
 .twocol 
       {
        margin-right: 1em;
        float:left;
       } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T16:07:44.617

在您的 twocol 类上添加列的宽度（宽度：50%）和相对定位与左浮动（位置：相对；浮动：左；）。

可能还想使用“clearfix”方法清除两个浮动元素。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-31T16:10:43.390

通过添加

```
border : 1px solid transparent; 
```

到`.twocols`，一切都会好起来的。
但是，我不知道为什么。

# xslt - Syntax colouring with Ditac (XML Mind Dita Converter)

> ID：11744354
> 
> 赞同：0
> 
> 时间：2012-07-31T16:03:48.810
> 
> 标签：xslt, xhtml, xsl-fo, saxon, dita

Is there a way to perform syntax colouring using Ditac (the DITA converter by XML Mind)? Any XSLT1 or XSLT2 based solution would work provided that it supports both XHTML and XSL:FO output.

XSLTHL (http://sourceforge.net/projects/xslthl/) has been suggested, though Saxon-HE (used by Ditac) doesn't seem to detect the extension JAR file.

I modified the provided XSL files so that they *should* work with DITA; but the default behaviour of just copying the non-coloured source listing occurs because the extension function is not being detected:

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:fo="http://www.w3.org/1999/XSL/Format"
        xmlns:ditac="http://www.xmlmind.com/ditac/schema/ditac"
        xmlns:u="http://www.xmlmind.com/namespace/ditac"
        version="2.0">

    <xsl:import href="ditac-xsl:fo/fo.xsl"/>
    <xsl:import href="highlighting/fo.xsl"/>

    <!-- Syntax highlighting -->
    <xsl:template match="*[contains(@class,' topic/pre ')]">
        <fo:block xsl:use-attribute-sets="pre">
            <xsl:call-template name="commonAttributes"/>
            <xsl:call-template name="displayAttributes"/>
            <xsl:call-template name="apply-highlighting"/>
        </fo:block>
    </xsl:template>

    ... 
```

"highlighting/fo.xsl" includes another file called "highlighting/common.xsl" (I took and modified these files from Docbook). Here is the part that should link with Saxon:

```
<?xml version='1.0'?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"

        xmlns:sbhl="http://net.sf.xslthl/ConnectorSaxonB"
        xmlns:saxonb="http://saxon.sf.net/" 

        xmlns:exsl="http://exslt.org/common"
        xmlns:xslthl="http://xslthl.sf.net"
        exclude-result-prefixes="exsl xslthl sbhl"
        version='1.0'>

<!-- ********************************************************************
     $Id: common.xsl,v 1.11 2009/06/02 11:41:23 sorin Exp $
     ********************************************************************

     This file is part of the XSL DocBook Stylesheet distribution.
     See ../README or http://docbook.sf.net/release/xsl/current/ for
     and other information.

     ******************************************************************** -->

<!-- for saxon 8.5 and later -->
<saxonb:script implements-prefix="sbhl" language="java" src="java:net.sf.xslthl.ConnectorSaxonB" />

<xsl:variable name="highlight.default.language" select="csharp"/>

<!-- You can override this template to do more complex mapping of
     language attribute to highlighter language ID (see xslthl-config.xml) -->
<xsl:template name="language.to.xslthl">
  <xsl:param name="context"/>

  <xsl:choose>
    <xsl:when test="$context/@outputclass != ''">
      <xsl:value-of select="$context/@outputclass"/>
    </xsl:when>
    <xsl:when test="$highlight.default.language != ''">
      <xsl:value-of select="$highlight.default.language"/>
    </xsl:when>
  </xsl:choose>
</xsl:template>

<xsl:template name="apply-highlighting">
    <xsl:variable name="language">
        <xsl:call-template name="language.to.xslthl">
            <xsl:with-param name="context" select="."/>
        </xsl:call-template>
    </xsl:variable>
    <xsl:choose>
        <xsl:when test="$language != ''">
            <xsl:variable name="content">
                <xsl:apply-templates/>
            </xsl:variable>
            <xsl:choose>
                <xsl:when test="function-available('sbhl:highlight')">
                    <xsl:apply-templates select="sbhl:highlight($language, exsl:node-set($content), 'xslthl-config.xml')" mode="xslthl"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:copy-of select="$content"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:when>
        <xsl:otherwise>
            <xsl:apply-templates/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<!-- A fallback when the specific style isn't recognized -->
<xsl:template match="xslthl:*" mode="xslthl">
  <xsl:message>
    <xsl:text>unprocessed xslthl style: </xsl:text>
    <xsl:value-of select="local-name(.)" />
  </xsl:message>
  <xsl:apply-templates mode="xslthl"/>
</xsl:template>

<!-- Copy over already produced markup (FO/HTML) -->
<xsl:template match="node()" mode="xslthl" priority="-1">
  <xsl:copy>
    <xsl:apply-templates select="node()" mode="xslthl"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="*" mode="xslthl">
  <xsl:copy>
    <xsl:copy-of select="@*"/>
    <xsl:apply-templates select="node()" mode="xslthl"/>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:59:46.440

看起来这个样式表使用了旧的“自反”扩展机制，而 Saxon-HE 不支持这种机制。可能的解决方案是：

(a) 使用旧的开源 Saxon-B 产品：此机制在 9.1 之前的版本中得到支持

(b) 使用 Saxon-PE（成本 50 英镑）：当前版本的 Saxon-PE 和 Saxon-EE 仍支持此机制。

(c) 编写一些 Java 包装器代码以将扩展实现为 Saxon-HE 支持的“集成扩展功能”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:28:46.253

自 2012 年 9 月 11 日起，Ditac 现在支持开箱即用的语法着色！

使用`outputclass`属性指定语言：

```
<codeblock outputclass="language-csharp"><![CDATA[
    public class SomethingNeat {
        public string someString = "Hello World!";
    }
]]></codeblock> 
```

这确实由 XML Mind 使用[XSLT Syntax Highlighting](http://sourceforge.net/apps/mediawiki/xslthl/index.php?title=Main_Page)实现，如原始问题中所述。

支持以下值`outputclass`：

*   语言-c
*   语言-cpp
*   语言-csharp
*   语言-delphi
*   语言-ini
*   语言-java
*   语言-javascript
*   语言-m2
*   语言-perl
*   语言-php
*   语言-python
*   语言-红宝石
*   语言-tcl
*   语言-xml

# char - 如何将 LPCTSTR 转换为 char *

> ID：11744361
> 
> 赞同：0
> 
> 时间：2012-07-31T16:04:10.150
> 
> 标签：char, strcpy, strcat

无论我做什么，我都无法让它工作。

我想做的就是取一个 LPCTSTR 和一个 char* 并将它们连接成一个 char*

```
myfunction(LPCTSTR pass, LPCTSTR fail, LPCTSTR done, char* table,char* db_file, int s_time){    
    char query2[200];
    strcpy(query2,"SELECT value FROM ");
    strcat(query2,table);
    strcat(query2," WHERE value = '");
    strcat(query2,(char*)pass);
    strcat(query2,"' OR value = '");
    strcat(query2,(char*)fail);
    strcat(query2,"'");
} 
```

对于所有神圣的事物的爱，为什么这么难。

还不行，我不能只使用字符串、cstring、stringstream 或任何其他中间容器。出于某种原因，每次我尝试使用这些时，都会出现内存分配错误。

# sublimetext2 - 在 Sublime Text 2 和 3 中删除项目

> ID：11744365
> 
> 赞同：164
> 
> 时间：2012-07-31T16:04:34.617
> 
> 标签：sublimetext2, sublimetext3

如何从 Sublime Text 2 和 3 的项目窗口 ( `Ctrl`++ `Alt`)中删除项目`P`？

`Delete`没有效果，没有上下文菜单，删除关联文件`*.sublime-project`也`*.sublime-workspace`不会从列表中删除项目。

任何的想法？因为这个窗口开始变得杂乱...

* * *

## 回答 #1

> 赞同：345
> 
> 时间：2012-08-01T03:03:00.537

如果 Sublime Text 从最近的项目列表中删除了您已删除的项目，那就太好了。不幸的是，事实并非如此，而且该列表中可能充斥着不再存在的项目。

在 Sublime Text 提供此功能之前，有几种手动方法可以删除项目。

# 选项 1：快捷方式（全部清除）：

如果您只是在寻找清理列表的最快方法，则此选项适合您。

*请注意，**这将清除最近列表中的所有项目**。这包括您尚未删除的内容。*

> 在 Sublime Text 菜单中转到：
> 
> 项目 > 打开最近的 > 清除项目
> 
> ![在此处输入图像描述](../Images/afd29404eb95f818fab2b1979633628b.png)

# 选项 2：手动方式（但可以控制删除哪些项目）：

1.  关闭崇高文本
2.  使用下面的路径找到`Session.sublime_session`文件并使用另一个代码编辑器打开它。*** 不要使用 Sublime Text 打开它，因为您所做的任何更改都会被覆盖。***

    `Session.sublime_session`按操作系统和 ST 版本列出的文件路径：

    **视窗 x64：**

    崇高的文字 2

    `C:\Users\[Username]\AppData\Roaming\Sublime Text 2\Settings\Session.sublime_session`

    崇高的文字 3

    `C:\Program Files\Sublime Text 3\Data\Local\Session.sublime_session`

    **Mac OSX：**

    崇高的文字 2

    `~/Library/Application Support/Sublime Text 2/Settings/Session.sublime_session`

    崇高的文字 3

    `~/Library/Application Support/Sublime Text 3/Local/Session.sublime_session`

    **Linux（Ubuntu）：**

    崇高的文字 2

    `~/.config/sublime-text-2/Settings/Session.sublime_session`

    崇高的文字 3

    `~/.config/sublime-text-3/Local/Session.sublime_session`

    **期待看到什么：**

    您应该在此文件的底部看到类似以下内容：

    ![在此处输入图像描述](../Images/e092691bc4083e51fa2508dbf8e4b479.png)

3.  从此文件中删除不需要的项目

    **删除 project3 后文件的外观：**

    ![在此处输入图像描述](../Images/690829ad34063596c0ba98c0718874f4.png)

4.  保存并重新启动 Sublime Text 2/3

# 选项3：插件方式

您可以查看 Sublime Text 插件[Project Manager](https://packagecontrol.io/packages/ProjectManager)。

# 选项 4：Node.js 方式

您可以查看：[clean-sublime-text-project-history](https://github.com/br4nnigan/clean-sublime-text-project-history)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-12-12T20:34:31.987

只是为了澄清上述 Valjas 解决方案中的一些内容。

当他说：*“转到 Sublime Preferences 文件夹...”*时，他的意思是：*“转到**USER**文件夹”*，而不是 Program 文件夹。

* * *

# 注意：使用不同的编辑器修改“Session.sublime_session”文件：

尽管对许多人来说很明显，但对其他人来说可能不是：

您必须使用**不同的文本编辑器**编辑文件，并且[必须关闭](https://forum.sublimetext.com/t/how-do-i-remove-a-project-from-the-switch-project-window/3725/6?u=mbigras)**Sublime** Text 本身。**`Session.sublime_session`**

 ****不要**使用 Sublime Text 本身，或者在进行更改时让程序运行。

如果这样做，它将在关闭应用程序时覆盖您的更改。

* * *

# 崇高的文字3：

• **WINDOWS x64：**

`C:\Users\[Username]\AppData\Roaming\Sublime Text 3\Local\Session.sublime_session`

• **Linux (Ubuntu)：**

`~/.config/sublime-text-3/Local/Session.sublime_session`

• **Mac OSX/Sierra：**

`~/Library/Application Support/Sublime Text 3/Local/Session.sublime_session`

•**便携式安装*（它可能也适用于 ST2，但我尚未测试）：***

`/folder-where-you-have-ST3-installed/Data/Local/Session.sublime_session`

--

# 崇高的文字2：

• **WINDOWS x64：**

`C:\Users\[Username]\AppData\Roaming\Sublime Text 2\Settings\Session.sublime_session`

• **Mac OSX：**

`~/Library/Application Support/Sublime Text 2/Settings/Session.sublime_session"`然后找到该部分`"recent_workspaces"`。

• **Linux (Ubuntu)：**

`~/.config/sublime-text-2/Settings/Session.sublime_session`

* * *

# 在哪里编辑文件

很简单，查找该**`"recent_workspaces"`**部分，它通常位于文件的底部。

它应该类似于：

![在此处输入图像描述](../Images/ae32ebc2114bc000529fcd2590ef2c57.png)

* * *

## 学分

1.  ST3 Linux (Ubuntu) / Build 3047 路径添加自 @ezrepotein4 的评论。

2.  从@0x4a6f4672 的评论添加的 ST2 Linux (Ubuntu) 路径。

3.  Windows x64 和 Mac 路径取自[这篇文章](http://sublimetext.userecho.com/topic/84110-switch-project-dialog-shows-deleted-projects/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-10T05:50:35.883

Sublime Text 2：要清理 sublime 文件历史、项目历史、自动完成历史和查找/替换历史，请执行以下操作

1.  关闭所有崇高文本的实例2。
2.  删除 Settings 目录下的 Session.sublime-session 文件。
3.  启动崇高

当你再次关闭 sublime 并查看设置目录时，它仍然会有一个 Session.sublime-session 文件，因为 sublime***重新创建了***它，但它的大小应该比你之前的小，因为它不包含任何垃圾数据从以前的项目历史等

我希望这会改善 sublime text 2 的启动时间。您可以选择将 Session.sublime-session 备份到不同的文件夹，以防您想记住项目路径等，然后在需要时使用文件复制粘贴比较软件。只要记住在处理 Session.sublime-session 时关闭 sublime，即如果您需要对该文件进行任何更改，您将在其他一些文本编辑器（如 notepad++ 等）中进行更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-28T12:29:17.840

适用于 MacOS High Sierra

您需要修改*Session.sublime_session*文件，该文件可以通过 3 种方法找到

### 通过终端

```
cd ~/Library/Application Support/Sublime Text 3/Local/ 
```

### 通过崇高文本 3

点击第一个菜单

```
Sublime Text > Preferences > Browse Packages... 
```

它将在Finder中打开位置

> Macintosh HD > 用户 > 用户名（带有主页图标）> 库 > 应用程序支持 > Sublime Text 3 > 包

向上移动一个文件夹并单击**本地**文件夹

### 来自 Finder

> Macintosh HD >> 用户 >> 用户名（带有主页图标）> 库（默认情况下这将是隐藏文件夹，单击`command + shift + .`）>> 应用程序支持 > Sublime Text 3 > 本地

并在 sublime-text 编辑器之外编辑文件*Session.sublime_session*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-27T23:40:26.287

单独从 linux 运行命令 next，将清理 sublime 文本的工作区：

```
echo ''>$(locate Session.sublime_session) 
```**

# actionscript-3 - 我可以将图像绘制到画布中吗？

> ID：11744366
> 
> 赞同：0
> 
> 时间：2012-07-31T16:04:40.070
> 
> 标签：actionscript-3, apache-flex

我有一个将形状绘制成精灵的函数。我想更改函数以使用图像而不是形状，但图像不会显示。我该怎么做才能使图像显示？lineChartContainer 是 Sprite。

```
function drawCircle(x:Number,y:Number):void{
                //var circle:Shape = new Shape();
                circle.graphics.beginFill(0xf1e500, 1);
                var lineThickness:int = 6;
                circle.graphics.drawCircle(x + (0), y - (0), lineThickness);
                circle.graphics.endFill();
                lineChartContainer.addChild(circle);
                var graphic:Image = new Image();
                graphic.source="images/grade.png";
                lineChartContainer.addChild(graphic);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:24:55.673

看起来你正在尝试做的事情永远不会奏效。

变量`lineChartContainer`是 Sprite。

Flex 组件（如`Image`控件）不能由非 Flex 组件作为父级。因此，虽然这是完全合法的 AS3 代码：

```
lineChartContainer.addChild(graphic) 
```

Flex 组件不会渲染任何东西。Flex 组件有一个“生命周期”，组件需要经过生命周期的迭代才能真正呈现某些内容。但是由于`Image`控件被添加到组件`Sprite`的生命周期中，所以`Image`永远不会启动。

您在问题的标题中提到了 a `Canvas`。尝试将`Image`组件添加到`Canvas`、`VBox`、`HBox`、`Group`、`VGroup`、`HGroup`或其他一些 Flex 容器类。

# sql-server - 如何使用联合集中的特定列数据填充表

> ID：11744367
> 
> 赞同：0
> 
> 时间：2012-07-31T16:04:39.690
> 
> 标签：sql-server

我想要的是这样的：

```
SELECT * FROM [dbo].[UNIONTABLE1]
UNION 
SELECT * FROM [dbo].[UNIONTABLE2]
AS RESULTUNION;

DELETE FROM [dbo].[ResultTestTable];

INSERT INTO [dbo].[ResultTestTable]
  ( 
  test2
  ,test3
  ,test4
  ,test5
  ,test6
  ,test7
   )
  VALUES
  (
   RESULTUNION.LT_ALL_TAB_NAME
  ,RESULTUNION.LT_SCH_KL_RED_GASDRUCK
  ,RESULTUNION.LT_EINST_NOR_ZEIT + RESULTUNION.LT_EINST_NOR_AUSBLASZEIT
  ,RESULTUNION.LT_EINST_SAN_ZEIT + RESULTUNION.LT_EINST_SAN_AUSBLASZEIT
  ,RESULTUNION.LT_EINST_NOR_ZEIT_PCS + RESULTUNION.LT_EINST_NOR_AUSBLASZEIT_PCS
  ,RESULTUNION.LT_EINST_SAN_ZEIT_PCS + RESULTUNION.LT_EINST_SAN_AUSBLASZEIT_PCS
  ); 
```

我想用 RESULTUNION 表的所有行填充 ResultTestTable，但只用 RESULTUNION 表的特定列。另外我想添加RESULTUNION表的两列数据并将其映射到ResultTestTable中的一列。添加的值是浮点数。

我正在使用 Microsoft SQL Server Management Studio。

上面的声明不起作用，这很明显，但我不知道如何正确地做。如果我执行上面的语句，我得到以下错误： Msg 4104, Level 16, State 1, Procedure test_storedProcedure, Line 31 无法绑定多部分标识符“RESULTUNION.LT_ALL_TAB_NAME”。

我假设我必须执行类似 for 循环的操作，但我不知道 RESULTUNION 表必须循环多少行。

有没有人有想法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:09:58.353

首先，永远不要在你的 SQL 中使用“SELECT *”，总是指定列名。一旦考虑到这一点，就会更容易看到解决方案。这里是：

```
INSERT INTO [dbo].[ResultTestTable]
  (
  test2
  ,test3
  ,test4
  ,test5
  ,test6
  ,test7
   )
SELECT 
  LT_ALL_TAB_NAME
  ,LT_SCH_KL_RED_GASDRUCK
  ,LT_EINST_NOR_ZEIT + LT_EINST_NOR_AUSBLASZEIT
  ,LT_EINST_SAN_ZEIT + LT_EINST_SAN_AUSBLASZEIT
  ,LT_EINST_NOR_ZEIT_PCS + LT_EINST_NOR_AUSBLASZEIT_PCS
  ,LT_EINST_SAN_ZEIT_PCS + LT_EINST_SAN_AUSBLASZEIT_PCS
FROM [dbo].[UNIONTABLE1]
UNION ALL -- This will keep duplicate rows. UNION, without ALL, removes duplicates
SELECT 
  LT_ALL_TAB_NAME
  ,LT_SCH_KL_RED_GASDRUCK
  ,LT_EINST_NOR_ZEIT + LT_EINST_NOR_AUSBLASZEIT
  ,LT_EINST_SAN_ZEIT + LT_EINST_SAN_AUSBLASZEIT
  ,LT_EINST_NOR_ZEIT_PCS + LT_EINST_NOR_AUSBLASZEIT_PCS
  ,LT_EINST_SAN_ZEIT_PCS + LT_EINST_SAN_AUSBLASZEIT_PCS
ROM [dbo].[UNIONTABLE2] 
```

显然，如果两个表的列名称不同，则必须相应地修改查询。

# ruby-on-rails - 使用 CarrierWave 时出错

> ID：11744368
> 
> 赞同：2
> 
> 时间：2012-07-31T16:04:47.370
> 
> 标签：ruby-on-rails, file-upload, amazon-s3, carrierwave, fog

我正在尝试将[CarrierWaveDirect](https://github.com/dwilkie/carrierwave_direct) gem 与[CarrierWave](https://github.com/jnicklas/carrierwave) gem 结合使用，但在呈现直接上传表单时出现错误。这是在开发中，还没有在生产中尝试过。这是表格：

**/app/views/users/registrations/edit.html.erb**

```
<%= direct_upload_form_for @uploader do |f| %>
    <%= f.file_field :image %>
    <%= f.submit %>
<% end %> 
```

错误`<%= direct_upload_form_for @uploader do |f| %>`在线，并且是

```
ArgumentError in Users/registrations#edit
 is not a recognized storage provider 
```

**更新：**

我已经确定在开发服务器启动后对控制器代码进行任何更改，使其工作。例如，如果我`p "test"`在控制器的任何位置添加一条简单的线，它就可以工作。如果我然后停止开发服务器并重新启动它，错误将再次出现，但如果我取出`p "test"`线路，它会工作。*所以我猜测由于某种原因，在服务器启动时没有正确设置配置设置，并且对控制器的代码进行更改会导致重新加载某些内容，从而正确设置它？*

**/app/controllers/users/registrations_controller.rb**

```
 def edit
    @uploader = User.new.image
    @uploader.success_action_redirect = process_user_avatar_url
    super
  end 
```

**/app/uploaders/image_uploader.rb**

```
class ImageUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick
  include CarrierWaveDirect::Uploader

  version :thumb do
   process :resize_to_fill => [50, 50]
  end

  def extension_white_list
    %w(jpg jpeg gif png)
  end

end 
```

**/app/models/user.rb**

```
mount_uploader :image, ImageUploader 
```

**/config/initializers/s3.rb**

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',
    :aws_access_key_id      => KEY,
    :aws_secret_access_key  => SECRET,
  }
  if Rails.env.production?
    config.fog_directory  = PRODUCTION_BUCKET
  else
    config.fog_directory  = DEVELOPMENT_BUCKET
  end
  config.fog_public     = false
end 
```

**版本**

```
Rails 3.2.0
ruby 1.9.2p320 (2012-04-20 revision 35421) [x86_64-darwin11.3.0]
carrierwave (0.6.2)
carrierwave_direct (0.0.6)
fog (1.5.0) 
```

**发展.rb**

```
Appname::Application.configure do
  config.cache_classes = false
  config.whiny_nils = true
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false
  config.action_mailer.raise_delivery_errors = false
  config.active_support.deprecation = :log
  config.action_dispatch.best_standards_support = :builtin
  config.active_record.mass_assignment_sanitizer = :strict
  config.active_record.auto_explain_threshold_in_seconds = 0.5
  config.assets.compress = false
  config.assets.debug = true
  config.action_mailer.default_url_options = { :host => 'localhost:3000' }
  config.log_level = :warn
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:08:17.257

看来你有一个非常奇怪的错误。我记得不久前我为一个教程构建了一个 Rails 应用程序，我的控制器正在锁定，即使我删除了它没有拾取的动作。

我有两个想法，我会尝试看看。

1.  删除操作时会发生什么`edit`。应用程序是否中断？如果没有，那么你有一个不同的问题。
2.  当我创建一个测试应用程序来尝试时，当我的初始化文件无效时，`CarrierWave_Direct`我得到了相同的结果。`ArgumentError`尝试将所有内容静态放入，以查看它是否正确获取您的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T03:31:58.883

尝试将以下内容放在模型和控制器的顶部：

```
require_dependency File.expand_path('../../uploaders/image_uploader', __FILE__) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:17:24.303

我不知道这是修复还是解决方法，但您可以尝试添加到您的初始化程序：

```
config.storage = :fog 
```

或者

```
config.storage = :file 
```

您也可以直接在上传器中使用：

```
storage :fog 
```

或者

```
storage :file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T05:14:03.387

您是否在初始化程序文件夹中找到了carrierWave 配置文件？我认为配置文件不读取。

# actionscript-3 - flash builder mobile，正确使用 PersistenceManager？

> ID：11744369
> 
> 赞同：3
> 
> 时间：2012-07-31T16:04:51.867
> 
> 标签：actionscript-3, apache-flex, mobile, flash-builder, persistence-manager

我是移动应用程序开发的新手，但我正在尝试构建一个移动 RPG 游戏角色表应用程序。我没有使用 SQLite，而是尝试使用 PersistenceManager 在应用程序中断或关闭时保留字符数据，但我不确定我是否正确使用它。这是我到目前为止所拥有的。

主要.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                        xmlns:s="library://ns.adobe.com/flex/spark" firstView="views.CharactersView" 
                        applicationDPI="160" persistNavigatorState="true">

</s:ViewNavigatorApplication> 
```

CharactersView.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" creationComplete="creationCompleteHandler(event)">

<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.events.FlexEvent;

        protected function creationCompleteHandler(event:FlexEvent):void
        {
            var o:Object = new Object();
            o.name = "Aragorn";
            o.type = "Ranger";
            o.strength = 97;
            o.speed = 7;
            Database.insertCharacter(o);
            trace(Database.characters.length);
        }

    ]]>
</fx:Script>

<s:List id="list" width="100%" height="100%"/> 
```

数据库.as：

```
import spark.managers.PersistenceManager;

public class Database
{
    private static var data:Array = [];
    private static var pm:PersistenceManager = new PersistenceManager();

    public static function get characters():Array
    {
        if (!pm.load() || pm.getProperty("characters") == null)
        {
            Database.data = [];
        }
        else
        {
            Database.data = pm.getProperty("characters") as Array;
        }
        return data;
    }

    public static function insertCharacter(o:Object):void
    {
        Database.data.push(o);
        pm.setProperty("characters", Database.data);
        pm.save();
    }

} 
```

在 CharactersView.mxml 的 creationComplete 处理程序中，我创建了一个带有一些任意信息的一次性字符，只是为了测试插入字符是否有效。每次我完全按原样运行时，跟踪语句（我的数组的长度）返回 1。每次运行时它不应该加一吗？这告诉我有些不对劲，但持久性管理器是否没有正确保存数据？我是否需要检查 pm.save() 是否返回 true，如果返回 true，我是否应该分派一个事件，然后才运行跟踪语句以获得正确的长度？只是为了保存一些数据，这似乎过于复杂，所以我不完全确定发生了什么或如何修复它。

无论如何，我要问的是我当前的设置是否正确，如果不是，是否有人有一个简单的例子，或者可以根据我的代码创建一个简单的例子来说明如何正确使用persistencemanager？

一旦我掌握了这项技术，我还可以创建其他几个应用程序，所以我真的希望能够确定这一点。提前致谢！

编辑：看来我正在正确使用有关 PM 的所有内容，并且我收到的答案确实帮助我让我的应用程序正常工作。然而，当我继续前进时，我的应用开始表现得很有趣。例如，我的列表似乎对交互的反应非常缓慢，大多数其他组件也是如此。新代码如下。

主要.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                        xmlns:s="library://ns.adobe.com/flex/spark" firstView="views.CharactersView" 
                        applicationDPI="160" persistNavigatorState="true">

</s:ViewNavigatorApplication> 
```

CharactersView.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" creationComplete="creationCompleteHandler(event)">

<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.events.FlexEvent;

        protected function creationCompleteHandler(event:FlexEvent):void
        {
            update();
        }

        private function update():void
        {
            title = "D&D Characters (" + Database.characters.length + ")";
            list.dataProvider = new ArrayCollection(Database.characters);
        }

        protected function button1_clickHandler(event:MouseEvent):void
        {
            var vo:CharacterVO = new CharacterVO();
            vo.name = "Aragorn";
            vo.className = "Ranger";
            vo.race = "Human";
            vo.level = 6;
            vo.gender = "Male";
            vo.alignment = "Unaligned";
            vo.hp = 25;
            vo.xp = 100;
            Database.insertCharacter(vo);
            update();
        }

    ]]>
</fx:Script>

<s:actionContent>
    <s:Button label="+" click="button1_clickHandler(event)"/>
</s:actionContent>

<s:List id="list" width="100%" height="100%"/>

</s:View> 
```

数据库.as：

```
import spark.managers.PersistenceManager;

public class Database
{
    private static var data:Array = [];
    private static var pm:PersistenceManager = new PersistenceManager();

    public static function get characters():Array
    {
        return data;
    }

    public static function insertCharacter(o:CharacterVO):void
    {
        Database.data.push(o);
        pm.setProperty("characters", Database.data);
        pm.save();

        if (!pm.load() || pm.getProperty("characters") == null)
        {
            Database.data = [];
        }
        else
        {
            Database.data = pm.getProperty("characters") as Array;
        }
    }

} 
```

CharacterVO.as:

```
import flash.utils.IDataInput;
import flash.utils.IDataOutput;
import flash.utils.IExternalizable;

public class CharacterVO implements IExternalizable
{
    public var name:String;
    public var className:String;
    public var race:String;
    public var gender:String;
    public var alignment:String;
    public var level:Number;
    public var hp:Number;
    public var xp:Number;

    public function writeExternal(output:IDataOutput):void {
        output.writeUTF(name);
        output.writeUTF(className);
        output.writeUTF(race);
        output.writeUTF(gender);
        output.writeUTF(alignment);
        output.writeFloat(level);
        output.writeFloat(hp);
        output.writeFloat(xp);
    }

    public function readExternal(input:IDataInput):void {
        name = input.readUTF();
        className = input.readUTF();
        race = input.readUTF();
        gender = input.readUTF();
        alignment = input.readUTF();
        level = input.readFloat();
        hp = input.readFloat();
        xp = input.readFloat();
    }
} 
```

如您所见，大部分代码与我第一次发布的代码相同。我添加了 CharacterVO 类，我在 CharactersView.mxml 中移动了一些东西，并将 PersistenceManager 加载代码移动到 insertCharacter 函数（这样，我只在添加新项目时加载 PM，而不是每次我调用数据库.字符）。

同样，我的应用程序似乎对交互的反应真的很慢，有时它根本没有反应。有些事情是不对的，我以前从未在移动应用程序上遇到过这个问题。是否将数组存储在 PM 中然后尝试将其设置为 List 的 dataProvider 会导致问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:34:38.940

我不太熟悉使用它，但是从文档中看起来你可能不能使用通用对象，因为我不相信它实现了 IExternalizable，根据文档，这不会由于某种原因导致错误但是它实际上不能读/写这些对象。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/managers/PersistenceManager.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/managers/PersistenceManager.html)

> 使用管理器存储值时，重要的是所有值都可以正确写入共享对象。存储类或非标准 Flash 原语的复杂对象必须实现 flash.net.IExternalizable 接口才能正常工作。保存不兼容的对象不会导致 RTE，但在读回数据时会产生未定义的行为。

当我自己使用它时，有一次在一个项目中帮助另一个 SO 海报我不记得真的有任何问题，除非我们更改了我们正在存储/检索的模型对象的属性，然后我们不得不手动吹走它的本地共享对象创建否则它无法反序列化它（有道理，但只是需要注意的一点）。我实际上不记得实现 IExternalizable 但其他人可能做到了。

尝试这个：

[CharacterVO.as]

```
public class CharacterVO implements IExternalizable
{
    public var name:String;
    public var type:String;
    public var strength:Number;
    public var speed:Number;

    public function writeExternal(output:IDataOutput) {
        output.writeUTF(name);
        output.writeUTF(type);
        output.writeFloat(strength);
        output.writeFloat(speed);
    }

    public function readExternal(input:IDataInput) {
        name = input.readUTF();
        type = input.readUTF();
        strength = input.readFloat();
        speed = input.readFloat();
    }
} 
```

然后，不要创建通用对象，而是创建该 VO 的实例。我相信 Array 将通过按顺序序列化所有元素来自动序列化。

# javascript - 还原可拖动对象

> ID：11744373
> 
> 赞同：0
> 
> 时间：2012-07-31T16:05:04.960
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

目前，我的可拖动对象可以放在网格中的任何位置。

如果它们没有放在样式突出显示的区域中，我需要将它们还原。

我该怎么做？

目前，如果它们没有从可拖动的网格中掉落，我已经让它们恢复，就像这样......

```
 $('.drag').draggable({

    helper: 'clone',
    snap: '.drop',
    grid: [60, 60],
    revert: 'invalid',
 }); 
```

这是选择所需拖放区域的功能...

```
 $('#pickNext').mousedown(function() {
    // remove the class from all td's
    $('td').removeClass('spellword');
    // pick a random word
    var r = rndWord;
    while (r == rndWord) {
    rndWord = Math.floor(Math.random() * (listOfWords.length));
}
    // apply class to all cells containing a letter from that word
    $('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('spellword');
}); 
```

像这样的东西...

```
 $('.squares').draggable({

    drop: function(event, ui){
    if (squares.drop ! word) {
    revert: 'invalid'
    }

  }

}); 
```

或这个..

```
$('.squares').draggable({

    drop: function(event, ui) {
        if ($(this).text() == $(ui.draggable).text().trim()) {
            revert: 'valid'
        }
                else {
                revert: 'invalid'
    }
                }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:13:42.357

`drop`每次开始拖动字母时，您都需要创建与给定字母匹配的新区域。目前，每个字母都是一个`droppable`，这不是你想要的。

为此，我修改了您的 JSFiddle 以使用`makeDroppables()`每次开始拖动字母时调用的函数创建拖放区。

[**工作 JSFiddle**](http://jsfiddle.net/bmgonzal/uu99V/)

注意：答案已编辑以更紧密地适合问题。

此外，来自可拖动的[jQuery UI 文档：](http://jqueryui.com/demos/draggable/#option-revert)

> “如果设置为无效，则只有在可拖动对象未放置在可放置对象上时才会发生还原。”

# php - 使用 gettext 会导致用逗号更改句点

> ID：11744375
> 
> 赞同：1
> 
> 时间：2012-07-31T16:05:04.867
> 
> 标签：php, codeigniter, internationalization, gettext

我正在使用 Codeigniter，并通过制作一个助手和相应的 .po/.mo 文件来实现 gettext/.po 国际化。

每个要替换的字符串如下所示：`_('some text here');`

但是当成功实现这个之后，我注意到导致像 100.98 等数字的 PHP 计算被更改为 100,98。此外，句号用逗号更改。

例如，这个计算通常会产生一个像 1037.67 这样的数字：

```
 <?php
      // Space total
      $space_total = $space_info[0]->space_total;

      // Prepare space used
      $space_used = $space[0]->media_size / 1000000;
      $space_used = round($space_used, 1);

      // Prepare progressbar
      $percent = $space_used / $space_total * 100;

    ?> 
```

但是在实施 gettext 后，结果为 1037,67。如果有其他因素导致此问题，我已经进行了故障排除，但仅当我在帮助程序中运行 gettext 语言初始化函数时才会发生这种情况。

这里是帮手：

```
<?php  if (!defined('BASEPATH')) exit('No direct script access allowed');

function set_translation_language($language){
  $lang_path = FCPATH.APPPATH.'language/locales';
  putenv('LANG='.$language.'.UTF-8');
  setlocale(LC_ALL, $language.'.UTF-8');
  bindtextdomain('lang', $lang_path);
  textdomain('lang');
} 
```

以此为例来调用它：

```
set_translation_language('en_US'); 
```

有人对此有解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:32:19.297

这是因为您在调用 setlocale() 时使用了 LC_ALL。LC_ALL 不仅包括文本，还包括字符串排序、数字格式、日期格式等。

您应该使用 LC_MESSAGES 来翻译文本。只有在输出希望以本地格式格式化的数字数据时，才应使用 LC_NUMERIC。

set_translation_language($language) 应该使用 setlocale(LC_MESSAGES, $language.'.UTF-8');

当您想要输出数字时，您应该这样做

```
$percent = $space_used / $space_total * 100;
$current_locale = setlocale(LC_NUMERIC, 0);    // Get the current locale
setlocale(LC_NUMERIC, $language.'.UTF-8);
print $percent;
setlocale(LC_NUMERIC, $current_locale); 
```

# iphone - 如何使用 xib 子类化 UIViewController 的子类

> ID：11744377
> 
> 赞同：0
> 
> 时间：2012-07-31T16:05:09.453
> 
> 标签：iphone, objective-c, xcode, inheritance

我正在开发一款游戏。游戏有不同的级别，但共享相同的方法。我正在考虑对主要游戏类进行子类化。

我如何子类化主游戏类（主游戏类是带有 xib 的 viewcontroller 的子类）？我可以用子类的 xib 覆盖 xib 吗？

```
//my main game class.
@interface Game : UIViewController{

//subclass
import <UIKit/UIKit.h>
import "Game.h"

@interface level1 : Game {

} 
```

当我使用level1.view时，它给了我一个错误“访问未知的视图类方法）

不可能啊，怎么做不同关卡的游戏~~谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:20:08.370

> 访问未知的视图类方法

这看起来像你在打电话`[level1 view]`。这是调用类方法名的尝试`+view`。没有这样的类方法。您正在尝试获取实例方法名称`-view`。

```
level1 *myLevel1 = [[level1 alloc] initWithNibName:nibName bundle:nibBundle];
myLevel1.view; 
```

顺便说一句：通常的做法是用大写字母开始上课。`Level1`所以类名不应该是`level1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:18:41.183

一种方法是在您的视图上为每个级别创建图层。

# hash - 集合的增量散列

> ID：11744378
> 
> 赞同：0
> 
> 时间：2012-07-31T16:05:13.197
> 
> 标签：hash, set

什么是增量散列元素集的好方法？这必须发生，以便可以按任何顺序添加和删除元素，并且仍然相等的集合具有相同的散列。目的是能够从一组集合中快速找到一个集合或其轻微修改。

**关于组合算子的向量空间方法**

这是不起作用的东西。b 位整数整数可以被认为是 GF(2) 上的向量空间 V，其中加法是 XOR 运算符（例如 10 + 11 = 01），乘以 0 或 1 是分量明智的逻辑与（例如 1 * 10 = 10, 0 * 10 = 00）。可以将元素随机（但固定）映射到 b 位整数 E = {e_1, ..., e_b}，然后通过将元素的哈希相加来计算集合的哈希。这样做时，必须确保 E 构成向量空间 V 的基础；否则哈希不能使用 b 位整数的所有值。

这种技术的问题是，如果 E 基的使用子集没有，例如，任何基向量 e_i 的非零第一个分量，那么得到的散列不能是奇数。取决于正在使用的基向量的哪个子集，会出现类似的问题。总之，不应该使用 XOR 来查找集合的哈希值。使用正常的求和 + 可能不会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T11:27:27.007

一种解决方案是增加一棵红黑树，以便每个节点包含以该节点为根的子树的组合哈希（总是左子哈希与当前节点哈希与右子哈希相结合）。这允许在恒定时间内找到所有元素的散列（根节点的散列），同时不影响红黑树的属性。可以创建一个通用的红黑树实现，它允许自动更新节点中的分层信息，其中更新规则由数据结构的用户指定。由于红黑树在重新平衡时可能会旋转，这意味着哈希组合函数必须是关联的。在论文“用 SL2 散列”中 通过 Tillich 和 Zémor 可以找到具有关联散列组合函数（矩阵乘法）的散列函数。我不确定这是否具有可接受的性能。

# symfony - Symfony2 FOS UserBundle 注册表单在 %fos_user.model.user.class% 附近解析错误

> ID：11744380
> 
> 赞同：0
> 
> 时间：2012-07-31T16:05:22.857
> 
> 标签：symfony, fosuserbundle, parse-error

我正在尝试借助此[https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.0/Resources/doc/overriding_forms.md构建自定义注册表单](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.0/Resources/doc/overriding_forms.md)

我将所有内容都进行到最后，但出现以下错误：

```
 ParseException: Unable to parse in "\/home\/shokora\/git\/extrastufi\/src\/ExtraStufi\/DatabaseBundle\/DependencyInjection\/..  \/Resources\/config\/services.yml" at line 10 (near " arguments: [%fos_user.model.user.class%]").

in /home/shokora/git/extrastufi/vendor/symfony/src/Symfony/Component/Yaml/Parser.php line 227
at Parser->parse() in /home/shokora/git/extrastufi/vendor/symfony/src/Symfony/Component/Yaml/Parser.php line 168
at Parser->parse() in /home/shokora/git/extrastufi/vendor/symfony/src/Symfony/Component/Yaml/Parser.php line 168
at Parser->parse() in /home/shokora/git/extrastufi/vendor/symfony/src/Symfony/Component/Yaml/Yaml.php line 73
at Yaml::parse() in /home/shokora/git/extrastufi/vendor/symfony/src/Symfony/Component/DependencyInjection/Loader/YamlFileLoader.php line 242
at YamlFileLoader->loadFile() in /home/shokora/git/extrastufi/vendor/symfony/src/Symfony/Component/DependencyInjection/Loader/YamlFileLoader.php line 42
at YamlFileLoader->load() in /home/shokora/git/extrastufi/src/ExtraStufi/DatabaseBundle/DependencyInjection/ExtraStufiDatabaseExtension.php line 26
at ExtraStufiDatabaseExtension->load() in /home/shokora/git/extrastufi/vendor/symfony/src/Symfony/Component/DependencyInjection/Compiler/MergeExtensionConfigurationPass.php line 42
at MergeExtensionConfigurationPass->process() in /home/shokora/git/extrastufi/vendor/symfony/src/Symfony/Component/HttpKernel/DependencyInjection/MergeExtensionConfigurationPass.php line 39
at MergeExtensionConfigurationPass->process() in /home/shokora/git/extrastufi/vendor/symfony/src/Symfony/Component/DependencyInjection/Compiler/Compiler.php line 119
at Compiler->compile() in /home/shokora/git/extrastufi/vendor/symfony/src/Symfony/Component/DependencyInjection/ContainerBuilder.php line 437
at ContainerBuilder->compile() in /home/shokora/git/extrastufi/app/bootstrap.php.cache line 872
at Kernel->buildContainer() in /home/shokora/git/extrastufi/app/bootstrap.php.cache line 783
at Kernel->initializeContainer() in /home/shokora/git/extrastufi/app/bootstrap.php.cache line 517
at Kernel->boot() in /home/shokora/git/extrastufi/app/bootstrap.php.cache line 548
at Kernel->handle() in /home/shokora/git/extrastufi/web/app_dev.php line 27 
```

services.yml 中的代码是

```
parameters:
#    extra_stufi_database.example.class: ExtraStufi\DatabaseBundle\Example

services:
#    extra_stufi_database.example:
#        class: %extra_stufi_database.example.class%
#        arguments: [@service_id, "plain_value", %parameter%]
    extra_stufi_database.registration.form.type:
        class: ExtraStufi\DatabaseBundle\Form\Type\RegistrationFormType
            arguments: [%fos_user.model.user.class%]
            tags:
                - { name: form.type, alias: student_user_registration } 
```

（抱歉，我没有立即将其包括在内，这是办公室的最后 10 分钟：P）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:24:10.587

此错误表示您的语法错误

/home/shokora/git/extrastufi/src/ExtraStufi/DatabaseBundle/DependencyInjection/.. /Resources/config/services.yml

第 10 行的文件。你能发布这个文件的内容吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:10:04.980

[好的，我使用https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.0/Resources/doc/overriding_forms.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.0/Resources/doc/overriding_forms.md)上提到的 services.yml (services.xml) 的 XML 版本修复了它

我仍然不知道 services.yml 出了什么问题，但这有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T13:53:14.213

使用 Yaml 更改 FileLoader 之一：

```
$loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config')); 
```

# twitter - 试图从浏览器访问搜索

> ID：11744382
> 
> 赞同：0
> 
> 时间：2012-07-31T16:05:23.947
> 
> 标签：twitter

我正在尝试使用我的 oauth_token 和 oauth_token_secret 搜索用户，如 dev.twitter.com 上的应用程序页面上所示，但我得到了

“无法验证您的身份。”

我用正确的值点击的网址：

[https://api.twitter.com/1/users/search.json?q=foo&oauth_token=123&oauth_token_secret=abc](https://api.twitter.com/1/users/search.json?q=foo&oauth_token=123&oauth_token_secret=abc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:21:45.470

在这里，您正在执行一个经过身份验证的请求，这是验证它的错误方法。

做你想做的事，你可以做这样的事情（这里计算有多少人在搜索中使用你的应用程序）：

```
unsigned int nbTweets = 0;

Timeline tl = twitter.search("foo");    // http://search.twitter.com/search.json?q=foo

foreach (Tweet t in tl) {
    // Retrieving the application used to write the tweet in the "source" field of the tweet
    String tweetHTMLSource = t.source; // tweetHTMLSource == '<a href="clientName.callbackURL" rel="nofollow">clientName</a>'

    String clientName = tweetHTMLSource.plainText; // clientName == "clientName"

    if (clientName == "MYAPPLICATION_NAME") {
        nbTweets++;
    }
} 
```

# ruby-on-rails - rspec 测试失败：两个“主题”之间的冲突

> ID：11744383
> 
> 赞同：0
> 
> 时间：2012-07-31T16:05:26.687
> 
> 标签：ruby-on-rails, rspec

我无法通过考试。在我的应用程序中，用户可以拥有许多他们请求的会议 (sent_meetings) 和请求的会议 (received_meetings)。

首先，我的（简化的）user.rb 模型：

用户.rb

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password

  has_many :sent_meetings, :foreign_key => "requestor_id", :class_name => "Meeting"
  has_many :received_meetings, :foreign_key => "requestee_id", :class_name => "Meeting"
end 
```

还有我的 meeting.rb 模型：

会议.rb

```
class Meeting < ActiveRecord::Base
  attr_accessible :intro, :proposed_date, :proposed_location

  belongs_to :requestor, class_name: "User"
  belongs_to :requestee, class_name: "User"
end 
```

我的测试：

会议规范.rb

```
require 'spec_helper'

describe Meeting do

  let(:requestee) { FactoryGirl.create(:user) }
  let(:requestor) { FactoryGirl.create(:user) }

  before { @received_meeting = requestee.received_meetings.build(intro: "Lorem ipsum") }
  before { @sent_meeting = requestor.sent_meetings.build(intro: "Lorem ipsum") }

  subject { @sent_meeting }
      it { should respond_to(:intro) }
      it { should respond_to(:requestor_id) }
      it { should respond_to(:requestor) }
      its(:requestor) { should == requestor }
      # it { should be_valid }

  subject { @received_meeting }
    it { should respond_to(:intro) }
    it { should respond_to(:requestee_id) }
    it { should respond_to(:requestee) }
    its(:requestee) { should == requestee }
    # it { should be_valid }

end 
```

我的规范文件（@sent_meeting 和@received_meeting）中的两个“主题”行之间似乎存在冲突，并且其中一个覆盖了另一个。这是我失败的测试消息：

失败：

1) 会议请求者失败/错误: its(:requestor) { should == requestor } expected: # got: nil (using ==) # ./spec/models/meeting_spec.rb:15:in `block (2 levels)在 '

在 0.67458 秒内完成 36 个示例，1 个失败

失败的例子：

rspec ./spec/models/meeting_spec.rb:15 # 会议请求者

我发现有趣的是，我只为请求者或被请求者收到此错误*（*显然存在冲突）。两个主题代码块的顺序很重要，当我切换它们时，我得到与上面相同的错误，但关于“请求者”而不是“请求者”。

我怎样才能让测试通过？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:09:01.063

你不能这样做。你必须这样做：

```
require 'spec_helper'

describe Meeting do

  let(:requestee) { FactoryGirl.create(:user) }
  let(:requestor) { FactoryGirl.create(:user) }

  before { @received_meeting = requestee.received_meetings.build(intro: "Lorem ipsum") }
  before { @sent_meeting = requestor.sent_meetings.build(intro: "Lorem ipsum") }

  describe "sent meetings" do
    subject { @sent_meeting }
    it { should respond_to(:intro) }
    it { should respond_to(:requestor_id) }
    it { should respond_to(:requestor) }
    its(:requestor) { should == requestor }
    it { should be_valid }
  end

  describe "received meetings" do

    subject { @received_meeting }
    it { should respond_to(:intro) }
    it { should respond_to(:requestee_id) }
    it { should respond_to(:requestee) }
    its(:requestee) { should == requestee }
    # it { should be_valid }
  end

end 
```

您也可以像这样使用 let 代替：

```
require 'spec_helper'

describe Meeting do

  let(:requestee) { FactoryGirl.create(:user) }
  let(:requestor) { FactoryGirl.create(:user) }
  let(:received_meeting) { requestee.received_meetings.build(intro: "Lorem ipsum") }
  let(:sent_meeting) { requestor.sent_meetings.build(intro: "Lorem ipsum") }

  describe "sent meetings" do
    subject { sent_meeting }
    it { should respond_to(:intro) }
    it { should respond_to(:requestor_id) }
    it { should respond_to(:requestor) }
    its(:requestor) { should == requestor }
    it { should be_valid }
  end

  describe "received meetings" do
    subject { received_meeting }
    it { should respond_to(:intro) }
    it { should respond_to(:requestee_id) }
    it { should respond_to(:requestee) }
    its(:requestee) { should == requestee }
    it { should be_valid }
  end

end 
```

它会更快。

# java - Java RMI 仅在本地工作

> ID：11744384
> 
> 赞同：2
> 
> 时间：2012-07-31T16:05:28.007
> 
> 标签：java, exception, connection, localhost, rmi

我正在开发一个瘦 RMI 客户端，但是当我尝试从除 localhost 之外的任何机器连接到它时，它会收到拒绝的连接堆栈跟踪。我确认我的防火墙已关闭。我还需要做什么。我需要为 RMI 配置安全性吗？

服务器.java

```
package com.ibm.icm.autoconfig.server.rmi;

import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.rmi.server.ExportException;
import java.rmi.server.UnicastRemoteObject;

public final class Server extends Commands implements ServerHook {
    private Registry registry;

    public static void main(String[] args) throws RemoteException {
        Server server = new Server();
        server.Start();
    }

    private void Start() throws RemoteException {

        ServerHook serverHook = (ServerHook) UnicastRemoteObject.exportObject(this, 0);

        // Add serverHook to the local registry -- attempt to create registry
        // instance, if it fails to create, try finding an existing one
        try {
            registry = LocateRegistry.createRegistry(1099);
        } catch (ExportException ee) {
            registry = LocateRegistry.getRegistry(1099);
        }
        registry.rebind("ServerHook", serverHook);

        System.out.println("Server Running...");

        while (true) {
        }
    }
} 
```

服务器钩子.java

```
package com.ibm.icm.autoconfig.server.rmi;

import java.rmi.Remote;
import java.rmi.RemoteException;

public interface ServerHook extends Remote {
    public boolean write(String msg) throws RemoteException;
} 
```

客户端.java

```
package com.ibm.icm.autoconfig.client.rmi;

import java.rmi.NotBoundException;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;

import com.ibm.icm.autoconfig.server.rmi.ServerHook;

public class Client {
    private ServerHook serverHook;

    public static void main(String[] args) throws RemoteException, NotBoundException {
        Client client = new Client();
        client.connectTo("localhost");
        client.writeServer("Hello Server!");
    }

    private void connectTo(String serverHost) throws RemoteException, NotBoundException {
        Registry registry = LocateRegistry.getRegistry();
        serverHook = (ServerHook) registry.lookup("ServerHook");
    }

    private void writeServer(String msg) throws RemoteException {
        serverHook.write(msg);
    }
} 
```

非本地 RMI 的堆栈跟踪：

```
Exception in thread "main" java.rmi.ConnectException: Connection refused to host: 9.65.186.135; nested exception is: 
    java.net.ConnectException: Connection refused: connect
    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(Unknown Source)
    at sun.rmi.server.UnicastRef.newCall(Unknown Source)
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    at com.ibm.icm.autoconfig.client.rmi.Client.connectTo(Client.java:21)
    at com.ibm.icm.autoconfig.client.rmi.Client.main(Client.java:15)
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(Unknown Source)
    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(Unknown Source)
    ... 7 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:08:30.597

这是因为以下代码 int eh 客户端：

```
client.connectTo("localhost"); --> Client tries to connect to itself. Wrong 
```

这应该改为：

```
client.connectTo(serverHost); 
```

其中 serverHost 是运行服务器代码的机器的地址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T22:47:54.417

我在这里发现了问题。这与 Suraj Chandran 的建议类似。

```
private void connectTo(String serverHost) throws RemoteException, NotBoundException {
        Registry registry = LocateRegistry.getRegistry();
        serverHook = (ServerHook) registry.lookup("ServerHook");
} 
```

该条目`LocateRegistry.getRegistry()`本质上是让我的客户指向它自己的注册表。正确的代码是：

```
private void connectTo(String **serverHost**) throws RemoteException, NotBoundException {
        Registry registry = LocateRegistry.getRegistry(**serverHost**);
        serverHook = (ServerHook) registry.lookup("ServerHook");
} 
```

# xmpp - 在 ejabbderd 中禁用通信

> ID：11744385
> 
> 赞同：-1
> 
> 时间：2012-07-31T16:05:29.777
> 
> 标签：xmpp, ejabberd

我使用 ejabberd 作为通知服务的基础。

用户（我们将其称为 notifyme@server.com）充当机器人，向系统上注册的各种用户发送通知。

我想禁用用户之间的聊天，以便他们只能使用 notifyme@server.com 而不是彼此发送和接收消息。

我已经使用 ejabberd 和共享花名册的补丁实现了花名册，所以他们可以看到的唯一联系人是 notifyme@server.com 并且他们无法添加更多，但他们仍然能够向另一个用户发送消息并且它将收到。

**TL;DR 我怎样才能让用户只能向他们名册上的用户发送消息？**

感谢您的任何帮助，您可以提供 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:47:38.013

> 我怎样才能让用户只能在他们的名册上向用户发送消息？

在正常设置中，您可以使用隐私列表 (xep-0016) 规则来实现，该规则指定您只想发送/接收来自您名册上的用户的消息。但是用户可以修改他们的隐私列表，所以我想这在你的情况下是不可接受的。您可能需要根据需要编写自定义 ejabberd 模块，或者修改 mod_privacy 以始终执行该规则并且不要让客户端修改它。

# jquery - IE 并没有真正使用彩色动画调用 Mouseleave

> ID：11744389
> 
> 赞同：0
> 
> 时间：2012-07-31T16:05:33.873
> 
> 标签：jquery, internet-explorer, coloranimation

我知道在 SO 上有很多这样的问题，但我一直找不到带有动画颜色的问题。在鼠标悬停时，它会变成一种颜色（我将它设置为丑陋的蓝色只是为了测试目的，而在鼠标移出时，它会变成原来的颜色。它在所有其他浏览器上都能完美运行，除了 IE，它会为鼠标悬停设置动画，但是不会为鼠标设置动画。

相关的js

```
$(".entry").mouseover(function () {

    $(this).animate({backgroundColor:"rgba(0,255,255,0.5)"},{duration:300, queue:false});

});

$(".entry").mouseout(function () {

    $(this).animate({backgroundColor:"white"},{duration:300, queue:false});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:39:05.677

试试这个

[http://jsfiddle.net/W3PWA/1/](http://jsfiddle.net/W3PWA/1/)

我只将 backgroundColor 转换为 rgba 而不是白色这个词。由于您使用的是最新的 jquery，因此您应该使用 .on()

```
$(".entry").on({
  mouseenter: function(){
    // your code
  },
  mouseleave: function(){
    // your code
  }
}); 
```

# iphone - 尝试取消本地通知时，应用程序抛出“NSInvalidArgumentException”

> ID：11744391
> 
> 赞同：0
> 
> 时间：2012-07-31T16:05:33.603
> 
> 标签：iphone, objective-c, ios, uilocalnotification

我的代码抛出以下异常：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSPlaceholderArray initWithObjects:count:]: attempt to insert nil object from objects[0]' 
```

在线上：

```
[[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationMonday]; 
```

在代码块中：

```
if ([[defaults objectForKey:@"dailyReminder"] isEqualToString:@"1"]){
        //Schedule Notifications for each checked day
        if ([[defaults objectForKey:@"dailyReminderMonday"] isEqualToString:@"1"])
        {
            //Set up the local notification
            appDelegate.dailyNotificationMonday = [[UILocalNotification alloc] init];
            if(appDelegate.dailyNotificationMonday){
                //Set fire date to alert time
                appDelegate.dailyNotificationMonday.fireDate = mondayFireTime;
                //Set Alert body
                appDelegate.dailyNotificationMonday.alertBody = textField.text;
                //Set time zone to default
                appDelegate.dailyNotificationMonday.timeZone = [NSTimeZone defaultTimeZone];
                //Repeat the notification everyday (fires at same time
                //as initial notification)
                appDelegate.dailyNotificationMonday.repeatInterval = NSWeekCalendarUnit;

                // schedule notification
                UIApplication *app = [UIApplication sharedApplication];
                [app scheduleLocalNotification:appDelegate.dailyNotificationMonday];

                NSLog(@"Monday Fire Date: %@", appDelegate.dailyNotificationMonday.fireDate);
            }
        }
        else {
           [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationMonday]; 
        }

        if ([[defaults objectForKey:@"dailyReminderTuesday"] isEqualToString:@"1"])
        {
            //Set up the local notification
            appDelegate.dailyNotificationTuesday = [[UILocalNotification alloc] init];
            if(appDelegate.dailyNotificationTuesday){
                //Set fire date to alert time
                appDelegate.dailyNotificationTuesday.fireDate = tuesdayFireTime;
                //Set Alert body
                appDelegate.dailyNotificationTuesday.alertBody = textField.text;
                //Set time zone to default
                appDelegate.dailyNotificationTuesday.timeZone = [NSTimeZone defaultTimeZone];
                //Repeat the notification everyday (fires at same time
                //as initial notification)
                appDelegate.dailyNotificationTuesday.repeatInterval = NSWeekCalendarUnit;

                // schedule notification
                UIApplication *app = [UIApplication sharedApplication];
                [app scheduleLocalNotification:appDelegate.dailyNotificationTuesday];

                NSLog(@"Tuesday Fire Date: %@", appDelegate.dailyNotificationTuesday.fireDate);
            }
        }
        else {
            [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationTuesday]; 
        }

        if ([[defaults objectForKey:@"dailyReminderWednesday"] isEqualToString:@"1"])
        {
            //Set up the local notification
            appDelegate.dailyNotificationWednesday = [[UILocalNotification alloc] init];
            if(appDelegate.dailyNotificationWednesday){
                //Set fire date to alert time
                appDelegate.dailyNotificationWednesday.fireDate = wednesdayFireTime;
                //Set Alert body
                appDelegate.dailyNotificationWednesday.alertBody = textField.text;
                //Set time zone to default
                appDelegate.dailyNotificationWednesday.timeZone = [NSTimeZone defaultTimeZone];
                //Repeat the notification everyday (fires at same time
                //as initial notification)
                appDelegate.dailyNotificationWednesday.repeatInterval = NSWeekCalendarUnit;

                // schedule notification
                UIApplication *app = [UIApplication sharedApplication];
                [app scheduleLocalNotification:appDelegate.dailyNotificationWednesday];

                NSLog(@"Wednesday Fire Date: %@", appDelegate.dailyNotificationWednesday.fireDate);
            }
        }
        else {
            [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationWednesday]; 
        }

        if ([[defaults objectForKey:@"dailyReminderThursday"] isEqualToString:@"1"])
        {
            //Set up the local notification
            appDelegate.dailyNotificationThursday = [[UILocalNotification alloc] init];
            if(appDelegate.dailyNotificationThursday){
                //Set fire date to alert time
                appDelegate.dailyNotificationThursday.fireDate = thursdayFireTime;
                //Set Alert body
                appDelegate.dailyNotificationThursday.alertBody = textField.text;
                //Set time zone to default
                appDelegate.dailyNotificationThursday.timeZone = [NSTimeZone defaultTimeZone];
                //Repeat the notification everyday (fires at same time
                //as initial notification)
                appDelegate.dailyNotificationThursday.repeatInterval = NSWeekCalendarUnit;

                // schedule notification
                UIApplication *app = [UIApplication sharedApplication];
                [app scheduleLocalNotification:appDelegate.dailyNotificationThursday];

                NSLog(@"Thursday Fire Date: %@", appDelegate.dailyNotificationThursday.fireDate);
            }
        }
        else {
            [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationThursday]; 
        }

        if ([[defaults objectForKey:@"dailyReminderFriday"] isEqualToString:@"1"])
        {
            //Set up the local notification
            appDelegate.dailyNotificationFriday = [[UILocalNotification alloc] init];
            if(appDelegate.dailyNotificationFriday){
                //Set fire date to alert time
                appDelegate.dailyNotificationFriday.fireDate = fridayFireTime;
                //Set Alert body
                appDelegate.dailyNotificationFriday.alertBody = textField.text;
                //Set time zone to default
                appDelegate.dailyNotificationFriday.timeZone = [NSTimeZone defaultTimeZone];
                //Repeat the notification everyday (fires at same time
                //as initial notification)
                appDelegate.dailyNotificationFriday.repeatInterval = NSWeekCalendarUnit;

                // schedule notification
                UIApplication *app = [UIApplication sharedApplication];
                [app scheduleLocalNotification:appDelegate.dailyNotificationFriday];

                NSLog(@"Friday Fire Date: %@", appDelegate.dailyNotificationFriday.fireDate);
            }
        }
        else {
            [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationFriday]; 
        }

        if ([[defaults objectForKey:@"dailyReminderSaturday"] isEqualToString:@"1"])
        {
            //Set up the local notification
            appDelegate.dailyNotificationSaturday = [[UILocalNotification alloc] init];
            if(appDelegate.dailyNotificationSaturday){
                //Set fire date to alert time
                appDelegate.dailyNotificationSaturday.fireDate = saturdayFireTime;
                //Set Alert body
                appDelegate.dailyNotificationSaturday.alertBody = textField.text;
                //Set time zone to default
                appDelegate.dailyNotificationSaturday.timeZone = [NSTimeZone defaultTimeZone];
                //Repeat the notification everyday (fires at same time
                //as initial notification)
                appDelegate.dailyNotificationSaturday.repeatInterval = NSWeekCalendarUnit;

                // schedule notification
                UIApplication *app = [UIApplication sharedApplication];
                [app scheduleLocalNotification:appDelegate.dailyNotificationSaturday];

                NSLog(@"Saturday Fire Date: %@", appDelegate.dailyNotificationSaturday.fireDate);
            }
        }
        else {
            [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationSaturday]; 
        }

        if ([[defaults objectForKey:@"dailyReminderSunday"] isEqualToString:@"1"])
        {
            //Set up the local notification
            appDelegate.dailyNotificationSunday = [[UILocalNotification alloc] init];
            if(appDelegate.dailyNotificationSunday){
                //Set fire date to alert time
                appDelegate.dailyNotificationSunday.fireDate = sundayFireTime;
                //Set Alert body
                appDelegate.dailyNotificationSunday.alertBody = textField.text;
                //Set time zone to default
                appDelegate.dailyNotificationSunday.timeZone = [NSTimeZone defaultTimeZone];
                //Repeat the notification everyday (fires at same time
                //as initial notification)
                appDelegate.dailyNotificationSunday.repeatInterval = NSWeekCalendarUnit;

                // schedule notification
                UIApplication *app = [UIApplication sharedApplication];
                [app scheduleLocalNotification:appDelegate.dailyNotificationSunday];

                NSLog(@"Sunday Fire Date: %@", appDelegate.dailyNotificationSunday.fireDate);
            }
        }
        else {
            [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationSunday]; 
        }

    }
    else {
        //Remove all daily notifications
        [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationMonday];
        [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationTuesday];
        [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationWednesday];
        [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationThursday];
        [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationFriday];
        [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationSaturday];
        [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationSunday];
    } 
```

我的 AppDelegate 中也有这段代码：

```
//Initialze daily notifications
        dailyNotificationMonday = [[UILocalNotification alloc] init];
        dailyNotificationTuesday = [[UILocalNotification alloc] init];
        dailyNotificationWednesday = [[UILocalNotification alloc] init];
        dailyNotificationThursday = [[UILocalNotification alloc] init];
        dailyNotificationFriday = [[UILocalNotification alloc] init];
        dailyNotificationSaturday = [[UILocalNotification alloc] init];
        dailyNotificationSunday = [[UILocalNotification alloc] init];

        //Initialize submition notifications
        submitNotification = [[UILocalNotification alloc] init];
        badgerNotification = [[UILocalNotification alloc] init];

        //Initialize Automatic backup notification
        automaticBackupNotification  = [[UILocalNotification alloc] init]; 
```

仅在应用程序首次启动时调用一次。

我根本不习惯使用本地通知，但我不明白这里发生了什么，在我看来，我想取消一个不存在的通知？

任何建议将不胜感激。

谢谢，

泰辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:13:59.060

看起来`appDelegate.dailyNotificationMonday`是`nil`。这似乎不是传递给的有效值`-cancelLocalNotification:`。

你有没有尝试过：

```
if (appDelegate.dailyNotificationMonday)
    [[UIApplication sharedApplication] cancelLocalNotification:appDelegate.dailyNotificationMonday]; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:20:16.733

appDelegate.dailyNotificationMonday 为 nil，因为您仅将其安排在此 if 块中：

```
if ([[defaults objectForKey:@"dailyReminderMonday"] isEqualToString:@"1"]) 
```

如果不是这样，并且在 else 块中调用了 cancelLocalNotification，那么您实际上是在告诉应用程序取消尚未安排的通知。我实际上认为您甚至不需要那个 else 块，您是否尝试过摆脱它？

# java - 防止在多线程上下文中使用非线程安全方法

> ID：11744392
> 
> 赞同：7
> 
> 时间：2012-07-31T16:05:38.487
> 
> 标签：java, multithreading, thread-safety

当用户尝试在多线程上下文中使用类的非线程安全方法时，有没有办法抛出异常？我想问题主要是检测到多个线程正在尝试使用该方法。或者，我可以在函数声明中使用“not_synchronous”关键字/标签吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:18:36.613

您可以在允许线程运行之前检查该方法是否已在使用中 - 但这与使用锁没有太大区别（注意：我的示例不是可重入的）：

```
private static final AtomicBoolean used = new AtomicBoolean();

public static void unsafe() throws InterruptedException {
    if(!used.compareAndSet(false, true)) {
        throw new IllegalStateException();
    }
    //do you stuff
    used.set(false);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:07:52.760

没有简单的方法可以做到这一点，不。如果您检测到多个线程正在使用一个方法，那么您很可能必须使用线程安全集合等。如果您正在做所有这些，那么您可能还必须使方法本身成为线程安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T16:22:00.473

扩展格雷的答案：假设您想这样做（检测一个方法何时被多个线程使用）。一个幼稚（且不正确）的实现可能如下所示：

```
volatile boolean methodBeingUsed = false;
public void doSomething() {
  if (methodBeingUsed) throw new IllegalStateException("You can't do that!");
  try {
    methodBeingUsed = true;
    // do something...
  } finally {
    methodBeingUsed = false;
  }
} 
```

好吧，好吧……但是两个线程都可以通过第一次`if (methodBeingUsed)`检查并同时进入临界区。所以现在也许我们尝试添加一个锁来保护`methodBeingUsed`标志：

```
Lock methodLock = new ReentrantLock();
volatile boolean methodBeingUsed = false;
public void doSomething() {
  try {
    lock.lock();
    if (methodBeingUsed) throw new IllegalStateException("You can't do that!");
    methodBeingUsed = true;
  } finally {
    lock.unlock();
  }

  try {
    // do something...
  } finally {
    try {
      lock.lock();
      methodBeingUsed = false;
    } finally {
      lock.unlock();
    }
  }
} 
```

当然，这假设 doSomething() 不能递归调用自身。如果可以，那么您还必须跟踪调用线程。添加更多检查以解决我现在没有考虑的其他条件，并且很容易看出花在同步逻辑以检测多个线程正在使用的方法上的工作最好只花在使方法线程上- 安全开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:37:27.373

实际上，如果您的目标是确定“多个线程正在尝试使用此方法”，并且您没有将其限制为“多个方法......同时” - 那么（请原谅我）Alex 的代码可以修改很好：

1.  更改`methodBeingUsed`为`threadOwningMethod`，并将其设置为线程而不是`true`。

2.  您不需要在最后清除它 - 保存那些锁定/解锁步骤。一旦拥有，就拥有了（资本主义猪！！）。

3.  `threadOwningMethod`可以预先检查它是否匹配当前线程（A-OK）或不匹配（抛出异常），而不必产生锁定。如果它没有设置（null），那么你会招致一次性命中：check/lock/check&set/unlock；这是安全的，因为`threadOwningMethod`标记为 volatile。

# jquery - jQuery ajax 调用不适用于参数

> ID：11744394
> 
> 赞同：0
> 
> 时间：2012-07-31T16:05:50.697
> 
> 标签：jquery, asp.net-ajax

我想调用一个网络服务方法。这是我的 jQuery 代码：

```
 var name = $("#Name").val();
  alert(name);
  $.ajax({
      type: "POST",
      url: "CityList.aspx/Edit",
      data: '{"name":' + name + '}',
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function (msg) {
          alert(msg.d);

      },
      error: function (msg) {
          alert(msg);
      }
  }); 
```

这是我的服务器端代码：

```
[WebMethod]
public static void Edit(string name)
{
    ...
} 
```

当我传递参数时，它会出错，但我调用没有参数的方法一切正常。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:09:41.700

改变

```
 data: '{"name":' + name + '}', 
```

到

```
 data: {name:  name }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:11:15.593

属性`Data`应该是查询字符串或对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T18:18:23.593

我用：更改了我的数据文本， `data: '{name:"' + name + '",id:' + id + '}'`它解决了。谢谢你的帮助。

# mule - 有人在 Mule 应用程序中使用过 logback 吗？

> ID：11744395
> 
> 赞同：3
> 
> 时间：2012-07-31T16:05:53.207
> 
> 标签：mule, logback

有没有人能够为他们部署在 Mule 中的应用程序使用 logback。我已经配置了一个文件附加程序，并在我的类路径中获得了 logback.xml。然而，这似乎没有得到采纳。

请注意，Mule 可能仍在使用它自己的默认 log4j 实现，因为我看到 mule.log 确实获得了一些日志记录，但不是我尝试记录的日志 - 这让我觉得我的显式日志事件一起丢失了。Mule 默认使用 log4j，但猜我们可以覆盖它吗？这里有一些文档，但不太有用 [http://www.mulesoft.org/documentation-3.2/display/MULE3USER/Configuring+Logging](http://www.mulesoft.org/documentation-3.2/display/MULE3USER/Configuring+Logging)

我想要的是仅将 Logback 用于我的应用程序，而无需更改 Mule 系统级别的 jar 和配置。

供参考; 我正在尝试在 logback.xml 中使用以下内容

```
 <appender name="FILE" class="ch.qos.logback.core.FileAppender">
        <file>D:\logs\mule\myauto.log</file>
        <encoder>
              <pattern>%d [%p] <%c> %m%n</pattern>
        </encoder>
  </appender>

  <appender name="asyncFileAppender" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="FILE" />
  </appender>

  <logger name="automationlogger" level="INFO">

        <appender-ref ref="asyncFileAppender" />
  </logger> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:52:44.663

每个应用程序的日志记录被硬编码为 slf4j/log4j，因为 mule-module-logging 覆盖了 mule 团队必须更改以使其工作的一些 slf4j 类。

如果您查看[mule-module-logging pom](http://www.jarvana.com/jarvana/inspect-pom/org/mule/modules/mule-module-logging/3.2.1/mule-module-logging-3.2.1.pom)，您可以看到哪些类被遮蔽，以及为什么除非直接破解 mule 代码，否则不允许您使用 logback。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:20:42.277

我试图用 logback 替换 log4j jar 文件但没有用。包装器使用 log4j 进行日志记录，因此您需要在 /lib/boot 目录中有 log4j jar。如果我在不删除 log4j jars 的情况下添加 logback jars，你会得到以下警告..

SLF4J：在 [jar:file:/C:/dev/mule-standalone-3.3.1/lib/boot/logback-classic-1.0.9.jar!/org/slf4j/impl/StaticLoggerBinder.class] SLF4J 中找到绑定: 在 [jar:file:/C:/dev/mule-standalone-3.3.1/lib/boot/mule-module-logging-3.3.1.jar!/org/slf4j/impl/StaticLoggerBinder.class] 中找到绑定

现在删除 mule 日志记录模块并添加 jcl-over-slf4j。服务器启动并获取配置文件夹中的 logback.xml。但是骡子应用程序特定的日志记录已经消失了。

一天结束，这就是我所做的。

删除：mule-module-logging-3.3.1

添加：logback-classic-1.0.9、logback-core-1.0.9、jcl-over-slf4j-1.7.2、log4j-over-slf4j-1.7.2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T06:24:13.880

我不熟悉 mule，但您始终可以使用 slf4j + logback，这将使您能够在 slf4j 的[log4j 桥](http://www.slf4j.org/legacy.html)的帮助下重定向对 log4j 的日志调用。

# mysql - MySQL 批量插入

> ID：11744403
> 
> 赞同：1
> 
> 时间：2012-07-31T16:06:39.480
> 
> 标签：mysql, batch-file, insert

我在 MySQL 的批量插入时遇到以下问题。

我按照 ID 的顺序从 MDB 文件中读取了许多记录。我将它们批量插入 MySQL，顺序与从 MDB 文件中读取的顺序相同。在 MySQL 表中，记录似乎是随机顺序的，可以检查，因为 MDB 文件中的 ID 是列之一。我希望顺序是一样的？？

任何想法是什么原因造成的？

谢谢，史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:10:05.337

MySQL 表中的行不能保证“按顺序”存储，无论是按照您插入它们的顺序还是任何其他顺序。

*唯一*保证您拥有查询将以特定顺序返回的行是查询中包含的子句`ORDER BY`，例如

```
SELECT *
  FROM mytable
 ORDER BY mycol ASC 
```

# php - CakePHP 问题：在非对象上调用成员函数 find()

> ID：11744407
> 
> 赞同：1
> 
> 时间：2012-07-31T16:06:52.597
> 
> 标签：php, cakephp

我看过这里，发现有些人有一些相同的问题，但似乎没有一个解决方案对我有用。

现在我正在尝试将一个新页面添加到一个我已经被更新的网站中（我自己并没有从新的网站表单开始）。现在，同一个表具有我的实时站点中的内容，我将此代码与 cakePHP 的新副本一起使用。但是，我得到“调用非对象上的成员函数 find()”，我认为这可能与我调用 find 命令的方式或 cakePHP 配置文件可能已更改的方式有关。

将此添加到我的 Routes.php ：

```
 Router::connect('/events', array('controller' => 'events', 'action' => 'eventDetails')); 
```

我的型号代码：

```
 class Event extends AppModel {
var $name = 'Event';

var $validate = array(
    'id' => array(
        'numeric' => array(
            'rule' => array('numeric'),
            //'message' => 'Your custom message here',
            'allowEmpty' => true,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'startdate' => array(
        'numeric' => array(
            'rule' => array('numeric'),
            //'message' => 'Your custom message here',
            //'allowEmpty' => false,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'endate' => array(
        'numeric' => array(
            'rule' => array('numeric'),
            //'message' => 'Your custom message here',
            'allowEmpty' => true,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'spaces' => array(
        'alphanumeric' => array(
            'rule' => array('alphanumeric'),
            //'message' => 'Your custom message here',
            'allowEmpty' => true,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'info' => array(
        'alphanumeric' => array(
            'rule' => array('alphanumeric'),
            //'message' => 'Your custom message here',
            'allowEmpty' => true,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'info' => array(
        'alphanumeric' => array(
            'rule' => array('alphanumeric'),
            //'message' => 'Your custom message here',
            'allowEmpty' => true,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
    'img' => array(
        'alphanumeric' => array(
            'rule' => array('alphanumeric'),
            //'message' => 'Your custom message here',
            'allowEmpty' => true,
            //'required' => false,
            //'last' => false, // Stop validation after this rule
            //'on' => 'create', // Limit validation to 'create' or 'update' operations
        ),
    ),
);
//The Associations below have been created with all possible keys, those that are not needed can be removed

var $belongsTo = array(
    'Team' => array(
        'className' => 'Team',
        'foreignKey' => 'team_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
);
} 
```

这个代码点，我想检查我所有的数据库字段，这是我从另一个模型复制的代码，但为了与我的表一起使用而对其进行了更改。

我的控制器代码：

```
class EventsController extends AppController {
var $name = 'Events';
var $uses = array();

function eventDetails() {

    $EventData = $this->Event->find('all');

    print_r($EventData);

    die();      
} //End of function eventDetails()

 } // End of EventsController Class 
```

屏幕错误：

```
 Notice (8): Undefined property: EventsController::$Event        [APP/controllers/events_controller.php, line 10] Fatal error: Call to a member function   find() on a non-object in /var/www/vh/app/controllers/events_controller.php on line 10 
```

唯一处理的两个表是事件和团队 - 它们以小写形式保存，并以“s”结尾。团队表已经在数据库中，事件表是我制作的新表。就像我说的，当我使用从实时站点导出的这些表到测试数据库，然后使用新的 CakePHP 设置时，它是有效的，它会打印表的内容。

所以这一定与 CakePHP 的设置方式有关，而且这个（蛋糕）对我来说还是很新的。这是我第一次制作新模型/控制器/表。我一直在做的就是为已经构建和工作的控制器添加新功能。

我也试过这段代码，'$EventData = $this->set('events', $this->Event->find('all'));' 我从另一篇关于此类错误的帖子中得到 '$this->set('events''

I have tried to be as clear as possible, please let me know if I have not been.

Many Thanks For Any Help!

Glenn Curtis.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:09:06.140

Remove:

```
var $uses = array(); 
```

CakePHP has it's own inheritance model. As such, `$uses` is rather counterintuitive.

```
$uses = array('Event', 'Foo'); // explicitly use Event and Foo model
$uses = array(); // don't use any models 
```

By default, CakePHP implicitly sets `$uses` to the corresponding model of the controller, in your case `Event`. So simply removing it is the *Cake* way to do it.

# ios - AVPlayer replaceCurrentItemWithPlayerItem 打破 UIViewAnimation

> ID：11744409
> 
> 赞同：1
> 
> 时间：2012-07-31T16:07:04.190
> 
> 标签：ios, animation, uiview, avplayer

我有两个交叉淡入淡出的视图控制器，它们都在它们的子视图中播放视频。视图 A 中的视频在淡入开始时开始播放，在淡出结束时停止。视图 B 中的视频从淡入开始，在淡出后停止。基本的东西。我让它与 MPMoviePlayerController 一起工作得很好，但我也想做音频淡入/淡出，这迫使我使用 AVFoundationFramework 中的 AVPlayer。基本上一切似乎都很好，但我注意到开关导致淡入中断。视图 B alpha 只是从 0 跳到 1，并且 UIView animateWithDuration 的完成块被调用为 false 值。我注意到这只发生在我在 loadView 方法期间对 AVPlayer 对象调用 replaceCurrentItemWithPlayerItem: 方法时。

交叉渐变代码如下所示：

```
- (void)pushViewController:(UIViewController *)viewController duration:(float)duration
{    
    float halfFadeInOutTime = duration/2.0;
    viewController.view.alpha = 0.0;
    UIView *tmpView = self.view;

    [viewController viewWillAppear:YES];

    //start fading out the first view
    [UIView animateWithDuration:halfFadeInOutTime 
                          delay:0 
                        options:UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionAllowUserInteraction
                     animations:^{
                         tmpView.alpha = 0.0;
                     } 
                     completion:^(BOOL finished){
                         if( finished ){
                             if( [self respondsToSelector:@selector(fadeOutFinished:)] ){
                                 [self fadeOutFinished:duration];
                             }

                             [self.navigationController pushViewController:viewController animated:NO];

                             //start fading in with the second view
                             [UIView animateWithDuration:halfFadeInOutTime 
                                                   delay:0
                                                 options:UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionAllowUserInteraction
                                              animations:^{
                                                  viewController.view.alpha = 1.0;
                                              } 
                                              completion:^(BOOL finished2){
                                                  if( finished2 ){
                                                      if( [((CrossfadeableViewController*)viewController) respondsToSelector:@selector(fadeInFinished:)] ){
                                                          [((CrossfadeableViewController*)viewController) fadeInFinished:duration];
                                                      }
                                                  }
                                              }
                              ];

                             if( [((CrossfadeableViewController*)viewController) respondsToSelector:@selector(fadeInStarted:)] ){
                                 [((CrossfadeableViewController*)viewController) fadeInStarted:duration];
                             }

                         }
                     }
     ];

    if( [self respondsToSelector:@selector(fadeOutStarted:)] ){
        [self fadeOutStarted:duration];
    }
} 
```

loadView 中的 AVPlayer 相关代码是这样的

```
- (void) loadView
{
    [super loadView]

    //...

    /* 
     * Variables of type:
     * UIView *videoPlaceholder;
     * AVURLAsset *asset;
     * AVPlayerItem *playerItem;
     * AVPlayer *player;
     * AVPlayerLayer *playerLayer;
     */ 

    videoPlaceholder = [[UIView alloc] initWithFrame:_frame];

    playerLayer = [[AVPlayerLayer alloc] init];
    [playerLayer setFrame:videoPlaceholder.frame];
    playerLayer.videoGravity = AVLayerVideoGravityResizeAspect;
    player = [[AVPlayer alloc] init];

    NSString *_url = [[NSBundle mainBundle] pathForResource:[_videoFilename stringByDeletingPathExtension] ofType:[_videoFilename pathExtension]];
    if( _url != nil ){
        NSURL *url = [NSURL fileURLWithPath:_url];

        asset = [AVURLAsset URLAssetWithURL:url options:nil];

        playerItem = [AVPlayerItem playerItemWithAsset:asset];

        [player replaceCurrentItemWithPlayerItem:playerItem];
        [player seekToTime:kCMTimeZero];
        [player setActionAtItemEnd:AVPlayerActionAtItemEndNone];
    }

    playerLayer.player = player;
    [videoPlaceholder.layer addSublayer:playerLayer];

    [self.view addSubview:videoPlaceholder];

    //....
} 
```

有谁知道什么会导致动画中断？由于在交叉淡入淡出开始之前调用了 loadView ，因此在动画期间我没有更改视图中的任何内容。什么会导致相同的代码与 MPMoviePlayerController 一起工作并与 AVPlayer 中断？

干杯，铅

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T09:56:48.093

事实证明这是加载 AVPlayerItem 的问题。我不得不等到电影加载完毕 - 否则动画淡入就坏了

等待视频完成加载的示例代码：

```
- (void)observeValueForKeyPath:(NSString*) path 
                  ofObject:(id)object 
                    change:(NSDictionary*)change 
                   context:(void*)context {
  if (context == AVPlayerDemoPlaybackViewControllerStatusObservationContext) {
      AVPlayerStatus status = [[change objectForKey:NSKeyValueChangeNewKey] integerValue];
      if (status == AVPlayerStatusReadyToPlay) {
        if( [self.videoStateChangeDelegate respondsToSelector:@selector(videoStateChangedToReadyForPlayback)] ){
            [self.videoStateChangeDelegate videoStateChangedToReadyForPlayback];
        }
        [self.player play];
      }
  }
} 
```

[self.videoStateChangeDelegate videoStateChangedToReadyForPlayback] 通知我的委托控制器它可以开始淡入。太糟糕了，因为这个问题，我的简单代码变得有点复杂。

# c++ - 在 Internet Explorer_Server (IE9) 中处理 windows 消息

> ID：11744410
> 
> 赞同：0
> 
> 时间：2012-07-31T16:07:05.483
> 
> 标签：c++, internet-explorer, wndproc, firebreath

我正在使用 Firebreath 开发一个无窗口插件，我想捕获一条特定的消息以进行进一步处理，我可以这样做，但我认为其余的消息“丢失”了。

我有这个代码来挂钩消息循环：

```
bool myPlugin::onWindowAttached(FB::AttachedEvent *evt, FB::PluginWindow* pluginwin)
{
    FB::PluginWindowlessWin* win = dynamic_cast<FB::PluginWindowlessWin*>(pluginwin);

    FBLOG_INFO("", win->getHWND()); //getHWND returns the HWND of the Internet Explorer_Server window (get by using Spy++)

    SubclassWindow(win->getHWND(), (WNDPROC)&myPlugin::WndProc);
    return true;
} 
```

这是处理功能：

```
LRESULT CALLBACK myPlugin::WndProc(HWND hWindow, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch (msg) {
        case (WM_ERASEBKGND):           
            return 1;     
    }   
    return DefWindowProc(hWindow, msg, wParam, lParam);
} 
```

这在 IE9 上按预期工作（我这样做是因为我在重新绘制图像时遇到了一些问题），但点击消息和任何其他消息都没有得到处理；因此，如果一个按钮与我的插件位于同一页面中，它将无法点击。

我将 IE9 作为单个进程运行。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:37:39.793

您没有调用以前的 HWND 的 wndproc。普遍调用 DefWindowProc() 是不正确的。当您子类化 HWND 时，您需要获取旧 wndproc 的地址并将您不处理的消息传递给它，而不是 DefWindowProc()。

我不知道该怎么做那个firebreath / ATL。

# php - 变量不会在 PHP 中从表单传递到电子邮件

> ID：11744411
> 
> 赞同：1
> 
> 时间：2012-07-31T16:07:13.767
> 
> 标签：php, mysql, variables

我正在尝试创建三个表单，每个表单都使用 php 发送电子邮件。在第二种和第三种形式中，变量不会输出分配给它的值。我在第二种和第三种形式中使用了 $_POST 函数和 $_REQUEST。在第一种形式中，电子邮件已发送并且所有变量都能够正常显示。信息正常存储在数据库中。唯一的问题是从第二个和第三个发送的电子邮件中看不到变量，我不知道如何使它工作。这是发生的事情的一个粗略示例。

```
 $x = new mysql($connection_information);
 $x->update(array('email' => $_POST['email'], 'xemail' => $_POST['xemail'], 'parking' = $_POST['parking'] etc) 

 $email = $_POST['email']; 
 $xemail = $_POST['xemail'];

 $subject = "Form Request " . $email;
 $headers = 'From: ' . $xemail . "\r\n" .

 $message = "this email will. $_POST['parking']"

 mail($email, $subject, $message, $header); 
```

还有更多，我只是让它尽可能简单。它的消息区域没有看到变量，有谁知道是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:11:14.327

在双引号文本字符串中引用数组键时，我发现最好使用大括号语法，例如：

```
$message = "this email will. {$_POST['parking']}"; 
```

尝试访问对象属性也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:20:54.937

你可以试试这个。阅读文本有点困难，但更容易看到变量的位置：

```
$message = "this email will. ".$_POST['parking']; 
```

此外，它上面的这一行是开放式的，会导致 PHP 解释器失败：

```
 $headers = 'From: ' . $xemail . "\r\n" . 
```

总的来说，我认为你希望你的代码是这样的：

```
$x = new mysql($connection_information);
$x->update(array('email' => $_POST['email'], 'xemail' => $_POST['xemail'], 'parking' => $_POST['parking']);

$email = $_POST['email']; 
$xemail = $_POST['xemail'];

$subject = "Form Request ".$email;
$headers = "From: ".$xemail."\r\n";

$message = "this email will. ".$_POST['parking'];

mail($email, $subject, $message, $header); 
```

# php - Yii 框架未定义变量 $model

> ID：11744412
> 
> 赞同：3
> 
> 时间：2012-07-31T16:07:16.523
> 
> 标签：php, yii

我有一个标准的登录表单，如下所示：

```
<?php $form=$this->beginWidget('CActiveForm', array(
'id'=>'login-form',
'enableClientValidation'=>true,
'clientOptions'=>array(
    'validateOnSubmit'=>true,
),
)); ?>

<p class="note">Fields with <span class="required">*</span> are required.</p>

<div class="row">
    <?php echo $form->labelEx($model,'username'); ?>
    <?php echo $form->textField($model,'username'); ?>
    <?php echo $form->error($model,'username'); ?>  
</div>

<div class="row">
    <?php echo $form->labelEx($model,'password'); ?>
    <?php echo $form->passwordField($model,'password'); ?>
    <?php echo $form->error($model,'password'); ?>

</div>

<div class="row rememberMe">
    <?php echo $form->checkBox($model,'rememberMe'); ?>
    <?php echo $form->label($model,'rememberMe'); ?>
    <?php echo $form->error($model,'rememberMe'); ?>
</div>

<div class="row buttons">
    <?php echo CHtml::submitButton('Login'); ?>
</div>

<?php $this->endWidget(); ?> 
```

我的 UserIdentity 类是：

```
public function authenticate()
    {
//                $username = $this->username;
//                $password = $this->password;

            $user = Users::model()->findbyAttributes(array($username=>$this->username));
            if($user === NULL){
                    $this->errorCode=self::ERROR_UNKNOWN_IDENTITY;

            }else if ($user->password !== md5($this->password)){    
//                        $this->username = $user->username;
//                       sess('SESS_USER_INFO', $user->attributes);
//                        $this->errorCode=self::ERROR_NONE;
        //invalid password
        $this->errorCode=self::ERROR_PASSWORD_INVALID;
            }
            else {
                $this->errorCode=self::ERROR_NONE;
            }
            return !$this->errorCode;
    }
} 
```

我的 UserController.php actionLogin 如下：

```
public function actionLogin()
{
    $model= new Users();
//      Yii::app()->sessiion[username]= Yii::app()->model($username);
//      Yii:app()->session[password] = Yii::app()->model($password);
    // if it is ajax validation request
    if(isset($_POST['ajax']))
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }
//                print_r($_POST['Users']);
    // collect user input data
    $form =  new LoginForm;
//      if(isset($_POST['Users']))
//      {
//          $model->attributes=$_POST['Users'];     

        // validate user input and redirect to the previous page if valid
//          if($model->login())
//              $this->redirect(Yii::app()->user->getReturnUrl('index'));
//      }
    // display the login form
//      $this->render('login',array('model'=>$model));
    if(isset($_POST['LoginForm'])){
    $form->attributes=$_POST['LoginForm'];
    if($form->validate() && $form->login()) $this->redirect(Yii::app()->user->returnUrl);
    }
    $this->render('login',array('model'=>$model));
} 
```

LoginForm 模型如下：

```
class LoginForm extends CFormModel
{
public $username;
public $password;
public $rememberMe;

private $_identity;

/**
 * Declares the validation rules.
 * The rules state that username and password are required,
 * and password needs to be authenticated.
 */
public function rules()
{
    return array(
        // username and password are required
        array('username, password', 'required'),
        // rememberMe needs to be a boolean
        array('rememberMe', 'boolean'),
        // password needs to be authenticated
        array('password', 'authenticate'),
    );
}

/**
 * Declares attribute labels.
 */
public function attributeLabels()
{
    return array(
        'rememberMe'=>'Remember me next time',
    );
}

/**
 * Authenticates the password.
 * This is the 'authenticate' validator as declared in rules().
 */
public function authenticate($attribute,$params)
{
    if(!$this->hasErrors())
    {
//          $this->_identity=new UserIdentity($this->username,$this->password);
//          if(!$this->_identity->authenticate())
//              $this->addError('password','Incorrect username or password.');
        $identity = new UserIdentity($this->username, $this->password);
        $identity->authenticate();
        switch($identity->errorCode)
        {
            case UserIdentity::ERROR_NONE:
                $duration=$this->rememberMe ? 3600*24*30 : 0;  //30 days
                Yii::app()->user->login($identity,$duration);
                break;
            case UserIdentity::ERROR_USERNAME_INVALID:
                $this->addError('username', 'Username is incorrect.');
                break;
            default; // UserIdentity:ERROR_USERNAME_INVALID
                $this->addError('password','Password is incorrect.');
                break;
        }           
    }
}

/**
 * Logs in the user using the given username and password in the model.
 * @return boolean whether login is successful
 */
public function login()
{
    if($this->_identity===null)
    {
        $this->_identity=new UserIdentity($this->username,$this->password);
        $this->_identity->authenticate();
    }
    if($this->_identity->errorCode===UserIdentity::ERROR_NONE)
    {
        $duration=$this->rememberMe ? 3600*24*30 : 0; // 30 days
        Yii::app()->user->login($this->_identity,$duration);
        return true;
    }
    else
        return false;
}
} 
```

我们遇到的问题是，当我们在主页上使用有效凭据登录时，会加载一个新的登录表单，而不会指示用户已通过身份验证。我们还看到语法错误，指出登录表单中的可用 $model 未定义。

更新：我们想使用 /views/users/login 并将其连接到我们的 UserController，而不是使用 /views/site/login。

我该如何纠正上述问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:27:42.717

首先，我注意到你传递的一些东西是`$model`类型`User` `Object`而不是`LoginForm Object`. 首先改变它。其次，因为`user`发送为`model`（不确定您的用户模型中有什么）

`isset($_POST['LoginForm'])`将永远`false`并且会再次登录表单

# jakarta-ee - 在添加 wlfullclient.jar 之前，JAX-WS Dispatch 客户端工作正常

> ID：11744415
> 
> 赞同：6
> 
> 时间：2012-07-31T16:07:30.003
> 
> 标签：jakarta-ee, weblogic, jax-ws

我有一个在 jdk1.6.0_31 上运行的独立批处理程序。这个独立的程序有 JAX-WS 客户端和 EJB 客户端。在我为 EJB 客户端添加 wlfullclient.jar 之前，JAX-WS 客户端在没有添加任何 jar 的情况下工作正常。现在在类路径中使用 wlfullclient.jar 我得到以下异常。请让我知道如何解决这个问题。感谢你的帮助。

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/sun/xml/ws /spi/ProviderImpl
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at javax.xml.ws.spi.FactoryFinder.safeLoadClass(FactoryFinder.java:150)
at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:30)
at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:90)
at javax.xml.ws.spi.Provider.provider(Provider.java:83)
at javax.xml.ws.Service.<init>(Service.java:56)
at javax.xml.ws.Service.create(Service.java:691) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:56:58.883

我们遇到了同样的问题，在研究并找到这个问题后，我凭直觉查看了 Weblogic Server 的文档。

我正在寻找替代客户。

基本上有三个客户端jar：

*   wlclient.jar - 用于 IIOP 客户端
*   wlfullclient.jar - 一个罐子里的所有东西（巨大的~50MB）
*   wlthint3client.jar - 用于非常瘦的 t3 客户端

最后一个选项是客户端的精简版，它支持 Weblogics 专有的 t3 协议。它在功能方面有一些缺点，但如果您需要做的只是与服务器上的 ejb 对话：它就在那里。

将表单 wlfullclient.jar 切换到 wlthint3client.jar 后，一切`NoClassDefFoundError`都消失了。

这里是[Weblogic 文档](http://docs.oracle.com/cd/E17904_01/web.1111/e13717/wlthint3client.htm#autoId0)的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:31:36.560

你有这个运气吗？我在 JetSpeed 2.2.2（基于 tomcat 的门户服务器）上运行时遇到了完全相同的问题。在我将 wlfullclient.jar 包含在服务器的 lib 文件夹中之前，我的 Web 服务工作正常。包含后，它会在实例化时与您在上面包含的堆栈跟踪完全相同。

我的想法（现阶段的理论）如下：

wlfullclient.jar 有一个与 Metro Web 服务堆栈中已有的类具有相同名称和包的类。这个类在 Metro 类之前被加载，然后将类加载引导到加载 Web 逻辑实现而不是 Metro 实现的路径上。Web 逻辑实现不存在（我们并没有努力包含它们，因为我们想使用标准 java），这解释了 NoClassDefFound。

值得注意的是，我在 Metro 和 wlfullclient.jar 中都没有找到这个具有相同名称和包的假定类。从这个意义上说，该类目前类似于希格斯玻色子。那么假设它存在，该怎么办呢？

我很想知道您是否找到了解决方案。

另外我应该补充：

我需要包含 wlfullclient.jar，因为它被运行在同一服务器上的其他 portlet 使用。我无法删除它，但我自己没有使用它。

# django-celery - 为数据库后端配置 django-celery

> ID：11744416
> 
> 赞同：0
> 
> 时间：2012-07-31T16:07:32.293
> 
> 标签：django-celery

我正在完成“Celery 的第一步”教程，虽然稍后我将转向非数据库解决方案，但我现在不想进入。我只想使用 djcelery 自带的数据库后端。

那么下面代码中'backend'参数的值应该是什么：

```
from celery import Celery
celery = Celery('tasks', broker='django://',backend='XXXX') 
```

我试过了：

“数据库”（由于未安装 SQLAlchemy 而失败）

“djcelery”（模块对象不可调用）

“djcelery.backends”（模块对象没有属性“backends”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:04:48.350

我是 celery 的新手，我想使用 rabbitmq 作为代理，使用 djcelery 的数据库作为后端。经过大量谷歌搜索后，我找到[了这个链接](https://groups.google.com/forum/?fromgroups=#!topic/celery-users/rmKODTaplD0)，从中我得到了适合我的解决方案：

```
celery = Celery('tasks',
                broker='amqp://',
                backend='djcelery.backends.database.DatabaseBackend') 
```

没有使用别名。请让我知道这是否也适合您。

# php - 如何检测浏览器功能？

> ID：11744423
> 
> 赞同：0
> 
> 时间：2012-07-31T16:07:40.430
> 
> 标签：php, browser

是否可以用 PHP 编写一个脚本来检测浏览器 HTML5 和 CSS3 功能支持？如果没有，是否有可能用任何语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:10:19.713

PHP 对客户端知之甚少，除了通过 HTTP 提供并存储在`$_SERVER`超全局中的内容。这几乎是设计使然，因为 PHP 在服务器上而*不是*在客户端上运行。

特征检测更恰当地属于客户端代码，也就是 JavaScript。 [Modernizr](http://modernizr.com/)是提供简单特征检测的最佳库之一。

使用它，您可以检测客户端上的功能，然后发出将更新服务器上的变量的 AJAX 请求。它不适用于第一个页面加载，但之后的每个请求都将能够依赖这些设置，如果您将它们存储在 Session.

解决此问题的解决方案是首先查看值是否存储在服务器上，如果不输出仅执行此功能检测/AJAX 调用的页面，然后重定向回最初通过 javascript 请求的任何页面。此解决方案存在一些缺陷（您网站的所有访问者最初都会看到一个带有快速重定向的空白屏幕，这不是建立信任的最佳方式，而且您可能会为一些您可能永远找不到的令人讨厌的情况做好准备因为您的服务器代码现在依赖于客户端实现，我怀疑您是否会在每个可用的客户端上测试您的应用程序）。我只提供这个作为一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T05:56:19.070

PHP 有一个名为 get_browser 的函数，用于返回浏览器特性的关联数组。但是，您需要下载一个名为 browscap.ini 的文件，其中包含有关浏览器的信息，这样该功能才能正常工作。有关如何获取和安装此文件的说明可以在该函数的[文档页面上找到。](http://php.net/manual/en/function.get-browser.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T18:48:13.147

您是否看过[http://www.html5test.com](http://www.html5test.com)并了解它是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T07:22:14.133

您应该在 php 中检测浏览器，然后为不同的浏览器使用不同的代码。

## PHP浏览器检测技术：

1.  用于移动检测的[谷歌插件](https://code.google.com/p/php-mobile-detect/)
2.  使用 $_SERVER['HTTP_USER_AGENT']
3.  使用 get_browser()
4.  由 Mobiforge

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-04T20:02:59.180

我发现非常有用的是将modernizr序列化为json字符串并通过ajax将其发布到服务器。在服务器上，将此保留到您的会话中，您现在可以根据访问者可用的功能发送自定义内容。

```
var result = JSON.stringify(Modernizr);
$.post('modern.php',{json: result}); 
```

# android - Android 3.1+ 中的 BroadcastReceiver 问题

> ID：11744426
> 
> 赞同：2
> 
> 时间：2012-07-31T16:07:51.857
> 
> 标签：android, android-intent, android-manifest, android-3.0-honeycomb, android-service

我正在尝试使用`BroadcastReceiver`和将位置数据更新到 Web 数据库`Service`。

但是，我很难在 Galaxy Tab 7.0 Plus 上使用 Android 3.2。

相同的应用程序在 Android 2.3.6 Galaxy Note 上运行良好，但不能在平板电脑上运行。事实上，我将`RECEIVE_BOOT`意图操作添加到我的接收器，但它永远不会被实例化，也就是说，`nReceive()`在启动完成后永远不会调用 o。我想知道系统是否有任何更新导致此操作。

这是我的 xml 和接收器类：

**AndroidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.tests.bootreceiver"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <receiver
        android:name=".BootUpReceiver"
        android:enabled="true"
        android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver>

    <service android:name=".MyService" >
    </service>
</application> 
```

**BootUpReceiver.java**

```
public class BootUpReceiver extends BroadcastReceiver {

private static int INTERVAL = 1000*15;

@Override
public void onReceive(Context context, Intent intent) {     
    AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    PendingIntent pi = PendingIntent.getService(context, 0, new Intent(context, MyService.class), PendingIntent.FLAG_UPDATE_CURRENT);
    am.setInexactRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), INTERVAL, pi);
} 
```

}

有没有理由让同一段代码在一个系统中工作而在另一个系统上不起作用？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:11:35.657

从 android 3 开始，应用程序中的所有组件都将被阻止运行（接收广播），直到用户明确启动应用程序。

要测试这是否是您的问题，请向您的应用程序添加一个虚拟活动并启动它。现在您的应用程序应该能够从那时起接收意图（即使在重新启动后）。

这是描述问题的AOSP问题，

> [http://code.google.com/p/android/issues/detail?id=18225](http://code.google.com/p/android/issues/detail?id=18225)

请注意，它已关闭为“按预期工作”。这在技术上是一个安全修复。应用程序可以利用某些众所周知的广播意图，例如`TIMER_TICK`在用户运行应用程序或知道应用程序正在运行的情况下自行启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:11:08.500

看看这个： [引导完成问题](http://commonsware.com/blog/2011/07/05/boot-completed-regression.html)

# css - 如何使浮动的 div 相对于其容器的高度垂直对齐

> ID：11744429
> 
> 赞同：3
> 
> 时间：2012-07-31T16:07:55.013
> 
> 标签：css, css-float, css-tables

我正在尝试垂直对齐父 div 内的浮动 div。由于父 div 可以包含不同数量的内容，我希望它垂直对齐而不是必须在浮动 div 上设置一个固定的边距顶部。此处的实时示例，您看到的右箭头位于灰色 div 的右上角，但我希望它垂直居中[http://jsbin.com/oriqow/1/](http://jsbin.com/oriqow/1/)

**CSS：**

```
.item { vertical-align:middle; border: 1px solid #999; padding: 10px; background: #e6e6e6; border-radius: 4px; }
.item > div:not(.arrow) { margin-bottom:10px; }
.arrow { float: right; } 
```

**HTML：**

```
<div class="item">
  <div class="arrow">▶&lt;/div>
  <div>Title</div>
  <div>Sub title</div>
  <div>Another potential element here</div>
  <div>And another</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:12:29.483

将此样式添加到您的 .arrow 类中：

```
position: absolute;
right: 0;
top: 50%;
margin-top: -18px; 
```

（并删除 float:right; ）

并将其添加到您的 .item 类中：

```
position: relative; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:13:51.990

[http://jsfiddle.net/v8f8Q/](http://jsfiddle.net/v8f8Q/)

```
.item { position:relative; vertical-align:middle; border: 1px solid #999; padding: 10px; background: #e6e6e6; border-radius: 4px; }
.item > div:not(.arrow) { margin-bottom:10px; }
.arrow { position:absolute; top:45%; right:2%; }​ 
```

# ruby - Rails 嵌套形成多层深

> ID：11744434
> 
> 赞同：0
> 
> 时间：2012-07-31T16:08:08.340
> 
> 标签：ruby, ruby-on-rails-3

我不知道给这个贴标签的最好方法，但基本上，我有 3 个模型，

课程：一个主题，它有许多会话会话：有许多插槽组成一个会话插槽：具有它发生的日期和时间

这个想法是，如果您对课程感兴趣，您可以注册参加会议。每个时段都有相同数量的时段，但这些时段可能在一个月的不同时间（例如，您可以在 7 月 30 日至 8 月 3 日参加为期 5 天的时段，或一周后的同一时段，即 8 月 6 日至 8 月 10 日)

所以我需要尝试设置我的嵌套，以便您可以添加或删除会话，每个会话都应该具有相同数量的嵌套插槽（基于表单上方某处下拉列表中的数字）。

谁能想到这样做的好方法？甚至是讨厌的方式？我遇到了麻烦:)

# 更新

我让它与一些 JS 和东西一起工作，但是现在当它保存时，它总是错误地说 Sessions slot session is not valid - 它没有将槽 session_id 设置为其父会话并且它没有将会话 course_id 设置为课程

我不知道为什么。有人见过这个吗？对象在 has_many 数组中...

# 更新 2

{"title"=>"test123", "description"=>"test123", "sessions_attributes"=>{"0"=>{"slots_attributes"=>{"0"=>{"when(3i)"= >"10", "when(2i)"=>"8", "when(1i)"=>"2012", "when(4i)"=>"10", "when(5i)"=>" 00", "_destroy"=>"0"}, "1"=>​​{"when(3i)"=>"10", "when(2i)"=>"8", "when(1i)"= >"2012", "when(4i)"=>"10", "when(5i)"=>"00", "_destroy"=>"0"}, "2"=>{"when(3i) "=>"", "当(2i)"=>"", "当(1i)"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1"}, "3"=>{"when(3i)"=>"", "当(2i)"=>"", "when(1i)"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1" }, "4"=>{"when(3i)"=>"", "when(2i)"=>"", "when(1i)"=>"", "when(4i)"=>" ", "when(5i)"=>"", "_destroy"=>"1"}, "5"=>{"when(3i)"=>"", "when(2i)"=>"" , "when(1i)"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1"}, "6"=>{"when(3i)"=>"", "when(2i)"=>"", "when(1i)"=>"", "when(4i )"=>"", "when(5i)"=>"", "_destroy"=>"1"}, "7"=>{"when(3i)"=>"", "when(2i) "=>"", "when(1i)"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1"}, " 8"=>{"when(3i)"=>"", "when(2i)"=>"", "when(1i)"=>"", "when(4i)"=>"", " when(5i)"=>"", "_destroy"=>"1"}, "9"=>{"when(3i)"=>"", "when(2i)"=>"", "when(1i)"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1 "}, "10"=>{"when(3i)"=>"", "when(2i)"=>"", "when(1i)"=>"", "when(4i)"=> "", "when(5i)"=>"", "_destroy"=>"1"}, "11"=>{"when(3i)"=>"", "when(2i)"=>" ", "when(1i)"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1"}, "12"=> {"when(3i)"=>"", "when(2i)"=>"", "when(1i)"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1"}, "13"=>{"when(3i)"=>"", "when(2i)"= >"", "when(1i)"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1"}, "14" =>{"when(3i)"=>"", "when(2i)"=>"", "when(1i)"=>"", "when(4i)"=>"", "when( 5i)"=>"", "_destroy"=>"1"}, "15"=>{"when(3i)"=>"", "when(2i)"=>"", "when(1i )"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1"}, "16"=>{"when(3i)"=>"", "when(2i)"=>"", "when(1i)"=>"", "when(4i)"= >"", "when(5i)"=>"", "_destroy"=>"1"}, "17"=>{"when(3i)"=>"", "when(2i)"=> "", "when(1i)"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1"}, "18"= >{"when(3i)"=>"", "when(2i)"=>"", "when(1i)"=>"", "when(4i)"=>"", "when(5i) )"=>"", "_destroy"=>"1"}, "19"=>{"when(3i)"=>"", "when(2i)"=>"", "when(1i)"=>"", "when(4i)"=>"", "when(5i)"=>"", "_destroy"=>"1"}}}} }

# 更新 3

在保存之前添加此代码已修复它，尽管我不知道为什么需要它。

```
def apply_nested_models_hack
  ## HACK ##

  @course.sessions.each do |s|
    s.course = @course
    s.slots.each { |ss| ss.session = s }
  end

  ## /HACK ##
end 
```

我想知道为什么关系没有确定，即使我已经解决了我的问题，但我没有回答这个问题。

# 更新 4

事实证明这不是嵌套形式，而是我拥有的事实：

```
validates :session, presence: true 
```

on Slot - ActiveRecord 直到保存后才设置关系的这一边，因此它被认为是无效的并且不会保存。我认为这是 AR 中的一个错误，因为它应该显示数据库中的关系，即使它们还没有被持久化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:41:20.400

仅使用 Rails，嵌套几级会很棘手。可以肯定，但它可能会变得混乱。

我建议你看看这个宝石：[https ://github.com/ryanb/nested_form/](https://github.com/ryanb/nested_form/)

我没有使用它，但它似乎很有希望

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:18:31.573

事实证明这不是嵌套形式，而是我拥有的事实：

```
validates :session, presence: true 
```

on Slot - ActiveRecord 直到保存后才设置关系的这一边，因此它被认为是无效的并且不会保存。我认为这是 AR 中的一个错误，因为它应该显示数据库中的关系，即使它们还没有被持久化。

# api - Google 的地理编码限制 - 我可以存储结果吗？

> ID：11744436
> 
> 赞同：0
> 
> 时间：2012-07-31T16:08:17.370
> 
> 标签：api, google-maps

谷歌的条款规定：

地理编码 API 只能与谷歌地图一起使用；禁止在未在地图上显示的情况下对结果进行地理编码。

我可以对地址进行地理编码并将结果存储在数据库中，其唯一目的是在未来将其显示在谷歌地图上吗？还是完全禁止存储这些裸坐标？

过程将是一个应用程序使用 API 对位置进行地理编码并将纬度/经度写入数据库。后来，一个网站使用存储的数据显示谷歌地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:16:43.353

您可以在数据库中“缓存”它们。您需要定期刷新这些值。请参阅文档中的此[“文章”](https://developers.google.com/maps/articles/geocodestrat#caching)

# symfony - 在 symfony2 表单中集成奏鸣曲管理表单

> ID：11744443
> 
> 赞同：2
> 
> 时间：2012-07-31T16:08:37.170
> 
> 标签：symfony, symfony-sonata, sonata-admin

我想在 symfony2.0.x 表单中集成一个奏鸣曲管理表单。可能吗？

我想创建一个自定义表单模型类并注入我想要集成的所需的奏鸣曲管理表单以及一个 FormMapper 实例。这应该工作吗？我在正确的方向吗？

整个画面是，我有一个多媒体实体，它存储任何上传的文件，然后我可以在我的应用程序的任何地方使用这些文件，所以任何文件上传都需要多媒体管理表单才能列出、选择、创建新文件等. 所以我创建了一个自定义表单，我需要将多媒体奏鸣曲管理表单集成到其中。

表单是这样调用的：

```
$formMapper->add(  'contingut', 'final_content_type', array() ); 
```

我想将多媒体管理表单添加到 final_content_type 中。

# visual-c++ - 有人熟悉 LAPACK 和 BLAS 吗？

> ID：11744447
> 
> 赞同：1
> 
> 时间：2012-07-31T16:08:46.340
> 
> 标签：visual-c++, lapack, blas

我是初学者，几周前我对 C++ 一无所知。现在我发现自己在安装*LAPACK*时遇到了麻烦。

首先，我想使用*VC++ 2010*进行一些矩阵计算，所以（按照某人的建议）我安装了*Armadillo*。我发现*犰狳*使用*LAPACK*和*BLAS*来做一些矩阵逆运算，这就是让我遇到麻烦的地方。

我有几个关于运行*LAPACK*的问题。我已经阅读了[这里](http://icl.cs.utk.edu/lapack-for-windows/lapack)的说明。我下载了各种 .dll 和 .lib 文件并多次更改它们的位置以尝试在 VC++ 2010 中成功编译。我更改​​了“Propertie/linker/general”上的“附加库目录”并在“附加”中添加了 liblapack.lib “属性/链接器/输入”中的依赖项。

我无法理解以下内容：

1.  许多网站说*LAPACK*应该安装在某个地方，但我所能做的就是下载一个名为`lapack`或`lapack-3.4.1`. 我在文件夹中找不到任何 install.exe。那么，*下载*是什么意思呢？

2.  在上面的网站上，应该下载*.dll*和*.lib文件。*我应该把它们放在哪里？假设我的*VC++ 2010*安装在`P:\Program Files\Microsoft Visual Studio 10.0`; 我应该把它们放在这个目录中吗？我应该在哪里放置或安装*下载的* *LAPACK*包？

3.  *参考 BLAS*是什么意思？如果我不使用*cmake*和*mingw*来构建和编译，我仍然可以按照该网站上提供的下载步骤进行操作吗？

这有点长。我搜索了每个论坛并尝试了所有可能的方法，但我仍然感到困惑。如果有人可以帮助我解决我的问题的至少一部分，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:27:18.030

哇，慢点，对于初学者来说，你的深度太深了。所以你听了有人建议“使用犰狳”然后离开，让你自己使用！难怪你会迷失、孤独和困惑。

在犰狳中，你需要什么？如果您想在 Windows 上使用 C++ 进行矩阵计算，您有一些不涉及 Armadillo 的选项。这些选项包括

*   [英特尔的 MKL——](http://software.intel.com/en-us/articles/intel-mkl/)这可能会让你花钱。
*   [Boost——](http://www.boost.org/doc/libs/1_50_0/more/getting_started/windows.html)其中包括一个名为 uBLAS 的（部分）BLAS 的实现。
*   [本征](http://eigen.tuxfamily.org/index.php?title=Main_Page)。
*   [MTL——](http://www.simunova.com/en/node/24)同样，这可能要花钱。

安装 Intel MKL 非常容易，安装 Boost 并没有那么困难（尽管我已经很久没有尝试过了，而且过去总是很美好）。除了它们的存在之外，我对 Eigen 或 MTL 一无所知。

所以，首先，决定你真正需要安装什么。如果您需要 BLAS 的实现，请安装它。然后是LAPACK。然后是犰狳。但是你的问题给人的印象是你试图一次做太多的事情，而没有基本了解在 Windows 上安装库并链接到它们。

哦，下次你发帖时，使用一些基本的布局和排版让你的问题易于阅读，我可能在你给我们的文本的丛林中错过了你一半的观点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-13T13:30:54.160

您可以找到所有问题的答案，您只需阅读犰狳文件中的 README.txt 文件，您将在其中找到显示下载 LAPACK 和 BLAS 所需的地址以及如何安装它们的网站。

# php - php系统中的python命令（）

> ID：11744448
> 
> 赞同：2
> 
> 时间：2012-07-31T16:08:52.957
> 
> 标签：php, python, system, mailman

我正在尝试编写 php 代码以使用 php 的 system() 函数自动更改邮递员邮件列表的描述名称。但我不知道我该怎么做。

```
<?php
system('bin/withlist -l market
m.description = 'NewName'
m.Save()
exit()');
?> 
```

这是用于更改描述名称的命令行命令：

```
$ bin/withlist -l market
>>> m.description = 'NewName'
>>> m.Save()
>>> exit() 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:25:04.930

`system()`作为一个命令运行它。您正在寻找允许您传递输入的东西，例如`popen()`.

这是一个例子：

```
if ($handle = popen('bin/withlist -l market', 'w')) {
    fwrite($handle, "m.description = 'NewName'\n");
    fwrite($handle, "m.Save()\n");
    fwrite($handle, "exit()\n");
    pclose($handle);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:15:34.117

您可以使用`<<<`and`py_eval()`函数来运行 python 代码。

更多信息：[http ://www.csh.rit.edu/~jon/projects/pip/](http://www.csh.rit.edu/~jon/projects/pip/)

# google-apps-script - 从电子表格中的 Google 日历加速脚本加载约会

> ID：11744450
> 
> 赞同：0
> 
> 时间：2012-07-31T16:09:00.087
> 
> 标签：google-apps-script, google-sheets

我在从日历加载约会的电子表格中有一个谷歌脚本。它计算约会所花费的时间。但是更新日历项目需要很长时间，我经常遇到超时错误。从日历中获取约会不是问题。脚本下提到的电子表格每 10 个选项卡中的查询是否会减慢速度？

```
function updateUren()
{

  var cal = CalendarApp.openByName("Uren");
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Uren");

  //set first row
  var details=[["title", "date", "start", "end", "duration"]]; // events[i].getDescription(),
  var range=sheet.getRange(2,1,1,5);
  range.setValues(details);

  //gets the year from Boekjaar
  var year = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Boekjaar").getRange(2,1,1,1).getValue();

  var events = cal.getEvents(new Date("January 1, "+year), new Date("December 31, "+year));
  if(events.length == 0)
  {
    Browser.msgBox('No events found for year: "' + year + '"');
  }
  for (var i=0;i<events.length;i++) {
    //http://www.google.com/google-d-s/scripts/class_calendarevent.html
    var startTime = events[i].getStartTime();
    var endTime = events[i].getEndTime();
    var durationHours = (endTime - startTime) / (1000*60*60);
    var details=[[events[i].getTitle(), startTime, startTime, endTime, durationHours]]; // events[i].getDescription(),
    var row=i+3;
    range=sheet.getRange(row,1,1,5);
    range.setValues(details);
  }
  var foo = "foo";
}
```

我有 10 个选项卡正在运行我在此处显示的查询。他们过滤特定时期的约会持续时间

```
=QUERY (Uren!A:E, "SELECT B, SUM(E) WHERE A CONTAINS 'SomeKeyWord' AND B>=DATETIME '2012-6-18 00:00:00'
AND B<DATETIME '2012-7-16 00:00:00' GROUP BY B PIVOT A'")
```

在调用 updateUren() 函数期间，它们是否昂贵且减慢速度？

有人知道答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:19:11.047

我不确定访问数据的 QUERY 函数是否与它有任何关系（它可能），但我的理解是最好不要在循环内执行获取/设置，因为这会大大减慢速度。相反，首先构建您的数组，然后使用一个 setValues() 调用对其进行设置。

```
function updateUren()
{

  var cal = CalendarApp.openByName("Uren");
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Uren");

  //create first row of 2D array
  var details=[["title", "date", "start", "end", "duration"]]; // events[i].getDescription(),

  //gets the year from Boekjaar
  var year = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Boekjaar").getRange(2,1,1,1).getValue();

  var events = cal.getEvents(new Date("January 1, "+year), new Date("December 31, "+year));
  if(events.length == 0)
  {
    Browser.msgBox('No events found for year: "' + year + '"');
  }

  for (var i=0;i<events.length;i++) {
    //http://www.google.com/google-d-s/scripts/class_calendarevent.html
    var startTime = events[i].getStartTime();
    var endTime = events[i].getEndTime();
    var durationHours = (endTime - startTime) / (1000*60*60);
    details.push([events[i].getTitle(), startTime, startTime, endTime, durationHours]); // events[i].getDescription(),
  }
  sheet.getRange(2, 1, details.length, 5).setValues(details);
  //var foo = "foo";
} 
```

编辑：尽管您仍在循环内调用日历服务。我应该补充一点，这是未经测试的，但很想知道它是否有所作为。

# php - XPath 递归删除空 DOM 节点？

> ID：11744454
> 
> 赞同：4
> 
> 时间：2012-07-31T16:09:03.513
> 
> 标签：php, dom, xpath

我正在尝试找到一种方法来从 HTML 源中清除一堆空的 DOM 元素，如下所示：

```
<div class="empty">
    <div>&nbsp;</div>
    <div></div>
</div>
<a href="http://example.com">good</a>
<div>
    <p></p>
</div>
<br>
<img src="http://example.com/logo.png" />
<div></div> 
```

但是，我不想损害有效元素或换行符。所以结果应该是这样的：

```
<a href="http://example.com">good</a>
<br>
<img src="http://example.com/logo.png" /> 
```

到目前为止，我已经尝试了一些这样的 XPath：

```
$xpath = new DOMXPath($dom);

//$x = '//*[not(*) and not(normalize-space(.))]';
//$x = '//*[not(text() or node() or self::br)]';
//$x = 'not(normalize-space(.) or self::br)';
$x = '//*[not(text() or node() or self::br)]';

while(($nodeList = $xpath->query($x)) && $nodeList->length > 0) {
    foreach ($nodeList as $node) {
        $node->parentNode->removeChild($node);
    }
} 
```

有人可以告诉我正确的 XPath 来删除空的 DOM 节点，如果为空则无用？（img、br 和 input 即使为空也有用）

电流输出：

```
<div>
    <div>&nbsp;</div>

</div>
<a href="http://example.com">good</a>
<div>

</div>
<br> 
```

## 更新

为了澄清，我正在寻找一个 XPath 查询，它是：

*   递归匹配空节点，直到找到所有节点（包括空节点的父节点）
*   每次清理后都可以成功运行多次（如我的示例所示）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T03:45:54.277

**一、初步解决方案：**

**XPath 是一种用于 XML 文档的*查询语言。***因此，XPath 表达式的求值只选择节点或从 XML 文档中提取非节点信息，而不会更改 XML 文档。因此，对 XPath 表达式求值永远不会删除或插入节点——XML 文档保持不变。

**您想要的是“从 HTML 源中清除一堆空的 DOM 元素”，而仅使用 XPath 无法完成**。

XPath 上最可信且唯一的官方（我们称其为*规范*）来源**[——W3C XPath 1.0 建议书](http://www.w3.org/TR/xpath/#section-Introduction)**证实了这一点：

> " *XPath 的主要目的是处理 XML [XML] 文档的各个部分。为了支持这一主要目的，它还提供了用于处理字符串、数字和布尔值的基本设施。XPath 使用紧凑的非 XML 语法来促进在 URI 和 XML 属性值中使用 XPath。XPath 在 XML 文档的抽象逻辑结构上运行，而不是其表面​​语法。XPath 得名于它在 URL 中使用路径表示法，用于在层次结构中导航XML 文档。* ”

**因此，为了实现需要的功能，必须结合使用一些额外的语言与 XPath**。

XSLT 是一种专门为 XML 转换而设计的语言。

**这是一个基于 XSLT 的示例 —— 一个简短的 XSLT 转换，它执行请求的清理**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "*[not(string(translate(., '&#xA0;', '')))
  and
    not(descendant-or-self::*
          [self::img or self::input or self::br])]"/>
</xsl:stylesheet> 
```

**当应用于提供的 XML 时**（更正为格式良好的 XML 文档）：

```
<html>
    <div class="empty">
        <div>&#xA0;</div>
        <div></div>
    </div>
    <a href="http://example.com">good</a>
    <div>
        <p></p>
    </div>
    <br />
    <img src="http://example.com/logo.png" />
    <div></div>
</html> 
```

**产生了想要的正确结果**：

```
<html>
   <a href="http://example.com">good</a>
   <br/>
   <img src="http://example.com/logo.png"/>
</html> 
```

**说明**：

1.  身份规则“按原样”复制选择执行它的每个节点。

2.  有一个模板，覆盖任何元素的标识模板（除了`img`,`input`和`br`），其中任何`&nbsp;`已删除的字符串值是空字符串。这个模板的主体是空的，它有效地“删除”了匹配的元素——匹配的元素不会被复制到输出中。

* * *

**二、更新**：

OP 澄清说他想要一个或多个 XPath 表达式：

> "*每次清理后可以成功运行多次。* "

**有趣的是，存在一个 XPath 表达式，它准确地选择了所有需要删除的节点——因此完全避免了“多次清理”**：

```
//*[not(normalize-space((translate(., '&#xA0;', ''))))
  and
    not(descendant-or-self::*[self::img or self::input or self::br])
    ]
     [not(ancestor::*
             [count(.| //*[not(normalize-space((translate(., '&#xA0;', ''))))
                         and
                           not(descendant-or-self::*
                                  [self::img or self::input or self::br])
                          ]
                    )
             =
              count(//*[not(normalize-space((translate(., '&#xA0;', ''))))
                      and
                        not(descendant-or-self::*
                                 [self::img or self::input or self::br])
                        ]
                   )
              ]
          )
     ] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
   "//*[not(normalize-space((translate(., '&#xA0;', ''))))
      and
        not(descendant-or-self::*[self::img or self::input or self::br])
       ]
        [not(ancestor::*
               [count(.| //*[not(normalize-space((translate(., '&#xA0;', ''))))
                           and
                             not(descendant-or-self::*
                                    [self::img or self::input or self::br])
                             ]
                      )
               =
                count(//*[not(normalize-space((translate(., '&#xA0;', ''))))
                        and
                          not(descendant-or-self::*
                                 [self::img or self::input or self::br])
                          ]
                      )
               ]
            )
        ]
 "/>
</xsl:stylesheet> 
```

**当此转换应用于提供的（并且格式正确的）XML 文档（上图）时，所有节点都“按原样”复制，但我们的 XPath 表达式选择的节点除外**：

```
<html>
   <a href="http://example.com">good</a>
   <br/>
   <img src="http://example.com/logo.png"/>
</html> 
```

**说明**：

`$vAllEmpty`根据问题中“空”的定义，让我们用所有“空”的节点来表示。

`$vAllEmpty`用以下 XPath 表达式表示：

```
 //*[not(normalize-space((translate(., '&#xA0;', ''))))
     and
       not(descendant-or-self::*
             [self::img or self::input or self::br])

      ] 
```

要删除所有这些，我们只需要从`$vAllEmpty`

让我们将所有此类“顶级节点”的集合表示为：`$vTopEmpty`。

`$vTopEmpty`可以`$vAllEmpty`使用以下 XPath 2.0 表达式表示：

```
$vAllEmpty[not(ancestor::* intersect $vAllEmpty)] 
```

这会从中选择那些`$vAllEmpty`没有任何祖先元素的节点`$vAllEmpty`。

最后一个 XPath 表达式具有等效的 XPath 1.0 表达式：

```
$vAllEmpty[not(ancestor::*[count(.|$vAllEmpty) = count($vAllEmpty)])] 
```

**现在，我们用上面定义的扩展 XPath 表达式替换最后一个表达式`$vAllEmpty`，这就是我们获得最终表达式的方式，它只选择“要删除的顶部节点”：**

```
//*[not(normalize-space((translate(., '&#xA0;', ''))))
  and
    not(descendant-or-self::*[self::img or self::input or self::br])
    ]
     [not(ancestor::*
             [count(.| //*[not(normalize-space((translate(., '&#xA0;', ''))))
                         and
                           not(descendant-or-self::*
                                  [self::img or self::input or self::br])
                          ]
                    )
             =
              count(//*[not(normalize-space((translate(., '&#xA0;', ''))))
                      and
                        not(descendant-or-self::*
                                 [self::img or self::input or self::br])
                        ]
                   )
              ]
          )
     ] 
```

**使用变量的基于 XSLT-2.0 的简短验证**：

```
<xsl:stylesheet version="2.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:variable name="vAllEmpty" select=
      "//*[not(normalize-space((translate(., '&#xA0;', ''))))
         and
           not(descendant-or-self::*
                 [self::img or self::input or self::br])

          ]"/>

     <xsl:variable name="vTopEmpty" select=
     "$vAllEmpty[not(ancestor::* intersect $vAllEmpty)]"/>

     <xsl:template match="node()|@*">
      <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
     </xsl:template>

     <xsl:template match="*[. intersect $vTopEmpty]"/>
</xsl:stylesheet> 
```

此转换“按原样”复制每个节点，但属于 的任何节点除外`$vTopEmpty`。结果是正确且预期的结果：

```
<html>
   <a href="http://example.com">good</a>
   <br/>
   <img src="http://example.com/logo.png"/>
</html> 
```

* * *

**三、替代解决方案（可能需要“多次清理”）**：

另一种方法不是尝试指定要删除的节点，而是指定要保留的节点——那么要删除的节点就是所有节点与要保留的节点之间的集合差。

**通过这个 XPath 表达式选择要保留的节点**：

```
 //node()
    [self::input or self::img or self::br
    or
     self::text()[normalize-space(translate(.,'&#xA0;',''))]
    ]
     /ancestor-or-self::node() 
```

**然后要删除的节点是**：

```
 //node()
     [not(count(.
              |
                //node() 
                   [self::input or self::img or self::br
                  or
                    self::text()[normalize-space(translate(.,'&#xA0;',''))]
                   ]
                    /ancestor-or-self::node()
                )
        =
         count(//node()
                  [self::input or self::img or self::br
                 or
                   self::text()[normalize-space(translate(.,'&#xA0;',''))]
                  ]
                   /ancestor-or-self::node()
               )
         )
     ] 
```

**但是，请注意**，这些都是*要*删除的节点，而不仅仅是“要删除的顶级节点”。可以只表示“要删除的顶部节点”，但结果表达式相当复杂。如果尝试删除所有要删除的节点，则会出现错误，因为“要删除的顶部节点”的后代按照文档顺序跟随它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T17:43:26.953

所以你想要文本节点，`<br>`和`<img>`，以及它们的祖先？

`//br`您可以使用and获取所有 br 和 img `//img`。

您可以使用 获取所有文本节点，使用 获取`//text()`所有非空文本节点`//text()[normalize-space()]`。（尽管如果您的 xml 解析器尚未这样做，您可能需要`//text()[normalize-space(translate(., '&nbsp;', ''))]`过滤文本节点之类的东西）`&nbsp;`

你可以让所有的父母都拥有`ancestor-or-self::*`.

所以得到的表达式是

```
//br/ancestor-or-self::* | //img/ancestor-or-self::* | //text()[normalize-space()]/ancestor-or-self::* 
```

在 XPath 2 中更短：

```
(//br | //img | //text()[normalize-space()])/ancestor-or-self::* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T17:26:31.190

您是否尝试过与此类似的 XPath？

```
*[not(*) and not(text()[normalize-space()])] 
```

和

*   `not(*)`= 没有子元素
*   `text()[normalize-space()]`= 包含非空白文本的节点（不与此相反）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T06:36:55.717

实现所需结果的最简单方法是在文本中使用正则表达式。备注：你必须多次使用这个表达式，因为它不是贪婪的，它只删除最低的空子节点，所以要删除所有空节点，我们必须多次调用正则表达式。

这是解决方案：

```
<?
$text = '<div class="empty">
    <div>&nbsp;</div>
    <div></div>
</div>
<a href="http://example.com">good</a>
<div>
    <p></p>
</div>
<br>
<img src="http://example.com/logo.png" />
<div></div>';

// recursive function
function recreplace($text)
{
    $restext = preg_replace("/<div(.*)?>((\s|&nbsp;)*|(\s|&nbsp;)*<p>(\s|&nbsp;)*<\/p>(\s|&nbsp;)*)*<\/div>/U", '', $text);
    if ($text != $restext) 
    {
        recreplace($restext);
    }
    else
    {
        return $restext;
    }
}

print recreplace($text);
?> 
```

此代码打印您想要的结果。如果您需要可以编辑正则表达式，则可以在其中添加任何其他应计为空的标签（as `<p> </p>`）。

对于给定的示例，此函数将结果调用自身两次，第三次调用没有任何替换 - 这将是结果。

# php - 我在 php 中使用 fopen 创建了一个函数，如果我将它用作一个函数，如果我单独使用它，它就不起作用

> ID：11744457
> 
> 赞同：0
> 
> 时间：2012-07-31T16:09:10.727
> 
> 标签：php, jquery

基本上我创建了一些创建文件的代码....我可以使用该代码并在我的代码中的 IF 语句中完美运行...现在...因为我必须使用它两次...我决定制作它是一个功能...但是一旦我使它成为一个功能它就不起作用...

谁能告诉我为什么？？我只是在其他 IF 语句中调用该函数 `if (createFile()) { echo "it worked"; }`

```
function createFile () {
        //Creates File and populates it.
        $fOpen = fopen($dbFile, 'w');

            $fString .= "<?php\n";
            $fString .= "// Database Constants\n";
            $fString .= "define(\"DB_SERVER\", \"$server\");\n";
            $fString .= "define(\"DB_USER\", \"$username\");\n";
            $fString .= "define(\"DB_PASS\", \"$password\");\n";
            $fString .= "define(\"DB_NAME\", \"$dbname\");\n";
            $fString .= "?>";

        fwrite($fOpen, $fString);
        fclose($fOpen);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:12:54.543

您需要将 $dbFile 的值传递给函数。像

```
function createFile($dbFile) { 
```

这通常被认为是比在函数内将 $dbFile 变量声明为全局变量更好的方法。

# java - 测试 json 服务

> ID：11744458
> 
> 赞同：0
> 
> 时间：2012-07-31T16:09:16.053
> 
> 标签：java, json, spring, spring-mvc, junit

尽管下面的测试在一个环境中运行良好，但如何修改测试以使其不依赖于 getJson() 服务在哪个服务器上运行？

我是否需要创建一个模拟 Spring json 对象，以便域名是什么（在本例中为它）无关紧要`http://myapplication`？

```
 @Test
    public void jsonResponse() throws Exception
    {

URL oracle = new URL("http://myapplication/newJson.json");
    URLConnection yc = oracle.openConnection();
    BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
    String inputLine;
    String json;
    while ((inputLine = in.readLine()) != null) 
        json += inputLine;
    in.close();

    }

    My controller class is defined like : 

        @Controller
    @RequestMapping("myservice")
    public class Controller {

        @RequestMapping(value = "/newJson.json", produces = MediaType.APPLICATION_JSON_VALUE)
        public @ResponseBody String getJson() {
            return "{ test:testJson}";
        }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:15:11.853

您可以使用[spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)。或者，如果您不想要额外的依赖项，您可以编写一个直接调用控制器的单元测试，而不是通过 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:23:48.040

使用[mockito](http://code.google.com/p/mockito/)并模拟 URLConnection。

# xml - XPath - node() 和 text() 之间的区别

> ID：11744465
> 
> 赞同：66
> 
> 时间：2012-07-31T16:09:46.217
> 
> 标签：xml, xpath, expression

我很难理解 和 之间的`text()`区别`node()`。据我了解，在这种情况下`text()`，标签之间的`<item>apple</item>`内容是**苹果**。节点将是该节点实际上是什么，这将是**项目**

但是后来我被分配了一些工作，它要求我“选择生产下所有项目的文本”，并且一个单独的问题询问“选择所有部门中的所有经理节点”

输出看起来如何`text()`，而不是`node()`

XML 片段：

```
<produce>
 <item>apple</item>
 <item>banana</item>
 <item>pepper</item>
</produce>

<department>
 <phone>123-456-7891</phone>
 <manager>John</manager>
</department> 
```

当然，还有更多的部门和更多的管理者，但这只是一小段代码。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-07-31T16:27:16.247

`text()`并且`node()`是*节点测试*，在 XPath 术语中（[比较](https://stackoverflow.com/a/2990317/)）。

节点测试在一组（确切地说是在[*轴上）节点上运行，并返回特定类型的节点。*](http://www.w3.org/TR/xpath/#axes)当没有提及`child`轴时，默认假定轴。

有各种各样的[节点测试](http://www.w3.org/TR/xpath/#node-tests)：

*   `node()`匹配*任何*节点（所有节点中最不具体的节点测试）
*   `text()`仅匹配*文本*节点
*   `comment()`匹配*评论*节点
*   `*`匹配任何*元素*节点
*   `foo`匹配任何命名的元素节点`"foo"`
*   `processing-instruction()`匹配 PI 节点（它们看起来像`<?name value?>`）。
*   *旁注：*也`*`匹配属性节点，但仅沿`attribute`轴匹配。`@*`是 的简写`attribute::*`。属性不是`child`轴的一部分，这就是法线`*`不选择它们的原因。

此 XML 文档：

```
<produce>
    <item>apple</item>
    <item>banana</item>
    <item>pepper</item>
</produce> 
```

表示以下 DOM（简化）：

```
根节点
   元素节点（名称=“生产”）
      文本节点（值=“\n”）
      元素节点（名称=“项目”）
         文本节点（值=“苹果”）
      文本节点（值=“\n”）
      元素节点（名称=“项目”）
         文本节点（值=“香蕉”）
      文本节点（值=“\n”）
      元素节点（名称=“项目”）
         文本节点 (value="pepper")
      文本节点（值="\n"）

```

所以使用 XPath：

*   `/`选择根节点
*   `/produce`如果有名称，则选择根节点的子元素`"produce"`（这称为*文档元素*；它代表文档本身。文档元素和根节点经常混淆，但它们不是同一个东西。）
*   `/produce/node()`选择下面*的任何类型的子节点*`/produce/`（即所有 7 个子节点）
*   `/produce/text()`选择 4 个 (!) 纯空格文本节点
*   `/produce/item[1]`选择第一个名为的子元素`"item"`
*   `/produce/item[1]/text()`选择*所有*子文本节点（只有一个 - “apple” - 在这种情况下）

等等。

所以，你的问题

*   *“选择生产下所有项目的文本”* `/produce/item/text()`（选择了3个节点）
*   *“选择所有部门中的所有经理节点”* `//department/manager`（选择了1个节点）

笔记

*   XPath 中的默认*轴*是`child`轴。您可以通过为不同的轴名称添加前缀来更改轴。例如：`//item/ancestor::produce`
*   元素节点具有文​​本值。当您评估元素节点时，将返回其文本内容。在此示例中，`/produce/item[1]/text()`和`string(/produce/item[1])`将是相同的。
*   另请参阅[此答案](https://stackoverflow.com/a/2990317/18771)，其中我以图形方式概述了 XPath 表达式的各个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-11T07:38:53.937

对我来说，当我面对这种情况时，这是一个很大的不同（这里是我的故事：）

```
<?xml version="1.0" encoding="UTF-8"?>
<sentence id="S1.6">When U937 cells were infected with HIV-1, 

    <xcope id="X1.6.3">
        <cue ref="X1.6.3" type="negation">no</cue> 

                        induction of NF-KB factor was detected

    </xcope>

, whereas high level of progeny virions was produced, 

    <xcope id="X1.6.2">
        <cue ref="X1.6.2" type="speculation">suggesting</cue> that this factor was 
        <xcope id="X1.6.1">
            <cue ref="X1.6.1" type="negation">not</cue> required for viral replication
        </xcope>
    </xcope>.

</sentence> 
```

我需要提取标签之间的文本并聚合（通过连接）包括内部标签中的文本。

`/node()`做`/text()`了一半的工作

`/text()`只返回不包含在内部标签中的文本，因为内部标签不是“文本节点”。您可能会想，“只提取包含在附加 xpath 中的内部标签中的文本”，但是，按原始顺序对文本进行排序变得具有挑战性，因为您不知道将内部标签中的聚合文本放置在哪里！因为您不知道知道在哪里放置来自内部节点的聚合文本。

1.  当 U937 细胞被 HIV-1 感染时，
2.  未检测到 NF-KB 因子的诱导
3.  ，而产生了高水平的后代病毒体，
4.  表明该因素不是病毒复制所必需的
5.  .

最后，`/node()`正是我想要的，因为它也从内部标签中获取文本。

# javascript - 单击相应复选框时对 div 的内容求和

> ID：11744466
> 
> 赞同：4
> 
> 时间：2012-07-31T16:09:50.787
> 
> 标签：javascript, jquery

我在读取文件夹内容的循环中有以下代码：

```
<div class="oddrow">
    <span class="title">1 - 1215 - Magna Carta</span><br/>
    <span class="size">size: 229.1 MB</span>
    <input name="1215 - Magna Carta" type="checkbox">
<div> 
```

当复选框被选中时，我希望将每条记录的大小添加到单独的 div 中：

```
<div id="total>total = </div> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:24:54.057

正如shane所说，最好将普通数字保存在属性中。如果这不可能，你仍然可以这样做：

```
$(':checkbox:checked').each(function(){
    sum += parseFloat($(this).prev().text().match(/[\d\.]+/));
}); 
```

演示：

[http://jsfiddle.net/bGjP4/](http://jsfiddle.net/bGjP4/)

以下是如何将其保存为复选框中的值：

```
$(':checkbox:checked').each(function(){
    sum += parseFloat($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T16:22:27.437

如果您可以调整 HTML，我建议将大小值放在大小跨度或复选框的数据属性中。这将使您的 jquery 总计算更加容易......

```
<input name="..." type="checkbox" data-size="229.1" class="checkTotal" /> 
```

然后你的 jquery 会是这样的：

```
$(function() {

    var total = 0;
    $(".checkTotal:checked").each(function(idx, elem) {
         total = total + parseFloat($(elem).data('size'));
    });
    $('#total').text('total = ' + total);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:31:53.977

```
$(document).ready(function(){
    $("input[type='checkbox']").on('change', function(){
        var sum = 0;
        $("input[type='checkbox']:checked").each( 
            function() { 
               sum += $(this).siblings('.size').text().split(' ')[1];
            } 
        );
        $('#total').text('total = ' + sum);
    })
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:32:37.080

我假设由于您的问题被标记为 jQuery，因此您正在使用 jQuery。

如果你有这样的 div（注意我添加的几个类）：

```
<div class="oddrow rows_to_add">
    <span class="title">1 - 1215 - Magna Carta</span><br/>
    <span class="size">size: <span class="size">229.1</span> MB</span>
    <input name="1215 - Magna Carta" class="add_when_checked" type="checkbox">
<div>
<div class="evenrow rows_to_add">
    <span class="title">1 - 1215 - Magna Carta</span><br/>
    <span class="size">size: <span class="size">229.1</span> MB</span>
    <input name="1215 - Magna Carta" class="add_when_checked" type="checkbox">
<div> 
```

和总div：

```
<div id="total>total = <span id="total"></span></div> 
```

总结它们的jQuery代码：

```
$( '.add_when_checked' ).change( function() {
   var total = 0;
   $( '.rows_to_add' ).each( function() {
      var $this = $( this );
      if ( $this.find( '.add_when_checked' ).attr( 'checked' ) ) {
         total += $this.find( '.size' ).html();
      }
   } );
   $( '#total' ).html( total );
} ); 
```

基本上这就是说，当一个复选框改变状态时，循环使用类“rows_to_add”的所有div，检查何时选中了类“add_when_checked”的包含复选框，如果是这样，则在类“size”的范围内添加值"总计。获得总数后，将其放在 id 为“total”的 div 中。

另一种方式可能是这样的：

```
$( '.add_when_checked' ).change( function() {
   var total = 0;
   $( '.add_when_checked:checked' ).each( function() {
      total += $( this ).parent().find( '.size' ).html();
   } );
   $( '#total' ).html( total );
} ); 
```

它使用选择器来查找选中哪些复选框而不是条件，然后使用父遍历来查找相关的大小跨度。

# cygwin - 如何在另一台机器上复制 cygwin 安装和环境？

> ID：11744472
> 
> 赞同：2
> 
> 时间：2012-07-31T16:10:04.477
> 
> 标签：cygwin

我有我的机器设置来运行 cmake 和 gcc，我想在构建机器上安装 cygwin，并在构建机器上安装完全相同的包和参数集，并且可能在其他开发机器上。有没有一种方法可以做到这一点，而不必使用提供的 Setup.exe 在 GUI 中手动设置 cygwin？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T01:50:44.390

不幸的是，遵循 Cygwin 文档将导致下载整个发行版，但只安装“默认”系统。相比之下，下面的步骤完全下载并安装所需的内容。

1.  在一台机器上，运行`setup.exe`并选择`Install from Internet`. 选择一面镜子，然后选择您想要的精确组合。
    *   请注意您复制本地包的位置，例如`\\myserver\myDir`.
    *   如果您忘记添加某些内容，您可以多次重复第 1 步。
    *   等待安装完成。在安装过程中会产生一些元数据。
2.  在其他机器上，运行`setup.exe`并选择`Install from Local Directory`或使用`me_and`上面的命令行配方。提供缓存安装的位置 ( `\\myserver\myDir`)。您还可以将整个缓存复制到 SD 卡或 CD 上。
    *   去喝杯咖啡。处理完所有下载后，安装程序似乎会挂起几分钟。别担心，耐心点。最终会出现包选择器。
3.  这是关键的一步。转到包树的顶部并选择`All`. 这将安装之前下载到的所有包`\\myserver\myDir`。

为第 3 步（选择安装所有软件包）提供命令行参数会很好，这样整个步骤就可以自动化了。我找不到一个。也许我错过了什么？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T17:02:55.267

您可以使用 Cygwin 的 setup.exe[命令行选项](http://cygwin.com/faq/faq.setup.html#faq.setup.cli)来自动执行该过程。

对于自动安装，Cygwin 网站[建议](http://cygwin.com/faq/faq.setup.html#faq.setup.automated)进行完整安装并保存下载的包树，然后使用以下命令执行本地安装：

```
setup.exe -q -L -l {path-to-package-dir} 
```

然而，这只是一种可能的设置；根据您想要做什么，命令行选项允许您从 Internet 下载新软件包、安装特定软件包等。

# java - 在 Eclipse Java 中为多个类实现接口

> ID：11744473
> 
> 赞同：2
> 
> 时间：2012-07-31T16:10:09.123
> 
> 标签：java, eclipse, interface

我有大量的类和一个接口。我想做的就是选择所有的类并为每个类添加“实现”，而无需手动进行。这可能吗？

这就是我想做的，只需添加实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:29:39.707

在 Eclipse 中使用此项目的搜索和替换所有功能。

编辑一个非常基本的替换就像这个搜索（ctrl + H并选择文件搜索确保检查正则表达式。你也可以只搜索这个带有.java文件的项目）所有出现的以下正则表达式 `(public class+ \w+\s+)` 单击替换按钮（显示在文件搜索中或在搜索结果中）并输入以下字符串来替换 `$1 implements myinterface` 基本上正则表达式`(public class+ \w+\s+)`值被捕获在`$1`. 这在有内部类等的情况下可能不起作用您可能需要导入此接口以防止任何编译器错误。（可能是另一个正则表达式:)

注意：确保在“替换文本匹配窗口”中替换所有出现之前使用“预览”选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:17:24.300

在 Eclipse 中选择类，右键单击它并转到 Properties。

# c# - 在两种枚举类型之间切换？

> ID：11744476
> 
> 赞同：1
> 
> 时间：2012-07-31T16:10:22.240
> 
> 标签：c#, enumeration

所以我正在使用 Compact Framework 2.0 编写一个 C# 应用程序，我想知道我是否可以做一些比我脑海中计划的更简单的事情。
*如果有其他框架的答案，完整的或紧凑的，但不是这个，我仍然想听听它们，这就是为什么标签此时不包括紧凑框架 2.0 的原因。*

实际上，用户将能够选择他们想要为其设置设置的项目是类型 A 还是类型 B，然后他们想要在该分类下使用/设置什么特定设置。我想主要使用枚举来保持代码的可读性，因为这是我的工作场所，如果我不在身边，人们应该能够阅读它。

我的想法：
以下对于应用程序来说是**全局**的，而不是在特定的类中：

```
enum EnumTypes
{
    A, B,
    Num_Types,
}
enum EnumA
{
    Setting1 = 0, Setting2, Setting3, //and so on...
    Num_A_Settings, //WILL be different from B
}
enum EnumB
{
    Setting1 = 0, Setting2, Setting3, //and so on...
    Num_B_Settings, //WILL be different from A
} 
```

以下是**一个**函数/属性示例，该类将使用这些值来完成其工作，显然只公开了其他类需要的内容。

```
public class SettingClass
{
    public EnumTypes TypeUsed {/*basic get/set for property*/}
    public int SelectedSettingIndex {/*basic get/set for property*/}
    private ClassX[][] _settingsData = new ClassX[(int)Num_Types][];

    public SettingClass()
    {
        for(int i = 0; i < (int)EnumTypes.Num_Types;i++)
        {
            if((EnumTypes)i == EnumTypes.A)
            {
                _settingsData[i] = new ClassX[(int)EnumA.Num_A_Settings];
                //for loop for initializing each ClassX instance for A
            }
            else if((EnumTypes)i == EnumTypes.B)
            {
                _settingsData[i] = new ClassX[(int)EnumB.Num_B_Settings];
                //for loop for initializing each ClassX instance for B
            }
    }

    //just an example
    public IncrementSetting()
    {
        if(TypeUsed == EnumTypes.A)
        { /*range checking using Num_A_Settings, increments SelectedSettingIndex*/ }
        else if(TypeUsed == EnumTypes.B)
        { /*range checking using Num_B_Settings, increments SelectedSettingIndex*/ }
    }
} 
```

请不要太拘泥于每个类/变量的详细信息以及它是如何初始化的等等，因为这是一个试图代表我所问问题的想法的快速记录。我没有从我的代码中复制/粘贴它。

有没有办法，而不是只为“settingIndex”公开一个 int，我可以公开一个枚举并将 EnumA 或 EnumB 值显示给使用这个类的任何东西？

现在，任何必须获得选定设置索引的东西基本上都必须说“什么类型，A 还是 B？它是 A，好吧，所以 int 实际上意味着来自 A 的值，而不是来自 B 的值，将 int 强制转换为 EnumA。 ..” 或类似的东西，在这个旨在封装所有工作的类之外，它会很快变得复杂。

我在想是否有某种我可以做的继承或类似的事情，但我怀疑有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:44:15.363

The following example wraps and unwraps an enum value via reflection, is it close to what you're looking for ?

```
namespace App
{
  class Program
  {
    static void Main(string[] args)
    {
      var val = new EnumWrapper(B.f);
      Enum en = val.EnumVal;
      Console.WriteLine("{0}.{1}",en.GetType().Name,en);
    }
  }
  enum EnumType { A, B }
  enum A { a, b, c = 34, d = 12 }
  enum B { a, b, e = 54, f = 56 }
  class EnumWrapper
  {
    public EnumWrapper(Enum i)
    {
      type = (EnumType) Enum.Parse( typeof(EnumType), i.GetType().Name );
      index = Convert.ToInt32(i);
    }
    public EnumType type;
    public int index;
    public Enum EnumVal {
      get {
        Enum c = (Enum)Enum.ToObject(
          Type.GetType(
            "App." + type
          ), index
        );
        return c;
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:29:40.433

代替数组，您可以使用`Dictionary<Enum,ClassX>`. 然后，只要您使用`Enum`而不是在`int`任何地方使用`enum`s，您就会拥有完整的类型信息，并且可以区分各个枚举值。

AC#`enum`有一个有趣的特性，它可以在任何你需要它的地方运行，因为性能原因，但是当你需要将类型信息附加到它的值时`int`，它很高兴成为一个成熟的。`object`

我刚刚用来测试所有这些的一些 LINQPad 代码：

```
void Main()
{
  Dictionary<Enum,object> dict = new Dictionary<Enum,object>();
  dict.Add(asdf.lkj,null);
  dict.Add(qwer.oiu,null);
  Console.WriteLine(dict.ContainsKey(qwer.oiu));
  Console.WriteLine(dict.ContainsKey(asdf.lkj));
  Console.WriteLine(dict.ContainsKey(qwer.zxcv));
}

enum asdf {
  lkj
}

enum qwer {
  oiu,
  zxcv
} 
```

及其输出

```
True
True
False 
```

# .net - 从 DGV CellClick 事件填充电子邮件正文和主题

> ID：11744477
> 
> 赞同：0
> 
> 时间：2012-07-31T16:10:23.273
> 
> 标签：.net, vb.net, datagridview

我有一个通过 MySQL 填充的 datagridview。一列包含电子邮件，行将包含与该特定电子邮件地址相关联的数据。我在表单中输入了以下代码，因此当用户单击带有电子邮件地址的单元格时，将打开一个新的消息窗口，并且电子邮件地址将位于 mailto 部分：

```
 Private Sub MyDataGridView_CellClick(ByVal sender As Object, ByVal e As DataGridViewCellEventArgs) Handles DataGridView1.CellClick
    If DataGridView1.Columns(e.ColumnIndex).HeaderText = "Mech Email" Then
        Dim selectedEMailCell As DataGridViewCell = DataGridView1.Rows(e.RowIndex).Cells(e.ColumnIndex)
        If selectedEMailCell.Value IsNot Nothing Then
            System.Diagnostics.Process.Start("mailto:" & selectedEMailCell.Value.ToString & "")
        End If
    End If
End Sub 
```

我想添加包含来自同一行中其他单元格的信息的功能，这些信息将包含在出现的新电子邮件窗口的主题行和正文中。以下是我正在使用的列：

**Mech 电子邮件**，**Site No**（主题行），**Findings** （正文，但我也想添加其他评论），**Days Old**（正文）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:42:47.833

这是您需要的快速概述。我没有机会把它扔给编辑器，所以可能会有一些错别字。另外，我没有检查其他单元格是否为空。基本`mailto:`语法是`mailto:name@mail.com?subject=Hello&?body=Main message`. 还有一件事，如果您的主题或正文包含“&”或“？”，您可能需要将它们过滤掉。

```
 Dim selectedEMailCell As DataGridViewCell = DataGridView1.Rows(e.RowIndex).Cells(e.ColumnIndex)
        Dim selectedEMailRow As DataGridViewRow = DirectCast(DataGridView1.Rows(e.RowIndex)
        With selectedEMailRow
          If selectedEMailCell.Value IsNot Nothing Then
            Dim mailToString As New Stringbuilder
            mailToString.Append("mailto:" & .selectedEMailCell.Value.ToString)
            mailToString.Append("?subject=" & .Cells("Mech Email").value)
            mailToString.Append(.Cells("Site No").value) 
            mailToString.Append("&body=" & .Cells("Findings").value) 
            mailToString.Append(.Cells("Days Old").value) 
            System.Diagnostics.Process.Start(mailToString.ToString & "")
          End If
        End With 
```

# c++ - opencv,jni CV_8UC1 类型与 mixChannels() 不兼容

> ID：11744478
> 
> 赞同：1
> 
> 时间：2012-07-31T16:10:34.833
> 
> 标签：c++, image, opencv, java-native-interface, computer-vision

我正在开发一个 android 应用程序，它逐帧处理实时摄像机流（以检测正方形）。在预览回调中，它将图像帧作为字节数组传递。在我的 opencv 函数中，它将字节数组转换为 mat 对象。我需要`mixchannels()`在 opencv 中使用函数。我认为我的 mat 对象不兼容，`mixchannels()`因为它在那里击中。任何建议如何解决它。当我`image`用`image1`它替换时，那里也击中。请帮助。谢谢你，祝你有美好的一天！这是我的代码。

```
 JNIEXPORT jint JNICALL Java_org_opencv_samples_tutorial3_Sample3View_FindFeatures(JNIEnv* env, jobject thiz, jint width, jint height, jbyteArray yuv, jintArray rgba) 
```

{

`jbyte* _yuv = env->GetByteArrayElements(yuv, 0);`

`jint* _rgba = env->GetIntArrayElements(rgba, 0);`

```
//Mat myuv(height + height/2, width, CV_8UC1, (unsigned char *)_yuv);
Mat image(height + height/2, width,  CV_8UC1, (unsigned char *)_yuv);//byte array in to mat object
Mat image1(height + height/2, width, CV_8UC3, (unsigned char *)_yuv);
Mat mrgba(height, width, CV_8UC4, (unsigned char *)_rgba);
Mat mgray(height, width, CV_8UC1, (unsigned char *)_yuv);

cvtColor(image, mrgba, CV_YUV420i2RGB ,4);

vector<vector<Point> > squares;//
vector<vector<Point> > contours;//
jint Area=0;
int thresh = 50, N = 10;

Mat pyr, timg, gray0(image.size(), CV_8U), gray;

pyrDown(image, pyr, Size(image.cols/2, image.rows/2));//reduces noice of the image,if i put'image1' here it struck too
pyrUp(pyr, timg, image.size());//reduces noice of the image

//for loop to find squares in every color plane of the image
for( int c = 0; c < 3; c++ )
{
int ch[] = {c, 0};
    mixChannels(&timg, 1, &gray0, 1, ch, 1);//code struck here.if i replace 'c' with '1' it workes 
```

# c++ - Qt设置新窗口

> ID：11744479
> 
> 赞同：0
> 
> 时间：2012-07-31T16:10:38.400
> 
> 标签：c++, forms, qt, user-interface

我已经尝试并尝试为我的应用程序创建一个新窗口。我让它工作并打开窗口，但是当我尝试添加我的表单 .ui 东西时，它就停止了工作。对不起，我不知道我做错了什么。只是有人请看一下代码和帮助。

```
 #include "new_round.h"
    #include "ui_NewRound.h"

    New_Round::New_Round(QWidget *parent) :
        QMainWindow(parent),
        uinr(new Uinr::New_Round)
    {   
uinr->setupUi(this);
    }
    New_Round::~New_Round()
    {
        delete uinr;
    } 
```

那是 new_round 类的 cpp 文件，现在这里是标题。

```
 #ifndef NEW_ROUND_H
    #define NEW_ROUND_H

    #include "new_round.h"
    #include <QMainWindow>

    namespace Uinr{
     class New_Round;
    }

    class New_Round : public QMainWindow
    {
        Q_OBJECT
    public:
        explicit New_Round(QWidget *parent = 0);
        ~New_Round();

    private:
        Uinr::New_Round *uinr;
    };

    #endif // NEW_ROUND_H 
```

这是我得到的 4 个错误

```
invalid use of incomplete type 'struct Uinr::New_Round'
forward declaration of 'struct Uinr::New_Round'
invalid use of incomplete type 'struct Uinr::New_Round'
forward declaration of 'struct Uinr::New_Round' 
```

我找不到任何关于这个主题的教程，所以我只是在我的 mainwindow.h 和 mainwindow.cpp 之间来回查看，所以不确定我做错了什么。我再次得到了要显示的窗口，但表单 NewRound.ui 不起作用。帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:16:40.383

您的头文件`#include`本身。取出它`#include`并替换它，`#include ui_Newound.h`它应该可以工作。您可能需要先运行 qmake 并清理项目，并且可能需要手动删除 Makefile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:34:58.863

如果我理解正确，您需要按如下方式定义 new_round 但是，您不想包含头文件本身。此外，您想声明一个 Ui_NewRound 类型的指针，而不是 New_Round 本身类型的指针——我假设您使用设计器创建此代码，在这种情况下您最终会得到一个名为 Ui_NewRound 的类。另外，不要一开始就关心命名空间，它只会让事情变得过于复杂。所以这里我们使用头文件：

```
#ifndef NEW_ROUND_H
#define NEW_ROUND_H

#include <QMainWindow>
#include "Ui_NewRound.h"

// no including of new_round here -- this needs to be included in .cpp file instead
class New_Round : public QMainWindow
{
    Q_OBJECT
public:
    New_Round(QWidget *parent = 0);
    ~New_Round();

private:
   Ui_NewRound *nr;

};

#endif 
```

它将被保存为 new_round.h。

在 .cpp 代码中，我会有

```
#include "new_round.h"
#include "ui_NewRound.h"

New_Round::New_Round(QWidget *parent) :
    QMainWindow(parent)
{   
    nr = new ui_NewRound;
    nr->setupUi(this);
}
New_Round::~New_Round()
{
    delete nr;
} 
```

希望这能让你开始！

干杯，

本。

# sql-server - TSQL 中的高级比例计算

> ID：11744483
> 
> 赞同：2
> 
> 时间：2012-07-31T16:10:58.523
> 
> 标签：sql-server, sql-server-2008, tsql, math

我试图确定 DD ( `branch`) 与 AA、BB、CC 的比例，其中 DD 存在于员工、帐户、水果的子集中。每个员工的`pcnt`加成为 1 (100%)。

分解它，这个计算必须满足以下条件：

*   忽略没有 DD 的子集（员工、帐户、水果）

```
| 员工 | 帐户 | 水果 | 分行 | 碳纳米管 |
-------------------------------------------------- -
| 123 | 水果1 | 苹果 | 机管局 | 0.1 |
```

*   忽略完全 DD 的子集（员工、帐户、水果）

```
| 员工 | 帐户 | 水果 | 分行 | 碳纳米管 |
-------------------------------------------------- -
| 123 | 水果2 | 苹果 | DD | 0.05 |
```

*   在子集（员工、帐户、水果）内按比例分配 DD 到 AA、BB、CC

从：

```
| 员工 | 帐户 | 水果 | 分行 | 碳纳米管 |
-------------------------------------------------- -
| 123 | 水果1 | 草莓 | 机管局 | 0.05 |
| 123 | 水果1 | 草莓 | BB | 0.02 |
| 123 | 水果1 | 草莓 | 抄送 | 0.07 |
| 123 | 水果1 | 草莓 | DD | 0.10 |
```

进入：

```
| 员工 | 帐户 | 水果 | 分行 | 碳纳米管 |
-------------------------------------------------- -
| 123 | 水果1 | 草莓 | 机管局 | 0.09 |
| 123 | 水果1 | 草莓 | BB | 0.03 |
| 123 | 水果1 | 草莓 | 抄送 | 0.12 |
```

上述子集比例的计算将是：

```
AA + {AA * [DD / (AA + BB + CC)]}

0.05 + {0.05 * [0.1 / (0.05 + 0.02 + 0.07)]} = 0.09
0.02 + {0.02 * [0.1 / (0.05 + 0.02 + 0.07)]} = 0.03
0.07 + {0.07 * [0.1 / (0.05 + 0.02 + 0.07)]} = 0.12
```

*   经过这些计算和条件，总和`pcnt`应该是1
*   可能有一些子集不是所有三个（AA、BB、CC）都存在

**表结构**

```
创建表 tbl (
  员工 tinyint 非空，
  帐户 varchar(10) 非空，
  水果 varchar(15) 非空，
  分支 char(2) NOT NULL,
  pcnt 十进制 (3,2) NULL
  主键（员工、账户、水果、分支））
```

**样本数据**

```
INSERT INTO tbl（员工、帐户、水果、分支、p​​cnt）值
(123, 'Fruit1', 'Apple', 'AA', '0.1'),
(123, 'Fruit1', '芒果', 'DD', '0.02'),
(123, 'Fruit1', '芒果', 'CC', '0.1'),
（123，'Fruit1'，'芒果'，'BB'，'0.02'），
(123, 'Fruit1', '芒果', 'AA', '0.06'),
(123, 'Fruit1', '菠萝', 'DD', '0.01'),
(123, 'Fruit1', '菠萝', 'CC', '0.05'),
(123, 'Fruit1', '菠萝', 'BB', '0.05'),
(123, 'Fruit1', '菠萝', 'AA', '0.05'),
(123, 'Fruit1', '草莓', 'DD', '0.10'),
(123, 'Fruit1', '草莓', 'CC', '0.07'),
(123, 'Fruit1', '草莓', 'BB', '0.02'),
(123, 'Fruit1', '草莓', 'AA', '0.05'),
（123，'Fruit2'，'Apple'，'DD'，'0.05'），
（123，'Fruit2'，'芒果'，'DD'，'0.01'），
(123, 'Fruit2', '芒果', 'CC', '0.02'),
(123, 'Fruit2', '芒果', 'BB', '0.01'),
(123, 'Fruit2', '芒果', 'AA', '0.01'),
（123，'Fruit2'，'菠萝'，'DD'，'0.02'），
(123, 'Fruit2', '菠萝', 'CC', '0.03'),
(123, 'Fruit2', '菠萝', 'BB', '0.02'),
(123, 'Fruit2', '菠萝', 'AA', '0.02'),
(123, 'Fruit2', '草莓', 'DD', '0.01'),
(123, 'Fruit2', '草莓', 'CC', '0.05'),
(123, 'Fruit2', '草莓', 'AA', '0.05')
```

**我试过的**

```
SELECT b.*, 
    CASE WHEN (b.Sum_AA + b.Sum_BB + b.Sum_CC) > 0 THEN 'hello'
    ELSE NULL
    END
FROM (
    SELECT a.*, 
        (SELECT SUM(pcnt) AS [pcnt] FROM dbo.tbl
            WHERE employee = a.employee AND account = a.account AND fruit = a.fruit
            AND branch = 'AA') AS [Sum_AA],
        (SELECT SUM(pcnt) AS [pcnt] FROM dbo.tbl
            WHERE employee = a.employee AND account = a.account AND fruit = a.fruit
            AND branch = 'BB') AS [Sum_BB],
        (SELECT SUM(pcnt) AS [pcnt] FROM dbo.tbl
            WHERE employee = a.employee AND account = a.account AND fruit = a.fruit
            AND branch = 'CC') AS [Sum_CC]
    FROM (
        SELECT employee, account, fruit, SUM(pcnt) AS [Sum_DD]
        FROM dbo.tbl
        WHERE employee = 123 AND branch = 'DD'
        GROUP BY employee, account, fruit) a) b 
```

直到上面的查询，我已经将 AA、BB、CC 分组。但是，我不知道如何进行。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:25:24.717

不确定这是不是你需要的，试试这个。

```
WITH ct1 AS
(        
    SELECT employee, account, fruit
        ,SUM(CASE WHEN branch = 'AA' THEN pcnt ELSE 0 END) AS AA    
        ,SUM(CASE WHEN branch = 'BB' THEN pcnt ELSE 0 END) AS BB    
        ,SUM(CASE WHEN branch = 'CC' THEN pcnt ELSE 0 END) AS CC
        ,SUM(CASE WHEN branch = 'DD' THEN pcnt ELSE 0 END) AS DD
    FROM tbl 
    GROUP BY  employee, account, fruit having SUM(CASE WHEN branch = 'DD' THEN 1 ELSE 0 END) >= 1       
)
SELECT t.*
    ,new_pcnt = t.pcnt + ROUND((t.pcnt * ( DD /(AA + BB + CC))),2)
FROM tbl t
INNER JOIN ct1 
  ON t.employee = ct1.employee
  AND t.account = ct1.account
  AND t.fruit = ct1.fruit
WHERE t.branch <> 'DD' 
```

# javascript - Format fields in twitter bootstrap to show like a table

> ID：11744495
> 
> 赞同：0
> 
> 时间：2012-07-31T16:11:30.850
> 
> 标签：javascript, jquery, css, twitter-bootstrap

I'm not the best when it comes to CSS to here goes.

I'm trying to format fields in twitter bootstrap by strictly using CSS / javascript (or jQuery)

Here is my HTML:

```
<div class="span12">
    <div id="DOB_picker" class="DOB_picker">
        <fieldset class="birthday-picker">
            <label for="birth[month]">Month</label>
            <select class="birth-month" name="birth[month]"></select>

            <label for="birth[day]">Day</label>
            <select class="birth-day" name="birth[day]">

            <label for="birth[year]">Year</label>
            <select class="birth-year" name="birth[year]"></select>         
        </fieldset>
    </div>
</div> 
```

I can not change the HTML as it is auto generated and therefore the only way for me to style it is CSS or javascript.

**This is what it looks like right now**

![enter image description here](../Images/3799bc8bd3a31f014d871a7344dea0e3.png)

**EDIT: After trying reagan's Solution**

```
var html = $('.birthday-picker').html();
$('.birthday-picker').html('<row>' + html + '</row>'); 
```

I used the following code to try to implement reagan's solution but had no luck :(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:16:43.133

As you requested a **CSS / JS only** solution..

You will need to wrap your `label & select` elements with a element `(.control-group)`

```
$("#DOB_picker").find("label").each(function(){

     $(this).nextUntil("label").andSelf().wrapAll("<div class='control-group'></div>");
}); 
```

​</p>

Your `.control-group` will need the following css, or similar

```
 #DOB_picker .control-group {
    display: inline-block;
    zoom:1;
    float: left;
    }

    #DOB_picker .control-group label {
    text-align:left;
    } 
```

You really want to put this CSS under custom, semantic classes so it doesn't trash the rest of your site.

* * *

**Working Example**

[http://jsfiddle.net/blowsie/nJm2C/](http://jsfiddle.net/blowsie/nJm2C/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:14:28.477

surround your fields with a `<row></row>` like so:

```
<div class="span12">
    <div id="DOB_picker" class="DOB_picker">
        <fieldset class="birthday-picker">
            <row>
                <label for="birth[month]">Month</label>
                <select class="birth-month" name="birth[month]"></select>

                <label for="birth[day]">Day</label>
                <select class="birth-day" name="birth[day]">

                <label for="birth[year]">Year</label>
                <select class="birth-year" name="birth[year]"></select>
            </row>        
        </fieldset>
    </div>
</div> 
```

That should make them all be inline (and if it doesn't it's because your inputs and/or labels are too wide to all be inline.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:17:09.413

try with:

```
<div class="span12">
    <div id="DOB_picker" class="DOB_picker">
        <fieldset class="row-fluid birthday-picker">
            <div class="span4">
              <label for="birth[month]">Month</label>
              <select class="birth-month" name="birth[month]"></select>
            </div>
            <div class="span4">
              <label for="birth[day]">Day</label>
              <select class="birth-day" name="birth[day]">
            </div>
            <div class="span4">
              <label for="birth[year]">Year</label>
              <select class="birth-year" name="birth[year]"></select>
            </div>         
        </fieldset>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:41:41.190

Okay, here is the jQuery to wrap your content in rows:

```
$(document).ready(function () {
    ...
    $("#DOB_picker").wrap("<div class='row' />");
    ...
}); 
```

The one thing that you're going to have to play around with is what class you give the div that you're going to wrap with (I used row, as it is the likely case). The reason I can't give you this answer is because your page layout could be different and could require a 'row-fluid'. You will know when you see it. Here is a link to the [Bootstrap Documentation](http://twitter.github.com/bootstrap/scaffolding.html) in case you need to use a different class.

Let me know if you ahve any questions.

# flash - 弹性跨域不起作用

> ID：11744498
> 
> 赞同：0
> 
> 时间：2012-07-31T16:11:34.630
> 
> 标签：flash, apache-flex, crossdomain.xml

我有两个域作为不同的虚拟主机托管在同一台服务器上。我正在使用 apache2 网络服务器。

两个域（domain1 和 domain2）都使用 https。

我从 domain1 和 domain2 加载了相同的 flex 应用程序，它仅通过对 domain1 的请求来提取数据。

当应用程序从 domain1 加载并从 domain1 请求数据时，应用程序工作正常。

当应用从 domain2 加载并从 domain1 请求数据时，应用不工作。我收到以下错误：

“访问 url
目的地的安全错误：DefaultHTTPS”

我确实有一个位于[https://www.domain1/crossdomain.xml](https://www.domain1/crossdomain.xml)的跨域文件，它看起来像这样：

```
<?xml version="1.0"?><!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
    <site-control permitted-cross-domain-policies="all"/>
    <allow-access-from domain="domain1" secure="false" />
    <allow-access-from domain="domain2" secure="false" />
</cross-domain-policy> 
```

在我的弹性代码中，我有以下几行代码：

```
Security.loadPolicyFile( "https://www.domain1/crossdomain.xml" ); 
```

我无法让它工作，而且我已经坚持了太久。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T20:33:01.037

我建议你删除secure=false。

# python - E160E USB GSM 调制解调器连续将数据转储到串行端口

> ID：11744513
> 
> 赞同：0
> 
> 时间：2012-07-31T16:12:20.823
> 
> 标签：python, gsm, at-command

我正在使用 python 脚本使用 Serial 发送，在这种情况下是一个简单的 AT 命令“AT”。如果一切顺利，那通常会返回 OK 。

问题是几秒钟后 GSM 调制解调器将转储以下内容。RSSI:19（是的，我知道这是信号强度）。

它还转储：

```
BOOT:23243559,0,0,0,77 
```

这只会不时发生，并且仅在 Linux 中发生，在 Windows 中不会发生。

我在 Linux 中使用 python 脚本和 putty 并在 Windows 中使用 Hyperterminal 对此进行了测试。使用相同的串行配置。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:05:59.340

好的，经过几次试验和错误。如果你曾经遇到过这个问题

请记住，E160 使用操作系统打开两 (2) 个 USB“端口”。这两个端口都可以支持 AT 命令，但一个更像“状态监视器”端口，而另一个更像普通端口。

--- 以下仅凭经验 ---

Monitor 端口的编号总是最高的（它是第二个注册的，你可以看一下 dmesg ）。

还 ！

简而言之，它就是 CNMI 报告的来源：

USB0，发送命令没有垃圾（你在这里做所有的东西）

USB1、监视器端口、定期报告、网络状态和收到的短信警报**仅**在此处广播。

如果您需要帮助，请回复:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T20:20:29.787

这个问题很老了，但可能会对某人有所帮助，以下命令：

```
AT^CURC=0 
```

禁用定期状态通知

# java - 针对 Facebook 的客户端身份验证

> ID：11744517
> 
> 赞同：0
> 
> 时间：2012-07-31T16:12:39.360
> 
> 标签：java, facebook-graph-api, authentication, controller, facebook-access-token

我们有一个带有 spring mvc 控制器的 spring web 应用程序。它应该连接到我们的 facebook 应用程序以获取用于进一步访问的身份验证令牌。与我们的应用程序的通信似乎有效。当我点击链接

```
<a href="https://www.facebook.com/dialog/oauth?client_id=something&redirect_uri=http://our.domaine.register/postback?user_id=12345&scope=manage_pages&response_type=code">connect</a> 
```

它会将我重定向到 facebook，我将输入我的凭据并重定向回

```
our.domaine.register/postback?user_id=12345&code=SoMEcOde 
```

这又是我们的 Spring MVC 控制器之一，但这并不重要，因为

**问题是，facebook 返回的代码是格式错误的 accessToken**，

这意味着如果我尝试使用它来访问受保护的资源，它将无法工作。用通过图形 API 资源管理器检索到的访问令牌替换相同的调用，它工作正常。

返回的代码具有特殊的格式，其中包含“-”、“_”和“=”字符，这是普通访问令牌所没有的。

所以我假设必须进行某种转换？！还是某种格式问题？

返回的令牌：

`AQBoXkcR5zRUiuHoO_lLdQfnxxxxxxxxxxxxxxxxoPPvZQTeybT9ebsI2SD1Xk`

**代码和accessToken一样吗？**

官方文档大多只是谈论使用锚散列（REDIRECT_URL/#access_token=...）和通过javascript访问access_token，虽然我不知道为什么我要这样做，它不自然也不可测试......

有没有人使用 code 参数将其映射为请求参数，以便可以在控制器中访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:40:19.217

看起来您的 response_type 正在请求代码，这就是没有返回令牌的原因。

[请检查https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)的最后一部分

正确呼叫的示例；

```
https://www.facebook.com/dialog/oauth?
    client_id=YOUR_APP_ID
   &redirect_uri=https://www.facebook.com/connect/login_success.html
   &response_type=token 
```

当登录成功时，重定向 ur 包含附加的 access_token 和 expires_in 参数。您可以解码 url 参数以获得所需的内容。这是[Android OAuth 示例](https://github.com/wareninja/generic-oauth2-login-for-android)的示例函数（易于适应 java）：

```
public static Bundle decodeUrl(String s) {
        Bundle params = new Bundle();
        if (s != null) {
            String array[] = s.split("&");
            for (String parameter : array) {
                String v[] = parameter.split("=");
                // YG: in case param has no value
                if (v.length==2){
                    params.putString(URLDecoder.decode(v[0]),
                                 URLDecoder.decode(v[1]));
                }
                else {
                    params.putString(URLDecoder.decode(v[0])," ");
                }
            }
        }
        return params;
    }

    /**
     * Parse a URL query and fragment parameters into a key-value bundle.
     * 
     * @param url the URL to parse
     * @return a dictionary bundle of keys and values
     */
    public static Bundle parseUrl(String url) {

        try {
            URL u = new URL(url);
            Bundle b = decodeUrl(u.getQuery());
            b.putAll(decodeUrl(u.getRef()));
            return b;
        } catch (MalformedURLException e) {
            Log.w(TAG, "parseUrl ex ->" + e.toString());
            return new Bundle();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:38:11.577

~~他们返回给您的代码是 OAuth 授权代码，没有访问令牌。您必须用另一个呼叫交换那个访问令牌。[有关服务器端身份验证，](https://developers.facebook.com/docs/authentication/server-side/)请参阅 Facebook 文档中的第 4 点~~

**更新：（** 对不起，错过了标题，你说“客户端身份验证”；））

~~使用`response_type=token`代替`response_type=code`，因此您可以直接获得访问令牌而不是 OAuth 授权码。请参阅Facebook 的客户端身份验证文档中*不使用 JS SDK的*[客户端身份验证部分](https://developers.facebook.com/docs/authentication/client-side/)。~~

**更新：**

当您尝试开发 Web 应用程序时，使用[服务器端身份验证流程](https://developers.facebook.com/docs/authentication/server-side/)是正确的。这意味着将授权码（重定向用户后获得的授权码）换成另一个调用的访问令牌。

因此，如果我现在理解正确，那么您的问题是如何从收到的响应中获取访问令牌。查看[此示例](http://faheemsohail.com/2012/03/integrating-java-spring-mvc-and-facebook-part-1/)以了解如何使用 Spring 执行此类操作。对于您的情况，这类似于获取授权码：

```
@RequestMapping(value = "/postback", params = "code", method = RequestMethod.GET)
@ResponseBody
private void accessCode(@RequestParam("code") String code,
                            HttpServletRequest request,
                            HttpServletResponse response) throws Exception {
        //Now the variable 'code' holds the authorization code
} 
```

# actionscript-3 - SWFAddress setValue() 方法触发 URL 更改事件

> ID：11744520
> 
> 赞同：1
> 
> 时间：2012-07-31T16:12:49.733
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, swfaddress

我正在构建一个使用 SWFAddress 的 Flex 应用程序。每当我通过 SWFAddress`SWFAddress.setValue()`方法更新被劫持的 URL 时，我注意到它会导致`SWFAddressEvent.CHANGE`事件调度，从而导致我的页面再次经历其更新周期。

SWFAddress 中是否有一种方法可以“静默”更新被劫持的 URL，从而`SWFAddressEvent.CHANGE`不分派事件？

我现在能想到的唯一解决方法是删除事件侦听器，更改 URL，然后将其添加回来。但这似乎……真的……效率低下。有任何想法吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:06:58.860

嘿，刚刚检查了源代码，那里没有任何东西可以阻止事件，如果它是一个新值，那么事件就会被分派（看起来它在初始化期间跳过了这样做，但在所有其他情况下，如果发生更改，它就会被分派）。您可以修改源，因为它可用并将您自己的布尔值添加到 SWFAddress 以阻止它调度事件，否则就像您已经说过删除/添加侦听器是一种选择，如果它只有一个对象添加/删除了侦听器我不'认为性能不会受到影响。

# android - 如何通过单击他的图标将活动（进程）置于前台？

> ID：11744524
> 
> 赞同：0
> 
> 时间：2012-07-31T16:12:56.690
> 
> 标签：android, android-activity, icons, foreground

我有：

> 列出 procInfos = activityManager.getRunningAppProcesses(); 图标 = pk.getApplicationIcon(procInfos.get(i).processName);

当用户单击它时，我想在前台启动与图标相关的活动。我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:26:41.180

使用[ImageButton](http://developer.android.com/reference/android/widget/ImageButton.html)将您的图标显示为按钮。然后，在 ImageButton onClickListener 的 onClick 方法中，调用：

```
 PackageManager pm = this.getPackageManager();

    try
    {
      Intent it = pm.getLaunchIntentForPackage(application.package.name);

      if (null != it)
        this.startActivity(it);
    }

    catch (ActivityNotFoundException e)
    {//oops, no such application
    } 
```

# c# - 是否可以在无需通过远程桌面连接的情况下运行 Coded UI 测试？

> ID：11744526
> 
> 赞同：17
> 
> 时间：2012-07-31T16:12:59.650
> 
> 标签：c#, visual-studio-2010, .net-4.0, coded-ui-tests

我正在尝试自动化编码的 UI 测试。

我的测试控制器在远程测试服务器上启动测试，我通常通过远程桌面连接访问该服务器。

是否可以在无需通过远程桌面连接的情况下运行 Coded UI 测试？

目前，测试仅在我通过远程桌面连接时运行，并且窗口必须打开。当我关闭远程桌面会话时，测试不会运行。

如果在没有远程桌面的情况下无法运行编码的 UI 测试，如何通过远程桌面自动连接？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T14:21:11.593

我在远程测试机器上遇到了同样的问题，但我们的测试机器在 Hyper-V 上运行。使用 Hyper-V，解决方案只是通过 Hyper-V 而不是远程桌面连接进行连接，并且关闭 Hyper-V 连接不会锁定计算机。

另一个建议是绕过远程桌面自动锁定屏幕的事实。这里有一个简短的介绍：http: [//homeservershow.com/remote-desktop-session-locks-workstation-after-exit.html](http://homeservershow.com/remote-desktop-session-locks-workstation-after-exit.html)

基本上，当您想断开连接时，在远程计算机的命令提示符下运行“tscon.exe RDP-Tcp#0 /dest:console”。机器应保持解锁状态，测试将运行良好。

根据@Zatricion，该命令可以概括：

```
tscon.exe %sessionname% /dest:console 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T09:52:17.257

这个问题最简单的解决方案就是在我的测试环境中启用自动登录（根据操作系统有多种方法）。

启用自动登录后，当我重新启动测试环境（使用可以编写脚本的“shutdown.exe /r”命令）时，测试环境会重新加载一个活动的登录会话，因此测试可以运行成功地。

对于我的夜间测试自动化，我在我的测试环境中启用了自动登录，并在测试执行之前安排了重新启动。

我对这种方法没有任何问题 - 这意味着我不必通过远程桌面进行连接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T14:11:52.730

来自[MSDN](http://msdn.microsoft.com/en-us/library/ee291332.aspx)：

> 运行您要在其上运行编码 UI 测试的代理的计算机不能被锁定或具有活动的屏幕保护程序。

如果您`CodedUi Tests`通过 Visual Studio 运行（意味着测试在您的帐户下执行），我相信您**必须**通过远程桌面连接到远程测试服务器。

但是，您可以使用它`Microsoft Test Manager`来运行您的测试：

1.  [创建虚拟环境。](http://msdn.microsoft.com/en-us/library/dd380688.aspx)
2.  [设置您的虚拟机，以便它们可以运行自动化测试。](http://msdn.microsoft.com/en-us/library/dd293551.aspx)
3.  [安装测试控制器和测试代理。](http://msdn.microsoft.com/en-us/library/dd648127)
    - 将测试代理设置为作为**交互式**进程运行，以便它可以运行 CodedUi 测试。
    - 设置测试控制器以使用 Microsoft 测试管理器运行。
4.  通过 MTM[创建测试计划并在您的虚拟环境中运行巡回测试。](http://msdn.microsoft.com/en-us/library/dd286583.aspx)现在不需要连接远程服务器，因为您的测试将在运行测试代理的帐户下运行（注意：您应该创建一个用于测试目的）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-19T09:21:41.973

这很容易请在此处查看此博客文章这件事以非常简单的方式进行了解释如何在没有 MS TFS 时安排 Microsoft coaded UI 测试执行

1.  按照以下步骤创建一个稳定的编码 UI 项目的版本 i。打开构建 > 批量构建

ii. 如果已构建版本，请单击重新构建

2.  成功构建编码 UI 项目后，导航到项目的发布文件夹并复制以您的项目名称命名的 testAutomated.dll

3.  将此 dll 放在要安排测试执行的远程计算机上

4.  将 .dll 放在远程机器的某个目录中，例如我放在 D:\coadedUitest

5.  从此链接在您要执行测试的这台机器上安装 Miscosoft 测试代理。[http://www.microsoft.com/en-us/download/details.aspx?id=38186](http://www.microsoft.com/en-us/download/details.aspx?id=38186)

6.  安装测试代理后，验证位置是否存在 MS 测试

7.  打开记事本并输入以下文本 D: cd coadedUitest set mstestPath="C:\Program Files\Microsoft Visual Studio 12.0\Common7\IDE" %mstestpath%\mstest /testcontainer:testAutomated.dll

8.  使用 .bat 扩展名保存它

9.  通过双击打开 .bat 文件以验证是否执行了测试

10.  成功执行后打开 windows 任务调度程序并创建一个计划任务来运行这个创建的 .bat 文件。

[http://testingtoolstecniques.blogspot.com/2014/11/how-to-schedule-microsoft-coaded-ui.html](http://testingtoolstecniques.blogspot.com/2014/11/how-to-schedule-microsoft-coaded-ui.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-10T14:05:54.410

更新：

使用 VSO 或 TFS2015 构建系统不再需要远程连接来运行测试。创建运行“Visual Studio 测试代理部署”任务的构建或发布，然后运行“运行功能测试”任务。

最好的方法可能是，创建一个删除构建工件的构建，然后创建一个发布，从工件部署站点并针对该站点运行编码的 UI 测试。

笔记：

*   如果您手动启动远程连接，则运行将失败。
*   如果您创建远程连接并断开连接而不是注销，则运行将失败。
*   启用自动登录并重新启动仍将允许这些测试运行。
*   使用 Hyper-V，您可以看到运行测试的服务器桌面，它是一个非常小的窗口，但可以让您了解服务器正在做什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T15:08:04.023

使用 VNC（例如，[TightVNC](http://www.tightvnc.com/)）查看/与机器交互

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-28T13:33:39.833

您可以使用 VMware 运行编码的 ui 测试。如果您将 VM 最小化，测试仍将继续。

有关更多详细信息，请参阅此链接。 [http://www.binaryclips.com/2016/03/coded-ui-tests-executing-test-case.html](http://www.binaryclips.com/2016/03/coded-ui-tests-executing-test-case.html)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-11-25T18:31:20.857

--首选解决方案 1：拥有 Hyper-V 客户端并使用计划任务简单地运行编码的 UI 测试。完全没有问题。

--preferred 解决方案 2：您需要有 2 个虚拟机。第一个远程桌面到 VM 1，然后从 VM 1 远程桌面到运行 Coded UI 的 VM 2。在 VM2 中启动 Coded UI 后，只需断开 VM 1 的连接即可。这将使会话保持打开状态并且永远不会出现任何问题

-less 首选解决方案 3：使用命令行重新启动 VM。在您的 VM 上启用了自动登录。有一个计划的任务来运行编码的 UI。

我使用了这种方法，发现我的一些测试中断了。

-- 最不推荐的解决方案 4：使用 tscon.exe %sessionname% /dest:console 我使用了这种方法，但不能保证您的测试将毫无问题地运行

# haskell - 如何轮询文件、套接字或句柄以在 Haskell 中变得可读/可写？

> ID：11744527
> 
> 赞同：10
> 
> 时间：2012-07-31T16:13:03.377
> 
> 标签：haskell

我怎么能从 Haskell 中观察几个文件/套接字并等待它们变得可读/可写？

Haskell 中是否有类似 select/epoll/... 的东西？或者我被迫为每个文件/套接字生成一个线程并始终使用该线程内的阻塞资源？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T16:27:09.190

问题是错误的：您不必为每个文件/*套接字*生成一个线程并使用阻塞调用，您*可以*为每个文件/套接字生成一个线程并使用阻塞调用。这是最干净的解决方案（任何语言）；在其他语言中避免使用它的唯一原因是它在那里效率有点低。然而，GHC 的线程足够便宜，在 Haskell 中并不是低效的。（此外，在幕后，GHC 的 IO 管理器使用类似 epoll 的方式来适当地唤醒线程。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-17T05:15:39.010

有一个包装器`select(2)`：[https](https://hackage.haskell.org/package/select)
://hackage.haskell.org/package/select 这里的示例用法：[https ://github.com/pxqr/udev/blob/master/examples/monitor.hs#L36](https://github.com/pxqr/udev/blob/master/examples/monitor.hs#L36)

有一个包装器`poll(2)`： [https ://hackage.haskell.org/package/poll](https://hackage.haskell.org/package/poll)

GHC base 带有将 Linux 上的 epoll （以及其他平台上的等价物）包装在`GHC.Event`模块中的功能。
示例用法：

```
import GHC.Event
import Data.Maybe (fromMaybe)
import Control.Concurrent (threadDelay)

main = do
  fd <- getSomeFileDescriptorOfInterest
  mgr <- fromMaybe (error "Must be compiled with -threaded") <$> getSystemEventManager
  registerFd mgr (\fdkey event -> print event) fd evtRead OneShot
  threadDelay 100000000 
```

更多文档位于[http://hackage.haskell.org/package/base-4.11.1.0/docs/GHC-Event.html](http://hackage.haskell.org/package/base-4.11.1.0/docs/GHC-Event.html)

[在https://wiki.haskell.org/Simple_Servers#Epoll-based_event_callbacks](https://wiki.haskell.org/Simple_Servers#Epoll-based_event_callbacks)上使用旧版本库的示例 虽然，该`loop`示例中的该示例已被移至隐藏模块`GHC.Event.Manager`，并且尽可能不公开导出告诉。`GHC.Event`本身说“这个模块应该被认为是 GHC 内部的。”

`Control.Concurrent`里面有`threadWaitRead`和`threadWaitWrite`。所以，翻译上面的 epoll 例子：

```
import Control.Concurrent (threadWaitRead)

main = do
  fd <- getSomeFileDescriptorOfInterest
  threadWaitRead fd
  putStrLn "Got a read ready event" 
```

您可以将`threadWaitRead`后续的 IO 操作包装起来`Control.Monad.forever`以重复运行它们。您还可以将这个东西包装起来，`forkIO`以便在您的程序执行其他操作时在后台运行它。

# java - java servlet 应用程序范围重定向

> ID：11744528
> 
> 赞同：2
> 
> 时间：2012-07-31T16:13:04.237
> 
> 标签：java, servlets

以下哪个范围内的变量在重定向后仍然有效？

*   适用范围
*   会话范围
*   请求范围
*   页面范围

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:16:27.747

会话和应用程序。请求和页面范围仅对单个请求有效。

# java - Eclipse 中的 Ivy 调试消息级别

> ID：11744537
> 
> 赞同：7
> 
> 时间：2012-07-31T16:13:43.583
> 
> 标签：java, eclipse, ant, ivy

我想更改常春藤消息级别以在 Eclipse 中调试我的常春藤设置，但我不知道如何将其设置为调试/详细级别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T16:32:51.633

备查：

您可以通过以下方式更改 IvyDE 上的 Ivy 消息级别：http: [//ant.apache.org/ivy/ivyde/history/latest-milestone/console.html](http://ant.apache.org/ivy/ivyde/history/latest-milestone/console.html)

将 Ivy 作为独立程序运行时，可以通过添加“-verbose”或“-debug”参数来更改消息级别。例如：java -jar ivy.jar -verbose

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-25T15:15:54.113

我只是想补充一点，如果您**在 Eclipse 中通过 Ant**运行 Ivy 任务，您可以将 Ivy 的详细级别设置为 -verbose，如下所示：

*   运行菜单 > 外部工具 > 外部工具配置
*   选择您正在运行的构建
*   将“-verbose”添加到参数文本区域

![在此处输入图像描述](../Images/ed0a8bd07c938708a15fa6745e7a961a.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-25T16:51:51.223

> [http://ant.apache.org/ivy/ivyde/history/latest-milestone/console.html](http://ant.apache.org/ivy/ivyde/history/latest-milestone/console.html)

通过 Zoop 的回答[SO：11744878/611007](https://stackoverflow.com/a/11744878/611007)

基本上：**日食>窗口>显示视图>其他>**类型：**控制台**

在应出现的控制台视图中，在右侧选择一个控制台： [![带有星形“新”符号的窗口状图标，下拉菜单包含“常春藤控制台”](../Images/046efc658e82d611b35c5d1539dbdc33.png)](https://i.stack.imgur.com/uD1nz.jpg)

在错误图标下拉列表中，您也可以选择日志级别：

[![包含不同日志级别的下拉列表的错误](../Images/0b8c37559295b705b6c3513853d012d7.png)](https://i.imgur.com/tQ0hWrk.jpg)

# apache-flex - flex videodisplay 不保持纵横比

> ID：11744539
> 
> 赞同：2
> 
> 时间：2012-07-31T16:13:50.467
> 
> 标签：apache-flex, actionscript, aspect-ratio, videodisplay

我在一个组中有一个 videoDisplay 组件，它的代码如下：

```
<mx:VideoDisplay id="videoDisplay" width="100%" height="100%"
                 maintainAspectRatio="true" 
                 creationComplete="videoDisplay_creationComplete();"
         addedToStage="videoDisplay_addedToStageHandler(event)"/> 
```

但是当我的应用程序调整大小时它不会保持纵横比，我该怎么办？我根据网络摄像头的输入显示视频..有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T16:33:50.340

所以问题似乎在于网络摄像头为视频显示提供了不正确的宽度和高度，您是否还可以共享将网络摄像头输入到视频显示的代码

谢谢拉吉

# android - 自定义视图触摸事件

> ID：11744542
> 
> 赞同：1
> 
> 时间：2012-07-31T16:13:55.977
> 
> 标签：android, android-layout, user-interface, touch

我正在尝试实现一个自定义视图，用户可以在其中用手指绘制。基本上，我正在关注[本教程](http://corner.squareup.com/2010/07/smooth-signatures.html)。

一切似乎都很好，但是，鉴于我在自定义视图下方还有 2 个按钮，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_color"
    tools:context=".MainActivity" 
    android:id="@+id/mainScreen" >

    <Button
        android:id="@+id/buttonSave"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true"
        android:text="@string/save" />

    <Button
        android:id="@+id/buttonQuery"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true"
        android:text="@string/query" />

    <com.example.myapp.DrawView
        android:id="@+id/drawView"
        android:background="@color/red"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_above="@id/buttonSave" />

</RelativeLayout> 
```

它实际上甚至在按钮下方绘制，我很难理解为什么它不只捕获发生在 DrawView 而不是在它之外的触摸事件。基本上，我不能从按钮上方开始画线，但是一旦我开始在我的视图上绘图，我什至可以将线延伸到它之外。

据我所知，DrawView 不会在按钮下方溢出，如此处所[讨论](https://stackoverflow.com/questions/11740252/aligning-controls)的，所以我想弄清楚发生了什么。我真的必须检查事件是否超出范围吗？它实际上是否将所有触摸事件委托给当前聚焦的视图？有没有办法改变这种行为？

[这个简单的教程](http://marakana.com/s/android_2d_graphics_example,1036/index.html)没有描述的问题，但它逐点绘制。

* * *

**更新：**调试应用程序时，我确定 drawView 的大小为 480x728，而 mainScreen 的大小为 480x800，因此它们不重叠。一旦获得焦点，即使它们在drawView之外触发，它也会继续注册触摸事件。这是我试图避免的，最好不要通过一个大的 if 语句传递事件坐标......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:32:08.500

如果您不希望按钮重叠，`DrawView`则使用 a`LinearLayout`将所有`View`s 分开。目前，从 XML 布局来看（并假设在代码中以编程方式布局没有任何奇怪的地方），您的*按钮*与`DrawView`.

我的印象是您将两个按钮并排放置在顶部，并`DrawView`填充下方的剩余屏幕区域。为此，请使用`LinearLayout`垂直方向的外部容器。它的第一个孩子是另一个`LinearLayout`水平方向的孩子，包含两个按钮。内部的第二个孩子`LinearLayout`是`DrawView`. 使用宽度、高度和重量属性来获得所需的尺寸。（或者，另一种方法是保留您拥有的 XML 布局结构，但在 上设置一些上边距`DrawView`以等于按钮的高度，这可以在 XML 布局中固定，或以编程方式完成。）

**编辑**对不起，我完全错过了这个`layout_above`属性，这使我的第二句话无效。在那种情况下，我不确定目前是否无法启动 Eclipse。`LinearLayout`无论如何尝试建议的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:28:31.887

事实证明，这是 Android 模拟器显示界面的方式中的一些奇怪的错误。它可能会在真实设备上执行类似的操作（甚至在侦听器视图之外抛出触摸事件），但由于它将显示限制为`drawView`，我可以安全地忽略它们，因为我只需要从`drawView`. 但是，它可能会在其他应用程序中引起大麻烦……

# php - 无法使用 $id 更新 mysql 表

> ID：11744544
> 
> 赞同：-1
> 
> 时间：2012-07-31T16:14:03.377
> 
> 标签：php, mysql, content-management-system, get, sql-update

我正在尝试使用编辑功能来编辑产品，例如小型 CMS。

问题是我不能用 $id = $_GET['id']; 更新我的 mysql 表。然后 $query = "UPDATE producten SET naam='$naam' WHERE id='$id'"; 我搜索了整个互联网，但找不到任何帮助。

当我尝试 $id = '50'; 例如，我不会更新 id 为 50 的产品。

如果我尝试 $id = $_GET['id']; 回声 $id; 我确实得到了正确的 ID。

这是我的完整代码：

```
 <?php           
        include "../php_includes/config.php";

        //Conect to the server/database
        if($connect){
            $errors = array();

        // check if the 'id' variable is set in URL, and check that it is valid
        if (isset($_GET['id']) && is_numeric($_GET['id']))
        {
        $id = $_GET['id'];
        }
        $query = mysql_query("SELECT * FROM producten WHERE id='$id'");
        while($query_row = mysql_fetch_assoc($query)){
                $naam_oud = $query_row['naam'];
                $naam_de_oud = $query_row['naam_de'];
                $prijs_oud = $query_row['prijs'];
                $image_oud = $query_row['image'];
        }
        //Display Posts
        if(isset($_POST['naam'],$_POST['naam_de'], $_POST['prijs'])){
            $naam = mysql_real_escape_string(htmlentities($_POST['naam']));
            $naam_de = mysql_real_escape_string(htmlentities($_POST['naam_de']));
            $prijs = mysql_real_escape_string(htmlentities($_POST['prijs']));
            $image = $_FILES['file']['name'];
            $tmp_name = $_FILES['file']['tmp_name'];

            if($image){
                $location = "product_foto/.$image";
                move_uploaded_file($tmp_name,$location);

            }else{
                $location = $image_oud;
            }
    //Errors
            if(empty($naam)){
                $errors[] = '<p class="error">Vul een nederlandse product naam in.</p>';
            }
            if(empty($naam_de)){
                $errors[] = '<p class="error">Vul een duitse product naam in.</p>';
            }

            if(empty($prijs)){
                $errors[] = '<p class="error">Vul een prijs in</p>';
            }
    //Insert Into Database
            if (empty($errors)){
                $query = "UPDATE producten SET naam='$naam',naam_de='$naam_de',prijs='$prijs', image='$location' WHERE id='$id'";
                    if (mysql_query($query)){
                        header('Location: ../admin/admin.php');die();               
                    } else{
                        $errors[] = '<p class="error">Oeps.. Er is iets verkeerd gegaan. Probeer later opnieuw.</p>';
                    }
    //Errors
            } else{
                foreach($errors as $error){
                echo $error;
                }
            }
        }
        }else{ 
            echo'<p class="error">Kan geen verbinding maken.<br/> Probeer later opnieuw.</p>';
        }
    ?>

            <form class="margin" action="<?php echo htmlentities($_SERVER['PHP_SELF']);?>" method="POST" enctype='multipart/form-data'>
                <strong>Product naam Nederlands</strong> <br/>  <input value="<?php echo $naam_oud;?> " id="focus" type="text" class="input_field" name="naam" maxlength="150" style="width:600px;"><br/><br/>
                <strong>Product naam Duits</strong> <br/>  <input id="focus" type="text" class="input_field" value="<?php echo $naam_de_oud;?>"name="naam_de" maxlength="150" style="width:600px;"><br/><br/>
                <strong> Prijs</strong> <br/> <input id="focus" type="text" class="input_field" name="prijs" value="<?php echo $prijs_oud;?> "maxlength="150" style="width:600px;"><br/>
                Vorm: euros,centen. zonder euro tekens. (Toevoegingen kunnen na het bedrag geplaatst worden.)<br/><br/>
                <strong> Foto</strong> <br/><input type="file" name="file"/><br/><br/>
                <br/><input type="submit" class="button" value="Bewerken" id="submit"/><a href="../admin/admin">Annuleren</a>
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:16:31.947

```
 // check if the 'id' variable is set in URL, and check that it is valid
    if (isset($_GET['id']) && is_numeric($_GET['id']))
    {
        $id = $_GET['id'];
    } 
```

您是否验证了这个 if 语句是真的并且 $id 确实设置了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T17:17:03.330

尝试这个

`"UPDATE producten SET naam='".$naam."', naam_de='".$naam_de."', prijs='".$prijs."', image='".$location."' WHERE id='".$id."'";`

# file - SFTP 使用 bash 脚本发送文件

> ID：11744547
> 
> 赞同：17
> 
> 时间：2012-07-31T16:14:07.267
> 
> 标签：file, bash, send, sftp

我正在使用密钥身份验证，所以密码不是问题。我有一个我知道名称的文件，我只是想通过 sftp 将它发送到另一台机器。

我尝试搜索，但在任何地方都找不到这个（看似简单的）问题。也许我的 Google-fu 今天让我失望了。

简而言之：我在本地机器上，想将文件（test.txt）发送到远程机器。已提供授权密钥。基本上我想自动化这三个步骤：

```
sftp root@remote:/root/dropoff
put test.txt
quit 
```

是否有一个简单的 bash 命令可以用来自动执行此操作？我见过的唯一选择是使用 bash 脚本来执行 put/quit 并使用 -b 选项来运行它。还有比这更干净的吗？（我对使用任何其他应用程序/工具不感兴趣。）

谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-07-12T22:51:59.203

[我知道这是一个旧的，但您也可以使用Here Document](http://www.tldp.org/LDP/abs/html/here-docs.html)将参数传递给命令

### 您可以将以下内容放入脚本中：

```
# The following is called a HERE document
sftp <user>@<remote> << SOMEDELIMITER 
  put test.txt
  ... # any commands you need to execute via sftp
  quit
SOMEDELIMITER 
```

每个额外的命令都将被输入到前面的命令中，`<<`并且`SOMEDELIMTER`可以是你想要的任何东西。

scp 是一个不错的选择，但是 sftp 是我在从 linux 推送到 windows 时能够使用的唯一工具，并且您在服务模式下使用 FreeSSHD 时被卡住了！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-31T16:26:17.847

您说您对其他工具不感兴趣，但是`scp`对于无人值守的文件传输来说，这是一个更好的选择。这是一个 scp 示例：

```
scp test.txt root@remote:/root/dropoff 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-10T13:12:18.843

当被问到这个问题时，我不知道 sftp 是如何配置的。无论如何，6 年后，您可以将像 PUT 这样的 sftp 命令放入一个文件中，然后在您的初始 sftp 调用中引用该文件。这使得整个过程完全非交互且易于配置：

```
sftp -i /path/to/ssh-key -b /path/to/sftp-commands.txt root@remote:/root/dropoff 
```

....其中 sftp-commands.txt 仅包含

```
put test.txt; quit 
```

# wordpress - Wordpress：缩略图帖子显示在主页帖子中，但并非所有类别帖子都显示

> ID：11744548
> 
> 赞同：0
> 
> 时间：2012-07-31T16:14:13.970
> 
> 标签：wordpress, thumbnails, categories, posts

主页显示帖子的缩略图...但是类别中列出的帖子并未显示所有帖子的缩略图..它显示某些帖子并且不显示某些帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:42:00.660

检查您的`category.php`模板是否包含主页使用的缩略图功能。

# asp.net - Windows Server 2008 R2 上的 WCF 服务问题

> ID：11744549
> 
> 赞同：1
> 
> 时间：2012-07-31T16:14:17.703
> 
> 标签：asp.net, wcf, iis-7, iis-7.5, windows-server-2008-r2

我有一个 WCF 服务在 Windows Server 2008 上运行而没有问题，只是将该服务移至 Windows Server 2008 R2 实例。站点和服务的域名都指向了新服务，并且 ASP.NET 站点运行良好。也就是说，WCF 服务在尝试运行 wsdl=wsdl10 命令时不断抛出 Endpoint not found 响应。

我尝试在 v3.0/Windows Communication Foundation 目录中安装 ServiceModelReg；编辑 applicationHost.config 文件以添加 .svc mimeType，我检查了 Handler Mappings 但 SVC 已经存在。我尝试从 4.0 目录运行 aspnet_regiis -iru。

没有任何效果。

然后我尝试删除并重新添加 WCF 激活和进程激活功能 - 那里没有帮助。我重新检查了 web.config 文件，但它使用域名而不是 IP 地址来定义端点的位置。

我完全被困住了——有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:46:06.840

事实证明，您需要在 Windows Server 2008 中将 Application Server 角色添加到 Web 服务器 (http://technet.microsoft.com/en-us/library/cc754024%28v=ws.10%29.aspx)以上。这可以解决大部分问题。

其次，包含网站的文件夹中的所有文件（包括 DLL、图像、所有内容）都需要向 IUsers 组提供读取和执行权限。

最后，如果您使用任何第 3 方 DLL，您需要确保 IIS 具有完全控制权 - [http://learn.iis.net/page.aspx/624/application-pool-identities/](http://learn.iis.net/page.aspx/624/application-pool-identities/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T14:22:41.727

我想在此添加第四个选项。

我的启用 AJAX 的 WCF 服务不工作，因为在服务器上应用程序有一个安全的 SSL 连接。你可以在这里找到更多：[MSDN](http://msdn.microsoft.com/en-us/library/aa751792.aspx "MSDN")

它指出：

> 只要包含服务的 IIS 虚拟目录支持这些设置，IIS 托管的 WCF 服务就可以利用 HTTP 传输安全性（例如，HTTPS 和 HTTP 身份验证方案，如 Basic、Digest 和 Windows 集成身份验证）。托管终结点绑定上的 HTTP 传输安全设置必须与包含它的 IIS 虚拟目录上的传输安全设置匹配。

这是解决它的一种方法：[如何以编程方式为 WCF 服务配置 SSL](http://www.wiktorzychla.com/2010/05/how-to-programmatically-configure-ssl.html)

# git - 使用 Git 维护并行工作分支

> ID：11744556
> 
> 赞同：2
> 
> 时间：2012-07-31T16:14:40.743
> 
> 标签：git, workflow, git-branch, git-merge

我正在处理的 Git 存储库有两个主要分支`alpha`和`beta`，它们都很相似，并且都在积极处理中。当我在处理一个特性时，它需要被提交到两个分支中。`alpha`尽管分支的内容几乎相同，但两者并没有共同的祖先`beta`。到目前为止，这都是我公司规定的；我对此无能为力。

我对如何将我在功能分支上执行的操作从这些分支之一复制到另一个功能分支感兴趣。

## 细节

目前，我的工作流程是在一个特性分支上工作`featA`，并定期从一个单独的特性分支上挑选`alpha`提交。这导致提交树看起来像下面这样：`featA``featB``beta`

```
A---B---C---E---F (featA)
         \
          D (alpha)

A'--B'--C'--E' (featB)
         \
          D' (beta) 
```

在这一点上，我将考虑签出`featB`并挑选提交`F`到该分支上。

这个过程通常可以正常工作，但是相当费力：我在一个分支上所做的任何事情都需要在另一个分支上重复。忘记这样做会产生导致错误的不一致，并且由于（例如）提交`B`和之间没有记录的相关性`B'`，因此追踪此类错误并非易事。

因为没有共同的父提交，而且我们偶尔会向其中一个提交`alpha`或`beta`不应该复制的提交，我认为我不能使用`git merge`将一个分支上的提交拉到另一个分支。

我可以做一些工作流程改进或自动化来将操作复制`featA`到其他分支`featB`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:16:24.693

用于`git cherry-pick`将提交复制到另一个分支。

[http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)

# c# - 在 C# 中如何使用 NEW_CREDENTIALS 模拟用户？

> ID：11744558
> 
> 赞同：1
> 
> 时间：2012-07-31T16:14:51.820
> 
> 标签：c#, c#-4.0, windows-services, impersonation

我正在开发一个系统，其中各种 Windows 服务在专用网络中的不同计算机上运行。网络中的任何计算机都可以运行与这些服务远程交互的客户端应用程序。作为我们软件包的一部分，我们的功能可以让用户查看网络中的任何服务是否遇到问题并重新启动其中的任何服务。

为了让它工作，我们使用了[用户模拟](http://www.codeproject.com/Articles/21050/Security-User-Impersonation)和[服务控制器类](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)：我们要求用户提供托管服务的计算机上的管理帐户的用户名和密码，模拟该管理员，然后使用 ServiceController 重新启动服务。这在大多数情况下都有效，但我们无法在我们的某些服务器上模拟管理员。我的理解是，要使用户模拟工作，被模拟的帐户必须在本地计算机上或 Active Directory 组的一部分，但有问题的服务器只有它们自己的本地帐户。

我注意到`LogonUser`启动模拟的方法有很多参数，并开始使用它们来查看是否有任何参数可以解决我的问题。当我尝试将 LogonType 值设置为“New Credentials”（9）时，我看到了一些奇怪（但可能有用）的行为：

*   我可以在以前无法使用的服务器上重新启动服务
*   如果我尝试重新启动已关闭的服务并提供不正确的密码，该服务仍会重新启动。

为什么我会看到这种行为？如果这样做的原因是好的，我可能会使用此设置来完全摆脱要求用户完全登录的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:14:51.820

我弄清楚发生了什么：

根据[Getting the Current username when impersonated](https://stackoverflow.com/questions/7613468/getting-the-current-username-when-impersonated)，当使用具有新凭据的登录类型的模拟时，被模拟的线程继续充当发送到本地计算机的所有命令的原始用户。它仅在向其他计算机发送命令时充当模拟用户。

这就是为什么我观察到我不需要提供正确的密码：如果我在服务器上有一个宕机的用户，然后我在该服务器上以管理员身份运行客户端应用程序并尝试重新启动它，那么它不会不管我提供什么凭据。模拟线程将继续使用管理员帐户，因为重新启动服务仅涉及与本地计算机交互。我输入的新凭据实际上被忽略了。

顺便说一句，这意味着当我尝试在本地计算机上重新启动服务时，我应该只能输入错误的用户名和密码。当我对此进行更多测试时，这就是我所观察到的。

这就是为什么看起来我不需要担心我输入了哪个密码。我如何访问在 Active Directory 组中没有帐户的计算机呢？根据[这篇文章](http://www.cstruter.com/blog/270)，“NewCredentials LogonType [...] 验证跨域。” 我不确定会发生什么，但看起来新凭据根本没有尝试针对 Active Directory 进行身份验证。我的猜测是，它将模拟凭据直接发送到正在访问的计算机，从而允许模拟本地帐户。

对于我正在处理的项目，这意味着当用户尝试重新启动服务时，我仍然需要向他们询问凭据，但现在他们可以在任何服务器上重新启动服务，即使它没有配置为具有 Active Directory 帐户。

# ios - iOS 错误消息：原因：'-[__NSArrayM 长度]：

> ID：11744560
> 
> 赞同：0
> 
> 时间：2012-07-31T16:14:54.930
> 
> 标签：ios, debugging, count, nsarray

所以我收到了这个错误信息

```
reason: '-[__NSArrayM length]: 
```

在我的程序中执行此行时

```
if (indexInTour == [tourArray count]-1) 
```

我不明白，因为这两个值都是在运行时定义的。

当从一个视图控制器推送视图控制器时，此代码运行良好，但从另一个视图控制器推送时会崩溃。

另外，我很困惑为什么

```
NSLog(@"%i", [tourArray count]); 
```

工作正常，而

```
if (indexInTour == [tourArray count]-1) // Crashes here 
```

没有。

一些附加信息：

代码：

```
NSLog(@"%i", [tourArray count]);
NSLog(@"%i", indexInTour);
NSLog(@"%@", NSStringFromClass([tourArray class]));
// NSLog(@"%@", tourArray);

if (indexInTour == [tourArray count]-1) // Crashes here 
```

输出：

```
2012-07-31 09:46:10.268 XXX[13374:11603] 7
2012-07-31 09:46:10.269 XXX[13374:11603] 2
2012-07-31 09:46:10.270 XXX[13374:11603] __NSArrayM 
```

完整的错误信息：

```
-[__NSArrayM length]: unrecognized selector sent to instance 0x7a97f60
2012-07-31 09:50:26.696 XXX[13456:11603] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM length]: unrecognized selector sent to instance 0x7a97f60' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:08:35.853

它看起来像释放问题。确保您的属性被声明为`strong`or 或`retain`。

编辑：

`tourArray`根据下面的评论，您的contains似乎`NSMutableArray`不是`NSString`.

# php - 使用 cURL 发送第一块 Google Docs 可恢复上传后的 503 响应

> ID：11744563
> 
> 赞同：1
> 
> 时间：2012-07-31T16:15:06.730
> 
> 标签：php, curl, google-docs-api, google-drive-api

我有一个 PHP 应用程序，它为用户提供了一些 Google Docs 集成，我正在尝试添加将文件直接上传到用户的 Docs 帐户的功能（我正在使用 PHP/cURL 滚动我自己，因为我的要求很简单而且我不想仅仅为了这个特性就弄乱 Zend Framework）。

我正在按照[https://developers.google.com/google-apps/documents-list/#uploading_a_new_document_or_file_with_content_only](https://developers.google.com/google-apps/documents-list/#uploading_a_new_document_or_file_with_content_only)和 [https://developers.google.com/gdata/docs/resumable_upload](https://developers.google.com/gdata/docs/resumable_upload)的说明进行操作，一切正常好的，直到我尝试发送第二个块，此时我总是收到来自服务器的 503 Service Unavailable 响应。

以下是完整的事件序列：

1) 我向上传 URI 发送带有以下标头的 POST：

```
Host: docs.google.com
GData-Version: 3.0
Authorization: Bearer (token removed for security reasons, but it's there and correct)
Content-Length: 0
Slug: gmk_google_upload_test.txt
X-Upload-Content-Type: text/plain
X-Upload-Content-Length: 2652 
```

服务器响应：

```
HTTP/1.1 200 OK
Server: HTTP Upload Server Built on Jul 30 2012 11:18:04 (1343672284)
Location: https://docs.google.com/feeds/upload/create-session/default/private/full?convert=false&upload_id=AEnB2Uoa4ba2XrKG58GU3uTSzKUKsQu_NfOUvyYDqW6iXwmHgBPiJsi1fg-RhxMVT7jAfd1o73fUtBaaZ1uLkwNwzT04NxQbuQ
Date: Tue, 31 Jul 2012 16:00:13 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 0
Content-Type: text/html; charset=UTF-8 
```

到现在为止还挺好。

2）我使用这些标头将第一个块（512字节）从响应中放入URL：

```
Host: docs.google.com
Content-Length: 512
Content-Type: text/plain
Content-Range: bytes 0-511/2652 
```

服务器响应：

```
HTTP/1.1 308 Resume Incomplete
Server: HTTP Upload Server Built on Jul 30 2012 11:18:04 (1343672284)
Date: Tue, 31 Jul 2012 16:00:14 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 0
Content-Type: text/html; charset=UTF-8 
```

这可能是我的问题的开始，因为我没有收到来自服务器的 Range 标头，如文档中所述。但是，似乎某些事情必须对我有用才能获得 308 Resume Incomplete 响应。

3）当我使用（我认为）正确的标题和下一个块的范围信息发送下一个块时：

```
Host: docs.google.com
Content-Length: 512
Content-Type: text/plain
Content-Range: bytes 512-1023/2652 
```

我总是从服务器得到这个响应：

```
HTTP/1.1 503 Service Unavailable
Server: HTTP Upload Server Built on Jul 30 2012 11:18:04 (1343672284)
Date: Tue, 31 Jul 2012 16:00:14 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, no-store, must-revalidate
Content-Length: 0
Content-Type: text/html; charset=UTF-8 
```

我尝试了不同类型的文件、块大小等，但我总是得到相同的结果。奇怪的是，如果我发送请求以尝试获取服务器已接收的字节数（根据上面的文档链接）：

```
PUT <upload_uri> HTTP/1.1
Host: docs.google.com
Content-Length: 0
Content-Range: bytes */100 
```

我收到 308 Resume Incomplete 响应（如预期的那样），但仍然没有 Range 标头。我确定我在某处做了一些愚蠢的事情，但我已经把头撞在墙上太久了，以至于我看不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:36:04.190

您是否考虑过使用较新的 Drive API？[PHP 库](http://code.google.com/p/google-api-php-client/)不基于 Zend 框架，文档包括[片段](https://developers.google.com/drive/v2/reference/files/insert)和[完整的 PHP 示例应用程序](https://developers.google.com/drive/examples/php)。

如果您仍想自己实现可恢复上传协议，您应该看看它在较新的 API 中是如何支持的，包括 Google Drive API：

[https://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T04:58:01.660

刚刚解决了同样的问题`Google drive`。

```
set size chunk = 256 * 1024 
```

# iphone - 我的应用程序中的许多字体文件导致 .xib 文件无法加载

> ID：11744569
> 
> 赞同：0
> 
> 时间：2012-07-31T16:15:18.637
> 
> 标签：iphone, ios

我的 iphone 应用程序中有 600 个字体文件，应用程序无法找到包含这 600 个文件的 .xib 文件。如果我删除 600 个文件，.xib 文件会正确加载，没有问题。

我检查了应用程序中资源文件数量的限制，但没有。此外，文件的大小只有 100MB，这是可以的。我不知道问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:31:27.393

好吧，我有好消息和坏消息。坏消息是你可能在 iOS 中遇到了一些软限制，因为 Apple 从未设想过有人想要在 iPhone 中使用这么多字体。

好消息（有点）是您可以直接从文件加载 CGFonts 和 CTFonts[请参阅链接](http://www.freetimestudios.com/2010/09/13/custom-fonts-on-the-ipad-and-ios-4/#load-the-font-into-memory)。不好的部分是您必须使用 Core Graphics 或 Core Text 进行绘图，因为这些东西不是免费桥接的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:46:57.567

谢谢你。这行得通。但是，它需要创建新层来写入而不是旧层..

这是完整的代码片段

```
#import <CoreText/CoreText.h>
#import <QuartzCore/QuartzCore.h>

CTFontRef ctfont =  [self newCustomFontWithName:@"cs" ofType:@"ttf" attributes:nil];
CATextLayer *  normalTextLayer_ = [[CATextLayer alloc] init];

normalTextLayer_.font = ctfont;
normalTextLayer_.string = @"alleluja";
normalTextLayer_.wrapped = YES;
normalTextLayer_.foregroundColor = [[UIColor purpleColor] CGColor];
normalTextLayer_.fontSize = 20.f;
normalTextLayer_.alignmentMode = kCAAlignmentCenter;
normalTextLayer_.frame = CGRectMake(0.f, 10.f, 320.f, 32.f);

[self.view.layer addSublayer:normalTextLayer_];    

CTFontRef cttFont =  [self newCustomFontWithName:@"cs" ofType:@"ttf" attributes:nil];
NSString *fontName = [(NSString *)CTFontCopyName(cttFont, kCTFontPostScriptNameKey) autorelease];

CGFloat fontSize = CTFontGetSize(cttFont);
NSLog(@"%f fontName = '%@'",fontSize,fontName);
UIFont *font = [UIFont fontWithName:fontName size:fontSize];
UITextView * xx = [[UITextView alloc] initWithFrame:CGRectMake(0, 100, 320, 200)];
xx.text = @"alleluja";
xx.font = font;

[self.view addSubview:xx]; 
```

# biztalk - 在 SSO 中存储可配置值

> ID：11744571
> 
> 赞同：3
> 
> 时间：2012-07-31T16:15:30.553
> 
> 标签：biztalk, single-sign-on, biztalk-2010, custom-pipeline-component

我需要在 SSO 中存储可配置的值，并在运行时在自定义管道组件中检索它们

有关此的任何帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:48:28.943

有关在 SSO 中存储值的帮助，请参阅[此帖子](https://stackoverflow.com/a/10108241/569662)。

至于在管道组件中检索它们，您可以创建一个辅助函数。像这样的东西会起作用：

```
using System;
using System.Collections;
using System.Collections.Specialized;
using Microsoft.BizTalk.SSOClient.Interop;

/// <summary>
/// Contains helper methods for using SSO as a config store.
/// </summary>
public static class SSOConfigHelper
{
    /// <summary>
    /// Can be set to anything
    /// </summary>
    private static string idenifierGUID = "ConfigProperties";

    /// <summary>
    /// Read method helps get configuration data
    /// </summary>        
    /// <param name="appName">The name of the affiliate application to represent the configuration container to access</param>
    /// <param name="propName">The property name to read</param>
    /// <returns>
    /// The value of the property stored in the given affiliate application of this component.
    /// </returns>
    public static string Read(string appName, string propName)
    {
        try
        {
            SSOConfigStore ssoStore = new SSOConfigStore();
            ConfigurationPropertyBag appMgmtBag = new ConfigurationPropertyBag();
            ((ISSOConfigStore)ssoStore).GetConfigInfo(appName, idenifierGUID, SSOFlag.SSO_FLAG_RUNTIME, (IPropertyBag)appMgmtBag);
            object propertyValue = null;
            appMgmtBag.Read(propName, out propertyValue, 0);
            return (string)propertyValue;
        }
        catch (Exception e)
        {
            System.Diagnostics.Trace.WriteLine(e.Message);
            throw;
        }
    }
}

// The code above uses this propertybag
public class ConfigurationPropertyBag : IPropertyBag
{
    /// <summary>
    /// The properties
    /// </summary>
    private HybridDictionary properties;

    /// <summary>
    /// Initializes a new instance of the ConfigurationPropertyBag class
    /// </summary>
    internal ConfigurationPropertyBag()
    {
        this.properties = new HybridDictionary();
    }

    #region IPropertyBag Members
    /// <summary>
    /// Implements IPropertyBag read
    /// </summary>
    /// <param name="propName">IPropertyBag propName</param>
    /// <param name="ptrVar">IPropertyBag ptrVar</param>
    /// <param name="errorLog">IPropertyBag errLog</param>
    public void Read(string propName, out object ptrVar, int errorLog)
    {
        ptrVar = this.properties[propName];
    }

    /// <summary>
    /// Implements IPropertyBag write
    /// </summary>
    /// <param name="propName">IPropertyBag propName</param>
    /// <param name="ptrVar">IPropertyBag ptrVar</param>
    public void Write(string propName, ref object ptrVar)
    {
        this.properties.Add(propName, ptrVar);
    }
    #endregion

    /// <summary>
    /// Searches for property key
    /// </summary>
    /// <param name="key">key of kv pair</param>
    /// <returns>true if key found</returns>
    public bool Contains(string key)
    {
        return this.properties.Contains(key);
    }

    /// <summary>
    /// Removes property
    /// </summary>
    /// <param name="key">key of kv pair</param>
    public void Remove(string key)
    {
        this.properties.Remove(key);
    }
} 
```

（如果对您有帮助，也请点赞链接的帖子）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T16:14:00.203

您可以访问以下链接。它包含您需要的所有信息

[http://social.technet.microsoft.com/wiki/contents/articles/6494.biztalk-server-application-configuration-options.aspx](http://social.technet.microsoft.com/wiki/contents/articles/6494.biztalk-server-application-configuration-options.aspx)

# function - Lua 中的 LZW 压缩

> ID：11744573
> 
> 赞同：1
> 
> 时间：2012-07-31T16:15:36.507
> 
> 标签：function, dictionary, lua, compression, lzw

这是 Lempel-Ziv-Welch 压缩的伪代码。

```
 pattern = get input character
 while ( not end-of-file ) {
     K = get input character
     if ( <<pattern, K>> is NOT in 
             the string table ){
         output the code for pattern
         add <<pattern, K>> to the string table
         pattern = K
     }
     else { pattern = <<pattern, K>> }
 }
 output the code for pattern
 output EOF_CODE 
```

我正在尝试在 Lua 中对此进行编码，但它并没有真正起作用。这是我在 Python 中以 LZW 函数为模型的代码，但在第 8 行出现“尝试调用字符串值”错误。

```
 function compress(uncompressed)

 local dict_size = 256
 local dictionary = {}

 w = ""
 result = {}
 for c in uncompressed do
  -- while c is in the function compress
     local wc = w + c
     if dictionary[wc] == true then
         w = wc
     else
         dictionary[w] = ""
         -- Add wc to the dictionary.
         dictionary[wc] = dict_size
         dict_size = dict_size + 1
         w = c
    end
 -- Output the code for w.
 if w then
   dictionary[w] = ""
 end
 end
 return dictionary
 end

 compressed = compress('TOBEORNOTTOBEORTOBEORNOT')
 print (compressed) 
```

我真的很想得到一些帮助，或者让我的代码运行，或者帮助我在 Lua 中编写 LZW 压缩。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:28:33.883

假设`uncompressed`是一个字符串，你需要使用类似这样的东西来迭代它：

```
for i = 1, #uncompressed do
  local c = string.sub(uncompressed, i, i)
  -- etc
end 
```

第 10 行还有一个问题；`..`用于 Lua 中的字符串连接，所以这一行应该是`local wc = w .. c`.

关于字符串连接的性能，您可能还想阅读[这篇文章。](http://www.lua.org/pil/11.6.html)长话短说，将每个元素保存在表格中并使用`table.concat()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:48:10.097

您还应该在[这里](http://www.wowace.com/addons/libcompress/files/39-r49-release-nolib/)查看下载 Lua 中高性能 LZW 压缩算法的源代码...

# html - 带有 z-index 的 google+ 圈子 css 溢出

> ID：11744578
> 
> 赞同：0
> 
> 时间：2012-07-31T16:15:50.757
> 
> 标签：html, css

我有一些类似 Google+ 的圈子，但我似乎无法让该`overflow`物业与他们合作。我认为这与`z-index`圆圈的属性有关，尽管我尝试将`z-index`div 设置为覆盖它而没有运气。

[**jsFiddle**](http://jsfiddle.net/XEwBm/22/)

**HTML：**

```
<div class="container">
   <div class="circle">
      <div class="outer-circle"></div>
      <div class="middle-circle"></div>
      <div class="inner-circle">4</div>
   </div>
   <div class="circle">
      <div class="outer-circle"></div>
      <div class="middle-circle"></div>
      <div class="inner-circle">3</div>
   </div>
   <div class="circle">
      <div class="outer-circle"></div>
      <div class="middle-circle"></div>
      <div class="inner-circle">2</div>
   </div>
   <div class="circle">
      <div class="outer-circle"></div>
      <div class="middle-circle"></div>
      <div class="inner-circle">1</div>
   </div>
</div>​ 
```

**CSS：**

```
div.container {
    height: 125px;
    width: 400px;
    overflow: scroll;
    border: 1px solid black;
}
div.circle {
    margin-left: 10px;
    margin-right: 10px;
    width: 130px;
    height: 130px;
    float: left;
}
div.circle:hover {
    cursor: pointer;
}
div.outer-circle {
    background: transparent;
    width: 122px;
    height: 122px;
    -webkit-border-radius: 61px;
    -moz-border-radius: 61px;
    border-radius: 61px;
    border: 1px solid #aaaaaa;
    position: absolute;
    z-index: 800;
    -webkit-transition: all .2s ease-in-out;
    -moz-transition: all .2s ease-in-out;
    -o-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
}
div.outer-circle.hover {
    -moz-transform: scale(1.45);
    -webkit-transform: scale(1.45);
    transform: scale(1.45);
}
div.middle-circle {
    margin: 1px;
    width: 122px;
    height: 122px;
    -webkit-border-radius: 61px;
    -moz-border-radius: 61px;
    border-radius: 61px;
    background: #ececec;
    background: -moz-linear-gradient(top, #ececec 0%, #d8d8d8 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ececec), color-stop(100%,#d8d8d8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #ececec 0%,#d8d8d8 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #ececec 0%,#d8d8d8 100%); /* Opera11.10+ */
    background: -ms-linear-gradient(top, #ececec 0%,#d8d8d8 100%); /* IE10+ */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ececec', endColorstr='#d8d8d8',GradientType=0 ); /* IE6-9 */
    background: linear-gradient(top, #ececec 0%,#d8d8d8 100%); /* W3C */
    position: absolute;
    z-index: 900;
    -webkit-transition: all .2s ease-in-out;
    -moz-transition: all .2s ease-in-out;
    -o-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
}
div.middle-circle.hover {
    -moz-transform: scale(1.4);
    -webkit-transform: scale(1.4);
    transform: scale(1.4);
}
div.inner-circle {
    margin: 14px;
    background: #3C4049;
    width: 96px;
    height: 96px;
    font-size: 11px;
    color: #FFF;
    line-height: 96px;
    text-align: center;
    font-family: Arial;
    -webkit-border-radius: 48px;
    -moz-border-radius: 48px;
    border-radius: 48px;
    -webkit-box-shadow: inset 0px 1px 1px 0px #575757;
    -moz-box-shadow: inset 0px 1px 1px 0px #575757;
    box-shadow: inset 0px 1px 1px 0px #575757;
    border-bottom: 1px solid #FFF;
    position: absolute;
    z-index: 1000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:21:24.480

尝试这个：

```
div.container {
    height: 125px;
    width: 400px;
    overflow: auto;
    border: 1px solid black;
    position: relative;
}
div.circle {
    margin-left: 10px;
    margin-right: 10px;
    width: 130px;
    height: 130px;
    float: left;
    position: relative;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/RNbZg/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:23:26.670

多么巧合。我只是在寻找一种使用滚动条将元素扩展到其他元素之外的方法，而您偶然发现了它。

要解决此问题，只需添加`position: relative;`到您的`div.container`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:18:45.480

`style="overflow:visible"`? 如果这不是您所要求的，请更具体地说明您想要发生的事情。

# php - 将数据从 MySQL 传输到 javascript

> ID：11744582
> 
> 赞同：0
> 
> 时间：2012-07-31T16:15:59.787
> 
> 标签：php, javascript, mysql, json, multidimensional-array

我是 MySQL 的新手。我想将数据从 MySQL 表传输到 javascript。我想使用 MySQL 中的表在 javascript 中创建一个多维数组。这个多维数组将用于其他函数进行计算。有没有办法使用 PHP 或 JSON 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:17:52.787

从 PHP 页面中的数据库表中读取记录并创建[`JSON`](http://json.org/)并将其发送到 Javascript。JSON 可以保存任何级别的分层数据。

样本`JSON`可能看起来像这样

```
[
    {
        "Customers": [
                      { "Name": "Steve",  "ID": "A12"  },
                      { "Name": "Mark",  "ID": "A22"  }
                     ]
    }
] 
```

[JsonLint](http://jsonlint.com/)`JSON`在处理数据时是一个有用的工具。它可以验证 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:21:04.740

如果要在初始页面加载时填充 javascript 数据，可以执行以下操作：

```
<?php
// get stuff from DB
$array_from_db = ... // some value determined via MySQL queries
?>
<script type="text/javascript">
var db_array = <?php echo json_encode($array_from_db); ?>
</script>
<?php
// more PHP stuff 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T16:28:39.210

这应该工作

```
<?php
  var query=mysql_query("SELECT fields FROM table WHERE condition");
  while($obj=mysql_fetch_array($query)){
    arr[]=$obj
  }
  $array=json_encode($arr);
?>
<script type="text/javascript">
  var db_array = <?php echo $array; ?> 
</script> 
```

# javascript - 关于 jquery.off 和下拉菜单

> ID：11744584
> 
> 赞同：0
> 
> 时间：2012-07-31T16:16:05.233
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 bootstrap-dropdown 生成一个下拉菜单。
我想通过使用 jQuery.off 来禁用一些默认行为。

1）如何禁用特定元素而不是所有元素的下拉菜单消失？
2）如何禁用菜单在特定元素而不是所有元素上的出现？

通过使用以下代码，我达到了我的目标，我想将此行为应用于特定元素而不是所有文档。

```
$('html').off('click.dropdown'); // it disable the disappear of Dropdown menu.
$('body').off('click.dropdown'); // it disable  the appearing of Dropdown menu. 
// Why this differance? 
```

.​​​​​</p>

这是测试代码的[jsfiddle](http://jsfiddle.net/AVaqX/2)链接。感谢@merv 制作了 jsfiddle。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:38:40.547

您只能使用该`off()`方法禁用对已具有绑定的特定元素的绑定。在指出时`$('html').off()`，我只是想证明自动关闭下拉菜单的唯一绑定附加在那里。

否则，您可以向下拉菜单中的元素添加新绑定，以阻止点击事件冒泡到`html`元素：

```
$('.dropdown-menu').on('click.dropdown', function(e) {e.stopPropagation()})​​​​​ 
```

## [JSFiddle](http://jsfiddle.net/AVaqX/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:20:43.450

```
$(".disabled-link").click(function(event) {
  event.preventDefault();
});​ 
```

将“禁用链接”类添加到您不想工作的任何下拉列表中

# android - 如何在其 onCreate 方法中取消或关闭自定义对话框？

> ID：11744587
> 
> 赞同：6
> 
> 时间：2012-07-31T16:16:21.227
> 
> 标签：android, android-dialog

我创建了一个名为`MyCustomDialog`extends的自定义对话框`Dialog`。我创建并显示我的自定义对话框，如下所示：

```
new MyCustomDialog(myContext).show(); 
```

我重写了`Dialog.onCreate(Bundle savedInstanceState)`进行初始化的方法。我还在此方法中检查某个条件是否成立，如果不成立，我想关闭/取消我的对话。我已经尝试在我的对话框和方法中调用 and 方法，但`cancel()`它没有效果。`dismiss()``onCreate(Bundle savedInstanceState)``onStart()`

任何人都知道如何在对话框显示之前取消或关闭对话框（从对话框中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:19:13.983

您应该放置逻辑以确定对话框是否要在`onCreate()`方法之外显示。它不属于那里。

或者，重命名您的`show()`方法`showIfRequired()`（或其他名称），并在那里添加条件显示逻辑。

我知道这在技术上并不能回答您的问题，但是您尝试做的不是正确的设计。这是一件好事，因为以正确的方式做事实际上更简单。

此外，作为旁注，您应该使用[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)来支持`Dialog`. 它在 v4 支持库中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:26:04.500

这适用于 API 级别 10 及以下：

首先，您应该在 Activity 类中覆盖 onCreateDialog(int id, Bundle args) ，这是您在做什么吗？对话框始终作为 Activity 的一部分创建和显示。其次，我认为您不能取消/关闭 onCreateDialog 中的对话框，因为在调用 onCreateDialog 时它实际上并没有被创建。也就是说，您不能取消/关闭尚未创建的内容。您可以尝试改写 onPrepareDialog() 并检查以取消/关闭那里的对话框。此时实际上应该已经创建了对话框（只是没有显示），因此如果您在那里调用取消/关闭，您将能够阻止它显示。

onPrepareDialog() 是对即将显示的对话框进行任何类型的检查和决策的适当位置。这适用于 Honeycomb 之前的 API。

这适用于 API 11 及更高版本：

如果您使用的是更高版本的 API，则应改为扩展 DialogFragment。在这种情况下，我认为您可以在 DialogFragment 的 onCreateView() 方法中处理决策，该方法类似于 onPrepareDialog()。

我希望你已经阅读了这个：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

或者这个，取决于你的 API：

[http://developer.android.com/reference/android/app/DialogFragment.html](http://developer.android.com/reference/android/app/DialogFragment.html)

总的来说，也许一个更干净的解决方案是禁用导致对话框首先出现的按钮或机制？也就是说，编写代码使得 Dialog.show() 仅在真正需要调用时才被调用。我必须知道更多关于你到底想要做什么的细节。例如，假设您从按钮的 onClickListener 调用 Dialog.show()。您真的不希望用户按下按钮，期待一个对话框，但由于用户不理解的某种原因而没有显示它。更好的解决方案是一起禁用该按钮，这样用户就可以清楚地看到，由于应用程序中的其他原因，此功能不可用。

# java - 如何在不阻止调用 action 和 actionListener 的情况下禁用 h:commandButton？

> ID：11744597
> 
> 赞同：3
> 
> 时间：2012-07-31T16:16:38.140
> 
> 标签：java, jsp, jsf, jsf-2

我有一个简单的脚本标签，其中包含一个包含在 html 正文底部的函数。此脚本只是禁用提交按钮。然后我有一个`onclick`调用该函数的事件。

我在 5 个不同的页面中有此代码，它适用于五个页面中的三个。

这是代码：

```
<!-- more non-important html -->

<h:commandButton id="buttonToDisable" 
    value="some text"
    action="#{myBean.myBeansAction}" 
    actionListener="#{myBean.myBeansActionListener}" 
    onclick="disableButton()">

    <!-- I also have an f:param in some of these pages but I didn't 
    think that would matter -->

</h:commandButton>

<!--  more non-important html -->

<script>
    function disabledButton() {
        document.getElementById("myForm:buttonToDisable").disabled = 'true';
    }
</script> 
```

任何帮助将不胜感激。有效和无效的页面之间的唯一区别是`action`和`actionListeners`是不同类型的 bean，有些有`f:params`，有些没有。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T18:42:52.463

我了解您的具体问题是，一旦禁用按钮，就不会调用支持 bean 的操作？这可能是非常真实的。JSF 根据与组件的 HTML 表示相关联的请求参数名称的存在来确定要调用的操作`UICommand`。但是，当禁用 HTML 输入/按钮元素时，它的 name=value 将根本不会作为请求参数发送（因此 JSF 将无法确定要调用的操作）。`onclick`即在发送表单提交请求*之前*调用该属性。

您想在表单提交请求发送到服务器端*后禁用该按钮。*到目前为止给出的代码，唯一的方法是`button.disabled=true`在约 50 毫秒的超时后调用。

```
<h:commandButton ... onclick="setTimeout('document.getElementById(\'' + this.id + '\').disabled=true;', 50);" /> 
```

但是，如果您使用的是 JSF 2.0 `<f:ajax>`，那么还有另一种更强大和更全球化的方式：

```
function handleDisableButton(data) {
    if (data.source.type != "submit") {
        return;
    }

    switch (data.status) {
        case "begin":
            data.source.disabled = true;
            break;
        case "complete":
            data.source.disabled = false;
            break;
    }    
}

jsf.ajax.addOnEvent(handleDisableButton); 
```

在对您有用的情况下，该按钮很可能是启用了 ajax 的按钮。事先禁用该按钮没有副作用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T17:20:22.873

您应该在单击事件之后从服务器端 actionListener 设置 commandButton 组件的启用状态。

```
<h:commandButton disabled="#{managedBean.someBooleanPropertyThatWasToggledInTheEvent}" /> 
```

您可以在调用服务器端事件后简单地设置托管属性，它将在页面刷新时被禁用。

**更新：**

我刚刚意识到 OP 有一个完全不同的问题。用户不耐烦并单击按钮而不是等待回发。然而，禁用命令按钮有时会阻止调用服务器端操作。

解决这个问题的正确方法是在页面上放置一个绝对位置的 div 覆盖，其 z-index 比页面上的任何其他元素都高。这将防止在覆盖 div 之外的任何内容上发生进一步的点击。这是一个例子：

**CSS 样式**

```
.div-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #000;
    filter:alpha(opacity=50);
    -moz-opacity:0.5;
    -khtml-opacity: 0.5;
    opacity: 0.5;
    z-index: 10000;
} 
```

**利用 jQuery fadeToggle 功能的 Javascript 切换功能**

```
function toggleLoadingOverlay() {
  var div = jQuery('.div-overlay');
  div.fadeToggle(150);
} 
```

** JSF commandButton onclick 事件，一旦单击按钮就会发生（并假设事件传播没有被中断）**

```
<h:commandButton onclick="toggleLoadingOverlay();" action="..." /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-05T20:05:49.043

我尝试了@maple_shaft 建议的解决方案，但 opaque/toggleFade() div*总是*吸收击键，即使它是 opacity=0。这是我的答案：

```
<script type="text/javascript">
    function overlayToFront()
    {
        document.getElementById("div-overlay").style.zIndex = "10000";
    }
</script> 
```

页：

```
<... id="form1"> <!-- in the existing code, some component with id="form1" in my case it was a:form -->
    <div id="div-overlay" 
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000;
            filter:alpha(opacity=0); -moz-opacity:0.0; -khtml-opacity: 0.0; opacity: 0.0;
            z-index: -10000; cursor: wait;">
        <!-- lay out a transparent div in the background.
        Buttons with onclick="overlayToFront();" can prevent double-clicks by covering the whole GUI when this div gets moved to the front
        Currently only used in one place, but any button with reRender="form1" should be able to to this
        -->
    </div>
    <div id="div-base-layer"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000;
            filter:alpha(opacity=0); -moz-opacity:0.0; -khtml-opacity: 0.0; opacity: 0.0;
            z-index: -1;" > <!-- rendered "on top of" div-overlay, so cursor does not change when moving off the legacy part of the page -->
    </div>
    <div>
        <!-- this is where the legacy part of the page, the contents of the component with id="form1" goes. it did not have a position: attribute in the original code so z-index does not affect it -->
    </div>
</ ...> <!-- end of tag with id="form1"  --> 
```

# c# - 与 C# .Net 一起使用的 Qt 非托管 C++ 类

> ID：11744602
> 
> 赞同：2
> 
> 时间：2012-07-31T16:16:54.290
> 
> 标签：c#, c++, dll, com-interop

我现在需要一些帮助。如果有人可以帮助我们“转移”我的基于 QT 的代码以使用我的 C# 应用程序，我会很高兴。

假设我有这个简单的 QT 类：

```
class ItShouldWork : public QObject
{
    Q_OBJECT

public:
    ItShouldWork(QObject* parent = 0) : QObject(parent){}
    QString id() const { return objectName(); }

}; 
```

现在我希望能够使用 Visual Studio C# 访问这个类，我尝试创建一个非托管 dll 并通过一个包装器访问，尝试创建一个 COM 组件但现在我完全卡住了，所以我要回到从这个简单的类开始。我已经看到您可以像这样使用带有 __declspec(dllexport) 的外部“C”：

```
extern "C" __declspec(dllexport) double Subtract(double a, double b) 
```

然后在 .net 中使用 _dllImport，这适用于上面的函数，但是当向它添加例如 QString 时，它不再识别我的 dll 并抛出 dllNotFoundException。

然后我想也许你需要某种包装，是的，那你怎么做..？用谷歌搜索，但没有什么能真正帮助我使用 c++ 和 qt 函数。

一步一步地介绍如何创建 dll 和 c-wrapper 或直接创建 COM 组件 dll 会很棒，我真的不在乎它是如何完成的，但如果你知道方法，请帮助我提供一个小教程？我要疯了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:43:05.153

我认为 C++/CLI 是要走的路。看：[使用 C++/CLI 包装非托管 C++ - 一种正确的方法](https://stackoverflow.com/questions/4642702/wrapping-unmanaged-c-with-c-cli-a-proper-approach)

特别是：http: [//www.delmarlearning.com/companions/content/1592009638/bonus/009638_BonusCh02.pdf](http://www.delmarlearning.com/companions/content/1592009638/bonus/009638_BonusCh02.pdf)

在论坛帖子中深入探讨该主题并不容易。但是通过一些研究，您应该能够很快地创建一些可用的东西。如果您来自 C/C++，C++/CLI 需要一些时间来适应。它的限制性更强，尤其是在混合托管和非托管类型方面。但是文献会引导你到达那里。

编辑：作为对 OP 对我的回答的评论的回应（另见 Ramhound 的评论，我），这是我在[这里](http://code.msdn.microsoft.com/windowsdesktop/CppCLINativeDllWrapper-29c32acd/sourcecode?fileId=53179&pathId=916866292)得到的一个例子：看看链接后面的内容以查看 m_impl 的上下文...

```
String ^ CSimpleObjectWrapper::ToString(void) 
{ 
    wchar_t szStr[100]; 
    HRESULT hr = m_impl->ToString(szStr, ARRAYSIZE(szStr)); 
    if (FAILED(hr)) 
    { 
        Marshal::ThrowExceptionForHR(hr); 
    } 
    // Marshal PWSTR to System::String and return it. 
    return gcnew String(szStr); 
} 
```

编辑 2：还取决于您的包装器所需的深度/复杂性/功能，您可能会考虑将您的类包装在 C++/CLI“ref class”es 中，而不是使用 DllImport。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:34:30.733

您可以在托管 C++ 上创建包装器。然后，您将能够在 c# 中使用托管类。检查这个，它可能会帮助你[http://msdn.microsoft.com/en-us/library/ms235638.aspx](http://msdn.microsoft.com/en-us/library/ms235638.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T17:44:04.067

看看[http://doc.qt.nokia.com/4.7-snapshot/activeqt-dotnet.html](http://doc.qt.nokia.com/4.7-snapshot/activeqt-dotnet.html)。它有一些关于使用 ActiveQT 的信息，根据网站：

> Qt 的 ActiveX 和 COM 支持允许 Qt for Windows 开发人员： 访问和使用任何 ActiveX 服务器在其 Qt 应用程序中提供的 ActiveX 控件和 COM 对象。使他们的 Qt 应用程序可用作 COM 服务器，并将任意数量的 Qt 对象和小部件用作 COM 对象和 ActiveX 控件。

该页面还包含有关如何与 .Net 集成的示例。

# c# - 访问asp.net gridview编辑控件

> ID：11744604
> 
> 赞同：1
> 
> 时间：2012-07-31T16:17:02.867
> 
> 标签：c#, asp.net, gridview, calendar, edit

我想在编辑gridview行时通过c#访问日历控件。但是，我不确定如何通过后面的 C# 访问它。

我想做以下事情：

```
cal_SelectionChanged(object sender, EventArgs e)
{
date = cal.SelectedDate

blah blah...
} 
```

但是，由于控件位于 gridview 编辑模板中，因此与日历只是普通 asp.net 页面上的一个元素相比，我找不到将其访问到 C# 的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:37:09.300

正如您似乎知道的那样，无法直接访问`Template`基于控件（例如`<asp:Repeaters>`）中的控件，就像您将控件直接放置在页面/用户控件/母版页中一样。可以使用控件中特定项目上的“FindControl”找到它，但应该有更简单的方法......

在这种情况下，您应该能够将`SelectionChanged`日历控件上的事件处理程序设置为代码隐藏中的函数。（这是假设您使用的是内置[日历控件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar%28v=vs.80%29.aspx)）类似...

```
<asp:Calendar runat="server" OnSelectionChanged="cal_SelectionChanged"> ... </asp:Calendar> 
```

当调用诸如此类的事件时，导致事件的对象（在本例中为日历控件）通过`sender`参数传递给函数。

这意味着您无需尝试确定单击了哪个日历，而只需执行此操作...

```
cal_SelectionChanged(object sender, EventArgs e)
{
  Calendar cal = (Calendar)sender;
  date = cal.SelectedDate;
  blah blah...
} 
```

# android - Android App --> 显示本地新闻

> ID：11744618
> 
> 赞同：0
> 
> 时间：2012-07-31T16:17:34.263
> 
> 标签：android

我正在开发一个 android 应用程序，但不确定是否存在这样的东西或者如何处理它。我会很感激任何建议。

在这个应用程序中，我想要一个只显示某个邮政编码的本地新闻的屏幕。我当然会输入邮政编码，但是一旦我这样做了，它就会从那里拿走它。

做这个的最好方式是什么？

我读过一些关于 RSS 提要的内容。这是要走的路吗？是否有一种特殊的 RSS 感觉可以让我输入邮政编码……如果是这样，我如何在我的应用程序页面中显示此内容？

也许有一个专门为 android 应用程序执行此操作的网站，我只需要为此网页设置一个 url 即可使用信息？

抱歉，如果我对此不太了解。这是我的第一个应用程序，我非常感谢知道如何最好地解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:26:41.463

谷歌新闻提供“您附近的信息”。它使用地理位置来了解您的位置并显示您所在地区发生的新闻，也许您可​​以使用它。

您还可以使用他们为特定区域提供的 RSS，例如加利福尼亚：

[http://news.google.com/news?hl=en&gl=us&as_occt=any&as_qdr=a&as_nloc=california&authuser=0&q=location:california&um=1&ie=UTF-8&output=rss](http://news.google.com/news?hl=en&gl=us&as_occt=any&as_qdr=a&as_nloc=california&authuser=0&q=location:california&um=1&ie=UTF-8&output=rss)

# c# - 使用 Windows SORT 命令就地排序

> ID：11744620
> 
> 赞同：0
> 
> 时间：2012-07-31T16:17:41.790
> 
> 标签：c#, sorting, cmd, dos

我正在使用 Window 7 的 SORT 命令对 .csv 文件进行排序，当我将结果输出到单独的 csv 文件时，该命令可以正常工作，但我需要进行就地排序。

代码如下。

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo= new System.Diagnostics.ProcessStartInfo();
        startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        startInfo.FileName = "cmd.exe";
        startInfo.Arguments = "/C sort C:\\Users\\fFayyaz\\Desktop\\12.csv > C:\\Users\\fFayyaz\\Desktop\\12.csv";

        process.StartInfo = startInfo;
        process.Start(); 
```

上面的代码清空了整个源文件。如果我执行 /C 排序文件名，它不会对文件进行排序。但是，如果源和目标不同，上面的代码可以完美运行。有人可以帮助进行就地排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:22:25.767

你不能就地排序。**您可以通过重命名**文件以在临时文件中排序来模拟效果，然后启动命令将重命名的文件转换为旧文件名。添加圆顶事务性以检查是否有错误，将旧文件以原始名称复制回来。

注意：我们不能进行就地排序并且源文件是空的，因为该命令在写入之前清除了输出文件，并且由于输出和输入文件相同，它会丢失数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:05:15.730

从中得出的结论是，Windows 的排序是不可能的。但它是，考虑到它设计使用临时文件。所以为了澄清： **排序/？** 显示 /O 选项以指定输出文件 - 只需使用与输入相同的内容，即可获得就地排序。

# bash - bash：并行运行 cURL 比一个接一个慢

> ID：11744621
> 
> 赞同：0
> 
> 时间：2012-07-31T16:17:42.313
> 
> 标签：bash, curl

我们必须在每次上传后缓存相当大的数据数据库，因此我们创建了一个 bash 脚本来为我们处理它。该脚本应该启动 4 次并行卷曲到站点，一旦完成，从我们存储在文件中的 URL 列表中启动下一个。

理论上一切正常，如果我们从本地机器运行 4 个进程到目标站点，这个概念就可以工作。

如果我设置 MAX_NPROC=1，curl 需要的时间与浏览器点击 URL 时一样长，即 20 秒。如果我设置 MAX_NPROC=2，请求所用的时间会增加三倍。

我错过了什么吗？这是一个让我们慢下来的 apache 设置吗？或者这是我缺少的秘密 cURL 设置？

任何帮助将不胜感激。请在下面找到 bash 脚本

```
#!/bin/bash

if [[ -z $2 ]]; then
    MAX_NPROC=4 # default
else
    MAX_NPROC=$2
fi

if [[ -z $1 ]]; then
    echo "File with URLs is missing"
    exit
fi;

NUM=0
QUEUE=""

DATA=""
URL=""

declare -a URL_ARRAY
declare -a TIME_ARRAY
ERROR_LOG=""

function queue {
    QUEUE="$QUEUE $1"
    NUM=$(($NUM+1))
}

function regeneratequeue {
    OLDREQUEUE=$QUEUE

    echo "OLDREQUEUE:$OLDREQUEUE"

    QUEUE=""
    NUM=0
    for PID in $OLDREQUEUE
    do
        process_count=`ps ax | awk '{print $1 }' | grep -c "^${PID}$"`

        if [ $process_count -eq 1 ] ; then
            QUEUE="$QUEUE $PID"
            NUM=$(($NUM+1))
        fi
    done

}

function checkqueue {
    OLDCHQUEUE=$QUEUE
    for PID in $OLDCHQUEUE
    do

        process_count=`ps ax | awk '{print $1 }' | grep -c "^${PID}$"`

        if [ $process_count -eq 0 ] ; then
            wait $PID
            my_status=$?
            if [[ $my_status -ne 0 ]]
            then
                echo "`date` $my_status ${URL_ARRAY[$PID]}" >> $ERROR_LOG
            fi

            current_time=`date +%s`
            old_time=${TIME_ARRAY[$PID]}
            time_difference=$(expr $current_time - $old_time)

            echo "`date` ${URL_ARRAY[$PID]} END ($time_difference seconds)" >> $REVERSE_LOG

            #unset TIME_ARRAY[$PID]
            #unset URL_ARRAY[$PID] 

            regeneratequeue # at least one PID has finished
            break
        fi
    done
}

REVERSE_LOG="$1.rvrs"
ERROR_LOG="$1.error"

echo "Cache STARTED at `date`" > $REVERSE_LOG
echo "" > ERROR_LOG

while read line; do

    # create the command to be run
    DATA="username=user@server.com&password=password"
    URL=$line
    CMD=$(curl --data "${DATA}" -s -o /dev/null --url "${URL}")

    echo "Command: ${CMD}"    
    # Run the command
    $CMD &
    # Get PID for process
    PID=$!
    queue $PID;
    URL_ARRAY[$PID]=$URL;
    TIME_ARRAY[$PID]=`date +%s`
    while [ $NUM -ge $MAX_NPROC ]; do
         checkqueue
         sleep 0.4
     done
done < $1
echo "Cache FINISHED at `date`" >> $REVERSE_LOG
exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:38:36.990

网络几乎总是瓶颈。产生更多连接通常会使它变慢。

您可以尝试通过产生几个来查看并行化它是否会对您有任何好处

时间卷曲...... &

# c# - 在计时器函数中处理 httpwebrequest.getresponse 异常

> ID：11744622
> 
> 赞同：-1
> 
> 时间：2012-07-31T16:17:45.100
> 
> 标签：c#, timer

我在带有计时器的函数内部使用 httpwebrequest.getresponse()。定时器每隔几秒调用一次这个函数。但是，有时 Web 服务器由于请求和响应快速而拒绝响应，因为计时器。

我需要确保该函数使用计时器继续执行并且正确处理异常。

或者

为计时器内的函数处理 http Web 请求和 Web 响应的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:21:27.340

以通常的方式处理异常，然后呢？

```
try {
    // Send your request
} catch(WebException ex) {
    // It failed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T07:01:06.450

```
while(response==null)
{

httpWebRequest = (HttpWebRequest)WebRequest.Create(sURL + param);
httpWebRequest.Method = WebRequestMethods.Http.Post;
httpWebRequest.Accept = "application/xml";
httpWebRequest.ContentLength = 0;

try
{
response = (HttpWebResponse)httpWebRequest.GetResponse();
if (response.StatusCode == HttpStatusCode.OK && response != null)
{
 streamReader = new StreamReader(response.GetResponseStream());
 doc = XDocument.Load(streamReader);
 break;
}
}
catch (WebException exx)
{
Console.WriteLine("Trying to reconnect with Web Server");
Thread.Sleep(2000);
}
} 
```

# asp.net-mvc-3 - Automapper - 如何映射依赖于当前 Session 对象

> ID：11744627
> 
> 赞同：2
> 
> 时间：2012-07-31T16:17:57.793
> 
> 标签：asp.net-mvc-3, automapper

我在 ASP.Net MVC 应用程序中使用 Automapper 将 DTO 映射到 ViewModel 对象。

在我的一个映射中，我需要访问存储在 Session 对象中的对象。

```
public override void OnAuthorization(AuthorizationContext filterContext)
        {
...
    SecurityToken token = SecurityTokenFactory.CreateSecurityToken(userNode);
    filterContext.HttpContext.Session[securityToken] = token;
...
} 
```

在我的控制器的构造函数中，我设置了 Automapper 映射。

```
 Mapper.CreateMap<UserReportDTO, UserDefinedReportModel>()
     .ForMember(dest => dest.IsEditable, opt=>opt.ResolveUsing(src => this.IsEditable(src)));

 private bool IsEditable(UserReportDTO report)
 {
    if (this.GetCurrentUserToken().UserVisibilityLevel == VisibilityLevel.Root)
    {
         return true;
    }
    return false;
 }

 public JsonResult GetVisibleUserReports()
        {
            ...
            int ID = this.GetCurrentUserToken().UserId; //This works!
            var reports = Mapper.Map < UserReportDTO[], UserDefinedReportModel[] >(inputarray); //This doesn't work
            ...
         } 
```

发生的情况是 context.Session 为空。

我猜这与 Automapper 解析映射的方式有关 - 也许在创建映射时设置了对一个 Context 的引用，然后这个 Context 在映射时不再存在？

我该如何解决这个问题 - 有没有办法将参数传递给映射操作？

我的临时解决方法是映射所有其他字段，然后手动循环遍历映射集合，设置需要当前上下文的字段，但我不愿意保留这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:29:08.050

一些可能会让你走上正轨的想法：

*   如果替换`ResolveUsing`为 有什么不同`MapFrom`吗？两者似乎都接受 a `Func<TSource, TMember>`，但也许存在细微差别。
*   是否可以使用 AutoMapper 的功能将您的`IsEditable`方法转换为`IValueResolver`然后将所需的会话数据传递给构造函数`ConstructedBy()`？这是[相关文档](https://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers)。滚动到“自定义构造方法”部分。

# php - CodeIgniter 模块加载会与本地类产生路径冲突？

> ID：11744628
> 
> 赞同：2
> 
> 时间：2012-07-31T16:18:02.500
> 
> 标签：php, codeigniter, hmvc

使用 CodeIgniter，从控制器 (application/controllers/home.php) 观察以下行：

```
$this->load->library(array('account/authentication')) 
```

AFAIK，这将：

1.  从 application/modules/account/libraries/authentication.php 加载“authentication.php”
2.  从 application/libraries/account/authentication.php 加载“authentication.php”

那么，如果两者都存在呢？实验中，CI 似乎在寻找第一个，如果不存在，它会加载第二个。这种行为是不是很奇怪？？这两个文件可能彼此无关。

如果您指的是本地文件还是模块文件，是否没有一种明确声明的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:33:31.830

AFAIK，没有默认目录`application/modules`，我在 CI 的文档和源代码中找不到任何参考。
我会说 CI 的行为是根据 no.2
并且确实仔细查看 CI 的加载程序（[system/core/Loader.php](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php)）揭示了以下内容：

1.  我们从函数[“库”开始](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php#L199)
2.  哪个调用函数['_ci_load_class'](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php#L901)

'_ci_load_class' 将您传递的库名反汇编为两部分：子目录和类名。

首先它在`libraries/subdir/class`. 如果它找到它 - 很好，它会加载它。
如果在那里找不到该类，它会在其他一些预定义的路径 ( [`$this->_ci_library_paths`](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php#L61)) 中查找它。
如果仍未找到该库，它会进行最后一次尝试并在`libraries/class/class`.

我唯一能想到的是，您已经定义了一个指向`modules`目录的自定义库路径。但即便如此，CI 也应该在`modules/libraries/account/authentication.php`.

**编辑：**
我刚刚注意到你用 标记了你的问题`hmvc`，它**确实**使用了一个`modules`目录。
不幸的是，我没有这方面的经验。
我会（显然）假设这是导致您描述的行为的原因。

# php - 禁用并发 Flash 视频流

> ID：11744629
> 
> 赞同：0
> 
> 时间：2012-07-31T16:18:08.560
> 
> 标签：php, linux, flash

我很确定我知道这个问题的答案，但是出于好奇和为了尽最大努力，我必须把它放在那里。我有一个适用于订阅模式的网站。我知道有些用户正在与许多其他人共享他们的帐户。为了阻止这种情况，我使用 PHP 来防止多个用户同时使用一个帐户，方法是在第二个用户登录后注销第一个用户。问题是网站上有很长的 Flash 视频，所以用户可以登录并开始观看视频，并且在视频播放开始后，第二个用户可以登录并观看等等。如果第二个用户登录了同一个帐户，是否可以停止向第一个用户流式传输？如果是这样，怎么做？

感谢您的任何见解，

奥维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:20:48.377

我会尝试通过 Web 服务器的特殊配置来实现，因此每个页面请求都是分叉的。Apache 有 MPM prefork 模块，就是这样工作的。

在每个 PHP 请求开始时，您将保存当前进程的 PID。

```
 $pid = getmypid(); 
```

然后将其保存到数据库中以用户名作为当前进程的行。如果已经存储了另一个 PID，请使用

```
 system('kill -TERM '.$pid); 
```

我假设你的服务器一直在同一个用户下运行，所以它有权杀死另一个它的进程。

现在开始流式传输数据，从头到尾。

```
 readfile($path); 
```

完成后，将当前用户 PID 设置为 NULL 并完成。

它将在启动时分配比线程服务器更多的资源。但是我认为在流式传输视频文件时，您每流式传输的每一秒都会节省更多的资源，开始时的一些分叉并不重要。重要的是视频流启动后的流畅和快速发送，对吧？

我没有尝试。当您开始从外部杀死他自己的进程时，apache 可能会不高兴。我相信大多数用户一次只会看一部电影，杀戮过程应该足够罕见。随意尝试:)

# javascript - 很多主干视图 - 性能问题？

> ID：11744634
> 
> 赞同：7
> 
> 时间：2012-07-31T16:18:33.467
> 
> 标签：javascript, backbone.js

**tl; dr：我想知道是否有很多（目前为 100+，可能高达 1000/2000 或更多）主干视图（作为表格的一个单元格）是否太重**

我正在进行的项目围绕着一个规划视图。每个用户有一行，覆盖一天 6 小时，每个小时分为 4 个 1500 万个插槽。此计划用于在单击插槽时添加“预订”，并且应该处理正确插槽的悬停，以及在无法进行预订时处理 - 即。防止用户单击“不可用”插槽。

一个槽点不能点击的原因有很多：用户此时不可用，或者用户处于预约状态；或者应用程序需要在两个预订之间“强制”一个延迟槽。保留（一个 div）在一个槽（表格的一个单元格）中呈现，并且通过玩弄尺寸，悬停正确数量的槽。

所有这些屏幕都由主干处理。所以对于我悬停的每个插槽，我需要检查我是否可以在这里进行预订。到目前为止，我通过玩弄`data`槽上的属性来使用它：当添加一个预留对象时，所覆盖的槽“通过（除其他外）预留对象（主干视图对象）进行了增强。

但在某些情况下，我现在不太了解，它混淆了，当保留视图被删除时，插槽没有“清理”：前一个`class`没有正确重置。这可能是我做错了或做得不好，但这只会变得更重；我想我应该在这里使用另一类 Backbone 视图，但我担心槽数和视图对象的数量会很高并导致性能问题。我对 js 性能一无所知，所以我想在上火车之前得到一些反馈。关于如何做到这一点的任何其他建议也将受到欢迎。

谢谢你的时间。如果这还不够清楚，请告诉我，我会尝试改写它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T20:22:34.150

我们有一个非常复杂的backbone.js 应用程序，在给定时间可能有数千个视图。我们的瓶颈主要在于未正确删除的视图的内存泄漏或不必要地重新渲染视图的事件驱动渲染。也就是说，实际观看次数似乎并没有太大影响。主干视图非常轻量级，因此只要您没有绑定太多事件，就不是什么大问题。

您可能会遇到性能问题，但视图可能不是问题。

但是，如果您确实使用了数千个视图，您可能想要做的是将初始渲染隐藏到一个大的“.html()”调用中。您可以通过根据视图的 cid 给每个视图元素一个 id 来做到这一点，然后连接视图的 html 字符串，然后在每个视图上使用 setElement 再次找到它的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:37:39.520

也许这有点帮助：
[https ://stackoverflow.com/a/7150279/1067061](https://stackoverflow.com/a/7150279/1067061)

顺便说一句：我喜欢你的头像；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T03:49:45.690

主干处理一切是浏览器性能最低的方式。如果速度不够快，您需要停止创建和销毁模板。缓存模板几乎没有任何帮助。

与其调用渲染函数，不如将变量保存到 jquery 选择器中，当模型更改时，使用缓存的选择器更新 DOM。这将为您带来最大的性能飞跃。

```
$title = null,
init = function(){ $title = this.$el.find('h1'); },
onTitleChange = function(event){ $title.html(event.value) } 
```

我正在研究一个高性能的主干视图。它可以以超过 120FPS 的速度渲染包含 1,000,000 个模型的集合。代码在 Github 上。[https://github.com/puppybits/BackboneJS-PerfView](https://github.com/puppybits/BackboneJS-PerfView)还有很多其他的优化可以做。如果您查看 PrefView，它对大多数优化都有评论。

# vhdl - 如何将变量的值分配给进程外的多路复用器？

> ID：11744639
> 
> 赞同：1
> 
> 时间：2012-07-31T16:18:56.670
> 
> 标签：vhdl

我有一个实现状态机的过程。在其中一个周期（状态）中，需要计算两个信号，其中一个是直接计算的，另一个是使用组件内已计算的信号进行的计算。第一次计算的结果需要放入一个指向组件的 MUX 中，并且所有这些都需要在同一个周期中完成（这足够长，足以让两个操作串行完成）。

我尝试的一种方法是使用变量来计算第一个信号，然后使用该信号来计算第二个信号，但它不会发生在同一个周期中，而是发生在 2 个周期中，因为对第一个信号的分配只发生在循环结束时，组件没有足够的时间来计算：

```
when st_cycle_5 =>                   

  vec_var(31 downto 0)  := dot_c_sig(31 downto 0)  - dot_a_sig(31 downto 0);
  vec_var(63 downto 32) := dot_c_sig(63 downto 32) - dot_a_sig(63 downto 32);
  vec_var(95 downto 64) := dot_c_sig(95 downto 64) - dot_a_sig(95 downto 64);

  c_minus_a_sig         <= vec_var;

...

end process cau_proc;

mult1_in1_sig           <= b_minus_a_sig(63 downto 32) when cau_state = st_cycle_5 
```

如何计算信号`b_minus_a_sig`并通过 MUX 分配它以在同一周期获得组件的结果？

（`vec_var`是一个变量，所有其他信号都是`std_logic_vector`）

**编辑**：有解决方案

```
mult1_in1_sig <= dot_c_sig(63 downto 32) - dot_a_sig(63 downto 32) when cau_state = st_cycle_5 
```

但我认为在这种情况下，布局和布线将不知道该操作已经完成并且结果可用并且执行两次而不是使用已知结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:47:46.727

也许您只需要使用适当的变量或变量的切片`mult1_in1_sig` *在您的流程中进行分配。*

换句话说，您可以将计算和多路复用器打包在一个进程中。

这样做，注意*不要*描述一个*锁存器*，即你的目标信号`mult1_in1_sig` *必须*为你进程中每个可能的执行路径分配一个值，而不仅仅是`when st_cycle_5`. 同样的评论适用于`c_minus_a_sig`每个信号。

# php - blueimp jquery 上传小部件被附加视图部分覆盖

> ID：11744647
> 
> 赞同：1
> 
> 时间：2012-07-31T16:19:29.357
> 
> 标签：php, jquery, html, codeigniter, blueimp

我的插件使用 codeigniter 2.1 可以完美运行。我现在尝试将该插件用作由多个视图组成的动态生成页面的一部分。

为此，我的控制器包含以下内容：

```
$this->load->view('blue_view_widget'); // the file upload view
$this->load->view('form'); // a form 
```

我现在看到模板上传和模板下载表（由 javascript 生成）被表单视图中的 html 覆盖。我在想（可能是错误的）第二个视图中的 html 在 javascript 有时间在视图底部动态生成表格之前就被回显了。我怎样才能解决这个问题 ？

这是我的代码：

```
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
<!--    <tr class="template-download fade">-->
    <tr class="template-download ">
        {% if (file.error) { %}
            <td></td>
            <td class="name"><span>{%=file.name%}</span></td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
            <td class="preview">{% if (file.thumbnail_url) { %}
                <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
            {% } %}</td>
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
            <td colspan="2"></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
                <i class="icon-trash icon-white"></i>
                <span>{%=locale.fileupload.destroy%}</span>
            </button>
            <input type="checkbox" name="delete" value="1">
        </td>
    </tr>
{% } %}
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
<script src="blueimp/js/vendor/jquery.ui.widget.js"></script>
<!-- The Templates plugin is included to render the upload/download listings -->
<script src="http://blueimp.github.com/JavaScript-Templates/tmpl.min.js"></script>
<!-- The Load Image plugin is included for the preview images and image resizing functionality -->
<script src="http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js"></script>
<!-- The Canvas to Blob plugin is included for image resizing functionality -->
<script src="http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js"></script>
<!-- Bootstrap JS and Bootstrap Image Gallery are not required, but included for the demo -->
<script src="http://blueimp.github.com/cdn/js/bootstrap.min.js"></script>
<script src="http://blueimp.github.com/Bootstrap-Image-Gallery/js/bootstrap-image-gallery.min.js"></script>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="blueimp/js/jquery.iframe-transport.js"></script>
<!-- The basic File Upload plugin -->
<script src="blueimp/js/jquery.fileupload.js"></script>
<!-- The File Upload file processing plugin -->
<script src="blueimp/js/jquery.fileupload-fp.js"></script>
<!-- The File Upload user interface plugin -->
<script src="blueimp/js/jquery.fileupload-ui.js"></script>
<!-- The localization script -->
<script src="blueimp/js/locale.js"></script>
<!-- The main application script -->
<script src="blueimp/js/main.js"></script>
<!-- The XDomainRequest Transport is included for cross-domain file deletion for IE8+ -->
<!--[if gte IE 8]><script src="js/cors/jquery.xdr-transport.js"></script><![endif]-->

THE SECOND VIEW ('FORM') BEGINS HERE.

 <div class="container">
         <base href="http://localhost/bootstrap1/">
<!--  <div class="row">-->
 <fieldset>

            <legend>Registration</legend>      

  <div class="span10" class="well">

        <form class="well" id="registerHere" method='post' action='index.php/site/process_form'>
//        

<div class="form_row" >

    <div class="control-group">  
            <label class="control-label" for="textarea">Textarea</label>  
            <div class="controls">  
              <textarea class="span8" class="input-xlarge" id="description" name="description" rel="popover" data-content="Re-enter your description." data-original-title="description" rows="3"></textarea>  
            </div>  
          </div>  
</div>    

<div class="form_row" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:35:38.957

我没有想到“链接腐烂”。无论如何，以下是问题的答案：

我正在使用引导工具包，并试图在引导容器标签内创建自包含视图。我设置它的方式是：

标题

观点 A：HTML 在这里 css 和 js

视图 B：HTML 放在这里 css 和 js

页脚

当我连接 2 个视图时，我有一个重复的 jquery 脚本，在我的情况下导致 firebug 出现以下错误：

```
$(”#fileupload”).fileupload is not a function
[Break On This Error] 

$(’#fileupload’).fileupload(); 
```

鉴于我目前的 JS 技能不佳，我仍然不明白它的含义，但是一旦我注释掉第二个脚本，整个页面就开始按预期工作。

# ajax - WordPress AJAX 登录

> ID：11744648
> 
> 赞同：6
> 
> 时间：2012-07-31T16:19:35.580
> 
> 标签：ajax, wordpress

我正在尝试构建一个自定义 wordpress ajax 登录表单，但我无法对其进行排序。这是我使用的代码：

HTML：

```
 <form class="well form-inline" id="login">
                <div class="rowmargin">
                    <h4>Login</h4>
                </div>
                <div class="rowmargin">
                    <input type="text" name="username" id="loginUsername" class="input-medium" placeholder="Username">
                    <input type="password" name="password" id="loginPassword" class="input-medium" placeholder="Password">
                </div>
                <a class="btn btn-primary" id="loginButton"><i class="icon-check icon-white"></i> Login</a>
            </form> 
```

JS：

```
 <script type="text/javascript">

        $(document).ready(function() {

            $("#loginButton").click(function() {    

                var username = $('#loginUsername').val();
                var password = $('#loginPassword').val();
                var rememberme = "forever";
                var redirect = '<?php bloginfo('url'); ?>';

                var data = {
                    user_login:     username,
                    user_password:  password,
                    remember:       rememberme,
                    redirect_to:    redirect
                }

                $.ajax({
                    url: '<?php bloginfo('url'); ?>/wp-login.php',
                    data: data,
                    type: 'GET',
                    dataType: 'jsonp',
                    success: function( result ) {
                        if (result.success==1) {
                            alert("Ok!");
                        } else {
                            alert("Not Ok!");
                        }
                    }
                }); 

            });

        });

        </script> <!-- Login Script ---> 
```

有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-12-24T10:33:54.633

WordPress：简单的 Ajax 登录表单

```
<form id="login" action="login" method="post">
    <h1>Site Login</h1>
    <p class="status"></p>
    <label for="username">Username</label>
    <input id="username" type="text" name="username">
    <label for="password">Password</label>
    <input id="password" type="password" name="password">
    <a class="lost" href="<?php echo wp_lostpassword_url(); ?>">Lost your password?</a>
    <input class="submit_button" type="submit" value="Login" name="submit">
    <a class="close" href="">(close)</a>
    <?php wp_nonce_field( 'ajax-login-nonce', 'security' ); ?>
</form> 
```

--

```
<?php
//add this within functions.php
function ajax_login_init(){

    wp_register_script('ajax-login-script', get_template_directory_uri() . '/ajax-login-script.js', array('jquery') ); 
    wp_enqueue_script('ajax-login-script');

    wp_localize_script( 'ajax-login-script', 'ajax_login_object', array( 
        'ajaxurl' => admin_url( 'admin-ajax.php' ),
        'redirecturl' => home_url(),
        'loadingmessage' => __('Sending user info, please wait...')
    ));

    // Enable the user with no privileges to run ajax_login() in AJAX
    add_action( 'wp_ajax_nopriv_ajaxlogin', 'ajax_login' );
}

// Execute the action only if the user isn't logged in
if (!is_user_logged_in()) {
    add_action('init', 'ajax_login_init');
}

function ajax_login(){

    // First check the nonce, if it fails the function will break
    check_ajax_referer( 'ajax-login-nonce', 'security' );

    // Nonce is checked, get the POST data and sign user on
    $info = array();
    $info['user_login'] = $_POST['username'];
    $info['user_password'] = $_POST['password'];
    $info['remember'] = true;

    $user_signon = wp_signon( $info, false );
    if ( is_wp_error($user_signon) ){
        echo json_encode(array('loggedin'=>false, 'message'=>__('Wrong username or password.')));
    } else {
        echo json_encode(array('loggedin'=>true, 'message'=>__('Login successful, redirecting...')));
    }

    die();
} 
```

在主题目录中创建一个文件 ajax-login-script.js 并粘贴这个 js

```
jQuery(document).ready(function($) {

    // Show the login dialog box on click
    $('a#show_login').on('click', function(e){
        $('body').prepend('<div class="login_overlay"></div>');
        $('form#login').fadeIn(500);
        $('div.login_overlay, form#login a.close').on('click', function(){
            $('div.login_overlay').remove();
            $('form#login').hide();
        });
        e.preventDefault();
    });

    // Perform AJAX login on form submit
    $('form#login').on('submit', function(e){
        $('form#login p.status').show().text(ajax_login_object.loadingmessage);
        $.ajax({
            type: 'POST',
            dataType: 'json',
            url: ajax_login_object.ajaxurl,
            data: { 
                'action': 'ajaxlogin', //calls wp_ajax_nopriv_ajaxlogin
                'username': $('form#login #username').val(), 
                'password': $('form#login #password').val(), 
                'security': $('form#login #security').val() },
            success: function(data){
                $('form#login p.status').text(data.message);
                if (data.loggedin == true){
                    document.location.href = ajax_login_object.redirecturl;
                }
            }
        });
        e.preventDefault();
    });

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T03:04:36.977

您需要使用 wp 功能进行登录。

[http://codex.wordpress.org/Function_Reference/wp_signon](http://codex.wordpress.org/Function_Reference/wp_signon)

然后用ajax访问这个函数登录。你可以在functions.php中写一个登录函数

点击下方查看如何在 wordpress 中使用 ajax。

[http://wpmu.org/how-to-use-ajax-with-php-on-your-wp-site-without-a-plugin/](http://wpmu.org/how-to-use-ajax-with-php-on-your-wp-site-without-a-plugin/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T17:22:06.183

WordPress 中的所有 AJAX 请求都必须通过`wp-admin/admin-ajax.php`. `wp-login.php`不会回应。 [http://codex.wordpress.org/Class_Reference/WP_Ajax_Response](http://codex.wordpress.org/Class_Reference/WP_Ajax_Response)

有一组可用的操作，但没有一个接近登录方法。如果您知道自己在做什么，您可以注册自己的操作并自己处理登录过程。 [http://codex.wordpress.org/Plugin_API/Action_Reference/wp_ajax_(action)](http://codex.wordpress.org/Plugin_API/Action_Reference/wp_ajax_%28action%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-03T14:41:44.120

```
<form class="well form-inline" id="login">
    <div id="message"></div>
    <div id="loading" style="display:none;"></div>
    <div class="rowmargin">
        <h4>Login</h4>
    </div>
    <div class="rowmargin">
        <input type="text" name="username" id="loginUsername" class="input-medium" placeholder="Username">
        <input type="password" name="password" id="loginPassword" class="input-medium" placeholder="Password">
    </div>
    <a class="btn btn-primary" id="loginButton"><i class="icon-check icon-white"></i> Login</a>
</form>

jQuery(document).ready(function(){      
    jQuery('#loading').hide();
    jQuery("#loginButton").click(function() {   
        jQuery('#message').hide().html('');
        jQuery('#loading').hide();
        var input_data = jQuery('#login').serialize();
        var logUser = jQuery('#loginUsername').val();
        var logPass = jQuery('#loginPassword').val();

        if(logUser == '' && logPass != ''){ jQuery('#message').show().html('Your Username is empty!'); return false; }
        if(logPass == '' && logUser != ''){ jQuery('#message').show().html('Your Password is empty!'); return false; }
        if(logUser == '' && logPass == ''){ jQuery('#message').show().html('Your Username and Password is empty!'); return false; } 

        jQuery('#loading').show();
        jQuery.ajax({
            type: "POST",
            url: "<?php echo site_url('wp-login.php','login_post'); ?>",
            data: input_data,
            success: function(msg) {                                    
                // login success. redirect users to some page.
                jQuery(location).attr('href', '<?php echo home_url( '/thank-you/' ); ?>');

            },
            error: function(msg) {  
                // login error.                 
                jQuery('#message').show();
                jQuery('#message').html("<?php _e('Your login  is not correct. Please try again.'); ?>");
                jQuery('#loading').hide();
            }

        }); 
        return false;
    });
}); 
```

# cucumber - 用 Gherkin Pirate 编写的场景示例

> ID：11744649
> 
> 赞同：10
> 
> 时间：2012-07-31T16:19:39.817
> 
> 标签：cucumber, specflow, gherkin

据我所知，Gherkin 支持多种不同的语言，包括 Pirate

有人可以列出 pirate 中的关键字示例，以及某个场景可能听起来像或知道列出了一些示例的网站吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T18:17:13.557

要获得完整的关键字列表，只需运行`cucumber --i18n en-pirate`

目前这返回：

```
 | feature          | "Ahoy matey!"            |
  | background       | "Yo-ho-ho"               |
  | scenario         | "Heave to"               |
  | scenario_outline | "Shiver me timbers"      |
  | examples         | "Dead men tell no tales" |
  | given            | "* ", "Gangway! "        |
  | when             | "* ", "Blimey! "         |
  | then             | "* ", "Let go and haul " |
  | and              | "* ", "Aye "             |
  | but              | "* ", "Avast! "          |
  | given (code)     | "Gangway"                |
  | when (code)      | "Blimey"                 |
  | then (code)      | "Letgoandhaul"           |
  | and (code)       | "Aye"                    |
  | but (code)       | "Avast"                  | 
```

还尝试`cucumber --i18n help`查看所有其他可能的语言（包括 Scouse 和澳大利亚语......）

# android - ADB 在连接时显示摩托罗拉 Xoom 处于离线状态

> ID：11744651
> 
> 赞同：3
> 
> 时间：2012-07-31T16:19:45.370
> 
> 标签：android, driver, adb, xoom, motorola-droid

我有一个 Wi-Fi 摩托罗拉 Xoom，我通过 ADB 连接它以进行开发。我看到一个间歇性问题，设备（带有 ID 号）显示在 adb 设备列表中，但会显示为脱机。

设备和计算机都显示平板电脑已连接。我尝试了重新启动每个设备和交换 USB 端口的组合，但唯一解决问题的方法是断开电缆。此外，我昨天使用的电缆今天无法使用——我不得不使用以前无法正常工作的电缆进行连接。

这是驱动问题吗？设备端口问题？我已经在多个版本的摩托罗拉驱动程序以及 PdaNet 驱动程序中看到了这个问题。我目前正在使用摩托罗拉移动驱动程序 4.7.1。

警告：此问题涉及较旧的设备，因此答案可能不再与当前的 ADB 连接问题相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:46:58.723

我遇到了和你一样的问题，我发现USB线在头USB的PIN上有故障。所以我切换到新的 USB 电缆，它工作正常并且检测设备在线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T20:04:37.567

我遇到了同样的问题，从我机器前面的 USB 端口切换到后面的端口就可以了。这可能与端口电源或 USB 类型的差异有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-15T08:18:34.703

来自 XDA：nouvelle_adr [http://forum.xda-developers.com/showthread.php?t=2247471](http://forum.xda-developers.com/showthread.php?t=2247471)

我下载了 adb 版本，它工作。

> 当您将运行**Android 4.2.2 或更高版本**的设备连接到您的计算机时，**系统会显示一个对话框，询问是否接受允许通过此计算机进行调试的 RSA 密钥。**
> 
> 这种安全机制可以保护用户设备，因为它确保无法执行 USB 调试和其他 adb 命令，除非您能够解锁设备并确认对话框。 **这要求您具有 adb 版本 1.0.31**（适用于 SDK Platform-tools r16.0.1 及更高版本）才能在运行 Android 4.2.2 或更高版本的设备上进行调试。
> 
> 如果您的设备中没有此弹出消息，则有解决方案：
> 
> 1) 在您的 PC 中安装 SDK 它可能会要求您安装 JAVA，如果是，请安装。
> 
> 2）确保您的 adb 是 1.0.31 或更高版本，以了解版本，tape : adb version in your commande window"

# android - 在android中动态添加按钮，如何在xml中添加onClick

> ID：11744656
> 
> 赞同：1
> 
> 时间：2012-07-31T16:20:09.637
> 
> 标签：android, dynamic, onclick, onclicklistener

情况如下：我有一个动态生成一堆随机自定义图像按钮的活动，并将它们添加到我的 xml 中的 TableView 中的 TableRows 中。此活动还有一个我想在单击这些按钮中的一个/任何一个时调用的方法。按钮内部有变量；该方法获取这些变量并将它们设置为 TextView（在同一活动中），因此我认为所有按钮都可以使用这种方法。如果这些按钮是在 XML 中定义的，我只会使用 android:onClick="displayCell" 来指定方法，但它们不是。当我在活动中生成它们时，有没有办法为这些按钮设置 onClick 或者我必须使用

button.setOnClickListener(new OnClickListener(){....});

并经历了一些麻烦，正如我在这里的一些答案中看到的那样？我遇到的问题是我似乎无法从 onClick 内部调用我的方法，因为方法（按钮）的参数不是最终的（我在循环中制作了一堆“按钮”，所以我不'认为不可能）：

button.setOnClickListener(new OnClickListener(){ public void onClick(View q){ button.getActivity().displayCell(button);//我想做这样的事情但是这显然行不通 } });

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:27:37.383

您可以让 Activity 实现 OnClickListener，然后（假设您在 Activity 中）：

```
button.setOnClickListener(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:31:41.840

是的，正如 comodoro 所说，或者让你的 onClickLIsener 成为你的类的成员变量，不要在每个按钮上做一个“新”。

```
private OnClickListener mOnClickListener = new OnClickListener() {...}; 
```

并在创建按钮时：

```
button.setOnClickListener(mOnClickListener); 
```

监听器中的 onClick() 函数将传递给按钮本身的视图。您可以从此函数访问按钮变量等。

```
public void onClick(View v)
{
 ImageButton button = (ImageButton)v;
 // and access your button data via button object...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:33:47.577

尝试使用从按钮继承的类并在那里添加 OnClickListener。像这样：

```
class MyButton extends Button {

        OnClickListener clicker = new OnClickListener() {
        public void onClick(View v) {

              displayCell(v);

        }
        };

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:30:06.527

对此的解决方案可能是：

*   创建不同的按钮实例。（所以你可以使它们成为最终的）
*   使用`setId()`方法给他们一个整数ID（稍后引用它们）。您可以将ID存储在a`List`中以便稍后引用它们。
*   创建后立即定义它们的 onClickListener。

# java - 使用 Java Web App 中的 (Scala) 库，获取 NoClassDefFoundError

> ID：11744668
> 
> 赞同：1
> 
> 时间：2012-07-31T16:20:51.307
> 
> 标签：java, eclipse, scala, maven, akka

很长一段时间以来，我一直在开发一个相当“标准”的 Java Web 应用程序。我在 Eclipse 中开发，使用 Eclipse 的服务器插件在 Tomcat 中运行应用程序。该应用程序的设置很简单：Spring 用于引导，Wicket 用于 Web，Hibernate 用于 ORM，Maven 用于依赖管理。

今天我在项目中添加了 Akka 2.0。我按照手册将它添加到我的 POM 中：

```
<dependency>
<groupId>com.typesafe.akka</groupId>
<artifactId>akka-actor</artifactId>
<version>2.0.2</version>
</dependency> 
```

Maven 找到了依赖项，我可以看到它出现在 Eclipse 包资源管理器的 Maven 依赖项中。引用的 Scala 库也出现了（看起来是 2.9.2 版）。

我可以像预期的那样使用该库：Eclipse 找到类，我可以跳转到源文件等。一切正常。但是一旦我启动应用程序并且它遇到程序的任何部分引用 Akka，它就会抛出 NoClassDefFoundError。

由于所有其他库仍然按预期工作，我最好的猜测是这与 Akka 是用 Scala 开发的库这一事实有关。由于我自己几乎没有使用过 Scala，所以我自己找不到任何解决该问题的方法，而且当涉及到此类通用异常时，Google 并没有那么有帮助。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:17:17.693

验证所需的库 (AKKA) 是否在 Eclipse 下的部署程序集中：打开项目的属性并在左侧查找“部署程序集”。

[我正在使用 Eclipse Indigo]

您可以通过检查 tomcat 下的部署来验证预期的 jar 文件是否存在（或缺少）。

# eclipse - 在 Ubuntu 64 位下安装 ARM DS-5 社区版

> ID：11744670
> 
> 赞同：1
> 
> 时间：2012-07-31T16:20:55.267
> 
> 标签：eclipse, plugins, arm, ds-5

[http://ds.arm.com/ds-5-community-edition/](http://ds.arm.com/ds-5-community-edition/)

我有 Ubuntu 12.04 Precise Pangolin 的 64 位安装，我想安装 DS-5 的社区版，但我不能。

我有 Eclipse 的 32 位版本和 Oracle 官方 JDK 的 32 位版本。

当我使用这个 URL

```
http://tools.arm.com/eclipse 
```

在Eclipse Package Manager中，我看到1包，但在选择安装它时，我会收到此错误：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Eclipse plug-ins for DS-5 Community Edition 5.10.0.20120515_072757 (com.arm.ds.community.feature.feature.group 5.10.0.20120515_072757)
  Missing requirement: Eclipse plug-ins for DS-5 Community Edition 5.10.0.20120515_072757 (com.arm.ds.community.feature.feature.group 5.10.0.20120515_072757) requires 'org.eclipse.platform.feature.group [3.7.0,3.8.0)' but it could not be found 
```

我最好的猜测是我的 Eclipse ( Juno ) 副本对于这个插件来说太新了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T14:04:44.270

ARM DS-5 目前似乎不适用于 Eclipse Juno。但它在 Eclipse Indigo 和 Oracle JDK 6（每种情况下都是 32 位）上运行良好。

# c# - 修改 aspxgrid 中的列以显示超链接和支持组

> ID：11744683
> 
> 赞同：0
> 
> 时间：2012-07-31T16:21:54.160
> 
> 标签：c#, asp.net, devexpress

我有一个在列中显示用户 ID 的 devexpress gridview。我按此列分组，我想通过添加指向用户配置文件页面的超链接来修改显示的值。

```
<dx:ASPxGridView ..>

<Columns>
..

<dx:GridViewDataColumn FieldName="UserID" Caption="User" VisibleIndex="2" 
  Visible="false">
  <Settings AllowSort="False" AllowDragDrop="False" />                                
</dx:GridViewDataColumn>

..
</Columns>

</dx:ASPxGridView> 
```

但是每当我尝试添加 DataItemTemplate 时，它​​根本不会影响输出。

如何修改链接显示的内容？

现在它显示：

```
User 12323 
```

我想显示：

```
User <a href="/profile.aspx?userid=12323">12323</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:49:25.883

此代码会将 12323 显示为超链接，该超链接将作为 ID 并重定向到您想要的页面。

```
 <dx:GridViewDataHyperLinkColumn VisibleIndex="0" Settings-FilterMode="DisplayText" Caption="User" 
                ShowInCustomizationForm="True"
             FieldName="UserID" Width="58px">
            <DataItemTemplate>
              <dx:ASPxHyperLink Font-Size="11px" ForeColor="Blue" ID="ASPxHyperLinkTest" Target="_blank" runat="server" Text='<%#Eval("UserID") %>'
 NavigateUrl='<%#string.Format("profile.aspx?userid={0}",Eval("UserID"))%>'>
        </dx:ASPxHyperLink>
      </DataItemTemplate>
    </dx:GridViewDataHyperLinkColumn> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:25:21.413

我以前没有使用过 DevExpress Gridview，但如果它继承自 GridView，那么这可以工作：

```
Private Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowDataBound

        If e.Row.RowType = DataControlRowType.DataRow Then
            e.Row.Cells(0).Text = "User <a href=""/profile.aspx?userid=" & DataBinder.Eval(e.Row.DataItem, "UserID") & """>" + DataBinder.Eval(e.Row.DataItem, "UserID") + "</a>"
        End If

End Sub 
```

# c# - 如何从一个组合框选择中自动填充一个单选按钮、几个组合框、许多文本框和一个日历

> ID：11744684
> 
> 赞同：0
> 
> 时间：2012-07-31T16:21:56.640
> 
> 标签：c#

我正在创建一个工具，该工具将允许人力资源员工将有关新员工的各种信息输入到访问数据库中（用于学术目的）。到目前为止，我已经设置好布局（您很快就会看到），验证在一个地方，并且使用我创建的 Access 数据库填充了 dataGridView。然后我有 3 个按钮，提交（插入）、更新和删除。

PS：我知道我要更新的表格很大，但这是我们团队决定做的。

我的布局图像：

[人力资源员工工具](http://postimage.org/image/m5ba7b5vj/full/)

提交和删除有效，但只有在所有字段都填充了数据时，更新才有效。我编写的代码尝试更新所有字段，其中 EMPLOYEE_ID 等于在组合框上选择的值，因此如果我尝试仅更新一个字段，我会收到一条错误消息，提示“没有为一个或多个必需参数提供值”。我认为通过在选择组合框的值时自动填充左侧的所有字段将解决我的问题。问题是我不知道如何做到这一点。任何帮助将不胜感激！！

更新声明。

```
private void cmdModify_Click(object sender, EventArgs e)
        {
            //Setting up Connection String
            string connectionString = GetConnectionString();

            string SqlString = "UPDATE Employee SET FIRST_NAME = @FirstName , LAST_NAME= @LastName, MIDDLE_NAME = @MiddleName, DATE_HIRED =@DateHired, WAGE_TYPE =@WageType, WAGE = @Wage, GENDER =@Gender, MARTIAL_STATUS =@MartialStatus, UNIT_NUMBER =@UnitNumber, STREET_NUMBER =@StreetNumber, STREET_NAME =@StreetName, CITY =@City, PROVINCE =@Province, POSTAL_CODE =@PostalCode, HOME_NUMBER =@HomeNumber, CELL_NUMBER =@CellNumber, JOB_TITTLE =@JobTittle, END_DATE=7/24/2013, DPT_NAME =@Department, NOTES =@Notes WHERE [EMPLOYEE_ID] = @EMPLOYEE_ID";

            using (OleDbConnection conn = new OleDbConnection(connectionString))
            {
                using (OleDbCommand cmd = new OleDbCommand(SqlString, conn))
                {
                    cmd.CommandType = CommandType.Text;
                    cmd.Parameters.AddWithValue("FirstName", txtFname.Text);
                    cmd.Parameters.AddWithValue("LastName", txtLname.Text);
                    cmd.Parameters.AddWithValue("MiddleName", txtMname.Text);
                    cmd.Parameters.AddWithValue("DateHired", dateTimePicker1.Text);
                    cmd.Parameters.AddWithValue("WageType", cmbType.SelectedItem);
                    cmd.Parameters.AddWithValue("Wage", txtWage.Text);
                    if (rbMale.Checked == true)
                    {
                        cmd.Parameters.AddWithValue("Gender", rbMale.Text);
                    }
                    else if (rbFemale.Checked == true)
                    {
                        cmd.Parameters.AddWithValue("Gender", rbFemale.Text);
                    }
                    cmd.Parameters.AddWithValue("MartialStatus", cmbStatus.SelectedItem);
                    cmd.Parameters.AddWithValue("UnitNumber", txtUnit.Text);
                    cmd.Parameters.AddWithValue("StreetNumber", txtStreetNo.Text);
                    cmd.Parameters.AddWithValue("StreetName", txtStreet.Text);
                    cmd.Parameters.AddWithValue("City", txtCity.Text);
                    cmd.Parameters.AddWithValue("Province", cmbState.SelectedItem);
                    cmd.Parameters.AddWithValue("PostalCode", txtPostal.Text);
                    cmd.Parameters.AddWithValue("HomeNumber", txtHphone.Text);
                    cmd.Parameters.AddWithValue("CellNumber", txtCphone.Text);
                    cmd.Parameters.AddWithValue("JobTittle", cmbJobTitle.SelectedItem);
                    cmd.Parameters.AddWithValue("Department", cmbDepartment.SelectedItem);
                    cmd.Parameters.AddWithValue("Notes", txtNotes.Text);
                    cmd.Parameters.AddWithValue("EMPLOYEE_ID", comboBox1.SelectedValue);

                    try
                    {
                        // openning a connection to the database / table
                        conn.Open();
                        // SQL commnd class
                        cmd.ExecuteNonQuery();
                        //Closing Database connection
                        conn.Close();
                        //Console.WriteLine("Data was added to the table !!!");
                        MessageBox.Show("Data was added to the table !!!");
                    }
                    catch (Exception ex)
                    {
                        MessageBox.Show(ex.Message);
                        //Console.WriteLine(ex.Message); // printing exception message to default output
                    }
                }
            }
            Refresh();
            clearText();
        } 
```

插入声明。

```
private void Insert_Data()
        {
            string connectionString = GetConnectionString();
            string SqlString = "INSERT INTO Employee (FIRST_NAME, LAST_NAME, MIDDLE_NAME, DATE_HIRED, WAGE_TYPE, WAGE, GENDER, MARTIAL_STATUS,UNIT_NUMBER, STREET_NUMBER, STREET_NAME, CITY ,PROVINCE, POSTAL_CODE, HOME_NUMBER, CELL_NUMBER, JOB_TITTLE, END_DATE, DPT_NAME, NOTES) VALUES (@FirstName,@LastName,@MiddleName,@DateHired,@WageType,@Wage,@Gender,@MartialStatus,@UnitNumber,@StreetNumber,@StreetName,@City,@Province,@PostalCode,@HomeNumber,@CellNumber,@JobTittle,7/24/2013,@Department,@Notes)";

            using (OleDbConnection conn = new OleDbConnection(connectionString))
            {
                using (OleDbCommand cmd = new OleDbCommand(SqlString, conn))
                {
                    cmd.CommandType = CommandType.Text;
                    cmd.Parameters.AddWithValue("FirstName", txtFname.Text);
                    cmd.Parameters.AddWithValue("LastName", txtLname.Text);
                    cmd.Parameters.AddWithValue("MiddleName", txtMname.Text);
                    cmd.Parameters.AddWithValue("DateHired", dateTimePicker1.Text);
                    cmd.Parameters.AddWithValue("WageType", cmbType.SelectedItem);
                    cmd.Parameters.AddWithValue("Wage", txtWage.Text);
                    if (rbMale.Checked == true)
                    {
                        cmd.Parameters.AddWithValue("Gender",rbMale.Text);
                    }
                    else if (rbFemale.Checked == true)
                    {
                        cmd.Parameters.AddWithValue("Gender", rbFemale.Text);
                    }
                    cmd.Parameters.AddWithValue("MartialStatus", cmbStatus.SelectedItem);
                    cmd.Parameters.AddWithValue("UnitNumber", txtUnit.Text);
                    cmd.Parameters.AddWithValue("StreetNumber", txtStreetNo.Text);
                    cmd.Parameters.AddWithValue("StreetName", txtStreet.Text);
                    cmd.Parameters.AddWithValue("City", txtCity.Text);
                    cmd.Parameters.AddWithValue("Province", cmbState.SelectedItem);
                    cmd.Parameters.AddWithValue("PostalCode", txtPostal.Text);
                    cmd.Parameters.AddWithValue("HomeNumber", txtHphone.Text);
                    cmd.Parameters.AddWithValue("CellNumber", txtCphone.Text);
                    cmd.Parameters.AddWithValue("JobTittle", cmbJobTitle.SelectedItem);
                    cmd.Parameters.AddWithValue("Department", cmbDepartment.SelectedItem);
                    cmd.Parameters.AddWithValue("Notes", txtNotes.Text);

                    try
                    {
                        // openning a connection to the database / table
                        conn.Open();
                        // SQL commnd class
                        cmd.ExecuteNonQuery();
                        //Closing Database connection
                        conn.Close();
                        //Console.WriteLine("Data was added to the table !!!");
                        MessageBox.Show("Data was added to the table !!!");
                    }
                    catch (Exception ex)
                    {
                        MessageBox.Show(ex.Message);
                        //Console.WriteLine(ex.Message); // printing exception message to default output
                    }
                }
            }
            Refresh();
            clearText();
        } 
```

删除声明

```
private void cmdDelete_Click_1(object sender, EventArgs e)
        {
            //Setting up Connection String
            string connectionString = GetConnectionString();
            string SqlString = "DELETE * FROM Employee WHERE [EMPLOYEE_ID] = @EMPLOYEE_ID ";

            using (OleDbConnection conn = new OleDbConnection(connectionString))
            {
                using (OleDbCommand cmd = new OleDbCommand(SqlString, conn))
                {
                    cmd.CommandType = CommandType.Text;
                    cmd.Parameters.AddWithValue("EMPLOYEE_ID", comboBox1.SelectedValue);
                    try
                    {
                        // openning a connection to the database / table
                        conn.Open();
                        // SQL commnd class
                        cmd.ExecuteNonQuery();
                        //Closing Database connection
                        conn.Close();
                        //Console.WriteLine("Data was added to the table !!!");
                        MessageBox.Show("Data was deleted from the table !!!");
                    }
                    catch (Exception ex)
                    {
                        MessageBox.Show(ex.Message);
                        //Console.WriteLine(ex.Message); // printing exception message to default output
                    }
                }
            }
            Refresh();
            clearText();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:42:39.593

您收到此错误是因为 AddWithValue 方法将 null 添加到 Parameters 集合。您需要的是添加 DBNull 来代替。

```
cmd.Parameters.AddWithValue("FirstName", txtFname.Text ?? DBNull.Value); 
```

如果它们是复杂类型，那些 SelectedItem 值也可能会给您带来问题：

> cmd.Parameters.AddWithValue("省", cmbState.SelectedItem);

您可能必须在实例上指定一个属性才能使其工作

```
cmd.Parameters.AddWithValue("Province", cmbState.SelectedItem.MyIdProperty); 
```

# java - 使用 java 创建 json/xml 响应 Web 服务的最佳方法是什么

> ID：11744685
> 
> 赞同：1
> 
> 时间：2012-07-31T16:21:57.023
> 
> 标签：java, android, webservice-client

使用 java 创建 json/xml 响应 Web 服务的最佳方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:26:16.047

我会看看REST。您可以轻松创建 JSON/XML 响应。这是参考实现[http://jersey.java.net](http://jersey.java.net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:53:03.893

[RESTEasy](http://www.jboss.org/resteasy/)和 Jetty 可以很好地协同工作。

# algorithm - 数组中总和最小的索引集的特定子集

> ID：11744686
> 
> 赞同：2
> 
> 时间：2012-07-31T16:21:58.447
> 
> 标签：algorithm

您有 2 个数组 a 和 b，每个数组包含 n 个数字。你有一个数字k。

[n] = 索引集 1...n

我们希望找到 [n] 的子集 S，使得 a 中 S 索引的元素总和至少为 k，并且 b 中 S 索引的元素总和尽可能小。

我什至找不到一个多项式时间算法。对于如何解决此问题的任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:55:38.867

你至少对多项式感兴趣，对吧？易于对集合的所有掩码进行指数迭代并检查两个条件（总和 >= k 并比较我们之前在 b 和现在的总和中所拥有的内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:29:05.793

这个问题的一般解决方案是 NP 完全的，因为它包含了背包问题。但是，与背包问题一样，您可以使用动态规划建设性地解决它（在“伪多项式时间”中）。

* * *

要看到这一点：给定一个背包大小`T`和对象大小的背包问题`c[i]`，按照您的问题中描述的那样组合一个问题`a[i]==b[i]==c[i]`和`k == sum(c[i]) - T`。

那么，背包问题的解决方案是一组*不在*中的索引`S`：

```
sum(c[i] *not* indexed by S) == sum(c[i]) - sum(a[i] indexed by S)

T == sum(c[i]) - k 
```

请注意，当且仅当问题约束成立时，它才`S`满足背包约束。`sum(c[i] *not* indexed by S) <= T``sum(a[i] indexed by S) >= k`

```
sum(c[i] *not* indexed by S) == sum(c[i]) - sum(b[i] indexed by S) 
```

由于所提出问题的解决方案在有效 S 上最小化`sum(b[i] indexed by S)`，在有效 S`sum(c[i] *not* indexed by S)`上最大化，并且是背包问题的最优解。

# c# - ReSharper 换行和换行

> ID：11744690
> 
> 赞同：38
> 
> 时间：2012-07-31T16:22:07.243
> 
> 标签：c#, resharper, code-formatting

所以这：

```
cmd = new OdbcCommand( string.Format( @"
SELECT *
  FROM Bobby_Tables
 WHERE Name = {0}", "Little Bobby Drop Tables" ), odbcConnection ); 
```

被格式化为：

```
cmd = 
      new OdbcCommand( 
            string.Format( 
                  @"
SELECT *
  FROM Bobby_Tables
 WHERE Name = {0}", 
                  "Little Bobby Drop Tables" ), odbcConnection ); 
```

我已经查看了换行和换行的每个选项，但我无法找到一个尽可能长时间地保持同一行的选项。我假设我错过了正确的选项。我的`Right margin (columns)`选项设置为 100，这非常大。

**问题：** 有没有办法让它看起来像原来的一样，并且仍然可以对实际需要包装的其他东西进行智能格式化？

我可以手动把

```
cmd = new OdbcCommand( string.Format (
      @" 
```

回到第一行，它会愉快地将逐字字符串留在下一行。我猜这是一个不错的妥协。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-31T17:52:23.813

我猜你的问题是第一行被分成三行。这是因为在 ReSharper 7.0 中修复的错误[http://youtrack.jetbrains.com/issue/RSRP-288271](http://youtrack.jetbrains.com/issue/RSRP-288271)。您应该考虑升级或关闭选项`ReSharper | Options -> Code Editing | C# | Formatting style | Line breaks and wrapping -> LineWrapping | Wrap long lines`。

# c - SHA1 hexdigest 到 long

> ID：11744696
> 
> 赞同：0
> 
> 时间：2012-07-31T16:22:29.320
> 
> 标签：c, d, bigint

我有这个 Python 代码（hexdigest 是 SHA1）：

```
d = long(hexdigest, 16)
if d >> 159:
    return "-%x" % ((-d) & (2**160-1))
return "%x" % d 
```

我需要将此代码翻译成 D。我尝试了几件事：

*   to!long(hexdigest, 16) – 溢出失败（对于 ulong 来说太大）
*   `std.BigInt`不支持二进制`&`

你会如何在 D 中做到这一点？我将此问题标记为`C`相关，因为 C 解决方案也适用于 D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:28:52.440

这段代码看起来像一个 NOP。您正在解析一个 SHA1 hexdigest，它是一个 20 字节的数字。它永远不会超过 160 位，因此`d>>160`始终为 0。因此，您只需以相同的格式重新格式化十六进制摘要。我猜你正在删除前导零，如果有的话。

我很惊讶 D`std.BigInt`不提供位操作（`&`, `|`, `^`）。自己写？不可能那么难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T17:51:22.793

因此，您需要从无符号到有符号 2 的补码的十六进制到十六进制转换。您是否意识到您可以逐个数字地进行？输入字符串中的每个数字加上输出字符串中的对应数字都等于`0xf`，除了最后一个，它是`0x10`。对于这个问题，任何一种 bigint 算术都是多余的。

C 中的演示（注意：这不会去除前导零）

```
#include <stdio.h>
#include <string.h>

static int fromhex(char dig)
{
  return dig >= '0' && dig <= '9' ? dig - '0'      :
         dig >= 'A' && dig <= 'F' ? dig - 'A' + 10 :
         dig >= 'a' && dig <= 'f' ? dig - 'a' + 10 :
         -1;
}

int main(int argc, char **argv)
{
  if(argc!=2 ||
     strlen(argv[1])!=40 ||
     strspn(argv[1], "0123456789abcdefABCDEF")!=40)
  {
    fprintf(stderr, "Usage: %s sha1hex\n", argv[0]);
    return 1;
  }
  if(strchr("01234567", argv[1][0])) {
    puts(argv[1]);
  } else {
    int i;
    putchar('-');
    for(i=0;i<39;++i)
      printf("%x", 15 - fromhex(argv[1][i]));
    printf("%x\n", 16 - fromhex(argv[1][i]));
  }
  return 0;
} 
```

# html - 形状层似乎随着滚动而移动

> ID：11744697
> 
> 赞同：0
> 
> 时间：2012-07-31T16:22:34.287
> 
> 标签：html, kineticjs

我在 JavaScript 脚本中应用了以下教程：http: [//www.html5canvastutorials.com/labs/html5-canvas-interactive-building-map/](http://www.html5canvastutorials.com/labs/html5-canvas-interactive-building-map/)

在大多数情况下，它就像一个魅力。每当我滚动整个网站时，一切都很顺利，将鼠标悬停在形状上效果很好。

但是，每当我在网站内创建一个可滚动的 div 时，其中的形状都会与图片一起保持在原位（可见形状是指您实际看到的），但是每当我悬停时，我都必须每当我向下滚动时，将鼠标悬停在下方，如下所示：

[http://i45.tinypic.com/28cn7ur.png](http://i45.tinypic.com/28cn7ur.png) （注意滚动条的位置和我的鼠标相对于它上面蓝色形状的位置）

中心的 div 是相对定位的，在这个 div 中我有一个画布包装 div（也是相对位置），其中有画布本身。

是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:24:07.713

我使用的是 kinetic 版本 3.8.2，升级到版本 3.10.4 解决了这个问题。

# git - 将 svn 分支与旧的未跟踪代码合并

> ID：11744699
> 
> 赞同：2
> 
> 时间：2012-07-31T16:22:46.030
> 
> 标签：git, svn, version-control, versioning

我有工作 svn 存储库。我也有由旧的和未跟踪的代码组成的分支。不幸的是，我需要将两者合并在一起。这样做的最佳工具是什么。将 svn 存储库迁移到 git 然后合并未跟踪的代码会更容易吗？您建议使用什么工具。我会有很大的工作，所以我要好好准备。

谢谢！拉斯皮兹迪亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:13:34.223

问题是要应用更改，您需要知道更改了什么。没有 VC 数据的单个树没有这样的历史信息。

您将需要弄清楚您的分支是从哪个历史版本分支出来的。我不知道有什么工具可以帮助解决这个问题。一种方法是将您的分支与每个修订版进行比较，找出哪些产生的差异最小且不冲突，然后查看哪些是最明智的（例如，不删除功能）。如果您能够通过肉眼识别“绝对较旧”和“绝对较新”的代码，则可以通过二进制搜索减少所需的比较。

这将更容易自动化并使用 Git 更快地运行，但在 Subversion 中仍然*可能。*

# login - EE2 - 绕过具有唯一 URL 的登录？

> ID：11744707
> 
> 赞同：0
> 
> 时间：2012-07-31T16:23:06.657
> 
> 标签：login, passwords, expressionengine

我有一个奇怪的问题 - 我正在开发一个内置于 Expression Engine 的投资组合网站，该网站有许多客户显然都需要登录才能访问他们的投资组合。

我被要求查看是否有一种方法可以让用户登录一次，然后以某种方式，从那时起，当他们返回站点时能够绕过登录屏幕 - 主要客户热衷于唯一的 URL，我看不出这是怎么做的。我是 Expression Engine 的新手，所以如果有人有任何提示，我很想听听他们！

提前喝彩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T02:50:00.797

您需要构建一个带有模块和扩展的附加组件来执行此操作。涉及许多步骤，但可行。

*   创建一个新表来保存某种唯一 ID、一个 member_id 和可能的到期日期
*   安装模块时插入一个新操作，并有一个相应的方法来处理模块中的登录
*   使用`member_member_login_start`扩展挂钩在此表中插入新行，然后生成一封电子邮件，该电子邮件将发送到成员的电子邮件地址，其中包含使用您刚刚插入的唯一值构建的操作 URL（例如，http:/mysite.com/ ?ACT=XX&unique_id=XXXXXX)

类似的东西。

# php - 使用 PHP 将数据转换为 xml 文件

> ID：11744714
> 
> 赞同：-1
> 
> 时间：2012-07-31T16:23:25.837
> 
> 标签：php, xml

我正在尝试使用 PHP 将数据提供给 xml 文件，我正在尝试做这个简单的事情：

```
<?xml version="1.0" encoding="utf-8" ?>
<Data>
<Entry>  <?php echo("Hello world");?> </Entry>
</Data> 
```

但是，当我将其保存为 .php 文件时，它只显示“Hello world”消息，当我将其保存为 .xml 文件时，它将 php 脚本作为字符串并按原样显示......你知道它是如何工作的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:27:57.100

```
header('Content-Type: text/xml; charset=utf-8');
echo '<?xml version="1.0" encoding="utf-8" ?>';
echo '<Data><Entry>Hello world</Entry></Data>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:25:10.427

将其保存为 PHP 脚本。XML 正在输出，但您只是没有看到它（可能），因为您的默认`Content-Type`值为`text/html`. 但是，您可以使用以下方法覆盖它`header`：

```
<?php
header('Content-Type: text/xml');
?><?xml version="1.0" encoding="utf-8" ?>
<Data>
<Entry>  <?php echo("Hello world");?> </Entry>
</Data> 
```

# java-me - 如何在 j2me 中读取多个 rss xml 文件

> ID：11744715
> 
> 赞同：0
> 
> 时间：2012-07-31T16:23:28.787
> 
> 标签：java-me, rss, midp-2.0

```
I already developed Rss feed reader application in j2me java using kxmlParser, 
```

对于一个 rss xml 文件（如果我读取一个 xml，我的代码应该被执行并应该显示列表屏幕）现在我想将相同的代码应用于 5 个 rss xml 文件（即我需要一个一个地读取 xml 文件）如何可以在 j2me 中使用吗？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:43:16.770

如果您一次可以解析一个xml：

1.  创建一个Vector来控制xml队列
2.  让一个线程使用 kxmlParser 重用队列中的 xml 对象

如果需要同时解析所有的xml

1.  为每个 xml 创建一个线程，为每个 xml 创建一个 kxmlParser 实例

第一种方法速度较慢，但​​运行时内存更少，并且更易于实现。

# iphone - UIViewController 中的 UITableView 链接到另一个 ViewController (DetailController)

> ID：11744716
> 
> 赞同：0
> 
> 时间：2012-07-31T16:23:29.863
> 
> 标签：iphone, xcode, tableview, viewcontroller

我在商店中有一个应用程序，它使用链接到 UIViewController (DetailController) 的 RootViewController，我正在开发一个新应用程序，它基本上需要同样的功能。但相反，我的新应用程序在链接到 UIViewController 的 UIViewController 中有一个 UITableView。所以我想，我会将我的 RootViewController 代码复制并粘贴到这个新的 UIViewController 中。所以我已经链接了 TableView，将委托和数据源设置为 self，并且 TableView 显示了项目的标题（Hurrah）但是当被触摸时，不会去 DetailController？我已经使用 NSLog 来确定哪个部分不起作用，当然它是 didSelectRowAtIndexPath 方法……这是我的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSDictionary *theItem = [items objectAtIndex:indexPath.row];
    DetailController *nextController = [[DetailController alloc] initWithItem:theItem];
    [self.navigationController pushViewController:nextController animated:YES];
    [nextController release];

} 
```

TableViewCell 只是突出显示蓝色并且不链接到 DetailController。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:37:58.577

“不工作”是否意味着它没有被调用，或者它没有推动视图控制器？如果是第一个，请确保正确设置了表视图委托。如果是第二个，请确保 nextController 和 self.navigationController 都不是 nil。

# javascript - 集成登录和评论插件

> ID：11744724
> 
> 赞同：0
> 
> 时间：2012-07-31T16:24:01.667
> 
> 标签：javascript, facebook, facebook-comments, facebook-login

我正在尝试在我的页面上集成 Facebook**登录按钮**和**评论插件**。

我让他们分开工作，当有人通过登录按钮登录时，评论插件会响应（并将用户登录），但我的问题是相反的；**当有人通过评论插件登录发表评论时，没有事件可以从评论插件传递到登录按钮。**

有没有办法解决？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:29:11.660

您应该在评论中注册一个 FB javascript 事件，或者最好先登录。当用户通过点赞或评论操作登录时，应触发登录事件：

```
 window.fbAsyncInit = function() {
                FB.init({
                    appId   : 'xxxx',
                    status  : true, // check login status
                    cookie  : true, // enable cookies to allow the server to access the session
                    xfbml   : true // parse XFBML
                }); 
   FB.Event.subscribe('auth.login', function() { 

                      /*create a reload in wich you login the user, because now you have the cookie. Or via ajax */
             });
} 
```

# java - Java 并行文件处理

> ID：11744730
> 
> 赞同：6
> 
> 时间：2012-07-31T16:24:19.590
> 
> 标签：java, multithreading, file-handling

我有以下代码：

```
import java.io.*;
import java.util.concurrent.* ;
public class Example{
public static void main(String args[]) {
    try {
        FileOutputStream fos = new FileOutputStream("1.dat");
        DataOutputStream dos = new DataOutputStream(fos);

        for (int i = 0; i < 200000; i++) {
            dos.writeInt(i);
        }
        dos.close();                                                         // Two sample files created

        FileOutputStream fos1 = new FileOutputStream("2.dat");
        DataOutputStream dos1 = new DataOutputStream(fos1);

        for (int i = 200000; i < 400000; i++) {
            dos1.writeInt(i);
        }
        dos1.close();

        Exampless.createArray(200000); //Create a shared array
        Exampless ex1 = new Exampless("1.dat");
        Exampless ex2 = new Exampless("2.dat");
        ExecutorService executor = Executors.newFixedThreadPool(2); //Exexuted parallaly to cont number of matches in two file
        long startTime = System.nanoTime();
        long endTime;
        Future<Integer> future1 = executor.submit(ex1);
        Future<Integer> future2 = executor.submit(ex2);
        int count1 = future1.get();
        int count2 = future2.get();
        endTime = System.nanoTime();
        long duration = endTime - startTime;
        System.out.println("duration with threads:"+duration);
        executor.shutdown();
        System.out.println("Matches: " + (count1 + count2));

        startTime = System.nanoTime();
        ex1.call();
        ex2.call();
        endTime = System.nanoTime();
        duration = endTime - startTime;
        System.out.println("duration without threads:"+duration);

    } catch (Exception e) {
        System.err.println("Error: " + e.getMessage());
    }
}
}

class Exampless implements Callable {

public static int[] arr = new int[20000];
public String _name;

public Exampless(String name) {
    this._name = name;
}

static void createArray(int z) {
    for (int i = z; i < z + 20000; i++) { //shared array
        arr[i - z] = i;
    }
}

public Object call() {
    try {
        int cnt = 0;
        FileInputStream fin = new FileInputStream(_name);
        DataInputStream din = new DataInputStream(fin);      // read file and calculate number of matches
        for (int i = 0; i < 20000; i++) {
            int c = din.readInt();
            if (c == arr[i]) {
                cnt++;
            }
        }
        return cnt ;
    } catch (Exception e) {
        System.err.println("Error: " + e.getMessage());
    }
    return -1 ;
}

} 
```

我试图用两个文件计算数组中的匹配数。现在，虽然我在两个线程上运行它，但代码表现不佳，因为：

（在单线程上运行，文件 1 + 文件 2 读取时间）<（文件 1 || 文件 2 多线程读取时间）。

谁能帮我解决这个问题（我有 2 个核心 CPU，文件大小约为 1.5 GB）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T16:32:59.267

在第一种情况下，您正在按顺序读取一个文件，逐字节，逐块。这与磁盘 I/O 一样快，前提是文件不是很碎片化。当您完成第一个文件时，磁盘/操作系统会找到第二个文件的开头并继续非常有效地线性读取磁盘。

在第二种情况下，您不断地在第一个文件和第二个文件之间切换，迫使磁盘从一个地方到另一个地方寻找。这个额外的搜索时间（大约 10 毫秒）是您困惑的根源。

哦，您知道磁盘访问是单线程的，并且您的任务是 I/O 绑定的，因此只要您从同一个物理磁盘读取，就没有办法将此任务拆分为多个线程会有所帮助？只有在以下情况下，您的方法才能被证明是合理的：

*   除了从文件中读取之外，每个线程还执行一些 CPU 密集型或阻塞操作，与 I/O 相比要慢一个数量级。

*   文件位于不同的*物理*驱动器（不同的分区是不够的）或某些 RAID 配置上

*   您正在使用 SSD 驱动器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:54:20.987

正如 Tomasz 从磁盘读取数据所指出的那样，您不会从多线程中获得任何好处。如果您对检查进行多线程处理，则速度可能会有所提高，即将文件中的数据按顺序加载到数组中，然后线程并行执行检查。但是考虑到您的文件很小（~80kb）以及您只是比较整数的事实，我怀疑性能改进是否值得付出努力。

如果您不使用 readInt()，肯定会提高您的执行速度。由于您知道要比较 20000 个整数，因此您应该为每个文件（或至少在块中）一次将所有 20000 个整数读入一个数组，而不是调用 readInt() 函数 20000 次。

# maven - maven-rpm-plugin 和 rpm-maven-plugin 有什么区别

> ID：11744731
> 
> 赞同：5
> 
> 时间：2012-07-31T16:24:19.713
> 
> 标签：maven, rpm, rpm-maven-plugin

我在网上看到了对两者的引用，但找不到原因。有区别吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T17:01:50.640

maven-rpm-plugin 是该插件的旧版本（我怀疑它与 maven-1 一起使用）。[rpm-maven-plugin](http://www.mojohaus.org/rpm-maven-plugin/)是适用于当前版本的 maven 的插件。你应该使用这个。

# pgrouting - 使用 PostGIS 为 pgRouting 创建图形？

> ID：11744736
> 
> 赞同：0
> 
> 时间：2012-07-31T16:24:47.013
> 
> 标签：pgrouting

让线 A (0.98,0.562,3.27536,5.9723) 和线 B (3.33221,5.899287,10.7656,9.653627)。pgrouting 是否将 (3.27536,5.9723) 或 (3.33221,5.899287) 附近的一个点作为节点？真的这两点只是一个，它们只有一点误差范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:32:04.047

当您构建图表时

[为 pgrouting 创建图形](http://docs.pgrouting.org/2.2/en/src/topology/doc/pgr_createTopology.html)

您需要指定捕捉范围。这样，真正接近的点将捕捉到同一个节点..

```
 SELECT assign_vertex_id(table_name, snapping_range, geometry_column_name, edge_id_column_name); 
```

例子

```
SELECT assign_vertex_id('ways', 0.00001, 'the_geom', 'gid'); 
```

# javascript - Jquery 和 CSS 奇怪地预演

> ID：11744743
> 
> 赞同：0
> 
> 时间：2012-07-31T16:25:06.533
> 
> 标签：javascript, jquery, html, css, ajax

我有这部分代码（我会指出我感到困惑的地方，只是添加了那堵巨大的墙以防万一有人想真正深入研究）。

无论如何，行为是显示这些框，当您单击一个框时，该框会展开，并显示更多信息。这在 70% 的情况下都有效，但是，当图像没有被缓存时，当您再次单击该框以最小化它时，它开始最小化，然后又弹出。我想知道这是否与这条线有关：`if($(this)[0].style.width == '70%'){`

如果这还不够，请随时询问，如果您想尝试复制该问题：

[http://newgameplus.nikuai.net/](http://newgameplus.nikuai.net/)

尝试搜索一些游戏，然后单击结果。（那只是在我说的没有意义的情况下）

谢谢你。

```
$container.on("click", ".box", function (event) {
    var description;
    var user_id;
    var org_img = $(this).find("img").attr("src");
    if ($(this)[0].style.width == '70%') {
        $(this).find("img").attr("src", org_img);
        $(this).css('width', '18%');
        $(this).find(".resultData").fadeOut('slow');
        $container.masonry('reload');
    } else {
        var me = this;
        value['name'] = $(me).find("p").html();
        oldImage = $(this).find("img").attr("src");
        $.ajax({
            url: 'scripts/php/fetchResultsData.php',
            data: {
                action: value
            },
            type: 'post',
            dataType: 'json',
            success: function (data) {
                description = data[0][2];

                for (var i = 0; i < $test.length; i++) {
                    if ($test[i][1][2]['name'] == value['name']) {
                        pos = i;
                        break;
                    }
                }

                $(me).find("img").attr("src", data[0][4]);
                $(me).css('width', '70%');

                $(me).append("\
                                        <div class='resultData'>\
                                            <div class='resultName'>" + value['name'] + "</div>\
                                            <div class='resultDesc'>" + description + "</div>\
                                            <div class='reasonDataTitle'> Similar tropes between this game and the searched games </div>\
                                            <div class='reasonData'>" + $test[pos][4] + "</div>\
                                            <div class='wikiLink'><a href='http://wikipedia.org/wiki/" + value['name'] + "'>Wikipedia</a></div>\
                                            <div class='resultLike'></div>\
                                        </div>");
                value['clicked'] = 0;
                $.ajax({
                    url: 'scripts/php/userProfile.php',
                    data: {
                        action: value
                    },
                    type: 'post',
                    dataType: 'json',
                    success: function (profileData) {
                        if (profileData == 'alreadyAdded') {
                            $(me).children('.resultData').children('.resultLike').html('un-Favourite');
                        } else if (profileData == 'notLoggedIn') {
                            $(me).children('.resultData').children('.resultLike').html('Login to add');
                        } else {
                            $(me).children('.resultData').children('.resultLike').html('Favourite?');
                        }
                    }
                });
                $(me).on("click", '.resultLike', function (event) {
                    event.stopPropagation()
                    value['clicked'] = 1;
                    $.ajax({
                        url: 'scripts/php/userProfile.php',
                        data: {
                            action: value
                        },
                        type: 'post',
                        dataType: 'json',
                        success: function (profileData) {
                            if (profileData == 'removed') {
                                $(me).children('.resultData').children('.resultLike').html('Favourite?');
                            } else if (profileData == 'notLoggedIn') {
                                $(me).children('.resultData').children('.resultLike').html('Login to add');
                            } else {
                                $(me).children('.resultData').children('.resultLike').html('un-Favourite');
                            }
                        }
                    });
                });
                $container.masonry('reload');
            }

        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:12:54.427

我怀疑您的效果代码中存在竞争条件。jQuery 效果异步运行，因此`$container.masonry('reload')`将在`fadeOut`启动时调用，而不是在完成后调用。如果 jQuery Masonry 插件影响了您正在淡出的任何块的显示（并且它的文档表明这很有可能），那么同时运行的两个函数的竞争条件将取消第一个。

要解决此问题，请尝试在回调函数中运行 Masonry 重新加载`fadeOut`，如下所示：

```
$(this).find(".resultData").fadeOut('slow', function () {
    $container.masonry('reload');
}); 
```

它只是有时发生的原因是基于加载速度，这可以解释为什么它只在某些资产没有被缓存时发生。

# apache - 将 url 重定向到现有服务器

> ID：11744745
> 
> 赞同：0
> 
> 时间：2012-07-31T16:25:07.937
> 
> 标签：apache, url, redirect

我最近为我的网站 mydomainname.com 购买了一个域 mydomainname.ca，我希望 .ca 重定向到 .com。我对设置网络域等非常陌生，因为我的网站以前是由另一个人设置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:47:43.513

有多种可能性，只要您不指定确切的部署，我将解释所有（希望）它们：

*   如果您只有一个域并且可能有一个 dns，请将 .ca 域路由到 mydomainname.com 所在的网络服务器，然后将虚拟主机别名添加到您的 .com 网络服务器配置
*   如果您有域和虚拟主机，并且前​​一个选项不可行（即您无权访问 httpd 配置），请使用`HTTP meta-redirect tag`或`Location:`标头重定向到您的 .com 域

参考：

*   Apache2 配置：[http ://httpd.apache.org/docs/2.2/vhosts/name-based.html](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)
*   HTML 元标记：[http ://en.wikipedia.org/wiki/Meta_refresh](http://en.wikipedia.org/wiki/Meta_refresh)
*   PHP头函数： http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

# objective-c - 在资源中移动 .lproj 文件

> ID：11744748
> 
> 赞同：2
> 
> 时间：2012-07-31T16:25:10.247
> 
> 标签：objective-c, xcode, macos, localization, internationalization

我正在尝试开始对一个项目进行本地化，并且我已经有了 Localizable.strings 的英文版。我现在正在尝试将法语添加到该文件中，该文件正在创建一个 fr.lproj 文件夹，正如我所期望的那样。但是，它将它放在我的项目根目录中，我希望它在我的项目的资源目录中。

Xcode 似乎对让我移动文件没有兴趣，如果我在 Finder 中移动它，它会在 Xcode 中按预期变为红色，但不允许我单击定位文件。

我已经尝试在 Finder 中移动它，然后在文本编辑器中编辑 project.pbxproj 以添加`Resources/`到其中唯一提到的行的前面，`fr.lproj/Localizable.strings`这已经奏效了，但是在这样做之后，项目的目标在 Xcode 中也变成了红色，并且构建应用程序并不会改变这一事实。很奇怪..知道会发生什么，或者如何进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:54:27.700

这可能是一个真正的痛苦。在尝试更正不需要的文件位置时，我什至遇到了 XCode 崩溃。我发现最好的方法是在 XCode 之外创建本地化文件（无论是`.strings`还是`.xib`）作为源语言版本的副本，然后将其拖放到 XCode 中。如果您这样做，那么 XCode 将正确显示它，并且您的目标的 Build Phases > Copy Bundle Resources 设置将包括它的正确位置。我不知道为什么您的目标显示为红色，也许您可​​以在 Copy Bundle Resources 下查看以防出现任何问题，或者如果您还没有这样做，也可以选择您的项目并单击 Validate Settings。

此外，如果您一直在模拟器中进行测试，请注意[XCode 不会清理您的应用程序包中的文件——您](https://stackoverflow.com/questions/5262384/ios-localization-inconsistency?rq=1)可能需要删除该应用程序并再次运行它以确保它与您的新位置一起使用。

# solr - solr 在 authority-example.jar 中加载manifoldcf 搜索组件时出错

> ID：11744752
> 
> 赞同：0
> 
> 时间：2012-07-31T16:25:29.220
> 
> 标签：solr, jetty

我正在使用带有manifoldcf .5.1 的solr 4.0 alpha，我下载并构建了authority-example.jar 并放置在example/solr/lib 中，并将适当的行添加到solrconfig.xml。我注意到 authority-example.jar 是用 solr v3.2 jar 构建的，这与 solr4.0 兼容吗？如果我将所有旧罐子换成新罐子，我可以重建罐子吗？我该如何解决？请告知...错误是：

```
SEVERE: null:org.apache.solr.common.SolrException: Error loading class 'org.apac
he.solr.mcf.ManifoldCFSearchComponent'
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.
java:415)
        at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:420)
        at org.apache.solr.core.SolrCore.createInitInstance(SolrCore.java:463)
        at org.apache.solr.core.SolrCore.initPlugins(SolrCore.java:1824)
        at org.apache.solr.core.SolrCore.initPlugins(SolrCore.java:1818)
        at org.apache.solr.core.SolrCore.initPlugins(SolrCore.java:1851)
        at org.apache.solr.core.SolrCore.loadSearchComponents(SolrCore.java:906)

        at org.apache.solr.core.SolrCore.<init>(SolrCore.java:572)
        at org.apache.solr.core.SolrCore.<init>(SolrCore.java:504)
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:816)
        at org.apache.solr.core.CoreContainer.load(CoreContainer.java:510)
        at org.apache.solr.core.CoreContainer.load(CoreContainer.java:333)
        at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContain
er.java:282)
        at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.ja
va:101)
        at org.eclipse.jetty.servlet.FilterHolder.doStart(FilterHolder.java:114)

        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLife
Cycle.java:59)
        at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.ja
va:754)
        at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletC
ontextHandler.java:258)
        at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.jav
a:1221)
        at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandle
r.java:699)
        at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:454
)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLife
Cycle.java:59)
        at org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(Stan
dardStarter.java:36)
        at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:1
83)
        at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentM
anager.java:491)
        at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.j
ava:138)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(Scan
ningAppProvider.java:142)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(Sc
anningAppProvider.java:53)
        at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:604)
        at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:535)
        at org.eclipse.jetty.util.Scanner.scan(Scanner.java:398)
        at org.eclipse.jetty.util.Scanner.doStart(Scanner.java:332)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLife
Cycle.java:59)
        at org.eclipse.jetty.deploy.providers.ScanningAppProvider.doStart(Scanni
ngAppProvider.java:118)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLife
Cycle.java:59)
        at org.eclipse.jetty.deploy.DeploymentManager.startAppProvider(Deploymen
tManager.java:552)
        at org.eclipse.jetty.deploy.DeploymentManager.doStart(DeploymentManager.
java:227)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLife
Cycle.java:59)
        at org.eclipse.jetty.util.component.AggregateLifeCycle.doStart(Aggregate
LifeCycle.java:63)
        at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHand
ler.java:53)
        at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrappe
r.java:91)
        at org.eclipse.jetty.server.Server.doStart(Server.java:263)
        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLife
Cycle.java:59)
        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:12
15)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:113
8)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jetty.start.Main.invokeMain(Main.java:457)
        at org.eclipse.jetty.start.Main.start(Main.java:602)
        at org.eclipse.jetty.start.Main.main(Main.java:82)
Caused by: java.lang.ClassNotFoundException: org.apache.solr.mcf.ManifoldCFSearc
hComponent
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.net.FactoryURLClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.
java:399)
        ... 52 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:49:27.050

好的，我想通了，但是这本书（ManifoldCF in Action）不清楚。我构建了 authority-example.jar 并将它与 apache-solr-mcf-4.0-SNAPSHOT.jar 及其依赖项一起放在 SOLR_HOME/lib 目录中。这解决了很多错误，例如上面的错误。下一个问题是在 solrconfi.xml 文件中放入什么。书上说把这个放进去：

```
<requestHandler name="search" class="solr.SearchHandler" default="true">
<arr name="last-components">
<str>manifoldCFSecurity</str>
</arr>
...
</requestHandler> 
```

好吧，这行不通！要修复它，您需要采取胆量（last-components 和manifoldcfsecurity）并将它们放入requesthandlers /browse /select /query 等，然后相应地过滤查询结果！我很自然地认为，出于显而易见的原因，大多数请求处理程序（如果不是所有请求处理程序）都需要打开安全性。我还假设上面的请求处理程序必须是 name="/search" 才能工作，但我还没有尝试过。

# jquery - 全宽问题

> ID：11744762
> 
> 赞同：0
> 
> 时间：2012-07-31T16:26:08.023
> 
> 标签：jquery, html, css

![在此处输入图像描述](../Images/5115a174adc631cfb550e3d8f11fef0c.png)由于某种原因，我在我的网站上拥有的图像不再是全宽的。

从我所看到的一切都设置为 100% 宽度。

[http://cargocollective.com/btatest](http://cargocollective.com/btatest)

我有没有在某个地方上菜？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:33:59.643

改变：

```
margin-left: -50%;
margin-right: -50%; 
```

到：

```
margin-left: -100%;
margin-right: -100%; 
```

## 前：

> ![在此处输入图像描述](../Images/3063df806f712743cbac19b760a4c5be.png)

## 后：

> ![在此处输入图像描述](../Images/2fb439d9fe35b5b02db1291407c99f3b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:41:27.537

我认为您需要更改一些 html 代码。

尝试通过这样做来避免负边距：

设置`width: 100%;`为和。`id="content_container"`_ 设置您想要的任何宽度（推荐 - 小于 1000 像素）。然后从. .`id="maincontainer"``class="entry"``class="project_content"``class="social"``class="project_content"``Set width: 100%` `in class="social"`

有很多变化，所以我无法描述全部。我已经更改了您的 js，以及一些 css 和 html。你会看见。这是您的代码，只需从此处复制并进行测试。这里不是很好的预览，而是在你的编辑器中复制代码。现在看起来很好。[http://jsfiddle.net/BsJsk/](http://jsfiddle.net/BsJsk/)

# python - 使用 Perl 进行虚拟屏幕抓取

> ID：11744771
> 
> 赞同：-2
> 
> 时间：2012-07-31T16:26:29.217
> 
> 标签：python, perl, imagemagick, screen-scraping, mechanize

是否可以在 Perl 或 Python 中进行虚拟屏幕抓取？假设我有一个登录页面，一旦我输入用户名或密码，它就会将我带到另一个身份验证页面，我必须在其中编写验证码读取的内容。现在使用 Mechanize 或类似工具，我可以自动化第一步。但是，对于第二步，是否可以通过 Perl 捕获验证码页面的屏幕截图（虚拟的，因为我们并没有真正在浏览器中加载页面）？一旦完成，也许我可以自动化一个验证码阅读工具（谷歌有一个），它将尝试阅读它。（所有此类验证码页面都会将验证码图像放在固定大小的框中的固定位置，因此我可以使用 Imagemagick 裁剪屏幕截图的该部分并将其提供给 Google 工具。需要进行几次试错才能找出屏幕截图的哪个部分包含验证码）。那么有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:13:01.750

您根本不需要模拟或对屏幕做任何事情。只需跟踪 CAPTCHA 请求其图像数据的位置并自行下载 - 您将拥有准备好的图像文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:36:21.013

我最喜欢的验证码绕过是[deathbycaptcha](http://deathbycaptcha.com/)。他们有一个可用于大多数语言的 api。还有另一种服务可以让您解决验证码以获得未来解决方案的信用，但我现在不记得它的名称。

# api - Oauth 2.0 是否需要消费者密钥/消费者秘密

> ID：11744772
> 
> 赞同：13
> 
> 时间：2012-07-31T16:26:32.577
> 
> 标签：api, rest, authentication, oauth, oauth-2.0

显然，在使用 OAuth 1.0 时，您需要从 API 提供者那里获取消费者密钥和消费者秘密......

但是当我尝试使用 Facebook、Google Oauth 2.0 等 OAuth 2.0 API 时，我从不需要获取消费者密钥/消费者密钥（我为 Facebook 获取了 App ID 和 App 密钥，但它们与消费者密钥/消费者密钥不同我对么？）

所以我的问题是......当使用 Oauth 2.0 时，您不需要像 Oauth 1.0 那样拥有消费者密钥/消费者秘密吗？

Oauth 2.0 也不需要签名方法（HMAC-SHA1 等），对吗？HMAC-SHA1 仅与 Oauth 1.0 相关，对吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T18:05:54.850

1.  OAuth 2 提供商通常会为您的客户端/应用程序和一些秘密/密码发出标识符，OAuth 草案称这些[*客户端标识符*和*客户端密钥*](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-30#section-2.3.1)。这些用于检查调用是否真的由您的应用程序发出。但是，OAuth 涵盖了不同的[授权授予流程](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-30#section-1.3)，这些流程或多或少是安全的，并且并不都需要某种秘密。Google 称它们为*client ID*和*client secret*，Facebook 称它们为*App ID*和*App Secret*，但它们都是相同的。
2.  是的，在 OAuth 2 中，所有加密步骤都移到了服务器端。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-13T11:56:22.433

您所指的授权授予流程在 OAuth 2 规范中称为客户端凭据授予流程。它用于执行仅限应用程序的身份验证。这意味着没有用户参与。一个典型的例子是在主页上显示 twitter 提要。

通常，应用程序通过 HTTPS 将使用者密钥（或应用程序 ID）和使用者密码（或应用程序密码）传递给服务器。此请求仅受 HTTPS 保护；没有额外的加密。服务器返回一个令牌，您可以从那时起使用该令牌向 API 发出请求 - 因为它不需要用户上下文。

使用者密钥（或应用程序 ID）标识您的应用程序并且可能具有有意义的值。您通常不会（或不能）再更改此设置。但是，如果您认为消费者机密已被泄露，则可以重新生成消费者机密。这就解释了为什么有两个键。

重新生成消费者密钥不同于使令牌无效，如果消费者密钥和消费者密钥已被泄露，这将无济于事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-05T09:32:46.573

两者都是一样的。应用程序/用户/客户端使用的术语不同。就是这样。两者都是一样的。

# jquery - 通过提交“点击”触发器提交了两次 HTML 表单

> ID：11744773
> 
> 赞同：3
> 
> 时间：2012-07-31T16:26:40.193
> 
> 标签：jquery, html, jsp, form-submit

我很抱歉发布了一个类似于 SO 上近 100 个问题的问题。我读了很多，尝试了几个解决方案，但无法解决我的问题或完全将答案与我的问题联系起来。

1.  我有`form`一个动作，输入帖子。
2.  我有一个`<input type="submit">`这种形式。
3.  `click`我需要通过在此输入上触发“”来提交此表单。我做的`$('#imageUploadSubmit').click()`;

我不应该绕过“点击”这个提交按钮，因为还有其他与此相关的事件，这些事件是必不可少的并且来自 Struts jQuery。因此我不能直接提交表格。

问题：我的表单`action`（uploadImage）被调用了两次。我无法阻止它。

JSP的相关部分：

```
<s:form id="image-upload-form" action="uploadImage" method="post" enctype="multipart/form-data">
    <s:file name="userImage" label="User Image" id="userImageFile" />
    <input type="hidden" id="idForUpload" name="idForUpload" value="<s:property value="imageUploadReqAttrib.imageName" />" />
    <sj:submit id="imageUploadSubmit" value="Select Image" targets="previewImageDiv" 
        indicator="indicator" onBeforeTopics="before" onCompleteTopics="complete" style="display:none;"/>
</s:form> 
```

和生成的 Html（带有相关元素）

```
<form id="image-upload-form" name="image-upload-form" action="/foo/uploadImage.action" method="post" enctype="multipart/form-data">
      <input type="file" name="userImage" value="" id="userImageFile"></td>
      <input type="hidden" id="idForUpload" name="idForUpload" value="1371711900.jpg">
      <input type="submit" id="imageUploadSubmit" value="Select Image" style="display:none;">
</form> 
```

有没有一种方法可以让我找出在该点击时和之后触发的所有事件？在 Chrome 检查器中？提琴手？

我会很感激任何指示。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:53:24.823

在谷歌搜索更多之后，这似乎是问题所在：struts2-jquery-plugin 的所有版本> 2.1.0 都有这个问题。现在，我不确定问题是我使用插件的方式还是它实际上是一个错误。社区中一个公开的 bug 让我觉得这是一个 bug。

所以，我从 struts2-jquery-3.3 转移到 struts2-jquery-2.1.0 :|

# jquery - jQuery preventDefault

> ID：11744777
> 
> 赞同：0
> 
> 时间：2012-07-31T16:26:49.283
> 
> 标签：jquery

嗨，我有以下代码：

```
collapsed.on('click', 'a',function(c) {
    c.preventDefault();
}); 
```

Collapsed 基本上是一个 div 元素，在这个 div 内部有一个锚标记，由于阻止功能，它就目前而言它不起作用。预防功能需要在那里。即使使用 preventDefault 函数，有没有办法让该锚标记在该 div 内工作？

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:32:57.680

这将使用户以愉快的方式前进。

```
collapsed.on('click', 'a',function(c) {
    c.preventDefault();
    window.location = this.href

    /*
      other options include:
      window.location = $( this ).attr( 'href' );
      window.location = this.getAttribute( 'href' );
      window.location = 'http://staticurl.com';
    */
}); 
```

不过，我怀疑您的标记存在设计缺陷……如果您发布该内容，也许您可​​以避免链接上的 preventDefault 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:22:18.113

问题解决了......我没有在手风琴中的关闭 div 之一“collapsed”上应用点击事件，而是在一般手风琴 div 上应用了点击事件。

多谢你们

# postgresql - windows远程访问postgresql

> ID：11744779
> 
> 赞同：3
> 
> 时间：2012-07-31T16:27:06.237
> 
> 标签：postgresql

我在 windows server 2003 上安装了 PostgreSQL 版本 8.3.19。配置后，我可以本地访问（从 php 脚本）但不能远程访问（从另一个类似的 php 脚本，从另一台机器）。
1) 为端口 5432 配置和测试 NAT
2) 防火墙授权应用程序
3) 我设置 pg_hba.conf 文件：

```
host all all 0.0.0.0/0 md5 
```

4）我设置了postgresql.conf：

```
listen_addresses='*' 
```

5) 我使用 pgAdminIII 创建了一个角色，用于从应用程序进行访问。我宣布他为超级用户（仅用于测试）并将他命名为 TOTO
6）我的本地脚本是：

```
$con=pg_connect("host=localhost port=5432 user=TOTO password=PW dbname=test") 
```

7）我的远程脚本是：

```
$con=pg_connect("host=myhostname port=5432 user=TOTO password=PW dbname=test") 
```

我看不出我能忘记什么。你能点亮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:48:38.753

如果您遇到超时，那么正如 mask8 所说，这可能是防火墙配置问题。看看您是否可以从服务器本身连接到您的目标 IP。还要在 postgresql 的配置中启用连接日志记录。

哦，除非你真的必须使用那个版本，否则安装 9.1，8.3 很快就要退役了。

# php - 解析 JSON 返回 NULL iOS

> ID：11744781
> 
> 赞同：0
> 
> 时间：2012-07-31T16:27:10.137
> 
> 标签：php, iphone, json, null

我正在尝试解析 JSON 字符串：

```
array(3) {
  ["result"]=>
  string(7) "success"
  ["source"]=>
  string(12) "setWorldTime"
  ["success"]=>
  bool(true)
} 
```

使用此代码：

```
SBJsonParser *parser = [[SBJsonParser alloc] init];

    // Prepare URL request to download statuses from Twitter
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://localhost/con.php?m=setWorldTime&a=London,0"]];

    // Perform request and get JSON back as a NSData object
    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    // Get JSON as a NSString from NSData response
    NSString *json_string = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding];
    NSLog(json_string);
    // parse the JSON response into an object
    // Here we're using NSArray since we're parsing an array of JSON status objects
    NSDictionary *statuses = [parser objectWithString:json_string error:nil];
    NSLog(@"OK: %@", [[statuses objectForKey:@"array"] objectForKey:@"result"]); 
```

但不是输出'OK：成功'，而是输出'OK：（null）'如果您需要PHP脚本，我可以发布它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:27:46.273

你拥有的那个字符串除了 JSON 之外的任何东西......看起来像`var_dump()`或来自 PHP 的东西。这就是它无法解析的原因。

你需要[`json_encode()`](http://php.net/manual/en/function.json-encode.php)在你的 PHP 端使用。

# shopify - 联邦快递运输代码

> ID：11744787
> 
> 赞同：1
> 
> 时间：2012-07-31T16:27:29.810
> 
> 标签：shopify, fedex

我正在寻找与不同 FedEx 运输方式相关的代码列表。

这是我们正在做的事情的总结。我们有一个 Web Hook 设置，可以将我们的所有订单转发到一个门户，该门户组织订单并将订单发送到我们履行中心的 3PL。我们想开始转发我们需要分配给数字的正确运输方式。因此，需要针对每种不同的运输方式通过网络挂钩发送到我们的门户网站的代码。抱歉，如果我措辞不当，我不是这里的技术人员哈哈。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T14:24:24.177

以下是有效代码列表：

```
PRIORITY_OVERNIGHT
PRIORITY_OVERNIGHT_SATURDAY_DELIVERY
FEDEX_2_DAY
FEDEX_2_DAY_SATURDAY_DELIVERY
STANDARD_OVERNIGHT
FIRST_OVERNIGHT
FIRST_OVERNIGHT_SATURDAY_DELIVERY
FEDEX_EXPRESS_SAVER
FEDEX_1_DAY_FREIGHT
FEDEX_1_DAY_FREIGHT_SATURDAY_DELIVERY
FEDEX_2_DAY_FREIGHT
FEDEX_2_DAY_FREIGHT_SATURDAY_DELIVERY
FEDEX_3_DAY_FREIGHT
FEDEX_3_DAY_FREIGHT_SATURDAY_DELIVERY
INTERNATIONAL_PRIORITY
INTERNATIONAL_PRIORITY_SATURDAY_DELIVERY
INTERNATIONAL_ECONOMY
INTERNATIONAL_FIRST
INTERNATIONAL_PRIORITY_FREIGHT
INTERNATIONAL_ECONOMY_FREIGHT
GROUND_HOME_DELIVERY
FEDEX_GROUND
INTERNATIONAL_GROUND 
```

来自联邦快递文档：[http ://www.fedex.com/us/solutions/wis/pdf/xml_transguide.pdf?link=4](http://www.fedex.com/us/solutions/wis/pdf/xml_transguide.pdf?link=4)

我也将此列表添加到[Shopify Wiki](http://wiki.shopify.com/FedEx_Shipping_Codes)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T23:28:05.960

问题是，您的 3PL 期望的值可能不是真正的“运营商”值，因此无法为您提供这样的列表。

这些是 FedEx 期望的当前列表中的 Web 服务的值。XML API 已停用，不支持所有服务。

```
FEDEX_1_DAY_FREIGHT
FEDEX_2_DAY
FEDEX_2_DAY_AM
FEDEX_2_DAY_FREIGHT
FEDEX_3_DAY_FREIGHT
FEDEX_EXPRESS_SAVER
FEDEX_FREIGHT_ECONOMY
FEDEX_FREIGHT_PRIORITY
FEDEX_GROUND
FIRST_OVERNIGHT
GROUND_HOME_DELIVERY
INTERNATIONAL_ECONOMY
INTERNATIONAL_ECONOMY_FREIGHT
INTERNATIONAL_FIRST
INTERNATIONAL_PRIORITY
INTERNATIONAL_PRIORITY_FREIGHT
PRIORITY_OVERNIGHT
SMART_POST
STANDARD_OVERNIGHT 
```

# c# - Monotouch TouchUpInside 不工作，TouchDown 工作

> ID：11744789
> 
> 赞同：3
> 
> 时间：2012-07-31T16:27:32.543
> 
> 标签：c#, xamarin.ios, uibutton, xamarin, touch-up-inside

我在 Objective-C 中看到了一些关于这个主题的主题。我读了很多，花了 2 天时间试图找到解决方案，但没有一个对我有用。我主要用 C# 编码。由于我的问题行为（仅在离开/重新输入按钮时触发）和上下文（C#）有点不同。所以，我会在这里问我的问题来试试我的机会。

我会尽量保持简单。

这是一个代码示例：

```
private UIButton _buttonTest;

public override void ViewDidLoad ()
{
    base.ViewDidLoad ();

    _buttonTest = new UIButton(new RectangleF(10, 70, 50, 50));
    _buttonTest.SetTitle("0", UIControlState.Normal);
    _buttonTest.TouchUpInside += HandleButtonTestTouchUpInside;
    _buttonTest.BackgroundColor = UIColor.Red;
    this.View.AddSubview(_buttonTest);
}

void HandleButtonTestTouchUpInside (object sender, EventArgs e)
{
    string textNumber = _buttonTest.Title(UIControlState.Normal);

    // Increment Number
    _buttonTest.SetTitle((int.Parse(textNumber)+1).ToString(), UIControlState.Normal);
} 
```

*   有一个按钮，标题文本设置为“0”。
*   当用户点击它时，它会将数字（标题）增加 1。

这段代码通常工作得很好！

但是，由于某些未知原因，它在我的某些课程中不起作用...

这是问题所在：

*   TouchUpInside 不会触发。...但是，如果我用手指按住按钮并在离开按钮时继续按住手指然后重新进入按钮然后释放按钮，那么......它将触发TouchUpInside，......所以手指需要在按住按钮的同时离开并重新租用按钮以使 TouchUpInside 触发。通常，此代码运行良好。

检查的东西：

*   如果我用 TouchDown 替换 TouchUpInside，那么 TouchDown 就可以了。
*   对于所有超级视图，“已启用用户交互”设置为 True。
*   所有视图框架（在超级视图中）似乎都在它们的超级视图框架内。
*   我移动了_buttonTest，我注意到_buttonTest TouchUpInside 在View、SuperView、SuperSuperView 中没有正确触发……但它在SuperSuperSuperView 中正确触发。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:35:38.363

在 SuperSuperView 中，我的这个点击手势与 Button 事件发生冲突。

```
 // Tap Gesture
    UITapGestureRecognizer tapPageGestureRecognizer = new UITapGestureRecognizer();
    tapPageGestureRecognizer.AddTarget(this, new Selector ("HandleTapPageGestureRecognizer:"));         
    this.View.AddGestureRecognizer(tapPageGestureRecognizer); 
```

这个想法是在触发按钮事件 TouchDown 时禁用手势 SuperSuperView 手势，......并在触发 TouchUpInside 时重新启用它。

因此，这是该问题的一种解决方案：

```
private void SetGrandParentViewGestureEnabled(bool enabled)
{
    foreach(UIGestureRecognizer g in this.View.Superview.Superview.GestureRecognizers)
    {
        g.Enabled = enabled;
    }
}

void HandleButtonSubmitTouchDown (object sender, EventArgs e)
{
    SetGrandParentViewGestureEnabled(false);
}

void HandleButtonSubmitTouchUpInside (object sender, EventArgs e)
{
    // => Do treatments here!

    SetGrandParentViewGestureEnabled(true);
} 
```

但是，我可以使用 EventHandler 或 Action 来启用/禁用点击手势。

编辑：这是另一个需要添加的功能以重新启用手势。

```
void HandleButtonSubmitTouchUpOutside (object sender, EventArgs e)
{
    SetGrandParentViewGestureEnabled(true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:54:12.687

我有一个类似的问题，我最终使用了一个点击识别器和长按识别器，就像按钮 TopRightButton 一样。

```
 var longPressGesture = new UILongPressGestureRecognizer(Action);
            TopRightButton.AddGestureRecognizer(longPressGesture);

            var tapRecognizer = new UITapGestureRecognizer();

            tapRecognizer.AddTarget(() =>
                                    {
            //method
            });

            tapRecognizer.NumberOfTapsRequired = 1;

            this.TopRightButton.AddGestureRecognizer(tapRecognizer); 
private void Action(){  }; 
```

# php - Mysql更新但保留旧数据？

> ID：11744793
> 
> 赞同：1
> 
> 时间：2012-07-31T16:27:41.900
> 
> 标签：php, mysql

在客户 CMS 中，客户可以更新他们的个人信息，例如更改他们的地址和名字/姓氏。我为此使用 mysql`UPDATE`查询。

像这样工作的问题是人们可以更改他们的信息。例如，将他们的名字从 更改`john doe`为`asdfdas`。我想保存他们的旧信息。

我有哪些选择？做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:31:43.880

假设用户有一个唯一的 ID，您可以有一个`old_user_information`表，并且当您进行更新时，还会在该表中创建一个新条目。该表将具有自动生成的 ID 以及唯一的用户 ID 和其余用户过去的信息。

用户可以在此表中有多行，但在实际表中只有一行`Users`。

编辑：如果我是你，我会编写一个存储过程来完成这两件事，以便在事情发生变化时更容易管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:31:45.690

您可以制作包含此类内容的表格

```
`yourTableID, field, value, date` 
```

并用触发器更新它。您编写一个`update`触发器，如果​​旧值被更改，它会添加它。在此处查看[手册](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)以了解有关触发器的更多信息。

如果您不想使用触发器，您显然可以在逻辑中执行相同的操作：只需使用旧值更新历史记录表。但这需要一些技巧来确定*是否*需要更新它，但没有什么复杂的。

为了方便检索发生的事情，您可能需要添加“oldvalue”和“newvalue”之类的内容，但实际上并不需要后者，因为它在下一次更新中作为“旧”值，或者它是当前值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:32:02.017

为正在更新的数据创建新列`column`将是`prior_to_update_column`

更新时，将旧信息移入`prior_to_update_column`

如果用户再次更新，则附加到`prior_to_update_column`分隔符`,`（看起来像一个数组）。

这应该保留用户更新的所有先前信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:32:56.307

添加一个额外的字段名称版本并使用插入而不是更新

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-03-03T13:42:44.873

あの回答えのとうりに、やってない。 UPDATE `table name`SET `column`= `column`+'new value' WHERE`condition`

# javascript - json_encode 与多维数组返回字符串“数组”而不是数据

> ID：11744795
> 
> 赞同：0
> 
> 时间：2012-07-31T16:27:46.427
> 
> 标签：javascript, jquery, multidimensional-array, json

我正在使用 json、jquery 和 ajax 将一个多维数组传回一个 .php 文件。我的目标本质上是用多个条目填充一个下拉框（id=project）。以下是一些代码片段：

```
$("#turninId").change(function() {

        var user_id = $("#turninId").val();

        $.ajax ( {
          url:"send_input.php",
          type: "POST",
          dataType: "json",
          data:{id_selection: user_id},
          success:function(response) {

            for (var i=0; i<response.proj.length; i++) {
              $("#exp").html(response.proj[i]);
              $("#project").html(response.proj[i]); } });

     }); 
```

在 send_input.php（后端）中，我查询一个数据库，并将信息发送到一个数组。然后我使用 json_encode。

```
$query="SELECT project FROM main";
$results = $db->query($query);
while ($row_id = $results->fetchArray()) {
       $proj_option[] = "<option value=\"".$row_id['project']."\">".$row_id['project']."</option>\n";
           $pselected=$row_id['project'];
}
$output = array( "proj" => "$proj_option");
echo json_encode($output); 
```

我的问题是，这是返回字符串“数组”。

例如，如果我这样做：`response.proj[0]`，我会返回“A”。

是什么赋予了？我见过一些人对此错误有疑问，但没有明确的解决方案。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:35:43.933

这是因为您`$proj_option`通过将字符串括在引号中来转换为字符串。只需删除引号，您将获得数组。

# tomcat - Tomcat 7 管理器 - 禁用命令

> ID：11744804
> 
> 赞同：1
> 
> 时间：2012-07-31T16:28:18.237
> 
> 标签：tomcat

我在 Debian Squeeze 上设置了 Tomcat7。我将 tomcat-users.xml 更改为包含角色“manager-gui”和具有此角色的用户。

当我登录到 manager web admin 时，没有显示部署/取消部署命令以及部署的应用程序。

尽管如此，我还是有一条消息：“主机管理器已安装 - 命令已禁用”。apt-get install tomcat7 tomcat7-admin 以及手动下载和安装都会发生这种情况。

此外，这个 Tomcat 位于代理传递请求的 Nginx 服务器后面。

有谁知道如何让这些命令工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:11:19.277

设置 Tomcat 的管理器 webapp 时最常见的错误不是*取消*注释`conf/tomcat-users.xml`. 注意酌情删除 XML 注释 (`<--`和`-->`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T06:18:07.997

古老的问题，所以我认为它可能不再是一个问题。但供将来参考：问题中描述的页面是“虚拟主机管理器”页面，而不是“Web 应用程序管理器”页面。

*   `http://<server>/host-manager/html/`- 虚拟主机管理器
*   `http://<server>/manager/html/`- 网络应用程序管理器

# java - 解析网页中的多个图像并显示到 android 设备

> ID：11744809
> 
> 赞同：0
> 
> 时间：2012-07-31T16:28:34.587
> 
> 标签：java, android, xml, parsing

我正在尝试解析此链接[http://lawncare.ncsu.edu/RSSFeed.aspx](http://lawncare.ncsu.edu/RSSFeed.aspx)中显示的图像并将其显示在 android 设备中。现在，我只能解析与图像关联的文本。任何人都可以就如何解析这些图像提出任何想法吗？最好不要使用 JSoup，因为我已经完成了一半的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:05:55.790

尝试在此处查看此问题：[如何使用 SAX 解析器解析 XML](https://stackoverflow.com/questions/4827344/how-to-parse-xml-using-the-sax-parser)

特别是达米安和他的解决方案给出的答案。

这是我解析 rss 提要的代码的一部分：

```
 Bundle b = new Bundle();
 b.putString("title", feed.getItem(position).getTitle());
 b.putString("description", feed.getItem(position).getDescription());
 b.putString("content", feed.getItem(position).getContent());
 b.putString("link", feed.getItem(position).getLink());
 b.putString("pubdate", feed.getItem(position).getPubDate().toString()); 
```

我所做的是“字段”同时包含描述（文本）和图像。我将整个“内容”字段内容传递给 WebView 并正确显示图像和文本。

# php - codeigniter 将 URL 重写为小写

> ID：11744812
> 
> 赞同：0
> 
> 时间：2012-07-31T16:28:44.110
> 
> 标签：php, .htaccess, codeigniter-2

即使用户输入大写 URL，如何使 URL 始终为小写？这是在 facebook 中完成的，即使我们输入大写 URL，它也会将其转换为小写。

我已经尝试了 htaccess 中的一些东西，但它们对我不起作用......

没有人可以帮助......？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:32:51.450

我在 CI 论坛上发现了这个......这是剩下的代码都没有用......！！！

```
$server_url = $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
if ($server_url !== strtolower($server_url))
{
  header('Location: http://' . strtolower($server_url), TRUE, 301);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:34:46.970

你看过[`strtolower()`](http://php.net/manual/en/function.strtolower.php)函数吗？

# java - JAXB 编组映射列表列表

> ID：11744813
> 
> 赞同：3
> 
> 时间：2012-07-31T16:28:47.273
> 
> 标签：java, jaxb, marshalling

伙计们，

我不熟悉使用 JAXB 编组和解组对象的世界。

我正在尝试编组一个可以最好地说是地图列表的对象。

我试图达到的最终结果如下：

```
<parametricSearchResult>
   <allFilters>
      <name>custom_year</name>
      <name>abcd</name>
   </allFilters>
   <allFields>
      <field>
         <name>custom_year</name>
         <value count="10">2012</value>
         <value count="8">2011</value>
      </field>
      <field>
         <name>abcd</name>
         <value count="8">2011</value>
      </field>
   </allFields>
</parametricSearchResult> 
```

使用我编写的代码，我将其作为输出

```
<parametricSearchResult>
    <allFilters>
        <name>custom_year</name>
        <name>abcd</name>
    </allFilters>
    <allFields>
        <allFilters>
            <mName>test</mName>
            <field>
                <value count="10">
                    <mValue>2012</mValue>
                </value>
                <value count="8">
                    <mValue>2011</mValue>
                </value>
            </field>
            <name>test</name>
        </allFilters>
        <allFilters>
            <mName>test</mName>
            <field>
                <value count="4">
                    <mValue>2011</mValue>
                </value>
            </field>
            <name>test</name>
        </allFilters>
    </allFields>
</parametricSearchResult> 
```

我的代码如下

**参数搜索结果**

```
@XmlRootElement(name = "parametricSearchResult")
public class ParametricSearchResult {

    private final List<String> mFilterFields = new ArrayList<String>();

    private final List<Map<String, Integer>> mFiltersToCountsMap = new ArrayList<Map<String, Integer>>();

    public void setFilterFields(List<String> fields) {
        mFilterFields.addAll(fields);
    }

    @XmlElementWrapper(name = "allFilters")
    @XmlElement(name = "name")
    public List<String> getFilterFields() {
        return mFilterFields;
    }

    @XmlElement(name = "allFields")
    @XmlJavaTypeAdapter(JAXBParametricSearchResultSerializer.class)
    public List<Map<String, Integer>> getValuesAndCounts() {
        return mFiltersToCountsMap;
    }

    public void addFilterFieldsAndCounts(final String field, final String filterValue, final Integer count) {
        final int index = mFilterFields.indexOf(field.toLowerCase());
        if (index == -1) {
            mFilterFields.add(field.toLowerCase());
            HashMap<String, Integer> mapValuesToCounts = new HashMap<String, Integer>();
            mapValuesToCounts.put(filterValue.toLowerCase(), Integer.valueOf(count));
            mFiltersToCountsMap.add(mapValuesToCounts);
        } else {
            Map<String, Integer> mapValuesToCounts = mFiltersToCountsMap.get(index);
            mapValuesToCounts.put(filterValue.toLowerCase(), Integer.valueOf(count));
        }
    }

    public Map<String, Integer> getFilterValueToCountMap(String filterName) {
        final int index = mFilterFields.indexOf(filterName.toLowerCase());
        if (index == -1) {
            return new HashMap<String, Integer>();
        } else {
            return mFiltersToCountsMap.get(index);
        }
    }   
} 
```

**参数搜索结果类型**

```
public class ParametricSearchResultType {

    private final List<ParametricFilterType> allFilters = new ArrayList<ParametricFilterType>();

    @XmlElement
    public List<ParametricFilterType> getFilters() {
        return allFilters;
    }

    public void setFilter(final ParametricFilterType data) {
        allFilters.add(data);
    }
} 
```

**参数过滤器类型**

```
public class ParametricFilterType {

    private String mName = "";

    private final List<ParametricMapEntryType> mFilterAllEntries = new ArrayList<ParametricMapEntryType>();

    @XmlElement(name = "name")
    public String getName() {
        return mName;
    }

    public void setName(final String data) {
        mName = data;
    }

    public void setAllFilters(final ParametricMapEntryType data) {
        mFilterAllEntries.add(data);
    }

    @XmlElementWrapper(name = "field")
    @XmlElement(name = "value")
    public final List<ParametricMapEntryType> getAllFilterEntries() {
        return mFilterAllEntries;
    }
} 
```

**参数映射条目类型**

```
public class ParametricMapEntryType {

    @XmlValue
    public String mValue;

    @XmlAttribute(name = "count")
    public Integer mCount;

} 
```

**JAXB参数搜索结果序列化器**

```
public class JAXBParametricSearchResultSerializer extends XmlAdapter<ParametricSearchResultType, List<Map<String, Integer>>> {

    @Override
    public ParametricSearchResultType marshal(final List<Map<String, Integer>> data) throws Exception {
        ParametricSearchResultType result = new ParametricSearchResultType();
        for (Map<String, Integer> aMap : data) {
            ParametricFilterType filters = new ParametricFilterType();
            filters.mName = "test";
            for (Map.Entry<String, Integer> anEntry : aMap.entrySet()) {
                ParametricMapEntryType entry = new ParametricMapEntryType();
                entry.mValue = anEntry.getKey();
                entry.mCount = anEntry.getValue();
                filters.mFilterAllEntries.add(entry);
            }
            result.allFilters.add(filters);
        }
        return result;
    }

    @Override
    public List<Map<String, Integer>> unmarshal(final ParametricSearchResultType data) throws Exception {
        return null;
    }

} 
```

**参数搜索结果测试器**

```
public class ParametricSearchResultTester {

    ParametricSearchResult mResult;

    @Before
    public void setUp() throws Throwable {

        mResult = new ParametricSearchResult();
        mResult.addFilterFieldsAndCounts("CUSTOM_YEAR", "2012", 10);
        mResult.addFilterFieldsAndCounts("CUSTOM_YEAR", "2011", 8);
        mResult.addFilterFieldsAndCounts("ABCD", "2011", 4);
    }

    @After
    public void tearDown() throws Throwable {
        mResult = null;
    }

    @Test
    public void testThatMarshallingWorks() throws Throwable {
        JAXBContext context = JAXBContext.newInstance(ParametricSearchResult.class);
        Marshaller marshaller = context.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
        marshaller.marshal(mResult, System.out);
    }
} 
```

在阅读更多文档后对代码进行了一些更改并进行了这些更改后，我最终将其作为输出

```
<parametricSearchResult>
    <allFilters>
        <name>custom_year</name>
        <name>abcd</name>
    </allFilters>
    <allFields>
        <filters>
            <field>
                <value count="10">2012</value>
                <value count="8">2011</value>
            </field>
            <name>test</name>
        </filters>
        <filters>
            <field>
                <value count="4">2011</value>
            </field>
            <name>test</name>
        </filters>
    </allFields>
</parametricSearchResult> 
```

几乎就在那里，但仍然需要对元素进行更多的清理和重新排列。不知道还能在这里做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:05:03.450

JAXB 不擅长处理 Map，因此需要一个适配器。基本上，大多数地图适配器将地图转换为条目列表。一旦你有了一个好的适配器，你就可以拥有一个扩展 List> 的对象，然后该对象可以包含到 List 本身中。

您可能能够让您的 XML 看起来与您希望的完全一样，但需要更多的摆弄，但是当用于实例化泛型的类型不同时，此解决方案将不可移植。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:02:04.887

I'm sorry. I can't give you the very expected answer without any deep understanding of your requirements, business, and so on.

Here comes my pseudo try.

```
@XmlAccessorType(XmlAccessType.NONE)
@XmlRootElement
@XmlType(propOrder = {"filterNames", "fields"})
public class ParametricSearchResult {

    @XmlAccessorType(XmlAccessType.NONE)
    @XmlType(propOrder = {"name", "values"})
    public static class Field {

        public static Field newInstance(final String name,
                                        final Value... values) {

            final Field instance = new Field();

            instance.setName(name);

            for (Value value : values) {
                instance.getValues().add(value);
            }

            return instance;
        }

        @XmlAccessorType(XmlAccessType.NONE)
        public static class Value {

            public static Value newInstance(final int count,
                                            final String value) {

                final Value instance = new Value();

                instance.setCount(count);
                instance.setValue(value);

                return instance;
            }

            public int getCount() {
                return count;
            }

            public void setCount(final int count) {
                this.count = count;
            }

            public String getValue() {
                return value;
            }

            public void setValue(final String value) {
                this.value = value;
            }

            @XmlAttribute(required = true)
            private int count;

            @XmlValue
            private String value;

        }

        public String getName() {
            return name;
        }

        public void setName(final String name) {
            this.name = name;
        }

        public Collection<Value> getValues() {

            if (values == null) {
                values = new ArrayList<Value>();
            }

            return values;
        }

        @XmlElement(required = true)
        private String name;

        @XmlElement(name = "value")
        private Collection<Value> values;

    }

    public static void main(final String[] args)
        throws JAXBException, IOException {

        final ParametricSearchResult result = new ParametricSearchResult();

        result.getFilterNames().add("custom_year");
        result.getFilterNames().add("abcd");

        result.getFields().add(
            Field.newInstance(
            "custom_year",
            Value.newInstance(10, "2012"),
            Value.newInstance(8, "2011")));

        result.getFields().add(
            Field.newInstance(
            "abcd",
            Value.newInstance(8, "2011")));

        final JAXBContext context =
            JAXBContext.newInstance(ParametricSearchResult.class);

        final Marshaller marshaller = context.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

        marshaller.marshal(result, System.out);

        System.out.println("-------------------------------------------------");

        context.generateSchema(new SchemaOutputResolver() {

            @Override
            public Result createOutput(final String namespaceUri,
                                       final String suggestedFileName)
                throws IOException {

                return new StreamResult(System.out) {

                    @Override
                    public String getSystemId() {
                        return "noid";
                    }

                };
            }

        });
    }

    public Collection<String> getFilterNames() {

        if (filterNames == null) {
            filterNames = new ArrayList<String>();
        }

        return filterNames;
    }

    public Collection<Field> getFields() {

        if (fields == null) {
            fields = new ArrayList<Field>();
        }

        return fields;
    }

    @XmlElement(name = "name")
    @XmlElementWrapper(name = "allFilters", nillable = true, required = true)
    private Collection<String> filterNames;

    @XmlElement(name = "field")
    @XmlElementWrapper(name = "allFields", nillable = true, required = true)
    private Collection<Field> fields;

} 
```

prints

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<parametricSearchResult>
    <allFilters>
        <name>custom_year</name>
        <name>abcd</name>
    </allFilters>
    <allFields>
        <field>
            <name>custom_year</name>
            <value count="10">2012</value>
            <value count="8">2011</value>
        </field>
        <field>
            <name>abcd</name>
            <value count="8">2011</value>
        </field>
    </allFields>
</parametricSearchResult> 
```

and here comes the XML Schema.

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:element name="parametricSearchResult" type="parametricSearchResult"/>

  <xs:complexType name="parametricSearchResult">
    <xs:sequence>
      <xs:element name="allFilters" nillable="true">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="name" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="allFields" nillable="true">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="field" type="field" minOccurs="0" maxOccurs="unbounded"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="field">
    <xs:sequence>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="value" type="value" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="value">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="count" type="xs:int" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T15:30:34.060

伙计们，

在考虑了一段时间之后，我重新设计了尝试创建不同对象的方式。

这就是我为解决我的困惑所做的。我创建了三个新类，如下所示。在做了更多阅读之后，这就是我想出的。

**参数SingleFilterMapEntry**

```
public class ParametricSingleFilterMapEntry {

    private String mValue;

    private Integer mCount;

    public void setValue(final String data) {
        mValue = data;
    }

    @XmlValue
    public String getValue() {
        return mValue;
    }

    public void setCount(final Integer count) {
        mCount = count;
    }

    @XmlAttribute(name = "count")
    public Integer getCount() {
        return mCount;
    }
} 
```

下一个包含 ParametricSingleFilterMapEntry 列表的类

**参数单过滤器所有条目**

```
@XmlType(propOrder = {"fieldName", "allEntriesForSingleField"})
public class ParametricSingleFilterAllEntries {

    private String mFilterField;

    private final List<ParametricSingleFilterMapEntry> mAllEntriesForSingleField = new ArrayList<ParametricSingleFilterMapEntry>();

    public void setField(final String name) {
        mFilterField = name;
    }

    @XmlElement(name = "name")
    public String getFieldName() {
       return mFilterField;
    }

    public void setAllMapEntries(final List<ParametricSingleFilterMapEntry> data) {
        mAllEntriesForSingleField.addAll(data);
    }

    public void setAMapEntry(final ParametricSingleFilterMapEntry entry) {
        mAllEntriesForSingleField.add(entry);
    }

    @XmlElement(name = "value")
    public List<ParametricSingleFilterMapEntry> getAllEntriesForSingleField() {
        return mAllEntriesForSingleField;
    }    
} 
```

最后一类将上述两个类很好地联系在一起

**参数搜索结果**

```
@XmlRootElement(name = "parametricSearchResult")
public class ParametricSearchResult {

    private final List<ParametricSingleFilterAllEntries> mAllFilterEntries = new ArrayList<ParametricSingleFilterAllEntries>();

    @XmlElementWrapper(name = "allFields")
    @XmlElement(name = "field")
    public List<ParametricSingleFilterAllEntries> getAllFilterEntries() {
        return mAllFilterEntries;
    }

    public void addEntry(final ParametricSingleFilterAllEntries entry) {
        mAllFilterEntries.add(entry);
    }

    public void addEntries(final List<ParametricSingleFilterAllEntries> entries) {
        mAllFilterEntries.addAll(entries);
    }

    public void addEntry(final String filterName, final String filterValue, final Integer count) {
        if (StringUtils.isNotBlank(filterName)) {
            ParametricSingleFilterMapEntry newMapEntry = new ParametricSingleFilterMapEntry();
            newMapEntry.setValue(filterValue);
            newMapEntry.setCount(count);
            if (mAllFilterEntries.isEmpty()) {
                ParametricSingleFilterAllEntries newFilterEntry = new ParametricSingleFilterAllEntries();
                newFilterEntry.setField(filterName);
                newFilterEntry.setAMapEntry(newMapEntry);                
                addEntry(newFilterEntry);
                return;
            } else {
                ParametricSingleFilterAllEntries newFilterEntry = new ParametricSingleFilterAllEntries();
                for (ParametricSingleFilterAllEntries entry : mAllFilterEntries) {
                    if (StringUtils.isNotBlank(entry.getFieldName())) {
                        if (entry.getFieldName().equalsIgnoreCase(filterName)) {
                            entry.setAMapEntr(newMapEntry);                            
                            return;
                        } else {
                            continue;
                        }
                    }
                }
                newFilterEntry.setField(filterName);
                newFilterEntry.setAMapEntry(newMapEntry);                        
                addEntry(newFilterEntry);
            }
        }
    }
} 
```

希望这种方法可以帮助其他可能面临类似问题的人。

# javascript - 如何让带有标签的文本框支持 iPad 中的“点击粘贴”功能？

> ID：11744815
> 
> 赞同：1
> 
> 时间：2012-07-31T16:28:51.073
> 
> 标签：javascript, html, css, mobile

我在页面中有一个文本框及其标签。默认情况下，如果页面中有文本框，它将支持`tap to paste`iPad 中的功能。在我的情况下，我也可以点击和粘贴。

```
<div class="labelwrap">
<label for="srl_input" >Serial Number...</label>
<input type="text" id="srl_input" class="serial_input">
</div> 
```

但是，如果我将使用 css 并将此标签保留在文本框中，那么我将失去此功能。我认为当我点击文本框时，实际上它是获得焦点的标签，因此我看不到任何粘贴选项。如果我设置`display: none`为标签，那么我可以使用`tap to paste`. 事实上，如果我`z-index: -1`也在这种情况下设置，我可以粘贴文本。但是在这两种情况下，标签都没有显示在文本框中（显然:)）。

请让我知道如何在文本框中包含标签并且仍然具有该`tap and paste`功能。需要显示标签，直到文本框中没有字符，即如果文本框获得焦点但尚未写入任何内容，在这种情况下，标签也应该可见。

PS 我没有使用`placeholder`HTML5 的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:52:15.163

如果我对您的理解正确，这是因为标签位于文本框的顶部，因此您实际上是在单击它，而不是在文本框上。您可以尝试使用[CSS 指针事件](https://developer.mozilla.org/en/CSS/pointer-events/)来阻止标签对点击做出反应。显然，Webkit 支持它们，但我不知道 iPad 的具体情况。试一试：

```
.labelwrap label {
    pointer-events: none;
} 
```

要使其在文本框聚焦时消失，请尝试以下操作：

```
.labelwrap input:focus {
    z-index: 1; /* Or something greater than that of the <label> */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:32:26.427

```
<input type="text" id="srl_input" class="serial_input" placeholder="Serial Number..."> 
```

# mysql - 选择与 MAX（列）在同一行的列

> ID：11744816
> 
> 赞同：2
> 
> 时间：2012-07-31T16:28:51.357
> 
> 标签：mysql, sql, greatest-n-per-group

好的，这是我的 SQL，我使用的是 MySQL：

```
SELECT 
  assets.id,  
  IF(max(asset_checkins.time) IS NULL AND max(asset_checkouts.time) IS NOT NULL, 'checked-out', 
    IF(max(asset_checkouts.time) > max(asset_checkins.time), 'checked-out',  
    'checked-in')
  ) 'status',  
  asset_checkouts.user, asset_checkouts.location  
FROM 
  assets  
  left outer join asset_checkouts on asset_checkouts.asset = assets.id  
  left outer join asset_checkins on asset_checkins.asset = assets.id  
group by assets.id; 
```

问题是用户和位置列不是来自与该资产的 max(psdl_asset_checkouts.time) 对应的行。

相反，我得到：

```
id  status          user    location  
15  checked-out     1       4<-this  
16  checked-out     1       4 
```

当我想得到：

```
id  status          user    location  
15  checked-out     1       7<-this  
16  checked-out     1       4 
```

这是asset_checkouts表，我想要的值是“7”；**与资产 15**的 max(time) 对应的值。

```
id      user    asset   time            location  
3       1       15      7/30/12 12:29   4  
14      1       15      7/31/12 11:01   7 
```

我的想法是我需要做一个子选择，但我不确定最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:03:18.760

它不漂亮，但它有效。它将返回资产的最新状态以及签出或签入的用户和位置。如果签入和签出在同一个表中，这可能会更好一些。

```
SELECT id,`status`,user,location FROM
    (
     SELECT a.id, 'checked-out' `status`,co.`time`, co.user, co.location
     FROM assets a left join asset_checkouts co on a.id=co.asset

     UNION ALL

     SELECT a.id, 'checked-in' `status`, ci.`time`, ci.user, ci.location
     FROM assets a left join asset_checkins ci on a.id=ci.asset
     WHERE NOT ci.`time` IS NULL
    ) U

WHERE `time` = GREATEST((SELECT COALESCE(MAX(`time`),0)
                         FROM asset_checkouts co
                         WHERE co.asset=U.id),
                        (SELECT COALESCE(MAX(`time`),0) 
                         FROM asset_checkins ci
                         WHERE ci.asset=U.id)) 
```

# php - 存储用户消息

> ID：11744820
> 
> 赞同：3
> 
> 时间：2012-07-31T16:29:11.067
> 
> 标签：php, mysql, database

将用户聊天消息以纯文本形式存储在数据库中是否安全？

*还有另一个问题*：在哪里存储页面内容 - 在数据库或文件中？Wordpress 将博客条目保存在数据库中，但需要 25 次对数据库的请求才能显示一个页面，因此网站性能下降。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:10:32.040

评论摘要：

*   考虑到应用程序的性质（Internet 上的聊天室），我认为将聊天保存为纯文本是可以接受的，前提是用户不讨论私人/敏感/机密信息。
*   上述假设可以基于对人类的一些信心和乐观态度（即：它足够聪明地意识到聊天室或 PM 会话不是提供密码、SIN、信用卡号等的时间或地点.)。
*   关于一个人背叛上述假设的情况，我相信，对于最聪明的傻瓜来说，再多的万无一失是不够的。虽然加密聊天绝对比不加密*更*安全，但加密每个聊天的成本而不是聊天的额外好处的适用性（也就是说，除非聊天包含敏感信息，否则什么都不会，这在最好）几乎没有激励加密这些聊天。一个更简单的解决方案是简单地拒绝对从聊天中泄露的私人信息承担任何责任。
*   关于处理敏感信息的最后一个小窍门（这个是为世界各地的互联网用户准备的）：不要通过电子邮件、聊天或任何不安全的连接来处理。尽量避免将敏感信息放在将被记录的地方，除非您绝对相信日志不会被破坏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:41:10.150

单独的问题真的应该作为单独的问题发布......

这两个问题的定义都不够明确，只能给出最广泛的答案……

但是我们开始了：

1.  某事是否“安全”取决于您的威胁模型（即您对“安全”的定义）。但是您可以使用哪些替代方案？如果您加密消息，您将在哪里存储解密密钥？

2.  将数据存储在何处取决于此类数据的结构以及您打算如何使用它。如果它是“静态的”并且总是以可预测的方式进行查询，那么文件系统可能会提供足够的结构以获得良好的性能；但是，如果数据是“动态的”（即您的应用程序将修改它），那么数据库可能会提供更大的灵活性或更好的性能。与计算中的大多数问题一样，您做出的设计决策是一种权衡，最佳答案取决于您自己的要求（实际上，您对什么是“最佳”的衡量标准）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T16:37:49.580

只要您妥善保管数据库凭据，就可以将它们保存在数据库中。我看不出有任何理由对它们进行加密。

你在说什么样的页面内容？如果是 CMS 类的东西，如果您将页面内容保留为 Pages，您将保留多少页。上帝 ！！！！

你应该使用数据库来保存这些东西。它使将来更新内容等变得更加容易。而且您无需担心查询数据库。找出不经常更新的项目并将其缓存。当您的页面需要这些内容时，从缓存层而不是数据库表中获取它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T16:41:50.567

> 将用户聊天消息以纯文本形式存储在数据库中是否安全？

取决于信息的合理性以及数据库本身的安全性。示例：可以从外部访问数据库还是只能从 localhost 访问数据库？但是，如果您觉得需要额外的安全层，那么使用一些简单的混淆方法也没有什么坏处。

* * *

> 在哪里存储 html 页面内容 - 在数据库或文件中？

大多数时候，访问文件比访问数据库要快。

应该使用数据库以结构化的方式存储/访问信息，从而实现详细的搜索、数据更改等……静态 HTML 可能更好地保存在文件系统中。但是，有时最好将 html 内容存储在数据库中。例子：

存储在数据库中使得从管理页面更改数据库信息比更改文件系统更容易（而且更安全）。因此，对于动态创建的页面，或在 CMS（例如 Drupal 或 Wordpress）中，最好将内容和“布局”存储在数据库中。

论坛帖子包含“内容”以及标记（样式）。您通常不会将一个与另一个分开。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T16:46:51.640

数据库存储也以文件结尾。压缩正在使用中 - 最终节省的内存更少。

# c# - 获取对象引用未设置为附加的业务层代码的对象实例

> ID：11744822
> 
> 赞同：0
> 
> 时间：2012-07-31T16:29:20.120
> 
> 标签：c#, asp.net, .net

我有这个业务层/ Contactentry.ascx 页面，它调用一个存储的过程来将数据插入到 sql 数据库中，然后下面的页面调用这个业务层方法。问题是这种方法

```
aspdotnet.BusinessLogicLayer.ContactEntry  AddEntry = 
    new ContactEntry(Convert.ToInt32(Session["ContactID"].ToString())
    ,Title,FirstName,MiddleName,LastName,JobTitle,Company,Website,OfficePhone
    ,HomePhone,Mobile,Fax,OEmail,PEmail,OAStreet,OACity,OAState,OACountry
    ,OAZipCode,PAStreet,PACity,PAState,PACountry,PAZipCode); 
```

尽管我已经输入了文本字段的所有值，但会抛出一个错误，指出对象引用未设置为对象的实例。

```
using System;
using System.Data;
using System.Configuration;
using aspdotnet.DataAccessLayer;

namespace  aspdotnet.BusinessLogicLayer
{
    public class ContactEntry
    {
        private int _ContactID;
        private string _Title;
        private string _FirstName;
        private string _MiddleName;
        private string _LastName;
        private string _JobTitle;
        private string _Company;
        private string _Website; 
        private string _OfficePhone; 
        private string _HomePhone; 
        private string _Mobile; 
        private string _Fax; 
        private string _OEmail;
        private string _PEmail;
        private string _OAStreet;
        private string _OACity; 
        private string _OAState; 
        private string _OACountry;
        private string _OAZipCode;
        private string _PAStreet; 
        private string _PACity; 
        private string _PAState; 
        private string _PACountry;
        private string _PAZipCode;

        public int ContactID
        {
            get { return _ContactID; }
            set { _ContactID = value; }
        }
        public string Title
        {
            get { return _Title; }
            set { _Title = value; }
        }
        public string FirstName
        {
            get { return _FirstName; }
            set { _FirstName = value; }
        }
        public string MiddleName
        {
            get { return _MiddleName; }
            set { _MiddleName = value; }
        }
        public string LastName
        {
            get { return _LastName; }
            set { _LastName = value; }
        }

        public string JobTitle
        {
            get { return _JobTitle; }
            set { _JobTitle = value; }
        }

        public string Company
        {
            get { return _Company; }
            set { _Company = value; }
        }

        public string Website
        {
            get { return _Website; }
            set { _Website = value; }
        }

        public string OfficePhone
        {
            get { return _OfficePhone; }
            set { _OfficePhone = value; }
        }
        public string HomePhone
        {
            get { return _HomePhone; }
            set { _HomePhone = value; }
        }
        public string Mobile
        {
            get { return _Mobile; }
            set { _Mobile = value; }
        }
        public string Fax
        {
            get { return _Fax; }
            set { _Fax = value; }
        }
        public string OEmail
        {
            get { return _OEmail; }
            set { _OEmail = value; }
        }
        public string PEmail
        {
            get { return _PEmail; }
            set { _PEmail = value; }
        }

        public string OAStreet
        {
            get { return _OAStreet; }
            set { _OAStreet = value; }
        }

        public string OACity
        {
            get { return _OACity; }
            set { _OACity = value; }
        }
        public string OAState
        {
            get { return _OAState; }
            set { _OAState = value; }
        }
        public string OACountry
        {
            get { return _OACountry; }
            set { _OACountry = value; }
        }
        public string OAZipCode
        {
            get { return _OAZipCode; }
            set { _OAZipCode = value; }
        }
        public string PAStreet
        {
            get { return _PAStreet; }
            set { _PAStreet = value; }
        }
        public string PACity
        {
            get { return _PACity; }
            set { _PACity = value; }
        }
        public string PAState
        {
            get { return _PAState; }
            set { _PAState = value; }
        }

        public string PACountry
        {
            get { return _PACountry; }
            set { _PACountry = value; }
        }

        public string PAZipCode
        {
            get { return _PAZipCode; }
            set { _PAZipCode = value; }
        }
        public ContactEntry()
        {
        }
        public ContactEntry(int ContactID, string Title, string FirstName, string MiddleName, string LastName, string JobTitle, string Company, string Website, string OfficePhone, string HomePhone, string Mobile, string Fax, string OEmail, string PEmail, string OAStreet, string OACity, string OAState, string OACountry, string OAZipCode, string PAStreet, string PACity, string PAState, string PACountry, string PAZipCode)
        {

             _ContactID=ContactID; 
             _Title=Title;
             _FirstName = FirstName;
             _MiddleName = MiddleName;
             _LastName = LastName;
             _JobTitle = JobTitle;
             _Company = Company;
             _Website = Website;
             _OfficePhone = OfficePhone;
             _HomePhone = HomePhone;
             _Mobile = Mobile;
             _Fax = Fax;
             _OEmail=OEmail;
             _PEmail=PEmail;
             _OAStreet = OAStreet;
             _OACity = OACity;
             _OAState = OAState;
             _OACountry =OACountry;
             _OAZipCode = OAZipCode;
             _PAStreet = PAStreet;
             _PACity = PACity;
             _PAState = PAState;
             _PACountry = PACountry;
             _PAZipCode = PAZipCode;
        }

        public bool Save()
        {   
            if (_ContactID == 0)
                return Insert();
           else
              return  Update();
        }

        private bool Insert()
        {
            _ContactID = Convert.ToInt32(DBTask.ExecuteScalar(System.Configuration.ConfigurationManager.AppSettings[Web.Global.CfgKeyConnString], "ContactInfo_Insert", _Title, _FirstName, _MiddleName, _LastName, _JobTitle, _Company, _Website, _OfficePhone, _HomePhone, _Mobile, _Fax, _OEmail, _PEmail, _OAStreet, _OACity, _OAState, _OACountry, _OAZipCode, _PAStreet, _PACity, _PAState, _PACountry, _PAZipCode));
        return (0 < _ContactID);
        }
        public static void Remove(int ContactID)
        {           
        DBTask.ExecuteNonQuery(System.Configuration.ConfigurationManager.AppSettings[Web.Global.CfgKeyConnString], "ContactInfo_Delete", ContactID);
        }
        private bool Update()
        {
            try
            {
                DBTask.ExecuteNonQuery(System.Configuration.ConfigurationManager.AppSettings[Web.Global.CfgKeyConnString], "ContactInfo_Update", _ContactID, _Title, _FirstName, _MiddleName, _LastName, _JobTitle, _Company, _Website, _OfficePhone, _HomePhone, _Mobile, _Fax, _OEmail, _PEmail, _OAStreet, _OACity, _OAState, _OACountry, _OAZipCode, _PAStreet, _PACity, _PAState, _PACountry, _PAZipCode);             
                return true;
            }
            catch 
            {
                return false;
            }
        }
        public void  LoadContact(int ContactID)
        {
            DataSet ds = DBTask.ExecuteDataset(System.Configuration.ConfigurationManager.AppSettings[Web.Global.CfgKeyConnString], "ContactInfo_GetContact", ContactID);
            DataRow row = ds.Tables[0].Rows[0];         
            _ContactID=Convert.ToInt32(row["ContactID"].ToString()); 
            _Title=row["Title"].ToString();  
            _FirstName = row["FirstName"].ToString();  
            _MiddleName = row["MiddleName"].ToString();  
            _LastName = row["LastName"].ToString();  
            _JobTitle = row["JobTitle"].ToString();  
            _Company = row["Company"].ToString();
            _Website = row["Website"].ToString();
            _OfficePhone = row["OfficePhone"].ToString();
            _HomePhone =  row["HomePhone"].ToString();
            _Mobile =  row["Mobile"].ToString();
            _Fax = row["Fax"].ToString();
            _OEmail=row["OfficialEmail"].ToString();
            _PEmail=row["PersonalEmail"].ToString();
            _OAStreet = row["OAStreet"].ToString();
            _OACity = row["OACity"].ToString();
            _OAState = row["OAState"].ToString();
            _OACountry =row["OACountry"].ToString();
            _OAZipCode = row["OAZip"].ToString();
            _PAStreet = row["PAStreet"].ToString();
            _PACity = row["PACity"].ToString();
            _PAState = row["PAState"].ToString();
            _PACountry = row["PACountry"].ToString();
            _PAZipCode = row["PAZip"].ToString();           

        }

    }
}

Insert form calling above function from Business Layer:

private void btnSave_Click(object sender, System.EventArgs e)
        {
            string Title =  drplstTitle.SelectedItem.Text;    
            string FirstName = txtFirstName.Text;
            string MiddleName = txtMiddleName.Text;
            string LastName = txtLastName.Text;
            string JobTitle = this.txtJobTitle.Text;
            string Company = this.txtCompany.Text;
            string Website = this.txtWebSite.Text;
            string OfficePhone = this.txtOfficePhone.Text;
            string HomePhone = this.txtHomePhone.Text;
            string Mobile = this.txtMobile.Text;
            string Fax = this.txtFax.Text;
            string OEmail = this.txtOfficialEmail.Text;
            string PEmail = this.txtPersonalEmail.Text;
            string OAStreet = this.txtOAStreet.Text;
            string OACity = this.txtOACity.Text ;
            string OAState = this.txtOAState.Text;
            string OACountry = this.txtOACountry.Text;
            string OAZipCode = this.txtOAZipCode.Text;
            string PAStreet = this.txtPAStreet.Text;
            string PACity = this.txtPACity.Text;
            string PAState = this.txtPAState.Text;
            string PACountry = this.txtPACountry.Text;
            string PAZipCode = this.txtPAZipCode.Text;
            aspdotnet.BusinessLogicLayer.ContactEntry  AddEntry = 
new ContactEntry(Convert.ToInt32(Session["ContactID"].ToString()),Title,FirstName,MiddleName,LastName,JobTitle,Company,Website,OfficePhone,HomePhone,Mobile,Fax,OEmail,PEmail,OAStreet,OACity,OAState,OACountry,OAZipCode,PAStreet,PACity,PAState,PACountry,PAZipCode);
            //AddEntry.Save();

        } 
```

在上述方法 aspdotnet.BusinessLogicLayer.ContactEntry 之后，我得到对象引用未设置为对象实例。我在调试时看到所有值都在传递。我在输入上述值时输入了所有值，但仍然出错。不知道我错过了什么。请帮助，感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:38:30.043

这条线很可疑：

```
Convert.ToInt32(Session["ContactID"].ToString()) 
```

`Session["ContactID"]`可能会回来`null`并呼吁炸毁`ToString()`。不会抛出错误 - 它会返回 0，而不是 NULL。`null``Convert.ToInt32(null)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:32:36.893

检查您的会话[“ContactID”]。

考虑将您的代码更改为这样的...

```
//...
string PAState = this.txtPAState.Text; 
string PACountry = this.txtPACountry.Text; 
string PAZipCode = this.txtPAZipCode.Text;
string contactIDstr = Session["ContactID"] as string;
int contactID = 0;

if(!String.IsNullOrEmpty(conactIDStr))
    Int32.TryParse(contactIDStr, out contactID);

aspdotnet.BusinessLogicLayer.ContactEntry AddEntry = new ContactEntry(
    contentID,
    Title,
    FirstName,MiddleName,LastName,JobTitle,Company,
    Website,OfficePhone,HomePhone,Mobile,Fax,OEmail,PEmail,
    OAStreet,OACity,OAState,OACountry,OAZipCode,PAStreet,PACity,PAState,PACountry,PAZipCode
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:37:09.797

你在它`Session["ContactID"]`之前处理空值和空`Converting``Int32`

**例子 ：**

```
ContactEntry cEntry = null;
    if(Session["ContactID"] != null)
    {
        if(!String.IsNullOrEmpty(Session["ContactID"]))
        {
        cEntry = new ContactEntry(Convert.ToInt32(Session["ContactID"].ToString());
        }
    } 
```

# ios - 从 iOS 应用程序内连接到 sFTP

> ID：11744828
> 
> 赞同：3
> 
> 时间：2012-07-31T16:29:28.110
> 
> 标签：ios, objective-c, networking, sftp

我是 Objective C 和 Xcode 的新手，但想知道如何在我的应用程序中连接到 SFTP。我之前已经成功连接到 FTP，但希望将来能保持更安全。与普通计算机连接时，您需要一个特殊的 SFTP 客户端，所以我不确定在 iOS 应用程序中连接需要采取哪些步骤。

另外，您对 SSH FTPs Vs 有何看法？SFTP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T00:33:49.757

有很多开源库，例如[NMSSH](https://github.com/Lejdborg/NMSSH)或[DLSFTPClient](https://github.com/dleehr/DLSFTPClient)。请不要使用专有组件，支持开源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:33:13.523

您最好的选择是下载一个库并将其放入您的应用程序中。我会推荐奇尔卡特。他为 sftp 写了很多东西。

祝你好运。

看看其中一些（[http://www.example-code.com/ios/sftp.asp](http://www.example-code.com/ios/sftp.asp)）

# php - 为什么将会话数据存储在应用程序数据库中？

> ID：11744837
> 
> 赞同：2
> 
> 时间：2012-07-31T16:30:06.360
> 
> 标签：php, mysql, database, session, membership

除非它必须专门与应用程序有关，否则为什么要在数据库中跟踪会话？我的意思是，大多数会话数据都与具有会员资格的用户有关，因此如果用户已登录，您可以通过他们的会员 ID 轻松跟踪他们。那么为什么要将会话数据保存在数据库中呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:31:41.027

不是每个人都只使用一台服务器运行，并且基于文件的会话很难在多台服务器之间可靠地共享。将会话放入数据库可以解决大部分共享问题。

# ftp - 将 .svn 文件夹排除在 wput 中上传

> ID：11744841
> 
> 赞同：0
> 
> 时间：2012-07-31T16:30:21.667
> 
> 标签：ftp

[我正在编写一个脚本来使用wput](http://wput.sourceforge.net/)自动上传包含许多子目录和文件的目录

使用 wput 时是否可以忽略某些文件夹（如 .svn 文件夹）上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:44:46.747

仔细查看手册页给了我以下完美的解决方案。

```
find . ! -type d | grep -v \.svn | wput ftp://user:password*@ftp.example.com/ -i - 
```

[此博客文章](http://sudarmuthu.com/blog/excluding-svn-folders-while-transferring-entire-folder-by-ftp)中提供了更多解释。

# stored-procedures - 如何锁定表以进行读写，以便我可以执行 SQL，然后再删除锁定？

> ID：11744846
> 
> 赞同：1
> 
> 时间：2012-07-31T16:30:53.640
> 
> 标签：stored-procedures, locking, teradata

我刚刚开始深入研究 Teradata 的锁定功能，而 Google 对此的解释相当复杂。希望我能从 SE 得到一个非常简单和精简的答案。

在遇到 Teradata 中标识列的许多问题后，我决定创建一种模仿 Oracle 序列的机制。为此，我正在创建一个包含两个字段的表，一个包含表名，另一个存储其最后使用的序列。然后，我将创建一个采用表名的存储过程。在此过程中，它将执行以下选项：

*   从序列表中选择最后使用的序列到一个变量中（`select LastId from mydb.sequence where tablename = :tablename`）
*   将 1 加到变量的值上，从而增加它
*   更新序列表以使用增量值
*   将序列变量返回到过程的 OUT 参数，以便我可以在我的 .NET 应用程序中访问序列 ID

当所有这些操作都在进行时，我需要为所有读写访问锁定序列表，以确保对过程的其他调用不会在当前正在排序的过程中尝试对表进行排序。这显然是为了防止相同的序列在同一张表中被使用两次。

如果这是.NET，我会使用`Sync Lock`（VB.NET）或`lock`（C#）来阻止其他线程进入代码块，直到当前线程完成。我想知道是否有一种方法可以像锁定.NET 中的线程一样锁定表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:46:53.600

考虑为事务的行哈希锁使用显式锁定机制：

```
BEGIN TRANSACTION;

LOCKING ROW EXCLUSIVE
SELECT LastId + 1 INTO :LastID
FROM MyDB.SequenceCols
WHERE TableName = :TableName
  AND DatabaseName = :DatabaseName;

UPDATE MyDB.SequenceCols
SET LastId = :LastID
WHERE TableName = :TableName
  AND DatabaseName = :DatabaseName;

END TRANSACTION; 
```

rowhash 锁将允许其他进程针对其他表使用该过程。要确保行级锁定，您必须完全限定 SequenceCols 表的主索引。事实上，SequenceCols 表的主索引应该是 UNIQUE on`DatabaseName`和`TableName`。

**编辑：**

排他行哈希锁将阻止另一个进程读取该行，直到 END TRANSACTION 被处理为行哈希锁的所有者。

# ms-access - 如何从 SQL Server 数据库中检索数据

> ID：11744847
> 
> 赞同：1
> 
> 时间：2012-07-31T16:31:15.650
> 
> 标签：ms-access, ms-access-2007, vba

我正在用 VBA 编写代码片段以从 SQL Server 2008r2 数据库中提取数据。但是，我在 Conn.Open: **[Microsoft][SQL Server Native Client 10.0]Named Pipes Provider: Could not open a connection to SQL Server [53]**收到错误。

使用[ConnectionString.com](http://www.connectionstrings.com/sql-server-2008#p2)和另一个[SO Question](https://stackoverflow.com/questions/1120674/accessing-sql-database-in-excel-vba)，我写了这个：

```
Function GetAddress() As String
    Dim Conn As ADODB.Connection
    Set Conn = New ADODB.Connection
    Dim Rst As ADODB.Recordset
    Set Rst = New ADODB.Recordset

    Conn.ConnectionString = "Provider=SQLNCLI10;Server=12.34.5678;" & _
                            "Database=OurDB;User ID=myuserid;Password=mypw;"
    Conn.Open

    Set Rst.ActiveConnection = Conn
    Rst.Open "Select top 1000 * from MainTable"
End Function 
```

[谷歌搜索](http://www.dbforums.com/microsoft-sql-server/1659580-named-pipes-provider-could-not-open-connection-sql-server.html)错误表明命名管道可能已禁用。在此之后，我检查了 SQL Server 配置管理器，并且命名管道已完全启用（共享内存和 TCP/IP 之后的第三个顺序）。

如何让这个错误消失？我是否使用了正确的连接字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:34:51.627

仔细检查连接字符串的这一部分：

```
Server=12.34.5678 
```

看起来像是通过 IP 地址引用服务器，但它不是 IP 地址。

# jquery - 本站使用了什么类型的效果？

> ID：11744849
> 
> 赞同：0
> 
> 时间：2012-07-31T16:31:23.227
> 
> 标签：jquery, css, hover, effect

该网站 --> [http://inspiredm.com](http://inspiredm.com)在他们的帖子图像中使用了悬停效果。它是一种什么样的效果？它是 CSS3 或 jquery 效果，如何做类似的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:37:24.890

这是css上的不透明性，在ie8上不起作用！

你可以像这样创建这个效果：

```
<a><img src="image.jpg" /></a>

a:hover {
background:#fff;
}

a:hover img {
opacity:0.7;
} 
```

编辑：

如果您指的是滚动页面时的后期图像加载延迟，它可能就像来自 jQuery 的延迟加载插件：

[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:45:43.720

他们似乎将“imgHover”类添加到`<a>`图像周围的标签中。这是通过 JavaScript 完成的。然后在他们的样式表中，他们有`.imgHover img {opacity:0.7}`

所以该网站使用的是 JS 和 CSS 的组合。也可以使用`:hover`伪类（即`img:hover {opacity:0.7}`）在纯 css 中完成，或者更直接地使用 JavaScript 设置不透明度。使用 jQuery，这看起来像：

```
$('img').hover(function(){
    $(this).css('opacity', 0.7);
}, function(){
    $(this).css('opacity', 1);
}); 
```

# java - 在java中更正解析的URL

> ID：11744851
> 
> 赞同：0
> 
> 时间：2012-07-31T16:31:31.470
> 
> 标签：java, url, html-parsing

我正在创建一个 HTML 解析器，它从给定的 URL 获取 HTML，找到导航菜单 html，并将其放入字符串中。HTML 中被复制到字符串中的 URL 需要添加部分 URL（“www.stackoverflow.com”部分）。我如何才能找到字符串中的现有 URL 并将缺少的部分添加到其中以便它们工作。

中的 URL 采用`String`以下形式：

```
<a href="/qestions/11744851.cfm"> 
```

我需要按照以下形式制作它们：

```
<a href="www.stackoverflow.com/questions/11744851.cfm"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:43:32.973

If the XHTML is valid XML, the easiest way is to parse it as XML and use XPath (for example /body/div/a@href , where /body/div is path to menu section in HTML. There is also a project called HTMLParser (http://htmlparser.sourceforge.net/), you may want to give it a try (according to the page, it has 'link extraction, for crawling through web pages or harvesting email addresses'; but I've never used it, so I can't help much). If on the other hand the HTML is anything but valid, you may want to use [http://ccil.org/~cowan/XML/tagsoup/](http://ccil.org/~cowan/XML/tagsoup/) - it might work, or it might not, on websites we've tried, it did pretty good.

Edit: adding missing part may be done using simple concatenation after finding interesting parts

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:15:20.450

尝试将此正则表达式与以下`ReplaceAll()`方法一起使用：

```
str = subString.replaceAll("<a href=\"(.*)\">", "<a href=\"http://www.stackoverflow/$1\">"); 
```

# java - 替代子字符串

> ID：11744852
> 
> 赞同：4
> 
> 时间：2012-07-31T16:31:32.163
> 
> 标签：java, arraylist, substring

将值添加到字符串数组时，我遇到了一个奇怪的问题，该数组稍后会使用哈希映射进行数组排序。我有一个文件名 XFR900a，并使用以下代码将 XFR900 部分添加到数组中；

```
private ArrayList<String> Types = new ArrayList<String>();

...

Types.add(name.substring(0,(name.length() - 1));
System.out.println(name.substring(0,(name.length() - 1)); 
```

我什至打印了给出“XFR900”的行，但是当我改用以下代码时，稍后的数组排序行为会有所不同；

```
Types.add("XFR900");
System.out.println(name.substring(0,(name.length() - 1)); 
```

这只是手动完成的子字符串部分，非常混乱。

是否有任何好的替代子字符串，因为那里必须有一些奇怪的非 ascii 字符？

菲尔

更新

谢谢大家的评论。这是稍后比较字符串的一些代码；

```
 for (int i=0;i< matchedArray.size();i++){

        //run through the arrays
        if (last == matchedArray.get(i)) {
            //add arrays to a data array
            ArrayList data = new ArrayList();
            data.add(matchedArray1.get(i));
            data.add(matchedArray2.get(i));
            data.add(matchedArray3.get(i));
            data.add(matchedArray4.get(i));
            data.add(matchedArray5.get(i));
            //put into hash map 
            map.put(matchedArray.get(i), data);
        }
        else {
            //TODO
            System.out.println("DO NOT MATCH :" + last + "-" + matchedArray.get(i)); 
```

如您所见，我添加了一个测试 System.out.println("DO NOT MATCH" ... 下面是一些输出；

不匹配：FR99-XFR900 不匹配：XFR900-XFR900

我只在 XFR900a 文件名上运行子字符串。问题是最后打印的测试行 !=matchedArray.get(i) 但是当打印到显示器时它们是相同的。

菲尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T12:48:42.757

您永远不应该使用`==`运算符来比较字符串的内容。`==`检查它是否是同一个对象。`last.equals(matchedArray.get(i))`改为写。该`equals()`方法检查对象是否相等，而不是它们是否相同。如果`String`它检查两个字符串是否包含相同的字符。这可能会消除你的奇怪行为。

PS：`==`on string 的行为有点不可预测，因为java虚拟机做了一些优化。如果两个字符串相等，则 jvm 可能对两者使用相同的对象。这是可能的，因为`String`对象无论如何都是不可变的。如果您手动记下子字符串，这将解释行为上的差异。在一种情况下，jvm 进行了优化，在另一种情况下则没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:51:09.620

使用`.equals()`而不是`==`因为它们是字符串！

```
if (last.equals(matchedArray.get(i))) {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T13:18:18.197

如果您想检查值，切勿使用 == 运算符，因为运算符将检查对象引用相等性，使用等于运算符检查值而不是引用，即

```
for (int i=0;i< matchedArray.size();i++){ `//run through the arrays
    if (last.equals(matchedArray.get(i))) { // Line edited
        //add arrays to a data array
        ArrayList data = new ArrayList();
        data.add(matchedArray1.get(i));
        data.add(matchedArray2.get(i));
        data.add(matchedArray3.get(i));
        data.add(matchedArray4.get(i));
        data.add(matchedArray5.get(i));
        //put into hash map 
        map.put(matchedArray.get(i), data);
    }
    else {
        //TODO
        System.out.println("DO NOT MATCH :" + last + "-" + matchedArray.get(i));` 

```

# web - Zabbix 2.0 - 基于 Web 场景的可用性报告

> ID：11744854
> 
> 赞同：2
> 
> 时间：2012-07-31T16:31:38.640
> 
> 标签：web, monitoring, zabbix

向客户提供每月站点可用性报告的基本功能（例如，为了检查是否符合 SLA 协议）。

最好从自定义 Web 场景监控 SLA 中涵盖的特定功能生成此类报告。

我怎样才能实现它？标准的“可用性报告”似乎非常基本（只有条形图，没有数字！）并且似乎不适用于 Web 场景。

# algorithm - 生成具有 k 个二进制字符串的序列，其中下一个字符串以两位数不同

> ID：11744860
> 
> 赞同：8
> 
> 时间：2012-07-31T16:31:46.830
> 
> 标签：algorithm, binary, sequence

我想知道算法生成长度为 n 的二进制字符串序列，其中下一个字符串以两位数不同。

例如：

```
11100
11010
11001
10101
10110
10011
00111
01011
01101
01110
11100 
```

当然，必须使用所有`n \choose k`二进制字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:54:21.593

我认为您可以使用递归进行设置。

我受到以下身份的启发：

```
choose(n,k) = choose(n-1,k-1) + choose(n-1,k) 
```

因此，我们定义了一个函数 F(n,k)，它产生所请求的序列（即，长度为 n 的二进制字符串序列，恰好设置了 k 位，使得连续的字符串相差两位）。

首先，观察我们可以以任何我们喜欢的方式重新排序 F(n,k) 的列，并产生另一个同样有效的 F(n,k)。

上面的恒等式表明我们使用 F(n-1,k-1) 和 F(n-1,k) 构建 F(n,k)。令 A 是通过重新排序 F(n-1,k-1) 的列获得的字符串，以便最后一个字符串以 k-1 `1`s 结尾，然后将 a 添加`1`到每个字符串。令 B 是通过重新排序 F(n-1,k) 的列获得的字符串，使第一个字符串以 k `1`s 结尾，然后将 a 添加`0`到每个字符串。那么 F(n,k) 只是 A 和 B 的串联。结果是有效的 F(n,k)，因为在 A 和 B 内部，字符串相差两位，A 的最后一个字符串和第一个字符串B 的字符串相差两位（第 k+1 到最后一位和最后一位）。

我将展示一个使用 n=5,k=2 的示例。我们通过递归得到以下两个F序列：

```
F(4,1): 0001
        0010
        0100
        1000

F(4,2): 0011
        0101
        1001
        1010
        0110
        1100 
```

要制作 A，交换 F(4,1) 的第一列和最后一列并添加`1`到每个：

```
A: 10001
   00101
   01001
   00011 
```

要生成 B，不需要列交换，因此我们只需在`0`F(4,2) 的每一行添加 a：

```
B: 00110
   01010
   10010
   10100
   01100
   11000 
```

那么 F(5,2) 就是 A 和 B 的串联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T05:09:20.763

您应该阅读我关于这种排列（除其他外）的[博客文章以获取更多背景信息 - 并点击那里的一些链接。](http://paddy3118.blogspot.co.uk/2012/07/a-permutation-journey.html)

这是我的词典排列生成器的一个版本，它按照 Steinhaus-Johnson-Trotter 排列生成器的生成顺序制作，按要求执行：

```
def l_perm3(items):
    'Generator yielding Lexicographic permutations of a list of items'
    if not items:
        yield [[]]
    else:
        dir = 1
        new_items = []
        this = [items.pop()]
        for item in l_perm(items):
            lenitem = len(item)
            try:
                # Never insert 'this' above any other 'this' in the item 
                maxinsert = item.index(this[0])
            except ValueError:
                maxinsert = lenitem
            if dir == 1:
                # step down
                for new_item in [item[:i] + this + item[i:] 
                                 for i in range(lenitem, -1, -1)
                                 if i <= maxinsert]:
                    yield new_item                    
            else:    
                # step up
                for new_item in [item[:i] + this + item[i:] 
                                 for i in range(lenitem + 1)
                                 if i <= maxinsert]:
                    yield new_item                    
            dir *= -1

from math import factorial
def l_perm_length(items):
    '''\
    Returns the len of sequence of lexicographic perms of items. 
    Each item of items must itself be hashable'''
    counts = [items.count(item) for item in set(items)]
    ans = factorial(len(items))
    for c in counts:
        ans /= factorial(c)
    return ans

if __name__ == '__main__':
    n = [1, 1, 1, 0, 0]
    print '\nLexicograpic Permutations of %i items: %r' % (len(n), n)
    for i, x in enumerate(l_perm3(n[:])):
        print('%3i %r' % (i, x))
    assert i+1 == l_perm_length(n), 'Generated number of permutations is wrong' 
```

上述程序的输出例如如下：

```
Lexicograpic Permutations of 5 items: [1, 1, 1, 0, 0]
  0 [1, 1, 1, 0, 0]
  1 [1, 1, 0, 1, 0]
  2 [1, 0, 1, 1, 0]
  3 [0, 1, 1, 1, 0]
  4 [0, 1, 1, 0, 1]
  5 [1, 0, 1, 0, 1]
  6 [1, 1, 0, 0, 1]
  7 [1, 0, 0, 1, 1]
  8 [0, 1, 0, 1, 1]
  9 [0, 0, 1, 1, 1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:55:57.820

1.  采用[格雷码](http://en.wikipedia.org/wiki/Gray_code) *（每个连续数字相差一位的序列）*。
2.  预先添加另一个位并在`0`和之间循环`1`。

```
0000
1001
0011
1010
0110
1111
0101
1100

```

这将恰好生成一半的 n 位字符串。这是你能得到的最多 - 另一半无法生成，因为例如，从一串 all `0`'s 开始并一次更改两位，总会有偶数个`1`'s。

# jquery - 如果用户点击远离元素......然后做......（Jquery）

> ID：11744863
> 
> 赞同：1
> 
> 时间：2012-07-31T16:31:55.503
> 
> 标签：jquery

> **可能重复：**
> [如何检测元素外的点击？](https://stackoverflow.com/questions/152975/how-to-detect-a-click-outside-an-element)

我有一个无序列表，当用户单击其中一个列表项时，该列表项会获得一类“活动”。有没有可能写一个类似的语句。如果用户在 $(this) 之外单击另一个列表项，则 addClass("active2")。如果你不明白，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:52:57.883

我这样理解你的问题：

> 第一个单击的项目始终保留该类`active2`，而任何其他单击的项目都将获得该类`active`（`active`从先前单击的项目中删除）。

解决方案如下所示：

*   如果列表中没有带有 class 的项目`active`，则之前没有选择任何项目，因此您添加`active`到当前项目。
*   如果有一个，但没有元素具有 class `active2`，则将其添加`active2`到带有 class 的项目中`active`，删除`active`并将其添加到当前项目中。
*   如果两者都`active`存在`active2`，`active`则从该项目中删除并添加`active`到当前项目。

这在代码中看起来像这样：

```
var $lis = $("#myList li");

$('#myList').on('click', 'li', function() {
    if($lis.hasClass('active')) {
        if(!$lis.hasClass('active2')) {
            $lis.filter('.active').toggleClass('active active2');
        }
        else {
            $lis.filter('.active').removeClass('active');
        }
    }
    $(this).addClass('active');
}); 
```

或者，由于在第二次单击项目后，总会有具有这些类的元素项目，您也可以简单地使用标志而不是一遍又一遍地搜索元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:34:55.350

修改后的问题的修改答案：

```
$(document).ready(function() {
    $('ul#myList li:not(.active)').click(function() {
        // user has clicked on an li that does not have class="active"
        $(this).addClass('active');
        $('ul#myList li.active').each(function() {
            // for each li with class="active", remove it and add "active2"
            $(this).removeClass('active').addClass('active2');
        });
    });
}); 
```

# c# - 列表框 IsSelected 与 SelectionMode=Extended

> ID：11744870
> 
> 赞同：4
> 
> 时间：2012-07-31T16:32:17.490
> 
> 标签：c#, wpf, listbox

抱歉标题含糊不清，我想不出一个好方法来总结正在发生的事情。

我有一个绑定的 WPF 列表框：

```
<UserControl.Resources>
    <DataTemplate DataType="{x:Type local:MyBoundObject}">
        <TextBlock Text="{Binding Label}" />
    </DataTemplate>
</UserControl.Resources>

<ListBox ItemsSource="{Binding SomeSource}" SelectionMode="Extended">
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="IsSelected Value="{Binding Path=IsSelected, Mode=TwoWay}"/>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

我只想对选定的项目进行操作。我通过遍历所有项目的列表并检查每个对象以查看它的 IsSelected 属性是否已设置来做到这一点。

这有效，除非我在列表中有很多项目（足够所以它们不是全部可见）并且我按 CTRL-A 选择所有项目。当我这样做时，所有可见项目的 IsSelected 属性都设置为 true，其余的都为 false。当我向下滚动时，其他项目就会出现，然后它们的 IsSelected 属性设置为 true。

有没有办法解决这个问题，以便当我按下 CTRL-A 时每个对象的 IsSelected 属性都设置为 true？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T09:53:05.803

尝试设置

```
ScrollViewer.CanContentScroll="False" 
```

在 ListBox 上，它应该修复 ctrl+a 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:21:24.207

如果要获取所有选定项目，可以使用 ListBox 中的 SelectedItems 属性。您不需要将 IsSelected 属性添加到您的对象。

检查下面的例子。

XAML 文件：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="30" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <StackPanel Orientation="Horizontal">
        <Button Content="Selected items" Click="Button_Click" />
        <Button Content="Num of IsSelected" Click="Button_Click_1" />
    </StackPanel>

    <ListBox Name="lbData" SelectionMode="Extended" Grid.Row="1">
        <ListBox.ItemContainerStyle>
            <Style TargetType="{x:Type ListBoxItem}">
                <Setter Property="IsSelected" Value="{Binding Path=IsSelected, Mode=TwoWay}"/>
            </Style>
        </ListBox.ItemContainerStyle>
    </ListBox>
</Grid> 
```

代码隐藏文件：

```
using System.Collections.Generic;
using System.Windows;
using System.Windows.Documents;

namespace ListBoxItems
{   
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            List<MyBoundObject> _source = new List<MyBoundObject>();
            for (int i = 0; i < 100000; i++)
            {
                _source.Add(new MyBoundObject { Label = "label " + i });
            }
            lbData.ItemsSource = _source;
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            MessageBox.Show(lbData.SelectedItems.Count.ToString());
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            int num = 0;
            foreach (MyBoundObject item in lbData.Items)
            {
                if (item.IsSelected) num++;
            }

            MessageBox.Show(num.ToString());
        }
    }

    public class MyBoundObject
    {
        public string Label { get; set; }
        public bool IsSelected { get; set; }
    }
} 
```

# css - 为什么 IE7 不能识别对外部样式表的类调用，但会识别内联样式？

> ID：11744871
> 
> 赞同：4
> 
> 时间：2012-07-31T16:32:24.073
> 
> 标签：css, internet-explorer-7, ie-developer-tools

当使用 IE8 通过开发者工具的浏览器模式功能查看 IE7 时，我遇到了一个奇怪的 CSS 反复出现的问题。当我对外部样式表进行更改然后在 HTML 中引用该类时，就像 IE7 根本无法识别它一样。但是，如果我将相同的样式内联，IE7 将服从它。有没有人听说过这个？这是一个简单的例子来帮助说明我在说什么：

外部样式表：

```
.bold {
    font-weight:bold;
} 
```

在 HTML 中调用：

```
<p class="bold">My paragraph here</p> 
```

尽管所有其他浏览器都可以，但在 IE7 中没有任何更改会生效。

但是，如果我这样做：

```
<p style="font-weight:bold;">My paragraph here</p> 
```

IE7 似乎很高兴。有什么不同？我真的必须以这种方式进行 CSS 更改，还是有其他解决方法？

我很困惑可能是什么问题。我不知道开发人员工具的浏览器模式是否有一个怪癖并且不能像 IE7 的真实版本那样工作，或者这是否完全不同。我正在使用 IE8（我无法在这台政府计算机上升级到 IE9），但我听说问题仍然存在，因为我更改了 IE9 的 IE7 浏览器模式。

我们正在使用 ColdFusion 生成 HTML，使用 HTML5 doctype ()，并且我在 2 个外部样式表引用中添加了一个时间戳参数，因此浏览器每次都被迫获取一个新副本。

非常感谢您对这个谜团的任何帮助-谢谢！

====== 对于@Stano 或任何有兴趣重现确切问题的人，这里是它的精简版：[https](https://docs.google.com/open?id=0B02DZPpIlMwGSk1VZHRDUHNCTkU) ://docs.google.com/open?id=0B02DZPpIlMwGSk1VZHRDUHNCTkU （可以单击文件>下载以获取 zip)。请注意，在 IE7 中，"Photographer" 很好，因为它具有内联样式，但其他人什么都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:32:56.747

关于您的评论，您说得对，这可能是一个缓存问题，但也可能是该样式表的问题（尽管看起来并非如此）、另一个样式表或无效的 HTML。

我想纠正你的一件事，因为我认为它可能会影响你对 CSS 和 HTML 如何交互的理解，是`class`HTML 元素中的属性不*调用*CSS。相反，CSS 规则告诉浏览器代理如何渲染具有某些属性的东西。这就是为什么我们能够使用元素 ID、名称、组名、类和其他值来识别要应用哪个类的元素。

我提到这一点是因为如果您的 HTML 无效（缺少结束标记、缺少箭头等），它可能会做各种奇怪的事情。几天前，它帮助我解决了一个问题，即错误放置的标签实际上导致我的脚本在我的一个页面上循环。

[稍等片刻，使用W3C 标记验证器](http://validator.w3.org/)验证您的 HTML 。

# entity-framework - LINQ 到实体 (.NET 4.0)

> ID：11744873
> 
> 赞同：1
> 
> 时间：2012-07-31T16:32:34.037
> 
> 标签：entity-framework, c#-4.0, entity-framework-4, linq-to-entities

我有下面的代码（这实际上是一个更复杂的查询的一部分，但我已将问题隔离到这一特定行以帮助调试）根据我读过的所有内容应该在 SQL 中创建一个 IN 子句，假设我正在使用EF4。据我所知，我正在使用 EF4（我们的项目使用 .NET Framework 4，当我查看 System.Data 和 System.Data.Entity 时，他们都说所有项目的版本都是 4.0.0.0）

```
int[] assessmentIDs; // this is just here to show what this is, 
                     // but it is a params parameter passed to this methed                  

var assessments = from cert in container.ProctorAssessmentCertifications
                  where assessmentIDs.Contains(cert.AssessmentID)
                  select cert.ID; 
```

但是，当我运行它时，我得到运行时错误：

```
LINQ to Entities does not recognize the method 'Boolean Contains[Int32](Int32[], Int32)' method, and this method cannot be translated into a store expression. 
```

当我使用 LinqPad 时，它会正确输出一个 IN 子句，就像在 EF4 中所期望的那样。我的问题是：

A. 我做错了什么，我该如何做？

B. 如果实际上不是，我如何强制调用 EF4？我在任何指向旧版本的 web.config 文件中都找不到参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:40:21.820

包含不会转换为有效的 SQL，因为评估 ID 不是 IQueryable，它是内存中的对象。因此，您必须先提取数据，然后再进行检查。

```
var assessments = (from cert in container.ProctorAssessmentCertifications                  
                  select cert.ID).ToList() //no longer IQueryable.

var result = assessments.Intersect(assessmentIDs); 
```

# java - JSF - selectItems 不在列表内呈现列表

> ID：11744876
> 
> 赞同：0
> 
> 时间：2012-07-31T16:32:42.047
> 
> 标签：java, ajax, jsf, richfaces, jstl

我有以下失败的 facelet 代码：

```
<h:form>
    <rich:select defaultLabel="Seleccionar región">
        <f:selectItems value="#{StaticInfo.regiones}" var="region" itemValue="#{region.reg_Cod}" itemLabel="#{region.reg_Nombre}" />
        <a4j:ajax event="change" render="provs" />
    </rich:select>
    <rich:select id="provs" defaultLabel="Seleccionar provincia">
    <f:selectItems value="#{region.provincias}" var="prov" itemValue="#{prov.prov_Cod}" itemLabel="#{prov.prov_Nombre}" />
    </rich:select>
</h:form> 
```

支持豆：

```
public class StaticInfoBean {

    private ArrayList<Region> regiones;

    public StaticInfoBean() {
        try
        {
            RegionDAO regDao = new RegionDAO();
            regDao.prepareConnection();
            ProvinciaDAO provDao = new ProvinciaDAO();
            provDao.setCon(regDao.getCon());
            ComunaDAO comDao = new ComunaDAO();
            comDao.setCon(regDao.getCon());
            regiones = regDao.listaRegiones();
            for(Region r : regiones)
            {
                regDao.findProvincias(r);
                for(Provincia p : r.getProvincias())
                {
                    provDao.findComunas(p);
                    for(Comuna c : p.getComunas())
                    {
                        comDao.findColegios(c);
                    }
                }
            }
            regDao.getCon().close();
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
    }

    public ArrayList<Region> getRegiones() {
        return regiones;
    }

    public void setRegiones(ArrayList<Region> regiones) {
        this.regiones = regiones;
    }

    public String toString() {
        return regiones.toString();
    }

} 
```

类`Region`：

```
public class Region {

    private String Reg_Cod;
    private String Reg_Nombre;
    private ArrayList<Provincia> provincias;
//Getters and setters 
```

问题：第一个`rich:select`标签工作得很好。但是第二个不显示任何值。不仅如此，我还在 NetBeans 中工作，`Provincia`每当我在 EL 中键入“prov”时，它都不会显示类的方法列表。

任何帮助表示赞赏。

编辑：我编辑了我的代码并执行了以下操作：

```
<h:form>
    <rich:select defaultLabel="Seleccionar región" value="#{StaticInfo.regionElegida}">
        <f:selectItems value="#{StaticInfo.regiones}" var="region" itemValue="#{region.reg_Cod}" itemLabel="#{region.reg_Nombre}" />
        <a4j:ajax event="click" render="provs" execute="@this" />
        <a4j:ajax event="click" render="texto" execute="@this" />
    </rich:select>
<h:outputText id="texto" value="#{StaticInfo.regionElegida.reg_Nombre}" />
    <rich:select id="provs" defaultLabel="Seleccionar provincia" value="#{StaticInfo.provinciaElegida}" rendered="#{not empty StaticInfo.regionElegida}">
        <f:selectItems value="#{StaticInfo.regionElegida.provincias}" var="prov" itemValue="#{prov.prov_Cod}" itemLabel="#{prov.prov_Nombre}" />
    </rich:select>
</h:form> 
```

令人惊讶的是 outputText 没有显示出来！为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:29:37.650

`region`设置的变量`f:selectItems`仅在其范围内可用。您必须将每个绑定`rich:select`到一个支持 bean 属性。

因此，您需要更改 bean 代码，将所选区域的属性添加到 bean：

```
public class StaticInfoBean {    
    private ArrayList<Region> regiones;
    private Region regionElegida;
    private Provincia provinciaElegida; // <-- you'll probably want this too...

    // ... getters and setters and your initialization code

    // and you need something to find the real region object that
    // used the reg_Cod value got from rich:select, for now you can try this:
    public void updateRegionElegida(AjaxBehaviorEvent e){
        // set the chosen region to regionElegida,
        // or the poor man's converter
        for (Region region : regiones){
            if(regionElegida.getReg_Cod() == region.getReg_cod()) {
                regionElegida = region;
            }
        }
    }
} 
```

然后将您的 XHTML 更改为以下内容：

```
<h:form>
    <rich:select value="#{StaticInfo.regionElegida}"
          defaultLabel="Seleccionar región">
        <f:selectItems value="#{StaticInfo.regiones}" var="region"
             itemValue="#{region.reg_Cod}" itemLabel="#{region.reg_Nombre}" />
        <a4j:ajax event="change" render="provs"
             listener="#{StaticInfo.updateRegionElegida}" />
    </rich:select>
    <rich:select id="provs" value="#{StaticInfo.provinciaElegida}"
          defaultLabel="Seleccionar provincia">
        <f:selectItems value="#{StaticInfo.regionElegida.provincias}" var="prov"
            itemValue="#{prov.prov_Cod}" itemLabel="#{prov.prov_Nombre}" />
    </rich:select>
</h:form> 
```

现在，进行这种转换的专业方法是使用自定义转换器，该转换器可以根据`itemValue`用于其选择小部件的表达式的值找到 Region 对象的适当实例。[从另一个问题](https://stackoverflow.com/a/7354975/149872)中查看此示例。

请注意，`rich:select`仅将功能添加到 default `h:selectOneMenu`，您最好在 SO上查看[其信息页面。](https://stackoverflow.com/tags/selectonemenu/info)

# c# - 如何在 schema.ini 中为纪元时间设置 DateTimeFormat？

> ID：11744877
> 
> 赞同：0
> 
> 时间：2012-07-31T16:32:48.050
> 
> 标签：c#, linq, oledb, datetime-format, oledbconnection

我有一个管道分隔格式的 Sybase 数据库转储，其中包括一些 unix Epoch 时间格式的列（自 1970 年 1 月 1 日以来的秒数）。我正在尝试使用 OleDbConnection 读取数据并设置了 schema.ini 文件。问题是，当我将 schema.ini 中的列设置为 DateTime 时，它​​在日期列中什么也不显示，因为它不知道如何解析它。

有没有办法在 schema.ini 中为纪元时间设置 DateTimeFormat 属性？

# android - Android列表视图根据内容更改颜色

> ID：11744883
> 
> 赞同：0
> 
> 时间：2012-07-31T16:33:00.703
> 
> 标签：android, listview

我目前有一个`ListView` `Adaptor`.

如何`ListView`根据`ListView`项目更改背景颜色？

```
i.e if(item.param1 == "some")
{
colour1
}
else
{
colour2
} 
```

* * *

我的代码

```
 import java.util.HashMap;
   import java.util.List;

   import android.content.Context;
   import android.view.View;
   import android.view.ViewGroup;
   import android.widget.SimpleAdapter;
   import android.widget.TextView;

   public class SpecialAdapter extends SimpleAdapter {
    private int[] colors = new int[] { 0xFFFFFFFF, 0xFF000000 };
    TextView tv1, tv2;

    public SpecialAdapter(Context context, List<HashMap<String, String>> items, int resource, String[] from, int[] to) {
        super(context, items, resource, from, to);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
      View view = super.getView(position, convertView, parent);

      view.setBackgroundColor(colors[colorPos]);
      return view;
    }
    } 
```

希望这是有道理的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:57:55.310

你应该覆盖

```
getViewTypeCount() 
```

和

```
getItemViewType(int position) 
```

在您的 ListAdapter 中为每种颜色定义不同的类型。仅在 BindView 中更改颜色的解决方案不会产生良好的结果，因为 Listview 会回收 ListItems，因此您最终会来回更改回收项的颜色。

当提供 ViewTypeCount > 1 时，Listview 知道您使用不同的布局并为您提供适当的回收 ListItem。有关更多信息，请参阅本教程。

[http://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296)

# excel-2007 - Excel 数据透视表对作为百分比的行标签进行分组

> ID：11744889
> 
> 赞同：1
> 
> 时间：2012-07-31T16:33:38.953
> 
> 标签：excel-2007, pivot-table

这是我的数据（对于糟糕的格式表示歉意，也许这应该是我的第一个问题！）：

```
Customer    Percentage Increase
1   2%
2   12%
3   -50%
4   87%
5   -20%
6   -1%
7   123%
8   -98%
9   10%
10  13% 
```

我在 Excel 中创建了一个数据透视表，其中 Percentage increase 作为行标签，Count of Customer 作为值。

```
 Row Labels  Count of Customer
-98%    1
-50%    1
-20%    1
-1% 1
2%  1
10% 1
12% 1
13% 1
87% 1
123%    1
Grand Total 10 
```

然后我想将百分比分组为更易于阅读的内容，但百分比范围不显示百分比，而是显示常规数字。

```
Row Labels  Count of Customer
<-0.5   1
-0.5--0.25  1
-0.25-0 2
0-0.25  4
0.75-1  1
>1  1
Grand Total 10 
```

如何将百分比范围的数字格式设置为百分比，即 0% - 25% 等？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T18:22:25.617

我知道的唯一方法是手动更改它们，即单击带有标签的单元格并将其更改为说出您想要的内容。

如果您这样做，我还将为尚未显示的类别创建标签，例如，在您的示例中为 25% 到 50%（和 50% 到 75%）。为此，请选择字段设置>布局和打印并选中“显示没有数据的项目”。更改这些范围的标签。完成后，您可以取消选中“显示没有数据的项目”，并且将来如果新范围内有计数，新标签仍将是您输入的内容。（至少它似乎是这样工作的）。

# html - 人们如何拥有最后没有 .html 的网站？

> ID：11744890
> 
> 赞同：0
> 
> 时间：2012-07-31T16:33:39.340
> 
> 标签：html, url, webaddress

我的网站[http://www.dorsetdesigns.co.uk/](http://www.dorsetdesigns.co.uk/)后面 没有`.html`，但是当我转到“关于我们的页面”时，它`.html`到底有没有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:35:34.193

默认情况下，Web 服务器将在文件夹中显示 index.html 或 index.aspx 或 default.aspx 页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T16:36:29.830

使用 Mod_rewrite 使 url 以任何你想要的方式出现。

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

我相信将以下规则添加到 mod_rewrite 会从 url 中删除所有 .html

```
RewriteRule ([^.]+)\.html /$1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T16:38:21.373

一个非常简单的解释：

好吧，当网络在几十年前开始出现时，服务器只“提供”静态 HTML 文件。这意味着您必须将 .html 添加到您提出的所有请求中。现在我们有了动态内容，它实时变化，文件扩展名已经过时。

关于您的问题的更多主题，它与您使用的服务器类型、配置方式和使用时间有关。扩展（不仅是 html，还有 php 和 aspx 等等）现在是可选的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:37:43.353

这是通过默认文档简单地完成的。如果您有名为 index.html 或 default.html 的默认文档，那么无论何时您访问根目录（在任何级别），您都会看到这样的结果。在您提供的 URL 示例中，它与访问[http://www.dorsetdesigns.co.uk/index.html](http://www.dorsetdesigns.co.uk/index.html)相同，并且它们的默认文档为 index.html。像这样简单的东西不需要 URL 重写。

# php - 与 xpath 混淆

> ID：11744897
> 
> 赞同：2
> 
> 时间：2012-07-31T16:34:01.937
> 
> 标签：php, dom, xpath

我已经在一些 html 中加载了这个 PHP 代码。

```
$dom = new DOMDocument();
$dom->loadHTML($somehtml);

$xpath = new DOMXPath($dom);
$divContent = $xpath->query('//table[class="defURLP"]');

echo $divContent; 
```

我太困惑了，无法理解这里需要做什么，但是我希望它能够填充变量 $divContent 以使用类名 defURLP 获得表的 html 内容

它目前只是返回

```
object(DOMNodeList)#3 (0) { } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:36:07.827

您需要从 xpath 查询返回的 DOMNodeList 中检索第一项，因为列表中可能有多个。

```
// Queries for tables having class defURLP
$tables = $xpath->query('//table[class="defURLP"]');
// Reference the first one in $divContent
$divContent = $tables->item(0);
// Output its nodeValue
echo $divContent->nodeValue; 
```

或者使用 a 遍历节点列表`foreach`：

```
$tables = $xpath->query('//table[class="defURLP"]');
// Iterate over the whole node list in $tables (if it is multiple nodes)
foreach ($tables as $t) {
  echo $t->nodeValue;
} 
```

# android - 返回到 Eclipse 中的先前配置

> ID：11744900
> 
> 赞同：1
> 
> 时间：2012-07-31T16:34:17.737
> 
> 标签：android, eclipse

我尝试使用 Eclipse 选项返回到以前的状态。我的意思是，我今天安装了 Maven 包，我想回到安装 Eclipse Maven 包之前的设置。

对于此选项，请转到帮助/关于 Eclipse/安装详细信息/安装历史记录，因此选择了您要返回的版本并恢复脉冲。

当我在一段时间后这样做时，您会收到以下错误：

**收集要安装的项目时出错**

```
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,com.android.ide.eclipse.adt,16.0.1.v201112150204-238534
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.adt,16.0.1.v201112150204-238534
No repository found containing: osgi.bundle,com.android.ide.eclipse.ddms,16.0.1.v201112150204-238534
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.ddms,16.0.1.v201112150204-238534
No repository found containing: osgi.bundle,com.android.ide.eclipse.hierarchyviewer,16.0.1.v201112150204-238534
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.hierarchyviewer,16.0.1.v201112150204-238534
No repository found containing: osgi.bundle,com.android.ide.eclipse.traceview,16.0.1.v201112150204-238534
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.traceview,16.0.1.v201112150204-238534
No repository found containing: org.eclipse.update.feature,org.hibernate.eclipse.feature,3.4.0.v20111213-1944-H40-M5
No repository found containing: osgi.bundle,overlay.com.android.ide.eclipse.adt.overlay,16.0.1.v201112150204-238534 
```

你知道它可以吗以及如何解决它？

我必须回到之前的状态

# ios - 重定向回主屏幕时，按钮不起作用且导航窗格不显示

> ID：11744901
> 
> 赞同：1
> 
> 时间：2012-07-31T16:34:26.110
> 
> 标签：ios, ios5

我有一个登录屏幕，成功登录后重定向到主页。

我这样重定向：

```
ViewController *viewController = [[UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil] instantiateViewControllerWithIdentifier:@"main"];

[self presentModalViewController:viewController animated:YES]; 
```

并且重定向发生，并且主屏幕加载，但其上的按钮不再响应点击，并且导航区域丢失。

我正在使用推送序列。

有谁知道为什么会发生这种事情？另外，现在我正在使用 push seguey，但我应该使用模态 seguey 吗？

我的功能是：在一个屏幕上执行一些逻辑，然后转到下一个屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:14:05.377

您需要更好地了解 UINavigationControllers 是如何工作的。按钮不起作用的原因是您已将它们放在 UINav 控制器本身上，而不是与视图关联的“隐含”工具栏上。

UINavigationController 将其控件替换为推送视图的控件。如果您将控件直接放在 UINav 控制器上，您的 viewController 将不会获得相关的消息。

UINavigationController 是一个视图容器。进入 IB 并将您的按钮放在视图继承工具栏的工具栏上，它将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T10:20:09.350

首先，我会以不同的方式创建整个“重定向”。在 IB 中，选择登录视图控制器并将其拖到主屏幕视图控制器并选择推送。选择 segue 并添加标识符并将重定向方法替换为
[self performSegueWithIdentifier:@"identifier set in IB" sender:self];

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T15:47:37.470

这实际上也发生在我身上。就我而言，发生的事情是`Initial View`在属性检查器中调用了一个选项。保留它，以便仅针对 UINavigation 控制器本身检查该选项。

试试看。如果它不起作用，对不起：/

**编辑**：这是我为赏金发布的一个[问题](https://stackoverflow.com/questions/11691259/uinavigation-controller-root-view-change)，它详细说明了同样的问题。查看答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T00:26:29.463

你确定视图有它的 userInteractionEnabled 吗？

```
[self.view setUserInteractionEnabled:YES]; 
```

# javascript - Highcharts 条形图在外部 js 中中断

> ID：11744906
> 
> 赞同：0
> 
> 时间：2012-07-31T16:34:56.680
> 
> 标签：javascript, highcharts

我在使用 Highcharts 时遇到了一些麻烦。我有一个使用默认堆叠条形布局设置的图表。看起来不错。代码在一个 html 文件中。

然后，我将相同的代码（没有修改）放入外部 .js 文件中，第二个结果就是我得到的。我完全被难住了，我不知道为什么会这样。有任何想法吗？

js文件还有一堆其他的代码，不过我觉得应该不会和图生成冲突...

谢谢。

工作图： http: [//i.stack.imgur.com/51QTV.png](http://i.stack.imgur.com/51QTV.png) 破碎图：http: [//i.stack.imgur.com/VyDzK.png](http://i.stack.imgur.com/VyDzK.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:42:07.690

由于您没有提供任何示例代码，我将疯狂猜测原因：

1.  外部 JS 文件中的代码 / 确实 / 干扰了图形生成。如果未使用 onload 事件正确加载它，则可能会发生这种情况。大多数 Javascript 只应在文档完全加载后执行（jQuery 对此很有用）。

2.  通过将 Highcharts 代码放在外部文件中，您将破坏加载顺序。也许，某些代码依赖于您现在稍后加载的其他代码。也许它正在尝试使用尚不存在的样式表。也许之前的一些代码覆盖了一个全局对象，一些属性和方法正在消失。

作为一般规则，Javascript 文件应该在样式表之后加载，并且大多数 Javascript 逻辑应该在文档加载之后执行。这可以通过将 onload="javascript:foo()" 属性附加到正文或使用 $(foo); 来完成。（其中 foo 是一个函数）如果您使用的是 jQuery。

# android - 如何将自定义 Arraylist 内容从一个 Activity 传递到 android 中的另一个 Activity

> ID：11744909
> 
> 赞同：0
> 
> 时间：2012-07-31T16:35:04.883
> 
> 标签：android, android-intent, bundle

我在自定义数组列表中有一个对象为“finaljsoncontent”，现在我正在尝试将这个“finaljsoncontent”数组传递给另一个活动，我也尝试过getter和setter，以及捆绑，但我不能，帮助我如何做这个。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:43:31.483

You could try implementing `Parcelable`, then you can pass it in a bundle. You will need to reduce your object to mostly primitive types to do this. Otherwise you can extend the `Application` class and store it there. You would retrieve that using the call to `getApplicationContext()`. Or, of course, you could always create some sort of static globals class that all of your classes can reference.

Here is one of my implementations of parcelable..

```
package warrior.mail.namespace;

import android.os.Parcel;
import android.os.Parcelable;

public class JView implements Parcelable {
    public String subject;
    public String from;
    public boolean unread;
    public String body;
    public int inboxIndex;
    private long id;
    public static final Parcelable.Creator<JView> CREATOR = new Parcelable.Creator<JView>() {

        public JView createFromParcel(Parcel in) {
            return new JView(in);
        }

        public JView[] newArray(int size) {
            return new JView[size];
        }

    };

    public JView(){
        body = "";
    }

    public JView(String subject,String from,boolean unread){
        body = "";
        this.subject = subject;
        this.from = from;
        this.unread = unread;
    }

    public JView(Parcel parcel){
        subject = parcel.readString();
        from = parcel.readString();
        body = parcel.readString();
        unread = parcel.createBooleanArray()[0];
        inboxIndex = parcel.readInt();
    }

    @Override
    public int describeContents() {
        return inboxIndex;
    }

    @Override
    public void writeToParcel(Parcel out, int arg1) {
        out.writeString(subject);
        out.writeString(from);
        out.writeString(body);
        boolean[] array = new boolean[] {unread};
        out.writeBooleanArray(array);
        out.writeInt(inboxIndex);
    }

    public void setIndex(int index){
        inboxIndex = index;
    }

    public void setUnread(boolean arg){
        unread = arg;
    }

    public void setContent(String content){
        body = content;
    }

    public void setSubject(String subject){
        this.subject = subject;
    }

    public void setFrom(String f){
        from = f;
    }

    public void setId(long arg){
        id = arg;
    }

    public long getId(){
        return id;
    }

    public void updateIndex(){

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:52:18.320

您可以使您的类`Parcelable`（特定于android）或使其像在java中一样可序列化（只需使用您的类编写实现Serializable）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:46:49.777

看看这个：[如何在 Android 上将对象从一个活动传递到另一个活动？](https://stackoverflow.com/questions/2906925/android-how-do-i-pass-an-object-from-one-activity-to-another)

你的类“JSonKey”应该实现parcealable或serializable，以便Android可以将它从一个活动“发送”到另一个活动。

# qt - 使用单个 CMakeLists.txt 生成多模式可执行文件

> ID：11744916
> 
> 赞同：1
> 
> 时间：2012-07-31T16:36:05.337
> 
> 标签：qt, cmake

有没有办法在一个 CMakeLists.txt 文件中为相同的类创建单独的可执行文件，但目的不同？这有点像[DEBUG/RELEASE 开关](http://www.cmake.org/Wiki/CMake_FAQ#How_can_I_build_multiple_modes_without_switching_.3F)，但我需要在源代码级别做出决定。

伪 CMakeLists.txt：

```
SET_INTENTION(app1 1)
ADD_EXECUTABLE(app1 main.cxx)
SET_INTENTION(app2 2)
ADD_EXECUTABLE(app2 main.cxx) 
```

伪代码 main.cxx：

```
if (intention == 1)
  //do something different to intention == 2 
```

我尝试`ADD_DEFINITIONS`作为预处理器定义和`#ifdef`源代码，但 CMake 似乎解释了整个文件并获得了所有定义，无论在什么位置添加定义。将in`ADD_EXECUTABLES()`分成两个（在子文件夹中）并不是很直接，并且在使用and`CMakeLists.txt`时会导致问题。我很欣赏任何想法/解决方法。`QT4_WRAP_CPP``QT4_WRAP_UI`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:32:32.953

该[`COMPILE_DEFINTIONS`物业](http://cmake.org/cmake/help/v2.8.8/cmake.html#prop_tgt%3aCOMPILE_DEFINITIONS)看起来很有希望：

```
add_executable(app1 main1.cxx)
get_target_property(APP1_COMPILE_DEFS app1 COMPILE_DEFINITIONS)
set_target_property(app1 PROPERTIES COMPILE_DEFINITIONS "${APP1_COMPILE_DEFS};INTENTION=1")

add_executable(app2 main2.cxx)
get_target_property(APP2_COMPILE_DEFS app2 COMPILE_DEFINITIONS)
set_target_property(app2 PROPERTIES COMPILE_DEFINITIONS "${APP2_COMPILE_DEFS};INTENTION=2") 
```

然后`#if INTENTION=1`在源文件中使用预处理器等。如果您没有使用最近的 CMake，则可能需要弄乱该`COMPILE_FLAGS`属性。

# php - jQuery 自动完成结果应该看起来像组合框

> ID：11744917
> 
> 赞同：0
> 
> 时间：2012-07-31T16:36:05.167
> 
> 标签：php, jquery, mysql

响应有大约 500 条记录，在自动完成时看起来很丑。如果超过 10 个建议，那么是否有任何更改使列表看起来像组合框而不是很长的列表？

谢谢

```
<html>
<head>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
            $('#textbox_postcode').autocomplete(
            {
                source: 'search-db.php',
                minLength: 3
            });
        });
    </script>
</head>

<body>
    <input type="text" id="textbox_postcode" value="" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:45:38.613

将以下内容添加到您的 .css 文件中。

```
.ui-autocomplete {
max-height: 100px !important;
overflow-y: scroll;
} 
```

`max-height`可以是任何你想要的。

# sql-server - 如何在 sql server 的查询中通过键查找和表扫描来提高效率

> ID：11744919
> 
> 赞同：0
> 
> 时间：2012-07-31T16:36:12.990
> 
> 标签：sql-server, indexing

当查询中出现键查找时，如何通过查看执行计划来定位键？通过查看搜索谓词，我不确定要在表中定位哪个特定键，请帮助我解决这个问题

下面我粘贴了我的查询执行计划（键查找）

![在此处输入图像描述](../Images/230ba6c08440b024ad88c9e5d877b756.png)

请找到我正在使用的查询

```
SELECT 
   CONVERT(VARCHAR(6), CTC_VALUE_DATE, 12) AS CTC_VALUE_DATES ,  
   MCURR.CURRENCY_CODE, 
   FTS_CUSTOMER_TRAN_CONTROL.*,
   MCURR.* 
FROM 
   FTS_CUSTOMER_TRAN_CONTROL 
INNER JOIN 
   @TEMPTABLE TEMP ON FTS_CUSTOMER_TRAN_CONTROL.CTC_PACKAGE_ID = TEMP.PACKAGEID
LEFT JOIN 
   MASTER_CURRENCY AS MCURR ON MCURR.CURRENCY_ID = FTS_CUSTOMER_TRAN_CONTROL.CTC_CURR_CODE    
WHERE 
   CTC_GEN_REFID = @REFIDS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:56:44.010

如果您必须避免 KEY LOOKUP，那么您将不得不只选择您需要的列，并尝试在您在 select 中使用的列上创建覆盖索引。

# android - 检查视图是否属于线性布局

> ID：11744920
> 
> 赞同：2
> 
> 时间：2012-07-31T16:36:19.143
> 
> 标签：android, android-layout, android-linearlayout, android-view

我需要一点帮助。我如何检查视图是否属于线性布局？

我有一个 ImageButton，我需要一个条件来验证是否属于线性布局。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T16:42:13.100

没有试过这个，但它应该工作。假设您的 ImageButton 始终是您的 LinearLayout 的直接子级。

```
View parent = (View)mContent.getParent();
if (parent instanceof LinearLayout) {
    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T17:17:21.397

您可以在 LinearLayout 上使用[findViewById方法。](http://developer.android.com/reference/android/view/View.html#findViewById%28int%29)从 JavaDoc“查找具有给定 id 的子视图。如果此视图具有给定 id，则返回此视图。”

```
LinearLayout layoutWithButton = (LinearLayout)findViewById(R.id.layout_with_button);
ImageButton buttonInLayout = (ImageButton)layoutWithButton.findViewById(R.id.button_in_layout);

if (buttonInLayout != null) {
  // Found
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:41:25.570

尝试通过 getParent() 方法搜索 UI 树

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:47:54.583

解决方案.....

```
 LinearLayout contentLayoutAddressPostal = (LinearLayout)findViewById(R.id.se_contentAdressPostal);

     ImageButton imbtRemoveAddress2 = (ImageButton)findViewById(R.id.sfsp2_ivHide);

       if(imbtRemoveAddress2.getParent()==contentLayoutAddressPostal){
          imbtRemoveAddress2.performClick();
                                    ............................ 
```

# php - Wordpress 不让我保存特色图片

> ID：11744921
> 
> 赞同：0
> 
> 时间：2012-07-31T16:36:19.500
> 
> 标签：php, ajax, wordpress

我正在尝试将特色图片附加到帖子中，但是在单击“用作特色图片”按钮后，它会更改为“保存”，然后就停留在那里。

通常只需要一秒钟左右。

我已经研究过内存问题，但这似乎不是问题。还有什么其他原因似乎导致了这种情况吗？

我正在测试基本的 2011 主题，没有插件和最新的 Wordpress。

Chrome 给了我某种错误，但我不知道如何解释它。

```
POST *website*/wp-admin/admin-ajax.php  load-scripts.php:4
f.support.ajax.f.ajaxTransport.send load-scripts.php:4
f.extend.ajax load-scripts.php:4
f.each.f.(anonymous function) load-scripts.php:4
WPSetAsThumbnail load-scripts.php:6
onclick 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:33:20.060

**故障排除：**

您最近是否更新了您的 WP 安装？您的浏览器可能仍包含旧版本的管理脚本，这会导致错误。

尝试清除缓存并重试： http: [//support.google.com/accounts/bin/answer.py ?hl=zh-CN&answer=32050](http://support.google.com/accounts/bin/answer.py?hl=en&answer=32050)

# asp.net - asp:HyperLink 填充 {0}

> ID：11744925
> 
> 赞同：0
> 
> 时间：2012-07-31T16:36:33.807
> 
> 标签：asp.net

我有以下超链接：

```
 <asp:HyperLink ID="Link1" runat="server" NavigateUrl="~/pros.aspx?proid={0}"  Text=<%#CObj(Eval("ProID"))%>  DataNavigateUrlFields=<%#CObj(Eval("ProID"))%> /> 
```

结果是我得到一个显示当前 ID 的超链接

```
 9855555 
```

但是当我将鼠标悬停在它上面时，它会显示以下网址：

```
 http://localhost/CDDDev/pros.aspx?proid={0} 
```

我希望用实际的 ProID 填充 {0}

因此，我希望它显示如下内容：

```
 http://localhost/CDDDev/pros.aspx?proid=9855555 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:42:56.670

`<%#CObj(Eval("ProID"))%>`从`DataNavigateUrlFields`零件中取出。如果您有多个，它需要一个用逗号分隔的属性名称。只需这样做：

```
DataNavigateUrlFields="ProID" 
```

多个属性示例：

```
DataNavigateUrlFormatString="~/pros.aspx?proid={0}&catid={1}"  DataNavigateUrlFields="ProID,CatID" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:43:42.297

Try using String.format in the NavigateUrl property:

```
NavigateUrl='<%# String.Format("~/pros.aspx?proid={0}", Eval("ProID").ToString())%>' 
```

# java - Java中的变量继承

> ID：11744927
> 
> 赞同：4
> 
> 时间：2012-07-31T16:36:45.117
> 
> 标签：java, eclipse, oop, inheritance

我有一个超级类和一堆子类。我希望在每个子类中都有一个具有相同名称的字段，但我不希望它在超类中定义，或者至少我不想使用该值。这就是我现在所拥有的

```
public abstract class Big {

    public String tellMe = "BIG";

    public Big() {}

    public void theMethod() {
        System.out.println ("Big was here: " + tellMe() + ", " + tellMe);
    }
    public String tellMe() {
        return tellMe;
    }
}

public class Little extends Big{

    public String tellMe = "little";
    public Little(){}

    public String tellMe() {
        return "told you";
    }
    public static void main(String [] args) {
        Little l = new Little();
        l.theMethod();
    }
} 
```

当我运行 Little 时，这是输出

大在这里：告诉你，大

我不确定为什么在tellMe 指的是“BIG”时打印出“告诉你”。怎么可能两者都是真的？

我的问题是我希望方法 tellMe() 在 Big 中，并在所有子类中定义变量 tellMe（它将实际返回）。我可以让它工作的唯一方法是正如我所写的那样，通过重写每个子类中的 tellMe() 方法。但这不是违背了继承的全部目的吗？？？请帮忙

编辑：我不在我的子类中使用构造函数。我想要的只是一个可以在所有子类中设置的字段和一个使用这些值的超类中的方法。我不明白为什么这是不可能的，因为每个子类都必须实现它，所以这是有道理的......如果这根本不可能，请告诉我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T16:43:51.097

Fields are not virtual, unlike methods. For this reason, it is a bad idea to declare fields with the same name as a field in another class in the hierarchy. The field referred to in `theMethod` is always going to be from `Big` (i.e. when you declare a field with the same name, it just hides the old field when in the scope of the replacing class, but doesn't replace it).

One solution would be to override a method that gets the field from the current class:

In `theMethod` replace the `tellMe` field with `getTellMe()` and for all classes override `getTellMe()` to return the correct value (or the field that hides the superclass's field).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:43:28.823

You can overwrite the value of `Big.tellMe` in the constructor of `Little`.

get rid of:

```
public String tellMe = "little"; 
```

and change the `Little` constructor to:

```
public Little(){
    tellMe = "little";
} 
```

at that point, you can get rid of `Little.tellMe()` also.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T16:53:42.967

[正如Java 文档](http://docs.oracle.com/javase/tutorial/java/IandI/hidevariables.html)所述，您正在做的是隐藏超类字段，而不是覆盖它。它还指出，这样做不是一个好主意。

因此，动态查找不适用于方法。如果从子类中读取变量，它将采用“其”字段值。在头等舱，另一个。

您可以在 Java 中覆盖的是行为，所以我建议定义一个方法

```
public String tellMe() {
  return "Whatever";
} 
```

您可以在子类中覆盖以返回您需要的任何字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T16:47:29.603

您可以在 Big 中创建一个函数，而不是在 Big 中定义 tellMe（因为您说您不想在 Big 中定义/使用该值）：

```
public abstract String tellMeString(); 
```

并像这样在每个子类中定义它（对于 Little）：

```
public String tellMeString()
{
    return "Little";
} 
```

然后该方法可以执行：

```
System.out.println ("Big was here: " + tellMe() + ", " + tellMeString()); 
```

在这种情况下，您根本不必定义变量“tellMe”，您只需在每个子类中覆盖 tellMeString 以返回不同的字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T16:47:31.833

字段不会像您预期的那样被继承。您可以从子类访问超类的字段（除非它是私有的）。但是您不能“覆盖”字段。这就是为什么`tellMe`在超类中实现的方法`Big`使用在同一个类中定义的变量。

如果你想要继承使用方法。例如，您可以实现`"BIG"`在超类和`"little"`子类中返回的方法“tellMe()”：

```
class Big {
    protected String tellMe() {
        return "BIG";
    }
}
class Little {
    @Override
    protected String tellMe() {
        return "Little";
    }
} 
```

或者，您可以在构造函数中初始化变量`tellMe`：

```
class Big {
    private String tellMe;
    public Big() {
        this("BIG");
    }
    protected Big(String tellMe) {
        this.tellMe = tellMe;
    }
    protected String tellMe() {
        return "BIG";
    }
}
class Little {
    public Little() {
         super("Little");
    }
} 
```

现在`new Little().tellMe()`将返回“Little”：超类中的变量在构造对象时被初始化；超类中定义的方法返回了这个变量。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T17:34:37.910

方法可以被覆盖，字段在它们被调用的范围内是可见的。

```
static class Big {
    String field = "BIG";
    String bark()   { return "(big bark)"; }

    void doIt() {
        System.out.format("field(%s) bark(%s)\n", field,bark());
    }
    void doIt2()    {
        System.out.format("2:field(%s) bark(%s)\n", field,bark());
    }
}

static class Small extends Big {
    String field = "small";
    String bark()   { return "(small bark)"; }
    void doIt2()    {
        System.out.format("2:field(%s) bark(%s)\n", field,bark());
    }
}

public static void main(String... args) {

    Big b = new Big();
    b.doIt();
    b.doIt2();

    Small s = new Small();
    s.doIt();
    s.doIt2();
} 
```

输出是：

```
field(BIG) bark((big bark))
2:field(BIG) bark((big bark))
field(BIG) bark((small bark))
2:field(small) bark((small bark)) 
```

由于 doIt() 是在 Big 类中定义的，因此它总是会看到 Big 版本的字段。doIt2() 在 Big 中定义，但在 Small 中被覆盖。Big.doIt2() 看到大版本的字段， Small.doIt2() 版本看到小版本的字段。

正如其他人指出的那样，这样做是一个非常糟糕的主意 - 更好的方法是在子类构造函数中设置新值，或者使用被覆盖的方法。

# google-chrome - 是否可以查看 chrome 历史记录的 ip 地址而不是 url？

> ID：11744928
> 
> 赞同：9
> 
> 时间：2012-07-31T16:36:46.597
> 
> 标签：google-chrome, ip, history

是否可以将 chrome 历史记录视为 ip 地址而不是 url？原因是在我的历史中，我有一个托管在多台服务器上的网站，我想挑选一个特定的服务器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T14:51:29.607

根据您真正需要做的事情，可能是嗅探器更合适。例如，我会使用wireshark。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T12:47:24.760

是的，您可以使用完整的详细信息跟踪您的网站。您需要在 yahoo 或 google google 网站管理员工具中添加您托管的网站 url。 [https://www.google.com/webmasters/tools/home?hl=en](https://www.google.com/webmasters/tools/home?hl=en) 这将为您提供出色的跟踪结果。

# visual-studio-2010 - vs 2010 中的异常调试

> ID：11744932
> 
> 赞同：1
> 
> 时间：2012-07-31T16:36:59.137
> 
> 标签：visual-studio-2010, debugging

我有一个简单的循环代码，并尝试调试它。想象一下我的代码中有 100 步（一个计数器继续）。是否有可能在 VS2010 中例如我跟踪第 1 步和第 2 步，然后忽略其余的直到 90，再次从 90 开始调试到 100？

我知道我可以在我的代码中使用 if 条件，但是 VS 2010 可以处理这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:40:15.973

在断点附近按右键，您将看到

命中数...

健康）状况...

等等

你可以用它来控制断点

# authentication - TFS 2010 安全性

> ID：11744933
> 
> 赞同：0
> 
> 时间：2012-07-31T16:37:05.020
> 
> 标签：authentication, tfs, tfs-sdk

我知道一个 TFS 2010 服务器，我可以通过创建一个来连接它`TfsConfigurationServer`，而无需设置任何凭据。

```
TfsConfigurationServer configurationServer = new TfsConfigurationServer(new Uri("address")) 
```

连接后，我可以检索所有团队项目集合和相应的团队项目。这不是安全漏洞吗？我不确定，因为我是 TFS api 的新手。

每个 TFS 服务器都允许这样列出团队项目吗？如果这是一个漏洞如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T19:58:53.127

可能不是您**没有使用任何凭据**，而是您没有**明确指定任何凭据**。在这种情况下，将使用您的登录用户凭据，您无需输入用户名和密码即可登录。

可能正在发生以下三件事之一：

1.  您以域用户身份登录到您的工作站。您要连接的 TFS 服务器已加入与您登录的域具有信任关系的域。您的域用户具有连接和查询团队项目集合列表的适当权限。

2.  您的计算机和 TFS 服务器之间没有信任关系，但您在服务器上的工作站上有相同的用户名/密码配置。（即，您正在使用“影子帐户”或“镜像本地帐户”。）您在 TFS 服务器上的用户具有连接和查询团队项目集合列表的适当权限。

3.  您已在 Windows 凭据管理器[中为此主机保存凭据。](http://windows.microsoft.com/en-us/windows-vista/Manage-stored-passwords)这些凭据具有连接和查询团队项目集合列表的适当权限。

如果这两件事之一不正确，则您需要向有权连接和查询团队项目集合列表的帐户提供明确的用户名/密码凭据。

可以在 IIS*中*打开匿名访问并允许来宾用户访问以列出 TFS 中的项目集合，但我不知道有人这样做过。我自己从未测试过这种情况。

无论如何，如果您正在查看启用了此功能的服务器，那确实不是常态。

# javascript - 在页面上设置 iframe

> ID：11744936
> 
> 赞同：1
> 
> 时间：2012-07-31T16:37:12.753
> 
> 标签：javascript, html, iframe

我有一个正在开发的基本网站，我想在其中一个页面上添加一个 iframe。所以我想做的是有几个从索引页面到另一个页面的链接。但是根据在索引页面上选择的链接，新页面应该打开并显示该 iframe。

您可以在此处查看该网站的草稿：[www.hansmoolman.com](http://hansmoolman.com/)

如果用户点击中间显示“汤沙拉三明治......”的部分，他们将被带到菜单页面，但菜单页面应该反映他们在索引页面上所做的选择。目前我已经设置了 iframe 并且指向菜单页面的链接正常工作，但它默认为“素食”，因为它是硬编码的，正如您在以下从索引页面链接的代码行中看到的那样：

`<li><a href="vegetarian.html" target="inlineFrame">Vegetarians</a></li>`

到显示 iframe 的菜单页面，如下所示：

`<div class="inlineStyle"> <iframe name="inlineFrame" src="vegetarian.html" frameborder="0" scrolling="no" width="108%" height="auto" marginwidth="5" marginheight="5" ></iframe> </div>`

我怎样才能让我的 iframe 自动显示用户在索引页面上选择的选项？某种 JavaScript（if else 语句？）会是她最好的解决方案，还是有另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:41:54.910

您可以`id`使用 url 的片段部分将 iframe 与 iframe 中的任何内容对齐：

`<iframe src="vegetarian.html#choice"/>`

现在在vegetarian.html 中，您可以拥有：

`<input id='choice' />`

Ant 这个输入文件将在你的 iframe 的左上角。

# php - .htaccess 中用于根目录的 URL 重写规则

> ID：11744937
> 
> 赞同：1
> 
> 时间：2012-07-31T16:37:13.117
> 
> 标签：php, .htaccess

我正在使用此规则来重写链接

```
RewriteEngine On
RewriteRule ^(.*)/(.*) show_cv.php?email=$1 
```

它工作正常，就像我用最后一个斜杠写这个 url

```
www.mysite.com/letschat_2008@yahoo.com/  ---->  index.php?email=letschat_2008@yahoo.com 
```

但是当我从链接中删除最后一个斜杠时，`www.mysite.com/letschat_2008@yahoo.com/`它会显示错误 404。

我希望 URL 重写规则适用于带有斜线和不带斜线 ( `/`)

```
www.mysite.com/letschat_2008@yahoo.com/ ----> index.php?email=letschat_2008@yahoo.com
www.mysite.com/letschat_2008@yahoo.com ----> index.php?email=letschat_2008@yahoo.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:44:07.057

您的规则正在循环，您需要确保您正在重写电子邮件地址，并添加一些条件，以便在访问现有资源时不会应用该规则：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Za-z0-9_\-\@\.]+)/?$ /show_cv.php?email=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:41:23.770

然后，您应该使用以下规则：

```
RewriteRule ^(.*)/? show_cv.php?email=$1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:44:54.370

I assume you note these rules in a .htaccess file, not in the server configuration when looking at your description ?

Rethink if you don-t want to put this into the server configuration. Apart from the usage of .htaccess files being harder to debug using rewrite rules in those files is more complex than in the server configuration. This is documented in mod_rewrites docs.

The reason for the behaviour is the different content of REQUEST_URI in both cases. Have a try checking this directly and you will see the problem. The whole part "letschat_2008@yahoo.com" is simply missing in that variable in case 2 (no "/"). To get this working you must use an additional rewriteCondition (also documented...). Something like these untested lines:

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/(.+)&
RewriteRule - show_cv.php?email=%1 
```

(note the '%' instead of a '$' in the last line)

# node.js - 我什么时候应该永远运行 node.js？

> ID：11744938
> 
> 赞同：1
> 
> 时间：2012-07-31T16:37:22.587
> 
> 标签：node.js, forever

我正在节点中编写一个快速应用程序。我试图让它崩溃但不能......每当我抛出异常时，应用程序仍在运行（即使没有配置错误处理程序）。如果这是相关的，我也在使用 express-resource 以及 streamline.js。

像[永远](https://github.com/nodejitsu/forever/)这样的东西什么时候对我有用？是否仅在系统资源不足等更严重的崩溃中发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:39:44.233

Forever 在开发阶段很有用。当您努力编写代码并且不想手动重新启动节点应用程序时。在生产中，当您遇到一些意外错误和所有项目崩溃时，它可以挽救您的生命；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-10T12:41:32.773

安装

```
 $ [sudo] npm install forever -g 
```

注意：如果您以编程方式使用 forever，您应该安装 forever-monitor。

```
$ cd /path/to/your/project
  $ [sudo] npm install forever-monitor 
```

用法有两种方法可以永久使用：通过命令行或在代码中使用永久。注意：如果您以编程方式使用 forever，则应安装 forever-monitor。

命令行用法 您可以使用 forever 来连续运行脚本（无论是否用 node.js 编写）。

例子

```
forever start app.js 
```

# python - 装瓶多个模板变量

> ID：11744941
> 
> 赞同：0
> 
> 时间：2012-07-31T16:37:27.247
> 
> 标签：python, python-2.7, bottle

有没有办法通过瓶子给模板多个变量？我知道您可以使用`template('mytemplate.tpl',var=var)`等，但是，您如何使用多个变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:10:49.450

正如您在[签名](http://bottlepy.org/docs/dev/api.html#bottle.template)中看到的那样，可以使用[关键字参数](http://docs.python.org/tutorial/controlflow.html#keyword-arguments)将任意数量的变量传递给模板：

```
template('mytemplate.tpl', name="Anne", address="4 Elm Street", 
                          dob=datetime.datetime(1977,12,2,1,2,3)) 
```

或者像这样

```
d = { "name": "Anne", "address": "4 Elm Street", "dob": datetime.datetime(1977,12,2,1,2,3) }
template('mytemplate.tpl', **d) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:44:50.680

```
values = {'name':name, 'gender':gender, 'age':age, 'address':address} 
template('mytemplate', var = values) 
```

在您的模板中，您访问变量为`var.name`, `var.gender`, `var.age`,`var.address`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T03:13:38.410

我喜欢的方法是这样的：

```
@route('/')
@view('mytemplate') #no .tpl
def mypage():
    return {"name": "Anne", "address": "4 Elm Street", "dob": datetime.datetime(1977,12,2,1,2,3)} 
```

这使得处理多个返回语句变得更加容易（尽管有些人认为多个返回语句是不好的做法），而且我发现更改模板文件要容易得多，因为我不需要每次都去查找它。

或者，如果您更喜欢 a=b、b=c 等方法

```
return dict(name="Anne", address="4 Elm Street", dob=datetime.datetime(1977,12,2,1,2,3)) 
```

# performance - scala 日志库中按值调用与按名称调用的性能

> ID：11744942
> 
> 赞同：8
> 
> 时间：2012-07-31T16:37:33.167
> 
> 标签：performance, scala, logging, callbyname

我最近一直在研究各种 scala 日志库，其中绝大多数都将日志功能实现为

```
def debug(s: => String) 
```

因此，如果您关闭了调试日志记录，它将不会执行该语句。但是，我刚刚遇到了[logula](https://github.com/codahale/logula)，它特别指出它的好处之一

> 与许多 Scala 日志库不同，Logula 的日志语句不使用按名称传递的语义（例如，f: => A），这意味着两件事：
> 
> *   Scala 编译器不必为每个日志记录语句创建一次性闭包对象。这应该可以减少垃圾收集的压力。

这对我来说真的很有意义。所以我的问题是，是否有任何现实世界的性能基准/数据比较这两种方法？理想情况下来自现场项目的东西与人为的基准？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T16:46:23.430

哪个更快完全取决于用例。如果您正在记录静态字符串，那么只传递该常量字符串并忽略它会更快。否则，如果您要创建字符串，则无论如何都必须创建至少一个对象。函数对象既小又便宜——如果你要忽略它，最好创建一个而不是字符串。

就个人而言，我认为这种对权衡的第一性原理的理解比对可能使用其中一个或另一个的特定应用程序的案例研究更有价值，因为它让您了解为什么要选择一个或另一个（并且您仍然希望对自己的应用程序进行基准测试）。

^(（注意：创建对象的成本取决于垃圾收集器受到的影响有多大；通常，可以以每秒 10 8)个数量级的速度创建和处理短期对象，这不是问题除了在紧密的内部循环中。如果您将日志记录语句放在紧密的内部循环中，我认为有问题。您应该为此编写单元测试。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T05:44:02.357

我会冒昧地说，当需要进行一些有趣的权衡时，关于权衡的哲学讨论会更有用，也就是说，不是在这里。

```
class A {
  var debugging = true
  @inline final def debug(msg: => String) = if (debugging) println(msg)

  def f = { debug("I'm debugging!") ; 5 }
}
% scalac292 -optimise a.scala
% ls -l *.class
-rw-r--r--  1 paulp  staff  1503 Jul 31 22:40 A.class
% 
```

计算闭包对象。

# android - Android mapview geopoint差异模拟器和设备

> ID：11744943
> 
> 赞同：0
> 
> 时间：2012-07-31T16:37:39.657
> 
> 标签：android, geolocation, android-mapview, geopoints

我正在使用 mylocation 类从 gps 提供商获取数据。代码是这样的：

```
MyLocation.LocationResult locationResult = new MyLocation.LocationResult() {
        @Override
        public void gotLocation(Location location) {
            //Got the location!

            // for phone
            //currentLocation = new GeoPoint((int) (location.getLatitude() * 1000000),
            //   (int) (location.getLongitude() * 1000000));

            // for emulator
            currentLocation = new GeoPoint((int) (location.getLatitude()),
                    (int) (location.getLongitude()));

            doSomething();

        }
    };
    MyLocation myLocation = new MyLocation();
    myLocation.getLocation(this, locationResult); 
```

当我在模拟器（2.3.3）中使用该应用程序时，它会显示正确的位置而不增加任何内容。

但是当我在设备（4.0）中使用它时，纬度和经度需要乘以 1000000。我找不到原因。我不认为这是因为 android 的版本。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:42:50.400

因为 MapView 使用 microdegress 作为其单位，所以您需要乘以 1e6。否则你会出现在非洲海岸 - 基本上纬度大约为 0,0

来自 GeoPoint 的文档：

> 表示一对纬度和经度的不可变类，存储为微度的整数。

不知道为什么模拟器正在工作 - 它不应该。

# git - 从本地 master 推送到远程非 master 分支

> ID：11744947
> 
> 赞同：3
> 
> 时间：2012-07-31T16:37:52.183
> 
> 标签：git, github, git-push

在我的本地机器上，我有一个存储库设置如下

```
* remote origin
  Fetch URL: git@github.com:me/my_project.git
  Push  URL: git@github.com:me/my_project.git
  HEAD branch: master
  Remote branches:
    mac-master tracked
    master     tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (local out of date) 
```

只有*本地*`master`分支，我想总是将我的本地 master 推送到*远程*分支。我应该这样做： **`mac-master`**

 **```
git push origin master:mac-master 
```

每次我需要推动？如果不是，那么正确的做法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T16:40:31.793

如果您总是想这样做，请运行

```
$ git push -u remote master:mac-master 
```

*一次*。该`-u`标志将设置选项，以便您随后可以执行以下操作：

```
$ git push 
```

推`master`到`mac-master`on `remote`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T16:44:24.767

You can change the branch on the remote that your branch is tracking by:

```
git branch --set-upstream   branch_name   your_remote/other_branch_name 
```

This way, pushes of `branch_name` to `your_remote` will be done to `other_branch_name`.**

# php - 使用 PHP/MySQLI/Apache 时在哪里安全地存储证书/密钥？

> ID：11744957
> 
> 赞同：2
> 
> 时间：2012-07-31T16:38:24.437
> 
> 标签：php, security, ssl, mysqli, certificate

我有单独的 web (Apache/PHP) 和数据库 (MySQL) 服务器使用 mysqli 通过 SSL 连接运行良好。在框架内数据库连接库的 ssl_set() 函数中，我可以指定密钥/pem 文件的路径，只要它在 docroot 中即可。如果文件在 docroot 之外，我显然无法访问它们，并且连接失败。

在 apache docroot 之外存储和访问 mysql 客户端 ssl 密钥的最安全方法是什么？

是否可以安全使用“ini_set”，从而我可以“即时”允许该访问，然后删除该参数？或者我应该使用符号链接？

我在这里寻找最佳实践。我想这个问题不仅限于证书密钥，但我想确保您知道我的具体用例。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-12T19:03:41.633

> 我在这里寻找最佳实践。我想这个问题不仅限于证书密钥，但我想确保您知道我的具体用例。

这个问题涉及到安全专家将针对不同威胁模型进行权衡取舍的领域，因此安全凭证管理没有“一个正确的答案”。然而，有很多明显错误的答案。

Chris Cornutt 发表了一篇关于[使用 Docker 保护 PHP 凭证](https://websec.io/2018/07/22/Docker-Secure-Credentials.html)的文章，我强烈建议您阅读这篇文章，了解有关解决凭证管理所涉及的威胁和策略的背景信息。

一般来说，[psecio/secure_dotenv](https://github.com/psecio/secure_dotenv)将为大多数用户解决这个问题。这是一个开源库，用于管理存储它们的静态加密凭证。

如果您需要更高级的东西（或与产品集成，例如 Vault），您可能需要请安全专家审查您的设计和实现。

# .net - 如何从实体框架中的多对多关系中获取数据？

> ID：11744960
> 
> 赞同：5
> 
> 时间：2012-07-31T16:38:41.073
> 
> 标签：.net, entity-framework, many-to-many

我在我的模型中以多对多关系获得了 2 个相互关联的实体。

只有 2 个表我知道在 db 中有 3 个表在 SQL 中我可以尝试这样的事情。

```
select * 
from table1 
where table1.id in (select idTable1 from middleTable) 
```

如何使用 Entity Framework 和 Linq 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T17:01:47.547

我用这样的东西解决我的问题

```
 container.Table.Where(x=> x.TableRealed.any(y=> x.column == value)).ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:52:50.867

如果您让实体设计器为您生成模型，它可以“隐藏”多对多关系的“中间表”，只要该中间表只包含具有关系（并且这些 id 是主键）。

生成模型后，您将在关系的“两侧”拥有集合属性。例如，我有两张表，People 和 Houses，它们具有多对多的关系。如果我已经正确设置了所有内容，那么每个`Person`对象都会有一个属性`Houses`，每个`House`对象都会有一个属性`People`。

希望这是有道理的。

# javascript - 将纹理从 GPU 复制到 CPU

> ID：11744963
> 
> 赞同：2
> 
> 时间：2012-07-31T16:38:57.843
> 
> 标签：javascript, html, gpu, webgl, textures

如何在 WebGL 中将纹理从 GPU 内存复制到 CPU？我在运行时使用 texSubImage2D 更新纹理。

我想避免：

*   在画布上存储纹理副本
*   渲染到纹理并调用 readPixels

还有其他方法吗？

已经阅读了这些（这对于在执行期间未更新的纹理很有用）：

*   [在 WebGL 上访问图像/纹理数据（纹素）](https://stackoverflow.com/questions/4702032/accessing-image-texture-data-texels-on-webgl)
*   [可以从 WebGL 纹理对象轻松创建 HTML 图像元素吗？](https://stackoverflow.com/questions/8191083/can-one-easily-create-an-html-image-element-from-a-webgl-texture-object)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T21:09:31.677

除了将纹理附加到 FBO 并执行 readPixels 之外，别无他法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:20:49.833

readPixels 或（因为 readPixels 往往有点慢）你可以在画布大小的四边形上渲染它。

和

```
var img = canvas.toDataURL("image/png"); 
```

该纹理将在 img 变量中。为了让它工作，你需要用这样的东西来初始化你 gl

```
gl = canvas.getContext("experimental-webgl", {preserveDrawingBuffer: true}); 
```

# php - 按字母顺序获取第一个和最后一个单词

> ID：11744966
> 
> 赞同：0
> 
> 时间：2012-07-31T16:39:06.367
> 
> 标签：php, mysql

> **可能重复：**
> [如何从 sql 查询中获取第一条和最后一条记录？](https://stackoverflow.com/questions/1485391/how-to-get-first-and-last-record-from-a-sql-query)

我在 mysql 数据库中有按字母顺序排序的单词。如何获取字母表中每个字母的第一个和最后一个单词。

所以假设数据库中有以下单词：

空中飞机 awol 周围

我想连接字母表的第一个和最后一个单词（所以在这种情况下是空中环绕）。我想获取以字母排序的特定字母开头的第一个和最后一个单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:00:38.923

这可以解决问题并且也适用于未排序的数据，请尝试

```
SELECT CONCAT(MIN(word),' - ',MAX(word))
FROM table
GROUP BY ASCII(LOWER(word)) 
```

它基本上按字母顺序获取每个字母的第一个和最后一个实例并将它们连接起来。ASCII(word) 只是获取单词最左边字母的 ASCII 算术值，所以本质上它是按单词或句子的每个第一个字母（或数字或符号）分组，并输出一个漂亮的“百科全书”式列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:41:49.967

尝试

```
select min(name)
from your_table
group by substring(name, 1, 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:42:36.720

```
 $str = "air airplane awol around";

    $exp = explode(' ', $str);

    $count = count($exp); // counting no. of items in array
    $count = $count--;     // reducing count by 1 because index starts from 0
    $first = $exp[0];     // storing first word
    $last = $exp[$count]; // storing last word

    echo $first." - ".$last; 
```

# java - 如何改进这个 xpath 表达式？

> ID：11744970
> 
> 赞同：0
> 
> 时间：2012-07-31T16:39:26.080
> 
> 标签：java, xpath

```
/web-app/filter/filter-class[text()="com.zide.AppFilter"]/following-sibling::init-param/param-name[text()="development.mode"]/following-sibling::param-value 
```

要替换的节点。

```
 <web-app>
  <!--  
  <welcome-file-list>
    <welcome-file>login/index.jsp</welcome-file>
  </welcome-file-list>
  -->
  <filter>
    <filter-name>Zide APP Filter</filter-name>
    <filter-class>com.zide.AppFilter</filter-class>
    <init-param>
      <param-name>config-file</param-name>
      <param-value>*.jsp,*.js</param-value>
    </init-param>
    <init-param>
      <param-name>development.mode</param-name>
      <param-value>true</param-value>
    </init-param>
  </filter>
</webapp> 
```

XML 文件大小 - 100kb。

文件中的行数 - 2600。

执行表达式的时间约为 213 毫秒。

有没有办法在java中优化这个表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:40:44.917

如果您确定 development.mode 仅存在于一个过滤器中，您可以直接使用它，它会减少获取数据的步骤数。

```
//param-name[text()="development.mode"]/following-sibling::param-value 
```

# node.js - 在 express.js 上启用 HTTPS

> ID：11744975
> 
> 赞同：558
> 
> 时间：2012-07-31T16:40:16.153
> 
> 标签：node.js, https, express

我正在尝试让 HTTPS 在 node 的 express.js 上运行，但我无法弄清楚。

这是我的`app.js`代码。

```
var express = require('express');
var fs = require('fs');

var privateKey = fs.readFileSync('sslcert/server.key');
var certificate = fs.readFileSync('sslcert/server.crt');

var credentials = {key: privateKey, cert: certificate};

var app = express.createServer(credentials);

app.get('/', function(req,res) {
    res.send('hello');
});

app.listen(8000); 
```

当我运行它时，它似乎只响应 HTTP 请求。

我编写了简单的基于香草`node.js`的 HTTPS 应用程序：

```
var   fs = require("fs"),
      http = require("https");

var privateKey = fs.readFileSync('sslcert/server.key').toString();
var certificate = fs.readFileSync('sslcert/server.crt').toString();

var credentials = {key: privateKey, cert: certificate};

var server = http.createServer(credentials,function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
});

server.listen(8000); 
```

当我运行这个应用程序时，它*会*响应 HTTPS 请求。请注意，我认为 fs 结果上的 toString() 并不重要，因为我使用了两者的组合，但仍然没有 es bueno。

* * *

编辑添加：

对于生产系统，您最好使用 Nginx 或 HAProxy 将请求代理到您的 nodejs 应用程序。您可以设置 nginx 来处理 ssl 请求，只需将 http 与您的节点 app.js 对话即可。

编辑添加（2015 年 4 月 6 日）

对于使用 AWS 的系统，您最好使用 EC2 弹性负载均衡器来处理 SSL 终止，并允许定期 HTTP 流量到您的 EC2 Web 服务器。为了进一步安全，请设置您的安全组，以便只允许 ELB 将 HTTP 流量发送到 EC2 实例，这将防止外部未加密的 HTTP 流量到达您的计算机。

* * *

* * *

## 回答 #1

> 赞同：852
> 
> 时间：2012-07-31T16:48:09.360

在 express.js（自版本 3 起）中，您应该使用该语法：

```
var fs = require('fs');
var http = require('http');
var https = require('https');
var privateKey  = fs.readFileSync('sslcert/server.key', 'utf8');
var certificate = fs.readFileSync('sslcert/server.crt', 'utf8');

var credentials = {key: privateKey, cert: certificate};
var express = require('express');
var app = express();

// your express configuration here

var httpServer = http.createServer(app);
var httpsServer = https.createServer(credentials, app);

httpServer.listen(8080);
httpsServer.listen(8443); 
```

通过这种方式，您可以向本机 http/https 服务器提供快速中间件

如果您希望您的应用程序在低于 1024 的端口上运行，您将需要使用`sudo`命令（不推荐）或使用反向代理（例如 nginx、haproxy）。

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2018-08-24T15:54:45.527

首先，您需要创建**selfsigned.key**和**selfsigned.crt**文件。转到[创建自签名 SSL 证书](https://www.digitalocean.com/community/tutorials/how-to-create-a-self-signed-ssl-certificate-for-apache-in-ubuntu-16-04)或执行以下步骤。

转到终端并运行以下命令。

`sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout ./selfsigned.key -out selfsigned.crt`

*   之后输入以下信息
*   国家名称（2 个字母代码）[AU]：**美国**
*   州或省名称（全名）[Some-State]：**NY**
*   地区名称（例如，城市）[]：**NY**
*   组织名称（例如，公司）[Internet Widgits Pty Ltd]：**xyz（您的组织）**
*   组织单位名称（例如，部分）[]：**xyz（您的单位名称）**
*   通用名称（例如服务器 FQDN 或您的姓名）[]：**www.xyz.com（您的 URL）**
*   电子邮件地址 []：**您的电子邮件**

> 创建后在您的代码中添加密钥和证书文件，并将选项传递给服务器。

```
const express = require('express');
const https = require('https');
const fs = require('fs');
const port = 3000;

var key = fs.readFileSync(__dirname + '/../certs/selfsigned.key');
var cert = fs.readFileSync(__dirname + '/../certs/selfsigned.crt');
var options = {
  key: key,
  cert: cert
};

app = express()
app.get('/', (req, res) => {
   res.send('Now using https..');
});

var server = https.createServer(options, app);

server.listen(port, () => {
  console.log("server starting on port : " + port)
}); 
```

*   最后使用**https**运行您的应用程序。

> 更多信息[https://github.com/sagardere/set-up-SSL-in-nodejs](https://github.com/sagardere/set-up-SSL-in-nodejs)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-02-25T13:01:08.137

我在让 SSL 在端口 443 以外的端口上工作时遇到了类似的问题。在我的情况下，我有一个捆绑证书以及一个证书和一个密钥。捆绑证书是一个包含多个证书的文件，节点要求您将这些证书分解为数组的单独元素。

```
 var express = require('express');
    var https = require('https');
    var fs = require('fs');

    var options = {
      ca: [fs.readFileSync(PATH_TO_BUNDLE_CERT_1), fs.readFileSync(PATH_TO_BUNDLE_CERT_2)],
      cert: fs.readFileSync(PATH_TO_CERT),
      key: fs.readFileSync(PATH_TO_KEY)
    };

    app = express()

    app.get('/', function(req,res) {
        res.send('hello');
    });

    var server = https.createServer(options, app);

    server.listen(8001, function(){
        console.log("server running at https://IP_ADDRESS:8001/")
    }); 
```

在 app.js 中，您需要指定 https 并相应地创建服务器。此外，请确保您尝试使用的端口实际上允许入站流量。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-04-05T03:06:16.967

### 包括积分：

1.  SSL 设置
    1.  在 config/local.js
    2.  在 config/env/production.js

### HTTP 和 WS 处理

1.  该应用程序必须在开发中运行在 HTTP 上，以便我们可以轻松地调试我们的应用程序。
2.  出于安全考虑，该应用程序必须在生产环境中在 HTTPS 上运行。
3.  应用程序生产 HTTP 请求应始终重定向到 https。

# SSL 配置

在 Sailsjs 中有两种配置所有东西的方法，第一种是在 config 文件夹中配置，每个文件都有其单独的文件（例如有关设置的数据库连接位于 connections.js 中）。其次是配置环境基础文件结构，每个环境文件都存在于`config/env`文件夹中，每个文件都包含特定环境的设置。

**Sails 首先查看 config/env 文件夹，然后期待 config/ *.js**

*现在让我们在`config/local.js`.*

```
var local = {
   port: process.env.PORT || 1337,
   environment: process.env.NODE_ENV || 'development'
};

if (process.env.NODE_ENV == 'production') {
    local.ssl = {
        secureProtocol: 'SSLv23_method',
        secureOptions: require('constants').SSL_OP_NO_SSLv3,
        ca: require('fs').readFileSync(__dirname + '/path/to/ca.crt','ascii'),
        key: require('fs').readFileSync(__dirname + '/path/to/jsbot.key','ascii'),
        cert: require('fs').readFileSync(__dirname + '/path/to/jsbot.crt','ascii')
    };
    local.port = 443; // This port should be different than your default port
}

module.exports = local; 
```

> 或者，您也可以在**config/env/production.js**中添加它。（此片段还显示了如何处理多个 CARoot 证书）

或者在***production.js中***

```
module.exports = {
    port: 443,
    ssl: {
        secureProtocol: 'SSLv23_method',
        secureOptions: require('constants').SSL_OP_NO_SSLv3,
        ca: [
            require('fs').readFileSync(__dirname + '/path/to/AddTrustExternalCARoot.crt', 'ascii'),
            require('fs').readFileSync(__dirname + '/path/to/COMODORSAAddTrustCA.crt', 'ascii'),
            require('fs').readFileSync(__dirname + '/path/to/COMODORSADomainValidationSecureServerCA.crt', 'ascii')
        ],
        key: require('fs').readFileSync(__dirname + '/path/to/jsbot.key', 'ascii'),
        cert: require('fs').readFileSync(__dirname + '/path/to/jsbot.crt', 'ascii')
    }
}; 
```

# http/https & ws/wss 重定向

这里 ws 是 Web Socket，wss 代表 Secure Web Socket，因为我们设置了 ssl，然后现在 http 和 ws 两个请求都变得安全并分别转换为 https 和 wss。

我们的应用程序有很多来源会像任何博客文章、社交媒体文章一样接收请求，但我们的服务器仅在 https 上运行，因此当任何来自 http 的请求时，它会在客户端浏览器中显示“无法访问此站点”错误。我们失去了我们的网站流量。所以我们必须将http请求重定向到https，同样的规则允许websocket，否则socket会失败。

所以我们需要在 80 端口（http）上运行相同的服务器，并将所有请求转移到 443（https）端口。Sails 在提升服务器之前首先编译 config/bootstrap.js 文件。在这里，我们可以在端口 80 上启动我们的 express 服务器。

**在 config/bootstrap.js 中（创建 http 服务器并将所有请求重定向到 https）**

```
module.exports.bootstrap = function(cb) {
    var express = require("express"),
        app = express();

    app.get('*', function(req, res) {  
        if (req.isSocket) 
            return res.redirect('wss://' + req.headers.host + req.url)  

        return res.redirect('https://' + req.headers.host + req.url)  
    }).listen(80);
    cb();
}; 
```

> 现在您可以访问[http://www.yourdomain.com](http://www.yourdomain.com)，它将重定向到[https://www.yourdomain.com](https://www.yourdomain.com)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-04-03T06:41:38.570

这就是它为我工作的方式。使用的重定向也将重定向所有正常的http。

```
const express = require('express');
const bodyParser = require('body-parser');
const path = require('path');
const http = require('http');
const app = express();
var request = require('request');
//For https
const https = require('https');
var fs = require('fs');
var options = {
  key: fs.readFileSync('certificates/private.key'),
  cert: fs.readFileSync('certificates/certificate.crt'),
  ca: fs.readFileSync('certificates/ca_bundle.crt')
};

// API file for interacting with MongoDB
const api = require('./server/routes/api');

// Parsers
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: false }));

// Angular DIST output folder
app.use(express.static(path.join(__dirname, 'dist')));

// API location
app.use('/api', api);

// Send all other requests to the Angular app
app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, 'dist/index.html'));
});
app.use(function(req,resp,next){
  if (req.headers['x-forwarded-proto'] == 'http') {
      return resp.redirect(301, 'https://' + req.headers.host + '/');
  } else {
      return next();
  }
});

http.createServer(app).listen(80)
https.createServer(options, app).listen(443); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-07-03T03:19:30.763

# 使用 greenlock-express：免费 SSL、自动 HTTPS

[Greenlock](https://git.coolaj86.com/coolaj86/greenlock-express.js)处理证书颁发和更新（通过 Let's Encrypt）和 http => https 重定向，开箱即用。

`express-app.js`：

```
var express = require('express');
var app = express();

app.use('/', function (req, res) {
  res.send({ msg: "Hello, Encrypted World!" })
});

// DO NOT DO app.listen()
// Instead export your app:
module.exports = app; 
```

`server.js`：

```
require('greenlock-express').create({
  // Let's Encrypt v2 is ACME draft 11
  version: 'draft-11'
, server: 'https://acme-v02.api.letsencrypt.org/directory'

  // You MUST change these to valid email and domains
, email: 'john.doe@example.com'
, approveDomains: [ 'example.com', 'www.example.com' ]
, agreeTos: true
, configDir: "/path/to/project/acme/"

, app: require('./express-app.j')

, communityMember: true // Get notified of important updates
, telemetry: true       // Contribute telemetry data to the project
}).listen(80, 443); 
```

# 截屏

观看快速入门演示：[https ://youtu.be/e8vaR4CEZ5s](https://youtu.be/e8vaR4CEZ5s)

[![](../Images/ecae29c7f6f4a4a95c56f901a5563ca6.png)](https://youtu.be/e8vaR4CEZ5s)

# 对于本地主机

只是提前回答这个问题，因为这是一个常见的后续问题：

您不能在本地主机上拥有 SSL 证书。但是，您可以使用[Telebit 之](https://git.coolaj86.com/coolaj86/telebit.js)类的东西，它可以让您像真正的应用程序一样运行本地应用程序。

您还可以通过 DNS-01 挑战将私有域与 Greenlock 一起使用，自述文件中提到了该挑战以及支持它的各种插件。

# 非标准端口（即没有 80 / 443）

阅读上面关于 localhost 的注释 - 您也不能在 Let's Encrypt 中使用非标准端口。

但是，您可以通过端口转发、sni-route 将内部非标准端口公开为外部标准端口，或者使用 Telebit 之类的东西为您执行 SNI 路由和端口转发/中继。

您还可以使用 DNS-01 挑战，在这种情况下您根本不需要公开端口，并且您还可以通过这种方式保护专用网络上的域。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-12-22T01:36:32.357

这个答案与 Setthase 非常相似，但它适用于**LetsEncrypt (Ubuntu)**

```
// Dependencies
const fs = require('fs');
const http = require('http');
const https = require('https');
const express = require('express');

const app = express();

// Certificate
const privateKey = fs.readFileSync('/etc/letsencrypt/live/yourdomain.com/privkey.pem', 'utf8');
const certificate = fs.readFileSync('/etc/letsencrypt/live/yourdomain.com/cert.pem', 'utf8');
const ca = fs.readFileSync('/etc/letsencrypt/live/yourdomain.com/chain.pem', 'utf8');

const credentials = {
    key: privateKey,
    cert: certificate,
    ca: ca
};

app.use((req, res) => {
    res.send('Hello there !');
});

// Starting both http & https servers
const httpServer = http.createServer(app);
const httpsServer = https.createServer(credentials, app);

httpServer.listen(80, () => {
    console.log('HTTP Server running on port 80');
});

httpsServer.listen(443, () => {
    console.log('HTTPS Server running on port 443');
}); 
```

您可能会遇到：EACCES：权限被拒绝，打开 '/etc/letsencrypt/live/yourdeomain.com/privkey.pem'

答案就在这里：[让我们加密 SSL 无法从“错误：EACCES：权限被拒绝，打开'/etc/letsencrypt/live/domain.net/privkey.pem'”开始](https://stackoverflow.com/questions/48078083/lets-encrypt-ssl-couldnt-start-by-error-eacces-permission-denied-open-et)

对我有用的是在 ubuntu ssh 终端获取用户`whoami`

```
// Create group with root and nodeuser as members
$ sudo addgroup nodecert
$ sudo adduser ubuntu nodecert
$ sudo adduser root nodecert

// Make the relevant letsencrypt folders owned by said group.
$ sudo chgrp -R nodecert /etc/letsencrypt/live
$ sudo chgrp -R nodecert /etc/letsencrypt/archive

// Allow group to open relevant folders
$ sudo chmod -R 750 /etc/letsencrypt/live
$ sudo chmod -R 750 /etc/letsencrypt/archive

sudo reboot 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-10-05T23:55:13.610

不要忘记凭据中的 PEM 密码短语！

当您使用 OpenSSL 生成凭据时（不要忘记`-sha256`标志）：

```
OpenSSL> req -x509 -sha256 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365
Generating a RSA private key

writing new private key to 'key.pem'
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase: 
```

您的 JS/TS 代码：

```
const credentials = {key: privateKey, cert: certificate, passphrase: 'YOUR passphrase'}; 
```

[参考](https://stackoverflow.com/a/54171490/14223224)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-08-20T22:20:19.793

这是我的***express 4.0******工作代码***。

 *express 4.0 与 3.0 和其他版本有很大不同。

4.0 你有 /bin/www 文件，你要在这里添加 https。

“npm start”是启动 express 4.0 服务器的标准方式。

readFileSync() 函数应该使用***__dirname***获取当前目录

而 require()***使用 ./***引用当前目录。

***首先你把 private.key 和 public.cert 文件放在 /bin 文件夹下，它和 WWW 文件是同一个文件夹****。**

# php - PHP 应用程序中的 MySQL 字符编码 (öä)

> ID：11744981
> 
> 赞同：1
> 
> 时间：2012-07-31T16:40:20.637
> 
> 标签：php, mysql, zend-framework, utf-8, character-encoding

您好，我的应用程序中有字符编码问题，想寻求帮助，因为即使我得到了一些指导，我也无法解决问题，所以这里是：我的 Ä 和 Ö 字符在浏览器中显示为： � </p>

我还将发布迄今为止我为解决问题所做的所有工作：

1) 数据库：我尝试更改表的排序规则，以下是 SHOW TABLE STATUS 为我的一张表提供的一些信息：

> Name = test_groups
> Engine = InnoDB
> Version = 10
> Row_format = Compact Collat​​ion
> = utf8_swedish_ci

数据库字符变量给出：

> | character_set_client = utf8
> | character_set_connection = utf8
> | character_set_database = latin1（我想知道这是原因吗？）
> | character_set_filesystem = 二进制
> | character_set_results = utf8
> | character_set_server = utf8
> | character_set_system = utf8

2）在 apache httpd.conf 我有：

> AddDefaultCharset UTF-8

3）在我的 Zend 应用程序 application.ini 中：

> resources.view.encoding = "UTF-8"

4) 在我的 Firefox 14.0.1 浏览器中

> 编辑->首选项->内容->高级->默认字符编码 = Unicode (UTF-8)

5）在我的 php 代码元标记中：

```
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
```

现在这里还有一些其他有趣的事情：当我查看我的页面并从 firefox 更改时

> 查看->字符编码->西方 (ISO-8859-1)

，来自 MySQL 数据库的�字符变成了 öä 字符，但是来自我的 php 代码的 öä 字符变成了 Ã¤t 字符。

当我检查来自我的 MySQL 数据库的数据的编码时，另一件事是

> mb_detect_encoding($DATA_FROM_MYSQL_DATABASE)

它输出UTF-8！最后，如果我在代码中这样做：

> utf8_encode($DATA_FROM_MYSQL_DATABASE)

并输出问题消失的结果，即 -characters -> öä-characters。那么这里发生了什么 x）感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:48:30.130

您是否将`SET NAMES utf8`PHP 作为第一个查询发送到 MySQL ？如果不是，这可能是原因。

> SET NAMES 指示客户端将使用什么字符集将 SQL 语句发送到服务器。因此，SET NAMES 'cp1251' 告诉服务器，“来自该客户端的未来传入消息在字符集 cp1251 中。” 它还指定服务器用于将结果发送回客户端的字符集。（例如，如果您使用 SELECT 语句，它指示用于列值的字符集。）

[在 MySQL 中设置名称 utf8？](https://stackoverflow.com/questions/2159434/set-names-utf8-in-mysql)有更多关于如何和为什么的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:51:19.810

疑难解答：

**检查您的数据库（例如使用 PHPMyAdmin）。字符是否正确存储？还是看起来很乱？**

如果数据库中的字符没问题，那么检索时就会出现问题。如果它们存储*不正确*（我猜是这样），那么问题出在“存储”上。

1.  检查您的源代码文件并验证它们是否以 UTF-8 编码。
2.  强制mysql连接使用UTF8 (mysqli::set_charset('utf8') or mysql_set_charset('utf8') or PDO: Add charset to the connection string (charset=utf8) )

# vba - CountIfs 日期范围和条件，可能是 VBA 解决方案

> ID：11744985
> 
> 赞同：0
> 
> 时间：2012-07-31T16:40:47.213
> 
> 标签：vba, excel, excel-formula

好的，这是我当前代码的示例。我在几个单元格中有这个，其中 B-H7 反映了它正在搜索的缺席类型。

```
=COUNTIFS('Old Data'!$A:$A,Tracking!A8,'Old Data'!$B:$B,$E$7, 'Old Data'!D:D, ">"&$B$5, 'Old Data'!D:D, "<"&$C$5) 
```

这段代码所做的是遍历电子表格，在数据表中找到员工姓名，比较缺勤类型并将它们分类到各自的列并计算它们，最后一段代码限制了日期范围之间的搜索。

话虽如此，我需要为此添加条件，如果不将其带入 VBA，我不确定是否可以。在 DI 列的“旧数据”表中有开始时间，以 MM/DD/YY HH:MM 格式显示。在 EI 列中有结束时间，以相同的 MM/DD/YY HH:MM 格式显示。

我需要有办法

A.) 让程序计算这些日期之间的天数，并为每一天的计数加 1。

B.) 如果开始日期和结束日期相同，让程序比较小时数。如果小于 4，则只向计数器添加 0.5。

我的第一个想法是从头开始计算 countifs 公式并循环遍历并使用 VBA 解析它，但我想我先检查一下是否可以仅使用公式来完成，因为内置函数的功能非常令人惊讶对我来说到目前为止。

我想我可能应该把它从一个公式带到一个 VBA 函数并在单元格中调用它，但我不完全确定，这对 VBA/Excel 场景来说很新。

另外，我在 Excel 2007 中。

感谢您对此问题的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:43:39.067

可以*使用*公式，但不能使用 COUNTIFS。这个数组公式应该做到这一点

`=SUM(IF(('Old Data'!$A$2:$A$100=Tracking!A8)*('Old Data'!$B$2:$B$100=$E$7)*('Old Data'!$D$2:$D$100>$B$5)*('Old Data'!$D$2:$D$100<$C$5),IF('Old Data'!$E$2:$E$100-'Old Data'!$D$2:$D$100<"4:00"+0,0.5,INT('Old Data'!$E$2:$E$100)-INT('Old Data'!$D$2:$D$100)+1)))`

confirmed with CTRL+SHIFT+ENTER

I restricted the data range to rows 2 to 100, adjust as required, whole columns is possible but that may slow down the formula considerably

To count workdays only change to this version:

`=SUM(IF(('Old Data'!$A$2:$A$100=Tracking!A8)*('Old Data'!$B$2:$B$100=$E$7)*('Old Data'!$D$2:$D$100>$B$5)*('Old Data'!$D$2:$D$100<$C$5),IF('Old Data'!$E$2:$E$100-'Old Data'!$D$2:$D$100<"4:00"+0,0.5,NETWORKDAYS('Old Data'!$D$2:$D$100+0,'Old Data'!$E$2:$E$100+0))))`

You can also exclude holidays if you add a holiday range to the NETWORKDAYS function

# python - 如何让我的输出适用于默认的列表字典

> ID：11744987
> 
> 赞同：0
> 
> 时间：2012-07-31T16:40:55.487
> 
> 标签：python

```
ls1 = [['b', (1, 1)], ['b', (1, 2)], ['b', (1, 3)], ['c', (2, 1)], ['c', (2, 2)]]
ls2 = ['A', 'B']

from itertools import groupby

key = lambda x: x[1][0]
lens = [len(list(g)) for k, g in groupby(sorted(ls1, key=key), key=key)]
dct = dict(zip(ls2, lens)) 
```

我的输出是

```
{'A': 3, 'B': 2} 
```

如果我使用，而不是在代码的最后一行使用 dict

```
d2 = defaultdict(list) 
```

那么我怎样才能在 d2 中获得相同的输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:53:18.840

我认为您不会从为此使用 defaultdict 获得太多好处，但这里有一个使用 collections.Counter 的版本：

```
ls1 = [['b', (1, 1)], ['b', (1, 2)], ['b', (1, 3)], ['c', (2, 1)], ['c', (2, 2)]]
ls2 = ['A', 'B']

from collections import Counter

lens = Counter(x[1][0] for x in ls1)
d2 = dict((k, v[1]) for k, v in zip(ls2, sorted(lens.items()))) 
```

最后一行的一个略短但可能更令人困惑的替代方案：

```
d2 = dict(zip(ls2, zip(*sorted(lens.items()))[1])) 
```

# php - PHP/MYSQL 如何在事务中获取 last_insert_id

> ID：11744989
> 
> 赞同：5
> 
> 时间：2012-07-31T16:41:03.510
> 
> 标签：php, mysql, transactions, lastinsertid

我有 2 个 MySQL 表

表#1 - 容器：

```
container_id INT (PK AI)
start_time DATETIME 
```

表#2 - 预订

```
reservation_id INT (PK AI) 
reservation_time DATETIME
container_id INT (FK) 
```

PHP代码：

```
mysqli_query($dbc,'SET AUTOCOMMIT=0');
mysqli_query($dbc,'START TRANSACTION');

$q1 = "INSERT INTO container (start_time) VALUES
      ('2012-07-03 11:00:00')";
$q2 = "INSERT INTO reservation (reservation_time, container_id) VALUES
      ('2012-07-03 11:00:00', LAST_INSERT_ID())";

$r1 = mysqli_query($dbc, $q1);
$r2 = mysqli_query($dbc, $q2);

if ($r1 && r2){
    mysqli_query($dbc, 'COMMIT');
} else {
    mysqli_query($dbc, 'ROLLBACK');
} 
```

我做错了什么？$r2 返回假。LAST_INSERT_ID() 不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T16:51:21.493

`LAST_INSERT_ID()`在任何上下文中工作，无论是事务还是用户定义的存储过程或用户定义的函数。

您的问题绝对不是`LAST_INSERT_ID()`，但更有可能您的代码的任何其他部分都失败了。

尝试检查是否存在错误并输出错误以便能够读取错误消息并采取相应措施。

为此使用`mysql_error()`。

# python - 如何为上限设置“自动”，但使用 matplotlib.pyplot 保持固定的下限

> ID：11744990
> 
> 赞同：142
> 
> 时间：2012-07-31T16:41:06.887
> 
> 标签：python, matplotlib

我想将 y 轴的上限设置为“自动”，但我想保持 y 轴的下限始终为零。我尝试了“自动”和“自动量程”，但这些似乎不起作用。先感谢您。

这是我的代码：

```
import matplotlib.pyplot as plt

def plot(results_plt,title,filename):

    ############################
    # Plot results

    # mirror result table such that each parameter forms an own data array
    plt.cla()
    #print results_plt
    XY_results = []

    XY_results = zip( *results_plt)

    plt.plot(XY_results[0], XY_results[2], marker = ".")

    plt.title('%s' % (title) )
    plt.xlabel('Input Voltage [V]')
    plt.ylabel('Input Current [mA]')

    plt.grid(True)
    plt.xlim(3.0, 4.2)  #***I want to keep these values fixed"
    plt.ylim([0, 80]) #****CHANGE**** I want to change '80' to auto, but still keep 0 as the lower limit 
    plt.savefig(path+filename+'.png') 
```

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-07-31T16:58:23.690

您可以只传递`left`或传递`right`给`set_xlim`：

```
plt.gca().set_xlim(left=0) 
```

对于 y 轴，使用`bottom`or `top`：

```
plt.gca().set_ylim(bottom=0) 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-09-17T15:16:03.767

只需设置`xlim`其中一个限制：

```
plt.xlim(left=0) 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-09-22T10:08:08.153

如前所述并根据 matplotlib 文档，`ax`可以使用类的[`set_xlim`](https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_xlim.html)方法设置给定轴的 x 限制`matplotlib.axes.Axes`。

例如，

```
>>> ax.set_xlim(left_limit, right_limit)
>>> ax.set_xlim((left_limit, right_limit))
>>> ax.set_xlim(left=left_limit, right=right_limit) 
```

一个限制可以保持不变（例如左限制）：

```
>>> ax.set_xlim((None, right_limit))
>>> ax.set_xlim(None, right_limit)
>>> ax.set_xlim(left=None, right=right_limit)
>>> ax.set_xlim(right=right_limit) 
```

要设置当前轴的 x 限制，该`matplotlib.pyplot`模块包含`xlim`仅包装 `matplotlib.pyplot.gca`和`matplotlib.axes.Axes.set_xlim`.

```
def xlim(*args, **kwargs):
    ax = gca()
    if not args and not kwargs:
        return ax.get_xlim()
    ret = ax.set_xlim(*args, **kwargs)
    return ret 
```

同样，对于 y 限制，使用`matplotlib.axes.Axes.set_ylim`或`matplotlib.pyplot.ylim`。关键字参数是`top`和`bottom`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-08T07:09:51.017

只需在@silvio 上添加一个点：如果您使用轴来绘制类似`figure, ax1 = plt.subplots(1,2,1)`. 然后`ax1.set_xlim(xmin = 0)`也有效！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-25T18:12:46.930

和允许值`set_xlim`来实现这一点。但是，您必须在绘制数据**之后**使用函数。如果您不这样做，它将使用默认的 0 表示左/下，使用默认值 1 表示上/右。设置限制后，每次绘制新数据时，它都不会重新计算“自动”限制。`set_ylim``None`

 **```
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot([0, 1, 4, 5], [3, 5, 6, 9])
ax.set_xlim(left=2, right=None)
ax.set_ylim(bottom=None, top=7)

plt.show() 
```

（即，在上面的例子中，如果你`ax.plot(...)`在最后做，它不会产生预期的效果。）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-09-06T00:18:57.083

你也可以这样做：

```
ax.set_xlim((None,upper_limit))
ax.set_xlim((lower_limit,None)) 
```

如果您想使用 set()，这将很有帮助，它允许您一次设置多个参数：

```
ax.set(xlim=(None, 3e9), title='my_title', xlabel='my_x_label', ylabel='my_ylabel') 
```**

# asp.net-mvc - 如何将 jqm data-role="page" 放在 MVC 视图页面中？

> ID：11744992
> 
> 赞同：0
> 
> 时间：2012-07-31T16:41:09.693
> 
> 标签：asp.net-mvc, jquery-mobile, razor

我正在使用 MVC3 创建一个 beta 移动网络应用程序。在我开始尝试在类似于[此的视图中获取内联页面之前，它工作正常](http://jquerymobile.com/test/docs/toolbars/docs-navbar.html)

这就是我目前在我看来称为索引的东西。为什么我点击导航栏中的链接时它没有转到页面？

```
@model List<ShawGoVersion1.Models.NewsItem>

@{
     ViewBag.Title = "News";
 }

@section Header {
@Html.ActionLink("Back", "Index", "Home", null, new { data_icon = "arrow-l"})
<h1>@ViewBag.Title</h1>
<div data-role="navbar">
        <ul>
            <li><a href="#MyNews">My News</a></li>
            <li><a href="#PressReleases">Press Releases</a></li>
            <li><a href="#AllNews">All News</a></li>
        </ul>
</div>
}

<div data-role="page" id="MyNews">
    <div data-role="content">
        <h1>This feature coming soon</h1>
    </div>
</div>

<div data-role="page" id="AllNews">
    <div data-role="content">    
        <ul data-role="listview">
            @for (int i = 0; i < Model.Count; i++ )
            {
                if (Model[i].type == "Article")
                {
                    <li>
                        <a href="@Url.Action("NewsItemDetails", "News", new { id = i })">
                            @if (Model[i].pictureURL != null)
                            {
                                <div class="ui-grid-c">
                                    <div class="ui-block-a" style="width:31%;vertical-align:middle">
                                        <img src="@Model[i].pictureURL" style="width:100%;height:auto"/>
                                    </div>
                                    <div class="ui-block-b" style="width:4%; vertical-align:middle"></div>
                                    <div class="ui-block-c" style="width:65%;vertical-align:middle">
                                        <h3 style="font-size:small; white-space:normal">@Model[i].title</h3>
                                        <p><strong>@Model[i].date.ToShortDateString()</strong></p>
                                    </div> 
                                </div>
                            }
                            else
                            {   
                                <h3 style="font-size:small; white-space:normal">@Model[i].title</h3>
                                <p><strong>@Model[i].date.ToShortDateString()</strong></p>
                            }                                                   
                        </a>
                    </li>
                }  
            }    
        </ul>
    </div>
</div>

<div id="PressReleases" data-role="page">
    <div data-role"content">
        <ul data-role="listview">
            @for (int i = 0; i < Model.Count; i++ )
            {
                if (Model[i].type == "Press Release")
                {
                    <li>
                        <a href="@Url.Action("NewsItemDetails", "News", new { id = i })">
                            @if (Model[i].pictureURL != null)
                            {
                                <div class="ui-grid-c">
                                    <div class="ui-block-a" style="width:31%;vertical-align:middle">
                                        <img src="@Model[i].pictureURL" style="width:100%;height:auto"/>
                                    </div>
                                    <div class="ui-block-b" style="width:4%; vertical-align:middle"></div>
                                    <div class="ui-block-c" style="width:65%;vertical-align:middle">
                                        <h3 style="font-size:small; white-space:normal">@Model[i].title</h3>
                                        <p><strong>@Model[i].date.ToShortDateString()</strong></p>
                                    </div> 
                                </div>
                            }
                            else
                            {   
                                <h3 style="font-size:small; white-space:normal">@Model[i].title</h3>
                                <p><strong>@Model[i].date.ToShortDateString()</strong></p>
                            }                                                   
                        </a>
                    </li>
                }  
            }    
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:16:42.427

您的导航栏应该出现在 data-role="page" 中。在 data-role="page" 中，您应该有一个 data-role="header" 并且如果您希望它位于 jqm 页面的标题中，您的导航栏应该进入那里。

或者，如果你不想那样做（你应该这样做，因为它是正确的方式）。您可以尝试自己在导航栏中捕获这些链接的 onclick 事件，然后触发

```
$.mobile.changePage(); 
```

这可能有效。

# opengl - Open GL 纹理，纹理坐标与渲染的内容不正确

> ID：11744993
> 
> 赞同：0
> 
> 时间：2012-07-31T16:41:12.257
> 
> 标签：opengl, texture-mapping, texturing

我正在使用 opengl 渲染场景，并使用一些示例代码和 FreeImage API 加载纹理。

这是我所看到的链接

[图片已删除]

我可以确认所有纹理坐标都根据需要提供给glTexCoord2f 0.0f 和1.0f 以及顶点坐标。

每个渲染的三角形似乎都粘贴了（并重复）完整的纹理，而不是坐标指定的纹理区域。

纹理为 1024x1024。

这是加载纹理的函数

```
bool loadImageToTexture(const char* image_path, unsigned int &handle)
{
    if(!image_path)
        return false;

    FREE_IMAGE_FORMAT fif = FIF_UNKNOWN;
    FIBITMAP* dib(0);
    BYTE* bits(0);
    unsigned int width(0), height(0);

    //open the file
    fif = FreeImage_GetFileType(image_path, 0);
    if(fif == FIF_UNKNOWN)
        fif = FreeImage_GetFIFFromFilename(image_path);
    if(fif == FIF_UNKNOWN)
        return false;
    if(FreeImage_FIFSupportsReading(fif))
        dib = FreeImage_Load(fif, image_path);
    if(!dib)
        return false;

    //is the file of the correct type
    FREE_IMAGE_COLOR_TYPE type = FreeImage_GetColorType(dib);
    if(FIC_RGBALPHA != type)
    {
        //convert to type
        FIBITMAP* ndib = FreeImage_ConvertTo32Bits(dib);
        dib = ndib;
    }

    //get data for glTexImage2D
    bits = FreeImage_GetBits(dib);
    width = FreeImage_GetWidth(dib);
    height = FreeImage_GetHeight(dib);
    if((bits == 0) || (width == 0) || (height == 0))
        return false;

    //create the texture in open gl
    glGenTextures(1, &handle);
    glBindTexture(GL_TEXTURE_2D, handle);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glPixelStorei(GL_TEXTURE_2D, 4);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height,
                 0, GL_RGBA, GL_UNSIGNED_BYTE, bits);

    //unload the image now loaded
    FreeImage_Unload(dib);

    return true;
} 
```

这些是用于渲染的函数

```
inline void glTexture(float textureSize, float t, float u)
{
    glTexCoord2f(u/textureSize, (textureSize - t)/textureSize);
}
void processTriangle(const btVector3* triangle, const textureCoord* tc, const btVector3& normal,
                     const int partId, const int triangleIndex, const bool wireframe)
{
    if(wireframe)
    {
        glBegin(GL_LINES);
        glColor3f(1, 0, 0);
        glVertex3d(triangle[0].getX(), triangle[0].getY(), triangle[0].getZ());
        glVertex3d(triangle[1].getX(), triangle[1].getY(), triangle[1].getZ());
        glColor3f(0, 1, 0);
        glVertex3d(triangle[2].getX(), triangle[2].getY(), triangle[2].getZ());
        glVertex3d(triangle[1].getX(), triangle[1].getY(), triangle[1].getZ());
        glColor3f(0, 0, 1);
        glVertex3d(triangle[2].getX(), triangle[2].getY(), triangle[2].getZ());
        glVertex3d(triangle[0].getX(), triangle[0].getY(), triangle[0].getZ());
        glEnd();
    }
    else
    {
        glBegin(GL_TRIANGLES);

        glColor3f(1, 1, 1);
        //Normals are per triangle
        glNormal3f(normal.getX(), normal.getY(), normal.getZ());
        glTexture(1024.0f, tc[0].t, tc[0].u);
        glVertex3d(triangle[0].getX(), triangle[0].getY(), triangle[0].getZ());
        glTexture(1024.0f, tc[1].t, tc[1].u);
        glVertex3d(triangle[1].getX(), triangle[1].getY(), triangle[1].getZ());
        glTexture(1024.0f, tc[2].t, tc[2].u);
        glVertex3d(triangle[2].getX(), triangle[2].getY(), triangle[2].getZ());

        glEnd();
    }
}
void processAllTriangles(const btVector3& worldBoundsMin, const btVector3& worldBoundsMax)
{
    btVector3 triangle[3];
    textureCoord tc[3];

    //go through the index list build triangles and draw them
    unsigned int k = 0;
    for(unsigned int i = 0; i<dVertices.size(); i+=3, k++)
    {
        //first vertex
        triangle[0] = dVertices[i];
        tc[0] = dTexCoords[i];

        //second vertex
        triangle[1] = dVertices[i+1];
        tc[1] = dTexCoords[i+1];

        //third vertex
        triangle[2] = dVertices[i+2];
        tc[2] = dTexCoords[i+2];

        processTriangle(triangle, tc, dNormals[k], 0, 0, false);
    }
}
//draw the world given the players position
void render(btScalar* m, const btCollisionShape* shape, const btVector3& color, int debugMode,
            const btVector3& worldBoundsMin, const btVector3& worldBoundsMax)
{
    //render the world using the generated OpenGL lists
    //enable and specify pointers to vertex arrays
    glPushMatrix();
    glMultMatrixf(m);

    glMatrixMode(GL_TEXTURE);
    glLoadIdentity();
    glMatrixMode(GL_MODELVIEW);

    glEnable(GL_TEXTURE_2D);
    glShadeModel(GL_SMOOTH);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    glBindTexture(GL_TEXTURE_2D, m_texturehandle);

    processAllTriangles(worldBoundsMin, worldBoundsMax);

    glPopMatrix();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:17:36.080

我在一个更大的代码库中工作，并且在不同区域以不同的方式进行纹理处理意味着来自其他纹理对象的状态没有被禁用。

在完成每个顶点纹理之前，请确保关闭其他种类的纹理。

```
glDisable(GL_TEXTURE_GEN_S);
glDisable(GL_TEXTURE_GEN_T);
glDisable(GL_TEXTURE_GEN_R); 
```

# sql - sql 只获得表中记录的第一行，我想要所有

> ID：11744994
> 
> 赞同：1
> 
> 时间：2012-07-31T16:41:18.923
> 
> 标签：sql, join, group-by, having, average

有人已经帮助我完成了这个查询，但我做了一个调整，我遇到了一个问题：

```
 SELECT 
        AVG(tyd.price) AS avg_price, COUNT(tyd.id_product) AS cnt, 
        tyd.id_marchand, tyd.id_product, 
        catalog.price AS c_price, tyd.price AS t_price, 
        tyd.amount AS t_am, pro_tyd.amount AS p_am, 
        pro_tyd.price AS p_price, catalog.img_src,  
        tyd.step, tyd.login AS tyd_l
    FROM catalog 
    INNER JOIN tyd ON catalog.id_marchand = tyd.id_marchand 
                   AND catalog.id_product =   tyd.id_product
                   AND tyd.step = "1" 
    INNER JOIN pro_tyd  ON tyd.id_marchand = pro_tyd.id_marchand 
                        AND tyd.id_product = pro_tyd.id_product
    GROUP BY 
         catalog.id_product, catalog.id_marchand
    HAVING 
         tyd.login = "user1@tyd.fr" 
```

并且它仅在`tyd.login = "user3@tyd.fr"`哪个是较低的 id 时才有效。不适用于 user1 或 user2...我只是不知道为什么...！如果我按 tyd.login 分组，它也可以工作，但在这种情况下，AVG 和 COUNT 函数只能在一行上工作......

这是表格：

```
id  id_marchand  id_product   login       price  amount  delay  step    time   
29      1           1       user3@tyd.fr   344     1       0      1   1343297500
120     1           1       user1@tyd.fr   54      1       0      1   1343297504
109     1           1       user10@tyd.fr  34      1       0      1   1343298598 
```

当`HAVING tyd.login = "user3@tyd.fr"`它完美运行时。当 user1 或 user2 我得到 0 行。

感谢您的帮助

第一个主题：[Sql，在逃避where条件的同时获得一个组的平均值](https://stackoverflow.com/questions/11740458/sql-get-the-average-on-a-group-while-escaping-the-where-condition)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:10:17.600

问题是您的查询是不确定的。您正在选择更多您分组依据的列，其中附加列不是由您分组依据的列确定的。如果后者是真的，那么这将属于 SQL 的 ANSII 标准，因为它根本不是（在我看来）MySQL 的失败，它允许语句运行。其他 DBMS 则采取了相反的方式，因为它们无法确定某些列是否是未包含在 group by 中的其他列的函数，它们现在将允许任何包含未包含在 group by 中的选择列表中的列的语句。

要尝试简化问题，请使用以下数据集（表 T）

```
ID    Col1    Col2
1     1       1
2     1       3 
```

运行这个：

```
SELECT Col1, MAX(Col2) AS MaxCol2, MIN(Col2) AS MinCol2, AVG(Col2) AS AvgCol2
FROM T
GROUP BY Col1 
```

总会回来的

```
Col1    MaxCol2    MinCol2    AvgCol2
1       3          1          2 
```

但是，如果您`ID`混入其中

```
SELECT ID, Col1, MAX(Col2) AS MaxCol2, MIN(Col2) AS MinCol2, AVG(Col2) AS AvgCol2
FROM T
GROUP BY Col1 
```

没有办法确定会返回哪个ID，1还是2，最有可能的结果是

```
ID    Col1    MaxCol2    MinCol2    AvgCol2
1    1       3          1          2 
```

但是，SQL 中没有定义任何内容来说明结果不能是：

```
ID    Col1    MaxCol2    MinCol2    AvgCol2
2     1       3          1          2 
```

因此，如果以上是结果集，并且您添加`HAVING ID = 1`到查询中，则由于 HAVING 子句应用于数据的点，您将不会得到任何结果。如果您要向其中添加 ID，`GROUP BY`您最终会得到 2 行，据我所知，这不是您想要的，如果您要将其添加到`WHERE`您的 MIN、MAX 和 AVG 函数中，则会受到影响。所以你需要使用子查询。所以在这个例子中我会使用

```
SELECT  T.ID, T.Col1, MaxCol2, MinCol2, AvgCol2
FROM    T
        INNER JOIN
        (   SELECT Col1, MAX(Col2) AS MaxCol2, MIN(Col2) AS MinCol2, AVG(Col2) AS AvgCol2
            FROM T
            GROUP BY Col1
        ) T2
            ON T.Col1 = T2.Col1
WHERE   ID = 1 -- OR ID = 2 DEPENDING ON REQUIREMENTS 
```

要将其应用于您的情况，数据库引擎已确定将为不在 group by 中的列返回的行是包含 ID = 29 的行。因此，您的 HAVING 子句仅适用于该行，具有在应用 HAVING 子句时，user1@tyd.fr 和 user10@tyd.fr in 已经从结果中删除。您需要对过滤单独执行聚合函数。

现在我还没有完全理解你的模式，但我希望我已经很好地解释了非确定性语句的问题，以便你可以对我尝试重写你的查询进行任何修改

```
SELECT  Avg_Price,
        Cnt,
        tyd.id_marchand, 
        tyd.id_product, 
        catalog.price AS c_price, 
        tyd.price AS t_price, 
        tyd.amount AS t_am, 
        pro_tyd.amount AS p_am, 
        pro_tyd.price AS p_price, 
        catalog.img_src,  
        tyd.step, 
        tyd.login AS tyd_l
FROM    Catalog
        INNER JOIN tyd
            ON catalog.id_marchand = tyd.id_marchand 
            AND catalog.id_product = tyd.id_product
        INNER JOIN Pro_tyd
            ON tyd.id_marchand = pro_tyd.id_marchand 
            AND tyd.id_product = pro_tyd.id_product
        INNER JOIN
        (   SELECT  ID_Marchand, ID_Product, Step, AVG(tyd.price) AS avg_price, COUNT(tyd.id_product) AS cnt
            FROM    Tyd
            WHERE   Step = '1'
            GROUP BY ID_Marchand, ID_Product, Step
        ) Agg
            ON Agg.id_marchand = pro_tyd.id_marchand 
            AND Agg.id_product = pro_tyd.id_product
            AND Agg.Step = tyd.Step
WHERE   tyd.Login = 'user1@tyd.fr' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:25:58.580

我只想添加这个查询：

```
SELECT * FROM  tyd WHERE step = "1" 
GROUP BY tyd.id_product, tyd.id_marchand 
HAVING tyd.login = "user1@tyd.fr" 
```

有同样的问题。在 tyd.login = "user3" 时有效，但在询问其他用户时无效...