# StackOverflow 问答 10111000-10111999

# iphone - iPhone iOS 大 UIView 在显示时被裁剪为 320x460。如何预防？

> ID：10111000
> 
> 赞同：2
> 
> 时间：2012-04-11T17:32:08.000
> 
> 标签：iphone, objective-c, ios, uiview, bounds

我在情节提要中定义了一个 850x1100 UIView，它是普通窗口大小的 4 倍，我将它用作 PDF 生成模板。该视图被包裹在一个滚动视图中。然而，当我显示视图时，它的框架会调整大小并变为 320x460，有效地切断了框架外的所有内容。

有谁知道为什么我在故事板中定义为 850x1100 的 UIView 在 iPhone 上显示时将其帧重置为 320x460？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:30:22.493

此帧重新计算不是错误。视图的框架表示其相对于屏幕坐标的位置和大小。

iPhone 的查看区域为 320x480，任何将其框架设置为大于设备查看区域的 CGRect 的视图都将被“裁剪”并将其框架设置回查看区域（由于状态栏，查看区域为 320x460） .

尝试：

```
scrollView.contentSize = CGSizeMake(850,1100);
scrollView.clipsToBounds = NO;
pdfView.clipsToBounds = NO; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:41:13.987

你确定不是contentsize太小的滚动视图吗？它不会根据内容自动调整大小 - 您必须明确`contentSize`设置`UIScrollView`

# haskell - 如何编译 BNF 转换器？

> ID：10111006
> 
> 赞同：2
> 
> 时间：2012-04-11T17:32:50.727
> 
> 标签：haskell, ghc, bnf, ghci, alex

有人用 ghc-7.2.1 和 alex-3 成功构建了 BNFC 吗？我试图手动修复它，但有很多错误。有谁知道我在哪里可以找到一些可以帮助我完成它的补丁？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:46:46.517

[我在http://www.tiresiaspress.us/haskell/bnfc/](http://www.tiresiaspress.us/haskell/bnfc/)放置了一个修改后的 darcs 存储库。它适用于 ghc-7.4 和 alex-3（我没有更改文档，所以它仍然说 alex-2）。非常骇人听闻，YMMV。

# windows - 将用户锁定到浏览器窗口（使用 .dll 文件）

> ID：10111008
> 
> 赞同：0
> 
> 时间：2012-04-11T17:33:04.873
> 
> 标签：windows, google-chrome, npapi

是否可以使用 .dll 文件（NPAPI 插件）或任何其他方法将用户锁定在 chrome 中？

我想在高度受控的环境中调用 chrome 浏览器，最好是在 Windows 上。我会[为企业下载 chrome](http://www.google.com/apps/intl/en/business/chromebrowser.html)并编写策略，使用户不能访问除一个之外的任何 url。

我会创建一个打包的应用程序并在桌面上为用户创建一个应用程序快捷方式，该快捷方式会转到该 url。所以它将以 KIOSK 模式打开。但我希望该用户不应该能够离开 chrome，特别是那个窗口，并且在他退出应用程序或明确关闭窗口之前，不应该能够使用任何其他程序。这意味着禁用功能 /ctrl/alt 和窗口键。像[这样](https://stackoverflow.com/questions/6887240/locking-focus-to-a-window-wpf)的东西，但有铬。

即使在“锁定”模式下打开 chrome 本身也不是问题。

有人实施过吗？是否可以使用 NPAPI 插件或任何其他方法？如果有人可以指导我使用任何此类资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:05:37.287

不，这实际上不可能使用 NPAPI 插件，至少不能单独使用。至少你需要一个扩展（见[http://npapi.com/extensions](http://npapi.com/extensions)）。

如果您从扩展程序加载它，则可能会获得浏览器的窗口句柄等，但我认为您最好使用单独的应用程序。

# eclipse - 如何为拼写错误的单词配置 Eclipse 快速修复？

> ID：10111010
> 
> 赞同：0
> 
> 时间：2012-04-11T17:33:08.550
> 
> 标签：eclipse

如何配置 Eclipse 对拼写错误的快速修复？有一个“将 [word] 添加到字典”的选项，但我设法禁用了这个选项。我在哪里可以再次使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:54:50.613

*   打开

> {workspace_location}.metadata.plugins\org.eclipse.core.runtime.settings\org.eclipse.jdt.ui.prefs

*   删除以下首选项（或将值设置为 false）

> do_not_ask_to_install_user_dictionary=true

# c# - 将组合框选定项与 XML 元素值进行比较 - C#

> ID：10111014
> 
> 赞同：1
> 
> 时间：2012-04-11T17:33:28.483
> 
> 标签：c#, nullreferenceexception

我想用我的 XML 文件中的值（我已经完成）填充我的组合框，然后在标签中显示该值树下的一些元素。一切都在标签页中

我在按钮单击中创建了这样的组合框：

```
int i = 0; //global variable for keeping track of combo box objects
int j = 0; // same but for labels
//the following codes are in the button click:
var document = XDocument.Load(workingDir + @"\Level4.xml");
            comboBoxModuleSelect.Add(new ComboBox());
            System.Drawing.Point p = new System.Drawing.Point(7, 57 + i * 25);
            (comboBoxModuleSelect[i] as ComboBox).Location = p;
            (comboBoxModuleSelect[i] as ComboBox).Size = new System.Drawing.Size(183, 20);
            tabPageLevel4.Controls.Add(comboBoxModuleSelect[i] as ComboBox); 
```

并像这样填充它们：

```
var moduleName = from d in document.Descendants("moduleTitle")
                        select d.Value;
            foreach (var item in moduleName)
            {
                //add the module names into the dropdown for students to select
                (comboBoxModuleSelect[i] as ComboBox).Items.Add(item);
            } 
```

现在我想在用户选择的当前组合框中获取选定的值，并检索一些与该值相关的 XML 元素。但是我在这一行得到了一个 NullReferenceException ：

```
var assessment = from d in document.Descendants("moduleTitle")
                            where d.Value == (comboBoxModuleSelect[i] as ComboBox).SelectedItem.ToString()
                            select d.Parent.Element("assessmentType").Value; 
```

上`comboBoxModuleSelect[i]`

如果需要，XML 如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<Course>
  <CourseName>BEng Software Engineering</CourseName>
  <Modules>
    <Module>
      <moduleCode>ECSE401</moduleCode>
      <moduleTitle>Programming Methodology</moduleTitle>
      <credits>15</credits>
      <assessmentDetails>
        <assessment>
          <assessmentName>Coursework</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>40</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Coursework</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>40</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Test2</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>30</assessmentWeighting>
        </assessment>
      </assessmentDetails>
    </Module>
    <Module>
      <moduleCode>ECSC404</moduleCode>
      <moduleTitle>Computer Systems Fundamentals</moduleTitle>
      <credits>15</credits>
      <assessmentDetails>
        <assessment>
          <assessmentName>Test1</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>30</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Test2</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>30</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Test3</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>40</assessmentWeighting>
        </assessment>
      </assessmentDetails>
    </Module>
    <Module>
      <moduleCode>EBSY401</moduleCode>
      <moduleTitle>Information and Data Modelling</moduleTitle>
      <credits>15</credits>
      <assessmentDetails>
        <assessment>
          <assessmentName>Test</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>25</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Coursework1</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>10</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Coursework2</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>35</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Coursework3</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>30</assessmentWeighting>
        </assessment>
      </assessmentDetails>
    </Module>
    <Module>
      <moduleCode>ECSC405</moduleCode>
      <moduleTitle>Software Development Principles</moduleTitle>
      <credits>15</credits>
      <assessmentDetails>
        <assessment>
          <assessmentName>Test1</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>30</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Coursework</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>40</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Test2</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>30</assessmentWeighting>
        </assessment>
      </assessmentDetails>
    </Module>
    <Module>
      <moduleCode>ECSC407</moduleCode>
      <moduleTitle>Web Technology</moduleTitle>
      <credits>15</credits>
      <assessmentDetails>
        <assessment>
          <assessmentName>Tutorials</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>20</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Coursework</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>20</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Exam</assessmentName>
          <assessmentType>Exam</assessmentType>
          <assessmentWeighting>60</assessmentWeighting>
        </assessment>
      </assessmentDetails>
    </Module>
    <Module>
      <moduleCode>ECSC409</moduleCode>
      <moduleTitle>Software Engineering Principles</moduleTitle>
      <credits>15</credits>
      <assessmentDetails>
        <assessment>
          <assessmentName>Test1</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>40</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Coursework1</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>30</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Coursework2</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>30</assessmentWeighting>
        </assessment>
      </assessmentDetails>
    </Module>
    <Module>
      <moduleCode>ECSC408</moduleCode>
      <moduleTitle>Mathematics for Computing</moduleTitle>
      <credits>15</credits>
      <assessmentDetails>
        <assessment>
          <assessmentName>Coursework</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>50</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Exam</assessmentName>
          <assessmentType>Exam</assessmentType>
          <assessmentWeighting>50</assessmentWeighting>
        </assessment>
      </assessmentDetails>
    </Module>
    <Module>
      <moduleCode>EBSY400</moduleCode>
      <moduleTitle>Communication and Learning Skills</moduleTitle>
      <credits>15</credits>
      <assessmentDetails>
        <assessment>
          <assessmentName>Presentation</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>30</assessmentWeighting>
        </assessment>
        <assessment>
          <assessmentName>Portfolio</assessmentName>
          <assessmentType>Coursework</assessmentType>
          <assessmentWeighting>70</assessmentWeighting>
        </assessment>
      </assessmentDetails>
    </Module>
  </Modules>
</Course> 
```

为什么我会收到 nullreferenceexception？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-10-14T18:39:31.070

尝试将 .SelectedItem.ToString() 更改为 . 文本作为 comboBox_type_boat.Text 返回所选值 SelectedItem.ToString() 返回从 XML 填充的组合框的值

# c# - 如何将多个文本框转换为一个值

> ID：10111019
> 
> 赞同：0
> 
> 时间：2012-04-11T17:33:46.507
> 
> 标签：c#, wpf, xaml, user-controls, imultivalueconverter

在我的 WPF 应用程序中，用户输入 GPS 坐标，格式为度：分：秒，作为分钟的小数部分。

因此 60° 30' 45" 将输入为 60° 30.750' 。

然后我将其存储为纯十进制数，因此上述示例将存储为 60.5125。

这个想法是这样用户就不会弄乱输入，它将被设置在 3 个不同的文本框中。一种用于度数，另一种用于分钟，一种用于小数秒。将其中一个数字分成两个文本框有点糟糕，但如果他们必须在其中输入整数，则担心所有点或逗号混淆，并且可能会搞砸。

所以我认为可能有用的一件事是 IMultiValueConverter 但它似乎只适用于 MultiBindings 这是我在这里没有做的事情。

目前我的解决方案是绑定到不同的属性并在后面的代码中进行所有计算，但我对小数位并不满意。我假设 3 个小数字母，但如果他们只输入 7 并假设 0.700 但得到 0.007，所以我想我必须做一个字符串格式位。

有没有更好的解决方案。我可以将 MultiValueConverter 用于这样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:01:00.013

您可以尝试使用 MaskedTextBox，例如[Extended WPF Toolkit](http://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox)中的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:02:09.373

您可以使用[Masked TextBox](http://marlongrech.wordpress.com/2007/10/28/masked-textbox/)。此[实现](https://lancommunity.svn.codeplex.com/svn/LanCommunity.WPF.Controls/MaskedTextBox.cs)使用[MaskedTextProvider](http://msdn.microsoft.com/en-us/library/system.componentmodel.maskedtextprovider.aspx)，它是一个 .net 类。

# gem - 安装后无法使用 rhc，对于 openshift

> ID：10111020
> 
> 赞同：7
> 
> 时间：2012-04-11T17:33:52.783
> 
> 标签：gem, openshift, vmc, openshift-client-tools

安装 rhc 和 vmc 后，我遇到了一个奇怪的问题。以下似乎都不起作用。

对于 Openshift： [https ://openshift.redhat.com/app/getting_started](https://openshift.redhat.com/app/getting_started)

对于 Cloudfoundry： [http ://docs.cloudfoundry.com/tools/vmc/installing-vmc.html](http://docs.cloudfoundry.com/tools/vmc/installing-vmc.html)

我正在使用 Ubuntu 10.04

```
root@bose-Vostro-1540:/home/bose# gem install rhc
Successfully installed parseconfig-0.5.2
Successfully installed rhc-0.88.9
2 gems installed
Installing ri documentation for parseconfig-0.5.2...
Installing ri documentation for rhc-0.88.9...
Installing RDoc documentation for parseconfig-0.5.2...
Installing RDoc documentation for rhc-0.88.9...
root@bose-Vostro-1540:/home/bose# rhc
No command 'rhc' found, did you mean:
 Command 'rtc' from package 'nvram-wakeup' (universe)
 Command 'rc' from package 'rc' (universe)
 Command 'rec' from package 'sox' (universe)
 Command 'rcc' from package 'libqt4-dev' (main)
 Command 'rsc' from package 'radare-common' (universe)
 Command 'rvc' from package 'vtgrab' (universe)
rhc: command not found 
```

* * *

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T07:00:56.037

我正在使用`rbenv`，并且遇到了同样的问题

用于`gem list`检查它是否已安装，如果是，也许您只需要找到它并将其添加到您的`PATH`.

就像我这样做

```
ln -s /home/fengyl/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rhc-1.4.8/bin/rhc /home/fengyl/.rbenv/shims/ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-06T16:01:33.823

尝试不要使用 sudo 安装它。

> 宝石安装 rhc

为我工作，

> 须藤宝石安装rhc

没有。文档要求您执行前者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T18:16:19.440

[这里](https://www.redhat.com/openshift/community/forums/express/rhc-create-domain-command-not-found)已经解决了一个类似的问题。希望有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T13:53:47.890

我是开发客户端工具并使用 RVM 在本地毫无问题地测试我的版本的 OpenShift 开发人员之一。

如果您使用的是 RVM，您的 $PATH 应该包含类似这样的内容（我使用 1.9.3 和我的客户端工具的 gemset）。

```
$ echo $PATH | tr : \\n 
/home/fotios/.rvm/gems/ruby-1.9.3-p125@client-tools/bin
/home/fotios/.rvm/gems/ruby-1.9.3-p125@global/bin
/home/fotios/.rvm/rubies/ruby-1.9.3-p125/bin
/home/fotios/.rvm/bin
...

$ which rhc
~/.rvm/gems/ruby-1.9.3-p125@client-tools/bin/rhc 
```

如果没有，您的 .bashrc/.profile 可能有问题。查看[RVM 安装说明](http://beginrescueend.com/rvm/install/)或运行`rvm notes`以确保一切正常。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-31T20:08:32.590

这发生在我身上，目前的答案都没有解决它。

这是我解决问题的方法（将红宝石添加到您的路径中）：

```
PATH="`ruby -e 'puts Gem.user_dir'`/bin:$PATH" 
```

# firefox - 禁用/更改 Firefox 安全模式热键 (Shift)

> ID：10111026
> 
> 赞同：5
> 
> 时间：2012-04-11T17:33:56.873
> 
> 标签：firefox, selenium, keyboard-shortcuts, safe-mode

有什么方法可以更改使firefox以安全模式启动的firefox shift热键吗？我已经使用 Selenium 和 PHPUnit 设置了一些单元测试，但是如果我在测试运行时在机器上工作，那么我经常发现我在键入时按了 shift（在我选择代码块时按住 shift 是另一个大罪犯）。即使您点击弹出的安全模式提示，这也会导致测试失败（并超时）。

有没有办法禁用此热键，或者将键更改为我不经常使用的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:05:02.613

我也遇到过这个问题，没有找到解决办法。似乎它仍然是一个未解决的问题：[Mozilla 论坛线程](http://support.mozilla.org/en-US/questions/792910)、[Bug 653410](https://bugzilla.mozilla.org/show_bug.cgi?id=653410)、[Bug 644175](https://bugzilla.mozilla.org/show_bug.cgi?id=644175)等等。作为一种解决方法，您可以安装 firefox 3.6，因为此功能是从 firefox 4 开始实施的，但可能不适合您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-12T19:02:45.900

Mozilla 最终添加了一个环境变量来控制这种行为。不幸的是，以一种适用于整个图形系统的方式配置这个环境变量，而不仅仅是一个 bash 会话，有点困难。这过去是通过 /etc/launchd.conf 完成的，但 macOS 在 v10.10 中放弃了对此的支持。幸运的是，systemctl 提供了一个 .plist 文件系统，它可以定义运行程序并在启动时定义系统范围的环境变量，所以我发布了这个工作 .plist 文件，以及安装和删除它的说明：

[https://github.com/mcandre/dotfiles/blob/master/setenv.MOZ_DISABLE_SAFE_MODE_KEY.plist](https://github.com/mcandre/dotfiles/blob/master/setenv.MOZ_DISABLE_SAFE_MODE_KEY.plist)

这对我来说太棒了，因为我喜欢通过 QuickSilver 使用 Control+Alt+G 从 GUI 中的任何位置启动我的 Web 浏览器，这当然包括 Firefox 倾向于将其解释为信号安全模式的 Alt 修饰符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T20:10:52.027

在修复[错误 653410](https://bugzilla.mozilla.org/show_bug.cgi?id=653410)之前，我能想到的最佳解决方法是检测何时启动安全模式并以适合您特定目的的最佳方式处理它。这可能意味着终止 Firefox 进程并重新启动，或者可能意味着警告用户，或两者兼而有之。

当 Firefox 以安全模式启动时，它会将“LastVersion=Safe Mode”写入其配置文件目录中的 compatibility.ini 文件。下面给出了一个示例 C# 函数来监视这一点。

```
 FileSystemWatcher safeModeWatcher;

    private void watchSafeMode()
    {
        string profiles = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "Mozilla", "Firefox", "Profiles");
        string defaultProfile = Directory.GetDirectories(profiles, "*default*")[0];
        safeModeWatcher = new FileSystemWatcher(defaultProfile, "compatibility.ini");
        safeModeWatcher.NotifyFilter = NotifyFilters.LastWrite;
        safeModeWatcher.Changed += delegate(object s, FileSystemEventArgs e)
        {
            if (File.ReadAllText(e.FullPath).Contains("LastVersion=Safe Mode"))
            {
                // safe mode!
                System.Diagnostics.Trace.WriteLine("safe mode detected!");
                // TODO kill Firefox and launch again, or whatever makes sense for you
            }
        };
        safeModeWatcher.EnableRaisingEvents = true;
        // ...
        // TODO Dispose safeModeWatcher when done
    } 
```

# java - 较小的伊甸园空间是否会导致任期空间不断增加？

> ID：10111028
> 
> 赞同：5
> 
> 时间：2012-04-11T17:34:14.550
> 
> 标签：java, memory-management, jvm

我将首先给出我们创建的对象的一些细节。并会问一个问题（最后）。

我在 linux 上使用 64 位但 JVM。

我的 jvm 选项是： -Xmx6g -Xms3g -XX:MaxPermSize=256m

分析器 (jprofiler) 指示 2 个位置消耗大量内存： 1) 在这里，每秒创建大约 4 个字符串（每个 110KB），并对每个字符串执行 StringUtils.replace。还执行了一些其他字符串分配等，但分析器清楚地表明 StringUtils.replace 是持有大部分内存的东西。2）在这里，每分钟创建一个包含 4 个对象（单个类）的对象（保留大小，如果 3.5MB），并（重新）放置到静态并发哈希映射中（因此映射在任何时候都只包含 1 个对象）。父对象只有这 4 个子对象，仅此而已。这 4 个对象中的每一个都包含 10K 数组列表、10K 日期和其他字符串等。我明确地将旧的父对象（我从 map.replace() 获得的那个）分配给 null 并明确清除 (ArrayList.clear())数组列表，

内存行为是：内存使用量不断增加，并且在某一时刻主要收集（2GB）发生。次要收集（700MB）也大约每分钟发生一次。

**问题**：您是否认为#1 实际上导致伊甸园空间已满，因此 JVM 将 #2 中的对象推送到永久空间，因此内存使用量不断增加，直到发生重大收集？出于诊断目的，我将 #2 中的父对象更改为保留 500KB 的大小（小 7 倍，还有 1.4K 的 Date、ArrayList 等实例），我仍然看到相同的内存行为。

我将选项更改为 -Xmx12g -Xms3g -XX:MaxPermSize=256m -XX:NewSize=8g 现在，我看到内存中 #2 中的对象数量较少，我看到任期空间/旧代的增长较慢。#2 中的那些对象现在被快速收集很好，但是 CPU 使用率非常高，因为现在的次要收集非常大（8G）并且每 2 分钟发生一次。

我的目标是快速收集所有对象（所以我看不到内存使用量不断增加），但不要让次要集合太大。

关于我应该采取什么方法的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:41:27.573

收集 eden 空间的成本与 eden 空间中保留的对象数量成正比。由于成本很高，这表明大部分对象的保留时间超过 2 分钟。

由于您每两分钟创建大约 6 GB 的对象（NewSize 包括两个幸存者空间），或者每分钟大约 3 GB，其中大部分来自您建议的大小仅为每分钟几 MB。

我认为更好地了解 3 GB 的来源并减少它会很有用，因为您似乎只需要每分钟保持 10 MB 左右。

顺便说一句：如果您每分钟创建 10 MB 的垃圾，那么您在十小时内只会创建 6 GB，并且在那段时间内您不需要任何次要或主要收集。

如果我跑

```
public class GCLikeMad {
    public static void main(String... args) {
        for(Long l = 0L; l < Integer.MAX_VALUE * 10L; l++);
    }
} 
```

`-XX:NewSize=256m`我看到了

```
[GC 295664K->240K(2121792K), 0.0011190 secs]
[GC 286832K->240K(2113216K), 0.0011510 secs]
[GC 278384K->240K(2105216K), 0.0012900 secs]
[GC 270256K->240K(2097280K), 0.0010110 secs]
[GC 262448K->240K(2257280K), 0.0013450 secs] 
```

* * *

`-XX:newSize=8g -verbosegc`我看到了

```
[GC 6291664K->320K(7345408K), 0.0017790 secs]
[GC 6291776K->272K(7345408K), 0.0021570 secs]
[GC 6291728K->272K(7345408K), 0.0014490 secs]
[GC 6291728K->240K(8393600K), 0.0016680 secs]
[GC 8388080K->208K(8393600K), 0.0018730 secs] 
```

* * *

与`-XX:NewSize=30g -mx31g -XX:SurvivorRatio=100 -verbosegc`此时 32 位引用和仅使用一个 NUMA 内存区域。

```
[GC 30840864K->256K(31154304K), 0.0014270 secs]
[GC 30840832K->256K(31154304K), 0.0014730 secs]
[GC 30840832K->224K(31154304K), 0.0016500 secs]
[GC 30840800K->272K(31154304K), 0.0015740 secs]
[GC 30840848K->272K(31462336K), 0.0015280 secs] 
```

* * *

它开始`-XX:NewSize=128g -mx130g -XX:SurvivorRatio=100 -verbosegc`有所作为。注意：此时正在使用多个 NUMA 内存区域和 64 位引用。这是每 2 分钟收集一次。

```
[GC 131586048K->320K(132907264K), 0.0042360 secs]
[GC 131586368K->1376K(132907264K), 0.0058030 secs]
[GC 131587424K->1440K(132907264K), 0.0034110 secs] 
```

此时它已经创建了 200 亿个 Long 对象，而只有三个集合。

我想说 128 GB 的 Eden 空间是巨大的。:D

* * *

我的观点是增加伊甸园的大小并不会单独增加 GC 时间。它增加了保留的对象数量，这增加了所花费的时间。

# javascript - 替代行颜色，除了“无替代颜色”类

> ID：10111029
> 
> 赞同：2
> 
> 时间：2012-04-11T17:34:18.243
> 
> 标签：javascript, jquery, html-table

我在 JavaScript 文件中有这个表达式......

```
$('tbody tr:even').addClass("alt-row"); 
```

它交替了我所有表格行的颜色，这没关系。但是我想在 tr 中添加一个异常类，例如“no-alternate-color”。

```
<table id="invoice">
  <tbody>
  <tr class="headings">
    <th class="item first" style="padding-left:5px;">Unidad</th>
    <th class="description">Descripcion</th>
    <th class="price">Precio</th>
    <th class="quantity">Cantidad</th>
    <th class="linetotal last" style="padding-right:7px;">Total</th>
  </tr>
  <tr class="lineitem alt-row" style="border-bottom:1px solid #e5e5e5;">
    <td class="item_name_data" style="padding:2px 2px 2px 5px;">MacBook Pro 13"</td>
    <td class="description">13-inch: 2.4 GHz
2.4GHz dual-core
Intel Core i5
    </td>
    <td class="price_data">1199.99</td>
    <td class="quantity_data">2</td>
    <td class="linetotal_data" style="padding-right:5px;">2399.98</td>
  </tr>
  <tr class="lineitem" style="border-bottom:1px solid #e5e5e5;">
    <td class="item_name_data" style="padding:2px 2px 2px 5px;">Muji Table</td>
    <td class="description">awesome light brown table</td>
    <td class="price_data">89.99</td>
    <td class="quantity_data">1</td>
    <td class="linetotal_data" style="padding-right:5px;">89.99</td>
  </tr>
</tbody>
</table> 
```

例如，上表中tr的本来就没有“alt-row”类，而是通过jQuery函数添加的。

我对 jQuery 不是很流利。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T17:38:31.223

```
$('tbody tr:not(.no-alternate-color):even').addClass("alt-row"); 
```

[http://jsfiddle.net/CKeew/](http://jsfiddle.net/CKeew/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T17:50:47.047

如果您愿意，您可以单独使用 CSS 来完成此操作（取决于您要完成的工作）.. 达到这种效果..

[http://jsfiddle.net/xENWM/1/](http://jsfiddle.net/xENWM/1/)

# c# - 403禁止资源错误

> ID：10111031
> 
> 赞同：-8
> 
> 时间：2012-04-11T17:34:19.833
> 
> 标签：c#, asp.net, security, iis

在我合并了其他人代码的一些更改后，我看到了这个错误。我之前能够很好地浏览到目录。

现在，基本上我的本地服务器正在抛出这个错误。这就是它所说的。我确实尝试以管理员身份运行该项目，并尝试为 iis 授予文件夹和所有内容的完全权限，但还没有运气。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:54:23.460

[尝试在 Web 服务器上运行该页面 - 它可能会给您实际的 403 错误 - 例如 403.11 - 然后您可以在此处](http://support.microsoft.com/kb/943891)查找该错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:43:17.380

如果您不是在谈论应用到您的存储库的大量合并更改，那么您很可能会浪费更少的时间

*   撤消合并
*   并检查服务器上可用的一一更改。

根据我的经验，这通常是最简单的方法。

希望这可以帮助。

# javascript - 如何使用 javascript 对象验证表单字段？

> ID：10111035
> 
> 赞同：0
> 
> 时间：2012-04-11T17:34:37.150
> 
> 标签：javascript, jquery, validation

我正在尝试使用 javascript 对象值进行一些简单的表单验证。我知道这不是“理想的”，但我只是在使用一种不需要铁定的简单形式。

请看我的小提琴示例：http: [//jsfiddle.net/6dXd7/3/](http://jsfiddle.net/6dXd7/3/)

我试图确保每个表单字段都有一个值。如果是这样，请将 的值设置`myObj.fieldID`为`yes`。

然后，当提交表单时，检查每个现有的`myObj.XXX`并确保它们的所有值都是`yes`.

在我的示例中，我在创建对象时遇到了麻烦，并且我不知道在按下提交按钮时如何循环遍历所有对象而不指定每个对象的名称。

这是上面链接到的 jsfiddle 示例中的代码：

```
<script>
$(document).ready(function () {
    var myObj = {};
    $("input.checkblank").blur(function () {
        var inputID = $(this).attr("id");
        var contents = $("input#" + inputID).val();
        if (contents == "") {
            $(myObj).data(inputID, "no");
        } else {
            $(myObj).data(inputID, "yes");
        }
    });
    $("#verify").click(function () {
        if (myObj.first && myObj.second == "yes") {
            // ***** Trying to get it to scan through ALL existing myObj's and make sure all their values are "yes" *****        
            $('.results').text('all good');
        } else {
            $('.results').text('not good');
        }
    });
});
</script>

<input type="text" name="first" id="first" class="checkblank"><br />
<input type="text" name="second" id="second" class="checkblank">
<a href="#" id="verify">check</a><br />
<p class="results"> </p> 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:50:22.350

您将字段信息存储在 jQuery DATA 中，并尝试稍后检查它们，而不是在同一个地方...

```
var obj = {}
$(obj).data('a','1');
console.log(obj.a); //this will log null, cause there's no attribute 'a' in 'obj'
console.log($(obj).data('a')); //this will log '1' :] 
```

相反，您应该将数据存储在本机对象的属性中，如下所示：

```
var obj = {}
obj['a'] = '1'; //obj.a = '1' work's too
console.log(obj.a); //now it log '1' :] 
```

另外，您的验证功能是错误的..它只检查`first`内部是否存在`myObj`以及是否`second`存在并且等于`"yes"`。所以你的验证功能应该是这样的：

```
$("#verify").click(function() {
    var allFieldsOK = false;
    for ( var field in checkedFields ) {
        if ( !(allFieldsOK = checkedFields[field] ) ) break;
    }
    $('.results').text(  allFieldsOK ? 'all good' : 'not good' );
}); 
```

这是对您的 jsFiddle 的更新，它适用于您的目的，如果您在该类中添加更多输入字段，它应该可以工作`checkblank`：] [http://jsfiddle.net/6dXd7/5/](http://jsfiddle.net/6dXd7/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:50:45.267

替换这个

```
$("#verify").click(.........}); 
```

有了这个

```
$("#verify").click(function() {
    var flag=true;
    $('.checkblank').each(function(){    //check all elements with class checkblank
         if($(this).val().length==0)     //set flag false if anyone of them is blank
            flag=false;                 
    })
    if (flag)  {
            $('.results').text('all good');       
        } else {  
            $('.results').text('not good');
        } 
}); 
```

...它应该工作

# linux - 快速查找外壳

> ID：10111038
> 
> 赞同：4
> 
> 时间：2012-04-11T17:34:50.167
> 
> 标签：linux, shell, find

我有一个简单的查找命令，需要遍历服务器上的数百万个文件并找到一些具有给定后缀的文件。随着时间的推移，这些文件被频繁地写入和删除。我只是想知道是否有一种方法可以更快地找到。使用 locate 是没有问题的，因为为 locate 制作数据库将非常昂贵。

```
find /myDirWithThausandsofDirectories/ -name *.suffix 
```

在某些服务器上，此命令需要几天时间！

有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:39:40.753

您可以使用审计子系统来监控文件的创建和删除。将此与初始运行相结合，`find`您可以创建一个可以实时更新的文件数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T17:41:55.833

分而治之？假设 MP 操作系统和处理器`find`为每个子文件夹生成多个命令。

```
for dir in /myDirWithThausandsofDirectories/*
do find "$dir" -name "*.suffix" &
done 
```

根据子目录的数量，您可能希望控制`find`在给定时间运行的进程（命令）数量。这会有点棘手，但可行（即使用 bash shell，用生成的进程的 pid 保存一个数组，`$!`并且只允许新进程，具体取决于数组的长度）。上面也没有搜索根目录下的文件，只是一个简单的例子。

如果您不知道如何完成流程管理，那么是时候学习了；） [这](http://mywiki.wooledge.org/ProcessManagement)是一篇非常好的关于该主题的文章。 [这才](http://mywiki.wooledge.org/ProcessManagement#I_want_to_process_a_bunch_of_files_in_parallel.2C_and_when_one_finishes.2C_I_want_to_start_the_next._And_I_want_to_make_sure_there_are_exactly_5_jobs_running_at_a_time.)是你真正需要的。但是请阅读整个内容以了解它是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:09:11.933

由于您使用的是简单的 glob，因此您可以使用**Bash 的递归 glob**。例子：

```
shopt -s globstar
for path in /etc/**/**.conf
do
    echo "$path"
done 
```

可能会更快，因为它使用的内部 shell 功能的灵活性比`find`.

如果你不能使用 Bash，但你对路径深度有限制，你可以明确列出不同的深度：

```
for path in /etc/*/*.conf /etc/*/*/*.conf /etc/*/*/*/*.conf
do
    echo "$path"
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T22:00:48.950

这是代码：

```
find /myDirWithThausandsofDirectories/ -d type maxdepth 1 > /tmp/input
IFS=$'\n' read -r -d '' -a files < /tmp/input

do_it() {
   for f; do find $f  -name *.suffix | sed -e s/\.suffix//g ; done
}

# Divide the list into 5 sub-lists.
i=0 n=0 a=() b=() c=() d=() e=()
while ((i < ${#files[*]})); do
    a[n]=${files[i]}
    b[n]=${files[i+1]}
    c[n]=${files[i+2]}
    d[n]=${files[i+3]}
    e[n]=${files[i+4]}
    ((i+=5, n++))
done

# Process the sub-lists in parallel
do_it "${a[@]}" >> /tmp/f.unsorted 2>/tmp/f.err &
do_it "${b[@]}" >> /tmp/f.unsorted 2>/tmp/f.err &
do_it "${c[@]}" >> /tmp/f.unsorted 2>/tmp/f.err &
do_it "${d[@]}" >> /tmp/f.unsorted 2>/tmp/f.err &
do_it "${e[@]}" >> /tmp/f.unsorted 2>/tmp/f.err &
wait
echo Find is Done! 
```

我遇到的唯一问题是一些文件名（非常小的百分比）部分存在。我不知道是什么原因！

# c++ - 通过 std::function 包装重载函数

> ID：10111042
> 
> 赞同：10
> 
> 时间：2012-04-11T17:35:03.303
> 
> 标签：c++, c++11, overloading

我有一个重载的函数，我想传递它，包裹在 std::function 中。GCC4.6 没有找到“匹配函数”。虽然我确实在这里找到了一些问题，但答案并不像我希望的那样清楚。有人能告诉我为什么下面的代码不能扣除正确的重载以及如何（优雅地）解决它吗？

```
int test(const std::string&) {
    return 0;
}

int test(const std::string*) {
    return 0;
}

int main() {
    std::function<int(const std::string&)> func = test;
    return func();
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T17:39:05.897

那是模棱两可的情况。

为了消除歧义，使用显式强制转换为：

```
typedef int (*funtype)(const std::string&);

std::function<int(const std::string&)> func=static_cast<funtype>(test);//cast! 
```

现在编译器将能够根据强制转换中的类型来消除这种情况的歧义。

或者，您可以这样做：

```
typedef int (*funtype)(const std::string&);

funtype fun = test; //no cast required now!
std::function<int(const std::string&)> func = fun; //no cast! 
```

那么为什么`std::function<int(const std::string&)>`不能按照`funtype fun = test`上面的方式工作呢？

答案是，因为`std::function`可以用任何对象初始化，因为它的构造函数是模板化的，它独立于你传递给的模板参数`std::function`。

# c++ - 随机数不那么随机

> ID：10111045
> 
> 赞同：7
> 
> 时间：2012-04-11T17:35:21.103
> 
> 标签：c++, random

我在一个类中有一个方法如下......

```
class foo{
   int bar::randomNum10to50(){
      srand (time(NULL));
      int random10to50 = rand()%50+10; 
      return random10to50;
   }
} 
```

但是，当我从 main 调用它时（只是为了检查输出，因为我没有从我期望的程序中得到行为）就像这样......

```
foo create;
for (int i=0; i<20;i++){
    cout<<create.randomNum10to50()<<endl;
} 
```

每次运行时都是完全相同的数字（即，9,9,9,9,9,....；下一次运行：43,43,43,43,......）我不知道是什么出错了。代码运行得非常快，所以我认为这可能是问题所在，但我不明白为什么它的 20 次迭代之间甚至不会有细微差别。任何想法表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-11T17:37:08.793

您需要*在*randomizer 函数之外调用`srand()` *一次。*否则，您每次都使用完全相同的时间值重新播种随机数生成器，从而产生相同的初始“随机”值。

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T17:37:10.710

您在`srand()`每次循环迭代时都使用相同的种子调用，因为时间实际上并没有时间改变。确保只调用一次，一切正常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T17:50:33.760

Cody Gray 已经说明了你在这里做错了什么，但这里有一个使用`<random>`库执行此操作的示例：

```
#include <random>

std::mt19937 make_seeded_engine() {
    std::random_device r;
    std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
    return std::mt19937(seed);
}

class foo {
   std::mt19937 engine;

public:
   foo() : engine(make_seeded_engine()) {}

   int randomNum10to50(){
      return std::uniform_int_distribution<>(10,50)(engine); 
   }
};

foo create;
for (int i=0; i<20;i++){
    cout << create.randomNum10to50() << '\n';
} 
```

请注意，它`rand()%50 + 10`产生的数字范围是 10 到 59，而不是 10 到 50。uniform_int_distribution 更好，因为你给它的范围就是你得到的范围，所以你不太可能把它搞砸。同样使用 uniform_int_distribution 可以为您提供无偏见的结果，`rand()%50+10`但有一些轻微的偏见。

* * *

如果你有一个支持更多 C++11 的编译器，你可以这样做：

```
class foo{
   std::mt19937 engine = make_seeded_engine();

public:
   int randomNum10to50(){
      return std::uniform_int_distribution<>(10,50)(engine); 
   }
}; 
```*

# algorithm - 这段代码有更优雅的解决方案吗？

> ID：10111049
> 
> 赞同：2
> 
> 时间：2012-04-11T17:35:29.380
> 
> 标签：algorithm

```
var b = someObjectThatWillNotBeNull;
var a = getA();

if(a != null) {
    if(a.id == b.id) {
        functionA();
    } else {
        functionB();
    }
} else {
    functionB();
} 
```

我经常遇到这种结构，并且总是需要复制 functionB 所在的代码。只是看起来有点草率。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T17:37:32.543

```
if (a != null && a.id == b.id) {
    functionA();
} else {
    functionB();
} 
```

你的意思是这样的吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T17:39:12.813

这有点简单：

```
if (a == null || a.id != b.id)
    functionB();
else
    functionA(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:49:00.957

在这里，我们利用 && 运算符的优势，因为第一个 exp 将被评估为真，那么只有下一个 exp 将在 if() 语句中被评估

```
 if(a != null && a.id==b.id) {
         functionA();
        } 
        else {
        functionB();
        } 
```

# android - Android：在片段中启动意图服务

> ID：10111051
> 
> 赞同：1
> 
> 时间：2012-04-11T17:35:46.790
> 
> 标签：android, android-fragments, intentservice

我在一个活动中有多个片段。每个片段都必须显示一些使用 REST 从服务器获取的数据。我一直在`IntentService`为 REST 请求使用相应的接收器。现在我可以通过将片段作为活动中的内部类来做到这一点。

我对内部类的问题是，在方向改变时，会抛出一个错误，比如“无法实例化片段，没有空的构造函数”。对于这个问题，在搜索中我找到了诸如将内部类设为静态或为 Fragment 创建一个独立的公共类之类的答案。我仍然不明白为什么会在方向改变时发生这种情况。

现在，如果我采用为 Fragment 创建一个单独的独立类的方法，我将不得不将活动对象传递给 do`startService`和`registerReceiver`. 而且我不想使用`AsyncTask`它，因为在我的应用程序中，我在单个片段中执行多个 REST 请求，并`IntentService`允许在每个请求之后发送广播，这样我就不必等到所有请求都完成才能开始加载屏幕。而且我觉得将活动对象传递给片段是不行的。片段不应该与活动尽可能松散耦合，以便可以在多个活动中使用相同的片段吗？如果是，解决此问题的最佳方法是什么？

# regex - 查找字符串并在其后替换十进制值

> ID：10111055
> 
> 赞同：0
> 
> 时间：2012-04-11T17:36:14.420
> 
> 标签：regex, sed, awk, grep

我正在尝试找出一种使用 sed 或 awk 的方法，它会找到一个已知的字符串，让我们说已知文件名中的“名称”，让我们说“filename.txt”。每次出现字符串后，“名称”都有一个空格，然后是一个十进制值，范围从 0.00001 - 999.99999，在十进制之前和之后都有那么多数字。在大多数情况下，该值属于 X.XXXXXX 类型。这个值总是在字符串“name”之后。我希望能够用我给它的值替换“名称”之后的十进制值，比如说“mydecimalvalue”。

同样，如果“filename.txt”中不存在“name”，我想将它添加到字符串“name1”之后，该字符串是已知的，并且将存在于每个“filename.txt”中。有任何想法吗？解释也将不胜感激，因为我很容易迷失在正则表达式和选项含义中。

例如，filename.txt 可能如下所示：

```
 garbage 10.34420
    name1 34.23000
    name 8.32345
    moregarbage 4.23324 
```

例如，我想用“name 15.43200”替换“name 8.32345”。如果文件中任何地方都不存在后跟任何类型值的“name”，我想在“name1 34.23000”之后写“name 15.43200”。如果文件中确实存在“名称”，则可以假设它在整个文件中只存在一次。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:19:59.030

```
if grep -q '\<name\>' filename.txt; then
  sed -i 's/\<\(name\) [0-9.]+/\1 15.43200/' filename.txt
else
  sed -i '/\<name1\>/a\
name 1543200' filename.txt
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T20:44:28.280

这可能对您有用：

```
name=1.23456 
sed ':a;$!{N;ba};s/\<name\> [^\n]*/name '"$name"'/;t;s/\(\([^\n]\+\)\<name1\> [^\n]*\)/\1\n\2name '"$name"'/' file 
```

# ruby-on-rails - 自定义骆驼化

> ID：10111056
> 
> 赞同：2
> 
> 时间：2012-04-11T17:36:25.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, inflection

有什么方法可以指定例外`camelize`吗？

例如，如果我想`camelize('uses_sql')`代替`usesSQL`默认`camelize`生成的内容，`usesSql`. [标准拐点异常配置](http://paulsturgess.co.uk/articles/42-how-to-automatically-pluralize-text-in-ruby-on-rails)似乎没有涵盖这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T23:11:01.903

原来在 Rails 3.2 中用[acronym](http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html#method-i-acronym)支持。

[对于 Rail 3.1，我通过复制源](https://github.com/rails/rails/tree/3-2-stable/railties/lib/rails/generators/rails/app/templates/config/initializers)中的一些相关方法来覆盖默认行为来创建自定义版本。

# java - Netty，更新示例代码 HttpStaticFileServerHandler 以在指定目录 URL 时也返回目录列表

> ID：10111063
> 
> 赞同：-2
> 
> 时间：2012-04-11T17:36:59.603
> 
> 标签：java, netty

我想知道如何修改这里找到的这个很好的示例处理程序：

[https://github.com/netty/netty/blob/master/example/src/main/java/io/netty/example/http/file/HttpStaticFileServerHandler.java](https://github.com/netty/netty/blob/master/example/src/main/java/io/netty/example/http/file/HttpStaticFileServerHandler.java)

还提供返回文件目录列表的能力？目前，如果指定了文件的确切路径和名称，它只会提供文件，我想修改它以便我可以指定一个基本路径并获取路径上的文件列表

感谢您的任何想法或想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:20:45.127

您可以尝试在第 126 行插入以下内容。

```
if (file.isDirectory()) {
    String[] contents = file.list();
    StringBuilder sb = new StringBuilder();
    for (String name: contents) {
        sb.Append(name);
        sb.Append("\n");
    }

    HttpResponse response = new DefaultHttpResponse(HTTP_1_1, OK);
    response.setContent(ChannelBuffers.copiedBuffer(sb.toString(), CharsetUtil.UTF_8));
    response.setHeader(CONTENT_TYPE, "text/plain; charset=UTF-8");

    if (isKeepAlive(request)) {
        response.setHeader(CONTENT_LENGTH, response.getContent().readableBytes());
        response.setHeader(CONNECTION, HttpHeaders.Values.KEEP_ALIVE);
    }

    ChannelFuture future = e.getChannel().write(response);
    if (!(isKeepAlive(request)) {
        future.addListener(ChannelFutureListener.CLOSE);
    }

    return;
} 
```

警告：我刚刚从头顶输入了这个。您可能会收到一两个编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:50:44.533

我想如果目标不是“文件”，您会更改返回错误的分支，而是将目录列表作为某种文本/html文件返回。

# android - 如何在 ICS Android 中获取“使用数据包数据”设置

> ID：10111070
> 
> 赞同：1
> 
> 时间：2012-04-11T17:37:11.553
> 
> 标签：android

我正在开发一个应用程序，它进行一些下载取决于用户是否启用了设置-> 无线和网络-> 移动网络-> 使用数据包数据中的选项。我需要检查用户是否启用了此选项。

请帮助我了解如何获取此设置。

例如检查我使用的漫游模式，

```
import android.provider.Settings.Secure;    
String android_id = Secure.getString(getContentResolver(),
                    Secure.DATA_ROAMING); 
```

提前感谢迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:03:13.870

适用于 2.3：

```
ConnectivityManager manager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
Method method = ConnectivityManager.class.getDeclaredMethod("getMobileDataEnabled");
method.setAccessible(true);
boolean res = (Boolean)method.invoke(manager); 
```

在这里，我通过反射访问私有方法（ boolean getMobileDataEnabled() ），这是一个不太好的做法，但正如我们所知，在 Android 中，它通常是实现某些东西的唯一方法（即使 CommonWare 和其他书呆子认为 :)

# android - 如何从 xml 中定义的可绘制对象中获取位图？

> ID：10111073
> 
> 赞同：48
> 
> 时间：2012-04-11T17:37:23.500
> 
> 标签：android

如何从可绘制的 xml 形状中获取位图。我究竟做错了什么？

**影子.xml**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
        android:angle="270.0"
        android:endColor="@android:color/transparent"
        android:startColor="#33000000"
        android:type="linear" />

    <size android:height="7.0dip" />

</shape> 
```

我从drawable中检索位图的方法：

```
private Bitmap getBitmap(int id) {
    return BitmapFactory.decodeResource(getContext().getResources(), id);
} 
```

**当传入的 id 是shadow.xml**可绘制 id时，getBitmap() 返回 null 。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2016-02-23T10:22:28.690

这是一个完全**有效的解决方案**：

```
private Bitmap getBitmap(int drawableRes) {
    Drawable drawable = getResources().getDrawable(drawableRes);
    Canvas canvas = new Canvas();
    Bitmap bitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight(), Bitmap.Config.ARGB_8888);
    canvas.setBitmap(bitmap);
    drawable.setBounds(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());
    drawable.draw(canvas);

    return bitmap;
} 
```

这是一个例子：

```
Bitmap drawableBitmap = getBitmap(R.drawable.circle_shape); 
```

**circle_shape.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <size
        android:width="15dp"
        android:height="15dp" />
    <solid
        android:color="#94f5b6" />
    <stroke
        android:width="2dp"
        android:color="#487b5a"/>
</shape> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-11T17:45:51.240

ShapeDrawable 没有与之关联的位图 - 它的唯一目的是在画布上绘制。在调用它的 draw 方法之前，它没有图像。如果您可以在需要绘制阴影的地方获得一个画布元素，则可以将其绘制为 shapeDrawable，否则您可能需要在布局中以阴影作为背景单独的空视图。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-11T13:58:25.600

您应该将 size 属性添加到您的 shape drawable 以防止“java.lang.IllegalArgumentException：宽度和高度必须 > 0”。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="oval">
       <solid android:color="@color/colorAccent" />
       <stroke
           android:width="1.3dp"
           android:color="@color/white" />

       <size android:height="24dp" android:width="24dp"/>
</shape> 
```

# c++ - 理解 C++ 中的运算符重载

> ID：10111084
> 
> 赞同：2
> 
> 时间：2012-04-11T17:38:08.627
> 
> 标签：c++, operator-overloading

我可能有点密集，但不明白下面的行是做什么的？

```
class background_task
{
  public:
    void operator()() const
    {
      do_something();
      do_something_else();
    }
};

background_task f;
std::thread my_thread(f); 
```

1.  我意识到创建了一个调用类`my_thread`对象的线程（名为），但是什么时候真正调用了类中的函数？`f``background_task``operator()``background_task`

2.  为什么需要函数运算符的重载？

3.  我知道这是 C++ 101 或非常基本的，但我仍然无法掌握它，所以我应该参考哪些书籍才能了解更多关于 C++ 的此类主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:41:39.397

这个定义`operator()()`

```
class background_task
{
public:
void operator()() const
{
  do_something();
  do_something_else();
}
}; 
```

意味着您可以实例化一个 background_task 并调用它（在这种情况下不带任何参数）。这使其成为“可调用实体”：

```
background_task f;
f(); // calls foo::operator ()(), i.e calls do_something() and do_something_else(). 
```

至于线程，它需要一个不带参数的可调用实体，因此向它传递 a 的实例就可以了`background_task`。如果`background_task`不可调用，则以下内容将无法编译：

```
background_task f;
std::thread my_thread(f); 
```

构造`std::thread`函数还允许您传递可调用实体的参数（如果它有参数），例如

```
class background_task
{
public:
void operator()(double x) const
{
  // do something with x, if you want
  do_something();
  do_something_else();
}
}; 
```

将与

```
background_task f;
std::thread my_thread(f, 3.1416); 
```

在内部，线程相当于调用 f(3.1416)。

**编辑：**最初我声称没有涉及超载。这还不完全清楚，所以我改写了我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:11:01.703

1.  线程对象`std::thread(f, a, b, c)`制作对象的副本`f`（我们称之为`copy_of_f`），新执行上下文的入口点是调用`copy_of_f(a, b, c)`（或更详细地说，`copy_of_f.operator()(a, b, c)`）。

2.  对象`f`必须是*可调用实体*，这意味着表达式`f(a, b, c)`必须有意义。

3.  专门针对 C++11 的书籍仍在编写中。今年晚些时候，请留意 Stroustrup、Meyers 和其他人。到那时，互联网可能是你最好的选择。

# c# - 初始化实例变量

> ID：10111089
> 
> 赞同：3
> 
> 时间：2012-04-11T17:38:20.227
> 
> 标签：c#

我想知道以下方法之间有什么区别，哪种方法是最好的方法：

```
public class ClassA
{
    public ClassB myClass = new ClassB();

    public void MethodA()
    {
         myClass.SomeMethod();
    }
} 
```

或这个：

```
public class ClassA
{
    public ClassB myClass = null;

    public ClassA()
    {
        myClass = new ClassB();
    }        

    public void MethodA()
    {
         myClass.SomeMethod();
    }
} 
```

## 编辑

我删除了 IDisposable，记住这只是一个例子，我的意思是看看哪种方式更适合实例化实例变量

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:39:31.920

两者都不。

`IDisposable`除非您有实际资源可供处置，否则您不应实施。
简单地将字段设置为`null`in`Dispose()`几乎总是无用的。

要回答这个问题，没关系。
您应该使用更短、更简单的第一个版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:41:31.910

是`ClassB`一次性的吗？如果是这样，那么您应该处理它而不是将其设置为`null`. 有没有`ClassA`其他一次性的资源？如果是这样，它们应该被处理掉。如果没有什么可处置的，那么您无需实施`IDisposable`.

仅仅因为`ClassA`实现处置并不意味着在这种情况下可以处置任何东西。事情也必须实施。此外，如果您实际上是在实施，`IDisposable`那么有一个[公认的模式可以这样做](http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T18:07:48.420

第一个示例中的代码将由编译器转换为第二个示例中的代码。当您在定义它们的位置初始化实例变量时，它实际上将该初始化移动到构造函数的顶部（或构造函数之前的其他方法，这实际上是同一件事）。

有时您无法执行第一种情况（您分配的内容太复杂，或者依赖于尚不存在的数据）。但除此之外，这只是个人喜好。不过，通常最好避免在同一个课程中混合使用这两种技术，因为这对于读者来说有点难以理解。

# api - 使用 Javamail 和 Gmail

> ID：10111091
> 
> 赞同：0
> 
> 时间：2012-04-11T17:38:29.127
> 
> 标签：api, email, gmail, jakarta-mail

我正在寻找一种使用 Javamail 和 GMAIL SMTP 发送邮件的方法。

[这是一个提供一些代码的页面](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)

我以前从未使用过**公共课程**，而且该页面还建议：

> 要运行此示例，您需要两个依赖库——javaee.jar 和 mail.jar，它们都捆绑在 JavaEE SDK 中。

有人可以帮我设置这个脚本，以便我可以将它绑定到诸如 OnClick 之类的事件。

另外，如果想将变量传递到类中，例如：To、From、Subject、Body，我该怎么做？

请指教....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:44:00.757

jar 必须在编译和运行时位于您的类路径中才能正常工作，任何 JAVA 库 (.jar/.zip) 都是如此

从命令行，您可以使用类似的东西进行编译

javac -classpath .;javaee.jar 的路径；mail.jar myclass.java 的路径

并在运行时

java -classpath .;javaee.jar 的路径;mail.jar myclass 的路径

在 Eclipse 项目中，您可以将 mail.jar 和 javaee.jar 作为库添加到项目中。

这是非常基本的 Java 内容，我真的认为您可能需要阅读更多内容，您将在日常 Java 开发中包含库。有很多地方可以找到它的基本原理。

# c# - 在可能未打开或未关闭的 SqlConnection 上调用 Close

> ID：10111092
> 
> 赞同：2
> 
> 时间：2012-04-11T17:38:31.250
> 
> 标签：c#, .net, sqlclient

这两个问题的答案与我自己的答案非常接近，但还没有完全达到。

*   [Open 和 Closed 仅仅是 ConnectionState 枚举的相关值吗？](https://stackoverflow.com/questions/246316/are-open-and-closed-only-relevant-values-of-connectionstate-enumeration)
*   [在打开 SqlConnection 之前处理不同的 ConnectionStates](https://stackoverflow.com/questions/103532/handling-different-connectionstates-before-opening-sqlconnection)

既然我知道`SqlConnection`状态不仅仅是打开和关闭，我想知道在关闭**不在 using 语句中**的连接时是否需要这样做：

```
switch (_transactionConnection.State)
{
    case ConnectionState.Broken: /*??*/ ; break;
    case ConnectionState.Closed: ; break;
    case ConnectionState.Connecting: /*??*/ ; break;
    case ConnectionState.Executing: /*??*/ ; break;
    case ConnectionState.Fetching: /*??*/ ; break;
    default: _transactionConnection.Close(); break;                         
} 
```

`SqlConnection _transactionConnection`不在`using`语句内，因为我需要从此类外部启动、提交和回滚事务。此类实现`IDisposable`并且 switch 语句位于`Dispose(bool disposing)`

MSDN 说除了 open 和 closed 之外的状态是用于产品的未来版本，但 @Charlie 说反射器显示其他状态正在使用中。

谁能告诉我应该换`/*??*/`什么？（我希望我的最终 switch 语句将显式处理 Open 和 Closed 情况，如果`/*??*/`其他状态相同，那将是我的默认情况。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:48:51.837

由于您在 Dispose() 中实现了这一点，我想我会简单地调用`_transactionConnection.Dispose();`并让 SqlConnection 类做它认为合适的任何事情。我会避免`Close()`在这里打电话，因为虽然目前 SqlConnection.Dispose 基本上只是关闭它是真的，但将来可能会改变。

# open-source - 新的开源项目 - 命名空间和许可证

> ID：10111097
> 
> 赞同：2
> 
> 时间：2012-04-11T17:38:39.883
> 
> 标签：open-source, licensing

我正在 GitHub 上启动一个开源项目，并希望使用社区认可的可接受的包名称模式，并希望使用可接受的许可证。

对于包名称...我有一个注册的 LLC，我已经完成了大部分工作，但不确定在包中将我的公司名称用于开源项目是否“可接受”？

在我看来，我有两个选择：

```
com.avalutions.projectname.* 
```

或者

```
projectname.* 
```

其中一个比另一个更有意义吗？我错过了一个选项吗？

如果除了与社区共享之外，我对这个库没有其他直接意图，那么最佳实践是什么？如果我决定将来将该项目合并到基于成本的项目中，我可以/应该在那时更改我的许可证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:42:58.967

您可以使用任何您想要的东西，尽管使用注册公司名称可以帮助避免冲突。作为开发人员，您可以在任何您想要的许可证或许可证下发布您的代码，您可以随时添加许可证。这是你的代码。如果您的代码包含来自其他任何人的输入，您需要确保他们对您的许可与您计划使用的许可兼容，或者，如果它是直接贡献的（即不是组件或库），那么他们需要同意发布他们的代码以这种方式。有很多成功的操作系统项目可供您用作许可模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:12:58.673

LLC 或个人作者身份：这取决于作者是谁以及作者是否可以重新分配版权。您希望将您的项目用于您自己或 LLC 的营销目的是有道理的。自己决定。

*由于在projectname*之上总是有一个级别，您还应该考虑这个方向：

```
org.foundation.projectname.* 
```

如果你想围绕它创建一些生态系统，最好不要把你自己的公司放在前面——但要让它可见。

> 如果除了与社区共享之外，我对这个库没有其他直接意图，那么最佳实践是什么？如果我决定将来将该项目合并到基于成本的项目中，我可以/应该在那时更改我的许可证吗？

从开发人员的角度来看，决定你想公开什么。只是展示还是实际开发？如果你去开发，去开放。如果您将来需要关闭，您需要为您从其他贡献者那里挑选的贡献获得版权/重新许可权。

# php - Android phonegap登录使用本地html和远程php

> ID：10111098
> 
> 赞同：1
> 
> 时间：2012-04-11T17:38:42.863
> 
> 标签：php, android, html, cordova, login

我的手机中有一个 HTML 页面，要求输入用户名和密码。当提交按钮被按下时，它将使用我上传到服务器上的 PHP 文件检查数据库中的现有用户。

问题是，登录成功后，如何从 PHP 文件重定向到我的主菜单页面，即我手机中的 HTML 文件？

在 php 中，我看到了将其重定向到其他页面的代码，

> header("file:///android_asset/www/mainMenu.html");

我试图改变它，但它仍然无法正常工作。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:13:35.227

PHP 标头函数无法重定向到存储在设备上的本地页面，因为本地设备上的页面未托管在网络服务器上，因此远程网络服务器无法使用 http:// URL 对其进行寻址。

您可以做的是让 PHP 返回一个空白页面，该页面在标头中包含一段 JavaScript，使用 window.location.href 将移动浏览器重定向到本地 HTML 文件 (file:///android_asset/your_file.html)或 window.location.replace。这是因为 JavaScript 在设备上执行，因此知道本地文件系统上的文件。

编辑：您的 blank.html 需要如下所示：

```
<html>
<head>
    <script type="text/javascript">
        window.location.href = 'file:///android_asset/my_local_page.html';
    </script>
</head>
<body>  
</body>
</html> 
```

在上面的文本中，将 my_local_page.html 替换为您的主菜单页面。然后将blank.html 放在您的服务器上并使用PHP 的header() 重定向到blank.html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:47:21.650

在使用 phonegapp 框架（或其他用于 mobil 的 webapp 框架）构建 html5 + javascript 应用程序时，我不喜欢混合本地和远程 html 页面。显示的页面要么是完全本地的，要么是远程的，但不能混合。当我选择使用完全本地显示但需要调用远程服务时，我使用 ajax 请求。

我建议你也这样做。因此，使用 ajax 调用您的 php 登录方法，然后在成功时更改您的 phonegapp 页面。例如，您的 php 脚本可以返回一个简单的字符串，它可以是“成功”或“失败”。然后，您可以在 phonegap 应用程序中执行必要的页面更改。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T06:01:12.460

我喜欢您关于仅使用本地 html 文件的建议。我也是这样做的。但我必须使用本地 html 实现支付网关。所以控件转到远程服务器（我不能通过 ajax 来做，因为没有可用的 API）。现在我如何回到我的本地文件夹。一种解决方案是从服务器发送一个带有支付参数的页面，然后通过 javascript 调用本地 html 文件。你能建议我更好的方法吗？

# apache-flex - Flex Air：从文件中读取“ActionScript 对象”然后进行投射？

> ID：10111099
> 
> 赞同：3
> 
> 时间：2012-04-11T17:38:43.753
> 
> 标签：apache-flex, object, air

这样做很简单，将对象写入文件，然后读取它：

*   [http://corlan.org/2008/09/02/storing-data-locally-in-air/](http://corlan.org/2008/09/02/storing-data-locally-in-air/)
*   [http://cookbooks.adobe.com/post_Storing_ActionScript_Objects_in_the_Encrypted_Loca-10563.html](http://cookbooks.adobe.com/post_Storing_ActionScript_Objects_in_the_Encrypted_Loca-10563.html)

我的问题是

1.  为什么当我们把 [RemoteClass(alias="foo.Bar")] 放入 VO 时，它可以自动转换（否则反序列化的对象的类型是 Generic Object，里面有正确的属性数据）？
2.  没有RemoteClass标签是否有另一种方法来实现它？（使用元数据标签是首选）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:07:42.260

1.  答案在您链接到的[页面中：](http://cookbooks.adobe.com/post_Storing_ActionScript_Objects_in_the_Encrypted_Loca-10563.html)

    > 请注意，别名是与类实例一起存储的键，当该对象的实例被序列化时，它将类定义与存储在 ByteArray 中的特定对象链接起来。此键可以是标识此类的任何唯一字符串，但约定是使用完全规范化的包和类名。

    这就是为什么如果你省略别名你会得到一个通用对象——反序列化​​方法不知道如何处理数据，除非你指定值应该映射到哪个类。

2.  是的，有：[`registerClassAlias()`](http://tush.wordpress.com/2007/07/08/actionscript-3-serializing-classes-using-registerclassalias/)做同样的事情。但是元数据标签更容易阅读；）

# wpf - 如何在 WPF ListView 中的项目之间添加填充？

> ID：10111116
> 
> 赞同：2
> 
> 时间：2012-04-11T17:39:44.327
> 
> 标签：wpf, listview

我有一个水平 ListView，我想确保项目之间有一些填充（在我的情况下，我在项目模板中有 Grid），但我不希望最后一个网格有任何额外的填充

我希望在红线所在的地方有填充。

![在此处输入图像描述](../Images/7082e41a148a16061293752dc590b0aa.png)

**编辑**

HB 的建议真的很有帮助，这是我添加的样式以在网格之间留出 5px 的边距...

```
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <Setter Property="Margin" Value="5 0 0 0" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding RelativeSource={RelativeSource PreviousData}}" Value="{x:Null}">
                <Setter Property="Margin" Value="0" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</ListView.ItemContainerStyle> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:41:49.087

您可以`Padding`在 中[`ItemContainerStyle`](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.itemcontainerstyle.aspx)设置一个`ListView`。您可以使用`DataTrigger`onbeing使其成为有条件的`RelativeSource PreviousData`。`null`

或者，您可以创建一个`Panel`具有间距概念的新对象。

# jsf-2 - JSF 2\. 如何获取目录路径？

> ID：10111123
> 
> 赞同：0
> 
> 时间：2012-04-11T17:40:25.230
> 
> 标签：jsf-2, directory

我想以与获取文件路径相同的方式获取目录路径。与此类似的东西：

```
<h:inputText value="#{someBean.path}"/>
<p:fileUpload fileUploadListener="#{someBean.getPath}">
</p:fileUpload> 
```

someBean.java：

```
public void getPath (FileUploadEvent event) {
   path = FacesContext.getCurrentInstance().getExternalContext().getRealPath("/");
} 
```

但是使用另一个允许只选择一个文件夹而不是强制选择一个特定文件的组件。那可能吗？

提前致谢！

# javascript - 使用 jQuery 获取部分 html 字符串

> ID：10111126
> 
> 赞同：4
> 
> 时间：2012-04-11T17:40:47.787
> 
> 标签：javascript, jquery

我有一个名为`response`. 这是来自 ajax 调用的响应。该变量具有以下内容：

```
<table id="ListCompanies" class="zebra-striped">

<thead>
    <tr>
        <th>Nom de la societe</th>
        <th>Ville</th>
        <th>Rue</th>
        <th width="70"><a class="btn primary small createCompany" href="/PLATON/Admin/Company/Create">[+] Nouvelle societe</a> </th>
    </tr>
</thead>

<tbody>
        <tr id="13">
            <td>INDUSTRIAL DEFENDER INC</td>
            <td>FOXBOROUGH</td>
            <td>Chestnut Street</td>

            <td nowrap>                                    
                <a class="btn small editCompany" href="/PLATON/Admin/Company/Edit/13" id="13">Modifier</a> 
                <a class="btn small deleteCompany" href="/PLATON/Admin/Company/Delete/13" id="13">Supprimer</a>
            </td>
        </tr>
        <tr id="14">
            <td>INC CRANE NUCLEAR</td>
            <td>GEORGIA KENNESAW</td>
            <td>cobb International Blvd</td>

            <td nowrap>                                    
                <a class="btn small editCompany" href="/PLATON/Admin/Company/Edit/14" id="14">Modifier</a> 
                <a class="btn small deleteCompany" href="/PLATON/Admin/Company/Delete/14" id="14">Supprimer</a>
            </td>
        </tr>
</tbody>

</table>

<a href="/PLATON/Admin/Company/RowsList?page=3" id="LoadMoreLink">Load more</a> 
```

`alert($("tbody", response).html());`给我：

```
 <tr id="13">
            <td>INDUSTRIAL DEFENDER INC</td>
            <td>FOXBOROUGH</td>
            <td>Chestnut Street</td>

            <td nowrap>                                    
                <a class="btn small editCompany" href="/PLATON/Admin/Company/Edit/13" id="13">Modifier</a> 
                <a class="btn small deleteCompany" href="/PLATON/Admin/Company/Delete/13" id="13">Supprimer</a>
            </td>
        </tr>
        <tr id="14">
            <td>INC CRANE NUCLEAR</td>
            <td>GEORGIA KENNESAW</td>
            <td>cobb International Blvd</td>

            <td nowrap>                                    
                <a class="btn small editCompany" href="/PLATON/Admin/Company/Edit/14" id="14">Modifier</a> 
                <a class="btn small deleteCompany" href="/PLATON/Admin/Company/Delete/14" id="14">Supprimer</a>
            </td>
        </tr> 
```

没关系对我来说。

如何`#LoadMoreLink`从响应变量中获取底部的链接？

我试过：

```
alert($("#LoadMoreLink",response)); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:49:19.667

您`response`包含 2 个“父”元素，`<table>`和`<a>`。 `$(response)`创建一个包含 2 个元素的 jQuery 对象。要得到你想要的，试试这个：

```
$(response).filter('#LoadMoreLink') 
```

`.find`在这里不起作用，因为`.find`只搜索子元素，而不是“父”元素本身。您需要使用`.filter`来搜索“父”元素。

（通过“父”元素，我指的是实际在 jQuery 对象中的元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:45:47.897

```
$("a", response).filter("[id='LoadMoreLink']") 
```

应该是你需要的。我认为正常搜索失败是因为 jQuery 尝试访问具有 ID 的元素的 DOM 哈希，而“#LoadMoreLink”不在其中（尚未加载到 DOM 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:55:37.320

如果没有任何结果，那么只需将响应加载到隐藏的 div 中，然后检索 $("#LoadMoreLink")

# meteor - Meteor 的不同数据库和前端

> ID：10111128
> 
> 赞同：6
> 
> 时间：2012-04-11T17:40:53.917
> 
> 标签：meteor

假设我想在 Meteor 的后端使用与 Mongo 不同的数据库，并且还想在前端使用像 D3.js 这样的可视化库。目前有可能吗？如果不是我自己添加它会有多复杂？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:13:17.017

[https://github.com/meteor/meteor/tree/master/packages/mongo-livedata](https://github.com/meteor/meteor/tree/master/packages/mongo-livedata)文档表明，如果您想替换数据库功能，这将是开始使用的模块。

> 您可以通过提供服务器端数据库驱动程序和/或实现替代 API 的客户端缓存来替代 MongoDB 的另一个数据库。mongo-livedata 是这样一个项目的一个很好的起点。

-- [http://docs.meteor.com/#data](http://docs.meteor.com/#data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T04:39:19.767

看看这个项目：[https](https://github.com/austinrivas/meteor-postgresql) ://github.com/austinrivas/meteor-postgresql 。如果您确实需要使用 mongo meteor 以外的数据库，除非您正在试验，否则可能不是正确的选择。您始终可以将来自另一个数据库的数据聚合到 mongo，这可能会让生活更轻松。

我一直以 angularjs 指令的形式将 D3 与流星一起使用，并将数据绑定以将可视化驱动到 $scope。DDP 使得在 d3 可视化中保持数据最新非常方便。

# c# - Linq 问题不返回学生

> ID：10111137
> 
> 赞同：1
> 
> 时间：2012-04-11T17:41:22.830
> 
> 标签：c#, wcf, linq, web-services, rest

所以我有一个 Windows 窗体应用程序（客户端），它显示哪些组属于学生。

在服务端，这样做是这样的：

```
 List<Student> students = new List<Student>();
    List<Group> Groups = new List<Group>();
    public List<Group> GetStudentCollectionByGroup(string anything)
    {

        List<Group> groups = (from g in Groups
                              where
                                  (from t in g.Groupsz where
                                          string.Equals(t.StudentID, anything, StringComparison.CurrentCultureIgnoreCase)
                                       || string.Equals(t.FirstName, anything, StringComparison.CurrentCultureIgnoreCase)
                                       || string.Equals(t.LastName, anything, StringComparison.CurrentCultureIgnoreCase)
                                   select t).Count() > 0
                              select g).ToList();
        return groups;
    } 
```

要将学生添加到组中，我使用了以下方法：

```
 public void AddStudentToGroup(string group, string studentID, string firstName, string lastName)
    {
        var result = Groups.Where(n => String.Equals(n.GroupName, group)).FirstOrDefault();
        if (result != null)
        {
            result.Groupsz.Add(new Student() { StudentID = studentID });
            result.Groupsz.Add(new Student() { FirstName = firstName });
            result.Groupsz.Add(new Student() { LastName = lastName });
        }
    } 
```

我的 GET 方法如下所示：

```
 [OperationContract]
    [WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/GetStudentCollectionByGroup/{anything}")]
    List<Group> GetStudentCollectionByGroup(string anything); 
```

数据合约如下所示：

```
public class Student
{
    public Student()
    {
        StudentGroup = new List<Group>();
    }
    [DataMember(Name = "StudentID")]
    public string StudentID { get; set; }
    [DataMember(Name = "FirstName")]
    public string FirstName { get; set; }
    [DataMember(Name = "LastName")]
    public string LastName { get; set; }
    public List<Group> StudentGroup { get; set; }
}
[DataContract(Name = "Group")]
public class Group
{
    public Group() 
    {
        Groupsz = new List<Student>();
    }
    public string GroupName { get; set; }
    public List<Student> Groupsz { get; set; }
} 
```

现在，当我输入特定的学生时，我从客户端获取组没有问题。但是，当我输入不同的文本框以根据 Group 获取学生时，什么都没有返回？例如，如果我键入**组**“A”，它应该返回属于该组的所有学生。就像我如何返回属于**学生**“B”的一组组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:02:54.880

正如对您问题的评论中提到的，您的代码有些令人困惑。正如您毫无疑问地发现的那样，这会使在代码中发现逻辑错误变得更加困难。

如果您还没有这样做，请学习如何使用调试器。逐步执行返回组中学生的方法。使用“locals”窗口或将鼠标悬停在变量上检查变量的值。您应该能够相当容易地看到哪些变量具有意外值。然后，当然，下一步是确定它们*为什么*具有意外值。这可能是您的代码中的错误，也可能是数据库中的意外数据。

一旦你缩小了问题的位置，如果你仍然不明白*为什么*问题仍然存在，你应该可以更好地提出关于 stackoverflow 的更集中的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:25:40.653

我想我找到了问题，不知道为什么，但将学生添加到组和组到学生似乎有效。但是我可能会复制记录。

```
 public void AddStudentToGroup(string group, string studentID, string firstName, string lastName)
    {
        var result = Groups.Where(n => String.Equals(n.GroupName, group)).FirstOrDefault();
        var result1 = students.Where(n => String.Equals(n.StudentID, studentID)).FirstOrDefault();
        if (result != null)
        {
            result.Groupsz.Add(new Student() { StudentID = studentID, FirstName = firstName, LastName = lastName });
        }
        if (result1 != null)
        {
            result1.StudentGroup.Add(new Group() { GroupName = group });
        }

    } 
```

# python - 突然所有 HttpResponseRedirect( reverse() ) 都给出语法错误

> ID：10111142
> 
> 赞同：2
> 
> 时间：2012-04-11T17:41:37.117
> 
> 标签：python, django

这个让我摸不着头脑。我有一个带有视图的应用程序，它可以进行表单处理（登录/注册），然后`HttpResponseRedirect()`根据输入返回各种 s。所有这些重定向都包含`reverse()`以字符串形式列出的适当函数的查找。每个函数`urlpattern`在 urls.py 中都有对应的。

直到今天早上一切都很好。

现在，每当我提交表单时，Django 都会给我一个不存在的行的语法错误：

```
SyntaxError at /logout/
invalid syntax (views.py, line 399) 
```

（该文件只有 354 行）

当我向下滚动查看回溯时，突出显示的行始终是带有`return HttpResponseRedirect( reverse('app.views.func') )`.

由于这些令人困惑的错误消息，我什至不确定问题是否真的出在`HttpResponseRedirect( reverse() )`s. 几天来我没有碰过任何代码，所以我不确定为什么它会突然开始抛出这样的奇怪错误。

任何帮助调试这将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T20:18:11.503

[在咨询了该功能的文档`reverse()`](https://docs.djangoproject.com/en/1.3/topics/http/urls/#reverse)后，我终于弄清楚了。

当你调用 时`reverse()`，django 首先导入你项目的 URLConf 文件，然后导入你的 URLconf 中声明的每一个视图模块。我的问题是我正在研究一个新的、完全不相关的视图，它有一个语法错误（在第 399 行！）。

因此，即使我没有查看正在使用新视图执行任何操作的页面，但由于其工作方式，我的旧视图仍然会因语法错误而出错`reverse()`。

从[文档](https://docs.djangoproject.com/en/1.3/topics/http/urls/#reverse)：

> 确保你的观点都是正确的。作为确定哪些 URL 名称映射到哪些模式的一部分，reverse() 函数必须导入所有 URLconf 文件并检查每个视图的名称。这涉及导入每个视图函数。如果在导入任何视图函数时出现任何错误，它将导致 reverse() 引发错误，即使该视图函数不是您要反转的视图函数。
> 
> 确保您在 URLconf 文件中引用的任何视图都存在并且可以正确导入。不要包含引用您尚未编写的视图的行，因为这些视图将不可导入。

# mysql - Mysql Where ... In ... AND where ... in ... 应该只在同一个索引上匹配

> ID：10111153
> 
> 赞同：7
> 
> 时间：2012-04-11T17:42:27.713
> 
> 标签：mysql, where-clause

我有一个查询：

```
SELECT * FROM `users` 
WHERE (`firstname` LIKE 'Luke' AND `lastname` LIKE 'Skywalker') OR  
 (`firstname` LIKE 'Foo' AND `lastname` LIKE 'Bar') OR 
(`firstname` LIKE 'Tom' AND `lastname` LIKE 'Turner'); 
```

但我想通过使用 where ... in ... 使其更具可读性我试过

```
SELECT * FROM users 
WHERE `firstname` 
    IN ('Luke','Foo','Tom') AND `lastname` IN ('Skywalker','Bar','Turner'); 
```

但不幸的是，这也将匹配`"Tom Skywalker"`，`"Foo Turner"`并且您可以想到所有混合。

我必须选择名字和姓氏（也许更多字段，如 DOB），因为我从外部 API 获取数据，我必须检查这些名字是否在我们的系统中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:49:12.980

使用`LIKE`不带通配符的运算符没有多大意义。我认为你应该使用`=`，特别是如果你必须使用`check if those names are in our system`。

```
SELECT * FROM users
WHERE (firstname = 'Luke' AND lastname = 'Skywalker') OR 
      (firstname = 'Foo' AND lastname = 'Bar') OR 
      (firstname = 'Tom' AND lastname = 'Turner') 
```

如果您使用`IN`运算符，如您所说，将匹配不同的组合。我认为前面的例子应该是比较它们的最快方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T17:54:13.220

```
SELECT * 
FROM users
WHERE (firstname, lastname) 
      IN ( ('Luke', 'Skywalker') 
         , ('Foo' , 'Bar') 
         , ('Tom' , 'Turner')
         )
; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T17:47:21.297

您可以将它们与`concat`：

```
WHERE concat(`firstname`,'-',`lastname`)
   IN ('Luke-Skywalker', 'Foo-Bar', 'Tom-Turner'); 
```

# ios - UIPageViewController 和屏幕外方向更改

> ID：10111156
> 
> 赞同：3
> 
> 时间：2012-04-11T17:42:36.077
> 
> 标签：ios, orientation, uipageviewcontroller

我的应用程序是在 iPad 上运行的标签栏应用程序。

其中一个选项卡包含一个 UIPageViewController，我几乎按照这里的教程实现了它：[以编程方式实现 UIPageViewController – 没有故事板](http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/)。

一切都很好，包括旋转。但是有一个问题 - 如果我转到包含页面视图控制器的选项卡，然后导航到另一个选项卡并更改方向。然后导航*回*包含页面视图控制器的选项卡，它现在显示不正确。

再次旋转设备，页面视图控制器可见，可以解决问题。

我想这是因为

```
pageViewController:spineLocationForInterfaceOrientation: 
```

在该选项卡不可见时不调用。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T00:31:51.810

我遇到了同样的问题，最终做了同样的解决方法。完成后，我并没有真正讨厌它，因为它允许我在用户不主动使用选项卡时释放 UIPageViewController 及其所有子 UIPageViewController 及其所有资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T00:00:53.617

我通过在 viewWillAppear:animated 中重新初始化 UIPageViewController 来解决这个问题。不理想，但它的工作...

# c# - C# 应用程序中的 MySqlBulkLoader 问题

> ID：10111157
> 
> 赞同：3
> 
> 时间：2012-04-11T17:42:41.907
> 
> 标签：c#, mysql

我正在编写一个应用程序，每晚将一些数据从 MSSQL 导出到 MySQL 服务器。我使用一个简单的查询来获取前一天的所有数据，然后尝试了几种不同的方法将其传输到 MySQL。最快的方法是使用 MySqlBulkLoader 但由于某种原因它没有移动所有数据。插入后，我将生成的文本文件中的记录与 MySQL 中的记录数进行比较，在某些情况下计数从 1 一直到 10。

如果我使用相同的方法将数据获取到文本文件，但循环遍历文本文件的每一行而不是批量上传并执行插入语句，则所有记录都会被导入。

这是我目前使用的批量上传代码。我最近添加了 FieldQuotationCharacter 以查看是否有帮助，但它没有（当我添加它时，我使文本生成脚本将字段括在引号中）。

```
uploader.TableName = "testtable";
uploader.FieldTerminator = "\t";
uploader.LineTerminator = "\r\n";
uploader.NumberOfLinesToSkip = 0;
uploader.FileName = updateFile; //this is a variable pointing to the current file
uploader.Timeout = 120;
uploader.FieldQuotationCharacter = '"';
int totalExported = uploader.Load(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:49:20.330

看起来有点奇怪，但一时兴起，我决定在输出文件的顶部写一个空行，然后设置 NumberOfLinesToSkip = 1。这样做之后，一切正常，没有记录丢失。有点奇怪。似乎将其设置为 0 不起作用并且可能不受支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-13T17:31:30.953

我遇到了类似的问题，它正在加载我的文件中大约 2/3 的行，问题结果是由 MySqlBulkLoader 生成的加载数据 sql 中的 local 关键字的行为。

默认情况下，似乎 MySqlBulkLoader.Local == true，这允许它使用本地文件，但也会影响对无效行的错误处理。当一行无效时，它不会抛出错误，而是会给你“警告”。您可以通过运行加载数据的实际 sql 命令（这是 MySqlBulkLoader 使用的）来验证这一点并查看警告：

```
load data local infile '/Temp/bb7dd81c-c79f-49c7-9ae4-fdc8e48df6d5.csv'
ignore into table my_staging_tbl
fields terminated by ',' enclosed by '"' escaped by '\\'
lines terminated by '\n' 
```

这会输出受影响的行数和所有警告的列表

就我而言，我将 LineTerminator 设置为“\n”而不是“\r\n”，并且在警告被抑制后，它仍然最终导入了大部分行。

您可以通过将 MySqlBulkLoader.ConflictOption 设置为 MySqlBulkLoaderConflictOption.Replace 而不是默认设置 Ignore 来覆盖此行为。请注意，这也会影响它处理重复键的方式。

有关 mysql 的加载数据的更多信息：http: [//dev.mysql.com/doc/refman/5.7/en/load-data.html](http://dev.mysql.com/doc/refman/5.7/en/load-data.html)

# c# - 以毫秒为单位测量 .net 中的代码速度

> ID：10111159
> 
> 赞同：10
> 
> 时间：2012-04-11T17:42:46.433
> 
> 标签：c#, .net

我想获得最大计数，我必须执行一个循环以使其需要 x 毫秒才能完成。

例如。

```
int GetIterationsForExecutionTime(int ms)
{
    int count = 0;
    /* pseudocode 
    do
        some code here
        count++;
    until executionTime > ms
    */

    return count;
} 
```

我该如何完成这样的事情？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-11T18:36:31.867

> 我想获得最大计数，我必须执行一个循环以使其需要 x 毫秒才能完成。

首先，不要那样做。如果您需要等待一定的毫秒数，**请不要在循环中忙等待**。相反，*启动一个计时器*并返回。当计时器滴答作响时，让它调用一个从你离开的地方继续的方法。该`Task.Delay`方法可能是一个很好的使用方法；它会为您处理计时器的详细信息。

如果您的问题实际上是关于如何计算某些代码所花费的时间，那么您需要的不仅仅是一个好的计时器。获得准确的计时有很多艺术和科学。

首先，您应该始终使用`Stopwatch`并且永远不要使用`DateTime.Now`这些时间。秒表被设计成一个高精度计时器，用于告诉您*经过了多少时间*。`DateTime.Now`是一个低精度计时器，用于告诉您*是否该看神秘博士了*。你不会用挂钟来计时奥运会比赛；你会使用你能拿到的最高精度的秒表。因此，请使用为您提供的那个。

其次，您需要记住*C# 代码是即时编译的*。因此，由于分析循环调用的代码的抖动成本，第一次执行循环的成本可能比后续每次高出数百或数千倍。如果您打算测量循环的“热”成本，那么您需要在开始计时*之前*运行一次循环。如果您打算测量*包括 jit 时间在内的**平均*成本，那么您需要确定多少次构成合理的试验次数，以便平均值计算正确。

 *第三，你需要*确保你在跑步时没有佩戴任何铅块*。*调试时*切勿进行性能测量。这样做的人数之多令人吃惊。如果您在调试器中，则运行时可能会*与调试器来回交谈，*以确保您获得所需的调试体验，而这种交谈需要时间。抖动产生的*代码*比通常情况下更糟糕，因此您的调试体验更加一致。垃圾收集器*收集的积极性较低*。等等。始终在调试器之外运行性能测量，并开启优化。

第四，请记住，*虚拟内存系统会产生类似于抖动的成本*。如果您已经在运行托管程序，或者最近运行了一个托管程序，那么您需要的 CLR 页面可能是“热的”——已经在 RAM 中——它们速度很快。如果不是，那么这些页面可能是冷的，在磁盘上，需要进行页面错误。这会极大地改变时间。

第五，请记住，*抖动会产生您意想不到的优化*。如果您尝试计时：

```
// Let's time addition!
for (int i = 0; i < 1000000; ++i) { int j = i + 1; } 
```

抖动*完全在其删除整个循环的权利范围内*。它可以意识到循环不计算程序中其他任何地方使用的值并将其完全删除，给它一个时间*为零*。它这样做吗？也许。也许不吧。这取决于抖动。您应该测量*实际代码*的性能，其中计算的值以某种方式实际使用；然后抖动就会知道它无法优化它们。

第六，产生大量垃圾的测试时间可能会被垃圾收集器丢弃。假设你有两个测试，一个会产生很多垃圾，一个会产生一点点垃圾。如果幸运地第一个测试设法在没有收集的情况下运行但第二个测试触发了一个，则第一个测试产生的垃圾收集的成本可以“收取”到运行第二个测试所花费的时间。如果您的测试产生大量垃圾，那么请考虑（1）我的测试一开始是否现实？对不切实际的程序进行性能测量没有任何意义，因为您无法很好地推断出真实程序的行为方式。并且（2）我应该向产生垃圾的测试收取垃圾收集的成本吗？如果是这样的话，

第七，您在多线程、多处理器环境中运行您的代码，在该环境中线程可以随意切换，并且线程量子（操作系统将给予另一个线程直到您的线程有机会再次运行的时间量）大约是16 毫秒。16 毫秒大约是*五千万个处理器周期*。如果线程切换发生在您尝试测量的数百万个处理器周期之一内，那么要确定亚毫秒操作的准确计时可能会非常困难。考虑到这一点。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-11T17:49:11.680

```
var sw = Stopwatch.StartNew();
...
long  elapsedMilliseconds = sw.ElapsedMilliseconds; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-11T17:48:21.663

您还可以使用[Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类：

```
int GetIterationsForExecutionTime(int ms)
{
    int count = 0;
    Stopwatch stopwatch = new Stopwatch();
    stopwatch.Start();        
    do
    {
        // some code here
        count++;
    } while (stopwatch.ElapsedMilliseconds < ms);

    stopwatch.Stop();
    return count;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-09T00:06:10.220

Eric Lippert 的优点。我已经进行了一段时间的基准测试和单元测试，我建议你应该放弃代码的每一次首次传递，因为 JIT 编译。因此，在使用循环和秒表的基准测试代码中，请记住将其放在循环的末尾：

```
 // JIT optimization.
                if (i == 0)
                {
                    // Discard every result you've collected.
                    // And restart the timer.
                    stopwatch.Restart();
                } 
```*

# node.js - 在 node.JS 中，如何获取我通过 *not* 我的 require 加载的模块的路径（即在某些 node_module 中）

> ID：10111163
> 
> 赞同：115
> 
> 时间：2012-04-11T17:42:56.477
> 
> 标签：node.js

我需要一个通过 npm 安装的模块。我想访问从属于该模块的 .js 文件（因此我可以在其中子类化一个 Constructor 方法）。我不能（好吧，不想）修改模块的代码，所以没有地方提取它的 __dirname。

我知道以下问题，但它是关于获取一个具有代码控制权的模块的路径（因此，__dirname 是解决方案）： [在 Node.js 中，我如何告诉 `this` 模块的路径？](https://stackoverflow.com/questions/5215871/in-node-js-how-can-i-tell-the-path-of-this-module)

~~~

更好的是获取模块的加载模块信息

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-04-12T10:06:00.143

如果我正确理解您的问题，您应该使用[require.resolve()](https://nodejs.org/api/modules.html#modules_require_resolve_request_options)：

> 使用内部 require() 机制来查找模块的位置，而不是加载模块，只返回解析的文件名。

例子：`var pathToModule = require.resolve('module');`

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2018-03-23T17:46:24.707

[require.resolve()](https://nodejs.org/api/modules.html#modules_require_resolve)是部分答案。接受的答案可能适用于许多节点模块，但不适用于所有节点。

`require.resolve("moduleName")`没有给你安装模块的目录；它为您提供了`main`在模块的属性中定义的文件的位置`package.json`。

那可能是*`moduleName/index.js`*，也可能是*`moduleName/lib/moduleName.js`*。在后一种情况下，`path.dirname(require.resolve("moduleName"))`将返回一个您可能不想要或不期望的目录：*`node_modules/moduleName/lib`*

获取特定模块的完整路径的正确方法是解析文件名：

```
let readmePath = require.resolve("moduleName/README.md"); 
```

如果您只想要模块的目录（也许您会进行很多`path.join()`调用），那么解析`package.json`- 它必须始终位于项目的根目录中 - 并传递给`path.dirname()`：

```
let packagePath = path.dirname(require.resolve("moduleName/package.json")); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-22T08:52:55.363

仅供参考，`require.resolve`根据 CommonJS 返回模块标识符。在 node.js 中，这是文件名。在**webpack 中**，这是一个数字。

在**webpack 的**情况下，这是我找出模块路径的解决方案：

```
const pathToModule = require.resolve('module/to/require');
console.log('pathToModule is', pathToModule); // a number, eg. 8
console.log('__webpack_modules__[pathToModule] is', __webpack_modules__[pathToModule]); 
```

然后从`__webpack_modules__[pathToModule]`我那里得到这样的信息：

```
(function(module, exports, __webpack_require__) {

    eval("module.exports = (__webpack_require__(6))(85);\n\n//////////////////\n// 
    WEBPACK FOOTER\n// delegated ./node_modules/echarts/lib/echarts.js from dll-reference vendor_da75d351571a5de37e2e\n// module id = 8\n// module chunks = 0\n\n//# sourceURL=webpack:///delegated_./node_modules/echarts/lib/echarts.js_from_dll-reference_vendor_da75d351571a5de37e2e?");

    /***/
}) 
```

结果我需要以前的 dll 构建文件中的旧脚本（为了更快的构建速度），所以我更新的模块文件没有像我预期的那样工作。最后我重建了我的dll文件并解决了我的问题。

参考：[用于`require.resolve`获取解析的文件路径（节点）](https://github.com/webpack/webpack/issues/1554)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-16T19:21:32.827

Jason 的答案是最好的答案，直到 Node.js ESM 和该`exports`领域问世。

现在 Node 支持带有一个`exports`字段的包，该字段默认情况下会*阻止诸如文件之类`package.json`的文件被解析*，除非包作者明确决定公开它们，Jason 的答案中的技巧对于没有明确公开的包将失败`package.json`。

有一个名为的软件包[`resolve-package-path`](https://www.npmjs.com/package/resolve-package-path)可以解决问题。

以下是如何使用它：

```
const resolvePkg = require('resolve-package-path')

console.log(resolvePkg('@some/package')) 
```

这将输出类似

```
/path/to/@some/package/package.json 
```

无论包的`exports`字段包含什么。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-11T19:48:09.783

我希望我正确理解您的需求：获取某个模块的入口点文件。假设您想获取`jugglingdb`模块的入口点：

```
node
> require('module')._resolveFilename('jugglingdb')
'/usr/local/lib/node_modules/jugglingdb/index.js' 
```

如您所见，这不是获取有关模块的此类信息的“官方”方式，因此此函数的行为可能会因版本而异。我在节点源中找到了它：[https ://github.com/joyent/node/blob/master/lib/module.js#L280](https://github.com/joyent/node/blob/master/lib/module.js#L280)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-04T10:47:53.113

根据@anatoliy 解决方案，在 MacOS XI 上找到了查找路径

```
require('module')._resolveLookupPaths('myModule') 
```

所以我得到了解决的查找路径

```
[ 'myModule',
  [ '/Users/admin/.node_modules',
    '/Users/admin/.node_libraries',
    '/usr/local/lib/node' ] ] 
```

而

```
require('module')._resolveFilename('myModule') 
```

无论如何都不会解析我一直在寻找的模块，事实上疯狂的是`_load`不会解析模块：

```
> require('module')._load('myModule')
Error: Cannot find module 'myModule'
    at Function.Module._resolveFilename (module.js:440:15)
    at Function.Module._load (module.js:388:25)
    at repl:1:19
    at sigintHandlersWrap (vm.js:32:31)
    at sigintHandlersWrap (vm.js:96:12)
    at ContextifyScript.Script.runInContext (vm.js:31:12)
    at REPLServer.defaultEval (repl.js:308:29)
    at bound (domain.js:280:14)
    at REPLServer.runBound [as eval] (domain.js:293:12)
    at REPLServer.<anonymous> (repl.js:489:10) 
```

而`require`意志：

```
> require('myModule') 
```

但我没有这个模块

```
myProject/node_modules/
myProject/node_modules/@scope/
/usr/local/lib/node_modules/
/usr/local/lib/node_modules/@scope
/usr/local/lib/node_modules/npm/node_modules/
/usr/local/lib/node_modules/npm/node_modules/@scope
$HOME/.npm/
$HOME/.npm/@scope/ 
```

那么这个模块在哪里？？？

首先我必须做一个`$ sudo /usr/libexec/locate.updatedb` 然后在喝杯咖啡后我做了`locate myModule`或更好`locate myModule/someFile.js`

etvoilà，它出现在我项目的父文件夹中，即在我的项目根文件夹之外：

```
$pwd
/Users/admin/Projects/Node/myProject
$ ls ../../node_modules/myModule/ 
```

所以你无法避免`rm -rf ../../node_modules/myModule/`和新鲜`npm install`。

我可以争辩说，没有人指示`npm`扫描我的计算机以在我应该运行的项目根文件夹或默认模块搜索路径之外的其他地方搜索模块。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-15T05:27:37.960

这可能是您正在寻找的，请检查：

> 需要.main.filename

# android - 从 SQLite 获取所有行

> ID：10111166
> 
> 赞同：47
> 
> 时间：2012-04-11T17:43:03.623
> 
> 标签：android, sqlite

我一直在尝试从 SQLite 数据库中获取所有行。但是我从以下代码中只得到了最后一行。

**FileChooser 类：**

```
public ArrayList<String> readFileFromSQLite() {

  fileName = new ArrayList<String>();

  fileSQLiteAdapter = new FileSQLiteAdapter(FileChooser.this);
  fileSQLiteAdapter.openToRead();
  cursor = fileSQLiteAdapter.queueAll();

  if (cursor != null) {
    if (cursor.moveToFirst()) {
      do {
        fileName.add(cursor.getString(cursor.getColumnIndex(FileSQLiteAdapter.KEY_CONTENT1)));
      } while (cursor.moveToNext());

    }
    cursor.close();
  }

  fileSQLiteAdapter.close();
  return fileName;
} 
```

**FileSQLiteAdapter 类：**

```
public Cursor queueAll() {
  String[] columns = new String[] { KEY_ID, KEY_CONTENT1 };

  Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns, null,
                null, null, null, null);
  return cursor;
} 
```

请告诉我我的错误在哪里。欣赏。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-04-11T17:45:36.783

尝试：

```
Cursor  cursor = db.rawQuery("select * from table",null); 
```

并且对于`List<String>`：

```
if (cursor.moveToFirst()) {
  while (!cursor.isAfterLast()) {
    String name = cursor.getString(cursor.getColumnIndex(countyname));

    list.add(name);
    cursor.moveToNext();
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-12T06:03:18.333

## 使用 Android 的内置方法

如果您想要每一列和每一行，那么只需传入`null`and参数。[`SQLiteDatabase`](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase) `column``selection`

```
Cursor cursor = db.query(TABLE_NAME, null, null, null, null, null, null, null); 
```

## 更多细节

其他答案使用`rawQuery`，但您可以使用 Android 内置的[`SQLiteDatabase`](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase). 的[文档](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query(boolean,%20java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String))`query`说您可以只传递给参数`null`以`selection`获取所有行。

> `selection`传递 null 将返回给定表的所有行。

虽然您也可以传入参数以`null`获取`column`所有列（如上面的单行），但最好只返回您需要的列。[文件](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query(boolean,%20java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String))说_

> `columns` 传递 null 将返回所有列，不鼓励这样做以防止从存储中读取不会使用的数据。

**例子**

```
SQLiteDatabase db = mHelper.getReadableDatabase();
String[] columns = {
        MyDatabaseHelper.COLUMN_1,
        MyDatabaseHelper.COLUMN_2,
        MyDatabaseHelper.COLUMN_3};
String selection = null; // this will select all rows
Cursor cursor = db.query(MyDatabaseHelper.MY_TABLE, columns, selection,
        null, null, null, null, null); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-22T00:36:36.427

这与其他解决方案几乎相同，但我认为查看实现相同结果的不同方法并稍微解释一下可能会很好：

可能您在调用 DBHandler 时初始化了表名 String 变量，因此它类似于；

```
private static final String MYDATABASE_TABLE = "anyTableName"; 
```

然后，无论您在哪里尝试检索所有表行；

```
SQLiteDatabase db = this.getReadableDatabase();
Cursor cursor = db.rawQuery("select * from " + MYDATABASE_TABLE, null);

List<String> fileName = new ArrayList<>();
if (cursor.moveToFirst()){
   fileName.add(cursor.getString(cursor.getColumnIndex(COLUMN_NAME)));
   while(cursor.moveToNext()){
      fileName.add(cursor.getString(cursor.getColumnIndex(COLUMN_NAME)));
   }
}
cursor.close();
db.close(); 
```

老实说，有很多方法可以做到这一点，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-04T19:54:35.970

我一直在研究同样的问题！我认为您的问题与您识别用于填充返回的 ArrayList 的变量的位置有关。如果您在循环中定义它，那么它将始终引用数据库中表中的最后一行。为了避免这种情况，您必须在循环之外识别它：

```
String name;
if (cursor.moveToFirst()) {

        while (cursor.isAfterLast() == false) {
            name = cursor.getString(cursor
                    .getColumnIndex(countyname));

            list.add(name);
            cursor.moveToNext();
        }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-13T12:32:10.793

**更新`queueAll()`方法如下：**

```
public Cursor queueAll() {

     String selectQuery = "SELECT * FROM " + MYDATABASE_TABLE;
     Cursor cursor = sqLiteDatabase.rawQuery(selectQuery, null);

     return cursor;
} 
```

**更新`readFileFromSQLite()`方法如下：**

```
public ArrayList<String> readFileFromSQLite() {

    fileName = new ArrayList<String>();

    fileSQLiteAdapter = new FileSQLiteAdapter(FileChooser.this);
    fileSQLiteAdapter.openToRead();

    cursor = fileSQLiteAdapter.queueAll();

    if (cursor != null) {
        if (cursor.moveToFirst()) {
            do 
            {
                String name = cursor.getString(cursor.getColumnIndex(FileSQLiteAdapter.KEY_CONTENT1));
                fileName.add(name);
            } while (cursor.moveToNext());
        }
        cursor.close();
    }

    fileSQLiteAdapter.close();

    return fileName;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-06T19:15:00.980

```
Cursor cursor = myDb.viewData();

        if (cursor.moveToFirst()){
              do {
                 String itemname=cursor.getString(cursor.getColumnIndex(myDb.col_2));
                 String price=cursor.getString(cursor.getColumnIndex(myDb.col_3));
                 String quantity=cursor.getString(cursor.getColumnIndex(myDb.col_4));
                 String table_no=cursor.getString(cursor.getColumnIndex(myDb.col_5));

                 }while (cursor.moveToNext());

                }

                cursor.requery(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-02T13:44:56.700

```
public List<String> getAllData(String email)
{

    db = this.getReadableDatabase();
    String[] projection={email};

    List<String> list=new ArrayList<>();

    Cursor cursor = db.query(TABLE_USER, //Table to query
            null,    //columns to return
            "user_email=?",        //columns for the WHERE clause
            projection,        //The values for the WHERE clause
            null,       //group the rows
            null,       //filter by row groups
            null);
    //  cursor.moveToFirst();

    if (cursor.moveToFirst()) {
        do {

            list.add(cursor.getString(cursor.getColumnIndex("user_id")));
            list.add(cursor.getString(cursor.getColumnIndex("user_name")));
            list.add(cursor.getString(cursor.getColumnIndex("user_email")));
            list.add(cursor.getString(cursor.getColumnIndex("user_password")));
            // cursor.moveToNext();

        } while (cursor.moveToNext());
    }
    return list;
} 
```

# c# - 如何在自定义 WPF 控件中允许 Width="Auto"

> ID：10111169
> 
> 赞同：1
> 
> 时间：2012-04-11T17:43:06.240
> 
> 标签：c#, wpf, xaml

我创建了一个基于 Expander 类的自定义控件：

```
public partial class HideableExpander : Expander
{
    public new double Height
    {
        get
        {
            if (Visibility== System.Windows.Visibility.Hidden)
            {
                return 0;
            }
            return base.Height;
        }
        set
        {
            base.Height = value;
        }
    }

    public new double Width
    {
        get
        {
            if (Visibility == System.Windows.Visibility.Hidden)
            {
                return 0;
            }
            return base.Width;
        }
        set
        {
            base.Width = value;
        }
    }

    public new Thickness Margin
    {
        get
        {
            if (Visibility== System.Windows.Visibility.Hidden)
            {
                return new Thickness();
            }
            return base.Margin;
        }
        set
        {
            base.Margin = value;
        }
    }

    public HideableExpander()
    {

        this.InitializeComponent();

    }
} 
```

XAML：

```
<Expander
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
x:Class="leartWPF.HideableExpander"
x:Name="UserControl"
d:DesignWidth="640" d:DesignHeight="480">

<Grid x:Name="LayoutRoot"/>
</Expander> 
```

现在，当我尝试将它与 Width="Auto" 属性一起使用时：

```
 <local:HideableExpander Header="{Binding Expander1Name, ElementName=Window}"  Margin="10" Width="Auto" Background="#00F19494" VerticalAlignment="Top" >
                <WrapPanel Height="Auto" Margin="0" Width="Auto" >
                      <TextBlock Text="Please, enter the name of this expander:       " VerticalAlignment="Center"/>
                      <TextBox Width="150" Text="{Binding Expander1Name, ElementName=Window, Mode=TwoWay, NotifyOnValidationError=True, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}" Background="#FFF5EECC"/>  
                </WrapPanel>
            </local:HideableExpander> 
```

我收到一个关于无法将“自动”转换为双倍的异常：

```
Unhandled Exception: System.Windows.Markup.XamlParseException: 'Provide value on 'System.Windows.Baml2006.TypeConverterMarkupExtension' threw an exception.' Line number '10' and line position '8'. ---> System.Exception: Auto is not a valid value for Double. ---> System.FormatException: Input string was not in a correct format.
   at System.Number.ParseDouble(String value, NumberStyles options, NumberFormatInfo numfmt)
   at System.Double.Parse(String s, NumberStyles style, IFormatProvider provider)
   at System.ComponentModel.DoubleConverter.FromString(String value, NumberFormatInfo formatInfo)
   at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   --- End of inner exception stack trace ---
   at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at MS.Internal.Xaml.Runtime.ClrObjectRuntime.CallProvideValue(MarkupExtension me, IServiceProvider serviceProvider)
   --- End of inner exception stack trace ---
   at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
   at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
   at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
   at System.Windows.Application.LoadBamlStreamWithSyncInfo(Stream stream, ParserContext pc)
   at System.Windows.Application.LoadComponent(Uri resourceLocator, Boolean bSkipJournaledProperties)
   at System.Windows.Application.DoStartup()
   at System.Windows.Application.<.ctor>b__1(Object unused)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.WrappedInvoke(Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run()
   at leartWPF.App.Main() in d:\Users\menkaur\Documents\Expression\Blend 4\Projects\leartWPF\leartWPF\obj\Debug\App.g.cs:line 0 
```

我应该怎么做才能接受 Auto 作为一个值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T17:47:12.410

您需要在[`TypeConverter`属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverterattribute.aspx)上使用属性，指定[`LengthConverter`](http://msdn.microsoft.com/en-us/library/system.windows.lengthconverter.aspx)应该使用。`Auto`然后转换为`Double.NaN`.

（您可以看到这是在`FrameworkElement`属性[`Width`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.width.aspx)和上完成的[`Height`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.height.aspx)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T17:51:00.860

尝试添加以下属性，我认为这应该会有所帮助，当然还有“新”来隐藏父母的宽度......

```
[TypeConverterAttribute(typeof(LengthConverter))]
public new double Width
{
  ......your getter and setter 
```

//**编辑** 每条评论：-“什么是 getter 和 setter？”

```
 //getter and setter sample(grabbing them from the question)
    get
    {
        if (Visibility == System.Windows.Visibility.Hidden)
        {
            return 0;
        }
        return base.Width;
    }
    set
    {
        base.Width = value;
    }
} 
```

# ruby-on-rails - 在 Ruby on Rails 中通过控制台访问迁移

> ID：10111172
> 
> 赞同：1
> 
> 时间：2012-04-11T17:43:25.083
> 
> 标签：ruby-on-rails

我是 Ruby on Rails 的新手。这可能是一个非常愚蠢的问题。

我创建了一个迁移使用

```
rails generate migration Kapol name:string position:integer

rake db:migrate 
```

然后使用 phpmyadmin 我复制了已经存在的数据库然后打开了 rails 控制台

我的问题是我可以使用 Kapol.find(1) 方法吗？因为当我尝试使用单数或复数时它说

```
unitialized constant:Kapol 
```

我知道必须有一种方法，但是在哪里指定呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:45:30.573

您必须生成**模型**以防万一为它创建表，因为**迁移**通常用于修改现有表。

模型生成器还在您的迁移文件夹中创建迁移文件可能会令人困惑。唯一的区别是*模型生成器*还生成初始代码来创建表，另一方面，*迁移生成器*只创建迁移文件而没有初始代码。

```
rails generate model Kapol name:string position:integer 
```

更多信息： http: [//guides.rubyonrails.org/getting_started.html#generating-a-model](http://guides.rubyonrails.org/getting_started.html#generating-a-model)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:57:27.150

如果您是 Ruby on Rails 的新手，最好的办法是创建一个*脚手架*，它会为您提供迁移文件、模型文件、控制器文件以及各种视图文件、测试文件等。 .，所有这些都可以很好地协同工作。然后你可以玩这些并从那里建立起来。

```
rails generate scaffold Kapol name:string position:integer 
```

如果您对自动生成的迁移感到满意，那么`rake db:migrate`您就大功告成了。

正如 Andrew 在下面所说，您也可以通过将 'scaffold' 替换为 'model' 等来一次生成任何这些文件。

你`Kapol.find(1)`是正确的。

# html - 如何在不更改表格布局的情况下旋转单元格的内容

> ID：10111175
> 
> 赞同：1
> 
> 时间：2012-04-11T17:43:41.650
> 
> 标签：html, css

我目前正在开发一个 UI，该 UI 要求我有一个包含单元格的表格，其文本是垂直读取的，而不是水平读取的。为此，我使用 CSS 旋转变换。

我遇到的问题是在渲染转换发生之前测量内容。这导致我的表格呈现不正确，给出宽列而不是窄列。

有没有办法用 css 或 javascript 来解决这个问题？

[JSFiddle](http://jsfiddle.net/gJCtN/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:20:54.193

看看这个：http: [//jsfiddle.net/c29rr/](http://jsfiddle.net/c29rr/)

我不知道它是否适用于您的情况，因为它使用 float:left 使单元格表现为 div，但这是一个开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:32:52.740

不是最好的解决方案，但这是我想出的：http: [//jsfiddle.net/gJCtN/2/](http://jsfiddle.net/gJCtN/2/)

此外，`vertical-align`没有或类似的元素不支持`display:table-cell`。[更多信息](http://css-tricks.com/what-is-vertical-align/)。

# mysql - 在MYSQL中选择底部结果

> ID：10111179
> 
> 赞同：2
> 
> 时间：2012-04-11T17:43:56.497
> 
> 标签：mysql, select

我正在编写一个消息传递系统，我正在尝试选择按升序发送的最后 10 条消息（底部的最新消息）。

但是这样做有问题:(

这是我当前的 SELECT 语句，表中有超过 30 行可用。

```
SELECT * FROM 
( SELECT * FROM messages ORDER BY addedDate DESC LIMIT 10 ) tb 
WHERE ( senderID = "1" OR receiverID = "1" ) 
AND ( senderID = "3" OR receiverID = "3" ) 
ORDER BY addedDate ASC LIMIT 10 
```

但是，由于某种原因，这仅返回 7 行，当使用不同的发送方和接收方组合时，如果行数少于我得到的结果少于 7 个，即使每个结果都应该给我至少 10 行我想要的。

是否有另一种方法可以用来获取匹配的后 10 行：

```
WHERE ( senderID = "1" OR receiverID = "1" ) 
AND ( senderID = "3" OR receiverID = "3" ) 
```

但按升序选择后 10 个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:46:24.823

您的子查询中应该有 WHERE 语句，而不是主查询。

试试这个：

```
SELECT * FROM 
( SELECT * FROM messages
  WHERE ( senderID = "1" OR receiverID = "1" ) 
  AND ( senderID = "3" OR receiverID = "3" )
ORDER BY addedDate DESC LIMIT 10 ) tb 
ORDER BY addedDate ASC 
```

而且您不需要第二个 LIMIT，因为您只能从子查询中获得 10 个结果。

# events - GWT：将 EventBus 与 Cell 一起使用的优缺点

> ID：10111180
> 
> 赞同：0
> 
> 时间：2012-04-11T17:43:59.093
> 
> 标签：events, gwt

我们将应用程序范围的 eventBus 注入到我们的 Cells（扩展 AbstractCell 的类）中。我们认为触发将由其他演示者处理的事件而不是使用 ValueUpdater 会更舒适。任何优点/缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:10:01.867

我喜欢`ValueUpdater`s 服务于一个非常特定的目的 - 更新单元格已更改的值。这是大多数可编辑单元格建立的基本合同，而超载它的按钮/动作单元格让我很恼火。

也就是说，使用全局事件总线可能太过分了。一些中间选项：

*   每个列/单元格的 EventBus 实例（实际上是一样的），因此如果需要，事件可以非常本地化，或者可以在更高级别上收听和重新广播。这种方法的主要好处之一是您的单元格可能是可重用的，将它们的 api 公开为供不同用例使用的事件
*   仅针对该视图/演示者的本地事件总线，在必要时再次将应用程序范围的事件提升到全局演示者。与第一个选项相比，可重用性较低，但通常代码不需要可重用。

我不喜欢我的全局事件总线变得过于垃圾，部分是为了让调试更容易，部分是为了如果给定的视图/演示者在使用事件方面效率低下，不要太担心，因为这不会影响其余部分应用程序。有机会先构建，然后再优化。

# jquery - 使用来自 JSON 回调的 HTML 数据填充 300 多个 DIV 的有效方法？

> ID：10111182
> 
> 赞同：3
> 
> 时间：2012-04-11T17:44:03.420
> 
> 标签：jquery

我有一个脚本需要 18 秒才能完成，因为它使用 HTML 数据填充了大约 300 个 DIV。下面的代码：

HTML：

```
 <div id="window">
        <div id="wall">
            <div class="module">
                <div>
                    <div class="face front"></div>
                    <div class="face back"></div>
                </div>
            </div>
        </div>
    </div> 
```

Javascript：

```
for (i = 0; i < numModules-1; ++ i)
{
    var $mod = $('.module:eq(0)').clone();

    modLeft += modSize;
    if (modLeft + modSize > $('#wall').width())
    {
        modLeft = 0;
        modTop += modSize;
    }
    $mod.css({
        left: modLeft,
        top: modTop
    }).appendTo('#wall');
}

$.getJSON('html_server.php?callback=?', function(data) {
    var htmlCount = data.length;

    for (i = 0; i < numModules /* 300 or more */; ++ i)
    {
        var pick = Math.floor(Math.random() * Math.floor(htmlCount/2)) * 2;
        var contentFront = data[pick];
        var contentBack = data[pick+1];
        var modStyle = '';
        var $mod = $('.module:eq(' + i + ')');
        var $modFront = $mod.find('.front');
        var $modBack = $mod.find('.back');

        // Set HTML content on front & back of module
        $modFront.html(contentFront);
        $modBack.html(contentBack);
    }
}); 
```

如果我注释掉这两个`.html()`调用，运行时间会下降到大约 110 毫秒，所以这些显然是罪魁祸首。而且 HTML 内容不是很多，最多可能 300 字节的数据。

有什么建议吗？

编辑：添加了创建 DIV 的代码。也许我可以在 getJSON 回调中移动它，并在创建 HTML 时放入它们？那会有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:58:42.710

没有看到实际的标记很难判断，但应该看起来像：

```
$.getJSON('html_server.php?callback=?', function(data) {
    var mod='';
    for (i = 0; i < numModules /* 300 or more */; ++ i) {
        var pick = Math.floor(Math.random() * Math.floor(data.length/2)) * 2;
            mod += '<div class="module'>;
            mod += '<div class="front">'+data[pick]+'</div>');
            mod += '<div class="back">'+data[pick+1]+'</div>');
            mod += '</div>';
    }
    $('#someParent').html(mod);
}); 
```

在 JS 中构建所有内容，并且只插入一次 DOM 是这里的方法，但它必须根据实际标记构建，上面只是一个通用示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:24:07.140

我创建`module`为模板并将内容替换为响应。并将您的 html 逻辑移到 JSON 下方，这样它就可以完成一次。见下文，

```
 var modTmpl = '<div class="module"><div><div class="face front">{CONTENT_FRONT}</div><div class="face back">{CONTENT_BACK}</div></div></div>';

$.getJSON('html_server.php?callback=?', function(data) {
    var htmlCount = data.length;

    var pick, tmp, $mods = [];
    for (i = 0; i < numModules /* 300 or more */; ++ i)
    {
        pick = Math.floor(Math.random() * Math.floor(htmlCount/2)) * 2;
        tmp = modTmpl
                .replace(/{CONTENT_FRONT}/, data[pick])
                .replace(/{CONTENT_BACK}/, data[pick+1]);
        $mods.push(tmp);
    }
});

/*
    I am leaving the below code untouched as it seems like you are 
    positioning each module. If not then you can just 
    $('#wall').append($mods.join('')); and remove below for loop
*/
for (i = 0; i < numModules-1; ++ i)
{
    var $mod = $mods[i]; //use the pushed modules and append now

    modLeft += modSize;
    if (modLeft + modSize > $('#wall').width())
    {
        modLeft = 0;
        modTop += modSize;
    }
    $mod.css({
        left: modLeft,
        top: modTop
    }).appendTo('#wall');
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T17:47:36.527

我会在延迟值较小的设备上一次创建一堆（比如 20 个一组）`setTimeout`——它可能不会更快完成，但它不会在浏览器处理时锁定浏览器。因此，感知的启动速度可能会更快。您可以在加载时打开 AJAX 微调器或类似工具 - 并允许您的用户在渲染时立即进行交互。

# asp.net - 使用 MvcBuildViews=true 构建 Razor 失败

> ID：10111183
> 
> 赞同：5
> 
> 时间：2012-04-11T17:44:09.477
> 
> 标签：asp.net, asp.net-mvc-3, razor, msbuild

我有一个使用 MvcContrib 和 MvcScaffold 建立的新项目。动态编译一切正常。但是，当我在项目文件中打开视图编译时，编译会中断。

```
The name 'model' does not exist in the current context
'System.Web.WebPages.Html.HtmlHelper' does not contain a definition for 'LabelFor' and no extension method 'LabelFor' accepting a first argument of type 'System.Web.WebPages.Html.HtmlHelper' could be found (are you missing a using directive or an assembly reference?)
'System.Web.WebPages.Html.HtmlHelper' does not contain a definition for 'EditorFor' and no extension method 'EditorFor' accepting a first argument of type 'System.Web.WebPages.Html.HtmlHelper' could be found (are you missing a using directive or an assembly reference?)
'System.Web.WebPages.Html.HtmlHelper' does not contain a definition for 'ValidationMessageFor' and no extension method 'ValidationMessageFor' accepting a first argument of type 'System.Web.WebPages.Html.HtmlHelper' could be found (are you missing a using directive or an assembly reference?) 
```

[如果您从 Views 文件夹中遗漏了 web.config 文件，这与](https://stackoverflow.com/questions/6389055/the-name-model-does-not-exist-in-current-context-in-mvc3)您收到的错误类型相同，但这是存在的。我也有[Phil Haack 的修复程序](http://haacked.com/archive/2011/05/09/compiling-mvc-views-in-a-build-environment.aspx)，但无济于事。为什么 MSBuild 没有找到 MVC3 的好东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T14:29:00.183

我发现我不小心复制了配置文件中的 system.web 部分，这导致了同样的错误。

# c# - 有没有办法从我无法控制的程序中获取信息？

> ID：10111185
> 
> 赞同：0
> 
> 时间：2012-04-11T17:44:13.100
> 
> 标签：c#, .net

当前运行此代码以打开 Business Vision（由我无权访问其代码的其他人编写的应用程序）：

```
ProcessStartInfo myProcessStartInfo = new ProcessStartInfo(BusinessVisionPath);
myProcessStartInfo.UseShellExecute = false;
myProcessStartInfo.RedirectStandardOutput = true;
myProcess.StartInfo = myProcessStartInfo;
myProcess.Start();

StreamReader myStreamReader = myProcess.StandardOutput;
Boolean done = false;
while (done == false)
{
    int s = myStreamReader.Read();
    Console.WriteLine(s);
    if (s == -1)
    {
        done = true;
        Process IProcess = new Process();
        ProcessStartInfo IProcessStartInfo = new ProcessStartInfo(QuickPrinterPath);
        IProcessStartInfo.WindowStyle = ProcessWindowStyle.Maximized;
        IProcess.StartInfo = IProcessStartInfo;
        IProcess.Start();
    }

}
myProcess.Close();
Console.ReadLine(); 
```

**无论如何**，

此代码当前在 BusinessVision 关闭时打开我的打印机程序。

**问题**：

1.  当 BV 中弹出某个消息框时（“您确定要打印发票”吗？），我如何（如果可能）打开我的程序
2.  是否可以从应用程序中获取任何数据？就像我可以在运行时解析的原始数据之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:04:32.643

你可能想看看微软的 UI 自动化。它允许您从其他应用程序的窗口读取数据，并以编程方式与其他应用程序的 UI 交互。几年前我使用它来自动化我们拥有的旧 VB6 应用程序的一堆测试。我的代码会找到应用程序的主窗口，然后深入到我感兴趣的菜单/控件/等。从那里我可以自动点击和击键，然后从各种标签中抓取我想要的文本/数据视窗。然后我可以将数据提取到我的 .NET 应用程序中，然后用它做我想做的事。

在您的情况下，您需要一些始终运行的应用程序（例如 Windows 服务）来持续监控 BV 程序并检测消息框何时出现，然后通过启动您的程序做出相应的反应。

理解和开始工作需要大量的工作，但它非常强大。那里有免费的应用程序，可以更轻松地浏览窗口的视觉层次结构并查看可用的信息类型。查看微软的 UISpy：

[http://msdn.microsoft.com/en-us/library/ms727247.aspx](http://msdn.microsoft.com/en-us/library/ms727247.aspx)

这里有一些其他链接可以帮助您入门：

[http://en.wikipedia.org/wiki/Microsoft_UI_Automation](http://en.wikipedia.org/wiki/Microsoft_UI_Automation)

[http://msdn.microsoft.com/en-us/library/ms747327.aspx](http://msdn.microsoft.com/en-us/library/ms747327.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T22:00:46.000

您可以尝试使用一种认可的方式来访问数据。

就 Sage BusinessVision 而言，有：

1.  可从应用程序手动导入和导出为 csv 的数据。
2.  直接访问 Pervasive 数据库，文档位于应用程序的帮助部分，位于名为*BusinessVision Database Structure Reference.chm的文件中*
3.  Sage 合作伙伴可用的 API。

1 是最简单的方法，没有什么是自动的。
2 更具挑战性，但可以让您实时访问基础数据。
3 要求您付费并满足 Sage 的要求。

如果您将 2\. 和一些 UI 自动化结合起来，您可以在某些 UI 事件上构建一些触发器，并带来充满数据库数据的新窗口。

请注意，UI 自动化对于新版本的应用程序来说是极其脆弱的，并且每次都肯定需要重新设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:54:45.907

你总是可以尝试反编译器:) [dotPeek](http://www.jetbrains.com/decompiler/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:50:32.770

1.  尽管我不确定我是否会推荐它，但您可以[Enumerate top level windows](http://code.msdn.microsoft.com/windowsdesktop/Enumerate-top-level-9aa9d7c1)，并检查其中一个是否与弹出框匹配。
2.  除了应用程序创建的文件或数据库条目，我不知道，除非您想进入应用程序的[二进制修补](http://www.ragestorm.net/blogs/?tag=binary-patching)程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T17:52:35.670

如果目标是 .NET exe，那么开发人员可能会马虎并公开他们的类和方法。在这种情况下，加载 exe，就好像它是您的应用程序的 DLL 依赖项一样，并直接调用它们的方法。

# solr - Solr 3.5 索引需要很长时间

> ID：10111186
> 
> 赞同：2
> 
> 时间：2012-04-11T17:44:31.833
> 
> 标签：solr

我们最近从 solr3.1 迁移到 solr3.5，我们配置了一个 master 和一个 slave。master有两个核心，

```
1) Core1 – 44555972 documents
2) Core2 – 29419244 documents 
```

我们每 5000 个文档提交一次，但最近提交需要非常长的 15 分钟，在某些情况下。可能是什么原因造成的，我检查了日志，我能看到的唯一警告是，

> “警告：使用已弃用的更新请求参数 update.processor 检测到。请改用新参数 update.chain，因为对 update.processor 的支持将在以后的版本中移除。”</p>

**内存细节：**

导出 JAVA_OPTS="$JAVA_OPTS -Xms6g -Xmx36g -XX:MaxPermSize=5g"

**Solr 配置：**

```
<useCompoundFile>false</useCompoundFile>
<mergeFactor>10</mergeFactor>
<ramBufferSizeMB>32</ramBufferSizeMB>
<!-- <maxBufferedDocs>1000</maxBufferedDocs> -->
<maxFieldLength>10000</maxFieldLength>
<writeLockTimeout>1000</writeLockTimeout>
<commitLockTimeout>10000</commitLockTimeout> 
```

还注意到，top 命令显示了将近 350GB 的虚拟内存使用量。

几天前一切正常，这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:33:07.993

您是否有大型搜索预热查询？由于搜索预热到位，我们的提交最多需要 2 分钟。想知道是不是这样。

大量的虚拟内存使用可以解释这一点。

# android - 在编辑文本框中显示条形码

> ID：10111187
> 
> 赞同：0
> 
> 时间：2012-04-11T17:44:34.193
> 
> 标签：android, android-edittext, zxing

在这里，我再次尝试修复我的一些代码，但仍然无法正常工作，请帮助我。我的问题出在显示器上，我真的不知道该怎么做，但我真的认为我已经接近了。这是我的代码：

```
public class Addform extends Activity {
    DBAdapter db;
    private static final int REQUEST_BARCODE = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.addfom);

        db = new DBAdapter(this);

        Button Save = (Button)findViewById(R.id.save);
        Save.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View arg0)
            {
                {
                EditText edittype = (EditText) findViewById(R.id.edittype);
                EditText editweight = (EditText) findViewById(R.id.editweight);
                EditText editexp = (EditText) findViewById(R.id.editexp);
                if (edittype.getText().length() != 0 
                    && editweight.getText().length()  != 0
                    && editexp.getText().length()  != 0 
                    ) 
                    {
                        String type = edittype.getText().toString();
                        int weight = Integer.parseInt(editweight.getText().toString());
                        int exp = Integer.parseInt(editexp.getText().toString());
                        db.open();
                        long id = db.insertCar(type, weight, exp);        
                        db.close();
                        Toast.makeText(Addform.this,"Entry succesful",Toast.LENGTH_SHORT).show();
                        edittype.setText("");
                        editweight.setText("");
                        editexp.setText("");
                    }
                    else 
                    {
                        Toast.makeText(Addform.this,"Error: fields cannot be left empty",Toast.LENGTH_LONG).show();     
                    }
                }
            }
        });
        Button Scan = (Button)findViewById(R.id.scan);
        Scan.setOnClickListener(new OnClickListener() 
        {
            @Override
            public void onClick(View v) {
                EditText mBarcodeEdit = (EditText) findViewById(R.id.barcode);
                switch (v.getId()) {
                case R.id.scan:
                    Intent intent = new Intent("com.google.zxing.client.android.SCAN");
                    intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
                    startActivityForResult(intent, REQUEST_BARCODE);
                    break;
                }
            }
        });
    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == REQUEST_BARCODE) {
            if (resultCode == RESULT_OK) {
                String barcodetext = intent.getStringExtra("SCAN_RESULT");
                String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
                EditText mBarcodeEdit = (EditText) findViewById(R.id.barcode);
                mBarcodeEdit.setText(barcodetext);
                // Handle successful scan
            } else if (resultCode == RESULT_CANCELED) {
                // Handle cancel
                finish();
            }
        }
    }
} 
```

这是 .XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:weightSum="1">

<TextView
    android:id="@+id/type"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Type" />

<EditText
    android:id="@+id/edittype"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/weight"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Weight" />

<EditText
    android:id="@+id/editweight"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="numberDecimal" />

<TextView
    android:id="@+id/exp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Expiration date" />

<EditText
    android:id="@+id/editexp"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="date" />

<TextView
    android:id="@+id/barcode"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Barcode" />

<EditText
    android:id="@+id/editbarcode"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="number" />

<Button
    android:id="@+id/scan"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Scan" />

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="bottom"
android:weightSum="1">

    <Button
        android:id="@+id/save"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Save" />

</LinearLayout> 
```

我试图

EditText mBarcodeEdit = (EditText) findViewById(R.id.barcode); 到处都是，但它似乎无法识别它，当我将它放在“onActivityResult”方法中时，它会使应用程序崩溃。请帮我

这是日志

```
04-11 19:04:22.980: W/IInputConnectionWrapper(27290): showStatusIcon on inactive InputConnection
04-11 19:04:32.505: D/AndroidRuntime(27290): Shutting down VM
04-11 19:04:32.505: W/dalvikvm(27290): threadid=1: thread exiting with uncaught exception (group=0x40a461f8)
04-11 19:04:32.505: E/AndroidRuntime(27290): FATAL EXCEPTION: main
04-11 19:04:32.505: E/AndroidRuntime(27290): java.lang.RuntimeException: Failure
delivering result ResultInfo{who=null, request=0, result=-1, data=Intent {
act=com.google.zxing.client.android.SCAN flg=0x80000 (has extras) }} to activity
{wijayaratnam.sutharsun.mobilefridge/wijayaratnam.sutharsun.mobilefridge.Addform}:
java.lang.ClassCastException: android.widget.TextView cannot be cast to
android.widget.EditText
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
android.app.ActivityThread.access$1100(ActivityThread.java:123)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
android.os.Handler.dispatchMessage(Handler.java:99)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
android.os.Looper.loop(Looper.java:137)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
android.app.ActivityThread.main(ActivityThread.java:4424)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
java.lang.reflect.Method.invokeNative(Native Method)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
java.lang.reflect.Method.invoke(Method.java:511)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
dalvik.system.NativeStart.main(Native Method)
04-11 19:04:32.505: E/AndroidRuntime(27290): Caused by: java.lang.ClassCastException:
android.widget.TextView cannot be cast to android.widget.EditText
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
wijayaratnam.sutharsun.mobilefridge.Addform.onActivityResult(Addform.java:214)
04-11 19:04:32.505: E/AndroidRuntime(27290):    at
android.app.Activity.dispatchActivityResult(Activity.java:4649)
04-11 19:04:32.505: E/AndroidRuntime(27290): at
app.ActivityThread.deliverResults(ActivityThread.java:2976)
04-11 19:04:32.505: E/AndroidRuntime(27290):    ... 11 more
04-11 19:04:32.925: I/dalvikvm(27290): threadid=3: reacting to signal 3
04-11 19:04:32.940: I/dalvikvm(27290): Wrote stack traces to '/data/anr/traces.txt'
04-11 19:04:33.035: I/dalvikvm(27290): threadid=3: reacting to signal 3
04-11 19:04:33.040: I/dalvikvm(27290): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:22:54.470

在您看来，您声明：

```
<TextView
    android:id="@+id/barcode"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Barcode" /> 
```

然后，在你的代码中，你试试这个：

```
EditText mBarcodeEdit = (EditText) findViewById(R.id.barcode); 
```

你看到了吗？您将 @+id/barcode 声明为`TextView`，然后尝试将其引用为`EditText`.

因此，要么将布局更改为

```
<EditText
    android:id="@+id/barcode"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Barcode" /> 
```

或者

将您的代码更改为：

```
TextView mBarcodeEdit = (TextView) findViewById(R.id.barcode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:24:33.057

```
EditText mBarcodeEdit = (EditText) findViewById(R.id.barcode); 
```

change above line with below

```
EditText mBarcodeEdit = (EditText) findViewById(R.id.editbarcode); 
```

# javascript - Jquery/Javascript 允许在一周中一天中的特定时间访问特定网页

> ID：10111188
> 
> 赞同：1
> 
> 时间：2012-04-11T17:44:35.640
> 
> 标签：javascript

是否有 Jquery/Javascript 允许仅在一周中的特定时间访问特定网页？例如：在一门课程中，您希望您的学生在一天和一周的特定时间访问您网络中的网页！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:46:51.057

否：JavaScript（和 jQuery，它只是一个用 JavaScript 实现的库）在浏览器中运行，在**已交付给用户**的页面上。您可以在使用 JS 交付页面后“隐藏”页面，但是一旦您发送页面，它就在他们手中；他们可以根据需要选择取消隐藏并与之交互。

由网络服务器软件（例如 IIS、Apache、Nginx）决定是否提供页面。例如，Apache 的[mod_sequester](http://meepzor.com/packages/mod_sequester/mod_sequester.html)模块允许您根据日期/时间范围控制内容的服务。或者，您可以使用 Apache[根据一天中的时间发送不同的内容](http://httpd.apache.org/docs/2.3/rewrite/advanced.html#time-dependent)。

或者，由您拥有的任何动态应用程序（例如 Ruby on Rails、PHP）决定根据任意标准更改发送到浏览器的页面内容。任何自定义逻辑都可以在这里完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:47:43.410

我不会通过 JavaScript 做到这一点，因为它是一个客户端脚本。非常容易查看源代码和获取页面。因此，限制访问应该在服务器端完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T17:48:36.170

您最好的选择是在服务器端执行此操作，仅在一周中的特定日期提供页面。JavaScript 可以根据星期几修改交付页面的内容，但是如果客户端禁用了 javascript，那么无论如何页面都会直接通过。

# ruby-on-rails - 从 javascript 请求重定向到 html 不起作用（Rails）

> ID：10111191
> 
> 赞同：5
> 
> 时间：2012-04-11T17:45:04.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, ruby-on-rails-3.1

如果不满足某些条件，我正在向控制器操作发送 javascript 请求以尝试重定向到另一个 html 页面。在浏览了几个问题后，这就是我想出的：

```
def twittertweet
  if current_user && current_user.twitter_token
    ....
  else
    flash[:notice] = "You must be registered with Twitter to do that."
    respond_to do |format|
      format.js { render(:update) { |page| page.redirect_to authentications_url } }
    end
  end
end 
```

我想重定向到 authentications_url。然而，这就是发生的事情：

```
Started POST "/twittertweet.json" for 127.0.0.1 at 2012-04-11 13:38:27 -0400
  Processing by ItemsController#twittertweet as */*
  Parameters: {"id"=>"22"}
  Category Load (0.3ms)  SELECT "categories".* FROM "categories" 
Rendered items/update.html.erb within layouts/application (0.0ms)
Completed 200 OK in 112ms (Views: 79.9ms | ActiveRecord: 5.7ms) 
```

如您所见，它甚至没有尝试重定向到 authentications_url。然而，我知道“else”声明已经到达（我已经放置了 puts 声明来帮助我找出答案）。

有什么解决方法吗？

**更新** 如果您尝试 DanS 的解决方案，则会出现 MissingTemplateError。它仍在尝试重定向到项目#update：

```
ActionView::MissingTemplate (Missing template items/update, application/update with {:handlers=>[:erb, :builder, :coffee], :formats=>[:json], :locale=>[:en, :en]}. Searched in:
  * "/Users/dylandrop/Documents/givespend/app/views"
  * "/Users/dylandrop/.rvm/gems/ruby-1.9.2-p290/gems/devise-2.0.4/app/views"
): 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T18:10:18.267

我猜你是`twittertweet`通过ajax调用的。然后通过 javasctipt 代码响应它：

```
format.js { render :js => "window.location.href = '#{some_path}'" } 
```

# json - 在 Actionscript 中获取和解析 JSON

> ID：10111193
> 
> 赞同：6
> 
> 时间：2012-04-11T17:45:10.117
> 
> 标签：json, flash, actionscript

我想要做的是向这个 URL 发出一个 get 请求：[http://api.beatport.com/catalog/3/most-popular](http://api.beatport.com/catalog/3/most-popular)，它应该返回一些 JSON，然后从中解析出某些信息。

我将如何在 Actionscript 3 中执行此操作？我更关心如何将数据提供给 JSON 解析器，而不是解析 JSON，因为似乎有很多关于解析 JSON 的问题。我想在 AS3 中执行此操作的原因是我设置了 3D Flash 可视化，我想获取这些数据，解析出相关位，然后在可视化中显示解析的位。

如果有更简单的方法可以用另一种语言来实现，我愿意接受除 AS3 之外可以轻松与 Flash 集成的任何其他方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T18:34:28.850

1.  添加`corelib.swc`到您的库路径。

2.  导入 JSON 库：`import com.adobe.serialization.json.JSON;`

3.  使用如下代码调用您的服务：

    ```
    var request:URLRequest=new URLRequest();
    request.url=YOUR_ENDPOINT
    request.requestHeaders=[new URLRequestHeader("Content-Type", "application/json")];
    request.method=URLRequestMethod.GET;
    var loader:URLLoader=new URLLoader();
    loader.addEventListener(Event.COMPLETE, receive);
    loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, notAllowed);
    loader.addEventListener(IOErrorEvent.IO_ERROR, notFound);
    loader.load(request);

    protected function receive(event:Event):void
    {
         var myResults:Array=JSON.decode(event.target.data);
    } 
    ```

4.  用 解析结果`JSON.decode(results)`。

as3corelib 在这里维护：[https](https://github.com/mikechambers/as3corelib#readme) ://github.com/mikechambers/as3corelib#readme 。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-12T18:34:21.583

或者，如果您使用 Flash Player 11 或 AIR 3.0 或更高版本，您可以使用内置 JSON 对象来解码您的 JSON。这是一个顶级对象，因此您甚至不需要导入任何东西，只需执行以下操作：

```
var decoded : Object = JSON.parse(loadedText); 
```

请参阅：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/JSON.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T18:31:35.917

我相信[as3corelib](https://github.com/mikechambers/as3corelib)有一个 JSON[序列化](https://github.com/mikechambers/as3corelib/blob/master/src/com/adobe/serialization/json/JSONEncoder.as)器和[反序列化器](https://github.com/mikechambers/as3corelib/blob/master/src/com/adobe/serialization/json/JSONDecoder.as)

您可以使用它们而不是重新发明轮子并重新编写解析逻辑。

# c# - ldstr 是否在内部实现 newobj？

> ID：10111194
> 
> 赞同：6
> 
> 时间：2012-04-11T17:45:28.780
> 
> 标签：c#, .net, jit, cil, il

众所周知，字符串是隐式实例化的，这意味着我们不必使用`new`它来获取对 one 对象的引用。

正因为如此，我一直相信框架正在处理这个问题，因此如果我做这样的事情，我会得到相同的 IL：

```
String first = new String(new char[] {'a'});
string second = "a"; 
```

但是，第一行似乎是使用`newobj instance void [mscorlib]System.String::.ctor(char[])` 第二行完成的`ldstr "a"`。

因此，为了获得字符串引用，`ldstr`内部是否调用`newobj`以及我在哪里可以看到规范/详细信息来支持它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T18:05:06.170

`ldstr`[根据文档](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldstr.aspx)为您提供对文字字符串的引用（请记住，文字字符串默认情况下是实习的，因此它们只创建一次）。第一条语句按预期创建了`string`使用`newobj`指令的常规实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:05:41.953

`string`只需遵循*引用*对象类型的基本准则，这就是`new` 您看到的原因`newobj`。

事实上，如果你尝试写这样的东西，它不会生成`newobj`：

```
int a = new int();
a = 2;  
Console.WriteLine(a); 
```

生成的 IL 将是

```
IL_0000:  ldc.i4.0    
IL_0001:  stloc.0     
IL_0002:  ldc.i4.2    
IL_0003:  stloc.0     
IL_0004:  ldloc.0     
IL_0005:  call        System.Console.WriteLine 
```

如果你只写

```
int a = 2;  
Console.WriteLine(a); 
```

结果 IL 将是

```
IL_0000:  ldc.i4.2    
IL_0001:  stloc.0     
IL_0002:  ldloc.0     
IL_0003:  call        System.Console.WriteLine 
```

从分配的角度来看没有区别（自然有遗漏的行），因为我们在谈论值类型。

# gwt - 测试 GWT 覆盖类型

> ID：10111198
> 
> 赞同：0
> 
> 时间：2012-04-11T17:45:41.347
> 
> 标签：gwt, testing, overlays

我正在使用 GWT 覆盖类型，但不确定如何对其进行测试。我想以某种方式确保我的 Overlay 对象访问器与序列化为 JSON 的类中的字段名称匹配。

例如

```
//Class to be serialized to JSON
public class SoCool1 implements SoCool
{
  private String myString;

  public String getMyString()
  {
    return myString;
  }
}

//Overlay class
public class SoCool2 extends JavaScriptObject implements SoCool
{
  public final native String getMyString() /*-{
    return this.myString;
  }-*/;
} 
```

如何测试 SoCool2 本机方法返回是否与 SoCool1 中的字段匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:27:27.267

如果您想要端到端测试，请使用 servlet 将您的对象序列化为 json（`<servlet>`在您的 test 中放置一个元素`*.gwt.xml`）并从您的 GWTTestCase 中调用它，并将其反序列化为覆盖。

# iphone - 是否可以在开发 iphone 上查看存储在 Core Data 中的数据？

> ID：10111201
> 
> 赞同：4
> 
> 时间：2012-04-11T17:45:49.350
> 
> 标签：iphone, sqlite, core-data

有没有办法通过 xcode 或其他方式从开发 iphone 中获取/查看 coredata db（sqlite 存储）？虽然我已经能够检查通过我的 Mac 上的模拟器创建的数据库，但我想验证实际手机上的内容（无需在应用程序中创建调试视图等），因为我正在读取传感器数据并将其存储在 coredata 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:19:58.297

是的，您可以使用 Xcode 管理器。选择您的手机，然后选择应用程序，您可以将文件从/导入沙箱 [http://developer.apple.com/library/ios/recipes/xcode_help-devices_organizer/articles/copy_app_data_from_sandbox.html#//apple_ref/doc /uid/TP40010392-CH14-SW1](http://developer.apple.com/library/ios/recipes/xcode_help-devices_organizer/articles/copy_app_data_from_sandbox.html#//apple_ref/doc/uid/TP40010392-CH14-SW1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:15:15.177

我不确定是否有官方方法可以做到这一点，但我使用了一款名为 iExplorer 的软件，以前称为 iPhone Explorer。[http://www.macroplant.com/iexplorer/](http://www.macroplant.com/iexplorer/)

然后，您可以像模拟器一样浏览 Apps 目录并找到您的应用程序并转到文档目录并获取 sqlite 文件。

希望这可以帮助

# css - CSS 到边框完全不能在 Internet Explorer 中正常工作

> ID：10111206
> 
> 赞同：0
> 
> 时间：2012-04-11T17:46:04.543
> 
> 标签：css

我正在使用以下 CSS 来`<tr>`完全边框。

```
<style type="text/css">
    tr.top td { border-top: thin solid black; }
    tr.bottom td { border-bottom: thin solid black; }
    tr.row td:first-child { border-left: thin solid black; }
    tr.row td:last-child { border-right: thin solid black; }
</style> 
```

它在 Mozilla Firefox 中完美运行，但在 Internet Explorer 中，它没有最后一个右边的边界，`<td>`如下面的快照所示。

在 Firefox 中，它显示下表。

![在此处输入图像描述](../Images/e810510ca6b370e0887f878f94372b56.png)

然而，在 Internet Explorer(8) 中，它显示的表格如下。

![在此处输入图像描述](../Images/ca4c19b0bd015fe921118d7fdbae71de.png)

表示在上面的 CSS 中，这个 CSS 类`tr.row td:last-child { border-right: thin solid black; }`在 IE 中不起作用。解决方案是什么？我正在使用 IE 8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T17:54:31.697

IE 8 不支持`:last-child`伪类 (CSS 3)，但它支持`:first-child`(CSS 2.1)

[CSS 兼容性和 Internet Explorer](http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx)

最后一个单元格需要一个不同的选择器，例如自定义类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T17:56:29.810

顺便说一句，如果您在 css 文件中声明边框，而是在样式之后，在 TD 标记中声明呢？有人告诉我 IE8 的边框渲染存在一些错误。把它贴在这里，看看它是否有效。

另一个疑问，你为什么不使用 1px 而不是瘦！？

# python - Python 3 中的不可变字典：如何使 keys()、items() 和 values() 字典视图不可变

> ID：10111212
> 
> 赞同：14
> 
> 时间：2012-04-11T17:46:33.380
> 
> 标签：python, dictionary, python-3.x, immutability

**简短版本：在 Python 3 中覆盖`dict.keys()`和朋友防止自己意外修改我的（假定的）不可变字典的最佳方法是什么？**

在最近的一个问题中，我询问了有关[在 Python 中散列不可变字典的](https://stackoverflow.com/questions/10045562/hashing-an-immutable-dictionary-in-python)问题。从那时起，我构建了一个不可变的、可散列的字典，我对此很满意。然而，我意识到它有一个漏洞：由,返回的[字典视图](http://docs.python.org/py3k/library/stdtypes.html#dictionary-view-objects)，仍然允许自己意外地改变我的（假定的）不可变字典。`keys()``items()``values()`

Stack Overflow 上我能找到的关于字典视图的唯一问题是[Python 创建自己的字典子集的字典视图](https://stackoverflow.com/questions/9329537/python-create-own-dict-view-of-subset-of-dictionary)，但这似乎与我的问题没有太大关系，以及[“冻结字典”的答案是什么?](https://stackoverflow.com/questions/2703599/what-would-be-a-frozen-dict) 似乎没有进入压倒一切`keys()`等。

这样做会阻止我意外修改不可变字典的键吗？

```
class FrozenCounter(collections.Counter):
    "Model an hashable multiset as an immutable dictionary."
    # ...
    def keys(self):
        return list(super().keys())
    def values(self):
        return list(super().values())
    def items(self):
        return list(super().items()) 
```

* * *

## 我从答案中收集到的内容

主要是看不懂。

dictviews 不能修改 dicts。在[Python 3 文档](http://docs.python.org/py3k/library/stdtypes.html#dictionary-view-objects)中，我误读了“它们提供了字典条目的动态视图，这意味着当字典更改时，视图会反映这些更改”，就像“当视图更改时，字典会反映这些更改”一样。显然这不是文档所说的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T18:03:11.493

在 Python 2.x 中，视图不允许你改变你的底层对象：

```
>>> a = { 'a' : 1 }
>>> a.keys()[0] = 'b'
>>> a
{'a': 1}
>>> a.values()[0] = 'b'
>>> a
{'a': 1} 
```

在 Python 3.x 中，变异视图会产生 TypeError：

```
>>> a = { 'a':1}
>>> a.keys()[0] = 'b'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'dict_keys' object does not support item assignment 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:01:27.093

这可能是一个坏主意，因为它打破了这些方法首先返回视图的假设，并将它们替换为不再更新以匹配底层字典的可变对象。

你的观点如何改变你的字典？视图不支持项目分配或删除，所以我不相信它们可以改变底层字典。

# java - 使用JFrame在java中获取文本区域

> ID：10111213
> 
> 赞同：-1
> 
> 时间：2012-04-11T17:46:34.703
> 
> 标签：java, swing, textarea, jframe, jtextarea

我是 Java 新手，我想知道如何从主类获取我的 textarea？

这是我的代码：

```
public static void main(String[] args) {
    UIManager.put("swing.boldMetal", Boolean.FALSE);

    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();

        }
    });
}

private static void createAndShowGUI() {
    frame = new JFrame("Frame");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    GuiManager animator = new GuiManager();

    frame.add(animator, BorderLayout.CENTER);

    // Display the window.
    frame.pack();
    frame.setSize(800, 500);
    frame.setVisible(true);
} 
```

和 GuiManager：

```
public GuiManager() {
    setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));

       // .............

    // Create Scrolling Text Area in Swing
    JPanel panelLabel = new JPanel(); 
    panelLabel.setLayout(new FlowLayout());     // No content pane for JPanel.
    JPanel panel = new JPanel(); 
    panel.setLayout(new FlowLayout());     // No content pane for JPanel.

    JLabel ta1Label = new JLabel("Label One", JLabel.LEFT);
    ta1Label.setAlignmentX(Component.LEFT_ALIGNMENT);

    JTextArea ta = new JTextArea("", 10, 30);
    ta.setLineWrap(true);
    JScrollPane sbrText = new JScrollPane(ta);
    sbrText.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

    JLabel ta2Label = new JLabel("Label2", JLabel.RIGHT);
    ta2Label.setAlignmentX(Component.RIGHT_ALIGNMENT);

    JTextArea ta2 = new JTextArea("", 10, 30);
    ta2.setLineWrap(true);
    JScrollPane sbrText2 = new JScrollPane(ta2);
    sbrText2.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

    panelLabel.add(ta1Label);
    panelLabel.add(ta2Label);
    panel.add(sbrText);
    panel.add(sbrText2);

    // Put everything together.
    add(panelLabel);
    add(panel);
    setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));

} 
```

我的目标是将输出重定向到这些 textarea，对于某些输出我需要重定向到左侧的 textarea，但有时我需要在右侧的 textarea 上输出。这样做的最佳解决方案是什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:36:12.750

您想要访问的所有内容似乎都在 GuiManager 中。但是，您将它的声明放在一个方法中。这意味着它成为一个局部变量。一旦方法完成了它的代码，变量就消失了，不能再访问了。

修复？只需将其提供给所有其他类即可。

```
public static GuiManager animator = new GuiManager(); 
```

将它放在为该类声明所有其他变量的位置，然后取出位于“createAndShowGUI()”方法中的变量。

# android - android如何解析json

> ID：10111214
> 
> 赞同：-1
> 
> 时间：2012-04-11T17:46:34.993
> 
> 标签：android, json

```
 public void HelloWord {
       for (int i = 0; i < 20; i++) {
             Log.d("Great");
       }
    } 
```

上面的代码不起作用，为什么？我尝试获取值名称有人知道问题出在哪里吗？

> org.json.JSONException：值...链接内容...在 org.json.JSON.typeMismatch 在 org.json.JSONArray。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:29:41.280

我更喜欢使用[GSON 库](http://code.google.com/p/google-gson/)，因为它是一个快速有效的 JSON 解析器。一旦添加到项目中，您将需要创建类来表示返回的数据。然后，您可以调用单个函数为您创建对象：

```
gson.fromJson(); 
```

可以在[http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)找到一篇关于 GSON 使用的非常好的文章- 它甚至使用 Twitter 作为示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:04:46.067

我认为您缺少 JSON 的工作方式。里面的任何东西`{}`都是一个对象，而`[]`指定一个数组。所以 twitter 提要的根是 JSONObject，而不是 JSONArray：

尝试更多类似的东西：

```
JSONObject obj = new JSONObject(mStringBuilder.toString());
JSONObject trends = obj.getJSONObject("trends");
JSONArray today = trends.getJSONArray("2012-04-10");
for (int i = 0; i < today.length(); i++) {
  JSONObject tag = today.getJSONObject(i);
  String name = tag.getString("name");
  // do whatever with name
} 
```

更容易，并且更清楚它是如何工作的。JSONObjects 是字典，在键和值之间具有简单的映射 - 每个 Object ( `{}`) 可以包含更多对象，或者数组 ( `[]`) 可以包含简单整数或更多对象

# php - mysql数据库插入将所有ID更改为4294967295

> ID：10111215
> 
> 赞同：5
> 
> 时间：2012-04-11T17:46:45.563
> 
> 标签：php, mysql, database

我的数据库发生了一些非常奇怪的事情。我正在使用 PHP 将数据插入到我的数据库中，过去 2 年我一直在这样做，没有任何问题。当客户在我的网站上付款时，我将来自该交易的所有数据存储在我的数据库中。每笔交易都有一个唯一的“transaction_id”。当我将付款信息插入数据库时​​，除了“transaction_id”之外的所有信息都正确插入。所有交易都被赋予“4294967295”的“transaction_id”。所以我做了一些测试。这是我所做的：

1）我将“transaction_id”回显到我的屏幕上，看看会说什么。结果是被回显的“transaction_id”是正确的。这不是重复的“4294967295”。但是，当我查看我的数据库时，它显示“4294967295”。

2）这次我决定将查询回显到我的网络浏览器。查询是正确的。在查询中，正确的“transaction_id”在查询中。但是，当我查看我的数据库时，它显示“4294967295”。

我有 3 个不同的页面供客户付款。所有 3 个页面于 2012 年 4 月 6 日开始执行此操作。这些页面都没有被修改。我已经超过 2 年没有修改这些页面了。任何帮助是极大的赞赏！

```
$query = "INSERT INTO payments (customer_id, transaction_id, invoice_number, authorization_code, subscription, subscription_id, avs_result, cvv_result, amount, full_tuition, payment_date, ip_address) VALUES ({$_SESSION['customer_id']}, {$_SESSION['transaction_id']}, {$_SESSION['invoice_number']}, '{$_SESSION['authorization_code']}', '{$_SESSION['subscription']}', {$_SESSION['subscription_id']}, '{$_SESSION['avs_result']}', '{$_SESSION['cvv_result']}', {$_SESSION['amount']}, {$_SESSION['full_tuition']}, '{$_SESSION['payment_date']}', '{$_SESSION['ip_address']}')" ;
$result = mysqli_query($dbc, $query) OR die ('<p>There was an error with the INSERT payments query.: ' . mysqli_error($dbc) . '<br />Query:' . $query . '</p>') ;

echo '<p>Transaction ' .  $_SESSION['transaction_id'] . ' has been <font color="green">APPROVED</font> by the system.</p>' ;

echo '<br /><br />' ;

echo '<p>Below is a summary:</p>' ;
echo '<p>Transaction ID: ' .  $_SESSION['transaction_id'] . '<br />
Payment Method: XXXX<br />
Amount: $' . $amount . '<br />
Customer Name: ' . $_SESSION['first_name'] . ' ' . $_SESSION['last_name'] . '<br />
</p>' ;

echo "<p>Note: Please do NOT click the browser's Back button to enter a new transaction.</p>" ;

echo $query ; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T17:50:43.217

您的数字大于数据库中的字段可以处理...

4294967295 是 32 位可以容纳的最大数字，您的事务 ID 现在大于您的数据库可以容纳的数字字段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T17:54:17.173

出色地调查问题并在您的问题中报告结果！

4294967295 是 mysql 可以容纳的最大 INT，因此高于该值的事务 ID 将存储为 4294967295。要解决此问题，您可以将列类型更改为 BIGINT：`modify column transaction_id bigint`

这应该在保留所有数据的同时转换列类型，但最好先备份数据库以防万一！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T17:50:15.093

4294967295 方便地是 2^32-1 - 32 位无符号整数的最大值。看起来你给它的任何 transaction_id 都太大了，所以它溢出了，MySQL 在这种情况下的行为是将它设置为最大值。

另外，如果你使用 MySQLi，你应该考虑使用准备好的语句。我不确定您的会话变量的值是什么，但我怀疑它们未转义，因此它们需要转义或使用准备好的语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T17:52:21.770

将数据类型更改`transaction_id`为`BIGINT`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-24T11:31:06.513

另一种选择是查看表的**自动增量值**。就我而言，它是 4294967295 ：/

# .net - 如何使用 For 循环创建数百个单选按钮？

> ID：10111218
> 
> 赞同：1
> 
> 时间：2012-04-11T17:46:51.000
> 
> 标签：.net, winforms, c++-cli, radio-button

我正在尝试在窗口窗体上使用 for 循环创建许多单选按钮。我面临的问题是为每个单选按钮生成一个变量名。最初，我计划为每个单选按钮添加不同的数字，例如 0001 、 0002 。但是，我不能这样做，因为变量名不是字符串。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T20:24:46.597

使用数组：

```
RadioButton[] rb = new RadioButton[100];
for (int i = 0; i < 100; i++)
{
    rb[i] = new RadioButton();
    rb[i].Location = new Point(0, i * 20);
    rb[i].Text = "Your text here";
    groupBox1.Controls.Add(rb[i]);
    //etc.
} 
```

这是在 C# 中，因为我不知道 VC++，但也许它可以帮助你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T04:42:11.743

尝试这个 ：

```
 var rb = new List<RadioButton>();
        bool Satisfied = false; int location =0;

        while (!Satisfied)
        {
            rb.Add(new RadioButton() { Location = new Point(0, location * 20), Text = location.ToString() });
            location++;
            Satisfied = rb.Count > 100 ? true : false;
        }

        foreach ( object r in rb)
        {
            this.Controls.Add((RadioButton)r);
        } 
```

# java - @Autowired 设置的一些对象总是为空，其他的都可以

> ID：10111220
> 
> 赞同：1
> 
> 时间：2012-04-11T17:47:02.973
> 
> 标签：java, spring, autowired, springsource

我一直在做我的第一个 Spring 项目，但遇到了一个烦人的问题。

我有一个名为“UsernameService”的类，它在 dispatcher-servlet.xml 中配置为 bean：

```
<bean id="usernameService" class="service.UsernameService" scope="session" >
    <aop:scoped-proxy />
</bean> 
```

当这个 bean 在我的一个类中创建时（bean 定义：）

```
<bean id="testController" class="controller.TestController" /> 
```

像这样：

```
 @Autowired
UsernameService uns; 
```

它工作得很好。但是，当我尝试在另一个类中做同样的事情时，LogController：

```
<bean id="logController" class="controller.LogController" /> 
```

然后它不起作用，我收到以下错误：

> 严重：servlet [dispatcher] 在路径 [/flexitime] 的上下文中的 Servlet.service() 引发异常 [请求处理失败；嵌套异常是 java.lang.NullPointerException]，其根本原因是 java.lang.NullPointerException

我已经设法（我相信）将此错误归因于 uns 从未真正设置/创建并在 LogController 中保持为 null 的事实。

我已经对此进行了广泛的谷歌搜索，并找到了许多“解决方案”，但是到目前为止，它们都没有奏效。

谢谢！詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:19:24.010

将`auto-wire`属性添加到您的 bean：

```
<bean id="usernameService" class="service.UsernameService" scope="session" autowire="byName">
    <aop:scoped-proxy />
</bean> 
```

# c# - 从客户端 Web 服务返回的 NULL

> ID：10111221
> 
> 赞同：0
> 
> 时间：2012-04-11T17:47:03.480
> 
> 标签：c#, wcf, soap

我正在开发一个客户端应用程序，它在 c# 中使用 3rd 方 Web 服务（soap）。肥皂以多个“供应商”节点响应。但是，c# 中的数组包含 NULL 值。基本上是变量；

```
SuppliersType[] Suppliers 
```

其元素中有 NULL 值。不过，其他变量（例如响应代码）已被填充。供应商数组应填充 Web 服务返回的节点。我正在使用 VS 在添加服务引用时生成的类。我使用以下方法调用课程：

```
ServiceReference2.SuppliersType[] Suppliers;
Client.SupploerProfiles(DTStamp,ID, out ResponseCode, out ResponseMessage, out Suppliers); 
```

我已经包含了 WSDL 和 VS 生成的类的片段。非常感谢任何帮助！提前致谢！肥皂回应：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:tpw="http://www.example.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema">
<soapenv:Body>
<tpw:SupplierProfilesResponse>
<DateTimeStamp>2011-01-01 22:22:212</DateTimeStamp>
<ResponseCode>0</ResponseCode>
<ResponseMessage>Success</ResponseMessage>
<Suppliers>
<SupplierName>A</SupplierName>
<SupplierNumber>5559875421</SupplierNumber>
</Suppliers>
<Suppliers>
<SupplierName>B</SupplierName>
<SupplierNumber>5559875421</SupplierNumber>
</Suppliers>
<Suppliers>
<SupplierName>C</SupplierName>
<SupplierNumber>5559875421</SupplierNumber>
</Suppliers>
</tpw:SupplierProfilesResponse>
</soapenv:Body>
</soapenv:Envelope> 
```

WSDL 中供应商类型的定义

```
<xsd:element name="SupplierProfilesResponse">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="DateTimeStamp" type="xsd:dateTime" nillable="true">
</xsd:element>
<xsd:element name="ResponseCode" type="xsd:int" nillable="true">
</xsd:element>
<xsd:element name="ResponseMessage" type="xsd:string" nillable="true">
</xsd:element>
<xsd:element name="Suppliers" type="tns:SuppliersType" minOccurs="0" maxOccurs="7">
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:complexType name="SuppliersType">
<xsd:sequence>
<xsd:element name="SupplierName" type="xsd:string" nillable="true"></xsd:element>
<xsd:element name="SupplierNumber" type="xsd:string" nillable="true"></xsd:element> 
</xsd:sequence>
</xsd:complexType>
</xsd:schema>   
</wsdl:types> 
```

  VS 生成的类的片段：  

```
[System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://www.example.com")]
public partial class SuppliersType : object, System.ComponentModel.INotifyPropertyChanged
{
private string supplierNameField;
private string supplierNumberField;

[System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable = true, Order = 0)]
public string SupplierName
{
get
{
return this.supplierNameField;
}
set
{
this.supplierNameField = value;
this.RaisePropertyChanged("SupplierName");
}
}

[System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified, IsNullable = true, Order = 1)]
public string SupplierNumber
{
get
{
return this.supplierNumberField;
}
set
{
this.supplierNumberField = value;
this.RaisePropertyChanged("SupplierNumber");
}
}

public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

protected void RaisePropertyChanged(string propertyName)
{
System.ComponentModel.PropertyChangedEventHandler propertyChanged = this.PropertyChanged;
if ((propertyChanged != null))
{
propertyChanged(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:38:22.407

使用像 Fiddler 这样的嗅探器来查看返回的数据

您还可以使用 Disco 从 URL 获取最新的 WSDL 和相关文件。然后您可以使用 svcutil 构建代理类和配置段。这将有助于错误捕获和您可能需要的其他缓冲区调整

我也看不到 SuppliersType 是一个数组或一个集合。在 WSDL 链接中，它是具有 2 个元素 SupplierName 和 SupplierNumber 的复杂类型。你确定你使用的是正确的方法吗？尝试迪斯科以获得所有类型。

# jquery - 如何在 JQuery 中分配/设置属性

> ID：10111230
> 
> 赞同：2
> 
> 时间：2012-04-11T17:47:53.067
> 
> 标签：jquery

我正在研究其他开发人员的代码，而且我不是 JQuery 专家，所以我几乎不需要帮助。

如果我有多个employeeId，则下面的代码可以正常工作，但是由于scanrio 已经更改并且我将只有一个employeeId，所以我的问题是如何`each function`用单个节点替换它。

每个/地图：

```
 var employeeid = $("#<%= gridview1.ClientID %> [id*='myDiv']").map(function () { return $(this).attr("EmployeeId"); }).get().join(','); 
```

我尝试写：

```
 var employeeid = 'A23433'; 
```

但问题是我需要一种方法来设置属性（EmployeeId）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T17:50:45.580

设置一个属性，如：

```
$(this).attr("EmployeeId", YOURNEWVALUE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:52:57.340

这是 jQuery 属性访问器：

```
$(this).attr("EmployeeId", attributeValue); 
```

# templates - 如何让 Jade 停止 HTML 编码元素属性，并生成文字字符串值？

> ID：10111232
> 
> 赞同：39
> 
> 时间：2012-04-11T17:47:57.977
> 
> 标签：templates, underscore.js, pug, html-encode, string-literals

**更新**Jade v0.24.0 使用`!=`属性语法修复了这个问题。`option(value!='<%= id %>')`

* * *

我正在尝试`<option>`使用玉构建一个，其中选项的值是一个 UnderscoreJS 模板标记：`<%= id %>`但我无法让它工作，因为玉正在将我的标记文本转换为`&lt;= id &gt;`.

这是我的 Jade 标记：

```
script(id="my-template", type="text/template")
  select(id="type")
    &lt;% _.each(deviceTypes, function(type){ %>
    option(value='&lt;%= type.id %>') <%= type.name %>
    &lt;% }) %> 
```

我希望它产生这个html：

```
<script id="my-template" type="text/template">
  <select id='type'>
    <% _.each(deviceTypes, function(type){ %>
    <option value="<%= type.id %>"> <%= type.name %> </option>
    <% }) %>
  </select>
</script> 
```

但我得到的是：

```
<script id="my-template" type="text/template">
  <select id='type'>
    <% _.each(deviceTypes, function(type){ %>
    <option value="&lt;%= type.id %&gt;"> <%= type.name %> </option>
    <% }) %>
  </select>
</script> 
```

请注意输出行中非常细微的差异`<option>`......`value`选项的属性已被 HTML 编码。

如何防止 Jade 对这个值进行 HTML 编码？我需要它来产生文字值，就像它对选项的文本所做的那样。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-10-03T14:07:49.403

Derick 已经提到 Jade 在更新中添加了 unescape HTML 编码的新功能，但我想为可能不认识的人添加一些附录。

```
- var html = "<script></script>"
| !{html} <-- Escaped
| #{html} <-- Encoded 
```

来自[https://github.com/visionmedia/jade](https://github.com/visionmedia/jade)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-01-10T23:48:02.377

此功能已[添加到 Jade](https://github.com/visionmedia/jade/commit/89b67964be0c28fbb669d3953ef132f22de07a72)中。`!=`如果要取消转义属性值，只需使用运算符：

```
script#my-template(type='text/template')
  a(href!='<%= url =>') Clicky clicky... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-11T18:09:21.093

在撰写本文时，我不相信有办法。看到这个问题： [https ://github.com/visionmedia/jade/issues/198](https://github.com/visionmedia/jade/issues/198)

我最终使用 | 进入原始 HTML 来解决它。字首。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-24T17:36:17.083

所以我遇到了类似的问题，我想在我的一个 Jade 视图中创建一个下划线模板。在标签中设置`selected`属性所需的下划线模板。`<option>`

最初我尝试让下划线返回“选定”或“”。不幸的是，[Jade 没有办法显示没有值的属性，](https://stackoverflow.com/questions/11020142/jade-element-attributes-without-value)也没有办法显示非转义属性名称（下划线位返回时没有引号）。

幸运的是，您可以取消转义属性的*值*，同时保留引号。

在此示例中，我根据与字符串值匹配的所有者类型来选择下拉列表的值。我设置了一个辅助函数，所以我不必手动转义引号。

```
- var checkType = function(type) { return "<%= contact.type == '" + type + "' %>" };

.clearfix
  label Title:
  .input
    select(type="text", name="contact[title]", class="new-title")
      option(value="") Choose Title
      option(value="manager", selected="#{ checkType('manager') }") Manager
      option(value="member", selected="#{ checkType('member') }") Member
      option(value="owner", selected="#{ checkType('owner') }") Owner
      option(value="president", selected="#{ checkType('president') }") President
      option(value="individual", selected="#{ checkType('individual') }") Individual
      option(value="main_contact", selected="#{ checkType('main_contact') }") Main Contact 
```

根据某些人的说法，您应该可以使用`!{}`这里来完全避免所有编码 ( `<, >, etc.`)，但这不适用于我的 Jade 版本。我正在使用`"^0.30"`，当前版本是`1.x`.

如果有人可以使用最新版本的 Jade 验证`!{}`在这种情况下确实有效，我会更新我的答案。

# powershell - 如何用上一行中的单词填写文本文件中的空格？

> ID：10111234
> 
> 赞同：1
> 
> 时间：2012-04-11T17:48:04.180
> 
> 标签：powershell, sed, grep

我有一个大的报告文件（大约 20MB），看起来像这样：

```
 586  700006207        8,622.09  896 
                       9,882.82  896 
 777   68607099          900.00  896 
 587  800006207        7,059.22  896 
                         959.02  896 
                         697.87  896 
   7  280667985             .00  899 
```

如果值与上面的行相同，则在第 1 列和第 2 列有空白。我需要 grep/sed/powershell 单线器的帮助来填补空白，使其看起来像这样：

```
 586  700006207        8,622.09  896 
 586  700006207        9,882.82  896 
 777   68607099          900.00  896 
 587  800006207        7,059.22  896 
 587  800006207          959.02  896 
 587  800006207          697.87  896 
   7  280667985             .00  899 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:49:49.900

这可能对您有用：

```
sed ':a;$!N;/^\(\( [0-9]\+ *[0-9]\+\).*\n\)\( \{15\}\)/{s//\1\2/;ta};P;D' file 
```

根据您提供的数据，该行始终以空格开头。如果不是这种情况，那么：

```
sed ':a;$!N;/^\(\([0-9]\+ *[0-9]\+\).*\n\)\( \{14\}\)/{s//\1\2/;ta};P;D' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T19:09:37.343

假设没有空行并且列间分隔符是空格，则以下工作（在 Ubuntu/bash shell 中测试，使用 GNU sed）...

```
sed -r "/^ {15}/{G; s/^ {15}(.*)\n(.{15}).*/\2\1/};h" "report" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T19:35:59.257

假设您需要保持间距并且前 2 列是前 15 个字符：

```
awk '
    NF==2 {print fill substr($0, 16); next}
    {print; fill = substr($0, 1, 15)}
' 
```

# git - 如何在 EGit 中创建适当的新本地和远程分支组合？

> ID：10111236
> 
> 赞同：10
> 
> 时间：2012-04-11T17:48:06.183
> 
> 标签：git, egit

我想在 EGit 中执行以下操作：

```
$ git checkout -b newbranch
$ git push -u origin newbranch 
```

这给了我一个新的本地分支，将其推送到上游服务器并**创建正确的跟踪参考**。我如何在 EGit 中做同样的事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T18:17:43.123

第一次操作可以阅读EGit手册《[创建新的本地分支](http://wiki.eclipse.org/EGit/User_Guide#Creating_a_New_Local_Branch)》

> 选择团队 > 切换到... > 新分支

![新分支对话框](../Images/84ab10ce98d1a7a507625ea94fb8d271.png)

对于推送，请参阅[Vogella 的 Egit 教程](http://www.vogella.com/articles/EGit/article.html#github_push)，以及“[推送参考规范](http://wiki.eclipse.org/EGit/User_Guide#Push_Ref_Specifications)”

![推一个分支](../Images/272bff1747f2af0d56dff2c29b0280f6.png)

注意：[robinst](https://stackoverflow.com/users/305973/robinst)已打开[bug 378960](https://bugs.eclipse.org/bugs/show_bug.cgi?id=378960) “允许在推送分支向导中配置上游”（在“ [EGit - 创建分支时正确设置远程跟踪](https://stackoverflow.com/a/10619912/6309)”中提到）。

> 问题是这（在推送时配置上游）在首次推送分支时尚未自动完成。
> 
> 现在您必须在 Git Repositories 视图中右键单击分支并选择“ `Configure Branch`”，您可以在其中设置上游配置。

* * *

注意：[错误 378960在](https://bugs.eclipse.org/bugs/show_bug.cgi?id=378960)[Egit 3.2](https://wiki.eclipse.org/EGit/New_and_Noteworthy/3.2#Features)中已标记为已解决（2014 年 2 月）：

> 推送分支/初始推送向导简化了推送分支，还**允许为推送操作创建的新分支进行上游配置**：

![https://wiki.eclipse.org/images/6/6f/Egit-3.2-PushBranchWizard.png](../Images/39c5b92936d0806c388bd6b57e10482e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-22T14:54:20.663

创建新分支的 UI 位置对我来说似乎很奇怪。

在`Git Repository`选项卡中，选择要从中创建分支的分支`right click`，然后您将看到`Create Branch`

[![在此处输入图像描述](../Images/d6c3be14f78ec0a5f2fef3bc8454aee3.png)](https://i.stack.imgur.com/LsHpu.png)

# php - 从 webservices xml 文件读取错误

> ID：10111240
> 
> 赞同：2
> 
> 时间：2012-04-11T17:48:32.740
> 
> 标签：php, xml

我正在尝试使用一个小的 php 脚本从 webservices xml 文件到 SQL 数据库中获取客户端的产品列表，但我似乎无法让它工作。

相关代码如下：

```
$c = 0;  
...
$xml = simplexml_load_file($completeurl);
$listingsArray = $xml->listings->listing;

foreach($listingsArray as $listing){
    $addition[0] = $listing[$c]->type;
    $addition[1] = $listing[$c]->condition;
    //etcetera
    c = c + 1;
} 
```

XML 文件的格式如下：

```
<inventory>
    <listings>
        <listing>
            //tags for type, condition, etc
        </listing>
    </listings>
</inventory> 
```

$completeurl 是一个包含 xml 文件的 url 的字符串 $addition 是一个在代码前面定义的数组

我已经为此工作了一段时间，但我似乎无法弄清楚我的代码中的错误在哪里。我遇到的问题是 $listingsArray 应该有接近 100 个元素，但不断出现 0。有人知道我做错了什么吗？

编辑：我尝试改变

```
$listingsArray = $xml->listings->listing; 
```

到

```
$listingsArray = $xml->listings; 
```

但是空字符串仍然被写入 $addition 数组。但是，listingsArray 的 var_dump 显示所有信息都在其中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:53:57.923

如果您想要每个列表，我相信您的孩子太深了。

`$listingsArray = $xml->listings->listing;`

应该是

```
$listingsArray = $xml->listings;

foreach($listingsArray as $listing){
    $addition[0] = $listing[$c]->type;
    $addition[1] = $listing[$c]->condition;
    //etcetera
} 
```

另外 $c 是什么？它还有助于发布您的确切错误。在调试时插入 var_dumps 非常有帮助。如果您认为探针正在`$listingArray` 打印出来，看看它是否包含您想要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:54:09.737

改变

```
$listingsArray = $xml->listings->listing; 
```

到

```
$listingsArray = $xml->listings; 
```

应该解决问题。您将 $listingsArray 设置为列表数组，然后 foreach 尝试下一个级别

# android - 使用 Android NDK 的 x86 工具链编译时出现未定义的 stdout、stderr 引用错误

> ID：10111244
> 
> 赞同：7
> 
> 时间：2012-04-11T17:48:50.577
> 
> 标签：android, android-ndk, digital-certificate, android-ndk-r7

我正在尝试使用 Android NDK 工具链编译本地库 libdigcert 之一。

如果我使用 arm 工具链一切正常，并且如果我将此库链接到我的可执行文件，我不会收到任何链接器错误。

如果我使用 x86 工具链，则会收到链接器错误，这些错误显示对 stdout 、 stderr 等的未定义引用。

我使用 nm 来读取两个 .a 文件（arm 和 x86）之间的差异，我看到 x86 文件的 stdout 未定义，而 arm .a 甚至没有提到 stdout 符号。

谁能指出我在这里缺少的东西？

# passwords - AJAX登录：检查密码，如何让它与md5一起工作

> ID：10111252
> 
> 赞同：0
> 
> 时间：2012-04-11T17:49:07.187
> 
> 标签：passwords, compare, md5

这是我的代码，它可以工作，除了密码，我将如何解决这个问题？我知道我应该用 md5 做点什么，但我找不到使用我的代码的解决方案。我真的需要让这个正确和安全，请协助

```
 //get the posted values
    $username=htmlspecialchars($_POST['user_name'],ENT_QUOTES);
    $password=htmlspecialchars($_POST['password'],ENT_QUOTES);

    $check_for_username = $mysqli->query("SELECT username FROM q4jli_users WHERE username='$username' AND password=MD5('$password')"); 
    if (mysqli_num_rows($check_for_username)) {     
        echo "yes";  

    } else {
        echo "no";                                                                           
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:58:09.773

首先，您需要确保用户的密码使用 MD5 加密到数据库中。如果没有，那么您可以使用以下代码：

```
$mysqli->query("INSERT INTO q4jli_users (username, password) VALUES ('$username', MD5('$password'))"); 
```

然后，当查看用户输入的密码是否正确时，需要将其加密为 MD5，然后在数据库中运行查询：

```
$check_for_username = $mysqli->query("SELECT username FROM q4jli_users WHERE username='$username' AND password=MD5('$password')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:02:44.783

MD5 已过时，不再是一种足够的密码加密方法。您应该使用更现代的加密算法来研究加盐哈希。

深思熟虑： [bcrypt](https://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage/6415#6415)

# sql - sql : 根据月份计算总生日蛾

> ID：10111261
> 
> 赞同：-5
> 
> 时间：2012-04-11T17:50:09.853
> 
> 标签：sql

我想编写一个查询来计算基于月份的总生日蛾。这是样本数据。两个人的生日是 1980 年 4 月。

如何编写此查询？

```
John    02/21/1980
Peter   02/22/1980
Lucy    04/21/1980

------ result -----
01/1980     0
02/1980     2
03/1980     0
04/1980     1
05/1980     0
..... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:07:59.967

您可以像这样循环每个月：

```
DECLARE @month INT 
DECLARE @year INT
DECLARE @result TABLE (MonthYear varchar(7),BirthdaysCount INT)
SET @month = 1
SET @year = 1980

WHILE(@month < 13)
  BEGIN
    INSERT INTO @result
    SELECT (CAST(@month as VARCHAR) + '/' + CAST(@year as VARCHAR)),
            COUNT(*)
    FROM test
    WHERE MONTH(birth) = @month AND YEAR(birth) = @year
    SET @month = @month + 1
  END

select * from @result 
```

见小提琴：[http ://sqlfiddle.com/#!3/20692/2](http://sqlfiddle.com/#!3/20692/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:05:30.227

在 MySQL 中，你会这样做：

```
select concat(month(dob), '/', year(dob)) monthYear, count(*) cnt from t
group by monthYear
order by year(dob), month(dob) 
```

但是，为了获得“缺失日期”，您必须生成数据，因为`01/1980`据我所知，它不在任何表格中。检查这个[答案](https://stackoverflow.com/questions/10034668/missing-days-from-sql-call-where-there-is-no-data/10081549#10081549)，看看如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:56:30.927

这个对于 sql-server 怎么样

```
create table #temp
(
    name varchar(50),
    DOB datetime
)

insert into #temp values ('john', '2/21/1980')
insert into #temp values ('peter', '2/22/1980')
insert into #temp values ('lucy', '4/21/1980')

select convert(varchar(2), MONTH(DOB)) + '/' + Convert(varchar(4), YEAR(DOB)) as [MM/YYYY]
    , count(*) as TotalCount
from #temp
group by convert(varchar(2), MONTH(DOB)) + '/' + Convert(varchar(4), YEAR(DOB))

drop table #temp 
```

编辑 - 这将为您获取表中日期中包含的日期的所有记录。它将使用表中的最小/最大日期来获取日期范围，然后使用此范围来获取每个月的生日计数：

```
create table #temp
(
    name varchar(50),
    DOB datetime
)

insert into #temp values ('john', '2/21/1980')
insert into #temp values ('peter', '2/22/1980')
insert into #temp values ('lucy', '4/21/1980')

;with cte as
(
    select min(DOB) as MinDate, max(DOB) as MaxDate
    from #temp
    union all
    SELECT dateadd(mm, 1, t.MinDate), t.MaxDate
    from cte t
    where dateadd(mm, 1, t.MinDate) <= t.MaxDate
)
select convert(varchar(2), MONTH(c.MinDate)) + '/' + Convert(varchar(4), YEAR(c.MinDate))
    , IsNull(t.TotalCount, 0) as TotalCount
from cte c
LEFT JOIN 
(
    SELECT convert(varchar(2), MONTH(DOB)) + '/' + Convert(varchar(4), YEAR(DOB)) as [MM/YYYY]
        , count(*) as TotalCount
    FROM #temp 
    group by convert(varchar(2), MONTH(DOB)) + '/' + Convert(varchar(4), YEAR(DOB))
) t
    on convert(varchar(2), MONTH(C.MinDate)) + '/' + Convert(varchar(4), YEAR(C.MinDate))
        = t.[MM/YYYY]

drop table #temp 
```

# wordpress - 从自定义分类中排除术语？

> ID：10111267
> 
> 赞同：1
> 
> 时间：2012-04-11T17:50:29.270
> 
> 标签：wordpress, taxonomy, custom-post-type

我有一个自定义帖子类型，其中设置了自定义分类法。

我想打印出帖子包含的类别（自定义分类），但排除一个。我找不到排除该类别的解决方案。这是我的代码，用于输出自定义帖子类型所在的类别列表：

```
<?php the_terms( $post->ID, 'critter_cat', 'Critter Type: ', ', ', ' ' ); ?> 
```

如何排除特定类别？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:13:01.143

您可以在 functions.php 文件中创建一个函数，该函数调用`get_the_terms`以将术语列表作为数组返回，然后删除您不想要的项目。

试试这个：

```
function get_excluded_terms( $id = 0, $taxonomy, $before = '', $sep = '', $after = '', $exclude = array() ) {
    $terms = get_the_terms( $id, $taxonomy );

    if ( is_wp_error( $terms ) )
        return $terms;

    if ( empty( $terms ) )
        return false;

    foreach ( $terms as $term ) {
        if(!in_array($term->term_id,$exclude)) {
            $link = get_term_link( $term, $taxonomy );

            if ( is_wp_error( $link ) )
                return $link;

            $excluded_terms[] = '<a href="' . $link . '" rel="tag">' . $term->name . '</a>';
            }
    }

    $excluded_terms = apply_filters( "term_links-$taxonomy", $excluded_terms );

    return $before . join( $sep, $excluded_terms ) . $after;
} 
```

然后像这样使用它：

```
<?php echo get_excluded_terms( $post->ID, 'critter_cat', 'Critter Type: ', ', ', ' ', array(667)); ?> 
```

# javascript - 回调函数中没有值的变量

> ID：10111268
> 
> 赞同：1
> 
> 时间：2012-04-11T17:50:32.723
> 
> 标签：javascript, jquery, callback

我对以下代码有一个奇怪的问题：

```
function getTrxData(trx,inputPar,outputPar,callback) {

var retorno = {};

var URL = '/XMII/Runner?Transaction=' + trx;

var params = "";
for(key in inputPar) 
    params = params + "&" + key + "=" + inputPar[key];

if(!outputPar) 
    outputPar = "*";    

if(params)
    URL = URL + params;

URL = URL + '&OutputParameter=' + outputPar;        

$.ajax({
    type: "GET",
    url: URL,
    async: true,
    success: function(data){
        retorno.datos = $.xml2json(data);
        retorno.tipo    = 'S';          // Success
        retorno.mensaje = "Datos obtenidos correctamente";      
        callback(retorno);
    },
    error: function(jqXHR, textStatus, errorThrown){
        retorno.tipo    = 'E';          // Error
        retorno.mensaje = "Error: " + textStatus;   
        callback(retorno);
    }
});
}

function crearSelect(trx,inputPar,outputPar,selectID,campoTextoXX,campoValor,valorDefault,callback2) {
// At this point campoTextoXX exists and has a value
getTrxData(trx,inputPar,outputPar,function(retorno2) {

            // At this point campoTextoXX is an object equal to callback2

    if(retorno2.tipo == 'E') {
        callback2(retorno2);
        return false;
    }

    var options = "";
    var selected = "";

    $.each(retorno2.datos.Rowset.Row, function(k,v) {
        if(valorDefault == v[campoValor]) {
            selected = " selected='selected'";
        } else {
            selected = "";
        }
        options = options + "<option value='" + v[campoValor] + selected "'>";
        options = options + v[campoTextoXX];    
        options = options + "</option>";
    });

    $("#" + selectID + " > option").remove();
    $("#" + selectID).append(options);

    callback2(retorno2);

}); 
```

}

电话是这样的：

```
crearSelect("Default/pruebas_frarv01/trxTest",{letra:  'V'},"*",'selectID',"CustomerID",'OrderID','',function(retorno) {
alert(retorno.tipo + ": " + retorno.mensaje);
}); 
```

问题是 campoTextoXX 和 campoValor 在回调函数中没有得到任何值。此外，Chrome 中的调试显示 campoTextoXX 具有调用者回调函数的值： alert(retorno.tipo + ": " + retorno.mensaje);

我不知道下一步该做什么。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:53:52.790

问题似乎是您在代码中的某处覆盖了变量“pepe”。

此外，请检查您如何分配回调函数和参数对象。快速查看似乎没有提供正确的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:02:26.290

您应该注意不要在成功和错误函数中使用全局变量。所以而不是：

```
success: function(data){
        retorno.datos = $.xml2json(data);
        retorno.tipo    = 'S';          // Success
        retorno.mensaje = "Datos obtenidos correctamente";      
        callback(retorno);
    } 
```

我认为您应该执行以下操作：

```
success: function(data){
        var retorno = {};

        retorno.datos = $.xml2json(data);
        retorno.tipo    = 'S';          // Success
        retorno.mensaje = "Datos obtenidos correctamente";      
        callback(retorno);
    } 
```

此外，您应该使用[Firebug](http://getfirebug.com/) for Firefox 来单步执行您的代码并观察您的变量，以确保数据正确输入，并且不会在任何时候被覆盖

您的控制流有点混乱，您可以做的另一件事是检查以确保您的回调和变量是正确的，使用一些 typeof 条件来确保它们是函数等。尝试这样做：

```
success: function(data){
            var retorno = {};

            retorno.datos = $.xml2json(data);
            retorno.tipo    = 'S';          // Success
            retorno.mensaje = "Datos obtenidos correctamente";
            if (typeof callback !== "function" || typeof data !== "object"){
                console.log('error');
                throw "callback or data is not correct type";
            }      
            callback(retorno);
        } 
```

并确保您没有在控制台中收到错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:53:09.873

您可能会发现通过利用 $.ajax 充当 jQuery Deferred 的能力来管理回调链更容易。

这使我们可以非常简单地以 request.done(...) 和 request.fail(...) 的名义在**调用****点`getTrxData`**而不是内部指定“成功”和“错误”行为`getTrxData`- 因此回调链（表面上）少一层。

```
function getTrxData(trx, inputPar, outputPar) {
    inputPar.Transaction = trx;
    inputPar.OutputParameter = (outputPar || '*');
    return $.ajax({
        url: '/XMII/Runner?' + $.param(inputPar)
    });
}

function makeOptions(obj, selectID, campoTextoXX, campoValor, valorDefault) {
    var $option, selected, $select = $("#" + selectID);
    $("#" + selectID + " > option").remove();
    $.each(obj.datos.Rowset.Row, function(k, v) {
        selected = (valorDefault == v[campoValor]) ? ' selected="selected"' : '';
        $option = $('<option value="' + v[campoValor] + selected + '">' + v[campoTextoXX] + "</option>");
        $select.append($option);
    });
    return obj;
}

function crearSelect(trx, inputPar, outputPar, selectID, campoTextoXX, campoValor, valorDefault, callback) {
    var request = getTrxData(trx, inputPar, outputPar);
    request.done(function(data) {
        var obj = {
            datos: $.xml2json(data),
            tipo: 'S',// Success
            mensaje: "Datos obtenidos correctamente"
        };
        callback(makeOptions(obj, selectID, campoTextoXX, campoValor, valorDefault));
    });
    request.fail(function(jqXHR, textStatus, errorThrown) {
        var obj = {
            tipo: 'E',// Error
            mensaje: "Error: " + textStatus
        };
        callback(obj);
    });
}

crearSelect("Default/pruebas_frarv01/trxTest", {letra:'V'}, "*", 'selectID', "CustomerID", 'OrderID', '', function(retorno) {
    alert(retorno.tipo + ": " + retorno.mensaje);
}); 
```

您将看到这本质上是原始代码的重构版本，显着简化了 中的字符串处理`getTrxData`，这似乎可以正常工作。

选项代码已作为一个单独的函数被提取出来`makeOptions`，以使新结构`crearSelect`更清晰。这不是绝对必要的，代码可以重新组合而不会受到惩罚。

[在这里](http://jsfiddle.net/airshow/VzXzF/1/)进行了测试，以确保它成功加载并运行到“错误”警报。如果无法访问服务器端脚本，我无法测试/调试完整的 ajax 功能，因此您可能需要进行一些调试。

# javascript - 可以将backbone.js 与动态/通配符子域路由一起使用吗？

> ID：10111276
> 
> 赞同：2
> 
> 时间：2012-04-11T17:50:53.323
> 
> 标签：javascript, ember.js, backbone.js, url-routing

我正在构建一个系统，该系统将从 url (variable1.domain.com/variable2) 中提取 2 个变量。

我找不到任何文档显示如何对骨干网中的子域执行任何操作。Default_url 只是作为 domain.com/api 传递的。我确实找到了一个名为 CORS (www.enable-cors.org) 的东西，它支持跨域调用，但它没有说明动态域。

这样的事情甚至可能与骨干？如果没有，有谁知道 ember.js 或其他类似主干的系统是否具有此“功能”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T14:23:27.537

这当然是可能的，但不在 Backbone 的默认行为范围内。假设您的所有子域都使用相同的路由器代码，您可以破解一个可能如下所示的解决方案：

```
var Router = Backbone.Router.extend({
  routes: {
    '*variables': 'buildRoute'
  },

  subdomain: function() {
    // This is probably not the prettiest/best way to get the subdomain
    return window.location.hostname.split('.')[0];
  },

  buildRoute: function(variables) {
    // `variables` are all your hash variables
    // e.g., in the URL http://variable1.domain.com/#variable3=apples&variable4=oranges
    // `variables` here would be the string 'variable3=apples&variable4=oranges'
    // so you would have to parse that string into a JSON representation, but that's trivial
    // Once you have the JSON, you can do something like:
    myView.render(this.subdomain(), variablesJSON);
    // Your view's `render` function then has the subdomain and all the variables from the URL,
    // so it can use them appropriately.
  }
}); 
```

这种方法的一个重要警告：它适用于自己导航到 URL 的用户，但当您的应用程序需要执行`navigate`对`Router`. Backbone 将仅导航到 URL 的哈希部分，因此它不会包含子域。您可能必须先启动一个自定义导航功能，`window.location`然后再执行其他任何操作。

显然，这可能不是 Backbone 非常适合的东西。我不确定 Ember 或其他任何东西是否具有此功能，但我会怀疑。子域是您网站的不同区域，因此您可能没有正确使用它们。

# c++ - 如何擦除字符串中的字符？

> ID：10111279
> 
> 赞同：-1
> 
> 时间：2012-04-11T17:51:05.687
> 
> 标签：c++, string, erase

我对字符串中的擦除功能有问题。我无法从某个索引中删除单个字符。也许我不能使用 int "i" 作为迭代器？我想删除一些字符。

```
#include <cstdlib>
#include <iostream>
#include <string>

using namespace std;

void deleteChars(string inputText, string inputChars);

int main(int argc, char *argv[])
{
    string tekst1 = ("mama fama lilo babo sabo");
    string tekst2 = ("mabo");

    deleteChars(tekst1, tekst2);

    system("PAUSE");
    return EXIT_SUCCESS;
}

void deleteChars(string inputText, string inputChars){
          int a = inputText.size();
          int b = inputChars.size();

          string tmp = inputText;

          for(int i=0; i<a; i++){
                  for(int j=0; j<b; j++){
                          if(inputText.at(i)==inputChars.at(j)){
                              tmp.erase(i,1);  //Here is my problem ?
                           }                                    
                  }
          }

          inputText = tmp;

          cout<<"text: "<<inputText<<endl;

} 
```

我的错误：

```
This application has requested the Runtime to terminate it in an unusual way 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T17:57:25.533

在你从位置 5 删除一个字符后，位置 6 的字符移动到位置 5，字符串长度减一。如果您稍后尝试擦除 的最后一个字符`tmp`，它将引发异常，因为`tmp`它已经比您预期的短一个字符。*向后*迭代字符串以避免这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T17:59:30.287

一开始， 的大小`tmp`等于 的`inputText`大小`a`。

但是一旦你从 中删除一个字符`tmp`，它的大小就会减一，变成`a-1`，如果你第二次删除，它的大小就会变成`a-2`等等。因此，在某些时候，您可能会将大于或等于 , 大小的索引传递`tmp`给`erase`函数，这会导致`std::out_of_range`您无法处理的异常，从而导致您的应用程序崩溃。

# java - 如何避免使用 JPA 进行循环引用注释？

> ID：10111281
> 
> 赞同：2
> 
> 时间：2012-04-11T17:51:27.730
> 
> 标签：java, jpa, jpa-2.0

我正在为商店注释我的域模型（使用 JPA 2，使用 Hibernate 提供程序）。

在店里每件产品都可以有一个`Category`。每个类别都可以分配到几个超类别和子类别，这意味着类别“蜡烛”可以将“餐厅”和“装饰”作为父类，将“普通蜡烛”和“多芯蜡烛”作为子类等。

现在我想避免循环引用，即一个类别“a”，它的父类是“b”，而它的父类又是“a”。

有没有办法在 JPA 中检查带有约束的循环引用？还是我必须自己写一些检查，也许是用`@PostPersist`-annotated 方法？

这是我的`Category`课：

```
@Entity
public class Category {
    @Id
    @GeneratedValue
    private Long id;

    private String name;

    @ManyToMany
    private Set<Category> superCategories;
    @ManyToMany(mappedBy="superCategories")
    private Set<Category> subCategories;

    public Category() {
    }

    // And so on ..
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:19:56.900

我相信您必须通过代码中的业务规则来检查这一点。为什么不将这些 ManyToMany 映射分离到一个单独的 Entity 中？例如：

```
@Entity
@Table(name = "TB_PRODUCT_CATEGORY_ROLLUP")
public class ProductCategoryRollup  {

    private ProductCategory parent;
    private ProductCategory child;

    @Id    
    @GeneratedValue
    public Integer getId() {
        return super.getId();
    }
    @Override
    public void setId(Integer id) {
        super.setId(id);
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="ID_PRODUCT_CATEGORY_PARENT", nullable=false)  
    public ProductCategory getParent() {
        return parent;
    }
    public void setParent(ProductCategory parent) {
        this.parent = parent;
    }

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name="ID_PRODUCT_CATEGORY_CHILD", nullable=false)   
    public ProductCategory getChild() {
        return child;
    }
    public void setChild(ProductCategory child) {
        this.child = child;
    }   

} 
```

这样，您可以在保存新实体之前查询任何现有的父子组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-18T10:14:56.410

我知道几年后我又回到了这个问题，但是，我遇到了这个问题，遵循了你所有的解决方案，但它对我不起作用。但是我找到了使用@JsonIgnoreProperties 的最佳解决方案，它完美地解决了这个问题。事实上，我将@JsonIgnoreProperties 注入到通过如下映射链接的实体类中：[https ://hellokoding.com/handling-circular-reference-of-jpa-hibernate-bidirectional-entity-relationships-with-jackson-jsonignoreproperties/](https://hellokoding.com/handling-circular-reference-of-jpa-hibernate-bidirectional-entity-relationships-with-jackson-jsonignoreproperties/)

# android - 用于删除 sd 卡中文件的 cotext 对话框

> ID：10111283
> 
> 赞同：0
> 
> 时间：2012-04-11T17:51:41.053
> 
> 标签：android, contextmenu

我已经创建了这段代码来列出 sd 卡上特定文件夹（称为“pass”）下的 pdf 文件，而我正在努力从上下文菜单中显示删除功能。我一直点击任何文件，但它不显示任何菜单

```
The list code and the context menu 

   public class PDFListActivity extends ListActivity {
ArrayAdapter<String> adapter;
int clickCounter=0;
ArrayList<String> listItems=new ArrayList<String>();
private File[] imagelist;
String[] pdflist;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ListView lv=getListView(); 
        registerForContextMenu(lv);
        setContentView(R.layout.mainlistpdf);
      File images=new File(Environment.getExternalStorageDirectory(), "pass");
        imagelist = images.listFiles(new FilenameFilter(){  
                public boolean accept(File dir, String name)  
                {    

                        return ((name.endsWith(".pdf")));  
                }  
        });

        pdflist = new String[imagelist.length];
        for(int i = 0;i<imagelist.length;i++)
        {
                pdflist[i] = imagelist[i].getName();
        }
        this.setListAdapter(new ArrayAdapter<String>(this,
                        android.R.layout.simple_list_item_1, pdflist));
}
@Override  
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {  
    super.onCreateContextMenu(menu, v, menuInfo); 
    ListView list=getListView(); 
    registerForContextMenu(list); 
        menu.setHeaderTitle("Context Menu");  
        menu.add(0, v.getId(), 0, "delete");  
        menu.add(0, v.getId(), 0, "wtever");  
    }  

    @Override  
    public boolean onContextItemSelected(MenuItem item) {  
        if(item.getTitle()=="delete"){function1(item.getItemId());}  
        else if(item.getTitle()=="wtever"){function2(item.getItemId());}  
        else {return false;}  
    return true;  
    }  

    public void function1(int id){  
        Toast.makeText(this, "function 1 called", Toast.LENGTH_SHORT).show();  
        File folder = Environment.getExternalStorageDirectory();
        String fileName = folder.getPath() + "/pass/hello.pdf";

        File myFile = new File(fileName);
        if(myFile.exists())
            myFile.delete();

    }  
    public void function2(int id){  
        Toast.makeText(this, "function 2 called", Toast.LENGTH_SHORT).show();  
    }

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        PackageManager packageManager = getPackageManager();
         Intent testIntent = new Intent(Intent.ACTION_VIEW);
         testIntent.setType("application/pdf");
         List list = packageManager.queryIntentActivities(testIntent, PackageManager.MATCH_DEFAULT_ONLY);
         if (list.size() > 0 && imagelist[(int) id].isFile()) {
             Intent intent = new Intent();
             intent.setAction(Intent.ACTION_VIEW);
             Uri uri = Uri.fromFile(imagelist[(int) id].getAbsoluteFile());
             intent.setDataAndType(uri, "application/pdf");
             startActivity(intent);
         }

}

    }  
        My xml file      
    <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:drawSelectorOnTop="false" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:04:01.673

我想你错过了这个功能......

```
 ListView lv=getListView();
 registerForContextMenu(lv);<-- did you register your listview for context menu? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:19:42.767

按照我的想法，

```
File folder = Environment.getExternalStorageDirectory();
        String fileName = folder.getPath() + "/pass/hello.pdf";

        File myFile = new File(fileName); 
```

1) 你插入“Environment.getExternalStorageDirectory();” 进入文件然后进入字符串然后再次进入文件......你直接插入字符串然后像这样传递给文件

```
String root = Environment.getExternalStorageDirectory().getPath();
String deletefile= root + "/pass/myfile.pdf";
File file = new File(deletefile);
file.delete(); 
```

# iis - 在 Windows Azure 中存储 IIS 日志

> ID：10111287
> 
> 赞同：0
> 
> 时间：2012-04-11T17:51:59.183
> 
> 标签：iis, azure, logging

我需要将所有 IIS 日志自动保存在 Azure 存储中，如何启用它？

我看到类中有不同的属性`DiagnosticMonitorConfiguration`，例如 DiagnosticInfrastructureLogs、Logs、Directories 等。以上哪个负责 IIS 日志？日志存储到什么 blob/表？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:04:59.077

在[Directory Buffers](http://msdn.microsoft.com/en-us/library/windowsazure/gg593185.aspx)下，您有两个选项.. IIS Logs 和 Failed RequestLogs。

以下是概述这些选项的诊断架构定义的片段：

```
 <Directories bufferQuotaInMB="1024" 
  scheduledTransferPeriod="PT1M">

  <!-- These three elements specify the special directories 
       that are set up for the log types -->
  <CrashDumps container="wad-crash-dumps" directoryQuotaInMB="256" />
  <FailedRequestLogs container="wad-frq" directoryQuotaInMB="256" />
  <IISLogs container="wad-iis" directoryQuotaInMB="256" />

  <!-- For regular directories the DataSources element is used -->
  <DataSources>
     <DirectoryConfiguration container="wad-panther" directoryQuotaInMB="128">
        <!-- Absolute specifies an absolute path with optional environment expansion -->
        <Absolute expandEnvironment="true" path="%SystemRoot%\system32\sysprep\Panther" />
     </DirectoryConfiguration>
     <DirectoryConfiguration container="wad-custom" directoryQuotaInMB="128">
        <!-- LocalResource specifies a path relative to a local 
             resource defined in the service definition -->
        <LocalResource name="MyLoggingLocalResource" relativePath="logs" />
     </DirectoryConfiguration>
  </DataSources> 
```

# facebook - 是否有“使用此应用的朋友”的小部件

> ID：10111290
> 
> 赞同：1
> 
> 时间：2012-04-11T17:52:29.807
> 
> 标签：facebook, widget, facebook-widgets

假设用户第一次访问我的应用程序网站，所以我还不知道他/她的 Facebook uid。

Facebook 是否提供了一个类似于 Like 小部件的小部件，该小部件列出**了该用户使用我的应用程序的 Facebook 朋友**（就像它在一个中的 Like 小部件中显示他/她的朋友喜欢该页面一样`iframe`）？

我记得这样的事情，但我找不到类似的东西。它存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:05:07.700

它被称为Facepile。将它与 app_id 一起使用，它会显示用户的连接好友。

这是文档：http: [//developers.facebook.com/docs/reference/plugins/facepile/](http://developers.facebook.com/docs/reference/plugins/facepile/)

# java - 如何从 Excel 电子表格中读取数据并存储到 MySQL 数据库中

> ID：10111294
> 
> 赞同：-2
> 
> 时间：2012-04-11T17:52:52.083
> 
> 标签：java, mysql, spring, excel

我在 Java (Spring) 中需要从 Excel 电子表格中读取数据并将其存储在 MySQL 数据库中。更具体地说，我必须每 5 分钟从 Excel 电子表格中读取一行数据并将其存储到 MySQL 数据库中。

谁能帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T18:50:45.603

正如马蒂亚斯·施瓦茨所写：

您可以使用 Apache POI 库读取 Java 中的 Excel 文件： [http](http://poi.apache.org/) ://poi.apache.org/ 他们的操作指南页面上有一些代码示例，将告诉您如何读取 Excel 文件：[http://poi。 apache.org/电子表格/how-to.html](http://poi.apache.org/spreadsheet/how-to.html)

要存储数据，您可以使用 MySQL 的 JDBC 驱动程序。您可以在此处获取连接器：[http ://www.mysql.com/products/connector/](http://www.mysql.com/products/connector/)

# jquery - 如何在前一个图像在jquery幻灯片中完全淡出之前加载下一个图像？

> ID：10111296
> 
> 赞同：0
> 
> 时间：2012-04-11T17:53:03.973
> 
> 标签：jquery, background, slideshow, fadein

我有一个幻灯片，我希望在当前图像淡出时让下一个图像淡入。

那么，有没有办法在前一个图像完全消失之前加载下一个图像？

这就是我正在使用的：

```
 var aImages = new Array();
    var iPrev = -1;
    var iRnd = -1;
    aImages[0] = "01.jpg";
    aImages[1] = "02.jpg";
    aImages[2] = "03.jpg";
    aImages[3] = "04.jpg";
    aImages[4] = "05.jpg";
    aImages[5] = "06.jpg";
    $(document).ready(function() {
        $("img#bg").load(function()
            {
                $("img#bg").fadeTo(2000,1);
                setTimeout(function() 
                    {
                        $("img#bg").fadeOut(1000);
                        setTimeout(LoadImages,1000);
                    }
                    ,4000);
            }           
        )
        setTimeout(LoadImages,1000);
});
function LoadImage(iNr)
    {
        $("img#bg").attr("src", aImages[iNr]);      
};    
function LoadImages()
{
    while(iPrev == iRnd)
    {
        iRnd = Math.floor(Math.random()*aImages.length);
    }
    LoadImage(iRnd);
    iPrev = iRnd;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:55:58.323

您可以使用 Javascript 预加载图像，如[本文所示](http://www.pageresource.com/jscript/jpreload.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:16:53.977

工作链接： http: [//jsfiddle.net/Ghokun/wnTte/13/](http://jsfiddle.net/Ghokun/wnTte/13/) 只需将图像放在一起。

是对以下问题的回答，但也可能对您有用

[jQuery - 在下一个开始淡入之前，div没有完全淡出](https://stackoverflow.com/questions/10110749/jquery-divs-not-fading-out-completely-before-next-starts-fading-in)

# regex - 只匹配一次但不能更多

> ID：10111299
> 
> 赞同：0
> 
> 时间：2012-04-11T17:53:13.707
> 
> 标签：regex, perl

我想检查从另一个文件中获取的服务器名称是否存在。这个想法是第二个文件包含多行，其中包含服务器名称+附加信息。

所以示例名称“server01”的输出是

```
server01
server01
server01 
```

对于两个文件中存在的每个名称，我只想在输出 xls 文件中使用它一次。

到目前为止的程序是：

```
#!/usr/bin/perl -w

use Spreadsheet::WriteExcel;

#OPEN FILES
open(FILE, "CEP06032012.csv") or die("Unable to open CEP file");
@CEP_file = <FILE>;
close(FILE);

open(FILE, "listsystems_temp") or die("Unable to open listsystems file");
@listsystems_file = <FILE>;
close(FILE);

#XLS properties
my $workbook  = Spreadsheet::WriteExcel->new('report.xls');
my $worksheet_servers = $workbook->add_worksheet();

#MAIN
my $r = 0;
foreach my $lines(@CEP_file){ 

my @CEP_file = split ";", $lines;
my $server = $CEP_file[8];

foreach my $lines2(@listsystems_file){

    if ($lines2 =~ m/.*$server.*/i && $server ne ""){
        print "$server \n";
        #print "$lines2 \n";
        $worksheet_servers->write($r, 0, "$server");
        $r++;
    }
} 

}

exit(); 
```

任何想法如何改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:12:14.923

尝试这个。这将跳过 $server 的多次出现，只保留一个。

```
my %seen;

foreach my $lines2(@listsystems_file){
    next if $seen{$server}; 
    if ($lines2 =~ m/.*$server.*/i && $server ne ""){
        print "$server \n";
        #print "$lines2 \n";
        $worksheet_servers->write($r, 0, "$server");
        $r++;
        $seen{$server} = 1;
    }
} 
```

# .htaccess - 通过显示图像或 iframe 来防止盗链骚扰域？.htaccess

> ID：10111306
> 
> 赞同：1
> 
> 时间：2012-04-11T17:53:48.060
> 
> 标签：.htaccess

我有一些网站不断窃取我的图像，有时甚至是 iframe 来获取我的内容。

我已经尝试使用 .htaccess 将任何被盗的图像重定向到类似的图像，`stop hotlinking`但我仍然遇到他们遇到的相同问题，例如使用不提供 .jpg .gif .png 之类的扩展名的东西

无论如何，我可以通过显示 iframe 来编辑 .htaccess 以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:12:50.207

您可能会考虑以下几点？：

[http://www.cyberciti.biz/faq/apache-mod_rewrite-hot-linking-images-leeching-howto/](http://www.cyberciti.biz/faq/apache-mod_rewrite-hot-linking-images-leeching-howto/)

[http://underscorebleach.net/jotsheet/2004/11/stop-image-hotlinking-tutorial-htaccess-apache](http://underscorebleach.net/jotsheet/2004/11/stop-image-hotlinking-tutorial-htaccess-apache)

[http://altlab.com/htaccess_tutorial.html](http://altlab.com/htaccess_tutorial.html)

-或者-

[http://bit.ly/ImCQOa](http://bit.ly/ImCQOa)

# c# - 代码合同 C# 确保值在数组中

> ID：10111311
> 
> 赞同：2
> 
> 时间：2012-04-11T17:54:07.777
> 
> 标签：c#

这很可能非常简单，但我似乎无法弄清楚:)

我有2个int数组。我想确保一个值在两个数组中都使用某种形式的代码契约。如果值不是两个数组我不想继续

这可以做到吗？我在想这样的事情，但似乎无法让它发挥作用

```
Contract.Requires(g[variable ] == y[variable]) 
```

该值必须在两个数组中的位置相同

这就是我现在所拥有的

```
 private static int FirstCut(int[] g, int[] h)
        {
            int x = 0;

            Contract.Requires(g.Length > 0);            
            Contract.Requires(g.Length == h.Length); //skal være lige lange

            while (g[x] != h[x])
            {
                x++;
            } 
            return x;
        } 
```

问候

比尔格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:58:29.730

```
Contract.Requires(g[variable ] == g[variable]) 
```

好吧，这只是一个数组，即使是两个，也需要在相同的索引处找到它们，你没有说这是一个要求。在我看来，条件应该是：

```
x.Contains(variable) && y.Contains(variable) 
```

假设`x`和`y`属于 类型`int[]`。

此外，我对 C# 中的代码合同或在您的方法顶部执行两个 O(n) 操作的性能影响一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:13:09.797

如果值应该在同一个索引上，假设`g`and `y`are`int[]`和`variable`is `int`，那不是这样的：

```
Contract.Requires(g.Contains(variable) && g.IndexOf(variable) == y.IndexOf(variable)) 
```

*免责声明：完全未经测试，也许我不理解这个问题*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:13:45.623

```
for(int i = 0; i < firstArray.Length && i < secondArray.Length; i++)
{
  if(firstArray[i] == mySearchValue &&  secondArray[i] == mySearchValue)
  {
    //whatever you want to do

    break; //you can remove this if you don't want to stop the loop.
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T18:50:22.630

在我大四的时候玩过代码合同，这就是我考虑解决问题的方式。它看起来比一些发布的解决方案更干净。

```
public static int FirstCut(int[] g, int[] h)
{
    Contract.Requires(h.Length == g.Length);
    Contract.Requires(Contract.Exists(0, g.Length, x => g[x] == h[x]));

    //Do whatever knowing that 2 values at index x in the arrays are the same
} 
```

# extjs4 - 选项卡面板中的 Extjs4 无线电组，在第一个选项卡上加载正常，但在其他选项卡上加载正常

> ID：10111320
> 
> 赞同：0
> 
> 时间：2012-04-11T17:54:18.267
> 
> 标签：extjs4, tabpanel, radio-group

我在第一个选项卡中有一个带有网格的选项卡 - 称为主网格。我双击主网格中的一行，它会加载一个带有表单网格的新选项卡。在表单网格中，我设置了列布局。我在左栏中有一个网格，在右栏中有一个带有无线电组的表单。

当一个新选项卡打开时，表单网格中的网格加载正常，当我在表单网格网格中选择一条记录时，它会很好地加载到表单中，并且无线电组也会使用我的转换功能加载。我在网格中使用的值是“是”和“否”，所以我使用“转换”函数将它们转换为 INT，然后返回它们。

这是我的代码片段：

```
Ext.define('ValueRadioGroup',({
    extend: 'Ext.form.RadioGroup',
    alias: 'widget.valueradiogroup',

    fieldLabel: 'Value',
    columns: 2,
    defaults: {
        name: 'rating' //Radio has the same name so the browser will make sure only one is checked at once
    },
    items: [{
        inputValue: '2',
        boxLabel: 'Yey'
    }, {
        inputValue: '1',
        boxLabel: 'Nay'
    }]
}));

Ext.define('TargetViewModel', {
    extend: 'Ext.data.Model',
    fields  : [
        {name: 'ID'},
        {name: 'FAMILYNAME'},
        {name: 'TABLENAME'},
        {name: 'TARGETNAME'},
        {name: 'TARGETLABEL'},
        {name: 'TARGETVALUE'},
        {name: 'ITEMREL'},
        {name: 'ITEMREF'},
        {name: 'ITEMNAME'},
        {name: 'ITEMMNEMONIC'},
        {name: 'ALLOWED'},

        {name: 'rating', type: 'int', convert: convertTARGETVALUE}
    ]
}); 
```

...这是它被调用的地方：

```
this.items = [{ 

            // GRID
            columnWidth: .65, // GRID width                        
            xtype: 'ggtargetviewgrid',
            store: this.store,
            listeners: {
                selectionchange: function(model, records) {
                    if (records[0]) {
                        var value = this.up('form').getForm().loadRecord(records[0]);

                    }
                } 
            }                       
        }
        ,
        {
            // FORM
            columnWidth: 0.3, // FORM width
            margin: '0 0 0 10',
            xtype: 'fieldset',
            title:'Target Details',
            defaults: {
                width: 280,
                labelWidth: 50
            },
            defaultType: 'textfield',
            items: [
                {
                    fieldLabel: 'Name',
                    name: 'ITEMNAME'
                }, {

                    xtype: 'valueradiogroup' 
            }]
}] 
```

这是我的转换功能：

```
var convertTARGETVALUE = function(value, record) {
    var tval = record.get('TARGETVALUE'), val = 0;

    if (tval === 'Yes') return val+2;
    if (tval === 'No') return val+1;
    return val;
}; 
```

问题是无线电组对于打开的第一个表单网格工作正常，但不适用于第二个或任何后续打开的选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:35:18.740

我有同样的问题，我是这样解决的：

```
xtype:'radiogroup',
itemId:'storageType',
name:'entdata.storageType',//this give me the idea
items:[           
    {boxLabel:"s0",name:'entdata.storageType',inputValue:"0",checked:true},
    {boxLabel:"s1",name:"entdata.storageType",inputValue:"1"}, 
    {boxLabel:"s2",name:'entdata.storageType',inputValue:"2"}, 
    {boxLabel:"s3",name:'entdata.storageType',inputValue:"3"} ] 

setValue:function(value) {
    if (!Ext.isObject(value)) {
        var obj = new Object();
        obj[this.name] = value;
        value = obj;
    }
    Ext.form.RadioGroup.prototype.setValue.call(this, value);
} 
```

加入`name`，`setValue`然后可以工作。

# codeigniter - PyroCMS 如何在模板中调用 codeigniter 助手？

> ID：10111321
> 
> 赞同：0
> 
> 时间：2012-04-11T17:54:21.180
> 
> 标签：codeigniter, redirect, pyrocms

我想将 codeigniter 助手添加到模板中。

例如：

```
{{ helper:redirect uri="/order/images/" method="refresh" }} 
```

但它不起作用。可以这样调用标准助手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:52:58.103

我不知道它是否正确，但它有效：

```
class Plugin_AvHelper extends Plugin_Helper
{
    public function redirect()
    {
            $uri        = $this->attribute('uri');
        $method     = $this->attribute('method');

        return $uri && $method ? redirect($uri, $method) : NULL;
    }
} 
```

并致电：

```
{{ avhelper:redirect uri="/order/images/" method="refresh" }} 
```

# jquery - 如何将变量从点击函数传递到 jQuery 中另一个函数的参数？

> ID：10111323
> 
> 赞同：0
> 
> 时间：2012-04-11T17:54:23.243
> 
> 标签：jquery

我需要有关如何将变量从 jQuery click 函数传递到另一个插件函数的参数的帮助。在下面的代码中，我需要将 click 函数中的 'imagePathArray' 传递给 $(this).reel 中的 images 参数。这行得通吗？到目前为止，我似乎无法让它工作。任何帮助表示赞赏。
这是我的代码：

```
$(document).ready(function(){
  $('a.image-selector').click(function (event) {

    event.preventDefault();

    // Work out which image to display, amend the displaying image then load the rest and fade in.              
    whichImageInput = $(this).data('which');
    imagePathImages = $('#imageSequence-' + whichImageInput).attr('value');
    imagePathArray = imagePathImages.split(','); 
    totalFrames = imagePathArray.length;
    imagePath = imagePathArray[0];

    //alert(imagePathArray[0]);
    //alert(whichImageInput);
    $('#image').attr('src', imagePath).fadeOut('fast', function () {
        //DisplayImages(whichImageFolder);
        DisplayImages(imagePathArray[0]);
    });
  });

 DisplayImages('Kachina');

function DisplayImages(whichInput) {

    //function DisplayImages(whichFolder) {
    //var imagePath = 'images/' + whichFolder + '/';
    // Call this to destroy any existing reference before initialising...
    $('#image').trigger('teardown');
    // Needs a bit more thought when swapping between colours.          
    $('#image').fadeIn('fast', function () {

        $(this).reel({
            frames: totalFrames,
            //footage: 4,
            sensitivity: 70,
            saves: true,
            //path: imagePath,
            cw: true,
            hint: "Click and drag",
            clickfree: false,
            preloader: 20,

            images: imagePathArray
        });
    });
}
}); 
```

**编辑** 好的，这是我现在使用下面的一些建议的代码。但是，我现在必须单击 a.image-selector 两次才能将图像填充到页面上。它第一次正确通过（通过 alert() 测试），但标签中的实际图像第一次没有填充。我也将包含我的 HTML。$(document).ready(function(){ $('a.image-selector').click(function (event) {

```
 event.preventDefault();

    // Work out which image to display, amend the displaying image then load the rest and fade in.              
    // var whichImageFolder = $(this).data('which');
    //var imagePath = 'images/' + whichImageFolder + '/0001.png';
    whichImageInput = $(this).data('which');
    imagePathImages = $('#imageSequence-' + whichImageInput).attr('value');
    imagePathArray = imagePathImages.split(',');
    totalFrames = imagePathArray.length;
    firstImagePath = imagePathArray[0];

    //alert(imagePathArray[0]);
    //alert(whichImageInput);
    $('#image').attr('src', firstImagePath).fadeOut('fast', function () {
        //DisplayImages(whichImageFolder);
        DisplayImages(firstImagePath, $(this));
    });
});

function DisplayImages(whichInput, cntrl) {

    //function DisplayImages(whichFolder) {
    //var imagePath = 'images/' + whichFolder + '/';
    // Call this to destroy any existing reference before initialising...
    $('#image').trigger('teardown');
    // Needs a bit more thought when swapping between colours.          
    $('#image').fadeIn('fast', function () {
       // alert(imagePathArray);
        $(cntrl).reel({
            frames: totalFrames,
            //footage: 4,
            sensitivity: 70,
            saves: true,
            //path: imagePath,
            cw: true,
            hint: "Click and drag",
            clickfree: false,
            preloader: 20,

            images: imagePathArray
        });
    });
  }
 });//End doc.ready 
```

下面的 HTML

```
 <div class="block">
        <div class="imgHolder">
            <img id="image" src="" height="448" width="360" />
        </div>
    </div>
  <!--Thumbs-->

    <ul class="tabs">
        <li><a href="#" class="image-selector" data-which="Kachina"><img src="images/smooshed150dpi/Kachina0001.png" width="150" /></a></li>
        <li><a href="#" class="image-selector" data-which="Lapis"><img src="images/Lapis/Lapis_Thumb.png" width="150" /></a></li>

    </ul>

        <input type="hidden" id="imageSequence-Kachina" value="images/Kachina/0001.png, images/Kachina/0002.png, images/Kachina/0003.png, images/Kachina/0004.png, images/Kachina/0005.png, images/Kachina/0006.png, images/Kachina/0007.png, images/Kachina/0008.png, images/Kachina/0009.png, images/Kachina/0010.png,
                     images/Kachina/0011.png, images/Kachina/0012.png, images/Kachina/0013.png, images/Kachina/0014.png, images/Kachina/0015.png, images/Kachina/0016.png, images/Kachina/0017.png, images/Kachina/0018.png, images/Kachina/0019.png, images/Kachina/0020.png,
                     images/Kachina/0021.png, images/Kachina/0022.png, images/Kachina/0023.png, images/Kachina/0024.png, images/Kachina/0025.png, images/Kachina/0026.png, images/Kachina/0027.png, images/Kachina/0028.png, images/Kachina/0029.png, images/Kachina/0030.png,
                     images/Kachina/0031.png, images/Kachina/0032.png, images/Kachina/0033.png, images/Kachina/0034.png, images/Kachina/0035.png, images/Kachina/0036.png" />

         <input type="hidden" id="imageSequence-Lapis" value="images/Lapis/0001.png, images/Lapis/0002.png, images/Lapis/0003.png, images/Lapis/0004.png, images/Lapis/0005.png, images/Lapis/0006.png, images/Lapis/0007.png, images/Lapis/0008.png, images/Lapis/0009.png, images/Lapis/0010.png,
                     images/Lapis/0011.png, images/Lapis/0012.png, images/Lapis/0013.png, images/Lapis/0014.png" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:03:34.507

将引发事件的控件作为函数的引用/变量发送。

```
DisplayImages(imagePathArray[0], $(this)); 
```

该函数将如下所示：

```
function DisplayImages(whichInput, cntrl) { 
```

和

```
$(cntrl).reel({ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:00:54.047

将 imagePathArray 设为全局变量怎么样？？

可能在线路之后

```
$(document).ready(function(){ 
```

你可以有

```
var imagePathArray; 
```

这种方式`imagePathArray`将在 jquery 命名空间中随处可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T16:44:08.840

我让它工作了

```
 $(document).ready(function(){ $('a.image-selector').click(function (event) {
event.preventDefault();
// Work out which image to display, amend the displaying image then load the rest and      fade in.              
whichImageInput = $(this).data('which');
imagePathImages = $('#imageSequence-' + whichImageInput).attr('value');
imagePathArray = imagePathImages.split(',');
totalFrames = imagePathArray.length;
firstImagePath = imagePathArray[0];
$('#image').trigger('teardown');//MOVED TO HERE TO INITIALISE TEARDOWN ON CLICK.
$('#image').attr('src', firstImagePath).fadeOut('fast', function () {
    DisplayImages(firstImagePath, $(this));
});
 });

function DisplayImages(whichInput, cntrl) {

   //function DisplayImages(whichFolder) {
//var imagePath = 'images/' + whichFolder + '/';
// Call this to destroy any existing reference before initialising...

$('#image').trigger('teardown');
// Needs a bit more thought when swapping between colours.

$('#image').fadeIn('fast', function () {
   // alert(imagePathArray);
    $(cntrl).reel({
        frames: totalFrames,
        //footage: 4,
        sensitivity: 70,
        saves: true,
        //path: imagePath,
        cw: true,
        hint: "Click and drag",
        clickfree: false,
        preloader: 20,

        images: imagePathArray
    });
    });
  }
 });//End doc.ready 
```

# datetime - OData 库 RTM 日期时间不一致

> ID：10111343
> 
> 赞同：2
> 
> 时间：2012-04-11T17:55:43.797
> 
> 标签：datetime, odata

我刚刚升级到 OData 库的 RTM 版本。我注意到 DateTime 处理中似乎存在不一致之处，并且想知道是否有人可以解释我可能遗漏的内容，或者实际上是否存在一些问题。除了 RTM 库之外，我还依赖于 2012 年 3 月 30 日版本的 MS-ODATA。

MS-ODATA 以以下格式定义 dateTimeUriLiteral（例如简化）：

YYYY-MM-DDTHH:MM:SS.NS 其中 NS 定义为 nanoSeconds=1*7DIGIT

MS-ODATA 将 VJsonDateTime 定义为可怕的 /Date(...)/ 格式。

然而，在详细的 JSON 序列化中使用库，我们会看到 dateTimeUriLiteral 格式，而不是 VJsonDateTime。此外，反序列化仅接受 dateTimeUriLiteral 格式。这看起来像是规范和实现之间的冲突。

此外，dateTimeUriLiteral 不考虑时区偏移（例如 ISO 8601 格式的情况）。但是，我们看到当序列化的日期时间对象被指定为 DateTimeKind.Utc 时，库会发出一个“Z”终止字符（UTC 的 ISO 8601）。这看起来也像是规范和实现之间的冲突。

此外，当我们使用库反序列化具有终止“Z”的 dateTimeUriLiteral 时 - 反序列化的对象被标记为 DateTimeKind.Local。无论是否存在对 UTC 指示符的规范问题 WRT 支持，这看起来都不正确。'Z' 应该导致反序列化失败，或者应该导致时间标记为 UTC（非本地）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:37:19.080

详细 JSON V3 使用 ISO DateTime 格式（与 XML 使用的相同）。详细 JSON V2 和 V1 使用 /Date(...)/ 格式。因此，这取决于您正在编写和阅读的有效负载版本。

dateTimeUriLiteral 与 Verbose JSON V3 日期时间格式不同。Verbose JSON V3 中的那个使用 Z（它实际上与您从 XmlConvert.ToString(datetime, XmlDateTimeSerializationMode.RoundtripKind) 获得的相同）。

至于读取“Z”值。这似乎是一个错误。产品团队正在对此进行更详细的研究。可能的解决方法似乎是要么恢复为 V2 格式，要么改用 DateTimeOffset 值（没有这个问题）。

# sql-server - 如何最好地为多个版本的 SQL Server 组织 SVN 存储库？

> ID：10111344
> 
> 赞同：3
> 
> 时间：2012-04-11T17:55:56.297
> 
> 标签：sql-server, svn

有一组在 SQL Server 2005 中运行的相关项目，我为此组织了一个 SVN 存储库，如下所示：

• \
• \Scripts
• \SSAS
○ \Project1_OLAP
○ \Project2_OLAP
○ ...
• \SSIS
○ \ETL_Source1
○ \ETL_Source2
○ ...
• \SSRS
○ \Project1_Canned
○ \Project1_AdHoc
○ ...

在不久的将来，我的组织将开始逐个项目的全面转换和迁移到 SQL Server 2008R2 服务器。将有一段时间需要支持和运行同一项目的 2005 和 2008 版本。新环境中存在一些未知数，因此我需要为最坏的情况做好准备，以获得数月的并行支持。最终，尽管 2008R2 代码将成为“主干”。您如何建议将项目的 2008R2 版本合并到该文件夹​​结构中？

我的团队通常是 SVN 和版本控制系统的初学者，因此优先考虑的是简单性，并清楚地说明他们在此过渡期间正在开发的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:15:16.060

您可以使用与主干相同的结构和基本代码来创建 SVN 分支。这允许相同的目录方案以及所有内容。完成最终转换后，将该分支中的所有代码合并到 Trunk 中，使 Trunk 拥有所有有问题的代码。

# javascript - 如何在 cssLess 中添加 JQuery 命令？

> ID：10111347
> 
> 赞同：1
> 
> 时间：2012-04-11T17:56:00.787
> 
> 标签：javascript, jquery, css, less

我正在使用 CSSLess 和 JQuery 并试图计算无序列表中 LI 元素的数量，以便我可以将该数字除以宽度。

```
ul.navBar {
    li {
        float: left;
        width: (100% / `$(".navBar li").length()`);
    }
} 
```

输出应像标准导航栏菜单一样并排显示为选项卡。

有没有办法在没有 JQuery 的情况下编写这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:51:38.067

你想这样做：

```
li { 
    float: left; 
    width: ~`(100/$('.navBar li').length)+'%'`;
} 
```

`~`告诉`less`您不希望它弄乱输出 。

你也可以使用`percentage`：

```
width: percentage(`1/$('.navBar li').length`); 
```

这仅在您没有使`li`元素更宽的边框、填充等时才有效。此外，您必须在 .js 的**底部**`body`加载它，否则 jQuery 将在您的 DOM 准备好之前运行：

```
<body>
  ...
  <link rel="stylesheet/less" type="text/css" href="mystyles.less"> 
  <script src="less.min.js" type="text/javascript"></script> 

</body> 
```

演示：http: [//jsfiddle.net/jtbowden/ZJ2HV/](http://jsfiddle.net/jtbowden/ZJ2HV/)

# ruby-on-rails - 将 4000 行从 csv 文件导入到 rails 应用程序中的 sqlite 数据库的最佳方法

> ID：10111349
> 
> 赞同：0
> 
> 时间：2012-04-11T17:56:11.947
> 
> 标签：ruby-on-rails, sqlite, csv, import

所以我有一个包含大约 4000 行的 csv 文件，需要从 Rails 应用程序中读取。我计划每周执行一次或两次此导入。

使用 csv-mapper，我可以执行此操作（删除当前表，重新填充/保存），但是需要很长时间。

在这种情况下批量导入 csv 文件的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:30:20.073

我建议一次创建多个记录。这是一个类似的问题[Rails inserting multiple records for single model](https://stackoverflow.com/questions/4495705/rails-inserting-multiple-records-for-single-model)

我建议您不要尝试一次完成所有 4000 行，而是将其分解为 10-20 的较小块

# android - Android - 删除矩形内的点

> ID：10111356
> 
> 赞同：0
> 
> 时间：2012-04-11T17:56:42.400
> 
> 标签：android, view, canvas

我只是在 onDraw 事件中在 View 中绘制了 Rect。如何在触摸事件中删除其中的点？我不想全部删除，只是触摸发生的特定点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:34:22.427

我会在触摸点使用矩形上的背景颜色绘制一个形状。

# asp.net-mvc - MVC3：如何将@Html.DisplayFor 合并到 iframe src 中？

> ID：10111357
> 
> 赞同：0
> 
> 时间：2012-04-11T17:56:44.727
> 
> 标签：asp.net-mvc, iframe

我试着弄清楚它以及谷歌的答案，但它仍然不起作用。

基本上在我的 Details.cshtml 中，这段代码：@Html.DisplayFor(model => model.eLink) 正在根据 id 号从数据库中生成一个 URL 链接（例如[http://www.w3schools.com](http://www.w3schools.com) ） .

但是，我需要这个 URL 链接才能出现在 iframe 中。如何合并此代码：

**@Html.DisplayFor(model => model.eLink)**

到这里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:15:15.360

Html.DisplayFor 的目的是将视图属性的值显示为文本。将其放入 iframe 不是它的工作。这不是您需要使用的。

您编写了您要查找的 html。所以只需在 iframe 中使用你的 model.eLink：

```
<iframe src="@Model.eLink"; width="1000" height="300" scrolling="no"></iframe> 
```

# mysql - 错误“不允许从触发器返回结果集”

> ID：10111358
> 
> 赞同：1
> 
> 时间：2012-04-11T17:56:45.813
> 
> 标签：mysql, triggers

我收到错误消息`Not allowed to return a result set from a trigger`；我正在使用 MySQL。

下面是我的触发代码：

```
delimiter |        
create trigger order_val after insert on tbl_order    
  for each row begin    
    call value(new.od_id,@e);    
    insert into od_val (od_id,od_val) values(new.od_id,@e);    
  end;    
| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:43:14.027

当我在触发器中使用 select 语句时，我遇到了同样的问题……后来删除了它，现在可以正常工作了……

过程 (call value(new.od_id,@e)) 中是否有 select 语句...

# java - 获取节点的 xpath 值而不在 java 中进行迭代

> ID：10111360
> 
> 赞同：0
> 
> 时间：2012-04-11T17:57:04.833
> 
> 标签：java, xpath

我有一个xml

```
<?xml version="1.0" encoding="UTF-8"?>
<information>
  <person id="1">
  <name>Deep</name>
  <age>34</age>
  <gender>Male</gender>
  </person>

 <person id="2">
  <name>Kumar</name>
  <age>24</age>
  <gender>Male</gender>
  </person>

  <person id="3">
  <name>Deepali</name>
  <age>19</age>
  <gender>Female</gender>
  </person>

  <!-- more persons... -->
</information> 
```

```
DocumentBuilderFactory domFactory = DocumentBuilderFactory
                .newInstance();
        domFactory.setNamespaceAware(true);
        DocumentBuilder builder = domFactory.newDocumentBuilder();
        Document doc = builder.parse("persons.xml");
        XPath xpath = XPathFactory.newInstance().newXPath();
        // XPath Query for showing all nodes value
        XPathExpression expr = xpath.compile("//information/person[0]/name/text()");

        Object result = expr.evaluate(doc, XPathConstants.NODE);
        Node node = (Node) result;
        System.out.println(node.getNodeValue()); 
```

我需要提取我尝试上述代码的第一个人的名字，它给出了异常，任何人都可以帮助我，

更新异常

```
Exception in thread "main" java.lang.ClassCastException: com.sun.org.apache.xerces.internal.dom.DeferredTextImpl cannot be cast to javax.xml.soap.Node
    at xml.main(xml.java:33) 
```

更新的答案

```
XPathExpression expr = xpath.compile("//information/person[1]/name");

        String str = (String) expr.evaluate(doc, XPathConstants.STRING);

        System.out.println(str); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:12:07.243

XPath 索引从基数 1 开始，而不是大多数人认为的 0，因此 person[0] 不会返回任何内容。将您的 XPath 更改为`//information/person[1]/name/text()` 您还可以指定位置以避免完全使用静态数字：`//information/person[position()=1]/name/text()`

或者`//information/person[@id='1']/name/text()`如果您需要 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T17:20:39.700

XPathExpression expr = xpath.compile("//信息/person[1]/name");

```
 String str = (String) expr.evaluate(doc, XPathConstants.STRING);

    System.out.println(str); 
```

# html - 为什么放在 td 中时 p 标签的边距会消失？

> ID：10111364
> 
> 赞同：0
> 
> 时间：2012-04-11T17:57:24.177
> 
> 标签：html, css

我在 a 中放置了一个`p`标签`td`，如下所示：

```
<html>
    <head>
        <title></title>
    </head>
    <body>
        <table>
            <tr>
                <td style="font-size: 16px;"><p>Hello</p></td>
            </tr>
        </table>
    </body>
</html> 
```

默认边距已从`p`标签中消失。为什么会这样，我怎样才能取回默认的`p`标签边距？

我认为这与标签边距所基于的`font-size`非级联有关，但这并没有帮助。`p``em`

我不想直接给`p`标签添加边距，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:10:54.353

只需在页面中添加一个 doctype 声明：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
    </head>
    <body>
        <table>
            <tr>
                <td style="font-size: 16px;"><p>Hello</p></td>
            </tr>
        </table>
    </body>
</html> 
```

没有它，您的页面将以怪异模式显示，其中边距可能会出现意外行为，尤其是在涉及表格时。我不确定这里到底发生了什么导致你`p`在你的时候失去它的利润`td`，但我知道它只发生在怪癖模式下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:25:50.507

There could be multiple reasons for it:

1.  Is this problem only in IE? It could be a problem with quirks mode so would be better to add doctype as mentioned by BoltClock
2.  If it is reproducible in FF as well then enable 'Show User Agent CSS' in [Side panel](http://getfirebug.com/wiki/index.php/Style_Side_Panel) in Style tab in Firebug. Then you can check which CSS is overriding default CSS provided by browser. There could be some CSS like

    ```
    table p {
       margin: 0;
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:01:09.763

我不确定你说的消失是什么意思，但你可以`p`一般地定位你的 s ，然后稍微填充它们：

```
​td > p
{
  padding:15px;       
}​ 
```

如果需要，可以使选择器更严格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T19:49:12.997

浏览器会在每个前后自动添加一些空格（边距）

元素。可以使用 CSS 修改边距（使用边距属性）。

```
 td p 
              {
               margin:0px;
              } 
```

# iphone - Interface Builder 文件中的未知类 ZBarReaderView

> ID：10111369
> 
> 赞同：10
> 
> 时间：2012-04-11T17:57:35.917
> 
> 标签：iphone, ios

我正在处理`ZBarReader`并遇到错误

`ZBarReaderView`Interface Builder 文件中的未知类

> [UIView setReaderDelegate:]：无法识别的选择器发送到实例 0x6859f20

请查看[此处](https://i.stack.imgur.com/XEAzJ.png)或下方的附加图片，以便您了解我到目前为止所做的事情：-

![在此处输入图像描述](../Images/68658710ca16d8720e626969f08e589a.png)

在情节提要中，我确实有一个视图，它的自定义类是`ZBarReadView`. 我也在`IBOutlet`头文件中连接它。在 m 文件中，我做

> viewReader.readerDelegate = 自我；

之后立即显示错误。

任何人都可以指出我搞砸了什么......

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-12T18:37:42.190

I found the solution in a [thread over here](http://sourceforge.net/projects/zbar/forums/forum/1072195/topic/4701140)

You need to add the following code in your `applicationDidLaunch` in your AppDelegate:

`// force view class to load so it may be referenced directly from NIB [ZBarReaderView class];`

Should be running fine after that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-23T15:24:10.190

您也可以尝试下载[64bits ZbarSDK](https://github.com/null09264/ZBarSDK-for-iOS)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:16:42.963

看起来您实际上在界面生成器中添加了一个视图，并试图将其称为`ZbarReaderView`IB 以进行连接。如果我错了，请纠正我，但在这种情况下，我认为 Ib 不会知道你的意思`ZBarReaderView`。

我还假设您实际上没有在 .m 文件中实现委托方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T10:43:39.237

我认为解决方案应该是将 -ObjC 标志添加到构建设置中的“其他链接器标志”部分。如果您不能这样做，例如您使用的 Parse Framework 不允许您设置此标志，您可能必须使用 Morothat 提供的解决方案：在您的 AppDelegate 中设置以下内容：

```
[YOURCLASSNAME class]; 
```

# meteor - 如何解决流星刚刚挂起的问题？

> ID：10111370
> 
> 赞同：2
> 
> 时间：2012-04-11T17:57:38.757
> 
> 标签：meteor

嗨，我今天第一次尝试流星。

我的症状：meteor 在尝试连接到端口 3000 时挂起（它正在侦听，使用 lsof 检查并查看 ps）在端口 3002 上启动了一个 mongo 实例，但我无法使用 mongo 连接到它（所以也许节点也不能？ )

背景：我已经安装并运行了 mongo 2.0.3（会不会有冲突？）

我可以做些什么来排除故障并启动流星？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:03:02.057

网站让我接受答案或开始赏金......所以这是我评论的解释：

> 我机器上的 localhost 首先解析为 ipv6 地址，meteor 仅绑定到 127.0.0.1。

所以要回答“如何排除故障”的具体问题：

我曾经`lsof -i`验证过流星 mongo 实例是否真的在听。这表明我正在监听 127.0.0.1。这消除了 mongo 不听的概念。接下来我做了`host my machine's name`并注意到ipv6首先回来了。这引发了一种预感，并导致我强制流星连接到 127.0.0.1 而不是 localhost 并且它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:02:17.460

好吧，检查端口 3000 是否打开`netstat -a`

试一试`telnet localhost 3000`

使用 firefox 扩展 TamperData 或任何其他流分析工具来查看 HTTP 级别发生了什么[http://tamperdata.mozdev.org/](http://tamperdata.mozdev.org/)

您是否尝试针对捆绑的节点和 mongodb 运行？

# synchronous - Apache 的 FileUtils 中的方法是否执行同步（阻塞）i/o？

> ID：10111372
> 
> 赞同：2
> 
> 时间：2012-04-11T17:57:42.877
> 
> 标签：synchronous, java-io, fileutils

Apache 的 FileUtils 中的方法是否执行同步（阻塞）i/o？

我正在打电话给 FileUtils。*复制目录到目录*。在我的下一行，我想删除我复制的目录。

例子：

```
FileUtils.copyDirectoryToDirectory(source, destination);
FileUtils.deleteDirectory(source); 
```

只是想确保这是“安全的”并且不会发生异步（非阻塞）i/o。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:02:41.490

两件事情：

1.  [FileUtils](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html)不是标准 JDK 的一部分，它是[Apache Commons IO 库](http://commons.apache.org/io)中的一个类。
2.  您提到的操作***不***使用非阻塞 IO。

所以回答你的问题，是的，你的整体操作是安全的。

# javascript - Javascript函数执行顺序

> ID：10111375
> 
> 赞同：4
> 
> 时间：2012-04-11T17:58:04.947
> 
> 标签：javascript

我是 javascript 新手，有一个快速的问题。假设我有以下代码：

```
function entryPoint()
{
   callFunction(parameter);
}

function callFunction(parameter)
{
   ... //do something here
   var anotherFunction = function () { isRun(true); };
} 
```

我的问题是，何时`callFunction(parameter)`调用并声明了变量，在此实例化期间`anotherFunction`是否实际执行？`isRun(true)`我认为它没有，并且 anotherFunction 的内容仅“存储”在变量中，当在某处进行调用时，实际逐行执行`anotherFunction()`。任何人都可以澄清功能混乱吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T18:00:35.200

似乎混乱的是这行代码

```
var anotherFunction = function () { isRun(true); }; 
```

这声明了一个函数/lambda 类型的变量。lambda 被声明它没有运行。在你通过变量调用它之前，它里面的代码不会执行

```
anotherFunction(); // Now it runs 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T18:00:43.360

你几乎完美地描述了它。

`anotherFunction`只是接收到一个新创建的引用`Function Object`（是的，在这种语言中，函数也是对象）但它没有被执行。

你可以通过调用来执行它

```
anotherFunction(); 
```

例如。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T18:07:33.257

你可以像这样编写一个简单的测试：

```
entryPoint();

function entryPoint()
{
    alert("In entryPoint");
    callFunction();
}

function callFunction()
{
    alert("In callFunction");
    var anotherFunction = function () { isRun(); };
}

function isRun()
{
    alert("In isRun");
} 
```

​ 而且，答案是否定的，isRun() 不会被调用。

# javascript - 是否可以在 Javascript 中构建动态自定义对象

> ID：10111377
> 
> 赞同：0
> 
> 时间：2012-04-11T17:58:14.387
> 
> 标签：javascript, asp.net, ajax, google-visualization, javascript-objects

我正在开发一个具有 Google 图表的网站，该网站包含 JavaScript Ajax，它从 Web 服务中提取数据并应该创建将传递给图表的对象。

如果可以构建这个自定义对象，你介意给我一个例子来说明如何做到这一点，我的问题是理解我是如何从自定义值（比如说数组）构造它的。

对象看起来像

```
 chart_data.addRows([
        ['1', 1000, 400, 200],
        ['2', 1000, 460, 200],
        ['3', 860, 580, 200],
        ['4', 1030, 540, null],
        ['5', null, 540, null]
  ]); 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:26:52.290

您可以像这样构建动态对象

```
var ob = new Object();
ob.property1 = 'value1';
ob.property2 = 'value2'; 
```

假设你在运行时不知道属性的名称，你也可以试试这个

```
var ob = new Object();
for(var i = 0; i< 3; i++) ob['property'+i] = value[i]; 
```

并像 ob.property1 或 ob.property2 一样访问它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:05:03.330

函数调用使用一个数组（数组），而不是一个对象。例如，您可以像这样构建数组，并使用变量调用函数：

```
var arr = [];
arr.push(['1', 1000, 400, 200]);
arr.push(['2', 1000, 460, 200]);
arr.push(['3', 860, 580, 200]);
arr.push(['4', 1030, 540, null]);
arr.push(['5', null, 540, null]);

chart_data.addRows(arr); 
```

数组中的每个数组也可以动态构建：

```
var arr1 = [];
arr1.push('1');
arr1.push(1000);
arr1.push(400);
arr1.push(200);
arr.push(arr1); 
```

# php - 不提交表格

> ID：10111379
> 
> 赞同：0
> 
> 时间：2012-04-11T17:58:17.977
> 
> 标签：php, jquery, codeigniter

我的表单将在客户端验证，但我试图弄清楚为什么它没有在服务器端验证。我没有完成我的 php，但它甚至没有在我的控制台中提出 POST 请求，说它正在将表单提交到服务器。

jQuery：

```
$(document).ready(function()
{

/*
* Validate the form when it is submitted
*/
var validateform = $("#newArticleForm").validate({
    invalidHandler: function(form, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {
            var message = errors == 1
            ? 'You missed 1 field. It has been highlighted.'
            : 'You missed ' + errors + ' fields. They have been highlighted.';
            $('.box .content').removeAlertBoxes();
            $('.box .content').alertBox(message, {type: 'warning', icon: true, noMargin: false});
            $('.box .content .alert').css({
                width: '100%',
                margin: '0',
                borderLeft: 'none',
                borderRight: 'none',
                borderRadius: 0
            });
        } else {
            $('.box .content').removeAlertBoxes();
        }
    },
    showErrors : function(errorMap, errorList) {
        this.defaultShowErrors();
        var self = this;
        $.each(errorList, function() {
            var $input = $(this.element);
            var $label = $input.parent().find('label.error').hide();
            $label.addClass('red');
            $label.css('width', '');
            $input.trigger('labeled');
            $label.fadeIn();
        });
    },
    submitHandler: function(form) {
        var dataString = $('#newArticleForm').serialize();
        $.ajax({
            type: 'POST',
            url: '/kowmanager/dashboard/articleSubmit',
            data: dataString,
            dataType: 'json',
            success:  function(data) {
                if (data.error) {
                    $('.box .content').removeAlertBoxes();
                    $('.box .content').alertBox(data.message, {type: 'warning', icon: true, noMargin: false});
                    $('.box .content .alert').css({
                        width: '',
                        margin: '0',
                        borderLeft: 'none',
                        borderRight: 'none',
                        borderRadius: 0
                    });
                }
                else
                {
                    $('.box .content').removeAlertBoxes();
                    $('.box .content').alertBox(data.message, {type: 'success', icon: true, noMargin: false});
                    $('.box .content .alert').css({
                        width: '',
                        margin: '0',
                        borderLeft: 'none',
                        borderRight: 'none',
                        borderRadius: 0
                    }); 
                    $(':input','#newArticleForm')
                    .not(':submit, :button, :hidden, :reset')
                    .val('');  
                }
            }
        });
    }
});

}); 
```

控制器：

```
function articleSubmit()
{
    $outputArray = array('error' => 'yes', 'message' => 'unproccessed');
    $outputMsg = '';
    // Sets validation rules for the login form
    $this->form_validation->set_rules('title', 'Title',
        'trim|required|xss_clean|alpha_numeric');
    $this->form_validation->set_rules('category', 'Category',
        'integer');
    $this->form_validation->set_rules('isSticky', 'Is Sticky',
        'integer');
    $this->form_validation->set_rules('comments', 'Allow Comments',
        'integer');    

    // Checks to see if login form was submitted properly
    if (!$this->form_validation->run())
    {
        $outputArray['message'] =
            'There was a problem submitting the form! Please refresh the window and try again!';
    }
    else
    {

    }
} 
```

看法：

```
<?php $attributes = array('class' => 'validate', 'id' => 'newArticleForm'); ?>
            <?php echo form_open_multipart('', $attributes) ?>
                <div class="content no-padding">
                    <div class="section _100">
                        <?php echo form_label('Title', 'title'); ?>

                        <div>
                            <?php echo form_input('title', '', 'class="required"'); ?>
                        </div>
                    </div>

                    <div class="section _100">
                        <?php echo form_label('Category', 'category'); ?>

                        <div>
                            <?php echo form_dropdown('category', $categories, '', 'class="required"'); ?>
                        </div>
                    </div>

                    <div class="section _100">
                        <?php echo form_label('Is Sticky', 'sticky'); ?>

                        <div>
                            <?php 
                                                            $options = array(
                                                                        ''   => 'Please Select An Option',
                                                                        '0'  => 'No',
                                                                        '1'  => 'Yes',
                                                                     );
                                                            ?><?php echo form_dropdown('sticky', $options, '', 'class="required"'); ?>
                        </div>
                    </div>

                    <div class="section _100">
                        <?php echo form_label('Allow Comments', 'comments'); ?>

                        <div>
                            <?php 
                                                            $options = array(
                                                                        ''   => 'Please Select An Option',
                                                                        '0'  => 'No',
                                                                        '1'  => 'Yes',
                                                                     );
                                                            ?><?php echo form_dropdown('comments', $options, '', 'class="required"'); ?>
                        </div>
                    </div>

                    <div class="section _100">
                        <?php echo form_label('Date Comments Expire', 'datetime'); ?>

                        <div>
                            <input id="datetime" type="datetime" class="required" />
                        </div>
                    </div>

                    <div class="section _100">
                        <?php echo form_label('Status', 'status'); ?>

                        <div>
                            <?php 
                                                            $options = array(
                                                                        ''   => 'Please Select An Option',
                                                                        '0'  => 'Inactive',
                                                                        '1'  => 'Active',
                                                                     );
                                                            ?><?php echo form_dropdown('status', $options, '', 'class="required"'); ?>
                        </div>
                    </div>

                    <div class="section _100">
                        <?php echo form_label('Image', 'file'); ?>
                        <div>
                            <?php echo form_upload('file', '', 'class="required"'); ?>
                        </div>
                    </div>

                    <div class="section _100">
                        <?php echo form_label('Permalink', 'permalink'); ?>

                        <div>
                            <?php echo form_input('permalink', '', 'class="required"'); ?>
                        </div>
                    </div>

                    <div class="section _100">
                        <?php echo form_label('Article', 'article'); ?><?php $attributes = array('name' => 'article', 'cols' => '30', 'rows' => '5', 'id' => 'article', 'class' => 'required') ?>

                        <div>
                            <?php echo form_textarea($attributes); ?>
                        </div>
                    </div>
                </div><!-- End of .content -->

                <div class="actions">
                    <div class="actions-left">
                        <?php echo form_reset(array('id' => 'reset', 'name' => 'reset'), 'Reset'); ?>
                    </div>

                    <div class="actions-right">
                        <?php echo form_submit(array('id' => 'submit', 'name' => 'submit'), 'Submit'); ?>
                    </div>
                </div><!-- End of .actions -->
            <?php echo form_close(); ?> 
```

编辑：

我还有其他使用此 jquery 的表单，但想知道是否有人有任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:11:59.647

我知道这个问题的答案......这让我发疯了，所以我很乐意帮助你解决这个问题：））

Codeigniter 以一种非常特殊的方式处理 POST 请求。如果您这样做，而是使用 GET 请求，您会看到它工作正常……那么发生了什么？

Codeigniter 有一个 crsf 令牌，以确保您以安全的方式发布数据。因此，请确保将此 crsf 值与其余数据一起发送。

我会给你一个例子，这就是我的 POST ajax + codeigniter 的样子：

```
$.ajax({
        type: 'POST',
        dataType: 'HTML',
        data: {
            somevalue : somevalue,
            csrf_test_name  : $.cookie('csrf_cookie_name')
        }, 
```

...

如您所见，您的 crsf 值存储在 cookie 中。我使用 jquery 插件 cookie 助手，但觉得使用任何其他插件都很麻烦。

但是，**请记住，在发出 POST 请求时，codeigniter 始终需要名称“csrf_test_name”**

祝你今天过得愉快！

* * *

对于那些想要阅读更多关于此的内容的人，这就是我所说的： [http ://aymsystems.com/ajax-csrf-protection-codeigniter-20](http://aymsystems.com/ajax-csrf-protection-codeigniter-20)

# java - 通过 http 调用远程 .bat 文件

> ID：10111381
> 
> 赞同：2
> 
> 时间：2012-04-11T17:58:36.090
> 
> 标签：java, python, http, batch-file, remote-access

我在远程机器上有一个 .bat 文件。我想通过http调用来调用它。我不想在远程机器上进行任何更改。有没有办法使用java和http来做到这一点？

```
String command = "cmd /C start C:/Users/abc/Desktop/test.bat";
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec(command); 
```

以上方法可以很好地调用本地机器上的 .bat 文件。我也不介意考虑其他方式，但是通过 http 调用它是首选。

编辑：我现在正在使用 paramiko 来执行此操作。但是，我无法在命令提示符下运行远程命令。

```
ssh = paramiko.SSHClient()

print "Enter the IP address"
ip = raw_input("ip>")
print "Enter the username"
user = raw_input("username>")
print "Enter the password"
pwd = raw_input("password>")

ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(ip, username=user, password=pwd, allow_agent = False)
print "connection successfull"
i, o, e = ssh.exec_command("echo test") # example command
s = e.read()
if s: # an error occurred
    raise RuntimeError, s
result = o.read()
print result 
```

不知何故，它说*AllowDesktopAccess 失败*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:08:14.583

您需要远程机器上的服务，例如配置为按需运行此脚本的 http 服务器（例如，通过 cgi）或可以连接以发出命令的 ssh 服务器。

由于您使用的是 Windows（我假设），因此 PsExec 可能是您需要的服务。

[http://technet.microsoft.com/en-us/sysinternals/bb897553](http://technet.microsoft.com/en-us/sysinternals/bb897553)

# iframe - 带有 Https 的 iFrame

> ID：10111382
> 
> 赞同：0
> 
> 时间：2012-04-11T17:58:37.973
> 
> 标签：iframe, https

我们在母公司有一个使用 https 的应用程序。现在我们的经销商想向访问者隐藏母公司的网址。为此，我们尝试创建一个 HTML 页面，该页面的 iframe 覆盖页面的所有内容区域，并在该 iframe 中运行我们的父应用程序。一切对我们来说都很好，但是当我们通过 HTTPS 运行子应用程序时，它会警告 iFrame 容器页面中的某些内容是不安全的。父应用程序运行良好，没有任何安全警告。我的意思是所有 SSL 都是独立工作的，但不是相互独立的。

如果我没记错的话，这正是 Facebook 通过 https 对他们的应用程序所做的事情。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:01:22.380

如果您在 SSL 页面上使用 iFrame 非安全内容，或在非 SSL 页面上保护内容，此错误将始终显示，您唯一的解决方案是保护所有页面。

# php - 为什么 php-fpm 警告重生孩子？

> ID：10111384
> 
> 赞同：1
> 
> 时间：2012-04-11T17:58:46.073
> 
> 标签：php

当我的服务器收到许多请求时，php-fpm 记录（php5-fpm.log）如下：

```
WARNING: [pool www] seems busy (you may need to increase pm.start_servers, or pm.min/max_spare_servers), spawning 8 children, there are 0 idle, and 6 total children 
```

我的 php-fpm.conf 是：

```
 ...
    pm = dynamic
    pm.max_children = 50
    pm.start_servers = 2
    pm.min_spare_servers = 1
    pm.max_spare_servers = 3
    pm.max_requests = 200
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:59:25.650

看来您需要更改 php-fpm.conf。

```
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3 
```

正如 php-fpm.log 显示的那样，[pool www] 似乎很忙。总共有 6 个子进程，php-fpm 将再产生 8 个。这意味着没有足够的 php-fpm 进程。我建议你根据你的服务器性能增加 pm.start_servers、pm.min_spare_servers 和 pm.min_spare_servers。

# java - 将 JSF 理解为 MVC 框架

> ID：10111387
> 
> 赞同：59
> 
> 时间：2012-04-11T17:58:58.763
> 
> 标签：java, jsf, jakarta-ee, model-view-controller

我正在阅读 JSF，我感到很困惑为什么 JSF 是一个 MVC 框架（或至少哪些部分属于哪个“字母”）。

我看了这个问题：[JSF MVC框架中的MVC是什么组件？](https://stackoverflow.com/questions/5104094/what-components-are-mvc-in-jsf-mvc-framework)

如果您不在聚合视图中查看它，我会在那里阅读模型是您的实体，视图是您的 XHTML 代码，控制器是托管 bean。嗯...好的，但是视图不是经常依赖于执行返回一组实体的进一步业务逻辑调用，例如，描述是否仍然合适？

我读过的一本书将其描述为托管 bean 是 Faces Servlet（控制器）用来调用业务层（模型）的某种“消息”传递器，然后 XHTML 代码就是视图。

有很多解释和差异，所以我不知道是哪一个或如何理解它。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-04-11T21:19:21.320

在 JSF 和许多其他 Web 框架中通常不完全清楚它的哪些部分对应于 MVC 的哪个部分的部分原因是 MVC 模式最初是为桌面应用程序设计的。

在桌面应用程序中，节点 M、V 和 C 是最大连通图，这意味着每个部分都可以相互通信。例如，如果模型发生变化，它可以将此变化推送到视图。这在桌面应用程序中有多个视图表示的情况下尤其明显。更改一个，并实时查看另一个更新。

由于 Web 应用程序的客户端/服务器和请求/响应性质，经典 MVC 不会 1:1 映射到大多数 Web 框架。

具体来说，在 JSF 中，映射如下：

*   **模型**- 服务/DAO 以及它们生产和消费的实体。入口点是托管 bean，但在 Java EE（JSF 是其中的一部分）中，这些工件通常分别由 EJB 和 JPA 实现。
*   **视图**- 将 UI 组件及其组合成一个完整的页面。这完全属于 JSF 领域，分别由 JSF`UIComponent`和 Facelets 实现。
*   **控制器**- 处理来自用户的命令和传入数据的交通警察，将其路由到正确的部分并选择要显示的视图。在 JSF 中没有编写此控制器，但它已经由框架提供（它是`FacesServlet`.

尤其是最后一部分通常不是很容易理解：在 JSF 中，您不实现控制器。因此，支持 bean 或任何其他类型的托管 bean**不是**控制器。

第一部分（模型）也不总是被清楚地理解。业务逻辑可以由 EJB 和 JPA 实现，但从 JSF 的角度来看，值绑定所引用的一切都是模型。这也是 JSF 生命周期阶段之一的名称的来源：`Update Model`. 在这个阶段，JSF 将数据从 UI 组件推送到模型中。从这个意义上说，（JSF）托管 bean 就是模型。

尽管 JSF 本身并没有明确定义这个概念，但托管 bean 有一个经常重复使用的特定用法，称为**支持 bean**。

对于 JSF，支持 bean 仍然是模型，但实际上它是位于模型、视图和控制器中间的管道元素。因为它执行一些可能被视为一些控制器任务的任务，所以这经常被误认为是控制器。但是，如前所述，这是不正确的。它还可以执行一些模型任务，偶尔也可以执行一些视图逻辑。

也可以看看：

*   [MVC 模式相对于老式的 3 层模式的主要优势是什么](https://stackoverflow.com/a/4573554/472792)
*   [JavaServer Faces 的 MVC 架构（第 4.3 章）](http://www.sts.tu-harburg.de/pw-and-m-theses/2007/maab07.pdf)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T18:05:12.917

以极简主义的形式，它是：

*   模型：用于持久性（Hibernate、JPA 等）和数据建模（Java Beans）的任何东西。
*   查看：xhtml、jsp等
*   控制器：托管 Bean。

JSF 使您能够控制您的请求/响应。您创建模型/视图的方式并不直接连接到框架 MVC 概念。这只是一个选择问题。MVC 概念与代码组织有关。

类似地，Struts 是一个 MVC 框架，但它主要用作控制器。

我想我可以帮助您更好地阐明您的想法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-15T15:30:19.897

托管 bean 思想的有趣之处在于，它既可以用作模型（MVC 模式），也可以用作控制器（[mediating-controller MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93adapter)，也称为模型-视图-适配器），其中模型和视图不交互直接地。

在后一种情况下，路由机制不是控制器，因为业务逻辑包含在托管 bean 中，而模型是严格的域模型。然后我们有：

*   **模型**- 包含域模型，在大多数情况下代表数据库中的表，通过 DAO 持久化。

*   **View** - 连接到 bean 的 ui 组件；

*   **控制器**- 包含业务逻辑并处理视图和模型之间通信的托管 bean。

我认为有些人将 mediating-controller MVC 与普通 MVC 混淆，从而导致遇到不同的解释。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-11T16:27:30.517

我认为，这里的所有回答者都是正确的。但对我来说，混淆的主要点来自于将来自框架（此处为 JSF）的 mvc 组件定义与您在应用程序设计中定义的模型和控制器组件混合：

假设您在业务应用程序中从 JSF 更改为任何其他 Web UI 框架：您仍然有一个“业务模型”和一个“业务控制器”。（在我们的项目中，我们只是将这些组件称为“模型”和“过程”。）

这意味着什么：要么您不能使用 mvc 来描述整个应用程序架构，而只能用于 UI，或者您可能必须在整个应用程序堆栈中接受许多控制器、模型之类的组件。

# php - 在 Magento 的顶部导航菜单中添加静态链接

> ID：10111389
> 
> 赞同：5
> 
> 时间：2012-04-11T17:58:59.960
> 
> 标签：php, magento

在我的 Magento 安装中，我有一个从“类别”中的产品类别生成的下拉菜单。它使用代码： `<?php echo $this->getChildHtml('topMenu') ?>`来显示菜单。

但是，每隔一段时间，我想在菜单中添加一个静态 HTML 链接（带有超链接的列表项）。

我如何实现这一目标？

非常感谢您的任何指点

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-20T17:24:19.223

在当前版本的 Magento 中，您可以通过创建一个新类别然后将该类别重定向到您想要的任何 URL（CMS 页面、产品页面、异地等）来做到这一点。

1.  创建一个新的子类别。将此命名为您希望它在菜单中显示的方式。确保它有一个唯一的 URL 键，它是活动的，并且它是“在导航菜单中”。您可以通过拖放更改它在类别菜单中的位置来更改它的显示位置，方法是拖放到您希望它显示的位置。
2.  进入 URL 重写管理。您的新类别应该是刚刚创建的顶级系统链接。如果不是，则按新类别的 id 号过滤表。进入这个新的重定向。
3.  将重定向更改为永久并复制目标路径。下一步您将需要它。保存您的更改。
4.  使用以下选项创建新的自定义 URL 重定向并保存
    *   商店：适用的商店。必须与您要重定向的类别的商店相匹配
    *   ID 路径：您希望类别转到的 URL。（即礼品卡）
    *   请求路径：将您从上一步复制的目标路径粘贴到此处
    *   目标路径：您希望类别转到的 URL。（即礼品卡）
    *   重定向：设置为永久 301
5.  转到索引管理并刷新您的目录 URL 重写（如果需要）

您现在应该能够转到前端并在菜单中看到新类别。单击它会将您直接重定向到您提供的链接。与其他方法相比，我更喜欢这种方法，因为它可以让您更好地控制静态链接的放置位置，并允许您将静态链接的菜单项放在子菜单中。

该视频逐步展示了 Magento Go 的这项技术，但所有 Magento 风格的过程都是相同的。 [http://www.youtube.com/watch?v=5rSIQlRC8Xk](http://www.youtube.com/watch?v=5rSIQlRC8Xk)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T18:12:41.300

这是您的答案： http: [//www.magentocommerce.com/wiki/4_-_themes_and_template_customization/navigation/add_home_link_to_menu_bar](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/navigation/add_home_link_to_menu_bar)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-20T10:58:20.463

你可以试试这个方法。我认为这种方式比其他方式更合适。

[http://www.atwix.com/magento/how-to-add-a-new-item-to-the-navigation-menu/](http://www.atwix.com/magento/how-to-add-a-new-item-to-the-navigation-menu/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-20T23:05:30.170

有几种方法可以做到这一点，你可以重写 Mage_Catalog_Block_Navigation 来实现这一点。

在 renderCategoriesMenuHtml 函数中，您可以使用计数器在 foreach 循环中的各个位置捕获它并渲染一个块：

```
if ($j == 1) {
    $html .= $this->getLayout()->createBlock('namespace/yourmodule')->setTemplate('topMenu/link.phtml')->toHtml();
} 
```

或者像这样直接渲染链接：

```
$html .= '<a href="yourlink.php">Link Name</a>'; 
```

第一种方法为前端开发人员提供了更多的灵活性，而不是在类中硬编码。

您还可以通过此方法实现一些严肃的操作，例如将图像添加到菜单中，我使用类似的方法在菜单中实现“特色产品”功能。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-02T11:57:13.623

**如何添加magento顶部菜单超链接标题标签** 打开文件并查看代码

$html .= 'getUrl() 。'" ' . $outermostClassCode . ' >' . $this->escapeHtml($child->getName()) . '';

app/code/core/Mage/Page/Block/Html/Topmenu.php

$html .= 'getUrl() 。'" ' . $outermostClassCode . 'title="' . $this->escapeHtml($child->getName()) 。'">' . $this->escapeHtml($child->getName()) . '';

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-01-21T10:40:35.483

`top.menu`您可以使用自定义链接在内部创建一个块。将此添加到您的主题`local.xml`文件中：

```
<reference name="header">
    <reference name="top.menu">
        <block type="page/template_links" name="top.menu.custom-links">
            <action method="addLink" translate="label title">
                <label>New Link</label>
                <url>my-url</url>
                <title>New Link</title>
                <prepare>true</prepare>
                <urlParams helper="core/url/getHomeUrl"/>
                <position>60</position>
            </action>
        </block>
    </reference>
</reference> 
```

我认为这是最简单的方法。

# android - 如何为 iOS 和 Android 移动应用程序创建 REST 身份验证

> ID：10111391
> 
> 赞同：3
> 
> 时间：2012-04-11T17:59:07.033
> 
> 标签：android, ios, authentication, rest, mobile

我正在使用 iOS 和 Android 版本构建应用程序。我想创建或实现两个应用程序都可以使用的现有 REST 身份验证过程。我知道我可以通过简单的 Get 服务来完成此操作，但这会以明文形式传递密码。是否有任何 API 可以处理移动应用程序的身份验证？

我不想使用 OAuth，因为我不希望用户不得不采取额外的步骤来允许访问他们的数据。我希望用户无缝地输入用户名和密码，并像我使用的大多数移动应用程序一样进行身份验证。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T18:04:06.727

如果您确定不想要 OAuth 之类的东西，那么您只需要两件事：

1) 仅限 https - 这可以防止用户名：密码被拦截（很容易）

2) 一个 POST URL 发送用户名：密码到

发帖很重要！如果它只是 GET，那么用户名和密码将存储在您的服务器日志中，并且请求可能会被缓存。

你会得到类似的东西：

```
https://www.example.com/myaccount/login 
```

使用 POST 参数

```
username=deanWombourne&password=hunter2 
```

然后，我会将登录状态作为该会话的属性存储在服务器上，以供将来所有请求使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:05:43.783

HTTPS 是您的首选，如果可能的话。

我建议您查看亚马逊 S3 身份验证。 [http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)

也看[这里](https://security.stackexchange.com/questions/13590/hmac-pbkdf2-vs-simple-hashing-algorithm-for-web-service-authentication/13613#13613)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:03:16.607

如果您使用安全连接 (HTTPS)，发送用户名/密码将不是问题。其他需要考虑的事情是，移动设备上的会话超时和会话缓存，以及为此所需的安全步骤，间歇性网络连接问题等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T18:05:33.503

您能否向我们展示您的一些代码，以便我们更好地了解，现在可以使用 OAuth，因为用户更熟悉此方法，并且无需您使用 HTTPS 更安全，因为有一部分用户（我也是）谁不接受在非官方应用程序上写密码，所以他们可能会忽略你。

# c# - web.config 中配置的 UnityContainer

> ID：10111396
> 
> 赞同：3
> 
> 时间：2012-04-11T17:59:28.010
> 
> 标签：c#, asp.net, dependency-injection, inversion-of-control, unity-container

我有以下代码

```
var container = new UnityContainer();                       //LINE 1
container.RegisterType<ILogUtility,LogUtil>();              //LINE 2
var logger = container.Resolve<Logger>();                   //LINE 3
logger.Log(LogType.Warn, "logging from container");         //LINE 4 
```

如何在 web.config 中实现第 2 行，这样我只需要在后面的代码中编写第 1、3 和 4 行代码？我已经在每个地方搜索了代码示例，但它们并不清楚。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T18:11:53.767

看看我的教程

[http://netpl.blogspot.com/2011/11/unity-application-block-is-lightweight.html](http://netpl.blogspot.com/2011/11/unity-application-block-is-lightweight.html)

有一个示例 XML 配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<unity xmlns="http://schemas.microsoft.com/practices/2010/unity">       
<container>        
<register type="ConsoleApplication30.Logic.ICustomService, ConsoleApplication30"                  
          mapTo="ConsoleApplication30.Logic.CustomServiceImpl, ConsoleApplication30" />    
</container></unity> 
```

然后你加载它

```
IUnityContainer container = new UnityContainer();                
container.LoadConfiguration(); 
```

# wpf - 将控件上的属性绑定到工具提示中的控件时出现问题

> ID：10111398
> 
> 赞同：0
> 
> 时间：2012-04-11T17:59:35.577
> 
> 标签：wpf, data-binding, tooltip

我的应用程序使用 WPF 作为表示层。我的代码中有一个`UserControl`，其 XAML 如下所示：

```
<UserControl x:Class="CarSystem.CustomControls.ReadPushPin"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:cs="clr-namespace:CarSystem.CustomControls"
             mc:Ignorable="d"
             DataContext="{Binding Path=Read, RelativeSource={RelativeSource Self}}"
             d:DesignHeight="30"
             d:DesignWidth="30">

    <UserControl.Resources>
        <cs:BooleanToVisibilityConverter x:Key="BoolToVisibility" True="Visible" False="Collapsed" />
        <cs:DateConverterForRadDateTimePicker x:Key="DateConverter" />
    </UserControl.Resources>

    <Image Name="MarkerImage"
           Source="{Binding Path=Source, RelativeSource={RelativeSource AncestorType={x:Type cs:ReadPushPin}}}">
        <Image.ToolTip>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Image Grid.Column="0"
                       Grid.ColumnSpan="2"
                       Grid.Row="0"
                       Height="45"
                       HorizontalAlignment="Center"
                       Source="{Binding Path=ThumbnailImage, RelativeSource={RelativeSource AncestorType={x:Type cs:ReadPushPin}}}"
                       Visibility="{Binding Converter={StaticResource BoolToVisibility}, Path=HasThumbnail, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type cs:ReadPushPin}}}"
                       Width="60" />
                <TextBlock Grid.Column="0"
                           Grid.Row="1"
                           HorizontalAlignment="Right"
                           Text="Plate:" />
                <StackPanel Grid.Column="1"
                            Grid.Row="1"
                            HorizontalAlignment="Left"
                            Orientation="Horizontal">
                    <TextBlock Text="{Binding Path=Plate}" />
                    <TextBlock Text=", " />
                    <TextBlock Text="{Binding Path=State}" />
                </StackPanel>
                <TextBlock Grid.Column="0"
                           Grid.Row="2"
                           HorizontalAlignment="Right"
                           Text="Time:" />
                <TextBlock Grid.Column="1"
                           Grid.Row="2"
                           HorizontalAlignment="Left"
                           Text="{Binding Converter={StaticResource DateConverter}, Path=TimeStamp}" />
                <TextBlock Grid.Column="0"
                           Grid.Row="3"
                           HorizontalAlignment="Right"
                           Text="Nearest Address:" />
                <TextBlock Grid.Column="1"
                           Grid.Row="3"
                           HorizontalAlignment="Left"
                           Text="{Binding Path=NearestAddress, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type cs:ReadPushPin}}}" />
                <TextBlock Grid.Column="0"
                           Grid.Row="4"
                           HorizontalAlignment="Right"
                           Text="Cross Street:" />
                <TextBlock Grid.Column="1"
                           Grid.Row="4"
                           HorizontalAlignment="Left"
                           Text="{Binding Path=CrossStreet, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type cs:ReadPushPin}}}" />
            </Grid>
        </Image.ToolTip>
    </Image>
</UserControl> 
```

在代码隐藏中定义了许多 DependencyProperties，它们绑定到 Image 的 ToolTip 属性中的各种控件。

我的问题是 ThumbnailImage、HasThumbnail、NearestAddress 和 CrossStreet 属性上的绑定不起作用。程序运行时，我在“调试输出”窗口中看到如下错误：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='CarSystem.CustomControls.ReadPushPin', AncestorLevel='1''. BindingExpression:Path=CrossStreet; DataItem=null; target element is 'TextBlock' (Name=''); target property is 'Text' (type 'String') 
```

我究竟做错了什么？如何让绑定工作？

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:15:26.600

每当评估您的相对绑定并且找不到指定的父级时，就会出现此错误。您要求它查找 ReadPushPin 控件，但在可视化树中找不到它。

查看代码，我想您的 ReadPushPin 是此处指定的 UserControl。然后您应该将相对源祖先类型设置为 UserControl。这样就行了。

另外，我想您正在此控件上设置 DataContext 并尝试使用 relativeSource 从中获取绑定值。只要当前元素数据上下文为空，绑定引擎就会找到第一个非空父数据上下文，因此您可以像这样简单绑定

它会查找 UserControl 的可视层次结构并将其作为 DataContext。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:00:44.450

我认为问题与 ToolTip 与它所属的控件不在同一个可视化树中有关。

I solved the problem by adding properties to the view model object for each control in the ToolTip template. As I needed to include a thumbnail image, and I'm storing images in my database as byte arrays, I wrote a class that implements IValueConverter that converts a byte array into a BitmapImage.

This all works. Thanks anyways.

# javascript - 刷新页面或从另一个页面单击相同链接时，活动链接不显示添加的类名

> ID：10111402
> 
> 赞同：0
> 
> 时间：2012-04-11T17:59:47.843
> 
> 标签：javascript, jquery

脚本：

```
$(".classname li a").each(function() {
    var hreflink = $(this).attr("href");
    if (hreflink == location.href) {
        $(this).addClass("active");
    } else {
        $(this).removeClass("active");
    }
}); 
```

CSS：

```
.classname li a.active{color:#ef9223;} 
```

每当我刷新页面时，如果相同的链接位于不同的页面上，则活动类不再应用于该链接。

实际示例我有以下导航链接 ABCDEFGH .... Z. 并且相同的导航在主页（标题部分）中.. 所以当我点击任何一个链接时.. 当我到达时它需要处于活动状态任何一个 ABCD E..或 Z 页。即使在页面刷新时，它也需要保留活动链接。希望能解释......并有所帮助:)

任何帮助、投入、解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:07:45.457

类或您使用 JavaScript 添加的任何内容在页面刷新时不会持续存在。这就是它的工作原理。

JavaScript 只是修改本地加载的 HTML 元素和结构。刷新页面或转到另一个页面后，所有这些状态都会被传入的页面加载清除。服务器不知道您在该页面上所做的任何事情。它将发送一个具有默认状态的新页面，然后运行任何 JavaScript。该脚本也不知道任何先前的页面加载或脚本执行。

如果您希望状态在页面加载时保持不变，您需要在服务器端执行此操作，这涉及对服务器进行 AJAX 调用以使其知道您想要“激活”哪些链接，然后服务器将负责在后续页面加载时添加该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:18:48.863

在每个循环内部，*这*实际上是锚标记，而不是具有类“类名”的标记。你的CSS应该是：

```
.active {color:#ef9223;} 
```

此外，如果此代码在页面加载时运行，则不需要删除类。

看看这个 jsFiddle 的例子 - [http://jsfiddle.net/XWLWL/7/](http://jsfiddle.net/XWLWL/7/)

# java - Java Servlets - 在 web.xml 中存储值列表（单个参数名称的多个参数值）

> ID：10111406
> 
> 赞同：35
> 
> 时间：2012-04-11T18:00:13.593
> 
> 标签：java, web-applications, servlets, web.xml

我正在创建一个需要加载配置信息的 servlet。我需要的部分配置信息是字符串列表（特别是主机名和/或 URL 列表）。

我希望将此信息存储在我的 servlet 的 web.xml 文件中（因此我不必编写自己的解析器）作为 context-param 或 init-param；对于单个参数名称，本质上是多个参数值。

我想要的示例：

```
<context-param>
    <param-name>validHosts</param-name>
    <param-value>example1.com</param-value>
    <param-value>example2.com</param-value>
    <param-value>example3.com</param-value>
</context-param> 
```

我最初的研究似乎表明这是不可能的——任何参数名称（在上下文参数或初始化参数中）只能有一个参数值。

我知道我可以在单个参数值中使用分隔列表，但是如果我仍然想使用 web.xml，那真的是我唯一的选择吗？我应该停止抱怨并编写自己的配置文件解析器吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-11T18:30:12.887

**Servlet 规范说任何上下文参数只能有一个值**。所以，你只剩下分隔列表了。

```
<context-param>
  <param-name>validHosts</param-name>
  <param-value>example1.com,example2.com,.....</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-11T18:41:21.893

将每个参数放在自己的行上。我最近做了以下工作，效果很好：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring-beans.xml
        /WEB-INF/security-config.xml    
    </param-value>
</context-param> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-11T18:17:05.743

是的，只需使用分隔符（因为没有其他可用选项）：

```
<context-param>
    <param-name>validHosts</param-name>
    <param-value>example1.com,example2.com,example3.com</param-value>
</context-param>

then simply
String[] validHosts = param.split(","); // not really much to do 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-08-25T10:32:42.860

您应该使用`;`将它们分隔在 param-value 标记中，例如：

```
<context-param>
  <param-name>validHosts</param-name>
  <param-value>example1.com;example2.com;.....</param-value>
</context-param> 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2022-02-14T13:52:05.013

这对我有用。使用的正确分隔符是`;`

# sql - Powershell使用文件？“被另一个进程使用”

> ID：10111409
> 
> 赞同：3
> 
> 时间：2012-04-11T18:00:26.623
> 
> 标签：sql, file, powershell, csv, smtp

我正在运行这个 powershell 脚本。它第一次运行时运行完美，第二次运行时我得到 .csv 无法访问的错误“因为它正在被另一个进程使用。任何想法脚本的哪个部分“保留”文件和我怎样才能让它最终放手？

```
clear
set-executionpolicy remotesigned
# change this to the directory that the script is sitting in
cd d:\directory

#############################################
# Saves usernames/accountNumbers into array # 
#    and creates sql file for writing to    #
#############################################

# This is the location of the text file containing accounts
$accountNumbers = (Get-Content input.txt) | Sort-Object
$accountID=0
$numAccounts = $accountNumbers.Count
$outString =$null
# the name of the sql file containing the query
$file = New-Item -ItemType file -name sql.sql -Force

###################################
# Load SqlServerProviderSnapin100 #
###################################

if (!(Get-PSSnapin | ?{$_.name -eq 'SqlServerProviderSnapin110'})) 
{ 
    if(Get-PSSnapin -registered | ?{$_.name -eq 'SqlServerProviderSnapin110'}) 
    { 
        add-pssnapin SqlServerProviderSnapin100
        Write-host SQL Server Provider Snapin Loaded
    } 
    else 
    { 
    } 
} 
else 
{ 
Write-host SQL Server Provider Snapin was already loaded
}  

#################################
# Load SqlServerCmdletSnapin100 #
#################################

if (!(Get-PSSnapin | ?{$_.name -eq 'SqlServerCmdletSnapin100'})) 
{ 
    if(Get-PSSnapin -registered | ?{$_.name -eq 'SqlServerCmdletSnapin100'}) 
    { 
        add-pssnapin SqlServerCmdletSnapin100
        Write-host SQL Server Cmdlet Snapin Loaded
    } 
    else 
    { 

    } 
} 
else 
{ 
    Write-host SQL Server CMDlet Snapin was already loaded
} 

####################
# Create SQL query #
####################

# This part of the query is COMPLETELY static. What is put in here will not change. It will usually end with either % or '
$outString = "SELECT stuff FROM table LIKE '%"
# Statement ends at '. loop adds in "xxx' or like 'xxx"
IF ($numAccounts -gt 0)
{
    For ($i =1; $i -le ($AccountNumbers.Count - 1); $i++)
    {
        $outString = $outstring + $AccountNumbers[$accountID]
        $outString = $outString + "' OR ca.accountnumber LIKE '"
        $accountID++
    }
    $outString = $outString + $AccountNumbers[$AccountNumbers.Count - 1] 
}
else
{
    $outString = $outString + $AccountNumbers
}
# This is the end of the query. This is also COMPLETELY static. usually starts with either % or '
$outString = $outString + "%'more sql stuff"
add-content $file $outString
Write-host Sql query dynamically written and saved to file

###########################
# Create CSV to email out #
###########################

#Make sure to point it to the correct input file (sql query made above) and correct output csv. 
Invoke-Sqlcmd -ServerInstance instance -Database database -Username username -Password password -InputFile sql.sql | Export-Csv -Path output.csv

####################################
# Email the CSV to selected people #
####################################

$emailFrom = "to"
$emailTo = "from"
$subject = "test"
$body = "test"
$smtpServer = "server"
# Point this to the correct csv created above
$filename = "output.csv"

$att = new-object Net.mail.attachment($filename)
$msg = new-object net.mail.mailmessage
$smtp = new-object Net.Mail.SmtpClient($smtpServer)

$msg.from = $emailFrom
$msg.to.add($emailto)
$msg.subject = $subject
$msg.body = $body
$msg.attachments.add($att)

$smtp.Send($msg) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:07:47.923

您可以尝试在末尾添加：

```
$att.Dispose()
$msg.Dispose()
$smtp.Dispose() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:10:58.317

您还可以尝试使用[procmon](http://technet.microsoft.com/en-us/sysinternals/bb896645)之类的工具，看看脚本在获得文件锁定并且不释放它时会做什么。此外，由于（假设）问题出在 .csv 文件上，您可以将其作为字节数组加载，而不是将其路径作为附件传递。这样文件应该被读取一次而不是锁定。

# r - 找出在哪个版本的 R 中引入了函数

> ID：10111420
> 
> 赞同：14
> 
> 时间：2012-04-11T18:00:56.613
> 
> 标签：r

有没有办法找出引入了某些功能的 R 版本？例如 regmatches 是一个有用的功能，但它是相当新的，我相信它是在 2.14 中引入的。我怎么能很容易地弄清楚 R 2.14 中引入了诸如 regmatches 之类的东西？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-11T18:07:46.987

比 Dirk 的解决方案更容易的是使用 R 的`news`函数：

```
> newsDB <- news()
> news(grepl("regmatches",Text), db=newsDB)
Changes in version 2.14.0:

NEW FEATURES

    o   New function regmatches() for extracting or replacing matched or
         non-matched substrings from match data obtained by regexpr(),
         gregexpr() and regexec(). 
```

* * *

从 R-3.3.0开始，`news`如果可用，将通过 HTML 帮助系统启动。您可以通过以下`print.news_db`方法抑制它：

```
> print(news(grepl("news",Text), db=newsDB), doBrowse=FALSE)
Changes in version 3.3.0:

NEW FEATURES

    o   news() now displays R and package news files within the HTML help
         system if it is available.  If no news file is found, a visible
         NULL is returned to the console. 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-11T18:04:42.067

您可以使用 SVN 存储库：

```
edd@max:~/svn/r-devel/src/library/base/man$ svn log regmatches.Rd 
------------------------------------------------------------------------
r57006 | hornik | 2011-09-14 14:04:21 -0500 (Wed, 14 Sep 2011) | 1 line

Improve example.
------------------------------------------------------------------------
r56997 | hornik | 2011-09-12 15:16:03 -0500 (Mon, 12 Sep 2011) | 1 line

Document regmatches replacement function.
------------------------------------------------------------------------
r56893 | hornik | 2011-09-02 05:31:01 -0500 (Fri, 02 Sep 2011) | 1 line

Add first version of regmatches replacement function.
------------------------------------------------------------------------
r56818 | hornik | 2011-08-29 02:49:17 -0500 (Mon, 29 Aug 2011) | 1 line

Spelling.
------------------------------------------------------------------------
r56752 | hornik | 2011-08-18 01:40:07 -0500 (Thu, 18 Aug 2011) | 1 line

Add regmatches().
------------------------------------------------------------------------
edd@max:~/svn/r-devel/src/library/base/man$ 
```

我申请`svn log`了手册​​页，因为我没有立即看到定义函数的 R 文件；该命令将在那里以相同的方式工作......

# css - Firefox 到底对我的导航做了什么？

> ID：10111424
> 
> 赞同：2
> 
> 时间：2012-04-11T18:01:08.763
> 
> 标签：css, firefox

好吧，我完全被这个难住了。[Firefox (FF 11/OS X) 在http://ntcc.johnmbjerke.com/](http://ntcc.johnmbjerke.com/)上的导航底部呈现一条白线，但只要您将鼠标悬停在其中一个项目上或向下滚动页面，它就会消失回来。

我已经搞砸了每一个看似相关的项目，但没有运气。有任何想法吗？

截图在这里：[http ://d.pr/5gKE](http://d.pr/5gKE)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T14:02:04.543

这实际上不是一条白线，而是由于`background-size`其他人在上面的评论中正确识别的属性而导致的亚像素渲染。没有办法避免这种 1px 子像素渲染，因为它来自 background-size 属性以及它是如何渲染图像的。

你最好的选择是在 y 轴上移动背景位置 -1px。这意味着亚像素渲染仍然会发生，但它会发生在用户看不到 1px 白色的底部。

只需将您的更改`background-position: center center`为`background-position: center -1px`

这是更改后的屏幕截图：http: [//d.pr/rOX9](http://d.pr/rOX9)

# python - Windows 上 Python 2.7 的 bitarray 包？

> ID：10111428
> 
> 赞同：4
> 
> 时间：2012-04-11T18:01:27.623
> 
> 标签：python, bitarray

我需要一个易于在 32 位 Windows 上安装 Python 2.7 的 bitarray 版本，对于这个项目 py2exe 是不可能的，所以我需要一个易于安装的 exe / msi / egg，有人制作过这个吗？谷歌没有显示任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T20:36:52.587

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#bitarray](http://www.lfd.uci.edu/~gohlke/pythonlibs/#bitarray)

Bitarray 也是[EPD](http://enthought.com/products/epd.php)的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:24:07.807

[pyInstaller](http://www.pyinstaller.org/) is my weapon of choice. I feel it works much better than [py2exe](http://www.py2exe.org/).

# r - R中的4向维恩图？

> ID：10111430
> 
> 赞同：3
> 
> 时间：2012-04-11T18:01:32.570
> 
> 标签：r, venn-diagram

我正在尝试在 R 中制作一个 4 路维恩图。我有这些数据，我想把它放在图中：

![在此处输入图像描述](../Images/90d7b012ce0a8b8f052e8ed8fcdd7307.png)

谁能给我一个建议怎么做？我尝试使用函数 vennDiagram() 但这不起作用，因为它是一个 4way 图。

我也在尝试使用 VennDiagram 包，但数据“分配”到图中正确位置的方式确实令人困惑。我正在使用这段代码：

```
library (VennDiagram)
venn.diagram(
    x=list(
    I=c(1:18,19:31,32:119,125:129,130:192,193:144,145:326,327:373),
    VI=c(516:542,510:515,420:497,498:509,145:326,327:373,130:192,193:144),
    II=c(19:31,32:119,145:326,327:373,374:378,378:419,420:497,498:509),
    III=c(506:509,378:419,32:119,125:129,130:192,145:326,420:497,510:515)
    ),
    filename = "4Way_Venn.tiff",
    col = "black",
    lty = "dotted",
    lwd = 4,
    fill = c("cornflowerblue", "green", "yellow", "darkorchid1"),
    alpha = 0.50,
    label.col = c("orange", "white", "darkorchid4", "white", "white", "white", 
                  "white", "white", "darkblue", "white", "white", "white", 
                  "white", "darkgreen", "white"),
    cex = 2.5,
    fontfamily = "serif",
    fontface = "bold",
    cat.col = c("darkblue", "darkgreen", "orange", "darkorchid4"),
    cat.cex = 2.5,
    cat.fontfamily = "serif"
    ); 
```

谁能帮我？也许使用比使用 VennDiagram 包更简单的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T19:03:07.687

我可能在这里遗漏了重点，但我不确定你想如何使用这些“计数”来制作你的维恩图？[从“c1”到“c4”列，您可以使用venneuler](http://cran.r-project.org/web/packages/venneuler/index.html)包非常轻松地制作维恩图：

```
require(venneuler)
#here I replicate your data
#because it's repeatable, you can use `rep` function to generate it
c1 <- rep(c(0,1),each=8)
c2 <- rep(c(0,1),each=4,times=2)
c3 <- rep(c(0,1),each=2,times=4)
c4 <- rep(c(0,1),times=8)
#put your data into matrix
m <- as.matrix(data.frame(C1=c1,C2=c2,C3=c3,C4=c4))
#plot it
v = venneuler(m)
plot(v) 
```

![在此处输入图像描述](../Images/0a550af29f96e9a08d081f7c6d921f2e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T19:18:53.483

请注意：我尝试在几个支持这种功能的包中构建 4（和更高）维恩图，但至少在一种情况下，子空间没有正确绘制。例如，一个完全包含在另一个子集中的子集被绘制，其部分区域延伸到父子集之外。不幸的是，我不记得是哪个包做到了。
所以，我的回答是：`venneuler`像 GOA 所说的那样尝试，尝试`require(sos); ???venn`，并确保仔细测试每个包，以确保它正确地呈现交叉点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-11T17:31:39.177

使用新版本的 nVennR 包 (0.2.0)，您可以通过两种方式进行操作：

1）根据您提供的代码，

```
myV <- plotVenn(list(I=c(1:18,19:31,32:119,125:129,130:192,193:144,145:326,327:373), 
IV=c(516:542,510:515,420:497,498:509,145:326,327:373,130:192,193:144), 
II=c(19:31,32:119,145:326,327:373,374:378,378:419,420:497,498:509), 
III=c(506:509,378:419,32:119,125:129,130:192,145:326,420:497,510:515)),
setColors = c("cornflowerblue", "green", "yellow", "darkorchid1"), borderWidth=3, opacity=0.2) 
```

[![结果](../Images/b2afe059143b6a05ecafad9b4dc00f81.png)](https://i.stack.imgur.com/GpxAf.jpg)

2) 直接从第一次上市，

```
myV2 <- createVennObj(nSets = 4, sNames = c("c1", "c2", "c3", "c4"), sSizes = c(26, 27, 4, 6, 5, 12, 42, 78, 18, 52, 4, 63, 13, 47, 88, 182))
myV2 <- plotVenn(nVennObj = myV2) 
```

[![结果2](../Images/b7442ea00bdd644ef9c86a395755074f.png)](https://i.stack.imgur.com/CbzkZ.jpg)

第一种方法的优点之一是可以查询每个区域中的元素：

```
getVennRegion(myV, c("I", "III"))
[1] 125 126 127 128 129 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-08T09:45:46.937

VennDiagram 包有一个用于 4 路维恩的函数，即 draw.quad.venn() 函数：

[http://cran.r-project.org/web/packages/VennDiagram/VennDiagram.pdf](http://cran.r-project.org/web/packages/VennDiagram/VennDiagram.pdf)

# c# - 字符串连接或 HtmlGenericControl html 控件？

> ID：10111431
> 
> 赞同：0
> 
> 时间：2012-04-11T18:01:33.753
> 
> 标签：c#, asp.net, html

我正在尝试使用`ListView`. 对于每个项目，我必须创建这样的东西

```
<div>
  <ul>
    <li>foo<li>
    <li>bar<li>
    .... Dynamic count of <li>
  <ul>
  <span>Some dynamic text</span>
  .. bunch of other dynamicly generated html
</div> 
```

我的问题是生成 html 的更好方法是什么。通过使用这样的字符串连接

```
StringBuilder sb = new StringBuilder();
sb.Append("<div>");
.......
sb.Append("</div>") 
```

或者像这样使用 HtmlGenericControl：

```
 HtmlGenericControl htmlItem = new HtmlGenericControl( "div" );
   ....

   using( TextWriter textWriter = new StringWriter( ) )
        using( HtmlTextWriter htmlWriter = new HtmlTextWriter( textWriter ) )
        {
            HtmlGenericControl htmlItem = null;

            CreateMenuItem( menuItem, 0, null );

            htmlItem.RenderControl( htmlWriter );

            return textWriter.ToString( );
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:05:50.817

我更喜欢这种方式，因为**这给了我更多的可读性**。看着这个，我可以很容易地想象，我的输出会是什么样子。

```
StringBuilder sb = new StringBuilder();
sb.Append("<div>");
sb.Append("<ul>");
sb.Append("<li>Item1</li>");
sb.Append("<li>Item2</li>");
sb.Append("<li>Item3</li>");
sb.Append("</ul>");
sb.Append("</div>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:20:24.277

**HtmlTextWriter 很好，因为：**

1.  HtmlTextWriter 是最干净的，并且标记在呈现时缩进很好。HtmlTextWriter 直接写入输出流会影响性能。
2.  HtmlTextWriter 支持自动编码 HTML

**在调用 ToString 之前，Stringbuilder 不会写入输出流。**

# php - 通过 jQuery 或 Ajax 具有文件数限制的多文件上传器

> ID：10111434
> 
> 赞同：0
> 
> 时间：2012-04-11T18:02:01.237
> 
> 标签：php, jquery, ajax, file-upload

我正在寻找一个多文件上传器，它可以上传有限数量的具有以下规格的文件。

类似于下面给出的插件，它也显示了一个上传按钮，并使用一些 jquery 或 ajax 工作（不使用 Flash）上传所有文件，显示一个滑块以显示正在上传，并且在事件完成时显示它们只是输入框下方。在每个文件的某个角落显示一个叉号，供用户取消选择该特定文件。

并确保文件数量不超过提供的数量。

[http://www.fyneworks.com/jquery/multiple-file-upload](http://www.fyneworks.com/jquery/multiple-file-upload)

我使用了这个插件，它完成了主要工作（选择多个文件并限制它们），但是当文件的大小太大并且数量太多时，我的脚本会失败。

任何可以完成这项工作，接近预期条件的东西都是受欢迎的。此外，脚本应该是 php 兼容的。

可以限制文件数量并将它们上传到服务器并仅在输入按钮下方显示它们的东西就可以了。我会管理其余的。但它应该易于使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:15:20.330

我认为你应该看看[jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)（链接到它的演示）。

它似乎可以满足您的所有要求，甚至更多。它也适用于 PHP。您可以设置文件的大小限制。

它确实使用 Twitter Bootstrap，因此默认情况下看起来很棒。但是如果你想改变样式（例如用 X 代替取消按钮）你应该可以在 CSS 中做到这一点。

*   它不使用 Flash
*   它适用于 PHP
*   它允许您限制文件大小和文件数量（请参阅[文档](https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-implement-File-Limits)）
*   它允许您拖放（不是您的要求之一，但仍然很酷）
*   它显示单个文件的进度和整体进度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:04:38.843

我一直在使用这个插件，到目前为止它很棒！

www.uploadify.com

# java - 我该如何实施以下内容？

> ID：10111435
> 
> 赞同：1
> 
> 时间：2012-04-11T18:02:03.710
> 
> 标签：java, web-services

我有一个包含一些类的 java 程序。三个方法获取输入 A 并提供输出 B。我需要将这些方法作为 Web 服务提供，以便我可以询问类似[http://test.com/method?input=A](http://test.com/method?input=A)的内容并返回结果 B。我不想重写我现有的代码。是否有可用的东西，例如 JAVA 的 Web 服务框架，可以让我为这三种方法创建 Web 服务接口。最简单的方法是什么？

在我的研究过程中，我遇到了许多首字母缩略词和其他东西，例如动态项目、JAVA EE、Glassfish 等……什么可以实现我的要求？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:05:40.910

您可能需要某种网络框架——Glassfish 就是一个例子。基本上，您的应用程序不是为接收 Web 请求而构建的，因此您需要某种容器（例如，像 Tomcat [http://en.wikipedia.org/wiki/Web_container](http://en.wikipedia.org/wiki/Web_container)这样的 Servlet 容器）。

我认为“restlet”是一个可能适合您需求的小 servlet 容器。

看看：[http ://www.restlet.org/](http://www.restlet.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:04:48.350

我发现做快速 Java 服务的最简单方法是[Restlet](http://restlet.org)。

您可以使用他们的教程从头开始启动和运行网络服务器，就像字面上的 20 分钟一样。下面的 Restlet 应该可以作为骨架框架开箱即用。当然，您将替换调用`String b = ...`，并将其替换为您自己的库。

```
public class Main extends Application {

    public static void main(String[] args) {
        Main main = new Main();
        main.start();
    }

    private void start() {
        Component c = new Component();
        c.getServers().add(Protocol.HTTP, 80);
        Application app = new Main();
        c.getDefaultHost().attach(app);
        c.start();
    }

    public Restlet createInboundRoot() {
        Router router = new Router(getContext());
        router.attach("/method/{input}", new Restlet(getContext()) {
            public void handle(Request request, Response response) {
                String a = request.getAttributes().get("input").toString();
                String b = MyLibraries.compute(a);
                response.setEntity(b, MediaType.TEXT_HTML);
            }
        });
        return router;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:05:07.730

如果您在 Java EE 6 服务器上运行，则可以使用 JAX-RS：[http ://docs.oracle.com/javaee/6/tutorial/doc/gilik.html](http://docs.oracle.com/javaee/6/tutorial/doc/gilik.html)

# nuget - 使用包还原时，有没有办法自动更新 .nuget 文件夹中的 nuget.exe？

> ID：10111441
> 
> 赞同：93
> 
> 时间：2012-04-11T18:02:38.360
> 
> 标签：nuget

自 Nuget 1.5 以来，我的团队一直在使用启用包还原选项来使包不受我们的源代码控制。当 Nuget 1.6 发布时，我们注意到一个问题，即它没有将包拉下来，并将其追踪到 .nuget 文件夹中的 Nuget.exe，需要更新到 1.6 以匹配包管理器。

更新 Nuget 后，更新解决方案的最佳方法是什么？我没有从工作室看到一个简单的方法来判断解决方案文件夹中的 nuget 版本。到目前为止，我们清除了 .nuget 文件夹并重新运行 Enable Package Restore 命令。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-04-11T18:32:24.910

我建议从命令行使用以下命令更新 .nuget\nuget.exe：

```
nuget.exe update -self 
```

[编辑]：首先关闭 VS 解决方案。如果有更新并打开解决方案，则将从解决方案中删除 nuget.exe。

您*可以*通过修改 .nuget\nuget.targets 以添加上述命令，在还原时自动更新 nuget.exe。我将以那里的恢复命令为例。但我不确定它是否值得，nuget.exe 更新并不常见，并且向后兼容性应该很少中断。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-25T18:19:07.917

我发现处理此问题的最佳方法是简单地删除 .nuget 文件夹并重新启用解决方案范围的包还原。如上所述，您可以在构建中添加自我更新命令，但如果版本之间发生更改（或从解决方案中删除引用），则不会更新目标或配置文件。也许这没什么大不了的，但这是确保您拥有最新的 exe 和配置文件的可靠方法。归根结底，只有在您需要访问新命令或新版本最终出现重大更改时，更新才是一个问题。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-11-04T17:31:19.123

[请参阅 David Ebbo 在他的博客上的帖子](http://blog.davidebbo.com/2014/01/the-right-way-to-restore-nuget-packages.html)

基本上，您需要做的就是在 .sln 文件旁边创建一个 NuGet.Config 文件，其中包含：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <packageSources>
    <clear/>
    <add key="nuget.org" value="https://www.nuget.org/api/v2/" />
    <add key="aspnetwebstacknightlyrelease" value="https://www.myget.org/f/aspnetwebstacknightlyrelease/" />
  </packageSources>
</configuration> 
```

# node.js - 护照：登录和帐户注册的不同重定向

> ID：10111445
> 
> 赞同：10
> 
> 时间：2012-04-11T18:02:52.400
> 
> 标签：node.js, express, passport.js

我在我的应用程序中使用护照模块（github身份验证），我想根据操作进行重定向......我检查它是否只是正常登录或者用户是否是第一次登录。

```
passport.use(new GitHubStrategy({
    clientID: conf.github.app_id,
    clientSecret: conf.github.app_secret,
    callbackURL: conf.github.callback_url
  },
  function(accessToken, refreshToken, profile, done) {
    // asynchronous verification, for effect...
    process.nextTick(function () {

      // To keep the example simple, the user's GitHub profile is returned to
      // represent the logged-in user.  In a typical application, you would want
      // to associate the GitHub account with a user record in your database,
      // and return that user instead.

      Models_User.findOrCreateUser(profile, function(msg){
        console.log("auth type:" + msg);
      });

      return done(null, profile);

    });
  }
)); 
```

在我的 findOrCreateUser 函数中，我检查它是否是新用户并执行所有 db 操作......为了测试，我让函数返回一个 msg 变量，它只是一个表示“login”或“new_registration”的字符串。

所以我的问题是如何“传输”我从 findOrCreateUser 获得的变量，以便在护照身份验证完成后我可以相应地重定向（“/welcome”或“/back_again”）。

我的应用程序中的另一个护照代码：

```
// GET /auth/github
//   Use passport.authenticate() as route middleware to authenticate the
//   request.  The first step in GitHub authentication will involve redirecting
//   the user to github.com.  After authorization, GitHubwill redirect the user
//   back to this application at /auth/github/callback
app.get('/auth/github',
  passport.authenticate('github'),
  //passport.authenticate('github', { scope: ['user', 'public_repo', 'gist'] }),
  function(req, res){
    // The request will be redirected to GitHub for authentication, so this
    // function will not be called.
  });

// GET /auth/github/callback
//   Use passport.authenticate() as route middleware to authenticate the
//   request.  If authentication fails, the user will be redirected back to the
//   login page.  Otherwise, the primary route function function will be called,
//   which, in this example, will redirect the user to the home page.
app.get('/auth/github/callback', 
  passport.authenticate('github', { successRedirect: '/', failureRedirect: '/login' }),
  function(req, res) {
    res.redirect('/');
  }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T00:15:28.623

In your verify callback, I would change things up so that the `findOrCreateUser` function supplies the actual record to the callback, and then pass that through to `done()`, like so:

```
Models_User.findOrCreateUser(profile, function(user){
  console.log("auth type:" + msg);
  return done(null, user);
});

// take this out, use the actual model above
//return done(null, profile); 
```

Now, when handling the callback URL after authentication, you can check this user record and see if it was new (I'm assuming it has an isNew property here):

```
app.get('/auth/github/callback', 
  passport.authenticate('github', { failureRedirect: '/login' }),
  function(req, res) {
    // successful auth, user is set at req.user.  redirect as necessary.
    if (req.user.isNew) { return res.redirect('/back_again'); }
    res.redirect('/welcome');
  }); 
```

# flash - 将 flash swf 文件合并为一个

> ID：10111448
> 
> 赞同：1
> 
> 时间：2012-04-11T18:03:08.833
> 
> 标签：flash

我在谷歌上试过没有运气，所以在我花更多时间之前想知道它是否可能。

我有 50 个非常小的 1 - 2 秒 swf 文件，每个文件都像一张幻灯片。我想将它们全部组合成一个闪存文件。

这可能吗，作为说明，我没有刚刚随 swf 文件提供的原始源文件。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:39:00.443

如果您的 swf 文件是在**没有**选项的情况下发布`Protect from import`的，您可以简单地创建一个新的 flash 项目并在那里导入所有 50 个 swf 文件，就像您导入任何其他媒体文件 () 一样，然后在时间轴上以正确的位置播放/他们每个人的时间。

要测试您是否有幸拥有不受保护的 swf 文件，只需在 Flash 中创建一个新的 flash 项目并使用`Import > Import to Library`您的一个 swf 文件，然后查看是否有错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:41:31.030

您可以使用 AS3 加载器。[请参阅http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)上的文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:02:10.733

如果您使用 Flex SDK，您可以使用`[Embed(source="file.swf", mimeType="application/octet-stream")]`meta 将 SWF 嵌入为纯数据。稍后您可以使用`Loader.loadBytes(swfByteArray);`“创建”它们。但是，这在 iOS 上不起作用，因为在 iOS 上为 Flash 生成的字节码是不同的。

# android - 项目导入后 Eclipse 布局编辑器不起作用

> ID：10111451
> 
> 赞同：0
> 
> 时间：2012-04-11T18:03:23.533
> 
> 标签：android, eclipse, android-layout

我正在两台计算机内处理一些项目。我正在使用保管箱同步，所以我的工作区在两台计算机上是相同的。但是，在此类同步项目无法正常工作之后。我不得不清理它并删除一些库以使其工作。

仍然 - 不能强制布局编辑器合作，它不显示任何东西。

我注意到，当我创建新项目时，除了 androidX 库之外，还有我尚未实现的 com.android.ide.eclipse.adt。它在哪里？

org.eclipse.ui 还记录错误日志“未处理的事件循环异常”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:06:27.920

`Restart Your Eclipse` **和**

`Right click on XML LAYOUT FILE-->Open With-->Android Layout Editor`

# php - 我无法访问 http://localhost/phpmyadmin/

> ID：10111455
> 
> 赞同：56
> 
> 时间：2012-04-11T18:03:43.097
> 
> 标签：php, phpmyadmin

## 问题：

我无法访问`localhost/phpmyadmin/`

在我可以访问之前，`localhost/phpmyadmin/`但今天当我尝试访问此页面时，我得到了奇怪的页面

我也可以`localhost/xampp/`毫无问题地访问

## 问题：

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-11-16T11:54:25.417

您需要做的是将 phpmyadmin 添加到 apache 配置中：

```
sudo nano /etc/apache2/apache2.conf 
```

将 phpmyadmin 配置添加到文件中：

```
Include /etc/phpmyadmin/apache.conf 
```

然后重启apache：

```
sudo service apache2 restart 
```

在 Windows 上，我认为您可以导航到 apache2 配置文件并包含如上所示的 phpmyadmin 配置文件，然后重新启动 apache

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-05-06T03:17:46.277

更简洁的方法是创建新的配置文件：

```
/etc/apache2/conf-available/phpmyadmin.conf 
```

并在其中写下以下内容：

```
Include /etc/phpmyadmin/apache.conf 
```

然后，将文件软链接到目录`/etc/apache2/conf-enabled`：

```
sudo ln -s /etc/apache2/conf-available/phpmyadmin.conf /etc/apache2/conf-enabled 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-06-09T13:14:33.350

您应该使用`localhost:portnumber/phpmyadmin` Here the`Portnumber`是您为 Web 服务器设置的数字，或者如果您直到现在还没有设置它，它是默认值 - `80`。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-05-05T22:43:05.457

确保 apache webserver 和 MySQL 服务器都在运行。我有同样的失败，因为我忘了启动我的网络服务器。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-05-16T16:33:12.923

运行 Xampp 时，检查 apache 端口号。例如：如果显示端口 80，则输入

```
http://localhost:80/phpmyadmin/ 
```

之后会自动显示

> [http://localhost/phpmyadmin/](http://localhost/phpmyadmin/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-16T18:10:09.770

我正在使用 Linux Mint：在安装 LAMP 和 PhpMyAdmin 之后，我链接了 Apache 和 PhpMyAdmin 的配置文件。它成功了。以下是命令。

```
sudo ln -s /etc/phpmyadmin/apache.conf /etc/apache2/conf.d/phpmyadmin.conf 
```

`sudo /etc/init.d/apache2 reload`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-12-06T15:43:35.307

```
sudo apt-get -y --reinstall install phpmyadmin;
sudo service apache2 restart; 
```

希望这可以帮助。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-12-24T17:48:53.130

它通常**发生**在您**的 localhost 的默认端口被另一个应用程序**（如 apache tomcat）使用时。简单的解决方法是**停止应用程序**并简单地转到**localhost/phpmyadmin**。

就我而言，它*在*停止*apache tomcat*后起作用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-11T18:08:19.923

有时它区分大小写。你试过去`http://localhost/phpMyAdmin`吗？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-16T09:39:16.960

根据您的输出，您的一个插件与 phpmyadmin 发生了冲突。尝试禁用所有插件以查看是否有效。

如果是这样，请一一启用并再次检查，以找到有问题的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-10-20T20:22:26.677

在 Ubuntu 14.04 上解决同样的问题，我使用代码：

```
 sudo ln -s /etc/phpmyadmin/apache.conf /etc/apache2/conf-enabled/phpmyadmin.conf
    sudo /etc/init.d/apache2 reload 
```

这是因为从 Ubuntu 13 开始，Apache 从 /etc/apache2/conf-enabled 目录加载配置文件。

[Ubuntu 文档](https://help.ubuntu.com/community/phpMyAdmin)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-03-09T09:55:49.247

您需要重新加载服务器。

如果你使用 apache 服务器 `systemctl reload apache2`

如果你使用 nginx 服务器 `systemctl reload nginx`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-05-30T04:37:58.253

我也面临同样的问题。我研究它并发现，这仅仅是因为我错误地将我的“phpmyadmin”文件夹移动到 Xampp 内的某个文件夹中。浏览主“XAMPP”文件夹内的所有其他文件夹。然后，如果您在“xampp”以外的另一个文件夹中找到“phpmyadmin”，请将其移回主“XAmpp”文件夹并刷新页面。:)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-04-08T17:52:09.107

从您在其中一条评论中链接的图像的输出来看：

[http://imageshack.us/photo/my-images/638/erroruh.png/](http://imageshack.us/photo/my-images/638/erroruh.png/)

...也许您不小心从您认为正在下载 phpMyAdmin 的网站下载了某种形式的网站。文本包含对“Dropbox”的引用，这让我认为显示的信息与 phpmyadmin 无关。

尝试重新安装，看看是否有帮助...

[http://www.phpmyadmin.net](http://www.phpmyadmin.net)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-09-21T04:29:24.310

运行 Apache 服务器，记下端口号（例如：8081） 打开浏览器并输入 localhost:8081（或 apache 的端口号）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-04-14T11:00:16.337

或者可能是 Skype 在同一个端口上运行（默认情况下）。

禁用 Skype 或将 Skype 配置为使用其他端口

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-02-18T09:49:10.670

将 phpmyadmin 配置包含到 apache2 中的一种更简洁的方法是通过以下方式创建一个新的配置文件：

```
sudo nano /etc/apache2/conf-enabled/phpmyadmin.conf 
```

并写在里面：

```
Include /etc/phpmyadmin/apache.conf 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-10-09T18:33:59.800

只需更改 - $cfg['Servers'][$i]['host'] = 'localhost'; 在 config.inc.ph 中。即从现有到本地主机，如果你在本地安装它

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2013-11-21T22:58:08.627

确保您仍然有 phpMyAdmin，也许您在 htdocs 文件夹中删除了它？

获取最新版本：[http ://www.phpmyadmin.net/home_page/downloads.php](http://www.phpmyadmin.net/home_page/downloads.php)

解压缩，然后将 phpMyAdmin（如果有版本号，则重命名文件夹）放在您的 htdocs 文件夹中。

确保 Skype 被禁用，因为它有时会在与您的 XAMPP 安装相同的端口上运行......我不知道为什么，但是在某些 Windows 7 机器上通过 xampp 安装的 apache 我看到如果 Skype 在 10 年后打开，则 apache 不会运行这行得通。

所以确保 apache 正在运行，mysql 正在运行并点击：

本地主机/phpMyAdmin

你应该得到某种安装提示。逐步完成，您将在此过程中学到很多东西。但基本上它的一个配置文件需要一些设置。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2015-09-18T14:00:43.010

我有同样的问题。也无法访问`http://localhost/joomla`。
我不太明白其他答案。
对我来说简单的解决方案：

1.  停止 xampp 中的所有操作（我运行了 apache 和 mysql。端口 80 和 7000something 上的 apache）
2.  退出火狐
3.  重新启动操作（apache 和 mysql）
4.  重启火狐。
5.  打开`http://localhost/phpmyadmin`（或`http://localhost/joomla`- 不管它是什么）
6.  瞧！

现在 apache 在端口 80 和 443 上运行，mysql 在 3306 上运行。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2020-01-07T13:12:52.693

你需要做的是将phpmyadmin添加到apache配置中：⠀⠀⠀⠀⠀⠀⠀

```
sudo nano /etc/apache2/apache2.conf 
```

将 phpmyadmin 配置添加到文件中：

```
Include /etc/phpmyadmin/apache.conf 
```

然后重启apache：

```
sudo service apache2 restart 
```

在 ubuntu 18.0.1 上，我认为您可以导航到 apache2 配置文件并包含如上所示的 phpmyadmin 配置文件，然后重新启动 apache

[http://127.0.0.1/phpmyadmin/](http://127.0.0.1/phpmyadmin/)

# node.js - 节点串行端口操作系统要求

> ID：10111456
> 
> 赞同：3
> 
> 时间：2012-04-11T18:03:53.997
> 
> 标签：node.js, node-serialport

我需要能够从我的 JS 代码中读取串行端口。我最近偶然发现了这个组件 [https://github.com/voodootikigod/node-serialport](https://github.com/voodootikigod/node-serialport)

对客户端计算机操作系统有什么要求？

要安装它，它说要做的就是

```
 npm install serialport 
```

那是什么？这个命令应该在哪里运行？更多细节将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T20:12:32.700

您指出的模块是用于[node.js](http://nodejs.org/)的事件驱动的 Javascript 应用程序服务器。这里的重点是 node.js 是服务器端的，而不是在浏览器中运行的东西。

您指出的命令调用了[npm](http://npmjs.org/)，一个 node.js 的包管理器。您需要在代码预期运行的服务器上执行该命令。

虽然只有代码的作者才能给你一个权威的答案，但对[Javascript](https://github.com/voodootikigod/node-serialport/blob/master/serialport.js)和[C++ 代码](https://github.com/voodootikigod/node-serialport/blob/master/serialport_native/serialport_native.cc)的快速回顾似乎并没有揭示任何特定于平台的内容。

好吧，只要您可以编译该 C++ 代码。如果您的服务器在 Windows 上，这[似乎是个问题。](https://stackoverflow.com/questions/8462846/building-node-js-modules-in-windows)

该库似乎想将串行端口视为常规文件。如果您使用的是 Unixish 操作系统（Linux、BSD、Solaris、OS X 等——尽管我认为 Mac 在几十年内还没有串行端口），这应该是一种明显的方法，但它是如果您可以要求 Windows 打开`COM1`并使其正常工作，则不会立即清楚或明显。

因此，如果您在 Unix 上托管它而不是在 Windows 上托管，那么您成功的机会就会大得多。

# django - Django和外键的反向关系

> ID：10111463
> 
> 赞同：12
> 
> 时间：2012-04-11T18:04:10.800
> 
> 标签：django, django-models

假设以下简单模型：

```
class Blog(models.Model):
    name = models.CharField(max_length=100)
    tagline = models.TextField()

class Entry(models.Model):
    blog = models.ForeignKey(Blog)
    headline = models.CharField(max_length=255)
    body_text = models.TextField()
    author = models.ForeignKey(User, related_name='author_set') 
```

如何获取参与特定博客的所有作者（即 pk=1）？我尝试过这样的事情，但没有奏效。

```
User.objects.author_set.filter(blog=Blog.objects.get(pk=1)) 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T18:12:50.470

```
User.objects.filter(author_set__blog__pk=1) 
```

我没有注意您的相关名称，因此上面的代码（修订版）现在使用正确的相关名称。然而，这是一个*非常*糟糕的相关名称。相关名称应描述对面的内容，即`Entry`. 所以真的应该是`related_name='entry_set'`。但是，无论如何，这是默认设置，因此您可以`related_name`根据需要删除。我通常会使用相关类的简单复数版本，在这种情况下是`related_name='entries'`. 或者，您可能想要更具体地使用“blog_entries”之类的内容。

# objective-c - 切换视图 - UIViewController 到 UITabBarController

> ID：10111465
> 
> 赞同：1
> 
> 时间：2012-04-11T18:04:23.657
> 
> 标签：objective-c, xcode

我制作了一个非常简单的基于导航的应用程序（UIViewController）。该视图在 Main RootViewController 上有一个按钮。

接下来，我制作了 2 个类：TabOneViewController、TabTwoViewController。都好。然后我创建了一个新的类 TabBarViewController。我打开了 NIB 文件并将 ``UITabBarController 放到它上面。默认情况下，它在其中创建的两个选项卡（分别）分配给我的 TabOne 和 TabTwo 视图控制器。strong text 然后在我的 TabBarViewController 中，我为 UITabBarController 制作了一个 IBOutlet，合成了它等等。我通过“文件所有者”将它链接到 Interface builder 中。

在 RootViewController 中，我将按钮链接到我的“pushView”方法，在这个 pushView 方法中，我有以下代码：

```
- (IBAction) pushView {
    TabBarViewController *controller = [[TabBarViewController alloc] init];
    [self.navigationController pushViewController:controller animated:YES];
    [controller release];
} 
```

最终结果是它确实推送了一个视图，但我看不到底部的标签栏，更不用说我添加到控制器的任何页面了。

我究竟做错了什么？为什么我不能在 IB 中链接它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:30:33.677

我不是 100% 确定是否允许这样做.. 因为您已经有一个 tabBarController 作为 rootViewController，并且您又删除了一个 tabBarController 作为第一个选项卡控制器，选项卡将重叠，考虑到您在 iPhone 上拥有的空间量，这是有意义的不允许 tabViewController 在另一个里面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:30:51.307

首先，您需要为您的视图控制器分配您的 nib：

```
TabBarViewController *controller = [[TabBarViewController alloc] initWithNibName:@"YourNibName" bundle:nil]; 
```

其次，在 IB 中，单击 UITabBarController 并转到身份检查器并确保选择您的自定义类。也就是说，除非您要覆盖或添加某些功能，否则您可能根本不需要自定义类，只需直接使用 UITabBarController ：

```
UITabBarController *controller = [[UITabBarController alloc] initWithNibName:@"YourNibName" bundle:nil]; 
```

# vba - excel vba - 仅通过代码启用单元格编辑

> ID：10111471
> 
> 赞同：0
> 
> 时间：2012-04-11T18:04:47.640
> 
> 标签：vba, excel

我有一个 excel 工具，可以根据用户的登录信息从用户那里收集信息。信息存储在其中一个工作表的单元格中。如果我想锁定这些单元格以使它们无法手动更新，我该怎么做呢？如果其他人登录，显然这些单元格会改变。我希望通过VBA来做到这一点。

我只想锁定 6 个单元格...其他所有内容都应该是可编辑的...

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:35:22.547

您可以使用如下密码保护工作表：

```
Private Sub Workbook_Open()
    Sheets("sheetName").Protect Password:="YourPassword", UserInterfaceOnly:=True
End Sub 
```

这将防止用户在不输入密码的情况下手动更改工作表。您的 VBA 代码仍然可以进行更改，因为您已设置`UserInterfaceOnly`为`True`.

请注意，用户可以通过 Visual Basic 编辑器导航到代码来轻松查看此密码。不过，您也可以对代码进行密码保护：只需右键单击模块，单击 VBAProject 属性并转到保护选项卡。

有关更多信息，请参阅此页面：[Excel VBA：在受保护的工作表和工作表上运行宏的宏代码](http://www.ozgrid.com/VBA/excel-macro-protected-sheet.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T12:25:02.633

如果这些单元格是您要保护的工作表上唯一的单元格，则只需通过将`Locked`属性更改为 false 来更改剩余单元格的单元格属性，并将有问题的单元格保留为`Locked`然后使用`UserInterfaceOnly`set 为 true 来保护工作表（但要意识到这不适用于所有可能的宏更改，所以我通常会避免它。）

还有其他方法可以工作，但我认为这是最适合您的解决方案。如果没有，请添加评论让我知道。

# java - 当系统日期更改时，获取系统日期和时间的 TimerTask 停止运行

> ID：10111476
> 
> 赞同：2
> 
> 时间：2012-04-11T18:05:02.570
> 
> 标签：java, swing

我编写了一个 TimerTask 来在 JLabel 中显示当前日期和时间。以下是 TimerTask 代码，在正常情况下运行良好。当我在 GUI 运行时更改系统日期和时间时，计时器停止运行。当我更改系统日期和时间并且计时器停止运行时也不例外。谁能告诉我发生了什么？

```
private void startTimer()
{
    // Start the clock
    timer = new Timer();
    timer.schedule(new TimeTask(), 0, 1000);
}

class TimeTask extends TimerTask
{
    public void run()
    {
        try {
            clockLabel.setText(new SimpleDateFormat("EEE , dd MMM , HH:mm:ss").format(Calendar.getInstance().getTime()));
            System.out.println(clockLabel.getText());
        } catch(Exception ex) {
            ex.printStackTrace();
            System.out.println("Exception : " + ex.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:17:40.380

不要将 TimerTask 与 Swing 一起使用，因为您很容易遇到并发问题，因为 TimerTask 将从 EDT 调用代码。而是使用摇摆计时器；这是专门为它构建的——在 Swing 事件线程上定期调用代码。

IE，

```
private void startTimer() {
  timer = new Timer(TIMER_DELAY, new TimerListener());
  timer.start();
}

private class TimerListener implements ActionListener {
  private final String PATTERN = "EEE , dd MMM , HH:mm:ss";
  private final DateFormat S_DATE_FORMAT = new SimpleDateFormat(PATTERN);

  @Override
  public void actionPerformed(ActionEvent e) {
     Date date = Calendar.getInstance().getTime();

     String dateString = S_DATE_FORMAT.format(date);
     clockLabel.setText(dateString);         
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T18:27:33.220

*   您[在 Swing 中遇到 Concurency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)问题，其中的输出`java.util.Timer`不调用[EventDispatchThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)并代表 Swing GUI 的背景任务，

*   [因为使用Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)会更好，因为保证输出将在 EDT 上，但`Swing Timer`与长时间运行的任务相比并不准确`java.util.Timer`，

*   为了从任何类型的后台任务更新 Swing GUI，您必须将输出到 Swing GUI 包装到`invokeLater`

例如

```
EventQueue.invokeLater(new Runnable() {

    @Override
    public void run() {
        JLabel#setText();
    }
}); 
```

# wcf - 是否所有绑定都需要设置 URLACL？

> ID：10111483
> 
> 赞同：0
> 
> 时间：2012-04-11T18:05:15.573
> 
> 标签：wcf, .net-4.0

我们设置了一个 Windows 应用程序，它与 Windows 服务对话以进行某些操作。它是使用 wsHttp 设置和工作的，但我们需要将 url 添加到 URLACL 列表中才能运行服务。这是否也会成为其他绑定的问题，还是我们此时基本上只是使用了错误的绑定？

将来服务可能会从最终用户的本地机器移动到他们网络上的服务器，所以也许我们应该使用其他绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:04:15.530

似乎“下一个”最佳选项是 netTcpBinding，但要使用它，您需要启动 TCP 端口共享服务：http: [//msdn.microsoft.com/en-us/library/ms731810.aspx](http://msdn.microsoft.com/en-us/library/ms731810.aspx)

由于重点是简化客户端计算机上的安装并减少对​​其配置的更改次数，因此我不确定这会带来任何真正的优势。我可以转换为 netTcpBinding 以提高速度，因为它是最快的协议……但在这种情况下，它的速度足以证明更多的开发时间是合理的。

讨厌回答我自己的问题，但希望这可以帮助其他人！

# java - 在 2.4 上安装 gwt 2.1

> ID：10111494
> 
> 赞同：1
> 
> 时间：2012-04-11T18:05:48.123
> 
> 标签：java, eclipse, gwt

我在 Eclipse（操作系统 ubuntu 11.10）上使用 gwt 2.4。我必须为 gwt 使用谷歌地图库。我尝试将此库与 gwt 2.4 一起使用，但有一些不兼容之处。经过快速研究，我得出结论安装 gwt 2.1。但是，当我尝试从 eclipse 的“安装新软件”中安装它并给出我在[这里](https://developers.google.com/eclipse/docs/install-eclipse-3.7)找到的链接时，它正在尝试重新安装 gwt v 2.4。有任何想法吗？？我只想要 eclipse 3.7 的 gwt 2.1 的存储库位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:39:40.267

您必须下载 GWT SDK（作为 zip 文件），解压它，然后将 Eclipse 指向它。查看 Eclipse 中的 Google 首选项以“添加新的 SDK”。

另请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=6204](http://code.google.com/p/google-web-toolkit/issues/detail?id=6204)

# soap - Soap 不会将响应字段转换为类型化对象

> ID：10111497
> 
> 赞同：0
> 
> 时间：2012-04-11T18:05:58.737
> 
> 标签：soap, xsd, wsdl

我是一个 SOAP 新手，负责恢复旧的肥皂接口。我已将soap 服务移植到新路径上的新tomcat 上（并保持客户端不变）。我发送请求： **http://myserver:8181/soap/SoapTest?wsdl** 我回来了：

```
 <wsdl:definitions xmlns:ns1="http://webservices.mycompany.com"
    xmlns:ns3="http://schemas.xmlsoap.org/wsdl/soap/http"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tns="http://www.mycompany.com/SoapTest"
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    name="SoapTestService" 
    targetNamespace="http://www.mycompany.com/SoapTest">

    <wsdl:import location="http://myserver:8181/soap/SoapTest?wsdl=SoapTest.wsdl"
          namespace="http://webservices.mycompany.com"></wsdl:import>
    <wsdl:binding name="SoapTestServiceSoapBinding" type="ns1:SoapTest">...</wsdl:binding>
    <wsdl:service name="SoapTestService">...</wsdl:service>
  </wsdl:definitions> 
```

似乎很有希望。对导入位置**SoapTest?wsdl=SoapTest.wsdl**的请求返回：

```
<wsdl:definitions xmlns:ns1="http://webservices.mycompany.com"
  xmlns:ns2="http://jaxb.dev.java.net/array" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
  name="SoapTest"
  targetNamespace="http://webservices.mycompany.com">
  <wsdl:types>
    <xs:schema xmlns:tns="http://webservices.mycompany.com"
      xmlns:xs="http://www.w3.org/2001/XMLSchema"
      targetNamespace="http://webservices.mycompany.com" version="1.0">
    <xs:complexType name="sessionObj">
      <xs:sequence>
        <xs:element name="code" type="xs:int"/>
        <xs:element name="id" type="xs:long"/>
        <xs:element minOccurs="0" name="role" type="xs:string"/>
        <xs:element minOccurs="0" name="username" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
    ... (and so on) 
```

因此，客户端可以接收成员 xs 名称：类型关联，但似乎不是 - 或没有应用它们。那是 ...

*呵呵.. 经审查，我看到 xs 被用作命名空间，但定义了 xmlns:xsd？这怎么可能发生？*

对此接口 (Linux) 的 ZSI 客户端查询（来自 Windows，如果这有任何区别）接收包含预期数据有效负载的响应，然后将每个数据项映射到单独的“属性” - 生成通用属性列表。

我期待一个类型化成员的列表，每个属性都转换为它的 xs 类型（例如上面的 int、long、string、string），对吗？

提前感谢任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:33:23.577

鉴于您没有为手头的实际问题提供足够的信息，我将基于您是*新手*这一点，因此将我的答案包含在我认为与您的问题相关的部分中。

您的主要 Web 服务在 WSDL **http://myserver:8181/soap/SoapTest?wsdl**中进行了描述，其中包含对父 WSDL 的导入。这个父 WSDL 包含可以由您的主服务绑定的服务定义。

> 似乎很有希望。对导入位置 SoapTest?wsdl=SoapTest.wsdl 的请求返回：..

根据上面提供的文档定义，导入：

```
<wsdl:import location="http://myserver:8181/soap/SoapTest?wsdl=SoapTest.wsdl"
          namespace="http://webservices.mycompany.com">
</wsdl:import> 
```

注入父*WSDL*文件，该文件包含与您的服务相关的所有元素和属性的模式定义。这意味着对它的独立调用将显示`xs`名称空间定义。有关架构和数据类型的更多信息，请参见[此处](http://www.w3schools.com/schema/schema_intro.asp)。

> 呵呵.. 经审查，我看到 xs 被用作命名空间，但定义了 xmlns:xsd？这怎么可能发生？

是的，模式不是定义为单独的文件，而是定义为*WSDL*的一部分。`<wsdl:types>`它在标签之间定义：

```
 <wsdl:types>
       <xs:schema xmlns:tns="http://webservices.mycompany.com" 
        xmlns:xs="http://www.w3.org/2001/XMLSchema" 
        targetNamespace="http://webservices.mycompany.com" version="1.0">
   [..]
 </wsdl:types> 
```

有关ZSI 绑定和存根生成的更多信息，请参见[此处。](http://pywebsvcs.sourceforge.net/zsi.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T11:09:29.390

来自 ZSI 文档：

如果调用的操作返回一个 ComplexType，则必须提供类型代码信息以告诉 ZSI 如何反序列化响应。

为了让 ZSI 透明地将返回的复杂类型反序列化为 Person 实例，定义类及其类型代码的模块必须附加到 ZSI.Path 列表中。也可以通过将类作为参数传递给 Binding.Receive() 方法来显式地告诉 ZSI 使用什么类和类型代码。第一种方法通常是首选方法，特别是对于公开​​分发的库。

从 WSDL 和 XML 模式生成代码是 ZSI 提供的访问 WSDL 服务的第二种方式。给定 WSDL 服务的路径，会生成两个文件，一个“服务”文件和一个“类型”文件，然后可以使用它们来访问该服务。

# ruby-on-rails - 我在 Rails 中安装缺失的 gem 时遇到问题

> ID：10111499
> 
> 赞同：0
> 
> 时间：2012-04-11T18:06:07.297
> 
> 标签：ruby-on-rails, configuration, installation

我在启动我的 Rails Web 服务器时遇到问题。我尝试在 cmd 提示符下输入“rails server”，但出现以下错误：

```
C:\Ruby193\demo>rails server
←[31mCould not find gem 'jquery-rails (>= 0) x86-mingw32' in the gems available
on this machine.←[0m
←[33mRun `bundle install` to install missing gems.←[0m 
```

但是每当我进行捆绑安装以安装缺少的 gem 时，我都会收到此错误：

```
C:\Ruby193\demo>bundle install
Fetching gem metadata from https://rubygems.org/.........
Using rake (0.9.2.2)
Using i18n (0.6.0)
Using multi_json (1.2.0)
Using activesupport (3.2.3)
Using builder (3.0.0)
Using activemodel (3.2.3)
Using erubis (2.7.0)
Using journey (1.0.3)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.1)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.1.2)
Using actionpack (3.2.3)
Using mime-types (1.18)
Using polyglot (0.3.3)
Using treetop (1.4.10)
Using mail (2.4.4)
Using actionmailer (3.2.3)
Using arel (3.0.2)
Using tzinfo (0.3.33)
Using activerecord (3.2.3)
Using activeresource (3.2.3)
Using bundler (1.1.3)
Using coffee-script-source (1.3.1)
Using execjs (1.3.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Installing json (1.6.6) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extensio
.

    C:/Ruby193/bin/ruby.exe extconf.rb
creating Makefile

make
'make' is not recognized as an internal or external command,
operable program or batch file.

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/json-1.6
6 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/json-1.6.6/ext/json/ext/g
nerator/gem_make.out
An error occured while installing json (1.6.6), and Bundler cannot continue.
Make sure that `gem install json -v '1.6.6'` succeeds before bundling. 
```

然后我尝试安装 json 没有任何运气。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:09:08.270

由于您使用的是 Windows，因此您需要安装 Development Kit 才能使用本机扩展构建 gem。

[https://github.com/oneclick/rubyinstaller/wiki/development-kit](https://github.com/oneclick/rubyinstaller/wiki/development-kit)

# c# - Asp.net XML 到对象

> ID：10111501
> 
> 赞同：0
> 
> 时间：2012-04-11T18:06:09.207
> 
> 标签：c#, asp.net

我有一个 XML 文件，其结构类似于

```
<items>
  <item>
    <someDetail>
      A value here
     </someDetail>
  </item>
  <item>
    <someDetail>
      Another value here
     </someDetail>
  </item>
</items> 
```

里面有多个项目。

我想理想地在会话开始时反序列化 XML，将 XML 数据转换为基于类的对象（c#asp.net 4）

我尝试了几种方法，要么没有成功，要么解决方案显得笨拙和不优雅。

人们会提出什么建议？

我尝试使用该`xsd.exe`工具，并尝试使用 xml 阅读器类，以及使用`XElement`类来循环遍历 xml，然后创建新的 someObject(props)。

这些可能是最好的和/或唯一的方法，但是对于使用实体框架的数据库源来说非常容易，我想知道是否有类似的方法来做同样的事情，但来自 xml 源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:22:50.687

反序列化 XML 的最佳方法是创建一个与 XML 数据将反序列化到的 XML 结构相对应的类。

最新的序列化技术使用[数据协定](http://msdn.microsoft.com/en-us/library/ms733127.aspx)和[`DataContractSerializer`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx).

`DataMember`您使用和`DataItem`属性装饰我上面提到的类，并使用序列化程序进行反序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:24:14.313

I'd use directly the .NET XML serialization - classes declarations:

```
public class Item {

  [XmlElement("someDetail")]
  public string SomeDetail;

} // class Item

[XmlRoot("items")]
public class MyData {

  [XmlElement("item")]
  public List<Item> Items;

  public static MyData Deserialize(Stream source)
  {
    XmlSerializer serializer = new XmlSerializer(typeof(MyData));
    return serializer.Deserialize(source) as MyData;
  } // Deserialize

} // class MyData 
```

and then to read the XML:

```
 using (FileStream fs = new FileStream(@"c:\temp\items.xml", FileMode.Open, FileAccess.Read)) {
    MyData myData = MyData.Deserialize(fs);
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T18:35:44.197

我得出的结论是没有简单的统一机制（可能是由于涉及非平凡案例的固有复杂性 - 这个问题总是在您的示例 xml 等简单场景的上下文中出现）。

Xml 序列化非常容易使用。对于您的示例，您只需要创建一个包含项目的类和实际项目的另一个类。您可能必须应用一些属性才能使一切正常工作，但编码不会太多。然后就很简单了——

```
var serializer = new XmlSerializer(typeof(ItemsContainer));
var items = serializer.Deserialize(...) as ItemsContainer; 
```

数据集有时被认为是“昨天的技术”，但我会在它们很好地解决问题时使用它们，并且您可以利用设计器。生成的代码并不漂亮，但底线是您可以通过自动生成的适配器将其持久化到数据库，并使用数据集上的方法将其持久化到 XML。你也可以用这种方式阅读它。

一旦你习惯了 XSD.exe，它就不会那么糟糕了。我将帮助打印到一个文本文件中，并将其包含在我的解决方案中一段时间​​。当您使用 /c 选项创建类时，您将获得可与 XmlSerialzier 一起使用的干净代码。

Visual Studio 2010（可能还有其他版本）有一个 XML 菜单，当您打开一个 Xml 文件时会出现该菜单，您还可以从该菜单中从示例 Xml 生成 XSD。因此，通过几个步骤，您可以获取示例 xml 并生成 XSD，然后通过 XSD.exe 运行它并使用生成的类和几行 XmlSerializer 代码......感觉就像很多阴谋但你习惯了给它。

# c# - 重载的构造函数多次传递相同的引用

> ID：10111504
> 
> 赞同：2
> 
> 时间：2012-04-11T18:06:32.520
> 
> 标签：c#

可以说我有以下内容：

```
public interface IFoo
{
  void Foo();
}

public interface IBar
{
  void Bar();
}

public class FooAndBar : IFoo, IBar
{
  //valid implementation
} 
```

现在我有一个在构造函数中接受 IFoo 和 IBar 的类，但也有一个无参数的构造函数。

```
public class Consumer
{
  private IFoo foo;
  private IBar bar;
  public Consumer(IFoo foo, IBar bar)
  {
     this.foo = foo;
     this.bar = bar;
  }

  public Consumer() : this(new FooAndBar(), new FooAndBar()) {}
} 
```

我想维护调用参数化版本的无参数构造函数之间的关系。但我想传入一个引用对象，而不是“新建”两个 FooAndBar 实例。无论如何要在保持构造函数之间的关系的同时做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T18:12:26.940

您可以创建一个以 FooAndBar 作为参数的临时私有构造函数：

```
private Consumer(FooAndBar fooAndBar) : this(fooAndBar, fooAndBar) {}

public Consumer() : this(new FooAndBar()) {} 
```

# c++ - ifstream 运算符 >> 和错误处理

> ID：10111507
> 
> 赞同：1
> 
> 时间：2012-04-11T18:07:02.897
> 
> 标签：c++, iostream

我想使用 ifstream 从命名管道中读取数据。我想使用它的 operator>> 来读取格式化数据（通常是一个 int）。但是，我对错误处理的工作方式有点困惑。

想象一下，我想读取一个 int 但只有 3 个字节可用。将设置错误位，但是这 3 个字节会发生什么？它们会“消失”吗？它们会被放回溪流中以供以后提取吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:37:04.170

正如已经指出的那样，您无法通过`istream`. 但是关于可用字节数问题（因为您可能希望使用`basic_ios<char>`and`streambuf`用于您的二进制流）：`istream`并`ostream`使用 a`streambuf`来实际获取和接收字节。通常缓冲区：过程是：如果`streambuf`一个字节在缓冲区中，则返回它，否则，尝试重新加载缓冲区，*等待*重新加载完成，或者最终失败。如果最终失败，则`streambuf` 返回文件结尾，并终止输入；`istream`将记住文件的结尾，不再尝试任何输入。因此，如果您正在读取的类型需要四个字节，它将从`streambuf`, 并且通常会等到这四个字节在那里。不会设置错误（因为没有错误）；`operator>>`在这四个字节到达之前，您根本不会从那里返回。

如果您实现自己的二进制流，我强烈建议您使用相同的模式；它将允许直接使用已经存在的标准组件，例如`std::ios_base`and (perhaps) `std::filebuf`，并将为其他程序员提供他们熟悉的习语。如果阻塞是一个问题，最简单的解决方案就是在单独的线程中运行输入，通过消息队列或类似的东西进行通信。（Boost 支持异步 IO。这避免了线程，但全局要复杂得多，并且不能很好地与经典的流习语一起使用。）

# sql - SQL 尊重 IN 子句中的顺序行

> ID：10111510
> 
> 赞同：0
> 
> 时间：2012-04-11T18:07:15.297
> 
> 标签：sql, oracle

我有一张这样的桌子：

```
CREATE TABLE A
(
pk int,
fk int,
col text,
sort_index int
) 
```

我有一个这样的查询：

```
select b.fk from A where A.col in ('a','b', 'c')
group by b.fk 
```

但我只想要按顺序`b.fk`包含`IN`子句中所有元素的那个（使用 column `sort_index`）。

这可以用 SQL 实现吗？如果是这样，怎么做？（甲骨文）

例如，我有这个数据

```
pk      fk    col    sort_index
1       1     a      1
2       1     c      2
3       1     b      3
4       2     a      1
5       2     b      2
6       2     c      3 
```

我只想要 fk 2 因为它在 IN 中包含所有 col 并尊重顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:27:13.583

如果您可以在执行查询之前修改 IN 值，则此查询可能有效。

```
 SELECT DISTINCT A1.FK
FROM A A1
WHERE A1.COL IN ('a', 'b', 'c')
and (SELECT WM_CONCAT(A2.COL)
    FROM A A2
    WHERE A2.FK = A1.FK) = 'a,b,c' 
```

为此，您必须将 IN 值作为逗号分隔的引号值（'a'、'b'、'c'）传递，并且只能以逗号分隔的值（a、b、c）的形式传递。

希望能帮助到你

# java - 如何使用 Jsoup 遍历 HTML 树？

> ID：10111511
> 
> 赞同：11
> 
> 时间：2012-04-11T18:07:16.033
> 
> 标签：java, jsoup, traversal

我想这个问题已经被问到了，但我什么也没找到。

从`Document`Jsoup 中的元素，如何遍历 HTML 内容中的所有元素？

我正在阅读文档，并且正在考虑使用该`childNodes()`方法，但它仅从以下一级获取节点（据我所知）。我想我可以使用这种方法进行一些递归，但我想知道是否有更合适/原生的方法来做到这一点。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-11T18:09:35.290

从[`Document`](http://jsoup.org/apidocs/org/jsoup/nodes/Document.html)（和任何子[`Node`](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html)类），您可以使用该[`traverse(NodeVisitor)`](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html#traverse%28org.jsoup.select.NodeVisitor%29)方法。

例如：

```
document.traverse(new NodeVisitor() {
    public void head(Node node, int depth) {
        System.out.println("Entering tag: " + node.nodeName());
    }
    public void tail(Node node, int depth) {
        System.out.println("Exiting tag: " + node.nodeName());
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-12T15:43:19.987

1) 您可以使用 * 选择器选择文档的所有元素。

```
Elements elements = document.body().select("*"); 
```

2) 使用 Element.ownText() 方法单独检索每个文本。

```
for (Element element : elements) {
  System.out.println(element.ownText());
} 
```

3) 使用 Element.html(String strHtml) 单独修改每个文本。（清除元素中任何现有的内部 HTML，并将其替换为已解析的 HTML。）

```
element.html(strHtml); 
```

希望这会帮助你。谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T01:12:18.713

您可以使用以下代码：

```
public class JsoupDepthFirst {

    private static String htmlTags(Document doc) {
        StringBuilder sb = new StringBuilder();
        htmlTags(doc.children(), sb);
        return sb.toString();
    }

    private static void htmlTags(Elements elements, StringBuilder sb) {
        for(Element el:elements) {
            if(sb.length() > 0){
                sb.append(",");
            }
            sb.append(el.nodeName());
            htmlTags(el.children(), sb);
            sb.append(",").append(el.nodeName());
        }
    }

    public static void main(String... args){
        String s = "<html><head>this is head </head><body>this is body</body></html>";
        Document doc = Jsoup.parse(s);
        System.out.println(htmlTags(doc));
    }
} 
```

# asp.net - ASP.NET Charting Control 仅适用于某些服务器

> ID：10111513
> 
> 赞同：1
> 
> 时间：2012-04-11T18:07:31.797
> 
> 标签：asp.net, asp.net-mvc-3, charts, httphandler

昨天我们推出了一些更改，包括添加 ASP.NET MVC 3（路由、配置等）并且我们的 ASP.NET 图表控件停止工作。在我们的开发环境中，ASP.NET 图表控件按预期工作。但是在我们的测试和生产环境中。我们从 DefaultControllerFactory 收到错误，因为找不到 axd url 的路径 - “Pages/Secured/ChartImg.axd”

我们尝试比较与 IIS 配置和 web.config 的任何差异，并确保 system.webserver 节点具有正确的处理程序，因此...

```
<add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD,POST" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/> 
```

这没有帮助，我们不确定还有什么问题。似乎图表处理程序设置不正确，但我们无法知道原因。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:45:45.580

事实证明，我们在用户控件上有一个编译器指令，它根据调试/发布版本切换图表控件的 ImageStorageMode 属性。这解释了为什么它只在我们的开发环境中工作，得到了调试版本，而不是其他环境。在发现我们使用了这个问题[ASP.NET Charting Control no longer working with .NET 4](https://stackoverflow.com/questions/2631526/asp-net-charting-control-no-longer-working-with-net-4)中的修复后，它修复了当 ImageStorageMode 设置为 UseHttpHandler 时处理程序的路由问题。

# sql - 无重复的PostgreSQL组合

> ID：10111515
> 
> 赞同：5
> 
> 时间：2012-04-11T18:07:32.097
> 
> 标签：sql, postgresql, math, combinations

如何在 postgres 中使用字符串或数组并返回一定长度的所有组合的函数？

例如你有 ABC 并且你想得到 2 个字符的组合，结果应该是：

AB AC BC

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T18:41:12.853

```
set search_path='tmp';

WITH ztab AS (
SELECT idx as idx
, substring ( 'WTF!' FROM idx FOR 1) as str
FROM generate_series(1, char_length( 'WTF!' )) idx
)
SELECT t1.str, t2.str
FROM ztab t1
JOIN ztab t2 ON t2.idx > t1.idx
        ; 
```

结果：

```
 str | str 
-----+-----
 W   | T
 W   | F
 W   | !
 T   | F
 T   | !
 F   | !
(6 rows) 
```

不幸的是，我找不到避免双字符串常量的方法。（但整个事情可以打包成一个函数）如果没有重复的字符（或者你想抑制它们）你可以在 str 而不是 idx 上做反连接。

更新（来自 ypercube 的提示）看来 OP 希望将字符串连接起来。随它吧：：

```
WITH ztab AS (
SELECT idx as idx
, substring ( 'WTF!' FROM idx FOR 1) as str
FROM generate_series(1, char_length( 'WTF!' )) idx
)
SELECT t1.str || t2.str AS results
FROM ztab t1
JOIN ztab t2 ON t2.idx > t1.idx
        ; 
```

结果：

```
 results 
---------
 WT
 WF
 W!
 TF
 T!
 F!
(6 rows) 
```

UPDATE2：（这里是递归的东西......）

```
WITH RECURSIVE xtab AS (
        WITH no_cte AS (
        SELECT
        1::int AS len
        , idx as idx
        , substring ( 'WTF!' FROM idx FOR 1) as str
        FROM generate_series(1, char_length( 'WTF!' )) idx
        )
        SELECT t0.len as len
                , t0.idx
                , t0.str
        FROM no_cte t0
        UNION SELECT 1+t1.len
                , tc.idx
                , t1.str || tc.str AS str
        FROM xtab t1
        JOIN no_cte tc ON tc.idx > t1.idx
        )
SELECT * FROM xtab
ORDER BY len, str
-- WHERE len=2
        ; 
```

结果 3：

```
 len | idx | str  
-----+-----+------
   1 |   4 | !
   1 |   3 | F
   1 |   2 | T
   1 |   1 | W
   2 |   4 | F!
   2 |   4 | T!
   2 |   3 | TF
   2 |   4 | W!
   2 |   3 | WF
   2 |   2 | WT
   3 |   4 | TF!
   3 |   4 | WF!
   3 |   4 | WT!
   3 |   3 | WTF
   4 |   4 | WTF!
(15 rows) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T21:00:30.703

```
with chars as (
   select unnest(regexp_split_to_array('ABC','')) as c
)
select c1.c||c2.c
from chars c1
  cross join chars c2 
```

要删除排列，您可以使用以下命令：

```
with chars as (
   select unnest(regexp_split_to_array('ABC','')) as c
)
select c1.c||c2.c
from chars c1
  cross join chars c2
where c1.c < c2.c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-14T18:42:36.503

如何使用多个单词...灵感来自@wildplasser 和此源[信息](https://www.postgresql.org/message-id/BANLkTikVwLSUe_fwEo4sGvSht2j2HeO63w%40mail.gmail.com)

```
WITH RECURSIVE xtab AS (
    WITH no_cte AS (
    SELECT
    1::int AS len
    , idx as idx
    , unnest(ARRAY['MY','POSTGRESQL','VERSION','9.6']) as str
    FROM generate_series(1, array_length(ARRAY['MY','POSTGRESQL','VERSION','9.6'],1)) idx
    )
    SELECT t0.len as len
            , t0.idx
            , t0.str
    FROM no_cte t0
    UNION SELECT 1+t1.len
            , tc.idx
            , t1.str ||','|| tc.str AS str
    FROM xtab t1
    JOIN no_cte tc ON tc.idx > t1.idx
    )
    SELECT distinct
    array_to_string(ARRAY(SELECT DISTINCT trim(x) FROM unnest(string_to_array(str,',')) x),', ') FROM xtab 
```

# java - 在 Solr DataImportHandler 中从 Oracle 日期获取正确的时间

> ID：10111517
> 
> 赞同：4
> 
> 时间：2012-04-11T18:07:41.167
> 
> 标签：java, oracle, solr

我正在尝试使用 Solr 的 DataImportHandler 来索引 Oracle DB 中的一些文档，除了将 Oracle Date 列正确读取到我的文档中之外，一切正常。

我将 Solr 架构中的字段定义为

```
<field name="release_date" type="date" indexed="true" stored="true" multiValued="false"/> 
```

我首先尝试在我的 DataImportHandler 中只对日期列执行一个基本的选择语句，但是所有日期的索引都使用了不正确的时间值。例如，数据库中的日期为 2004 年 1 月 12 日 09:28 AM (EST) 被索引为：

```
<date name="release_date">2004-01-12T05:00:00Z</date> 
```

所有日期值都有正确的日期，但它们都将 T05:00:00Z 作为时间。对于正在发生的事情，我最好的猜测是它正在从数据库中读取时间作为午夜并将其转换为 UTC。如果是这种情况，我希望正确的值可以读取 T14:28:00Z。

为什么它没有拾取 DB 列的时间部分？我知道 DIH 附带了一个 [日期转换器](http://wiki.apache.org/solr/DataImportHandler#DateFormatTransformer)，但我并不完全清楚它应该如何工作。我也试过做

```
<field column="RELEASE_DATE" name="release_date" dateTimeFormat="yyyy-MM-dd'T'hh:mm:ss'Z'" /> 
```

在 DIH 中，但这似乎并没有改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:10:43.013

这是与最后一个答案一起使用的完整代码（为了更加清晰）。

在您的 data-config.xml 文件中，从数据库中读取日期并转换为时间戳：

```
select cast(STRT_DT as timestamp) as STRT_DTTS from DATES 
```

放入一个 DataImportHandler 实体，如下所示：

```
<entity name="startDate" transformer="script:startDateTransform"
        query="select cast(STRT_DT as timestamp) as STRT_DTTS from DATES" >
    <field column="STRT_DTTS" name="STRT_DT" /> 
</entity> 
```

此查询将返回一个 oracle.sql.TIMESTAMP，但它不会直接映射到日期。因此需要一个脚本转换器。因此我们介绍`script:startDateTransform`。在同一个 data-config.xml 中，您可以像这样插入 JavaScript：

```
function startDateTransform(row){
    // Get the timestamp and convert it to a date
    var dateVal = row.get("STRT_DTTS").dateValue();

    // Put the correct date object into the original column
    row.put("STRT_DTTS", dateVal);

    return row;
} 
```

在这里，我们将时间戳转换为日期，更新列值并返回包含新信息的行。

领域`STRT_DT`：

```
<field column="STRT_DTTS" name="STRT_DT" /> 
```

现在应该包含正确的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T15:34:37.663

Oracle JDBC getDate() 将只返回日期部分。只有 getTimeStamp() 返回日期和时间部分。

解决方法：

*   添加 cast() 函数将日期转换为时间戳，因此 solr 将获取 oracle.TIMESTAMP 对象。例如：CAST(release_date AS TIMESTAMP) AS d_release_date,
*   添加新的日期转换器以将 TIMESTAMP 转换为日期。
*   瞧！现在你有时间参与 solr。

# sql-server-2008 - 在 SQL Server 2008 中查找遗漏的 ID

> ID：10111524
> 
> 赞同：1
> 
> 时间：2012-04-11T18:07:53.613
> 
> 标签：sql-server-2008, tsql

我有一个包含两列的表

```
ID | Name
----------------
1  | John
2  | Sam
3  | Peter
6  | Mike 
```

它错过了 ID。在这种情况下，这些是`4`和`5`。

如何找到它们并将它们与随机名称一起插入到此表中？

**更新**：不允许使用游标和临时表。随机名称应该是 'Name_'+ 一些随机数。也许它是像'Abby'这样的指定值。所以没关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:17:47.387

使用递归 CTE，您可以确定缺少的 ID，如下所示

```
DECLARE @Table TABLE(
        ID INT,
        Name VARCHAR(10)
)

INSERT INTO @Table VALUES (1, 'John'),(2, 'Sam'),(3,'Peter'),(6, 'Mike')

DECLARE @StartID INT,
        @EndID INT

SELECT  @StartID = MIN(ID),
        @EndID = MAX(ID)
FROM    @Table

;WITH IDS AS (
        SELECT  @StartID IDEntry
        UNION ALL
        SELECT  IDEntry + 1
        FROM    IDS
        WHERE   IDEntry + 1 <= @EndID
)
SELECT  IDS.IDEntry [ID]
FROM    IDS LEFT JOIN
        @Table t    ON  IDS.IDEntry = t.ID
WHERE   t.ID IS NULL
OPTION (MAXRECURSION 0) 
```

该选项`MAXRECURSION 0`将允许代码避免 SQL SERVER 的递归限制

来自[查询提示](http://msdn.microsoft.com/en-us/library/ms181714.aspx)和[WITH common_table_expression (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms175972.aspx)

> MAXRECURSION number 指定此查询允许的最大递归数。number 是介于 0 和 32767 之间的非负整数。指定 0 时，不应用限制。如果未指定此选项，则服务器的默认限制为 100。
> 
> 在查询执行期间达到指定的或默认的 MAXRECURSION 限制数时，查询将结束并返回错误。
> 
> 由于此错误，该语句的所有效果都将回滚。如果语句是 SELECT 语句，则可能返回部分结果或不返回结果。返回的任何部分结果可能不包括超出指定最大递归级别的递归级别的所有行。

生成*RANDOM*名称将在很大程度上受到此类名称的要求以及此类名称的列类型的影响。这个随机名称究竟意味着什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T18:22:20.213

您可以使用递归公用表表达式 CTE 执行此操作。这是一个示例：

```
DECLARE @MaxId INT
SELECT @MaxId = MAX(ID) from MyTable
;WITH Numbers(Number) AS 
(
    SELECT 1
    UNION ALL
    SELECT Number + 1 FROM Numbers WHERE Number < @MaxId 
)
SELECT n.Number, 'Random Name'
FROM Numbers n
LEFT OUTER JOIN MyTable t ON n.Number=t.ID
WHERE t.ID IS NULL 
```

这里有几篇关于 CTE 的文章，它们将有助于 [使用公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766.aspx)和使用公用表表达式的[递归查询](http://msdn.microsoft.com/en-us/library/ms186243.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T18:15:20.593

首先选择表中的最大数字（选择前 1 个 id desc），或选择 max(id)，然后运行 ​​while 循环以从 1...max 迭代。

请参阅[这篇关于循环的文章。](http://www.databasejournal.com/features/mssql/article.php/3100621)

对于每次迭代，查看该行是否存在，如果不存在，则使用该 ID 插入表中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T19:56:11.783

我认为递归 CTE 是一个更好的解决方案，因为它会更快，但这对我有用：

```
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[TestTable]') AND type in (N'U'))
DROP TABLE [dbo].[TestTable]
GO

CREATE TABLE [dbo].[TestTable](
    [Id] [int] NOT NULL,
    [Name] [varchar](50) NOT NULL,
 CONSTRAINT [PK_TestTable] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
))

GO

INSERT INTO [dbo].[TestTable]([Id],[Name]) VALUES (1, 'John')
INSERT INTO [dbo].[TestTable]([Id],[Name]) VALUES (2, 'Sam')
INSERT INTO [dbo].[TestTable]([Id],[Name]) VALUES (3, 'Peter')
INSERT INTO [dbo].[TestTable]([Id],[Name]) VALUES (6, 'Mike')
GO

declare @mod int
select @mod = MAX(number)+1 from master..spt_values where [type] = 'P'

INSERT INTO [dbo].[TestTable]
SELECT y.Id,'Name_' + cast(newid() as varchar(45)) Name from
(
    SELECT TOP (select MAX(Id) from [dbo].[TestTable]) x.Id from
    (
        SELECT 
        t1.number*@mod + t2.number Id
        FROM master..spt_values t1
        CROSS JOIN master..spt_values t2
        WHERE t1.[type] = 'P' and t2.[type] = 'P'
    ) x
    WHERE x.Id > 0 
    ORDER BY x.Id
) y
LEFT JOIN [dbo].[TestTable] on [TestTable].Id = y.Id
where [TestTable].Id IS NULL
GO

select * from [dbo].[TestTable]
order by Id
GO 
```

[http://www.sqlfiddle.com/#!3/46c7b/18](http://www.sqlfiddle.com/#!3/46c7b/18)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-12T05:47:52.577

其实很简单：

创建一个名为#All_numbers 的表，该表应包含您要查找的范围内的所有自然数。

#list 是包含您的数据的表

```
select a.num as missing_number ,
       'Random_Name' + convert(varchar, a.num) 
from #All_numbers a left outer join #list l on a.num = l.Id
where l.id is null 
```

# javascript - javascript手风琴/ css无法正常工作

> ID：10111525
> 
> 赞同：5
> 
> 时间：2012-04-11T18:07:54.273
> 
> 标签：javascript, css, wordpress-theming, jquery-ui-accordion

我有一个博客页面，我必须使用手风琴 jQuery 在其上列出帖子。我设法让它工作，但它没有正确渲染，更准确地说：页面的高度没有根据帖子大小放大。你可以在这里看到它：http: [//melisayavas.com/web/ ?page_id=22](http://melisayavas.com/web/?page_id=22)

我认为这更像是一个 CSS 问题而不是 jQuery，不幸的是我没有足够的 CSS 或 jQuery 知识来真正确定问题出在哪里以及如何解决它。

这是页面的 HTML 和 JS：

```
<script type="text/javascript">
        $(function() {
            $('#va-accordion').vaccordion();
        });

    </script>

<div id="va-accordion" class="va-container">
<div class="va-wrapper">
<div class="about-page">    
<?php query_posts( array ( 'category_name' => 'About', 'posts_per_page' => -1 ) ); 
?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>
    <div class="va-slice">
    <article class="about" id="about-<?php the_ID(); ?>">
        <div class="title"><h2><?php the_title(); ?></h2></div>
        <div class="va-content">
        <div class="entry">
            <li><?php the_content(); ?></li>
        </div>
        </div>

        <?php edit_post_link('Edit this entry.', '<p>', '</p>'); ?>

    </article>
    </div>
    <?php endwhile; endif; ?>

</div>
</div>
</div> 
```

这是我使用的 CSS：

```
/* Vertical Accordion Style */
.va-container{
position:relative;
}
.va-wrapper{
width:100%;
height:100%;
position:relative;
overflow:hidden;
background:#000;
}
.va-slice{
cursor:pointer;
width:100%;
left:0px;
overflow:hidden;
}

.va-title{
}
.va-content{
display:none;
margin-left:25px;
}
.va-slice p{
}
.va-slice ul{
margin-top:20px;
}
.va-slice ul li{
}
.va-slice ul li a{
}
.va-slice ul li a:hover{
}

.post {
border: 2px solid;
border-radius: 10px;
clear: both; 
overflow: hidden; 
padding: 20px;
margin-top: 28px;
}

.about {
clear: both; 
overflow: hidden; 
}

.about-page {
border: 2px solid;
border-radius: 10px;
clear: both; 
overflow: hidden; 
padding: 20px;
margin-top: 28px;
} 
```

完整的手风琴 jQuery 可以在这里找到：http: [//pastebin.com/hJEufLQU](http://pastebin.com/hJEufLQU)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T20:18:32.830

在`jquery.vaccordion.js`手风琴元素的高度和展开的手风琴项目的高度被明确设置：

```
line 300 - accordionH : 450
... 
line 305 - expandedHeight: 350 
```

因此，元素太小而无法容纳帖子内容。您可以尝试删除这些线条或将它们的高度设置为`"auto"`.

**编辑**

回答您的附加评论“*知道如何让第一个元素在页面加载时自动展开吗？* ”

在我看来，手风琴应该默认处理这种行为[[参见手风琴演示](http://jqueryui.com/demos/accordion/)]。所以我不确定为什么它没有显示第一个元素。无论如何，您可以通过 CSS 解决此问题：

```
#va-accordion .va-slice:first-child .va-content{
    display: block;       
} 
```

**JSFiddle 示例：http: [//jsfiddle.net/mcDeE/](http://jsfiddle.net/mcDeE/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T20:09:13.700

```
<script>
    $(document).ready(function() {
                $('.va-slice').click(function(){
                    var index_div = $(this).index();
                    var element = $('.va-slice').eq(index_div);
                }); 
    });
</script> 
```

应用在该元素上添加类“explicit_va”的脚本

```
 .explicit_va{
        min-height:0px !important;
        height:100% !important;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T06:43:36.467

```
<script>
$(document).ready(function() {
            $('.va-slice').click(function(){
                var index_div = $(this).index();
                //console.log(index_div);

                var element = $('.va-slice').eq(index_div);
                //console.log(element);
                //var getHeight = element.height();
                //console.log(getHeight);

                console.log(element.attr('style', ''));         
                console.log(element.addClass('explicit_va'));

            }); 
});
</script> 
```

更多：http: [//source88.blogspot.com/search/label/Accordion](http://source88.blogspot.com/search/label/Accordion)

# windows - IIS6 Windows 身份验证仅在通过 DNS 名称（而非 IP 地址）访问站点时有效

> ID：10111534
> 
> 赞同：1
> 
> 时间：2012-04-11T18:08:28.440
> 
> 标签：windows, iis, authentication, iis-6

在 IIS 6 中，我有一个关闭匿名身份验证的网站，因此只有我的域用户可以访问该站点，因此 IIS 将识别用户（如果他们在加入域的计算机上访问该站点，并且他们已登录域）。

如果站点是按名称（服务器名称或本地主机）浏览的，这可以正常工作。但如果网站是通过 IP 地址或 FQDN 浏览的，IIS 服务器将无法识别用户的计算机，并提示进行身份验证。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T19:45:51.553

它与“区域”有关 - 您需要将[fqdn 添加到 Intranet zone](https://serverfault.com/q/51187)。IE 识别您键入的 url 中的模式（并确定它们属于哪个区域）。

# iis - 上传到 IIs 6 服务器的文件的最大大小

> ID：10111536
> 
> 赞同：2
> 
> 时间：2012-04-11T18:08:37.183
> 
> 标签：iis, asp-classic, filesize

我有一些 .asp 页面供访问者将文件上传到我的网络服务器。

他们多年来一直在 IIS5/Windows 2000 adv 上完美运行。服务器。

现在我已更改为 IIS6/Server 20003。之后用户只能上传不超过 120 Kb 的文件。

我的问题是，如何/在哪里增加到最大文件大小，比如 10 Mb？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:13:03.203

[我在http://www.banmanpro.com/support2/File_Upload_limits.asp](http://www.banmanpro.com/support2/File_Upload_limits.asp)找到了（简单的）解决方案

# java - 在android游戏开发中需要一些帮助吗？

> ID：10111538
> 
> 赞同：0
> 
> 时间：2012-04-11T18:08:38.890
> 
> 标签：java, android

我正在为 android 开发一个游戏，它就像一个比赛游戏，它看起来像这样：

![http://imageshack.us/photo/my-images/59/96718770.png/](../Images/9330773f94bd275afdaa0ebdd2453af4.png)

游戏完美运行，但问题是卡片的大小“图片中的小丑”没有改变我已经尝试了从改变图像大小到改变图像视图大小的所有方法，xml文件是Tablelayout 和每行表在第一行中包含一些内容，这是将显示卡片的图像视图，这是 xml 代码

```
<TableRow
android:id="@+id/Row01"
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:gravity="center"
android:orientation="horizontal"
 >
  <LinearLayout 
    android:id="@+id/LinearLayout01" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:layout_gravity="center" 
    android:gravity="center">
    <ImageView 
        android:id="@+id/ImageView1" 
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_gravity="bottom|center"

    ></ImageView>
    </LinearLayout>
</TableRow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:38:48.243

如前所述，在设计布局时应该尽可能避免使用静态值，以便它们保持从微型手机到大型平板电脑的可扩展性。

对于开发 android 的人来说，这是一个常见的问题，在这种情况下，它可能是屏幕密度问题。我建议制作三组不同大小的小丑图标，并将它们放在“res”文件夹中的低、中、高分辨率图像文件夹中。这就是他们拥有这些文件夹的原因，如果您的应用程序可以跨屏幕尺寸进行扩展，那么当您调用该资源时，系统将从文件夹中选择适当的分辨率图像。我相信您还可以修改系统在清单中选择密度的方式。

# javascript - iPad Web 应用程序在 Safari 中打开链接后冻结

> ID：10111539
> 
> 赞同：1
> 
> 时间：2012-04-11T18:08:42.403
> 
> 标签：javascript, jquery, ipad, freeze, iphone-standalone-web-app

我开发了一个小型网络应用程序，它可以在我的浏览器（Firefox、Chrome、iPad 上的 Safari）中完美运行。然后我决定修改这个应用程序，让它在我的 iPad 上作为一个独立的网络应用程序运行。这没问题，因为我在网上找到了很好的信息。

因为我使用了许多应用程序内部链接，所以我在应用程序中添加了以下 JavaScript jQuery 代码：

```
if (window.navigator.standalone) {
    // running as web app

    $(function () {
        $('a').each(function () {
            if (!$(this).hasClass('external')) {
                var href = $(this).attr('href');
                $(this).attr('href', 'javascript:this.location = \'' + href + '\'');
            }
        });
    });
} 
```

如果应用程序在独立模式下运行，此代码会修改所有没有 CSS 类的链接，`external`因此它们不会在新的 Safari 窗口中打开。这段代码工作正常。

问题是，如果我打开一个外部链接，**则会**打开一个新的 Safari 窗口（如预期的那样）。但是当我切换回我的应用程序（使用四指手势）时，应用程序被冻结：没有滚动，没有可点击，没有任务切换，没有五指手势了。当我按下主屏幕按钮时，iPad 会显示我的主屏幕片刻，然后立即切换到 iPad 搜索屏幕。当我关闭并再次打开屏幕时，我在主屏幕上。

唯一有效的手势是打开任务栏的四指手势（这是它的名字吗？）。当我使用任务栏终止应用程序时，它仍然在屏幕上，iPad 的行为就像我没有终止应用程序一样（参见最后一段）。感觉就像应用程序以某种疯狂的方式崩溃了。

我不知道我做错了什么。这是一个非常简单的网页，只有很少的 JavaScript 和没有深度嵌套的 HTML 结构。

该设备是装有 iOS 5.1 的 iPad 2 3G。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:33:39.350

所以我在阅读这个链接之前给出了这个代码：[iPhone Safari Web App opens links in new window](https://stackoverflow.com/questions/2898740/)

你试过[这个答案](https://stackoverflow.com/a/8173161/295783)吗？

* * *

我之前的回答：

```
if (window.navigator.standalone) {
  // running as web app

  $(function () {
    $('a').each(function () {
        if (!$(this).hasClass('external')) {
            var href = $(this).attr('href');
            $(this).click(function() { window.location = href; return false;});

        }
    });
  });
} 
```

# excel - 通过 VBA 将 excel 数据导出到文本文件时处理指数数字和格式

> ID：10111541
> 
> 赞同：1
> 
> 时间：2012-04-11T18:08:52.783
> 
> 标签：excel, vba

将值（使用 VBA 代码，**而不是**通过导出到 CSV）从 Excel 电子表格导出到文本文件时出现问题。

使用这些数字：

```
 -            (formatted so 0 displays as "-")
    0.10000000 
    0.0166666666666667 

If I debug.print the .Text then .Value property of each cell, the results are:
    -           --> 0
    0.10000000  --> 0.1
    0.01666667  --> 1.66666666666667E-02 
```

我的问题是，我想避免发生 0.0166666666666667 （在电子表格单元格中）-> 1.66666666666667E-02 （在单元格的 .Value 属性中）发生转换。

如果我改为读取 .Text 属性，结果会根据需要以小数形式出现，但问题是格式化为“-”的 0 被导出为“-”。

是否有一种“正确”的方法可以在**所有**情况下都有效地处理这个问题？
我必须在多个电子表格中使用最终解决方案，并且我无法控制每个电子表格中的显示格式设置或每个单元格的内容（即：不保证是数字数据）

## 示例代码

```
Public Function test()
    Dim cell As Range: Set cell = Worksheets("Sheet1").Range("A1")
    Dim i As Integer

    Dim vSingle As Single
    Dim vVariant As Variant
    Dim vDouble As Double

    For i = 0 To 4
        vSingle = cell.Offset(i, 0).Value
        vVariant = cell.Offset(i, 0).Value
        vDouble = cell.Offset(i, 0).Value
        Debug.Print cell.Offset(i, 0).Text & " --> " & cell.Offset(i, 0).Value & " : " & vSingle & " : " & vVariant & " : " & vDouble
    Next
End Function 
```

**结果是：**

```
 -  --> 0 : 0 : 0 : 0
0.10000000  --> 0.1 : 0.1 : 0.1 : 0.1
0.01666667  --> 1.66666666666667E-02 : 1.666667E-02 : 1.66666666666667E-02 : 1.66666666666667E-02
 -->  : 0 :  : 0
 -->  : 0 :  : 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:29:02.207

我无法复制您的问题，但也许您可以使用以下代码来提供帮助。基本上，您可以检查它是否为数字，然后将其存储到强类型变量中，然后将其导出。你可以使用这样的东西：

```
Dim num As Double

Do
    If (IsNumeric(Selection.Value)) Then
        num = Selection.Value
        ' Export num
    Else
        ' Export Selection.Value
    End If
Loop Until True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:53:00.410

使用`Format`函数来表示你想要的值

从 Excel 帮助

> > > 返回包含根据格式表达式中包含的指令格式化的表达式的 Variant（字符串）。
> > > 
> > > 格式(表达式[,格式[,firstdayofweek [,firstweekofyear]]])

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T17:03:55.277

我有一个类似的问题，因为我正在处理可以是字符串或数字的零件目录号。我的 VBA 代码从 Excel 源中获取一个值并将其分配到 Excel 目标模板中，然后由将其插入表中的应用程序进行处理。问题是大“数字”被转换成指数符号。但是，Acme Part# 847000003 <> Acme Part# 8.47E+08。我的解决方案是创建一个函数来测试输入值，将其格式化为通用数字并将其作为强制字符串（带有前缀撇号）返回。

```
Public Function ConvertExponentialNumber(p_strCatalogueNbr As String) As String

Dim varTemp As Variant

If IsNumeric(p_strCatalogueNbr) Then

    varTemp = Format(p_strCatalogueNbr, "General Number")

    ConvertExponentialNumber = Chr(39) & varTemp

Else

    ConvertExponentialNumber = p_strCatalogueNbr

End If

End Function 
```

# inheritance - 经典继承分歧

> ID：10111546
> 
> 赞同：1
> 
> 时间：2012-04-11T18:09:16.030
> 
> 标签：inheritance, architecture, paradigms

我想知道在需要角色或特征但在经典继承环境中应该做什么。我在两条道路上产生了一个类，这两条道路都来自一个根类，但是，我想将两条道路上的不同类链接在一起以共享相同的功能。见下文：

```
+-- Base
 +-- Base_Processor
 | +-- Base_Processor_Request
 |  +-- Base_Processor_Request_Ajax
 +-- Base_Impl
  +-- Base_Impl_MyImpl
   +-- Base_Impl_MyImpl_Processor (extends from Base_Processor)
    +-- Base_Impl_MyImpl_Processor_Request (extends from ??)
     +-- Base_Impl_MyImpl_Processor_Request_Ajax (extends from ??) 
```

将 Base_Impl_MyImpl_Processor_Request 和 Base_Processor_Request 链接在一起，同时仍然从 Base_Impl_MyImpl_Processor 扩展的最佳方法是什么，并且还以相同的方式链接 Base_Impl_MyImpl_Processor_Request_Ajax。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:48:41.810

我 100% 同意[Alex Burtsev](https://stackoverflow.com/users/235715/alex-burtsev)的评论 - 许多级别的继承看起来像是依赖项的噩梦（而且，正如您所发现的，当您使用继承时，很难在类之间重用特定的代码位）。

通常我不希望*trait*类被插入到一个层次结构中——在我看来，trait 是独立的概念，它定义了实现细节的变化，因此只属于一个接口而不是从一个基类派生

如果这是现有代码，并且您有多个元素需要在不同的派生类之间重用，我认为将它们拆分为与您的层次结构完全无关的单独类会更有意义。

看起来`Processor`，`Request`并且`Ajax`可以更好地为您服务作为单独的实体。

# xcode - 核心情节：x 轴上的日期错误

> ID：10111550
> 
> 赞同：3
> 
> 时间：2012-04-11T18:09:27.587
> 
> 标签：xcode, core-plot, nsdateformatter

按照不同的教程，我已经使用 Core-Plot 成功创建了散点图。现在，在 X 轴上设置日期我得到了完全错误的日期。我的图表的来源是一个包含字典的数组。在字典的每条记录中，字典的第一个键是 unix 时间戳，第二个键是要绘制的值。它看起来像这样：

```
 (
            {
        0 = 1334152500;
        1 = 0;
    },
            {
        0 = 1334152800;
        1 = 0;
    },
            {
        0 = 1334153100;
        1 = 0;
    }, 
```

AFAIK Core-Plot 需要一个开始日期和一个步骤。在这种情况下，开始日期为 1334152500（格林威治标准时间 2012 年 4 月 11 日星期三 13:55:00），步长为 300 秒。每 300 秒出现一个新值。现在我用来绘制 X 轴的代码：

```
// this string contains the first UNIX Timestamp registered
NSString *tstamp_start = [NSString stringWithFormat:@"%@", [[[self.graphData  objectForKey:@"1"] objectAtIndex:0] objectForKey:@"0"]];
NSDate *refDate = [NSDate dateWithTimeIntervalSince1970:[tstamp_start doubleValue]];

// definition of the graph skipped...

CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.graph.axisSet;
// tInterval is previous set to 300 - float.
// here I should set the Interval between every value on graph...
axisSet.xAxis.majorIntervalLength = CPTDecimalFromFloat(tInterval);
axisSet.xAxis.axisLineStyle = axisLineStyle;
axisSet.xAxis.majorTickLineStyle = axisLineStyle;
axisSet.xAxis.minorTickLineStyle = axisLineStyle;
axisSet.xAxis.labelTextStyle = textStyle;
axisSet.xAxis.labelOffset = 3.0f;
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd/MM/yyyy hh:mma"];
CPTTimeFormatter *timeFormatter = [[CPTTimeFormatter alloc] initWithDateFormatter:dateFormatter];
timeFormatter.referenceDate = refDate;
axisSet.xAxis.labelFormatter = timeFormatter;
axisSet.xAxis.labelingPolicy = CPTAxisLabelingPolicyAutomatic;
axisSet.xAxis.orthogonalCoordinateDecimal = CPTDecimalFromFloat(yAxisMin);
(...) 
```

该行已正确显示，但在 X 轴上，我正在读取值/标签，例如：'22/07/2054 06:35AM'。2054 年？在不考虑时区（本地 +2，unix +0）和 CPTAxisLabelingPolicyAutomatic 的情况下，至少我应该在当天读取 13:55 到现在之间的日期。我错过了什么？

非常感谢！

西蒙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T00:25:26.570

`referenceDate`是格式化时应用于每个数据点的偏移量。因此，第一个数据点的值正在翻倍。您要么需要调整参考日期，要么将数据值更改为从 0 开始。

```
NSDate *refDate = [NSDate dateWithTimeIntervalSince1970:0.0]; 
```

# icloud - 在进入后台时将 UIDocument 上传到 iCloud

> ID：10111552
> 
> 赞同：1
> 
> 时间：2012-04-11T18:09:45.930
> 
> 标签：icloud, uidocument

我有一个启用 iCloud 的应用程序，它使用 UIDocument 来管理其数据。当文档打开并且应用程序进入后台状态时，文档应该被保存并上传到 iCloud。进入后台状态时保存文档开箱即用，但我无法找到让图书馆员接受更改的方法。仅当应用程序返回前台时才会上传文档。

我注意到其他支持 iCloud 的应用程序——比如 iWork 应用程序——也有这种行为。如何在我自己的应用程序中启用此功能？

我已经尝试在 beginBackgroundTaskWithExpirationHandler 块中手动启动自动保存，但遗憾的是这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:04:01.253

根据 Apple DTS 的说法，这是由于 iCloud 同步引擎中的一个错误造成的。

# c# - 使用带有 XAML 绑定的 StringFormat 将文件夹注入图像路径

> ID：10111553
> 
> 赞同：1
> 
> 时间：2012-04-11T18:09:53.307
> 
> 标签：c#, xaml, string-formatting

我试图根据某些条件允许多个图标大小。为此，我有一堆文件夹：'Images\Icons\...\*.png' 其中 ... 是大小（16、32、64、128、256 等）每个文件夹包含所有针对给定大小优化的图标。

我的问题我似乎无法在图像源路径中指定文件夹...即：

```
<Image x:Name  = "img" 
       Stretch = "None" 
       Source  = "{Binding StringFormat=Images\Icons\{0}\Multi.png, 
                   RelativeSource={RelativeSource Self}, 
                   Path=Parent.Parent.Tag}" /> 
```

现在，我只是将文件夹名称存储在祖父母的标签中（我将来会绑定到其他东西，但现在我只是想把这一部分拼凑在一起）。当我尝试构建上述 xaml 时，出现错误：

```
The text \Multi.png ... is not allowed after the closing } of a markup extension. 
```

这让我怀疑它将 {0} 视为标记扩展，而不是我的字符串格式的一部分。我已经阅读了有关使用 {} 转义并使用单引号指定字符串格式的信息，但两者都不起作用：

```
Source  = "{Binding StringFormat={}Images\Icons\{0}\Multi.png, ... 
```

上面返回的错误与我根本不逃避时相同。

```
Source  = "{Binding StringFormat='Images\Icons\{0}\Multi.png', ...

Source  = "{Binding StringFormat='{}Images\Icons\{0}\Multi.png', ... 
```

以上两个可以防止错误发生，但会导致图像源为空。

有谁知道如何实现这一目标？

（澄清一下，如果祖父母的标签设置为“16”，那么我希望将图像源绑定到 Images\Icons\16\Multi.png ... 如果标签设置为“32”，那么我需要绑定源到Images\Icons\32\Multi.png。作为测试，我将祖父母标签设置为完整路径，并排除了字符串格式。与祖父母标签的相对绑定成功并显示了图像。只有在以下情况下才会失败我尝试仅使用字符串格式指定文件夹名称以指定路径的其余部分）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:27:31.060

Binding 的 StringFormatter 属性仅在目标为 String 类型时才有效。否则，它将被简单地忽略。

您可以通过在绑定中添加转换器来解决此问题，该转换器采用格式字符串和标签，应用格式并将其转换为 ImageSource。在 C# 中，您的转换器将类似于：

```
public sealed class ImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType,
                          object parameter, CultureInfo culture)
    {
        if (parameter == null || parameter.Equals(String.Empty)) parameter = "{0}";
        string path = String.Format((string) parameter, value);
        return new BitmapImage(new Uri(path));
    }

    public object ConvertBack(object value, Type targetType,
                              object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

获得转换器后，您可以将以下内容添加到 XAML 中的资源中：

```
<local:ImageConverter x:Key="ImageConverter" /> 
```

并将您的 Source 绑定修改为：

```
<Image x:Name="img"
       Stretch="None"
       Source="{Binding Parent.Parent.Tag, Converter={StaticResource ImageConverter}, 
                        ConverterParameter='Images\\Icons\\{0}\\Multi.png', 
                        RelativeSource ={RelativeSource Mode=Self}}" 
/> 
```

# nsstring - 从服务器接收损坏的信息

> ID：10111555
> 
> 赞同：2
> 
> 时间：2012-04-11T18:10:01.827
> 
> 标签：nsstring, nsdate, corrupt, nsmutableurlrequest

在 Iphone 和 android 上，我得到 200 的响应代码，这意味着我得到了一个没有错误的有效且良好的响应，但是我收到的 json 有额外的字符。我打印出我收到的 NSData，它的长度为 580，并且 NSString，至少在它失败时，将具有更大的长度并在 json 的末尾打印 n+ 个额外的字符。我不确定为什么会这样，但我想我会看看是否有人能看到我做错了什么。

```
NSString *post = [NSString stringWithFormat:@"referer=%@&username=%@&password=%@", referer, username, password];
NSData *pData = [post dataUsingEncoding: NSUTF8StringEncoding allowLossyConversion:YES];
NSString *pLength = [NSString stringWithFormat:@"%d", [pData length]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];
    [request setURL:self.url];
    [request setHTTPMethod:@"POST"];
    [request setValue:pLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:pData];
    [request setTimeoutInterval:30];

NSHTTPURLResponse *response = nil;
    NSError *err = nil;
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];
    NSString *sData = [NSString stringWithUTF8String:[data bytes]]; 
```

我没有收到任何错误，收到的每个响应代码都是 200。我也打印出了所有这些值。数据长度为 580，并且 sData 有时会有所不同，但当它通过时，长度将为 580，但这可能会因不同情况而改变。对于使用该系统的其他用户，数据并不总是 580。

回答：

我解决了问题而不是使用

```
NSString *sData = [NSString stringWithUTF8String:[data bytes]]; 
```

你应该使用

```
NSString *sData = [[NSString alloc] initWithData: data encoding: NSUTF8String]; 
```

这将根据 NSData 对象分配正确的空间量，因此 NSString 将永远不会尝试访问或存储可能位于应访问的最后一个地址后面的更多空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T13:24:28.227

回答：

我解决了问题而不是使用

NSString *sData = [NSString stringWithUTF8String:[data bytes]]; 你应该使用

NSString *sData = [[NSString alloc] initWithData: 数据编码: NSUTF8String]; 这将根据 NSData 对象分配正确的空间量，因此 NSString 将永远不会尝试访问或存储可能位于应访问的最后一个地址后面的更多空间。

# ruby-on-rails - Rails 新手努力启动服务器

> ID：10111560
> 
> 赞同：0
> 
> 时间：2012-04-11T18:10:29.360
> 
> 标签：ruby-on-rails, ruby

当我运行 rails s 时，我收到以下错误：

```
/Users/User/application-name/config/initializers/s3_config.rb:3:in `read': No such file or directory - /Users/User/application-name/config/amazon_s3.yml (Errno::ENOENT)
    from /Users/User/application-name/config/initializers/s3_config.rb:3:in `<top (required)>'
    from /Users/User/application-name/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:234:in `load'
    from /Users/User/application-name/vendor/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/engine.rb:555:in `block (2 levels) in <class:Engine>'
    from /Users/User/application-name/vendor/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/initializable.rb:25:in `instance_exec'
    from /Users/User/application-name/vendor/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/application.rb:92:in `initialize!'
    from /Users/User/application-name/vendor/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/User/application-name/config/environment.rb:5:in `<top (required)>'
    from /Users/User/application-name/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `require'
    from /Users/User/application-name/vendor/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:51:in `initialize'
    from /Users/User/application-name/config.ru:1:in `new'
    from /Users/User/application-name/config.ru:1:in `<main>'
    from /Users/User/application-name/vendor/bundle/ruby/1.9.1/gems/railties-3.1.0/lib/rails/commands/server.rb:70:in `start'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

有谁知道如何解决这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:18:46.047

在您的 /Users/User/application-name/config/initializers/s3_config.rb 文件中，您尝试读取不存在的 /Users/User/application-name/config/amazon_s3.yml。

创建您的 /Users/User/application-name/config/amazon_s3.yml 并将您的凭据放入其中

# javascript - 从JS代码中读取串口

> ID：10111571
> 
> 赞同：0
> 
> 时间：2012-04-11T18:11:46.397
> 
> 标签：javascript, serial-port

现在有哪些选择？是否有任何组件（无论是商业的还是免费的）能够实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:36:49.227

没试过，但这对你有好处吗？

[https://github.com/voodootikigod/node-serialport](https://github.com/voodootikigod/node-serialport)

# php - 用逗号显示除最后一天以外的日期

> ID：10111579
> 
> 赞同：2
> 
> 时间：2012-04-11T18:12:25.527
> 
> 标签：php, html

我有以下 if 语句，这些语句收集了在显示之前选择的所有日期。

```
$daysUsed = "";

if($this->dayweeksunsession==1){
    $daysUsed .= "Su ";
}

if($this->dayweekmonsession==1){
    $daysUsed .=  "M ";
}

if($this->dayweektuessession==1){
    $daysUsed .=  "T ";
}

if($this->dayweekwedsession==1){
    $daysUsed .=  "W ";
}

if($this->dayweekthurssession==1){
    $daysUsed .=  "Th ";
}

if($this->dayweekfrisession==1){
    $daysUsed .=  "F ";
}

if($this->dayweeksatsession==1){
    $daysUsed .=  "Sa ";
}

if($daysUsed !=="") {
    echo "</span><br/>Days of the Week: <span class='BoxReviewOutput'>";
    echo $daysUsed;
} 
```

我的问题是如何做到这一点，以便为会话中选择的一周中的每一天显示逗号，除了最后一天。

例如：选择了周日和周二。所以会显示“Su, T”

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T18:14:45.177

使用[内爆（）](http://php.net/manual/en/function.implode.php)

```
$days = array("Su", "M", ....., "Sa");
echo implode(",", $days); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T18:14:55.183

在你的 ifs 添加一个逗号：

```
$daysUsed = "Whatever, "; 
```

然后在输出最终字符串之前：

`$daysUsed = substr($daysUsed, 0, -2);`

**编辑：** -1 需要为-2，以说明天数之间的间隔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T18:15:05.500

我会使用一个数组并内爆它，但在你的情况下我需要使用它

```
echo substr($daysUsed,0,-1) 
```

在这种情况下，我从字符串中删除最后一个字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T18:49:26.830

$daysUsed = trim($daysUsed, "," );

trim() 是迄今为止更好的选择-最小的功能，可以满足您的预期目的。

# objective-c - iphone UIView 如何在特定点渲染图层？

> ID：10111580
> 
> 赞同：3
> 
> 时间：2012-04-11T18:12:26.277
> 
> 标签：objective-c, uiview, core-graphics, frame

我正在手动创建 pdf，需要在视图中渲染一些图像。**图像的框架在模板 nib 文件中定义。**但是，我似乎找不到根据模板文件中分配给它们的帧来渲染这些图像的好方法。

当我打电话

```
[imageView.layer renderInContext:pdfContext]; 
```

视图以 0,0 的原点呈现。

更新：解决方案是在渲染上下文之前翻译坐标系的原点，并在渲染后恢复它

```
CGContextTranslateCTM(pdfContext, imageView.frame.origin.x,imageView.frame.origin.y);
            //render the container, with the correct coordinate system
            [v.layer renderInContext:pdfContext];
            CGContextTranslateCTM(pdfContext, -imageView.frame.origin.x,-imageView.frame.origin.y); 
```

**如何在视图的 frame.origin 点中定义的具有正确原点的图形上下文中正确渲染图层？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T17:49:59.313

我需要在操作前调整坐标系

```
CGContextTranslateCTM(pdfContext, imageView.frame.origin.x,imageView.frame.origin.y);
//render the container, with the correct coordinate system
[v.layer renderInContext:pdfContext];
CGContextTranslateCTM(pdfContext, -imageView.frame.origin.x,-imageView.frame.origin.y); 
```

# java - IOException：无法读取输入文件。我找不到使用不同路径的解决方案，即使手动

> ID：10111582
> 
> 赞同：1
> 
> 时间：2012-04-11T18:12:31.750
> 
> 标签：java, image, path, io

如何解决此错误？我找不到使用不同路径的解决方案，即使是手动的。请解释如何使用绝对路径将图像读入缓冲图像。

```
private BufferedImage[] image = new BufferedImage[9];
private int imageNo = 0;
private Boolean draw = false;
private int drawType;
private String [] realtivePath;
private String [] absolutePath;
//=============================================================================

public DrawPanel() {

    int i,j; 
    absolutePath =  new String[9];
    realtivePath = new String []{"B_Pictures\\Burj Khalifa.jpg", "B_Pictures\\Taipei 101.jpg", "B_Pictures\\Willis Tower.jpg",
        "B_Pictures\\Empire State Building.jpg", "B_Pictures\\Chrysler Building.jpg",
        "B_Pictures\\Woolworth Building.jpg", "B_Pictures\\Met Life Tower.jpg",
        "B_Pictures\\Singer Building.jpg", "B_Pictures\\Philadelphia City Hall.jpg"}; 
    //======================================================================
    for(i = 0;i < 9; i++)
    {
        absolutePath[i] = new File(realtivePath[i]).getAbsolutePath();
        System.out.println("Path is: "+absolutePath[i]);
    }
   //=======================================================================
    try {
        for (j = 0; j < 9; j++) {
            image[j] = ImageIO.read(new File(absolutePath[j])); //<-- can't read absolute path!
        }
    }catch (IOException e) {
        e.printStackTrace();
        //System.out.println("Error reading file");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:19:18.000

显然你的绝对路径不正确。您正在根据运行 java 应用程序的目录解析相对路径。显然这些是错误的相对路径（或者您在与您认为不同的位置运行应用程序）。

更新：

作为澄清，`File.getAbsolutePath()`如果相对路径当前是相对的，则将其设为绝对路径。 *这是纯文本更改*，并不意味着生成的绝对路径有任何有效性。例如，如果您有一个相对路径“foo/bar”，并且基于当前目录“/blah”将其设为绝对路径，那么生成的绝对路径为“/blah/foo/bar”。 *这并不意味着“/blah/foo/bar”是有效路径*。

这是检查代码的简单方法：

```
System.out.println("Path is: "+absolutePath[i] + ", isReadable " + new File(absolutePath[i]).canRead()); 
```

# browser - 什么是最小的 URL 友好编码？

> ID：10111585
> 
> 赞同：5
> 
> 时间：2012-04-11T18:12:49.140
> 
> 标签：browser, encoding

我正在寻找一种在空间方面最有效的 url 编码方法。原始二进制文件（base2）可以用 base16 表示，它更小并且是 url 安全的，但 base64 甚至更有效。但是，通常的 base64 编码不是 url 安全的......

那么对于 URLS 也安全的最小编码方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-28T14:00:24.407

这就是[Base64 URL 编码变体](https://en.wikipedia.org/wiki/Base64#URL_applications)的用途。

它使用相同的标准 Base64 字母，除了`+`更改为`-`和`/`更改为`_`.

大多数现代 Base64 实现将支持这种替代编码。如果你没有，通常只是在解码之前对 Base64 输入进行搜索/替换，或者在将其发送到浏览器之前对输出进行搜索/替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:23:42.480

您可以使用 62 个字符表示而不是通常的基数 64。这将为您提供类似于 youtube 的 URL： [http ://www.youtube.com/watch?v=0JD55e5h5JM](http://www.youtube.com/watch?v=0JD55e5h5JM)

如果您需要将字符串映射到数据库数字 ID，可以使用此页面中提供的 PHP 函数：

[http://bsd-noobz.com/blog/how-to-create-url-shortening-service-using-simple-php](http://bsd-noobz.com/blog/how-to-create-url-shortening-service-using-simple-php)

如果您需要将数字 ID 直接转换为短 URL 字符串，或者这个：http: [//kevin.vanzonneveld.net/techblog/article/create_short_ids_with_php_like_youtube_or_tinyurl/](http://kevin.vanzonneveld.net/techblog/article/create_short_ids_with_php_like_youtube_or_tinyurl/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-06T00:57:06.600

### “base66”（理论上，根据规范）

据我所知，URL 的最佳编码是将“base66”编码为以下字母表：

```
ABCDEFGHIJKLMNOPQRSTUVWXYZ
abcdefghijklmnopqrstuvwxyz
0123456789-_.~ 
```

根据 URI 规范 RFC 3986（第 2.3 节），这些都是“未保留字符”，因此它们将按原样出现在 URL 中。使用这种“base66”编码可以给出如下 URL：

[https://example.org/articles/.3Ja~jkWe](https://example.org/articles/.3Ja%7EjkWe)

那么问题是你是否想要在你`.`的`~`URL 中？

在一些较旧的服务器上（我猜现在很古老）`~joe`意味着`joe`该服务器上用户的“www目录”。因此，用户可能会对`~`角色在您的 URL 中间所做的事情感到困惑。这对于学术网站很常见，尤其是 CS 教授（例如 Donald Knuth 的网站[https://www-cs-faculty.stanford.edu/~knuth/](https://www-cs-faculty.stanford.edu/%7Eknuth/)）

### “base80”（在实践中，但未经实战测试）

但是，在我自己的测试中，以下 14 个其他符号也没有进行百分比编码（在 Chrome 95 和 Firefox 93 中）：

```
!$'()*+,:;=@[] 
```

（另请参阅[此 StackOverflow 答案](https://stackoverflow.com/a/37680717/118608)）

留下可能的“base80” URL 编码。其中一些（特别是`+`and `=`）在 URL 的查询字符串部分中不起作用，仅在路径部分中起作用。总而言之，这最终会为您提供漂亮的超压缩 URL，例如：

[https://example.org/articles/1OWG,HmpkySCbBy@RG6_,](https://example.org/articles/1OWG,HmpkySCbBy@RG6_,)
[https://example.org/articles/21Cq-b6Ud)txMEW$,hc4K](https://example.org/articles/21Cq-b6Ud)txMEW$,hc4K)
[https://example.org/articles/:3Tx**U9X' d;tl~rR]q+](https://example.org/articles/:3Tx**U9X%27d;tl%7ErR%5Dq+)

您可能不希望 URL 中包含所有这些符号的原因有很多。一个例子是 StackOverflow 自己的“链接器”不会在它生成的链接中包含结束逗号（我已经手动将其作为链接的一部分）。

百分比编码似乎也很挑剔。在某些情况下，Firefox 最初会进行百分比编码`'`，`~]`但在以后的请求中不会。

# iphone - 在不覆盖全屏的 UIViewController 中模态显示 UIViewController

> ID：10111590
> 
> 赞同：0
> 
> 时间：2012-04-11T18:12:58.283
> 
> 标签：iphone, objective-c, ios, modalviewcontroller, presentmodalviewcontroller

基本上，一旦我关闭了模态视图，我的自定义 UIToolbar 就不再可点击了。

这是我的设计：

*   屏幕底部的自定义 UIToolbar

*   屏幕的顶部与容器视图控制器相关联[注意] 我将上面的顶部两项添加到根视图控制器中并分配给 UIWinow 的根视图控制器。每当单击工具栏项时，都可以更改容器视图。

*   然后，每个工具栏项与 UINavigationController 关联，以便它可以导航。

*   在导航的 UIViewController 中，我以模态方式呈现视图。由于整个设计，模态视图不会覆盖整个屏幕......

*   在我关闭模式视图后，UIToolbar 项目不再可点击。

我认为“错误”存在于我呈现模态视图的位置，所以我也尝试使用根视图控制器呈现模态视图，然后还有其他问题......

也许有人对此有更深入的了解，这将不胜感激:)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:33:41.823

`modalViewController`尝试在不再需要时立即释放它。如果您使用 ARC，请将其设置为`nil`. 当需要 modalView 时分配一个新的。

# iphone - 进度圈 UIControll iPhone

> ID：10111594
> 
> 赞同：0
> 
> 时间：2012-04-11T18:13:17.543
> 
> 标签：iphone, objective-c, ios, progress

有人知道如何在屏幕截图上制作进度指示器吗？![在此处输入图像描述](../Images/29fe95639fd42a795cd28eda05bced92.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:20:03.887

主要有两种方法可以做到这一点：

1.  使用进度指示器在不同位置创建和保存许多图像。然后使用 `UIImageView`来显示它，根据当前进度更改图像。这是一个简单的解决方案，但是它需要您（手动）创建各种图像。此外它不是连续的（即使它可以足够平滑，根据您保存的图像数量）。但是，它可以产生良好的效果（根据您的需要）。

2.  在运行时绘制指标。在您的情况下，它不应该那么难，因为您的进度指示器非常简单。看一下[CGContext](http://www.google.it/url?sa=t&rct=j&q=cgcontext%20&source=web&cd=1&ved=0CCsQFjAA&url=http://developer.apple.com/documentation/graphicsimaging/reference/CGContext/Reference/reference.html&ei=CcyFT6avPMuQ4gSXp8nPBw&usg=AFQjCNEjD0g71ChGkD27r-RsBKiU3W408g&sig2=rtiAQ5kTfJttMQfrSheMaw)，它将提供绘制圆、绘制线条和用颜色填充路径的所有方法。这将提供比以前的解决方案更好的结果，但是它需要每次都重新绘制指标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T20:20:25.433

查看[TKAProgressCircleView](https://github.com/devinross/tapkulibrary/tree/master/src/TapkuLibrary)。完全满足您的需求，我自己在几个应用程序中使用它。

# c# - 如何更改水晶报表文件（.rpt）的查询？

> ID：10111595
> 
> 赞同：0
> 
> 时间：2012-04-11T18:13:22.940
> 
> 标签：c#, crystal-reports

我需要根据过滤器（where 子句）更改水晶报告文件（.rpt）的查询。我该怎么做（更改查询的 where 子句）？（在后面的代码中）

Obs：我正在使用水晶报表 13、.net 框架 4.0 和 c#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:03:48.507

一般来说，您可以通过将条件添加到报告的记录选择公式中来将条件添加到 WHERE 子句。例如，如果您希望 Order 表中的记录与位置 1 和去年相匹配，那么您可以执行以下操作：

`string selectFormula = "{Order.LocationID} = 1 AND {Order.Year} = 2011";`

然后通过添加到您的报告定义中

`crystalReportViewer.SelectionFormula = selectFormula;`

# python - 默认参数中的字符串连接

> ID：10111597
> 
> 赞同：0
> 
> 时间：2012-04-11T18:13:35.140
> 
> 标签：python, string, concatenation, default-arguments

这是我的一段代码...

```
def contactMaster(data="",url= str(chosenMaster)+"todolist"):
    print "url: "+url 
```

它只打印“todolist”而不是“http://www.mysite.com/blah/1234/todolist”

为什么它不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T18:17:01.853

默认参数是在*定义*函数时计算的，而不是在*执行*时计算的。所以如果`chosenMaster`Python 定义时为空`contactMaster`，则只打印`todolist`。

您需要`str(chosenMaster)`进入该功能。

有关详细信息，请参阅Python 教程中的[默认参数值](http://docs.python.org/tutorial/controlflow.html#default-argument-values)。那里的例子是：

> *默认值在定义*范围内的函数定义点进行评估，因此

```
i = 5

def f(arg=i):
    print arg

i = 6
f() 
```

> 将打印`5`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:18:19.283

函数定义捕获`chosenMaster`函数*声明*时的值，而不是*调用*函数时的值。

改为这样做：

```
def contactMaster(data='', url=None):
    if url is None:
        url = str(chosenMaster) + 'todolist'
    print 'url: ' + url 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:16:45.167

因为[默认函数参数是在定义函数时确定的](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)。`chosenMaster`事后更改不会有任何效果。

# events - 是否有一个简单的工具或库可以将一组带有时间戳的事件“汇总”为给定跨度的每个时间窗口中的事件计数？

> ID：10111600
> 
> 赞同：0
> 
> 时间：2012-04-11T18:13:52.843
> 
> 标签：events, rollup

我的具体问题是我有一组 Apache 访问日志，我想通过将它们分组到一组指定时间的时间窗口中，从中提取“汇总”的请求计数。

我的数据示例：

```
127.0.0.1 - - [01/Dec/2011:00:00:11 -0500] "GET / HTTP/1.0" 304 266 "-" "Sosospider+(+http://help.soso.com/webspider.htm)"
127.0.0.1 - - [01/Dec/2011:00:00:24 -0500] "GET /feed/rss2/ HTTP/1.0" 301 447 "-" "Feedfetcher-Google; (+http://www.google.com/feedfetcher.html; 1 subscribers; feed-id=12878631678486589417)"
127.0.0.1 - - [01/Dec/2011:00:00:25 -0500] "GET /feed/ HTTP/1.0" 304 189 "-" "Feedfetcher-Google; (+http://www.google.com/feedfetcher.html; 1 subscribers; feed-id=12878631678486589417)"
127.0.0.1 - - [01/Dec/2011:00:00:30 -0500] "GET /robots.txt HTTP/1.0" 200 333 "-" "Mozilla/5.0 (compatible; ScoutJet; +http://www.scoutjet.com/)"
127.0.0.1 - - [01/Dec/2011:00:00:30 -0500] "GET / HTTP/1.0" 200 10011 "-" "Mozilla/5.0 (compatible; ScoutJet; +http://www.scoutjet.com/)" 
```

如您所见，每一行代表一个事件——在本例中为一个 HTTP 请求——并包含一个时间戳。

假设我的数据涵盖 3 天，并且我指定 1 天的时间窗口大小，我想生成如下内容：

```
Start    End     Count
2011-12-01 05:00     2011-12-02 05:00    2822
2011-12-02 05:00     2011-12-03 05:00    2572
2011-12-03 05:00     2011-12-04 05:00    604 
```

但是我需要能够改变窗口的大小——我可能想使用 5 分钟、10 分钟、1 小时、1 天或 1 周等窗口来分析给定的数据集。

我还需要库/工具能够分析数百甚至数千兆字节的数据集（一系列行）。

可以通过标准输入接受数据的预构建工具会很棒，但是库会完全没问题，因为我可以围绕库构建工具。任何语言都可以；如果我不知道，我可以学习它。

我更愿意通过将访问日志数据直接传送到具有最小依赖性的工具/库中来做到这一点——我不是在寻找将数据存储在数据库中然后查询数据库进行分析的建议。如果需要，我可以自己解决。

我尝试了 Splunk，发现它对我的案例来说太重和太复杂了。它不仅仅是一个工具，它是一个完整的系统，拥有自己的数据存储、复杂的索引和查询能力等。

我的问题是：这样的库和/或工具是否存在？

### 全面披露

我必须承认，几个月前我实际上尝试过但没有找到类似的东西，所以我自己写了。出于某种原因，我当时没想过要发布这个问题。我将很快分享我在答案中写的 lib/tool。但我真的很好奇这样的事情是否存在；也许我几个月前在搜索时错过了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T14:21:12.937

正如问题中提到的，我实际上在几个月前试图找到这样的东西，但没有成功，所以我自己写了。（出于某种原因，我当时没想过要发布这个问题。）

我借此机会学习了函数式编程 (FP) 并提高了我对 CoffeeScript 的熟练程度。所以我把[Rollups](https://github.com/aviflax/rollups)写成一个运行在[Node上的](http://nodejs.org)[CoffeeScript](http://jashkenas.github.com/coffee-script/)工具。作为我进一步探索 FP 的一部分，我已经添加了[Scala](http://www.scala-lang.org/)和[Clojure版本。](http://clojure.org/)

所有版本都旨在用作工具和库，尽管它们都只是实现这一目标的一部分——我认为目前只有 Clojure 版本可以真正安全地用作库，而我还没有以这种方式对其进行了测试。

这些工具就像我在问题中描述的那样工作。给定一个或一组包含 Apache 访问日志的文件，我可以这样调用它们：

```
$ gzcat *.access.log.gz | rollup.clj -w 1d 
```

（或`rollup.coffee`, `rollup.scala`），输出与问题中的示例完全相同。

这个工具解决了我的问题，我不再每天都在积极地使用它。但如果我知道其他人正在使用它，我很乐意进一步改进它以供其他人使用。所以欢迎反馈！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:23:07.857

Splunk (http://www.splunk.com/) 将是我想到的解决此类问题的工具。它有免费和付费版本；我自己没有授权，只是使用它已经安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T01:31:56.233

那么，这必须有多自动化？我可以给出一个仍然有用的不真实的答案吗？

如果你想成为真正的贫民窟，我通常做的就是一次性搞定一堆丑陋的贝壳。这是一个将使用一些`cut`技巧按小时汇总的方法，并且`awk`（我承认它不是很擅长，但速度非常快且功能强大）。

```
cat access_log | cut -d '[' -f 2 | cut -d ' ' -f 1 | cut -d ':' -f 1,2 | awk '{ date=$1; if (date==olddate) sum=sum+1; else { if (olddate!="") {print olddate,sum}; olddate=date; sum=1}} END {print date,sum}' 
```

（[这篇关于用 awk 绘图的帖子](http://hblok.net/blog/posts/2011/04/29/analysing-apache-logs-gnuplot-and-awk/)帮助我弄清楚了聚合位。）

那应该输出如下内容：

```
12/Apr/2012:11 207
12/Apr/2012:12 188
12/Apr/2012:13 317 
```

这可以很容易地与自己一起玩。awk 很整洁。

# dll - 在visual foxpro 7、windows 7中注册一个dll

> ID：10111601
> 
> 赞同：0
> 
> 时间：2012-04-11T18:13:58.867
> 
> 标签：dll, visual-foxpro

我有一个用 VFP 7 编写的应用程序，在应用程序的某处我使用以下命令调用 dll 中的函数：

```
declare long FunctionName in DLL_NAME.dll string@, string@
.
.
.
RETURN FunctionName( StringParam1, StringParam2) 
```

调用此函数会产生错误：

```
The following error has occurred:
Message: Cannot load 32-bit DLL d:\folder\DLL_NAME.dll. 
```

我尝试使用 32/64 位 regsvr 注册 dll ......不走运！

可以帮助识别问题的信息：dll 文件不是本地文件，它位于网络映射驱动器的文件夹中。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:35:38.853

除了不支持任何 64 位的 VFP 之外，我会看看您试图通过网络加载 dll 的事实。

消除它作为一个可能的问题并将其复制到本地并从中加载它......

尝试消除其他所有内容，包括您的 VFP 应用程序。我会直接从 VFP 命令窗口开始，除了有一个简单的 .prg 文件之外什么也不做。在其中，只放置声明并引用 dll 文件的本地副本。设置参数的值，然后调用该函数。

如果这不起作用，那么在应用程序中调用它的位置无关紧要......您刚刚消除了整套条件和环境。

这几乎就像我有时在我们的应用程序中尝试从互联网请求数据时向客户提供的支持一样。我让他们手动转到他们的浏览器并输入我们的应用程序试图访问的任何 URL。如果他们无法从浏览器访问它，那是来自他们的防火墙、IP 阻止或其他的东西......这与我们的应用程序无关。你可能会遇到类似的情况。忽略所有其他元素，只让少数元素完全独立地测试问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T03:14:49.343

我同意这个问题很可能是 dll 位于共享网络上。我过去通过将文件复制到本地机器来解决了这个问题。

但是，根据这篇文章（下面的链接），如果您添加一个特殊的配置文件，告诉 .Net 框架*可以*访问某个应用程序的联网 dll。

这是链接：[http ://www.west-wind.com/webconnection/docs/index.htm?page=_36e0qlogr.htm](http://www.west-wind.com/webconnection/docs/index.htm?page=_36e0qlogr.htm)

# .net-4.0 - 补丁安装后 .NET 4.0 LDAP 绑定失败

> ID：10111604
> 
> 赞同：1
> 
> 时间：2012-04-11T18:14:33.617
> 
> 标签：.net-4.0, patch

有一个比较奇怪的问题。一旦将 .NET 4.0 框架补丁应用到 win2k3 机器上，在其上运行的应用程序在绑定到 AD 的操作时会失败。具体错误： System.DirectoryServices.DirectoryServicesCOMException(0x80005000): Unknown error (0x80005000) at System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail) at System.DirectoryServices.DirectoryEntry.Bind()......

在 4.0 框架上执行修复并重新启动修复了该问题，但下个月应用补丁时它再次中断。在我的研究中，我注意到最常见的原因是其中包含 / 的 OU，但这里不是这种情况，正如我所说，修复框架可以解决问题。有任何想法吗？

# vb.net - LINQ vb.net 中的空结果

> ID：10111614
> 
> 赞同：0
> 
> 时间：2012-04-11T18:15:06.077
> 
> 标签：vb.net, linq, null, sequence

嗨人们:)我遇到了空结果的问题，当我比较查询时它说我不能给出以下错误“序列不包含元素”

```
Dim existe = (
    From   p In abc.Ventadetalles 
    Where  p.idarticulo = txtArticulo.Text 
    And    p.idventa = IdventaTextBox.Text 
    Select p).Single 
```

这是代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:17:32.373

尝试使用 SingleOrDefault。这应该有效。

或者，您可以使用 Any() ，因为看起来您正在尝试测试是否存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:17:45.040

错误是正确的：序列没有元素！您正在使用`Single()`，因此空序列会产生错误。如果您想改为返回默认值，请使用`SingleOrDefault()`.

如果您希望序列中实际存在元素，请再次仔细检查您的条件和源数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:21:57.723

以下将起作用：

```
Dim existe = (
    From   p In abc.Ventadetalles 
    Where  p.idarticulo = txtArticulo.Text 
    And    p.idventa = IdventaTextBox.Text 
    Select p).SingleOrDefault()

If existe Is Not Nothing Then
    '' here you can use existe
End If 
```

# python - Sendmail 不解析标签

> ID：10111618
> 
> 赞同：0
> 
> 时间：2012-04-11T18:15:18.187
> 
> 标签：python, string, parsing, sendmail

我在我的一台服务器上使用 sendmail 来发送错误报告。我通过附加到一个字符串来构建此报告，然后我使用 sendmail 发送电子邮件。但是，sendmail 无法识别字符串中的选项卡。我想知道如何解决这个问题？

```
def sendMail(data):
     sendmail_location = "/usr/sbin/sendmail" # sendmail location
     p = os.popen("%s -t" % sendmail_location, "w")
     p.write("From: %s\n" % "test@example.com")
     p.write("To: %s\n" % "test2@example.com")
     p.write("Subject: the subject\n")
     p.write(data)
     status = p.close()
     if status != 0:
         print "Sendmail exit status", status 
```

一个示例字符串是：

```
data = "%d\t%s\t%s\n" % (count, message, message2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:05:45.060

从目前的情况来看，该行被视为标题。标题后需要一个空行：

```
def sendMail(data):
     sendmail_location = "/usr/sbin/sendmail" # sendmail location
     p = os.popen("%s -t" % sendmail_location, "w")
     p.write("From: %s\n" % "test@example.com")
     p.write("To: %s\n" % "test2@example.com")
     p.write("Subject: the subject\n")
     p.write("\n")                                 # blank line
     p.write(data)
     status = p.close()
     if status != 0:
         print "Sendmail exit status", status 
```

# prolog - 斜线（/）在序言中做什么？

> ID：10111625
> 
> 赞同：7
> 
> 时间：2012-04-11T18:15:28.707
> 
> 标签：prolog, operators

我有这个代码：

```
set_value(X,Value,[X/_|T],[X/Value|T]).
set_value(X,Value,[Y/V|T],[Y/V|NewT):- X\=Y,set_value(X,Value,T,NewT).
set_value(X,Value,[],[X/Value]). 
```

但我不知道做什么/做什么。看起来它配对变量，但我不是 100% 确定。它绝对不是除法运算符。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T18:16:09.330

它什么也没*做*；正如您已经想到的，它在这里用于构造对。

由于`/`不会出现在执行算术评估的右手边`is`或其他地方，Prolog 只产生两个参数项`/`作为函子。`/`被使用是因为它可以写成中缀；`-`也是泛型对构造函数的流行选择。

# shell - 如何将环境变量从子 Makefile 设置为其根 Makefile 或我当前的 shell？

> ID：10111626
> 
> 赞同：0
> 
> 时间：2012-04-11T18:15:34.323
> 
> 标签：shell, makefile

例如，我的根 Makefile 位于`~/`，我调用了一个子 Makefile 在：`~/subdir/Makefile`。如何将环境变量从全局子 Makefile 导出到我的根 Makefile 的当前执行 shell？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:17:10.487

环境只从父母到孩子，而不是相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:26:05.723

正如[geekosaur](https://stackoverflow.com/users/643977/geekosaur)所说，你不能直接这样做。子进程不能修改父进程的环境。

您可以做的是让父makefile包含子目录中的makefile也使用的子目录中的文件，然后这些设置有效地位于父makefile中。

您根本无法将变量导出到当前的 shell；您必须在设置环境变量的情况下为您运行一个交互式 shell — 但这将是一种非常奇怪的业务方式。

# android - Android 应用程序崩溃（共享首选项）

> ID：10111630
> 
> 赞同：0
> 
> 时间：2012-04-11T18:15:57.787
> 
> 标签：android, sharedpreferences, android-alertdialog

我正在构建一个使用保存的 android 游戏。这意味着用户最多可以在游戏中打开 5 个独特的存档。要创建新的存档，我使用 SharedPreferences 让用户输入存档名称并将其存储在我的 SharedPreferences 文件夹中，然后使用 Intent Extra 将用户重定向到主游戏 Activity，该 Intent Extra 告诉游戏活动要打开什么存档。

在设计中听起来一切正常，但由于某种原因，我的应用程序只是保持强制关闭。我在 Eclipse 中没有任何代码错误，甚至 LogCat 也没有显示错误。我不知道发生了什么...

这是我的代码：

```
package ent.com;

import android.app.AlertDialog;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;

public class Saves extends ListActivity{

String saves[] = { "Empty save", "Empty save", "Empty save", "Empty save", "Empty save"};
public static String filename = "SharedData";
SharedPreferences someData;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    someData = getSharedPreferences(filename, 0);
    String save1 = someData.getString("0", "Empty save");
    String save2 = someData.getString("1", "Empty save");
    String save3 = someData.getString("2", "Empty save");
    String save4 = someData.getString("3", "Empty save");
    String save5 = someData.getString("4", "Empty save");

    saves[0] = save1;
    saves[1] = save2;
    saves[2] = save3;
    saves[3] = save4;
    saves[4] = save5;

    setListAdapter(new ArrayAdapter<String>(Saves.this, android.R.layout.simple_list_item_1, saves));

}

@Override
protected void onListItemClick(ListView l, View v,int position, long id) {
    final String clicked = saves[position];
    final String pos = getString(position);
    super.onListItemClick(l, v, position, id);
    if(clicked=="Empty save"){

        AlertDialog.Builder alert = new AlertDialog.Builder(this);
        alert.setTitle("Input name");
        alert.setMessage("Give your team a name:");
        // Set an EditText view to get user input 
        final EditText input = new EditText(this);
        alert.setView(input);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
          String value = input.getText().toString();
          SharedPreferences.Editor editor = someData.edit();
          editor.putString(pos, value);
          editor.commit();

          try{
          Class Joe = Class.forName("ent.com.TestActivity");
          Intent Joey = new Intent(Saves.this, Joe);
          Joey.putExtra("save", clicked);
          startActivity(Joey);
          }catch(ClassNotFoundException e){
              e.printStackTrace();
          }

          }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) {
            Intent back = new Intent("ent.com.MENU");
            startActivity(back);
          }
        });

        alert.show();
    }else{
    try{
    Class ourClass = Class.forName("ent.com.TestActivity");
    Intent ourIntent = new Intent(Saves.this, ourClass);
    ourIntent.putExtra("save", clicked);
    startActivity(ourIntent);
    }catch(ClassNotFoundException e){
        e.printStackTrace();
    }
    }
}

} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:36:54.873

到目前为止，我所看到的一个大问题是：

```
if (clicked=="Empty save") 
```

`==`用于数字和参考比较。您正在寻找：

```
if (clicked.equals("Empty save")) 
```

这实际上会比较有问题的字符串

# android - 安卓测试夹具

> ID：10111633
> 
> 赞同：9
> 
> 时间：2012-04-11T18:16:08.893
> 
> 标签：android, testing

我正在开发一个 android 应用程序，并且我为单元测试创​​建了一个新的测试项目。建议在哪里存储测试装置（如 xml 文件等）以及访问它的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-09-05T19:39:29.793

这取决于您是否真的是指*单元测试*或*仪器测试*（例如使用浓缩咖啡和其他东西）......

# 单元测试：

1.  将您的固定装置放入`src/test/resources`（例如`src/test/resources/fixture.json`）
2.  从您的测试类访问它们，例如使用：

```
InputStream inputStream = this.getClass().getClassLoader().getResourceAsStream("fixture.json") 
```

# 仪器化测试：

1.  将您的固定装置放入`src/androidTest/assets/`（例如`src/androidTest/assets/fixture.json`）
2.  从您的测试类访问它们，例如使用：

```
InputStream is = InstrumentationRegistry.getContext().getResources().getAssets().open("fixture.json") 
```

* * *

[以下](https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string)是一些如何转换`InputStream`为`String`.

[这是一篇很好的文章](https://medium.com/@yair.kukielka/android-unit-tests-explained-part-2-a0f1e1413569)，描述了不同的案例。

* * *

PS*我知道这个问题已经有6年以上的历史了......回答任何未来的搜索。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-21T08:17:05.860

经过一番搜索，我发现没有**一种正确的**方法可以在 Android 中存储装置（在 java 中也没有那么多）。

Fixtures 是一种提供简单且一致的数据以传递到测试用例的方法。使用返回对象的静态方法创建`.java`类是一种方法。

例子：

```
public class Pojos {

    public static List<TaskListItem> taskListItems() {
        return Arrays.asList(
                new TaskListItem("one"),
                new TaskListItem("two"),
                new TaskListItem("three")
        );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-08T02:09:11.897

您可以将 Gradle 配置为从共享文件夹读取资源，您将能够通过执行以下操作在单元测试或检测测试中共享代码和资源。

```
android {
    // ...
    sourceSets {

        final String sharedJavaDir = 'src/sharedTest/java'
        final String sharedResourcesDir = 'src/sharedTest/resources'

        test.java.srcDirs += sharedJavaDir
        test.resources.srcDirs += [sharedResourcesDir]

        androidTest.java.srcDirs += sharedJavaDir
        androidTest.resources.srcDirs += [sharedResourcesDir]

        // ....
    }
    // ...
} 
```

假设我在

```
/app/src/sharedTest/resources/test_fixture_file.txt 
```

科特林代码

您可以在 UnitTest 或 Instrumented 测试中使用。

```
val resource: InputStream? = this.javaClass.getResourceAsStream("/test_fixture_file.txt") 
```

# postgresql - 如何将文字 \u 序列转换为 UTF-8？

> ID：10111654
> 
> 赞同：2
> 
> 时间：2012-04-11T18:17:42.093
> 
> 标签：postgresql, utf-8, unicode-escapes

我正在从外部源加载数据转储，一些字符串包含`\uXXXX`UTF8 字符的序列，如下所示：

```
\u017D\u010F\u00E1r nad S\u00E1zavou 
```

我可以通过使用 E'' 常量来检查内容`psql`，但找不到任何函数/运算符来返回正确的值。

我想问一下，是否可以在*不*使用 PL/pgSQL 函数的情况下将这个带有 unicode 转义的字符串转换为普通的 UTF8？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T02:57:52.917

我不认为有一个内置的方法。我能想到的最简单的方法是您想要避免的 plpgsql 函数：

```
CREATE OR REPLACE FUNCTION str_eval(text, OUT t text)
  LANGUAGE plpgsql IMMUTABLE STRICT PARALLEL SAFE AS
$func$
BEGIN
   EXECUTE 'SELECT E''' || replace($1, '''', '''''') || ''''
   USING $1
   INTO t;
END
$func$; 
```

更新的版本可以防止[SQLi](http://en.wikipedia.org/wiki/Sql_injection)，而且速度也更快。

# jquery - window.location 在新标签页中打开

> ID：10111659
> 
> 赞同：0
> 
> 时间：2012-04-11T18:17:59.607
> 
> 标签：jquery, window.location

这是我用来使整个 div 可点击的代码：

```
$(".clickablediv").click(function(){
        window.location=$(this).find("a").attr("abc");
        return false;
        }); 
```

这很好用，但我希望链接在新选项卡中打开。我的代码在 div 中查找超链接代码，其中添加了属性 abc，并且必须维护它。但是，将其更改为 window.open 会失去可点击的 div 功能。

如何在新窗口中打开此链接？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:19:43.680

尝试

```
window.open($(this).find("a").attr("abc")); 
```

# opengl - GLSL 4.2 图像加载和存储 & memoryBarrier

> ID：10111663
> 
> 赞同：1
> 
> 时间：2012-04-11T18:18:30.967
> 
> 标签：opengl, concurrency, thread-safety, glsl, textures

使用图像加载和存储，我想在 GLSL 4.2 中执行以下操作：

```
vec3 someColor = ...;
vec4 currentPixel = imageLoad(myImage, uv);
float a = currentPixel.a/(currentPixel.a+1.0f);
vec4 newPixel = vec4(currentPixel.rgb*a+someColor*(1.0f-a),currentPixel.a+1.0f);
imageStore(myImage, uv, newPixel); 
```

对于多个光栅化像素，“uv”的值可以相同。为了获得正确的结果，我当然不希望在 imageLoad() 和 imageStore() 的调用之间写入我的像素；

这可能以某种方式与 memoryBarrier 一起做吗？如果是这样，它必须如何在此代码中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:38:14.523

> 对于多个光栅化像素，“uv”的值可以相同。

那你就做不到了。

`memoryBarrier`不是创建原子操作的方法。它只保证单个着色器操作的顺序*。*因此，如果特定着色器调用读取图像、写入图像，然后再次读取它，您需要`memoryBarrier`确保读取的内容是之前写入的内容。如果*其他*着色器调用写入它，那么你就不走运了（除非它是一个依赖调用。这些东西的规则很复杂）。

如果您尝试进行程序化混合，则需要确保每个片段着色器调用都读取/写入*唯一*值。否则，它将无法正常工作。

你没有说你真正想要达到的目标是什么，所以不可能提供更好的方式来获得你想要的东西。我只能说，*这种*方式行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T12:56:35.703

您将需要实现锁定系统（锁定/互斥锁）。为此，最好使用 imageAtomicCompSwap，或者如果使用缓冲区，则使用 atomicCompSwap。当然，您需要使用全局变量（例如纹理）而不是本地变量。

出于实现目的，我认为这个问题在很大程度上回答了您的问题：[我的自旋锁实现是否正确且最优？](https://stackoverflow.com/questions/1383363/is-my-spin-lock-implementation-correct-and-optimal)

# javascript - 查找 id 以公共字符串开头的所有元素

> ID：10111668
> 
> 赞同：75
> 
> 时间：2012-04-11T18:18:51.047
> 
> 标签：javascript, regex

我有一个 XSL，它创建了多个 id 为“createdOn”的元素加上一个 $unique-id

```
Example : createdOnid0xfff5db30 
```

我想使用 JavaScript 找到这些变量并将其存储在一个变量中。我试过了

```
var dates = document.getElementsById(/createdOn/); 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-04-11T18:20:21.463

使用 jQuery，您可以使用[attr 以](http://api.jquery.com/attribute-starts-with-selector/)选择器开头：

```
var dates = $('[id^="createdOnid"]'); 
```

使用现代浏览器，您可以使用[以 selector 开头的 CSS3 属性值](http://www.w3.org/TR/selectors/#attribute-substrings)以及[`querySelectorAll`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)：

```
var dates = document.querySelectorAll('*[id^="createdOnID"]'); 
```

但是对于旧浏览器（并且没有 jQuery）的后备，您需要：

```
var dateRE = /^createdOnid/;
var dates=[],els=document.getElementsByTagName('*');
for (var i=els.length;i--;) if (dateRE.test(els[i].id)) dates.push(els[i]); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-10-11T11:35:59.293

您应该刚刚使用了简单的`CSS` [选择器](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll#Parameters) 和`JavaScript`'[`.querySelectorAll()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)方法。

在你的情况下：

```
var dates = document.querySelectorAll('[id^="createdOnId"]'); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-11T18:27:10.110

因为您没有标记 jQuery，而且您可能不需要它，所以我的建议是在创建这些元素时为它们添加一个类。然后使用大多数浏览器内置的 getElementsByClassName() 函数。对于 IE，您需要添加如下[内容](https://stackoverflow.com/a/8472488/803876)：

```
if (typeof document.getElementsByClassName!='function') {
    document.getElementsByClassName = function() {
        var elms = document.getElementsByTagName('*');
        var ei = new Array();
        for (i=0;i<elms.length;i++) {
            if (elms[i].getAttribute('class')) {
                ecl = elms[i].getAttribute('class').split(' ');
                for (j=0;j<ecl.length;j++) {
                    if (ecl[j].toLowerCase() == arguments[0].toLowerCase()) {
                        ei.push(elms[i]);
                    }
                }
            } else if (elms[i].className) {
                ecl = elms[i].className.split(' ');
                for (j=0;j<ecl.length;j++) {
                    if (ecl[j].toLowerCase() == arguments[0].toLowerCase()) {
                        ei.push(elms[i]);
                    }
                }
            }
        }
        return ei;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T20:38:43.673

```
function idsLike(str){
    var nodes= document.body.getElementsByTagName('*'),
    L= nodes.length, A= [], temp;
    while(L){
        temp= nodes[--L].id || '';
        if(temp.indexOf(str)== 0) A.push(temp);
    }
    return A;
}

idsLike('createdOn') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-13T14:29:21.170

尝试以下操作：

```
var values = new Array(valueKey_1);
var keys = new Array("nameKey_1");
var form = document.forms[0];
for (var i = 0; i < form.length; i++) {
    name = form.elements[i].name;
    var startName = name.toLowerCase().substring(0, 18);
    if (startName == 'startStringExample') {
    values.push(name.value);
    keys.push(name);
    }
} 
```

# sql - 如何获得 MAX int 但排除特定的 int？

> ID：10111669
> 
> 赞同：4
> 
> 时间：2012-04-11T18:19:11.430
> 
> 标签：sql, sql-server-2008, tsqlt

我想从特定列中获取最大整数，不包括如果存在则始终为最大值的值。数据可能如下所示：

```
score, empid
 1       3
 3       3
 10      3
 1       5 
 2       5
 1       8
 2       8
 3       8
 10      8 
```

在上面，我希望 MAX 分数小于 10。MAX(score) 在这种情况下不起作用，因为它会带回 10。结果应该如下所示：

```
score, empid
 3       3
 2       5
 3       8 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T18:34:06.183

这是另一种方法：

```
SELECT
   MAX(CASE WHEN score = 10 THEN NULL ELSE score END) AS [max_score],
   empid
FROM
   table
GROUP BY
   empid 
```

如果您希望避免子选择，这可能更可取。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T18:22:36.933

```
select max(score) , empid
from table
where score < (select max(score) from table )
group by empid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-06T06:07:35.997

按照 Ben English 的[回答](https://stackoverflow.com/a/10111879/4212710)，如果您只排除 1 个值，您也可以使用 NULLIF 来减少输入。

```
SELECT MAX(NULLIF(score, 10)), ...
FROM ...
GROUP BY ... 
```

`CASE WHEN`可以排除一系列值。在这里，我们排除了所有超过 10 的分数：

```
SELECT MAX(CASE WHEN score > 10 THEN NULL ELSE score), ...
FROM ...
GROUP BY ... 
```

这是`IIF`减少打字的版本：

```
SELECT MAX(IIF(score > 10, NULL, score)), ...
FROM ...
GROUP BY ... 
```

# jquery - Internet Explorer 8 及以下问题

> ID：10111670
> 
> 赞同：1
> 
> 时间：2012-04-11T18:19:15.720
> 
> 标签：jquery, css, internet-explorer

我什至不知道从哪里开始自己解决这个问题，所以我希望这里有人拥有或了解浏览器兼容性并可以帮助我解决这个问题。请参阅我的所有代码的 jsFiddle.net 示例。

[jsFiddle.net 示例](http://jsfiddle.net/jamesjw007/kfrjd/1/)

我在 Firefox 11+ 的实时机器上运行此代码，效果非常好。我在 Internet Explorer 9 中运行相同的代码，它运行得非常好。我将文档模式切换到 IE8，它开始失败。

这里有一些图片来展示我在说什么：

同样在 IE7 中，徽标被向下推，请参见 IE7 示例。这也适用于 Safari，未提供图像。

IE9 ![IE9](../Images/4a746f0200ec15ebd878b2ebeaafbfa1.png) IE8 ![IE8](../Images/4cb3db12f6cd7d47d7e60e0ae03a06e8.png) IE7 ![IE7](../Images/2ef8733f6d519485bc370f2db2bc27f9.png) FF11+![FF11+](../Images/3d467ddafcc79e401e98de643a387328.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:28:12.503

我更新了你的[jsfiddle](http://jsfiddle.net/kfrjd/2/)。问题似乎是您的`:first`选择器在 IE8 中不起作用。我不确定你为什么需要选择器，因为每个菜单项下面`:first`只有一个，但也许我错过了一些东西。`ul`如果您删除`:first`选择器，它工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:41:05.023

你的第二个问题：标志

看这里 [jsfiddle](http://jsfiddle.net/kfrjd/18/)

将 div id=content 放在 span clear-both 之前，即有问题

# openam - 使用 OpenDJ/OpenAM 启用“下次登录时强制更改密码”时身份验证失败

> ID：10111675
> 
> 赞同：1
> 
> 时间：2012-04-11T18:19:28.250
> 
> 标签：openam, opends, reset-password

我正在使用 OpenAM 9.5.4 和 Open DJ 2.4.5，并且遇到“重置时强制更改密码”的问题

以下是我设置环境的步骤：

1) 向默认领域添加了密码服务：

> *   iplanet-am-password-reset-userValidate=uid
> *   iplanet-am-password-reset-searchFilter=objectclass=person
> *   iplanet-am-password-reset-baseDN=dc=opensso,dc-java,dc=net
> *   iplanet-am-password-reset-lockout-duration=0
> *   iplanet-am-password-reset-max-num-of-questions=5
> *   iplanet-am-password-reset-question=最喜欢的餐厅
> *   iplanet-am-password-reset-bindPasswd= ***** ***
> *   iplanet-am-password-reset-failure-duration=300
> *   iplanet-am-password-reset-notification=com.sun.identity.password.plugins.EmailPassword
> *   iplanet-am-password-reset-lockout-attribute-name=inetuserstatus
> *   iplanet-am-password-reset-lockout-attribute-value=inactive
> *   iplanet-am-password-reset-lockout-warn-user=4
> *   iplanet-am-password-reset-bindDN=cn=openssouser,ou=opensso adminusers,dc=opensso,dc=java,dc=net
> *   iplanet-am-password-reset-lockout-email-address=
> *   iplanet-am-password-reset-user-personal-question=true RequiredValueValidator=com.sun.identity.sm.RequiredValueValidator
> *   **iplanet-am-password-reset-force-reset=true**
> *   iplanet-am-password-reset-failure-count=5
> *   iplanet-am-password-reset-failure-lockout-mode=true
> *   iplanet-am-password-reset-option=com.sun.identity.password.plugins.RandomPasswordGenerator
> *   iplanet-am-password-reset-enabled=true

2) 在 OpenDJ 中创建密码策略：

> > > > 配置密码策略的属性

```
 Property                                   Value(s)
     -------------------------------------------------------
1)   account-status-notification-handler        -
2)   allow-expired-password-changes             false
3)   allow-user-password-changes                true
4)   default-password-storage-scheme            Salted SHA-1
5)   deprecated-password-storage-scheme         -
6)   expire-passwords-without-warning           false
7)   force-change-on-add                        false
8)   force-change-on-reset                      true
9)   grace-login-count                          0
10)  idle-lockout-interval                      0 s
11)  last-login-time-attribute                  -
12)  last-login-time-format                     -
13)  lockout-duration                           0 s
14)  lockout-failure-count                      0
15)  lockout-failure-expiration-interval        0 s
16)  max-password-age                           2 d
17)  max-password-reset-age                     0 s
18)  min-password-age                           0 s
19)  password-attribute                         userpassword
20)  password-change-requires-current-password  false
21)  password-expiration-warning-interval       1 d
22)  password-generator                         -
23)  password-history-count                     0
24)  password-history-duration                  0 s
25)  password-validator                         -
26)  previous-last-login-time-format            -
27)  require-change-by-time                     -
28)  require-secure-authentication              false
29)  require-secure-password-changes            false

?)   help
f)   finish - apply any changes to the Password Policy
c)   cancel
q)   quit 
```

3）创建了一个虚拟属性来将密码策略分配给一组用户：

> > > > 配置用户定义的虚拟属性的属性

```
 Property           Value(s)
    -----------------------------------------------------------------------
1)  attribute-type     ds-pwp-password-policy-dn
2)  base-dn            The location of the entry in the server is not taken
                       into account when determining whether an entry is
                       eligible to use this virtual attribute.
3)  conflict-behavior  real-overrides-virtual
4)  enabled            true
5)  filter             (objectClass=*)
6)  group-dn           "cn=Users,ou=groups,dc=opensso,dc=java,dc=net"
7)  value              "cn=OpenSSO Users Policy,cn=Password
                       Policies,cn=config"

?)  help
f)  finish - apply any changes to the User Defined Virtual Attribute
c)  cancel
q)  quit 
```

4）创建用户

当我通过“重置密码”屏幕回答秘密问题时，我会收到重置密码的电子邮件。但是使用新密码（或旧密码）会给出“身份验证错误”

我在 OpenDJ 控制面板中查看了用户，“pwdReset”属性按预期从“false”更改为“true”。但是，如果我将其改回“false”，我会验证属性，但我不会被迫更改密码。

有没有其他人有这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:28:55.550

您的设置假定 OpenAM 9.5.4 完全支持 OpenDJ 密码策略功能。然而，这种情况并非如此。我建议您查看 OpenAM 邮件列表的存档，因为这已经讨论过多次了。

问候，

卢多

# c++ - 在 GCC 和 OS X 中使用 SFML 时遇到问题

> ID：10111680
> 
> 赞同：3
> 
> 时间：2012-04-11T18:19:56.957
> 
> 标签：c++, linker, sfml

我一直在尝试让 SFML 工作一段时间，并且一直在尝试使用 GCC 让它工作。顺便说一句，我在 OS X 上。我遵循标准的 Linux 说明并使用 Linux 64 位下载，但是在编译时...

```
g++ -o testing main.cpp -lsfml-system 
```

有时候是这样的：

```
main.cpp: In function ‘int main()’:
main.cpp:7: error: ‘class sf::Clock’ has no member named ‘GetElapsedTime’
main.cpp:9: error: ‘class sf::Clock’ has no member named ‘GetElapsedTime’
main.cpp:10: error: ‘Sleep’ is not a member of ‘sf’ 
```

所以我认为这可能是由于没有使用包含，所以我将我的 gcc 编译命令更改为：

```
 g++ -o testing main.cpp -I ~/SFML-1.6/include/ -lsfml-system 
```

现在我收到了这个错误：

```
ld: warning: ignoring file /usr/local/lib/libsfml-system.so, file was built for     unsupported file format which is not the architecture being linked (x86_64)
Undefined symbols for architecture x86_64:
  "sf::Clock::Clock()", referenced from:
      _main in ccZEiB7b.o
  "sf::Clock::GetElapsedTime() const", referenced from:
      _main in ccZEiB7b.o
  "sf::Sleep(float)", referenced from:
      _main in ccZEiB7b.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status** 
```

而且我不知道该怎么做才能解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:25:50.623

## Short answer

Add the `-arch i386` (on mac) or `-m32` (on linux) flag

## Long answer

Your `sfml-system` library was built in 32 bits whereas you are trying to compile your program in 64 bits. So your program cannot link to the library.

Recompile SFML in 64 bits if possible and you should be able to compile your program in 64 bits.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:25:40.703

SFML 希望你在 OS X 上使用框架。打开 SFML 文件夹，将 lib64 下的所有文件夹复制到 /Library/Frameworks（即，将 SFML.framework、sfml-system.framework 等复制到 /Library/Frameworks）。

安装框架后，您可以通过将 -framework 命令传递给 g++ 来使用它们，如下所示：

```
g++ -o testing main.cpp -framework SFML -framework sfml-system 
```

# php - 如何在数组中显示错误消息

> ID：10111687
> 
> 赞同：2
> 
> 时间：2012-04-11T18:20:18.653
> 
> 标签：php, mysql, arrays, file-upload

我有这个代码：

```
$allowed_extension = array('jpg', 'jpeg', 'png', 'bmp', 'tiff', 'gif');
$errors = array();
$output = array();

if(!empty($_FILES['image']['tmp_name'])){  

     foreach($_FILES['image']['name'] as $key => $array_value){

        if(!in_array(pathinfo($_FILES['image']['name'][$key], PATHINFO_EXTENSION), $allowed_extension)){
                die("Die!");
        }
    }

    foreach($_FILES['image']['name'] as $key => $array_value){

       $file_name = $_FILES['image']['name'][$key];
       $file_size = $_FILES['image']['size'][$key];
       $file_tmp = $_FILES['image']['tmp_name'][$key];

       $file_extension = pathinfo($file_name, PATHINFO_EXTENSION);
       $file_extension = strtolower($file_extension);

         if (!in_array($file_extension, $allowed_extension)){
        $errors[$file_name][] = "format $file_extension in image $file_name is not accepted";
        continue;
         }

         if ($file_size > 2097152){
        $errors[$file_name][] = "maxsize of 2MB on $file_name has reached";
                    }

         if (count($errors) == 0){

        $dir = "a/b/c";

        if (is_dir($dir)){
            mkdir("a/b/c/tmp_images", 0755);
        }else{
            mkdir("a/b/c", 0755);
            mkdir("a/b/c/tmp_images", 0755);
        }

        $path = "a/b/c/tmp_images"; 
        $prifix = basename($file_name, "." . $file_extension);

        //var_dump ($prifix);

        $uploadfile = $path . "/" . $file_name;

        $x = 0;
        while (file_exists($uploadfile)){
               $x ++;
               $uploadfile = "{$path}/{$prifix}-{$x}.{$file_extension}";
            }

            if (move_uploaded_file($file_tmp, $uploadfile)){
               $file_name = basename($uploadfile);
               $output [$file_name] = "OK";

            }else{

            $output[$file_name] = "Failure while Uploading!";
            $errors[$file_name][] = "Failure: Can't move uploaded pictures!";
            }//else...
         }//if(count($errors))...
    }//foreach($_FILES['image']['name']... 
}//if(!empty($_FILES['image']['tmp_name'])... 
```

我的问题是，我不知道如何显示应该显示的错误消息，当数组

```
$errors 
```

给出。到目前为止，它只会显示：

```
array 
```

代替：

```
maxsize of 2MB on abc.jpg has reached 
```

在 html 我有这个代码：

```
<?php if(isset($errors)):?> 

    <div class="form-error-message" id="signup-error-message" style="display": none;">
        <div class="arrow-wrapper">
            <div class="border-wrapper">
            <?php foreach($errors as $error):?>
                <p class="layer-content">
                <?php echo $error;?>
                </p>
            <?php endforeach;?>
            </div>
        </div>

    </div> 
```

如果有人可以那么友好并帮助我，我将不胜感激。多谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T18:27:20.983

也许像这样保存每个错误：

```
$errors = array();
$errors[] = $file_name . ": this is the error message."; 
```

并显示如下：

```
if(count($errors) > 0){
    foreach($errors as $e){
        echo $e . "<br />";
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T18:23:12.583

你必须`print_r`一个数组，而不是`echo`它：

`print_r($errors);`

或者，您可以单独显示每个错误，如下所示：

```
foreach( $errors as $innerErrors )
{
  foreach( $innerErrors as $anError )
  {
    echo $anError ."\n";
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T18:24:09.197

怎么样？

```
echo implode(', ', $errors[$filename]); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T18:25:28.370

你写成`$errors`二维数组：

```
$errors[$file_name][] = 'your message'; 
```

因此，要正确显示它，请使用两个`foreach`而不是一个：

```
 <?php foreach($errors as $errorsOnFile):?>
            <?php foreach($errorsOnFile as $error):?>
                <p class="layer-content">
                <?php echo $error;?>
                </p>
            <?php endforeach;?>
        <?php endforeach;?> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-11T18:24:27.293

你不能只回显一个数组。但是，您可以循环遍历数组的元素。

```
foreach($errors[file_name] as $error_message) {
    echo $error_message."<br>";
} 
```

此代码一次回显错误。

# jquery - 失去焦点时隐藏分割

> ID：10111689
> 
> 赞同：2
> 
> 时间：2012-04-11T18:20:22.387
> 
> 标签：jquery, focus, hide, blur

在下面的屏幕截图中，您将看到一个大的绿色矩形。单击“我的帐户”链接时会显示此部门。然后可以通过单击“隐藏”图像将其隐藏。

**截图： http:** [//knowwhovotes.com/somecap.JPG](http://knowwhovotes.com/somecap.JPG)

如果用户单击分区之外的任何位置，我希望隐藏绿色分区。我尝试了模糊功能，但无法使其正常工作。

**这是我已经拥有的代码：**

```
<script>
$(document).ready(function() {
    $("#my_account_button").click(function() {
        $("#c_fancy").css({'display' : 'block'});
        $("#my_account").slideDown("Slow");
    });
    $("#hide_account").click(function() {
        $("#c_fancy").css({'display' : 'none'});
        $("#my_account").slideUp("Slow");
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:26:50.727

首先，焦点/模糊通常仅适用于`input`元素。他们不会为`div`元素开火。

您需要在`div`单击文档时将其隐藏，**但**在单击文档`div`本身或其中的任何内容时则不需要。为此，请向文档添加一个点击处理程序，然后停止对`div`DOM 树的点击，如下所示：

```
$(document).ready(function() {
    $("#my_account_button").click(function() {
        $("#c_fancy").css({'display' : 'block'});
        $("#my_account").slideDown("Slow");
    });
    $("#hide_account").click(function() {
        $("#c_fancy").css({'display' : 'none'});
        $("#my_account").slideUp("Slow");
    });

    $(document).click(function() {
        $("#c_fancy").css({'display' : 'none'});
        $("#my_account").slideUp("Slow");
    });
    $("#c_fancy").click(function(e) {
        e.stopPropagation();
    });
}); 
```

然后，您可能希望合并隐藏代码并将其放在一个通用函数中：

```
$(document).ready(function() {
    $("#my_account_button").click(function() {
        $("#c_fancy").css({'display' : 'block'});
        $("#my_account").slideDown("Slow");
    });

    function hideAccount() { 
        $("#c_fancy").css({'display' : 'none'});
        $("#my_account").slideUp("Slow");
    }

    $("#hide_account").click(hideAccount);
    $(document).click(hideAccount);

    $("#c_fancy").click(function(e) {
        e.stopPropagation();
    });
}); 
```

我确实注意到背后的内容`div`变暗了。如果这个变暗的覆盖是您`#c_fancy`元素的一部分，这可能会导致问题。如果是这样，您需要稍微更改代码。基本上，您需要将上面的代码从 更改为`$(document)`，当然要适当地`$('#myOverlay')`替换。`#myOverlay`

# authentication - 如何在 sugarcrm 自定义脚本中检查用户身份验证

> ID：10111691
> 
> 赞同：3
> 
> 时间：2012-04-11T18:20:27.170
> 
> 标签：authentication, sugarcrm

我的问题很愚蠢，但无论如何。我根据自定义字段中的信息创建了一个用于下载文件的脚本。因此，如果尝试下载文件的用户是经过身份验证的 Sugarcrm 用户，现在我需要检查该脚本。你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:09:48.617

向 SugarCRM“入口点”文件添加一个条目。

编辑`/custom/include/MVC/Controller/entry_point_registry.php`并添加以下内容：

```
$entry_point_registry['my_entry_point'] = array('file' => 'custom/mypath/myscript.php', 'auth' => true); 
```

去`http://localhost/index.php?entryPoint=my_entry_point`。

最后一条路径`'auth' => true`意味着用户需要登录到sugarCRM。

# database-design - 如何支持在 rdb 中恢复复杂的依赖关系

> ID：10111699
> 
> 赞同：0
> 
> 时间：2012-04-11T18:21:20.343
> 
> 标签：database-design, theory, cascade

我在为这种可预见的情况制定解决方案时遇到了一些麻烦。

TableA 对 TableB 有一个 FK。TableC 对 TableA 有一个 FK。TableC 对 TableD 有一个 FK。

```
TableA
------
taId
tbId

TableB
------
tbId

TableC
------
tcId
taId
tdId

TableD
------
tdId 
```

一系列简短的事件：

*   1) 对表 B 中的记录发出级联软删除。这会导致 TableA 中的所有相关记录都被软删除，级联到 TableC 中的所有相关记录都被软删除。*   2) 稍后，TableD 中的一条记录被软删除，再次级联。表 D 中的该记录在表 C 中作为 FK 保存。但是，TableC 已被标记为软删除。*   3) 请求恢复步骤1中TableB中的记录。

    如何确保在将相关记录还原到 TableB 中的已还原记录（即 TableA 和 TableC 中）时，我不会还原任何依赖于第 2 步 TableD 中的记录的内容——此外，在不还原部分的情况下它依赖于表 D 中的记录，我以级联方式限制恢复（即，如果发现 TableC 与软删除的记录有关系，则不恢复 TableA）？

    我考虑的是利用表格中的时间设计以及 GUID。每个表将具有（除了软删除标志）一个 DateDeleted 字段和一个 GUID 字段（其中相同的 GUID 将分配给级联软删除中的每个节点以区分级联集）。这将使恢复级联集变得非常容易，因为它们将共享日期和 GUID。但是我遇到的问题，也就是上面概述的问题，是如何处理软删除记录将从不同的级联中删除的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:22:40.843

由于您的`TableD`记录是软删除的，因此您不必担心通过恢复您的第一个软级联删除来破坏参照完整性。但是，您的级联恢复逻辑需要做的是测试正在进行软恢复的每个表的其他依赖关系。

如果有对本身已被软删除的父项的引用，那么您也需要对该父项进行软恢复。

实现此目的的一个好方法是拥有一个按表软删除存储过程（或触发器）和一个按表软恢复存储过程（或触发器）。这些过程会将您的日期/GUID（软删除业务交易 ID）作为输入参数。

对于每个表，相关的 proc 将知道依赖项是什么。软删除具有下游级联依赖性，软恢复将具有上游级联依赖性。每个 proc 将其自己的表记录标记为已删除或已恢复，然后调用执行级联操作所需的 procs。

# coldfusion - 当我尝试在 ColdFusion 中执行存储过程时，并没有返回所有信息

> ID：10111705
> 
> 赞同：2
> 
> 时间：2012-04-11T18:21:58.377
> 
> 标签：coldfusion, sql-server-2008-r2

当我尝试在 ColdFusion 中执行存储过程时，并没有返回所有信息。

*   我正在运行带有 Hot Fix 2 的 ColdFusion 9.0.1。
*   我正在使用 SQL Server 2008 r2。
*   我仅限于存储过程调用。
*   我可以在 SQL Server Management Studio 中执行存储过程，以将单个记录作为变量或选择语句返回。返回完整的记录。
*   存储在数据库中的数据长度为 36539 个字符。
*   ColdFusion 从结果集中返回的数据长度为 32000 个字符。
*   ColdFusion 从 cf_sql_varchar 返回的数据长度为 4000 个字符。
*   ColdFusion 从 cf_sql_longvarchar 返回的数据长度为 4000 个字符。
*   ColdFusion 从 cf_sql_text 返回的数据长度为 4000 个字符。
*   ColdFusion 从 cf_sql_text 返回的数据长度为 4000 个字符。

关于如何通过 ColdFusion 存储过程调用获取数据的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:30:43.880

试试这个：

1) 登录您的 ColdFusion 管理员

2）点击导航菜单上的“数据源”（在数据和服务下）

3) 点击你的数据源

4) 点击页面底部的“显示高级设置”按钮

5）选中“CLOB”旁边的框

我敢打赌，下一个框中的“缓冲区”值是您服务器上的“4000”。

默认值为“64000”，这可能是我在这里偏离基础的线索。

# c - 在不同的模块中组合枚举

> ID：10111712
> 
> 赞同：3
> 
> 时间：2012-04-11T18:22:29.933
> 
> 标签：c, enums

我有许多包含枚举的模块。（它们保存在状态机中使用的信号）。

模块信号.h：

```
enum ModuleASignals {
  modASig1,   
  modASig2,   
  ...
  modASigN,   
}; 
```

模块信号.h：

```
enum ModuleBSignals {
  modBSig1,   
  modBSig2,   
  ...
  modBSigM,   
}; 
```

每个模块都有任意数量的信号。

现在我想在一个应用程序中组合随机选择的模块。问题是，所有信号都必须是全局可见的，并且信号必须保持唯一。一个信号（8位）的大小也有限制，所以我不能只给单个模块的枚举提供唯一的偏移量。

如何将单个枚举组合成一个，而不必为每个应用程序调整信号头文件？一种方法是将元素（不带“enum ... {”）放入文件中并包含这些片段，但这会导致 IDE 无法理解代码，因此会带来一些不便。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:28:22.197

如果可以接受一个 .h 包含另一个，你可以写

```
enum ModuleBSignals {
  modBSig1 = modASigN+1,   
  modBSig2,   
  ...
  modBSigM,   
}; 
```

因此，第二个枚举将在第一个枚举之后开始。

*补充*：

您可以尝试使用虚拟的第一个元素参数化所有模块：

```
#include "sig_start.h"  // Default one contains #define START 0

enum ModuleBSignals {
  modBSig1 = START,
... 
```

为每个模块目录创建正确的 sig_start.h 成为构建过程的责任。第 N+1 个 sig_start.h 将包含

```
#include module1signals.h
...
#include moduleNsignals.h
#define START modNSigM+1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:40:14.213

您可以使用单个`enum`并通过预处理器启用特定模块：

```
enum Signals {
#ifdef USE_MODULE_A
  modASig1,   
  modASig2,   
  ...
  modASigN,   
#endif
#ifdef USE_MODULE_B
  modBSig1,   
  modBSig2,   
  ...
  modBSigM,   
#endif
}; 
```

这主要等同于您通过代码片段的解决方案，但*可能*对 IDE 更友好......

# java - Swing GUI - 创建一个“设置”窗口（正确）

> ID：10111718
> 
> 赞同：7
> 
> 时间：2012-04-11T18:22:57.217
> 
> 标签：java, swing, window, jframe, frame

我正在开发一个使用 Swing 的应用程序。我已经成功地为用户创建了一个主要的 GUI 来工作。但是，我想允许用户更改他/她的设置。我应该如何去创建设置窗口？使用称为“设置”的新 JFrame 是处理此问题的最佳方法，还是有比第二个 JFrame 更好的方法？

（注意：设置JFrame，退出时不会关闭主界面，会使用DISPOSE方法）

我想以消耗最少内存的方式处理这个问题，但保持应用程序的专业外观。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T18:42:18.127

你考虑过 CardLayout 吗？ [http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

就个人而言，我发现使用单独的对话对于配置设置来说有点过时了。我更喜欢选项卡式布局，这是一种在顶部装饰有选项卡栏的卡片布局。

您可以轻松地将应用程序包装在接近顶级的卡片布局中，并添加一个菜单操作以切换到配置卡片，并使用“确认”或“取消”按钮切换回主应用程序卡片。

最后，这实际上是关于您的用户喜欢什么，但请记住，他们中的许多人可能更喜欢他们所知道的，即使这*不是*一个更好的解决方案。你必须找到一个平衡点，如果你的实现很糟糕，那么最终他们会希望*你*的解决问题的方法可以在其他应用程序中使用。

一个完美的例子是选项卡式浏览，而不是多个窗口。就个人而言，现在我已经习惯了浏览标签，我无法想象回到多窗口浏览，但在某个时间点，多窗口是城里唯一的游戏。

In the end, if you find out you made the wrong choice, keep you code clean enough to easily implement with either solution. As long as your configuration screen is just a plain JPanel (or wrapped in just a JPanel), it shouldn't be very hard to do.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:25:46.247

这是一个做这种事情的类：

[http://tus.svn.sourceforge.net/viewvc/tus/tjacobs/ui/dialogs/ParamDialog.java?view=log](http://tus.svn.sourceforge.net/viewvc/tus/tjacobs/ui/dialogs/ParamDialog.java?view=log)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:28:08.870

您必须查看 ApplicationListener 接口，尤其是该接口的“handlePreferences”方法。

# objective-c - 为什么我不能在我的 iOS 项目的一个类中导入我的协议？

> ID：10111719
> 
> 赞同：3
> 
> 时间：2012-04-11T18:23:00.823
> 
> 标签：objective-c, ios

我创建了一个协议文件“Protocol.h”并尝试将其导入到视图控制器头 .h 文件中

```
#import <Foundation/Foundation.h>
#import "Protocol.h" 
```

但是，XCode 指出找不到文件“Protocol.h”。为什么不？Is 绝对与视图控制器标头位于同一文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:24:15.377

It's case-sensitive -- is your file Protocol.h with the correct capitalization?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T19:20:54.180

通常，在您的视图控制器头文件中，在 @interface 行之前，您应该使用：

```
@class Protocol; 
```

代替：

```
#import "Protocol.h" 
```

试试看它是否有效。如果没有，您是否正在进行某种循环标头引用？有很多关于在这种情况下该怎么做的提示和建议，请在 Google 上搜索“objective-c circular header”以获取更多信息。

编辑：您可以随时尝试将#import 行移动到 .m 文件中，而不是 .h 文件中。它快速而肮脏，是避免循环标头引用的可靠方法。

# android - 登录并延迟第二个活动，直到发布结果

> ID：10111727
> 
> 赞同：0
> 
> 时间：2012-04-11T18:23:23.927
> 
> 标签：android, post, login, delay

全部！我对开发 Android 很陌生。我已经遇到了很多问题，并且我自己解决了大部分问题，其中一些是通过在这里和其他网站上搜索的。我现在面临的问题，我似乎无法找到解决方案。这与这里其他人的要求很接近，但我找不到任何可以解决我的问题的问题。

我正在开发我的第一个大型应用程序的初始阶段，其中用户登录到第一个页面，然后被允许访问应用程序的其余部分和功能。我现在正在使用一个简单的登录应用程序的基本示例，它工作正常，但是当我尝试延迟第一个活动调用第二个活动直到结果发布时，它要么发布而不调用第二个活动，或者它不会发布结果并继续前进。我目前也在尝试捆绑结果并将它们显示在第二个活动中。不过我稍后会改变它，我只需要看看它是否能正常工作。

这是我的代码：（不确定我是否做对了。这是我的第一次！）

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Login button clicked
    ok = (Button)findViewById(R.id.btn_login);
    ok.setOnClickListener(this);

    result = (TextView)findViewById(R.id.lbl_result);

    final Handler handler1 = new Handler();
    handler1.postDelayed(new Runnable() {
        @Override
        public void run() {

            ok.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View view) {
                    final Bundle b = new Bundle();

                    EditText txt1 = (EditText)findViewById(R.id.editText1);
                    EditText txt2 = (EditText)findViewById(R.id.lbl_result);

                    b.putString("ID", txt1.getText().toString());
                    b.putString("PW", txt2.getText().toString());

                    final Handler handler2 = new Handler();
                    handler2.postDelayed(new Runnable() {
                        @Override
                        public void run() {
                            final Intent myIntent = new Intent(TempActivity.this, TempActivity2.class);             
                            myIntent.putExtras(b);
                            startActivity(myIntent);
                        }
                    }, 3000);                
                }
            });
        }
    }, 4000);
} 
```

我只是以错误的方式解决这个问题吗？任何帮助是极大的赞赏！我讨厌成为菜鸟！让我知道是否需要更多信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:49:41.390

哦……我不知道……如果它真的是对的……但据我了解你的代码……你正在使用

```
 handler1.postDelayed(new Runnable() { 
```

并在其可运行的

```
 public void run() {

ok.setOnClickListener(new View.OnClickListener() { 
```

在这里..您正在设置 onClickListener.. 它会在 4 秒后发生.. 因为这条线..

```
 }, 4000); 
```

因此，如果您在 4 秒之前单击.. 我认为 onclicklistener 没有被设置...所以给一些时间.. 就像应用程序启动后 4 秒.. 然后尝试单击...我认为它应该可以工作..

# iphone - 弹出 UIViewController 时处理打开的异步 Web 请求（AFNetworking）

> ID：10111729
> 
> 赞同：13
> 
> 时间：2012-04-11T18:23:31.367
> 
> 标签：iphone, asynchronous, afnetworking

这是场景：

- 将 UIViewController (A) 推送到导航堆栈
- 在 vi​​ewDidLoad 上，使用 AFNetworking（在整个应用程序中共享的单例 AFHTTPClient）调用异步 GET 以填充视图上的各种用户元素（例如 UILabel）。
- 用户在请求返回之前按下后退按钮 -
假设其他活动视图控制器可能正在发出请求，因此您无法取消所有打开的操作

所以问题 #1 是，您应该跟踪 UIViewController A 发出的打开请求并在用户离开该视图时取消未完成的请求，还是应该让它们完成并忽略它们？由于 AFNetworking 使用块，正在更新的用户元素保留在块内，因此在弹出视图后执行成功/失败块时不会导致崩溃。然而，忽略它们的缺点似乎是不必要的网络流量。

问题 #2 是，您将在哪里执行代码以取消 UIViewController A 所做的操作？viewDidDisappear 似乎不正确，因为用户可能已经前进（将新视图推送到堆栈上）而不是后退（弹出当前视图），在这种情况下，您不想取消打开请求，因为用户可能会来返回当前视图，它不会再次加载。但是，我认为在请求执行时不会调用 dealloc 或 viewDidUnload，因为该块将保留用户元素，所以我认为它不能去那里。

不胜感激对此的想法。您认为最佳实践是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T22:12:37.843

一般来说，当用户离开视图控制器时，您并不需要取消请求。在内存管理方面，对块 self 的引用将防止因向已释放的实例发送消息而导致的任何崩溃，所以不用担心。

至于用户体验，我想说你不应该真正担心它，直到它成为一个问题（我们开发人员有一个诀窍，可以完全错误地猜测我们的应用程序中什么会变慢）。但是，如果您正在发出大型 GET 请求，并且它会造成明显的迟缓，我的建议是让控制器执行`HTTPClient -cancelAllHTTPOperationsWithMethod:path:`（`-viewDidUnload:`任何其他回调都为时过早）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:40:01.100

也许您可以有一个管理所有网络内容的单例，只需将其委托设置为当前 vc（在 viewDidLoad 中），这样您就可以获取任何传入数据，并在 vc 消失时向其发送取消消息（或者让不同的 vc成为它的代表）。或者单例可以保留数据以供任何 vc 在以后的某个阶段访问。出于这个原因，我倾向于不将异步代码放入我的 VC 中。

# django - Tastypie，为多对多关系添加元素

> ID：10111734
> 
> 赞同：8
> 
> 时间：2012-04-11T18:24:01.150
> 
> 标签：django, rest, tastypie

我正在构建一个 django sweetpie api，但在`ManyToMany`关系中添加元素时遇到问题

示例，models.py

```
class Picture(models.db):
    """ A picture of people"""
    people = models.ManyToManyField(Person, related_name='pictures',
        help_text="The people in this picture",
    )

class Person(models.db):
    """ A model to represet a person """
    name = models.CharField(max_length=200,
        help_text="The name of this person",
    ) 
```

资源：

```
class PictureResource(ModelResource):
    """ API Resource for the Picture model """
    people = fields.ToManyField(PersonResource, 'people', null=True,
        related_name="pictures", help_text="The people in this picture",
    )
class PersonResource(ModelResource):
    """ API Resource for the Person model """
    pictures = fields.ToManyField(PictureResource, 'pictures', null=True,
        related_name="people", help_text="The pictures were this person appears",
    ) 
```

我的问题是我想`add_person`在我的图片资源中有一个终点。如果我使用`PUT`，那么我需要指定图片中的所有数据 如果我使用`PATCH`，我仍然需要指定图片中的所有人。当然，我可以简单地生成`/api/picture/:id/add_people`URL，在那里我可以处理我的问题。问题是它感觉不干净。

另一种解决方案是生成`/api/picture/:id/people`端点，在那里我可以做`GET`, `POST`, `PUT`, 就像它是一个新资源一样，但我不知道如何实现它，在这个资源下创建新人似乎很奇怪。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T23:16:05.250

我通过覆盖 API 资源的 save_m2m 函数来实现这一点。这是使用您的模型的示例。

```
def save_m2m(self, bundle):
    for field_name, field_object in self.fields.items():
        if not getattr(field_object, 'is_m2m', False):
            continue

        if not field_object.attribute:
            continue

        if field_object.readonly:
            continue

        # Get the manager.
        related_mngr = getattr(bundle.obj, field_object.attribute)
            # This is code commented out from the original function
            # that would clear out the existing related "Person" objects
            #if hasattr(related_mngr, 'clear'):
            # Clear it out, just to be safe.
            #related_mngr.clear()

        related_objs = []

        for related_bundle in bundle.data[field_name]:
            # See if this person already exists in the database
            try:
                person = Person.objects.get(name=related_bundle.obj.name)
            # If it doesn't exist, then save and use the object TastyPie
            # has already prepared for creation
            except Person.DoesNotExist:
                person = related_bundle.obj
                person.save()

            related_objs.append(person)

        related_mngr.add(*related_objs) 
```

# c# - linq query syntax: how to produce a combination of two list up a criterion

> ID：10111744
> 
> 赞同：0
> 
> 时间：2012-04-11T18:24:24.350
> 
> 标签：c#, linq

I got two lists, a lists of facebooks, and a list of users.

The facebook object gets only a property, id, like:

```
public class EFacebook
{
    public string id { get; set; }
} 
```

The second list is a list of users, but the object is more complex, each user gets a nullable list of providers inside, one of these providers can be a facebook one, and each provider gets a id, like:

```
public class EUser
{
    public List<EProvider> EProviders { get; set; }
}

public class EProvider
{
    public enum EnumProviderType
    {
        Facebook = 2,
        Twitter = 3
    }

    public EnumProviderType ProviderType { get; set; }
    public string Id { get; set; }
} 
```

I need to filter the facebook list based on the users providers, getting two children lists, users that are facebooks and users that are not facebooks. I'm trying something like:

```
var query1 =
    from i in users
    where i.EProviders.Any(j => j.ProviderType == EProvider.EnumProviderType.Facebook)
    select i.EProviders;

var query =
    from i in facebooks
    where i.id.Equals(???)
    select i; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:36:00.507

建立在你已经拥有的基础上，这可能会奏效

```
var query2 =
    from i in users
    where i.EProviders.All(j => j.ProviderType != EProvider.EnumProviderType.Facebook)
    select i.EProviders; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:36:12.107

从带有投影 ( `.Select`) 的完整列表中选择，类似于：

```
users.Select( u => new { User: u, 
                         IsFacebookUser: facebook.Any( f => f.Id == u.Providers
                                                    .Single( p => p.providerType == facebookProvider).id) } 
```

以上是象征性的，我没有机会编译。有了这个，如果有 facebook 帐户，您将获得所有用 bool 标记的用户的列表。

# android - How to install .apk file using android AVD.?

> ID：10111747
> 
> 赞同：3
> 
> 时间：2012-04-11T18:24:40.493
> 
> 标签：android, installation, apk, avd

I am using windows 7\. One of my client gave me a apk file to see a previous project developed by another developer. But I have no android phone. So I want to install that apk file to my AVD device of my android sdk. But I am fail. Please give me details instruction how to install apk file inside AVD device of Eclipse(Android SDK). I am using windows 7.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T18:28:17.207

命令是：

adb 安装 app.apk

如果要在现有安装上安装它，您将需要：

adb install -r app.apk

这仅适用于已安装的应用程序和新的 app.apk 文件使用相同签名进行签名的情况。否则，您必须先卸载现有的应用程序。

确保你有`[android installation]\platform-tools`你的 PATH。如果您不想修改 PATH，请在命令行中使用 adb 的完整路径。例如：

```
c:\android-sdk-windows\platform-tools\adb.exe install app.apk 
```

# python - 简单的 Python Web 服务器问题

> ID：10111749
> 
> 赞同：2
> 
> 时间：2012-04-11T18:24:46.753
> 
> 标签：python, sockets, webserver

我正在尝试使用套接字库编写一个 python Web 服务器。我已经通过几个来源，无法弄清楚为什么我编写的代码不起作用。其他人运行了非常相似的代码并声称它有效。我是 python 新手，所以我可能会遗漏一些简单的东西。

它现在工作的唯一方法是将数据变量发送回客户端。浏览器打印原始 GET 请求。当我尝试发送 HTTP 响应时，连接超时。

```
import socket

##Creates several variables, including the host name, the port to use
##the size of a transmission, and how many requests can be handled at once
host = ''
port = 8080
backlog = 5
size = 1024

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((host,port))
s.listen(backlog)
while 1:
    client, address = s.accept()
    data = client.recv(16)
    if data:
        client.send('HTTP/1.0 200 OK\r\n')
        client.send("Content-Type: text/html\r\n\r\n")
        client.send('<html><body><h1>Hello World</body></html>')

    client.close()
    s.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:45:26.853

您需要在响应之前使用输入，并且不应在 while 循环中关闭套接字：

1.  替换`client.recv(16)`为`client.recv(size)`, 以使用请求。

2.  移动你的最后一行，`s.close()`后退一个缩进，这样它就不会在你的 while 循环中。目前您正在关闭连接，然后`accept`再次尝试连接，因此您的服务器将在第一次请求后崩溃。

除非您将此作为练习，否则您应该扩展[SimpleHTTPServer](http://docs.python.org/library/simplehttpserver.html)而不是直接使用套接字。

此外，在创建套接字之后（绑定之前）添加此行可以修复您可能遇到的任何“地址已在使用”错误。

```
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1) 
```

祝你好运！

# perl - perl 中可以分叉的进程数量是否有限制？

> ID：10111751
> 
> 赞同：2
> 
> 时间：2012-04-11T18:25:23.253
> 
> 标签：perl, fork

我面临一个奇怪的问题。分叉的进程不会增加超过 64 个。

```
sub create_process()
{
    my $child_pid;
    my @nsitr;

    my $i = 0;

    foreach my $domain (@domains)
    {
        @nsitr = @nameservers;
        open my $dnsfh, '>', $outputfile or die "Unable to open $outputfile - $!";
        foreach my $ns (@nameservers)
        {
            print "Forking child $i\n";
            defined($child_pid = fork() ) or (die "Unable to fork a new process" && next);
            $i++;
            if($child_pid == 0)
            {
                &resolve_dns($dnsfh, $domain, $ns);
                exit;
            }

        }
        close $dnsfh;
    }
} 
```

输出

```
...
...
Forking child 60
Forking child 61
Forking child 62
Forking child 63
Forking child 64
Forking child 64
Forking child 64
Forking child 64
Forking child 64
...
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T18:31:12.990

Perl 没有定义这样的限制，但大多数操作系统都有。用于`waitpid`收割子代，或者在类 Unix 系统上，您可以使用`sigaction`（从`POSIX`模块中）忽略标志以使系统自动收割子代`SIGCHLD`。`SA_NOCLDWAIT`（Linux 恰好允许您省略`SA_NOCLDWAIT`，但无论如何您都应该使用它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:35:01.210

如果您想进行并行查找，您可以使用随附的[演示脚本](http://cpansearch.perl.org/dist/Net-DNS/demo/mresolv)`Net::DNS`或查看[AnyEvent::DNS](http://search.cpan.org/perldoc/AnyEvent%3a%3aDNS)。

后者提供

> 该模块提供了许多 DNS 便利功能以及完全异步和高性能的纯 perl 存根解析器。

我没用过，但[IO::Lambda::DNS](http://search.cpan.org/perldoc/IO%3a%3aLambda%3a%3aDNS)也允许进行并行查询：

```
# parallel async queries
   lambda {
      for my $site ( map { "www.$_.com" } qw(google yahoo perl)) { 
         context $site, 'MX', timeout => 0.25; 
         dns { print shift-> string if ref($_[0]) }
      }
   }-> wait; 
```

使用这些模块可能比手动管理分叉更好。

* * *

根据您的评论，我认为您可能误解了我想说的话。也许这会有所帮助：

```
#!/usr/bin/env perl

use strict; use warnings;

use AnyEvent::DNS;
use AnyEvent::Socket;
use YAML;

my %nameservers = (
    'Google' => '8.8.4.4',
    'Dnsadvantage' => '156.154.71.1',
    'OpenDNS' => '208.67.222.222',
    'Norton' => '198.153.194.1',
    'Verizon' => '4.2.2.4',
    'ScrubIt' => '207.225.209.66',
);

for my $ip ( values %nameservers ) {
    $ip = AnyEvent::DNS->new(
        server => [ parse_address($_) ],
        timeout => [3],
    );
}

my @domains = qw(example.com cnn.com bing.com);

my $cv = AnyEvent->condvar;
for my $domain (@domains) {
    for my $ns (keys %nameservers) {
        $cv->begin;
        $nameservers{$ns}->resolve(
            $domain, 'a', sub {
                $cv->end;
                print Dump { $ns => [ @{$_[0]}[0,4] ] };
            }
        );
    }
}

$cv->recv; 
```

输出：

```
---
擦洗：
  -example.com
  - 192.0.43.10
---
擦洗：
  -cnn.com
  - 157.166.226.26
---
诺顿：
  -example.com
  - 192.0.43.10
---
开放DNS：
  -example.com
  - 192.0.43.10
---
优势：
  -example.com
  - 192.0.43.10
---
威瑞森：
  -example.com
  - 192.0.43.10
---
谷歌：
  -example.com
  - 192.0.43.10
---
擦洗：
  - 必应网
  - 65.52.107.149
---
诺顿：
  -cnn.com
  - 157.166.255.18
---
开放DNS：
  -cnn.com
  - 157.166.255.19
---
优势：
  -cnn.com
  - 157.166.226.25
---
威瑞森：
  -cnn.com
  - 157.166.226.26
---
谷歌：
  -cnn.com
  - 157.166.255.18
---
诺顿：
  - 必应网
  - 65.52.107.149
---
开放DNS：
  - 必应网
  - 65.52.107.149
---
优势：
  - 必应网
  - 65.52.107.149
---
威瑞森：
  - 必应网
  - 65.52.107.149
---
谷歌：
  - 必应网
  - 65.52.107.149
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:29:10.680

如果您在某种 Unix 系统上，您可能想要`use threads`模块而不是分叉。实际上它在某些方面甚至更重，可能需要一些额外的内务处理，但这可能会让你超过分叉的进程限制。不过，可能还有其他限制会阻止您创建大量线程。

# qtp - 资产无法上传 QTP 中的错误

> ID：10111752
> 
> 赞同：1
> 
> 时间：2012-04-11T18:25:24.267
> 
> 标签：qtp

我对 HP Qc 和 HP QTP 非常陌生。我已经设置了 HP-QC 服务器并尝试从 QTP 连接。但是当我保存测试时，弹出错误消息“无法上传资产”我在互联网上没有找到与此相关的任何内容，HP 支持很糟糕。他们在两周后回复了一封电子邮件。有没有人可以帮助我理解这个错误。如果需要，请随时重新格式化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:35:05.467

这可能是服务器中的 QTP 脚本与您的本地计算机之间的冲突。最好的方法是尝试将 AS 保存到不同的测试中。

[博客 - Sham332](http://qtp-automate.blogspot.co.uk/search/label/QTP)

# java - Sorting array list containing objects in java

> ID：10111753
> 
> 赞同：-1
> 
> 时间：2012-04-11T18:25:25.093
> 
> 标签：java, sorting

I have a list of linkedlist.

```
 List<LinkedList<File1>> lists = 
        Collections.synchronizedList(new ArrayList<LinkedList<File1>>()); 
```

each linkedlist contains objects of type File1.

```
class File1
{
    int dist,nod;       
} 
```

Can anyone help me to sort the elements based on dist.

I thought of using collections.sort() but this cannot be used in this case, so can anyone suggest a better idea?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T18:28:28.233

遍历数组列表中的每个链表，然后对其进行排序。但要确保元素按 排序`dist`，您应该实现 Comparable：

```
public class File1 implements Comparable<File1>
{
    int dist, nod;

    public int compareTo(File1 f)
    {
        return Integer.compare(dist, f.dist);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T18:28:07.620

[您可以使用接受比较](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)器的 Collections.sort() 方法对内部或外部列表进行排序。

公共静态无效排序（列表列表，比较器c）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T18:28:42.180

将 Collections.sort() 与自定义比较器一起使用，该比较器比较每个对象的 dist 值。

# jquery - Incorrect number of columns displayed in jQuery masonry page

> ID：10111758
> 
> 赞同：0
> 
> 时间：2012-04-11T18:25:38.970
> 
> 标签：jquery, jquery-masonry

I am trying to get the masonry plugin working with a tumblr theme. I need it to have 4 columns but for some reason it is only displaying 2.

[http://penguinenglishlibrary.tumblr.com/](http://penguinenglishlibrary.tumblr.com/)

Can anyone help please?

I would create a jsfiddle but time is really against me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:30:07.057

容器的宽度为 940px。您的每个书籍元素都是 235+10=245px 宽。245X4 = 980 像素。

由于边距，容器不够宽。

令我惊讶的是，它不是每行放 3 本书。不过，我不知道 Masonry API 或您的设置，以猜测它为什么会这样。

# ubuntu - Ubuntu instance in Amazon WS EC2: How to upgrade Ubuntu to the next version, so it will work after restating it?

> ID：10111759
> 
> 赞同：5
> 
> 时间：2012-04-11T18:25:39.383
> 
> 标签：ubuntu, amazon-ec2, upgrade

**Background**:
Some time ago I have an instance on Amazon Web Services EC2, loaded with Ubuntu version 10.x. As soon as version 11 came out, I decided to upgrade it. I did, and everything seemed fine. I even restarted Ubuntu itself (just the OS itself, not the instance), and it worked again. But when I stopped and started the instance itself, Ubuntu would not work again ever.

**Reason**:
I imagine the reason: Ubuntu must have had some kind of "interface software" (so to say) to communicate itself with the virtualization software outside. For example, when we restart the whole instance and it gets a new IP address, there must be a way for the virtualization software to communicate with Ubuntu and tell it what is the new IP address so Ubuntu will boot knowing it. So I guess that when we start our instance using a preloaded well known AMI, that AMI contains an Ubuntu installation that already include that interface software inside. So I guess that when I upgraded Ubuntu from 10.x to 11, that software inside was lost.

**Question**:
Is there a way to know how to install again that component/module/package (or whatever the name is) just after I upgraded the instance, so it will work again when I restart the whole instance? I don't want to be forced to create a new Ubuntu instance from scratch, from a new AMI, if I want to upgrade. I would hate to install all my software again.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:00:08.120

我不认为 Amazon Images 有这样的东西，我宁愿期望某些更改确实阻止了某些服务在更新的 Ubuntu 中启动，从而导致实例变得不可用。过去我在 sshd 上遇到过这样的问题，这导致实例像您描述的那样不可用。

在[Amazon AWS 控制台](https://console.aws.amazon.com/ec2/home?region=us-east-1#selectInstance=&launchAmi=&s=Instances)中，您可以查看实例的引导日志。这可能会为您提供有关实例不再启动的原因的一些信息。

![Amazon AWS 控制台 - 系统日志](../Images/794a52fe08b4520519a327558e0fe01d.png)

# javascript - 如何在javascript中关闭子窗口时显示确认消息？

> ID：10111764
> 
> 赞同：0
> 
> 时间：2012-04-11T18:25:49.350
> 
> 标签：javascript

我有一个父窗口，当我单击父窗口中的链接时，该链接会在新窗口中打开。**我需要在子窗口关闭时显示确认消息。（即打开的链接）**

```
childWindow = window.open("http://www.google.com","width=400, height=400"); 
```

我喜欢确认关闭子窗口。像

```
childWindow.close(function(){var confirmClose=confirm("Are you sure to close ?");
}); 
```

如果用户单击确认框的“确定”，则子窗口将关闭，否则如果用户单击“取消”，则子窗口不会关闭

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:28:35.140

使用`onbeforeunload`事件：[https ://developer.mozilla.org/en/DOM/window.onbeforeunload](https://developer.mozilla.org/en/DOM/window.onbeforeunload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:32:56.370

要设置确认对话，请向`beforeunload`（子）窗口的事件添加一个侦听器，如[浏览器页面关闭时的确认消息中](https://stackoverflow.com/q/4339028/1048572)所示，并最终阻止该操作。

如果您调用`childWindow.close()`，窗口将关闭而不是挂钩回调函数。

# java - Spring java code form post and redirection to a different server

> ID：10111766
> 
> 赞同：2
> 
> 时间：2012-04-11T18:25:50.413
> 
> 标签：java, spring, http, post

I am building a web application using Spring framework that requires users to make a payment. When the user posts a form, it redirects to Hp's payment website and processes the payments there before returning to my application. This method however leaves my applications vulnerable to security threats and form manipulations.

I now want to post the form to my server, validate users inputs and if necessary post data to hp's web server. I have already written a java code for posting a form from my code and getting the response back into a file from hp's site but am unable to figure out how to redirect the user to the hp website using the java form post. Can someone please help? I am new to Spring so am open to suggestions that would help me accomplish this task either using this method or another way to do so.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:06:55.427

显然，您需要在服务器端执行重定向，而不是在客户端。重定向基本上是返回 HTTP 302，`Location`标头指向新位置。当浏览器收到这样的响应时，它会打开相关的 URL，而不是像 200 那样呈现响应。

如果您可以接收并验证您​​的表单，您所要做的就是将重定向发送回浏览器。不知道你用的是哪个网络框架。在[servlet](/questions/tagged/servlets "显示标记为“servlet”的问题")中，您只需说：

```
response.sendRedirect("http://www.example.com/payment/..."); 
```

在[spring-mvc](/questions/tagged/spring-mvc "显示标记为“spring-mvc”的问题")中，从控制器返回以下字符串，而不是视图名称：

```
return "redirect:http://www.example.com/payment/..."; 
```

# winforms - RDLC Dynamic Subreport Definition

> ID：10111773
> 
> 赞同：4
> 
> 时间：2012-04-11T18:26:16.247
> 
> 标签：winforms, reportviewer, rdlc

Here's what I'm starting with. I have a report with a subreport in it. What makes this subreport unique is that the XML for the subreport rdlc is generated at runtime and the stream then provided to the report viewer. It was pretty much the only way to lay out the data the way we needed it to be. This report by itself works fine.

Now I'm at a point where I want to combine multiple reports. I created a report with a list. Within the list is a subreport pointing to my original report. But I'm stuck trying to figure out how to apply the dynamic subreport since it is a different stream for each report in the list.

We've already done a lot of work on the original report to get to this point, so I don't really want to rethink my approach.

Here's what I've tried so far:

1.  Call LoadSubreportDefinition for my stream when the SubreportProcessing event gets called for each report in the list. I'm pretty sure this doesn't work because you have to do this before the report rendering begins?

2.  Figure out a way to specify an expression for the Name of the dynamic subreport so that I can call LoadSubreportDefinition using a unique ID. For instance, the Name would be something like ="ImageSubreport" + Parameters!ID.Value and I'd call LoadSubreportDefinition("ImageSubreport1", stream1), LoadSubreportDefinition("ImageSubreport2", stream2). This doesn't appear to be possible in the designer, so I don't think it's possible.

Is there some way maybe to generate each report separately, then merge them?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T06:51:09.900

您只需在调用 LoadReportDefinition 后立即调用 LoadSubReportDefinition。

让我们假设主报表的定义指向子报表，如下所示：

```
<Subreport Name="Subreport1">
    <ReportName>MySubReport</ReportName>
    ...
</Subreport> 
```

并且您已`stream1`代表主报告 RDLC，并`stream2`代表子报告 RDLC。

您需要执行以下操作：

```
this.ReportViewer1.LocalReport.LoadReportDefinition(stream1);
this.ReportViewer1.LocalReport.LoadSubreportDefinition("MySubReport", stream2); 
```

# php - 将多个值与数组匹配

> ID：10111775
> 
> 赞同：3
> 
> 时间：2012-04-11T18:26:46.000
> 
> 标签：php, arrays, if-statement, foreach

我的问题是：

我有一个名为 $ownerArray 的数组，需要检查另一个数组，如果两个数组中都存在一个键，则显示匹配键的值。$ownerArray 由数据库填充，因此我不能只在 if 语句中编写 ir 语句。

$ownerArray 将如下所示：

```
$ownerArray = array(0 =>'Name0',1 =>'Name1',2 =>'Name2',3 =>'Name3'); 
```

然后我有另一个名为 $Users 的数组，它有不同数量的值，具体取决于用户选择的内容，因此 $Users 可能如下所示：

```
$Users = '1,2' 
```

或像这样：

```
$Users = '1,3' 
```

$Users 永远不会相同。

但是我需要 $ownerArray 的 $value 来显示 $Users 的任何值整数是否与 $ownerArray 的任何 $key 匹配

例子：

```
foreach($ownerArray as $key => $value) 
            { 
                if(in_array($key,array($Users)))
                {
                    print $value; 
                } 
            } 
```

此方法在第一次匹配时停止并显示正确的名称。如果更多值匹配，则循环不会继续打印。

我要寻找的是如果 $Users = '1,3' 我的 for 循环将从 $ownerArray 打印 Name1 和 Name3。

谢谢您的帮助！

ps 我知道我可以使用 if($key==1 || $key ==2) 但这不适用于这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:43:26.807

```
$merged = array_flip(array_intersect(array_flip($owners), explode(',', $users))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:35:00.343

像这样的东西可以工作

```
<?php

$ownerArray = array(0 =>'Name0',1 =>'Name1',2 =>'Name2',3 =>'Name3');
$users = explode(',','1,2');

if(count($users) > 0){
    foreach($users as $user){
        if($key = array_search($user,$ownerArray)){
            echo $key;
        }
    }
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:35:24.603

只是颠倒你的逻辑。您实际上是想循环访问您的用户，如果它们存在于所有者数组中，则打印一些东西，而不是相反。（抱歉，如果此代码略有偏差，但您明白了。）

```
foreach($Users as $value)
{
  if(in_array($value,array($ownerArray)))
  {
    print $ownerArray[$value]; 
  }
} 
```

# visual-c++ - 从图像文件中获取图像分辨率

> ID：10111784
> 
> 赞同：2
> 
> 时间：2012-04-11T18:27:13.620
> 
> 标签：visual-c++, image-processing

我正在尝试使用此代码从文件中获取图像分辨率

```
bool GetImageSizeEx(const char *fn, int *x,int *y)
{ 
    FILE *f=fopen(fn,"rb"); 

    if (f==0) return false;

    fseek(f,0,SEEK_END); 
    long len=ftell(f); 
    fseek(f,0,SEEK_SET); 

    if (len<24) {
        fclose(f); 
        return false;
    }

  // Strategy:
  // reading GIF dimensions requires the first 10 bytes of the file
  // reading PNG dimensions requires the first 24 bytes of the file
  // reading JPEG dimensions requires scanning through jpeg chunks
  // In all formats, the file is at least 24 bytes big, so we'll read that always
    unsigned char buf[24]; fread(buf,1,24,f);

  // For JPEGs, we need to read the first 12 bytes of each chunk.
  // We'll read those 12 bytes at buf+2...buf+14, i.e. overwriting the existing buf.
    if (buf[0]==0xFF && buf[1]==0xD8 && buf[2]==0xFF && buf[3]==0xE0 && buf[6]=='J' && buf[7]=='F' && buf[8]=='I' && buf[9]=='F')
    {
        long pos=2;
        while (buf[2]==0xFF)
        {
            if (buf[3]==0xC0 || buf[3]==0xC1 || buf[3]==0xC2 || buf[3]==0xC3 || buf[3]==0xC9 || buf[3]==0xCA || buf[3]==0xCB) 
                break;

            pos += 2+(buf[4]<<8)+buf[5];
            if (pos+12>len) break;
            fseek(f,pos,SEEK_SET); 
            fread(buf+2,1,12,f);   
        }
    }

    fclose(f);

  // JPEG: (first two bytes of buf are first two bytes of the jpeg file; rest of buf is the DCT frame
    if (buf[0]==0xFF && buf[1]==0xD8 && buf[2]==0xFF)
    {     
        *y = (buf[7]<<8) + buf[8]; 
        *x = (buf[9]<<8) + buf[10]; 

        return true;
    }

  // GIF: first three bytes say "GIF", next three give version number. Then dimensions
    if (buf[0]=='G' && buf[1]=='I' && buf[2]=='F')
    { 
        *x = buf[6] + (buf[7]<<8);
        *y = buf[8] + (buf[9]<<8);
        return true;
    }

  // PNG: the first frame is by definition an IHDR frame, which gives dimensions
    if ( buf[0]==0x89 && buf[1]=='P' && buf[2]=='N' && buf[3]=='G' && buf[4]==0x0D && buf[5]==0x0A && buf[6]==0x1A && buf[7]==0x0A && buf[12]=='I' && buf[13]=='H' && buf[14]=='D' && buf[15]=='R')
    {
        *x = (buf[16]<<24) + (buf[17]<<16) + (buf[18]<<8) + (buf[19]<<0);
        *y = (buf[20]<<24) + (buf[21]<<16) + (buf[22]<<8) + (buf[23]<<0);

        return true;
    }

    return false;
} 
```

**对于任何类型和任何分辨率的所有图像**，始终返回 x == 26112 和 y == 30825****

 **我在 Win7 x64 上使用 VS 2010 SP1 编译

**更新**

我正在尝试打开由 Photoshop 创建的 jpg 文件。Photoshop 使用 Exif 元数据对 JPEG 文件进行编码

调试器显示（右键单击以放大）

![在此处输入图像描述](../Images/e59279462421d764ccc545b30989d463.png)

所以现在看代码：

```
if ((buf[0]==0xFF && buf[1]==0xD8 && buf[2]==0xFF && buf[3]==0xE0 && buf[6]=='J' && buf[7]=='F' && buf[8]=='I' && buf[9]=='F') ||
        (buf[0]==0xFF && buf[1]==0xD8 && buf[2]==0xFF && buf[3]==0xE1 && buf[6]=='E' && buf[7]=='x' && buf[8]=='i' && buf[9]=='f'))
    {
        long pos=2;
        while (buf[2]==0xFF)
        {
            if (buf[3]==0xC0 || buf[3]==0xC1 || buf[3]==0xC2 || buf[3]==0xC3 || buf[3]==0xC9 || buf[3]==0xCA || buf[3]==0xCB) 
                break;

            pos += 2+(buf[4]<<8)+buf[5];
            if (pos+12>len) break;
            fseek(f,pos,SEEK_SET); 
            fread(buf+2,1,12,f);   
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T19:12:58.393

我为所有三种格式运行了您的代码，它在各种分辨率下都**运行良好！**我唯一建议的就是`GetImageSizeEx`适当地打电话给你（转义反斜杠）

就像是

```
int x,y;

GetImageSizeEx("C:\\Users\\IBM_ADMIN\\Desktop\\pavan2.png", &x, &y);
printf("%d %d", x, y ); 
```

您注意到的一些可能的失败情况可能`fopen`是由于某些错误的文件名等而导致自身失败，`x`并且`y`从未在内部进行修改`GetImageSizeEx`。或者在另一种情况下，您读取了错误的文件并且您无法读取适当的标题，因此再次读取，`x`并且`y`根本没有被修改！并且可能您从未初始化`x`并`y`在您的调用函数中，因此显示了一些垃圾？

**PS**`gcc 4.6.1` ：我在 Windows 7 上用 mingw 编译它**

# c++ - 套接字和线程

> ID：10111788
> 
> 赞同：0
> 
> 时间：2012-04-11T18:27:34.827
> 
> 标签：c++, linux, performance, sockets

我有很多“客户端”，它们在不同的线程中运行并连接到不同的本地服务器。

存储在系统中的大约 20k 个套接字有多糟糕？（Linux）。大约 20k 线程有多糟糕？

主要问题是关于套接字的，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T18:31:29.980

20K 套接字问题被称为[C10K](http://www.kegel.com/c10k.html)问题，并且有据可查。基本上，通过仔细的编程和足够大的系统，你可以做到。

20K 线程问题是另一回事。这实际上取决于操作系统和什么样的线程。我建议线程比套接字少。

# javascript - 将值从 HTML5 SELECT 对象传递到 JS 脚本时遇到问题

> ID：10111789
> 
> 赞同：0
> 
> 时间：2012-04-11T18:27:37.743
> 
> 标签：javascript, html, dom-events

我有一个带有 HTML5 SELECT 对象的基本网页，该对象通过 js/jQuery 在其中填充了 3 个元素。我想取选定的值，并将值传递给运行 perl 脚本的 js 文件。

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js" charset="utf-8"></script>
        <script type="text/javascript" src="js/main.js" charset="utf-8"></script>
        <script type="text/javascript" src="js/RunPerlScript.js" charset="utf-8"></script>
    </head>
    <body>
        <header>
            <h1></h1>
        </header>
        <form name="myForm" method="GET" action="">
            <select id="cdLDAP" onchange="run_script_func(this.textvar 
                  <option/>
            </select>     
        </form>
    </body>
</html> 
```

JS 文件：

```
 var selection = #cdLDAP.text
function run_script_func(val){
        window.alert=val;
   } 
```

根据我的 PHP 管理控制台，我知道脚本没有执行。如果我自己运行我的 Perl 脚本，它会按预期工作，所以我知道这不是我的代码的那个方面。

我`onchage=""`是否正确使用了该元素？和/或`RunPerlScript.js`文件的结构如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:50:58.147

你只有一个

```
<option /> 
```

在你的例子中。要触发更改事件，您可能需要进行实际更改。尝试添加另一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:20:23.100

让消息框工作。消息框被用来测试脚本被调用`onchange`

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js" charset="utf-8"></script>
        <script type="text/javascript" src="js/main.js" charset="utf-8"></script>
        <script type="text/javascript" src="js/RunPerlScript.js" charset="utf-8"></script>
    </head>
    <body>
        <header>
            <h1></h1>
        </header>
        <form name="myForm" method="GET" action="">
            <select id="cdLDAP" onchange="run_script_func(this.value)">
                <option/>
            </select>     
        </form>
    </body>
</html> 
```

这是 JS 文件：

```
function run_script_func(val){
        alert(val)
} 
```

# javascript - 如何从文本框中的长字符串中提取所有 URL 并粘贴到另一个中？

> ID：10111790
> 
> 赞同：0
> 
> 时间：2012-04-11T18:27:37.970
> 
> 标签：javascript, regex

我想知道是否可以在一个页面中有 2 个文本区域并使用正则表达式从第一个文本区域复制所有 URL，并使用一个非常长的字符串（我的意思是非常长）并插入到第二个文本区域中？

我还需要使用相同的想法从同一个字符串中提取不同的字符串模式，这就是为什么我想知道是否可以使用我可以更改以匹配我的其他要求的正则表达式。

任何人都可以启发我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:31:08.553

简单地说，您可以将 ID 添加到您的文本区域。之后它只是操纵（使用或不使用jQuery）。

1.  解析你的文本区域值，寻找 url 模式；
2.  将其保存到变量中；
3.  使用此变量值添加到第二个文本区域值。

我将尝试在[jsfiddle](http://www.jsfiddle.net)中创建一个示例来阐明这个想法。

# javascript - 是否有插件可以使 ActiveX Code 跨浏览器兼容

> ID：10111792
> 
> 赞同：0
> 
> 时间：2012-04-11T18:27:52.360
> 
> 标签：javascript, web-applications, cross-browser, web, activex

我目前正在开发一个我没有构建的 Web 应用程序。我目前的任务是让它跨浏览器兼容。它有一些用 ActiveX 编写的请求。我的问题是，是否有插件或捷径（本身）可以使该应用程序在所有现代浏览器中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:18:46.553

FireBreath 是一个 C++ 包装器，它使您可以在 ActiveX 上创建包装器，因此它们可以在其他浏览器中得到支持。
结帐[http://www.firebreath.org/display/documentation/About+FireBreath](http://www.firebreath.org/display/documentation/About+FireBreath)

齐夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:29:43.703

这不可能。ActiveX 是一种仅限 MSIE 的技术。您可以放心地假设任何其他浏览器都**不会支持它。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:31:07.513

不，没有。无论如何，这并不是一个真正可行的项目，因为 ActiveX 涉及依赖于 Windows API 的二进制代码。很难让它在非 Windows 平台上工作（WINE 远非完美），并且需要架构仿真才能让它在非 x86 兼容平台上工作。

# javascript - 什么时候 JavaScript 足够小以至于值得内联（以获得最佳性能）？

> ID：10111797
> 
> 赞同：1
> 
> 时间：2012-04-11T18:28:08.907
> 
> 标签：javascript, css, performance, http-request

假设我正在为客户构建一个 10 页的静态网站，而整个网站只有几行 JavaScript（不到 1KB）。在这种情况下，我猜最好（为了性能）将 <1KB 的 JavaScript 代码**内联**在每个页面的脚本标记之间，而不是放在外部`.js`文件中。额外的带宽消耗（在页面之间移动时）对于删除整个 HTTP 请求可能是值得的。

另一方面，如果我在同一个网站上有 200KB 的 JavaScript，那么我肯定会把它放在一个单独的文件中，以减少在网站上的页面之间移动时的带宽。

但我不知道“截止点”应该在哪里。如果我有 5KB 的 JS，我应该把它内联到我的 HTML 中吗？10KB 怎么样？20KB？

显然，“分界点”将取决于具体情况，例如移动站点可能会有所不同。但是，如果有人有任何有助于指导这一决定的一般性建议，那么我想听听他们的意见。

（**注意**：我**只**对性能感兴趣，而不是可维护性等。我可以将代码保存在单独的文件中，但使用某种构建过程或服务器端中间件自动内联它，因此可维护性不会成为问题。）

（加**分点**：如果所有考虑因素与内联 CSS 与外部 CSS 完全相同，请告诉我。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:04:02.350

我在这里严格地谈论性能，更像是一个思想实验（请原谅缺乏实验严谨性）。

如果您要内联 javascript，是的，您确实可以节省时间，因为一切都在一个 http 请求中完成。但是，您应该考虑服务器动态生成所需网页所需的时间（SSL 也会为此增加时间）。

**最佳案例**

如果您可以创建一个生成缩小的 javascript 并将其注入 html 页面的构建，并结合 gzip 压缩，您应该会导致低得多的带宽。与每个请求单独 gzip 相比，您在压缩中粘贴的文本越多，您的收益就越大。最终，这意味着如果你可以让它静态加载一个包含所有 javascript/css 内联的 html 页面，这意味着它肯定会更快。

**正常情况（使用动态 html 和共享 js 库）**

一些stackoverflow帖子的小样本以及它们如何影响我自己的带宽：

```
304ms 9.67KB
204ms 11.28KB
344ms 17.93KB
290ms 17.19KB
210ms 16.79KB
591ms 37.20KB
229ms 30.55KB 
```

从这一点来看，似乎每个 http 连接所产生的开销（不考虑文件大小）约为 150 毫秒 - 也许在最坏的情况下。现在，问题是，文本（在您的情况下为 javascript）必须有多大才能使您的带宽产生 150 毫秒。根据这篇文章 (http://www.telecompetitor.com/akamai-average-us-broadband-connection-speed-is-now-5-3-mbps/)，对于宽带用户，我们平均与5.3 mbps（即 0.6625 MB/s 或 678.4 KB/s 或 .6784 KB/ms）。这意味着对于普通宽带用户，您需要下载大约 100KB 的 gzipped+minified javascript 才能使其相等。

请自行调整参数，看看这对您的观众意味着什么。这个数字，无论你计算它是什么，都是你最好内联（通过服务器生成的响应）提供它而不是在外部获取它/缓存它的点。

总而言之，我认为出于性能原因，这根本不是瓶颈。压缩 + 缩小的 javascript 的大小通常可以忽略不计，而且它必须达到不可维护的数量级才重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T19:42:13.903

分界点是 0KB——“什么时候 JavaScript 足够小到值得内联”的答案是“从不”。

除了您说您不想考虑的可维护性问题之外，无论如何它对性能更好。*是的，您第一次*引用该文件时有一个额外的 HTTP 请求`.js`，但之后它会被缓存，因此您的整体流量/带宽会随着时间的推移*而减少。*

CSS 文件也是如此。

使用内联 JS 或 CSS 使页面更重比初始获取文件的额外请求成本更高（除非您在`.html`整个页面缓存很长时间的情况下提供完全静态的服务）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T20:11:15.743

简短的回答：这取决于！

假设：

*   您不会通过将脚本实际复制并粘贴到每个 HTML 页面来内联脚本
*   单独的文件将被正确缓存

做数字。粗略估计额外的 HTML 会产生多少额外*的流量，与其余流量成比例*，然后决定您是否认为这是一个可以接受的折衷方案。

如果是 1%，则可能不值得担心。但如果是 50%，那么您可以通过将脚本放在单独的文件中来将流量减半。

# android - Android：从预览图像映射到 SurfaceView 中显示的图像

> ID：10111799
> 
> 赞同：1
> 
> 时间：2012-04-11T18:28:09.717
> 
> 标签：android, camera, surfaceview

我无法弄清楚 PreviewCallback 中接收到的图像与 SurfaceView (setPreviewDisplay) 上显示的图像之间的对应关系/映射。

问题 ：

1.  预览回调图像的中心和 SurfaceView 上显示的预览中心不一样。

2.  看来，当相机预览的纵横比与 SurfaceView 不同且图像大于 SurfaceView 时，SurfaceView 会以某种方式裁剪和/或缩放它们。但我找不到任何说明确切情况的文件。

其他：我必须做一些图像处理，找到相关点，然后在显示器上显示与这些点相对应的标记。在 PreviewCallback 中将 YUV 转换为 RGB，然后在 Canvas 上绘图不是一种选择，因为它非常慢。

# bison - 构建解析树时出现 flex yacc (bison) 分段错误

> ID：10111801
> 
> 赞同：1
> 
> 时间：2012-04-11T18:28:14.047
> 
> 标签：bison, yacc, lex, segmentation-fault

我的逻辑运算符有问题

在我的 .y 文件中，我有：

```
expr: expr oper1 expr { $$=insert_expression($2, $1, $3); }
     | expr oper2 expr { $$=insert_expression($2, $1, $3); }
     ; 
```

在我的 .l 文件中，我确定 oper1 和 oper2 是：

```
"<" | ">" | "=" | "<>" | "<=" | ">=" { return oper1; }
"AND" | "OR" { return oper2; } 
```

然后我有一个结构可以将值放入：

```
typedef struct _Expression
{
    char *oper;
    struct _Expression *ex1;
    struct _Expression *ex2;
} is_expression; 
```

并将值放入：

```
is_expression* insert_expression(char* oper, is_expression *expr1, is_expression *expr2)
{
    is_expression* e = (is_expression*)malloc(sizeof(is_expression));

    e->ex1 = expr1;
    e->ex2 = expr2;
    e->oper = oper;

    return e;
} 
```

最后向他们展示：

```
void show_expression(is_expression *e)
{
    show_expression(e->ex1);
    printf("%s", e->oper);
    show_expression(e->ex2);
} 
```

但是每次我使用 expr oper expr 时都会出现分段错误：

```
Program received signal SIGSEGV, Segmentation Fault 
```

关于我做错了什么的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:36:36.260

让我们来看看：

```
void show_expression(is_expression *e)
{
    show_expression(e->ex1);
    printf("%s", e->oper);
    show_expression(e->ex2);
} 
```

递归必须有方法终止！

一个重要的线索是你只有一个`printf`打印操作符的。但是树中除了操作符之外还有其他东西：即操作数！

在您的表达式树中，这些操作数是叶节点。他们是如何代表的？`ex1`他们可能对and有空指针`ex2`，对吧？（希望不是垃圾：你所有的解析器规则都有`$$`一定的价值，对吧？）

此外，您的 yacc 文件还必须包含更多内容。您所显示的规则`expr`不能单独存在，因为它不能简化为一系列终端符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:35:44.200

所有标记的默认类型是`int`. 如果你没有

```
%union {
    char *oper1
    char *oper2
} 
```

会有问题。实际上，您正在混合指针和整数。这会导致您的程序尝试访问任意内存，从而导致段错误。

**编辑：**

好吧，然后在 gdb 或我喜欢的[cgdb](http://cgdb.sourceforge.net/)中启动那个东西。

```
cgdb yourCompiledParser
> r (add necessary command line switches)
when it segfaults
> backtrace 
```

这将为您提供失败的大致位置，并向您显示需要断点的位置。有关 gdb/cgdb 调试提示，请查看这篇[文章](http://www.dirac.org/linux/gdb/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T00:22:53.867

为了获得合理的值`$n`，您需要一个`%union`指令来指定所有可能的类型，然后您需要在`%token`/`%type`指令中使用这些类型：

```
%union {
    is_expression  *exp;
    char           *str;
}

%token<str> oper1 oper2
%type<exp> expr 
```

然后，您还需要确保在 .l 文件中正确设置值：

```
"<" | ">" | "=" | "<>" | "<=" | ">=" { yylval.str = strdup(yytext); return oper1; }
"AND" | "OR" { yylval.str = strdup(yytext); return oper2; } 
```

否则，您会将随机垃圾作为第一个操作数传递给`insert_expression`，然后在您尝试使用任何操作时崩溃`oper`（因为它指向随机垃圾）

# c# - 为 Windows Mobile 偶尔连接的应用程序创建 cab 文件

> ID：10111811
> 
> 赞同：1
> 
> 时间：2012-04-11T18:29:06.307
> 
> 标签：c#, wcf, visual-studio, windows-mobile, cab

我有一个使用 Microsoft Sync Framework 的 Windows 移动应用程序。WCF 服务托管在我的本地 IIS 上。它在停靠并连接到互联网时测试得很好。但是，如果我断开互联网连接以尝试在本地数据库离线时对其进行更改，则会失去与应用程序的连接。所以我只想制造一辆出租车并将其安装在设备上。

问题是我不知道自己在做什么，也不知道该包括什么，不该包括什么。我尝试了两次，但两次都失败了，说它找不到 SQL CE db (ElectricReading.sdf)。

我正在关注本教程：[http ://www.mobilepractices.com/2008/02/how-to-create-windows-mobile-smart.html](http://www.mobilepractices.com/2008/02/how-to-create-windows-mobile-smart.html)

但在我添加 ElectricBarcodeApp.exe 后，它似乎没有获得正确的依赖项。例如，我添加的服务库没有依赖关系。

这是我的项目的样子：

![在此处输入图像描述](../Images/e3192e271c2053e307a9a19ffaa31270.png)

那么我需要在驾驶室中包括什么？任何帮助深表感谢。一个让我可以学习的解释也很棒。谢谢！！让我知道我可以提供哪些其他信息。

编辑：这是我添加 ElectricBarcodeApp.exe 后的 cab 文件的样子： ![在此处输入图像描述](../Images/669ad206f56c5e2e696a1266a73f3749.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:43:43.597

CAB 生成项目几乎是不直观的。当您选择项目时，在右侧有一些容易错过的小图标。其中之一是目标的“文件视图”。

![文件编辑器图标](../Images/dcc67189bc9e9e3d3c1cb0c673e33047.png)

从那里您可以选择要包含在 CAB 中的其他文件（右键单击“应用程序文件夹”并选择“添加文件”）。

![目标设备文件系统](../Images/14fd957c841637b6ca04070867cdacf9.png)

只需选择您当地的 SDF 即可将其添加到 CAB。

# php - PHP简单文件上传

> ID：10111814
> 
> 赞同：1
> 
> 时间：2012-04-11T18:29:29.330
> 
> 标签：php, file-upload

我正在使用以下脚本进行简单的文件上传：

```
$errors = '';
$target_path = "[PATH HERE]";

$target_path = $target_path . basename($_FILES['uploadFile']['name']); 

if(move_uploaded_file($_FILES['uploadFile']['tmp_name'], $target_path)) {
     $errors = "The file ".  basename( $_FILES['uploadFile']['name']). " has been uploaded";
} else{
     $errors = "There was an error uploading the file, please try again! Type: " . $_FILES['uploadFile']['type'];
    } 
```

出于某种原因，我上传文件时出错并且文件类型未显示。它似乎只获取没有扩展名的文件名（即“test”而不是“test.pdf”）。我确定这很简单，但是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:38:04.673

如果您检查 files 数组中的错误元素，您可能会发现它不是 0 的值。如果没有出错，错误应该是 0。否则，将错误存储的值与 PHP 文档进行比较，以确定发生了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:40:00.367

也许您输入的路径错误（结束斜杠），或者 php 没有写入目录的权限。

```
<?php 
error_reporting(E_ALL); // Show some errors

$target_path = "/var/www/somesite.com/uploads/"; // Would require a ending slash 

$target_path = $target_path.basename($_FILES['uploadFile']['name']);

if(move_uploaded_file($_FILES['uploadFile']['tmp_name'], $target_path)) {
    $errors = "The file ".  basename( $_FILES['uploadFile']['name']). " has been uploaded";
} else{
    $errors = "There was an error uploading the file, please try again! Type: " . $_FILES['uploadFile']['type'];
}

?> 
```

# unity3d - Unity3d：如何检测区域内的点击

> ID：10111821
> 
> 赞同：2
> 
> 时间：2012-04-11T18:29:56.027
> 
> 标签：unity3d

在 Unity3d 应用程序中，我试图检测当前相机某个正方形区域中的点击。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T19:31:37.417

这不是你要找的吗？

[http://unity3d.com/support/documentation/ScriptReference/Input-mousePosition.html](http://unity3d.com/support/documentation/ScriptReference/Input-mousePosition.html)

** 编辑 **

```
using UnityEngine;

public class example : MonoBehaviour
{
    void Update()
    {
        // Left-half of the screen.
        Rect bounds = new Rect(0, 0, Screen.width/2, Screen.height);
        if (Input.GetMouseButtonDown(0) && bounds.Contains(Input.mousePosition))
        {
            Debug.Log("Left!");            
        }
    }
} 
```

# c# - DllImport 如何通过引用获取单个值

> ID：10111823
> 
> 赞同：0
> 
> 时间：2012-04-11T18:30:02.207
> 
> 标签：c#, dllimport, ref, intptr

能够使用指针参数获取输出参数的适当签名/编组属性是什么？到目前为止，我试过这个：

```
// Function to calculate the norm of vector. !0 on error.
// int err_NormVec(int size, double * vector, double * norm)
[DllImport("vectors.dll")]
int err_NormVec(int size, double[] vector, ref double norm) 
```

以前的方法不会将值从 C 弹出到 .NET。我还尝试使用带有 IntPtr 签名的固定 GCHandle。

```
[DllImport("vectors.dll")]
int err_NormVec(int size, double[] vector, IntPtr norm)

public void doSomething()
{
   double norm = 0;
   // ...
   GCHandle handle = GCHandle.Alloc(norm, GCHandleType.Pinned);
   int status = err_NormVec(vector.Lenght, vector, handle.AddrOfPinnedObject());
   // ... clean gchandle, check status and so on
} 
```

在这种情况下，我得到了值，但在 GCHandle.Target 上，而不是在原始规范上。这很烦人。我希望能够将规范的 intptr 固定在它自己的位置上，而不仅仅是一个副本。

使用指针返回值的适当签名是什么？是否有支持将 IntPtr 转换为 int 值的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:53:24.673

这对我有用（因为它应该）：

```
//C++ DLL (__stdcall calling convention)
extern "C" __declspec(dllexport) void Foo(double *result) {
    *result = 1.2;
}

//C#    
class Program
{
    [DllImport( "Snadbox.dll", CallingConvention=CallingConvention.StdCall )]
    static extern void Foo( ref double output );

    static void Main( string[] args )
    {
        double d = 0;           
        Foo( ref d );

        Console.WriteLine( d ); // prints "1.2"         
    }
} 
```

传递`double`using`ref`关键字就足够了。因此，我被引导相信实施中存在错误（或误解）。您可以为我们发布实现吗？

此外，也许您正在使用默认调用约定 ( `cdecl`) 构建 C++ 版本，但 .NET 使用的是`StdCall`. 你确定这些排列了吗？如果它们混合在一起，您可能会崩溃，但不能保证。例如，在我的示例中，如果我将 C++ 端更改为，`cdecl`则 out 参数将被读回为 0。

# gnuplot - guibas stolfi delaunay 三角测量失真输出

> ID：10111832
> 
> 赞同：0
> 
> 时间：2012-04-11T18:30:39.627
> 
> 标签：gnuplot, triangulation, delaunay

我正在使用 Geoff Leach 基于 guibas stolfi 算法的 delaunay 三角测量代码。

[这是链接](http://goanna.cs.rmit.edu.au/%7Egl/research/comp_geom/delaunay/delaunay.html)

我将随机生成的 50 到 1550 之间的整数作为点的坐标。当我取超过 280 个点时，输出会失真。

[这是失真的输出](http://tinypic.com/r/210lpbq/5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:54:19.900

好的，解决了失真的输出问题。这是由于不正确的缩放比例。我的随机点在 1500 边的正方形中，必须将其更改为与我的纵横比相对应的矩形。Gnuplot 保留纵横比。现在一切都很好

# html - CKEditor 自动格式化（搞砸）HTML5 标签

> ID：10111833
> 
> 赞同：1
> 
> 时间：2012-04-11T18:30:40.353
> 
> 标签：html, web, ckeditor

我正在尝试将一段简单的 HTML 粘贴到 HTML 编辑器中

```
<video class="videofile" controls="controls" height="272" poster="poster.jpg" preload="none" tabindex="0" width="480"> 
    <source src="video.mp4" type="video/mp4" /> 
    <source src="video.webm" type="video/webm" />  
</video> 
```

但是，当我回到 WYSIWYG 时，它会自动将其格式化为：

```
<p><video class="videofile" controls="controls" height="272" poster="poster.jpg" preload="none" tabindex="0" width="480"> <source src="video.mp4" type="video/mp4"> <source src="video.webm" type="video/webm"> </source></source></video></p> 
```

它完全搞砸了（注意标签）。我怎样才能禁用它？我尝试将 config.FormatOutput 和 config.AutoParagraph 设置为 false。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T22:02:23.363

我永远找不到这个问题的答案。我最终允许使用原始 TEXTAREA 编辑器进行代码输入。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:25:05.523

您可以使用此插件[http://alfonsoml.blogspot.com/2011/01/html5-video-plugin-for-ckeditor.html](http://alfonsoml.blogspot.com/2011/01/html5-video-plugin-for-ckeditor.html)这样您就不必在源代码模式下粘贴任何内容并且 HTML 将保持有效.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:06:17.610

CKEditor 3.6.1 应该不会错误地混淆 HTML5 标签。可以升级吗？

# css - 为什么 mix() 不能在 LESSC 中使用我的颜色？

> ID：10111835
> 
> 赞同：3
> 
> 时间：2012-04-11T18:30:44.530
> 
> 标签：css, twitter-bootstrap, less

我的 less 文件搭载到 Twitter Bootstrap 文件的末尾（所以`@white`已经定义了类似的东西。这是我的 less 代码：

```
@columnSortScreen: #99f;
// the color used
@columnSort: mix( @white, @columnSortScreen ); 
```

编译时，我收到以下错误（插入符号下划线的所有内容都突出显示）：

```
non_object_property_loadError: error evaluating function `mix`: Cannot read property 'value' of undefined in /Users/cmv/Sites/...../tablesorter.less:12:14
11 // the color used
12  @columnSort: mix( @white, @columnSortScreen );
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

我究竟做错了什么？Lessc 是 1.3.0 版。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T13:56:07.867

我有完全相同的错误。

做了一些挖掘，发现了这个：

> mix 的文档缺少第三个参数。
> 
> 尝试：
> 
> ```
> @fallback-color: mix(@from-color, @to-color, 50%); 
> ```

注意第三个参数。这在我的情况下解决了，这是否为您解决？

# sql - SQL Server 上最常用的视图开发工具

> ID：10111841
> 
> 赞同：-1
> 
> 时间：2012-04-11T18:31:28.177
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个数据库，我在上面建立了很多视图。

我目前使用 SQL Server Management Studio 在直接 SQL 中编写这些视图。

我的问题是“还有其他开发人员常用来构建 SQL 查询和视图的工具吗”？

我真的在寻找 SQL 的 IDE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:34:57.930

这些算不算？

[http://www.ssmstoolspack.com/](http://www.ssmstoolspack.com/)

# iphone - 从我的 iPhone 应用程序打开 Spotify 应用程序

> ID：10111848
> 
> 赞同：7
> 
> 时间：2012-04-11T18:31:51.727
> 
> 标签：iphone, ios, url, spotify

我很确定一定有一种方法可以从我自己的应用程序中启动 spotify iphone 应用程序。我看到 SMP 应用程序（分享我的播放列表）在将播放列表推送到 Spotify 应用程序时做了非常相似的事情。

我想应该是通过使用类似的东西：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"spotify://search:muse"]]; 
```

如您所见，我希望能够对特定关键字进行 spotify 搜索。问题是我真的不知道 spotify url 方案，如果有这样的东西可用。

我一直在网上搜索，在 spotify 开发者网站等，但没有出现...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T20:16:16.167

我在应用程序中遇到了类似的需求。我的解决方案是创建一个点击 Spotify API 以返回搜索的 XML 或 JSON 的客户端。例如，如果您想要 Muse，您可以使用以下 URL 访问 API：

[http://ws.spotify.com/search/1/artist?q=muse](http://ws.spotify.com/search/1/artist?q=muse)

从 XML 或 JSON，您将能够在他们的 URL 方案中提取指向特定艺术家的链接：

```
spotify:artist:12Chz98pHFMPJEknJQMWvI 
```

剪掉 spotify:artist: 部分并将其附加到 Spotify 艺术家链接上：

[http://open.spotify.com/artist/12Chz98pHFMPJEknJQMWvI](http://open.spotify.com/artist/12Chz98pHFMPJEknJQMWvI)

然后，使用 Spotify URL 方案和 UIApplication，您可以将 Spotify 应用程序打开到该特定艺术家的页面：

```
[[UIApplication sharedApplication] openURL:
   [NSURL URLWithString:
       @"spotify://http://open.spotify.com/artist/12Chz98pHFMPJEknJQMWvI"]]; 
```

请注意，使用 URL 方案访问另一个应用程序的功能通常是无证的，并且可能是一项脆弱的工作。如果 Spotify 将来决定对此进行任何更改，它将在没有警告的情况下破坏此功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-07T12:25:22.387

我所做的快速修复是删除添加到原始 uri 中的 urlscheme。所以你会直接调用uri。

这是 'spotify:artist:4gzpq5DPGxSnKTe4SA8HAU' 或 'spotify:track:1dNIEtp7AY3oDAKCGg2XkH'

UIApplication.shared.openURL("spotify:artist:4gzpq5DPGxSnKTe4SA8HAU") 或 UIApplication.shared.openURL("spotify:track:1dNIEtp7AY3oDAKCGg2XkH")

此修复适用于从 v6 及更高版本调用旧 urlscheme 时的崩溃。

# java - 如何更改单个 JTree 节点的样式（颜色、字体）

> ID：10111849
> 
> 赞同：5
> 
> 时间：2012-04-11T18:31:56.773
> 
> 标签：java, swing, drag-and-drop, jtree, renderer

我有两个`JTree`在两个面板中`JFrame`。我想在从一棵树拖放到另一棵树时更改节点的样式（颜色和字体）。请为我提供一种`JTree`永久更改节点颜色的方法。

![在此处输入图像描述](../Images/1f15660c66e7e69472bd5c3f9b0c9ab8.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T18:37:44.727

首先，您需要有一个可以处理样式和颜色的数据对象。您可以继承 DefaultMutableTreeNode 并使用 getts 和 setter 添加这些数据项

然后你需要创建一个自定义 TreeCellRenderer。我建议扩展 DefaultTreeCellRenderer，并在重写的处理程序中检查您的自定义类，并修改 JLabel 输出以使用字体和颜色（如果设置了这些值）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-17T10:17:28.197

创建您自己的`CellRenderer`. 要为您的 提供适当的行为`MyTreeCellRenderer`，您必须扩展[`DefaultTreeCellRenderer`](https://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeCellRenderer.html)和覆盖该[`getTreeCellRendererComponent`](https://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeCellRenderer.html#getTreeCellRendererComponent(javax.swing.JTree,%20java.lang.Object,%20boolean,%20boolean,%20boolean,%20int,%20boolean))方法。

```
public class MyTreeCellRenderer extends DefaultTreeCellRenderer {

    @Override
    public Component getTreeCellRendererComponent(JTree tree, Object value,
            boolean sel, boolean exp, boolean leaf, int row, boolean hasFocus) {
        super.getTreeCellRendererComponent(tree, value, sel, exp, leaf, row, hasFocus);

        // Assuming you have a tree of Strings
        String node = (String) ((DefaultMutableTreeNode) value).getUserObject();

        // If the node is a leaf and ends with "xxx"
        if (leaf && node.endsWith("xxx")) {
            // Paint the node in blue
            setForeground(new Color(13, 57 ,115));
        }

        return this;
    }
} 
```

* * *

最后，假设你的树被调用`myTree`，设置你`CellRenderer`的：

```
myTree.setCellRenderer(new MyTreeCellRenderer()); 
```

# visual-studio-2010 - 为什么用户控件和窗体同名但命名空间不同时，工具箱上的用户控件是灰色的？

> ID：10111850
> 
> 赞同：3
> 
> 时间：2012-04-11T18:32:02.100
> 
> 标签：visual-studio-2010, user-controls

当查看与您的用户控件同名的表单的表单设计器时，用户控件不会显示在工具箱中。它实际上在工具箱上并且可见，但在工具箱上选中“全部显示”时显示为灰色。虽然窗体和用户控件具有相同的名称，但它们位于不同的命名空间中。

谁能解释冲突是什么，或者这是 Visual Studio 2010 中的错误吗？

重现（C#）：

1.  创建一个新的 Winforms 项目
2.  在项目中创建一个名为“Forms”的文件夹
3.  在项目中创建一个名为“UserControls”的文件夹
4.  在“用户控件”下，添加以下新用户控件“AppleDetail”和“OrangeDetail”
5.  在“表单”下，添加以下新表单“测试”和“OrangeDetail”
6.  构建项目
7.  打开“测试”的表单设计器，两个用户控件都应该在工具箱中可见
8.  打开“OrangeDetail”的表单设计器，工具箱中只有“AppleDetail”用户控件可见/启用

# ruby-on-rails-3 - Rails 3.2 ActiveRecord 会话存储不工作

> ID：10111855
> 
> 赞同：4
> 
> 时间：2012-04-11T18:32:31.657
> 
> 标签：ruby-on-rails-3, session, activerecord

我正在将我的应用程序从 Rails 3.0.12 迁移到 3.2。由于默认 cookie 存储的大小限制，我使用 active_record_store 处理我的会话变量。然而，在新版本的 Rails 中，会话变量没有被设置。

我可以看到 cookie session_id 被设置了一个值，但是我可以查看数据库的内容，并看到在应该填充会话变量时没有插入任何值。

但是，如果我切换回 cookie 存储，它工作正常。有什么我可以检查以了解发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:21:06.513

恐怕问题会自行解决，也许是在我准备回复有关此问题的评论时执行的 Gem 更新中。我在一个单独的 Git 分支上拥有我的应用程序的 Rails 3.2 版本，所以我把它带回来并将它与我当前的开发版本合并......而且这一切都“正常工作”。

我不禁认为这是我的代码的旧版本或 gem 的暂时性问题，但现在已经解决了，所以我将关闭这个问题。

# javascript - Dojo 要求不工作

> ID：10111864
> 
> 赞同：2
> 
> 时间：2012-04-11T18:33:00.783
> 
> 标签：javascript, dojo

我只是想做一些基本的dojo和dijit工作。我似乎无法让新的 require() 函数在 1.7 中正常工作。出于某种原因，我的代码将错误记录到控制台，并且未解析小部件。这是代码：

```
<html>
    <head>
        <title>Fun with Button Clicking!</title>

        <link rel="stylesheet" type="text/css" href="../dojo/dojo/dojo-release-1.7.2-src/dojo/dojo.css" />
        <link rel="stylesheet" type="text/css" href="../dojo/dojo-release-1.7.2-src/dijit/themes/tundra/tundra.css" />

        <script>
        // Instead of using data-dojo-config, we’re creating a dojoConfig object
        // *before* we load dojo.js; they’re functionally identical.
        var dojoConfig = {
            async: true,
            parseOnLoad: true

        };
    </script>
    <script type="text/javascript" data-dojo-config="async: true" src="../dojo/dojo-release-1.7.2-src/dojo/dojo.js" ></script>

        <script type="text/javascript">
        require(["dojo/parser", "dijit/form/TextBox",  "dijit/form/Button", "dijit/form/NumberSpinner"], function(parser, textBox, button, spinner) {
            dojo.connect(dojo.byId("foo"), "onclick", function(evt) {
                console.log("connect fired for DOM Node onclick");
            });

            dojo.connect(dijit.byId("foo"), "onclick", function(evt) {
                console.log("connect fired for dijit onclick");    //never!
            });

            dojo.connect(dijit.byId("foo"), "onClick", function(evt) {
                console.log("connect fired for dijit onClick");
            });
        }); 
        </script>
    <head>
    <body class="tundra">

        <label>Spinner</label>
        <input data-dojo-type="dijit.form.NumberSpinner" name="spinna" constraints="{min:0,max:100}" value=100 />

        <button id="foo" data-dojo-type="dijit.form.Button" onclick="foo">click me
            <script type="dojo/method" event="onClick" args="evt">
                console.log("Button fired onClick");
            </script>
        </button>
    </body>
</html> 
```

我在 firebug 中多次看到以下错误：

```
Error: [Exception... "Access to restricted URI denied" code: "1012" nsresult: "0x805303f4 (NS_ERROR_DOM_BAD_URI)" location: "file:///D:/dev/demo/dojo/dojo-release-1.7.2-src/dojo/_base/xhr.js Line: 735"]
()Deferred.js (line 295)
(undefined=""GET"", undefined="[object Object]")xhr.js (line 738)
lates/TextBox.html",false,(undefined="function (text) {theCac...}delete pending[url];})")text.js (line 17)
",(undefined="function (a1", undefined=" a2", undefined=" a3) {return contextRequire(a1", undefined=" a2", undefined=" a3", undefined=" module", undefined=" result);})", undefined="(function (def) {module...ule);checkComplete();})")text.js (line 92)
(undefined="[object Object]")dojo.js (line 1216)
(undefined="[object Object]")dojo.js (line 1038)
id]) {injectPlugin()dojo.js (line 93)
undefined = "modules[mid] = pluginRe...oPluginResource.mid];})"
(undefined="[object Object]")dojo.js (line 1030)
(undefined="[object Object]")dojo.js (line 1072)
(undefined="[object Object]")dojo.js (line 1132)
()dojo.js (line 1154)
()dojo.js (line 1323)
(undefined="[object Event]") 
```

有谁知道这是怎么一回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:38:21.037

我不相信 Dojo 支持从文件系统加载。此错误确实提到了可能对您有用的解决方法。

[http://bugs.dojotoolkit.org/ticket/12104](http://bugs.dojotoolkit.org/ticket/12104)

# c++ - 我应该使用 atomic 还是 volatile 作为指针？

> ID：10111865
> 
> 赞同：6
> 
> 时间：2012-04-11T18:33:23.640
> 
> 标签：c++, volatile

有两个线程（t1 和 t2）固定到两个不同的内核。它们都有一个共享变量，它是指向某些类类型的原始指针。t1 只读取指针，t2 读取/写入指针。我应该将指针声明为 volatile 或 atomic 还是两者兼而有之？

当 t2 更新这个指针时，如果 t1 读取旧指针或新指针都可以，但它不应该读取任何中间值，因为它会导致 seg 错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T19:28:49.817

`volatile`对于告诉编译器不要优化对变量使用的内存的重复访问很有用。显然，如果另一个线程可能正在更新变量，你会想要这个。它被称为“几乎没用”的原因是，在太多情况下，这不足以保证正确的多线程行为，您需要查看内存围栏和原子原始操作。

在某些处理器架构（例如 Intel）上，对整数或指针的读取或写入将是原子的，只要它正确对齐内存即可。例如，请参阅[http://software.intel.com/en-us/forums/showpost.php?p=31711](http://software.intel.com/en-us/forums/showpost.php?p=31711)英特尔链接不断变化，因此我无法找到最终资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T18:36:03.937

`volatile`对多线程毫无用处，因此该选项已失效。您确实只需要一个原子变量。

# javascript - 一个ajax请求的时间

> ID：10111866
> 
> 赞同：1
> 
> 时间：2012-04-11T18:33:23.870
> 
> 标签：javascript, ajax, jquery

有什么方法可以计算 jquery ajax 请求持续了多长时间？有时搜索时间太长，如果搜索时间超过 5 秒，最好添加一个 jquery abort() 按钮。任何方式我都可以做到这一点！

在 ajax 请求的另一端是一个发出 postgresql 请求的 php 文件。

非常感谢您的任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:39:48.273

看看超时选项（http://api.jquery.com/jQuery.ajax/）。您可以在特定调用中设置它，或者使用 $.ajaxSetup() 全局设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:44:52.807

要让中止按钮在 5 秒后出现，`setTimeout`请在调用`send`. AJAX 命令完成后，您可以添加代码以清除超时并删除中止按钮（如果存在）。

```
var timeOutID = 0;
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {     
    clearTimeOut(timeOutID);
    // Remove the abort button if it exists.
  }
});
timeOutID = setTimeout(function() {
                 // Add the abort button here.
               }, 5000); 
```

这样，如果 AJAX 足够快地返回，中止按钮将永远不会出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T18:40:26.600

通常，一旦发送请求，我会设置一个超时，该超时将在 10 秒左右后触发，然后回退到其他东西以确保它仍然发生（例如，表单提交）。

所以设置一个变量为false， `var failed = false;`并且在做request请求开始的同时，设置一个超时时间：

```
setTimeout(function() {
    failed = true;
    $("#form").submit();
    return false;
}, 10000); 
```

在 ajax 调用的返回函数中，检查 failed 变量是否已设置为 true，如果已设置，则实际上不要执行它最初尝试的任何操作，否则可能会搞砸，或混淆用户其他事情正在发生（因为这些事情通常发生在较慢的互联网连接上，如果在加载新页面时出现下一步，他们可能会尝试交互，然后页面会改变）。

```
$.post("ajaxcall.php", {'etc': "etc"},
    function(returned) {
        if (failed != true) {
            //do whatever with returned variable
        }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T20:21:49.070

```
var timer = 0,
    XHR = $.ajax({
             url: 'ajax/mypage.html',
             beforeSend: function() {
                 timer=setTimeout(showAbort, 5000);
             }
          });

function showAbort() {
    $('<input type="button" value="Abort" id="abort_button"/>').appendTo('#some_parent');
    $('#abort_button').on('click', function() {
         XHR.abort(); //abort the Ajax call
    });
}

XHR.always(function() {  //fires on both fail and done
    clearTimeout(timer);
    if ($('#abort_button').length) {
       $('#abort_button').remove(); //remove button if exists
    }
}); 
```

# delphi - 如何使用 GDIPlus 使矩形无效

> ID：10111874
> 
> 赞同：3
> 
> 时间：2012-04-11T18:33:54.980
> 
> 标签：delphi, gdi+

我能找到的所有 GDIPlus 演示代码都没有失效。那么，当在 TScrollbox 上使用带有 TImage 的 MouseMove 进行绘图时，如何使 GDIPlus API 中的矩形无效？

```
function NormalizeRect ( R: TRect ): TRect;
begin

  // This routine normalizes a rectangle. It makes sure that the Left,Top
  // coords are always above and to the left of the Bottom,Right coords.

  with R do
  begin

    if Left > Right then
      if Top > Bottom then
        Result := Rect ( Right, Bottom, Left, Top )
      else
        Result := Rect ( Right, Top, Left, Bottom )
    else if Top > Bottom then
      Result := Rect ( Left, Bottom, Right, Top )
    else
      Result := Rect ( Left, Top, Right, Bottom );

  end;

end;

procedure TFormMain.Image1MouseDown ( Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer );
begin
  if Line1.Down then
  begin
    GPPointStart := MakePoint ( X, Y );
  end;
end;

procedure TFormMain.Image1MouseMove ( Sender: TObject; Shift: TShiftState; X, Y: Integer );
var
  graphics: TGPGraphics;
  pen: TGPPen;
  SolidBrush: TGPSolidBrush;
  rgbTriple: windows.RGBTRIPLE;
  iRect: TRect;
begin  
  if Line1.Down then
  begin
    if ssLeft in Shift then
    begin
      iRect := NormalizeRect ( Rect ( X, Y, Image1.Picture.Bitmap.Width, Image1.Picture.Bitmap.Height ) );
      InvalidateRect ( ScrollBox1.Handle, @iRect, TRUE );
      graphics := TGPGraphics.Create ( Image1.Picture.Bitmap.Canvas.Handle );
      graphics.Flush ( FlushIntentionFlush );
      GPPointEnd := MakePoint ( X, Y );
      rgbTriple := ColorToRGBTriple ( ColorBox1.Selected );
      pen := TGPPen.Create ( MakeColor ( StrToInt ( Alpha1.Text ), rgbTriple.rgbtRed, rgbTriple.rgbtGreen, rgbTriple.rgbtBlue )
        );
      pen.SetWidth ( StrToInt ( Size1.Text ) );
      graphics.DrawLine ( pen, GPPointStart.X, GPPointStart.Y, GPPointEnd.X, GPPointEnd.Y );
      graphics.Free;
      Image1.Refresh;
    end;
   end;
end; 
```

这是它的样子： ![在此处输入图像描述](../Images/2d4a5147cfe0903567f73d5afe16a351.png)

[使用来自http://www.progdigy.com](http://www.progdigy.com)的GDIPlus 库和 Delphi 2010。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T20:46:30.840

该`InvalidateRect`命令与 GDI+ 无关。*这是一个命令，告诉操作系统窗口*的某个部分是无效的，应该重新绘制。当操作系统下一次决定重新绘制该窗口时，程序可以询问操作系统需要绘制多少窗口。

您的代码正在调用`InvalidateRect`，然后它在窗口的同一部分上进行绘制。但是，该窗口仍然无效，因此操作系统会要求您的程序稍后在您下一次处理`wm_Paint`消息时重新绘制该区域。

我不知道您为什么希望您的图像看起来有任何不同，这与使滚动框无效无关。看起来你点击了角色的眼睛，然后顺时针向右拖动鼠标。

在每次鼠标移动时，您都会从原始品脱到当前鼠标位置绘制一条新线。您直接在当前显示的位图上绘制线条，然后要求图像控件重绘自身。它服从并绘制位图——您刚刚添加了另一行的位图。

我怀疑您*打算*发生的情况是，每次鼠标移动都会导致*一条*黑线出现在原本干净的图像上。`InvalidateRect`对此无济于事。您需要在前一行位置重新绘制原始图像，然后绘制新行。`InvalidateRect`不能帮助您“撤消”先前的图形操作。它只是告诉操作系统某个窗口的某个部分应该在某个时候重新绘制。它没有说明这些无效像素应该用什么颜色重新*绘制*。这`wm_Paint`就是为了。

# jquery - Jquery setTimeout 在 Firefox 11.0 中不起作用

> ID：10111875
> 
> 赞同：1
> 
> 时间：2012-04-11T18:33:56.993
> 
> 标签：jquery, firefox, jquery-plugins, scroll

我有以下 jquery 脚本来打开指向新页面的链接并具有滚动效果。但是，我无法让它在 Firefox 11.0 中运行。

```
var jump = function (e) {
    if (e) {
        e.preventDefault();
        var target = $(this).attr("href");
    } else {
        var target = location.hash;
    }

    $('html,body').animate(
{
   scrollTop: $(target).offset().top
}, 2000, function () {
   location.hash = target;
});

}

$('html, body').hide();

$(document).ready(function () {
    $('a[href^=#]').bind("click", jump);

    if (location.hash) {
        setTimeout(function () {
            $('html, body').scrollTop(0).show();
            jump();
        }, 1000);
    } else {
        $('html, body').show();
    }
}); 
```

它只是不断循环过去 setTimeout 的这一部分，然后继续从头开始。

```
$('html, body').scrollTop(0).show();
jump(); 
```

这只发生在 Firefox 11.0 有谁知道如何解决这个问题或解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:44:48.550

尝试使用`window.setTimeout`，因为我认为这就是它应该被调用的方式。另外，您使用的超时时间为 0，那么，为什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:51:30.143

使用`setTimeout`超时 0 基本上就好像你根本没有使用`setTimeout`一样，我猜 Firefox 不喜欢它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:17:46.757

错误出现在 MVC 框架中。Petr Vostrel 是发现它的人，所以我把功劳归功于他。这是他发现的。

MicrosoftAjax 组件尝试管理某些浏览器的历史记录，并为此使用 URL 的哈希部分，这是一个有效的标准过程，直到现在。在初始化时，`Sys$_Application$initialize()`通过`_navigate()`应用`_raiseNavigate()`程序方法。而这个专门为 Firefox 做了一些舞蹈：

```
// Name:        MicrosoftAjax.debug.js
// Assembly:    System.Web.Extensions
// Version:     4.0.0.0
// FileVersion: 4.0.20526.0

if ((Sys.Browser.agent === Sys.Browser.Firefox) && window.location.hash &&
(!window.frameElement || window.top.location.hash)) {
window.history.go(0);
} 
```

三个条件：

```
browser is Firefox
address carries a hash portion after the URL
it is not inside a frame 
```

所有这些都在你的情况下通过，野兽被释放：

```
window.history.go(0); 
```

这指示浏览器的历史管理器按照作为参数给出的距离后退或前进。-2 后退一步，1 前进一步。因此 0 有效地重新加载页面。并在每个页面加载时为页面提供任何散列。无论如何都想不出这条线的任何有效目的......

果然，如果我注释掉那些相当毛茸茸且毫无意义的线条，它就起作用了！这似乎是 Firefox 3.5 或更低版本的向后兼容尝试，所以我会说删除它或更好地更新你的 MVC。

# windows - 转储选择 GPUView 事件

> ID：10111876
> 
> 赞同：1
> 
> 时间：2012-04-11T18:33:58.787
> 
> 标签：windows, performance, xperf

有没有办法将特定事件（例如，仅与特定进程 + DX 事件对应的 NT 事件）转储到 GPUView 或 xperf 的文本文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:07:04.417

不，xperf 和 GPUView 都不支持这个。您可以尝试使用[TraceEvent](http://bcl.codeplex.com/wikipage?title=TraceEvent%20Class%20Overview&referringTitle=TraceEvent) .Net 库、[用于检索事件的 Windows API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363692%28v=vs.85%29.aspx)或[tracerpt 工具](http://technet.microsoft.com/en-us/library/cc732700%28v=ws.10%29.aspx)自行提取所需的事件。HTH。

# android - 有没有办法检查安装我的应用程序的用户是否真的安装了我的应用程序？

> ID：10111878
> 
> 赞同：3
> 
> 时间：2012-04-11T18:34:03.577
> 
> 标签：android, iphone, ios, app-store, google-play

我需要使用 APPLE ID/GOOGLE Android ID 检查用户是否真的支付了购买我的应用程序的费用。

我必须避免用户使用破解的应用程序（越狱）

每个应用程序是否有唯一的“公钥”？我可以使用它（如果存在）来检查我的应用程序的统一器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:49:38.400

您可以在 AppStore 上免费提供它，然后使用`licensing`或`in-app purchases`向用户提供更多内容（完整内容）！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:17:45.017

简而言之：不。您无法通过 API 访问此信息，但正如其他人所说，您可以通过应用内购买和您自己的服务器推出自己的解决方案。如果您担心未经许可的用户会消耗服务器带宽或其他昂贵的资源，我建议您这样做。

但是，如果您的最终目标只是防止盗版，我建议您搜索一些当今可用的现成反盗版解决方案。然而，即便如此，我也不会期待奇迹。我已经在自己客户的一些应用程序中实施了尽可能多的反盗版技术，但迄今为止，没有一个是“未破解的”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T19:27:40.820

在 Android 上，使用[许可证验证库](http://developer.android.com/guide/market/licensing/index.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T19:17:20.290

您可以做一些创造性的事情，包括在应用内购买并在购买完成时 ping 您自己的服务器。这假设您想将内容放在 IAP 付费墙后面，并且您想运行自己的服务器，但情况可能并非如此。

# c++ - 需要帮助弄清楚为什么我会遇到这个分段错误

> ID：10111880
> 
> 赞同：0
> 
> 时间：2012-04-11T18:34:10.883
> 
> 标签：c++, segmentation-fault, computer-architecture

我正在用 C++ 为 MIPS 管道模拟器编写代码。我的功能之一是获取。经过一些调试，我缩小到我的 fetch 函数，其中发生了分段错误。有人可以帮我弄清楚为什么会这样吗？代码如下：

```
void Simulator::fetch(){
int flag =0;
string buf, rd;
int i;
for(i = 0;i<4;i++){
 if(pre_issue_buffer[i]==";"){
     flag = 1;
     break;
 }
 }
 if(flag ==1){
 if(i<3){
string instr = memory.read_memory(PC);
 stringstream ss(instr);
 vector<string> tokens;
 while (ss >> buf)
    tokens.push_back(buf);
 string instruction = tokens.at(0);
 if(instruction == "BREAK"){
        brk =1;
        instr_string=instruction;
 }
 else if(instruction=="NOP"){

    instr_string=instruction;
 }
 else if(instruction=="J"){
    int address=toInt(tokens.at(1));
    if(address>this->break_addr){
        cerr<<"Invalid Jump Address at: "<<PC<<endl;
    }
    PC = address;
    exec_instr=instruction+"\t#"+tokens.at(1);
 }
 else if(instruction=="JR"){
    rd = tokens.at(1);
    if(regInUse[rd]==0){
    p=regFile.find(tokens.at(1));
    PC = p->second;
    exec_instr=instruction+"\t"+tokens.at(1);
 }
    else
        waiting_instr= instruction+"\t"+tokens.at(1);
 }
 else if(instruction=="BEQ"){
    int rs,rt;
    rd = tokens.at(1);
    if(regInUse[rd]==0){
    p=regFile.find(tokens.at(1));
    rs = p->second;
    p=regFile.find(tokens.at(2));
    rt = p->second;
    if(rs==rt){
        int offset=toInt(tokens.at(3));
        PC = PC+offset+4;
    }
    else
        PC=PC+4;
    exec_instr=instruction+"\t"+tokens.at(1)+", "+tokens.at(2)+", #"+tokens.at(3);
 }
    else
    waiting_instr=instruction+"\t"+tokens.at(1)+", "+tokens.at(2)+", #"+tokens.at(3);
 }
 else if(instruction=="BLTZ"){
    rd = tokens.at(1);
    if(regInUse[rd]==0){
    p = regFile.find(tokens.at(1));
    int rs = p->second;
    if(rs<0){
        int offset=toInt(tokens.at(2));
        PC = PC + offset+4;
    }
    else
        PC=PC+4;
    exec_instr=instruction+"\t"+tokens.at(1)+", #"+tokens.at(2);
 }
    else
        waiting_instr=instruction+"\t"+tokens.at(1)+", #"+tokens.at(2);
 }
 else if(instruction=="BGTZ"){
    rd = tokens.at(1);
    if(regInUse[rd]==0){
    p = regFile.find(tokens.at(1));
    int rs = p->second;
    if(rs>0){
        int offset=toInt(tokens.at(2));
        PC = PC + offset+4;
    }
    else
        PC=PC+4;
    exec_instr=instruction+"\t"+tokens.at(1)+", #"+tokens.at(2);
 }
    else
    waiting_instr=instruction+"\t"+tokens.at(1)+", #"+tokens.at(2);
 }
 else{
 rd = tokens.at(1);
 pre_issue_buffer[i]=instr;
 cout<<i<<endl;
 PC=PC+4;
 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:37:54.810

对于每个数组，检查您尝试访问的位置并验证它是否在数组边界内。

我们没有足够的信息来回答。据我所知，它可能在您的功能开始时和结束时。

# javascript - 使用 jQuery 将 Javascript 代码插入 DIV

> ID：10111881
> 
> 赞同：2
> 
> 时间：2012-04-11T18:34:10.597
> 
> 标签：javascript, jquery, html, dom, responsive-design

好的，所以我正在开发一个响应式网站，并且我正在尝试以不会让我被禁止的最佳方式处理 Adsense！我想做的是仅当浏览器宽度小于 533px 时才使用 jQuery 添加到我的 Adsense 代码中。这样，我可以展示一个较小的广告，该广告将正确地适合窗口并且不会破坏布局。我在添加 Adsense javascript 时遇到了一些麻烦。这有效：

```
(function($){
//detect the width on page load
$(document).ready(function(){
var current_width = $(window).width();
//do something with the width value here!
if(current_width < 533){
        $('.ads').prepend("THIS IS WHERE I WANT THE ADSENSE CODE TO GO");
}
}); 
```

但是，当我包含我的 Adsense 代码来替换 THIS IS WHERE I WHERE ADSENSE TO GO 时，它没有。这是 Adsense 代码：

```
<script type="text/javascript"><!--
google_ad_client = "ca-pub-1234567890";
/* Test Ad */
google_ad_slot = "1234567890";
google_ad_width = 250;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

我还尝试将 Adsense javascript 代码包含在 .html 文件中，并将 jQuery.get 和 jQuery.getScript 用于 .html 和 .js 文件。我只是无法让它工作。

我可以通过简单的 PHP 标头检测来做到这一点，但我希望广告根据宽度而不是设备类型显示。

有谁知道如何做到这一点？

（重新发布为没有回复上一个问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:42:12.923

我不确定这是否可行，但值得一试：

```
/* these should be global */
google_ad_client = "ca-pub-1234567890";
/* Test Ad */
google_ad_slot = "1234567890";
google_ad_width = 250;
google_ad_height = 250;

$(function(){
    //detect the width on page load
    var current_width = $(window).width();
    //do something with the width value here!
    if(current_width < 533){
        $.getScript('http://pagead2.googlesyndication.com/pagead/show_ads.js');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:43:47.540

您是否尝试过像这样装载外部 .js？

```
 var script = document.createElement('script');
   script.src = 'http://pagead2.googlesyndication.com/pagead/show_ads.js';
   script.type = 'text/javascript';
   var head = document.getElementsByTagName("head")[0];
   head.appendChild(script); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T19:02:04.997

您面临的问题是 Google 并不真正支持 AdSense ajax。包含 AdSense 代码的正常方式是使用其所在页面的 URL 来呈现正确的内容。

现在，假设您可以将 AdSense 代码缩减为特定的 URL。你可以这样做：

```
// note, this url is just a suggestion, not something that will likely work 

var url = 'http://pagead2.googlesyndication.com/pagead/ads?client=ca-pub-1234567890&ad_slot=1234567890&ad_width=250&ad_height=250';

var adsContainer = $('.ads');  // though, if there's only one, use id, not class

$.ajax({
type:'GET',
    url:url,
    async:true,
    success:function(html) {
        adsContainer.html(html);
        return false;
    },
    error: function(html) {
      adsContainer.html('SOME DEFAULT AD MESSAGE');
      return false;
    } 
}); 
```

但我认为这几乎肯定会让你在谷歌遇到麻烦。

Google曾经有一个adsense ajax程序：

[https://developers.google.com/adsense-for-ajax/](https://developers.google.com/adsense-for-ajax/)

但它现在“不可用”。您不能将代码放在外部 .html 或 .php 文件中并在您自己的服务器上使用 ajax 的原因是 ajax 调用不会由客户端的引擎执行。您正在将原始 javascript 注入到已由 javascript 引擎解释的页面中。

您可以使用 node.js 或某种服务器端 javascript 解析器来为您的 .html 文件提供服务吗？也许吧，但要解决这个问题有很多。

我的建议是：包含多个较小的广告，如果堆叠在大页面上看起来不错，或者如果在小页面上挤在一起则平铺。

# internet-explorer-8 - 在选择时控制 IE8 中的下拉列表宽度

> ID：10111882
> 
> 赞同：1
> 
> 时间：2012-04-11T18:34:16.463
> 
> 标签：internet-explorer-8, drop-down-menu

是否可以控制 IE8 中选择时的下拉列表宽度？

当页面加载时，我希望下拉列表足够小以仅包含单词 SELECT，但是当用户单击它进行选择时，它应该足够扩展以确保所有选择在宽度方向上都是完全可见的。

FF 做到了，IE9 做到了。但是 IE8 切断了宽度。

有什么修复吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T07:15:53.843

只需尝试在 CSS 下面包含。

```
select:focus{width:auto !important;} 
```

我希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:16:06.473

对于 IE8，您需要为此使用一些 JavaScript。也有执行此操作的 JQuery 插件，但我认为不使用 js 就无法解决。

查看[其他 SO 线程](https://stackoverflow.com/questions/682764/select-dropdown-with-fixed-width-cutting-off-content-in-ie)，了解您可能使用的不同方法和 js 库。

根据我的经验，最好的解决方案是用其他 HTML、CSS 和 JavaScript 组合替换 select 元素，因为尝试在某些事件上更改原始 select 的宽度会移动它右侧的内容。

# mysql - playframework 2.0 - 超过数据库演变的 max_user_connections？

> ID：10111885
> 
> 赞同：6
> 
> 时间：2012-04-11T18:34:22.177
> 
> 标签：mysql, heroku, playframework, playframework-2.0

我正在寻找关于如何配置我的 play 2.0 应用程序以在数据库演变和运行时不使用这么多数据库连接的任何见解。我已经在小组和 IRC 中问过这个问题，但没有运气。

我正在使用带有heroku的cleardb ignite实例（max_user_connections = 10）......

基本上，当我尝试在我的 play 2.0 应用程序上运行数据库演化时，我得到：

```
! @6a2mjd7kg - Internal server error, for request [GET /] ->

play.api.db.evolutions.InvalidDatabaseRevision: Database 'default' needs evolution! [An SQL script need to be run on your database.]
at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:424) ~[play_2.9.1.jar:2.0]
at play.api.db.evolutions.EvolutionsPlugin$$anonfun$onStart$1.apply(Evolutions.scala:410) ~[play_2.9.1.jar:2.0]
at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59) ~[scala-library.jar:0.11.2]
at scala.collection.immutable.List.foreach(List.scala:45) ~[scala-library.jar:0.11.2]
at play.api.db.evolutions.EvolutionsPlugin.onStart(Evolutions.scala:410) ~[play_2.9.1.jar:2.0]
at play.api.Play$$anonfun$start$1.apply(Play.scala:60) ~[play_2.9.1.jar:2.0]
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 10\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 9\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 8\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 7\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 6\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 5\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 4\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 3\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 2\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 1\. Exception: null
 [error] application - 

! Internal server error, for request [GET /@evolutions/apply/default?redirect=http%3A%2F%2Flocalhost%3A9000%2F] ->

com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: User '52841e548f150d' has exceeded the 'max_user_connections' resource (current value: 10)
at sun.reflect.GeneratedConstructorAccessor26.newInstance(Unknown Source) ~[na:na]
at       sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.  java:27) ~[na:1.6.0_29]
at java.lang.reflect.Constructor.newInstance(Constructor.java:513) ~[na:1.6.0_29]
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411) ~[mysql-connector-java-  5.1.18.jar:na]
at com.mysql.jdbc.Util.getInstance(Util.java:386) ~[mysql-connector-java-5.1.18.jar:na]
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052) ~[mysql-connector-java-5.1.18.jar:na] 
```

然后我也经常会得到通常的“超过 max_user_connections”，这在不进行进化时也经常发生。

我也可以收到此错误消息：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: User '52841e548f150d' has exceeded the 'max_user_connections' resource (current value: 10)
at sun.reflect.GeneratedConstructorAccessor19.newInstance(Unknown Source) ~[na:na]
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) ~[na:1.6.0_29]
at java.lang.reflect.Constructor.newInstance(Constructor.java:513) ~[na:1.6.0_29]
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411) ~[mysql-connector-java-5.1.18.jar:na]
at com.mysql.jdbc.Util.getInstance(Util.java:386) ~[mysql-connector-java-5.1.18.jar:na]
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1052) ~[mysql-connector-java-5.1.18.jar:na]
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 10\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 9\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 8\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 7\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 6\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 5\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 4\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 3\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 2\. Exception: null
[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection Sleeping for 1000ms and trying again. Attempts left: 1\. Exception: null
[error] application - 
```

我的 application.conf 看起来像这样，我尝试了很多变体......

```
db.default=mysql 
db.default.driver=com.mysql.jdbc.Driver
db.default.url="mysql://usr:pass@db_url.com/db_name"
db.default.minSize=1
db.default.maxSize=2 
```

在这一点上，任何指导、建议、链接都会非常有帮助......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T20:00:57.997

更新了答案。

这是一个仅使用 5 个连接的配置。

```
db.default.partitionCount=1
db.default.maxConnectionsPerPartition=5
db.default.minConnectionsPerPartition=5 
```

# 连接将是`partitionCount x ConnectionsPerPartition`

# jquery - 为数据表选择最快的模板插件

> ID：10111886
> 
> 赞同：3
> 
> 时间：2012-04-11T18:34:24.230
> 
> 标签：jquery, ajax, knockout.js, jsrender, jtemplates

我最近将我们的 asp.net gridviews（与更新面板一起使用）更改为 HTML 表，使用 jquery-Ajax 并使用 jtemplates 进行模板化。性能提升很大！！！（在服务器端，我使用的是通用的 httphandler）。由于 jtemplate 插件，我正在处理的一个性能问题发生在 Firefox 上。不知何故，FF 渲染一个 20 行的模板最多需要 3 秒！！！（在 IE 或 chrome 上大约需要 100 毫秒）。当我的目标主要是简单性和性能时，哪个是首选的模板插件？我正在尝试 jsrender，它速度很快，但没有足够的文档记录（我在 for 循环中做事时遇到了一些问题）。Knockoutjs 看起来很棒，但非常复杂，我也担心性能问题。谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T23:20:22.730

对于纯粹的模板，JsRender 很棒。JsRender 真的很快。在此处查看性能页面：http: [//jsperf.com/dom-vs-innerhtml-based-templating/395](http://jsperf.com/dom-vs-innerhtml-based-templating/395)

它比较了各种渲染数据的模板引擎，JsRender 在所有浏览器上的表现都非常好。JsRender 没有 DOM 依赖项，没有 jQuery 依赖项（尽管您当然可以使用它......我这样做）并且是纯基于字符串的渲染。

如果你走那条路，这是我写的一篇关于入门的文章：http: [//jpapa.me/clientIn1204](http://jpapa.me/clientIn1204)

如果您想要更多具有模板的数据绑定框架，那么 Knockout 会非常好。但是对于纯粹的性能，JsRender 是一个不错的选择。

# django - 无法为 Django 创建测试套件

> ID：10111890
> 
> 赞同：0
> 
> 时间：2012-04-11T18:34:38.887
> 
> 标签：django, unit-testing, testing, django-testing

我在 Django 1.3 中创建测试套件时遇到问题。

假设我在名为`app_name`. 该目录中的一个文件`foo.py`定义了一个名为`Foo`. 我想对此进行测试，所以我还有一个名为该目录的文件，`foo_test.py`它定义了一个名为`FooTest`. 该文件如下所示：

```
import unittest
import foo

class FooTest(unittest.TestCase):
  def setUp(self):
    self.foo_instance = foo.Foo()

  ... etc 
```

现在，我将在其他文件中包含其他测试用例，并且我希望将它们全部作为测试套件的一部分运行。所以在同一个目录中，`app_name`我创建了一个`tests.py`定义套件的文件。起初，我将其定义为：

```
import foo_test

from django.test.simple import DjangoTestSuiteRunner

def suite():
  runner = DjangoTestSuiteRunner()
  return runner.build_suite(['app_name']) 
```

不幸的是，这失败了，因为调用搜索`runner.build_suite(['app_name'])`文件，执行，并且递归地继续下去，直到 Python 解释器停止一切以超过最大递归深度。`app_name``tests.py``suite()`

更改`runner.build_suite(['app_name'])`为

```
runner.build_suite(['app_name.foo_test']) 
```

或者

```
runner.build_suite(['app_name.foo_test.FooTest']) 
```

导致错误，如`ValueError: Test label 'app_name.foo_test' does not refer to a test`.

并将其更改为：

```
runner.build_suite(['foo_test']) 
```

或者

```
runner.build_suite(['foo_test.FooTest']) 
```

导致错误，如`App with label foo_test could not be found`.

在这一点上，我有点没有想法。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:44:07.273

请参阅[Python 文档以组织测试](http://docs.python.org/library/unittest.html#organizing-tests)，并使用其中的一种替代方法来构建您的测试套件。顺便说一句，推荐的方法都没有使用`build_suite`.

# ruby-on-rails - ActionView (rspec) 中的未定义方法

> ID：10111892
> 
> 赞同：2
> 
> 时间：2012-04-11T18:34:44.590
> 
> 标签：ruby-on-rails, rspec

我的应用程序助手中有一个方法，但由于某种原因，当我运行我的 rspec 测试时找不到它。这是错误：

```
Failure/Error: helper.chart_series(user).should =~ /y: 100/
     undefined method `ab_variant' for #<ActionView::Base:0x102b12d78>
     # ./app/helpers/sidebar_helper.rb:17:in `chart_series'
     # ./spec/helpers/sidebar_helper_spec.rb:35 
```

如何确保我的 rspec 测试可以找到 ab_variant（在应用程序助手中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:10:18.813

默认情况下，您在 app/helpers 中定义的助手不会加载到 rspec 中。您必须重新创建它们。

因此，创建一个文件并将其命名为您喜欢的名称，例如。“application_helper.rb”并将其放在规范/支持中。这将自动包含在内，并通过 spec/spec_helper.rb 中的此文件在您的规范中可用：

```
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f} 
```

# c# - 删除 XmlDocument 中的自闭合标签（例如 />）

> ID：10111894
> 
> 赞同：2
> 
> 时间：2012-04-11T18:34:55.057
> 
> 标签：c#, .net, xml, xmlwriter

在 XmlDocument 中，无论是在以后编写和修改时，是否都可以删除 `/>`某个元素的自闭合标签（即 ）。

例如：改变

*   `<img />`或`<img></img>`到`<img>`。
*   `<br />`到`<br>`.

你为什么问？我正在尝试符合Word 2007架构的*HTML ；*生成的 HTML 将显示在*Microsoft Outlook 2007*或更高版本中。

在阅读了另一个[StackOverflow 问题](https://stackoverflow.com/questions/2107909/how-to-remove-closing-tag-of-an-xmldocument-in-c-net-1-1)后，我尝试将`IsEmpty`属性设置为`false`这样。

```
var imgElements = finalHtmlDoc.SelectNodes("//*[local-name()=\"img\"]").OfType<XmlElement>();
foreach (var element in imgElements)
{
    element.IsEmpty = false;
} 
```

然而，这导致`<img />`成为`<img></img>`。此外，作为一个黑客，我还尝试`OuterXml`直接更改属性，但是这不起作用（没想到会这样）。

**问题**

您可以从中删除自闭合标签`XmlDocument`吗？*老实说*，我认为不存在，因为它将是无效的 xml（没有结束标记），但是我认为我会将这个问题抛出社区。

**更新：**

`XmlDocument`从使用正则表达式（用精彩的[RegexBuddy](http://www.regexbuddy.com/)编写）导出后，我最终修复了 HTML 字符串。

```
 var fixHtmlRegex = new Regex("<(?<tag>meta|img|br)(?<attributes>.*?)/>", RegexOptions.IgnoreCase | RegexOptions.Multiline);
    return fixHtmlRegex.Replace(htmlStringBuilder.ToString(), "<$1$2>"); 
```

它清除了验证过程中的许多错误，让我可以专注于真正的兼容性问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T18:36:37.053

你是对的：不可能仅仅因为它是无效的（或者更确切地说，*不是格式良好的*）XML。XML 中的空元素**必须**关闭，无论是使用快捷语法`/>`还是使用立即关闭标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:38:10.530

HTML 和 XML 都是 SGML 的应用。虽然 HTML 和 SGML 允许未闭合的标签，例如`<br>`，但 XML 不允许。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:37:06.840

`<img>`不会是有效的 XML，所以不，你不能这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T12:42:11.613

我的回答有点尴尬，但它可以满足我的需要。拥有完整的 xml 文档后，您可以对其进行字符串操作以对其进行清理...

```
private string RemoveSelfClosingTags(string xml)
    {
        char[] seperators = { ' ', '\t', '\r', '\n' };

        int prevIndex = -1;
        while (xml.Contains("/>"))
        {
            int selfCloseIndex = xml.IndexOf("/>");
            if (prevIndex == selfCloseIndex)
                return xml; // we are in a loop...

            prevIndex = selfCloseIndex;

            int tagStartIndex = -1;

            string tag = "";

            //really? no backwards indexof?
            for (int i = selfCloseIndex; i > 0; i--)
            {
                if (xml[i] == '<')
                {
                    tagStartIndex = i;
                    break;
                }
            }

            int tagEndIndex = xml.IndexOfAny(seperators, tagStartIndex);
            int tagLength = tagEndIndex - tagStartIndex;
            tag = xml.Substring(tagStartIndex + 1, tagLength - 1);

            xml = xml.Substring(0, selfCloseIndex) + "></" + tag + ">" + xml.Substring(selfCloseIndex + 2);
        }

        return xml;

    } 
```

# c# - 从我的 Masterpage 调用我的 HomeController 中的方法

> ID：10111905
> 
> 赞同：0
> 
> 时间：2012-04-11T18:35:31.087
> 
> 标签：c#, asp.net, asp.net-mvc-3, master-pages

我试图对没有管理员权限的用户隐藏我的母版页上的一些管理员特定按钮。

到目前为止，我的代码如下所示：

```
<% if (Request.IsAuthenticated)
    {%>
        <%: Html.ActionLink("Administrer", "Index", "User", new { Area = "Users" }, new { @class = "menubutton", @id = "settingsbutton" })%>
      <%} else { }%> 
```

现在，如果当前用户是管理员，我想检查 IF() 语句。我使用 ASP.NET 会员系统，并为每个用户附加了一个特殊类，其中包含一些额外的信息，包括关于他是否是管理员的信息（布尔）。

我的问题是我如何去调用一个方法来检查这个或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:01:20.627

```
<% if (Request.IsAuthenticated && User.IsInRole("Administrator"))
    {%>
        <%: Html.ActionLink("Administrer", "Index", "User", new { Area = "Users" }, new { @class = "menubutton", @id = "settingsbutton" })%>
      <%} else { }%> 
```

如果您使用 ASP.NET Membership Provider 和 ASP.NET Role Provider 将您的用户链接到他们的角色，您可以只调用`IsInRole(string`视图`IPrincipal User`对象上的 ) 方法。

# ruby-on-rails - 使用 Geocoder 和 Ruby on Rails 自动检测 IP 并显示适当的城市

> ID：10111906
> 
> 赞同：2
> 
> 时间：2012-04-11T18:35:42.390
> 
> 标签：ruby-on-rails, ruby, geocode

我一直在尝试编写一些代码来自动检测网站访问者的 IP 地址并显示相应的城市。我认为这就像使用 Geocoder 检测 IP 然后显示相应的城市一样简单，但是我没有成功。

我一直在查看声称与 IP 地址兼容的文档，但要么我做错了，要么文档有误：[http ://rdoc.info/github/alexreisner/geocoder/master/frames](http://rdoc.info/github/alexreisner/geocoder/master/frames)

我在我的 location.rb 模型中有这个，它应该提供诸如`result.city`字符串之类的数据。

```
class Location < ActiveRecord::Base
  attr_accessible :address, :latitude, :longitude

  reverse_geocoded_by :lat, :lon do |obj,results|
      if geo = results.first
        obj.city    = geo.city
        obj.zipcode = geo.postal_code
        obj.country = geo.country_code
      end
    end
    after_validation :reverse_geocode

end 
```

所以我将@city = result.city 添加到我的locations_controller.rb

```
def index
    @locations = Location.all
    @city = result.city
  end 
```

然后为了测试它是否有效，我将`<%= @city %>`index.html.erb 放入了位置。

在呈现页面时，我在控制器中收到一个错误，指出“结果”尚未定义：

```
undefined local variable or method `result' for #<LocationsController:0x007faf9d5009e8>

app/controllers/locations_controller.rb:7:in `index' 
```

我哪里错了？或者为什么模型不像描述的那样起作用？

# jquery - 如何使用 jQuery 验证聚焦无效字段？

> ID：10111907
> 
> 赞同：54
> 
> 时间：2012-04-11T18:35:43.933
> 
> 标签：jquery, jquery-validate

有[`focusInvalid`](http://docs.jquery.com/Plugins/Validation/validate#toptions)选项，`true`默认情况下。但它仅在表单提交发生时才有效。如果我用[`valid`](http://docs.jquery.com/Plugins/Validation/valid)方法验证表单，那么它不起作用。那么问题是如何在`valid`使用时聚焦无效字段？

请查看[此演示](http://jsbin.com/ayupob)以查看差异。只需按那里的按钮。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-11T19:12:44.623

使用 ，`invalidHandler`您可以将焦点设置到第一个失败的元素：

```
$("#form").validate({
    onfocusout: false,
    invalidHandler: function(form, validator) {
        var errors = validator.numberOfInvalids();
        if (errors) {                    
            validator.errorList[0].element.focus();
        }
    } 
}); 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-04-11T19:12:30.897

首先，您需要将验证器保存到一个变量中，以便您可以在点击处理程序中使用它：

```
var validator = $("#test-form").validate({ /* settings */ }); 
```

然后在验证处理程序中，您可以`focusInvalid`从`validator`变量中手动调用函数：

```
 $("#validate").click(function() {
        if ($("#test-form").valid()) 
              alert("Valid!");
        else
              validator.focusInvalid();

        return false;
  }); 
```

[**例子**](http://jsbin.com/ayupob/2/edit)

# facebook - Facebook API 帖子在移动设备上不可见？

> ID：10111912
> 
> 赞同：1
> 
> 时间：2012-04-11T18:35:59.990
> 
> 标签：facebook, facebook-graph-api

我有一个使用 Graph API 制作墙贴的 Rails Facebook 应用程序。它运行良好，除了这些帖子在移动设备上不可见。为什么是这样？我不是在寻找解决方案，而是在寻找解释。

从移动应用发布帖子时，使用相同的 APP_ID 和 APP_SECRET，这些帖子在移动设备上可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T20:00:39.293

固定的。我所要做的就是进入开发者应用程序，并在“移动 Web URL”下添加一个 URL。现在，他们的表现很好。

# objective-c - 如何立即停止 UIWebView 加载

> ID：10111918
> 
> 赞同：4
> 
> 时间：2012-04-11T18:36:31.017
> 
> 标签：objective-c, ios, uiwebview

正如 ios 文档所说，`[webView stopLoading]`应该使用方法来停止 webview 加载任务。

据我所知，这些方法是异步运行的，并且不会立即停止当前处理加载请求。

但是，我需要一种方法来强制 webview 立即停止正在进行的任务，因为加载部分会阻塞主线程，这可能会导致动画轻弹。

那么，有没有办法成功呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T07:25:12.757

这对我有用。

```
if (webText && webText.loading){
    [webText stopLoading];
}

webText.delegate=nil;

NSURL *url = [NSURL URLWithString:@""];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webText loadRequest:requestObj]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:32:52.300

不要使用 UIWebView 直接下载您的 html 文档。使用[ASIHTTPRequest 之](http://allseeing-i.com/ASIHTTPRequest/)类的异步下载机制让后台线程下载您的 html。当您获得`requestFinished`html 的内容时，将其提供给 UIWebView。

ASIHTTPRequest 页面中的示例如何创建异步请求：

```
- (IBAction)grabURLInBackground:(id)sender
{
   NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
   ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
   [request setDelegate:self];
   [request startAsynchronous];
}     

- (void)requestFinished:(ASIHTTPRequest *)request
{
   // Use when fetching text data
   NSString *responseString = [request responseString];

   // Use when fetching binary data
   NSData *responseData = [request responseData];
}     

- (void)requestFailed:(ASIHTTPRequest *)request
{
   NSError *error = [request error];
} 
```

使用`responseString`你的 UIWebView`loadHTMLString`方法的参数：

```
UIWebView *webView = [[UIWebView alloc] init];
[webView loadHTMLString:responseString baseURL:[NSURL URLWithString:@"Your original URL string"]]; 
```

# c++ - 为变量制作副本

> ID：10111926
> 
> 赞同：2
> 
> 时间：2012-04-11T18:37:03.080
> 
> 标签：c++, pointers, copy

考虑这段代码：

```
int *a, *b;
a = foo();
if (a)
   b = a;
a = bar(); 
```

问题是，当`a`通过调用更新时`bar()`，`b`也会更新。但是我想使用`b = a`. 那有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:39:14.703

```
int *a, *b;
b = new int;

a = foo();
if (a)
   *b = *a;
a = bar();
...
delete(b); 
```

（地址 a 的值被分配给地址 b 的值。）

您现在正在做的是使 a 和 b 指向内存中的**同一**位置。然后，如果 a 或 b 中的值被更新，它们的指针都指向新值。

顺便说一句，除非`bar()`返回一个指针，否则您可能想要`*a = foo()`and `*a = bar()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:39:19.237

您可以只备份 a 的值：

```
int *a, b;
a = foo();
if (a)
   b = *a;
a = bar(); 
```

或者如果您想保留`b`为指针：

```
...
   *b = *a;
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:41:40.520

如果 a == b，则 bar() 正在更改 a 的值，而不是分配新的 a。这使记忆最有意义。如果您关心的是实际整数，而不是地址，而不是分配 b = a 分配 *b = *a。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T18:48:56.217

这...

```
int *a;
// ...
a = foo(); 
```

...如果函数被声明为 ，甚至不会编译`int foo();`，所以我假设它被声明为`int* foo();`. 同上`int* bar();`。

不要像这样返回原始指针。调用者是否应该`delete`这样做可能不清楚。好的文档只能*部分*解决这个问题（人类不时有忽视文档的倾向）。为什么不直接复制整*数值*，或者至少返回对整数的*引用*以防它真的需要共享？

话虽这么说，在您的特定情况下，`foo()`并且`bar()`显然在内部使用相同的 int “对象”，因此即使在修改它之后`a`仍继续指向同一个对象。`b``bar()`

# c++ - Std::string 由返回 char * 的函数分配

> ID：10111930
> 
> 赞同：3
> 
> 时间：2012-04-11T18:37:10.773
> 
> 标签：c++

## 更新：对于 getValue 函数，我无法控制，所以我能做些什么吗？

我有一个关于 string 和 char * basic 的愚蠢问题。

我正在使用一个返回 char * 值的函数，

```
const char *getValue(const char *key)
{
    //if key found, and valueString is a string
      return valueString.c_str();
    //else
      return NULL;
} 
```

然后我初始化了一个字符串来保存返回值，

```
std::string value = getValue(key); 
```

问题是，每当找不到值时，这意味着函数返回 NULL，我的赋值行就会遇到异常。但是当有一个合法的返回值时，一切正常。

我想知道 1\. 这种用法完全错误吗？意味着我不应该将 char * 与字符串混合？2.如果不是，那么当返回一个合法的指针时，我的字符串会自动复制并存储吗？3\. 最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T18:40:22.853

首先，如果`valueString`是该函数的本地函数，使用返回的指针将给出未定义的行为。

其次，返回空指针是否合理将取决于您如何使用该指针，而您什么也没告诉我们。

除非您绝对肯定必须摆弄指针，否则只需返回一个字符串，让您的生活变得更轻松。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T20:36:05.863

通过返回 NULL来报告错误发生（如果*未*找到键）不是一个好主意。在这种情况下，您应该在函数内部生成有意义的异常。类似的东西`NotFoundEx`。

如果您无法控制该功能，则应将其包装到安全代码中：

```
const char* getSafeValue(const char *key)
{
  const char* value = getValue(key);
  if(value == NULL)
    throw NotFoundEx();

  return value;
}

std::string value = getSafeValue(key); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T18:49:23.757

由于您无法控制`getValue()`函数的作用，因此您需要在将其分配给 NULL 之前检查其返回值`std::string`。

```
std::string value;  // value is an empty string
const char *retVal = NULL;

if( ( retVal = getValue(key) ) != NULL ) {
  value.assign( retVal );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T18:43:29.413

由于`std::string`无论如何您都在使用值，因此我将只返回 a`std::string`而不是 a `char*`：

```
std::string getValue(const char *key) 
{ 
    if (key found)
        return valueString; 
    else 
        return std::string(); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T18:43:42.407

你想要一个`std::string`超出界限的值。 `(char *)`可能不是理想的方法（请参阅`boost::optional`更好的方法），但它会起作用（假设您没有使用堆栈局部变量） -*如果*您检查超出界限的值。也就是说，这里的问题并不是真正的混合`(char *)`，`std::string`而是您没有检查“未找到”，而是盲目地假设在这种情况下会发生一些明智的事情。

不要假设；确定如果找不到密钥，您需要做什么，并检查`NULL`（或其他带外，如果您选择使用其他东西）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T18:59:29.903

第一个问题：数据从哪里来？您不能返回`c_str()`局部变量的结果；这是未定义的行为，而您似乎很不幸，它似乎起作用了。如果`valueString`只是一些更持久数据的副本，那么您可以`c_str` 直接调用它。然而，更一般地说：无论您返回什么，您都必须在尝试使用它之前验证它是否有效。最简单的解决方案（但并非总是可能）就是在 中使用一个标记值`string`，例如：

```
std::string
getValue( std::string const& key )
{
    //  ...
    return condition ? valueString : std:;string();
} 
```

例如，使用空字符串作为哨兵。

如果函数的语义没有提供方便的标记值——例如，如果函数可以返回一个空字符串作为有效值——那么你将不得不做其他事情。

如果返回值是在某个长期存在的容器中查找的结果，那么您可以返回指向容器中元素的指针。然而，一般来说，指针提出了它们指向什么的问题。如果您没有生命周期足够的东西，那么您不想使用指针。

另一种可能性是调用者提供默认值：

```
std::string
getValue( std::string const& key, std::string const& ifNotFound )
{
    // ...
    return condition ? valueString : ifNotFound;
} 
```

这将定义哨兵的责任转移给了被调用者。在像字符串这样的情况下，几乎总是有一些被调用者不能做任何事情的值，因此可以用作哨兵。

最通用的选择是某种`Fallible`或`Maybe` 类：一个结合了状态（通常只是 a `bool`）和实际数据类型实例的类对象。数据是否有效取决于状态的值，因此您仍然需要检查：

```
Fallible<std::string>
getValue( std::string const& key )
{
    //  ...
    return condition
        ? Fallible<std::string>( valueString )
        : Fallible<std::string>();
} 
```

这通常在内部也很有效：

```
Fallible<std::string>
getValue( std::string const& key )
{
    Fallible<std::string> results;
    //  ...
    // At some point, I've got a valid return value, so I do:
        results.validate( valueString );
    // in a condition, of course...
    return results;
} 
```

（只是一个常见且方便的模式的例子。）

# android - 是什么迫使这里的android服务关闭？

> ID：10111936
> 
> 赞同：1
> 
> 时间：2012-04-11T18:37:43.953
> 
> 标签：android, service, abort

我已经面对这个问题已经有一段时间了。我有一个通过 AIDL 连接到 android 远程服务的应用程序。有时，我看到服务会以类似的日志重新启动：-

```
04-11 23:52:35.225: E/dalvikvm-gc(21682): Could not mmap 3723264-byte ashmem region     'dalvik-mark-stack'
04-11 23:52:35.225: E/dalvikvm-heap(21682): dvmHeapBeginMarkStep failed; aborting
04-11 23:52:35.225: E/dalvikvm(21682): VM aborting
04-11 23:54:53.535: I/dalvikvm(21682): threadid=4: reacting to signal 3 
```

有人可以在这里提供一些见解吗？初步看来，这似乎是一些与内存不足相关的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:29:12.787

我会说您的程序中可能存在内存泄漏。您需要确保在使用完所有资源后释放所有资源，尤其是媒体播放器、网络连接等。

Android 将自行停止它认为不再需要的服务。为了避免系统关闭您的服务或进程，您需要确保您没有限制您拥有的任何设备上的内存。如果您在 AVM 中运行它，我会尝试修改设置，以便设备拥有更多内存。如果您的程序在增加虚拟设备的内存时没有问题，您需要仔细查看您可以释放哪些资源以及何时释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:56:20.373

是的..它与内存问题有关.. **Ashmem 是一种共享内存机制，当内存压力变高时，它能够丢弃部分或全部内容**..我认为您正在使用很多资源..而不是释放它们..

# int - 如何在汇编中使用无符号整数

> ID：10111938
> 
> 赞同：0
> 
> 时间：2012-04-11T18:37:48.943
> 
> 标签：int, unsigned

我正在用汇编编写一个小程序，我需要计算一个整数，它是 2 的幂，并使用寄存器中的最后一位。假设我需要计算 2^31 并将结果存储在 ebx 寄存器中。

对于算术运算，如何将此 int 视为无符号数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:49:10.603

To compute a power of two you use a shift left operation - something like

```
SAL    EAX,31 
```

Addition and subtraction operations are the same for signed and unsigned values - i.e. it is only when you do something with the result (like displaying it) that you have to consider it signed or unsigned

For division and multiplication there are different instructions for signed (`IDIV`, `IMUL`) and unsigned (`DIV`, `MUL`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:52:59.853

许多汇编语言（即指令集架构）中的数据是无类型的，除了它有大小：即 8 位是不同于 16 位的“类型”。

您的 EBX 寄存器既没有签名也没有签名；它只是一个 32 位的库。

位的语义（位的含义）取决于所应用的操作，而不是像在高级语言中那样的任何类型的声明类型。

x86 将“逻辑移位”与“算术移位”区分开来。

因此，要计算`1 << 31`您要使用逻辑左移 (SAL)。对于有符号数量的移位，请使用算术移位。

# c++ - DwmEnableComposition 未启用 Aero

> ID：10111948
> 
> 赞同：2
> 
> 时间：2012-04-11T18:38:38.883
> 
> 标签：c++, winapi, dwm

我正在尝试为我的应用程序启用 Aero（一个使用浏览器运行“单进程”的 Firefox 插件），但我没有这样做。操作系统是 Windows 7 64 位。

这是代码：

```
BOOL bEnabled = FALSE;
if(SUCCEEDED(DwmIsCompositionEnabled(&bEnabled)) && !bEnabled){         
    HRESULT hres = DwmEnableComposition(DWM_EC_ENABLECOMPOSITION);
} 
```

DwmEnableComposition 应该启用合成，但它没有，该函数也返回：

```
S_OK 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:48:37.767

您不能启用 DWM 合成；您只能请求禁用它。当你完成需要它关闭时，你打电话

```
DwmEnableComposition(DWM_EC_ENABLECOMPOSITION); 
```

来自 MSDN：

> 当所有禁用合成的进程都调用 DwmEnableComposition 启用它或已终止时，将自动启用 DWM 合成。

你不能*启用*它，你只是宣布你不再需要它被禁用。（微软不允许你启用合成的原因是[你不能相信你*不会*尝试去做。](http://blogs.msdn.com/b/oldnewthing/archive/2003/09/03/54760.aspx)）

当你落后时，你也应该放弃。再次来自 MSDN：

> **注意** 此功能自 Windows 8 Consumer Preview 起已弃用。不能再以编程方式禁用 DWM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:55:48.927

[`DwmEnableComposition()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969510%28v=vs.85%29.aspx)在系统范围内禁用它时无效。它的唯一目的是通知 Windows 您正在启动或完成与 DWM 不兼容的操作。

此外，他们的操作系统是什么样子取决于用户，而不是由程序来配置它。

# qt - 画家旋转时Qt drawImage有颗粒感

> ID：10111950
> 
> 赞同：1
> 
> 时间：2012-04-11T18:38:58.363
> 
> 标签：qt

我有一个透明的PNG文件，当您使用简单的drawImage时可以很好地绘制。

当我尝试使用该 `painter.rotate(...)`方法旋转绘制它时，它会绘制一个非常颗粒状的图像。

指定`painter.setRenderHint(QPainter::Antialiasing)`没有帮助。

有没有办法提高质量？就其本身而言，图像很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:48:02.633

您应该尝试[`QPainter::SmoothPixmapTransform`](http://doc.qt.nokia.com/4.7/qpainter.html#RenderHint-enum)渲染提示：

> 表示引擎应该使用平滑像素图变换算法（例如双线性）而不是最近邻。

# mysql - 在特定时间之前和之后每天计算消息并显示在一个结果集中

> ID：10111955
> 
> 赞同：4
> 
> 时间：2012-04-11T18:39:10.163
> 
> 标签：mysql, sql

我有下表的消息：

```
+---------+---------+------------+----------+
| msg_id  | user_id | _date      | _time    |
+-------------------+------------+----------+
|   1     | 1       | 2011-01-22 | 06:23:11 |
|   2     | 1       | 2011-01-23 | 16:17:03 |
|   3     | 1       | 2011-01-23 | 17:05:45 |
|   4     | 2       | 2011-01-22 | 23:58:13 |
|   5     | 2       | 2011-01-23 | 23:59:32 |
|   6     | 3       | 2011-01-22 | 13:45:00 |
|   7     | 3       | 2011-01-23 | 13:22:34 |
|   8     | 3       | 2011-01-23 | 18:22:34 |
+---------+---------+------------+----------+ 
```

我想要的是每天查看每个用户在 16:00 之前和之后发送了多少条消息。我现在分两步执行此操作：

```
SELECT user_id, _date, COUNT(msg_id) AS cnt 
FROM messages WHERE _time <= '16:00'
GROUP BY user_id, _date ORDER BY user_id, _date ASC

user_id _date       cnt
-----------------------------
1       2011-01-22  1
1       2011-01-23  0
2       2011-01-22  0
2       2011-01-23  0
3       2011-01-22  1
3       2011-01-23  1

SELECT user_id, _date, COUNT(msg_id) AS cnt 
FROM messages WHERE _time > '16:00'
GROUP BY user_id, _date ORDER BY user_id, _date ASC

user_id _date       cnt
-----------------------------
1       2011-01-22  0
1       2011-01-23  2
2       2011-01-22  1
2       2011-01-23  1
3       2011-01-22  0
3       2011-01-23  1 
```

（实际上，顺便说一句，结果集中没有给出具有“0”值的行。我只是为了澄清而添加了它们）

我想将这两个输出合并为一个：

```
user_id _date       before16  after16
-------------------------------------
1       2011-01-22  1         0
1       2011-01-23  0         2
2       2011-01-22  0         1
2       2011-01-23  0         1
3       2011-01-22  1         0
3       2011-01-23  1         1 
```

但是，我不知道如何编写此查询。如果你这样做，你的帮助将不胜感激:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T18:47:28.333

试试这个：

```
SELECT 
    user_id, 
    _date, 
    SUM(_time <= '16:00') AS before16, 
    SUM(_time > '16:00') AS after16 
FROM messages 
GROUP BY user_id, _date
ORDER BY user_id, _date ASC 
```

# php - 使用 PHP 将 MySQL 查询的结果显示到表中

> ID：10111956
> 
> 赞同：1
> 
> 时间：2012-04-11T18:39:11.343
> 
> 标签：php, mysql, html, sql

这是一个时间表，它的作用是显示前一天的时间表以及谁预订了每个时段（这是一个广播电台。）

目前它按时间顺序显示谁预订了每个时段，但我希望它在每个结果旁边显示时间。查询输出 24 行（从午夜到 23:00）并且在每个插槽旁边我想说 (00:00, 01:00, 02:00, 03:00... 21:00, 22 :00 以此类推。）

这是我当前的代码：

```
<?php 
include("../config.php");

#// Timetable Clearup Variabls
$yesterday = strtotime('yesterday');
$yesterdow = date('l',$yesterday);

echo "<table width=\"580px\" class=\"board\" border=\>";

$order = "SELECT * FROM timetable WHERE day = '$yesterdow'";
$result = mysql_query($order);

// Error checking
if (!$result) {
  // output error, take other action
}
else {
  while ($row=mysql_fetch_array($result)){
     // Append all results onto an array
     $rowset[] = $row;
  }
}
    foreach ($rowset as $row) {
  echo "<tr><td>" . htmlspecialchars($row['username']) . "</td></tr>";
}

?> 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:51:09.813

我认为我们都在努力解决一个非常简单的问题。您已经`SELECT *`在查询中使用，因此您已经从表中获取所有三列。所以现在，您需要做的就是在表格的每一行中添加另一个单元格。

```
echo "<tr><td>" . htmlspecialchars($row['username']) . "</td><td>" . htmlspecialchars($row['time']) . "</td></tr>"; 
```

为了确保您以正确的顺序获取行，您应该`ORDER BY`在查询中添加一个：

```
SELECT * FROM timetable WHERE day = '$yesterdow' ORDER BY time 
```

如果您不指定`ORDER BY`子句，则无法保证您将按任何特定顺序获得结果。

最后一件事，你在行中循环了两次，这是不必要的。摆脱 foreach 循环，将 echo 直接放在 while 循环内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:50:35.330

试试这个：

```
foreach ($rowset as $row) {
echo "<tr><td>" . htmlspecialchars($row['username']) . htmlspecialchars($row['time'])"</td></tr>"; 
```

# python - 在 Python 中创建时间范围

> ID：10111961
> 
> 赞同：2
> 
> 时间：2012-04-11T18:39:47.163
> 
> 标签：python, datetime, date

因此，我希望将诸如上午 7:00 之类的输入作为开始时间，并说晚上 10:00 作为结束时间，然后比较一组时间（也是上午 8:00 的形式，3: 00 PM 等）查看这些时间是否在时间范围内。有没有一种好方法可以创建一个具有几个小时范围的“一天”（结束时间可能最晚到凌晨 4:00，所以我想我会从早上 6:00 到早上 5:59 而不是午夜- 晚上 11:59，如果可能的话）我可以检查时间吗？

例如：`starttime = 8:00 AM, endtime = 3:00 AM`, 和检查`time = 7:00 AM`将返回时间超出范围。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:47:38.990

我可能会使用[datetime](http://docs.python.org/library/datetime.html)库。在您的输入字符串上使用`strptime()`，然后您可以`datetime`直接比较对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T18:51:58.077

使用[`datetime`](http://docs.python.org/library/datetime.html)解析和比较功能：

```
from datetime import datetime, timedelta

def parse_time(s):
    ''' Parse 12-hours format '''
    return datetime.strptime(s, '%I:%M %p')

starttime = parse_time('8:00 AM')
endtime   = parse_time('3:00 AM')
if endtime < starttime:
   # add 1 day to the end so that it's after start
   endtime += timedelta(days=1)

checked_time = parse_time('7:00 AM')

# Can compare:
print starttime <= checked_time < endtime 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T18:42:37.737

将所有时间转换为 24 小时格式，将分钟和秒作为小时的分数，然后将它们作为数字进行比较，以查看时间是否位于间隔内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T18:47:46.620

Python 的 datetime.* 类已经支持比较：

```
>>> import datetime
>>> datetime.datetime(2012,10,2,10) > datetime.datetime(2012,10,2,11)
False
>>> datetime.datetime(2012,10,2,10) > datetime.datetime(2012,10,2,9)
True 
```

所以你所要做的就是声明一个 TimeRange 类，它有两个成员 startTime 和 endTime。那么“内部”函数可以很简单：

```
def inside(self, time):
    return self.startTime <= time and time <= self.endTime 
```

# sql - 加入两个具有相同行数但排序为 NULL 的表

> ID：10111972
> 
> 赞同：1
> 
> 时间：2012-04-11T18:40:17.573
> 
> 标签：sql, join, row-number

我需要连接两个具有相同行数的表。每个表有 1 列。连接没有可参考的连接列。我需要将它们并排加入，因为每个表都是单独排序的，因此数值按降序排列在顶部。

表收入者的收入值从 200K 到 0。我不能只选择使用 2 个案例，因为那样我的第一行的收入将超过 100K，但第二行中的前 20 个左右条目为 NULL。我希望第二行也按降序排序。

我在 CASE 中使用 ORDER BY 进行了查找，但没有这样的东西。我曾尝试阅读有关 row_number() 的内容，但这些示例似乎都不匹配或没有意义。

```
drop table #20plus
select
    case
        when Income >= 20000 AND Income < 100000
        then Income end as 'mula'
into #20plus
from Earners
order by mula desc

drop table #100plus
select
    case
        when Income >= 100000
        then Income end as 'dinero'
into #100plus
from Earners
order by dinero desc

Select A.dinero, B.mula
FROM #100plus as A JOIN #20plus as B
ON A.????? = B.????? 
```

由于 A 和 B 都按降序排序，将所有 NULL 移到底部，我可以参考什么来连接这两个表？

使用一个 SELECT 语句和 2 个 CASE 语句的先前输出

```
dinero             mula
2.12688e+007       NULL
1.80031e+007       NULL
1.92415e+006       NULL
…                  …
NULL               93530.7
NULL               91000
NULL               84500 
```

创建两个临时表后使用一个 SELECT 语句的所需输出

```
dinero          mula
2.12688e+007    93530.7
1.80031e+007    91000
1.92415e+006    84500
…               82500
NULL            82000
NULL            …
NULL            NULL 
```

这是Microsoft SQL Server 2008。我对此非常陌生，所以请尽可能简单明了地给出答案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:56:57.423

如果将表一分为二，使用 row_number() 以降序生成数字，则可以通过 row_number 连接它们。注意数字是如何产生的——row_number 是按顺序给出的。

```
; WITH _20plus AS (
     SELECT CASE WHEN income >= 20000 AND income < 100000 
                 THEN income 
             END AS Mula,
             Row_number() OVER (ORDER BY CASE WHEN income >= 20000 AND income
                < 100000 THEN income END DESC) rn
       FROM earners
     ),
     _100plus AS (
     SELECT CASE WHEN income >= 100000 THEN income 
             END AS Dinero,
            Row_number() OVER (ORDER BY CASE WHEN income >= 100000 
                                             THEN income END DESC) rn
       FROM earners
)
SELECT a.dinero,
       b.mula
FROM _100plus AS a
   INNER JOIN _20plus AS b
      ON a.rn = b.rn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:44:49.290

```
Select A.dinero, B.mula
FROM #100plus as A FULL OUTER JOIN #20plus as B
ON A.dinero = B.mula
ORDER BY A.dinero,B.mula; 
```

# objective-c - 如何从 NSHomeDirectory 加载图像

> ID：10111984
> 
> 赞同：0
> 
> 时间：2012-04-11T18:40:44.463
> 
> 标签：objective-c, ios, uiimage, save

所以，我目前正在通过这种方法将图像保存在我的 UIImageView 中：

```
- (void)applicationDidEnterBackground:(UIApplication*)application {

    NSString  *image1 = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/image1.png"];
    NSString  *image2 = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/image2.png"];
} 
```

图像保存得很好，但我不知道如何在 viewDidLoad 中设置 UIImageViews 图像。这是我一直在尝试的：

```
- (void)viewDidLoad
{
    self.imageView.image =[UIImage imageNamed:[(NSHomeDirectory *)Documents objectForKey:@"image1"]];

    self.imageView2.image =[UIImage imageNamed:[(NSHomeDirectory *)Documents objectForKey:@"image1"]];
} 
```

但是，显然这是行不通的。我无法理解这里的基础知识。任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T19:06:39.627

`-imageNamed:`如果命名图像尚未被缓存，该方法会在应用程序的主包中查找。从文档：

> 文件的名称。如果这是第一次加载图像，该方法会在应用程序的主包中查找具有指定名称的图像。

（参见[UIImage 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageNamed%3a "UIImage imageNamed:")）

你想要`-imageWithContentsOfFile:`。

# java - Xstream：如何使用数组反序列化 Xml

> ID：10111985
> 
> 赞同：0
> 
> 时间：2012-04-11T18:40:45.070
> 
> 标签：java, xstream

我有一个带有重复数组元素的 xml，我该如何反序列化它？

```
<root>
 <values>
   <val1>afa</val1>
   <val2>asgfasg</val2>
 </values>
 <values>
   <val1>hkjvlk</val1>
   <val2>sdsdgsdg</val2>
 </values>
 ...
</root>

 XStream xstream = new XStream(new DomDriver());
 xstream.alias("values", Inventory.class);
 InventoryResult inventory = (InventoryResult) xstream.fromXML(data.toString()); 
```

&

```
public class InventoryResult {
    private Inventory values;
} 
```

我尝试过 List、Inventory[]，但它们都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:07:13.030

首先，这只是整个 xml 文档的一部分吗？如是

```
<root>
    <values>
      <val1>afa</val1>
    </values>
    <values>
      <val2>hkjvlk</val2>
    </values>
  </root> 
```

这是序列化形式

```
values [] root = {new values("afa", null), new values(null, "hkjvlk")}; 
```

类值看起来像这样

```
class values{
    String val1;
    String val2;
    public values (String str, String str1){
        val1 = str;
        val2 = str1;                
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:11:38.150

我建议编写自己的转换器：http: [//x-stream.github.io/converter-tutorial.html](http://x-stream.github.io/converter-tutorial.html)

# bash - 在脚本中执行 su 后，expect 命令是否有效？

> ID：10111986
> 
> 赞同：0
> 
> 时间：2012-04-11T18:40:56.870
> 
> 标签：bash, ssh, expect, sudo, su

在脚本中执行 su 后，expect 命令是否有效？

是否期望通过模拟向终端输入击键来工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:23:22.767

是的，是的，尽管第二位（“模拟……击键”）过于简单化了。

# ios - Xcode 构建错误，arm-apple-darwin11-gcc-4.2.1 execvp：没有这样的文件或目录

> ID：10111987
> 
> 赞同：1
> 
> 时间：2012-04-11T18:41:04.123
> 
> 标签：ios, xcode, llvm, xcode4.3

升级到 Xcode 4.3.2 后。我收到了大量的构建错误。

其中一整行是错误代码255

```
gcc-4.2: error trying to exec '/usr/bin/arm-apple-darwin11-gcc-4.2.1': execvp: No such file or directory
Command /usr/bin/gcc-4.2 failed with exit code 255 
```

我注意到我的机器上没有`/usr/bin/arm-apple-darwin11-gcc-4.2.1`文件。这可能是问题的根源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T22:16:16.467

这个命令的输出是什么？

```
$ printenv | grep "CC=" 
```

它可能会尊重您的 C 编译器 (CC) 选择。我遇到了类似的错误（通过cocoapods）并做了一个

```
$ export CC= 
```

为我修好了。

# jquery - 从json返回中获取记录数Jquery

> ID：10111994
> 
> 赞同：0
> 
> 时间：2012-04-11T18:41:37.457
> 
> 标签：jquery

这是我的 json 返回

```
{"data":
{
"4":{"my data is here"}
,"3":{"my data is here"}
,"2":{"my data is here"}
,"1":{"my data is here"}
}
} 
```

我有四条记录，如何写 .length 来设置 var

这是我的每个 jquery

```
$.each(thedata.data, function() 
```

返回所有数据都很好，我想要获取 var 中的记录数量。

这不起作用。

```
var theRecordNumber = thedata.data.length; 
```

如何将变量设置为返回的记录数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:09:45.853

这不是一个有效的 JSON。`"4":{"my data is here"}`无效..

它应该是`"4":"my data is here"`或者`"4":["my data is here"]`

# r - 将具有相似名称的向量组合在一起

> ID：10111998
> 
> 赞同：2
> 
> 时间：2012-04-11T18:42:02.207
> 
> 标签：r

我不熟悉 R 代码，我试图解决这个问题但没有成功。请帮我！

如果我有这种矢量

```
> x1 <- c(5,7,9)
> x2 <- c(6,3,4)
....
> xn <- c(1,2,3) 
```

我喜欢把它们结合起来

> 结果 <- cbind(x1, x2, ..., xn)

这个**x1, x2, ..., xn**怎么说？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T18:55:00.857

您可以`ls`与模式参数一起使用

```
x.data <- ls(pattern='^x.?') 
```

这将返回一个名称列表，可用于`get`和`sapply`

```
sapply(x.data, get)
#  x1 x2 xn
# [1,]  5  6  1
# [2,]  7  3  2
# [3,]  9  4  3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T18:52:04.490

尽管可以解决该问题，但真正的解决方案可能是使用另一种方式来存储向量。你是怎么得到它们的？

通常，当您拥有多个向量时，最好将向量放在列表结构中，而不是作为单独的全局变量。

这是一种方法

```
x <- list(x1 = c(5,7,9), x2=c(6,3,4), xn=c(1,2,3))

x$x2 # the x2 vector
str(x) # prints an overview of x

# combine them into a matrix
do.call(cbind, x) 
```

这是将一堆向量从文件读入列表的一种方法：

```
# Read in 10 vectors into x
x <- lapply(1:10, function(i) scan(paste("myvec",i,".txt", sep=""))
x[[3]] # the vector in myvec3.txt
str(x) # prints an overview of x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T18:51:30.230

`c(x1, x2, ... xn)`

```
> x1 <- c(5,7,9)
> 
> x2 <- c(6,3,4)
>
> xn <- c(1,2,3)
> c(x1, x2, xn)
[1] 5 7 9 6 3 4 1 2 3
> 
> matrix(c(x1, x2, xn), ncol=3)
     [,1] [,2] [,3]
[1,]    5    6    1
[2,]    7    3    2
[3,]    9    4    3
> 
```