# StackOverflow 问答 11799000-11799999

# mysql - MYSQL 语法错误 - 为什么会这样？

> ID：11799004
> 
> 赞同：2
> 
> 时间：2012-08-03T15:44:09.880
> 
> 标签：mysql, sql, syntax

我在我的 php 脚本中使用 mysql 超过 6 年，但我从未遇到过这样的错误。

当我执行这个 SQL 命令时：

```
SELECT `discount_items`.* FROM `discount_items` WHERE (position=1) AND (active=1) AND (end<=1344007212) AND (show=1) LIMIT 1 
```

它向我抛出了这个错误

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'show=1) LIMIT 1' at line 1 
```

表结构为：

```
CREATE TABLE IF NOT EXISTS `discount_items` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` text CHARACTER SET utf8 COLLATE utf8_czech_ci NOT NULL,
  `image` text CHARACTER SET utf8 COLLATE utf8_czech_ci NOT NULL,
  `discount` float NOT NULL,
  `price1` float NOT NULL,
  `price2` float NOT NULL,
  `bought` int(11) NOT NULL,
  `target` int(11) NOT NULL,
  `desc` text CHARACTER SET utf8 COLLATE utf8_czech_ci NOT NULL,
  `link` text CHARACTER SET utf8 COLLATE utf8_czech_ci NOT NULL,
  `active` tinyint(1) NOT NULL,
  `start` int(11) NOT NULL,
  `end` int(11) NOT NULL,
  `position` int(11) NOT NULL DEFAULT '1',
  `show` int(11) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1; 
```

我不明白有什么问题。显然，“显示”字段会导致问题，但我已经尝试了一切......（显示字段一定有问题，因为：

```
SELECT `discount_items`.* FROM `discount_items` WHERE (show=1) AND (active=1) AND (end<=1344007212) AND (position=1) LIMIT 1 
```

投掷

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'show=1) AND (active=1) AND (end&lt;=1344007212) AND (position=1) LIMIT 1' at line 1 
```

所以问题转移到了显示领域。

如果这是常见问题，我很抱歉，但我用谷歌搜索却一无所获。这个错误太全球化了，对我没有任何解释。

感谢您的帮助和提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T15:46:43.620

`show`是 MySQL 的保留字。如果要使用它来引用字段名称，则必须在其周围使用反引号，如下所示：

```
SELECT `discount_items`.*
FROM `discount_items`
WHERE
    (position=1)
    AND (active=1)
    AND (end<=1344007212)
    AND (`show`=1) /* backticks added here */
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T15:46:11.637

`show`是保留字。要么改变它，要么把它放在蜱虫中

```
 SELECT `discount_items`.* FROM `discount_items` WHERE (position=1) AND (active=1) AND (end<=1344007212) AND (`show`=1) LIMIT 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T15:47:26.850

`show`是 MySQL 的保留字。将其括在反引号中以使其工作。

# linux - pkgsrc、端口、portage、macports 等

> ID：11799009
> 
> 赞同：0
> 
> 时间：2012-08-03T15:44:17.070
> 
> 标签：linux, package

我想知道我们是否可以在 linux/unix 操作系统环境和软件安装方面减少一点点的工作量。我的立场是，关于 $subject 有太多多余的工作。

我一直在思考如何将 $subject 的构建系统与一些下一个“阶段构建工具”连接起来，例如：easybuild (1) & openbuildservice (2); 阅读下文了解更多详情。

更具体地说，我上周能够获取 pkgsrc 的存储库，通过一个微小的“pkg2eb”脚本处理 Makefile 并生成用于 easybuild 的 *.eb 文件，然后用它们提供许多并行 gcc 编译。那个“盲目驱动的过程”最终以超过 600 次成功构建，即。这些是只需要“wget/configure/make/make install”的软件包；第一次运行还不错，只是想知道它是否可以做得更好。

所以：

根据您的经验，哪个操作系统具有最干净/最精简的 pkgsrc/port 结构，可以获取并提供给其他外部工具？这与拥有最多可用软件包的不同！

您是否听说过任何类似的尝试从例如大规模生产包装的努力。一个结构化的公共源列表？（我的意思是，以跨不同构建系统的可转移方式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:42:11.903

所以，

在这里可以看到很多相关信息：http: [//www.mancoosi.org/edos/packages/](http://www.mancoosi.org/edos/packages/) # 各种包装格式的冗长描述

这一张显示了更高级别的图片： http: [//www.mancoosi.org/edos/suggestions/](http://www.mancoosi.org/edos/suggestions/)（尤其是2.1.1表达能力的缺点）

无论如何，要回答原始问题，目前最好的选择是：

*   RPM 的 .spec 文件
*   DEB 控制文件
*   pkgsrc; 可能，但仍然需要一些hackery
*   搬运；相当干净，区分 DEPEND 和 RDEPEND
*   麦克波特；易于解析；非常详细的依赖方面
*   港口；像 pkgsrc; 定义了多个依赖项

# ruby-on-rails - Has_many accept_nested_attributes 不能批量分配属性

> ID：11799011
> 
> 赞同：1
> 
> 时间：2012-08-03T15:44:18.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我在设计的自定义注册中遇到了表单问题。此表单需要同时包含用户和业务模型信息，我将在表单上同时创建它们。重要的是，这不能是一个多步骤的注册表单 - 作为要求的一部分，我需要同时填写用户模型和业务模型。

我有以下型号：

```
user.rb
class User < ActiveRecord::Base
  has_many :businessusers, :include => :business
  has_many :businesses, :through => :businessusers
  accepts_nested_attributes_for :businessusers
  attr_accessible :email, :password, :password_confirmation, :remember_me, :name, :role, :businessusers

business.rb
class Business < ActiveRecord::Base
  has_many :businessusers
  has_many :users, :through => :businessusers

businessuser.rb
class Businessuser < ActiveRecord::Base
  belongs_to :business
  belongs_to :user
end

businessusers migration
create_table :businessusers do |t|
  t.integer :user_id
  t.integer :business_id
end 
```

在我的注册表单中，我有以下代码：

```
Business Information
<br>
<%= f.fields_for :businessusers do |business_form| %>
<%= business_form.input :name %>
<%= business_form.input :address_line1 %>
<%= business_form.input :address_line2 %>
<%= business_form.input :city %> 
```

最后，这是我的控制器： `custom_registration_controller.rb`

```
def create
@user=User.new(params[:user])
@business = @user.businesses.build(params[:business]) unless params[:business]  [:name].blank?
end 
```

编辑：我已经解决了质量分配属性问题，但现在我有另一个问题。

有谁知道我要去哪里错了？之前，我在 businessusers 表上禁用了 id。但这给了我一个错误，说我需要桌子上的主 ID。因此，当我允许该字段时`:id`，它会使表单不再具有业务字段。

谢谢！

# html - 简单的 HTML 电子邮件并不那么简单

> ID：11799012
> 
> 赞同：1
> 
> 时间：2012-08-03T15:44:23.030
> 
> 标签：html

我正在尝试制作一个 html 电子邮件，其背景中有一个 jpg，上面有一个 jpg，顶部是一个链接，但是我只能让顶部图片出现在我的主页面中，并且它的位置不是我想要的位置，这是代码，它可以像普通的 html 页面一样完美地工作

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <!-- InstanceBegin template="/Templates/cmcb.dwt" codeOutsideHTMLIsLocked="false" -->
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>Chamerlain McBain</title>
    <div class="wholepage">
        <div class="header">
            <div class="logo" style="width: 990px; height: 990px">
                <div class="headerimages">
                    <div style="position:absolute;  top:0px; style=" width:
                    28px; height: 28px;">
                    <img src="http://www.mockcourt.org.uk/CMCB%20Campaign%20Aug12.jpg" width="990" height="990"/></a>
                </div>
                <div class="headerimages">
                    <div style="position:absolute; left:142px; top:564px; style=" width:
                    28px; height: 28px;">
                    <a href="http://www.mockcourt.org.uk">
                        <img src="http://www.mockcourt.org.uk/here.jpg" width="88" height="50"/></a>
                </div>
                </body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:49:40.923

谈到 HTML 电子邮件，尽管我不想这么说，但[表格布局是您的朋友](http://www.campaignmonitor.com/blog/post/2491/tables-in-html-emails-nesting/)。

与 CSS 样式相比，跨电子邮件客户端的表格呈现更加一致，因此如果您希望支持大多数客户端，我建议您使用这些。

正如一些评论还指出的那样，我建议清理您的 HTML 以使其有效。这也将有助于电子邮件客户端能够理解您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:49:53.200

HTML 电子邮件与 Web HTML 非常不同，事件以及各种客户端 - Outlook、Notes、Hotmail - 都处理它有点不同。

这里有一些资源可以帮助您正确设计电子邮件。

*   设计指南 - [http://24ways.org/2009/rock-solid-html-emails](http://24ways.org/2009/rock-solid-html-emails)
*   支持的 CSS - [http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

# sql - 从现在到前一周的返回记录

> ID：11799014
> 
> 赞同：1
> 
> 时间：2012-08-03T15:44:27.477
> 
> 标签：sql, oracle

我在 oracle 中有以下 SQL 查询：

```
SELECT * FROM
(
  SELECT s.singleid,s.titel,a.naam,s.taal,SUM(b.aantal) AS "AANTAL VERKOCHT"
  FROM singles s
  JOIN artiesten a on a.artiestid = s.artiestid
  JOIN bestellingen b on b.singleid = s.singleid
  GROUP BY s.singleid,s.titel,a.naam,s.taal,b.datum
  ORDER BY sum(b.aantal) DESC
)

WHERE ROWNUM <= 5 
```

这可行，但我只需要返回 b.datum 现在和前一周之间的记录。
我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:51:24.567

您应该能够在 where 中添加[BETWEEN](http://www.techonthenet.com/sql/between.php/)子句：

```
WHERE b.datum between SYSDATE - 6 AND SYSDATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:09:32.477

您可能只想从 BESTELLINGEN 表中提取 [datum] 大于或等于（今天午夜减去 7 天）且小于或等于“现在”（或小于明天午夜，根据您的要求）。我可能会将这组 Bestellingen 行设为内联视图并将其他表加入其中，然后进行分组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T15:50:46.023

在 SQL Server 中，语法是：

AND (b.datum > DATEADD(week, -1, GetDate()) 和 b.datum < GetDate())

我会假设 Oracle 中的语法相同或非常相似。

# c# - 具有复合 ID 的子父查询对子执行不必要的多个查询

> ID：11799017
> 
> 赞同：1
> 
> 时间：2012-08-03T15:44:40.753
> 
> 标签：c#, .net, fluent-nhibernate, fluent-nhibernate-mapping

我对这种情况有一个非常奇怪的问题。

这是父对象（订单标题，IEntity 是一个空接口）：

```
public class OrderEntity : IEntity
{
    public virtual int prg_ordine { get; set; }
    public virtual int num_anno { get; set; }
    public virtual int num_doc { get; set; }
    public virtual String num_doc_esteso { get; set; }
    public virtual DateTime? dat_doc { get; set; }
    public virtual String cod_clifor_c { get; set; }
    public virtual String rag_soc { get; set; }
    public virtual DateTime? dat_evasione { get; set; }
    public virtual decimal qta_peso_lordo_kg { get; set; }
    public virtual decimal qta_peso_netto_kg { get; set; }
    public virtual decimal qta_totale { get; set; }
    public virtual String ind_sped { get; set; }
    public virtual String ind_sped_div { get; set; }
    public virtual String rag_soc_div { get; set; }
    public virtual String cod_agente { get; set; }
    public virtual String des_agente { get; set; }
    public virtual String cod_pag { get; set; }
    public virtual String des_pag { get; set; }
    public virtual String ind_stato_evas { get; set; }
    public virtual int cod_commessa_num { get; set; }
    public virtual String des_num_esterno { get; set; }

    public virtual ClientEntity client { get; set; }
    public virtual ICollection<OrderItemEntity> orderItems { get; set; }
} 
```

这是子对象（订单行）：

```
public class OrderItemEntity  : IEntity
{
    public virtual int prg_ordine  { get; set; }
    public virtual int prg_ordine_riga { get; set; }
    public virtual String cod_art_completo { get; set; }
    public virtual String cod_clifor_c { get; set; }
    public virtual String rag_soc { get; set; }
    public virtual int num_doc { get; set; }
    public virtual String num_doc_esteso { get; set; }
    public virtual DateTime? dat_doc { get; set; }
    public virtual String cod_art { get; set; }
    public virtual String tipo_art { get; set; }
    public virtual int prg_art { get; set; }
    public virtual String ind_tiporiga { get; set; }
    public virtual String cod_um_doc { get; set; }
    public virtual String des_articolo_riga { get; set; }
    public virtual decimal qta_daevadere { get; set; }
    public virtual decimal qta_evasa { get; set; }
    public virtual decimal qta_ordine { get; set; }
    public virtual DateTime? dat_evasione { get; set; }
    public virtual DateTime? dat_evas_riga { get; set; }
    public virtual String note { get; set; }
    public virtual bool gestisci_pezzatura { get; set; }
    public virtual int numero_pezzi { get; set; }
    public virtual decimal quantita_pezzo { get; set; }
    public virtual string commessa { get; set; }
    public virtual int num_riga { get; set; }

    public virtual ArticoloDisponibilitaEntity articoloDisponibilita { get; set; }

    public virtual OrderEntity order { get; set; }

    public override bool Equals(object obj)
    {
        return base.Equals(obj);
    }

    public override int GetHashCode()
    {
        return base.GetHashCode();
    }
} 
```

这些是引用的另外两个对象：

```
public class ClientEntity : IEntity
{
    public virtual String cod_clifor { get; set; }
    public virtual String des_ragsoc { get; set; }
    public virtual String indirizzo { get; set; }
    public virtual String codice_e_descrizione
    {
        get
        {
            return cod_clifor + " - " + des_ragsoc;
        }
    }

    public virtual ICollection<OrderEntity> orders { get; set; }
}

public class ArticoloDisponibilitaEntity :IEntity
{
    public virtual String cod_art_completo { get; set; }
    public virtual decimal qta_esistente { get; set; }
    public virtual decimal qta_in_distinte_lavorazione { get; set; }
    public virtual decimal qta_in_distinte_aperte { get; set; }

    public virtual decimal qta_libera_alla_vendita()
    {
        var ret = qta_esistente - qta_in_distinte_aperte - qta_in_distinte_lavorazione;

        if(ret < 0)
            ret = 0;
        return ret;
    }
} 
```

以下是 Fluent nHibernate 映射类：

```
public class OrderEntityMap : ClassMap<OrderEntity>
{
    public OrderEntityMap()
    {
        this.Id(x => x.prg_ordine);

        this.Map(x => x.num_anno);
        this.Map(x => x.num_doc);
        this.Map(x => x.num_doc_esteso);
        this.Map(x => x.dat_doc);
        this.Map(x => x.cod_clifor_c);
        this.Map(x => x.rag_soc);
        this.Map(x => x.dat_evasione);
        this.Map(x => x.qta_peso_lordo_kg);
        this.Map(x => x.qta_peso_netto_kg);
        this.Map(x => x.qta_totale);
        this.Map(x => x.ind_sped);
        this.Map(x => x.ind_sped_div);
        this.Map(x => x.rag_soc_div);
        this.Map(x => x.cod_agente);
        this.Map(x => x.des_agente);
        this.Map(x => x.cod_pag);
        this.Map(x => x.des_pag);
        this.Map(x => x.ind_stato_evas);
        this.Map(x => x.cod_commessa_num);
        this.Map(x => x.des_num_esterno);

        References<ClientEntity>(x => x.client, "cod_clifor_c").Not.Nullable();
        this.HasMany<OrderItemEntity>(x => x.orderItems).KeyColumn("prg_ordine").Not.LazyLoad().Cascade.All();

        this.Table("VW_E_OrdiniTestate");
        this.ReadOnly();
    }
}

public class OrderItemEntityMap : ClassMap<OrderItemEntity>
{
    public OrderItemEntityMap()
    {
        this.CompositeId()
            .KeyProperty(x => x.prg_ordine, "prg_ordine_riga")
            .KeyReference(x => x.order, "prg_ordine");

        this.Map(x => x.prg_ordine  );
        this.Map(x => x.prg_ordine_riga );
        this.Map(x => x.cod_art_completo );
        this.Map(x => x.cod_clifor_c );
        this.Map(x => x.rag_soc );
        this.Map(x => x.num_doc );
        this.Map(x => x.num_doc_esteso );
        this.Map(x => x.dat_doc );
        this.Map(x => x.cod_art );
        this.Map(x => x.tipo_art );
        this.Map(x => x.prg_art );
        this.Map(x => x.ind_tiporiga );
        this.Map(x => x.cod_um_doc );
        this.Map(x => x.des_articolo_riga );
        this.Map(x => x.qta_daevadere );
        this.Map(x => x.qta_evasa );
        this.Map(x => x.qta_ordine );
        this.Map(x => x.dat_evasione );
        this.Map(x => x.dat_evas_riga );
        this.Map(x => x.note );
        this.Map(x => x.gestisci_pezzatura );
        this.Map(x => x.numero_pezzi );
        this.Map(x => x.quantita_pezzo);
        this.Map(x => x.commessa);
        this.Map(x => x.num_riga);

        References<ArticoloDisponibilitaEntity>(x => x.articoloDisponibilita, "cod_art_completo").Not.Nullable();
        References<OrderEntity>(x => x.order, "prg_ordine").Not.Nullable();

        this.Table("VW_E_OrdiniRighe");
        this.ReadOnly();
    }
}

public class ClientEntityMap : ClassMap<ClientEntity>
{
    public ClientEntityMap()
    {
        this.Table("VW_E_Clienti");

        this.Id(x => x.cod_clifor);

        this.Map(x=> x.des_ragsoc);
        this.Map(x => x.indirizzo);

        this.HasMany(x => x.orders).KeyColumn("cod_clifor_c");
    }
}

public class ArticoloDisponibilitaEntityMap : ClassMap<ArticoloDisponibilitaEntity>
{
    public ArticoloDisponibilitaEntityMap()
    {
        this.Table("VW_E_Articoli_Disp");
        this.Id(x => x.cod_art_completo);

        this.Map(x => x.qta_esistente);
        this.Map(x => x.qta_in_distinte_aperte);
        this.Map(x => x.qta_in_distinte_lavorazione);

        this.ReadOnly();
    }
} 
```

这个查询：

```
 return All().FetchMany(x => x.orderItems).Fetch(x => x.client).Where(x => x.cod_clifor_c == filters.clientId).ToList(); 
```

导致执行此查询：

```
select orderentit0_.prg_ordine         as prg1_11_0_,
       orderitems1_.prg_ordine_riga    as prg1_12_1_,
       orderitems1_.prg_ordine         as prg2_12_1_,
       cliententi2_.cod_clifor         as cod1_3_2_,
       orderentit0_.num_anno           as num2_11_0_,
       orderentit0_.num_doc            as num3_11_0_,
       orderentit0_.num_doc_esteso     as num4_11_0_,
       orderentit0_.dat_doc            as dat5_11_0_,
       orderentit0_.cod_clifor_c       as cod6_11_0_,
       orderentit0_.rag_soc            as rag7_11_0_,
       orderentit0_.dat_evasione       as dat8_11_0_,
       orderentit0_.qta_peso_lordo_kg  as qta9_11_0_,
       orderentit0_.qta_peso_netto_kg  as qta10_11_0_,
       orderentit0_.qta_totale         as qta11_11_0_,
       orderentit0_.ind_sped           as ind12_11_0_,
       orderentit0_.ind_sped_div       as ind13_11_0_,
       orderentit0_.rag_soc_div        as rag14_11_0_,
       orderentit0_.cod_agente         as cod15_11_0_,
       orderentit0_.des_agente         as des16_11_0_,
       orderentit0_.cod_pag            as cod17_11_0_,
       orderentit0_.des_pag            as des18_11_0_,
       orderentit0_.ind_stato_evas     as ind19_11_0_,
       orderentit0_.cod_commessa_num   as cod20_11_0_,
       orderentit0_.des_num_esterno    as des21_11_0_,
       orderitems1_.cod_art_completo   as cod3_12_1_,
       orderitems1_.cod_clifor_c       as cod4_12_1_,
       orderitems1_.rag_soc            as rag5_12_1_,
       orderitems1_.num_doc            as num6_12_1_,
       orderitems1_.num_doc_esteso     as num7_12_1_,
       orderitems1_.dat_doc            as dat8_12_1_,
       orderitems1_.cod_art            as cod9_12_1_,
       orderitems1_.tipo_art           as tipo10_12_1_,
       orderitems1_.prg_art            as prg11_12_1_,
       orderitems1_.ind_tiporiga       as ind12_12_1_,
       orderitems1_.cod_um_doc         as cod13_12_1_,
       orderitems1_.des_articolo_riga  as des14_12_1_,
       orderitems1_.qta_daevadere      as qta15_12_1_,
       orderitems1_.qta_evasa          as qta16_12_1_,
       orderitems1_.qta_ordine         as qta17_12_1_,
       orderitems1_.dat_evasione       as dat18_12_1_,
       orderitems1_.dat_evas_riga      as dat19_12_1_,
       orderitems1_.note               as note12_1_,
       orderitems1_.gestisci_pezzatura as gestisci21_12_1_,
       orderitems1_.numero_pezzi       as numero22_12_1_,
       orderitems1_.quantita_pezzo     as quantita23_12_1_,
       orderitems1_.commessa           as commessa12_1_,
       orderitems1_.num_riga           as num25_12_1_,
       orderitems1_.prg_ordine         as prg2_0__,
       orderitems1_.prg_ordine_riga    as prg1_0__,
       cliententi2_.des_ragsoc         as des2_3_2_,
       cliententi2_.indirizzo          as indirizzo3_2_
    from   VW_E_OrdiniTestate orderentit0_
       left outer join VW_E_OrdiniRighe orderitems1_
         on orderentit0_.prg_ordine = orderitems1_.prg_ordine
       left outer join VW_E_Clienti cliententi2_
         on orderentit0_.cod_clifor_c = cliententi2_.cod_clifor
where  orderentit0_.cod_clifor_c = '000030' /* @p0 */ 
```

这很好。

问题是，在上述查询之后，然后执行一个查询 PER ORDER ROW，如下所示：

```
SELECT orderiteme0_.prg_ordine_riga    as prg1_12_0_,
       orderiteme0_.prg_ordine         as prg2_12_0_,
       orderiteme0_.cod_art_completo   as cod3_12_0_,
       orderiteme0_.cod_clifor_c       as cod4_12_0_,
       orderiteme0_.rag_soc            as rag5_12_0_,
       orderiteme0_.num_doc            as num6_12_0_,
       orderiteme0_.num_doc_esteso     as num7_12_0_,
       orderiteme0_.dat_doc            as dat8_12_0_,
       orderiteme0_.cod_art            as cod9_12_0_,
       orderiteme0_.tipo_art           as tipo10_12_0_,
       orderiteme0_.prg_art            as prg11_12_0_,
       orderiteme0_.ind_tiporiga       as ind12_12_0_,
       orderiteme0_.cod_um_doc         as cod13_12_0_,
       orderiteme0_.des_articolo_riga  as des14_12_0_,
       orderiteme0_.qta_daevadere      as qta15_12_0_,
       orderiteme0_.qta_evasa          as qta16_12_0_,
       orderiteme0_.qta_ordine         as qta17_12_0_,
       orderiteme0_.dat_evasione       as dat18_12_0_,
       orderiteme0_.dat_evas_riga      as dat19_12_0_,
       orderiteme0_.note               as note12_0_,
       orderiteme0_.gestisci_pezzatura as gestisci21_12_0_,
       orderiteme0_.numero_pezzi       as numero22_12_0_,
       orderiteme0_.quantita_pezzo     as quantita23_12_0_,
       orderiteme0_.commessa           as commessa12_0_,
       orderiteme0_.num_riga           as num25_12_0_
FROM   VW_E_OrdiniRighe orderiteme0_
WHERE  orderiteme0_.prg_ordine_riga = 1 /* @p0 */
       and orderiteme0_.prg_ordine = 22 /* @p1 */ 
```

这是出乎意料和不受欢迎的；我怀疑映射中有问题，但对我来说似乎一切都很好。关于为什么会发生这种情况以及如何避免它的任何提示？

谢谢，马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:29:35.863

我认为你的问题在于子实体中 GetHashCode 方法的实现，当你有一个复合 id 时，你必须告诉 Nh 如何重新调整实体。

尝试实现这两种方法：

```
 public override bool Equals(object obj)
    {
        OrderItemEntity objfrom = (OrderItemEntity)obj;

        return ((this.prg_ordine == objfrom.prg_ordine) && (this.prg_ordine_riga == objfrom.prg_ordine_riga));
    }

    public override int GetHashCode()
    {
        unchecked
        {
            return ((this.prg_ordine * 100000) + this.prg_ordine_riga);
        } 
```

再见马可

# java - 在Java中如何匹配不是“[”的字符？

> ID：11799025
> 
> 赞同：2
> 
> 时间：2012-08-03T15:45:09.890
> 
> 标签：java, regex

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:49:49.067

`[`在否定字符类中转义。尽管在字符类中这不应该是必需的，但显然 Java 存在问题，并且它不会改变字符类的含义来转义在字符类中不应该具有特殊含义的字符。

尝试以下操作：

```
(\[.+?\][^\[]+) 
```

或者对于 Java 代码：

```
Pattern pattern = Pattern.compile(“(\\[.+?\\][^\\[]+)”); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:49:40.813

您需要像之前转义它们一样转义方括号：

```
(\\[.+?\\][^\\[]+) 
```

由于 RegEx 解析器将 [^[] 视为具有未闭合的括号，因此导致运行时异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:50:00.137

您需要排除括号，这应该有效：

```
[^\\[] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T15:50:16.367

Java 实现似乎有一个错误。

通常，正则表达式不需要您转义它，但无论如何都要尝试转义它。

```
(\[.+?\][^\[]+)
"(\\[.+?\\][^\\[]+)" 
```

转义特殊字符可能被认为是一种很好的做法，即使它们不需要。它还有助于避免这样的错误。

# list - Unique Column in WSS 3.0 List

> ID：11799030
> 
> 赞同：0
> 
> 时间：2012-08-03T15:45:27.817
> 
> 标签：list, sharepoint, wss-3.0

I am trying to implement a feature in a list from WSS3.0. Basically I have a list and I want to add items to the list but I want to check first if there is already any item with the same value in a specific column.

I have a column named "My Key Field" and I want the values in this field to be unique. So, for example, if I have a record in the list where "My Key Field=65 210" I should not be able to add a new item when a users inserts the same value for the "My Key Field".

Any ideas on how to do this? A simple solution would be great considering my lack of skills concerning to Sharepoint programming....but I am flexible and I can learn.

Thanks for your attention!

Regards, Aganju

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:51:36.400

SPServices 库为此提供了一个方法，称为[SPRequireUnique](http://spservices.codeplex.com/wikipage?title=%24%28%29.SPServices.SPRequireUnique&referringTitle=Documentation)。它依赖于 SharePoint Web 服务。

作为记录，您可以在 SP 2010 中开箱即用地获得此功能。

# javascript - Cue different Javascript/JQuery revents as window resizes below/above a set width

> ID：11799031
> 
> 赞同：2
> 
> 时间：2012-08-03T15:45:28.720
> 
> 标签：javascript, jquery, events, resize, window

I'm trying to set up a JavaScript + JQuery to change some elements' positions if the browser window is resized past a certain width (800px) in either direction.

There are three states:

1.  Browser width > 800px, menu open
2.  Browser width <= 800px, menu closed
3.  Browser width <= 800px, menu open

The menu Open/Close operation is handled by an onClick event for divs that are hidden when the browser width exceeds 800px (#menushow and #menuhide).

What I need is for the menu options to reset to State 1 is the browser is resized to above 800px in width, and State 2 if the browser is resized to below 800px in width.

The menu elements consist of a < nav id="access" > element, and the decorative < div id="sibebar-bottom" > element.

The code I have at the moment is this:

```
window.onresize = function(event) {  
if ( $(window).width() > 800){ 
    document.getElementById('menushow').style.display = "none";
    document.getElementById('menuhide').style.display = "none";
    $( "#sidebar-bottom" ).removeClass('closemenu')
    $( "#sidebar-bottom" ).addClass('openmenu')
    $( "#sidebar-bottom" ).animate({top: "570px"}, 300, 'easeOutExpo')
    $( "#access" ).animate({top: "0px"}, 300, 'easeOutExpo')  
} 
if ( $(window).width() <= 800 ){ 
    document.getElementById('menushow').style.display = "block";
    document.getElementById('menuhide').style.display = "none";
    $( "#sidebar-bottom" ).removeClass('closemenu')
    $( "#sidebar-bottom" ).addClass('openmenu')
    $( "#sidebar-bottom" ).animate({top: "103px"}, 300, 'easeOutExpo')
    $( "#access" ).animate({top: "-477px"}, 300, 'easeOutExpo')  
} 

} 
```

However, when I resize the window from >800px to smaller, nothing moves. And if I resize from <800px to >800px, I get an animation loop that hides and shows the menu repeatedly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:48:43.150

您的第二个 if 语句的条件**大于**或等于 800，我假设它应该**小于**或等于 800。

# javascript - expressjs 文件上传，检查是否确实有文件发送，指定最大文件大小并保留其名称

> ID：11799033
> 
> 赞同：6
> 
> 时间：2012-08-03T15:45:43.790
> 
> 标签：javascript, node.js, file-upload, express

使用 expressjs 大约一个月了，我偶然发现了文件上传的问题。尽管咨询了 Google 和各种博客，但我未能找到以下三个问题的答案：

我必须做什么/我必须选择 bodyParser 的哪些设置才能：

1.  确保确实上传了一个文件（目前，在不选择文件的情况下提交表单时，会创建一个空文件）。

2.  我在哪里可以指定文件允许具有的最大大小的值？

3.  如何省略文件的重命名？

目前，我在我的 express (v. 3.0.0) 应用程序中包含 bodyParser 并具有以下选项：

```
{keepExtensions: true, uploadDir: __dirname + '/public/uploads'} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T00:24:39.147

我最近遇到了类似的问题。对于问题 #2，请查看[http://www.senchalabs.org/connect/middleware-limit.html](http://www.senchalabs.org/connect/middleware-limit.html)

`app.use(express.limit('4M')); // in your app.configure()`

```
app.post('/upload', function(req, res) {
    var fs = require('fs'),
        file = req.files.myfile; //your file field;

    if(file.size === 0) { // question #1
        fs.unlinkSync(file.path);
        res.redirect('/error?');
    } else { //question #3
        var fn = file.path.split('/');
        fs.rename(file.path, file.path.replace(fn[fn.length-1], file.name));
        res.redirect('/success?');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-19T09:24:36.417

关于您的关注

> 确保确实上传了一个文件（目前，在不选择文件的情况下提交表单时，会创建一个空文件）。

经过长时间的搜索，我找到了一个很好的解决方案

首先你需要安装 [node-formidable](https://github.com/felixge/node-formidable)

然后在包含库之后，首先检查文件是否上传

```
var form = new formidable.IncomingForm();

form.parse(req, function(err, fields, files) {
  if (Object.keys(files).length !== 0) {
    console.log("File is exist")
  } else {
    console.log("File is not exist")
  }
}); 
```

关于尺寸，您可以检查一下。

```
form.maxFieldsSize = 2 * 1024 * 1024; 
```

最好的祝福。

阿卜杜勒阿齐兹努尔

# mysql - PHP MySQL - 按顺序分组。组内订购

> ID：11799045
> 
> 赞同：0
> 
> 时间：2012-08-03T15:46:22.627
> 
> 标签：mysql, join, group-by, sql-order-by

这是我的桌子

```
+----+---------------+-------+
| id | product name  | cat   |
+----+---------------+-------+
| 0  | product A     | 1     |
| 1  | product B     | 2     |
| 2  | product C     | 1     |
| 3  | product D     | 3     |
+----+---------------+-------+ 
```

我想要实现的输出是：

产品A
产品C
产品B
产品D

这是我正在使用的查询：

```
SELECT * FROM products GROUP BY cat ORDER BY id ASC 
```

现在我对 MySQL 非常缺乏经验，简而言之，我正在尝试对我的结果进行分组，并在他们的组中对它们进行排序。

上面的查询（逐字）给了我一个语法错误。

经过一番研究，（看到一些类似问题的帖子）我想我可能需要使用 JOIN 来完成这个功能。但我不知道从哪里开始。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:49:46.517

不确定你需要在这里分组。试试这个：

SELECT * from products ORDER BY cat ASC, id ASC

这首先按 cat 排序，然后按 id 排序。请注意，您应该在 cat 字段上有一个索引来优化此查询（我已经假设 id 是主键）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T15:50:33.497

在我看来，你需要

```
SELECT * FROM products ORDER BY cat ASC 
```

得到你正在寻找的输出。

# ruby-on-rails - rspec 似乎得到了不同的标题

> ID：11799047
> 
> 赞同：0
> 
> 时间：2012-08-03T15:46:31.263
> 
> 标签：ruby-on-rails, testing, rspec

我是 rspec 的新手，在我的系统（OS X，10.7.4）上运行时遇到了很多麻烦。我终于让 rspec 运行了，但是我在不应该出现错误的时候遇到了错误。

下面的标题标题的简单测试

```
 it "should have the right title" do
    get 'home'
    response.should have_selector("title",:content=>"YOUniversity Admin Home")
  end 
```

失败：

```
1) AdminController GET 'home' should have the right title
   Failure/Error: response.should have_selector("title",:content=>"YOUniversity Admin Home")
   expected following output to contain a <title>YOUniversity Admin Home</title> tag:
   <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
 # ./spec/controllers/admin_controller_spec.rb:13 
```

该应用程序在运行时会显示正确的标题。然而，布局似乎有一个不同的标题 DOCTYPE 字段。这是布局中的标题：

```
<!DOCTYPE html>
<html>
<head>
  <title>YOUniversity Admin <%= @title %></title>
<%= stylesheet_link_tag    "application", :media => "all" %>
<!--[if IE 6]<%= stylesheet_link_tag 'ie6' %><![endif]-->
<!--[if IE 7]><%= stylesheet_link_tag 'ie7' %><![endif]-->
  <%= javascript_include_tag "application" %>
<%= csrf_meta_tags %>
</head> 
```

请注意，DOCTYPE 不包括响应中显示的所有其他信息。

我很困惑这怎么会发生。我已经通过运行应用程序验证了标题是正确的。

有任何想法吗？

-迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:17:19.367

你需要把

```
render_views 
```

在第一个描述块之后。默认情况下，规范/控制器中的规范不呈现视图。

# vba - 将附件名称添加到邮件正文

> ID：11799049
> 
> 赞同：2
> 
> 时间：2012-08-03T15:46:34.520
> 
> 标签：vba, outlook, ms-word

我希望有人可以帮助我。几个月前，我能够为 Outlook 2003 编写一个宏来添加电子邮件中所有附件的文件名，这是我工作中真正需要的。

但是，如果我将默认编辑器切换到 Word，宏甚至不会出现；我想它必须合并到 Word 的 normal.dot 或其他东西中。如果我将它从 Word 添加到 VB，我可以看到宏，但我得到了各种各样的错误。

希望有人可以为我指出正确的方向。我当前的宏适用于“普通”Outlook 邮件（不是使用 Word 编辑器创建的邮件）是这样的：

```
Sub Names()

Dim Atmt As Attachment
Dim Mensaje As Outlook.MailItem
Dim Adjuntos As String

Set Mensaje = Application.ActiveInspector.CurrentItem
Mensaje.BodyFormat = olFormatHTML
i = 0
Adjuntos = ""

For Each Atmt In Mensaje.Attachments
    'If Atmt.Size > 5 Then
    Adjuntos = "<HMTL> ** Attached file: <u> " & Atmt.FileName & " </u> </html> <br>" & vbNewLine & Adjuntos
    i = i + 1
    'End If
Next Atmt

Adjuntos = "<HMTL> <u> <b> Total number of attached files: " & i & "</u></b> </html> <br>" & Adjuntos & vbNewLine

Mensaje.HTMLBody = Adjuntos & Mensaje.HTMLBody

Set Mensaje = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:46:43.460

下面两个代码块的区别只是Outlook对象库的链接。在 Outlook 中，这不是必需的，但在 Word 中，您需要包含库作为对 Word 项目的引用，或者使用后期绑定（我在下面演示的方法）。

在这种情况下，后期绑定将 Outlook 库链接到代码/项目中的对象`OLK`，并允许您使用关联的功能而无需执行任何额外的步骤/保存任何额外的文件。

链接库也应该可以，但是由于这不是您以后可以参考的普通 Word 项目/为每封新电子邮件创建一个新的 Word 项目，我在想（尽管我没有测试）您需要包括模板中的代码`Normal`，这意味着该代码将在您创建的**任何**Word 文档中可用，除非您指定不同的模板。

这可能是也可能不是您想要做的，但如果是，那么只需将 Outlook 代码粘贴到您的`Normal`模板中并将[Outlook 库链接为参考](http://www.cpearson.com/excel/missingreferences.aspx)。

* * *

## 从*MS Outlook*（首选方法）

当粘贴到 OUTLOOK 项目中时，即使使用 WORD 作为电子邮件编辑应用程序，这也将起作用：

```
Option Explicit 

Sub Names()

Dim Atmt As Attachment
Dim Mensaje As Outlook.MailItem
Dim Adjuntos As String
Dim Body As String
Dim i As Integer

Set Mensaje = Application.ActiveInspector.CurrentItem
Mensaje.BodyFormat = olFormatHTML

Body = Mensaje.HTMLBody

i = 0
Adjuntos = ""

For Each Atmt In Mensaje.Attachments
    'If Atmt.Size > 5 Then
    Adjuntos = Adjuntos & "** Attached file: <u> " & Atmt.FileName & " </u> <br>"
    i = i + 1
    'End If
Next Atmt

Adjuntos = "<u> <b> Total number of attached files: " & i & "</u></b> <br>" & Adjuntos

Mensaje.HTMLBody = Left(Body, InStr(Body, "</body>") - 1) & Adjuntos & Right(Body, Len(Body) - InStr(Body, "</body>") + 4)

Set Mensaje = Nothing

End Sub 
```

* * *

## 来自*MS Word* /在新邮件项目中

我能够完成以下工作，但您应该注意，我收到了安全警告（正常的、不可避免的 AFAIK），必须通过用户干预才能完成。

将以下内容粘贴到您的 WORD 项目中（打开邮件项目）并运行它。您还应该能够将其放入`Normal`模板中，但这意味着宏将*始终*可用，这对您来说可能是也可能不是问题。

```
Sub Names()

Dim OLK As Object 'Oulook.Application
Dim Atmt As Object 'Attachment
Dim Mensaje As Object 'Outlook.MailItem
Dim Adjuntos As String
Dim Body As String
Dim i As Integer

Set OLK = CreateObject("Outlook.Application")
Set Mensaje = OLK.ActiveInspector.CurrentItem
Mensaje.BodyFormat = 2 'olFormatHTML

Body = Mensaje.HTMLBody

i = 0
Adjuntos = ""

For Each Atmt In Mensaje.Attachments
    'If Atmt.Size > 5 Then
    Adjuntos = Adjuntos & "** Attached file: <u> " & Atmt.FileName & " </u> <br>"
    i = i + 1
    'End If
Next Atmt

Adjuntos = "<u> <b> Total number of attached files: " & i & "</u></b> <br>" & Adjuntos

Mensaje.HTMLBody = Left(Body, InStr(Body, "</body>") - 1) & Adjuntos & Right(Body, Len(Body) - InStr(Body, "</body>") + 4)

Set OLK = Nothing
Set Mensaje = Nothing

End Sub 
```

# jquery - 如何在 WordPress 主题中使用 jQuery？

> ID：11799057
> 
> 赞同：1
> 
> 时间：2012-08-03T15:46:49.143
> 
> 标签：jquery, wordpress, themes

我尝试在 2011 WordPress 主题中使用 jQuery 我将其添加到标题中：

```
wp_enqueue_script( 'jquery' ); 
```

并使用这个进行测试：

```
<script type="text/javascript">
    $(document).ready(function(){
        alert("test");
    });
</script> 
```

我也使用 jQuery 而不是 $ 但这不起作用。

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:54:05.847

前几天我真的在 Wordpress 上遇到了这个问题。我只是通过将我的脚本添加到标题中来解决它，并确保 jQuery 正在运行。

与其直接在标题中编写脚本，不如链接到外部文件（示例）： `<script type="text/javascript" src="http://yourwebsite/javascripts/.js"></script>`

将它托管在服务器上的某个位置，然后链接到它 - 如果它包含事件处理程序，它们应该毫无问题地绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T18:43:19.430

```
 <?php wp_enqueue_script("jquery"); ?>

  <?php wp_head(); ?> 
```

将此代码放在主题的 header.php 文件的（部分）中。

现在你可以打电话

```
 <script type="text/javascript"
          src="<?php bloginfo("template_url"); ?>/js/yourScript.js">
      </script> 
```

这样你就可以在你的主题中使用 jquery 了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:41:05.930

将此代码放在主题function.php中：

```
function custom_script() { ?>
    <script type="text/javascript">
        jQuery(document).ready(function(){
            alert("test");
        });
    </script><?php
}

add_action('wp_head', 'custom_script'); 
```

# java - 寻找在 Java 中生成大量对象以添加到 db4o 数据库的最有效方法

> ID：11799062
> 
> 赞同：0
> 
> 时间：2012-08-03T15:47:18.413
> 
> 标签：java, oop, db4o

我正在尝试将一大堆对象添加到 db4o 数据库中。似乎您必须为每个对象创建一个新对象，因为如果我只是更新旧对象中的值并再次存储它，它只会覆盖数据库中的记录，而我只会得到一条记录。所以这就是我所拥有的：

```
for (String o : d.students) {
    Student stu1 = new Student(o);
    db.store(stu1);
    stu = null;
} 
```

我的问题显然是我没有对刚刚存储的对象做任何事情，只是重新分配指针。我知道 Java 的垃圾收集应该处理所有事情，但我也知道 Java 知道泄漏，所以如果有更安全的方法来解决这个问题，我宁愿这样做。

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:53:18.247

I think your assertion that *"Java's known for being leaky"* is misguided at best.

Simply assigning a variable in the scope of the loop is sufficient to trigger its collection outside the loop, assuming that the `db` component doesn't hold that reference. Setting the variable to `null` in the above is an unnecessary optimisation.

# java - Java 小程序 HttpClient AccessControlException

> ID：11799064
> 
> 赞同：1
> 
> 时间：2012-08-03T15:47:26.507
> 
> 标签：java, applet, privileges, apache-httpclient-4.x, accesscontrolexception

我创建了一个使用来自 Apache HTTP 组件的 HttpClient 的小程序。该小程序应该打开一个远程网页并将页面的源打印到控制台。该代码在从 IDE (NetBeans) 运行时运行良好，但是在网页中部署时会引发 AccessControlException：

```
access denied ("java.net.SocketPermission" "www.hardwarebase.net" "resolve") 
```

在阅读有关该问题的类似问题后，似乎问题出在未签名的小程序中。我是自己签名的，所以当我下次运行它时，小程序要求并获得了权限。

不过，我得到了同样的例外。这是主小程序类的代码：

```
public class MyApplet extends java.applet.Applet {
    public DefaultHttpClient client;
        public String useragent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1";
    public void init() 
    {                   
        resize(150,25);

        client = new DefaultHttpClient();       
        String page = Get("http://www.hardwarebase.net"));
        System.out.println(page);   

    }

    public String Get(String url)
    {
        final HttpUriRequest request = new HttpGet(url);
        request.setHeader("User-Agent", useragent);
        HttpResponse response;
        try {
            response = (HttpResponse)AccessController.doPrivileged(new PrivilegedAction() {
                    public Object run() {
                            try {
                                return client.execute(request);
                            } catch (IOException ex) {
                                Logger.getLogger(MyApplet.class.getName()).log(Level.SEVERE, null, ex);
                            }

                            return null;
                        }
                    }
                );
                return _getResponseBody(response.getEntity());
        } catch (IOException e) {
                e.printStackTrace();
        }   

        return "";
    }

    public String Post(String url, List<NameValuePair> nameValuePairs)
    {
        final HttpPost request = new HttpPost(url);
        request.setHeader("User-Agent", useragent);
        try {
                    request.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                    HttpResponse response;

                    try {
                        response = (HttpResponse)AccessController.doPrivileged(new PrivilegedAction() {
                                public Object run() {
                                        try {
                                            return client.execute(request);
                                        } catch (IOException ex) {
                                            Logger.getLogger(MyApplet.class.getName()).log(Level.SEVERE, null, ex);
                                        }

                                        return null;
                                    }
                                }
                            );
                        return _getResponseBody(response.getEntity());
                    } catch (IOException e) {
                            e.printStackTrace();
                    }

        } catch (IOException e) {
            e.printStackTrace();
        }
        return "";
    }

    public void paint(Graphics g) 
    {
        g.drawString("Hello world!", 50, 25);
    }

    public String _getResponseBody(final HttpEntity entity) throws IOException, ParseException 
    {
        if (entity == null) { throw new IllegalArgumentException("HTTP entity may not be null"); }
        InputStream instream = entity.getContent();
        if (instream == null) { return ""; }
        if (entity.getContentLength() > Integer.MAX_VALUE) { throw new IllegalArgumentException("HTTP entity too large to be buffered in memory"); }
        String charset = getContentCharSet(entity);
        if (charset == null) { charset = HTTP.DEFAULT_CONTENT_CHARSET; }
        Reader reader = new InputStreamReader(instream, charset);
        StringBuilder buffer = new StringBuilder();
        try 
        {
            char[] tmp = new char[1024];
            int l;
            while ((l = reader.read(tmp)) != -1) 
            {
                buffer.append(tmp, 0, l);
            }   
        } 
        finally 
        {
            reader.close();
        }

        return buffer.toString();

    }

    public String getContentCharSet(final HttpEntity entity) throws ParseException 
    {
        if (entity == null) { throw new IllegalArgumentException("HTTP entity may not be null"); }
        String charset = null;
        if (entity.getContentType() != null) 
        {
            HeaderElement values[] = entity.getContentType().getElements();

            if (values.length > 0) 
            {   
                NameValuePair param = values[0].getParameterByName("charset");

                if (param != null) { charset = param.getValue(); }  
            }
        }

        return charset;
    }

} 
```

如何解决此 AccessControlException？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:01:14.070

我通过从 HttpClient 切换到 URLConnection 解决了这个问题。我不确定为什么 URLConnection 不会抛出异常，而 HttpClient 会。

# ruby-on-rails - ER 方法“image_tag”居中？

> ID：11799068
> 
> 赞同：2
> 
> 时间：2012-08-03T15:47:46.307
> 
> 标签：ruby-on-rails, methods

我试图在网上搜索这个问题的答案，但无济于事。我正在关注 Michael Hartl 的 Ruby on Rails 教程第 5 章，然后我自己动手制作了一个使用“image_tag”方法的新视图页面。但是，当我查看 localhost:3000 上的视图时，图像未居中。如何使用“image_tag”将图像居中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T15:50:34.620

在 Rails 3 中，您可以简单地使用：

`<%=image_tag("blahblah.png", :align=> "middle")%>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:32:23.143

`image_tag`只是生成`<img>`标签的辅助方法，因此您可能应该使用一些 CSS 来使图像居中。[查看image_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_tag)的API 文档， 其中有一个示例，例如如何将类属性添加到生成的图像标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-20T18:23:03.900

在 rails 5 中，我使用了（使用 Bootstrap）

```
 <%= link_to image_tag("image.jpg", class: "img-responsive center-block") %> 
```

# python - 在 Python 中使用 gnupg 解密 PGP

> ID：11799071
> 
> 赞同：1
> 
> 时间：2012-08-03T15:48:10.003
> 
> 标签：python, pgp

我正在尝试使用此模块解密 PGP 文件： [http ://packages.python.org/python-gnupg/](http://packages.python.org/python-gnupg/)

这是我的代码片段：

```
#!/usr/bin/python

import gnupg

gpg = gnupg.GPG(gnupghome='C:\\Users\\GSquire\\Desktop\\GnuPG',
                                gpgbinary='C:\\Users\\GSquire\\Desktop\\GnuPG\\pub\\gpg.exe',
                                keyring='C:\\Users\\GSquire\\Desktop\\GnuPG\\secring.skr')

with open('.\\tranx08022012.txt.pgp', 'rb') as f:
    status = gpg.decrypt_file(f, passphrase='passphrase', output='out.txt') 
```

我正在使用最新版本的模块和 Python 2.6.6。我想我可以只使用安全环文件来解密它，因为文件显然需要它。当我运行脚本时它会输出：

```
ok: False
status:
stderr:
gpg: expected public key but found secret key - must stop 
```

安全密钥不是解密文件的东西吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:13:58.470

您收到的错误是因为您在`keyring`参数中传递了密钥环的文件名。该参数仅适用于公钥环。不幸的是，似乎没有指定密钥环文件的替代参数。

默认情况下，GnuPG 将在您指定`secring.gpg`的`gnupghome`文件夹中查找密钥，因此您可以重命名您的密钥文件并使其工作。

# netbeans - 在 NetBeans 7.2 中最小化浮动窗口

> ID：11799073
> 
> 赞同：2
> 
> 时间：2012-08-03T15:48:19.737
> 
> 标签：netbeans, netbeans-7, netbeans-7.2

我最近升级到 NetBeans 7.2，并面临浮动窗口的重大可用性问题。在 7.1 中，每个浮动窗口都可以最小化，我经常使用它。从所有外观来看，最小化按钮完全消失了。该按钮丢失，当我右键单击标题栏时，关闭按钮可用，但最小化被禁用（灰色）。

我正在运行 Windows 7 x64。

我也在 RC 中遇到了这个问题，但我认为它会在最终版本中得到解决。我用谷歌搜索，找不到任何有同样问题的人，所以我希望只有我一个人。

我检查了 Tools > Options > Miscellaneous > Windows 下的设置，但它们似乎都没有任何区别。

如何恢复最小化浮动窗口功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:30:06.643

它看起来像 Windows 版本的一个错误，因为我使用的是 mac 并且最小化按钮就位。

我会回到以前的版本，直到他们解决了这个错误。

事实上，至少在 mac 中，您可以同时安装这两个版本，因此您可以不时打开 7.2 并检查解决问题的任何更新。

我在这里找到了一些额外的信息： [https ://netbeans.org/bugzilla/show_bug.cgi?id=216019](https://netbeans.org/bugzilla/show_bug.cgi?id=216019)

也许你可以尝试按照他们所说的去做：

> 没有最小化按钮意味着这些窗口停靠在编辑器停靠点。使用菜单窗口 - 重置窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:32:58.433

我能够在 win 7x64 上最小化 netbeans 中的窗口

抱歉，我想将此添加为评论，但显然我不能

# php - php fwrite() 在我的文本文件中填充 0x00

> ID：11799078
> 
> 赞同：2
> 
> 时间：2012-08-03T15:48:25.820
> 
> 标签：php, null, character, fwrite

我正在使用以下代码写入 php 文件。

问题是在实际内容之后有数字00填充了文本文件；我可以在 HexEditor 中，最后是 0x0A，我知道它是用于 \n。

```
 $val = "My Real Contents\n"; 
    $fileName = "./logs/" . date("m-Y") . ".csv";
    $handle = fopen($fileName, "a");
    fwrite($handle,$val);
    fclose($handle); 
```

输出文件就像十六进制 -

```
 00000000   4D 79 20 52 65 61 6C 20  43 6F 6E 74 65 6E 74 73   My Real Contents
    00000010   00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 0A   ................ 
```

我想知道是否有人知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:56:34.773

理论上什么都不会出错。

您在 $val 变量中打印的换行符 (\n) 相当于十六进制 0A 中的 ASCII 字符。如果您删除 $val 字符串中的新行字符，您将不会得到第二行。

# meteor - 如何在 Meteor 中访问请求参数？

> ID：11799079
> 
> 赞同：19
> 
> 时间：2012-08-03T15:48:40.603
> 
> 标签：meteor

我计划将 Meteor 用于各种实时日志记录应用程序我的要求非常简单，我将从各种应用程序传递一个日志消息作为请求参数（POST 或 GET），而 Meteor 需要简单地更新一个集合。我需要访问 Meteor 服务器代码中的请求参数并使用传入的 logMessage 更新 Mongo 集合。我无法直接从现有应用程序更新 Mongo Collection，因此请不要回复建议相同的内容。我想知道如何从 Meteor 框架中做到这一点，而不是通过添加更多包来做到这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-13T06:35:08.657

> **编辑：**更新为使用[Iron Router](https://github.com/EventedMind/iron-router/blob/devel/Guide.md#quick-start)， Meteor Router 的继任者。

[安装 Iron Router](https://github.com/EventedMind/iron-router/blob/devel/Guide.md#quick-start)并定义服务器端路由：

```
Router.map(function () {
  this.route('foo', {
    where: 'server',
    action: function () {
      doSomethingWithParams(this.request.query);
    }
  });
}); 
```

所以对于像这样的请求，上面函数中`http://yoursite.com/foo?q=somequery&src=somesource`的变量`this.request.query`将是`{ q: 'somequery', src: 'somesource' }`，因此您可以通过`this.request.query.q`等请求单个参数`this.request.query.src`。我只测试了 GET 请求，但 POST 和其他请求类型应该可以相同地工作；这适用于 Meteor 0.7.0.1。确保将此代码放在项目文件夹中的`Meteor.isServer`块或文件中`/server`。

> **原帖：**

使用[Meteorite](https://github.com/oortcloud/meteorite/)安装[Meteor Router](https://github.com/tmeasday/meteor-router)并定义服务器端路由：

```
Meteor.Router.add('/foo', function() {
  doSomethingWithParams(this.request.query);
}); 
```

所以对于像这样的请求，上面函数中`http://yoursite.com/foo?q=somequery&src=somesource`的变量`this.request.query`将是`{ q: 'somequery', src: 'somesource' }`，因此您可以通过`this.request.query.q`等请求单个参数`this.request.query.src`。我只测试了 GET 请求，但 POST 和其他请求类型应该可以相同地工作；这适用于 Meteor 0.6.2.1。确保将此代码放在项目文件夹中的`Meteor.isServer`块或文件中`/server`。

我知道提问者不想添加包，但我认为使用[Meteorite](https://github.com/oortcloud/meteorite/)安装[Meteor Router](https://github.com/tmeasday/meteor-router)与访问内部未记录的 Meteor 对象（如`__meteor_bootstrap__`. 在 Meteor 的未来版本中最终确定 Package API 时，安装 Meteor Router 的过程将变得更容易（不需要 Meteorite），但其他任何事情都不会改变，您的代码可能会继续工作而无需修改。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T12:44:29.520

我找到了一种解决方法，**可以将路由器添加**到 Meteor 应用程序以处理自定义请求。

它使用流星附带的连接路由器中间件。没有额外的依赖！

把它放在服务器上的 Meteor.startup**之前/之外。**（咖啡稿）

```
SomeCollection = new Collection("...")
fibers = __meteor_bootstrap__.require("fibers")
connect = __meteor_bootstrap__.require('connect')
app = __meteor_bootstrap__.app

router = connect.middleware.router (route) ->
  route.get '/foo', (req, res) ->
    Fiber () ->
      SomeCollection.insert(...)
    .run()
    res.writeHead(200)
    res.end()
app.use(router) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-12T10:59:55.957

使用 IronRouter，就这么简单：

```
var path = IronLocation.path(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T03:08:14.877

就目前而言，当 URL 被命中时，不支持服务器端路由或服务器端的特定操作。因此，做自己想做的事并不容易。这里有一些建议。

1.  您可以通过借用`oauth2`auth 分支上的包使用的技术来实现您想要的：[https ://github.com/meteor/meteor/blob/auth/packages/accounts-oauth2-helper/oauth2_server.js#L100 -109](https://github.com/meteor/meteor/blob/auth/packages/accounts-oauth2-helper/oauth2_server.js#L100-109)

    然而，这并没有得到真正的支持，所以我不确定这是一个好主意。

2.  您的其他应用程序实际上可以使用 DDP 更新集合。这可能比听起来容易。

3.  您可以使用接受 POST/GET 请求并使用 DDP 与您的流星服务器对话的中间应用程序。这可能是技术上最简单的事情。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-04T03:56:25.117

也许这个会帮助你？ [http://docs.meteor.com/#meteor_http_post](http://docs.meteor.com/#meteor_http_post)

# android - 如何从 ListView 中选择一个项目并从 SQLite 数据库中查看其对应的 id

> ID：11799080
> 
> 赞同：0
> 
> 时间：2012-08-03T15:48:40.903
> 
> 标签：android, sqlite, listview, adapter

我有以下两个文件：

podatkovna_baza.java

```
package com.example.ultimate.basketball.stats;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class podatkovna_baza extends SQLiteOpenHelper {
    public static final String DATABASE_NAME = "baza5";

    public podatkovna_baza(Context context) {
        super(context, DATABASE_NAME, null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase baza5) {
        /*
         * Create the employee table and populate it with sample data.
         * In step 6, we will move these hardcoded statements to an XML document.
         */
        String sql = "CREATE TABLE IF NOT EXISTS ekipe4 (" +
                                        "_id INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                                        "ime_ekipe TEXT, " +
                                        "kratko_ime TEXT, " +
                                        "kraj TEXT, " +
                                        "slika TEXT )";
        baza5.execSQL(sql);

        ContentValues values = new ContentValues();

        values.put("ime_ekipe", "Drustvo partizan");
        values.put("kratko_ime", "DRP");
        values.put("kraj", "Mirna");
        values.put("slika", "jajaja");
        baza5.insert("ekipe4", null, values);
    }

    @Override
    public void onUpgrade(SQLiteDatabase baza5, int oldVersion, int newVersion) {
        baza5.execSQL("DROP TABLE IF EXISTS ekipe4");
        onCreate(baza5);
    }       
} 
```

osnovni_meni.java

```
package com.example.ultimate.basketball.stats;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.os.Vibrator;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class osnovni_meni extends Activity {
    protected SQLiteDatabase baza5;
    protected Cursor cursor;
    protected ListAdapter adapter;
    protected ListView ekipe_list;
    protected EditText searchtext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_osnovni_meni);
        baza5 = (new podatkovna_baza(this)).getWritableDatabase();

        //searchtext = (EditText) findViewById (R.id.searchText);
        //searchText = (EditText) findViewById (R.id.searchText);
        //employeeList = (ListView) findViewById (R.id.list);
    }

    public void hello(View view) {
        //cursor = baza2.rawQuery("SELECT ime_ekipe, kratko_ime, kraj FROM ekipe2" , null);

        ekipe_list = (ListView) findViewById (R.id.lista);

        cursor = baza5.query("ekipe4", null, null, null, null, null,
                        "_id" + " ASC");

        adapter = new SimpleCursorAdapter(
                        this, 
                        R.layout.ekipe_layout, 
                        cursor, 
                        new String[] {"_id","kratko_ime","kraj"}, 
                        new int[] {R.id.ime_ekipe,R.id.kratko_ime,R.id.kraj});
        ekipe_list.setAdapter(adapter);
        String sadas=adapter.toStr
    }

    public void delete_byID(int id) {
        baza5.delete("ekipe4", "_id"+"="+id, null);
    }

    public void delete_by_ime_ekipe(String ime) {
        baza5.delete("ekipe4", "kraj"+"="+ime, null);
    }

    public int deleteAll() {
        return baza5.delete("ekipe4", null, null);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_osnovni_meni, menu);
        return true;
    }

    public void onBackPressed() {
        // TODO Auto-generated method stub
        //super.onBackPressed();
        finish();
    }

    public void vibriraj()
    {
        Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);               
        v.vibrate(30);      
    }

    public void vpisi(View view)
    {   
        ContentValues values1 = new ContentValues();
        //values1.put("_id", "1");
        values1.put("ime_ekipe", "Chicago Bulls");
        values1.put("kratko_ime", "CHI");
        values1.put("kraj", "Chicago");
        baza5.insert("ekipe4", "kratko_ime", values1);
        vibriraj();
    }

    public void vpisi_ekipo(View view)
    {    
        vibriraj();

        EditText novo_ime_ekipe = (EditText) findViewById (R.id.novo_ime_ekipe);
        EditText novo_kratko_ime_ekipe = (EditText) findViewById (R.id.novo_kratko_ime_ekipe);
        EditText novo_kraj_ekipe = (EditText) findViewById (R.id.novo_kraj_ekipe);
        EditText novo_slika_ekipe = (EditText) findViewById (R.id.novo_slika_ekipe);

        ContentValues values1 = new ContentValues();

        values1.put("ime_ekipe", (novo_ime_ekipe.getText()).toString());
        values1.put("kratko_ime", (novo_kratko_ime_ekipe.getText()).toString());
        values1.put("kraj", (novo_kraj_ekipe.getText()).toString());
        values1.put("slika", (novo_slika_ekipe.getText()).toString());
        baza5.insert("ekipe4", "kratko_ime", values1);
        vibriraj();
        setContentView(R.layout.edit_teams);                        
    }
} 
```

现在我想删除我选择的一行（从列表中获取 ID 并从数据库中获取相应的 ID）或编辑一行。我该怎么做呢？如果您知道数据库中的 id，那么删除或编辑 SQLite 条目非常容易，但我不知道。

对不起我的英语，如你所见，它不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:57:17.010

```
ekipe_list.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id){
            // your code here   
            }
        }); 
```

在“位置”中，您将获得您单击的项目的 ID。所以你只需要将 ListView 中的 id 转换为数据库中的 id 即可。

否则，您将需要创建自定义适配器而不是`SimpleCursorAdapter`，并覆盖 getView() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T13:49:43.817

在您提到的选择查询中“SELECT * FROM ANSWER WHERE ID="

但是你必须提到“”SELECT * FROM answer WHERE ID”

因为表名是答案而不是答案

# android - setSelected(true) 不适用于自定义视图

> ID：11799086
> 
> 赞同：2
> 
> 时间：2012-08-03T15:48:52.823
> 
> 标签：android, android-view, android-gridview

我创建了名为**Color**的自定义视图。我使用 Color 对象来填充 GridView（同样的问题也出现在 ListView 中）。

我的任务是让用户选择一种颜色并突出显示它。

以前我做过类似的事情，但我只用于构建小部件并且一切正常。这次我用自己的。

此 cos 用于单击项目：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    int color = (int)id;

    Log.d(TAG, "Selected color: " + id);
    view.setSelected(true);
    view.invalidate();
} 
```

颜色.onDraw：

```
@Override
public void onDraw(Canvas canvas) {
    if (isSelected()) {
        Log.d(TAG, "color draw selected");
    } else {
        Log.d(TAG, "not selected " + color);
    }
} 
```

我也设置`setChoiceMode(AbsListView.CHOICE_MODE_SINGLE);`为这个 GridView （`AbsListView.CHOICE_MODE_MULTIPLE`也不要帮助）

在日志中我看到：

```
Selected color: 8355711
not selected 16711680
not selected 16743680
not selected 8355711 
```

我敢肯定，颜色项目并没有按时重新创建。

我尝试将 GridView 更改为 ListView，用户默认小部件（仅覆盖 onDraw()）。没有什么帮助。也许我忘记了什么？

在我看来，GridView 以某种方式放弃了选定的状态。

如果您需要更多信息，请告诉。

添加：

我用调试器检查过。颜色为 8355711 的视图在两个函数中是相同的对象。

我使用了 setOnItemSelectedListener(this); 跟踪项目选择。但是在这个监听器中什么也没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:11:45.683

[isSelected()](http://developer.android.com/reference/android/view/View.html#isSelected%28%29)方法来自 GridView，它是 View 的子级。

基本上当你打电话时`isSelected()`说：“选择了gridview”这不是你想要的。

你想要的是：“网格视图中是否有任何选定的视图？”

这可以使用[getSelectedView()来实现](http://developer.android.com/reference/android/widget/AbsListView.html#getSelectedView%28%29)

如文档所述，您将获得对所选视图的引用，或者`null`如果未选择任何视图。

还要确保您的 GridView 已正确初始化以处理项目选择。

**编辑：**好的，我知道 isSelected() 是从颜色视图中调用的。我的第一个猜测是没有用的。

但我认为您应该尝试使用GridView 对象的[setSelection()选择您的项目。](http://developer.android.com/reference/android/widget/GridView.html#setSelection%28int%29)

添加类似：

```
myGridView.setSelection(position); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:15:57.707

我通过自己的选择解决了这个问题。它的解决方法。

在 Color 类中添加：

```
private boolean selected = false;

public boolean isSelected2() {
    return selected;
}

public void setSelected2(boolean selected) {
    this.selected = selected;
}

@Override
public void onDraw(Canvas canvas) { 
    ....        
    if (isSelected2()) {
        //draw selected state
    } else {
    ....
} 
```

在 ColorChooser 网格上：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    ...
    int i = getChildCount();
    while (--i >= 0)
        ((Color)getChildAt(i)).setSelected2(false);

    ((Color)view).setSelected2(true);
    ....
} 
```

我不覆盖 natice 的原因`setSelected(boolean state)`是网格中的一些其他代码每次都使所有项目处于取消选择状态。我不知道为什么，因为在其他地方同样的本地代码工作得很好。

# php - Magento：结帐时对额外费用征税错误

> ID：11799089
> 
> 赞同：8
> 
> 时间：2012-08-03T15:49:11.807
> 
> 标签：php, magento, magento-1.6, gomage

我在结帐时添加了额外费用，但税款计算不正确。

如果我这样做 $this->_calculateTax($address); 在收集功能中，它被加到包括税的总额中，但我的税额仍然是当时的。

if is var_dump $address->setAppliedTaxes($previouslyAppliedTaxes); 我确实看到了正确的数量。它转储了两次，第一次是我的额外费用的正确税额，第二次是正确的总税额。但是在前端它显示了没有我的额外费用税的税。

关于这可能是什么的任何线索？

```
 class Company_Customer_Model_Quote_Address_Total_PrintPrepCosts extends Mage_Sales_Model_Quote_Address_Total_Abstract
{
    public function __construct() {
        $this->setCode('printPrepCosts');
        $this->_store = Mage::app()->getStore();
        return $this;
    }

public function collect(Mage_Sales_Model_Quote_Address $address)
    {
        parent::collect($address);
        $address->setPrintPrepcosts(0);
        $address->setTaxAmount(0);
        $address->setBaseTaxAmount(0);

        if(count($address->getAllItems()) == 0)
        {
            return $this;
        }

        $pricePrint = $this->calcTotalPrintPrepCosts();

        $address->setPrintPrepcosts($pricePrint);
        $address->setBasePrintPrepcosts($pricePrint);

        $address->setBaseGrandTotal($address->getBaseGrandTotal() + $address->getPrintPrepcosts());
        $address->setGrandTotal($address->getGrandTotal() + $address->getPrintPrepcosts());

        $this->_calculateTax($address);
        return $this;
    }

    protected function _calculateTax(Mage_Sales_Model_Quote_Address $address)
    {
        $calculator     = Mage::getSingleton('tax/calculation');
        $inclTax        = Mage::getStoreConfig('tax/calculation/printing_prep_includes_tax', $this->_store);

        $taxRateRequest = $calculator->getRateRequest(
            $address,
            $address->getQuote()->getBillingAddress(),
            $address->getQuote()->getCustomerTaxClassId(),
            $this->_store
        );

        // TODO undef prop _store
        $taxRateRequest->setProductClassId(Mage::getStoreConfig('tax/classes/printing_prep_tax_class', $this->_store));

        $rate = $calculator->getRate($taxRateRequest);
        $baseTax = $tax = $calculator->calcTaxAmount($address->getPrepPrintcosts(), $rate, $inclTax, true);

        $address->addTotalAmount('tax', max(0, $tax));
        $address->addBaseTotalAmount('tax', max(0, $baseTax));

        $this->_saveAppliedTaxes($address, 
            $calculator->getAppliedRates($taxRateRequest), 
            $tax, 
            $baseTax, 
            $rate
        );

        // later on added - which fixes the total, lose tax amount still off
        $address->setTaxAmount($tax);
        $address->setBaseTaxAmount($baseTax);

        if($inclTax)
        {
            $address->setBaseGrandTotal($address->getBaseGrandTotal() - $baseTax);
            $address->setGrandTotal($address->getGrandTotal() - $tax);
        }
    }

    protected function _saveAppliedTaxes(Mage_Sales_Model_Quote_Address $address, $applied, $amount, $baseAmount, $rate)
    {
        $previouslyAppliedTaxes = $address->getAppliedTaxes();
        $process = count($previouslyAppliedTaxes);

        foreach ($applied as $row) {
            if (!isset($previouslyAppliedTaxes[$row['id']])) {
                $row['process'] = $process;
                $row['amount'] = 0;
                $row['base_amount'] = 0;
                $previouslyAppliedTaxes[$row['id']] = $row;
            }

            if (!is_null($row['percent'])) {
                $row['percent'] = $row['percent'] ? $row['percent'] : 1;
                $rate = $rate ? $rate : 1;

                $appliedAmount = $amount/$rate*$row['percent'];
                $baseAppliedAmount = $baseAmount/$rate*$row['percent'];
            } else {
                $appliedAmount = 0;
                $baseAppliedAmount = 0;
                foreach ($row['rates'] as $rate) {
                    $appliedAmount += $rate['amount'];
                    $baseAppliedAmount += $rate['base_amount'];
                }
            }

            if ($appliedAmount || $previouslyAppliedTaxes[$row['id']]['amount']) {
                $previouslyAppliedTaxes[$row['id']]['amount'] += $appliedAmount;
                $previouslyAppliedTaxes[$row['id']]['base_amount'] += $baseAppliedAmount;
            } else {
                unset($previouslyAppliedTaxes[$row['id']]);
            }
        }
        $address->setAppliedTaxes($previouslyAppliedTaxes);        
    }

    public function fetch(Mage_Sales_Model_Quote_Address $address)
    {
        $address->addTotal(array(
            'code'  => $this->getCode(),
            'title' => "Prep Print costs",
            'value' => $address->getPrintPrepcosts(),
        ));
        return $this;
    } 
```

编辑 1 XML 包含以下内容：

```
 <sales>
        <quote>
            <totals>
                <printPrepCosts>
                    <class>Company_Customer_Model_Quote_Address_Total_PrintPrepCosts</class>
                    <after>subtotal</after>
                    <before>tax</before>
                </printPrepCosts>
            </totals>
        </quote>
    </sales> 
```

编辑 2 我在我的 calcTax 函数中添加了以下几行，这确实修复了总计，但 TAX 的金额仍然关闭。

```
 $address->setTaxAmount($tax);
  $address->setBaseTaxAmount($baseTax); 
```

输出 - 示例

```
Subtotal    € 67,50
printPrepCosts  € 40,00
Shipping    € 50,00
TAX     € 22,33
Total   € 187,43 
```

编辑 3 我的错，只有 GoMage 单页结帐提供了正确的总计，而购物车没有。常规的 Magento 单页结帐也会给出错误的总计。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T13:47:16.230

我找到了一种解决方法，它不是最好的解决方案，但它确实有效:)

在我的地址中，我将税收设置为一个名为 tax 的额外变量，并在观察者中使用它来操纵税收。

```
class Company_Client_Model_Observer
{   
    public function setCorrectTax ($observer)
    {
        $quote = $observer->getQuote();
        foreach ($quote->getAllAddresses() as $address) {
            $printPrepCosts = $address->getPrintPrepcosts();
            if(!empty($printPrepCosts)) {
                $address->setTaxAmount($address->tax);
            }
        }
    }
} 
```

和 XML

```
 <events>
    <sales_quote_collect_totals_after>
        <observers>
            <client>
                <type>singleton</type>
                <class>client/observer</class>
                <method>setCorrectTax</method>
            </client>
        </observers>
    </sales_quote_collect_totals_after>
    </events> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T01:05:55.123

您是要修改现有的税单项目还是添加一个新项目？您可以显示整个模型的 config.xml 条目吗？

如果您要添加新的税项，这应该就足够了，只需针对 CE 1.7 vanilla 安装进行测试：

```
class KJ_Mymodule_Model_Sales_Quote_Address_Total_Kjtest extends Mage_Sales_Model_Quote_Address_Total_Abstract
{
    public function __construct()
    {
        $this->setCode('kjtest');
    }

    public function collect(Mage_Sales_Model_Quote_Address $address)
    {
        parent::collect($address);

        $this->_setAmount(1.01);
        $this->_setBaseAmount(1.01);

        return $this;
    }

    public function processConfigArray($config, $store) {
        return $config;
    }

    public function fetch(Mage_Sales_Model_Quote_Address $address)
    {
        $address->addTotal(array(
            'code'  => $this->getCode(),
            'title' => "Prep Print costs",
            'value' => 1.01,
        ));
        return $this;
    }
} 
```

足够了，我的意思是这应该是显示该税项所需的最低限度。

在你的 config.xml 中有这个：

```
<sales>
    <quote>
        <totals>
            <kjtest>
                <class>mymodule/sales_quote_address_total_kjtest</class>
                <after>tax</after>
            </kjtest>
        </totals>
    </quote>     
</sales> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T06:53:00.447

**请阅读以下内容，我认为这对您很有帮助：-**

**见下面的网址**

[http://www.excellencemagentoblog.com/magento-add-fee-discount-order-total](http://www.excellencemagentoblog.com/magento-add-fee-discount-order-total)

**Magento 添加费用或折扣订单总额**

在本教程中，我们将看到如何将新的订单项添加到 magento 订单总额中。这意味着，如何添加额外的费用或折扣，或任何类型的费用来订购 magento 结帐流程的总额。在典型的订单中，订单总额通常包括小计、运费、税金、折扣，根据这些值计算订单总额。现在，如果我们想添加额外的信用卡费用或说服免费或附属折扣或任何其他会影响订单总额的订单总额，我们需要创建一个 magento 模块。我们添加到总额中的这笔额外费用将反映在

*   **结帐页面订单总计**
*   **购物车页面订单总计**
*   **我的帐户订单查看页面**
*   **订购电子邮件**
*   **管理员订单查看/电子邮件/PDF**
*   **管理员发票查看/电子邮件/PDF**
*   **管理员信用备忘录查看/电子邮件/PDF**

从上面的列表可以看出，这个模块并不简单。在本教程中，我附上了这样一个非常基本的模块的源代码，您可以使用您的起点来添加额外的更改。我还将解释如何实现这一点的基础知识。在本教程中，我将添加一个名为“费用”的新订单总额，固定成本为 10 美元。

**或者试试看：-**

**结帐页面总订单总基础**

我们将看到如何仅将总计添加到结帐页面。结帐页面上显示的所有总计行项目都来自位于文件夹 Mage\Sales\Model\Quote\Address\Total 的文件。在magento中，在下订单之前，所有订单数据都存储在报价对象中，下订单后，它会被传输到订单对象。报价总额遵循收集器模式，我们可以添加尽可能多的收集器类。要将收集器添加到 config.xml 中的报价对象，我们添加以下行

```
<global>
        <sales>
            <quote>
                <totals>
                    <fee>
                        <class>fee/sales_quote_address_total_fee</class>
                    </fee>
                </totals>
            </quote>
       </sales>
</global> 
```

这意味着每当计算报价的总数时，它也会调用这个类。从报价模型中的 collectTotals() 函数调用所有收集器。在我们的收集器类中，我们输入了代码

```
<?php
   class Excellence_Fee_Model_Sales_Quote_Address_Total_Fee extends Mage_Sales_Model_Quote_Address_Total_Abstract{
    protected $_code = 'fee';

    public function collect(Mage_Sales_Model_Quote_Address $address)
    {
        parent::collect($address);

        $this->_setAmount(0);
        $this->_setBaseAmount(0);

        $items = $this->_getAddressItems($address);
        if (!count($items)) {
            return $this; //this makes only address type shipping to come through
        }

        $quote = $address->getQuote();

        if(Excellence_Fee_Model_Fee::canApply($address)){ //your business logic
            $exist_amount = $quote->getFeeAmount();
            $fee = Excellence_Fee_Model_Fee::getFee();
            $balance = $fee - $exist_amount;
            $address->setFeeAmount($balance);
            $address->setBaseFeeAmount($balance);

            $quote->setFeeAmount($balance);

            $address->setGrandTotal($address->getGrandTotal() + $address->getFeeAmount());
            $address->setBaseGrandTotal($address->getBaseGrandTotal() + $address->getBaseFeeAmount());
        }
    }

    public function fetch(Mage_Sales_Model_Quote_Address $address)
    {
        $amt = $address->getFeeAmount();
        $address->addTotal(array(
                'code'=>$this->getCode(),
                'title'=>Mage::helper('fee')->__('Fee'),
                'value'=> $amt
        ));
        return $this;
    }
} 
```

这里的两个主要函数是 collect() 和 fetch()。在 collect 函数中，您可以将所需的任何数量添加到订单总额中，并且 fetch() 用于显示目的。如果此操作正确，您应该会在结帐和购物车页面中看到您的订单总行。这里我们使用两个字段 fee_amount 和 base_fee_amount，其中包含我们的费用金额。我们将不得不看到将这两个字段保存到数据库中，因此在我们的模块安装程序文件中添加此代码

```
ALTER TABLE  `".$this->getTable('sales/quote_address')."` ADD  `fee_amount` DECIMAL( 10, 2 ) NOT NULL;
ALTER TABLE  `".$this->getTable('sales/quote_address')."` ADD  `base_fee_amount` DECIMAL( 10, 2 ) NOT NULL; 
```

**订单页面**

到目前为止，所有编写的代码都只针对引用对象完成。但是下订单后，我们需要将所有信息传递给订单对象。正如您在上面看到的，我们使用了两个字段 fee_amount 和 base_fee_amount，我们现在还需要将这两个字段存储在订单表中。要做到以上所有，我们需要做两件事。首先在 config.xml 文件中的全局选项卡内添加此代码，

```
<fieldsets>
        <sales_convert_quote_address>
            <fee_amount><to_order>*</to_order></fee_amount>
            <base_fee_amount><to_order>*</to_order></base_fee_amount>
        </sales_convert_quote_address>
    </fieldsets> 
```

在我们的模块安装文件中

```
ALTER TABLE  `".$this->getTable('sales/order')."` ADD  `fee_amount` DECIMAL( 10, 2 ) NOT NULL;
ALTER TABLE  `".$this->getTable('sales/order')."` ADD  `base_fee_amount` DECIMAL( 10, 2 ) NOT NULL; 
```

完成此操作后，这两个字段应从报价表保存到订单表中。

这只是将订单项添加到订单总额的基础知识。其余的附加模块里面写了很多代码，请详细阅读以了解更多。

# java - 使用“debugUnreturnedConnectionStackTraces”调试连接丢失

> ID：11799090
> 
> 赞同：6
> 
> 时间：2012-08-03T15:49:12.947
> 
> 标签：java, spring, hibernate, connection-pooling, c3p0

我正在为我正在处理的项目解决连接超时问题。我们使用c3p0来管理连接池和hibernate作为orm工具。我们也使用弹簧。

要查找是否有任何未返回的连接，我在我的 c3p0 配置中将 debugUnreturnedConnectionStackTraces 设置为 true（不在 c3p0 属性中）。

还有什么我需要做的。我是否还必须向我的 lod4j.properties 添加任何内容，或者仅将 debugUnreturnedConnectionStackTraces 设置为 true 就足够了？

另外，我应该在 c3p0 属性中将 debugUnreturnedConnectionStackTraces 设置为 true 吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T00:22:29.353

扩展一下Corey的答案：

如果 unreturnedConnectionTimeout 为正且 debugUnreturnedConnectionStackTraces 设置为 true，则生成未返回异常的堆栈跟踪将由记录器“com.mchange.v2.resourcepool.BasicResourcePool”在 INFO 级别记录。

人们通常会从所有记录器中记录高于 INFO 级别的任何内容，因此这些堆栈跟踪只会出现在您的日志中。但是，如果您没有看到它们，请检查您的日志记录配置，以确保来自该记录器的 INFO 消息未被过滤。

请注意，如果未设置 unreturnedConnectionTimeout，则 debugUnreturnedConnectionStackTraces 将不执行任何操作。

看

[http://www.mchange.com/projects/c3p0/#unreturnedConnectionTimeout](http://www.mchange.com/projects/c3p0/#unreturnedConnectionTimeout)

[http://www.mchange.com/projects/c3p0/#debugUnreturnedConnectionStackTraces](http://www.mchange.com/projects/c3p0/#debugUnreturnedConnectionStackTraces)

我希望这有帮助！

ps不管你如何设置这些属性，只要它们设置正确。c3p0 在池启动时将池配置转储到 INFO；检查您的日志以确保，无论您尝试设置参数，您都拥有您期望的配置。或者，您可以使用 JMX 来检查参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T16:56:39.597

就我个人而言，我通常将以下两行添加到我的 hibernate.cfg.xml

```
<property name="hibernate.c3p0.unreturnedConnectionTimeout">60</property>
<property name="hibernate.c3p0.debugUnreturnedConnectionStackTraces">true</property> 
```

我相信超时的默认值为 0，我不确定它应该如何工作。

# ruby-on-rails-3 - Rails 3 - 根据控制器名称动态更改 css 类

> ID：11799091
> 
> 赞同：1
> 
> 时间：2012-08-03T15:49:21.340
> 
> 标签：ruby-on-rails-3

我有一个使用 960 网格 CSS 布局的 Rails 3 应用程序。有几个不同的视图在宽度上延伸，我试图想出一种动态改变这些类的好方法。

例如：我的设计控制器（`Sessions, Passwords, etc`）都使用某个类将宽度限制为`340px`，而我的大多数其他控制器使用另一个类将宽度限制为`540px`

所以我的`340px`布局使用类名`grid_6 push_5`，而我的`540px`布局使用`grid_10 push_3`

无论如何要在`application_controller`? 我的想法是只获取控制器并有一个 switch 语句来设置类名`helper_method`。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:13:07.013

由于这篇文章，我能够弄清楚：[Determine the requested Controller in - ApplicationController](https://stackoverflow.com/questions/6392401/determine-the-requested-controller-in-applicationcontroller)

这是我最终的做法（application.html.erb）：

```
<%= render :partial => 'common/content_container', :locals => { :controller => params[:controller] } %> 
```

content_container 部分：

```
<% case controller
    when "sessions", "passwords"
        container_div_grid_number = "6"
        container_div_push_number = "5"
    else
        container_div_grid_number = "10"
        container_div_push_number = "3"
    end 
%>

<div class="grid_<%= container_div_grid_number %> push_<%= container_div_push_number %> ">
    <div class="top_<%= container_div_grid_number %>"></div>
    <div class="middle_<%= container_div_grid_number %>">
        <%= yield %>
    </div>
    <div class="bottom_<%= container_div_grid_number %>"></div>
</div> 
```

# javascript - 如何使用 JQuery 按值选择复选框？

> ID：11799094
> 
> 赞同：-1
> 
> 时间：2012-08-03T15:49:32.493
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 选择复选框组的值](https://stackoverflow.com/questions/416752/select-values-of-checkbox-group-with-jquery)

我正在寻找使用 JQuery 按值选择一个复选框。我不想遍历所有值以查看该值是否在集合中。我可能有一堆复选框，所以这只会减慢整个过程。提前致谢。

* * *

为了澄清更多我正在寻找的是这个。我有一个包含聚合房间的下拉列表。这些房间中的每一个都由多个单独的房间组成。所以我们可能在下拉菜单中有类似的东西

集合房间 AB 集合房间 BC 集合房间 ABCD

下面是代表单个房间的复选框列表

房间 A 房间 B 房间 C 房间 D

我试图完成的是在选择顶部聚合房间时选择底部复选框。因此，如果我选择 Aggregate Room AB，下面的复选框将选择 Room A 和 Room B。

我的解决方案如下：http: [//jsfiddle.net/xkXSx/43/](http://jsfiddle.net/xkXSx/43/)

感谢您的友好回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T15:51:20.687

```
$('input:checkbox[value="your_value"]').prop('checked', true);​ 
```

# git - Git pull 因“错误的包头”而失败

> ID：11799108
> 
> 赞同：1
> 
> 时间：2012-08-03T15:50:03.007
> 
> 标签：git, git-pull

当我尝试从远程服务器中提取时，出现此错误：

```
warning: no common commits
remote: Counting objects: 12358, done.
remote: warning: suboptimal pack - out of memory
error: git upload-pack: git-pack-objects died with error.
remote: Compressing objects:  92% (10914/11863)   fatal: git upload-pack: aborting due to possible repository corruption on the remote side.
remote: fatal: Out of memory, malloc failed (tried to allocate 42679466 bytes)
remote: aborting due to possible repository corruption on the remote side.
fatal: protocol error: bad pack header 
```

我试图限制[每个线程](https://stackoverflow.com/questions/7362709/git-pull-fails-with-bad-pack-header-error)在远程服务器上使用的内存：

```
git config --global pack.windowMemory "100m"
git config --global pack.SizeLimit "100m"
git config --global pack.threads "1" 
```

我不确定问题到底出在哪里。还有其他想法吗？TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:09:17.467

根据`Out of memory, malloc failed (tried to allocate 42679466 bytes)`消息，我的猜测是您的服务器内存不足。您不是在某些嵌入式/虚拟/其他受限硬件上运行它吗？

# javascript - UIWebView 中的 UIStepper - iOS

> ID：11799110
> 
> 赞同：1
> 
> 时间：2012-08-03T15:50:09.423
> 
> 标签：javascript, ios, xcode, uiwebview, uistepper

我一直在寻找使用 UIStepper 来增加和减少 WebView 中的字体大小。

```
[webview stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '140%'"]; 
```

我想要它，所以当我按加号时，它会将字体大小增加 40%，而当您按减号时，它会将字体大小减少 40%。因此，如果我按加号，然后按减号，它会恢复到原来的状态，如果我再次按减号，它会将字体大小再减小 40%。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T04:41:48.437

```
textFontSize = 140;

NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextSizeAdjust= '%d%%'",
                      textFontSize];

[self.articleWebView stringByEvaluatingJavaScriptFromString:jsString]; 
```

# php - 包含后的PHP解析文件

> ID：11799111
> 
> 赞同：0
> 
> 时间：2012-08-03T15:50:11.103
> 
> 标签：php

这就是我想要做的：

```
<? include 'header.php' ?>
some html
<? include 'footer.php' ?> 
```

在 header.php 中...

```
<? //bunch of code
if (something){
//some stuff here, but no close brace
?> 
```

在页脚.php ....

```
<? } //close the if brace ?> 
```

这可能吗？我不断收到解析错误。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:53:07.853

不，你不能那样做。你的括号都需要在同一个文件中。

如果您想有条件地包含 HTML，请将您的逻辑放在`include`header.php*和*footer.php*文件中*

```
<?php include 'header.php' ?>
<?php if (/* something */): ?>
some html
<?php else : ?>
some other html
<?php endif; ?>
<?php include 'footer.php' ?> 
```

另外，不要使用 ASP 风格的 ( `<? ?>`) 短开标签。它们正在被弃用。您仍然可以使用`<?= ?>`输出变量等。

[这是关于该主题的有趣对话。](http://www.mail-archive.com/internals@lists.php.net/msg41839.html)

[这是 PHP 手册中的注释。](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)

# c# - How to append to large XML files in C# using memory efficiently

> ID：11799124
> 
> 赞同：5
> 
> 时间：2012-08-03T15:50:49.033
> 
> 标签：c#, xml, memory-management, file-io, xmlwriter

Is there some way I can combine two XmlDocuments without holding the first in memory?

I have to cycle through a list of up to a hundred large (~300MB) XML files, appending to each up to 1000 nodes, repeating the whole process several times (as the new node list is cleared to save memory). Currently I load the whole `XmlDocument` into memory before appending new nodes, which is currently not tenable.

What would you say is the best way to go about this? I have a few ideas but I'm not sure which is best:

1.  Never load the whole `XMLDocument`, instead using `XmlReader` and `XmlWriter` simultaneously to write to a temp file which is subsequently renamed.
2.  Make a `XmlDocument` for the new nodes only, and then manually write it to the existing file (i.e. `file.WriteLine( "<node>\n" )`
3.  Something else?

Any help will be much appreciated.

**Edit** Some more details in answer to some of the comments:

The program parses several large logs into XML, grouping into different files by source. It only needs to run once a day, and once the XML is written there is a lightweight proprietary reader program which gives reports on the data. The program only needs to run once a day so can be slow, but runs on a server which performs other actions, mainly file compression and transfer, which cannot be effected too much.

A database would probably be easier, but the company isn't going to do this any time soon!

As is, the program runs on the dev machine using a few GB of memory at the most, but throws out of memory exceptions when run on the sever.

**Final Edit** The task is quite low-prority, which is why it would only cost extra to get a database (though I will look into mongo).

The file will only be appended to, and won't grow indefinitely - each final file is only for a day's worth of the log, and then new files are generated the following day.

I'll probably use the XmlReader/Writer method since it will be easiest to ensure XML validity, but I have taken all your comments/answers into consideration. I know that having XML files this large is not a particularly good solution, but it's what I'm limited to, so thanks for all the help given.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:23:46.117

如果您希望完全确定 XML 结构，使用 XMLWriter 和 XMLReader 是最好的方法。

但是，为了获得尽可能高的性能，您可以使用直接字符串函数快速重新创建此代码。您可以这样做，尽管您将失去验证 XML 结构的能力 - 如果一个文件有错误，您将无法更正它：

```
using (StreamWriter sw = new StreamWriter("out.xml")) {
    foreach (string filename in files) {
        sw.Write(String.Format(@"<inputfile name=""{0}"">", filename));
        using (StreamReader sr = new StreamReader(filename)) {
            // Using .NET 4's CopyTo(); alternatively try http://bit.ly/RiovFX
            if (max_performance) {
                sr.CopyTo(sw);
            } else {
                string line = sr.ReadLine();
                // parse the line and make any modifications you want
                sw.Write(line);
                sw.Write("\n");
            }
        }
        sw.Write("</inputfile>");
    }
} 
```

根据输入 XML 文件的结构方式，您可能会选择删除 XML 标头、可能是文档元素或一些其他不必要的结构。您可以通过逐行解析文件来做到这一点

# javascript - JQuery：更新表格内容需要很长时间

> ID：11799132
> 
> 赞同：1
> 
> 时间：2012-08-03T15:51:10.390
> 
> 标签：javascript, jquery, ajax

我使用 JQuery Ajax 从服务器获取表的内容，使用如下代码：

```
success: function(data)
{
    //once I get the data, remove the old content from table
    $('.tableBody').empty();

    // then repopulate the table
    $.each(data, function(key,val) {
        //process the data, add different icons, texts...,append it to my table
        showTable(key, val);
   });
} 
```

这工作正常。但问题是表格有很多行，所以重新填充大约需要 300 毫秒，（`empty()`只需要大约 10 毫秒），所以在短时间内，表格是空白的。

无论如何，我可以在`"empty()"`和之间添加一些动画`"showTable()"`以避免空白屏幕，使其无缝过渡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:03:16.083

如果`showTable()`正在做的是“处理数据，添加不同的图标，文本......，将其附加到 [your] table”，那么它可能看起来像这样：

```
$.each(data, function(key, val){
    $('.tableBody').append(key +' - '+ val);
}); 
```

您首先应该知道的是，将 HTML 尽可能长时间地保存在字符串中，然后将其放入 jQuery 对象并将其附加到 DOM，而不是创建多个将附加到 DOM 的多个 jQuery 对象，这样会更快。次也是。因此，您最好执行以下操作：

```
var tableContents = '';
$.each(data, function(key,val){
    tableContents += key +' - '+ val; // generate whatever HTML you need
});
$('.tableBody').append(tableContents); 
```

它允许您在重新填充之前清空表格：

```
var tableContents = '';
$.each(data, function(key,val){
    tableContents += key +' - '+ val; // generate whatever HTML you need
});
$('.tableBody')
    .empty()
    .append(tableContents); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:01:33.943

如果我是你，我会`slideUp`使用旧表（或者最好在顶部放置一个半不透明的白色 div）并在屏幕外准备新表，然后简单地交换内容和`slideDown`（或者`fadeOut`如果你选择这种方法，则交换白色 div）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:08:59.010

在您的 AJAX 回调（或什至在此之前）收到您的数据后，显示加载动画，执行您的操作，然后再次显示您的表单/表格。

一个基本的例子..点击提交，显示加载动画，隐藏表单。做你的事情（AJAX 请求），然后隐藏加载动画，并再次显示表单。

```
<img class="loading" src="http://www.link-to-loading-anim.com/loading.gif"/>
    <form method="post">
    <input value="Click Me" type="submit"/>
</form>​ 
```

**Javascript：**

```
// On dom ready, hide our loading animation
$('img.loading').hide();

// on form submit, show the animation,
$('form').submit(function(e){
    e.preventDefault(); // we dont really need to submit the form!!

    // Show our loading animation
    $('img.loading').fadeIn();

    // Optional: Hide the form..
    $('form').hide();

    // Do something here.. (AJAX Request)
    // - Your success of AJAX request..

    // Hide the image loader on success.. (setTimeout used for demo purposes)
    setTimeout(hideImageLoader, 2000);

});

function hideImageLoader(){
    $('img.loading').fadeOut('slow', function(){
        $('form').show();
    }); 
}
​ 
```

这是一个用于基本加载动画示例的[JSfiddle](http://jsfiddle.net/EHXG6/0/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:20:33.323

您可以创建一个未附加到 DOM 的表格元素，根据需要填充它，然后在生成完成后替换现有表格，或者您可以让服务器为您执行表格的这种格式化，并且简单地用已经格式化的 ajax 响应替换您的表。

# java - 无效的主机名 - 无法从 Android 模拟器连接 IIS express

> ID：11799134
> 
> 赞同：6
> 
> 时间：2012-08-03T15:51:20.983
> 
> 标签：java, android, asp.net-mvc, android-emulator

我正在尝试从 Android 应用程序连接托管在本地 IIS express 上的 WCF 服务。目前，我正在模拟器上对此进行测试。

服务的本地 URL 是 `http://locahost:40000/api/Authenticate`

我知道 localhost 不起作用，我在代码中使用了 10.0.2.2

```
post = new HttpPost("http://10.0.2.2:40000/api/authenticate"); 
```

但客户端执行的响应是“无效的主机名”

我尝试编辑 IIS express 的 ApplicationHost.config 并为 10.0.2.2 添加了一个绑定条目，但这也不起作用

还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T17:45:42.037

我尝试了其他可行的方法，我在 IIS Express applicationhost.config 文件绑定部分中添加了系统的 IP 地址。

```
<bindings>
<binding protocol="http" bindingInformation="*:40000:localhost" />
<binding protocol="http" bindingInformation="*:40000:192.168.5.118" />
</bindings> 
```

我现在可以调用服务了

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-12T13:31:43.653

据我了解，10.0.2.2 是 127.0.0.1 的别名，因此请将其添加到`applicationhost.config`您网站的绑定中，例如

```
 <site name="MySite" id="1">
    <application path="/" applicationPool="Clr4IntegratedAppPool">
      <virtualDirectory path="/" physicalPath="{yourpath}" />
    </application>
    <bindings>
      <binding protocol="http" bindingInformation="*:26013:localhost" />
      <binding protocol="http" bindingInformation="*:26013:127.0.0.1" />
    </bindings>
  </site> 
```

请记住，现在如果您使用的是 Visual Studio，那么与`applicationhost.config`您的站点相关的可能不在解决方案根目录下的文件夹中，`c:\users\...`而是在文件夹中。`.vs\config`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-02T08:26:08.680

在**Visual Studio 2022上的****.NetCore**项目中，

 **我编辑了**launchSettings.json**文件，在 iisSettings > applicationUrl 下，我将 url 设置为`127.0.0.1`而不是`localhost`，类似这样。

```
"iisSettings": {
    "windowsAuthentication": false,
    "anonymousAuthentication": true,
    "iisExpress": {
      "applicationUrl": "http://127.0.0.1:59109",
      "sslPort": 0
    }
  } 
```

在颤振应用程序中，网址是`10.0.2.2:59109`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-03T16:12:51.643

在 AndroidManifest.xml 中添加`Internet Permission`、`Network State`和`Wifi` **Permission**

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-03T16:27:31.497

1.  “端口 40000”是怎么回事？？？？？？
    我*肯定会*尝试使用较低的端口号（例如低于 32768 的端口号；））
2.  确保您的 androidmanifest.xml 具有 Internet 权限
3.  确保“api/authenticate”在 IIS 中已定义并可用
4.  确保 Windows 防火墙没有阻止端口 40000
5.  有用的工具包括：
    *   ping（因此您可以“ping 10.0.0.2”；在 OOTB Windows 中可用）
    *   telnet（因此您可以“telnet localhost NNN”；您必须在 Windows 功能中添加它）
    *   火狐和萤火虫
    *   线鲨**

# mysql - mysql - Access tool for support team

> ID：11799136
> 
> 赞同：0
> 
> 时间：2012-08-03T15:51:31.337
> 
> 标签：mysql

I have mysql server running on amazon ec2 instance (running on ubuntu)

My support team (running on windows) needs access to this database so they can run some queries and get info straight from the database. Are there any tools in windows that offer such functionality

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:01:50.450

1.  [MySQL Workbench](http://www.mysql.com/products/workbench/)支持与任何 MySQL 服务器的远程连接，但您需要通过服务器端和数据库端的远程访问来执行服务器安全。
2.  一些服务器使用[phpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)作为客户端（IE Windows 兼容）。如果将其安装在服务器上，则不需要远程访问，但还必须检查数据库端的安全权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:00:18.140

对于查询，我个人使用[Toad for MySQL](http://www.quest.com/toad-for-mysql/)，因为它允许我轻松导出到 Excel。不幸的是，它是.Net，所以它有一些非常烦人的错误。我的同事对[Sql Yog](http://www.webyog.com/en/)和[MySQL Workbench](http://www.mysql.com/products/workbench/)评价很高。

对于数据建模，我非常喜欢[MySQL Workbench](http://www.mysql.com/products/workbench/)。如果钱不是一个对象，你可以看看[ErWin](http://erwin.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:13:39.087

如果您愿意为许可证付费，我建议您使用 Navicat。这将是 IMO 最用户友好的解决方案。您可以下载免费试用版。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:14:49.867

利用[dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)。有免费的特快版。

# google-analytics - UMBRACO - Adding Google Analytics e-commerce code to Umbraco transaction confirmation

> ID：11799137
> 
> 赞同：0
> 
> 时间：2012-08-03T15:51:33.737
> 
> 标签：google-analytics, e-commerce, umbraco

From what I understand, to track successful e-commerce transactions using Analytics, you need to insert the tracking code into a 'thank you for your order' type confirmation page/template.

I'm pretty new to UMBRACO CMS and can't seem to find this confirmation page anywhere. There's just a template for a re-direct to SagePay which is the payment gateway. Also, the site doesn't seem to be using any kind of e-commerce 'package'.

Anybody have an idea where I need to go or what I need to do to successfully implement the GA e-commerce tracking to Umbraco?

Cheers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:25:10.297

几个问题。

当用户在您的网站上完成订单时，显示订单确认的 URL 是什么？

使用 Umbraco 的一种常见方法是动态更改页面模板，方法是将其添加到 url，所以这可能就是这里发生的事情。一个例子。

内容树如下所示： 内容 - 主页 - - 新闻 - - 购物车

现在购物车页面的默认 URL 为 /cart.aspx。但是您可以使用 /cart/confirmation.aspx 之类的 url 使用“确认”模板访问同一页面。在这种情况下，将没有“确认”内容页面，但在 Umbraco 后端的“设置”部分中会有一个“确认.master”模板。那可能是插入您的谷歌跟踪代码的地方。

# javascript - Image over Youtube video with a fade

> ID：11799139
> 
> 赞同：0
> 
> 时间：2012-08-03T15:51:42.137
> 
> 标签：javascript, jquery, youtube

Can anyone help me with some javascript here as I got no knowledge, but I have this idea...

This is what I have on my mind:

-I want an image to be over the youtube video. (image inside of css, so no img src please) -On click of the image (image fades out) and video loads up and start playing. -Once video is done *(I don't care if I have to add values of time when video will end manually)* the image will fade in again over the video.

I have found an script before that gives this option to put image over youtube video, but it did not had fade effect and it worked for 1 day only. Right now it doesnt works...

Cheers and thank you in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:30:19.673

可以使用 youtube api 构建自定义视频播放器。您可以处理您想要的任何事件，例如开始停止、暂停等。甚至可以强制用户单击点赞按钮、广告或其他任何内容。但这有点工作。

# sql-server-2008 - Are numbers seen as strings in sql

> ID：11799140
> 
> 赞同：0
> 
> 时间：2012-08-03T15:52:00.717
> 
> 标签：sql-server-2008, nvarchar

This is really simple. Does `SQL SERVER 2008` auto convert values to string for you ?

I tried this `Select * from Staff Where Division = 5`
If I try to insert it, it works too.
If I change 5 for five I get and error though. `Invalid column name five`.

Division is a `NVARCHAR`. Shoudn't the 5 be within single quotes ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:01:24.273

是的，SQL Server 将 int 隐式转换为 nvarchar。它还可以将 nvarchar 隐式转换为 int （和其他数字类型）。

更多详情：http: [//msdn.microsoft.com/en-us/library/ms191530.aspx](http://msdn.microsoft.com/en-us/library/ms191530.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:01:51.977

有很多情况会发生隐式转换。例如：

```
EXEC sp_who2 active; 
```

您不需要分隔`active`为字符串吗？是的，但语法是宽容的。

我的建议：始终正确界定数据类型，并忽略异常。他们得到全面修复的机会几乎为零。

# javascript - 更干净更快的 JavaScript，用 JavaScript 替换 jQuery

> ID：11799144
> 
> 赞同：16
> 
> 时间：2012-08-03T15:52:26.553
> 
> 标签：javascript, jquery, performance

像许多人一样，我通过学习 jQuery 来学习 JavaScript。

最近我一直在替换以下内容：

`$(this).attr('title')`和`this.title`

`$(this).attr('id')`和`this.id`

`$(this).val()`和`this.value`

`$(this).parent()`和`this.parentNode`

`$(this).attr('class')`和`this.className`

我的代码不仅更干净，而且在*技术上*更快。

1.  这种类型的减少是否可以接受和鼓励？

2.  我应该在~~原始~~纯 JavaScript 而不是 jQuery 中做任何其他常见的做法吗？

3.  这种类型的简化主义是否存在任何潜在的跨浏览器问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T15:57:10.813

虽然使用本机 Javascript 函数通常比其 jQuery 对应函数更快，但它确实使您面临使用它们时可能出现的任何浏览器兼容性问题。 `this.value`这不太可能导致问题，但其他类似的属性/功能可能不适用于所有浏览器。使用像 jQuery 这样的框架意味着您不必处理或担心这些事情。

如果性能是一个问题，我只会使用纯 Javascript，即你有很多紧密的循环和重复的操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T16:24:20.087

我建议尽可能使用 DOM 属性。几乎所有这些都不会造成任何问题，性能会提高，并且您对 jQuery 的依赖会减少。例如，对于像`checked`.

如果您对某个特定属性有任何疑问，您可以查看 jQuery 源代码，看看它是否对该属性有任何特殊处理，并将其视为学习练习。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T16:45:52.767

虽然许多人拒绝这样的说法，但我也观察到避免/最小化 jQuery 的使用可以产生明显更快的脚本。避免重复/`$()`特别是不必要的；而是尝试做*一次*事情，例如`a = $(a);`

我注意到的东西特别昂贵`$(e).css({a:b})`。

Google 优化的[**Closure Compiler**](https://developers.google.com/closure/compiler/)据说也可以内联这些简单的函数！

事实上，它带有一个相当大的库（**闭包库**），它提供了大多数跨浏览器兼容性的东西，而没有引入一个全新的概念。

需要一点时间来适应在完全优化模式下导出变量和函数的闭包方式（所以它们不会被重命名！）。但至少在我的情况下，生成的代码非常好而且很小，而且我敢打赌它已经得到了一些进一步的改进。

[https://developers.google.com/closure/compiler/](https://developers.google.com/closure/compiler/)

# android - 旧 android 设备的 setFinishOnTouchOutside 的替代品？

> ID：11799145
> 
> 赞同：3
> 
> 时间：2012-08-03T15:52:31.243
> 
> 标签：android

我有一个在清单中使用 dialog.theme 的活动，但我不希望它在用户在对话框之外触摸时被破坏。我做了一些搜索，发现 setFinishOnTouchOutside(false) 很有用，但它需要 API11 android 3.0 设备。我希望我的应用程序也能在较旧的 android 设备上兼容，解决方案是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T08:57:05.263

你是幸运的人，因为在旧的 android 设备上，活动不会在外部触摸时关闭。

如果要调用`setFinishOnTouchOutside(false)`较新的设备，请先检查 API 级别，如果 API >= 11 则调用该方法。

# sql - 将模式更新推送到最终用户数据库有哪些好的方法？

> ID：11799147
> 
> 赞同：1
> 
> 时间：2012-08-03T15:52:37.847
> 
> 标签：sql, database, database-administration

这可能太宽泛了，但这是我不得不花时间处理的一个问题。我们有一个分发给最终用户的应用程序。它运行在德比后端之上。我们可以相当轻松地推出代码更改，它会发送到我们的服务器，查看有新版本，下载，覆盖旧代码，然后重新启动。

但是，当我们更改代码时，我们也会更改 derby 数据库的模式。我们没有很好的方法来更新它。目前我们可以通过 FTP 推送 SQL 更新。当程序连接到 Internet 时，它会查找新的 SQL 文件，下载并运行它们。

不幸的是，我们的许多客户的互联网访问受限，因此他们会间歇性地获得这些更新。有时因为它们的变化足够大，它们的本地数据库模式与我们想要的不同步。或者他们通过 CD 获得代码更改，而不是 SQL 更改（有人将 CD 邮寄给他们）。

我一直在尝试做的是创建一个 SOAP 服务，它可以提供模式的 XML 表示。到目前为止，这是一个巨大的 PITA。

人们目前使用哪些方法来维护这样的数据库？我觉得我不是第一个这样做的人，所以可能有比我正在做的更好的方法。

**根据这里的一些评论，这里有一个更新：** 基本上，我认为我们很早就搞砸了，因为我们没有遵守严格的数据库版本控制，所以我不知道每个人的数据库情况如何。很多人都建立了自定义安装（随意呻吟）。我需要一个工具来区分他们的数据库和“官方”副本之间的差异。

我有一个工具，它有点工作，但有这么多……很多……要跟踪的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:56:11.060

您可以将数据库更改作为代码更改的一部分进行分发吗？然后，当应用重新启动时，它会检查是否需要在数据库上运行任何更新。

显然，您需要对 DB 模式进行版本化以避免多次应用相同的更新。

我知道一些执行此操作的应用程序（主要是在 Ruby 中，但也在 Java 中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T15:57:45.397

如果您的应用程序中已经有了更新机制，可以下载程序来更改已安装的源代码，为什么不打包并运行架构更改作为升级过程的一部分呢？那时我只是将更新作为 Java 应用程序的一部分运行。

我的团队使用[MyBatis 迁移工具](http://code.google.com/p/mybatis/wiki/Migration)来处理这些更改，该工具将每个模式更改表示为一个包含“进行更改”和“回滚”步骤的迁移脚本。数据库中存储了一个`changelog`表，其中列出了哪些更新已应用于该数据库，这使得`migrate`命令可以轻松确定在运行时需要应用哪些更新。这个特定工具可能仅在您控制数据库并能够运行 shell 命令和脚本来更改数据库时才真正有用，但您可以在您的方法中使用相同的概念 - 将每个模式更改打包为一个原子单元并运行它们从您的程序中将架构升级到当前版本，您可以在数据库本身中对其进行跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:57:10.420

您将需要一个包含用户正在运行的数据库版本的表，然后您需要从版本 n 升级到版本 n+1 的代码。假设您有一个有权进行架构更改的数据库用户，您可以像现在应用代码更改一样应用架构更改。

# storage - Ideal method for storing hierarchical data in HDF5

> ID：11799150
> 
> 赞同：1
> 
> 时间：2012-08-03T15:53:03.520
> 
> 标签：storage, hdf5, bigdata, pycassa

Hello Oracles of StackOverflow,

First time I managed to ask a question on stack overflow, so feel free to throw your cabbages at me. (or correct the way I should be asking my question)

I have this problem. I'm using HDF5 to store massive quantities of cookie information.

My Data is structured in the following way:

CookieID -> Event -> Key_value Pair

There are multiple events for each cookieID. But only one key_value pair per event.

I'd like to know what the best way I should store this in a HDF5\.

Currently, I'm storing each cookie as a seperate table within a group in the HDF5, using the cookieID as the name of the table. Unfortunately for me, with 10,000,000 cookies, HDF5 (or specifically PyTables) doesn't approve of this type of storage.

Specifically throwing this error:

> /CookieData`` is exceeding the recommended maximum number of children (16384)

I'm wondering if you could recommend the best way of storing this information.

Should I create a flat table? Should I keep this method? Is there something else I can do?

Help is appreciated. Thanks for reading.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:20:37.943

经过几个小时的研究，我发现我试图做的事情绝对是不可能的。

[以下链接](http://www.mail-archive.com/pytables-users@lists.sourceforge.net/msg00815.html)详细说明了将 HDF5 与可变长度嵌套子项一起使用的可能性。

我决定暂时使用平面文件，并希望这比数据库存储更有效。最后一个平面文件的问题是我必须复制文件中的值，否则这些值不应该存在。

如果其他人有任何更好的想法，将不胜感激。

# c# - Using AutoPostBack property for BulletedList

> ID：11799158
> 
> 赞同：0
> 
> 时间：2012-08-03T15:53:32.910
> 
> 标签：c#, asp.net, drop-down-menu, bulletedlist

I have a simple language switcher through a drop down list, however I would like to switch to a list. As far as I know, AutoPostBack is not supported for bulleted list but only the PostBack property. In this case, using postback leads the switcher not to function anymore. Is there a way to come over this?

```
<asp:DropDownList ID="cmbCulture" runat="server" AutoPostBack="True"
        OnSelectedIndexChanged="cmbCulture_SelectedIndexChanged"
        CssClass="lang_switcher"
        DisplayMode="LinkButton">
    <asp:ListItem Value="de-DE">DE</asp:ListItem>
    <asp:ListItem Value="en-US">EN</asp:ListItem>
</asp:DropDownList> 
```

And here is the code:

```
public partial class MasterPage : System.Web.UI.MasterPage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            HttpCookie cultureCookie = Request.Cookies["Culture"];
            string cultureCode = (cultureCookie != null) ? cultureCookie.Value : null;
            if (!string.IsNullOrEmpty(cultureCode))
            {
                cmbCulture.SelectedValue = cultureCode;
            }
        }
    }
    protected void cmbCulture_SelectedIndexChanged(object sender, EventArgs e)
    {
        //Save Current Culture in Cookie- will be used in InitializeCulture in BasePage
        Response.Cookies.Add(new HttpCookie("Culture", cmbCulture.SelectedValue));
        Response.Redirect(Request.Url.AbsolutePath); //Reload and Clear PostBack Data
    }
} 
```

So I would like to achieve something like:

front-end:

```
 <asp:BulletedList ID="cmbCulture" runat="server" PostBack="True" OnSelectedIndexChanged="cmbCulture_SelectedIndexChanged" DisplayMode="LinkButton">
            <asp:ListItem Value="en-US">EN</asp:ListItem>
            <asp:ListItem Value="de-DE">DE</asp:ListItem>
        </asp:BulletedList> 
```

back-end:

```
public partial class MasterPage : System.Web.UI.MasterPage
{
protected void Page_Load(object sender, EventArgs e)
{
if (!Page.IsPostBack)
  {
    HttpCookie cultureCookie = Request.Cookies["Culture"];
    string cultureCode = (cultureCookie != null) ? cultureCookie.Value : null;
    if (!string.IsNullOrEmpty(cultureCode))
    {
       cmbCulture.SelectedItem.Value = cultureCode;
    }
  }
}
protected void cmbCulture_SelectedIndexChanged(object sender, EventArgs e)
{
//Save Current Culture in Cookie- will be used in InitializeCulture in BasePage
Response.Cookies.Add(new HttpCookie("Culture", cmbCulture.SelectedItem.Value));
Response.Redirect(Request.Url.AbsolutePath); //Reload and Clear PostBack Data
}
} 
```

SelectedItem.Value drops an error of "Object reference not set to an instance of an object." Is there a way to get the value of the clicked listitem in my bulletedlist? This may be the solution.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:42:37.023

有很多方法可以做到这一点，这取决于你的其余逻辑是什么，你可以在前端像这样简单地做到这一点：

```
<ul>
    <li><asp:HyperLink ID="hypDE" runat="server" Text="DE" NavigateUrl="yourpage.aspx?culture=DE" /></li>
    <li><asp:HyperLink ID="hypUS" runat="server" Text="US" NavigateUrl="yourpage.aspx?culture=US" /></li>
</ul> 
```

在 yourpage.aspx 的代码隐藏中，您可以通过执行以下操作来设置适当的文化：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        string culture = Request.QueryString["culture"];
    }
} 
```

但是还有更多的方法可以做到这一点，您基本上可以使用任何数据控件，例如列表视图、中继器、...

如果您考虑通过例如从 xml 文件或从数据库或其他任何方式加载站点文化来使其更具动态性，则应使用数据控件。这是一个带有中继器的示例：

前端：

```
<asp:Repeater ID="repCultures" runat="server" OnItemDataBound="repCultures_ItemDataBound">
    <HeaderTemplate>
        <ul>
    </HeaderTemplate>
        <li>
            <asp:HyperLink ID="hypCulture" runat="server" />
        </li>
    <FooterTemplate>
        </ul>
    </FooterTemplate>
</asp:Repeater> 
```

后端：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        //This is where you would get your cultures out of an xml or database
        //I'm using a non-dynamic list to make a simple representation
        List<string> cultures = new List<string>() { "de-DE", "en-US", "en-UK" };
        repCultures.DataSource = cultures;
        repCultures.DataBind();
    }
}

protected void repCultures_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
    {
        string culture = e.Item.DataItem as string;
        HyperLink hypCulture = e.Item.FindControl("hypCulture") as HyperLink;
        hypCulture.Text = culture;
        hypCulture.NavigateUrl = string.Format("~/yourpage.aspx?culture={0}", culture);
    }
} 
```

然后再次在 yourpage.aspx 上，您将使用查询字符串来获取您想要的文化。

同样，有很多方法可以做到这一点，所以如果这对你不起作用，请让我更多地了解你的项目，我会建议一种更好的方法。

希望这会有所帮助！

编辑：

首先将事件更改为：

前端：

```
<asp:BulletedList ID="cmbCulture" runat="server" OnClick="cmbCulture_Click" DisplayMode="LinkButton"> 
```

后端：

```
protected void cmbCulture_Click(object sender, BulletedListEventArgs e)
{
    //Save Current Culture in Cookie- will be used in InitializeCulture in BasePage
    Response.Cookies.Add(new HttpCookie("Culture", cmbCulture.Items[e.Index].Value));
    Response.Redirect(Request.Url.AbsolutePath); //Reload and Clear PostBack Data
} 
```

这应该有效。

# html - 试图在我的页面中心对齐 html 按钮

> ID：11799159
> 
> 赞同：115
> 
> 时间：2012-08-03T15:53:37.300
> 
> 标签：html, css, button, alignment, vertical-alignment

我正在尝试将 HTML 按钮准确地对齐在页面的中心，而不管使用的浏览器如何。它要么向左浮动，同时仍处于垂直中心，要么位于页面上的某个位置，如页面顶部等。

我希望它垂直和水平居中。这是我现在写的：

```
<button type="button" style="background-color:yellow;margin-left:auto;margin-right:auto;display:block;margin-top:22%;margin-bottom:0%">
   mybuttonname
</button> 
```

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-08-03T15:56:43.650

这是您的解决方案：[JsFiddle](http://jsfiddle.net/7Laf8/)

基本上，将您的按钮放入带有居中文本的 div 中：

```
<div class="wrapper">
    <button class="button">Button</button>
</div> 
```

具有以下样式：

```
.wrapper {
    text-align: center;
}

.button {
    position: absolute;
    top: 50%;
} 
```

给猫剥皮的方法有很多，这只是其中一种。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2015-09-26T00:00:54.193

您可以通过简单的使用将 a 居中`button`而不使用`text-align`在父级上`div``margin:auto; display:block;`

例如：

**HTML**

```
<div>
  <button>Submit</button>
</div> 
```

**CSS**

```
button {
  margin:auto;
  display:block;
} 
```

**查看实际情况：** [CodePen](http://codepen.io/maudulus/pen/avBdpL)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-07-30T07:30:04.647

作者编辑：这是一个非常过时的答案！Flexbox 或网格要好得多。

* * *

我最近真的很喜欢`display: table`给东西一个固定的大小，比如可以`margin: 0 auto`工作。让我的生活轻松了很多。您只需要克服“表格”显示并不意味着表格 html 的事实。

它对于响应式设计特别有用，其中 50% 的事情变得毛茸茸和疯狂，而 -50% 的事情变得无法管理。

```
style
{
   display: table;
   margin: 0 auto
} 
```

[提琴手](https://jsfiddle.net/Z52eR/)

此外，如果您有两个按钮并且您希望它们具有相同的宽度，您甚至不需要知道每个按钮的大小来使它们具有相同的宽度 - 因为表格会神奇地为您折叠它们。

![在此处输入图像描述](../Images/4a1d0fd7e3a0791722a9864a15119c2d.png)

[提琴手](https://jsfiddle.net/AK674/2/)

（如果它们是内联的并且您想将两个按钮并排居中，这也有效 - 尝试使用百分比来做到这一点！）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-03T16:20:28.150

试试这个，它很简单，你不能对你的 .css 文件进行更改，这应该可以

```
<p align="center">
<button type="button" style="background-color:yellow;margin-left:auto;margin-right:auto;display:block;margin-top:22%;margin-bottom:0%"> mybuttonname</button>
</p> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-01-24T23:23:05.340

这是所要求的解决方案

```
<button type="button" style="background-color:yellow;margin:auto;display:block">mybuttonname</button>
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-07-25T03:33:26.250

有多种方法可以解决相同的问题。PFB他们两个-

**第一种方式使用位置：固定**- 位置：固定；相对于视口的位置，这意味着即使页面滚动，它也始终保持在同一个位置。将 left 和 top 值添加到 50% 会将其置于屏幕中间。

```
 button {
   position: fixed;
   left: 50%;
   top:50%;
 } 
```

**使用边距的第二种方式：auto** -margin: 0 auto; 用于水平居中，但边距：自动；一直拒绝为垂直定心工作……直到现在！但实际上绝对居中只需要一个声明的高度和这些样式：

```
button {
  margin: auto;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  height: 40px;
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-11-01T11:45:34.807

对我来说，它使用 flexbox 工作。

在父 div / 元素周围添加一个 css 类：

```
.parent {
    display: flex;
} 
```

和按钮使用：

```
.button {
    justify-content: center;
} 
```

您应该使用父 div，否则按钮不“知道”页面/元素的中间是什么。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-03T15:57:55.587

将它放在另一个 div 中，使用 CSS 将按钮移动到中间：

```
<div style="width:100%;height:100%;position:absolute;vertical-align:middle;text-align:center;">
    <button type="button" style="background-color:yellow;margin-left:auto;margin-right:auto;display:block;margin-top:22%;margin-bottom:0%">
mybuttonname</button> 
</div>​ 
```

这是一个例子：[JsFiddle](http://jsfiddle.net/U2B3x/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-11T09:28:12.243

使所有父元素具有 100% 宽度和 100% 高度并使用*display: table;* 并*显示：表格单元格；*，检查工作样本。

[工作 Git 版本](https://github.com/helloritesh000/button-alignment-to-center)

```
<!DOCTYPE html>
<html>
<head>
<style>
html,body{height: 100%;}
body{width: 100%;}
</style>
</head>
<body style="display: table; background-color: #ff0000; ">

<div style="display: table-cell; vertical-align: middle; text-align: center;">
    <button type="button" style="text-align: center;" class="btn btn-info">
       Discover More
    </button>
</div>

</body>
</html> 
```

# postgresql - unix时间戳的PostgreSQL字段类型？

> ID：11799160
> 
> 赞同：65
> 
> 时间：2012-08-03T15:53:48.870
> 
> 标签：postgresql, postgresql-9.1

unix 时间戳的 PostgreSQL 字段类型：

*   将其存储为 unix 时间戳
*   也可以将其检索为 unix 时间戳。

一直在经历[Date/Time Types ^(postgreSQL V 9.1)](http://www.postgresql.org/docs/9.1/static/datatype-datetime.html)。

* * *

*   整数是最好的方法吗！？（这是我在使用 MySQL 时所做的。曾经使用过`int(10)`）

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2014-04-09T19:40:17.497

现在 (2014-04-09) 的 unix 纪元时间戳是 1397071518。所以我们需要一种能够存储至少这么大数字的数据类型。

**有哪些数据类型可用？**

如果您参考[有关数字类型的 PostgreSQL 文档，](http://www.postgresql.org/docs/9.1/static/datatype-numeric.html)您会发现以下选项：

```
Name      Size     Minimum               Maximum
smallint  2 bytes  -32768                +32767
integer   4 bytes  -2147483648           +2147483647
bigint    8 bytes  -9223372036854775808  +9223372036854775807 
```

**这在时间表示方面意味着什么？**

现在，我们可以使用[纪元转换器](http://www.epochconverter.com/)将这些数字转换为日期：

```
Name      Size     Minimum Date      Maximum Date
smallint  2 bytes  1969-12-31        1970-01-01
integer   4 bytes  1901-12-13        2038-01-18
bigint    8 bytes  -292275055-05-16  292278994-08-17 
```

请注意，在最后一个例子中，使用秒数会让您进入过去和未来，这可能无关紧要。我给出的结果是如果您以毫秒为单位表示 unix 纪元。

**所以我们学了什么？**

1.  `smallint`显然是一个糟糕的选择。
2.  `integer`[目前是一个不错的选择，但您的软件将在 2038 年爆炸。Y2K 启示录与2038 年问题](https://en.wikipedia.org/wiki/Year_2038_problem)无关。
3.  **使用`bigint`是最好的选择。**这是针对大多数可以想象的人类需求的未来证明，尽管[医生](https://en.wikipedia.org/wiki/Doctor_%28Doctor_Who%29)可能仍然会[批评](https://en.wikipedia.org/wiki/Utopia_%28Doctor_Who%29)它。

您可能会或可能不会考虑是否最好以另一种格式（例如[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)标准）存储您的时间戳。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-03T15:57:00.320

我只是使用 TIMESTAMP WITH(OUT) TIME ZONE 并在需要时使用 EXTRACT 来获取 UNIX 时间戳表示。

相比

```
SELECT NOW(); 
```

和

```
SELECT EXTRACT(EPOCH FROM NOW()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T16:00:09.980

整数会很好，但还不够好，因为 postgresql 不支持无符号类型

# http - 如何使用 html AND 附件响应 HTTP 请求？

> ID：11799162
> 
> 赞同：3
> 
> 时间：2012-08-03T15:53:52.117
> 
> 标签：http, attachment, content-disposition

如何使用页面的 HTML 和附件响应 HTTP 请求？

例如，您导航到 /start_download

页面显示“感谢您下载！”

浏览器会提示另存为，而无需导航到其他地方。

我知道如何使用“Content-Disposition: attachment; filname=file.txt”，但我不知道是否可以在附件之前加载页面（即一个请求的混合响应）。

如果有帮助，我正在使用 Python 的 BaseHTTPRequestHandler。

PS：其他网络服务器等...不是一个选项，因为这是作业规范。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T15:57:22.823

如果您将这样的标签添加到“感谢页面”的标题中，那么浏览器会为您执行此操作。

```
<meta http-equiv="Refresh" content="3;URL=_url_with_attachment_" /> 
```

然后你就可以`_url_with_attachment_`提供下载了。3 是它到达您想要的位置之前的秒数。

如果您真的想在标题中执行此操作而不影响提供的 HTML，那么您将提供

```
Refresh: 3;URL=_url_with_attachment_ 
```

# java - 为什么我找不到 BufferedWriter 的 javadoc？

> ID：11799176
> 
> 赞同：-5
> 
> 时间：2012-08-03T15:54:49.967
> 
> 标签：java, netbeans

我使用 NetBeans 编写我的 Java 代码。通常我可以在一些关键字上移动鼠标并按'Alt'+'F1'来调出关键字的javadoc。

但是对于 BufferedWriter，NetBeans 显示“找不到符号”，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:47:04.470

代码编译没有错误，还是拒绝？如果您无法编译代码，请确保您拥有：

```
import java.io.BufferedWriter; 
```

在代码的开头，否则 Netbeans 将无法确定令牌“BufferedWriter”表示哪个类，因此它无法确定哪个 Javadoc 属于该类。

# asp.net-mvc - 实体框架将 s 添加到我的 .dbo

> ID：11799180
> 
> 赞同：14
> 
> 时间：2012-08-03T15:55:11.403
> 
> 标签：asp.net-mvc, visual-studio-2010

我目前正在使用“Entity Framework DbContext”，但没有找到 towars.dbo 的异常。这很奇怪，因为在我的网站上我一直在询问 towar.dbo 但没有 towars.dbo 你知道问题出在哪里吗？

```
- InnerException    {"Invalid object name 'dbo.Towars'."}   System.Exception {System.Data.SqlClient.SqlException} 
```

我关于 Towar 的所有事情（当然在我的程序中的位置不同）：

```
public class ProductController : Controller
{
    //
    // GET: /Product/
        public ITowarRepository repository;

        public ProductController(ITowarRepository productRepository) 
        {
        repository = productRepository;
        }

        public ViewResult List()
        {
            return View(repository.Towar);
        }

}

public interface ITowarRepository
    {
        IQueryable<Towar> Towar { get; }
    }

public DbSet<Towar> Towar { get; set; }

public class EFTowarRepository : ITowarRepository
    {
        public EFDbContext context = new EFDbContext();
        public IQueryable<Towar> Towar
        {
            get { return context.Towar; }
        }
    }
public class Towar
    {
        [Key]
        public int Id_tow { get; set; }
        public string Nazwa { get; set; }
        public string Opis { get; set; }
        public decimal Cena { get; set; }
        public int Id_kat { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T16:07:02.990

将以下行添加到您的上下文中：

```
modelBuilder.Conventions.Remove<PluralizingTableNameConvention>(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T16:02:47.827

您可以通过使用 fluent API`Towar`覆盖类中的`OnModelCreating`方法来告诉 EF 映射到表，如下所示：`DBContext`

```
public class EFDbContext : DbContext
{
   protected override void OnModelCreating(DbModelBuilder modelBuilder)
   {
      modelBuilder.Entity<Towar>().ToTable("Towar");
   }
} 
```

现在 EF 将寻找`Towar`table 而不是`Towars`. 如果您没有创建这些表，那么您还有其他一些问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-03T15:59:45.403

EF Code First 自动将表名复数。使用`[Table]`属性将实体显式映射到表名：

```
[Table("Towary")]
public class Towary
{
   // Whatever properties
} 
```

看起来也有一种方法可以禁用复数，请参阅[实体框架代码优先命名约定 - 回到复数表名？](https://stackoverflow.com/questions/4425027/entity-framework-code-first-naming-conventions-back-to-plural-table-names).

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-12T05:21:41.847

```
using System.Data.Entity.ModelConfiguration.Conventions;

namespace MVCDemo.Models

     {
         public class EmployeeContext : DbContext

         protected override void OnModelCreating(DbModelBuilder modelBuilder)
         {
             modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
         }
} 
```

为了完整起见@四十二

# emacs - emacs 24 ansi-term 似乎忽略了主题颜色

> ID：11799184
> 
> 赞同：6
> 
> 时间：2012-08-03T15:55:29.190
> 
> 标签：emacs, emacs24, ansi-colors

我已经使用 brew 从 OSX 上的 Emacs 23 升级到 Emacs 24。现在，我正在更新我的 .emacs 以使用来自 emacs 24 esp 的新内容。新的包管理器和内置的颜色主题。我从 marmalade 安装了 zenburn 主题（我认为），从我的扩展目录中删除了旧的颜色主题扩展，并删除了将旧的颜色主题扩展添加到加载路径的配置。

我注意到的一件事是 ansi-term 颜色不遵循颜色主题。在 emacs 23 中，我的 ansi-term 看起来像这样： ![emacs23 ansi-term 颜色](../Images/f62a6cfbbde6a7210d6a059b4c16411a.png)

但现在它看起来像这样： ![在此处输入图像描述](../Images/b1f74e74bf15055506da715f78526ddc.png)

我检查了 ansi-color-names-vector 和 ansi-color-map。他们都报告了 zenburn 的颜色。切换主题仍然不会改变 ansi-term 颜色，所以我认为这不是主题特定的问题。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T21:22:52.263

`ansi-term-color-vector`新版本的 zenburn 主题中未设置该变量。我提交了一个[拉取请求](https://github.com/bbatsov/zenburn-emacs/pull/71)来修复它。

同时，只需使用以下行：

```
(setq ansi-term-color-vector [unspecified "#3f3f3f" "#cc9393" "#7f9f7f" "#f0dfaf" "#8cd0d3" "#dc8cc3" "#93e0e3" "#dcdccc"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:31:32.587

外部颜色主题无需配置即可正常工作。只需使用 保存您的颜色主题`color-theme-print`，并将其输出 FUNCTION 插入 .emacs 中，这个：

```
(and
 (eq window-system 'x)
 (color-theme-FUNCTION) ) 
```

# visual-studio-2010 - F12 查找所有引用，而不是去定义

> ID：11799187
> 
> 赞同：2
> 
> 时间：2012-08-03T15:55:39.900
> 
> 标签：visual-studio-2010

最近我的 F12 键在 Visual Studio 2010 Professional SP1 中似乎没有按预期工作。它应该转到所选内容的定义，但它正在执行查找所有引用任务 - Ctrl+K、R。

有谁知道我该如何解决这个问题？当我经常使用这个快捷方式时，它变得非常烦人 - 我正在研究一个大型解决方案，它有时会短暂锁定 Visual Studio，试图找到所有参考。

我试图去工具-> 选项-> 环境-> 键盘-> 重置没有成功。

另一件事：它只是有时会这样做，我还没有区分一种模式何时可以按预期工作和不按预期工作。

**编辑：** 我忘记说的一件事是，当它不起作用时，我第二次按 F12 时它确实将我带到了定义，它只是第一次按下找到所有引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:31:21.690

您可以为任何命令设置任何键盘快捷键。键入 edit.gotodefinition 选择命令并按 F12 分配键。

像这样 ![在此处输入图像描述](../Images/d0d0e712552b63aa411b922736de32d2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:08:48.920

也许您的项目中的类或函数有多个定义？

复制/粘贴类定义后我遇到了这个问题。在类名上按 F12 后，它首先会显示一个搜索结果，显示在其中找到类名的两个文件。如果再次按 F12，它将跳转到搜索结果中的第一个。

您知道您可以使用 Ctrl + - (减号) 跳回吗？:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-06T20:16:05.230

我今天在使用 VC++ 2013 时遇到了这种错误行为：按 F12 不再跳转到方法的定义，而是显示对该方法的引用列表。

结果发现需要 IntelliSense 才能使命令**Edit.GoToDefinition**工作，我今天早上禁用了该命令。将**Tools>Options>Text editor>C/C++>Advanced>IntelliSense>Disable IntelliSense**设置回*False*解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-18T07:38:35.760

在 Visual Studio 中打开项目之前删除 SUO 文件。不幸的是，您每次都必须在打开项目之前执行此操作。当 Visual Studio 停止重新生成设计器文件时，这也将起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-10T21:01:31.357

我遇到了同样的问题，我的 F12 键不起作用，其他功能键也不起作用。花了一些令人沮丧的时间谷歌搜索后，我发现我的花哨键盘的功能键被锁定了！所以在尝试工具->选项之前也要检查一下

# c++ - 将参数从处理器传递到控制器；VST 3.5

> ID：11799190
> 
> 赞同：0
> 
> 时间：2012-08-03T15:56:12.920
> 
> 标签：c++, vst

我是新来的，所以首先：“大家好！！”

我在将参数更改从 process() 传递到控制器时遇到了一个真正的问题`data.outputParameterChanges`。看看下面的代码（`kDataParamId`是一个正确设置的参数的 ID）：

```
tresult PLUGIN_API AGain::process (ProcessData& data) 
{ 
IParameterChanges* paramChanges = data.outputParameterChanges; 

if (paramChanges) 
{ 
    int32 index; 
    IParamValueQueue* paramQueue = 
           paramChanges->addParameterData(kDataParamId, index);  

    if(paramQueue) 
    { 
        paramQueue->addPoint(0, 0.1, index); 
        paramQueue->addPoint(0, 0.2, index);              
        paramQueue->addPoint(0, 0.3, index);              

        fprintf(stderr 
           , "[MyVSTPlugin] paramQueue->getPointCount() == %d\n" 
           , paramQueue->getPointCount()); 
    } 

  } 
  return kResultOk; 
} 
```

我得到的点数是“1”。此外，`setParamNormalized()`（作为接收参数更改的控制器的一部分）从主机以“0.3”调用一次。我可能很天真，但我希望参数点计数返回“3”，因此三个调用分别为`setParamNormalized()`0.1、0.2 和 0.3。我在这里想念什么？？？

对此的任何帮助和评论都非常感谢！

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:35:33.090

使用参数更改将参数从处理器发送回控制器是不可能的。您需要使用 IConnectionPoint API 并发送消息。

您只能将音频参数从控制器发送到处理器。并且主机也可以直接发送给处理器（但是主机在向处理器发送参数时也会通知控制器，让控制器更新编辑器视图）

数据中的 outputparameterchanges 成员只有经过主机才能读取。

现在的问题也可能是您为什么要将消息从处理器发送回控制器？

为此，SDK 提供了如何使用 IMessages 更新音频回调仪表的示例

# vb.net - 无法使用 LDAP 将计算机添加到活动目录

> ID：11799192
> 
> 赞同：0
> 
> 时间：2012-08-03T15:56:18.033
> 
> 标签：vb.net, active-directory, ldap

使用以下代码：

```
Private Sub Button12_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnsubmit.Click

    'see if it already exists
    If DirectoryEntry.Exists("LDAP://CN=" & AdEntry.Text & ",OU=" & Machinetype.Text & ",OU=Computers,OU=" & USlocation.Text & ",OU=North America,DC=company,DC=com") = True Then
        MsgBox("Object already exists")
    Else

        Try

            'Set the directory entry
            Dim de As New DirectoryEntry("LDAP://OU=" & Machinetype.Text & ",OU=Computers,OU=" & USlocation.Text & ",OU=North America,DC=company,DC=com")
            Dim newComputer As DirectoryEntry = de.Children.Add("CN=TESTER", "computer")

            newComputer.CommitChanges()
            MsgBox("Computer added!")

        Catch ex As Exception
            MsgBox("Error adding computer")
        End Try

    End If
End Sub 
```

结束类

根据[http://msdn.microsoft.com/en-us/library/ms180851(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms180851(v=VS.80).aspx)这应该可以工作，但它会返回一个异常。有什么我想念的吗？

# java - 如何将键值作为其他 Map 的键？

> ID：11799194
> 
> 赞同：0
> 
> 时间：2012-08-03T15:56:23.663
> 
> 标签：java

我想将值放在 HashMap 中，如下所示，

```
 map1.put("A",3);

    map1.put("A",5);
    map1.put("B",4);
    map1.put("B",8); 
```

现在我想将 ("A",3) 键/值对作为其他映射的键，比如说 ("A",3) 与其他映射的键1相同 map2.put(key1, abc);

对其他人也是如此。你能帮我这样做吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:57:30.810

您可以获得第一个 hashMap`entrySet`并将其用作第二个 hashMap 的键。

[entrySet](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#entrySet%28%29)返回

> 设置此地图中包含的映射的视图

例如，

1) 设置 firstMapEntries = map1.entrySet();

2) 创建第二张地图

3) 迭代 firstMapEntries。

4)添加到第二张地图 secondMap.put(firstMapEntry, "abc")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:04:31.340

您可以使用该[`entrySet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#entrySet%28%29)方法将这些（键，值）对作为一个集合。遍历该集合并将元素用作其他`HashMap`.

像这样的东西：

```
// given HashMap<String, Integer> map1:
for (Map.Entry<String, Integer> entry : map1.entrySet())
    map2.put(entry, "some string value"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:06:32.123

或者您可以将它们存储在 Pair 中，如下所示：

```
class Pair
{
    public String first;
    public Integer second;

    public Pair(String first, Integer second)
    {
        this.first = first;
        this.second = second;
    }
} 
```

然后创建一个 Pair - String 对的 HashMap：

```
HashMap<Pair, String> map = new HashMap<Pair, String>(); 
```

# conditional-statements - 显示标签内的条件检查

> ID：11799196
> 
> 赞同：2
> 
> 时间：2012-08-03T15:56:32.480
> 
> 标签：conditional-statements, displaytag

我在我的 struts 2 应用程序中使用显示标签显示学生列表（姓名、标记、结果）。

如果学生得分超过 80，我需要用绿色显示整行，否则我需要用红色显示。下面是我的场景，我不熟悉显示标签，请帮我解决这个问题。

```
<display:table name="studentList" id = "student" cellspacing="1px" class="center">

<display:caption class="caption"><b>Student Mark List</b></display:caption>

if(mark>=80)
{
<display:column title="Student Name" property="name" class="green"> </display:column>
<display:column title="Student Mark" property="mark" class="green"></display:column>
<display:column title="Student Result" property="result" class="green"> </display:column>
}
else
{
<display:column title="Student Name" property="name" class="red"> </display:column>
<display:column title="Student Mark" property="mark" class="red"></display:column>
<display:column title="Student Result" property="result" class="red"> </display:column>
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T12:11:12.603

我在我的 jsp 开头添加了这个 taglib

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

我在下面添加了代码

```
<display:table name="studentList" id = "student" cellspacing="1px" class="center">

<display:caption class="caption"><b>Student Mark List</b></display:caption> 
```

```
<c:choose>
            <c:when test="${mark>='80'}">
                <c:set var="css" value="tableColumnGreen"/>
            </c:when>                                              

            <c:otherwise>
                <c:set var="css" value="tableColumnRed"/>
            </c:otherwise>
 </c:choose>
<display:column title="Student Name" property="name" class="${css}"> </display:column>
<display:column title="Student Mark" property="mark" class="${css}"></display:column>
<display:column title="Student Result" property="result" class="${css}"> </display:column> 
```

这对我有帮助。谢谢大家。

# java - 带有换行符和制表符的 TextLayout

> ID：11799201
> 
> 赞同：1
> 
> 时间：2012-08-03T15:56:50.507
> 
> 标签：java, swing, text, line-breaks, tabular

我有一个`JComponent`绘制多行属性的字符串，`Textlayout`它运行得很好：

```
public static float drawMultiAttributedString(Graphics2D g2d, AttributedString str, String plainString, int maxWidth, int startX, float startY){

    FontRenderContext fontRenderCtx = g2d.getFontRenderContext();

    AttributedCharacterIterator attrCharIter = str.getIterator();
    LineBreakMeasurer lineBreakMeasurer = new LineBreakMeasurer(attrCharIter, fontRenderCtx);
    float x = startX;
    float y = startY;

    int next; 
    int limit; //länge bis zum nächsten umbruch
    int charat; 
    String tested = plainString;

    while (lineBreakMeasurer.getPosition() < attrCharIter.getEndIndex()) { 

          next = lineBreakMeasurer.nextOffset(maxWidth);
          limit = next;
          charat = tested.indexOf("\n", lineBreakMeasurer.getPosition()+1);
          if(next > (charat - lineBreakMeasurer.getPosition()) && charat != -1){
             limit = charat - lineBreakMeasurer.getPosition();
          }
          TextLayout layout = lineBreakMeasurer.nextLayout(maxWidth, lineBreakMeasurer.getPosition() + limit, false);

              y += layout.getAscent(); //höhe des haupttextes

          layout.draw(g2d, x, y);

          y += layout.getDescent() + layout.getLeading(); 
    }

    return y - startY;
} 
```

问题是，它`Textlayout`不会呈现我需要的制表符。有谁知道我如何包括制表符？有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:47:48.190

带有一个或多个自定义渲染器的 A[`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)可能是更简单的选择。`DefaultTableCellRenderer`extends `JLabel`，它允许[HTML](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)和特定于语言环境的[格式](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)。

# javascript - jQuery/Javascript 如果 css 正确 > 转到这个 css 值

> ID：11799208
> 
> 赞同：-4
> 
> 时间：2012-08-03T15:57:10.830
> 
> 标签：javascript, jquery, css, if-statement

谁能告诉我为什么我的代码中的条件永远不会是真的？

[http://jsfiddle.net/eygLU/2/](http://jsfiddle.net/eygLU/2/)

解决了：

这是因为我正在根据一个数字检查一个字符串并且需要使用`parseInt()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T16:00:23.867

你需要`parseInt()`：

```
$('.zeppelin').css('right') > winWidth 
```

`$('.zeppelin').css('right')`将返回`[integer]px`。因此，您将字符串类型与整数类型进行比较。

尝试：

```
parseInt($('.zeppelin').css('right')) > winWidth 
```

* * *

另外，作为旁注，查看您的代码，您有：

```
'-'+zepWidth 
```

如果您希望反转整数，请将其乘以`-1`：

```
(zepWidth*-1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:19:00.363

正如 Curt 提到的，您缺少一个 parseInt，但您还需要停止动画，因此当您重置它时，div 不会飞回屏幕：

也需要

```
overflow: hidden 
```

在 html 和 body 上摆脱滚动条

[http://jsfiddle.net/thundercracker/eygLU/4/](http://jsfiddle.net/thundercracker/eygLU/4/)

编辑：它也没有重置，因为在“-”+zepWidth 之后没有+“px”

编辑：更新链接

# c# - JIRA grant permission to view users

> ID：11799209
> 
> 赞同：1
> 
> 时间：2012-08-03T15:57:11.933
> 
> 标签：c#, soap, jira

Is it possible to grant a role the ability to view/get the users list? I ask this because I am working on a C# application that lets developpers automatically create JIRA issues (using the SOAP api) from within the program, and I'd like to be able to let them select the assignee from a dropdown list. However, the account I connect to JIRA with needs to be an administrator, and I do not want to have an administrator account's credentials in plain text inside the codebase, since it is open to everyone.

This is what I am doing:

```
JiraSoapServiceClient jira = new JiraSoapServiceClient();
string token = jira.login("non_admin_account", "password");

...

//This call throws an exception saying the account needs administrative rights
var projectRoleActors = jira.getProjectRoleActors(token, projectRole,
                                                  jira.getProjectByKey(token, "EX")); 
```

If I could give "non_admin_account" some kind of permission to grab the users list that would be perfect.. but I'm not sure that's possible.

Any solutions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:09:34.163

Give your use Project Administration permission instead of JIRA administration. See the method hasProjectRolePermission in DefaultProjectRoleService

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T08:37:14.360

One solution to your question might be to create two users, one with project admin permissions, and another as a normal user:

*   Use the admin user to get the list of users - create a [CLI](https://bobswift.atlassian.net/wiki/display/JCLI/JIRA+Command+Line+Interface) program, or use the remote SOAP `C#` program to get the list of users and store them in a text file. Make sure that the program isn't visible to the other users (for example, put it on your Jira server). You can either run this using the cron/scheduler every 5 minutes or run it trough the other program.
*   Use the other account for everything else in your `C#` program, let it read the list of users from the first program.

# ruby-on-rails - 为什么我的 Active Record 验证不生效？

> ID：11799211
> 
> 赞同：0
> 
> 时间：2012-08-03T15:57:15.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我在我的应用程序中有一个评论模型，供用户对电影发表评论。我正在为每个单独的电影在 Show 视图中呈现一个新评论的表单。但是，当我尝试提交空白评论以检查错误是否显示在页面上时，它们不会。我可能做错了什么？

我的评论模型：

```
class Review < ActiveRecord::Base
  attr_accessible :content
  belongs_to :user
  belongs_to :movie

  validates :user_id, presence: true
  validates :movie_id, presence: true
  validates :content, presence: true, length: { maximum: 1000 }

end 
```

我的评论控制器：

```
class ReviewsController < ApplicationController
  before_filter :signed_in_user, only: [:new, :create, :destroy]

  def new
  end

  def create

    #I'm doing this to get around the mass assignment error.

    movie_id = params[:review].delete(:movie_id)
    @review = current_user.reviews.build(params[:review])
    @review.movie_id = movie_id

    if @review.save
      flash[:success] = "Review created!"
      redirect_to movie_path(@review.movie)
    else
      redirect_to movie_path(@review.movie)
    end
  end

  def destroy
  end
end 
```

我的表格：

```
<%= form_for(:review, url: reviews_path) do |f| %>

  <%= f.hidden_field :movie_id %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Write a new review..." %>
  </div>
  <%= f.submit "Submit", class: "btn btn-large btn-primary" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:05:12.670

当您从 #create 方法重定向时，您将丢失错误...更改为

```
if @review.save
  flash[:success] = "Review created!"
  redirect_to movie_path(@review.movie)
else
  render :new
end 
```

# c# - .net4 BinarySearch 在排序列表中

> ID：11799215
> 
> 赞同：1
> 
> 时间：2012-08-03T15:57:44.180
> 
> 标签：c#, .net, c#-4.0

我想在 c# 4.0 的排序列表上使用二进制搜索选项。我一直在研究旧的二进制搜索：

[我将如何使用 C# 搜索一系列范围值](https://stackoverflow.com/questions/461439/how-would-i-search-a-range-of-ranged-values-using-c-sharp)

我想要一些关于如何使用 binarySearch 在两个日期之间进行范围搜索的帮助。我有一个包含许多日期的列表，我想在两个日期之间快速搜索这个大列表并返回找到的项目（如果有的话）。我认为二进制搜索会很快，因为它会在排序时迅速摆脱不必要的比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:34:09.173

假设：

*   你有一个给定类型 T 的集合、有序列表或数组。
*   所述集合是一个*袋子*（允许重复）而不是一个*集合*（独特的项目）。

你需要

*   进行二分搜索以找到符合您的“来自”标准的项目，即下限。

    由于这是一个二分搜索，并且您有一个*bag*而不是*set*，因此您不能保证这是集合中满足 from 条件的第一个项目。这意味着你需要...

*   备份到与“来自”条件匹配的第一个项目。这是一个顺序操作。

    此时，您有了迭代的起点。您所要做的就是从这一点开始按顺序遍历集合......

*   **而**“通过”标准，上限条件为真。

这可能建议对上限和下限测试使用自定义比较器。

它还可能以 LINQy 扩展方法的形式提出解决方案。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:20:48.257

假设您的列表是 List 并且您的日期是 DateTime 您可以通过这种方式执行 List.BinarySearch(...)

```
List<DateTime> l;
int startIndex = l.BinarySearch(beginDate);
int endIndex = l.BinarySearch(endDate); 
```

此时，您已经有了 beginDate 和 endDate 之间的日期范围。现在您可以让它们在两个索引之间进行迭代。

如果您想在未找到确切日期的情况下找到最接近的日期，则无法执行二进制搜索。在这种情况下，您必须重新实现您的数据结构（在您的情况下，您的 List 必须被一些强大的结构替换）以支持由二叉搜索树组成的范围搜索算法，您将在其中存储每年并且每个节点将包含一个新的二叉搜索树，该树将包含属于该年的所有月份，现在每个节点将包含一个新的二叉搜索树，该树将包含该月的所有日期，依此类推。

# objective-c - 在辅助线程中设置 NetworkActivityIndi catorVisible 值是否安全？

> ID：11799226
> 
> 赞同：5
> 
> 时间：2012-08-03T15:58:30.637
> 
> 标签：objective-c, ios, nsoperation, nsoperationqueue

我想知道 AppDelegate 是否是线程安全的？我目前有一个在辅助线程上运行网络任务的操作，当任务开始时，我想设置`NetworkActivityIndicatorVisible`为`YES`，当任务完成时，将其设置为`NO`。我是否必须始终在主线程中调用它，或者我可以在当前运行循环线程中调用它？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T18:04:59.523

一般来说，UIKit 不是线程安全的。虽然您可能能够“摆脱”某些事情，但您应该始终在主线程上做 UIKit 的事情。有一些有据可查的例外。

从后台线程执行此操作的模式很简单。

```
dispatch_async(dispatch_get_main_queue(), ^{
    // Put any code you want to execute in the main thread here.
}); 
```

您传递给 dispatch_async 的块内的代码将被安排在主运行循环中运行。

# wxpython - 使用 wxPython 构建帮助对话框

> ID：11799227
> 
> 赞同：1
> 
> 时间：2012-08-03T15:58:37.110
> 
> 标签：wxpython

我一直热衷于构建一个对话框来存储和呈现我的 wxPython 应用程序的帮助文档。目前，帮助文档以最小格式存储为纯文本文件。我可以预见将文档直接导入笔记本类或类似的东西。我希望有人可以指导我构建类似这样的东西我应该寻找的东西：![在此处输入图像描述](../Images/78233d5aed1cc9e15a571aea6adc25ed.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:28:48.973

我使用 HTMLWindow 来显示一些格式良好的文本。它只接受基本的 HTML 结构，但对于这类事情已经足够了。我[这里](http://www.blog.pythonlibrary.org/2008/06/11/wxpython-creating-an-about-box/)有一个例子。否则，您可能可以在只读模式下使用其中一个 TextCtrl 小部件。wxPython 演示中有很多示例，您可以查看这些小部件。

# multithreading - 休眠。在子线程中创建的实体在子线程中不可见

> ID：11799233
> 
> 赞同：0
> 
> 时间：2012-08-03T15:59:10.823
> 
> 标签：multithreading, hibernate, transactions

我发现了奇怪的休眠行为，我无法解释。

如果我在事务内的默认线程中创建一个对象并进行手动刷新，那么我在其他线程中找不到它。

如果我在一个具有相同条件的特殊线程中创建一个对象，那么一切都很好。

这是我上面描述的代码：

```
// transaction template with propagation required 
            ttNew.execute(new TransactionCallbackWithoutResult() {
                @Override
                protected void doInTransactionWithoutResult(TransactionStatus status) {
                    Assert.assertEquals(envStDao.getAll().size(), 0);
                    g = new Group();
                    g.setDescription("trial");
                       // in debugger I get id = 1
                    groupDao.save(g);

                    groupDao.flush();
                    accDao.flush();

                 }
                });

    // second stage right after the first - searching the group

   Thread t2 = new Thread(new Runnable() {
            @Override
            public void run() {
        ttNew.execute(new TransactionCallbackWithoutResult() {
            @Override
            protected void doInTransactionWithoutResult(TransactionStatus status) {
            // here I get NULL!
            Group gg = groupDao.get(1);
        }
    });
        }
    });
    t2.start();
    t2.join(); 
```

如果我像以前一样将代码的第一个块包装到线程中，我会得到该组。

有什么想法吗？

我在junit测试中运行上面的代码。Dao 对象使用 HibernateTemplate。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T07:50:20.180

由于[事务隔离](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)，您无法在另一个事务中看到未提交的数据。你在这里有两个不同的事务，所以一个看不到另一个的未提交数据。默认的隔离主义者是读提交的。刷新 dosnt 意味着提交。提交只会在事务结束时完成。因此，当您在第一个事务中刷新数据时，数据会写入 db ，但不会提交，因此事务 2 看不到它。

# html - 我应该在我的 CSS 中使用 px 还是 rem 值单位？

> ID：11799236
> 
> 赞同：488
> 
> 时间：2012-08-03T15:59:25.633
> 
> 标签：html, css, distance, units-of-measurement

我正在设计一个新网站，我希望它与尽可能多的浏览器和浏览器设置兼容。我正在尝试决定我应该为字体和元素的大小使用什么度量单位，但我无法找到一个确凿的答案。

**我的问题是：我应该使用`px`还是`rem`在我的 CSS 中？**

*   到目前为止，我知道 using`px`与在浏览器中调整基本字体大小的用户不兼容。
*   我忽略了 s ，因为与 s 相比，它们在级联`em`时更难维护。`rem`
*   有人说`rem`s 与分辨率无关，因此更可取。但是其他人说大多数现代浏览器无论如何都会平等地缩放所有元素，因此使用`px`不是问题。

我问这个是因为对于 CSS 中最理想的距离度量有很多不同的意见，我不确定哪个是最好的。

* * *

## 回答 #1

> 赞同：522
> 
> 时间：2012-08-03T21:04:18.543

**TL；DR：**使用`px`.

# 事实

*   首先，非常重要的是要知道，[根据规范](http://www.w3.org/TR/CSS2/syndata.html#x39)，CSS`px`单元**不**等于一个物理显示像素。这*一直*是正确的——即使在 1996 年的[CSS 1 规范](http://www.w3.org/TR/2008/REC-CSS1-20080411/#length-units)中也是如此。

    CSS 定义了*参考像素*，它测量 96 dpi 显示器上像素的大小。在 dpi 与 96dpi 显着不同的显示器（如 Retina 显示器）上，用户代理会重新调整`px`单位，使其大小与参考像素的大小相匹配。换句话说，这种重新缩放正是 1 个 CSS 像素等于 2 个物理 Retina 显示像素的原因。

    也就是说，直到 2010 年（尽管存在移动变焦情况），`px`几乎总是等于一个物理像素，因为所有广泛可用的显示器都在 96dpi 左右。

*   s 中指定的大小`em`是相*对于父元素的*。这会导致`em`嵌套元素逐渐变大或变小的“复合问题”。例如：

    ```
     body { font-size:20px; } 
      div { font-size:0.5em; } 
    ```

    给我们：

    ```
     <body> - 20px
          <div> - 10px
              <div> - 5px
                  <div> - 2.5px
                      <div> - 1.25px 
    ```

*   CSS3`rem`始终只与根`html`元素相关，现在[99.67% 的所有正在使用的浏览器都](http://www.caniuse.com/#search=rem)支持它。

# 意见

我认为每个人都同意，将您的页面设计为适合所有人，并考虑到视障者是很好的。一个这样的考虑（但不是唯一的一个！）是允许用户使您的站点的文本更大，以便更容易阅读。

一开始，为用户提供缩放文本大小的唯一方法是使用相对大小单位（例如`em`s）。这是因为浏览器的字体大小菜单只是改变了根字体大小。因此，如果您在 中指定字体大小`px`，则在更改浏览器的字体大小选项时它们不会缩放。

现代浏览器（甚至不那么现代的 IE7）都将默认缩放方法更改为简单地放大所有内容，包括图像和框大小。本质上，它们使参考像素变大或变小。

是的，仍然有人可以更改他们的浏览器默认样式表来调整默认字体大小（相当于旧式字体大小选项），但这是一种非常深奥的方法，我敢打赌没人^(会这样做)。（在 Chrome 中，它隐藏在高级设置、Web 内容、字体大小下。在 IE9 中，它更加隐藏。您必须按 Alt，然后转到查看、文本大小。）只需选择缩放选项就容易多了浏览器的主菜单（或使用`Ctrl`+ `+`/ `-`/鼠标滚轮）。

^(1 - 自然在统计误差范围内)

如果我们假设大多数用户使用缩放选项缩放页面，我发现相对单位大多无关紧要。如果所有内容都以相同的单位指定（图像均以像素为单位），则开发页面会容易得多，并且您不必担心复合。（*“有人告诉我不会有数学运算”* ——需要计算 1.5em 的实际结果。）

仅对字体大小使用相对单位的另一个潜在问题是用户调整大小的字体可能会破坏您的布局所做的假设。例如，这可能会导致文本被剪裁或运行时间过长。如果您使用绝对单位，则不必担心意外的字体大小会破坏您的布局。

所以我的答案是使用像素单位。我`px`什么都用。当然，您的情况可能会有所不同，如果您必须支持 IE6（请 RFC 之神怜悯您），`em`无论如何您都必须使用 s。

* * *

## 回答 #2

> 赞同：352
> 
> 时间：2017-03-31T03:31:44.937

[我想赞扬[josh3736 的回答](https://stackoverflow.com/a/11803273/497418)，因为它提供了一些出色的历史背景。虽然很清楚，但自从提出这个问题以来，CSS 格局在近五年内发生了变化。当这个问题被问到时，这`px` *是*正确的答案，但今天不再适用。]

* * *

**tl;博士：**使用`rem`

## 单位概述

从历史上看`px`，单位通常代表一个设备像素。随着设备的像素密度越来越高，这不再适用于许多设备，例如 Apple 的 Retina Display。

`rem`单位表示根**em**大小**。**这是`font-size`任何匹配的`:root`。在 HTML 的情况下，它是`<html>`元素；对于 SVG，它是`<svg>`元素。`font-size`每个浏览器* 中的默认值是`16px`.

## 关于使用`px`

Internet 上的大多数 CSS 示例都使用`px`值，因为它们是事实上的标准。`pt`，并且理论上*可以*`in`使用各种其他单位，但它们不能很好地处理小值，因为您很快需要求助于分数，这些分数更长，更难推理。

 *如果你想要一个细边框，`px`你可以使用`1px`，`pt`你需要使用`0.75pt`来获得一致的结果，这不是很方便。

## 关于使用`rem`

`rem`的默认值`16px`对于它的使用来说并不是一个非常有力的论据。写作比写作`0.0625rem`更*糟糕*`0.75pt`，那么为什么会有人使用`rem`呢？

与其他单位相比，有两个`rem`优势。

*   尊重用户偏好
*   您可以将表观`px`值更改为`rem`您想要的任何值

### 尊重用户偏好

浏览器缩放多年来发生了很大变化。从历史上看，许多浏览器只会扩大规模`font-size`，但当网站意识到他们美丽的像素完美设计在任何人放大或缩小时都会破坏时，这种情况发生了相当大的变化。此时，浏览器会缩放整个页面，因此基于字体的缩放是不可能的。

尊重用户的意愿并非不可能。仅仅因为浏览器`16px`默认设置为，并不意味着任何用户都不能将他们的偏好更改为`24px`或`32px`纠正低视力或低能见度（例如屏幕眩光）。如果您的单位基于`rem`，则任何具有较高字体大小的用户都会看到按比例增大的网站。边框会更大，内边距会更大，边距会更大，一切都会流畅地扩大。

如果您的媒体查询基于`rem`，您还可以确保您的用户看到的网站适合他们的屏幕。在宽浏览器上`font-size`设置为的用户将有效地看到您的网站，如在宽浏览器上向用户显示的那样。RWD 在使用中绝对没有损失。`32px``640px``16px``320px``rem`

### 改变表观`px`值

因为`rem`是基于节点`font-size`的`:root`，如果你想改变`1rem`代表什么，你所要做的就是改变`font-size`：

```
:root {
  font-size: 100px;
}
body {
  font-size: 1rem;
}
```

```
<p>Don't ever actually do this, please</p>
```

***无论您做什么，都不要将`:root`元素设置`font-size`为一个`px`值。***

如果您将`font-size`on设置`html`为一个`px`值，那么您已经破坏了用户的偏好，而无法让它们恢复。

如果要更改 的*表观*值`rem`，请使用`%`单位。

这方面的数学相当简单。

的明显字体大小`:root`为`16px`，但假设我们想将其更改为`20px`。我们需要做的就是乘以`16`某个值来得到`20`.

建立你的方程式：

```
16 * X = 20 
```

并解决`X`：

```
X = 20 / 16
X = 1.25
X = 125% 
```

```
:root {
  font-size: 125%;
}
```

```
<p>If you're using the default font-size, I'm 20px tall.</p>
```

做所有事情的倍数`20`并不是那么好，但一个常见的建议是使表观大小`rem`等于`10px`. 那个神奇的数字`10/16`是`0.625`, 或`62.5%`。

```
:root {
  font-size: 62.5%;
}
```

```
<p>If you're using the default font-size, I'm 10px tall.</p>
```

现在的问题是您`font-size`对页面其余部分的默认设置太小了，但是有一个简单的解决方法：设置 a `font-size`on `body`using `rem`：

```
:root {
  font-size: 62.5%;
}

body {
  font-size: 1.6rem;
}
```

```
<p>I'm the default font-size</p>
```

重要的是要注意，通过这种调整， 的表观值`rem`意味着`10px`您可能写入的任何值都可以通过碰撞小数位`px`直接转换为。`rem`

```
padding: 20px; 
```

变成

```
padding: 2rem; 
```

您选择的明显字体大小取决于您，所以如果您愿意，没有理由不能使用：

```
:root {
  font-size: 6.25%;
}
body {
  font-size: 16rem;
} 
```

并且有`1rem`平等`1px`的。

所以你有了它，一个尊重用户意愿的简单解决方案，同时也避免过度复杂的 CSS。

## 等等，有什么收获？

我怕你会这么问。尽管我想假装它`rem`很神奇并且可以解决所有问题，但仍然存在一些值得注意的问题。**在我看来**没有什么大不了的，但我要把他们叫出来，所以你不能说我没有警告你。

### 媒体查询（使用`em`）

您将遇到的第一个问题`rem`涉及媒体查询。考虑以下代码：

```
:root {
  font-size: 1000px;
}
@media (min-width: 1rem) {
  :root {
    font-size: 1px;
  }
} 
```

这里的值`rem`根据媒体查询是否适用而变化，媒体查询取决于 的值`rem`，那么到底发生了什么？

`rem`在媒体查询中使用初始值`font-size`并且*不应该*（参见 Safari 部分）考虑到元素可能发生`font-size`的任何变化。`:root`换句话说，它的表观价值*总是* `16px`.

这有点烦人，因为这意味着您必须进行*一些*小数计算，但我发现大多数常见的媒体查询已经使用了 16 的倍数。

```
|   px | rem |
+------+-----+
|  320 |  20 |
|  480 |  30 |
|  768 |  48 |
| 1024 |  64 |
| 1200 |  75 |
| 1600 | 100 | 
```

此外，如果您使用 CSS 预处理器，您可以使用 mixins 或变量来管理您的媒体查询，这将完全掩盖问题。

#### **苹果浏览器**

不幸的是，Safari 存在一个已知错误，其中对`:root`字体大小的更改确实会更改`rem`媒体查询范围的计算值。`:root`如果元素的字体大小在媒体查询中发生更改，这可能会导致一些非常奇怪的行为。幸运的是，解决方法很简单：[使用`em`单位进行媒体查询](https://zellwk.com/blog/media-query-units/)。

### 上下文切换

如果您在各种不同的项目之间切换项目，则很可能会看到 font-size 的`rem`值不同。在一个项目中，您可能正在使用`10px`另一个项目中的表观大小可能是的表观大小`1px`。这可能会令人困惑并导致问题。

我在这里唯一的建议是坚持`62.5%`转换`rem`为 的表观大小`10px`，因为这在我的经验中更为常见。

### 共享 CSS 库

如果您正在编写将在您无法控制的网站上使用的 CSS，例如用于嵌入式小部件，那么实际上没有什么好方法可以知道外观大小`rem`。如果是这种情况，请随时继续使用`px`.

如果您仍然想使用`rem`，请考虑发布 Sass 或 LESS 版本的样式表，其中包含一个变量来覆盖`rem`.

* * *

[* 我不想吓唬任何人使用`rem`，但我无法正式确认*每个*浏览器都`16px`默认使用。您会看到，有很多浏览器，对于一个浏览器来说，与`15px`或`18px`. 但是，在测试中，我没有看到一个示例，其中使用默认设置的系统中使用默认设置的浏览器具有除`16px`. 如果你找到这样的例子，请与我分享。]

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2012-08-03T16:40:55.267

[这篇文章](http://snook.ca/archives/html_and_css/font-size-with-rem)很好地描述了`px`,`em`和`rem`.

作者最后得出结论，最好的方法可能是同时使用`px`and `rem`，`px`对旧浏览器先声明`rem`，对新浏览器重新声明：

```
html { font-size: 62.5%; } 
body { font-size: 14px; font-size: 1.4rem; } /* =14px */
h1   { font-size: 24px; font-size: 2.4rem; } /* =24px */ 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2019-11-11T22:50:11.060

**是的，REM 和 PX 是相对的，**但其他答案建议使用 REM 而不是 PX，我还想使用可访问性示例来支持这一点。
当用户在浏览器上设置不同的字体大小时，REM 会自动放大和缩小网页上的字体、图像等元素，而 PX 则不然。

* * *

在下面的 gif 中，左侧文本使用字体大小 REM 单位设置，而右侧字体使用 PX 单位设置。

[![在此处输入图像描述](../Images/6b1931ff7a40c1cb9240a9d412b57c0b.png)](https://i.stack.imgur.com/lk5Jm.gif)

> 如您所见，当我调整网页的默认字体大小时，REM 会自动放大/缩小。（右下角）

***网页的默认字体大小为 16px 等于 1 rem（仅适用于默认 html 页面 ie `html{font-size:100%}`），因此 1.25rem 等于 20px。***

PS：还有谁在使用 REM？CSS 框架！像 Bootstrap 4、Bulma CSS 等，所以最好和它相处。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-12-08T20:05:34.317

作为一个反射答案，我建议使用 rem，因为它允许您在必要时一次更改整个文档的“缩放级别”。在某些情况下，当您希望大小相对于父元素时，请使用 em。

*但是*对 rem 的支持参差不齐，IE8 需要一个 polyfill，而 Webkit 也出现了一个错误。而且，亚像素计算有时会导致一个像素线之类的东西消失。补救方法是为这些非常小的元素以像素为单位进行编码。这引入了更多的复杂性。

所以，总的来说，问问自己这是否值得——在 CSS 中更改整个文档的“缩放级别”有多重要和可能性有多大？

在某些情况下是肯定的，在某些情况下不会。

因此，这取决于您的需求，并且您必须权衡利弊，因为与“正常”基于像素的工作流程相比，使用 rem 和 em 引入了一些额外的考虑因素。

请记住，很容易将 CSS 从 px 切换（或者说转换）为 rem（JavaScript 是另一回事），因为以下两个 CSS 代码块会产生相同的结果：

```
html {
}

body {
  font-size:14px;
}

.someElement {
  width: 12px;
} 
```

* * *

```
html {
  font-size:1px;
}

body {
  font-size:14rem;
}

.someElement {
  width: 12rem;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-03-27T15:41:12.530

josh3736 的回答很好，但要在 3 年后提供一个对位：

我建议对字体使用*单位*`rem`，只是因为它使开发人员更容易更改大小。确实，用户很少更改浏览器中的默认字体大小，并且现代浏览器缩放会放大单位。但是如果你的老板来找你说“不要放大图像或图标，而是把所有的字体都放大”。只需更改根字体大小并让所有其他字体相对于它进行缩放，然后在数十或数百个 css 规则中更改大小，就会容易得多。*`px``px`*

 *我认为对某些图像或某些布局元素使用单位仍然是有意义的，`px`无论设计的规模如何，它们都应该始终保持相同的大小。

Caniuse.com 可能说过，当 josh3736 在 2012 年发布他的答案时，只有 75% 的浏览器，但[截至 3 月 27 日，他们声称支持率为 93.78%](http://caniuse.com/#feat=rem)。在他们跟踪的浏览器中，只有 IE8 不支持它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-03T16:03:28.127

我发现对网站字体大小进行编程的最佳方法是为 定义基本字体大小，`body`然后为`font-size`我之后声明的每个其他字体使用 em（或 rem）。我想这是个人喜好，但它对我很有帮助，也很容易融入更具[响应性的设计](http://www.alistapart.com/articles/responsive-web-design/)。

就使用 rem 单位而言，我认为在代码的渐进性和对旧版浏览器的支持之间找到平衡是件好事。 [查看有关浏览器对 rem 单位的支持的链接](http://css3clickchart.com/#rem-units)，这应该对您的决定有很大帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-02T17:02:40.357

`pt`类似于`rem`，因为它是相对固定的，但几乎总是与 DPI 无关，即使不兼容的浏览器`px`以设备相关的方式处理也是如此。 `rem`随根元素的字体大小而异，但您可以使用 Sass/Compass 之类的东西自动使用`pt`.

如果你有这个：

```
html {
    font-size: 12pt;
} 
```

那么`1rem`将永远是`12pt`。 `rem`并且`em`仅与它们所依赖的元素一样独立于设备；一些浏览器的行为不符合规范，并按`px`字面意思对待。即使在 Web 的旧时代，1 点也一直被认为是 1/72 英寸——也就是说，一英寸有 72 个点。

如果您有旧的、不兼容的浏览器，并且您有：

```
html {
    font-size: 16px;
} 
```

然后`1rem`将取决于设备。`html`对于默认情况下继承的元素，`1em`也将依赖于设备。 `12pt`将是有*希望*保证的与设备无关的等价物：`16px / 96px * 72pt = 12pt`，其中`96px = 72pt = 1in`.

如果你想坚持特定的单位，做数学可能会变得相当复杂。例如`.75em of html = .75rem = 9pt`， 和`.66em of .75em of html = .5rem = 6pt`。一个好的经验法则：

*   **用于`pt`绝对尺寸。** 如果你真的需要它相对于根元素是动态的，那么你对 CSS 的要求太多了；你需要一种可以编译成 CSS 的语言，比如 Sass/SCSS。
*   **用于`em`相对尺寸。**能够说“我希望左边的边距大约是一个字母的最大宽度”或者“让这个元素的文本比它周围的文本大一点”是非常方便的。 `<h1>`是一个在 ems 中使用字体大小的好元素，因为它可能出现在不同的地方，但应该总是比附近的文本大。这样，您不必为每个应用的类设置单独`h1`的字体大小：字体大小将自动适应。
*   **用于`px`非常小的尺寸。** 在非常小的尺寸下，`pt`在 96 DPI 的某些浏览器中可能会变得模糊，因为`pt`并`px`没有完全对齐。如果您只想创建一个单像素的细边框，请这样说。如果您有一个高 DPI 显示器，那么在测试期间这对您来说并不明显，因此请务必在某个时候在通用 96-DPI 显示器上进行测试。
*   **不要处理子像素来使高 DPI 显示器看起来很花哨。**一些浏览器可能支持它——尤其是在高 DPI 显示器上——但这是一个禁忌。大多数用户更喜欢大而清晰，尽管网络已经教会了我们开发人员。如果您想使用最先进的屏幕为您的用户添加扩展细节，您可以使用矢量图形（阅读：SVG），无论如何您都应该这样做。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-09-06T20:28:45.967

一半（但只有一半）尖刻的回答（另一半是对官僚主义现实的强烈蔑视）：

使用 vh

一切总是按浏览器窗口大小调整。

始终允许向下滚动，但禁用水平滚动。

将正文宽度设置为静态 50vh，并且永远不要编写浮动或突破父 div 的 css。（如果他们试图模拟一些看起来像的东西，巧妙地使用背景 gif 可能会使他们偏离轨道。）并且只使用表格来设计样式，这样所有东西都可以按预期固定到位。包括一个 javascript 函数来撤消用户可能执行的任何 ctrl+/- 活动。

用户会讨厌你，因为网站不会根据他们使用的内容而有所不同（例如文本太小而无法在手机上阅读）。你的同事会恨你，因为没有人在他们正常的头脑中这样做，这可能会破坏*他们的*工作（虽然不是你的）。你的编程教授会恨你，因为这不是一个好主意。你的 UX 设计师会讨厌你，因为它会暴露他们在设计 UX 模型时为了满足最后期限而必须做的工作。

几乎每个人都会讨厌你，除了那些告诉你让事情与模型相匹配并尽快完成的人。然而，那些人（通常包括项目经理）会对您的准确性和快速周转时间感到欣喜若狂。每个人都知道他们的意见是唯一对你的薪水很重要的意见。

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2012-08-03T16:17:48.413

是的。或者，更确切地说，没有。

呃，我的意思是，没关系。使用对您的特定项目有意义的那个。PX 和 EM 或两者都同样有效，但会根据您的整个页面的 CSS 体系结构而有所不同。

更新：

为了澄清，我说通常你使用哪个可能并不重要。有时，您可能特别想选择其中一个。如果您可以从头开始并希望使用基本字体大小并使所有内容都与之相关，那么 EM 会很好。

当您在现有代码库上进行重新设计并且需要 px 的特殊性来防止不良嵌套问题时，通常需要 PX。**

# c++ - 函数模板，不允许某些类型

> ID：11799241
> 
> 赞同：4
> 
> 时间：2012-08-03T15:59:53.440
> 
> 标签：c++, templates, c++11

我有一个必须只允许某些类型的函数模板。我见过其他问题，但他们使用了 boost 和 primitve 类型。在这种情况下，没有提升，它是一个用户定义的类。

前任：

```
template<typename T>
myfunc(T&)
{ ... }

template<>
myfunc(Foo&)
{
   static_assert(false, "You cannot use myfunc with Foo");
} 
```

`static_assert`无论我是否`myfunc`用`Foo`对象调用，问题都会被调用。

`myfunc`我只是想要某种方式让编译在被调用时停止`Foo`。
我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:04:42.477

您可以`std::is_same`为此使用：

```
#include <type_traits>

template<typename T>
return_type myfunc(T&)
{
   static_assert(std::is_same<T, Foo>::value, "You cannot use myfunc with Foo");

   // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:05:28.957

使用返回类型`R`，说：

```
#include <type_traits>

template <typename T>
typename std::enable_if<!std::is_same<T, Foo>::value, R>::type my_func(T &)
{
    // ...
} 
```

如果你真的不想使用标准库，你可以自己写特征：

```
template <bool, typename> struct enable_if { };
template <typename T> struct enable_if<true, T> { typedef T type; };

template <typename, typename> struct is_same { static const bool value = false; };
template <typename T> struct is_same<T, T> { static const bool value = true; }; 
```

# iphone - 将标签贴在旋转轮上

> ID：11799245
> 
> 赞同：0
> 
> 时间：2012-08-03T16:00:04.403
> 
> 标签：iphone, objective-c

我有一个轮子菜单，触摸它时会旋转，您可以选择轮子上的一个项目并再次旋转它...

它实际上是一个圆形图像，我想做的是在每个部分附加一个带有文本的标签，它们应该一起旋转。

我创建了它的一个实例：

```
myWheel *wheel= [[myWheel alloc] initWithFrame:CGRectMake(15,45, 282, 282)]; 
```

并试图贴上标签：

```
[addSubview:myUILabel]; 
```

它创建标签，但我不能让它一起旋转......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:52:07.477

你应该有一个 UIView 包含你的车轮图像作为它的子视图，以及标签。然后你做的任何旋转/旋转都应该在 UIView 上完成（这将保持你放置的所有标签的位置和角度）。

**编辑：**

```
UIView *container = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
[container addSubview:wheelImage];
[container addSubview:labelOne];
[container addSubview:labelTwo]; 
```

# php - PHP中的stream_select（）问题

> ID：11799252
> 
> 赞同：2
> 
> 时间：2012-08-03T16:00:27.587
> 
> 标签：php, timeout

我正在使用 stream_select() 但它在几秒钟后返回 0 个描述符，而我的函数在仍有数据要读取时返回。

一个不寻常的事情是，如果您将超时设置为 0，那么我总是将描述符的数量设为零。

```
$num = stream_select($read, $w, $e, 0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-30T13:18:39.667

## stream_select() 必须在循环中使用

**[stream_select()](http://php.net/manual/en/function.stream-select.php)**函数基本上只是**轮询**您在前三个参数中提供的流选择器，这意味着它将等到以下事件之一发生：

*   一些数据到达
*   或达到超时（使用 $tv_sec 和 $tv_usec 设置）而不获取任何数据。

所以**接收 0**作为返回值**是完全正常**的，这意味着当前轮询周期中没有新数据。

我建议将函数放在这样的循环中：

```
$EOF = false;

do {
    $tmp  = null;
    $ready = stream_select($read, $write, $excl, 0, 50000);

    if ($ready === false ) {
        // something went wrong!!
        break;
    } elseif ($ready > 0) {
        foreach($read as $r) {
            $tmp .= stream_get_contents($r);
            if (feof($r)) $EOF = true;
        }

        if (!empty($tmp)) {
            //
            // DO SOMETHING WITH DATA
            //
            continue;
        }
    } else {
        // No data in the current cycle
    }
} while(!$EOF); 
```

请注意，在此示例中，脚本完全忽略了输入流之外的所有内容。此外，“if”语句的第三部分是完全可选的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T17:53:23.453

它返回数字`0`还是`FALSE`布尔值？`FALSE`意味着有一些错误，但零可能只是因为超时或流没有发生任何有趣的事情，你应该做一个新的选择等。

我猜这可能发生在零超时的情况下，因为它会立即检查并返回。此外，如果您阅读[有关流选择的 PHP 手册，](http://php.net/manual/en/function.stream-select.php)您将看到有关使用零超时的警告：

> 使用超时值 0 可以让您即时轮询流的状态，但是，在循环中使用 0 超时值不是一个好主意，因为它会导致您的脚本消耗过多的 CPU 时间。

如果这是一个 TCP 流并且您想要检查连接是否关闭，您应该检查来自`fread`etc 的返回值以确定其他对等方是否已关闭连接。关于`read`流数组参数：

> 将监视读取数组中列出的流以查看字符是否可用于读取（更准确地说，查看读取是否不会阻塞 - 特别是，流资源也在文件末尾准备好，在这种情况下fread() 将返回一个长度为零的字符串）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:08:19.140

[http://www.php.net/stream_select](http://www.php.net/stream_select)

> 由于当前 Zend 引擎的限制，不可能将像 NULL 这样的常量修饰符直接作为参数传递给希望通过引用传递此参数的函数。而是使用临时变量或表达式，最左边的成员是临时变量：

```
<?php $e = NULL; stream_select($r, $w, $e, 0); ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-20T02:53:55.973

我有一个类似的问题，这是由底层套接字超时引起的。

例如。我创建了一些流

```
$streams = stream_socket_pair(STREAM_PF_UNIX, STREAM_SOCK_STREAM, STREAM_IPPROTO_IP); 
```

然后分叉，并使用如下块

```
 stream_set_blocking($pipes[1], 1);
  stream_set_blocking($pipes[2], 1);
  $pipesToRead = array($pipes[1], $pipes[2]);

  while (!feof($pipesToRead[0]) || !feof($pipesToRead[1])) {
     $reads = $pipesToRead;
     $writes = null;
     $excepts = $pipesToRead;
     $tSec = null;
     stream_select($reads, $writes, $excepts, $tSec);
     // while it's generating any kind of output, duplicate it wherever it
     // needs to go
     foreach ($reads as &$read) {
        $chunk = fread($read, 8192);
        foreach ($streams as &$stream)
           fwrite($stream, $chunk);
     }
  } 
```

忽略那里可能出现的其他问题，忽略了我`$tSec`对 stream_select 的参数，并且“流”将在 60 秒不活动后超时并产生 EOF。

如果我在创建流后添加以下内容

```
stream_set_timeout($streams[0], 999);
stream_set_timeout($streams[1], 999); 
```

然后我得到我想要的结果，即使基础流上没有活动超过 60 秒。

我觉得这可能是一个错误，因为我不希望在底层流上不活动 60 秒后出现 EOF，并且我不想插入一些任意大的值以避免在我的进程空闲时达到超时一段时间。

此外，即使 60 秒的超时仍然存在，我认为它应该只是在我的`stream_select()`通话中超时并且我的循环应该能够继续。

# jquery - 在 jQuery 幻灯片放映中添加上一个、下一个、播放和暂停按钮

> ID：11799253
> 
> 赞同：1
> 
> 时间：2012-08-03T16:00:28.187
> 
> 标签：jquery

我几乎没有让这段代码工作。只剩下一件事了。

我想在我现有的幻灯片放映中添加上一个、下一个、播放和暂停按钮，就像[在这个页面](http://www.visitphilly.com/)中一样。

我确实[看过这个](http://www.visitphilly.com/)，但很混乱和复杂。

你能帮我修改下面的代码吗？

谢谢

```
<html>
<style>
*           { margin: 0px; padding: 0px; }
#cover      { width: 100%; height: 300px; background: #CCCCCC; }
#cover div  { width: 100%; height: 200px; display: none; background: #FFFFFF; }
.content    { text-align: center; }
</style>
<head>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
            var div_array   = [];
            var i           = 0;

            $('#cover div').each(function()
            {
                //alert($(this).attr('id'));
                div_array.push('#' + $(this).attr('id'));

            });

            $(function(){
                (function nextImage()
                {
                    $(div_array[i++] || div_array[i = 0, i++]).hide().delay(500).fadeIn(1000).delay(1000).fadeOut(500, nextImage);
                })();
            });
        });
    </script>
</head>

<body>
    <div id="cover">
        <div id="slider_1"><p class="content">SLIDER ONE</p></div>
        <div id="slider_2"><p class="content">SLIDER TWO</p></div>
        <div id="slider_3"><p class="content">SLIDER THREE</p></div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:16:21.697

我尝试在以下 URL 为您创建示例演示。

[http://jsfiddle.net/codebombs/ukNmT/](http://jsfiddle.net/codebombs/ukNmT/)

**HTML**

```
<div id='items'>
    <div class='item first'>Item 1</div>
    <div class='item'>Item 2</div>
    <div class='item'>Item 3</div>
    <div class='item'>Item 4</div>
    <div class='item'>Item 5</div>
</div>
<ul id='controls'>
    <li id='prev'>Prev</li>
    <li id='play'>Play</li>
    <li id='pause'>Pause</li>
    <li id='next'>Next</li>
</ul> 
```

**CSS**

```
#items {
    position : relative;
    width : 400px;
    height : 200px;
    top : 20px;
    left : 20px;
}
.item {
    position : absolute;
    background-color : #eee;
    border : 1px solid #ccc;
    width : 398px;
    height : 198px;
    display :none;
    text-align : center;
    font-size : 72px;
}
.first{
    display : block;
}
#controls {
    margin-top : 30px;
}
li {
    display : inline-block;
    padding : 5px;
    border : 1px solid #ccc;
    background-color : #eee;
    cursor : pointer;
}
#play {
    display : none;
} 
```

**JavaScript**

```
//To store timeout id
var timeoutId;

var slideImage = function( step ) {

    if ( step == undefined ) step = 1;

    //Clear timeout if any
    clearTimeout ( timeoutId );

    //Get current image's index
    var indx = $('.item:visible').index('.item');

    //If step == 0, we don't need to do any fadein our fadeout
    if ( step != 0 ) {
       //Fadeout this item
       $('.item:visible').fadeOut();
    }

    //Increment for next item
    indx = indx + step ;

    //Check bounds for next item
    if ( indx >= $('.item').length ) {
        indx = 0;
    } else if ( indx < 0 ) {
        indx = $('.item').length - 1;
    }

    //If step == 0, we don't need to do any fadein our fadeout
    if ( step != 0 ) {
       //Fadein next item
       $('.item:eq(' + indx + ')').fadeIn();
    }

    //Set Itmeout
    timeoutId = setTimeout ( slideImage, 5000 );
};

//Start sliding
slideImage(0);

//When clicked on prev
$('#prev').click(function() {

    //slideImage with step = -1
    slideImage ( -1 );   
});

//When clicked on next
$('#next').click(function() {

     //slideImage with step = 1
     slideImage ( 1 );
});

//When clicked on Pause
$('#pause').click(function() {

   //Clear timeout
   clearTimeout ( timeoutId );    

    //Hide Pause and show Play
    $(this).hide();
    $('#play').show();
});

//When clicked on Play
$('#play').click(function() {

   //Start slide image
   slideImage(0);

   //Hide Play and show Pause
   $(this).hide();
   $('#pause').show();    
}); 
```

请检查一下，如果您需要任何修改，请告诉我。

# jquery - jquery 表单助手 - 添加更多字段

> ID：11799254
> 
> 赞同：0
> 
> 时间：2012-08-03T16:00:31.190
> 
> 标签：jquery

我很快就制作了这个表单助手来引导用户完成注册表单

它适用于名称和用户名，但我想知道如何扩展它，以便除了名称之外的所有字段都被禁用。

一旦名称有一个值，只有用户名也被启用（这到目前为止有效）然后一旦用户名有一个值，密码将被启用，依此类推。

表单字段是名称、用户名、密码、密码确认和电子邮件

这是代码

```
$(function() {
    var helper = function() {
        if ( $('#name').val() == "" ) {
            $('#username').attr("disabled", "disabled");
            $('#helper').text("Hi there! let's start by entering your name!");
        } else {
            $('#username').removeAttr('disabled');
            $('#helper').text("Great, now choose a username.");
        }
    };
    $('.input-xlarge').keyup(helper).change(helper);
}); 
```

干杯

添加了标记

```
 <form class="form" method="post" action="sign_up.php" id="sign-up-form">
            <fieldset>
                <div class="control-group">
                    <label class="control-label" for="name"><?php _e('Full name'); ?></label>
                    <div class="controls">
                        <input type="text" class="input-xlarge" id="name" name="name" value="<?php echo $signUp->getPost('name'); ?>" placeholder="<?php _e('Full name'); ?>">
                    </div>
                </div>
                <div class="control-group" id="usrCheck">
                    <label class="control-label" for="username"><?php _e('Username'); ?></label>                
                    <div class="controls">
                        <input type="text" class="input-xlarge" id="username" name="username" maxlength="15" value="<?php echo $signUp->getPost('username'); ?>" placeholder="<?php _e('Choose your username'); ?>">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="password"><?php _e('Password'); ?></label>                
                    <div class="controls">
                        <input type="password" class="input-xlarge" id="password" name="password" placeholder="<?php _e('Create a password'); ?>">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="password_confirm"><?php _e('Password again'); ?></label>              
                    <div class="controls">
                        <input type="password" class="input-xlarge" id="password_confirm" name="password_confirm" placeholder="<?php _e('Confirm your password'); ?>">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="email"><?php _e('Email'); ?></label>              
                    <div class="controls">
                        <input type="email" class="input-xlarge" id="email" name="email" value="<?php echo $signUp->getPost('email'); ?>" placeholder="<?php _e('Email'); ?>">
                    </div>
                </div>

                <div class="control-group">
                    <?php $signUp->profileSignUpFields(); ?>
                </div>

                <div class="control-group">
                    <?php $signUp->doCaptcha(true); ?>
                </div>

            </fieldset>
            <input type="hidden" name="token" value="<?php echo $_SESSION['user']['token']; ?>"/>
            <button type="submit" class="medium orange"><?php _e('Create my account'); ?></button>
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:38:04.543

我建议不要禁用，以防他们需要返回。

做这样的事情怎么样：

html:

```
<input type="text" id="name" title="do name"/>
<input type="text" id="username" title="do user"/>
<input type="text" id="tel" title="do tel" />
<input type="text" id="fax" title="do fax"/>

<div id="helper"></div>​ 
```

js：

```
function helper(e){

 var text = e.attr('title');
 $('#helper').text(text);

}

$(":input").click(function(){

    $(":input").css('background-color','#000000');
    $(this).css('background-color','#fff');
    helper($(this));

}); 
```

你可以在这里查看 jsfiddle [http://jsfiddle.net/Rzha3/3/](http://jsfiddle.net/Rzha3/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:44:30.437

在 HTML 表单中，将所有禁用的属性硬设置为禁用（或在 $(document).ready() 中将它们全部禁用，因此它与 JS 不兼容）。然后概括您的辅助函数以将字段作为变量，然后获取下一个。像这样：

```
$(document).ready(function() {
    //Disable all input fields
    $('#myform input').attr("disabled", "disabled");
    //Bind the helper function to input fields on keyup
    $('#myform input').keyup(function() {
        var this_id = $(this).attr('id');
        helper(this_id);
    });
    //Call helper on "username" to kick things off
    helper('username');
});

function helper(field_id) {
    var messages = new Array(/*messages stored here, starting with "Hi!" at 0*/);
    var field_index = $('#'+field_id).index();
    if ( $('#'+field_id).val() == "" ) {
        var message = messages[field_index];
        $('#helper').text(message);
    } else {
        var next_index = field_index+1;
        var new_message = messages[next_index];
        $('#myform input:eq('+next_index+')').removeAttr('disabled');
        $('#helper').text(new_message);
    }
} 
```

我没有测试过这个，它可能会更有说服力，但无论如何你应该把它放在你自己的风格中。我将所有输入作为“myform”ID 的子项，但如果它是表单独有的，您可以只使用“xlarge”类。也许您也可以拥有一个全局索引指针，而不是每次都从 ID 中获取它。

# css - Mac / PC 浏览器的填充和行高不一致

> ID：11799258
> 
> 赞同：4
> 
> 时间：2012-08-03T16:00:59.793
> 
> 标签：css

我[在这个页面上的几个元素](http://www.utdanacenter.org/wp/pre-kindergarten-12-education/tools-for-teaching-and-learning/academic-youth-development/summer-start-ayd/)中看到了一些非常显着的行高/填充差异，特别是页面标题（查尔斯 A Dana 中心）和“学术青年发展”标题。在 Mac 上的 Safari/FF 上，文本被挤到行首；在 PC 上的所有浏览器中，它看起来几乎是垂直分布的。

如果重要的话，我有一个 css-reset 和 Modernizr 正在运行。

这是站点标题的 css：

```
.site-title h1 {
    font-size:2.5em;  
    margin:.1em 0em 0em;
    text-transform: none;  
}
.site-title a {
    display:inline-block;
    text-decoration: none;
    color:#0363a8;
    text-shadow:1px 1px 1px #82B2D9;
    line-height:1em;
    border: none;   
} 
```

这是蓝色背景页面标题的 css：

```
.parent-title {
    font-size:2em;
    color: #0D72BA;
    font-family: 'Bree Serif',Georgia,'Times New Roman',serif;
    font-weight:400;
    border: none;
    background-color:#D8E1F1;
    border-radius:8px;
    display:block;
    padding:.2em .5em .2em;
    margin-bottom:.72em;
    line-height:1em;
} 
```

非常感谢你的帮助！

# push-notification - Windows Phone 推送动态磁贴图像 URL

> ID：11799260
> 
> 赞同：0
> 
> 时间：2012-08-03T16:01:00.923
> 
> 标签：push-notification, push, live-tile

我正在开发通知推送服务器，并希望使用图像 URL（外部服务器）推送动态磁贴。

问题是我无法让它在应用程序磁贴上显示为 BackgroundImage。据我了解文档，只要 URL 有效，而不是 https，一些大小限制等，它应该是可能的。

我遵守给定的所有限制，但无法从外部 URL 获取我的图像以显示在图块上。本地文件虽然有效。我正在寻找几个小时。有人能告诉我这是否可能，或者自从芒果之类的东西之后，一些规则是否发生了变化？

URL 限制：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx#urls](http://msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx#urls)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:06:51.683

而且当然; 我一提交票证，就发现应该设置为频道的“ListOfAllowedDomains”。

# c# - 任何看起来像这个 QT 的 QPushButton 的 .NET Winforms 控件？

> ID：11799264
> 
> 赞同：0
> 
> 时间：2012-08-03T16:01:18.603
> 
> 标签：c#, .net, winforms, button

有人知道任何看起来像这个按钮控件的.NET Winform 控件吗？

QPushButton：http: [//zetcode.com/gui/csharpqyoto/layoutmanagement/](http://zetcode.com/gui/csharpqyoto/layoutmanagement/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:05:30.930

您在这里有几个选择。您并不具体说明您正在使用平台的哪个部分，但如果使用 Winforms，您当然可以在一定程度上自定义按钮。

如果您使用的是 WPF，您几乎可以让它看起来与您在 XAML 中想要的完全一样。查看表达式混合。

正如@Dimitri 所说，天空是极限，但您可能需要做腿部工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:57:48.717

您可以根据需要创建自定义控件并将其引用添加到您的项目中。您将把它添加到您可以使用的工具箱中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T18:01:19.017

如果您指的是位于此示例表单上的按钮：

![在此处输入图像描述](../Images/60e8382737b84aa63ed156b61be9246a.png)

我们目前正在完成我们自己的应用程序，该应用程序具有相当相似的外观按钮。我们通过使用第三方组件来做到这一点。步骤是：

1.  我们购买了[DevExpress.com 的 WinForms 库](http://www.devexpress.com/Products/NET/Controls/WinForms/Bars/)。
2.  我们开发了自己的[DevExpress 皮肤](http://www.devexpress.com/Products/NET/Controls/WinForms/Bars/Features_PaintStyles.xml)（在外部屏幕设计人员的帮助下）

这是一项工作和一些钱，但结果看起来很整洁。

# regex - perl 中的 C++ 样式检查器

> ID：11799268
> 
> 赞同：0
> 
> 时间：2012-08-03T16:01:29.223
> 
> 标签：regex, perl

我正在用 Perl 编写 C++ 样式检查器。但是我在为基本的 C++ 构造构造正则表达式时遇到了困难。例如`if`循环可以有以下形式：

`if( expression ) {` 或者`if ( expression ) ;`

我想要的是如果代码不遵循以下准则然后抛出错误 `if<space>(expression)<space>{`

现在`expression`可以通过逻辑运算符进行多行分隔，我如何构造正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:19:35.090

编程语言不是“常规语言”，严格来说你不能用正则表达式解析它们。然而 Perl 正则表达式可以用来定义整个自顶向下的递归文法。该模块`Regexp::Grammars`使这变得简单、强大和整洁。

您还想查看`(?{CODE})`在解析期间发出警告的构造。您的语法片段可能如下所示（简化，只是为了给您一个想法）：

```
...;

<rule: if-statement>
if ( [ \t]+ | (?{warn q{no spaces around "if" condition at $line}}) )
    \( <statement> \)
   ( [ \t]+ | (?{warn q{no spaces around "if" condition at $line}}) )
   \{ <expression>+ \}

<rule: expression>
   <statement> ;

<rule: statement>
   <assignment> | <function-call> | \( <statement> \)

...; 
```

该模块`Regexp::Grammars`将为您提供一个完整的语法树`%/`供您使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:05:25.267

正则表达式的表达力不足以解析上下文无关的语法。您可以使用正则表达式对您的词法分析器进行编码，但您也必须编写一个解析器。

# objective-c - CTLineRef 是否拥有属性字符串？

> ID：11799269
> 
> 赞同：2
> 
> 时间：2012-08-03T16:01:30.933
> 
> 标签：objective-c, cocoa, core-graphics, ctlineref

我刚刚开始在苹果上编程 GUI（到目前为止，框架看起来不错，但我发现文档的信息量远不如其他文档......Qt、.Net、java 等）。

我遇到的问题之一是了解谁拥有什么。例如，如果我调用 CTLineRefCreateWithAttributedString，生成的 CTLineRef 是否拥有属性字符串？如果属性字符串是可变的，而我更改了它怎么办？这会弄乱 CTLineRef 吗？

文档一直没有启发性。

CTLineRef 的参考没有提供有关该主题的信息： [https ://developer.apple.com/library/mac/#documentation/Carbon/Reference/CTLineRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/CTLineRef/Reference/reference.html)

一些示例不会释放字符串，我将其作为它拥有的指标： [https ://developer.apple.com/library/mac/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Operations/Operations.html](https://developer.apple.com/library/mac/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Operations/Operations.html)

一些示例确实释放了字符串，这表明它不是： [https ://developer.apple.com/library/mac/#samplecode/CoreAnimationText/Listings/VectorTextLayer_m.html](https://developer.apple.com/library/mac/#samplecode/CoreAnimationText/Listings/VectorTextLayer_m.html)

（这个不是苹果，但他似乎更了解我） [http://www.cocoanetics.com/2011/01/befriending-core-text/](http://www.cocoanetics.com/2011/01/befriending-core-text/)

那么字符串是否被复制？如果我使用 CFMutableAttributedStringRef 是否可以更改（我假设我必须在之后创建一个新的 CTLineRef）？

这是一个具体的例子，但这是我在无数地方遇到过的问题。任何帮助将不胜感激。我觉得必须有一些规则来管理这些事情，但我一点也不知道这些规则是什么或在哪里可以找到它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:28:18.047

您寻求的管理规则可在[Core Foundation Memory Management Guide](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFMemoryMgmt/CFMemoryMgmt.html)中找到。要带走的要点是，您实际上不需要知道 CTLineRef 是否拥有属性字符串。任何对象都可以有多个所有者。您需要担心的是您是否*拥有*字符串，以及最适合*您*放弃所有权的位置。如果您在创建 CTLineRef 后完成了它，请随意释放它。

考虑其余的 CTLineRef 的实现细节。如果 CTLineRef 遵循该文档中规定的规则（它确实如此）并且需要保留属性字符串，它将在内部保留它。它也有可能在内部制作副本（这很可能），因此不再关心原件。也许它将字符串发送到火星上的服务器并在以后每次需要它时查询它（不太可能）。重要的一点是，不管它做什么，如果*您*不再需要它，您可以安全地释放它。

至于可变性和复制行为，这有点模糊。你是对的，文档没有明确说明行为。文档明确指出该对象是不可变的*。*这意味着几乎可以保证它*确实*复制了输入字符串（或将其内容解析为其他内容）。众所周知的最佳实践是，由于您提到的确切原因，对象应始终复制输入字符串 - 实现无法知道提供的字符串是否实际上是可变的。为了使实现保持健壮，它需要确保其内部状态不能从外部世界改变。做出这种保证的唯一方法是复制字符串。即使是可变类也是如此，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:17:59.063

要回答您的问题，我们可以尝试在创建`CTLine`. 我们还可以尝试在更改字符串之前和之后打印行的描述。

```
CFMutableAttributedStringRef mas = CFAttributedStringCreateMutable(NULL, 0);
CFAttributedStringReplaceString(mas, CFRangeMake(0, 0), CFSTR("world"));
CTLineRef line = CTLineCreateWithAttributedString(mas);
NSLog(@"mas count = %ld", CFGetRetainCount(mas));
NSLog(@"line before change = %@", line);
CFAttributedStringReplaceString(mas, CFRangeMake(0, 0), CFSTR("hello "));
NSLog(@"line after change = %@", line); 
```

查看对象的保留计数通常是徒劳的，但在这种情况下，它提供了丰富的信息：

```
2012-08-03 12:11:10.717 coretext[44780:f803] count before creating line = 1
2012-08-03 12:11:10.720 coretext[44780:f803] count after creating line = 1 
```

由于之前和之后的保留计数为 1，并且我拥有一个引用（因为`CFAttributedStringCreateMutable`给了我一个拥有的引用），我知道我是字符串的唯一所有者，在我创建`CTLine`. 所以`CTLine`不保留字符串。它极不可能保留对字符串的引用而不保留它。

这是更改字符串之前的行描述：

```
2012-08-03 12:11:10.721 coretext[44780:f803] line = CTLine: run count = 1, string range = (0, 5), width = 28.6758, A/D/L = 9.24023/2.75977/0, glyph count = 5
{
    CTRun: string range = (0, 5), characters = { 0x0077, 0x006f, 0x0072, 0x006c, 0x0064 }, attributes =
<CFBasicHash 0x6d69ce0 [0x1227b38]>{type = mutable dict, count = 1,
entries =>
    2 : <CFString 0xab1b0 [0x1227b38]>{contents = "NSFont"} = CTFont <name: Helvetica, size: 12.000000, matrix: 0x0>
CTFontDescriptor <attributes: <CFBasicHash 0xd345ed0 [0x1227b38]>{type = mutable dict, count = 1,
entries =>
    1 : <CFString 0xabbd0 [0x1227b38]>{contents = "NSFontNameAttribute"} = <CFString 0x6d69720 [0x1227b38]>{contents = "Helvetica"}
}
>
}
} 
```

我注意到描述不包含字符串，但包含字符数组。所以该行可能也不保留字符串的副本；它解析字符串以创建自己的私有表示。

这是更改字符串后的行描述：

```
2012-08-03 12:11:10.722 coretext[44780:f803] line = CTLine: run count = 1, string range = (0, 5), width = 28.6758, A/D/L = 9.24023/2.75977/0, glyph count = 5
{
    CTRun: string range = (0, 5), characters = { 0x0077, 0x006f, 0x0072, 0x006c, 0x0064 }, attributes =
<CFBasicHash 0x6d69ce0 [0x1227b38]>{type = mutable dict, count = 1,
entries =>
    2 : <CFString 0xab1b0 [0x1227b38]>{contents = "NSFont"} = CTFont <name: Helvetica, size: 12.000000, matrix: 0x0>
CTFontDescriptor <attributes: <CFBasicHash 0xd345ed0 [0x1227b38]>{type = mutable dict, count = 1,
entries =>
    1 : <CFString 0xabbd0 [0x1227b38]>{contents = "NSFontNameAttribute"} = <CFString 0x6d69720 [0x1227b38]>{contents = "Helvetica"}
}
>
}
} 
```

我们可以看到该行没有更改其字形计数或字符数组。由此我们可以得出结论，当您更改字符串时，该行不会更改。您可以通过在更改字符串之前和之后实际绘制线条来进一步测试。我把它留给读者作为练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:36:55.187

MutableString 的事情不应该是一个问题 - CTLine 文档明确指出它是不可变的。因此，在创建后无法更改它 - 这就是您需要知道的全部内容。它是否复制、保留或其他任何内容，或者您​​对创建 CTLine 的字符串所做的操作都没有关系 - 它是一个冻结的对象。

此外，只是为了支持马特的出色回答——保留/释放的全部意义在于摆脱对象必须“拥有”的可怕想法。以这种方式思考是没有帮助的。例如我们从来没有释放对象的责任，一个对象的生命周期是不可知的。保留/释放更像是一个简单的垃圾收集器。

你只需要遵循简单的规则，这些规则最好直接从 Apple 的源代码中学习，那里有很好的文档记录。始终遵循这些简单的规则。

因此，不，您不会在每个函数的文档中看到特定的内存管理指南。真的不需要。如果它还没有点击，你需要回到基础。

# iphone - iOS Storyboard 如何访问控件并添加事件处理程序，以及将数据绑定到 Storyboard 上添加的控件

> ID：11799279
> 
> 赞同：5
> 
> 时间：2012-08-03T16:02:21.447
> 
> 标签：iphone, ios5, interface-builder, storyboard, ios

我曾经通过代码创建 UI。但现在我必须使用故事板。我对如何将事件处理程序添加到情节提要上添加的控件以及如何将数据动态绑定到情节提要上添加的控件感到困惑。一个示例场景是在情节提要上添加了一个 UIView，并在其顶部添加了两个 UITableView 和一个按钮。我想将事件处理程序添加到按钮并将数据绑定到表视图。我该怎么做呢。如果我将故事板上添加的 UIView 子类化，我将可以访问添加在视图顶部的控件（按钮、两个表格视图），或者我应该如何实现这一点？请帮忙 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T16:55:56.460

向按钮添加事件处理程序相对简单。在您的 UIViewController 子类中，只需添加一个类似于下面的方法，然后在您的界面构建器中选择视图控制器并在右侧面板上单击顶部最右侧的按钮，该按钮看起来像一个指向右侧的箭头。在收到的操作下，将圆圈拖到要执行操作的按钮上。

```
-(IBAction)doSomething:(id)sender{
    //code for doing what you want your button to do.
} 
```

如果您仍然想以编程方式执行此操作，则可以使用另一种方法来执行您习惯做的相同操作，除了在您的 .h 文件中添加 IBOutlet UIButton *buttonName; 在插座下的右窗格中，您将看到您的按钮。然后可以在 .m 文件中按名称引用。

# c# - 大多数事情可以在 XAML 中完成的代码中完成吗？

> ID：11799282
> 
> 赞同：2
> 
> 时间：2012-08-03T16:02:30.823
> 
> 标签：c#, wpf, xaml

例如，我想做一些与您在下面看到的类似的事情，但在代码后面。我看到大量使用 XAML 的示例，但在 C# 中没有做同样的事情。所以我的猜测是否定的。谢谢。

![在此处输入图像描述](../Images/815dfbff066c82a6ed67093e156ebeba.png)

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<StackPanel>
    <TextBlock TextWrapping="Wrap" Width="455">
        <Span FontSize="20">2</Span>
        <Span BaselineAlignment="TextTop" FontSize="14">1/2</Span>

        <Span FontSize="20"> + </Span>

        <Span FontSize="20">3</Span>
        <Span BaselineAlignment="TextTop" FontSize="14">3/4</Span>

        <Span FontSize="20"> = </Span>

        <Span FontSize="20">6</Span>
        <Span BaselineAlignment="TextTop" FontSize="14">1/4</Span>
    </TextBlock>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:11:09.020

是的，这个 XAML 输出也可以通过 C# 代码完成

**伪代码**

创建一个[StackPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx)对象

创建一个[TextBlock](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.aspx)对象。将它的[TextWrapping](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.textwrapping.aspx)属性设置为 Wrap 和[Width](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.width.aspx)为 455。

创建多个[Span](http://msdn.microsoft.com/en-us/library/system.windows.documents.span.aspx)对象。根据您的需要设置 FontSize 和其他属性（文本、BaseAllighnemt）。

将[span](http://msdn.microsoft.com/en-us/library/system.windows.documents.span.aspx)对象添加到[Textblock.Inlines](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.inlines.aspx)属性

将文本块添加到堆栈面板

就是这样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:11:06.327

解析 XAML 代码并创建与标记对应的对象，因此您始终可以通过直接创建对象来执行相同操作。

因此，您只需创建 Span 对象并设置正确的属性，然后将它们作为子项添加到 TextBlock 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:11:21.050

实际上，*几乎*可以在 Xaml 中完成的任何事情都可以在 C# 中完成，~~因为 Xaml 在构建时被转换为 C#（查找`*.g.cs`文件）~~. 大多数情况下，您可以只使用您在 Xaml 中指定的相同类，以及 Xaml 自动为您处理的一些添加。在这种情况下，您可以这样做：

```
var textblock = new TextBlock();
textblock.Inlines.Add(new Run("2") {FontSize = 20});
textblock.Inlines.Add(new Run("1/2") {FontSize = 14, BaselineAlignment = BaselineAlignment.TextTop}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T16:15:15.490

对于您发布的 XAML，相信我，XAML 更具可读性和紧凑性。要在代码中执行此操作，您必须实例化`Window`和`StackPanel`，将 添加`StackPanel`到`Window`，提供`Window`其标题、高度和宽度属性等。您已经查看了大约六行代码来做到这一点，当您开始实例化`TextBlock`和设置`Span`.

您绝对可以在没有 XAML 的情况下使用 WPF，尽管我不确定您为什么想要这样做。[可以在此处](http://www.tbiro.com/Hello-WPF-Without-XAML.htm)找到一个 WPF 程序示例。事实上，你的问题的反面是正确的。您可以在 XAML 中执行的所有操作，都可以在 C# 中执行，但并非您可以在 C# 中执行的所有操作，您都可以在 XAML 中执行。这是因为 XAML 映射直接执行通用运行时语言类、属性、事件等，但每个类和一段 XAML 代码之间并不存在映射。

长话短说，XAML 比纯代码更易于维护和编辑，并且需要更简单的工具（XML 编辑器）才能使用，因此比使用纯代码更可取。

# text-files - 读取数据表行并将它们插入文本文件

> ID：11799284
> 
> 赞同：0
> 
> 时间：2012-08-03T16:02:35.863
> 
> 标签：text-files, datarow

我想将表中的所有行（仅包含一列）写入文本文件。

这就是我所拥有的：

```
try
            {
                DateTime DateTime = DateTime.Now;
                using (StreamWriter sw = File.CreateText(AppVars.IntegrationFilesLocation + DateTime.ToString(DateFormat) + " Detail.txt"))
                {
                    DataTable table = Database.GetDetailTXTFileData();

                    foreach (DataRow row in table.Rows)
                    {
                        sw.WriteLine(row[0].ToString());
                    }
                }
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message);
            } 
```

以上不是写入文本文件。它从 table.Rows 跳转到 foreach 块之外。基本上它不是在读取行。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:36:12.933

这已得到修复。查询本身存在问题。

# mysql - 将非常大的插入插入到 mysql，max_packet_size

> ID：11799285
> 
> 赞同：3
> 
> 时间：2012-08-03T16:02:38.700
> 
> 标签：mysql

我们正在尝试安装 manatee 软件，但出现此错误。

```
mysql -u manatee cgspu -p --max_allowed_packet=4096M < to-insert.sql
Warning: option 'max_allowed_packet': unsigned value 4294967296 adjusted to 2147483648
Enter password: 
ERROR 1153 (08S01) at line 1: Got a packet bigger than 'max_allowed_packet' bytes 
```

Mysql 确实在设置 max_allowed_pa​​ckets，我们检查`mysql --help` 哪个显示

```
max_allowed_packet                2147483648 
```

有什么办法可以规避这种情况吗？我不得不从初始数据库中删除那一行，填写makefile，甚至让它安装软件。

现在我在数据库之外留下了一行，无法插入它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:14:45.137

**编辑：**

您可能需要`max_allowed_packet` **在服务器上**设置。

尝试这个：

```
(echo 'SET GLOBAL max_allowed_packet=1073741824;' ; cat to-insert.sql) |
mysql -u manatee cgspu -p --max_allowed_packet=1073741824 
```

看看是否可以解决您的问题。

是否`to-insert.sql`包含大于 2G 的单个 SQL 语句？

或者它是否包含多行`INSERT`：

```
INSERT INTO example VALUES 
(1),(2),(3), .... 
```

如果是这样，请将这些重写为单独的`INSERT`语句：

```
INSERT INTO example VALUES (1);
INSERT INTO example VALUES (2);
INSERT INTO example VALUES (3); 
```

如果您`to-insert.sql`使用创建`mysqldump`，请尝试使用以下命令重新导出记录：

```
mysqldump --skip-extended-insert ... 
```

# ios - 在 iOS 中创建导出的方法库类

> ID：11799287
> 
> 赞同：0
> 
> 时间：2012-08-03T16:02:50.660
> 
> 标签：ios, xcode, class, methods, include

我确信我的措​​辞是阻止我在这里找到正确答案的原因。我想创建一个“通用”类，我的所有其他类都可以在 xCode 中使用。这个 Common 类将包含几个不同类经常使用的通用方法。我知道一种可行的方法是在我的方法定义的开头放置一个“+”号，并在每个类中包含我的“Common.h”。这是内存管理、效率、良好实践的最佳方式吗？或者您是否推荐其他解决方案。

```
//Inside Common.h
+(NSString*)SayHello;
//Inside Common.m
+(NSString*)SayHello{
return @"Hi";
}

//Inside AppDelegate.m
#import "Common.h"
//then later
NSLog(@"Common said %@",[Common SayHello]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:09:05.310

我更喜欢将实用程序类设为 C 风格：

**。H**

```
NSString *ResourcesPath(); 
```

**.m**

```
NSString *ResourcesPath() {
    NSString* resourcePath = [[NSBundle mainBundle] resourcePath];
    return resourcePath;
} 
```

**用法**

导入 .h 调用

```
NSString * resPath = ResourcesPath(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:07:05.137

`+`符号表示实例方法之上的类方法。就良好实践而言，这绝对取决于。就内存管理而言，如果您使用 ARC，则不必太担心。如果您使用 MRC，您只需要了解您在类方法中创建和返回的对象，就像您应该为实例方法一样。

要考虑的另一件事是您是否需要 Singleton 来执行此类工作。不知道您的确切目标很难确定，但您可能会使用一个。

# python - 在python中获取函数调用者的信息

> ID：11799290
> 
> 赞同：8
> 
> 时间：2012-08-03T16:02:56.070
> 
> 标签：python, introspection, callstack

我想获取有关 python 中特定函数的调用者的信息。例如：

```
class SomeClass():
    def __init__(self, x):
        self.x = x
    def caller(self):
        return special_func(self.x)

def special_func(x):
    print "My caller is the 'caller' function in an 'SomeClass' class." 
```

用python可以吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T16:07:50.003

是的，该[`sys._getframe()`](http://docs.python.org/library/sys.html#sys._getframe)函数让您从当前执行堆栈中检索帧，然后您可以使用[`inspect`模块](http://docs.python.org/library/inspect.html)中的方法和文档进行检查；您将在属性中寻找特定的本地人`f_locals`，以及`f_code`信息：

```
import sys
def special_func(x):
    callingframe = sys._getframe(1)
    print 'My caller is the %r function in a %r class' % (
        callingframe.f_code.co_name, 
        callingframe.f_locals['self'].__class__.__name__) 
```

请注意，您需要注意检测在每一帧中找到的信息类型。

`sys._getframe()``f_back`返回一个框架对象，您可以通过每个堆栈上的引用链接整个堆栈。或者，您可以使用该[`inspect.stack()`函数](https://docs.python.org/3/library/inspect.html#inspect.stack)生成带有附加信息的帧列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T16:10:50.600

一个例子：

```
def f1(a):
    import inspect
    print 'I am f1 and was called by', inspect.currentframe().f_back.f_code.co_name
    return a

def f2(a):
    return f1(a) 
```

将检索“立即”调用者。

```
>>> f2(1)
I am f1 and was called by f2 
```

如果没有从另一个人那里调用，你会得到（在 IDLE 中）：

```
>>> f1(1)
I am f1 and was called by <module> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-29T20:36:46.930

感谢 Jon Clements 的回答，我能够创建一个返回所有调用者的有序列表的函数：

```
def f1():
    names = []
    frame = inspect.currentframe()
    ## Keep moving to next outer frame
    while True:
        try:
            frame = frame.f_back
            name = frame.f_code.co_name
            names.append(name)
        except:
            break
    return names 
```

当在链中调用时：

```
def f2():
    return f1()

def f3():
    return f2()

def f4():
    return f3()

print f4() 
```

看起来像这样：

```
['f2', 'f3', 'f4', '<module>'] 
```

在我的情况下，我过滤掉任何内容`'<module>'`，然后将最后一项作为始发呼叫者的姓名。

或者修改原始循环以在任何以 开头的名称的第一次出现时退出`'<'`：

```
frame = frame.f_back
name = frame.f_code.co_name
if name[0] == '<':
    break
names.append(name) 
```

# javascript - 将内联 javascript 移至外部文件

> ID：11799294
> 
> 赞同：-2
> 
> 时间：2012-08-03T16:03:16.693
> 
> 标签：javascript, jquery-ui

$('#<%=pnlCheckout.ClientID%> div.listitem').length 在我的页面级 javascript 上有这个我必须将它移动到外部 javascript 文件中，任何人都可以帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:06:38.987

创建一个名为的文件`nameOfFile.js`并将您的 javascript 代码复制到其中，而`<script>`内联没有围绕它的标签。`<script>`然后使用src 属性将外部文件加载到主文件中：

```
<script type="text/javascript" src="pathToFile.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:40:03.163

你可以在这里使用 jQuery[`ends with`](http://api.jquery.com/attribute-ends-with-selector/)选择器：

```
$('[id$="pnlCheckout"]') 
```

它将匹配 ID 以结尾的任何元素`pnlCheckout`

您的最终 js 将是：

```
 $('[id$="pnlCheckout"] div.listitem').length 
```

相关：[jQuery Selector: Id Ends With?](https://stackoverflow.com/questions/609382/jquery-selector-id-ends-with)

# image - Magento 图像 CDN 亚马逊 s3 图像一半工作一半不工作

> ID：11799297
> 
> 赞同：1
> 
> 时间：2012-08-03T16:03:26.547
> 
> 标签：image, magento, amazon-s3, cdn

我正在使用 Magento 1.11。我已经搜索了一段时间，并且尝试了很多不同的方法，例如增加 php.ini 页面中的内存大小，这有助于处理我的媒体目录中的一些图像。但是，引用 Amazon CDN 的一半无法正常工作，而另一半则正常。这就是让我相信这是一个内存问题的原因。此外，这是一个代表现有生产环境的开发环境。生产环境中的所有图像都可以正常工作。

我很茫然。

谢谢你的任何建议。

# python - sys.stdin.readlines() 挂起 Python 脚本

> ID：11799300
> 
> 赞同：13
> 
> 时间：2012-08-03T16:03:35.720
> 
> 标签：python, stdin, freeze, readlines

每次我执行我的 Python 脚本时，它似乎都挂在这一行：

```
lines = sys.stdin.readlines() 
```

我应该怎么做才能解决/避免这种情况？

**编辑**

这是我正在做的事情`lines`：

```
lines = sys.stdin.readlines()
updates = [line.split() for line in lines] 
```

**编辑 2**

我正在从 git hook 运行这个脚本，所以 EOF 周围有没有？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T16:07:21.923

这在很大程度上取决于您要完成的工作。你也许可以这样做：

```
for line in sys.stdin:
    #do something with line 
```

当然，使用这个习惯用法以及`readlines()`您使用的方法，您需要以某种方式将 EOF 字符发送到您的脚本，以便它知道文件已准备好读取。（在 unix 上，Ctrl-D 通常可以解决问题）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T16:07:53.540

除非您将某些内容重定向到`stdin`预期的行为。这就是说要从中读取输入`stdin`（这将是您运行脚本的控制台）。它正在等待您的输入。

请参阅：[“如何完成`sys.stdin.readlines()`输入？](https://stackoverflow.com/questions/5549141/how-to-finish-sys-stdin-readlines-input)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T16:08:26.673

如果您在交互式会话中运行程序，那么这一行会导致 Python 从标准输入（即您的键盘）读取，直到您发送 EOF 字符（`Ctrl`- `D`(Unix/Mac) 或`Ctrl`- `Z`(Windows)）。

```
>>> import sys
>>> a = sys.stdin.readlines()
Test
Test2
^Z
>>> a
['Test\n', 'Test2\n'] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T16:40:07.007

我知道这不是直接回答您的问题，因为其他人已经解决了 EOF 问题，但通常我发现从*长期存在*的子进程或标准输入读取实时输出时效果最好的是 while/if 行方法：

```
while True:
    line = sys.stdin.readline()
    if not line:
       break
    process(line) 
```

在这种情况下， sys.stdin.readline() 将在返回EOF*之前返回文本行。*一旦给出 EOF，将返回空行，触发循环中断。只要未提供 EOF，此处仍可能发生挂起*。*

值得注意的是，当子进程/标准输入仍在运行时，处理“实时输出”的能力需要写入应用程序刷新它的输出。

# java - 大型 Java JAR 不会在 `http` 上运行

> ID：11799308
> 
> 赞同：0
> 
> 时间：2012-08-03T16:04:00.907
> 
> 标签：java, http, jar

平台：Win7 32bit、Netbeans 7.1.2、JDK 7、JRE 1.7.0_05。

Web 服务器：Ubuntu/Apache 和 Windows Server 2008/IIS 7。

我有一个大型 Java Web 小程序，在运行本地文件系统时运行良好，但在运行时失败`http`（两台服务器都经过测试）。我使用过 APPLET、OBJECT 和 deployJava.js。我一开始只是一个 APPLET，但现在我使用的是 Jave Web Start。

Experimentaion 表明，该问题仅发生在大约 34k 或更大的 JAR 中。当前版本使用通过 APPLET 标记调用的 JWS Applet。

所有 JARS 都已签名。

启用了 JAVA 缓存（以规避错误的“代码未签名”错误），但我在每次测试时清除了缓存网络。

HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title>Test page for launching the applet via JNLP</title>
    </head>
    <body>
        <h3>Test page for launching the applet via JNLP</h3>
        <applet width="300" height="300">
            <param name="jnlp_href" value="launch.jnlp"/>
        </applet>
    </body>
</html> 
```

JNLP：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<jnlp href="launch.jnlp" spec="1.0+">
    <information>
        <title>cleverAUDIO</title>
        <vendor>ChrisSpray</vendor>
        <homepage href=""/>
        <description>cleverAUDIO</description>
        <description kind="short">cleverAUDIO</description>
    </information>
    <update check="always"/>
    <security>
        <all-permissions/>
</security>
    <resources>
        <j2se java-vm-args="-Djava.security.policy=applet.policy" version="1.7+"/>
        <jar href="cleverAUDIO.jar" main="true"/>
    <jar download="lazy" href="lib/cleverDEBUG.jar"/>
    <jar download="lazy" href="lib/cleverWINDOWS.jar"/>
    <jar download="lazy" href="lib/cleverWinMMDevice.jar"/>
    <jar download="lazy" href="lib/platform.jar"/>
    <jar download="lazy" href="lib/jna.jar"/>
</resources>
    <applet-desc height="300" main-class="uk.co.cleverit.cleverAUDIO.applet" name="cleverAUDIO" width="300">
    </applet-desc>
</jnlp> 
```

通过本地文件系统调用时的完整 Java 日志在[此处](http://cleverit.co.uk/problems/File_Log.txt)以及通过`HTTP` [此处](http://cleverit.co.uk/problems/HTTP_Log.txt)调用时。

部分文件日志：

```
network: ResponseCode for file:/N:/cleverAUDIO/dist/cleverAUDIO.jar : 200
network: Encoding for file:/N:/cleverAUDIO/dist/cleverAUDIO.jar : null
network: Sever response: (length: 62791, lastModified: Fri Aug 03 14:51:01 BST 2012, downloadVersion: null, mimeType: application/x-java-archive)
network: CleanupThread used 6 us
preloader: Added pending event 2: DownloadEvent[type=load,loaded=0, total=62791, percent=0]
network: Downloading resource: file:/N:/cleverAUDIO/dist/cleverAUDIO.jar
Content-Length: 62,791
Content-Encoding: null
JVM[id=1]-Heartbeat sent heartbeat: [Conversation: id=0, initiatingSide=true] { healthy: true, ageSeconds: 7, availableHeapKB: 248528, appletThreads: 6 }
preloader: Using preloader class: null  com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter@1737e47
preloader: Using default preloader
preloader: Requested to use preloader class: null
preloader: Delivering: ConfigEvent[type=SetVisible, value=true]
preloader: Delivering: DownloadEvent[type=load,loaded=0, total=62791, percent=1]
preloader: Skipped all (0) download events prior to DownloadEvent[type=load,loaded=0, total=62791, percent=1]
preloader: Preloader jars loaded. Error state=null
security: Staring warmup validation
preloader: Start progressCheck thread
preloader: GrayBox: parent = sun.plugin2.main.client.PluginEmbeddedFrame[frame0,0,0,300x300,layout=java.awt.BorderLayout,title=,resizable,normal]
preloader: Delivering: DownloadEvent[type=load,loaded=1005, total=62791, percent=1]
<snip>
preloader: Delivering: DownloadEvent[type=load,loaded=62791, total=62791, percent=80]
network: Wrote URL file:/N:/cleverAUDIO/dist/cleverAUDIO.jar to File C:\Users\ChrisSpray\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\39\9a4cda7-7f8c3d0f-temp 
```

部分`HTTP`日志：

```
network: ResponseCode for http://lamp.cleverit.co.uk/includes/cleverAUDIO/cleverAUDIO.jar : 200
network: Encoding for http://lamp.cleverit.co.uk/includes/cleverAUDIO/cleverAUDIO.jar : null
network: Sever response: (length: 62791, lastModified: Fri Aug 03 15:09:41 BST 2012, downloadVersion: null, mimeType: application/java-archive)
network: CleanupThread used 6 us
preloader: Added pending event 2: DownloadEvent[type=load,loaded=0, total=62791, percent=0]
network: Downloading resource: http://lamp.cleverit.co.uk/includes/cleverAUDIO/cleverAUDIO.jar
Content-Length: 62,791
Content-Encoding: null
preloader: Added pending event 3: DownloadEvent[type=load,loaded=1005, total=62791, percent=1]
<snip>
preloader: Added pending event 32: DownloadEvent[type=load,loaded=34440, total=62791, percent=43]
cache: MemoryCache: removed entry http://lamp.cleverit.co.uk/includes/cleverAUDIO/launch.jnlp
preloader: Using preloader class: null com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter@60acdc
preloader: Using default preloader
preloader: Requested to use preloader class: null
JVM[id=1]-Heartbeat sent heartbeat: [Conversation: id=0, initiatingSide=true] { healthy: true, ageSeconds: 6, availableHeapKB: 250928, appletThreads: 6 }
preloader: Delivering: ConfigEvent[type=SetVisible, value=true]
preloader: Delivering: DownloadEvent[type=load,loaded=34440, total=62791, percent=1]
preloader: Skipped all (30) download events prior to DownloadEvent[type=load,loaded=34440, total=62791, percent=1]
preloader: Preloader jars loaded. Error state=null
security: Staring warmup validation
preloader: Start progressCheck thread
preloader: GrayBox: parent = sun.plugin2.main.client.PluginEmbeddedFrame[frame0,0,0,300x300,layout=java.awt.BorderLayout,title=,resizable,normal]
JVM[id=1]-Heartbeat round-trip heartbeat took 1003640 microsecs.
JVM[id=1]-Heartbeat sent heartbeat: [Conversation: id=0, initiatingSide=true] { healthy: true, ageSeconds: 8, availableHeapKB: 249559, appletThreads: 8 }
JVM[id=1]-Heartbeat round-trip heartbeat took 1006503 microsecs.
JVM[id=1]-Heartbeat sent heartbeat: [Conversation: id=0, initiatingSide=true] { healthy: true, ageSeconds: 10, availableHeapKB: 250558, appletThreads: 8 }
JVM[id=1]-Heartbeat round-trip heartbeat took 1005683 microsecs.
preloader: Stop progressCheck thread 
```

如您所见，处理在 34440 字节后停止，但 JAR 的长度为 62791 字节！

任何地方都不会产生错误或异常（我可以看到）。

我在这个问题上花了一个星期的时间，除了增加我的知识外，尽管尝试了许多变化，但我没有得到任何结果。有人有什么好主意吗？

非常感谢期待

克里斯

# jquery - Ajax 返回正确的结果但格式错误

> ID：11799309
> 
> 赞同：0
> 
> 时间：2012-08-03T16:04:03.410
> 
> 标签：jquery, ajax, asp-classic, for-loop

我正在使用经典的 ASP、Ajax 和 JQuery 开发一个 tol，并且在最后一步我现在开始遇到一个奇怪的问题。

我通过 Ajax 向我的 Asp 页面提交了一个查询字符串。然后，asp 页面查看值或某些参数，然后为每个参数运行一个 for 循环。这是我的一个 for 循环的代码：

```
if not edBlogRS.eof then
        for arrKey = 0 to ubound(edBlogDocsArr)
            if not edBlogRS.eof then
                doc_headline = edBlogRS("doc_headline")
                doc_headline = Replace ( Replace ( Replace ( Replace ( Replace (doc_headline, "–","-"), "”","''"), "‘", "'"), "“","''"), "’", "'")
                featuredRecords = featuredRecords & response.write("<li id="&chr(34)& edBlogRS("doc_id") &chr(34)&" value="&chr(34)& edBlogRS("doc_id") &chr(34)&"><div class=""sort""><img src=""http://img.deusm.com/deusm/sort_icon.gif"" border=""0"" /></div><div class=""delete"">Delete "& edBlogRS("section_type") &"</div><b>"& edBlogRS("doc_headline") &"</b><br />- "& edBlogRS("section_name") &" | "& edBlogRS("doc_published") &"</li>")
            end if
        next
        featuredRecords = featuredRecords & response.write("<input type=""hidden"" />")
    else
        featuredRecords = "<span class=""error"">** There was an error rebuilding the featured document list.<br /></span>"
        response.write(featuredRecords)
    end if 
```

我的另外两个循环做同样的事情，除了更新 RS 和 []Records 值以匹配特定的内容组（即：blogRS/blogRecords、rightRS/rightRecords）

然后，我的目标是将结果带回我的主页面，其中每个结果都将添加到匹配列表的 Html 中。这是我的阿贾克斯：

```
$.ajax({ 
                type: "POST", 
                url: "docsearch_action.asp", 
                data: { pub: publication, docs: queryString, func_id: "2" },
                dataType: "html",
                success: function(featuredRecords, blogRecords, rightRecords) {
                    $("#featured_docids").html(featuredRecords);
                    $("#blogs_docids").html(blogRecords);
                    $("#right_docids").html(rightRecords);
                },
                error: function(){
                alert("An error occured. Please try again.");
                }
        }); 
```

期望的结果将是三个列表，每个列表都包含它们的 coorespnding 文档：

**特色文件** 文件一 ​​文件二

**博客** 文档三 文档四

**其他** 文件五 文件六

但是，我得到的结果如下所示：

**特色文件** 文件一 ​​文件二 文件三 文件四 文件五 文件六

**博客** 成功

**其他**

在搞砸了一段时间后，我很困惑，并且不确定此时问题可能是什么。任何帮助将不胜感激！

** 编辑 **

这是我的新成功电话：

```
success: function(records) {
                    $("#featured_docids").html(records[0]);
                    $("#blogs_docids").html(records[1]);
                    $("#right_docids").html(records[2]);
                }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:17:53.327

您在 data 参数中获取数据。另外两个是 textStatus 和 XMLHttpRequest 对象。

```
success(data, textStatus, jqXHR) 
```

所以

```
success: function(featuredRecords, blogRecords, rightRecords) { 
```

`featuredRecords === data` `blogRecords === textStatus` `rightRecords === jqXHR`

此外，如果您在数组中获取数据，您可以使用索引来获取数据

```
success: function(data) {
                $("#featured_docids").html(data[0] + data[1]);
                $("#blogs_docids").html(data [2] + data[3]);
                $("#right_docids").html(data [4] + data[5]);
            }, 
```

但是您将所有数据放在一个字符串中，因此您必须修改您的 ASP 代码以按照您想要的方式返回数据，然后使用数据对象将其放在您想要的位置。

也许创建一个数组？还是数组列表？在循环中添加每个元素，然后将其写入您的响应中

我实际上不明白您是如何编写代码的，因为我并不真正了解 ASP/VB，但我会尽力解释

创建一个数组

`yourarray = new array();`

将您需要的内容添加到您的数组中 - 我猜这就是您的 HTML 所在的位置？

`yourarray[0] = doc1`

`yourarray[0] = doc2`

当你完成添加到你的阵列..

`response.write(yourarray);`

# sql-server-2008 - 如何使用经典 asp 在 SQL Server 数据库中存储文件？

> ID：11799311
> 
> 赞同：0
> 
> 时间：2012-08-03T16:04:21.290
> 
> 标签：sql-server-2008, asp-classic

我正在尝试将文件存储在 SQL Server 2008 数据库中。由于文件的大小很小，因此性能不是问题。

我的表有这 3 列：

```
filename nvarchar(50)
extension nvarchar(5)
content image 
```

如何编写 SQL 语句将文件插入此数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:23:39.437

MS 有一篇关于如何使用经典 asp 将文件上传到服务器的文章。（[见这里](http://support.microsoft.com/kb/299692%5b/1%5d)）一旦你的服务器上有文件，你就可以将它添加到数据库中。

但请记住**，将二进制数据存储在数据库中通常是个坏主意**

但是，如果它是超级小的东西，那就试试吧！例如，我认为您可以将其插入 varbinary(max) 列：例如：

```
INSERT INTO YourTable(YourVarbinaryColumn) 
    SELECT * FROM  
    OPENROWSET(BULK N'(name of your file to import)', SINGLE_BLOB) AS import 
```

另请参阅：如何显示存储在 BLOB 字段中的图像。[http://support.microsoft.com/kb/173308](http://support.microsoft.com/kb/173308)这种技术也可以应用于其他类型的二进制数据，而不仅仅是图形。

祝你好运...

# android - 如何在一组按钮上管理 setOnClickListener

> ID：11799312
> 
> 赞同：0
> 
> 时间：2012-08-03T16:04:26.123
> 
> 标签：android, android-layout, android-widget

我有一个动态的按钮数组，我想知道如何处理每个按钮上的 onclick？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T19:01:36.667

我认为不需要为每个按钮创建一个新的 OnClickListener ——所有按钮都可以共享一个侦听器。

```
private OnClickListener myListener = new OnClickListener() {
  public void onClick(View v) {
    Object tag = v.getTag();
    // Do something depending on the value of the tag
  }
};

...

for (int i=0; i < btns.length; ++i) {
  btns[i].setOnClickListener(myListener);
  btns[i].setTag(some_identifying_information);
} 
```

当然，您*可以*为每个按钮创建一个唯一的 OnClickListener，并利用这种方式：

```
for (int i=0; i < btns.length; ++i) {
  final Button btn = btns[i];
  btn.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
      // do something depending on the value of btn, which you're allowed
      // to reference here because it was declared final above.
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:15:26.973

就像你在一个按钮上一样......

设置一个点击监听器，如果你有一个数组，它看起来像这样：

```
btns[0].setOnClickListener(new OnClickListener() {
    public void onClick(View v){
        //do something
    }
});

btns[1].setOnClickListener(new OnClickListener() {
    public void onClick(View v){
        //do something
    }
});
//etc. 
```

如果你想让他们都做同样的事情，你可以使用 for 循环来循环数组，如下所示：

```
for(int i = 0; i< btns.length; i++){
    btns[i].setOnClickListener(new OnClickListener() {
        public void onClick(View v){
            //do something
        }
    });
} 
```

我不知道你在做什么，但如果你有一个按钮数组，你可能应该使用带有 ListView 或其他东西的适配器，而不是你现在如何做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:49:11.177

没有看到一些代码或更多解释，很难真正回答你的问题，但这里有一些提示：

在我们到达监听器之前，我们必须确保每个动态创建的按钮都知道如何响应点击事件。您可以使用`setTag`按钮上的方法将任意对象附加到它。此对象将表示按钮在单击时的行为。您可以只使用整数作为这个对象（可能是一些常量值），或者如果每个按钮都需要一些唯一的数据，创建一个类来维护按钮在单击时需要如何操作以及您需要的数据（或者至少是对它的引用）。

然后，您可以初始化一个处理所有按钮单击的侦听器。在`onClick`此侦听器的方法中放置一个分支以处理所有点击案例的条件。在创建动态按钮时，在所有动态按钮上设置此侦听器。在您的 onClick 开始时，从方法的`View`参数中获取标记`onClick`（此视图将是被单击的按钮），并使用它来决定条件的哪个分支。

希望这可以帮助。如果您的问题更具体，我们将能够提供更详细的帮助。

# asp.net-mvc - 将 MVC 3 站点从 LocalHost 部署到 IIS（目录列表被拒绝）

> ID：11799314
> 
> 赞同：1
> 
> 时间：2012-08-03T16:04:39.307
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis, iis-7

我的网站位于：

```
http://localhost:55649/ 
```

我想把它移到：

```
\\10.0.0.169\Inetpub\wwwroot\MyOldWebsite\NewSite 
```

我阅读了此[http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)并单击“添加可部署程序集”，但出现错误：

> 目录列表被拒绝
> 
> 此虚拟目录不允许列出内容。

我可以做些什么来修复此错误以使网站正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:35:33.910

当您收到该消息时，这往往是因为路由不起作用并且站点正在尝试查找默认文档（在 MVC3 中不存在）。如果路由不起作用，这通常意味着 IIS 没有将其解释为 MVC3 站点或不知道 MVC3 站点是什么。

1.  您的服务器是否安装了 .NET Framework 4.0 和 MVC3？
2.  您的站点是否使用 .NET 4.0 应用程序池？
3.  您的新目录是否具有适当的权限？根据应用程序/服务器的安全性，这可能会发生变化。但通常 IUSR 需要读取权限。

# javascript - 在Firefox中切换浏览器选项卡时jquery动画中断

> ID：11799315
> 
> 赞同：4
> 
> 时间：2012-08-03T16:04:41.437
> 
> 标签：javascript, jquery, html, css, jquery-animate

我有一个带有 jquery 的动画文本效果，它在 chrome 和 ie 中运行良好，但在用户切换选项卡时会在 Firefox 中中断。如果您切换选项卡并让动画运行 10-15 秒，然后返回您可以看到动画尝试一次运行多行。

我尝试过使用条件 for`$(window).blur()`和`$(window).focus()`以及完全`clearInterval`没有运气的函数。

这是该[网站的链接](http://www.kg-stores.com/kineticgroup_website_redesign_working/)

这是有问题的jquery：

```
 $(document).ready(function(){
$('.container .flying-text').css({opacity:0});
$('.container .active-text').animate({opacity:1, marginLeft: "350px"}, 4000);
var int = setInterval(changeText, 5000);    

 function changeText(){
var $activeText = $(".container .active-text"); 

var $nextText = $activeText.next(); 
if($activeText.next().length == 0) $nextText = $('.container .flying-text:first');

$activeText.animate({opacity:0}, 200);
$activeText.animate({marginLeft: "-100px"});

$nextText.css({opacity: 0}).addClass('active-text').animate({opacity:1, marginLeft: "350px"}, 4000, function(){

    $activeText.removeClass('active-text'); 
    });
  }

 }); 
```

的HTML：

```
<div class="container">
    <h3 id="fly1" class="flying-text active-text">Creative Solutions</h3>
    <h3 id="fly2" class="flying-text">Graphics</h3>
    <h3 id="fly3" class="flying-text">Sourcing</h3>
    <h3 id="fly4" class="flying-text">Distribution</h3>
    <h3 id="fly5" class="flying-text">Online Tools</h3>
    <h3 id="fly6" class="flying-text">Custom Branding</h3>
    <h3 id="fly7" class="flying-text">Personalized Support</h3>
</div> 
```

和CSS：

```
.flying-text{
  margin-left:-100px;
  font-size:60px;
  text-align:center;
  font-style:bold;
} 
```

关于可能的修复的任何想法？我知道浏览器在非活动选项卡中以较慢的速度呈现动画，但我似乎无法定位动画并在切换的选项卡上停止/恢复它。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:18:23.590

我认为如果窗口不可见（不需要焦点），jQuery 的意图是不运行
它通过使用[window.requestAnimationFrame](http://paulirish.com/2011/requestanimationframe-for-smart-animating/) 为什么？因为如果您看不到动画，它会节省性能。我认为动画值是在后台计算的，而不是元素的实际渲染。

* * *

动画的问题是：您通过间隔调用更改文本。间隔与动画无关。如果您停止/暂停 jquery 动画，因为您模糊了窗口，超时将不会停止。

你需要做什么。
创建一个函数 nextText，它改变文本和一个启动动画的函数 startAnimation。还有一个停止动画的函数 stopAnimation。
不要使用间隔。
Onblur 通过调用 stopAnimation 停止动画 Onfocus 通过调用 startAnimation
启动动画
加载后调用 startAnimation 一次
动画完成后调用函数 nextText
nextText 调用 startAnimation

# r - 自定义函数、ggplot 和返回值

> ID：11799317
> 
> 赞同：10
> 
> 时间：2012-08-03T16:04:45.080
> 
> 标签：r, ggplot2

今天我注意到了一些奇怪的事情。我写了一个函数，它应该返回一个数据框和一个图，一个用 ggplot2 生成的图。

但是，如果我运行该函数，要么不会出现绘图，要么不会出现数据框。

你知道这个问题并且可以给我一个解决方案吗？

非常感谢你！

雷纳

这是一个让我自己清楚的虚拟函数：

```
dummyfunct<-function(){
df <- data.frame(time = factor(c("Lunch","Dinner"), levels=c("Lunch","Dinner")),
               total_bill = c(14.89, 17.23))

ggplot(data=df, aes(x=time, y=total_bill)) + geom_bar(aes(fill=time))
return(df)
} 
```

或者

```
dummyfunct<-function(){
df <<- data.frame(time = factor(c("Lunch","Dinner"), levels=c("Lunch","Dinner")),
               total_bill = c(14.89, 17.23))

ggplot(data=df, aes(x=time, y=total_bill)) + geom_bar(aes(fill=time))
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T16:09:39.330

我会回答，但我知道这是一个重复的问题，它可能会被关闭：

使用 ggplot 您需要`print`在函数内部显式使用，如下所示：

```
dummyfunct <- function(){
    df <- data.frame(time = factor(c("Lunch","Dinner"), levels=c("Lunch","Dinner")),
           total_bill = c(14.89, 17.23))
    x <- ggplot(data=df, aes(x=time, y=total_bill)) + geom_bar(aes(fill=time))
    print(x)
    return(df)
} 

dummyfunct() 
```

# java - 将对象作为查询参数传递并排除 ID 列

> ID：11799324
> 
> 赞同：1
> 
> 时间：2012-08-03T16:05:06.680
> 
> 标签：java, jpa

我有以下内容：

```
@Entity
@NamedQuery(name = "listCarsBySecurity", query = "SELECT c FROM Car c WHERE c.security = :security"
public class Car {  
    @Id
    @GeneratedValue
    private Long id;

    @NotNull()
    @Column(nullable = false)   
    private String make;

    @NotNull()
@Column(nullable = false)
private String model;

    // Some more fields

    @NotNull()
@OneToOne (fetch = FetchType.LAZY, orphanRemoval=true)
private Security security = new Security();

    // Some getters and setters 
```

如您所见，Car 类有一个“Security”对象，它是 LAZY 获取的。安全类如下所示：

@Entity 公共类安全 {

```
@Id @GeneratedValue
private Long id;

// Security equipment. Add in alphanumerical order
private boolean abs;
private boolean airbag;
private boolean antispin;

// Some getters and setters 
```

如您所见，命名查询列表尝试列出所有具有等于提供的安全对象的安全实体的汽车。

持久化方法如下所示：

```
 @Stateless
public class CarEJB {

    @PersistenceContext(unitName = "carcmsPU")
    private EntityManager em;

    public List<Car> listCarsBySecurity(Security security) {
        TypedQuery<Car> query = em.createNamedQuery("listCarsBySecurity", Car.class);
        query.setParameter("security", security);
        return query.getResultList();
    } 
```

一个junit测试看起来像：

```
@Test
public void searchCar() throws Exception {
    // Looks up the EJBs        
    carEJB = (CarEJB) ctx.lookup("java:global/classes/CarEJB");

    // Create a new Ferrari with security = ABS brakes and Airbag
    Car car = new Car();
    car.setMake("Ferrari");
    car.setModel("Some model");
    car.setSubModel("Some sub model");
    car.setEngine("Some engine");
    car.setYear(1999);        
    car.getFuel().setGasoline(true);
    car.setGearbox(Gearbox.AUTOMATIC);
    car.setKilometres(323);
    car.setDescription("This is a description");
    Security security = new Security();
    security.setAbs(true);
    security.setAirbag(true);
    car.setSecurity(security);

    carEJB.createCar(car); // Persist

    // Create a new security object and match it to the former one
    Security securityObject = new Security();
    securityObject.setAbs(true);
    securityObject.setAirbag(true);

    List<Car> carList = carEJB.listCarsBySecurity(securityObject);

    assertTrue("Should contain at least 1 car with ABS and Airbag", carList.size() > 0 );
    for (Car carTemporary : carList) {
        System.out.println(carTemporary.toString());

    }

} 
```

问题是该列表根本不包含任何汽车。我想我知道为什么；命名查询确实尝试将 security_id 与 NULL 匹配（因为我没有定义它）。

我的问题是：如何通过将对象作为没有 ID 的查询参数传递并且不指定应在该对象内进行比较的所有字段来执行查询？（或者如何从搜索中排除 ID）？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:22:19.330

您可以使用 OR 定义命名查询并传递对象的每个属性。您还可以使用 Criteria API 根据您要查询的字段构建查询。由于您已经有一个命名查询，我将把它留给您。

如果您决定采用这种方式（如果您的实体具有太多属性，那么逐个字段的艰难比较有点疯狂）。使用标准，您可以执行以下操作：

```
CriteriaBuilder builder = entityManager.getCriteriaBuilder();
CriteriaQuery<Car> query =  builder.createQuery(Car.class);
Root<Car> queryRoot = query.from(Car.class);
query.select(queryRoot);

Path<String> pathToYourField = root.get(yourField); //yourField is a variable containing the field. 
                                                    //You can store all the variables in a list, iterate
                                                    //over them and do this for each one.
query.where(builder.and(builder.equal(pathToYourField, "particularValue"))); //You compare the path against a value.
//Rest of the fields / paths

TypedQuery<Car> typedQuery = entityManager.createQuery(query);
List<Car> cars = typedQuery.getResultList(); 
```

**编辑：**关于性能，请查看以下链接：

1.  [JPA 标准与命名查询](https://forums.oracle.com/forums/thread.jspa?threadID=1568599)
2.  [关于 Criteria vs HQL 的另一个答案](https://stackoverflow.com/questions/4401240/criteria-v-s-hql-who-is-faster)
3.  [标准开销讨论](http://chasethedevil.blogspot.com/2005/08/hibernate-criteria-api-vs-hql-overhead.html)

# entity-framework - EntityFramework 4.3.1 代码优先导航属性映射和可见性

> ID：11799328
> 
> 赞同：0
> 
> 时间：2012-08-03T16:05:25.727
> 
> 标签：entity-framework, many-to-many, code-first, navigational-properties

这是一个简短问题的长篇介绍，对不起！

我正在使用 EF 4.3.1 Code First，我有以下模型

```
public class Action
{
    protected Action()
    { }

    public virtual int ActionID { get; protected set; }

    [Required]
    [StringLength(DataValidationConstants.NameLength)]
    public virtual string Name {get; set;}

    [StringLength(DataValidationConstants.DescriptionLength)]
    public virtual string Description { get; set; }

    public virtual ICollection<Role> Roles { get; set; }

    public virtual void AuthorizeRole(Role role)
    {
        if (IsRoleAuthorized(role))
            throw new ArgumentException("This role is already authorized", "role");

        Roles.Add(role);
    }
}

public class Role
{
    protected Role()
    { }        

    public virtual int RoleID { get; protected set; }

    [Required]
    [StringLength(DataValidationConstants.NameLength)]
    public virtual string Name { get; set; }

    [StringLength(DataValidationConstants.DescriptionLength)]
    public virtual string Description { get; set; }
} 
```

还有我的 DBContext 类，在其他一些类库中定义，具有多对多映射：

```
public class myDB : DbContext
{
    public DbSet<Domain.Action> Actions { get; set; }
    public DbSet<Role> Roles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<Domain.Action>()
            .HasMany(action => action.Roles)
            .WithMany()
            .Map(map => map.ToTable("AuthorizedRoles"));
    }
} 
```

所以，这行得通。但是，如果注意到该方法`Action.AuthorizeRole(Role role)`很容易假设角色授权逻辑可能很复杂（现在一些已经授权的验证，但可能是任何验证，对吧？），这在一个好的老式域上是完全有效的模型。[但是...根据创建 POCO 代理的要求，](http://msdn.microsoft.com/en-us/library/gg715126%28v=vs.103%29)角色集合`public virtual ICollection<Role> Roles {get; set;}`需要公开，至少是吸气剂。这意味着 Action 类的任何客户端都可以添加或删除角色，绕过任何验证逻辑。是的，我想要延迟加载、更改跟踪等工作，所以我确实需要创建代理。

问候，我开始测试一些方法，使我能够将此属性设为`public virtual ICollection<Role> Roles {get; set;}`非公共属性，以便稍后测试代理创建。由于代理生成了我自己的类的子类，并且由于我信任我的继承者而不是我的客户，所以我决定将属性设为`protected`这样`protected virtual ICollection<Role> Roles {get; set;}`。但是，当然，我得到了一个编译错误就行了

```
modelBuilder.Entity<Domain.Action>()
            .HasMany(action => action.Roles)
            .WithMany()
            .Map(map => map.ToTable("AuthorizedRoles")); 
```

因为现在该属性受到保护，不能在 Action 类或其继承者之外访问，当然`myDB`context 类不是其中之一。

所以我需要尝试在`myDB`不公开它（属性）的情况下从类中访问属性。我虽然反思。我的上下文类看起来像这样：

```
public class myDB : DbContext
{
    public DbSet<Domain.Action> Actions { get; set; }
    public DbSet<Role> Roles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<Domain.Action>()
            .HasMany(action => ExtractPropertyValue<ICollection<Role>>(action, "Roles"))
            .WithMany()
            .Map(map => map.ToTable("AuthorizedRoles"));
    }

    protected virtual TProperty ExtractPropertyValue<TProperty>(object instance, string propertyName)
    {
        if(instance == null)
            throw new ArgumentNullException("instance", "Can't be null");
        if (string.IsNullOrWhiteSpace(propertyName))
            throw new ArgumentException("Can't be null or white spaced", "propertyName");

        Type instanceType = instance.GetType();
        PropertyInfo propertyInfo = instanceType.GetProperty(propertyName, BindingFlags.NonPublic);

        return (TProperty)propertyInfo.GetValue(instance, null);
    }
} 
```

注意新方法`ExtractPropertyValue`，在多对多映射指令上调用它。这灵魂工作对吗？HasMany 方法需要一个函数，该函数接收一个 Action 并返回一个 ICollection 的某物（在这种情况下为 Role），这就是得到的。但是不，它不起作用，它当然可以编译，但是在运行时，我得到了类似“这个表达式必须是像 obj => obj.MyProperty 这样的有效属性”的异常。

好吧，它需要是一个“直接”属性，并且它需要可以访问 de DBContext 类。我决定将我的属性设置为受保护的内部并将我的 DBContext 类移动到我的域类库（其中定义了所有实体），我真的不太喜欢它，但我更喜欢让我的属性被所有人访问. 我的财产看起来像这样：

```
protected internal virtual ICollection<Role> Roles { get; set; } 
```

我的 DBContext 类是这样的，就像我第一次拥有它一样，只是它现在定义在与所有实体相同的类库中：

```
public class mrMantisDB : DbContext
{
    public DbSet<Domain.Action> Actions { get; set; }
    public DbSet<Role> Roles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<Domain.Action>()
            .HasMany(action => action.Roles)
            .WithMany()
            .Map(map => map.ToTable("AuthorizedRoles"));
     }
} 
```

这很好用。因此，现在唯一需要检查的是代理的创建，即延迟加载和更改跟踪。作为受内部保护而不是公共保护的财产，我担心它可能不起作用，但是是的，它确实起作用了，而且一切顺利，真的。

现在，我的问题/请求来了。如果导航属性实际上不需要公开才能创建代理，则受保护就足够了（我将内部排除在外，因为我认为这只会影响使用该属性进行关系映射的能力），为什么要限制在表达式上提取 HasMany 方法的属性，或者更好，因为我知道属性必须是被映射类型的属性而不是随机集合，为什么没有 HasMany 的重载，它采用字符串 propertyName 和搜索财产本身，即使它不是公共财产。这将允许具有非公共导航属性，在我看来，这将一直允许一个整洁设计的对象域。

也许我在这里遗漏了一些东西。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:23:44.667

您的问题询问为什么对模型构建器的受保护财产进行限制，我不确定为什么会这样。但是，如果您想要解决方法，我已经成功地实施了[这个博客中的解决方案。](http://blog.cincura.net/232731-mapping-private-protected-properties-in-entity-framework-4-x-code-first/)

您将使用表达式更新您的实体，以便模型构建器可以找到它：

```
 protected virtual ICollection<Role> Roles { get; set; }

        public class PropertyAccessExpressions
        {
            public static readonly Expression<Func<User, ICollection<Role>>> ID = x => x.Roles;
        } 
```

然后您的构建器应该能够找到这个：

```
 modelBuilder.Entity<Domain.Action>()
            .HasMany(action => action.Roles) 
```

# python - Python 像浅网格一样编写和读取 csv 文档？

> ID：11799333
> 
> 赞同：1
> 
> 时间：2012-08-03T16:05:31.067
> 
> 标签：python

我觉得奇怪的是，没有内置函数可以仅获取 excel 生成的 csv 文件的全部内容并将它们放在嵌套列表中，以便生成 2D 矩阵。

有什么理由不切实际/不标准吗？

我正在将我自己的 CSV 代码放在一起来做这件事，但我已经遇到了想要做一些简单的事情的烦人的障碍，比如写列而不是行等等。

有什么理由我应该考虑完全不同的方法吗？

理由是在 PyQt 中使用网格非常简单，而且似乎同一种设计可以无缝转换为读取和编写简单的电子表格，即：

```
name , myname
age , myage
xvals, yvals
1,1
2,4
3,9 
```

变成

```
[[name,myname],[age,myage],[xvals,yvals],[1,1],[2,4],[3,9]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:07:48.680

看看 Numpy 及其 loadtxt 函数。它完全符合您的要求：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)

对于写作，您可以使用 savetxt 功能：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)

还有直接从 Excel 文件读取的功能：

[http://pypi.python.org/pypi/xlrd/](http://pypi.python.org/pypi/xlrd/)

[http://packages.python.org/openpyxl/](http://packages.python.org/openpyxl/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:11:49.647

有一个用于 python 的 csv 文件的内置函数。下面的代码行完全符合您的要求。

```
import csv
with open('some.csv', 'rb') as f:
    reader = csv.reader(f)
    for row in reader:
        print row 
```

或者更好地感谢 JF Sebastian

```
import csv
with open('some.csv', 'rb') as f:
    a2d=list(csv.reader(f)) 
```

示例 csv 文件：

```
1,2,3
4,5,6
7,8,9 
```

输出：

```
[['1', '2', '3'], ['4', '5', '6'], ['7', '8', '9']] 
```

[来源](http://docs.python.org/library/csv.html)

# wcf - 将“HelloWorld”WCF Web 服务转换为使用 https？

> ID：11799335
> 
> 赞同：0
> 
> 时间：2012-08-03T16:05:33.853
> 
> 标签：wcf, web-services, https

如果你是一个初学者，真的很难掌握 Web 服务，不是因为这个概念很难——它不是——而是因为这项技术经历了很多曲折，谷歌搜索帮助*也*无济于事你得到的答案是稍微不同的实现。

[例如，我们的解决方案从未有过 .svc 文件或 .asmx 文件，尽管这些文件经常出现在答案中，而我们的 web.config 没有任何`behavior`或`binding`元素，就像其他人似乎有的那样]

我们使用教程来设置我认为在 IIS6 上运行的“WCF Web 服务”。它工作正常。

但我们想将其转换为使用加密/https。

所以我们检查了IIS 中的**要求安全通道框：**
![在此处输入图像描述](../Images/493776ad5023b69d63789a474462880d.png)

不知道还有什么配置在那里，但是......无论如何，继续前进。接下来我想我们必须修改我们的 web.config 文件......但是什么以及如何？这是我们`system.serviceModel`在 web.config 中的内容：

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"></serviceHostingEnvironment>
    <standardEndpoints>
        <webHttpEndpoint>
            <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"></standardEndpoint>
        </webHttpEndpoint>
    </standardEndpoints>
</system.serviceModel> 
```

那么接下来我们需要做什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:17:56.557

好的，不幸的是，如果没有所有代码，很难进行规范，但这里是概述：

您需要将这些绑定和行为添加到 web.config 中。

我将从一个 basicHttpBinding 开始，让它像现在一样工作，但是这次你将指定你的绑定细节而不是使用默认值。要“关闭”https，请将 bindingConfiguration 中的安全模式更改为 None。

完成后，您的 WCF 服务将拥有类似的内容：

```
<services>
    <service behaviorConfiguration="webServiceClientBehavior" name="My.Service.ServiceName">
            <endpoint address="http://localhost:5803/LSClient"  binding="basicHttpBinding" bindingConfiguration="secureBinding" contract="My.Service.IServiceName"/>
    </service>
</services> 
```

对于绑定配置：

```
<bindings>
      <basicHttpBinding>
        <binding name="secureBinding">
          <security mode="Transport" />
        </binding>
      </basicHttpBinding>
</bindings> 
```

对于行为配置：

```
<serviceBehaviors>
       <behavior name="webServiceClientBehavior">
          <!--For MetaData-->
          <serviceMetadata httpGetEnabled="true" httpGetUrl="http://localhost:5802/LSClientMD"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
</serviceBehaviors> 
```

这些将需要根据您的实施稍作调整，但这是一个基本概述。

# email - 如何将邮件帐户从一台服务器迁移到另一台服务器而不丢失它们？

> ID：11799337
> 
> 赞同：0
> 
> 时间：2012-08-03T16:05:42.803
> 
> 标签：email, web, hosting

我正在将我的商务网站从共享的 Bluehost 服务器移动到 MyHosting VPS。这里唯一的问题是我们有一些邮件帐户用于接收客户的订单，因此我们无法更改电子邮件方向，否则我们会失去一些客户。有什么方法可以在不丢失帐户的情况下更改帐户的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:39:30.203

您可以使用 Outlook 或 Thunderbird 等在本地系统上备份您的电子邮件。

然后您可以在您的 VPS 上创建相同的域和邮件帐户。

# php - 使用 PHP 执行 `git pull` 命令 - 使用 github 部署

> ID：11799340
> 
> 赞同：2
> 
> 时间：2012-08-03T16:05:54.627
> 
> 标签：php, deployment, ssh, github

我已经能够将本地存储库连接到私有 Github 存储库（使用 Github for Windows GUI），然后它应该会自动部署到开发服务器。在我尝试以下操作之前，一切都运行顺利：

```
<?php `git pull -f`; 
```

来源： http: [//net.tutsplus.com/tutorials/other/the-perfect-workflow-with-git-github-and-ssh](http://net.tutsplus.com/tutorials/other/the-perfect-workflow-with-git-github-and-ssh)

一旦我提交然后通过 Github for Windows 同步/推送，该脚本应该调用 Linux 命令“git pull -f”。我使用了没有密码短语的 SSH 密钥，以使其更容易，但无济于事。但是，如果我要通过命令行执行命令，一切都会完美运行。

整个根目录（包括 /.git 文件夹）的文件和文件夹权限设置为 777，这就是我认为在查看我正在开发的网站时无法看到更新的原因。

如果有人对此有类似的经历，我将不胜感激。

注意：我已经在 SO 和网络上的其他地方进行了高低搜索，以寻找解决此问题的潜在方法，但任何资源都会张开双臂。

谢谢，

# javascript - 深度克隆 Backbone.js 模型

> ID：11799342
> 
> 赞同：8
> 
> 时间：2012-08-03T16:06:09.910
> 
> 标签：javascript, jquery, jquery-mobile, backbone.js

我在 jquery 中使用主干.js 并遇到我需要复制模型的情况，但我需要对它们进行深层复制，因此副本之间不存在引用。模型可以有其他模型作为属性。模型可以具有匿名函数作为属性。

所以我正在努力创建一种可以深度克隆大多数骨干模型的算法。我期望在此副本期间应该删除所有绑定（对于新实例），所以我不担心试图保留它们。

目标：

*   能够复制所有简单变量（String、Int、float 等）并将其以相同的名称存储到新模型中。
    *   完成，使用 toJSON 创建一个可以传递给 set() 的新 JSON 对象。该对象仅包含简单属性，即不包括分配给功能或其他模型的属性。
*   能够复制将分配一些变量的匿名函数，而无需事先知道函数/属性名称。
    *   如果我知道分配给函数的属性的名称，我可以复制它。但如果模型是新的或未知的，我就没有这些信息。
*   如果一个属性是另一个主干模型，则在该属性上递归调用深拷贝算法。
    *   无法检查属性是否是具有本机主干方法的主干模型，正在寻找解决方法。

我目前拥有的简化版本如下：

```
/**
 * 执行一个backbone.js 模型的深拷贝
 * 副本的所有绑定都丢失了
 * @param orgModel - 要复制的原始模型
 */
函数 deepCopyModel(orgModel)
{   
    var dupModel = Backbone.Model.extend({});

    var orgAttributes= orgModel.toJSON();

    var keepAttr=_.keys(orgAttributes);
    //删除任何特殊情况
    keepAttr=_.without(keepAttr, 'specialCase1', 'specialCase2');
    //或keepAttr=_.difference(keepAttr, ['specialCase1', 'specialCase2'] );

    //删除未定义的值
    keepAttr=_.filter(keepAttr,function(key) {
        返回 ( typeof(attributes[key])!="undefined" );
    });
    //获取过滤后的属性列表
    变种结果=_.pick（属性，keepAttr）；
    //使用set为副本分配属性
    dupModel.set(结果);

    //TODO: 实现函数的深拷贝

    //TODO: 实现内部模型的深拷贝

        返回复制模型；
}

```

您可以提供的任何帮助或见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T16:37:36.693

jQuery 的`extend`方法允许您简单地将对象属性从一个对象复制到另一个对象。

这是一个人为但说明性的示例。它甚至显示了为什么您不需要“深度”复制功能！

```
var someObj = {
    a : "a",
    b : 12345,
    c : {
        d : "d",
        e : "e"
    },
    f : function() {
        alert(this.a);
    }
};

//copy from original to new empty object
var deepCopy = $.extend(true, {}, someObj);

deepCopy.a = "deepCopy.a";
deepCopy.c.d = "deepCopy.c.d";

alert("someObj is not affected when deep copying: " + someObj.c.d);
alert("deepCopy is entirely distinct when deep copying: " + deepCopy.c.d);

deepCopy.f();    
someObj.f(); 
```

为了您的方便，这里有一个小提琴：http: [//jsfiddle.net/S6p3F/3/](http://jsfiddle.net/S6p3F/3/)

`someObj`运行此代码，您将看到`deepCopy`结构相同但对象不同。

如您所见，不需要对函数进行深度复制，因为`this`引用绑定到函数应用到的任何对象。这是因为在 javascript 中，调用函数 as`deepCopy.f()`在功能上等同于`deepCopy.f.call(deepCopy)`. 一个更具说明性的例子：

```
function someFunction() {
    alert(this.someProperty);
}

var a = {
        someProperty: "a's property"
    },
    b = {
        someProperty: "b's property"
    };

someFunction.call(a);
someFunction.call(b); 
```

还有一个小提琴：http: [//jsfiddle.net/S6p3F/2/](http://jsfiddle.net/S6p3F/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-20T08:07:52.757

如果你使用[Lo-Dash](http://lodash.com/)作为 Underscore 的替代品，你也可以使用[_.cloneDeep](http://lodash.com/docs#cloneDeep)

```
var newModel = new MyModel(_.cloneDeep(oldModel.toJSON()); 
```

# oracle - 如何在 Oracle 中查看 SQL 执行计划？

> ID：11799344
> 
> 赞同：21
> 
> 时间：2012-08-03T16:06:13.987
> 
> 标签：oracle, sqlplus, sql-execution-plan

我现在正在学习数据库索引，并试图了解使用它们的效率。

*   我想看看特定查询是否使用索引。
*   我想真正看到使用索引和不使用索引执行查询之间的区别（所以我想查看我的查询的执行计划）。

我正在使用**sql+**。

如何查看执行计划以及在哪里可以找到告诉我索引是否被使用的信息？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-03T17:36:17.507

试试用这段代码先解释一下再看方案：

解释计划：

```
explain plan 
for 
select * from table_name where ...; 
```

看计划：

```
select * from table(dbms_xplan.display); 
```

编辑：删除括号

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-09-04T07:24:45.867

## 预估的 SQL 执行计划

估计的执行计划由优化器生成，不执行 SQL 查询。**您可以使用EXPLAIN PLAN FOR**从任何 SQL 客户端生成估计的执行计划，也可以使用**Oracle SQL Developer**来完成此任务。

### 解释计划

使用 Oracle 时，如果您将`EXPLAIN PLAN FOR`命令添加到给定的 SQL 查询中，数据库会将估计的执行计划存储在相关的`PLAN_TABLE`：

```
EXPLAIN PLAN FOR
SELECT p.id
FROM post p
WHERE EXISTS (
  SELECT 1
  FROM post_comment pc
  WHERE
    pc.post_id = p.id AND
    pc.review = 'Bingo'
)
ORDER BY p.title
OFFSET 20 ROWS
FETCH NEXT 10 ROWS ONLY 
```

要查看预估的执行计划，需要使用`DBMS_XPLAN.DISPLAY`，如下例所示：

```
SELECT *
FROM TABLE(DBMS_XPLAN.DISPLAY (FORMAT=>'ALL +OUTLINE')) 
```

> ALL +OUTLINE 格式化选项允许您获得有关估计执行计划的更多详细信息，而不是使用默认格式化选项。

### 甲骨文 SQL 开发人员

如果您已经安装了 SQL Developer，您可以轻松获得任何 SQL 查询的估计执行计划，而无需预先添加 EXPLAIN PLAN FOR 命令：

[![在此处输入图像描述](../Images/37ed2c2443e46cbb352780ce2aed3028.png)](https://i.stack.imgur.com/7vMy3.png)

##实际的SQL执行计划

实际的 SQL 执行计划是由优化器在运行 SQL 查询时生成的。因此，与估计的执行计划不同，您需要执行 SQL 查询才能获得其实际执行计划。

只要底层关系数据库正确收集了表统计信息，实际计划不应与估计的有显着差异。

### GATHER_PLAN_STATISTICS 查询提示

要指示 Oracle 存储给定 SQL 查询的实际执行计划，可以使用`GATHER_PLAN_STATISTICS`查询提示：

```
SELECT /*+ GATHER_PLAN_STATISTICS */
  p.id
FROM post p
WHERE EXISTS (
  SELECT 1
  FROM post_comment pc
  WHERE
    pc.post_id = p.id AND
    pc.review = 'Bingo'
)
ORDER BY p.title
OFFSET 20 ROWS
FETCH NEXT 10 ROWS ONLY 
```

要可视化实际的执行计划，您可以使用`DBMS_XPLAN.DISPLAY_CURSOR`：

```
SELECT *
FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR(FORMAT=>'ALLSTATS LAST ALL +OUTLINE')) 
```

### 为所有查询启用 STATISTICS

如果要获取给定会话中生成的所有查询的执行计划，可以将会话`STATISTICS_LEVEL`配置设置为 ALL：

```
ALTER SESSION SET STATISTICS_LEVEL='ALL' 
```

`GATHER_PLAN_STATISTICS`这与在每个执行查询上设置查询提示的效果相同。因此，就像使用`GATHER_PLAN_STATISTICS`查询提示一样，您可以使用它`DBMS_XPLAN.DISPLAY_CURSOR`来查看实际的执行计划。

> 收集完您感兴趣的执行计划后，您应该将`STATISTICS_LEVEL`设置重置为默认模式。这非常重要，尤其是在您使用连接池并且数据库连接被重用的情况下。
> 
> ```
> ALTER SESSION SET STATISTICS_LEVEL='TYPICAL' 
> ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T16:17:22.017

看看[解释计划](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9010.htm#SQLRF01601)。EXPLAIN 适用于许多数据库类型。

对于 sqlPlus，请参阅 sqlplus 的[AUTO TRACE](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_eight.htm#sthref881)工具。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T16:15:34.007

尝试这个：

[http://www.dba-oracle.com/t_explain_plan.htm](http://www.dba-oracle.com/t_explain_plan.htm)

执行计划将在使用时提及索引。只需阅读执行计划。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-04T19:03:52.897

```
SQL> explain plan for 2 
     select * from hr.employees; 
```

解释。

```
SQL> select * from table(dbms_xplan.display);

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
Plan hash value: 1445457117

-------------------------------------------------------------------------------
| Id | Operation | Name | Rows | Bytes | Cost (%CPU)| Time |
-------------------------------------------------------------------------------
| 0 | SELECT STATEMENT | | 107 | 7704 | 3 (0)| 00:00:01 |
| 1 | TABLE ACCESS FULL| EMPLOYEES | 107 | 7704 | 3 (0)| 00:00:01 |
-------------------------------------------------------------------------------

8 rows selected. 
```

或者

```
SQL> set autotrace traceonly explain
SQL> select * from hr.employees;

Execution Plan
----------------------------------------------------------
Plan hash value: 1445457117

-------------------------------------------------------------------------------
| Id | Operation | Name | Rows | Bytes | Cost (%CPU)| Time |
-------------------------------------------------------------------------------
| 0 | SELECT STATEMENT | | 107 | 7704 | 3 (0)| 00:00:01 |
| 1 | TABLE ACCESS FULL| EMPLOYEES | 107 | 7704 | 3 (0)| 00:00:01 | 
```

[https://wordpress.com/post/cevikfaruk.wordpress.com/277](https://wordpress.com/post/cevikfaruk.wordpress.com/277)

# python - Flask/SQLAlchemy - 如何全局使用 latin-1 而不是 UTF-8？

> ID：11799347
> 
> 赞同：3
> 
> 时间：2012-08-03T16:06:18.700
> 
> 标签：python, mysql, unicode, sqlalchemy, flask

我有一个使用 Flask、SQLAlchemy 和 MySQL 编写的 Web 应用程序。当我通过表单（例如`request.form['Username']`）提交字符串时，它们通过 SQLAlchemy 提交，并最终作为 Unicode 字符串提交给 MySQL。我的数据库使用的是 latin-1 字符集，所以我真的很想在整个过程中使用 latin-1。有没有办法强制 Flask 或 SQLAlchemy 始终使用/转换为 latin-1 而无需手动执行`string.encode('latin-1')`？

作为这如何导致问题的示例，当我执行 a`SELECT...WHERE Name=:name`并提供`request.form['Name']`作为绑定参数时，它会通过 as`u'Some Name'`并因此找不到任何匹配项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T16:20:03.920

您可以在连接参数中设置 SQLAlchemy 连接到 MySQL 的编码：

```
create_engine('mysql+mysqldb:///mydb?charset=latin1') 
```

请参阅[MySQL 上的 SQLAlchemy 文档，unicode 部分](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html#unicode)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:21:54.277

首先，阅读 Flask 网站上的 unicode 章节：http: [//flask.pocoo.org/docs/unicode/](http://flask.pocoo.org/docs/unicode/)。它说“如果你在 Python 文件中使用非 Unicode 字符，你必须告诉 Python 你的文件使用哪种编码。”

为此，您可以在 python 文件的开头添加以下内容。这告诉解释器使用什么编码。

```
# coding: latin1 
```

# ruby-on-rails - Mountain Lion 上的 LibXML 的 Nokogiri 问题

> ID：11799349
> 
> 赞同：4
> 
> 时间：2012-08-03T16:06:22.240
> 
> 标签：ruby-on-rails, ruby, nokogiri, osx-mountain-lion

我最近对 ​​Mountain Lion 进行了全新安装，在安装 Nokogiri 之后 - 启动 Rails 控制台时出现错误： `WARNING: Nokogiri was built against LibXML version 2.8.0, but has dynamically loaded 2.7.8`

所以我在这里查看了其他问题，并卸载了所有内容并再次尝试，但我注意到 Nokogiri 网站上的安装说明已过时：http: [//nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html)

因为“brew install libxml2 libxslt”实际上安装了 libxml2 2.8.0，并进一步阅读它引用 2.7.8 的说明：

```
gem install nokogiri -- --with-xml2-include=/usr/local/Cellar/libxml2/2.7.8/include/libxml2 
                    --with-xml2-lib=/usr/local/Cellar/libxml2/2.7.8/lib 
                    --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.26 
                    --with-iconv-include=/usr/local/Cellar/libiconv/1.13.1/include 
                    --with-iconv-lib=/usr/local/Cellar/libiconv/1.13.1/lib 
```

（注意 libxml2/2.7.8）

所以我再次卸载，并重新安装：（libxml2/2.8.0）

```
sudo gem install nokogiri -- --with-xml2-include=/usr/local/Cellar/libxml2/2.8.0/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.8.0/lib --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.26 --with-iconv-include=/usr/local/Cellar/libiconv/1.13.1/include --with-iconv-lib=/usr/local/Cellar/libiconv/1.13.1/lib 
```

虽然它似乎在 IRB 中运行良好，但在 Rails C 中却不行——它仍然说：

`WARNING: Nokogiri was built against LibXML version 2.8.0, but has dynamically loaded 2.7.8`

我试过运行捆绑更新，但它仍然是一样的。

请问有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:53:23.920

所以你第一次跑`gem install nokogiri -- --with-xml2-include=/usr/local/Cellar/libxml2/2.7.8/include/libxml2 --with-xml2-lib=/usr/local/Cellar/libxml2/2.7.8/lib ...`，它仍然说“Nokogiri 是针对 LibXML 版本 2.8.0 构建的”？看起来好像它没有注意开关。

无论如何，问题与您的计算机所说的完全一样：它在运行时使用的 libxml*.so 是旧版本。试试看`man ldconfig`，在标准目录中查找旧的 libxml 库。将新的放在它旁边并将符号链接指向它可能就足够了。

免责声明：我不是 osxer，买家要小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:48:46.897

除非您迫切需要使用更新版本的 libxml2，否则随 OS X Mountain Lion 分发的标准版本就可以了。我用过

```
brew uninstall libxml2
brew uninstall libxslt

gem uninstall nokogiri
gem install nokogiri 
```

达到很好的效果。[此处](https://stackoverflow.com/a/11661197/312802)推荐的 Ruby 1.9.3 的重新安装是不必要的。当然，只有在您之前安装过 libxslt 时才需要卸载它（就像我一样）。

如果您确实卸载了其中一个库，您可能希望通过以下方式进行检查

```
brew missing 
```

您是否意外删除了依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T18:49:29.560

检查您的 gemfile 并确保 nokogiri 是隐式定义的——不要依赖隐含的包含来为您提供 nokogiri gem 的正确版本。

如果您通过 brew 安装了 libxml2 和 libxslt，则卸载它们，通过 gem 卸载 nokogiri，然后通过 bundler install 重新安装。

# asp.net-mvc-3 - 是否可以预先保存 knockoutjs 视图模型以防止刷新和数据丢失？

> ID：11799350
> 
> 赞同：1
> 
> 时间：2012-08-03T16:06:22.903
> 
> 标签：asp.net-mvc-3, knockout.js, save

在我看来，我有一个带有 KnockoutJS 的 MVC3 项目。用户填写的表单已经从服务器加载了信息，并且用户正在填写并从该数据中进行选择，因此用户保存选择的数据。所以......有时，用户在表单的中间，意识到某些数据丢失了，它必须取消表单填写并编辑丢失的数据，然后回来重新做。所以，我的问题是......我可以以某种方式保留视图模型，以便用户可以在资源管理器的其他选项卡或窗口中编辑丢失的数据，然后刷新表单并且不丢失数据？

我希望解释清楚.. 我的英语有点生疏。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:04:07.113

是的你可以。如果数据在同一页面上，您可以将视图模型数据保存到另一个对象，可能使用 ko.toJSON。然后您可以稍后将其拉回。

如果您必须重新加载页面，您可以使用 amplify.js 之类的库将视图模型或表单的状态保存在存储中。[http://amplifyjs.com/api/store/](http://amplifyjs.com/api/store/)

伪代码：

amplify.store('myData', myViewModel);

# android - 使用 Android 时，HTTP 响应总是导致 I/O 异常

> ID：11799354
> 
> 赞同：0
> 
> 时间：2012-08-03T16:06:37.420
> 
> 标签：android

> 下面的代码总是给出 I/O 异常，而我在浏览器中检查了它的工作情况，并且我在 Android Manifest 文件中给出了 Internet 权限。我从点击按钮上这样调用

```
 CheckMetaData cmd = new CheckMetaData();
        cmd.execute(url);
  ---------class def ---  
private class CheckMetaData extends AsyncTask<String,Integer,InputStream> {    
     protected InputStream doInBackground(String... params) {

                    String url=params[0];

                    DefaultHttpClient client = new DefaultHttpClient();

                            HttpGet getRequest = new HttpGet(url);

                            try {

                               HttpResponse getResponse = client.execute(getRequest);
                               final int statusCode = getResponse.getStatusLine().getStatusCode();

                               if (statusCode != HttpStatus.SC_OK) {
                                  Log.w(getClass().getSimpleName(),
                                      "Error " + statusCode + " for URL " + url);
                                  return null;
                               }

                               HttpEntity getResponseEntity = getResponse.getEntity();
                                   return getResponseEntity.getContent();

                            }
                            catch (IOException e) {
                               getRequest.abort();
                               Log.w(getClass().getSimpleName(), "Error for URL " + url, e);

                            }        
                            return null; 
            } 
```

# java - 在 Eclipse 中生成但不在 jar 文件中的输出文件

> ID：11799357
> 
> 赞同：0
> 
> 时间：2012-08-03T16:06:50.087
> 
> 标签：java, eclipse

我有一个简单的解析程序，它需要几个文件并将它们组合起来。然后它会生成一些输出文件到工作目录。当我在 Eclipse 中运行这个程序时，它会生成所有需要的输出文件。但是，当我使用 eclipse 中生成的 jar 运行它时，它只会创建三个输出文件中的两个。这让我觉得 jar 文件的生成方式有问题，但似乎找不到任何答案。

我试过更新一些java，我相信它是用java 5编写的。我只是将 Vectors 更改为 ArrayLists，将 FileOutputStream 更改为 FileWriter。

我必须下载 javax.mail 以获取所需的库并将这些 jar 文件添加到我在 Eclipse 中使用的 java6 库中。我试过删除类并生成新类。我试图检查 jar 文件的权限以确保我可以访问它。我想我只是不确定从哪里开始。

我还尝试将其打包为 jar 文件而不是可运行的 jar 文件，因为它为我提供了更多关于包含哪些内容的选项。但是，即使它是可执行文件，我也无法运行这种类型的 jar 文件。我已经多次重新创建 jar 文件，但没有任何运气。

UTF-8 在 jar 文件中无法正确显示，但在 eclipse 中却很好，存在很多问题。然而，他们的 jar 文件正在生成文本文件，而我的只是没有生成文本文件。

更新：有趣的是，如果我将代码块移动到它自己的类并将其作为单独的 jar 运行，它将起作用。所以现在的解决方案是拥有两个 jar 文件。

这是未生成文件的代码：

```
private static void parseCRNOnly() { 
try { 
    //file to write to 
    File new_file = new File("CRNOnlyClean.txt"); 
    FileWriter out = new FileWriter(new_file); 

    //file to read from 
    File file = new File("CRNOnly.txt"); 
    FileReader reader = new FileReader(file); 
    BufferedReader buf = new BufferedReader(reader); 

    try{ 
        String str; 
        String temp = "\r"; 
        String nl = "\r\n"; 
        String tab = "\t"; 

        str = buf.readLine(); 

        while (str != null && !str.isEmpty()) { 
            StringTokenizer tokenizer = new StringTokenizer(str," \t"); 
            int column = 0; 
            while(tokenizer.hasMoreTokens()) { 
                column++; 
                temp = tokenizer.nextToken(); 
                if(column == 8){ 
                    break; 
                } 
            out.write(temp); 
            out.write(tab); 
         } 
         out.write(nl); 

         str = buf.readLine(); 
         } 

         out.close(); 
      } catch(IOException e0){ 
            System.out.println("Error Reading From CRNOnly.txt"); 
            JOptionPane.showMessageDialog(null, "Error Reading From CRNOnly.txt"); 
        } 
      } catch(FileNotFoundException e1){ 
            System.out.println("File CRNOnly.txt Not Found"); 
            JOptionPane.showMessageDialog(null, "File CRNOnly.txt Not Found"); 
      } catch (IOException e) { 
            System.out.println("Error Reading from FileWriter"); 
            JOptionPane.showMessageDialog(null, "Error Reading from FileWriter"); 
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:12:52.420

出于某种原因，jar 文件不包括我必须从 javax.mail 添加的一些旧库，所以我尝试使用 netbeans 制作一个 jar 文件，它可以工作。Netbeans 也没有将 javax.mail 库打包到 jar 文件中，而是将它们与 jar 文件一起包含在一个文件中。因此，要使用 jar 文件，该文件也必须在目录中。

# javascript - 如何在 webkit 1.2.5 中强制使用 javascript 进行重排

> ID：11799359
> 
> 赞同：4
> 
> 时间：2012-08-03T16:06:51.053
> 
> 标签：javascript, dom, webkit, reflow

我已经尝试了所有应该调用回流的方法，但没有发生。我调用我的测试函数 10 次以在我的屏幕上绘制一些元素，并且我在每次迭代中移动该元素。该循环立即执行，最后我得到一张图片，而不是在屏幕上看到元素的移动。

就好像当所有的工作都完成后，屏幕上的回流和绘图被调用了。但我想看每一幅画。

我尝试过的所有事情都没有产生任何结果。唯一有效的是alert()，但我不需要与用户交互。

如果有帮助，我正在使用 webkit 1.2.5。

如果我不够理解，我会尝试更好地解释。

这是我强制重排的代码

```
 var i = 0;
 for(;i<500;i+=50){
fTestInfo(i);
console.log("Test loop!!! "+i);
 } 
```

我需要的是每次执行 fTestInfo(i) 时在我的屏幕上看到一张图片，但相反，我只看到最终结果。

fTestInfo 取决于 i 它向左移动 i 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:28:25.100

我看到您正在使用 for 循环，这通常意味着您误解了计时器的工作原理。for 循环是同步执行的，您可能会同时设置所有计时器。

尝试这个：

```
(function loop(i) {
    if (i >= 500) {
        return;
    }
    document.querySelector("div").style.left = i + "px";
    setTimeout(function() {
        loop(i + 1);
    }, 16);
})(0); 
```

​ 演示[http://jsfiddle.net/UCfmF/](http://jsfiddle.net/UCfmF/)

* * *

我想你的意思是得到一个像`.offsetWidth`? 这不能保证在屏幕上进行可见的重排，即使您正在执行触发重排的操作，浏览器也可能会等待一段时间（阅读：直到 javascript 执行停止）才能实际尝试在屏幕上绘制任何内容。

这意味着如果您将 1000 个元素附加到文档，它不会触发 1000 次重排。即使您`.offsetWidth`在每次迭代之间获取。它只会为您计算，但不一定要绘制。

您需要使用计时器移动元素，因为 javascript 执行结束是浏览器清除任何排队的回流时。

请参阅[http://dev.opera.com/articles/view/efficient-javascript/?page=3#reflow](http://dev.opera.com/articles/view/efficient-javascript/?page=3#reflow)

> 如前所述，浏览器可能会为您缓存多个更改，并在所有更改完成后仅重排一次。但是，请注意，对元素进行测量将迫使其回流，因此测量结果将是正确的。更改**可能会或可能不会明显重绘**，但回流本身仍然必须在幕后发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T08:59:05.953

您需要让浏览器有机会在每次迭代之间进入其事件循环。

用于`setTimeout`安排绘图的每次迭代：

```
function scheduledTestInfo(i) {
    setTimeout(function() {
        fTestInfo(i);
    }, i);  // calls each function 50ms apart
}

var i = 0;
for ( ; i < 500 ; i += 50) {
    scheduledTestInfo(i);
} 
```

# javascript - 如何从 CSSStyleDeclaration 对象中获取真正的 CSS 属性名称？

> ID：11799364
> 
> 赞同：3
> 
> 时间：2012-08-03T16:07:05.017
> 
> 标签：javascript, css

问题是某些 css 属性具有不同的名称是 javascript，例如`textOverflow`在 js 中是`text-overflow`在 css 中。

js引擎中的某个地方是否有我可以访问的翻译表，或者我必须自己做一个翻译数组或对象，例如：

```
transObj = { textOverflow : 'text-overflow' }; 
```

例如，我正在遍历这个对象，我得到的只是 js 名称：

```
for (var n in csd) {
  if (!csd.hasOwnProperty(n)) continue;
  csd[n].getTrueCSSName() // is there something like this ?
} 
```

或者也许简单的正则表达式替换就可以了，但我不知道是否规定js名称中的所有大字母都转换`-[a-z]`为css名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:12:34.223

所有包含 a 的 css 样式`-`都被它们在 ECMAscript 中的*camelCase*表示所取代，因为我们不能`-`在所有场合都使用。您可以通过调用如下正则表达式来翻译名称：

```
var name = "font-width";

// convert names like "font-width" into css camelCase form like "fontWidth"
name = name.replace( /-(\w)/g, function _replace( $1, $2 ) {
    return $2.toUpperCase();
}); 
```

这也适用于喜欢`-webkit-box-shadow`或诸如此类的东西。

# ruby-on-rails - 为什么`rake assets:precompile` 会抛出“getaddrinfo: Name or service not known”？（回复：asset_sync）

> ID：11799366
> 
> 赞同：7
> 
> 时间：2012-08-03T16:07:18.240
> 
> 标签：ruby-on-rails, amazon-s3, asset-pipeline, cdn, fog

我正在尝试设置我的 rails 应用程序，以按照[这些说明使用](https://devcenter.heroku.com/articles/cdn-asset-host-rails31)[asset_sync](https://github.com/rumblelabs/asset_sync) gem将其资产上传到亚马逊的AWS S3 。我知道我的 S3 配置正确，因为我的应用程序能够将图像上传到 S3。我很确定我的所有设置都是正确的：

```
FOG_DIRECTORY => mybucketname
FOG_PROVIDER  => AWS
FOG_REGION    => s3-us-west-2 
```

但是我不断收到错误消息：

```
-bash> heroku run rake assets:precompile --remote staging
Running rake assets:precompile attached to terminal... up, run.1
AssetSync: using default configuration from built-in initializer
mkdir -p /app/public/assets
...
mkdir -p /app/public/assets
AssetSync: Syncing.
rake aborted!
getaddrinfo: Name or service not known                                # <-- error 
```

在本地编译会产生稍微不同的错误：

```
-bash> bundle exec rake assets:precompile
AssetSync: using default configuration from built-in initializer
mkdir -p /Users/bart/Dev/MyApp/myapp/public/assets
...
mkdir -p /Users/bart/Dev/MyApp/myapp/public/assets
AssetSync: Syncing.
rake aborted!
getaddrinfo: nodename nor servname provided, or not known             # <-- error 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T16:07:18.240

我将错误追溯到Fog中[的“连接”行](https://github.com/fog/fog/blob/33c1aec7e026a4c3bf97054d3335cd3c3eda4339/lib/fog/aws/storage.rb#L291)`asset_sync`，它是运行时依赖项之一，结果发现**my`FOG_REGION`设置不正确**。就我而言，该地区应该是`us-west-2`，而不是`s3-us-west-2`。

自从我配置我的 S3 帐户已经有一段时间了，所以我首先尝试通过登录 AWS S3 控制台、单击存储桶名称，然后单击“属性”来确定我正在使用的区域。在那里，该地区被列为*俄勒冈州*。好吧，那没有用。因此，我单击了现有存储桶之一的对象和文件夹浏览器，直到找到资产，查看其“属性”，并看到“链接”：

https:// *s3-us-west-2* .amazonaws.com/mybucketname/uploads/mymodel/image/1135/myimage.jpg

我确信这`s3-us-west-2`是正确的，直到我注意到[Fog 添加了 s3- 前缀](https://github.com/fog/fog/blob/33c1aec7e026a4c3bf97054d3335cd3c3eda4339/lib/fog/aws/storage.rb#L284)。

[无论如何，我现在知道，一旦您通过名称（例如俄勒冈州）找到您所在的地区，您可以在此 S3 地区列表中](http://docs.amazonwebservices.com/general/latest/gr/rande.html#s3_region)查找它（它是*Location Constraint*列下的名称）。

我希望这可以帮助别人。

# ibm-mq - WMQ Explorer 中的 WebSphere MQ 查看通道

> ID：11799377
> 
> 赞同：3
> 
> 时间：2012-08-03T16:07:51.230
> 
> 标签：ibm-mq

我们需要执行 SET AUTHREC PROFILE($cname) OBJTYPE(CHANNEL) GROUP('mq-user') AUTHADD(...) 以便通道显示 WMQ Explorer，对吗？当前访问被阻止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:32:52.210

是的。使用`AUTHREC`此问题和先前问题中定义的配置文件，您已授权用户连接到 QMgr，将请求放入命令队列并在模型队列上接收回复。命令服务器需要知道该组被授权对其他对象进行哪些操作。例如，在您授权之前，它不会显示或让组成员控制频道。

查看需要授权的对象的一种快速方法是 WMQ Explorer 中的基于角色的权限向导。右键单击 QMgr，选择对象权限，然后添加基于角色的权限，如下所示：

![WMQ 资源管理器菜单以调出基于角色的权限向导](../Images/ef4b7312f4918a7f9d726b2b7c8b89ce.png)

接下来，选择组并输入组名：

![允许显示 <code>mq-user</code> 组的所有对象的授权命令](../Images/bc3cbf7825cdbc73149c002950554aa3.png)

该向导`setmqaut`将您可以从命令行发出的命令输出为`mqm`. 这些有等效`AUTHREC`的命令。我建议不要手动转换它们，而是运行版本，然后使用命令`setmqaut`捕获规则。[`dmpmqcfg`](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fa22720_.htm)

使用上述设置在向导中创建的实际命令是：

```
setmqaut -m QM75_1 -t qmgr -g mq-user +connect +inq +dsp
setmqaut -m QM75_1 -n "**" -t q -g mq-user +dsp
setmqaut -m QM75_1 -n "**" -t topic -g mq-user +dsp
setmqaut -m QM75_1 -n "**" -t channel -g mq-user +dsp
setmqaut -m QM75_1 -n "**" -t process -g mq-user +dsp
setmqaut -m QM75_1 -n "**" -t namelist -g mq-user +dsp
setmqaut -m QM75_1 -n "**" -t authinfo -g mq-user +dsp
setmqaut -m QM75_1 -n "**" -t clntconn -g mq-user +dsp
setmqaut -m QM75_1 -n "**" -t listener -g mq-user +dsp
setmqaut -m QM75_1 -n "**" -t service -g mq-user +dsp
setmqaut -m QM75_1 -n "**" -t comminfo -g mq-user +dsp

setmqaut -m QM75_1 -n SYSTEM.MQEXPLORER.REPLY.MODEL -t q -g mq-user +dsp +inq +get
setmqaut -m QM75_1 -n SYSTEM.ADMIN.COMMAND.QUEUE -t q -g mq-user +dsp +inq +put 
```

# php - 在 foreach 循环中进行 PHP PDO 查询

> ID：11799384
> 
> 赞同：1
> 
> 时间：2012-08-03T16:08:29.470
> 
> 标签：php, foreach, pdo

我正在尝试从程序代码跳转到 PDO 类，并且在根据初始查询的结果查询数据库时遇到了问题。

在这种情况下，我有一个子菜单的菜单 (id = `$parent`)，我成功查询了它的详细信息并存储在一个数组中供我访问。然后我尝试形成一个 foreach 循环来循环遍历该初始数组并再次查询数据库以查找属于每个子菜单的页面。正是在这里，这个过程让我失望了。

需要注意的是，连接很好，并且查询在程序上也可以顺利运行。我只是在新格式上失败了（我认为）。

如果有人能指出我哪里出错了，我将不胜感激。`while`我一直在循环内运行查询，但我认为`foreach`这次是要走的路。

**编码**

```
function navigation($parent) {

$conn = ConnManager::get('DB');

    //initial query to get list of submenus belonging to $parent
try {       
    $qNAV= $conn->prepare('SELECT ID, Name FROM prm_menu WHERE Parent = :parent');
    $qNAV->execute(array('parent' => $parent));
    $qNAV->setFetchMode(PDO::FETCH_ASSOC);  
    $n=$qNAV->fetchAll();
} 
catch(PDOException $e) {
    echo $e->getMessage();
}

    //now I try to cycle through the array and run another query each time.
foreach($n as $menu) {
    $id = $menu['ID'];
    try{
        $qPAGE=$conn->prepare('SELECT ID, Title, URLName, MenuOrder FROM posts 
                    WHERE MenuID = $id AND Status = 1 ORDER BY MenuOrder ASC, ID ASC');
        $qPAGE->execute(); 
        $qPAGE->setFetchMode(PDO::FETCH_ASSOC);  
        while($m= $qPAGE->fetchAll()) {
            $menu_item = '<li id="navPage'.$m['ID'].'" class="menu-nav">';
            $menu_item.= '<a href="'.$m['URLName'].'">'.$m['Title'].'</a>';
            $menu_item.= '</li>';

            echo '<div class="menu-nav-wrap">';
            echo '<span class="menu-title">'.$menu['Name'].'</span>';
            echo '<ul class="menu-list">';
            echo $menu_item;
            echo '</ul>';
            echo '</div>';
        }

    }
    catch(PDOException $e) {
        echo $e -> getMessage();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:11:08.450

这不是你想要做的：

```
while($m= $qPAGE->fetchAll()) { 
```

由于`fetchAll()`将返回所有列，因此该`while`语句不会遍历它们。你要找的是这个：

```
$subrows = $qPAGE->fetchAll();
foreach( $subrows as $m) {
    .... 
```

此外，您应该查看 SQL JOIN 语句，因为您可以将这些嵌套查询合并为一个查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:29:54.007

Nickb 为您提供了针对您的具体问题的解决方案。我唯一可以补充的是，您应该在使用命名参数时保持一致。您在初始查询中使用了它们，并且也应该在嵌套查询中使用它们。

话虽如此，他关于进行联接而不是 N 查询的建议与我给出的建议相同。

看来您已经必须执行一组查询来解决需要您递归遍历所有子级的层次结构，甚至有更多理由将其重写为一个查询。

所需要的只是学习 mysql 的简单内部连接语法，其中包括 JOIN table t ON (a.id = t.id)。然后你会得到一个结果集来循环。例如，这似乎是您需要的：

```
SELECT pm.ID, Name, p.ID, Title, URLName, MenuOrder
FROM prm_menu pm 
JOIN posts p ON (p.MenuID = pm.ID AND pm.Parent = :parent' AND p.Status = 1)
ORDER BY p.MenuOrder ASC, p.ID ASC 
```

# java - 如何将带符号的十进制值转换为 32 位 little-endian 二进制字符串？

> ID：11799391
> 
> 赞同：0
> 
> 时间：2012-08-03T16:09:04.153
> 
> 标签：java, binary

我需要将带符号的十进制数转换为 32 位 little-endian 二进制值。有没有人知道可以做到这一点的内置 Java 类或函数？或者已经建造了一个来做到这一点？

数据是经度/纬度值，例如 -78.3829。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:20:25.353

如果它有帮助，这是我制作的一个类，它将长整数转换为二进制字符串，将二进制字符串转换为长整数：

```
public class toBinary {

    public static void main(String[] args) {
        System.out.println(decimalToBinary(16317));
        System.out.println(binaryToDecimal("11111111111111111111111111111111111100101001"));
    }

    public static long binaryToDecimal(String bin) {
        long result = 0;
        int len = bin.length();
        for(int i = 0; i < len; i++) {
            result += Integer.parseInt(bin.charAt(i) +  "") * Math.pow(2, len - i - 1);
        }
        return result;
    }

    public static String decimalToBinary(long num) {
        String result = "";
        while(true) {
            result += num % 2;
            if(num < 2)
                break;
            num = num / 2;
        }
        for(int i = result.length(); i < 32; i++)
            result += "0";
        result = reverse(result);
        result = toLittleEndian(result);
        return result;
    }

    public static String toLittleEndian(String str) {
        String result = "";
        result += str.substring(24);
        result += str.substring(16, 24);
        result += str.substring(8, 16);
        result += str.substring(0, 8);
        return result;
    }

    public static String reverse(String str) {
        String result = "";
        for(int i = str.length() - 1; i >= 0; i--)
            result += str.charAt(i);
        return result;
    }

} 
```

它不采用十进制值，但它可能会给您一些指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:03:45.297

一旦您知道字节序在二进制级别上的含义，转换就很简单了。问题更多的是你真的想用它做什么？

```
public static int flipEndianess(int i) {
    return (i >>> 24)          | // shift byte 3 to byte 0
           ((i >> 8) & 0xFF00) | // shift byte 2 to byte 1
           (i << 24)           | // shift byte 0 to byte 3
           ((i & 0xFF00) << 8);  // shift byte 1 to byte 2
} 
```

这个小方法将交换 int 中的字节以在小/大端顺序之间切换（转换是对称的）。现在你有一个小字节序 int。但是你会用 Java 做什么呢？

您更有可能需要将数据写入流或其他东西，那么它只是一个问题，您以什么顺序写出字节：

```
// write int to stream so bytes are little endian in the stream
// OutputStream out = ... 
out.write(i);
out.write(i >> 8);
out.write(i >> 16);
out.write(i >> 24); 
```

（对于大端，您只需从下到上排列线条......）

# c++ - 从字节流中提取字节

> ID：11799395
> 
> 赞同：1
> 
> 时间：2012-08-03T16:09:24.443
> 
> 标签：c++, bitmap, byte, ostream, ostringstream

我在 C++ CGI 脚本中通过 POST 收到一个二进制文件，我正在使用[Cgicc](http://www.gnu.org/software/cgicc/)库来获取它的内容，如下所示：

```
std::ofstream myfile;
myfile.open ("file.out", std::ios::in | std::ios::binary);
try
{
    cgicc::Cgicc cgi;
    cgicc::const_file_iterator file = cgi.getFile("bitmap");
    if(file != cgi.getFiles().end())
    {
        file->writeToStream(myfile);
    }
}

catch(std::exception &exception)
{
    std::cout << exception.what();
} 
```

结果是一个包含字节的二进制文件。

现在，因为每个字节应该代表一个 8 位位图文件的一个像素，所以我想构建整个位图文件。为了实现这一点，我想我可以使用[easyBMP](http://easybmp.sourceforge.net/)库，但由于我需要逐个像素地创建图像，我需要以某种方式迭代接收到的字节。有谁知道如何做到这一点？我可以以某种方式获得一个迭代器到 std::ostream / std::ostrstream / std::ostringstream 吗？

```
std::ostringstream stream;
file->writeToStream(stream);
//foreach byte in stream do { ... } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:14:43.393

如果您使用`std::ostringstream`，您可以`std::string`使用`std::ostringstream::str`函数[http://cplusplus.com/reference/iostream/ostringstream/str/](http://cplusplus.com/reference/iostream/ostringstream/str/)从中获取。此外，您可以打开文件并阅读它...

# c - 解决make / C代码中循环引用的正确方法？

> ID：11799399
> 
> 赞同：0
> 
> 时间：2012-08-03T16:09:33.860
> 
> 标签：c, makefile

我有两个 C 模块，每个模块都使用另一个的某些功能。在我的 makefile 中，我这样表达了这一点：

```
moduleA.h: common.h moduleB.h
moduleB.h: common.h moduleA.h 
```

由于明显的原因，这会生成一个循环引用警告，尽管它继续编译得很好。解决这个问题的正确方法是什么？我是否应该重构这些模块以创建第三个 - moduleC - 将两者联系在一起？

模块 A 是一个日志模块，模块 B 是一个 cronjob 实现。Logging 使用 cronjob 来安排日志轮换，而 cronjob 使用 logging 来告诉每个人它在做什么。

模块 C 会相当小；只需创建一个 cronjob 来调用日志记录轮换函数，但日志记录不需要了解 cronjob。当然，Cronjob 仍然依赖于日志记录。

还是我应该忽略警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:32:33.337

你可以像这样使用舒缓：

```
￼#ifndef MY_HEADER_FILE_H
#define MY_HEADER_FILE_H

/* Prototypes and others consts and .... */

#endif 
```

希望这有帮助。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:56:11.290

您应该创建一个`moduleA`只记录而不用担心`cron`作业的日志模块版本。然后创建一个新模块（可能`moduleC`），它只涉及使用`cron`作业来轮换日志。那么你的依赖是非循环的：

```
moduleC -> moduleB -> moduleA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T07:57:13.780

将头文件声明为目标头文件的先决条件是错误的，除非要根据先决条件**重新制作目标。**通常，目标文件目标取决于头文件，例如

```
moduleA.o moduleB.o: common.h moduleA.h moduleB.h 
```

# android - 是否有任何库可以将照片调整为正方形

> ID：11799400
> 
> 赞同：1
> 
> 时间：2012-08-03T16:09:38.540
> 
> 标签：android, photo, libraries

是否有任何库可以将照片调整为正方形（类似于 instagram）？因此，用户可以通过滑动和调整网格大小来选择正方形的可见/大小。

这里有人熟悉为此目的的图书馆吗？

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:06:07.490

找到了 ：）

[https://github.com/biokys/cropimage](https://github.com/biokys/cropimage)

**编辑**

有一个内置的作物意图：

```
Intent cropIntent = new Intent("com.android.camera.action.CROP"); 
```

# javascript - 在 CSS 中设置时无法使用 JavaScript DOM 检测边距

> ID：11799403
> 
> 赞同：1
> 
> 时间：2012-08-03T16:09:47.153
> 
> 标签：javascript, css, dom, margin

在 CSS 中设置时无法使用 JavaScript DOM 检测边距：

```
<div>
  <div id="elem">

  </div>
</div>

#elem{
   margin:0;   
}

console.log(document.getElementById('elem').style.marginLeft)     //""
console.log(document.getElementById('elem').style["margin-left"]) //undefined
console.log($('#elem').css('margin-left'))                        //0px 
```

怎么了？什么是确定检测边距而不通过 DOM 设置的防弹方法？为什么jQuery会检测？任何人都可以在技术细节中解释为什么无法检测到边距，以便我了解吗？

[http://jsfiddle.net/SBznP/1/](http://jsfiddle.net/SBznP/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:20:41.513

请记住，CSS 和 DOM 是不同的部分。CSS 中的更改不会更改 DOM 内容，反之亦然。

这意味着， （DOM）返回属性属性的`element.style.marginLeft`当前值。`style``marginLeft`

使用`document.defaultView.getComputedStyle(element, '').getPropertyValue('margin-left')`您可以获得计算值。

PS：最后一种方式 - 遗憾的是 - 与某些较旧的浏览器不兼容。您可能对跨浏览器版本感兴趣：[http ://cross-browser.com/x/lib/view.php?s=xGetComputedStyle](http://cross-browser.com/x/lib/view.php?s=xGetComputedStyle)

# ibm-mq - WebSphere MQ 推荐的 AUTHRECS

> ID：11799406
> 
> 赞同：2
> 
> 时间：2012-08-03T16:09:50.620
> 
> 标签：ibm-mq

对于以下内容，AUTHRECS 的推荐值是多少，当然这需要根据自己的要求进行调整。

1.  队列管理器
2.  队列（本地、远程、dlq）
3.  CHANNEL（服务器连接、发送方、接收方等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:48:10.323

我通常会告诉人们考虑三个不同的安全组：

1.  QMgr 到 QMgr 的连接归结为“我要授予`MCAUSER`RCVR/RQSTR/CLUSRCVR 频道的哪些身份验证？” 此类别中的角色取决于您希望网络安全的粒度。不过，一般来说，相邻的 QMgr 不应该有权访问本地 QMgr 的命令队列。通道的 MCAUSER 连接到 QMgr 并进行查询，然后放入并设置它实际需要的队列。而已。
2.  应用到 QMgr。这里的“应用程序”是指驻留在锁定数据中心的业务应用程序。这些应用程序一般需要在 QMgr 上连接和查询，然后在队列和主题上放置、获取、浏览、发布、订阅。有时他们需要更高级别的身份验证，例如为消息设置上下文信息的能力，但这很少见并且仅限于特定队列。
3.  互动用户。在该组中，有各种角色，例如管理员、匿名用户以及介于两者之间的所有角色。这些可能需要访问权限才能显示甚至管理队列和主题以外的对象。

其中每一个都有*非常*不同的身份验证和授权要求。它们还具有不同的特征，例如消息量和帐户的稳定性以及所需的授权。

不过，它们确实有一些共同点。

*   将 QMgr 上的集合授予有权访问命令队列的任何人使他们成为完全管理员。
*   授予创建队列（动态队列除外）的能力使用户成为完全管理员。
*   任何连接或打开对象的东西都需要查询 QMgr 和它被授权的对象。
*   业务应用程序需要对其队列和主题而不是其他类型的对象的读/写访问权限。
*   Instrumentation 通常需要访问许多对象类型，但*不需要*读取或更新业务队列上的消息。
*   *如果*您正在监控安全性，人类用户至少需要显示对所有对象的访问权限。这是因为枚举对象（例如绘制队列屏幕）的唯一方法是执行 PCF 等价于`DIS objType(*)`. 如果用户没有对所有对象的显示访问权限，`objType`则 QMgr 在发出显示时发出授权错误。

# cruisecontrol.net - 如果文件存在，巡航控制网络任务失败

> ID：11799408
> 
> 赞同：0
> 
> 时间：2012-08-03T16:09:59.383
> 
> 标签：cruisecontrol.net

我们正在使用巡航控制网络来自动化我们的构建。我们将使用自动构建创建的安装保存在共享文件夹中。

如果在共享文件夹中有安装可用，我们希望停止构建并在构建失败邮件中显示错误消息。这是为了防止意外删除以前构建中创建的安装文件

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T09:52:39.047

如果安装可用，您可以先测试一个必须存在的安装文件（如配置文件或可执行文件）

```
 <conditional>
  <conditions>
    <fileExistsCondition>
      <file>installationFile.nottodelete.config</file>
    </fileExistsCondition>
  </conditions>
  <tasks>
    <!-- Tasks to perform if condition passed -->
    <!-- send mail here -->
  </tasks>
  <elseTasks>
    <!-- Tasks to perform if condition failed -->
      <!-- continue so nothing to do -->
  </elseTasks>
</conditional> 
```

# java - 使用反射：如何测试方法

> ID：11799409
> 
> 赞同：0
> 
> 时间：2012-08-03T16:10:03.003
> 
> 标签：java, testing, reflection

我最近一直在看java中的反射，我想出了一个简单的例子

反射.java

```
 import java.lang.reflect.*;

  public class Reflection{
  }

  public static void main(String args[])
  {
     try {
       Class cls = Class.forName("Method");

        Method methlist[] 
          = cls.getDeclaredMethods();
        for (int i = 0; i < methlist.length;
           i++) {  
           Method m = methlist[i];
           System.out.println("name 
             = " + m.getName());
           System.out.println("decl class = " +
                          m.getDeclaringClass());
           Class pvec[] = m.getParameterTypes();
           for (int j = 0; j < pvec.length; j++)
              System.out.println("
               param #" + j + " " + pvec[j]);
           Class evec[] = m.getExceptionTypes();
           for (int j = 0; j < evec.length; j++)
              System.out.println("exc #" + j 
                + " " + evec[j]);
           System.out.println("return type = " +
                              m.getReturnType());
           System.out.println("-----");
        }
     }
     catch (Throwable e) {
        System.err.println(e);
     }
  }
 } 
```

方法.java

```
 public class Method {
  private int f1(
   Object p, int x) throws NullPointerException
  {
     if (p == null)
        throw new NullPointerException();
     return x;
  } 
```

从上面的示例中，我能够返回所有`Method.java`看起来像这样的信息

```
name = f1
decl class = class Method
param #0 class java.lang.Object
param #1 int
exc #0 class java.lang.NullPointerException
return type = int
-----
name = main
decl class = class method1
param #0 class [Ljava.lang.String;
return type = void
----- 
```

但我的问题是，有没有办法用类似`Method.java`的`Reflection.java`东西进行测试

```
int x = cls.getMethod("f1", Object = anObject, Integer.TYPE = 2 )
System.out.println(x); 
```

并且控制台应该打印出 2 因为 f1 被传递了一个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:16:01.470

查看[Javadoc 的`java.lang.reflect.Method`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html). 你想要方法`invoke()`；

```
Method m = ...
Object result = m.invoke(objectToCallMethodOn, firstArgument, secondArgument);
int x = ((Integer) result).intValue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:23:36.407

您需要创建一个实例`Method`并使用两个参数*调用*私有方法。`f1`它将返回一个对象。您的代码中有几个陷阱，但这是一个可行的解决方案（注意：我重命名了您的类`Method`以`MyMethod`避免名称冲突：

```
Method f1Method = MyMethod.class.getDeclaredMethod("f1", Object.class, int.class);
f1Method.setAccessible(true);
int result = (Integer) f1Method.invoke(new MyMethod(), 
                           new Object[]{new Object(), 2});
System.out.println(result); 
```

*   该方法是*私有*的，因此您需要获取*声明*的方法并使其可访问
*   该方法不是静态的，因此我们需要一个 MyMethod 实例来调用该方法
*   我们传递和接收一个 java 原始类型。`int.class`被允许。JavaDoc 告诉我们，*如果值具有原始类型，则首先将其适当地包装在 object*中。所以我们会收到一个`Integer`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:16:16.817

注意：`Method`我指的[`Method`类是 JDK](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html)中的类，而不是您的示例中的类

您已经能够`Method`从`Class`对象中找到 。您现在可以使用该[`Method#invoke`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)方法在某个对象上调用该方法

# javascript - Javascript 只识别内联样式而不是头部设置的样式

> ID：11799410
> 
> 赞同：1
> 
> 时间：2012-08-03T16:10:25.010
> 
> 标签：javascript, css

我有简单的 JS 函数来切换 DIV 的显示。DIV 显示默认设置为“无”。如果我使用内联样式来设置显示，它可以正常工作，但如果我在头部设置样式，它只有在我第二次运行该函数后才能工作。所以它只看到在函数中设置显示后显示设置为无。它不承认它是在头部的 CSS 中设置的。如果我使用内联样式，它工作正常。

另外，如果我将条件语句从：

```
if (OBJ.style.display == 'none') 
```

至

```
if (OBJ.style.display = 'none') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:21:34.563

使用`window.getCurrentStyle`or`element.currentStyle`以获得头部或身体的风格。它们被不同的浏览器支持，所以这里是一个跨浏览器的例子：

```
function getStyle( elem, style ) {
  var a = window.getComputedStyle,
      b = elem.currentStyle;

  if ( a ) return a( elem ).getPropertyValue( style );
  else if ( b ) return b[ style ];
}

getStyle( document.getElementById('OBJ'), 'display' ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:31:13.337

另一个建议是使用 css 类：

CSS：

```
.hide{
 display:none;   
} 
```

html:

```
<div id="mydiv" class="hide">hello world</div>
<button onclick="toggle();">toggle</button> 
```

js：

```
function toggle(){
    var obj = document.getElementById('mydiv');
    if(obj.className == 'hide')
        obj.className = '';
    else
        obj.className = 'hide'
} 
```

[http://jsfiddle.net/XBhMA/1/](http://jsfiddle.net/XBhMA/1/)

请注意，这仅在元素仅包含一个类时才有效。如果它包含更多，您将需要修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:23:38.643

元素的`style`属性只包含内联样式，不包含继承的样式或样式表中的样式。

您可以使用该`offsetHeight`属性检查元素是否具有任何大小，因为当元素不可见时它为零。

```
if (OBJ.offsetHeight == 0) ... 
```

# objective-c - 如何确定方法是否被子类调用

> ID：11799411
> 
> 赞同：0
> 
> 时间：2012-08-03T16:10:36.793
> 
> 标签：objective-c

在objective-c中，如果特定方法被其（调用）子（ren）覆盖，如何在超类中确定？

例如，在下面，子类 Z 没有覆盖方法 b，因此基类 X 会做一些额外的默认处理。然而，ZY 确实在子类 Y 中实现了 b，因此不需要默认处理。

```
// base class X
-(void)a
{
   // do something
}

-(void)b
{
   if("no_child_has_implemented_b") {
      // add some default behavior
   }
}

// child class Y : X
-(void)a 
{
   [super a];
}

-(void)b
{
   [super b];
}

// child class Z : X
-(void)a
{
   [super a];
}

// child class ZY : X
-(void)a
{
   [super a];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:21:06.537

在合理的正常 OO 设计中，您不应该让基类知道子类是否覆盖它。如果您发现自己这样做，那就是[代码异味](http://en.wikipedia.org/wiki/Code_smell)，通常意味着有更好的做事方式。

在大多数情况下，根据它是否被覆盖来更改超类的方法行为并不是一个好主意，因为这意味着超类在猜测子类的行为和意图。例如，如果有一天有人编写了一个子类，*想要*获得超类提供的默认设置，而您没有想到的原因是什么？

在子类中重写方法调用超级版本是很正常的，超级版本会进行与其类相关的基本设置，然后您的子类的重写方法在调用超级版本后会执行其他操作。如果这不能处理您的情况，您可以让您的子类的方法不调用该方法的超级版本——它只会执行自己的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T10:36:21.590

您可以将变量添加到超类（BOOL 类型，作为示例）在基类的 init 中定义它并在子类的 init 中重新定义。因此，您始终可以确定是否从子类调用了方法。

# asp.net-mvc-3 - 在基于 DDD 的架构（洋葱架构）中，我应该在哪里散列我的密码？

> ID：11799412
> 
> 赞同：0
> 
> 时间：2012-08-03T16:10:38.900
> 
> 标签：asp.net-mvc-3, passwords, domain-driven-design, onion-architecture

我试图找出在我的架构中散列我的身份验证密码的最佳位置。这是我的请求流程：

```
MVC3->MembershipProvider->AccountService->UserRepository->NHibernate->Database 
```

我在服务级别的哈希与存储库级别的哈希之间纠结。我看到了两者的优势，但有人知道处理这个问题的标准地方吗？我将哈希密码存储在数据库中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T08:15:15.380

DDD 不是顶级架构。您在有界上下文中应用它。一个系统中可以有许多有界上下文，其中一些是 DDD，一些不是。

无论您的核心域是什么，身份验证都不属于它。它充其量只是一个通用域，一个已经解决的问题。这应该只驻留在应用程序层中——这就是您的 GUI 保护对域的访问的方式。没有花哨的 DDD 构建块。没有存储库，没有服务。只需让您的会员提供商直接与 NHibernate 或什至原始 ADO.NET 交谈。或者，也许您不需要定制的。SqlMembershipProvider 不符合您的需求吗？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-03T19:45:27.950

如果我们严格地谈论 DDD（域驱动设计），那么密码哈希应该由用户（域实体或聚合根）处理。将用户输入（密码）从控制器传递到 AccountService，让 AccountService 加载/创建新用户，并在用户上调用一个对密码进行哈希处理的方法。如果您需要示例，请查看此 url：[MVC3 应用程序中的用户示例](https://github.com/ayende/RaccoonBlog/blob/master/RaccoonBlog.Web/Models/User.cs)

# iphone - Cocos2d v2.0：无法将CCParticleSystem添加到场景中

> ID：11799415
> 
> 赞同：0
> 
> 时间：2012-08-03T16:10:53.843
> 
> 标签：iphone, ios, cocos2d-iphone, ccparticlesystem

我正在尝试将 CCParticleFlower 添加到我的 Cocos2d v2.0（启用 ARC）HelloWorld 场景中。这就是我正在运行的代码：

```
CCParticleFlower* system = [[CCParticleFlower alloc] initWithTotalParticles:10];
        // Set some parameters that can't be set in Particle Designer
//        system.positionType = kCCPositionTypeFree;
  //      system.autoRemoveOnFinish = YES;
         system.visible = TRUE;
         [system setDuration:4.0f];
         system.position = CGPointMake(150.0f, 100.0f);
         [self addChild:system z:0]; 
```

我尝试了几种变体，但我不确定我做错了什么，因为我从未设法运行它。

例如：

```
CCParticleSystem * system = [CCParticleFlower node];
system.position = CGPointMake(150.0f, 100.0f);
[self addChild:system]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:09:52.253

1.  确保在项目中包含用于粒子系统的纹理。
2.  尝试重置系统，看看它是否有效。[系统重置]。您甚至可以尝试 [system scheduleUpdate] 以防它不正确更新。

# sql-server - xp_regread SQL Server 2012

> ID：11799416
> 
> 赞同：2
> 
> 时间：2012-08-03T16:11:04.330
> 
> 标签：sql-server, tsql, sql-server-2012

我正在尝试`xp_regread`在刚刚安装的新 SQL Server 2012 服务器上使用。

以前，我在 SQL Server 2008 服务器上使用如下查询来获取运行当前实例的帐户：

```
declare @regResult varchar(20)

exec master..xp_regread @rootKey = 'HKEY_LOCAL_MACHINE',
    @key = 'SYSTEM\CurrentControlSet\Services\MSSQLSERVER',
    @value_name = 'ObjectName',
    @value = @regResult OUTPUT

select @regResult 
```

但是，现在在 SQL Server 2012 上使用相同的查询时出现以下错误：

> 消息 22001，级别 15，状态 0，行 0
> 执行读取扩展存储过程时出错：参数无效

我假设`xp_regread`在 SQL Server 2012 中发生了变化。有人知道它是如何变化的吗？

我也对不使用扩展存储过程来获取运行实例的服务帐户的不同查询持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:25:56.723

怎么样

```
select * from sys.dm_server_services 
```

[http://msdn.microsoft.com/en-us/library/hh204542.aspx](http://msdn.microsoft.com/en-us/library/hh204542.aspx)

# crystal-reports - 如何将水晶报表作为固定字符导出到文本文件中

> ID：11799419
> 
> 赞同：0
> 
> 时间：2012-08-03T16:11:06.683
> 
> 标签：crystal-reports, export, text-files

我正在尝试将具有固定字符间距的公式导出到文本文件中。正在发生的事情是它的一长串字段比水晶中的报告页面可以显示的更长。运行报告时，它会将附加字段放在下面，并对所有记录重复。当我尝试将其导出到文本文件时，它以相同的方式推送它，而不是像我希望的那样，一条记录在文本文件上是一整行。如何才能做到这一点。水晶新手在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:49:27.337

由于您要导出为纯文本，我假设您不在乎实际报告的格式是什么（因为它只是导出过程中的中间参与者）。如果是这种情况，那么您可以水平扩展页面大小，直到它可以按照您想要的方式容纳所有字段。

默认情况下，您的页面大小可能是 8.5"x11"。进入您的页面设置（“文件”->“页面设置”）并使其大小适合您的字段。

![自定义页面大小 30 的页面设置屏幕](../Images/d1de0c762d9703bb17062ba78a2af39e.png)

编辑：如果您使用的是旧版本的 CR，您可能必须使用可以容纳大尺寸纸张的虚拟打印机。见[这里](https://stackoverflow.com/questions/429035/how-to-make-crystal-reports-page-width-larger-during-design-of-rpt)。

# c# - 绑定到 ObservableCollection 的列表框为空

> ID：11799425
> 
> 赞同：1
> 
> 时间：2012-08-03T16:11:27.290
> 
> 标签：c#, .net, wpf, data-binding, binding

我有以下 xaml：

```
<Window x:Class="Retail_Utilities.Dialogs.AdjustPriceDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    ShowInTaskbar="False"
    WindowStartupLocation="CenterOwner" Name="Adjust_Price"
    Title="Adjust Price" Background="#ee0e1c64" AllowsTransparency="True" WindowStyle="None" Height="330" Width="570" KeyDown="Window_KeyDown" Loaded="Window_Loaded">

<Grid Height="300" Width="550">
<ListBox HorizontalAlignment="Right" Margin="0,110,35,60" Name="lstReasons" Width="120" VerticalAlignment="Stretch"
             ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Window, AncestorLevel=1}, Path=reasons}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding Path=POS_Price_Change_Reason}" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid>
</Window> 
```

这是相关的c#：

```
namespace Retail_Utilities.Dialogs
{
public partial class AdjustPriceDialog : Window, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public ObservableCollection<Twr_POS_Price_Change_Reason> reasons; ... 
```

最后，这是打开此窗口的另一个页面的代码：

```
AdjustPriceDialog apd = new AdjustPriceDialog();
apd.Owner = (Window)this.Parent;
apd.reasons = new ObservableCollection<Twr_POS_Price_Change_Reason>();
var pcr = from pc in ctx.Twr_POS_Price_Change_Reasons where pc.Deactivated_On == null select pc;
foreach (Twr_POS_Price_Change_Reason pc in pcr)
{
    apd.reasons.Add(pc);
}
apd.AdjustingDetail = (Twr_POS_Invoice_Detail)lstDetails.SelectedItem;
if (apd.ShowDialog() == true)
{

} 
```

当对话框打开时，我的 lstReasons 列表是空的。我没有收到任何错误，当我在代码中停止时，我看到原因集合被表中的项目填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:17:43.917

原因需要是一个属性（添加`{ get; set;}`）。此外，查看 Visual Studio 输出 - 它显示绑定错误，应该有一些关于失败绑定原因的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:21:11.723

~~您的绑定路径似乎设置为`POS_Price_Change_Reason`，而您的属性名称为`reasons`. 除非您没有`POS_Price_Change_Reason`在示例代码中包含并且`reasons`是此属性的支持字段。~~

另外，请记住，您*只能*绑定到公共**属性**，而不是字段。此外，如果您更改属性的值，则需要通过调用`PropertyChangedEventHandler`该属性的事件来通知视图此更改：

```
PropertyChanged(new PropertyChangedEventArgs("YourPropertyName")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:22:05.463

问题似乎是您如何创建属性。我知道你把你​​的财产作为一个可观察的集合，但这并不意味着它是可以自我观察的！因此，当此属性发生更改时，您需要通过在 setter 中执行如下操作来通知 UI：

```
public ObservableCollection<Twr_POS_Price_Change_Reason> reasons
{
get{....}
set
{
Notify('reasons')
}
} 
```

我不记得确切的代码，因为我有一段时间没有使用 WPF，但它是 INotifyPropertyChanged 中的一个方法，祝你好运！

# ruby-on-rails - rails 3.2.4+中post方法的链接/按钮格式

> ID：11799426
> 
> 赞同：1
> 
> 时间：2012-08-03T16:11:32.647
> 
> 标签：ruby-on-rails

此代码在页面呈现期间引发错误，因为它没有找到此链接的路由：

```
<li class="link">
    <%=link_to "Save current options to a cluster", division_clusters_path(@current_dvision, courses: @cluster_courses ), :method => :post unless @cluster_courses.empty? %>
</li> 
```

它在较旧的 3.2 副本中工作，但在升级到 3.2.4 之后，它开始抛出错误，因为它在仅存在 POST 路由时寻找 GET 路由（它意味着转到标准创建方法）。

我将它从 link_to 切换到 button_to 并尝试从 HTML 选项中明确地散列 URL 选项以防止歧义，但我仍然搞砸了一些事情。

我假设如果 button_to 正在轰炸，我正在做一些非常错误的事情。我只是不确定是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:42:03.203

它回退到 GET 请求的事实表明它`:method => :post`没有进入 options 参数：

```
# File actionpack/lib/action_view/helpers/url_helper.rb, line 231
def link_to(*args, &block)
  if block_given?
    options      = args.first || {}
    html_options = args.second
    link_to(capture(&block), options, html_options)
  else
    name         = args[0]
    options      = args[1] || {}
    html_options = args[2]
    .....  
  end
end 
```

由于`unless`运算符的优先级大于方法调用，因此`division_clusters_path(@current_dvision, courses: @cluster_courses )`可能是罪魁祸首。如果返回的东西被 args[1] 吞噬，那么 args[2] 将获得其余的选项（用于 args[1]）。顺便说一句，那里似乎有一个错字：`@current_dvision`。

# macos - 为什么我的 sed {r FILE d} 函数不起作用？

> ID：11799432
> 
> 赞同：2
> 
> 时间：2012-08-03T16:11:58.073
> 
> 标签：macos, sed

我不能说我理解错误信息。

```
bash_prompt% sed -e '/__SUBSTITUTE_HERE__/ {r tmp.txt d}' < myFile.txt 
sed: 2: "/__SUBSTITUTE_HERE__/ { ...": unexpected EOF (pending }'s) 
```

我正在使用 OSX 10.7.4（达尔文内核版本 11.4.0）

目标是将一个文件中的令牌替换为 bash 脚本中其他文件的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:41:26.913

```
sed -e '/__SUBSTITUTE_HERE__/ {r tmp.txt' -e 'd;}' < myFile.txt 
```

见[http://www.linuxtopia.org/online_books/linux_tool_guides/the_sed_faq/sedfaq5_008.html](http://www.linuxtopia.org/online_books/linux_tool_guides/the_sed_faq/sedfaq5_008.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:20:37.460

`;`您应该在 sed 中使用或换行来分隔命令，而不是使用空格。不过，该`r`命令似乎只要求文件名后的换行符。

```
sed -e '/__SUBSTITUTE_HERE__/ {r tmp.txt
d}' < myFile.txt 
```

# plone - plone 附加组件collective.sendaspdf：下载页面需要登录

> ID：11799433
> 
> 赞同：1
> 
> 时间：2012-08-03T16:12:05.843
> 
> 标签：plone

我正在使用collective.sendaspdf 下载plone 页面的pdf，但它要求用户在下载公共内容时登录。

这看起来很奇怪，因为它只发生在生产服务器中，而不是在开发服务器中（唯一的区别似乎是后者是在前台模式下启动的）。

当然我不能将对象的特定权限分配给匿名用户，所以我猜问题出在其他地方

感谢 Jean 的建议，我启用了详细的安全性，错误是“未经授权：在这种情况下不允许您访问 '@@at_base_edit_view'”这对我来说看起来很奇怪，因为该页面是我的内容类型原型的视图-基于，并且它已发布，因此匿名用户可以看到。我还要重复一遍，我在开发服务器上安装了正确的授权，即任何人都可以在没有登录的情况下下载该页面……网络配置有什么变化（我有一个 apache，它执行一些 url 重写在我的 zope 服务器前面，但这只会影响要隐藏的 plone 站点的路径）我想知道我是否可以通过 sendaspdf 配置来纠正这个问题。我不 不知道我可以提供哪些有关环境/配置的附加信息。我正在运行 Plone 4.0.4 +collective.sendaspdf 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:43:17.137

好的，问题是由于collective.sendaspdf如何处理基于原型的内容类型中的一个错误，可以通过替换代码来解决它：

```
view_name = context_type.getProperty('immediate_view') 
```

和

```
view_name = context_type.getProperty('default_view') 
```

的方法`get_page_source`，`base.py`或者等待产品的下一个版本。

# c++ - 返回指针 c

> ID：11799434
> 
> 赞同：4
> 
> 时间：2012-08-03T16:12:07.307
> 
> 标签：c++, c, function, pointers, methods

> **可能重复：**
> [指向局部变量的指针](https://stackoverflow.com/questions/4570366/pointer-to-local-variable)
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

我有一个有趣的问题。我有一个返回指针的读取函数：

```
char * myReadFunc() {   
    char r [10];
    //some code that reads data into r.
    return r;
} 
```

现在，我调用此函数将信息分配给我拥有的一些变量：

```
char * s;
//Some code to specify where to read from.
s = myReadFunc(); 
```

这会产生我想要的结果。

但是，当我这样做时：

```
char * s1;
char * s2;
//Some code to specify where to read from.
s1 = myReadFunc();
//Some code to change the read location.
s2 = myReadFunc(); 
```

我得到了一些奇怪的结果。两者的数据相同，并且始终来自第二个指定的读取位置。

所以我尝试了一些替代代码：

```
char * s1;
char * s2;
//Some code to specify where to read from.
char r [10];
//some code that reads data into r. IDENTICAL to myReadFunc().
s1 = r;
//Some code to change the read location.
s2 = myReadFunc(); 
```

此代码按我的预期产生结果（`s1`具有来自一个位置的`s2`数据，并具有来自另一个位置的数据）。

所以，我的问题是，为什么后面的代码有效，而上面的代码却没有？我的猜测是，我的函数不知何故被这两个变量取别名，并且由于它指向这两个变量，因此每次调用它时都会重新分配这两个变量。有谁了解这种行为的全部原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T16:14:08.307

您的`readFunc`功能*无法*按预期工作。

您正在返回一个指向仅在函数主体范围内的数组的指针。当函数退出时，数组超出范围，稍后尝试访问该内存会调用未定义的行为。它在某些情况下可能*看起来有效，但不正确。*

相反，在 中，使用or`readFunc`分配堆上的数组：`new``malloc`

```
// it is the responsibility of the caller to delete[] the
//    returned buffer, but prefer to use e.g. shared_ptr
char *myReadFunc()
{
    char *r = new char[BUFFER_SIZE];
    //some code that reads data into r.
    return r;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:14:37.067

您尝试执行的操作无法定义任何行为，因为您正在尝试访问生命周期已结束的数组所指向的内存。

# anchor - doxygen 中的编号锚

> ID：11799435
> 
> 赞同：6
> 
> 时间：2012-08-03T16:12:07.710
> 
> 标签：anchor, doxygen

我有很多锚点可以用 doxygen 来描绘，例如

```
\anchor pic_foo
\image html foo.gif "My Caption"
\anchor pic_bar
\image html bar.gif "My Caption" 
```

每次当我`\ref`用来链接其中一个时，我都必须做出一些很好的描述，这样锚的原始名称就不会出现在输出中。

是否可以在 doxygen 中有类似编号的锚点，其中链接文本将是该锚点的编号？理想情况下是这样的：

```
\anchor pic_foo
\image html foo.gif "My Caption"
\anchor pic_bar
\image html bar.gif "My Caption"

As Figure \ref pic_foo shows... Figure \ref pic_bar is... 
```

理想情况下应翻译为：

```
As Figure 1 shows... Figure 2 is... 
```

其中数字是链接。我会对各种计数方案（全局文档或本地页面）感到满意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T17:02:53.637

我不认为使用 doxygen 可以在页面内或整个文档中自动增加数字（我很乐意在这里得到更正）。但是，解决您的问题的一个简单方法是将锚文本替换为拼出的数字，即“一”、“二”、“三”……等等。或者，如果您有很多数字，您可以使用罗马数字。纯数字似乎不能用作锚链接。

然后，您的示例将变为，在图形标题中带有附加文本，

```
\anchor one
\image html foo.gif "Figure one: My Caption"
\anchor two
\image html bar.gif "Figure two: My Caption"

As Figure \ref one shows... Figure \ref two is... 
```

导致

```
Here Figure one shows... Figure two is... 
```

带有`one`和`two`超链接到您的数字。

然后，您可以在配置文件中定义一个别名，例如`\fref`，定义为`Figure \ref`将自动在超链接数字之前加上文本“Figure”。

这个解决方案可以接受吗？我能想到的唯一其他选择涉及对 doxygen 输出进行后处理，但上述解决方案是迄今为止最简单的。

**更新**

以下 Python 代码将锚引用转换为递增计数器：

```
# Test documentation.
s = r"""
\anchor pic_foo
\image html foo.gif "My Caption"
\anchor pic_bar
\image html bar.gif "My Caption"

As Figure \ref pic_foo shows... Figure \ref pic_bar is...
"""

# Split string into a list of lines.
s = s.split('\n')

# Dictionaries for mapping anchor names to an incrementing counter.
d = {}

numbers = {1: 'one',
    2 : 'two',
    3 : 'three'}

counter = 1

# Find all anchor links and map to the next counter value.
for line in s:
    if r'\anchor' in line:
        d[line.split(r'\anchor ')[1]] = numbers[counter]
        counter += 1

# Reform original string.
s = '\n'.join(s)

# Replace anchor links with appropriate counter value.
for key, value in d.items():
    s = s.replace(key, value)

print s 
```

运行此脚本会产生输出

```
\anchor one
\image html foo.gif "My Caption"
\anchor two
\image html bar.gif "My Caption"

As Figure \ref one shows... Figure \ref two is... 
```

修改上述脚本以从标准输入读取并写入标准输出很简单，因此可以轻松地与`INPUT_FILTER`配置文件选项结合使用。

需要注意的一件事是`numbers`必须扩展字典以允许包含三个以上的数字。这又是微不足道的，但可能不容易扩展。可以使用从任意数字映射到适当单词的解决方案（请参阅本网站上的其他问题），所以我没有费心在这里实现它。

# javascript - 单击单独的链接时如何启动：悬停？

> ID：11799438
> 
> 赞同：1
> 
> 时间：2012-08-03T16:12:12.147
> 
> 标签：javascript, forms, hyperlink, hover

当我点击我网站顶部的“联系方式”时，我试图让我的联系表格弹出。我的网站 URL 是[http://www.integritydesigns.com](http://www.integritydesigns.com)。

现在，我网站顶部的联系链接链接到页面底部的 id (#contact)。当前，仅当您将鼠标悬停在页面右下角的 CONTACT US div (.dropdown) 上时，才会显示联系表单。当有人点击顶部导航栏中的“联系方式”时，我希望表单出现。

我确信它可以用 Javascript 完成，但我不知道从哪里开始。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:23:00.767

您想从一个单独的位置启动“悬停”并不多，而是您想使用两个不同的触发器“显示一个 div”。

`<div>`查看悬停时用于显示“联系人”的代码。您可以对链接使用相同类型的配方，但不要使用“onhover”触发器，而是使用“onclick”。您可以将链接的“href”属性设置为“#”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:31:46.363

在您的顶部菜单链接中，我会放置类似这样的内容`onclick="document.getElementById("form").style.display='block'"`（包含表单`form`的 id在哪里）`ul`

当然，如果您希望它在用户滚动或点击它之外时消失，您必须进行设置。（希望其他人会为此提供建议，因为我自己一直想知道最好的方法是什么）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:20:15.527

在 CONTACT 单击处理程序中，使弹出窗口可见。可能是通过为其分配一些 css 类。

# windows - 组合两个缺少不同标题的文本文件的解决方案

> ID：11799440
> 
> 赞同：-1
> 
> 时间：2012-08-03T16:12:31.457
> 
> 标签：windows, shell, sed, awk, grep

我在windows环境下运行，没有使用过grep/awk/sed/shell；但是，我想知道以下问题的最简单解决方案是什么：

我有两个文件（它们都有标题）：

1.  遗传学文件。列是动物、汽车、颜色
2.  标本文件。列是动物，颜色

我想将这两个文件合并到一个文件中，所有标题都存在；但是，对于样本文件部分，`Car`. 最终产品将是：

```
+----------+------+-------+---------------------------------------------------------------------+
|  Animal  | Car  | Color |                                                                     |
+----------+------+-------+---------------------------------------------------------------------+
| Elephant | Jeep | Grey  | (from genetics file [don’t include this text in the resulting file) |
| Dog      | Ford | Red   | (from genetics file)                                                |
| Cat      |      | Blue  | (from specimen file)                                                |
| Donkey   |      | Green | (from specimen file)                                                |
+----------+------+-------+---------------------------------------------------------------------+ 
```

Windows 环境中最简单的解决方案是什么？

**编辑**：澄清这些标签的原因是因为我相信这些工具最适合这项工作！我不想仅仅为此而创建一个完整的 c# 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:29:55.493

问题中提到的工具`sed`、`awk`、`grep`等不是 Windows 原生的。

为了使用它们，您必须做出选择：

*   在您的计算机上安装 unix 或 linux，无论是本机还是通过虚拟化。

或者：

*   安装[Cygwin](http://www.cygwin.com/)或[UWIN等工具包](http://www2.research.att.com/~gsf/download/uwin/)

这些项目有很多文档，但如果你是新手，还有很多东西要学。

开始使用虚拟化的一种简单方法是获取 Oracle 的[Virtualbox](http://virtualbox.org)和 ubuntu linux 的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:04:02.260

这是你想要的吗 ？

```
$cat input.ani
|Elephant|Jeep|Grey|
$ cat input.Specimen
| Cat | Blue  |
| Dog | White |
| Elephant | Red |
$ cat input.Specimen  | awk    '{print $1 $2 $3 "   " $3 $4 $5 $6  }' >> input.ani
$ cat input.ani
|Elephant|Jeep|Grey|
|Cat|   |Blue|
|Dog|   |White|
|Elephant|   |Red| 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T19:56:29.920

再三考虑，对于一个*简单*的解决方案，我不建议您使用 unix 工具集，除非您真的想学习该环境。

对于 Windows 系统，您也可以安装良好的脚本语言，如`python`、 `perl`或`ruby`.

这些都不是微不足道的，但他们有很好的支持，而且他们有不错的 Windows 安装程序。

另一个替代方案是 PowerShell，它同样基于 .Net 运行时。

# php - 如何将业务层暴露给表示层？

> ID：11799442
> 
> 赞同：2
> 
> 时间：2012-08-03T16:12:33.440
> 
> 标签：php, n-tier-architecture

我想我确实理解 n 层的概念。但是，我在弄清楚如何从**表示层与****业务层**通信时遇到问题？

 **公司用什么来暴露他们的业务层？我看过 apache Thrift - 这是构建多层应用程序时通常会做的事情吗？

PS>**业务层**和**表示层**在物理上是分开的——在不同的服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T19:14:50.800

有几种方法：
1\. Web 服务
2\. RMI
3\. 消息队列（虽然这更多是业务层到业务层的集成）**

# java - Lauch4j 不复制启动器

> ID：11799446
> 
> 赞同：0
> 
> 时间：2012-08-03T16:12:44.830
> 
> 标签：java, windows, wrapper

我正在通过launch4j-maven插件在exe中构建2个java软件。两个pom.xml中的插件部分是相同的（应用程序名称除外）。
奇怪的是，当我启动第一个 exe 时，lauch4j 做得对：我可以看到 myapps.exe 正在运行，并且在日志中我看到了副本：

```
Using 64-bit runtime.  
Check launcher: C:\Program Files\Java\jre7\bin\javaw.exe (OK)  
Copy:       C:\Program Files\Java\jre7\bin\javaw.exe -> C:\Program          Files\Java\jre7\launch4j-tmp\NumSyncManager.exe  
Heap -Xms:  5 MB / 0%, Free: 892 MB, Heap size: 5 MB  
Heap -Xmx:  15 MB / 0%, Free: 892 MB, Heap size: 15 MB  
...  
Launcher:   C:\Program Files\Java\jre7\launch4j-tmp\NumSyncManager.exe  
Launcher args:  -Xms5m -Xmx15m -classpath "C:\Program iles\..."   
Args length:    474/32768 chars  
Exit code:  0 
```

但是当我启动第二个时，我看到 javaw.exe 而不是 myapps2.exe 并且在日志中我清楚地看到它没有复制启动器：

```
Using 64-bit runtime.  
Check launcher: C:\Program Files\Java\jre7\bin\javaw.exe (OK)  
Heap -Xms:  10 MB / 0%, Free: 951 MB, Heap size: 10 MB  
Heap -Xmx:  500 MB / 0%, Free: 951 MB, Heap size: 500 MB  
...  
Launcher:   C:\Program Files\Java\jre7\bin\javaw.exe  
Launcher args:  -Xms10m -Xmx500m -classpath "C:\Program..."  
Args length:    817/32768 chars  
Exit code:  0 
```

这里是工作应用程序的 xml 文件：

```
 <configuration>
                        <headerType>gui</headerType>
                        <outfile>target/${winName}.exe</outfile>
                        <jar>target/${artifactId}-${version}-jar-with-dependencies.jar</jar> <!-- 'shaded' is the value set on shadedClassifierName above -->
                        <errTitle>Erreur lors du lancement du logiciel</errTitle>
                        <classPath>
                            <mainClass>fr.core.BootStrap</mainClass>
                        </classPath>
                        <singleInstance>
                            <mutexName>${winName}</mutexName>
                            <windowTitle>${winName}</windowTitle>
                        </singleInstance>
                        <jre>
                            <minVersion>1.6.0</minVersion>
                            <initialHeapSize>50</initialHeapSize>
                            <maxHeapSize>100</maxHeapSize>
                        </jre>
                        <versionInfo>
                            <fileVersion>${version}.0</fileVersion>
                            <txtFileVersion>${version}.0</txtFileVersion>
                            <fileDescription>Tool Manager</fileDescription>
                            <copyright>C</copyright>
                            <productVersion>${version}.0</productVersion>
                            <txtProductVersion>${version}.0</txtProductVersion>
                            <productName>${winName}</productName>
                            <internalName>${winName}</internalName>
                            <originalFilename>${winName}.exe</originalFilename>
                        </versionInfo>
                    </configuration> 
```

这是非工作应用程序的 xml

```
 <headerType>gui</headerType>
                        <outfile>target/${winName}.exe</outfile>
                        <jar>target/${artifactId}-${version}-jar-with-dependencies.jar</jar> <!-- 'shaded' is the value set on shadedClassifierName above -->
                        <errTitle>Erreur lors du lancement du logiciel</errTitle>
                        <classPath>  
                          <mainClass>fr.boot.BootStrap</mainClass>
                        </classPath>
                        <singleInstance>
                            <mutexName>${winName}</mutexName>
                            <windowTitle>${winName}</windowTitle>
                        </singleInstance>
                        <dontWrapJar>false</dontWrapJar>
                        <customProcName>false</customProcName>
                        <jre>
                            <minVersion>1.6.0</minVersion>
                            <initialHeapSize>10</initialHeapSize>
                            <maxHeapSize>500</maxHeapSize>
                        </jre>
                        <versionInfo>
                            <fileVersion>${winVersion}.0</fileVersion>
                            <txtFileVersion>${winVersion}.0</txtFileVersion>
                            <fileDescription>Tool</fileDescription>
                            <copyright>c</copyright>
                            <productVersion>${winVersion}.0</productVersion>
                            <txtProductVersion>${winVersion}.0</txtProductVersion>
                            <productName>${winName}</productName>
                            <internalName>${winName}</internalName>
                            <originalFilename>${winName}.exe</originalFilename>
                        </versionInfo>
                    </configuration> 
```

我使用相同的 Windows 帐户启动它们，没有权限问题。所以我不知道如何解决这个问题。

我尝试使用 Launch4j.exe 而不是 maven 插件，这是我的配置导出。它仍然不起作用：

```
<launch4jConfig>
  <dontWrapJar>false</dontWrapJar>
  <headerType>gui</headerType>
  <jar>C:\apps-0.0.1-jar-with-dependencies.jar</jar>
  <outfile>C:\apps.exe</outfile>
  <errTitle></errTitle>
  <cmdLine></cmdLine>
  <chdir></chdir>
  <priority>normal</priority>
  <downloadUrl>http://java.com/download</downloadUrl>
  <supportUrl></supportUrl>
  <customProcName>false</customProcName>
  <stayAlive>false</stayAlive>
  <manifest></manifest>
  <icon></icon>
  <singleInstance>
    <mutexName>apps</mutexName>
    <windowTitle>apps</windowTitle>
  </singleInstance>
  <classPath>
    <mainClass>fr.core.BootStrap</mainClass>
    <cp>fr.core.BootStrap</cp>
  </classPath>
  <jre>
    <path></path>
    <minVersion>1.6.0</minVersion>
    <maxVersion></maxVersion>
    <jdkPreference>preferJre</jdkPreference>
    <opt>-Denv.java.home=&quot;%JAVA_HOME%&quot;</opt>
  </jre>
  <versionInfo>
    <fileVersion>1.0.0.0</fileVersion>
    <txtFileVersion>1.0.0.0</txtFileVersion>
    <fileDescription>desc</fileDescription>
    <copyright>e</copyright>
    <productVersion>1.0.0.0</productVersion>
    <txtProductVersion>1.0.0.0</txtProductVersion>
    <productName>apps.exe</productName>
    <companyName>appsComp</companyName>
    <internalName>apps</internalName>
    <originalFilename>apps.exe</originalFilename>
  </versionInfo>
</launch4jConfig> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:22:02.727

要在 launch4J 配置文件中使用自定义进程名称启动您的应用程序，必须编写

```
<customProcName>true</customProcName> 
```

在您的非工作应用程序配置中，此参数为`false`. 试着先改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:49:27.040

无法评论 maven 部分，但我已经成功地将 Launch4j 与 Ant 一起使用。查看在构建可执行文件时传递给 launch4j 的 XML 文件。很可能第二个指定 dontWrapJar = true。

*或者在 Launch4j GUI 中加载 XML并*选中“不包装 JAR”复选框。

# scala - What is the difference between a def and a lambda'd val?

> ID：11799452
> 
> 赞同：3
> 
> 时间：2012-08-03T16:13:06.687
> 
> 标签：scala, lambda

What is the difference between

```
def plusOne(n: Int) = n + 1 
```

and

```
val plusOne = (n : Int) => n + 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:20:07.100

What the difference really comes down to is that the first is a "method", and the second is a "function", and in Scala these two things are surprisingly different.

You could see, for example, [Difference between method and function in Scala](https://stackoverflow.com/questions/2529184/difference-between-method-and-function-in-scala).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T08:43:59.120

Actually, both of them are functions.

The first one is a method or a local function, depending on where it is declared. The second one is a function value, which is an object instantiated at runtime. Methods, local functions, function values, and function literals are all flavors of functions in Scala.

See here for a chapter of Martin Odersky's book on this topic: [http://www.artima.com/pins1ed/functions-and-closures.html](http://www.artima.com/pins1ed/functions-and-closures.html)

# linux - supervisord 中的命令失败“stdout_log 和系统命令”

> ID：11799453
> 
> 赞同：0
> 
> 时间：2012-08-03T16:13:10.897
> 
> 标签：linux, logging, system-calls, supervisord

我有一个使用 supervisord 监控的 c++ 可执行文件。我把 supervisord 作为启动过程。当我重新启动时，supervisord 和我的可执行文件工作正常（功能上）。并在 tmp 中创建 Stdout_log 文件（这也很好）。但是日志文件是空的。

在我的可执行文件中，我运行了几个使用 system() 执行的 bash 脚本，但它也失败了。

所以我有两个问题

1.  日志文件为空
2.  系统（）失败

我可以将这些问题与一些许可相关联，但没有解决它的线索。寻找一些建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:15:50.143

如果您的可执行文件不能以 root 身份运行，请以非特权用户身份运行。

通过设置选项将*所有*supervisord配置为以另一个用户身份运行：`[supervisord]` `user`

```
[supervisord]
user = wwwdata 
```

或在它的部分`user`为您的可执行文件设置一个参数：`[program:x]`

```
[program:yourprogram]
user = wwwdata 
```

# c# - 生产 ASP.net 应用程序比开发慢

> ID：11799454
> 
> 赞同：2
> 
> 时间：2012-08-03T16:13:12.833
> 
> 标签：c#, asp.net, .net, entity-framework

我有一个带有实体框架的 asp .net webApplication，它在生产服务器中运行速度相当慢。

我在 localhost 中针对本地 SQLServer 数据库进行测试，在生产服务器中，应用程序也使用本地数据库。

因此，我预计生产时间会相似，如果不是更快的话。

服务器是一台新机器，比我的机器具有更多的 RAM 和更快的处理器。

我发现改进代码对我有很大帮助（比如 stringBuilder 替换了很多 concats），但我无法理解的是时间上的差异！

我总是在发布模式下比较时间。使用简单的 Visual Studio 发布。

我应该从哪里开始？

IIS 在生产中？SQL 服务器？可以是连接字符串吗？继续调查代码？

提前致谢，

迪奥戈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:31:34.867

我将从分解问题开始。例如 sql server 时间和 iis 时间。您可以分离代码的不同部分并测量执行时间等。

[SQL Server Profiler](http://msdn.microsoft.com/en-us/library/ms181091.aspx)是开始使用和用于 ASP.NET 的好工具。您可以从简单的[跟踪](http://msdn.microsoft.com/en-us/library/bb386420.aspx)和[页面跟踪](http://msdn.microsoft.com/en-us/library/94c55d08.aspx)开始。

有关[测试](http://msdn.microsoft.com/en-us/library/bb924375.aspx)和[性能的更多信息](http://msdn.microsoft.com/en-us/library/ff649152.aspx)

您应该在生产和开发机器中拥有相同的数据才能获得相同的结果。此外，生产服务器可能会忙于您在开发机器上可能没有的其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:03:09.203

我建议使用[Glympse](http://getglimpse.com/)来获取有关生产中正在发生的事情的更详细信息。

另一件要考虑的事情是[Server vs. Workstation 垃圾收集器](http://www.hanselman.com/blog/UsingTheServerRatherThanWorkstationGarbageCollectorWithTheNETFrameworkCLR.aspx)。这绝对是在开发机器上运行站点与将站点部署到服务器之间的区别之一。

过去曾出现过一些[服务器 GC 导致性能问题的情况](http://support.microsoft.com/kb/911716)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:22:47.843

试试 Perfview [http://www.microsoft.com/en-us/download/details.aspx?id=28567](http://www.microsoft.com/en-us/download/details.aspx?id=28567)，基于 ETL，专为分析托管代码性能而设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-11T22:12:46.977

对我来说，结果是 system.codedom 导致生产环境中的性能缓慢，而在调试时本地 IIS Express 中一切正常。

检查您的 Web.config 并删除以下内容。

```
 <system.codedom>
<compilers>
  <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=2.0.1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:default /nowarn:1659;1699;1701" />
  <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=2.0.1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:default /nowarn:41008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+" />
</compilers></system.codedom> 
```

如果您进行预编译并且仅使用 Web 服务器上已编译的程序集，则可以从 web.config 中安全地删除这些程序集。

# reporting-services - Sql Server 2008 R2 报告服务

> ID：11799455
> 
> 赞同：1
> 
> 时间：2012-08-03T16:13:24.343
> 
> 标签：reporting-services, sql-server-2008-r2, ssrs-2008-r2

我在 SSRS 中有一份特定商家报告，它每天早上 8 点发送给不同的商家。但问题是他们只想在有交易（包含数据）时才收到报告，如果报告为空，他们不想收到报告。

有没有办法在 SSSRS 中限制它？请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:18:28.900

看看数据驱动的订阅。它们自 SQL Server 2005 以来就已经存在，并且对于这类事情非常有用。在不了解您的场景的情况下，我无法准确解释它是如何工作的，但我确信它可以。在这里查看更多详细信息：http: [//msdn.microsoft.com/en-us/library/ms169673.aspx](http://msdn.microsoft.com/en-us/library/ms169673.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:15:56.667

SSRS 订阅非常基础——要么您订阅接收报告，要么您没有订阅。如果您想要/需要添加逻辑，您需要使用可以作为计划任务和报告服务 API 运行的控制台应用程序来滚动您自己的逻辑。

# javascript - 如何通过 Jquery 匹配密码确认

> ID：11799456
> 
> 赞同：0
> 
> 时间：2012-08-03T16:13:30.537
> 
> 标签：javascript, jquery, passwords

我有一个 jQuery 代码，它将匹配取自 [此处](http://code.google.com/p/rcciit-wp-techtrix-event-management-plugin/source/browse/trunk/js/jquery.validationEngine-en.js?spec=svn5&r=5)的文本字段中的密码。但它没有完成。任何人都可以帮助我如何通过此代码匹配文本字段中的密码吗？谢谢。

这是我用于密码匹配的 jQuery 代码段。我需要有我认为的“无”部分的逻辑。

```
{
    "confirm": { // password matching
        "regex": "none",
        "alertText": "* Your field is not matching"
    },
    "telephone": {
        "regex": "/^[0-9\-\(\)\ ]+$/",
        "alertText": "* Invalid phone number"
    },
    "email": { // For email validation
        "regex": "/^[a-zA-Z0-9_\.\-]+\@([a-zA-Z0-9\-]+\.)+[a-zA-Z0-9]{2,4}$/",
        "alertText": "* Invalid email address"
    }
} 
```

我认为在这段代码中没有给出匹配的 loginc`"regex":"none"`部分。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:46:34.840

看来您正在编写一个通用的验证引擎。乍一看，我们认为我们通常会检查任何字段值，我们只需使用正则表达式匹配即可。但是，如果我们进一步深入研究，在某些情况下我们可能需要遵循

1.  密码匹配（将一个字段的值与另一个字段匹配）- 这正是您所需要的。
2.  `or`使用or条件验证两个以上的字段`and`- 您似乎已经在您的项目中执行此`and`状态`validate2fields`
3.  一个字段的值应小于其他字段的值 - 有时我们可能需要比较两个日期字段，其中一个字段应小于另一个字段。或某些情况下的最大最小值。

……还有更多。

CodeIgniter PHP 框架提供了自定义 form_validation 支持，并且他们实现了一些常用的验证。

你可以在[这里](http://codeigniter.com/user_guide/libraries/form_validation.html)找到相同的`Rule Reference`部分。

说到您的意思，要匹配两个不同的字段，您不需要进行任何正则表达式匹配，但您需要在规则中动态地提供获取其他字段的 id 并根据该 id 比较它们。

我建议，`type`为每个规则提供一个属性并提供一个选项，例如

1.  `regex`- 与正则表达式匹配
2.  `field`- 与其他字段检查。给出一个`operator`选项，它将检查不同的选项。

希望这可以让您了解您想要实现的目标。

朋友，请提出更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:25:30.807

在电子邮件字段中，我们通常会有一个`@`符号和`.`句点。所以，我们将匹配他们两个。

但是，通常我们允许密码字段中的所有字符。因此，我们没有检查任何特殊的匹配 REGEX。我猜我们唯一匹配的是密码字段中允许的最小和最大字符。

例如，如果我们需要 8 到 20 个字符的密码，则使用以下内容。

```
/.{8,20}/ 
```

# c# - 为什么使用 PrincipalSearcher 比 FindByIdentity() 更快？

> ID：11799457
> 
> 赞同：15
> 
> 时间：2012-08-03T16:13:31.773
> 
> 标签：c#, .net, security, azure, windows-server-2008

我有这个代码：

```
var context = new PrincipalContext( ContextType.Machine );
var user = UserPrincipal.FindByIdentity( context, username ); 
```

运行大约需要 2-3 秒。建议我使用`PrincipalSearcher`类重写它：

```
var context = new PrincipalContext( ContextType.Machine );
var user = new UserPrincipal(context);
user.SamAccountName = username;
var searcher = new PrincipalSearcher(user);
user = searcher.FindOne() as UserPrincipal; 
```

它在不到一秒的时间内运行 - 明显更快。建议重写的人和我一样一无所知，为什么它运行得更快。

为什么它会产生任何性能差异？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T16:23:13.807

我能想到的唯一合理的原因是`.FindByIdentity`必须检查多个属性是否匹配，因为您没有具体指定要查找的属性。

您可以通过指定您正在寻找的属性（[使用此方法重载](http://msdn.microsoft.com/en-us/library/bb344891.aspx)）来做到这一点 - 试试这个进行比较：

```
var user = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, username); 
```

这有多快？

# java - 如何在android中运行main

> ID：11799462
> 
> 赞同：1
> 
> 时间：2012-08-03T16:13:50.270
> 
> 标签：java, android

大家好，我正在编写简单的应用程序来训练我的 ContentProvider 技能。所以我编写了 Contract 类，它为她的所有故事指定了所有元数据

```
public class StoreContract {

public static String AUTHORITY = "com.ura.store.intentProvider";
public static String DATABASE_NAME = "Store.db";

public static class Customer{
    public static final String TABLE_NAME ="tblCustomers";
    public static final String COLUMN_AUTO_ID = "_id";
    public static final String COLUMN_NAME="First Name";
    public static final String COLUMN_LAST_NAME = "Last name";
    public static final String COLUMN_PHONE_NUMBER = "Phone number";

    public static final String CREAT_STRING = "create table "+TABLE_NAME+
            " ( "+COLUMN_AUTO_ID+" INTEGER PRIMARY KEY AUTOINCREMENT , "
            +COLUMN_NAME+" TEXT , "
            +COLUMN_LAST_NAME+" TEXT , "
            +COLUMN_PHONE_NUMBER+" TEXT);"; 
}

static class Seller{
    public static final String TABLE_NAME = "tblEmployes";
    public static final String COLUMN_AUTO_ID = "_id";
    public static final String COLUMN_NAME="First Name";
    public static final String COLUMN_LAST_NAME = "Last name";
    public static final String COLUMN_EMPLOY_TYPE = "Type";
    public static final String CREAT_STRING = "create table "+TABLE_NAME+
            " ( "+COLUMN_AUTO_ID+" INTEGER PRIMARY KEY AUTOINCREMENT , "
            +COLUMN_NAME+" TEXT , "
            +COLUMN_LAST_NAME+" TEXT , "
            +COLUMN_EMPLOY_TYPE+" TEXT);"; 

}

static class Buy{
    public static final String TABLE_NAME = "tblBuys";
    public static final String COLUMN_AUTO_ID = "_id";
    public static final String COLUMN_CUSTOMER_ID = "Customer";
    public static final String COLUMN_SELLER_ID = "Seller";
    public static final String COLUMN_INFO = "Info";
    public static final String COLUMN_PRICE = "Price";
    public static final String CREAT_STRING = "create table "+TABLE_NAME+
            " ( "+COLUMN_AUTO_ID+" INTEGER PRIMARY KEY AUTOINCREMENT , "
            +COLUMN_CUSTOMER_ID+" TEXT, "
            +COLUMN_SELLER_ID+" TEXT , "
            +COLUMN_INFO+" TEXT "
            +COLUMN_PRICE+" REAL"
            +"FOREIGN KEY("+COLUMN_CUSTOMER_ID+") REFERENCES "+Customer.TABLE_NAME+"("+Customer.COLUMN_AUTO_ID+")"
            +"FOREIGN_KEY("+COLUMN_SELLER_ID+") REFERENCES "+Seller.COLUMN_AUTO_ID+"("+Seller.COLUMN_AUTO_ID+")";
}

public static void main(String []args){
    System.out.println(StoreContract.Customer.CREAT_STRING);
} 
```

请注意我写它的主要方法，看看我的表创建字符串的样子当然该方法不起作用可能是因为它是 Android 项目。所以我的问题很简单，在这种情况下你建议做什么我的意思是一个例外将所有类复制并传递到其他项目中，我很确定这些东西有一个标准的解决方案，一些单元测试或其他东西。
感谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:16:45.900

与 Android 等效的 main 方法是活动中的[onCreate()](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)（以及几乎所有其他地方）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T16:21:19.427

与纯 java 应用程序不同，Android 应用程序不会调用 main() 作为它们的起点，而是调用其顶级活动的 onCreate() 方法。该活动需要`<action android:name="android.intent.action.MAIN" />`在定义该活动的清单部分中按名称指定。

为此，您将创建一个从活动继承的类，在 onCreate() 方法中添加当前 main 方法的代码，然后从那里访问您当前拥有的类。

此外，还有更多关于 android 如何处理活动的生命周期以及其中的方法调用。我推荐[这个链接](http://developer.android.com/training/basics/activity-lifecycle/starting.html)作为研究 android 代码如何运行的起点。

# optimization - 根据比较次数进行二分搜索优化

> ID：11799463
> 
> 赞同：1
> 
> 时间：2012-08-03T16:13:57.900
> 
> 标签：optimization, binary-search

最近我在一次采访中被问到这个问题。在二分搜索中，我们有两个比较，一个是大于，另一个是小于中间值。它可以以某种方式进行优化，以便我们只需要检查一次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:36:19.987

是的，在几个方面。

通过进行三路比较，这在某些版本的 Fortran 中存在（参见“算术 IF”）。

通过玩弄措辞 - 在 x86（和其他）程序集中，您可以使用一个`cmp`但仍然使用两个分支。

通过使用[延迟检测相等](http://en.wikipedia.org/wiki/Binary_search_algorithm#Deferred_detection_of_equality)技巧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:21:01.297

不，你不能。虽然您可以切换运算符（例如，而不是更大和更少使用更大和相等），但您最终会得到两个比较。在二分查找中，你实际上有三个结果，如果你比较其中两个结果都不是真的，那只能是第三个。

例如：

```
if (lookup < mid)
  searchLower();
else if (lookup > mid)
  searchUpper();
else
  found(lookup); 
```

如果您切换运算符，所涉及的运算符将发生变化，但您始终需要进行两次比较。

# asp.net - 仅从客户端调用 Web 服务

> ID：11799467
> 
> 赞同：0
> 
> 时间：2012-08-03T16:14:12.280
> 
> 标签：asp.net, web-services, asmx

我有一个基于 Web 的应用程序，它在各种 .asmx 文件中使用大量客户端请求。

我想知道我是否只能从客户端使用这些 Web 服务并限制来自其他来源的请求。

这样做的原因是因为我只想从当前应用程序中使用这些 Web 服务，并限制来自其他来源的请求。出于安全原因，我可以使用soap身份验证，但由于我从客户端请求服务，我认为身份验证并不重要。

我会很感激任何评论。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:20:57.587

根据定义，Web 服务是公开的、公开可见的和可用的（除非它们在专用网络或独立计算机上运行）。即任何人都可以访问它们。因此，仅仅部署 Web 服务并希望获得最好的结果并不是一个好方法。
您打算如何限制其他访问？

# windows-phone-7 - 在 WP7 中显示 toast 通知的最简单方法是什么？

> ID：11799468
> 
> 赞同：0
> 
> 时间：2012-08-03T16:14:14.607
> 
> 标签：windows-phone-7, toast

一段时间以来，我一直在寻找一种在 WP7 上显示离线（不是从服务器推送）toast 通知的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:56:28.907

如果您想在应用程序运行时显示通知，您可以使用`ToastPrompt`coding4fun 工具包中的：http: [//coding4fun.codeplex.com/](http://coding4fun.codeplex.com/)

如果您想在应用未运行时显示通知，可以使用`ShellToast`后台代理中的类：http: [//msdn.microsoft.com/en-us/library/microsoft.phone.shell.shelltoast (v =vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.shelltoast(v=vs.92).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T23:09:28.223

在后台任务中，只需调用此方法：

```
 public static void makeToast(string toastText)
    {
        //Make a new toast with content "text"
        ShellToast toast = new ShellToast();
        toast.Title = "Toast Title: ";
        toast.Content = toastText;
        //toast.NavigationUri = new Uri();
        toast.Show();
    } 
```

# mysql - 提高[带有“in 子句”的mysql查询]的性能

> ID：11799471
> 
> 赞同：0
> 
> 时间：2012-08-03T16:14:27.867
> 
> 标签：mysql, performance, explain

我有一个从两个表中检索数据的查询。

`table1`有一个 int 字段，`table1_id`它是主键。

`table2`有两个字段；`table1_id`, 一个 int 字段（引用`table1.table1_id`）和`field1`, 一个位字段。

`table2`:`table1_id`和`field1`上有三个索引`table1_id_field1`（索引位于名称指示的字段上）。

我有以下查询：

```
SELECT *  FROM table1 t1 
LEFT JOIN table2 t2 
ON t2.table1_id = t1.table1_id 
WHERE t2.table1_id IN 
(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12) 
```

此查询的计划（通过 using 获得`EXPLAIN`）是这样的：

```
id   select_type   table   type    possible_keys                     key              key_len  ref               rows   Extra
1    SIMPLE        t2      range   table1_id,field1,table1_id_field1 table1_id_field1 8        NULL              29858  Using where
1    SIMPLE        t1      eq_ref  PRIMARY                           PRIMARY          8        db1.t2.table1_id  1 
```

现在，当我向查询添加额外的 where 子句时，如下所示：

```
SELECT *  FROM table1 t1 
LEFT JOIN table2 t2 
ON t2.table1_id = t1.table1_id 
WHERE t2.table1_id IN 
(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12) 
**AND field1 = 0** 
```

查询不再像以前那样使用高效的索引；这是查询计划：

```
id   select_type   table   type     possible_keys                     key      key_len  ref                rows   Extra
1    SIMPLE        t2      ref      table1_id,field1,table1_id_field1 field1   2        const              98913  Using where
1    SIMPLE        t1      eq_ref   PRIMARY                           PRIMARY  8        db1.t2.table1_id   1 
```

它现在搜索的行数 (98913) 比以前 (29858) 多，并且不再使用之前在原始查询中使用的索引（它使用`field1`的是`table1_id_field1`.

我的问题是：

1.  带有附加子句的第二个查询没有使用它在第一个查询中使用的索引是否有原因？

2.  除了使用之外，有什么方法可以让 mysql 选择更有效的索引`FORCE INDEX`？也许我需要添加另一个索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:26:16.423

我猜想冗余索引过多会使优化器感到困惑，因此它选择了错误的索引。

在我看来，table2 上只有一个索引就足够了，`table1_id_field1`因为`table1_id`它是一个前导列，所以这个索引可以用于执行 FK；因此，不需要索引`table1_id`。索引`field1`不能是选择性的（因为它在位字段上）才能有效。

# php - 发送脚本然后页面不重定向

> ID：11799480
> 
> 赞同：-2
> 
> 时间：2012-08-03T16:15:01.720
> 
> 标签：php

如果单击提交按钮，则应执行此代码，但这不起作用。

```
header('Location: http://www.yourtargeturl.com'); //script api
echo '<script>window.open("'.$_SERVER['PHP_SELF'].'","_self")</script>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:19:44.573

您正在混合 PHP 和 Javascript。仅标题就会将用户发送到该窗口中的新位置。

注意：PHP 存在于服务器上，然后在生成/运行后发送到浏览器，因此您拥有的 javascript 需要回显到浏览器才能执行任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:23:01.373

您`header('Location: http://www.yourtargeturl.com');`将重定向页面，并让浏览器加载该页面。

之后的一切都被忽略。因此，您的 JavaScript`window.open`永远不会写入页面并运行。

# java - android notifications dont appear on its time

> ID：11799481
> 
> 赞同：1
> 
> 时间：2012-08-03T16:15:01.847
> 
> 标签：java, android, notifications

hey guys i am working on android application , i am trying to creat a notification for a specific time like ( 03 - august -2012 at 5:00 pm ) , so i used the calender to set the time and then using calendar.getTimeInMillis i get the time of the notification , but unfortunatlly when i run my application on the emulator once the application starts the notification appears without caring about the specfic time, i.e its not 4:00 pm the notification appears on the top and time stamped with 5:00pm , heres my notification code :

```
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

int icon = R.drawable.ieee;
CharSequence tickerText = "Hello";

//   long when = System.currentTimeMillis();

//setting custom time 
Calendar calendar = Calendar.getInstance();
calendar.set(calendar.DAY_OF_MONTH,03);
calendar.set(Calendar.HOUR_OF_DAY,17);
calendar.set(Calendar.MINUTE,26);
calendar.set(Calendar.SECOND, 00);
long when = calendar.getTimeInMillis();        // notification time

Notification notification=new Notification (icon, tickerText, when);

Context context = getApplicationContext();
CharSequence contentTitle = "My notification";
CharSequence contentText = "Hello World!";
Intent notificationIntent = new Intent(this, MainActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
notification.flags |= Notification.FLAG_AUTO_CANCEL;
notification.flags |= Notification.FLAG_ONLY_ALERT_ONCE;
notification.flags |= Notification.FLAG_SHOW_LIGHTS;
notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
mNotificationManager.notify(1, notification); 
```

* * *

now everything is running , but there's a little problem ,,, for example if the date&time now is 9/9/2012 , 9:00 am ,,, and i set the alarm for tomorrow at 10am , okey it will work , but when i open the application the day after tomorrow first thing the app will do is to do notification of the old alarm , i tried this by setting old alarm dates and when i open the app the first thing it does is showing old alarms , so any ideas about solving this ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:20:16.647

Because it will not wait when you haven't told it to. You can't set the `Calendar` time and then expect the notification service to wait.

You need to instead using a `TimerTask` or `AlarmManager` for this to generate an event at the time you want. Then create the notification inside your implementation of either one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:47:11.130

ahaaa , i guess i got your point , or i hope so lol , its like setting the alarm manager on a specific date , so when this date comes the alarm manager sets a flag to certain value "enum i.e" and then within this code segment there will be a checking function which each time it checks this flag if its up then do certain task , right ? [http://androidideasblog.blogspot.com/2011/07/alarmmanager-and-notificationmanager.html](http://androidideasblog.blogspot.com/2011/07/alarmmanager-and-notificationmanager.html) this will helps ALOT !!

# objective-c - NSView 和 NSScrollView：按钮消失并重新出现在另一个位置

> ID：11799482
> 
> 赞同：0
> 
> 时间：2012-08-03T16:15:05.260
> 
> 标签：objective-c, macos, nsview, nsscrollview

我在 Aaron 为 Mac os X 编写的 Cocoa 编程的第 17 章，在示例中他将 NSView 嵌入到 NSScrollView 中。
为了练习，我还以编程方式向视图添加了一个 NSButton。
问题是按钮的奇怪行为，它首先出现在滚动视图上，但是当我向下移动垂直滚动条时，按钮消失并重新出现在滚动视图的底部。因为这可能会令人困惑（也很难解释），我制作了一个视频来更好地描述这个问题：

[http://tinypic.com/player.php?v=k1sacz&s=6](http://tinypic.com/player.php?v=k1sacz&s=6)

我将 NSView 子类化并称为类 StretchView （正如书中所说）。
这是代码：

```
#import <Cocoa/Cocoa.h>

@interface StretchView : NSView
{
@private
    NSBezierPath* path;
}

- (NSPoint) randomPoint;
- (IBAction) click : (id) sender;

@end

#import "StretchView.h"

@implementation StretchView

- (void) awakeFromNib
{
    // Here I add the button
    NSView* view=self;
    NSButton* button=[[NSButton alloc] initWithFrame: NSMakeRect(10, 10, 200, 100)];
    [button setTitle: @"Click me"];
    [button setTarget: self];
    [button setAction: @selector(click:)];
    [view addSubview: button];
}

- (IBAction) click:(id)sender
{
    NSLog(@"Button clicked");
}

- (void) drawRect:(NSRect)dirtyRect
{
    NSRect bounds=[self bounds];
    [[NSColor greenColor] set];
    [NSBezierPath fillRect: bounds];
    [[NSColor whiteColor] set];
    [path fill];
}

- (id) initWithFrame:(NSRect)frameRect
{
    self=[super initWithFrame: frameRect];
     if(self)
    {
        // here i dra some random curves to the view
        NSPoint p1,p2;
        srandom((unsigned int)time(NULL));
        path=[NSBezierPath bezierPath];
        [path setLineWidth: 3.0];
        p1=[self randomPoint];
        [path moveToPoint: p1];
        for(int i=0; i<15; i++)
        {
            p1=[self randomPoint];
            p2=[self randomPoint];
            [path curveToPoint: [path currentPoint] controlPoint1: p1 controlPoint2: p2 ];
            [path moveToPoint: p1];
        }
        [path closePath];
    }
    return self;
}

- (NSPoint) randomPoint
{
    NSPoint result;
    NSRect r=[self bounds];
    result.x=r.origin.x+random()%(int)r.size.width;
    result.y=r.origin.y+random()%(int)r.size.height;
    return result;
}

@end 
```

问题：

1）为什么按钮消失 - 重新出现以及如何避免这个问题？
2) 为什么曲线用白色填充？我想把它们画成细线，而不是填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:59:25.257

**第1部分：**

它看起来是滚动视图没有将其滚动条更新到视图实际滚动的位置。（启动时，它似乎显示视图已经向下滚动到左下角，即使滚动条位于顶部也是如此）。

我现在只能问你运行的是什么操作系统？除非我没有正确复制您的代码，否则它在 Mountain Lion 上非常适合我。

* * *

**第2部分：**

路径已填充，因为您`[path fill]`在 drawRect 中使用了。`[path stroke]`改为用于笔画。

# php - 将所有请求重定向到其他地方的根目录？

> ID：11799486
> 
> 赞同：0
> 
> 时间：2012-08-03T16:15:17.403
> 
> 标签：php, apache, .htaccess

好的，所以我已经为我正在设置的服务器下载了一个 CMS，但我对文件所在的路径有些困难。

我已将 CMS 放在服务器上的子目录中，因为根目录已被另一个 CMS 使用。但是，CMS 在代码中反复使用“/”链接到他们的文件。例如，使用以下代码找到图像：

```
<img src="/images/banner.png" /> 
```

如您所知，这不起作用，因为上面的链接将请求重定向到服务器根目录中的图像文件夹，而不是子目录。CMS 还附带了一个“.htaccess”文件，所以我立即想到可以将所有使用“/”字符发出的请求重定向到服务器上的子目录。这是原始的“.htaccess”文件：

```
RewriteEngine On

RewriteRule ^index.php(|/)$ content/.php
RewriteRule ^error.php(|/)$ content/error.php
RewriteRule ^housekeeping(|/)$ housekeeping/index.php
RewriteRule ^(|/)$ content/$1.php
RewriteRule ^([a-zA-Z0-9_-]+)(|/)$ content/$1.php
RewriteRule ^rd/([^/]+)(|/)$ /rd.php?id=$1

RewriteRule ^quickregister/start(|/)$ /register/start.php
RewriteRule ^quickregister/step2(|/)$ /register/step2.php
RewriteRule ^quickregister/step3(|/)$ /register/complete.php

RewriteRule ^community/online(|/)$ content/online.php
RewriteRule ^community/vip(|/)$ content/vip.php
RewriteRule ^credits/goldvip(|/)$ content/goldvip.php

RewriteRule ^home/(..*)$ content/home.php?u=$1
RewriteRule ^articles/(..*)$ content/articles.php?story=$1

ErrorDocument 403 /content/error.php
ErrorDocument 404 /content/error.php 
```

我以为通过添加

```
RewriteRule ^/$ /subdirectory/ 
```

对“/”的请求将被重定向，但无济于事。我检查了 apache 配置，似乎启用了使用 htaccess 文件覆盖配置，所以如果有人能够帮助我，我会很高兴。

提前致谢！

**编辑：** 我真正接近解决方案。我在“RewriteEngine on”下面插入了这段代码：

```
RewriteRule ^(.*)/(.*)$ /private_servers/strebbohotel/$2 
```

访问网址“http://mysite.com/private_servers/strebbohotel/content/.php”时返回以下错误页面：未找到

在此服务器上未找到请求的 URL /private_servers/strebbohotel/.php。

此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

如您所见，它出于某种原因跳过了“内容”子目录。我相信它与 .htaccess 文件的其他行有关，但我不知道是哪些。也可能是我需要一个更复杂的正则表达式，但我不是特别擅长它，所以如果有人可以进一步帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:02:19.297

你想使用：

```
RewriteBase /another_root_dir/ 
```

在 .htaccess 文件的开头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:19:25.400

CMS 子目录中的 .htaccess 文件对针对服务器根目录的请求没有影响。您需要在此处添加一个 .htaccess。

尽管如此，我不知道您将如何区分来自 CMS 的请求（例如您的示例中的图像请求）与那些针对 Web 根目录中的应用程序的请求。

您的 CMS 是否没有任何配置设置允许您指定除 Web 根目录以外的文件的路径？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:22:09.347

您必须更改根目录上的 .htaccess 文件 - 这会与其他 CMS 混淆。我想到的唯一解决方案是使用 RewriteCond 的组合：

```
RewriteCond %{HTTP_REFERER} my_better_cms_url_regex
RewriteCond %{REQUEST_URI} ^/images/.*$
RewriteRule ^.*$ /subdirectory/%{REQUEST_URI} 
```

这应该够了吧。如果您想自定义它，请参阅[此](http://www.askapache.com/htaccess/mod_rewrite-variables-cheatsheet.html)备忘单（或类似文件）。但请注意，根目录中的 .htaccess 会根据对您的子目录 cms 发出的所有请求进行检查 - 因此需要第二个条件。

# matlab - 使用 MATLAB 进行平均的滚动窗口

> ID：11799488
> 
> 赞同：2
> 
> 时间：2012-08-03T16:15:27.587
> 
> 标签：matlab, image-processing

我有以下代码，粘贴在下面。我想将其更改为仅平均 10 个最近过滤的图像，而不是整个过滤图像组。我认为我需要更改的行是：`Yout(k,p,q) = (Yout(k,p,q) + (y.^2))/2;`，但是我该怎么做呢？

```
j=1;
K = 1:3600;
window = zeros(1,10);
Yout = zeros(10,column,row);
figure;
y = 0;                           %# Preallocate memory for output
%Load one image
for i = 1:length(K)
    disp(i)
    str = int2str(i);
    str1 = strcat(str,'.mat');
    load(str1);
    D{i}(:,:) = A(:,:);

    %Go through the columns and rows
    for p = 1:column
        for q = 1:row
            if(mean2(D{i}(p,q))==0)
                x = 0;
            else
                if(i == 1)
                    meanvalue = mean2(D{i}(p,q));
                end

                %Calculate the temporal mean value based on previous ones.
                meanvalue = (meanvalue+D{i}(p,q))/2;
                x = double(D{i}(p,q)/meanvalue);
            end
            %Filtering for 10 bands, based on the previous state
            for k = 1:10
                [y, ZState{k}] = filter(bCoeff{k},aCoeff{k},x,ZState{k});
                Yout(k,p,q) = (Yout(k,p,q)  + (y.^2))/2;
            end
        end
    end
    %     for k = 2:10
    %         subplot(5,2,k)
    %         subimage(Yout(k)*5000, [0 100]);
    %         colormap jet
    %     end
    %     pause(0.01);
end
disp('Done Loading...') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:19:06.857

线

```
Yout(k,p,q) = (Yout(k,p,q)  + (y.^2))/2; 
```

为所有图像的 10 个波段中的每一个计算一种[移动平均线。](http://en.wikipedia.org/wiki/Moving_average)此行计算`meanvalue`图像的移动平均值：

```
meanvalue=(meanvalue+D{i}(p,q))/2; 
```

对于两者，您都需要添加一个仅保留最后 10 个图像的缓冲区结构。为了简化它，您也可以将所有内容保存在内存中。这是一个示例`Yout`：

更改此行：（添加一维）

```
Yout = zeros(3600,10,column,row); 
```

并改变这个：

```
for q = 1:row            

    [...]

    %filtering for 10 bands, based on the previous state
    for k = 1:10
        [y, ZState{k}] = filter(bCoeff{k},aCoeff{k},x,ZState{k});
        Yout(i,k,p,q) = y.^2;
    end

    YoutAvg = zeros(10,column,row);
    start = max(0, i-10+1);
    for avgImg = start:i
        YoutAvg(k,p,q) = (YoutAvg(k,p,q) + Yout(avgImg,k,p,q))/2;
    end
end 
```

然后显示使用

```
subimage(Yout(k)*5000, [0 100]); 
```

你会做某事。类似的`meanvalue`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:11:24.813

最好的方法（在我看来）是使用循环缓冲区来存储您的图像。在循环缓冲区或环形缓冲区中，数组中最旧的数据元素被推入数组的最新元素覆盖。制作这种结构的基础知识在简短的 Mathworks 视频*[实现一个简单的循环缓冲区](http://blogs.mathworks.com/videos/2009/05/08/implementing-a-simple-circular-buffer/)*中进行了描述。

对于处理单个图像的主循环的每次迭代，只需将新图像加载到循环缓冲区中，然后使用[MATLAB](http://en.wikipedia.org/wiki/MATLAB)的内置`mean`函数来有效地取平均值。

如果您需要对数据应用窗口函数，则制作帧的临时副本乘以窗口函数，并在循环的每次迭代中取副本的平均值。

# asp.net-mvc-3 - 防止 Visual Studio 专注于开始调试时打开的新选项卡

> ID：11799492
> 
> 赞同：0
> 
> 时间：2012-08-03T16:15:45.893
> 
> 标签：asp.net-mvc-3, visual-studio-2010, debugging, firefox

当我在 Web 应用程序 Asp.Net Mvc 中开始调试 (F5) 时，是否可以防止 Visual Studio 将注意力集中在打开的新选项卡上？

我使用 FireFox（迄今为止的最新版本）

视觉工作室 2010。

# iphone - UIView 总是在顶部

> ID：11799494
> 
> 赞同：1
> 
> 时间：2012-08-03T16:15:54.217
> 
> 标签：iphone, ios, uiview, uiviewcontroller

我有一个非常复杂的视图层次结构。在每个部分中都有一个带有 UINavigation 控制器的主 - 详细视图控制器，并且每个视图控制器内部都有自己的 UView。我有一个覆盖视图，它支持拖放事件的缓冲区或持有者。在任何给定时间点，无论层次结构如何，我都希望这个视图位于我所有子视图的顶部。

有没有办法让我可以将 UIView 始终放在顶部。

就像是

```
   overlayView.alwaysOntop = YES;

```

我可以手动使用诸如将子视图放在前面、在上方、下方插入子视图等功能，但这使我的应用程序非常复杂。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T16:32:24.153

您是否尝试过将视图添加为导航视图的子视图

```
[self.navigationController.view addSubView:yourView]; 
```

只要您不向导航控制器视图添加其他子视图，它就应该保持在层次结构的顶部。您可能还需要稍微移动它的位置。

# android - 下拉菜单在 android 上不可点击我已经阅读了很多帖子和“修复”这个问题，但仍然没有找到解决方案。我们正在使用 PhoneGap 创建一个多平台应用程序，但我们在 android 设备上遇到了问题（在 iPhone/iPad 上运行良好）。我们的下拉菜单不起作用，单击它们没有任何作用。当用户“转到新页面”时，我们通过设置内容 div 的 HTML 来动态创建所有页面。例如，我们将以下内容附加到我们页面之一的内容 div

> ID：11799504
> 
> 赞同：0
> 
> 时间：2012-08-03T16:16:29.960
> 
> 标签：android, select, drop-down-menu, webview, clickable

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-13T18:05:10.480

如果你有这样的事情：

```
 <div class='multiselect-wrapper'>
    <div class='multiselect'>Age Range</div>
        <select type='hidden' class='age' id='age' name='age' multiple="">
           <option value='-1'>Age Range</option>
           <option value='6' title='Preyears'>Pre</option>
           <option value='7' title='Kids'>Kids</option>
           <option value='8' title='Tween'</option>
           <option value='9' title='Adult'>Adult</option>
        </select>
   </div> 
```

并且它不适用于您的 android（显示您想要选择的选项的本机抽屉），那么它可能是关于您的标签 DIV 的 CSS 问题，在本例中它将是“.multiselect”。缺少的可能是“指针事件”，请参阅此文档：[https ://developer.mozilla.org/en/docs/Web/CSS/pointer-events](https://developer.mozilla.org/en/docs/Web/CSS/pointer-events)

如果您将 CSS 更新为如下所示：

```
.multiselect{
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        left: 0;
        pointer-events: none;
        cursor: pointer;
        line-height: 40px;
    } 
```

然后它应该可以工作，允许您单击选择并显示带有多选选项的抽屉（基本上是本机多复选框）。

希望这对你有用。

我和我的同事[Basem](https://stackoverflow.com/users/4487191/basem)一起工作，它对我们有用。

干杯，

CG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:13:18.833

我从我的一位朋友那里听说过这个修复，他说设置

```
style.display=block 
```

动态设置 HTML 后此下拉列表的属性将解决此问题。

如果您有多个下拉菜单，则使用

```
document.getElementsByTagName('select') 
```

# multithreading - 在冷融合页面中使用带有线程的 cfc

> ID：11799509
> 
> 赞同：1
> 
> 时间：2012-08-03T16:16:56.697
> 
> 标签：multithreading, coldfusion, cfc

我有一个包含许多功能的组件“bulletin.cfc”。

我的主页上有两个使用 cfthread 标签运行的线程。

来自.net，我想我会创建组件的两个实例，并在每个线程中使用一个。这样他们就不会互相干扰，我也不需要担心在函数中加锁。

```
<cfset bullObj = new bulletin()>
<cfset bullObj2 = new bulletin()> 
```

它是否正确？

编辑：

到目前为止，感谢您的回答，但我仍然无法理解与此相关的问题。我在两个单独的 cfthread 元素中有以下代码：

```
<cfset listCount = 1>
    <cftry>
    <cfquery name="ins" datasource="#datasourceVar#" >
        INSERT INTO element_user_shown
        (elementid, userid, date_shown)
        (
        <cfloop list="#elementIDList#" index="lcv">
        SELECT #lcv#, #tmpuserid#, GETDATE()
            <cfif listCount LT listlen(elementIDList)>
                UNION ALL
            </cfif>
        <cfset listCount = listCount + 1>
        </cfloop>   
        )               
    </cfquery> 
```

这会每晚运行大约 70,000 次，但每次都会出现大约 3-4 个错误。检查看起来像错误的sql

```
 INSERT INTO element_user_shown
                        (elementid, userid, date_shown)
                        (

                            SELECT 621, 267509, GETDATE()

                            UNION ALL

                            SELECT 586, 267509, GETDATE()

                            UNION ALL

                            SELECT 594, 267509, GETDATE()

                            UNION ALL

                            SELECT 613, 267509, GETDATE()

                            SELECT 622, 267509, GETDATE()

                            SELECT 599, 267509, GETDATE()

                            SELECT 602, 267509, GETDATE()                               

                        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:26:47.710

您是正确的，您的实例是通过引用传递的，因此*可能*存在并发问题。但是，如果您的函数参数被正确参数化并且您没有将属性作为实例的一部分进行更改（换句话说，这是一个接口而不是 bean），您可以安全地重用同一个实例。每个函数调用都是它自己的范围，其中的变量和返回的变量都是函数调用的生命周期。

# ruby-on-rails - 如何在 fields_for 中引用符号的活动记录关系

> ID：11799510
> 
> 赞同：0
> 
> 时间：2012-08-03T16:17:01.190
> 
> 标签：ruby-on-rails, ruby, block, relationship, erb

在 fields_for 块内，我如何引用关系字段的值。

例如：

**应用程序/模型/cart.rb**

```
class Cart < ActiveRecord::Base
  attr_accessible :lineitems_attributes
  has_many :lineitems, dependent: :destroy
  accepts_nested_attributes_for :lineitems

  def total_price
    lineitems.to_a.sum { |item| item.total_price }
  end
end 
```

**应用程序/模型/lineitem.rb**

```
class Lineitem < ActiveRecord::Base
  attr_accessible :cart_id, :quantity, :package_id, :part_id
  belongs_to :cart
  belongs_to :package
  belongs_to :part

  def total_price
    if package_id?
      return package.price * quantity
    end

    if part_id?
      return part.price * quantity
    end
  end
end 
```

**应用程序/模型/package.rb**

```
class Package < ActiveRecord::Base
  attr_accessible :description, :img_src, :name, :price
  has_many :lineitems
end 
```

**app/views/cart/_form.html.erb**

```
<%= form_for @cart do |f| %>
  <%= c.fields_for :lineitems do |i| %>
    <%= render 'lineitem_fields', :f => i %>
  <% end %>
  <%= c.submit %>
<% end %> 
```

**app/views/cart/_lineitem_fields.html.erb**

```
<%= f.text_field :quantity %>

<% if :package_id? %>
  <%= f.text_field :package_id %>
<% else %>
  <%= f.text_field :part_id %>
<% end %>

<%= link_to 'Remove',
         lineitem_path(:id),
         :method => :delete,
         :confirm => t('.confirm', :default => t("helpers.links.confirm",
         :default => 'Are you sure?')) %> 
```

**图式的相关片段**

```
create_table "carts", :force => true do |t|
  t.integer "branch_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end

create_table "lineitems", :force => true do |t|
  t.integer "cart_id"
  t.integer "part_id"
  t.integer "package_id"
  t.integer "quantity", :default => 1
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end

create_table "parts", :force => true do |t|
  t.string "description"
  t.string "partNumber"
  t.decimal "price"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end

create_table "packages", :force => true do |t|
  t.string "description"
  t.string "name"
  t.string "img_src"
  t.decimal "price"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end 
```

上述表格有效，但......

问题 1：如何显示 package.name 而不是 :package_id

问题2：如何在表格中显示每个lineitem的total_price。这是一种如何工作的方法？

问题 3：是否有以发票外观方式显示表单的最佳做法，其中数量可能是文本字段，但其余列只是文本或标签？

最终游戏场景是此表单将是在提交订单之前编辑购物车数量（或删除订单项）的最后机会。显然，在现实世界中，您希望显示数量、包装名称、描述和价格，但我似乎无法弄清楚如何在表单中显示这些值，因为它们按关系位于另一个模型中，而不是特定于 lineitems。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:08:07.253

您正在寻找 ActionView::Helpers::ActiveModelInstanceTag#object 方法。这使您可以访问表单内的任何地方的 ActiveRecord。

1

```
<% if f.object.package_id? %>
  <%= text_field_tag :package_name, f.object.package.name %>
  <%= f.hidden_field :package_id %>
<% else %> 
```

2`<%= f.object.total_price %>`

3 也许尝试`:readonly => true`除数量之外的所有输入标签上的选项？

# python - 用python写大的netCDF4文件？

> ID：11799511
> 
> 赞同：1
> 
> 时间：2012-08-03T16:17:01.580
> 
> 标签：python, numpy, netcdf

我正在尝试将 netCDF4 包与 python 一起使用。我正在摄取近 2000 万条数据记录，每条 28 字节，然后我需要将数据写入 netCDF4 文件。昨天，我尝试一次完成所有操作，执行一个小时左右后，python 停止运行代码并显示非常有用的错误消息：

```
Killed. 
```

无论如何，对数据的子部分执行此操作，很明显在 2,560,000 条记录和 5,120,000 条记录之间的某个地方，代码没有足够的内存并且必须开始交换。当然，性能会大大降低。所以有两个问题：1）有人知道如何使这项工作更有效吗？我在想的一件事是以某种方式逐步放入数据的子部分，而不是一次全部完成。有谁知道该怎么做？2）我推测“Killed”消息是在内存最终耗尽时发生的，但我不知道。任何人都可以对此有所了解吗？

谢谢。

附录：netCDF4 提供了这个问题的答案，你可以在我给自己的问题的答案中看到。所以目前，我可以继续前进。但这里有另一个问题：netCDF4 的答案不适用于 netCDF3，而且 netCDF3 也不会消失。任何人都知道如何在netCDF3的框架中解决这个问题？再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:13:13.363

不看代码很难判断你在做什么，但你可以尝试`sync`在将一些数据写入文件后使用命令将内存中的数据刷新到磁盘：

[http://netcdf4-python.googlecode.com/svn/trunk/docs/netCDF4.Dataset-class.html](http://netcdf4-python.googlecode.com/svn/trunk/docs/netCDF4.Dataset-class.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:32:33.277

netCDF4 中有一个现成的答案：用一些指定的“块大小”声明 netCDF4 变量。我用了10000，一切都进行得很好。正如我在回答的编辑中指出的那样，我也想找到一种在 netCDF3 中解决此问题的方法，因为 netDF3 还远未消亡。

# d - 确保每个结构都有唯一的序号

> ID：11799513
> 
> 赞同：1
> 
> 时间：2012-08-03T16:17:05.663
> 
> 标签：d

我希望能够创建结构，每个结构都有一个指示结构（而不​​是对象）顺序的成员。应该没有运行时开销，并且我应该能够在编译时使用序数。

simples 方法不起作用，因为由于某种原因静态变量在编译时不起作用：

```
int nextOrdinal() {
  static int ordinal;
  return ordinal++;
}

struct S1 {
  enum ordinal = nextOrdinal();
}

struct S2 {
  enum ordinal = nextOrdinal();
} 
```

目前，如何创建结构对我来说并不重要。问题似乎是不可能在编译时保留状态，对吗？

[-- 灵感来自 Boost.units 维度分析。](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_units/Dimensional_Analysis.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:34:45.200

编译时没有变量（CTFE 函数内部的特殊情况除外）——一切都必须是常量。此外，允许 CTFE 变量变为静态并污染解释环境将是一个非常不确定的设计选择。

部分问题是编译器（据我所知）对各种代码单元的编译顺序没有做出任何保证，甚至（将来）可能能够并行编译片段。通常，您需要将编译时编程视为非常严格的功能环境，具有小范围的灵活可变性（在 CTFE 函数内部）。为确保一致性，支持 CTFE 的函数必须是纯函数，并且“执行的表达式不得引用任何全局或局部静态变量”。[http://dlang.org/function.html#interpretation](http://dlang.org/function.html#interpretation)

简而言之，我认为没有任何方法可以让编译器为您存储此状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:19:15.003

我不知道执行此操作的可靠方法，但如果您想根据它们在源文件中的位置对它们进行排序，您可以这样做：

```
import std.conv;
import std.stdio;

size_t nextOrdinal(size_t line = __LINE__)()
{
    return line;
}

struct S1 {
    enum ordinal = nextOrdinal();
}

struct S2 {
    enum ordinal = nextOrdinal();
}

void main()
{
    writeln(S1.ordinal);
    writeln(S2.ordinal);
} 
```

如果您有多个文件调用，`nextOrdinal`您最终可能会得到具有相同序数值的结构定义。您也可以考虑对文件名进行编码：

```
size_t nextOrdinal(string file = __FILE__, size_t line = __LINE__)()
{
    size_t res;

    foreach (ch; file)
        res += ch;

    return res + line;
} 
```

# php - 一个在同一个地方更新的 PHP 计算器

> ID：11799514
> 
> 赞同：0
> 
> 时间：2012-08-03T16:17:07.253
> 
> 标签：php, javascript, calculator

我最初打算创建一个经典的“键入时更新”基于 Javascript 的养老金计算器，但不希望用户能够通过下载 .js 文件来查看业务逻辑。但是，似乎没有一种可靠的方法来保护 .js 文件中的业务逻辑。

因此，我现在打算将计算逻辑放在 PHP 中的服务器上。关于创建提交到列出输出的另一个页面的表单有很多材料。但是，我的计算器是主页上的一个侧边栏，我希望用户单击“计算”并将结果显示在同一个框中，而不会被带到单独的页面。

这是可行的吗？如果可行，您会建议什么作为解决方案的架构？（例如，将计算逻辑保存在 .php 中，并且仍然使用 xyz 等通过 Javascript 调用它）。寻找指导和设计建议。目标是一个具有相当复杂逻辑但没有数据库查找的计算器，最重要的是，用户不得移动到单独的页面。

非常感谢。2012 年 8 月 3 日

编辑（2012 年 12 月 17 日）：四个月后，我终于破解了它！看看 www.pencalc.org，它演示了我正在尝试构建的内容。使用 Javascript 异步调用基于 PHP 的计算。谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:26:26.303

knittl 和 sachleen 将您推向了正确的方向，但我觉得需要一个更完整的答案。

如果您不想将业务逻辑暴露给最终用户，您可以使用 js/AJAX 自动将表单提交给 PHP 脚本。该脚本然后为计算器计算一些值，然后只打印该值（例如，20.45 美元）。你的 JS 最终会看到来自 PHP 脚本的响应。从服务器获得值后，将该值转储到计算器的相关字段中。现在用户可以看到的只是一堆将用户数据发布到 PHP 脚本的 JS。

但是，我会看看[JQuery](http://jquery.com/)，它有助于自动化 AJAX 的许多工作以及任何涉及操作 DOM 的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:29:08.797

您可以在 JavaScript 中没有业务逻辑的情况下执行此操作：

1.  [使用jQuery .data](http://api.jquery.com/jQuery.data/)或类似的东西保存每个用户操作的内容
2.  当用户单击计算时，通过 AJAX 将此数据发送到 PHP 脚本
3.  PHP 处理请求并输出结果。
4.  javascript 将结果放回 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:32:15.643

您的业​​务逻辑将在您的 PHP 页面中。它将从`$_POST`数组中获取输入并处理数据，并回显输出。

看看 jQuery[`.post()`](http://api.jquery.com/jQuery.post/)关于如何发出 POST 请求。您使用输入发出请求，然后从 PHP 获得输出。然后你可以使用[`.text()`](http://api.jquery.com/text/)or[`.val()`](http://api.jquery.com/val/)或类似的东西来显示数据。

# ios5 - ExtAudioFileRead，转换，循环

> ID：11799516
> 
> 赞同：2
> 
> 时间：2012-08-03T16:17:24.607
> 
> 标签：ios5

我在这里有一个令人毛骨悚然的时刻，试图使用循环缓冲区调整 MixerHost 示例代码以提高内存效率。但是，当我将代码从读取整个音频文件更改为仅读取一块 4K 字节时，问题似乎就出现了。音频文件确实被压缩了，所以 clientFormat 是 LPCM 并且发生了隐式转换，就像在示例代码中一样。但是当我读取较小的块时，收集到 bufferList (AudioBufferList *) 中的数据似乎有所不同。它取决于 ExtAudioFileRead() 调用中的 number_of_frames 参数：

```
ExtAudioFileRead (
                  audioFileObject,
                  &numberOfFramesToRead, // <- this set to chunk size in bytes
                  bufferList   // <- contains 2 buffers, 1 chan each for L, R
                 ); 
```

问：要读取的帧数是否应该表示 OUTPUT 格式中的数字？那么，如果我指定 1024 帧，我将获得 1024 个 L、R 样本读取为简单的 LPCM 格式？问：为什么每次读取的帧数不同会得到不同的结果？

开发工具包：iOS 5.1

# javascript - jqGrid搜索格式化日期

> ID：11799518
> 
> 赞同：1
> 
> 时间：2012-08-03T16:17:33.560
> 
> 标签：javascript, jquery, datetime, jqgrid, formatting

我正在格式化的 jqGrid 中有一个日期列。另外，我有一个工具栏搜索。我遇到的问题是当我在搜索栏中输入数据以搜索格式化的日期数据时，它不会搜索格式化的日期，它可能会搜索预先格式化的日期。

有什么方法可以搜索格式化的日期，还是在将数据插入 jqGrid 之前必须尝试格式化它？

编辑：一些代码

```
var gridLayout = [
        {name: "name", index: "name", width: "250px"},
        {name: "state", index: "state", width: "50px", hidden: true},
        {name: "stateName", index: "stateName", width: "100px", hidden: true,
            sorttype: function(cellValue, rowObj) {
                return rowObj.state;
            }},
        {name: "stateImg", index: "stateImg", width: "50px", align: "center",
            sorttype: function(cellValue, rowObj) {
                return rowObj.state;
            }},
        {name: "launchDate", index: "launchDate", width: "150px", sorttype: "date",
            formatter: 'date', formatoptions: {srcformat: "ISO8601Long", newformat:"n/j/Y, g:i:s A"}},
        {name: "lastWorked", index: "lastWorked", width: "150px",
            formatter: 'date', formatoptions: {srcformat: "ISO8601Long", newformat:"n/j/Y, g:i:s A"}}
    ]; 
```

我在 launchdate/lastworked 元素上方使用工具栏搜索，我正在尝试以“newformat”字段中指定的格式搜索日期，但这样做时它不会回复任何数据。

运行测试后，它确实使用旧格式进行搜索。

编辑：

我在这里找到了一个在线示例：[http ://www.ok-soft-gmbh.com/jqGrid/MarkR.htm](http://www.ok-soft-gmbh.com/jqGrid/MarkR.htm)

如果您在日期搜索栏中输入 10/31/2007 并按 Enter，则不会出现任何内容。但是，如果您键入 2007-10-31 并按 Enter，则包含单元格 10/31/2007 的行确实会出现在搜索结果中。这就是我正在努力解决的问题。

编辑：这是 jqGrid 4.4.0，jQuery 1.7.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:04:21.037

jqGrid在本地搜索/过滤期间使用内部函数[parseDate 。](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L82-139)该实现是非常专有的。我在函数中发布了许多错误修复。例如，[在上一个](http://www.trirand.com/blog/?page_id=393/bugs/dateformat-works-wrong-if-the-source-format-contains-j-n-f-m-a-or-a/#p26323)`j`中，我建议对您使用的支持和`n`格式进行一些更改。错误修复包含在您使用的当前版本 4.4.0 中。

不幸的是，jqGrid 的当前版本（4.4.0）仍然不支持`g`您使用的格式。当前仅`h`支持格式。例如，要`g`支持格式，可以包括以下行

```
if(format[k] === 'g') {
    tsp.h = parseInt(date[k],10);
} 
```

在与. [_](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/grid.base.js#L127)`if(date[k] !== undefined) {`

您如何[在演示](http://www.ok-soft-gmbh.com/jqGrid/SearchDate1.htm)中看到修改后的代码将起作用：

![在此处输入图像描述](../Images/cc95fd2bd65c12663080a71b72436a03.png)

我在演示中使用的固定版本`jquery.jqGrid.src.js`你可以在[这里找到](http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.0/js/jquery.jqGrid.src-fixed.js)。

**更新**：写完答案后，我向 trirand发布[了以下错误报告。](http://www.trirand.com/blog/?page_id=393/bugs/formatter-g-is-not-supported-in-local-searching/#p27070)我想告诉大家它现在包含在 jqGrid 的主代码中（见[这里](https://github.com/tonytomov/jqGrid/commit/bd612d7a37ed522371489d9e53947ed4d26b32f0)）。所以jqGrid的下一个版本（4.4.0之后的下一个）会支持`g`日期中的格式。

# assembly - 带有 -m32 标志的库的 Makefile

> ID：11799529
> 
> 赞同：0
> 
> 时间：2012-08-03T16:18:29.673
> 
> 标签：assembly, makefile

每次我想使用库执行程序时，我都必须在终端上运行这 4 个命令。

线条是

```
cc -m32 -c mylib.c
ar -rcs libmylib.a mylib.o
cc -m32 -c prog.c
cc -m32 prog.o -L. -lmylib
./a.out 
```

如何为上述命令制作一个 makefile 并运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:55:16.813

这很简单：

```
CFLAGS=-m32
ARFLAGS=-rcs

.PHONY: all clean

all: prog

mylib.o: mylib.c
libmylib.a: mylib.o
    ar $(ARFLAGS) $@ $^

prog.o: prog.c
prog: prog.o libmylib.a

clean:
    rm -f *.o prog libmylib.a 
```

# asp.net-mvc-3 - 在 razor 中使用 @if 时出错

> ID：11799533
> 
> 赞同：2
> 
> 时间：2012-08-03T16:18:50.503
> 
> 标签：asp.net-mvc-3, razor

当我尝试在 razor 中使用 if 子句时出现错误，如下所示：

“@”字符后出现意外的“if”关键字。

```
@foreach (var item in Model) {
@if (item.Country != "No Country")
{
    <li>@Html.ActionLink(item.CountryWithCount, "IndexByProv", "EventInfo", new { country = item.Country }, null)</li> 
```

为什么我得到这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T16:19:59.050

您不需要`@` ，因为您已经在代码块中。

```
@foreach (var item in Model) {
  if (item.Country != "No Country")
  {
    <li>something</li>
  }
} 
```

# c++ - C++ 预处理器包含并定义多个文件的问题

> ID：11799534
> 
> 赞同：0
> 
> 时间：2012-08-03T16:18:52.577
> 
> 标签：c++, c-preprocessor

我将抽象我的问题以避免包含不需要的细节，但如果需要，我可以提供源代码。我正在使用视觉工作室。

### 我有以下文件 - 所有头文件都有 #pragma 一次：

*   A.cpp //（包含我的主要功能）
*   溴化氢
*   B.cpp //（不扮演任何角色）
*   通道
*   C.cpp

### 以下是预处理器命令的设置方式：

```
A.cpp   #defines UseOptionOne
A.cpp   #includes B.h

B.h     #ifdef UseOptionOne   
            #defines Func as f1() //(calling a function that prints a msg)   
        #else                 
            #defines Func as [blank]  

A.cpp   #includes C.h
C.h     #includes B.h     // (B.h have #pragma once, so it doesnt get included again) 
```

### 以下是函数调用的设置方式：

```
A.cpp   main function uses Func          //- It prints as intended 
A.cpp   calls function in C.cpp // this function does the following:
        {
           #ifndef UseOptionOne
             exit(0)                    //- Doesn't happen, so UseOptionOne is defined
           #endif   
           uses Func                        //- DOES NOTHING?????
        }
A.cpp   uses Func                       //- It prints as intended 
```

我不明白这怎么可能？确认 UseOptionOne 仍然在 Ch 中定义，但 Func 定义不同？？？

谁能解释一下？或者你想让我为你提供我相当复杂的解决方案或一些代码片段吗？

我真的迷路了:(

编辑：我已经使用断点来确认调用了 C.cpp 函数，'Func' 被简单地视为空白

EDIT2：由于缺乏声誉，我无法回答我自己的问题，所以我把它放在这里：
我创建了一个实现我的抽象描述的新项目，它确实触发了#ifndef 中的退出
所以你们中的任何人都无法用这个描述解决问题。我将不得不再次查看所有内容并找到错误/错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:29:29.780

我的两分钱：

UseOptionsOne 仅针对 A.cpp 和包含 Ah 的类定义：在您的情况下，它仅在 A.cpp 中定义

C.cpp 没有引用 Ah，所以它看不到定义。在这种情况下，UseOptionOne 没有在 C.cpp 中声明，它使用空白函数。

当您离开 C.cpp 的范围，并在 A.cpp 的范围内返回时，该函数起作用，因为在该范围内定义了 UseOptionOne。

如果您想在所有文件中使用定义，您可以创建一个单独的 definitions.h 头文件并将定义放入其中，然后将该文件包含在您希望定义对其起作用的所有头文件中。

# javascript - JavaScript中货币值的正则表达式

> ID：11799539
> 
> 赞同：11
> 
> 时间：2012-08-03T16:19:31.500
> 
> 标签：javascript, regex

有一段时间没玩了`regex`。试图想出一些允许用户输入货币价值的东西，无论是带/不带美元符号还是带/不带逗号。例如，以下所有值都应该是有效的：

```
5
5.1
5.10
$5
500,000
500,000.1
500,000.10
$100,000,000.50
etc.... 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-03T16:24:46.943

这应该有效：

```
isValid = str.search(/^\$?[\d,]+(\.\d*)?$/) >= 0; 
```

对逗号放置更严格一些（例如，将拒绝 3,2.10）：

```
isValid = str.search(/^\$?\d+(,\d{3})*(\.\d*)?$/) >= 0; 
```

要从中得到一个数字：

```
if(isValid) {
  var num = Number(str.replace(/[\$,]/g, ''));
  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:42:08.297

我没有使用 Qunit 框架测试驱动开发，TDD。

TDD 概述[http://net.tutsplus.com/tutorials/javascript-ajax/test-driven-javascript-development-in-practice/](http://net.tutsplus.com/tutorials/javascript-ajax/test-driven-javascript-development-in-practice/)

第一：编写测试。

第二：手表测试失败。

第三：使测试通过。

第四：重构。

```
var moneyTest_RE = /^\$?\d+((,\d{3})+)?(\.\d+)?$/;
test("test money format for valid values", function () {
    var moneyArr = ["5","5.1","5.10","$5","500,000","500,000.1","500,000.10","$100,000,000.50", "500,000,100" ];
    var i = moneyArr.length;

    while( i-- ){
        equal( moneyTest_RE.test( moneyArr[ i ] ), true, moneyArr[ i ] + " didn't match completely." );
    }
});
test("test money format for invalid values", function () {
    var moneyArr = ["5..","$$5.1",".5.10","$5.2.","50,0,000",",500,000.1","500,000,10,","$1,00,000,000.50", "500,000,10"];
    var i = moneyArr.length;

    while( i-- ){
        equal( moneyTest_RE.test( moneyArr[ i ] ), false, moneyArr[ i ] + " didn't match completely." );
    }
}); 
```

这是您的问题的一种可能的解决方案。

```
var moneyTest_RE = /^\$?\d+((,\d{3})+)?(\.\d+)?$/; 
```

在这里演示：http: [//jsfiddle.net/vpyV6/](http://jsfiddle.net/vpyV6/)

不过我忘了重构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-09T15:18:15.653

`^(\$?\d{1,3}(?:,?\d{3})*(?:\.\d{2})?|\.\d{2})?$`

这个花了一段时间，但我终于得到了一些功能齐全的东西。它允许 100.00、.35、$1.35 等情况。同时排除逗号错位、逗号之间或之前的数字过多或小数点后数字过多的条目。

[你可以在这里](https://regex101.com/r/gN7cM9/3)玩

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:26:19.870

也许这个？ [http://refiddle.com/2tg](http://refiddle.com/2tg)

```
(\$?(:?\d+,?.?)+) 
```

另外，[http://refiddle.com/2ti](http://refiddle.com/2ti)；与 123,45.4.3 等数字不匹配的较长版本

```
^(\$?(:?\d+,?)+(?:.?\d+)?)$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-30T05:04:35.500

```
var currencyRegex = /^[$£€]\d+(?:\.\d\d)*$/g; 
```

示例：`$10 or £10 0r €10`但是如果您使用简单`10`，这将是错误的

# c++ - 在使用点运算符时触发强制转换运算符

> ID：11799540
> 
> 赞同：2
> 
> 时间：2012-08-03T16:19:32.313
> 
> 标签：c++, casting, implicit-conversion

我有一堂这样的课：

```
template<typename T>
class wrapper
{
public:
    operator const T & () const
    {
        return value;
    }
private:
    T value;
}; 
```

然后我将它与这样的结构一起使用：

```
struct point { float x; float y; };

//...

wrapper<point> myPoint;
std::cout << myPoint.x;// error: no member x or whatever. 
```

我想知道是否有办法允许这样做而无需执行 ((point)myPoint).x。我知道我可以重载 -> 运算符，但我不想这样做，因为它应该“假装”为非指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:26:59.563

您可以使用而不是实现*类似*的效果：`->``.`

```
template<typename T>
class wrapper
{
public:
    operator const T & () const // will this still be needed now?
    {
        return value;
    }

    T* operator->() { return &value; }
    T const* operator->() const { return &value; }

private:
    T value;
}; 
```

接着：

```
struct point { float x; float y; }

//...

wrapper<point> myPoint; // this needs to be initialised!
std::cout << myPoint->x; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T17:05:47.300

您不能按照您描述的方式让您的包装类伪装成一个真实的类。主要原因是成员选择(.) 运算符不能重载。

# .net - Visual Studio 调试器 2010 - 无法连接到 webdev 进程

> ID：11799545
> 
> 赞同：0
> 
> 时间：2012-08-03T16:19:45.637
> 
> 标签：.net, visual-studio-2010, debugging

我已经在互联网上搜索了与我相似的情况。我什么也没发现。

我在 Windows 7 上有 MS VS 2010 Pro。

我的问题是我无法将调试器连接到 WebDev.WebServer40.EXE 工作进程。如果我单击绿色调试按钮，firefox（或 IE）会打开，但会立即显示“无法连接到服务器”，并且 VS 就像从未按下该按钮一样。
如果我右键单击文件名并单击“在浏览器中查看”，一切正常。如果我随后尝试手动附加到该进程，则该进程被终止（查看任务管理器）并且我得到与点击调试按钮相同的错误。

现在，我可以导出我的 Web 应用程序并在 localhost 下使用 IIS 打开它。当我这样做时，我可以连接到 w2wp.exe 工作进程并以这种方式进行调试。

此外，我无法调试任何控制台应用程序。不出现画面。

输出窗口中没有好的信息。

我在事件查看器中找不到任何好的错误。

这一切都是从最近开始的。以前它工作得很好。在过去的几天里，我唯一做的就是卸载并重新安装 Visual SVN。目前已卸载。我还对 Visual Studio 进行了全面修复以尝试解决问题。我想不出我还有什么可以尝试的...

（注意，我的机器上也安装了 VS 2012 RC。它得到了完全相同的问题）。

**TLTR** VS Debugger 无法连接到它自己的工作进程（该进程在尝试时崩溃）。但它可以连接到 IIS w3wp.exe 工作进程。什么……？

# python - 将 xpath 输出拆分为两个变量以将其插入数据库的优雅方法

> ID：11799551
> 
> 赞同：1
> 
> 时间：2012-08-03T16:20:05.900
> 
> 标签：python, database, xpath, lxml, libxml2

我们有一个代码，它从我们的 tomcat 服务器中提取服务列表并将其插入到数据库中。基本上，代码将从具有以下结构的 html 结果中接收大量输出（100+ 个结果）：

```
<TABLE bgcolor=#dddddd border=1>
<TR>
<TD valign="top"><B>name</B></TD>
<TD>Loader</TD>
</TR>
<TR>
<TD valign="top"><B>enabled</B></TD>
<TD>true</TD>
</TR>
<TR>
<TD valign="top"><B>loadok</B></TD>
<TD>13</TD>
</TR>
</TABLE>
<TABLE bgcolor=#dddddd border=1>
<TR>
<TD valign="top"><B>name</B></TD>
<TD>tester</TD>
</TR>
<TR>
<TD valign="top"><B>enabled</B></TD>
<TD>false</TD>
</TR>
<TR>
<TD valign="top"><B>loadok</B></TD>
<TD>13</TD>
</TR>
</TABLE> 
```

以下是实际代码（有效）

```
#!/usr/bin/env python

import psycopg2
import urllib2
import base64
import sys
import re
import lxml.html as LH

con = None

try:

    con = psycopg2.connect(database='xx', user='xx',password='xx',host='vxx')
    cur = con.cursor()
    qry ="select iservers.env,iservers.family,iservers.prefix,iservers.iserver,iservers.login,iservers.password,services.service,"   +\
    "proxy_access.proxy_server,proxy_access.proxy_user,proxy_access.proxy_pass "        +\
    "from services,iservers,proxy_access where iservers.env='TEST' and services.id='2' "
    cur.execute(qry)
    data = cur.fetchall()

    for result in data:

        env      = result[0]
        family   = result[1]
        prefix   = result[2]
        iserver  = result[3]
        login    = result[4]
        password = result[5]
        service  = result[6]
        proxyHost = result[7]
        proxyUser = result[8]
        proxyPass = result[9]

        proxy_auth = "http://"+proxyUser+":"+proxyPass+"@"+proxyHost
        proxy_handler = urllib2.ProxyHandler({"http": proxy_auth})

        opener = urllib2.build_opener(proxy_handler)
        urllib2.install_opener(opener)
        request = urllib2.Request("http://"+iserver+service)
        base64string = base64.encodestring('%s:%s' % (login, password)).replace('\n', '')
        request.add_header("Authorization", "Basic %s" % base64string)
        response = urllib2.urlopen(request)
        html = response.read()

        ###################### CHANGE THIS TO USE A HTML PARSER
        regex = r"name</B></TD>\s<TD>(.*?)</TD>\s</TR>\s<TR>\s(.*)enabled</B></TD>\s<TD>(.*)</TD>"
        for m in re.finditer(regex,html):
            print "inserting\t"+iserver+"\t"+m.group(1)
            cur.execute("INSERT INTO pereirtc.package_status (env,family,iserver,prefix,package,status) values (%s,%s,%s,%s,%s,%s)",(env,family,iserver,prefix,m.group(1),m.group(3)))
            con.commit()
        ###################### END
except psycopg2.DatabaseError, e:
    print 'Error %s' % e
    sys.exit(1)

finally:

    if con:
        con.close() 
```

在 Stack Overflow 的帮助下，有人建议我将“更改此 ....”的块更改为 libxml。所以我得到了以下块来使用：

```
 doc = LH.fromstring(html)
  tds = (td.text_content() for td in doc.xpath("//td"))
  for td, val in zip(*[tds]*2):
      if td in ("name","enabled"):
          print (td,val) 
```

通过上面的示例，我得到了结果：

```
('name', 'Loader')
('enabled', 'true') 
```

我想要的是，使用 xpath 将结果插入到数据库中。由于我从 python 开始，我无法使用 xpath/libxml 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:46:24.107

我猜是这样的：

```
blah = [('name', 'Loader'), ('enabled', 'true')]
blahd = dict(blah)
cursor.execute('insert into blah (name, enabled) values(%(name)s, %(enabled)s)', blahd) 
```

或者，不使用命名值...：

```
cursor.execute('insert into blah (name, enabled) values(?, ?)', [i[1] for i in blah]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:49:39.147

我不确定你的意思是不是下面的简单操作，但是将结果分成两个变量是这样实现的：

```
doc = LH.fromstring(html)
tds = (td.text_content() for td in doc.xpath("//td"))
for td, val in zip(*[tds]*2):
    if td == "name":
        name = val
    elif td == "enabled":
        enabled = val

print name
print enabled 
```

# java - 泛型 - 迭代 ArrayList 时出现 ClassCastException

> ID：11799554
> 
> 赞同：1
> 
> 时间：2012-08-03T16:20:11.660
> 
> 标签：java, generics, for-loop

以下是我的代码。我正在查询 user_group 表并在列表中获取结果。我想迭代列表。但是得到如下异常。

```
 List<Group> list= empDAO.getStudentList();
    for(Group o :list){
        System.out.println("NAME :"+ o.getFirstName());
    } 
```

这是我的 DAO 方法

```
public List<Group> getStudentList() {
    System.out.println("INSIDE DAO");
    List<Group> groups = new ArrayList<Group>();

    List<Group> rows = jdbcTemplate.queryForList("select * from user_group");

    return rows;
} 
```

组类

```
public class Group {
    public Group() {
        // TODO Auto-generated constructor stub
    }

    private String firstName;

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
} 
```

我收到以下异常

```
Aug 3, 2012 9:22:47 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet mvc-dispatcher threw exception
java.lang.ClassCastException: java.util.LinkedHashMap cannot be cast to com.common.form.Group
        at com.common.controller.HelloWorldController.helloWorld(HelloWorldController.java:28)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:421)
        at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:136)
        at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:326)
        at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:313)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:619) 
```

谁能告诉如何解决这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T16:25:55.383

该行`jdbcTemplate.queryForList("select * from user_group");`返回 HashMap 列表，而不是 Group 项列表（您的 IDE 可能在该行显示警告）。

您可能想阅读有关 jdbcTemplate 的 Spring 文档，并且您可能想使用[RowMapper](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/RowMapper.html)将每一行转换为 Group 对象。

我还认为您想将该方法`jdbcTemplate.query(String sql, RowMapper rm)`用于您的用例，请检查[javadoc](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/JdbcTemplate.html#query%28java.lang.String,%20org.springframework.jdbc.core.RowMapper%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T16:28:33.897

`jdbcTemplate.queryForList`不返回 a `List<Group>`，它不知道 a`Group`是什么。它返回一个`List<Map<String,Object>>`行列表，每行一个从列名到其值的映射。

所以这样做：

```
for (Map<String,Object> m : jdbcTemplate.queryForList("select * from user_group")) {
    for (Map.Entry<String,Object> e : m.entrySet()) {
        String columnName = e.key;
        Object columnValue = e.value;
        ...build a Group somehow?...
    }
} 
```

# python - 在 Python 中打印一个函数？

> ID：11799557
> 
> 赞同：9
> 
> 时间：2012-08-03T16:20:24.607
> 
> 标签：python, python-2.x

在 python 中，一切都是对象，您可以轻松地传递它。

所以我可以这样做：

```
>> def b():
   ....print "b"
>> a = b
>> a()
   b 
```

但如果我这样做

```
a = print 
```

我明白了`SyntaxError`。为什么这样 ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-03T16:21:54.260

在 Python 2.x 中，print 是语句**而不是**函数。在 2.6+ 中，您可以使用`from __future__ import print_function`. 在 Python 3.x 中，它是一个可以传递的函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T16:22:39.650

在python2中，`print`是一个语句。如果你这样做`from __future__ import print_function`，你可以按照你描述的那样做。在 python3 中，您尝试的内容无需任何导入即可工作，因为 print 是一个函数。

这在[PEP3105中有介绍](http://www.python.org/dev/peps/pep-3105/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T16:24:01.097

The other answers are correct. `print` is a statement, not a function in python2.x. What you have will work on python3\. The only thing that I have to add is that if you want something that will work on python2 and python3, you can pass around `sys.stdout.write`. This doesn't write a newline (unlike `print`) -- it acts like any other file object.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T16:21:47.117

`print`不是 3.x python 之前的函数。它甚至不像一个，你不需要*调用*它`(params)`

# iphone - 滚动时 UITableViewCell 图像发生变化

> ID：11799561
> 
> 赞同：1
> 
> 时间：2012-08-03T16:20:33.123
> 
> 标签：iphone, ios, objective-c, uitableview

我有一个 UITableView，每个单元格上有一个标题和一个图像。一些单元格将具有默认图像，而其他单元格则没有。当我滚动表格时，某些行的图像不是预期的，而是显示另一行的图像而不是预期的图像。如果我不使用 dequeuereuseidentifier 一切正常，但我想使用它，因为我有很多单元格。

有什么建议吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];

        CGRect titleRect = CGRectMake(60, 6, 200, 24);
        UILabel *title = [[UILabel alloc] initWithFrame: titleRect];
        title.tag = 1;
        title.backgroundColor = [UIColor clearColor];
        title.font = [UIFont fontWithName:@"AdelleBasic-Bold" size:15.5];
        [cell.contentView addSubview:title];

        UIImageView *defaultCellImage = [[UIImageView alloc] initWithFrame:CGRectMake(8, 10, 42, 42)];
        defaultCellImage.tag = 2;
        [defaultCellImage setImage:[UIImage imageNamed: @"Default_Row_Image"]];
        [cell.contentView addSubview:defaultCellImage];
    }

    NSUInteger row = [indexPath row];
    Movie *movie = [_movies objectAtIndex: row];

    UILabel *titleRowLabel = (UILabel *) [cell.contentView viewWithTag:1];
    titleRowLabel.text = [movie title];

    UIImageView *cellImage = (UIImageView *) [cell.contentView viewWithTag:2];
    if (![movie.imageName isEqualToString:@""])
        [cellImage setImage:[UIImage imageNamed: [movie imageName]]];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:52:00.710

表格视图中使用的第一个单元格将被正确加载。由于没有要出列的单元格，因此`if (cell == nil)`将返回`YES`并且您的单元格将其图像设置为默认值。然后，如果您在该方法后面设置不同图像的条件得到满足，则会显示不同的图像。到现在为止还挺好。

但是，当一个可重用单元出列时，它已经有一个图像集，这可能不是默认值。由于`cell == nil`现在将返回`NO`，因此该单元格将永远不会将其图像重置为默认图像，即使它是应该显示的图像。

# php - 修复并保存后，Eclipse 源代码行错误标记不会消失

> ID：11799564
> 
> 赞同：0
> 
> 时间：2012-08-03T16:20:44.560
> 
> 标签：php, eclipse, macos

我在 MacOS 10.7 上使用 Eclipse for PHP developers v 3.0.2
这种情况经常发生，我正在写一行代码，eclipse标记了一个错误，我完成了这一行，代码是正确的，我保存了文件，但是标记仍然存在。
这不像缓存在几秒钟内赶上然后删除标记，不，标记永远保留，即使在保存之后也是如此。
有时我删除整个函数，保存，然后再次粘贴该函数，然后标记不再出现。
屏幕截图显示的代码是正确的，与之前的代码没有大括号不平衡，在创建函数之前代码是正确的并且运行正确。
如果我剪切、保存和粘贴函数，它就会消失，如果只是删除大括号，它不会。会是什么呢？

![屏幕帽](../Images/b9f47feb9f9886a60ba8df33f96711ed.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-09T10:08:14.177

我知道这个问题很老，但对于有类似问题的人来说，我的解决方案是重新构建我的项目。右键单击-> 构建项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:22:30.097

我可以建议一些可以稍微减少烦恼的东西。这虽然不是解决办法，但可以消除十字架并放松您的思想。

此外，我的建议是基于 Java 编辑器的经验，而不是 PHP 编辑器。我想这两者的行为可能会有所不同。

eclipse 可以通过三种方式高亮代码错误。

1.  概述标尺
2.  垂直尺
3.  内联（即通过代码中的波浪线）

如果您删除其中一个，其他两个*应该*足以告诉您代码中存在错误。

在您的快照中，丑陋的红十字是 Eclipse 通过垂直标尺告诉您存在问题。要禁用此行为，请转到 Eclipse -> Preferences -> General -> Editors -> Text Editors -> Annotations 并*取消选中*“Vertical Ruler”，如下所示：

![禁用垂直标尺注释](../Images/187263a7cf85befd380321f6d7217288.png)

**更新**

看看**[这个](http://www.youtube.com/watch?v=IcT2FE76tMM)**截屏视频。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-09-27T08:07:46.450

右键单击并更新项目

# itunes-search-api - iTunes Search API - 正确的结果语言

> ID：11799566
> 
> 赞同：2
> 
> 时间：2012-08-03T16:20:51.577
> 
> 标签：itunes-search-api

我正在使用 iTunes API，但我遇到了问题。我在 den German store 中搜索（参数 country=de），但结果集中的描述是英语。有人知道获得德语描述的解决方法吗？它可用，iTunes 商店直接显示德语描述。它试图使用“lang”参数，但它被定义为只有“en_us”和“ja_jp”是可能的值。我依赖于[apple 的官方文档](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)。

这是 API 调用： http: [//itunes.apple.com/search ?term=angry+birds&country=de&entity=software](http://itunes.apple.com/search?term=angry+birds&country=de&entity=software)

对于第一个结果，这是 iTunes 网站中的详细信息页面：http: [//itunes.apple.com/de/app/angry-birds/id343200656 ?mt=8&uo=4](http://itunes.apple.com/de/app/angry-birds/id343200656?mt=8&uo=4)

* * *

不好意思，是我自己弄的。。。

你必须使用

> [http://itunes.apple.com/de](http://itunes.apple.com/) /search?term=angry+birds&country=de&entity= **software**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:39:55.853

像这样在 URL 路径前面加上`/de`：

```
http://itunes.apple.com/de/search?term=angry+birds&country=de&entity=software 
```

# jquery - JQuery UI 可拖动克隆以映射

> ID：11799567
> 
> 赞同：1
> 
> 时间：2012-08-03T16:20:53.187
> 
> 标签：jquery, jquery-ui, grid, jquery-ui-draggable, jquery-ui-droppable

我正在制作某种网格地图编辑器，更多的是作为现在学习的实验并且遇到了一些问题。

情况：

*   我有一个 10px x 10px div 的 20x20 网格（可以是其他任何东西），黑色背景，全部可放置。
*   我在该网格之外有两个 div，一个灰色和一个绿色，可拖动，以填充网格，因为我想克隆它们。

当我拖动这两个特殊 div 中的一个并放入一个可放置的网格 div 时，我们称之为“drop1”，这个 drop1 变成了我想要的颜色，比如说绿色，但原来的绿色变得不可拖动，所以我不能使用它“填充”另一个可放置的 div。

这是我的 JS：

```
$(function() {
    $( ".draggable" ).draggable({
        revert: "invalid" ,
        helper: function(){
            $copy = $(this).clone();
            return $copy;},
        appendTo: 'body',
        scroll: false
    });
    $( ".droppable" ).droppable({
        hoverClass: "droppableHover",
        drop: function( event, ui ) {
            $( this )
                .removeClass( "droppable" )
                .addClass( function(){
                    if ($ui.hasClass('graycell'))
                        return 'graycell';
                    else return 'greencell';
                })
                .addClass( "draggable" )
        }
    });
}); 
```

这是一些 HTML：

```
 <div class="graycell draggable" id="gray"></div>
                    <div class="greencell draggable" id="green"></div> 

<div title="(0,0)" class="cellborder droppable" id="0_0"></div>
<div title="(0,1)" class="cellborder droppable" id="0_1"></div>
<div title="(0,2)" class="cellborder droppable" id="0_2"></div>
<div title="(0,3)" class="cellborder droppable" id="0_3"></div>
<div title="(0,4)" class="cellborder droppable" id="0_4"></div>
<div title="(0,16)" class="cellborder droppable" id="0_16"></div> 
```

我不确定我是否已经很好地解释了自己，所以很抱歉，如果您需要，请要求澄清。

**编辑：**

我发现当我不在可放置元素的 .addClass() 方法中使用函数时（比如直接使用 .addClass('gray') ），这可以按我的意愿工作，但是当我添加函数时（如上面显示的代码）从两个类中选择，它不起作用，就像它实际上不是“克隆” div。

# ravendb - 使用 TransformResults 从 RavenDB 中选择分层数据？

> ID：11799570
> 
> 赞同：2
> 
> 时间：2012-08-03T16:21:02.530
> 
> 标签：ravendb

我有一个简单的类层次结构，如下所示：

```
public class Top
{
    public string Id { get; set; }
    public string Description { get; set; }
    public List<Middle> Middles { get; set; } 
}

public class Middle
{
    public string Id { get; set; }
    public string Description { get; set; }
    public List<Bottom> Bottoms { get; set; } 
}

public class Bottom
{
    public string Id { get; set; }
    public string Description { get; set; }
} 
```

整个事物被保存为“Top”类型的实体。文档旨在保留和反映关系/层次结构，但有一半但有时我会只关心给定关系的“Id”和“Description”。所以，我想要运行的查询类型是

*   选择所有顶部，
*   选择所有中间，
*   选择中间，其中 Top.Id=somevalue
*   选择 Top.Id=somevalue 和 Middle.Id=somevalue 的底部

我希望将结果转换并返回给我，如下所示：

```
public class Result
    {
        public int Id { get; set; }
        public string Description { get; set; }
    } 
```

我怎样才能实现 TransformResults （我认为这是可以使用的功能）来实现这一点？我已经阅读了很多示例，但突然间我看到了参数/值，它们没有在任何地方声明，因此我不明白发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:14:03.387

TransformResults 无法访问外部世界，您无法根据您运行的查询执行逻辑。当然，您可以展平此结构，但除非您将创建具有不同 TransformResults 的多个索引，否则您不能这样做。请注意，这首先是一件奇怪的事情，因为它不符合将文档作为事务边界的标准建模。

# c# - “收益回报”概念的名称是什么？IEnumerable、迭代器、生成器？

> ID：11799572
> 
> 赞同：1
> 
> 时间：2012-08-03T16:21:06.120
> 
> 标签：c#, ienumerable, terminology, yield

`yield return`这个概念的正式名称到底是什么？

```
public IEnumerable<T> Bar() {
    ...
    yield return foo;
    ...
} 
```

我听说（读）它被称为：

*   迭代器
*   IEnumerabe
*   发电机
*   <你的选择>

迭代器不只是一些迭代某物的“东西”吗？A`List<T>` *是*一个`IEnumerable<T>`，所以看起来也不合理。

SO上有很多关于`yield return`使用这两个术语之一的答案。

“发电机”呢？还是仅当您“凭空想出值”时才适用，例如不需要数据收集作为来源的斐波那契数列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T16:25:16.520

作为非语言特定方式的一般概念，“生成器”可能是最常见的术语。如果我与不熟悉 C# 的人交谈，我会使用它。

该方法本身是C# 规范术语中的*迭代器。*实现是一个*迭代器块*。

从 C# 4 规范的第 10.14 节：

> 使用*迭代器块*（第 8.2 节）实现的函数成员（第 7.5 节）称为*迭代器*。

这是我在专门谈论 C# 时会使用的术语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T13:08:11.837

它的主要用途是“协程”。参见[维基百科](http://en.wikipedia.org/wiki/Coroutine)。

> 协程是计算机程序组件，它概括了子程序以允许在某些位置暂停和恢复执行的多个入口点。协程非常适合实现更熟悉的程序组件，例如协作任务、迭代器、无限列表和管道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:26:06.383

它被称为迭代器，查看这个[MSDN](http://msdn.microsoft.com/en-us/library/dscyy5s0.aspx)页面

> 迭代器是使用 yield 关键字对数组或集合类执行自定义迭代的方法、get 访问器或运算符

# sql - SQL Join 然后组合结果中的列

> ID：11799576
> 
> 赞同：0
> 
> 时间：2012-08-03T16:21:14.090
> 
> 标签：sql, db2

所以我有两个 db2 表。一个包含工作订单信息，如 id、请求者姓名、用户、描述等。第二个表包含注释，该表与另一个表的 id 相关。注释字段是一个 255 文本字段（是的，不建议更改它，我无法控制它）。因此，在注释字段中可能有多个结果或没有结果，这取决于显然有多少注释。

我有一个获取结果的查询。问题是我从连接中获得了多个结果，因为有多个条目。

所以我的问题是如何将注释表中的结果合并/合并到每个结果的一个字段中？谢谢

代码：

```
SELECT 
    p.ABAANB AS WO_NUMBER, 
    p.ABAJTX AS Description, 
    i.AIAKTX as Notes 
FROM 
    htedta.WFABCPP p LEFT JOIN  HTEDTA.WFAICPP i 
    ON i.AIAANB = p.ABAANB 
WHERE 
    p.ABABCD = 'ISST' AND p.ABAFD8 = 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:22:09.487

您使用的是哪个版本的 DB2？如果您使用的是 DB2 Linux/Unix/Windows (LUW)，那么这应该适合您：

```
SELECT p.ABAANB AS WO_NUMBER, 
       p.ABAJTX AS Description, 
      ,SUBSTR(
          xmlserialize(
             xmlagg(
                xmltext(
                   concat(',' , TRIM(i.AIAKTX))
                )
             ) AS VARCHAR(4000)
          )
          ,2) AS NOTES
FROM      htedta.WFABCPP p
LEFT JOIN HTEDTA.WFAICPP i 
       ON i.AIAANB = p.ABAANB 
WHERE p.ABABCD = 'ISST'
  AND p.ABAFD8 = 0
GROUP BY p.ABAANB,
         p.ABAJTX 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:27:11.603

你试过 LISTAGG

[https://www.ibm.com/developerworks/mydeveloperworks/blogs/SQLTips4DB2LUW/entry/listagg?lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/SQLTips4DB2LUW/entry/listagg?lang=en)

它将允许您合并所有那些导致额外记录的讨厌的字段......像这样的东西......

```
SELECT p.ABAANB AS WO_NUMBER, p.ABAJTX AS Description, LISTAGG(i.AIAKTX, ' ') as Notes 
FROM htedta.WFABCPP p 
LEFT JOIN  HTEDTA.WFAICPP i 
    ON i.AIAANB = p.ABAANB 
WHERE p.ABABCD = 'ISST' 
    AND p.ABAFD8 = 0
GROUP BY p.ABAAMB, p.ABAJTX 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:36:12.767

如果您运行的 DB2 至少为 9.7，那么您应该能够使用与此类似的 XMLAGG 功能

```
 WITH CombinedNotes( aiaanb, aiaktx) AS (
      SELECT aiaanb
        , REPLACE( REPLACE( 
              CAST( XML2CLOB(
                  XMLAGG( XMLELEMENT( 
                        NAME 'A'
                      , aiaktx
                  ))
              ) AS VARCHAR( 3000))
            , '<A>',''), '</A>', '')
        FROM Htedta.WfaIcpp)
    SELECT p.ABAANB AS WO_NUMBER, p.ABAJTX AS Description, i.AIAKTX as Notes 
      FROM htedta.WFABCPP p 
        LEFT JOIN  CombinedNotes i 
        ON i.AIAANB = p.ABAANB
      WHERE p.ababcd = 'ISST'
        AND p.abafd8 = 0; 
```

如果您有较早版本的 DB2，或者您的登录出于某种原因不允许使用 XML 功能，那么您可以使用递归查询来解决问题。以下博客中描述了这两种技术

[http://ibmmainframes.com/about44805.html](http://ibmmainframes.com/about44805.html)

# salesforce - Apex 触发器 Salesforce

> ID：11799577
> 
> 赞同：1
> 
> 时间：2012-08-03T16:21:18.787
> 
> 标签：salesforce

我需要在触发器中使用与联系人和客户对象相关的查找字段。我在联系人上有查找字段 Account__c，但是当我写类似的内容时，我无法获取该联系人的相关帐户

`Map <Id,Account> acts = new Map<Id,Account>([Select Id,Name from Account where Id:=contact.Account__c]);`

它应该让所有相关帐户都参与其中，但它不起作用..

如何获取相关账户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:31:21.740

除非这是一种特殊情况，您不需要在联系人和客户之间创建关系，否则已经有一个标准的关系。你可以这样查询

```
try {
    Account parent = [SELECT Id, Name FROM Account WHERE Id = :contact.AccountId];
} catch(QueryException e) {
    //list has no rows for assignment
    //means the account with Id could not be found
} 
```

有关 api 名称的更多信息，您应该查看[wsdl](https://login.salesforce.com/soap/wsdl.jsp)

顺便说一句，您不需要将此查询的结果传递给地图，只要您在 WHERE 子句中使用 Id = :idValue ，就可以保证您将获得正好 0 或 1 个结果，并且在0 结果将引发 QueryException。

# jaxb - 使用 Jersey 和 JAXB 的声明式超链接

> ID：11799580
> 
> 赞同：2
> 
> 时间：2012-08-03T16:21:21.533
> 
> 标签：jaxb, jersey, jax-rs

我正在尝试使用 Jersey 声明式超链接和 JAXB 来实现对我来说似乎相当简单的事情，但是尽管阅读了所有文档和示例，但我发现我无法让事情正常工作。

我有一家书店，每本书都有一个标题。我希望 GET /bookstore 只返回一组指向书籍的超链接，而 GET /bookstore/some-title 将返回实际的序列化书籍属性。

我对资源和“表示”以及@Ref 应该工作的方式完全感到困惑。设计这个最干净的方法是什么？

锦上添花将是能够基于查询参数获取书店集合的任一版本（仅具有书籍 URI 的浅层或具有实际书籍属性的深层）......

我试图将此方法添加到书店：

```
@XmlElement
public BookRef[] getBookReferences()
{
    BookRef[] refs = new BookRef[_books.size()];
    for (int i = 0; i < refs.length; i++) {
        refs[i] = new BookRef(_books.get(i).getTitle());
    }
    return refs;
} 
```

使用这个 BookRef 类：

```
@XmlRootElement(name="book")
public class BookRef
{
    private String _title;

    public BookRef()
    {
    }

    public BookRef(@PathParam("title") String title)
    {
        _title= title;
    }

    @Ref(resource=Book.class,
         style = Ref.Style.ABSOLUTE,
         bindings=@Binding(title="title", value="${instance.title}")
    )
    private URI _self;

    @XmlElement
    public URI getURI()
    {
        return _self;
    }
} 
```

...但这只会产生（在 JSON 中）： {"bookReferences":null}

# visual-studio-2008 - 如何跟踪特定用户进行的 TFS 签入

> ID：11799583
> 
> 赞同：1
> 
> 时间：2012-08-03T16:21:26.260
> 
> 标签：visual-studio-2008, tfs

有什么办法可以找出用户在一段时间内使用 TFS 进行的所有签入。 .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:22:43.060

没有 3rd 方附加组件的方式有两种：

1.  安装[TFS 2008 的 Team Foundation Server Power Tools](http://www.microsoft.com/en-us/download/details.aspx?id=15836)。然后在 Team Explorer 下，展开 Team Members。右键单击用户，然后单击显示签入历史记录。

2.  在 Visual Studio 命令行中，您还可以使用该`tf history`命令并对任何源路径执行此操作。这是一个示例，它以递归方式显示根源路径的日期范围内的提交：

    ```
    tf history "$/" /version:D"7/30/2012"~D"8/2/2012" /recursive /user:[USERID] /noprompt 
    ```

    将`/format:detailed`选项添加到该命令，它也会为您提供每次提交的文件级别更改。`/noprompt`如果您希望出现一个 GUI 窗口，您可以在其中右键单击每个变更集以查看详细信息，请删除。

# mysql - 带有比较运算符的 MySQL WHERE 子查询

> ID：11799599
> 
> 赞同：0
> 
> 时间：2012-08-03T16:22:16.087
> 
> 标签：mysql, sql

我试图从我们的订单表中检索客户和发票 ID 的列表，其中客户只有一个订单。下面的 SQL 返回零条记录，应该有几十条。如果我将有效的用户 ID 代入其中，子查询本身似乎可以正常工作。我一定是做错了什么，有什么帮助吗？

```
SELECT tblclients.id AS clientid, tblinvoices.id AS invoiceid
            FROM tblorders
            join tblinvoices ON tblorders.invoiceid = tblinvoices.id
            join tblclients ON tblorders.userid = tblclients.id
            WHERE (SELECT COUNT(*) FROM tblorders WHERE userid = tblorders.userid) = 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:24:51.233

我认为您的别名有问题。尝试添加 T1 别名：

```
SELECT tblclients.id AS clientid, tblinvoices.id AS invoiceid
            FROM tblorders T1
            join tblinvoices ON T1.invoiceid = tblinvoices.id
            join tblclients ON T1.userid = tblclients.id
            WHERE (SELECT COUNT(*) FROM tblorders WHERE userid = T1.userid) = 1; 
```

# android - 更改方向时的片段膨胀错误

> ID：11799602
> 
> 赞同：4
> 
> 时间：2012-08-03T16:22:19.503
> 
> 标签：android, crash, orientation, inflate, portrait

好的，问题来了，我有一个 Fragment Activity，里面有两个 Fragment。一个是 ListFragment，另一个是 Fragment。所以，我想根据选择的项目显示片段。这是问题所在。如果我在横向模式或纵向模式下启动此片段活动，它工作正常。无论如何，当我改变到另一个方向时，它总是崩溃。错误与充气机有关，类似于 onCreateView，但我查看了其他帖子，但没有其他解决方案，如 onConfigurationChanges、onSaveInstances、从名称更改为类。所有人都有相同的错误。所以，我希望有人帮助我。我确实有布局土地和布局，但仍然无法正常工作。

这是我的代码。

activity_pontix（陆地和纵向模式）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#CCFF99"
    android:orientation="vertical" >

    <TextView android:id="@+id/Pontix"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:gravity="center_horizontal"
        android:text="@string/pontix"
        android:background="#ffffff"
        android:textColor="#000000"
        android:textSize="40dp" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <fragment
            android:id="@+id/sideMenu"
            android:name="com.example.pontix.SideMenu"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="3" />

        <fragment
            android:id="@+id/content"
            android:name="com.example.pontix.ContentPreview"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1" />
    </LinearLayout>

</LinearLayout> 
```

SideMenu.java

```
public class SideMenu extends ListFragment
{
    OnMenuSelectedListener setSelected;

    public interface OnMenuSelectedListener 
    {
        public void onItemSelected(int position);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        int layout = R.layout.side_menu_item;

        setListAdapter(new ArrayAdapter<String>(getActivity(), layout, MenuItem.Items));
    }

    @Override
    public void onStart() 
    {
        super.onStart();

         if (getFragmentManager().findFragmentById(R.id.sideMenu) != null) {
                getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            }
    }

    @Override
    public void onAttach(Activity activity) 
    {
        super.onAttach(activity);

        try 
        {
            setSelected = (OnMenuSelectedListener) activity;
        } 
        catch (ClassCastException e) 
        {
            throw new ClassCastException(activity.toString() + " must implement OnMenuSelectedListener");
        }
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) 
    {
        setSelected.onItemSelected(position);

         // Set the item as checked to be highlighted when in two-pane layout
        getListView().setItemChecked(position, true);
    }
} 
```

内容预览.java

```
public class ContentPreview extends Fragment
{
    final static String ARG_POSITION = "position";
    int mCurrentPosition = -1;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
        if (savedInstanceState != null) 
        {
            mCurrentPosition = savedInstanceState.getInt(ARG_POSITION);
        }

        return inflater.inflate(R.layout.content_view, container, false);
    }

    @Override
    public void onStart() 
    {
        super.onStart();

        Bundle args = getArguments();
        if (args != null) 
        {
            updateContentPreview(args.getInt(ARG_POSITION));
        } 
        else if (mCurrentPosition != -1) 
        {
            updateContentPreview(mCurrentPosition);
        }
    }

    public void updateContentPreview(int position) 
    {
        switch(position)
        {
            case 1:
            {
                TextView article = (TextView) getActivity().findViewById(R.id.contentView);
                article.setText("Voce estava na aba Gincana");
                mCurrentPosition = position;
                break;
            }
            case 2:
            {
                TextView article = (TextView) getActivity().findViewById(R.id.contentView);
                article.setText("Voce estava na aba Tarefas");
                mCurrentPosition = position;
                break;
            }
            case 3:
            {
                TextView article = (TextView) getActivity().findViewById(R.id.contentView);
                article.setText("Voce estava na aba Ranking");
                mCurrentPosition = position;
                break;
            }
            case 4:
            {
                TextView article = (TextView) getActivity().findViewById(R.id.contentView);
                article.setText("Voce estava na aba Amigos");
                mCurrentPosition = position;
                break;
            }
            case 5:
            {
                TextView article = (TextView) getActivity().findViewById(R.id.contentView);
                article.setText("Voce estava na aba Perfil");
                mCurrentPosition = position;
                break;
            }
            case 6:
            {
                TextView article = (TextView) getActivity().findViewById(R.id.contentView);
                article.setText("Voce estava na aba Sobre");
                mCurrentPosition = position;
                break;
            }
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) 
    {
        super.onSaveInstanceState(outState);

        outState.putInt(ARG_POSITION, mCurrentPosition);
    }
} 
```

PontixActivity.java

```
public class PontixActivity extends FragmentActivity implements SideMenu.OnMenuSelectedListener 
{   
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_pontix);

        Intent intent = getIntent();
        int code = intent.getIntExtra(GincanaActivity.EXTRA_CONTENT,0);

        SideMenu sideMenu = new SideMenu();

        sideMenu.setArguments(getIntent().getExtras());

        getSupportFragmentManager().beginTransaction().add(R.id.sideMenu, sideMenu).commit();

        ContentPreview contentFragment = (ContentPreview) getSupportFragmentManager().findFragmentById(R.id.content);

        if (contentFragment != null) 
        {
            contentFragment.updateContentPreview(code);

        } 
    }

    public void onItemSelected(int position) 
    {
        switch(position)
        {
            case 0:
            {
                Intent contentView = new Intent(this, GincanaActivity.class);
                startActivity(contentView);
                break;
            }
            case 1:
            {
                Intent contentView = new Intent(this, TarefaActivity.class);
                startActivity(contentView);
                break;
            }
            case 2:
            {
                Intent contentView = new Intent(this, RankingActivity.class);
                startActivity(contentView);
                break;
            }
            case 3:
            {
                Intent contentView = new Intent(this, MainActivity.class);
                startActivity(contentView);
                break;
            }
            case 4:
            {
                Intent contentView = new Intent(this, MainActivity.class);
                startActivity(contentView);
                break;
            }
            case 5:
            {
                Intent contentView = new Intent(this, MainActivity.class);
                startActivity(contentView);
                break;
            }
        }
    }
} 
```

这是错误日志。

```
08-03 13:13:58.745: W/IInputConnectionWrapper(13847): showStatusIcon on inactive InputConnection
08-03 13:14:09.065: D/AbsListView(13847): Get MotionRecognitionManager
08-03 13:14:09.065: D/AbsListView(13847): Get MotionRecognitionManager
08-03 13:14:12.310: D/AndroidRuntime(13847): Shutting down VM
08-03 13:14:12.310: W/dalvikvm(13847): threadid=1: thread exiting with uncaught exception (group=0x40c661f8)
08-03 13:14:12.340: E/AndroidRuntime(13847): FATAL EXCEPTION: main
08-03 13:14:12.340: E/AndroidRuntime(13847): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.pontix/com.example.pontix.PontixActivity}: android.view.InflateException: Binary XML file line #21: Error inflating class fragment
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3365)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.app.ActivityThread.access$700(ActivityThread.java:128)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1165)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.os.Looper.loop(Looper.java:137)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.app.ActivityThread.main(ActivityThread.java:4514)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at java.lang.reflect.Method.invokeNative(Native Method)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at java.lang.reflect.Method.invoke(Method.java:511)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at dalvik.system.NativeStart.main(Native Method)
08-03 13:14:12.340: E/AndroidRuntime(13847): Caused by: android.view.InflateException: Binary XML file line #21: Error inflating class fragment
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:280)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.app.Activity.setContentView(Activity.java:1892)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at com.example.pontix.PontixActivity.onCreate(PontixActivity.java:13)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.app.Activity.performCreate(Activity.java:4562)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
08-03 13:14:12.340: E/AndroidRuntime(13847):    ... 12 more
08-03 13:14:12.340: E/AndroidRuntime(13847): Caused by: java.lang.IllegalStateException: Fragment com.example.pontix.SideMenu did not create a view.
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:295)
08-03 13:14:12.340: E/AndroidRuntime(13847):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
08-03 13:14:12.340: E/AndroidRuntime(13847):    ... 23 more
08-03 13:14:12.355: D/dalvikvm(13847): GC_CONCURRENT freed 152K, 3% free 13194K/13575K, paused 1ms+3ms
08-03 13:14:12.355: D/AbsListView(13847): [unregisterDoubleTapMotionListener]
08-03 13:14:12.355: I/MotionRecognitionManager(13847):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@419278a8
08-03 13:14:12.355: D/AbsListView(13847): [unregisterDoubleTapMotionListener]
08-03 13:14:12.355: I/MotionRecognitionManager(13847):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@4192d5e0
08-03 13:14:12.360: D/AbsListView(13847): [unregisterDoubleTapMotionListener]
08-03 13:14:12.360: I/MotionRecognitionManager(13847):   .unregisterListener : / listener count = 0->0, listener=android.widget.AbsListView$4@41963500 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:10:53.610

您的两个片段都需要公共的空构造函数：

```
public class SideMenu extends ListFragment
{
   public SideMenu(){}
   ...

public class ContentPreview extends Fragment
{
   public ContentPreview(){}
   ... 
```

# javascript - 将参数传递给参数

> ID：11799608
> 
> 赞同：2
> 
> 时间：2012-08-03T16:22:56.000
> 
> 标签：javascript, parameters, parameter-passing

我有以下内容：

```
html = html.replace(/[\d\.]+/g, ""); 
```

我想获取它的值`/[\d\.]+/g`并将其放在两者之间`""`，然后在它之后添加一些过度的乱码。

这可能吗？如果有怎么办？将值从参数 1 传递到 2 的术语是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T16:26:21.577

您想从第一个参数中引用匹配项吗？相当简单。

首先，“匹配”在括号内定义。这样我们就说“这是第一组”。所以，你想匹配整个字符串，所以让我们把开始和结束斜线之间的所有内容放在括号中：

```
/([\d\.]+)/g 
```

现在，我们用 $# 引用这些过去的匹配，其中从 1 开始的 # 是它们出现的顺序。所以，我们最终的替换看起来像这样：

```
html = html.replace(/([\d\.]+)/g, "$1 your extra content here"); 
```

如您所见，您可以在哪里定义您的额外内容。

# vb.net - Linq Group By 与 TreeView

> ID：11799615
> 
> 赞同：0
> 
> 时间：2012-08-03T16:23:19.650
> 
> 标签：vb.net, linq, treeview, group-by

我正在尝试使用链接对数据进行分组并直接在 treeview1.itemsource 中使用它。我使用的代码是：

```
DisksTreeView1.ItemsSource = (From g As Classes.DiskPrime In CurrentVariables.DisksList
                                     Group By g.Genre
                                      Into MyGroup = Group) 
```

Xaml 是：

```
<TreeView Name="DisksTreeView1" >
    <TreeView.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Namee}" />
        </DataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

类代码是：

```
Public Class DiskPrime
        Property ID As String
        Property Namee As String
        Property Genre As String
        Property DateCreated As Date
        Property Path As String   
End Class 
```

运行程序后，我只得到一个空白的树视图，请您纠正我做错的地方。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:59:48.690

Using`GroupBy`返回 an `IEnumerable<IGrouping<string, DiskPrime>>`，这意味着您实际上是绑定到 an`IGrouping<string, DiskPrime>`而不是 a `DiskPrime`。

要查看您可以绑定的组名，`Key`而不是`Namee`

这将只显示第一级（组名）。为了查看每个组包含哪些元素，您需要使用`HierarchicalDataTemplate`而不是`DataTemplate`.

# android - 多列正确对齐的Android ListView

> ID：11799619
> 
> 赞同：7
> 
> 时间：2012-08-03T16:23:41.343
> 
> 标签：android

我的平板电脑应用程序在每个行项目中显示了一个带有多个 TextView 的 ListView（使用自定义光标适配器）。我有大约 6-7 列，为所有列提供相等空间的最佳方法是什么？

现在我试过了：

*   每个 TextView 的权重相同。但这永远不会正确对齐。
*   与第一个一起使用最大宽度，仍然没有运气，一个很容易溢出并将下一个推到右边。

    ```
    <TextView
        android:layout_width="20dp"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:text="column 1"
        android:textSize="22sp" /> 
    ```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T16:26:33.820

权重很好，但是每次使用布局权重时都必须设置`android:layout_width`为，否则您的视图可能无法正确缩放。`0dp`

此外，不要将固定宽度与布局权重混合使用。如果您选择使用权重，请在行布局中的任何地方使用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T16:28:19.097

在 Android 上使用固定的宽度和高度不是一个好习惯，让 Android 来做布局。您可以使用带有权重的线性布局，以便正确排列不同行中的项目。使用“android:width=0dp”并使用权重来标注各个字段。另一种方法是使用 TableLayout，但这有点棘手。但是，它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:26:17.207

带有一行的表格布局。桌子的整个概念是等距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:32:17.127

在我的情况下（对于错误日志视图），我从 5 和 1 中指定了 4 列（TextViews）的宽度（在带有错误描述的骗局中）得到 weight=1 以占用所有可用空间。它看起来不错，没有性能凸耳。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-04T19:37:32.243

看起来不可能像 ListView 那样获得整洁的表格，因为对于权重管理，不同的内容列各自具有不同的列大小。有人有 XML 解决方案吗？固定宽度不起作用，因为我需要支持各种屏幕。

# jquery - Rails 3 Jquery 在删除公共/资产后不执行

> ID：11799620
> 
> 赞同：0
> 
> 时间：2012-08-03T16:23:42.263
> 
> 标签：jquery, ruby-on-rails-3, caching, asset-pipeline

前几天我遇到了一些 Ajax 问题，通过单击提交按钮多次提交表单。我做了一些浏览，有人建议我删除我的 public/assets 文件夹，我这样做并重新启动了我的服务器，却发现我的一些 Javascript 库不再正常运行......

~~这实际上很奇怪，因为我可以使用 Firebug 调试器查看源代码，我可以看到它确实已加载。我试图清除我的缓存，我试图在开发模式下编译我的资产，我尝试重新启动我的系统，这些都不起作用。我的 Javascript 根本没有运行，并且在删除我的 public/assets 文件夹后静默失败。~~ -**见编辑**

*我如何产生这个问题的快速参考：*

1.  **停止的服务器**
2.  **已删除的公共/资产**
3.  **重新启动服务器并注意到问题**
4.  **清除缓存**
5.  **再次停止服务器并尝试预编译资产**

*我尝试过的其他事情：*

1.  **在 development.rb 中设置`config.serve_static_assets = false`，再次预编译并重启服务器**
2.  **通过 rails s -e development 验证我在开发模式下运行**

3.  **删除了我的 tmp/cache 文件夹**

*额外的信息：*

*   **我正在使用 Rails 版本 3.1.3**

*   **我最近开始使用需要我在开发中将 config.cache_classes 设置为 true 的 Gem。我通过将其设置为 false 并重新测试来验证这不是问题。**

**编辑**

进一步的测试表明，我的更改阻止了以下代码的触发：

```
<script type="text/javascript">
   $(document).ready(function() {
     alert("Hello world!")
   });

</script> 
```

但这很好用：

```
<script type="text/javascript">
   alert("Hello world!")
</script> 
```

Initially I thought that files weren't being loaded from my Asset pipeline, but instead it looks like my changes caused some kind of conflict behind the scenes. I removed `require_tree` from my application.js file and attempted to load libraries manually to find that they began to work again, this isn't an ideal fix for me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:32:15.477

Found the culprit, two birds with one stone actually. One of my JavaScript files were requiring both jquery and jquery_ujs for a second time when it was already being required in my application.js file which was the cause of my mentioned Ajax problem. The very same file was running script that wasn't enclosed with the jquery document ready wrapper which seemed to have broken everything else.

I believe the problem only presented itself after I deleted my public/assets folder because it was storing an older version of this code which possibly didn't have these challenges.

# jquery - jQuery .hide() 方法和 object.is(':hidden')

> ID：11799622
> 
> 赞同：0
> 
> 时间：2012-08-03T16:23:45.070
> 
> 标签：jquery, html

当我调用`.hide()`一个 jQuery 对象时，该对象的样式为`display: none`. 当您尝试检查该对象是否被 隐藏时`object.is(':hidden')`，它返回 true，但是当您尝试使用相同的 jQuery 方法检查其第一个子对象时，有些返回 false，而有些返回 true。

样本：

```
<div id="parentContainer">
    <div id="childContainer"></div>
    <p id="childContainer"></p>
</div> 
```

```
$('#parentContainer').hide();

$("div[id='childContainer']").is(':hidden') // returns false
$("p[id='childContainer']").is(':hidden')   // returns true 
```

任何人都知道为什么这种行为是这样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:27:35.773

这可能与页面上有两个相同的 ID 有关。

如果您有重复项，则 html 中的 ID 应该是唯一的，那么您应该使用类，否则您的代码将无法通过 w3c 验证等。

同样在你的帖子中，你把 $("div[id='childContainer']").is(':hidden') --> 返回 false 但是当我在 jsfiddle 中尝试它时，我得到了 true。

示例[http://jsfiddle.net/kep7d/1/](http://jsfiddle.net/kep7d/1/)

# python - 线程中的 PyV8 - 如何使其工作？

> ID：11799625
> 
> 赞同：4
> 
> 时间：2012-08-03T16:24:05.777
> 
> 标签：python, multithreading, v8

在主程序中使用[PyV8](http://code.google.com/p/pyv8/)是可以的。
但即使我在 1 个线程中运行它（不是主程序本身，而是其中的 1 个附加线程）

```
class TaskThread(threading.Thread):
    def __init__(self, task):
        threading.Thread.__init__(self)
        self.task = task

    def run(self):
        try:
            self.task.run()
        except Exception as e:
            pass 
```

`self.task.run()`具有此代码的单行：

```
context = PyV8.JSContext(self.window)     # <- this stops everything 
```

冻结整个程序。

我已经了解 PyV8“不喜欢”线程，但我仍然如何将它用于线程任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:45:38.727

[我想我在查看http://code.google.com/p/pyv8/source/browse/trunk/PyV8.py](http://code.google.com/p/pyv8/source/browse/trunk/PyV8.py)时找到了解决方案

如果你像这样启动线程：

```
t = YourThreadClass()
t.daemon = True
t.start() 
```

只需以这种方式启动它：

```
with PyV8.JSLocker():
    t.start() 
```

当您需要运行 javascript 时：

```
with PyV8.JSLocker():
    self.context.enter()
    print self.context.eval('1+1')
    self.context.leave() 
```

看起来它解决了这个问题。

# r - 将一个数据帧中的元素与另一个数据帧中的元素匹配的聪明方法？

> ID：11799627
> 
> 赞同：0
> 
> 时间：2012-08-03T16:24:22.927
> 
> 标签：r, indexing, dataframe, match

假设我有两列`x = c("a", "c", "g")`和`y = c("a", "b", "c", "d", "e", "f", "g")`.

x 是 dataframe1 中的一列， y 是 dataframe 2 中的一列。 dataframe1 在维度上不一定与 dataframe 2 匹配。

我想返回包含 x 的 y 行。例如，我想得到 1、3、7。

我尝试了一些笨拙的东西，`items = which(dataframe1$x == dataframe2$y)`但显然这不起作用。我知道我可以循环`dataframe1$x`并匹配它`dataframe2$y`，但似乎应该有一个更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:20:56.440

你有正确的工具。你只是没有正确使用它。`==`将匹配单个值。当您想将一个向量与另一个向量匹配时，请使用`match`or `which`with `%in%`（而*不是*with `==`）。

例子：

```
df1 <- data.frame(x = c("a", "c", "g"))
df2 <- data.frame(y = letters[1:7])
match(df1$x, df2$y)
# [1] 1 3 7
which(df2$y %in% df1$x)
# [1] 1 3 7 
```

# winapi - CredentialProvider DLL 中的 WMI 查询

> ID：11799628
> 
> 赞同：0
> 
> 时间：2012-08-03T16:24:25.303
> 
> 标签：winapi, dll, wmi

我编写了一个 C++ 函数，该函数通过 WMI 查询获取 USB 驱动器的 PNPDeviceID，并在 Win32-Console-Application 中对其进行了测试。它工作得很好，但是当我将代码放入 CredentialProvider-DLL 时，`CoInitialize()`and`CoInitializeSecurity()`函数失败了，因为 DLL 调用进程（Windows CredUI-Subsystem）已经调用了它们。那么如何使 WMI 查询在该 DLL 上工作呢？我需要重置 COM 安全设置，默认情况下似乎无法做到这一点。

这是功能代码：

```
std::wstring GetHardwareID(char driveLetter)
{
std::wstring returnString = L"";
wchar_t volumeAccessPath[] = L"\\\\.\\X:";
volumeAccessPath[4] = driveLetter;

HANDLE deviceHandle = CreateFileW(volumeAccessPath,
    0,                // no access to the drive
    FILE_SHARE_READ | // share mode
    FILE_SHARE_WRITE,
    NULL,             // default security attributes
    OPEN_EXISTING,    // disposition
    0,                // file attributes
    NULL);      // do not copy file attributes

DWORD bytes;
STORAGE_DEVICE_NUMBER  devd;
STORAGE_BUS_TYPE busType = BusTypeUnknown;

if (DeviceIoControl(deviceHandle,
    IOCTL_STORAGE_GET_DEVICE_NUMBER ,
    NULL, 0,
    &devd, sizeof(devd),
    &bytes, NULL))
{
    HRESULT hRes = CoInitializeEx(NULL, COINIT_MULTITHREADED);

    if((FAILED(hRes = CoInitializeSecurity(NULL, -1, NULL, NULL, RPC_C_AUTHN_LEVEL_CONNECT, RPC_C_IMP_LEVEL_IMPERSONATE, NULL, EOAC_NONE, 0))))
    {
               return returnString;
            }

    IWbemLocator* pLocator = NULL;
    if(FAILED(hRes = CoCreateInstance(CLSID_WbemLocator, NULL, CLSCTX_ALL, IID_PPV_ARGS(&pLocator))))
    { return returnString;}

    IWbemServices* pService = NULL;

    if(FAILED(hRes = pLocator->ConnectServer(L"root\\CIMV2", NULL, NULL, NULL, WBEM_FLAG_CONNECT_USE_MAX_WAIT, NULL, NULL, &pService)))
    {
        pLocator->Release();
        dbg(convertInt(hRes).c_str());
        return returnString;
    }

    IEnumWbemClassObject* pEnumerator = NULL;
    if(FAILED(hRes = pService->ExecQuery(L"WQL", L"SELECT * FROM Win32_DiskDrive ", WBEM_FLAG_FORWARD_ONLY, NULL, &pEnumerator)))
    {
        pLocator->Release();
        pService->Release();
dbg(convertInt(hRes).c_str());
        return returnString;
    }

    IWbemClassObject* clsObj = NULL;
    int numElems;
    while((hRes = pEnumerator->Next(WBEM_INFINITE, 1, &clsObj, (ULONG*)&numElems)) != WBEM_S_FALSE)
    {
        if(FAILED(hRes))
            break;

        VARIANT vRet;
        VariantInit(&vRet);
        if(SUCCEEDED(clsObj->Get(L"DeviceID", 0, &vRet, NULL, NULL)) && vRet.vt == VT_BSTR)
        {
            bool found = false;
            std::wstring ws(vRet.bstrVal);
            if (ws[17] == '0' + devd.DeviceNumber)
            found = true;
            VariantClear(&vRet);

            if(SUCCEEDED(clsObj->Get(L"PNPDeviceID", 0, &vRet, NULL, NULL)) && vRet.vt == VT_BSTR  && found)
            {
                std::wstring retStr(vRet.bstrVal);
                VariantClear(&vRet);
                std::wstring k(L"&");
                int pos =retStr.rfind(k);
                returnString = retStr.substr(0, pos);
            }
        }

        clsObj->Release();
    }

    pEnumerator->Release();
    pService->Release();
    pLocator->Release();
}
return returnString;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:17:34.910

解决方案可以是将用于获取 USB 驱动器的 PNPDeviceID 的所有代码放入 Windows 服务中。并通过命名管道在凭据提供程序和 Windows 服务之间建立 IPC。

PS这些方法也很好，所有“硬”的东西都在windows服务中完成（它有更多的功能），你的提供者很简单，这将帮助你避免将来出现问题。

# objective-c - 获取地址簿子数组

> ID：11799631
> 
> 赞同：0
> 
> 时间：2012-08-03T16:24:47.550
> 
> 标签：objective-c, ios, contacts, abaddressbook

我试图从通讯簿中获取前 100 个联系人。我所做的是获取所有联系人，然后尝试仅获取前 100 个。由于某种原因，这不起作用（代码如下）。

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef allContacts = ABAddressBookCopyArrayOfAllPeople(addressBook);

NSRange theRange;
theRange.location = 0;
theRange.length = 100;

CFArrayRef allContactsNew = (CFArrayRef)[(NSMutableArray *)allContacts subarrayWithRange:theRange];//This gets an error 
```

非常感谢这里的帮助。此外，如果您知道任何其他方法可以直接从通讯簿中仅获取前 100 个左右，这可能会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:19:07.360

当我进行这些更改时，它工作正常：

```
theRange.length = MIN(100, CFArrayGetCount(allContacts)); //avoid array out of bounds errors

CFArrayRef allContactsNew = CFBridgingRetain([(NSArray *)CFBridgingRelease(allContacts) subarrayWithRange:theRange]); //Add CFBridging functions recommended by Xcode 
```

# java - 根据当前表单的必填字段禁用/启用命令按钮？

> ID：11799633
> 
> 赞同：0
> 
> 时间：2012-08-03T16:24:56.163
> 
> 标签：java, jsf, primefaces

`commandButton`如果字段`required=true`未填充值，禁用 a 的最佳方法是什么？

该按钮应在第一页加载时禁用，并且仅在所有必填字段都是具有值的字段时启用。

通过最好的方法，我的意思是没有 javascript 和最小代码:-)

此外，如果仅在所有评估为 true`commandButton`时才启用，那就太好了。`validators`

使用 PF 3.2

**编辑**

*   我的意思是最好的方法，它应该只在客户端进行评估

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:44:42.007

这是不可能的，原因有二。

1.  对于客户端验证，您肯定需要 javascript。
2.  组件的`required`属性只存储在服务器端，客户端不知道默认需要哪些字段。

如果不使用`required`，您可以在客户端实现此目的，如下所示。`validateContent`应该包含禁用`commandButton`.

```
<h:inputText value="#{bean.text}" >
    <pe:javascript event="keyup" execute="validateContent();"/>
</h:inputText> 
```

如果去服务器没问题，那么你可以这样做：

```
<h:inputText id="test1" value="#{bean.text}" required="true" immediate="true">
    <f:ajax listener="#{bean.makeDisable()}" render="test2" />
</h:inputText>
</h:commandButton id="test2" value="commandButton1" disabled="#{bean.disable}" /> 
```

在 bean 中：

```
 private String text;
  private boolean disable;

  // setter & getter of text

  public boolean isDisable()
  {
    return disable;
  }

  public void makeDisable(AjaxBehaviorEvent event)
  {
    if(text == null || text.equals(""))
      this.disable=true;
    else
      this.disable=false;
  } 
```

这基本上将`commandButton`在初始加载时加载禁用，并且只有在文本字段中输入任何值时才会启用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:46:54.640

这是可能的，但我几乎不会称其为“最佳方式”。

您需要为`ajax`每个字段上的更改事件提供一个标签。每个字段都必须`immediate`跳过初始验证，并且`process`需要设置为`@this`.

在事件侦听器中，您可以检查每个必填字段是否存在值，如果存在，则设置一个布尔字段来确定 commandButton 是否被禁用。

这些`ajax`标签将需要`render` `@this`以及`commandButton`.

但即便如此，实际上还是有很多 Javascript 代码在运行，没有一个是你必须直接编写的。

# java - 即使没有抛出异常，JMock 也会导致 JUnit ExpectedException 通过

> ID：11799634
> 
> 赞同：3
> 
> 时间：2012-08-03T16:25:00.607
> 
> 标签：java, junit, jmock

当我将 JMock 与 JUnit 一起使用时`ExpectedException`，即使没有抛出异常，测试似乎也通过了。例如，下面的测试失败了，这是应该的。但是，如果我取消注释两条注释行，它就会通过。难道我做错了什么？这两个组件之间是否存在不兼容？

```
//@RunWith(JMock.class)
public class JUnitJMockTest {

    @Rule
    public ExpectedException exception = ExpectedException.none();

    //Mockery context = new JUnit4Mockery();

    @Test
    public void test() {

        exception.expect(NullPointerException.class);

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:08:12.770

我想你可能会发现[这个页面](http://baddotrobot.com/blog/2012/03/27/expecting-exception-with-junit-rule/)很有用。引用它：

> 但请注意，如果您将规则与某些`@RunWith`类结合使用，您可能会得到误报。具体来说，如果您要使用上述示例中扩展的类运行`JUnit4ClassRunner`，则测试将不再失败。你会得到一个误报。
> 
> 例如，如果您使用之前的 JMock 版本`2.6.0`并使用`@RunWith(JMock.class)`您会遇到这种情况。旧版本的`JMock.class`扩展`JUnit4ClassRunner`并`JUnit4ClassRunner`忽略规则。较新的`BlockJUnit4ClassRunner`支持规则和 JMock 后 2.6.0 扩展它在`JMock.class`.

简而言之，听起来您可能正在使用 2.6.0 之前的 JMock 版本，并且更新可能会解决您的问题。

# html - 链接图像和文本

> ID：11799638
> 
> 赞同：0
> 
> 时间：2012-08-03T16:25:12.667
> 
> 标签：html, hyperlink, caption

我想在图像和标题周围包装一个 html 链接标签，所以像

```
<a href="link"><img src="...">Caption Text</img></a> 
```

标题应该在图像下方，但我不确定这样做的好方法（添加`<br>`作品，但似乎不干净）。我希望能够使用样式元素，但我不能在`div`里面放一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:31:34.063

试试这个 -[**演示**](http://jsfiddle.net/CWDk4/)

无需更改您的**HTML**

```
<a href="link">
    <img src="http://lorempixel.com/200/100" />
    Caption Text
</a> 
```

**CSS**

```
a {
    display: inline-block;
    text-align: center;
    border: 2px solid orange;
}

img {
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:28:25.720

您可以将标题包装在跨度内

```
<a href="link"><img src="..."/><span style="display: block;">Caption Text</span></a> 
```

[http://jsfiddle.net/ZgKqF/](http://jsfiddle.net/ZgKqF/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:30:21.713

试试这种方式：`<a href="link"><img src="..." alt="Caption Text" /></a>`

然后用javascript显示alt属性，用javascript显示。查看此以供参考[从位于 <a> 标记内的图像中获取“alt”属性](https://stackoverflow.com/questions/3883882/get-the-alt-attribute-from-an-image-that-resides-inside-an-a-tag)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-03T16:27:34.697

您可以`a`使用

```
display: block 
```

# java - Java SE - 一个小型 Web 服务器程序

> ID：11799651
> 
> 赞同：7
> 
> 时间：2012-08-03T16:25:57.133
> 
> 标签：java

我只是好奇如何在 Java SE 中实现一个小型服务器程序？

该程序正在侦听端口 80 并准备检索 InputStream 对象，但是我可以使用任何函数将 InputStream 转换为 HttpRequest 对象（类似于 Servlet）吗？

之后，我如何制作一个 HttpResponse 对象并将数据发送回浏览器？

最后，我只是在寻找任何可以帮助我将 HTTP 格式解析为对象或从对象解析为 HTTP 响应流的框架。

（我知道 Java EE 会是更好的解决方案，我只是想在 Java SE 上测试一些东西）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T16:34:35.453

在这种情况下，只要看看[Jetty 。](http://jetty.codehaus.org/jetty/)它正是为此目的而编写的——将 HTTP 服务器嵌入到您的应用程序中。但可能不会为您提供 HttpRequest 对象，但可能类似的东西应该适合您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T16:38:53.777

如果您有 InputStream 并且只需要处理请求/格式化响应，请查看[Apache HttpComponents](http://hc.apache.org/index.html)

有关更多信息，请在此处查看此答案：[https ://stackoverflow.com/a/5625479/416627](https://stackoverflow.com/a/5625479/416627)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T16:36:28.050

一个真正轻量级的 servlet 容器，非常适合[嵌入](http://winstone.sourceforge.net/#embedding)，是[Winstone](http://winstone.sourceforge.net/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:32:43.890

如果您需要 Servlet 实现，请查看 Tomcat：http: [//tomcat.apache.org/](http://tomcat.apache.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T16:39:06.210

如果你正在寻找非常轻量和灵活的东西，你可能想看看 Netty

[https://netty.io/Documentation/WebHome](https://netty.io/Documentation/WebHome)

就我个人而言，我觉得开始有点困难，但是一旦克服了最初的障碍，它就非常强大。

# php - 如何在运行模板时获取所有分配的 Smarty 变量？

> ID：11799652
> 
> 赞同：5
> 
> 时间：2012-08-03T16:25:59.060
> 
> 标签：php, smarty

我想在模板中获取分配给 Smarty 的所有变量。例如，如果我有这个代码

```
$smarty->assign('name', 'Fulano');
$smarty->assign('age', '22');
$result = $this->smarty->fetch("file:my.tpl"); 
```

我想要一个`my.tpl`像下面这样的：

```
{foreach from=$magic_array_of_variables key=varname item=varvalue}
{$varname} is {$varvalue}
{/foreach} 
```

例如结果的内容是

```
name is Fulano
age is 22 
```

那么，有没有办法得到这个`$magic_array_of_variables`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T05:37:01.340

## 下面的所有代码都是 smarty2

所有 smarty 变量都保存在 $smarty->_tpl_vars 对象中，因此在 fetching() 模板之前，您可以执行以下操作：

```
$smarty->assign('magic_array_of_variables', $smarty->_tpl_vars); 
```

由于这可能不切实际，您还可以编写一个小的 smarty 插件函数来做类似的事情：

```
function smarty_function_magic_array_of_variables($params, &$smarty) {
    foreach($smarty->_tpl_vars as $key=>$value) {
        echo "$key is $value<br>";
    }
} 
```

并从您的 tpl 中调用它：

```
{magic_array_of_variables} 
```

或者，在此功能中，您可以执行以下操作：

```
function smarty_function_magic_array_of_variables($params, &$smarty) {
    $smarty->_tpl_vars['magic_array_of_variables'] =  $smarty->_tpl_vars;
} 
```

并在您的模板中：

```
{magic_array_of_variables}
{foreach from=$magic_array_of_variables key=varname item=varvalue}
{$varname} is {$varvalue}
{/foreach} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T08:28:07.623

没有本地方法来迭代分配的变量。也就是说，[getTemplateVars()](http://www.smarty.net/docs/en/api.get.template.vars.tpl)返回所有分配值的关联数组。

就像@perikilis 描述的那样，您可以简单地注册一个插件函数来将 getTemplateVars() 的结果推送回分配的变量列表。如果你想防止一些数据重复和其他奇怪的事情，你可能只想分配 array_keys() 并访问像`{${$varname}}`(Smarty3) 这样的实际变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T04:37:54.303

您可以将一个数组分配给您的 smarty 变量。像这样的东西：

```
$array = array('name' => 'Fulano', 'age' => '22'); 
```

当您将其分配给具有名称的模板时`magic_array_of_variables`，您提供的确切 smarty 模板应该给出您想要的输出

# dpkg - dpkg -i 安装后后台运行

> ID：11799653
> 
> 赞同：0
> 
> 时间：2012-08-03T16:26:02.230
> 
> 标签：dpkg, post-install

我自己的 dpkg 没有正确安装。我跑：

```
:~# dpkg -i foo-2.1-2.deb 
```

当我的包安装完成时。

```
:~# ps aux | grep foo | grep -v grep

root      1718  2.2  1.4  10080  7308 ttyS0    S    11:59   0:03 dpkg -i foo-2.1-2.deb
root      1731  0.0  0.0   1720   496 ttyS0    S    11:59   0:00 /bin/sh /var/lib/dpkg/info/foo-2.1-2.postinst configure 2.1-2 
```

我认为我的 postinst 脚本没有正确终止，

我错过了一些东西，但不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:07:43.493

我终于弄明白了。我的一个由 postinst 调用的脚本称为 /bin/bash，它启动了一个新的 shell，导致 dpkg 在后台运行并且永远不会完成。

# algorithm - 二维网格子图的最大独立子集

> ID：11799655
> 
> 赞同：0
> 
> 时间：2012-08-03T16:26:12.147
> 
> 标签：algorithm, graph

在一般情况下，找到图的最大独立子集是 NP Hard。

但是，请考虑以下图表子集：

创建一个 NxN 单位正方形单元格。

通过创建与每个单元格对应的顶点来构建图 G。请注意，有 N^2 个顶点。

如果两个顶点的单元共享一条边，则在两个顶点之间创建一条边。注意有 2N(N-1) 条边。

G 的最大独立子集显然是一个棋盘格模式。如果 R+C 为奇数，则第 R 行第 C 列的单元格是其中的一部分。

现在我们通过复制 G 并删除一些顶点和边来创建一个图 G'。（如果您删除一个顶点，当然也会删除它结束的所有边。另请注意，您可以删除一条边而不删除它结束的顶点之一。）

通过什么算法我们可以找到 G' 的最大独立子集？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-03T16:42:30.997

[在这里](http://en.wikipedia.org/wiki/Independent_set_%28graph_theory%29#Finding_maximum_independent_sets)阅读。我认为你仍然很兴奋，它仍然是 NP-hard。

由于您的度数最多为 4，简单的贪心算法获得的近似比率为 2。您的结果图也是平面的，因此有一个很好的近似算法（任何固定的近似比率在 poly time 中）。

# php - 网址重写重定向到错误页面

> ID：11799656
> 
> 赞同：0
> 
> 时间：2012-08-03T16:26:14.260
> 
> 标签：php, url

我正在使用 php 做一个项目。我重写了一些动态 url。

**http://domain.com/?a=用户名**

我把网址改写成

**http://domain.com/用户名**

在索引页面中将使用 $_GET['a'] 值从数据库中选择值。如果在数据库中找不到 $_GET['a'] 它将产生错误消息。实际上我的问题是服务器将包含**css**文件夹。**从css**获取 css 文件时，它将重定向到错误页面。请帮助我解决这个问题

代码是

```
 $cat=$_GET['a'];
   $sql="SELECT *  FROM `content` WHERE category=$cat";
$result=mysql_query($sql);
$no=mysql_num_rows($result);
if($no>0)
{

    while($row = mysql_fetch_array($result))
         {
          $id=$row['id'];
         } 

        S($id,$cat,$sub,$year);
}
else
{echo "<META HTTP-EQUIV=Refresh CONTENT='0; URL=error.php'>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:59:27.707

做这样的事情：

```
if(preg_match('/[0-9a-zA-Z]+\.css$/', $_GET['a'], $url))
{
    header("Content-type: text/css");
    echo file_get_contents('./css/' . $url[0]);
    exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:29:09.777

在 RewriteRule 上方的 .htaccess 文件中，添加以下内容：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

好吧，实际上第一个是您需要的规则，第二个只是确保您将来能够访问另一个目录（例如，您希望在 subdir 中有一些其他脚本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:31:00.123

做这个：

1.  为 js / css 等资产创建公共目录
2.  让您的 .htaccess （或您用来执行干净 url 的任何内容）将所有请求指向以您的公用文件夹路径的路径开头
3.  将代码中的 A 参数设置为这样`$path = !empty($_GET['a']) ? $_GET['a'] : '';`

通过这样做，您可以获得以下好处：

mysite.com/someextension => 你的`url = someextension`

和

您可以使用直接网址访问您的资产：`mysite.com/public/css/style.css`

# c# - DataGridView AllowUserToAddRow 属性不起作用

> ID：11799661
> 
> 赞同：4
> 
> 时间：2012-08-03T16:26:21.437
> 
> 标签：c#, linq, entity-framework, datagridview, bindingsource

我有一个带有实体框架的简单项目，我有一个`DataGridView`，`Form`我将它的`AllowUserToAddRow`属性设置为，`true`但我仍然无法向其中添加新行。

这是我的代码：

```
DBEntities context = new DBEntities();
private void Form1_Load(object sender, EventArgs e)
{
    var q = (from i in context.myTable
             select i).ToList();
    DataGridView.DataSource = q;
}

private void btnSave_Click(object sender, EventArgs e)
{
    context.SaveChanges();
    MessageBox.Show("saved successfully");
} 
```

如果我使用`BindingSource`控件，它允许我插入行，`DataGridView`但是在我在我的数据库文件中调用`context.SaveChanges()`nothing insert 之后使用这种方法。所以我想也许它与这个问题有关`DataGridView`，`true` `AllowUserToAddRow`属性不允许我在`DataGridView`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:32:43.417

您的问题是您调用`.ToList()`并实现了查询 - 这似乎破坏了完整的数据绑定。

您**应该**能够简单地拥有：

```
DBEntities context = new DBEntities();
private void Form1_Load(object sender, EventArgs e)
{
    var q = (from i in context.myTable
             select i);
    DataGridView.DataSource = q;
} 
```

我试过这个，它可以很好地允许新行（你确实需要在你的表中有一个主键，但无论如何你应该有它）。

* * *

**请注意：**此行为已在 Entity Framework 4.1 中被故意破坏 - [Webforms data binding with EF Code-First Linq query error](https://stackoverflow.com/questions/6674649/webforms-data-binding-with-ef-code-first-linq-query-error)

* * *

我说**应该**在我的回答中，因为我实际上有点惊讶它这么容易。我记得它在早期版本的 Entity Framework 中运行得不是很好，而且我没有经常使用 4.0。

如果上面的解决方案不起作用，您可能必须以艰难的方式执行此操作并在保存之前自己添加新对象：

首先引入一个绑定源，然后在保存时执行类似的操作（在示例中使用假想的 Customer 实体）：

```
foreach (Customer customer in bs.List)
{         
    // In my db customerId was an identity column set as primary key
    if (customer.CustomerId == 0)
        context.Customers.AddObject(customer);
}
context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-31T16:26:43.090

我刚刚痛苦地从 4 升级到 EF 6，我遇到了类似的问题，EF6 中的解决方案如下，我已经展示了 where 语句以获得进一步的帮助。

```
DBEntities context = new DBEntities();
private void Form1_Load(object sender, EventArgs e)
{
  context.MyTable.Where(e => e.myField == 1).Load();

  BindingSource bs = new BindingSource();
  bs.DataSource = context.MyTable.Local.ToBindingList();
  myDatagridView.DataSource = bs;
} 
```

您现在可以使用 context.SaveChanges(); 保存更改或插入

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-08T23:10:37.357

我在 Interbase 方言的自定义数据库实现中遇到了类似的问题。我的解决方案类似于上面的解决方案：

```
var tableAList = _dbImplementation.SelectAll<TableA>().ToList();
var bindingSource = new BindingSource();
bindingSource.DataSource = typeof (TableA);
foreach (var tableA in tableAList)
{
    bindingSource.Add(tableA);
}
dataGridView.DataSource = bindingSource; 
```

有用的参考资料：[详细的数据绑定教程](http://www.codeproject.com/Articles/24656/A-Detailed-Data-Binding-Tutorial)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T17:50:23.923

如果要将 dataGridView 绑定到源，则插入行的唯一适当方法是将行添加到 DataGridView 绑定到的数据结构中。

# bash - 如何将“abcd efgh”拆分为“abcd”和“efgh”？

> ID：11799666
> 
> 赞同：1
> 
> 时间：2012-08-03T16:26:33.823
> 
> 标签：bash, sed, delimiter, tr

这真的不言自明。我在 bash shell 中工作，我对 shell 脚本很陌生。我找到了很多关于使用的信息`tr`，`sed`但是到目前为止我发现的所有示例都删除了分隔符和新行。我真的想做相反的事情。我希望能够根据空白进行分离。我有一个像“abcd efgh”这样的字符串，我需要它是“abcd”“efgh”（全部不带引号，只是为了显示分组）。

我敢肯定这比我做的要简单得多，但我很困惑。

更新的问题：

我有一列已放入数组的 PID，但数组的每个元素都有列中的 pid。

柱子：

```
1234
5678 
```

当我打印出整个数组时，所有不同的列都已添加，因此我拥有所有值，但是当我打印出数组的单个元素时，我得到如下信息：

```
1234 5678 
```

这不是我想要的。我需要一个用于 1234 的元素和一个用于 5678 的单独元素。

到目前为止，这是我的代码：

```
!/bin/bash
echo "Enter the File Name"
read ips

index=0
IFS=' '
while read myaddr myname; do
    myips[$index]="$myaddr"
    names[$index]="$myname"
    index=$(($index+1))
done < $ips

echo "my IPs are: ${myips[*]}"
echo "the corresponding names are: ${names[*]}"
echo "Total IPs in the file: ${index}"

ind=0
for i in "$myips[@]}"
do
    echo $i
    pids=( $(jps | awk '{print $1}') )

    for pid in "${pids[@]}"; do
        echo $pid
    done

    echo "my PIDs are: ${pids}"

    for j in "${pids[@]}"
    do
        mypids[$ind]="$j"
        ind=$(($ind+1))
    done
done
echo "${mypids[*]}"
echo "The 3rd PID is: ${mypids[2]}" 
```

样品输出：

```
Total IPs in the file: 6

xxx.xxx.xxx.xxx
5504
1268
1
xxx.xxx.xxx.xxx
5504
4352
1

xxx.xxx.xxx.xxx
5504
4340
1

5504
1268 5504
4352 5504
4340

The 3rd pid is: 5504
4340 
```

我需要将每个 pid 分开，以便数组的每个元素都是一个 pid。因此，例如，“The 3rd pid is:”行需要看起来像

```
The 3rd pid is: 5504 
```

第 4 个元素是 4340

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:29:34.103

尝试[`cut`](http://www.manpagez.com/man/1/cut/)：

```
$ echo "abcd efgh" | cut -d" " -f1
abcd

$ echo "abcd efgh" | cut -d" " -f2
efgh 
```

或者，如果在某些时候您想做更复杂的事情，也请查看[`awk`](http://www.grymoire.com/Unix/Awk.html)：

```
$ echo "abcd efgh" | awk '{print $1}'
abcd

$ echo "abcd efgh" | awk '{print $2}'
efgh 
```

* * *

要解决您更新的问题：

> 我有一列已放入数组的 PID，但数组的每个元素都有列中的 pid。

如果要将一列数据加载到数组中，可以执行以下操作：

```
$ pgrep sshd  # example command. Get pid of all sshd processes
795
32046
32225

$ A=(`pgrep sshd`) # store output of command in array A

$ echo ${A[0]}  # print first value
795

$ echo ${A[1]}  # print second value
32046 
```

* * *

为了解决您发布的示例代码，问题的原因是您已更改`$IFS`为空格 ( `IFS=' '`)，这意味着您的由换行符分隔的列不再被拆分。

考虑这个例子：

```
$ A=(`pgrep sshd`)
$ echo ${A[0]}  # works as expected
795

$ IFS=' '       # change IFS to space only
$ A=(`pgrep sshd`)  
$ echo ${A[0]}  # newlines no longer used as separator
795
32046
32225 
```

为避免此问题，一种常见的方法是始终备份原始`IFS`数据，并在使用更新后的值后将其替换。例如

```
# backup original IFS
OLDIFS=$IFS

IFS=' '
# .. do stuff ...

# restore after use
IFS=$OLDIFS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:30:11.530

示例文件：

```
abcd efgh
bla blue 
```

使用 awk 您可以执行以下操作

```
cat file.txt | awk '{print $1}' 
```

这将输出以下内容

```
abcd
bla 
```

或者

```
cat file.txt | awk '{print $2}' 
```

这将输出以下内容

```
efgh
blue 
```

awk 是一个非常强大的命令，我建议您尽快尝试学习它。它将在 bash 脚本中为您省去很多麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:42:59.820

其他解决方案都很好。我经常使用cut。但是，我只想补充一点，如果您总是想在空格上拆分，那么 xargs 会为您执行此操作。然后 printf 的命令行版本可以格式化参数（如果需要重新排序字符串，请使用 awk ，就像在其他解决方案中一样）。这是一个供参考的示例：

```
MYSTR="hello big world"
$ echo $MYSTR |xargs printf "%s : %s >  %s\n"
hello : big >  world 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:56:49.283

该`read`命令将输入​​作为整行处理（除非使用 设置分隔符`-e`）：

```
$ echo "abcd efgh" | while read item
do
    echo $item
    # Do something with item
done

abcd efgh 
```

如果要将每个项目通过管道传输到命令，可以执行以下操作：

```
echo "abcd efgh" | tr ' ' '\n' | while read item
do
    echo $item
    # Do something with item
done

abcd
efgh 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T20:36:28.853

无需使用外部命令将字符串拆分为单词。`set`内置就是这样做的：

```
string="abcd efgh"
set $string

# Now $1 is "abcd" and $2 is "efgh"
echo $1
echo $2 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-03T16:36:10.703

`"abcd efgh"`字符串和字符串之间没有区别，`"abcd" "efgh"`除了，如果作为参数传递给程序，第一个将作为一个参数读取，而第二个将是两个参数。

双引号`"`仅激活和停用 shell 扩展，就像单引号一样（但更激进）。

`'"abcd efgh"'`现在，你可以有一个你想转换成的字符串，`'"abcd" "efgh"'`你可以用它来做，`sed 's/ /" "/'`但这可能不是你想要的。

# git - 从 repo 但不在本地删除跟踪的忽略文件

> ID：11799668
> 
> 赞同：4
> 
> 时间：2012-08-03T16:26:50.253
> 
> 标签：git, gitignore

我经常遇到这样一种情况，我们团队中的某个人在没有先向他们的项目中添加 .gitignore 的情况下推送初始提交。这会导致一堆文件最终出现在我们不想跟踪的 repo 中。

`git ls-files -i --exclude-from=.gitignore`
给我一个被 .gitignore 忽略的文件列表

和

`git rm --cached <file>`
让我从 repo 中一次删除一个文件，但将它们保存在我的工作目录中（我想要的）

有没有一种方法可以将文件列表从管道传输`ls-files`到`rm --cached` （或其他一些允许我从我的存储库中删除跟踪的、忽略的文件的方法）？

我们的一位团队成员编写了一个使用正则表达式来执行此操作的 shell 脚本，但我正在寻找一个仅命令行的解决方案（如果存在的话）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T16:46:52.257

你可以试试：

```
git rm --cached $(git ls-files -i --exclude-from=.gitignore) 
```

（遵循与“ [git remove files which has been deleted](http://www.commandlinefu.com/commands/view/1246/git-remove-files-which-have-been-deleted) ”或“ [git: how to add/commit removes made via vanilla rm?](https://stackoverflow.com/a/1856694/6309) ”或“ [Removing multiple files from a Git repo that已从磁盘中删除](https://stackoverflow.com/a/5147119/6309)")。

或者：一个简单的管道也可以工作：

```
git ls-files -i --exclude-from=.gitignore | xargs -0 git rm --cached 
```

# javascript - 获取最新的提要并放在首位

> ID：11799672
> 
> 赞同：1
> 
> 时间：2012-08-03T16:26:57.470
> 
> 标签：javascript, jquery

我可以使用[JsFiddle 之类的 feedburner 显示来自不同提供商的多个提要](http://jsfiddle.net/bD4vm/3/)

我想将最新的提要放在顶部。我怎么知道哪个提要是“最新的”？我怎样才能把它放在上面？（如果可能的话，我想用 Jquery 来做这个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:32:55.770

附加`&displayDate=true`到 feedburner URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T13:56:49.773

尝试`prepend()`在父元素上使用 jQuery。这将允许您将新提要放在顶部。

[http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

# php - symfony 2 中的频道是什么？

> ID：11799676
> 
> 赞同：0
> 
> 时间：2012-08-03T16:27:12.217
> 
> 标签：php, symfony

我正在尝试使用如下日志记录机制：

```
log_handler:
    class: %monolog.handler.stream.class%
    arguments: [ %kernel.logs_dir%/%kernel.environment%.yourFileName.log ]

logger:
class: %monolog.logger.class%
    arguments: [ nameOfLoggingChannel ]
    calls: [ [pushHandler, [@log_handler]] ] 
```

但是我的应用程序正在解析“nameOfLoggingChannel”。那是什么？有人可以提供一些指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:31:38.220

这只是一个名字。它将包含在该记录器记录的消息中。引用[文档](https://github.com/Seldaek/monolog/blob/master/doc/usage.md#leveraging-channels)：

> 通道是识别记录与应用程序的哪个部分相关的好方法。这在大型应用程序中很有用（并且在 Symfony2 中被 MonologBu​​ndle 所利用）。然后，您可以轻松地 grep 通过日志文件，例如过滤这种或那种类型的日志记录。
> 
> 使用具有相同处理程序的不同记录器允许通过保持相同的处理程序（例如使用单个日志文件）来识别发出记录的记录器（通过通道名称）。

```
<?php

use Monolog\Logger;
use Monolog\Handler\StreamHandler;
use Monolog\Handler\FirePHPHandler;

// Create some handlers
$stream = new StreamHandler(__DIR__.'/my_app.log', Logger::DEBUG);
$firephp = new FirePHPHandler();

// Create the main logger of the app
$logger = new Logger('my_logger');
$logger->pushHandler($stream);
$logger->pushHandler($firephp);

// Create a logger for the security-related stuff with a different channel
$securityLogger = new Logger('security');
$securityLogger->pushHandler($stream);
$securityLogger->pushHandler($firephp); 
```

# javascript - 在 Rails 中存在 HTML 问题的 mailto

> ID：11799685
> 
> 赞同：0
> 
> 时间：2012-08-03T16:28:07.033
> 
> 标签：javascript, jquery, ruby-on-rails, html

在这里，我需要发送一封带有`mailto(html)`or`mail_to(rails)`功能的邮件。但问题在于邮件正文，如何使用 mailto 功能附加正文，我的意思是，当我单击此 **邮件**链接时，会打开一个 Gmail 客户端，所以我需要在客户端正文部分获取**imageURL**。

```
<script type="text/javascript">
var **imageURL**;
function code (email) {

   imageURL = "https://chart.googleapis.com/chart?
   chs=150x150&cht=qr&chl=13&choe=UTF-
   8";
   $("#image_url").val(imageURL);
   $("#mailhere").html("<a class='btn btn-primary pull-left'
   href='mailto:"+email+"'>**Mail**</a>");
}

<div class="modal-footer" id="qr-code-footer">
 <a id="printme" href="#" class="btn btn-primary pull-left">Print</a>
  <div id="mailhere" class="span1">
  </div>  
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:38:52.397

利用[`&body=Content`](http://en.wikipedia.org/wiki/Mailto)

```
$("#mailhere").html("<a class='btn btn-primary pull-left' href='mailto:"+email+"&body=" + encodeURIComponent(imageURL) + "'>**Mail**</a>"); 
```

# unix - 如何使用管道在 Go 中编写`cat`

> ID：11799692
> 
> 赞同：6
> 
> 时间：2012-08-03T16:28:26.640
> 
> 标签：unix, go

我在下面有一个 Unix 工具的实现`cat`。它从缓冲区中读取多个字节`os.Stdin`，然后将这些字节写入`os.Stdout`. 有没有办法可以跳过缓冲区并`Stdin`直接通过管道传输到`Stdout`？

```
package main

import "os"
import "io"

func main() {
    buf := make([]byte, 1024)

    var n int
    var err error
    for err != io.EOF {
        n, err = os.Stdin.Read(buf)

        if n > 0 {
            os.Stdout.Write(buf[0:n])
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T16:43:15.303

您可以使用`io.Copy()` [（此处的文档）](http://golang.org/pkg/io/#Copy)

例子：

```
package main

import (
    "os"
    "io"
    "log"
)

func main() {
    if _, err := io.Copy(os.Stdout, os.Stdin); err != nil {
        log.Fatal(err)
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T16:45:33.897

例如，

```
package main

import (
    "io"
    "os"
)

func main() {
    io.Copy(os.Stdout, os.Stdin)
} 
```

# javascript - 调用 $.get 方法时如何使 javascript 变量成为全局变量？

> ID：11799695
> 
> 赞同：4
> 
> 时间：2012-08-03T16:28:50.873
> 
> 标签：javascript, jquery, arrays, scope

> **可能重复：**
> [如何让 jQuery 执行同步而不是异步的 AJAX 请求？](https://stackoverflow.com/questions/133310/how-can-i-get-jquery-to-perform-a-synchronous-rather-than-asynchronous-ajax-re)
> [ajax完成后获取变量](https://stackoverflow.com/questions/6240324/get-a-variable-after-ajax-done)

以下代码中的两个警报函数返回不同的结果。我也试图让第二个评估真实..任何帮助表示赞赏..谢谢..

```
var array;

  $.get('php/getstocklist.php', function(data){  

  array = data; 
  alert($.isArray(array));    //alerts true

  }, "json");

alert($.isArray(array));      //alerts false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:36:27.027

问题是它`$.get`是异步的。var 是全局的，就像你现在拥有的一样。它只是没有定义，因为您的第二个警报在 ajax 返回并运行其成功回调之前立即运行。

为了在回调之外使用它，您需要轮询一个变量以确保已分配结果...但是您实际上是在使用假回调，因此重组代码并正常执行更有意义方法 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:32:59.447

这是正在发生的事情：

```
// This variable _is_ global. However, it's current value is undefined
var array;

$.get('php/getstocklist.php', function(data){  

  // After this runs, _now_ array has data in it
  array = data; 

  // thus causing $.isArray to return true here.
  alert($.isArray(array));    //alerts true

}, "json");

// This call happens BEFORE the callback to the $.get call,
// so as of this line, array is still undefined, which results in 
// the $.isArray call returning false.
alert($.isArray(array));      //alerts false 
```

Javascript 是一种繁重的异步语言。您必须摆脱过程思维，而是考虑传递一些代码以便稍后执行（那些是*回调*）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:05:52.133

如果我理解你为什么不能

```
$.getJSON('php/getstocklist.php', function(data){  
    dosomething(data);
});

function dosomething(data) {} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:43:47.683

第二个警报在第一个警报之前执行，因为 $.get 回调异步执行。如果您希望第二个警报返回 true，您应该使用[jQuery Deferred 对象](http://api.jquery.com/deferred.done/)，如下所示：

```
var array;

deferred = $.get('php/getstocklist.php', function(data){  

  array = data; 
  alert($.isArray(array));    //alerts true

}, "json");

// alerts true if $.get succeeded
deferred.done(function () { alert($.isArray(array)); }); 
```

您传递给的回调`done`将在异步 $.get 调用返回时触发。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-03T16:33:24.193

它有点不合时宜，但尝试设置使用它会将您的变量从请求中分离出来并使其成为全局

```
window.array = data;  

alert($.isArray(window.array)); 
```

# powershell - 使 PowerShell 脚本在全局范围内运行 cmdlet

> ID：11799697
> 
> 赞同：5
> 
> 时间：2012-08-03T16:29:00.640
> 
> 标签：powershell

我编写了以下 PowerShell 脚本：

```
function Reload-Module ([string]$moduleName) {
    $module = Get-Module $moduleName
    Remove-Module $moduleName -ErrorAction SilentlyContinue
    Import-Module $module
} 
```

此脚本的唯一问题是 Import-Module 仅适用于该脚本的范围内 - 它不会在全局范围内导入模块。有没有办法让脚本导入一个模块，以便在脚本完成后它仍然存在？

注意：像这样的点源：`. Reload-Module MyModuleName`不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T19:26:41.887

来自 Powershell 帮助：

```
-Global [<SwitchParameter>]
Imports modules into the global session state so they are available to all commands in the session. By 
default, the commands in a module, including commands from nested modules, are imported into the 
caller's session state. To restrict the commands that a module exports, use an Export-ModuleMember 
command in the script module.

The Global parameter is equivalent to the Scope parameter with a value of Global.

Required?                    false
Position?                    named
Default value                False
Accept pipeline input?       false
Accept wildcard characters?  false 
```

v3 还增加了 -Scope 参数，这个参数更通用一点：

```
-Scope <String>
Imports the module only into the specified scope.

Valid values are:

-- Global: Available to all commands in the session. Equivalent to the 
Global parameter.

-- Local: Available only in the current scope.

By default, the module is imported into the current scope, which could be 
a script or module.

This parameter is introduced in Windows PowerShell 3.0.

Required?                    false
Position?                    named
Default value                Current scope
Accept pipeline input?       false
Accept wildcard characters?  false 
```

**注意：**上面的帮助片段来自 v3.0，这是我在我的系统上安装的。v2.0 帮助位于[http://msdn.microsoft.com/en-us/library/windows/desktop/dd819454.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd819454.aspx)。如果可以的话，我衷心建议您购买 PowerShell v3.0，如果仅仅是因为新的 ISE。

# mysql - 插入到表中，如果没有这样的行

> ID：11799698
> 
> 赞同：0
> 
> 时间：2012-08-03T16:29:07.860
> 
> 标签：mysql

我有一个包含“userid”和“expired”列的会话表。我想检查是否存在具有给定用户 ID 且未过期的任何行，如果没有找到行，则插入新行。

我已经阅读了有关 INSERT IGNORE 的信息，但是 (userid + expired) 不能作为键，因为可能有多个行具有相同的用户（全部过期），我不能只有超过 1 个未过期的用户。

我试过这个，但无济于事（'你有一个错误......'）：

```
IF (SELECT 1 FROM sessions WHERE user = :user AND expired = 0) <> 1
INSERT INTO sessions (user) VALUES(:user) 
```

（“过期”默认为 0）。mySQL 版本是 5。

**更新**。

我也试过这个：

```
IF NOT EXISTS(SELECT 1 FROM sessions WHERE user = 0 AND expired = 0)
    INSERT INTO sessions (user) VALUES(0) 
```

使用 HeidySQL 7。它也不起作用。mySQL 版本是 5.5。

**更新2**。我的陈述中的逻辑错误已修复。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:31:23.663

使用`If exists`子句（在这种情况下，`not exists`）

```
IF NOT EXISTS(SELECT 1 FROM sessions WHERE user = 0 AND expired = 0)
    INSERT INTO sessions (`user`) VALUES(:user) 
```

**编辑**

```
 INSERT INTO sessions (`user`) select user from 
    (select :user as user from sessions where not exists(SELECT 1 FROM sessions WHERE user = 0 AND expired = 0)) T1 
```

然后输入 0 或您想要编码的值`:user`

```
 INSERT INTO sessions (`user`) select user from 
    (select 0 as user from sessions where not exists(SELECT 1 FROM sessions WHERE user = 0 AND expired = 0)) T1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:39:58.310

Elvieejo 的解决方案似乎不错，除了看起来你必须使用 not exists 来解决所述问题。

```
IF NOT EXISTS(SELECT 1 FROM sessions WHERE user = 0 AND expired = 0)
    INSERT INTO sessions (user) VALUES(:user) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:58:23.157

我的陈述的问题是 IF EXISTS 应该在存储过程中。然而，*函数*IF() 有效：

```
SELECT IF(EXISTS(SELECT 1 FROM sessions WHERE user = 0 AND expired = 0), 0, 1) 
```

现在我正在寻找如何等于 0 和 INSERT INTO 语句等普通值。这不起作用：

```
SELECT IF(EXISTS(SELECT 1 FROM sessions WHERE user = 0 AND expired = 0), 0,
INSERT INTO sessions (user) VALUES (0) SELECT) 
```

如果是 C++，我会说“?: 操作数之间的类型不匹配”并使用逗号运算符。在 SQL 中它不起作用。

**更新**

好吧，我刚刚创建了一个存储例程。只是因为我不能使用`IF`其他方式。这个 mySQL 是多么愚蠢的 RDBMS！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:15:15.537

```
INSERT IGNORE INTO sessions (user) VALUES(:user) 
```

# asp.net-mvc-3 - Html.ActionLink 帮助器在尝试应用 ID 时创建不正确的链接

> ID：11799700
> 
> 赞同：2
> 
> 时间：2012-08-03T16:29:08.860
> 
> 标签：asp.net-mvc-3, razor

尝试将 ID 属性分配给通过 Razor @Html.ActionLink 帮助程序创建的 [a] 标记时，我得到了一个奇怪的结果

我的原始代码是这样的：

```
 @Html.ActionLink("Create New Order", "Index", "NewOrder") 
```

这可以正常工作并创建一个链接为[http://www.mysite.com/NewOrder](http://www.mysite.com/NewOrder)但我想向我的元素添加一个 ID 标签。

然后我尝试了这个

```
 @Html.ActionLink("Create New Order", "Index", "NewOrder", new {@id = "orderlink"}) 
```

这会创建一个[http://www.mysite.com/Orders?Length=8的链接](http://www.mysite.com/Orders?Length=8)

**更新：**

当我使用提供的解决方案时，

@Html.ActionLink("创建新订单", "索引", "NewOrder", new { @id = "orderlink" }, null)

我得到一个看起来像这样的链接： [http ://www.mysite.com/NewOrder/Index/orderlink](http://www.mysite.com/NewOrder/Index/orderlink)

我不希望将 orderlink 添加到我的链接/路线中。我希望它添加到 [a] 标签属性中。请参阅问题的顶部。

我想得到这个：

```
 <a id="orderlink" href="/tcap/NewOrder/Index" >Create New Order</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T16:30:06.723

试试[这个](http://msdn.microsoft.com/en-us/library/dd504972.aspx)超载。

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    Object routeValues,
    Object htmlAttributes
) 
```

所以你的代码将是

```
 @Html.ActionLink("Create New Order", "Index", "NewOrder", 
              new {@id = "orderlink"},null) 
```

**编辑：**根据您的评论/更新的问题

使用[这个](http://msdn.microsoft.com/en-us/library/dd505070)重载

```
 @Html.ActionLink("Create New Order", "Index", "NewOrder") 
```

这会给你 `mysite.com/NewOrder/Index`网址

**EDIT2**：如果你愿意， `<a id="orderlink" href="/tcap/NewOrder/Index" >Create New Order</a>`

使用这个，传递 HTML 属性作为[这个](http://msdn.microsoft.com/en-us/library/dd504972.aspx)重载的第五个参数

```
@Html.ActionLink("Create New Order", "Index", 
            "NewOrder",null,new {@id="orderlink"}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:34:13.330

前几天在这里回答了这个问题：

[带参数的 ASP.NET MVC 基本路由](https://stackoverflow.com/questions/11767058/asp-net-mvc-basic-routing-with-parameters/11767143#11767143)

简而言之，在重载中添加一个最终的 null 参数：

```
@Html.ActionLink("Create New Order", "Index", "NewOrder", 
                  new {@id = "orderlink"}, null) 
```

在这种情况下，添加`null`作为最后一个参数 ( `htmlAttributes`) 是您所缺少的（Html.ActionLink 有 9 个重载，因此很容易错过正确的实现）。

# sed - 这个 sed 表达式是什么意思？

> ID：11799704
> 
> 赞同：0
> 
> 时间：2012-08-03T16:29:26.550
> 
> 标签：sed

我正在尝试使用我在工作中继承的一些脚本来解决问题，并想看看是否有人可以破译这个表达式试图完成的内容：

```
|sed -e 's#\(.\{36\}\)\(.*\)#\1|\2#g' | sed -e 's#\(.\{49\}\)\(.*\)#\1|\2#g' 
```

我试图通过参考手册和谷歌对此进行逆向工程，但没有成功。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:34:10.450

它的意思是

*   在每行的前 36 个字符后插入“|”

*   在该输出中前 49 个字符后插入一个“|”

*   如果该行包含至少 36 个字符或 49 个字符，则所有这些插入都会完成。

*   你可以做的更短，这样：

    `| sed ' s:^.\{36\}:&|:; s:^.\{49\}:&|: '`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:35:03.583

这是两个 sed 语句。第一个在该行的前 36 个字符之后插入一个竖线字符 ('|')，第二个在前 49 个字符之后插入一个竖线字符（包括它在第一步中插入的竖线）。

据我所知，这些可以写得更简洁，效果相同：

```
|sed -e 's#\(.\{36\}\)#\1|#' | sed -e 's#\(.\{49\}\)#\1|#' 
```

# wpf - 关闭调用者窗口的命令的正确设计？

> ID：11799708
> 
> 赞同：1
> 
> 时间：2012-08-03T16:29:35.660
> 
> 标签：wpf, design-patterns, command

我有一个 WPF 对话框（Window 的继承者）。该对话框有一个“确定”按钮，该按钮绑定到 ViewModel 上的“进程”命令。（“进程”命令是 Josh Smith RelayCommand。）“确定”按钮上的命令参数设置为对话窗口本身。如果处理成功，则从 ViewModel 的命令处理程序内部关闭对话窗口。在我看来，这似乎违反了单一职责原则。可能会或可能不会关闭调用者窗口的命令的正确模式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:39:06.990

尽管看起来有些设计模式被破坏了，但 ViewModel 可能知道其 View 以实现特定任务（例如关闭对话框或设置特定状态）的常见做法。

在 View-ViewModel 绑定期间，可以使用对 View 的引用来初始化 ViewModel。稍后通过执行命令，ViewModel 可以使用视图通过通用接口提供的功能。

在您的情况下，我建议这样做（就像[Caliburn Micro](http://caliburnmicro.codeplex.com/)一样），而不是将 Window 作为`CommandParameter`.

# python - 如何在 Python 中替换字符串的特定部分

> ID：11799710
> 
> 赞同：1
> 
> 时间：2012-08-03T16:29:45.863
> 
> 标签：python, python-2.7, web-scraping

截至目前，我正在尝试抓取 Good.is。截至目前的代码为我提供了常规图像（将 if 语句变为 True），但我想要更高分辨率的图片。我想知道如何替换某个文本以便下载高分辨率图片。我想更改 html：[http](http://awesome.good.is/transparency/web/1207/invasion-of-the-drones/flash.html) ://awesome.good.is/transparency/web/1207/invasion-of-the-drones/flash.html为[http://awesome.good.is/transparency/web/1207 /invasion-of-the-drones/flat.html](http://awesome.good.is/transparency/web/1207/invasion-of-the-drones/flat.html)（结局不同）。我的代码是：

```
import os, urllib, urllib2
from BeautifulSoup import BeautifulSoup
import HTMLParser

parser = HTMLParser.HTMLParser()

# make folder.
folderName = 'Good.is'
if not os.path.exists(folderName):
  os.makedirs(folderName)

list = [] 
# Python ranges start from the first argument and iterate up to one
# less than the second argument, so we need 36 + 1 = 37
for i in range(1, 37):
    list.append("http://www.good.is/infographics/page:" + str(i) + "/sort:recent/range:all")

listIterator1 = []
listIterator1[:] = range(0,37)      
counter = 0

for x in listIterator1:

    soup = BeautifulSoup(urllib2.urlopen(list[x]).read())

    body = soup.findAll("ul", attrs = {'id': 'gallery_list_elements'})

    number = len(body[0].findAll("p"))
    listIterator = []
    listIterator[:] = range(0,number)        

    for i in listIterator:
        paragraphs = body[0].findAll("p")
        nextArticle = body[0].findAll("a")[2]
        text = body[0].findAll("p")[i]

        if len(paragraphs) > 0:
            #print image['src']
            counter += 1
            print counter
            print parser.unescape(text.getText())
            print "http://www.good.is" + nextArticle['href']
            originalArticle = "http://www.good.is" + nextArticle['href']
            article = BeautifulSoup(urllib2.urlopen(originalArticle).read())
            title = article.findAll("div", attrs = {'class': 'title_and_image'})
            getTitle = title[0].findAll("h1") 
            article1 = article.findAll("div", attrs = {'class': 'body'})
            articleImage = article1[0].find("p")
            betterImage = articleImage.find("a")
            articleImage1 = articleImage.find("img")
            paragraphsWithinSection = article1[0].findAll("p")
            print betterImage['href']
            if len(paragraphsWithinSection) > 1:
                articleText = article1[0].findAll("p")[1]
            else:
                articleText = article1[0].findAll("p")[0]
            print articleImage1['src']
            print parser.unescape(getTitle)
            if not articleText is None:
                print parser.unescape(articleText.getText())
            print '\n'
            link = articleImage1['src']
            x += 1

            actually_download = False
            if actually_download:
                filename = link.split('/')[-1]
                urllib.urlretrieve(link, filename) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:31:06.430

看看[str.replace](http://docs.python.org/library/string.html#string.replace)。如果这还不足以完成工作，那么您将需要使用正则表达式（[re](http://docs.python.org/library/re.html) -- 可能`re.sub`）。

```
>>> str1="http://awesome.good.is/transparency/web/1207/invasion-of-the-drones/flash.html"
>>> str1.replace("flash","flat")
'http://awesome.good.is/transparency/web/1207/invasion-of-the-drones/flat.html' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:08:02.727

我认为最安全和最简单的方法是使用正则表达式：

```
import re
url = 'http://www.google.com/this/is/sample/url/flash.html'
newUrl = re.sub('flash\.html$','flat.html',url) 
```

"$" 表示只匹配字符串的结尾。即使在您的 url 包含子字符串“flash.html”而不是结尾的情况下（当然不太可能），此解决方案也会正确运行，并且如果字符串没有结束，也会使字符串保持不变（我认为这是正确的行为）使用“flash.html”。

请参阅：[http ://docs.python.org/library/re.html#re.sub](http://docs.python.org/library/re.html#re.sub)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:45:44.030

@mgilson 有一个很好的解决方案，但问题是它将用替换替换所有出现的字符串；因此，如果您在 URL 中包含“flash”一词（而不仅仅是尾随文件名），您将有多个替换：

```
>>> str = 'hello there hello'
>>> str.replace('hello','world')
'world there world' 
```

另一种解决方案是将最后一部分替换`/`为`flat.html`：

```
>>> url = 'http://www.google.com/this/is/sample/url/flash.html'
>>> url[:url.rfind('/')+1]+'flat.html'
'http://www.google.com/this/is/sample/url/flat.html' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T17:07:22.613

使用`urlparse`你可以做一些小事：

```
from urlparse import urlsplit, urlunsplit, urljoin

s = 'http://awesome.good.is/transparency/web/1207/invasion-of-the-drones/flash.html'

url = urlsplit(s)
head, tail = url.path.rsplit('/', 1)
new_path = head, 'flat.html'
print urlunsplit(url._replace(path=urljoin(*new_path))) 
```

# ios - 如何使用 Titanium 检索用户 iOS 版本

> ID：11799714
> 
> 赞同：0
> 
> 时间：2012-08-03T16:30:02.007
> 
> 标签：ios, titanium, version

有没有办法检索用户在使用我的应用程序时使用的 iOS 版本？我正在使用钛，想知道是否有任何方法可以说明这一点。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:38:39.970

文档是你的朋友 -> [Ti.Platform.version](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Platform-property-version)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T12:41:58.210

`Ti.Platform.version`将返回完整版本。`Ti.Platform.name`会告诉你它是否是 iOS（`iPhone OS`在这种情况下，Titanium 返回“”。

# java - 为什么阿拉伯语字符不出现在 android 2.2 的模拟器中

> ID：11799718
> 
> 赞同：0
> 
> 时间：2012-08-03T16:30:12.920
> 
> 标签：java, android, encoding, arabic

我已经使用了这个[链接](http://mdictionary.wordpress.com/2011/02/10/connected-arabic-characters-for-android-apps/)中的示例，它在 android 2.3 上很好地显示了阿拉伯语，但在 android 2.2 中什么也没出现，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:33:58.770

直到 2.2 之后才支持阿拉伯语

2.3 引入了一堆新的语言支持[功能](http://www.androidcentral.com/gingerbread-gets-arabic-slew-other-new-languages)。

# string - 你如何准备一个包含非法字符和超链接的字符串，以便在 AS3 的 MXML 中显示？

> ID：11799722
> 
> 赞同：0
> 
> 时间：2012-08-03T16:30:32.650
> 
> 标签：string, actionscript-3, hyperlink, mxml, illegal-characters

我相信我的问题很简单：例如，我有一个字符串，

" 这是一个包含 " 和 <<< 和 >>> 之类的愚蠢字符的字符串，嘿看起来是一个超链接[http://www.google.com](http://www.google.com) "

我的问题是如何使用 AS3 准备此字符串以在 MXML 视图上显示？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:54:57.793

[http://forums.adobe.com/thread/756042](http://forums.adobe.com/thread/756042)

[http://cookbooks.adobe.com/post_Hyperlink_Control-13867.html](http://cookbooks.adobe.com/post_Hyperlink_Control-13867.html)

这些链接为您提供了有关如何创建没有任何文本的单个链接的信息，例如`http://www.google.com/`May 这些链接将有助于创建链接！

但是您的问题看起来不同，因此首先您必须使用所有文本制作 html 字符串，并且此时您想要链接的位置必须放置`<A>`具有所需属性的标签，并且您想要特殊字符的位置必须使用其**十六进制代码**或**html 的转义序列，**例如 for & = `&amp;`。我的意思是说制作一个没有头标签的html字符串。然后给这个字符串`<s:RichEditableText>`看例子。

1.  第一种方式。

    `<s:RichEditableText> <s:content> <s:p> Here is a link: <s:a href="www.google.com"</s:a> </s:p> </s:content> </s:RichEditableText>`

2.  第二种方式。

//您的 Actionscript 代码。

`[Bindable] private var _testString:String= "<TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Verdana" SIZE="16" COLOR="#000000" LETTERSPACING="0" KERNING="0">&quot; this is a string containing silly characters like &lt;and &gt; they look a hyperlink <FONT COLOR="#0000FF"><A HREF="http://www.google.com" TARGET="_blank"><B><I><U>http://www.google.com</U></I></B></A></FONT>&quot;</FONT></P></TEXTFORMAT>";`

// 你的 mxml 内容

```
<mx:RichTextEditor id="richEditableText1"
                       width="100%"
                       htmlText="{testString}"
                       height="100%"/> 
```

祝你好运！

# c# - zed 图：如何让我的图从 0,0 开始

> ID：11799727
> 
> 赞同：0
> 
> 时间：2012-08-03T16:31:05.410
> 
> 标签：c#, sql, plot, zedgraph

我希望我的图表从 0,0 开始，但现在它从数据开始的时间开始（因为我不知道 xdatamember 的更好选择是什么来获得我想要的结果。有什么建议吗？

```
 private void Form1_Load(object sender, EventArgs e)
        {
        dataAdapter = new SqlDataAdapter(strSQL, strCon);
        commandBuilder = new SqlCommandBuilder(dataAdapter);

        // Populate a new data table and bind it to the BindingSource.
        DataTable table = new DataTable();
        table.Locale = System.Globalization.CultureInfo.InvariantCulture;
        dataAdapter.Fill(table);
        bindingSource.DataSource = table;

        // Resize the DataGridView columns to fit the newly loaded content.
        dataGridView.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCellsExceptHeader);
        // you can make it grid readonly.
        dataGridView.ReadOnly = true;
        // finally bind the data to the grid
        dataGridView.DataSource = bindingSource;
        GraphPane myPane = height.GraphPane;

        // Create a new DataSourcePointList to handle the database connection
        DataSourcePointList dspl = new DataSourcePointList();

        // Specify the table as the data source
        dspl.DataSource = table;

        dspl.XDataMember = "age";
        dspl.YDataMember = "height";

        LineItem Curve1 = myPane.AddCurve("student 1", dspl, Color.pink, SymbolType.None);
        height.AxisChange();
        myPane.Chart.Fill = new Fill(Color.White, Color.LightGray, 45.0F);

        // set the title and axis labels
        myPane.Title.Text = "student heights";
        myPane.XAxis.Title.Text = "age";
        myPane.YAxis.Title.Text = "height";

        myPane.XAxis.Type = AxisType.Date;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:19:26.940

首先，我快速搜索了这类东西，发现了这个：[Lock axis in ZedGraph](https://stackoverflow.com/questions/2681414/lock-axis-in-zedgraph)

您可以将 XAxis.Min 和 YAxis.Min 设置为您希望显示为相应轴的最小值的任何值。我的测试代码如下所示：

```
//static ZedGraph.ZedGraphControl graph = new ZedGraph.ZedGraphControl();
ZedGraph.GraphPane pane = graph.GraphPane;
pane.XAxis.Scale.Min = 0.0;
graph.AxisChange();
graph.RestoreScale(pane);
graph.ZoomOut(pane); 
```

# cocos2d-iphone - 如何让应用程序在 cocos2d 2.0 中处于横向

> ID：11799729
> 
> 赞同：1
> 
> 时间：2012-08-03T16:31:06.930
> 
> 标签：cocos2d-iphone, orientation, xcode4.3, uiinterfaceorientation

（对不起，我不能包含图片。我没有足够高的代表，所以我只提供了图片的链接）

正如标题所说，我的应用在横向模式下遇到问题。我希望整个应用程序处于横向模式，因此我在目标摘要中仅选择了横向左侧和横向右侧。我也放了这个：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        return UIInterfaceOrientationIsLandscape(interfaceOrientation);
    } 
```

在我的 AppDelegate.m 中。我还去了我的 info.plist 并将“初始界面方向设置为横向（左主页按钮）。但是我在模拟器和实际设备上的方向是错误的。这是我在故事板中的图片（我希望它看起来像）

[http://imageshack.us/photo/my-images/836/iphoneimage2.png/](http://imageshack.us/photo/my-images/836/iphoneimage2.png/)

但这就是我的模拟器和设备上的样子

[http://imageshack.us/photo/my-images/440/iphoneimage.png/](http://imageshack.us/photo/my-images/440/iphoneimage.png/)

有谁知道如何解决这一问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:25:08.970

**编辑：**如果您正在运行 Cocos2d 2.0 rc1 或 rc0a，则该`shouldAutorotateToInterfaceOrientation:`方法应放在 RootViewController.m 文件中。如果您运行的是 Cocos2d 2.0，`shouldAutorotateToInterfaceOrientation:`则应将其放在 AppDelegate.m 文件中。

如果您使用 Cocos2d 2.0 rc1 或 rc0a 中的模板之一来创建您的应用程序，则该方法已经在 RootViewController.m 中。

如果您使用 Coco2d 2.0，该方法已经在 AppDelegate.m 中。

您只需要编辑该方法以仅返回您需要的所需方向。

根据您使用的 Cocos2d 2.0 版本，编辑 RootViewController.m 或 AppDelegate.m 类中的方法，使其看起来像这样以适应两个横向方向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

# java - 收到致命警报：bad_certificate

> ID：11799733
> 
> 赞同：21
> 
> 时间：2012-08-03T16:31:27.190
> 
> 标签：java, sockets, ssl, x509certificate, truststore

我正在尝试设置 SSL 套接字连接（并在客户端上执行以下操作）

1.  我生成证书签名请求以获取签名的客户端证书

2.  现在我有一个私钥（在 CSR 期间使用）、一个签名的客户端证书和根证书（从带外获得）。

3.  我将私钥和签名的客户端证书添加到证书链中，并将其添加到密钥管理器中。以及信任管理器的根证书。但是我收到了一个错误的证书错误。

我很确定我使用的是正确的证书。我也应该将签名的客户端证书添加到信任管理器吗？试过了，还是没有运气。

```
//I add the private key and the client cert to KeyStore ks
FileInputStream certificateStream = new FileInputStream(clientCertFile);
CertificateFactory certificateFactory = CertificateFactory.getInstance("X.509");
java.security.cert.Certificate[] chain = {};
chain = certificateFactory.generateCertificates(certificateStream).toArray(chain);
certificateStream.close();
String privateKeyEntryPassword = "123";
ks.setEntry("abc", new KeyStore.PrivateKeyEntry(privateKey, chain),
        new KeyStore.PasswordProtection(privateKeyEntryPassword.toCharArray()));

//Add the root certificate to keystore jks
FileInputStream is = new FileInputStream(new File(filename));
CertificateFactory cf = CertificateFactory.getInstance("X.509");
java.security.cert.X509Certificate cert = (X509Certificate) cf.generateCertificate(is);
System.out.println("Certificate Information: ");
System.out.println(cert.getSubjectDN().toString());
jks.setCertificateEntry(cert.getSubjectDN().toString(), cert);

//Initialize the keymanager and trustmanager and add them to the SSL context
KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
kmf.init(ks, "123".toCharArray());
TrustManagerFactory tmf = TrustManagerFactory.getInstance("SunX509");
tmf.init(jks); 
```

我需要在这里创建某种证书链吗？
我也有一个带有这些组件的 p12，并且在使用非常相似的代码后，将私钥添加到 keymanager 并将根证书从 p12 添加到信任管理器，我可以使它工作。但现在我需要让它在没有 p12 的情况下工作。

编辑：请求堆栈跟踪。希望这应该足够了。（注意：我掩盖了文件名）

```
Caused by: javax.net.ssl.SSLHandshakeException: Received fatal alert: bad_certificate
at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:136)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1720)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:954)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1138)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1165)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1149)
at client.abc2.openSocketConnection(abc2.java:33)
at client.abc1.runClient(abc1.java:63)
at screens.app.abc.validateLogin(abc.java:197)
... 32 more 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T21:54:41.970

您还需要将根证书添加到密钥库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-29T22:38:43.390

删除这两行时出现此错误。如果您知道您的密钥库具有正确的证书，请确保您的代码正在查看正确的密钥库。

```
System.setProperty("javax.net.ssl.keyStore", <keystorePath>));
System.setProperty("javax.net.ssl.keyStorePassword",<keystorePassword>)); 
```

我还需要这个 VM 参数： `-Djavax.net.ssl.trustStore=/app/certs/keystore.jk` 有关更多详细信息，请参见此处： [https ://stackoverflow.com/a/34311797/1308453](https://stackoverflow.com/a/34311797/1308453)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-03T18:00:34.253

前提是服务器证书已签名且有效，您只需要照常打开连接即可：

```
import java.net.*;
import java.io.*;

public class URLConnectionReader {
    public static void main(String[] args) throws Exception {
        URL google = new URL("https://www.google.com/");
        URLConnection yc = google.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                                    yc.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) 
            System.out.println(inputLine);
        in.close();
    }
} 
```

请注意，该 URL 具有 HTTPS 模式以指示使用 SSL。

如果服务器的证书已签名，但您使用与证书中的 IP 地址/域名不同的 IP 地址/域名进行访问，则可以通过以下方式绕过主机名验证：

```
HostnameVerifier hv = new HostnameVerifier() {
    public boolean verify(String urlHostName,SSLSession session) {
        return true;
    }
};

HttpsURLConnection.setDefaultHostnameVerifier(hv); 
```

如果证书未签名，则需要将其添加到 JVM 使用的密钥库中（[有用的命令](http://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html)）。

# java - Morphia 错误：方法 fromDBObject(Class , BasicDBObject) 类型的 Morphia 不适用于参数 (Class , 数据库对象)

> ID：11799737
> 
> 赞同：1
> 
> 时间：2012-08-03T16:31:34.257
> 
> 标签：java, mongodb, spring-mvc, morphia

我编写了一个代码，其中包含嵌入了测试用例信息的套件信息。我编写了 TestCase.java 和 Suite.java，它们似乎没有错误。但是使用我编写的 MongoMapper.java 我得到了这个错误。Morphia 类型中的 fromDBObject(Class, BasicDBObject) 方法不适用于参数 (Class, DBObject)。请帮我解决这个问题，并建议我如何查看我的集合是否在 MongoDB Shell 中更新。谢谢提前。这是我的代码。

```
package com.DrAssist.Morphia.model;
import com.google.code.morphia.Morphia;
import com.mongodb.DB;
import com.mongodb.DBCollection;
import com.mongodb.Mongo;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

import java.net.UnknownHostException;
import static junit.framework.Assert.assertNotNull;
import static junit.framework.Assert.assertNull;

public class MongoMapper {
    Morphia morph;
    Mongo mongo;
    DBCollection DrAssistReport;
    @Before
    public void setUp() throws UnknownHostException {
    morph = new Morphia();
    mongo = new Mongo("127.0.0.1", 27017);
    // This is where we map Persons and addresses
    // But shouldn't the annotation be able to handle that?
    morph.map(Suite.class).map(TestCase.class);
    DB testDb = mongo.getDB( "test" );
    DrAssistReport = testDb.getCollection("DrAssistReport");
    }

    @Test
    public void storePersonThroughMorphiaMapping () {

    Suite suite = new Suite(new TestCase("1",new String[]{"Test1", "Test2", "Test3", "Test4"},"1","5","6","7","889"));
    suite.setSID("1");
    suite.setsuiteName("Suite1");
    suite.setnoOfTests("5");

    DrAssistReport.save(morph.toDBObject(suite));
    Suite suite2 = morph.fromDBObject(Suite.class, DrAssistReport.findOne());
    assertNotNull(suite2.getSID());

    }
} 
```

我得到的错误是 Morphia 类型的 fromDBObject(Class, BasicDBObject) 方法不适用于参数 (Class, DBObject)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:39:53.437

看起来您正在使用此更改之前的 Morphia 版本：[http ://code.google.com/p/morphia/issues/detail?id=15](http://code.google.com/p/morphia/issues/detail?id=15)

您可以尝试将 DrAssistReport.findOne() 的返回值转换为“BasicDBObject”，或者将您正在使用的 Morphia 版本升级到其 Morphia.fromDBObject 方法采用 DBObject 而不是需要 BasicDBObject 的版本。

# c# - 有什么方法可以自动测试在 csproj 中添加的文件是否存在于磁盘中？

> ID：11799739
> 
> 赞同：2
> 
> 时间：2012-08-03T16:31:39.530
> 
> 标签：c#, csproj

我们在 csproj 中工作，提交、更新和删除文件。有时 csproj 在 subversion 存储库中提交，但其内容引用的文件不再存在于磁盘中。

我正在考虑创建一个单元测试来检查引用的内容文件是否真的存在于磁盘中，例如：

```
\Styles\main.css - PASSED
\Styles\main.ie7.css - FAILED -> it does not exist in disk
\Styles\main.ie8.css - PASSED 
```

是否有 C# 示例、任何免费工具或批处理文件可以完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:36:36.397

我创建了一个单元测试来检查文件。这可以放在持续集成服务器中以检查硬盘驱动器中是否存在文件。希望这可以帮助在开发团队工作时面临同样问题的人：

此示例在位于的文件中运行测试`D:\YourProject\Solution\My.Website`

在您的测试项目中处理文件 IO 的助手（假设它是 on `D:\YourProject\Solution\My.Website.Tests`）

```
internal sealed class IOHelper
{
    /// <summary>
    /// get list of files described in csproj
    /// </summary>
    /// <param name="filename"></param>
    /// <returns></returns>
    public static List<string> GetFilesInCSPROJ(string filename)
    {
        var list = new List<string>();
        var lines = File.ReadLines(filename);
        foreach (string line in lines)
        {
            if (line.Contains("<Content Include="))
                list.Add(Regex.Matches(line, "(?:[^\"]+|\\.)*")[2].Value);

        }
        return list;

    }
} 
```

在您的测试项目中（假设它是 on `D:\YourProject\Solution\My.Website.Tests`）

```
/// <summary>
/// Tests for CSPROJ
/// </summary>
[TestClass]
public class TestCSPROJ
{

    /// <summary>
    /// check if CSPROJ content files exist in disk
    /// </summary>
    [TestMethod]
    public void CsProj_Files_Exist_In_Disk()
    {
        string root = Environment.CurrentDirectory.Substring(0, Environment.CurrentDirectory.IndexOf("\\Solution\\TestResults"))
            + "\\Website\\My.Website\\";
        string websiteProj = root + "My.Website.csproj";
        var list = IOHelper.GetFilesInCSPROJ(websiteProj);
        Assert.IsTrue(list != null, "there are no content files added in Portal6.Website.csproj");
        foreach (var item in list)
        {
            Assert.IsTrue(System.IO.File.Exists(root + item), "FAILED - file not found in disk: " + root + item);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-14T22:46:31.007

这是一个 MsBuild 解决方案：http: [//www.neovolve.com/2013/01/11/causing-a-vs-web-project-to-fail-compilation-when-content-is-missing/](http://www.neovolve.com/2013/01/11/causing-a-vs-web-project-to-fail-compilation-when-content-is-missing/)

我改进了此解决方案，以添加对 Build Action 设置为 Embedded Resource 的文件以及具有 Content 的文件的检查：

```
<Target Name="BeforeBuild">
  <ItemGroup>
    <MissingContentFiles Include="@(Content)" Condition="!Exists(%(Content.FullPath))" />
    <MissingResourceFiles Include="@(EmbeddedResource)" Condition="!Exists(%(EmbeddedResource.FullPath))" />
  </ItemGroup>

  <Message Text="Content file: %(Content.FullPath)" />
  <Message Text="Missing content file: %(MissingContentFiles.FullPath)" Condition="'@(MissingContentFiles)' != ''" />
  <Error Text="Content file '%(MissingContentFiles.FullPath)' was not found." Condition="'@(MissingContentFiles)' != ''" ContinueOnError="true" />
  <Error Text="One or more content files are missing." Condition="'@(MissingContentFiles)' != ''" />

  <Message Text="Embedded resource: %(EmbeddedResource.FullPath)" />
  <Message Text="Missing embedded resource: %(MissingResourceFiles.FullPath)" Condition="'@(MissingResourceFiles)' != ''" />
  <Error Text="Embedded resource file '%(MissingResourceFiles.FullPath)' was not found." Condition="'@(MissingResourceFiles)' != ''" ContinueOnError="true" />
  <Error Text="One or more embedded resource files are missing." Condition="'@(MissingResourceFiles)' != ''" />
</Target> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:51:27.523

如果缺少源文件，您的项目不太可能构建。

如果您想阻止签入`*.csproj`文件，除非相关的源文件已存在于源代码管理中，您可能希望在源代码管理系统中编写一个触发器，该触发器将检查该`*.csproj`文件并验证其所有相关源文件是否存在于源代码控制，如果不满足约束，则拒绝签入。

当然，您将遇到用户添加了新源文件并`*.csproj`在同一个原子签入中同时签入新源文件和更新文件的极端情况。

做任何此类事情都高度依赖于使用的源代码控制系统。

# android - Android SQLite 奇怪的行为

> ID：11799740
> 
> 赞同：1
> 
> 时间：2012-08-03T16:31:40.337
> 
> 标签：android, sqlite

任何人都可以解释为什么：

```
db.execSQL("DROP TABLE IF EXISTS Definition;");
db.execSQL("CREATE TABLE Definition (txt TEXT);"); 
```

效果很好，但是

```
db.execSQL("DROP TABLE IF EXISTS Definition; CREATE TABLE Definition (txt TEXT);"); 
```

**什么都不**做（在这个 exec 之后不存在表“定义”）。

*（db 是 SQLiteDatabase 的实例）*

PS 在 iOS 中，两种变体的功能完全相同。以及在 SQLite 管理器（Firefox 插件）中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:37:32.090

SQLite 不想一次执行多个命令。我将所有命令写入一个文本文件，读取行直到“;” 遇到并在循环中一一执行，直到readLine为null；

```
List<String> sqlExpressions = new ArrayList<String>();
try {
    // read table creation sql script from the file
    InputStream inStream = mContext.getResources().getAssets().open("createTables.sql");

    BufferedReader reader = new BufferedReader(new InputStreamReader(inStream, "UTF-8"));
    String line = null;
    while((line = reader.readLine()) != null) {
        sb.append(line + "\n");
        if(line.lastIndexOf(";") > 0) {
            sqlExpressions.add(sb.toString());
    sb = new StringBuilder();
        }
    }
reader.close();
} catch (Exception e) {
   Log.d("DB_Creation", e.getMessage());
}

for (String sqlExpr : sqlExpressions) {
     database.execSQL(sqlExpr);
} 
```

# android - Android项目+Eclipse+注解处理

> ID：11799742
> 
> 赞同：3
> 
> 时间：2012-08-03T16:31:49.790
> 
> 标签：android, eclipse, annotations, annotation-processing

有谁知道如何在 Android 项目中的 Eclipse 中启用注释处理？我做了以下事情：

1.  **使用处理器和META-INF > services**文件创建了一个 Java 项目，其中包含我要使用的处理器的类名；
2.  将处理器项目导出为 .jar 文件；
3.  将处理器 jar 文件导入文件夹（不是 /libs）并配置项目属性以启用注释处理（属性 > Java 编译器 > 注释处理）。

如果我从文件夹中删除 jar 文件，Eclipse 会在项目中报告错误，因为未找到注释处理器。但是如果处理器就位并且配置了 Eclipse，则不会进行处理。

如果我在标准 Java 项目中使用相同的处理器，它就可以正常工作。
有人能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:42:01.997

发现问题：

**项目属性必须将编译器合规级别设置为不低于1.6，否则处理器将不会被执行...**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T07:08:24.977

我正在将 ADT23 与 Eclipse Luna 一起使用。转到您的项目属性并选择`Java Compiler`并选择您`Compiler Compliance Level`到 1.6。然后您的`Annotation Processing`选项将被启用。`compile-libs`在您的项目中创建一个文件夹，将您的文件`lib`夹粘贴到此位置。`jar``androidannotations-3.0.1.jar``compile-libs\androidannotations-3.0.1.jar`

添加`androidannotations-api-3.0.1.jar`到您的项目`libs\androidannotations-api-3.0.1.jar`中。

最后，您必须在工厂路径中添加两个文件路径。例如`{Your Project}/compile-libs/androidannotations-3.0.1.jar`和 `{Your Project}/libs/androidannotations-api-3.0.1.jar`

# django - 是否可以使用带参数的验证器？

> ID：11799744
> 
> 赞同：15
> 
> 时间：2012-08-03T16:31:56.643
> 
> 标签：django

我找不到有关此主题的任何相关答案。我想在 Django 中使用一些参数创建验证器，例如：

在 forms.py 文件中：

```
class DateForm(forms.Form):
    forms.DateField(
        validators=[validate_range_of_date(value,"01/06/2012","31/03/2013")]
        ) 
```

在 validators.py 文件中：

```
def validate_range_of_date(date_to_verify, min_date, max_date):
    ... 
```

我现在可以通过 clean 方法或自定义字段来完成，但我认为通过验证器来完成会更好。是否可以？

提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T21:38:20.037

您可以尝试编写一个返回函数的函数。

```
def date_range_validator(min_date, max_date):
    def innerfn(date_to_test):
        if not (min_date <= date_to_test <= max_date):
            raise ValidationError(
                'Inappropriate date: %s is not between %s and %s' %
                (date_to_test, min_date, max_date)
                )
    return innerfn 
```

然后你可以通过调用这个函数来创建你真正想要的验证器：

```
class DateForm(forms.Form):
    forms.DateField(
        validators=[
            date_range_validator(
                datetime.date(2012, 06, 01), datetime.date(2013, 03, 31)
                )
            ]
        ) 
```

（感谢[@user2577922](https://stackoverflow.com/users/2577922/user2577922)的更正）

PS我没有对此进行测试，但希望你明白 - 编写一个函数，它将你想要的两个日期作为你的范围的界限，并返回一个函数来检查它传递的日期是否在范围。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-02-16T13:41:51.220

我建议看一下[django.core.validators](https://github.com/django/django/blob/master/django/core/validators.py)以了解 Django 如何使用 Regex 验证器，并将其扩展为用于不同类型的字段。

```
class MyValidator (object):
    def __init__(self, params):
        pass  #  Init the instance variables here

    def __call__(self, value):
        pass  # Actual validation logic comes here 
```

只需将您的参数传递给验证器

```
validators=[MyValidator(params)] 
```

还没有测试，但我看不出它为什么不起作用的任何原因。

编辑：

有机会测试它并且它有效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-30T20:18:58.543

基于 amertkara 的解决方案，我将用户的电子邮件地址传递给表单，然后验证用户输入与他自己的电子邮件地址是否相符。

```
# form
class new_user_form(forms.Form):
    def __init__(self, *args, **kwargs):
        own_mail = kwargs.pop('own_mail')
        super(new_user_form, self).__init__(*args, **kwargs)
        self.fields['email'] = forms.EmailField(
            label='',
            required=True,
            validators = [ not_own_mail(own_mail) ]
        )

# validator
class not_own_mail(object):
    def __init__(self, email):
        self.email = email

    def __call__(self, value):
       if value == self.email:
            raise ValidationError('It must be a different email address.')
       else:
           return value 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T16:40:46.990

您可以*尝试*使用 lambda 表达式（我自己从未尝试过，所以我不知道它是否有效）：

```
forms.DateField(validators=[lambda value: validate_range_of_data(value, "01/06/2012", "31/03/2012")]) 
```

当然，您必须问自己这是否比仅在该领域的 clean 方法中验证“更好”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-05-05T19:46:38.917

[您可以构建一个验证器，以内置验证器](https://github.com/django/django/blob/master/django/core/validators.py)为例，不要忘记在类上使用 de deconstructible 装饰器。

```
@deconstructible
class ValidateStartsWith(object):
    def __init__(self, prefix: str):
        self.prefix = prefix

    def __call__(self, value: str):
        value = value.strip()
        if value.startswith(self.prefix):
            if value == self.prefix:
                raise ValidationError(
                    f'El nombre debe incluir el prefijo "{self.prefix}" y algo más'
                )
        else:
            raise ValidationError(
                f'La convención del nombre exige que empieze con el prefijo "{self.prefix}"'
            ) 
```

# crystal-reports - 用于检查字符结构匹配的水晶报告公式

> ID：11799747
> 
> 赞同：0
> 
> 时间：2012-08-03T16:32:10.433
> 
> 标签：crystal-reports, formula

我正在尝试查看是否有一个公式可以检查字符串字段类型中是否使用了某个字符结构，我需要检查它是否匹配，如果不匹配则使用变红。

字母 ALPAH NUM NUM NUM 字母

AA123A - 好的，
A1234A - 变红。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:31:40.267

尝试使用这样的东西作为条件格式公式：

```
local stringvar somefield:={table.string_field};

if len(somefield)=7
    and ascw(somefield[1]) in [65 to 90]
    and ascw(somefield[2]) in [65 to 90] 
    and isnumeric(somefield[3 to 5])
    and ascw(somefield[6]) in [65 to 90] then crBlack else crRed
```

显然，这仅适用于大写字母字符（ASCII 值 65-90），但可以轻松更改以适应您需要的任何内容。

# serialization - 如何使用 RestSharp 将对象发布（作为 XML）到我的 ApiController？

> ID：11799750
> 
> 赞同：3
> 
> 时间：2012-08-03T16:32:12.193
> 
> 标签：serialization, asp.net-web-api, restsharp

我有一个实现 REST API 的 ASP.NET MVC4 网站，我从客户端应用程序中使用它。我的 ApiController 方法以 XML 形式获取和返回复杂对象。

我最近发现了 RestSharp，并开始将我的客户项目转移到那里。但是，我遇到了真正的问题。它似乎*几乎*起作用了——它是如此接近以至于我几乎可以尝到成功的滋味——但我就是不能让它 100% 起作用。

我穿过电线的物体看起来像这样：

```
// The object I'm passing across the wire
public class Example
{
    bool IsActive { get; set; }
    string Name { get; set; }
} 
```

我的 ApiController 方法如下所示：

```
// My ApiController method
public HttpResponseMessage PostExample(Example example)
{
    if (ModelState.IsValid)
    {
        db.Examples.Add(example);

        db.SaveChanges();

        HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, example);

        return response;
    }
    else
    {
        return Request.CreateResponse(HttpStatusCode.BadRequest);
    }
} 
```

当我尝试将对象发布到我的网站时会出现问题，如下所示：

```
var example = new Example () { IsActive = true, Name = "foo" };

var request = new RestSharp.RestRequest("/api/example", RestSharp.Method.POST);

request.AddBody(example, XmlNamespace);

var client = new RestClient();

client.BaseUrl = "foo.com";

var response = client.Execute<Example>(request); 
```

上面的代码确实命中了我的 ApiController 中的 PostExample 方法，并且它有一个 Example 对象作为参数。**但是**Example 对象的属性值与我传递给 Execute 方法的值不同！在一种情况下，IsActive 成员是 false 而不是 true，尽管我也看到了 Name 成员为 null 的情况，它应该有一个值。

我使用 Fiddler 进行了一些调查，似乎在 RestSharp 生成的 XML 中创建*了正确的值。*但是，XML 与 Web 服务器在执行 GET 时发出的格式并不完全相同。差异是微妙的，但似乎在它工作和不工作之间有所不同。Web 服务器端的框架似乎对这些格式差异很敏感，因此错误地解释了 XML。

这是我从 RestSharp 获得的 XML：

```
<Example xmlns="http://schemas.datacontract.org/2004/07/ExampleNamespace">
  <Name>foo</Name>
  <IsActive>true</IsActive>
</Example> 
```

这是我在网络服务器上执行 GET 时得到的（或使用 DataContractSerializer 进行序列化时，这是我之前所做的）：

```
<Example xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/ExampleNamespace">
  <IsActive>true</IsActive>
  <Name>foo</Name>
</TagDto> 
```

RestSharp 版本与 DataContractSerializer 的版本有以下区别：

1.  字段的顺序不同
2.  RestSharp 不包含额外的命名空间 XMLSchema-instance 命名空间
3.  DataContractSerializer 不包含任何空格或换行符（为了便于阅读，我在上面添加了这些）

我很惊讶其中任何一个都会产生很大的不同，但显然它们确实如此。另请注意，在我在 AddBody 调用中添加显式命名空间之前，生成的 XML 中缺少该命名空间（显然），并且传递给我的 ApiController 的 Example 对象是`null`.

无论如何，我注意到 RestSharp 允许您覆盖序列化程序，并提供了一种使用 .NET XML 序列化程序的方法。我尝试使用它（无济于事）。

这是我在调用 AddBody 之前添加的内容：

```
request.XmlSerializer = new RestSharp.Serializers.DotNetXmlSerializer(XmlNamespace); 
```

..这就是我得到的：

```
<?xml version="1.0" encoding="utf-8"?>
<Example>
  <Name>foo</Name>
  <IsActive>true</IsActive>
</Example> 
```

这显然不好，尤其是因为它以 XML 声明开头，我想*这会*导致问题。没有办法关闭它，因为 RestSharp 派生类没有提供这样做的方法。此外，没有命名空间 - 无论我如何尝试在 RestSharp 中设置命名空间（在 DotNetXmlSerializer 的构造函数中，通过设置命名空间成员或通过将命名空间传递给添加正文）。在我看来，这门课只不过是个陷阱。

看起来我唯一的选择是创建自己的序列化程序类并在内部使用 DataContractSerializer。是这样吗，还是我错过了什么？

（顺便说一句，我可以将请求的 RequestFormat 设置为 JSON 并且它可以正常工作 - 但我仍然想知道如何使用 XML 来实现它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:58:12.047

我遇到了一些关于 AddBody 调用未正确序列化 JSON 值的问题，因此可能与您的问题有一些相似之处。而不是 AddBody，您可以尝试：

```
request.AddParameter("text/xml", xmlAsString, ParameterType.RequestBody); 
```

如果可行，您可以查看将第二个参数更改为 xml 对象并查看序列化程序是否执行您想要的操作。

另一种选择可能`XmlMediaTypeFormatter.ReadFromStreamAsync`是没有正确选择正确的序列化程序；您可以尝试覆盖该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:59:58.060

上面的问题是因为 WebAPI 使用的是 DataContractSerializer （而不是你所追求的 XmlSerializer）。要切换它，请按如下方式修改 Global.asax。

```
 var xml = GlobalConfiguration.Configuration.Formatters.XmlFormatter;
 xml.UseXmlSerializer = true; 
```

但是，我建议您对 WebAPI 使用 RESTSharp 格式化程序（而不是使用 .Net 格式化程序）。如果您是 DTO 有循环引用，这将特别有用（.net fx 序列化程序不能很好地处理这个问题）。

在 Global.asax 中，通过输入修改格式化程序

`GlobalConfiguration.Configuration.Formatters.XmlFormatter = //RestSharp XML serializer here`

WebAPI 中序列化的快速概述在[这里，值得一读](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#xml_media_type_formatter)

# javascript - 未捕获的类型错误：以特定顺序展开帖子时无法读取未定义的属性“firstElementChild”

> ID：11799759
> 
> 赞同：3
> 
> 时间：2012-08-03T16:32:35.643
> 
> 标签：javascript, jquery

你们中的任何人都可以帮助我解决 Javascript 问题吗？我正在尝试为我的网站编写一个帖子扩展功能，由于某种原因，每当我展开第一个帖子时，第二个帖子将不再展开，而是重定向到主题页面上的完整帖子。如果我展开第二个帖子，然后再展开第一个，我没有问题。

这是加载页面时运行的代码：

```
function postExpansionPrep(){
    if(!document.body.className){
        var links = document.getElementsByClassName("abbrev");
        for (var i = 0; i < links.length; i++ ){
            (function(e) {
                links[e].firstElementChild.addEventListener("click", function(a){ expandPost(links[e].firstElementChild); a.preventDefault(); }, true);
                console.log(links[e].firstElementChild.href);
            })(i);
        }
    }
} 
```

这是您单击链接以展开帖子时运行的代码。

```
function expandPost(link){
    if(link.hash){
        $.get(link, function(data) {
            var loadedPost = $(data).find("#reply" + link.hash.replace("#",""));
            document.getElementById("reply" + link.hash.replace("#","")).lastElementChild.innerHTML = $(loadedPost).find("blockquote").last().html();
        });
    }
    else{
        $.get(link, function(data) {
            var loadedPost = $(data).find("#parent" + link.pathname.substring(link.pathname.lastIndexOf("/")+1));
            document.getElementById("parent" + link.pathname.substring(link.pathname.lastIndexOf("/")+1)).lastElementChild.innerHTML = $(loadedPost).find("blockquote").last().html();
        });
    }
} 
```

您可以在此处查看实际问题：[http ://www.glauchan.org/test/](http://www.glauchan.org/test/)

顺便说一句，该功能是可选的，因此您需要在 Board Options 菜单中启用 Post Expansion。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T16:49:42.203

该[`document.getElementsByClassName`方法](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)返回一个*活动*节点列表。因此，当处理程序被触发时，`links`将发生变化，并且可能不再有项目在位置`e`- 导致在访问其属性`undefined`时引发错误的值。`firstElementChild`

您不需要从`links`列表中获取当前元素。`a.target`通过或只是动态获取它[`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this#As_a_DOM_event_handler)：

```
function postExpansionPrep() {
    if (document.body.className)
        return;
    var links = document.getElementsByClassName("abbrev");
    for (var i = 0; i < links.length; i++ ) {
        var child = links[i].firstElementChild;
        if (!child) // could be null as well
            continue;
        child.addEventListener("click", function(e) {
            expandPost(this);
            e.preventDefault();
        }, true);
        console.log(child.href);
    }
} 
```

顺便说一句，因为你有可用的 jQuery，你应该使用它，特别是对于附加的事件处理程序：

```
if (!document.body.className)
    $(".abbrev > :first-child").click(function(e) {
        expandPost(this);
        e.preventDefault();
    }); 
```

# android - 在表格中动态添加表格行并在android中的对话框中显示

> ID：11799770
> 
> 赞同：0
> 
> 时间：2012-08-03T16:33:28.283
> 
> 标签：android, dialog

我能够创建一个对话框并在其中显示一个表格，但我想动态地向其中添加更多行。

这些行中应该有文本视图（比如连续 3 个）。

请指导我。

提前致谢

我的代码不起作用，如下所示：

struct3x5 是具有表格布局和 3x5 维度表格的布局文件

1）。点击事件代码

```
 button.setOnClickListener(new OnClickListener()
     {

     public void onClick(View arg0) {

          final String NAMESPACE = "http://tempuri.org/";
            final String METHOD_NAME = "method";    
            final String SOAP_ACTION = "http://tempuri.org/method";
            final String URL = "http://xyz/pqr/webserv.asmx";

            // custom dialog
         final Dialog dialog = new Dialog(context,R.style.cust_dialog);
            dialog.setContentView(R.layout.struct3x5);
            dialog.setTitle("XYZ");

            // set the custom dialog components - text, image and button
            TextView text1 = (TextView) dialog.findViewById(R.id.textView1);
            text1.setText("");

            TextView text2 = (TextView) dialog.findViewById(R.id.textView2);
            text2.setText("Vehicle(Rs in Lacs)");

            TextView text3 = (TextView) dialog.findViewById(R.id.textView3);
            text3.setText("TPP(Rs in Lacs)");

            TextView text4 = (TextView) dialog.findViewById(R.id.textView4);
            text4.setText("PL(Rs in Lacs)");

            TextView text5 = (TextView) dialog.findViewById(R.id.textView5);
            text5.setText("Insurance(Rs in Lacs)");

            String [] data = {};
            String x = " ";
            int colsize = 5;
            int rowcount =(data.length)/colsize;
             try {

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);            
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);

                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                    androidHttpTransport.call(SOAP_ACTION, envelope);
                    SoapObject response = (SoapObject)envelope.getResponse();
                    data = getarray(response);
                }            
                catch (Exception e){
                    Toast.makeText(classname.this,"error",Toast.LENGTH_LONG).show();
                                   }
             createtable(data,rowcount);

            dialog.show();
         }
      }); 
```

2）。**_创建表的函数**

```
private void createtable(String[] data, int rowcount) {
    // TODO Auto-generated method stub
    LinearLayout t1=(LinearLayout)findViewById(R.id.tableLayout3x5);
    //TextView[] tva= new TextView[data.length];

    int count =0;
    for(int i=0;i<rowcount;i++)
    {
        TableRow tr=new TableRow(this);
    tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        for(int j=0;j<(data.length/rowcount); j++)
        {
            TextView text = new TextView(this);
            text.setText(data[count].toString());
    text.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.CENTER_HORIZONTAL));
            tr.addView(text);
            count++;
        }
        t1.addView(tr, new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:09:26.890

您可以执行以下操作以动态添加更多行：

```
LinearLayout table = (LinearLayout)findViewById(R.id.my_container);

TableRow text_row = new TableRow(this);
text_row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

// create new text row for label
TextView text = new TextView(this);
text.setText("My Text");
text.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
text_row.addView(text);

table.addView(text_row, new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
```

# php - 计算根节点内的元素

> ID：11799771
> 
> 赞同：1
> 
> 时间：2012-08-03T16:33:34.337
> 
> 标签：php, xml, parsing, simplexml

我对 php 很陌生，但我一直在谷歌搜索并编写以下代码：

```
<?php

$xml = simplexml_load_file("playlist.xml");
echo 'Count: '.$xml->count();

?> 
```

应该为下一个文件打印 Count: 5 ：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<playlist>
<vid src="video/P_ANIMACION.mp4"/>
<vid src="video/120414MIAMGIOQUIJOTE.mp4"/>
<vid src="video/120314ENSEMBLEDIDER.mp4"/>
<vid src="video/120418ENSEMBLEPRAETERITUM.mp4"/>
<vid src="video/P_AGLOBAL CAJA.mp4"/>
</playlist> 
```

但是我收到“致命错误：调用未定义的方法 SimpleXMLElement::count()”，这看起来不太合乎逻辑，因为 SimpleXMLElement 确实存在计数（请参阅[链接](http://www.php.net/manual/en/simplexmlelement.count.php)）。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:38:06.110

正如我在评论中添加的那样， ->count() 首次添加到 PHP 5.3 中的 SimpleXMLElement 中。如果您使用的是较早的版本，则必须使用：

```
count($xml->children()); 
```

反而。这至少在 PHP 5.3 上给出了相同的答案。

# sql-server - 我需要构建一个触发器来执行复杂的插入任务

> ID：11799772
> 
> 赞同：0
> 
> 时间：2012-08-03T16:33:50.357
> 
> 标签：sql-server

编辑-这是从原始问题扩展而来的。

我需要一个触发器来将某些信息发送到要转移到另一个组的表。然而，只有在 T2 上由 C4 确定的某一类数据在更新时需要传输。

```
create trigger Trig on T2
after Insert, update, delete
if update(C3) --DETERMINES THAT RECORD HAS BEEN UPDATED IN A MANNER THAT NEEDS TO BE  
              TRANSFERRED     
begin
if C4 != 9 return --DETERMINES IF RECORD NEEDS TO BE TRANSFERRED
else
insert P1 --BEGINS PUTTING INFORMATION INTO THE ABLE THAT IS TRANSFERRED
(C1, C2, C3)
select T1.C2, T1.C3, T2.C3 --INFORMATION THAT NEEDS TO BE TRANSFERRED
FROM T1, T2
WHERE T1.C1 = T2.C2 --T1.C1 IS A UNIQUE PRIMARY KEY THAT CONNECTS ROW IN T1 TO ROW
                      IN T2
END
GO 
```

这是完整的测试代码。实际代码将涉及更多不同名称的列。所有表数据类型都相同。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:35:46.343

```
create trigger Trig on T2
after insert, update, delete
as
 -- So that @@rowcount does not get affected by trigger code
    set NoCount on
 -- If c3 column participated in update (it most certainly did in insert)
    if update(C3)
    begin
     -- Insert or update triggered this operation
        if exists (select *
                     from Inserted)
        begin
            insert into P1 (C1, C2, C3)
            select T1.C2, T1.C3, T2.C3 --INFORMATION THAT NEEDS TO BE TRANSFERRED
            from T1
         -- Inserted is a pseudotable holding inserted/updated data
            inner join inserted T2
            on T1.C1 = T2.C2
            where T2.C4 <> 9 --DETERMINES IF RECORD NEEDS TO BE TRANSFERRED
        end
        else
     -- Separate insert for deleted records
     -- To simplify inserting additional info for deleted records only
        begin
            insert into P1 (C1, C2, C3)
            select T1.C2, T1.C3, T2.C3 --INFORMATION THAT NEEDS TO BE TRANSFERRED
            from T1
         -- deleted is a pseudotable holding deleted/updated data
            inner join deleted T2
            on T1.C1 = T2.C2
            where T2.C4 <> 9 --DETERMINES IF RECORD NEEDS TO BE TRANSFERRED
        end
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:42:00.367

您可以访问`INSERTED`触发器中的表以获取`c4`列的值，但如果您可以向我们提供有关您尝试解决的问题的更多信息，也许我们可以建议比触发器更好的替代方案。

[使用插入和删除的表](http://msdn.microsoft.com/en-us/library/ms191300.aspx)

> DML 触发器语句使用两个特殊表：已删除表和已插入表。SQL Server 自动创建和管理这些表。您可以使用这些临时的、驻留在内存中的表来测试某些数据修改的效果并为 DML 触发操作设置条件。您不能直接修改表中的数据，也不能对表执行数据定义语言 (DDL) 操作，例如 CREATE INDEX。
> 
> 在 DML 触发器中，插入表和删除表主要用于执行以下操作：
> 
> *   扩展表之间的参照完整性。
> *   在视图基础的基表中插入或更新数据。
> *   测试错误并根据错误采取措施。
> *   找出数据修改前后表状态之间的差异，并根据该差异采取行动。

# vb.net - vb.net 我的设置

> ID：11799780
> 
> 赞同：2
> 
> 时间：2012-08-03T16:34:21.563
> 
> 标签：vb.net, my.settings

有没有办法`my.settings`动态创建变量？我想根据数据库中的值生成 my.settings 变量，因此 my.settings 变量的数量需要不时变化。

如果我的数据库中有以下值，

```
0
2
6
13
77 
```

生成的 my.settings 变量的名称将是

```
My.Settings.M0
My.Settings.M2
My.Settings.M6
My.Settings.M13
My.Settings.M77 
```

所以我想在应用程序第一次运行时创建这些变量。从数据库中获取数字后的问题。如何使用代码创建这些变量？

还有一种方法可以用代码删除它们因为当数据库的值发生变化并且值不存在时，我需要删除它的变量？

我也想要一些建议，如果这不是一个好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:34:37.953

项目设置似乎在序列化和保存基本类型之外的值方面做得不好。您可以做的是使用用户范围的字符串值设置来存储序列化字典。

对于我的示例，我创建了一个名为`SerializedKeyPercentDictionary`Type`string`和 Scope的设置`User`。我使用 JSON 进行序列化，因为它创建的字符串比大多数其他序列化的长度更短。为此，您需要添加对 System.Runtime.Serializations 的引用。有了这个设置和那个引用，你就可以创建一个全局帮助类来提供一个强类型的字典来管理你的键到百分比的映射：

```
Public Class KeyPercentHelper
    Private Shared _keyPercentDictionary As Dictionary(Of Integer, Decimal)
    Private Shared _initLock As Object = New Object()

    Public Shared ReadOnly Property KeyPercentDictionary As Dictionary(Of Integer, Decimal)
        Get
            If (_keyPercentDictionary Is Nothing) Then
                InitializeDictionary()
            End If
            Return _keyPercentDictionary
        End Get
    End Property

    Shared Sub New()
        AddHandler My.Settings.SettingsLoaded, AddressOf HandleSettingsLoad
        AddHandler My.Settings.SettingsSaving, AddressOf HandleSettingsSaving
    End Sub

    Private Shared Sub InitializeDictionary()
        ' Load dictionary from User Setting.
        SyncLock _initLock
            If (_keyPercentDictionary Is Nothing) Then
                If (String.IsNullOrEmpty(My.Settings.SerializedKeyPercentDictionary)) Then
                    _keyPercentDictionary = New Dictionary(Of Integer, Decimal)()
                Else
                    Dim ser As New System.Runtime.Serialization.Json.DataContractJsonSerializer(GetType(Dictionary(Of Integer, Decimal)))
                    Using memStream As New System.IO.MemoryStream()
                        Using writer As New System.IO.StreamWriter(memStream)
                            writer.Write(My.Settings.SerializedKeyPercentDictionary)
                            writer.Flush()
                            memStream.Position = 0
                            _keyPercentDictionary = CType(ser.ReadObject(memStream), Dictionary(Of Integer, Decimal))
                        End Using
                    End Using
                End If
            End If
        End SyncLock
    End Sub

    Private Shared Sub HandleSettingsLoad(ByVal sender As Object, ByVal e As EventArgs)
        If (_keyPercentDictionary Is Nothing) Then
            InitializeDictionary()
        End If
    End Sub

    Private Shared Sub HandleSettingsSaving(ByVal sender As Object, ByVal e As EventArgs)
        ' Ensure User Setting value is updated before save.
        Dim ser As New System.Runtime.Serialization.Json.DataContractJsonSerializer(GetType(Dictionary(Of Integer, Decimal)))
        Using memStream As New System.IO.MemoryStream()
            ser.WriteObject(memStream, _keyPercentDictionary)
            memStream.Position = 0
            Using reader As New System.IO.StreamReader(memStream)
                My.Settings.SerializedKeyPercentDictionary = reader.ReadToEnd()
            End Using
        End Using
    End Sub
End Class 
```

# asp.net - 已登录用户的密码过期策略

> ID：11799781
> 
> 赞同：0
> 
> 时间：2012-08-03T16:34:22.010
> 
> 标签：asp.net, authentication, change-password

我想使用密码过期策略。对于想要登录网站的用户，我们可以在登录控制的身份验证事件中检查密码。但是已经登录并且不会被登录页面缓存的用户呢？[在这个问题](https://stackoverflow.com/questions/349286/asp-net-membership-password-expiration)中，建议处理`HttpApplication.PostAuthenticateRequest`不是一个好方法的事件。

我正在考虑处理`session_start()`事件。对于每个用户，这会触发一次，我们可以检查用户密码是否是最新的。但是我不知道是否已经登录的用户在几天后访问了该站点，此事件是否会触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:11:06.533

您确定要仅因为密码已过期而将用户注销吗？登录 cookie 过期和密码过期是不同的问题。

我认为维护登录 cookie 没有任何问题，直到它自行过期，然后强制用户在下次登录时更改他/她的密码。只要确保您不会发出过期期限过长的 cookie，那么您的所有用户迟早都必须重新登录。这就是您发现可能的密码过期的地方。

另请注意，检查每个请求的过期时间（无论是 PostAuthenticate 还是 PreHandlerExecute 都无关紧要）可能是不可能的。如果您的站点依赖于外部身份验证源，您就不能去那里检查密码过期时间。想象一下，询问 Google 或 Facebook（如果您的用户在那里进行身份验证）密码是否过期。这不容易（或根本不可能）。

# javascript - 将html链接添加到文本输入框中？

> ID：11799783
> 
> 赞同：0
> 
> 时间：2012-08-03T16:34:33.960
> 
> 标签：javascript, jquery, html

我正在尝试使用以下 jQuery 将 HTML 链接添加到输入框：

```
var E = "<a class='tagged_person' contenteditable='false' href='http://www.google.com'>Click This</a>";
$("input[name='newComment']").val(E); 
```

哪个有效，但它实际上显示了`<a href...`，这是我想要的后端，但在前端，我希望用户将其视为呈现为 HTML`<a>`链接。就像在 Facebook/Twitter 上一样，您可以标记用户，然后有一个链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:36:16.267

我认为您正在寻找 JQuery 方法`.append`。这使您可以传递一个 HTML 字符串并将其解析到 DOM 中。[在这里查看](http://api.jquery.com/append/)

例如：

```
$('#myDiv').append('<a href="www.google.com">Search for it!</a>'); 
```

还有[`.appendTo()`](http://api.jquery.com/appendTo/)，如果它更适合你的审美。

**编辑**：如果你试图将 html 作为文本输入的值，你不能这样做。 `<input type="text">`携带文字，仅此而已。您必须制作自己的输入表单，或使用 JQuery 插件。但是，为什么您仍然希望在表单输入中包含链接？当然，您可以在通过不同的事件处理程序单击表单时重定向用户，但输入是用于*输入*。如果它重定向，那么您一开始并不真正想要输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:44:38.103

You can use the following code, which when select it will open the link in a new window.

```
<form action="../">
<select name="myDestination">
    <option value="http://www.website1.com/">Website 1</option>
    <option value="http://www.google.com/">GOOGLE</option>
</select>
<input type="button"
    value="Open in New Window!"
    onclick="ob=this.form.myDestination;window.open(ob.options[ob.selectedIndex].value)">
</form> 
```

或者无需按下按钮：

```
<form action="../">
  <select onchange="window.open(this.options[this.selectedIndex].value,'_top')">
    <option value="">Choose a destination...</option>
    <option value="http://www.website1.com/">Website 1</option>
    <option value="http://www.google.com/">GOOGLE</option>
  </select>
</form> 
```

还创建了一个 jsfiddle 来演示：[**jsFiddle**](http://jsfiddle.net/aghZQ/)

# web2py - 使用 web2py 应用程序向导时“跳过生成”是什么意思

> ID：11799785
> 
> 赞同：0
> 
> 时间：2012-08-03T16:34:40.063
> 
> 标签：web2py

我在 web2py 应用程序生成向导的第 4 步，我看到一个标有“跳过生成”的按钮，我想知道它的作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:07:16.377

向导的最后一步是为您在向导中配置的应用程序生成实际的应用程序代码（包含有关要生成的应用程序代码的确切部分的选项）。“Skip to generate”按钮出现在向导的每个步骤中，并简单地跳到最后一步，然后您可以在其中生成代码。您跳过的任何步骤将仅保留默认值。

# php - 在 PHP 中实现位掩码或关系 ACL

> ID：11799789
> 
> 赞同：3
> 
> 时间：2012-08-03T16:35:04.753
> 
> 标签：php, mysql, math, acl, bit-masks

我认为 PHP 人熟悉函数中的`E_ALL`和其他各种位掩码常量`error_reporting()`。它们是数字常数，例如：`E_ALL`手段`32676`和`E_NOTICE`手段`8`。我可以说我想要所有错误，但要显示通知，我通过`E_ALL & ~E_NOTICE`作为参数传递来做到这一点`error_reporting()`。但本质上，我告诉它`32759`哪个是`32767 - 8`.

这些位掩码从函数的输出集中获取它们的值，`f(x) = 2^x`并对这些值进行加减运算，我们可以微调要得到的错误。

我正在考虑在我的框架中实现一个更可配置的访问控制。为此，我希望设置用户的位掩码将具有相同的将数值相加的方法，问题是我不知道如何实现这一点，如何检查请求的值和当前值：*用户是否有权访问 foobar？*.

另一个问题是可扩展性。我可能只有 31 个唯一位（因为`2^32`达到了太大且无法维护的状态），如果我需要经历（现在还没有真正计划）这个障碍，那么迁移会很困难吗？我对访问控制的另一个想法是建立一个表，将`user.id`他拥有的访问位的整数值和整数值链接在一起。

**总结一下，以下两个选项中哪一个是更好的解决方案？**：

*   使用用户表中的一个字段来存储位掩码，然后在需要时从中获取请求的位。
*   在表中定义一组访问标志，并拥有一个将用户链接到访问权限的关系表，利用关系数据库的强大功能来满足我们的需求。

我正在研究第二种方法，但我不知道哪种方法最好用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:57:37.277

## 位掩码

位掩码的原始问题是它们违反了数据建模的约定（在此处的[另一个答案中表达，在](https://stackoverflow.com/a/11800074/1428773)[此处](http://www.datajini.com/Technology/DataModelingRules/tabid/121/Default.aspx)和[此处](http://www.agiledata.org/essays/dataModeling101.html)进一步阅读）。一个 4 字节的有符号整数可能只包含`31`不同的值（用整数表示为`2 147 483 648`），并且很难用它们进行计算。在讨论这个话题之前，Stack Overflow 上有各种各样的问题，我曾经通过这些问题来了解 bistmasks 的工作原理。

测试还表明使用位掩码**很难**。理解位运算符需要一种感觉，并且迁移基本上是不可能的。（不可能我的意思是，起初，实施位掩码似乎是[*一件好事*](http://blog.ircmaxell.com/2011/03/difference-between-good-and-good-enough.html)，但毕竟与它可以带来的好处相比，它需要**太多的**支出。）以一个基本的类似门户的网站.. . 我的意思是没有。以*堆栈溢出为例*例如，它有多少独特的特权。实际上，我曾尝试进行计数，但在复杂性中迷失了自己，但我们需要的数量非常接近，如果还没有超过 31 个唯一值的上述障碍的话。更改位掩码含义的项目更新很可能导致长期需要重新计算，并且如果遇到数据库错误，则更容易出错。

虽然我没有准确的、精确的时序数据，但使用位掩码感觉比 ACL 慢。比较数据库大小，内存和存储空间更大，我们利用关系数据库和索引功能的机会更少。对于网站上的用户权限，如果我们有其他可能使用的方法，位掩码是*不行的。*

位掩码可以在多种系统中发挥作用，即[MaNGOS （](http://getmangos.com/)**我**最初是从这里提出这个想法的），其中和其他各种*模板*表定义了使用位掩码的标志**。**但最重要的是，在这些表中，值不可能永远改变，计算是*只读的*，与用户任意获得和失去权限的网站相反。`item_template`

 ****### 示例代码

```
define('U_NIL', 0);
define('U_EXEC', 1);
define('U_WRIT', 2);
define('U_READ', 4);

$our_perm = 7;
$req_perm = U_EXEC | U_WRIT | U_READ;
var_dump( ($our_perm & $req_perm) == $req_perm ); # Will be bool(true)

$our_perm = 3;
var_dump( ... The same thing ...); # Will be bool(false)

$our_perm = U_READ;
$req_perm = U_READ | U_WRIT;
var_dumo(...); # Will be bool(false)

$our_perm = U_READ | U_WRIT | U_EXEC;
$req_perm = U_READ;
var_dump(...); # Will be bool(true) 
```

等等。

我将省去你的代码行，因为[各种](https://stackoverflow.com/questions/5319475/bitmask-in-php-for-settings) [其他](https://stackoverflow.com/questions/1380045/why-should-i-use-bitwise-bitmask-in-php) [问题](https://stackoverflow.com/questions/5380506/improve-this-php-bitfield-class-for-settings-permissions)恰当地描述了该方法，在某种程度上我永远无法描述它。位掩码看起来不错，位掩码似乎很奇特，但让它们在生产中安定下来是没有意义的。

## 访问控制列表

原始问题中描述的另一个选项是利用关系数据库和 SQL 语言在数据库中设置权限。我们需要在数据库中再创建两个表：

```
CREATE TABLE `perm_relation` (
    `row_id` int(10) NOT NULL AUTO_INCREMENT,
    `user_id` int(10) NOT NULL,
    `perm_id` int(10) NOT NULL,
    PRIMARY KEY (`row_id`),
    UNIQUE `permission` (`user_id`, `perm_id`)
) ENGINE=InnoDB;

CREATE TABLE `permission` (
    `id` int(10) NOT NULL AUTO_INCREMENT,
    `name` varchar(64) NOT NULL,
    PRIMARY KEY (`row_id`)
) ENGINE=InnoDB; 
```

`perm_relation.perm_id`将是指向的外键`permission.id`，`perm_relation.user_id`将是我们的关系`users.id`。在此之后，这只是我们如何组合我们的编程逻辑的问题。

```
SELECT row_id FROM perm_relation
WHERE perm_id = (SELECT id FROM permission WHERE name = "U_SUPERADMIN")
AND user_id = CURRENT_USER_ID; 
```

使用这种方法，我们可以实现更高的兼容性、更快的执行和更轻松的迁移。添加新权限只需要很短的时间，既可以定义新权限，也可以将一些权限授予任意用户。删除同样简单，只需要一个小的 SQL 查询来优化我们的表以删除孤立的整体（例如：具有权限的用户没有在系统中定义相关权限）。

因为我们将这个系统实现到 PHP 环境中，我们可以假设会有某种管理页面，其中有许多依赖于这个权限列表的特性。列出按他们拥有的权限过滤的用户的示例就是一个示例。在这种情况下，ACL 比位掩码好得多，因为我们可以进一步利用`JOIN`语句……甚至更多。

结论是位掩码和关系模式有不同的用途。位掩码对于用户权限系统**来说太多**且非常庞大，而在上面提到的 MaNGOS 示例中，关系表将是一种过度杀伤力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:57:05.100

您永远不应该在数据库中使用代表多个不同值的大整数。每个字段一个值，这是数据建模（或其他东西）的第一定律。

换句话说，你应该有第二张桌子说；一个用户 ID 字段和访问位。

用户特权：

*   用户 ID，整数，主要
*   特权，诠释****

# ruby - 停止运行黄瓜测试功能

> ID：11799790
> 
> 赞同：3
> 
> 时间：2012-08-03T16:35:05.877
> 
> 标签：ruby, testing, cucumber

是否可以在运行时取消黄瓜测试？我尝试过`Ctrl`+`C`和`esc`，但无济于事。一旦我开始运行测试，我可以停止黄瓜的唯一方法是等待测试完成或使用操作系统手动终止进程。有没有更好的办法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T16:37:59.190

按`Ctrl`+`C`和`Ctrl`+`C`两次。它应该立即停止。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T09:31:16.307

试试`Ctrl`+ `Z`。它停止了测试，但把一些事情搞砸了，因为我认为它认为这个过程还在继续。如果您`rake db:test:prepare`在停止测试后尝试，通常会有效。这需要一分钟左右，但它比等待大量 JavaScript 的长时间测试要快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-28T17:11:44.937

`CTRL+Z`在 Mac 上

`CTRL+C`在窗户上按两次

会打断黄瓜测试

# file - 从网页访问服务器上的文件

> ID：11799792
> 
> 赞同：3
> 
> 时间：2012-08-03T16:35:18.710
> 
> 标签：file, tomcat, hosting

我正在处理一个显示需要通过（JSF）文件上传更新的pdf文件的网页。我的问题是，如何设置我的网页，以便这个新上传的文件实际上取代旧的？

我有文件上传工作，以便管理员用户可以上传不同的 pdf 文件来替换当前显示的文件，将 pdf 发送到我的 tomcat 服务器中的文件夹，文件名与以前显示的文件名相同。我这样做是因为我知道您无法将 pdf 保存到 Web 应用程序中的资源文件中，因为这些文件在应用程序运行时不会动态加载。我正在使用以下 HTML 来显示 pdf：

```
<object id="pdf" data="uploads/folder/replaceable.pdf" type="application/pdf" width="100%" height="100%">
      <p>It appears you don't have a PDF plugin for this browser.
      No biggie... you can <a hRef="uploads/folder/replaceable.pdf" onClick="updatePDF();">click here to
      download the PDF file.</a></p>
</object> 
```

我已经看到[上传的图像仅在刷新页面后可用，](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page)以及[我如何在 java webapp 中的服务器上保存和检索图像，](https://stackoverflow.com/questions/8516387/how-i-save-and-retrieve-an-image-on-my-server)并看到这可以使用`<Context>`标签来完成，以类似于我的方式来检索文件`data="uploads/folder/replaceable.pdf"`，但我没有对标签一无所知，`<Context>`无法让它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:05:23.647

不确定这是否可行，但我已经使用 JQuery 和 Ajax 完成了一个异步上传脚本，该脚本在页面上运行时更新图像。这*也可能*适用于您的场景。

基本原理：用JQuery和Blueimp上传库创建上传脚本：http: [//blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

将上传指向 servlet、JSP 页面或处理上传的此类。此页面将存储文件和需要的内容，然后将带有 JSON 或 XML 数据的回调提供回发送上传的页面，包括存储文件的文件名。然后使用 JQuery 在 JSF 页面上更新对象的内容。

请注意，每次上传的文件名都应该改变；否则浏览器可能会尝试从缓存中获取旧的 PDF 文件并且没有任何更改。在我写这篇文章的时候，我不知道如何解决这个问题，所以你可能需要对它做更多的研究。

为了您的方便，我还写了[一篇](http://contextroot.blogspot.fi/2012/04/asynchronous-file-upload-with-jquery.html)关于它的博客文章，可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:55:18.650

我认为您遇到的问题是浏览器正在缓存 PDF 文件，即使服务器上有一个新文件可用，浏览器也没有获取它。为了强制浏览器获取最新版本的 PDF 文件，您需要将 HTTP 响应中的过期标头设置为非常短的时间。有关在 Tomcat 中进行设置的更多信息，请参见[此处](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/filters/ExpiresFilter.html)。我相信这是自 Tomcat 7 以来才提供的功能。对于以前的版本`Tomcat`，您需要自行`Servlet`修改响应标头，您可以通过谷歌搜索轻松找到它。

要查看实际的 HTTP 响应标头，您可以使用 Chrome 或 Firebug 中内置的开发人员工具和 Firefox。

这是您需要的 web.xml 中的相关条目：

```
<!-- EXPIRES FILTER -->
<filter>
    <filter-name>ExpiresFilter</filter-name>
    <filter-class>org.apache.catalina.filters.ExpiresFilter</filter-class>
    <init-param>
        <param-name>ExpiresByType application/pdf</param-name>
        <param-value>access plus 1 minutes</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>ExpiresFilter</filter-name>
    <url-pattern>uploads/folder/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

# android - 什么是android中的网络服务？

> ID：11799797
> 
> 赞同：4
> 
> 时间：2012-08-03T16:36:04.310
> 
> 标签：android, web-services

任何人都可以说出android中Web服务的确切含义。每个地方都能找到如何使用不同的协议调用 webvservice。但我不明白究竟什么是网络服务。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T16:49:33.157

在您使用 HTTP 通过 Web 访问它们的意义上，Web 服务类似于网页。不同之处在于您通常获取原始数据而不是演示页面。例如，您可能会返回一行记录，例如地址。所以传输层是HTTP。Android 的数据通常会以 JSON 或 XML 编码。您可以使用 HttpClient 或 URLConnection 访问该服务。通常，您可以在浏览器中测试 Web 服务以查看返回的内容，并且通常会看到 JSON 或 XML 格式的数据。对于 JSON，您可以使用 simple_json 之类的库来提取到 java 对象中。XML 通常使用 SAX 解析器进行处理。它们真的很容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:43:29.883

Android 中的 Web 服务就像任何其他计算机一样，通过 HTTP 请求信息。

“Web 服务可以将您的应用程序转换为 Web 应用程序”（来自 w3schools.com）意味着您可以使用 Web 服务来提供更丰富和更新的体验。例如，如果您的应用程序是一个文本编辑器，它可以检查 Web 服务的更新，而不是强制用户检查网站的更新。另一个示例是将您自己的客户端写入 Facebook，这将使用多个 Web 服务调用并依赖 Facebook 将内容呈现给用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-14T09:18:08.633

> Web 服务是用于在异构类型的应用程序或系统之间交换信息的标准。以各种编程语言编写并在各种平台上运行的软件应用程序可以使用 Web 服务通过 Internet 使用 http 协议交换信息。这种互操作性可以在 Java 和 Dot net 应用程序之间，或者 PHP 和 Java 应用程序之间实现。

例如，android 应用程序可以使用 Web 服务与 java 或 .net 应用程序进行交互。

# vb.net - 登录cookie被重置为空？

> ID：11799801
> 
> 赞同：0
> 
> 时间：2012-08-03T16:36:19.673
> 
> 标签：vb.net

好的，所以我正在尝试制作一个程序，该程序将登录到 [b]my [/b] 站点，机器人/软件将我登录，但是当我移动到我的 rpg 中的任何其他页面时，它会将我注销，我认为是因为我重置了让我登录的 cookie。

所以这是我的登录按钮的代码

```
Public Class Form1
    Dim logincookie As CookieContainer

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        Dim postData As String = "username=" & TextBox2.Text & "&password=" & TextBox1.Text & "&submit=Login"
        Dim tempCookies As New CookieContainer
        Dim encoding As New UTF8Encoding
        Dim byteData As Byte() = encoding.GetBytes(postData)

        Dim postReq As HttpWebRequest = DirectCast(WebRequest.Create("http://www.myurl.net/login.php?tid="), HttpWebRequest)
        postReq.Method = "POST"
        postReq.KeepAlive = True
        postReq.CookieContainer = tempCookies
        postReq.ContentType = "application/x-www-form-urlencoded"
        postReq.Referer = "http://www.myurl.net/login.php?tid="
        postReq.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1"
        postReq.ContentLength = byteData.Length
        Dim postreqstream As Stream = postReq.GetRequestStream()
        postreqstream.Write(byteData, 0, byteData.Length)
        postreqstream.Close()
        Dim postresponse As HttpWebResponse

        postresponse = DirectCast(postReq.GetResponse(), HttpWebResponse)
        tempCookies.Add(postresponse.Cookies)
        logincookie = tempCookies
        Dim postreqreader As New StreamReader(postresponse.GetResponseStream())

        Dim thepage As String = postreqreader.ReadToEnd

        RichTextBox1.Text = thepage

    End Sub 
```

注意顶部的 Dim logincookie As CookieContainer....

一切都很完美（它让我登录）然后我现在有另一个按钮来测试我是否可以提交一个基本的 html 表单

这是那个按钮代码

```
 Private Sub Button3_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
        Dim request As HttpWebRequest = DirectCast(WebRequest.Create("http://myurl.net/signature.php"), HttpWebRequest)
        request.CookieContainer = logincookie
        Dim response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
        Dim reader As New StreamReader(response.GetResponseStream())
        Dim theusercp As String = reader.ReadToEnd

        RichTextBox2.Text = theusercp
    End Sub 
```

注意我没有在这个顶部声明 Dim logincookie As CookieContainer 可能是我出错了？在我单击第二个按钮并且这段代码处于活动状态后，它会将我注销...我认为是我在重置登录 cookie 吗？或者也许没有设置正确？

我试图让用户可以通过这个 exe 登录到我的网站并在那里更新 sig 等...

PS这两个按钮都会将html提交给我，这样我就可以看到注销了

# iphone - UIPageViewController 旋转后将子视图置于前面

> ID：11799807
> 
> 赞同：1
> 
> 时间：2012-08-03T16:36:49.417
> 
> 标签：iphone, ios5, rotation, subview, uipageviewcontroller

我有一个 UIPageViewController，我在其中添加了两个子视图：一个带有 UITapGestureRecognizer 的透明子视图和一个带有一些按钮的工具栏，当我点击另一个子视图时，这些按钮会从底部向上滑动。

编辑。这是 viewDidAppear:(BOOL)animated 中的子视图设置

```
CGRect frame;
if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice]orientation])){
    frame = CGRectMake(50, 0, 220, 480);
}
else {
    frame = CGRectMake(50, 0, 380, 320);
}
if (!tapView) {
    tapView = [[LSTapView alloc]initWithFrame:frame];
    //[tapView setBackgroundColor:[UIColor colorWithRed:1 green:0 blue:0 alpha:0.4]];
    [self.view addSubview:tapView];
    [tapView release]; 
}
else {
    if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice]orientation])){
        [tapView setFrame:CGRectMake(50, 0, 220, 480)];
        [fontViewController.view setFrame:CGRectMake(0, 480, 320, 92)];
    }
    else {
        [tapView setFrame:CGRectMake(50, 0, 380, 320)];
        [fontViewController.view setFrame:CGRectMake(0, 320, 480, 92)];

    }
}

if (!fontViewController){
    fontViewController = [[LSFontViewController alloc]initWithNibName:@"LSFontView" bundle:nil];
}
if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice]orientation])){
    [fontViewController.view setFrame:CGRectMake(0, 480, 320, 92)];
}
else {
    [fontViewController.view setFrame:CGRectMake(0, 320, 480, 92)];
}

[self.view addSubview:fontViewController.view]; 
```

如果我在不旋转设备的情况下更改页面，则在两个方向上一切正常。然而，当我旋转设备时，这两个子视图消失了，我发现它们不在前面。无论如何，如果我将其添加到我的代码中：

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{
    [self.view bringSubviewToFront:tapView];
    [self.view bringSubviewToFront:fontViewController.view];
} 
```

发生了一些奇怪的事情：我无法再更改页面，或者更好的是，上一个和下一个 viewController 已正确加载，但它们没有显示，页面也没有改变。

有人可以解释一下发生了什么吗？

谢谢你。L.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:12:59.313

我通过将 UIPageViewController 注册到 UIDeviceOrientationDidChangeNotification 解决了这个问题，如下所示：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didChangeOrientation) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

并通过添加这个简单的选择器：

```
-(void)didChangeOrientation{
    [self.view bringSubviewToFront:tapView];
    [self.view bringSubviewToFront:fontViewController.view];
} 
```

由于某些我不太了解和理解的原因，简单添加 didRotateFromInterfaceOrientation 选择器会弄乱数据源并导致奇怪的崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:50:35.973

`viewWillAppear`您的问题应该与在 iOS 5 下旋转设备后不会自动调用的事实有关。因此，当您旋转设备时，您重新排列子视图框架的代码不会被执行。我不知道这是 iOS 5 中的错误，还是 iOS 5 的某个特定次要版本中的错误，但我在几周前发现了这一点，并且在存在自动旋转的情况下它也扰乱了我的逻辑。

解决此问题的一种简单方法是：

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{
   [self viewWillAppear:NO];
} 
```

让我知道这个是否奏效。

无论如何，我发现您在`viewWillAppear`. IMO，正确的地方是`viewDidLoad`。

我的建议是处理子视图创建的逻辑`viewDidLoad`，然后在一个单独的方法中处理视图定位的逻辑，我们称之为它`layoutSubviews`，你可以从`viewDidLoad`和调用它`didRotateFromInterfaceOrientation`。

# java - 找不到jsoup方法

> ID：11799808
> 
> 赞同：0
> 
> 时间：2012-08-03T16:36:50.620
> 
> 标签：java, login, jsoup

我试过导入所有的进口，但在 jsoup

```
Connection.Response res = Jsoup.connect("https://www.facebook.com/login.php?login_attempt=1") 
```

编译器找不到连接类，Method.post 也有同样的问题，其他调用工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:44:34.850

根据[Jsoup API](http://jsoup.org/apidocs/org/jsoup/Jsoup.html)的静态方法`Jsoup.connect(...)`返回一个 Connection 对象，而不是 Connect.Response。所以你的代码看起来可能是错误的。

此外，请完整发布您的整个错误消息。

另外，您是否导入了适当的类：

```
import org.jsoup.Connection;
import org.jsoup.Connection.Response;
import org.jsoup.Jsoup; 
```

请注意，此导入：

```
import org.jsoup.*; 
```

不会涵盖 Connection.Response 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-10T03:44:25.230

> 将依赖文件添加到您的**build.gradle**文件中。更多访问：[https ://jsoup.org/](https://jsoup.org/)

```
 // jsoup HTML parser library 
     compile 'org.jsoup:jsoup:1.10.3' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T00:05:45.800

下载并添加最新的 Jsoup .JAR 文件；这是 2013 年 3 月 9 日的版本 1.7.2

然后导入以下内容：

```
import org.jsoup.nodes.Document;
import org.jsoup.*;
import org.jsoup.Connection.*; 
```

但请注意，这样您不必键入 Connection.Response；但只是响应。你也必须添加 .execute() 方法

```
Response res = Jsoup.connect("https://www.facebook.com/login.php?login_attempt=1").execute(); 
```

# c# - WCF ServiceContract 上的“名称”属性能否用于更改服务的 URI？

> ID：11799809
> 
> 赞同：0
> 
> 时间：2012-08-03T16:36:59.203
> 
> 标签：c#, .net, wcf

因此 DataContract 的 DataMember 中的“Name”属性可用于控制生成的序列化 json：

```
[DataContract(Name = "AuthenticationContract")]
public class AuthenticationContract
{
    [DataMember(Name = "first_name")]
    public string FirstName;

    [DataMember(Name = "last_name")]
    public string LastName;

} 
```

结果是：

```
{"first_name":"frank","last_name":"rizzo"} 
```

我希望 ServiceContract 上的 Name 属性会做类似的事情：

```
[ServiceContract(Name="nameapi")]
public class NameAuthenticationService : INameAuthenticationService    
{
    [OperationContract]
    public string GetName()....
} 
```

所以，而不是这个

```
http://localhost:49531/NameAuthenticationService/GetName 
```

...我可以用这个

```
http://localhost:49531/nameapi/GetName 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:07:41.773

不，ServiceContractAttribute.Name 控制`<portType>`您从服务发布的 WSDL 所公开的内容。您要做的是更改服务的基地址，您应该可以在服务的 .config 文件中设置它（如果您是自托管的，则可以手动设置）。请参阅[http://msdn.microsoft.com/en-us/library/ms788982(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms788982(v=VS.85).aspx)

# sql-server - 如何在插入 uniqueidentifier 主键列时观察性能开销？

> ID：11799810
> 
> 赞同：5
> 
> 时间：2012-08-03T16:37:02.617
> 
> 标签：sql-server, performance, indexing, guid, clustered-index

正如之前已经讨论过很多次并且是一个已知事实 - 在 sql server 中，在 uniqueidentifier 主键列上有一个聚集索引会影响性能。

我想做的是通过发布插入和测量某些指标来观察这个问题。我有 2 个带有唯一标识符 PK 的表；一个以“newid()”为默认值，另一个以“newsequentialid()”为默认值。我计划在每个中插入大约一百万行并观察 INSERT 性能。

我应该特别查询什么？如何最好地观察顺序 GUID 优于随机 GUID 的性能增益？是否有某些系统视图、存储过程可以提供有关索引页面拆分和/或其他相关信息的统计信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:20:56.217

虽然下面的链接将给出 int 和 guid 之间的比较，但您可以按照类似的方法尝试一下。
[https://dba.stackexchange.com/questions/9821/why-do-sequential-guid-keys-perform-faster-than-sequential-int-keys-in-my-test-c](https://dba.stackexchange.com/questions/9821/why-do-sequential-guid-keys-perform-faster-than-sequential-int-keys-in-my-test-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:57:07.363

创建一个在生产中具有应用程序特征的工作负载。然后衡量您关心的内容：通常是吞吐量和 95% 的延迟。

# c# - 内部元素的 XML 反序列化

> ID：11799813
> 
> 赞同：0
> 
> 时间：2012-08-03T16:37:26.633
> 
> 标签：c#, .net, xml, serialization, deserialization

是否可以将内部 xml 元素反序列化为其等效类？我有以下 xml 片段：

```
<?xml version="1.0" encoding="utf-8" ?>
<tileconfiguration xmlns="http://somenamespace/tile-configuration">
   <tile top_left_x="3" top_left_y="1" bottom_right_x="38" bottom_right_y="48">
     <child>
     </child>
   </tile>
</tileconfiguration> 
```

`<tile />` 和代表元素的等效类：

```
[System.Xml.Serialization.XmlRoot(ElementName = "tile")]
public class Tile : System.Xml.Serialization.IXmlSerializable
{
    public System.Xml.Schema.XmlSchema GetSchema()
    {
        throw new NotImplementedException();
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        throw new NotImplementedException();
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        throw new NotImplementedException();
    }
} 
```

问题是，每次我尝试反序列化`<tile />`- XML 反序列化器**在文档 (2,2) 中**`<tile_configuration />`引发错误时。

 **```
 System.Xml.Serialization.XmlSerializer serial = new System.Xml.Serialization.XmlSerializer(typeof(Tile));
        System.IO.TextReader t = new System.IO.StreamReader("c:\\temp\\deserial.xml");
        Tile q = (Tile)serial.Deserialize(t); 
```

如果我创建一个类来`<tile_configuration />`直接表示和反序列化，它工作正常，调试器进入类`ReadXml`上的方法，`TileConfiguration`然后我可以从中管理子`<tile />`（和后代）元素的解析 - 但这需要重新阅读每次整个 xml 文件。

简而言之; 我是否需要读取和写入整个 XML 文件 - 每次我想使用序列化/反序列化时从根 xml 元素开始，或者有没有办法让我忽略多余的外部元素并直接将相关的子 xml 元素反序列化到他们的没有解析器卡盘错误的代码等效项？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:04:27.563

是的。一种想法是加载 xml 并使用 Xpath 查询选择所需的节点。然后反序列化查询结果表示的xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:25:09.950

如果您想忽略外部元素并拥有完全控制权和低开销的快速实现，我建议不要使用`XMLSerializer`而是分别使用`XmlReader`and `XmlWriter`。

您还可以通过使用 a`XmlReader`构建中间 DOM 并使用 an`XMLSerializer`将 DOM 写入输出文件来进行组合方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T20:49:09.027

鉴于您对 XML 的展示，应该没有必要实现 IXmlSerializable。你可以试试这个：

```
[XmlRoot("tileconfiguration")]
public class TileConfiguration
{
    [XmlElement("tile")]
    public List<Tile> Tiles { get; set; }
}

[XmlRoot("tile")]
public class Tile
{
    [XmlAttribute("top_left_x")]
    public int TopLeftX { get; set; }

    [XmlAttribute("top_left_y")]
    public int TopLeftY { get; set; }

    [XmlAttribute("bottom_right_x")]
    public int BottomRightX { get; set; }

    [XmlAttribute("bottom_right_y")]
    public int BottomRightY { get; set; }

    [XmlElement("child")]
    public List<Child> children { get; set; }
}

[XmlRoot("child")]
public class Child
{
}

XmlSerializer serializer = XmlSerializer(typeof(TileConfiguration));
TileConfiguration tileConfiguration = (TileConfiguration)serializer.Deserialize(stream); 
```

您还可以使用 XmlReader 来获取所需的元素：

```
List<Tile> tiles = new List<Tile>();
XmlSerializer serializer = XmlSerializer(typeof(Tile));

using (XmlTextReader xr = new XmlTextReader(xmlStream))
{
    while (!xr.EOF)
    {
        xr.MoveToContent();
        xr.ReadToDescendant("tile");

        if (xr.Name == "tile")
        {
            string tileXml = xr.ReadOuterXml();
            using (StringReader tileReader = new StringReader(tileXml))
            {
                Tile tile = (Tile)serializer.Deserialize(tileReader);
                tiles.Add(Tile);
            }
        }
        else
        {
            xr.ReadEndElement();
        }
    }
} 
```**

# php - PHP MySQL 语句中的特殊字符

> ID：11799817
> 
> 赞同：0
> 
> 时间：2012-08-03T16:37:58.100
> 
> 标签：php, mysql, char

我有一些特殊字符存储在 MySQL 数据库中。特别是®。我想选择所有带有这些字符的条目。我目前正在使用此语句：

> mysql_query("SELECT * FROM table WHERE description LIKE '%Â®%' OR name LIKE '%Â®%'");

它返回 0 个条目。当我尝试使用 %a% 的东西时，它会返回很多，所以我知道一切都是正确的，这只是某种字符集问题或其他东西。

当我回显“Â®”时，它返回“å¨”。

此外，当我在 phpmyadmin 中执行完全相同的查询时，它也可以正常工作。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:37:43.193

阅读这对你很有帮助

只需简单地将这些符号添加到您的文本中，并将其作为 SQL 查询执行：

```
INSERT INTO tbl_name VALUES ("Here's my text: ©®"); 
```

当您想显示它时，网站不会对这些符号做任何事情（但请记住至少转义 <、>、&（使用 htmlspecialchars()），因为它们在 XML/SGML (HTML) 文档中具有特殊含义）

PS。还要记住使用 mysql_real_escape_string() 对传递给 SQL 查询的文本进行转义，以避免任何 SQL 注入问题。如果您的服务器启用了 magic_quotes_gpc，请禁用它或至少将您的 GET/POST/COOKIE 数据过滤为其原始值。您应该始终有意识地逃避价值观。编辑：

根据您的评论...我不记得是否默认启用了magic_quotes_gpc，但您可以轻松撤消魔术引号效果。在 PHP 代码的最开始添加如下内容：

```
if (get_magic_quotes_gpc()) {
  array_walk_recursive($_GET, 'stripslashes');
  array_walk_recursive($_POST, 'stripslashes');
  array_walk_recursive($_COOKIE, 'stripslashes');
} 
```

现在每个 GPC 值都应该是原始的——不带引号——所以你必须在将任何变量传递给查询之前手动对其进行转义。

# azure - Windows azure 存储成员 blob 权限

> ID：11799821
> 
> 赞同：2
> 
> 时间：2012-08-03T16:38:05.747
> 
> 标签：azure, azure-storage, azure-blob-storage, azure-acs

一个使用成员身份验证的 azure web 角色，我们如何向角色和用户授予对容器中特定 blob 或容器本身的权限？例如，管理员角色对容器和 blob 具有完全控制权，客户对容器中的发票文档具有读取权限等等......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:39:09.490

我认为您将无法直接使用角色。Blob 和容器只了解密钥、公共和共享访问签名。您可以根据用户的角色为用户提供适当的共享访问签名。

# jquery - jquery准备好的函数没有在函数内部被击中

> ID：11799823
> 
> 赞同：0
> 
> 时间：2012-08-03T16:38:07.243
> 
> 标签：jquery, ruby-on-rails, coffeescript

所以我的 jquery 就绪函数没有被调用。我在该行放置了一个断点，它会命中它，但函数内部没有任何东西被命中。这是从coffeescript 生成的js。

```
(function() {

  jQuery(function() {
     return alert('working');
  });

}).call(this); 
```

所以 jQuery 行的断点被命中，但不是警报。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:42:15.250

据我所知，它的工作原理：

[http://jsfiddle.net/thundercracker/dbdyC/](http://jsfiddle.net/thundercracker/dbdyC/)

* * *

编辑：也许您可以尝试使该功能自动执行，因为它对您不起作用？

```
(function() {

  jQuery((function() {
     return alert('working');
  })());

}).call(this);​ 
```

# sql - 加入时防止双重/三重 SUMing

> ID：11799824
> 
> 赞同：0
> 
> 时间：2012-08-03T16:38:10.027
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我加入两个表：`accn_demographics`和`accn_payments`。两个表之间的关系是`one to many`介于 `accn_demographics.accn_id`和`accn_payments.accn_id`

我的问题是，当我将 PAID_AMT 和 COPAY_AMT 相加时，我得到的数字是我应该得到的两倍/三倍/四倍。

我的情况有明显的问题`join`吗？

```
select sum(p.paid_amt) as SumPaidAmount
    , sum(p.copay_amt) as SumCoPay
    , p.pmt_date
    , d.load_Date
    , p.ACCN_ID
from  accn_payments p
join 
(
    select distinct load_date, accn_id 
    from accn_demographics
) d
    on p.ACCN_ID=d.ACCN_ID
where p.POSTED='Y'
    and p.pmt_date between '20120701' and '20120731'
group by p.pmt_date, d.load_Date,p.ACCN_ID
order by 3 desc 
```

非常感谢您的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:57:27.973

我唯一能看到的是否`(select distinct load_date, accn_id from accn_demographics)`可能会返回几个匹配项。查看您的数据并运行单独的查询

```
select distinct load_date, accn_id from accn_demographics WHERE accn_id=SomeID 
```

其中`SomeID`是返回双/三值的结果帐户之一。那应该可以确定您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:57:28.800

您需要在子查询中进行求和：

```
select sum(p.SumPaidAmount) as SumPaidAmount, sum(p.SumCoPay) as SumCoPay,
       p.pmt_date, d.load_Date, p.ACCN_ID
from  (select accn_id, p.pmt_date, sum(paid_amt) as SumPaidAmt,
              sum(copay_amt) as SumCoPay
       from accn_payments p
       where p.POSTED='Y' and
             p.pmt_date between '20120701' and '20120731'
       group by accn_id, pmt_date
      ) p join
      (select distinct load_date, accn_id from accn_demographics) d
      on p.ACCN_ID=d.ACCN_ID
group by p.pmt_date, d.load_Date,p.ACCN_ID
order by 3 desc 
```

问题：您真的打算让 pmt_date 出现在最终结果中吗？看起来您想从外部 SELECT 和子查询中删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:59:19.390

是的，但对于初学者来说并不那么明显。发生的情况是，对于每条`accn_payments`记录，您只匹配，这意味着如果该特定`accn_id`的 有多个记录，那么由于连接，您将获得重复的记录。是否有另一个限制字段可以重新加入付款？`accn_demographics``accn_id``accn_payment``accn_demographics`

最终，这样想：

accn_payments (p):

```
accn_id    |    paid_amt    |    copay_amt    |  ...
----------------------------------------------------
1          |    100.00      |    20.00        |  ... 
```

accn_demographics (d)：

```
accn_id    |    load_date   |    ...
------------------------------------
1          |    2012/01/01  |    ...
1          |    2012/03/05  |    ...
1          |    2012/06/23  |    ... 
```

加入后，您的结果将如下所示：

```
p.accn_id | p.paid_amt | p.copay_amt | p... | d.accn_id | d.load_date | d...
----------------------------------------------------------------------------
1         | 100.00     | 20.00       | .... | 1         | 2012/01/01  | ....
1         | 100.00     | 20.00       | .... | 1         | 2012/03/05  | ....
1         | 100.00     | 20.00       | .... | 1         | 2012/06/21  | .... 
```

`accn_payments`正如您所看到的，对于每个匹配的记录，都会复制来自的同一行`accn_demographics`，因为您只指定了`accn_id`作为连接条件的列。它不能进一步限制结果，所以数据库引擎说“嘿，看，这条`p`记录匹配所有这些`d`记录，这一定是他要求的！” 显然不是预期的，因为当您对`p.paid_amt`and求和时`p.copay_amt`，它会为所有行执行求和（即使它们是重复的）。

最终，看看您是否可以`accn_demographics`进一步限制加入标准（也许在某个日期），这样您就可以限制加入期间重复付款记录的数量。

# android - 如何禁用默认键盘并在我的应用程序中启用我的键盘？

> ID：11799827
> 
> 赞同：0
> 
> 时间：2012-08-03T16:38:36.957
> 
> 标签：android, android-layout, android-intent, android-widget

在我的应用程序中，一些 EditText 是动态创建的。我想在每个 EditText 上默认禁用 Android 键盘，并启用我的键盘。如何禁用默认键盘并在我的应用程序中启用我的键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:47:23.843

用户可以*选择*切换到您的输入法编辑器（通过设置、长按`EditText`等），但您不能*强制*用户切换到您的输入法编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:52:33.700

```
onClickListener(){

  InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
  imm.hideSoftInputFromWindow(EDIT_TEXT_FIELD.getWindowToken(), 0);

  //Display your key here

} 
```

# perl - Perl Catalyst 中 REST 资源的通用端点

> ID：11799828
> 
> 赞同：2
> 
> 时间：2012-08-03T16:38:39.183
> 
> 标签：perl, rest, catalyst

我定义了几个 REST 资源端点，例如`/user`、`/group`和`/event`，作为单独的控制器。它们都继承自根控制器 ( `App::Web::Controller::Root`)。是否可以在能够识别资源类型的根控制器中为所有这些资源创建一个通用端点？

我的主要用例是`.../list`，我想对其进行一般性定义，它将识别其父资源并返回一个资源实体数组。例如，

```
/user/list      # Array list of user entities
/group/list     # Array list of group entities
/event/list     # Array list of event entities 
```

我可以轻松地创建一个反转资源的动作（例如，`/list/event`自然地由 处理`sub list_GET`）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:42:56.423

我用来识别资源的一种方法是让每个资源控制器在存储中定义其资源，然后让通用操作引用该存储值。

例如，在每个资源控制器中：

```
package App::Web::Controller::User;

sub begin :Auto {
    my ($self, $c) = @_;
    $c->stash(resource => 'User');
} 
```

然后，在根控制器中：

```
package App::Web::Controller::Root;

sub list :Path('list') :ActionClass('REST') {}

sub list_GET {
    my ($self, $c) = @_;
    my $resource = $c->stash->{resource};
    return $self->status_ok($c, entity => {
        list => [ $c->model('App::' . $resource)->find->all ]
    });
} 
```

我对此不太满意，因为它不够通用，因为它要求每个控制器都定义其资源。

# mysql - 用 (my)sql 中的两个 sql 表实现此目的的查询是什么？

> ID：11799834
> 
> 赞同：0
> 
> 时间：2012-08-03T16:39:00.463
> 
> 标签：mysql, sql, join

我有2张桌子A，B是这样的：

```
A.id
A.created
----
B.id
B.data
B.aId 
```

我想选择所有`B.data`符合以下条件的：

*   `A.created`不为空
*   `B.aId`=`A.id`

我的理解是我可以通过使用子查询来解决这个问题，但我怀疑这是 JOIN 语句的情况。如果是这样，我真的很想看看它是如何完成的 :)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:39:54.917

```
select *
from A
join B on A.id = B.aId
where A.created is not null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:44:47.620

```
select * from A 
inner join B on A.id = B.aId and A.created is not null 
```

# php - PHP 页面无法加载。相反，它给了我一个 404 错误

> ID：11799836
> 
> 赞同：0
> 
> 时间：2012-08-03T16:39:02.667
> 
> 标签：php, windows, apache

标题描述了问题。

我在 Apache 的 htdocs 文件夹中安装了 PHP、Apache、MySQL 和 phpMyAdmin。我分别安装了它们，不使用编译包。我确实尝试使用 phpinfo 创建一个 php 文件

```
<?php
 phpinfo();
?> 
```

将文件保存为 phpinfo.php

去的时候

```
http://localhost 
```

我看到列出的 phpinfo.php 文件。当我单击 phpinfo.php 文件时

我收到 404 错误。根 http 文件夹中没有列出其他文件，除了一个 (phpinfo.php)

安装 PHP 并启用 php 短标签

```
short_open_tag = On 
```

我不确定它是大写还是开

注意：我使用[http://www.jesterwebster.com/setting-up-a-test-bench-web-server-with-apache-php-mysql-and-more-on-windows/26](http://www.jesterwebster.com/setting-up-a-test-bench-web-server-with-apache-php-mysql-and-more-on-windows/26)作为我的指南Apache 和 PHP 安装

我打开错误日志，发现一些令人不安的东西。不知道如何解决

```
[Fri Aug 03 13:07:34 2012] [error] [client 127.0.0.1] File does not exist: C:/website/example/online/Program Files, referer: http://localhost/
[Fri Aug 03 13:09:33 2012] [error] [client 127.0.0.1] File does not exist: C:/website/example/online/Program Files, referer: http://localhost/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:25:28.833

根据您的错误日志，您的 DocumentRoot "C:/websites/example/online" 是 websiteS，您的错误日志正在寻找没有 s 的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:13:51.817

您是否从 apache 配置文件中确认 PHP 已启用并正确配置为与 apache 一起使用？配置后是否重启了apache服务器？另外尝试在 htdocs 目录中添加一个 html 文件以确认该目录是否正确。

编辑：您还提到错误日志正在此目录 C:/website/example/online/Program Files 中查找您的文件

但是您提到您将 phpinfo.php 放置在 apache 的 htdocs 文件夹中。可能存在与这两条路径之间的差异有关的问题

# excel - 找不到可安装的 ISAM

> ID：11799839
> 
> 赞同：0
> 
> 时间：2012-08-03T16:39:07.707
> 
> 标签：excel, ms-access

我在 Excel 中设置了与访问数据库的连接以更新一些报告。但是当我尝试刷新工作簿时没有收到此错误：找不到可安装的 ISAM。

这是我正在使用的连接字符串：

```
Provider=Microsoft.ACE.OLEDB.12.0;User ID=Admin;Data Source=\\0datblaset\BlaSet\BLA-AssetMangment.mdb;Mode=Share Deny Write;Extended Properties="";Jet OLEDB:System database="";Jet OLEDB:Registry Path="";Jet OLEDB:Engine Type=5;Jet OLEDB:Database Locking Mode=0;Jet OLEDB:Global Partial Bulk Ops=2;Jet OLEDB:Global Bulk Transactions=1;Jet OLEDB:New Database Password="";Jet OLEDB:Create System Database=False;Jet OLEDB:Encrypt Database=False;Jet OLEDB:Don't Copy Locale on Compact=False;Jet OLEDB:Compact Without Replica Repair=False;Jet OLEDB:SFP=False;Jet OLEDB:Support Complex Data=False;Jet OLEDB:Bypass UserInfo Validation=False 
```

关于我做错了什么的任何想法？有什么建议么？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-03T15:35:23.527

最可能的原因（至少从我自己的经验中发现）是连接字符串的最后一段：

```
Jet OLEDB:Bypass UserInfo Validation=False 
```

如果您或您的用户社区在版本之间使用该文件，例如您使用的是 2013，而您的用户使用的是 2010，那么更高版本会在早期版本无法识别的连接字符串中添加几个附加参数.

有关更多信息，请参阅此链接：https: [//support.microsoft.com/en-us/kb/3041386](https://support.microsoft.com/en-us/kb/3041386)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:46:11.210

这是一个非常复杂的连接字符串，在大多数情况下，您所需要的只是提供程序和文件：

```
strCon = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=\\0datblaset\BlaSet\BLA-AssetMangment.mdb;" 
```

检查连接字符串的好地方是[http://connectionstring.com](http://connectionstring.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:08:06.513

尝试将来源放在单引号中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-21T14:31:36.477

问题在于提供者。在我的特殊情况下，我必须将 DriverID 更改为 1046，就像我的其他连接一样。

```
DSN=ExcelFiles;DBQ=C:\Source\SourceFile.xls;DefaultDir=C:\Source\;DriverId=**1046**;
FIL=MS Access;MaxBufferSize=2048;PageTimeout=5; 
```

![附上我的连接截图](../Images/3d711acb4b174103cefc35e30cea2011.png)

# iphone - 更改 iPhone 键盘的颜色（使用 Phonegap/Cordova）

> ID：11799840
> 
> 赞同：0
> 
> 时间：2012-08-03T16:39:14.353
> 
> 标签：iphone, cordova, colors, keyboard, cordova-2.0.0

正如标题所述：在使用 Phonegap/Cordova 时，是否可以将键盘颜色更改为黑色（有人称之为透明？）？我用谷歌搜索了很多，但我似乎找不到任何关于它的东西。那么可以做到吗？使用 HTML5/jquery 还是在 XCode 中？

我正在寻找的图片：

![在此处输入图像描述](../Images/1cbe4519330ba8f6b0f13936ad24d2ed.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-03T17:32:00.610

要在 iOS 键盘上使用深色主题，您可以[按照这篇文章](https://stackoverflow.com/questions/9728847/how-change-keyboard-background-color-in-ios)进行操作。

您可以将 Objective-C 代码添加到 PhoneGap 项目的`AppDelegate.m`

# javascript - 我想填充下拉列表并相应地填充文本框？

> ID：11799841
> 
> 赞同：-2
> 
> 时间：2012-08-03T16:39:16.930
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, model-view-controller

我有两个下拉列表，我想要，如果我从这两个下拉列表中选择一些东西，第三个文本框将使用 java 脚本自动填充......这是我的控制器..

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using CommerceSuite.Web.Models.Product;
using CommerceSuite.Services;
using CommerceSuite.Web.Models.AdjustStock;
using CommerceSuite.Data.Models;

namespace CommerceSuite.Web.Controllers
{
public class AdjustStockController : Controller
{
    private readonly IProductStockService _productStock;
    private readonly IProductService _product;
    private readonly ILocationDetailService _locationDetail;
    public AdjustStockController(IProductStockService productStock, IProductService product, ILocationDetailService locationDetail)
    {
        this._productStock = productStock;
        this._product = product;
        this._locationDetail = locationDetail;
    }
    //
    // GET: /AdjustStock/

    public ActionResult Index()
    {
        var model = new AdjustStockModel();
        model.products = PopulateProductId();
        model.locations = PopulateLocation();
        return PartialView("_AdjustStock", model);
    }

    [HttpGet]
    public ActionResult StockAdjust()
    {
        var model = new AdjustStockModel();
        return PartialView("_AdjustStock",model);
    }

    private List<SelectListItem> PopulateProductId()
    {
        var collectionProduct = new SelectList(_product.GetAllProduct(), "ProductId", "Name").ToList();
        return collectionProduct;
    }
    private List<SelectListItem> PopulateLocation()
    {
        var collectionLocation = new SelectList(_locationDetail.GetAllLocationDetail(), "LocationId", "Name").ToList();
        return collectionLocation;
    }

    CommerceSuiteWMDBContext context = new CommerceSuiteWMDBContext();
    public JsonResult GetData(AdjustStockModel model)
    {
       var data = context.ProductStocks.Where(o => o.ProductId == model.ProductId && o.LocationId == model.LocationId);
       var data = (from t in context.ProductStocks
                   where t.ProductId == model.ProductId && t.LocationId == model.LocationId
                    select t).SingleOrDefault();
        var jsonData = new
        {
            quantity=data.QuantityAvailable
        };
        return Json(jsonData, JsonRequestBehavior.AllowGet);
    } 
```

这是我的观点..

```
@model CommerceSuite.Web.Models.AdjustStock.AdjustStockModel

@Html.ValidationSummary(true)

    <div class="editor-label">
        @Html.LabelFor(model => model.ProductId)

    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.ProductId, Model.products, "Select Product")
        @Html.ValidationMessageFor(model => model.ProductId)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LocationId)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model=>model.LocationId,Model.locations,"Select Location")
        @Html.ValidationMessageFor(model => model.LocationId)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.SystemStock)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model=>model.SystemStock)
        @Html.ValidationMessageFor(model => model.SystemStock)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ActualStock)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model=>model.ActualStock)
        @Html.ValidationMessageFor(model => model.ActualStock)
    </div>

    <br />

    <div class="block-footer align-right">
        <input type="submit" id="popupConfirmBtn" class="big-button" value="Confirm" />
        <input id="popupCloseBtn" type="button" class="big-button" value="Cancel" onclick="csPopupClose()" />
    </div>

    <div id="popLoading" style="display:none; position:absolute; margin-top:-180px; margin-left:150px; border:none;">
        <img src="../../Content/images/loader.gif" alt="Loading" />
    </div> 
```

现在我如何编写一个java脚本来实现这个功能......这样当我选择任何Dropbox时，一个文本框将根据Json返回的值自动填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:23:49.843

由于您使用的是 MVC，所以我会看一下[Knock Out MVC library](http://knockoutmvc.com)。您可以通过 NuGet 添加它。[此示例](http://knockoutmvc.com/ControlTypes)有一个下拉列表，用于更新`div`. 并且在线上有很多有据可查的示例和教程。

# emacs - 减少错误后的 Emacs 延迟

> ID：11799843
> 
> 赞同：0
> 
> 时间：2012-08-03T16:39:32.240
> 
> 标签：emacs

我正在使用一个 emacs-lisp 脚本，该脚本有一个小错误，导致它有时会因错误消息而窒息，然后执行没有问题。错误本身并不困扰我，让我烦恼的是 Emacs 在那之后仍然被阻塞了 10-15 秒，我必须等待我认为是某个计时器（旨在确保我在它消失之前看到错误消息）结束之前我可以继续编辑。

有没有一种简单的方法可以减少这种延迟？我找不到该计时器的定义位置以更改其值。

一些附加信息：

*   我使用的是 Emacs 23.2，但我尝试重新编译并使用 23.4，它没有改变任何东西；
*   我尝试了 Emacs 24.1 并且错误消失了，但是我对性能产生了巨大的影响（该脚本是为 Emacs 23.2 设计的），因此“等待错误”仍然是比使用 24.1 更好的选择；
*   有问题的脚本将在未来某个时候由其作者更新，但同时我正在寻找一个快速而肮脏的解决方案。
*   错误消息是：“进程过滤器中的错误：尝试删除小缓冲区或唯一普通窗口”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:02:37.770

如前所述，这是一个错误。请向维护者报告。

此外，您可以查看代码以获取类似的表单

（接受过程输出和可选过程秒 MILLISEC JUST-THIS-ONE）

允许 Emacs 读取来自子进程的任何未决输出。它被读入进程的缓冲区或提供给它们的过滤器功能。非零 arg PROCESS 表示在从 PROCESS 接收到某些输出之前不返回。

非零第二个参数 SECONDS 和第三个参数 MILLISEC 是等待的秒数和毫秒数；

;;;

# c# - System.Net.Mail.SmtpSender Dispose(bool) 的两种不同实现？

> ID：11799844
> 
> 赞同：3
> 
> 时间：2012-08-03T16:39:36.040
> 
> 标签：c#, asp.net, .net, decompiling, smtpclient

谢天谢地，R#7。如果没有他们新的“转到反编译源”功能，我将不知道如何描述这个问题。

我有一段时间有某个 SmtpMailSender 实现类。以下是它所做的几件事：

1.) 开发模式下不发送网络邮件。开发 web.config 如下所示：

```
<smtp deliveryMethod="SpecifiedPickupDirectory">
    <specifiedPickupDirectory pickupDirectoryLocation="App_Data/mail" />
</smtp>
<!--<smtp deliveryMethod="Network">
    <network host="smtp.roadrunner.com" />
</smtp>--> 
```

邮件发送类嗅探该属性，并配置（到类似的东西）`SmtpClient.DeliverMethod`的真实运行时路径。`SmtpClient.PickupDirectoryLocation``"C:\path\to\project\App_Data\mail"`

2.) 它将所有发送代码包装到 using 语句和 try 块中：

```
...
try
{
    using (var smtpClient = new SmtpClient())
    {
        // detect pickup directory
        // do other encapsulated behaviors
        smtpClient.Send(message);
    }
}
catch (Exception ex)
{
    _exceptionLogger.LogException(ex);
    if (++retryCount  > 2) throw;
    Thread.Sleep(3000);
    Send(message, retryCount); // recursive to same method
} 
```

自去年以来，这一切都在我的主工作站上运行良好。不过，我将项目下载到我的笔记本电脑上，并一直看到每个项目`SmtpClient.Send(MailMessage)`都导致以下异常：

```
InvalidOperationException: "The SMTP host was not specified."
at System.Net.Mail.SmtpClient.CheckHostAndPort()
at System.Net.Mail.SmtpClient.get_ServicePoint()
at System.Net.Mail.SmtpClient.Dispose(Boolean disposing)
at System.Net.Mail.SmtpClient.Dispose()
at My.ImplementationOf.SmtpMailSender.Send(MailMessage message, Int32 retryCount) 
```

异常是从 抛出的，根据我笔记本电脑上的 R# 反编译，`SmtpClient.CheckHostAndPort`当属性为空或零长度时抛出异常。`SmtpClient.Host`我回到我的工作站，发现即使该`smtpClient.Host`属性为空，也没有抛出此异常。

然后我在工作站上使用了 R# 的小反编译功能`System.Net.Mail.SmtpClient`，发现这个类有 2 种不同的实现！很奇怪，因为对 System.dll 的引用在两台机器上都指向`C:\Windows\Microsoft.NET\Framework\v4.0.30319\System.dll`！基本上它们是相同的，但有一个重要区别：

```
protected virtual void Dispose(bool disposing)
{
    // the workstation decompilation shows this:
    if (this.transport != null && this.servicePoint != null)
        this.transport.CloseIdleConnections(this.servicePoint);

    // but the laptop decompilation shows this:
    if (transport != null)
        transport.CloseIdleConnections(ServicePoint);
} 
```

**怎么会有两种不同的实现呢？**

**更新**

两台机器都显示 Windows 7 Professional Service Pack 1。我在两台机器上都运行了 Windows Update，它们都告诉我计算机是最新的。我能想到的唯一区别是笔记本电脑的Windows 7尚未激活，我是3天前才安装的。我想知道，操作系统的激活会改变框架的 System.dll 吗？

然后我采取了这些步骤：

1.  在笔记本电脑上激活 Windows
2.  重新启动
3.  运行 Windows 更新，发现一切仍然是最新的。
4.  跑了项目场景，发现还是抛出了同样的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:59:34.143

可能是因为一台机器有 .NET 4.5 而另一台没有。您是否在主工作站上安装了 VS2012？

此错误已在 .NET 4.5 中修复：

[http://connect.microsoft.com/VisualStudio/feedback/details/618568/smtpclient-and-dispose-without-a-hostname-gives-invalidoperationexception](http://connect.microsoft.com/VisualStudio/feedback/details/618568/smtpclient-and-dispose-without-a-hostname-gives-invalidoperationexception)

安装 .NET 4.5 会覆盖现有 .NET 4.0 dll 之上的新 DLL：

[http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40](http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:48:24.923

IIRC，框架的服务包不会影响程序集版本。我可能是错的，但我首先要检查的是每台机器的服务包级别。

当然，有些修补程序不会像服务包那样清楚地显示......

# jquery - jQuery 选择器 - 以更健壮的方式遍历 dom？

> ID：11799845
> 
> 赞同：1
> 
> 时间：2012-08-03T16:39:37.193
> 
> 标签：jquery

当您单击触发器时，下面的代码会将第二个 div.four 变为红色，而不是第一个。

我理解为什么会发生这种情况，但我可以在没有 .nextAll('.parent').child() 之类的情况下解决它吗？我的 html 可能会发生变化，例如第一个 div.four 可能会出现在 2 个 div.parents 中，所以 id 就像一个仍然可以工作的解决方案。

是否有更强大的遍历 dom 的方法，例如找到具有某个类的下一个 div，而不管它向下多少级？

```
 $(document).ready(function(){
     $('.trigger').click(function(){
        $(this).nextAll('.four').css('background-color','red');         
     });
 });​

<div class="trigger">trigger</div>
<div class="one">one</div>
<div class="two">two</div>
<div class="three">three</div>
<div class="parent">
   <div class="four">four</div>    
</div>
<div class="four">four</div>    ​ 
```

[http://jsfiddle.net/g9heg/1/](http://jsfiddle.net/g9heg/1/)

更新

我应该指定，但我需要在同一页面中有多个触发器和目标。所以对于这个小提琴，“触发器 1”应该针对“四”，“触发器 2”应该针对“七”。谢谢

[http://jsfiddle.net/g9heg/5/](http://jsfiddle.net/g9heg/5/)

# android - 三星 Galaxy S3 上的 I2C 驱动程序

> ID：11799848
> 
> 赞同：0
> 
> 时间：2012-08-03T16:39:53.463
> 
> 标签：android, galaxy, samsung-mobile, i2c

我想从 Android 应用程序访问我的三星 S3 GT19300 上的 I2C 驱动程序。

我需要root设备才能做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:49:44.157

是的，设备必须植根才能访问 I2C 驱动程序。

# arrays - Fortran 中的深度数组复制

> ID：11799854
> 
> 赞同：10
> 
> 时间：2012-08-03T16:40:10.383
> 
> 标签：arrays, fortran, fortran90

我需要 Fortran (90) 中的（真实）数组的深层副本，但我不确定如何获得一个，因为我不完全了解引用的工作原理。直觉上，我希望这能得到我想要的：

```
do i=1,n
  b(i) = a(i)
end do 
```

但是，最近有人向我指出，这`b(1:n) = a(1:n)`相当于上面的代码。直观地说，我希望这`b(1:n) = a(1:n)`只会导致引用`b(1:n)`指向`a(1:n)`内存中的位置。

是`b(1:n) = a(1:n)`深拷贝吗？为什么？与 相对的底层引用发生了`b = a`什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T16:56:38.397

您提到的复制数组的三种方法，`do`循环`b(1:n) = a(1:n)`和`b = a`，都是等效的；他们将数组的内容复制`a`到数组中`b`。 `a`并且`b`只是数组，而不是花哨的指针或任何东西，因此分配`a = b`与数学表达式基本相同。引用的进行（用户需要了解）并没有什么魔力，这就是为什么 Fortran 是一种非常简单易学的语言的原因。您可以在 Fortran 中使用指针数组，但这是另一个问题。

M Metcalf 和 J Reid*解释的 Fortran 90/95*始终是有关 Fortran 语言功能咨询的良好参考。从第 48 页开始：

> **3.11 数组赋值**
> 
> 通过内在赋值，可以将数组表达式分配给相同形状的数组变量，这被解释为好像表达式的每个元素都被分配给了变量的相应元素。例如，使用声明
> 
> ```
> real, dimension(10, 20) :: a 
> ```
> 
> 那作业
> 
> ```
> a = a  + 1.0 
> ```
> 
> 替换`a(i,j)`为`a(i,j) + 1.0`for`i=1,2..,10`和`j=1,2,..,20`。

另请注意，*标量表达式可以分配给数组，在这种情况下， saclar 值会广播到所有数组元素*。

就这一切实际上是如何实现的而言，这就是我认为您提出问题的目的，Fortran 标准完全没有说明这一点。此类事情未指定，以允许编译器编写者进行他们喜欢的任何优化。例如，在 assignment`a = b`中，元素的`b`复制顺序`a`未由标准指定，因此不同的编译器可以以不同的方式执行此操作。您需要知道的是，对于这个问题，如果`a`和`b`不是指针，那么`a`和`b`是不同的数组，并且更改一个元素不会更改另一个元素的相应元素。所以感觉，`a=b`是“深拷贝”，您可以将其视为将所有项目复制`b`到`a`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-03T16:55:08.413

a = b 将整个数组 b 复制到 a 中。如果您只希望数组的部分尺寸大于 n，那么您可以使用下标表示法 a(1:n) = b(1:n)。那是 Fortran 90——它是一种比 FORTRAN 77 更高级别的语言。我们可以看出“a = b”是一个副本，并且没有将指针 a 与目标 b 相关联，因为该语句使用了运算符“=”。指针关联使用 =>。

编辑：通过复制，它会复制，可能与您的 do 循环具有相同的机器代码。指针关联在不执行 do 循环以复制所有数组元素的情况下进行引用。

请参阅[http://en.wikipedia.org/wiki/Fortran_95_language_features](http://en.wikipedia.org/wiki/Fortran_95_language_features)

# java - 在 Java 中调度重复性任务，而不会因未经检查的异常而停止

> ID：11799856
> 
> 赞同：1
> 
> 时间：2012-08-03T16:40:21.700
> 
> 标签：java, exception, task, timertask

我有一个非常简单的 Runnable，我想安排每 30 秒执行一次 - 请记住，这只是这个问题的一个简单示例，而不是在现实中使用它的实际意义。

```
@Override
public void run() {
    System.out.println("Throwing an unchecked exception on purpose...");
    int abc = 123 - 123;
    int def = 123 / abc;
} 
```

我正在使用 Timer 和 TimerTask 但遇到了一个问题：每当 TimerTask 引发未经检查的异常时，该任务的任何后续执行都将被取消；因此，上面的任务实际上只会运行一次，因为它会抛出未经检查的除法 0 异常。

据我所知，ScheduledThreadPoolExecutor 具有完全相同的“功能”，至少根据官方 Java API 文档“如果任务的任何执行遇到异常，后续执行将被抑制”。

如果引发未经检查的异常，Java中是否有任何标准方法可以使 Timer 或 ScheduledThreadPoolExecutor 不抑制后续执行？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:43:00.030

> 如果引发未经检查的异常，Java中是否有任何标准方法可以使 Timer 或 ScheduledThreadPoolExecutor 不抑制后续执行？

好吧，有一种*非常简单*的方法 - 创建一个`ExceptionSuppressingRunnable`包装另一种方法：

```
public final class ExceptionSuppressingRunnable implements Runnable
{
    private final Runnable original;

    public ExceptionSuppressingRunnable(Runnable runnable)
    {
        // TODO: Null validation
    }

    public void run()
    {
        try
        {
            original.run();
        }
        catch (RuntimeException e)
        {
            // TODO: Logging
        }
    }
} 
```

请注意，这故意不捕获`Error`（或 Throwable 的任何其他非异常子类）。您*可以*捕获`Exception`而不是`RuntimeException`- 它只会在代码抛出已检查异常而不声明它的奇怪情况下产生影响（由于字节码重写、版本控制差异或其他原因）。我认为 catch 可能更清楚`RuntimeException`。

# java - 使用 java 运行 vmware-player 映像

> ID：11799857
> 
> 赞同：1
> 
> 时间：2012-08-03T16:40:33.760
> 
> 标签：java, vmware-player

有没有办法从 java 应用程序运行特定的 VMWare 播放器映像（假设它是预先创建的，并且名称是已知的）？也许已经存在一些库，但我无法找到它们。或者如果有人可以发布代码片段会更好。

换句话说，我想调用 VMware 播放器从 java 运行图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:08:44.097

如果这不适用于生产和实时系统，则可以通过从 java.lang.Runtime中踢[VMWare 命令](http://www.vmware.com/support/ws55/doc/ws_learning_cli_vmrun.html)
来完成， 例如： Runtime.getRuntime().exec("cmd /c start abc.bat");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:52:02.580

如果您只想调用 VM 播放器，请使用以下命令。要使用 vmrun 调用播放器，请使用`-T`

```
Runtime rt = Runtime.getRuntime();
rt.exec("<path-of-installation>/vmrun -T player start <name-or-path-of-image-file>"); 
```

或者，如果您想对正在运行的 Vm Player 进行任何研究，那么[VMware Infrastructure (vSphere) Java API](http://vijava.sourceforge.net/) 可能会很有用。

# asp.net-mvc - VB.NET 登录重定向不起作用

> ID：11799863
> 
> 赞同：1
> 
> 时间：2012-08-03T16:41:12.130
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, asp.net-membership

我有以下代码：

```
//redirect based on whether the user is admin, company owner, or blog owner
Dim userRole As String = Roles.GetRolesForUser(Membership.GetUser.UserName)(0)
Debug.Print(userRole)
If userRole Is "Administrator" Then
    Return RedirectToAction("Index", "Company")
Else
    Return RedirectToAction("Index", "Home")
End If 
```

userRole 的值输出“Administrator”，我将其与“Administrator”进行比较，但它不会重定向到 Company 控制器，而是会转到“Home”。

我怎样才能解决这个问题？谢谢！

注意：我也试过这个，但它也没有执行重定向：

```
If String.Compare(userRole, "Administrator") Then 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:48:20.057

试试吧`if userRole = "Administrator" then`，我认为这可能会解决你的问题。

# c++ - Visual Studio C++“在 } 上自动格式化完成的块”

> ID：11799866
> 
> 赞同：4
> 
> 时间：2012-08-03T16:41:30.017
> 
> 标签：c++, visual-studio, code-formatting

Visual Studio 为 C# 提供了此设置，但我在 C++ 中找不到它。“在 } 上自动格式化完成的块”我在处理 C# 的东西时经常使用这个功能，现在我又回到了 C++（我更喜欢），我想念这个功能。我该如何设置？我认为此时我必须使用 3rd 方插件或其他东西，但我在所有搜索中都找不到任何相关的插件。

该功能的作用：如果我有一段代码并在其前面键入“{”，然后在其后键入“}”，它将自动将其加入以匹配使代码更易于阅读的制表规则。

前任：

从一些代码开始：

```
{
    int i = 1;
    int j = 2;
    j += i;
} 
```

* * *

在某处添加一个开始括号：

```
{
    int i = 1;
    int j = 2;
    {
    j += i;
} 
```

* * *

添加一个结束括号，包含的代码会自动为我添加标签：

```
{
    int i = 1;
    int j = 2;
    {
        j += i;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-11T16:05:31.403

这是在 Visual Studio 2013 中。确保在“文本编辑器”->“C/C++”->“格式”->“常规”下的“选项”中启用它。选项是“当我输入 } 时自动格式化块”。

# ruby-on-rails - 如何在 Rails 中为文本列定义默认列值？

> ID：11799870
> 
> 赞同：0
> 
> 时间：2012-08-03T16:41:39.873
> 
> 标签：ruby-on-rails, activerecord

1.MySQL不支持文本列的默认值（所以不能使用migration指定默认值）

2.以下代码

```
after_initialize do |obj|
  obj.column1 ||= "default_value"
end 
```

是越野车。例如，它将覆盖以下情况下明确指定的值：`MyModel.new(column1: nil)`或`MyModel.new { |obj| obj.column1 = nil }`

所以我能想到的唯一简单且或多或少正确的方法是：

```
after_initialize do |obj|
  obj.column1 ="default_value" if obj.new_record? and !obj.column1_changed?
end 
```

你能提出一个更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:46:58.623

为什么不使用 before_validation 回调？

```
before_validation(on: :create) do
  self.column1 != "default value"
end 
```

更新

你仍然可以避免`new_record?`:)

```
before_validation(on: :create) do
  self.column1 = "default value" unless self.column1_changed?
end 
```

# jquery - Jquery 不能在特定视图 Rails 上工作

> ID：11799872
> 
> 赞同：0
> 
> 时间：2012-08-03T16:41:55.557
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我遇到了 Jquery 的问题。我使用的是 Rails 3.2.6，所以 Jquery 是新的默认值。

我的问题：我有一个名为“sounds”的脚手架控制器，在我的“Show”视图中，我有一个进度条。我需要它自动刷新，所以一些 jquery 应该可以解决问题。

我在“sounds.js.coffee”中包含了这个简单的代码 =>

```
console.log($("#progressBar")) 
```

所以，在 url **“/sounds”**（索引操作）上，我得到了这个响应 = “[]”（没问题），在 url **“/sounds/1/show”**（显示操作）上，我得到了这个错误

> “未捕获的 ReferenceError：$ 未定义”，所以我认为 Jquery 无法识别。

我不明白是什么问题..有人已经得到了这个问题，谢谢给我一些提示和解释。

**更新**

我发现了问题：

这条线在 sound.html.erb 的顶部，
`<%= javascript_include_tag :sounds %>`所以我认为是双重包含。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:43:08.230

检查 jquery 是否包含在您的 application.js 文件中。还要确保您的 application.js 文件包含在您的布局中，并且您的视图正在使用该布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:53:23.577

**我发现了问题：**

这条线在 sound.html.erb 的顶部， `<%= javascript_include_tag :sounds %>`所以我猜是双重包含。

# java - 主页按钮带回我的应用程序

> ID：11799875
> 
> 赞同：2
> 
> 时间：2012-08-03T16:42:06.240
> 
> 标签：java, android

我正在制作一个汽车启动器应用程序，其中包含其他应用程序的快捷方式，当我在另一个应用程序中时，我想按下主页按钮并返回我的启动器所以基本上我需要覆盖我的应用程序之外的主页按钮，覆盖只有在我的应用程序在后台打开时才起作用，所以当我关闭我的应用程序时，主页按钮将照常工作，带您进入默认启动器

我可以实施这样的事情还是我要求太多？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T16:45:03.203

除非您将应用程序设为主屏幕，否则无法拦截 Android 上的主页按钮。这是出于安全原因，因此恶意应用程序无法通过覆盖所有可以退出的按钮来接管您的设备。主页按钮是能够离开任何应用程序的一种可靠方式。

简而言之，不，这是不可能的，即使是这样，它也会严重破坏用户对应用程序行为的期望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:53:47.260

如果您将应用程序作为替代主屏幕，则必须在安装说明中包含用户以将您的应用程序设置为默认启动器。

然后主页按钮会将它们带到您的应用程序。为了让它在它们不处于“汽车”模式时切换回默认启动器会有点棘手，但你可以通过某种检查是否启用汽车模式的 fork 活动来实现它，如果是这样去你的汽车模式启动器，如果不转到默认启动器（如果用户已经有不同的 3rd 方启动器，它会变得更棘手）所以基本上你的应用程序将永远是主屏幕应用程序，无论是否启用了汽车模式，但如果它是不是那么您手动启动“正常”主屏幕。

# css - 第一个悬停图像消失，第二个悬停图像出现

> ID：11799878
> 
> 赞同：2
> 
> 时间：2012-08-03T16:42:12.233
> 
> 标签：css, image, hover

css 正在拉动允许我在悬停时交换图像的图像。我的问题是，在我**第一次悬停时，图像消失了**。第二次悬停，图像出现。以下悬停，一切正常。

为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:43:45.083

这是因为第一次悬停时，浏览器必须从服务器请求并下载新图像。这需要时间，并且是您看到的延迟。由于浏览器缓存，随后的悬停工作很快。

您可以而且应该通过使用[CSS sprites](http://css-tricks.com/css-sprites/)来避免这种情况。

# .net - 将事件处理程序附加到动态创建的 TreeViewItems

> ID：11799890
> 
> 赞同：0
> 
> 时间：2012-08-03T16:43:21.063
> 
> 标签：.net, silverlight, data-binding, silverlight-4.0, treeview

**前言：**

我有以下 XAML：

```
<controls:TreeView x:Name="tv">
    <controls:TreeViewItem x:Name="tvi" Header="RootNodeTitle" IsExpanded="True">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <controls:TreeViewItem Header="{Binding TextToBindTo}" Selected="TreeViewItem_Selected" />
            </DataTemplate>
         </ItemsControl.ItemTemplate>
     </controls:TreeViewItem>
</controls:TreeView> 
```

以及以下 .NET 代码隐藏：

```
_viewCollection = New CollectionViewSource()
_viewCollection.Source = _data.RoleList
tvi.ItemsSource = _viewCollection.View 
```

**问题：**

我想将事件处理程序附加到 的子`Selected`事件`tvi`（基于数据绑定动态生成）。

我尝试在 中使用`Selected="..."`标记（如 XAML 中所示）`ItemTemplate`，但这不起作用。

**问题：**

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:27:21.817

我不确定为什么没有在嵌套的 TreeViewItem 上处理 Selected 事件，但是如果我们稍微改变它以在 TreeView 上设置 ItemsSource，它确实会得到处理：

```
<controls:TreeView x:Name="tv"  SelectedItemChanged="tv_SelectedItemChanged">
        <controls:TreeView.ItemTemplate>
            <DataTemplate>
                <!-- this Selected event handler does get called -->
                <controls:TreeViewItem Header="{Binding Name}" Selected="TreeViewItem_Selected" >
... 
```

但是，引发的事件不包含有关该项目的任何有用信息，因此您无法明智地从该事件中得出任何有用的信息。

`Setting a handler for the SelectedItemChanged event on the TreeView works and also contains the usual OldValue and NewValue properties in the EventArgs.`

该事件也会为所有 TreeViewItems 触发 - 是否嵌套。

试试这个：

```
<controls:TreeView x:Name="tv"  SelectedItemChanged="tv_SelectedItemChanged">
    <controls:TreeViewItem x:Name="tvi" Header="RootNodeTitle" IsExpanded="True" Selected="TreeViewItem_Selected" >
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <controls:TreeViewItem Header="{Binding}" Selected="TreeViewItem_Selected" >
                    <Border Background="Black" Height="25" Width="25" />
                </controls:TreeViewItem>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </controls:TreeViewItem>
</controls:TreeView> 
```

...

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    tvi.ItemsSource = GetItems();

}

private IEnumerable GetItems()
{
    for (int i = 0; i < 10; i++)
    {
        yield return i;
    }
}

private void tv_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
{
    var oldItem = e.OldValue;
    var newItem = e.NewValue;
} 
```

# c# - 带有 Web 图像的通知磁贴不会更新

> ID：11799898
> 
> 赞同：0
> 
> 时间：2012-08-03T16:44:10.413
> 
> 标签：c#, windows-8, microsoft-metro

在我的 Windows 8 应用程序中，我一直在尝试在通知磁贴中包含 Web 图像。但它不起作用 - 我的通知没有出现。

如果我转到控制面板->管理工具->事件查看器->应用程序和服务日志->Microsoft->Windows->应用程序->Microsoft-Windows-TWinUI/Operational，我可以看到所有失败的通知。事件视图中的错误消息确实没有帮助：“处理磁贴通知失败”。

如果我使用本地图像，我的磁贴通知会工作并与图像和文本一起显示：

```
var wideContent = TileContentFactory.CreateTileWideSmallImageAndText03();
wideContent.TextBodyWrap.Text = "Some text";
wideContent.Image.Src = "ms-appx:///assets/myLocalImage.gif";
wideContent.RequireSquareContent = false;
var notification = wideContent.CreateNotification();
TileUpdateManager.CreateTileUpdaterForApplication().Update( notification ); 
```

相反，如果我这样做：

```
// All the http web images I have tried have failed
wideContent.Image.Src = "http://upload.wikimedia.org/wikipedia/commons/a/ae/Ursus_arctos_-_Norway.jpg"; 
```

我的通知没有出现。（没有例外或任何情况 - 我的通知未能出现在磁贴中，并且事件查看器中出现错误。）

同样，我无法在[http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)上获取 MS 示例应用程序来处理 Web 图像。

是否有其他人遇到此问题或有人知道如何解决？

编辑：

上面的代码使用 MS 示例应用程序中的 NotificationsExtensions 库。我使用 XmlDocument 等构建通知时遇到了同样的问题。（这里的例子：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868236.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868236.aspx)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T02:10:58.850

如果上面示例中的 URL 是实际图像，则它太大了。我下载了它，尺寸为 2620 x 3930。

图片不能大于 1024x1024 和 200KB - 请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/Hh781198.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/Hh781198.aspx)

# sql - 如何显示每个部门在所有发送的测验中参与的总体百分比？

> ID：11799899
> 
> 赞同：2
> 
> 时间：2012-08-03T16:44:15.910
> 
> 标签：sql, sql-server-2008-r2

我是一名新的 Web 开发人员，我正在开发一个简单的培训管理系统，为用户提供测验。该系统使用 ASP.NET 和 MS SQLServer 开发。现在，我需要提出一个查询，显示每个部门在所有提供的安全测验中的参与百分比（这意味着 IsSent = true 的测验）。

我有以下数据库设计：

```
Employee Table: Username,  Name,    DivisionCode
Divisions Table: SapCode, Divison
Quiz Table: QuizID, Title, Description, IsSent
UserQuiz: UserQuizID, QuizID, DateTimeComplete, Username 
```

***（DivisionCode 是 SapCode 的外键。IsSent 是一个标志，用于指示已提供并发送给用户参与的测验。）***

例如，如果我有四个部门；A、B、C 和 D，我已经向这些部门的员工发送了大约 23 个测验。由于每个部门在每个测验中都有特定的参与百分比。我的查询应该显示参与每个部门所有提供的测验的总体百分比。因此，不应针对每个测验对结果进行分解。

**那么该怎么做呢？**

这是数据库的架构及其数据：

```
USE [Test]
GO
/****** Object:  Table [dbo].[Divisions]    Script Date: 08/03/2012 19:36:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Divisions](
 [SapCode] [nvarchar](50) NOT NULL,
 [Division] [varchar](50) NOT NULL,
 CONSTRAINT [PK_Divisions] PRIMARY KEY CLUSTERED 
(
 [SapCode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[Divisions] ([SapCode], [Division]) VALUES (N'1', N'A')
INSERT [dbo].[Divisions] ([SapCode], [Division]) VALUES (N'2', N'B')
INSERT [dbo].[Divisions] ([SapCode], [Division]) VALUES (N'3', N'C')
/****** Object:  Table [dbo].[Quiz]    Script Date: 08/03/2012 19:36:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Quiz](
 [QuizID] [int] IDENTITY(1,1) NOT NULL,
 [Title] [varchar](50) NOT NULL,
 [Description] [varchar](50) NOT NULL,
 [IsSent] [bit] NOT NULL,
 CONSTRAINT [PK_Quiz] PRIMARY KEY CLUSTERED 
(
 [QuizID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
SET IDENTITY_INSERT [dbo].[Quiz] ON
INSERT [dbo].[Quiz] ([QuizID], [Title], [Description], [IsSent]) VALUES (1, N'Quiz I', N'Test', 1)
INSERT [dbo].[Quiz] ([QuizID], [Title], [Description], [IsSent]) VALUES (2, N'Quiz II', N'Test test', 1)
INSERT [dbo].[Quiz] ([QuizID], [Title], [Description], [IsSent]) VALUES (3, N'Quiz III', N'TEST TEST', 0)
SET IDENTITY_INSERT [dbo].[Quiz] OFF
/****** Object:  Table [dbo].[Employee]    Script Date: 08/03/2012 19:36:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Employee](
 [Usename] [nvarchar](50) NOT NULL,
 [Name] [varchar](50) NOT NULL,
 [DivisionCode] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Employee] PRIMARY KEY CLUSTERED 
(
 [Usename] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'John12', N'John A', N'1')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'John13', N'John B', N'1')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'John15', N'John C', N'3')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'Maria12', N'Maria A', N'3')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'Rony14', N'Rony A', N'2')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'Tid52', N'Tid A', N'3')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'Tim12', N'Tim A', N'1')
INSERT [dbo].[Employee] ([Usename], [Name], [DivisionCode]) VALUES (N'Tim15', N'Tim B', N'2')
/****** Object:  Table [dbo].[UserQuiz]    Script Date: 08/03/2012 19:36:09 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[UserQuiz](
 [UserQuizID] [int] IDENTITY(1,1) NOT NULL,
 [QuizID] [int] NOT NULL,
 [DateTimeComplete] [datetime] NOT NULL,
 [Score] [float] NOT NULL,
 [Username] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_UserQuiz] PRIMARY KEY CLUSTERED 
(
 [UserQuizID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET IDENTITY_INSERT [dbo].[UserQuiz] ON
INSERT [dbo].[UserQuiz] ([UserQuizID], [QuizID], [DateTimeComplete], [Score], [Username]) VALUES (1, 1, CAST(0x0000A07900000000 AS DateTime), 100, N'John12')
INSERT [dbo].[UserQuiz] ([UserQuizID], [QuizID], [DateTimeComplete], [Score], [Username]) VALUES (2, 1, CAST(0x0000A07900000000 AS DateTime), 50, N'Tim12')
INSERT [dbo].[UserQuiz] ([UserQuizID], [QuizID], [DateTimeComplete], [Score], [Username]) VALUES (3, 1, CAST(0x0000A07B00000000 AS DateTime), 100, N'Rony14')
INSERT [dbo].[UserQuiz] ([UserQuizID], [QuizID], [DateTimeComplete], [Score], [Username]) VALUES (4, 1, CAST(0x0000A07900000000 AS DateTime), 0, N'Tim15')
INSERT [dbo].[UserQuiz] ([UserQuizID], [QuizID], [DateTimeComplete], [Score], [Username]) VALUES (5, 1, CAST(0x0000A07900000000 AS DateTime), 100, N'Tid52')
SET IDENTITY_INSERT [dbo].[UserQuiz] OFF
/****** Object:  ForeignKey [FK_Employee_Divisions]    Script Date: 08/03/2012 19:36:09 ******/
ALTER TABLE [dbo].[Employee]  WITH CHECK ADD  CONSTRAINT [FK_Employee_Divisions] FOREIGN KEY([DivisionCode])
REFERENCES [dbo].[Divisions] ([SapCode])
GO
ALTER TABLE [dbo].[Employee] CHECK CONSTRAINT [FK_Employee_Divisions]
GO
/****** Object:  ForeignKey [FK_UserQuiz_Employee]    Script Date: 08/03/2012 19:36:09 ******/
ALTER TABLE [dbo].[UserQuiz]  WITH CHECK ADD  CONSTRAINT [FK_UserQuiz_Employee] FOREIGN KEY([Username])
REFERENCES [dbo].[Employee] ([Usename])
GO
ALTER TABLE [dbo].[UserQuiz] CHECK CONSTRAINT [FK_UserQuiz_Employee]
GO
/****** Object:  ForeignKey [FK_UserQuiz_Quiz]    Script Date: 08/03/2012 19:36:09 ******/
ALTER TABLE [dbo].[UserQuiz]  WITH CHECK ADD  CONSTRAINT [FK_UserQuiz_Quiz] FOREIGN KEY([QuizID])
REFERENCES [dbo].[Quiz] ([QuizID])
GO
ALTER TABLE [dbo].[UserQuiz] CHECK CONSTRAINT [FK_UserQuiz_Quiz]
GO 
```

**更新：** 结果应该是这样的：

部门***** ** *** ** *** ** *** *****总体百分比

A ***** ** *** ** *** ** *** ** *** ** ***** 80

B ***** ** *** ** *** ** *** ** *** ** ***** 60

C ***** ** *** ** *** ** *** ** *** ** ***** 50

*总百分比是每个测验中每个部门的所有完成百分比的总和。例如，Quiz#1 = 40%、Quiz#2 = 60% 和 Quiz#3 = 90% 中的部分 A 的完成百分比，此查询应显示的总百分比是所有其中除以发送的测验总数（即 3）。我希望我很清楚，这个概念很明显。*

更新#2：

我仍在为此苦苦挣扎，但我想出了一个查询，该查询显示了每个部门每个测验中的员工总数和参与者总数。这是查询：

```
SELECT     COUNT(dbo.Employee.Usename) AS [Total Number of Employees], COUNT(dbo.UserQuiz.Username) AS [Total Number of Participants], dbo.Divisions.Division, 
                      dbo.Quiz.Title
FROM         dbo.Divisions INNER JOIN
                      dbo.Employee ON dbo.Divisions.SapCode = dbo.Employee.DivisionCode INNER JOIN
                      dbo.UserQuiz ON dbo.Employee.Usename = dbo.UserQuiz.Username INNER JOIN
                      dbo.Quiz ON dbo.UserQuiz.QuizID = dbo.Quiz.QuizID
WHERE     (dbo.Quiz.IsSent = 1)
GROUP BY dbo.Divisions.Division, dbo.Quiz.Title 
```

**我应该怎么做才能改进它并得到我需要的东西？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:48:36.277

The following query may do what you want. I calculates the number of employees in each division, multiplies this by the number of quizzes. It then divides the number actually taken by this total:

```
select de.Division, de.numemployees, de.numemployees*q.numquizzes as qe_combos,
       numquizzestaken/1.0*de.numemployees*q.numquizzes as proportion
from (select d.Division, count(*) as numemployees
      from Employee e join
           Division d
           on e.DivisionCode = d.SapCode
      group by d.Division
     ) de left outer join
     (select d.Division, count(*) as numquizzestaken
      from Employee e join
           Division d
           on e.DivisionCode = d.SapCode join
           UserQuiz uq
           on e.UserName = uq.UserName join
           Quiz q
           on uq.QuidId = q.QuizId and
              q.issent = true
      group by de.Division
     ) dq  
     on de.division = dq.division cross join
     (select count(*) as numquizes
      from Quiz q
      where isSent = true
     ) q 
```

# php - PHP 自定义异常处理程序是否需要 try {} 捕获？

> ID：11799901
> 
> 赞同：1
> 
> 时间：2012-08-03T16:44:25.583
> 
> 标签：php, exception, exception-handling, custom-exceptions

我编写了以下自定义异常处理程序：

```
namespace System\Exception;

class Handler extends \Exception {

    public static function getException($e = null) {

        if (ENVIRONMENT === 0 && is_object($e)) {       
            $message  = "<p>";
            $message .= "Exception: " . $e->getMessage();
            $message .= "<br />File: " . $e->getFile();
            $message .= "<br />Line: " . $e->getLine();
            $message .= "<br />Trace: " . $e->getTrace();
            $message .= "<br />Trace as string: " . $e->getTraceAsString();
            $message .= "</p>";
        } else {
            $message  = '<h1>Exception</h1>';
            $message .= '<p>There was a problem.</p>';
        }

        @require_once('header.php');
        echo $message;
        @require_once('footer.php');

        exit();

    }

    public static function getError($errno = 0, $errstr = null, $errfile = null, $errline = 0) {
        if (ENVIRONMENT === 0) {        
            $message  = "<p>";
            $message .= "Error: " . $errstr;
            $message .= "<br />File: " . $errfile;
            $message .= "<br />Line: " . $errline;
            $message .= "<br />Number: " . $errno;
            $message .= "</p>";
        } else {
            $message  = '<h1>Error</h1>';
            $message .= '<p>There was a problem.</p>';
        }

        @require_once('header.php');
        echo $message;
        @require_once('footer.php');

        exit();

    }   

    public static function getShutdown() {
        $last_error = error_get_last();
        if ($last_error['type'] === E_ERROR) {
            self::getError(E_ERROR, $last_error['message'], $last_error['file'], $last_error['line']);
        }
    }

} 
```

并表示我想使用这个类及其方法来处理系统产生的所有异常和错误，方法如下：

```
set_exception_handler(array("System\Exception\Handler", "getException"));
set_error_handler(array("System\Exception\Handler", "getError"), -1 & ~E_NOTICE & ~E_USER_NOTICE);
register_shutdown_function(array("System\Exception\Handler", "getShutdown")); 
```

我还表示我不希望在屏幕上显示错误并报告所有错误：

```
ini_set('display_errors', 'Off');
error_reporting(-1); 
```

我现在的问题是 - 我还需要使用 try { } catch () { } 语句来捕获任何异常和错误吗？我知道以上内容很可能不是防弹的，但到目前为止似乎没有任何 try / catch 语句通过处理所有未捕获的异常和错误来工作。

另外 - 使用自定义异常处理程序并让它捕获所有未捕获的异常而不是通过 try {} catch （即性能/安全等）这样做有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:49:10.087

您不必这样做，但您无法恢复 - 使用 try/catch 具有对特定异常做出反应的优势（例如，在 some_custom_session_handling() 中找不到文件可能是使用 try/catch 并注销此类用户的好地方没有会话文件）。

所以好处是你有更漂亮的消息。缺点是您总是以相同的方式对待异常。它本身还不错，不应该降低性能或安全性，但它首先忽略了使用异常的要点。

但是，它不排除在您可能需要的地方使用 try/catch，所以我会说这是一个很好的故障转移解决方案，但应该避免作为 try/catch 的替代品

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:56:22.483

正如jderda所说，使用你的方法你错过了异常点：检查代码上层的任何错误并对它们做出反应 - 停止或处理异常并继续前进。例如，当您想要记录所有未捕获的异常时，您的方法很好

# python - 涉及 RPC 的 HRD 事务或事务如何在 GAE 上工作？

> ID：11799905
> 
> 赞同：0
> 
> 时间：2012-08-03T16:44:37.457
> 
> 标签：python, google-app-engine, transactions

这将是一个组合问题，主要是因为我想获得更多背景信息。

主要问题：

我正在尝试执行涉及对另一个 REST 服务的 RPC 调用的事务，这将更新一些远程数据。例如，假设 RPC 调用告诉远程服务器我购买了一些东西。在非功能性 python 伪代码中，它将类似于：

```
def txn_purchase():
    a = ModelA.objects.get(blah)
    httpresult = HttpPurchaseRPC(url, a.foo)
    a.receipt = httpresult.get_receipt() # This raises an error if the request fails
    a.save()

db.run_in_transaction(txn_purchase) 
```

我很确定事务只确保数据存储的一致性（因此在这种情况下，实体 a 将是一致的），并且不能确保与 RPC 的一致性。是否有可能在此之上构建一些东西来确保与 RPC 的一致性？

对我来说，如果 RPC 成功，但数据存储事务无法保存，我似乎会有一个潜在的问题案例。我该如何解决这个问题？

我脑海中的朦胧概念是实现2阶段购买：

1.  做一个预购买阶段，我在交易中创建实体 A 并设置一个预购买标志。
2.  执行购买阶段，我运行购买交易并在成功时更新 A。清除预购标志。
3.  有一个“修复它”的 cron 作业，运行并扫描带有预购买标志的陈旧实体，并使用另一个 RPC 来检查这些购买是否实际完成。

这是做到这一点的“最佳实践”方式，还是有更好的方法？

关于交易的背景问题：

*   事务功能是否与其余代码一起在前端运行，还是以某种方式神奇地在数据存储后端运行？
*   如果正在运行事务的前端在事务中间死机（即超时），事务会在任何地方重试吗？或者交易根本没有发生？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:01:44.273

您在这里有一个正确的想法：您应该这样做的方式是将 RPC 外包给一个单独的[延迟任务](https://developers.google.com/appengine/docs/python/taskqueue/overview-push#Deferred_Tasks)。在事务中排队的任务可以设置一个[标志](https://developers.google.com/appengine/docs/python/taskqueue/overview#Tasks_within_Transactions)，以确保它们只有在事务成功时才被排队。

没有运行事务的神奇后端。并且它们不会自动重试：同样，除非它们是任务的一部分，因为任务*会*重试，直到它们成功返回。

# database - Glassfish 数据源连接

> ID：11799907
> 
> 赞同：0
> 
> 时间：2012-08-03T16:44:45.233
> 
> 标签：database, jdbc, connection, glassfish, datasource

我们使用的是 glassfish 3.1.2，它在通过数据库服务器重新启动或与数据库的网络连接中断（即使是轻微的连接）来维护数据源连接池方面似乎非常脆弱。

它似乎并不特别擅长并重新建立这些联系并继续前进。

我们正在使用 com.mysql.jdbc.jdbc2.optional.MysqlDataSource。

我们正在使用连接验证。

我们还缺少其他东西吗？有没有其他人经历过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:56:56.113

同样在这里。

您是否尝试过使用 autoreconnect 配置 JDBC 连接？示例：jdbc:mysql://localhost:3306/foo?autoReconnect=true

# iphone - 元素中的 hpple 元素

> ID：11799911
> 
> 赞同：0
> 
> 时间：2012-08-03T16:44:56.497
> 
> 标签：iphone, objective-c, ios5, html-parsing, hpple

我一直在使用 Hpple 在我的 iphone 应用程序（iOS5.1）中解析一些 html。我已经在表格行中搜索了所有“td”元素。我正在遍历这些元素中的每一个，并且在大多数情况下，我可以从元素中检索我需要的所有信息，例如

```
[element objectForKey:@"rowspan"]; 
```

但是我需要的值之一是在 td 中：

```
<tr>
<td rowspan="3">  //This is my element
   <div>
      <a>link text</a>  //The link text is what I want
   </div>
</td>
</tr> 
```

有没有办法在我的元素中获取“a”标签，我尝试了以下方法，但它不起作用：

```
[[[element firstChild] firstChild] content]; 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:09:48.483

我想通了...与我使用的其他一些 IDE 相比，Xcode 调试器没有那么有用，但是一旦我找到“打印描述”选项，我就能够看到发生了什么...

我在尝试时收到错误“Invalid CFStringRef” `[element content]`，当我尝试`[[element firstChild] content]`打印“\n”时，这不是我所期望的。无论如何，这可能是获得我想要的东西的很长的路，但这是我的解决方案......

```
NSArray* childrenArray = [element children];
TFHppleElement *childElement = [childrenArray objectAtIndex:1];
TFHppleElement *newChildElement = [[childElement children] objectAtIndex:1];
NSString *name = [[newChildElement firstChild] content];  //This is the content I wanted 
```

# php - codeigniter 重定向在 _construct 方法中不起作用

> ID：11799913
> 
> 赞同：0
> 
> 时间：2012-08-03T16:45:09.330
> 
> 标签：php, codeigniter

我只想向授权用户授予访问权限，所以我在构造方法中编写了身份验证代码这是我的代码

```
class cp extends CI_Controller {

    public function __construct(){
        parent::__construct();
        $this->this_mustbe_admin();
    }

    public function this_mustbe_admin()
    {

        $this->load->model('m_cp');
        $md = $this->m_cp->is_admin();
        if($md)
         return $md;
        else
        {
            redirect(base_url().'cp/login/');
        }

    }

    function login()
    {   
             $this->load->view('admin/login');

    } 
```

但我得到错误

```
The page isn't redirecting properly 
```

如果我`this_mustbe_admin`从构造中删除方法并将其放在其他控制器上它工作正常

```
function do_stuff(){

   $this->this_mustbe_admin();
   // do stuff 

} 
```

但是这样我必须在我的每一种方法中都写出来

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:59:47.400

你做循环重定向。一个虚构的堆栈跟踪：

1.  http 请求到`/cp/`
2.  `__construct()`
3.  `this->this_mustbe_admin()`-> 重定向到 /cp/login
4.  http 请求到`/cp/login`
5.  `__construct()`
6.  `this->this_mustbe_admin()`->**转到 3。**

`__construct`在执行重定向生成命令之前，您必须检查您尝试执行的方法。

```
if (!$this->router->method != 'login') {
    $this->this_mustbe_admin();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:35:07.123

试着这样写

```
redirect('base_url(cp/login)'); 
```

我希望它会起作用……或者干脆给

```
redirect('cp/login'); 
```

因为我是这样使用的

# python - 添加两个以上远程对象时，Python Pyro4 名称服务器冻结

> ID：11799919
> 
> 赞同：2
> 
> 时间：2012-08-03T16:45:31.110
> 
> 标签：python, networking, network-programming, rpc, pyro

假设我想从不同的位置 ping 一些东西，所以我将 ping 命令行工具包装到 python 中并使用 pyro4 prc 库来调用它。

我有一个 python Pyro4 名称服务器

```
import Pyro4
Pyro4.config.COMPRESSION = True
Pyro4.naming.startNSloop("ipofnameserver") 
```

和简单的 ping 服务器：

```
class Pinger(object):
    def ping(self, host):
        return subprocess.check_output(["ping", host, "-c 4"])

pinger = Pinger()

daemon = Pyro4.Daemon()                 # make a Pyro daemon
ns  = Pyro4.locateNS(host = "ipofnameservre", port=9090) # find the name server
uri = daemon.register(pinger)   # register the greeting object as a Pyro object
print ns.register("location1", uri) 
print "Ready. Object uri =", uri      # print the uri so we can use it in the client later
daemon.requestLoop() 
```

只要我只有两个 pingserver 一切都好，但是在我添加第三个名称服务器后停止响应。当然，每个 pingserver 都有唯一的名称。

例如，我想检查服务器的可用性：

```
ns  = Pyro4.locateNS(host = "nameserverip", port=9090)
names = ns.list().keys()
print names
print ns.list()
for n in names:
    if n == 'Pyro.NameServer': continue
    proxy = Pyro4.Proxy("PYRONAME:"+n)
    try:
        print n, proxy._Proxy__pyroCreateConnection()
    except:
        print "offline" 
```

这适用于两个 pingserver，但三个它只是等待一些东西。此脚本的回溯以 ctrl+C 终止：

```
 ns  = Pyro4.locateNS(host = "nameserverip", port=9090)
  File "/usr/local/lib/python2.7/dist-packages/Pyro4/naming.py", line 319, in locateNS
    proxy.ping()
  File "/usr/local/lib/python2.7/dist-packages/Pyro4/core.py", line 146, in __call__
    return self.__send(self.__name, args, kwargs)
  File "/usr/local/lib/python2.7/dist-packages/Pyro4/core.py", line 250, in _pyroInvoke
    self.__pyroCreateConnection()
  File "/usr/local/lib/python2.7/dist-packages/Pyro4/core.py", line 312, in __pyroCreateConnection
    msgType, flags, seq, data = MessageFactory.getMessage(conn, None)
  File "/usr/local/lib/python2.7/dist-packages/Pyro4/core.py", line 665, in getMessage
    headerdata = connection.recv(cls.HEADERSIZE)
  File "/usr/local/lib/python2.7/dist-packages/Pyro4/socketutil.py", line 323, in recv
    return receiveData(self.sock, size)
  File "/usr/local/lib/python2.7/dist-packages/Pyro4/socketutil.py", line 104, in receiveData
    data=sock.recv(size, socket.MSG_WAITALL) 
```

strace 显示以下内容：

> socket(PF_INET, SOCK_STREAM, IPPROTO_IP) = 3 fcntl(3, F_GETFL)
> = 0x2 (标志 O_RDWR) fcntl(3, F_SETFL, O_RDWR) = 0 connect(3, {sa_family=AF_INET, sin_port=htons(9090), sin_addr= inet_addr("ipofnameserver")}, 16) = 0 setsockopt(3, SOL_SOCKET, SO_KEEPALIVE, [1], 4) = 0 recvfrom(3,

以下示例也无法正常工作，因为它无法将名称解析为 pyro_uri，因为它只是在等待上一个示例中的内容。这个例子的有趣之处在于它打印了 fls，其中包含所有远程 pingserver 的名称。然后添加第四个 pingserver 我什至无法打印已注册 pingserver 的名称。

```
def _ping((host, firing_location)):
    pinger = Pyro4.Proxy("PYRONAME:" + firing_location)
    return pinger.ping(host)

def ping(host):
    ns  = Pyro4.locateNS(host = "178.209.52.240", port=9090)
    names = ns.list().keys()
    fls = []
    for name in names:
        if name == 'Pyro.NameServer': continue
        fls.append(name)
    print fls
    p = Pool(len(fls))
    jobs = p.map(_ping, zip([host]*len(fls), fls) )
    for j in jobs:
        print j.split("/")[-3], "±", j.split("/")[-1][:-1]
    return jobs 
```

我为此苦苦挣扎了两天，不知道我的代码有什么问题。

# java - 以编程方式解决插件外部的 Maven 依赖项 - 获取 RepositorySystemSession 和 RepositorySystem

> ID：11799923
> 
> 赞同：15
> 
> 时间：2012-08-03T16:45:45.627
> 
> 标签：maven-plugin, java, maven, maven-plugin, aether

也许这将是一项比我最初想象的更大的任务，但无论如何，我正在尝试`MavenProject`从文件中加载一个，然后解决它的依赖关系。我有这两个位的代码，但是我缺少一些我需要的对象引用；具体来说，我需要获取 `RepositorySystemSession`and的实例`RepositorySystem`。有小费吗？

*注意：*我已经用[maven-plugin](/questions/tagged/maven-plugin "显示标记为“maven-plugin”的问题")标记了这个问题，但这不是 Maven 插件。我很高兴授权 Maven 3（我想我已经拥有了..）

这是我到目前为止的代码：

**构造`MavenProject`**：

```
public static MavenProject loadProject(File pomFile) throws Exception
{
    MavenProject ret = null;
    MavenXpp3Reader mavenReader = new MavenXpp3Reader();

    if (pomFile != null && pomFile.exists())
    {
        FileReader reader = null;

        try
            {
            reader = new FileReader(pomFile);
            Model model = mavenReader.read(reader);
            model.setPomFile(pomFile);

            ret = new MavenProject(model);
        }
        finally
        {
            // Close reader
        }
    }

    return ret;
} 
```

**解决依赖关系：**

```
public static List<Dependency> getArtifactsDependencies(MavenProject project, String dependencyType, String scope) throws Exception
{    
    DefaultArtifact pomArtifact = new DefaultArtifact(project.getId());

    RepositorySystemSession repoSession = null; // TODO
    RepositorySystem repoSystem = null; // TODO

    List<RemoteRepository> remoteRepos = project.getRemoteProjectRepositories();
    List<Dependency> ret = new ArrayList<Dependency>();

    Dependency dependency = new Dependency(pomArtifact, scope);

    CollectRequest collectRequest = new CollectRequest();
    collectRequest.setRoot(dependency);
    collectRequest.setRepositories(remoteRepos);

    DependencyNode node = repoSystem.collectDependencies(repoSession, collectRequest).getRoot();
    DependencyRequest projectDependencyRequest = new DependencyRequest(node, null);

    repoSystem.resolveDependencies(repoSession, projectDependencyRequest);

    PreorderNodeListGenerator nlg = new PreorderNodeListGenerator();
    node.accept(nlg);

    ret.addAll(nlg.getDependencies(true));

    return ret;
} 
```

我意识到这可能是一个不寻常的请求，也许我应该放弃我正在尝试做的事情并将其包装为插件......但我只是想完成我现在开始的事情！提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:24:53.050

我建议阅读有关[Aether lib](http://www.eclipse.org/aether/)的信息，这正是用于此类目的。

注意：Aether 之前是在 Sonatype 开发的，但后来转移到了[Eclipse](http://github.com/sonatype/sonatype-aether)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T12:40:20.163

试试[jcabi-aether](http://aether.jcabi.com/)，它是来自 Sonatype的[Apache Aether的包装器：](http://www.sonatype.org/aether)

```
final File repo = this.session.getLocalRepository().getBasedir();
final Collection<Artifact> deps = new Aether(this.getProject(), repo).resolve(
  new DefaultArtifact("junit", "junit-dep", "", "jar", "4.10"),
  JavaScopes.RUNTIME
); 
```

如果您不在 Maven 插件之外：

```
final File repo = new File(System.getProperty("java.io.tmpdir"), "my-repo");
final MavenProject project = new MavenProject();
project.setRemoteArtifactRepositories(
  Arrays.asList(
    new RemoteRepository(
      "maven-central",
      "default",
      "http://repo1.maven.org/maven2/"
    )
  )
);
final Collection<Artifact> deps = new Aether(project, repo).resolve(
  new DefaultArtifact("junit", "junit-dep", "", "jar", "4.10"),
  JavaScopes.RUNTIME
); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-03T21:53:20.920

我刚刚为您和我的问题提出了解决方案：

```
/*******************************************************************************
 * Copyright (c) 2013 TerraFrame, Inc. All rights reserved. 
 * 
 * This file is part of Runway SDK(tm).
 * 
 * Runway SDK(tm) is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 * 
 * Runway SDK(tm) is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 * 
 * You should have received a copy of the GNU Lesser General Public
 * License along with Runway SDK(tm).  If not, see <http://www.gnu.org/licenses/>.
 ******************************************************************************/

package com.test.mavenaether;

import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.Arrays;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;

import org.apache.maven.artifact.repository.ArtifactRepository;
import org.apache.maven.artifact.repository.ArtifactRepositoryPolicy;
import org.apache.maven.artifact.repository.MavenArtifactRepository;
import org.apache.maven.artifact.repository.layout.DefaultRepositoryLayout;
import org.apache.maven.model.Model;
import org.apache.maven.model.io.xpp3.MavenXpp3Reader;
import org.apache.maven.project.MavenProject;
import org.codehaus.plexus.util.xml.pull.XmlPullParserException;
import org.sonatype.aether.artifact.Artifact;
import org.sonatype.aether.resolution.DependencyResolutionException;
import org.sonatype.aether.util.artifact.DefaultArtifact;
import org.sonatype.aether.util.artifact.JavaScopes;

import com.jcabi.aether.Aether;

public class MavenAether
{
  public static void main(String[] args) throws Exception
  {
    String classpath = getClasspathFromMavenProject(new File("/users/terraframe/documents/workspace/MavenSandbox/pom.xml"), new File("/users/terraframe/.m2/repository"));
    System.out.println("classpath = " + classpath);
  }

  public static String getClasspathFromMavenProject(File projectPom, File localRepoFolder) throws DependencyResolutionException, IOException, XmlPullParserException
  {
    MavenProject proj = loadProject(projectPom);

    proj.setRemoteArtifactRepositories(
        Arrays.asList(
            (ArtifactRepository) new MavenArtifactRepository(
                "maven-central", "http://repo1.maven.org/maven2/", new DefaultRepositoryLayout(),
                new ArtifactRepositoryPolicy(), new ArtifactRepositoryPolicy()
            )
        )
    );

    String classpath = "";
    Aether aether = new Aether(proj, localRepoFolder);

    List<org.apache.maven.model.Dependency> dependencies = proj.getDependencies();
    Iterator<org.apache.maven.model.Dependency> it = dependencies.iterator();

    while (it.hasNext()) {
      org.apache.maven.model.Dependency depend = it.next();

      final Collection<Artifact> deps = aether.resolve(
        new DefaultArtifact(depend.getGroupId(), depend.getArtifactId(), depend.getClassifier(), depend.getType(), depend.getVersion()),
        JavaScopes.RUNTIME
      );

      Iterator<Artifact> artIt = deps.iterator();
      while (artIt.hasNext()) {
        Artifact art = artIt.next();
        classpath = classpath + " " + art.getFile().getAbsolutePath();
      }
    }

    return classpath;
  }

  public static MavenProject loadProject(File pomFile) throws IOException, XmlPullParserException
  {
      MavenProject ret = null;
      MavenXpp3Reader mavenReader = new MavenXpp3Reader();

      if (pomFile != null && pomFile.exists())
      {
          FileReader reader = null;

          try
              {
              reader = new FileReader(pomFile);
              Model model = mavenReader.read(reader);
              model.setPomFile(pomFile);

              ret = new MavenProject(model);
          }
          finally
          {
            reader.close();
          }
      }

      return ret;
  }
} 
```

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.test</groupId>
  <artifactId>MavenSandbox</artifactId>
  <version>0.0.1-SNAPSHOT</version>

  <dependencies>
    <dependency>
      <groupId>com.jcabi</groupId>
      <artifactId>jcabi-aether</artifactId>
      <version>0.7.19</version>
    </dependency>
    <dependency>
      <groupId>org.apache.maven</groupId>
      <artifactId>maven-core</artifactId>
      <version>3.0.3</version>
    </dependency>
  </dependencies>
</project> 
```

代码首先加载 Maven 项目（使用原始问题中提供的函数），然后使用 jcabi-aether 在本地存储库中查找工件。您将需要更改 main 函数中的两个参数：项目的 pom.xml 的位置和本地存储库的位置。

享受！:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-30T11:05:52.093

Eclipses Aether API 有一组很好的独立示例，用于最新的 Maven (3.1.1)，可以在[此处](https://github.com/eclipse/aether-demo/blob/master/aether-demo-snippets/src/main/java/org/eclipse/aether/examples/ResolveTransitiveDependencies.java)找到。

注意：Maven 3.1.X 仍然使用 Aether `0.9.0.M2`（我们在示例中使用的最新版本是`0.9.0.M3`）。因此，要在 Maven 插件中运行这些示例，需要 M2 版本，而独立应用程序可以使用最新的 M3 版本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-23T15:04:44.290

[试试这个（从ather-demo](https://github.com/sonatype/sonatype-aether/blob/master/aether-demo/src/main/java/demo/util/Booter.java)可以看出）：

```
...
LocalRepository localRepository = new LocalRepository("/path/to/local-repo");

RepositorySystem system = getRepositorySystemInstance();
RepositorySystemSession session = getRepositorySystemSessionInstance(system, localRepository);
....

public static RepositorySystem getRepositorySystemInstance()
{
    /**
     * Aether's components implement org.sonatype.aether.spi.locator.Service to ease manual wiring and using the
     * prepopulated DefaultServiceLocator, we only need to register the repository connector factories.
     */
    MavenServiceLocator locator = new MavenServiceLocator();
    locator.addService(RepositoryConnectorFactory.class, FileRepositoryConnectorFactory.class);
    locator.addService(RepositoryConnectorFactory.class, WagonRepositoryConnectorFactory.class);
    locator.setServices(WagonProvider.class, new ManualWagonProvider());

    return locator.getService(RepositorySystem.class);
}

private static RepositorySystemSession getRepositorySystemSessionInstance(RepositorySystem system,
                                                                          LocalRepository localRepo)
{
    MavenRepositorySystemSession session = new MavenRepositorySystemSession();

    session.setLocalRepositoryManager(system.newLocalRepositoryManager(localRepo));

    session.setTransferListener(new ConsoleTransferListener());
    session.setRepositoryListener(new ConsoleRepositoryListener());

    // Set this in order to generate dirty trees
    session.setDependencyGraphTransformer(null);

    return session;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-03T18:54:51.927

这在 RepositorySystem的[“Aether/Setting Aether Up”](https://wiki.eclipse.org/Aether/Setting_Aether_Up)和eclipse wiki的[“Aether/Creating a Repository System Session”中有所介绍。](https://wiki.eclipse.org/Aether/Creating_a_Repository_System_Session)

没有大量文档，但您可以按如下方式创建 RepositorySystem：

```
// verbatim copy from the Setting Aether Up link
private static RepositorySystem newRepositorySystem()
{
    DefaultServiceLocator locator = MavenRepositorySystemUtils.newServiceLocator();
    locator.addService( RepositoryConnectorFactory.class, BasicRepositoryConnectorFactory.class );
    locator.addService( TransporterFactory.class, FileTransporterFactory.class );
    locator.addService( TransporterFactory.class, HttpTransporterFactory.class );

    return locator.getService( RepositorySystem.class );
} 
```

请注意，这需要[“Getting Aether”](https://wiki.eclipse.org/Aether/Getting_Aether)中详述的依赖项，尤其是`maven-aether-provider`.

当您拥有存储库系统后，本教程将继续使用以下工厂方法创建 RepositorySystemSession：

```
// copied verbatim from "Creating a Repository System Session"
private static RepositorySystemSession newSession( RepositorySystem system )
{
    DefaultRepositorySystemSession session = MavenRepositorySystemUtils.newSession();

    LocalRepository localRepo = new LocalRepository( "target/local-repo" );
    session.setLocalRepositoryManager( system.newLocalRepositoryManager( session, localRepo ) );

    return session;
} 
```

# jquery - 使用 jQuery .clone() 将事件处理程序绑定到克隆的元素

> ID：11799925
> 
> 赞同：1
> 
> 时间：2012-08-03T16:45:51.207
> 
> 标签：jquery

我正在使用`.clone(true, true)`创建一个 DOM 元素的副本，该元素具有许多绑定到子元素的事件处理程序。处理程序使用#id 选择器绑定。因此，当我克隆元素然后执行操作（例如单击）时，处理程序会正确触发，但会在原始元素上触发。

很明显为什么会这样做，但我的问题是 - 有没有办法解决这个问题？有什么方法可以让动作在两个元素上触发，或者只在克隆的元素上触发（无需重写一堆依赖于#id 选择器的代码）？

# django - 如何知道何时使用 django-nose 运行测试

> ID：11799928
> 
> 赞同：2
> 
> 时间：2012-08-03T16:45:57.837
> 
> 标签：django, testing, nose, django-nose

我`django-nose`用来运行我的测试，我需要知道它们何时从我的视图/模型方法/等内部运行，因此我可以跳过检查缓存值或调用一些项目外部资源等内容，例如**仅在运行测试时**。

最好有某种可用的环境变量或类似的东西，这样我就可以做类似的事情：

```
if os.environ.get('TESTS_ARE_RUNNING'):
    # skip this 
```

或者

```
if not TESTS_ARE_RUNNING:
  # do something 
```

有人知道实现这一目标的方法吗？

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T17:54:53.027

这是可能的，您可以查看[Detect django 测试模式](https://stackoverflow.com/questions/6957016/detect-django-testing-mode)，但您不应该为这个用例执行此操作。

> ...所以我可以跳过检查缓存值或调用一些项目外部资源等内容...

如果您这样做，您打算如何测试您的应用程序在这些外部资源关闭或行为不端时的处理能力？我建议您查看[模拟](http://www.voidspace.org.uk/python/mock/)库并模拟这些外部调用。这也将允许您断言这些调用已正确执行，并且您的应用程序可以在它们未按预期返回时进行处理。

# symfony - Symfony2 - DoctrineFixturesBundle - 找不到 DoctrineCommand

> ID：11799931
> 
> 赞同：0
> 
> 时间：2012-08-03T16:46:18.633
> 
> 标签：symfony, doctrine

我正在尝试手动将 DoctrineFixturesBundle 添加到我的 symfony 项目中，因此我收到以下错误。

```
C:\wwwnet\symfony>php app/console doctrine:fixtures:load

Fatal error: Class 'Doctrine\Bundle\DoctrineBundle\Command\DoctrineCommand' not found in    C:\wwwnet\symfony\vendor\bundles\Doctrine\Bundle\FixturesBundle\Command\LoadDataFixturesDoctrineCommand.php on line 34 
```

我已经按照此处列出的步骤[如何从 Zip 文件安装 Symfony 2.0 Bundle](https://stackoverflow.com/questions/8805231/how-to-install-a-symfony-2-0-bundle-from-zip-file)

在我的 AppKernel 中，我添加了：

```
$bundles[] = new Doctrine\Bundle\FixturesBundle\DoctrineFixturesBundle(); 
```

在自动加载中我有：

```
'Doctrine\\Bundle' => __DIR__.'/../vendor/bundles',
//'Symfony\\Bundle\\DoctrineFixturesBundle' => __DIR__.'/../vendor/bundles',
//'Doctrine\\Bundle\\DoctrineFixturesBundle' => __DIR__.'/../vendor/bundles',
'Doctrine\\Common\\DataFixtures'    => __DIR__.'/../vendor/doctrine-fixtures/lib',
'Doctrine\\Common' => __DIR__.'/../vendor/doctrine-common/lib',
'Doctrine\\DBAL'   => __DIR__.'/../vendor/doctrine-dbal/lib',
'Doctrine'         => __DIR__.'/../vendor/doctrine/lib', 
```

我已将捆绑包添加到：

```
C:\wwwnet\symfony\vendor\bundles\Doctrine\Bundle\FixturesBundle 
```

我已经看到了这个问题[Symfony2 DoctrineFixturesBundle 命名空间错误](https://stackoverflow.com/questions/9657036/symfony2-doctrinefixturesbundle-namespace-error)，这似乎表明我可能正在使用 2.1 捆绑包和 2.0 symfony

> 此外，只要您使用 Symfony 2.0.x，DoctrineBundle 就永远不会在 Doctrine\Bundle 命名空间中。Symfony 2.0.x 在 bundles\Symfony 下附带了 DoctrineBundle。您的问题是您正在尝试使用过于新版本的 DoctrineFixturesBundle，它需要 Doctrine\Bundle 下的 DoctrineBundle。我的第一个建议是将捆绑包标记为 version=origin/2.0 应该可以解决这个问题。– 韭菜 3 月 11 日 20:22

如何获取[https://github.com/doctrine/DoctrineFixturesBundle](https://github.com/doctrine/DoctrineFixturesBundle)的 2.0 捆绑包？如果这甚至是问题所在，那么我对此一无所知，并且已经漫无目的地挠头两天了。

*   Symfony：Symfony_Standard_Vendors_2.0.16
*   PHP：5.3.6
*   阿帕奇：2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:42:02.237

在你的 deps 文件中添加

```
[doctrine-fixtures]
    git=http://github.com/doctrine/data-fixtures.git

[DoctrineFixturesBundle]
    git=http://github.com/doctrine/DoctrineFixturesBundle.git
    target=/bundles/Symfony/Bundle/DoctrineFixturesBundle
    version=origin/2.0 
```

所以你在最后一行定义版本，在`bin/vendor update`那之后做

# python - 带有 Twisted 的 Python 代理

> ID：11799936
> 
> 赞同：3
> 
> 时间：2012-08-03T16:46:40.097
> 
> 标签：python, proxy, twisted, twisted.web

你好！我有这个代码：

```
from twisted.web import proxy, http
from twisted.internet import reactor

class akaProxy(proxy.Proxy):
    """
    Local proxy = bridge between browser and web application
    """

    def dataReceived(self, data):

        print "Received data..."

        headers = data.split("\n")
        request = headers[0].split(" ")

        method = request[0].lower()
        action = request[1]
        print action
        print "ended content manipulation"  
        return proxy.Proxy.dataReceived(self, data)

class ProxyFactory(http.HTTPFactory):
    protocol = akaProxy

def intercept(port):
    print "Intercept"
    try:                
        factory = ProxyFactory()
        reactor.listenTCP(port, factory)
        reactor.run()
    except Exception as excp:
        print str(excp)

intercept(1337) 
```

我使用上面的代码来拦截浏览器和网站之间的所有内容。在上面使用时，我将浏览器设置配置为：IP：127.0.0.1 和端口：1337。我将此脚本放在远程服务器中，以将我的远程服务器作为代理服务器。但是当我将浏览器代理 IP 设置更改为我的服务器时，它不起作用。我做错了什么？我还需要配置什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:31:36.413

大概您`dataReceived`在尝试解析传递给它的数据期间引发了异常。尝试启用日志记录，这样您就可以看到更多正在发生的事情：

```
from twisted.python.log import startLogging
from sys import stdout
startLogging(stdout) 
```

您的解析器可能引发异常的原因是它`dataReceived`不会仅在完整请求时调用。使用从 TCP 连接读取的任何字节调用它。这可能是一个完整的请求、一个部分的请求，甚至是两个请求（如果正在使用流水线）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:11:24.770

`dataReceived`在代理上下文中正在处理“将 rawData 转换为行”，因此尝试您的操作代码可能为时过早。您可以尝试覆盖`allContentReceived`，您将可以访问完整的标题和内容。这是一个我相信你所追求的例子：

```
#!/usr/bin/env python
from twisted.web import proxy, http

class SnifferProxy(proxy.Proxy):
    """
    Local proxy = bridge between browser and web application
    """

    def allContentReceived(self):
        print "Received data..."
        print "method = %s" % self._command
        print "action = %s" % self._path
        print "ended content manipulation\n\n"
        return proxy.Proxy.allContentReceived(self)

class ProxyFactory(http.HTTPFactory):

    protocol = SnifferProxy

if __name__ == "__main__":
    from twisted.internet import reactor
    reactor.listenTCP(8080, ProxyFactory())
    reactor.run() 
```

# .net - 帮助理解 Web 服务和 REST

> ID：11799940
> 
> 赞同：4
> 
> 时间：2012-08-03T16:47:01.540
> 
> 标签：.net, sql, web-services, rest, data-access

我一直很想问这个问题，但现在才找到时间这样做。

无论如何，关于 Web 服务（是的，那些传统的 SOAP-XML 响应服务）和 RESTful 服务（很多开发人员现在都在使用）的讨论很多。

我觉得虽然我大致了解 REST 的概念，但我需要了解更多。我认为完全接受它的一种最佳方式是表明它确实比目前所做的*更好*（强调**，因为更好是一个主观词）。

考虑以下简单的传统代码：（此代码是从以 Oracle 作为后端的企业应用程序复制的。我认为数据库几乎无关紧要，因为您可以轻松地在 SQL Server 或 Oracle 或任何数据库之间切换）。

**myWebService.asmx.cs**

```
namespace MyApplication
{
    public class myWebService : System.Web.Services.WebService
    {
        private classEmployee _emp = new classEmployee();

        [WebMethod]
        public string GetEmployees()
        {
            string EmployeeData = string.Empty;
            EmployeeData = _emp.GetEmployees();
            return EmployeeData;
        }
    }
} 
```

**类雇员.cs**

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Globalization;
using System.Data.OracleClient;

namespace MyApplication.App_Code
{
    public class classEmployee
    {
        private DataAccess _da;

        public string GetEmployees()
        {
            string employeeData = string.Empty;
            string cmd = string.Empty;
            OracleCommand oraCmd = new OracleCommand();
            DataSet ds = new DataSet();

            try
            {
                 cmd = "SELECT * FROM Employees";

                oraCmd.CommandType = CommandType.Text;
                oraCmd.CommandText = cmd;
                ds = (DataSet)_da.ExecSQLQueryCmd(oraCmd, DataAccess.ResultType.DataSet);
                employeeData = ds.GetXml
                ds.Dispose();
            }
            catch (Exception ex)
            {
                employeeData = "Error: " + "Getting Employees [GetEmployees]" + Environment.NewLine + "Details: " + Environment.NewLine + ex.Message;
            }

            return employeeData;
        }
    }
} 
```

**数据访问.cs**

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Data.OracleClient;

namespace MyApplication.App_Code
{
    public class DataAccess
    {
        private OracleConnection oraConn;
        private String connString;

        public enum ResultType
        {
            DataReader = 0,
            DataSet = 1,
            DataTable = 2
        }

        public DataAccess()
        {
            connString = System.Configuration.ConfigurationManager.ConnectionStrings["AppConnectionString"].ConnectionString;
        }

        public object ExecuteSQLCommand(OracleCommand oraCommand, ResultType ReturnType, string TableName = "")
        {
            OracleDataAdapter oraDataAdapter = new OracleDataAdapter(oraCommand);
            oraConn = new OracleConnection(sConnectionString);

            try
            {
                oraConn.Open();
                oraCmd.Connection = oraConn;
                oraCmd.CommandType = CommandType.Text;

                switch (ReturnType)
                {
                    case ResultType.DataReader:
                        OracleDataReader oraDataReader = null;
                        oraDataReader = oraCmd.ExecuteReader();
                        return oraDataReader;

                    case ResultType.DataSet:
                        DataSet ds = new DataSet();
                        oDataAdapter.Fill(ds);
                        oraConn.Close();
                        oraConn.Dispose();
                        return ds;

                    case ResultType.DataTable:
                        DataTable dt = new DataTable();

                        if (!string.IsNullOrEmpty(TableName))
                            dt.TableName = TableName;
                        oDataAdapter.Fill(dt);
                        oraConn.Close();
                        oraConn.Dispose();
                        return dt;
                }
            }
            catch (OracleException oException)
            {
                throw oException;
            }
            finally
            {
                oDataAdapter.Dispose();
                oDataAdapter = null;
                oraCmd.Dispose();
            }

            return null;
        }

        public int ExecuteSQLNonQueryCommand(OracleCommand oraCommand)
        {
            // This will execute any NON-QUERY command.
            //Trimmed for Brevity purposes..
        }
    }
} 
```

上面的代码是不言自明的。调用 Web 服务并获取 XML 格式的结果数据。要执行非查询命令，只需替换命令对象中传递的命令字符串并调用 DataAccess.cs 类中的必要方法即可。

对于为什么至少应该避免上述情况并转而使用 RESTful 服务类型调用的不同意见，我已经不知所措了。但是我还没有看到任何至少有助于将此代码转换为至少在某种程度上包含 RESTful 架构的东西。

我很确定很多人使用这个（请注意，我目前仍然使用很多）基于以下原因：

1.  有用。
2.  易于实施、维护和管理。
3.  从事数据库驱动开发的人非常喜欢 SQL 命令，以至于能够将我们在 SQL 编辑器中使用的那些 SQL 代码轻松地用于应用程序，这让我们松了一口气。当您可以使用上面的示例简单地实现所有多个查询（包括存储过程）时，为什么还要使用 ORM。
4.  大多数可用于数据相关应用程序的代码示例都显示了与上述相同的模式（从 Command 对象填充数据集，并以 DataSet 或 XML 等形式返回）。

如果要接受人们在这一编码领域中所谓的“最佳实践”，就应该说明为什么它更好，以及做这样的事情比已经尝试和测试工作的事情容易得多。

如果我可以在这里请我们的专家开发人员向我展示如何转换它，并解释为什么转换为 REST 会更好（通过代码），那么我将非常感激。

感谢您的投入。谢谢。

补充：我只是想指出，虽然这是正确的，但在阅读了这篇文章后，我开始怀疑这种方法是否是最好的：

[http://www.codeproject.com/Feature/WeirdAndWonderful.aspx?msg=4324770#xx4324770xx](http://www.codeproject.com/Feature/WeirdAndWonderful.aspx?msg=4324770#xx4324770xx)

上面的文章，正如一位评论所说的那样——“在我正在升级的网络服务中发现了这个。很难找到任何没有错的地方。”

我正试图确定这到底有什么问题，因为我处于困境中。

让我给你一些情况：

1.  客户/客户要求您提供一个应用程序来查询存储在数据库中的信息。
2.  您使用上述方法提出了解决方案。提供客户提出的要求。该解决方案可靠、快速且可维护。

所以本质上，我想问的另一个问题是，上面的代码到底有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:06:17.673

要转换它，虽然这不是我的想法，但它看起来像这样。

```
namespace MyApplication 
{ 
    public class myWebService : System.Web.Services.WebService 
    { 
        private classEmployee _emp = new classEmployee(); 

        [HttpGet]
        public string GetEmployees() 
        { 
            string EmployeeData = string.Empty; 
            EmployeeData = _emp.GetEmployees(); 
            return EmployeeData; 
        } 
    } 
} 
```

您可以将该字符串返回为消费者可以轻松转换的任何内容。如果是 JavaScript，那么我会推荐 JSON，因为它是原生的。

让我们讨论一下`ReST`。我觉得最有趣的部分`ReST`是老式`ASMX`服务是 ReSTful。但是，由于 IT 行业无法接受这样一个事实，即旧技术可能一直以来都更正确，因此他们不得不将其命名为新鲜事物。

他们也用这个词`Client/Server`来做到这一点。IBM 在微软出现并说嘿，我们需要把所有东西都放到 PC 之前几年就在做客户端/服务器**操作**。好吧，当这开始变得不那么流行时，因为部署是一场**噩梦**，他们意识到，哦，伙计，我们需要回到做 IBM 一直在做的事情。大型服务器、愚蠢的客户端和简单的部署。但是，他们不能这样称呼它，因为业界不会接受它，而微软也不想要它，所以他们称之为`The Cloud` *（在此处插入 bum，bum，bum 音乐）*。

所以，快进到 SOAP。人们希望能够通过网络传输复杂的对象，而**不必**反序列化它们**，并且**他们希望协议具有灵活性。好吧，SOAP 为您提供了两者，Microsoft 生成客户端表示和反序列化**，** WCF 层允许协议的真正灵活性，而 ReST**只能**通过 HTTP 传输，因为它使用标准动词。

所以，你的问题的真正答案是，你需要什么？

1.  SOAP 比 ReST 更重且在非常大的数据集上的性能通常低于 ReST，因为它不是浏览器的本机操作**并且**信封很大。但是话又说回来，你真的应该向客户端传输多少数据？！？
2.  您想要一键生成客户端模型吗？然后使用 SOAP。
3.  你想让 API 更容易被其他编程范式访问吗？然后使用休息。
4.  你现在想跟其他行业一样吗？然后使用休息。

还有更多的讨论要讨论，但这应该让你开始。ReST 并不**比**SOAP 好，它是不同的，它解决了一组不同的问题。**不要**让自己或他人说服你进入[仪器法则](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&sqi=2&ved=0CGcQFjAA&url=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FLaw_of_the_instrument&ei=egQcUJnpE6q86QGe1oGYDA&usg=AFQjCNExhLXhSeKTWUA3uNHxzuoGstKxbg&sig2=1dzFA0ahA7wSiiViPHvPiQ)。

# fullcalendar - 在全日历中禁用某些事件源的冲突

> ID：11799942
> 
> 赞同：0
> 
> 时间：2012-08-03T16:47:07.553
> 
> 标签：fullcalendar

嗨，我想要一个事件源，它允许在不调整大小的情况下覆盖（碰撞）其他事件源。

但是其他事件源应该仍然使用正常的碰撞检测和调整大小？

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:08:59.090

好的，我找到了解决方案：

首先将 fullcalendar 中的函数 segCollide(seg1, seg2) 更改为：

```
function segsCollide(seg1, seg2) {
    if(seg1.allowCollision || seg2.allowCollision)
    {
        return false
    }
    else
    {
        return seg1.end > seg2.start && seg1.start < seg2.end;
    }
} 
```

和 sliceSegs() 到：

```
function sliceSegs(events, visEventEnds, start, end) {
    var segs = [],
                i, len=events.length, event,
          eventStart, eventEnd,
          segStart, segEnd,
      isStart, isEnd;
    for (i=0; i<len; i++) {
        event = events[i];
        allowCollision = event.source.allowCollision;
        eventStart = event.start;
        eventEnd = visEventEnds[i];
        if (eventEnd > start && eventStart < end) {
            if (eventStart < start) {
                segStart = cloneDate(start);
                isStart = false;
            }else{
                segStart = eventStart;
                isStart = true;
            }
            if (eventEnd > end) {
                segEnd = cloneDate(end);
                isEnd = false;
            }else{
                segEnd = eventEnd;
                isEnd = true;
            }

            segs.push({
            event: event,
              start: segStart,
              end: segEnd,
              allowCollision: allowCollision,
              isStart: isStart,
              isEnd: isEnd,
              msLength: segEnd - segStart
            });
        }
    } 
    return segs.sort(segCmp);
} 
```

# html - Razor CSS 文件位置作为变量

> ID：11799944
> 
> 赞同：8
> 
> 时间：2012-08-03T16:47:22.283
> 
> 标签：html, css, iframe, razor

我将剃刀视图包装在 iframe 中。剃刀视图是不同域上的 Web 服务。

这是我正在做的事情：

```
<!DOCTYPE html>
<html>
<body>

<p align="center">
    <img src="http://somewhere.com/images/double2.jpg" />
</p>

<p align="center">
<iframe src="https://secure.somewhereelse.com/MyPortal?CorpID=12334D-4C12-450D-ACB1-7372B9D17C22" width="550" height="600" style="float:middle">
  <p>Your browser does not support iframes.</p>
</iframe>
</p>
</body>
</html> 
```

这是 src 站点的标题：

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/cupertino/jquery-ui-1.8.21.custom.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
</head> 
```

我希望 iframe src 使用调用站点的 CSS。

有没有办法传入 CSS URL 或让它继承调用站点的 CSS？

我什至愿意将 css 文件位置作为从原始站点传入的参数。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T01:38:03.213

您不能使用 iframe 在您的网站上强制执行您的 css。css 必须包含在 iframe 中包含的页面的源代码中。它曾经是可能的，但在某些情况下使用 javascript，并且页面位于同一个域上。

您可以使用自己的 css 的唯一其他方法是 Web 服务允许您传入 css 的 url。但是您必须查阅 Web 服务的文档才能找到答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T10:37:45.047

我会将 CSS url 作为参数传递给`iframe`'`src`属性：

```
<iframe src="http://somedomain.com/?styleUrl=@(ResolveStyleUrl())"></iframe> 
```

哪里`ResolveStyleUrl`可以定义为：

```
@functions {

  public IHtmlString ResolveStyleUrl()
  {
    string url = Url.Content("~/Content/site.css");
    string host = "http" + (Request.IsSecureConnection ? "s" : "") + "//" + Request.Url.Host + url;
    return Raw(url);
  }

} 
```

这当然是假设域将接受样式 url 查询字符串并`<link />`在远程页面上呈现适当的？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-07T15:10:53.513

Eroc，很抱歉您不能使用 iframe 在其他网站上强制执行您的 css，因为大多数浏览器会给出一个错误，就像 chrome 给出的那样：

**不安全的 JavaScript 尝试使用 URL [http://terenceford.com/catalog/index.php](http://terenceford.com/catalog/index.php)访问框架？从带有 URL [http://www.example.com/example.php](http://www.example.com/example.php)的框架。域、协议和端口必须匹配。**

但这并不意味着您不能从该页面中提取 html（**可以根据您的需要进行修改**）

* * *

* * *

**[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)**可用于使用**[http://simplehtmldom.sourceforge.net/进行站点报废](http://simplehtmldom.sourceforge.net/)**

**首先玩这些功能：**

```
curl_init();
curl_setopt(); 
curl_exec();
curl_close(); 
```

然后解析html。

**自己试过之后可以看下面这个我做的解析beemp3内容的例子，当时我想创建一个直接下载歌曲的丰富工具，可惜因为验证码我做不到，但对你有用**

* * *

目录结构

> C:\wamp\www\尝试
> 
> -- simple_html_dom.php
> 
> --try.php
> 
> * * *

**尝试.php：**

```
<?php
/*integrate results for dif websites seperately*/
require_once('simple_html_dom.php');
$q='eminem';
$mp3sites=array('http://www.beemp3.com/');
$ch=curl_init("{$mp3sites[0]}index.php?q={$q}&st=all");
curl_setopt($ch,CURLOPT_HEADER,0);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
//curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10); 
$result=curl_exec($ch);
curl_close($ch);
$html=str_get_html("{$result}");
$ret = $html->find("a");

echo "<head><style type='text/css'>a:link,a{font-size:16px;font-weight:bold;font-family:helvetica;text-decoration:none;color:#458;}a:hover{color:#67b;text-decoration:underline;}a:visited{color:silver;}</style></head>";
$unik=array(null);
foreach($ret as $link)
{
$find="/(.{1,})(\.php)[?](file=.{1,})&song=(.{1,})/i";
$replace="$4";
if(preg_match("{$find}",$link->href))
    {
    $unik[]=$link->href;
    if(current($unik)===prev($unik)){unset($unik);}
    else{
    echo "<a href='".$mp3sites[0].$link->href."'>".urldecode(preg_replace($find,$replace,$mp3sites[0].$link->href))."</a><br/>";
    }}
}
?> 
```

**我知道您不会在 php 中编写代码，但我认为您能够翻译代码。看看这个： [php to C#转换器](https://stackoverflow.com/questions/5221669/php-to-c-sharp-converter)**

我花时间在这个问题上，因为只有我能理解提供赏金意味着什么。可能答案似乎无关（因为我没有使用基于 javascript 或 html 的解决方案），但由于跨域问题，这对您来说是一个重要的教训。我希望你能在 c# 中找到类似的库。祝你好运

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-07T17:06:11.670

我知道实现这一点的唯一方法是在您的服务器端发出 HTTP 请求，获取结果并将其返回给用户。

最低限度，您需要从目标站点完全剥离标题以使用 AJAX 在您的页面中注入内容，或者在页面标题中注入您自己的 css 以将其放入 IFRAME。

无论哪种方式，您都必须实现代理方法，它将目标 URL 作为参数。

这种技术有很多缺点：

1.  您必须在服务器上进行查询，这会消耗大量带宽和 CPU
2.  你必须实现代理
3.  您不能从用户那里传输特定于域的 cookie，尽管您可以通过重写来管理新的 cookie
4.  如果您发出大量请求，您的服务器可能会被列入目标网站的黑名单

与麻烦相比，好处听起来很低。

# iphone - 是否可以在没有源的情况下将 .app 文件安装到 iPhone 模拟器上

> ID：11799949
> 
> 赞同：3
> 
> 时间：2012-08-03T16:47:36.913
> 
> 标签：iphone, ios, ipad, simulator, ipod

是否可以将原始 .app 文件下载并安装到 iPhone 模拟器上。我喜欢某些应用程序的功能，但根本没有 iPhone。是否可以下载应用程序文件并将它们安装到模拟器上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:50:01.210

否。Release 构建目标 ARM 处理器。模拟器不模拟 CPU，这就是为什么你必须专门为它构建 - 模拟器构建是 x86。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:33:43.757

你是说IPA文件吗？不幸的是，对于 Ad Hoc 版本，您需要安装 AFAIK 不允许您安装的配置文件。可能会有黑客攻击，但如果没有黑客攻击，就没有办法这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T11:25:01.197

如果开发人员是为模拟器构建的，那么您可以运行它。通过将 .app 文件放在以下位置。

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/Applications/

注意：确保你重启模拟器生效。

# html - Rails：禁用 image_submit_tag

> ID：11799952
> 
> 赞同：0
> 
> 时间：2012-08-03T16:47:44.920
> 
> 标签：html, css, ruby-on-rails, form-submit

我的注册表单上有一个按钮，如下所示：

```
<%= image_submit_tag('/assets/atmosphere_forward.png', :class => "signup_submit_button")%> 
```

当用户单击它时，在处理表单时会有几秒钟的延迟。发生这种情况时如何更改提交按钮的图像（类似于将 :disable_with 与其他标签一起使用）？

或者，或者，如何向我的表单添加一个仅在处理表单时出现的字段（其中可能包含“请稍候”或类似内容）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:53:20.953

我认为 Rails UJS 工具不足以更改输入字段的状态、添加/删除类或显示和隐藏属性。您将不得不使用 JavaScript。

```
form = $('#your_form');
form.submit(function(event) {
  //change the button
  var btn = form.find('input[type="submit"]');
  btn.image = '...';

  //setup the please wait message
  var message = $('<div class="please-wait">Please Wait...</div>');
  form.append(message);
}); 
```

我建议您使用 CSS 的表单按钮，然后在您的提交事件中更改类。

# node.js - Node.js 上 MongoDB 连接的最佳实践是什么？

> ID：11799953
> 
> 赞同：36
> 
> 时间：2012-08-03T16:47:52.033
> 
> 标签：node.js, mongodb, restify

这对我来说有点不清楚（我刚刚开始使用 Node 和 Mongo），由于服务器性能和压力（我想这是另一个问题，但我会在帖子的结尾）。

因此，假设我正在使用 Node.js 和 Restify 编写 API，其中每个 API 端点对应一个函数，我应该：

**a）**打开数据库连接并将其存储在全局变量中，然后在每个函数中使用它？
例子：

```
// requires and so on leave me with a db var, assume {auto_reconnect: true}
function openDB() {
    db.open(function(err, db) {
        // skip err handling and so on
        return db;
    }
}

var myOpenDB = openDB(); // use myOpenDB in every other function I have 
```

**b）**打开数据库连接，然后将所有东西都放在一个巨大的封闭中？
例子：

```
// same as above
db.open(function(err, db) {
    // do everything else here, for example:
    server.get('/api/dosomething', function doSomething(req, res, next) { // (server is an instance of a Restify server)
        // use the db object here and so on
    });
} 
```

**c)**每次需要时打开和关闭数据库？
例子：

```
// again, same as above
server.get('/api/something', function doSomething(req, res, next) {
    db.open(function(err, db) {
        // do something
        db.close();
    });
});

server.post('/api/somethingelse', function doSomethingElse(req, res, next) {
    db.open(function(err, db) {
        // do something else
        db.close();
    });
}); 
```

最后一个是我出于直觉会做的，但同时我也觉得这样做不太舒服。它不会对 Mongo 服务器造成太大压力吗？尤其是当（我希望我确实做到了）它会收到数百个（如果不是数千个）这样的电话吗？

先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T18:40:20.770

我非常喜欢[MongoJS](https://github.com/gett/mongojs)。它允许您以与默认命令行非常相似的方式使用 Mongo，它只是官方 Mongo 驱动程序的包装。您只需打开数据库一次并指定您将使用哪些集合。如果您使用`--harmony-proxies`.

```
var db = require('mongojs').connect('mydb', ['posts']);

server.get('/posts', function (req, res) {
  db.posts.find(function (err, posts) {
    res.send(JSON.stringify(posts));
  });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T17:54:56.967

*   选项 A 不是一个好主意，因为不能保证在处理 HTTP 请求之前数据库将完成打开（当然这不太可能）
*   选项 C 也不理想，因为它不必要地打开和关闭数据库连接

我喜欢处理这个问题的方式是使用延迟/承诺。Node 有很多不同的 Promise 库，但基本思想是做这样的事情：

```
var promise = new Promise();

db.open(function(err, db) {
    // handle err
    promise.resolve(db);
});

server.get('/api/something', function doSomething(req, res, next) {
    promise.then(function(db)
        // do something
    });
}); 
```

我相信 Mongoose 处理连接的方式与此类似。

# c++ - 性能比较：strstr() 与 std::string::find()

> ID：11799956
> 
> 赞同：4
> 
> 时间：2012-08-03T16:48:13.033
> 
> 标签：c++, c, string

有人可以解释为什么我应该使用 strstr 或 string find() 吗？哪个更快，在哪里？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T16:52:28.757

在 C++ 中你应该使用 std::string::find()，在 C 中你应该使用 strstr()。性能上的差异不应该是显着的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T16:54:55.620

哪个更快并不重要。更重要的是 std::string::find 是安全的。因此，如果您要使用 c++，请使用 std::string 类并避免使用旧的 c 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-19T10:17:47.437

我已经对字符串中搜索子字符串的几个版本进行了基准测试。

带有 std=c++20/-O3 的 GCC 10.3 显示以下结果：

*   strstr 是最快的
*   std::string::find 慢约 3 倍
*   std::search 慢约 4.5 倍
*   std::string_view::find ~ 慢 11 倍

铿锵声12：

*   strstr 是最快的
*   std::string::find 慢约 3 倍
*   std::search 慢约 5.5 倍
*   std::string_view::find ~ 慢 8.5 倍

因此，如果您确实关心性能，请使用 strstr。

# rest - 如何不分块交付 RESTlet 服务响应

> ID：11799960
> 
> 赞同：0
> 
> 时间：2012-08-03T16:48:36.227
> 
> 标签：rest, restlet, chunked

我正在使用 RESTlet REST Web 服务通过 GET 将数据传送到我的 iOS 和 Android 应用程序。有时我会在应用程序端遇到连接错误。我将服务的 url 放在浏览器中以调用 GET 并查看响应。我注意到服务的内容不是立即交付的，而是一次以大块或几行的形式交付。响应的数据类型是 JSON。

调用服务时，有没有办法在一个块中获取整个响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T17:52:34.677

调用 ServerResource#setResponseEntityBuffering(true) 方法

# intellij-idea - 是否可以使用 IntelliJ 中的接口实现者获得一个粘性窗口？

> ID：11799963
> 
> 赞同：1
> 
> 时间：2012-08-03T16:48:37.177
> 
> 标签：intellij-idea

因此，我可以获得一个显示特定接口实现者的弹出窗口。但它是一个弹出窗口，如果我在它之外单击它会关闭。我想要的是一个粘性窗口，就像 Eclipse 中的一个，甚至是 ReSharper 在 VS 中提供的一个。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:25:35.107

站在接口类上使用`Navigate`| **键入层次结构**( `Ctrl`+ `H`)。**当Pinned**时，Hierarchy 面板会打开并粘在一边。

# c# - 您可以在 WCF 中将接口用作 DataMembers 吗？

> ID：11799964
> 
> 赞同：5
> 
> 时间：2012-08-03T16:48:37.163
> 
> 标签：c#, wcf, interface

你能做这个吗？

```
[DataContract]
public class RegisterEndpointRequest : NotificationRegistrationServiceRequest
{
    [DataMember]
    public IEndpoint Endpoint { get; set; }
} 
```

注意成员 Endpoint 是一个接口 ( `IEndpoint`)，而不是一个类。WCF 会允许这样做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T17:02:01.543

我认为你可以（但我还没有测试过），但是你需要声明该接口的所有实现`[KnownType]`：

```
[DataContract]
[KnownType(typeof(EndpointImplA))]
[KnownType(typeof(EndpointImplB))]
public class RegisterEndpointRequest : NotificationRegistrationServiceRequest
{
    [DataMember]
    public IEndpoint Endpoint { get; set; }
} 
```

每个实现类都必须有一个`[DataContract]`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T16:55:24.867

WCF 中的 DataContractAttribute 不适用于接口：[请参阅此处的文档](http://msdn2.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.aspx)

这个问题的[答案](https://stackoverflow.com/a/4791968/)可能会让您更好地了解原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T06:48:32.757

是的，当然您可以在 DataContract 中将接口作为 DataMember。然后您必须在 KnownType 属性中指定所有**接口实现...**

```
 [DataContract]
    [KnownType(typeof(ActivityDC))]
    [KnownType(typeof(StepDC))]
    [KnownType(typeof(WaveDC))]
    public class CampaignDC : AuditedEntityBaseDC
    {
        [DataMember]
        public IList<IActivityDC> Activities { get; set; } 
```

# c++ - 使用 LD_PRELOAD 和 C++ 中的全局范围对象加载堆分析器

> ID：11799965
> 
> 赞同：1
> 
> 时间：2012-08-03T16:48:38.573
> 
> 标签：c++, linux, global-variables, ld-preload

我们编写了一个堆分析器（供参考`lib_debug`），它覆盖`free`和`malloc`（和其他），主要用于监视我们的应用程序中的错误，例如内存泄漏，这些应用程序部署在运行 Linux 的 PPC 系统上。`lib_debug`被编译为共享库，`LD_PRELOAD`在需要时加载。

到目前为止，此调试器运行良好；每当`malloc`被调用时，都会在堆栈上创建一个内存监视器单例，当此单例在退出时超出范围时，它会报告任何未释放的内存。

但是，我们的一个应用程序现在`std::vector`在全局范围内分配 a。看起来这个全局`vector`是在我们的堆分析器之前创建的，最重要的是之后被销毁。因此，一旦`main`我们在 this 中插入任何东西`vector`，`lib_debug`就会认为我们在关机时有内存泄漏。

为了说明，这就是我认为的事件顺序：

1.  `LD_PRELOAD``lib_debug`从;加载符号
2.  `std::vector`在全局范围内的堆栈上创建；
3.  `lib_debug`初始化发生 -`malloc`已在某处调用，这会导致在堆栈上创建实际的堆分析器单例；
4.  输入`main`；
5.  `std::vector::push_back()`发生，在堆上分配内存；
6.  `main`退出；
7.  堆分析器单`lib_debug`例超出范围，它看到`vector`没有释放其内存 - 报告错误；
8.  `vector`超出全局范围，释放其内存；
9.  程序终止。

因此，有什么方法可以保证我们的`LD_PRELOADed`单例总是最后被删除，从而捕获`free`我们应用程序中出现的每一个单例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:05:52.153

如果您将`GCC`其用作编译器，则此方法有效。您可以在库中定义一个函数来充当`constructor`，以便在加载库时执行代码。

```
static int initialize_lib_debug () __attribute__((constructor));

static int initialize_lib_debug () {
    /* ... */
} 
```

# jquery - struts2.1.6我需要哪个版本的jquery和json？

> ID：11799966
> 
> 赞同：0
> 
> 时间：2012-08-03T16:48:44.277
> 
> 标签：jquery, json, struts2

我有义务按**Struts2.1.6**工作。我从存档中下载了它。我需要为我的项目使用**struts2-jquery-plugin 和 struts2-json-plugin**。但是我在下载的版本中没有找到任何json的插件。另外，我不知道哪个版本的 jquery 插件可以与 struts2.1.6 一起使用。非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:02:45.687

您需要使用 2.1.6 JSON 插件；你不应该*混搭*官方插件。

我不知道该插件有任何主要的 S2 版本问题，尽管我已经有一段时间没有将它与旧的 S2 版本一起使用了。jQuery 插件 2.3 版本适用于 2.1.8，如果它不适用于 2.1.6 ，我会*有点惊讶；*IIRC 它只是组件等。

我可能只是尝试其中一个较新的版本，看看它是否有效。否则，请考虑只编写普通的 jQuery/JavaScript，而不是使用旧版本的 jQuery 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:56:27.303

JSON 只是一种数据格式。你不需要下载它。jQuery 1.4.2 是它设计的版本。

# nlp - 有没有正极性或负极性的形容词词表

> ID：11799971
> 
> 赞同：4
> 
> 时间：2012-08-03T16:49:11.070
> 
> 标签：nlp, stanford-nlp, sentiment-analysis

我正在做情绪分析。我想是否有任何可用的形容词表示正面/负面（例如正面：好，真棒，惊人，）含义？第二件事是一组数据，我可以将其用作测试用例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-04T07:37:02.043

极性相关资源：

SentiWordNet：[http ://sentiwordnet.isti.cnr.it/](http://sentiwordnet.isti.cnr.it/)

询问者词典：[http ://www.wjh.harvard.edu/~inquirer/homecat.htm](http://www.wjh.harvard.edu/~inquirer/homecat.htm)

可能的测试数据：[http ://www.cs.pitt.edu/mpqa/](http://www.cs.pitt.edu/mpqa/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T05:17:17.230

英语的正面和负面意见词或情感词列表（约 6800 字）：[http ://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html](http://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html)

# powerpoint - 使用 Apache POI 将 PPT 转换为 PNG

> ID：11799972
> 
> 赞同：2
> 
> 时间：2012-08-03T16:49:15.027
> 
> 标签：powerpoint, apache-poi

按照[http://poi.apache.org/slideshow/how-to-shapes.html](http://poi.apache.org/slideshow/how-to-shapes.html)提供的示例，我得到了转换工作。

```
FileInputStream is = new FileInputStream("slideshow.ppt");
SlideShow ppt = new SlideShow(is);
is.close();

Dimension pgsize = ppt.getPageSize();

Slide[] slide = ppt.getSlides();
for (int i = 0; i < slide.length; i++){

    BufferedImage img = new BufferedImage(pgsize.width, pgsize.height, BufferedImage.TYPE_INT_RGB);
    Graphics2D graphics = img.createGraphics();

    graphics.setPaint(Color.white);
    graphics.fill(new Rectangle2D.Float(0, 0, pgsize.width, pgsize.height));
    slide[i].draw(graphics);
    FileOutputStream out = new FileOutputStream("slide-"  + (i+1) + ".png");
    javax.imageio.ImageIO.write(img, "png", out);
    out.close();
} 
```

但是生成的图像非常小。如何增加图像输出的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T10:05:21.027

您需要调整图形上下文的大小并添加常规转换。

```
 FileInputStream is = new FileInputStream("slideshow.pptx");
    SlideShow ppt = new SlideShow(is);
    is.close();

    double zoom = 2; // magnify it by 2
    AffineTransform at = new AffineTransform();
    at.setToScale(zoom, zoom);

    Dimension pgsize = ppt.getPageSize();

    Slide[] slide = ppt.getSlides();
    for (int i = 0; i < slide.length; i++) {
        BufferedImage img = new BufferedImage((int)Math.ceil(pgsize.width*zoom), (int)Math.ceil(pgsize.height*zoom), BufferedImage.TYPE_INT_RGB);
        Graphics2D graphics = img.createGraphics();
        graphics.setTransform(at);

        graphics.setPaint(Color.white);
        graphics.fill(new Rectangle2D.Float(0, 0, pgsize.width, pgsize.height));
        slide[i].draw(graphics);
        FileOutputStream out = new FileOutputStream("slide-" + (i + 1) + ".png");
        javax.imageio.ImageIO.write(img, "png", out);
        out.close();
    } 
```

# batch-file - 从另一个 .bat 文件调用 .BAT 文件

> ID：11799977
> 
> 赞同：7
> 
> 时间：2012-08-03T16:49:31.050
> 
> 标签：batch-file

我有一个可以向其传递参数的 .bat 文件。

```
LOAD_TABLE_WRAPPER.BAT Table1 DEV 
```

简而言之，它运行 SQL 以在 Dev 环境中加载 Table1。现在，我希望它在一夜之间加载多个表。所以，我设置了一个主 .BAT，它类似于

```
::MASTER_LOAD.BAT
CALL LOAD_TABLE_WRAPPER.BAT Table1 Dev
CALL LOAD_TABLE_WRAPPER.BAT Table2 Dev
CALL LOAD_TABLE_WRAPPER.BAT Table3 Dev 
```

如果我从 cmd 提交 MASTER_LOAD.BAT，它会执行 Table1 的加载，但不会继续加载 Table2。这些是 WRAPPER.BAT 的最后两行

```
:eof
exit %ERROR_STATUS% 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T17:32:22.827

您`exit %error_status%`在 LOAD_TABLE_WRAPPER.BAT 中的命令正在终止您的批处理会话，因此您的 MASTER_LOAD.BAT 永远没有机会在下一次调用中恢复。

只需将 /B 选项添加到 EXIT 命令即可解决问题

```
exit /b %error_stats% 
```

我几乎从不在批处理文件中使用没有 /B 的 EXIT（尽管有时不需要 /B）。

但另一种选择是通过 CMD 而不是 CALL 运行被调用的脚本。

```
::MASTER_LOAD.BAT
CMD /C LOAD_TABLE_WRAPPER.BAT Table1 Dev
CMD /C LOAD_TABLE_WRAPPER.BAT Table2 Dev
CMD /C LOAD_TABLE_WRAPPER.BAT Table3 Dev 
```

方法之间存在许多差异

**使用 EXIT /B 调用**

*   比较快
*   可以在返回时保留环境变量值（如果您不想保留值，可以使用 SETLOCAL）
*   被调用脚本继承延迟扩展和扩展状态（启用或禁用）

**指令/C**

*   比较慢
*   返回时无法保留环境变量值。（您可以将定义写出到文件中，并在返回主服务器时将它们重新加载，但这既不方便也不高效）
*   被调用的脚本总是以默认的延迟扩展和扩展状态开始（通常延迟扩展被禁用并且扩展被启用）

我永远不会建议在 CALL 上使用 CMD /C，除非被调用的批处理文件在没有 /B 选项的情况下退出，并且您不能修改批处理文件以添加 /B 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:59:13.963

执行 CALL LOAD_TABLE_WRAPPER.BAT Table1 Dev 有问题吗？当您在通话之间回显时，结果是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T16:55:35.513

您应该使用 start 命令来解决此问题。调用使当前进程运行命令。您可以在此处了解有关开始的更多信息[。](http://ss64.com/nt/start.html)基本实现应该是：

```
"START program-name arg1 arg2"` 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-18T03:41:06.313

尝试发出 PAUSE 命令，如下所示：

`CALL LOAD_TABLE_WRAPPER.BAT Table1 Dev PAUSE CALL LOAD_TABLE_WRAPPER.BAT Table2 Dev PAUSE CALL LOAD_TABLE_WRAPPER.BAT Table3 Dev`

# c# - Stream.CopyTo(Stream) 会损坏数据吗？

> ID：11799984
> 
> 赞同：0
> 
> 时间：2012-08-03T16:49:58.147
> 
> 标签：c#, filestream

**的背景：**

我有以下 WriteFileToStream 函数，旨在完成一项简单的工作：从文件中获取数据并将其复制到 Stream。

我最初使用的是 Stream.CopyTo(Stream) 方法。然而，经过长时间的调试过程，我发现这是在我的处理管道中进一步出现“损坏数据”错误的原因。

**概要：**

使用 Stream.CopyTo(Stream) 方法会产生 65536 字节的数据，并且流无法正确处理。

使用 Stream.Write(...) 方法产生 45450 字节的数据并且流处理正确。

**问题：**

谁能明白为什么 CopyTo 的以下用法可能导致将无关数据写入流？

请注意：WriteFileToStream 中的最终代码取自对以下问题的回答：[Save and load MemoryStream to/from a file](https://stackoverflow.com/questions/8624071/save-and-load-memorystream-to-from-a-file)

```
public static void WriteFileToStream(string fileName, Stream outputStream)
{
    FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read);
    long fileLength = file.Length;
    byte[] bytes = new byte[fileLength];
    file.Read(bytes, 0, (int)fileLength);
    outputStream.Write(bytes, 0, (int)fileLength);
    file.Close();
    outputStream.Close();

    // This was corrupting the data - adding superflous bytes to the result...somehow.
    //using (FileStream file = File.OpenRead(fileName))
    //{
    //    // 
    //    file.CopyTo(outputStream);
    //}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T16:52:37.947

看看这段代码：

```
byte[] bytes = new byte[fileLength];
file.Read(bytes, 0, (int)fileLength); 
```

一开始就坏了。你忽略了`Stream.Read`. *永远不要*那样做。假设文件在获取长度和从中读取之间被截断 - 您将写入一堆零。假设无论出于何种原因，`Read`即使数据存在，调用也不会读取整个数据（对于本地文件不太可能，但如果通过网络访问的文件可能表现出这种行为，我不会感到惊讶） - 再次，你' d 错误地写了一堆零。

话虽如此，这肯定是一个奇怪的情况。就我个人而言，我总是尝试将流*视为流*- 我不喜欢根据该值获取大小和预分配。例如，如果文件在您阅读时增长，您的代码可以很好地证明该问题。在不知道更多细节的情况下，我不知道这是否可能。

但不，`Stream.CopyTo`据我所知很好。我认为问题更可能出在其他地方。

请注意，在您注释掉的版本中，您不会关闭输出流 - 而在显式读取文件的版本中（不使用`using`语句，顺便说一句......）您会这样做。

你能可靠地重现问题吗？一个简短但完整的程序来演示这个问题将更有可能说服我框架中的一个错误:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T20:39:41.737

我已经评论了我认为你的错误在哪里。

```
public static void WriteFileToStream(string fileName, Stream outputStream)
{
    FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read);
    long fileLength = file.Length; //bug
    byte[] bytes = new byte[fileLength];
    file.Read(bytes, 0, (int)fileLength);
    outputStream.Write(bytes, 0, (int)fileLength); //bug
    file.Close();
    outputStream.Close();

    //your code here should work when you fix the bug
} 
```

这就是你想要的：

```
long fileLength = outputStream.Length; 
```

和

```
outputStream.Write(bytes, 0, bytes.Length); 
```

# ruby-on-rails - 在登录时销毁设计用户会话

> ID：11799985
> 
> 赞同：3
> 
> 时间：2012-08-03T16:50:23.017
> 
> 标签：ruby-on-rails, devise

登录用户时，设计似乎不会使以前的会话无效。如果我以 UserA 身份登录，返回登录屏幕并以 UserB 身份重新登录，devise 不会破坏前一个会话并创建一个新会话，但会保留 UserA 会话。我想知道如何在用户登录时调用 Session#destroy。我知道我可以重新实现 Session#create 方法，但据我了解，这将涉及生成所有控制器视图。我想知道是否有更清洁的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:15:22.427

这是一个极端的边缘案例。用户A 登录然后他以用户B 的身份登录而不注销不会经常发生。如果您真的担心，您可以重定向到网站的主页，并显示“已登录”的闪烁消息。或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:48:33.897

我不确定我是否理解您要执行的操作，但是如果您尝试在 UserB 登录时使 UserA 会话无效，则当他们从不同位置登录时可能会遇到问题。

# android - Android：是否可以设置 webView 的缓存持续时间？

> ID：11799988
> 
> 赞同：0
> 
> 时间：2012-08-03T16:50:54.590
> 
> 标签：android, caching, webview

我想知道在 webView 中加载文件时是否可以在缓存中设置文件的到期持续时间。

就我而言，我总是将相同的 URL 图像加载到 webView 中。尽管是相同的 URL，但图像将能够随时更改。

我不想禁用缓存，但我想知道是否可以为此文件设置确定的到期持续时间，例如 5、10... 或 30 分钟。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:56:14.183

要强制浏览器每次都获取新图像，请添加唯一的查询参数。例如：

[http://example.com/images/file.png?q=1](http://example.com/images/file.png?q=1)

[http://example.com/images/file.png?q=2](http://example.com/images/file.png?q=2)

等等。通常，时间戳值可用于生成唯一值。

# jquery - 从本地目录加载 json

> ID：11799989
> 
> 赞同：1
> 
> 时间：2012-08-03T16:50:57.030
> 
> 标签：jquery, json

我有一个尝试加载 json 文件的按钮单击。它永远不会达到成功功能。我想我可以在本地加载一个 json 文件而不必将它放在服务器上？为什么这行不通。

```
$(function(){
    $('.demo').click(function(){

            $.ajax({
            url: 'data/demo.json',
            dataType: 'json',
            success: function(data){
                console.log("data = ", data)
                        }
        });

    });
}); 
```

这是我的文件夹结构树。

*   索引.html
*   数据（文件夹）
    *   演示.json js
*   page.js

**JSON**

```
{"markers": [
        {
            "point":new GLatLng(40.266044,-74.718479),
            "homeTeam":"Lawrence Library",
            "awayTeam":"LUGip",
            "markerImage":"images/red.png",
            "information": "Linux users group meets second Wednesday of each month.",
            "fixture":"Wednesday 7pm",
            "capacity":"",
            "previousScore":""
        },
        {
            "point":new GLatLng(40.211600,-74.695702),
            "homeTeam":"Hamilton Library",
            "awayTeam":"LUGip HW SIG",
            "markerImage":"images/white.png",
            "information": "Linux users can meet the first Tuesday of the month to work out harward and configuration issues.",
            "fixture":"Tuesday 7pm",
            "capacity":"",
            "tv":""
        },
        {
            "point":new GLatLng(40.294535,-74.682012),
            "homeTeam":"Applebees",
            "awayTeam":"After LUPip Mtg Spot",
            "markerImage":"images/newcastle.png",
            "information": "Some of us go there after the main LUGip meeting, drink brews, and talk.",
            "fixture":"Wednesday whenever",
            "capacity":"2 to 4 pints",
            "tv":""
        },
] } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:03:38.033

好吧，我有一个类似的脚本，它访问本地文件并且工作正常。我在这里看到的问题是您的 JSON 无效。也许这就是问题所在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:52:20.563

即使页面是从文件本地提供的，也不能使用 AJAX 访问本地文件

# javascript - jQuery Isotope 插件添加过滤器

> ID：11799992
> 
> 赞同：1
> 
> 时间：2012-08-03T16:51:34.313
> 
> 标签：javascript, jquery, jquery-isotope

我正在使用同位素过滤器对项目的模板列表进行排序。用户可以选择基于列宽（2 col、3 col、4 col）或类型（文本、图像、视频）等内容进行过滤。还有更多选项，但这使示例更简单。

过滤器现在的工作方式是该项目必须匹配所有过滤器选项。我希望能够过滤与一个或多个过滤器选项匹配的项目。

第二个问题：是否有任何允许分步过滤的功能？例如，如果我可以显示所有 2 或 3 列的模板，然后将这些结果过滤为仅文本和视频模板。

我认为这可能超出了插件的范围，我可能必须编写自己的过滤器，找到不同的插件（至少用于过滤）或更改过滤呈现给用户的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:11:49.063

我假设您应用了各种用于过滤的类，例如 col2、col3、col4 和文本、图像、视频，并且目前正在沿着 '.col2.image' 的行构建一个过滤器字符串，它可以让您跨越两列并且是图像的元素。通过用逗号分隔它们，您将获得一个 OR 过滤器 ('.col2, .image')，它显示任何图像或跨越两列的内容。

首先，您现在可以将这些组合起来用于第二部分，以创建像“.col2.text、.col2.video、.col3.text、.col3.video”这样的过滤器，但是，这可能会很快变得难看，尤其是当您增加类别的数量。

为了简化，我修改了 Isotope 以接受一个过滤器数组并将它们与多个过滤器调用链接在一起，但是，听起来也可以传入更复杂的过滤对象而不是字符串（https://github .com/desandro/isotope/issues/144#issuecomment-4595552），这消除了修改同位素来源的需要。对于上面的示例，这可能类似于：

```
$('.element').filter('.col2, col3').filter('.text, .video') 
```

这比生成一串可能的组合要简单得多。

.filter (http://api.jquery.com/filter/) 上的文档提供了有关高级过滤的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:19:31.447

您可以轻松过滤各种组合，如下所示[http://jsfiddle.net/3nY9V/](http://jsfiddle.net/3nY9V/)

# sql-server-2008 - SQL Server 2008 游标

> ID：11799994
> 
> 赞同：0
> 
> 时间：2012-08-03T16:51:39.833
> 
> 标签：sql-server-2008, insert, cursor

我需要一些有关 SQL Server 游标的帮助：

```
Declare @DCursor cursor, @OldIndividualID uniqueIdentifier, 
        @NewIndividualID UniqueIdentifier, @NewUniqueColID uniqueIdentifier

Set @DCursor = Cursor For
     Select IndividualID From [MVCOmar2].[dbo].PrideMVCDriver 
     Where UniqueColID='895AE0DE-D2CF-461E-ADA9-14FB8BB59640'
        Set @NewUniqueColID=NEWID()
Open @DCursor
Fetch Next From @DCursor Into @OldIndividualID
While (@@FETCH_STATUS = 0)
Begin
    Set @NewIndividualID=NEWID()
    INSERT INTO [MVCOmar2].[dbo].[PrideMVCCollisionDiagram] ([IndividualID], [ColDiagram],
       [dateEntered]      ,[OfficerID]      ,[UniqueColID]      ,[ESDEditDiagram]) 
    SELECT @NewIndividualID,[ColDiagram]      ,[dateEntered]      ,[OfficerID]      ,
        @NewUniqueColID      ,[ESDEditDiagram] 
        FROM [MVCOmar2].[dbo].[PrideMVCCollisionDiagram] 
       WHERE  [IndividualID]=@OldIndividualID;

    Fetch Next From @DCursor Into @OldIndividualID
End

Close @DCursor
Deallocate @DCursor 
```

我有上面的代码并且该`Select`语句工作正常，它返回 2 行，但由于某些奇怪的原因，游标无法正常工作，这意味着插入语句没有插入任何没有意义的东西，因为各个 id 应该存在。该 select 语句返回 2 个单独的 ID，因此 insert 语句应该可以工作，但它不是，所以我不知道该怎么做......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:13:32.533

我建议您不要为此使用游标。基于连接的简单插入将执行以下操作：

```
DECLARE @NewCollisionDiagram TABLE (
   IndividualID uniqueidentifier,
   UniqueCOlID uniqueidentifier
);

INSERT MVCOmar2.dbo.PrideMVCCollisionDiagram (
   IndividualID,
   ColDiagram,
   dateEntered,
   OfficerID,
   UniqueColID,
   ESDEditDiagram
)
SELECT
   newid() NewIndividualID, //alias not needed but here for clarity
   CD.ColDiagram,
   CD.dateEntered,
   CD.OfficerID,
   newid() NewUniqueColID,
   CD.ESDEditDiagram
OUTPUT
   inserted.NewIndividualID,
   inserted.NewUniqueColID
INTO
   @NewCollisionDiagram
FROM
   MVCOmar2.dbo.PrideMVCCollisionDiagram CD
   INNER JOIN MVCOmar2.dbo.PrideMVCDriver D
      ON CD.IndividualID = D.IndividualID 
WHERE
   D.UniqueColID = '895AE0DE-D2CF-461E-ADA9-14FB8BB59640'; 
```

现在，如果您需要使用新的`NewIndividualID`和`NewUniqueColID`值，您可以从`@NewCollisionDiagram`表中获取它们。如果您必须使用逐行处理（您正在执行诸如发送电子邮件或创建表格之类的操作，这绝对需要它），那么您只能在最后一秒，在具有最终数据形式的表格上执行此操作就在它必须逐行处理之前。

要尝试解决您遇到的问题，我建议您将上面的最后一条 INSERT 语句调整为简单的 SELECT，尝试您的过程，看看输出是否符合您的预期。您在游标中的隐式 JOIN 逻辑可能不太正确。

我发现您从要插入的同一个表中进行选择的方式以及 Driver 表中的 IndividualID 是否已经存在于 CollisionDiagram 表中存在潜在的不一致。

# android - （设备）使用 Json 处理 Netflix 问题的 AJAX 请求

> ID：11799995
> 
> 赞同：0
> 
> 时间：2012-08-03T16:51:45.047
> 
> 标签：android, jquery, ajax, json, device

我正在为 Mobile 创建一个简单的应用程序，以通过带有 json 的 AJAX 请求检索 netflix 信息。这在浏览器上运行良好。

我在触发 ajax 请求成功时遇到问题。我一直在到处阅读和搜索，但没有解决方案可以解决我在设备（模拟器，最终是 android）上的问题。我正在使用Phonegap。

这是我的 CDN：

```
<script src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.js"></script>
<script src="http://code.jquery.com/mobile/1.0a4/jquery.mobile-1.0a4.min.js"></script> 
```

这是我的代码：

```
var myMoviePeopleURL = "http://odata.netflix.com/Catalog/People?$top=200&$format=json&$callback=?";

        $.ajax({
            dataType: 'jsonp',
            url: myMoviePeopleURL,
            success: function () {alert('Success');},
            error: function (jqXHR, textStatus, errorThrown) {
                alert(textStatus);
                alert(errorThrown);
            },
        }); 
```

我收到一个解析错误和未调用的函数。该设备在文档之前启动，因此这不是互联网问题。我已经检查过了。这似乎是语法问题或兼容性问题（与设备）。

提醒：我需要这个才能在设备上工作。浏览器可以正常使用此代码。

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:31:33.133

我在工作场所与另一位应用程序开发人员交谈过，他声称在 Netflix API 中发现了一个错误。他给他们发了电子邮件。就像我之前所说的，这个 phonegap 应用程序在 Blockbusters BBYOpen 的手机上运行良好。

再次感谢你们的帮助！

# java - 嵌套 if/else、开关还是更有效的 RPG 战斗？

> ID：11799996
> 
> 赞同：3
> 
> 时间：2012-08-03T16:51:45.027
> 
> 标签：java, android, multidimensional-array, switch-statement, nested-statement

我正在为android手机开发一个基于java的回合制RPG，我目前正在尝试弄清楚如何处理具有超出损害之外的额外变量的攻击。例如，我想让火焰攻击在目标具有燃烧效果时造成额外 10% 的伤害。我有点不确定如何以一种有效的方式进行此操作，并且允许将来添加到我的状态/攻击系统中。

所以这是我对如何做到这一点的想法：

1.  一系列 if/else 语句或 switch

    ```
    switch (status) {
    case burned:
        if (type == fire) {
            damage = damage * 1.1;
        }
        break;
    case frozen:
        if (type == ice) {
            damage = damage * 2;
        }
        break;
    } 
    ```

    如果每种状态都有很多可能的结果，我也可以使用嵌套开关。

2.  使用二维数组，其`x`值为状态，`y`值为攻击或类型。当您检查`[x][y]`它时，它会返回一个数值，表示攻击中将发生的变化。

    ```
     Burned   Frozen

    Fire  [1.1]    [1]

    Ice   [1]      [2] 
    ```

虽然这两个现在看起来都很好，但我不确定它是否适用于未来。现在，我当然可以使用改变伤害量的组合，但是对于具有非数值效果的攻击，我不能简单地返回一个值并将我的伤害乘以该值呢？

是否有可能生成某种代表以下情况的代码：

```
烧毁 = 1 在第一位置，冻结 = 2
火力攻击 = f 在第二位置，冰 = i
伤害模组在第三位

```

所以对着火的敌人进行火力攻击`1-f-1.1`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T17:06:21.603

您应该尝试使用多态性。

# 对于开关/if-else

创建一个表示攻击的接口，并让它声明一个方法：

```
public interface Attack {
    double doAttack(double baseDamage);
} 
```

然后创建实现此接口的类：

```
public class FireAttack implements Attack {
    double doAttack(double baseDamage){
        return 1.1 * baseDamage;
    }
}

public class IceAttack implements Attack {
    double doAttack(double baseDamage){
        return 2 * baseDamage;
    }
} 
```

然后，不要在代码中使用 switch 语句，而是执行以下操作：

```
public class Player {
    private Attack mAttack;

    // Somewhere in your code, you setup something like
    void setFireWeapon(){
        mAttack = new FireAttack();
    }

    // This is where the attack is taken care of
    double inflictDamage() {
        return mAttack.doAttack();
    }
} 
```

这使您可以做的是实现您将来可能希望的任何新类型的攻击，并简单地分配`Attack mAttack`这个新的接口实现`Attack`。`baseDamage * aDouble`这是一个简单的例子，你可以做一些比你想要的更强大的东西。

# 对于状态（烧毁/冻结）

有很多方法可以实现冻结等状态。首先，您可以使用我上面解释的相同模式。

除了拥有成员之外，您还可以使用您喜欢`Attack mAttack`的名称或任何名称添加类似的逻辑。`HealthStatus mHealthStatus`然后调用`inflictDamage()`会将对象重定向`mAttack`到`mHealthStatus`对象。

然后这个`HealthStatus`类将再次成为一个接口，

```
public interface HealthStatus {
    double considerAttack(Attack anAttack);
} 
```

它将具有各种状态的实现：

```
public class NormalStatus implements HealthStatus{
    double considerAttack(Attack anAttack){
        return anAttack.doAttack(); // No change here
    }
}

public class FrozenStatus implements HealthStatus{
    double considerAttack(Attack anAttack){
        return 0; // Can't attack when froxen
    }
}

public class BurnedStatus implements HealthStatus{
    double considerAttack(Attack anAttack){
        return anAttack.doAttack() * 2.0; // Get berserk when on fire!
    }
} 
```

您也可以使用其他模式。我建议您查看设计模式，它可以解决您所面临的问题。

*   请参阅状态模式[http://en.wikipedia.org/wiki/State_pattern](http://en.wikipedia.org/wiki/State_pattern)
*   请参阅策略模式[http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)
*   请参阅访问者模式[http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

仅举几个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:19:19.833

AntonieG 走在正确的轨道上。这个问题的一般解决方案是使用策略设计模式。

**战略**

*动机*

常见的情况是类仅在行为上有所不同。对于这种情况，将算法隔离在单独的类中是一个好主意，以便能够在运行时选择不同的算法。

*意图*

定义一系列算法，封装每个算法，并使它们可互换。策略让算法独立于使用它的客户而变化。

*执行*

![策略模式实施](../Images/00c1c9efdeb8bbec762d6c24a9c1c168.png) [http://www.oodesign.com/strategy-pattern.html](http://www.oodesign.com/strategy-pattern.html)

另请查看以下链接。

[http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)

[http://blogs.microsoft.co.il/blogs/gilf/archive/2009/11/22/applying-strategy-pattern-instead-of-using-switch-statements.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/11/22/applying-strategy-pattern-instead-of-using-switch-statements.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T17:23:23.063

你的想法似乎太线性了。使用面向对象的原则来设计你的游戏。为扩展通用攻击的攻击创建类。

```
public abstract class Attack{
    protected String attackName;
    protected Double damage;

    public Attack(){
        attackName = "Standard";
        damage = 1.0;
    }

    public Double getDamage(){
        return damage;
    }

    public String getAttackName(){
        return attackName;
    }
} 
```

然后扩展：

```
public class FireStorm extends Attack{
    public FireStorm(String attackName, Double damage){
        this.attackName = attackName;
        this.damage = damage;
    }

    @Override
    public Double getDamage(Enemy target){
        if(target.hasBurnEffect()){
            damage *= 2.0;
        } else {
            damage = super.getDamage();
        }

        return damage;
    }
} 
```

我真的不太了解你游戏中的事物范围，所以我无法对其进行过多描述。但是，如果您想让您的游戏按照您的建议灵活和可扩展，那么您将需要使用继承和其他面向对象编程的原则。