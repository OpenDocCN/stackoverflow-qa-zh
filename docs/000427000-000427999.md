# StackOverflow 问答 000427000-000427999

# c# - The key 'UserID' does not exist in the appSettings configuration section

> ID：427007
> 
> 赞同：0
> 
> 时间：2009-01-09T03:48:15.297
> 
> 标签：c#, visual-studio-2008

All of a sudden I start getting this error while trying to open 2 of some 10+ forms in my Window Forms application in designer.

To prevent possible data loss before loading the designer, the following errors must be resolved: The key 'UserID' does not exist in the appSettings configuration section.

It used to work fine and I dont' remember doing significant changes to it.

The key, of course, is in the appSettings alright, and always was, and the application builds and executes as expected. Only design view for these 2 forms is unaccessible.

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings>
        <add key="Server" value="MYSERVER" />
        <add key="DataBase" value="MYDB" />
        <add key="UserID" value="MYUSER" />
        <add key="PassWord" value="MYPASS" />
    </appSettings>
</configuration> 
```

One of them is just a Form, the other is a UserControl. None of them inherits from abstract classes or anything like that. Rebuilding or restarting Visual Studio does not help so far.

Any ideas on fixing it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T04:46:16.960

And finally, here is what the designer REALLY was complaining about: I had a call to a stored procedure right from the User Control's InitializeComponent(). While it may not be a good idea indeed (separate question material?), I have to say that the error was not presented to me in the best possible way...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T04:00:13.870

Is it possible the config file was moved to a different folder or a new config file was introduced somewhere?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T04:15:52.170

Okay, there is something else in common with these 2 forms - they both use one UserControl and there is another error in the designer which says "The variable 'myControl' is either undeclared or was never assigned." (where myControl is the User Control). Maybe I should manually delete it and try re-adding through the designer.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T04:50:06.703

You might check to make sure your XML is well-formed. I'm relying on memory here, but I recall getting this error once after copying settings between different config files and the only problem was that I'd overwritten an extra angle bracket when pasting.

# django - 如何在 Django 表单中隐藏主键字段

> ID：427009
> 
> 赞同：5
> 
> 时间：2009-01-09T03:48:40.430
> 
> 标签：django, django-forms

我希望我的主键字段在我的编辑页面中不可见。如果我将其设为 AutoField，则不会以 HTML 表单呈现。但是主键值也不在我的 POST 数据中。有没有一种简单的方法可以将 AutoField 呈现为隐藏字段？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T22:47:51.620

如果您不希望您的用户能够更改表单上的某些内容，那么您应该将其放置在 URL 或其他一些上下文中。否则，您将面临安全问题（或至少是额外的用例）。

在 urls.py 中：

```
(r'^edit/?P<my_id>[\d]+)/$', views.edit), 
```

在 view.py 中：

```
from django.shortcuts import render_to_response, get_object_or_404
from models import MyModel

def edit(request, my_id):
    obj = get_object_or_404(MyModel, id=my_id)
    if request.POST:
        form = MyForm(request.POST, instance=obj)
        if form.is_valid():
            form.save()
            #
            # do other stuff....
            #
    else:
        form = MyForm(instance=obj)

    return render_to_response(template_name, {
        "form": form
    }, context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T18:17:07.720

您可以将其[小部件](http://docs.djangoproject.com/en/dev/ref/forms/widgets/)指定为隐藏字段

# crash - VMR-9 无渲染模式：SelectAtPosition() 崩溃

> ID：427011
> 
> 赞同：1
> 
> 时间：2009-01-09T03:48:56.560
> 
> 标签：crash, dvd

在无渲染模式下使用 VMR-9 时如何解决 SelectAtPosition() 崩溃？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T03:49:43.750

使用无渲染模式时的 SelectAtPosition() 崩溃问题可以通过在自定义分配器中实现 IVMRWindowlessControl9 接口来解决。

1.  除了 IVMRSurfaceAllocator9 和 IVMRImagePresenter9 之外，还要实现 IMRWindowlessControl9！类CALlocator：公共IVMRSurfaceAllocator9，IVMRImagePresenter9，IVMRWindowlessControl9

2.  定义IVMRWindowlessControl9的所有虚函数。就我而言，我需要在以下函数上添加额外的代码以使鼠标处理正常工作：GetAspectRatioMode()、SetAspectRatioMode()、SetAspectRatioMode()、GetVideoPosition() 和 GetNativeVideoSize()。其他函数只返回 S_OK。

M$ SDK 文档没有提到我们需要实现这个！！！经过数小时的调试，我注意到quartz.dll 尝试从自定义分配器中查询此接口。有时候，耐心真的很值得！

# c# - 是否可以使用 IoC（如 Ninject 或其他 IoC）动态注入属性？

> ID：427017
> 
> 赞同：1
> 
> 时间：2009-01-09T03:52:44.150
> 
> 标签：c#, reflection, dependency-injection, inversion-of-control, attributes

我正在[扩展我的对象属性值](https://stackoverflow.com/questions/423157/how-to-diff-property-values-of-two-objects-using-gettype-getvalue)差异，但我意识到如果一个对象有太多属性，我可能不想全部区分它们。所以我想出了

```
public class IgnorePropertyDiffAttribute : System.Attribute
{
} 
```

这样我就可以标记我希望差异忽略的属性。但是我不想用 [IgnorePropertyDiff] 污染我的域对象。

```
public class Role
{
    [IgnorePropertyDiff]
    public String Description { set; get; }
    public Double Salary { set; get; }
    public Boolean HasBonus { set; get; }
} 
```

我的问题是，是否可以使用 IoC（如 Ninject 或其他 IoC）动态注入 [IgnorePropertyDiff]？如果我听起来像个白痴，请执行我，因为我只是一个初级中级 c# 开发人员。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T04:54:59.267

属性是编译时特性，所以不：您不能使用 IoC 添加它们（或针对它们设置值）。

# c# - 打印时如何确定字符串的宽度？

> ID：427022
> 
> 赞同：4
> 
> 时间：2009-01-09T03:56:18.323
> 
> 标签：c#, .net-3.5, graphics, string

我正在创建一个自定义控件，其中一部分是使用`Graphics`该类将文本绘制到表单中。目前我正在使用以下代码来显示它：

```
private float _lineHeight { get { return this.Font.Size + 5; } }
private void Control_Paint(object sender, PaintEventArgs e)
{
    Graphics g = this.CreateGraphics();
    Brush b = new SolidBrush(Colors[7]);

    g.DrawString("Hello World!", this.Font, b, 0, 2);
    g.DrawString("This has been a test of the emergency drawing system!",
        this.Font, b, 0, 2 + _lineHeight);
} 
```

我目前正在使用固定宽度字体，我想知道字体将显示多宽，但似乎没有此类信息的任何属性。有什么方法可以获取吗？我想要它，这样我可以在显示时正确换行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-09T04:00:06.443

是的，您可以使用[Graphics](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)类中的[MeasureString](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurestring.aspx)

> 此方法返回一个 SizeF 结构，该结构以 PageUnit 属性指定的单位表示由 text 参数指定的字符串的大小，如使用 font 参数绘制的那样。

```
private void MeasureStringMin(PaintEventArgs e)
{

    // Set up string.
    string measureString = "Measure String";
    Font stringFont = new Font("Arial", 16);

    // Measure string.
    SizeF stringSize = new SizeF();
    stringSize = e.Graphics.MeasureString(measureString, stringFont);

    // Draw rectangle representing size of string.
    e.Graphics.DrawRectangle(new Pen(Color.Red, 1), 0.0F, 0.0F, stringSize.Width, stringSize.Height);

    // Draw string to screen.
    e.Graphics.DrawString(measureString, stringFont, Brushes.Black, new PointF(0, 0));
} 
```

# asp.net - 您可以从代码隐藏中设置网格视图的 selecteddatakey 的值吗？

> ID：427027
> 
> 赞同：0
> 
> 时间：2009-01-09T04:00:13.433
> 
> 标签：asp.net, gridview

目前，我正在通过后面的代码突出显示我的 gridview 上的行。问题是当我通过 formview 插入新数据时，我将突出显示在新数据上，但是如果您单击编辑或删除，如果您尚未选择任何内容或最后一个数据，您是否会选择网格上的第一个数据已选择。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-09T04:06:40.487

根据 MSDN 文档，[GridView.SelectedDataKey](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selecteddatakey.aspx)它是一个只读属性。

您可能需要查看可设置的[GridView.SelectedPersistedKey](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedpersisteddatakey.aspx)的文档。

# c# - 如何设置客户端时区等于服务器时区窗口应用程序.Net C#

> ID：427033
> 
> 赞同：1
> 
> 时间：2009-01-09T04:04:28.307
> 
> 标签：c#, .net, windows, timezone

我的客户端应用程序通过 WebService 从远程服务器接收数据。该应用程序基本上是用 1.1 框架 Windows 窗体编写的。

我要做的就是将我的客户端应用程序时区设置为服务器时区，这样就可以避免任何与日期时间相关的差异。

为此，我想知道如何检索服务器时区以及如何将客户端时区设置为等于服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T21:23:09.050

我不知道您的问题到底是什么，我们在我们的应用程序中遇到了类似的问题。在不同时区从服务器向客户端发送日期时间时，当客户端收到日期时间时，它可以将其转换为本地时间。我在 .net 1.1 中找不到解决方案。但在 .Net 2.0 及以后的版本中，DateTime 有一个名为[Kind](http://msdn.microsoft.com/en-us/library/system.datetime.kind.aspx)的属性，如果您将其值设置为*Unspecified*，则客户端不会将其从服务器接收到的时间转换为本地时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T04:26:29.137

如果您在双方都使用 UTC，则无需担心偏移量不同。为了在您的应用程序中显示，您可以将 UTC 日期转换为本地时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-05T21:13:14.390

大卫，

我认为最初的问题是从服务器获取 TimeZone 信息。我有时看到您需要获取 TimeZOne 信息以将您的服务器和客户端保持在同一区域。

例如，如果您有与服务器同步的设备，如果您将设备带到与本地服务器同步的不同位置，您可能希望将设备时区信息设置为本地服务器时区。

在这种情况下，将客户端时区设置为服务器时区非常重要，否则您的客户端会显示不同/原始时区的时间。

我认为您可以考虑诸如“DHCP 选项”、“NTP 服务器”之类的选项，但我不知道此问题的确切解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-03T15:07:50.893

如果您使用 .NET Framework 3.5，您可以使用 TimeZoneInfo 类来检索时区信息...

```
// Get time in local time zone 
DateTime thisTime = DateTime.Now;
Console.WriteLine("Time in {0} zone: {1}", TimeZoneInfo.Local.IsDaylightSavingTime(thisTime) ?
                  TimeZoneInfo.Local.DaylightName : TimeZoneInfo.Local.StandardName, thisTime);
Console.WriteLine("   UTC Time: {0}", TimeZoneInfo.ConvertTimeToUtc(thisTime, TimeZoneInfo.Local));
// Get Tokyo Standard Time zone
TimeZoneInfo tst = TimeZoneInfo.FindSystemTimeZoneById("Tokyo Standard Time");
DateTime tstTime = TimeZoneInfo.ConvertTime(thisTime, TimeZoneInfo.Local, tst);      
Console.WriteLine("Time in {0} zone: {1}", TimeZoneInfo.Local.IsDaylightSavingTime(tstTime) ?
                  tst.DaylightName : tst.StandardName, tstTime);
Console.WriteLine("   UTC Time: {0}", TimeZoneInfo.ConvertTimeToUtc(tstTime, tst)); 
```

[时区信息类](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)

# php - PHP的脚手架

> ID：427034
> 
> 赞同：7
> 
> 时间：2009-01-09T04:04:52.237
> 
> 标签：php, ruby-on-rails, scaffolding

PHP中有什么东西可以创建基本的脚手架，就像在Rails中一样？

编辑：我需要一些东西来快速原型..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T04:10:12.023

[Symfony](http://www.symfony-project.org/book/1_0/14-Generators)、[CakePHP](http://book.cakephp.org/view/105/Scaffolding)、[Akelos](http://www.akelos.org/)、[CodeIgniter](http://codeigniter.com/user_guide/general/scaffolding.html)等一些框架支持脚手架。

但是，如果您不想使用框架，您可以尝试[phpScaffold](https://github.com/tute/phpscaffold)，它基于 phpMyAdmin 表导出生成 CRUD 脚手架页面...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-02-24T02:59:36.900

我还想要一些快速原型，但我希望它能够生成代码，所以很容易更新它。我对发布在[http://github.com/tute/phpscaffold上的](http://github.com/tute/phpscaffold)**phpScaffold**（HTML5、漂亮的 CSS、多个模型等）进行了许多改进。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T20:09:45.043

Phreeze 使这变得简单易行。 [http://phreeze.com/](http://phreeze.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T14:58:42.053

[QCodo](http://www.qcodo.com/)是另一个不错的选择。由于它在运行时使用反射而不是反射来进行代码生成，因此您可能会看到更好的性能。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-09T15:06:53.750

首先，Rails 是一个框架。PHP 是一种语言。PHP 没有内置的脚手架支持，正如 Ruby（构建 Rails 的语言）没有一样。然而，像[CakePHP](http://cakephp.org)这样的框架确实支持脚手架。

其次，我看到您对 CakePHP 提出了反对意见，因为“您仍然需要做很多事情”。这是真的——对于任何框架，你都必须学习新的约定、配置等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-05T09:53:01.553

CakePHP 有很多脚手架选项

如果你把 Crud + API 插件放在上面，你基本上得到了你需要的一切，还有很多不错的补充

[cakephp-crud](https://github.com/jippi/cakephp-crud)：下面两个项目的积极继任者。提供 Crud 操作、[API](http://cakephp.nu/cakephp-crud/docs/listeners/api.html)、[脚手架](http://cakephp.nu/cakephp-crud/docs/listeners/scaffold.html)、搜索[等](http://cakephp.nu/cakephp-crud/docs/)

Crud 插件：[https ://github.com/nodesagency/Platform-Crud-Plugin](https://github.com/nodesagency/Platform-Crud-Plugin)

API 插件： [https ://github.com/nodesagency/Platform-API-plugin](https://github.com/nodesagency/Platform-API-plugin)

它们都使用 CakePHP 事件，因此扩展和修改默认行为非常简单

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-09T04:09:28.017

如果您使用 CakePHP 作为 Web 框架，它支持脚手架。有关更多信息，请参阅此链接。[http://book.cakephp.org/2.0/en/controllers/scaffolding.html](http://book.cakephp.org/2.0/en/controllers/scaffolding.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-05T05:57:46.460

对于 myslef，我使用 [CodeIniter](http://codeigniter.com/user_guide/general/scaffolding.html)进行开发，确保他们有脚手架，但仅就“简单脚手架”而言，这意味着您不会在实时产品中使用它（我不知道每个人，但我只是将它用作一些工具) .

但是如果你需要一些类似 CRUD 的生成器，你可以使用[SparkPlug](http://code.google.com/p/sparkplug/)，或者[Ignition](http://ignition.lifewithryan.com/)两者都可以在Codeigniter 上使用

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-07-31T14:24:48.653

很久以前有人问过这个问题，但如果它仍然相关，请查看这个漂亮的[脚手架类](http://www.binpress.com/app/php-scaffold-class/59)（查看演示）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-11-23T11:16:36.210

Yiiframework 有一个很好的代码脚手架系统，叫做 Gii。它是基于网络的。创建表后，您可以从浏览器中生成 CRUD 类。不需要命令行。我喜欢这个脚手架。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-05-17T04:17:24.053

我不确定 SO 政策对于死线程的复兴是什么，但我想我会添加自己的两美分，以防上述解决方案都不令人满意。如果您正在寻找基于 PHP 的 MySQL 脚手架工具，请查看[AMPLE Scaffolder](http://www.amplescaffolder.com)。整个包包含在单个 PHP 文件（小于 200k）中，可以简单地将其拖放到 Web 可访问目录中，然后您可以根据内部数据库权限立即访问本地和远程 MySQL 数据库。没有模式导出、配置文件或其他麻烦。此外，还有很多其他功能可以提供。只是想我会分享它，以防你正在寻找另一种选择。如果您有任何问题，请随时查看并发布反馈。

# java - 在 C 中实现 Java 的 getResponseCode()？

> ID：427035
> 
> 赞同：0
> 
> 时间：2009-01-09T04:05:09.820
> 
> 标签：java, c, winsock, porting

如果有帮助，C#的WebRequest中也有一个类似的类。虽然我不想在 java 或 .NET 中使用它，但我想知道如何在本机 C/C++ 代码（对于 Windows）中实现它。

以供参考：

```
try {

URL url=new URL("http://google.ca");
HttpURLConnection con=(HttpURLConnection)url.openConnection();
con.connect();
int code = con.getResponseCode();
System.out.println(code);

} catch (MalformedURLException e) {
System.err.println("Error reading URL.");
} 
```

打印出来：

```
200 
```

意思是“好的”

我知道我可能需要使用套接字并发送一个用户代理字符串，但我不知道从哪里开始。每当我学习一门新语言时，我喜欢做的第一件事就是尝试将我的代码移植到它上面，但是这个让我很难过。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T06:38:36.903

标准 C 库中没有 HTTP 支持。

因此，您有两个选择 - 使用 3rd-party HTTP 库，例如 ar [libcurl](http://curl.haxx.se/libcurl/)，或者自己处理 HTTP：

*   打开插座
*   解析主机名
*   连接到服务器
*   构建 HTTP 请求
*   向服务器发送请求
*   接收 HTTP 响应
*   解析响应并从中获取响应代码。

# python - 从 Python 编写 LMMS 脚本

> ID：427037
> 
> 赞同：3
> 
> 时间：2009-01-09T04:06:23.357
> 
> 标签：python, audio-player

最近我[询问](https://stackoverflow.com/questions/267628/scripting-fruityloops-or-propellerheads-reason-from-vb-or-python)了从 Python 编写 FruityLoops 或 Reason 的脚本，但没有出现太多。

今天我找到了[LMMS](http://lmms.sourceforge.net/)，一个免费软件 FruityLoops 的克隆。所以，同样。有没有人尝试过从 Python（或类似的）编写脚本？是否有用于从外部访问其资源的 API 或包装器？

如果不是，那么尝试编写一个的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T07:33:10.133

看来您可以使用 C++ 为 LMMS[编写插件。](http://lmms.sourceforge.net/wiki/index.php?title=Plugin_development_tutorial)通过[在 C++ 插件中嵌入 Python，](http://www.python.org/doc/2.5.2/ext/embedding.html)您可以有效地用 Python 编写程序脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T12:04:55.943

查看[http://www.csounds.com/](http://www.csounds.com/)以了解在 Python 中编写音乐合成程序脚本的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T04:26:13.827

您可以将 LMMS 中的几乎所有内容连接到 MIDI 输入。试试看？

# html - 在 HTML/XHTML TextArea 中对齐文本

> ID：427039
> 
> 赞同：16
> 
> 时间：2009-01-09T04:07:11.780
> 
> 标签：html, css, textarea, text-alignment, justify

我目前正在尝试证明文本区域中的文本，不幸的是 CSS：

```
text-align: justify; 
```

不适用于像中心、左和右这样的文本。我已经在 Firefox 3 和 IE 7 中尝试过，但没有成功。

有没有办法解决？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2011-03-09T20:08:22.660

我处理了同样的问题，发现了非常愚蠢的解决方案。确保要显示的文本位于同一行的开始和结束标记元素内，而不是下一行

```
<textarea  name="description" readonly="readonly" rows="4" cols="66">Text aligned toward left</textarea> 
```

不喜欢

```
<textarea  name="description" readonly="readonly" rows="4" cols="66">
Text aligned toward left
</textarea> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-01-13T17:45:25.337

根据您的目标浏览器...此解决方案适用于 Chrome。然而，它在 Firefox 中不起作用......但无论如何我都会发布它。

除了设置 text-align: justify 之外，还必须设置 white-space: normal。

```
 textarea {
        text-align: justify;
        white-space: normal;
    } 
```

JSFIDDLE：http: [//jsfiddle.net/cb5JN/](http://jsfiddle.net/cb5JN/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T04:17:24.350

我相信通常的做法是使用`TEXTAREA`for 输入而不用担心理由；然后，一旦输入被处理（即`FORM`提交，或`TEXTAREA`捕获的事件），内容将显示在一个不可编辑的文本元素（例如，，，`P`）中，`SPAN`样式属性将被尊重。`TD``text-align: justify;`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-03T01:10:51.073

对我来说（在 Firefox 中），这段代码运行良好：

```
textarea{
    resize: none;
    text-align: justify;
    white-space: pre-line;
    -moz-text-align-last: left;
    text-align-last: left;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-02-28T19:21:47.343

在我的情况下，使用[带有 contenteditable="true"](https://developer.mozilla.org/en/HTML/Content_Editable)的通用div 有效。但不适用于大多数移动浏览器。

```
<div contenteditable="true">Some content</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T04:22:07.553

我认为这在 html textarea 元素中是不可能的。您也许可以使用某种所见即所得的编辑器（可编辑的 div）。IE。fckeditor

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-13T09:45:44.920

它在 Chrome 上运行良好，但在 IE 上不行。

文本对齐：对齐；空白：正常；

# parsing - 有什么原因我不能创建支持中缀、后缀和前缀函数等的语言？

> ID：427040
> 
> 赞同：5
> 
> 时间：2009-01-09T04:08:41.137
> 
> 标签：parsing, syntax, programming-languages, infix-notation, postfix-notation

我一直在考虑创建一种非常适合创建 DSL 的语言，方法是允许定义中缀、后缀、前缀甚至由多个单词组成的函数。例如，您可以如下定义中缀乘法运算符（其中 multiply(X,Y) 已定义）：

```
a * b => multiply(a,b) 
```

或后缀“平方”运算符：

```
a squared => a * a 
```

或者是 C 或 Java 风格的三元运算符，它涉及两个散布在变量中的关键字：

```
a ? b : c => if a==true then b else c 
```

显然，在这种语言中存在很多歧义，但如果它是静态类型的（使用类型推断），则可以消除大多数歧义，并且可以将剩余的歧义视为语法错误（通过添加括号来纠正合适的）。

是否有一些我看不到的原因会使这变得极其困难、不可能，或者只是一个糟糕的主意？

*编辑：*许多人向我指出了可能执行此操作或类似操作的语言，但我实际上对如何实现我自己的解析器的指针感兴趣，或者如果这样做我可能会遇到的问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-09T05:15:35.637

这并不难做到。您需要为每个运算符分配一个*固定性*（中缀、前缀或后缀）和一个*优先级*。将优先级设为实数；你以后会感谢我的。较高优先级的运算符比较低优先级的运算符绑定得更紧密；在同等优先级下，您可以要求用括号消除歧义，但您可能更愿意允许某些运算符具有*关联性*，以便您可以编写

```
x + y + z 
```

没有括号。一旦为每个运算符确定了固定性、优先级和关联性，您就需要编写一个**运算符优先级解析器**。这种解析器写起来相当简单；它从左到右扫描令牌并使用一个辅助堆栈。龙书里有解释，但我一直没觉得很清楚，部分原因是龙书描述了一个非常普遍的运算符优先级解析案例。但我不认为你会觉得这很困难。

您需要注意的另一种情况是，当您有

```
prefix (e) postfix 
```

where`prefix`和`postfix`具有相同的优先级。这种情况还需要括号来消除歧义。

我的论文[Unparsing Expressions with Prefix and Postfix Operators](http://www.cs.tufts.edu/~nr/pubs/unparse-abstract.html)在后面有一个示例解析器，你可以下载代码，但它是用 ML 编写的，所以它的工作原理对于业余爱好者来说可能并不明显。但是对固定性等整个业务进行了非常详细的解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T04:32:03.807

您将如何处理操作顺序？

```
a * b squared 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T04:45:58.363

您可能想查看 Scala，它对运算符和方法有一种独特的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T04:14:28.100

[Haskell](http://www.haskell.org)正是您想要的。

# java - 基于 Java SSL 套接字的客户端/服务器应用程序

> ID：427046
> 
> 赞同：4
> 
> 时间：2009-01-09T04:11:02.147
> 
> 标签：java, ssl, certificate, client-server

双向验证是否需要从双方导入证书？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T07:57:37.870

简短的回答是否定的，你不需要它。

而不是导入每一方的证书，应该在客户端和服务器中导入的是CA证书，因此当服务器或客户端证书更改时，您不需要再次导入它们，并且允许服务器不导入所有客户端证书.

在实施某种基于证书的身份验证时，几乎每个人都忘记的另一个身份验证措施是如何检查它们的有效性。您不仅应该检查证书是否过期且有效（由受信任的 CA 正确签名），还要检查证书是否被吊销（假设某人泄露了自己的私钥，他的证书应该'不再被信任）。

要检查已撤销的证书，最常用的方法是[OCSP](http://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol)，它在检查单个证书时开销较小，但需要永久在线连接到 OCSP 服务器（它可以是自己的 CA）或导入定期发布的[CRL](http://en.wikipedia.org/wiki/Certificate_revocation_list)。

# asp.net - 如何在 ASP.Net 应用程序中设置 Principal

> ID：427051
> 
> 赞同：0
> 
> 时间：2009-01-09T04:13:08.930
> 
> 标签：asp.net, authentication, membership

我正在为客户编写一个网络应用程序。用户将拥有一个一次性密钥，他们将使用该密钥最初向应用程序标识自己。一旦应用程序验证密钥有效，它会将他们带到一个页面，在那里他们可以创建一个普通帐户以用于所有后续登录。只有在输入密钥后才能访问创建帐户页面，否则不应访问。即，使用普通帐户登录的用户不应访问它。这是使用自定义会员提供程序的 asp.net 3.0。

我的计划是根据密钥创建一个临时帐户并使用该帐户对用户进行身份验证。这允许他们访问创建用户页面（受位置标签保护），他们可以在其中创建正式帐户。然后我用他们的新帐户对他们进行身份验证并删除临时帐户。流程是：用户进入他们输入密钥的页面。如果密钥有效，我会创建临时帐户，调用 FormsAuthentication.SetAuthCookie，然后重定向到创建帐户页面。这一切都有效，虽然它看起来有点复杂。

问题是任何经过身份验证的用户都可以使用创建用户页面。我只希望它在输入密钥和创建正式帐户之间的时间内可用。所以我想我会为临时帐户创建一个特殊角色，并让 create-user 页面只能由该角色访问，而不能由其他角色访问。我创建了自己的具有特殊角色的 Principal 对象，并尝试在对临时帐户进行身份验证时进行设置，但无法使其正常工作。

我真的希望我不必为此编写自定义角色提供程序。

我怎样才能使这项工作？一定有更简单的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-23T03:07:17.933

在针对临时令牌进行身份验证时分配“不完整”角色，然后将访问权限限制为仅该角色...创建帐户后，将它们发送到重新登录页面（终止身份验证令牌）。这将简化您的安全模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T04:18:33.973

当他们输入密钥时，为什么不简单地创建真实帐户。为其分配一个随机名称，然后让他们更改名称和其他详细信息。然后你不需要创建用户页面，只需要输入键页面和帐户详细信息编辑页面。如果您担心填写帐户详细信息，您可以设置它（可能通过 MasterPage 上的代码），以便在输入详细信息之前始终将不完整的帐户重定向到编辑详细信息页面。

或者，您可以让他们在输入密钥页面上输入所需的详细信息以及密钥代码，并在创建帐户时简单地使用这些详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T04:19:36.687

我的建议是在验证用户时避免使用临时帐户。相反，请生成您自己的逻辑来验证注册密钥。然后，在页面的头部，您可以检查用户是否是经过身份验证的用户（已调用 SetAuthCookie），如果是，则跳转到不同的页面。

您*甚至*可以更改页面访问权限以禁止经过身份验证的用户访问此页面（我知道您可以禁用未经身份验证的用户的帐户，但我不确定您是否可以转向另一个方向）。

但是，关键是要避免依赖会员提供者，而事实上，用户还不是会员！

# .net - 如何以编程方式格式化 HTML 字符串

> ID：427070
> 
> 赞同：2
> 
> 时间：2009-01-09T04:27:00.883
> 
> 标签：.net, .net-2.0

我在字符串中有未格式化的 html。

我正在尝试很好地格式化它并将格式化的 html 输出回字符串。我一直在尝试使用 System.Web.UI.HtmlTextWriter 无济于事：

```
System.IO.StringWriter wString = new System.IO.StringWriter();
System.Web.UI.HtmlTextWriter wHtml = new System.Web.UI.HtmlTextWriter(wString);

wHtml.Write(sMyUnformattedHtml);

string sMyFormattedHtml = wString.ToString(); 
```

我得到的只是未格式化的 html，是否有可能实现我在这里尝试做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T10:33:35.167

这是一个完全可以做到这一点的函数：

```
 // Attractively format the XML with consistant indentation.

    public static String PrettyPrint(String XML)
    {
        String Result = "";

        using (MemoryStream MS = new MemoryStream())
        {
            using (XmlTextWriter W = new XmlTextWriter(MS, Encoding.Unicode))
            {
                XmlDocument D = new XmlDocument();

                try
                {
                    // Load the XmlDocument with the XML.
                    D.LoadXml(XML);

                    W.Formatting = Formatting.Indented;

                    // Write the XML into a formatting XmlTextWriter
                    D.WriteContentTo(W);
                    W.Flush();
                    MS.Flush();

                    // Have to rewind the MemoryStream in order to read
                    // its contents.
                    MS.Position = 0;

                    // Read MemoryStream contents into a StreamReader.
                    StreamReader SR = new StreamReader(MS);

                    // Extract the text from the StreamReader.
                    String FormattedXML = SR.ReadToEnd();

                    Result = FormattedXML;
                }
                catch (XmlException ex)
                {
                    Result= ex.ToString();
                }

                W.Close();
            }
            MS.Close();
        }
        Debug.WriteLine(Result);
        return Result;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T04:47:21.950

如果您愿意使用 XHTML 而不是 HTML，则可以将其传递给[tidy](http://tidy.sourceforge.net/)外部或使用[XmlTextWriter 。](http://msdn.microsoft.com/en-us/library/system.xml.xmltextwriter.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T04:45:36.913

框架中没有任何东西可以做你想做的事。

如果 HTML 片段是有效的 XML，您可以将其加载到 XmlDocument 中并编写一些代码来遍历它并按照您想要的格式输出它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T05:15:04.593

使用[EFTidyNet](http://www.codeproject.com/KB/mcpp/eftidynet.aspx)，这是 Tidy 的托管 .NET 包装器。它比使用批处理文件调用 Tidy 简单得多，也快得多。

Tidy 可以清理您的 HTML 并使其看起来不错，以及将其转换为有效的 HTML 或 XHTML。

# winapi - 为什么我可以在打开 UAC 的情况下写入 Program Files 的特定目录？

> ID：427071
> 
> 赞同：1
> 
> 时间：2009-01-09T04:29:55.230
> 
> 标签：winapi, windows-vista, uac

这对我来说很奇怪。让我列出设置：

*   带有清单的应用程序（即：不会被推送到虚拟商店）
*   UAC开启（不能写入其他程序文件目录，或者其他区域，出现uac提示）
*   可以从我的应用程序（不以管理员身份运行）以及非管理员命令提示符中写入“c:\program files\%app_name%\%directory%\”
*   无法写入“c:\program files\%app_name%\%directory%\%subdirectory%\”。

有任何想法吗？某处是否有隐藏的权限或注册表设置？难道这个目录是在 UAC 关闭时创建的，所以现在它是公平的游戏？难道这个目录是在 XP 时代创建的，而且它的公平游戏？

为什么我不能写入其他程序文件目录和子目录对我来说很有意义。但是我不知道为什么我实际上被允许写入 %directory%？

旁注：如果我将 %directory% 移动到另一个区域（appdata），我仍然无法写入子目录（困惑）。

让我知道您可能有的任何想法或我可以检查的任何内容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T04:38:14.260

编辑：Arr，对不起，我浏览你的帖子有点太快了，看起来这不是问题！

你有没有看过书面文件的实际去向？

Vista 有一项功能，其中应用程序写入 Program Files 文件夹的文件被重定向到本地每个用户存储。此商店位于 %userprofile%\AppData\Local\VirtualStore

这是为了允许将每个用户设置写入 Program Files 的旧应用程序仍然正确运行，还允许多个用户使用该程序而不会发生冲突。

资源管理器中有一个名为“兼容性文件”的按钮，可将您带到此用户存储区。也许您的写入内容已结束？

我不确定为什么你不能写入子目录。安全权限？

# asp.net-mvc - System.StackOverflowException 未处理（MVC 模型绑定）

> ID：427075
> 
> 赞同：1
> 
> 时间：2009-01-09T04:33:23.630
> 
> 标签：asp.net-mvc, model-binding

使用 Model Binder 发回表单时，我开始收到此错误。为了测试这个问题，我将回发减少到模型的一个字符串属性，但我仍然得到溢出错误。谁能建议会导致这种情况的原因？

更新问题似乎与模型中作为外键的属性有关。如果删除此键，则绑定有效。如何进行绑定并包含外键关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T05:57:43.430

您可以通过几种方式解决此问题。一种方法是尝试这样的事情。

```
public ActionResult AddProduct([Bind(Exclude = "Category")]Product product) { } 
```

这告诉模型绑定器不要尝试绑定类别（FK 属性）。这是一个已知问题，MVC 团队已经为 RC 修复了它。

您还可以将排除列表传递到 UpdateModel/TryUpdateModel 以及添加 Bind 属性的任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T04:37:21.767

堆栈溢出通常是由于无限递归。查看堆栈跟踪，看看您是否一遍又一遍地看到相同的函数（或函数组）。这表明递归函数永远不会达到其基本情况。

# silverlight - silverlight dataGrid 中的每一行是否必须具有相同的“RowDetailsTemplate”？

> ID：427080
> 
> 赞同：2
> 
> 时间：2009-01-09T04:38:04.277
> 
> 标签：silverlight

我正在通过以下方式定义数据网格的 RowDetailsTemplate：

RowDetailsTemplate="{StaticResource defaultTemplate}"

在哪里

```
<UserControl.Resources>
    <DataTemplate x:Key="defaultTemplate">
        <StackPanel>
            <TextBlock Text="default" x:Name="_txt" />
        </StackPanel>
    </DataTemplate>
    <DataTemplate x:Key="otherTemplate">
        <StackPanel>
            <TextBlock Text="other" x:Name="_txt" />
        </StackPanel>
    </DataTemplate>
</UserControl.Resources> 
```

有没有办法以编程方式定义给定行将使用上述两个 DataTemplate 中的哪一个（可能在 LoadingRowDetails() 事件中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-15T14:33:32.350

您可以在 LoadingRowDetails 事件中添加以下代码，显然将我无用的 If 条件替换为您自己的：

```
 If 1 = 1 Then
        e.Row.DetailsTemplate = CType(Resources("defaultTemplate"), DataTemplate)
    Else
        e.Row.DetailsTemplate = CType(Resources("otherTemplate"), DataTemplate)
    End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-26T03:51:25.723

首先：非常感谢汤姆。它节省了我的一天（周/月）:-)

在 C# 中：

```
 if (1 == 1)
{
   e.Row.DetailsTemplate = (DataTemplate) Resources["defaultTemplate"];
}
else
{
   e.Row.DetailsTemplate = (DataTemplate) Resources["otherTemplate"];
} 
```

要为该解决方案添加更多功能，以下 msdn 链接显示了如何在运行时创建控件。

# design-patterns - 函数式语言和像 MVC 这样的编程模型是否只是下一个流行趋势？

> ID：427083
> 
> 赞同：4
> 
> 时间：2009-01-09T04:40:43.727
> 
> 标签：design-patterns, programming-languages, future-proof

最近，我听到了很多关于函数式编程语言（例如 F#）的好消息。此外[和不相关]，我还注意到 MVC 开始获得大量曝光——也许是自从 Silverlight/WPF 引入以来。

我从来没有在没有先做研究的情况下加入潮流——事实上，我花了一点时间才飞跃到 .NET。有人刚刚在我之前的一个关于早期采用新技术的问题中发表了评论，这让我停下来思考。

我一直在努力寻找时间来学习 WPF，但现在我开始怀疑这是否是要走的路。诸如 F# 之类的语言和 MVC 编程模型会继续存在还是只是下一个时尚？还是人们真的认为这些是 C#/VB 和 OOP 的潜在替代品？

我的大部分开发都是在内部应用程序上进行的，要么以丰富的 Web 应用程序的形式部署在 Intranet 上，要么以 Winforms 实用程序应用程序的形式分发到各个机器上。到目前为止，我选择的技术非常标准——T-SQL/PL*SQL、C#/VB、JavaScript/AJAX、CSS。

我想我正在努力确定的是，在不久的将来，在我的工具箱中使用这些技术的哪种组合最有效率/最有用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-09T05:11:07.753

两者都不是时尚，也不会很快消失，但实际上我只希望看到大多数 .NET 开发人员经常使用这两者中的一个......

F# 和 ASP.NET MVC 之间有很大的不同；F# 是一种函数式语言 - 这在一些场景中具有许多优势，但对于大多数**业务线**编程而言，通用语言（如 C#）通常更有用。然而，从了解编程的函数*式风格*（尤其是不可变性）中可以获得很多东西。我查看了 F#，希望它能改进我的 C#，即使我从未用 F# 编写过任何生产代码。幸运的是，由于委托和 lambda，C# 可以以函数方式使用，即使它不是正式的 FP。

然而，ASP.NET MVC 是一个非常不同的野兽。MVC（更一般地说）是一种已知、已建立且受信任的模式，它：

*   极大地提高了表示层的可测试性
*   在 UI 层对关注点进行逻辑分离
*   提供对页面底层 html 的更直接访问
*   还有很多其他的东西（模型绑定等）

或者换一种说法：对很多人来说，它让 ASP.NET 终于变得有意义了；我完全期望在来年**大量使用 ASP.NET MVC。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-09T05:24:24.607

我觉得把函数式编程和 MVC 混在一个问题上很奇怪。我发现他们没有任何关系，除了他们都超过 30 岁并且在他们的社区中非常成熟。因为我对函数式编程有所了解，所以我会谈谈。

函数式编程已经有将近 50 年的历史了，而且还会继续存在，尽管它是否会成为主流尚不清楚。显而易见的是，函数式语言已经充当了孵化器，然后为最终进入主流语言的特性提供了试验场。一些例子：

*   垃圾收集
*   一流的函数闭包（1995 年添加到 Perl，此后在所有脚本语言中出现；出现在 Smalltalk-80 中；在 Java 和 C# 中以各种方式模拟）
*   参数多态性（C++ 中的模板）

从长远来看，在您的工具箱中拥有功能技术将使您成为更好的程序员。或者正如 Eric Raymond 所说，学习 Lisp。（Lisp 和 Haskell 都充满了强大的新想法，它们会让你的头脑以不同的、无与伦比的但有用的方式爆炸。F# 更多的是结合了函数式语言中经过验证的最佳想法，并与 .NET 框架相结合。在2009 年初，它似乎最有可能成为主流。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-09T05:39:02.593

这些天我在 SO 上看到了很多这样的事情。（见[这里](https://stackoverflow.com/questions/216160/are-we-in-a-functional-programming-fad)、[这里](https://stackoverflow.com/questions/179332/anyone-actually-using-f-in-production)和[这里](https://stackoverflow.com/questions/344888/are-uncommon-net-languages-just-toys)的几个例子。）

[根据 Wikipedia](http://en.wikipedia.org/wiki/Lisp_programming_language)的说法，Lisp 是当今仍在使用的第二古老的编程语言（被 Fortran 击败）。函数式编程并不比晶体管、鼠标、计算机显示器、硬盘驱动器，或者实际上是个人计算机的概念更流行，在 Lisp 于 1958 年成立时，这些都没有出现。编程在典型的商业环境中可能不是特别有用，但它的流行程度的起伏不会使它成为一种时尚，也不会使它成为一种玩具。对计算科学有敏锐理解的程序员明白，函数式编程与其说是一项发明，不如说是一种发现——对计算基本性质的深刻洞察。

更重要的是，如果编程是您的日常工作（而不是真正的激情），那么 F# 是在浪费您的时间吗？它可能是，从某种意义上说，它不太可能变得流行到足以保证包括在你的简历中。还值得注意的是，如果您确实花时间学习 F#，但您的同事都无法理解您的工作，那么选择它作为开发工具可能弊大于利。这仍然不会使它成为“时尚”。:)

至于 MVC，它已经存在了很长时间——可能已经有十多年了，但我一直没有跟踪。它不是灵丹妙药，也不难把握；这只是另一种发展模式。值得关注的是，MVC 不是标准，甚至不是非常明确的技术。有许多不同的方式来解释 MVC，我什至敢说，有不止一种正确的方式来做。

MVC 恰好对 Web 开发特别有用，因为 Web 应用程序往往具有非常混乱的前端代码（支持所有这些不同的浏览器是一件非常痛苦的事情），而您最不想要的就是让您的业务逻辑陷入前端- 不必要地结束。与 F# 不同，即使编程严格来说只是您的日常工作，学习 MVC 也不是浪费时间，因为如果您发现自己正在开发 Web 应用程序，那么遵守 MVC（即使只是松散地遵守）可以节省您的时间来自职业的尴尬。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-09T05:17:59.750

至于 MVC，它是在 1979 年推出的。我记得在 1988/89 年的时间框架内，我在 Aldus Persuasion for Windows（Powerpoint 的一次竞争对手）的职业生涯中第一次实现了它。MVC 框架在 RIA 应用程序中风靡一时，例如基于 Adob​​e Flex 的 Web 编程（Cairngorm、Mate、PureMVC 等）。

在我的公司，我们的第一个 Flex 应用程序不是作为 MVC 完成的，但是我们对模型有多个视图。一定是一团糟。我们重构为 MVC，开发人员的生活变得更好了。

据我所知，只有那些试图通过各种 Web 框架在服务器端实现 MVC 的人，才是抱怨 MVC 的人。[分布式计算](http://en.wikipedia.org/wiki/Fallacies_of_Distributed_Computing)的谬误会告诉他们，在表示渲染层被网络连接的鸿沟隔开的情况下执行 MVC 是一个坏主意。分布式 MVC 和分布式对象一样糟糕。

使用 RIA Web 应用程序，例如基于 Flex 的应用程序，MVC 完全在客户端完成 - 就像它在 79 年在 Smalltalk 图形工作站中引入的一样。然后，RIA 客户端仅使用异步服务调用和/或消息传递与服务器端进行通信。

对于一个除了抛出一个单一的 CRUD 表单什么都不做的应用程序，那么是的，MVC 可能是矫枉过正。但是对于具有相当复杂性的富 GUI 应用程序，MVC 仍然是一种非常明智的采用模式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-09T07:48:04.893

函数式语言在开发代码中的实际使用完全取决于您编码的领域。如其他答案所述，对于经典的“业务线”应用程序，如果您已经了解 C#，那么您不太可能很快切换到 F#。

然而：

*   不在开发代码中使用它并不意味着它不能在其他地方有用（例如分析数据，或原型算法而不会陷入 OO 噪音）
*   学习一门函数式语言将教会你另一种思考编码的方式，这可能对你的 C# 有益
*   学习一门函数式语言还可以让您更深入地了解 C# 的函数方面
*   为了完成我的列表——尽管这在 SO 的其他地方已经被重复和重复——没有人建议 F# 将取代 C#，它只是盒子里的另一个工具。如果您现在不需要它，“购买”该工具可能太贵了，但至少，您应该尝试了解它的作用，以防您当前的工具集不够用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T05:03:07.707

不，它们不是时尚。不，人们并不认为这些会成为 C#/VB 和 OOP 的潜在替代品。如果可以节省时间或金钱，人们就会使用它们。

我认为你必须顺势而为，看看其他聪明人对什么感到兴奋，或者闭上眼睛，希望风暴在几年内过去。有些技术会坚持下去，而另一些则不会。[MVC](http://en.wikipedia.org/wiki/Model-view-controller)与 OO 一样古老，而[函数式编程与编程](http://en.wikipedia.org/wiki/Lisp_programming_language)一样古老。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-09T05:38:03.127

一点也不。

函数式编程语言已经存在了几十年。

作为“MVC”的编程模型实际上是一种设计模式，并且现在有很多框架使用它。

可能这里唯一的新事物是您的观点。在它们来到 MS 世界之前，您不知道它们的存在或它们被广泛使用。

我的第一份工作是在 2000 年使用Apple comp 的[WebObjects Framework](http://en.wikipedia.org/wiki/WebObjects)。使用它进行开发非常容易。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-13T16:32:00.717

函数式编程作为一种范式具有许多优点：它提供了许多与面向对象设计在小型团队中工作时相同的优点（数据封装、多态性、代码可移植性......）数据的不变性和无状态的性质。穿线更容易。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-11-12T15:20:31.117

我不会谈论 MVC 在 Web 应用程序中的可行性……对于我们这些开发框架的人来说，这些框架已经勾勒出清晰的模式——这只是给同一只猫换皮的另一种方式。我从来没有为 ASP.NET 的整体情况苦恼过，因此认为 MVC 以某种方式使其更简单通常是用词不当。它可能对一种方法有用，但并非对所有方法都有用 - 因此落入工具箱中的另一个工具。

我们需要的真的是另一种工具吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-09T05:03:17.457

我确信 C# 和 VB 将永远存在……但也会有很多人走在新技术的边缘。他们将能够用更少的代码做更多的事情，而你将能够用你已经拥有的代码做更多的事情。所以不要担心这将是一场公平的战斗。

即使......学习更多的东西会让你更好地编程，所以......这取决于你！

我要说的是，关于学习更多语言如何很好地了解每种语言的能力，然后使用所有这些信息来编写更好的代码，有很多模糊不清的地方。但如果你花同样的时间支配一门语言，你会没事的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-09T05:48:59.203

从我对函数式语言的（非常）基本知识来看——它们可能在我们未来的开发人员中占有很高的地位。许多聪明人评论说，由于处理器没有变得越来越快，因此需要使用更多的内核。因此并行编程将变得更加主流。函数式语言适用于并行任务，因为它们不维护状态（有效地消除了与并行编程/线程相关的大多数常见问题，例如锁等）。

有关此特定点的更多信息，我想引导您阅读[这篇](http://codebetter.com/blogs/matthew.podwysocki/archive/2008/09/12/side-effects-and-functional-programming.aspx)讨论可变/不可变数据并比较 c# 和 f# 代码片段的文章。

# vb.net - 如何抑制提示窗口以继续进一步

> ID：427087
> 
> 赞同：0
> 
> 时间：2009-01-09T04:43:37.650
> 
> 标签：vb.net, ms-access

根据我的应用程序要求，我需要在 Access DB 中打开每个表单以使用 vb.net 计算 Activex 控件。我的问题是，数据库中的一个表单提示用户输入，因此我的应用程序停止，直到用户干预。

有什么方法可以忽略这些表格并在没有用户干预的情况下继续扫描数据库？

请帮帮我....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T04:53:58.393

你不能在设计模式下打开你的表单：

```
docmd.openForm "myFormName", acDesign 
```

然后，您将能够自由浏览表单中的对象并识别您的 activeX 控件。

# python - 有谁知道 FMPP 的 Python 等价物？

> ID：427095
> 
> 赞同：5
> 
> 时间：2009-01-09T04:46:37.380
> 
> 标签：python, preprocessor, template-engine, freemarker, fmpp

有谁知道文本文件预处理器[FMPP的 Python 等效项？](http://fmpp.sourceforge.net/)

跟进：我正在阅读文档并查看给出的建议的示例。只是为了扩大。我对 FMPP 的使用是读取数据文件 (csv) 并根据该数据使用多个模板来创建链接到主索引的 html 中的多页报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T11:59:40.573

让我添加[Mako](http://makotemplates.org) Fine 快速工具（它甚至使用 ${var} 语法）。

注意：Mako、Jinja 和 Cheetah 是*文本*语言（它们处理和生成文本）。我会订购它们 Mako > Jinja > Cheetah（就功能和可读性而言），但人们的偏好各不相同。

Kid 和它的继任者[Genshi](http://genshi.edgewall.org/)是 HTML/XML 感知属性语言（`<div py:if="variable"> ... </div>`等）。那是完全不同的方法——以及仅适用于 HTML 或 XML 的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T07:15:03.617

Python 有很多模板引擎。这取决于您的确切需求。

[例如， Jinja2](http://jinja.pocoo.org/2/)就是一个很好的。[孩子](http://www.kid-templating.org/)是另一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T05:04:40.167

你可以试试[猎豹。](http://www.cheetahtemplate.org/)我以前使用过它并取得了一些成功。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T12:19:06.803

我不确定 FMPP 到底是做什么的，但乍一看它似乎是一种模板语言。

[Jinja2](http://jinja.pocoo.org/2/)是一个优秀的 python 模板系统。

样本：

```
<ul>
    {% for item in list %}
    <li> {{ item.title }} </li>
    {% endfor %}
</ul>

{% if user.is_admin() %}
    <a href="./edit">Edit this page</a>
{% endif %} 
```

# asp.net - 将 ASP.Net 菜单控件绑定到集合

> ID：427097
> 
> 赞同：0
> 
> 时间：2009-01-09T04:47:23.260
> 
> 标签：asp.net, menu, ienumerable, collections

我正在尝试使用此代码将我的 asp.net 菜单控件绑定到一个集合.. 但它给了我一个错误，我的集合现在是 IHierarchyEnumerable.. 我也明白为什么..

```
 StringCollection sc = pos.getAllmembers();
    Menu1.DataSource = pos.getAllmembers().GetEnumerator(); 
```

有没有解决的办法..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T05:48:48.597

菜单控件需要实现[IHierarchicalEnumerable的集合中的](http://msdn.microsoft.com/en-us/library/system.web.ui.ihierarchicalenumerable.aspx)[IHierarcyData](http://msdn.microsoft.com/en-us/library/system.web.ui.ihierarchydata.aspx)对象的集合。

从 IHierarcyData 类开始，该类将存储 StringCollection 中的每个字符串...

```
public class MyMenuItem : IHierarchyData
{
    public MyMenuItem(string s)
    {
        Item = s;
    }

    public override string ToString()
    {
        return Item.ToString();
    }

    #region IHierarchyData Members

    public IHierarchicalEnumerable GetChildren()
    {
        return null;
    }

    public IHierarchyData GetParent()
    {
        return null;
    }

    public bool HasChildren
    {
        get { return false; }
    }

    public object Item
    {
        get; set;
    }

    public string Path
    {
        get { return string.Empty; }
    }

    public string Type
    {
        get { return string.Empty; }
    }

    #endregion
} 
```

建立一个将成为集合的类......

```
public class MyMenu : StringCollection, IHierarchicalEnumerable
{
    List<IHierarchyData> _list = new List<IHierarchyData>();

    public void Add(StringCollection strings)
    {
        foreach (string s in strings)
        {
            MyMenuItem i = new MyMenuItem(s);
            _list.Add(i);
        }
    }

    #region IHierarchicalEnumerable Members

    public IHierarchyData GetHierarchyData(object enumeratedItem)
    {
        return enumeratedItem as IHierarchyData;
    }

    #endregion

    #region IEnumerable Members

    public System.Collections.IEnumerator GetEnumerator()
    {
        return _list.GetEnumerator();
    }

    #endregion
} 
```

在页面中，您现在可以构建菜单...

```
 MyMenu pos = new MyMenu();

 StringCollection sc = new StringCollection();
 sc.Add("First");
 sc.Add("Second");
 pos.Add(sc);

 Menu1.DataSource = pos;
 Menu1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T05:25:20.953

您可以尝试编写像这篇 msdn 文章中的包装器：

[http://msdn.microsoft.com/en-us/library/system.web.ui.ihierarchicalenumerable.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.ihierarchicalenumerable.aspx)

```
public class StringHeirarchy : StringCollection,IHierarchyEnumerable
{
   public IHierarchyData GetHierarchyData(object enumeratedItem) 
   {
        return enumeratedItem as IHierarchyData; 
   } 
} 
```

# python - Django 中的“蛞蝓”是什么？

> ID：427102
> 
> 赞同：709
> 
> 时间：2009-01-09T04:52:26.510
> 
> 标签：python, django, url, django-models, slug

当我阅读 Django 代码时，我经常在模型中看到所谓的“slug”。我不太确定这是什么，但我知道它与 URL 有关。这个蛞蝓应该如何以及何时使用？

（我已经在[这个词汇表](http://docs.djangoproject.com/en/dev/glossary/)中阅读了它的定义。）

* * *

## 回答 #1

> 赞同：897
> 
> 时间：2009-01-09T05:31:47.680

“slug”是一种生成有效 URL 的方法，通常使用已经获得的数据。例如，slug 使用文章的标题来生成 URL。我建议通过给定标题（或另一条数据）的函数来生成 slug，而不是手动设置它。

一个例子：

```
<title> The 46 Year Old Virgin </title>
<content> A silly comedy movie </content>
<slug> the-46-year-old-virgin </slug> 
```

现在让我们假设我们有一个 Django 模型，例如：

```
class Article(models.Model):
    title = models.CharField(max_length=100)
    content = models.TextField(max_length=1000)
    slug = models.SlugField(max_length=40) 
```

您将如何使用 URL 和有意义的名称引用此对象？例如，您可以使用 Article.id，因此 URL 如下所示：

```
www.example.com/article/23 
```

或者，您可能希望像这样引用标题：

```
www.example.com/article/The 46 Year Old Virgin 
```

由于空格在 URL 中无效，因此必须将它们替换为`%20`，这会导致：

```
www.example.com/article/The%2046%20Year%20Old%20Virgin 
```

这两种尝试都没有产生非常有意义、易于阅读的 URL。这个更好：

```
www.example.com/article/the-46-year-old-virgin 
```

在此示例中，`the-46-year-old-virgin`是一个 slug：它是通过将所有字母向下大小写并用连字符替换空格从标题创建的`-`。

另请参阅此网页的 URL 以获取另一个示例。

* * *

## 回答 #2

> 赞同：166
> 
> 时间：2009-08-15T15:45:33.557

如果我可以提供一些历史背景：

**“蛞蝓”**一词与铸造金属（在这种情况下为铅）有关，印刷字体就是用这种金属制成的。然后，每张纸的字体工厂都会定期重新熔化并在新模具中重铸，因为经过多次印刷后它们会磨损。像我这样的学徒在那里开始了他们的职业生涯，并一路走上顶峰（不再）。

排版必须以向后的方式撰写文章的文本，并以明智的方式堆叠引导字符。所以在印刷时，这些字母会直接在纸上。所有的印刷版都可以像印刷版一样快速阅读镜像的报纸。因此，蛞蝓，（如蜗牛）和缓慢的故事（最后被修复）很多都在板凳上等待，仅通过他们的第一个字母来识别，主要是整个标题通常更易读。一些“热门”新闻在板凳上等着，可能在最后一分钟更正，（晚报）在最后一次组装和最终印刷之前。

姜戈从堪萨斯州劳伦斯杂志的办公室里出来。可能一些印刷术语仍然存在。**来自法国的 django 爱好者和友好的老鼻涕虫男孩。**

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2009-01-09T06:01:06.373

“蛞蝓”一词来自报纸制作的世界。

这是在制作过程中给故事的非正式名称。随着故事从节拍记者（假设这些甚至不再*存在*？）到编辑再到“印刷机”，这是它所引用的名称，例如，“你修复了那些错误吗？凯特和威廉的故事？”。

某些系统（例如 Django）使用 slug 作为 URL 的一部分来定位故事，例如`www.mysite.com/archives/kate-and-william`.

甚至 Stack Overflow 本身也使用 GEB-ish ^((a)) self-referential来执行此操作`https://stackoverflow.com/questions/427102/what-is-a-slug-in-django/427201#427201`，尽管您可以将 slug 替换为`blahblah`它仍然会发现它没问题。

它甚至可以追溯到更早的时候，因为剧本在每个场景的开头都有“slug line”，这基本上设置了那个场景的背景（地点、时间等）。它非常相似，因为它是以下内容的概要或序言。

在 Linotype 机器上，slug 是由单个字母形式创建的单线金属片。通过为整行制作单个 slug，这大大改进了旧的逐字符合成。

尽管以下内容纯属猜想，但 slug 的早期含义是指伪造的硬币（必须以某种方式压制）。我可以设想将这种用法转变为印刷术语（因为必须使用原始字符来压制 slug），然后从那里从“金属片”的定义变为“故事摘要”的定义。从那里，从正确的印刷到在线世界只有很短的一步。

* * *

^((a)道格拉斯·霍夫施塔特 () [Douglas Hofstadter](https://en.wikipedia.org/wiki/Douglas_Hofstadter) ) 的《哥德尔·埃舍尔》(Godel Escher, Bach)，我（至少）认为这是伟大的现代知识分子作品之一。您还应该查看他的另一部作品“Metamagical Themas”。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2014-09-12T12:32:10.610

> 蛞蝓是一个报纸术语。slug 是某事物的短标签，仅包含字母、数字、下划线或连字符。它们通常用于 URL。（如在 Django 文档中）

Django 中的 slug 字段用于为您动态创建的网页存储和生成有效的[URL 。](http://en.wikipedia.org/wiki/Uniform_resource_locator)

就像您在 Stack Overflow 上添加此问题并生成动态页面一样，当您在地址栏中看到时，您会看到您的问题标题用“-”代替空格。这正是蛞蝓领域的工作。

![在此处输入图像描述](https://i.stack.imgur.com/hUr5J.jpg)

> 你输入的标题是这样的 -> Django 中的“slug”是什么？
> 
> 将其存储到 slug 字段中时，它变为“what-is-a-slug-in-django”（请参阅​​此页面的 URL）

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2016-10-31T18:14:44.980

Slug 是特定内容的 URL 友好短标签。它只包含字母、数字、下划线或连字符。Slugs 通常与相应的内容一起保存，并作为 URL 字符串传递。

Slug 可以使用 SlugField 创建

前任：

```
class Article(models.Model):
    title = models.CharField(max_length=100)
    slug = models.SlugField(max_length=100) 
```

如果你想使用标题作为 slug，django 有一个简单的函数叫做`slugify`

```
from django.template.defaultfilters import slugify

class Article(models.Model):
    title = models.CharField(max_length=100)

    def slug(self):
        return slugify(self.title) 
```

如果需要唯一性，请添加`unique=True`slug 字段。

例如，从前面的示例中：

```
class Article(models.Model):
    title = models.CharField(max_length=100)
    slug = models.SlugField(max_length=100, unique=True) 
```

你懒得做 slug 过程吗？别担心，这个插件会帮助你。 [django-autoslug](https://github.com/neithere/django-autoslug)

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2009-01-09T04:56:10.963

从[这里](http://jeffcroft.com/blog/2006/may/02/django-non-programmers/)。

> “Slug”是一个报纸术语，但这里的意思是 URL 的最后一点。例如，标题为“A bit about Django”的帖子会自动变为“bit-about-django”（当然，如果您不喜欢自动生成的 slug，您可以轻松更改它）。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2009-01-09T05:02:48.423

它是 URL 的描述性部分，用于使其更具人性化描述性，但 Web 服务器不一定需要它 -[在 Django 中的“slug”是什么？](https://stackoverflow.com/questions/427102/in-django-what-is-a-slug)slug 是“in-django-what-is-a-slug”，但 slug 不用于确定提供的[页面](https://stackoverflow.com/questions/427102/different-slug-same-content)（至少在本网站上）

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2013-01-21T12:42:44.743

也可以在 django-admin 上进行自动 slug。在 ModelAdmin 中添加：

```
prepopulated_fields = {'slug': ('title', )} 
```

就像这里：

```
class ArticleAdmin(admin.ModelAdmin):
    list_display = ('title', 'slug')
    search_fields = ('content', )

    prepopulated_fields = {'slug': ('title', )} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-08-14T07:44:49.930

**蛞蝓**

某事物的短标签，仅包含字母、数字、下划线或连字符。它们通常用于 URL。例如，在典型的博客条目 URL 中：

[https://www.djangoproject.com/weblog/2008/apr/12/spring/](https://www.djangoproject.com/weblog/2008/apr/12/spring/) 最后一点（弹簧）是蛞蝓。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-06-13T21:18:33.147

slug 是 URL 的一部分，它以易于阅读的形式标识网站上的特定页面。

例如，`/building-your-1st-django-site`。

仅蛞蝓包含：

*   字母 : az,AZ
*   数字：0-9
*   下划线：_
*   连字符：-

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-09T10:01:09.197

简而言之，slug 帮助摆脱那些带有有效网址的丑陋网址，例如 ecommerec 网站中的示例，而不是像`www.myecom.com/product/5432156`我可以`www.myecom.com/product/iphone11`在 slug 的帮助下显示的那样显示网址

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-04T09:06:49.867

它是一种生成有效 URL 的方法，通常使用已经获得的数据。例如，使用文章的标题生成 URL。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-06T13:20:38.593

Slug 在 Django 中用于动态生成人类友好/可读的 URL。例如，此页面的当前 URL 显示： [Django 中的“slug”是什么？](https://stackoverflow.com/questions/427102/what-is-a-slug-in-django).

请注意 URL 是如何与实际问题结合在一起的（Django 中的 slug 是什么）

# algorithm - 模拟流体流动的算法

> ID：427151
> 
> 赞同：15
> 
> 时间：2009-01-09T05:20:11.853
> 
> 标签：algorithm, simulation, cellular-automata

我有一个游戏创意，需要对围绕各种物体流动的流体进行一些半真实的模拟。想象一个不规则表面上的水银池，向各个方向倾斜。

这是一款游戏，因此不需要 100% 的物理真实感。最重要的是，计算可以在具有 iPhone 马力的设备上实时完成。

我在想某种细胞自动机或粒子系统是要走的路，但我不知道从哪里开始。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-09T07:15:55.643

[Lattice-Boltzmann 方法](http://en.wikipedia.org/wiki/Lattice_Boltzmann_methods)是一种以离散的、类似元胞自动机的方式模拟流体的非常常见的方法。

但是，为了在 iPhone 上实现实时性能，将流体模拟为粒子系统然后想办法将粒子渲染为体积质量可能会更有效。我怀疑这是[Aqua Forest](http://www.dothehudson.net/en/app/aqua_forest/)等游戏所采用的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-09T05:27:12.400

这不是我的研究领域，但我相信这被认为是规范的工作：

计算机图形学的流体模拟

[https://www.routledge.com/Fluid-Simulation-for-Computer-Graphics/Bridson/p/book/9781482232837](https://www.routledge.com/Fluid-Simulation-for-Computer-Graphics/Bridson/p/book/9781482232837)

另外，看看伯克利动画和建模组

[https://web.archive.org/web/20090116020253/http://www.cs.berkeley.edu/b-cam/](https://web.archive.org/web/20090116020253/http://www.cs.berkeley.edu/b-cam/)

我还推荐使用 Google Scholar 或 Citeseer 之类的工具来研究学术文献。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-20T00:04:35.807

[这](http://www.rowlhouse.co.uk/water/index.html)可能也很有趣（[演示视频](http://www.youtube.com/watch?v=T0E6e7viXyc)、[演示二进制文件](http://www.rowlhouse.co.uk/water/water.zip)、[源代码](http://www.rowlhouse.co.uk/jiglib/index.html)）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-01T03:34:43.373

粒子系统可能是一个很好的起点。沿着这些思路，您可以将 SPH（平滑粒子流体动力学）视为一种更加物理的流体模拟方法，它仍然依赖于粒子。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-09T05:34:30.340

[Ron Fedkiw 在这方面的工作相当出色。](http://physbam.stanford.edu/~fedkiw/)

还有一条评论：流体模拟是数值并行编程和超级计算机，或者至少是高功率、多核桌面的东西。iPhone可能不会削减它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-06-01T17:56:46.510

带有颗粒的 SPH 可能是最快启动和运行的，它在可扩展到粘弹性材料和其他材料方面处于领先地位。明天我将在我的博客上发布我过去几天一直在写的关于这个主题的指南。( [http://blog.brandonpelfrey.com](https://web.archive.org/web/20090722233436/http://blog.brandonpelfrey.com/?p=303) )

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-09T07:11:08.617

我想知道您是否正在考虑像[Archer Maclean 的 Mercury](http://www.gamespot.com/psp/puzzle/archermacleansmercury/index.html)或PSP的[Mercury Meltdown之类的东西。](http://www.gamespot.com/psp/puzzle/mercury2/index.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-09T07:12:46.697

据我所知，在游戏[De Blob](http://www.fun-motion.com/physics-games/de-blob/ "关于游戏的一些信息")中，一个彩色的“blob”在白色环境中移动，为它撞到的物体着色。当我阅读您对您似乎想做的事情的描述时，不知何故在我脑海中触发了这一点。（实际上没有玩过游戏，所以我不知道它有多适合。）

话虽如此，我似乎记得在那个游戏中，blob 的流动性主要是人为的：基本上是一个球体，它的一些轻微的大小/形状变换，一些运动提示和添加的“流畅的声音”给玩家的印象不太稳固的东西是游戏的主角。不涉及实际的物理或模拟类型编程。

听起来很适合 iphone 可运行的软件。这对你来说可能就足够了吗？

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-05-20T13:58:50.063

它是如此稀疏，你必须为粒子建模？

如果是这样，我建议您查看[格子气体细胞自动机](https://en.wikipedia.org/wiki/Lattice_gas_automaton)（LGCA，请参见[此处](https://www.youtube.com/watch?v=HluQpDFOceg)的示例视频）。

简而言之，LGCA 是元胞自动机的一个子类，其中元胞状态是二进制值的元组，每个元组代表一个元胞与其相邻元胞之间的一个通道，并且粒子可以通过该通道（`1`如果它包含一个粒子，则为通道，`0`否则）。

然后，更新方案是一个同步并行两步函数，它在每个单元内的通道之间重组粒子（碰撞），然后将这些粒子传播到目标邻居的相应通道（传播）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-20T19:46:20.887

基于网格的 Navier-Stokes 解决方案总是更快，并且计算速度是恒定的。

# python - 如何在 Python 中为同时函数调用添加时间戳？

> ID：427152
> 
> 赞同：-1
> 
> 时间：2009-01-09T05:21:49.540
> 
> 标签：python, function-call, timestamping, simultaneous-calls

我在模块中有一个读取功能。

如果我同时执行该功能，我需要给它加上时间戳。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T07:25:40.163

我将提供一种稍微不同的方法：

```
import time

def timestampit(func):
    def decorate(*args, **kwargs):
        decorate.timestamp = time.time()
        return func(*args, **kwargs)
    return decorate

@timestampit
def hello():
    print 'hello'

hello()
print hello.timestamp

time.sleep(1)

hello()
print hello.timestamp 
```

与 Swaroop 示例的不同之处在于：

1.  我使用 time.time() 而不是 datetime.now() 作为时间戳，因为它更适合性能测试
2.  我将时间戳附加为装饰函数的属性。这样，您可以随时调用并保留它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T06:21:01.137

```
#!/usr/bin/env python

import datetime

def timestampit(func):
    def decorate(*args, **kwargs):
        print datetime.datetime.now()
        return func(*args, **kwargs)
    return decorate

@timestampit
def hello():
    print 'hello'

hello()

# Output:
# $ python test.py 
# 2009-01-09 11:50:48.704584
# hello 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T11:50:52.947

[Terik Ziade 的](http://blogs.nuxeo.com/sections/blogs/tarek_ziade/archive/2005/09)一些示例 代码

（更精致的版本，使用 timeit 模块，可以在他最近出版的《Expert Python Programming》一书中找到）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T10:27:02.483

如果你有兴趣，[python wiki 上有大量关于装饰器的信息](http://wiki.python.org/moin/PythonDecorators)。

# windows - 等待托管代码中的消息

> ID：427161
> 
> 赞同：1
> 
> 时间：2009-01-09T05:31:56.307
> 
> 标签：windows, winforms, winapi, message-queue

[这与之前的一个问题](https://stackoverflow.com/questions/419776/modal-operation-using-imessagefilter-and-doevents)密切相关。

在托管世界中：

*   如何检查当前线程的消息队列中是否有消息？
*   如何屈服于操作系统并等待当前线程中的消息（如 GetMessage 或 WaitMessage）？

我正在寻找没有 PInvoke 的托管等效项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T06:11:10.890

您可以覆盖 WndProc，然后在它被调用时触发您自己的事件。当然，这不会阻塞。如果您想在收到消息之前一直阻塞，您可以在另一个线程中使用一个方法等待同步对象，并让 WndProc 向该对象发出信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T06:36:18.267

您可以使用[AddMessageFilter 函数。](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.addmessagefilter.aspx)

我不认为在没有 P/Invoke 的情况下如何做到这一点的阻塞方式，因为它超出了 .NET 的意图。

# windows-vista - 在安装过程中，Vista 上的各种文件类型在哪里

> ID：427164
> 
> 赞同：3
> 
> 时间：2009-01-09T05:33:58.080
> 
> 标签：windows-vista, windows-xp, installation, program-files

在 Windows XP 上安装我的软件总是很容易。一切都在“c:\Program Files\myprogram”目录中。这包括：

1.  可执行程序本身和任何 dll。
2.  Readme.txt 和 License.txt
3.  帮助文件（.hlp 或 .chm 或 .pdf）
4.  不在注册表中的程序设置（.ini 文件）
5.  程序的示例数据文件
6.  程序生成的日志文件

（我错过了什么吗？）

但我知道其中一些不应该进入 Windows Vista 上的“程序文件”目录。哪些不应该，应该去哪里？

另外，我应该更改我的 XP 安装位置以匹配 Vista 吗？

* * *

[附录： François 对另一个问题的回答](https://stackoverflow.com/questions/1598196/rules-to-develop-a-delphi-windows-7-app/1598338#1598338)中提供了一些非常好的信息，该问题将我指向 Marco Cantu 的优秀帖子：[非主题 Windows 应用程序和虚拟商店](http://blog.marcocantu.com/blog/non_themed_virtual_storage.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T06:33:54.357

数据放置的相关 MSDN 详细信息：

[http://msdn.microsoft.com/en-us/library/bb762584(VS.85).aspx](http://msdn.microsoft.com/en-us/library/bb762584(VS.85).aspx)

和

[http://msdn.microsoft.com/en-us/library/bb762494.aspx](http://msdn.microsoft.com/en-us/library/bb762494.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-01-09T06:10:12.797

您可以将大部分文件保留在 Program Files 中，只需将需要写入的任何文件移出 Program Files。

1.  程序文件
2.  程序文件
3.  程序文件，或许多所有用户
4.  每个用户的 %APPDATA%
5.  所有用户的应用程序数据文件夹
6.  每个用户或所有用户临时文件夹

# wpf - 在 WPF 中更改“插入点”光标

> ID：427167
> 
> 赞同：2
> 
> 时间：2009-01-09T05:36:36.657
> 
> 标签：wpf

我需要在 WPF 应用程序中创建“命令行”外观。在 WPF 中，文本框使用闪烁的垂直线作为插入点光标。在命令行世界中，插入点光标是一个灰色矩形。

有没有办法改变 WPF 文本框中插入点光标的外观？显而易见的 (Cursor="Cursor.Whatever") 只会在您将鼠标悬停在文本框上时改变鼠标光标的外观，而不是插入点。

我将不胜感激任何帮助。非常感谢你们的时间！

里亚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T05:57:43.587

你的意思是“插入符号”。目前您无法在 WPF 中更改其形状。只有颜色是可变的（它的背景反转；背景可能是透明的，但插入符号总是可见的）。

# c# - 将字符串作为参数传递给控制器

> ID：427174
> 
> 赞同：1
> 
> 时间：2009-01-09T05:41:26.927
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我知道这可能真的很明显，但我不知道为什么我不能像 int 那样将字符串参数传递给控制器​​。

例如

```
//controller/action/2
public ActionResult Action(int someInt)
{
//somenumber != null
} 
```

但是当我像这样传递一个字符串时......

```
//controller/Action/x9294kskw
public ActionResult Action(string someString)
{
//someString = null
} 
```

我错过了什么？我猜这与路由有关，但是……我不知道。谢谢！

编辑：

也许我读了 scott gu 的博客有点太粗心了，但这是否记录在某个地方？我应该检查路线！

字符串的处理方式与整数不同是否有特定的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T05:43:34.427

它需要具有名称“id”，作为路由默认配置中的设置。

# ios - 如何使用 iOS 创建 GUID/UUID

> ID：427180
> 
> 赞同：211
> 
> 时间：2009-01-09T05:45:16.437
> 
> 标签：ios, uuid, guid

我希望能够在 iPhone 和 iPad 上创建 GUID/UUID。

目的是能够为分布式数据创建唯一的密钥。有没有办法用 iOS SDK 做到这一点？

* * *

## 回答 #1

> 赞同：324
> 
> 时间：2009-01-09T09:35:28.280

```
[[UIDevice currentDevice] uniqueIdentifier] 
```

返回 iPhone 的唯一 ID。

> 编辑：`-[UIDevice uniqueIdentifier]`现在已弃用，应用程序正在被 App Store 拒绝使用它。下面的方法现在是首选方法。

如果您需要创建多个 UUID，只需使用此方法（使用 ARC）：

```
+ (NSString *)GetUUID
{
  CFUUIDRef theUUID = CFUUIDCreate(NULL);
  CFStringRef string = CFUUIDCreateString(NULL, theUUID);
  CFRelease(theUUID);
  return (__bridge NSString *)string;
} 
```

编辑：2014 年 1 月 29 日：如果您的目标是 iOS 6 或更高版本，您现在可以使用更简单的方法：

```
NSString *UUID = [[NSUUID UUID] UUIDString]; 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2012-05-23T00:51:12.097

这是我正在使用的简单代码，符合 ARC。

```
+(NSString *)getUUID
{
    CFUUIDRef newUniqueId = CFUUIDCreate(kCFAllocatorDefault);
    NSString * uuidString = (__bridge_transfer NSString*)CFUUIDCreateString(kCFAllocatorDefault, newUniqueId);
    CFRelease(newUniqueId);

    return uuidString;
} 
```

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2013-03-23T05:19:40.003

在 iOS 6 中，您可以轻松使用：

```
NSUUID  *UUID = [NSUUID UUID];
NSString* stringUUID = [UUID UUIDString]; 
```

[Apple 文档](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUUID_Class/Reference/Reference.html)中的更多详细信息

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2009-01-09T06:14:32.960

查看 Apple Developer 文档，我发现[CFUUID](http://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFUUIDRef/Reference/reference.html)对象可用于 iPhone OS 2.0 及更高版本。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2014-11-30T23:07:53.453

在**斯威夫特**：

```
var uuid: String = NSUUID().UUIDString
println("uuid: \(uuid)") 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2009-03-03T21:48:33.003

最简单的技术是使用`NSString *uuid = [[NSProcessInfo processInfo] globallyUniqueString]`. 请参阅[NSProcessInfo](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSProcessInfo_Class/Reference/Reference.html#//apple_ref/doc/uid/20000316-globallyUniqueString)类参考。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2016-11-01T14:14:22.360

在**Swift 3.0中**

```
var uuid = UUID().uuidString 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-04-02T18:11:58.680

我在这里为 ObjC 上传了一个简单但快速的 Guid 类实现：[obj-c GUID](https://code.google.com/p/objc-guid/source/browse/)

```
Guid* guid = [Guid randomGuid];
NSLog("%@", guid.description); 
```

它也可以解析各种字符串格式。

# jquery - 为 jQuery Cycle 插件预加载图像

> ID：427192
> 
> 赞同：3
> 
> 时间：2009-01-09T05:54:56.230
> 
> 标签：jquery, plugins, image-preloader

我对 jquery 很陌生，并试图弄清楚如何为 jQuery Cycle 插件预加载图像。

我有 5 张以上的大尺寸图像，我需要在使用 Cycle 插件开始幻灯片放映之前预加载这些图像。我还需要在预加载图像时显示加载 gif。

我试图在这里实现该技术[http://jqueryfordesigners.com/image-loading/](http://jqueryfordesigners.com/image-loading/)

但仍然无法弄清楚如何使其与 Cycle 插件一起使用。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T18:22:20.957

...或者如果您遇到的是图像转换之间的暂停，请将此参数添加到循环函数。它使循环忽略非 img 内容，例如空格和换行符，这可能导致循环在转换之间暂停。

```
jQuery('.imageslideshow').cycle({
    slideExpr: 'img',
    // other options
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T12:39:41.707

设法使它工作..

[http://www.thefancyhouse.com/charlienutting/](http://www.thefancyhouse.com/charlienutting/)

当然感谢大卫。

我从你那里得到了这个想法..但不同的方法:)

我正在快速学习 Jquery。

感谢大家！

# joomla - Joomla 1.5开发有没有好的参考？

> ID：427200
> 
> 赞同：3
> 
> 时间：2009-01-09T06:00:12.457
> 
> 标签：joomla

我最近一直在拼凑一些基本的 Joomla 1.5 组件和模块，而且每次我进入它时，我都会把头发扯下来，因为我根本不明白 MVC 模式是如何工作的。我遇到的问题的一些例子：

*   视图如何访问模型？
*   如何切换到不同的视图？
*   您甚至如何包含定义模型的正确文件？
*   等等

我确信我的所有问题都有非常简单的答案：我的主要问题是，总的来说，我觉得“文档”根本没有用，而且肯定没有提供有关如何在其中开发组件/模块的足够信息新的 MVC 风格。API 网站几乎没有用处，因为它提供的只是函数的类树，几乎没有任何评论。文档网站仅面向管理员和核心开发人员。

**对于使用 Joomla 1.5 的 Web 开发人员，是否有任何有用的信息来源？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T14:28:33.937

虽然混入了一些关于核心团队的文章，但这里有一个开发类别的链接，您可以在其中充分利用文档站点：[http](http://docs.joomla.org/Category:Development) ://docs.joomla.org/Category:Development是的，Joomla ！框架可以在文档方面使用更多。

当您使用控制器类时，`display()`如果您的任务与任何函数都不匹配，则默认调用该函数。这反过来检查`view`变量的 HTTP 请求并显示具有相同名称的视图。如果没有`view`指定值，你会得到一个错误。解决这个问题的方法是`display()`在控制器中定义一个函数，然后让它检查 的值`view`，如果未设置，将其设置为默认值，然后调用`parent::display()`. 这是我在最近的一个项目中用来显示`mylist`视图的一个：

```
function display()
{
    $view = JRequest::getVar('view', '');

    if ($view == '') {

        JRequest::setVar('view', 'mylist');

    }

    parent::display();
} 
```

当你的视图被加载时，同名的模型也会被加载。然后，您可以通过 访问视图类中的模型函数`$this->get()`。例如，如果您的模型中有一个名为 的函数`getPreferences()`，您可以`$this->get('preferences')`调用该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-17T23:36:25.807

当您第一次深入研究 MVC 布局并仅查看 Joomla 团队组件时，它可能会很棘手。

我发现当我第一次设计自己的组件时，它非常混乱和复杂，但是我找到了一个示例组件和基本教程，用于在 Joomla 1.5 中编写 MVC 组件。您可以在[http://www.vojtechovsky.net/joomla/component-helloworld-2-create-tutorial-guide-en.html找到它](http://www.vojtechovsky.net/joomla/component-helloworld-2-create-tutorial-guide-en.html)

然后我也开始编写遵循 MVC 指南的“简单 META 管理套件”，因此如果您希望将其用作帮助程序，您可以在[www.aqsg.com.au找到它](http://www.aqsg.com.au)

希望有帮助

# php - 如何确定 URL 是否在 PHP 中重定向？

> ID：427203
> 
> 赞同：10
> 
> 时间：2009-01-09T06:02:27.930
> 
> 标签：php, url, rewrite

我看到有人问一个关于检测 URL 是否从 groovy 和 perl 重定向但在 PHP 上找不到任何东西的问题。

任何人都知道我可以在某个地方找到执行此操作的代码吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-09T06:11:13.917

```
$ch = curl_init('http://www.yahoo.com/');
curl_exec($ch);
$code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
if (($code == 301) || ($code == 302)) {
  //This was a redirect
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-26T21:16:37.487

实际上，我发现这个效果最好：

```
 function GetURL($URL)
    {
            $ch = curl_init($URL);

            curl_setopt($ch,CURLOPT_FOLLOWLOCATION,true);

            curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);

            curl_exec($ch);

            $code = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);

            curl_close($ch);

            return $code;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-26T21:22:48.270

请记住，通常针对这个问题给出的答案都没有考虑到由返回文档中编码的 javascript 引起的重定向（或者我认为 HTML 中的元刷新标记。）所以无论你会错过什么，都有可能使用此类代码进行测试时，某些类型的“重定向”。

不幸的是，解决此问题的唯一方法是让实际的 Web 浏览器访问网页，并以报告 javascript 和元刷新重定向的方式修改 Web 浏览器。

干杯!

# git - Git 钩子脚本可以与存储库一起管理吗？

> ID：427207
> 
> 赞同：429
> 
> 时间：2009-01-09T06:05:57.110
> 
> 标签：git, githooks

我们想制作一些我们都可以共享的基本钩子脚本——例如预先格式化提交消息。Git 具有通常存储在`<project>/.git/hooks/`. 但是，当人们进行克隆并且它们不受版本控制时，这些脚本不会传播。

有没有什么好方法可以帮助大家获取正确的钩子脚本？我可以让这些钩子脚本指向我的仓库中的版本控制脚本吗？

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2016-06-16T14:23:10.330

在[Git 2.9](https://github.com/blog/2188-git-2-9-has-been-released)中，配置选项[`core.hooksPath`](https://git-scm.com/docs/git-config#Documentation/git-config.txt-corehooksPath)指定了一个自定义钩子目录。

将您的挂钩移动到`hooks`存储库中的跟踪目录。然后，将存储库的*每个实例*配置为使用 tracked`hooks`而不是`$GIT_DIR/hooks`：

```
git config core.hooksPath hooks 
```

一般来说，路径可以是绝对的，也可以是相对于运行钩子的目录（通常是工作树的根目录；参见 描述部分[`man githooks`](https://git-scm.com/docs/githooks)）。

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2009-01-09T06:53:56.267

从理论上讲，您可以`hooks`在项目目录中创建一个包含所有脚本的目录（或您喜欢的任何名称），然后将它们符号链接到`.git/hooks`. 当然，每个克隆 repo 的人都必须设置这些符号链接（尽管您可能会非常喜欢并拥有一个克隆器可以运行的部署脚本来半自动地设置它们）。

要在 *nix 上进行符号链接，您需要做的就是：

```
root="$(pwd)"
ln -s "$root/hooks" "$root/.git/hooks" 
```

`ln -sf`如果您准备好覆盖其中的内容，请使用`.git/hooks`

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2019-05-02T19:09:28.430

对于[Node.js](https://en.wikipedia.org/wiki/Node.js)用户，一个简单的解决方案是更新**package.json**

```
{
  "name": "name",
  "version": "0.0.1",
  ......
  "scripts": {
    "preinstall": "git config core.hooksPath hooks", 
```

预*安装*将在之前运行

> npm 安装

并重定向 Git 以在**.\hooks**（或您选择的任何名称）目录中查找挂钩。这个目录应该在文件名（减去 .sample）和结构方面模仿**.\.git\hooks 。**

想象一下[Maven](https://en.wikipedia.org/wiki/Apache_Maven)和其他构建工具将具有与*preinstall*等效的功能。

它也应该适用于所有平台。

如果您需要更多信息，请参阅*[与团队共享 Git 挂钩的两种方法](https://www.viget.com/articles/two-ways-to-share-git-hooks-with-your-team/)*。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-02-13T16:58:40.643

如果您的项目是 JavaScript 项目并且您`npm`用作包管理器，则可以使用[shared-git-hooks](https://github.com/kilianc/shared-git-hooks)在`npm install`.

完全披露：我写了这个包

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-03-02T13:50:19.150

大多数现代编程语言，或者更确切地说是它们的构建工具，都支持插件来管理 Git 挂钩。这意味着您需要做的就是配置您的*package.json*、*pom.xml*等文件，您团队中的任何人都别无选择，只能遵守，除非他们更改构建文件。

该插件将为您将内容添加到 .git 目录。

**例子：**

*[Git 构建 Hook Maven 插件](https://github.com/rudikershaw/git-build-hook)*

*[gitook-maven-插件](https://github.com/olukyrich/githook-maven-plugin)*

*[git-hooks-js](https://www.npmjs.com/package/git-hooks)*

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-06T13:51:49.430

使用[git-hooks](https://github.com/git-hooks/git-hooks)。它将调用路由`.git/hooks`到项目目录下的脚本中，`githooks`.

还有很多功能可以让您在各处最小化复制和符号链接挂钩。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-11-01T14:10:22.240

我们正在使用具有构建前和构建后事件的 Visual Studio 解决方案（以及项目）。我正在添加一个名为“GitHookDeployer”的附加项目。项目在构建后事件中自行修改文件。该文件设置为复制到构建目录。因此，该项目每次都构建并且永远不会被跳过。在构建事件中，它还确保所有 git 挂钩都到位。

请注意，这不是一个通用的解决方案，因为某些项目当然没有什么可构建的。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-03-23T13:48:44.837

您可以使用托管解决方案进行预提交挂钩管理，例如[pre-commit](https://pre-commit.com/)。或者像[Datree.io](https://datree.io/solutions/devops-policy/)这样的服务器端 git-hooks 的集中式解决方案。它具有内置策略，例如：

1.  检测和防止[机密合并](https://docs.datree.io/docs/do-not-include-secret-files)。
2.  强制执行正确的[Git 用户配置](https://docs.datree.io/docs/unverified-users)。
3.  强制[Jira 票证集成](https://docs.datree.io/docs/link-pull-request-to-a-jira-ticket)- 在拉取请求名称/提交消息中提及票证编号。

它不会取代您所有的钩子，但它可能会帮助您的开发人员使用最明显的钩子，而无需在每台开发人员计算机/存储库上安装钩子的配置地狱。

免责声明：我是 Datrees 的创始人之一

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-01T18:51:17.917

您可以将您的*钩子*文件夹设为另一个 Git 存储库并将其链接为子模块...

我想只有当你有很多成员和钩子定期更换时才值得。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-23T11:34:51.770

理想情况下，如果您遵循示例文件，挂钩是用 Bash 编写的。但是您可以用任何可用的语言编写它，并确保它具有可执行标志。

因此，您可以编写 Python 或 Go 代码来实现您的目标，并将其放在 hooks 文件夹下。它可以工作，但不会与存储库一起管理。

**两种选择**

**a) 多脚本**

你可以在你的帮助中编写你的钩子，并在钩子中添加一小段代码，以调用你的完美脚本，如下所示：

```
$ cat .git/hooks/pre-commit
#!/bin/bash
../../hooks/myprecommit.js 
```

**b) 单一脚本**

一个更酷的选择是只添加一个脚本来统治它们，而不是几个。因此，您创建了一个*hooks/mysuperhook.go*文件并将每个您想要的钩子指向它。

```
$ cat .git/hooks/pre-commit
#!/bin/bash
../../hooks/mysuperhook.go $(basename $0) 
```

该参数将为您的脚本提供触发了哪个钩子，您可以在代码中区分它。为什么？例如，有时您可能希望对提交和推送运行相同的检查。

**进而？**

然后，您可能希望拥有更多功能，例如：

*   手动触发钩子以检查是否一切正常，甚至在提交或推送之前。如果你只是调用你的脚本（选项 a 或 b）就可以了。
*   触发[CI](https://en.wikipedia.org/wiki/Continuous_integration)上的钩子，因此您无需为 CI 重写相同的检查。例如，它只是调用提交和推送触发器。同上应该可以解决。
*   调用外部工具，例如 Markdown 验证器或[YAML](https://en.wikipedia.org/wiki/YAML)验证器。您可以进行系统调用并需要处理标准输出和标准错误。
*   确保所有开发人员都有安装挂钩的简单方法，因此需要将一个漂亮的脚本添加到存储库中，以用正确的挂钩替换默认挂钩
*   有一些全局帮助器，例如检查以阻止提交到开发和主分支，而不必将其添加到每个存储库。您可以通过拥有另一个带有全局脚本的存储库来解决它。

**这可以更简单吗？**

是的，有几个工具可以帮助您管理 Git 挂钩。它们中的每一个都是为从不同的角度解决问题而量身定制的，您可能需要了解所有这些才能获得最适合您或您的团队的一个。[GitHooks.com](https://githooks.com)提供了很多关于 hooking 的阅读，以及一些当今​​可用的工具。

截至今天，这里列出了 21 个项目，它们使用不同的策略来管理 Git 挂钩。有些只针对单个钩子，有些针对特定语言，等等。

其中一个由我编写并作为开源项目免费提供的工具称为[hooks4git](https://pypi.org/project/hooks4git)。*它是用 Python 编写的（因为我喜欢它），但想法是在一个名为.hooks4git.ini*的单个配置文件中处理上面列出的所有项目，该文件位于您的存储库中，并且可以调用任何您想调用的任何脚本语言。

使用 Git 钩子绝对很棒，但提供它们的方式通常只会让人们远离它。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-02-19T06:16:49.247

## 对于 Gradle 用户

我发现[这些脚本](https://gist.github.com/KenVanHoeylandt/c7a928426bce83ffab400ab1fd99054a)对 Gradle 项目非常有用。

### 构建.gradle

`apply from: rootProject.file('gradle/install-git-hooks.gradle')`

### gradle/安装-git-hooks.gradle

```
tasks.create(name: 'gitExecutableHooks') {
    doLast {
        Runtime.getRuntime().exec("chmod -R +x .git/hooks/");
    }
}
task installGitHooks(type: Copy) {
    from new File(rootProject.rootDir, 'pre-commit')
    into { new File(rootProject.rootDir, '.git/hooks') }
}
gitExecutableHooks.dependsOn installGitHooks
clean.dependsOn gitExecutableHooks 
```

### 预提交

```
.... your pre commit scripts goes here 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-01-09T23:35:46.797

我想将几个答案合并为一个。假设您在您的`project/`目录中：

# 设置您的自定义挂钩

1.  创建`.githooks`目录并将钩子放在其中。（参见`.git/hooks`示例）

2.  创建一个`.gitconfig`指向目录[¹](https://www.viget.com/articles/two-ways-to-share-git-hooks-with-your-team/)的文件：

    ```
    git config -f .gitconfig core.hooksPath .githooks 
    ```

3.  [在您的²](https://stackoverflow.com/a/18330114/1952991)中创建以下规则`Makefile`：

    ```
    enable-git-hooks:
        git config --local include.path ../.gitconfig
        $(warning REMEMBER, YOU MUST HAVE REVIEWED THE CUSTOM HOOKS!) 
    ```

# 启用您的自定义挂钩

每个开发人员都应该[在查看这些自定义挂钩后明确启用它们](https://stackoverflow.com/questions/18329621/how-to-store-a-git-config-as-part-of-the-repository#comment26906692_18330114)。在您的 README 中添加一个指令，如下所示：

> 启用自定义挂钩后通过`make enable-git-hooks`.

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-04-01T18:32:29.487

我目前正在我们的代码库中处理这个问题，我遇到了一个名为的库`husky`，它简化了如何在您的团队中使用和共享 GitHub Hooks。我强烈建议调查一下。

# c - 是否可以在 Linux 上预测 C 中的堆栈溢出？

> ID：427209
> 
> 赞同：4
> 
> 时间：2009-01-09T06:08:12.833
> 
> 标签：c, linux, x86, alloca

在 x86 Linux 系统上，某些情况可能会导致堆栈溢出：

*   `struct my_big_object[HUGE_NUMBER]`在堆栈上。穿过它最终会导致`SIGSEGV`。
*   该`alloca()`例程（如`malloc()`，但使用堆栈，自动释放自身，`SIGSEGV`如果它太大也会爆炸）。**更新： alloca() 并没有像我最初所说的那样被正式弃用；它只是气馁**。

有没有办法以编程方式检测本地堆栈对于给定对象是否足够大？我知道堆栈大小可以通过 调整`ulimit`，所以我希望有一种方法（但它可能是不可移植的）。理想情况下，我希望能够做这样的事情：

```
int min_stack_space_available = /* ??? */;
if (object_size < min_stack_space_available)
{
    char *foo = alloca(object_size);
    do_stuff(foo);
}
else
{
    char *foo = malloc(object_size);
    do_stuff(foo);
    free(foo);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T07:45:36.927

您可以通过查找进程堆栈空间的大小然后减去已使用的量来确定进程可用的堆栈空间。

```
ulimit -s 
```

显示 linux 系统上的堆栈大小。对于编程方法，请查看[getrlimit()](http://www.gnu.org/software/libtool/manual/libc/Limits-on-Resources.html)。然后，要确定当前堆栈深度，从一到底部减去指向堆栈顶部的指针。例如（未经测试的代码）：

```
unsigned char *bottom_of_stack_ptr;

void call_function(int argc, char *argv) {
    unsigned char top_of_stack;
    unsigned int depth = (&top_of_stack > bottom_of_stack_ptr) ? 
        &top_of_stack-bottom_of_stack_ptr : 
        bottom_of_stack_ptr-&top_of_stack;

    if( depth+100 < PROGRAMMATICALLY_DETERMINED_STACK_SIZE ) {
        ...
    }
}

int main(int argc, char *argv) {
    unsigned char bottom_of_stack;
    bottom_of_stack_ptr = &bottom_of_stack;
    my_function();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T06:59:23.417

> 已弃用的 alloca() 例程（如 malloc()，但使用堆栈，自动释放自身，如果它太大，也会用 SIGSEGV 炸毁）。

为什么不推荐使用alloca？

无论如何，在您的情况下，alloca 与 malloc 的速度有多快？（这值得么？）

如果没有足够的空间，你不会从 alloca 得到 null 吗？（和 malloc 一样吗？）

当你的代码崩溃时，它在哪里崩溃？它在 alloca 中还是在 doStuff() 中？

/约翰

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T07:25:28.713

alloca() 将在失败时返回 NULL，我相信 alloca(0) 的行为是未定义的和平台变体。如果你在 do_something() 之前检查，你永远不会被 SEGV 击中。

我有一些问题：

1.  为什么，哦，为什么，你需要堆栈上那么大的东西吗？大多数系统的默认大小是8M，还是太小了？
2.  如果调用 alloca() 的函数阻塞，通过 mlock() / mlockall() 保护相同数量的堆是否会随着时间的推移保证接近相同的访问性能（即“不要交换我，兄弟！”）？如果您使用更激进的 'rt' 调度程序，建议无论如何调用它们。

这个问题很有趣，但引起了人们的注意。它提高了我方钉圆孔 o-meter 上的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T08:09:41.200

**不**推荐使用alloca 函数。但是，它不在 POSIX 中，它也依赖于机器和编译器。alloca 的 Linux 手册页指出“对于某些应用程序，与使用 malloc 相比，使用它可以提高效率，并且在某些情况下，它还可以简化使用 longjmp() 或 siglongjmp() 的应用程序中的内存释放。否则，不鼓励使用它。”

手册页还说“如果堆栈帧无法扩展，则没有错误指示。但是，在分配失败后，程序很可能会收到 SIGSEGV。”

[在Stackoverflow Podcast #36](https://blog.stackoverflow.com/2009/01/podcast-36/)中实际上提到了 malloc 的性能。

（我知道这不是您问题的正确答案，但我认为无论如何它可能有用。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T08:50:43.097

不确定这是否适用于 Linux，但在 Windows 上，*即使成功，也可能会遇到使用大堆栈分配的访问冲突！*

这是因为默认情况下，Windows 的 VMM 实际上仅将堆栈 RAM 的前几个（不确定到底有多少）4096 字节页面标记为可分页（即由页面文件支持），因为它认为堆栈访问通常会从顶端; 随着访问越来越接近当前的“边界”，越来越低的页面被标记为可分页。但这意味着远低于堆栈顶部的早期内存读/写将触发访问冲突，因为该内存尚未实际分配！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T09:16:55.807

您没有过多说明为什么要在堆栈上分配，但如果堆栈内存模型很有吸引力，您也可以在堆上实现堆栈分配。在程序开始时分配一大块内存并保留一个指向它的指针堆栈，这将对应于常规堆栈上的帧。您只需要记住在函数返回时弹出您的私有堆栈指针。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-09T15:14:37.947

一些编译器，例如[Open Watcom C/C++](http://openwatcom.org/index.php/Main_Page)，支持 stackavail() 函数，可以让你做到这一点

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-10T14:27:59.803

您可以使用它[`GNU libsigsegv`](http://www.gnu.org/software/libsigsegv/)来*处理*页面错误，包括发生堆栈溢出的情况（来自其网站）：

> 在某些应用程序中，堆栈溢出处理程序执行一些清理或通知用户，然后立即终止应用程序。在其他应用程序中，堆栈溢出处理程序 longjmps 回到应用程序的中心点。这个库支持这两种用途。第二种情况，handler必须保证恢复正常的信号掩码（因为handler执行的时候很多信号被阻塞了），还必须调用sigsegv_leave_handler()来转移控制；那么只有它可以longjmp离开。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-09T07:49:39.367

即使这不是对您问题的直接回答，我希望您知道[valgrind](http://valgrind.org/)的存在- 一个在 Linux 上在运行时检测此类问题的绝佳工具。

关于堆栈问题，您可以尝试从检测到这些溢出的固定池中动态分配对象。通过一个简单的宏向导，您可以使其在调试时运行，在发布时运行真实代码，从而知道（至少对于您正在执行的场景）您不会占用太多。[这是更多信息和](http://eli.thegreenplace.net/2008/10/17/memmgr-a-fixed-pool-memory-allocator/)示例实现的链接。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-09T09:05:47.700

我想不出一个好的方法。也许可以通过使用 getrlimit() （之前建议）和一些指针算术？但首先问问自己你是否真的想要这个。

```
无效 *closeToBase;

主要的 （） {
  诠释 closeToBase;
  stackTop = &closeToBase;
}

int stackHasRoomFor(int bytes) {
  诠释当前顶部；
  return getrlimit(...) - (¤tTop - closeToBase) > bytes + SomeExtra;
}

```

就个人而言，我不会这样做。在堆上分配大的东西，堆栈不适合它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-14T19:35:43.777

堆栈区域的结束由操作系统动态确定。虽然您可以通过以高度依赖操作系统的方式查看虚拟内存区域 (VMA) 来找到堆栈的“静态”边界（请参阅[libsigsegv/src/](http://git.savannah.gnu.org/gitweb/?p=libsigsegv.git;a=tree;f=src)中的 stackvma* 文件），但您还必须考虑

*   getrlimit 值，
*   每个线程的堆栈大小（请参阅[pthread_getstacksize](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_attr_getstacksize.html)）

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2009-01-09T07:02:47.777

抱歉，如果这是显而易见的，但您可以轻松地编写一个函数来测试特定的堆栈分配大小，只需尝试（该大小的）alloca 并捕获堆栈溢出异常。如果您愿意，可以将它放入一个函数中，并为函数堆栈开销使用一些预先确定的数学。例如：

```
bool CanFitOnStack( size_t num_bytes )
{
    int stack_offset_for_function = 4; // <- Determine this
    try
    {
        alloca( num_bytes - stack_offset_for_function );
    }
    catch ( ... )
    {
        return false;
    }

    return true;
} 
```

# cocoa-touch - NSNumberFormatter 用于四舍五入浮点值

> ID：427210
> 
> 赞同：2
> 
> 时间：2009-01-09T06:08:14.547
> 
> 标签：cocoa-touch

我有一个 CGFloat 值，我想将其舍入到小数点后 3 位。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-09T14:42:45.157

```
NSString *value = [NSString stringWithFormat:@"%.3f", theFloat]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T15:41:46.863

如果要走 NSDecimalNumber 路线，可以使用以下内容：

```
NSDecimalNumber *testNumber = [NSDecimalNumber numberWithDouble:theFloat];
NSDecimalNumberHandler *roundingStyle = [NSDecimalNumberHandler decimalNumberHandlerWithRoundingMode:NSRoundBankers scale:3 raiseOnExactness:NO raiseOnOverflow:NO raiseOnUnderflow:NO raiseOnDivideByZero:NO];
NSDecimalNumber *roundedNumber = [testNumber decimalNumberByRoundingAccordingToBehavior:roundingStyle];
NSString *stringValue = [roundedNumber descriptionWithLocale:[NSLocale currentLocale]]; 
```

这将使用银行家四舍五入到小数点后 3 位：“四舍五入到最接近的可能返回值；当介于两种可能性之间时，返回最后一位为偶数的可能性。实际上，这意味着，从长远来看，数字将是四舍五入的次数和四舍五入的次数一样多；不会有系统偏差。” 此外，它将使用特定于语言环境的小数分隔符（“.”、“”等）。

但是，如果您有一个像 12.5 这样的数值，它将返回“12.5”，而不是“12.500”，这可能不是您想要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T06:16:35.530

```
myFloat = round(myfloat * 1000) / 1000.0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T14:38:27.630

尝试将浮点数格式化为“%5.3f”或类似的用于显示目的

......就像扎克兰利在他更好的答案中所做的那样。

# c# - C# 中正确的变量声明

> ID：427217
> 
> 赞同：2
> 
> 时间：2009-01-09T06:11:29.923
> 
> 标签：c#, asp.net

我注意到有些人用 get 和 set 语句声明了一个私有变量，然后声明了一个公共变量：

```
private string myvariable = string.Empty;
public string MyVariable
{
    get { return myvariable; }
    set { myvariable = value ?? string.Empty; }
} 
```

然后有些人只是执行以下操作：

```
public string MyVariable
{
    get { return value; }
    set { MyVariable = value; }
} 
```

作为一只智力低下的熊（是的，我有孩子......你为什么要问？）我不明白为什么你会选择一个而不是另一个。使用公共变量时，您可以随时使用变量的 set 方法进行设置，这不是同样有效吗？

任何人都可以为我阐明这一点吗？

更新：在几个人指出它无法编译后，我更正了第二个示例。很抱歉，但问题仍然存在......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-09T06:20:24.540

您的第二个示例无法编译，因为 getter 的 value 变量不存在。此外，setter 会导致同名的 StackOverflow 异常！

在 C# 3.0 中，您可以使用以下语法让编译器创建私有支持变量：

```
public string MyVariable { get; set; } 
```

不过，这不会为您提供第一个示例所具有的额外空值检查。如果您需要在 setter 中自定义逻辑，您可能必须坚持使用第一个示例的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T06:24:24.983

正如其他人所提到的，您的第二个示例无法编译。

但是，有很好的理由不使用公共字段。实际上，您的示例演示了其中一个 - 对于此属性，即使您将其设置为 null，如果您再次请求它，您将返回一个空字符串。这是否适合该属性（这*有点奇怪*）取决于确切的用途 - 但这不是公共领域的行为。

我有一[整篇](http://csharpindepth.com/Articles/Chapter8/PropertiesMatter.aspx)关于为什么属性比公共字段更好的文章，您可能会发现它们很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T06:25:40.177

[这](https://blog.codinghorror.com/properties-vs-public-variables/)是关于这个主题的非常有趣的读物。但是，我很确定我在 MSDN 上的某个地方读到了具有公共变量的对象比具有属性的对象更轻（找不到链接）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-01-09T06:38:34.563

拥有一个微不足道的 getter 和 setter 与使用公共字段非常相似。

优先使用getter 和 setter 而不是属性的主要论点*曾经*是[统一访问原则](http://en.wikipedia.org/wiki/Uniform_access_principle)，但由于 C# 具有属性，因此很容易用属性替换公共字段并重新编译。

它并不完美（请参阅 Jon Skeet 的文章），但反对使用公共字段的论据并没有那么强烈，以至于它使它“邪恶”，只要你知道其中的区别。

就个人而言，我喜欢能够轻松地为公共字段指定默认值。

# javascript - 如何使用 HTML 和 JavaScript 制作“有限固定”的 div？

> ID：427219
> 
> 赞同：0
> 
> 时间：2009-01-09T06:14:06.313
> 
> 标签：javascript, css, html

鉴于页面上存在其他 div，如何创建一个 div，使其在网页的某个域内具有固定宽度？示例：Slashdot 上的评论系统，它就像一个固定宽度的 div，用于在屏幕上滚动，但会保持在一定的长度内？我希望一个文本块出现在页面某个部分的屏幕旁边，但我希望它*留*在页面的那个部分内，而不是让它像固定块移动一样完全沿着页面移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-27T22:24:21.013

Slashdot 的[评论系统](http://science.slashdot.org/article.pl?sid=09/01/27/1950238)对该框使用两种不同类型的定位。当您第一次进入该页面时，该框是绝对定位的，因此它显示在左侧该列的底部。（这里的CSS代码：）

```
left: 0px;
top: 429px; /* or something */
position: absolute; 
```

当您向下滚动到该列的底部下方时，它们会使用 Javascript 将其切换为固定定位。

```
left: 0px;
top: 0px;
position: fixed; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T09:00:22.780

你的意思是像

> ```
> <div style="width xx; height xx; overflow: scroll;">? 
> ```

# metaprogramming - 你可以嵌套 C 预处理器指令吗？

> ID：427220
> 
> 赞同：4
> 
> 时间：2009-01-09T06:14:21.790
> 
> 标签：metaprogramming, c-preprocessor, preprocessor-directive

例如，以下是否可能：

```
#define definer(x) #define #x? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T06:19:10.190

不，你不能那样做。
磅 ( `#`) 符号在定义中具有不同的含义。这意味着 - 如果这是一个参数，则通过引用它使其成为一个字符串。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-09T08:36:58.523

您不能嵌套 C 预处理器指令。幸运的是，它几乎从来没有必要。如果您真的需要这种能力，那么在将代码交给 C 编译器之前运行的另一个预处理器几乎肯定会更好。例如：

```
sed 's/@CUSTOMER@/J. Random Person/' foo.c.in > foo.c
cc foo.c 
```

另一个有用的技巧是将诡计隔离到单个头文件中，该文件由您自己编写的程序生成：

```
./generate-trickery --greet 'J. Random Person' > foo.h 
```

其中 foo.h 看起来像这样：

```
#define GREET(x) ("J. Random Person greets you, " #x) 
```

如果您将它与 Makefile 或其他一些自动化结合在一起，它将非常无缝，不会过多地妨碍您的开发。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T06:17:47.960

不，你不能那样做。

您可以从另一个宏引用一个宏，但不能从另一个宏定义一个宏。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-09T09:10:41.480

如果您正在尝试创建一段可以多次调用以执行略有不同的事情的预处理器代码，那么您可以执行此操作的一种（适度糟糕的）方法是将代码隔离到一个`.h`文件中，然后再执行`#include`几次。这个想法是，每次你`#include`“调用你的例程”文件时——你“传递参数”首先`#define`是包含文件引用的某些预处理器常量。

我看到这很有用的一个地方是生成“智能”枚举，这些枚举可以转换为/从它们的“字符串化”形式转换（这对 I/O 很有用）。您创建一个`.h`包含例如的文件

```
ENUMVAL(foo)
ENUMVAL(bar)
ENUMVAL(baz) 
```

然后是`#include`这个文件两次：一次 where`ENUMVAL()`以创建`enum`声明的方式定义，一次 when`ENUMVAL()`以生成字符串化名称数组的方式定义。通过这种方式，您无需多次指定实际令牌列表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-09T18:50:40.943

```
#define definer(x) #define #x? 
```

#x 是 x 的字符串化。您不能#define 字符串标记。（#define "foo"。）它必须是一个标识符**[a-zA-Z0-9_]***令牌。

你**不能**像这样嵌套#define。#define 中不能有#define。

您**可以**在#if 块中包含#if。

```
#ifdef FOO

#ifdef BAR
 ...
#else // BAR
 ...
#endif // BAR

#else // FOO
 ...
#endif //FOO 
```

对于可以在#if 宏中使用的表达式，您也受到了一些限制。但有时你可以解决这个问题。例如：

```
 /* Use CONCATENATE_4_AGAIN to expand the arguments to CONCATENATE_4 */
#define CONCATENATE_4(      a,b,c,d)  CONCATENATE_4_AGAIN(a,b,c,d)
#define CONCATENATE_4_AGAIN(a,b,c,d)  a ## b ## c ## d

    /* Creates a typedef that's legal/illegal depending on EXPRESSION.       *
     * Note that IDENTIFIER_TEXT is limited to "[a-zA-Z0-9_]*".              *
     * (This may be replaced by static_assert() in future revisions of C++.) */
#define STATIC_ASSERT( EXPRESSION, IDENTIFIER_TEXT)                     \
  typedef char CONCATENATE_4( static_assert____,      IDENTIFIER_TEXT,  \
                              ____failed_at_line____, __LINE__ )        \
            [ (EXPRESSION) ? 1 : -1 ] 
```

加上类似的东西：

```
STATIC_ASSERT( sizeof(int1) == 1, sizeof_int1_equal_1 ); 
```

（是的，我知道*#include <stdint.h>*。这只是一个例子。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-10T03:10:19.050

尽管您的语法无效，但您的问题的答案在技术上是肯定的。但这只能通过使您的代码不可读和不可维护的讨厌的技巧来完成。

另见： http: [//www.ioccc.org/years.html#1995_vanschnitz](http://www.ioccc.org/years.html#1995_vanschnitz)和[http://www.ioccc.org/years.html#2004_vik2](http://www.ioccc.org/years.html#2004_vik2)

# matlab - 更好的（非线性）分箱

> ID：427221
> 
> 赞同：2
> 
> 时间：2009-01-09T06:14:29.620
> 
> 标签：matlab, matrix

我问的最后一个问题是关于如何按 x 坐标对数据进行分箱。解决方案简单而优雅，我很惭愧我没有看到它。这个问题可能更难（或者我可能只是盲目）。

我从大约 140000 个数据点开始，将它们分成 70 个沿 x 轴等距分布的组，然后取每组的平均位置 (x_avg, y_avg) 并绘制它们；一条漂亮的曲线出现了。不幸的是有两个问题。首先，边缘的人口比图的中心少得多；其次，某些领域的变化比其他领域更大，因此需要更好的解决方案。

因此，我有两个具体问题和一个提出建议的一般邀请：

matlab 是否具有将矩阵拆分为固定数量的较小矩阵或固定大小的较小矩阵的内置方法？

是否有算法（或 matlab 函数，但我发现不太可能）来确定更精细地对感兴趣区域进行分类所需的边界？

更一般地说，有没有更好的方法将数以万计的数据点浓缩成一个整齐的趋势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T15:30:55.433

听起来您想使用大小根据 x 值的密度而变化的箱。我认为您仍然可以像在上一篇文章的答案中一样使用 HISTC 函数，但您只需要给它一组不同的边。

我不知道这是否正是您想要的，但这里有一个建议：不要将 x 轴分成 70 个等间距的组，而是将排序的 x 数据分成 70 个相等的组并确定边缘值。我认为这段代码应该可以工作：

```
% Start by assuming x and y are vectors of data:

nBins = 70;
nValues = length(x);
[xsort,index] = sort(x);  % Sort x in ascending order
ysort = y(index);         % Sort y the same way as x
binEdges = [xsort(1:ceil(nValues/nBins):nValues) xsort(nValues)+1];

% Bin the data and get the averages as in previous post (using ysort instead of y):

[h,whichBin] = histc(xsort,binEdges);

for i = 1:nBins
    flagBinMembers = (whichBin == i);
    binMembers = ysort(flagBinMembers);
    binMean(i) = mean(binMembers);
end 
```

这应该为您提供大小随数据密度而变化的箱。

* * *

更新：另一个版本...

这是我在几条评论后提出的另一个想法。使用此代码，您可以为 x 中相邻数据点之间的差异设置阈值 (maxDelta)。任何与其较大邻居相差大于或等于 maxDelta 的 x 值都将被强制放在自己的 bin 中（全部由他们的 lonsome）。您仍然可以为 nBins 选择一个值，但是当展开的点被降级到它们自己的 bin 时，最终的 bin 数量将大于此值。

```
% Start by assuming x and y are vectors of data:

maxDelta = 10; % Or whatever suits your data set!
nBins = 70;
nValues = length(x);
[xsort,index] = sort(x);  % Sort x in ascending order
ysort = y(index);         % Sort y the same way as x

% Create bin edges:

edgeIndex = false(1,nValues);
edgeIndex(1:ceil(nValues/nBins):nValues) = true;
edgeIndex = edgeIndex | ([0 diff(xsort)] >= maxDelta);
nBins = sum(edgeIndex);
binEdges = [xsort(edgeIndex) xsort(nValues)+1];

% Bin the data and get the y averages:

[h,whichBin] = histc(xsort,binEdges);

for i = 1:nBins
    flagBinMembers = (whichBin == i);
    binMembers = ysort(flagBinMembers);
    binMean(i) = mean(binMembers);
end 
```

我在几个小样本数据集上对此进行了测试，它似乎做了它应该做的事情。希望它也适用于您的数据集，无论它包含什么！=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T06:31:57.027

我从来没有使用过 matlab，但是从你之前的问题来看，我怀疑你在寻找类似[Kdtree](http://en.wikipedia.org/wiki/Kdtree)或变体的东西。

**澄清：**由于这似乎有些混乱，我认为一个伪代码示例是有序的。

```
// Some of this shamelessly borrowed from the wikipedia article
function kdtree(points, lower_bound, upper_bound) {
    // lower_bound and upper_bound are the boundaries of your bucket
    if(points is empty) {
        return nil
    }
    // It's a trivial exercise to control the minimum size of a partition as well
    else {
        // Sort the points list and choose the median element
        select median from points.x

        node.location = median;

        node.left = kdtree(select from points where lower_bound < points.x <= median, lower_bound, median);
        node.right = kdtree(select from points where median < points.x <= upper_bound, median, upper_bound);

        return node
    }
}

kdtree(points, -inf, inf)

// or alternatively

kdtree(points, min(points.x), max(points.x)) 
```

# asp.net-mvc - Lambda ForEach() 索引位置

> ID：427226
> 
> 赞同：1
> 
> 时间：2009-01-09T06:16:56.013
> 
> 标签：asp.net-mvc, lambda

这有点与 asp.net MVC 相关，仅用于示例目的，但我希望实现这样的目标：

```
new SelectList(ViewData.Model.Formats.ToList().ForEach(x => index + " - " + x.Name), "ID", "Name"); 
```

基本上尝试变得聪明并将“索引”作为数字 1 - *n*返回，其中*n*是列表中的项目数，`ViewData.Model.Formats`因此我的选择列表在每个条目上都有一个 # 前缀。有什么简单的方法可以做到这一点，或者我是否正在考虑使用该附加项创建一个新列表并放弃 lambda 技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T06:36:30.170

您可以使用 LINQ 的 Select 可以为您提供每个元素的索引的事实：

```
new SelectList(ViewData.Model.Formats.Select((x, i) => (i + 1) + " - " + x.Name, "ID", "Name"); 
```

请注意，这并不意味着任何数据库访问，只是标准 LINQ to Objects。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T06:23:21.257

怎么样

```
int index = 0;
new SelectList(ViewData.Model.Formats.ForEach(x => ++index + " - " + x.Name), "ID", "Name"); 
```

（我只尝试了捕获 的 lambda 表达式`index`。我不知道其他类。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-01-09T07:06:16.257

在 Neil 和 Hosam 的大力帮助下，我完成了以下工作：

```
new SelectList(ViewData.Model.MessageTypeFieldFormats.Select((x, i) => new { ID = x.ID, Name = (i + 1) + " - " + x.Name }) 
```

匿名方法摇滚！

# cron - 如何外包定期任务（即在“云”中）？

> ID：427229
> 
> 赞同：2
> 
> 时间：2009-01-09T06:19:25.320
> 
> 标签：cron, amazon-ec2, cloud, vps, webcron

假设客户对您创建脚本以完成收集一些信息并输出大量数据库文件的任务所做的工作感到满意。然后，他们有兴趣让任务在没有人工干预的情况下定期（大约每月）运行。客户对在本地运行任务不感兴趣，因此您不得不寻找其他地方来完成它——在某个地方，尽管听起来很古怪，“在云中”。

您将使用哪些技术/服务来廉价地完成此任务？

到目前为止我探索过的事情：

*   [亚马逊 EC2](http://aws.amazon.com/ec2/)。听起来是个好主意，但没有明显的方法可以按计划停止和重新启动实例。每月支付超过 70 美元来保持实例运行 cron 但没有做任何有用的事情似乎是一种浪费。
*   咬紧牙关，为虚拟专用服务器 (VPS) 付费。但是，如果该任务每个月只运行几个小时，即使每月支付 20 美元（例如[Slicehost](http://www.slicehost.com/)）似乎也有点过头了。
*   共享主机帐户和[WebCron](http://www.webcron.org/)。似乎有点 MacGyverish 并且可能违反了许多共享托管服务的 ToS，这些服务通常不适合长时间运行的任务。

你有这些或任何其他选择的经验吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T06:33:50.423

我会使用亚马逊 EC2。只需启动一个实例，将脚本复制到实例，将其添加到启动例程中，并将关闭附加到脚本的末尾。将其捆绑到您自己的映像中并关闭实例。现在你可以每月启动你自己的镜像，它会执行脚本并关闭。使用 m1.small 实例只需支付 10 美分/小时。

您只需要每月手动启动实例或让您的客户安装一个小的每月 cronjob 来启动实例。

注意：shutdown -h 是必需的，否则实例将重新启动而不是停止

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T06:49:15.353

我会硬着头皮买一个 VPS，6 个月后你几乎肯定会发现你已经找到了更多的用途。

我使用允许这样做的共享托管服务，并将其用于夜间同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T06:42:26.680

在 EC2 上运行任务本身实际上听起来很相关，但在 EC2 上运行 cron 本身确实是浪费。

我想不出如何在不属于你的机器上运行 cron。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T10:03:08.667

您可以使用[http://guardiano.pm](http://guardiano.pm)，然后创建一个工作并在需要时调用您的 api。Guradiano 将调用 your/api/dothat 并且应用程序将执行一些任务。确保安全的一种方法是在请求中发送一些参数，并且只有发送了正确的参数，您才会执行该操作。

# javascript - Javascript拖放网格

> ID：427230
> 
> 赞同：9
> 
> 时间：2009-01-09T06:20:11.403
> 
> 标签：javascript, drag-and-drop

我正在寻找一个脚本，它可以让我拥有一个可拖动的 div 网格（用于组织[图像缩略图](http://imgfave.com/?view=thumb)）。因此，当一个 div 被拖到另一个 div 上时，div 会移动以创建一个空白点来放置 div。

我知道 jQuery 有一个拖放库，但它似乎不允许我需要的功能（捕捉到网格并移动周围的 div）。

任何人都知道有我需要的脚本或框架吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T06:34:44.103

看看[JQuery](http://www.jquery.com)，更具体地说，[JQuery UI](http://ui.jquery.com/) ，因为它具有“可拖动”、“可放置”、“可排序”和各种其他复杂组件。

这是您正在寻找的[拖放网格](http://ui.jquery.com/demos/sortable#floating)的具体示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-04T11:09:41.150

5 年后，我想这就是你要找的东西：[https ://github.com/uberVU/grid](https://github.com/uberVU/grid)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-21T02:35:20.307

不是专门用于图像，但肯定可以这样使用，但[http://gridster.net/](http://gridster.net/)看起来很不错，因为它能够拖放项目并让它们重新洗牌以适应。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-04T06:12:05.820

也许我的**REDIPS.drag**库会有所帮助。它使用表（一个或多个）作为下拉网格。任何带有 class="drag" 的 DIV 元素都可以跨表格单元格拖动。库还可以选择为以下事件编写 JS 代码：drop、clone、delete、move ... 它灵活且易于使用，这里是演示页面的链接：

[http://www.redips.net/my/preview/REDIPS_drag/](http://www.redips.net/my/preview/REDIPS_drag/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-09T13:32:00.633

另一种选择是[jQuery.Shapeshift](http://mcpants.github.io/jquery.shapeshift/)；它很像[Gridster.js](http://gridster.net/)，但更具适应性。

# php - 在 MySQL 和 PHP 中使用单行查询

> ID：427235
> 
> 赞同：3
> 
> 时间：2009-01-09T06:21:49.340
> 
> 标签：php, mysql

说我有这个

```
$result =  mysql_query('SELECT views FROM post ORDER BY views ASC'); 
```

我想使用我认为我会使用的索引 30 处的值

```
mysql_data_seek($result, 30);
$useableResult = mysql_fetch_row($result);
echo $useableResult . '<br/>'; 
```

但这正在归还我的整张桌子

我做错了什么？

编辑：糟糕，我实际上有

```
mysql_data_seek($result, 30);
while($row = mysql_fetch_row($result)){
    echo $row['views'] . '<br/>';
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T06:30:27.250

只需使用 SQL WHERE 子句。

```
$result = mysql_query('SELECT views FROM post WHERE ID=30') 
```

如果您不想通过 ID 而是想要返回的第 30 个项目，您可以使用 LIMIT min, max：

```
$result = mysql_query('SELECT views FROM post LIMIT 30, 1') 
```

在这两种情况下，您的 ORDER BY 命令都变得不必要了。

这是LIMIT 命令在大型记录集上进行分页的一个[很好的用法示例。](http://www.php-mysql-tutorial.com/wikis/php-tutorial/paging-using-php.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T08:03:00.370

您的第一个示例实际上会执行您想要的操作，但是非常昂贵。第二个是选择整个表格，移动到结果的第 30 行，然后从那时起循环遍历所有结果。

您应该改为执行以下操作，这将只返回一行并且速度更快：

```
$result =  mysql_query('SELECT views FROM post ORDER BY views ASC LIMIT 30,1'); 
```

请注意，Soviut 对 LIMIT 的解释并不完全正确——它是 (offset, number of rows) 而不是 (min, max)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T06:31:08.043

您确定 $result 中有 30 个元素吗？您可能想检查是否 30 > mysql_num_rows()。

# ant - 如何让 Ant INCLUDE 文件集优先于 EXCLUDE

> ID：427249
> 
> 赞同：10
> 
> 时间：2009-01-09T06:32:51.847
> 
> 标签：ant, include, fileset

如果我有这样的文件集：

```
<fileset dir=".">
  <exclude name="classes/*"/>
  <include name="**/zar.class"/>   
</fileset> 
```

排除优先于包含，我最终没有任何类。[因为对于这个假设的例子，zar.class 在类目录中] 我想包含 zar 文件，即使它在类目录中。

我用头撞了一会儿，阅读了有关选择器、模式集、文件集、尝试组合文件集等的信息，但无法使其正常工作。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T08:46:21.797

为什么需要排除元素？

```
<fileset dir=".">
  <include name="**/zar.class"/>   
</fileset> 
```

应该为您提供您所追求的确切文件集：zar.class，而不是`.class`classes/ 中的其他文件。

* * *

只需将其置于社区 wiki 模式，因为我不确定，再想一想，这实际上是你所追求的：
你可能想要*一切*，包括 classes/.../zar.class，除了 classes/....

我的解决方案只会给你 zar.class。

请发表评论：如果这不是一个好的解决方案，我将删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T07:01:31.367

我不确定您到底想要什么，但我认为您在查看模式集方面走在了正确的轨道上：怎么样：

```
<patternset id="a">
  <exclude name="classes/*"/>
</patternset>

<patternset id="b">
  <include name="**/zar.class"/>  
</patternset>

<fileset dir=".">
  <patternset refid="a" />
  <patternset refid="b" />
</fileset> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-01-25T14:22:32.017

原始问题中使用了哪个版本的 Ant？

使用 Ant 1.8.2，该节**确实产生了预期的结果**！？

```
<fileset dir="." id="some.fileset">
    <exclude name="build/classes/*" />
    <include name="**/A.class" />
</fileset>

<target name="test">
    <pathconvert pathsep="${line.separator}" property="listed.fileset" refid="some.fileset"/>
    <echo message="${listed.fileset}" />
</target> 
```

路径和名称略有不同，但这**确实显示**了 A.class，而*没有*显示紧邻它的 B.class。

# javascript - 我可以只在我的 HTML 标签上添加属性吗？

> ID：427262
> 
> 赞同：44
> 
> 时间：2009-01-09T06:49:16.133
> 
> 标签：javascript, html

我是否可以向 HTML 标记添加任何我想要的属性，以便以后可以使用 javascript 检索它们的值？例如：

```
<a href="something.html" hastooltip="yes" tipcolour="yellow">...</a> 
```

如果这不起作用，您将如何存储这样的任意信息？

**编辑：**由于似乎构成 HTML 属性在技术上无效，因此我在这里将这个问题的第二部分改写为自己的问题：[如何为某些 HTML 标记存储任意数据](https://stackoverflow.com/questions/432174/)

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-01-10T15:20:42.960

在 HTML5 中，是的。您只需在它们前面加上`data-`. 请参阅[规范](https://www.w3schools.com/tags/att_global_data.asp)。

当然，这意味着您应该使用 HTML5 文档类型 ( `<!doctype html>`)，即使浏览器不在乎。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-01-09T07:03:33.047

好吧，您总是可以创建自己的 DTD 来为您的标签获取新的有效属性。浏览器不会打嗝，如果您可以访问这些自定义属性，您应该测试您的 JavaScript。或者，您可以使用 HTML 和 CSS 提供的现有设施。您可以使用多个类，例如

```
<a href="..." class="class-one class-two has-tooltip"> 
```

对于颜色选择，我强烈建议您在 HTML 中使用硬编码的颜色名称，您可以使用 CSS 来声明样式。使用 class 属性作为 CSS 声明的钩子，并选择*语义*类名称，例如

HTML：

```
<a href="..." class="has-tooltip common-tooltip">
<a href="..." class="has-tooltip long-tooltip"> 
```

CSS：

```
a.has-tooltip {
   colour: red;
}
a.common-tooltip {
   background: #ddd;
}
a.long-tooltip {
   background: #ebf;
} 
```

在您的 JavaScript 代码中，您可以生成带有“long-tooltip”和“common-tooltip”等类的元素，而不是“yellow-tooltip”，因此在重新设计页面以具有绿色工具提示的情况下，您不会自相矛盾。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T06:50:48.907

你可以。该页面不会通过验证，但大多数浏览器都会接受它。

这几乎可以肯定是错误的做法。尝试使用 class="hasTooltip_yes tipcolour_yellow"

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T06:54:14.080

根据您要存储的信息，您应该查看其他一些可用的属性。这些看起来不是很好的候选者，但“rel”已被用于许多有趣的事情。

# asp.net - ASP.Net 会话超时检测：Session.IsNewSession 和 SessionCookie 检测是最好的方法吗？

> ID：427264
> 
> 赞同：7
> 
> 时间：2009-01-09T06:49:50.360
> 
> 标签：asp.net, session, timeout

当我的 ASP.Net 会话超时（以及表单身份验证）并且我尝试点击一个页面时，我会自动重定向到我的默认 login.aspx 页面。

在页面加载之前，我需要确定这是否是超时情况，如果是 - 重定向到 timeout.aspx。

下面的文章指定如果 IsNewSession 为真，并且存在 sessionID cookie - 那么您将遇到超时情况。

但是在我的测试中，我遇到了超时并尝试再次登录的情况，并且 IsNewSession 等于 true 并且 sessionId cookie 仍然存在（因为它会保留整个浏览器会话），因此它说我已经计时- 当我试图重新登录时再次退出。

有没有更好的方法来完成这一切？

技术[在这里](http://www.eggheadcafe.com/articles/20051228.asp)和[这里](http://blogs.msdn.com/nikhiln/archive/2007/06/21/detecting-session-timeout-in-asp-net-2-0-web-applications.aspx)描述。

在我的“global.asax”文件中，我有：

```
void Application_PreRequestHandlerExecute(object sender, EventArgs e)
{
        // Check if session state is enabled in web.config
        if (Context.Session == null) return;

        if (Session["user"] == null) 
        {
            if (Session.IsNewSession)
            {                    
                HttpCookie sessionCookie = Request.Cookies["ASP.NET_SessionId"];
                if ((null != sessionCookie) && !string.IsNullOrEmpty(sessionCookie.Value))
                {
                    /* Session Timeout! */
                    FormsAuthentication.SignOut(); //just in case not done yet
                    Session.Abandon();
                    Response.Redirect("timeout.aspx");
                }
                else
                {
                    // Cookie didn't exist - must be a brand new login
                    return;
                }
            }
            else
            {
                // If there is no session data and the session is not new then it must be the postback of the login screen.
                if ((HttpContext.Current.Request.Path.ToLower().LastIndexOf("/login.aspx") >= 0) && (Request.HttpMethod == "POST"))
                {
                    return;
                }
            }
        }    
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T09:34:36.037

您正在尝试区分超时会话和手动注销的会话？

您的问题是，由于会话数据已经消失，您所要做的就是进来的新请求创建了一个新会话，并且进来的请求带有会话 ID cookie（表明它之前已经登录过）。

有两种方法。

**曲奇饼：**

首先在您的登录页面中，您可以创建一个额外的 cookie 来指示用户的登录状态。当用户手动注销时，cookie 值被修改以指示注销。会话超时后的请求除了具有`IsNewSession`true 外，还会有一个登录状态 cookie，显示用户仍处于登录状态，从而表明用户没有手动选择注销。

**数据库：**

第二种方法是将 sessionID 与登录状态一起存储在数据库表中。登录成功后，将 sessionID 输入到 LoggedOnSessions 表中。当用户手动注销时，从表中删除 sessionID。因此，您的超时检测可以包括在表中查找会话 ID（如果存在超时）（此时您可能也应该删除该 ID）。

出于管理目的，您应该包含一个到期日期时间字段，该字段设置的时间比任何实际登录期（例如一周）要长得多。定期（例如，每周）删除表中已过期的条目。

我的偏好是我讨厌设置 cookie 的数据库方法，因为它让我很恼火，那个 cookie 随每个请求一起发送，但很少需要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-19T12:53:09.437

您也可以在标签*authentication*下查看 web.config 文件。这应该看起来像这样：

```
<authentication mode="Windows">
  <forms defaultUrl="Default.aspx" loginUrl="Login.aspx" name=".aspxAuth">
  </forms>
</authentication> 
```

注意属性*mode*，它可能在 web.config 文件中显示 Forms 而不是 Window 。在这种情况下，如果您丢失会话，然后单击任何链接（例如 SalesChart.aspx），ASP.NET 将直接将您带到 Login.aspx 代码隐藏而不是 SalesChart.aspx 代码隐藏，这特别烦人。

如果您尝试 Windows 模式，您将每次都被带到请求的页面 (SalesChart.aspx)，然后您自己决定如果会话丢失要采取什么措施。

# c++ - 为什么 std::auto_ptr operator = 垃圾对象？

> ID：427266
> 
> 赞同：3
> 
> 时间：2009-01-09T06:50:58.610
> 
> 标签：c++, memory, std

似乎 std::auto_ptr 和分配有问题，以至于引用的对象似乎由于某种原因被丢弃了。

```
std::auto_ptr<AClass> someVar = new AClass();  // should work, but mangles content
std::auto_ptr<AClass> someVar( new AClass() ); // works fine.
std::auto_ptr<AClass> someVar = std::auto_ptr<AClass>(new AClass()); // works fine.

std::auto_ptr<AClass> someVar;
someVar.reset( new AClass() ); // works fine. 
```

我已经对其进行了跟踪，并且似乎（通过观察调试器中的值）问题发生在从临时 std::auto_ptr_byref() 传输指针时，该临时 std::auto_ptr_byref() 是为包装 rhs 指针而创建的。也就是说进入auto_ptr(auto_ptr_ref<_Ty> _Right)函数时_Right中的值是正确的，但是离开时_Myptr中的值是垃圾。

```
template<class _Ty>
    struct auto_ptr_ref
        {   // proxy reference for auto_ptr copying
    auto_ptr_ref(void *_Right)
        : _Ref(_Right)
        {   // construct from generic pointer to auto_ptr ptr
        }

    void *_Ref; // generic pointer to auto_ptr ptr
    };

template<class _Ty>
class auto_ptr
    {   // wrap an object pointer to ensure destruction
public:
typedef _Ty element_type;

explicit auto_ptr(_Ty *_Ptr = 0) _THROW0()
    : _Myptr(_Ptr)
    {   // construct from object pointer
    }

auto_ptr(auto_ptr<_Ty>& _Right) _THROW0()
    : _Myptr(_Right.release())
    {   // construct by assuming pointer from _Right auto_ptr
    }

auto_ptr(auto_ptr_ref<_Ty> _Right) _THROW0()
    {   // construct by assuming pointer from _Right auto_ptr_ref
    _Ty **_Pptr = (_Ty **)_Right._Ref;
    _Ty *_Ptr = *_Pptr;
    *_Pptr = 0; // release old
    _Myptr = _Ptr;  // reset this
    }
auto_ptr<_Ty>& operator=(auto_ptr_ref<_Ty> _Right) _THROW0()
{   // assign compatible _Right._Ref (assume pointer)
_Ty **_Pptr = (_Ty **)_Right._Ref;
_Ty *_Ptr = *_Pptr;
*_Pptr = 0; // release old
reset(_Ptr);    // set new
return (*this);
} 
```

起初我以为它搞砸了继承并切断了接口，但是即使该类只有一个父类也会发生这种情况。

如果我们记得的话，我们可以避免做 = new，或者通过使用方括号或更改为在 rhs 上具有显式 std::auto_ptr temp，这当然容易出错。

只是这个版本的库被破坏了，还是我没有得到一些底层的东西？

我们还注意到将 std::auto_ptr 分配给 boot::shared_ptr 的类似问题，尽管我们现在完全删除了它，我不记得是哪种语法导致了这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-09T07:01:56.670

第一行：

```
std::auto_ptr<AClass> someVar = new AClass();  // should work, but mangles content 
```

应该会导致编译器错误。因为没有从原始`AClass`指针到 an的隐式转换`auto_ptr`（带有原始指针的 an 的构造函数`auto_ptr`被标记为`explicit`），所以不允许使用“复制初始值设定项”形式进行初始化。

VC9 给出以下错误：

```
C:\temp\test.cpp(23) : error C2440: 'initializing' : cannot convert from 'AClass *' to 'std::auto_ptr<_Ty>' 
```

我尝试过的其他编译器（GCC 3.4.5、Comeau C/C++ 4.3.10.1、Digital Mars）给出了类似的错误。

编辑：

看起来这实际上是 VS2005 实现中的一个错误`auto_ptr<>`（不确定它是在 SP1 中引入还是从一开始就在 VS2005 中）在 VS2008 中得到修复。这是该问题的 MS Connect 错误记录：

[https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=101842&wa=wsignin1.0](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=101842&wa=wsignin1.0)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T09:05:17.437

VC6 和 VC9 之间的 VC++ 中的已知错误：[http ://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=101842](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=101842)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T06:57:55.430

编辑：迈克尔说得很对，这是一个编译错误，那么您使用的是哪个编译器？您需要调用`reset`以将新值放入 auto_ptr。

# jsf - 如何知道我是否处于回发状态？

> ID：427272
> 
> 赞同：19
> 
> 时间：2009-01-09T06:55:27.323
> 
> 标签：jsf, postback

我读过[`ResponseStateManager`](http://docs.oracle.com/javaee/7/api/javax/faces/render/ResponseStateManager.html)有[`isPostBack()`](http://docs.oracle.com/javaee/7/api/javax/faces/render/ResponseStateManager.html#isPostback%28javax.faces.context.FacesContext%29)方法的 JSF 文档。我如何（以及在​​哪里）有一个实例`ResponseStateManager`？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2011-03-10T22:04:01.073

> *如何知道我是否处于回发状态？*

取决于 JSF 版本。

在 JSF 1.0/1.1 中，没有[`ResponseStateManager#isPostback()`](http://docs.oracle.com/javaee/6/api/javax/faces/render/ResponseStateManager.html#isPostback%28javax.faces.context.FacesContext%29)可用的方法。检查`javax.faces.ViewState`请求参数映射中是否存在可用的参数[`ExternalContext#getRequestParameterMap()`](http://download.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRequestParameterMap%28%29)。

```
public static boolean isPostback() {
    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    return externalContext.getRequestParameterMap().contains("javax.faces.ViewState");
} 
```

在 JSF 1.2 中，确实使用`ResponseStateManager#isPostback()`which 反过来实际检查`javax.faces.ViewState`请求参数映射中参数的存在。

```
public static boolean isPostback() {
    FacesContext context = FacesContext.getCurrentInstance();
    return context.getRenderKit().getResponseStateManager().isPostback(context);
} 
```

在 JSF 2.0 中，改为使用[`FacesContext#isPostback()`](http://download.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isPostback%28%29)，它在幕后实际上委托给`ResponseStateManager#isPostback()`.

```
public static boolean isPostback() {
    return FacesContext.getCurrentInstance().isPostback();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T07:32:01.680

确实，在jsf1.2之前，isPostBack是通过FaceContext[当前实例的requestScope获取的](http://cagataycivici.wordpress.com/2006/06/05/ispostback_in_jsf/)。

从 JSF1.2 开始，ResponseStateManager（StateManager 的帮助类，它知道用于生成响应的特定渲染技术，一个**单例抽象类**，由 RenderKit 提供。）

> 在生命周期的恢复视图阶段，[ViewHandler 检索 ResponseStateManager 对象](http://java.sun.com/javaee/javaserverfaces/reference/docs/customRenderKit.html)以测试请求是回发还是初始请求。
> 
> 如果请求是回发，则调用 ViewHandler 的 restoreView 方法。此方法使用 ResponseStateManager 对象来重新构建组件树并恢复状态。构建树并恢复状态后，在渲染响应阶段再次出现之前，不需要 ViewHandler 实例。

上面提到的那篇文章（[创建和使用自定义渲染工具包](http://java.sun.com/javaee/javaserverfaces/reference/docs/customRenderKit.html)）说明了如何通过 RenderKit（由实现渲染组件的标记的标记处理程序定义）实现/获取 ResponseStateManager。
可能这足以让您在您的上下文中获得自己的 ResponseStateManager 吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-03-10T21:37:56.773

对于 JSF1.2

```
public static boolean isPostback(){
    FacesContext context = FacesContext.getCurrentInstance();
    return context != null && context.getExternalContext().getRequestParameterMap().containsKey(ResponseStateManager.VIEW_STATE_PARAM);
} 
```

# c# - 如何让外部库（如 Html Agility）在我的 C# 项目中工作？

> ID：427280
> 
> 赞同：0
> 
> 时间：2009-01-09T07:02:39.353
> 
> 标签：c#, .net

如何在我的 Visual Studio Express C# 程序中使用免费库，例如 Html Agility？显然我已经下载了。我需要知道的是如何设置它，以便我可以简单地使用“使用”语句来链接类。Html Agility 不附带任何 .dll，所以我需要将其编译为 dll，然后引用该 dll 吗？

如果是这样，您如何在 Visual Studio Express 中编译为 dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T07:12:11.673

由于下载的东西没有任何二进制文件，这意味着你得到的是源代码。所以，你应该知道这是哪种类型的代码。这是.NET 代码吗？（如果是这样，它应该有一个 .csproj 或一个 .vbproj 等文件。）然后它又取决于它是用哪个开发环境构建的。如果它是 Visusl Studio Express 的项目，那么您可以在 Visual Studio Express 版本中构建该项目，否则，恐怕您将无法这样做。

最好的事情是您应该下载二进制文件（dll 等）并通过添加您提到的引用在您的项目中使用它们。否则，您有两个选择。要么构建代码并制作二进制文件，要么直接使用代码，但为此您需要对代码有透彻的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T07:11:16.713

我认为这个[到 msdn 的链接](http://msdn.microsoft.com/en-us/library/ms379606.aspx#usingcsharpexpress_topic8)可能有效：

基本上，使用“构建”创建 dll，然后链接到参考。

# jquery - IE 的 CSS 顶部和左侧有问题吗？

> ID：427284
> 
> 赞同：0
> 
> 时间：2009-01-09T07:04:36.773
> 
> 标签：jquery, css, internet-explorer

下面的 jQuery 代码对我来说在 Safari、Opera、FF2 和 FF3 上运行得很好。它在我的网页上的 FORM 元素顶部放置一个繁忙的 DIV（带有动画的繁忙 GIF）。问题是在 IE6 和 IE7 中，它正确地获得了宽度和高度，但似乎没有正确地获得顶部和左侧。有什么问题？

```
var nH = $('#' + sForm).attr('offsetHeight');
var nW = $('#' + sForm).attr('offsetWidth');
var nT = $('#' + sForm).attr('offsetTop');
var nL = $('#' + sForm).attr('offsetLeft');

$('#busy')
    .css('position','absolute')
    .css('height', nH + 'px')
    .css('width', nW + 'px')
    .css('top', nT + 'px')
    .css('left', nL + 'px')
    .show(); 
```

请注意，在我的页面上，我有多个 FORM 元素。（GIF 很忙的原因是因为我在提交表单时在后台做一个 AJAX 帖子。）

请注意，我还尝试了 jQuery Dimensions Plugin 1.2 的`.position()`top 和 left 值，这有所帮助，但似乎`top`随着我在页面中向下移动，该值变得更加偏离。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T10:46:17.887

现在 jQuery（最新的公开发行版）包含维度作为核心功能。

尝试使用 $(element).offset() （它返回一个具有“left”和“top”属性的对象）。我已经使用了很多，并且非常适合许多浏览器（ie6/7、opera、safari、chrome、ff2/3）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T07:27:51.313

我让它与 jQuery Dimensions Plugin 1.2 的 top 和 left 的 .position() 值一起使用。（它返回一个数组，您可以在其中获取顶部和左侧数组值。）解决方法是我必须为 IE6 设置陷阱，然后为顶部减去一些固定数字（在我的情况下为 12px），然后在高度上添加相同的数字。在 IE7 上，我可以做同样的事情，但由于某种原因，必须在前 200 像素或更少的像素上进行不同的顶部和高度数学运算。您的情况可能会有所不同，具体取决于您之前的 CSS、reset.css 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T09:16:12.687

您确定元素设置为 display:block 吗？您还可以通过传递这样的哈希来避免多次调用 css 函数：

```
$('#busy')
    .css({'position':'absolute',
          'height': nH + 'px',
          'width', nW + 'px',
          'top', nT + 'px',
          'left', nL + 'px'})
    .show(); 
```

# asp.net - 在 asp.net 会话状态下注入

> ID：427287
> 
> 赞同：1
> 
> 时间：2009-01-09T07:08:46.860
> 
> 标签：asp.net, session, dependency-injection, inversion-of-control, ninject

我正在使用框架集成中的 BasePage 和 BaseMaster 在 Web 应用程序上使用 Ninject。我想做的是注入一个对象并在每个会话上创建一个新实例。我查看了 OnePerRequest 行为，它很接近，但并不完全。我正在做的是执行大量计算，这些变量保存在注入页面的对象中。我需要这些对象保留以进行回发，但是每次用户“访问”该站点时，我都想要一个新的对象实例。我最初的想法是以某种方式使用 Asp.net Session 对象来存储回发之间的值，这是我在 Ninject 之前会这样做的方式（只是将对象存储在会话中。但我想在如果可以的话，正确的方法。我 我愿意接受其他建议。我考虑过使用单例，但每个用户都需要自己的对象副本，否则他们会相互计算。

我希望这很清楚，对于使用现有行为或创建自己的行为的任何建议，我将不胜感激。也许使用应用程序缓存或内置的 ASP.NET 缓存可以工作。

谢谢

乔什

# c++ - 访问 COM 接口方法 C++

> ID：427289
> 
> 赞同：1
> 
> 时间：2009-01-09T07:10:22.737
> 
> 标签：c++, com, oleview

两个都：

*   CLSID
*   独立身份证

已指定上述内容，并使用：

*   协同创建实例（）

返回由上面的 CLSID 指定的类的单个未初始化对象。

然后如何从 C++ 访问接口的方法？没有：

*   ATL
*   MFC
*   只是普通的 C++

之后，我使用 CreateInstance()

我遇到了麻烦，使用 CreateInstance() - 最后一个参数 - ppv

使用oleview，可以看到上面指定的IIDabove IID的方法，比如：

```
interface IS8Simulation : IDispatch {
    HRESULT Open([in] BSTR FileName);
}; 
```

我怎样才能访问上述内容？示例/指导 - 请

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T07:20:57.943

通过执行 CoCreateInstance，您将获得一个接口指针。通过 QueryInterface(...) 方法，您可以轻松获取其他接口的接口指针。例如，

```
 IUnknown* pUnk = NULL;
HRESULT hr = ::CoCreateInstance(clsid,NULL,CLSCTX_ALL,__uuidof(IUnknown),(void**)&pUnk);

IS8Simulation* pSim = NULL;
hr = pUnk->QueryInterface(__uuidof(IS8Simulation), (void**)&pSim); 
```

`完成此操作后，您将在 pSim 中获得指向 IS8Simulation 的指针，并通过它调用该接口的方法。请记住，您需要在 CoCreateInstance 调用中提供有效的 clsid。`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T07:19:47.273

实际问题是什么有点模糊。一些代码会有所帮助。但是猜一猜，你需要QueryInterface吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T10:17:25.903

```
 IS8Simulation* pSim = NULL;
 hr = pUnk->QueryInterface(__uuidof(IS8Simulation), (void)&pSim); 
```

我会尝试上述方法，但是否声明了 IS8Simulation - 请原谅我缺乏对**COM**的理解

此外，如何使用**普通 C++**调用该方法：

```
HRESULT Open([in] BSTR FileName) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:36:29.993

您可能想要#import "something.dll"。这将为您提供像 IS8Simulation 这样的类型的 C++ 声明，类似于 #include "something.h" 会做的事情。

# php - 如何通过 phpmyadmin 导入非常大的查询？

> ID：427297
> 
> 赞同：4
> 
> 时间：2009-01-09T07:12:15.527
> 
> 标签：php, mysql, timeout, phpmyadmin

如果我的主机不允许我将文件直接上传到我的 mysql 文件夹，我只能通过 phpmyadmin 这样做？除了其本机导入功能之外还有其他选择，以便在上传大约 8mb 的查询时我的连接不会超时？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-09T07:16:59.777

您可以 gzip 或 bzip 文件，phpMyAdmin 将解压缩并运行脚本。

否则我过去必须做的就是将我的 SQL 拆分为多个文件并单独加载每个文件。您可以简单地通过在文本编辑器中打开 SQL 文件，向下滚动到大约一半，找到语句的开头并将之后的所有内容移动到另一个文件中来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T07:30:42.853

不要将 phpmyadmin 用于任何关键的事情。绝对不要使用它来创建备份或进行恢复。这是一袋垃圾。

登录到您的 shell 并使用 mysql 命令行客户端以标准方式恢复数据库。如果你不能做到这一点，请找一个更好的供应商。

使用 mysql 数据库需要 Shell 访问。

不要指望 phpmyadmin 所做的任何事情都不会破坏您的所有数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T08:48:03.977

[大转储？](http://www.ozerov.de/bigdump.php)

> 大型和超大型 MySQL 转储（如 phpMyAdmin 2.x 转储）的交错导入，即使通过具有硬运行时限制和安全模式的 Web 服务器也是如此。该脚本仅执行大转储的一小部分并自行重新启动。下一个会话从上次停止的地方开始。

您可以使用 FTP 客户端（这将允许您恢复传输）上传转储，然后在本地加载它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-02T13:31:00.157

我肯定会说 BigDump。我对 8.3 GB 的 sql 文件有这个确切的问题。阅读这篇文章了解更多信息。[How To Upload a Big SQL File To MySQL](http://vidiame.com/databases/how-to-upload-a-big-sql-file-to-mysql)也可以访问[脚本主页](http://www.ozerov.de/bigdump.php)下载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-18T00:24:09.710

在这里查看我的答案：[https ://stackoverflow.com/a/33728744/74585](https://stackoverflow.com/a/33728744/74585)

如果在导入操作期间取消选中部分导入 -> 允许中断导入...然后 phpMyAdmin 似乎将整个内容发送到处理缓慢的 mysql。不幸的是，phpMyAdmin（至少在我的共享主机上）将不再响应请求，但使用不同 IP 地址上的浏览器可以工作，让您监控查询的进度。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-03-22T09:14:28.550

我说 - 使用[Sypex Dumper](http://sypex.net/en/)。

# java - 阻塞而不用Java旋转？

> ID：427306
> 
> 赞同：4
> 
> 时间：2009-01-09T07:18:18.917
> 
> 标签：java, multithreading

Java 中的某些方法会阻塞，直到它们可以执行某些操作，例如 ServerSocket.accept() 和 InputStream.read()，但我并不容易找到它是如何做到的。我能想到的最接近的事情是每次都有一个 Thread.sleep() 的 while() 循环，但是睡眠时间越长，阻塞的响应越少，睡眠时间越短，发生的旋转越多。

我有两个问题：

1.  各种标准功能（如上面的功能）如何阻塞？本机代码？while() 循环？还有什么？

2.  我应该如何实现阻塞的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-09T07:23:51.383

由于底层平台（即本机代码），您列出的操作会阻塞。

您可以使用 Java 的`Object.wait()`和`Object.notify()`方法来实现一个块；`wait()`将阻塞调用线程，直到另一个线程调用`notify()`同一个锁。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T08:58:01.850

(1) 的基本答案是“不用担心——操作系统会处理它”。对诸如从输入流中读取之类的调用本质上是围绕操作系统调用的包装器。在操作系统内部，我认为在这些情况下调用“阻塞”时通常发生的情况是操作系统“知道”它正在等待来自磁盘控制器的硬件中断来表示这样 - 并且- 这样请求的数据现在可用，并且它知道线程 X 是请求该数据的那个。所以它不会在线程 X 中再次调度，直到它接收到那个中断（或者一个中断说“有一个错误”等）。（然后，线程调度算法的一部分会做一些事情，比如当等待的数据可用时，给等待线程一个临时的“提升”。

在（2）中，我建议更多地考虑“我该如何做可能会发生阻塞的事物 X”。我认为答案几乎永远不会是你想要做的事情是故意只是“阻止”，无论事情 X 是什么，都可能有一个库方法/类可以为你做这件事。例如（链接包括我写的关于这些主题的一些材料）：

*   如果您想在某个队列/提供程序可用时接收下一条消息/作业，请查看[阻塞队列](http://www.javamex.com/tutorials/synchronization_producer_consumer_2.shtml)
*   如果您需要通过对象上的“锁”来控制对共享资源的访问，并在必要时等待锁变为可用，请考虑普通的旧同步或[显式锁](http://www.javamex.com/tutorials/synchronization_concurrency_9_locks.shtml)；
*   如果您想等待许多*池资源*之一可用，请查看[信号量](http://www.javamex.com/tutorials/synchronization_concurrency_semaphore.shtml)

我想说的是，Java 5 并发 API 很大程度上弃用了原始的等待/通知机制。无论你在做什么，自旋锁通常是最后的手段。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T07:29:21.483

要回答 (2)，您希望 Object 方法等待、通知和 notifyAll。

使用 Object.wait() 时，您必须将等待包含在一个循环中，该循环检查您正在等待的条件。wait() 方法可能会虚假返回（出于微妙的原因）。

此外，您需要考虑是否需要使用 notify() 或 notifyAll() - 如果所有等待线程都在等待完全相同的条件，并且您只需要一个来处理您要通知的任何内容，您可以使用 notify()，否则您需要使用 notifyAll()，因为您无法保证在 notify() 上会通知哪个线程 - 例如，您不能期望它们是循环的。

最后，一定要看看 java.util.concurrent 包——它比使用 Java 原语对常见的线程问题有许多更高级别和更好的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T07:25:13.550

我可以回答第 1 部分。他们使用操作系统来处理它，因为每个操作系统已经内置了信令和阻塞，作为启用多任务的一部分。

通常，如果您必须实现自己的旋转锁代码，那么要么您使用了错误的方法。旋转也减少了任何形式的电源管理，即使有良好的睡眠，代码仍然必须醒来才能什么都不做。

# c# - HttpListener 服务器头 c#

> ID：427326
> 
> 赞同：10
> 
> 时间：2009-01-09T07:30:12.433
> 
> 标签：c#, http, httplistener

我正在尝试为个人项目编写 C# http 服务器，我想知道如何将返回的服务器标头从 Microsoft-HTTPAPI/2.0 更改为其他内容？

```
 public class HttpWebServer
    {
        private HttpListener Listener;

        public void Start()
        {
            Listener = new HttpListener();
            Listener.Prefixes.Add("http://*:5555/");
            Listener.Start();
            Listener.BeginGetContext(ProcessRequest, Listener);
            Console.WriteLine("Connection Started");
        }

        public void Stop()
        {
            Listener.Stop();
        }

        private void ProcessRequest(IAsyncResult result)
        {
            HttpListener listener = (HttpListener)result.AsyncState;
            HttpListenerContext context = listener.EndGetContext(result);

            string responseString = "<html>Hello World</html>";
            byte[] buffer = Encoding.UTF8.GetBytes(responseString);

            context.Response.ContentLength64 = buffer.Length;
            System.IO.Stream output = context.Response.OutputStream;
            output.Write(buffer, 0, buffer.Length);
            output.Close();

            Listener.BeginGetContext(ProcessRequest, Listener);
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T15:10:52.917

HttpListener 类封装了本机 API [HttpSendHttpResponse Function](http://msdn.microsoft.com/en-us/library/aa364499(VS.85).aspx)，如链接中所述，它将始终将荒谬的文本附加到服务器标头信息中。

没有办法解决这个问题，除非你想从头开始编写 HttpListener 。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-19T19:41:04.547

我知道我来晚了，但我最近只是在尝试做同样的事情，我不小心遇到了一个可行的解决方案，但我不确定它是否有任何影响。

```
Response.Headers.Add("Server", "\r\n\r\n"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T07:53:20.857

我确实尝试过，但它与我的个人服务器 Microsoft-HTTPAPI/2.0 一起返回

我也用过，没有成功，设置，删除，添加，addheader

```
private void ProcessRequest(IAsyncResult result)
        {
            HttpListener listener = (HttpListener)result.AsyncState;
            HttpListenerContext context = listener.EndGetContext(result);

            string responseString = "<html>Hello World</html>";
            byte[] buffer = Encoding.UTF8.GetBytes(responseString);
            context.Response.ContentLength64 = buffer.Length;

            //One
            context.Response.AddHeader("Server", "My Personal Server");

            //Two
            context.Response.Headers.Remove(HttpResponseHeader.Server);
            context.Response.Headers.Add(HttpResponseHeader.Server, "My Personal Server");

            //Three
            context.Response.Headers.Set(HttpResponseHeader.Server, "My Personal Server");

            System.IO.Stream output = context.Response.OutputStream;
            output.Write(buffer, 0, buffer.Length);
            output.Close();

            Listener.BeginGetContext(ProcessRequest, Listener);
        } 
```

谢谢以利亚

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-07-19T02:25:19.010

Arul 的回答是正确的，但是，正如 Iain Ballard 已经指出的那样，将 Server 标头设置为空字符串将起作用，这意味着根本不会发送 Server 标头。然后，如果您必须让客户知道您的真棒应用程序的名称是什么，您可以随意添加“Via”标题。它的规范相当松散，可能会被大多数浏览器忽略。

# c++ - 从 2 个线程中的 2 个套接字读取会导致数据丢失

> ID：427329
> 
> 赞同：0
> 
> 时间：2009-01-09T07:32:12.333
> 
> 标签：c++, sockets

我有一个用 Visual Studio 6 编写的多线程 Windows C++ 应用程序。

在应用程序中，有 2 个线程正在运行，每个线程都试图读取不同端口上的 UDP 数据包。如果我用关键部分保护来自套接字的读数，那么所有读取的日期都很好。如果没有该保护，两个套接字的数据都会丢失。

从套接字读取不是线程安全的吗？我过去写过许多套接字应用程序，但不记得必须使用这种线程保护。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T16:39:19.150

***在应用程序中，有 2 个线程正在运行，每个线程都试图读取不同端口上的 UDP 数据包。***

您正在发送/读取多少 UDP 数据？你发送它的速度有多快？您的数据丢失了多少？

这可能是一个竞争条件...... **不是在两个线程之间，而是在线程和套接字之间！**

我在过去将代码从 Linux 移植到 Windows 时遇到过问题。Windows 使用（使用）8k 的默认 UDP 缓冲区大小。自然地，我们发送了 12k 突发，即使使用专用的读取线程也无法以足够快的速度读取它！

您可以使用以下内容更改 UDP 缓冲区大小（在 Windows 下）：

```
int newBufferSize = 128 * 1024;  // 128k
setsockopt( readSocketFd, SOL_SOCKET, SO_RCVBUF, (char *) & newBufferSize ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T15:09:36.290

Winsock 不保证是线程安全的。这取决于实施者。看看[这里](http://tangentsoft.net/wskfaq/intermediate.html#threadsafety)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T07:50:55.793

在两个线程中从一个套接字读取不是线程安全的，您可能不确定哪个调用者首先从底层套接字缓冲区获取数据包。写入套接字是相同的。由于您正在从两个不同线程中的两个不同套接字读取数据（并且我假设每个套接字都有自己的线程），因此它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T07:51:24.997

你确定你不是从同一个套接字读取的吗？在我们的系统中，我们使用的是这样的：2 个绑定的 UDP 套接字 + 2 个线程来读取它们。没有问题，也不需要同步..

# lisp - 从命令行安装 asdf 库

> ID：427332
> 
> 赞同：4
> 
> 时间：2009-01-09T07:35:12.983
> 
> 标签：lisp, common-lisp, asdf

来自 Perl 背景，我不得不说我更喜欢`cpan Foo::Bar`必须启动 sbcl，`(require :asdf-install)`最后是`(asdf-install:install :foo-bar)`. 周围还有比这更方便的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T07:36:07.507

有clbuild：

```
http://common-lisp.net/project/clbuild/ 
```

但我将此添加到我的 .bashrc 中：

```
function asdf_install {
    sbcl --eval "(asdf:operate 'asdf:load-op :asdf-install)" --eval "(asdf-install:install :$1)" --eval "(quit)"
}

function asdf_oos {
    rlwrap sbcl --eval "(asdf:operate 'asdf:$2 :$1)"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T03:27:08.717

Common Lisp 可以是冗长的；但是大多数（全部？）实现都支持 Lisp 启动文件，该文件定义/加载您喜欢的任何内容以个性化您的开发环境。

另外，请查看[Mudballs](http://mudballs.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T22:50:25.060

您可以查看[http://www.quicklisp.org/](http://www.quicklisp.org/) - 它安装起来既快速又容易，然后可以下载、安装和加载系统：

```
(ql:quickload :cxml) 
```

翻译成 Perl，这就像 (shell)`cpanm cxml`和 (inside Perl) 合二为一`use cxml`。

您也可以搜索系统；例如列出所有：

```
(ql:system-apropos "xml") 
```

通常你会运行一个 lisp 进程并直接给它这些命令，但如果你更喜欢从 shell 进行安装等等，你可以定义别名（就像你在答案[https://stackoverflow.com/ a/427333/17221](https://stackoverflow.com/a/427333/17221) ):

```
function ql_install {
    sbcl --eval "(ql:quickload :$1)" --eval "(quit)"
}

function ql_apropos {
    sbcl --eval "(ql:system-apropos \"$1\")" --eval "(quit)"
} 
```

# c# - 如何等待线程完成其工作

> ID：427335
> 
> 赞同：0
> 
> 时间：2009-01-09T07:37:09.487
> 
> 标签：c#, multithreading

我有一个控制台应用程序。一个类（比如说 Worker）在一个单独的线程中做一些工作，并在它完成时抛出一个事件。但这永远不会发生，因为执行会立即结束。我如何等待线程完成并在它抛出后处理事件？

```
static void Main(string[] args)
{
    Worker worker = new Worker();
    worker.WorkCompleted += PostProcess;
    worker.DoWork();
}

static void PostProcess(object sender, EventArgs e) { // Cannot see this happening } 
```

**编辑：**更正了语句的顺序，但这不是问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-09T07:41:10.553

你有一个比赛条件，工作可以在你注册之前完成。为避免竞争条件，请更改代码的顺序，以便在开始工作之前注册事件，然后无论它完成多快，它都会被引发：

```
static void Main(string[] args)
{
    Worker worker = new Worker();
    worker.WorkCompleted += PostProcess;
    worker.DoWork();
} 
```

* * *

**编辑：**

好的，问题已被修改，所以看起来你真正要问的是如何等待`PostProcess`完成执行。有几种方法可以做到这一点，但您必须添加更多代码。

最简单的方法是，因为事件总是在引发它们的同一线程上执行，所以调用类创建`Thread.Join`的线程`Worker`，例如假设线程作为属性公开：

```
worker.Thread.Join(); 
```

（虽然老实说，我可能会保持`Thread`私有并公开一个名为类似于调用它`WaitForCompletion`的类的方法）。`Worker`

替代方法是：

1.  在完成所有工作的类中有一个`WaitHandle`，可能是一个，然后调用它。`ManualResetEvent``Worker``Set``WaitOne`

2.  在类中有一个`volatile bool complete`字段`Worker`并在等待它被设置为时循环，在循环体中`true`使用`Thread.Sleep`（这可能不是一个好的解决方案，但它是可行的）。

可能还有其他选择，但这是常见的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T07:40:36.373

您是否尝试过切换语句的顺序？

```
static void Main(string[] args)
{
    Worker worker = new Worker();
    worker.WorkCompleted += PostProcess;
    worker.DoWork();
} 
```

WorkCompleted 是一个事件处理程序，必须预先设置。这不会被分配 worker.WorkCompleted += PostProcess; 调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T07:40:47.467

使用 WaitHandle 类成员（WaitOne、WaitAny 或 WaitAll）

[在 MSDN 中](http://msdn.microsoft.com/en-us/library/system.threading.waithandle(VS.71).aspx)查看详细信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T07:41:14.063

Worker 类应该有一个允许客户端等待线程完成的方法。该方法将调用适当的重载`Thread.Join()`来实现等待。如果没有（并且您无法修改`Worker`类），它可能有一些方法可以访问内部 Thread 对象，您可以在该对象上执行 Join()。

如果两者都没有，您需要查看（和/或在此处发布）`Worker`类接口的更多详细信息，以查看它是否有适当的方法来等待完成。如果它没有，那么您将需要您自己的`EventWaitHandle`对象，`PostProcess()`事件处理程序可以在它被调用时发出信号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T08:02:27.500

假设您无权访问 Worker 类，只需添加一个标志，指示 PostProcessing 何时完成并休眠直到设置标志：

```
static bool isProcessed = false;
static void Main(string[] args)
{
    Worker worker = new Worker();
    worker.WorkCompleted += PostProcess;
    worker.DoWork();
    while(!isProcessed)
    {
      System.Threading.Thread.Sleep(-1);
    }
}

static void PostProcess(object sender, EventArgs e) 
{ 
   // Cannot see this happening 
   isProcessed=true;
} 
```

这应该可以解决问题，但是如果没有有关您的设置的更多信息，我不能保证它是强大的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T08:07:16.867

您可以`BackgroundWorker`为此使用 .net 框架中的类。

它完全符合您的要求。此外，它还处理调用自身，因此您不会为此感到痛苦。

```
static void Main(string[] args)
{
    BackgroundWorker worker = new BackgroundWorker();

    worker.ProgressChanged += new ProgressChangedEventHandler(worker_ProgressChanged);
    worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
    worker.WorkerReportsProgress = true;
    worker.WorkerSupportsCancellation = false;
    worker.DoWork += new DoWorkEventHandler(MyThreadMethod);
    worker.RunWorkerAsync();
    Console.Read();
}

static void MyThreadMethod(object sender, DoWorkEventArgs e)
{
    Console.WriteLine("Worker starts working.");
    for (int i = 1; i <= 100; i++)
    {
        ((BackgroundWorker)sender).ReportProgress(i);
    }
    Console.WriteLine("Worker works fine.");
}

static void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    Console.WriteLine("Worker has finished.");
}

static void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    Console.WriteLine("Worker reports progress {0}", e.ProgressPercentage);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T08:09:14.383

这听起来像是在您的工作人员中使用 Begin/End 异步模式的好选择。因此，不仅仅是一个`DoWork()`开始异步执行工作的方法和一个在工作完成时触发的事件，而是`Worker`包括一个返回工作结果的同步`Work()`方法，以及`BeginWork()`可`EndWork()`用于异步使用的配对.

有关这方面的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/seta58yd(VS.71).aspx 。](http://msdn.microsoft.com/en-us/library/seta58yd(VS.71).aspx)可能适合您的情况？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-25T17:07:55.917

我认为 Application.Run 在初始化你的线程之后。并在完成调用 Application.Exit

# c# - 如何让 C# 区分模棱两可的类名？

> ID：427346
> 
> 赞同：16
> 
> 时间：2009-01-09T07:43:58.800
> 
> 标签：c#, .net

如何让 C# 区分模棱两可的类类型，而不必`HtmlAgilityPack.HtmlDocument`每次都指定全名（与 相比它是模棱两可的`System.Windows.Forms.HtmlDocument`）？

有没有办法让 C# 知道我总是在谈论一个或另一个类，因此不必在每次使用它时都指定它？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-01-09T07:47:02.930

使用别名：

```
using HapHtmlDocument = HtmlAgilityPack.HtmlDocument;
using WfHtmlDocument = System.Windows.Forms.HtmlDocument; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-09T07:47:39.200

您可以为一个命名空间定义一个别名，例如：

```
using hap = HtmlAgilityPack; 
```

然后使用别名而不是完整的命名空间：

```
hap.HtmlDocument doc = new hap.HtmlDocument; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-28T03:10:08.890

在不同级别声明冲突的命名空间，最内部的命名空间将毫无歧义地使用：

```
using System.Windows.Forms;

namespace MyNamespace {
    using HtmlAgilityPack;

    public class Class1 {
        private HtmlDocument _doc; // HtmlAgilityPack.HtmlDocument
    } 
```

# asp.net - 是否需要使用 Me (VB.NET) 关键字？

> ID：427351
> 
> 赞同：12
> 
> 时间：2009-01-09T07:47:05.143
> 
> 标签：asp.net, vb.net

我目前正在开发一个 Web 应用程序 (ASP.NET)，其中包含的一些页面是由其他程序员创建的，我注意到的是，他们没有使用“Me(VB.NET)”关键字来访问控件，而在我这边，我在我创建的每个页面中都使用了它。只是为了提供更多信息，Web 应用程序在 .NET Framework 2.0 上运行。有没有人可以帮助我理解是否需要使用我？如果你使用 Me，整个代码的优缺点是什么？它可以提高应用程序的性能吗？

非常感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-09T07:56:14.673

据我了解，这纯粹是偏好，但可以消除属性和局部范围的变量/参数之间的歧义。有些人出于习惯而虔诚地包括它。这样，如果他们要引入一个同名的局部变量，什么都不会破坏。

假设您定义了一个方法`DoSomething(MyString As String)`，并且该类也有一个`String`被调用的`MyString`. 引用*类*版本的唯一方法`MyString`是使用`Me.MyString`. 因此，你说`Me.MyString = MyString`，编译器知道你想要什么。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T08:08:50.763

在某些情况下，它是必需的，让我们以类范围内的变量为例，以及传递给具有等价名称的子例程的参数，如下所示：

```
Private theString As String

Private Sub Setup(ByVal theString As String)
   Me.theString = theString
End Sub 
```

它将事物带入正确的上下文中，以允许正确执行分配。

在您的情况下，一些开发人员只是倾向于这样做，以便他们知道变量的来源，我的工作伙伴也会这样做。这也很常见，因为如果他们输入“Me.”，智能感知会调出他们的局部变量列表，这是我通常不做的事情，尽管我可能应该做更多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T10:51:40.857

使用**Me 关键字**不会影响性能。这纯粹是风格问题。我认为如果你使用它，它可以提高你的代码的清晰度。所以你一眼就知道使用的成员属于对象本身，而不是例如局部变量。

每当我们希望我们的代码引用当前对象中的成员（方法、属性……）时，都会使用 Me 关键字。Me 关键字类似于 C++ 和 C# 语言中的**this 关键字**。Me 关键字通常是**可选**的，因为除非另有明确说明，否则假定任何方法调用都**引用当前对象。**

例外是当您使用**阴影变量**时。阴影变量是过程级别的变量，与类的变量同名。例如：

```
Public Class ExampleClass

  Private FirstName As String

  Public Sub ExampleMethod()
    Dim FirstName As String
    FirstName = "Stefan"
  End Sub

End Class 
```

变量 FirstName 在类级别和 ExampleMethod 方法中声明。在 ExampleMethod 中，除非我们使用 Me 关键字显式引用类级变量，否则仅使用局部变量或阴影变量：

```
Public Class ExampleClass

  Private FirstName As String

  Public Sub ExampleMethod()
    Dim FirstName As String
    FirstName = "Stefan"
    Me.FirstName = "Carl Gustav"
  End Sub

End Class 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T08:04:21.817

我认为 UI 控制了它非常多的用户偏好。

但是我非常喜欢使用“Me”，特别是如果您使用类属性，以防在访问该变量之前需要执行一些代码。

例子

```
Class Sample
       Private myString as String

       Public Property GetMyString As String
       Get
          ' Some code here which sets the string after reading value from the  database
       End Get
       Set
       End Set

       End Property        
End Class 
```

在这种情况下，使用或不使用“Me”关键字是有区别的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T08:04:44.720

Me 关键字是可选的，就像您可以选择完全限定命名空间一样，即使您已将其导入到类的顶部。

但是，如果您在表单上有一个与另一个导入的命名空间中的另一个对象同名的控件，则它可能是必不可少的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-03-07T10:33:25.120

好吧，即使它有东西，也有这个ME关键字提供问题的事件

例如，如果您有一个表单并从其他表单调用它，例如

```
Dim myform as new frmXXX

myform.PrimaryKey=123

muform.show 
```

除非 Show 方法完成，否则 primarykey 方法中的对象不引用 ME 关键字，它们会提供错误。

在 PrimaryKey 方法属性 writeonly 中设置primarykey ....

```
me.txtPrimaryKey.text="value" 
```

除非表格未显示，否则将提供错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-10-27T18:07:28.530

我是当前班级的对象

# sql-server - Reporting Services 报表“叠印”的 PDF 呈现中的文本

> ID：427361
> 
> 赞同：3
> 
> 时间：2009-01-09T07:51:49.847
> 
> 标签：sql-server, pdf, reporting-services

我前段时间一直在处理的一份报告在圣诞节前后开始出现错误渲染。它上面的一些文本框突然开始将其文本内容中的每个字符相互叠加，好像每个字符的打印不再“将光标前进”到下一个字符的正确位置。报告通过 URL 访问呈现为 PDF。

以前有人见过这种行为吗？
知道是什么原因造成的吗？
我只是好奇，其实。

（我目前不知道“圣诞节前后”服务器上发生了什么变化。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-16T16:47:53.180

我以前遇到过一次。我的问题是两个文本框几乎没有一个像素重叠。这使他们无法“推动”对方，因此文本不会覆盖对方。

因此，请确保您的文本框对象没有接触，希望就是这样，容易修复，否则祝您好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-06T00:33:18.557

在打印和导出 ssrs 报告的 pdf 时，我遇到了文本重叠和渲染奇怪的问题。

正如达斯汀所说，问题在于文本框重叠。

![重叠文本](https://img.photobucket.com/albums/v644/mattsnuts/Capture.png)

# mysql - 将 Money 持久化到数据库中。设计决策

> ID：427362
> 
> 赞同：4
> 
> 时间：2009-01-09T07:51:53.903
> 
> 标签：mysql, database-design, currency

我需要一张表来存储金融交易的状态。这个事务的状态可以用这个类来粗略的建模。

```
class FinancialTransaction
{
    Integer txId,
    Money oldLimit,
    Money newLimit,
    Money oldBalance,
    Money newBalance,
    Date txDate
}
class Money
{   
    Currency curr,
    BigDecimal amount
} 
```

我最初的架构设计如下所示：

```
CREATE TABLE tx
(
    txId bigint(20) unsigned NOT NULL,
    oldlimit_currency varchar(3) NULL,
    oldlimit_amount decimal(7,5) default 0.00,
    newlimit_currency varchar(3) NULL,
    newlimit_amount decimal(7,5) default 0.00,
    ----snipped----
    PRIMARY KEY (txId)
) 
```

我担心两件事：

1.  每笔交易都基于一种货币进行。关于是否需要支持可能以多种货币发生的交易，我还没有想得足够多。假设它没有改变；那么只维护一个货币栏不是更节省空间吗？我会后悔这个简单的解决方案吗？
2.  由于每个 Money 项目都是一个值对象，我是否应该将所有 Money 对象保存到单独的 Money 表中，并让原始表使用 moneyIds 作为 Money 表的外键？

那是，

```
CREATE TABLE tx
(
    txId bigint(20) unsigned NOT NULL,
    oldlimit_money_id int NOT NULL,
    newlimit_money_id int NOT NULL,
    ----snipped----
    PRIMARY KEY (txId),
    FOREIGN KEY (oldlimit_money_id) REFERENCES MONEY(id) ON DELETE NO ACTION ON UPDATE NO ACTION,
    FOREIGN KEY (newlimit_money_id) REFERENCES MONEY(id) ON DELETE NO ACTION ON UPDATE NO ACTION
) 
```

有替代设计吗？

谢谢懒人网。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T08:18:00.293

货币和货币价值是两个不同的概念，因此最好将它们分开。没有必要为“价值”制作单独的表格，但最好为货币制作一个表格，因为它们是单独的实体。新设计看起来像：

```
CREATE TABLE tx
(
    id bigint(20) unsigned primary key,
    old_limit_currency_id int not null references CURRENCY(id),
    old_limit_value decimal(7,5) not null,
    new_limit_currency_id int not null references CURRENCY(id),
    new_limit_value decimal(7,5) not null
) 
```

另外，检查小数（7,5）是否有足够的空间用于您的场景，它看起来有点低。有句老话：“比后悔更安全”:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T08:08:26.897

1.  如果将来您确实需要支持两种货币之间的交易，则应该可以将其建模为两种交易，每种货币中的一种。
2.  看起来您的 Money 对象在语义上是值而不是实体。因此，我认为没有必要将它们作为实体分开。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T09:08:45.447

第三个想法呢：

```
CREATE TABLE tx
(
  txId bigint(20) unsigned NOT NULL,
  currency varchar(3) NOT NULL,
  oldlimit decimal(7,5) default 0.00,
  newlimit decimal(7,5) default 0.00,
  ----snipped----
  PRIMARY KEY (txId)
) 
```

一笔交易的所有货币价值都必须是相同的货币，对吗？

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2009-01-09T08:34:04.723

如果这不是矫枉过正，请更进一步，以单一货币存储所有金额/价值并维护汇率表。

# java - 具有隔离循环引用的垃圾收集行为？

> ID：427363
> 
> 赞同：7
> 
> 时间：2009-01-09T07:52:17.240
> 
> 标签：java, garbage-collection

如果我在堆上有两个对象相互引用，但它们没有链接到任何引用变量，那么这些对象是否有资格进行垃圾回收？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-09T07:57:18.523

是的，他们是。基本上，GC 从“已知根”（静态变量、来自所有线程中的所有堆栈帧的局部变量）开始寻找不能被垃圾收集的对象。如果无法从根获取对象，则它有资格被收集。

编辑：汤姆指出了这一点，我认为值得将其纳入答案本身：

> 从技术上讲，静态变量不是根 - 它们被类引用，这些类被类加载器引用，类被类引用，类被根引用引用的对象引用。

*大多数*情况下差异可能无关紧要，但很高兴知道:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T07:56:23.627

看看这个：[Java 垃圾收集器如何处理自我引用](https://stackoverflow.com/questions/407855/how-does-java-garbage-collector-handle-self-reference)。

你可能想检查[`java.lang.ref.WeakReference`](http://java.sun.com/javase/6/docs/api/java/lang/ref/WeakReference.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T08:12:35.513

像往常一样，Skeet 在赚钱。我只想补充一点，您描述的情况是不使用引用计数（早期 C++ 智能指针的标准策略）的原因。

# oracle - Delphi 2009，带有 Oracle 的 DbExpress：无法加载 oci.dll

> ID：427383
> 
> 赞同：0
> 
> 时间：2009-01-09T08:08:16.567
> 
> 标签：oracle, delphi, delphi-2009, dbexpress

我已经设置了一个演示来测试datasnap 2009，我遇到了dbexpress的问题。

dbexpress 错误消息（在设计时或运行时相同）：“无法加载 oci.dll 库（错误代码 127）。系统路径中可能缺少 OCI.dll 库。”

我正在使用 Oracle 8.0.5。oci.dll (c:\orant\BIN) 的路径位于我的系统路径中，位于该行的前面。我也安装了 Delphi 2005，完全相同的配置也可以正常工作。我已经移动了 dbexpress delphi 2005 相关文件，我已经重新启动了很多次，尝试将 oci.dll 复制到 c:\windows\system 或 c:\windows\system32\ 中，每次都出现同样的错误。

我的解决方案已经用完了。也许这是与我也安装了 D2005 的事实有关的问题......？

有人可以帮助我吗？

谢谢

**编辑：** 这是事件日志，在构建过程中的 IDE 中，我们可以看到它找到并加载 OCI.dll，因此错误（无法加载 oci.dll）可能不是一个好错误：

```
Début du Thread : ID du thread : 5588\. Processus Server.exe (5548)

Début du processus : C:\Documents and Settings\frplante\Mes documents\Développement\Projets\Démo DataSnap2009\Server\Server.exe. Adresse de base : $00400000\. Processus Server.exe (5548)

Chargement du module : Server.exe. Contient des infos de débogage. Adresse de base : $00400000\. Processus Server.exe (5548)

Chargement du module : ntdll.dll. Pas d'informations de débogage. Adresse de base : $7C910000\. Processus Server.exe (5548)

Chargement du module : KERNEL32.dll. Pas d'informations de débogage. Adresse de base : $7C800000\. Processus Server.exe (5548)

Chargement du module : OLEAUT32.dll. Pas d'informations de débogage. Adresse de base : $770E0000\. Processus Server.exe (5548)

Chargement du module : ADVAPI32.dll. Pas d'informations de débogage. Adresse de base : $77DA0000\. Processus Server.exe (5548)

Chargement du module : RPCRT4.dll. Pas d'informations de débogage. Adresse de base : $77E50000\. Processus Server.exe (5548)

Chargement du module : Secur32.dll. Pas d'informations de débogage. Adresse de base : $77FC0000\. Processus Server.exe (5548)

Chargement du module : GDI32.dll. Pas d'informations de débogage. Adresse de base : $77EF0000\. Processus Server.exe (5548)

Chargement du module : USER32.dll. Pas d'informations de débogage. Adresse de base : $7E390000\. Processus Server.exe (5548)

Chargement du module : msvcrt.dll. Pas d'informations de débogage. Adresse de base : $77BE0000\. Processus Server.exe (5548)

Chargement du module : ole32.dll. Pas d'informations de débogage. Adresse de base : $774A0000\. Processus Server.exe (5548)

Chargement du module : MSIMG32.dll. Pas d'informations de débogage. Adresse de base : $76310000\. Processus Server.exe (5548)

Chargement du module : VERSION.dll. Pas d'informations de débogage. Adresse de base : $77BD0000\. Processus Server.exe (5548)

Chargement du module : COMCTL32.dll. Pas d'informations de débogage. Adresse de base : $77390000\. Processus Server.exe (5548)

Chargement du module : SHLWAPI.dll. Pas d'informations de débogage. Adresse de base : $77F40000\. Processus Server.exe (5548)

Chargement du module : wxvault.dll. Pas d'informations de débogage. Adresse de base : $10000000\. Processus Server.exe (5548)

Chargement du module : PSAPI.DLL. Pas d'informations de débogage. Adresse de base : $76BA0000\. Processus Server.exe (5548)

Chargement du module : MPR.dll. Pas d'informations de débogage. Adresse de base : $71A60000\. Processus Server.exe (5548)

Chargement du module : detoured.dll. Pas d'informations de débogage. Adresse de base : $00370000\. Processus Server.exe (5548)

Chargement du module : SHELL32.dll. Pas d'informations de débogage. Adresse de base : $7C9D0000\. Processus Server.exe (5548)

Chargement du module : IMM32.dll. Pas d'informations de débogage. Adresse de base : $76320000\. Processus Server.exe (5548)

Chargement du module : UxTheme.dll. Pas d'informations de débogage. Adresse de base : $5B090000\. Processus Server.exe (5548)

Chargement du module : **dbxora.dll**. Pas d'informations de débogage. Adresse de base : $00FC0000\. Processus Server.exe (5548)

Chargement du module : **OCI.dll**. Pas d'informations de débogage. Adresse de base : $003F0000\. Processus Server.exe (5548)

Chargement du module : ORA805.dll. Pas d'informations de débogage. Adresse de base : $01430000\. Processus Server.exe (5548)

Chargement du module : CORE40.dll. Pas d'informations de débogage. Adresse de base : $015C0000\. Processus Server.exe (5548)

Chargement du module : NLSRTL33.dll. Pas d'informations de débogage. Adresse de base : $01620000\. Processus Server.exe (5548)

Chargement du module : WINMM.dll. Pas d'informations de débogage. Adresse de base : $76AE0000\. Processus Server.exe (5548)

Chargement du module : NL80.dll. Pas d'informations de débogage. Adresse de base : $01660000\. Processus Server.exe (5548)

Chargement du module : WSOCK32.dll. Pas d'informations de débogage. Adresse de base : $71A10000\. Processus Server.exe (5548)

Chargement du module : WS2_32.dll. Pas d'informations de débogage. Adresse de base : $719F0000\. Processus Server.exe (5548)

Chargement du module : WS2HELP.dll. Pas d'informations de débogage. Adresse de base : $719E0000\. Processus Server.exe (5548)

Chargement du module : OTRACE80.dll. Pas d'informations de débogage. Adresse de base : $01680000\. Processus Server.exe (5548)

Chargement du module : NS80.dll. Pas d'informations de débogage. Adresse de base : $016B0000\. Processus Server.exe (5548)

Chargement du module : nasns80.dll. Pas d'informations de débogage. Adresse de base : $016F0000\. Processus Server.exe (5548)

Chargement du module : nz80.dll. Pas d'informations de débogage. Adresse de base : $01720000\. Processus Server.exe (5548)

Chargement du module : NNFG80.dll. Pas d'informations de débogage. Adresse de base : $01770000\. Processus Server.exe (5548)

Chargement du module : NNCI80.dll. Pas d'informations de débogage. Adresse de base : $01780000\. Processus Server.exe (5548)

Chargement du module : NNG80.dll. Pas d'informations de débogage. Adresse de base : $01790000\. Processus Server.exe (5548)

Chargement du module : NMP80.dll. Pas d'informations de débogage. Adresse de base : $017B0000\. Processus Server.exe (5548)

Chargement du module : NPL80.dll. Pas d'informations de débogage. Adresse de base : $017C0000\. Processus Server.exe (5548)

Chargement du module : NR80.dll. Pas d'informations de débogage. Adresse de base : $017D0000\. Processus Server.exe (5548)

Chargement du module : NT80.dll. Pas d'informations de débogage. Adresse de base : $017F0000\. Processus Server.exe (5548)

Chargement du module : NCR80.dll. Pas d'informations de débogage. Adresse de base : $01800000\. Processus Server.exe (5548)

Chargement du module : NMS80.dll. Pas d'informations de débogage. Adresse de base : $01840000\. Processus Server.exe (5548)

Chargement du module : NNFD80.dll. Pas d'informations de débogage. Adresse de base : $01850000\. Processus Server.exe (5548)

Chargement du module : NNFN80.dll. Pas d'informations de débogage. Adresse de base : $01860000\. Processus Server.exe (5548)

Chargement du module : NI80.dll. Pas d'informations de débogage. Adresse de base : $01870000\. Processus Server.exe (5548)

Chargement du module : PLS805.dll. Pas d'informations de débogage. Adresse de base : $01880000\. Processus Server.exe (5548)

Chargement du module : NDWSI80.DLL. Pas d'informations de débogage. Adresse de base : $01A80000\. Processus Server.exe (5548)

Exception déclenchée à $7C812AEB. Classe d'exception TDBXError avec message '**Cannot load oci.dll library** (error code 127).  The oci.dll library may be missing from the system path'. Processus Server.exe (5548) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T12:32:41.503

windows error code 127 is an procedure not found，这可能意味着有旧版本的DLL，或者缺少函数什么的，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T14:13:39.553

我在使用 Oracle 10g XE 客户端时遇到问题。我的错是，我安装了多个客户端。在我卸载它们并安装正确的之后问题就消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T11:38:24.537

如果您切换 Oracle Homes，通常会出现此类问题，但您没有提及多次安装。

您可以使用 SqlPlus 连接到 Oracle 吗？[此页面](http://www.embarcadero.com/jive/entry.jspa?categoryID=2&externalID=300)还建议在路径中检查 oci.dll 的多个副本（尤其是 windows\system32）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T20:43:09.843

如果您在 Windows Vista 上运行此程序，您是否检查过您的程序是否有权访问 oci.dll？

如果没有一个答案有效，那么您应该联系 CodeGear 以确认是否仍支持 Oracle 8.0.5。即使是驱动程序中的 Oracle 也不支持访问 8.0.5 好几年了。Metalink上有一篇文章描述了特定客户端版本可以访问哪个版本的服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T15:18:43.230

I has a similar problem with the DBXpress drivers I cant rember 100% what I did to fix it, my problem was moving it from one windows PC to another (for installation).

here is what I can remember trying

Putting the database dll in the same dir as the application along with the 3 or 4 dll from dbexpress (as the problem I was having was the dbexpress dlls (not my application) couldn't find the database dll's)

Made sure I had the correct c++ run time libs installed, as I believe the DBX drivers need this.

Updated windows to sp3 (I guess you can skip this step as your not changing computers)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T10:30:32.053

尝试将dll复制到程序的根文件夹中

# javascript - 如何让 jQuery 将自定义参数传递给异步 AJAX 回调函数？

> ID：427389
> 
> 赞同：5
> 
> 时间：2009-01-09T08:12:12.597
> 
> 标签：javascript, jquery, ajax

我的页面处理许多“存储”对象，每个对象都有一个名为“数据”的字段。但是，这些数据是通过可能并行进行的 AJAX 请求获取的。

```
function Store(id){
    this.id = id;
    this.queryparam = 'blah';
    this.items = null;
}

Store.prototype.fetch = function(){
    $.get("/get_items",{q:this.quaryparam},function(data,status){

      // how to store the received data in this particular store object? Being
      // a callback function, I don't have a reference to this object as 'this'

       // this.data = data; //will not work
    });
} 
```

在回调函数中，我尝试为调用对象定义一个默认参数，如下所示：

```
$.get("/get_items",{q:this.quaryparam},function(data,status, ref = this) ... 
```

但事实证明，javascript 不支持这样的默认参数值。**我可以以某种方式让 jquery 在回调函数中传递对“this”存储的引用吗？**

我想到了其他几种方法，但它们都不起作用：

我可以使用同步请求设置存储数据，但这不是 AJAX 的重点，是吗？

对我来说，另一种方法可能是，在请求中也发送商店 ID，这将在响应中返回。例如：

```
// in Store.fetch()
$.get("/get_items",{q:this.quaryparam,id:this.id},function(responsetext,status){
    var response = eval(responsetext);
    stores[response.id].data = response.data;
}); 
```

我不喜欢这种方法，因为这会污染响应，因为客户端代码无法跟踪哪个对象发送了哪个请求。

此外，由于 store.id 是特定于客户端的，它也会弄乱服务器上的缓存。不同的请求 URL 将用于两个不同的商店，即使它们具有相同的查询参数。

还有其他方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T08:46:24.620

您应该能够使用闭包：

```
var tmp = this;
$.get("/get_items",{q:this.quaryparam},function(data,status){
    tmp.data = data;
}); 
```

你是这个意思吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T08:38:03.577

函数存储（id）{ this.id = id; this.queryparam = '废话'; 这个.items = null; }

```
Store.prototype.fetch = function(){
    var that = this;
    $.get("/get_items",{q:this.quaryparam},function(response){
        that.callback(response)
    });
}

Store.prototype.callback = function(response){
    // and here you can use
   this.items = response // just example
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T08:50:13.050

似乎正在工作，虽然我不明白如何在匿名函数中访问变量“tmp”。:-)

谢谢马克和里卡多！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-16T21:06:45.883

我写了这个插件，我认为它会很有用

[http://code.google.com/p/jquerycallback/](http://code.google.com/p/jquerycallback/)

# django - 在 Dreamhost 上部署 Django

> ID：427395
> 
> 赞同：6
> 
> 时间：2009-01-09T08:15:45.960
> 
> 标签：django, deployment, fastcgi, wsgi, dreamhost

我正在尝试让投票教程在我的 Dreamhost 帐户中运行（我之前没有任何部署 Django 的经验）。我在我的主目录下载了我在这里找到的脚本（[http://gabrielfalcao.com/2008/12/02/hosting-and-deploying-django-apps-on-dreamhost/](http://gabrielfalcao.com/2008/12/02/hosting-and-deploying-django-apps-on-dreamhost/)）并执行了它。现在我在 ~/.myroot/ 中有 Python 2.5 和 Django，我的 Django 项目目录是 ~/projects/

这是 ~/projects/ 目录的内容（我自己复制了 polls/ 和 templates/polls/ 目录）。

```
projects/
|-- admin_media -> /home/imran2140/.myroot/usr/lib/python2.5/site-packages/django/contrib/admin/media
|-- dispatch.fcgi
|-- polls
|   |-- __init__.py
|   |-- __init__.pyc
|   |-- admin.py
|   |-- admin.pyc
|   |-- models.py
|   |-- models.pyc
|   |-- polls.db
|   |-- urls.py
|   |-- urls.pyc
|   |-- views.py
|   `-- views.pyc
|-- script_templates
|   |-- dispatch.template
|   `-- htaccess.template
`-- templates
    `-- polls
        |-- detail.html
        |-- index.html
        `-- results.html

5 directories, 17 files 
```

现在我应该怎么做才能让投票应用程序正常工作？

**更新**

我终于得到了一个使用 Passanger WSGI 的“Hello World”Django 应用程序。它适用于服务器的默认 Python 2.3.5 和我安装的 Python 2.5.2。

[Passanger WSGI -](http://wiki.dreamhost.com/Passenger_WSGI) Dreamhost Wiki 上的Django

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T08:40:43.587

由于 DreamHost 支持 mod_passenger 和 AFAIK，它不仅适用于 Ruby/Rails 应用程序，还适用于 Python/Django - 您可以尝试一下。

只需将应用程序放在那里并选择执行脚本所在的目录（例如dispatch.fcgi）。您可能想在 GitHub 上查看/研究[一个工作示例。](http://github.com/kwe/passenger-django-wsgi-example/tree/django)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-08-30T18:47:15.720

现在，您可以运行一个脚本，它可以为您完成大部分设置。在 Dreamhost wiki 上关于 Django 的主页上提到了它：http: [//wiki.dreamhost.com/Django](http://wiki.dreamhost.com/Django)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T08:33:46.953

这是官方的[Dreamhost wiki](http://wiki.dreamhost.com/index.php/Django)。我不知道你提到的脚本在做什么，但你必须设置重写规则`.htaccess`才能运行你的 fcgi 脚本。

但是在任何 VPS 主机上设置 Django 比在共享主机上要容易得多。还要考虑他们的免责声明：

> 如果 Django 对您的站点至关重要，您可能希望考虑其他主机，因为**Dreamhost 不正式支持 Django**。过去，一些用户报告了可靠性问题；但是，其他人没有问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T13:25:49.010

我已经使用dreamhost 完成了它，我认为设置Django 实在是太麻烦了。

> 但是在任何 VPS 主机上设置 Django 比在共享主机上要容易得多。

我在[webfaction](http://www.webfaction.com/)上运气不错。它们不是 VPS，但它们仍然可以让您对您的站点进行大量控制（就像您可以根据需要设置自己的 Apache 实例一样）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-04-10T15:44:13.067

乘客是要走的路。我写了一个[关于构建现代（2.6.5）Python 和使用 Passenger 配置 Django 等的小 HOWTO，](http://chester.blog.br/archives/2010/04/howto-python-2-6-5-django-via-passenger-wsgi-at-dreamhost.html)如果您已经有一个项目，它可能会有所帮助。

# python - 使用 Google AppEngine 在 Python 中进行单元测试和模拟电子邮件发件人

> ID：427400
> 
> 赞同：5
> 
> 时间：2009-01-09T08:33:34.380
> 
> 标签：python, unit-testing, google-app-engine, mocking

我是 python 和应用程序引擎的新手。

我有这段代码在一些身份验证逻辑之后根据请求参数发送电子邮件。在我的单元测试（我正在使用[GAEUnit](http://code.google.com/p/gaeunit/)）中，如何确认已发送包含特定内容的电子邮件？- 即我如何用假电子邮件模拟电子邮件以验证发送被调用？

```
class EmailHandler(webapp.RequestHandler):
 def bad_input(self):
  self.response.set_status(400)
  self.response.headers['Content-Type'] = 'text/plain'
  self.response.out.write("<html><body>bad input </body></html>")

 def get(self):
  to_addr = self.request.get("to")
  subj = self.request.get("subject")
  msg = self.request.get("body")
  if not mail.is_email_valid(to_addr):
    # Return an error message...
    #   self.bad_input()
    pass

  # authenticate here

  message = mail.EmailMessage()
  message.sender = "my.company@gmail.com"
  message.to = to_addr
  message.subject = subj
  message.body = msg
  message.send()
  self.response.headers['Content-Type'] = 'text/plain'
  self.response.out.write("<html><body>success!</body></html>") 
```

和单元测试，

```
import unittest
from webtest import TestApp
from google.appengine.ext import webapp
from email import EmailHandler

class SendingEmails(unittest.TestCase):

  def setUp(self):
    self.application = webapp.WSGIApplication([('/', EmailHandler)], debug=True)

  def test_success(self):
    app = TestApp(self.application)
    response = app.get('http://localhost:8080/send?to=vijay.santhanam@gmail.com&body=blah_blah_blah&subject=mySubject')
    self.assertEqual('200 OK', response.status)
    self.assertTrue('success' in response)
    # somehow, assert email was sent 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-09-11T15:50:57.847

您还可以覆盖AppEngine 内部的`_GenerateLog`方法。`mail_stub`

这是一个父 TestCase 类，我在测试发送电子邮件时用作 mixin：

```
from google.appengine.api import apiproxy_stub_map, mail_stub

__all__ = ['MailTestCase']

class MailTestCase(object):
    def setUp(self):
        super(MailTestCase, self).setUp()
        self.set_mail_stub()
        self.clear_sent_messages()

    def set_mail_stub(self):
        test_case = self
        class MailStub(mail_stub.MailServiceStub):
            def _GenerateLog(self, method, message, log, *args, **kwargs):
                test_case._sent_messages.append(message)
                return super(MailStub, self)._GenerateLog(method, message, log, *args, **kwargs)

        if 'mail' in apiproxy_stub_map.apiproxy._APIProxyStubMap__stub_map:
            del apiproxy_stub_map.apiproxy._APIProxyStubMap__stub_map['mail']

        apiproxy_stub_map.apiproxy.RegisterStub('mail', MailStub())

    def clear_sent_messages(self):
        self._sent_messages = []

    def get_sent_messages(self):
        return self._sent_messages

    def assertEmailSent(self, to=None, sender=None, subject=None, body=None):
        for message in self.get_sent_messages():
            if to and to not in message.to_list(): continue
            if sender and sender != message.sender(): continue
            if subject and subject != message.subject(): continue
            if body and body not in message.textbody(): continue
            return

        failure_message = "Expected e-mail message sent."

        args = []
        if to: args.append('To: %s' % to)
        if sender: args.append('From: %s' % sender)
        if subject: args.append('Subject: %s' % subject)
        if body: args.append('Body (contains): %s' % body)

        if args:
            failure_message += ' Arguments expected: ' + ', '.join(args)

        self.fail(failure_message) 
```

之后，示例测试用例可能如下所示：

```
import unittest, MailTestCase

class MyTestCase(unittest.TestCase, MailTestCase):
    def test_email_sent(self):
        send_email_to('test@example.org') # Some method that would send an e-mail.
        self.assertEmailSent(to='test@example.org')
        self.assertEqual(len(self.get_sent_messages()), 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T08:46:09.517

一个非常简短的介绍提供了[PyPI：MiniMock 1.0](http://pypi.python.org/pypi/MiniMock/1.0)。这是一个非常小的库来建立模拟。

1.  将你的模拟注入模块，应该被模拟
2.  定义，你的模拟将返回什么
3.  调用方法
4.  你的模拟会说，调用了哪个方法。

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-09-28T06:34:36.627

只需使用以下命令获取自激活邮件存根后发送的所有消息。

```
from google.appengine.api import apiproxy_stub_map
sent_messages = apiproxy_stub_map.apiproxy._APIProxyStubMap__stub_map['mail'].get_sent_messages() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-10T21:24:47.170

[谷歌在他们的文档](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/master/appengine/localtesting/test_mail.py)中有一个非常简单的方法来做到这一点。

您在设置中创建一个测试平台和邮件存根，如下所示：

```
self.testbed = testbed.Testbed()
self.testbed.activate()
self.testbed.init_mail_stub()
self.mail_stub = self.testbed.get_stub(testbed.MAIL_SERVICE_NAME) 
```

运行您的方法，然后像这样检查它：

```
 messages = self.mail_stub.get_sent_messages(to='alice@example.com')
 self.assertEqual(1, len(messages))
 self.assertEqual('alice@example.com', messages[0].to) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-04-04T19:33:07.617

我在 GAEUnit 中使用了 jgeewax 的 GAE 测试平台。使用 GAEUnit 代替 NoseGAE 对我来说更容易，因为我已经安装了 GAEUnit。以下是步骤：

**将 GAEUnit 添加到您的应用程序**

1.  [从其 Google 代码项目托管页面](http://code.google.com/p/gaeunit/)下载 GAEUnit 的压缩档案。
2.  提取存档。
3.  从存档中提取的文件夹中，复制`gaeunit.py`到应用的根文件夹。
4.  将以下 2 行添加到您的`app.yaml`，直接在下面的行`handlers:`：

代码：

```
- url: /test.*
  script: gaeunit.py 
```

（可选）从存档中提取的文件夹中，有一个名为的文件夹，其中包含模块`sample_app`的修改版本。`webtest`将模块（包含和`webtest`的整个文件夹）复制到应用程序的根目录。`debugapp.py``__init__.py`

**将 GAE 测试平台添加到 GAEUnit：**

1.  [从其 Google 代码项目托管页面](http://code.google.com/p/gae-testbed/)下载 GAE Testbed tar gzipped 存档。
2.  提取存档。
3.  在提取的存档中是`gaetestbed`模块（它是名为“gaetestbed”的文件夹）。将模块复制到应用程序的根目录。
4.  在应用程序根目录的 test 文件夹中创建一个文件。为了这个例子，让我们命名它`test_mailer.py`。
5.  使用 GAE Testbed Google Code 项目托管页面中的示例，将以下行添加到`test_mailer.py`：

代码：

```
import unittest
from gaetestbed import MailTestCase

class MyTestCase(MailTestCase, unittest.TestCase):
    def test_email_sent(self):
        send_email_to('test@example.org') # Some method that sends e-mail...
        self.assertEmailSent(to='test@example.org')
        self.assertEqual(len(self.get_sent_messages()), 1) 
```

启动您的服务器并转到`http://localhost:8080/test`. 您应该注意到（额外的）1/1 测试是从`http://localhost:8080/test`.

资料来源：[使用 GAE 测试平台和 GAEUnit：测试发送的电子邮件](http://blog.randell.ph/2010/04/05/using-gae-testbed-with-gaeunit-testing-that-email-was-sent/)

# sql-server-2005 - 更新而不是删除然后在同一个表中插入有什么好处

> ID：427422
> 
> 赞同：2
> 
> 时间：2009-01-09T08:46:36.757
> 
> 标签：sql-server-2005, insert

我有一个表说示例“ABC”，我有一行需要存储到这个“ABC”表中。我打算更新它而不是从表中删除然后插入。这将对数据库产生什么影响？在，表级别，页面级别，时间，成本和每件事。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-09T08:52:03.827

我不能 100% 确定你在问什么，但我会在黑暗中试一试。执行 DELETE 然后 INSERT 到表中以更新信息是一个非常糟糕的主意。

为什么？因为如果您有另一个表的外键引用 ABC，您将丢失您的引用。也就是说，当然，除非您将新记录的 PK 设置为与旧（已删除）记录相同的 PK。在这种情况下，你为什么不一开始就更新？

此外，DELETING 然后 INSERTing 是两个操作，而 UPDATEing 是一个，这使得 DELETE 和 INSERT 需要（理论上）更多时间。

还有易用性因素。如果您删除然后插入，则必须手动跟踪每个列值。如果你更新，你只需要知道你想改变什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T08:52:31.503

更新是更新表最简单、最快的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-19T02:11:00.773

The DELETE & INSERT operations takes longer time compare to UPDATE.Think if u want to change only one column in the row.Then DELETE and INSERT will be complicated.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-06-20T11:00:14.657

显然，UPDATE 是首选，但取决于 RDBMS，使用 DELETE-INSERT 是为了避免 LOCK，因此它可以服务于大量并发访问。这是一种常见的技术。

一些数据库在磁盘上使用固定大小的记录，所以更新速度很快。这是一个就地操作。其他一些数据库使用可变大小的记录。在这样的数据库中，DELETE/INSERT 与 UPDATE 没有太大区别，因为 UPDATE 实际上将旧元组/索引标记为死，写入一个新元组，然后让垃圾收集器稍后回收死元组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T09:22:11.537

UPDATE 的另一个好处是在 ACID 数据库的实际定义中 - 原子性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T08:53:29.893

更新将更改现有行，这是一个简单的操作，而删除后插入将是数据库的更多工作。

此外，如果您使用标识列，删除和插入可能会破坏对您的行的引用。

编辑：实际上，有时您会想要进行删除和插入而不是更新。如果您不知道要更新的数据是否存在，这可能是为了简化您的逻辑。然后执行删除然后执行插入比检查行是否存在然后根据检查结果执行更新或插入更容易。

此外，您可能希望根据您的使用方式更新任何标识列（例如，如果您使用它来跟踪对表的最新更改）。

但总的来说，更新比删除和插入操作要少，所以如果可以的话，你应该总是使用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T09:05:01.133

使用 UPDATE 而不是 DELETE/INSERT 的主要优点是您可以选择只更新行中更改的字段（这比 DELETE 后跟 INSERT 快得多）。

# c# - 通过参数显示控制台窗口

> ID：427433
> 
> 赞同：2
> 
> 时间：2009-01-09T08:54:58.750
> 
> 标签：c#, windows, visual-studio-2005, console, winexe

我有一个 C# 项目构建没有控制台窗口的启动“winexe”。

但是，我想通过提供 cmd 行参数来显示控制台窗口并编写 stdout/stderr。如果它关闭，则应用程序关闭。例如：*eclipse.exe -debug*

如何做呢？

PS。我正在使用 Visual Studio 2005

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T09:12:13.850

试过这个： http: [//vaibhavgaikwad.wordpress.com/2007/02/21/console-window-for-a-windows-application-in-net/](http://vaibhavgaikwad.wordpress.com/2007/02/21/console-window-for-a-windows-application-in-net/) - 似乎完美！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T09:06:18.667

即使在 Windows 窗体应用程序中，控制台也在那里，您可以使用 开始编写`System.Console`，可能基于您提到的命令行选项，或配置开关，或其他。从控制台窗口提示符启动您的应用程序将像正常一样打开您的 GUI，并且控制台输出将按照您的预期显示在控制台中。例如，您甚至可以将该控制台输出重定向到一个文件。也许这对你来说已经足够了？

实际上，从您的 Windows 窗体应用程序开始显示控制台窗口是另一回事。不完全确定如何去做（如果可能的话）。我会考虑启动一个`cmd`实例，可能`System.Diagnostics.Process`用于在重定向`stdin`//该新进程`stdout`时启动一个`stderr`进程？

不过，这只是我目前的猜测。也许其他一些答案会在这里有所帮助？

# vb.net - 如何防止在从表单中读取数据时打开 MS Access 数据库

> ID：427436
> 
> 赞同：0
> 
> 时间：2009-01-09T08:56:34.053
> 
> 标签：vb.net, ms-access

要使用 vb.net 从 MS-Access 表单中计算 Activex 控件，我使用连接如下。

oDBEngine = oAccess.DBEngine oDB = oDBEngine.OpenDatabase(Name:=strFullFileName, Options:=False, ReadOnly:=False, Connect:="")

**并在设计模式下**打开表单，因为有一个用户输入提示表单，如果我们在默认视图中打开它，它会阻止我们进一步运行应用程序。

oAccess.DoCmd.OpenForm(FormName:=objForms.Name, View:=AcFormView.acDesign)

现在的问题是：

数据库打开，并且在运行应用程序时所有表单都打开。无论如何，我们只是阻止在阅读表单时打开数据库和表单。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T16:41:10.050

听起来像是一个未拆分的应用程序（单个 MDB 文件中的表和表单/等），并且它被多个用户共享。这是一个灾难性的场景。有关所有详细信息，请参阅[将 Microsoft Access MDB 拆分为前端和后端](http://www.granite.ab.ca/access/splitapp/index.htm)。

拆分后，您将处理单个副本，然后将更新分发给用户。关键是，自 2000 版以来，Access MDB 的设计（与*数据*相反）在任何用户打开时都无法编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T09:05:51.677

它可能适合使用新的空数据库并以编程方式导入表单。可以从 MSysObjects 获取表单列表（表单类型为 -32768）。

例如：

```
SELECT MsysObjects.Name
FROM MsysObjects IN 'C:\docs\LTD.mdb'
WHERE MsysObjects.Type=-32768 
```

EDIT PER COMMENT 此代码将进入 BLANK Access 数据库。

```
strSQL = "SELECT MsysObjects.Name " _
& "FROM MsysObjects IN 'C:\docs\LTD.mdb' " _
& "WHERE MsysObjects.Type = -32768"

Set rs = CurrentDb.OpenRecordset(strSQL)

Do While Not rs.EOF
    DoCmd.TransferDatabase acImport, "Microsoft Access", _
    "C:\docs\LTD.mdb", acForm, rs![Name], rs![Name]

    'Do what ever you wish with form, then '

    DoCmd.DeleteObject acForm, rs![Name]

    rs.MoveNext
Loop 
```

# c# - DataSet.Locale 有什么作用？

> ID：427439
> 
> 赞同：2
> 
> 时间：2009-01-09T08:57:32.553
> 
> 标签：c#, .net, datetime, dataset

有人可以告诉我 DataSet.Locale 的用途是什么，它可以用来解决这个问题吗？

我的服务器位于美国，我正在对其进行查询。远程服务器（美国）和本地的表中包含的数据相同。

问题是当我使用远程服务器的 WebService 检索数据集时。日期列显示上一个日期。例如，日期列具有“2007 年 1 月 14 日”，但检索时显示“2007 年 1 月 13 日”。

我无法确定原因，因为其他一切工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T09:17:48.253

听起来像是一个已知的 TimeZone 问题：更改 DataSet.Locale 无济于事。

查看以下知识库文章了解更多信息：[http://support.microsoft.com/kb/842545](http://support.microsoft.com/kb/842545)。

另请查看 DataColumn.DateTimeMode 属性，该属性控制 DateTime 列的序列化格式。将其设置为 DataSetDateTime.Unspecified 可确保在序列化时不添加偏移量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T04:19:10.627

如果 DateTime 类型的时间部分是 12:00:00，您可能会看到该问题。如果该值（2007 年 1 月 14 日上午 12:00）在 EST 中提交，那么当您穿越西部时区时它会被抵消（即 CST 中的 2007 年 1 月 13 日晚上 11:00）

解决此问题的最佳方法是确保以不变类型存储 DateTime 数据（将其转换为 UTC pr GMT）。然后，当您找到需要数据的任何消费者时，他们可以将数据更改为特定于区域设置的表示形式。如果您无法控制数据的保存方式，则只需确保在检索时将其转换为不变类型，然后再将其返回给客户端。

@Joe 引用的链接很有用，否则这里有一份相当大的白皮书，详细介绍了有关该问题的最佳实践。

[http://msdn.microsoft.com/en-us/library/ms973825.aspx](http://msdn.microsoft.com/en-us/library/ms973825.aspx)

这里还有一个关于一些新技术的堆栈溢出 Q'n'A。

[.NET 3.5 中 DateTime 序列化的最佳实践](https://stackoverflow.com/questions/65164/best-practices-for-datetime-serialization-in-net-framework-3-5-sql-server-2008)

*注意：在我添加的第一个链接中，有一个有趣的点是关于其中一些日期类型的序列化，这取决于您是否仍在 1.1/2.0 堆栈上。请注意这一点，因为它被我咬了几次;-)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T09:03:48.343

该属性用于确定数据集在比较其中的字符串时将使用的语言环境。

有关详细信息，请参阅[此处](http://msdn.microsoft.com/en-us/library/system.data.dataset.locale.aspx)的 MSDN 参考页面。

编辑：仅参考您的问题：“本地”机器在哪里？你不是有机会越过日期线到服务器吗？

# asp.net - 本地调试时提供 Default.aspx

> ID：427444
> 
> 赞同：1
> 
> 时间：2009-01-09T09:00:01.080
> 
> 标签：asp.net, webserver

任何想法为什么内置的 asp.net 网络服务器在您浏览到根目录“/”时坚持提供“/default.aspx”？

即使您在检测到“/default.aspx”时强制 global.asax 重定向到“/”，它也会将“/”视为对“/default.aspx”的请求，然后出现无限循环！

有人有办法解决这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T09:06:29.227

我假设您正在谈论 Cassini（Visual Studio 用于开发的那个） - 如果是这样，那么您就不走运了，因为您无法更改它使用的默认文档（或者无论如何我都不知道） .

要解决此问题，您可以将项目设置为使用本地 IIS 安装 - 这将使您能够更好地控制目录浏览、默认文档等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T10:06:58.980

如果您使用的是 Web 项目（使用 Visual Studio 2005 SP1 或 2008），则可以修改*从 Visual Studio 开始调试时*显示的起始页。您可以在项目属性页面的“Web”选项卡的“开始操作”部分中更改此设置。

-Edoode

# java - JPQL 中有这样的 CASE 表达式吗？

> ID：427447
> 
> 赞同：47
> 
> 时间：2009-01-09T09:00:41.860
> 
> 标签：java, oracle, orm, jpa

假设有一张桌子：

```
TableA:Field1, Field2, Field3 
```

和相关的 JPA 实体类

```
@Entity
@Table(name="TableA")
public class TableA{
  @Id
  @Column(name="Field1")
  private Long id;

  @Column(name="Field2")
  private Long field2;

  @Column(name="Field3")
  private Long field3;

  //... more associated getter and setter...
} 
```

有没有办法构造一个松散地翻译成这个SQL的JPQL语句，即如何将case表达式翻译成JPQL？

```
select field1,
case
  when field2 = 1 then 'One'
  when field2 = 2 then 'Two'
  else 'Other number'
end,
field3
from tableA; 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2011-09-05T13:17:45.090

它已被添加到 JPA 2.0

**用法：**

```
SELECT e.name, CASE WHEN (e.salary >= 100000) THEN 1 WHEN (e.salary < 100000) THEN 2 ELSE 0 END FROM Employee e 
```

**参考：** [http ://en.wikibooks.org/wiki/Java_Persistence/JPQL_BNF#New_in_JPA_2.0](http://en.wikibooks.org/wiki/Java_Persistence/JPQL_BNF#New_in_JPA_2.0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-02-23T13:06:34.023

Hibernate 中肯定有这样的东西，所以当您使用 Hibernate 作为您的 JPA 提供程序时，您可以编写查询，如下例所示：

```
 Query query = entityManager.createQuery("UPDATE MNPOperationPrintDocuments o SET o.fileDownloadCount = CASE WHEN o.fileDownloadCount IS NULL THEN 1 ELSE (o.fileDownloadCount + 1) END " +
                                            " WHERE o IN (:operations)");
    query.setParameter("operations", mnpOperationPrintDocumentsList);

    int result = query.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T19:23:11.133

当您加载数据库的一行时，您可以使用 Jpa 提供的事件侦听器来执行某些操作，即：

```
@Entity
@Table(name = "TableA")
public class TableA {

    @Id
    @Column(name = "Field1")
    private Long id;

    @Column(name = "Field2")
    private Long field2;

    @Column(name = "Field3")
    private Long field3;

    // ... more associated getter and setter...

    @Transient
    private String field4;

    @PostLoad
    private void onLoad() {
        if (field2 != null) {
            switch (field2.intValue()) {
            case 1:
                field4 = "One";
                break;
            case 2:
                field4 = "Two";
                break;
            default:
                field4 = "Other Number";
                break;
            }
        }
    }
} 
```

（field4 不会保留在数据库中）

（将其视为“JPA 中未实现的功能”的解决方法，如案例语句）

# sql - 按连续时间间隔对 SQL 结果进行分组（oracle sql）

> ID：427448
> 
> 赞同：2
> 
> 时间：2009-01-09T09:00:57.647
> 
> 标签：sql, oracle, date, continuous, intervals

您好，我在表中有以下数据：

ID-----startDate----endDate
5549 2008-05-01 4712-12-31
**5567 2008-04-17 2008-04-30 1
5567 2008-05-01 2008-07-31 1
5567 2008- 09-01 4712-12-31 2**
5569 2008-05-01 2008-08-31
5569 2008-09-01 4712-12-31
5589 2008-04-18 2008-04-30
5589 2008-05-01 4712- 12-31
5667 2008-05-01 4712-12-31
5828 2008-06-03 4712-12-31
5867 2008-06-03 4712-12-31
6167 2008-11-01 4712-12-31
6207 2008- 07-01 4712-12-31
6228 2008-07-01 4712-12-31
6267 2008-07-14 4712-12-31

我正在寻找将每个 id 返回的连续时间间隔分组的方法：

ID，最小值（开始日期），最大值（结束日期），

在粗体 ID 5567 的结果中得到类似的结果

5567 2008-04-17 2008-07-31
5567 2008-09-01 4712-12-31

PL/SQL 也是这里的一个选项 :)

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T11:04:34.170

我认为这将满足您的需要：（请注意，重叠范围可能会混淆；不知道它们是否可能在您的数据集中）

```
select id, min(start_date) period_start, max(end_date) period_end
from
(
select 
    id, start_date, end_date,
    max(contig) over (partition by id order by end_date) contiguous_group
from
(
select 
    id, start_date, end_date,
    case 
        when lag(end_date) over (partition by id order by end_date) != start_date-1 or row_number() over (partition by id order by end_date)=1 
            then row_number() over (partition by id order by end_date) else null end contig
from t2
)
)
group by id, contiguous_group
order by id, period_start
/ 
```

这是我使用的测试数据 - 基于您的数据，还有几个额外的条目：

```
create table t2 (id number, start_date date, end_date date);

insert into t2(id, start_date, end_date)values(5549, to_date('2008-05-01', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5567, to_date('2008-04-17', 'yyyy-mm-dd'), to_date('2008-04-30', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5567, to_date('2008-05-01', 'yyyy-mm-dd'), to_date('2008-07-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5567, to_date('2008-08-01', 'yyyy-mm-dd'), to_date('2008-08-14', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5567, to_date('2009-09-01', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5567, to_date('2008-11-17', 'yyyy-mm-dd'), to_date('2008-12-13', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5567, to_date('2008-12-14', 'yyyy-mm-dd'), to_date('2008-12-24', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5569, to_date('2008-05-01', 'yyyy-mm-dd'), to_date('2008-08-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5569, to_date('2008-09-01', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5589, to_date('2008-04-18', 'yyyy-mm-dd'), to_date('2008-04-30', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5589, to_date('2008-05-01', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5667, to_date('2008-05-01', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5828, to_date('2008-06-03', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(5867, to_date('2008-06-03', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(6167, to_date('2008-11-01', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(6207, to_date('2008-07-01', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(6228, to_date('2008-07-01', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));
insert into t2(id, start_date, end_date)values(6267, to_date('2008-07-14', 'yyyy-mm-dd'), to_date('4712-12-31', 'yyyy-mm-dd'));

commit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T11:05:29.097

你可以用这样的分析函数来做到这一点：

```
with d as
( select id, start_date, end_date
  ,      case when start_date = prev_end+1 
              then 'cont' else 'new' end start_status
  ,      case when end_date = next_start-1
              then 'cont' else 'new' end end_stat
  from
  (
  select id, start_date, end_date
  ,      lag(end_date) over (partition by id order by start_date) prev_end
  ,      lead(start_date) over (partition by id order by start_date) next_start
  from t1
  order by id, start_date
  )
)
select starts.id, starts.start_date, ends.end_date
from
( select id, start_date, row_number() over (order by id, start_date) rn
  from   d
  where  start_status='new'
) starts,
( select id, end_date, row_number() over (order by id, start_date) rn
  from   d
  where  end_status='new'
) ends
where starts.rn = ends.rn 
```

我用你的数据得到这个结果：

```
 ID START_DATE END_DATE
---------- ---------- ----------
      5549 2008-05-01 4712-12-31
      5567 2008-04-17 2008-07-31
      5567 2008-09-01 4712-12-31
      5569 2008-05-01 4712-12-31
      5589 2008-04-18 4712-12-31
      5667 2008-05-01 4712-12-31
      5828 2008-06-03 4712-12-31
      5867 2008-06-03 4712-12-31
      6167 2008-11-01 4712-12-31
      6207 2008-07-01 4712-12-31
      6228 2008-07-01 4712-12-31
      6267 2008-07-14 4712-12-31

12 rows selected. 
```

这个怎么运作：

1.  WITH子句生成数据的视图D，其中每一行都分配了一个“开始状态”和一个“结束状态”，每一个都是'new'或'cont'来表示它是否与上一行/下一行连续或不。
2.  内联视图“开始”和“结束”分别仅拉出具有“新”开始状态/结束状态的行，并使用行号将它们结合起来。
3.  “主查询”然后从这 2 个视图中选择并加入行号列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T09:18:55.647

您将必须编写如下所示的 PL/SQL 块示例逻辑；

```
Create or Replace someproc
Declare
    Cursore someCur AS
    Select * from someTable
    Order by ID,StartDate

    IDVar as Varchar(10)
    MinDate as DATE
    MaxDate as DATE

Begin
    Open someCur
    Fetch ID,StartDate,EndDate into IDVar,MinDate,MaxDate
    While SomeCur%NOTFOUND
    LOOP
        Fetch ID,StartDate,EndDate into TempID,TempStartDate,TempEndDate
        if IDVar <> TempID then
            -- output into your required structure values: IDVar,MinDate,MaxDate
            IDVar = TempID
            MinDate = TempStartDate
            MaxDate = TempEndDate
            Exit Loop
        ELSE IF
            MaxDate+1 >= TempStartDate THEN
            MaxDate = TempEndDate
        END IF
    End LOOP 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:28:32.227

我不在要测试的实例附近，但是您尝试过吗？

```
SELECT
 ID, 
 startDate,
 endDate
FROM
 myTable
WHERE
 (ID, startDate) in 
 (SELECT
   ID, 
   min(startDate) 
  FROM
   myTable
  GROUP BY
   ID
  )

  or 

 (ID, endDate) in 
 (SELECT
   ID, 
   max(endDate) 
  FROM
   myTable
  GROUP BY
   ID
  ) 
```

这应该为您提供所有最早`startDate`的 s，以及每个 ID 的最新`endDate`s。连续与否。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-15T13:24:32.080

```
WITH
  laik_test AS -- sample data
(select 1001 id, date'2012-01-03' start_date, date'2012-06-29' end_date from dual union
 select 1001 id, date'2012-03-03' start_date, date'2012-08-29' end_date from dual union
 select 1002 id, date'2012-06-03' start_date, date'2012-11-29' end_date from dual union
 select 1001 id, date'2012-09-03' start_date, date'2013-02-20' end_date from dual union
 select 1001 id, date'2013-02-08' start_date, date'2013-04-29' end_date from dual union
 select 1002 id, date'2012-11-03' start_date, date'2012-12-29' end_date from dual union
 select 1002 id, date'2012-12-23' start_date, date'2013-09-29' end_date from dual union
 select 1002 id, date'2013-08-03' start_date, date'2015-06-29' end_date from dual union
 select 1001 id, date'2013-04-13' start_date, date'2013-09-29' end_date from dual union
 select 1001 id, date'2013-07-03' start_date, date'2014-06-29' end_date from dual union
 select 1003 id, date'2012-12-23' start_date, date'2013-09-29' end_date from dual union
 select 1001 id, date'2013-07-03' start_date, date'2014-06-29' end_date from dual union
 select 1003 id, date'2012-12-23' start_date, date'2013-09-29' end_date from dual union
 select 1003 id, date'2013-09-30' start_date, date'2014-06-29' end_date from dual union
 select 1003 id, date'2013-12-30' start_date, date'2014-03-11' end_date from dual union
 select 1003 id, date'2014-06-29' start_date, date'2015-09-29' end_date from dual )
, matrica AS
(  select id, start_date, end_date
        , lead(start_date) over (partition by id order by start_date, end_date) start_date_next
        , lag(end_date) over (partition by id order by start_date, end_date) end_date_prev
  from laik_test m
 where not exists (select * 
                     from laik_test n
                    where m.id = n.id
                      and m.start_date > n.start_date and m.end_date < n.end_date))
, matrica2 AS
(select id, end_date
  from matrica m
 where start_date_next is null OR start_date_next > end_date + 1)
, matrica3 AS
(select id, start_date
  from matrica m
 where end_date_prev is null OR end_date_prev < start_date - 1)
, matrica4 AS
(select m2.id, m3.start_date, m2.end_date
  from matrica2 m2, matrica3 m3
 where m2.id=m3.id and m3.start_date < m2.end_date)
select id, start_date, end_date
  from matrica4 m
 where not exists (select * from matrica4 n
                    where m.id = n.id
                      and (   (n.start_date = m.start_date and m.end_date > n.end_date)
                           OR (n.end_date = m.end_date and m.start_date < n.start_date)
                          )); 
```

结果是：

```
ID   | start_date | end_date
1001 | 2012-01-03 | 2012-08-29
1001 | 2012-09-03 | 2014-06-29
1002 | 2012-06-03 | 2015-06-29
1003 | 2012-12-23 | 2015-09-29 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2010-07-09T10:06:37.763

我一直在尝试为重叠范围做一些事情，但对这些数据有些困难：

```
 INSERT INTO zzz_scrap_dates (id,effdate,termdate)

SELECT id,effdate,termdate from (
SELECT '1'id ,To_Date('2000-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '1'id ,To_Date('2000-01-01','YYYY-MM-DD')effdate,To_Date('2010-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '1'id ,To_Date('2005-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '1'id ,To_Date('2000-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '1'id ,To_Date('1999-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual
union
SELECT '2'id ,To_Date('2000-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '2'id ,To_Date('2000-01-01','YYYY-MM-DD')effdate,To_Date('2010-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '2'id ,To_Date('2005-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '2'id ,To_Date('2000-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '2'id ,To_Date('1999-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual
union
SELECT '3'id ,To_Date('2000-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '3'id ,To_Date('1998-01-01','YYYY-MM-DD')effdate,To_Date('1999-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '3'id ,To_Date('1005-01-01','YYYY-MM-DD')effdate,To_Date('1197-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '3'id ,To_Date('2000-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual
UNION
SELECT '3'id ,To_Date('1197-01-01','YYYY-MM-DD')effdate,To_Date('2020-01-31','YYYY-MM-DD')termdate FROM dual 
```

# c# - 尽管计算机进入待机模式，Window 应用程序可以继续运行吗？

> ID：427450
> 
> 赞同：2
> 
> 时间：2009-01-09T09:01:15.667
> 
> 标签：c#, .net, windows, windows-services

我正在使用 C#.net 开发一个 Windows 应用程序。这将接受登录详细信息，验证登录，然后在无人看管的情况下继续运行，直到计算机开启。

根据安全策略，这台计算机不会执行任何其他操作并在几分钟后进入待机模式。

有没有办法**配置我的应用程序以避免在计算机进入待机模式时进入睡眠状态**并保持应用程序运行？我知道我们可以通过将此应用程序安装为服务来做到这一点。但是，服务无法在不弹出打印对话框的情况下打印我的数据，因此，我无法将应用程序配置为服务。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-09T09:07:58.337

我不确定我是否完全理解 - 您希望您的应用程序在计算机处于睡眠状态时继续运行？如果是这样，那么您就无法做到这一点，它已经睡着了:) 机器睡眠时服务也不会继续运行。

当机器再次唤醒时，它应该仍然在运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T09:10:09.813

如果待机模式是指屏幕保护程序或锁定屏幕，那么任何标准应用程序仍将运行。如果通过待机模式您的意思是自动注销，则解决方案是创建 Windows 服务。这可以设置为在没有活动用户的系统上运行。如果待机模式是指处于睡眠或休眠模式，那么恐怕你运气不好，因为机器实际上不会运行任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T09:14:37.573

系统实际上不会在睡眠模式下工作，因此您的应用程序也不会。请注意，基本上所有可以做的就是执行唤醒。

# ruby - 如何输出 ruby 单元测试的名称

> ID：427451
> 
> 赞同：13
> 
> 时间：2009-01-09T09:02:18.470
> 
> 标签：ruby, unit-testing, testunit

我有一个单元测试（示例已修改[Test::Unit 文档](http://www.ruby-doc.org/stdlib/libdoc/test/unit/rdoc/classes/Test/Unit.html)）

```
require 'test/unit'

class TC_MyTest < Test::Unit::TestCase
  def test_something
    assert(true)
  end
end 
```

当我执行它时，我得到：

```
Loaded suite C:/test
Started
.
Finished in 0.0 seconds.

1 tests, 1 assertions, 0 failures, 0 errors 
```

我想得到这样的东西（`test_something`输出）：

```
Loaded suite C:/test
Started
test_something
.
Finished in 0.0 seconds.

1 tests, 1 assertions, 0 failures, 0 errors 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-09T15:15:30.693

如果您在 Rails 中进行测试，您可以使用

```
rake test TESTOPTS=-v 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-09T09:12:18.937

[使用详细](http://spattendesign.com/2007/10/11/ruby-unit-test-command-line-options)选项运行单元测试。

```
test.rb -v v 
```

或者

```
test.rb --verbose=verbose 
```

输出：

```
Loaded suite C:/test
Started
test_something(TC_MyTest): .

Finished in 0.0 seconds.

1 tests, 1 assertions, 0 failures, 0 errors 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T09:55:59.470

如果您正在创建自己的测试运行器，则命令行选项不起作用：

```
Test::Unit::UI::Console::TestRunner.run(TC_MyTest) 
```

您必须在测试运行程序中指定详细程度。[Test::Unit::UI 选项](http://www.ruby-doc.org/core/classes/Test/Unit/UI.html)有：

静音 = 0，PROGRESS_ONLY = 1，正常 = 2，详细 = 3。

所以，对于详细：

```
Test::Unit::UI::Console::TestRunner.run(TC_MyTest, 3) 
```

# jakarta-ee - 本地方法调用中的 EJB 事务

> ID：427452
> 
> 赞同：22
> 
> 时间：2009-01-09T09:02:25.180
> 
> 标签：jakarta-ee, transactions, ejb

在以下设置中，方法 B 是否在（新）事务中运行？

一个 EJB，有两种方法，方法 A 和方法 B

```
public class MyEJB implements SessionBean
    public void methodA() {
       doImportantStuff();
       methodB();
       doMoreImportantStuff();
    }

    public void methodB() {
       doDatabaseThing();
    }
} 
```

EJB 是容器管理的，methodB 在 requires_new 事务中，method A 在 required 事务中。因此：

```
<container-transaction id="MethodTransaction_1178709616940">
  <method id="MethodElement_1178709616955">
    <ejb-name>MyName</ejb-name>
    <method-name>*</method-name>
  <trans-attribute>Required</trans-attribute>
  </method>
  <method id="MethodElement_1178709616971">
    <ejb-name>MyName</ejb-name>
    <method-name>methodB</method-name>
  </method>
  <trans-attribute>RequiresNew</trans-attribute>
</container-transaction> 
```

现在让另一个 EJB 使用 EJB 方法调用来调用 methodA。methodA 现在在事务中运行。从 methodA 对 methodB 的后续调用会在同一个事务中运行，还是在新事务中运行？（请注意，这里是实际代码。没有对方法 B 的显式 ejb 调用）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-01-09T10:09:51.643

您的调用`methodB()`是对方法的普通调用，不会被 EJB 容器拦截；在运行时，EJB 容器将注入一个[代理](http://en.wikipedia.org/wiki/Proxy_pattern)而不是您的类的实例，这是它在调用您的方法之前拦截调用并设置环境的方式。如果你使用`this`你直接调用一个方法，而不是通过代理。因此，这两种方法都将使用相同的事务，而不管 ejb-jar.xml 中为通过 EJB 接口的调用定义了什么。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-08T12:11:38.750

注入 SessionContext，并要求它提供您的代理实例：

```
@Stateless
public class UserFacade implements UserFacadeLocal {
    @Resource
    private SessionContext context;

    @Override
    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    private void create(User user) {
        System.out.println("Users Count: "+count()); //invocation#1
        System.out.println("Users Count Through Context: "+context.getBusinessObject(UserFacadeLocal.class).count()); //invocation#2
    }

    @Override
    @TransactionAttribute(TransactionAttributeType.NEVER)
    public int count() {
        return ((Long) q.getSingleResult()).intValue();
    }
} 
```

在 'invocation#1' 这是一个本地调用，不通过代理，它将返回计数

在'invocation#2'中，这是通过代理的调用，因此您将其注释为不支持事务-现在由 create(user) 方法打开-，此调用将引发事务异常：

javax.ejb.EJBException：无法在全局事务中调用 EJB

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T09:22:03.313

他们将使用相同的交易。

如果我没记错的话，事务是由容器“在”该方法“完成”后调用和提交之前启动的。

由于“a”调用“b”，“b”将使用相同的事务。

:S

我想你能做的最好的事情就是测试它来验证它！:)

# python - 如何获取 Python 函数的源代码？

> ID：427453
> 
> 赞同：537
> 
> 时间：2009-01-09T09:02:37.863
> 
> 标签：python, function

假设我有一个如下定义的 Python 函数：

```
def foo(arg1,arg2):
    #do something with args
    a = arg1 + arg2
    return a 
```

我可以使用`foo.func_name`. 如上所述，我如何以编程方式获取其源代码？

* * *

## 回答 #1

> 赞同：671
> 
> 时间：2009-01-09T09:44:38.027

如果该函数来自文件系统上可用的源文件，那么[`inspect.getsource(foo)`](https://docs.python.org/3/library/inspect.html#inspect.getsource)可能会有所帮助：

如果`foo`定义为：

```
def foo(arg1,arg2):         
    #do something with args 
    a = arg1 + arg2         
    return a 
```

然后：

```
import inspect
lines = inspect.getsource(foo)
print(lines) 
```

回报：

```
def foo(arg1,arg2):         
    #do something with args 
    a = arg1 + arg2         
    return a 
```

但我相信，如果函数是从字符串、流编译或从编译文件导入的，那么您将无法检索其源代码。

* * *

## 回答 #2

> 赞同：216
> 
> 时间：2009-01-09T09:25:54.493

[检查模块](http://docs.python.org/library/inspect.html?highlight=inspect#retrieving-source-code)具有从 python 对象中检索源代码的方法。似乎它仅在源位于文件中时才有效。如果你有，我猜你不需要从对象中获取源。

* * *

以下测试`inspect.getsource(foo)`使用 Python 3.6：

```
import inspect

def foo(arg1,arg2):
    #do something with args
    a = arg1 + arg2
    return a

source_foo = inspect.getsource(foo)  # foo is normal function
print(source_foo)

source_max = inspect.getsource(max)  # max is a built-in function
print(source_max) 
```

这首先打印：

```
def foo(arg1,arg2):
    #do something with args
    a = arg1 + arg2
    return a 
```

然后失败`inspect.getsource(max)`并出现以下错误：

```
TypeError: <built-in function max> is not a module, class, method, function, traceback, frame, or code object 
```

* * *

## 回答 #3

> 赞同：112
> 
> 时间：2016-05-09T09:11:05.903

只需使用`foo??`or `??foo`。

如果您使用的是 IPython，那么您需要输入`foo??`或`??foo`查看完整的源代码。要仅查看函数中的文档字符串，请使用`foo?`或`?foo`。这也适用于 Jupyter 笔记本。

```
In [19]: foo??
Signature: foo(arg1, arg2)
Source:
def foo(arg1,arg2):
    #do something with args
    a = arg1 + arg2
    return a

File:      ~/Desktop/<ipython-input-18-3174e3126506>
Type:      function 
```

* * *

## 回答 #4

> 赞同：86
> 
> 时间：2013-06-28T06:11:18.280

`dis`如果源代码不可用，是你的朋友：

```
>>> import dis
>>> def foo(arg1,arg2):
...     #do something with args
...     a = arg1 + arg2
...     return a
...
>>> dis.dis(foo)
  3           0 LOAD_FAST                0 (arg1)
              3 LOAD_FAST                1 (arg2)
              6 BINARY_ADD
              7 STORE_FAST               2 (a)

  4          10 LOAD_FAST                2 (a)
             13 RETURN_VALUE 
```

* * *

## 回答 #5

> 赞同：73
> 
> 时间：2014-01-24T17:51:36.213

虽然我通常同意这`inspect`是一个很好的答案，但我不同意您无法获得解释器中定义的对象的源代码。如果您使用`dill.source.getsource`from [`dill`](https://github.com/uqfoundation/dill)，您可以获得函数和 lambda 的来源，即使它们是交互式定义的。它还可以从 curries 中定义的绑定或未绑定的类方法和函数中获取代码……但是，如果没有封闭对象的代码，您可能无法编译该代码。

```
>>> from dill.source import getsource
>>> 
>>> def add(x,y):
...   return x+y
... 
>>> squared = lambda x:x**2
>>> 
>>> print getsource(add)
def add(x,y):
  return x+y

>>> print getsource(squared)
squared = lambda x:x**2

>>> 
>>> class Foo(object):
...   def bar(self, x):
...     return x*x+x
... 
>>> f = Foo()
>>> 
>>> print getsource(f.bar)
def bar(self, x):
    return x*x+x

>>> 
```

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2014-08-03T17:23:42.080

要扩展 runeh 的答案：

```
>>> def foo(a):
...    x = 2
...    return x + a

>>> import inspect

>>> inspect.getsource(foo)
u'def foo(a):\n    x = 2\n    return x + a\n'

print inspect.getsource(foo)
def foo(a):
   x = 2
   return x + a 
```

编辑：正如@0sh 所指出的，这个例子使用`ipython`但不是普通`python`的。但是，从源文件导入代码时，两者都应该没问题。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2019-04-19T10:02:24.757

由于这篇文章被标记为[另一篇文章](https://stackoverflow.com/questions/334851/print-the-code-which-defined-a-lambda-function)的重复，我在这里回答“lambda”的情况，尽管 OP 不是关于 lambdas。

因此，对于未在自己的行中定义的 lambda 函数：除了[marko.ristin](https://stackoverflow.com/a/52333691/7262247)的答案，您可能希望使用[mini-lambda](https://smarie.github.io/python-mini-lambda/)或使用[SymPy ，如](https://www.sympy.org/fr/)[this answer](https://stackoverflow.com/a/3081433/7262247)中建议的那样。

*   `mini-lambda`更轻并且支持任何类型的操作，但仅适用于单个变量
*   `SymPy`更重但更配备数学​​/微积分运算。特别是它可以简化你的表达方式。它还支持同一表达式中的多个变量。

这是您可以使用的方法`mini-lambda`：

```
from mini_lambda import x, is_mini_lambda_expr
import inspect

def get_source_code_str(f):
    if is_mini_lambda_expr(f):
        return f.to_string()
    else:
        return inspect.getsource(f)

# test it

def foo(arg1, arg2):
    # do something with args
    a = arg1 + arg2
    return a

print(get_source_code_str(foo))
print(get_source_code_str(x ** 2)) 
```

它正确地产生

```
def foo(arg1, arg2):
    # do something with args
    a = arg1 + arg2
    return a

x ** 2 
```

有关详细信息，请参阅`mini-lambda` [文档](https://smarie.github.io/python-mini-lambda/)。顺便说一句，我是作者；）

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2017-07-09T13:47:03.273

您可以使用`inspect`模块来获取完整的源代码。您必须使用模块`getsource()`中的方法`inspect`。例如：

```
import inspect

def get_my_code():
    x = "abcd"
    return x

print(inspect.getsource(get_my_code)) 
```

您可以在以下链接中查看更多选项。 [检索您的 python 代码](https://docs.python.org/2/library/inspect.html#retrieving-source-code)

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2017-01-03T17:35:42.423

总结一下：

```
import inspect
print( "".join(inspect.getsourcelines(foo)[0])) 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-09-14T14:07:27.863

请注意，只有在单独的行上给出 lambda 时，接受的答案才有效。如果您将它作为参数传递给函数并希望将 lambda 的代码作为对象检索，那么问题会变得有点棘手，因为`inspect`它将给您整行。

例如，考虑一个文件`test.py`：

```
import inspect

def main():
    x, f = 3, lambda a: a + 1
    print(inspect.getsource(f))

if __name__ == "__main__":
    main() 
```

执行它会给你（注意缩进！）：

```
 x, f = 3, lambda a: a + 1 
```

在我看来，要检索 lambda 的源代码，最好的办法是重新解析整个源文件（使用`f.__code__.co_filename`）并通过行号及其上下文匹配 lambda AST 节点。

[我们必须在我们的按合同设计库icontract](https://github.com/Parquery/icontract)中精确地做到这一点，因为我们必须解析作为参数传递给装饰器的 lambda 函数。代码太多，这里贴一下，看看[这个函数的实现](https://github.com/Parquery/icontract/blob/6fb85fe00e91a0b27369a543642d071feb7740d6/icontract/represent.py#L157)。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2012-04-17T17:44:09.273

If you're strictly defining the function yourself and it's a relatively short definition, a solution without dependencies would be to define the function in a string and assign the eval() of the expression to your function.

E.g.

```
funcstring = 'lambda x: x> 5'
func = eval(funcstring) 
```

then optionally to attach the original code to the function:

```
func.source = funcstring 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-08-31T21:54:21.563

[Rafał Dowgird 的回答](https://stackoverflow.com/a/427533/3047698)说：

> 我相信，如果函数是从字符串、流编译或从编译文件导入的，那么您将无法检索其源代码。

但是，如果编译代码还向dict添加了一个条目，*则可以检索从字符串编译的函数的源代码：*`linecache.cache`

```
import linecache
import inspect

script = '''
def add_nums(a, b):
    return a + b
'''

bytecode = compile(script, 'unique_filename', 'exec')
tmp = {}
eval(bytecode, {}, tmp)
add_nums = tmp["add_nums"]

linecache.cache['unique_filename'] = (
    len(script),
    None,
    script.splitlines(True),
    'unique_filename',
)

print(inspect.getsource(add_nums))

# prints:
# """
# def add_nums(a, b):
#    return a + b
# """ 
```

这就是[`attrs`库](https://www.attrs.org/en/stable/)自动为类创建各种方法的方式，给定类期望初始化的一组属性。在这里查看他们的[源代码](https://github.com/python-attrs/attrs/blob/fcb7393f53f12a80ff9fcf931b0d16686ed98c58/src/attr/_make.py#L323-L351)。正如消息来源所解释的那样，这是一个主要旨在使 PDB 等调试器能够单步执行代码的功能。

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2009-01-09T09:38:47.650

我*相信*变量名不会存储在 pyc/pyd/pyo 文件中，因此如果您没有源文件，则无法检索确切的代码行。

# bash - 使用自定义命令完成行

> ID：427472
> 
> 赞同：29
> 
> 时间：2009-01-09T09:11:41.823
> 
> 标签：bash, unix, customization, autocomplete

我的 Python 程序可以使用一系列不同的选项（或子命令）启动，例如：

```
$ myProgram doSomething
$ myProgram doSomethingElse
$ myProgram nowDoSomethingDifferent 
```

我希望它使用自动完成功能，这样如果我输入“myProgram d”，它会返回“myProgram doSomething”，如果我输入“myProgram n”，它会呈现“myProgram nowDoSomethingDifferent”。这类似于模块*rlcompleter*的平均使用，但它不会从文件系统（或历史记录）中选择可能的完成选项，而是从一组自定义字符串（对应于我的程序的可用选项）中选择可能的完成选项

关于如何实现这一点的任何想法？

我知道变量 PYTHONSTARTUP （它应该指向一个我不知道如何编写的文件）。

作为一个工作示例，django-admin（来自 django 包）具有我正在寻找的相同功能

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-01-09T10:20:23.557

创建一个文件“myprog-completion.bash”并将其源到您的 .bashrc 文件中。像这样的东西让你开始......

```
_myProgram()
{
  cur=${COMP_WORDS[COMP_CWORD]}
  case "${cur}" in
    d*) use="doSomething" ;;
    n*) use="nowDoSomethingElse" ;;
  esac
  COMPREPLY=( $( compgen -W "$use" -- $cur ) )
}
complete -o default -o nospace -F _myProgram  myProgram 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-01-09T12:36:32.823

有一个**[optcomplete](http://furius.ca/optcomplete/)**模块，它允许您在 python 程序中编写 bash 自动完成的完成。这与 optparse 结合使用非常有用。您只需定义一次参数，将以下内容添加到您的 .bashrc

```
complete -F _optcomplete <program> 
```

您的所有选项都将自动完成。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-01T14:01:53.737

正如其他答案中提到的，在 bash 中，这可以使用 bash-builtin 来完成`complete`。比编写函数（如[richq 的答案](https://stackoverflow.com/a/427608/3596168)）更容易的是使用`complete`'s 选项`-W`，它可以让您指定单词列表。在您的示例中，这将是：

```
complete -W "doSomething doSomethingElse nowDoSomethingDifferent" myProgram 
```

由于它是单行的，因此您不必为此创建文件，但您可以将其放入您的`.bashrc`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-01-09T09:24:07.633

如果我理解正确，您希望在 python 脚本启动之前在命令行上完成行。那么你不应该搜索python解决方案，而是查看shell功能。

如果您使用 bash，您可以查看 /etc/bash_completion，至少在 debian/ubuntu 上，您应该在 /etc/bash_completion.d/ 中创建一个文件，指定程序的完成。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-09T09:21:41.037

据我所知， PYTHONSTARTUP 用于在解释器启动时执行命令[[1]](http://www.python.org/doc/1.5.2p2/tut/node4.html)。如果它正在使用库，则用于*在*`rlcompleter`脚本中自动完成。像这样的东西：*`readline`*

 *```
$ ./myscript.py
My Script version 3.1415.
Enter your commands:
myscript> B<TAB>egin
myscript> E<TAB>nd 
```

在您的示例中，您希望在*shell*命令行上完成。这个自动补全是一个 shell 特性（`bash`或者`zsh`，无论你使用什么）。例如，请参阅[bash 自动完成简介](http://www.debian-administration.org/articles/316)（也是[第 2 部分](http://www.debian-administration.org/articles/317)）。例如`zsh`，请参阅[本指南](http://www.ibm.com/developerworks/aix/library/au-satzsh.html#N102BF)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T09:28:28.310

如果你希望你的程序选择一个命令行选项，即使你只使用了这个选项的缩写形式，你应该看看标准库中的[optparse 模块](http://docs.python.org/library/optparse.html)。

# c - 钳制真实（固定/浮点）值的最快方法？

> ID：427477
> 
> 赞同：42
> 
> 时间：2009-01-09T09:13:11.693
> 
> 标签：c, numbers, bit-manipulation, clamp

有没有比使用 if 语句或三元运算符更有效的方法来钳制实数？我想为双打和 32 位定点实现 (16.16) 执行此操作。我**不是**要求可以处理这两种情况的代码。它们将在单独的函数中处理。

显然，我可以这样做：

```
double clampedA;
double a = calculate();
clampedA = a > MY_MAX ? MY_MAX : a;
clampedA = a < MY_MIN ? MY_MIN : a; 
```

或者

```
double a = calculate();
double clampedA = a;
if(clampedA > MY_MAX)
    clampedA = MY_MAX;
else if(clampedA < MY_MIN)
    clampedA = MY_MIN; 
```

固定点版本将使用函数/宏进行比较。

这是在代码的性能关键部分完成的，所以我正在寻找一种尽可能有效的方法来做到这一点（我怀疑这会涉及位操作）

编辑：它必须是标准/可移植的 C，平台特定的功能在这里没有任何意义。此外，`MY_MIN`并且`MY_MAX`与我想要钳制的值的类型相同（在上面的示例中为双精度）。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-05-20T22:18:08.387

GCC 和 clang 都为以下简单、直接、可移植的代码生成漂亮的程序集：

```
double clamp(double d, double min, double max) {
  const double t = d < min ? min : d;
  return t > max ? max : t;
} 
```

`> gcc -O3 -march=native -Wall -Wextra -Wc++-compat -S -fverbose-asm clamp_ternary_operator.c`

GCC 生成的程序集：

```
maxsd   %xmm0, %xmm1    # d, min
movapd  %xmm2, %xmm0    # max, max
minsd   %xmm1, %xmm0    # min, max
ret 
```

`> clang -O3 -march=native -Wall -Wextra -Wc++-compat -S -fverbose-asm clamp_ternary_operator.c`

Clang 生成的程序集：

```
maxsd   %xmm0, %xmm1
minsd   %xmm1, %xmm2
movaps  %xmm2, %xmm0
ret 
```

三个指令（不包括 ret），没有分支。优秀的。

这是在带有 Core i3 M 350 的 Ubuntu 13.04 上使用 GCC 4.7 和 clang 3.2 测试的。顺便说一下，调用 std::min 和 std::max 的直接 C++ 代码生成了相同的程序集。

这是给双打的。对于 int，GCC 和 clang 都生成带有 5 条指令（不包括 ret）且没有分支的程序集。也很优秀。

我目前没有使用定点，所以我不会对定点发表意见。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2011-07-03T22:52:14.173

老问题，但我今天正在解决这个问题（双打/浮点数）。

最好的方法是对浮点数使用 SSE MINSS/MAXSS，对双精度数使用 SSE2 MINSD/MAXSD。它们是无分支的，每个都需要一个时钟周期，并且由于编译器内在函数而易于使用。与使用 std::min/max 的钳位相比，它们赋予了超过一个数量级的性能提升。

你可能会感到惊讶。我当然做到了！不幸的是，即使启用了 /arch:SSE2 和 /FP:fast，VC++ 2010 也会对 std::min/max 使用简单的比较。我不能代表其他编译器。

这是在 VC++ 中执行此操作的必要代码：

```
#include <mmintrin.h>

float minss ( float a, float b )
{
    // Branchless SSE min.
    _mm_store_ss( &a, _mm_min_ss(_mm_set_ss(a),_mm_set_ss(b)) );
    return a;
}

float maxss ( float a, float b )
{
    // Branchless SSE max.
    _mm_store_ss( &a, _mm_max_ss(_mm_set_ss(a),_mm_set_ss(b)) );
    return a;
}

float clamp ( float val, float minval, float maxval )
{
    // Branchless SSE clamp.
    // return minss( maxss(val,minval), maxval );

    _mm_store_ss( &val, _mm_min_ss( _mm_max_ss(_mm_set_ss(val),_mm_set_ss(minval)), _mm_set_ss(maxval) ) );
    return val;
} 
```

双精度代码是相同的，只是用 xxx_sd 代替。

编辑：最初我按照评论编写了钳位函数。但是查看汇编程序的输出，我注意到 VC++ 编译器不够聪明，无法剔除多余的动作。少一个指令。:)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2011-09-15T01:26:50.710

如果你的处理器有一个快速的绝对值指令（就像 x86 一样），你可以做一个无分支的 min 和 max，这将比`if`语句或三元运算更快。

```
min(a,b) = (a + b - abs(a-b)) / 2
max(a,b) = (a + b + abs(a-b)) / 2 
```

如果其中一项为零（在您进行钳制时通常是这种情况），则代码会进一步简化：

```
max(a,0) = (a + abs(a)) / 2 
```

当您组合这两个操作时，您可以将两者替换`/2`为一个`/4`或`*0.25`保存一个步骤。

在我的 Athlon II X2 上使用优化 FMIN=0 时，以下代码比三进制快 3 倍以上。

```
double clamp(double value)
{
    double temp = value + FMAX - abs(value-FMAX);
#if FMIN == 0
    return (temp + abs(temp)) * 0.25;
#else
    return (temp + (2.0*FMIN) + abs(temp-(2.0*FMIN))) * 0.25;
#endif
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-01-17T11:30:47.343

三元运算符确实是要走的路，因为大多数编译器都能够将它们编译成使用条件移动而不是分支的本机硬件操作（从而避免错误预测惩罚和管道泡沫等）。**位操作可能会导致 load-hit-store**。

特别是，带有 SSE2 的 PPC 和 x86 有一个硬件操作，可以表示为这样的内在东西：

```
double fsel( double a, double b, double c ) {
  return a >= 0 ? b : c; 
} 
```

优点是它在管道内部执行此操作，而不会导致分支。事实上，如果你的编译器使用了内在函数，你可以直接用它来实现你的钳位：

```
inline double clamp ( double a, double min, double max ) 
{
   a = fsel( a - min , a, min );
   return fsel( a - max, max, a );
} 
```

我强烈建议您**避免使用整数运算对双精度进行位操作**。在大多数现代 CPU 上，除了往返于 dcache 之外，没有直接的方法在 double 和 int 寄存器之间移动数据。这将导致称为 load-hit-store 的数据危害，它基本上清空 CPU 管道，直到内存写入完成（通常大约 40 个周期左右）。

例外情况是双精度值已经在内存中而不是在寄存器中：在这种情况下，不存在加载命中存储的危险。但是，您的示例表明您刚刚计算了双精度并从函数返回它，这意味着它可能仍在 XMM1 中。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-01-09T10:09:18.477

对于 16.16 表示，简单的三进制不太可能在速度方面得到改进。

而对于双打，因为你需要它标准/便携式 C，任何类型的位摆弄都会以糟糕的方式结束。

即使有可能（我怀疑），你也会依赖双打的二进制表示。这（及其大小）取决于实施。

可能您可以使用 sizeof(double) 来“猜测”这一点，然后将各种 double 值的布局与其常见的二进制表示进行比较，但我认为您是在隐藏起来。

最好的规则是告诉编译器你想要什么（即三元），让它为你优化。

**编辑：**谦虚的馅饼时间。我刚刚测试了 quinmars 的想法（如下），它可以工作 - 如果你有 IEEE-754 浮点数。这给下面的代码带来了大约 20% 的加速。IObviously 不可移植，但我认为可能有一种标准化的方式来询问您的编译器是否使用带有#IF 的 IEEE754 浮点格式......？

```
 double FMIN = 3.13;
  double FMAX = 300.44;

  double FVAL[10] = {-100, 0.23, 1.24, 3.00, 3.5, 30.5, 50 ,100.22 ,200.22, 30000};
  uint64  Lfmin = *(uint64 *)&FMIN;
  uint64  Lfmax = *(uint64 *)&FMAX;

    DWORD start = GetTickCount();

    for (int j=0; j<10000000; ++j)
    {
        uint64 * pfvalue = (uint64 *)&FVAL[0];
        for (int i=0; i<10; ++i)
            *pfvalue++ = (*pfvalue < Lfmin) ? Lfmin : (*pfvalue > Lfmax) ? Lfmax : *pfvalue;
    }

    volatile DWORD hacktime = GetTickCount() - start;

    for (int j=0; j<10000000; ++j)
    {
        double * pfvalue = &FVAL[0];
        for (int i=0; i<10; ++i)
            *pfvalue++ = (*pfvalue < FMIN) ? FMIN : (*pfvalue > FMAX) ? FMAX : *pfvalue;
    }

    volatile DWORD normaltime = GetTickCount() - (start + hacktime); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-01-09T10:07:29.650

IEEE 754 浮点位的排序方式是，如果您比较解释为整数的位，您将获得与直接将它们比较为浮点数相同的结果。因此，如果您找到或知道一种钳位整数的方法，您也可以将其用于 (IEEE 754) 浮点数。抱歉，我不知道更快的方法。

正如 rkj 所说，如果您将浮点数存储在数组中，则可以考虑使用一些 CPU 扩展，例如 SSE3。你可以看看 liboil 它为你做了所有的脏活。尽可能保持程序的可移植性并使用更快的 cpu 指令。（我不确定如何独立于操作系统/编译器的 liboil）。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2010-03-21T15:23:19.313

我通常不使用测试和分支，而是使用这种格式进行钳位：

```
clampedA = fmin(fmax(a,MY_MIN),MY_MAX); 
```

虽然我从来没有对编译后的代码做过任何性能分析。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-01-09T10:06:13.507

实际上，没有像样的编译器会在 if() 语句和 ?: 表达式之间产生差异。代码很简单，他们将能够发现可能的路径。也就是说，您的两个示例并不相同。使用 ?: 的等效代码是

```
a = (a > MAX) ? MAX : ((a < MIN) ? MIN : a); 
```

因为当 a > MAX 时避免 A < MIN 测试。现在这可能会有所作为，否则编译器将不得不发现两个测试之间的关系。

如果夹紧很少见，您可以通过一次测试来测试是否需要夹紧：

```
if (abs(a - (MAX+MIN)/2) > ((MAX-MIN)/2)) ... 
```

例如，当 MIN=6 和 MAX=10 时，这将首先将 a 向下移动 8，然后检查它是否位于 -2 和 +2 之间。这是否节省任何东西在很大程度上取决于分支的相对成本。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-01-09T19:36:09.200

这是一个可能更快的实现，类似于[@Roddy 的答案](https://stackoverflow.com/questions/427477/fastest-way-to-clamp-a-real-fixed-floating-point-value#427580)：

```
typedef int64_t i_t;
typedef double  f_t;

static inline
i_t i_tmin(i_t x, i_t y) {
  return (y + ((x - y) & -(x < y))); // min(x, y)
}

static inline
i_t i_tmax(i_t x, i_t y) {
  return (x - ((x - y) & -(x < y))); // max(x, y)
}

f_t clip_f_t(f_t f, f_t fmin, f_t fmax)
{
#ifndef TERNARY
  assert(sizeof(i_t) == sizeof(f_t));
  //assert(not (fmin < 0 and (f < 0 or is_negative_zero(f))));
  //XXX assume IEEE-754 compliant system (lexicographically ordered floats)
  //XXX break strict-aliasing rules
  const i_t imin = *(i_t*)&fmin;
  const i_t imax = *(i_t*)&fmax;
  const i_t i    = *(i_t*)&f;
  const i_t iclipped = i_tmin(imax, i_tmax(i, imin));

#ifndef INT_TERNARY
  return *(f_t *)&iclipped;
#else /* INT_TERNARY */
  return i < imin ? fmin : (i > imax ? fmax : f); 
#endif /* INT_TERNARY */

#else /* TERNARY */
  return fmin > f ? fmin : (fmax < f ? fmax : f);
#endif /* TERNARY */
} 
```

请参阅[计算两个整数的最小值 (min) 或最大值 (max) 而无需分支](http://www.cs.utk.edu/~vose/c-stuff/bithacks.html#IntegerMinOrMax)和[比较浮点数](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

> IEEE 浮点和双精度格式的设计使数字是“按字典顺序排列的”，用 IEEE 架构师 William Kahan 的话来说，这意味着“如果对相同格式的两个浮点数进行排序（比如 x < y），那么当它们的位被重新解释为符号幅度整数时，它们的排序方式相同。”</p>

一个测试程序：

```
/** gcc -std=c99 -fno-strict-aliasing -O2 -lm -Wall *.c -o clip_double && clip_double */
#include <assert.h> 
#include <iso646.h>  // not, and
#include <math.h>    // isnan()
#include <stdbool.h> // bool
#include <stdint.h>  // int64_t
#include <stdio.h>

static 
bool is_negative_zero(f_t x) 
{
  return x == 0 and 1/x < 0;
}

static inline 
f_t range(f_t low, f_t f, f_t hi) 
{
  return fmax(low, fmin(f, hi));
}

static const f_t END = 0./0.;

#define TOSTR(f, fmin, fmax, ff) ((f) == (fmin) ? "min" :       \
                  ((f) == (fmax) ? "max" :      \
                   (is_negative_zero(ff) ? "-0.":   \
                    ((f) == (ff) ? "f" : #f))))

static int test(f_t p[], f_t fmin, f_t fmax, f_t (*fun)(f_t, f_t, f_t)) 
{
  assert(isnan(END));
  int failed_count = 0;
  for ( ; ; ++p) {
    const f_t clipped  = fun(*p, fmin, fmax), expected = range(fmin, *p, fmax);
    if(clipped != expected and not (isnan(clipped) and isnan(expected))) {
      failed_count++;
      fprintf(stderr, "error: got: %s, expected: %s\t(min=%g, max=%g, f=%g)\n", 
          TOSTR(clipped,  fmin, fmax, *p), 
          TOSTR(expected, fmin, fmax, *p), fmin, fmax, *p);
    }
    if (isnan(*p))
      break;
  }
  return failed_count;
}  

int main(void)
{
  int failed_count = 0;
  f_t arr[] = { -0., -1./0., 0., 1./0., 1., -1., 2, 
        2.1, -2.1, -0.1, END};
  f_t minmax[][2] = { -1, 1,  // min, max
               0, 2, };

  for (int i = 0; i < (sizeof(minmax) / sizeof(*minmax)); ++i) 
    failed_count += test(arr, minmax[i][0], minmax[i][1], clip_f_t);      

  return failed_count & 0xFF;
} 
```

在控制台中：

```
$ gcc -std=c99 -fno-strict-aliasing -O2 -lm *.c -o clip_double && ./clip_double 
```

它打印：

```
error: got: min, expected: -0\.  (min=-1, max=1, f=0)
error: got: f, expected: min    (min=-1, max=1, f=-1.#INF)
error: got: f, expected: min    (min=-1, max=1, f=-2.1)
error: got: min, expected: f    (min=-1, max=1, f=-0.1) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-08-19T17:39:20.610

我自己尝试了 SSE 方法，并且汇编输出看起来更干净，所以一开始我很受鼓舞，但在计时了数千次之后，它实际上慢了很多。看起来 VC++ 编译器确实不够聪明，无法知道你真正想要什么，而且它似乎在不应该的时候在 XMM 寄存器和内存之间来回移动。也就是说，当编译器似乎对所有浮点计算都使用 SSE 指令时，我不知道为什么编译器不够聪明，无法在三元运算符上使用 SSE min/max 指令。另一方面，如果您正在为 PowerPC 进行编译，则可以在 FP 寄存器上使用 fsel 内在函数，而且速度更快。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-11-14T17:22:09.137

如上所述，fmin/fmax 函数运行良好（在 gcc 中，使用 -ffast-math）。尽管 gfortran 具有使用对应于 max/min 的 IA 指令的模式，但 g++ 没有。在 icc 中必须使用 std::min/max，因为 icc 不允许缩短 fmin/fmax 如何与非有限操作数一起工作的规范。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-10-26T20:32:43.807

我在 C++ 中的 2 美分。可能与使用三元运算符没有什么不同，希望不会生成分支代码

```
template <typename T>
inline T clamp(T val, T lo, T hi) {
    return std::max(lo, std::min(hi, val));
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-09T09:21:45.517

如果我理解正确，您希望将值“a”限制在 MY_MIN 和 MY_MAX 之间的范围内。“a”的类型是双精度。您没有指定 MY_MIN 或 MY_MAX 的类型。

简单的表达：

```
clampedA = (a > MY_MAX)? MY_MAX : (a < MY_MIN)? MY_MIN : a; 
```

应该做的伎俩。

如果 MY_MAX 和 MY_MIN 恰好是整数，我认为可能需要进行一些小的优化：

```
int b = (int)a;
clampedA = (b > MY_MAX)? (double)MY_MAX : (b < MY_MIN)? (double)MY_MIN : a; 
```

通过更改为整数比较，您可能会获得轻微的速度优势。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-05-20T07:46:22.450

如果您想使用快速绝对值指令，请查看我在 minicomputer 中找到的这段代码[片段](http://minicomputer.sourceforge.net/)，它将浮点数限制在 [0,1] 范围内

```
clamped = 0.5*(fabs(x)-fabs(x-1.0f) + 1.0f); 
```

（我稍微简化了代码）。我们可以认为它取两个值，一个反映为 >0

```
fabs(x) 
```

另一个反映大约 1.0 为 <1.0

```
1.0-fabs(x-1.0) 
```

我们取它们的平均值。如果它在范围内，那么这两个值将与 x 相同，因此它们的平均值将再次为 x。如果超出范围，则其中一个值为 x，另一个值为 x 翻转“边界”点，因此它们的平均值将恰好是边界点。

# javascript - 以编程方式在选项卡上打开新页面

> ID：427479
> 
> 赞同：105
> 
> 时间：2009-01-09T09:15:49.257
> 
> 标签：javascript, internet-explorer-7, safari, tabs

我正在尝试“强制”Safari 或 IE7*使用新选项卡*打开新页面。

以编程方式，我的意思是：

```
window.open('page.html','newtaborsomething'); 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2009-01-09T09:32:45.023

您可以在 Firefox 中工作，将属性 target="_newtab" 添加到锚点以强制打开新选项卡。

```
<a href="some url" target="_newtab">content of the anchor</a> 
```

在javascript中你可以使用

```
window.open('page.html','_newtab'); 
```

说，我部分同意山姆。你不应该强迫用户打开新页面或新标签，而不是在他们点击链接**之前**向他们显示将要发生的事情的提示。

让我知道它是否也适用于其他浏览器（目前我没有机会在 Firefox 以外的其他浏览器上尝试它）。

编辑：为 ie7 添加了参考 也许这个链接很有用
[http://social.msdn.microsoft.com/forums/en-US/ieextensiondevelopment/thread/951b04e4-db0d-4789-ac51-82599dc60405/](http://social.msdn.microsoft.com/forums/en-US/ieextensiondevelopment/thread/951b04e4-db0d-4789-ac51-82599dc60405/)

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2009-01-09T09:35:40.743

您无法直接控制它，因为它是由 Internet Explorer 用户控制的选项。

使用具有不同窗口名称的 Window.open 打开页面将在新的浏览器窗口中打开，如弹出窗口，*或者*在新选项卡中打开，如果用户配置浏览器这样做。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2011-02-24T21:48:56.410

那些尝试使用以下内容的人：

```
window.open('page.html', '_newtab'); 
```

真的应该看看 window.open 方法。

您所做的只是告诉浏览器打开一个名为“_newtab”的新窗口并将 page.html 加载到其中。您加载的每个新页面都将加载到该窗口中。但是，如果用户将浏览器设置为在新选项卡而不是新窗口中打开新页面，它将打开一个选项卡。无论如何，它对窗口或选项卡使用相同的名称。

如果您希望在不同的窗口或选项卡中打开不同的页面，则必须将新窗口/选项卡的名称更改为不同的名称，例如：

```
window.open('page2.html', '_newtab2'); 
```

当然，新窗口/选项卡的名称可以是任何名称，例如 page1、page2、page3 等，而不是 _newtab2。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-01-09T09:20:37.890

是否要使用新选项卡或新窗口取决于用户，修改此行为不是开发人员的业务。我不认为你能做到。

我的烦恼-当网站强迫我在新窗口/标签中打开时，我讨厌它-我完全有能力为自己做出决定。特别是当他们在 javascript 中执行此操作时 - 这真的无济于事。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2011-02-09T10:22:28.820

你是否已经尝试过

```
var open_link = window.open('','_blank');
open_link.location="somepage.html"; 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-02-12T16:10:14.753

**这工作 100%**

`window.open('http://www.google.com/','_newtab' + Date.now());`

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2010-03-01T19:39:37.087

我在 Chrome 中发现，

```
window.open('page.html','_newtab') 
```

只会工作一次。

您可以使用：

```
window.open(ct.getNewHref(),'_newtab' + Math.floor(Math.random()*999999)); 
```

打开多个新标签。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-11-08T23:05:23.327

我与 jQuery 一起使用的代码：

```
$("a.btn_external").click(function() {
    url_to_open = $(this).attr("href");
    window.open(url_to_open, '_blank');
    return false;
}); 
```

这对于区分子项中父项的单击事件很有用。通过使用这种方法，您不会触发父级的点击事件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-10T20:16:59.530

如果您愿意，可以使用这种方法，这有点 hacky，但会提供所需的功能：

```
jQuery('<a/>', {
    id: 'foo',
    href: 'http://google.com',
    title: 'Become a Googler',
    rel: 'external',
    text: 'Go to Google!',
    target:'_blank',
    style:'display:none;'
}).appendTo('#mySelector');

$('#foo').click() 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2011-11-28T07:45:29.200

如果您可以调用批处理文件，这可能会起作用（我在 XP sp2 和 IE8 中使用 php ...您可以尝试 IE7，不知道）。在 .bat 文件中使用以下（或类似内容）打开 Windows：启动“C:\Progra~1\Intern~1\iexplore”http://www.site.com“。引号和 C:\Progr... 等之间没有空格。在某些时候，这可能会开始打开新窗口（即 target="_blank"）而不是新选项卡，但在一定程度上可以工作；没有经过广泛测试。要在常规批处理文件 (CMD.exe) 中使用它，您可能需要已经打开一个窗口。只是分享一些我偶然发现的东西。为澄清而编辑。

* * *

## 回答 #11

> 赞同：-7
> 
> 时间：2010-04-22T19:19:12.337

```
<a href="http://www.google.com/" target="_self">New Tab Example</a> 
```

在 IE7 中工作。

问候，

格伦

# java - java.awt.颜色错误

> ID：427482
> 
> 赞同：0
> 
> 时间：2009-01-09T09:17:37.350
> 
> 标签：java, jsp, resin

我有这个简单的 Jsp 页面：

```
<%@ page language="java" import="java.awt.Color"%> <%
Color background = Color.white;
%> 
```

失败并出现以下错误：

```
java.lang.NoClassDefFoundError
    at _text__jsp._jspService(/text.jsp:3)
    at com.caucho.jsp.JavaPage.service(JavaPage.java:75)
    at com.caucho.jsp.Page.subservice(Page.java:506)
    at com.caucho.server.http.FilterChainPage.doFilter(FilterChainPage.java:182)
    at com.caucho.server.http.Invocation.service(Invocation.java:315)
    at com.caucho.server.http.CacheInvocation.service(CacheInvocation.java:135)
    at com.caucho.server.http.RunnerRequest.handleRequest(RunnerRequest.java:346)
    at com.caucho.server.http.RunnerRequest.handleConnection(RunnerRequest.java:274)
    at com.caucho.server.TcpConnection.run(TcpConnection.java:139)
    at java.lang.Thread.run(Thread.java:534) 
```

我在 Resin 2.1.13 上运行它。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T20:53:41.650

过去，我在 servlet 容器中使用过 AWT 类。需要处理的问题是，在服务器系统上，可能没有运行 AWT 可以连接的图形显示器，这在默认情况下会导致它失败。

解决方案是传递一个系统属性，告诉 AWT 它在“无头”系统上运行。通常，这是通过将“-Djava.awt.headless=true”传递给 java 命令行来完成的。

以下是有关为 Resin 完成此操作的参考：http: [//www.caucho.com/support/resin-interest/0209/0062.html](http://www.caucho.com/support/resin-interest/0209/0062.html)。该线程中的 OP 还报告了 NoClassDefFound 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T09:48:35.570

不确定这个问题。我可以在我的 Tomcat 中成功运行您的代码。可能这个问题是 Resin 特有的。或者，正如戴夫所说，可能是一个无头问题。

您最好的选择是将图像转换为一些 POJO，然后将其发送到浏览器，或者将其保存在磁盘上的某个位置，然后将其链接到您的 JSP 中。如果问题仍然存在，请尝试在无头模式下运行，正如 Dave 指出的那样。

此外，重要的是要了解 JSP 是一种用于 Web 的视图技术，不能进行那种图形操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T07:11:13.130

我在 Linux 上的 Tomcat 上遇到了同样的问题。我会间歇性地收到此消息。这是由于操作系统上打开的文件描述符的数量最大化。

我不确定Java如何根据需要加载类，但我认为这个限制阻止了它从运行时加载它需要的类。

我遵循了此处概述的这些说明：

[如何更改 Linux 中打开文件的数量限制？](https://stackoverflow.com/questions/34588/how-do-i-change-the-number-of-open-files-limit-in-linux)

即：

在 /etc/security/limits.conf 中设置硬限制

```
* hard nofile 64000 
```

注销并再次登录，然后运行：

```
ulimit -n 64000 
```

在启动 Tomcat 之前在我的 shell 会话中。我将上述命令添加到我的 .bashrc 文件中，以确保每次登录时都设置了限制。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-01-09T09:26:35.397

某些带有 -server 选项的 VM 不加载 java.awt。完全打包（也不是 javax.swing 和其他）

这是为了避免加载不需要的类。

顺便说一句，班级

```
java.awt.Color 
```

在 jsp 页面中不会有任何用处。它用于在 java 桌面应用程序中显示颜色。

你想做什么？也许有更好的方法。

# c# - 如何使用 Name 属性枚举 .NET 中的线程？

> ID：427485
> 
> 赞同：14
> 
> 时间：2009-01-09T09:20:13.100
> 
> 标签：c#, multithreading

假设我像这样启动两个线程：

```
// Start first thread
Thread loaderThread1 = new Thread(loader.Load);
loaderThread1.Name = "Rope";
loaderThread1.Start();

// Start second thread
Thread loaderThread2 = new Thread(loader.Load);
loaderThread2.Name = "String";
loaderThread2.Start(); 
```

有什么方法可以通过使用它们的 Name 属性来枚举线程？

我想能够检查具有特定名称的线程是否仍在运行。

我创建的每个线程都使用一组命名的数据，数据集的名称用作处理数据的线程的名称。在启动工作线程之前，我想查看是否有任何先前用于同一组数据的线程已经在运行。

我使用时得到的线程`System.Diagnostics.GetCurrentProcess().Threads`是类型的`ProcessThread`，不是`Thread`！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T09:25:03.853

我怀疑您可能必须将线程放入 a`Dictionary<string,Thread>`中才能正常工作-但是您为什么仍然想要它？线程之间通常还有其他通信方式（任何锁定/等待对象）。

要在进程级别工作（即不考虑`Thread`对象），请参见[此处](http://www.java2s.com/Code/CSharp/Development-Class/ListThreads.htm)- 您可以将其限制为当前进程，但您将无法与线程交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T09:47:02.860

另请注意，线程名称不需要是唯一的。似乎使用线程 ID 可能是一个更好的选择......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-01-09T11:05:06.460

所以，在我对进程线程的错误之后，这里有一种方法来保存你的线程。没什么了不起的，但我认为编码示例在任何时候都非常方便。

```
List<Thread> threads = new List<Thread>();

for (int i = 0; i < 10; i++)
{

    Thread t = new Thread(delegate()
        {
        do
        {
            Thread.Sleep(50);
        } while (true);
        });

    t.IsBackground = true;
    t.Name = i.ToString();
    t.Start();
    threads.Add(t);
}

foreach (Thread t in threads)
{
    Console.WriteLine(t.Name);
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-01-09T12:53:53.707

我想你想要以下

System.Diagnostics.Process.GetCurrentProcess().Threads

# vba - 希望 Excel 中的 VBA 读取非常大的 CSV 并创建一小部分 CSV 的输出文件

> ID：427488
> 
> 赞同：11
> 
> 时间：2009-01-09T09:20:54.207
> 
> 标签：vba, csv, excel

我有一个包含 120 万条文本记录的 csv 文件。字母数字字段用引号括起来，日期/时间或数字字段不是。

例如 "Fred","Smith",01/07/1967,2,"7, The High Street","Anytown","Anycounty","LS1 7AA"

我想要做的是在 Excel 中编写一些 VBA（或多或少是我相当精通使用的唯一可用工具），逐条读取 CSV 记录，执行检查（因为它发生在最后一个字段上，邮政编码），然后将 1.2m 记录的一小部分输出到一个新的输出文件。

我了解如何打开这两个文件、读取记录、对数据执行我需要执行的操作并将其写出（我将仅输出带有表示异常类型的前缀的输入记录）

我不知道如何正确解析 VBA 中的 CSV。我无法进行简单的文本扫描并搜索逗号，因为文本有时包含逗号（因此文本字段是文本分隔的）

是否有一个很棒的命令可以让我快速从记录中的第 n 个字段中获取数据？

我想要的是 s_work = field(s_input_record,5) 其中 5 是我的 CSV 中的字段编号....

非常感谢， C

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-09T10:39:12.690

下面的代码应该可以解决问题。我面前没有 Excel，所以我没有测试它，但这个概念是合理的。

如果这最终太慢，我们可以寻找提高效率的方法。

```
Sub SelectSomeRecords()
    Dim testLine As String

    Open inputFileName For Input As #1
    Open outputFileName For Output As #2

    While Not EOF(1)
        Line Input #1, testLine
        If RecordIsInteresting(testLine) Then
            Print #2, testLine
        End If
    Wend

    Close #1
    Close #2
End Sub

Function RecordIsInteresting(recordLine As String) As Boolean
    Dim lineItems(1 to 8) As String

    GetRecordItems(lineItems(), recordLine)

    ''// do your custom checking here:
    RecordIsInteresting = lineItems(8) = "LS1 7AA"
End Function

Sub GetRecordItems(items() As String, recordLine as String)
    Dim finishString as Boolean
    Dim itemString as String
    Dim itemIndex as Integer
    Dim charIndex as Long
    Dim inQuote as Boolean
    Dim testChar as String

    inQuote = False
    charIndex = 1
    itemIndex = 1
    itemString = ""
    finishString = False

    While charIndex <= Len(recordLine)
        testChar = Mid$(recordLine, charIndex, 1)

        finishString = False

        If inQuote Then
            If testChar = Chr$(34) Then
                inQuote = False
                finishString = True
                charIndex = charIndex + 1 ''// ignore the next comma
            Else
                itemString = itemString + testChar
            End If
        Else
            If testChar = Chr$(34) Then
                inQuote = True
            ElseIf testChar = "," Then
                finishString = True
            Else
                itemString = itemString + testChar
            End If
        End If

        If finishString Then
            items(itemIndex) = itemString
            itemString = ""
            itemIndex = itemIndex + 1
        End If

        charIndex = charIndex + 1
    Wend
End Sub 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-09T09:29:51.647

VBScript 怎么样，虽然这也适用于 Excel：

```
Set cn = CreateObject("ADODB.Connection")

'Note HDR=Yes, that is, first row contains field names '
'and FMT delimted, ie CSV '

strCon="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\Docs\;" _
& "Extended Properties=""text;HDR=Yes;FMT=Delimited"";"

cn.open strcon

'You would not need delimiters ('') if last field is numeric: '    
strSQL="SELECT FieldName1, FieldName2 INTO New.csv FROM Old.csv " _
& " WHERE LastFieldName='SomeTextValue'"

'Creates new csv file
cn.Execute strSQL 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T09:35:14.553

这并不能直接回答您的问题，但是`grep`（或 Windows 等效项之一）确实会为此大放异彩，例如，

```
grep -e <regex_filter> foo.csv > bar.csv 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-10T19:00:20.783

我使用上面给出的代码的以下衍生代码在 Excel 中成功地从 VBA 打开了任意 csv 文件。

> 选项 Explicit
> Public cn As Connection
> Public Sub DoIt()
> Dim strcon As String
> Dim strsql As String
> Dim rs As Recordset
> 
> 设置 cn = CreateObject("ADODB.Connection")
> 
> strcon = "提供者=Microsoft.Jet.OLEDB.4.0;数据源=C:\bin\HomePlanet\;" _
> & "扩展属性=""text;HDR=Yes;FMT=Delimited"";"
> 
> cn.打开strcon
> 
> strsql = "SELECT * FROM astuname.csv"
> Set rs = New ADODB.Recordset
> rs.Open strsql, cn
> DoEvents ' 在此处暂停以检查对象和属性 rs.Close
> End Sub

rs（记录集）有一个字段集合，带有一个 Count 属性。每个字段作为一个 Type 属性。

您可以按序列号引用字段...

> Debug.Print rs.Fields(rs.Fields.Count - 1).Type

这足够了吗？

如果没有，请发布输入文件的前几行，我将继续使用它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-10T17:29:54.117

查看`Input #`Excel帮助中的语句

示例用法为：

```
Input #fnInput, s_Forename, s_Surname, dt_DOB, i_Something, s_Street, s_Town, s_County, s_Postcode 
```

然后使用`Write #`语句再次写出匹配的记录

唯一的问题可能是输出中的日期格式将结束为#1967-07-01#，但这种格式与 01/07/1967 不同，它代表英国的 7 月 1 日和美国的 1 月 7 日。如果您需要保留日期的格式，请将其写为字符串：

```
s_DOB = Format(dt_DOB, "dd/mm/yyyy") 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-10T18:11:10.603

您可以在 excel 中使用 vba 一次执行的任何操作，都可以使用 vba 进行访问；加上更多，因为它是一个数据库而不是电子表格。您无法访问吗？

处理逻辑表、记录和字段比处理逻辑工作表、行和列要容易得多。

对于输入，为什么“/Data/Import External Data/Text/csv”不起作用？输入不是真正可移植的csv吗？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-09T18:07:59.627

我建议看一下正则表达式库（您应该在“工具...参考”中将其视为“Microsoft VBScript 正则表达式 5.5”或类似的东西。

在此位置有 Reg Exp 和相当全面的逐字符示例：http: [//www.xbeat.net/vbspeed/c_ParseCSV.php](http://www.xbeat.net/vbspeed/c_ParseCSV.php)。请注意，Regexp 版本要短得多！

玩得开心...

# windows - 是否可以通过 C# windows 应用程序（通过 SMTP 服务器发送的邮件）将邮件文本超链接到驻留在远程系统中的 Exe？

> ID：427514
> 
> 赞同：-1
> 
> 时间：2009-01-09T09:32:43.700
> 
> 标签：windows

通过我的 Windows 应用程序向一个人发送邮件“要求他登录到安装在远程服务器中的另一个 Windows 应用程序以使用它”。在邮件内容中，我想要一个超链接，可以直接将他带到那个 Windows 应用程序！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T09:46:45.900

我不使用您的问题，但如果您需要链接到另一台计算机上的 EXE 文件，例如：

计算机A有一个EXE文件，计算机A向计算机B发送一封电子邮件，带有指向该EXE文件的超链接计算机B在自己的计算机上运行该EXE文件，或者让计算机A运行该EXE文件

对不起，但那是不可能的。如果您需要在电子邮件上运行 EXE 文件，只需将其作为附件发送，并且用户必须保存该 exe 文件并运行它——您不能像那样自动执行任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T09:56:22.263

如果我正确理解您的问题，您喜欢：

*   向另一个用户发送电子邮件。
*   邮件包含指向（网络？）应用程序的链接，该应用程序使用户能够登录

如果您想要一个网络应用程序，您可以使用例如 ASP.NET 或 PHP 构建一个。

如果您想要一个独立 (EXE) 应用程序，用户可以下载 exe 文件并在另一台机器上执行它。在这种情况下，FTP 是首选协议。

关于有限许可的备注。如果许可证允许您在 Web 上共享应用程序，则您可以分发限时许可证。但我仍然认为，更好的解决方案是通过 Web 界面访问应用程序。在这种情况下，您可以选择允许多少并发用户使用该应用程序。

# asp.net - CompositeScript - 无效的视图状态错误

> ID：427516
> 
> 赞同：1
> 
> 时间：2009-01-09T09:33:44.383
> 
> 标签：asp.net, scriptmanager

我正在为 ScriptManager 使用 ASP.NET 3.5 SP1 中提供的新 CompositeScript 功能。

当我使用 ASP.NET 开发服务器对其进行测试时，它工作正常，但是当我将站点发布到我的 IIS 网络服务器时，无法下载组合文件，我总是收到以下错误：无效的 ViewState。

添加到 ScripResourceHandler 的查询字符串很长（原因？？）：

```
<script type="text/javascript" src="/ScriptResource.axd?d=8PM7kHuMMquT4Ta6cvC_2JLE_mKmYLeDWgV9z71Ryu5-7LRuy1v7MkEzM-M-NoE92QPDzXGBBSohhGbO17FKHqTZ9xMJx_5WaNrJTiwoFF28dlc6k02jRhN73u_Ohv7CKe-QPUdCOnzsBblNlopier7Ijd66Jp6Z0voAkZp36RzWYd64G9SOBCUs1HTu7oRQJTOlWyAd26O2r3S7Js7VX1YddtK-zO7DHa272a5-BitDkKTubnMPlwyYnW0Cn7TVK7NCjyF_o1E6wgPWY4THH56YNMtyRKeTrGFzMjTkiOmv18i2ePMHErlWYBXiL0If47bfPbNtfIeAMQAT8xX_DMBN6VR74GDlJSXQpFcGadNsKocZ4EOonDLykWf6Oq4ISr54_c-k_zzma5f6qFk1fXx8n8Vphe_QL67R-7aDlwBH9CrK-IBsuYDDeMSlTMWAZ6TRIhZSAyVANvh2VPZ8eBmGD0BpVA7D8e2vA1l6_kbC7w6CmGCEok-Cb1dqQPjgwB6Ho199M3IWrdwbUkN2leiDXn9bkZMGWA75IyjYiDisAz97JyA9AtDolhYGbxJ_AVrIpNpZFOQBZsXBkLfoo7iZmzHLwG7HNPhodtaekPAcxiKgi7Xf62DEnb20VRYMCFH8Qzfx5u4nlzZo4n7ZMkxDpWPlB65LCeCtvC6ZIl1kbq9FJ9dlf_DAkNU3-KKy__87Tzz9RWx6ucLXRGuljodLjiT8wrWRET_CpCspnHqpByBxEXiOi1_jW0e6_GjfZ9Fqk9GIXsSoTvnZmz_J68d28rSafQVKO1O06AjHCCBd7wh5mY-ISSLFaZ0pPszjdgVYxnC83ujaY9SWmRxUb_lPT4VdYG1Q02iyRO2l7BIDO-NiF77V_kklBhQRZ5ZiT3Vbf-JL6EZISThBJuh3WA2"> 
```

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T19:15:21.223

我认为 ScriptResource.axd 的链接无效。

AFAIK，ScriptResource.axd 上的查询字符串由两个参数（d 和 t）组成。d 参数是一个加密字符串，包括程序集、版本号（如果适用）和嵌入在所述程序集中的资源（即 javascript 文件）的名称。加密基于机器密钥。t 参数是更新程序集的日期（以刻度为单位）。

如果您查看 Reflector 并查看 System.Web 程序集并查看 UI.Page，则有一个名为 DecryptString 的私有方法。我现在不在 Windows 上，但如果你往下看 DecryptString，你会看到最终你会得到一个异常“无效的视图状态”。

有几种不同的方法可以进行复合脚本和脚本组合。但我不认为任何 ScriptManager 控件（AjaxToolKit 也有一个）真正做到了这一点。在实践中，我发现你总是在外面留下一些脚本。

需要考虑的其他一些资源是： Omar Al Zabir 在 codeproject 的帖子：http: [//www.codeproject.com/KB/aspnet/HttpCombine.aspx](http://www.codeproject.com/KB/aspnet/HttpCombine.aspx)和[http://www.codeproject.com/KB/aspnet/fastload。 .aspx](http://www.codeproject.com/KB/aspnet/fastload.aspx) _ Omar 也有一本涵盖性能的好书。

同样在 codeproject 上，Moiz Dhanji 的方法略有不同：http: [//www.codeproject.com/KB/aspnet/AspNetOptimizer.aspx。](http://www.codeproject.com/KB/aspnet/AspNetOptimizer.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-16T07:06:06.537

Martin 指出的 Omar 和 Moiz 方法的另一种变体是 Cristian 在他的[N2 CMS 项目](http://n2cms.googlecode.com/svn/trunk/src/wwwroot/Edit/Js/plugins.ashx.cs)中采用的一种。

这个想法是，不是在配置文件中描述每组脚本，而是为每组创建一个虚拟子文件夹。然后，根据请求，一个特殊的 HTTP 处理程序所要做的就是遍历请求的目录并处理在那里找到的所有文件。

# c - 从 IP 地址中查找接口名称

> ID：427517
> 
> 赞同：11
> 
> 时间：2009-01-09T09:34:27.440
> 
> 标签：c, linux

我需要通过提供 IP 地址来获取接口名称。没有系统调用可以得到这个。

我需要在 C 或 C++ 中实现这一点

Stack Overflow 上已经提供了与此相反的内容，*[Finding an IP address from an interface name](https://stackoverflow.com/questions/259389/finding-an-ip-from-an-interface-name)*。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-09T19:55:47.037

使用[`getifaddrs(3)`](http://man7.org/linux/man-pages/man3/getifaddrs.3.html). 简单的例子。用法 "./foo 123.45.67.89" 请添加错误检查等：

```
#include <stdlib.h>
#include <string.h>
#include <arpa/inet.h>
#include <net/if.h>
#include <ifaddrs.h>

int main(int argc, char *argv[]) {
  struct ifaddrs *addrs, *iap;
  struct sockaddr_in *sa;
  char buf[32];

  getifaddrs(&addrs);
  for (iap = addrs; iap != NULL; iap = iap->ifa_next) {
    if (iap->ifa_addr && (iap->ifa_flags & IFF_UP) && iap->ifa_addr->sa_family == AF_INET) {
      sa = (struct sockaddr_in *)(iap->ifa_addr);
      inet_ntop(iap->ifa_addr->sa_family, (void *)&(sa->sin_addr), buf, sizeof(buf));
      if (!strcmp(argv[1], buf)) {
        printf("%s\n", iap->ifa_name);
      }
    }
  }
  freeifaddrs(addrs);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-01-09T09:43:56.873

你能简单地解析类似的输出吗

```
 netstat -ie | grep -B1 "192.168.21.10" 
```

-B1 部分告诉 grep 我们想在输出中包含匹配*之前*的行，所以我们得到这个：

```
eth0      Link encap:Ethernet  HWaddr 00:13:72:79:65:23
          inet addr:192.168.21.10  Bcast:192.168.21.255  Mask:255.255.255.0 
```

一旦您有信心获得所需的输出，您就可以将其进一步压缩成单行......

```
netstat -ie | grep -B1 "192.168.21.10" | head -n1 | awk '{print $1}' 
```

只返回“eth0”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-12T14:57:14.697

有时，`ip route list`可能足以过滤接口并提供整洁的输出。它不是基于“IP地址”，而是它所属的网络。

```
ip route list 10.9.0.0/24 | awk '{print $3}'
eno2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-17T15:52:33.990

更可靠：

```
netstat -ie | grep -B1 ":10.2.34.3 " | head -n1 | awk '{print $1}' 
```

`netstat -ie | grep -B1 "<ip-address>"`必须小心使用，因为如果您有多个网络适配器，例如 `IP1= 210.2.3.4 (eth0)`和 `IP2=10.2.3.4 (eth1)`，那么该命令`netstat -ie | grep -B1 "10.2.3.4"`将找到两个适配器作为结果。但预期的结果只有一个。

所以更可靠的版本是：

```
netstat -ie | grep -B1 ":<ip-address> " 
```

（注意最后的空白 - 这是故意的）

# sql-server - 是否可以从 MS SQL 数据库备份中仅恢复模式和存储过程？

> ID：427526
> 
> 赞同：3
> 
> 时间：2009-01-09T09:39:42.967
> 
> 标签：sql-server, restore

我有一个完整的 MS SQL 备份文件，我想从中提取存储过程和架构。有没有办法**只**恢复模式定义和存储过程而不恢复数据/表行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T09:43:32.337

我不这么认为，但您可以将其还原到临时数据库，然后从那里编写脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T09:44:15.343

您使用的是什么 SQL Server 版本（和工具）？在 SQL 2000 下，我记得“导入/导出数据”向导，它可以让您指定要导入的对象和位置。您甚至可以执行查询来获取数据子集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T05:33:34.030

是的，它在 SQL Server 2012 中是可能的。右键单击您的数据库 -> 任务 -> 生成脚本 ...

在这里，所有选项都可用。

# mysql - 删除并加入同一个表

> ID：427537
> 
> 赞同：2
> 
> 时间：2009-01-09T09:47:40.830
> 
> 标签：mysql

是否可以执行连接同一个表的删除查询语句，我尝试了各种连接（内，左）但没有运气mysql返回错误

我需要的例子：

```
DELETE `a` FROM `t1` AS `a`
INNER JOIN `t1` AS `b` USING `some_field_b`
WHERE 
    `a`.`some_field_a` = 'value_x' AND 
    `b`.`some_field_a` = 'value_y' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T09:53:28.993

尽管该[手册](http://dev.mysql.com/doc/refman/5.0/en/delete.html)似乎建议 INNER JOIN 语法应该在 DELETE 中工作，但我知道这种将 join 子句移至 where 条件的替代方案将起作用....

```
DELETE  a.* FROM t1 AS a, t1 as b 
WHERE 
    a.some_field_b=b.some_field_b AND
    a.some_field_a = value_x AND 
    b.some_field_a = value_y 
```

编辑：我刚试过这个，它对我有用：

```
DELETE a FROM t1 AS a 
INNER JOIN t1 as b USING(some_field_b) 
WHERE 
    a.some_field_a = value_x AND 
    b.some_field_a = value_y 
```

# sql - 使用 distinct 进行 SQL Server 查询的最佳方法

> ID：427549
> 
> 赞同：0
> 
> 时间：2009-01-09T09:53:49.040
> 
> 标签：sql, sql-server, tsql

我有两个表：TableA 和 TableB，由 TableA.TableA_Id->1..n<-TableB.TableA_Id 连接。一个简单的PK-FK。

在给定 TableB 的特定条件下，我需要提取**不同的TableA 记录。**这是我的第一种方法：

SELECT * FROM TableA A INNER JOIN TableB B ON A.idA = B.IdA AND B.Date = '2009-01-10' ORDER BY A.Id;

这很好，但它并没有给我“不同”的记录。表 B 上的某些记录可能是重复的，因此我可以多次获得相同的记录。

所以我决定执行一个子选择（性能不是问题，因为子选择可能最终最多有 20/30 条记录）：

SELECT * FROM TableA WHERE TableA.Id IN (SELECT DISTINCT IdA FROM TableB WHERE Date = '20090110') 按 TableA.IdA 排序；

这工作正常。

现在的问题是：如何使用 Inner Join 并仍然获得不同的值？这是否可以一次性完成，或者嵌套查询是必须的？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T14:15:39.550

使用派生表

```
SELECT * FROM TableA 
JOIN
(SELECT DISTINCT IdA FROM TableB WHERE Date = '20090110') a
ON a.IDA = TAbleA.IDA
ORDER BY TableA.IdA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T14:38:12.483

我认为你需要一个正常的存在语句：

```
SELECT * 
FROM TableA A 
WHERE Exists( select B.IdA from TableB B where A.IdA = B.IdA and B.Date = '2009-01-10' )
ORDER BY A.Id; 
```

在性能方面，它应该是最好的方法。

如果您需要另一个表中的值，并且为了避免使用 distinct，您可以加入一个像这样分组的子查询：

```
Select TableA.*, groupedTableB.OtherData 
From TableA
Inner join 
(
    select TableB.IdA, Sum(TableB.Data) SummaryData
    from TableB where TableB.Date = '2009-01-10'
    group by TableB.IdA

) groupedTableB on groupedTableB.IdA = TableA.IdA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T10:00:45.063

和使用的问题

```
SELECT DISTINCT * FROM TableA A INNER JOIN TableB B ON A.idA = B.IdA
AND B.Date = '2009-01-10' ORDER BY A.Id;

```

是？

如果它确实返回了重复的 idA 值，那是因为您选择了太多列，如果您无法减少选择的内容，则需要子查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T14:24:05.100

这个怎么样 ：

```
select * from TableA a 
  where a.TableA_Id in
(select TableA_Id from TableB where [Date] = '2009-01-10')
order by a.TableA_Id 
```

`You could add distinct`如果您愿意，可以到子查询，我不确定这是否会提高或降低性能。

# sql - 如何在水晶报表中获取日期时间差异

> ID：427558
> 
> 赞同：-1
> 
> 时间：2009-01-09T09:57:41.853
> 
> 标签：sql, crystal-reports, report

如何获取 Crystal Report 中 2 个 DateTime 字段之间的 DateTime 差异？

我尝试使用 DateDiff 运气不佳，

任何帮助/提示将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T12:32:52.347

您没有提供太多信息来帮助我们解决您的问题。

使用 dateDiff 没有得到任何结果可能意味着您的数据中某处存在 Null 值。

在“文件/报告选项”级别，您可以“将 Null 值转换为默认值”（这可能不是正确的翻译，因为我没有使用英文版的 CR..）。选择此选项，以便数据库中的空日期将被视为函数中的日期。尝试获取您的 dateDiff 结果。如果它仍然不起作用，请使用草稿报告来显示函数中的所有中间结果，或者尝试用 Basic Syntax 而不是 Crystal Syntx 编写它。

# delphi - 通过单击列标题使用 FIBDataSet 对 DBAdvGrid 进行排序

> ID：427565
> 
> 赞同：0
> 
> 时间：2009-01-09T10:02:41.250
> 
> 标签：delphi, tms, fibplus

我发现上述问题的唯一解决方案是将“ORDER BY”语句附加到 FIBDataSet 的 SQL 查询中。有点奇怪，因为 Grid 有它自己的 quicksort() 实现，但我无法让它工作。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T14:17:18.220

Grid 的排序方法通常做“内存中排序”。

如果你使用的是 Devrace 的 FibPlus，那么 TpFibDataset 继承自 TFibDataset，它内置了 SQL 解析和 ORDER BY 更改的实现。

# c# - 如果我将 CurrentCultureInfo 设置为 en-us 会发生什么

> ID：427568
> 
> 赞同：1
> 
> 时间：2009-01-09T10:04:00.033
> 
> 标签：c#, .net, datetime, cultureinfo

我正在使用连接到美国远程数据库的客户端应用程序。结果中出现了一些日期时间歧义，例如数据库中的日期是否为 1 月 14 日，它返回为 1 月 13 日。

我想知道如果我将客户端的 CurrentCultureInfo 设置为等于我的服务器将解决问题。

如果可以做到这一点..我想要一个相同的小例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T10:38:15.127

您的文化用于格式化。您似乎遇到的问题是不同时区之一。

我对此的简单解决方案是始终以 UTC 存储日期和时间。您可以从客户端使用 DateTime.UtcNow ，如有必要，您可以稍后将其转换回本地时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T12:34:47.287

如果您无法将存储日期更改为 UTC 时间并在插入和选择数据时来回转换。然后，除非您的数据被插入到服务器上，否则您将不得不记录一些东西来告诉您数据来自哪里（我的意思是插入数据的客户端的本地时区）。

如果您的数据只是在服务器上插入，那么您可能可以使用 SQL 函数 GetUTCDate 并将其与 GetDate 进行比较，然后从存储在数据库中的日期时间中减去结果。然后在客户端使用 DateTime.ToLocalTime() 将返回值转换为本地时间。正如我所说，这仅在数据专门插入服务器或至少由同一时区的客户端插入时才有效。否则算了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T10:13:34.320

问题是美国本身有几个不同的时区，所以这不是一个解决方案。我能想到的一种解决方法是将客户端计算机的时区设置为服务器的时区，但这听起来并不正确。

# wpf - 在 ControlTemplate 中将 ContentStringFormat 属性与 TextBlock 一起使用

> ID：427575
> 
> 赞同：2
> 
> 时间：2009-01-09T10:07:14.003
> 
> 标签：wpf, xaml

我有一个简单的 ControlTemplate 按钮，它为它们创建了类似链接的外观：

```
 <ControlTemplate x:Key="LinkTemplate" TargetType="{x:Type Button}">
    <TextBlock Text="{TemplateBinding Content}">
        <TextBlock.Style>
            <Style TargetType="{x:Type TextBlock}">
                <Setter Property="Foreground" Value="Blue" />
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="TextDecorations" Value="Underline" />
                        <Setter Property="Cursor" Value="Hand" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Foreground" Value="Gray" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </TextBlock.Style>
    </TextBlock>
</ControlTemplate> 
```

这很好用，但是当我想使用 ContentStringFormat 属性来格式化按钮的内容时就会出现问题。由于 TextBlock 没有 ContentStringFormat 属性，我不能使用模板绑定。

我也尝试在绑定按钮的内容时使用 StringFormat，但它似乎被忽略了，原始内容文本在模板绑定中传递给 TextBlock。

我想我可以使用转换的值并将 ContentStringFormat 作为参数传递给它，但感觉不对。

有没有办法使用纯粹的 XAML 来做到这一点，或者我应该只使用值转换器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-28T11:20:56.547

我不知道 ContentStringFormat 的用法是什么，但是您可以使用 ContentPresenter 而不是 TextBlock 来使用此属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-03T15:03:50.463

我没有找到“ContentStringFormat”的文档，所以我可能在这里遗漏了一些微不足道的东西。

如何在 ControlTemplate 中使用 Fil Forte 的[BindableRun](http://fortes.com/2007/03/bindablerun/)以便可以格式化运行。[Lubo Blagoev](http://www.blagoev.com/Blog/post/Building-a-WPF-LinkLabel-control.aspx)已经创建了一个可以做到这一点的控件。

# java - Java中的corba问题

> ID：427578
> 
> 赞同：0
> 
> 时间：2009-01-09T10:08:45.093
> 
> 标签：java, corba

我遇到了一个问题，我编写了一个在我的开发机器上完美运行并且在 Lab 系统上完美运行的 Java 应用程序，但是当我将它安装到客户端机器上时，我收到以下错误：

org.omg.CosNaming.NamingContextPackage.NotFound: IDL:omg.org/CosNaming/NamingContext/NotFound:1.0

有谁知道可能出了什么问题？我是否缺少 Jar 文件？或者客户端可能安装了错误的 Java 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T10:45:10.277

没关系，我一直是个笨蛋并误解了例外。

找不到我尝试连接的 corba 命名服务，而不是包...

哥们我是不是觉得自己很傻...

# asp.net - 样品要求： nant-contrib 的任务

> ID：427586
> 
> 赞同：2
> 
> 时间：2009-01-09T10:11:27.100
> 
> 标签：asp.net, deployment, installation, nant, nantcontrib

谁能给我一个示例构建文件，演示如何使用 nant-contrib 任务来创建 Web 应用程序项目的安装程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-26T09:41:38.023

这个 ：）

```
<?xml version="1.0"?> 
<project name="Scanner" xmlns="http://nant.sf.net/release/0.85/nant.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://nant.sf.net/release/0.85/nant.xsd http://ilqhfaatc1ws628/nant.xsd"> 

<!-- Nant command line: 
c:\nant\nant   -debug+ /f:"D:\LaptopServiceTools\ShortFilenameFailure.build.xml" -v+ create.msi 
--> 
<target name="create.msi"> 

<setenv> 
  <!--Set path to CabArc.exe.--> 
  <variable name="PATH" path="c:\Program Files\Microsoft Visual Studio 8\Common7\Tools\Bin\;%PATH%" /> 
</setenv> 

<msi sourcedir="c:\" output="c:\test.msi"> 
  <properties> 
    <property name="ProductName" value="nAntTest" /> 
    <property name="ProductVersion" value="2.5.1.0002" /> 
    <property name="Manufacturer" value="Test" /> 
    <property name="ProductCode" value="{F86BC501-47EB-4A14-BB01-2CC2CB8D1232}"/> 
    <property name="UpgradeCode" value="{B095E2D1-B9D1-412B-8B1D-A914E8876DD5}"/> 
    <property name="TARGETDIR" value="c:\"/> 

  </properties> 

  <directories> 
      <directory name="USR" foldername="usr12" root="TARGETDIR"> 
        <directory name="DIAMONDROOT" foldername="diamond.root"> 
          <directory name="BIN" foldername="bin"/> 
          <directory name="CCFG" foldername="comcal_cfg"/> 
          <directory name="CFG" foldername="cfg"> 
            <directory name ="APPDEFAULTS" foldername="app-defaults"/> 
          </directory> 
        </directory> 
        <directory name="SERVICEROOT" foldername="service.root"> 
          <directory name="RELI" foldername="reli"/> 
        </directory> 
        <directory name="DIAMONDDATA" foldername="diamond.data"> 
          <directory name="PHYSICSLOG" foldername="Physics_log"/> 
        </directory> 
      </directory> 
    </directories> 

  <components> 
    <component name="DiamondRootBinFiles" id="{9904C798-B9F7-450D-902A-1C92D7008014}" attr="2" directory="BIN" feature="FilesFeature" keepsubdirs="true"> 
      <key file="cmd.exe"/> 
      <fileset basedir="c:\Windows\system32"> 
        <include name="cmd.exe" /> 
      </fileset> 
    </component> 
  </components> 

  <features> 
    <feature name="FilesFeature" title="Scanner" display="1" typical="true" directory="C__DRIVE"> 
      <description>Log viewer support files Files</description> 
    </feature> 
  </features> 
</msi> 
</target> 
</project> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T14:14:11.910

我一直在使用 Visual Studio 安装项目来为 Web 应用程序创建 MSI，它既快速又简单。

为什么不试一试呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-05-12T18:58:38.957

您可能忘记将您的 NAntContrib bin 文件放入 NAnt bin 文件夹。

# c# - Spring.Net IoC 应用程序上下文

> ID：427587
> 
> 赞同：0
> 
> 时间：2009-01-09T10:11:55.647
> 
> 标签：c#, .net, inversion-of-control, spring.net

我有以下“问题”。我为 spring.net 创建了一个应用程序上下文文件。配置如下所示：

```
<spring>
    <context>
        <resource uri="config://spring/objects"/>
    </context>
    <objects configSource="SpringObjects.config" />
</spring> 
```

有人告诉我，如果您对应用程序上下文进行更改，则无需重新编译应用程序即可查看更改。

如果我对配置文件进行一些更改。没有看到任何变化。它仍然是可见的原始数据。

我这样称呼应用程序上下文：

```
IApplicationContext ctx = ContextRegistry.GetContext();
    ManagementConfigurator configurator = (ManagementConfigurator)ctx.GetObject("ManagementConfigurator"); 
```

有时需要一段时间才能看到更改（即使在重新编译应用程序之后）。

编辑：我刚刚发现您必须重新启动应用程序池。然后我将重新表述我的问题：“你能在你的应用程序中重新加载应用程序上下文吗？” 无需重新启动应用程序池。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T19:21:17.327

应用程序池不必重新启动，与您执行代码相关的 AppDomain 必须回收。我不知道这是否适合您，但是如果您将弹簧对象放在 web.config 文件中而不是单独的文件中，然后更改 web.config 文件（例如通过更改内部的弹簧配置它），关联的 AppDomain 将被回收，这也意味着您的应用程序将再次重新配置。您也可以只更改您的 SpringObjects.config 文件并在此之后“触摸”web.config。（我不确定将 SpringObjects.config 放在 bin 目录中是否是一个好主意，但是对 bin 目录的更改也会导致 AppDomain 回收）

您可以以编程方式使用 ContextRegistry 方法（Clear，然后是 RegisterContext）来重新加载 ApplicationContext，尽管我不建议这样做。

# c++ - 使用 gdb 检查标准容器 (std::map) 内容

> ID：427589
> 
> 赞同：102
> 
> 时间：2009-01-09T10:13:00.717
> 
> 标签：c++, stl, map, gdb

假设有这样的东西：

```
#include <map>
int main(){
    std::map<int,int> m;
    m[1] = 2;
    m[2] = 4;
    return 0;
} 
```

我希望能够检查从 gdb 运行程序的地图内容。
如果我尝试使用下标运算符，我会得到：

```
(gdb) p m[1]
Attempt to take address of value not located in memory. 
```

使用 find 方法不会产生更好的结果：

```
(gdb) p m.find(1)
Cannot evaluate function -- may be inlined 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-03-11T00:26:00.840

这个问题的现有答案**非常**过时。由于GDB 7.x 中内置的 Python 支持和 GCC 附带的 libstdc++ 漂亮的打印机，它使用最近的 GCC 和 GDB，它只是 Works ^(TM 。)

对于 OP 的示例，我得到：

```
(gdb) print m
$1 = std::map with 2 elements = {[1] = 2, [2] = 4} 
```

如果它不能自动为您工作，请参阅GDB wiki的[STL 支持页面上的第一个要点。](http://sourceware.org/gdb/wiki/STLSupport)

您也可以为自己的类型编写 Python 漂亮的打印机，请参阅GDB 手册中的[漂亮打印](http://sourceware.org/gdb/current/onlinedocs/gdb/Pretty-Printing.html#Pretty-Printing)。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-01-09T10:31:00.790

我认为没有，至少在您的源代码经过优化等情况下没有。但是，gdb 有一些宏可以为您检查 STL 容器：

[http://sourceware.org/ml/gdb/2008-02/msg00064.html](http://sourceware.org/ml/gdb/2008-02/msg00064.html)

但是，我不使用这个，所以 YMMV

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2009-01-10T00:10:33.840

总是有明显的：定义你自己的测试函数......从 gdb 调用它。例如：

```
#define SHOW(X) cout << # X " = " << (X) << endl

void testPrint( map<int,int> & m, int i )
{
  SHOW( m[i] );
  SHOW( m.find(i)->first );
}

int
main()
{
    std::map<int,int> m;
    m[1] = 2;
    m[2] = 4;
    return 0;  // Line 15.
} 
```

和：

```
....
Breakpoint 1 at 0x400e08: file foo.C, line 15.
(gdb) run
Starting program: /tmp/z/qD 

Breakpoint 1, main () at qD.C:15
(gdb) call testPrint( m, 2)
m[i] = 4
(*m.find(i)).first = 2
(gdb) 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2009-01-11T22:52:36.307

`stl-views.gdb`曾经是最好的答案，但现在不是了。

这还没有集成到主线`GDB`中，但这是你使用'archer-tromey-python'[分支](http://sourceware.org/gdb/wiki/ProjectArcher)得到的：

```
(gdb) list
1   #include <map>
2   int main(){
3       std::map<int,int> m;
4       m[1] = 2;
5       m[2] = 4;
6       return 0;
7   }
(gdb) break 6
Breakpoint 1 at 0x8048274: file map.cc, line 6.
(gdb) run

Breakpoint 1, main () at map.cc:6
6       return 0;
(gdb) print m
$1 = std::map with 2 elements = {
  [1] = 2,
  [2] = 4
}
(gdb) quit 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-01-09T11:57:57.283

尝试取消引用 STL 容器：在此页面上：[http ://www.yolinux.com/TUTORIALS/GDB-Commands.html](http://www.yolinux.com/TUTORIALS/GDB-Commands.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-08T07:05:31.223

上面的答案很好用。如果您使用的是 stl-views.gdb，这是查看其中的地图和元素的正确方法。让你的地图如下： `std::map<char, int> myMap;`

```
(gdb) pmap myMap char int 
```

即`pmap <variable_name> <left_element_type> <right_element_type>`查看地图中的元素。

希望有帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-03T21:37:21.427

您可以`Cannot evaluate function -- may be inlined`通过确保您的编译器在编译程序时使用 DWARF-2（或 3 或 4）调试信息来解决第二个问题（ ）。DWARF-2 包含内联信息，因此您应该能够使用您描述的任何一种方法来访问`std::map`容器的元素。

要使用 DWARF-2 调试信息进行编译，请将`-gdwarf-2`标志添加到您的编译命令中。

# html - 关于首页

> ID：427590
> 
> 赞同：-1
> 
> 时间：2009-01-09T10:13:11.590
> 
> 标签：html

我有一个网络应用程序。在那我有一个名为“主页”的链接。当用户单击 Web 应用程序的起始页面时，index.jsp 应该显示在同一页面中。我怎样才能做到这一点。它应该在 Internet Explorer 中工作。

我有以下 html 页面。

```
<html>

<body bgcolor="#FFF8DC">

<a href="index.jsp" target="parent" >HOME</a>

</body>
</html> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-12T09:57:39.823

**为了让您的链接在它所在的同一窗口中打开，请使用：**

```
<a href="foo.html" target="_self">some text</a> 
```

请注意self前面的下划线。如果你不使用它，你的浏览器会寻找一个名为“self”的框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-12T10:00:32.547

请参阅[http://htmlhelp.com/reference/html40/special/a.html](http://htmlhelp.com/reference/html40/special/a.html)

TARGET 属性与帧一起使用，以指定应在其中呈现链接的帧。如果不存在具有此类名称的框架，则链接将在新窗口中呈现，除非被用户覆盖。特殊框架名称以下划线开头：

```
* _blank renders the link in a new, unnamed window
* _self renders the link in the current frame (useful for overriding a BASE TARGET)
* _parent renders the link in the immediate FRAMESET parent
* _top renders the link in the full, unframed window 
```

在 HTML 4 中，TARGET 属性值不区分大小写，因此 _top 和 _TOP 具有相同的含义。但是，大多数浏览器将 TARGET 属性值视为区分大小写，并且不将 _TOP 识别为具有 _top 的特殊含义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T10:17:29.460

<a href="url">首页</a>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-12T10:03:44.457

你只是缺少一个下划线。“self”被视为任何其他名称标签。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T10:25:45.167

可能是解决jsp页面的问题。尝试使用完整的 URL。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-12T10:18:53.203

或者，您可以跳过`target`链接的属性。如果您未另行指定，则目标默认为相同的浏览器窗口。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T10:23:45.407

也许您打算 TARGET="_parent" ？这允许链接加载到父框架中

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-09T10:38:04.910

```
`target="_parent"` 
```

注意`_`在`_parent`

# c - 如何连接按顺序存储在数组中的上下半字节？

> ID：427594
> 
> 赞同：2
> 
> 时间：2009-01-09T10:14:42.443
> 
> 标签：c, arrays, bit-shift

我有一个包含半字节列表的数组：

```
{0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f, ...} 
```

我想通过左移上半字节并将其与下半字节连接来将相邻的半字节组合成单个字节。输出应如下所示：

```
{0xab, 0xcd, 0xef, ...} 
```

我怎样才能在 C 中实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T10:22:06.767

就像是

```
char *input, *output;
int i;
...
for(i=0; i<len; i+=2) {
  output[i/2]=(input[i]<<4) | input[i+1];
} 
```

将输出作为数组提供至少是输入的一半，并且输入中未设置上半字节。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T10:21:56.050

无需为您编写整个代码，这里有一个提示：

```
unsigned int Nibble1 = 0x0A;
unsigned int Nibble2 = 0x0B;

unsigned int Result = (Nibble1 << 4) | Nibble2; // Result = 0xAB 
```

然后，您只需要编写一个循环，一次遍历输入数组两个元素并写入输出数组。

我希望这有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T10:52:41.447

只是为了好玩，这是一个不使用第二个数组即可生成串联数组的版本。它只是用新值覆盖原始数组的前半部分：

```
char * writePtr = originalArray;
char * readPtr = originalArray;
while (readPtr < (originalArray + arraySize))
{
    *writePtr = (*readPtr << 4) | *(readPtr + 1);
    readPtr += 2;
    writePtr++;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-15T08:42:35.690

可能这会对你有所帮助，它只是关于轻咬的简单文章（上/下）

该系统称为二进制编码十进制或 BCD，它也占用一个半字节。在 BCD 中，二进制模式 1010 到 1111 不代表有效的 BCD 数，不能使用。

从十进制到 BCD 的转换很简单。您只需将十进制数的每个数字分配给一个字节并将 0 到 9 转换为 0000 0000 到 0000 1001，但是您不能像将十进制转换为二进制那样执行重复的除以 2。

让我们看看这是如何工作的。确定十进制数 5,319 的 BCD 值。由于我们的十进制数中有四位数字，因此我们的 BCD 数中有四个字节。他们是：

```
Final Number is -5319

    Thousands               Hundreds             Tens                    Units 
       [5]                      [3]               [1]                      [9] 
    0 0 0 0 0 1 0 1      0 0 0 0 0 0 1 1     0 0 0 0 0 0 0 1     0 0 0 0 1 0 0 1 
```

由于计算机存储至少需要 1 个字节，因此您可以看到每个 BCD 数的高半字节是浪费存储。BCD 仍然是加权位置数字系统，因此您可以进行数学运算，但我们必须使用特殊技术才能获得正确答案。

* * *

打包 BCD

由于磁盘和 RAM 中的存储非常宝贵，我们希望消除这种浪费的存储。这可以通过打包 BCD 数来完成。在打包的 BCD 数字中，每个半字节都有一个从小数点开始的加权位置。因此，不需要 4 个字节来存储 BCD 数字 5319，我们只需要 2 个字节，即存储空间的一半。我们数字的高字节的高半字节将存储 THOUSANDS 值，而高字节的低半字节将存储 HUNDREDS 值。同样，低字节将 TENS 值存储在高半字节中，将 UNITS 数字存储在低半字节中。因此，我们之前的示例将是：

```
Thousands - Hundreds          Tens - Units 
        [53]                       [19] 
0 1 0 1 0 0 1 1              0 0 0 1 1 0 0 1 
```

# javascript - 浏览器版本检测

> ID：427597
> 
> 赞同：3
> 
> 时间：2009-01-09T10:15:59.603
> 
> 标签：javascript, jquery, browser

我当前的项目中有一个规范，要求我们建议用户哪些浏览器最适合使用 Web 应用程序。如果他们当前使用的浏览器版本不在我们想要显示的“理想”浏览器列表中。

检查用户浏览器的特定版本的最佳方法是什么。我知道使用 jQuery 的以下内容，但这对特定版本没有帮助。

```
$(document).ready(function() {
   var b = '';
   $.each($.browser, function(i, val) {
       if (i=='safari' && val==true) { b = 'safari'; }
       if (i=='opera' && val==true) { b = 'opera'; }
       if (i=='msie' && val==true) { b = 'msie'; }
       if (i=='mozilla' && val==true) {b = 'mozilla'; }
   });

   //Do Something With b, Like $('#dis').html(b);
}); 
```

我们希望能够说您的浏览器是 Firexfox 2 或更高版本还是 IE6 或更高版本等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T10:43:37.207

还要检查 docs.jquery.com 中的 $.browser.version

它可以为 Firefox 2.xx 返回 2.0，查看文档 :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T11:03:20.707

[这](http://davecardwell.co.uk/javascript/jquery/plugins/jquery-browserdetect/)是一个可以提供帮助的 JQuery 插件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T10:19:14.167

查看[YUI 用户代理检测](http://developer.yahoo.com/yui/examples/yahoo/yahoo_ua_detection.html)。

编辑：现在我已经告诉你怎么做，我只是想确保你知道这通常被认为是一种反模式，对吧？如果可以的话，我建议不要做这样的事情，但我意识到这并不总是一种选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-05T08:34:41.443

Internet Explorer 10 及更高版本的行为与 IE 9 及更低版本不同。使用 javascript 时，您需要以不同的方式处理这些场景。以下代码对我有用:)

```
 //MSStream object supported only for IE 10 and 11 (hope this will work for above IE 11 too .. )
    var isIE10or11 = window.MSStream;

    //FormData object allow you to send form data as key and value pairs with ajax requests. Supported in modern browsers.
    var isFormDataSupported = (window.FormData !== undefined);

    if(isIE10or11 && isFormDataSupported){
       alert('IE 10 or 11');
    }
    else if(!isIE10or11  && isFormDataSupported){
       alert('HTML 5 browser Excluding IE');
    }
    else{
       //Neither supports MSStream nor FormData object
       alert('IE Version 9 or below');
    } 
```

# asp.net-mvc - 在 ASP.NET MVC 中自定义授权

> ID：427598
> 
> 赞同：26
> 
> 时间：2009-01-09T10:17:05.920
> 
> 标签：asp.net-mvc, security, authorization

我的 Controller 类装饰有 AuthorizeAttribute 以保护操作：

```
[Authorize(Roles = "User Level 2")]
public class BuyController : Controller
{
    ...
} 
```

任何时候调用操作，但用户至少不是“用户级别 2”角色，用户会自动重定向到登录页面，其 URL 如下所示：

[http://localhost:1436/Account/Login?ReturnUrl=%2fBuy](http://localhost:1436/Account/Login?ReturnUrl=%2fBuy)

如果用户已经登录，但没有正确的安全级别，这不是最佳行为！显示一个通知用户缺少级别的页面而不是显示登录页面会更有意义。

我可以做些什么来自定义这种行为？

是否可以以某种方式将所需的用户级别传递给登录操作？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-01-09T14:38:23.357

您可以像这样构建自己的授权属性：

```
public class ClubAuthorizeAttribute : AuthorizeAttribute
{
public override void OnAuthorization(AuthorizationContext filterContext)
{
  base.OnAuthorization(filterContext);
  if (filterContext.Cancel && filterContext.Result is HttpUnauthorizedResult)
  {
    filterContext.Result = new RedirectToRouteResult(
      new RouteValueDictionary {
      { "clubShortName", filterContext.RouteData.Values[ "clubShortName" ] },
      { "controller", "Account" },
      { "action", "Login" },
      { "ReturnUrl", filterContext.HttpContext.Request.RawUrl }
    });
  }
}
} 
```

我用它来重定向到我正在建立的俱乐部会员网站中的特定俱乐部。您可以根据自己的需要进行调整。顺便说一句，在我的情况下，我确实重定向到登录页面，但我检查用户是否被授权，如果是，则显示他们没有正确权限的消息。毫无疑问，您也可以向 ViewData 或 TempData 添加一些内容以显示在页面上，但我还没有尝试过

**编辑** AuthorizationContext.Cancel 在 RC 中不再存在。“filterContext.Result is HttpUnauthorizedResult”似乎就足够了：[filterContext.Cancel（ASP.NET MVC）发生了什么](https://stackoverflow.com/questions/505653/what-happened-to-filtercontext-cancel-asp-net-mvc/505679#505679)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T20:45:51.717

距离上一次回答，时间已经过去很久了。

自 2009 年以来，授权领域取得了很大进展。特别是，OASIS（SAML 背后的那些）已经标准化了 XACML，即可扩展访问控制标记语言。

XACML 为开发人员提供：

*   使用模式
*   架构
*   灵活的授权策略语言

XACML 符合 NIST 建议在当今应用中采用的基于属性的访问控制。

请查看此[答案](https://stackoverflow.com/questions/19520401/net-webapi-centralized-authorization/19545001#19545001)以获取更多详细信息。

# java - 如何减小拨号图表中的字体大小

> ID：427603
> 
> 赞同：2
> 
> 时间：2009-01-09T10:18:18.443
> 
> 标签：java, jfreechart

我正在使用 jfreechart 绘制拨号图表，并且我想减小字体大小。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T14:24:20.903

我使用 jfreechart 为显示器生成表盘图像，上面有三种不同的字体。

![替代文字](https://6207470570848178640-a-heliosdev-org-s-sites.googlegroups.com/a/heliosdev.org/heliosdev/home/files/dial.jpg)

1.  标题字体。
2.  表盘刻度字体。
3.  表盘底部的“图例”字体，称为 DialTextAnnotation。

不知道你在找哪一个，所以我会概述每一个。只需查看生成此代码的代码（它在 groovy 中），以下是每个代码的过程：

## 标题

使用主类`JFreeChart`的方法`setTitle(java.awt.Font font)`方法。字体可以在构造函数中调整大小。

```
// Set the title font to bold SansSerif size 12.
JFreeChart chart = new JFreeChart(myplot);
chart.setTitle(
   new org.jfree.chart.title.TextTitle("The title",
       new java.awt.Font("SansSerif", java.awt.Font.BOLD, 12)
   );
); 
```

## 注解

```
// Set the annotation font to bold Dialog size 8
DialTextAnnotation annotation = new DialTextAnnotation("My Annotation Text");
annotation.setFont(new java.awt.Font("Dialog", java.awt.Font.BOLD, 8));
// Add to the plot
myplot.addLayer(annotation); 
```

## 拨号记号

```
// Create the dial scale
StandardDialScale scale = new StandardDialScale(.......
// Set the dial font to plain dialog size 14
scale.setTickLabelFont(new java.awt.Font("Dialog", java.awt.Font.PLAIN, 14)); 
```

# amazon-web-services - Amazon Web services - 检索愿望清单

> ID：427604
> 
> 赞同：4
> 
> 时间：2009-01-09T10:18:35.697
> 
> 标签：amazon-web-services, pipe, amazon-product-api

我一直在修补 Yahoo Pipes 和[Amazon Product Advertising API（以前称为 ECS）SDK](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/)来检索我的愿望清单。

问题是，虽然我可以很好地获得愿望清单上的所有项目，但它似乎也包括我已经删除的项目。

有没有其他人使用过这个 API 并注意到了这一点？有办法解决吗？

更新：

要求在评论中提供更多信息...

这是我用来获取愿望清单 XML 的 URL：

```
http://webservices.amazon.co.uk/onca/xml?SubscriptionId=[my subs id]&Service=AWSECommerceService&ResponseGroup=ListItems&ProductPage=1&ProductGroup=Book&Operation=ListLookup&ListType=WishList&ListId=[my list id] 
```

这是 XML 响应的相关部分：

```
<ListId>[my list id]</ListId>
<ListName>Wishlist</ListName>
<TotalItems>132</TotalItems>
<TotalPages>14</TotalPages>
<ListItem>
    <ListItemId>EPIE5559HKT391</ListItemId>
    <DateAdded>2003-11-17</DateAdded>
    <QuantityDesired>1</QuantityDesired>
    <QuantityReceived>0</QuantityReceived>
    <Item>
        <ASIN>5557205521</ASIN>
        <ItemAttributes>
            <Title>Horton hears a who</Title>
        </ItemAttributes>
    </Item>
</ListItem>
... 
```

XML 的其余部分要么是更多类似的列表项，要么是响应顶部的有关请求的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-15T11:19:01.213

我找不到任何东西来表明该项目是否已从 XML 列表或记录的参数中的列表中删除以与请求一起发送。在这一点上，我想你最好的选择是开始跟踪[论坛](http://developer.amazonwebservices.com/connect/forum.jspa?forumID=9)并在那里询问跟踪是否没有透露任何信息。抱歉，对于此回复的迟到以及它并没有太大帮助的事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-19T15:32:18.690

啊。这是飞行员的错误。

我会解释我做错了什么，但我太尴尬了。

毕竟，已删除的项目不会出现在愿望清单中。耶。

# c# - 为 .NET 和 mono 编写 C# 应用程序的指南

> ID：427607
> 
> 赞同：6
> 
> 时间：2009-01-09T10:19:19.563
> 
> 标签：c#, .net, mono, cross-platform, porting

[Mono](http://www.mono-project.com/)声称与.NET 兼容。

你试过了吗？

您能否分享一些使正在运行的 .NET 应用程序与单声道兼容的提示或指南？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T10:23:11.193

可能是[MoMA](http://www.mono-project.com/MoMA)帮助你

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T10:28:15.973

请参阅这些文档以获取深入的答案：

*   关于[应用程序可移植性的一般文档](http://www.mono-project.com/Guidelines:Application_Portability)
*   [移植 Winforms 应用程序](http://www.mono-project.com/Guide:_Porting_Winforms_Applications)
*   [移植 ASP.NET 应用程序](http://www.mono-project.com/Guide:_Porting_ASP.NET_Applications)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T10:27:38.237

基本上，单元测试就像疯了一样！我在一个宠物项目 ( [protobuf-net](http://code.google.com/p/protobuf-net/) ) 上同时支持 mono 和 C#，让它甚至可以在不同平台的范围内*编译*很有趣（我支持 mono、CF、Silverlight 等）。Mono 中存在许多编译器错误（即使在当前版本中），特别是与泛型有关的 - 这意味着您可能需要使用稍微不同的代码才能使其编译成各种风格。

然后你需要考虑你需要哪些框架特性。例如，避免使用 WPF/WCF/WF 之类的东西。但是，如果您坚持使用核心 2.0 功能，您*通常是*可以的。不过，仍然有很多地方会抛出单声道`NotImplementedException`。在最近的一个案例中，有两种方法可以做某事：“旧”方法适用于单声道，但适用`[Obsolete]`于 MS；“新”版本在 MS 上工作，但`NotImplementedException`在单声道上。乐趣！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-19T00:08:06.997

要记住两件事：

*   不要尝试任何花哨的东西。

*   不要指望它在 Mono 下工作首先尝试

Mono 非常擅长您每天所做的事情，例如处理字符串和显示网页。在需要使用 .NET 运行时库的小隐藏角落的事情上真的很糟糕。例如，加密仍然在 1.1 中实现，甚至其中一些实际上并不起作用。

简而言之，Mono 不是灵丹妙药。

# javascript - 延迟加载外部 Javascript 文件

> ID：427609
> 
> 赞同：2
> 
> 时间：2009-01-09T10:21:07.253
> 
> 标签：javascript, metaprogramming

我正在尝试编写一个 javascript 类来根据需要加载脚本文件。我有大部分工作。可以使用以下语法的库：

```
var scriptResource = new ScriptResource('location/of/my/script.js');
scriptResource.call('methodName', arg1, arg2); 
```

我想添加一些额外的语法糖，这样你就可以写

```
var scriptResource = new ScriptResource('location/of/my/script.js');
scriptResource.methodName(arg1, arg2); 
```

我几乎可以肯定这是不可能的，但可能有一个创造性的解决方案。我想需要的是某种 methodCall 事件。所以以下可以工作

```
ScriptResource = function(scriptLocation)
{
    this.onMethodCall = function(methodName)
    {
        this.call(arguments);
    }
} 
```

这段代码显然非常不完整，但我希望它能让我了解我想要做什么

像这样的事情还有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T11:35:26.727

Firefox 中有一个非标准方法 __noSuchMethod__ 可以满足您的需求，请
查看
[https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Object/noSuchMethod](https://developer.mozilla.org/en/Core%5C_JavaScript%5C_1.5%5C_Reference/Global%5C_Objects/Object/noSuchMethod)

所以你可以定义

```
obj.__noSuchMethod__ = function( id, args ) {
    this[id].apply( this, args );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T11:23:19.247

如果方法名称的集合是有限的，那么您可以生成这些方法：

```
var methods = ["foo", "bar", "baz"];
for (var i=0; i<methods.length; i++) {
    var method_name = methods[i];
    WildCardMethodHandler[method_name] = function () {
        this.handleAllMethods(method_name);
    };
} 
```

**编辑：**在问题发生巨大变化之前发布了这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-25T20:35:24.350

中间解决方案可能是具有如下语法：

```
var extObj = ScriptResource('location/of/my/script.js');  
extObj('methodname')(arg1,arg2); 
```

代码可能如下所示：

```
function ScriptResource(file) {
  return function(method) {
    loadExternalScript(file);
    return window[method];
  }
} 
```

上面代码中的各种假设，我会让你自己弄清楚。恕我直言，最有趣的是 - 在您的原始实现中 - 您如何让代理方法同步运行并返回一个值？AFAIK 您只能异步加载外部脚本并使用“onload”回调处理它们。

# search - 搜索 Oracle DB 中的所有表

> ID：427637
> 
> 赞同：1
> 
> 时间：2009-01-09T10:32:42.160
> 
> 标签：search, full-text-search, oracle10g

我目前正在使用 Oracle 10g。我想在所有表格中搜索某个单词或短语。

我将如何在所有表格中搜索词组？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T10:34:08.583

查看[Oracle Text](http://www.oracle.com/technology/products/text/x/10g_tech_overview.html)（10g 版）。

# .net - LINQ to SQL：映射关联的子集

> ID：427642
> 
> 赞同：3
> 
> 时间：2009-01-09T10:35:35.180
> 
> 标签：.net, linq, linq-to-sql

在我们最初的开发过程中，我们并不担心扩展问题，只是让系统的基本骨架作为一个有凝聚力的整体工作。

我们现在正在研究细化屏幕，其中记录的数量将变得太大而无法显示。例如，我们有一个页面用于显示`Parent`当前涉及显示所有`Child`记录的详细信息。这是通过调用对象的`Children`属性来完成的`Parent`（我们正在尝试开发一个富域）。我们想把它改成`RecentChildren`.

问题是我找不到以`EntitySet`任何方式限制 an 返回的记录的方法。您可以对 进行查询，`EntitySet`但它会`Children`从数据库中检索所有内容，然后使用 LINQ to Objects 对其进行过滤。显然这是非常低效的。

我们可以重构代码以删除`Children`属性的映射并从服务中检索它们，但如果可能的话，我们希望将关联保留在域中。

有什么办法可以解决这个问题，还是我们必须看看不同的 ORM，比如 NHibernate？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-14T10:08:56.673

在写了一篇[关于我的 LINQ to SQL 困境的博客](http://blog.robustsoftware.co.uk/2009/01/why-linq-to-sql-is-not-proper-orm.html)之后，一个名叫 Anders 的人向我指出了解决这个问题的方向。利用[DataLoadOptions.AssociateWith](http://msdn.microsoft.com/en-us/library/system.data.linq.dataloadoptions.associatewith.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T11:04:50.330

好吧，您可以简单地不使用导航属性 - 即直接使用父 ID 并从子集中进行选择？

IE

```
int id = parent.ParentID;
var qry = from child in db.Children
          where child.ParentID = id && child.Date > whatever
          select child; 
```

我还怀疑**在查询**`SelectMany`中使用导航属性会起作用：

 **```
using System;
using System.Linq;
using ConsoleApplication5;

class Program
{
    static void Main(string[] args)
    {
        string id;
        using (var ctx = new DataClasses1DataContext())
        {
            id = ctx.Customers.Select(x => x.CustomerID).First();
        }
        DateTime cutoff = DateTime.Today.AddMonths(-2);

        using (var ctx = new DataClasses1DataContext())
        {
            // parent id
            ctx.Log = Console.Out;
            var qry = from o in ctx.Orders
                      where o.CustomerID == id
                        && o.OrderDate > cutoff
                      select o;
            foreach (var order in qry)
            {
                Console.WriteLine(order.OrderID);
            }
        }

        using (var ctx = new DataClasses1DataContext())
        {
            // navigation property in query
            ctx.Log = Console.Out;
            var qry = from c in ctx.Customers
                      where c.CustomerID == id
                      from o in c.Orders
                      where o.OrderDate > cutoff
                      select o;
            foreach (var order in qry)
            {
                Console.WriteLine(order.OrderID);
            }
        }
    }
} 
```

TSQL（对不起格式 - 控制台转储！）：

```
SELECT [t0].[OrderID], [t0].[CustomerID], [t0].[EmployeeID], [t0].[OrderDate], [
t0].[RequiredDate], [t0].[ShippedDate], [t0].[ShipVia], [t0].[Freight], [t0].[Sh
ipName], [t0].[ShipAddress], [t0].[ShipCity], [t0].[ShipRegion], [t0].[ShipPosta
lCode], [t0].[ShipCountry]
FROM [dbo].[Orders] AS [t0]
WHERE ([t0].[CustomerID] = @p0) AND ([t0].[OrderDate] > @p1)
-- @p0: Input NVarChar (Size = 5; Prec = 0; Scale = 0) [ALFKI]
-- @p1: Input DateTime (Size = 0; Prec = 0; Scale = 0) [09/11/08 00:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 3.5.30729.1

SELECT [t1].[OrderID], [t1].[CustomerID], [t1].[EmployeeID], [t1].[OrderDate], [
t1].[RequiredDate], [t1].[ShippedDate], [t1].[ShipVia], [t1].[Freight], [t1].[Sh
ipName], [t1].[ShipAddress], [t1].[ShipCity], [t1].[ShipRegion], [t1].[ShipPosta
lCode], [t1].[ShipCountry]
FROM [dbo].[Customers] AS [t0], [dbo].[Orders] AS [t1]
WHERE ([t1].[OrderDate] > @p0) AND ([t0].[CustomerID] = @p1) AND ([t1].[Customer
ID] = [t0].[CustomerID])
-- @p0: Input DateTime (Size = 0; Prec = 0; Scale = 0) [09/11/08 00:00:00]
-- @p1: Input NVarChar (Size = 5; Prec = 0; Scale = 0) [ALFKI]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 3.5.30729.1 
```

请注意，在这两种情况下，日期条件都会下降到数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T02:34:48.417

将RecentChildren 属性添加到Parent 分部类。不要将其实现为 EntitySet。

# visual-studio-2008 - 如何在 Visual Studio 2008 中将程序集信息添加到网站/应用程序

> ID：427647
> 
> 赞同：7
> 
> 时间：2009-01-09T10:39:30.257
> 
> 标签：visual-studio-2008, project, assemblyinfo, web-application-project

谁能告诉我如何将 AssemblyInfo.vb 文件添加到从 NET2.0 转换为 NET3.5 的 Web 应用程序。

我想添加清单信息，但找不到为 Web 应用程序编译的 DLL 做的方法。

如果这有所作为，我将使用 Visual Studio 2008 的 Web 部署项目。我还将用 SVN 内部版本号替换版本号，但还没有到那一步 :)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T11:56:05.477

我进一步调查并发现我一直将网站项目与 Web 应用程序项目混淆。这是我发现的：

**网络应用项目**

*   通过应用程序属性包含程序集信息（隐藏的程序集信息文件）
*   编译后创建一个工作网站

**网站项目**

*   可以通过 App_Code 文件夹中的 AssemblyInfo 文件包含程序集信息
*   就地创建一个工作网站

**网络应用项目**

*   仅从 Web 应用程序项目中复制 AssemblyInfo 文件（我对此进行了测试）

**CrusieControl.NET - SVNLabeller**

*   只能覆盖 Web 应用程序项目中 AssemblyInfo 文件中的版本号

因此，我将来会使用 Web 应用程序项目。以前我使用过网站项目，因为它们在原地工作，我们过去只是将它们复制到 Live Server（我知道这很糟糕 - 这就是为什么我在尝试改进我们的开发环境时问所有这些问题的原因） .

这个答案是我进一步研究的笔记，我认为这是 Stack Overflow 的目的。如果有人想将问题更改为更适合我的答案的内容，我会理解 - 我会尝试重新标记自己。

另外，如果我在这里的解释中错过了标记，请告诉我！

干杯

**编辑**

经过进一步研究，似乎在合并程序集时 Web 部署项目和 Web 应用程序项目存在问题。让它工作的唯一方法是以不同的方式命名程序集，这让我有 1 个带有版本信息的程序集和 1 个带有我的清单信息的程序集（请记住，我的版本信息来自 SVNLabeller）。这不是我想要的。所以我现在恢复到网站项目并发现我可以手动编辑 .wdproj 文件以添加额外的程序集信息，很遗憾我不能通过 Visual Studio 做到这一点，但这是我能想出的最佳解决方案现在。

# html - 滚动和 css 与 "right: 0px" 对齐

> ID：427648
> 
> 赞同：1
> 
> 时间：2009-01-09T10:40:24.280
> 
> 标签：html, css, scroll, alignment

在 HTML 页面中，如果我将一些`<div>`s 与 "right: 0px" 对齐，它们看起来都非常漂亮，正如我所期望的那样。但是，如果我将浏览器窗口变小并出现水平滚动条，当我向右滚动页面时，我会看到一个意想不到的空白（而不是我的背景颜色`<div>`）。似乎我`<div>`的 s 相对于页面的可见区域对齐。请参阅下面的示例代码：

```
<html>
    <head>
        <style>
        <!--
        #parent {
            position: absolute;
            left: 0px;
            right: 0px;
            top: 0px;
            bottom: 0px;
            background-color: yellow;
        }

        #child {
            position: absolute;
            left: 100px;
            top: 300px;
            width: 1000px;
            height: 400px;
            background-color: blue;
        }
        -->
        </style>
    </head>
    <body>
        <div id="parent"><div id="child">some text here</div></div>
    </body>
</html> 
```

有没有办法让“right:0px”属性使控件相对于整个页面的大小对齐，而不仅仅是可见区域？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T11:26:01.350

问题是父元素中的“绝对”位置，因为它可以根据定义滚动。

如果您将位置设置为“固定”并将附加属性溢出设置为“滚动”，它应该看起来像预期的那样。

```
#parent {position: fixed;
         overflow: scroll;         
         left: 0px;
         top: 0px;
         right: 0px;
         bottom: 0px;
         background-color: yellow;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-09T07:46:33.157

我的回答是我想改变对齐滚动？例如“右对齐”滚动。

```
#ex {overflow: scroll} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T10:55:53.173

如果你添加

```
html{ border: 3px solid red } 
```

在您的样式表中，您会看到您正在将“right”属性设置为页面边缘。

我认为你需要重新考虑你的策略。你想达到什么目的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T11:33:54.157

除非绝对必须，否则不要使用绝对位置。改用边距和填充。并且不要忘记重置边距和填充，这样您就不会从浏览器默认设置的任何内容开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T11:38:19.187

在您的情况下是否有必要使用绝对定位？否则，您可以删除左右属性并简单地使用 width: 100%;

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-01-09T11:36:26.757

正确的？底部？确定这些甚至是真正的 CSS 属性吗？通常你只需设置顶部/左侧，然后设置宽度/高度......

# datetime - 不同 RDBMS 中日期时间的一致处理

> ID：427651
> 
> 赞同：3
> 
> 时间：2009-01-09T10:41:53.683
> 
> 标签：datetime, timezone, rdbms

我正在计划一个分布式应用程序系统，它将与不同类型的 RDBMS 进行通信。要求之一是对所有 RDBMS 类型的 DateTimes 进行一致处理。所有 DateTime 值必须以毫秒为精度，包括 TimeZone 信息并存储在单个列中。

由于不同的 RDBMS 处理日期和时间的方式不同，我担心在这种情况下我不能依赖它们的原生列类型，所以我必须想出一个不同的解决方案。（如果我在这里错了，欢迎你给我指路。）

无论是什么解决方案，理想情况下都应该允许在 SQL 级别上轻松排序和比较。其他方面，例如可读性和使用 SQL 日期时间函数的能力，并不重要，因为这些都将由网关服务处理。

我正在考虑将我的 DateTime 值存储在无符号 largeint 列类型（8 个字节）中。我还不确定是否所有有问题的 RDBMS（MSSQL、Oracle、DB2、PostgreSQL、MySQL，也许还有其他一些）实际上/拥有/这样的类型，但在这一点上，我只是假设他们有。

至于存储格式...例如，2009-01-01T12:00:00.999+01:00 可以存储类似于？20090101120000999??，在 8 个字节以下。

我能够以这种方式存储的最小日期时间为 0001-01-01T00:00:00.000+xx:xx，最大值为 8000-12-31T23:59:59.999+xx:xx，这给了我一个跨度绰绰有余。

由于最大无符号 largeint 值是 18446744073709551615，这给我留下了以下 3 位数字（由 A 和 BB 标记）来存储时区信息：AxxxxxxxxxxxxxxxxxBB。

考虑到 0001..8000 的最大年份跨度，A 可以是 0 或 1，BB 可以是 00 到 99 之间的任何值。

现在的问题是：

*   您如何看待我提出的解决方案？它有优点还是只是愚蠢？

*   如果没有更好的方法，您如何建议将剩余的三个数字最好地用于时区信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-06-04T00:00:12.573

> 要求之一是对所有 RDBMS 类型的 DateTimes 进行一致处理。

请注意，日期时间处理能力*在*不同的数据库系统中存在很大差异。这范围从几乎不支持（SQLite）到优秀（Postgres）。一些如 Oracle 的遗留数据类型可能会混淆情况，因此请仔细研究而不做任何假设。

与其建立一个笼统地说我们必须支持“任何或所有数据库”的要求，不如说得更具体一些。准确研究哪些数据库可能真正适合在现实世界中部署。“任何或所有数据库”的要求是幼稚且不切实际的，因为数据库的许多功能各不相同——日期时间处理只是多数据库支持问题的开始。

SQL 标准几乎没有涉及日期时间的主题，广泛地定义了几种类型，几乎没有讨论日期时间工作的细微差别和复杂性。

另请注意，大多数编程平台对日期时间处理的支持极差。请注意，Java 凭借其出色设计的*java.time*类在该领域处于行业领先地位。该框架从 Java 的[*Joda-Time*](https://www.joda.org/joda-time/)项目演变而来，该项目作为[*NodaTime*](https://nodatime.org/)移植到 .Net 平台。

> 所有 DateTime 值必须以毫秒为精度，

很好，你已经指定了那个重要的细节。了解各种系统将日期时间值解析为整秒、毫秒、微秒、纳秒或其他值。

> 包括时区信息并存储在单个列中。

精确定义时区。

了解从 UTC 偏移和时区之间的区别：第一个是小时-分钟-秒加或减数，第二个[有](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)格式名称，`Continent/Region`是过去、现在和未来的历史更改特定区域的人们使用的偏移量。

CST、PST、IST 等 2-4 个字母的缩写*不是*正式的时区名称，没有标准化，甚至不是唯一的（避免使用它们）。

> 由于不同的 RDBMS 处理日期和时间的方式不同，我担心在这种情况下我不能依赖它们的原生列类型，所以我必须想出一个不同的解决方案。

SQL 标准确实定义了一些主要数据库支持的类型。

*   `TIMESTAMP WITH TIME ZONE`代表一个时刻，时间线上的一个特定点。我隐约记得听说过一个实际存储传入时区的数据库。但是大多数，例如 Postgres，使用传入值上指示的时区来调整为 UTC，然后存储该 UTC 值，最后丢弃时区信息。检索后，您将返回一个 UTC 值。当心工具和中间件具有令人困惑的反特性，即在检索后和显示给用户之前应用默认时区。
*   `TIMESTAMP WITHOUT TIME ZONE`表示带有时间的日期，但故意缺少时区或偏移量的上下文。没有区域/偏移量，这样的值不代表*片刻*。您可以应用时区来确定大约 26-27 小时范围内的时刻，即全球时区范围。

标准中还有其他类型，例如仅日期 ( `DATE`) 和仅时间 ( `TIME`)。

请参阅我为 Java 制作的此表，但在此上下文中，SQL 标准类型的列是相关的。请注意，这`TIME WITH TIME ZONE`在逻辑上没有意义，不应使用。

[![Java（传统和现代）和标准 SQL 中的日期时间类型表](https://i.stack.imgur.com/JX7i6.png)](https://i.stack.imgur.com/JX7i6.png)

如果您缩小了候选数据库列表，请研究他们的文档以了解它们是否具有类似于您感兴趣的标准类型的类型，以及该类型的名称是什么（并不总是标准名称）。

> 我正在考虑将我的 DateTime 值存储在无符号 largeint 列类型（8 个字节）中。

64 位值可能不太合适。例如，*java.time*类使用一对数字，自 UTC 1970 第一时刻的纪元参考以来的整秒数，再加上小数秒中纳秒计数的另一个数字。

如果它们在您的候选数据库列表中相似，那么最好使用数据库的数据时间数据类型。使用从纪元开始计数本质上是模棱两可的，这使得识别错误数据变得困难。

存储您自己的从纪元开始计数是可能的。如果您必须这样做，请确保整个团队都了解选择了哪个时代参考。至少有[几十个](https://en.wikipedia.org/wiki/Epoch_(computing)#Notable_epoch_dates_in_computing)已在各种计算系统中使用。*假设*正在使用特定的纪元参考，请注意工作人员。

定义您自己的日期时间跟踪的另一种方法是使用标准[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式的文本。此类字符串将按字母顺序按时间顺序排序。该排序的一个例外是可选的，但通常`Z`在末尾用于指示与 UTC 的偏移量为零（发音为“Zulu”）。

> 我能够以这种方式存储的最小日期时间为 0001-01-01T00:00:00.000+xx:xx,
> 
> 考虑到 0001..8000 的最大年份跨度

你真的保存了基督时代的价值观吗？这个软件真的会在 8000 年左右执行交易吗？

这是负责任的利益相关者应该定义他们真正需求的领域。例如，对于许多业务系统，您可能只需要产品发布那年的数据，并且只需要一两个世纪的未来。

不同数据库之间的最小值/最大值范围差异*很大。*如果您选择在每个数据库系统中使用内置数据类型，请调查其限制。例如，有些可能只到 2038 年，即常见的[Y2038 问题](https://en.wikipedia.org/wiki/Year_2038_problem)。

总结一下我的建议：

*   了解您的日期时间需求：最小/最大范围、分辨率和各种类型（**时刻与非时刻**、仅日期等）。
*   了解您[可能](https://en.wikipedia.org/wiki/List_of_relational_database_management_systems)用于部署的数据库。
    *   [如果您需要经典RDMS](https://en.wikipedia.org/wiki/Relational_database)中的企业级可靠性，您的候选列表可能只有几个：[Postgres](https://en.wikipedia.org/wiki/PostgreSQL)、[Microsoft SQL Server](https://en.wikipedia.org/wiki/Microsoft_SQL_Server)、[Oracle](https://en.wikipedia.org/wiki/Oracle_Database)，也许还有[IBM Db2](https://en.wikipedia.org/wiki/IBM_Db2_Family)。
    *   使支持的数据库列表尽可能短。您同意支持的每个数据库都是一个*巨大*的承诺，无论是现在还是将来。
    *   确保您选择的数据库具有可用于您选择的编程语言的数据库驱动程序。例如用于[Java的](https://en.wikipedia.org/wiki/Java_(software_platform))[JDBC](https://en.wikipedia.org/wiki/Java_Database_Connectivity)。
*   如果可能，请使用数据库提供的内置数据类型。
*   确保您和您的团队了解日期时间处理。根据我的经验，许多人不这样做，因为 (a) 该主题很少被教授，并且 (b) 许多程序员和管理员错误地认为他们对日期时间的日常直观理解足以完成编程工作。（正如他们所说，无知是幸福的。）
*   确定除日期时间处理之外的其他功能领域，并比较哪些数据库支持这些领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T11:51:04.177

我建议您以自 1970 年以来的毫秒数（Java 风格）存储日期时间信息。这是存储日期时间信息的标准方式，此外它在空间方面比您的建议更有效。因为在您的建议中，有些数字是“浪费的”，即月份数字只能存储 00-12（而不是 00-99）等等。您没有指定您的开发语言是什么，但我相信您可以找到许多将日期转换为毫秒的代码片段。如果您在 .NET 中进行开发，他们有类似的刻度概念。（您也可以使用此信息）

关于时区，我将添加另一列来仅存储 TimeZone 指示。

请记住，您选择的任何格式都应保持两个日期之间的一致性，即如果 D1 > D2 则 format(D1)>format(D2) ，这样您就可以查询数据库自某个日期以来的更改，或查询两个日期之间的更改

# django - 在 django 项目中映射主要网址的最佳方法是什么？

> ID：427652
> 
> 赞同：3
> 
> 时间：2009-01-09T10:42:19.923
> 
> 标签：django, django-urls

我有一个包含一些应用程序的 django 项目。主要的 urls.py 包括我启用的应用程序中的 urls.py，一切都很好。

现在我想配置项目，以便当您访问[http://testsite/](http://testsite/)时，您将获得与访问[http://testsite/app/](http://testsite/app/)时相同的页面。

我可以通过在项目 urls.py 中复制应用程序 urls.py 中的相应行来做到这一点，但这感觉很脏。

有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T10:59:04.663

设置从第一个 url 到第二个的 redirect_to，即：

```
from django.conf.urls.defaults import patterns, url, include
from django.views.generic.simple import redirect_to

    urlpatterns = patterns('',
        # Example:
        url(r'^$', redirect_to, {'url':'/app/'}),
        url(r'^app/', include('app.urls')),
        # ...
    ) 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T17:38:08.593

重定向是可行的方法，因为您不希望同一资源有多个规范 URL（浪费 Google 果汁）。理想情况下，您应该尽可能靠近堆栈边缘进行重定向，以节省服务器资源。因此，您可以执行 Django redirect_to urlconf 条目，但最好使用 Apache 或 nginx 或 insert-your-webserver-here 重定向，因此初始请求根本不必访问 Django。

# language-agnostic - 参数或参数？

> ID：427653
> 
> 赞同：196
> 
> 时间：2009-01-09T10:42:26.960
> 
> 标签：language-agnostic, parameters, function, arguments, terminology

我经常发现自己对如何使用“参数”和“参数”这两个术语感到困惑。它们似乎在编程世界中可以互换使用。

他们使用的正确约定是什么？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2009-01-09T10:44:49.793

参数是由函数定义为输入的东西，参数是作为参数传递的东西。

```
void foo(int bar) { ... }

foo(baz); 
```

在此示例中，`bar`是 的参数`foo`。`baz`是传递给 的参数`foo`。

* * *

## 回答 #2

> 赞同：203
> 
> 时间：2009-01-09T11:08:09.777

**参数**是函数声明中的变量：

```
functionName(parameter) {
    // do something
} 
```

**参数**是传递给函数的此变量的实际值 ：

```
functionName(argument); 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-07-27T00:11:26.777

对于 user1515422，一个非常具体的例子显示了参数和参数之间的区别：

考虑这个函数：

```
int divide(int numerator, int denominator) {
    return numerator/denominator;
} 
```

它有两个**参数**:`numerator`和`denominator`, 在定义时设置。一旦定义，函数的参数是固定的，不会改变。

现在考虑调用该函数：

```
int result = divide(8, 4); 
```

在这种情况下，`8`和`4`是传递给函数的**参数。**`numerator`参数设置为参数的值，`8`并`denominator`设置为`4`。然后使用设置为参数值的参数评估函数。你可以认为这个过程等同于：

```
int divide() {
    int numerator = 8;
    int denominator = 4;
    return numerator/denominator;
} 
```

参数和实参之间的差异类似于变量与其值之间的差异。如果我写`int x = 5;`，变量是`x`，值是`5`。可能会出现混淆，因为说“x 是 5”是“变量 x 的值是 5”的简写是很自然的，但希望区别很清楚。

这能澄清事情吗？

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-01-09T10:45:39.683

参数是您在调用子例程时所拥有的。参数是您在子例程中访问的内容。

```
argle(foo, bar); 
```

`foo`并且`bar`是论据。

```
public static void main(final String[] args) {
    args.length;
} 
```

`args`是一个参数。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2010-10-14T15:07:03.933

关于这个主题的[参数](http://en.wikipedia.org/wiki/Parameter_(computer_science)#Parameters_and_arguments)维基百科文章中有很好的部分。

简而言之——*参数*是函数定义的正式名称，*参数*是传递给函数的实际值（如 5）或事物（如变量）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-09T10:53:04.630

[尽管 Wikipedia 几乎不是权威来源，但它在解释术语方面](http://en.wikipedia.org/wiki/Parameter_(computer_science))做得不错。

我想你可以说参数是参数什么类是对象的实例......

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-02T18:59:44.340

当您定义如下函数时：

```
MyFunction(param1,param2) {
  print parameter1, parameter
} 
```

在定义函数时设置参数。当你像这样调用函数时：

```
MyFunction('argument1', 'argument2'); 
```

您将参数的值设置为您传递的参数。论点是您在调用问题时提出的问题。希望有帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-01T13:39:50.573

简单来说没有大的区别。如果我们深入其中，我们可以识别差异。主要我们知道 Argument/Parameter/signature 都是相同的。

基本上，**参数** 定义了我们传递的数据的类型。**参数** 定义了我们传递的实际数据/变量。

**参数示例：-**

```
int add(int a,int b){ //Here a and be both can treated as Parameter
 return a+b;
} 
```

**参数示例：-**

```
int return_result=add(3,4); // Here 3 and 4 both can treated as Argument

or

int x=3,y=4;
int return_result=add(x,y);// Here x and y both can treated as Argument 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-02T12:04:01.253

在大多数情况下，一个过程需要一些关于它被调用的环境的信息。执行重复或共享任务的过程对每个调用使用不同的信息。此信息由调用过程时传递给过程的变量、常量和表达式组成。

为了将此信息传递给过程，过程定义了一个参数，调用代码将一个参数传递给该参数。您可以将参数视为停车位，将参数视为汽车。正如不同的汽车可以在不同的时间停在停车位一样，调用代码每次调用过程时可以将不同的参数传递给同一个参数。

**参数**

参数表示过程希望您在调用它时传递的值。过程的声明定义了它的参数。

当您定义**Function**或**Sub 过程**时，您在紧跟过程名称的括号中指定参数列表。为每个参数指定名称、数据类型和传递机制（ByVal 或 ByRef）。您还可以指示参数是可选的，这意味着调用代码不必为它传递值。

每个参数的名称用作过程中的局部变量。您使用参数名称的方式与使用任何其他变量的方式相同。

**论据**

参数表示您在调用过程时传递给过程参数的值。调用代码在调用过程时提供参数。

当您调用**Function**或**Sub 过程**时，您在紧跟过程名称之后的括号中包含一个参数列表。每个参数对应于列表中相同位置的参数。

与参数定义相反，参数没有名称。每个参数都是一个表达式，它可以包含零个或多个变量、常量和文字。计算表达式的数据类型通常应该与为相应参数定义的数据类型匹配，并且在任何情况下它都必须可转换为参数类型。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-02T12:14:28.373

事实上，参数和参数都是不同类型的参数。那些是

> 1）形式参数 - 变量出现在函数/子程序定义中

例如。（在 Java 中）

```
public void foo(Integer integer, String... s2) 
```

这里整数和 s2 都是形式参数或松散的参数。

> 2）实际参数或实参——变量出现在子程序中，同时调用
> 
> 已经定义的子程序

例如。（在 Java 中）假设如果函数 "foo" 驻留在对象 "testObject" 中，

```
testObject.foo(new Integer(1), "test") 
```

因此，函数定义中的变量称为形参或简单的参数和变量，而调用方法则称为实参或实参。我希望它有所帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-02T17:32:32.963

把它想象成基本代数。X 是您必须填写的参数，您在其中放置的数字是参数。所以如果你有一个像 X+2 这样的方程，X 是你的参数，你为 X 改变的任何数字都被称为参数。因此，如果使用该等式为 x 补充 1，则得到 1+2。这意味着 1 是一个参数，提供给 X 的参数。

同样，如果你有一个像 dosomething("This") 这样的函数，它的定义将是 dosomething(string parametername)，但 "This" 将是提供给参数的实际参数，这里命名为 parametername。

以最简单的方式来看，参数是参数填充的东西，参数可以是该参数允许的任意数量的东西。

所以参数和参数之间是多对一的关系，因为你可以有一个参数可以有许多有效的参数，就像我们上面的 X+1 方程。X 可以是任何已知的数字，并且它们都是有效的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-11-09T13:23:13.113

变量是存储位置和关联的符号名称（标识符），其中包含数据、值。

参数是传递给函数的变量。

参数是传递给函数的数据（值）。

```
$variable = 'data/value';

function first($variable){ ... }

function second('data/value'){ ... }
function third(16){ ... } 
```

在函数中，我们首先传递一个参数。

在第二个和第三个函数中，我们传递参数。

# regex - 正则表达式实现用其小写版本替换组

> ID：427654
> 
> 赞同：58
> 
> 时间：2009-01-09T10:43:30.310
> 
> 标签：regex, replace, lowercase

是否有任何正则表达式的实现允许用它的小写版本替换正则表达式中的组？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2009-05-15T19:45:10.337

如果您的正则表达式版本支持它，您可以使用 \L，就像在 POSIX shell 中一样：

```
sed -r 's/(^.*)/\L\1/' 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-01-09T11:08:12.180

在 Perl 中，您可以执行以下操作：

```
$string =~ s/(some_regex)/lc($1)/ge; 
```

该`/e`选项导致替换表达式被解释为要评估的 Perl 代码，其返回值用作最终替换值。 `lc($x)`返回 的小写版本`$x`。（不确定，但我认为`lc()`会在最近的 Perl 版本中正确处理国际字符。）

`/g`表示全局匹配。`g`如果您只想要一个替换，请省略。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-01-23T15:52:38.977

如果您使用的是 SublimeText 或 TextMate ¹之类的编辑器，那么您很有可能会使用

```
\L$1 
```

作为您的替代品， where`$1`指的是您将括号括起来的正则表达式中的某些内容。例如²，这是我用来在某些 SQL 中小写字段名称的东西，将所有内容都放在任何给定行末尾的“as”右侧。首先是“查找”正则表达式：

```
(as|AS) ([A-Za-z_]+)\s*,$ 
```

然后是替换表达式：

```
$1 '\L$2', 
```

如果你使用 Vim（或者可能是 gvim），那么你会想要使用`\L\1`而不是`\L$1`，但是你需要注意另一个问题：Vim 颠倒了文字括号字符和转义括号字符之间的语法。因此，要指定要包含在替换中的正则表达式的一部分（“捕获”），您将`\(`在开头和`\)`结尾使用。将`\`其视为——而不是转义一个特殊字符以使其成为文字——标记一个特殊字符的开头（如`\s`, `\w`,`\b`等等）。所以如果你不习惯它可能看起来很奇怪，但如果你以 Vim 的方式思考它实际上是完全合乎逻辑的。

* * *

¹我已经在 TextMate 和 SublimeText 中对此进行了测试，它按原样工作，但有些编辑器使用`\1`而不是`$1`. 尝试两者，看看你的编辑器使用哪个。

²我刚刚将此正则表达式从我的历史记录中删除。我总是在使用它们时调整正则表达式，我不能保证这是最终版本，所以我并不是说它适合所描述的目的，尤其是与我正在处理的 SQL 格式不同的 SQL，只是它正则表达式中小写的具体示例。YMMV。尤约尔。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-03-22T23:55:48.777

几个答案已经注意到使用`\L`. 但是，`\E`如果您使用`\L`.

> `\L`将所有内容转换为下一个`\U`或`\E`小写。...`\E`关闭大小写转换。
> 
> *（来源：[https](https://www.regular-expressions.info/replacecase.html) ://www.regular-expressions.info/replacecase.html ）*

因此，假设您想使用[`rename`](https://metacpan.org/pod/distribution/File-Rename/rename.PL)小写部分文件名，如下所示：

```
artist_-_album_-_Song_Title_to_be_Lowercased_-_MultiCaseHash.m4a
artist_-_album_-_Another_Song_Title_to_be_Lowercased_-_MultiCaseHash.m4a 
```

您可以执行以下操作：

```
rename -v 's/^(.*_-_)(.*)(_-_.*.m4a)/$1\L$2\E$3/g' * 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-09T10:47:05.233

在 Perl 中有

```
$string =~ tr/[A-Z]/[a-z]/; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-09T10:50:39.190

大多数 Regex 实现允许您在进行替换时传递回调函数，因此您可以简单地从回调中返回匹配的小写版本。

# dependency-injection - 松耦合和依赖注入的香蕉

> ID：427659
> 
> 赞同：17
> 
> 时间：2009-01-09T10:45:32.773
> 
> 标签：dependency-injection

随着我们依赖注入框架的最新添加（春季注释），创建 DI 管理组件的边际成本似乎已经达到了一些关键的新阈值。虽然以前有与 spring 相关的开销（大量的 XML 和额外的间接），但依赖注入似乎已经开始出现在许多模式所在的地方；他们进入引擎盖并“消失”。

这样做的结果是与[*大量*](http://www4.java.no/web/show.do?page=205)组件相关的概念开销变得可以接受。有争议的是，我们可以创建一个系统，其中大多数类只公开一个公共方法，并通过疯狂地聚合这些部分来构建整个系统。在我们的例子中，给出了一些东西；应用程序的用户界面有一些功能需求，这些需求塑造了最顶层的服务。后端系统控制下部。但是在这两者之间，一切都可以争夺。

我们经常讨论的是*为什么我们要在类中分组*，*原则应该是*什么？有几件事是确定的；立面图案已死并被掩埋。任何包含多个不相关功能的服务也往往会被拆分。“不相关的特征”的解释比我之前所做的要严格得多。

在我们的团队中，这里有两种流行的思路：实现依赖限制分组；单个类中的任何功能最好是*所有*注入依赖项的客户端。我们是一个 DDD 项目，而另一部分则认为域限制了分组（CustomerService 或更细粒度的 CustomerProductService、CustomerOrderService）——注入依赖项的规范化使用并不重要。

那么在松散耦合的 DI 世界中，为什么我们将逻辑分组到类中？

编辑：duffymo 指出这可能正在朝着函数式编程风格发展；这就提出了国家的问题。我们有相当多的“状态”对象代表相关应用程序状态的（小）片段。我们将这些注入到任何对该状态有合法需求的服务中。（我们使用“状态”对象而不是常规域对象的原因是 spring 在未指定的时间构造这些对象。我认为这是一个轻微的解决方法或替代解决方案，让 spring 管理域对象的实际创建。可能有更好的解决方案这里）。

因此，例如，任何需要 OrderSystemAccessControlState 的服务都可以注入它，而消费者并不容易知道这些数据的范围。一些与安全相关的状态通常用于许多不同的级别，但在中间的级别上完全不可见。我真的认为这从根本上违反了功能原则。从 OO 的角度来看，我什至很难适应这个概念——但只要注入的状态是精确的并且是强类型的，那么*需求*就是合法的，也就是用例是合适的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-03-13T14:54:13.433

良好的面向对象设计的首要原则不仅限于松散耦合，还包括**高内聚**，这在大多数讨论中都被忽略了。

**高凝聚力**

> 在计算机编程中，凝聚力是衡量单个模块的职责相关性或集中程度的指标。应用于面向对象编程时，如果为给定类服务的方法在许多方面趋于相似，则称该类具有高内聚性。在高度内聚的系统中，代码可读性和重用的可能性增加，而复杂性保持在可控范围内。
> 
> 如果出现以下情况，则内聚力会降低：
> 
> ```
> * The functionality embedded in a class, accessed through its methods,
>   have little in common.
> * Methods carry out many varied activities, often using coarsely-grained or 
>   unrelated sets of data. 
> ```
> 
> 低内聚（或“弱内聚”）的缺点是：
> 
> ```
> * Increased difficulty in understanding modules.
> * Increased difficulty in maintaining a system, because logical changes in 
>   the domain affect multiple modules, and because changes in one module 
>   require changes in related modules.
> * Increased difficulty in reusing a module because most applications
>   won’t need the random set of operations provided by a module. 
> ```

当人们对 IoC 容器着迷时，丢失的一件事是失去了凝聚力，并且对某事是什么以及如何做某事的可追溯性成为日后自己弄清楚的噩梦，因为所有的关系都被一堆 XML 配置所掩盖文件（我在看你的 Spring）和命名不佳的实现类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-11-27T06:59:54.423

*   为什么我们要在类中分组，原则应该是什么？

您是在强调“分组”还是“类”？

如果您问我们为什么要对事物进行分组，那么我会第二次选择 Medelt 的“可维护性”，尽管我会将其改写为“减少连锁反应的潜在成本”。

暂时不要考虑组件（类、文件，无论它们是什么）之间的实际耦合，而是潜在的耦合，即这些组件之间源代码依赖项的最大可能数量。

有一个定理表明，给定一个分量链 a - b - c - d - e，使得 a 依赖于 b 等，改变 e 将改变 c 分量的概率不能大于可能性改变 e 将改变 d。而在真实的软件系统中，改变 e 影响 c 的概率通常小于改变 e 影响 d 的概率。

当然，你可能会说，这很明显。但我们可以让它更加明显。在这个例子中，d 直接依赖于 e，而 c 间接（通过 d）依赖于 e。因此，我们可以说，从统计学上讲，一个主要由直接依赖构成的系统将比一个主要由间接依赖构成的系统遭受更大的连锁反应。

鉴于在现实世界中，每个涟漪效应都需要花钱，我们可以说，主要由直接依赖关系形成的系统更新的涟漪效应成本将高于主要由间接依赖。

现在，回到潜在耦合。有可能表明，在绝对封装上下文中（例如 Java 或 C#，递归封装并未广泛采用）所有组件都可能通过直接依赖关系或与单个中间组件的间接依赖关系相互连接。从统计上看，将其组件之间的直接潜在耦合最小化的系统可以最大程度地减少由于任何更新而产生的涟漪效应的潜在成本。

以及我们如何实现直接和间接潜在耦合之间的这种区别（就好像我们还没有让猫从袋子里出来一样）？带封装。

封装是一个属性，即模型化实体中包含的信息只能通过该模型化实体支持的接口上的交互来访问。无法通过这些接口访问的信息（可以是数据或行为）称为“隐藏信息”。通过组件内的信息隐藏行为，我们保证只能由外部组件间接（通过接口）访问它。

这必然需要某种分组容器，其中可以隐藏某种更细粒度的功能。

这就是为什么我们是“分组”的东西。

至于为什么我们使用类来分组事物：

A) 类提供了一种语言支持的封装机制。

B) 我们不仅使用类：我们还使用命名空间/包进行封装。

问候，

埃德。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T12:01:45.047

我可以想到两个原因。

可维护性：您自然会期望一些逻辑可以一起使用。定义对特定外部服务（例如数据库）的操作的逻辑可能应该以逻辑方式组合在一起。您可以在命名空间或类中执行此操作。

状态和身份：对象不仅包含逻辑，还维护状态。作为处理特定对象状态的接口的一部分的逻辑应该在该对象上定义。对象也维护身份，一个在问题域中为一个实体建模的对象应该是您软件中的一个对象。

作为侧节点：状态和身份参数主要适用于域对象。在大多数解决方案中，我主要将 IoC 容器用于这些服务。我的域对象通常是作为程序流的一部分创建和销毁的，我通常为此使用单独的工厂对象。然后可以通过 IoC 容器注入和处理工厂。我在创建工厂作为 IoC 容器的包装器方面取得了一些成功。这样容器也可以处理域对象的生命周期。

这是一个非常有趣的问题。如果我回顾一下我过去实现事物的方式，我会看到一种趋势，即更小、更细化的接口和类。事情当然会这样好转。我不认为最佳解决方案每个班级都有一个功能。这实际上意味着您将 OO 语言用作函数式语言，虽然函数式语言非常强大，但结合这两种范式还有很多话要说。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T11:40:01.367

纯DI完美宇宙，我觉得单类+方法设计比较理想。实际上，我们需要平衡降低可行性的成本。

成本因素

*   DI 的开销。为单一方法启动所有底层证券和相关底层证券是昂贵的。分组到一个类允许我们抵消一些。
*   技能 - DI 对许多人（尤其是我自己）来说是新的，因此了解如何做得更好或摆脱旧的/习惯性设计是很困难的
*   已经拥有它们的棕地应用程序，与它们一起生活更容易/更便宜/更快，并在未来的绿地应用程序中担心这一点

希望我对 DI 的新手（是的，我充满了虚构的词）并没有让我完全错了。

# c++ - 轮询事件 API 的设计

> ID：427678
> 
> 赞同：1
> 
> 时间：2009-01-09T10:53:21.697
> 
> 标签：c++, api, events, polling

假设您正在设计一个 C++ 窗口库。它可能提供也可能不提供回调 API，但需要提供轮询 API 以促进函数式编程。

轮询 API 会是什么样子？

# 一些选项

## SDL 风格

```
struct Event {
    enum { MousePress, KeyPress } type;
    union {
        struct { Point pos; MouseButton b; } mousePress;
        struct { Modifiers mods; char key; } keyPress;
    };
};
void userCode() {
    for(;;) {
        Event e; if(pollEvent(&e)) {
            switch(e.type) {
                case MousePress: cout<<event.mousePress.pos.x; break; // not typesafe
                case KeyPress: cout<<event.keyPress.key; break;
            }
        }
    }
} 
```

## 国家风格

```
struct Input {
    enum { Mouse, Keyboard, Nothing } whatChanged;
    MouseButtonsBitfield pressedButtons;
    bool keysPressed[keyCount];
};
void userCode() {
    for(;;) {
        Input in = pollInput();
        switch(in.whatChanged) {
            // typesafe yay
            case Mouse: cout << "is LMB pressed? " << bool(in.pressedButtons&LeftButton); break;
            case Keyboard: cout << "is A pressed? " << in.keysPressed['A']; break;
        }
    }
} 
```

## 有趣的函数式伪 C++ 风格

```
struct Event {
    // transforms listener by notifying it of event,
    // returns transormed listener. nondestructive.
    template<class Listener> // sadly invalid, templates can't be virtual.
                                              // a solution is to make Listener the base
                                              // of a hierarchy and make Listener::handle virtual
                                              // but then we're forced to use imperative style
    virtual Listener transform(Listener const&) =0;
};
struct MousePress : Event { // yay we're extensible via inheritance
    template<class Listener>
    virtual Listener transform(Listener const& listener) {
        return listener.handle(*this); // calls the MousePress overload
    }
    Point pos; MouseButton b;
};
struct KeyPress : Event {
    template<class Listener>
    virtual Listener transform(Listener const& listener) {
        return listener.handle(*this); // calls the KeyPress overload
    }
    Modifiers mods; char key;
};
struct NoEvent : Event {
    template<class Listener>
    virtual Listener transform(Listener const& listener) {
        return listener.handle(*this);
    }
};
struct UserWidget {
    UserWidget handle(NoEvent) {
        return UserWidget();
    }
    UserWidget handle(MousePress p) {
        return (UserWidget) { string("pressed at")+lex_cast<string>(p.pos)) };
    }
    UserWidget handle(KeyPress k) {
        return (UserWidget) { string("pressed key=")+lex_cast<string>(k.key)) };
    }
    string pendingOutput;
};
void userTick(UserWidget const& w) {
    cout<<w.pendingOutput;
    userTick(pollEvent().transform(w));
}
void userCode() {
    userTick(UserWidget());
} 
```

C++ 以外的其他语言的答案是可以的，如果它们提供有趣的见解的话。

请不要对封装发表评论-是的，公共字段确实应该是访问器，为了清楚起见，我将其省略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T12:47:09.477

为了快速回答您的问题，我更喜欢“SDL 样式代码”的简单性。主要是因为您稍微复杂的“状态样式”浪费内存并且绝对不会给您买任何东西（见下文），并且您折磨的“功能性伪 C++”样式中的递归将在几毫秒内溢出堆栈。

**“State Style”**：“State Style”代码中的“typesafe yay”有点没有根据。您仍在根据`switch`另一个成员决定访问哪个成员，因此该代码具有与“SDL 样式”代码相同的所有弱点 - 对于您使用 SDL 样式代码可能犯的任何导致解释的错误memory 作为错误的类型，你会犯同样严重的错误，即使用 State 样式代码访问未初始化的成员。

**“功能性伪 C++ 风格”**：现在你已经到了某个地方，从基本事件类型继承不同的事件类型。显然愚蠢的递归需要变成一个循环，还有一些小事情需要整理（我认为你的 3 个方法命名为`transform()`in`UserWidget`想被调用`handle()`；我猜你可以使用 Boost 解决没有模板虚方法的问题.Function 或类似功能）。我认为这种方法具有潜力，尽管我更喜欢 SDL 风格的简单性。

但更根本的是：我质疑轮询界面的必要性。`pollEvent()`有什么不能阻止的原因吗？就目前而言，所有 3 个代码段在 99.99% 的时间里都在消耗 CPU 时间。

# javascript - JavaScript（通过 Greasemonkey）未能在标签上设置“标题”属性

> ID：427679
> 
> 赞同：0
> 
> 时间：2009-01-09T10:54:33.020
> 
> 标签：javascript, html, greasemonkey

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T11:26:03.690

尝试用`if`此代码替换的主体。

```
 aTags[i].addEventListener("mouseover", (function(source, fragment)
        {
            return function()
            {
                if (this.title == "")
                {
                    (providers[source])(this, fragment);
                }
            }
        })(data[1], data[2]), false) ; 
```

注意循环完成后 do `aTags = null;`。

您的问题是 if 语句块不是真正的范围，任何 var'd 都将属于外部函数范围。因此，您作为事件处理程序提供的内部函数将使用最后一次传递的源、链接和片段。另外，通过维护对 DOM 对象的引用，由于循环引用，您会出现内存泄漏。

上述方法通过函数调用在每次传递时创建一个新范围，因此每个源和片段都在其自己的范围内。它还使用了这样一个事实，即称为事件侦听器的函数具有`this`指向它所附加的元素的属性，因此避免了包含 DOM 元素的循环引用。

# .net - 如何在 Windows Server 2008 的程序集中安装文件？

> ID：427686
> 
> 赞同：16
> 
> 时间：2009-01-09T10:59:57.347
> 
> 标签：.net, assemblies, windows-server-2008

通常我以前做的是将文件拖放到 GAC 文件夹中。
这适用于 Windows 2000 和 2003，但是当我尝试在 Windows Server 2008 中执行此操作时，我得到“访问被拒绝”。

执行此操作的用户是本地管理员。

我能找到的唯一参考是： [论坛链接](http://social.technet.microsoft.com/Forums/en-US/winserversecurity/thread/5d577080-f962-40a5-9575-135d4a787955/)

还有另一种方法可以实现这一目标吗？

注意：我尝试以管理员身份运行资源管理器，但我得到了同样的错误。

编辑：理想情况下，任何解决方案都不应关闭 UAC，或安装任何软件开发工具包。（因此它可以应用于生产服务器）。

编辑：还有人对此有任何想法吗？我目前已经在开发中禁用 UAC，但是这在现场是不可接受的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-29T10:21:10.887

这是服务器 2008 中的 UAC 问题，有人建议停止 UAC，我不建议在生产服务器上这样做。答案**是**使用 gacutil。

您**无需**安装 SDK 即可在生产服务器上运行它，exe 及其配置文件可以从开发机器部署（如果需要，可以在使用后删除）。

将 gacutil.exe 和 gacutil.exe.config 放入特定于您正在使用的框架版本的 WINDOWS\Microsoft.NET\Framework\ 文件夹中。

然后使用“以管理员身份运行”启动命令行的新实例

导航到您已部署 gacutil 的 C:\WINDOWS\Microsoft.NET\Framework.... 文件夹

然后运行：gacutil.exe /i

希望这可以解决您的问题（它对我有用）。

祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T11:02:52.520

转到 Visual Studio 或 .NET 命令提示符并键入命令：

```
gacutil -if "fullpathhere.dll"

```

更多地探索 gacutil 命令。-IF 表示强制安装，还有其他选项。

如果没有安装 Visual Studio 或 .NET Framework SDK，那么您将没有 .NET 命令提示符。在这种情况下，我认为您必须从控制面板关闭 UAC 才能将程序集拖放到程序集文件夹中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T11:16:12.503

Paulo Oliveira 解释的技巧有效，但并非在所有情况下都有效。在 Windows Server 2008 R2 上，我已经部署了以下策略：

*（确保您使用在服务器上具有管理员权限的帐户登录）*

*   打开**本地安全策略**（开始按钮，键入“本地”...）
*   导航到安全设置 > 本地策略 > 安全选项
*   找到名为**用户帐户控制的策略：在管理员批准模式下运行所有​​管理员**

您可能会发现此策略已启用。禁用它，重新启动服务器，现在您应该可以使用常规的拖放方法了。

**完成后不要忘记再次启用此设置。**

*（参考：http: [//blogs.msdn.com/b/mossbiz/archive/2010/06/10/add-an-assembly-to-the-global-assembly-cache-on-windows-server-2008-r2 .aspx](http://blogs.msdn.com/b/mossbiz/archive/2010/06/10/add-an-assembly-to-the-global-assembly-cache-on-windows-server-2008-r2.aspx) )*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-11-19T11:04:59.443

使用“以管理员身份运行”运行命令提示符。执行命令“explorer C:\windows\assembly”。此窗口接受来自另一个以“以管理员身份运行”权限执行的资源管理器的 DLL 文件。

希望能帮助到你

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-18T23:28:14.413

如果在 Win2008 服务器（或 Win7）上更改本地安全策略，可以使用旧的拖放方法：

[http://blogs.msdn.com/b/mossbiz/archive/2010/06/10/add-an-assembly-to-the-global-assembly-cache-on-windows-server-2008-r2.aspx](http://blogs.msdn.com/b/mossbiz/archive/2010/06/10/add-an-assembly-to-the-global-assembly-cache-on-windows-server-2008-r2.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T11:04:58.957

我从未在 Windows Server 2008 中尝试过，但您是否尝试过控制面板/管理工具/.NET Framework 2.0 配置？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-13T14:19:43.100

如果它是 3.5 或更旧的 dll，请将其拖放到启动/运行/程序集。如果它是 4.0 或更新的 dll，您应该运行 gacutil，然后查看 windows/microsoft.net/assembly。对于 prod，只需编写一个批处理文件并复制 gacutil 应用程序以进行设置。无需在产品中安装 VS。

# visual-studio-addins - 如何为 Visual Studio 2008 Express 安装 PowerCommands？

> ID：427688
> 
> 赞同：0
> 
> 时间：2009-01-09T11:01:01.447
> 
> 标签：visual-studio-addins

我的机器上安装了 Visual Studio 2008 Express SP1。我今天尝试安装 PowerCommands，但它说没有安装 Visual Studio。我可以做些什么来安装它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T11:04:33.997

Visual Studio 2008 Express 不允许加载项

# ruby-on-rails - 你将如何制定这个每日课程表？

> ID：427689
> 
> 赞同：4
> 
> 时间：2009-01-09T11:01:17.327
> 
> 标签：ruby-on-rails, ruby, activerecord, schedule

我想做的很简单，但我正在努力寻找最好或最优雅的方式来做到这一点。我现在正在构建的 Rails 应用程序将有一个每日课程的时间表。对于每个班级，与此问题相关的字段是：

*   一周中的天
*   起始时间
*   结束时间

单个条目可能是这样的：

*   星期几：星期三
*   开始时间：上午10:00
*   结束时间：中午

另外我必须提到它是一个双语 Rails 2.2 应用程序，我使用的是原生 i18n Rails 功能。我其实有几个问题。

关于一周中的哪一天，我应该创建一个包含天数列表的额外表格，还是有内置方法可以即时创建该列表？请记住，根据语言环境变量，一周中的这些日子必须在日程表视图中以英语或西班牙语呈现。

在查询时间表时，我需要按工作日（从周一到周日）对结果进行分组和排序，当然还需要按开始时间对每天的课程进行排序。

关于每节课的开始时间和结束时间，您会使用日期时间字段还是整数字段？如果是后者，您将如何准确地实现这一点？

期待阅读你们提出的不同建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T21:23:47.937

我只是将星期几存储为整数。0 => 星期一 ... 6 => 星期日（或任何您想要的方式。即 0 => 星期日）。然后将开始时间和结束时间存储为时间。

这将使分组变得非常容易。您所要做的就是按星期几和开始时间排序。

您可以通过多种方式显示它，但这就是我要做的。

1.  具有以下功能：`@sunday_classes = DailyClass.find_sunday_classes`返回按开始时间排序的星期日的所有类。然后每天重复。

    ```
    def find_sunday_classes
      find_by_day_of_week(1, :order -> 'start_time')
    结尾
    ```

    注意： find_by 最后可能应该有 id ，但这只是您希望如何命名列的偏好。

2.  如果你想要一整周，那么从控制器调用所有七个并在视图中循环遍历它们。您甚至可以为每一天创建详细信息页面。

3.  翻译是唯一棘手的部分。您可以创建一个辅助函数，该函数接受一个整数并根据本地返回一周中适当日期的文本。

这是非常基本的。没什么复杂的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T11:53:53.487

如果您的数据是时间，那么我会将其存储为时间 - 否则当您对其进行与日期和时间相关的操作时，您将始终必须将其从数据库中转换出来。日期是冗余数据，因为它将是时间对象的一部分。

这应该意味着您不需要存储天数列表。

如果 t 是一个时间，那么

```
t.strftime('%A') 
```

总是会给你一天的英文字符串。然后可以根据需要由 i18n 翻译。

所以你只需要存储开始时间和结束时间，或者开始时间和持续时间。两者应该是等价的。我很想自己存储结束时间，以防您需要对结束时间进行数据操作，因此不必计算。

我认为您所描述的其余大部分内容也应该不将时间数据存储为时间实例。

按工作日和时间排序只是按您的时间列排序的问题。IE

```
daily_class.find(:all, :conditions => ['whatever'], :order => :starting_time) 
```

按天分组*有点*棘手。然而，这是一篇关于如何按周分组[的优秀帖子。](http://ariejan.net/2007/01/12/rails-group-results-by-week-using-group_by/)按天分组将是类似的。

如果您要处理大量数据，最好在数据库中进行处理，使用`find_by_sql`and 可能取决于数据库的时间和日期功能，但再次将数据存储为 Time 也将对您有所帮助. 例如在 Postgresql（我使用的）中，获取课程的星期是

```
date_trunc('week', starting_time) 
```

您可以在 Group By 子句中使用它，或者作为在 rails 中的某些循环逻辑中使用的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T13:03:27.713

关于星期几，如果您需要例如在 MWF 上满足 09:00-10:00 的课程，那么您可以使用单独的表格来显示课程满足的天数（由课程 ID 和 DOW 键入）或者邪恶（即非规范化）并在每个类中保留相当于一个 DOW 数组。经典的论点是这样的：

*   可以以某种方式对单独的表进行索引以支持面向类或面向 DOW 的选择，但需要更多的胶水将整个图片组合在一起以形成一个类。
*   对于初学者来说，DOW 数组更易于可视化，代码也稍微简单一些，但这意味着关于 DOW 的推理需要查看*所有*类。

如果这仅适用于您的个人课程表，请做让您获得您正在寻找的价值的事情，并承担后果；如果您尝试为多个用户构建一个真实的系统，我会使用单独的表。所有这些规范化规则的存在都是有原因的。

至于（人类可读的）DOW 名称，这是一个表示层问题，不应该在 DOW 的核心概念中。（假设您决定搬到蒙特利尔，并且需要法语？那应该是另一个“面孔”，而不是对核心实现的更改。）

至于开始/结束时间，问题又是您的要求。如果所有课程都在小时 (x:00) 边界开始和结束，您当然可以使用 0..23 作为一天中的小时数。但是，一旦你不得不适应那个 45 分钟的研讨会，你的生活就会变得悲惨。正如旧广告所说，“现在付钱给我，或者以后付钱给我。”

一种方法是定义您自己的 ClassTime 概念并将所有关于时间的推理划分为该类。它可以从一个简单的表示开始（整数小时 0..23，或午夜 0..1439 之后的整数分钟），然后根据需要“增长”。

# c++ - 如何使用不在源代码文件夹中的程序？

> ID：427693
> 
> 赞同：0
> 
> 时间：2009-01-09T11:02:25.890
> 
> 标签：c++, dos

例如：我在 MS DOS 上，我在文件夹 C:\Documents and Settings\Programs 中有一个源代码。我可以让我的源代码使用随机文件夹中的程序（例如 gnuplot）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T11:06:23.760

[http://www.codeproject.com/KB/system/newbiespawn.aspx](http://www.codeproject.com/KB/system/newbiespawn.aspx)

ShellExecute 将查看 PATH 环境变量，因此您无需指定完整的 PATH。现在，如果它真的是一个随机位置并且它甚至不在 PATH 环境变量中，那么我猜你不走运。

如果它们甚至不在 PATH 中，那么您必须在候选文件夹中搜索它。这是有关如何在 C++中[遍历文件系统路径的示例代码。](http://www.daniweb.com/forums/thread31081.html)

还有一个使用 Boost 的例子：

目录列表.h

```
#ifndef DIRECTORYLIST_H_INCLUDED
#define DIRECTORYLIST_H_INCLUDED
#define BOOST_FILESYSTEM_NO_DEPRECATED

#include <iostream>
#include <list>
#include <string>

class directoryList {

    public:
        directoryList();
        ~directoryList();
        std::list<std::string> getListing(std::string path);
};
#endif // DIRECTORYLIST_H_INCLUDED 
```

目录列表.cpp

```
#include "boost/filesystem/operations.hpp"
#include "boost/filesystem/convenience.hpp"
#include "boost/filesystem/path.hpp"
#include "boost/progress.hpp"

#include "directoryList.h"

using namespace std;
namespace fs = boost::filesystem;

directoryList::directoryList() {}
directoryList::~directoryList() {}

list<string> directoryList::getListing(string base_dir) {

    list<string> rv;
    fs::path p(base_dir);

    for (fs::recursive_directory_iterator it(p); 
         it != fs::recursive_directory_iterator(); ++it) {

        string complete_filename = it->path().string();
        rv.insert(rv.begin(),complete_filename);

    }

    return rv;

} 
```

使用示例：

```
directoryList *dl = new directoryList();
filenames = dl->getListing("C:\\Program Files");
//search for the file here, or modify the getListing to supply a filter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T11:13:46.817

还有一些核心函数[_exec/exec](http://msdn.microsoft.com/en-us/library/431x4c1w.aspx)及其修改。Linux 也有类似的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T13:36:15.323

源代码的位置与 system() 调用（我假设您使用该调用）定位程序的方式无关。唯一相关的考虑是编译的可执行文件的位置。

请查看 Windows 中的 PATH 环境变量 - 这就是找到程序的方式。这是一个以分号分隔的目录列表，Windows 在其中查找可执行文件和 BAT 文件和 DLL。在该列表中，当前目录和（我认为）您的 EXE 所在的位置都在前面。

PATH 是在 Windows XP 中通过系统控制面板小部件高级选项卡环境按钮设置的。对于 Vista，事情更复杂 - 您需要以管理员身份进行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T16:41:54.340

正如 Vinko 所说，PATH 环境变量决定了 Windows 将在何处查找程序文件。

通常最好避免将可执行文件的路径硬编码到已编译的程序中。即使 gnuplot 在您计算机上的特定文件夹中，它也可能不在其他人计算机上的同一文件夹中。这将导致您对其他程序的调用失败。您可以将其存储在注册表中并让用户配置程序位置，或提供搜索它的安装程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T19:38:13.703

以下是一些选项：

1.  在系统 PATH 中搜索要运行的可执行文件
2.  允许用户在命令行上指定位置
3.  将位置存储在配置文件中，并允许用户在安装期间（如果您有安装过程）或通过手动编辑文件来指定它

理想情况下你会做所有 3

# sql-server - 无法删除包保护并出现错误 0x80131940

> ID：427697
> 
> 赞同：2
> 
> 时间：2009-01-09T11:04:13.623
> 
> 标签：sql-server, visual-studio

我正在尝试在 SQL Server BID 中打开受密码保护的程序包，每次输入正确密码时都会收到以下错误消息：

`Failed to remove package protection with error 0x80131940 "(null)"`

这发生在`CPaqckage::LoadFromXML`方法中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T19:48:37.943

我遇到了同样的问题，发现大写锁定已打开。输入正确的密码并打开大写锁定会显示错误消息“无法删除包保护，错误为 0x80131940”（null）”，而输入错误的密码会显示“您输入的密码不正确”消息。非常具有误导性但很简单修理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-02-29T04:05:44.627

我相信你认为你有正确的密码，但你真的没有。

我最近遇到了这个问题。我知道您很久以前就发布过，但是当我遇到同样的情况时，我找不到答案。当我认为我的密码正确时，结果发现我输入了错误的密码（我不是创建包的人）。

我曾假设，由于某些错误的密码产生了`wrong password`错误消息，因此我必须拥有正确的密码，而没有产生`wrong password`消息的密码 - 事实证明，打开密码加密的 SSIS 包时，不同的错误密码可能会返回不同的错误消息！

很奇怪。无论如何，在终于掌握了原开发者并获得正确密码后，我能够很好地打开包装。

对于它的价值，我永远不会建议使用密码加密整个包，可能是敏感数据，但不是整个包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-25T16:19:04.953

我刚刚收到同样的错误。我的问题是针对 SQL Server 2017 而不是 SQL Server 2016（项目 > 属性 > 配置属性 > 常规 > 部署目标版本 > TargetServerVersion）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-28T18:24:45.330

我在笔记本电脑上运行基于 vs 2017 企业版的软件包时收到此消息。在这种情况下，人们总是对您的密码大惊小怪。如果您可以使用 Visual Studio 进入软件包，则您知道您的密码。我在解决方案和包级别设置 encryptAllWithPassword。它只是在我的笔记本电脑上作为 dtexec 出现此消息失败。当我将包移动到天蓝色时，它使用 /DECRYPT 语句运行。因此，如果您只在一个环境中进行测试并且失败了，请在另一个环境（天蓝色或服务器环境）中尝试它，它可能会起作用。

# windows-vista - 在 Windows Vista 上覆盖 C:\Program\MyProg 中的可执行文件

> ID：427700
> 
> 赞同：3
> 
> 时间：2009-01-09T11:04:46.040
> 
> 标签：windows-vista, executable

我希望我的程序能够自我更新（从 ftp 下载新的 exe 和/或其他一些文件），并且我使用了[这个问题](https://stackoverflow.com/questions/264788/can-i-update-a-exe-that-is-running-closed)的已接受答案中的配方。回顾：

1.  将正在运行的程序重命名为 old-mp.exe
2.  直接将更新下载为 mp.exe
3.  重启程序

这适用于 Windows XP。在 vista 上存在问题，因为用户必须以管理员身份运行程序才能使其正常工作。右键单击并选择“以管理员身份运行”可能会让我的用户头疼......有谁知道解决这个问题的方法？我非常喜欢简单的更新方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T11:54:53.937

简单的选项是包含一个清单，指定应用程序需要管理员权限。然后Vista会自动提示权限提升。清单应如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
   <assemblyIdentity version="1.0.0.0" processorArchitecture="X86" name="ApplicationName" type="win32"/>
      <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
      <security>
         <requestedPrivileges>
            <requestedExecutionLevel level="requireAdministrator"/> 
         </requestedPrivileges>
      </security>
   </trustInfo>
</assembly> 
```

您可以使用 mt.exe 工具将其添加到现有应用程序中。

或者，您可以在实际更新之前使用管理权限重新启动程序。这样用户就不需要总是以管理权限运行 - 只是在更新时。

# windows - 报告 Direct3D 内存使用情况

> ID：427707
> 
> 赞同：1
> 
> 时间：2009-01-09T11:06:54.400
> 
> 标签：windows, memory, direct3d, video-memory

我有一个 Direct3D 9 应用程序，我想监控内存使用情况。有没有工具可以知道 Direct3D 使用了多少系统和视频内存？理想情况下，它还会报告为纹理、顶点缓冲区、索引缓冲区分配了多少...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T18:09:56.550

您可以使用旧的 DirectDraw 接口来查询总内存和可用内存。

**但是，您以这种方式获得的数字并不可靠**。

可用内存可能随时发生变化，可用内存通常会考虑 AGP 内存（严格来说不是视频内存）。您可以使用这些数字来很好地猜测您的应用程序/游戏的默认纹理分辨率和细节级别，仅此而已。

您可能想知道为什么没有办法获得更好的数字，毕竟跟踪资源使用情况并不难。

从应用的角度来看，这是正确的。您可能认为视频内存只包含表面、纹理、索引和顶点缓冲区以及一些着色器程序，但在低级方面并非如此。

还有很多其他资源。所有这些都是由 Direct3D 驱动程序创建和管理的，以使渲染尽可能快。其中包括分层 z 缓冲区加速结构、预编译命令列表（例如，以 GPU 理解的格式呈现某些内容所需的数据）。驱动程序还可以提前对多帧的渲染命令进行排队，以平衡帧速率并增加 GPU 和 CPU 之间的并行性。

驱动程序还在引擎盖下为您做了很多工作。启发式方法用于检测具有静态几何图形和恒定渲染设置的绘制调用。在这些情况下，驱动程序可能会决定优化几何结构以更好地使用缓存。这一切都是在驾驶员的控制下并行发生的。所有这些东西也需要空间，因此可用内存可能随时更改。

但是，驱动程序也会缓存您的资源，因此您实际上并不需要首先知道资源使用情况。

如果您需要比可用空间更多的空间，那没问题。驱动程序将为您在系统内存、AGP 内存和视频内存之间移动数据。在实践中，您永远不必担心视频内存不足。当然 - 一旦你需要比可用更多的视频内存，性能就会受到影响，但这就是生活:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-04T07:13:08.813

两个建议：

您可以在不同时间调用[GetAvailableTextureMem](http://msdn.microsoft.com/en-us/library/bb174378(VS.85).aspx)以获得对整体内存使用进度的（粗略）估计。

假设您在 nVidia 上进行开发，[PerfHUD](http://developer.nvidia.com/object/nvperfhud_home.html)包括消耗的 AGP/VID 内存（分离）的图形表示。

您可能无法获得一个干净的内存使用者（顶点缓冲区等）与内存位置（AGP、VID、系统）的矩阵，因为 -

(1) 驱动程序在内存类型之间传输资源有很大的自由度，*并且*

(2) 实际消耗内存的种类远远大于暴露的D3D接口。

# javascript - 切换表格单元格内的数据显示

> ID：427717
> 
> 赞同：1
> 
> 时间：2009-01-09T11:13:48.707
> 
> 标签：javascript, php, css, html-table

我有一个由普通 PHP 循环生成的表。我想要做的是在每行的第一列中创建一个表单，默认情况下它是隐藏的，但是当您单击该行中的切换链接时会出现。

我可以通过创建一个名为 hidden 和 setting 的 CSS id 来制作一个普通的可切换 div `display: none;`。不幸的是，我无法继续创建`id=hidden`与前面的链接自动关联的 div。

我对 Javascript 和 CSS 都非常缺乏经验，所以我主要尝试通过将示例拼凑在一起来做到这一点，但我的结果是空的。我在某些地方读到过你不能将 div 放在表格中，所以也许我做错了。

这是代码的作用以及我希望它如何工作的示例，但当然不是。

```
<script language="JavaScript" type="text/javascript">
    function toggle(id) {
        var state = document.getElementById(id).style.display;
            if (state == 'block') {
                document.getElementById(id).style.display = 'none';
            } else {
                document.getElementById(id).style.display = 'block';
            }
        }
</script>

<?php

while($array = mysql_fetch_array($sql))
    {
?>
<tr>
    <td>
<?php
        echo $array['some_data'];
?>
        <a href="#" onclick="toggle('hidden');">Toggle</a>
        <div id="hidden"><?php echo $array['hidden_thing']; ?></div>
    </td>
    <td>
        <?php echo $array['some_other_data']; ?>
    </td>
</tr>
<?php
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T11:22:34.413

只需为每一行使用不同的 ID：

```
<?php
$count = 0;
while($array = mysql_fetch_array($sql)) {
  $id = 'hidden' . $count++;
  $data = $array['some_data'];
  $hidden = $array['hidden_thing'];
  $other_data = $array['other_data'];
  echo <<<END
<tr>
  <td>$data <a href="#" onclick="toggle('$id');>Toggle</a>
    <div id="$id">$hidden_thing</div>
  </td>
  <td>$other_data</td>
</tr>

END;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T11:20:11.687

将其设为跨度而不是 DIV，因为我认为某些浏览器不支持表格元素内的 div。此外，不要通过 ID 引用它，而是传递`this.nextSibling()`到切换，使用 DOM 导航来获取下一个兄弟（应该是 SPAN）来显示/隐藏。

```
 function toggle(ctl) {
      var state = ctl.style.display;
      if (state == 'block') {
          document.getElementById(id).style.display = 'none';
      } else {
          document.getElementById(id).style.display = 'block';
      }
  }

  <a href="#" onclick="toggle(this.nextSibling);">Toggle
  </a><div><?php echo $array['hidden_thing']; ?></div> 
```

**编辑**：正如@tomhaigh 建议的那样（如示例中所示），要使其正常工作，您需要确保锚点和 div 之间没有文本/空格。您还可以编写一个函数，给定一个 DOM 元素，选择下一个非文本 DOM 元素并返回它。然后传递`this`给该函数并将结果传递给您的切换函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T19:11:03.353

这是我推荐的（通用解决方案）使用[jQuery](http://jQuery.com)来相对引用事件，而不是为每行和表单维护 id。这也允许您轻松隐藏非活动的行表单，这是一个好主意，因为一次只能提交一个表单。

**HTML：**

```
<table id="tableForms" class="table">
  <tr>
    <td class="rowForm"><form><span>form1 content</span></form></td>
    <td class="showRowForm">click on row to show its form</td>
    </tr>
  <tr>
    <td class="rowForm"><form><span>form2 content</span></form></td>
    <td class="showRowForm">click on row to show its form</td>
    </tr>
  <tr>
    <td class="rowForm"><form><span>form3 content</span></form></td>
    <td class="showRowForm">click on row to show its form</td>
    </tr>
</table> 
```

**Javascript：**

```
<script type="text/javascript" src="/assets/js/jquery.min.js"></script>
<script type="text/javascript">
//as soon as the DOM is ready, run this function to manipulate it
$(function() {
    // get all tr elements in the table 'tableForms' and bind a 
    // function to their click event
    $('#tableForms').find('tr').bind('click',function(e){
        // get all of this row's sibblings and hide their forms.
        $(this).siblings().not(this).find('td.rowForm form').hide();

        // now show the current row's form
        $(this).find('td.rowForm form').show();
    }).
    // now that the click event is bound, hide all of the forms in this table
    find('td.rowForm form').hide();
});
</script> 
```

**演示：**

可以在[这里找到一个工作演示。](http://yaauie.com/stackoverflow/427717/)

# list - 替代非法 或 之内 标签悬停？

> ID：427721
> 
> 赞同：9
> 
> 时间：2009-01-09T11:15:51.760
> 
> 标签：list, popup, hover, line-breaks, pseudo-class

有没有人建议在`<li>`包含悬停弹出伪类的标签中创建段落类型的行空间？

我有一个`<span>`弹出窗口`a:hover`，我希望弹出的文本分成 2 段。它适用`<br>`于FF，但我想做正确的事情（现在我发现它是错误的！）......

html:

```
<div id="rightlist">
  <ul>
      <li><a href="">List item
          <span>
             words words words that are "paragraph" 1 of List item
             <br><br>
             different words that make up "paragraph" 2 of List item
          </span></a></li> 
```

CSS：

```
#rightlist {
margin-top: 10px; margin-right: 5px; width: 387px ; height: 239px ;
background-color: #7EBB11 ;
display: table-cell; 
z-index: 100 ;
    float: right ;
}

#rightlist ul {
  text-align: left;
margin: 0;
   margin-top: 6px;
font-family: sans-serif;
font-size: 20px ;
color: black ;
}

#rightlist a 
{
    display: table-cell;
text-decoration: none; color: black; 
background: #7EBB11 ; 
}

/*appearance of the <a> item (but before the <span> tag) on hover*/
#rightlist a:hover {
color: white;
}

/*appearance of the spanned content within <a></a> tags when not hovered */
/* %%%%% important - keep position:absolute in this div %%%%% */
#rightlist a span {
display: none;
position: absolute ;
margin-left: -412px;
top: -10px; left: 10px; padding: 10px ;
z-index: 100;
width: 380px; height: 222px; 
color: white;  background-color: #7EBB11;
font: 0.75em Verdana, sans-serif; font-size: 13px ; color: black;
text-align: left;
}

/*appearance of spanned content within <a> tags when hovered*/
#rightlist a:hover span {
display: table-cell ;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-09T11:26:43.000

`<br>`呃，里面有`<a>`or没什么错`<span>`。根据[HTML 4.01 规范](http://www.w3.org/TR/REC-html40/sgml/dtd.html)，它完全有效。

编辑：`<li>`可以包含`<p>`,`<br>`和几乎任何其他内容。

该规范有点难以阅读，但基本上说：

*   `LI`可以包含`block`或`inline`
*   `block`由`P`+ 其他一些东西组成
*   `inline`由`special`+ 其他一些东西组成
*   `special`是由`A`++`BR`其他一些东西组成的

关于`<a>`它说：

*   `A`可以包含`inline`除了`A`
*   `inline`... 往上看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T11:24:12.257

您可以在其中粘贴另一个跨度作为“假” p 标签：

```
 <li><a href="">List item
      <span>
         <span>words words words that are "paragraph" 1 of List item</span>
         <span>different words that make up "paragraph" 2 of List item</span>
      </span></a></li> 
```

在你的 CSS 中：

```
#rightlist span span {display:block;margin:...} 
```

**请注意**，您声明的任何内容都`#rightlist span`将适用于`#rightlist span span`，因此您可能需要覆盖`#rightlist span span`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T11:39:52.303

您的问题可能源于您错误地使用了 <span> 标记。

跨度应该是内联元素，并且您将其样式化，就好像它是块元素一样。诚然，您可以通过添加正确的样式来强制跨度充当块元素，但这可能并不总是被各种浏览器所尊重。

理想情况下，您应该改用 div 。然后，您可以使用 p 标签或进一步的 div 标签来指示段落（理想情况下是 p，因为从语义上讲它们实际上是段落而不是不相关的文本块）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T11:42:07.363

为什么会“错”？

您的 br 标签可能应该编码为：

```
 <br /> 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2009-01-09T11:27:58.817

为什么你现在的方式是错误的？

你可以试试这个

```
<span>
  <p>words words words that are "paragraph" 1 of List item</p>
  <p>different words that make up "paragraph" 2 of List item</p>
</span> 
```

# c# - 如何使用 XmlWriter 将编码属性添加到 utf-16 以外的 xml？

> ID：427725
> 
> 赞同：38
> 
> 时间：2009-01-09T11:16:57.047
> 
> 标签：c#, encoding, xmlwriter

我有一个创建一些 XmlDocument 的函数：

```
public string CreateOutputXmlString(ICollection<Field> fields)
{
    XmlWriterSettings settings = new XmlWriterSettings();
    settings.Indent = true;
    settings.Encoding = Encoding.GetEncoding("windows-1250");

    StringBuilder builder = new StringBuilder();
    XmlWriter writer = XmlWriter.Create(builder, settings);

    writer.WriteStartDocument();
    writer.WriteStartElement("data");
    foreach (Field field in fields)
    {
        writer.WriteStartElement("item");
        writer.WriteAttributeString("name", field.Id);
        writer.WriteAttributeString("value", field.Value);
        writer.WriteEndElement();
    }
    writer.WriteEndElement();
    writer.Flush();
    writer.Close();

    return builder.ToString();
} 
```

我设置了一个编码，但是在我创建 XmlWriter 之后它确实具有 utf-16 编码。我知道这是因为字符串（我想是 StringBuilder）是用 utf-16 编码的，你不能改变它。
那么我怎样才能轻松地创建这个编码属性设置为“windows-1250”的xml呢？它甚至不必以这种编码方式进行编码，它只需要具有指定的属性即可。

编辑：它必须在 .Net 2.0 中，所以不能使用任何新的框架元素。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2009-01-09T11:24:03.037

您需要使用具有适当编码的 StringWriter。不幸的是 StringWriter 不允许你直接指定编码，所以你需要一个这样的类：

```
public sealed class StringWriterWithEncoding : StringWriter
{
    private readonly Encoding encoding;

    public StringWriterWithEncoding (Encoding encoding)
    {
        this.encoding = encoding;
    }

    public override Encoding Encoding
    {
        get { return encoding; }
    }
} 
```

（[这个问题](https://stackoverflow.com/questions/371930/-net-xmlwriter-unexpected-encoding-is-confusing-me)很相似，但并不完全重复。）

编辑：回答评论：将 StringWriterWithEncoding 传递给[XmlWriter.Create](http://msdn.microsoft.com/en-us/library/ms162620.aspx)而不是 StringBuilder，然后在最后调用 ToString() 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T08:33:11.747

只是对为什么会这样的一些额外解释。

字符串是字符序列，而不是字节。字符串本身不是“编码的”，因为它们使用的是字符，这些字符存储为 Unicode 代码点。编码在字符串级别没有意义。

编码是从代码点（字符）序列到字节序列（用于存储在文件系统或内存等基于字节的系统上）的映射。该框架不允许您指定编码，除非有令人信服的理由，例如使 16 位代码点适合基于字节的存储。

因此，当您尝试将 XML 写入 StringBuilder 时，实际上是在构建 XML 字符序列并将它们写入为字符序列，因此不执行任何编码。因此，没有编码字段。

如果要使用编码，XmlWriter 必须写入 Stream。

关于您使用 MemoryStream 找到的解决方案，无意冒犯，但它只是在手臂周围拍打并移动热空气。您正在使用“windows-1252”对代码点进行编码，然后将其解析回代码点。唯一可能发生的变化是未在 windows-1252 中定义的字符被转换为“？” 过程中的性格。

对我来说，正确的解决方案可能是以下一个。根据您的函数的用途，您可以将 Stream 作为参数传递给您的函数，以便调用者决定将其写入内存还是文件。所以它会这样写：

```
 public static void WriteFieldsAsXmlDocument(ICollection fields, Stream outStream)
        {
            XmlWriterSettings settings = new XmlWriterSettings();
            settings.Indent = true;
            settings.Encoding = Encoding.GetEncoding("windows-1250");

            using(XmlWriter writer = XmlWriter.Create(outStream, settings)) {
                writer.WriteStartDocument();
                writer.WriteStartElement("data");
                foreach (Field field in fields)
                {
                    writer.WriteStartElement("item");
                    writer.WriteAttributeString("name", field.Id);
                    writer.WriteAttributeString("value", field.Value);
                    writer.WriteEndElement();
                }
                writer.WriteEndElement();
            }
        } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-25T04:04:53.033

```
MemoryStream memoryStream = new MemoryStream();
XmlWriterSettings xmlWriterSettings = new XmlWriterSettings();
xmlWriterSettings.Encoding = Encoding.UTF8;

XmlWriter xmlWriter = XmlWriter.Create(memoryStream, xmlWriterSettings);
xmlWriter.WriteStartDocument();
xmlWriter.WriteStartElement("root", "http://www.timvw.be/ns");
xmlWriter.WriteEndElement();
xmlWriter.WriteEndDocument();
xmlWriter.Flush();
xmlWriter.Close();

string xmlString = Encoding.UTF8.GetString(memoryStream.ToArray()); 
```

[从这里](http://www.timvw.be/2007/01/08/generating-utf-8-with-systemxmlxmlwriter/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-09T11:27:58.520

我实际上用 MemoryStream 解决了这个问题：

```
public static string CreateOutputXmlString(ICollection<Field> fields)
        {
            XmlWriterSettings settings = new XmlWriterSettings();
            settings.Indent = true;
            settings.Encoding = Encoding.GetEncoding("windows-1250");

            MemoryStream memStream = new MemoryStream();
            XmlWriter writer = XmlWriter.Create(memStream, settings);

            writer.WriteStartDocument();
            writer.WriteStartElement("data");
            foreach (Field field in fields)
            {
                writer.WriteStartElement("item");
                writer.WriteAttributeString("name", field.Id);
                writer.WriteAttributeString("value", field.Value);
                writer.WriteEndElement();
            }
            writer.WriteEndElement();
            writer.Flush();
            writer.Close();

            writer.Flush();
            writer.Close();

            string xml = Encoding.GetEncoding("windows-1250").GetString(memStream.ToArray());

            memStream.Close();
            memStream.Dispose();

            return xml;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-11T18:46:55.127

我通过将字符串输出到变量然后用 utf-8 替换对 utf-16 的任何引用来解决我的问题（我的应用程序需要 UTF8 编码）。由于您使用的是函数，因此您可以执行类似的操作。我主要使用 VB.net，但我认为 C# 看起来像这样。

```
return builder.ToString().Replace("utf-16", "utf-8"); 
```

# java - 使用 JSTL formatDate 标记显示当前日期

> ID：427726
> 
> 赞同：15
> 
> 时间：2009-01-09T11:17:55.937
> 
> 标签：java, jsp, date, jstl

我正在尝试使用 JSTL 在我的 JSP 页面中显示当前日期。下面是我正在使用的代码。

```
<jsp:useBean id="now" class="java.util.Date" scope="request" />
<fmt:formatDate value="${now}" pattern="MM.dd.yyyy" /> 
```

但是上面的代码没有产生任何结果？我在这里遗漏了什么还是有更好的方法呢？我正在使用 JSTL 1.1。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-09T12:20:14.930

尝试在不格式化的情况下打印它，${now}，你可能在那里有*null*。你在请求范围内有这个属性吗？仔细检查一下，如果是，它可能是*null*。如果不是，请尝试从标签中删除此*范围*属性，是的，这并不重要，只是为了让事情变得清晰。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-08-04T21:19:28.550

`scope=page`为我工作

# string - 如何将字符串传递给 NVelocity 模板中的函数？

> ID：427728
> 
> 赞同：0
> 
> 时间：2009-01-09T11:19:22.283
> 
> 标签：string, nvelocity, padleft

我正在使用**[NVelocity 模板引擎](http://nvelocity.sourceforge.net/)**来生成**固定长度的**字段输出 - 你知道那种事情：

```
Field        Start Pos   Field Length  Notes
----------   ---------   ------------  ---------
Supplier      1           7            Leading Zeros
GRN           8           9            -
...

e.g.
>0001234    123A< 
```

问题是**我试图用重载调用 String.PadRight() 来指定前导零，而 NVelocity 没有它。**

**这有效：**

```
$Document.SupplierCode.PadRight(7) 
```

**但这不会：**

```
$Document.SupplierCode.PadRight(7,"0") 
```

**我试过了：**

*   单引号 ( `'0'`)

*   双单引号 ( `''0''`)

*   双引号 ( `"0"`)

*   双双引号 ( `""0""`)

*   转义以上所有内容的引号 ( `\"0\"`)

*   没有报价！

我发现的所有工作都是[NVelocity Homepage](http://nvelocity.sourceforge.net/)和[Velocity Templating Language Reference page](http://velocity.apache.org/engine/releases/velocity-1.5/vtl-reference-guide.html)，它们都没有为我提供解决方案。

抱歉，我无法为您提供或指出您可以自己测试您的想法的地方，但我们非常欢迎您提出任何建议！

感谢您的帮助；o)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-21T17:28:33.310

我目前正在处理同样的问题，据我了解，这是因为 String 类的 PadLeft 和 PadRight 函数接收第二个参数，即前导“0”，作为一个字符，而不是作为一个字符串.

NVelocity 允许您使用 '0' 将参数指定为字符串，但通过这种方式，它在内部会生成一个强制转换异常（或类似的东西），因为该参数应为 char。

我还没有找到（我从 1 小时开始就使用 NVelocity！）一种将参数指定为 char 的方法，目前我只有一个肮脏的解决方案，例如在之后应用 Replace(" ", "0") PadLeft / PadRight，所以模板变成

$Document.SupplierCode.PadRight(7).Replace(' ', '0')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T13:06:53.977

一位同事提出的一种解决方案是在 Document 对象中创建另一个属性，该属性返回格式化的字符串：

例如

```
Public ReadOnly Property SupplierCodeFormatted() As String
    Get
        Return Supplier.Code.PadLeft(7, "0")
    End Get
End Property 
```

# pdf - 如何限制 PDF 中一页的 RDLC 报告？

> ID：427730
> 
> 赞同：31
> 
> 时间：2009-01-09T11:19:54.217
> 
> 标签：pdf, rdlc, report, viewer

我有一个 RDLC 报告，我在前端应用程序的报告查看器控件上显示它。我能够完美地查看报告。

但是当我尝试将报告导出为 PDF 时出现问题（使用内置选项）。

我将报告打印成 3 页，而我的客户希望它在一页中。我无法弄清楚原因，因为在我的报告查看器中我只看到一页，但在 PDF 中有 3 页。

可以做些什么来控制报告的大小吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2009-06-25T20:02:20.897

答案与杜根所说的非常相似，但并不总是只是利润。这很简单：

在设计模式下编辑 rdlc 文件时，首先单击设计的 BODY 区域的空白部分。按 F4 查看属性选项卡。在这里，您将看到“大小”属性。这可以扩展为宽度和高度。您在此处看到的宽度表示报表正文作为可打印区域所需的宽度。即使您到处都是空白区域，页面也知道它需要将其保留为可打印区域。从某种意义上说，它保留了空间。至于高度，系统通常知道它可以根据需要增长或缩小，除非您在其中的控件中另有指定。所以宽度通常是最重要的。

接下来，单击报表的空白区域（在页眉、正文和页脚之外；基本上是设计周围的灰色区域），然后按 F4 以查看属性面板。在属性的“布局”类别下，您将看到 3 个不同的选项：InteractiveSize、Margins、PageSize。每个大小属性都可以展开以显示宽度和高度。Margins 属性可以扩展为左/右/上/下。

基本上，pdf 导出不受 PageSize 的影响（尽管我通常会尝试保持 Interactive 和 Page size 相等）。当通过 ReportViewer 的内置导出功能呈现 pdf 文件时，pdf 中每个“页面”的宽度和高度将由报告的 PageSize 属性中的宽度和高度确定（如果您使用自己的，可以覆盖它） pdf 渲染的自定义代码）。至于边距，它们指定在为报表保留的可打印区域和页面边缘之间必须留有多少空白和不可打印的空间。

换句话说：您的报告正文的宽度，加上报告的左边距，加上报告的右边距，必须小于或等于报告的 PageSize 的宽度！

所以...如果您的边距太宽，或者如果您的报告正文太宽，或者如果 PageSize 的宽度太窄，则渲染结果将被迫分解为多个页面以适应！

例如：如果我的报告正文的宽度为 7.75"，我的左边距为 0.5"，我的右边距为 0.5"，并且在 PageSize 中指定的宽度为 8.5"，我的报告将始终使用每 1 页数据使用 2 页. 正文的 7.75" 宽度，加上边距的 0.5"+0.5" 加起来为 8.75"，比我页面中可用的 8.5" 大。所以我报告的每页的前 7.5"（左右）正文将显示在第一页，其余的将拆分到下一页。这不会在报表查看器中完成，因为它允许报表通过添加滚动条来超出页面大小，但在 pdf 导出中会很烦人。为了使我的示例报告适合 1 页，我可以尝试将我的报告正文减少到 7.5 英寸或更小，或者我可以将左右边距总共减少 0.25 英寸或更多（例如，将它们设置为 0.3 英寸，总共减少 0.4 英寸），或者我可以将 PageSize 增加到大于 8.75 英寸的值。注意：Acrobat Reader 非常智能，并且知道各种纸张尺寸。因此，尽管可以使用任意 PageSizes，但通常最好使用实际页面大小。因此，在我的最后一个示例中，我宁愿将 PageSize 设置为 Width = 11" 和 Height = 8.5"，这是横向的真正字母大小！Adobe 通常会理解这一点并正确打印。另请注意：某些打印机，尤其是较旧的打印机，在打印边距小于 0.3" 时会遇到问题。如果您想对用户友好，最好为那些较旧的打印机保持足够大的边距；）3" 总共减少 0.4")，或者我可以将 PageSize 增加到大于 8.75"。注意：Acrobat Reader 非常聪明，并且知道各种纸张尺寸。因此，虽然任意 PageSize 都可以工作，但通常最好使用真实的页面大小。因此，在我的最后一个示例中，我宁愿将 PageSize 设置为 Width = 11" 和 Height = 8.5"，这是横向的真正字母大小！Adobe 通常会理解这一点并正确打印。另请注意：某些打印机，尤其是较旧的打印机，在打印边距小于 0.3" 时会遇到问题。如果您想对您的用户友好，您最好为那些旧打印机保持足够大的边距；）3" 总共减少 0.4")，或者我可以将 PageSize 增加到大于 8.75"。注意：Acrobat Reader 非常聪明，并且知道各种纸张尺寸。因此，虽然任意 PageSize 都可以工作，但通常最好使用真实的页面大小。因此，在我的最后一个示例中，我宁愿将 PageSize 设置为 Width = 11" 和 Height = 8.5"，这是横向的真正字母大小！Adobe 通常会理解这一点并正确打印。另请注意：某些打印机，尤其是较旧的打印机，在打印边距小于 0.3" 时会遇到问题。如果您想对您的用户友好，您最好为那些旧打印机保持足够大的边距；）Acrobat Reader 非常聪明，并且知道各种纸张尺寸。因此，尽管可以使用任意 PageSizes，但通常最好使用实际页面大小。因此，在我的最后一个示例中，我宁愿将 PageSize 设置为 Width = 11" 和 Height = 8.5"，这是横向的真正字母大小！Adobe 通常会理解这一点并正确打印。另请注意：某些打印机，尤其是较旧的打印机，在打印边距小于 0.3" 时会遇到问题。如果您想对用户友好，最好为那些较旧的打印机保持足够大的边距；）Acrobat Reader 非常聪明，并且知道各种纸张尺寸。因此，尽管可以使用任意 PageSizes，但通常最好使用实际页面大小。因此，在我的最后一个示例中，我宁愿将 PageSize 设置为 Width = 11" 和 Height = 8.5"，这是横向的真正字母大小！Adobe 通常会理解这一点并正确打印。另请注意：某些打印机，尤其是较旧的打印机，在打印边距小于 0.3" 时会遇到问题。如果您想对用户友好，最好为那些较旧的打印机保持足够大的边距；）这是横向的真正字母大小！Adobe 通常会理解这一点并正确打印。另请注意：某些打印机，尤其是较旧的打印机，在打印边距小于 0.3" 时会遇到问题。如果您想对用户友好，最好为那些较旧的打印机保持足够大的边距；）这是横向的真正字母大小！Adobe 通常会理解这一点并正确打印。另请注意：某些打印机，尤其是较旧的打印机，在打印边距小于 0.3" 时会遇到问题。如果您想对用户友好，最好为那些较旧的打印机保持足够大的边距；）

我希望这有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-08-20T09:14:01.860

始终保持体宽：7.5以下

Left, Right Margin width 小于 0.5 先设置 Margin 宽度 -> 进入主菜单 Reports->Report Properties->Layout->change left margin and right margin

总页宽：8.5

拉玛那

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-10-13T05:44:59.063

除了观察你的宽度之外，我还发现了其他不相关的东西，这些东西可能会导致 PDF 中出现额外的空白页。

如果 tablix 有任何带自动换行的字段，这可能会导致它。如果您有长数据，您可能希望使字体更小。使字体大小属性等于以下内容：

```
 =iif(len(Fields!RepGroupName.Value) > 25, "6pt","8pt") 
```

您可能需要做的另一件事。当我没有明显的理由需要额外的页面时，这对我很有帮助。在 Report 属性页中，设置：ConsumeContainerWhitespace = true

还有一件事要注意。在更改布局时，身体大小可能会在您不知情的情况下增长。您可能不得不再次将其击倒。

如果没有解决，这个问题对最终用户来说是非常烦人的，而且对于我们来说也很烦人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-19T20:05:10.917

万一其他人遇到此问题并最终出现在此处，则很可能是您的利润有问题。如果边距设置不正确，当您尝试打印时，通常会出现“额外”页面，而当您查看文档时，一切都很好。

# sql - 我可以在 ON 语句中使用 CASE 子句加入 ORACLE (10g) 中的表吗（或者甚至是 where 子句，因为它是内部连接）

> ID：427736
> 
> 赞同：1
> 
> 时间：2009-01-09T11:23:50.683
> 
> 标签：sql, oracle, syntax, join, case

我正在尝试使以下代码更小。这可能吗？

```
select a.*
from table1 a
WHERE a."cola1" = 'valuea1'
UNION ALL
select a.*
from tablea1 a
inner join tablea2 b on a."cola2" = b."colb2"
WHERE a."cola1" = 'valuea2'
  and b."colb3" = 'valueb3' 
```

实际上，我正在从 table1 中查找 value1 或 value2 的记录，但是对于匹配 value2 的记录，我想应用 1 个额外的条件，该条件涉及到第二个表的连接可以在没有 UNION 子句的情况下完成吗？

下面是一个骨架或我正在尝试编写的代码......但它不能自然地工作。

```
select a.*
from table1 a
inner join table2 b on a."cola1" = b."COLb1"
WHERE a."cola2" IN ('valuea1','valuea2')
  and 
  CASE 
    WHEN a."cola2" = 'valuea2' THEN b."colb1" = 'valueb3'
    ELSE 1=1
  END CASE 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T11:35:01.020

我认为`CASE`语句在连接条件下有效，但我不确定。但这对你有用吗？

```
select *
  from table1 a
 where a.cola1 = 'valuea1'
    or (a.cola1 = 'valuea2'
        and Exists(select 1
                     from table2 b
                    where a.cola2 = b.colb2
                      and b.colb3 = 'valueb3'
                   )
        ) 
```

* * *

**编辑：**这不是简单的工作吗？

```
select a.*
  from table1 a
  Left Outer Join table2 b On (a.cola2 = b.colb2)
 where a.cola1 = 'valuea1'
    or (a.cola1 = 'valuea2' and b.colb3 = 'valueb3') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T14:09:44.820

总的来说，您应该遵循 Hosam 完全重写谓词的建议。但是为了进一步解释你原来的问题，问题是在 SQL 中， CASE .. END 是一个**表达式**，只能在可以使用任何其他表达式的地方使用。像“a=b”这样的条件是由逻辑运算符连接的两个表达式。您可能想将其视为布尔表达式，但这不是 SQL 看待它的方式。

您可以使用 CASE 作为条件中的两个表达式之一来完成您想要的操作，如下所示：

```
WHERE a."cola2" IN ('valuea1','valuea2')
  and 
  b."colb1" = CASE 
                WHEN a."cola2" = 'valuea2' THEN 'valueb3'
                ELSE b."colb1"
              END CASE 
```

（如果 colb1 可能包含 NULL，则需要修改以处理它。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-06T22:18:33.490

您可以通过使用左连接和 where 条件来实现这一点

```
select a.*
from table1 a
left join tablea2 b on a."cola2" = b."colb2"
WHERE a."cola1" = 'valuea2'
  and ( b."colb2" is null or b."colb3" = 'valueb3' ) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-01-09T11:44:49.387

OP：我有一个接近的小型解决方法（这可能只在这是一个内部连接的情况下才有效。）

select a.* from table1 a inner join table2 b on a."cola1" = b."COLb1" WHERE (a."cola2" = 'valuea1') OR (a."cola2" = 'valuea2' and b." colb1" = 'valueb3')

有时，写出代码会引发一些另类的想法。自我治疗之类的。感谢您的输入。

# delphi - 表格没有更新

> ID：427744
> 
> 赞同：1
> 
> 时间：2009-01-09T11:26:48.260
> 
> 标签：delphi, c++builder, vcl

在我的应用程序中（主要形式是 TTntForm，C++Builder 2006）：

```
void __fastcall TForm1::Button1Click(TObject *Sender)
{
  Caption=L"1st caption";        // This works.
  Form1->Caption=L"2nd caption"; // But this doesn't work,
                                 // Caption of the form remains "1st caption".
} 
```

这个问题的原因可能是什么？

**编辑：** 谢谢大家的回答。我发现了这个错误。项目文件中有两次表单创建：

```
Application->CreateForm(__classid(TForm1), &Form1);
Application->CreateForm(__classid(TForm1), &Form1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T11:38:22.290

你确定“这个”实际上是Form1吗？

```
if (this != Form1)
    ShowMessage("Whoops. Didn't expect that..."); 
```

您的表单是如何创建的？如果项目选项中的“自动创建”形式出现在列表中，还是您手动创建它的实例？

假设 Form1 是您的主窗体，它通常由您的主 project.cpp 文件中的代码在函数 WinMain() 中创建。

```
Application->CreateForm(__classid(TForm1), &Form1); 
```

这应该由 C++Builder 自动为您编写，所以要小心手动更改它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T11:37:53.960

尝试

自我说明

如果这可行，那么 Form1 不是 TForm1 的实例

或调试它以查看类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T11:35:27.523

您确定您正在使用的 TForm1 类表单被实例化为 Form1 吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T11:53:50.677

谢谢大家的回答。我发现了这个错误。项目文件中有两次表单创建：

```
Application->CreateForm(__classid(TForm1), &Form1);
Application->CreateForm(__classid(TForm1), &Form1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T11:51:02.523

我认为 TForm1 不知道您已致电

```
TForm1 * Form1=new TForm1(...); 
```

有些人。这是您在 CBuilder 中的第一次尝试吗？您在文件顶部看到的 TForm1 * Form1 只是声明。您还必须创建它。您为什么不喜欢第一个有效的解决方案？无需在类中使用 Form1。或者如果你真的必须使用

```
this->Caption="..."; 
```

# apache-flex - Flex 中的桌面共享应用程序？

> ID：427745
> 
> 赞同：0
> 
> 时间：2009-01-09T11:27:18.773
> 
> 标签：apache-flex

我想在 Flex 中制作一个用于桌面共享的应用程序。我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-16T17:19:31.353

您将无法通过 Flex 访问桌面，您必须在用户计算机上使用一些服务器应用程序来模拟鼠标/键盘事件。例如，您可以将任何 VNC 服务器 ( [http://www.realvnc.com/products/free/4.1/index.html](http://www.realvnc.com/products/free/4.1/index.html) ) 与 Flex VNC 客户端 ( [http://www.wizhelp.com/flashlight-vnc/](http://www.wizhelp.com/flashlight-vnc/)）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-01-09T14:51:52.143

Want to compete with Fog Creek CoPilot? ;-)

Well, I doubt that Flex running as SWF in a browser is able to do this due to sandbox limitations. Maybe, if you run Flex as AIR application, but I still doubt that AIR provides that level of access to the OS.

For Java there may be libraries that can do something like this using native interfaces.

Don't know how Copilot is doing this. I guess either using an Active X control or an native application that has to be installed.

After all I really doubt that you will be able to do this with Flex.

# c# - Asp.Net MVC 形式，Controller 参数未知

> ID：427746
> 
> 赞同：6
> 
> 时间：2009-01-09T11:27:20.987
> 
> 标签：c#, asp.net-mvc

我正在构建一个问卷 mvc webapp，但我无法弄清楚如何从表单将未知数量的参数传递给控制器​​。

我的表格是这样的：

```
<% using (Html.BeginForm())
   { %>
<div id="Content">
    <% foreach (var group in ViewData.Model.QuestionGroups)
       { %>
    <div class="Group">
        <%=group.Description %>
        <% foreach (var question in group.Questions)
           {%>
        <div class="Question">
            <div class="QuestionTitle">
                <%=question.Title %>
            </div>
                <%=Html.Hidden("Id", question.ID) %>
            <div class="QuestionText">
                <%switch (question.TypeAsEnum)
                  {
                      case QuestionTypeEnum.Text:%>
                <%=Html.TextBox("somename") %>
                <% break;
                      case QuestionTypeEnum.Number:%>
                <%=Html.TextBox("somename") %>
                <% break;
                      case QuestionTypeEnum.PhoneNumber:%>
                <%=Html.TextBox("somename")%>
                <% break;
                      case QuestionTypeEnum.Email:%>
                <%=Html.TextBox("somename")%>
                <% break;
                      case QuestionTypeEnum.Date:%>
                <%=Html.TextBox("somename")%>
                <% break;
                      case QuestionTypeEnum.YesNo:%>
                <%=Html.RadioButton("somename", true)%>
                <%=Html.RadioButton("somename", false)%>
                <% break;
                      case QuestionTypeEnum.Alternative:%>
                <%=Html.DropDownList("somename", question.Answers)%>
                <% break;
                  }%>
            </div>
        </div>
        <% } %>
    </div>
    <% } %>
</div>
<div id="submittButton">
    <%=Html.SubmitButton()%></div>
<% } %> 
```

现在我在控制器中需要的是 List< ResponseAnswer >，其中 ResponseAnswer 具有以下属性：

string questionID, string AnswerText, bool AnswerBool, number AnswerNumber, ...

那么如何将包含 questionID、AnswerType 和 Answer 的未知数量的项目传递给控制器​​。在 webforms 中，我通过使用转发器而不是 foreach 渲染表单来解决这个问题，然后遍历问题转发器检查控件 id，每个转发器项目包含一个隐藏的 questionid 元素和一个 id=AnswerType 的输入。但这会严重破坏 mvc 中的关注点分离吗？

那么有什么方法可以让我的控制器接受 List<ResultAnswer> 并以某种方式构建这个列表而不破坏 soc，如果没有，我如何将整个表单结果传递回控制器，以便我可以在那里进行表单数据的迭代而不是在视图中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-09T11:41:18.767

您可以为您的操作添加一个参数，例如

```
public ActionResult MyAction(FormCollection form) 
```

然后该`form`参数将包含已发布表单中的所有数据。从那里你可以做你想做的事。

您可能可以实现一个可以映射到 ResponseAnswers 的活页夹，但我没有这样做的经验，所以我将把它留给其他人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T14:11:11.133

加里的答案将起作用（因此，投票赞成）。但是，您可以将模型直接绑定到列表，我认为它更优雅一些。[这篇博文中有说明。](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T12:07:18.793

为了澄清加里的答案，您可以像这样轻松浏览表单的所有字段

```
foreach (string s in Request.Form.Keys)
{
    if (s.Contains("number"))
        number = int.Parse ((Request.Form[s]));

    //do something
} 
```

# java - 使用 PowerMock 或您让您的测试在多大程度上影响您的设计？

> ID：427750
> 
> 赞同：15
> 
> 时间：2009-01-09T11:28:54.540
> 
> 标签：java, unit-testing, dependency-injection, junit

多年来，我一直是 EasyMock 的粉丝，多亏了 SO，我发现了对 PowerMock 的引用，它能够模拟构造函数和静态方法，这两种方法都会在对遗留代码库进行测试时引起问题。

显然，单元测试（和 TDD）的巨大好处之一是它导致（强制？）更清洁的设计的方式，在我看来，PowerMock 的引入可能会减损这一点。我认为这主要表现为：

1.  回到初始化协作者而不是注入它们
2.  使用静态而不是让方法归合作者所有

除此之外，关于我的代码被字节码操纵以进行测试的事情并不完全适合我。具体的原因我也说不出来，只是觉得这只是为了测试而不是为了生产，让我感到有些不安。

在我目前的演出中，我们确实在推动单元测试作为人们改进编码实践的一种方式，感觉就像将 PowerMock 引入方程式可能会让人们稍微跳过这一步，所以我不愿意开始使用它。话虽如此，我真的可以看到在哪里使用它可以减少*开始*测试类所需的重构量。

我想我的问题是，人们对这些功能使用 PowerMock（或任何其他类似库）的经验是什么，您会使用它们吗？您希望您的测试在多大程度上影响您的设计？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-29T01:32:16.220

我不得不强烈反对这个问题。

没有理由限制设计选择的模拟工具。EasyMock、EasyMock 类扩展、jMock、Mockito 等排除的不仅仅是静态方法。这些工具还阻止您声明类和方法`final`，仅此一项就是一件非常糟糕的事情。`final`（如果您需要一个为类和方法的使用辩护的权威来源，请参阅“Effective Java”一书，或观看作者的此[演示](http://www.youtube.com/watch?v=aAb7hSCtvGw)。）

根据我的经验， “初始化合作者而不是注入他们”通常是*最好*的设计。如果您通过创建从该类实例化的帮助类来分解一个解决某些复杂问题的类，您可以利用安全地将特定数据传递给这些子对象的能力，同时将它们隐藏在客户端代码中（这提供了高级操作中使用的完整数据）。在公共 API 中公开此类帮助程序类违反了信息隐藏原则，破坏了封装并增加了客户端代码的复杂性。

DI 的滥用导致了无状态对象，这些对象实际上应该是有状态的，因为它们*几乎总是*对特定于业务操作的数据进行操作。这不仅适用于非公共助手类，也适用于从 UI/表示对象调用的公共“业务服务”类。此类服务类通常是内部代码（针对单个业务应用程序），本质上不可重用并且只有少数客户端（通常只有一个），因为此类代码本质上是特定于*域/用例的*。在这种情况下（顺便说一下，这是一种非常常见的情况），让 UI 类直接实例化业务服务类，通过构造函数传递用户提供的数据会更有意义。

能够轻松地为这样的代码编写单元测试正是我创建[JMockit](https://jmockit.github.io/)工具包的原因。我考虑的不是遗留代码，而是设计的简单性和经济性。到目前为止，我取得的结果让我确信，*可测试性*确实是两个变量的函数：生产代码的*可维护性*，以及用于测试该代码的模拟工具的局限性。那么，如果您从模拟工具中删除*所有*限制，您会得到什么？

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-01-15T10:17:23.613

我完全同意可测试性不是最终目标，这是我在开发 PowerMock 时意识到的事情之一。我也同意编写单元测试是获得良好设计的一种方式。使用 PowerMock 可能应该是一个例外而不是规则，至少是对构造函数的期望和静态模拟等功能。

我们使用 PowerMock 的主要动机是使用第三方代码会阻止您的代码可测试。一个很好的替代方案是使用一个[反腐败层](http://domaindrivendesign.org/discussion/messageboardarchive/AnticorruptionLayer.html)来抽象第三方代码并使其可测试。但是，有时我认为仅使用标准 API 代码会更简洁。Java ME API 就是一个很好的例子。这充满了阻止单元测试的静态方法调用。

遗留代码也会出现同样的问题。一些组织非常害怕修改他们现有的代码，在这种情况下，PowerMock 可用于在您目前正在编写的部分中引入单元测试，而无需进行大的重构。

我们的问题是指定一组最佳实践规则，何时使用或不使用 PowerMock，新手开发人员可以遵循。创造好的设计真的很难，因为 PowerMock 给了你更多的选择，也许对初学者来说变得更难了？我认为更有经验的开发人员会喜欢有更多的选择。

（[PowerMock](http://powermock.org)创始人）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-09T14:11:06.767

我认为你是对的 - 如果你需要 PowerMock，你可能有臭代码。摆脱那些静电。

但是，我认为您对字节码检测是错误的。我一直使用[mockito](http://mockito.org)来模拟具体的类——它让我不必为*每个类编写接口。单身的。类*。那干净多了。

只有您可以防止代码异味。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-09T21:09:24.020

在 .NET 领域，我们遇到过很多关于 Typemock Isolator 的相同问题。见[这篇博文](http://weblogs.asp.net/rosherove/archive/2008/01/17/is-typemock-too-powerful-will-it-kill-design-for-testability.aspx)

我认为，当人们开始意识到可测试性不是最终目标，并且设计是通过其他方式学习的，那么我们将不再让我们的恐惧支配我们使用哪些工具，或者在何时以及如果它成为更先进的技术时不使用它相关的。

此外，能够根据应用程序需求选择您的设计方式也很有意义。不要让工具告诉你如何设计——它会让你别无选择。

（我在 Typemock 工作，但曾经反对它）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-09T13:00:16.877

我认为你的担心是对的。一旦你学会了如何重构遗留代码以使其可测试，在*大多数*情况下并不**难。**

 *最好慢一点，有一个支持学习的环境，而不是走捷径和学习坏习惯。

（我刚[读到这个](http://www.infoq.com/articles/levison-TDD-adoption-strategy)，觉得它是相关的。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-25T22:16:21.850

Powermock 通过反射提供的抽象层似乎很有吸引力，但它使测试变得脆弱。进一步来说：

1.  反射依赖于方法/字段等的字符串名称。任何重命名都会破坏测试，然后修复所有通过反射访问此方法的测试。与不需要反射的测试相比，IDE 将重构所有重命名。
2.  Powermock 的 stubbing `new`、静态方法调用等特性让您了解函数的实现细节。理想情况下，测试应该测试功能，例如。

    ```
    functionOldImplementation(){
        List l = new ArrayList();
    }
    // old implementation changed to new
    functionNewImplementation(){
        List l = new LinkedList();
    } 
    ```

模拟`new ArrayList()`调用会破坏上述重构的测试。运行回归最需要测试，如果这样做，它们会失败。

最近看到这篇[文章](https://dzone.com/articles/why-wide-usage-powermock)，它解决了问题中提出的大部分问题，我想我会分享它。

文章中的一些关键点：

1.  自推出以来，PowerMock + Javaassist 与 Java7 兼容用了 1.5 年。这是 PowerMock 更改日志中的注释：

    ```
    Change log 1.5 (2012-12-04)  
    ---------------------------     
    Upgraded to Javassist 3.17.1-GA, this means that PowerMock works in Java 7! 
    ```

2.  PowerMock 网站 说：

> “请注意，PowerMock 主要面向具有单元测试专业知识的人。将它放在初级开发人员手中可能弊大于利”。

# debian - 具有多博客功能并且（可选）具有 Debian 软件包的博客引擎？

> ID：427753
> 
> 赞同：0
> 
> 时间：2009-01-09T11:31:52.990
> 
> 标签：debian, blogs, package

我与朋友共享 Debian 服务器，我们在服务器上托管多个 wordpress 博客。不过，Debian 提供的 Wordpress 多博客机制并没有处理多个“内容”目录。因此，我们目前无法在博客中使用图像。

我正在寻找解决问题的建议，或者在多个博客上做得更好的替代博客引擎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-26T14:18:22.197

有一个名为[Wordpress MU](http://mu.wordpress.org/ "WordPress 亩")的支持多博客的 Wordpress 版本，您可能想查看一下。

# java - 你应该如何为同一个接口的多个实现编写junit测试用例？

> ID：427755
> 
> 赞同：2
> 
> 时间：2009-01-09T11:32:33.800
> 
> 标签：java, unit-testing, junit

在提问之前，让我解释一下当前的设置：

我有一个服务接口，比如 Service，还有一个实现，比如 ServiceImpl。这个 ServiceImpl 使用了一些其他的服务。所有的服务都被spring加载为bean。

现在，我想为 ServiceImpl 编写 junit 测试用例。同样，我使用 applicationContext 来获取 Service bean，然后在其上调用不同的方法来测试它们。

公共方法看起来一切都很好，但我如何为私有方法编写测试用例？因为对于不同的实现，我们可能没有相同的私有方法？

任何人都可以在这里帮助我编写测试用例的首选方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T12:47:10.023

纯粹的答案是私有方法被称为是有原因的！;-)

把问题转过来：只给定一个（可公开访问的）接口的规范，在编写代码之前你将如何布置你的测试计划？该接口描述了实现它的对象的预期*行为*；如果在该级别上无法测试，则说明设计有问题。

例如，如果我们是一家运输公司，我们可能有这些（伪编码）接口：

```
CapitalAsset {
    Money getPurchaseCost();
    Money getCurrentValue();
    Date  whenPurchased();
    ...
}

PeopleMover {
    Weight getVehicleWeight();
    int    getPersonCapacitly();
    int    getMilesOnFullTank();
    Money  getCostPerPersonMileFullyLoaded(Money fuelPerGallon);
    ...
} 
```

并且可能有包括这些的类：

```
Bus implements CapitalAsset, PeopleMover {
    Account getCurrentAdvertiser() {...}
    boolean getArticulated() {...}
    ...
}

Computer implements CapitalAsset {
    boolean isRacked() {...}
    ...
}

Van implements CapitalAsset, PeopleMover {
    boolean getWheelchairEnabled() {...}
    ...
} 
```

在设计`CapitalAsset`概念和界面时，我们应该与财务人员就*任何*实例的`CapitalAsset`行为方式达成一致。我们将*仅*`CapitalAsset`根据该协议编写针对该协议的测试；我们应该能够在 、 等上运行这些测试，而不依赖于涉及哪个具体类。同样对于.*`Bus``Computer``Van``PeopleMover`*

 *如果我们需要测试与 a`Bus`无关的东西`CapitalAsset`，`PeopleMover`那么我们需要单独的总线测试。

如果一个特定的具体类具有如此复杂的公共方法，以至于 TDD 和/或 BDD 无法清晰地表达它们的预期行为，那么这又是一个错误的线索。如果具体类中有私有的“帮助器”方法，它们应该出于特定原因而存在；应该可以问“如果这个助手有缺陷，什么公共行为会受到影响（以及如何）？”

对于合法的、固有的复杂性（即来自问题域），一个类可能适合拥有对特定概念负责的辅助*类的私有实例。*在这种情况下，辅助类应该是可自行测试的。

一个好的经验法则是：

> 如果测试太复杂，那就太复杂了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T11:53:08.150

私有方法应该通过类的公共接口来执行。如果您有同一个接口的多个实现，我会为每个实现编写测试类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-13T14:53:46.220

您已经编写了一个接口的多个实现，并希望使用相同的 JUnit4-test 测试所有实现。在下文中，您将看到如何做到这一点。

还有一个例子展示了如何为每个测试用例获取一个新实例。

示例代码在我开始解释之前，这里有一些`java.util.list`接口示例代码：

```
public class ListTest {

  private List<Integer> list;

    public ListTest(List<Integer> list){
      this.list = list;
    }

    @Parameters
    public static Collection<Object[]> getParameters() {
      return Arrays.asList(new Object[][] {
        { new ArrayList<Integer>() },
        { new LinkedList<Integer>()}
      });
    }

    @Test
    public void addTest(){
      list.add(3);
      assertEquals(1, list.size());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T12:44:28.140

[我在http://www.artima.com/suiterunner/privateP.html](http://www.artima.com/suiterunner/privateP.html)找到了一篇关于如何使用 JUNIT 测试私有方法的有趣文章

所以，我认为我们应该更喜欢通过测试公共方法来间接测试私有方法。只有在特殊情况下，我们才应该考虑测试私有方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T11:52:37.653

我认为你应该拆分测试用例。

首先，您测试调用接口的不同实现的类。这意味着您正在测试公共方法。

在此之后，您在另一个测试用例中测试接口实现类。他们可以通过反射调用方法。

# java - 覆盖超类的实例变量

> ID：427756
> 
> 赞同：30
> 
> 时间：2009-01-09T11:32:54.703
> 
> 标签：java, inheritance

为什么我们不能在子类中覆盖超类的实例变量？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2011-10-14T19:46:33.197

他可能打算尝试覆盖用于**初始化**变量的值。例如，

## 而不是这个（这是非法的）

```
public abstract class A {
    String help = "**no help defined -- somebody should change that***";
    // ...
}
// ...
public class B extends A {
    // ILLEGAL
    @Override
    String help = "some fancy help message for B";
    // ...
} 
```

## 一个应该做

```
public abstract class A {
    public String getHelp() {
        return "**no help defined -- somebody should change that***";
    }
    // ...
}
// ...
public class B extends A {
    @Override
    public String getHelp() {
        return "some fancy help message for B";
    // ...
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-01-09T11:37:49.233

因为如果您更改数据成员的实现，它很可能会破坏超类（想象将超类的数据成员从浮点数更改为字符串）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-09T11:43:20.823

因为你只能覆盖行为而不是结构。一旦创建了一个对象并为其分配了内存，结构就一成不变。当然，这在静态类型语言中通常是正确的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-09T11:41:59.827

变量不会被多态访问。您想用受保护的变量做不到的事情来做什么？（我个人完全不鼓励使用非私有的可变变量。）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-31T10:30:16.840

```
class Dad{
    public String name = "Dad";
}
class Son extends Dad{
    public String name = "Son";
    public String getName(){
        return this.name;
    }
} 
```

如果您调用，则从 main() 方法

```
new Son().getName(); 
```

将返回“Son” 这就是您可以覆盖超类变量的方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T11:45:36.387

你的意思是覆盖你想改变数据类型吗？

你怎么处理这个表达式

```
public class A {
   protected int mIndex;

   public void counter(){
      mIndex++;
   }

}

public class B extends A {
   protected String mIndex; // Or what you mean with overloading
} 
```

你想如何在没有运算符重载或类似的东西的情况下更改 mIndex++ 表达式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T12:09:56.870

如果你需要重写一个实例变量，你几乎肯定是继承自 wearg 类。

在某些语言中，您可以通过提供一个新实例变量来隐藏实例变量：

```
class A has variable V1 of type X;

class B inherits from A, but reintroduces V1 of type Y. 
```

A 类的方法仍然可以访问原来的 V1。B类的方法可以访问新的V1。如果他们想访问原始文件，他们可以将自己转换为 A 类（正如您所见，肮脏的编程会引发更多的肮脏编程）。

最好的解决方案是为变量找到另一个名称。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-08-04T14:04:49.283

您可以覆盖一个方法，这没关系，但是覆盖一个变量是什么意思？如果你想在任何其他地方使用变量而不是超类，你可以使用 super。如超级（变量名）；为什么要覆盖变量？我的意思是有什么需要吗？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-07T06:23:16.513

我们不能覆盖实例变量的结构，但我们会覆盖它们的行为：-

```
class A
{
int x = 5;
}

class B extends A
{
int x = 7:
}

class Main
{
public static void main(String dh[])
{
A obj = new B();
System.out.println(obj.x);
}
} 
```

在这种情况下，输出为 5。

# switch-statement - 何时在 switch 语句上使用 If-else if-else，反之亦然

> ID：427760
> 
> 赞同：103
> 
> 时间：2009-01-09T11:33:54.297
> 
> 标签：switch-statement

为什么要`switch`在一系列`if`语句上使用块？

`switch`语句似乎做同样的事情，但需要更长的时间来输入。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2009-01-09T11:44:14.473

与大多数事情一样，您应该根据上下文以及概念上正确的方式来选择使用哪个。开关实际上是在说“根据此变量值选择其中一个”，但 if 语句只是一系列布尔检查。

例如，如果您正在执行以下操作：

```
int value = // some value
if (value == 1) {
    doThis();
} else if (value == 2) {
    doThat();
} else {
    doTheOther();
} 
```

这将更好地表示为一个开关，因为它可以立即清楚地表明，行动的选择是基于“价值”的价值而不是一些任意的测试。

此外，如果您发现自己编写开关和 if-else 并使用 OO 语言，您应该考虑摆脱它们并尽可能使用多态性来实现相同的结果。

最后，关于切换输入需要更长的时间，我不记得是谁说的，但我曾经读过有人问“你的打字速度真的会影响你编码的速度吗？” （转述）

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2009-01-09T11:37:32.603

如果您要打开单个变量的值，那么我每次都会使用一个开关，这就是构造的目的。

否则，坚持使用多个 if-else 语句。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-01-09T12:03:23.340

## 关于可读性：

我通常更喜欢 if/else 构造而不是 switch 语句，尤其是在允许失败案例的语言中。我经常发现，随着项目的老化和多个开发人员的参与，您将开始在构建 switch 语句时遇到麻烦。

如果它们（语句）变得不那么简单，许多程序员就会变得懒惰，而不是阅读整个语句来理解它，他们会简单地弹出一个 case 来覆盖他们添加到语句中的任何 case。

我见过很多代码在 switch 语句中重复的情况，因为一个人的测试已经被覆盖，一个简单的 fall-though 情况就足够了，但是懒惰迫使他们在最后添加冗余代码，而不是试图理解 switch . 我还看到了一些噩梦般的 switch 语句，其中许多案例构造不佳，只是试图遵循所有逻辑，许多失败案例分散在各处，而许多案例并非如此，变得困难......哪种导致我谈到的第一个/冗余问题。

从理论上讲，if/else 构造可能存在相同的问题，但实际上这似乎并不经常发生。也许（只是猜测）程序员被迫更仔细地阅读，因为您需要了解在 if/else 构造中测试的通常更复杂的条件？如果您正在编写一些您知道其他人可能永远不会触及的简单内容，并且您可以很好地构建它，那么我想这是一个折腾。在这种情况下，任何更具可读性和对您来说感觉最好的东西都可能是正确的答案，因为您可能会维持该代码。

## 关于速度：

Switch 语句通常比 if-else 结构执行得更快（但并非总是如此）。由于 switch 语句的可能值是预先安排好的，编译器能够通过构建跳转表来优化性能。不必像在 if/else 构造中那样测试每个条件（好吧，直到找到正确的条件为止）。

然而，情况并非总是如此。如果您有一个简单的开关，例如，可能值为 1 到 10，就会出现这种情况。添加的值越多，*跳转表就越大，switch 的效率就越低（不是 if/else，但比相对简单的 switch 语句效率低）*。此外，如果这些值变化很大（即，不是 1 到 10，而是有 10 个可能的值，例如 1、1000、10000、100000 等到 100000000000），则切换的效率低于更简单的情况.

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T11:44:37.513

每次对单个变量有超过 2 个条件时使用 switch，以工作日为例，如果每个工作日都有不同的操作，则应该使用 switch。

其他情况（多个变量或复杂的 if 子句，您应该使用 If，但没有关于在何处使用每个的规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T11:38:55.317

由于打字需要更长的时间而避免使用东西的倾向是一件坏事，请尝试将其根除。也就是说，过于冗长的东西也很难阅读，所以小而简单很重要，但重要的是可读性而不是可写性。简洁的单行通常比布局良好的 3 或 4 行更难阅读。

使用最能描述操作逻辑的构造。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T11:39:24.380

我个人更喜欢在太多嵌套的 if-else 中看到 switch 语句，因为它们更容易阅读。开关在显示状态方面的可读性也更好。

另请参阅这篇文章中关于[pacman ifs](https://stackoverflow.com/questions/114342/what-are-code-smells-what-is-the-best-way-to-correct-them)的评论。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T12:13:13.807

这在很大程度上取决于具体情况。最好，我认为如果`switch`有`if-else`很多嵌套的`if-elses`.

问题是多少是多少？

昨天我也在问自己同样的问题：

```
public enum ProgramType {
    NEW, OLD
}

if (progType == OLD) {
    // ...
} else if (progType == NEW) {
    // ...
}

if (progType == OLD) {
    // ...
} else {
    // ...
}

switch (progType) {
case OLD:
    // ...
    break;
case NEW:
    // ...
    break;
default:
    break;
} 
```

在这种情况下，第一个`if`有不必要的第二个测试。第二个感觉有点糟糕，因为它隐藏了新的。

我最终选择了，`switch`因为它读起来更好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-09T12:14:56.047

假设您决定使用 switch，因为您只处理可以具有不同值的单个变量。如果这会导致一个小的 switch 语句（2-3 例），我会说这很好。如果看起来你最终会得到更多，我会推荐使用多态性。此处可以使用 AbstractFactory 模式来创建一个对象，该对象将执行您在开关中尝试执行的任何操作。丑陋的 switch 语句将被抽象掉，你最终会得到更干净的代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-09T12:19:57.223

我经常认为使用 elseif 和删除案例实例（在语言允许的情况下）是代码气味，如果不是气味的话。

对于我自己，我通常发现嵌套的 (if/then/else) 通常比 elseif 更能反映事物，并且对于互斥的情况（通常一种属性组合优先于另一种），case 或类似的东西更清楚两年后读。

我认为 Rexx 使用的*select*语句是一个很好的例子，说明了如何做好“Case”（没有删除）（愚蠢的例子）：

```
Select
    When (Vehicle ¬= "Car") Then
        Name = "Red Bus"
    When (Colour == "Red") Then
        Name = "Ferrari"
    Otherwise
        Name = "Plain old other car"
    End 
```

哦，如果优化不符合要求，请使用新的编译器或语言...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-09T12:24:15.217

Switch 语句更容易阅读和维护。并且通常更快，更不容易出错。

# c++ - 可变大小的类 - C++

> ID：427761
> 
> 赞同：1
> 
> 时间：2009-01-09T11:34:10.053
> 
> 标签：c++, placement-new, memory-layout

我见过一个类是这样定义的类..

```
class StringChild : public StringBase
    {
public:
    //some non-virtual functions
    static StringChild* CreateMe(int size);
private:
    unsigned char iBuf[1];
    }; 
```

静态工厂函数有以下实现..

```
return new(malloc(__builtin_offsetof(StringChild ,iBuf[size]))) StringChild(); 
```

据我了解，这个函数使用placement new 来扩展这个类。

这是否只是因为只有 1 个成员并且它是在堆上分配的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T11:46:30.270

这是一个古老的 C 技巧，用于解决普通 C 中可变长度数组不可用的问题。是的，只要您使用合适的分配器构造（例如分配一堆原始内存所需的大小和然后将新对象放置在那里）。只要您不徘徊在分配内存的末尾，它就是安全的，但它确实往往会混淆至少一些内存调试器。

使用此技术时您必须绝对确定的一件事是可变长度数组是对象布局中的最后一个元素，否则您将遍历其他内部变量。

然而，我对工厂函数的实现有点怀疑——我假设“大小”参数实际上是所需的数组大小？另外，不要忘记你必须使用'free'而不是'delete'来释放上面的内存，即使后者在大多数情况下可能工作。

除非有令人信服的理由说明为什么必须以这种方式管理内存，否则我会简单地将数组替换为 std::vector。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T12:01:06.700

如果 iBuf 是结构的最后一个成员，这对于 POD 应该没问题。非 POD 的问题可能是这样的。编译器可以自由地重新排序公共/私有/受保护成员，虚拟基类最终位于最派生对象 IIUC 的末尾，等等。

您的结构是非 POD（它有一个基类），所以我不推荐它。

此外，如果您创建这样的实例

```
return new(malloc(__builtin_offsetof(StringChild ,iBuf[size]))) StringChild(); 
```

你应该确保 malloc 获得的内存应该被 free 释放，所以像这样删除你的实例：

```
obj->~StringChild();
free(obj); 
```

也许您想`::operator new()`用于分配

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T12:04:55.193

严格来说，since`StringChild`是从它衍生而来的，`StringBase`它是不安全的。C++ 标准没有指定基类子对象的布局。第 10 条第 3 款：

> 未指定在最派生对象 (1.8) 中分配基类子对象的顺序。

如果`StringChild`是 POD 结构，那么这种技术将是安全的。

# .net - Wix 和 .NET Framework（先决条件）

> ID：427775
> 
> 赞同：29
> 
> 时间：2009-01-09T11:37:57.423
> 
> 标签：.net, wix, prerequisites

当客户端计算机上尚未安装所需的 .NET Framework 时，如何让我的 Wix 包下载？我已经有条件检查已安装的 .NET 版本，但我不确定在找不到时如何下载和安装它。

ClickOnce 通过检查属性页面中的先决条件自动执行此操作。由于其他一些要求，我只需要在 Wix 中完成它。

谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-01-09T11:54:31.707

**2017 年 8 月更新**：这个非常好的答案现在看起来已经过时了。另请阅读“线程”中的其他答案，了解一些不同的“引导程序选项”。

* * *

Wix 创建的 MSI 包无法做到这一点。Windows 安装程序相当有限，一个 MSI 文件（您的安装程序）不允许调用另一个 MSI 文件（.NET Framework 安装程序）。

您必须创建一个所谓的引导程序（一个 setup.exe 文件），它可以检查指定的先决条件，根据需要下载并安装它们，然后启动您的 MSI 安装程序。

创建引导程序的一种方法是使用 Visual Studio 或 MSBuild 任务 GenerateBootstrapper。这是一个提供更多详细信息的链接：

> [http://wix.mindcapers.com/wiki/Bootstrapper](https://web.archive.org/web/20120326095055/http://wix.mindcapers.com/wiki/Bootstrapper)

如果您只想为您的用户提供一个安装程序，您可能需要创建一个包含 setup.exe 文件和您的 MSI 包的自膨胀安装包。您可以使用 Windows 附带的[iexpress](http://www.microsoft.com/technet/prodtechnol/ie/ieak/techinfo/deploy/60/en/iexpress.mspx?mfr=true)来做到这一点。

这是另一个示例链接：http: [//www.clariusconsulting.net/blogs/pga/comments/42831.aspx](https://web.archive.org/web/20090411122211/http://www.clariusconsulting.net/blogs/pga/comments/42831.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-09-21T08:10:13.303

Wix 将包含自己的引导程序，称为burn。看看：[http ://robmensching.com/blog/posts/2009/7/14/Lets-talk-about-Burn](http://robmensching.com/blog/posts/2009/7/14/Lets-talk-about-Burn)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2010-06-15T08:47:38.153

[DotNetInstaller](http://dblock.github.io/dotnetinstaller/)也被许多开发人员推荐为良好且可靠的引导程序。

**更新**：更新了 DotNetInstaller 的 URL，2017 年 8 月。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-10T20:11:03.753

现在从 WiX 3.6 开始支持此功能。文档仍然很粗略，但对于初学者，请查看[如何：使用 Burn 安装 .NET Framework](http://wix.sourceforge.net/manual-wix3/install_dotnet.htm)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-20T14:44:56.810

在使用引导程序的 wix 3.6 中，您只需要添加 .net 4.0 作为先决条件，如果需要下载是..

a) 将文件 WixNetFxExtension.dll 的引用添加到您的 Bootstrapper / 托管 Bootstrapper 应用程序项目中

b）将以下内容添加为链中的第一项..

```
<PackageGroupRef Id="NetFx40Web"/> 
```

真的是这样！

更多信息：[wixnetfxextension 文档](http://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm)

# svn - 如何检索在 Subversion 的修订范围内更改的文件？

> ID：427781
> 
> 赞同：20
> 
> 时间：2009-01-09T11:38:58.687
> 
> 标签：svn

我如何从存储库中检索所有文件以及文件夹结构，这些文件在一系列修订中发生了变化，比如从 1000 到 1920？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-09T11:57:57.313

如果您只想要更改路径的列表，请查看 diff 上的 --summarize 选项。

```
svn diff --summarize -r1000:1920 https://my.org/myrepo/ 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-09T11:51:20.993

这在一定程度上取决于您打算如何处理数据。如果您只对手动检查数据感兴趣，您可以这样做

```
svn log -r1000:1920 -q -v | grep "   M" | sort -u 
```

例如，查看所有修改过的文件。

如果你想以编程方式做一些事情，你可以将 --xml 标志传递给 svn log 并将所有日志数据作为 XML 输出：

```
svn log -r1000:1920 --xml > log1000-1920.xml 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-07-01T14:00:31.887

不确定这是否有帮助，但如果您使用的是 Windows，并且您安装了 TortoiseSVN。它有这个功能。检查*[使用 TortoiseSVN 仅导出新/修改的文件](http://verysimple.com/2007/09/06/using-tortoisesvn-to-export-only-newmodified-files/)*以获取详细信息。同样，这是假设您使用的是 Windows。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T12:21:38.687

这是一个解决方案，它将为您提供一个树，其中仅包含那些存在于 r1920 中并且在 r1000 和 r1920 之间更改或添加的文件。这是一个 bash 脚本，因此您需要 Linux 和 GNU 工具或类似的工具。

```
 #!/bin/bash

repo=https://zsvn.brz.gv.at/svn/ju-vj/trunk/vj
lo=1000
hi=1920
wc=changed_files$hi

# all files as of revision $hi
svn export $repo@$hi $wc

(# files that have changed
 svn diff --summarize -r$lo:$hi $repo \
    | egrep -e "^[AM]" \
    | cut -c7- \
    | sed -e "s,$repo,," \
    | sed -e "s, /,," \
     | while read p
 do # omit directories, emit only files
     if [[ -f $wc/$p ]]
     then
         echo "$p"
     fi
 done
 # all files (omit directories)
 svn ls -R $repo@$hi | egrep -v -e "/$"
) \
| sort | uniq -u \
| (cd $wc ; xargs rm)

# The last lines select only those files which are unique when the two
# lists are combined, that is all those files that are in revision $hi
# and have not changed.  These are then fed to rm by xargs to remove
# them.

# what's left is an export containing only those files that changed or
# were added between revisions $lo and $hi. 
```

# apache-flex - Flash/Flex 光标

> ID：427789
> 
> 赞同：5
> 
> 时间：2009-01-09T11:43:18.717
> 
> 标签：apache-flex, flash, actionscript-3

我在一个加载在 CS3 中创建的外部 Flash 资源的 Flex 应用程序上工作。我刚刚阅读了有关如何使用 Flex mx.managers.CursorManager 类显式更改鼠标光标的信息。但我最理想的做法是在加载的 Flash SWF 中的某些元素上设置鼠标光标属性，这样当光标经过此元素时，光标会自动更改，而无需我响应鼠标事件。

可能吗？Flash 在 DisplayObject 中是否支持此功能？

似乎 Flash SWF 压倒了我。某些对象会在鼠标悬停时自动显示手形光标，但我看不到在 DisplayObject 上关闭此功能的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T14:41:10.217

要设置“手”光标，只要鼠标悬停在元素上，您就必须指定以下属性：

```
 <mx:VBox 
       useHandCursor="true"
       mouseChildren="false"
       buttonMode="true"> 
```

然而，这只适用于手形光标。还要注意所需的**mouseChildren**属性。您必须将此设置为 false 以实现所有包含项目的光标，或者您必须为所有元素指定属性**useHandCursor**和**buttonMode**。**然而，将mouseChildren**设置为**false**的副作用是子元素上的所有鼠标事件（**mouseOver**、**mouseOut**、**click** ……）将不再起作用。

如果您想使用与手形光标不同的光标，恐怕您只有两种可能性：

*   用您的光标替换标准手形光标
*   使用**mouseOver**和**mouseOut**事件以编程方式设置光标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T22:58:02.893

In any object inheriting from Sprite whose buttonMode and useHandCursor properties are both true, you'll get a hand cursor by default when you roll over it. Some objects do this by default, correct; Button and LinkButton are examples you've probably noticed. Simply setting useHandCursor to false on any of these components will disable the hand cursor easily enough, even when its buttonMode property (which is responsible for dispatching click events) is set to true.

If you want to set your cursor to anything else on mouseOver, though, you'll have to respond to mouse events; there's no way around that. Depending on your design goal, you could break that work out somehow, maybe by inheriting from some other object and then overriding its default behavior, but in some form or other, the runtime needs to know you want those mouse events handled.

# math - 逼近非参数三次贝塞尔曲线

> ID：427796
> 
> 赞同：5
> 
> 时间：2009-01-09T11:45:38.230
> 
> 标签：math, bezier

近似三次贝塞尔曲线的最佳方法是什么？理想情况下，我想要一个函数 y(x)，它可以为任何给定的 x 提供精确的 y 值，但这将涉及为每个 x 值求解一个三次方程，这对我的需要来说太慢了，并且可能存在数值稳定性问题以及这种方法。

[这](http://antigrain.com/research/adaptive_bezier/index.html)会是一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-10T18:28:01.503

只需解决立方。

如果您谈论的是贝塞尔平面曲线，其中 x(t) 和 y(t) 是三次多项式，那么 y(x) 可能未定义或具有多个值。极端退化的情况是线 x= 1.0，可以表示为三次贝塞尔曲线（控制点 2 与端点 1 相同；控制点 3 与端点 4 相同）。在这种情况下，y(x) 对于 x != 1.0 没有解，对于 x == 1.0 没有无限解。

递归细分的方法会起作用，但我希望它比仅仅求解三次要慢得多。（除非您正在使用某种浮点容量异常差的嵌入式处理器。）

您应该可以毫不费力地找到解决已经过彻底测试和调试的三次方的代码。如果您使用递归细分实现自己的解决方案，您将不会拥有该优势。

最后，是的，可能存在数值稳定性问题，例如当您想要的点靠近切线时，但细分方法不会使这些问题消失。它只会让它们变得不那么明显。

**编辑**：回复您的评论，但我需要 300 多个字符。

> 我只处理 y(x) 只有一个（实）根的贝塞尔曲线。关于数值稳定性，使用[http://en.wikipedia.org/wiki/Cubic_equation#Summary](http://en.wikipedia.org/wiki/Cubic_equation#Summary)中的公式，如果 u 非常小，可能会出现问题。– jtxx000

古怪的文章是没有代码的数学。我怀疑您可以在某处找到一些更易于使用的食谱代码。也许 Numerical Recipies 或 ACM 收集的算法[链接文本](http://calgo.acm.org/)。

对于您的具体问题，并使用与文章相同的符号，当 p 也为零或接近零时，u 仅为零或接近零。它们通过以下等式相关：
`u^^6 + q u^^3 == p^^3 /27`
接近零，您可以使用近似值：
`q u^^3 == p^^3 /27`
或 `p / 3u ==`q 的立方根
所以从 u 计算 x 应该包含以下内容：

```
(fabs(u) >= somesmallvalue) ?  (p / u / 3.0) : cuberoot (q) 
```

离零有多“近”？取决于你需要多少准确度。您可以花一些时间在 Maple 或 Matlab 上查看对于 u 的大小引入了多少误差。当然，只有你知道你需要多少精度。

这篇文章为三次方的 3 个根给出了 u 的 3 个公式。给定三个 u 值，您可以获得 3 个对应的 x 值。u 和 x 的 3 个值都是具有虚部的复数。如果你**确定**必须只有一个真正的解决方案，然后您期望一个根的虚部为零，而另外两个是复共轭。看起来你必须计算所有三个，然后选择真正的一个。（请注意，复数 u 可以对应于实数 x！）但是，还有另一个数值稳定性问题：浮点运算就是这样，实数解的虚部不会完全为零，而虚部非实根可以任意接近零。因此，数字四舍五入可能会导致您选择错误的根。如果您的应用程序中有一些您可以在那里应用的健全性检查，那将会很有帮助。

如果您确实选择了正确的根，Newton-Raphson 的一个或多个迭代可以大大提高它的准确性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T22:37:03.360

是的，de Casteljau 算法会为您工作。但是，我不知道它是否会比通过卡尔达诺方法求解三次方程更快。

# c# - 迭代未知的数据结构？

> ID：427799
> 
> 赞同：2
> 
> 时间：2009-01-09T11:48:29.143
> 
> 标签：c#

**重复**：[C# 访问 System.Object[] 中的数据](https://stackoverflow.com/questions/420275/)

* * *

当我运行以下代码时：

```
 foreach (object bar in list)
    {
        Console.WriteLine = bar;
    } 
```

我得到以下输出：

> System.Collections.DictionaryEntry
> 
> System.Collections.DictionaryEntry
> 
> System.Collections.DictionaryEntry
> 
> System.Collections.DictionaryEntry
> 
> System.Collections.DictionaryEntry
> 
> System.Collections.DictionaryEntry
> 
> System.Collections.DictionaryEntry

但是如何写出上面每一行的内容呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T11:50:00.200

```
foreach (DictionaryEntry entry in list)
{
    Console.WriteLine("{0}={1}", entry.Key, entry.Value);
} 
```

编辑：如果您希望它适用于*任何事情*，并递归到结果中的任何对象（例如，根据 Kloti 的回复进入子对象 []），您基本上需要使用反射。我会做这样的事情：

*   检查 null （如果是，则打印“null”）
*   用 GetType() 找出对象的执行时间类型
*   有一个已知的漂亮打印机列表，例如用于列表、字典等。如果有的话，委托给一个漂亮的打印机。
*   否则，检查类型是否覆盖 ToString() - 如果是，只需调用它并假设它知道它在做什么。
*   否则，检查公共可读属性，并向下递归。

我怀疑有图书馆可以在某处执行此操作，但我手头没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T13:12:59.830

没有可以遍历任何未知数据结构的通用解决方案。但是，您可以编写适用于已知类型集（如标量、字典、列表等）的递归算法，例如：

```
public void Dump(object obj)
{
  if(obj is IList)
  {
     DumpList((IList)list);
  }
  else if(obj is IDictionary)
  {
     DumpDictionary(dict)  
  }
  else
  {
    Console.WriteLine(obj); 
  }
}

public void DumpList(IList list)
{
    foreach(object item in list)
    {
      Dump(item);
    }
}

public void DumpDictionary(IDictionary dict)
{
    foreach (DictionaryEntry entry in dict)
    {
      Dump(entry.Key);
      Console.Write("=");
      Dump(entry.Value);
    }
} 
```

要获得更好、更可扩展的解决方案，您可以使用责任链模式，但我想让这个示例尽可能简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T12:02:20.833

关于第二个查询 ( `object[]`) - 请参见[此处](https://stackoverflow.com/questions/420275/c-accessing-data-in-system-object#420287)。

（呃，等一下！那也是你！你以前问过这个问题......重复？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-04T11:17:59.983

JohnSkeet 基本上回答了它，但错过了细节。您需要将字典装箱到 IDictionary 接口中才能访问 DirectoryEntry 类。

```
public void Test
{
  Dictionary<string, object> objectList = new Dictionary<string, object>();
  Dictionary<string, object> guidList = new Dictionary<string, Guid>();

  IterateGenericDict(objectList);
  IterateGenericDict(guidList);
}

public void IterateGenericDict(object obj)
{
  foreach (DictionaryEntry entry in (IDictionary)obj)
  {                    
    Console.WriteLine(entry.Key + "=" entray.Value.ToString());
  }
} 
```

# posix - 更改系统时间对休眠线程有什么影响？

> ID：427808
> 
> 赞同：7
> 
> 时间：2009-01-09T11:51:34.737
> 
> 标签：posix, sleep, bsd, clock

如果您看一下[clock_gettime()](http://fuse4bsd.creo.hu/localcgi/man-cgi.cgi?clock_gettime+2)函数，它在所有BSD 中都可用并且实际上被定义为POSIX 标准的一部分，您会发现至少支持三种类型的时钟（许多系统支持的时钟不止这些时钟） ，但实际上 POSIX 标准只要求存在一个，所有其他都是可选的）：

*   **CLOCK_REALTIME** - POSIX 要求它存在。这是挂钟。

*   **CLOCK_MONOTONIC** - 不知道这是什么（以及 SI 秒的含义），但我知道这个时钟永远不会向后跳，它只能单调增加值。

*   **CLOCK_UPTIME** - 我看不出这与 CLOCK_MONOTONIC 有什么不同（正常运行时间也永远不会向后跳），但至少我知道内核启动时这个时钟从零开始（而它没有定义内核启动时 CLOCK_MONOTONIC 的初始值是多少） )

让我们暂时忽略其他时钟。CLOCK_REALTIME 不能保证单调向上计数，对吧？这是实际的“系统时间”。我可以随意更改系统时间。我可以将它设置为过去 3 个月或未来 5 年，每次我的系统使用网络上的 NTP 服务器同步时间时，时间可能会向前或向后跳跃。

现在我们在 BSD 系统中有两个休眠函数。[sleep()](http://www.rocketaware.com/man/man3/sleep.3.htm)和[nanosleep()](http://www.rocketaware.com/man/man2/nanosleep.2.htm)。我不确定，但我希望 sleep() 在 nanosleep 之上实现，毕竟我可以通过使用 nanosleep() 轻松模拟 sleep() 并且只在 struct timespec 中设置秒数，保持纳秒为零.

*我在很多资料中读到，这些函数实际上是通过计算唤醒时间来工作的（获取当前时间，添加睡眠量），如果当前时间晚*于唤醒时间，系统将定期检查时间，如果是这样，它将再次唤醒线程。仅在间隔中检查这一事实是手册页说当前睡眠将至少睡眠这段时间的原因（仅在被信号中断时更短），但它可能会睡眠更长时间（取决于多久系统检查我们是否已经超过了唤醒时间，并且取决于调度程序允许该线程再次运行之前需要多长时间）。

这对我来说是完全理智的......但是有一个问题一直困扰着我：

根据各种来源，睡眠（至少是 nanosleep）在内部使用 CLOCK_REALTIME 作为时钟。这意味着，如果告诉 nanosleep() 休眠 30 秒，然后将我的系统时钟更改为未来 1 小时，线程将几乎立即唤醒（未来 1 小时远早于唤醒时间 nanosleep( ）计算）。这也完全没问题。**但是**，如果我说在 30 秒后醒来，然后用户发现他的系统时钟提前一小时并将他的时钟向后设置一小时，会发生什么？然后我的线程会休眠 1 小时 30 秒？因为那将是相当糟糕的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T12:06:14.630

据我所知，睡眠功能通常更像是一个递减计数器。您说“睡眠 10 秒”，这在调度程序中转换为“睡眠 1000 个计划滴答”，然后每次调度程序检查睡眠进程时，它都会减少剩余时间。

通过这种方式，睡眠时间将始终是实际睡眠时间，而不是一直睡到未来的某个时间。这样做的原因正如您所怀疑的那样，如果我们在未来选择一个时间，我们可能永远不会到达那里（或者可能会在意想不到的时间内到达那里）。这与您希望在程序中使用 sleep 的目的一致。它并不意味着进行类似日历的计算。

你也可以做一个简单的测试，让程序休眠 30 秒，使用 nix 的“time”命令来计算函数运行的时间，然后在它开始后将你的系统时钟改回 5 分钟，看看会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T12:22:15.550

该线程将检查一个内部计数器，该计数器设置为睡眠的持续时间而不是睡眠的终点。使用的内部计数器与当前系统时间无关，因此如果系统时间发生任何变化，也不会受到影响。

# ruby-on-rails - Are there any good googlemaps plugins for rails?

> ID：427819
> 
> 赞同：3
> 
> 时间：2009-01-09T11:56:43.247
> 
> 标签：ruby-on-rails, google-maps

There are some good geocoding plugins (e.g. geokit) but can you recommend a googlemaps plugin for "the view" in rails?

I used YM4R/GM before but I don't know if its still up to date...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T14:14:02.250

I've always just used GeoKit for all things GoogleMaps... it's a little old, but all the source code for "Beginning Google Maps Applications with Rails" is available at [http://googlemapsbook.com/source/](http://googlemapsbook.com/source/). It should walk you through pretty well on how to write the code for the front end. [Advanced Rails Recipes](http://www.pragprog.com/titles/fr_arr/advanced-rails-recipes) also has some great code recipes on building geocoded points into GoogleMaps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T13:45:40.997

Looking on Github I found [google_maps](http://github.com/bhedana/google_maps/tree/master) plugin. I haven't tried it but it seems ok.

# security - 实施 SFTP 服务器解决方案的最佳方式？

> ID：427821
> 
> 赞同：0
> 
> 时间：2009-01-09T11:57:44.367
> 
> 标签：security, https, ssh, aes, sftp

我目前正在设置一个商业 SFTP 服务器，我只是在寻找您对我目前正在考虑实施的设置的一些意见，以及关于哪种商业 Secure FTP 服务器软件最好的建议适合。请记住，我负责的数据非常敏感，因此非常感谢任何评论/反馈。

这是场景：

1) 在文件上传之前，使用带有盐的 AES 256 压缩和加密文件。

2) 从客户服务器通过 SFTP（端口 22）上传到我们的 SFTP 服务器的文件。

3) 然后我们的其他客户端使用一次性密码验证通过 HTTPS 下载文件（强 10 字符字母数字密码）

我正在考虑的实施细节是：

对于上面的 (2) 部分，使用主机密钥匹配、公钥认证和用户名/密码组合打开连接。两边的防火墙被限制为只允许客户端服务器的静态IP连接。

对于第 (3) 部分，为其他客户端提供了每个用户的用户名/密码（用于审核），以登录其在服务器上的入狱帐户。文件本身的加密密码是基于每个文件提供的，所以我试图在这里始终应用两种加密模式（文件位于服务器上时除外）。

除了两侧的专用防火墙，SFTP 服务器上的访问控制将被配置为在短时间内阻止一定次数的失败尝试的 IP 地址，无效的密码尝试将锁定用户，将实施密码策略等。

我想我已经涵盖了尽可能多的内容，但我很想听听你们对这个实现的看法？

对于商业服务器方面，我已将其范围缩小为带 SSH 和 HTTP 模块的 GloalSCAPE SFTP 或 JSCAPE 安全 FTP 服务器——我将在周末评估每个服务器的适用性，但如果你们有任何经验的话要么我也很想听听。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T12:40:23.283

由于从客户的角度来看，数据显然既重要又敏感，我建议您咨询安全专家。本土解决方案通常是过度杀戮和杀戮不足的结合，导致机制既低效又不安全。考虑：

*   文件是预先加密的，所以 SFTP/HTTPS 的唯一好处是会话本身的加密（*例如*登录），但是......

*   您使用 PKI 进行上传，使用 OTP 进行下载，因此没有暴露密码的风险，只有用户 ID ——这对您来说很重要吗？

*   您将如何传输一次性密码？传输安全吗？

*   请记住，任何锁定方案都应该是临时的，否则黑客可以通过锁定每个帐户来禁用整个系统。

要问自己的问题：

*   我在保护什么？
*   我在保护谁？
*   攻击向量是什么？
*   违规的可能性和风险是什么？

一旦你回答了这些问题，你就会对实施有更好的了解。

一般来说：

*   您选择 AES256 + salt 是非常合理的。
*   多因素身份验证可能比加密的多次迭代更好。它通常被认为是“您拥有的东西，加上您知道的东西”，例如证书和密码，需要两者才能访问。

就可用的实用程序而言，许多现成的软件包既安全又易于使用。对于初学者，请查看 OpenSSH、OpenVPN 和 vsftp。

祝你好运 - 请告诉我们您选择的方法！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T12:31:56.933

那么 Linux 和 BSD 附带的 OpenSSH 有什么问题呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T12:46:07.280

```
Before file upload, files are compressed & encrypted using AES 256 with a salt. 
```

这部分敲响了一些警钟......您是否编写了一些代码来执行此加密/压缩？您如何进行密钥管理？您还说您的密钥是密码派生的，因此您使用 AES 256 和 salt 会给您一种错误的安全感 - 您的真实密钥空间要少得多。此外，此处使用“盐”一词也不合适，这表明存在进一步的弱点。

您最好使用经过充分验证的实现（例如 PGP 或 GPG 之类的东西）。

此外，如果您对文件本身使用 PGP 样式的公钥加密（以及体面的密钥管理），那么您的 SFTP 服务器的安全性将不那么重要。您的文件可以在静止时加密。

关于系统其余部分的安全性的论点非常复杂（许多协议、身份验证方案和控制） - 可靠地保护文件会容易得多，然后对其余部分进行最佳实践（这将很重要）少得多，也可以独立控制）。

# macos - OSX：指向应用程序包的环境变量？

> ID：427825
> 
> 赞同：5
> 
> 时间：2009-01-09T11:58:10.340
> 
> 标签：macos, environment-variables, bundle, cscope

我希望 cscope 在 MacVim 而不是 vim 中打开文件，所以我试图将 MacVim 的路径作为 cscope 使用的 EDITOR 环境变量的值：

```
$ export EDITOR=/Applications/MacVim.app/Contents/MacOS/MacVim
```

如果我现在尝试从 ctags 中编辑文件，它将不起作用并抛出此错误消息：

```
$ MacVim[8384:10b] 应用程序包中没有 Info.plist 文件或 Info.plist 文件中没有 NSPrincipalClass，退出
```

从命令行调用 MacVim

```
$ /Applications/MacVim.app/Contents/MacOS/MacVim
```

虽然有效。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-13T16:41:21.357

确保你把 mvim 脚本放在你的路径中，然后试试这个：

导出 EDITOR="mvim -f"

这是我使用 MacVim 编辑 git 提交消息时的票证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T12:36:48.047

你试过 export EDITOR=/Applications/MacVim.app 吗？

或者将 MacVim 包装在一个使用 open 启动应用程序的小脚本中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T16:51:03.823

当我将 EXPORT 变量完全设置为该变量并启动 git 提交时，它对我来说很好。你用什么叫它？您是否考虑过将 EXPORT 设置为指向 MacVim 磁盘映像上的 mvim 脚本？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-08T18:30:27.930

`<plug>`

我的[启动](http://web.sabi.net/nriley/software/#launch)工具就是为此而设计的。它类似于 Apple 的`open`，但允许您获取应用程序包的路径，而不是启动它。例如：

```
% launch -ni com.apple.safari
/Applications/Safari.app 
```

`launch`也在 Fink 和 MacPorts 中。

`</plug>`

# visual-studio - 使用宏附加到 IIS7？

> ID：427831
> 
> 赞同：4
> 
> 时间：2009-01-09T12:01:17.450
> 
> 标签：visual-studio

我在 Visual Studio 中使用了一个方便的带有键绑定的[宏](http://weblogs.asp.net/fmarguerie/archive/2006/04/11/attach-visual-studio-web-server.aspx)来附加到 Windows XP IIS 5.1：

```
Imports System
Imports EnvDTE
Imports EnvDTE80
Imports EnvDTE90
Imports System.Diagnostics
Imports System.IO

Public Module AttachDebugger

    ' This subroutine attaches to the first IIS Web Server found.
    Public Sub AttachToFirstIISWebServer()
        Dim process As EnvDTE.Process

        For Each process In DTE.Debugger.LocalProcesses
            If (Path.GetFileName(process.Name).ToLower() = "aspnet_wp.exe") Then
                process.Attach()
                Exit Sub
            End If
        Next

        MsgBox("No IIS Server found")
    End Sub

End Module 
```

但是，在 Vista 中，IIS7 进程 (w3wp.exe) 不再在 LocalProcesses 中，而是[在 Windows 上作为服务](http://weblogs.asp.net/scottgu/archive/2007/06/27/public-hotfix-patch-available-for-debugging-asp-net-on-iis7.aspx)运行。如何使用宏附加到服务？

我经常使用相当大的解决方案，不想每次都使用 F5 重新编译所有内容。

* * *

已解决：宏工作正常，我只是首先输入了错误的进程名称。使用 XP 的**aspnet_wp.exe ，使用 Vista 的****w3wp.exe**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T12:18:45.137

它可能还没有运行。您需要先访问该站点以使 IIS 启动它。如果 IIS7 的 Vista 实现支持多个应用程序池，也可能有多个 w3wp.exe（我可能错了，我只知道服务器 2008 中的 IIS7）。

我看不出有任何理由说明当进程启动并运行时它不会列在本地进程集中。

# java - 如何在 WebSphere 中管理 ClassPath

> ID：427837
> 
> 赞同：7
> 
> 时间：2009-01-09T12:04:07.787
> 
> 标签：java, websphere

我在 Websphere v6.1 中的 Web 模块类路径有问题。

在我的 WEB-INF/lib 中，我有大量的 jar 文件，其中包括 xercesImpl.jar 和 xmlparserv2.jar。我需要两个罐子都在场，但它们似乎相互冲突。具体来说，每个 jar 包含一个 META-INF/services 目录，因此，当我们尝试通过 JAXP 获取 DocumentBuilderFactory 的实例时，我们获得的实例取决于这两个 jar 在类路径中出现的顺序。

我**一直**想使用 DocumentBuildFactory 的 xerces 实例，所以我想将 xercesImpl.jar 推到类路径的前面。我尝试通过在 Manifest 文件中为 war 文件指定一个 Class-Path 部分来做到这一点，但是我在 WAS Module Compound CLass Loader 中实际获得的类路径非常奇怪。我似乎得到了 WAS 放置的一些标准内容，然后是按字母顺序排列的 WEB-INF lib 的内容，然后是 Manifest 文件指定的类路径。

如果我根本不将清单文件放入战争中，我会得到标准的东西，然后是 WEB-INF/lib 的内容，但顺序是任意的。

我错过了什么？有没有办法可以将类路径设置为我想要的？

戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T18:37:48.617

我假设 WebSphere 是指常规的 J2EE Application Server（而不是类似于 Community Edition 的东西；WebSphere 是应用于许多 IBM 产品的品牌名称）。

我认为你的选择是有限的。由于依赖关系看起来非常明确，我更喜欢编程方法而不是依赖于类路径的变幻莫测（比如显式创建工厂实例而不是依赖于 SPI）。

如果这不是一个选项，您可能希望查看使您的依赖项之一成为 EAR 项目实用程序 JAR 并使用 WAR 上的 PARENT_LAST 类加载策略配置 MODULE 类加载。这可以通过浏览器管理控制台进行配置（或者通过[RAD](http://en.wikipedia.org/wiki/IBM_Rational_Application_Developer)工具，如果您使用它）。

我要看的另一件事是 WAS[共享库](http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/topic/com.ibm.websphere.base.doc/info/aes/ae/tcws_sharedlib_create.html?resultof=%22%73%68%61%72%65%64%22%20%22%73%68%61%72%65%22%20%22%6c%69%62%72%61%72%69%65%73%22%20%22%6c%69%62%72%61%72%69%22%20)功能（在浏览器管理控制台的*环境下）。*这些可以[与服务器](http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/topic/com.ibm.websphere.base.doc/info/aes/ae/tcws_sharedlib_server.html?resultof=%22%73%68%61%72%65%64%22%20%22%73%68%61%72%65%22%20%22%6c%69%62%72%61%72%69%65%73%22%20%22%6c%69%62%72%61%72%69%22%20)或[应用程序](http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/topic/com.ibm.websphere.base.doc/info/aes/ae/tcws_sharedlib_app.html?resultof=%22%73%68%61%72%65%64%22%20%22%73%68%61%72%65%22%20%22%6c%69%62%72%61%72%69%65%73%22%20%22%6c%69%62%72%61%72%69%22%20)相关联。缺点是这需要更多的配置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T19:05:36.813

在 IBM Websphere Application Server 6.1 中，Web 模块有自己的类加载器，通常在 PARENT_FIRST 模式下使用。这意味着 Web 模块类加载器会在加载任何新类之前尝试将类加载委托给父类加载器。

如果您希望在 XML 解析器 v2（我假设是 Oracle XML v2 解析器）类之前加载 Xerces 类，则必须由父类加载器加载 Xerces 类 - 在这种情况下，最好是应用程序类加载器. 这可以通过将 Xerces jar 放在 EAR 文件的根目录中（如果有的话）或使用 xerces.jar 准备 EAR 文件并将 WAR 文件放在根目录中来完成。然后应该将 xmlparserv2 jar 放在 WEB-INF\lib 中。

您还可以尝试创建一个 Xerces 共享库以供您的应用程序使用。

[您可以在IBM WebSphere Application Server V6.1：系统管理和配置](http://www.redbooks.ibm.com/abstracts/sg247304.html)中找到有关此的更多信息。详细信息可在第 12 章中找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-01T17:03:29.743

## JAXP 如何选择解析器

您可能想知道这个程序实际使用的是哪个解析器。毕竟，JAXP 是相当独立于解析器的。答案取决于您的类路径中安装了哪些解析器以及某些系统属性是如何设置的。默认是使用由`javax.xml.parsers.DocumentBuilderFactory`系统属性命名的类。例如，如果您想确保使用 Xerces 来解析文档，那么您可以像这样运行 JAXPChecker：

```
D:\books\XMLJAVA>java -Djavax.xml.parsers.DocumentBuilderFactory=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl  JAXPChecker file:///D:/books/xmljava/dom.xml
> file:///D:/books/xmljava/dom.xml is well-formed. 
```

如果`javax.xml.parsers.DocumentBuilderFactory`未设置该属性，那么 JAXP 会在 JRE 目录中的 lib/jaxp.properties 属性文件中查找系统属性的默认值`javax.xml.parsers.DocumentBuilderFactory`。例如，如果您想始终如一地使用某个 DOM 解析器，`gnu.xml.dom.JAXPFactory`请将以下行放在该文件中：

```
javax.xml.parsers.DocumentBuilderFactory=gnu.xml.dom.JAXPFactory 
```

如果找不到解析器，接下来 JAXP`META-INF/services/javax.xml.parsers.DocumentBuilderFactory`会在运行时可用的所有 JAR 文件中查找一个文件，以找到具体`DocumentBuilderFactory`子类的名称。

最后，如果失败，则`DocumentBuilderFactory.newInstance()`返回一个默认类，通常是来自还提供 JAXP 类的供应商的解析器。例如，`org.apache.crimson.jaxp.DocumentBuilderFactoryImpl`默认选择 JDK JAXP 类，但选择 Ælfred JAXP 类`gnu.xml.dom.JAXPFactory`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-10T10:00:36.380

您还可以尝试设置系统属性以更喜欢实现。例如，更喜欢 xmlparserv2 dom 解析器，设置 javax.xml.parsers.DocumentBuilderFactory=oracle.xml.jaxp.JXDocumentBuilderFactory

# wcf - 是否有像 HTTP 监控服务一样监控安全 WCF 端点的服务？

> ID：427838
> 
> 赞同：2
> 
> 时间：2009-01-09T12:04:18.037
> 
> 标签：wcf, monitoring, network-monitoring

由于 COM 组件的问题，我在 WCF 中的服务偶尔会出现故障。在进行故障排除时，我想设置另一台主机来定期调用此服务以监控可用性。

虽然服务受到 SSL 和 WCF 身份验证（用户名/密码）的保护，但它比简单的 HTTP 调用稍微复杂一些。我还希望能够解析成功的调用，看看它们是否从我的代码中返回警告/失败状态。

您会为此推荐任何监控提供商，还是超出他们通常提供的简单监控？

问候

瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T12:45:37.733

您可以在服务器或客户端上[启用 WCF 日志记录和审核工具，以生成所有流量的日志。](http://www.codeplex.com/WCFSecurity/Wiki/View.aspx?title=How%20do%20I%20enable%20logging%20and%20auditing%20in%20WCF%3F&referringTitle=Questions%20and%20Answers)然后，您可以使用.NET Framework 3.0 和 3.5 SDK 中提供的[WCF 服务跟踪查看器工具](http://msdn.microsoft.com/en-us/library/ms732023.aspx)分析结果。
在您的情况下，我可能**只会在消息级别**启用日志记录。这将减少最终出现在日志文件中的信息量，并帮助您专注于分析实际从服务来回发送的数据。

# wiki - 您使用什么工具在您的团队中的开发人员之间共享信息？

> ID：427847
> 
> 赞同：10
> 
> 时间：2009-01-09T12:08:26.077
> 
> 标签：wiki, blogs, knowledge-management

我们已经有了指导，相互分享信息，并定期举行技术会议。但是，我们希望将这些事情记录下来，以备记录和未来的新团队成员使用。现在我们有大约 30 名开发人员。

我们正在考虑建立一个内部博客和维基。

虽然在公共博客（甚至可能有官方公共开发者博客）上分享东西会很棒，但现在我们希望将其保留在内部。我们的商店主要做定制编程，而不是产品，所以那里会有很多专有的客户信息。公共博客的自我审查只会让我们慢下来。

Wiki 在概念上很好，但它们需要更多的组织和编辑，所以我不相信它会是可持续的。

你的组织是如何做到的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T12:14:32.087

维基很棒。它们确实需要结构化，但我认为让 wiki 工作的最大障碍是让人们实际使用它来写下相关信息。

在我之前的工作中，我们有一个内部 IRC 频道，这对微通信非常有用。在我目前的工作中，这根本行不通。很少有开发人员习惯于将聊天程序用于工作目的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T14:41:02.073

好吧，无论您决定使用什么技术或产品，它们都不是问题。所有在咖啡机上没有充分共享的知识都需要注意。

*   实际编写时要注意（无论是网络驱动器上的文档、wiki 页面、SharePoint 服务器等）。
*   注意对其进行分类（通过链接、标签、网页等...）。
*   注意保持最新（通过个人按需或计划工作）。

无论您使用什么，任何技术都无济于事。为此，您需要激励团队将内容写下来，在给其他团队成员打电话（和打断）之前先阅读存储库中的内容，并在错误时纠正错误。

根据我的经验，SharePoint 和 Wiki 的性能大致相同。你需要打败人们才能使用它，直到他们*体验*到他们*想要*使用它，因为他们会在某个时候体验到这种类型的信息共享可以节省时间——他们的时间。

由于您已经养成了共享信息的习惯，因此这对您来说可能不是那么难的问题。我建议一个（或几个，最好少于太多）提供一些（备用）初始结构，然后让填充开始。由于不存在完美的分类，因此您不必担心太多。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T12:16:51.957

我已经看到像[Basecamp](http://www.basecamphq.com)和[Huddle](http://www.huddle.net)这样的协作在这里发挥了巨大的作用，内部 wiki（以及一般的 Intranet）在我的经验中往往不发达并且被忽视。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-09T12:38:58.887

我们将[Trac](http://trac.edgewall.org/)用于 wiki、scm 和票务，并使用私人[Jabber](http://www.ejabberd.im/) /IRC 服务器让我们相互交谈。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-09T12:43:21.013

在我之前的工作中，我们使用 SharePoint 来组织文档。这是相当成功的，但显然需要使网站保持最新、相关和适当的设置。但是，SharePoint 的体系结构足够灵活，我们能够根据需要对其进行自定义，而无需借助编码。我建议你留出一些时间来管理你想要的任何解决方案。如果没有维护，文档存储库很容易变得陈旧或杂乱无章。我们强调在每个 Sprint 工作结束时更新团队的文件夹（我们使用了 Scrum 敏捷方法）。

Wiki 是共享知识的好主意，可能以不太正式的方式。我尝试使用私人 WetPaint wiki，但没有得到管理层的支持。但是，这当然值得一试。你不会在不需要编辑控制的情况下侥幸逃脱，但是将这方面作为团队之间的共同责任或以循环方式进行并没有错。

我建议在您的日历中预订知识交流会议的时间。大型开发公司很容易分裂成孤岛（不是故意的，而是几乎作为必要专业化的副产品），这会导致两个或多个团队一起解决许多相同的问题。与整个小组每月或每两周一次的会议非常有用。视频演示是另一个想法，但必须在记录技术细节和有效执行此操作所需的准备之间取得平衡。（在我以前的工作中，我们从来没有把它搞定。）

如果你被分成小团队，我真的建议每天举行站立会议，让每个人都了解他们前一天取得的成就以及他们今天计划做的事情。这是 Scrum 的关键之一，它可以让每个人都快速了解最新信息，并节省大量不必要的会议和审查。

我希望这有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T12:32:22.567

我们将[Yammer](http://www.yammer.com/)用于简短信息，这是一种类似于 Twitter 的服务，但它在您的电子邮件域中是私有的。有一个 Web 应用程序、一个 Windows 和 Mac 客户端，甚至还有一个 iPhone 版本。

对于文档，我们使用开源 Wiki（ ASP.NET 平台上的[ScrewturnWiki](http://www.screwturn.eu/)）。它被很好地接受了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-09T12:37:43.287

在我工作的一个地方，我们也使用过 Wiki，但发现它更新的频率不够高。不得不不断推动人们使用它。

显然，我们是一个疯狂的共享文件系统，其中包含用于项目通讯的匹配共享电子邮件文件夹。

我们还使用了一个内部即时消息系统来避免在办公室周围发送一揽子电子邮件，但像 Fog Creek 一样，我现在可能会实施一个私人 Twitter 克隆。

我们做的一件事是每年都有一天，所有的开发人员都会在办公室外的某个地方见面，互相介绍他们发现/完成的有趣事情。有时来自项目，有时来自个人工作，有时来自一个月的一天，人们被允许从事任何喜欢的事情（比如谷歌的 20% 时间）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-09T12:44:35.270

对于内容管理，我们曾经使用带有[Plone](http://plone.org/)和[ZWiki的](http://zwiki.org/FrontPage)[Zope](http://www.zope.org/)服务器。我们现在使用[SharePoint 2007](http://www.microsoft.com/Sharepoint/default.mspx)。

我们还将[Jabber](http://www.jabber.org/web/Main_Page)用于 IM（我们是一个分布式团队）。IM 非常适合与团队快速分享内容，但您必须小心不要滥用它，否则您会被噪音淹没。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-09T12:49:51.093

我们将[Fogbugz](http://www.fogcreek.com/FogBugz/)用于 wiki、讨论组和特定案例的重点讨论。对于即时消息，我们使用[Sametime](http://www-01.ibm.com/software/lotus/sametime/)。事实证明，这种组合对我们来说非常强大，因为它提供了大量的功能，而不会强迫我们使用很多接口。低礼好。

注意——即时消息是我们使用的 Sametime 的唯一方面——我猜你可以做很多其他疯狂的事情，而我们完全不感兴趣。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-09T12:56:50.473

信使和电子邮件

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-01-09T12:58:21.343

我们使用[Campfire](http://www.campfirenow.com/)进行聊天，使用[Jing](http://www.jingproject.com/)进行图像和/或短视频演示。事实证明，它们是无价的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-09T12:21:38.250

我们的团队不是很大（11 名开发人员），所以我们每个月都会召开一次会议来分享知识。除此之外，我还忙于向 Intranet 添加有趣的文档。

我们经常走到对方身边问问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-09T12:33:46.183

作为一个在家工作的程序员（没有任何“去办公室”的选择）——我们的主要交流方式是私人 IRC 频道。我们是一个由 3 名开发人员组成的小型团队，因此运行良好。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-01-09T12:34:39.987

Skype 非常适合分享信息/快速提问。对于一些长期的专业知识，我们使用 Wiki。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-01-09T14:54:24.853

过去，Wiki 对我来说效果很好。我们使用了在小型 VM 上运行的免费螺丝转维基。它速度快，非常易于使用，人们似乎喜欢它，所以他们实际使用了它。

# .net - WPF v/s System.Drawing

> ID：427848
> 
> 赞同：3
> 
> 时间：2009-01-09T12:08:47.357
> 
> 标签：.net, wpf, system.drawing

我必须在.Net 中编写一个简单的控件，该控件绘制看起来像下图的几何图形，并且几何图形不会比此图像中显示的更复杂，即它将是一些填充的多边形和一些虚线。然而，这不是一个静态图像，它被绘制一次并被遗忘。几何形状的尺寸可以由用户更改，必须通过更新将其反映在绘图中。

![替代文字](https://i.stack.imgur.com/71rUA.jpg)

我的学长说我应该使用 WPF 进行绘图。我的问题是 WPF 对于这种工作是否过大， System.Drawing 就足够了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T12:25:08.150

虽然 WPF 可能确实具有绘图功能，但它确实是一个与 WinForms 完全不同的 UI 工具包。如果您最终计划将您的应用程序移植到 WPF，我可以看到使用它来绘制您的图像，但否则我真的不明白您为什么要引入 WPF 只是为了绘制一张图像。这对我来说似乎有点矫枉过正。

[您可以在MSDN](http://msdn.microsoft.com/en-us/netframework/aa663326.aspx)或[WindowsClient.net](http://www.windowsclient.net)上找到有关 WPF 的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T12:55:57.290

实际上，您不能根据是否要绘制上述内容来决定是否使用 WPF / Winform。您将能够在 System.Drawing 中毫无问题地绘制上述内容。

更有趣的是：上面的人工制品是由一些复杂的物体表示的吗？在这种情况下，您可以教 WPF 以上述方式渲染所述对象。如果您有一个程序，例如动态更改基本尺寸，那么您可以告诉 WPF，如果您更改对象中的这些值，则它的显示也必须更改。

总而言之，这两种技术是完全不同的，但是，我认为 WPF 是更完整的一种——即便如此，我个人认为 WPF 来得太早了几年，考虑到与它的可能性相比，它的采用速度有多慢。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-01-09T13:05:07.943

WPF 是标准 GUI 控件（按钮、文本框等）的新框架，但对于绘制自定义图像，特别是如果它们不是控件，它实际上与 WinForms 相同。

由于 WinForms 使用 GDI 绘制而 WPF 使用 DirectX，因此存在一些绘制差异，但对于直接绘制，两者大多是等效的。

现在，如果绘图是交互式控件，则 WPF 具有优势，因为自定义标准控件的绘图比在 WinForms 中容易得多。

那么问题就变成了，绘图有什么作用？如果您可以更改其外观，标准控件是否可以执行相同的功能？如果是这样，那么 WPF 就是您所需要的。

# windows-mobile - 如何配置 WinCE 以使用通配符 SSL 证书？

> ID：427850
> 
> 赞同：2
> 
> 时间：2009-01-09T12:10:51.517
> 
> 标签：windows-mobile, ssl-certificate, windows-ce, wildcard-subdomain

我们的 Windows CE 5.0 应用程序的通配符 SSL 证书 (*.domain.com) 存在问题 - 它不会接受它为有效的。

我了解 Windows Mobile 6.0 支持通配符证书（早期版本不支持），并且基于 WinCE 5 构建，这表明应该可以将 WinCE 5 更改为接受通配符证书（编辑 - 显然这表明我对环境，不是一个有效的假设！）。

任何人都可以建议我们如何去做吗？更改需要程序化，以便我们可以将其推广到数百个现有客户。

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T03:41:03.963

这将接受所有证书，根据需要进行修改。

System.Net.ServicePointManager.CertificatePolicy = new TrustAllCertificatePolicy();

```
public class TrustAllCertificatePolicy : System.Net.ICertificatePolicy
{
    public TrustAllCertificatePolicy()
    { }

    public bool CheckValidationResult(ServicePoint sp, System.Security.Cryptography.X509Certificates.X509Certificate cert, WebRequest req, int problem)
    {
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T14:26:57.873

为什么 WinMo 支持它们的事实表明 CE 5.0 会支持它们？您需要了解 CE 是一个模块化操作系统，平台的很大一部分是由平台 OEM 编写的。WinMo 的平台 OEM 是 WinMo 团队。WinMo 团队可能自己编写了支持并将其添加到他们的平台，就像 WinMo 中的所有 UI 元素在 vanilla CE 中不存在一样。

从历史上看，微软倾向于将 WinMo 平台中的至少*一些*特性引入之后的 CE 版本中（例如，出现在 PPC 中的 aygshell（基于 CE 3.0 和 4.2），并且只有在他们开发之后才将其包含在通用 CE 中（ 5.0）。

值得调查一下 CE 6.0 是否支持通配符证书，如果支持，请考虑迁移您的平台 BSP。如果不存在，则需要您编写（或购买）支持并将其添加到您的平台。

# sql - 查询以替换 SQL 中的逗号？

> ID：427851
> 
> 赞同：7
> 
> 时间：2009-01-09T12:12:11.747
> 
> 标签：sql

我有一张表格，列有员工、地址、城市、州和邮政编码。我已将地址、城市、州、邮政编码合并到一列“地址”，用逗号分隔每个字段。

我的问题是，如果其中一个字段为空，则会插入一个额外的逗号。例如，如果`city`为 null，则结果值将类似于`address,,state,zipcode`。我需要删除这个额外的逗号。这个怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-09T12:15:14.627

你可以使用一个`case when`构造

```
 ... = case when city is null then '' else city + ',' end 
```

如果值已经在数据库中，您可以这样替换它：

```
 UPDATE tableX SET address= replace(address, ',,', ',') 
```

执行 N 次以确保覆盖“所有字段为空”的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T12:20:49.967

或者您可以在 php 中手动执行此操作

```
<?php

$str = 'address,,state,zipcode';

$str = preg_replace('/,{2,}/i', ',', $str);
echo $str;

?> 
```

我相信你也可以用你的语言做到这一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-06-08T11:15:36.063

```
select replace(replace(replace(replace('LOKO, , , kkslksl  ',' ',''),',','<>'),'><',''),'<>',',') from dual 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-23T21:36:46.490

将字符串连接为 insert 时使用 replace ：

```
REPLACE('address,,state,zipcode', ',,' , ',' ) 
```

# c - “struct foo*”和“foo*”之间的区别，其中 foo 是一个结构？

> ID：427853
> 
> 赞同：6
> 
> 时间：2009-01-09T12:13:20.217
> 
> 标签：c, struct, typedef

在 C 中，如果 foo 是一个结构，那么写“struct foo”而不是“foo”有区别吗？

例如：

```
struct sockaddr_in sin;
struct sockaddr *sa;

// Are these two lines equivalent?
sa = (struct sockaddr*)&sin;
sa = (sockaddr*)&sin; 
```

谢谢/埃里克

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-09T12:17:01.957

事实上，在标准的“C”中，它需要指定`struct`关键字。这在 C++ 中是可选的。

这就是有些人这样定义结构的原因：

```
typedef struct foo { ... } bar; 
```

能够使用`bar`而不是`struct foo`. 但是，一些 C 编译器不强制执行此规则。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T12:17:38.350

是的。在 C（相对于 C++）中，结构位于它们自己的命名空间中。所以如果你定义了一个

```
struct sockaddr { ... } 
```

你不能用它作为

```
sockaddr s;
sockaddr *ps; 
```

为了使其合法，您可以使用 typedef 来导入类型名称的非结构命名空间：

```
typedef struct sockaddr { ... } sockaddr;
sockaddr s, *p; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T12:17:37.993

如果你 typedef 它，你可以只使用“foo”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T12:18:00.877

这取决于结构的定义方式。如果它是使用 typedef 定义的，则不必将 stuct 关键字放在前面。

```
typedef struct 
{
//
} aStruct;

aStruct abc; 
```

但如果它不是 typedef，则需要 struct 关键字。

```
struct aStruct
{
//
} ;

struct aStruct abc; 
```

# jquery - jquery 切换显示

> ID：427858
> 
> 赞同：2
> 
> 时间：2009-01-09T12:14:57.030
> 
> 标签：jquery

我想创建一个列表，并能够在点击时切换子项的显示。应该很简单，但我无法让它工作。有什么想法吗？

```
<script>
$(document).ready(function(){

    $("dt a").click(function(e){
        $(e.target).children("dd").toggle();    
    });
});
</script>
<style>
dd{display:none;}
</style>

<pre>
<dl>
    <dt><a href="/">jQuery</a></dt>
    <dd>
    <ul>
        <li><a href="/src/">Download</a></li>
        <li><a href="/docs/">Documentation</a></li>
        <li><a href="/blog/">Blog</a></li>

    </ul>
    </dd>
    <dt><a href="/discuss/">Community</a></dt>
    <dd>
    <ul>
        <li><a href="/discuss/">Mailing List</a></li>
        <li><a href="/tutorials/">Tutorials</a></li>    
        <li><a href="/demos/">Demos</a></li>
        <li><a href="/plugins/">Plugins</a></li>
    </ul>
    </dd>   
</dl>
</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T12:30:05.520

几点注意事项：

1.  “我无法让它工作”是没有问题的描述。显示什么？你做什么工作？你期望会发生什么？实际上发生了什么？
2.  如果没有 HTML 代码，这很难回答。
3.  dd 通常不是 dt 的孩子，而是兄弟姐妹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T12:35:05.197

尝试类似：

```
$("dt a").click(function(){
    $(this).parent().next("dd:first").toggle();    
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T12:27:46.990

这里有几个问题。

1.  ~~$("dt a") - 您的选择器错误，因为您没有任何“a”链接。应该是 $("dt")~~（我基于最初的格式错误的 html - 当我从源代码中得到它时，它没有链接）

2.  $(e.target).children("dd") 不正确，因为“dd”是 HTML 中 dt 的兄弟。

这是一个工作示例：

```
$(document).ready(function() {
    $("dt a").click(function(e) {
        $(e.target).parent().next().toggle();
        return false;
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T12:37:22.587

其他受访者对您的`dd`选择器不正确是正确的。 `e.target`是`a`，它只有 text 作为它的孩子，而不是`dd`你正在寻找的。正如[马克指出的那样](https://stackoverflow.com/questions/427858/jquery-toggle-display#427892) *（编辑：在他删除他的答案之前）*，你想`return false`从点击处理程序中。

我喜欢在做这类事情时使用类，因为它使代码明确且不依赖于 DOM 的结构。

像这样的东西：

```
<script>
$(document).ready(function(){

        $("dt a").click(function(e){
                // Toggle elements whose class is named by the anchor class
                $('dd.'+this.className).toggle(); 
                return false;
        });
});
</script>
<style>
dd{display:none;}
</style>

<pre>
<dl>
    <dt><a class='jQuery' href="/">jQuery</a></dt>
    <dd class='jQuery'>  <!-- Set the class name to the anchor class -->
    <ul>
        <li><a href="/src/">Download</a></li>
        <li><a href="/docs/">Documentation</a></li>
        <li><a href="/blog/">Blog</a></li>

    </ul>
... 
```

但是，如果您不关心结构的变化，[那么 tanathos 的解决方案](https://stackoverflow.com/questions/427858/jquery-toggle-display#427907)就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T10:25:09.630

```
$("#id").css("display", "none");
$("#id").css("display", "block"); 
```

# django - 保存具有多对多关系的对象

> ID：427859
> 
> 赞同：0
> 
> 时间：2009-01-09T12:14:58.560
> 
> 标签：django, django-models, many-to-many

我有模型（简化示例）：

```
class Group(models.Model):
  name = models.CharField(max_length = 32)

class Person(models.Model):
  group = models.ForeignKey(Group)

class Task(models.Model):
  group = models.ForeignKey(Group)
  people = models.ManyToManyField(Person)

  def save(self, **kwargs):
    ppl = Person.objects.all().filter(group = self.group)
    for p in ppl:
      self.people.add(p)
    super(Task, self).save(**kwargs) 
```

我想将任务分配给某些人，并添加属于该组的所有人员，以及稍后添加其他人（或从任务中删除特定人员）。显然不会执行保存，因为对象在要添加多对多关系对象时没有id。如何处理这种情况？我尝试在将人员添加到任务之前保存，然后再次保存，但没有奏效。

问候
克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T23:32:50.983

这就是我的做法。为每个任务创建一个单独的组，并可选择用另一个组初始化每个组：

```
class Person(models.Model):
    name = models.CharField(max_length=64)

class Group(models.Model):
    name = models.CharField(max_length=32)
    people = models.ManyToManyField(Person)
    parent_group = models.ForeignKey(Group, null=True, blank=True)

    def save(self, **kwargs):
        # copy parent's people in to this group if this is a new instance and parent_group is set
        if not self.id and self.parent_group:
            for p in self.parent_group.people:
                self.people.add(p)
        super(Group, self).save(**kwargs)

class Task(models.Model):
    group = models.ForeignKey(Group)

def use_case():
    Group(name='empty group').save()

    group = Group.objects.get(name='Accounting')
    accounting_subgroup = Group(name='Accounting Copy', parent_group=group)
    accounting_subgroup.people.remove(person1)
    accounting_subgroup.people.remove(person2)
    accounting_subgroup.save()

    task = Task(group=accounting_subgroup)
    task.save() 
```

现在您可以重用您的子组，此外，您可以通过检查 parent_group 是否为空来确定“基本组”是什么，例如会计和销售与“会计团队 3”。但是，大多数情况下，您不会在两个地方复制“人员列表”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T12:18:55.027

这是一个不涉及覆盖保存的[示例。](http://www.djangoproject.com/documentation/models/many_to_many/)它看起来比你正在做的更简单。

# ajax - 是否有不需要在服务器端修改的情况下轮询的 ajax 替代方案？

> ID：427861
> 
> 赞同：11
> 
> 时间：2009-01-09T12:16:41.943
> 
> 标签：ajax, html, comet, multiplayer

我正在尝试创建一个小型且基本的基于“ajax”的多人游戏。对象的坐标由 PHP“处理程序”给出。使用 ajax 每 200 毫秒轮询一次这个 handler.php 文件。

由于没有任何事情发生时不需要轮询，我想知道，有没有什么东西可以在没有频繁轮询的情况下做同样的事情？例如。Comet，虽然我听说您需要为 Comet 配置服务器端应用程序。这是一个共享的网络服务器，所以我不能这样做。

如果客户端不需要更改任何内容，可能会阻止 handler.php 文件甚至返回响应，这可能吗？然后，即使某些事情还没有改变，您仍然会让客户无用地要求响应。基本上，它应该只在需要告诉客户某些事情时才使用带宽和服务器资源，例如。物体坐标的变化。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-09T12:28:55.427

Comet 通常用于这类事情，它可能是一个脆弱的设置，因为它不是一种特别常见的技术，因此很容易不“做对”。也就是说，现在可用的资源比我 2 年前上次尝试时要多。

我不认为你可以做你想做的事情，并且 handler.php 根本不返回任何东西并停止执行：Web 服务器将保持连接打开并阻止任何进一步的轮询，直到 handler.php 执行某些操作（终止或提供输出）。当它发生时，您仍在处理响应。

您可以尝试一种长轮询技术，您的 AJAX 允许非常大的超时（例如 30 秒），并且 handler.php 旋转而不响应，直到它有要报告的内容，然后返回。（您需要确保旋转不是资源密集型的）。如果 handler.php “过期”并且没有任何反应，让它退出并让 AJAX 再次轮询。由于它仅每 30 秒发生一次，因此将是每秒约 5 次的巨大改进。这将使您的投票保持在最低限度。

但这就是彗星的设计目的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-09T12:32:08.900

由于 Ajax 只为您提供客户端服务器请求模型（通常称为 pull，而不是 push），因此从服务器获取数据的唯一方法是通过请求。然而，解决此问题的常用技术是服务器仅在有新数据时才响应。因此，客户端发出请求，服务器挂起该请求，直到发生某些事情然后回复。即使数据没有更改，这也解决了频繁轮询的需要，因为您只需要客户端在收到响应后发送一个新请求。

由于您使用的是 PHP，因此一种简单的方法可能是让 PHP 代码在检查数据更改之间一次调用 sleep 命令 200 毫秒，然后在数据发生更改时将数据返回给客户端。

编辑：我还建议对请求进行超时。因此，如果 2 秒内没有任何反应，则会发回一条“无变化”消息。这样客户端就知道服务器还活着并且正在处理它的请求。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-09T14:58:44.767

由于这被标记为“html5”： HTML5 有[`<eventsource>`](http://www.whatwg.org/specs/web-apps/current-work/#the-eventsource-element)和[WebSocket](http://www.whatwg.org/specs/web-apps/current-work/#network)，但在实践中实现方面仍处于将来时态。

Opera 实现了一个旧版本`<eventsource>`的`<event-source>`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-01-11T20:06:49.133

这是一个解决方案 - 使用 SaaS comet 提供商，例如[WebSync On-Demand](http://www.frozenmountain.com/websync)。无需担心服务器资源，无论是否共享托管，因为它都已卸载，您可以根据需要推送信息。

由于它是 SaaS，因此可以使用任何服务器语言。对于 PHP，已经有一个已经编写好的发布者准备好了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T12:25:33.077

服务器必须参与其中。请与托管服务提供商核实可用的模块。或者尝试说服他们支持彗星。

也许您应该为此考虑使用小型虚拟专用服务器 (VPS)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T15:37:51.660

在长轮询建议中添加一件事：如果您在共享服务器上，此解决方案将具有有限的可扩展性，因为每个活动的长轮询将保持连接（以及为该连接提供服务的服务器端进程）处于活动状态。您的提供商很可能对您一次可以打开的连接数量有限制（策略定义的或事实上的），因此如果您的会话/窗口多于同时播放的会话/窗口，您将碰壁。

# linq - 刷新 Listview 和 ComboBox 之间的数据绑定问题

> ID：427880
> 
> 赞同：1
> 
> 时间：2009-01-09T12:24:16.933
> 
> 标签：linq, data-binding, refresh

我正在努力解决 WPF/Silverlight 中的绑定问题。我有一个 Listview 女巫，由 EF linq 查询的 DataContext 填充。在同一个用户控件中是文本框。更改它们的值时，列表视图会刷新，并且数据会在 de db bij .SaveChanges 中更改。问题是，如果我使用组合框，则会保存数据，但不会更新列表视图。

你能帮上忙吗？？？这是xml

```
 <ListView Grid.Row="1" Grid.Column="0"  Margin="4,4,4,0" x:Name="controlsListBox" Grid.RowSpan="7" ItemsSource="{Binding}" SelectedValuePath="ID" LostFocus="controlsListBox_LostFocus">
        <ListView.View>
           <GridView>
              <GridViewColumn Width="25" Header="Rw" DisplayMemberBinding="{Binding RowNr}"/>
              <GridViewColumn Width="25" Header="Cl" DisplayMemberBinding="{Binding ColumnNr}"/>
              <GridViewColumn Width="100" Header="Name" DisplayMemberBinding="{Binding Name}"/>
              <GridViewColumn Width="25" Header="Tb" DisplayMemberBinding="{Binding TabIndex}"/>
              <GridViewColumn Width="100" Header="Type" DisplayMemberBinding="{Binding ControlTypes.Name}"/>
              <GridViewColumn Width="100" Header="Text" DisplayMemberBinding="{Binding TextResources.Text}"/>
           </GridView>
        </ListView.View>
     </ListView>

     <Label Grid.Row="2" Grid.Column="5" Height="23" Margin="4,4,4,0" x:Name="rowSpanLabel" VerticalAlignment="Top"
            Content="RowNr"/>
     <TextBox Grid.Row="2" Grid.Column="6" Height="23" Margin="4,4,4,0" x:Name="rowSpanTextBox" VerticalAlignment="Top" 
              Text="{Binding Path=SelectedItem.RowNr, ElementName=controlsListBox}"/>

     <Label Grid.Row="4" Grid.Column="1" Grid.ColumnSpan="2" Height="23" Margin="4,4,4,0" x:Name="controlTypeLabel" VerticalAlignment="Top"
            Content="Type"/>
     <ComboBox Grid.Row="4" Grid.Column="2" Grid.ColumnSpan="5" Height="23" Margin="4,4,4,0" x:Name="controlTypeComboBox" VerticalAlignment="Top"
               DataContext="{Binding  Path=ControlTypes, ElementName=controlsListBox}" IsSynchronizedWithCurrentItem="True" DisplayMemberPath="Name"
               SelectedItem="{Binding Path=SelectedItem.ControlTypes, ElementName=controlsListBox, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
               /> 
```

这里是 C# 代码：_controlProperties.Clear(); var data = (from x in _dataContext.ControlProperties where x.FormProperties.ID == 1 orderby x.RowNr, x.ColumnNr, x.Name select x); foreach (var item in data) { item.TextResourcesReference.Load(); _controlProperties.Add(项目); } // DataContext 必须首先设置为 null 以获得良好的结果。控件列表框.DataContext = null; 控件列表框.DataContext = _controlProperties;

```
 controlTypeComboBox.DataContext = (from c in _dataContext.ControlTypes
                                        orderby c.Name
                                        select c).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-09T16:21:03.603

您正在设置 ComboBox 的 DataContext，而不是 ItemsSource。在代码中，您通过提供控件类型列表来覆盖该 DataContext，因此无论如何都会忽略 XAML 的一部分。

删除 DataContext 声明并改用它：

```
ItemsSource="{Binding}" 
```

这应该会导致控件类型出现在组合框中。当我这样做时，选定的控件类型会显示在列表视图中。

您可能还想查看[Update Controls .NET](http://codeplex.com/updatecontrols)，这是我的 WPF 数据绑定的开源替代方案。它需要一些簿记超出绑定类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-23T18:54:56.317

感谢你的回答。我刚刚更改了代码以使用具有可观察集合的业务层类。现在一切正常。我仍然想知道直接绑定到 linq 查询是否会正常工作。

# silverlight - 我可以将 Silverlight 2.0 项目添加到我的 Web 应用程序并仍然以 .NET Framework 2.0 为目标吗？

> ID：427887
> 
> 赞同：0
> 
> 时间：2009-01-09T12:28:10.920
> 
> 标签：silverlight, visual-studio-2008, .net-2.0, multi-targeting

我可以将新的 Silverlight 2.0 项目添加到我的 ASP.NET 2.0 Web 应用程序中，并且仍然以 Visual Studio 2008 中的 .NET Framework 2.0 为目标吗？

[ScottGu在他关于多目标的帖子](http://weblogs.asp.net/scottgu/archive/2007/06/20/vs-2008-multi-targeting-support.aspx)中没有提到 Silverlight 。

Michael Scwartz 关于[Silverlight 与 Visual Studio .NET 2005](http://weblogs.asp.net/mschwarz/archive/2007/06/04/silverlight-with-visual-studio-net-2005.aspx)和[如何使用记事本创建 Silverlight 应用程序](http://weblogs.asp.net/mschwarz/archive/2007/06/05/how-to-create-silverlight-applications-with-notepad.aspx)的帖子指的是 VS2005 或 Silverlight 1.1（即 pre-RTM）。

有没有其他人试过这个？

**[更新]**

现在我已经升级了我开始使用 Silverlight 控件的 Web 项目......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T12:35:06.913

目标是每个项目，没有理由不能在同一解决方案中包含针对不同框架的多个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T16:20:13.230

是的你可以。由于 Silverlight 仅在客户端上运行，因此您可以使用对象标记调用 Silverlight 插件：

```
<object width="300" height="300"
    data="data:application/x-silverlight," 
    type="application/x-silverlight-2" >
    <param name="source" value="SilverlightApplication1.xap"/>
</object> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T17:56:14.160

Michael 关于使用对象标签是正确的，但您还需要做另外两件事：

*   在 Silverlight 项目中使用 Post-Build 步骤将构建的 xap 文件复制到您的 Web 项目（因为 Silverlight 链接不适用于 ASP.NET 2.0 项目）。
*   将 Siverlight.js 文件添加到对象标记页面以获得更好的就地安装和插件检测。

# sql-server-ce - 如果 Sql Compact 允许多个连接，为什么我会收到文件共享错误？

> ID：427888
> 
> 赞同：6
> 
> 时间：2009-01-09T12:28:39.593
> 
> 标签：sql-server-ce, database-connection

[在这里](http://msdn.microsoft.com/en-us/library/cc645984.aspx)，据说 Sql Server Compact 最多允许 256 个连接。

但是当我尝试打开 2 个连接时，我收到一个文件共享错误。我该如何解决这个问题？

```
SqlCeConnection c1 = new SqlCeConnection("Data Source=testDB.sdf;Encrypt Database=True;Password=test;File Mode=shared read;Persist Security Info=False;");
SqlCeConnection c2 = new SqlCeConnection("Data Source=testDB.sdf;Encrypt Database=True;Password=test;File Mode=shared read;Persist Security Info=False;");
c1.Open();
c2.Open(); // throws SqlCeException
c1.Close();
c2.Close(); 
```

*存在文件共享冲突。不同的进程可能正在使用该文件。[testDB.sdf]*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-13T09:52:48.907

这是一个连接字符串问题。

```
File Mode=Read Write 
```

解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T09:21:06.447

在调查这个问题时，我找到了一些资源和这篇文章。也许有人会需要它，所以我把找到的东西留在这里。

[按照 MSDN 的说法](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlceconnection.connectionstring%28v=vs.85%29.aspx)，如果没有`File Mode`分配，则`Read Write`默认使用。

而且，如果需要打开一个`Read Only`数据库，[这篇文章说应该分配两个参数](https://stackoverflow.com/questions/11289355/open-sql-server-ce-database-data-from-read-only-file-system/11289707#11289707)。一个是`File Mode`，一个是`Temp Path`。

# asp.net - 使用 asp.net 和 webservices 识别用户的距离有多近

> ID：427891
> 
> 赞同：0
> 
> 时间：2009-01-09T12:30:32.757
> 
> 标签：asp.net, web-services, privacy

任务很简单，答案可能很多。但这里是：在我的网站上，我将创建一个 InfoAboutYou.aspx 页面。到目前为止，我得到了 IP 和浏览器名称和版本，但我不想扩展，我可以查找关于当前用户/IP 和他的浏览器/操作系统的几乎所有内容它是否存在任何可以查找更多信息的免费 Web 服务关于特定IP？

这个想法是看看一个随机用户可以有多具体

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T12:38:16.890

您可以使用各种服务来确定地理位置。

一个例子是：-

[http://www.ipgeo.com/](http://www.ipgeo.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T16:11:08.863

您可以通过使用 JavaScript 来确定很多事情，并将其发送回服务器，就像 Google Analytics 所做的一些统计数据一样。您可以确定屏幕尺寸等。

# java - 在 Java 中使用枚举作为单例的最佳方法是什么？

> ID：427902
> 
> 赞同：86
> 
> 时间：2009-01-09T12:32:58.913
> 
> 标签：java, singleton

基于 SO 问题[Best Singleton Implementation In Java](https://stackoverflow.com/questions/70689/best-singleton-implementation-in-java) - 即关于使用枚举创建单例 - 之间的区别/优点/缺点是什么（省略了构造函数）

```
public enum Elvis {
    INSTANCE;
    private int age;

    public int getAge() {
        return age;
    }
} 
```

然后打电话`Elvis.INSTANCE.getAge()`

和

```
public enum Elvis {
    INSTANCE;
    private int age;

    public static int getAge() {
        return INSTANCE.age;
    }
} 
```

然后打电话`Elvis.getAge()`

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2009-01-09T12:39:01.630

假设您要绑定到将使用它给定的任何对象的属性的东西 - 您可以非常轻松地传递 Elvis.INSTANCE，但您不能传递 Elvis.class 并期望它找到该属性（除非它被故意编码为找到类的静态属性）。

基本上，您只在*需要*实例时才使用单例模式。如果静态方法适合您，那么只需使用这些方法，不要打扰枚举。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2009-01-09T14:05:37.680

一个很大的优势是当你的单例必须实现一个接口时。按照你的例子：

```
public enum Elvis implements HasAge {
    INSTANCE;
    private int age;

    @Override
    public int getAge() {
        return age;
    }
} 
```

和：

```
public interface HasAge {
    public int getAge();
} 
```

它不能用静态来完成......

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-09T12:57:30.847

（有状态的）单例通常用于假装不使用静态变量。如果您实际上不使用公共静态变量，那么您将愚弄更少的人。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-07-19T11:16:08.337

我会选择最简单和最清晰的选项。这有点主观，但如果你不知道什么是最清楚的，那就选择最短的选项。

# vb.net - 将第一个字节存储为来自网络流的字符串

> ID：427909
> 
> 赞同：0
> 
> 时间：2009-01-09T12:36:16.037
> 
> 标签：vb.net

我需要将从网络流中读取的数据的第一个字节存储为字符串，以便稍后调用它。

```
prinf("     While 1
        Dim tcpListener As New TcpListener(IPAddress.Any, 80) ' Listen to port given
        Console.WriteLine("Waiting for connection...")
        tcpListener.Start()
        'Accept the pending client connection and return  'a TcpClient initialized for communication. 
        Dim tcpClient As TcpClient = tcpListener.AcceptTcpClient()
        Console.WriteLine("Connection accepted.")
        ' Get the stream
        Dim networkStream As NetworkStream = tcpClient.GetStream()
        ' Read the stream into a byte array
        Dim bytes(tcpClient.ReceiveBufferSize) As Byte
        networkStream.Read(bytes, 0, CInt(tcpClient.ReceiveBufferSize))
        ' Return the data received from the client to the console.
        Dim clientdata As String = Encoding.ASCII.GetString(bytes)
        Console.WriteLine(("Client Sent: " + clientdata))
        ' Return the data received from the client to the console.
        Dim responseString As String = "Hello"
        'Dim chat_name As String = "Name"
        Dim sendBytes As [Byte]() = Encoding.ASCII.GetBytes(responseString)
        networkStream.Write(sendBytes, 0, sendBytes.Length)
        Console.WriteLine(("Response: " + responseString))
        tcpClient.Close() 'Close TcpListener and TcpClient
        tcpListener.Stop()
    End While"); 
```

那是我的服务器^一切正常，但我需要存储读取的第一条数据，例如如果我得到“名称”，它应该存储在一个数组中

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T12:42:21.657

您需要准确定义“第一条数据”的含义 - 此数据是否以某种形式分隔（如 HTTP 标头 - 键/值对由回车换行符分隔）？长度前缀（如指定 Content-Length 标头时的 HTTP 正文）？您几乎可以肯定不只是想要第一个字节。

如果您希望只发送名称然后发送其他内容，而没有任何迹象表明它们是不同的数据位，您会感到失望。流只是字节序列 - 没有什么（内置）可以说“读取客户端在他们的第一个 API 调用中发送的内容”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-11T07:09:02.140

这应该有效：

```
Dim strFirstByte as string = vbNullString
While 1
   ' ... Your code ...

    Dim bytes(tcpClient.ReceiveBufferSize) As Byte
    networkStream.Read(bytes, 0, CInt(tcpClient.ReceiveBufferSize))
    If strFirstByte = vbNullString Then strFirstByte = bytes(0).ToString("X2")

    ' ... The rest of your code ...
End While 
```

# eps - 如何以编程方式操作 EPS 文件

> ID：427920
> 
> 赞同：6
> 
> 时间：2009-01-09T12:39:19.180
> 
> 标签：eps

我正在寻找有助于以编程方式操作 EPS（封装 PostScript）文件的库。基本上，我想做的是：

*   在 EPS 文件中显示/隐藏预先存在的图层（打开和关闭它们）
*   在 EPS 文件中填充（颜色）命名形状
*   检索 EPS 文件中命名点的坐标
*   在 EPS 文件的新图层上绘制形状
*   在服务器上，没有用户交互（脚本 Adob​​e Illustrator 不起作用）

我知道 EPS 文件格式是如何基于 PostScript 语言的，因此必须对其进行解释 - 对于从头开始创建简单的绘图来说，这相当容易。但是对于实际修改现有文件，我想您需要一个解释文件并提供某种“DOM”进行操作的库。

我什至可以在 EPS 文件中命名形状和点吗？

**编辑：**假设我将图层保存在单独的 EPS 文件中。或者更好的是：只是图层的“数据”部分。然后我可以连接这些东西来创建一个新的 EPS 文件吗？并附加绘图命令？填充现有的命名对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-18T12:34:29.103

这是非常困难的，原因如下：PS 文件是一个程序，其执行会导致页面上的像素。PS 程序中的指令处于“使用当前笔和颜色画线”或“将坐标系旋转 90 度”的级别，但没有图层或复杂对象的概念，就像您在矢量图中看到的那样应用。

PS 文件的结构中很少有约定允许外部程序修改它们：页面单独标记，字体资源和媒体尺寸在特殊注释中拼写出来。对于必须遵循这些准则的嵌入式 Postscript (EPS) 尤其如此，因为它们旨在由应用程序读取，但不适用于一般 PS，因为它被发送到打印机。PS 程序的抽象级别比您需要的要低得多，现在可以为任意 PS 代码重构它。原则上，PS 文件每次打印时都会产生不同的输出，因为它可能会根据随机决策查询其执行环境和分支。

Applications like Adobe Illustrator emit PS code that follow a rigid structure. There is a chance that these could be parsed and manipulated without interpreting the code. I would stil suggest to rethink the current architecture: you are at a too low level of abstraction for what you need.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T13:23:38.967

PDF 不可操作，因为无法更改 pdf 的任何现有部分（通常）只能添加内容。EPS 与 PostScript 相同，只是它有一个边界标题。

做你想做的事情的问题是 PS 是一种编程语言，其输出（大部分）是某种图像。所以问题可以表述为“如何在 Java 文件的新层上绘制形状”。您可能需要即时生成完整的 PS，或者完全使用其他图像格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T12:53:34.940

我不知道有任何可用的库，但您可以基于Ghostscript/ [GSview中的 epstool 构建一些东西来满足您的需求](http://pages.cs.wisc.edu/~ghost/gsview/epstool.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T13:06:34.493

我认为您最好的选择是从 EPS 生成 PDF，然后操作 PDF。然后回到EPS。PDF 比 EPS 更“可操作”。

# xml - 如何从 XML 文档中删除所有文本

> ID：427926
> 
> 赞同：1
> 
> 时间：2009-01-09T12:44:06.847
> 
> 标签：xml, xslt

如何删除所有文本，但保持结构完整？

例如：

```
<animals>
  <animal id="1">
    <type>cat</type>
    <food>
      <fav>miauwmjam</fav>
      <quantity unit="day">50g</quantity>
    </food>
  </animal>
</animals> 
```

转化成

```
<animals>
  <animal id="">
    <type></type>
    <food>
      <fav></fav>
      <quantity unit=""></quantity>
    </food>
  </animal>
</animals> 
```

所以属性值也是空的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T13:06:57.300

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <!-- copy all nodes -->
  <xsl:template match="node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- clear attributes -->
  <xsl:template match="@*">
    <xsl:attribute name="{name()}" />
  </xsl:template>

  <!-- ignore text content of nodex -->
  <xsl:template match="text()" />

</xsl:stylesheet> 
```

# c++ - 将 HTML 转换为 PDF 的 C++ 库？

> ID：427927
> 
> 赞同：5
> 
> 时间：2009-01-09T12:44:19.373
> 
> 标签：c++, html, pdf

我正在寻找一个 C/C++ 库来将 HTML（实际上是 XHTML + CSS）文档转换为 PDF。

它用于商业用途，来源会很好但不是必需的。

有人有任何建议或经验吗？

更新：为了澄清，我只针对 Windows 平台。我正在使用 Borland C++ Builder 2006 进行开发，但该库不必是 VCL 组件。

提前谢谢了。

史蒂夫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T08:19:34.383

为此，我已成功使用 wkhtmltopdf。使用 webkit，可以从命令行调用或作为静态库调用。它很棒而且使用简单。

[wkhtmltopdf 网站](http://wkhtmltopdf.org/)

开源（LGPL）并且免费！

希望它可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T12:50:28.893

CLI 应用程序会这样做吗？如果我没有记错的话，GNU Ghostscript 有实用程序**html2ps**和**ps2pdf**。来源也应该可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T14:58:01.133

这可能是矫枉过正，但用于渲染的[WebKit和后端的](http://webkit.org)[Cairo](http://cairographics.org)可以做到这一点。不过，WebKit 是一个相当大的库。

如果您正在寻找预制的东西，我在快速搜索后找到了[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)。它使用 WebKit 和 Qt 进行渲染，这是甚至更大的库组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-13T14:27:51.347

为了解决这个问题，我已经评估了[VisPDF](http://www.vispdf.com/)和[PDFDoc Scout](http://bytescout.com/pdfdocscout.html)，并且可能会使用 PDFDoc Scout，因为它可以格式化 HTML 输入。

感谢大家的意见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-06-28T17:07:22.490

我尝试[了 HotPDF 库](http://www.loslab.com/HotPDF.html)，它易于使用且足够好。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-01-09T13:22:47.503

[CutePDF](http://www.cutepdf.com/)是一款免费的 PDF 编写器，可用作虚拟打印机。我猜你可以将它与任何可以呈现你的 HTML 的东西结合使用。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2009-01-12T09:24:03.160

看看 PrinceXML。

它绝对是目前最好的 HTML/CSS 到 PDF 转换器，尽管它不是免费的（但是，您的编程也不是免费的，所以如果它可以为您节省 10 个小时的工作时间，那么您就可以免费回家了。）

哦，是的，我有没有提到这是第一个（也可能是唯一一个）执行完整[ACID2](http://princexml.com/samples/acid2/acid2.pdf)的 HTML2PDF 解决方案！？！？！

[http://princexml.com/samples/](http://princexml.com/samples/)

# c# - C# 库中的内部构造函数

> ID：427941
> 
> 赞同：1
> 
> 时间：2009-01-09T12:49:42.670
> 
> 标签：c#, inheritance

我正在用 C# 编写一个数据访问库，我的数据模型类的结构如下（在 DataAccess 程序集中）：

```
public abstract class DataModel {...} (protected constructor)
public abstract class DataClass {...} (protected constructor)
public abstract class DataField {...} (protected constructor)
public class IntegerField : DataField
{
   public IntegerField(DataClass cls, string name, bool isNullable, 
                       int? defaultValue, int? minValue, int? maxValue) {...}
}
public class StringField : DataField
{
   public StringField(DataClass cls, string name, bool isNullable, 
                      string defaultValue, int maxLength) {...}
}
public class BooleanField : DataField
{
   public BooleanField(DataClass cls, string name, bool isNullable, 
                       bool? defaultValue) {...}
}
... 
```

如您所见，每个字段都有不同的构造函数。

要使用它，您可以从 XML 文件自动生成类，例如，“Store”数据模型，其中包含“Customer”数据类和“Employee”数据类将生成以下代码：

```
public class StoreDataModel : DataModel
{
   public CustomerDataClass Customer { get; private set;}
   public EmployeeDataClass Employee { get; private set;}
   public StoreDataModel()
   {
     Customer = new CustomerDataClass(this);
     AddClass(customer)
     Employee = new EmployeeDataClass(this);
     AddClass(employee)
   }
}
public class CustomerDataClass : DataClass
{
   public StringField FirstNameField { get; private set; }
   public StringField LastNameField { get; private set; }
   public DateField BirthDateField { get; private set; }

   public CustomerDataClass(StoreDataModel model) : base(model)
   {
      FirstNameField = new StringField(this, "FirstName", true, null, 50);
      LastNameField = new StringField(this, "LastName", true, null, 50);
      ...
   }
}
public class EmployeeDataClass : DataClass {...} 
```

我对这段代码的问题是，由于生成的代码与基本数据模型类位于不同的程序集中，因此 StringField/IntegerField/... 类必须具有公共构造函数，这意味着数据访问程序集之外的任何人都可以创建它们的实例我想阻止这种情况。

由于字段类有不同的构造函数，我想不出一种方法来使用反射或泛型在基本数据访问程序集中创建字段。

我能想到的唯一方法是向每个字段类添加一个“初始化”方法，该方法将包含该特定字段的属性，并在自定义数据类构造函数中执行以下操作：

```
 public CustomerDataClass(StoreDataModel model) : base(model)
   {
      FirstNameField = AddField<StringField>(this, "FirstName", true, null)
                              .Initialize(50);
      LastNameField = AddField<StringField>(this, "LastName", true, null)
                              .Initialize(50);
      ...
   } 
```

这将允许我将字段构造函数更改为内部，并且不允许任何人创建字段的实例。这个解决方案的问题是它允许任何人运行“Initialize”方法并改变字段（这可以通过添加一个私有布尔成员（m_IsInitialized）来解决，该成员将在“Initialize”第一次运行时设置为true，并且每次调用“Initialize”时，如果m_IsInitialized为真，就会抛出异常，不过这个解决方案有点难看）。

有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T12:55:33.953

好吧，三个选项：

*   使用 InternalsVisibleTo 使构造函数可见
*   在 StringField 等中编写静态方法来创建实例
*   在 DataModel 或 DataClass 中编写受保护的方法来创建字段实例（因此 CustomerDataClass 可以调用 DataClass.CreateStringField 等）

但是，我不知道这些是否可以接受，因为我不清楚为什么您不希望字段类具有公共构造函数。

# c# - IIS HttpModule 无法设置会话

> ID：427951
> 
> 赞同：1
> 
> 时间：2009-01-09T12:53:33.083
> 
> 标签：c#, asp.net, iis

我正在尝试使用 IHttpModule 设置会话值。我已将 HttpModule 设置为用于所有请求，而不仅仅是托管/ASPX 页面。

然而，我发现，当一个非 ASP.NET 页面的请求进入（例如 gif）时，HttpApplication 的 Session 成员会抛出异常或为空。

我发现以下 SO 帖子背后的原因：[link](https://stackoverflow.com/questions/276355/can-i-access-session-state-from-an-httpmodule)

当我用实现 IRequiresSessionState 的 HttpHandler 替换 HttpHandler 时，Session 成员在 HttpModule 中可用，并且 Set-Cookie 被发送回浏览器，但后来当我尝试在普通 ASPX 页面中读取会话的内容时我设置的值都不存在。调试时，我可以看到 HttpModule 和普通 ASPX 页面中的 SessionID 相同。

我需要做任何事情来强制保存会话吗？我假设在交换假 HttpHandler 初始化会话时，必须将未实现 IRequiresSessionState 的原始文件放回会导致会话在请求结束时无法保存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T13:40:07.653

我刚刚解决了，我不得不将原始 HttpHandler 的重新映射从 PostAcquireRequestState 移动到 PreRequestHandlerExecute。

# c# - 使用 HTTPS 的 WCF 会话

> ID：427954
> 
> 赞同：8
> 
> 时间：2009-01-09T12:53:57.967
> 
> 标签：c#, wcf, https, iis-6

我无法弄清楚如何在使用 HTTPS 时为我的 WCF 服务启用每会话实例。（我不是 ASP.NET 专家，但如果可能的话，我不想使用 ASP.NET 会话状态。）我正在使用 .NET Framework 3.0。

我已经得出以下矛盾，并希望有人能告诉我逻辑上的缺陷在哪里。

1) 由于客户端要求，该服务必须托管在 IIS 6 上。

2）服务需要维护调用之间的状态，包括SqlConnection和SqlTransaction实例（丑陋但由于项目限制是必要的）。

3）因此我需要使用wsHttpBinding。

4) 服务需要能够从 HttpContext.Current.User.Identity 访问用户身份验证信息（例如，在 IIS 中使用 Windows 安全性）。

5) 因此需要 HTTPS。

6) 因此必须在绑定上配置传输级安全性。

7) 将服务配置为需要会话意味着我必须将 wsHttpBinding 配置为使用可靠会话。

8) 这需要在绑定上配置消息级安全性。

即（6）和（8）是互斥的。

似乎使用 WCF 会话需要我使用消息级安全性，这会阻止我使用 HTTPS。

我错过了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-13T22:28:20.737

3) **True** , **wsHttpBinding**和**wsDualHttpBinding**是唯一支持会话的 HTTP 绑定

5) **False**，为了对服务调用者进行身份验证，您不一定需要任何传输级别的安全性（例如 SSL/HTTPS）。唯一的要求是配置 IIS 以启用虚拟目录的**集成 Windows 身份验证**。然后在 WCF 中，您有三种可能性来启用此方案：

a) 在带有 Windows 凭据 (HTTPS) 的 wsHttpBinding 上使用传输级安全性

```
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="SecurityEnabledWsHttp">
                <security mode="Transport">
                    <transport clientCredentialType="Windows" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
</system.serviceModel> 
```

b) 在带有 Windows 凭据 (HTTP) 的 wsHttpBinding 上使用消息级安全性

```
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="SecurityEnabledWsHttp">
                <security mode="Message">
                    <message clientCredentialType="Windows" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
</system.serviceModel> 
```

c) 在**ASP.NET 兼容模式**下运行您的服务并在 ASP.NET (HTTP) 中启用**Windows 身份验证**

```
<system.web>
    <authentication mode="Windows" />
</system.web> 
```

请注意，在**a**和**b**中，您将通过以下方式从服务中访问调用者的身份：

```
OperationContext.Current.ServiceSecurityContext.WindowsIdentity 
```

6) **True**，必须在 wsHttpBinding 上启用传输级安全性才能使用 HTTPS

7) **False** , **Reliable Sessions**是用于 WCF 会话的**可靠消息传递**的特定实现。Reliable Messaging 是一种 WS-* 标准规范，旨在保证在不可靠的网络上传递消息。您可以在没有可靠消息传递的情况下使用 WCF 会话，反之亦然。使用此属性在服务合同上启用会话：

```
[ServiceContract(SessionMode=SessionMode.Required)]
public interface IMyService {
    // ...
} 
```

还要记住，为了维护服务调用之间的状态，您必须明确地在服务合同实现上启用适当的实例模式：

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.PerSession)]
public class MyService : IMyService {
    // ...
} 
```

WCF 中有两种会话：**安全会话**和**可靠会话**。**wsHttpBinding**和**netTcpBinding**的默认设置是使用安全会话。
对于 wsHttpBinding，这是通过使用客户端的凭据（这是绑定的**默认设置）以****消息级安全性完成的。**而对于 netTcpBinding，会话是使用 TCP 协议的工具在传输**级别建立的。** 这意味着只需切换到 wsHttpBinding 或 netTcpBinding 即可启用对 WCF 会话的支持。 另一种方法是使用**可靠会话** ******. 这必须在绑定配置中显式启用，并消除对 wsHttpBinding 使用消息安全性的要求。所以这将起作用：******

 ******```
<bindings> 
    <wshttpbinding> 
        <binding name="ReliableSessionEnabled"> 
            <reliablesession enabled="True" ordered="False" /> 
            <security mode="None" /> 
        </binding> 
    </wshttpbinding> 
</bindings> 
```

8) **False** , Reliable Sessions 独立于通信通道的安全设置使用。

有关更详细的说明，请查看[这篇文章](http://www.pluralsight.com/community/blogs/aaron/archive/2006/02/27/19253.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-25T09:17:40.970

遵循 Enrico 的出色回答，这些是我正在使用的配置：

服务：

```
<services>
    <service name="Foo.Bar.Service">
        <endpoint name="EndpointHttps"
            address=""
            binding="customBinding" bindingConfiguration="EndpointHttps"
            contract="Foo.Bar.IService" />
    </service>
</services>
<bindings>
    <customBinding>
        <binding name="EndpointHttps">
            <reliableSession />
            <mtomMessageEncoding />
            <httpsTransport />
        </binding>
    </customBinding>
</bindings> 
```

客户：

```
<client>
    <endpoint name="EndpointHttps"
        address="https://server/FooBar/service.svc"
        binding="customBinding" bindingConfiguration="EndpointHttps"
        contract="Foo.Bar.IService" />
</client>
<bindings>
    <customBinding>
        <binding name="EndpointHttps">
            <reliableSession />
            <mtomMessageEncoding />
            <httpsTransport />
        </binding>
    </customBinding>
</bindings> 
```

注意：尽管如此，它仍然无法与 Windows 身份验证一起使用。

# command-line - Flex 命令行编译器功能

> ID：427957
> 
> 赞同：3
> 
> 时间：2009-01-09T12:55:09.603
> 
> 标签：command-line, flex3, mxmlc, apache-flex

尽管[Flex](http://en.wikipedia.org/wiki/Adobe_Flex)命令行编译器 (mxmlc) 可以将[MXML](http://en.wikipedia.org/wiki/MXML) + [ActionScript](http://en.wikipedia.org/wiki/ActionScript)文件编译为[SWF](http://en.wikipedia.org/wiki/SWF)，但我需要通过命令行开关具体了解它的功能。

*   配置您编写的**语言，** *ActionScript 2 / 3*
*   配置您的目标**[Flash Player](http://en.wikipedia.org/wiki/Adobe_Flash_Player)***版本， 7 / 8 / 9 / 10*
*   配置电影的哪些**帧**，包含哪些 ActionScript 代码。

一篇[涵盖 Mxmlc](http://disruption.ca/archives/actionscript-and-mxmlc/)的文章，[介绍了 Flex SDK。](http://www.gamedev.net/reference/programming/features/flex/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T13:30:17.957

```
$> mxmlc --help 目标播放器

-target-player <版本>
    指定应用程序所针对的播放器版本。
    需要更高版本的功能将不会编译到
    应用。支持的最小值是“9.0.0”。
```

您不能定义语言 afaik - mxmlc 版本 3 只是一个 actionscript 3 编译器。可能有一些向后兼容性，但它不是组合的 AS2 和 3 编译器。

我什至不确定您的第三点实际上是什么意思，或者实际上您的总体要求是什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T20:05:19.750

虽然不是您问题的直接答案，但有趣的是，MXMLC 的以下参数将允许您编写 AS1 样式的代码：

```
-strict=false -as3=false -es=true 
```

使用这些参数，您将能够再次通过原型进行扩展，并且编译器不会使用严格模式。这是一种“扩展”语言并使用 AS3 通常不使用的类似 JS 的功能的有趣方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T14:45:27.850

使用 flex 编译器与在 flash 中制作东西不同，您不需要将特定代码放入特定框架中。无论如何，Flex 应用程序只有 2 帧。

如果您希望为 AS2 编译代码，那么您需要使用为 flex 2 构建的 mxmlc，如果您使用的是最新的 mxmlc，那么它会为 AS3 编译。

如果您在 AS3 中编码，那么您必须以 flashplayer 9 或更高版本为目标。

# c# - 面板滚动刷新慢

> ID：427960
> 
> 赞同：2
> 
> 时间：2009-01-09T12:55:56.607
> 
> 标签：c#, winforms

我正在开发一个项目所需的用户控件，该控件有大约 13 行、7 列文本框、组合框......表单上的所有内容都可自动滚动。问题是在滚动内容刷新时执行时间非常慢。有什么想法？

使用 datagridview 不是一种选择。

编辑：

我应该更具体地说，13 行控件在用户控件中。我已将 uc 的 doublebuferred 属性更改为 true，我无法更改子控件，因为它们都是标准文本和组合框，所以没有这样的属性。在主窗体中，我在自动滚动面板内动态创建了大约 7 个用户控件，问题来自于滚动面板，刷新非常慢。是的，我也不相信winforms会这么糟糕。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-09T20:39:36.107

是否也有任何子控件自定义控件？也许其中一个绘图例程存在一个问题，当它们中有一些时并不那么明显，但真的很疼？垃圾邮件事件的任何处理程序（例如 mouseMove）在容器控件的处理程序中做得太多？

当您点击 91 个控件时，我很难相信 WinForm 会在现代 PC 上掉下来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T20:52:06.503

您需要将用户控件和所有子控件设置为双缓冲。(control.DoubleBufferred = true)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T12:56:55.013

尝试`DoubleBuffered = true`在 UserControl 的构造函数中使用。

# vb6 - VB6 ADO 连接池

> ID：427966
> 
> 赞同：4
> 
> 时间：2009-01-09T12:57:27.633
> 
> 标签：vb6, ado, connection-pooling

我们公司有一堆 VB6 应用程序。我们正在尝试调试随机 SQL 超时错误，并使用 SQL Server Profiler 对 Audit Login 事件进行跟踪。我们注意到连接是非池化的。我们将 SQLOLEDB 提供程序与 SQL Server 2000 和 2005 一起使用。我搜索了互联网，我遇到的所有内容都说默认情况下连接在 SQLOLEDB 提供程序中汇集，但我们没有看到这一点。下面是我们用来连接数据库的代码。我们确实需要将这些连接池化，因为我们认为这可能是我们的随机超时错误的问题。任何人都可以阐明为什么连接池不起作用以及使它起作用的任何方法吗？谢谢。

```
Dim cnn As New ADODB.Connection
cnn.ConnectionString = "Provider=SQLOLEDB;Data Source=xxx;Catalog=xxx;User ID=xxx Password=xxx;"
Call cnn.Open
Dim cmd As New ADODB.Command
Set cmd.ActiveConnection = cnn
cmd.CommandText = "SELECT * FROM [Table]"
Dim rs As New ADODB.RecordSet
Call rs.Open(cmd, , adOpenStatic, adLockOptimistic)
While Not rs.eof
    'Do stuff
    Call rs.MoveNext
Wend
'Close and Dispose connection here 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T13:29:25.540

在每次调用时处理连接可能会阻止池

> ...至少为每个唯一用户实例化一个 Connection 对象实例——始终如此。否则，当该字符串的最后一个 Connection 对象关闭时，池将被销毁。

[http://msdn.microsoft.com/en-us/library/ms810829.aspx](http://msdn.microsoft.com/en-us/library/ms810829.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T19:04:53.130

我搞砸了，在应用程序启动时打开了一个连接，并在应用程序运行的整个过程中保持打开状态。连接池确实在第二个打开和关闭的连接之后开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T19:40:00.657

您提到您正在尝试追踪随机超时问题。我也有同样的情况，通常是当我做一个返回很多行的 SELECT 时。两件事情：

```
Cnn.CursorLocation=ADODB.adUseServer 
```

（另一个选项是`adUseClient`） - 我相信`adUseServer`给了我更快的查询，这减少了超时的可能性。我相信你在打开连接之前就这样做了。

```
Cnn.CommandTimeout=0 
```

同样在`open()`, 之前告诉它你想要一个无限的超时。我认为默认超时时间大约是 30 秒，这对于某些查询来说太短了。将`CommandTimeout`用于`Recordset`查询。如果您使用一个`Command`对象，它有它自己的`CommandTimeout`成员，它似乎不会从 Connection 继承（即，我在执行命令之前设置它）。

抱歉，如果语法不太正确，我将删除一些 C++ 代码。

# flash - Flash / TileList 组件

> ID：427971
> 
> 赞同：1
> 
> 时间：2009-01-09T13:00:27.143
> 
> 标签：flash, cs3, tilelist, flash-v3-components

我有一个问题，我希望有人可以帮助我
我有一个带有 TileList 的 Flash 项目
我需要将这个 TileList 中一些项目（不是全部）的背景更改为红色，一些更改为蓝色
你知道怎么做吗？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-13T02:34:58.300

嗯，棘手的一个。

我试图以一种干净的方式解决这个问题，但 Flash 不允许我这么容易。基本思想是为每个 itemRenderer(ImageCell) 设置[upSkin 样式](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/fl/controls/listClasses/ImageCell.html#styleSummary)或任何其他必要的皮肤，而不是全部设置（如 tileList.setRendererStyle()）；

我以为我可以轻松访问 ImageCell 类（TileList 的默认 Cell Renderer），但事实并非如此。我获得对 cellRenderer [itemToCellRenderer](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/fl/controls/SelectableList.html#itemToCellRenderer())方法的访问权限的唯一方法，但作为参数传递的项目来自 ListEvent

我已经修改了文档中的示例来说明这个想法。此代码假定您有 TileList 组件，以及库中具有以下链接的三个 MovieClips 符号：Star、BlueBg、RedBg import fl.controls。*; 导入 fl.controls.listClasses。*; 导入 fl.data。*; 导入 fl.events。*;

```
var totalEntries:uint = 20;
var myTileList:TileList = new TileList();
myTileList.columnWidth = 125;
myTileList.rowHeight = 150;
myTileList.columnCount = 3;
myTileList.rowCount = 1;
myTileList.move(10,10);
addChild(myTileList);

for(var i:int=0; i<totalEntries; i++) {
    myTileList.addItem( { label:"star"+i, source:Star, scaleContent:false, index:i} ); 
}

myTileList.addEventListener(ListEvent.ITEM_ROLL_OVER, listItemOver);
function listItemOver(e:ListEvent):void {
    var imageCell:ImageCell = myTileList.itemToCellRenderer(e.item) as ImageCell;
    //e.index % 2 == 0 ? imageCell.setStyle('upSkin',BlueBg): imageCell.setStyle('upSkin',RedBg);
} 
```

即使它会起作用，这也会变得混乱。我在调度 ITEM_ROLL_OVER 事件时遇到问题，而且我不认为在填充组件时调度大量事件，只是为了某些颜色是个好主意。

Sooo...Flash 中有两件事是正确的

1.  几乎没有人想要 Flash 组件中的默认行为。每个人都想要一些定制的东西。
2.  我猜 Flash 的“魔力”在于寻找“hacky”解决方案。

这对我有用：请注意，当我添加一个项目时，我还添加了和索引属性，所以每个项目都会知道它的索引是什么。接下来，我让每个单元格的内容决定要显示的正确皮肤（这会创建依赖关系，因此应该有一个清晰的方法）所以我在 Star MovieClip 中添加了以下代码

```
import fl.controls.listClasses.ImageCell;

var cell:ImageCell = this.parent.parent.parent as ImageCell;
trace(cell.data.index);
if(cell.data.index %2 == 0) cell.setStyle('upSkin',BlueBg);
else cell.setStyle('upSkin',RedBg); 
```

希望这可以帮助。

# regex - 如何在 linux shell 中使用正则表达式从文件中提取 IP 地址？

> ID：427979
> 
> 赞同：68
> 
> 时间：2009-01-09T13:05:47.943
> 
> 标签：regex, linux, bash, unix, command-line

如何在 linux shell 中通过正则表达式提取文本部分？可以说，我有一个文件，其中每一行都有一个 IP 地址，但位置不同。使用常见的 unix 命令行工具提取这些 IP 地址的最简单方法是什么？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2009-01-09T13:11:27.667

您可以使用[grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)将它们拉出。

```
grep -o '[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}' file.txt 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2009-01-09T13:46:53.490

此处的大多数示例将匹配 999.999.999.999，这在技术上不是有效的 IP 地址。

以下将仅匹配有效的 IP 地址（包括网络和广播地址）。

```
grep -E -o '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)' file.txt 
```

如果要查看匹配的整行，请省略 -o。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-08-29T18:08:09.200

这在访问日志中对我来说很好。

```
cat access_log | egrep -o '([0-9]{1,3}\.){3}[0-9]{1,3}' 
```

让我们部分地分解它。

*   `[0-9]{1,3}`表示 [] 中提到的范围出现 1 到 3 次。在这种情况下，它是 0-9。所以它匹配像 10 或 183 这样的模式。

*   后跟一个“.”。我们需要将其转义为“。” 是一个元字符，对 shell 有特殊意义。

所以现在我们处于像“123”这样的模式。“12。” 等等

*   这种模式会重复三次（带有“.”）。所以我们用括号括起来。 `([0-9]{1,3}\.){3}`

*   最后，该模式会重复自身，但这次没有“.”。这就是为什么我们在第三步中单独保留它。 `[0-9]{1,3}`

如果 ips 在我的情况下位于每行的开头，请使用：

```
egrep -o '^([0-9]{1,3}\.){3}[0-9]{1,3}' 
```

其中 '^' 是一个锚点，它告诉我们在一行的开头进行搜索。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-01-09T13:35:48.880

我通常从 grep 开始，以获得正确的正则表达式。

```
# [multiple failed attempts here]
grep    '[0-9]*\.[0-9]*\.[0-9]*\.[0-9]*'                 file  # good?
grep -E '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}' file  # good enough 
```

然后我会尝试将其转换为`sed`以过滤掉该行的其余部分。（阅读此主题后，您和我将不再这样做：我们将改为使用`grep -o`）

```
sed -ne 's/.*\([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\).*/\1/p  # FAIL 
```

那时我通常会因为`sed`没有使用与其他人相同的正则表达式而感到恼火。所以我搬到`perl`.

```
$ perl -nle '/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/ and print $&' 
```

无论如何，Perl 很高兴知道。如果您安装了一点点 CPAN，您甚至可以以较低的成本使其更可靠：

```
$ perl -MRegexp::Common=net -nE '/$RE{net}{IPV4}/ and say $&' file(s) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-01-14T00:31:37.763

我写了一个小脚[本来](http://digitalcrunch.com/perl/extract-ipv4-address-from-text-using-perl/)更好地查看我的日志文件，这没什么特别的，但可能会帮助很多正在学习 perl 的人。它在提取 IP 地址后对 IP 地址进行 DNS 查找。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-09T13:14:00.563

您可以使用[sed](http://www.grymoire.com/Unix/Sed.html)。但是，如果您了解 perl，从长远来看，这可能会更容易，也更有用：

```
perl -n '/(\d+\.\d+\.\d+\.\d+)/ && print "$1\n"' < file 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-02-22T23:15:25.963

您可以使用我制作的一些 shell 助手： [https ://github.com/philpraxis/ipextract](https://github.com/philpraxis/ipextract)

为方便起见，将它们包括在这里：

```
#!/bin/sh
ipextract () 
{ 
egrep --only-matching -E  '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)' 
}

ipextractnet ()
{ 
egrep --only-matching -E  '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/[[:digit:]]+' 
}

ipextracttcp ()
{ 
egrep --only-matching -E  '[[:digit:]]+/tcp' 
}

ipextractudp ()
{ 
egrep --only-matching -E  '[[:digit:]]+/udp' 
}

ipextractsctp ()
{ 
egrep --only-matching -E  '[[:digit:]]+/sctp' 
}

ipextractfqdn ()
{ 
egrep --only-matching -E  '[a-zA-Z0-9]+[a-zA-Z0-9\-\.]*\.[a-zA-Z]{2,}' 
} 
```

从 shell 加载/获取它（当存储在 ipextract 文件中时）：

> $ . ipextract

使用它们：

```
$ ipextract < /etc/hosts
127.0.0.1
255.255.255.255
$ 
```

对于一些实际使用的例子：

```
ipextractfqdn < /var/log/snort/alert | sort -u
dmesg | ipextractudp 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-02-14T20:29:56.680

```
 grep -E -o "([0-9]{1,3}[\.]){3}[0-9]{1,3}" 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-04-08T16:23:59.510

对于那些想要从 apache 日志中获取 IP 地址并列出 IP 地址访问网站的次数的现成解决方案的人，请使用以下行：

```
grep -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}' error.log | sort | uniq -c | sort -nr > occurences.txt 
```

禁止黑客的好方法。接下来，您可以：

1.  删除少于 20 次访问的行
2.  使用正则表达式剪切到单个空格，因此您将只有 IP 地址
3.  使用正则表达式削减 1-3 个 IP 地址的最后一个数字，因此您将只有网络地址
4.  `deny from`在每行的开头添加一个空格
5.  将结果文件作为 .htaccess

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-09T13:08:26.423

我建议perl。(\d+.\d+.\d+.\d+) 应该可以解决问题。

编辑：为了使它更像一个完整的程序，您可以执行以下操作（未经测试）：

```
#!/usr/bin/perl -w
use strict;

while (<>) {
    if (/(\d+\.\d+\.\d+\.\d+)/) {
        print "$1\n";
    }
} 
```

每条线路处理一个 IP。如果每行有多个 IP，则需要使用 /g 选项。*man perlretut*为您提供了更详细的正则表达式教程。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-09T13:28:33.030

您也可以使用 awk。就像是 ...

```
awk '{i=1; if (NF > 0) do {if ($i ~ /regexp/) print $i; i++;} while (i <= NF);}' file 
```

可能需要清洁。只是一个快速而肮脏的回应基本上显示了如何使用 awk 进行操作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-28T21:37:48.457

之前的所有答案都有一个或多个问题。接受的答案允许像 999.999.999.999 这样的 IP 号码。目前第二高的答案需要以 0 为前缀，例如 127.000.000.001 或 008.008.008.008，而不是 127.0.0.1 或 8.8.8.8。Apama 几乎是正确的，但是该表达式要求 ipnumber 是该行中唯一的内容，不允许前导或尾随空格，也不能从行中间选择 ip。

我认为正确的正则表达式可以在[http://www.regextester.com/22上找到](http://www.regextester.com/22)

因此，如果您想从文件中提取所有 IP 地址，请使用：

```
grep -Eo "(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])" file.txt 
```

如果您不想重复使用：

```
grep -Eo "(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])" file.txt | sort | uniq 
```

如果此正则表达式仍有问题，请发表评论。很容易为这个问题找到许多错误的正则表达式，我希望这个没有真正的问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-03-10T08:53:58.970

这里的每个人都在使用非常冗长的正则表达式，但实际上理解 POSIX 的正则表达式将允许您使用这样的小`grep`命令来打印 IP 地址。

```
grep -Eo "(([0-9]{1,3})\.){3}([0-9]{1,3})" 
```

（旁注）这不会忽略无效的 IP，但它非常简单。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-13T08:08:30.317

我已经尝试了所有答案，但他们都有一个或多个问题，我列出了其中的几个。

1.  一些检测`123.456.789.111`为有效 IP
2.  有些不检测`127.0.00.1`为有效 IP
3.  有些不检测以零开头的IP，例如`08.8.8.8`

所以在这里我发布了一个适用于上述所有条件的正则表达式。

> 注意：我已经提取了超过 200 万个 IP，使用以下正则表达式没有任何问题。

```
(?:(?:1\d\d|2[0-5][0-5]|2[0-4]\d|0?[1-9]\d|0?0?\d)\.){3}(?:1\d\d|2[0-5][0-5]|2[0-4]\d|0?[1-9]\d|0?0?\d) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-01-06T20:06:46.397

我写了一篇关于这个主题的信息丰富的博客文章：[如何使用 Regex 从纯文本中提取 IPv4 和 IPv6 IP 地址](https://codverter.com/blog/articles/tech/20190105-extract-ipv4-ipv6-ip-addresses-using-regex.html)。

在文章中，有一个关于 IP 最常见不同模式的详细指南，通常需要使用正则表达式从纯文本中提取和隔离。
本指南基于 CodVerter 的[IP Extractor](https://codverter.com/src/ipextractor)源代码工具，用于在必要时处理 IP 地址提取和检测。

如果您希望验证和捕获 IPv4 地址，此模式可以完成这项工作：

```
\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)[.]){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b 
```

或使用**前缀**验证和捕获 IPv4 地址（“斜线表示法”）：

```
\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)[.]){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?/[0-9]{1,2})\b 
```

或捕获子网掩码或通配符掩码：

```
(255|254|252|248|240|224|192|128|0)[.](255|254|252|248|240|224|192|128|0)[.](255|254|252|248|240|224|192|128|0)[.](255|254|252|248|240|224|192|128|0) 
```

或过滤掉子网掩码地址，您可以使用正则表达式[否定前瞻](https://www.regular-expressions.info/lookaround.html)：

```
\b((?!(255|254|252|248|240|224|192|128|0)[.](255|254|252|248|240|224|192|128|0)[.](255|254|252|248|240|224|192|128|0)[.](255|254|252|248|240|224|192|128|0)))(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)[.]){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b 
```

对于**IPv6**验证，您可以转到我在此答案顶部添加的文章链接。
下面是一个捕获所有常见模式的示例（取自 CodVerter 的 IP Extractor Help Sample）：

[![在此处输入图像描述](https://i.stack.imgur.com/aSwNo.png)](https://i.stack.imgur.com/aSwNo.png)

如果您希望可以在[此处](https://codverter.com/src/regextester?query=b85ed836-4843-4ded-a1e6-3fdc21a8ac77)测试 IPv4 正则表达式。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-09-13T21:02:16.050

如果您没有获得特定文件并且您需要提取 IP 地址，那么我们需要递归地执行此操作。grep 命令 -> 搜索文本或文件以匹配给定的字符串并显示匹配的字符串。

```
grep -roE '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}' | grep -oE '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}' 
```

`-r` 我们可以搜索整个目录树，即当前目录和各级子目录。它表示递归搜索。

`-o` 只打印匹配的字符串

`-E` 使用扩展正则表达式

如果我们在管道之后不使用第二个 grep 命令，我们将获得 IP 地址及其所在的路径

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-12-02T12:25:15.277

```
cat ip_address.txt | grep '^[0-9]\{1,3\}[.][0-9]\{1,3\}[.][0-9]\{1,3\}[.][0-9]\{1,3\}[,].*$\|^.*[,][0-9]\{1,3\}[.][0-9]\{1,3\}[.][0-9]\{1,3\}[.][0-9]\{1,3\}[,].*$\|^.*[,][0-9]\{1,3\}[.][0-9]\{1,3\}[.][0-9]\{1,3\}[.][0-9]\{1,3\}$' 
```

让我们假设文件是​​逗号分隔的，ip地址的位置在开头、结尾和中间的某个地方

第一个正则表达式在行首查找 ip 地址的完全匹配。or 之后的第二个正则表达式在中间查找 ip 地址。我们匹配它的方式是，后面的数字应该正好是 1 到 3 位数字。可以排除像 12345.12.34.1 这样的虚假 ip。

第三个正则表达式在行尾查找 ip 地址

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2019-07-13T00:05:35.547

我只想从目录中的任何文件中获取以“10”开头的 IP 地址：

```
grep -o -nr "[10]\{2\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}" /var/www 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2013-03-04T23:58:31.093

对于centos6.3

`ifconfig eth0 | grep 'inet addr' | awk '{print $2}' | awk 'BEGIN {FS=":"} {print $2}'`

# .net - 对象重用如何在 .NET 中工作？

> ID：427980
> 
> 赞同：0
> 
> 时间：2009-01-09T13:06:21.593
> 
> 标签：.net, oop

我最近从 VB6 迁移到 VB.NET，我终于了解了内部工作原理。我一直在查看我公司现有的代码库，我有点惊讶。

我知道当 VB.NET 创建一个字符串时，它会查看该字符串是否在内存中，如果没有则创建该字符串的新实例，否则它将新变量指向旧的 . 但是我想知道它是否对其他对象这样做？

我问的原因是我的新公司有一个 DATABASE 对象，它基本上将数据库连接信息和数据库连接包装在一个对象中。

我们还有一个 BOOK 对象和一个 PAGES 对象。

我在 VB6 中的最佳实践是创建一个 DATABASE 对象，然后将（byRef）传递给 BOOK 和 PAGES 对象，因此您将一个 DATABASE 对象传递给多本书籍，然后传递给 PAGES。

*但是*，他们的做法是在每个 PAGE 和每个 PAGE 对象中创建一个新的 DATABASE 对象实例，这意味着您可以拥有实际上完全相同的多个对象实例（实际上是数千个）。

这是明智的吗？或者对象是否像字符串一样被处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T13:13:39.580

您对字符串的理解仅适用于字符串常量——不适用于以任何其他方式创建的字符串。

如果成千上万的数据库对象都是“相同的”，那么听起来它们实际上应该传递对同一对象的引用。您需要了解[引用和对象之间的区别](http://pobox.com/~skeet/csharp/references.html)。

最后，您的代码中的任何内容很可能都不应该保持连接。打开连接，做任何你需要做的事情，然后再次关闭它几乎总是更好。连接池系统可以确保重用与数据库的*真实*连接（创建成本相对较高）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T13:14:45.990

字符串在特殊情况下与其他对象一样处理。当其他对象被卡在堆上时（更多细节[在这里](https://stackoverflow.com/questions/423823/whats-your-favorite-programmer-ignorance-pet-peeve?answer=424035#424035)）它们被实习（描述在备注部分， http: [//msdn.microsoft.com/en-us/library/system.string.isinterned(VS.80) .aspx](http://msdn.microsoft.com/en-us/library/system.string.isinterned(VS.80).aspx)。

最好通过尽可能晚地创建连接并尽快关闭它来处理数据库连接。虽然传递连接信息可能没问题，但您不应该传递实际连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T15:46:27.993

首先：字符串是作为值类型处理的对象（因为这是您所期望的行为），这意味着每当您进行赋值/操作（如连接、替换等）时，都会复制该值进入字符串类的新实例。例如： string t = "hallo"; t = t + "你"; 包含 3 个不同的字符串实例，其中包含：“你好”、“你”和“你好”；

关于数据库对象......看看ORM映射器（我个人使用亚音速）大多数时候他们使用以下分离： - 管理与数据库的连接的数据库对象（就像你一样） - 包含的控制器或适配器使用数据库对象为每个对象加载/检索、更新、删除（SCUM 操作）的逻辑。- 包含数据的对象（例如书籍对象）

所以现在你有 1 个数据库对象（它可以包含多个连接，但通常不这样做......）一个控制器类，用于创建数据（或域对象，取决于你如何定义这些）、更新或删除数据。以及您使用的不同数据（/域）对象的许多实例......

# silverlight - Silverlight 架构指南 - 延迟加载

> ID：427996
> 
> 赞同：2
> 
> 时间：2009-01-09T13:14:29.470
> 
> 标签：silverlight, silverlight-2.0

**背景：**我们有一个离岸团队为我们制作 Silverlight 2 原型。有一个概念是我们需要非常关注应用程序的各种“屏幕”/部分的延迟加载。离岸集团已决定动态加载组件以实现这一目标；但是，我认为 MS 已经处理了这个问题。

**问题：** Silverlight 是否已经以智能方式处理加载程序集，还是我们必须关注的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T13:54:48.560

从我对另一个问题的现有答案中剪切+粘贴.. Jesse Liberty 有一些关于多页 Silverlight 应用程序的不错的教程：

[教程](http://silverlight.net/learn/tutorials/MultiPageApps_cs.aspx) 和 [更新](http://jesseliberty.com/2008/11/21/a-better-multi-page-solution/)

您可以使您的初始应用程序只不过是一个基本的“存根”，然后在您至少有一些可用的 GUI 后加载其他位。不是开箱即用的，但它很容易做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T17:54:34.553

Tim Heuer 有一个很好的视频，解释了如何在运行时动态加载程序集：

[http://silverlight.net/learn/learnvideo.aspx?video=65687](http://silverlight.net/learn/learnvideo.aspx?video=65687)

在第一季度的某个时候，Microsoft PnP 人员还应该有一个版本的 Prism 工具包将对此有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T13:22:28.487

Silverlight 确实具有按需获取应用程序的各个位的内置功能。然而，所有这些位最初都会在清单中列出。

但是，我怀疑您的合作伙伴正在考虑动态确定正在下载和显示的应用程序的新块，即使在初始 xap 构建之后也是如此。

我认为您不必太在意这一点，它实际上并不太难实现。

# mysql - 我可以在我的机器上免费使用 MySql 来开发我的应用程序吗？

> ID：427999
> 
> 赞同：10
> 
> 时间：2009-01-09T13:14:51.433
> 
> 标签：mysql, licensing

我有一个与 mysql 许可相关的查询。我正在开发一个用于商业目的的桌面应用程序，并使用 mysql 社区服务器（5.0）作为后端数据库服务器。我们不从我们的应用程序安装程序安装 mysql 服务器和驱动程序。如果用户想在他的机器上安装我们的应用程序，那么他首先需要自己安装 MySql 服务器和驱动程序，然后他才能安装我们的应用程序。这是因为 GPL 许可条款。

现在我的问题是我可以在我的机器上免费使用 MySql 来开发我的应用程序，还是我需要任何商业许可证来开发应用程序？

由于 MySql 是一个免费软件，我在我的机器上使用它来开发我的应用程序。难道我做错了什么？我对这个 GPL 许可证如何工作感到困惑？我无法理解其条款和条件。我只知道一件事是我不能将 mysql 安装程序与我们的产品一起提供，但是关于开发目的，我不知道许可证是如何工作的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-09T13:35:37.523

使用 MySQL 进行开发是免费的。由于您没有放弃该产品（MySQL），因此不适用 GPL 限制。

如果您想以某种形式分发 MySQL，则应用许可证。请参阅：[MySQL 商业许可证](http://www.mysql.com/about/legal/licensing/oem)

> OEM（原始设备制造商）、ISV（独立软件供应商）、VAR（增值经销商）和其他分销商将商业许可软件与 MySQL 软件结合并分发，并且不希望分发版本 2 下商业许可软件的源代码GNU 通用公共许可证（“GPL”）必须与 Oracle 签订商业许可协议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-07-27T06:26:54.070

MySQL许可证的简单解释（没有驱动程序的麻烦/粗略的解释）：

情况1：

如果您是试图解决问题的个人，则无需支付许可费。

案例二：

如果您是一个试图推销需要 MySQL 的应用程序的个人，那么
a) 如果您计划免费发布您的应用程序 - 无许可费
b) 如果您打算不免费发布您的应用程序 - 需要以较低的价格购买许可

案例3：

如果您是一家使用 MySQL 的公司
a) 有很多用户使用 MYSQL 服务器的内部应用程序 - 需要许可证
（因为据信这可以节省资金）
b) 外部应用程序 - 需要许可证

干杯，
蜘蛛侠

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T13:30:57.720

我相信它始终在 GPL 下可用，因此您可以在任何地方免费使用它。您可以为支持付费，也可以为其他非社区版本付费。看起来集群版本也是免费的。至于转卖，我不确定。您可能必须让用户在安装时将其下载到他们的机器上，但我不确定。您可以将它与您的应用程序一起分发。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T13:36:57.707

使用 GPL 服务器并不意味着您必须将自己的应用程序置于 GPL 之下（就像在 Linux 上开发的每个应用程序都必须是 GPL 一样）。

此外，您当然可以将 mysql 与您的应用程序一起分发——至少，作为 CD 上的单独安装程序，或下载网页。你只需要使（mysql的）源也可用。

但我怀疑将它放入您自己的安装程序中也可能没有问题，不过需要咨询律师。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T13:25:15.877

这可能是题外话，但如果它是单用户桌面应用程序，您可能需要考虑将[SQLite用于后端数据库。](http://www.sqlite.org/)它不涉及运行服务，并且对于开发和运行时都是免费的。另外，您可以将它与您的应用程序一起分发。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T01:06:29.597

MySQL 可以免费下载和使用。他们还有一个企业版可供订阅购买，并为您提供数据库服务器以及非常好的高级支持包和非常强大的实用程序和工具，例如查询分析器。除了在您想要安装它的任何计算机上本地使用它之外，您还可以注册免费的共享数据库服务器。我建议在以下网址注册： [http](http://www.mysqlforfree.com/) ://www.mysqlforfree.com/ 它们是我发现的一个新网站，并且正在起飞，到目前为止，我看到它们的功能比任何其他免费 mysql 网站都多。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T13:18:08.027

据我所知，将它用作开发工具很好，因为您不会转售它或从中赚钱。

我以前工作的地方，我们所有的内部和外部网站都在使用 MySql，无需许可证。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T01:14:16.443

我喜欢 Postgresql over MySQL 的一件事是它有一个稍微开放的许可政策：

[http://www.wikivs.com/wiki/MySQL_vs_PostgreSQL#Licensing](http://www.wikivs.com/wiki/MySQL_vs_PostgreSQL#Licensing)***********`