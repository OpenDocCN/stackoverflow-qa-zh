# StackOverflow 问答 10756000-10756999

# jquery - preventDefault 不适用于 jQuery.live

> ID：10756001
> 
> 赞同：0
> 
> 时间：2012-05-25T14:15:05.750
> 
> 标签：jquery, live, preventdefault

我有这段 JS：

```
$('.self_delete').live('click', function(e){
    e.preventDefault();
    $.ajax({
        type: 'DELETE',
        url: $(this).attr('href'),
        success:  $(this).parent().remove(),
        dataType: "script"
    })
}); 
```

以这个 HTML 为目标：

```
<a href="/list_items/34" class="self_delete" data-method="delete" rel="nofollow">
    <i class="icon-trash"></i>
</a> 
```

问题是当我点击链接时，它会首先向服务器提交 ajax 调用，然后发送正常的 HTML 调用。当然，由于 list_item 已经被删除，这会造成混乱。

我感觉这是由 live() 调用引起的，但我不知道为什么。我的 JS-Fu 需要一些训练！

* * *

编辑将代码更改为：

```
$('.self_delete').live('click', function(e){
    e.preventDefault();
    var self = $(this);
    $.ajax({
        type: 'DELETE',
        url: self.attr('href'),
        success:  function(){ self.parent().remove() },
        dataType: "script"
    })
}); 
```

我仍然有同样的问题。试图用 .on 替换 .live 但它甚至没有尝试通过 AJAX 提交，所以我想我必须更仔细地阅读文档:-S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T14:17:59.260

您需要将成功代码包装在匿名函数中，此时它将立即运行，还将引用存储`$(this)`在另一个变量中，例如`self`

```
$('.self_delete').live('click', function(e){
e.preventDefault();
var self = $(this); 
$.ajax({
    type: 'DELETE',
    url: self.attr('href'),
    success:  function(){ self.parent().remove() }, 
})
}); 
```

附带说明一下，您应该使用`.on`的 jQuery 1.7`.live`已被弃用。

```
$(document).on('click', '.self_delete', function(e){
    e.preventDefault();
    var self = $(this); 
    $.ajax({
        type: 'DELETE',
        url: self.attr('href'),
        success:  function(){ self.parent().remove() }, 
    })
}); 
```

# mongodb - 使用 Karras 从 Mongo 集合中获取文档

> ID：10756002
> 
> 赞同：2
> 
> 时间：2012-05-25T14:15:07.670
> 
> 标签：mongodb, clojure

假设我在 mongodb 中有一个集合，它的所有文档都采用以下结构。

```
{
    "_id":5,
    "key-name":"test",
    "meta-data":{
        "user-id":2,
        "status":2
    }
} 
```

假设我想找到**"user-id" = 2 的**所有集合。我可以通过使用以下功能的 mongo shell 轻松完成此操作。

```
db.mycol.find({"meta-data.user-id" : 2}) 
```

我需要通过 clojure 检索这些文档。因此，我有以下一组功能。

以下是我到目前为止的代码。

```
(ns demo.repository
  (:use karras.core)
  (:use karras.sugar)
  (:use karras.collection))

(def mongo-connection (atom nil))
(def mandate-db (atom nil))

(defn mongo-connect []
  (if (nil? @mongo-connection)
    (do
      (swap! mongo-connection (constantly (connect "192.168.0.6" 27017)))
      (swap! mandate-db (constantly (mongo-db @mongo-connection "mydb"))))))

(defn mongo-close []
  (if-not (nil? @mongo-connect)
    (.close @mongo-connect)))

(defn- job-collection [] (collection @mandate-db "mycol"))

(defn retrieve-doc [id]
  (fetch (job-collection) {"meta-data.user-id" id})) 
```

**retrieve-doc**是我打算用来获取文档的函数。以下函数完成了这项工作。

```
(fetch (job-collection) {"meta-data.user-id" id}) 
```

**这就是你可以用[Karras解决这个问题的方法](https://github.com/wilkes/karras)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:06:17.270

The Answer:

```
(fetch (job-collection) {"meta-data.user-id" id}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:09:03.060

尝试这个：

```
(fetch (job-collection) {:meta-data {:user-id id}}) 
```

# java - 这种在 Apache Camel 中对空体的处理可以更优雅吗？

> ID：10756004
> 
> 赞同：3
> 
> 时间：2012-05-25T14:15:16.687
> 
> 标签：java, apache-camel, code-cleanup

我是 Camel 的新手，正在尝试学习习语和最佳实践。我正在编写需要处理几种不同错误情况的 Web 服务。这是我的错误处理和路由：

```
onException(JsonParseException.class).inOut("direct:syntaxError").handled(true);
onException(UnrecognizedPropertyException.class).inOut("direct:syntaxError").handled(true);

// Route service through direct to allow testing.
from("servlet:///service?matchOnUriPrefix=true").inOut("direct:service");
from("direct:service")
    .choice()
        .when(body().isEqualTo(null))
            .inOut("direct:syntaxError")
        .otherwise()
            .unmarshal().json(lJsonLib, AuthorizationParameters.class).inOut("bean:mybean?method=serviceMethod").marshal().json(lJsonLib); 
```

如您所见，我有特殊处理（基于内容的路由）来处理带有空正文的请求。有没有办法更优雅地处理这个问题？我正在编写几种这种类型的服务，看起来它们可能会更干净。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T16:32:24.860

`body().isNull()`在基于内容的路由中使用表达式将`null`消息重定向到[死信频道](http://www.enterpriseintegrationpatterns.com/DeadLetterChannel.html)甚至更优雅:)。请注意，重定向到 DLC 的消息仍将包含标头，以便您稍后可以轻松分析传递失败的原因。

```
choice().
   when(body().isNull()).to("jms:deadLetterChannel").
   otherwise().to("jms:regularProcessing").
endChoice(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T08:07:28.337

您可以使用拦截器，例如带有 when 的 interceptFrom 来检查空的 bod，因为这里有一个示例：http: [//camel.apache.org/intercept](http://camel.apache.org/intercept)

然后使用 stop 表示不再进行处理：

```
interceptFrom("servlet*").when(body().isNull()).to("direct:syntaxError").stop(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T13:31:24.160

您可以使用检查 null 并在 null 的情况下引发异常的 bean。因此，您可以在异常处理中处理这种情况。

# javascript - 正则表达式中没有替换括号

> ID：10756006
> 
> 赞同：0
> 
> 时间：2012-05-25T14:15:20.663
> 
> 标签：javascript, string, replace

我知道互联网上有很多方法，但这个案例是一个特殊的案例。

我需要替换`:)`为`<img src="smiley.gif">`. 和

```
str.replace(/:)/g,'img src="smiley.gif"') 
```

不工作！请帮帮我！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T14:16:43.193

您必须转义括号：

```
str.replace(/:\)/g, '<img src="smiley.gif">'); 
```

# jquery - 将 .change 事件分配给页面加载后创建的复选框

> ID：10756013
> 
> 赞同：2
> 
> 时间：2012-05-25T14:15:48.217
> 
> 标签：jquery

我有一个包含下拉列表的页面，当用户从列表中选择一个选项时，会触发 ajax 调用并创建一系列复选框。有些被检查，有些没有被检查。我需要记录是否对复选框进行了任何更改，即选中/未选中。我尝试使用以下内容，但没有任何反应。

我正在使用 jQuery 版本 1.7.1，顺便说一句。

```
$("input:checkbox").change(function(){ 
    //some stuff happens
}); 
```

我在那里有警报，但什么也没发生。所以我试着把它包起来，`$(document).ready(...`但又一次，什么都没有。所以我的猜测是，因为当 DOM 准备好时还没有创建复选框，所以它没有标签可以附加该操作。

所以现在我很茫然。我不确定，没有`onChange="someFunction()"`投入

```
.append("<input type='checkbox' id='" + theData.DATA + "' value='" + theData.DATA + "'>" + tempName + "<br />"); 
```

这实际上是在创建复选框。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T14:19:23.037

你是对的，如果你使用的是 jQuery 1.7 .. 使用`.on`如下语法，

```
$(<closest_checkbox_container>).on('change', 'input:checkbox', function(){ 
    //some stuff happens
}); 
```

如果您使用的是旧版本，请使用`.delegate`,

```
$(<closest_checkbox_container>).delegate('input:checkbox', 'change', function(){ 
    //some stuff happens
}); 
```

**注意：**当`<closest_checkbox_container>`DOM 准备好时，最近可用的复选框容器在哪里。

上面的方法被调用`delegated events`。[参考](https://stackoverflow.com/a/10539876/297641)（阅读委托事件下的部分）

或者，最好`$("input:checkbox").change(function(){`在添加完这些复选框后编写。但是，最好假设所有复选框仅添加一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:18:02.957

您可以重新绑定来自 ajax 调用的成功响应，也可以使用“on”（http://api.jquery.com/on/）绑定到更改事件。使用“on”将更改事件绑定到任何与选择器匹配的新元素，当它添加到 DOM 时。（如果在 v1.7 下使用委托）

# regex - Groovy replaceAll 在哪里替换包含美元符号？

> ID：10756016
> 
> 赞同：6
> 
> 时间：2012-05-25T14:15:59.597
> 
> 标签：regex, groovy

我在 Groovy 中使用并在替换字符串包含符号（被解释为正则表达式组引用）`replaceAll()`时被抓住。`$`

我发现我必须做一个相当丑陋的双重替换：

```
def regexpSafeReplacement = replacement.replaceAll(/\$/, '\\\\\\$')
replaced = ("foo" =~ /foo/).replaceAll(regexpSafeReplacement) 
```

在哪里：

```
replacement = "$bar" 
```

期望的结果是：

```
replaced = "$bar" 
```

是否有更好的方法来执行此替换而无需中间步骤？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T14:29:11.650

[正如replaceAll 文档中](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)所说，您可以使用`Matcher.quoteReplacement`

```
def input = "You must pay %price%"

def price = '$41.98'

input.replaceAll '%price%', java.util.regex.Matcher.quoteReplacement( price ) 
```

另请注意，而不是双引号：

```
replacement = "$bar" 
```

您想使用单引号，例如：

```
replacement = '$bar' 
```

否则，Groovy 会将其视为模板并在找不到属性时失败`bar`

因此，对于您的示例：

```
import java.util.regex.Matcher
assert '$bar' == 'foo'.replaceAll( 'foo', Matcher.quoteReplacement( '$bar' ) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-05T10:21:30.983

在 gradle 文件中替换使用单引号和双斜杠：

```
'\\$bar' 
```

# symfony - Symfony2 和 Twig：对所有翻译应用全局过滤器

> ID：10756019
> 
> 赞同：1
> 
> 时间：2012-05-25T14:16:03.580
> 
> 标签：symfony, twig

我想始终对所有翻译文本使用*nl2br过滤器。*

我现在的代码是：

```
{% filter nl2br %}
    {% trans %}my_text_to_translate{% endtrans %}
{% endfilter %} 
```

我只想写这个：

```
{% trans %}my_text_to_translate{% endtrans %} 
```

那么：如何全局启用*nl2br*过滤器？

非常感谢您的回答:-)

奥雷尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:48:04.890

在一行中使用这个简单的语法：`{{ 'my_text_to_translate'|trans|nl2br }}`

[或者你可以为 twig http://twig.sensiolabs.org/doc/advanced.html](http://twig.sensiolabs.org/doc/advanced.html)创建一个扩展

# java - 我无法在 InteliJ java 编辑器上输入任何内容

> ID：10756023
> 
> 赞同：0
> 
> 时间：2012-05-25T14:16:28.997
> 
> 标签：java, editor

当我尝试在搜索模式下键入任何内容时，我无法在编辑器屏幕上编辑或添加任何内容。

有任何想法吗？

我正在使用 inteliJ IDEA 10.5

# javascript - 在javascript中添加

> ID：10756031
> 
> 赞同：0
> 
> 时间：2012-05-25T14:16:44.097
> 
> 标签：javascript, sum, add

我有这个代码来总结 3 个数字所以 i+j+k 但我得到的结果是 Nan

这是代码：

```
var i = req.param('1', null);
      i = parseInt(i);
      var j = req.param('2', null);
          j = parseInt(j);

      var k = req.param('3', null);
         k = parseInt(k);

      var r = i+j+k;
      res.render('index', {result:r}); 
```

这是基于节点的 js

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:20:04.517

`req.param('2', null)``null`如果未指定参数，则返回。

然后你打电话`parseInt(null)`给`NaN`

如果你添加任何数字`NaN`，你会得到`NaN`。

* * *

`req.param('2', 0)`改为使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:18:30.057

您将看到`NaN`计算中的任何值是否为`NaN`. 在您的示例中，大概`i`,`j`和/或是. 你需要看看它是什么。请注意，可以返回（例如is ）。`k``NaN``parseInt``NaN``parseInt(null)``NaN`

* * *

旁注：几乎总是最好在使用时包含基数`parseInt`，`parseInt(i, 10)`而不是仅仅包含`parseInt(i)`. 这样，`parseInt`就不会猜测基数（数字基数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T14:27:55.690

当 JavaScript 使用 将字符串转换为 int`parseInt`时，它会读取每个字符，直到它看到一个非数字字符。空白字符串 ( `''`) 是非数字的，因此它被转换为`NaN`.

例子：

```
parseInt('ABC', 10); // NaN
parseInt('123ABC', 10); // 123 
```

因此，您需要确保输入不是空白；确保它实际上是一个数字。

PS我建议将第二个参数添加到`parseInt`，它告诉它使用什么基础。如果它被排除在外，它会尝试猜测。有时这会导致问题：

```
parseInt('12'); // 12 (base 10)
parseInt('012'); // 10 (the leading '0' makes it base 8 [octal])

parseInt('012', 10); // 12\. forced to be base 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T14:19:04.923

如果三个变量之一是 NaN，那么它不是添加，而是连接。对每个变量执行 console.log 或 alert 以查找各个值以查看哪个不是数字。

编辑...哎呀，我刚刚看到您已经将它们强制为整数。这很好。因此，错误实际上发生在该步骤...您的一个（或多个）值不是数字，因此不能强制为整数。

# jquery - 在jQuery中添加跨度标签不显示

> ID：10756038
> 
> 赞同：1
> 
> 时间：2012-05-25T14:17:07.263
> 
> 标签：jquery, css, html

我正在尝试通过 onclick 更改`<asp:linkbutton`. 该代码似乎在 IE 和 firefox 中运行良好，但在 Chrome 中无法运行。

这是我正在使用的代码

```
 $('<span></span>', {
    text: icon,
    class: 'WebFonts'
}).appendTo('#' + btn); 
```

btn 是通过 onclientclick 函数传入的参数。就像我说的，这是在 IE 和 Firefox 中工作的。这是 webfont css 类，当我不尝试在 javascript 中附加它时，chrome 会呈现它。

```
@font-face {
    font-family: 'WebSymbolsRegular';
    src: url('/font/fonts/websymbols/websymbols-regular-webfont.eot');
    src: url('/font/fonts/websymbols/websymbols-regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('/font/fonts/websymbols/websymbols-regular-webfont.woff') format('woff'),
         url('/font/fonts/websymbols/websymbols-regular-webfont.ttf') format('truetype'),
         url('/font/fonts/websymbols/websymbols-regular-webfont.svg#WebSymbolsRegular') format('svg');
    font-weight: normal;
    font-style: normal;
}

.WebFonts {font-family:WebSymbolsRegular} 
```

非常感谢一些帮助谢谢香农

~~~~~~~~~~~~~ 这是你的要求

```
function checkDisableButton(btn, parmText, icon) {
var mbtn=$('#' + btn)
mbtn.attr('disabled', '');
mbtn.addClass("buttonPad buttonProcessing button");
mbtn.text(parmText + "   |   ")
$('<span></span>', {
    text: icon,
    class: 'WebFonts'
}).appendTo('#' + btn); 
```

}

这就是所谓的

```
 <asp:LinkButton ID="lbSave" runat="server" CssClass="ButtonPrimary button" Text="Save"
    OnClientClick="checkDisableButton(this.id, 'PROCESSING', 'V');" /> 
```

这是单击 asp:linkbutton 时 Chrome 中显示的 ID

```
<a onclick="checkDisableButton(this.id, 'PROCESSING', 'V');" id="ctl00_ContentPlaceHolder1_lbSave" class="ButtonPrimary button buttonPad buttonProcessing" href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$lbSave','')" disabled="disabled">PROCESSING   |   <span class="WebFonts">V</span></a> 
```

您会注意到代码中有 span class="WebFonts"

这是点击之前的代码

```
<a onclick="checkDisableButton(this.id, 'PROCESSING', 'V');" id="ctl00_ContentPlaceHolder1_lbSave" class="ButtonPrimary button" href="javascript:__doPostBack('ctl00$ContentPlaceHolder1$lbSave','')">Save</a> 
```

所以看起来跨度标签正在被放入......它只是没有显示......您需要哪些其他信息来帮助解决问题？

~~~~~~~~~ 这是更多信息.. 如果我使用它而不是 jquery ... webfonts 出现

```
 document.getElementById(btn).innerHTML = parmText + '<span class=buttonPad>|</span><span class=WebFonts>' + icon + '</span>';
    document.getElementById(btn).className = 'buttonProcessing button '; 
```

只是更多信息..不确定我能到达任何地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:56:02.487

我认为这里的关键词是：

> 这是 webfont css 类，当我不尝试在 javascript 中附加它时，chrome 会呈现它。

Chrome 对何时加载字体非常挑剔，因为这可能是一项耗时的任务。尝试将具有该类的隐藏元素添加到页面的某处：

```
<span style="visibility:hidden" class="WebFonts">V</span> 
```

然后，Chrome 会在呈现页面时知道加载字体，并在您将其动态添加到链接时准备好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:24:10.177

您的代码导致解析错误；这应该更好：

```
$('<span></span>', {
    text: icon,
    'class': 'WebFonts'
}).appendTo('#' + btn); 
```

我在周围添加了引号`class`

# oop - 现代 Fortran 求解器的良好 OOP 设计

> ID：10756045
> 
> 赞同：5
> 
> 时间：2012-05-25T14:17:59.260
> 
> 标签：oop, fortran, fortran2003

我正在设计一个用于解决 PDE 系统的 Fortran 代码。

它现在的设计方式是我有一个`Variable`具有多个属性的类型，其中最重要的是`val`存储值的数组。

现在我还有一个`solver`类，它将对`variable`. 我认为将整个传递`variable`给求解器并在`variable%val`每次我想运行它时使用（在执行期间数千次）效率低下，所以我决定在`solver`类中定义指针字段以将求解器绑定到适当的变量。例如

```
program example
    use variable
    use solvers

    type(Variable) T 
    type(Solver) solver_temperature

    !Contructors
    call T%create()
    call solver_temperature%create(T)

    call solver_temperature%solve()
end program example 
```

和求解器模块

```
module solvers
type Solver
    real*8, pointer :: T(:,:)

contains 
    procedure :: create
    procedure :: solve
end type

contains
    subroutine create(this,T)
        type(Solver) :: this
        type(Variable) :: T

        this%T => T%val
    end subroutine
end module 
```

在我的程序中，我为不同的物理属性定义了不同的变量，以及与这些变量相关联的不同求解器，如上所示。

一般来说，我是 OOP 的新手，所以我的问题是这是否是一个体面的设计？尤其是从性能的角度来看。就速度而言，这与`T`仅创建一个数组并将其传递给子程序`solve`相比如何？有一些常规的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T10:59:41.737

我已经使用 Fortran 的 OO 功能一年左右了，这里有一些伪装成答案的扩展评论。

如果您只关心原始执行速度，那么通常（并且基于论证和我的经验而不是数据）您可能会更好地避开 OO 特性；但是在许多情况下，可以提出相同的论点，即最好避免在 FORTRAN77 之后添加到语言中的任何内容。

当基于代码设计、可理解性、可扩展性之类的问题时，支持 OO 的论点会更有说服力。如果这些对您很重要，那么您应该考虑使用 OO 功能。

正如 Vladimir 已经评论的那样，使用变量指针似乎没有多大意义。不要忘记，大多数 Fortran 实现都是通过引用进行调用，以避免复制（大量）数据的工作。

就个人而言，我不喜欢您定义类型绑定过程的方式`create`。我更喜欢将这种操作实现为一个函数，这样我就可以编写如下代码行：

```
t = solver%new() 
```

而不是你的

```
call T%create() 
```

请注意，这是我的偏好，它更多的是风格问题，而不是效率或正确性问题。我注意到您没有向子例程声明参数的意图`create`；也许是因为您只发布了一段代码。

因为 OO 对于 Fortran 来说相对较新（并且可以说，对于在 Fortran 广泛使用的领域工作的大多数人来说相对陌生），所以没有太多有用的材料来指导我们采用它。我会推荐[Scientific Software Design](http://www.amazon.co.uk/Scientific-Software-Design-The-Object-Oriented/dp/0521888131/ref=sr_1_1?ie=UTF8&qid=1338202501&sr=8-1)。它对主题进行了不错的覆盖，并就为什么科学和工程程序员应该采用 OO 提出了争论。

# c# - 连字符前后的正则表达式模式匹配

> ID：10756048
> 
> 赞同：2
> 
> 时间：2012-05-25T14:18:02.850
> 
> 标签：c#, regex

我有一个这样的字符串：

```
"(33) 3669-0210 Gerencia" 
```

我试图在 - （连字符）之后/之前获取所有数字，直到在 C# 中使用正则表达式在两端找到一个空格。

输出应该是

```
"3669-0210" 
```

有人可以帮助使用 C# 中的正则表达式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T14:20:38.900

你可以使用这个表达式：

```
\b\d+-\d+\b 
```

它是一个非捕获*词边界*指示符，后跟一个或多个数字，后跟一个连字符，一个或多个数字，最后是另一个非捕获词边界。

如果要匹配的数字始终为 4 位数字，则更准确：

```
\b\d{4}-\d{4}\b 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T14:22:06.190

`"[0-9]+-[0-9]+"`这应该足够了

解释：

`[0-9]+` - 至少一个数字

`-` - 连字符

`[0-9]+` - 至少一个数字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T14:22:54.487

你可以使用这个表达式：

```
\S+-\S+ 
```

它是一个或多个非空白字符，后跟一个连字符，然后是一个或多个非空白字符。

# sql - 循环两个表生成一个新表

> ID：10756050
> 
> 赞同：0
> 
> 时间：2012-05-25T14:18:04.863
> 
> 标签：sql, tsql

我想做一个表值函数，它从给定的数字表中返回当天的日期和数字。

我已经有一个函数，你提供了一个开始和结束日期来获取所有需要的日期（dbo.Dates(@start, @finish) 和数字表，其中包含我每天需要的数字。

表格如下

## 日期 |

日期（日期时间）

## 数字 |

数字 int 名称 varchar

我需要的输出如下。

```
日期 | 数字
------------------
20120501 | 1
20120501 | 2
20120501 | 3
20120502 | 1
20120502 | 2
20120502 | 3
20120503 | 1
……

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:22:50.153

如果您需要所有日期的所有数字，请使用交叉连接：

```
select d.date, n.number
from dbo.Dates(@start, @finish) cross join
     Numbers n 
```

然后，您只需在此周围放置“创建函数”包装器即可获得表值函数。

# xml - 生成带有“ds”前缀的xml签名

> ID：10756051
> 
> 赞同：1
> 
> 时间：2012-05-25T14:18:10.353
> 
> 标签：xml, security, cryptography, signedxml

我已经用 signedxml 生成了一个 xml 签名，并且验证效果很好。我的签名xml如下

```
<Signature Id="orderSignature" xmlns="http://www.w3.org/2000/09/xmldsig#">
                    <SignedInfo>
                        <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
                        <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
                        <Reference URI="">
                            <Transforms>
                                <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
                            </Transforms>
                            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                            <DigestValue>0r1BZecYgC4FzPIxuU9DYIbVqUE=</DigestValue>
                        </Reference>
                    </SignedInfo>
                    <SignatureValue>B+SreGOR7+QEnvo0zMgJsNgZ4gbA1leOifLGd09HG8lZD0ZxsBkcR0aauTgwRgeOefKSwah+KEqAlZvRNykgPjBmY9BJ2g6OfRdvm/mSj7ecDuq/Ic1vo5bHeFJHzr8qbS7IKS/hl/BOx+06yg5rFbVeQGYypznNLIKrjS5cfDbo11e6tpLWswZMxhly8c+FHuMKzAJKOw4spbebgVT4p/vGYsPekTRtvtLtqp1yVl1za8xWkqXmbPPxwio7rXFpKWAqdLQiHYW0cs8ARXUo2jSjete+m4+wQ3QpN4Wfj8Cs3+bYsh01r1XHUG48w3PGt11+trlIEABCaQrhgj9xzg==</SignatureValue>
                    <KeyInfo>
                        <KeyValue>
                            <RSAKeyValue>
                                <Modulus>z9KDoRUO4alAwhL2Nq2fIAwsbecLuWYnzwKEX2WsUOWmhXksD+uYqjRqrKpV9j2tWFf6Ba87zEEa5xPOgD9Jj5naq6tDuH9q48u2gosC3vohPTNXL1I1sj9NTYIFNN+xcf/hi7fPQa/yq5lPOwN45kblee8Z6MqVt6Jk5ytQ+jMT6ZMStL6dOASKbwROfb0uhdmOieX60CGNAbdrn/ei2Vr2EOVmHSB1ZqZ0EhaFTKK5PPuiDlptl+bH0KBqkYEcMgzGMgxNJbDM/MlHgXWh9IWTS/A64awy8xUEQwq9QCibYzI5WCDceyTiNSAVhBQDMEX4YyWDj52sceKEK/q9NQ==</Modulus>
                                <Exponent>AQAB</Exponent>
                            </RSAKeyValue>
                        </KeyValue>
                        <X509Data>
                            <X509IssuerSerial>
                                <X509IssuerName>CN=Mali Mühür Elektronik Sertifika Hizmet Sağlayıcısı - Sürüm 1, C=TR</X509IssuerName>
                                <X509SerialNumber>97806797770378</X509SerialNumber>
                            </X509IssuerSerial>
                            <X509SubjectName>CN=Bimtel İletişim Ve Bilişim Ticaret Limited Şirketi, SERIALNUMBER=1750422091</X509SubjectName>
                            <X509Certificate>MIIFrTCCBJWgAwIBAgIGWPRrcA6KMA0GCSqGSIb3DQEBCwUAMFwxCzAJBgNVBAYTAlRSMU0wSwYDVQQDDERNYWxpIE3DvGjDvHIgRWxla3Ryb25payBTZXJ0aWZpa2EgSGl6bWV0IFNhxJ9sYXnEsWPEsXPEsSAtIFPDvHLDvG0gMTAeFw0xMTEwMTkxMjQ1NDVaFw0xNjEwMTcxMjQ1NDVaMFYxEzARBgNVBAUTCjE3NTA0MjIwOTExPzA9BgNVBAMMNkJpbXRlbCDEsGxldGnFn2ltIFZlIEJpbGnFn2ltIFRpY2FyZXQgTGltaXRlZCDFnmlya2V0aTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAM/Sg6EVDuGpQMIS9jatnyAMLG3nC7lmJ88ChF9lrFDlpoV5LA/rmKo0aqyqVfY9rVhX+gWvO8xBGucTzoA/SY+Z2qurQ7h/auPLtoKLAt76IT0zVy9SNbI/TU2CBTTfsXH/4Yu3z0Gv8quZTzsDeOZG5XnvGejKlbeiZOcrUPozE+mTErS+nTgEim8ETn29LoXZjonl+tAhjQG3a5/3otla9hDlZh0gdWamdBIWhUyiuTz7og5abZfmx9CgapGBHDIMxjIMTSWwzPzJR4F1ofSFk0vwOuGsMvMVBEMKvUAom2MyOVgg3Hsk4jUgFYQUAzBF+GMlg4+drHHihCv6vTUCAwEAAaOCAnkwggJ1MB8GA1UdIwQYMBaAFEYgqVMbKAwcrvIoUYOzHr7yUxR8MB0GA1UdDgQWBBRv135w613ZEQPsNPW+8TDIFkKEDzAOBgNVHQ8BAf8EBAMCB4AwggEzBgNVHSAEggEqMIIBJjCCASIGC2CGGAECAQEFBwQBMIIBETAqBggrBgEFBQcCARYeaHR0cDovL2RlcG8ua2FtdXNtLmdvdi50ci9pbGtlMIHiBggrBgEFBQcCAjCB1R6B0gBCAHUAIABzAGUAcgB0AGkAZgBpAGsAYQAgAGkAbABlACAAaQBsAGcAaQBsAGkAIABzAGUAcgB0AGkAZgBpAGsAYQAgAHUAeQBnAHUAbABhAG0AYQAgAGUAcwBhAHMAbABhAHIBMQBuATEAIABvAGsAdQBtAGEAawAgAGkA5wBpAG4AIABiAGUAbABpAHIAdABpAGwAZQBuACAAdwBlAGIAIABzAGkAdABlAHMAaQBuAGkAIAB6AGkAeQBhAHIAZQB0ACAAZQBkAGkAbgBpAHoALjAMBgNVHRMBAf8EAjAAMBYGA1UdJQQPMA0GC2CGGAECAQEFBzIBMEEGA1UdHwQ6MDgwNqA0oDKGMGh0dHA6Ly9kZXBvLmthbXVzbS5nb3YudHIva3VydW1zYWwvbW1lc2hzLXMxLmNybDCBggYIKwYBBQUHAQEEdjB0MDwGCCsGAQUFBzAChjBodHRwOi8vZGVwby5rYW11c20uZ292LnRyL2t1cnVtc2FsL21tZXNocy1zMS5jcnQwNAYIKwYBBQUHMAGGKGh0dHA6Ly9jaXNkdXBtbXMxLmt1cnVtc2FsLmthbXVzbS5nb3YudHIwDQYJKoZIhvcNAQELBQADggEBAFX0arwcDDLRbYHOkxb3Os4t3kMxPG7VzBAcgiPCV/ph1xda1S7IyXTk54L6OsXtsW/JBvf9+mjufAQXPwUl1AoqndBOkzYuOYv5ZXpK0Uzb1yV+XiLZtKp44wv2FeaEN5D/nyMAwi6ckGE959/JnXV5AAURBwgrnuOcksryJwOyRV78JAu28UL0fflDdmLR8qZKUUDdDzAhHTZzXBjF1GtHyEGtg3nJKO13ZZba6HXbv6dP2J7ZgFTTeyobTh5MsnBIedSItxfAxUhls7M8L3h0X42Dkx28nZw7zG1n55TIPrahihjR99qYGVnf5lnfYOt5/dhkeOazxam+QookoBI=</X509Certificate>
                        </X509Data>
                    </KeyInfo>
                </Signature> 
```

但我需要生成带有“ds:”前缀的 xml 签名。

我在stackoverflow中找不到关于这个问题的解决方案。

如何获取带前缀的xml签名？是否可以使用signedxml（System.Security.Cryptography.Xml）库，，

或者有没有我可以生成的库？

谢谢你的建议。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-04T13:37:04.777

我真的不明白为什么要在命名空间中添加 ds 前缀。

有这个：

```
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Id="Signature">
  <ds:SignedInfo Id="SignedInfo">
 <ds:CanonicalizationMethod ... 
```

完全等同于：

```
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#" Id="Signature">
   <SignedInfo Id="SignedInfo">
 <CanonicalizationMethod ... 
```

在第一种情况下，您必须为[http://www.w3.org/2000/09/xmldsig#](http://www.w3.org/2000/09/xmldsig#)命名空间中的元素指定 ds，在第二种情况下，此命名空间是默认命名空间，因此 xml 中没有声明前缀的每个元素都是从这个命名空间。

此外，您说您需要添加 ds 前缀才能拥有 XAdES-BES，并且您评论了 xmldsig 和 xades 签名之间的区别。您必须知道 XAdES 只是一个说明 XMLDSIG 签名需要哪些属性才能成为 XAdES 签名的规范。大致而言，XAdES 是一个 XMLDSIG 签名，其中包含：`<Object http://www.w3.org/2000/09/xmldsig#>`这将是整个合格属性集的包，其中一些是已签名的 (signedProperties)，而另一些是未签名的 (unsignedProperties)。对于 XAdES-BES 案例，您必须添加`<xades:SigningCertificate xmlns:xades="http://uri.etsi.org/01903/v1.3.2#">`内部`<xades:SignedProperties>`元素。

这里我给你一个 XAdES-BES 签名“没有”ds 前缀的例子。

```
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#" Id="Signature">
<SignedInfo Id="SignedInfo">
    <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
    <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
    <Reference Id="SignedProperties-Reference" Type="http://uri.etsi.org/01903/v1.2.2#SignedProperties" URI="#SignedProperties">
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>fiKTaqJzLSmC73cMXZSzjhd877w=</DigestValue>
    </Reference>
    <Reference Id="SignedDataObject-Reference-1" URI="DetachedObjectReference-1">
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>8ruIS/4MRp2wAwVX4/pTCYxTyWc=</DigestValue>
    </Reference>
</SignedInfo>
<SignatureValue Id="DocumentSignatureValue">
    R40YdEEEl0YIZVdl4pm3yyF7qGAG8ZN8PPf0aBRXbvRgdIcvJZtI5AS5NexaO5T4O0gMHWRIKjNb
    2QzlfwxlQ3/KqMW4W0QkMLpF4csBpXt9bJ3t+smEeTnxkBcQRXAw5v9kwf20mfz1LtIUhbsU/PMd
    YwaGCsItF2rzl3rtcq4=
</SignatureValue>
<KeyInfo Id="KeyInfo">
    <X509Data>
        <X509Certificate>
            MIIIUTCCBzmgAwI...
        </X509Certificate>
    </X509Data>
    <KeyValue>
        <RSAKeyValue>
            <Modulus>
              pb0cJiodddCDVe/t+7...
            </Modulus>
            <Exponent>AQAB</Exponent>
        </RSAKeyValue>
    </KeyValue>
</KeyInfo>
<Object>
    <xades:QualifyingProperties xmlns:xades="http://uri.etsi.org/01903/v1.3.2#" Id="QualifyingProperties" Target="#Signature">
        <xades:SignedProperties Id="SignedProperties">
            <xades:SignedSignatureProperties>
                <xades:SigningCertificate>
                    <xades:Cert>
                        <xades:CertDigest>
                            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                            <DigestValue>UZq4NIL9eVVA7aJixPeiUTM3nOM=</DigestValue>
                        </xades:CertDigest>
                        <xades:IssuerSerial>
                            <X509IssuerName>XXXXXXXXXXXX....</X509IssuerName>
                            <X509SerialNumber>705964899...</X509SerialNumber>
                        </xades:IssuerSerial>
                    </xades:Cert>
                </xades:SigningCertificate>
            </xades:SignedSignatureProperties>
            <xades:SignedDataObjectProperties/>
        </xades:SignedProperties>
    </xades:QualifyingProperties>
</Object> 
```

希望这可以帮助，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-15T23:17:24.533

经过大量研究，我找到了这个答案。基本上有必要在获取 SignedInfo 节点的摘要值之前修改 SignedXml 类以添加前缀。

ComputeSignature 方法将被修改以添加前缀参数

```
public void ComputeSignature(string prefix){...} 
```

当这个方法被调用时，它通过消化 SignedInfo 节点的值来计算签名值，如果你得到这个没有“ds”前缀的值然后添加前缀你会得到一个无效的签名，所以你必须添加前缀在获取 signedinfo 节点的摘要值之前。

该摘要值是在 GetC14NDigest 方法中生成的，因此该方法将被修改为添加前缀参数并在获取摘要值之前添加前缀

```
private byte[] GetC14NDigest(HashAlgorithm hash, string prefix)
{
    XmlDocument document = new XmlDocument();
    document.PreserveWhitespace = false;
    XmlElement e = this.SignedInfo.GetXml(); //get the signedinfo nodes
    document.AppendChild(document.ImportNode(e, true));        
    Transform canonicalizationMethodObject = this.SignedInfo.CanonicalizationMethodObject;       
    SetPrefix(prefix, document.DocumentElement); /*Set the prefix before getting the HASH*/
    canonicalizationMethodObject.LoadInput(document);
    return canonicalizationMethodObject.GetDigestedOutput(hash);
} 
```

好的，现在您有了带有“ds”前缀的 SignedInfo 节点的签名值，也就是说您仍然没有带有前缀的 xml，所以如果您只调用 GetXml 方法，您将看不到“ ds" 前缀，当然因为签名值是在考虑 ds 前缀的情况下计算出来的，所以你将有一个无效的签名。为避免这种情况并获得带有前缀的 xml 结构，您必须修改 GetXml 方法，添加前缀参数，然后调用 SetPrefix 方法，该方法会将“ds”前缀添加到 Signature Xml 中的所有节点

```
public XmlElement GetXml(string prefix)
{
    XmlElement e = this.GetXml();
    SetPrefix(prefix, e); //return the xml structure with the prefix
    return e;
} 
```

我将把这些修改留在这里

**定制类**

```
internal sealed class CustomSignedXml : SignedXml
{
    XmlElement obj = null;
    public CustomSignedXml (XmlDocument xml)
        : base(xml)
    {
    }

    public CustomSignedXml (XmlElement xmlElement)
        : base(xmlElement)
    {

    }

    public XmlElement GetXml(string prefix)
    {
        XmlElement e = this.GetXml();
        SetPrefix(prefix, e);
        return e;
    }

    public void ComputeSignature(string prefix)
    {
        this.BuildDigestedReferences();
        AsymmetricAlgorithm signingKey = this.SigningKey;
        if (signingKey == null)
        {
            throw new CryptographicException("Cryptography_Xml_LoadKeyFailed");
        }
        if (this.SignedInfo.SignatureMethod == null)
        {
            if (!(signingKey is DSA))
            {
                if (!(signingKey is RSA))
                {
                    throw new CryptographicException("Cryptography_Xml_CreatedKeyFailed");
                }
                if (this.SignedInfo.SignatureMethod == null)
                {
                    this.SignedInfo.SignatureMethod = "http://www.w3.org/2000/09/xmldsig#rsa-sha1";
                }
            }
            else
            {
                this.SignedInfo.SignatureMethod = "http://www.w3.org/2000/09/xmldsig#dsa-sha1";
            }
        }
        SignatureDescription description = CryptoConfig.CreateFromName(this.SignedInfo.SignatureMethod) as SignatureDescription;
        if (description == null)
        {
            throw new CryptographicException("Cryptography_Xml_SignatureDescriptionNotCreated");
        }
        HashAlgorithm hash = description.CreateDigest();
        if (hash == null)
        {
            throw new CryptographicException("Cryptography_Xml_CreateHashAlgorithmFailed");
        }
        this.GetC14NDigest(hash, prefix);
        this.m_signature.SignatureValue = description.CreateFormatter(signingKey).CreateSignature(hash);
    }         

    private byte[] GetC14NDigest(HashAlgorithm hash, string prefix)
    {

        XmlDocument document = new XmlDocument();
        document.PreserveWhitespace = false;
        XmlElement e = this.SignedInfo.GetXml();
        document.AppendChild(document.ImportNode(e, true));               

        Transform canonicalizationMethodObject = this.SignedInfo.CanonicalizationMethodObject;            
        SetPrefix(prefix, document.DocumentElement); //Set the prefix before getting the HASH
        canonicalizationMethodObject.LoadInput(document);
        return canonicalizationMethodObject.GetDigestedOutput(hash);
    }

    private void BuildDigestedReferences()
    {
        Type t = typeof(SignedXml);
        MethodInfo m = t.GetMethod("BuildDigestedReferences", BindingFlags.NonPublic | BindingFlags.Instance);
        m.Invoke(this, new object[] { });
    }

    private void SetPrefix(string prefix, XmlNode node)
    {
       foreach (XmlNode n in node.ChildNodes)
          SetPrefix(prefix, n);
       node.Prefix = prefix;
    }
} 
```

**以及使用方法**

```
CustomSignedXml signedXml = new CustomSignedXml();

//compute the signature with the "ds" prefix

signedXml.ComputeSignature("ds");

//get the xml of the signature with the "ds" prefix

XmlElement xmlDigitalSignature = signedXml.GetXml("ds"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-08T08:51:59.443

尝试在签署之前将此属性**xmlns:ds="http://www.w3.org/2000/09/xmldsig#"**添加到 XML 文档的根标记。我的情况是它有助于封装签名，但我使用的是 Crypto API。希望这对您有所帮助。

# css - 如何让按钮文本在 IE 中对齐顶部？

> ID：10756056
> 
> 赞同：2
> 
> 时间：2012-05-25T14:18:30.180
> 
> 标签：css, internet-explorer, alignment

我在按钮中有一些文字。我希望此文本在按钮顶部对齐。默认情况下，它似乎与中间对齐。在 webkit 中，我可以使用 -webkit-box-align: start; 这似乎不适用于 IE。

示例：http: [//jsfiddle.net/RY6dQ/](http://jsfiddle.net/RY6dQ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:40:57.283

您可以尝试以下（[示例](http://jsfiddle.net/RY6dQ/3/)）：

html:

```
<button><span>Text</span></button>​ 
```

CSS：

```
button {
     height: 100px;
}

button span{
    display: block;
    position: relative;
    top: -40px;

} 
```

# tridion - 不同出版物之间的 Tridion 内容端口

> ID：10756062
> 
> 赞同：5
> 
> 时间：2012-05-25T14:18:46.233
> 
> 标签：tridion, tridion2009

我在一个 Tridion Content Manager 2009 实例中有 2 个发布树

我需要将一组内容（架构、组件等）从一棵树移植到下一棵树。没有一棵树共享任何共同的出版物，所以我们有这样的东西

```
PUB_A              --->           PUB_C   (Schemas)
   PUB_B                              PUB_D   (Components) 
```

我可以导出内容 OK，但 PUB_C / D 中不存在任何内容（显然出版物名称完全不同）。这些组件可怕地嵌套在旧网站中，因此重新创建它们并不是我真正想要探索的选项。

我可以使用 Content Porter 执行此操作并让它在新出版物中创建我的项目吗？这似乎是它应该能够做的事情，但我很难理解映射，尝试重命名映射文件中的“importTarget”属性，但它仍然坚持尝试重新导入与源导出相同。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T14:32:44.027

您可以使用 Content Porter 来执行此操作。首先，您需要将源出版物重命名为不同的名称，例如 PUB_A_TEMP、PUB_B_TEMP。然后您需要重命名您的目标出版物以具有源出版物的原始名称，例如 PUB_C > PUB_A、PUB_D > PUB_B。然后，您可以运行 CP 导入。导入完成后，您可以将 Publications 重命名为原始值，首先要重命名目标 Publications。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T10:01:01.817

## 使用 importContext 属性

在从 SP1 开始的 Content Porter 中，mappings.xml 控制从旧到新的位置映射。

*   更改**importContext**属性以移动项目。
*   虽然它不适用于此处，但您也可以使用 importTitle 更改目标名称。
*   请务必对 importContext 中设置的发布名称进行“url 编码”（用 %20 替换空格，用 %2D 替换破折号）。当我错误地设置这些属性时，Content Porter 失败 - 编辑并重试是安全的。
*   我们不能创建新项目，但我们可以在系统内移动它们。

*请注意，我们不能移动整个出版物，我们为每个项目设置这些。*

提示：正确映射后，使用您最喜欢的搜索和替换技术进行更改。我让这个动作工作了一两次，最大的问题是拼写错误。

示例更改： `<tcccp:Mapping exportContext="/Publication/Building%20Blocks" exportTitle="component.xml" importContext="/Destination%20%Pub" importTitle="" />`

## 一次端口零件

对于相当干净的内容端口和测试映射更改，它有助于通过对最基本模板构建块及以上的依赖关系来分解事物。

例如，我通常会关注以下一组或两组。

1.  关键字（和类别，如果需要）
2.  可嵌入架构
3.  常规模式
4.  组件和/或模板
5.  页面

这种非连接移动的最大挑战可能是依赖关系，即移动正在使用的模式的问题。虽然我不完全确定 CP 是否会彻底失败。如果有一个共享的父级，那么向上移动架构***可能*会起作用。

相关细节：

*   [Content Porter SP2 临时文件](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_ContentPorter_2009_SP2/concept_ADCDCD649CAE4C43BE2E34F896942D47)——我相信 SP2 添加了一个临时文件——`.ifmappings`如果设置似乎没有“坚持”，值得一试
*   [Content Porter SP2 映射详细信息](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_ContentPorter_2009_SP2/concept_BF79F0D0D89B4A2787CF12D628C0A21D)
*   [Content Porter SP1 映射详细信息](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_ContentPorter_2009_SP2/concept_BF79F0D0D89B4A2787CF12D628C0A21D)
*   有关旧版本，请参阅[TridionWorld](http://www.sdltridionworld.com/)。

# sql - 导入表的语法

> ID：10756064
> 
> 赞同：0
> 
> 时间：2012-05-25T14:18:48.183
> 
> 标签：sql, netezza, squirrel-sql

将外部表导入已创建表的语法是什么？每当我在 squirrelsql 中右键单击表，然后单击导入文件时，总是收到错误消息“发生数据库错误。我怀疑 Netzilla 不支持文件导入。如何使用 NZload 实用程序导入表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:11:55.007

这是一个关于如何使用 jdbc 加载外部数据的示例。大多数这些命令也可以在 nzsql 客户端中运行。在您的情况下，只需确保您的表和外部文件的表定义顺序相同，以简化操作。

您在 Netezza 中的真实表：

```
LABDB(ADMIN)=> CREATE TABLE REAL_TABLE (c1 int, c2 char(1), c3 char(1));
CREATE TABLE
Elapsed time: 0m0.047s 
```

您要导入的文件：c:\test.file，内容：

```
1|a|x
2|b|z 
```

创建您的外部表：

```
LABDB(ADMIN)=> CREATE EXTERNAL TABLE EXT_TEST SAMEAS REAL_TABLE USING (DATAOBJECT('C:\test.file') REMOTESOURCE 'JDBC');
CREATE EXTERNAL TABLE
Elapsed time: 0m0.015s 
```

使用 squirrelsql 或类似工具检查外部表中的数据： ![SquirrelSQL 从外部表中选择](../Images/eb478c8de8d0c33317d1c74f9cdeaa91.png)

显示空的 real_table：

```
LABDB(ADMIN)=> SELECT * FROM real_table;
 C1 | C2 | C3
----+----+----
(0 rows)

Elapsed time: 0m0.063s 
```

现在您可以使用 SquirrelSQL 或类似工具从外部表插入到您的真实表中： `INSERT INTO REAL_TABLE SELECT * FROM EXT_TEST;`

最后确认real_table中的数据：

```
LABDB(ADMIN)=> SELECT * FROM real_table;
 C1 | C2 | C3
----+----+----
  2 | b  | z
  1 | a  | x
(2 rows)

Elapsed time: 0m0.074s 
```

并删除外部表，这不会删除您用来加载的文件。

```
LABDB(ADMIN)=> DROP TABLE EXT_TEST;
DROP TABLE
Elapsed time: 0m0.018s 
```

# cocoa - 如果删除第一个元素，NSMutableArray 是否会移动其元素？

> ID：10756068
> 
> 赞同：0
> 
> 时间：2012-05-25T14:19:03.037
> 
> 标签：cocoa, nsarray

`NSArray`如果删除第一个元素（类似于 ArrayList 在 Java 中的工作方式），是否将其元素向下移动（类似于 Java 中的数组）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T14:49:53.053

是的，它记录在`NSMutableArray`* 类中[`removeObjectAtIndex:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableArray/removeObjectAtIndex:)。

> **讨论**
> 为了填补空白，所有超出索引的元素都通过从它们的索引中减去 1 来移动。

[*请记住，您只能从可变数组中删除对象。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T14:20:39.653

这很容易尝试，但是确实如此。请注意，您不能从 NSArray 中删除对象，只能从 NSMutableArray 中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T14:21:55.033

NSArray 包含静态对象，您可以在 NSMutableArray 中执行此操作。是的。

# entity-framework-4 - 调用 ExectureStoreQuery 时是否需要使用参数化查询以避免 SQL 注入？

> ID：10756073
> 
> 赞同：0
> 
> 时间：2012-05-25T14:19:29.230
> 
> 标签：entity-framework-4, sql-injection, executestorequery

我想知道在从 ExecuteStoredProcedure 执行 sql 时是否需要使用参数化查询以防止 SQL 注入攻击？

根据这个[MSDN 链接](http://msdn.microsoft.com/en-us/library/dd487208.aspx)，我应该使用参数。

根据这个[其他 MSDN 链接](http://msdn.microsoft.com/en-us/library/ee358758.aspx)，使用 {0} 的 sql 字符串等效于使用参数。

那么在我的 SQL 语句中只包含 {0}、{1} 等真的可以吗：

```
var rv = _context.ExecuteStoreQuery<int>("select ID from table where typeID = {0}", typeID); 
```

还是我需要：

```
 var param = new SqlParameter("@typeID", SqlDbType.Int);
     param.Value = typeID;
     var rv = _context.ExecuteStoreQuery<int>("select ID from table where typeID = @typeID", param); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:24:44.233

基本上可以归结为这一点。您是否正在重用查询，有很多调用但 typeID 的值不同？那么是的，它可能会对性能产生微小的影响。

另一方面，如果您只进行一次调用，那么大部分性能损失将是您的数据库调用。

就我个人而言，我还没有看到这对我在过去 8 到 10 年编写的任何代码产生了明显的影响。

所以我投票 - 不要打扰。

# jquery - 这个 :not() 命令的对立面是什么 jquery

> ID：10756074
> 
> 赞同：14
> 
> 时间：2012-05-25T14:19:30.727
> 
> 标签：jquery

我正在尝试获取所有没有属性值的选项值。所以我希望它检索选项设置，如`<option value></option>`条目。

我有`$('#advancedSearchWrap option:not([value=""])')`，但我需要的是相反的。这个 :not() 命令的反面是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-25T14:24:01.167

如果不是*你*只想要*你*可以使用`filter()`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-25T14:20:39.463

只需使用常规的 CSS 属性选择器：

```
$('#advancedSearchWrap option[value=""]'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-22T22:08:49.420

这也有效。

```
$morphemes.not('[data-width]');
$morphemes.not(':not([data-width])'); //Double Negative logic, derp derp. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-25T14:21:33.457

它不只是减去 :not 选择器吗？从你的表达中删除它，它应该可以工作。

# iphone - 导航控制器应用程序中 2 个 UIViewcontroller 的方向问题

> ID：10756077
> 
> 赞同：1
> 
> 时间：2012-05-25T14:19:44.533
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, orientation

我有一个标签栏应用程序。第一个选项卡的项目是导航控制器。导航控制器的堆栈中有 4 个项目。我想提供轮换。但是在标签栏应用程序中，这是问题所在，这就是我创建自己的标签栏控制器并覆盖该方法的原因：

```
@interface RotatingTabBarController : UITabBarController

@end

@implementation RotatingTabBarController

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    if([self.selectedViewController isKindOfClass:[UINavigationController class]]){
        BOOL f = [[(UINavigationController*)self.selectedViewController visibleViewController] shouldAutorotateToInterfaceOrientation:toInterfaceOrientation];
        return f;
    } else {
        BOOL f = [self.selectedViewController shouldAutorotateToInterfaceOrientation:toInterfaceOrientation];
        return f;
    }
}

@end 
```

之后，如果我提供适当的 UIInterfaceOrientation 支持，我的控制器将支持自动旋转。但是没有我的自定义 RotatingTabBarController 这似乎是不可能的

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

问题是：当我在此视图控制器的 shouldAutorotateToInterfaceOrientation 中的导航控制器中推送 FirstViewController 时，我只提供纵向，但是当我推送 SecondViewController（我提供纵向和横向）时，如果 SecondViewController 的当前界面方向是横向并且我按下按钮（SecondViewController 从堆栈弹出并出现 FirstViewController），FirstViewController 的方向是横向的。但在 shouldAutorotateToInterfaceOrientation 方法中，我只为他提供纵向方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:43:10.720

实际上你不应该继承一个 UITabbarController 类。

> UITabBarController 类实现了一个专门的视图控制器，它管理一个单选风格的选择界面。此类不用于子类化。

来自[UITabBarController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)

如果您查看控制器覆盖

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
```

方法，应该没问题。

我认为支持某些视图横向和某些不在应用程序中的视图不是一个好主意。

你已经找到了原因，如果用户在横向模式下按下返回按钮怎么办？

这里应该做什么，当设备具有横向方向时旋转到纵向？

如果你想这样做，没有简单的方法可以强制设备改变方向。您必须使用转换来处理您自己的视图方向。

您可以使用不在导航控制器堆栈上的模型视图控制器支持视图的不同方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:54:05.633

我使用模态窗口并在横向方向隐藏后退按钮。它解决了这个问题。

# java - 避免 POJO 类中的重复代码

> ID：10756084
> 
> 赞同：2
> 
> 时间：2012-05-25T14:20:07.140
> 
> 标签：java, sonarqube, pmd, code-duplication

假设我们有 3 个类：A、B 和 C。每个类在参数中都有其他类。像这样：编辑：

```
 +-----+  +-----+  +-----+
 |  A  |  |  B  |  |  C  |
 -------  -------  -------
 | X x |  | X x |  | Z z |
 | Z z |  | Y Y |  | Y y |
 -------  -------  ------- 
```

Getter 和 setter 将被复制。那么，这是一种不好的做法，我们应该避免这种做法吗？或者这不应该被代码分析器（例如PMB）视为重复代码？

我曾考虑过“策略模式”，但我认为这可能太多了，仅适用于 getter 和 setter ......

编辑：我的第一个问题可能不是很清楚。问题是我们是否有两个具有共同属性和完全相同的 getter/setter 的类（未链接）。Sonar 或 PMD 是否应该将这些方法视为重复代码？如果没有，它会被修复吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T02:44:43.377

如前所述，首先考虑您是否真的需要复制。也许它们应该在一个可以传递的共同对象中。也许他们不需要。

现在让我们假设它们确实是需要的。当然可以。PMD 的复制粘贴检测器可让您在将其计为重复之前设置最小行数。由于 getter/setter 各只有三行（或两者均为 6 行），因此您可以将阈值设置为略高于那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:23:21.863

这是一个循环引用，通常是不好的做法。你可以重新设计不这样做吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T13:04:53.677

复制代码并不总是一个错误的想法，在某些情况下不可避免地要进行一些克隆。现在也确实生成了 setter 和 getter，但也生成了 for 和 while 循环，并且这些代码不应自动排除，因为它们是手动维护的。不加考虑地积极消除代码重复不是一个好主意。基本上并不是所有的重复都是坏的，而且它并不总是能够消除它们。得到回报的是所谓的克隆管理，即跟踪现有的重复并消除真正引起麻烦的重复。为此，您需要一个复杂的工具，例如 FrontEndART 的[QualityGate](http://www.quality-gate.com/)，它包含一个[CloneManager](https://www.quality-gate.com/modules/clonemanager/)模块。它不仅列出了重复，还通过版本跟踪它们的生活，并让您知道哪些是您应该仔细查看的重复。[您可以在QualityGate](https://opensource.quality-gate.com/)的在线演示版中查看此工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T14:30:31.970

Setter 和 getter 是自动生成的代码，所以它们绝不是代码重复（有人手动编写它们）？

您应该考虑的唯一问题是，您是否有数据重复？在你的例子中没有办法说，因为类“A”和“C”中的字段“b”可以有其他含义。

这就像“客户”和“建筑”中的“地址”字段。这意味着别的东西。

# c# - RibbonCombobox 选择第一个项目

> ID：10756094
> 
> 赞同：2
> 
> 时间：2012-05-25T14:20:43.940
> 
> 标签：c#, wpf, combobox, ribbon

嘿，我有一个包含以下属性的 viewModel：

```
 private List<Product> _products;

    public List<Product> Products
    {
        get { return _products; }
        set
        {
            _products = value;
            RaisePropertyChanged("Products");
        }
    }

    Product _selectedProduct;

    public Product SelectedProduct
    {
        get { return _selectedProduct; }
        set
        {
            _selectedProduct = value;
            RaisePropertyChanged("SelectedProduct");
        }
    } 
```

在 View Model Constructor 中，我填充它们：

```
 Products = (List<Product>)item;
         if (Products.Count > 0)
             SelectedProduct = Products[0]; 
```

XAML 看起来像：

```
<ribbon:RibbonComboBox Label="Product"  >
                    <ribbon:RibbonGallery   SelectedItem="{Binding SelectedProduct,  Mode=TwoWay}"  Command="{Binding ParameterChangeCommand}">
                        <ribbon:RibbonGalleryCategory ItemsSource="{Binding Products}"   />
                    </ribbon:RibbonGallery>
                </ribbon:RibbonComboBox> 
```

为什么我的组合框不自动选择第一个项目启动（顺便说一下组合框正确填充了数据）？稍后，如果所选项目发生更改，组合框将正确更新。

# websphere-6.1 - 将 Java EE 应用程序从 jboss 迁移到 websphere6.1 应用服务器

> ID：10756101
> 
> 赞同：0
> 
> 时间：2012-05-25T14:21:12.630
> 
> 标签：websphere-6.1

我的任务是让现有的 JBoss webapp 在 Websphere6.1 中运行。

此 Web 应用程序当前在 JBoss 中运行。JBoss 的部署文件夹中混杂了其他应用程序（swing 应用程序、计算器等独立应用程序等）。我可以找出我的 webapp 所需的耳朵。有一个 EJB jar，它不是我的 webapp 需要的耳朵的一部分。

如何轻松生成 Websphere 所需的部署文件？

1.  复制 ABC-ejb.jar（类似应用程序的计算器）并将其粘贴到 D:\IBM\WebSphere\AppServer\profiles\AppSrv02\config\cells\WAS61Node01Cell\applications\ABC-ejb.jar
2.  打开 WAS 管理控制台，Applications-->Install new application。
3.  主要保留默认值。最后我得到了错误。

错误：D:\IBM\WebSphere\AppServer\profiles\AppSrv02\wstemp\wstemp\app_1377ff3f693\dpl\7c4f55f9\ABC-ejb\ImportedClasses\com\xyz\xyz\example\ejb2\ABCRemote.class 中的类文件格式无效。major.minor 版本“51.0”太新，这个工具无法理解。

错误：在类 com.xyz.xyz.example.ejb2.EJSRemoteStatelessLisaCalculator_d78ab53c 中找不到类 com.xyz.xyz.example.ejb2.ABCRemote。

错误：D:\IBM\WebSphere\AppServer\profiles\AppSrv02\wstemp\wstemp\app_1377ff3f693\dpl\7c4f55f9\ABC-ejb\ImportedClasses\com\xyz\xyz\example\ejb2\ABCHome.class 中的类文件格式无效。major.minor 版本“51.0”太新，这个工具无法理解。

错误：在类 com.xyz.xyz.example.ejb2.EJSRemoteStatelessABCHome_d78ab53c 中找不到类 com.xyz.xyz.example.ejb2.ABCHome。

4 个错误

我安装了 Eclipse Indigo。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:41:58.507

这个错误：

> major.minor 版本“51.0”太新，这个工具无法理解。

...表示该类已使用[Java 7](http://en.wikipedia.org/wiki/Java_class_file#General_layout)（主要版本号 51）编译，但 WebSphere Application Server 6.1 仅支持 Java 5。您需要重新编译这些类才能在该版本上进行部署。

# android - Android WebView JavaScript 回调到原始视图

> ID：10756104
> 
> 赞同：5
> 
> 时间：2012-05-25T14:21:23.767
> 
> 标签：android, webview, callback

我正在编写一个 android 应用程序，在其中我在 webview 中插入 javascript 代码，然后 javascript 通过调用指定的 java 方法来回复`webview.addJavascriptInterface`。

问题是javascript回调在另一个线程中运行，而不是我启动进程的原始视图。因此，我无法访问原始视图。

如何访问原始视图？

我正在使用 api 级别 7。

以下是重要的代码片段：

JavaScript 调用：

```
webview.addJavascriptInterface(this, "ACall");
webview.loadUrl("javascript: ACall.update();"); 
```

打回来：

```
public void update() {
    TextView tv = (TextView) findViewById(R.id.tv);
    Log.v("test", "test");
    tv.setText("test");
} 
```

和堆栈跟踪：

```
Uncaught handler: thread WebViewCoreThread exiting due to uncaught exception
ndroid.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
at android.view.ViewRoot.checkThread(ViewRoot.java:2706)
at android.view.ViewRoot.requestLayout(ViewRoot.java:560)
at android.view.View.requestLayout(View.java:7918)
at android.view.View.requestLayout(View.java:7918)
at android.view.View.requestLayout(View.java:7918)
at android.view.View.requestLayout(View.java:7918)
at android.view.View.requestLayout(View.java:7918)
at android.widget.TextView.checkForRelayout(TextView.java:5380)
at android.widget.TextView.setText(TextView.java:2684)
at android.widget.TextView.setText(TextView.java:2552)
at android.widget.TextView.setText(TextView.java:2527)
at shylux.android.GameActivity.update(GameActivity.java:53)
at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
at android.webkit.BrowserFrame.loadUrl(BrowserFrame.java:149)
at android.webkit.WebViewCore.loadUrl(WebViewCore.java:1449)
at android.webkit.WebViewCore.access$1400(WebViewCore.java:48)
at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:890)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:611)
at java.lang.Thread.run(Thread.java:1096) 
```

/////////////// 当前解决方案：

这是我目前的解决方案。我认为必须有更好的方法。如果您想执行不同的任务，这需要大量工作。

```
public void update() {
    tv.post(new UpdateTask());
}

private class UpdateTask implements Runnable {
    public void run() {
        tv.setText("test");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:01:07.770

谢谢，我也有类似的问题。解决方案`runOnUiThread`非常简单。

您无法从最初创建活动的线程外部更新活动的 UI。`runOnUiThread()`方法用于进行 UI 更改。

```
 runOnUiThread(new Runnable() {
            @Override
            public void run() {
                button.setBackgroundResource(R.drawable.practice_ri_wrong_3);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:42:55.837

[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)是你的朋友。只需编写一个可对视图进行所需更改的 Runnable，然后将其传递给 runOnUiThread。[无痛线程](http://developer.android.com/resources/articles/painless-threading.html)文章提出了一些您可能会考虑的其他选项（如果您没有处理活动，那么 tv.post 可能是一个观众）。

# java - 如何获取占用 100% cpu 的正在运行的 java 程序的完整堆栈跟踪？

> ID：10756105
> 
> 赞同：29
> 
> 时间：2012-05-25T14:21:28.790
> 
> 标签：java, debugging, stack-trace

我确实有一个 jenkins 实例，它卡在某种无限循环中，没有任何可见的活动。

我可以获得`pid`正在运行的进程，那么如何生成可用于错误报告的跟踪？

我在linux上运行。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-25T14:22:58.510

尝试使用[jstack](http://download.oracle.com/javase/1.5.0/docs/tooldocs/share/jstack.html)。它会为您提供线程正在做什么的完整列表。它所需要的只是进程 pid。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-25T14:25:27.823

进行线程转储。通过 Visual VM 连接并请求转储。或者，如果在 unix 上，那么*kill -3 pid*或在进程控制台上的 windows *Ctrl+Break*将为您完成。转储直接进入控制台。您还可以使用 jstack 来进行转储。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T14:27:17.970

在 *nix 中，`top`通过按下`H` 可以看到线程。

然后`jps`你可以看到`pid`记住，如果进程是用特权启动的，那么你必须用`sudo`例如执行它。

如果您获取线程 ID 并将其转换为十六进制，那么您可以将该数据与`jstack pid`输出交叉。

这两个工具都在`$JAVA_HOME/bin`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-23T15:52:04.047

`Ctrl+\`在 linux 上（发送`SIGQUIT`）

`Ctrl+Break`在 Windows 上（`SIGBREAK`在 MSVCRT 下发送）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-25T14:24:27.603

看看[VisualVM](http://visualvm.java.net/)。它有很多不错的分析工具，您可以执行线程转储。

# java - 计算特定字符之间的字符数（包括空格）

> ID：10756107
> 
> 赞同：0
> 
> 时间：2012-05-25T14:21:31.943
> 
> 标签：java, character

我有一个这种格式的文件：

```
City|the Location|the residence of the customer| the age of the customer| the first name of the customer| 
```

我只需要阅读第一行以确定符号“|”之间有多少个字符。我需要代码来读取空格。

这是我的代码：

```
`FileInputStream fs = new FileInputStream("C:/test.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(fs));
StringBuilder sb = new StringBuilder();

for(int i = 0; i < 0; i++){
br.readLine();
}
String line  = br.readLine();

System.out.println(line);

String[] words = line.split("|");
for (int i = 0; i < words.length; i++) {
    int counter = 0;
    if (words[i].length() >= 1) {
        for (int k = 0; k < words[i].length(); k++) {
            if (Character.isLetter(words[i].charAt(k)))
                counter++;
        }
        sb = new StringBuffer();
        sb.append(counter).append(" ");
    }
}
System.out.println(sb);
} 
```

`

我对java很陌生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:28:19.153

> ***我只需要阅读第一行以确定符号“|”之间有多少个字符。我需要代码来读取空格。***

`String.split`采用正则表达式，因此`|`需要转义。使用`\\|`然后

```
words[i].length() 
```

会给你符号之间的字符数`|`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:29:41.067

尝试这样的事情：

```
String line = "City|the Location|the residence of the customer| the age of the customer| the first name of the customer|";
String[] split = line.split("\\|"); //Note you need the \\ as an escape for the regex Match
for (int i = 0; i < split.length; i++) {
  System.out.println("length of " + i + " is " + split[i].length());
} 
```

输出：

```
length of 0 is 4
length of 1 is 12
length of 2 is 29
length of 3 is 24
length of 4 is 31 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T14:29:55.310

第一的 ：

```
for(int i = 0; i < 0; i++){
  br.readLine();
} 
```

这将无济于事，因为您输入`for`only if`i`低于 0

然后：

```
if (words[i].length() >= 1) { 
```

这`if`不是很有用，因为`for`如果`words[i].length()`为 0 ，您将不会输入下一个

最后没有测试它，你可能想要测试字符是否是字母**或** `words[i].charAt(k).equals(" ")`空格似乎相当正确

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T14:40:07.863

为了获得更好的性能，请使用 StringTokenizer 而不是 String.split()，这里是一个示例：

```
FileInputStream fs = new FileInputStream("C:/test.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(fs));
StringBuilder sb = new StringBuilder();

String line  = br.readLine();

System.out.println(line);

StringTokenizer tokenizer = new StringTokenizer(line, "|");
while (tokenizer.hasMoreTokens()) {
    String token = tokenizer.nextToken();
    sb.append(token.length()).append(" "); 
}
System.out.println(sb.toString()); 
```

# jquery - Yii CJuiAutoComplete 不工作

> ID：10756111
> 
> 赞同：0
> 
> 时间：2012-05-25T14:22:01.927
> 
> 标签：jquery, yii

我正在尝试在我的项目中实现 CJuiAutoComplete 但它不起作用。在过去的几天里，我已经研究了这个问题并尝试了一切。似乎正在发生（或在这种情况下没有发生）是控制器中的查找操作没有被调用。如果我将源设置为一个简单的项目数组，我也无法让它工作。我究竟做错了什么？

_form.php

```
 <?php $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
                        'model' => $model,
                        'attribute' => 'zipcode',
                        'source' => $this->createUrl('address/lookup'),
                        'name' => 'zipcode',
                        'htmlOptions' => array('size'=>'5'),
                        'options' => array(
                            'showAnim'=>'fold',
                            'minLength' => 1,
                    )) ?> 
```

地址控制器.php

```
public function accessRules()
{
    return array(
        array('allow',  // allow all users to perform 'index' and 'view' actions
            'actions'=>array('index','view'),
            'users'=>array('*'),
        ),
        array('allow', // allow authenticated user to perform 'create' and 'update' actions
            'actions'=>array('create','update','lookup'),
            'users'=>array('@'),
        ),
        array('allow', // allow admin user to perform 'admin' and 'delete' actions
            'actions'=>array('admin','delete'),
            'users'=>array('admin'),
        ),
        array('deny',  // deny all users
            'users'=>array('*'),
        ),
    );
}

    public function actionLookup()
    {
        echo "Lookup Action";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T05:47:57.317

它是 Jquery 问题，请禁用或删除 jquery-min.js 文件，然后检查其工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:46:03.207

啊，[jui 的自动完成功能](http://jqueryui.com/demos/autocomplete/ "http://jqueryui.com/demos/autocomplete/")需要以下格式的数据：

> **预期数据格式**
> 
> 来自本地数据、url 或回调的数据可以有两种变体：
> 
> 字符串数组： [ "Choice1", "Choice2" ]
> 具有标签和值属性的对象数组： [ { label: "Choice1", value: "value1" }, ... ]

因此，在您的操作中，您必须返回 Json ：

```
echo CJSON::encode(array("Look up action")); 
```

编辑：[CJSON 文档](http://www.yiiframework.com/doc/api/1.1/CJSON "http://www.yiiframework.com/doc/api/1.1/CJSON#encode-detail")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T18:50:30.697

试试这个对你来说很简单..

```
public function actionAutoCompleteLookup()
        {
           if(Yii::app()->request->isAjaxRequest && isset($_GET['q']))
           {

              $name = $_GET['q']; 

               $qtxt ="SELECT name FROM address WHERE name LIKE '%".$name."%'";
               $command =Yii::app()->db->createCommand($qtxt);

               $userArray =$command->queryColumn();

              $returnVal = '';
              foreach($userArray as $userAccount)
              {
                 $returnVal .= $userAccount->getAttribute('first_name').'|'
                                             .$userAccount->getAttribute('user_id')."\n";
              }
              echo $returnVal;
           }
        } 
```

在这样的视图代码中..

```
<?php $this->widget('CAutoComplete',
          array(
                         //name of the html field that will be generated
             'name'=>'name', 
                       //replace controller/action with real ids
             'url'=>array('address/AutoCompleteLookup'), 
             'max'=>10, //specifies the max number of items to display

                         //specifies the number of chars that must be entered 
                         //before autocomplete initiates a lookup

             ));
    ?> 
```

它的工作正常...

# php - PHP - 为 Mongo 插入创建带有数字键的 Json

> ID：10756113
> 
> 赞同：1
> 
> 时间：2012-05-25T14:22:07.747
> 
> 标签：php, json, mongodb, mongodb-php

目前，我正在尝试使用插入 Mongo 的密钥来模拟一天中的几个小时，并且我有一些类似的东西（简化）设置：

```
for($i=0;$i<23;$i++){
    $returnElement["hours"]["$i"] = array();
    foreach($this->list_of_daily_usage_items as $item){
      /* @var $item DailyUsageItem */
      $returnElement["hours"]["$i"][$item->getLabel()] = $item->getDefaultValue();
    }
  } 
```

有了这个，我正在创建类似于：

```
 [hours] => Array
    (
        [0] => Array
            (
                [labelOne] => 0
                [labelTwo] => 0
            )
        ....
        [23] => Array
            (
                [labelOne] => 0
                [labelTwo] => 0
            )

    ) 
```

但是，当我推送到 JSON 时，它会将其转换为：

```
"hours": [{
    "labelOne": 0,
    "labelTwo": 0,
}, {
    "labelOne": 0,
    "labelTwo": 0,
}] 
```

通常我会期望的；但是，当我尝试制作这些数字键时，这并不是我真正希望看到的......

有没有办法在数字前面加上 _ 之类的东西来强制它变成一个字符串？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:33:37.117

您可以添加一个临时元素来强制将 PHP 数组转换为 JSON 对象

```
 array("_" => "removeme",
    0 => array("hello" => 0,
           "hell0" => 2),
    1 => array("hello" => 0,
           "hell0" => 2),
    2 => array("hello" => 0,
           "hell0" => 2)); 
```

这将产生

```
{
    "_": "removeme",
    "0": {
        "hello": 0,
        "hell0": 2
    },
    "1": {
        "hello": 0,
        "hell0": 2
    },
    "2": {
        "hello": 0,
        "hell0": 2
    }
} 
```

如果我们将它与一个整洁的正则表达式结合起来，我们只会让我们过去 PHP 有点邪恶的类型系统：

```
$finejson = preg_replace("/\"_\":\".*\",/", "", $json); 
```

这给了我们这个：

```
{
    "0": {
        "hello": 0,
        "hell0": 2
    },
    "1": {
        "hello": 0,
        "hell0": 2
    },
    "2": {
        "hello": 0,
        "hell0": 2
    }
} 
```

# vb.net - 如何在 VB 中做这个 C# 的事情？

> ID：10756117
> 
> 赞同：3
> 
> 时间：2012-05-25T14:22:19.073
> 
> 标签：vb.net, c#-to-vb.net

```
td.Triggers.Add(New DailyTrigger{DaysInterval = 2}) 
```

^^^ 这是 C#.NET 代码。

如何在 VB.NET 中做到这一点？我对花括号部分特别困惑，因为 VB.NET 似乎不喜欢它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:24:53.157

```
td.Triggers.Add(New DailyTrigger() With { _
    Key .DaysInterval = 2 }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T14:24:55.067

为了解释花括号，这只是以下内容的快捷方式：

```
DailyTrigger dt = new DailyTrigger();
dt.DaysInterval = 2;
td.Triggers.Add(dt); 
```

因此，VB 中的等价物就是：

```
Dim dt As DailyTrigger = new DailyTrigger()
dt.DaysInterval = 2
td.Triggers.Add(dt) 
```

或者，使用类似的`With`快捷方式：

```
td.Triggers.Add(New DailyTrigger() With { .DaysInterval = 2 }) 
```

但是直到更高版本（我相信是 LINQ 的一部分）才将快捷语法添加到 VB.NET，所以如果您没有使用最新版本的 .NET，那可能无法正常工作。

# java - 如何自定义grid jquery struts2插件添加超链接

> ID：10756118
> 
> 赞同：2
> 
> 时间：2012-05-25T14:22:23.517
> 
> 标签：java, html, struts2

我要去用户网格来显示数据。我正在寻找以下示例。 [http://struts.jgeppert.com/struts2-jquery-grid-showcase/index.action](http://struts.jgeppert.com/struts2-jquery-grid-showcase/index.action) 就像第一个示例一样，我只想填充数据没有编辑没有内联编辑导航按钮我只想添加另外 2 个包含超链接的列") > 编辑 ") > 更新

在文档中也没有明确提到这一点。

请告诉我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T15:21:29.483

您可以将格式化程序功能添加到列。

```
 <@sjg.gridColumn 
        name="name" 
        index="name" 
        title="Name" 
        sortable="true" 
        align="center" 
        formatter="nameFormatter"
        search="true"
        searchoptions="{sopt:['cn']}"
        /> 
```

然后你像这样定义一个小的 javascript 函数 nameFormatter：

```
function nameFormatter(cellvalue,options,row) {
        return '<a href="your_link?id=' + row.someId +">' + cellvalue + '</a>';
    } 
```

其中 cellvalue 是原始单元格的实际名称，而 row.someId 是，例如，您从另一列获得的某个 id。这将是这样的：

```
<a href="your_link?id=34">Foo</a> 
```

希望这可以帮助

# javascript - 如何生成不重复的随机数 javascript

> ID：10756119
> 
> 赞同：1
> 
> 时间：2012-05-25T14:22:32.710
> 
> 标签：javascript, html, random, numbers, random-sample

我正在使用以下代码生成 0 到 Totalfriends 之间的随机数，我想获得随机数，但它们不应该重复。知道怎么做吗？

这是我正在使用的代码

```
FB.getLoginStatus(function(response) {
    var profilePicsDiv = document.getElementById('profile_pics');
FB.api({ method: 'friends.get' }, function(result) {

     // var result =resultF.data;
   // console.log(result);
   var user_ids="" ;
   var totalFriends = result.length;
   // console.log(totalFriends);
   var numFriends = result ? Math.min(25, result.length) : 0;
  // console.log(numFriends);
   if (numFriends > 0) {
      for (var i=0; i<numFriends; i++) {
        var randNo = Math.floor(Math.random() * (totalFriends + 1))
        user_ids+= (',' + result[randNo]);
         console.log(user_ids);

          }
        }
        profilePicsDiv.innerHTML = user_ids;
      });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:34:43.260

这是一个函数，它将从 中获取 n 个随机元素`array`，并根据 Fisher-yates shuffle 返回它们。请注意，它将修改`array`参数。

```
function randomFrom(array, n) {
    var at = 0;
    var tmp, current, top = array.length;

    if(top) while(--top && at++ < n) {
        current = Math.floor(Math.random() * (top - 1));
        tmp = array[current];
        array[current] = array[top];
        array[top] = tmp;
    }

    return array.slice(-n);
} 
```

假设您的代码按我认为的方式工作，您已经拥有一组用户 ID：

```
var random10 = randomFrom(friendIds, 10); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:25:01.053

1.  创建一个范围内的数字数组（例如`yourarray`）`[1..totalfriends]`
2.  打乱数组（例如使用 javascript[`Fisher-Yates`](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)算法实现）
3.  在`for`(from `0`to `yourarray.length - 1`)内部`pop()`从数组中创建一个（或者只是获取`n-th`元素），所以每次你都会得到一个不同的数字

这样做你会避免得到重复的数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T14:25:36.907

我会执行随机迭代，创建一个包含所有数字的数组，例如：

```
var friendIndexes = [];

for (var i=0; i<numFriends; i++)
{
   friendIndexes.push(i);
} 
```

然后，一旦你有一个包含所有数字的数组，我会执行一些迭代，可能是 1,000 次，你会生成两个随机数，并交换这些索引中的值。

```
for (var s = 0; s<1000; s++)
{
    var rnd1 = Math.floor(Math.random() * (numFriends + 1);
    var rnd2 = Math.floor(Math.random() * (numFriends + 1);

    // Swap the two values (remember to use a temp variable)
    var tmp = friendIndexes[rnd1];
    friendIndexes[rnd1] = friendIndexes[rnd2];
    friendIndexes[rnd2] = tmp;
} 
```

您实际上是在对它们进行洗牌，结果将以随机顺序为您提供数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T17:00:19.823

取一个不除 numFriends 的大数或一个大素数（例如：702038、727699、992700、1201046、1232255、2312734、3136255、4235414、6090515）然后

```
var result=[] ;
var K=Math.floor((Math.random()*bigUnNumFreindsDivider) ;

for (var i=0; i<numFriends; i++)
{
    result[i]=(i*bigUnNumFreindsDivider+K)%numFreinds ;
} 
```

这应该可以正常工作。

# iphone - 在 iPhone 上查看网站 - 尺寸问题

> ID：10756121
> 
> 赞同：2
> 
> 时间：2012-05-25T14:22:46.903
> 
> 标签：iphone, css, zooming, crop

我希望有一个相对简单的解决方法。我为客户端创建了一个简单的网站，该网站在所有浏览器中都按预期显示。为该项目开发一个单独的移动网站不是工作范围的一部分，但我希望该网站能够在现代移动浏览器上正确显示。目前，在 iPhone 4 上，1000 像素宽的容器的左侧被剪裁（可能是 10 像素），我根本无法向左滚动查看它。我想知道这是 CSS 问题还是某种缩放问题？该网站可以在[这里](http://jessehindle.com/wordpress)访问。

我很难找到与该问题相关的任何资源，但确实找到了这个片段：

```
<meta name="viewport" content="width=device-width; initial-scale=0.9;"> 
```

这可能是解决方法的开始吗？如果网站加载的默认缩放比例为 75%，我会很高兴，但我没有为移动设备编写代码的经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T19:35:31.000

因此，对于我的特殊情况，我找到了一个可行的解决方案。希望这对处于类似情况的其他人有所帮助。

事实上，关键在于视口元标记。我正在使用一个网页，其内容仅限于居中的 1000 像素 x 600 像素容器。 [这篇](http://www.sitepoint.com/iphone-development-12-tips/)文章对弄清楚这一点非常有帮助。

正如文章所述，“默认情况下，iPhone 上的 Safari 会将您的页面呈现为大屏幕上的桌面浏览器，网页内容的宽度为 980 像素。然后它会缩小内容以使其适合小屏幕。”

在我的情况下，固定宽度为 1000 像素，我的左侧被裁剪了 20 像素，并且无法平移到它。诀窍是设置自定义宽度（必要时设置高度）。请务必在 iPhone 的垂直和水平方向上检查该站点。您可以将此元标记使用其他参数，但我保持简单。

这是我包含在网站标签之间的`<head></head>`代码：

```
<meta name="viewport" content="width=1050px, height=650px" /> 
```

这给了我一个 25px 围绕网站内容的白色边框，并且仍然允许缩放等。这不能替代 iPhone 特定的网站，但它确保用户能够访问该网站的所有内容。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:32:02.233

尝试删除初始比例。

```
<meta name="viewport" content="width=device-width;"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T14:30:47.600

如果您想为移动视图更改一些 CSS，可以使用名为[adapt.js](http://adapt.960.gs/)的工具。它选择与屏幕分辨率相关的样式表。

# ios - 在 XCode 中更改目标的图标

> ID：10756123
> 
> 赞同：5
> 
> 时间：2012-05-25T14:22:50.637
> 
> 标签：ios, xcode

我昨天注意到我的目标突然有了图标（不是默认的 A 图标）。但是，我无法弄清楚是什么设置改变了它，现在它已经改回默认值。我更改了 Info.plist 中的所有图标设置，但无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T14:32:08.270

您是否添加**`icon.png`**到项目的根文件夹？我认为这样做可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:55:16.600

重置目标图标

*   尝试在项目中找到图标名称来自的所有图像`info.plist`；
*   检查文件`Target Membership`（文件检查器部分）

它们不必位于项目根目录中。如果在不同的项目文件夹中有多个图标文件，每个图标都是它自己的目标的成员，那么您将拥有具有相同图标名称的不同目标图标（并且自然地将唯一的图标文件复制到包根目录）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T19:34:24.730

在 TARGET-info.plist 中，添加关键**图标文件**(CFBundleIconFiles)。关键的“图标文件（iOS 5）”是不够的。

除非您以不同的方式命名您的图标，否则该值应为“icon.png”。

![在此处输入图像描述](../Images/4471b0a1b1fbcd671354d6b4bbef4e34.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-11T12:32:44.530

该问题与最初未正确创建 Info.plist 有关。在摘要选项卡中设置应用程序图标时，它会写入 TARGET-Info.plist 中的图标文件 (iOS5) 字典（原始键：CFBundleIcons）。虽然这在设备和模拟器上被识别以存储图标信息，但 XCode 不理解它。相反，我们需要将此键重命名为 Icon Files (Raw Key: CFBundleIconFiles)。重命名它会将应用程序图标重置为空，因此将图标文件拖到摘要选项卡上的相应位置。现在，将为目标和产品设置图标（如果未显示产品图标，则构建并重新启动 XCode）。

然后返回 Info.plist，您将看到 CFBundleIcons (iOS 5) 和 CFBundleIconFiles 的条目（也称为 UIPrerenderedIcon 的附加键）。删除 CFBundleIcons（iOS5 的），因为这是多余的。

启动图像必须具有非常具体的名称，因此这些不会出现在 Info.plist 中。

# show - 如何从 JavaFX 应用程序类中检索阶段

> ID：10756130
> 
> 赞同：3
> 
> 时间：2012-05-25T14:23:13.407
> 
> 标签：show, javafx, stage, scene

我正在编写一个具有 2 个不同 BorderPane、BorderPane A 和 BorderPane B 的应用程序。该应用程序有 2 个菜单项，因此，当单击它时，它必须显示 BorderPane A 或 BorderPane B。

这是 Application 类，它有我想要使用的阶段

```
public class SampleApp extends Application {
private Stage primaryStage;

public static void main(final String[] args) {
    launch(args);
}    
@Override
public void start(final Stage stage)
        throws Exception {
    final AnnotationConfigApplicationContext context = new  AnnotationConfigApplicationContext(SampleAppFactory.class);
    final SpringFxmlLoader loader = new SpringFxmlLoader(context);      
    final Parent root = (Parent) loader.load("Main.fxml", Main.class);
    final Scene scene = new Scene(root, 600, 480, Color.ALICEBLUE);
    this.primaryStage = stage;
    scene.getStylesheets().add("fxmlapp.css");
    stage.setScene(scene);
    stage.show();
}
} 
```

The Main.java Class has two BorderPanes, when the menuItem is chosen I want to show the borderpane on the Application.

有人知道如何通过这种方法（**showBorderPane**）显示 Borderpane（在舞台上设置场景）吗？我想检索舞台并使用 deborderpane 设置场景：

```
public class Main extends BorderPane implements Initializable {

@FXML
private Verbinding verbindingContent; // BORDERPANE A
@FXML
private Beheer beheerContent;// BORDERPANE A
@FXML
private MenuBar menuContent;

@Override
public void initialize(final URL url, final ResourceBundle rb) {
    System.out.println(url);
    menuContent.setFocusTraversable(true);
}

@FXML
private void showBorderPane(final ActionEvent event) {
    final MenuItem menuItem = (MenuItem) event.getSource();
}

@FXML
private void handleCloseAction(final ActionEvent event) {
    System.exit(0);
} 
```

}

我的 Main.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<?import java.lang.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.effect.*?>
<?import nl.mamaloe.tab.view.Main?>
<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="nl.mamaloe.tab.view.Main">
<fx:define>     
    <fx:include source="scene/Beheer.fxml" fx:id="beheerContent" />
    <!-- fx:include source="Menu.fxml" fx:id="menuContent" / -->
</fx:define>
<top>
    <MenuBar fx:id="menuContent" onMouseClicked="#handleKeyInput">
        <menus>
            <Menu text="Systeem">
                <items>
                    <MenuItem text="Verbinding maken" onAction="#handleVerbindingAction"/>
                    <SeparatorMenuItem />
                    <MenuItem text="Afsluiten"  onAction="#handleCloseAction"/>
                </items>
            </Menu>

            <Menu text="TAB">
                <items>
                    <MenuItem text="Script toevoegen" onAction="#handleAboutAction"/>
                    <SeparatorMenuItem />
                    <MenuItem text="Script draaien" />                      
                </items>
            </Menu>
            <Menu text="About" onAction="#handleAboutAction">
                <items>
                    <MenuItem text="Op basis van wizard" />
                </items>
            </Menu>
        </menus>
    </MenuBar>
</top> 
<center>   <Label text="Add New Dock of Home" />

</center> 
```

我已经看到可以从应用程序的 start 方法执行此操作。但是由于结构的原因，我想在 Main.java 中实现它，并且我主要使用 FXML 来声明 GUI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:52:45.860

当 FXMLLoader 加载“Main.fxml”文件时，会创建一个新的 BorderPane（在 Main.fxml 中定义）。加载器还创建/初始化其控制器类，这是另一个具有自己实例的 BorderPane 派生类。所以有两个不同的 BorderPanes 实例。不过，您的设计与一般方法有点不同，为了实现您的目标，我建议在 FXML 文件的中心添加一个容器，如下所示：

```
<center>
    <StackPane fx:id="pane">
        <children>
              <Label text="Add New Dock of Home" />
        </children>
    </StackPane>
</center> 
```

您可以使用所需`StackPane`的任何窗格/布局更改 。接下来在控制器类中创建一个链接：

```
@FXML
private StackPane pane; 
```

并且您**应该**删除“扩展 BorderPane”，因为它不再有意义。最后，

```
@FXML
private void showBorderPane(final ActionEvent event) {
    final MenuItem menuItem = (MenuItem) event.getSource();
    pane.getChildren().clear(); // Clear old content.
    switch (menuItem.getText()) {
        case "Borderpane A":
            pane.getChildren().add(borderPaneA);
            break;
        case "Borderpane B":
            pane.getChildren().add(borderPaneB);
            break;
       default:
            pane.getChildren().add(new Label("Add New Dock of Home"));
    }
} 
```

# entity-framework - Windows 服务中的实体

> ID：10756131
> 
> 赞同：1
> 
> 时间：2012-05-25T14:23:13.550
> 
> 标签：entity-framework, windows-services

我构建了一个 Windows 服务，它使用实体从远程数据库中获取一些数据。为了消除可能的权限问题，我将服务作为我的用户帐户运行。初始化数据库上下文时，出现以下错误：

> 错误指定的命名连接在配置中未找到，不打算与 EntityClient 提供程序一起使用，或者无效。

这通常意味着 app.config 不存在；但是，我将 app.config 添加到服务的应用程序目录中。关于为什么它无法连接的任何想法？

# php - 以马赛克“无孔”显示图像

> ID：10756135
> 
> 赞同：-1
> 
> 时间：2012-05-25T14:23:29.477
> 
> 标签：php, javascript, jquery

我尝试将图片放在相册或 div 行中，以便“优化”人物图像，

事实上，我尝试重新创建网站 Google 图片 + 的管理，

有什么资源吗？

在我看来，该算法是一个真正的难题，无法得出以下结果：

[http://www.hostingpics.net/viewer.php?id=15859466a1.png](http://www.hostingpics.net/viewer.php?id=15859466a1.png)

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:28:51.483

有一个工具：[jQuery Masonry](http://masonry.desandro.com/)。

# magento - magento javascript皮肤路径管理员与布局中的前端

> ID：10756139
> 
> 赞同：0
> 
> 时间：2012-05-25T14:23:46.310
> 
> 标签：magento

我有一个模块，其中包含我想在管理和前端使用的 JS。我目前在我的前端皮肤文件夹中有我的 JS

```
skin/frontend/default/default/module/js/myfile.js 
```

如果我需要在前端和管理端都使用这个 JS 文件，这是最好的地方吗？或者我应该把它放在根 JS 文件夹中？

当我尝试在布局文件中添加 skin_js 项目时，管理员没有拉正确的路径。

这是我在管理和前端文件中放入的条目。有更好的方法吗？还是我想念的东西？

```
<action method="addItem"><type>skin_js</type><name>module/js/myfile.js</name></action> 
```

**我回来的管理员网址：**

`http://www.site.com/skin/adminhtml/default/default/module/js/myfile.js`

**我回来的前端网址：**

`http://www.site.com/skin/frontend/default/default/module/js/myfile.js`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:27:33.547

我通常保存我的 js 文件，`js/lib`以便我可以从任何位置访问它。

# asp.net-mvc - ASP.Net MVC 和状态 - 如何在请求之间保持状态

> ID：10756140
> 
> 赞同：52
> 
> 时间：2012-05-25T14:23:52.130
> 
> 标签：asp.net-mvc, action, viewmodel, state

作为一个经验丰富的 ASP.Net 开发人员，最近才开始使用 MVC，我发现自己很难将自己的思维方式从传统的“服务器控制和事件处理程序”的做事方式转变为更动态的 MVC 方式。我想我正在慢慢到达那里，但有时 MVC 的“魔法”会让我失望。

我当前的场景是创建一个网页，允许用户浏览本地文件，将其上传到服务器并重复此操作，直到他有一个文件列表可供使用。当他对文件列表（将显示在页面上的网格中）感到满意时，他将单击一个按钮来处理文件并提取一些将存储在数据库中的数据。

最后一部分并不那么重要，现在我正在努力解决一些琐碎的事情，比如建立一个文件列表，并在请求之间保留该列表。在传统方法中，这将非常简单 - 数据将保存在 ViewState 中。但是在 MVC 中，我需要在控制器和视图之间传递数据，但我并不完全了解它应该如何工作。

我想我最好发布我相当不完整的编码尝试来解释问题。

为了保留我的文件列表数据，我创建了一个视图模型，它基本上是一个文件类型列表，以及一些额外的元数据：

```
public class ImportDataViewModel
{
    public ImportDataViewModel()
    {
        Files = new List<ImportDataFile>();
    }

    public List<ImportDataFile> Files { get; set; }
... 
```

在视图中，我有一个用于浏览和上传文件的表单：

```
<form action="AddImportFile" method="post" enctype="multipart/form-data">
  <label for="file">
    Filename:</label>
  <input type="file" name="file" id="file" />
  <input type="submit" />
  </form> 
```

该视图使用视图模型作为其模型：

```
@model MHP.ViewModels.ImportDataViewModel 
```

这会将文件发送到我的操作：

```
public ActionResult AddImportFile(HttpPostedFileBase file, ImportDataViewModel importData)
    {

        if (file.ContentLength > 0)
        {
            ImportDataFile idFile = new ImportDataFile { File = file };
            importData.Files.Add(idFile);
        }

        return View("DataImport", importData);
    } 
```

此操作返回 DataImport 页面的视图以及包含文件列表的 viewmodel 实例。

这在一定程度上工作得很好，我可以浏览文件并上传它，我可以看到动作中的视图模型数据，然后如果我在视图中放置一个断点并调试“this.Model”，一切都是美好的。

但是，如果我尝试上传另一个文件，在 AddImportFile 操作中放置断点时，importData 参数为空。所以视图显然没有将其模型的当前实例传递给动作。

在我经历过的MVC示例中，模型实例被“神奇”地作为参数传递给了action方法，那为什么现在是空的呢？

我认为真正的问题是我对 MVC 的理解有限，并且可能有一个非常简单的解决方案。无论如何，如果有人能指出我正确的方向，我将非常感激。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-03T18:23:59.887

自从我发布这个问题以来已经有一段时间了，我对 MVC 的一点经验和知识使这个问题变得非常有趣。尽管如此，我还是收到了一些非常有用的意见，最终让我找到了解决方案并获得了对 MVC 的一些见解。

首先让我失望的是，您可以拥有一个带有强类型对象作为参数的控制器，如下所示：

```
public ActionResult DoSomething(MyClass myObject)... 
```

这个对象来自同一个控制器：

```
...
return View(myObject);
... 
```

这让我相信该对象在这两个步骤中都存在，并且我可以期望您可以将其发送到视图，执行某些操作，然后“神奇地”将其再次返回到控制器。

在阅读了有关模型绑定的内容后，我明白这当然不是这种情况。视图完全是死的和静态的，除非您将信息存储在某个地方，否则它就消失了。

回到问题，从客户端选择和上传文件，并建立这些文件的列表以显示，我意识到通常在 MVC 中存储请求之间的信息有三种方式：

1.  您可以将信息存储在视图中的表单字段中，稍后将其发布回控制器
2.  您可以将其保存在某种存储中，例如文件或数据库
3.  您可以通过访问存在于整个请求中的对象（例如会话变量）将其存储在服务器内存中

就我而言，我基本上有两种类型的信息要持久化： 1\. 文件元数据（文件名、文件大小等） 2\. 文件内容

“按书本”的方法可能是将元数据存储在表单字段中，并将文件内容存储在文件或数据库中。但还有另一种方式。因为我知道我的文件非常小，而且只有少数几个，而且这个解决方案永远不会部署在服务器场或类似的地方，所以我想探索会话变量的#3 选项。这些文件在会话之外持续存在也没有什么意义——它们被处理和丢弃，所以我不想将它们存储在我的数据库中。

阅读这篇优秀文章后： [使用动态访问 ASP.NET 会话数据](http://www.codeproject.com/Articles/191422/Accessing-ASP-NET-Session-Data-Using-Dynamics)

我被说服了。我只是按照文章中的描述创建了一个 sessionbag 类，然后我可以在我的控制器中执行以下操作：

```
 [HttpPost]
    public ActionResult AddImportFile(HttpPostedFileBase file)
    {

        ImportDataViewModel importData = SessionBag.Current.ImportData;
        if (importData == null) importData = new ImportDataViewModel();

        if (file == null)
            return RedirectToAction("DataImport");

        if (file.ContentLength > 0)
        {
            ImportDataFile idFile = new ImportDataFile { File = file };
            importData.Files.Add(idFile);
        }

        SessionBag.Current.ImportData = importData;

        return RedirectToAction("DataImport");
    } 
```

我完全清楚，在大多数情况下，这将是一个糟糕的解决方案。但是对于文件占用的服务器内存的几 kb 以及这一切的简单性，我认为它对我来说非常好。

使用 SessionBag 的额外好处是，如果用户输入了不同的菜单项然后返回，文件列表仍然存在。例如，如果选择表单字段/文件存储选项时，则不是这样的情况。

最后，我意识到 SessionBag 很容易被滥用，因为它使用简单。但是，如果您将它用于它的用途，即会话数据，我认为它可以成为一个强大的工具。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-25T14:45:11.047

**关于上传**

1）也许考虑一个带有 HTML 的 AJAX 上传器，以允许您的用户在将它们发送到服务器*之前选择多个文件。*这个 BlueImp Jquery AJAX 文件上传器非常棒，有一个非常棒的 api：[Blueimp Jquery File Upload](https://github.com/blueimp/jQuery-File-Upload)。它将允许用户拖放或多选多个文件并编辑文件顺序、包含/排除等。然后当他们满意时，他们可以按上传发送到您的控制器或上传处理程序以在服务器端进行处理。

2）你可以让每次上传都持久化到数据库，尽管你会重新加载整个页面并编写一些额外的视图模型和剃须刀代码来实现列表效果。这可能不会响应...

**关于保持状态 WebForms/MVC**

在请求之间保持状态有点黑魔法和巫术。进入 ASP.NET MVC 时，了解 Web 应用程序使用请求和响应进行通信。所以去拥抱无状态的网络并从那里发展吧！当您的模型通过您的控制器发布时，它与控制器中的任何变量一起**消失了！**但是，在它消失之前，您可以将其内容存储在数据库中以供以后检索。

Web 应用程序不能像桌面应用程序那样保持真实状态。ajax 框架有很多方法，人们使用一些巫毒工具来模拟 HTTP 环境中的状态。对状态的模拟实际上只是对状态的错误模仿。ASP.NET Web 窗体试图通过向开发人员隐藏 HTTP 的无状态特性来尽可能地模拟状态。当您尝试将自己的 AJAX 代码与 Web 表单标记代码及其自己的 Ajax 框架结合使用时，您可能会遇到很多麻烦。

**我真的很高兴你正在学习 MVC**

抛开所有的玩笑不谈，如果你有 MVC/HTTP/Stateless 的心态，很容易将这些模式应用到其他超级流行的框架，如 Ruby on Rails、SpringMVC (java)、Django (python)、CakePHP 等......这种简单的知识转移将帮助您成为更好的开发人员并真正精通 Ajax。

我真的很高兴你正在学习 MVC 3，我在一些非常大的公司实习过，这些公司有这些疯狂的大型 ASP.NET Web 窗体项目，代码到处乱飞，只是为了改变数据库中的一些数值(-_-') 感觉就像我在用剪刀编织婴儿的袜子。一个简单的错误举动，一切都崩溃了。感觉就像在 PHP 中开发一样，你出汗了，并不确定发生了什么以及发生在哪一行。调试和更新几乎是不可能的。

# javascript - Emberjs路由器：更改url哈希时状态不会改变

> ID：10756146
> 
> 赞同：3
> 
> 时间：2012-05-25T14:24:25.033
> 
> 标签：javascript, ember.js, ember-old-router

Emberjs 核心有一个新的路由器实现，它扩展了 Ember.StateManager。这是我目前实现的基本路由器（使用coffeescript）：

```
Emee.set "stateManager", Ember.Router.create
    location: "hash"
    enableLogging: true

    start: Ember.State.extend
        index: Ember.State.extend
            route: "/"
            connectOutlets: (manager) ->
                console.log(manager)

        tasks: Ember.State.extend
            route: "/tasks"

            index: Ember.State.extend
                route: "/"

            show: Ember.State.extend
                route: "/show"

        users: Ember.State.extend
            route: "/users"

            index: Ember.State.extend
                route: "/" 
```

Emee 是我的 Ember 命名空间。我有一些问题：

1) 当一个页面加载了一个带有哈希的 url 时，`http://localhost:3000/#tasks`它会移动到正确的 start.tasks.index 状态，但在 hashChange 上它只是向当前状态的 routePath 发送一条消息。Emee.stateManager.route("/tasks") 也做同样的事情。它不会改变状态，而是向当前状态的 routePath 发送消息。我们需要自己实现 routePath 吗？如果不是，我们如何通过提供路线来改变状态？

2）我看到进入状态时将调用哪个函数的很多变化。截至目前，“connectOutlets”似乎是进入状态时调用的函数的名称。现在这是设置控制器的正确页面吗？

## 更新

将 ember 代码更新为最新版本。我的路由器现在看起来像这样：

```
Emee.Router = Ember.Router.extend
    location: "hash"
    enableLogging: true

    root: Ember.State.extend
        index: Ember.State.extend
            route: "/"
            redirectsTo: 'tasks.index'

        tasks: Ember.State.extend
            route: "/tasks"

            index: Ember.State.extend
                route: "/"
                connectOutlets: (manager) ->
                    console.log("in index");

            show: Ember.State.extend
                route: "/show"
                connectOutlets: (manager) ->
                    console.log("in show");

        users: Ember.State.extend
            route: "/users"

            index: Ember.State.extend
                route: "/"

Emee.initialize() 
```

浏览器前进和后退按钮仍然不起作用。他们调用`routePath`which 只是返回，因为它们都是叶节点。我想我错过了一些小东西，但我无法找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:32:04.900

这似乎是路由器当前实现中的一个错误查看开发人员在[https://github.com/emberjs/ember.js/issues/887#issuecomment-5946213](https://github.com/emberjs/ember.js/issues/887#issuecomment-5946213)留下的评论以获取解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:21:54.367

终于搞定了 :) 从 0.9.8.1 开始，我们需要调整[https://github.com/emberjs/ember.js/issues/887#issuecomment-5946213](https://github.com/emberjs/ember.js/issues/887#issuecomment-5946213)提供的解决方法。修复如下，在创建 Ember.Location 对象时将“实现”更改为“样式”。

```
Ember.Application.reopen({
  setupStateManager: function(stateManager) {
    var location = Ember.get(stateManager, 'location');

    if (typeof location === 'string') {
      location = Ember.Location.create({style: location});
      Ember.set(stateManager, 'location', location);
    }

    stateManager.route(location.getURL());
    location.onUpdateURL(function(url) {
      stateManager.transitionTo('root');
      stateManager.route(url);
    });
  }

}); 
```

# php - Magento 扩展设置

> ID：10756149
> 
> 赞同：1
> 
> 时间：2012-05-25T14:24:34.437
> 
> 标签：php, magento

如何将“设置”添加到 Magento 扩展？例如，为每个“实例”提供一组唯一的凭据，用户在安装时设置这些凭据（通过编辑 XML）。

我通过阅读看到[你](http://inchoo.net/ecommerce/magento/create-configuration-for-your-magento-extension/)必须创建一个“全局”设置文件，`system.xml`但我更喜欢只有一个插入文件，以使安装更容易。

有什么帮助吗？干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:31:55.540

阅读本教程，它将向您详细解释：

[http://alanstorm.com/custom_magento_system_configuration](http://alanstorm.com/custom_magento_system_configuration)

如果您在进行过程中有任何问题，请告诉我，但该链接中对此进行了很好的解释。

# silverlight - Silverlight 5 中的滚动条问题

> ID：10756157
> 
> 赞同：0
> 
> 时间：2012-05-25T14:24:57.320
> 
> 标签：silverlight, silverlight-4.0, scrollbar, scrollview, silverlight-5.0

我通过设置 DesignHeight="300" 和 DesignWidth="600" 创建了 Silverlight 页面。当我恢复浏览器窗口时，页面的控件也会变小。

如果我将浏览器窗口的大小重新调整到更小，那么我页面上的控件就会消失。我需要提供一个滚动条，但是当我添加滚动条时，页面上不会显示任何内容。

```
<UserControl x:Class="ResourceCenter.SMTest.Planogram"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:UI="clr-namespace:VISZERA.UI.Controls;assembly=VISZERA.UI"  
    xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"  
    xmlns:doc="clr-namespace:VISZERA.UI;assembly=VISZERA.UI.DocumentViewer"  
    xmlns:ig="http://schemas.infragistics.com/xaml"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="1000">
    <ScrollViewer Background="AliceBlue">
        <Border x:Name="planoPage">
            <Grid x:Name="LayoutRoot" Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="20"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Border BorderBrush="#94A8C0" BorderThickness="2" Padding="5"/>
                <!--<Border BorderBrush="Gray" BorderThickness="1" Grid.Row="0" />-->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="3*"/>
                    </Grid.ColumnDefinitions>
                    <Border BorderBrush="#94A8C0" BorderThickness="2" Padding="5" Grid.Row="1"/>
                    <!--<Border BorderBrush="Gray" BorderThickness="1" Grid.Row="1" />-->
                    <Grid Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30" />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Name="lblAssoProducts" Text="Associated Product" VerticalAlignment="Center" FontSize="13" HorizontalAlignment="Center" />
                        <ListBox Name="lstProducts" Grid.Row="1" />
                    </Grid>

                    <Grid Grid.Row="2" Grid.Column="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                        </Grid.ColumnDefinitions>
                        <!--Diplay Document Viewer in first Row of this Grid-->
                        <Border x:Name="brdCnt" BorderBrush="#94A8C0" BorderThickness="2" Padding="5"/>
                        <!--<Border x:Name="brdCnt" BorderBrush="Gray" BorderThickness="1" />-->
                        <doc:VISZERADocumentViewer x:Name="DocViewer" CanCutPages="False"></doc:VISZERADocumentViewer>
                        <Border BorderBrush="#94A8C0" BorderThickness="2" Grid.Row="1" />
                        <Grid Grid.Row="1" Margin="5">
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition />
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition />
                                <ColumnDefinition Width="100"/>
                            </Grid.ColumnDefinitions>
                            <!-- Labels-->
                            <TextBlock Name="lblCategory" Text="Category :" Height="20" HorizontalAlignment="Right" FontWeight="Bold"/>
                            <TextBlock Name="lblSubCategory" Text="Sub Category :" Grid.Row="1" Height="20" HorizontalAlignment="Right" FontWeight="Bold" />
                            <TextBlock Name="lblDC" Text="DC :" Grid.Row="2" Height="20" HorizontalAlignment="Right" FontWeight="Bold"/>
                            <TextBlock Name="lblFootage" Text="Footage :" Grid.Column="2" Height="20" HorizontalAlignment="Right" FontWeight="Bold"/>
                            <TextBlock Name="lblFileType" Text="File Type :" Grid.Row="1" Grid.Column="2" Height="20"  HorizontalAlignment="Right" FontWeight="Bold"/>
                            <TextBlock Name="lblReleasedOn" Text="Released On :" Grid.Row="2" Grid.Column="2" Height="20" HorizontalAlignment="Right" FontWeight="Bold"/>
                            <!--Input Controls-->
                            <TextBox Name="txtCategory" Grid.Column="1" Margin="2" Height="20"/>
                            <TextBox Name="txtSubCategory" Grid.Row="1" Grid.Column="1" Margin="2" Height="20" />
                            <TextBox Name="txtFootage" Grid.Column="3" Margin="2" Height="20"/>
                            <TextBox Name="txtFileType" Grid.Row="1" Grid.Column="3" Margin="2" Height="20"/>
                            <TextBox Name="txtReleasedOn" Grid.Row="2" Grid.Column="3" Margin="2" Height="20"/>
                            <telerik:RadComboBox x:Name="cmbDC" IsEditable="True" Grid.Row="2" Grid.Column="1" Margin="2" Height="20">
                                <telerik:RadComboBoxItem>CJ1</telerik:RadComboBoxItem>
                                <telerik:RadComboBoxItem>CJ3</telerik:RadComboBoxItem>
                                <telerik:RadComboBoxItem>CJ3</telerik:RadComboBoxItem>
                                <telerik:RadComboBoxItem>Excl</telerik:RadComboBoxItem>
                                <telerik:RadComboBoxItem>Sovereign</telerik:RadComboBoxItem>
                            </telerik:RadComboBox>
                            <!--Save & Delete Buttons-->
                            <telerik:RadButton Name="btnSave" Content="Save" Grid.Row="1" Grid.Column="4" Width="75" Height="25" ToolTipService.ToolTip="Save"/>
                            <telerik:RadButton Name="btnDelete" Content="Delete"  Grid.Row="1" Grid.Column="4" Width="75" Height="25" ToolTipService.ToolTip="Delete" Click="btnDelete_Click" />
                        </Grid>
                    </Grid>
                </Grid>
                <TextBlock Name="lblHeader" Text="Core Planogram" />
            </Grid>
        </Border>
    </ScrollViewer>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:05:20.380

按照设计，您的布局有一个`Grid`inside a `Border`inside a `ScrollViewer`。它们都默认为屏幕大小，因此`ScrollViewer`是多余的，不会显示滚动条。

要使 ScrollViewer 滚动，内容的大小必须大于 ScrollViewer。这意味着在某些子元素上设置固定的或至少最小的大小。

在您的情况下，您可以在边框上设置最小尺寸，例如：

```
<ScrollViewer Background="AliceBlue">
        <Border x:Name="planoPage" MinHeight="400" MinWidth="500">
            <Grid x:Name="LayoutRoot" Background="White"> 
```

或者 scor4er 建议的列和行的最小尺寸，但是我实际上建议对设计进行更流畅的更改，因为它并不真正适合外部 ScrollViewer。

我还注意到您在 Grids 中不断嵌套多个 Grids，而单个 Grid 将执行此操作。例如，以下布局与您的类似，但仅使用一个网格，如下所示： ![布局示例](../Images/cc7e39f9cde398308ebc4c2543880c26.png)

```
<Grid x:Name="LayoutRoot" Background="White">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="0.238*"/>
        <ColumnDefinition Width="0.762*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="20"/>
        <RowDefinition/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Border BorderBrush="#94A8C0" BorderThickness="2" Padding="5" Grid.ColumnSpan="2" Margin="0" Background="#FFECED5F"/>
    <Border BorderThickness="2" Padding="5" Margin="0" Grid.RowSpan="2" Grid.Row="1" Background="#FFDB69FF"/>
    <Border x:Name="brdCnt" BorderBrush="#94A8C0" BorderThickness="2" Padding="5" Margin="0" Grid.Column="1" Grid.Row="1" Background="#FF7595E4"/>
    <Border BorderBrush="#94A8C0" BorderThickness="2" Grid.Row="2" Margin="0" Grid.Column="1" Background="#FF40F1B4" />
</Grid> 
```

然后在蓝色区域（可能还有紫色和绿色区域）中有一个是有意义的，`ScrollViewer`因为这些是唯一可以动态调整大小的窗格。

您仍然可以为整个屏幕使用外部 ScrollViewer，在这种情况下，结合上述建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:12:43.113

您可以尝试将具有`"*"`高度或 MinWidth 的 RowDefinitions 的 MinHeight 属性设置为 ColumnDefinitions 宽度`"*"`宽度。如果页面大小变得小于限制，将出现滚动条。

例如：

```
<RowDefinition Height="*" MinHeight="500"/> 
```

或者：

```
<ColumnDefinition Width="*" MinWidth="300"/> 
```

# java - 任何人都知道如何在android中实现类似Unfold（这是iphone中的应用程序）的效果？

> ID：10756158
> 
> 赞同：2
> 
> 时间：2012-05-25T14:25:00.613
> 
> 标签：java, android, iphone, 3d

![效果是这样的](../Images/a0ebead821f30abc67467fe3e9d1e774.png)

我怎样才能实现这个效果？任何建议都会对我有所帮助:)

# android - Android：滚动的固定标题或准标题

> ID：10756160
> 
> 赞同：0
> 
> 时间：2012-05-25T14:25:17.713
> 
> 标签：android, listview, header

在我的列表视图中，我试图决定哪个更好。有一个固定的标题或只是创建一个自定义行，它是滚动的正常列表的一部分。作为一个固定的标题，当列表中的项目滚动时，它会停留在列表的顶部。缺点是占用空间。我的替代方法是创建一个自定义准标题，该标题与所有其他行一样创建（只是布局不同）。我不确定所涉及的内容，这是否可能以及我最终是否会遇到问题要处理。有没有人在适配器内做过自定义标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:49:46.967

就个人而言，我会使用静态标题...如果标题不可见，则没有用（IMO）。

但是，如果您想将其包含在您的列表中，这是可能的。有几种不同的方法，但我推荐的一种是`MergeAdapter`CommonsWare 使用的。

[我最近在这里](https://stackoverflow.com/a/10535980/1105376)的另一个答案中谈到了它。

# hibernate - 休眠将字段存储在带有注释的单独表中的两列中

> ID：10756161
> 
> 赞同：0
> 
> 时间：2012-05-25T14:25:18.250
> 
> 标签：hibernate, jpa, orm, mapping

我想知道是否`Hibernate`可以将一个字段存储到两个不同表中的两个不同列中。

这可以实现`Hibernate`吗？我知道使用触发器很容易。

这是我的方法；

```
@Entity
@Table(name = "A")
@SecondaryTable(name = "B")
public class A {
   @Id
   @Column(name = "id")
   private int id;

   // This property in both
   @AttributeOverrides({
   @AttributeOverride(column = @Column(name = "something", table = "B"), name = "something"),
   @AttributeOverride(column = @Column(name = "something", nullable = true), name = "something")})
   private int something;
} 
```

问候。

塞达诺。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:33:39.453

我很确定它不能。我也想知道为什么你需要这样的东西，但你可以简单地拥有两个字段，并始终确保第二个字段与第一个字段具有相同的值：

```
public void setSomething(int s) {
    this.something = s:
    this.something2 = s:
} 
```

# javascript - hw 我可以比较两个 perl 哈希（键和值）提取差异并应用于 javascript 中的哈希

> ID：10756167
> 
> 赞同：1
> 
> 时间：2012-05-25T14:25:34.237
> 
> 标签：javascript, json, perl, hash, compare

警告，我希望我问的是正确的问题，请随时提出替代方案。

情况; 我有一个主要用 javascript 编写的网站，可以在固定和移动设备上运行。该网站的数据量很大。它映射了大量移动对象和其他交互。每个客户端每隔几秒就会收到来自服务器的数据更新，因此，我需要尽量减少发送的数据量。目前，服务器会发送一个相当大的散列，其中包含每次更新时所有对象的当前状态。这是非常低效的，因为大部分数据保持不变。

我相信，以最少的编码和测试对发送的数据量产生最大影响的方法是每次更新时只将更改发送到散列。

所以，我想知道是否有任何久经考验的方法可以将上次发送的数据（哈希）与将要发送的数据（哈希）进行比较，提取差异，然后将差异应用于哈希javascript方面？我希望这是有道理的？

当我说比较时，我指的是键和值。目前哈希没有以任何特定方式排序，但是如果需要的话，这不是问题。

我看过 Data::Compare 之类的东西，但它似乎只是告诉我哈希是否不同，而不是区别是什么（除非我读错了？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T15:54:55.767

我在以某种高频率从服务器向客户端发送对象差异（JSON 格式）时遇到了同样的问题。我们提出的解决方案非常简单。由于没有官方或标准的方式来表达 json 对象之间的差异，我们提出了我们自己的协议来定义哪些对象被添加，哪些对象是更新的（即这些对象的属性发生了变化（添加/更新/删除） ) 以及哪些对象被完全删除。

一种可能的增量有效负载可能是：

```
{
  added: [
    /* array of new objects */
  ],
  removed: [
    /* array of object identifiers that need to be removed */
  ],
  updated: { /* key value pairs of object identifiers with their property maps */
    obj_id_01: {
      updated: { /* key-value pairs of updated properties */ },
      removed: [ /* array of keys of removed properties in an object */ ]
    },
    obj_id_02: {
    },
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T13:28:36.047

我为类似的问题开发了类似的解决方案..

```
my $bef = {
  name => 'Fred',
  wife => 'Wilma',
  hobby => 'Breaking Rocks',
  friends => [qw! Barney Wilma Betty !],
};

my $aft = { 
  name => 'Fred',
  pet => 'Dino',
  hobby => 'Bowling',
  friends => [qw! Barney Betty Dino !],
  kids => [qw! Bam Pebbles !],
};

my $differ = Lecstor::FeedProxy::Diff->new;

my $diff = $diff->differences($bef, $aft);

$diff: {
  'pet' => 'Dino',
  'wife' => undef,
  'hobby' => 'Bowling',
  'friends' => {
    'remove' => [ 'Wilma' ],
    'add' => [ 'Dino' ]
  },
  'kids' => {
    'add' => [ 'Bam', 'Pebbles' ]
  }
}; 
```

[https://github.com/lecstor/Lecstor/blob/master/lib/Lecstor/FeedProxy/Diff.pm](https://github.com/lecstor/Lecstor/blob/master/lib/Lecstor/FeedProxy/Diff.pm)

# iphone - UIPageViewController 手势问题

> ID：10756168
> 
> 赞同：0
> 
> 时间：2012-05-25T14:25:36.073
> 
> 标签：iphone, objective-c, ios, ipad, uipageviewcontroller

我正在使用埃里卡苏丹的教程通过 UIPageViewController 显示 PDF，但有两个问题：

1-我不能从每个角落或每个位置（视图的右侧或左侧）滑动书我正在使用苹果 WWDC 2011 代码从任何地方滑动但不起作用：

```
- (void)viewDidAppear:(BOOL)animated {

    [[[self parentViewController] view] setGestureRecognizers:[self.view gestureRecognizers]];

}

- (void)viewWillDisappear:(BOOL)animated {

    for (UIGestureRecognizer *gesture in [self gestureRecognizers] ) {

        [[[self parentViewController] view] setGestureRecognizers:[self.view gestureRecognizers]];
    }
} 
```

2-识别滑动需要一点时间，我的意思是页面卷曲不是实时滑动。我向左滑动，用手指移动页面需要时间

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:35:00.117

我不确定`self`您的代码中指的是什么。需要发生的是将与 关联的手势识别`UIPageViewController`器分配给持有`UIPageViewController`' 视图的视图。在我的一个项目中，我使用以下代码：

```
self.view.gestureRecognizers = self.pageViewController.gestureRecognizers; 
```

具有属性`self`的子类在哪里。的视图被添加为 的子视图。`UIViewController``UIPageViewController``UIPageViewController``self.view`

要回答您的第二个问题，在 iOS 中绘制 PDF 速度很慢。加载并绘制 PDF的`UIPageViewController`下一页（或上一页），然后它才能开始为页面卷曲过渡设置动画。如果您要显示点差，则可能需要再绘制两页。使用简单的 UIImageView 对象而不是 PDF 视图尝试您的代码，以查看您的页面视图控制器代码是否正常工作。此更改应为您提供高性能结果。然后你就会知道你需要加速你的PDF绘图。

加速 PDF 绘图的一件事是在需要预览图像之前异步绘制预览图像。然后将这些用作页面视图控制器中内容视图的初始绘图。一旦动画稳定下来，然后从 PDF 中重新绘制视图。该`pageViewController:didFinishAnimating:previousViewControllers:transitionCompleted:`方法应该派上用场。

# c# - 在 iTextSharp 中添加新行

> ID：10756171
> 
> 赞同：17
> 
> 时间：2012-05-25T14:25:45.793
> 
> 标签：c#, itextsharp, newline

我一直在尝试解决这个问题一段时间，但无济于事。我在 iTextSharp 中有一些文本，我正在尝试换行。我已经尝试使用`\n`转义字符`Environment.NewLine`, 并且`document.Add(new Phrase(Environment.NewLine))`没有任何成功。那么有没有办法做到这一点？这是我试图在其中执行的代码片段（注意用 注释的行`//Doesn't work`）：

```
//Open the reader
PdfReader reader = new PdfReader(oldFile);
Rectangle size = reader.GetPageSizeWithRotation(1);
Document document = new Document(size);
// open the writer
FileStream fs = new FileStream(newFile, FileMode.Create, FileAccess.Write);
PdfWriter writer = PdfWriter.GetInstance(document, fs);
document.Open();

//Configure the content
PdfContentByte cb = writer.DirectContent;
// select the font properties
BaseFont bf = BaseFont.CreateFont("c:\\windows\\fonts\\calibri.ttf", BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
cb.SetColorFill(BaseColor.BLACK);
cb.SetFontAndSize(bf, 10);

//Write the text here
cb.BeginText();
text = "F\n";//Doesn’t work
document.Add(new Phrase(Environment.NewLine));//Doesn’t work
text += "o\n";
text += Environment.NewLine;//Doesn’t work
text += "o\n";
cb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, text, 85, 311, 0);
cb.EndText();

//Create the new page
PdfImportedPage page = writer.GetImportedPage(reader, 1);
cb.AddTemplate(page, 0, 0);

//Close all streams
document.Close();
fs.Close();
writer.Close();
reader.Close(); 
```

有什么建议么？

**编辑一：**

仍然无法使用`document.Add(new Paragraph("\n"));`. 我做错了吗？

```
cb.BeginText();
text = "F";
document.Add(new Paragraph("\n"));
text += "o";
document.Add(new Paragraph("\n"));
text += "o";
cb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, text, 85, 311, 0);
cb.EndText(); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-25T14:51:49.973

在 iTextSharp 中处理文本有两种主要方式，一种是通过 和 之类的抽象，另一种`Paragraph`是`Phrase`使用`PdfContentByte`. 抽象将处理诸如边距、换行符和间距之类的事情，而手动路由完全取决于您。您不能真正将两者混合在一起，这就是您正在做的事情。除非您特别需要精细控制，否则我强烈建议您使用抽象而不是手动路由。下面是一个显示两者的示例。

但要具体回答您的问题，原始 PDF 命令（您正在使用）在某些`x,y`坐标处从左到右绘制文本，并且它们不支持“返回”或“换行符”的概念。为此，您需要手动将当前文本光标移动到新行。请参阅下面的代码以获取示例。

```
 string outputFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "test.pdf");
        using (FileStream fs = new FileStream(outputFile, FileMode.Create, FileAccess.Write, FileShare.None)) {
            using (Document doc = new Document(PageSize.LETTER)) {
                using (PdfWriter writer = PdfWriter.GetInstance(doc, fs)) {
                    doc.Open();

                    //This creates two lines of text using the iTextSharp abstractions
                    doc.Add(new Paragraph("This is Paragraph 1"));
                    doc.Add(new Paragraph("This is Paragraph 2"));

                    //This does the same as above but line spacing needs to be calculated manually
                    PdfContentByte cb = writer.DirectContent;
                    cb.SaveState();
                    cb.SetColorFill(BaseColor.BLACK);
                    cb.SetFontAndSize(BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED), 12f);
                    cb.BeginText();
                    cb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, "This is cb1", 20, 311, 0);
                    cb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, "This is cb2", 20, 291, 0);//Just guessing that line two should be 20px down, will actually depend on the font
                    cb.EndText();
                    cb.RestoreState();
                    doc.Close();
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-12-17T07:29:25.490

尝试这样的事情：

```
document.Add(new Chunk("\n")); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-08T21:42:37.333

`document.Add(new Paragraph(" "));`很适合我。请记住，该`Paragraph`语句会自动添加换行符。你所要做的就是给它一些东西来渲染。在这种情况下，空格就可以了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-25T14:29:10.020

```
document.Add(new Paragraph("\n")); 
```

**编辑：**

```
cb.BeginText();
string text = "";
text = "F\n";           
text += "o\n";            
text += "o";
cb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, text, 85, 311, 0);
cb.EndText();

//Create the new page
PdfImportedPage page = writer.GetImportedPage(reader, 1);
cb.AddTemplate(page, 0, 0);

Paragraph p = new Paragraph(text);
document.Add(p);

//Close all streams
document.Close();
fs.Close();
writer.Close();
reader.Close(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-23T15:20:58.280

通过添加间距属性，您可以精确设置中断的高度...

```
var spacerParagraph = new Paragraph();
spacerParagraph.SpacingBefore = 4f;
spacerParagraph.SpacingAfter = 0f;
document.Add(spacerParagraph); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-06-06T20:34:53.960

对我来说，它是这样工作的：

```
document.Add(new Chunk("\n")); 
```

工作正常，但空间比我预期的要大。所以我选择了这个：

```
document.Add(new Paragraph(" ")); 
```

结果是我的组件之间有一个精细而规则的空间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-10T14:12:43.553

我只是在尝试这个工具，为了添加新行，我刚刚添加了 '\r\n' 并且它确实有效。像下面这样。

```
String content01 = "Nulla condimentum dui lobortis risus viverra, eu pellentesque sem blandit.\r\nUt congue turpis quis sapien mollis, vitae rutrum mi consectetur. Integer maximus nisl sed tellus pharetra pharetra.";
Phrase contentPhrase = new Phrase(content01);
Paragraph contentPr = new Paragraph();
contentPr.Add(contentPhrase); 
```

然后将 Paragraph contentPtr 添加到我的 Document 实例中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-14T15:02:10.907

我知道这有点老了，但还有另一种方法。这是我使用的一份报告中的一小部分。

```
 var contents = new Paragraph();
            contents.Alignment = Element.ALIGN_CENTER;

            contents.Add(new Chunk(string.Format("{0} {1}\n", emp.FirstName, emp.LastName), new Font(baseFont, 11f, Font.BOLD)));
            contents.Add(new Chunk(string.Format("Dept: {0}\n", emp.Departments.Title), new Font(baseFont, 9f)));
            contents.Add(new Chunk(string.Format("Wk Ending:  {0}\n", _date), new Font(baseFont, 9f))); 
```

如您所见，我所做的是创建块。这允许您使用“\n”来执行换行符。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-09T17:51:57.773

这对我来说非常有效。

```
Dim chunkNewLine As Chunk = New Chunk(Chunk.NEWLINE)
Dim addressPhrase As New Phrase
addressPhrase.Add(chunkNewLine) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-12T22:28:16.917

也许这是 iText 7 的东西（这是我正在使用的版本），但上面的建议对我不起作用。所做的是：

```
PdfDocument pdfDoc = new PdfDocument(new PdfWriter(dest));
Document doc = new Document(pdfDoc);
Paragraph p = new Paragraph();
. . .
p.Add("WHEELWORK!");
p.Add("\n\n"); // break two lines
p.Add("Ezekiel's Vision");
p.Add("\n"); // break one line
. . .
doc.Add(p); 
```

# javascript - 拆分字符串的复杂正则表达式 - 第 2 部分

> ID：10756172
> 
> 赞同：-1
> 
> 时间：2012-05-25T14:25:47.743
> 
> 标签：javascript, regex, string, match

我不久前发布了这个问题，得到了很好的回答： [Complex regex to split up a string](https://stackoverflow.com/questions/4428889/complex-regex-to-split-up-a-string)

我知道有一个与之相关的新难题，我真的无处可去……

假设我现在有一个这样的字符串：

```
{foo.bar:/?a{3\}}{blah} 
```

使用上一篇文章中提供的代码，它可以做到这一点：

```
{foo.bar:/?a
{3\}}
{blah} 
```

我希望它这样做：

```
{foo.bar:/?a{3\}}
{blah} 
```

这是因为现在我必须处理示例中第二个花括号之前没有转义的字符串。我需要一些可以发现何时忽略某些左花括号的代码。例如。如果沿着字符串从左到右阅读，它会看到第一个左花括号，然后当它看到第二个左花括号时，它有点说“等等，我还没有看到有效的右花括号，所以我要忽略这个'。这可能吗？我知道使用纯正则表达式可能并不完全可能。

这是我在上一个问题中使用的导致问题的代码的初始部分：

```
var m = str.match(/{?(\\.|[^{}])+}?/g); 
```

或者另一种解决方案可能是，当用户事先键入并提交字符串时，它会滑入转义的反斜杠，而用户看不到它。这样做的问题是知道哪个转义反斜杠再次对用户“隐藏”......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:51:00.737

这样的事情呢？

```
var str = "{foo.bar:/?a{3\}}hello?{blah}world{blah2}";

var rgx = new RegExp(/}(?!})+[^{]*{/g); 

str = str.replace(rgx,"},{");

//document.write(str + "<br/>");

arr = str.split(",");

for(i=0; i<arr.length; i++) {
    document.write(arr[i] + "<br/>");
} 
```

这里的关键是正则表达式`/}(?!})+[^{]*{/g`

`}`文字字符匹配

`(?!})+`断言，在上一次匹配之后，至少有一个`}`不匹配。

`[^{]*`匹配任意数量的字符，不包括`{`

`{`文字字符匹配

看到它在[这里](http://jsfiddle.net/ttKSj/6/)工作。

# ruby - 如何在 Ruby（不是 Rails）中按日期排序？

> ID：10756175
> 
> 赞同：7
> 
> 时间：2012-05-25T14:25:53.517
> 
> 标签：ruby

我知道 Rails 在 ActiveRecord 中内置了排序方法，但我只是在编写一个普通的 ruby​​ 脚本，并且很想按日期对数组中的记录进行排序。

日期将存储在多维数组的单元之一中。

对我来说，解决这个问题的最佳方法是什么，所以我可以达到我刚刚做的地步，`sort_by_date`我指出要么`ASC`要么`DESC`？

我不必使用方法`sort_by_date`，但我的想法是我希望能够轻松地调用集合上的方法并获得我想要的结果。

想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T14:53:16.797

```
def sort_by_date(dates, direction="ASC")
  sorted = dates.sort
  sorted.reverse! if direction == "DESC"
  sorted
end 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-25T14:31:55.090

像这样的东西？

```
 class Array
    def sort_by_date(direction="ASC")
      if direction == "ASC"
        self.sort
      elsif direction == "DESC"
        self.sort {|a,b| b <=> a}
      else
        raise "Invalid direction. Specify either ASC or DESC."    
      end
    end
  end 
```

多维数组只是数组的数组，所以在要排序的“维度”上调用此方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-05T14:48:11.203

我现在这样做的方式是：

```
@collection.sort! { |a,b|  DateTime.parse(a['date']) <=> DateTime.parse(b['date']) } 
```

并与！运算符我正在影响同一个变量（否则我将需要另一个变量来保存修改后的变量）。到目前为止，它是一种魅力。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-05T17:11:23.500

以下可能不适用于 Date 对象，但应该适用于 DateTime 对象。这是因为 DateTime 对象可以转换为整数。

我最近不得不对 DateTime 对象进行降序排序，这就是我想出的。

```
def sort_by_datetime(dates, direction="ASC")
  dates.sort_by { |date| direction == "DESC" ? -date.to_i : date }
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-25T15:43:41.440

我正在使用旧版本的 Rails，`rabl`它对我有用

```
collection @name_of_your_collection.sort! { |a,b|  DateTime.parse(a['start_at']) <=> DateTime.parse(b['start_at']) }
node do |s|
 # lots of attributes
  s
end 
```

# regex - 以下正则表达式有什么作用？

> ID：10756177
> 
> 赞同：0
> 
> 时间：2012-05-25T14:26:11.883
> 
> 标签：regex

以下正则表达式有什么作用？

```
[\w+\-.]+ 
```

上述正则表达式 \w+-.+ 和 \w+\-.+ 的输出是相同的，但我不明白为什么？

测试字符串

```
sadkfj-dslk.sdjklf!sdljf 
```

你能给我解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:27:27.290

也是一样，因为反斜杠是多余的；`-`当它不表示有效字符范围（即不是字符范围）时，您实际上不需要转义`+-.`，因为无论如何它都会被视为文字破折号。

给定的正则表达式查找以下字符中的一个或多个：（`\w`单词字符）、`+`（加号）、`-`（破折号）或`.`（句点）。由于前面的反斜杠`-`是不必要的，因此是否包含它都没有区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:28:39.943

在方括号内，连字符具有特殊含义（“范围”），因此应将文字连字符转义为`\-`. 但是，根据您的特定正则表达式引擎，您可能会摆脱未转义的语法，因为在这种特殊情况下没有歧义。

（例如，Perl 将接受这两个版本并产生预期的结果，但`use warnings;`它会抱怨缺少反斜杠。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T14:32:05.840

这匹配一个“单词字符”[0-9a-zA-Z_]（\w 匹配单词字符），或一个 + 字符，或一个连字符（\ 转义 -），或一个句号，所有这些都重复不止一次。

这意味着它将匹配任何包含普通字母、下划线、加号、连字符或句号的字母字符串，前提是没有空格。简而言之 - 在我看来，这似乎是一个从 URL 中识别字符串以定位数据库条目的函数。

没有区别，因为不需要转义 - ，因为没有字符匹配“+ to .”，所以转义或未转义，没有区别。

# ios - json字段中键值的核心数据

> ID：10756182
> 
> 赞同：1
> 
> 时间：2012-05-25T14:26:38.353
> 
> 标签：ios, regex, core-data

在我的应用程序中，我需要查询核心数据，我有一个表，其中包含一个存储 json 字符串的字段。现在我需要在该表中查询在该字段中具有特定键值对的任何条目。我已经尝试使用 LIKE 表达式来解决这个问题，但由于 WILDCARDS DO MATCH THE NEWLINE 这并不顺利。现在我一直在弄清楚我必须在 MATCHES 操作中使用哪个正则表达式。

**值的键和子字符串是已知的，我只需要找到包含它们的条目，仅此而已**:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:47:41.593

用正则表达式解决它：

```
 for(NSString* value in values)
{
    if(value.length > 0)
    {
        if(i > 0)
        {
            [query appendString:@" OR "];

        }
        [query appendFormat:@" (json_data MATCHES[c] '.*?\"%@\\\":\\\"([^\"]*)%@([^\"]*)\".*?')",key,value];
        i++;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:27:22.323

您可以向该实体写入一个 getter 属性，它只返回一个普通字符串而不是 json 字符串，例如：

```
- (NSString *)stringRepresentation
{ 
  NSError *error = nil; 
  NSData* data=[self.jsonStringProperty dataUsingEncoding:NSUTF8StringEncoding];
  NSString *string = [JSONObjectWithData:data options:0 error:&error];
  if (error) {
   ... // error handling
  }
  return string;
} 
```

然后您可以在该属性上使用带有 LIKE 表达式的查询

# vim - 更改模式时，光标在 vim 中返回一个字符

> ID：10756186
> 
> 赞同：0
> 
> 时间：2012-05-25T14:26:42.047
> 
> 标签：vim, cursor-position

当我们通过按键从一个`INSERT`模式切换到另一个模式时，光标会向后移动一个位置。`NORMAL/COMMAND``Esc`

我不希望这种情况发生。`COMMAND`即使在我更改为模式后，我也希望光标位于它所在的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:36:19.593

这种行为来自good ol'vi。要更改它：

```
:inoremap <Esc> <Esc>g`^ 
```

# php - 从 PHP 中读取 mod_rewrite 配置

> ID：10756187
> 
> 赞同：0
> 
> 时间：2012-05-25T14:26:50.503
> 
> 标签：php, apache, mod-rewrite

我有一个 PHP 软件，它用 mod_rewrite 做漂亮的事情。但是相同的软件应该在未安装 mod_rewrite 的服务器上运行。如果安装了 mod_rewrite 并且应用了某个规则，我可以检查我的 php 代码吗？

例如，像这样：

```
 if ((mod_rewrite is enabled) and (mod_rewrite_rule is OK)){
        return  createBeautifullLink();
    }else{
        return createUglyLink();
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T15:03:15.983

用这个：

在**.htaccess**

```
<IfModule mod_rewrite.c>
   # inform php that mod_rewrite is enabled
   SetEnv HTTP_MOD_REWRITE on
   ... 
```

在**PHP**中：

```
$mod_rewrite = FALSE;
if (function_exists("apache_get_modules")) {
   $modules = apache_get_modules();
   $mod_rewrite = in_array("mod_rewrite",$modules);
}
if (!isset($mod_rewrite) && isset($_SERVER["HTTP_MOD_REWRITE"])) {
   $mod_rewrite = ($_SERVER["HTTP_MOD_REWRITE"]=="on" ? TRUE : FALSE); 
}
if (!isset($mod_rewrite)) {
   // last solution; call a specific page as "mod-rewrite" have been enabled; based on result, we decide.
   $result = file_get_contents("http://somepage.com/test_mod_rewrite");
   $mod_rewrite  = ($result=="ok" ? TRUE : FALSE);
} 
```

第一个（apache）可以被服务器禁用，第二个**自定义**的只有在安装了[mod_env](http://httpd.apache.org/docs/2.0/mod/mod_env.html)时才会存在于**$_SERVER**中。因此，我认为最好的解决方案是在您的 .htaccess 中创建一个**虚假**的url 重定向，该重定向指向您的某个文件（仅返回一个“ok”）并使用来自 .php 的重定向调用它；如果返回“ok”，您可以使用干净的 url.... *htaccess*中的重定向代码可能如下所示：

 ***```
<IfModule mod_rewrite.c>
   ...
   RewriteEngine on
   # fake rule to verify if mod rewriting works (if there are unbearable restrictions..)
   RewriteRule ^test_mod_rewrite/?$    index.php?type=test_mod_rewrite [NC,L] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T14:29:35.013

**（如果 PHP不在**CGI 中，则以下工作）

尝试这个 ：

```
if (function_exists('apache_get_modules')) {
   $modules = apache_get_modules();
   $mod_rewrite = in_array('mod_rewrite', $modules);
} else {
   $mod_rewrite =  getenv('HTTP_MOD_REWRITE')=='On' ? true : false ;
} 
```

或者这个：[如何在没有 apache_get_modules() 的情况下检测 mod_rewrite？](https://stackoverflow.com/questions/1301118/how-to-detect-mod-rewrite-without-apache-get-modules)

归功于[克里斯蒂安·罗伊](http://christian.roy.name/blog/detecting-modrewrite-using-php)***

# javascript - 在 HTML5 中创建拖放编辑平台

> ID：10756189
> 
> 赞同：23
> 
> 时间：2012-05-25T14:27:03.180
> 
> 标签：javascript, jquery, html, drag-and-drop

我正在考虑如何在我的应用程序中使用我想要的这个功能。基本上，我希望我的用户能够创建自定义页面，并且这些页面将被保存以供以后查看。但是，我希望有一个统一的结构和感觉。我也希望它是无痛且非常简单的。我知道我可以使用 TinyMCE 之类的东西，但有时格式化会很痛苦。

这是我想要的一个小草图：

![草图](../Images/10281f1345c098f452786935c647d82d.png)

类似于[http://www.diagram.ly/](http://www.diagram.ly/)但用于文本内容。理想情况下，一旦用户完成了页面的编辑，我只需将内容保存在 XML 中，标记代表每种内容类型，并在呈现后相应地应用样式。

是不是太复杂了，还是已经存在更简单的东西了？如果可能的话，我更喜欢使用 HTML5 ......但我愿意接受任何建议甚至其他替代方案！

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T15:19:46.940

你看过[cleditor](http://premiumsoftware.net/cleditor/)吗？结合 jquery UI 的[可拖动](http://jqueryui.com/demos/draggable/)和[可拖放](http://jqueryui.com/demos/droppable/)应该可以让你做你想做的事。

我在一个自定义的轻量级内容编辑器中使用它。效果很好。如果我再次访问该项目或做类似的事情，我会创建预配置的可拖动内容部分，以便网络新手可以更多地自定义他们的页面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-04T01:20:24.573

[medium-editor](https://github.com/yabwe/medium-editor)似乎是在[Medium](https://medium.com/)上找到的真正伟大的编辑器的管理良好的克隆，其[架构原则在此处进行了解释](https://medium.com/medium-eng/why-contenteditable-is-terrible-122d8a40e480)。

这里的解决方案将取消拖放的想法。相反，用户选择任何文本，然后会看到一个工具栏弹出，允许他们进行所需的任何格式设置。[可以自定义](https://github.com/yabwe/medium-editor#toolbar-options)该工具栏以满足最终用户的需求。

最后，您会得到一个格式良好且干净的 (X)HTML 字符串。为了做你的造型，你可以简单地注入一个`<link rel="stylesheet" href="/some/file.css" />`.

[http://jsfiddle.net/sean9999/ut7mk5x5/6/](http://jsfiddle.net/sean9999/ut7mk5x5/6/)

```
;(function(w,d,undeinfed){
    "use strict";
    d.addEventListener('DOMContentLoaded',function(){
        var e = d.querySelector('.editable'); // editable div
        var o = d.querySelector('#o'); // debug output
        var f = d.querySelector('#f'); // form
        var editor = new MediumEditor(e);
        var saveDocument = function(htmlfragments){
            var article = '<article>' + htmlfragments + '</article>';
            //    issue an AJAX call with "article" as the payload
            alert( article.replace(/\s{2,}/g,'') );
        };
        f.addEventListener('submit',function(ev){
            ev.preventDefault();
            saveDocument(e.innerHTML);
        });
        editor.subscribe('editableInput', function (event, editable) {
            o.textContent = e.innerHTML;
        });
        o.textContent = e.innerHTML;
    });
})(window,document);
```

```
h1 {
    color: gray;
    font-size: small;
}
article {
    border: 3px dotted rgba(255,0,0,.2);
    background-color: rgba(0,0,0,.0333);
    padding: 1em;
}
button {
    font-size: bigger;
    padding: .5em;
    margin: .5em;
}
.editable {
    outline: none;
}
output {
    border: 3px dotted rgba(0,0,255,0.25);
    margin-top: 1em;
    min-height: 5em;
    display: block;
    padding: 1em;
    font-family: Verdana;
    font-size: 10px;
}
```

```
<link href="http://yabwe.github.io/medium-editor/bower_components/medium-editor/dist/css/medium-editor.css" rel="stylesheet"/>
<link href="http://yabwe.github.io/medium-editor/bower_components/medium-editor/dist/css/themes/default.css" rel="stylesheet"/>
<link href="http://cdn.jsdelivr.net/medium-editor/latest/css/medium-editor.min.css" rel="stylesheet"/>
<script src="http://cdn.jsdelivr.net/medium-editor/latest/js/medium-editor.min.js"></script>

<section>
    <article>
        <div class="editable">
            <h2>Edit me, I'm a heading.</h2>
            <p>Edit me too, Chambray letterpress Godard meh, Echo Park slow-carb post-ironic whatever farm-to-table. Sriracha disrupt retro 90's, quinoa deep v Vice migas freegan pickled tattooed. Fashion axe meggings small batch, scenester Carles banh mi Shoreditch salvia.</p>
        </div>        
    </article>
</section>

<form name="f" id="f" action="#">
    <button type="submit">save the document</button>
</form>

<output for="f" id="o"></output>
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-29T20:25:23.127

打开赏金后环顾四周。也许使用[原子文本编辑器](https://atom.io/)进行降价并使用[降价预览](https://github.com/atom/markdown-preview)可能是一种方法？然后你可以使用[pandoc](http://pandoc.org/)之类的工具将 markdown 转换为 xml。

我知道它不是拖放，但它比 M$ 字更好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-04T11:29:27.387

试试hammerJS，我想它可以帮助你

[http://hammerjs.github.io/](http://hammerjs.github.io/)

# actionscript-3 - 带有演示模型的 Flex

> ID：10756190
> 
> 赞同：0
> 
> 时间：2012-05-25T14:27:07.620
> 
> 标签：actionscript-3, apache-flex, flex4.5, videodisplay, presentation-model

如何从演示模型中控制 videodisplay.stop、pause()、close 等视频显示功能？但我需要从演示模型中控制它。自定义事件不是我的选择，因为这很昂贵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:53:01.137

我使用 Binding 标签来解决类似的问题（在 ESRI 地图上调用 centerAt）：

```
<fx:Binding source="model.videoState" destination="videoState"/>
<fx:Script>
    <![CDATA[
        private function set videoState(value:String):void
        {
            // do whatever is to be done 
```

这避免了自定义事件，并保留了模式：您的演示模型不知道视频显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T19:54:38.447

看看我的[方法背后的代码](https://stackoverflow.com/questions/10835854/flash-builder-4-6-code-behind-approach/10841887#10841887)：你可以给模型一个 id 并在它上面调用方法。但我真的不认为自定义事件太昂贵。

# c# - 表达式树深度限制

> ID：10756191
> 
> 赞同：5
> 
> 时间：2012-05-25T14:27:17.557
> 
> 标签：c#, delegates, expression, expression-trees, anonymous-function

我在尝试对具有大约 400 深度的 Expression<Func<MyType, bool>> 类型的 LambdaExpression 调用 Compile() 时遇到问题。较小的值不会导致任何问题。而且我找不到任何关于这种限制的信息。任何人都可以澄清这一点吗？我可以增加这个限制吗？

upd：对不起，忘了提，我收到 StackOverflowException：

*System.Core.dll 中发生“System.StackOverflowException”类型的未处理异常{无法评估表达式，因为当前线程处于堆栈溢出状态。}*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:54:19.150

您合法地遇到了堆栈大小的限制（尽管我质疑 400+ 项 lambda 的智慧）。绕过它的最简单方法是创建一个新线程，专门用于使用更大的堆栈执行此编译，使用将堆栈大小作为参数的线程构造函数：http: [//msdn.microsoft.com/en-us/library /ms149581.aspx](http://msdn.microsoft.com/en-us/library/ms149581.aspx)

在该线程中调用 compile 并根据需要增加堆栈大小参数。我相信它以字节为单位，这将使默认值约为 1048576，因此从那里开始并根据需要提高它。

# ruby-on-rails-3 - 本地主机上可用的页面在 heroku 应用程序上不可用

> ID：10756194
> 
> 赞同：0
> 
> 时间：2012-05-25T14:27:19.213
> 
> 标签：ruby-on-rails-3, heroku

我刚刚开始在 Rails 中制作应用程序。当我运行我的本地服务器时，链接到我已经正常工作的一些静态页面（存储在应用程序/视图/页面/文件夹中）。但是，当我成功将此应用程序推送到 heroku 并尝试导航到这些页面时，我会收到标准的“抱歉出现问题”消息。我已经修改了索引页面，所以我知道这些更新正在运行。任何帮助，将不胜感激。

我浏览了[http://railsapps.github.com/rails-heroku-tutorial.html](http://railsapps.github.com/rails-heroku-tutorial.html)，[简单的测试应用程序部署到 Heroku 但不会运行](https://stackoverflow.com/questions/7823020/simple-test-app-deploys-to-heroku-but-wont-run)

我在 cedar 堆栈上运行并运行 heroku run rake db:migrate

当我执行 heroku run rake routes 时，它会返回：

```
pages_home GET /pages/home(.:format)    pages#home
pages_contact GET /pages/contact(.:format) pages#contact
pages_about GET /pages/about(.:format)   pages#about 
```

我正在运行 rails 3.2，但运行 ruby​​ 1.8.7。我在osx lion上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:36:17.950

好的，所以错误是我没有预编译我的 CSS。所以你所要做的就是预编译它。为此，只需键入`bundle exec rake assets:precompile`，然后执行所有正常的 git commit、push 和 heroku push 业务。

# ms-access - 多字段主键

> ID：10756197
> 
> 赞同：0
> 
> 时间：2012-05-25T14:27:24.920
> 
> 标签：ms-access, multikey, lookup-field

由于我无法理解的原因，提供我的表格的人没有任何形式的单字段唯一标识来标识他们表格中的 20k+ 条目。

我有两个字段，BuildingCode 和 RoomCode，它们共同构成了一个独特的房间。例如：

```
BuildingCode    RoomCode    OtherInfo
001             100A        This is room 100 A in building 1
001             101         Different room in the same building
002             100A        This is still unique, even though two 100As exist 
```

我知道我可以在一个“MainIndex”下告诉对这两个字段的索引访问，并确保没有重复。我不知道该怎么做是允许另一个表引用其中一个房间作为其父级（一对多关系）。

在我的计算机表中，我希望引用一个特定的房间。也就是说，我希望确保 RoomRef 是对一个唯一房间的引用。我该怎么做？

```
ComputerSN     RoomRef
ABC123         001-100A
ABC124         002-100A 
```

由于它们实现数据更新的方式（在房间表中），我无法更改给定房间表的布局。

任何帮助显然表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:49:12.057

Room ref 应包含两个字段以匹配数据。然后加入查询就足够简单了。例如

```
 SELECT DataTable.BuildingCode, DataTable.RoomCode, Count(DataTable.RoomCode)
 FROM DataTable
 INNER JOIN LookUpTable
 ON DataTable.BuildingCode = LookUpTable.BuildingCode
 AND DataTable.RoomCode= LookUpTable.RoomCode
 GROUP BY DataTable.BuildingCode, DataTable.RoomCode 
```

或者那里。

# android - Android Alpha动画：动画结束后Alpha值跳回旧值

> ID：10756198
> 
> 赞同：11
> 
> 时间：2012-05-25T14:27:25.997
> 
> 标签：android, animation, alpha, alpha-transparency

我在布局上有一个 ImageButton 视图。如果用户单击 ImageButton，则该按钮应淡出。

按钮淡出动画将像这样开始：

```
public void buttonClicked(View aButton){

    final Animation aAnim = new AlphaAnimation(1.0f, 0.0f);
    aAnim.setDuration(500);

    aButton.startAnimation(aAnim);

} 
```

这可行，但是一旦 ImageButton 淡出，它的 Alpha 值就会立即跳回 1.0，并且该按钮再次可见。

我用一个动画监听器暂时解决了这个问题，它在动画结束时将 ButtonImage 设置为不可见，但这对我来说似乎是一个奇怪的解决方案。

我该怎么做才能将按钮 Alpha 值保持在动画的最后一个值？

谢谢你。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-25T14:31:53.653

尝试使用`aAnim.setFillAfter(true);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T07:09:36.223

如果要在动画完成时设置新值，则必须将“setFillAfter”设置为 true。

```
public void buttonClicked(View aButton){    
    final Animation aAnim = new AlphaAnimation(1.0f, 0.0f);
    aAnim.setDuration(500);

    aAnim.setFillAfter(true);
    aButton.startAnimation(aAnim);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-13T14:11:06.780

# android - 在 Android 中定位内存泄漏

> ID：10756199
> 
> 赞同：1
> 
> 时间：2012-05-25T14:27:26.793
> 
> 标签：android, memory-leaks, android-context

我有一个将内容视图设置为自定义视图并将上下文传递给它的活动。从那里通过将上下文传递给它们的构造函数来实例化多个对象。当我玩我的游戏时，内存使用量从大约 7mb 开始一直上升到 60 左右，然后崩溃和冻结。我想知道如何找到这个内存泄漏，以及在不泄漏的情况下将上下文从一个类传递到另一个类的规则是什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:47:49.897

按照[此处](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html)的步骤分析您的内存使用情况。

# ios - UIWebViewDelegate 在 ARC 中手动发布？

> ID：10756202
> 
> 赞同：4
> 
> 时间：2012-05-25T14:27:30.370
> 
> 标签：ios

UIWebViewDelegate 协议参考指出：

> 在释放您已为其设置委托的 UIWebView 实例之前，您必须先将 UIWebView 委托属性设置为 nil，然后再释放 UIWebView 实例。例如，这可以在您处理 UIWebView 的 dealloc 方法中完成。

ARC中还有必要吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:05:35.243

如果委托被定义为 WEAK 属性，则不需要取消委托，因为 ARC 会为您执行此操作。但是，如果类没有使用 ARC 编译并且委托标记为“assign”，则必须小心并自己将其设置为 nil。

# mysql - 设置应用组合唯一索引 w/ignore 后在 mysql 上删除哪些行

> ID：10756203
> 
> 赞同：2
> 
> 时间：2012-05-25T14:27:32.817
> 
> 标签：mysql, indexing

假设我有一个包含几列的表。我知道如何找到重复项，然后用这个表达式只保留一个记录，添加一个组合索引......

```
ALTER IGNORE TABLE part3 ADD UNIQUE INDEX (gtu, region, trait, pop, author, risk) 
```

...但我希望能够控制将被删除的行；不仅仅是具有“*第一行在唯一键上重复的行*”的行，如[mysql doc](http://dev.mysql.com/doc/refman/5.0/en/alter-table.html)中所述。我的意思是，我确实想指定未删除的行必须是在名为*zvalue*的列字段中具有次要值的行。

有什么建议吗？？这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:48:27.803

不要试图删除你不需要的东西，而是试着把它想象成一个问题，你想选择你想要的，而忽略其余的；像这样：

```
CREATE TABLE `other_table` LIKE `part3`;
INSERT INTO `other_table`
SELECT `part3`.*
FROM (SELECT gtu, region, trait, pop, author, risk, MAX(zvalue) AS max_zval
    FROM `part3`
    GROUP BY gtu, region, trait, pop, author, risk
) `tmp`
INNER JOIN `part3` USING (gtu, region, trait, pop, author, risk)
WHERE `part3`.zvalue = `tmp`.max_zval; 
```

那应该创建一个`other_table`满足数据中唯一约束的表；只有最高的行`zvalue`被保留，其他的被删除（跳过）。

# c# - 使用 Open XML 2.0 在 Excel 中获取单元格背景颜色

> ID：10756206
> 
> 赞同：8
> 
> 时间：2012-05-25T14:27:35.877
> 
> 标签：c#, excel, .net-4.0, openxml-sdk

我正在尝试在 excel 电子表格中获取单元格的背景颜色。例如，我正在使用 Open XML 2.0 SDK，并且能够打开 *.xlsx 文件并获取单元格值。我获取背景颜色的代码如下：

```
 public BackgroundColor GetCellBackColor(Cell theCell, SpreadsheetDocument document)
    {
        BackgroundColor backGroundColor = null;
        WorkbookStylesPart styles = SpreadsheetReader.GetWorkbookStyles(document);
        int cellStyleIndex = (int)theCell.StyleIndex.Value;
        CellFormat cellFormat = (CellFormat)styles.Stylesheet.CellFormats.ChildElements[cellStyleIndex];
        Fill fill = (Fill)styles.Stylesheet.Fills.ChildElements[(int)cellFormat.FillId.Value];
        backGroundColor = fill.PatternFill.BackgroundColor;

        return backGroundColor;
    } 
```

我的问题是，`PatternFill.BackgroundColor`它只返回一个自然数，我认为它是样式的 id。我的问题是，那行代码

```
DocumentFormat.OpenXml.Spreadsheet.Color c = (DocumentFormat.OpenXml.Spreadsheet.Color)styles.Stylesheet.Colors.ChildElements[Int32.Parse(backGroundColor.InnerText)]; 
```

返回错误，因为`Stylesheet.Colors`is `null`... ...也许是因为我在 excel 中使用了“内置”颜色 - 不是自定义颜色？！

有什么想法可以从“backGroundColor-Value”中“计算”出真实的颜色编号吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T18:49:38.107

Excel电子表格中单元格的填充图案由两种颜色组成：背景色和前景色。前景色一词在这里有点误导。它不是字体的颜色，而是图案填充的前景色。

例如，如果您用纯色填充单元格的背景，则单元格的相关对象的`ForegroundColor`属性将`PatternFill`设置为选择的纯色值，其中`BackgroundColor`对象设置为系统前景色。对象的`PatternType`属性 `PatternFill`设置为`PatternValues.Solid`。

因此，要获取单元格背景的颜色值（实心填充），您必须分析`ForegroundColor`相关`PatternFill`对象的属性。您必须确定实例代表的“颜色类型”：

1.  自动颜色和系统相关颜色
2.  索引颜色。
3.  ARGB 颜色（alpha、红色、绿色和蓝色）
4.  基于主题的颜色。
5.  应用于颜色的色调值。

有关不同“颜色类型”的更多信息，请参见以下 [链接](http://msdn.microsoft.com/en-us/library/documentformat.openxml.spreadsheet.foregroundcolor.aspx)。

请注意，and类的`InnerText`属性含义 取决于颜色类型。例如，在基于主题的颜色的情况下，该属性设置为集合中的索引。`ForegroundColor``BackgroundColor``InnerText``ColorScheme`

以下示例打印电子表格文档中所有单元格的所有背景颜色信息：

```
public static PatternFill GetCellPatternFill(Cell theCell, SpreadsheetDocument document)
{ 
  WorkbookStylesPart styles = SpreadsheetReader.GetWorkbookStyles(document);

  int cellStyleIndex;
  if (theCell.StyleIndex == null) // I think (from testing) if the StyleIndex is null
  {                               // then this means use cell style index 0.
    cellStyleIndex = 0;           // However I did not found it in the open xml 
  }                               // specification.
  else
  {
    cellStyleIndex = (int)theCell.StyleIndex.Value;
  }      

  CellFormat cellFormat = (CellFormat)styles.Stylesheet.CellFormats.ChildElements[cellStyleIndex];

  Fill fill = (Fill)styles.Stylesheet.Fills.ChildElements[(int)cellFormat.FillId.Value];
  return fill.PatternFill;  
}

private static void PrintColorType(SpreadsheetDocument sd, DocumentFormat.OpenXml.Spreadsheet.ColorType ct)
{
  if (ct.Auto != null)
  {
    Console.Out.WriteLine("System auto color");
  }

  if (ct.Rgb != null)
  {
    Console.Out.WriteLine("RGB value -> {0}", ct.Rgb.Value);
  }

  if (ct.Indexed != null)
  {
    Console.Out.WriteLine("Indexed color -> {0}", ct.Indexed.Value);

    //IndexedColors ic = (IndexedColors)styles.Stylesheet.Colors.IndexedColors.ChildElements[(int)bgc.Indexed.Value];         
  }

  if (ct.Theme != null)
  {
    Console.Out.WriteLine("Theme -> {0}", ct.Theme.Value);

    Color2Type c2t = (Color2Type)sd.WorkbookPart.ThemePart.Theme.ThemeElements.ColorScheme.ChildElements[(int)ct.Theme.Value];

    Console.Out.WriteLine("RGB color model hex -> {0}", c2t.RgbColorModelHex.Val);
  }

  if (ct.Tint != null)
  {
    Console.Out.WriteLine("Tint value -> {0}", ct.Tint.Value);
  }
}

static void ReadAllBackgroundColors()
{
  using (SpreadsheetDocument spreadsheetDocument = SpreadsheetDocument.Open("c:\\temp\\bgcolor.xlsx", false))
  {
    WorkbookPart workbookPart = spreadsheetDocument.WorkbookPart;
    foreach(WorksheetPart worksheetPart in workbookPart.WorksheetParts)
    {
      SheetData sheetData = worksheetPart.Worksheet.Elements<SheetData>().First();

      foreach (Row r in sheetData.Elements<Row>())
      {
        foreach (Cell c in r.Elements<Cell>())
        {            
          Console.Out.WriteLine("----------------");
          PatternFill pf = GetCellPatternFill(c, spreadsheetDocument);        

          Console.Out.WriteLine("Pattern fill type -> {0}", pf.PatternType.Value);

          if (pf.PatternType == PatternValues.None)
          {
            Console.Out.WriteLine("No fill color specified");
            continue;
          }

          Console.Out.WriteLine("Summary foreground color:");
          PrintColorType(spreadsheetDocument, pf.ForegroundColor);
          Console.Out.WriteLine("Summary background color:");
          PrintColorType(spreadsheetDocument, pf.BackgroundColor);                          
        }
      }     
    }
  }
}

static void Main(string[] args)
{ 
  ReadAllBackgroundColors();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-26T07:22:59.297

好吧，我有一个类似的用例，在该用例中，我需要测试将哪种 RGB 颜色用作单元格的背景颜色。只是附加到你的函数中的代码，

```
backGroundColor = fill.PatternFill.BackgroundColor.Rgb.Value;
return backgroundColor; 
```

这将返回单元格背景中使用的 Rgb 颜色值。

# email - 有没有办法确定用户何时将电子邮件标记为垃圾邮件

> ID：10756213
> 
> 赞同：-4
> 
> 时间：2012-05-25T14:28:08.083
> 
> 标签：email, spam

假设我正在为电子邮件营销构建软件，有没有办法确定电子邮件的最终接收者是否将其标记为垃圾邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:33:00.373

并不真地。我唯一想到的是将图像放入邮件中，提供特定 ID 以检查用户是否查看邮件。过了一会儿，您可以说，当图像中没有任何内容时，用户已将其标记为垃圾邮件或没有阅读它。

但是几乎每个邮件客户端都是第一次禁用图像加载，并且还有其他用户不查看 HTML 邮件，因此他们不会加载图像。

我希望我对你有一点帮助

# audio - 如何比较两个音频数据？

> ID：10756214
> 
> 赞同：4
> 
> 时间：2012-05-25T14:28:09.717
> 
> 标签：audio, voice-recognition, voice-recording

我会录制我自己的声音，并将它们保存为我的计算机中的 wav 文件。稍后我会说话，计算机应该将我的语音命令与预先存在/预先录制的 wav 文件匹配..

问题：如何检查两个音频数据是否相等或两个音频之间有 80% 匹配？

```
if(audio1 == audio2)
   DO Task A
else if( audio1 is a bit similar to audio 2)
   DO TASK B
else if( audio1 (80% match) audio 2)
   DO TASK C
end if 
```

比较两个音频数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:12:53.567

不幸的是，仅尝试直接比较音频波形，您不会很快到达任何地方。有大量关于语音和说话人识别的研究，如果你不熟悉基础知识，你只会重新发明轮子。我认为您在这里有多种选择，具体取决于您真正想做的事情

*   开始阅读 HMM、DTW（如 learnvst 所述）和[Mel 频率倒谱系数](http://en.wikipedia.org/wiki/Mel-frequency_cepstrum)以了解从哪里开始。
*   使用现有的语音 API，例如负责低级信号处理的[Microsoft语音 API，您可以将其构建到您的应用程序中](http://en.wikipedia.org/wiki/Microsoft_Speech_API)
*   使用更高级别的东西，例如[Windows 语音识别宏](http://archive.msdn.microsoft.com/wsrmacros)，它使您能够通过语音控制 PC 的各个方面（例如“播放紫雾”）

这取决于您是否想了解低水平的语音处理（这将涉及大量数学），或者您是否只想要一些几乎不需要编码的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T19:00:52.047

**[您可以从自制语音识别](http://www.generation5.org/content/2004/noReco.asp)**中找到一些想法。这适用于`.NET`紧凑的框架，但可以很容易地适应普通`vanilla .NET`的 . 该解决方案基于*快速傅里叶变换*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T17:19:52.573

类似，你的意思是纯粹的数字吗？在这种情况下，交叉相关类型分析可能就足够了。否则，如果您的意思是人类听众对声音样本的听觉感知相似，那么您需要阅读声学指纹。

# 编辑：

我从您的更新中猜测您想做一种简单的语音识别形式，对吗？如果是这种情况，那么在非常有限的语料库中为信号获得最佳匹配的最佳选择是基于[动态时间规整 (DTW)](http://en.wikipedia.org/wiki/Dynamic_time_warping)的识别器。 [基于隐马尔可夫模型](http://en.wikipedia.org/wiki/Hidden_Markov_model)的识别系统是最先进的，但基于 DTW 的系统实现起来要简单得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T23:03:59.960

正如其他人所建议的那样，除非您可以提供更多信息，否则没有简单的解决方案。如果它们只是很短的声音，不会随时间发生太大变化，一种可能性是进行 FFT 并比较 FFT 的结果。

对于更复杂的事情，您可以采用类似的方法，但使用 STFT。

但是，您的问题很可能有特定领域的答案。

# iis-7 - IIS 7 在经典 ASP 中未显示错误。IIS 6 可以

> ID：10756224
> 
> 赞同：4
> 
> 时间：2012-05-25T14:29:02.813
> 
> 标签：iis-7, asp-classic, iis-6

我们有一个用经典 asp 编写的旧网站。我们将它托管在 iis6 上。每当出现错误时，它都会将错误的详细信息和描述发送给客户端。

问题是，在我们将其移至 IIS7 后，一些“错误”不会出现。例如

```
<% 
sdfkjlsfjl
%> 
```

这将在 iis6 上触发错误，但在 iis7 上它会简单地显示一个空白屏幕。另一方面，如果我这样做

```
<%
if a=1
end if
%> 
```

它会在两个服务器中引发关于缺少“然后”的错误

有人遇到过这个吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T23:16:49.330

在 IIS7 中，您需要为 ASP 启用客户端调试。

1.  打开 IIS 管理器
2.  在功能视图中，双击 ASP。
3.  在那里你会看到一个“调试属性”部分
4.  将要更改的属性从 False 更改为 True。
5.  重新启动 IIS
6.  测试以查看错误现在是否正在发送到浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:08:34.783

我无法重现您在 IIS7 上描述的行为。

但是，我怀疑您的代码中实际拥有的是`On Error Resume Next`. 这会捕获**运行时**错误，例如您的第一个示例代码。但是，您的第二个示例包含**编译**错误。语法错误是不可捕获的，脚本甚至不会开始执行。相反，ASP 将编译错误以 500.100 状态返回给 IIS。

另一个不太可能的可能性是您关闭了响应缓冲，并且之前已经发送到浏览器的一些奇怪内容使错误不可见（尝试使用查看源来确认）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-22T01:54:11.403

在**IIS**中，在**Features** ... **ASP** ... **Debugging Properties**下：

将**启用服务器端调试**设置为**False**。这将治愈死亡的空白屏幕。

如果您想查看实际错误而不是*服务器上发生错误...*那么

将**Send Errors to Browser**设置为**True**。

# facebook - 是否可以使用 API 找到 Facebook 共同好友？

> ID：10756230
> 
> 赞同：1
> 
> 时间：2012-05-25T14:29:18.507
> 
> 标签：facebook

我想知道是否可以使用 Facebook API 或 Open Graph 和两个用户 ID 来输出共同的朋友？

因为我已经设法做到了，但它只列出了“玩你的游戏”的共同朋友，而不是整个列表。

下面是我创建的功能：

```
function getMutualFriends($facebook, $uid1, $uid2,$amount=3){
    $random_ids     = array();
    try {
        $param  =   array(
                    'method'  => 'friends.getMutualFriends',
                    'source_uid'    => $uid1,
                    'target_uid'  => $uid2,
                    'callback'=> ''
                );
        $mutualFriends   =   $facebook->api($param);
        if(count($mutualFriends) < $amount){
            $amount = count($mutualFriends);
        }
        $random = pickrandom($mutualFriends,$amount);

        for($i=0; $i<$amount; $i++){
            $random_ids[] = get_name($random[$i]);
        }
        $output = implode(",\n", $random_ids);
        print_r($output);
    //  print_r($mutualFriends);

    }
    catch(Exception $o) {
        print_r($o);
    }
   // return 'None';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:52:28.590

您正在使用的方法（[friends.getMutualFriends](http://developers.facebook.com/docs/reference/rest/friends.getMutualFriends/)）属于已弃用的 REST API：

> 请注意：我们正在弃用 REST API。我们添加了与此调用等效的 Graph API，它是 User 对象的“mutualfriends”连接。对此的示例调用`/PROFILE_ID/mutualfriends/FRIEND_ID`将返回 PROFILE_ID 与 FRIEND_ID 的共同朋友。

所有你需要知道的就在那里，只需使用[User 对象的共同朋友连接](http://developers.facebook.com/docs/reference/api/user/#mutualfriends)。

此外，如果您想比较安装了您的应用程序的两个用户，那么您可以获取两个用户的朋友 ( `USER_ID/friends`) 并比较自己。

# c# - Json.NET SerializeObject 转义值以防止 XSS

> ID：10756232
> 
> 赞同：30
> 
> 时间：2012-05-25T14:29:25.170
> 
> 标签：c#, .net, json, json.net

使用 Json.NET

```
JsonConvert.SerializeObject(new { Property = "<script>alert('o hai');</script>" }) 
```

返回

```
{"Property":"<script>alert('o hai');</script>"} 
```

SerializeObject 是否可以转义该值以防止执行恶意脚本？我不希望对对象本身进行更改。

编辑：理想情况下，我想将清理集成到 SerializeObject 调用中，而不必在 SerializeObject 之前或之后处理对象。

编辑：输出的字符串`JsonConvert.SerializeObject`被分配给脚本块中的全局变量，我相信这是 XSS 问题所在。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-10-10T09:39:36.933

[在4.5.11 版本](http://james.newtonking.com/archive/2012/11/20/json-net-4-5-release-11-serialization-tracing)中添加了实现此目的的功能

这允许您向输出添加各种类型的转义。

这是我的 LinqPad 测试：

```
 var settings = new JsonSerializerSettings();

    settings.StringEscapeHandling = StringEscapeHandling.EscapeHtml;

    var output = JsonConvert.SerializeObject(new { Property = "<script>alert('o hai');</script>" }, settings);

    Debug.Print(output); 
```

输出

```
{"Property":"\u003cscript\u003ealert(\u0027o hai\u0027);\u003c/script\u003e"} 
```

就像免责声明一样，这不是修复 xss 的金子弹，但应该根据您的示例帮助您减轻它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-29T18:15:14.520

这可能并不理想，但这是我的解决方案（至少现在）：

```
JsonConvert.SerializeObject(new { Property = "<script>alert('o hai');</script>" }, new HtmlEncodeStringPropertiesConverter()); 
```

使用简单的 JsonConverter 对值执行 HtmlEncode（如果它是字符串）

```
public class HtmlEncodeStringPropertiesConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(string);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        writer.WriteValue(Encoder.HtmlEncode(value.ToString()));
    }
} 
```

（`Encoder`来自`Microsoft.Security.Application.Encoder`AntiXSS 库）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-10-22T12:23:05.620

在 .NET Core 3.0 中，`System.Text.Json.JsonSerializer`默认转义 html 字符。

```
var text = "<script>alert('o hai');</script>";

var json = System.Text.Json.JsonSerializer.Serialize(new { Property = text });

Console.WriteLine(json); 
```

输出

```
// .NETCoreApp,Version=v3.0
{"Property":"\u003Cscript\u003Ealert(\u0027o hai\u0027);\u003C/script\u003E"} 
```

# 文档

[如何在 .NET](https://docs.microsoft.com/en-us/dotnet/standard/serialization/system-text-json-how-to#serialization-behavior)中*序列化和反序列化 JSON 在序列化行为*部分中说：

> [默认编码器](https://docs.microsoft.com/en-us/dotnet/api/system.text.encodings.web.javascriptencoder.default?view=netcore-3.0#System_Text_Encodings_Web_JavaScriptEncoder_Default)转义非 ASCII 字符、ASCII 范围内的HTML 敏感字符以及必须根据[JSON 规范](https://www.rfc-editor.org/rfc/rfc8259#section-7)转义的字符。

还请检查[JavaScriptEncoder.UnsafeRelaxedJsonEscaping](https://docs.microsoft.com/en-us/dotnet/api/system.text.encodings.web.javascriptencoder.unsaferelaxedjsonescaping?view=netcore-3.0#remarks)的备注，因为它包含一系列以*与 Default*开头的备注。

* * *

# 我不想逃避它

`JavaScriptEncoder.UnsafeRelaxedJsonEscaping`需要设置为**关闭**默认行为。

```
var options = new System.Text.Json.JsonSerializerOptions() { 
  Encoder = System.Text.Encodings.Web.JavaScriptEncoder.UnsafeRelaxedJsonEscaping
};
var json2 = System.Text.Json.JsonSerializer.Serialize(new { Property = text }, options); 
Console.WriteLine(json2); 
```

```
{"Property":"<script>alert('o hai');</script>"} 
```

## `UnsafeRelaxedJsonEscaping`的文档

[备注](https://docs.microsoft.com/en-us/dotnet/api/system.text.encodings.web.javascriptencoder.unsaferelaxedjsonescaping?view=netcore-3.0#remarks)`UnsafeRelaxedJsonEscaping`：_

> 与默认编码器不同，此编码器实例不会转义 HTML 敏感字符，例如 <、>、&。因此，必须谨慎使用；例如，如果输出数据在内容类型已知且字符集设置为 UTF-8 的响应中，则可以使用它。
> 
> 与默认编码不同，引号被编码为 " 而不是 \u0022。
> 
> 与默认编码（仅允许 UnicodeRanges.BasicLatin）不同，使用此编码器实例允许 UnicodeRanges.All 未经转义。
> 
> 与默认编码器不同，此编码器实例允许其他一些字符（例如“+”）不转义，因此必须谨慎使用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-25T14:30:47.900

不，JSON.NET 是一个 JSON 序列化程序。它不是 XSS 消毒剂。您可以查看 Microsoft 的[AntiXSS](http://wpl.codeplex.com/)库。这是[MSDN 上的一篇](http://msdn.microsoft.com/en-us/library/aa973813.aspx)关于其用法的文章（有点过时但仍然相关）。

# css - 相互嵌套多个 div

> ID：10756236
> 
> 赞同：0
> 
> 时间：2012-05-25T14:29:44.997
> 
> 标签：css

我有 3 个`div`容器，`#containerA`即`#containerB`和`#containerC`。

我想在 的坐标`#containerB`内`#containerA`和相对于 `#containerA`的坐标定位。所以，我设置`#containerA`有 position: relative 和 #containerB 有`position: absolute`. 这边走：

```
#containerA {
  position: relative;
}
#containerB {
  position: absolute;
} 
```

这在`#containerA`和之间运行良好`#containerB`。现在，我想`#containerC`在`#containerB`. 但是，将 设置 `#containerB`为 have`position: relative`会导致`#containerB`失去对 的尊重`#containerA`。代码看起来是这样的：

```
#containerA {
  position: relative;
}
#containerB {
  position: relative;
}
#containerC {
  position: absolute;
} 
```

那么，我应该怎么做才能让`divs`彼此嵌套在一个`#containerC`相对于的位置`#containerB`和 `#containerB`相对于的位置`#containerA`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:51:29.053

**第1步**：你设置`#containerA`有`position: relative;`；然后`#containerB`和`#containerC`有`position: absolute;`。

**第 2 步**：您可以`#containerB`使用`left: 10px;`和来定位`top: 20px;`（只是示例，您可以将值替换为您想要的任何值）。

**第 3 步**：假设您要定位`#containerC`到 5px 的顶部和 5px 的左侧`#containerB`。然后你设置`left: 5px;`和`top: 5px;`

测试：[http](http://dabblet.com/gist/2788586) ://dabblet.com/gist/2788586 - 带有青色背景的元素具有`position: static`. 它可以设置为相对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:34:13.213

`position:relative`用于**设置**使用`position:absolute`.

如果你想要关于 A 的 B，那么 A 将使用`position:relative`，那么 B 将在 A 内部，并带有`position:absolute`。您还应该指定位置：top,left 或 bottom,right。

```
<div id="A">
    <div id="B"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T14:34:31.543

您可以将其保持为`position: absolute`on `#containerB`，然后设置`position: absolute`on`#containerC`将其相对于`#containerB`

# ios - 是否可以在 UITableView 中逐页滚动？

> ID：10756239
> 
> 赞同：0
> 
> 时间：2012-05-25T14:29:51.940
> 
> 标签：ios, xcode, uiscrollview

我有一个垂直滚动的 UIScroll View，每个单元格都包含一个水平滚动的 UIScrollView。我使用本[教程](http://www.raywenderlich.com/4723/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-2)中的信息创建了它我希望水平表逐页滚动（如果您有多个应用程序页面，您的主屏幕滚动方式相同。这可能在 UITableView 中吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:36:49.250

所以你有一个包含多个单元格的 UITableView，并且这些单元格持有水平滚动的 UIScrollView，对吧？

您可以像这样为 UIScrollView 设置 pagingEnabled：

```
[_scrollView setPagingEnabled:YES]; 
```

只需确保 UIScrollView 的 contentSize 至少比它的框架宽度大 2 倍，这样您就可以真正“翻页”了 :)

# java - Java 中的 final 是做什么的？- 硬版

> ID：10756241
> 
> 赞同：4
> 
> 时间：2012-05-25T14:29:58.987
> 
> 标签：java, inner-classes, final

我从小就知道这`final`是一个关键字，当应用于变量时，不能将变量重新分配给其他东西。“如果一个变量是最终的，那么它就是一个常数”总结了很多，虽然我不喜欢这个定义，但这可能是记住这个概念的好方法。我只是更愿意这么说`you cannot change the value of the variable`（无论“价值”是什么意思）。

我的生活很快乐，但有一天我更深入地了解了`method local inner classes`......

在方法内部定义的内部类不能访问在方法本身中定义的变量。为什么？因为虽然类存在于堆中并且在方法完成后它可能会保持存在（类的有效引用可能会被传递并存储在其他地方），但这些变量存在于堆栈中，并且在方法返回时它们会消失。我们不希望有一个内部类试图访问一个以后不再存在的变量，因为那样世界就会结束。

完美的。这说得通。出色的！然后：除非您将这些变量声明为 final .....然后您的类可以访问它们并且编译器不会将您送入地狱...

`WHY???`我的意思是，这是什么魔法？final 到底做了什么，为什么我不得不等待谈论方法本地内部类来解决这个问题？假设最终变量无论在哪里定义都存储在堆中，除了让方法本地内部类快乐的概念之外，还有其他应用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T14:39:11.997

引自“[关于最终关键字的最后一句话](http://renaud.waldura.com/doc/java/final-keyword.shtml)”：

> 如果我们对局部类的实现方式有所了解，这种限制的原因 [局部类只能引用声明为 final 的局部变量和参数。] 就显而易见了。匿名本地类可以使用局部变量，因为编译器会自动为该类提供一个私有实例字段来保存该类使用的每个局部变量的副本。编译器还会为每个构造函数添加隐藏参数来初始化这些自动创建的私有字段。因此，本地类实际上并不访问局部变量，而只是访问它们自己的私有副本。唯一可以正常工作的方法是，如果局部变量被声明为 final，这样就可以保证它们不会改变。有了这个保证，

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T14:40:22.527

在您所指的情况下，您可能会陷入奇怪的情况。当您在方法中创建内部类时，该内部类的范围可以超过方法调用的生命周期。因此，如果您允许内部类引用仅在方法本身内定义的变量，那么当方法完成时会发生什么？

例如：

```
public void doSomethingLater()
{
  int value = 13;

  Thread t = new Thread(new Runnable() { 
    @Override public void run() {
      System.out.println("The value is " + value);
    }
  });
  t.start();

  value = 25;
} 
```

假设这是允许的 java 代码。该程序在运行时会打印什么？13？25？为了实现内部类对方法局部变量的访问，Java 设计者决定采用简单的方法，即在内部类创建时复制变量的值。为了让 Java 程序员清楚地知道该值已被复制，他们强制您使用最终引用，以便您的方法无法在将来的某个时间点修改该变量（这可能会使期望新值会影响的开发人员感到困惑）内部类）。

实际上，这就是幕后发生的事情：

```
public void doSomethingLater()
{
  int value = 13;

  Thread t = new Thread(new Runnable() { 
    private final _innerValue = value;
    @Override public void run() {
      System.out.println("The value is " + _innerValue);
    }
  });
  t.start();

  value = 25;
} 
```

因此，可以看到后面对 value 的修改不会影响到内部类。

更新：

好吧，猜猜@pgras 打败了我。无论如何，这是该答案中包含的引用示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T14:33:16.697

在 Java`final`中，字面意思是“如果一个变量是最终的，它就是一个常量”，但这并不意味着很多人认为它意味着什么。

对于原语，它确实*意味着*这一点。但是对于对象，所有`final`的意思是你不能改变变量所指的对象实例。但是，您*完全可以*根据需要更改该对象。

这就是方法本地内部类需要声明它引用的变量的原因`final`。它们被声明为 final 保证了该方法不能更改这些变量引用的对象，这是方法内部类正常运行所必需的保证。

当您谈论堆和堆栈时，您会混淆变量和对象。引用对象的方法局部*变量*存在于堆栈上，但它们引用的*对象*存在于堆上。因此，即使方法超出范围，内部类也可以继续引用这些对象，因为对象实例存在于方法范围之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T14:37:56.507

实际上，它是以下内容的副本：[Cannot reference an non-final variable inside an internal class defined in a different method](https://stackoverflow.com/q/1299837/277683)

看到这个答案：[https ://stackoverflow.com/a/1299889/277683](https://stackoverflow.com/a/1299889/277683)

您似乎了解堆栈等，所以我会简短。总而言之，当您进行引用时，编译器可以*在编译时*`final`安全地确定其值并为内部类使用相同的东西。

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T14:41:37.347

答案要简单得多。

Java 开发人员（制作 java 的人）认为如果您可以访问内部类中非 final 的变量会令人困惑，因此他们添加了一个要求，即该变量应该是 final 以避免混淆。

我不确定java究竟是如何实现的，但我猜他们只是在创建内部类时复制变量。也可以使用非最终变量轻松完成某些事情，但 java 开发人员认为这会令人困惑。*

# android - Android - 创建二维码扫描仪

> ID：10756242
> 
> 赞同：1
> 
> 时间：2012-05-25T14:29:59.287
> 
> 标签：android, barcode, qr-code, zxing

我想在我的应用程序中实现一个二维码扫描仪，它将支持我自己的文本格式。不是联系人、电话号码或类似的东西。只是一些这样的信息：

```
Format:"ID:1345986;CONFIRM:1839584;NAME:JOE BAHAMA;"etc... 
```

现在，我查看了 ZXing 源代码，但我不太明白......我需要一种方法来做到这一点，就像上面提到的那样。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:46:14.283

从根本上说，二维码只是对一串字符进行编码，正如[zxing wiki 中所解释的](http://code.google.com/p/zxing/wiki/BarcodeContents)（例如，前缀“tel:”向读者表明它是一个电话号码，并且读者*应该*采取适合电话数据的操作）。

所以你真正需要做的就是使用 ZXing 将二维码解码为字符串并进行解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:16:37.547

这里有一个[使用 Eclipse * 将 zxing 条形码扫描仪本地集成到您的 Android 应用程序](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)中的示例，它显示了如何`.jar`在您的项目中包含 zxing，但是它以注意事项开始：

> ZXing 的开发人员之一肖恩·欧文（Sean Owen）在此博客上发表了评论，警告将 ZXing 集成到您自己的应用程序中的陷阱；这样做只是为了避免让您的用户采取额外的从市场安装的步骤，这不是一个好的理由。我完全赞同这个。如他的评论中所述，使用基于意图的方法有很多优点。我的动机是开发一个无法进入 Android 市场的企业应用程序，并且涉及我的客户在数千台设备上手动安装 zxing，然后才能分发给其企业客户。
> 
> 所以要明确一点，除非绝对必要，否则不要使用此方法，并且如果必须 - 确保覆盖您的意图过滤器，以便其他想要使用 zxing 的应用程序最终不会调用您的修改版本。另外，如果 zxing 已经安装，那么你应该默认使用它而不是你的修改版本。

.* 通过谷歌搜索“将 zxing 添加到 android 应用程序”并单击第一个链接找到。

# jquery-mobile - Jquery Mobile 动态数据角色不起作用

> ID：10756244
> 
> 赞同：0
> 
> 时间：2012-05-25T14:30:05.680
> 
> 标签：jquery-mobile

使用 JQM v1.1。在我的 data-role=page 之一上声明了一个带有 data-role 和 data-theme 的 UL 标签，这是其中一个页面（多页文档）。

```
<ul id="dailylistul" data-role="listview" data-theme="d"> 
```

有一些代码可以注入 LI，如下所示 -

```
<script type="text/javascript">
$("#dailylisthref").click(function () {
$('#dailylistul').children().remove();
$('#dailylistul').attr('data-role', 'slide');
$('#dailylistul').attr('data-theme', 'd');
var obj = { one:1, two:2, three:3, four:4, five:5 };
  $.each(obj, function(i, val) {
    //console.log("iteration " + val);
     $('#dailylistul').append('<li>' + val + '</li>');
    })
    $.mobile.changePage("#dailylistpage", "slide");
}) 
```

这工作正常，除了 $('#dailylistul').attr('data-role', 'listview') 在第一次之后不会发生。UL 子级上的 remove() 也会删除 UL 中的样式。并且它不会应用下次在代码中再次重置的样式。有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:49:36.397

首先，当您将数据角色属性设置为滑动时，我假设您的意思是列表视图。

那就是说我不确定你为什么要重置列表视图上的属性，你应该能够删除它的内容，比如

```
$("#dailylisthref").click(function () {
  $('#dailylistul').empty();
  var obj = { one:1, two:2, three:3, four:4, five:5 };
    $.each(obj, function(i, val) {
    //console.log("iteration " + val);
     $('#dailylistul').append('<li>' + val + '</li>');
    })
    $.mobile.changePage("#dailylistpage", "slide");
}) 
```

修改 JQM 列表后（添加元素后），您需要调用它的刷新方法。您可能还需要在页面显示之前调用它，例如

```
$(document).delegate('#dailylistpage', 'pageshow', function () {
        $('#dailylistul').listview('refresh');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T02:41:54.243

尝试这个

```
$('#dailylistul li').remove();
var obj = { one:1, two:2, three:3, four:4, five:5 };
$.each(obj, function(i, val) {

 $('#dailylistul').append($('<li>' + val + '</li>'));
});
 $('#dailylistul').listview('refresh');
$.mobile.changePage("#dailylistpage", "slide"); 
```

# javascript - 如何在没有 Web 服务器的情况下使 respond.js 工作

> ID：10756245
> 
> 赞同：2
> 
> 时间：2012-05-25T14:30:05.713
> 
> 标签：javascript, internet-explorer-8, xmlhttprequest, respond.js

我在网站上使用了 respond.js 的变体。我需要它用于 IE6-IE8 之类的。这是源代码。[http://kl1p.com/HGv/2](http://kl1p.com/HGv/2)

当我在我的网络服务器上运行它时，我没有遇到任何问题。问题是，对于这个项目，我束手无策，无法使用任何类型的 Web 服务器（长话短说）。

有没有办法让这段代码在没有网络服务器的情况下工作？我意识到这一点：

```
Due to security restrictions, some browsers may not allow this script to work on 
file:// urls (because it uses xmlHttpRequest). Run it on a web server. 
```

暗示它为什么不起作用。有没有其他方法可以让它工作？

我确实注意到的一件事是它可以在没有服务器的情况下在 chrome 中运行。绝对不是在 IE8 中。

这可能是一项不可能完成的任务，但至少无论如何都值得一问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:32:07.163

我达成了妥协。我正在使用此处包含的“跨域补丁”方法[https://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T02:48:06.013

@Bergi，

[是的，在github.com/scottjehl/Respond](http://github.com/scottjehl/Respond)上提供了代码的非缩小版本。

该文件名为[respond.src.js。](http://github.com/scottjehl/Respond/blob/master/respond.src.js)

* * *

再加上，

任何需要服务器环境进行编程的人都应该尝试一下[XAMPP -portableapps.com/apps/development/xampp](http://portableapps.com/apps/development/xampp)，它是一个完整的、可移植的服务器。

> *XAMPP 是 Apache、mySQL、PHP 和 Perl（XAMPP 中的 AMPP）的集成服务器包，它们都从可移动驱动器运行。一切都是预先配置好的，只需解压缩或安装即可。*

* * *

最后但并非最不重要的一点是，在使用相对 url 链接到 css 文件时同时使用 respond.js / respond.proxy.js 似乎存在错误。要修复它，请使用绝对 url（包括协议）。

不要这样做：

```
 <link rel="stylesheet" href="//www.yourdomainname.com/style.css"> 
```

做这个：

```
<link rel="stylesheet" href="http://www.yourdomainname.com/style.css"> 
```

取自：[cross domain - Respond.js on Subdomain using Tumblr](https://stackoverflow.com/questions/10749070/respond-js-on-subdomain-using-tumblr#12395550)

# javascript - 如何防止用户使用 JavaScript 和 JQuery 键入超过 2 位数字

> ID：10756247
> 
> 赞同：4
> 
> 时间：2012-05-25T14:30:16.773
> 
> 标签：javascript, jquery, validation

我有一个包含“从”月份的文本框。（仅允许 1 到 12 之间的值）

我怎样才能阻止用户，以便当他们尝试输入第三个字符时，javascript 会阻止用户输入超过 2 位数字？

这是我迄今为止尝试过的，但我无法获得想要的结果（以下脚本根本不起作用）

```
 $("#monthFromTextBox").bind("change", function (event) {
        var regex = /^\d{1,2}$/g;
        var monthFrom = $(this).find(".monthFrom").text();
        var yearFrom = $(this).find(".yearFrom").text();
        var monthTo = $(this).find(".monthTo").text();
        var yearTo = $(this).find(".yearTo").text();

        // Allow only 1 or 2 digits only
        if (regex.test(monthFrom) === false) {
            event.preventDefault();
            // alert("Month From value should have 1 or 2 digits only");
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-25T14:32:02.623

```
<input type="text" maxlength="2"> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T14:35:52.687

对于 luls ......如果你真的想要一个 JS 答案..

```
$("#monthFromTextBox").on('keydown', function() {
    if (this.value.length > 1) {
        return false;
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T14:34:47.273

我知道您要求提供 JavaScript 解决方案，但我认为您不需要。

为什么不简单地限制 HTML 中的文本框：

```
<input type="text" maxlength="2" size="10" value="" name="monthFromTextBox"> 
```

这样，即使 JavaScript 被关闭，你也能被覆盖。

如果这是一个重要的限制，请记住也要在服务器端验证它。

# c# - 禁用鼠标拖动以选择 RadScheduleView 上的多个插槽

> ID：10756255
> 
> 赞同：0
> 
> 时间：2012-05-25T14:30:35.823
> 
> 标签：c#, wpf, telerik, radscheduleview

我有一个允许最终用户选择插槽的 RadScheduleView。我正在通过 RadScheduleView.SelectedSlot 捕获选择，将它们保存到一个集合中，并且该集合是 RadScheduleView.SpecialSlotsSource 的绑定源，因此我可以反映选择的状态。（如下例所示） ![想要点击行为](../Images/dd6c23950a921f21370fc31f23a5856f.png)

期望的行为：我只希望最终用户左键单击 RadScheduleView 以进行插槽选择（即使插槽是连续的）。

我需要禁用“鼠标拖动选择多个插槽”（如下图）。 ![不想要的拖动行为](../Images/ce65e72b04f7d27720eb9ec523ac9429.png)

如何才能做到这一点？

另外由于所需的行为......我如何禁用键盘修饰符：CTRL + 左键单击和 SHIFT + 左键单击（以防止插槽的开始 - 结束超过 MinorTickLength）

在此先感谢...</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:51:47.043

TELERIK 提供的解决方案：[http ://www.telerik.com/community/forums/wpf/scheduleview/disable-mouse-drag-to-select-several-slots-on-radscheduleview.aspx](http://www.telerik.com/community/forums/wpf/scheduleview/disable-mouse-drag-to-select-several-slots-on-radscheduleview.aspx)

# java - java：将整数作为无符号 8 位整数写入文件

> ID：10756264
> 
> 赞同：5
> 
> 时间：2012-05-25T14:31:09.007
> 
> 标签：java, integer, unsigned

在 java 中，如何将整数写入文件，使它们成为无符号 8 位整数（在 0 到 255 范围内）？这些数字是 int 类型并且在 0-255 之间就足够了，还是我需要先将它们转换为其他类型？我认为这只是同一件事吗？但我不确定当它们被放入文件时是否会发生一些有趣的事情......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T14:47:54.817

有符号与无符号只是位模式如何解释的问题，而不是位模式本身。

因此，只要您的整数在 to 范围内`0`，`255`您就可以将它们塞入字节并将字节写入文件。

但是，由于 Java 将字节位模式解释为已签名，因此在读回它们时必须小心。

例如，假设您有整数`253`。这是（完整的 32 位形式）：

```
00000000000000000000000011111101 
```

如果你这样做：

```
int i = 253;
byte b = (byte) i; 
```

然后`b`将包含以下位：

```
11111101 
```

如果您要求 Java 使用它，Java 会声称这是`-3`因为当将位解释为有符号时，`-3`它表示为 pattern `11111101`。因此，如果您将该字节写入文件，`11111101`则会根据需要写出这些位。

同样，当您在读取文件时将其读回一个字节时，您读入的字节将填充位模式`11111101`，Java 将再次解释为`-3`. 所以你**不能**只做：

```
byte b = readByteFromFile();
int i = b; 
```

因为 Java 会将`b`' 的内容解释为`-3`并为您提供表示`-3`为 32 位整数的整数，即：

```
11111111111111111111111111111101 
```

相反，您需要掩盖事物以确保最终得到的整数是：

```
00000000000000000000000011111101 
```

所以，

```
byte b = readByteFromFile();
int i = (0x000000FF) & b; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:32:42.623

[`DataOutputStream.writeByte()`](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html#writeByte%28int%29)将写入`int`1 字节的值。

# text - 如何更新 HAML 以使链接出现在文本之后

> ID：10756265
> 
> 赞同：1
> 
> 时间：2012-05-25T14:31:10.550
> 
> 标签：text, hyperlink, haml, html

我正在使用 HAML 来显示我的文本以及它之后的链接

```
.thread_text
  %a{href:"#"} <%= question.text %>
%span.remove_link
  %a{href: "#"} remove 
```

显示器是这样的

![在此处输入图像描述](../Images/d4dea6e50fbcbbf9c63fed7b7ad3cb0f.png)

但是，我真正想要的是“删除”链接出现在“最近”这个词之后。

如何修改 HAML 以实现此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:12:33.057

试试这个：

```
.thread_text
  %a{href:"#"} <%= question.text %>
  %span.remove_link
    %a{href: "#"} remove 
```

或更好：

```
.thread_text
  %a(href="#")= question.text
  %span.remove_link
    %a(href="#") remove 
```

如果你有正确的css，它应该可以工作。此外，您不一定需要`span`：http: [//jsfiddle.net/DfBJv/2](http://jsfiddle.net/DfBJv/2)

# android - 将数据从 BroadCastReceiver 发送到正在运行的服务 (Android)

> ID：10756270
> 
> 赞同：0
> 
> 时间：2012-05-25T14:31:42.407
> 
> 标签：android, service, broadcastreceiver

如何将一些数据从 BroadCastReceiver 发送到正在运行的服务？我尝试使用 peekService 但似乎该方法返回 null 直到服务被某人绑定。无论如何，如果我绑定服务，我不需要窥视服务，也无法从 BroadCastReceiver 绑定服务（我不需要任何活动）

我的情况是： my_broadcastreceiver -> start service my_broadcastreceiver -> stop service my_broadcastreceiver -> 通知服务（如果服务已经在运行，否则什么都没有）

我怎样才能做到这一点？显然，我可以使用意图过滤器在服务中编写 BroadCastReceiver，但我认为这不是更好的方法。我只想在 BroadCastReceiver 进入 onReceive 方法时发送一些信息。我希望有一些可能...

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:44:38.690

将数据打包成一个`Intent`并发送到服务`startService()`。见 [putExtra()](http://developer.android.com/reference/android/content/Intent.html)

# extjs - extraParams 未在 extjs 分页上更新

> ID：10756278
> 
> 赞同：1
> 
> 时间：2012-05-25T14:32:04.683
> 
> 标签：extjs, extjs4.1

在我的代理中，我设置了一个带有全局变量“contactType”的自定义参数，该变量设置在我的 html 页面的标题中

```
 proxy:{
        type:'ajax',
        api:{
            read: '/Contact/read',
        },
        extraParams : {
            'contactType' : contactType
        }
    }, 
```

这很好用，然后我更新我的网格

```
contactType = "courier";
var contactStore = this.getContactsStore();
contactStore.load({
    scope:this,
    params:{contactType:contactType}
}); 
```

这也很有效，并且值“courier”作为参数添加。我的问题是，当我单击分页按钮时，参数不反映新值。“信使”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T20:44:59.647

显式更新额外的参数，`proxy.setExtraParam(name, value)`例如：

```
contactStore.proxy.setExtraParam('contactType', contactType); 
```

# java - Java - 显示图像时屏幕布局混乱

> ID：10756283
> 
> 赞同：0
> 
> 时间：2012-05-25T14:32:10.613
> 
> 标签：java, swing, awt, layout-manager

我有几个按钮在面板上垂直运行，然后在它们的右侧有 3 个面板。每个都将根据按钮的输入显示一张图片。

我遇到的问题是，随着图像的显示，它会增加按钮的大小，我希望它们保持原样。

如何防止发生调整大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:42:31.667

尝试使用[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)。它为您提供了很大的自由，如果您使用的是[Netbeans 表单构建工具](http://netbeans.org/kb/docs/java/gui-functionality.html)，那么创建漂亮的 GUI 真的很容易。

# c# - 如何更改 contextMenuStrip 项目的名称

> ID：10756295
> 
> 赞同：1
> 
> 时间：2012-05-25T14:33:15.900
> 
> 标签：c#, contextmenu

我有 contextMenuStrip 并且总是有 3 个项目。第一项将是启动/停止以启用和禁用计时器。启用计时器时，我需要将文本更改为“停止”，禁用计时器时 -“开始”。第一项的动态文本更改最简单的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:37:11.777

```
contextMenuStrip.Items[0].Text = "your-text-here"; 
```

# silverlight - VisualStates：第一次状态更改没有过渡

> ID：10756300
> 
> 赞同：0
> 
> 时间：2012-05-25T14:33:36.693
> 
> 标签：silverlight, transition, visualstatemanager

在我的 Silverlight 4 应用程序中，我创建了一个自定义控件并添加了 Visual States incl。过渡。第一次执行状态更改时，没有转换，只有从一个状态到另一个状态的快速变化（就像根本没有转换一样）。所有以下状态更改都按预期执行转换。我试图在构造函数中设置初始状态，但这没有帮助。有谁知道，为什么第一次没有过渡？

这是我的自定义控件中的一些代码：

```
[TemplateVisualState(GroupName="CommonState", Name="Expand")]
[TemplateVisualState(GroupName="CommonState", Name="Collapse")]
public class CollapsibleContainer : ContentControl
{
  public CollapsibleContainer()
  {
    this.DefaultStyleKey = typeof(CollapsibleContainer);
    VisualStateManager.GoToState(this, "Expand", false);
  }

  private void BorderHeader_Click(object sender, MouseButtonEventArgs args)
  {
    if (_contentPresenter.Visibility == Visibility.Collapsed)
    {
      _contentPresenter.Visibility = Visibility.Visible;
      VisualStateManager.GoToState(this, "Expand", true);
    }
    else
    {
      _contentPresenter.Visibility = Visibility.Collapsed;
      VisualStateManager.GoToState(this, "Collapse", true);
    }
  }
} 
```

这是视觉状态的定义：

```
<VisualStateManager.VisualStateGroups>
  <VisualStateGroup x:Name="CommonState">
    <VisualState x:Name="Expand" />
    <VisualState x:Name="Collapse">
      <Storyboard>
        <DoubleAnimation Duration="0" To="180" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="ImageArrowNormal" d:IsOptimized="True"/>                                        
        <DoubleAnimation Duration="0" To="180" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="ImageArrowHover" d:IsOptimized="True"/>
      </Storyboard>
    </VisualState>

    <VisualStateGroup.Transitions>
      <VisualTransition x:Name="Expand2Collapse" From="Expand" To="Collapse">
        <Storyboard>
          <DoubleAnimation Duration="0:0:0.3" To="180" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="ImageArrowNormal"/>
          <DoubleAnimation Duration="0:0:0.3" To="180" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="ImageArrowHover"/>
        </Storyboard>
      </VisualTransition>

      <VisualTransition x:Name="Collapse2Expand" From="Collapse" To="Expand">
        <Storyboard>
          <DoubleAnimation Duration="0:0:0.3" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="ImageArrowNormal"/>
          <DoubleAnimation Duration="0:0:0.3" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="ImageArrowHover"/>
        </Storyboard>
      </VisualTransition>
    </VisualStateGroup.Transitions>
  </VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:13:19.760

尝试在 ApplyTemplate 中设置初始状态，而不是在构造函数中。

# ruby - MongoDB Ruby 原子附加更新问题

> ID：10756308
> 
> 赞同：0
> 
> 时间：2012-05-25T14:33:51.700
> 
> 标签：ruby, arrays, mongodb, ruby-1.9.3

```
coll.save({"_id" => "test", "1" => "a"}) #=> {"_id"=>"test", "1"=>"a"}
coll.update({"_id" => "test"}, {"$set"=>{"1.2" => "b"}}) #=> {"_id"=>"test", "1"=>"a"} 
```

我期待最后一行会创建一个新节点：`{"_id"=>"test", "1"=>{"2"=>"b"}}`或`{"_id"=>"test", "1"=>["a",{"2" => "b"}]}`

是否可以让它创建一个不存在的节点？如果已经有一个键：值对，则取消转换为数组？

多一个：

```
coll.save({"_id" => "test", "1" => ["a"]}) #=> {"_id"=>"test", "1"=>["a"]}
coll.update({"_id" => "test"}, {"$set"=>{"1" => ["b"]}}) #=> {"_id"=>"test", "1"=>["b"]} 
```

是否可以将值转换为数组而不覆盖它们？从而使以上： `#=>{"_id"=>"test", "1"=>["a","b"]}`

我这样说是因为我有大型数组，如果我下载数组并在 Ruby 端取消移动它，则会产生性能开销。

对于第一个问题，集合中的文档具有多种形状，并且在 ruby​​ 中构建一个 when:case 方法对于所有可能性来说都是很多开销/工作。

Ruby unshift：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-unshift](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-unshift)

：：编辑：：

```
$db.serverStatus().version
2.0.2

$gem list
mongo (1.6.2, 1.6.1, 1.5.2) 
```

确切的代码：

```
require 'pp'
require 'mongo'
coll = Mongo::Connection.new.db("test").collection("test")
coll.save({"_id" => "test", "1" => "a"})
pp coll.find_one("_id"=>"test") #=> {"_id"=>"test", "1"=>"a"}
coll.update({"_id" => "test"}, {"$set"=>{"1.2" => "b"}})
#Expect, but does not give: {"_id"=>"test", "1"=>{"2"=>"b"}}
pp coll.find_one("_id"=>"test") #=> {"_id"=>"test", "1"=>"a"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:58:26.683

MongoDB 没有前置操作符，但它有两个操作符以原子方式附加到数组：`$push`，它无条件地附加到数组，和`$addToSet`，只有当它不包含要添加的元素时才添加到数组中。

# java - Paypal Business Standard：付款后如何处理？

> ID：10756312
> 
> 赞同：0
> 
> 时间：2012-05-25T14:34:14.573
> 
> 标签：java, servlets, paypal, payment

我想使用贝宝支付标准（跳转到贝宝支付并在支付完成后跳回）来处理我网站上的支付。

我知道我可以向按钮添加回调 url，但我想不出正确的逻辑。

我想在他们完成结帐并跳回我的网站后将用户付款状态（真或假）和日期存储到数据库中。

最好的方法是什么？我在想某种象征。我不知道我是否走在正确的轨道上。

顺便说一句，我在我的站点中使用了 Servlet 和 JSP。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:51:43.113

我在几个网站上使用这种付款方式，它非常容易集成。在提交表单时，我设置了一个令牌并在确认页面上调用该令牌。我使用收据页面显示订单，然后使用隐藏表单将其提交给贝宝。

```
<input type="hidden" name="return" value="http://www.mysite.com/returnurl.html">
<input type="hidden" name="cancel_return" value="http://www.mysite.com/cancelurl.html"> 
```

您可以在此处找到所需的所有文档。

[https://merchant.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_formbasics](https://merchant.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_formbasics)

一个人成功付款后，我将令牌调用到隐藏的表单字段中，应用这些值添加一个动画加载图像一点点 javascript

```
<script type="text/javascript" language="javascript">
setTimeout("document.forms['form1'].submit();",2*1000); 
```

数据进入数据库，然后直接进入感谢您成功感谢支付页面。希望这可以帮助。

# javascript - Javascript / jQuery - 将一个数字范围映射到另一个数字范围

> ID：10756313
> 
> 赞同：44
> 
> 时间：2012-05-25T14:34:16.740
> 
> 标签：javascript, jquery

在其他编程语言（例如处理）中，有一个函数允许您将一个数字范围内的数字转换为不同范围内的数字。我想要做的是将鼠标的 X 坐标转换为 0 到 15 之间的范围。因此，浏览器的窗口尺寸虽然对每个用户都不同，但可能是 1394 像素宽，而当前的 X 坐标可能是 563 像素，我想将其转换为 0 到 15 的范围。

我希望找到一个 jquery 和 javascript 的函数，它内置了这种能力。我可以自己算出数学来做这件事，但我宁愿以更简洁和动态的方式来做这件事。

我已经使用以下代码捕获了屏幕尺寸和鼠标尺寸：

```
var $window = $(window);
var $document = $(document);

$document.ready(function() {
    var mouseX, mouseY; //capture current mouse coordinates
    var screenW, screenH; //capture the current width and height of the window
    var maxMove = 10;
    windowSize();

    $document.mousemove( function(e) {
        mouseX = e.pageX; 
        mouseY = e.pageY;

    });

    $window.resize(function() {
        windowSize();
    });

    function windowSize(){
        screenW = $window.width();
        screenH = $window.height();
    }

}); 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2014-04-21T17:43:34.510

您可以将其实现为纯 Javascript 函数：

```
function scale (number, inMin, inMax, outMin, outMax) {
    return (number - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;
} 
```

使用该函数，如下所示：

```
const num = 5;
console.log(scale(num, 0, 10, -50, 50)); // 0
console.log(scale(num, -20, 0, -100, 100)); // 150 
```

我正在使用`scale`函数名称，因为`map`它经常与遍历数组和对象相关联。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T14:40:13.243

如果你的范围总是从 0 开始，那么你所要做的就是

```
mouseValue * range.max / screen.max 
```

* * *

更复杂的任意范围到任意范围的转换需要

```
function convertToRange(value, srcRange, dstRange){
  // value is outside source range return
  if (value < srcRange[0] || value > srcRange[1]){
    return NaN; 
  }

  var srcMax = srcRange[1] - srcRange[0],
      dstMax = dstRange[1] - dstRange[0],
      adjValue = value - srcRange[0];

  return (adjValue * dstMax / srcMax) + dstRange[0];

} 
```

使用喜欢`convertToRange(20,[10,50],[5,10]);`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-06T09:29:46.847

对于 OP 要求的通用映射功能，请转到此处：

[http://rosettacode.org/wiki/Map_range#JavaScript](http://rosettacode.org/wiki/Map_range#JavaScript)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T14:39:01.230

这是简单的数学。

```
var screenWidth = $(window).width();
var mousePosition = e.pageX;
var max = 15;
var value = (mousePosition / screenWidth) * max; 
```

请注意，这可以返回一个十进制数；如果你不想这样，你可以`Math.round`在结果上使用。

[**活生生的例子**](http://jsfiddle.net/PWGu4/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T14:42:17.530

```
function proportion(value,max,minrange,maxrange) {
    return Math.round(((max-value)/(max))*(maxrange-minrange))+minrange;
} 
```

在您的情况下，将其用作`proportion(screencoord,screensize,0,15)`

您可能还想获得客户端尺寸，而不是屏幕尺寸，因为屏幕尺寸是指显示器的最大尺寸，并不是所有用户都最大化他们的屏幕。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-25T14:45:03.397

假设您有 6 个变量：

*   minRange （在您的示例中为 0）
*   maxRange （在您的示例中为 15）
*   X
*   是的
*   浏览器宽度
*   浏览器高度

有范围：

```
interval = maxRange - minRange;
rangeX = interval * x / browserWidth + minRange
rangeY = interval * y / browserHeight + minRange 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-28T06:26:08.710

以及它的简单数学。好吧，您有两个范围`range1 = [a1,a2]`，`range2 = [b1,b2]`并且您希望将`s`范围一中的值映射到`t`范围二中的值。所以这是公式。 `t = b1 + (s-a1)*(b2-b1)/(a2-a1)` 在 js 中它会。

```
var mapRange = function(from, to, s) {
  return to[0] + (s - from[0]) * (to[1] - to[0]) / (from[1] - from[0]);
};

var range = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
for (var i = 0; i < range.length; i++) {
  range[i] = mapRange([0, 10], [-1, 0], range[i]);
}

console.log(range); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-16T13:12:21.610

`Floats`应始终计算。

```
function scale(
    srcNum: number,
    src: [start: number, end: number],
    dst: [start: number, end: number]
): number {
    return ((srcNum - src[0]) * (dst[1] - dst[0])) / (src[1] - src[0]) + dst[0];
}

scale(1, [0, 10], [0, 255]);   // 25.5
scale(1.5, [0, 10], [0, 255]); // 38.25
scale(2, [0, 10], [0, 255]);   // 51 
```

`Integers`，一个有效的方法是创建一个映射，所以不需要更多的计算。但这实际上取决于`src`范围的大小。对于大范围`scale(...)`应该更有效。

```
function createScale(
    src: [start: number, end: number],
    dst: [start: number, end: number]
): Record<number, number> {
    const map: Record<number, number> = {};
    for (let i = src[0]; i <= src[1]; i++) {
        map[i] = ((i - src[0]) * (dst[1] - dst[0])) / (src[1] - src[0]) + dst[0];
    }
    return map;
}

createScale([0, 10], [0, 255]);
// {
//     "1": 25.5,
//     "2": 51,
//     "3": 76.5,
//     "4": 102,
//     "5": 127.5,
//     "6": 153,
//     "7": 178.5,
//     "8": 204,
//     "9": 229.5,
//     "10": 255
// } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-08T23:36:06.217

我采纳了 August Miller 的想法并对它们添加了限制（值不能超出 in_min 和 in_max 的范围，如果超出，则分别返回 out_min 和 out_max）并为那些想要为其脚本提供复制粘贴功能的人缩小它：

`function map(n,i,o,r,t){return i>o?i>n?(n-i)*(t-r)/(o-i)+r:r:o>i?o>n?(n-i)*(t-r)/(o-i)+r:t:void 0}`

参数就像 map(value, in_min, in_max, out_in, out_max)

# ruby-on-rails - Rails - 检查帖子是否存在，特殊字符似乎把事情搞砸了

> ID：10756318
> 
> 赞同：0
> 
> 时间：2012-05-25T14:34:29.317
> 
> 标签：ruby-on-rails, database, string, if-statement

我有一个模型，如果条目不存在，我想将数据发送到数据库。

我正在使用此代码并检查名称是否存在于数据库中。

```
if(!FeedEntry.exists? :name => entry.title)
FeedEntry.create!(...)
end 
```

但问题是当特殊字符出现时，比如

```
âåäö 
```

它有时即使存在也找不到帖子，我是否需要对其进行转换以确保数据库中不存在该字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:52:39.210

你能不做吗

```
FeedEntry.find_or_create_by_name ( "âåäö" ) 
```

我不知道它是否有助于解决您的特殊字符问题，但它看起来更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:21:10.813

`# encoding: utf-8`通过添加到文件的开头告诉 Ruby 使用 UTF-8 。

# jquery - PrimeFaces - 无法加载资源

> ID：10756320
> 
> 赞同：0
> 
> 时间：2012-05-25T14:34:41.623
> 
> 标签：jquery, ajax, jsf, primefaces

我看过类似的问题，但没有一个解决方案有效。

我正在做一个 Ajax 调用，但我的方法从未被调用过。

我在 Chrome 上有这个错误：

```
GET http://localhost:8080/ERP.GUI2/views/user/login.html  jquery.js.html:23
b.ajaxTransport.send jquery.js.html:23
b.extend.ajax jquery.js.html:23
PrimeFaces.ajax.Queue.offer primefaces.js.html:1
PrimeFaces.ajax.AjaxRequest primefaces.js.html:1
PrimeFaces.ab primefaces.js.html:1
onclick 
```

我检查了，这些文件没问题，它们存在并且路径正确，我可以在浏览器上打开它们。

这是我的按钮：

```
<p:commandButton actionListener="#{userController.logIn()}" value="Entrar"/> 
```

有时错误只是：

```
Failed to load resource http://localhost:8080/ERP.GUI2/views/user/login.html 
```

当我第一次运行代码时，没有报告错误，当我单击调用该方法的按钮时，错误就显示出来了。

我不知道它是否重要，但我正在使用 Eclipse 并且它添加了一个`JavaScript Resources`，我不知道它是否会干扰某些东西并且不知道如何删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:37:03.190

如果您使用 JSF ManagedBean 注释或任何 JSF 范围注释，如`@RequestScoped`or `@SessionScoped`，请确保它从`javax.faces.bean`包中导入。

有时代码补全会错误地从错误的包中导入。

现在，假设您的`logIn()`方法`public void`如下：

```
public void logIn() 
{
    //login code here 
} 
```

您应该从 EL 中删除括号，因为 actionListener 属性已经需要一个方法表达式。

尝试：

`<p:commandButton actionListener="#{userController.logIn}" value="Entrar"/>`

我希望它有所帮助。

# ios - 如何检测facebook上的默认头像？

> ID：10756323
> 
> 赞同：3
> 
> 时间：2012-05-25T14:35:11.297
> 
> 标签：ios, facebook, facebook-graph-api, avatar, avatars

如何检测链接上的默认头像，如下所示`https://graph.facebook.com/'.$id.'/picture?type=large`：这是从特殊准备的配置文件中获取化身（男性/女性）然后通过例如 md5() 进行比较的唯一方法吗？

很难相信这是唯一的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-11-09T11:25:31.347

您可以使用以下`redirect=false`参数：

[https://graph.facebook.com/naitik/picture?redirect=false](https://graph.facebook.com/naitik/picture?redirect=false)

然后 facebook 的响应是`json`并包含以下数据：

```
{
   "data": {
      "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-prn1/157337_5526183_369516251_q.jpg",
      "is_silhouette": false
   }
} 
```

您可以使用该`is_silhouette`选项来检测照片是否为默认照片。

您可以阅读更多内容：[https ://developers.facebook.com/docs/reference/api/using-pictures/](https://developers.facebook.com/docs/reference/api/using-pictures/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T16:52:46.723

您无法调用 API 来判断他们是否使用默认照片。您可以向该配置文件 URL 发出 HTTP HEAD 请求并查看`Location`标头并查看该 URL 是否是已知的默认配置文件图像之一，而不是下载整个图像并检查 MD5：

男：[https ://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v2/yL/r/HsTZSDw4avx.gif](https://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v2/yL/r/HsTZSDw4avx.gif) ![https://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v2/yL/r/HsTZSDw4avx.gif](../Images/367882055a7e47f257e13b23fb86c3ba.png)

女性（达斯维德）：[https ://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v2/yp/r/yDnr5YfbJCH.gif](https://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v2/yp/r/yDnr5YfbJCH.gif)

![在此处输入图像描述](../Images/81df9f0b89e6755d0672a65bdd85760d.png)

我想这些 URL 可能会改变，默认照片也会改变，但我还没有看到任何一种情况发生在我记得的情况下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-04T01:37:25.460

如果您已经在调用 Graph API 以获取用户数据（如头像），则只需在您第一次调用 Graph API 时包含`picture`在[字段](https://developers.facebook.com/docs/graph-api/using-graph-api#fields)`is_silhouette`参数中，然后响应将包含偏移量，如果它设置为 true 用户有默认头像。

要求：

```
https://graph.facebook.com/v2.7/me?access_token=[token]&fields=name,picture 
```

回复：

```
{
    "id": "100103095474350",
    "name": "John Smith",
    "picture": {
        "data": {
            "is_silhouette": true,
            "url": "https://scontent.xx.fbcdn.net/v/...jpg"
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-24T11:18:05.967

使用 iOS 版 Facebook SDK (Swift 4)：

```
class FacebookSignIn {

    enum Error: Swift.Error {
       case unableToInitializeGraphRequest
       case unexpectedGraphResponse
    }

    func profileImageURL(size: CGSize, completion: @escaping Result<URL?>.Completion) {
       guard let userID = FBSDKAccessToken.current()?.userID else {
          completion(.failure(Error.unableToInitializeGraphRequest))
          return
       }
       let params: [String: Any] = ["redirect": 0,
                                    "type": size.width == size.height ? "square" : "normal",
                                    "height": Int(size.height),
                                    "width": Int(size.width),
                                    "fields": "is_silhouette, url"]

       guard let request = FBSDKGraphRequest(graphPath: "/\(userID)/picture", parameters: params) else {
          completion(.failure(Error.unableToInitializeGraphRequest))
          return
       }

       _ = request.start { _, result, error in
          if let e = error {
             completion(.failure(e))
          } else if let result = result as? [String: Any], let data = result["data"] as? [String: Any] {
             if let isSilhouette = data["is_silhouette"] as? Bool, let urlString = data["url"] as? String {
                if isSilhouette {
                   completion(.success(nil))
                } else {
                   if let url = URL(string: urlString) {
                      completion(.success(url))
                   } else {
                      completion(.failure(Error.unexpectedGraphResponse))
                   }
                }
             } else {
                completion(.failure(Error.unexpectedGraphResponse))
             }
          } else {
             completion(.failure(Error.unexpectedGraphResponse))
          }
       }
    }
}

public enum Result<T> {

   case success(T)
   case failure(Swift.Error)

   public typealias Completion = (Result<T>) -> Void
} 
```

# facebook - 从图像数据将照片发布到 Facebook

> ID：10756327
> 
> 赞同：0
> 
> 时间：2012-05-25T14:35:21.327
> 
> 标签：facebook, facebook-graph-api

我正在尝试使用 Graph API 将图片上传到 Facebook 相册。[文档](http://developers.facebook.com/docs/reference/api/photo/)提到了这一点：

> 授予此权限后，您可以通过发出 HTTP POST 请求来上传照片，其中包含照片内容和可选描述，其中之一是 Graph API 连接 [...]

但是，似乎没有记录如何提供“照片内容”。唯一相关的信息是“source”参数，它应该是图像的 URL。

有没有办法发布本地图像而无需将其托管在某个地方？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:42:49.030

当然。

根据用户对象文档的[照片连接，](http://developers.facebook.com/docs/reference/api/user/#photos)`source`您添加了类型为图像内容的字段`multipart/form-data`。

如何上传取决于您尝试从何处上传...您打算从您的服务器、移动应用程序还是网络（客户端）上传？

# sql - 从 SQLlite3 迁移到 PostgreSQL 问题（部署到 Heroku）

> ID：10756328
> 
> 赞同：0
> 
> 时间：2012-05-25T14:35:21.517
> 
> 标签：sql, ruby-on-rails, postgresql, heroku

自从我的开发环境默认设置为 sqllite3 以来，我在将 Rails 代码部署到 Heroku 时遇到了一些问题。这是以下日志快照：

```
ActiveRecord::StatementInvalid (PG::Error: ERROR:  syntax error at or near ":"
2012-05-25T14:11:55+00:00 app[web.1]: 
2012-05-25T14:11:55+00:00 app[web.1]: LINE 1: ...LECT "records".* FROM "records"  WHERE (TIMESTAMP(:order) >=...
2012-05-25T14:11:55+00:00 app[web.1]: : SELECT "records".* FROM "records"  WHERE (TIMESTAMP(:order) >= '2011-05-25 00:00:00' and TIMESTAMP(:order) <= '2012-05-25 23:59:59') ORDER BY created_at):
2012-05-25T14:11:55+00:00 app[web.1]:   app/controllers/records_controller.rb:20:in `index' 
```

我的控制器文件中的代码片段：

```
opts = {:order => "created_at"}
opts[:conditions] = (@start_date.nil? ? "" : "TIMESTAMP(created_at::text) >= '#{@start_date.to_s(:db)}'")
opts[:conditions] += ((@start_date.nil? || @end_date.nil?) ? "" : " and ")
opts[:conditions] += (@end_date.nil? ? "" : "TIMESTAMP(created_at::text) <= '#{@end_date.to_s(:db)}'") 
```

最初，我有一个“DATETIME”，你有 TIMESTAMP，所以我切换了它，但仍然遇到问题。此代码的上下文是我正在使用以下格式在日期之间运行查询：2011-05-25 00:00:00

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:25:41.060

你`created_at`应该已经是 a`timestamp`所以没有必要`TIMESTAMP(created_at::text)`尝试将它转换为 a `timestamp`; `timestamp(x)`无论如何都不会在 PostgreSQL 中工作。SQLite 也不应该需要这种东西。

你最终会像这样运行 SQL：

```
SELECT "records".*
FROM "records"
WHERE TIMESTAMP(:order) >= '2011-05-25 00:00:00'
  and TIMESTAMP(:order) <= '2012-05-25 23:59:59'
ORDER BY created_at 
```

您正在做某事在 SQL中更改`created_at::text`为的某处。`:order`我无法重现该行为，但我怀疑您正在与命名占位符（即`column = :value`而不是`column = ?`）发生冲突，但这只是一个疯狂的猜测。

无论如何，如果摆脱这些`timestamp(...)`东西并切换到链接你的`where`调用，你会得到更好的东西：

```
query = Record.order(:created_at)
query = query.where('created_at >= ?', @start_date) if(@start_date.present?)
query = query.where('created_at <= ?', @end_date)   if(@end_date.present?) 
```

然后，您可以`query.all`或`query.paginate(...)`以其他方式获得最终结果。那（恕我直言）比一堆字符串争吵要漂亮得多，它应该在任何地方都一样。

如果您打算在 PostgreSQL（即 Heroku）上进行部署，那么您应该在 PostgreSQL 上进行开发和测试。SQLite 对 SQL 是什么以及它的类型系统如何工作有一些奇怪的想法，PostgreSQL（谢天谢地）不那么宽容。*您应该始终在同*一个堆栈上开发和部署，并且一直适用于版本号。

# javascript - 单击时捕获链接 ( ) 元素中的文本

> ID：10756329
> 
> 赞同：2
> 
> 时间：2012-05-25T14:35:29.080
> 
> 标签：javascript, jquery, html, hyperlink

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T14:36:17.397

改变这个...

```
 $('.mylinkclass').click(function(){getLinkText();}); 
```

对这个……

```
 $('.mylinkclass').click(getLinkText); 
```

这样您就可以直接将该函数分配为处理程序。这样，它的`this`值将是对单击的元素的引用。

* * *

如果在调用之前还有其他工作要做`getLinkText`，您可以通过`this`作为参数传递元素来传递...

```
 $('.mylinkclass').click(function(){
     // do other work
     getLinkText(this);
 });

function getLinkText(el){

    alert($(el).text());
    return false;
} 
```

或者通过在函数中使用`.call`或`.apply`使`this`具有相同的值...

```
 $('.mylinkclass').click(function(){
    // do other work
    getLinkText.apply(this, arguments);
 });

function getLinkText(){

    alert($(this).text());
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:38:57.800

`this`当您从匿名函数内部调用它时，您的引用会丢失

```
$('.mylinkclass').click(function(){
   alert($(this).text());
   return false;
}); 
```

或者

```
$('.mylinkclass').click(getLinkText);

function getLinkText(){
//.. 
```

或者

```
$('.mylinkclass').click(function () {
   getLinkText(this);
});

function getLinkText(that){
   alert($(that).text());
   return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T14:38:06.553

你也可以这样写：

```
$('.mylinkclass').click(function(e)
  {
    e.preventDefault(); // we don't want to cause the page to refresh or jump to top
    alert($(this).text());
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T14:38:45.350

你的问题是你如何设置/调用你的 getLinkText() 函数。

尝试以下操作：

```
$('.mylinkclass').click(getLinkText); 
```

您需要将`getLinkText`自己作为点击处理程序传递，而不是调用的匿名函数`getLinkText`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T14:45:35.417

您可以使用**text()**函数**$(".mylinkclass").text($(".link").text()获取链接中的文本**

# javascript - iPhone 网页应用程序设计

> ID：10756331
> 
> 赞同：0
> 
> 时间：2012-05-25T14:35:34.277
> 
> 标签：javascript, iphone, performance, web-applications, dynamic

在我的 iPhone webapp 中，我有一个空白 div，我使用以下方法动态添加内容：

```
var example=$(document.createElement('which-ever-tag i need'));

example.html('blah blah')
blank_div.append(example); 
```

这样我可以根据需要添加和删除元素。

```
example.remove(); 
```

不过，我最近想，我也可以从我的初始 HTML 页面中这样做：

```
<div id='homepage'>
    place some content in here
</div>
<div id='second_page'>
    some more content
</div> 
```

然后我可以隐藏和取消隐藏某些部分。我只是想知道最好的方法是什么？
JavaScript 是动态创建元素，还是制作它们并在显示需要的部分时取消隐藏？

代码片段：

```
title=$(document.createElement('div'));
title.addClass('title');
title.html('Mango Fitness');
container.append(title); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:48:38.450

我会说这是一个偏好问题，各有利弊。使用 JavaScript，您可以将所有部分保存在一个（可能）整洁的文件中。但是，通过将其拆分，您可以将主视图布局与逻辑分开，这可能会使以后更容易使用。我个人更喜欢使用 HTML 进行布局，使用 JavaScript 进行控制器逻辑。

# c# - 将属性移动到单独的类

> ID：10756342
> 
> 赞同：1
> 
> 时间：2012-05-25T14:36:12.420
> 
> 标签：c#, winforms

在创建一个新的自定义控件派生时，我有这样的事情：

```
[Category("Appearance")]
public Color SeparatorColor
{
    get { return separatorColor; }
    set { separatorColor= value; }
} 
```

并且 List View 它本身也有一个 ListViewInsertionMark 类，但我不能使用它，因为它在 VisualStyles 关闭时不起作用，遗憾的是在我的应用程序中它们应该被关闭。

所以现在我在我的主类中有类似的东西是从列表视图派生的，它工作正常。但我在想是否可以让它更类似于我无法使用的 .NET 类。所以把它移到一个单独的班级等等......你有什么建议？保持它在主类中？把它移到一个单独的班级？好的设计？糟糕的设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T22:14:05.687

ListViewInsertionMark 基本上是用来指向放置位置的。
如果您只需要列表项之间的分隔符，那么是的，您需要从 ListView 派生。

添加此 SeperatorColor 属性（您可以在此处使用自动属性）。覆盖 OnPaint，并一一绘制分隔符，不要忘记调用 base.OnPaint
干杯。

# java - 如何在 Spring Hibernate 中在运行时设置数据库名称

> ID：10756346
> 
> 赞同：0
> 
> 时间：2012-05-25T14:36:20.390
> 
> 标签：java, spring, hibernate

***问题描述***

我有来自 6 台不同机器的 6 个数据库，并且有一台云服务器。它将在用户登录时决定将在应用程序中使用哪个数据库。

我能够连接单个数据库。但我不知道处理数据库的动态名称。

***更新：***

我能够动态更改数据库，但一个问题正在发生。只有一个数据库中有一些存储过程是常见的（放置在云服务器上），（我有不能将存储过程添加到所有数据库的限制），所以我无法为任何其他数据库调用存储过程。我怎么打电话？

请给我一些想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:50:36.080

在 Spring 中有一个名为的类`AbstractRoutingDataSource`，它将满足您的要求，通过文档，您将找到一些有关如何实现该类的具体类的帮助，您需要更改（或添加）现有代码的某些部分以配置动态`Data source`。这个来自 spring 源的[博客正在解释这一点。](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:51:04.667

这个 Java Ranch 论坛主题解释了如何做到这一点。它向您展示了如何在运行时更改用户名/密码，但我想更改部分连接字符串或其他任何内容将是相同的模式。

[http://www.coderanch.com/t/489984/ORM/java/modify-hibernate-cfg-xml-at](http://www.coderanch.com/t/489984/ORM/java/modify-hibernate-cfg-xml-at)

# chef-infra - 用刀从 ChefServer 下载角色和食谱

> ID：10756347
> 
> 赞同：8
> 
> 时间：2012-05-25T14:36:28.080
> 
> 标签：chef-infra, continuous-deployment

鉴于我开始使用 Chef 服务器管理控制台与 Chef 合作，现在我想开始使用文件并通过刀上传它们。有没有办法通过刀检索存储在 ChefServer 上的角色和环境，所以我可以将它们放入 git 中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T06:05:14.757

您可以使用`knife environment list`and`knife environment show`命令下载环境并将“环境”替换为“角色”以对角色执行相同的操作。

```
mkdir environments
for env in `knife environment list`; do
  knife environment show $env --format=json > environments/$env.json
done 
```

然后，您可以将这些 JSON 文件检入 git 并使用刀编辑/上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T01:30:22.923

你在标题中提到了食谱，但在你的帖子中没有提到。

如果你想下载食谱，`knife cookbook download NAME`作品。像 Tim Potter 那样把它放在一个 for 循环中，你就会得到所有的食谱。

# html - html 头或 htaccess 文件中的 Apple 触摸图标

> ID：10756350
> 
> 赞同：3
> 
> 时间：2012-05-25T14:36:49.970
> 
> 标签：html, ios, .htaccess, favicon

我正在构建一个新的 Web 应用程序。

我已经准备好我的网站图标和苹果图标了。我想知道是否需要将它们包含在我的 HTML 文件的“头部”中 - 或者从`.htaccess`文件中路由它们是否可以接受？

HTML 代码：

```
<head>
  <link rel="shortcut icon" href="assets/ico/favicon.ico">
  <!-- Standard iPhone --> 
  <link rel="apple-touch-icon" sizes="57x57" href="touch-icon-iphone-114.png" />
  <!-- Retina iPhone --> 
  <link rel="apple-touch-icon" sizes="114x114" href="touch-icon-iphone-114.png" />
  <!-- Standard iPad --> 
  <link rel="apple-touch-icon" sizes="72x72" href="touch-icon-ipad-144.png" />
  <!-- Retina iPad --> 
  <link rel="apple-touch-icon" sizes="144x144" href="touch-icon-ipad-144.png" />
</head> 
```

或者只是把它们放在htaccess中？

```
 # Rewrite for Favicons
RewriteRule ^favicon\.ico$ assets/ico/favicon.ico [L]
RewriteRule ^apple-touch-icon\.png$ assets/ico/apple-touch-icon.png [L]
RewriteRule ^apple-touch-icon-57x57\.png$ assets/ico/apple-touch-114-icon.png [L]
RewriteRule ^apple-touch-icon-114x114\.png$ assets/ico/apple-touch-icon-114.png [L]
RewriteRule ^apple-touch-icon-72x72\.png$ assets/ico/apple-touch-icon-144.png [L]
RewriteRule ^apple-touch-icon-144x144\.png$ assets/ico/apple-touch-icon-144.png [L] 
```

**问题：**`.htaccess`将它们放在我的文件中并从我的 HTML 中删除它们有什么负面影响吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T14:43:59.563

如果您遵循 Apple 的命名约定，则不必指定它们。

来自苹果的[文档](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/ConfiguringWebApplications/ConfiguringWebApplications.html)：

> 如果没有使用链接元素指定图标，则会在网站根目录中搜索带有 apple-touch-icon... 或 apple-touch-icon-precomposed... 前缀的图标。例如，如果设备的适当图标大小为 57 x 57，则系统按以下顺序搜索文件名：
> 
> *   苹果触摸图标 57x57-precomposed.png
> *   苹果触摸图标 57x57.png
> *   苹果触摸图标precomposed.png
> *   苹果触摸icon.png

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T19:21:25.887

由于您在任何地方都使用相同的文件，因此您可以使用：

```
RewriteRule ^apple-touch-icon\.png$ assets/ico/apple-touch-icon.png [L]
RewriteRule ^apple-touch-icon-[0-9].* assets/ico/apple-touch-114-icon.png [L] 
```

此外，为什么不将 114x114 图标也发送到所有 iPhone？我经常做的只是创建一个 114x114 的图标并将其命名为 apple-touch-icon.png，并将其放在域的根目录中。这样视网膜得到 114px 和更老的只会将其调整为一半。唯一的缺点是你在 apache 错误日志中得到了一些 404，但谁在乎呢。

# c++ - 我们应该提供一个没有抛出说明符的析构函数吗？

> ID：10756354
> 
> 赞同：8
> 
> 时间：2012-05-25T14:37:00.300
> 
> 标签：c++, exception, destructor, throw, specifier

```
namespace QuantLib {

    //! Base error class
    class Error : public std::exception {
      public:
        /*! The explicit use of this constructor is not advised.
            Use the QL_FAIL macro instead.
        */
        Error(const std::string& file,
              long line,
              const std::string& functionName,
              const std::string& message = "");
        /*! the automatically generated destructor would
            not have the throw specifier.
        */
        ~Error() throw() {}
        //! returns the error message.
        const char* what() const throw ();
      private:
        boost::shared_ptr<std::string> message_;
    };

} 
```

正如您通过评论看到的那样，类的析构函数`Error`显式地提供了一个带有无抛出说明符的空实现。

**问**：这有必要吗？或者与让编译器生成隐式析构函数相比，这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T14:44:21.343

在 C++11 中，析构函数是隐式的`throw()`（除非该类型的任何成员或基类具有具有不同异常规范的析构函数），因此如果您在 C++11 模式下编译，则不需要。

如果你在 C++03 中，你可能想要添加它，但它是否会产生效果是非常实现定义的......现在，出于文档目的，你可能想要添加它，但同样，它通常是假设析构函数不会抛出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T14:44:28.590

[析构函数应始终设计为从不抛出异常](https://stackoverflow.com/questions/391595/when-is-it-ok-to-throw-an-exception-from-a-destructor-in-c)。所以从这个意义上说，声明一个空的析构函数只是为了将其标记为不抛出是没有意义的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T14:46:31.573

看你觉得是什么`throw()`意思。

根据标准，它的实际含义是，“如有必要，在每次调用此函数或在函数本身中添加额外的代码，以确保如果此函数抛出，则异常被捕获并被`std::unexpected`调用”。

某些编译器实现它的意思是“在假设它们不会抛出的情况下优化对这个函数的调用”，但是（违反标准）没有实现运行时检查。

因此，将它添加到析构函数（当然不应该抛出）以（但实际上可能不会）添加一个永远不应触发的运行时检查，因此可能有助于调试您的代码。它可能会或可能不会启用优化。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-25T14:48:11.150

析构函数总是隐含着异常规范：

[class.dtor] 12.4 p3

> 没有异常规范的析构函数声明被隐式认为具有与隐式声明（15.4）相同的异常规范。

[除了.spec] 15.4 p14

> 隐式声明的特殊成员函数（第 12 条）应具有异常规范。如果 f 是隐式声明的默认构造函数、复制构造函数、移动构造函数、析构函数、复制赋值运算符或移动赋值运算符，则其隐式异常规范指定类型 ID T 当且仅当 T 的异常规范允许f 的隐式定义直接调用的函数；如果 f 直接调用的任何函数允许所有异常，则 f 应允许所有异常；如果 f 直接调用的每个函数都不允许异常，则 f 应不允许异常。

所以，不，您没有必要使用异常规范。

* * *

在 C++03 中，用户定义的析构函数没有隐式异常规范，因此如果您定义了自己的析构函数，则不能依赖编译器自动添加适当的异常规范。但是隐式声明的析构函数具有与 C++11 中相同的隐式异常规范。

# open-source - 如何从 cassandra 或 hbase 中提取 leveldb 类型的数据存储（sstable + memtable）？

> ID：10756356
> 
> 赞同：2
> 
> 时间：2012-05-25T14:37:07.100
> 
> 标签：open-source, cassandra, hbase, bigdata, leveldb

LevelDB 是来自 Google 的一个非常有趣的 C++ 数据存储。我正在 Java 世界中寻找类似的东西（坦率地说，这样我可以更好地理解代码，更容易在 Windows 上运行，等等）。

我了解 Hbase 和 Cassandra 也包含相同的基本技术：用于文件存储的 sstable、用于内存存储的 memtable（在排序和写入磁盘之前）、某种压缩、定期压缩等。

是否有任何努力从更大的项目中提取这项技术？我自己已经开始查看代码库（主要是 Cassandra），但这些显然不是微不足道的项目。哪个项目有更多的模块化代码？

期待大家的指点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:15:37.457

您似乎不太可能提取这 3 家商店共有的一些通用的、重要的模块。你说得对，这些想法非常相似，但实现（存储文件格式、内存表示、压缩、协调服务等）非常复杂，以至于尝试在像这样的 3 个不同项目之间共享代码会使事情变得更多复杂，不少。

在 Cassandra 和 HBase 之间，从某种意义上说，后者具有更多的模块化代码，因为它将大部分功能委托给其他层（HDFS、Zookeeper），而在 Cassandra 中，这一切都在项目内部处理。但即使在 HBase 中，这部分（物理存储格式、压缩算法等）也是与整个系统耦合的，而不是分层的。

如果您正在寻找一种支持不同存储引擎的架构，或者想了解如何处理分布式系统中的分层，请查看 Riak（它确实支持 LevelDB 作为其存储层之一选项）：

[http://wiki.basho.com/LevelDB.html](http://wiki.basho.com/LevelDB.html)

# c# - 无法评估表达式...在网页上

> ID：10756359
> 
> 赞同：0
> 
> 时间：2012-05-25T14:37:15.320
> 
> 标签：c#, asp.net, .net-3.5, exception-handling, error-handling

与此问题相关： [无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部](https://stackoverflow.com/questions/2041482/unable-to-evaluate-expression-because-the-code-is-optimized-or-a-native-frame-is)

我目前在我的例外中看到了这一点：

> {无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部。}

这是有问题的代码。在 response.End(); 上抛出异常；

```
DataSet dataSet = new DataSet();
dataSet.Tables.Add(table); 
// Table is a well-formatted DataTable formed from data stored in a Session variable

HttpResponse response = HttpContext.Current.Response;
response.Clear();
response.Charset = "";

response.ContentType = "application/vnd.ms-excel";
response.AddHeader("Content-Disposition", "attachment;filename=\"ExcelFile.xls\"");

using (StringWriter stringWriter = new StringWriter())
using (HtmlTextWriter htmlTextWriter = new HtmlTextWriter(stringWriter))
{
    DataGrid dataGrid = new DataGrid { DataSource = dataSet.Tables[0] };

    dataGrid.DataBind();
    dataGrid.RenderControl(htmlTextWriter);

    response.Write(stringWriter.ToString());
    response.End();
} 
```

此代码用于网页上的“导出到 excel”按钮。这是直接从另一个使用相同功能的页面复制的，并且可以正常工作。

关于如何调试此问题的任何想法？我怎样才能达到可以看到异常的程度？另外，相关问题在这里如何应用？最佳答案和选定答案非常模糊。

请注意，其中的数据`table`以 Session 状态存储。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-09T08:54:05.100

它可以在没有异常的情况下解决。

而不是

`Response.End()`

使用

`Response.Flush()`

不停止页面执行的函数。

当我尝试使用页面下载*.xlsx*文件时，我也遇到了一些问题`Reponse`：打开 excel 文件后，我收到以下错误文本：

> Excel 在 myFilename.xlsx 中发现了不可读的内容。是否要恢复此工作簿的内容？如果您信任本书的来源，请单击是。

通过`Response.SuppressContent = true;`在`Response.Flush()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T16:09:39.543

代码很好。当您执行 Response.End() 时，您会得到一个 ThreadAbortException：

[http://support.microsoft.com/kb/312629/EN-US/](http://support.microsoft.com/kb/312629/EN-US/)

有些人认为 Response.End() 过于激烈：

[Response.End() 被认为是有害的吗？](https://stackoverflow.com/questions/1087777/is-response-end-considered-harmful)

我建议处理这个特定的异常（因为你知道你会得到它），并移动 reponse.End() （就像 mellamokb 建议的那样）：

```
 HttpResponse response = HttpContext.Current.Response;
        try
        {
            DataSet dataSet = new DataSet();
            DataTable table = new DataTable();

            dataSet.Tables.Add(table);

            response.Clear();
            response.Charset = "";

            response.ContentType = "application/vnd.ms-excel";
            response.AddHeader("Content-Disposition", "attachment;filename=\"ExcelFile.xls\"");

            using (StringWriter stringWriter = new StringWriter())
            using (HtmlTextWriter htmlTextWriter = new HtmlTextWriter(stringWriter))
            {
                DataGrid dataGrid = new DataGrid { DataSource = dataSet.Tables[0] };

                dataGrid.DataBind();
                dataGrid.RenderControl(htmlTextWriter);

                response.Write(stringWriter.ToString());

            }
            response.End();
        }
        catch (ThreadAbortException ex)
        {
            //Log some trace info here
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-05T06:55:22.257

使用 HttpContext.Current.ApplicationInstance.CompleteRequest() 而不是 Response.End()

# .net - Winform：反斜杠上的光标位置错误或删除

> ID：10756364
> 
> 赞同：0
> 
> 时间：2012-05-25T14:37:23.807
> 
> 标签：.net, vb.net, winforms

我在 WinForms 中的文本框上设置了一种过滤器，以排除客户端输入的特定字符。但是，我似乎遇到了需要帮助解决的新问题。

a) 单击 BackSlash 会使光标移动到字符串的前面，而不是停留在正确的位置

b) 后续单击 BACKSLASH 仍会导致从正确位置删除，但光标仍位于字符串的开头

```
Private Sub txtExp_KeyPress(sender As System.Object, e As System.Windows.Forms.KeyPressEventArgs) Handles txtExp.KeyPress
        Dim strtext As String = txtExp.Text 
            If (e.KeyChar = ChrW(Keys.Back)) Then
                If (strtext.Length > 0) Then
                    txtExp.Text = strtext.Substring(0, strtext.Length - 1)
                    txtExp.Update()
                End If
            ElseIf (Not (Char.IsDigit(e.KeyChar) Or Char.IsControl(e.KeyChar) Or (e.KeyChar = "."))) Then
                e.Handled = True
            Else
                txtExp.AppendText(e.KeyChar)
            End If
    End Sub 
```

我想要的是始终将光标放在正确的位置。请问我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:41:06.647

我认为您可能有太多代码：

```
Private Sub txtExp_KeyPress(ByVal sender As Object, ByVal e As KeyPressEventArgs) Handles txtExp.KeyPress
  With DirectCast(sender, TextBox)
    If (Not (Char.IsDigit(e.KeyChar) Or Char.IsControl(e.KeyChar) Or (e.KeyChar = "."))) Then
      e.Handled = True
    End If
  End With
End Sub 
```

用户将信息粘贴到文本框中仍然存在问题。此外，您可能应该只允许一位小数。您当前的代码允许多个小数点。

看起来这确实是[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)控件的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:47:58.247

我认为您不需要上面的所有代码，只需要设置 e.Handled 的部分。

可能是您的代码造成问题。

# android - 开发一个缩放跟随窗口

> ID：10756369
> 
> 赞同：1
> 
> 时间：2012-05-25T14:37:46.507
> 
> 标签：android, android-layout, android-imageview

我正在开发一个想要全屏显示图像的 Android 应用程序。然后我想在这个图像上显示一个小“窗口”：

*   窗口放置在用户触摸屏幕的位置。
*   此窗口的内容是放大的原始图像的一部分。放大的图像部分也由用户触摸屏幕的位置定义。

这样，当用户在屏幕上移动手指时，“窗口”会跟随手指并显示原始图像的缩放版本。

直到现在，我能够做任何我想做的事情，除了用缩放的图像更新“窗口”的内容。

我写了以下代码：

```
public class DetectEyesActivity extends Activity implements OnTouchListener {
//DetectEyesView detectEyesView;
//LinearLayout mLinearLayout;
TextView text;
ImageView imgView;
Bitmap imgBitmap;
ImageView touchView2;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.detecteyeslayout);

    Intent intent = this.getIntent();
    byte[] image = intent.getByteArrayExtra("Image");

    text = (TextView) findViewById(R.id.detectEyesTextView1);
    imgView = (ImageView) findViewById(R.id.detectEyesImageView1);

    imgBitmap = BitmapFactory.decodeByteArray(image, 0, image.length);
    imgView.setImageBitmap(imgBitmap);
    //imgView.setOnTouchListener(this);

    text.setTextSize(30);
    text.setText("A");

    touchView2 = (ImageView) findViewById(R.id.detectEyesImageView2);

    Bitmap temp = Bitmap.createBitmap(imgBitmap, 200, 200, 200, 200);
    touchView2.setImageBitmap(temp);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    //event.getX()
    int y = (int)event.getY();
    int x = (int)event.getX();
    float aux = (float)imgBitmap.getHeight() / (float)imgView.getHeight();
    //float imgBitmapHeight = 
    //float imgBitmapWidth = (float)imgBitmap.getWidth()/aux
    float imgDrawableX = (imgView.getWidth() - (float)imgBitmap.getWidth()/aux  ) / 2 + imgView.getX();
    float imgDrawableY = (imgView.getHeight() - (float)imgBitmap.getHeight()/aux  ) / 2 + imgView.getY();
    text.setText("TouchX = " + x + "   TouchY = " + y + " ImageX: "+ imgDrawableX  + " ImageY: "+ imgDrawableY + " aux = " + aux);

    Bitmap temp = Bitmap.createBitmap(imgBitmap, x, y, 50, 50);
    //touchView2.setImageBitmap(temp);
    touchView2.setVisibility(0);
    touchView2.bringToFront();
    touchView2.layout(x-200, y-200, x-30, y-30);
    touchView2.postInvalidate();
    touchView2.invalidate();
    Log.v("x,y",event.getY()+","+event.getX());

    return true;
} 
```

使用此代码，窗口跟随手指而不更新其内容。当我取消注释该行时

```
 //touchView2.setImageBitmap(temp); 
```

该窗口根本不会出现。尽管如此，textView 的内容仍在不断更新。所以我知道 onTouchEvent 正在执行。

有谁知道为什么会这样？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:26:25.297

您是否尝试过不使用 postInvalidate() ？
（您似乎没有使用多线程）您也可以尝试使用 Canvas，因为您可能需要高刷新率......
在官方文档上查看这个主题，一切都很好解释：[http://developer .android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:12:19.433

虽然我可能无法回答您的具体问题，但请允许我对您的实际代码给出我的想法。

如果我理解正确，您要做的就是在能够放大的同时围绕特定图像“移动”。

困扰我的第一件事是：

*   位图温度 = Bitmap.createBitmap(imgBitmap, x, y, 50, 50); *

这意味着每次用户触摸屏幕时，您都在请求 android 设备的 CPU 创建一个新的位图。如果用户在屏幕上滑动手指，这似乎非常冒险。大量的资源必须在很短的时间内分配，而且没有充分的理由。您应该只创建一次位图，然后以更好的方式重用它。

这就引出了我的第二点。

您是否考虑过使用 OpenGL ES 来执行此操作？假设你能理解它的基础，它会让你的生活更轻松。然后，您将使用 GPU 来渲染所谓的 Image。更不用说您可以使用一个非常有用的“相机”（GluLookAt），顾名思义，查看您想要的图像部分，同时能够非常轻松地放大和缩小。

虽然我知道学习 OpenGL ES10 可能会被证明是遥不可及的，但这将是最有效的解决方案。

我希望这能以某种方式帮助你！

# facebook - 有没有办法在移动屏幕上拥有适当的 Facebook 对话框宽度？

> ID：10756370
> 
> 赞同：0
> 
> 时间：2012-05-25T14:37:49.487
> 
> 标签：facebook, mobile

请求对话框的宽度无法在移动屏幕上以正确的方式显示（我正在使用带有 safari 的 ipod touch），**宽度太长并且“发送”按钮在屏幕之外，在右侧**。

有没有办法让对话框显示适合移动屏幕空间？

您可以在 Facebook 官方移动测试应用程序上进行测试：http: [//www.facebookmobileweb.com/hackbook](http://www.facebookmobileweb.com/hackbook)

登录后，单击请求并尝试发送一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:38:21.480

我尝试了很多方法都没有成功，直到我按照以下步骤操作：

[http://www.johnnypez.com/uncategorized/customising-fb-ui-iframe-dialog-dimensions/](http://www.johnnypez.com/uncategorized/customising-fb-ui-iframe-dialog-dimensions/)

# django - 我如何将这些列表过滤器转换为数据库查询？

> ID：10756373
> 
> 赞同：0
> 
> 时间：2012-05-25T14:38:02.123
> 
> 标签：django

**编辑：**

防止大家阅读过多：问题是我不明白什么

```
Q(tag_rep__tag=tag.id) 
```

确实适用于这个模型：

```
class Item(models.Model):

    tag_rep=generic.GenericRelation(TaggedItem) 
```

很可能 tag_rep__tag 确实返回标签列表，而不是单个标签。所以我不能像我那样做查询。我如何比较 tag_rep__tag 以确定它是否

1.  包含任何标签列表
2.  包含所有标签列表

* * *

我正在尝试为具有标记标签的项目构建一个基于查询集的标签过滤器。我已经成功创建了过滤器，但它们基于 python`filter`并返回一个列表：

```
class TagFilter(object):

    def __init__(self,any_tags,avoid_tags,all_tags):
         # all tags as tag instances
         self.any_tags = any_tags
         self.avoid_tags = avoid_tags
         self.all_tags = all_tags

    def seek_any_tags(self, item):
        for tag in self.any_tags:
            if tag in item.tags:
               return True
        return False

    def items_with_any_tags(self,items):
        return filter(self.seek_any_tags,items) 
```

这工作得很好，但现在我需要一个查询集作为回报来传递给一个表单集。所以当前方法不再起作用，因为它返回一个列表。为了能够访问我的模型的标签，我这样做了：

```
from django.contrib.contenttypes import generic
from tagging.models import TaggedItem

class Item(models.Model):

    # some_fields here

    tag_rep = generic.GenericRelation(TaggedItem) 
```

过滤器`seek_any_tags`是我唯一可以以数据库查询的形式重建的过滤器。在阅读了一些 SO 帖子并进行了大量谷歌搜索后，我想出了这个解决方案：

```
def seek_any_tags_qs(self,items):

    if self.any_tags!=None:
        q = reduce(lambda x, y: x | y, [Q(tag_rep__tag=tag.id) for tag in self.any_tags])
        items = items.filter(q)

    return items 
```

非常好，是的，我对此感到有点自豪。但是现在我要构建另外两个过滤器：`avoid_any_tags`和`seek_all_tags`. 我尝试以与`seek_any_tags`过滤器相同的方式进行操作：

```
def avoid_any_tags_qs(self,items):

    if self.avoid_tags != None:
        q = reduce(lambda x, y: x | y, [Q(tag_rep__tag=tag.id) for tag in self.avoid_tags])
        items = items.exclude(q)

    return items

def seek_all_tags_qs(self,items):

    if self.all_tags != None:
        q = reduce(lambda x, y: x & y, [Q(_tags__contains=tag.name) for tag in self.seek_tags])
        items.filter(q)

    return items 
```

`avoid_any_tags`应该排除在避免标签中具有任何标签的每个项目。最后一个，`seek_all_tags`应该只返回在 all_tags 中包含所有标签的项目。

但`avoid_any_tags`不能像执行的那样工作。它只排除在 Avoid_tags 中有标签的元素，没有其他标签。如果一个项目有任何不在 Avoid_tags 中的标签，它不会被排除。为什么不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:57:15.490

我认为这不是一个完全合适的查询（来自您的示例）：

```
Q(tag_rep__tag=tag.id) 
```

我假设您正在关注[此处列出的示例](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)，并且该 TaggedItem 的标记字段是 slug（字符串）字段？因此，立即过滤 id 等于 slugfield 的位置似乎不正确。此外，您的 GenericRelation 代表一个列表（或就此而言的查询集）是正确的。它是对指定其外键字段的 TaggedItem 的反向引用。所以你可以这样做：`Item.tag_rep.all()`

您的问题中有太多额外的信息，有点难以理解，所以我将忽略其中的大部分内容，并在顶部处理您的摘要。

```
# Any of a list of strings*
any_tags = ['foo', 'bar']
Item.objects.filter(tag_rep__tag__in=any_tags) 
```

至于“在给定的标签列表中有所有标签”，也许有一个非常复杂的基于 django 查询的方法来做到这一点，但这是一种中间步骤在客户端的方法：

```
# items having all tags in a given list of tags
from collections import defaultdict

tag_vals = Item.objects.all().values_list('id', 'tags__tag').distinct()
# produces result like:  `[(1, u'bdfl'), (1, u'boom'), (2, u'bar'), ...)`

all_tags = set(['boom', 'fizz'])

tag_groups = defaultdict(set)
for id_, tag in tag_vals:
    tag_groups[id_].add(tag)
# produces tag_groups like `{1: set([u'fizz', u'foo', u'boom']), ...}`

item_ids = [id_ for id_,tags in d.iteritems() if tags.issubset(all_tags)]
Item.objects.filter(id__in=item_ids) 
```

在最后一个示例中，它将匹配 Item 具有标签`['a,'b']`且 all_tags 为 的情况`['a','b',c']`，但它不会匹配 Item 具有的标签多于 all_tags 的情况，但它确实匹配的情况。要使其匹配任何一种方式，您都必须修改 item_ids 过滤器：

```
item_ids = [id_ for id_,tags in d.iteritems() if \
                tags.issubset(all_tags) or tags.issuperset(all_tags)]
Item.objects.filter(id__in=item_ids) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:27:58.303

简而言之，这是有效的代码：

```
# does the item have any of the seek tags?
has_seek_tags = Q(tags__id__in=self.seek_tags)
items = items.filter(has_seek_tags).distinct()

# does the item have any of the avoid tags?    
has_avoid_tags= Q(tags__id__in=self.avoid_tags)
items = items.exclude(has_avoid_tags).distinct()

# now apply the queries
for tag_id in self.all_tags:
    items = items.filter(has_avoid_tags) 
```

我仍然不明白的是，为什么 for 循环中的 items.filter 与此不同：

```
q = reduce(lambda x,y: x&y, [Q(tags__id__exact=tag_id) for tag_id in self.all_tags)
items = items.filter(q) 
```

但也许这本身就是一个问题。

# google-apps-script - 脚本输出中日期更改的奇怪问题

> ID：10756376
> 
> 赞同：0
> 
> 时间：2012-05-25T14:38:17.347
> 
> 标签：google-apps-script

我的一位同事编写了一个 Google Apps 脚本来自动化工作流程（批准酒店的房间补偿请求）。总的来说，该脚本似乎按预期运行。脚本中有一个按自动计划运行的函数（基于时间，而不是事件驱动）。有好几次入住日期错了一个，导致预订错误。不幸的是，并非所有请求都发生这种情况。提出请求的所有相关用户都在同一时区 (EST)。

例如，我见过这样的事件，其中提交的请求的签入日期为 10 月 22 日，签出日期为 10 月 23 日，但是当脚本运行并且提交者收到批准签入通知时日期移至 10/21，退房时间移至 10/22。

HTML 电子邮件的相关部分只是从电子表格行中提取值：+ "

" + "预计入住日期：" + Utilities.formatDate(row.arrivalDate, "EST", "MM-dd-yyyy") + "

" + "预计退房日期：" + Utilities.formatDate(row.departureDate, "EST", "MM-dd-yyyy")

什么可能导致这种行为？这可能是因为执行代码的给定 Google 服务器上的时间吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:22:17.773

请确保电子表格的时区（位于**File > Spreadsheet settings**和脚本项目的时区（位于**File > Project properties**）都设置正确。电子表格的时区控制如何从单元格中读取日期/时间值, 而脚本的时区控制新 Date 对象、触发器等的默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T16:08:31.567

根据我的经验，这可能是 EST 和 EDT 混淆的结果，尤其是在转换期间提交的数据。让我举个例子：假设我们在冬季时间（EDT），并且提交了一个请求以 EST 为日期：如果您的脚本强制日期为 EST，则 EDT 日期将被误解。根据您设置时间的方式，可能会导致白班。我所做的从根本上解决了这个问题是在使用 Utilities.formatDate() 时考虑当前的夏季/冬季时间。这是我使用的代码片段，也许您可​​以尝试一下：（我在欧洲，所以值不同但原理相同）

```
 var FUS1=new Date().toString().substr(25,8);// FUS1 gets the GMT+0200 or GMT+0100 string
// Fri Sep 24 2010 10:00:00 GMT+0200 (CEST) for example
  if (FUS1!="GMT+0200"){FUS1="GMT+0100"};// and takes care of summer time !
  var today=Utilities.formatDate(new Date(),FUS1,"dd-MM-yyyy")+" à "+Utilities.formatDate(new Date(),FUS1,"HH:mm") 
```

有关完整描述，您可以查看我很久以前提出的[这个问题，这不是一个真正的问题；-)](http://code.google.com/p/google-apps-script-issues/issues/detail?id=211&can=1&q=summer%20time&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Priority%20Component%20Owner)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T21:10:42.377

我遇到了类似的问题，但我的问题是在格式为 MM/dd/yyy 的表格中输入日期。从电子表格中获取日期以发布到电子邮件时，总是少一天。

我在东部时间 (GMT-5:00)。我在我的项目属性和电子表格设置中验证了它是正确的。深入挖掘后，我意识到虽然在表格中输入并显示在电子表格中的日期是 7/27/2012，但电子表格中的实际日期是：

2012 年 7 月 26 日星期四 21:00:00 PDT

这具有“某种”意义，因为 2012 年 7 月 27 日 00:00:00 东部时间 (GMT-5:00) 将比 PDT 的前一天早三个小时。我只是格式化了格林威治标准时间的日期。我本可以将它格式化为 EDT，它应该一直可以工作，但是如果代码需要随着季节的变化而改变，那么对它进行硬编码 GMT 或多或少地让其他人阅读代码时产生了猜测。我只需要日期。

我确实复制并粘贴了这篇文章中的 FUS1 示例（现在作为评论）作为处理问题的一种更“雄辩”的方式。谢谢！

# function - 内核版本 2.6.24 和 2.6.32 device_create

> ID：10756379
> 
> 赞同：1
> 
> 时间：2012-05-25T14:38:26.130
> 
> 标签：function, linux-kernel, device

我正在使用该函数来创建设备**device_create()** 但它在 Ubuntu 8.04 内核版本 2.6.24 中创建了一个警告：

> 警告：格式参数过多

这是我使用此功能的方式：

```
device_create(my_class, NULL, MKDEV(major, 0), NULL, "my_dev"); 
```

相同的代码在**Ubuntu 10.04 -*内核版本 2.6.32*****上运行良好，但在Ubuntu 8.04 -*内核版本 2.6.24***中创建警告！

任何人都可以请我更正以删除该警告吗？

先感谢您。信德胡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:48:43.350

用于此的旧 API 没有 drvdata 的第四个参数，您将其提供为 NULL。所以摆脱NULL，你应该没问题。

也就是说，其他 API 也发生了变化，所以期待其他问题。考虑定义一些跨内核版本做正确事情的预处理器宏。例如：

```
#if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,26)
    #define my_device_create(a, b, c, d) device_create(a, b, c, NULL, d)
#else
    #define my_device_create(a, b, c, d) device_create(a, b, c, d)
#endif 
```

# python - Python中子进程读取线超时

> ID：10756383
> 
> 赞同：50
> 
> 时间：2012-05-25T14:38:42.107
> 
> 标签：python, timeout, subprocess

我有一个小问题，我不太确定如何解决。这是一个最小的例子：

### 我有的

```
scan_process = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
while(some_criterium):
    line = scan_process.stdout.readline()
    some_criterium = do_something(line) 
```

### 我想要什么

```
scan_process = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
while(some_criterium):
    line = scan_process.stdout.readline()
    if nothing_happens_after_10s:
        break
    else:
        some_criterium = do_something(line) 
```

我从子进程中读取了一行并对其进行了处理。如果在固定时间间隔后没有线路到达，我该如何退出？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-25T17:42:41.880

感谢所有的答案！

我找到了一种方法来解决我的问题，只需使用 select.poll 来查看标准输出。

```
import select
...
scan_process = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
poll_obj = select.poll()
poll_obj.register(scan_process.stdout, select.POLLIN)
while(some_criterium and not time_limit):
    poll_result = poll_obj.poll(0)
    if poll_result:
        line = scan_process.stdout.readline()
        some_criterium = do_something(line)
    update(time_limit) 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-12-06T06:32:03.793

这是一个便携式解决方案，它使用以下命令强制读取单行超时[`asyncio`](https://docs.python.org/3/library/asyncio)：

```
#!/usr/bin/env python3
import asyncio
import sys
from asyncio.subprocess import PIPE, STDOUT

async def run_command(*args, timeout=None):
    # Start child process
    # NOTE: universal_newlines parameter is not supported
    process = await asyncio.create_subprocess_exec(*args,
            stdout=PIPE, stderr=STDOUT)

    # Read line (sequence of bytes ending with b'\n') asynchronously
    while True:
        try:
            line = await asyncio.wait_for(process.stdout.readline(), timeout)
        except asyncio.TimeoutError:
            pass
        else:
            if not line: # EOF
                break
            elif do_something(line):
                continue # While some criterium is satisfied
        process.kill() # Timeout or some criterion is not satisfied
        break
    return await process.wait() # Wait for the child process to exit

if sys.platform == "win32":
    loop = asyncio.ProactorEventLoop() # For subprocess' pipes on Windows
    asyncio.set_event_loop(loop)
else:
    loop = asyncio.get_event_loop()

returncode = loop.run_until_complete(run_command("cmd", "arg 1", "arg 2",
                                                 timeout=10))
loop.close() 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-25T15:04:21.970

我在 Python 中使用了一些更通用的东西（如果我没记错的话，也是从 Stack Overflow 问题拼凑而成的，但我不记得是哪些问题了）。

```
import thread
from threading import Timer

def run_with_timeout(timeout, default, f, *args, **kwargs):
    if not timeout:
        return f(*args, **kwargs)
    try:
        timeout_timer = Timer(timeout, thread.interrupt_main)
        timeout_timer.start()
        result = f(*args, **kwargs)
        return result
    except KeyboardInterrupt:
        return default
    finally:
        timeout_timer.cancel() 
```

不过请注意。这使用中断来停止你给它的任何功能。这对于所有函数来说可能不是一个好主意，它还会阻止您在超时期间使用`Ctrl`+关闭程序`C`（即`Ctrl`+`C`将被视为超时）。

您可以使用它并将其称为：

```
scan_process = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
while(some_criterium):
    line = run_with_timeout(timeout, None, scan_process.stdout.readline)
    if line is None:
        break
    else:
        some_criterium = do_something(line) 
```

不过，这可能有点矫枉过正。我怀疑您的情况有一个我不知道的更简单的选择。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-12-06T02:10:40.757

While [Tom's solution](https://stackoverflow.com/questions/10756383/timeout-on-subprocess-readline-in-python/10759061#10759061) works, using `select()` in the [C](https://en.wikipedia.org/wiki/C_%28programming_language%29) idiom is more compact, this is the equivalent of your answer:

```
from select import select
scan_process = subprocess.Popen(command,
                                stdout=subprocess.PIPE,
                                stderr=subprocess.STDOUT,
                                bufsize=1)  # Line buffered
while some_criterium and not time_limit:
    poll_result = select([scan_process.stdout], [], [], time_limit)[0] 
```

The rest is the same.

See `pydoc select.select`.

[Note: this is Unix-specific, as are some of the other answers.]

[Note 2: edited to add line buffering as per OP request]

[Note 3: the line buffering may not be reliable in all circumstances, leading to readline() blocking]

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-06T08:42:57.667

如果读取一行花费的时间太长，一个可移植的解决方案是使用线程杀死子进程：

```
#!/usr/bin/env python3
from subprocess import Popen, PIPE, STDOUT

timeout = 10
with Popen(command, stdout=PIPE, stderr=STDOUT,
           universal_newlines=True) as process:  # text mode
    # kill process in timeout seconds unless the timer is restarted
    watchdog = WatchdogTimer(timeout, callback=process.kill, daemon=True)
    watchdog.start()
    for line in process.stdout:
        # don't invoke the watcthdog callback if do_something() takes too long
        with watchdog.blocked:
            if not do_something(line):  # some criterium is not satisfied
                process.kill()
                break
            watchdog.restart()  # restart timer just before reading the next line
    watchdog.cancel() 
```

像这样的`WatchdogTimer`类`threading.Timer`可以重新启动和/或阻止：

```
from threading import Event, Lock, Thread
from subprocess import Popen, PIPE, STDOUT
from time import monotonic  # use time.time or monotonic.monotonic on Python 2

class WatchdogTimer(Thread):
    """Run *callback* in *timeout* seconds unless the timer is restarted."""

    def __init__(self, timeout, callback, *args, timer=monotonic, **kwargs):
        super().__init__(**kwargs)
        self.timeout = timeout
        self.callback = callback
        self.args = args
        self.timer = timer
        self.cancelled = Event()
        self.blocked = Lock()

    def run(self):
        self.restart() # don't start timer until `.start()` is called
        # wait until timeout happens or the timer is canceled
        while not self.cancelled.wait(self.deadline - self.timer()):
            # don't test the timeout while something else holds the lock
            # allow the timer to be restarted while blocked
            with self.blocked:
                if self.deadline <= self.timer() and not self.cancelled.is_set():
                    return self.callback(*self.args)  # on timeout

    def restart(self):
        """Restart the watchdog timer."""
        self.deadline = self.timer() + self.timeout

    def cancel(self):
        self.cancelled.set() 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-17T20:32:01.040

尝试使用 signal.alarm：

```
#timeout.py
import signal, sys

def timeout(sig, frm):
  print "This is taking too long..."
  sys.exit(1)

signal.signal(signal.SIGALRM, timeout)
signal.alarm(10)
byte = 0

while 'IT' not in open('/dev/urandom').read(2):
  byte += 2
print "I got IT in %s byte(s)!" % byte 
```

运行几次以显示它有效：

```
$ python timeout.py 
This is taking too long...
$ python timeout.py 
I got IT in 4672 byte(s)! 
```

有关更详细的示例，请参阅[pGuides](http://pguides.net/python-tutorial/python-timeout-a-function/)。

# c# - WPF 创建列表

> ID：10756385
> 
> 赞同：0
> 
> 时间：2012-05-25T14:38:48.780
> 
> 标签：c#, .net, wpf

我在 C# MAINWINDOW.xaml.cs 中有一个这样的字符串集合

```
public class NameList : ObservableCollection<Shortcuts>
        {
            public NameList()     : base()
            {
                Add(new Shortcuts("ctrl", "b","s"));
                Add(new Shortcuts("ctrl", "b","m"));
                Add(new Shortcuts("ctrl", "b","p"));
                Add(new Shortcuts("ctrl", "b","1"));
            }
        }

        public class Shortcuts
        {
            private string firstkey;
            private string secondkey;
            private string lastkey;

            public Shortcuts(string first, string second, string last)
            {
                this.firstkey = first;
                this.secondkey = second;
                this.lastkey= last;
            }

            public string Firstkey
            {
                get { return firstkey; }
                set { firstkey = value; }
            }

            public string Secondkey
            {
                get { return secondkey; }
                set { secondkey = value; }
            }

            public string Lastkey
            {
                get { return lastkey; }
                set { lastkey = value; }
            }
        }
    } 
```

然后在 MainWindow.xaml 本身我有一个组合框，我想将这些项目绑定到组合框，所以这就是我所做的

```
<Window x:Class="Testing_learning.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:c="clr-namespace:Testing_learning"
        Title="Outlook Context Settings" Height="350" Width="525">
    <Window.Resources>
         <c:ListName Key ="NameListData"/>

    </Window.Resources> 
```

哦顺便说一句，项目名称是***Testing_learning***这就是为什么会有这个

```
xmlns:c="clr-namespace:Testing_learning" 
```

但问题是当我添加这行代码时

```
<Window.Resources>
         <c:ListName Key ="NameListData"/>

        </Window.Resources> 
```

我在 c:ListName 收到错误，找不到类型 ListName 为什么会这样？有什么想法吗？

截图 1 ![在此处输入图像描述](../Images/dfa272ea4631f0ab3f88bdbb75faa9f8.png)

截图 2 ![在此处输入图像描述](../Images/18b748edd7250117312e7ffdcdf21701.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:44:39.810

好像是笔误？你的 C# 有 NameList，但你的 XAML 有 ListName。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:45:27.763

你的类定义：

```
public class NameList : ObservableCollection<Shortcuts>
    {
    //[…] 
```

你的xml：

```
<c:ListName Key ="NameListData"/> 
```

`NameList`与 不同`ListName`。由于您没有`ListName`课程，您将看到“未找到列表名称”错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T21:52:36.913

你还有一个错字：`Key`必须是`x:Key`

```
<Window.Resources>
    <c:NameList x:Key="NameListData" />
</Window.Resources> 
```

并且您已将类嵌套在 MainWindow 类中。移出：

```
namespace Testing_learning
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }

    public class NameList : ObservableCollection<Shortcuts>
    {
        ...
    }

    public class Shortcuts
    {
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T07:23:57.827

当我将这两个类移动到单独的文件时，它起作用了。

编辑：

即使类在 MainWindow.xaml 中，构建也可以解决问题

![在此处输入图像描述](../Images/3bc04517d3456a67822c776394b09b62.png)

# php - 如何调试执行行

> ID：10756390
> 
> 赞同：0
> 
> 时间：2012-05-25T14:39:12.700
> 
> 标签：php, mysql, phpmyadmin

我想调试这一行：

```
exec("mysqldump --add-drop-table -h 127.0.0.1 -u$db_user -p$db_pass $db_name > $db_name.sql"); 
```

...因为这不起作用。可能吗？我想创建一个从多个数据库中获取所有内容的脚本，但这条线不起作用，它会创建一个 .sql 文件但不保存任何信息。那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:53:32.193

后加一个空格`-u`。[参考链接](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_user)

```
exec("mysqldump --add-drop-table -h 127.0.0.1 -u $db_user -p$db_pass $db_name > $db_name.sql"); 
```

# objective-c - 目标 c 类作为消息参数

> ID：10756393
> 
> 赞同：1
> 
> 时间：2012-05-25T14:39:31.110
> 
> 标签：objective-c, class, cocos2d-iphone, arguments, scene

是否可以将目标 c 类（或者符号是接口？）作为消息参数传递？像这样的东西：

```
-(void) f:(Class) c
{
  [c message];
} 
```

更具体地说，我想调用以下行：

```
[[CCDirector sharedDirector] replaceScene:[CCTransitionCrossFade transitionWithDuration:0.5f scene:[SceneDefence scene]]]; 
```

但我希望 SceneDefence 是一个变量。我希望能够调用 SceneDefence 或 SceneAttack。下一个场景将存储在 init 方法中的一个实例变量中，以供以后更改场景时使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:44:50.560

是的，你说得对，你只需要调用类方法[`class`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/class)。

```
-(void) f:(Class) c
{
    [c message]; //message will need to be a class method
}

...
   [myclass f:[SceneDefence class]]; 
```

# prolog - 原生 Prolog Shell

> ID：10756397
> 
> 赞同：1
> 
> 时间：2012-05-25T14:39:48.253
> 
> 标签：prolog, expert-system

最近我尝试了《在 Prolog 中构建专家系统》一书，该书可在[http://www.amzi.com/ExpertSystemsInProlog](http://www.amzi.com/ExpertSystemsInProlog)免费获得。

附录中有一个名为 native shell 的代码以及一个鸟类识别数据库。问题是在咨询了shell并运行之后：

主要的。

加载。

解决。

它询问“鼻孔：external_tubular？”

如果您回答否，则会发生堆栈溢出。问题可能出在以下部分：

```
prove(true,_) :- !.
prove((Goal,Rest),Hist) :-
    prov(Goal,[Goal|Hist]),
    prove(Rest,Hist).
prove(Goal,Hist) :-
    prov(Goal,[Goal|Hist]).

prov(true,_) :- !.
prov(menuask(X,Y,Z),Hist) :- menuask(X,Y,Z,Hist), !.
prov(ask(X,Y),Hist) :- ask(X,Y,Hist), !.
prov(Goal,Hist) :-
    clause(Goal,Body),
    prove(Body,Hist). 
```

有人可以请帮助我吗？非常感谢任何帮助。

shell的完整代码：http: [//www.amzi.com/ExpertSystemsInProlog/code/native/native.pro](http://www.amzi.com/ExpertSystemsInProlog/code/native/native.pro)

数据库的完整代码：http: [//www.amzi.com/ExpertSystemsInProlog/code/native/birds.nkb](http://www.amzi.com/ExpertSystemsInProlog/code/native/birds.nkb)

我正在使用 swi prolog。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:45:26.850

这个问题确实通过

```
prove(Goal,Hist) :-
    prov(Goal,[Goal|Hist]).

prov(Goal,Hist) :-
    clause(Goal,Body),
    prove(Body,Hist). 
```

`clause(:Head, ?Body)`如果`Head`可以与子句头部和`Body`相应的子句主体统一，则应该为真。不幸的是，*对于任何*SWI-Prolog 认为`clause(call(X), call(X))`是真实的程序。这意味着`clause(call(nostrils(external_tubular)), X)`成功`prove`并被调用，而后者又调用`prov`了不断增长的第二个参数。

由于`clause/2`是一个静态谓词，它的内容不能用`retractall`or修改`abolish`。可能的解决方案是：

1.  [向 SWI 开发人员报告错误](http://www.swi-prolog.org/bugzilla/)
2.  在 shell 的实现中用类似和引用`birds.nkb`的东西替换子句。`myclause``myclause`
3.  看看其他一些 Prolog 方言......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:49:14.667

我发现问题出在这里：

```
prove((Goal,Rest),Hist) :-
    prov(Goal,[Goal|Hist]),
    prove(Rest,Hist).
prove(Goal,Hist) :-
    prov(Goal,[Goal|Hist]). 
```

由于 swi-prolog 允许头部 ((x,y,z), [h]) 匹配第二个证明谓词，因此在推理过程中会以某种方式触发证明(Goal,Hist)，这将导致无限循环发生。我花了 8 个小时来分析痕迹。

因此，为了解决这个问题，我们需要在prove((Goal,Rest),Hist) 的开头放置一个cut。代码应如下所示：

```
prove((Goal,Rest),Hist) :-
    !,
    prov(Goal,[Goal|Hist]),
    prove(Rest,Hist).
prove(Goal,Hist) :-
    prov(Goal,[Goal|Hist]). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:45:19.520

您还可以通过在`prov((_,_),_) :- !, fail.`该部分正上方添加谓词来修复它：

```
prov(true,_) :- !.
prov(menuask(X,Y,Z),Hist) :- menuask(X,Y,Z,Hist), !.
prov(ask(X,Y),Hist) :- ask(X,Y,Hist), !.
prov(Goal,Hist) :-
    clause(Goal,Body),
    prove(Body,Hist). 
```

# jquery - jQuery / jCarousel：包装内容时最后一张幻灯片图像出现问题

> ID：10756399
> 
> 赞同：0
> 
> 时间：2012-05-25T14:39:49.017
> 
> 标签：jquery, slideshow, wrapper, jcarousel, word-wrap

我在我的博客上使用 jQuery jCarousel，遇到了一个与使用自动幻灯片功能和在最后包装内容有关的问题，所以它从第一张图片重新开始。

当滑块到达最后一个图像时，它会在我指示的秒数内停留在那里，然后将图像向左移动 20 像素，因为从图像一个重新开始。我已经尝试了几乎所有方法来找到错误，但似乎无法理解它。

我在这里预览了幻灯片和错误：http: [//dl.dropbox.com/u/70953/slideshow.htm](http://dl.dropbox.com/u/70953/slideshow.htm)

您将在第一张图片更改和第二张图片更改后（网站加载后大约 5 秒）看到错误。

我正在使用 jQuery 版本 1.7.2。

我的 jCarousel 选项看起来像这样

```
$(document).ready(function() {
    $("#slider-holder").jcarousel({
        scroll: 1,
        auto: 3,
        wrap: 'last',
        initCallback: _init_slider,
        itemFirstInCallback: _set_slide,
        buttonNextHTML: null,
        buttonPrevHTML: null
    });

    $('.field').each(function() {
        check_fields(this);
    });

    $('.field').focus(function() {
        if(this.title==this.value) {
            this.value = '';
            check_fields(this);
        }
    }).blur(function(){
        if(this.value=='') {
            this.value = this.title;
            check_fields(this);
        }
    });
}); 
```

希望您能够帮助我。

谢谢
- 梅斯蒂卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:07:31.520

我依稀记得这样一个问题。它与你的 CSS 的宽度有关。

在您的 slider.css 中将 940 更改为 920。

```
#slider-holder .jcarousel-clip {
    height: 420px;
    overflow: hidden;
    position: relative;
    width: 940px; 
```

}

# iphone - 添加手势识别器以平移 UIView

> ID：10756401
> 
> 赞同：4
> 
> 时间：2012-05-25T14:39:51.747
> 
> 标签：iphone, objective-c, uigesturerecognizer

在看到一些示例之后，我正在尝试创建一个可以使用 PanGestureRecognizer 移动图像视图的窗口。我不明白缺少什么。

*   我创建并初始化了一个 UIView 对象
*   我还为两个视图创建了一个用于平移的 UIGestureRecognizer。
*   我创建了识别手势时要选择的方法。

如果您对缺少的内容有所了解，我将不胜感激。

这是我的代码：

查看控制器.h

```
#import <UIKit/UIKit.h>
#import "bouton.h"

@interface ATSViewController : UIViewController {
    boutonHome *bouton; }

@property (retain, nonatomic) boutonHome *bouton;

-(IBAction)handlePanGesture:(UIPanGestureRecognizer*)sender;

@end 
```

查看控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIImage *image = [UIImage imageNamed:@"back.png"];
    CGRect frame = CGRectMake(0, 0, image.size.width, image.size.height);

    // Set self's frame to encompass the image
    bouton.frame = frame;
    bouton.boutonImage = image;

    [self.view addSubview:bouton];  

    UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];

    [bouton setUserInteractionEnabled:YES];
    [bouton addGestureRecognizer:panGesture];

    [self.view setUserInteractionEnabled:YES];
    [self.view addGestureRecognizer:panGesture];

    // Do any additional setup after loading the view, typically from a nib.
}

-(IBAction)handlePanGesture:(UIPanGestureRecognizer *)sender
{
    CGPoint translate = [sender translationInView:self.view]; 

    CGRect newFrame = bouton.frame;
    newFrame.origin.x += translate.x;
    newFrame.origin.y += translate.y;
    sender.view.frame = newFrame;

    if(sender.state == UIGestureRecognizerStateEnded)
    bouton.frame = newFrame;
} 
```

BoutonHome.h

```
#import <Foundation/Foundation.h>

@interface boutonHome : UIView
{
    UIImage *boutonImage;
}

@property (nonatomic, retain) UIImage *boutonImage;

// Initializer for this object

@end 
```

布顿家.m

```
#import "bouton.h"

@implementation boutonHome

@synthesize boutonImage;

@end 
```

# java - 一种计算二叉搜索树中具有 2 个子节点的节点数的方法

> ID：10756403
> 
> 赞同：0
> 
> 时间：2012-05-25T14:40:03.400
> 
> 标签：java, binary-search-tree, tree-traversal

这是我能想到的最好的方法，但它仍然不起作用，因为即使有多个节点有两个孩子，它也会返回 1。

```
int countTwoChildren(Node node)
{
    if(node==null) {
        return 0;
    }
    if(node.left!=null && node.right!=null) {
        return 1;
    }
    return countTwoChildren(node.left) + countTwoChildren(node.right);
} 
```

任何人都可以在上面的代码中找到任何错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:44:34.803

缺少一件小事：

```
int countTwoChildren(Node node)
{
    if(node==null) {
        return 0;
    }
    if(node.left!=null && node.right!=null) {
        return 1 + countTwoChildren(node.left) + countTwoChildren(node.right);
    }
    return countTwoChildren(node.left) + countTwoChildren(node.right);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:45:09.827

你的问题是，如果一个节点有两个孩子，你不会下降它自己的孩子。您应该更改检查的顺序：

```
int countTwoChildren(Node node)
{
    int nc;

    if(node==null) {
        return 0;
    }

    nc = countTwoChildren(node.left) + countTwoChildren(node.right);
    if(node.left!=null && node.right!=null) {
        return nc++;
    }

    return nc;
} 
```

当然，这整件事可以写成一行：

```
int countTwoChildren(Node node)
{
    return (node == null
            ? 0
            : countTwoChildren(node.left) + countTwoChildren(node.right) +
              (node.left!=null && node.right!=null ? 1 : 0));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T14:45:36.930

```
int countTwoChildren(Node node)
{
    if (node == null)
        return 0;
    int here  = node.left != null && node.right != null ? 1 : 0;
    int left  = countTwoChildren(node.left);
    int right = countTwoChildren(node.right);
    return here + left + right;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T06:03:28.010

好吧，您缺少的只是一个 else，就像您有一个 if 语句来检查节点是否同时具有左右链接不为空，但如果它为空怎么办，

您可以简单地添加其他：

```
if(node.left!=null && node.right!=null) {
    return 1 + countTwoChildren(node.left) + countTwoChildren(node.right);
}else{
   return countTwoChildren(node.left) + countTwoChildren(node.right);
  } 
```

当您说如果左右节点都不为空时，您也出错了，它只会返回 1，您应该继续遍历树以分别递归调用左节点和右节点的 countTwoChildren 来找到另一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-24T15:59:02.897

如果 root 同时具有左右节点，您的程序将在第一次终止，因此它将返回 1，并且不会进入递归调用。这是解决方案，希望对您有所帮助

```
public static int numberOfFullNode(TreeDemo root){
        if(root==null)
            return 0;
        else if(root.left!=null && root.right!=null)
            return 1+numberOfFullNode(root.left)+numberOfFullNode(root.right);
        else return 0;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-06T05:42:47.437

这个问题已经很好地回答了，只是分享相同问题的迭代解决方案：

```
public static int findTheNumberOfFullNodesIterative(BTNode root) {

    int noOfFullNodes = 0;
    if (root == null) {
        return 0;
    }
    Queue<BTNode> q = new LinkedList<>();
    q.offer(root);

    while (!q.isEmpty()) {
        BTNode temp = q.poll();
        if (temp.getLeft() != null && temp.getRight() != null) {
            noOfFullNodes++;

        }
        if (temp.getLeft() != null) {
            q.offer(temp.getLeft());
        }
        if (temp.getRight() != null) {
            q.offer(temp.getRight());
        }
    }
    return noOfFullNodes;
} 
```

# .net - T4 有条件地包括模板

> ID：10756412
> 
> 赞同：0
> 
> 时间：2012-05-25T14:40:19.670
> 
> 标签：.net, t4

我正在创建一个 T4 模板，我希望根据某些条件有条件地包含模板。例如，我尝试了以下...

```
<#switch(iocContainer) {#>
<#case "Autofac":#>
    <#@ include file="Autofac\EntityTemplate.ttinclude" #>
    <#@ include file="Autofac\ServiceTemplate.ttinclude" #>
    <#@ include file="Autofac\RepositoryTemplate.ttinclude" #>
    <#@ include file="Autofac\DbContextTemplate.ttinclude" #>
<#break;#>

<#case "Castle":#>
    <#@ include file="Castle\EntityTemplate.ttinclude" #>
    <#@ include file="Castle\ServiceTemplate.ttinclude" #>
    <#@ include file="Castle\RepositoryTemplate.ttinclude" #>
    <#@ include file="Castle\DbContextTemplate.ttinclude" #>
<#break;#>

<#case "nInject":#>
    <#@ include file="nInject\EntityTemplate.ttinclude" #>
    <#@ include file="nInject\ServiceTemplate.ttinclude" #>
    <#@ include file="nInject\RepositoryTemplate.ttinclude" #>
    <#@ include file="nInject\DbContextTemplate.ttinclude" #>
<#break;
}#> 
```

问题是当模板引擎运行时，它似乎在评估任何代码之前预处理了所有包含。所以上面的 switch 语句没有运行，T4 尝试包含所有文件。

有没有办法有条件地包含 T4 模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:57:57.010

不，T4 不包含设计的条件包含。这些指令都将被处理。

如果你颠倒你的逻辑，你可以解决这个问题。将 switch 语句上方和下方的 T4 内容拆分为两个单独的文件（我们称它们为`start.ttinclude`and `end.ttinclude`）。然后创建三个单独的 T4 模板，分别`autofac.tt`称为`castle.tt`和`ninject.tt`。这些看起来都像这样（这是`castle.tt`）：

```
<#@ include file="start.ttinclude" #>
<#@ include file="Castle\EntityTemplate.ttinclude" #>
<#@ include file="Castle\EntityTemplate.ttinclude" #>
<#@ include file="Castle\EntityTemplate.ttinclude" #>
<#@ include file="Castle\EntityTemplate.ttinclude" #>
<#@ include file="end.ttinclude" #> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T18:36:56.417

或者，将模板的内容放在#IF #ENDIF 块中，并使用#DEFINEs 使内容被跳过，即使包含文件本身也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T06:21:43.400

如果您不介意在 Visual Studio 容器中运行，那么 DTE 可以在这里为您提供帮助。

```
<#@ template hostspecific="true" language="C#" #>
<#@ output extension=".cs" #>
<#@ assembly name="EnvDTE" #>
<#@ Assembly Name="System.Core" #>
<#@ Assembly Name="System.Data" #>
<#@ Assembly Name="System.Xml" #>
<#@ Assembly Name="System.Xml.Linq" #>
<#@ import namespace="EnvDTE" #>
<#@ import namespace="System" #>
<#@ Import namespace="System.Linq"                    #>
<#@ Import namespace="System.Reflection"              #>
<#@ Import namespace="System.Linq.Expressions"        #>
<#@ Import namespace="System.Collections.Generic"     #>
<#@ Import namespace="System.Linq"                    #>
<#@ Import namespace="System.Text"                    #>
<# 
    if(isDefined("spike2" , "TTs")) {
        WriteLine("//the constant TTs is defined");
    }
    else
    {
        WriteLine("//the constant TTs is not defined");
    }
#>
<#+
        private bool isDefined(string projectName, string constantToCheck){
            IServiceProvider serviceProvider = (IServiceProvider)this.Host;
            DTE dte = serviceProvider.GetService(typeof(DTE)) as DTE;  

            try
            {   
                // find a project called "Spike2"
                Project prj = (from p in getProjects(dte) where p.Name.ToLower() == projectName.ToLower() select p).FirstOrDefault(); 

                // get its active configuration
                var config = prj.ConfigurationManager.ActiveConfiguration;

                var defineConstants = (from p in getConfigProperties(config) where p.Name == "DefineConstants" select p.Value).FirstOrDefault().ToString(); 
                var constants = defineConstants.Split(';');
                return Array.Exists(constants, define => define == constantToCheck);
            }
            catch(Exception ex)
            {
                Write(ex.Message);
            }
            return false;
        }

        static private IEnumerable<Property> getConfigProperties(Configuration config) {
            for(int i=1; i <=  config.Properties.Count; i++)
            {
                yield return  config.Properties.Item(i);
            }
        }

        static private IEnumerable<Project> getProjects(DTE dte) {
            for(int i=1; i <= dte.Solution.Projects.Count; i++)
            {
                yield return dte.Solution.Projects.Item(i);
            }
        }
#> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-08T20:33:31.510

我想在每台开发人员机器上包含一个不同的配置文件，并且还有一个默认的 app.config。这仅在您不想处理“包含”文件时才有效。

文件名 App.tt。

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ import namespace="System" #>
<#@ import namespace="System.IO" #>
<#@ output extension=".config" #>
<#
string pathToConfigurations = Host.ResolvePath("Configurations");
string pathToMachine = Path.Combine(pathToConfigurations, Environment.MachineName + ".config");
if (File.Exists(pathToMachine))
{
    Write(File.ReadAllText(pathToMachine)); 
}
else
{
    Write(File.ReadAllText(Path.Combine(pathToConfigurations, "App.config")));  
}
#> 
```

# facebook - iframe中的Facebook支付对话框？

> ID：10756413
> 
> 赞同：0
> 
> 时间：2012-05-25T14:40:20.577
> 
> 标签：facebook

在我的画布应用程序中，我执行重定向到 Facebook 支付对话框，它出现在带有 Facebook 页眉和页脚的应用 iframe 中（因此它们加倍）。这种类型的对话框不允许使用“display=iframe”选项，所以我看不到任何方法来避免双倍的页眉和页脚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:44:24.210

为什么不从 javascript SDK 触发对话框呢？

# java - 自动滚动 JScrollPane 令人不安

> ID：10756414
> 
> 赞同：1
> 
> 时间：2012-05-25T14:40:21.120
> 
> 标签：java, swing, jscrollpane

我正在开发一个文本编辑器，主面板由 3 个组成，`JTextPane`侧面 2 个显示行数和常见语法错误，主版中间 1 个。整个东西都装在一个`JScrollPane`.

当用户跳线（按 ENTER）时出现自动滚动问题，`KeyListener`附加的 s 在 2 侧`JTextPane`s 中添加一个新条目（该行的编号和语法错误），作为反应，`JScrollPane`文档底部的自动滚动，可能显示插入 2 个边`JTextPane`的新文本。

我`JScrollBar`通过在我`KeyListener`的 s. 例如，使用 scrollRectToVisible ，或者通过在两个边之一中选择适当的文本部分来更好`JTextPane`。

然而，最终的效果并没有那么好，对于每一个新行，垂直滚动条都会摆动，我们可以通过按 ENTER 几秒钟来轻松地使应用程序崩溃。我一直在寻找具有 JScrollPane 类的许多方法的解决方案，并尝试`AdjustmentListener`但没有成功。你能帮我吗？

PS：对不起我的英语。我是法国人，我们的论坛很烂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T00:40:36.967

SSCCE 伟大的灵感来源，因为这个运行良好（运行时看不到我的问题），我的方法似乎确实有效，但在我的真实代码中没有在正确的侦听器中运行。

不管怎么说，还是要谢谢你！有 SSCCE，它是一个简单的 JScrollPane，由一个用于编辑的中央 JTextPane 和一个用于行号的横向 JTextPane 组成。placeScroll() 方法放置滚动条，因此当 paneLigne 尝试将其向下推时，主 JTextPane 中的插入符号位于中间（垂直）。

再见

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import java.awt.event.KeyListener;
import java.awt.event.KeyEvent;
import java.awt.BorderLayout;
import javax.swing.JScrollPane;

public class SSCCE extends JFrame {

    private JTextPane paneLigne, main;
    private String tempchain;

    public SSCCE() {

        this.setSize(500,500);
        this.setTitle("S");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setLocationRelativeTo(null);

        paneLigne = new JTextPane();
        paneLigne.setEditable(false);

        tempchain = "";
        for(int j=1; j<40; j++)
            tempchain+="  " + j + "  \n";
        paneLigne.setText(tempchain);

        main = new JTextPane();
        main.addKeyListener(new KeyListener() {

            private int lastnline=0;
            public void keyPressed(KeyEvent arg0) {

                if(arg0.getKeyCode()==10) {

                    String tecste=main.getText();
                    int n=nbLignes(tecste);

                    if(n>38) {
                        if(lastnline<n) {
                            paneLigne.setText(paneLigne.getText()+"  " + (n+1) + "  \n");
                        } else {
                            this.retablirLignes(tecste);
                        }
                    } else {
                        paneLigne.setText(tempchain);
                    }

                    lastnline=n;
                    this.placeScroll();
                }

            }

            @Override
            public void keyReleased(KeyEvent arg0) {    }

            @Override
            public void keyTyped(KeyEvent arg0) {   }

            private int nbLignes(String str) {
                int ret=1;
                for(int n=0, cpt=0; (n=str.indexOf('\n', cpt))!=-1; cpt=n+1)
                    ret++;
                return ret;
            }

            public void retablirLignes(String stret) {

                int n=this.nbLignes(stret);
                String retoure="";

                if(n>=40) {

                    for(int j=1; j<n+2; j++)
                        retoure+="  " + j + "  \n";
                    paneLigne.setText(retoure);

                }
                lastnline=n;
            }

            public void placeScroll() { 
            // TODO Auto-generated method stub

                if(paneLigne!=null) {

                    int n=this.nbLignesBuen(main.getText().substring(0, main.getCaretPosition()));
                    if(n!=-1) {
                        paneLigne.select(paneLigne.getText().indexOf(""+n), n+1);
                    } else {
                        paneLigne.select(0,1);
                    }

                }

            }

            private int nbLignesBuen(String str) { //return the index of the last 20th line
                int ret=0;
                for(int n, cpt=0; (n=str.indexOf('\n', cpt))!=-1; cpt=n+1)
                    ret++;
                if(ret>20)
                    ret-=20;
                else
                    ret=-1;
                return ret;
            }

        });

        JPanel contentpane=new JPanel(new BorderLayout());
        contentpane.add(paneLigne, BorderLayout.WEST);
        contentpane.add(main, BorderLayout.CENTER);     

        this.setContentPane(new JScrollPane(contentpane));
        this.setVisible(true);

    }

    public static void main(String[] args) {

        SSCCE fen = new SSCCE();

    }

} 
```

# javascript - SVG 缩放 onmouseover - 元素消失

> ID：10756423
> 
> 赞同：2
> 
> 时间：2012-05-25T14:41:01.557
> 
> 标签：javascript, xml, svg

我有一个我制作的 SVG 地图，我希望它在鼠标悬停时改变颜色并增加大小。我设法让颜色变化毫无问题地工作，但是当我尝试缩放元素时，当我将鼠标悬停在它上面时它完全消失了！

```
<g
   style="fill:#999999"
   id="newzealand"
   onmouseover="this.setAttribute('transform', 'scale(2)');this.style.fill='#83b901';document.getElementById('countryText').textContent='New Zealand';"
   onmouseout="this.style.fill='#999';document.getElementById('countryText').textContent='';"
   >
  <path
     inkscape:connector-curvature="0"
     id="path3034"
     d="m 645,409.28571 -5,7.85715 -3.57143,2.85714 -2.5,5.71429 5.71429,1.42857 3.21428,-6.42857 0,-1.78572 2.14286,-0.71428 3.57143,-7.85715 z"
     style="stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
  <path
     inkscape:connector-curvature="0"
     id="path3036"
     d="M 650.35714,411.07143 650,407.85714 l -1.78571,-2.14285 0.71428,-4.28572 -2.5,-6.78571 0,-1.42857 2.14286,2.85714 2.14286,2.5 2.85714,3.92857 2.14286,-1.78571 0,3.21428 -1.78572,2.14286 z"
     style="stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
</g> 
```

我也尝试使用动画元素，但得到了相同的结果。翻译和旋转似乎可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:00:15.020

您的绘图不在原点，因此当您缩放它时，它会从页面边缘消失。m 645,409 实际上变成了 m 1290,818。如果我们删除坐标的加倍，绘图将保持在同一点。

```
<g
   style="fill:#999999"
   id="newzealand"
   onmouseover="this.setAttribute('transform', 'translate(-645, -409) scale(2)');this.style.fill='#83b901';document.getElementById('countryText').textContent='New Zealand';"
   onmouseout="this.style.fill='#999';document.getElementById('countryText').textContent='';"
   >
  <path
     id="path3034"
     d="m 645,409.28571 -5,7.85715 -3.57143,2.85714 -2.5,5.71429 5.71429,1.42857 3.21428,-6.42857 0,-1.78572 2.14286,-0.71428 3.57143,-7.85715 z"
     style="stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
  <path
     id="path3036"
     d="M 650.35714,411.07143 650,407.85714 l -1.78571,-2.14285 0.71428,-4.28572 -2.5,-6.78571 0,-1.42857 2.14286,2.85714 2.14286,2.5 2.85714,3.92857 2.14286,-1.78571 0,3.21428 -1.78572,2.14286 z"
     style="stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" />
</g> 
```

# c# - 带有客户端证书的 WCF REST 服务的 WCF 客户端 - 我缺少什么？

> ID：10756425
> 
> 赞同：1
> 
> 时间：2012-05-25T14:41:16.907
> 
> 标签：c#, wcf, rest, client-certificates

好的。我的 WCF REST 服务通过 HttpWebRequest 调用与客户端证书一起运行得很好。但是，如果我使用此代码，它将不起作用：

```
ServicePointManager.ServerCertificateValidationCallback += (sender, certificate, chain, errors) => true;  
var factory = new WebChannelFactory<IMyContract>(new Uri(MyUrl));
var cc = factory.Endpoint.Behaviors.Find<ClientCredentials>();
cc.ClientCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindBySubjectName,MySubjectName);
cc.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;
cc.ServiceCertificate.Authentication.RevocationMode = X509RevocationMode.NoCheck;
cc.ServiceCertificate.Authentication.TrustedStoreLocation = StoreLocation.LocalMachine;
cc.ServiceCertificate.SetDefaultCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindBySubjectName, MyOtherSubjectName);
_svc = factory.CreateChannel();
var result1 = _svc.Post(GetMyPostObject()); 
```

我收到错误消息： 但是使用完全相同的*客户端证书在**完全相同的 url*上`The HTTP request was forbidden with client authentication scheme 'Anonymous'.` 调用*完全相同的服务*就可以了。**`HttpWebRequest`**

 **我也尝试过不使用所有 ServiceCertificate 的东西，但没有任何区别
有人可以告诉我我的 WCF 代码中遗漏了什么吗？**

# jsf - JSF中如何防止双击

> ID：10756426
> 
> 赞同：32
> 
> 时间：2012-05-25T14:41:21.230
> 
> 标签：jsf, primefaces, double-submit-prevention

我们有一些针对大量数据运行的搜索页面，需要一段时间才能完成。当用户点击搜索按钮时，我们不希望他们再次提交搜索结果。

是否有在 JSF 中进行“双击”检测/预防的最佳实践？

PrimeFaces 组件似乎可以做我们想做的事，因为它会在单击搜索按钮和搜索完成之间的一段时间内禁用 UI，但是我们可以使用更通用的策略（也许不是依赖于 PrimeFaces）？理想情况下，在搜索完成之前，对该按钮的任何点击都将被禁用或忽略。我们不一定需要禁用整个 UI（因为 blockUI 允许您这样做）。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-25T14:56:18.760

如果您仅使用 ajax 请求，则可以`jsf.ajax.addOnEvent`为此使用 JSF JavaScript API 的处理程序。下面的示例将适用于 的所有按钮`type="submit"`。

```
function handleDisableButton(data) {
    if (data.source.type != "submit") {
        return;
    }

    switch (data.status) {
        case "begin":
            data.source.disabled = true;
            break;
        case "complete":
            data.source.disabled = false;
            break;
    }    
}

jsf.ajax.addOnEvent(handleDisableButton); 
```

或者，如果您仅在特定按钮上需要此功能，请`onevent`使用`<f:ajax>`.

```
<h:commandButton ...>
    <f:ajax ... onevent="handleDisableButton" />
</h:commandButton> 
```

如果您还需要将此应用于同步请求，那么您需要考虑到，当您在 期间禁用按钮时`onclick`，按钮`name=value`对将不会作为请求参数发送，因此 JSF 将无法识别该操作并调用它。因此，您应该仅在浏览器发送 POST 请求*后*禁用它。没有 DOM 事件处理程序，您需要使用`setTimeout()`在单击后禁用按钮约 50 毫秒的 hack。

```
<h:commandButton ... onclick="setTimeout('document.getElementById(\'' + this.id + '\').disabled=true;', 50);" /> 
```

这只是相当脆弱。对于慢速客户端，它可能太短了。您需要增加超时时间或转向其他解决方案。

也就是说，请记住，这只会在通过网页提交时防止重复提交。这不会阻止编程 HTTP 客户端（如`URLConnection`Apache HttpClient、Jsoup 等）的双重提交。如果您想在数据模型中强制执行唯一性，那么您不应该阻止双重提交，而是防止双重插入。`UNIQUE`这可以通过对感兴趣的列施加约束在 SQL 中轻松实现。

### 也可以看看：

*   [用于防止双重提交的纯 Java/JSF 实现](https://stackoverflow.com/questions/23285530/pure-java-jsf-implementation-for-double-submit-prevention)
*   [如何在响应呈现之前处理多个提交？](https://stackoverflow.com/questions/10087692/how-to-handle-multiple-submits-before-response-is-rendered)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-09T12:17:03.940

我遇到了这个问题，遇到了同样的问题。该解决方案对我不起作用 - 在简要查看[primefaces.js](http://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/core/core.js?r=7652)之后，我猜他们不再使用 jsf.ajax 了。

所以我必须自己解决一些问题，这是我的解决方案，对于那些也不能使用[BalusC 答案](https://stackoverflow.com/a/10756689/880619)中的人：

```
// we override the default send function of
// primeFaces here, so we can disable a button after a click
// and enable it again after     
var primeFacesOriginalSendFunction = PrimeFaces.ajax.AjaxUtils.send;

PrimeFaces.ajax.AjaxUtils.send = function(cfg){    
  var callSource = '';

  // if not string, the caller is a process - in this case we do not interfere
  if(typeof(cfg.source) == 'string') {
    callSource = jQuery('#' + cfg.source);
    callSource.attr('disabled', 'disabled');
  }

  // in each case call original send
  primeFacesOriginalSendFunction(cfg);

  // if we disabled the button - enable it again
  if(callSource != '') {
    callSource.attr('disabled', 'enabled');
  }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-30T17:29:54.830

您可以使用“onclick”和“oncomplete”侦听器。当用户单击按钮时 - 禁用它。操作完成时 - 启用。

```
<p:commandButton id="saveBtn"
                 onclick="$('#saveBtn').attr('disabled',true);"
                 oncomplete="$('#saveBtn').attr('disabled',false);"
                 actionListener="#{myBean.save}" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-21T15:18:52.617

对我来说是这样工作的：

```
<h:commandLink ... onclick="jQuery(this).addClass('ui-state-disabled')"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-13T23:36:43.277

上述替代方案都没有为我工作（我真的尝试过每一个）。当用户双击登录按钮时，我的表单总是发送两次。我在 Glassfish 3.1.2 上使用 JSF (Mojarra 2.1.6)。

考虑它是一个非 AJAX 登录页面。

所以这是我解决它的方法：

1.  定义一个全局 JavaScript 变量来控制页眉或表单外任何地方的提交：

```
var submitting = false; 
```

2.  将其设置为触发`true`提交`h:form`onsubmit 事件时：

```
<h:form onsubmit="submitting = true"> 
```

3.  在 h:commandLink 的点击事件中检查 var 的值：

```
<h:commandLink ... onclick="if(submitting){return false}"> 
```

这只是另一个简单的替代方案，它已在 Chrome [版本 47.0.2526.106（64 位）]、Mozilla Firefox (37.0.2) 和 Internet Explorer 11 中进行了测试。我希望它对某人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T00:25:56.397

非常有用的解决方案 jsf-primefaces，与 facelets 模板一起使用传播到其他页面消费者

```
<f:view>
    <Script language="javascript">
        function checkKeyCode(evt)
        {
            var evt = (evt) ? evt : ((event) ? event : null);
            var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
            if(event.keyCode==116)
            {
                evt.keyCode=0;
                return false
            }
        }
        document.onkeydown=checkKeyCode;

        function handleDisableButton(data) {
            if (data.source.type != "submit") {
                return;
            }

            switch (data.status) {
                case "begin":
                    data.source.disabled = true;
                    break;
                case "complete":
                    data.source.disabled = false;
                    break;
            }    
        }
        jsf.ajax.addOnEvent(handleDisableButton);
    </Script>

</f:view>

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="./resources/css/default.css" rel="stylesheet" type="text/css" />
    <link href="./resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
    <title>infoColegios - Bienvenido al Sistema de Administracion</title>
</h:head>

<h:body onload="#{login.validaDatos(e)}">
    <p:layout fullPage="true">

        <p:layoutUnit position="north" size="120" resizable="false" closable="false" collapsible="false">                   
            <p:graphicImage value="./resources/images/descarga.jpg" title="imagen"/> 
            <h:outputText value="InfoColegios - Bienvenido al Sistema de Administracion" style="font-size: large; color: #045491; font-weight: bold"></h:outputText>                    
        </p:layoutUnit>

        <p:layoutUnit position="west" size="175" header="Nuestra Institución" collapsible="true" effect="drop" effectSpeed="">
            <p:menu> 
                <p:submenu>
                    <p:menuitem value="Quienes Somos" url="http://www.primefaces.org/showcase-labs/ui/home.jsf" />

                </p:submenu>
            </p:menu>
        </p:layoutUnit>

        <p:layoutUnit position="center">
            <ui:insert name="content">Content</ui:insert>
        </p:layoutUnit>

    </p:layout>
</h:body> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-21T05:39:20.660

做了一个简单的隐藏和显示工作，适用于输入类型提交 Jquery 的元素

```
$(":submit").click(function (event) {
    // add exception to class skipDisable 
    if (!$(this).hasClass("skipDisable")) {
        $(this).hide();
        $(this).after("<input type='submit' value='"+$(this).val()+"' disabled='disabled'/>");
    }
}); 
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<form>
    <input type="submit" value="hello">
</form> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-24T08:44:26.883

[BalusC](https://stackoverflow.com/a/10756689/880619)的方法很棒，但是如果您使用 PrimeFaces，您会遇到**样式问题**。因为有些类没有被切换，所以按钮看起来不会被禁用。

如果您正在寻找一种同时处理样式的解决方案，您可以`CommandButtonRenderer`使用按钮的小部件将其替换为禁用单击按钮的解决方案以禁用和启用它。

PrimeFaces Extensions 8 或更高版本包含这样的渲染器。您可以将其添加到您的 faces-config.xml 中，例如：

```
<render-kit>
  <renderer>
    <component-family>org.primefaces.component</component-family>
    <renderer-type>org.primefaces.component.CommandButtonRenderer</renderer-type>
    <renderer-class>org.primefaces.extensions.renderer.CommandButtonSingleClickRenderer</renderer-class>
  </renderer>
</render-kit> 
```

您可以[在展示中看到它的实际效果](https://www.primefaces.org/showcase-ext/sections/renderers/commandButtonSingleClick.jsf)。

如果您不能或不想使用 PFE，您可以通过以下方式将渲染类添加到您的项目中：

[https://github.com/primefaces-extensions/primefaces-extensions/blob/master/core/src/main/java/org/primefaces/extensions/renderer/CommandButtonSingleClickRenderer.java](https://github.com/primefaces-extensions/primefaces-extensions/blob/master/core/src/main/java/org/primefaces/extensions/renderer/CommandButtonSingleClickRenderer.java)

注意：这仍然需要您将渲染器添加到 faces-config.xml。

也可以看看

*   [如何在 PrimeFaces 8 之前使用 resolveWidgetVar？](https://stackoverflow.com/questions/69547408/how-to-use-resolvewidgetvar-before-primefaces-8)

# python - 循环遍历所有嵌套的字典值？

> ID：10756427
> 
> 赞同：152
> 
> 时间：2012-05-25T14:41:23.307
> 
> 标签：python, dictionary, recursion

```
for k, v in d.iteritems():
    if type(v) is dict:
        for t, c in v.iteritems():
            print "{0} : {1}".format(t, c) 
```

我正在尝试遍历字典并打印出值不是嵌套字典的所有键值对。如果该值是一个字典，我想进入它并打印出它的键值对......等等。有什么帮助吗？

编辑

这个怎么样？它仍然只打印一件事。

```
def printDict(d):
    for k, v in d.iteritems():
        if type(v) is dict:
            printDict(v)
        else:
            print "{0} : {1}".format(k, v) 
```

完整的测试用例

字典：

```
{u'xml': {u'config': {u'portstatus': {u'status': u'good'}, u'target': u'1'},
      u'port': u'11'}} 
```

结果：

```
xml : {u'config': {u'portstatus': {u'status': u'good'}, u'target': u'1'}, u'port': u'11'} 
```

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2012-05-25T14:47:57.220

正如 Niklas 所说，你需要递归，即你想定义一个函数来打印你的 dict，如果值是一个 dict，你想使用这个新的 dict 调用你的打印函数。

就像是 ：

```
def myprint(d):
    for k, v in d.items():
        if isinstance(v, dict):
            myprint(v)
        else:
            print("{0} : {1}".format(k, v)) 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2016-05-04T11:45:26.127

There are **potential problems** if you write your own recursive implementation or the iterative equivalent with stack. See this example:

```
 dic = {}
    dic["key1"] = {}
    dic["key1"]["key1.1"] = "value1"
    dic["key2"]  = {}
    dic["key2"]["key2.1"] = "value2"
    dic["key2"]["key2.2"] = dic["key1"]
    dic["key2"]["key2.3"] = dic 
```

In the normal sense, nested dictionary will be a n-nary tree like data structure. But the definition **doesn't exclude** the possibility of a cross edge or even a back edge (thus no longer a tree). For instance, here *key2.2* holds to the dictionary from *key1*, *key2.3* points to the entire dictionary(back edge/cycle). When there is a back edge(cycle), the stack/recursion will run infinitely.

```
 root<-------back edge
                        /      \           |
                     _key1   __key2__      |
                    /       /   \    \     |
               |->key1.1 key2.1 key2.2 key2.3
               |   /       |      |
               | value1  value2   |
               |                  | 
              cross edge----------| 
```

If you print this dictionary with this implementation from **Scharron**

```
 def myprint(d):
      for k, v in d.items():
        if isinstance(v, dict):
          myprint(v)
        else:
          print "{0} : {1}".format(k, v) 
```

You would see this error:

```
 RuntimeError: maximum recursion depth exceeded while calling a Python object 
```

The same goes with the implementation from **senderle**.

Similarly, you get an infinite loop with this implementation from **Fred Foo**:

```
 def myprint(d):
        stack = list(d.items())
        while stack:
            k, v = stack.pop()
            if isinstance(v, dict):
                stack.extend(v.items())
            else:
                print("%s: %s" % (k, v)) 
```

However, Python actually detects cycles in nested dictionary:

```
 print dic
    {'key2': {'key2.1': 'value2', 'key2.3': {...}, 
       'key2.2': {'key1.1': 'value1'}}, 'key1': {'key1.1': 'value1'}} 
```

*"{...}"* is where a cycle is detected.

As requested by **Moondra** this is a way to avoid cycles (DFS):

```
def myprint(d): 
    stack = list(d.items()) 
    visited = set() 
    while stack: 
        k, v = stack.pop() 
        if isinstance(v, dict): 
            if k not in visited: 
                stack.extend(v.items()) 
        else: 
            print("%s: %s" % (k, v)) 
        visited.add(k) 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2012-05-25T14:52:40.330

由于 a`dict`是可迭代的，因此您可以将经典的[嵌套容器可迭代公式](https://stackoverflow.com/a/2158532/577088)应用于此问题，只需进行一些小的更改。这是一个 Python 2 版本（见下文 3）：

```
import collections
def nested_dict_iter(nested):
    for key, value in nested.iteritems():
        if isinstance(value, collections.Mapping):
            for inner_key, inner_value in nested_dict_iter(value):
                yield inner_key, inner_value
        else:
            yield key, value 
```

测试：

```
list(nested_dict_iter({'a':{'b':{'c':1, 'd':2}, 
                            'e':{'f':3, 'g':4}}, 
                       'h':{'i':5, 'j':6}}))
# output: [('g', 4), ('f', 3), ('c', 1), ('d', 2), ('i', 5), ('j', 6)] 
```

In Python 2, It *might* be possible to create a custom `Mapping` that qualifies as a `Mapping` but doesn't contain `iteritems`, in which case this will fail. The docs don't indicate that `iteritems` is required for a `Mapping`; on the other hand, the [source](http://hg.python.org/cpython/file/2.7/Lib/_abcoll.py#l334) gives `Mapping` types an `iteritems` method. So for custom `Mappings`, inherit from `collections.Mapping` explicitly just in case.

In Python 3, there are a number of improvements to be made. As of Python 3.3, abstract base classes live in `collections.abc`. They remain in `collections` too for backwards compatibility, but it's nicer having our abstract base classes together in one namespace. So this imports `abc` from `collections`. Python 3.3 also adds `yield from`, which is designed for just these sorts of situations. This is not empty syntactic sugar; it may lead to [faster code](https://www.python.org/dev/peps/pep-0380/#optimisations) and more sensible interactions with [coroutines](https://www.python.org/dev/peps/pep-0380/#the-refactoring-principle).

```
from collections import abc
def nested_dict_iter(nested):
    for key, value in nested.items():
        if isinstance(value, abc.Mapping):
            yield from nested_dict_iter(value)
        else:
            yield key, value 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-05-25T15:22:21.180

Alternative iterative solution:

```
def myprint(d):
    stack = d.items()
    while stack:
        k, v = stack.pop()
        if isinstance(v, dict):
            stack.extend(v.iteritems())
        else:
            print("%s: %s" % (k, v)) 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-02-13T12:55:58.920

Slightly different version I wrote that keeps track of the keys along the way to get there

```
def print_dict(v, prefix=''):
    if isinstance(v, dict):
        for k, v2 in v.items():
            p2 = "{}['{}']".format(prefix, k)
            print_dict(v2, p2)
    elif isinstance(v, list):
        for i, v2 in enumerate(v):
            p2 = "{}[{}]".format(prefix, i)
            print_dict(v2, p2)
    else:
        print('{} = {}'.format(prefix, repr(v))) 
```

On your data, it'll print

```
data['xml']['config']['portstatus']['status'] = u'good'
data['xml']['config']['target'] = u'1'
data['xml']['port'] = u'11' 
```

It's also easy to modify it to track the prefix as a tuple of keys rather than a string if you need it that way.

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-08-30T18:03:14.227

Here is pythonic way to do it. This function will allow you to loop through key-value pair in all the levels. It does not save the whole thing to the memory but rather walks through the dict as you loop through it

```
def recursive_items(dictionary):
    for key, value in dictionary.items():
        if type(value) is dict:
            yield (key, value)
            yield from recursive_items(value)
        else:
            yield (key, value)

a = {'a': {1: {1: 2, 3: 4}, 2: {5: 6}}}

for key, value in recursive_items(a):
    print(key, value) 
```

Prints

```
a {1: {1: 2, 3: 4}, 2: {5: 6}}
1 {1: 2, 3: 4}
1 2
3 4
2 {5: 6}
5 6 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-09-30T21:37:11.953

A alternative solution to work with lists based on Scharron's solution

```
def myprint(d):
    my_list = d.iteritems() if isinstance(d, dict) else enumerate(d)

    for k, v in my_list:
        if isinstance(v, dict) or isinstance(v, list):
            myprint(v)
        else:
            print u"{0} : {1}".format(k, v) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-04-19T13:28:18.187

I am using the following code to print all the values of a nested dictionary, taking into account where the value could be a list containing dictionaries. This was useful to me when parsing a JSON file into a dictionary and needing to quickly check whether any of its values are `None`.

```
 d = {
            "user": 10,
            "time": "2017-03-15T14:02:49.301000",
            "metadata": [
                {"foo": "bar"},
                "some_string"
            ]
        }

    def print_nested(d):
        if isinstance(d, dict):
            for k, v in d.items():
                print_nested(v)
        elif hasattr(d, '__iter__') and not isinstance(d, str):
            for item in d:
                print_nested(item)
        elif isinstance(d, str):
            print(d)

        else:
            print(d)

    print_nested(d) 
```

Output:

```
 10
    2017-03-15T14:02:49.301000
    bar
    some_string 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-12-21T14:23:47.817

Your question already has been answered well, but I recommend using `isinstance(d, collections.Mapping)` instead of `isinstance(d, dict)`. It works for `dict()`, `collections.OrderedDict()`, and `collections.UserDict()`.

The generally correct version is:

```
def myprint(d):
    for k, v in d.items():
        if isinstance(v, collections.Mapping):
            myprint(v)
        else:
            print("{0} : {1}".format(k, v)) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-05-25T15:17:11.400

Iterative solution as an alternative:

```
def traverse_nested_dict(d):
    iters = [d.iteritems()]

    while iters:
        it = iters.pop()
        try:
            k, v = it.next()
        except StopIteration:
            continue

        iters.append(it)

        if isinstance(v, dict):
            iters.append(v.iteritems())
        else:
            yield k, v

d = {"a": 1, "b": 2, "c": {"d": 3, "e": {"f": 4}}}
for k, v in traverse_nested_dict(d):
    print k, v 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-26T14:19:53.027

Here's a modified version of Fred Foo's answer for Python 2\. In the original response, only the deepest level of nesting is output. If you output the keys as lists, you can keep the keys for all levels, although to reference them you need to reference a list of lists.

Here's the function:

```
def NestIter(nested):
    for key, value in nested.iteritems():
        if isinstance(value, collections.Mapping):
            for inner_key, inner_value in NestIter(value):
                yield [key, inner_key], inner_value
        else:
            yield [key],value 
```

To reference the keys:

```
for keys, vals in mynested: 
    print(mynested[keys[0]][keys[1][0]][keys[1][1][0]]) 
```

for a three-level dictionary.

You need to know the number of levels before to access multiple keys and the number of levels should be constant (it may be possible to add a small bit of script to check the number of nesting levels when iterating through values, but I haven't yet looked at this).

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-04-04T07:16:01.753

I find this approach a bit more flexible, here you just providing generator function that emits key, value pairs and can be easily extended to also iterate over lists.

```
def traverse(value, key=None):
    if isinstance(value, dict):
        for k, v in value.items():
            yield from traverse(v, k)
    else:
        yield key, value 
```

Then you can write your own `myprint` function, then would print those key value pairs.

```
def myprint(d):
    for k, v in traverse(d):
        print(f"{k} : {v}") 
```

A test:

```
myprint({
    'xml': {
        'config': {
            'portstatus': {
                'status': 'good',
            },
            'target': '1',
        },
        'port': '11',
    },
}) 
```

Output:

```
status : good
target : 1
port : 11 
```

I tested this on Python 3.6.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-01-16T20:51:18.590

These answers work for only 2 levels of sub-dictionaries. For more try this:

```
nested_dict = {'dictA': {'key_1': 'value_1', 'key_1A': 'value_1A','key_1Asub1': {'Asub1': 'Asub1_val', 'sub_subA1': {'sub_subA1_key':'sub_subA1_val'}}},
                'dictB': {'key_2': 'value_2'},
                1: {'key_3': 'value_3', 'key_3A': 'value_3A'}}

def print_dict(dictionary):
    dictionary_array = [dictionary]
    for sub_dictionary in dictionary_array:
        if type(sub_dictionary) is dict:
            for key, value in sub_dictionary.items():
                print("key=", key)
                print("value", value)
                if type(value) is dict:
                    dictionary_array.append(value)

print_dict(nested_dict) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-09T02:31:22.380

Nested dictionaries looping using isinstance() and yield function. **isinstance is afunction that returns the given input and reference is true or false as in below case dict is true so it go for iteration. **Yield is used to return from a function without destroying the states of its local variable and when the function is called, the execution starts from the last yield statement. Any function that contains a yield keyword is termed a generator.

```
students= {'emp1': {'name': 'Bob', 'job': 'Mgr'},
     'emp2': {'name': 'Kim', 'job': 'Dev','emp3': {'namee': 'Saam', 'j0ob': 'Deev'}},
     'emp4': {'name': 'Sam', 'job': 'Dev'}}
def nested_dict_pairs_iterator(dict_obj):
     for key, value in dict_obj.items():
        # Check if value is of dict type
        if isinstance(value, dict):
            # If value is dict then iterate over all its values
            for pair in  nested_dict_pairs_iterator(value):
                yield (key, *pair)
        else:
            # If value is not dict type then yield the value
            yield (key, value)
for pair in nested_dict_pairs_iterator(students):
    print(pair) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-14T09:20:56.277

You can print recursively with a dictionary comprehension:

```
def print_key_pairs(d):
    {k: print_key_pairs(v) if isinstance(v, dict) else print(f'{k}: {v}') for k, v in d.items()} 
```

For your test case this is the output:

```
>>> print_key_pairs({u'xml': {u'config': {u'portstatus': {u'status': u'good'}, u'target': u'1'}, u'port': u'11'}})
status: good
target: 1
port: 11 
```

# java - Spring 配置的正确继承

> ID：10756428
> 
> 赞同：2
> 
> 时间：2012-05-25T14:41:32.367
> 
> 标签：java, spring, configuration

我正在使用新的 Spring 配置创建一个项目。我有一个包含一些属性的基类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = {Basic.class, Protected.class})
public class BaseTest {
  @Autowired(required = false) protected String userName;
  @Autowired(required = false) protected String password;
  @Autowired protected String baseURL;

  @Test
  public void outputData() {
    System.out.println("UserName: " + userName + " Password: " 
                        + password + "Base URL: " + baseURL);
  }
}

@ActiveProfiles("default,protected")
public abstract class ProtectedTest extends BaseTest
{
  @Autowired protected String userName;
  @Autowired protected String password;
}

@Configuration @Profile("default")
public class Basic {
   @Bean public String baseURL() { return "http://www.baseURL.com"; }
}

@Configuration @Profile("protected")
public class Protected {
   @Bean public String userName() { return "userName"; }
   @Bean public String password() { return "password"; }
} 
```

但是，当我运行受保护的测试时，我会收到一条通知，指出基本 URL 未正确连接。由于它扩展了 BaseTest，并且两个配置文件都处于活动状态，为什么我没有收到 baseURL bean？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:25:24.853

它必须是`@ActiveProfiles({"default","protected"})`，在您的情况下，它会假定名称的配置文件`default, protected`是活动的，而`default`不是`protected`

另一件事是基类中的注释`BaseTest`不是由 派生的`ProtectedTest`，因此您将再次需要放置`@RunWith`并`@ContextConfiguration`让您的测试运行

# php - JavaScript 和 php，数组图像出现故障

> ID：10756429
> 
> 赞同：0
> 
> 时间：2012-05-25T14:41:33.730
> 
> 标签：php, javascript, html, css

我在php中创建了一个棋盘，并根据它们的顺序放置棋子。一切正常，但是当我将鼠标指向国王棋子时，我无法更改王棋子的颜色，当用户单击任何棋子时，我必须使用 javascript 向用户提示有关棋子详细信息的消息，这里我得用javaScript来做。有什么建议，我应该如何处理。请参阅下面的代码，我应该更改或添加什么以使其正常工作。

```
<html> 
<head> 
<style> 
            th{ 
                width:80px; 
                height:80px; 
            } 
            table{ 
                border: 5px solid #FFBB78; 
                border-collapse:collapse; 
            } 
            td{ 
                width:80px; 
                height:80px; 
            } 
            tr{ 
                width:80px; 
                height:80px;  
            } 
            h1{ 
                color:#6633FF; 
            } 
</style> 

<script type="text/javascript"> 
function changeColor(){
    document.getElementById("king").style.backgroundColor="yellow";//this image has to change color.
 }
</script> 
</head> 
<body> 
<?php 

    $pictures = array( 
        //row 1
        "1,1" => '<img src="chess/br.gif" />',  
        "1,3" => '<img src="chess/bb.gif"/>', 
        "1,4" => '<img src="chess/bq.gif"/>',
        "1,5" => '<img src="chess/bk.gif"/>',
        "1,8" => '<img src="chess/br.gif"/>',
        //row 2
        "2,1" => '<img src="chess/bp.gif"/>', 
        "2,2" => '<img src="chess/bp.gif"/>', 
        "2,3" => '<img src="chess/bp.gif"/>', 
        "2,4" => '<img src="chess/bp.gif"/>', 
        "2,5" => '<img src="chess/bb.gif"/>', 
        "2,6" => '<img src="chess/bp.gif"/>', 
        "2,7" => '<img src="chess/bp.gif"/>', 
        "2,8" => '<img src="chess/bp.gif"/>',

        //row 3
        "3,3" => '<img src="chess/bn.gif"/>',
        "3,6" => '<img src="chess/bn.gif"/>',

        //row 4
        "4,5" => '<img src="chess/bp.gif"/>',

        //row 5
        "5,3" => '<img src="chess/wb.gif"/>',
        "5,5" => '<img src="chess/wp.gif"/>',

        //row 6 
        "6,4" => '<img src="chess/wp.gif"/>',
        "6,6" => '<img src="chess/wn.gif"/>',

        //row 7
        "7,1" => '<img src="chess/wp.gif"/>',
        "7,2" => '<img src="chess/wp.gif"/>',
        "7,3" => '<img src="chess/wp.gif"/>',
        "7,6" => '<img src="chess/wp.gif"/>',
        "7,7" => '<img src="chess/wp.gif"/>',
        "7,8" => '<img src="chess/wp.gif"/>',

        //row 8
        "8,1" => '<img src="chess/wr.gif"/>',//this are the chess piece that has to prompt out chess piece details
        "8,2" => '<img src="chess/wn.gif"/>',
        "8,3" => '<img src="chess/wb.gif"/>',
        "8,4" => '<img src="chess/wq.gif"/>',
        "8,6" => '<img src="chess/wr.gif"/>',
        "8,7" => '<img src="chess/wk.gif"/";);//this image has to change color.//array ends here

    echo"<h1 align='center'>SAJID Chess Board</h1>"; 
    echo"<table border='1' align='center'>"; 

     for($i = 1; $i <= 8; $i++){      
          echo "<tr>"; 
          for($j = 1; $j <=8; $j++){ 
              if( ($i+$j)%2==0 ) { 
                echo"<td bgcolor='#99FF99'>"; 
              } 
              else { 
                echo"<td bgcolor='#9999CC'>"; 
                   } 

                if(isset($pictures["{$i},{$j}"]))//compares the pictures i and p 
                    echo $pictures["{$i},{$j}"]; 

                echo "</td>"; 
                } 
                echo "</tr>"; 
            } 

            echo "</table>"; 

        ?> 
    </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:45:01.937

`onmouseover`不是标签，它是标签的属性。 `onmouseover`必须是 img 标签的一部分。更改这一行将使您步入正轨，如下所示：

```
"8,7" => '<img src="chess/wk.gif" onmouseover="changeColor()" id="king" />',);//array ends here 
```

# visual-studio-2010 - Visual Studio 2010：调试时，如何从变量中复制包含回车符的字符串值？

> ID：10756434
> 
> 赞同：20
> 
> 时间：2012-05-25T14:41:56.393
> 
> 标签：visual-studio-2010, debugging, copy-paste, carriage-return, watch

当我单步执行 c# 中的代码（不确定这是否是 VB.NET 中的问题）并查看存储在字符串变量中的 SQL 时，有时我喜欢将其复制并粘贴到记事本或我的 SQL 程序中。但是，如果它包含回车符，它实际上会以`line1\r\nline2`. 是否有一种用实际回车而不是回车转义码来复制它的本机方法？

**编辑：**这也适用于显示为`\t`. 发生这种情况是因为我的代码正在从文本文件中读取 SQL，并且该文本文件包含回车符和制表符。另一种方法是 1）在 SQL 中没有任何回车或制表符（这会导致丑陋的 SQL）或 2）在将 SQL 读入我的字符串变量时将它们去掉。不过，为了简化调试过程，我并不真正热衷于这些选项。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-25T15:01:33.547

这取决于您从哪里复制值。

如果在调试时将鼠标悬停在变量上，或者查看**Locals**窗口，您应该会在工具提示中看到一个小的放大镜符号。
单击此按钮将打开文本可视化器，该可视化器应考虑任何换行符。

例如，如果我的代码是：

```
string test = "hello" + Environment.NewLine + "world"; 
```

然后我可以在 Locals 中查看（注意它仍然显示`\r\n`在那里）或将鼠标悬停在上面`test`查看：

![放大镜](../Images/1da13ed75d3918c9c000b551746c3c01.png)

这将打开文本可视化器，您可以从中复制/粘贴：

![在此处输入图像描述](../Images/5799bf127833f5aff824d822f6d2bc80.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:57:02.983

在具有变量（要复制的整个值）的语句上放置一个断点。当控件出现在语句上时，将鼠标指针移到变量名上。您将看到一个显示变量名称、双目图标和变量值的气球框。单击双目图标或双目图标旁边的小向下箭头图标以在文本可视化器中查看。希望这就是你所看到的。这是在 C# 的上下文中，希望在 VB.NET 中也是如此（但不确定）。

# elasticsearch - 限制 Elastic Search 中 should 子句的结果数量

> ID：10756435
> 
> 赞同：8
> 
> 时间：2012-05-25T14:41:58.830
> 
> 标签：elasticsearch

我正在编写查询以获取匹配多个短语之一的结果，例如

```
{
  'size': 10,
  'from': 0,

  'query': {
    'bool': {
      'should': [
        {'text': {'title': { 'query': 'some words' }}},
        {'text': {'title': { 'query': 'other words' }}},
        {'text': {'title': { 'query': 'some other words' }}},
      ]
    }
  }
} 
```

它按预期工作，但我有一个问题：10 个得分结果都匹配同一个短语。

例如，我想到的解决方案是将每个`should`子句的结果数量限制为 5 个元素。

问题是我不知道如何使用弹性搜索查询来实现这一点，我不知道它是否可能，或者它是否存在另一种方式来做我想做的事。

有任何想法吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T08:52:15.537

ElasticSearch 正在寻找与您的查询匹配的“最相关”文档，而您正在尝试实现 3 个查询的联合。

最简单（也是最快）的方法是使用[multi search](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-multi-search.html)运行三个查询：

```
curl -XGET 'http://127.0.0.1:9200/my_index/_msearch?pretty=1'  -d '
{}
{"query" : {"text" : {"title" : "some words"}}, "size" : 5}
{}
{"query" : {"text" : {"title" : "some other words"}}, "size" : 5}
{}
{"query" : {"text" : {"title" : "other words"}}, "size" : 5}
' 
```

根据您的要求，另一种选择可能是使用[限制过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/limit-filter.html)，但请注意，它限制每个 SHARD 的结果数量，而不是每个索引。默认情况下，一个索引有 5 个主分片，因此如果您指定限制为 5，您很可能会返回 25 个结果。

所以也许是这样的：

```
curl -XGET 'http://127.0.0.1:9200/_all/_search?pretty=1'  -d '
{
   "query" : {
      "bool" : {
         "should" : [
            {
               "filtered" : {
                  "filter" : {
                     "limit" : {
                        "value" : 1
                     }
                  },
                  "query" : {
                     "text" : {
                        "title" : "some words"
                     }
                  }
               }
            },
            {
               "filtered" : {
                  "filter" : {
                     "limit" : {
                        "value" : 1
                     }
                  },
                  "query" : {
                     "text" : {
                        "title" : "other words"
                     }
                  }
               }
            },
            {
               "filtered" : {
                  "filter" : {
                     "limit" : {
                        "value" : 1
                     }
                  },
                  "query" : {
                     "text" : {
                        "title" : "some other words"
                     }
                  }
               }
            }
         ]
      }
   }
}
' 
```

这将为您提供每个分片上每个短语的得分最高的文档（有 5 个分片，最多 15 个文档，其中（因为您没有指定`size=15`）将减少到前 10 个文档）。

您的里程可能会有所不同，具体取决于您的文档在分片中的分布方式。

# sql - 使用 toad 从一个数据库到另一个数据库的 oracle 数据

> ID：10756436
> 
> 赞同：0
> 
> 时间：2012-05-25T14:42:07.173
> 
> 标签：sql, oracle

我需要从一个数据库中获取数据，并且需要在其他数据库中插入相同的数据。
截至目前我正在使用蟾蜍

请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:05:53.937

创建一个 DB LINK.. 这将允许您跨数据库传输数据。

创建数据库链接：[http ://docs.oracle.com/cd/B12037_01/server.101/b10759/statements_5005.htm](http://docs.oracle.com/cd/B12037_01/server.101/b10759/statements_5005.htm)

# java - Ftp 文件从 java 代码下载

> ID：10756438
> 
> 赞同：1
> 
> 时间：2012-05-25T14:42:16.923
> 
> 标签：java, ftp-client, apache-commons-net

我有这个代码来下载一个文件。

```
 import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import org.apache.commons.net.ftp.FTPClient;
public class NetTest {
public static void main(String[] args){
FTPClient client = new FTPClient( );
OutputStream outStream;
    try { 
```

这是服务器和密码的一部分。

```
 client.connect( "servername" );
    client.login("noman123", "pass");
    String remoteFile = "/a.txt";
    outStream = new FileOutputStream( "a.txt" ); 
```

简单的填充下载但此行出错

```
 client.retrieveFile( remoteFile, outStream );
} catch(IOException ioe) {
    System.out.println( "Error communicating with FTP server." );
} finally {
    try {
        client.disconnect( );
    } catch (IOException e) {
        System.out.println( "Problem disconnecting from FTP server" );
    }
}

}
} 
```

它给了我错误，我希望你能理解我现在面临的问题

> java.net.SocketException：软件导致连接中止：在 java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109) 在 java.net.SocketOutputStream.write( SocketOutputStream.java:153) 在 sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221) 在 sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291) 在 sun.nio.cs.StreamEncoder.implFlush (StreamEncoder.java:295) 在 sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141) 在 java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229) 在 java.io.BufferedWriter.flush(BufferedWriter. java:254) 在 org.apache.commons.net.ftp.FTP.__send(FTP.java:496) 在 org.apache.commons.net.ftp.FTP。sendCommand(FTP.java:470) 在 org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:547) 在 org.apache.commons.net.ftp.FTP.port(FTP.java:872)在 org.apache.commons.net.ftp.FTPClient。*openDataConnection* (FTPClient.java:667) 在 org.apache.commons.net.ftp.FTPClient.retrieveFile(FTPClient.java:1595) 在 FtpDownloadDemo.main(FtpDownloadDemo.java:25)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T16:14:23.950

关闭防火墙。在这个问题中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:56:24.983

确保您可以 ping 服务器并手动登录，但假设您在那里没问题，我还会做两件事。

1) 根据 FTP 客户端文档，检查您是否真正连接

```
// After connection attempt, you should check the reply code to verify success.
reply = client.getReplyCode();
if (!FTPReply.isPositiveCompletion(reply))
        { // print more complete error } 
```

[这里](http://www.java2s.com/Code/Java/Network-Protocol/UsetheFTPClient.htm)有一个完整的例子。

2) 可能是因为您尝试获取远程文件“/a.txt”，您尝试访问根目录，而您的 ftp 服务器未设置为允许您访问。在您的 ftp 客户端设置为将用户转储到的任何目录中尝试“a.txt”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:12:46.943

如果您在防火墙后面，您应该调用 FTPClient 的**enterLocalPassiveMode方法的给定示例代码的文档。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T16:34:23.770

阅读这篇文章[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7077696](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7077696)

解决此问题的解决方法启动程序

> -Djava.net.preferIPv4Stack=true

# sql-server - 使用 RDP 上的实例连接到 SQL Server

> ID：10756442
> 
> 赞同：1
> 
> 时间：2012-05-25T14:42:34.213
> 
> 标签：sql-server, remote-desktop

您好，有谁知道我需要设置为 ON 才能连接到删除 PC 上的 SQL Server 实例。我有一台装有 Windows Datacenter Edition 的 PC 我可以在这台机器上通过 RPD（我知道 IP）连接到这台 PC 我有 SQL SERVER 2008，我想从 MY Management Studio 的服务器连接到这个 SQL。我需要打开删除数据库的什么设置？谢谢。

ps 防火墙已关闭，SQL 实例上的允许远程连接已打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:50:24.277

1、SQL server 必须已启用远程连接。

2、你的PC和服务器之间不能有限制性防火墙。

3，您还需要知道**实例名称**

4、您需要有效的证件

看看这里：

[https://serverfault.com/questions/128934/cant-remotely-connect-through-sql-server-management-studio](https://serverfault.com/questions/128934/cant-remotely-connect-through-sql-server-management-studio)

和这里：

[http://blogs.msdn.com/b/sqlexpress/archive/2005/05/05/415084.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2005/05/05/415084.aspx)

# javascript - 用文本填充 div

> ID：10756448
> 
> 赞同：12
> 
> 时间：2012-05-25T14:43:02.260
> 
> 标签：javascript, jquery, html

我有一个`div`：

```
<div id="shoppingBasket">
</div> 
```

使用 Javascript 或 Jquery 我将如何用默认文本填充它：

`you have no products in your shopping basket.`

我的意思是默认文本是我想在他们点击产品后更改文本。所以可能是变量中的默认文本，然后通过 JavaScript 或 Jquery 包含在 div 中，这将允许对变量进行操作。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-25T14:44:36.780

您可以使用 jQuery [text()](http://api.jquery.com/text/)或 javascript [innerText](http://msdn.microsoft.com/en-us/library/ie/ms533899%28v=vs.85%29.aspx)

使用 jquery，使用 jQuery [text()](http://api.jquery.com/text/)

```
$('#shoppingBasket').text("you have no products in your shopping basket."); 
```

使用 Javascript，使用[innerText](http://msdn.microsoft.com/en-us/library/ie/ms533899%28v=vs.85%29.aspx)

```
document.getElementById("shoppingBasket").innerText = "you have no products in your shopping basket."; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T14:44:36.550

使用 jQuery，这将是：

```
$('#shoppingBasket').text("you have no products in your shopping basket."); 
```

使用常规 javascript：

```
document.getElementById("shoppingBasket").innerHTML = "you have no products in your shopping basket."; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T14:48:11.460

```
function fillwithtext(text, elementID) {
    document.getElementById(elementID).innerHTML = text;
} 
```

怎么样？

# c# - 调试模式下显示消息框。为什么在本地主机中不显示？

> ID：10756449
> 
> 赞同：0
> 
> 时间：2012-05-25T14:43:04.080
> 
> 标签：c#, asp.net, web-services, componentone

我在 Visual Studio 2010 中使用消息框。它在调试模式下工作，但在服务器上不起作用。为什么它不起作用？

```
if (MessageBox.Show("Invoice sample already exists. Do you want to overwrite it?.", "Overwrite", MessageBoxButtons.OKCancel, MessageBoxIcon.Asterisk, MessageBoxDefaultButton.Button1, MessageBoxOptions.ServiceNotification) == DialogResult.OK)
{

    dr.Close();
    con.Close();
    con.Open();
    cmd = new SqlCommand("sp_pdm_shopping_upload_update", con);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@sample", SqlDbType.Char, 10));
    cmd.Parameters.Add(new SqlParameter("@image", SqlDbType.Image));
    cmd.Parameters.Add(new SqlParameter("@type", SqlDbType.Char, 10));
    cmd.Parameters["@sample"].Value = txt_code.Text;
    cmd.Parameters["@image"].Value = imgbyte;
    cmd.Parameters["@type"].Value = "INV";
    cmd.ExecuteNonQuery();
    con.Close();
    //getuploadinvoice();
    //getuploadimage();
    ErrorMsg.Visible = true;
    ErrorMsg.Text = "The image has been successfully updated.";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:02:23.640

在您的 HTML 按钮上，您应该放置一个 javascript 代码。例如：

```
<input type="button" value="Save" onclick="return confirm('Invoice sample already exists. Do you want to overwrite it?.')" /> 
```

然后在您的服务器端正常运行。只有接受对话框的用户才能访问您的服务器端功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:50:42.723

当然不会出现。您甚至不能保证有一个终端来显示来自 ASP.NET 应用程序的消息框。它们仅适用于 Windows 客户端应用程序，而不是 Web 应用程序。

不要使用消息框，而是将调试信息写入日志文件。如果你用谷歌搜索它，你会发现很多如何做到这一点的例子。

如果您需要用户确认，就像评论中显示的那样，请使用@AdrianSalazar 在他的回答中建议的 javascript 确认对话框。

# xml - Scala 在大 (30MB) xml 文件中查找元素

> ID：10756451
> 
> 赞同：2
> 
> 时间：2012-05-25T14:43:14.740
> 
> 标签：xml, scala, maven

我有一个 30MB 的大 XML 文件，想在其中找到几个元素。

该文件是一个有效的 pom.xml，我想从中获取所有依赖项（名称、组、版本）、子模块和父模块。您可以使用查看这样的文件

```
mvn help:effective-pom -Doutput=test.xml 
```

对于我的 26MB 文件，scala 的 XML.load* 导致 java.lang.OutOfMemoryError: Java heap space

除了增加堆空间我还能做什么？

TIA，混蛋。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T15:25:40.663

您可以使用[拉式解析](http://www.scala-lang.org/api/current/scala/xml/pull/package.html)，其中 XML 元素被视为一系列事件（打开标签`a`、打开标签`i`、文本、关闭标签`i`，...）。

这避免了将整个文件存储在内存中。

我已经在数百 MB 的 XML 文件上使用了它，没有任何重大问题。（当然，正如 Rex 在评论中指出的那样，如果您要恢复的元素本身很大，则没有明显的解决方法。）

拉解析器不如“常规”解析器（或[Anti-XML](http://anti-xml.org/)）方便，因为它没有给您一棵树。相反，您必须管理状态以跟踪您在文档中的位置。

这是一个自包含的示例，展示了如何在 Scala 的 Wikipedia 页面上提取所有内部链接：

```
import scala.xml.Text
import scala.xml.pull._
import scala.io.Source

val src = Source.fromURL("http://en.wikipedia.org/wiki/Scala_(programming_language)")

val reader = new XMLEventReader(src)

val Internal = """/wiki/([\w_]*)""".r

var inLink = false
var linksTo = ""

for(event <- reader) { 
  event match { 
    case EvElemStart(_, "a", meta, _) => meta("href") match { 
      case Text(Internal(href)) =>
        linksTo = href
        inLink = true
      case _ => 
    } 
    case EvText(txt) if inLink => println(txt + " --> " + linksTo)
    case EvElemEnd(_, "a") => inLink = false
    case _ => ; 
  } 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T18:07:33.770

简单地说，Scala 的标准库的 xml 并没有削减它。您可以使用拉解析器，但它几乎不实用。相反，我会使用[Scales](http://code.google.com/p/scala-scales/)（认为 Anti-XML 也不是一种改进——我认为它们具有基于迭代的选择器，但我找不到它们）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T10:38:03.890

为了补充丹尼尔斯的观点，我当然有偏见，Scales Xml 提供了更高级别的拉解析所需的东西。有时，完整的树解析根本不是一个很好的匹配，并且传统上拉解析会迫使开发人员进行过多的管理。Scales 旨在通过迭代和路径的概念使这更简单。

如果您可以确定所需的路径，那么 Scales 将为每个项目拉出迷你树。这通过组合 iteratee 的结果（每个路径一个 iteratee）并允许用户折叠每次出现的结果来工作。

这在恒定空间中运行，仅受您在解析期间保留的对象的限制，但比基于树的解析要慢。（Scales 需要大约 200-220MB 的堆来处理 30MB 的树 - 但如果文档易于优化，可以减少到 170-180 - 请参阅[内存优化](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.2/0.3-RC7/MemoryOptimisation.html#Memory_Consumption_During_Parsing "解析期间的内存使用 - Scales Documentation") 了解更多详细信息）

有关示例，请参阅[Pull Parsing 文档](http://scala-scales.googlecode.com/svn/sites/scales/scales-xml_2.9.2/0.3-RC7/RepeatedSections.html "重复部分 - Scales 文档")

# javascript - 如何使用 JavaScript 捕获注释的 HTML？

> ID：10756453
> 
> 赞同：3
> 
> 时间：2012-05-25T14:43:17.250
> 
> 标签：javascript, jquery, html

我想知道是否可以使用 JavaScript 捕获评论的评论。

源代码上的注释将如下所示：

```
<div id='ContainerId'>
<!-- NON IDEAL REASON: 90 min time window depart arrive -->
<b>1,107.45 GBP</b><br />
<!--LLF: 1107.45 -->
</div> 
```

我需要将该值（在本例中为 1107.45）保存在变量中。

这似乎不起作用：

```
var LLF = jQuery("contains('LLF')"); 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T14:46:42.867

```
$('#ContainerId').contents().filter(function(){
    return this.nodeType === 8 // Comment node
}); 
```

[**现场演示**](http://jsfiddle.net/kUd4y/)

**以及完整的代码：**

```
var comment = $('#ContainerId').contents().filter(function() {
    return this.nodeType === 8 // Comment node
})[0].nodeValue;

console.log(comment.match(/\d+\.\d+/g));​​​​​ 
```

[**现场演示**](http://jsfiddle.net/kUd4y/)

# c++ - c++ bmp 位运算符

> ID：10756454
> 
> 赞同：0
> 
> 时间：2012-05-25T14:43:20.853
> 
> 标签：c++, bitwise-operators, bmp

```
 for(unsigned int  h=0; h<ImageBits.iHeight; h++)
  {
        for(unsigned int  w=0; w<ImageBits.iWidth; w++)
        {
              // So in this loop - if our data isn't aligned to 4 bytes, then its been padded
              // in the file so it aligns...so we check for this and skip over the padded 0's
              // Note here, that the data is read in as b,g,r and not rgb as you'd think!
              unsigned char r,g,b;
              fread(&b, 1, 1, fp);
              fread(&g, 1, 1, fp);
              fread(&r, 1, 1, fp);

              ImageBits.pARGB[ w + h*ImageBits.iWidth ] = (r<<16 | g<<8 | b);

        }// End of for loop w

        //If there are any padded bytes - we skip over them here
        if( iNumPaddedBytes != 0 )
        {
              unsigned char skip[4];
              fread(skip, 1, 4 - iNumPaddedBytes, fp);
        }// End of if reading padded bytes

  }// End of for loop h 
```

我不明白这个说法，它是如何存储像素的 rgb 值的

```
ImageBits.pARGB[ w + h*ImageBits.iWidth ] = (r<<16 | g<<8 | b); 
```

我阅读了 << 位移位运算符，但我仍然不明白它是如何工作的。有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:46:54.287

您需要将 Red、Green 和 Blue 的单独值转换为单个变量，因此您将它们分别推向“左”16 位和 8 位，因此它们将 8 位对齐红色（开始 - 16），然后您得到 8 位为绿色（开始 - 8）和剩余的颜色。

考虑以下：

```
 Red   -> 00001111
 Green -> 11110000
 Blue  -> 10101010

Then RGB -> that has 24 bits capacity would look like this initially ->
-> 00000000 00000000 00000000
(there would actually be some random rubbish but it's easier to
demonstrate like this)

Shift the Red byte 16 places to the left, so we get 00001111 00000000 00000000.
Shift the Green byte 8 places to the left, so we have 00001111 11110000 00000000.
Don't shift the Blue byte, so we have 00001111 11110000 10101010. 
```

**您可以使用unions**获得类似的结果。以下是我们为什么这样做的详细说明。访问变量的唯一方法是获取**它的地址**（通常绑定到变量名或别名）。

这意味着我们**只有第一个字节的地址，**并且还保证如果它是一个 3 字节宽的变量，则紧邻我们寻址字节的以下两个字节属于我们。所以我们可以从字面上将位“推”到左边（**移动它们**），这样它们就“流入”到变量的剩余字节中。我们也可以在那里对指针进行指针算术运算，或者正如我已经提到的，使用联合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:51:07.773

位移位按您指定的数字移动构成该值的位。

在这种情况下，它使用颜色值完成，以便您可以在单个 4 字节结构（例如 int）中存储多个 1 字节组件（例如 0-255 范围内的 RGBA）

取这个字节：

00000011

等于十进制的 3。如果我们想为 RGB 和 A 通道存储值 3，我们需要将该值存储在 int 中（int 为 32 位）

```
R        G        B        A
00000011 00000011 00000011 00000011 
```

正如您所看到的，这些位设置为 4 组，每组 8 个，并且都等于值 3，但是当它以这种方式存储时，您如何判断 R 值是多少？

如果您摆脱了 G/B/A 值，您将剩下

00000011 00000000 00000000 00000000

仍然不等于 3 - （实际上这是一个很大的数字 - 我认为是 12884901888）

为了将此值放入 int 的最后一个字节，您需要将位向右移动 24 位。例如

12884901888 >> 24

然后这些位看起来像这样：

00000000 00000000 00000000 00000011

你会有你的价值'3'

基本上，它只是一种在存储结构中移动位的方式，以便您可以更好地操作值。将 RGBA 值放入单个值通常称为填充位

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T14:55:36.060

让我们将其可视化并将其分解为几个步骤，您将看到它是多么简单。

假设我们有 ARGB 32 位变量，可以看作

`int rgb = {a: 00, r: 00, g: 00, b: 00}` （当然，这不是有效的代码，让我们暂时不考虑 A）。

当然，每种颜色的值都是 8 位。

现在我们要放置一个新值，每种颜色都有三个 8 位变量：

`unsigned char r = 0xff, g=0xff, b=0xff`.

我们实际上在做的是取一个 32 位变量，然后这样做：

`rgb |= r << 16`（将红色的 16 位向左移动。它右侧的所有内容都将保持为 0）

所以现在我们有了

`rgb = [a: 00, r: ff, g: 00, b: 00]`

现在我们这样做：

`rgb = rgb | (g << 8)`（意味着取现有值并将其与绿色相或移到它的位置）

所以我们有 `[a: 00, r: ff, g: ff, b: 00]`

最后...

`rgb = rgb | b`（意思是取值并将其与蓝色 8 位进行或运算。其余部分保持不变）

留给我们`[a: 00, r: ff, g: f, b: ff]`

它代表 32 位（实际上是 24，因为 Alpha 与此示例无关）颜色。

# iphone - iPhone应用内存相关查询

> ID：10756456
> 
> 赞同：0
> 
> 时间：2012-05-25T14:43:39.840
> 
> 标签：iphone, uitableview

我正在构建一个 iPhone 应用程序。在数据库中我有 5000 条记录。其中我在应用程序中仅显示 50 个。但是我想问一下，如果我最初在 iPhone 视图中创建 5000 个空单元格，即使我正在显示 50 行数据，也会有内存问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:49:01.603

iPhone 的内存量有限，因此您应始终小心仅显示该视图所需的数据。您可以实现无限滚动，当您通过滚动到达屏幕底部时，您会触发一个事件并加载接下来的 25-50 条记录。

[http://nsscreencast.com/episodes/8-automatic-uitableview-paging](http://nsscreencast.com/episodes/8-automatic-uitableview-paging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:16:03.993

[使用处理表的规范方法](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html#//apple_ref/doc/uid/TP40007451-CH6-SW5)您将快速学习的一件事是，无论模型的大小（即您打算创建的行数）如何，实际上只创建了少数行，因此内存占用仍然存在低的。

本质上，UITableView 最初会创建并呈现一屏行（加上更多的行）。当您开始向下滚动时，控制器会识别出它需要绘制一个新行。但是，它也意识到表格顶部的行已经从视图中消失了。因此，与其创建一个全新的单元格，它只需将其中一个单元格不再在视图中并使用新信息重新配置它。无论您的表格有多少行，只有那几个单元格存在于内存中。

因此，在您的情况下，内存瓶颈可能是提供单元配置的模型。如果您一次将所有 5000 行加载到内存中，那么这可能会很慢并且会消耗内存。但是手头有帮助：您从表控制器那里得到一个提示，它基本上告诉您它想要设置第 *n* 行。因此，您的模型实际上可以更有针对性，并且只加载您需要的数据。例如，既然你知道第 15 行正在被渲染，那么就去从你的数据库中获取第 15 行，而不是预先加载整个模型。

这是我用来创建具有超过 5000 行的应用程序而无需分页的方法。当然，这取决于您的用户如何导航的数据集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T15:35:31.893

如果你适当地构建你的表格，你将只使用少数到十几个实际的 UITableViewCell 对象，这些对象在屏幕上显示时会不断回收。

即使是 50 也是安全的。

在内存中有 5000 个数据对象和 50 个 UITableViewCell 应该是可以接受的。

特别是如果这些数据对象很小，或者您允许 CoreData 为您管理数据集做一些工作。

重要的是不要制作 5000 个表格单元视图。这是非常糟糕的做法。

# java - java Telnet Applet with jsch1.4.8 无法输入

> ID：10756457
> 
> 赞同：1
> 
> 时间：2012-05-25T14:43:44.477
> 
> 标签：java, ssh, telnet, jsch, terminal-emulator

我的应用程序以前使用的是 jsch 1.28 版本，并且我还在 Telnet/SSH 终端上使用了 JTA 2.0 一切正常，直到我移到最新版本的 jsch 1.48，我面临的问题是我能够打开 SSH终端和连接也是如此，但是当我尝试从连接终端上的键盘执行某些命令时，它并没有全部响应击键。

我搬到了 jsch 1.48，因为在尝试通过 ssh 连接后使用 jsch 1.28 时出现错误：“算法协商错误”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:35:54.680

有用

我不得不补充：out_.flush(); 在 out_ = channel_.getOutputStream() 之后；在 JTAJSch.java 插件文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:59:00.020

[我已经尝试了链接http://www.jcraft.com/jsch/examples/Shell.java.html](http://www.jcraft.com/jsch/examples/Shell.java.html)中给出的 Shell.java 示例 。它适用于 jsch 1.48。您能否从您的项目中单独尝试以找出路线原因。

# performance - HTML5 微数据：如何防止通过微数据增加文件大小

> ID：10756458
> 
> 赞同：2
> 
> 时间：2012-05-25T14:43:49.670
> 
> 标签：performance, html, compression, metadata, microdata

目前，我将 schema.org 微数据添加到我的页面。我没有使用添加隐藏内容`<meta>`，我只是在可以找到合适 schema.org 词汇的页面内容上使用它。但是现在我的文件gzip压缩版本的大小增加了11%，普通版本的大小增加了24%。

对于目前仅由某些搜索机器人使用的标记而言，这显然太多了。这就是我想到c14n的原因。我知道这可能不是最好的方法，但我想创建一个带有微数据的版本和一个没有微数据的版本，然后我使用 HTTP 将它们链接在一起`Link: <http://www.example.com/>; rel="canonical"`。

**我的问题：**

1.  你对使用 c14n 解决问题有什么看法。
2.  有没有更好的方法来添加高级元数据而不增加太多的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T10:16:22.213

1.  我不认为规范化会起作用。使用`<link rel="canonical href="microdatversion">`基本上会告诉机器人索引微数据版本及其所有微数据（好）。但它也会对这个版本的查询结果进行排名，这会将用户带到微数据版本（坏）。

2.  我会写一个脚本来添加所有的微数据。显然推迟脚本加载。您可以像这样将属性添加为类名。

    `<div class="it-p is ip-d"></div>`

    `<script defer>`

```
功能简写（类型，cName）
{
    如果（类型 ==='itemprop'）
    {
        开关（cName）
        {
         案例“n”：返回“名称”；
         休息;
         案例“d”：返回“描述”
         休息;
         默认值：返回 cName；
         }
    }
    如果（类型==='项目类型'）
    {
        开关（cName）
        {
        案例“p”：返回“产品”；
        休息;
        默认值：返回 cName；
        }
    }

}
函数 addItemprop(el,cName)
{
    cName = shortHand('itemprop', cName);
    el.setAttribute('itemprop',cName)
}
函数 addItemtype(el,cName)
{
    cName = shortHand('itemtype', cName);
    el.setAttribute('itemtype','http://scheme.org/'+cName)
}

$('[class]').filter(function()
{
    var removeclass=[];

    for(var i=0; i < this.classList.length; i++)
    {
        var cName =this.classList[i];
        if (/^ip-/.test(cName))addItemprop(this,cName.replace('ip-',''));removeclass.push(cName);
        if (cName =='is')removeclass.push(cName);this.setAttribute('itemscope','');
        if (/^it-/.test(cName))addItemtype(this,cName.replace('it-',''));removeclass.push(cName);

    }
    for(var i=0; i < removeclass.length; i++)
    {
        this.classList.remove(removeclass[i]);
    }
});

```

# javascript - bx滑块垂直滚动跳跃等问题

> ID：10756459
> 
> 赞同：0
> 
> 时间：2012-05-25T14:43:51.403
> 
> 标签：javascript, jquery

我正在使用 bx 滑块来创建自动垂直滚动幻灯片。我目前有两个问题：

1.  当它回到第一张幻灯片时，它跳了很多。
2.  经过三到四个循环后，最后一张幻灯片从 div 中滚出，然后屏幕在三四秒钟内保持白色，然后再次从底部开始滚动。所以大约三四遍之后，卷轴上基本上就出现了一个巨大的空白。

我需要在这里寻找什么样的东西来诊断和解决这个问题？我正在使用的伪代码：

```
$('#example_container').bxSlider({
      mode: 'vertical',
      ticker: true,
      tickerHover: true,
      tickerSpeed: 1500,
      displaySlideQty: 3
    });

<div id ="example_container">
   <div class ="example_slide">
     //contents
   </div>
   <div class ="example_slide">
     //contents
   </div>
   <div class ="example_slide">
     //contents
   </div>
   <div class ="example_slide">
     //contents
   </div>
   <div class ="example_slide">
     //contents
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:11:48.613

我不确定那是不是你想要的，但这是一个无穷无尽的垂直滑块：

[http://jsfiddle.net/SK4dq/](http://jsfiddle.net/SK4dq/)

您只需设置您的 html/css 代码。

# plone - 扩展导航portlet的产品？（又名覆盖 plone_control_panel 导航设置）

> ID：10756460
> 
> 赞同：0
> 
> 时间：2012-05-25T14:43:51.500
> 
> 标签：plone

我需要有两个导航 portlet（在 plone4 中）：

*   一个“经典”（具有在 plone_control_panel / 导航中定义的设置）

*   另一个在 navtree portlet 实例中定义的类型

建议？

维托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:28:12.250

一些技巧和想法。

将现有的导航 portlet 代码复制粘贴到新的 portlet。

然后你需要调整它的“导航树策略”，让它只收集你定义的内容类型

[http://collective-docs.readthedocs.org/en/latest/misc/navigationtree.html#creating-a-custom-navigation-tree](http://collective-docs.readthedocs.org/en/latest/misc/navigationtree.html#creating-a-custom-navigation-tree)

如何创建 z3c.form 词汇表来挑选内容类型：

[http://collective-docs.readthedocs.org/en/latest/functionality/controlpanel.html#content-type-choice-setting](http://collective-docs.readthedocs.org/en/latest/functionality/controlpanel.html#content-type-choice-setting)

# ios - 在 cocos2d 中改变精灵的大小

> ID：10756465
> 
> 赞同：0
> 
> 时间：2012-05-25T14:44:02.443
> 
> 标签：ios, cocos2d-iphone, size, sprite

我刚开始使用 cocos2d 并不能自己解决这个问题。

我想创建一个精灵，添加另一个精灵作为它的孩子，然后全部显示。我也不想改变它们的大小，因为我的图像对于我的屏幕来说太大了，所以我正在缩放我的精灵。问题是，当我缩放我的父精灵时，它的比例会应用于子精灵，所以简单的缩放不是解决方案，我需要改变实际的纹理。我现在有点堆栈。有谁能够帮我？

```
 CCSprite* parent = [CCSprite spriteWithFile: @"some_picture.png"];
    parent.position = ccp(300, 300);
    [parent setSizeX:400 andY:400]; //currently this function added in category just scales sprite

    CCSprite* child = [CCSprite spriteWithFile: @"some_other_picture.png"];
    child.position = ccp(200, 200);
    [child setSizeX:200 andY:200]; //currently this function added in category just scales sprite

    [parent addChild:child];
    [someCCLayer addChild:parent]; 
```

所以我需要这个 set size 函数的解决方案。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:23:16.110

任何 CCNode 子类的所有变换都应用于它的子类。你不应该改变这一点。所以你可以将你的精灵添加到一个父级。

如果您想同时转换两个精灵（移动、旋转等），您可以创建自己的控件，例如，简单的 CCNode 子类，它将包含两个精灵

# sql - 在某个日期范围内检索数据

> ID：10756467
> 
> 赞同：0
> 
> 时间：2012-05-25T14:44:09.860
> 
> 标签：sql, sql-server, select, between

我的数据库中有下表

会员资格

*   公司编号
*   会员
*   加入日期
*   到期日
*   重新加入日期
*   离开日期

我正在使用以下查询返回 2011-01-31 的所有成员

```
select * from MEMBERSHIP 
where (JoinedDate < '2011-01-31' or RejoinDate  < '2011-01-31') and IsMember=1 
```

我的问题是它与我经理的数据不符。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:52:32.177

您不应该删除“IsMember = 1”语句，因为您想列出在 2011-01-31 之前是成员但不再是成员的用户吗？如果你想包含第 31 个，也许你应该使用 '<='。

还有什么是 RejoinDate 的默认值？如果它为空，则可能会对您的 WHERE 语句产生影响...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:58:07.313

问题是 IsMember 目前是他们是否是会员，而不是他们是否是 2011-01-31 的会员。所以，您的查询实际上是在回答这个问题：“今天活跃的哪些成员在 2011 年 1 月 31 日之前加入或最后重新加入？”

例如，从 2011 年 1 月 30 日开始并在 2011 年 2 月 1 日退出的人在您的查询中不算作成员，但会在该日期成为成员。

最准确的答案是在事务表中查找成员资格，其中您在表中加入和退出。

除此之外，以下内容可能已经足够接近：

```
select *
from MEMBERSHIP
where '2011-01-31' between JoinedDate and LeaveDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T14:51:34.387

你可以使用这样的东西：

```
JoinedDate <= CONVERT(Date, '2011-01-31') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T14:48:02.350

问题是您的日期被隐式视为2011-01-31 ( ) 的*午夜*`'2011-01-31 00:00:00'`，因此不包括当天的任何活动。尝试`< '2011-02-01'`改为使用，以便包含 31 日的所有活动。

# javascript - 将参数添加到可放置对象中的 div

> ID：10756474
> 
> 赞同：0
> 
> 时间：2012-05-25T14:44:30.553
> 
> 标签：javascript, jquery

一旦将其拖放到可放置对象上，我就会尝试将参数添加到 div 中。是否有类似于 addParameter 下面的方法可以添加参数？

```
 $( ".placeHolder" ).droppable({ drop: function( event, ui ) 
            { 
       "#"+this.id.addParameter(myParam="testParam");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:53:24.020

使用该`.attr()`功能。设置属性使用

```
$(this).attr('my_attribute', 'my_value'); 
```

并让它使用

```
$(this).attr('my_attribute'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:52:53.753

如果您的意思是将属性设置为可拖动元素，那么您可以使用：

```
$(".placeHolder").droppable({
    drop: function(event, ui) {
        ui.draggable.attr("myParam", "testParam");
    }
}); 
```

否则，只需`ui.draggable`用作可拖动元素的 jQuery 对象。

# javascript - 将表转换为多维数组

> ID：10756481
> 
> 赞同：1
> 
> 时间：2012-05-25T14:44:37.610
> 
> 标签：javascript, jquery, arrays, html-table

我有点像 JavaScript 菜鸟，所以解决这个问题的方法可能比我意识到的更基本。我正在尝试从该表中获取数据并将其显示在数组中。该表开始如下：

```
<table id="myTable">
     <col>
        <thead>
             <tr>
                <th>Date</th>
                <th>Results1</th>
                <th>Results2</th>
            </tr>
         </thead>
         <tbody>
             <tr>
                <td>Jan-00</td>
                <td>9</td>
                    <td>10</td>
             </tr>
             <tr>
                <td>Feb-00</td>
                <td>92</td>
                <td>64</td>
             </tr> 
```

并从那里继续（这是一张有很多`<tr>`'s 的长桌）。

我获取变量的代码如下所示（向其他来源提供帮助以帮助我解决此问题）：

```
var columns = $('#myTable thead th').map(function() {
        return $(this).text();
    });
    var tableObject = $('#myTable tr').map(function(i) {
        var row = {};
        // Find all of the table cells on this row.
        $(this).find('td').each(function(i) {
        // Determine the cell's column name by comparing its index
        //  within the row with the columns list we built previously.
        var rowName = columns[i];
        // Add a new property to the row object, using this cell's
        //  column name as the key and the cell's text as the value.
            row[rowName] = $(this).text();
        });
        // Return the row's object representation, to be included
        //  in the array that $.map() ultimately returns.
        return row;
        // .get() to convert the jQuery set to a regular array.
        }).get();
        for (var i in tableObject) {
            $.each(tableObject[i], function(key,value) { 
                var line1 = {};
                line1[key] = value;
                console.log(line1); //test
            });
        } 
```

在 console.log 测试中，变量 line1 现在显示其持有的键和值，如下所示：Date: Jan 00, Results1:9, Results2:10。

这一切都很好，但我真的需要将这些值按以下格式放入一个新数组中：

```
var new = [[Date, Results1], [Date, Results2], etc...]; 
```

抱歉，如果我重复一个问题，但找不到我想要的东西。非常感谢任何人可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:45:31.440

这应该这样做：

```
var ary = [];
$('tr').each(function() {
    date = $('td:first', this).text();
    $('td:gt(0)', this).each(function() {
        ary.push([date, $(this).text()]);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:58:09.193

看看[http://www.w3schools.com/jsref/dom_obj_table.asp](http://www.w3schools.com/jsref/dom_obj_table.asp) 我建议使用*tableObject .rows*来获取包含单元格的行数组。然后使用*行*.cells 获取所有单元格元素。它可能看起来像

```
 var table =document.getElementById("myTable")
  var foo = new array(table.rows.length);
  for(var j =0; j<foo.length; j++)
   foo[j]=foo[j].cells; 
```

这会将您的表格放入一个名为 foo 的二维数组中。以 foo[rowindex][col/cellindex] 的形式表示（即 foo[0][1] 将返回结果 1；

希望这可以让你开始

# maven - 如何使用 Maven “按需”拥有不同的构建任务和依赖项

> ID：10756483
> 
> 赞同：0
> 
> 时间：2012-05-25T14:44:39.733
> 
> 标签：maven, project-management, build-process, build-automation, customization

嗨，我需要一些关于 Maven 问题的信息或一般提示。

背景：我们刚刚将一个大的 eclipse 项目迁移到 4 个 maven 项目中。（这是朝着好的方向迈出的一步！）我们正在使用 ant 脚本（build.xml）构建那个/那些项目我们正在选择“按需”执行的任务

为了简单起见，这里有 4 个项目：Core、Client、Server、Admin。这些 Maven 项目中的每一个都构建到一个 jar 中。这已经建立并且运行良好。核心是对客户端和服务器的依赖。

我们在远程服务器上使用 Jenkins-CI 和 Artifactory。

问题：我需要创建某种“父项目”来构建所有其他 maven 项目，并“按需”添加一些我们使用 ant 脚本执行的任务。示例：我们想为我们的开发人员在本地构建（所以我们不使用 jenkins 和 artifactory），以便他们可以手动测试他们的更新（是的，我们现在没有测试，我们正在使用遗留系统）。在这个构建中，我们不想混淆代码或签署我们的 jar..etc 我们还想要一个“客户构建”（我们在服务器上推送的真正版本，所以它确实使用了 jenkins 和 artifactory）这将添加一些对 4 个项目中的一些项目的任务，例如混淆代码、签署 jar ..etc 对于这个“客户构建”，我们需要能够“即时”选择我们对库的依赖，或者更像是“按需” ”。我们的程序是对另一个软件的扩展，我们所有的客户都不使用相同的版本。为了简单起见，库“y”可以是 y-2.0.1.jar 或 y-2.0.2.jar.. 等等我需要的所有这些“任务”都可以在不同的 maven-plugin 中完成，没有问题。

问题：解决我的问题的好习惯是什么。我们真的很想摆脱我们的 ant 脚本。此外，我们正在清理一个又大又脏的项目，所以我想要一个干净的解决方案，每次我们想为我们的客户在本地或远程服务器上构建时，没有大量重复的东西或大量的手动任务。

想法：虽然我可以在所有这 4 个项目中使用不同的 maven 配置文件，正如我在那里看到的那样： [Ant to Maven - multiple build targets](https://stackoverflow.com/questions/2132958/ant-to-maven-multiple-build-targets)但是每个项目我都会有一个非常巨大的 pom.xml，里面有很多重复的东西，所以我真的不不喜欢这个主意。我虽然我们可以有一个父 maven 项目，但这将不包含任何代码，所以我认为我也对这个想法有误。

感谢您的回答和您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:58:25.653

对于这种自定义，使用[Maven 配置文件是正确的做法。](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)然后你可能会有 developerProfile 和 releaseProfile 之类的。是的，你的绒球会很大很复杂。看起来您对 Maven 可以提供的开箱即用功能的要求有点高，而且它不是进行高度定制化构建的最佳工具。由于（据我了解）您的新构建基础设施还处于早期阶段，因此我建议您查看[Gradle](http://gradle.org/)。您可以重用您的 ant 任务，并且 Jenkins-CI 和 Artifactory 都可以很好地与 Gradle 配合使用。

# perl - 使用 Perl Win32::OLE 从 Excel 工作表中获取超链接列表

> ID：10756490
> 
> 赞同：0
> 
> 时间：2012-05-25T14:44:57.043
> 
> 标签：perl, excel, hyperlink, ole

我想更改 Excel 电子表格中一堆超链接的路径。在谷歌搜索后，我发现了一个[解决方案](http://programming.itags.org/perl/91062/)，可以解决在电子表格中*添加*超链接但不*更改*它们的问题。[Microsoft在这里](http://support.microsoft.com/kb/247507)展示了如何使用 VBA 完成一些事情。

由于我想编辑文档中的每个超链接，我不知道如何解决的关键步骤是：

1.  获取 Perl 中的超链接对象列表

2.  提取他们的地址 1 by 1 和

3.  运行正则表达式以更改路径

4.  将更新后的路径存储在 Hyperlink->object 中并重复

我是使用 OLE 的新手，并且在 (1) 上被绊倒了。这是我到目前为止所尝试的：

```
#!perl
use strict;
use warnings;
use 5.014;
use OLE;
use Win32::OLE::Const "Microsoft Excel";

my $file_name = 'C:\path\to\spreadsheet.xlsx';
my $excel = Win32::OLE->new('Excel.Application', sub {$_[0]->Quit;});
$excel->{Visible} = 1;
my $workbook = $excel->Workbooks->Open($file_name);
my $sheet = $workbook->Worksheets('Sheet 1');
foreach my $link (in $sheet->Hyperlinks ) {
say $link->Address;
} 
```

但这会给代码错误：

> Win32::OLE(0.1709): GetOleEnumObject() 不是 C:/Dwimperl/perl/vendor/lib/Win32/OLE/Lite.pm 第 167 行的 Win32::OLE::Enum 对象。无法调用方法“超链接” " 在 script.pl 第 14 行没有包或对象引用。

它正在选择正确的工作表，所以我不确定它为什么抱怨对象引用。我尝试了几种变体（在超链接周围添加 {}，删除“in”，尝试将其存储为列表、散列和对散列的引用）谁能给我一些指示？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:44:51.800

首先，您应该进行设置`$Win32::OLE::Warn=3`，以便您的脚本在出现问题时发出嘶嘶声。其次，我知道您不能在旧版本的 Excel 中按名称选择工作表，尽管我不知道最新版本中的情况如何。[最后，我认为您会发现使用Win32::OLE::Enum](http://search.cpan.org/perldoc/Win32%3a%3aOLE%3a%3aEnum)会更容易。

这是一个例子：

```
#!/usr/bin/env perl

use 5.014;
use warnings; use strict;

use Carp qw( croak );
use Path::Class;
use Try::Tiny;
use Win32::OLE;
use Win32::OLE::Const 'Microsoft Excel';
use Win32::OLE::Enum;
$Win32::OLE::Warn = 3;

my $book_file = file($ENV{TEMP}, 'test.xls');
say $book_file;

my $excel = Win32::OLE->new('Excel.Application', sub {$_[0]->Quit;});
$excel->{Visible} = 1;

my $book = $excel->Workbooks->Open("$book_file");
my $sheet = get_sheet($book, 'Sheet with Hyperlinks');
my $links = $sheet->Hyperlinks;
my $it = Win32::OLE::Enum->new($links);

while (defined(my $link = $it->Next)) {
    my $address = $link->{Address};
    say $address;
    if ($address =~ s/example/not.example/) {
        $link->{Address} = $address;
        $link->{TextToDisplay} = "Changed to $address";
    }
}

$book->Save;
$book->Close;
$excel->Quit;

sub get_sheet {
    my ($book, $wanted_sheet) = @_;

    my $sheets = $book->Worksheets;
    my $it = Win32::OLE::Enum->new($sheets);

    while (defined(my $sheet = $it->Next)) {
        my $name = $sheet->{Name};
        say $name;
        if ($name eq $wanted_sheet) {
            return $sheet;
        }
    }

    croak "Could not find '$wanted_sheet'";
} 
```

该工作簿确实包含一个名为 的工作表`"Sheet with Hyperlinks"`。该表中的单元格`A1`包含`http://example.com`并`A2`包含`http://stackoverflow.com`。

# php - 与 stream_select 一起使用时，总是阻止从通过 php 的 proc_open 打开的管道读取

> ID：10756504
> 
> 赞同：2
> 
> 时间：2012-05-25T14:45:36.083
> 
> 标签：php, select, user-interaction, proc-open

我正在谈论一个需要使用以下（PHP 5.3/Ubuntu 12.04）进行用户交互的进程，

```
$pdes = array(
  0 => array('pipe', 'r'), //child's stdin
  1 => array('pipe', 'w'), //child's stdout
);
$process = proc_open($cmd, $pdes, $pipes);
sleep(1);
if(is_resource($process)){
  while($iter-->0){
    $r=array($pipes[1]);
    $w=array($pipes[0]);
    $e=array();
    if(0<($streams=stream_select($r,$w,$e,2))){
      if($streams){
        if($r){
          echo "reading\n";
          $rbuf.=fread($pipes[1],$rlen);  //reading rlen bytes from pipe
        }else{
          echo "writing\n";
          fwrite($pipes[0],$wbuf."\n");  //writing to pipe
          fflush($pipes[0]);
  }}}}
  fclose($pipes[0]);
  fclose($pipes[1]);
  echo "exitcode: ".proc_close($process)."\n";
} 
```

这是我在 C 语言中的测试程序，

```
#include <stdio.h>
int main(){
  char buf[512];
  printf("before input\n");
  scanf("%s",buf);
  printf("after input\n");
  return 0;
} 
```

现在，即使将 if设置为 non-blocking where as write to never blocks ，问题`$r`始终是空的。但是，如果我没有匹配测试程序的读写，事情就可以正常工作，`stream_select``$pipes[1]``$pipes[0]``stream_select`

```
echo fread($pipes[1],$rlen);   //matching printf before input
fwrite($pipes[0],$wbuf."\n");  //matching scanf
fflush($pipes[0]);
echo fread($pipes[1],$rlen);   //matching printf after input 
```

我无法弄清楚这里发生了什么。我正在尝试在这里实现某种基于 Web 的终端仿真器。欢迎任何有关如何执行此操作的建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T08:18:11.347

抱歉各位浪费了你们的时间。过了一会儿我发现了这个问题（抱歉更新晚了）。由于竞争条件，读取被阻塞。

I write to the process and immediately check the streams for availability. Write never blocks and data is not ready for reading yet (somehow even for 1 byte of data to be available it took 600ms). So, I was able to fix the problem by adding sleep(1) at the end of write block.

# android - 如何撤回在警报对话框中选中的单选按钮？

> ID：10756522
> 
> 赞同：1
> 
> 时间：2012-05-25T14:46:36.143
> 
> 标签：android, radio-button, android-alertdialog

我有一个带有单选按钮的警报对话框。我希望用户单击其中一个并停止警报对话框。

所以没有 positif 或 negatif 按钮，只有单击其中一个单选按钮将关闭警报对话框。

但我不知道如何：

*   当用户单击单选按钮时关闭警报对话框

*   在我的警报对话框关闭后撤回单击的单选按钮

这是代码。

```
public void createAlerDialogRadioButton(String title, String[] radiobuttontitles)
{
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
        RadioGroup rbg = new  RadioGroup(this);

        alertDialog.setTitle(title);

        int nbbutton =  radiobuttontitles.length;           

                    // add a radiobutton to the radiogroup for each element of radiobuttontitles
        for (int i=0;i<nbbutton;i++) {
            RadioButton mrd = new RadioButton(this);
            mrd.setText(radiobuttontitles[i]);              
            rbg.addView(mrd);
            }

        // the view
        TextView textView = new TextView(this);
        LinearLayout linearLayout = new LinearLayout(this);
        linearLayout.setLayoutParams( new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,
                        LinearLayout.LayoutParams.FILL_PARENT));
        linearLayout.setOrientation(1);     
        linearLayout.addView(textView);
        linearLayout.addView(rbg);

        alertDialog.setView(linearLayout);  

        alertDialog.show();

} 
```

谢谢你的帮助。

# jquery - jquery ajax 调用失败并在 facebook iframe 上返回错误

> ID：10756526
> 
> 赞同：1
> 
> 时间：2012-05-25T14:46:44.303
> 
> 标签：jquery, ajax, facebook, forms, iframe

我正在尝试通过“静态 HTML：iframe 选项卡”应用程序将表单添加到 Facebook 页面。我正在使用 jQuery、ajax、php 发送表单并接收成功或错误。当我在 Facebook iFrames 之外运行表单时，一切正常。但是，在 iFrames 上我遇到了两个问题：

1.  AJAX 调用每次都失败。它返回错误值并且不传递值。
2.  谷歌浏览器给我“这个页面有不安全的内容”

这是我的ajax调用：

```
$.ajax({
    type: "POST",
    url: "send.php",
    contentType: "application/x-www-form-urlencoded; charset=utf-8;",
    data: data_string,  
    dataType: 'html',
    success: function(data){
        alert('success');
    },
    error: function() {
        alert('error');
    }
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T08:11:46.517

解决了。问题确实是 Facebook 对 iFrame 中安全连接的需求。所需要做的就是将文件存储在使用 SSL 的 Web 托管服务上。然后确保 html 页面上的所有链接都带有“https”。

这解决了上述两个问题。

# google-chrome - 开发人员工具栏打开时，Chrome 中的 Javascript 执行停止

> ID：10756530
> 
> 赞同：0
> 
> 时间：2012-05-25T14:46:55.193
> 
> 标签：google-chrome, web-developer-toolbar

每当我在 Chrome 中进行开发时，在 Chrome 开发人员工具栏打开时尝试执行脚本之前，我都不会遇到问题。当它打开时，并且（例如），我单击一个绑定了事件的元素，工具栏将翻转到“脚本”选项卡并显示我在下面附加的内容。

当我关闭工具栏时，似乎脚本的执行会启动并运行我正在等待的操作。

我应该注意到我的 JS 中没有错误，并且当工具栏关闭时它运行完美。Chrome 设置中必须有一些东西可以在工具栏打开时暂停 javascript 执行。

我已禁用所有扩展并重新启动浏览器无效。

![Chrome 开发者工具](../Images/13852faac73487536e11fc8f859be78b.png)

# jquery - 来自嵌入式 JSF 2.0 应用程序的导航案例问题

> ID：10756533
> 
> 赞同：1
> 
> 时间：2012-05-25T14:47:08.093
> 
> 标签：jquery, jsf, navigation, tomcat6

我正在开发一个 JSF 电子表单应用程序。该应用程序需要嵌入到另一个网站（一个用 JSP 编写的网站）。我可以嵌入它的唯一方法是在文档准备阶段通过 jQuery。

我已经嵌入了所有需要嵌入的页面，并且一切都按预期显示，但是有一个问题。

在我的新表单/编辑表单网页上，我有一个提交按钮，用于更新表单或在服务器端创建一个新表单，然后在操作完成后导航到成功屏幕或失败屏幕。

嵌入此页面后，此按钮仍会在服务器上执行操作（太棒了！！），但正如预期的那样，将页面重定向到成功屏幕。我想做的是留在“父”屏幕上，只需将嵌入页面替换为成功页面/失败页面。

我认为我可以解决的方法是以某种方式拦截来自 JSF 的导航事件并从该事件重新加载嵌入页面。这里的关键是提交后不要离开父页面。

我在 Tomcat 6 上运行 JSF2.0 (Apache impl.)，jQuery 版本是 1.3。

我希望这很清楚。如果你们需要更多信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:03:36.400

> *嵌入此页面后，此按钮仍会在服务器上执行操作（太棒了！！），但正如预期的那样，将页面重定向到成功屏幕。我想做的是留在“父”屏幕上，只需将嵌入页面替换为成功页面/失败页面。*

只需返回`null`或`void`有条件地呈现内容。

就这样

```
public void submit() {
    results = processAndGetIt();
} 
```

与例如

```
<h:form>
    ...
    <h:commandButton value="Submit" action="#{bean.submit}">
        <f:ajax execute="@form" render=":results" />
    </h:commandButton>
</h:form>

<h:panelGroup id="results">
    <h:panelGroup rendered="#{not empty bean.results}">
        Results have been retrieved: #{bean.results}.
    </h:panelGroup>
</h:panelGroup> 
```

请注意，我添加`<f:ajax>`了更好的用户体验。

# eclipse - Eclipse 未解决的编译

> ID：10756535
> 
> 赞同：0
> 
> 时间：2012-05-25T14:47:16.643
> 
> 标签：eclipse, compiler-errors

我在 Eclipse Indigo 3.7.2 中处理一个更大的项目时遇到了这个非常奇怪的问题。我使用 Subclipse 插件从 SVN 存储库中签出项目，当我启动应用程序时，我收到以下错误消息：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 

at anares.preprocess.StanfordParser.getInstance(StanfordParser.java:73)
at anares.start.Startconsole.<init>(Startconsole.java:22)
at anares.start.Startconsole.main(Startconsole.java:52) 
```

这是 Startconsole.class 的样子，包含 main 方法：

```
package anares.start;

import java.io.FileNotFoundException;
import java.io.IOException;

import anares.core.AnaResAlgorithm;
import anares.preprocess.MorphaDornerSentenceSplitter;
import anares.preprocess.CollectionEquipper;
import anares.preprocess.ParserHandlerInterface;
import anares.preprocess.Preprocessor;
import anares.preprocess.SplitterInterface;
import anares.preprocess.StanfordParser;
import anares.text.AnaResTextObject;

public class Startconsole {

public final ParserHandlerInterface parserint = StanfordParser.getInstance();

public final SplitterInterface splitterint = MorphaDornerSentenceSplitter.getInstance();

public final CollectionEquipper equipperint = null;

public final static int buffersize = 5;

private Startconsole(String file) throws IOException {
    AnaResTextObject object = startPreprocess(file);
    startAlgorithm(object);
}

private AnaResTextObject startPreprocess(String file) throws IOException {
    Preprocessor prepro = new Preprocessor(parserint, splitterint,
            equipperint);
    AnaResTextObject textObject = prepro.preprocessText(file);
    return textObject;
}

private void startAlgorithm(AnaResTextObject object) {
    AnaResAlgorithm algo = new AnaResAlgorithm(buffersize);
    algo.resolveAnaphora(object);
}

public static void main(String args[]) throws FileNotFoundException,
        IOException {
    if(args.length > 0){
        Startconsole console = new Startconsole(args[0]);
    }else{
        Startconsole console = new Startconsole("Text.txt");
    }
    }
} 
```

正如我所说，这是一个更大的项目，因此包含一些 .jar 文件和对其他包的引用。
这个问题只发生在我的笔记本电脑上。在我的另一台 PC 上一切正常，我的一个从事同一个项目的同学也没有任何问题。我已经尝试再次检查项目，清理它甚至重新安装 Eclipse。
现在这是奇怪的部分：如果我注释掉整个主要方法，只留下类似的东西

```
public static void main(String args[]) throws FileNotFoundException,
        IOException {
//      if(args.length > 0){
//          Startconsole console = new Startconsole(args[0]);
//      }else{
//          Startconsole console = new Startconsole("Text.txt");
//      }
    System.out.println("Hello World!");
} 
```

我仍然会收到完全相同的错误消息和完全相同的行号。并且没有“Hello World！” 在输出中。
有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T19:01:30.483

您的问题似乎是代码中存在我看不到的错误，或者您的 Eclipse 实例/编译器进入了无法恢复的奇怪状态。

只是一些基本的想法来检查

1.  您是否尝试过重新启动 Eclipse？
2.  您是否在所有计算机上使用相同版本的 Java？例如，Java 6 和 Java 7 之间可能存在一些不兼容性。
3.  是否开启了自动构建？查看 Project/Build automatically 菜单项。自动 Java 构建器可能已关闭，因此它不会重新编译您的代码。
4.  您是否尝试清理您的项目以强制重建？（项目/清理菜单项）。
5.  JDT 是否安装在您的 Eclipse 实例中？它应该是，但它可能值得检查这样的微不足道的问题。
6.  也许您应该尝试创建一个新工作区，然后再次签出项目。
    *   您也可以尝试使用这个新的工作空间理念再次下载 Eclipse。

如果这些东西都不起作用，我不知道要寻找什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T20:39:06.653

查看 Eclipse 的**问题**视图（选项卡）；项目中的任何编译问题都将在那里报告。您可以双击“**问题**”视图中的错误或警告，编辑器将在出现问题的特定行上打开。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-04T12:33:16.740

做一件事只是从您的项目中删除englischPCFG.ser.gz的构建路径，因为我确定这不是您在项目中添加的jar文件

# c++ - boost::mutex 和 boost::timed_mutex 之间的区别

> ID：10756539
> 
> 赞同：4
> 
> 时间：2012-05-25T14:47:32.757
> 
> 标签：c++, boost

根据 Boost 文档`boost::mutex`，`boost::timed_mutex`应该是不同的。第一个实现`Lockable Concept`，第二个 - `TimedLockable Concept`.

但是如果你看一下源码，你会发现它们基本上是一样的。唯一的区别是锁类型定义。您可以调用`timed_lock`或`boost::mutex`使用`boost::unique_lock`超时就好了。

```
typedef ::boost::detail::basic_timed_mutex underlying_mutex;
class mutex:
    public ::boost::detail::underlying_mutex

class timed_mutex:
    public ::boost::detail::basic_timed_mutex 
```

这背后的理由是什么？它是过去的一些残余，`boost::mutex`用作是错误的`TimedLockable`吗？毕竟是无证的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:55:42.253

没看源码，前几天用过这些，定时互斥量的作用不一样。他们阻止直到时间结束，然后返回。唯一的锁将阻塞，直到它可以得到锁。

try 锁不会阻塞，然后您可以测试它是否拥有锁的所有权。定时锁将阻塞指定的时间，然后表现为尝试锁 - 即停止阻塞，您可以测试锁的所有权。

我相信在内部，一些不同的 boost 锁是唯一锁的 typedef，因为它们都使用唯一锁。typedef 名称在那里，以便您可以跟踪您使用不同名称的目的，即使您可以使用不同的功能并混淆您的客户端代码。

编辑：这是一个定时锁的例子：

```
boost::timed_mutex timedMutexObj;
boost::mutex::scoped_lock scopedLockObj(timedMutexObj, boost::get_system_time() + boost::posix_time::seconds(60));
if(scopedLockObj.owns_lock()) {
    // proceed
} 
```

供参考： http: [//www.boost.org/doc/libs/1_49_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_concepts.timed_lockable.timed_lock](http://www.boost.org/doc/libs/1_49_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_concepts.timed_lockable.timed_lock)

Edit again: to provide a specific answer to your question, yes, it would be wrong to use `boost::mutex` as a `TimedLockable` because `boost::timed_mutex` is provided for this purpose. If they are the same thing in the source and this is undocumented, this is unreliable behavior and you should follow the documentation. (My code example did not used `timed_mutex` at first but I updated it)

# windows-8 - Metro JS/HTML5 应用程序和表存储

> ID：10756556
> 
> 赞同：0
> 
> 时间：2012-05-25T14:48:12.997
> 
> 标签：windows-8, windows-runtime, azure-storage, azure-table-storage, winjs

我试图找出是否可以使用 JS/HTML5 在 Win 8 上创建 Metro 风格的应用程序，将其数据存储在 Windows Azure 表存储中。

找不到任何样本。我唯一看到的是在我的 Metro 风格应用程序中有推送通知，但没有将数据存储在表存储中。

可能吗？我在哪里可以找到样本？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:37:23.540

是的，这是可能的。查看[适用于 Windows 8 Consumer Prv 的 Windows Azure 工具包](http://watwindows8.codeplex.com/releases/view/84166)。那里有一个 Windows 8 云应用程序：

*立即，开箱即用，客户端和服务器项目集成以启用与 Windows 推送通知服务 (WNS) 的推送通知。此外，Windows Azure 项目演示了如何使用 Windows 推送通知配方**以及如何利用 Windows Azure blob 和表存储。***

还有大量的[Azure 样本](http://code.msdn.microsoft.com/windowsazure/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:38:21.397

首先，在 Windows 8 上运行 Windows Azure 应用程序仍然需要两个主要的东西：

1.  [适用于 Windows 8 的 Windows Azure 工具包](http://watwindows8.codeplex.com/wikipage?title=Creating%20a%20New%20Windows%208%20Cloud%20Application&referringTitle=Documentation)
2.  [Windows Azure SDK 1.6](https://www.windowsazure.com/en-us/develop/downloads/)（最新可用）

一旦你有了它，你仍然可以使用 Azure SDK 1.6 连接到 Windows Azure 表存储，一旦你有了数据，你就可以使用 JQuery/JS 或任何其他 UI 特定语言进行渲染。

# macros - 比较 C 宏中的字符串（对于 MODULE_LICENSE）

> ID：10756569
> 
> 赞同：3
> 
> 时间：2012-05-25T14:49:09.433
> 
> 标签：macros, linux-device-driver, c-preprocessor

我希望能够确保我不会意外地将任何专有模块静态链接到内核中。`MODULE_LICENSE("Proprietary")`如果未定义 MODULE，我正在考虑在编译时失败。（或者更好的是，如果`MODULE_LICENSE("GPL")`未定义则失败......）。

但是我找不到在宏中比较字符串的好方法——有人对此有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:59:41.147

我不认为你能做到这一点。

通常完成的方式是定义预处理器符号，并比较它们的（整数）值：

```
#define LICENSE_PROPRIETARY 1
#define LICENSE_GPL         2
#define LICENSE_MIT         3

#define MODULE_LICENSE      LICENSE_GPL

#if MODULE_LICENSE != LICENSE_GPL
#error "Not GPL, fail fail"
#endif 
```

# c# - 动态创建 GroupBy 语句

> ID：10756571
> 
> 赞同：5
> 
> 时间：2012-05-25T14:49:29.463
> 
> 标签：c#, linq

我正在尝试动态重组一些数据以显示在树视图中，这将允许用户选择以下维度中的最多三个来对数据进行分组：

```
Organisation
Company
Site
Division
Department 
```

因此，例如，如果用户选择他们想按公司分组，然后按站点然后按部门...以下代码将执行所需的分组。

```
var entities = orgEntities
// Grouping Level 1
.GroupBy(o => new { o.CompanyID, o.CompanyName })
.Select(grp1 => new TreeViewItem
        {
        CompanyID = grp1.Key.CompanyID,
        DisplayName = grp1.Key.CompanyName,
        ItemTypeEnum = TreeViewItemType.Company,
        SubItems = grp1
               // Grouping Level 2
               .GroupBy(o => new { o.SiteID, o.SiteName })
               .Select(grp2 => new TreeViewItem
               {
               SiteID = grp2.Key.SiteID,
               DisplayName = grp2.Key.SiteName,
               ItemTypeEnum = TreeViewItemType.Site,
               SubItems = grp2
                  // Grouping Level 3
                  .GroupBy(o => new { o.Division })
                  .Select(grp3 => new TreeViewItem
                  {
                      DisplayName = grp3.Key.Division,
                      ItemTypeEnum = TreeViewItemType.Division,
                  }).ToList()
               }).ToList()
        })
.ToList(); 
```

这将给出一个这样的结构：

```
+ Company A
  + Site A
    + Division 1
    + Division 2
  + Site B
    + Division 1
+ Company B
  + Site C
    + Division 2
+ Company C
  + Site D 
```

但是，这只为我提供了大量组合中的一种。

我将如何将其转换为可以根据用户选择的三个维度动态创建等效表达式的东西，因此我不必为每个组合创建这些表达式中的每一个！！？

多谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:28:18.883

一个有趣的问题。为分组键选择一种类型，为结果选择另一种类型......使得很可能得到你想要的东西。

```
public struct EntityGroupKey
{
  public int ID {get;set;}
  public string Name {get;set;}
}

public class EntityGrouper
{
  public Func<Entity, EntityGroupKey> KeySelector {get;set;}
  public Func<EntityGroupKey, TreeViewItem> ResultSelector {get;set;}
  public EntityGrouper NextGrouping {get;set;} //null indicates leaf level

  public List<TreeViewItem> GetItems(IEnumerable<Entity> source)
  {
    var query =
      from x in source
      group x by KeySelector(x) into g
      let subItems = NextGrouping == null ?
        new List<TreeViewItem>() :
        NextGrouping.GetItems(g)
      select new { Item = ResultSelector(g.Key), SubItems = subItems };

    List<TreeViewItem> result = new List<TreeViewItem>();
    foreach(var queryResult in query)
    {
          // wire up the subitems
      queryResult.Item.SubItems = queryResult.SubItems 
      result.Add(queryResult.Item);
    }
    return result;
  }

} 
```

以这种方式使用：

```
EntityGrouper companyGrouper = new EntityGrouper()
{
  KeySelector = o => new EntityGroupKey() {ID = o.CompanyID, Name = o.CompanyName},
  ResultSelector = key => new TreeViewItem
  {
    CompanyID = key.ID,
    DisplayName = key.Name,
    ItemTypeEnum = TreeViewItemType.Company
  }
}

EntityGrouper divisionGrouper = new EntityGrouper()
{
  KeySelector = o => new EntityGroupKey() {ID = 0, Name = o.Division},
  ResultSelector = key => new TreeViewItem
  {
    DisplayName = key.Name,
    ItemTypeEnum = TreeViewItemType.Division
  } 
}

companyGrouper.NextGrouping = divisionGrouper;

List<TreeViewItem> oneWay = companyGrouper.GetItems(source);

companyGrouper.NextGrouping = null;
divisionGrouper.NextGrouping = companyGrouper;

List<TreeViewItem> otherWay = divisionGrouper.GetItems(source); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:02:08.590

另一种选择是使用[DynamicLinq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。如果这是直接的 LINQ（不是通过某些 DB 上下文，例如 LINQ2SQL），那么可以通过编写分组/选择器字符串来完成：

```
var entities = orgEntities
    .GroupBy("new(CompanyID, CompanyName)", "it", null) // DynamicLinq uses 'it' to reference the instance variable in lambdas.
    .Select(grp1 => new TreeViewItem
    {
        ...
        .GroupBy("new(SiteID, o.SiteName)", "it", null)
        // And so on... 
```

您可能可以将其抽象为每个标准类型。我看到的唯一问题是内部分组可能不是最容易编译在一起的，但至少这可以让你开始朝某个方向发展。DynamicLinq 允许您构建动态类型，因此当然可以进一步抽象它。最终，最大的挑战是根据您的分组依据，生成的 TreeViewItem 包含不同的信息。动态 LINQ 的良好用例，但我看到的唯一问题是进一步抽象（到内部分组）。

让我们知道您的想法，这绝对是一个我以前没有考虑过的有趣想法。

# visual-studio-2010 - 在 VS 2010 中调试后丢失文件？

> ID：10756572
> 
> 赞同：0
> 
> 时间：2012-05-25T14:49:42.307
> 
> 标签：visual-studio-2010, debugging, release

我现在有一个不同的问题。当我正在开发一个包含大量插件的程序时，当我调试我的程序时，我看到我的一些插件没有加载。我已经控制了所有的 .dll，我可以在文件夹中看到未安装插件的 .dll。

Tha 问题仅发生在 Debug 上，当我进行 Relase 时，我可以看到所有不存在的插件。

可能是什么问题？

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:54:22.643

您将它们放在错误的文件夹中（用于发布构建）。Debug build 文件夹通常与 Release 不同，因此也将您的 dll 放在那里。

# asp.net-mvc-3 - 从表中删除空值行

> ID：10756574
> 
> 赞同：0
> 
> 时间：2012-05-25T14:49:49.830
> 
> 标签：asp.net-mvc-3, reporting, expression

我有两个表，我有一个“案例”列，它的值可以为空或有一个数字。一个表将合并并显示 Cases 不为空的所有信息，另一个表将合并并显示 Cases 为空的信息。目前，两个表都显示了 null 和非 null 项的行。案例为空的表我显示值并包含为空行，这些行用于不为空的案例。我怎样才能从我的表中删除空行？

我尝试使用过滤器，但我想我没有正确使用它，我尝试使用过滤器表达式显示信息`Cases = 0`并尝试过`Cases = Is Nothing`，但运行它时出现错误。

我如何在我的报告查看器中控制它？

样品信息：

```
Activity type  hours  activities  cases
Teaching          54          12     23
Preparing         12           9   null 
```

在一张表中，它将显示带有案例的活动：

```
Teaching          54          12     23 
```

在另一个表中，它将显示针对案例的活动为空：

```
Preparing         12           9   null 
```

* * *

我得到的是每张桌子的空行

```
Teaching          54          12     23
-------Empty row------ (this row is for the activity type with null) 
```

其他表

```
-------Empty row------ (this row is for the activity type with cases)
Preparing         12           9   null 
```

我希望能够从它们将显示的两个表中删除空行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:59:04.033

我能够使用过滤器功能，但没有注意到有文本、整数、布尔值的选择......对于我的第一个表，我打开了表中行的组属性，并在我制作的过滤器下以下：

表达式：[案例]
运算符：>=
值：1
从下拉列表中选择：整数

第二张表：

表达式：[案例]
运算符：<=
值：0
整数

# c# - 从 Sybase ASE 15 执行存储过程并使用 C# 获取数据集？

> ID：10756576
> 
> 赞同：2
> 
> 时间：2012-05-25T14:49:59.410
> 
> 标签：c#, sql, stored-procedures, sap-ase

如何从 Sybase ASE 15（**使用 ODBC**）执行存储过程并使用 C# 获取 DataSet？

* * *

```
public static object GetDataSetOdbc(string conn, string query)
    {

        OdbcConnection ConexaoOdbc = new OdbcConnection(conn);
        ConexaoOdbc.ConnectionTimeout = 120;
        OdbcDataAdapter daOdbc;
        OdbcCommand cmdOdbc;
        DataSet dsResultado = new DataSet();
        bool exc = false;

        try
        {
            if (query != "")
            {
                cmdOdbc = new OdbcCommand(query, ConexaoOdbc);
                cmdOdbc.CommandType = CommandType.Text;
                daOdbc = new OdbcDataAdapter(cmdOdbc);

                ConexaoOdbc.Open();

                int idx = VerificaExpressao(query);

                if (idx < 0)
                    cmdOdbc.ExecuteNonQuery();
                else
                {
                    cmdOdbc.ExecuteScalar();
                }

                daOdbc.Fill(dsResultado, "result");

            }
            else
                ConexaoOdbc.Close();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
            exc = true;
        }
        finally
        {
            ConexaoOdbc.Close();
        }

        if (exc)
            return "";
        else
            return dsResultado;

    }

    private static int VerificaExpressao(string query)
    {
        int idx = query.IndexOf("Create", StringComparison.CurrentCultureIgnoreCase);

        if (idx == -1)
            idx = query.IndexOf("Drop", StringComparison.CurrentCultureIgnoreCase);

        if (idx == -1)
            idx = query.IndexOf("Alter", StringComparison.CurrentCultureIgnoreCase);

        if (idx == -1)
            idx = query.IndexOf("Insert", StringComparison.CurrentCultureIgnoreCase);

        if (idx == -1)
            idx = query.IndexOf("Update", StringComparison.CurrentCultureIgnoreCase);

        if (idx == -1)
            idx = query.IndexOf("Exec", StringComparison.CurrentCultureIgnoreCase);

        return idx;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:01:19.417

`VerificaExpressao method`唯一允许的`selects`。

通过了这个：

```
 int idx = VerificaExpressao(query);

        if (idx < 0)
            cmdOdbc.ExecuteNonQuery();
        else
        {
            cmdOdbc.ExecuteScalar();
        } 
```

对此：

```
 cmdOdbc.ExecuteNonQuery(); 
```

它完成了:)

# python - 导入单元测试错误

> ID：10756577
> 
> 赞同：3
> 
> 时间：2012-05-25T14:49:59.870
> 
> 标签：python, unit-testing

这是我第一次进行单元测试，我正在尝试运行一个简单的代码......

```
import random
import unittest

class TestSequenceFunctions(unittest.TestCase):

    def setUp(self):
        self.seq = range(10)

    def test_shuffle(self):
        # make sure the shuffled sequence does not lose any elements
        random.shuffle(self.seq)
        self.seq.sort()
        self.assertEqual(self.seq, range(10))

        # should raise an exception for an immutable sequence
        self.assertRaises(TypeError, random.shuffle, (1,2,3))

    def test_choice(self):
        element = random.choice(self.seq)
        self.assertTrue(element in self.seq)

    def test_sample(self):
        with self.assertRaises(ValueError):
            random.sample(self.seq, 20)
        for element in random.sample(self.seq, 5):
            self.assertTrue(element in self.seq)

suite = unittest.TestLoader().loadTestsFromTestCase(TestSequenceFunctions)
unittest.TextTestRunner(verbosity=2).run(suite) 
```

然后我收到错误消息...

```
Traceback (most recent call last):
  File "/Users/s66/Desktop/unittest.py", line 2, in <module>
    import unittest
  File "/Users/s66/Desktop/unittest.py", line 4, in <module>
    class TestSequenceFunctions(unittest.TestCase):
AttributeError: 'module' object has no attribute 'TestCase'
>>> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T14:55:58.500

那是因为您的脚本名称被称为`unittest.py`. 该语句`import unittest`正在导入您的脚本而不是 unittest 模块，因此错误与不存在的`TestCase`属性。

有关详细信息，请参阅[Module Search Path](http://docs.python.org/tutorial/modules.html#the-module-search-path)的文档。简而言之，当您进行导入时，首先搜索内置模块，然后搜索`sys.path`. 这通常从运行脚本的位置开始，[`PYTHONPATH`](http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)然后是默认模块目录

在您的情况下，由于`unittest`不是内置的，它在搜索其他已安装的模块之前找到了您的脚本（并加载了它）。

> 我该如何解决？

重命名您的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:01:04.370

您在运行脚本的目录中是否有一个名为 unittest.py 的模块？

当我运行您的代码时，我得到以下输出。

```
test_choice (__main__.TestSequenceFunctions) ... ok
test_sample (__main__.TestSequenceFunctions) ... ERROR
test_shuffle (__main__.TestSequenceFunctions) ... ok

======================================================================
ERROR: test_sample (__main__.TestSequenceFunctions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "test.py", line 23, in test_sample
    with self.assertRaises(ValueError):
TypeError: failUnlessRaises() takes at least 3 arguments (2 given)

----------------------------------------------------------------------
Ran 3 tests in 0.000s

FAILED (errors=1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T18:07:43.700

我的回答不是针对这个作者的，而是针对那些在 Google 上发现这个 stackoverflow 页面的人，因为相同的错误消息但出于不同的原因。

我正在从 django 1.5 升级到 django 1.10，我的一个测试文件中的“import unittest”导致了类似的错误。

错误是由于 app/tests/ **init** .py 文件正在导入错误的测试文件（这在 django 1.5 中是必要的，因为当时不存在测试文件的自动检测。现在不再需要） .

所以解决方案是简单地清空**init** .py 文件，它解决了这个问题。

希望它可以帮助一些人，因为我在这个问题上损失了 3000 万到 1 小时。

# dns - 更改 DNS 或使用 RECORD 哪个更好？

> ID：10756584
> 
> 赞同：0
> 
> 时间：2012-05-25T14:50:38.790
> 
> 标签：dns, record

将域名指向另一个主机是通过 DNS 或将记录 A 更改为第二个来完成的。与另一个相比，一个有优点或缺点吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:55:21.497

从功能上讲，区别在于将用户指向另一个域名 (DNS) 或指向 IP 地址 (A)。实际上，A 记录会更快，因为它不需要在额外域上进行 DNS 查找，但无论如何它都可以忽略不计，因为一旦客户端查找了 DNS 记录，它就会存储它，因此不必这样做再次。

例如 - 将 example.com 指向 example2.com（其 IP 为 1.2.3.4）需要客户端查找 example.com，然后必须查找 example2.com 才能找到 1.2.3.4；如果您一开始只是将其指向 1.2.3.4，则可以避免不必要的查找。

这一切几乎都是瞬间发生的，通常每 24-48 小时只有一次，所以这一切都只是学术性的：实际上，使用更方便的那个。

# eclipse - 在 Eclipse CDT 中更改 .project 和 .cproject 文件的位置

> ID：10756589
> 
> 赞同：3
> 
> 时间：2012-05-25T14:51:10.680
> 
> 标签：eclipse, eclipse-cdt

对于给定位置的现有 Eclipse CDT 项目，我们还可以在该给定位置找到文件 .project 和 .cproject。有没有办法将这些文件存储在一个完全独立的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T08:26:57.550

我不知道 .cproject 文件，但 .project 文件应该位于项目的根目录，我认为您对此无能为力，除非可能将其链接到其他地方。.project 文件由 Eclipse 核心资源机制使用。

# c# - 接受整数的文本框

> ID：10756590
> 
> 赞同：0
> 
> 时间：2012-05-25T14:51:23.793
> 
> 标签：c#

我通过这个网站找到了不同的帮助，但似乎仍然无法将字符串转换为 int。我尝试了很多不同的方法。这是其中的两个。在 button_click 上，我需要阅读文本框并将它们转换为 int，以便我可以对它们执行标准逻辑。（a > b 函数）。第一部分下方是我在输入文本框时用来强制使用数字的内容。

```
 private void write_button_Click(object sender, EventArgs e)
       {
        int mat_od1 = int.Parse(matod_box.Text); //Input string in wrong format.
        int mat_id1 = int.Parse(matid_box.Text);
        int fod1 = int.Parse(fod_box.Text);
        int fid1 = int.Parse(fid_box.Text);
        int hp1 = int.Parse(hp_box.Text);

        //This next section is just to show something else I've tried.

        decimal mat_od = Convert.ToDecimal(matod_box.Text); //Same error.
        decimal mat_id = Convert.ToDecimal(matid_box.Text);
        decimal fod = Convert.ToDecimal(fod_box.Text);
        decimal fid = Convert.ToDecimal(fid_box.Text);
        decimal hp = Convert.ToDecimal(hp_box.Text);
        decimal pass_od = mat_od;

    }

       private void fod_box_TextChanged(object sender, EventArgs e)
    {
        try
        {
            int numinput = int.Parse(fod_box.Text);
            if (numinput < 1 || numinput > 500)
            {
                MessageBox.Show("You must enter a number between 0 and 500.");
            }
        }
        catch (FormatException)
        {

            MessageBox.Show("You need to enter a number.");
            fod_box.Clear();

        } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T14:55:42.153

而不是`int.Parse()`您应该使用`int.TryParse(string,out int)`
这种方式，您将能够检查输出并确定字符串是否被正确解析

```
int i;string s="";
if(int.TryParse(s,out i))
{
 //use i
}
else
{
//show error
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:55:46.217

int.parse 转换应该可以工作，如下例所示：

```
 string s = "111";
  int i;
  if (int.TryParse(s, out i))
  {
     Console.Write(i);
  }
  else
  {
      Console.Write("conversion failed");
  } 
```

你确定你真的为你的整数提供了合法的输入吗？在任何情况下，您都应该像我在示例中那样使用 TryParse。无需使用 try..catch ，您可以使用框架提供的布尔方法，这将获得相同的结果..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T14:57:18.617

一切都取决于您允许在文本框中输入的内容。

如果它可能不是可以转换为整数的字符串，包括空白，那么类似

```
int value;
if (int.TryParse(SomeString, out value)
{
   // it is an int
}
else
{
  // it's not an int, so do nothing raise a message or some such.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T15:05:52.513

除了`Int32.TryParse`像其他人指出的那样在按钮 Click 事件处理程序中使用之外，您还需要小心您在 TextBox`Changed`事件处理程序中所做的事情。你这里的代码有缺陷：

```
private void fod_box_TextChanged(object sender, EventArgs e) 
{ 
    try 
    { 
        int numinput = int.Parse(fod_box.Text); 
        ...
    } 
    catch (FormatException) 
    { 
        MessageBox.Show("You need to enter a number.");  
        fod_box.Clear(); 
    } 
```

调用 foo_box.Clear() 将清除文本框中的所有文本，调用 TextChanged 处理程序以再次执行（除非 TextBox 已经为空）。因此，如果您输入一个非数字值，您的消息框将显示两次 - 第一次尝试解析您的非数字值，第二次尝试解析空字符串作为调用的结果清除（）。

一般来说，我会避免在 Changed 事件处理程序中进行验证。

# spring - Strut 2.3.1.2 单元测试，如何使用 getContext() 删除 Spring 依赖与 NPE

> ID：10756591
> 
> 赞同：0
> 
> 时间：2012-05-25T14:51:26.873
> 
> 标签：spring, struts2, actioncontext

我刚刚升级到 Struts 2.3.1.2，并且在 JUnit 测试方面遇到了一些问题。

我的旧测试代码是这样的......

```
public class HomeActionTest  {

    @Test
    public void testUserNameErrorMessage() throws Exception {
     HomeAction action = new HomeAction();
     setupMocks(action);
     action.execute();
    }
} 
```

动作类的执行方法有代码

```
 String text = getText(GLOBAL_SELECT); 
```

这会在 LocalizedTextUtil 中导致 NullPointerException，因为它调用...

```
 ActionContext.getContext() 
```

现在我可以尝试这样做...

```
 ActionContext.setContext(new ActionContext(new HashMap())); 
```

但是我会得到一个 NullPointerException，因为上下文中的 Valuestack 是空的。我可以继续尝试解决这些问题，但这似乎是一项徒劳的任务。肯定有更好的办法？！？

好....

我遵循新的[Struts 2.3.xx 测试文档](http://struts.apache.org/2.2.3/docs/struts-2-junit-plugin-tutorial.html)

我的 struts.xml 与弹簧相连。

```
 <action name="secure/home" class="homeAction" method="execute">
            <result>home.jsp</result>
            <result name="input">home.jsp</result>
        <result name="error">error.jsp</result>
 </action> 
```

我的测试课

```
public class HomeActionTest extends StrutsSpringTestCase   {

    @Test
    public void testUserNameErrorMessage() throws Exception {
        ActionProxy proxy = getActionProxy("/secure/home");

        // setup the session
        Map<String, Object> session = new HashMap<String, Object>();  
        ActionContext actionContext = proxy.getInvocation().getInvocationContext();  
        actionContext.setSession(session);  

        HomeAction homeAction = (HomeAction) proxy.getAction();

        proxy.execute();
    }
} 
```

但这现在意味着我得到了一个完全填充的 Spring 注入的 Action 类！大多数人会说“是的！！！” 在此刻。

我的问题是这不是一个 UNIT 测试类，它现在一直调用到 DB 层，因为这就是它在运行时的连接方式。

所以这是我的问题，我知道我花了一些时间来解决它，**是否有可能获得一个可以访问所需资源的 Action 类（对于方法调用，例如 getText()），但不是所有的 Spring连线？**

目前，我很想走反射路线以删除所有与我的操作匹配的 setServicexxxx 方法，至少那时我会在运行测试时得到 NullPointerException 并且我可以模拟该服务，但那是错误的。我希望我的测试很快，而不是花 2 秒来启动 Spring 上下文。

Struts2.3 是如何产生一个不遵循单元测试的口头禅的基础测试类的？

这在 Struts 2.0.9 (xwork-2.0.3.jar) 中一切正常。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:48:30.697

您确实应该尽可能快地进行单元测试（否则，没有 TDD）。所以你应该做最小的struts设置：（我正在使用mockito，我在一个静态块中有这个代码，这个[gist](https://gist.github.com/2948345)中的完整代码）

```
ActionContext actionContext = mock(ActionContext.class);
ServletContext servletContext = mock(ServletContext.class);
when(actionContext.getLocale()).thenReturn(Locale.FRENCH);
ValueStack valueStack = mock(ValueStack.class);
Map<String, Object> context = new HashMap<String,Object>();
Container container = mock(Container.class);
XWorkConverter conv = mock(XWorkConverter.class);
when(container.getInstance(XWorkConverter.class)).thenReturn(conv);
when(conv.convertValue(any(Map.class), any(Object.class), any(Class.class))).thenAnswer(new Answer<Object>() {
    public Object answer(InvocationOnMock invocation) throws Throwable {
        log.info(invocation.getArguments()[1].toString());
        return "VALUE";
    }

});
context.put(ActionContext.CONTAINER, container);
when(valueStack.getContext()).thenReturn(context);
when(actionContext.getValueStack()).thenReturn(valueStack);
ServletActionContext.setContext(actionContext);
ServletActionContext.setServletContext(servletContext); 
```

# django - Django ORM - 具有外键关系的 UpdateView 表单首字母

> ID：10756592
> 
> 赞同：0
> 
> 时间：2012-05-25T14:51:28.307
> 
> 标签：django, django-models, django-forms, django-orm

考虑这些伪模型：

```
class City(models.Model):
    name = models.CharField()
    region = models.ForeignKey(Region)

class Region(models.Model):
    name = models.CharField()
    country = models.ForeignKey(Country)

class Country(models.Model):
    name = models.CharField() 
```

和这样的表格：

```
class MyForm(forms.Form):
    city = forms.CharField()
    region = forms.CharField()
    country = models.CharField() 
```

我希望我的 UpdateView 显示当前值，所以我设置了一个初始值，如下所示：

```
model_initial = City.objects.filter(id=self.object.id).values()[0]

form = MyForm(initial=model_initial) 
```

这有点愚蠢，因为 self.object 已经可用，所以我可以手动进行值映射

无论如何，这可行，但没有捕捉到关系，所以我可以这样做：

```
model_initial = City.objects.filter(id=self.object.id).values()[0]
model_initial.update({'region':Somequery, 'country':Somequery})

form = MyForm(initial=model_initial) 
```

但这将非常令人讨厌并且可能不需要。我试图看看 select_related 给了我什么，但在该查询上调用 values() 并不会返回额外的字段。

所以，问题：在这种情况下构造初始字典的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:28:01.023

在 Python 中，“nice”通常意味着“简单易读”，所以我个人会喜欢这样的东西：

```
city =  self.object
initial = dict(
  name=city.name, 
  region=city.region.name, 
  country=city.region.country.name
  ) 
```

但 ModelForm 也可能是一个很好的解决方案......

# ruby-on-rails - 计算 habtm 关联中的项目

> ID：10756594
> 
> 赞同：1
> 
> 时间：2012-05-25T14:51:30.020
> 
> 标签：ruby-on-rails

我不知道它是什么，但我似乎无法弄清楚

我坚持的是，我有两个模型，它们之间有一个 HABTM 关联。

```
class Event < ActiveRecord::Base
  has_and_belongs_to_many :users
end

class User < ActiveRecord::Base
  has_and_belongs_to_many :events
end 
```

所以当我创建一个事件时，有几个用户与之关联。假设用户 1 和 2 有 3 个他们一起参加的活动。现在我想计算这些实例。所以我想让3号回到我身边。

我想这应该很简单，但我无法弄清楚，有人可以指出我正确的方向吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:13:46.193

如果您要查找具有 2 个共同用户的所有事件，您可以查询所有事件，然后为每个用户过滤结果。

```
user1 = User.find(1)
user2 = User.find(2)
events = Event.all
common_events = events.select {|e| e.users.include?(user1) and e.users.include?(user2)} 
```

该变量`common_events`将包含 user1 和 user2 都参加的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T16:54:05.693

如果你想知道两个用户的公共事件的数量，那么，没有花哨的 SQL 你可以这样做：

```
events1 = User.find(1).events.scoped
events2 = User.find(2).events.scoped

common_events_count = Event.where(id: events1).where(id: events2).count 
```

# c++ - 证书友好名称

> ID：10756601
> 
> 赞同：1
> 
> 时间：2012-05-25T14:51:50.400
> 
> 标签：c++, certificate, cryptoapi

当我使用以下代码将证书存储在机器上时，我试图在证书上设置友好名称：

```
CRYPT_DATA_BLOB fName = {_tcslen(FriendlyName) * sizeof(TCHAR), FriendlyName};
CertSetCertificateContextProperty(certContext, CERT_FRIENDLY_NAME_PROP_ID, 0, &fName)); 
```

显然，FriendlyName 是指向友好名称的 LPWSTR，而 certContext 是将证书保存在商店中的有效证书上下文。该功能正常工作，并将名称写入证书。但是，当我在证书管理单元中查看它时，名称的最后一个字母被截断。我试过在名字的长度上加一个，最后把名字减半。我检查了 FriendlyName 和长度，以确保它们正确无误。如果我将 FriendlyName 更改为 LPSTR，它会显示为 Kanjii 字符。在 Microsoft 提供的示例中，他们执行以下操作：

```
BYTE *pName = (BYTE *)"Temp Name.";
CRYPT_DATA_BLOB  Friendly_Name_Blob={32,pName}; 
```

我不知道他们从哪里得到 32，也没有提供我能找到的解释。当我使用 32 时，它再次截断名称。知道我做错了什么以及如何纠正吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:59:30.810

[要使用CertSetCertificateContextProperty](http://preview.library.microsoft.com/en-us/library/aa376573%28v=vs.85%29.aspx)设置`CERT_FRIENDLY_NAME_PROP_ID`属性，您需要先初始化，然后将其用作. 该代码可能与以下内容有关：`CRYPT_DATA_BLOB``CertSetCertificateContextProperty`

```
LPWSTR pszFriendlyName = L"My test friendly name";
CRYPT_DATA_BLOB cryptBlob;
BOOL bResult;

cryptBlob.cbData = (lstrlenW(pszFriendlyName) + 1)*sizeof(WCHAR);
cryptBlob.pbData = (PBYTE)pszFriendlyName;

// pCertContext should be set before
bResult = CertSetCertificateContextProperty (pCertContext,
                                             CERT_FRIENDLY_NAME_PROP_ID,
                                             0, (LPVOID)&cryptBlob);
if (!bResult) {
    // error
} 
```

# grails - 如何搜索 grails 插件源

> ID：10756602
> 
> 赞同：1
> 
> 时间：2012-05-25T14:51:52.693
> 
> 标签：grails, intellij-idea

我想搜索链接的插件源。我如何配置 Idea 来做到这一点？是否可以默认使所有 grails 依赖项/插件可搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:18:35.040

标准`Find in Path`（`Control`+ `Shift`+ `F`）也会在插件源中搜索，如果您选择`Custom`范围`Project and Libraries`

# jstl - 迁移到 jdev 11g 时出现 jstl 错误

> ID：10756605
> 
> 赞同：0
> 
> 时间：2012-05-25T14:52:17.053
> 
> 标签：jstl, weblogic-10.x, jdeveloper

我正在尝试将项目迁移到 weblogic 10.3 (jdev 11g)。该项目运行成功，我唯一要做的就是更新创建 ear 的构建脚本并将其上传到服务器。

但奇怪的是，代码突然停止工作。要么找不到 jstl 标签库，要么标签库有多个版本。我已经努力但无法解决它。我得到的错误是：

```
java.lang.NoSuchFieldError: deferredExpression
    at org.apache.taglibs.standard.tag.common.core.ForEachSupport.release(ForEachSupport.java:196)
    at jsp_servlet._login.__login._jspService(__login.java:350)
    at weblogic.servlet.jsp.JspBase.service(JspBase.java:34)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at myFilters.loginFilter.doFilter(loginFilter.java:74)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:413)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter.java:111)
    at java.security.AccessController.doPrivileged(Native Method)
    at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:313)
    at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:413)
    at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:94)
    at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:161)
    at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:71)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:136)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3715)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178) 
```

提前致谢。我相信很多人在迁移时一定遇到过这个 jstl 问题。此外，在导入代码时，我没有选择迁移到 jstl 1.1/1.2：在迁移大多数项目时，我确实获得了升级 jstl 的选项。可能这个项目已经在使用最新的 jstl。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T20:18:13.340

WebLogic 已经捆绑了 JSTL。webapp 在部署到 WebLogic 时不需要捆绑它。这个特殊的异常表明您的 web 应用程序仍然捆绑了 JSTL，它的版本比 WebLogic 提供的版本旧。

您需要从 webapp 的文件夹中**删除所有 JSTL 库。**`/WEB-INF/lib`这包括`jstl.jar`and`standard.jar`或`jstl-api.jar`and`jstl-impl.jar`取决于版本。

# c# - Chrome 认为 FB 对话是弹出窗口并阻止它们

> ID：10756607
> 
> 赞同：0
> 
> 时间：2012-05-25T14:52:25.140
> 
> 标签：c#, facebook, google-chrome, unity3d, popup

好吧。我正在使用 Unity(C#) 开发 Facebook 游戏。由于某种原因，用户第一次尝试执行应用程序请求时，chrome 会阻止 fb 对话框作为弹出窗口。IE、FF、Opera 和 Safari 不这样做。现在，如果用户第一次使用另一个浏览器授予权限。所有后续的应用程序请求都可以在 chrome 中正常工作。

现在很明显，如果我只是一个用户，我会把它列入白名单。但作为一名开发人员，我的任务是找出原因并解决这个问题。我已经通过谷歌结果以及堆栈溢出的线程进行了清理，但找不到任何类似的东西。

您需要更好地帮助的任何代码或其他信息，让我知道，我会发布它。

谢谢，

戈登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:34:10.193

...评论！=回答...

在这里要清楚：

*   呼叫来自 Unity Web Player 中的单击
*   它调用 Application.ExternalCall() 方法以调用已注入画布的 Facebook Javascript SDK

是否有任何明显的 Javascript 错误？

# python - 使用 Python 的 Selenium Webdriver (Selenium 2) 中的显式等待和隐式等待问题

> ID：10756609
> 
> 赞同：5
> 
> 时间：2012-05-25T14:52:30.347
> 
> 标签：python, selenium-webdriver

我必须使用一些非常慢的代理，并且时不时地被卡住。因此，我正在尝试为此找到解决方案/解决方法，这是我的问题：

```
from selenium import webdriver
from selenium.webdriver.support.ui import WebDriverWait

browser = webdriver.Firefox()
browser.get("http://whateversite.com")

element = browser.find_element_by_id("element")
element.click() # go to page http://whateversite.com/page.html

new_element = browser.find_element_by_id("newElement") 
```

无论您是`browser.implicitly_wait(30)`事先设置还是使用`new_element = WebDriverWait(browser, 30).until（lambda browser : browser.find_element_by_id("newElement"))`它都会卡住，有时会持续数小时。它似乎在等待该页面`http://whateversite.com/page.html`完全加载，在某些极端情况下可能需要数小时。

我应该怎么做才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T17:02:34.333

我还没有看到这个问题的好答案，所以我想我会给出我的解决方案。我在使用 selenium 时遇到过很多次这种情况，尽管它是 hack-y，但我使用的是 expect。expect 是一种非常简单的基于 tcl 的语言，它可以让您轻松地生成其他程序并等待输入或超时并执行某些操作。所以基本上我没有使用 sel 的等待，而是创建了一个使用 python 的 sleep 等待的函数：

```
import time

def wait(waittime=30):
  print 'kick'
  time.sleep(waittime)

.. 
```

然后我创建run.exp：

```
set timeout 30
set try 0

while 1 {
    spawn /usr/bin/python test.py
        while 1 {
            expect "kick" {exp_continue}
            timeout {
                if {$try > 5} {
                    exit
                }
                incr try
            }
        }
    }
} 
```

就是这样，它通常工作得很好，基本上它会在挂起时尝试​​重新启动程序。5次尝试后它会杀死自己。您还可以对如何在不同状态下重新启动程序等进行更多控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:39:39.530

尝试使用不稳定的加载策略。例如` 您可以在[http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#current-document-readiness](http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#current-document-readiness)`FirefoxProfile profile = new FirefoxProfile();` `profile.setPreference("webdriver.load.strategy", "unstable");` `WebDriver driver = new FirefoxDriver(profile);`找到更多信息

也试试这个。driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS); [http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#pageLoadTimeout%28long,%20java.util.concurrent.TimeUnit%29](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#pageLoadTimeout%28long,%20java.util.concurrent.TimeUnit%29)

# jquery - Rails 和 jQuery Ajax (POST) - 错误响应

> ID：10756611
> 
> 赞同：0
> 
> 时间：2012-05-25T14:52:35.347
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, post

我正在构建一个 Rails 应用程序，并且正在尝试使用 jQuery 进行 AJAX 调用。当我执行 AJAX 调用 (POST) 时，我收到来自我的方法的错误。但我不知道问题是什么:(

当我使用“GET”方法时一切正常，但是当我将其更改为“POST”时，我收到了错误（是的，我更改了 route.rb :)）

jQuery

```
$.ajax({
  url: "/login/checkLogin/",
  dataType: "json",
  data: data,
  type: 'post',
}).done(function(response){
  console.log(response);
}) 
```

方法

```
ldap = Net::LDAP.new
ldap.host = "***"
ldap.port = ***
ldap.auth %[#{params[:login_username]}], params[:login_password]

if ldap.bind
 session['loggedin'] = true
 respond_with "1".to_json
else
 session['loggedin'] = false
 respond_with "0".to_json
end 
```

错误消息（来自控制台）

```
undefined method `"0"_url' 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:27:15.287

它是 Rails 魔法的背后 :) 默认情况下，如果没有给定块或模板不可用，Rails 使用[ActionController::Responder来处理 respond_with。](http://apidock.com/rails/ActionController/Responder)对于 'POST' 方法（REST 'create'）和 xml 和 json 等非 html 格式，它会生成带有编码资源、状态代码 (:success) 和资源位置的响应。因此它会尝试找出您传递的资源的 URI，并在这一步失败。

只需传递`:location => nil`选项以覆盖默认值，或使用显式`respond_to`块

```
respond_with "0".to_json, :location => nil 
```

或者

```
respond_to do |format|
  format.json {render :json => "0".to_json}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:07:21.453

尝试`contentType: "application/json; charset=utf-8",`输入 $.ajax({...})

# android - AsyncTask / Android Threading 适合初级 android 程序员

> ID：10756612
> 
> 赞同：0
> 
> 时间：2012-05-25T14:52:35.560
> 
> 标签：android, multithreading, json, android-listview, android-asynctask

我正在开发一个安卓应用程序。它必须从基于 json 的互联网上读取一些提要。好吧，我现在已经弄清楚了那部分。但是当我测试我的应用程序时，应用程序会卡在它正在下载提要的部分。UI 卡住了几秒钟。

我已经弄清楚我需要使用 android 中的 AsyncTask 类来在后台运行连接。我已经阅读了很多关于这个主题的文章，我几乎可以梦想这个理论。现在把它付诸实践，它给我带来了一点问题。

该应用程序现在有一堆类，但处理提要下载并将检索到的数据放入 listView 的类（活动）。该类称为 KVONieuws （荷兰语为 KVO - NEWS），这是来源：

```
package com.appsoweb.kvodeventer;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.appsoweb.kvodeventer.JSONfunctions;
import com.appsoweb.kvodeventer.KVONieuws;
import com.appsoweb.kvodeventer.R;

import android.app.ListActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class KVONieuws extends ListActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        JSONObject json = JSONfunctions.getJSONfromURL("http://crossalertdeventer.nl/api/news.json");

        try{

            JSONArray  earthquakes = json.getJSONArray("items");

            for(int i=0;i<earthquakes.length();i++){                        
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = earthquakes.getJSONObject(i);

                map.put("id",  String.valueOf(i));
                map.put("name", "Titel:" + e.getString("title"));
                map.put("image", "Image: " +  e.getString("image"));
                mylist.add(map);            
            }       
        }catch(JSONException e)        {
             Log.e("log_tag", "Parsing error "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.singlelistitem, 
                        new String[] { "name", "image" }, 
                        new int[] { R.id.item_title, R.id.item_subtitle });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                Toast.makeText(KVONieuws.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            }
        });
    }
} 
```

现在我在这里创建了另一个名为 JSONfunctions.java 的类来处理故事的 JSON 部分：

```
package com.appsoweb.kvodeventer;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONfunctions {

    public static JSONObject getJSONfromURL(String url){
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                httppost.setHeader("User-Agent", "9fb01091b51527555d1d3fc87709918f");
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }

      //convert response to string
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }

        try{

            jArray = new JSONObject(result);            
        }catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
        }

        return jArray;
    }
} 
```

现在我已经用这段代码做了很多尝试，以使（重的部分）在后台作为线程运行，并且我理解它的理论，但我无法让它工作。而且我不知道为什么....

有没有人可以简单地调整我的代码或提供指向在何处实现内部类可能扩展 AsyncTask 类的指针，并给出关于将哪些代码放在后台运行方法和 onpostexecute 中的位置的想法。 ..

感谢任何会帮助我的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:55:13.927

调用`new MyRssReadTask().execute();`onCreate 方法...

[看到这个链接](http://samir-mangroliya.blogspot.in/p/android-customized-listview.html)

```
 class MyRssReadTask extends AsyncTask<Void, Void, JSONObject> {
        ProgressDialog waitingDialog;
        @Override
        protected void onPreExecute() {
            waitingDialog = new ProgressDialog(KVONieuws.this);
            waitingDialog.setMessage("Loading...");
            waitingDialog.show();
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(Void... unused) {

           JSONObject json = JSONfunctions.getJSONfromURL("http://crossalertdeventer.nl/api/news.json");

            return json;
        }

        @Override
        protected void onPostExecute(JSONObject objJson) {
            super.onPostExecute(result);
            if(waitingDialog.isshowing()){  
            waitingDialog.dismiss();}

           //do stuff here 
            JSONArray  earthquakes = objJson.getJSONArray("items");
        }
    } 
```

# facebook - 脸书相册制作不顺畅

> ID：10756613
> 
> 赞同：-1
> 
> 时间：2012-05-25T14:52:37.250
> 
> 标签：facebook, image, facebook-graph-api, upload

我正在尝试将图像上传到 Facebook 相册。现在图像已上传到具有 facebook 应用名称的相册。我想将图像上传到名为“Flowers”的相册。

我正在使用以下代码。

```
<?php
    require_once 'fbpic/library/facebook.php';

    $app_id = "xxxx";
    $app_secret = "xxxxx";
    $facebook = new Facebook(array(
     'appId' => $app_id,
     'secret' => $app_secret,
     'cookie' => true
    ));
    $fbcheck= $facebook->getUser();

    if(is_null($fbcheck) or !$fbcheck or $fbcheck==0)
    {
     header("Location:{$facebook->getLoginUrl(array('scope' => 'user_status,publish_stream,user_photos,photo_upload'))}");

    }

        $facebook->setFileUploadSupport("http://" . $_SERVER['SERVER_NAME']);
        // add a status message
        $photo = $facebook->api('/me/photos', 'POST', 
            array(
                'source' => '@' .realpath("ContactUs.jpg") ,
                'message' => 'It is a programming test'
            )
        ); 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:35:16.803

Facebook 博客文章中的场景 2 应该会有所帮助：[https ://developers.facebook.com/blog/post/498/](https://developers.facebook.com/blog/post/498/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:46:55.763

参考[这个](http://developers.facebook.com/docs/reference/api/album/#photos)

您可以通过使用 publish_stream 权限和以下参数向 ALBUM_ID/photos 发出 HTTP POST 请求来将照片添加到相册。

```
 Parameter   Description         Type                    Required 
    source      Photo content       multipart/form-data     yes
    message     Photo description   string                  no 
```

所以，而不是

```
 $photo = $facebook->api('/me/photos', 'POST', 
            array(
                'source' => '@' .realpath("ContactUs.jpg") ,
                'message' => 'It is a programming test'
            )
        ); 
```

你应该做，

```
 $photo = $facebook->api('/<your_album_id>/photos', 'POST', 
            array(
                'source' => '@' .realpath("ContactUs.jpg") ,
                'message' => 'It is a programming test'
            )
        ); 
```

**ps**
如果您没有指定album_id，facebook 会使用您的应用程序名称为您创建一个相册，如果它已经创建，所有没有album_id 的照片都会进入该相册

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T16:38:54.127

检查相册是否退出。

在 graphurl/{userId}/albums 上做一个。（您也可以使用 FQL 来完成相同的任务）

遍历列表以查看具有名称的专辑是否已经存在。

如果已经退出使用 url graphurl/{albumId}/photos 发布图片

如果相册没有退出，则创建相册。在 $facebookGraphUrl.'/me/albums 上发布一个带有参数名称和描述的帖子。

然后使用相册 ID 在此相册上发布图片。

祝你好运。

# django - （学习）使用您自己的 API 构建用户端站点是一种好习惯，还是让您的 API 与核心功能分开？

> ID：10756616
> 
> 赞同：2
> 
> 时间：2012-05-25T14:52:45.560
> 
> 标签：django, api

我目前正在学习 python/django，我正在构建一个小程序来查找立法者及其在网络中立、专利改革等政治问题上的立场。

在近期内，我想发布一个 API 供人们用来轻松访问我正在收集的数据。主要的查找站点将是一个显示这些信息的 GUI（带有一些额外的花哨，如成绩和历史图表）。

使用自己的 API 是一种好习惯吗？或者它根本不是一种练习（即，如果我这样做会很好，但它并不是真的必要）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:55:55.997

这总是一个好主意。它被称为“dogfooding”（如“吃你自己的 dogfood”）。

主要的危险是您认为您的 api 适用于您的用例，这就足够了。另一方面当然是内部平台效应。

# drupal-7 - EntityMalformedException：学生类型的实体缺少捆绑属性。在 entity_extract_ids()

> ID：10756618
> 
> 赞同：3
> 
> 时间：2012-05-25T14:52:47.437
> 
> 标签：drupal-7, drupal-modules

我创建了一个名为“student”的简单模块，这个模块生成的新实体是“student”，这是我的代码 [在这里下载](http://www.mediafire.com/?ez48n72936i3gvh)

但是当我添加 new student 时，我收到这样的错误消息：

> EntityMalformedException：学生类型的实体缺少捆绑属性。在 entity_extract_ids() 中（C:\AppServ\www\drupal-7.12\includes\common.inc 的第 7501 行）。

我浏览了我所有的代码，但我找不到一些东西，非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T18:10:27.593

这个问题 - ' [Missing bundle property on entity of type file error](http://drupal.org/node/1266620) ' - 可能是导致您的问题的原因。快速检查以确认这一点是按照[评论 #5](http://drupal.org/node/1266620#comment-4938250)中采取的步骤进行的，如下所示：

> 我有同样的问题，这显然是由实体对象中缺少实体类型属性引起的。我查看了我的数据库，发现表“file_managed”有一个字段“type”。我填写了相关实体对象的类型，它可以工作。显然这不是一个真正的解决方案（手动更新数据库），因为存在数百个条目......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-01T15:20:35.610

Drupal 核心`common.inc`文件抛出错误，条件如下：

```
 if (!empty($info['entity keys']['bundle'])) {
    // Explicitly fail for malformed entities missing the bundle property.
    if (!isset($entity->{$info['entity keys']['bundle']}) || $entity->{$info['entity keys']['bundle']} === '') {
      throw new EntityMalformedException(t('Missing bundle property on entity of type @entity_type.', array('@entity_type' => $entity_type)));
    }
    $bundle = $entity->{$info['entity keys']['bundle']};
  } 
```

因此，如果您的 bundle 属性在保存时格式错误，则它会显式失败，因为它无法识别那是什么类型（bundle）。

这可能失败的原因有很多，因此您必须先对其进行分析。

（如果您没有 drush，如果启用了 Devel 模块，您可以在 /devel/php 中运行 PHP 代码）。

1.  通过以下方式检查实体信息数组中定义的数组部分的值是什么`bundle`：`entity keys`

    ```
    drush eval 'print_r(entity_get_info("student"));' 
    ```

2.  如果是`type`，那么这意味着您要保存的实体，它缺少`type`属性。

常见的错误通常是通过[entity_load()](https://api.drupal.org/api/drupal/includes%21common.inc/function/entity_load/7)加载实体并尝试重新保存它，但请记住，返回值是由其 id 索引的实体对象数组。

因此，验证您的实体重新保存是否正常工作的简单测试是：

```
drush eval '$entity = entity_load("student", array(1)); entity_get_controller("student")->save(reset($entity))' 
```

其中 student 是您的`entity_type`，`1`是您的实体 ID。

`entity_info_cache_clear()`如果还是不行，清除缓存`common.inc`（`var_dump($entity);``$entity``type`

* * *

有关更多可能性和详细信息，请查看：[如何调试 EntityMalformedException？](https://drupal.stackexchange.com/q/111610/1908)在做

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-13T10:44:33.113

In my case, the problem was when I tried to save a node of one type with nid of another. I just needed to check if the nid type was actuallly what the type of the node being saved/updated.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T15:24:05.540

我对模块[用户导入](http://drupalmodules.com/module/user-import)有同样的问题。我通过用户导入模块的[这个补丁解决了它。](https://drupal.org/node/1887106)我希望这个解决方案可以帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-15T22:18:59.420

EntityMalformedException：文件类型的实体缺少捆绑属性。在 entity_extract_ids()

对于我们的情况，用户帐户本身就是问题！

出于某种原因，用户访问权限一旦添加就消失了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-19T16:08:24.353

添加

`var_dump(debug_backtrace());`

错误之前的行，那么您将获得更多错误信息。这可能会帮助您解决这个问题。

并检查表映射ID，其中一些缺失...

# c++ - C++ 中的库和导出静态变量

> ID：10756624
> 
> 赞同：1
> 
> 时间：2012-05-25T14:53:21.503
> 
> 标签：c++

想象一下我有这样的图书馆：

图书馆.h

```
 class DLLEXPORT LibraryClass
    {
    private:
      int _id;
      static int _last_id;
    public:
      LibraryClass();
      bool operator == (const LibraryClass t)
      {return _id == t._id;}
    }; 
```

图书馆.cpp

```
#include "Library.h"

int LibraryClass::_last_id = 0;

LibraryClass::LibraryClass()
_id(_last_id)
{
++_last_id;
} 
```

它会正确工作吗？我在 Visual Studio 中收到 C4835 警告，但它似乎有效。有谁知道它将如何在其他编译器上工作（我对 linux gcc 和 mac gcc 感兴趣）？这种模式是否有另一种“有效”实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:07:11.343

您的语法很好，这不会导致您的代码出现任何问题；我认为您在编译时不会在 UNIX/MAC 系统上看到任何警告（除了您正在执行面向 Windows 的 DLL 导出这一事实）。我相信您只是看到托管 C++ 的后果。

来自 MSDN：

> **'variable' ：在主机程序集中首次执行托管代码之前，不会运行导出数据的初始化程序**
> 
> When accessing data between managed components, it is recommended that you not use native C++ import and export mechanisms. Instead, declare your data members inside a managed type and reference the metadata with #using in the client. For more information, see #using Directive (C/C++).

Your static data member will be in the initialized test segment of your program when compiled on unix. It is guaranteed to be initialized to the value you provided prior to execution, so it will start at 0, and it will be completely usable in your constructor by the time it is invoked.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:07:15.963

From the [documentation](http://msdn.microsoft.com/en-us/library/ms173716%28v=vs.80%29.aspx) it seems that the issue only arise if you attempt to use the value in the initialization phase (prior to `main`). Apparently an issue related to *managed mode*.

The C++ Standard is very clear regarding this: `_last_id` it will be first statically initialized to `0` prior to any dynamic initialization, meaning that any conformant compiler will produce code that works as you would expect.

Therefore, it will work with gcc and clang (whatever the OS).

For Visual Studio, I am not sure (not savvy enough) if the issue will appear systematically or only if you require the *managed mode* with some flags.

# ruby-on-rails - 初始化程序或 Gem 未加载 Unicorn 导致 500 内部服务器错误

> ID：10756626
> 
> 赞同：5
> 
> 时间：2012-05-25T14:53:23.000
> 
> 标签：ruby-on-rails, gem, capistrano, unicorn

我将我的应用程序部署到 Ubuntu VPS。我遵循了“部署到 VPS”railscast。

一切都很顺利，直到我添加了以下 gem： [https ://github.com/marceldegraaf/sisow](https://github.com/marceldegraaf/sisow)

在我的本地开发机器上它就像一个魅力，但在我将它部署到我的生产环境后，rails 应用程序将不再启动（500 内部服务器错误）。

我已经对我的独角兽配置、deploy.rb 和一堆其他文件尝试了一些“调整”，但似乎没有任何效果。

奇怪的是，当我使用：

```
RAILS_ENV=production bundle exec rails c 
```

我可以毫无问题地使用 gem (?)

**独角兽日志**

```
E, [2012-05-25T16:38:14.742805 #27916] ERROR -- : reaped #<Process::Status: pid 5777 exit 1> worker=1
I, [2012-05-25T16:38:14.742998 #27916]  INFO -- : worker=1 spawning...
I, [2012-05-25T16:38:14.746132 #5803]  INFO -- : worker=1 spawned pid=5803
I, [2012-05-25T16:38:14.746557 #5803]  INFO -- : Refreshing Gem list
/home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- sisow (LoadError)
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:251:in `block in require'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:251:in `require'
    from /home/deployer/apps/my_app/releases/20120525140057/config/initializers/sisow.rb:1:in `<top (required)>'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:245:in `load'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:245:in `block in load'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/activesupport-3.2.0/lib/active_support/dependencies.rb:245:in `load'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/engine.rb:587:in `each'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/engine.rb:587:in `block in <class:Engine>'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:30:in `instance_exec'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:30:in `run'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:54:in `each'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/initializable.rb:54:in `run_initializers'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/application.rb:136:in `initialize!'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/deployer/apps/my_app/releases/20120525140057/config/environment.rb:5:in `<top (required)>'
    from config.ru:4:in `require'
    from config.ru:4:in `block in <main>'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from config.ru:1:in `new'
    from config.ru:1:in `<main>'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn.rb:44:in `eval'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn.rb:44:in `block in builder'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:696:in `call'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:696:in `build_app!'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:569:in `init_worker_process'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:589:in `worker_loop'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:487:in `spawn_missing_workers'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:498:in `maintain_worker_count'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:272:in `join'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/bin/unicorn:121:in `<top (required)>'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load'
    from /home/deployer/apps/my_app/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>'
E, [201 
```

**独角兽.rb**

```
app_path = "/home/deployer/apps/my_app"
root = "/home/deployer/apps/my_app/current"
bundle_path = "#{app_path}/shared/bundle"
working_directory root
pid "#{root}/tmp/pids/unicorn.pid"
stderr_path "#{root}/log/unicorn.log"
stdout_path "#{root}/log/unicorn.log"

listen "/tmp/unicorn.my_app.sock"
worker_processes 4
timeout 30

before_exec do |server|                                                         
  ENV["BUNDLE_GEMFILE"] = "#{root}/Gemfile"                               
end 
```

**unicorn_init.sh**

```
#!/bin/sh
set -e

# Feel free to change any of the following variables for your app:
TIMEOUT=${TIMEOUT-60}
APP_ROOT=/home/deployer/apps/my_app/current
PID=$APP_ROOT/tmp/pids/unicorn.pid
CMD="cd $APP_ROOT; bundle exec unicorn -D -c $APP_ROOT/config/unicorn.rb -E production"
AS_USER=deployer
set -u

OLD_PIN="$PID.oldbin"

sig () {
  test -s "$PID" && kill -$1 `cat $PID`
}

oldsig () {
  test -s $OLD_PIN && kill -$1 `cat $OLD_PIN`
}

run () {
  if [ "$(id -un)" = "$AS_USER" ]; then
    eval $1
  else
    su -c "$1" - $AS_USER
  fi
}

case "$1" in
start)
  sig 0 && echo >&2 "Already running" && exit 0
  run "$CMD"
  ;;
stop)
  sig QUIT && exit 0
  echo >&2 "Not running"
  ;;
force-stop)
  sig TERM && exit 0
  echo >&2 "Not running"
  ;;
restart|reload)
  sig HUP && echo reloaded OK && exit 0
  echo >&2 "Couldn't reload, starting '$CMD' instead"
  run "$CMD"
  ;;
upgrade)
  if sig USR2 && sleep 2 && sig 0 && oldsig QUIT
  then
    n=$TIMEOUT
    while test -s $OLD_PIN && test $n -ge 0
    do
      printf '.' && sleep 1 && n=$(( $n - 1 ))
    done
    echo

    if test $n -lt 0 && test -s $OLD_PIN
    then
      echo >&2 "$OLD_PIN still exists after $TIMEOUT seconds"
      exit 1
    fi
    exit 0
  fi
  echo >&2 "Couldn't upgrade, starting '$CMD' instead"
  run "$CMD"
  ;;
reopen-logs)
  sig USR1
  ;;
*)
  echo >&2 "Usage: $0 <start|stop|restart|upgrade|force-stop|reopen-logs>"
  exit 1
  ;;
esac 
```

**宝石文件**

```
source 'http://rubygems.org'

gem 'rails', '3.2.0'
gem "net-ssh", "~> 2.5.1"

# Bundle edge Rails instead:
# gem 'rails',     :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem "cocoon"
gem 'nokogiri'
gem 'hpricot'
gem "formtastic", "~> 2.1.1"
gem "activeadmin", "~> 0.4.4"
gem 'omniauth'
gem 'country-select'
gem "paperclip", "~> 3.0"
gem 'cancan'
gem 'rolify'

gem "meta_search",    '>= 1.1.0.pre'
gem 'bourbon', "~> 2.0.0.rc1"
gem "rails-boilerplate"
gem 'geocoder'
gem 'httparty'
gem 'hashie'
gem 'will_paginate', :git => "git://github.com/mislav/will_paginate.git"
gem 'thinking-sphinx', '2.0.10'
gem 'sanitize'
gem 'feedzirra'
gem "crypt19", "~> 1.2.1"
gem 'wicked_pdf'
gem 'forem', :git => "git://github.com/radar/forem.git"
gem 'thin'
gem 'whenever', :require => false
gem "ckeditor", "3.7.1"
gem 'sisow'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'haml-rails' 
gem 'jquery-rails'

group :development do
    gem 'ruby_parser'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# Use unicorn as the web server
gem 'unicorn'

# Deploy with Capistrano
gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T11:31:36.660

我有完全相同的问题。重新启动独角兽服务为我修复了它：

```
/etc/init.d/unicorn_my_app stop
/etc/init.d/unicorn_my_app start 
```

归功于：[https](https://github.com/jdutil/contact_us/issues/15#issuecomment-7954768) ://github.com/jdutil/contact_us/issues/15#issuecomment-7954768 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:14:55.310

我遇到了完全相同的问题（尽管使用不同的 gem - icalendar）。我尝试了很多东西，但最终帮助我的是重新安装 ruby​​（通过 rbenv），清理 gem，从服务器中删除应用程序，将其添加到我的 unicorn.rb 中：

```
before_exec do |server| 
  ENV["BUNDLE_GEMFILE"] = "/path/to/app/current/Gemfile" 
end 
```

最后从头开始进行新的部署（deply:setup）。

我不是 100% 确定解决方案（最后很混乱），但我希望它也能帮助你。

# twitter - Twitter 状态计数不匹配

> ID：10756632
> 
> 赞同：0
> 
> 时间：2012-05-25T14:53:39.493
> 
> 标签：twitter

我正在按如下方式加载推特状态，而不是 6 个，如果我将其更改为 5 个，我将获得 5 个，因此我将获得 4 个，所以少一个（count=1 给出 0 个状态） [https://twitter.com/statuses /user_timeline/user_timeline.xml?count=6](https://twitter.com/statuses/user_timeline/user_timeline.xml?count=6)

我正在阅读文档，他们提到了转推，我认为我不需要，但是添加这样的参数仍然会给我少一个 [https://twitter.com/statuses/user_timeline/user_timeline.xml?count=6&include_rts=true](https://twitter.com/statuses/user_timeline/user_timeline.xml?count=6&include_rts=true)

到目前为止，我只是加载了比我需要的更多的内容，并且只展示了 6 个，但是有人知道如何正确解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:13:48.903

建议：如果您希望人们提供更好的帮助，请提供更多信息。例如，您使用什么语言？什么环境？给出这个问题的代码也会有帮助。这也将帮助您提供越来越具体的标签，以便具有相关专业知识的人会注意到问题并帮助您。

我对这些信息的想法是数组索引有问题。我不知道你在编码方面有什么经验，所以如果你知道这一切，请不要生气，但是当你使用数组时，索引从 0 开始。所以如果你有一个包含 6 个项目的数组，索引从 0 到 5（0、1、2、3、4、5）。因此，如果您尝试访问元素 1-6 并且您从索引 1 开始，您将只能从索引 1-5 获取项目。那有意义吗？

如果没有，请提供更多信息，我再看看

马特

# php - 未调用 Silverstripe 文件 onAfterUpload 方法

> ID：10756633
> 
> 赞同：0
> 
> 时间：2012-05-25T14:53:45.327
> 
> 标签：php, silverstripe

我添加了 File 的扩展名

```
Object::add_extension('File', 'MyFileDecorator'); 
```

我可以确认正在创建扩展类并且扩展方法`onBeforeWrite`工作正常。

然而，我从来没有看到一个扩展`onAfterUpload`被调用，尽管文档声称它应该在文件上传时被调用。

我曾尝试使用`FileIFrameField`, `FileUploadField`（来自 uploadify）和各种数据对象管理器类，但都无济于事。

通过查看`FileIFrameField`，似乎没有调用，`onAfterUpload`所以我想我的问题是是否有一个我可以使用的字段调用该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:06:40.877

你是对的，看起来它并没有被调用。作为 kick assets 模块的一部分的 Uncle cheese 的 FileAttachmentField 使用它。这是一个不错的文件上传器，但我相信它只适用于 cms。您希望在 cms 或前端实现此功能吗？

[https://github.com/unclecheese/KickAssets](https://github.com/unclecheese/KickAssets)

另一种选择是使用 onAfterWrite 方法

# javascript - js 缺少整数

> ID：10756634
> 
> 赞同：2
> 
> 时间：2012-05-25T14:53:46.603
> 
> 标签：javascript, numbers

Javascript 不能使用 10100401822940525，它就像 Windows 中的“conn”文件夹。为什么 js 会因为这个数字而失败？

您可以查看示例，

[http://jsfiddle.net/ymutlu/yCpWh/1/](http://jsfiddle.net/ymutlu/yCpWh/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:07:31.863

在 IEEE 浮点类型数字中，数字越大，数字之间的差距越大。当您查看[数字的存储](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)方式时，这是有道理的。

考虑到负指数和非负指数的可能值的数量相同。这意味着 0 和 1 之间的可能数字数量与 1 和无穷大之间的数量相同。显然，1 和 Infinity 之间的数字间隔得更远。这个间距实际上是分布的，所以距离 0 越远，可能存储的数字之间的差距就越大（没有真正的最大数字，只是最终你到达了没有数字与无穷大区分开来的地步）。

这实际上效果很好，因为在大多数情况下，在处理较大的数字时您需要的精度较低。`10100401822940524`和之间的差异`10100401822940526`远不如数字大小之间的差异显`1`着`3`。能够表示数字`2`比数字更重要，`10100401822940525`并且您被限制为 64 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T14:59:24.267

我发现了这个： http: [//gskinner.com/blog/archives/2011/03/the-case-of-the-disappearing-number.html](http://gskinner.com/blog/archives/2011/03/the-case-of-the-disappearing-number.html)

不知道他说的对不对，但听起来很有道理。;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T15:03:58.930

这是浮点舍入的一个实例。Javascript 中的数字存储（AFAIK）为双精度浮点数。浮点数的精度有限，所以当数字太大时，它们不能再存储为精确的整数，需要四舍五入。

这是另一个例子，错误更大。[http://jsfiddle.net/NhZ75/](http://jsfiddle.net/NhZ75/)

如果您想知道数学为什么有效，那是因为大多数计算机执行浮点数学运算的精度比存储它的精度高，因此舍入错误通常只发生在您将数字存储在变量中时。

# android - 在资源路径中编码身份验证数据是否正确

> ID：10756635
> 
> 赞同：1
> 
> 时间：2012-05-25T14:53:56.110
> 
> 标签：android, rest

我有一个 RESTFull 服务器和一个 Android 客户端。服务器有一些方法可以将数据返回给客户端的 HTTP 调用。客户端代码中的一种方法是我用来验证客户的下面所示的方法。

```
 HttpClient httpclient = new DefaultHttpClient();
        HttpGet request = new HttpGet(
                "http://localhost:8080/myapp/customer/login/cUser/cpwd");

        request.addHeader("Accept", "text/plain");
        HttpResponse response = httpclient.execute(request);
        HttpEntity entity = response.getEntity();
        InputStream instream = entity.getContent();
        String msg = read(instream);

 if(msg.equals("success"){ // if customer logged in successfully
     //do something
 } 
```

服务器端代码使用上述 uri 的一部分作为用户名和密码并进行身份验证。在我看来，某人很容易访问这些数据并以他/她喜欢的方式使用它。有没有更好的方法来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:08:14.197

是的，攻击者很容易从普通 HTTP 请求中使用的 URL 中提取用户名/密码。您的计划完全容易受到利用和攻击。

请改用[HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure)。这将强制传输连接进行 SSL 加密并防止窥探。您还应该从 URL 中删除凭据，而改用[Basic Authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)之类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:08:23.373

在 RESTfull 服务中，您必须使用 HTTP/1.1 auth 标头，例如：

```
request.addHeader("Authorization", "auth string"); 
```

身份验证字符串可以是基本身份验证字符串：`base64_encode(login+":"+password)`或 OAuth2 身份验证令牌等。

PS Ou bien 使用 SSL 连接，正如 Brian Kelly 所说。

# javascript - 父级通过 POST 发送数据的弹出窗口

> ID：10756636
> 
> 赞同：0
> 
> 时间：2012-05-25T14:54:00.010
> 
> 标签：javascript, ajax, post, popup

这是我的问题：我有一张桌子，里面有一些信息。当我单击一个单元格值（例如：）时，我想创建一个弹出窗口`foo`。此弹出窗口将从 SQL 请求生成信息，其中`foo`需要该值。

总而言之，是否有一个弹出窗口功能，我可以在其中从父窗口发送信息？

只想提一下我尝试了一些，但我只能将静态信息放入其中

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:56:17.503

在您的情况下，最简单的方法是使用 URL 打开弹出窗口，其中 foo 是所需的参数（直接发送到服务器）：[http ://www.javascript-coder.com/window-popup/javascript-window-open .phtml](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)

如果您确实需要在 POST 中发送参数，那么您可以使用`window.opener`（在使用常量 URL 打开弹出窗口后）从子窗口访问父窗口中的 javascript 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:56:41.443

首先，您将通过 ajax 发布数据。然后根据响应，您可以使用所需的 url 弹出新窗口。

# windows - C 运行时库

> ID：10756639
> 
> 赞同：1
> 
> 时间：2012-05-25T14:54:08.413
> 
> 标签：windows, operating-system, runtime

究竟什么是 C 运行时库，谁将`_mainCRTStartup()`函数放入我们的代码中，为什么需要它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:17:33.023

C 运行时库做了两件事：它实现了您可以从 C 程序调用的文档化函数，并且它包含编译器在后台不可见地使用的支持代码。`_mainCRTStartup`是一个幕后支持的例子——它在你的函数被调用*之前*`main`被调用来做一些事情，比如解析命令行。

# c# - 我得到 NullReferenceException

> ID：10756640
> 
> 赞同：0
> 
> 时间：2012-05-25T14:54:11.393
> 
> 标签：c#, asp.net, repeater, nullreferenceexception, urldecode

填充Repeater时我得到NullReferenceException。某些产品功能为空。我在使用UrlDecode（）和kill（）方法时使用了IsNullControl（）方法来避免异常。但我仍然得到错误。

```
 <asp:Repeater ID="rptProducts" runat="server">
        <ItemTemplate>
                <div>
                    <%# Eval("ProductName")%>
                </div>
                <div>
                    <%# kill(Server.UrlDecode(IsNullControl(Eval("ProductFeature").ToString())))%>
                </div>
        </ItemTemplate>
    </asp:Repeater>

    try
    {
        ProductsDataContext pdc = new ProductsDataContext();
        var query = from p in pdc.Products
                    select p;

        rptProducts.DataSource = query;
        rptProducts.DataBind();
    }
    catch (Exception ex)
    {
        Response.Write(ex.Message);
    }

    public static string kill(string val)
    {
        val = val.Replace("<ul>", " ");
        val = val.Replace("<li>", " ");
        val = val.Replace("</li>", "<br/>");
        val = val.Replace("</ul>", " ");
        return val.ToString();
    }

    public static string IsNullControl(string val)
    {
        string space = " ";
        if (string.IsNullOrEmpty(val))
        {
            val = space;
        }
        return space;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:00:12.457

在此代码片段中检查 null 之前，您首先将字段转换为字符串 -->`Eval("ProductFeature").ToString()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:26:23.447

检查 null 如下

```
<%#kill(Server.UrlDecode(Eval("ProductFeature")?? String.Empty))%> 
```

或者您可以更改查询如下

```
 var query = from p in pdc.Products
             select p
             where p!= null; 
```

# android - Android：保存从应用程序拍摄的照片并将其附加到电子邮件

> ID：10756642
> 
> 赞同：0
> 
> 时间：2012-05-25T14:54:12.973
> 
> 标签：android, android-camera, email-attachments

我正在尝试创建一个应用程序，该应用程序在按下按钮时拍照，然后在按下发送按钮时将其附加到电子邮件中。我的代码显示图片已附加到电子邮件中，但是当我检查我发送它的电子邮件时，附件没有发送。图像也没有保存在 SD 卡中。

我在 onCreate() 中调用初始化函数来初始化变量。另外我不知道在哪里放置 SaveImage() 函数，该函数必须在拍摄后保存图像。我把它放在 onActivityResult() 但不起作用。提前致谢！

```
private void initialize() {
    // TODO Auto-generated method stub
    camera = (Button) findViewById(R.id.Picture);
    sendEmail = (Button) findViewById(R.id.SendMessage);
    iv = (ImageView) findViewById(R.id.ImageReturn);
    MessageTyped = (EditText) findViewById(R.id.MessageField);
    sendEmail.setOnClickListener(this);
    camera.setOnClickListener(this);

    pngDir = new File(Environment.getExternalStorageDirectory(),
    // Loose convention inferred from app examples
            "My Images");

    if (!pngDir.exists())
        pngDir.mkdirs();

}

@Override
public void onClick(View v) {

    // TODO Auto-generated method stub

    switch (v.getId()) {

    case R.id.Picture:
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        SaveImage();//<------------------WHERE DOES THIS GO?

        startActivityForResult(i, cameraData);

        break;

    case R.id.SendMessage:

        EditTextToString();

        EmailIntent = new Intent(android.content.Intent.ACTION_SEND);

        EmailIntent.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "bipush.osti@gmail.com" });
        EmailIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                MessageToBeReceived);

        // EmailIntent.setType("message/rfc822");
        EmailIntent.setType("image/jpeg");
        EmailIntent.putExtra(Intent.EXTRA_STREAM, pngUri);

        startActivity(Intent.createChooser(EmailIntent,
                "Choose an Email client :"));
        break;

    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);

    }
}

private void EditTextToString() {
    MessageToBeReceived = MessageTyped.getText().toString();
}

private void SaveImage() {

    File pngFile = new File(pngDir, "jetsam.jpeg");
    // Save file encoded as PNG
    pngUri = Uri.fromFile(pngFile);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:25:08.590

[请参阅ACTION_IMAGE_CAPTURE](http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE)的文档！如果您没有提供 EXTRA_OUTPUT（带有应保存图像的位置的 uri），那么结果您将得到“小尺寸图像作为位图对象返回”。

因此，只需在请求图片时将 uri 添加到 intent 并将相同的 uri 传递给 ACTION_SEND：

```
case R.id.Picture:
    i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    i.putExtra(MediaStore.EXTRA_OUTPUT, getUriForNewFile()); // you have to implement youself getUriForNewFile()

    startActivityForResult(i, cameraData);

    break; 
```

# android - 如何在不同的位置显示 Toast - 2

> ID：10756646
> 
> 赞同：3
> 
> 时间：2012-05-25T14:54:28.400
> 
> 标签：android

我的地图活动显示 n 个叠加层，当我点击叠加层图标时，吐司显示在屏幕底部，但我想在我点击的叠加层图标附近显示吐司。

请指导我，提前谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T05:40:15.577

**这段代码给了我吐司的确切位置……** 这段代码给了我吐司的确切重力……

```
OverlayItem item = overlayItems_.get(index);
Projection projection = mMapView.getProjection();
    Point point = new Point();
    projection.toPixels(item.getPoint(), point);
    Toast toast = Toast.makeText(mContext, item.getTitle()+" "+item.getSnippet(), Toast.LENGTH_SHORT);
    toast.setGravity(Gravity.TOP | Gravity.LEFT, point.x, point.y);
    toast.show(); 
```

我在这里也通过点..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:08:39.970

试试看这里：

[如何在 Android 中更改 Toast 的位置？](https://stackoverflow.com/questions/2506876/how-to-change-position-of-toast-in-android)

它提到了如何使用 setGravity() 定位您的 Toast 消息。您需要使用图钉的 (x,y) 坐标来设置 Toast 的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T15:13:53.837

**定位你的吐司**

标准的 toast 通知出现在屏幕底部附近，水平居中。`setGravity(int, int, int)`您可以使用该方法更改此位置。这接受三个参数：一个重力常数、一个`x-position offset`和一个`y-position offset`。

例如，如果你决定 toast 应该出现在左上角，你可以像这样设置重力：

```
toast.setGravity(Gravity.TOP|Gravity.LEFT, 0, 0); 
```

如果要向右微移位置，请增加第二个参数的值。要向下微调，请增加最后一个参数的值。

资料来源：[谷歌开发者](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T15:34:34.920

```
toast.setGravity(Gravity.TOP, 0, 0); 
```

除了 Gravity.TOP，您还可以使用`LEFT`或`RIGHT`

# javascript - getElementById 在 Safari 中返回 null 或 undefined

> ID：10756648
> 
> 赞同：4
> 
> 时间：2012-05-25T14:54:35.343
> 
> 标签：javascript, dom, safari

下面是我尝试在 javascript 中使用 DOM 遍历的一些帧的代码片段。我可以`document.getElementById('raiseConfirm').click()`在 FF 和 IE 中使用。它在野生动物园中不起作用。我尝试了许多不同的方法来尝试使用 ID raiseConfirm 找到锚点。在这种情况下，看起来好像`document.getElementById()`在此框架中找不到任何元素。我试过`window.document`, `self.document`, `contentWindow`, ,`contentDocument`我试过这样`window.frames['gvdd'].document`命名`getElementById()`框架.`undefined``null`

谁能指出我正确的解决方案？

```
 <form method=​"POST" 
        action=​"somescript.asp?CMD=POST&​TODO=TRUE2" 
        id=​"FORMSV2DISPLAY"
        name=​"FORMSV2DISPLAY">​
    <a id=​"raiseConfirm" href=​"#divConfirm" class=​"nyroModal">HERE IT IS​&lt;/a> 
    <div id="divConfirm" style=​"display:​none;​">​…​&lt;/div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:00:02.363

你可以使用jquery：

```
$('#raiseConfirm') 
```

它肯定适用于所有浏览器。这就是 jquery 的魔力 :)

如果你想附加到点击事件：

```
$(document).ready(function () {
    $("#raiseConfirm").click(doSomenthing);
});

var doSomenthing = function () {
    /* Something I do here */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:17:55.900

我之前试过这样说，但它张贴得很奇怪。我能够使用 JQuery 解决这个问题，这就是我所做的。

```
 $("#raiseConfirm").trigger("click"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-24T17:21:41.747

document.getElementById() 在 safari 中不起作用。相反，您需要使用 document.all... 因此，JQuery 出现在所有浏览器都支持的地方。这可能是使用 Javascript 和 JQuery 的主要区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T15:09:56.040

我在 JSFiddle 中试过这个。如果没有 jQuery，我无法让它在 Safari 中工作。

[http://jsfiddle.net/belthasar/Zct4S/](http://jsfiddle.net/belthasar/Zct4S/)

# asp.net - 如果我正在使用 ASP MVC 3，我应该学习哪些新技术？

> ID：10756649
> 
> 赞同：2
> 
> 时间：2012-05-25T14:54:35.967
> 
> 标签：asp.net, asp.net-mvc

一年多来，我一直在使用 ASP MVC3 开发 Web 应用程序，我想知道哪些好的技术/框架值得一看，以提高作为 .NET Web 开发人员的水平。

我已经在使用 jQuery 和 jQuery UI 并且对 knockout.js 进行了一些调查。我会对与其他 .NET 技术（特别是 ASP MVC）很好地集成的东西更感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:08:15.650

*   SquishIt（用于压缩 CSS 和 JS），
*   ActionMailer.Net（用于电子邮件），
*   HTML5 样板（在母版页中），
*   MSpec（用于单元测试），
*   Fluent NHibernate（用于数据库通信 - 实体框架替代方案），
*   Ninject（用于依赖注入）。
*   当您想打包您创建的模板时，Templify 也很好，它会在您开始新项目时节省您的时间......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T14:58:33.797

这对你的样式表来说很酷[http://lesscss.org/](http://lesscss.org/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T14:55:39.600

我想说现在实体框架代码优先和 WCF 是必不可少的。在这个 JQuery 之上，您提到的它也非常有用。

但除此之外，您还应该熟悉（如果还没有的话）单元测试框架（如 NUnit）和模拟框架（如 MoQ）。

如果您想真正进取，那么学习 TDD 和 BDD 技术以及使用敏捷方法是一个加分项。

您还应该很好地掌握 SOLID 原则。互联网上有很多关于此的信息。这将提高代码的质量。

为了提高您编写代码的效率，我建议您使用 ReSharper。

您可以使用许多其他方法来帮助您编写更好的代码或提高效率，例如使用 StyleCop 等工具。

我并不是说所有这些都很棒，而其他一切都不是。我只是说这些是你可以在你的武器库中使用的一些东西。

# spring-mvc - 如何修改 Servlet 响应对象

> ID：10756651
> 
> 赞同：0
> 
> 时间：2012-05-25T14:54:40.003
> 
> 标签：spring-mvc

我正在使用 Spring MVC，并且我有一个业务用例，我需要修改响应对象并在 body 标记的末尾附加一些 html 部分。

我正在使用 Spring HandleInterceptors 并覆盖 afterCompletion 方法。当流到达这里时，响应对象将被填满。

谁能告诉我如何修改响应对象并在正文标记的末尾附加一些 html 内容？

谢谢。

# php - php双时间zome操作

> ID：10756653
> 
> 赞同：0
> 
> 时间：2012-05-25T14:54:52.203
> 
> 标签：php, datetime

我需要通过添加特定的 +/-GMT 值或首先从时间减去 -08:00 然后 +/-GMT 来操作通过 mysql db 生成的日期时间。例如，现在我在 2012-05-25 03:04:28 得到了这个值捕获。我需要第一分钟 -08:00 然后 -06:00？通过 php 实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:04:46.790

你应该在 PHP 的内置`DATETIME`类中大放异彩

```
//create new datetime instance
$dateTime = new DateTime("now", new DateTimeZone('Asia/Kolkata'));
echo $dateTime->format("Y-m-d H:i:s");

//add +1 day
$dateTime->modify("+1 day"); 
```

[DateTime::add()](http://www.php.net/manual/en/datetime.add.php) - 向 DateTime 对象添加一定数量的天、月、年、小时、分钟和秒。
[DateTime::sub()](http://www.php.net/manual/en/datetime.sub.php) - 从 DateTime 对象中减去天、月、年、小时、分钟和秒的数量。

更多信息可以在这里找到[http://php.net/manual/en/class.datetime.php](http://php.net/manual/en/class.datetime.php)

# iphone - 如何在 iOS 中将文本字符串转换为一组折线？

> ID：10756655
> 
> 赞同：4
> 
> 时间：2012-05-25T14:54:58.697
> 
> 标签：iphone, objective-c, ios, fonts, polyline

我有一个字符串，例如“Hello world”和一个字体名称，例如“Courier”。我需要得到一个代表这个字符串的折线数组。这些折线将在 OpenGL 场景中渲染。

我的意思是我需要将每个字母转换成一条或多条二维折线。

如何在 iOS 中执行此操作（Objective-C 或 C++）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T12:55:31.570

您可以使用 Core Text 从文本和字体中获取路径。有一个名为 Core Text 的方法`CTFontCreatePathForGlyph`，它将为您提供给定符号的给定字形的路径。使用它，您可以获得所有字形的路径。

你应该看看[这篇关于“低级文本渲染”的文章](http://www.codeproject.com/Articles/109729/Low-level-text-rendering)。您还可以查看[本文](http://oleb.net/blog/2010/12/animating-drawing-of-cgpath-with-cashapelayer/)的示例代码，了解如何获取文本的路径（并使用 Core Animation 对其进行描边）。

您仍然需要将路径转换为折线（因为路径可能包含圆弧和曲线，而折线只是点列表）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:09:32.000

[FreeType 库](http://freetype.sourceforge.net/index2.html)支持加载各种字体文件（TrueType、PostScript 等）。FreeType 引擎可以加载字体并渲染到位图，但它也可以返回详细的字形信息。

您可以使用该`FT_Outline_Decompose`函数获取一个`FT_Outline`并将其分解为其组成的线、弧和曲线。您只需在一个结构中提供一系列函数指针，这些指针`FT_Outline_Funcs`将在大纲处理期间调用。这些函数由您定义，因此您可以简单地将它们转换为最适合您的应用程序的任何格式（例如折线）。

API参考：

*   [`FT_Outline_Decompose()`](http://www.freetype.org/freetype2/docs/reference/ft2-outline_processing.html)

请注意，如果您正在渲染不经常更改的大块文本，则在每一帧渲染和填充一系列曲线非常昂贵。通常的解决方案是选择一个点大小，将所有需要的字形渲染成一个纹理，然后使用纹理图集将字符串渲染成一个四边形。

一些有用的信息发布在关于字体的 OpenGL 常见问题解答之一中，尽管它们也谈到了使用 FreeType。纹理图集技术值得一读：

*   [iPhone SDK 有没有像样的 OpenGL 文本绘图库？](https://stackoverflow.com/questions/512258/is-there-a-decent-opengl-text-drawing-library-for-the-iphone-sdk)

# java - static 关键字在导入 java.lang.System 类中的作用是什么？

> ID：10756657
> 
> 赞同：8
> 
> 时间：2012-05-25T14:55:01.787
> 
> 标签：java, import, package, java.lang.class

`static`导入`System`类时不明白关键字的含义：

```
import static java.lang.System.* 
```

我正在阅读有关 Java 的书，它写在那里：

> 任何不使用该词的导入声明`static`必须以包的名称开头，并且必须以以下任一结尾：
> 
> *   该包中的类的名称
> *   一个星号（表示该包中的所有类）
> 
> 例如，声明导入 `java.util.Scanner;`是有效的，因为`java.util`它是 Java API 中包的名称，并且 `Scanner`是包中的类的名称`java.util`。
> 
> 这是另一个例子。该声明`import javax.swing.*;`是有效的，因为`javax.swing`它是 Java API 中包的名称，而星号指的是包中的所有类`javax.swing`。

我有以下代码：

```
public class Addition {

   public static void main(String[] args) {
      double num;
      num = 100.53;

      num = num + 1000;

      // So when I want to import the whole package java.lang as written in the book, it doesn't work:
      // import java.lang.*;
      // or like this:
      // import static java.lang.*;
      // NetBeans in both cases doesn't see these abbreviated names `out` and throws errors. Why?
      out.print("The result is ");
      out.print(num);
      out.println(" .");
   }
} 
```

当我以这种方式导入时它可以工作：

```
import static java.lang.System.out;
import static java.lang.System.* 
```

但是当我尝试这样做时不起作用：

```
import java.lang.System.out;
import java.lang.System.* 
```

`static`在这种特殊情况下，关键字的含义是什么？

为什么`import java.lang.*;`不导入带有`System`类的整个包？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T14:56:46.203

`static`导入允许您编写以下代码：

```
out.print("The result is "); 
```

而不是这个：

```
System.out.print("The result is "); 
```

参见例如[http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T15:00:48.497

我经常在单元测试中使用静态导入，如下所示：

```
import static org.junit.Assert.*; 
```

这使我可以编写以下代码：

```
assertEquals(2, list.size()); 
```

而不是这段代码：

```
Assert.assertEquals(2, list.size()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T15:17:05.397

静态导入是 Java 编程语言中引入的一项功能，它允许在类中定义为公共静态的成员（字段和方法）在 Java 代码中使用，而无需指定定义字段的类。此功能在 5.0 版中被引入该语言。

该功能提供了一种类型安全机制，可以将常量包含在代码中，而无需引用最初定义该字段的类。它还有助于弃用创建常量接口的做法：只定义常量的接口然后编写实现该接口的类，这被认为是对接口的不恰当使用。

当您使用 static 关键字导入时，这意味着您只是以某种方式将其插入到您的类中，并且您可以像调用自己的类的方法一样使用它的方法。

例如：

```
import static java.lang.Math.*;
import static java.lang.System.out; 
```

和 ：

```
out.println("I have a house with an area of " + (PI * pow(2.5,2)) + " sq. cm"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-16T22:26:36.047

**问题：**

**1）**当我以这种方式导入时它可以工作：

```
a. import static java.lang.System.out;
b. import static java.lang.System.* 
```

但是当我尝试这样做时不起作用：

```
c. import java.lang.System.out;
d. import java.lang.System.*; 
```

**2）**在这种特殊情况下，静态关键字的含义是什么？

**3）**为什么要导入java.lang.*；不导入带有 System 类的整个包？

## -------------------------------------------------- ------------------------------

**答案：**

**1) & 2)**静态导入，**例如（import static java.lang.System.out）**用于从 System 类导入在这种特殊情况下在其他类中声明为*静态的方法或字段。*

```
a. import static java.lang.System.out; //Works because "out" is a static field
b. import static java.lang.System.*; //Works because you are importing ALL static fields and methods inside the System class

c. import java.lang.System.out; //Does NOT work because you are trying to import a static field in a non-static way. (see a.)
d. import java.lang.System.*; //Actually Works because of the * wildcard which allows you to include all imports. 
```

您希望以静态方式导入方法或字段的主要原因是您可以省略对这些方法或字段的所有调用的类规范。所以不要写：

```
System.out.print("Hello");
System.out.print("World"); 
```

只写

```
import static java.lang.System.*   //or   import static java.lang.System.out if you only plan on using the 'out' field.
out.print("Hello");
out.print("World"); 
```

**3)**导入 java.lang.* 是多余的！**Java 会自动隐式地为您导入这个包！:)**是的，它使用它导入 System 类，但不要混淆，除非你将它作为静态导入导入，否则你仍然需要写出很长的路要走：

```
System.out.print("hi"); 
```

# node.js - 如何为 convoy 配置 `require` / `window.$mod.defined` 路径

> ID：10756661
> 
> 赞同：1
> 
> 时间：2012-05-25T14:55:15.590
> 
> 标签：node.js, ember.js, convoy

任何人都知道如何配置 convoy 填充`window.$mod.defined`对象的方式？

我的看起来像：

```
{ 'project-name-dir/src/webapps/subproject-name/core': Object,
  'project-name-dir/src/webapps/subproject-name/main': Object,
  'project-name-dir/src/webapps/subproject-name/user_template': Object,
  'project-name-dir/src/webapps/subproject-name/user_view': Object,
  'ember/application': Object,
  'window/convoy-index': Object,
  ... } 
```

这有一些缺点：

*   我不能用`require('core')`，我必须用`require('project-name-dir/src/webapps/subproject-name/core')`。
*   它揭示了我的项目源代码的结构，我在这方面是一个谨慎的人。

我看到 ember 能够使用短名称，但我希望 - 如果可能的话 - 将管道的定义保留在另一个目录（即`controllers`：）中，而不是资产的来源。

`contacts`我的管道是从附带的示例中复制的`ember.js`，稍作修改：

```
var pipeline = convoy({
  watch: true,

  'project-name-dir/tmp/subproject-name/assets/app.js': {
    packager: 'javascript',
    compilers: {
      '.hbr':    require('ember/packager').HandlebarsCompiler,
      '.js':     convoy.plugins.JavaScriptCompiler,
      '.coffee': convoy.plugins.CoffeeScriptCompiler
    },
    main: './src/webapps/console_component_io/main.js',
    minify: (MODE === 'production')
  }
} 
```

# java - 从属性文件中读取 v/s HashMap 查找

> ID：10756664
> 
> 赞同：5
> 
> 时间：2012-05-25T14:55:21.537
> 
> 标签：java, performance, hashmap

在内存和计算方面，这是访问（键，值）对的一种更有效的方法：使用 properties.getProperty("key") 从属性文件中读取或将整个属性文件加载到开头的 HashMap 中程序然后在HashMap中查找键？

此外，如果重复使用属性中的一个值，是否将值存储在成员变量中并访问它或每次使用 properties.getProperty("key") 查找它会更好？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T14:59:07.103

`properties.getProperty("key")`是从作为 Properties 对象的 Hashtable 中查找的。当您这样做时`Properties.load()`，您从文件中加载条目并将它们存储到扩展 Hashtable 的 Properties 对象中。对属性的每次后续访问都会在 Hashtable 中进行查找。不再有文件 IO。

当然，访问成员变量比从 HashMap 中的键访问值要快一些，但我怀疑这是您在性能上获得任何显着的地方。HashMap 查找是 O(1)，而且非常快。在注意到差异之前，您可能需要数百万次查找。做最适合你的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:04:41.333

实际上在内部`System.getProperty()`使用了一个`java.util.Properties`对象。类`Properties`extends `HashTable<Object,Object>`，所以 sou 不太可能通过显式使用 a 来获得很多性能`HashMap`。

但是，如果您经常使用很少的属性，那么将它们存储在变量中肯定会有所帮助。HashTable/HashMap 查找和变量访问可能都是 O(1)，但是 HashTable 查找肯定有一个更大的常数因子。

# sorting - 我的有序谓词不起作用

> ID：10756665
> 
> 赞同：2
> 
> 时间：2012-05-25T14:55:25.827
> 
> 标签：sorting, scheme, racket

`#t`如果列表`e`是递增排序的，则该函数应该返回。该功能不起作用，我无法修复它。

```
(define (ordered e)
  (if (or (null? e) (> length(e) 1))
      #t
      (if (> (car e) (cadr e))
          #f
          (ordered (cdr e))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:34:32.173

问题中的基本情况是错误的，如果列表的元素少于两个，则简单地声明一个列表是有序的会更容易（并且不易出错）。这就是导致代码出现问题的原因，因为基本情况定义不明确，您的过程在不应该进入第二种情况时进入。当列表的元素少于两个时，您不能使用`cadr`. 要修复您的实现，请执行以下操作：

```
(define (ordered e) 
  (if (< (length e) 2)
      #t 
      (if (> (car e) (cadr e))
          #f 
          (ordered (cdr e))))) 
```

您可以通过 using 更简洁地表达此问题的解决方案`cond`，并且可以避免使用`length`（取决于实现可能是`O(n)`操作），如下所示：

```
(define (ordered e)
  (cond ((or (null? e) (null? (cdr e))) #t)
        ((> (car e) (cadr e)) #f)
        (else (ordered (cdr e))))) 
```

# c++ - SNMP 类型 Unsigned32 的正确编码是什么？

> ID：10756666
> 
> 赞同：5
> 
> 时间：2012-05-25T14:55:26.233
> 
> 标签：c++, windows, linux, snmp, net-snmp

我正在编写一个 SNMP 代理，并且 MIB 定义包括一个 Unsigned32 类型的 OID。

代理的 Unix 实现使用 Net-SNMP 并将 OID 设置为 ASN_UNSIGNED 类型，因为它没有 ASN_UNSIGNED32。当我使用 Wireshark 查看 GET 响应时，它会将其解码为“Gauge32”值。乍一看，这是有道理的，因为根据 RFC 1902，Unsigned32 和 Gauge32 是相同的。

Windows 实现基于 Windows 的 SnmpAPI.lib 并将 OID 设置为 ASN_UNSIGNED32，当我使用 Wireshark 查看 GET 响应时，它会将其解码为“Unsigned32”。这对我来说看起来更好。

为什么这两种实现会在电线上产生不同的结果？

哪个是正确的版本，我怎样才能设法从两个实现中获得相同的版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T09:40:21.703

事实证明，Net-SNMP 使用当前的 RFC 1902 编码，其中 Unsigned32 和 Gauge32 相同，而 Windows 使用过时的 RFC 1442 编码，其中 Unsigned32 和 Gauge32 具有不同的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:16:18.227

如果您在 Windows 上保存 Wireshark 捕获，然后在 Unix 上的 Wireshark 中打开它。然后你可能会看到它显示的类型是什么。Unsigned32 和 Gauge32 在标准中定义是可以互换的，所以在所有的 SNMP 实现中应该没有什么不同。在线路上，它应该传输相同的字节。

# python - 在python时间对象中循环工作日

> ID：10756670
> 
> 赞同：0
> 
> 时间：2012-05-25T14:55:37.073
> 
> 标签：python, datetime, strptime

我有一个司机旅行日记的数据集。对于每次旅行，在 csv 文件中都有相关的开始时间、结束时间和星期几。没有与旅行相关的日期。

我现在已将数据输入 python，其中每个开始时间和结束时间都附有工作日，如下所示：

```
time.struct_time(tm_year=1900, tm_mon=1, tm_mday=1, tm_hour=23, 
                 tm_min=45, tm_sec=0, tm_wday=0, tm_yday=1, tm_isdst=-1)

print journey['BeginTime'][2].tm_wday, journey['BeginTime'][2].tm_hour 
```

星期一返回 0，每小时返回 23。

这些旅行中有 11,000 次，我想要获得的是每周根据一天中的时间驾驶的汽车数量的概况。

这可以通过计算在指定时间间隔内各自的 ['BeginTime'] 和 ['EndTime'] 间隔之间的行程次数来推断。五分钟的间隔就足够了，因为数据是最接近的五分钟。

有没有一种优雅的python方式来做到这一点？就像是：

```
for fiveMinutes in Week:
count = 0
    for trip in range(len(journey['BeginTime']):
        if journey['BeginTime'][trip] == fiveMinutes
               or (journey['BeginTime'][trip] < fiveMinutes 
                   and journey['EndTime'][trip] > fiveMinutes):
           count = count + 1
carCount[fiveMinutes] = count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:48:23.490

如果这有帮助，这里有一个想法......

```
from datetime import datetime, timedelta

# This does not check for crossing from Sunday to Monday
def convert_dt(start_dt, journey):
    begin_weekday, begin_hour, begin_minute = journey[0]
    end_weekday, end_hour, end_minute = journey[1]

    begin_dt = start_dt + timedelta(days=begin_weekday)
    begin_dt += timedelta(hours=begin_hour, minutes=begin_minute)

    end_dt = start_dt + timedelta(days=end_weekday)
    end_dt += timedelta(hours=end_hour,minutes=end_minute)
    return (begin_dt, end_dt)

def get_slot_journeys(start_dt, journeys):           
    next_dt = start_dt
    slot_count =  60/5 * 24 * 7
    slot_dict = {}

    journey_dts = []
    #convert journey begin and end to datetimes
    for index in range(len(journeys['begin_weekday'])):
        next_journey = [(journeys['begin_weekday'][index],
                         journeys['begin_hour'][index],
                         journeys['begin_minute'][index],),
                        (journeys['end_weekday'][index],
                         journeys['end_hour'][index],
                         journeys['end_minute'][index],)
                       ]
        journey_dts.append(convert_dt(start_dt, next_journey))

    for slot in range(slot_count):
        slot_dict[next_dt] = 0
        for journey_start, journey_end in journey_dts:
            if next_dt >= journey_start and next_dt <= journey_end:
                slot_dict[next_dt] = slot_dict[next_dt] + 1                    

        next_dt += timedelta(minutes=(5))

    return slot_dict

if __name__ == "__main__":
    start_dt = datetime(2012, 1, 2, 0, 0)    

    journeys = {'begin_weekday': [0, 0],
                'begin_hour': [14, 18],
                'begin_minute': [20, 30],
                'end_weekday': [0, 1],
                'end_hour': [19, 12],
                'end_minute': [15, 55],
               }
    slot_dict = get_slot_journeys(start_dt, journeys)       
    slot_keys = slot_dict.keys()
    slot_keys.sort()

    for key in slot_keys:
        if slot_dict[key]:    
            print key, slot_dict[key] 
```

# java - CMT 中的 PersistenceContext 似乎与 BMT 中的 PersistenceContext 不同

> ID：10756673
> 
> 赞同：0
> 
> 时间：2012-05-25T14:55:41.480
> 
> 标签：java, transactions, ejb-3.0

我目前在刷新 PersistenceContext 中的数据时遇到问题。我有一个 CMT EJB3 bean，它调用 BMT EJB3 bean。在 BMT bean 中，我对一个对象执行一些处理逻辑。我提交了更改，我可以看到数据库中的更改。

在我的 BMT 方法中完成该过程后，我返回到我的 CMT bean。我从 PersistenceContext 重新获取（.find() 方法）我的对象（因为 BMT bean 更改了一些值），但我仍然得到我的对象的旧值。我什至尝试了 .refresh() 方法，但数据没有得到更新。

CMT 和 BMT bean 是否可能使用不同的 PersistenceContext？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:56:41.617

持久性上下文通过正在运行的事务传播，除了正常的持久性上下文（例如，非扩展），其 L1 缓存的生命周期被限定在同一个事务中。

因此，如果您在 BMT bean 中启动一个新事务，与它的持久性上下文交互然后提交，那么调用 CMT bean 的持久性上下文中确实不会有更新的值。

不过，从数据库中读取新的值应该可以。因此，如果您在数据库中看到这些更改，特别是如果 CMT 和 BMT bean 都部署在同一个应用程序中（因此没有 L2 不一致影响），那么`refresh`实际上应该可以工作。

对 CMT bean 的新调用会发生什么？那么它会看到更新的值吗？

# php - 将发布的详细信息插入数据库

> ID：10756679
> 
> 赞同：-2
> 
> 时间：2012-05-25T14:55:55.860
> 
> 标签：php, mysql

当用户在我的网站上注册时，他们需要输入个人详细信息。输入的详细信息将添加到我的数据库中的个人详细信息表中。我有以下代码，但它不起作用，我不知道为什么。任何人都可以帮忙吗？我收到错误：查询为空

```
 $myusername=$_POST['username'];
    $mypassword=$_SESSION['mypassword'];
    $firstname = $_POST['firstname'];
    $surname = $_POST['surname'];
    $dob = $_POST['dob'];
    $totalwins = $_POST['totalwins'];
    $totalloses = $_POST['totalloses'];
    $email = $_POST['email'];
    $country = $_POST['country'];
    $info = $_POST['info'];

    // Connect to server and select database.
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");

    $queryreg = mysql_query("

                INSERT INTO $tbl_name VALUES('','','$myusername','$mypassword''$firstname','$surname','$totalwins','$totalloses','$email','$country','$info','$dob' )
        ");

if (!mysql_query($sql))
      {
     die('Error: ' . mysql_error());
      }
      else  {
      echo "<br><br>Your details have been successfully updated. Go back to the                 personal details page to view your updated information.";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:58:42.173

如果您使用具有自动增量的主字段，则应指定字段名称：

```
$queryreg = mysql_query("INSERT INTO $tbl_name (field1,field2,field3 ecc) VALUES( ... )"); 
```

你的代码也容易被注入，uso PDO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:02:12.143

查询为空，因为您在行中没有为 $sql 分配任何值

```
if (!mysql_query($sql)) 
```

要解决，您必须像这样分配它：

```
 $sql = "update  $tbl_name set ...";
  if (!mysql_query($sql)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T15:02:18.897

你的代码有很多东西让我害怕......

更改为以下内容（之后您缺少逗号`$mypassword`并且`$sql`设置不正确）。

```
$sql = "INSERT INTO $tbl_name ( [list columns here besides autoincrement ] ) 
    VALUES 
    ('', '$myusername', '$mypassword', '$firstname', '$surname', 
    '$totalwins', '$totalloses', '$email', '$country', '$info', '$dob' )");

if (!mysql_query($sql)) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T15:03:31.860

首先，您的代码会受到 SQL 注入的影响。请准备好并转义您的帖子数据！这对于防止 SQLinjection 攻击非常重要。请仔细阅读。

然后，由于这个而发生错误

```
if (!mysql_query($sql))
  {
 die('Error: ' . mysql_error());
  }
  else  {
  echo "<br><br>Your details have been successfully updated. Go back to the                 personal details page to view your updated information.";
} 
```

您似乎没有名为 $sql 的变量，并且您正在执行两个查询！

请执行以下操作并发布您的反馈

```
$sql = "INSERT INTO $tbl_name VALUES('','','$myusername','$mypassword''$firstname','$surname','$totalwins','$totalloses','$email','$country','$info','$dob' )";

if (!mysql_query($sql))
  {
 die('Error: ' . mysql_error());
  }
  else  {
  echo "<br><br>Your details have been successfully updated. Go back to the                 personal details page to view your updated information.";
} 
```

# actionscript-3 - Flash AS3 - 向可拖动的影片剪辑添加反射/镜像

> ID：10756684
> 
> 赞同：3
> 
> 时间：2012-05-25T14:56:10.727
> 
> 标签：actionscript-3, reflection, drag, mirror

我需要创建一个仅从 1 个图像创建图案形状的 flash 文件。它需要反射或镜像加载的可拖动影片剪辑 - 随着您在舞台上移动和拖动影片剪辑，反射/镜像会更新。

我遇到过：[http](http://active.tutsplus.com/freebies/actionscript-30-classes/dynamic-reflection-generator-class-for-as3/) ://active.tutsplus.com/freebies/actionscript-30-classes/dynamic-reflection-generator-class-for-as3/ 这与我所追求的非常相似。该演示似乎还不错，但正如评论中的那样，拖动时有很多减速和滞后，尤其是当您拖动的图像开始变大时。

很抱歉问了一些看起来有点多的问题，我不是在寻找完整的解决方案，我只需要首先知道它是否可以完成以及如何实现它？

我希望以下图片可以帮助解释：

**第 1 阶段：** 将用户图案图像加载到舞台上，如下所示：

[http://www.tiltworld.co.uk/yhfus6fh/pattern_1.png](http://www.tiltworld.co.uk/yhfus6fh/pattern_1.png)

**第 2 阶段：** 显示我希望反射如何工作 - 在图案的每一侧有 4 个块：

.../pattern_2.png

（与上面相同的链接只是在最后带有pattern_2.png）

**第 3 阶段：** 让反射适应用户在舞台上拖动图案的位置。在图像中，反射发生在每侧的 4 个块内，而不是直接附加到原始影片剪辑上/旁边。

..../pattern_3.png

（与上面的 2 相同的链接只是在最后带有 pattern_3.png ）

劳伦:)

ps 我下面的当前代码显示当前的第 1 阶段 - 我如何使用 fileReference.load 将模式加载到舞台上，然后 startDrag 将其拖到舞台上。

```
// Create FileReference.
var draggableMC:FileReference;

// Create Loader to hold image content
var draggable_mc_loader:Loader = new Loader();
var draggable_mc_content:Sprite = new Sprite();

// Select Button Function.
select_btn.addEventListener(MouseEvent.CLICK, onselect_btnClicked);

function onselect_btnClicked(event:MouseEvent):void {
draggableMC=new FileReference();
draggableMC.addEventListener(Event.SELECT, onFileSelected);
var imageTypeFilter:FileFilter = new FileFilter("JPG/PNG Files","*.jpeg; *.jpg;*.gif;*.png");
draggableMC.browse([imageTypeFilter]);
}

// File Selected Function.
function onFileSelected(event:Event):void {
draggableMC.addEventListener(Event.COMPLETE, onFileLoaded);
draggableMC.load();
}

// File Loaded Function.
function onFileLoaded(event:Event):void {
var fileReference:FileReference=event.target as FileReference;

var data:ByteArray=fileReference["data"];
var movieClipLoader:Loader=new Loader();
movieClipLoader.loadBytes(data);
movieClipLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onMovieClipLoaderComplete);

draggableMC.removeEventListener(Event.COMPLETE, onFileLoaded);
}

// Load Image onto Stage Function.
function onMovieClipLoaderComplete(event:Event):void {
var loadedContent:DisplayObject=event.target.content;
draggable_mc_loader =event.target.loader as Loader;
draggable_mc_loader.x=10;
draggable_mc_loader.y=10;
draggable_mc_content.buttonMode=true;
draggable_mc_content.addChild(draggable_mc_loader);
addChild(draggable_mc_content);
}

// Drag
draggable_mc_content.addEventListener(MouseEvent.MOUSE_DOWN, drag);
stage.addEventListener(MouseEvent.MOUSE_UP, drop);

function drag(event:Event):void {
draggable_mc_content.startDrag();
}
function drop(event:Event):void {
draggable_mc_content.stopDrag();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:24:24.003

是的，这完全可以做到，您是否尝试过使用他的组件。在查看附加到您链接的组件的 fla 中的代码时，他在 MouseMove 上更新它并不理想，可以在单个帧循环中调度多个移动事件（我相信默认帧速率是 24，所以每 1/24一秒钟将是一个帧循环，并且基于 MouseMove 的更新将不必要地快速）。如果它只是简单地调整为打开一个计时器，该计时器在单击对象后每 10 秒计时一次（鼠标向下然后在鼠标向上或滚动时关闭），而不是尝试为每个鼠标移动事件都这样做显着提高性能。此外，他的代码效率很低，正如他所说，如果您需要针对某些任务对其进行优化，然后对其进行优化，他会免费将其放在那里。他的代码中的其他一些低效率是在方法调用中创建对象，这些对象可以被拉入构造函数，以及在您的示例中这些似乎没有必要的过滤器的使用。今天早些时候偶然发现这篇关于 AS3 优化的帖子，查看 Jason Sturges 的个人资料[除了渲染向量之外，AS3 中的主要性能影响因素是什么？](https://stackoverflow.com/questions/8380789/what-are-the-major-performance-hitters-in-as3-aside-from-rendering-vectors/8380883#8380883)

# c# - C# 在 LYNC 中自动接听电话

> ID：10756690
> 
> 赞同：2
> 
> 时间：2012-05-25T14:56:23.190
> 
> 标签：c#, lync

我想在 LYNC 中自动接听任何来电。

使用 SDK，我可以检测到来电。如果有人通过语音或视频呼叫我，则会调用以下方法。

```
void AVModalityStateChanged(object sender, ModalityStateChangedEventArgs e)
{
    if (e.NewState == ModalityState.Notified)
    {
        // someone is calling me
    }
} 
```

但我现在需要有关如何接听电话的帮助。

我的整个 Lync 连接类可以在这里查看：http: [//www.pastebucket.com/2293](http://www.pastebucket.com/2293)

这将用于会议室环境中，如果只拨电话就足够了，另一端的人不必做任何事情，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T10:28:27.233

你最好的选择是订阅一个在来电时引发的事件，而不是状态变化。这是因为传入事件包含调用对象的句柄，然后您可以使用它来接受调用。

查看[ConversationManager.ConversationAdded](http://msdn.microsoft.com/en-us/library/microsoft.lync.model.conversation.conversationmanager.conversationadded_di_3_uc_ocs14mreflyncclnt.aspx)事件。传入的 IM 和 AV 对话（包括 AV 呼叫）会引发此问题。

要掌握的稍微棘手的一点是，您会收到有关传入*对话*的通知，但它实际上是您想要接受的*呼叫。*不过没关系，因为 Call 对象包含在 Conversation 对象中，该对象是传递的 EventArgs 的一部分。

让我们假设您只想接受 AV 呼叫，而不是 IM 呼叫。因此，您需要做的第一件事是查看您刚刚收到通知的对话是否实际上是 AV 呼叫。`ConversationManagerEventArgs`您可以通过使用从事件传递的来查看对话的模式来判断这一点。`e.Conversation.Modalities`包含传入对话的所有形式。

假设这是一个 AV 电话（并最终回答您的原始问题！），然后您可以通过以下方式接听电话：

`e.Conversation.Modalities[ModalityTypes.AudioVideo].Accept();`

希望这可以帮助。我很快就会写一篇关于这个的博客文章，并提供更多细节，所以我会尽量记住在完成后更新这个答案。

edit: Blog post written with a bit more detail, and is here: [http://thoughtstuff.co.uk/2012/06/answering-the-call-accepting-incoming-calls-in-lync-client-sdk/](http://thoughtstuff.co.uk/2012/06/answering-the-call-accepting-incoming-calls-in-lync-client-sdk/)

# ruby-on-rails - Rails 3 控制台沙盒错误

> ID：10756694
> 
> 赞同：0
> 
> 时间：2012-05-25T14:56:35.827
> 
> 标签：ruby-on-rails

Rails 新手，我想使用*rails 控制台沙箱*测试一些关联。我创建了一个非常基本的应用程序，并且*rails 控制台*工作得很好。

我安装了activesupport gem。

当我运行`$ActiveRecord::Base.configurations[Rails.env]['adapter']`命令时，它报告数据库是 sqlite3 （这是正确的。）

但是当我尝试使用控制台的“沙盒”版本时，我收到以下错误：

```
/Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:45:in `resolve_hash_connection': database configuration does not specify adapter (ActiveRecord::AdapterNotSpecified)
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:39:in `resolve_string_connection'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:23:in `spec'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_specification.rb:127:in `establish_connection'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/railtie.rb:76:in `block (2 levels) in <class:Railtie>'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:42:in `each'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.3/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/base.rb:721:in `<top (required)>'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.3/lib/active_record/railtie.rb:41:in `block in <class:Railtie>'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/railtie.rb:179:in `call'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/railtie.rb:179:in `block in load_console'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/railtie.rb:179:in `each'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/railtie.rb:179:in `load_console'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/engine.rb:429:in `block in load_console'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application/railties.rb:8:in `each'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application/railties.rb:8:in `all'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/engine.rb:429:in `load_console'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/application.rb:153:in `load_console'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/console.rb:27:in `start'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
from /Users/user/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>' 
```

我不太确定这个错误告诉我什么，因为我正确设置了 database.yml 文件并使用标准控制台将数据写入数据库。我也不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:18:05.810

您应该将沙箱作为参数传递

```
rails c --sandbox 
```

否则，rails 认为沙盒是您要在其中运行控制台的环境。

# ruby - 如何检查一个对象在 Ruby 中是否可迭代？

> ID：10756695
> 
> 赞同：36
> 
> 时间：2012-05-25T14:56:37.167
> 
> 标签：ruby

如何检查对象在 Ruby 中是否可迭代？

也就是说，我想要一个干净地检查对象是否可迭代的方法，如下所示：

```
def is_iterable(my_object)
  ..
end 
```

我真的不确定从方法中显式命名类的不足从哪里开始。

**编辑：** 出于我的目的，假设 iterable 是你可以做的事情 .each 。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-25T14:59:07.213

> 就我的目的而言，假设可迭代是您可以做的事情`.each`。

你可以问这个对象是否有这个方法

```
def iterable?(object)
  object.respond_to?(:each)
end 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-05-25T15:23:19.810

您已经得到了一些答案，但这里还有另外两种方法，[Object#is_a?/Object#kind_of?](http://ruby-doc.org/core-1.9.3/Object.html#method-i-is_a-3F) 和[模块#===](http://ruby-doc.org/core-1.9.3/Module.html#method-i-3D-3D-3D)：

```
 [].is_a? Enumerable #=> true
  "".is_a? Enumerable #=> false

  Enumerable === [] #=> true
  Enumerable === "" #=> false 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-25T15:00:37.730

有多种方法可以做到这一点，具体取决于您的更大目标以及您需要对结果做什么。

1.  如果您只想使用鸭子类型来查看对象是否响应**#each**，那么您可以只询问对象是否有这样的方法。

    ```
    my_object.respond_to? :each 
    ```

2.  如果您想了解对象是否混合在 Enumerable 类中，您可以检查该类是否包含。

    ```
    my_object.class.include? Enumerable 
    ```

3.  如果你想要所有祖先和 mixin 的列表，你需要[#ancestors](http://ruby-doc.org/core-1.9.3/Module.html#method-i-ancestors)方法。例如，要查看**my_object**是否继承自 Enumerable 类，您可以调用：

    ```
    my_object = []
    my_object.class.ancestors
    => [Array, Enumerable, Object, PP::ObjectMixin, Kernel, BasicObject]

    my_object.class.ancestors.include? Enumerable
    => true 
    ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-26T00:13:17.857

因为即使在不可迭代时也会`Range`响应，所以您需要专门检查 Range 的元素是否响应`each``succ`

```
def iterable?(object)
  return object.begin.respond_to? :succ if object.kind_of? Range
  object.respond_to? :each
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T15:02:24.623

在一般情况下，您可以检查是否`each`定义了方法，或者`Enumerable`模块是否包含在对象的类中：

```
my_object.class.include? Enumerable 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-11T22:22:35.240

`Minitest``ActiveRecord`-组合对象的样式测试用例：

```
def test_iterates_over_invoice_items
  invoice = Invoice.new(items: [InvoiceItem.new(description: 'test')])

  iteration_count = 0
  invoice.each do |invoice_item|
    assert_equal 'test', invoice_item.description
    iteration_count += 1
  end

  assert_equal 1, iteration_count
end 
```

# iphone - Facebook 之类的免费 IAP 内容

> ID：10756701
> 
> 赞同：1
> 
> 时间：2012-05-25T14:57:12.500
> 
> 标签：iphone, objective-c, facebook, facebook-like

在 Temple Run 的 IAp 商店中，如果您喜欢他们的 Facebook 页面，他们会免费为您提供 250 个硬币。（实际上他们只是将您重定向到他们的 Facebook 页面）

我想为我的应用程序做一些类似的事情。问题是用户应该只能这样做一次。（就像非消耗性 iap 内容一样）我也无法将其保存在应用程序配置中，因为用户可以删除并重新下载应用程序，并且免费内容会再次显示。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:36:48.663

您为什么不记录喜欢您页面的用户，并将其与使用您的应用程序的用户列表交叉引用。

例如，让用户使用 Facebook 登录连接到您的应用程序。然后在您的页面上显示 Like 按钮并订阅`edge.create`事件以在用户喜欢该页面后捕获用户的 ID。这将是奖励积分/硬币等的触发器，也是您在数据库中记录操作以供将来参考的点。

# node.js - 如何使用 mongoose/express 和 ringojs

> ID：10756706
> 
> 赞同：1
> 
> 时间：2012-05-25T14:57:26.847
> 
> 标签：node.js, express, mongoose, ringojs

我已经尝试了 nodejs 一个月，但最后，我不喜欢异步风格的编程。

我刚刚发现[ringojs](http://ringojs.org/)似乎是同步风格的。我想知道我是否可以使用猫鼬并用它[表达](http://expressjs.com/)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:36:39.397

node.js 和 ringo.js 都依赖于[Common.js](https://en.wikipedia.org/wiki/CommonJS)规范，因此很有可能符合模块，至少是基本的。

由于猫鼬依赖本机驱动程序，我不确定 Ringo 是如何处理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:51:32.290

Express 和 Mongoose 基本上都是围绕 Node 构建的，并且在设计上是异步的。Ringojs 是与 Node 不同的野兽。使用来自 Ringo 生态系统的东西。即使您以某种方式让 Express 正常工作，要让它正常工作也可能会遇到很多麻烦。如果 Ringo 在其自己的生态系统中没有任何值得使用的东西，那么在使用它时三思而后行可能是个好主意。

# django - Django：Apache DocumentRoot 不存在

> ID：10756710
> 
> 赞同：1
> 
> 时间：2012-05-25T14:57:41.333
> 
> 标签：django, apache, document-root

我正在尝试使用 mod_wsgi、CentOS 6 在 apache 2.6.6 上运行 Django 1.3.1。

我已经更改了 httpd.conf 文件：

```
WSGIPythonPath /var/www/vhosts/domain.co.uk
<VirtualHost *:80>
  #ServerName domain.co.uk
  ServerName 46...233

  ##DocumentRoot /var/www/vhosts/domain.co.uk/httpdocs

  LogLevel debug
  ErrorLog /var/www/vhosts/domain.co.uk/logs/error.log
  CustomLog /var/www/vhosts/domain.co.uk/logs/access.log combinedio

  HostnameLookups Off

  UseCanonicalName On

  WSGIScriptAlias / /var/www/vhosts/domain.co.uk/sites/somod/apache/django.wsgi
  WSGIDaemonProcess somod:80 user=somod group=psaserv processes=1 threads=1
  WSGIProcessGroup somod:80
  #WSGIPythonPath /var/www/vhosts/domain.co.uk

  Alias /robots.txt /var/www/vhosts/domain.co.uk/sites/templates/robots.txt
  Alias /favicon.ico /var/www/vhosts/domain.co.uk/sites/media/favicon.ico

  <Directory "/var/www/vhosts/domain.co.uk/httpdocs">
    AllowOverride None
    Options -ExecCGI -Includes -FollowSymLinks -Indexes
    Order allow,deny
    Allow from all
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/x-javascript
  </Directory>

  <Directory "/var/www/vhosts/domain.co.uk/sites">
    AllowOverride None
    Options +ExecCGI -Includes +FollowSymLinks -Indexes
    Order allow,deny
    Allow from all
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/x-javascript
  </Directory>

  Alias /media "/var/www/vhosts/domain.co.uk/media"
  <Location "/media/">
    SetHandler None
  </Location>
</VirtualHost> 
```

所以我粘贴了我的 apache 配置（只有我添加的代码）。这是在`/etc/httpd/conf/httpd.conf`.

我现在可以重新启动 apache 而不会出现任何错误，但网站尚不可见。不幸的是，我无法运行`sudo a2enmod wsgi`，我正在使用 cenos 6 并且`a2enmod`不可用。但是我确定它已经安装了，因为我用它订购了 vps，只是不确定它是否正在运行。我会检查它。

我现在的问题是查看网站的网址应该是什么？它是 ServerName 形式的值，还是`ip address/ServerName value`？我可以使用ip地址吗？因为我想在切换域之前运行网站并确保一切正常，因为现在在这个域下是我正在移动到新服务器的网站。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:27:53.610

不知道你在做什么，但这是给你兄弟的示例配置：

```
WSGIPythonPath /var/www/yoursite
<VirtualHost *:80>
    ServerName yoursite.com
    ServerAlias testing.yoursite.com

    Alias /static/ /var/www/yoursite/yourdjangoproject/static/
    # Alias /sitemap.xml /var/www/yoursite/yourdjangoproject/static/sitemap.xml
    WSGIScriptAlias / /var/www/yoursite/yourdjangoproject/wsgi.py

    <Directory />
        AllowOverride None
        Options -Indexes
    </Directory>

    <Directory /var/www/yoursite/.git/>
        Deny From All 
    </Directory>

    LogLevel info
    ErrorLog /var/log/apache2/yoursite-error.log
    CustomLog /var/log/apache2/yoursite-access.log combined
</VirtualHost> 
```

创建此文件并将其命名`yoursite`并将其放在`/etc/apache2/sites-available`. 然后运行`sudo a2ensite yoursite`，它也会被放置 un `sites-enabled`。

这取决于：

*   `apache2`
*   `libapache2-mod-wsgi`

确保通过运行 wsgi 启用`sudo a2enmod wsgi`。

我建议将文件放在版本控制存储库中，然后从`/etc/apache2/sites-available`.

另请注意，我已经为 /static/ 创建了一个别名，如果你想使用它，请确保你运行`sudo ./manage.py collectstatic`. 这会将所有静态文件放在`/var/www/yoursite/yourproject/static`.

祝你好运。

# php - cURL 发布空值（通过 Flash as3）

> ID：10756713
> 
> 赞同：0
> 
> 时间：2012-05-25T14:57:46.127
> 
> 标签：php, actionscript-3, flash, post, curl

所以，我是 cURL 的菜鸟，但由于我在使用 php 通过 flash as3 将数据插入数据库时​​遇到了一些问题（文件位于不同的服务器中），因此建议我使用 cURL 脚本来桥接它们.

所以这是我的 cURL 代码（这是从另一个问题复制粘贴的，我只是更改了值，如果这里有任何明显的错误，请见谅）：

```
<?php

//where are we posting to?
$url = 'url'; //I have the correct url of the file (insert.php) on the other server

//what post fields?
$fields = array(
   'Nome'=>$_POST['nome'],
   'Email'=>$_POST['email'],
   'Idade'=>$_POST['idade'],
   'Profissao'=>$_POST['profissao'],
   'Pais'=>$_POST['pais']
);

//build the urlencoded data
$postvars='';
$sep='';
foreach($fields as $key=>$value) 
{ 
   $postvars.= $sep.urlencode($key).'='.urlencode($value); 
   $sep='&'; 
}

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$postvars);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);
?> 
```

这是闪存 as3

```
function WriteDatabase():void{

    var request:URLRequest = new URLRequest ("curl.php file here"); 

    request.method = URLRequestMethod.POST; 

    var variables:URLVariables = new URLVariables(); 

    variables.nome = ContactForm.nomefield.text;
    variables.email = ContactForm.emailfield.text;
    variables.idade = ContactForm.idadefield.text;
    variables.profissao = ContactForm.proffield.text;
    variables.pais = LanguageField.selectedbutton.text;

    request.data = variables;

    var loader:URLLoader = new URLLoader (request);

    loader.addEventListener(Event.COMPLETE, onComplete);
    loader.dataFormat = URLLoaderDataFormat.VARIABLES;
    loader.load(request);

    function onComplete(event):void{
        trace("Completed");

}
    }
// I am assuming (incorrectly perhaps) that if is called the same way you would call a php file. It also traces "Completed" inside the flash, so it comunicates with it. 
```

我知道它正确地调用了另一个文件，因为它实际上在数据库中创建了一个条目，但一切都是空白的。每个领域。我也知道另一个文件可以工作，因为当我离线测试闪存文件时它可以工作，只是在它在线时不行。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:02:44.073

不要构建自己的查询字符串。cURL 可以接受 PHP 数组并为您完成所有工作：

```
$fields = array('foo' => 'bar', 'baz' => 'fiz');
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields); 
```

curl 不够聪明，无法意识到您已经将字符串编码为 URL 格式，因此它只会看到发布的纯字符串，没有“名称”值。

同样，

```
curl_setopt($ch,CURLOPT_POST,count($fields)); 
```

不是你如何使用它。CURLOPT_POST 是一个简单的布尔值，表示 POST 正在完成。如果您根本没有字段，那么突然 POST 为假，并且您正在使用其他方法，例如 GET，您的客户端应用程序不会期望这种方法。

# php - PHP命令行中的换行符

> ID：10756714
> 
> 赞同：7
> 
> 时间：2012-05-25T14:57:52.723
> 
> 标签：php, newline

我正在通过命令行运行 PHP 脚本并尝试在新行上打印输出。我已经尝试了所有常见的嫌疑人（`\n,\r,\l`），但没有任何效果。我正在通过 SSH 使用 PuTTY 访问我的 Ubuntu 服务器。这是我的代码：

`echo($string.'\r');`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-25T14:59:58.817

您需要使用双引号：

```
echo($string."\r");
             ^  ^ 
```

单引号字符串不支持任何元字符，反斜杠本身除外。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-25T15:08:15.147

您可以连接`PHP_EOL`常量。

```
echo 'Hi, Im great!' . PHP_EOL;
echo 'And Handsome too' . PHP_EOL; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T15:01:24.420

使用双引号**echo "next line\n";**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-09T09:00:02.003

对于命令行脚本，建议使用`PHP_EOL`.

请参考[http://php.net/manual/en/reserved.constants.php](http://php.net/manual/en/reserved.constants.php)

```
PHP_EOL (string)
The correct 'End Of Line' symbol for this platform. Available since PHP 5.0.2 
```

它使您的脚本可以跨平台执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-20T09:34:23.037

接受的答案对我不起作用。我的尝试是`"\r\n"`

```
echo 'This is some text before newline';
echo "\r\n"."text in new line";
//OR

echo 'This is some text before newline'."\r\n"."text in new line"; 
```

cmd输出将是：

这是换行符之前的一些文本

换行中的文本

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-27T12:03:47.967

PHP有好几种方法。但我认为这是你需要的

```
echo $array."<br>"; 
```

# sql - SQL Server：如何模仿oracle保持dense_rank查询？

> ID：10756717
> 
> 赞同：8
> 
> 时间：2012-05-25T14:58:01.020
> 
> 标签：sql, sql-server, oracle

我有一个 Oracle 查询

```
select max(m.id),
       m.someId keep (DENSE_RANK FIRST ORDER BY m.UpdateDate desc) 
from MyTable m 
groupBy m.someId 
```

对于这样的数据：

```
id UpdateDate someId
1  20-01-2012 10
2  20-01-2012 10
3  01-01-2012 10
4  10-02-2012 20
5  01-02-2012 20
6  01-04-2012 30 
```

将返回给我这个：

```
2 10
4 20
6 30 
```

因此，对于每个 someId，它都会搜索最新的 updateDate 并返回适当的`id`. （如果最新日期有多个 id，则需要最新的 id）。

但是对于 SQL Server，这个查询会以同样的方式工作吗？我是说这个建筑`keep (dense_rank first order by ..)`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T15:20:27.127

我认为您的特定查询不会运行 SQL Server。但是您可以通过以下方式获得相同的结果：

```
SELECT id, SomeId
FROM (  SELECT *, ROW_NUMBER() OVER(PARTITION BY someId ORDER BY UpdateDate DESC, id DESC) Corr
        FROM MyTable) A
WHERE Corr = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-12T17:22:58.543

我返回并返回这个问题和答案。不幸的是，在某些情况下，使用“排名窗口函数”进行迁移变得非常复杂。这些情况是：

1.  Oracle查询的select部分中基于不同顺序的许多KEEP-DENSE_RANK结构
2.  通过分组集/汇总分组

因此，我将在答案中添加其他信息。原始数据SQLFIDDLE：[http ://sqlfiddle.com/#!6/e5c6d/6](http://sqlfiddle.com/#!6/e5c6d/6)

**1.**读取oracle函数：

```
select max(m.id), m.someId keep (DENSE_RANK FIRST ORDER BY m.UpdateDate desc) 
from MyTable m 
groupBy m.someId 
```

在那里我们选择组中最大的 m.id (someId, UpdateDate) 其中 UpdateDate 是组中最大的 (someId)

**2.**由于错误，直接方式**不起作用：***列“MyTable.UpdateDate”在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。*

```
SELECT FIRST_VALUE(id) OVER(PARTITION BY someId ORDER BY UpdateDate DESC, id DESC) first_in_orderedset , someId
FROM MyTable
GROUP BY someId 
```

**3.**改进的“直截了​​当”是无效的

```
SELECT someId, MIN(first_in_orderedset)
FROM
 ( SELECT FIRST_VALUE(id) OVER(PARTITION BY someId ORDER BY UpdateDate DESC, id DESC) first_in_orderedset , someId
   FROM MyTable ) t
GROUP BY someId; 
```

**4.**交叉申请：

```
SELECT grouped.someId, orderedSet.FirstUpdateDate, maxInSet.first_in_orderedset FROM
(
    SELECT mt.someId 
    FROM MyTable mt
    GROUP BY mt.someId
) grouped CROSS APPLY 
( 
   SELECT top 1 mt2.UpdateDate as FirstUpdateDate  
   FROM MyTable mt2 
   WHERE mt2.someId=grouped.someId  
   ORDER BY UpdateDate desc
) orderedSet  CROSS APPLY
( 
   SELECT max(mt3.id) as first_in_orderedset 
   FROM MyTable mt3 
   WHERE mt3.someId=grouped.someId  and mt3.UpdateDate=orderedSet.FirstUpdateDate  
) maxInSet; 
```

**5.**现在让我们获取更复杂的表和更复杂的查询： ORACLE : [http://sqlfiddle.com/#!4/c943c/23](http://sqlfiddle.com/#!4/c943c/23) SQL SERVER: [http://sqlfiddle.com/#!6/dc7fb/1/ 0](http://sqlfiddle.com/#!6/dc7fb/1/0) （数据是预先生成的，在两个沙箱中是相同的 - 很容易比较结果）表：

```
CREATE TABLE AlarmReports (
  id int PRIMARY KEY,
  clientId int, businessAreaId int , projectId int, taskId int,  
    process1Spent int, process1Lag int, process1AlarmRate varchar2(1) null,
    process2Spent int, process2Lag int, process2AlarmRate varchar2(1) null,
    process3Spent int, process3Lag int, process3AlarmRate varchar2(1) null
) 
```

甲骨文查询：

```
SELECT clientId, businessAreaId, projectId, 
  sum(process1Spent),
  sum(process2Spent),
  sum(process3Spent),
  MIN(process1AlarmRate) KEEP (DENSE_RANK FIRST ORDER BY process1Lag DESC),
  MIN(process2AlarmRate) KEEP (DENSE_RANK FIRST ORDER BY process2Lag DESC),
  MIN(process3AlarmRate) KEEP (DENSE_RANK FIRST ORDER BY process3Lag DESC)
FROM AlarmReports 
GROUP BY GROUPING SETS ((),(clientId),(clientId, projectId),(businessAreaId),(clientId,businessAreaId)) 
```

SQL查询：

```
(to be continued) 
```

实际上，我已经计划将我的自定义聚合用 c# 编写。如果有人有兴趣，请与我联系...自定义聚合是此类问题的最佳解决方案，但就 varchar 长度而言，它并不是 unviersal。对于每个 varchar 长度，您将有义务创建“专业”聚合函数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-20T15:26:44.953

那绝对有效。先尝试，再争论。当您有多个订单时，您可以这样做（在 Oracle 上制作的示例）：

-- 这个有 keep dense_rank

```
WITH a AS (SELECT 1 s1, 4 s2, 'a' c,  10 g FROM dual UNION all
           SELECT 2 s1, 2 s2, 'b' c,  10 g FROM dual UNION ALL
           SELECT 3 s1, 1 s2, 'c' c,  20 g FROM dual UNION ALL
           SELECT 4 s1, 3 s2, 'd' c,  20 g FROM dual)
SELECT g,
       MAX(c) KEEP (DENSE_RANK FIRST ORDER BY s1) s1,
       MAX(c) KEEP (DENSE_RANK FIRST ORDER BY s2) s2
  FROM a
 GROUP BY g 
```

-- 这个没有keep dense_rank

```
 WITH a AS (SELECT 1 s1, 4 s2, 'a' c,  10 g FROM dual UNION all
               SELECT 2 s1, 2 s2, 'b' c,  10 g FROM dual UNION ALL
               SELECT 3 s1, 1 s2, 'c' c,  20 g FROM dual UNION ALL
               SELECT 4 s1, 3 s2, 'd' c,  20 g FROM dual)
SELECT g,
       MAX(DECODE(s1, 1, c)) s1,
       MAX(DECODE(s2, 1, c)) s2
  FROM (SELECT g,c,
               ROW_NUMBER() OVER (PARTITION BY g ORDER BY s1) s1,
               ROW_NUMBER() OVER (PARTITION BY g ORDER BY s2) s2 
          FROM a) b
 GROUP BY g 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T15:25:01.330

SQL Server 不支持“keep”构造，因此需要使用子查询：

```
select m.*
from (select *, row_number() over (partition by m.someid ORDER BY m.UpdateDate desc) as seqnum
      from MyTable m
     ) m
where seqnum = 1 
```

这会找到每个 m.id 的第一行，其中包含最新的 UpdateDate。然后它在外部查询中选择该行。请注意，您不需要使用此方法进行分组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-11T04:26:12.663

如果有人在 Postgres 中寻找 Oracle KEEP DENSE_RANK 模拟：

```
CREATE TABLE myt (
  "id" INTEGER,
  "update_date" timestamp,
  "some_id" INTEGER
);

INSERT INTO myt
  ("id", "update_date", "some_id")
VALUES
  ('1', '2012-01-20', '10'),
  ('2', '2012-01-20', '10'),
  ('3', '2012-01-01', '10'),
  ('4', '2012-10-02', '20'),
  ('5', '2012-01-02', '20'),
  ('6', '2012-01-04', '30');                         

select
    some_id, 
    (array_agg(id order by update_date desc, id desc))[1]
from myt
group by some_id
order by some_id 
```

[![在此处输入图像描述](../Images/451d2ced101372afaf88d4e0418077e7.png)](https://i.stack.imgur.com/syxxl.png)

# php - 在这种情况下从视图中调用模型的替代方法

> ID：10756721
> 
> 赞同：0
> 
> 时间：2012-05-25T14:58:13.017
> 
> 标签：php, model-view-controller

我知道我们应该从控制器而不是视图调用模型，但我处于必须这样做的情况

这里是 ：

我有一个博客脚本，在每个用户主页中，我想为每个帖子显示 10 条帖子和 5 条评论

所以我的控制器看起来像

```
function get_posts($user_id){

   $blog_model = $this->load->model('bloging');
   $posts      = $blog_model->get_user_posts();
   $this->load->view('blog' , $posts )
} 
```

每个帖子都可能有很多评论，所以我也必须得到它们

所以在我看来我有

```
foreach($posts->result() as  $p ){

  echo $p->comment;

 /// getting comments
  $comment_model = $this->load->model('comments');
  $co = $comment_model->get_post_comments($p->id);
  foreach($co as $co )
   echo $co->comment;
  //////

} 
```

我现在这不起作用，因为我必须使用帮助程序或库或在模型中使用静态方法来执行此操作（我正在使用 codeigniter，对于其他框架作品可能会有所不同）

但我有什么选择？

我可以在控制器中执行此操作，在获取帖子后使用 foreach 循环并获取每个帖子评论，将所有评论放入二维数组（`$c_array[post_id][it's comments array]`）

将它们发送到带有帖子的视图，并在每个帖子的视图中查看数组中的评论和.......

但它接缝复杂、多余且速度较慢

我已经在帖子查询上有 4 个连接，在评论查询上有 2 个连接，如果我加入这两个，那将是 7

而且在两个查询中 select 也有不同的限制我对 mvc 还很陌生。在这种情况下正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:50:27.003

我猜你已经为此创建了自己的 MVC 系统，所以我不知道你将如何实现它。我使用 Zend Framework，所以我可以告诉你我将如何使用它。

从视图访问模型本质上没有任何问题，只要它是只读访问，但最好将尽可能多的代码保留在视图脚本之外。为此，在您的情况下，我会使用[视图助手](http://framework.zend.com/manual/en/zend.view.helpers.html)，并且在 ZF 中[编写您自己的视图助手](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.custom)非常简单。如果你想使用这个方法，我会留给你来适应你的 MVC。

这意味着您可以抽象出从视图脚本中获取注释列表所需的代码，并将其替换为以下内容：-

```
echo $this->getComments($messageID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:02:37.400

通常，您会在`post`模型上有一个方法来获取该帖子的评论。此外，我通常会有一种方法来确保将评论加入到帖子中，这样您就不会为每个帖子发出评论查询。

# c# - 为什么在使用实体框架时我的带有数据注释的列不会映射

> ID：10756722
> 
> 赞同：3
> 
> 时间：2012-05-25T14:58:19.560
> 
> 标签：c#, entity-framework, data-annotations

我有一个看起来像这样的类：

```
public class Analyst
{
    [Column("Internal_ID")]
    public int ID { get; set; } // if this is named like the column, it works
    [Column("DisplayName")]
    public string Name { get; set; }
} 
```

这个对象是这样填充的（下一部分在一个继承自 DbContext 的类中）：

```
public List<T> ExecProc<T>(string proc, Dictionary<string, object> params)
{
        var parms = new List<SqlParameter>();
        var sql = new StringBuilder();
        sql.Append(sproc.StoredProcedure);
        sql.Append(" "); //  a space, that's all it is
        foreach (var key in sproc.Parameters.Keys)
        {
            sql.Append(string.Format("{0},", key));
            parms.Add(new SqlParameter(key, sproc.Parameters[key]));
        }
        if (sql[sql.Length - 1] == ',') // removing the trailing ,
        {
            sql.Remove(sql.Length - 1, 1);
        }
        return Database.SqlQuery<T>(sql.ToString(), parms.ToArray()).ToList();
} 
```

返回的 List 包含正确数量的行（或本例中的对象），但没有一个属性填充有值。如果 proc 返回 200 行，那么我在 List 中得到 200 个对象，但它们都没有填充任何值。

我已验证字段名称与 [Column("name")] 属性中的值不匹配。如果我更改属性名称以匹配结果集中的字段名称，那么它工作正常，但如果我尝试使用数据注释映射它们，我似乎无法让它工作。谁能指出我在这里缺少什么？我确定这很简单。

使用：Visual Studio 2010 Ultimate SP1、.Net 4 SP1、EF 4.2.0（我遇到了与 EF 4.3 相同的问题）。这一切都只使用代码完成，没有使用映射文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T15:04:49.753

看起来，这是记录在案的行为。[Database.SqlQuery 方法](http://msdn.microsoft.com/en-us/library/gg696545%28v=vs.103%29)与 DbContext 模型配置没有直接联系。

> 创建一个原始 SQL 查询，该查询将返回给定泛型类型的元素。**该类型可以是具有与从查询返回的列的名称相匹配的属性的任何类型，也**可以是简单的原始类型。

因此，在使用此方法时，您应该构造您的 sql，以便结果集列名称与所使用类型的属性名称匹配。

# html - 开始使用 HTML5 构建移动网站

> ID：10756723
> 
> 赞同：0
> 
> 时间：2012-05-25T14:58:21.473
> 
> 标签：html, css, mobile

我正在学习 HTML5 和 CSS3。我喜欢这种语言，并希望将其作为我的工作。我最感兴趣的是将网站变成用户友好的移动网站，可以通过手持设备进行冲浪。

我阅读了很多关于该主题的内容并学习了很多技术和技巧（我使用 Dreamweaver）。但是我缺乏运动！所以我想我最好给我找个网站，试着把它变成一个移动网站，作为一种很好的做法，我可以在这里尝试我学到的所有知识。现在我找到了一个网站。这是一个类似社交网络的网站。

我的问题是，我该如何开始？我在哪里可以得到这个网站的 CSS 文件？我需要担心什么（安全方面）？我可以通过浏览器查看源代码，但这有什么用？保存页面并使用 DW 帮助打开它吗？我只需要第一步就可以使用这个网站作为我的项目，然后我会深入研究它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:18:57.377

如果您保存网页并在 DW 中打开它，您将不会获得所需的代码。

我建议创建您自己的站点和外部样式表，或者如果您愿意，您可以在 templatemonster.com 上找到一些东西来做您需要的事情。如果你真的想练习编程，最简单的方法就是开始。设置一个测试服务器，下载一个好的代码编辑器（komodo、sublime text 等）并将其淘汰。

最后一个建议，Chrome - 开发工具。

# jquery - 在ajax请求上解码json

> ID：10756726
> 
> 赞同：0
> 
> 时间：2012-05-25T14:58:32.597
> 
> 标签：jquery, asp.net, vb.net, json

嗨，我想构建一个如下所示的简单 json：`{"Count" : "55", "total" : "125,55"}`

在我的 vb 方法中，我这样做是为了对其进行编码：

```
Dim json As String = "{""Count"" : "" " & intCount & " "", ""total"" : "" " & intTotal & " "" }" 
```

但我认为我错过了一些东西来逃避引号，当我的浏览器收到它时，它看起来像这样：`{"d":"{\"Count\" : \" 5 \", \"total\" : \" 55 \" }"}`

让 jQuery 无法阅读...

知道如何以简单的方式编码这个 json 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:26:05.317

如果你想保持简单，你可以绕过所有语法上的细微差别（它容易出错），并通过允许框架为你序列化（或反序列化）你的数据来为你的应用程序增加一些灵活性。

简而言之，您将创建一个具有这些属性（计数、总计、...未来添加？）的对象，并使用`DataContractJsonSerializer`可以在`System.Runtime.Serialization.Json`命名空间中找到的对象。

这是一个教程：[如何：序列化和反序列化 JSON 数据](http://msdn.microsoft.com/en-us/library/bb412179.aspx)

MSDN：[DataContractJsonSerializer 类](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)

# java - java打印筛选

> ID：10756728
> 
> 赞同：1
> 
> 时间：2012-05-25T14:58:35.013
> 
> 标签：java, image, awt, screenshot, awtrobot

现在我得到的是这个，但目前它在字符串实际存在之前截取屏幕截图，导致截屏太早了

```
 if(string_75_.contains("You have defeated ")) {
            takeScreenshot(true);
        } 
```

这是我的整个打印屏幕例程

```
 static boolean takeScreenshot(boolean verbose){
    try{
      File file = getEmptyFile();
      Wait(50);
      ImageIO.write(getImage(), "png", file);
      if (verbose) {
        System.out.println("Screenshot saved as " + file.getName() + ".");  
      }
      return true;
    }
    catch (IOException e) {
      if (verbose)
        System.out.print("Error saving screenshot.");
    }
    return false;
  }
 private static BufferedImage getImage() throws IOException {
      try {
          Robot robot = new Robot();
          Wait(120);
          robot.keyPress(KeyEvent.VK_ALT);
          robot.keyPress(KeyEvent.VK_PRINTSCREEN);
          robot.keyRelease(KeyEvent.VK_PRINTSCREEN);
          robot.keyRelease(KeyEvent.VK_ALT);
          BufferedImage bufferedImage = (BufferedImage)getClipboard();
          return bufferedImage;
    } catch (AWTException e) {
         BufferedImage bufferedImage = new BufferedImage(765,503 + 11, 1);
         return bufferedImage;
    }
 } 
```

现在主要问题是等待导致我的应用程序完全停止但仍然无法尽早截取屏幕截图......任何帮助都非常感谢

还有没有办法清除剪贴板？没有我的 wait() 它似乎会返回最后一张拍摄的图像，因为这一切都发生得如此之快

谢谢！

# iphone - 拒绝来自 iphone 的电话

> ID：10756730
> 
> 赞同：1
> 
> 时间：2012-05-25T14:58:45.980
> 
> 标签：iphone, objective-c

我需要以编程方式拒绝电话，然后将该号码临时保存在电话中。

我做了一项研究，发现 Apple 不会允许这样做，但我不会将其发布到应用商店。

我怎样才能做到这一点？

# jqgrid - 从按钮单击加载 jqGrid

> ID：10756735
> 
> 赞同：1
> 
> 时间：2012-05-25T14:59:00.147
> 
> 标签：jqgrid, jqgrid-asp.net

我有一个 aspx 页面，我在其中选择了一些输入参数，然后从提交按钮将它们传递给我的业务逻辑层，然后返回为 jqGrid 格式化的数据。所以，我不想在页面首次加载时显示网格 - 我想选择我的参数，按提交，然后显示网格。此外，如果选择了不同的参数并再次单击提交，我想重新显示网格。我花了一上午的时间寻找解决方案，但没有成功。

# google-maps-api-3 - Google Maps API v3 - 帮助从文本链接链接到 Google 标记

> ID：10756736
> 
> 赞同：0
> 
> 时间：2012-05-25T14:59:01.143
> 
> 标签：google-maps-api-3, maps

我创建了一个谷歌地图，位于：[http ://calwestculture.com/sgs/example_map.html](http://calwestcultural.com/sgs/example_map.html)

我正在尝试将我的 spry 菜单中的一些文本与我的谷歌地图标记/信息窗口链接到左侧。

我的 javascript 受到限制，因为我尝试为每个标记创建 ID 并链接到该 ID，但它不起作用。在这一点上我很难过。

当您将鼠标悬停在名称上时，我还希望我的标记显示名称。我使用不同的样式地图实现了这一点，但在创建标记时遇到了问题，因此我上面使用的当前将是我的最终版本，我只需要获取正确引用的链接。

请对此有任何帮助，这将立即摆脱我的 JS 头痛！！！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:34:56.587

此页面显示了将侧边栏链接连接到标记的一种方法

[http://www.wolfpil.de/v3/toggle-cats.html](http://www.wolfpil.de/v3/toggle-cats.html)

将此页面的模式复制到您的案例中，您需要一个`gmarkers`全局变量

```
//<![CDATA[
var map = null;
var gmarkers = [];
function initialize() { 
```

添加标记的顺序很重要，它们应该与侧边栏中的业务顺序相匹配。`gmarkers`将在中更新`createMarker`。

```
var point = new google.maps.LatLng(37.984798,-121.312094); 
var marker = createMarker(point,'<div style="width:205px"><center><img src="images/sampleuopsign.jpg" /></center><h2>University of the Pacific</h2>3601 Pacific Avenue<br>Stockton, California 95211<br>209.946.2011<br><small>On the web visit: <a href="http://www.pacific.edu">www.Pacific.edu<\/a></small><\/div>')

...

function createMarker(latlng, html) {
    var contentString = html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
    });
    gmarkers.push(marker);
} 
```

有了数组，我们可以通过索引来寻址它们。当点击侧边栏条目（链接）时，Wolfpil 只会触发点击事件：

```
function triggerClick(i) {
  google.maps.event.trigger(gmarkers[i],"click");
} 
```

每个链接都可以这样写，用添加每个标记的顺序替换 0 和 1：

```
<a href="javascript:triggerClick(0)">Bank of America</a>
<a href="javascript:triggerClick(1)">Bank of Stockton</a> 
```

关于显示标题的标记悬停，最简单的方法是`title`在创建标记时添加一个选项，但这意味着向 createMarkers 函数添加一个新参数：

```
 function createMarker(latlng, storeName, html) {
  var contentString = html;

  var marker = new google.maps.Marker({
    position: latlng,
    map: map,
    title: storeName,
    zIndex: Math.round(latlng.lat()*-100000)<<5
  }); 
```

从长远来看，更好的选择是使用对象`gmarkers`而不是数组，因为在列表中间添加一个项目会打乱 HTML 中的现有项目。

然后，可以通过字符串 ID 调用地点，例如`gmarkers['safeway']`. 我们没有将标记推送到 in 中的数组`createMarker`，而是将 id 分配给标记：

```
gmarkers[id] = marker; 
```

如果您遇到麻烦，请在下面写评论！我没有测试上面的代码。

# java - 具有双向迭代、随机删除、追加的数据结构

> ID：10756737
> 
> 赞同：0
> 
> 时间：2012-05-25T14:59:04.250
> 
> 标签：java, data-structures

我想要一个具有以下操作的数据结构：

*   随机访问删除：引用对象，从结构中删除（元素是唯一的）
*   在末尾添加元素
*   双向迭代

在迭代期间应该可以进行随机访问删除和元素附加。

理论上，链表哈希集应该支持在 O(1) 中完成所有这些操作，但我似乎无法让 LinkedHashSet 为我完成这些操作。

如果有一种简单的方法可以优化它，我想知道。否则，有什么好方法可以处理大约 10k 个元素？所有操作的执行次数大致相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:17:47.640

可以在本文中找到有关 List、Set 和 Map 操作性能的一个很好的[概述](http://www.artima.com/weblogs/viewpost.jsp?thread=122295)。

# ffmpeg - 如何使用 ffmpeg 重新编码（有限的 x264）

> ID：10756742
> 
> 赞同：0
> 
> 时间：2012-05-25T14:59:13.813
> 
> 标签：ffmpeg, fedora, x264, re-encoding

到目前为止，我使用此脚本为我的盒子（电视解码器）重新编码我的 rip：

```
^_^ ( ~ ) -> cat ~/++/src/convert.sh 
#! /bin/bash

name=$(path -r "$1") # it gives the file name without the extension

[ "$1" = *.mp4 ] && ffmpeg -i "$name".mp4 -vcodec copy -acodec copy "$name".mkv
x264 --preset veryfast --tune animation --crf 18 --vf resize:720,576,16:15 -o "$name".tmp.mkv "$name".mkv
mkvmerge -o "$name [freeplayer sd]".mkv "$name".tmp.mkv --no-video "$1"
rm -rf "$name".tmp.mkv
[ "$1" = *.mp4 ] && rm -rf "$name".mkv
exit 0

#EOF 
```

它适用于我的 ubuntu 和 archlinux 笔记本电脑。但它不在我的桌面上运行fedora。Google 表示 rpmfusion 提供的 x264 软件包不支持 lavf 和 ffms2。而且我无法取消安装它，因为 smplayer（我喜欢的女巫）需要它。

好的，所以我必须编译它。谷歌然后说“你必须构建 ffmpeg, ffms2 tnen x264 确保正确引用标志。” 好吧，没用（ffms2 找不到 LIBAV——即使我告诉我在哪里——而且 x264 没有用 lavf 配置...）

我的问题是：我可以单独使用 ffmpeg 来完成我的脚本所做的事情。我有 ffmpeg 版本 0.8.11、x264 0.116.2048 59cb2eb 和 gcc: 4.6.1 20110804 (Red Hat 4.6.1-7)

编辑：好的，我发现： ffmpeg -i input file -acodec copy -vcodec libx264 -preset veryfast -tune animation [that part I didn't have] output

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T23:40:23.377

我自己找到了。

```
ffmpeg -i input -s 720x576 -aspect 4:3 -vcodec libx264 -preset veryfast -tune animation -crf 18 -acodec copy -scodec copy output 
```

我的脚本变成：

```
#! /bin/bash
#
name=$(path -r "$1") # it gives the file name without the extension

ffmpeg -i "$1" -s 720x576 -aspect 4:3 -vcodec libx264 -preset veryfast -tune animation -crf 18 -acodec copy -scodec copy "$name".tmp.mkv
mkvmerge -o "$name [freeplayer sd]".mkv "$name".tmp.mkv --no-video "$1"
rm -rf "$name".tmp.mkv
exit 0
#
#EOF 
```

它现在适用于任何容器！如果您将它用于动画以外的其他用途，您可以更改曲调并删除“-scodec 复制”部分（无论哪种方式都可以）。您可能还注意到，我的电视是 4:3 比例的 pal 电视。这也可能改变。

拜拜。

# ios - 我想了解如何在 Windows 笔记本电脑中使用 phonegap 构建 iOS 应用程序？

> ID：10756746
> 
> 赞同：0
> 
> 时间：2012-05-25T14:59:25.407
> 
> 标签：ios, cordova

我想学习如何使用 phonegap 创建 ios 应用程序，但我不确定是否可以通过 phonegap+windows 创建 ios 应用程序？（我目前是一名学生，先生/女士，您的回答将非常有帮助，非常感谢）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:35:04.593

有一些像“Marmalade”这样的项目可以在 Windows 上开发 IOS 项目，但所有看起来不错的项目都不是免费的。您还应该了解，此类项目是非官方的，并且在开发过程中可能会出现问题。

所以，在我看来——没有办法在Windows下开发IOS项目。但是你可以尝试在你的笔记本电脑上安装像 iATKOS 这样的 Hackintosh 作为第二个操作系统，并在那里使用 xCode 开发应用程序。我在华硕笔记本电脑上也做过同样的事情。

# python - 在python中用另一个掩码修改布尔掩码

> ID：10756748
> 
> 赞同：4
> 
> 时间：2012-05-25T14:59:33.453
> 
> 标签：python, numpy

我想根据某些条件修改现有掩码以在我的代码中进一步使用：

```
import pylab
mask1 = arange(10) > 5;
# [False False False False False False  True  True  True  True]
mask2 = arange(10) >8;
# [False False False False False False False False False  True]
mask1[mask2] = False
print mask1
[ True False False False False False  True  True  True  True] 
```

如您所见，它是第一个被修改的元素，而不是预期的最后一个元素。这样做的正确方法是什么？

编辑：对不起，我的错，因为你们中的一些人指出代码是正确的，我不知道那里发生了什么，我将删除这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:06:08.067

你的代码没有问题。我已经尝试过了，它产生了正确的结果（与您显示的结果不同）。

这是做同样事情的另一种方法：

```
mask1 &= ~mask2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:06:29.227

在我看来，您可以像这样构造掩码：

```
mask1= logical_and(arange(10)>5,arange(10)<=8) 
```

或者更简单：

```
mask1 = (arange(10)>5) & (arange(10)<=8) 
```

# c# - 如何隐藏具有来自另一个页面的用户控件的 ModalPopupExenter？

> ID：10756751
> 
> 赞同：1
> 
> 时间：2012-05-25T14:59:46.417
> 
> 标签：c#

我有一个名为：Share.ascx 的用户控件

我有一个页面叫：News.aspx

在 News.aspx 中，我创建了一个 ModalPopupExtender，然后我添加了一个面板，并在面板内添加了用户控件：Share.ascx，以便在调用 Popup Extender 时显示带有用户控件的面板。

问题：

我只能从 News.aspx 中隐藏 ModalPopupExtender，因为在那里定义了 ModalPopupExtender 但我需要从用户控件中调用 ModalPopupExtender 的 HIDE 功能：Share.ascx.cs

我怎么做？

谢谢你。

----------------------News.aspx--------------

```
<asp:Content ID="Content1" runat="server">

    <asp:LinkButton ID="lbtnShare" runat="server" Text='Share Link' /> 

    <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server"  
    TargetControlID="lbtnShare" PopupControlID="Panel1" 
    Drag="true" RepositionMode=RepositionOnWindowResizeAndScroll
    BackgroundCssClass="modalBackground" >
    </asp:ModalPopupExtender>

    <asp:panel id="Panel1" runat="server" style="display:none">
        <uc2:ShareLink ID="ShareLink" runat="server" />
    </asp:panel>
</asp:Content> 
```

----------------------Share.ascx--------------

```
<asp:UpdatePanel ID="upSET" runat="server">
   <ContentTemplate>
      <asp:Button ID="btnCancel" Text="Cancel" runat="server" OnClick="btnCancel_Click" CausesValidation="false" />
   </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

文件太长了，我省略了很多，只放了重要的部分。

Share.ascx 有一个取消按钮，在该按钮中我想调用位于 News.aspx 中的 ModalPopupExtender1 的 Hide() 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:08:13.653

从后面的用户控件代码中尝试找到您的 ModalPopupExtender

```
var popup = Parent.FindControl("ModalPopupExtender1") as ModalPopupExtender; 
```

然后调用 Hide() 方法

```
popup.Hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:19:23.597

您可以通过将取消按钮的 ID 附加到用户控件的 ID 来从 ModalPopupExtender 的父表单中引用 Ok 和取消控件。我使用以下代码：

```
<asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" Enabled="True" 
            TargetControlID="Button1" PopupControlID="UpdatePanel1"
            OkControlID="OpenRec1_btnOK"
            CancelControlID="OpenRec1_btnCancel">
        </asp:ModalPopupExtender>

        <asp:UpdatePanel ID="UpdatePanel1" runat="server">

            <ContentTemplate>
                <uc1:OpenRec runat="server" id="OpenRec1" />
            </ContentTemplate>
        </asp:UpdatePanel> 
```

我的用户控件中的确定和取消按钮被命名为 btnOK 和 btnCancel。

# javascript - 带有“其他”选项的选择框未在 Chrome 和 Firefox 中显示

> ID：10756752
> 
> 赞同：0
> 
> 时间：2012-05-25T14:59:47.557
> 
> 标签：javascript, drop-down-menu

我在选择框中有一个其他选项的脚本。

在 IE 中运行良好，但在 Chrome 或 firefox 中运行良好。

这是脚本和表格。

```
<SCRIPT TYPE="text/javascript"> 
    function toggleField(val) {
        var o = document.getElementById('other'); 
        var o1 = document.getElementById('other1'); 
        var opt = document.getElementById('i_skate'); 
        var opt1 = document.getElementById('my-style'); 
        (opt.options[opt.length-1].selected)? o.style.display = 'block' : o.style.display  = 'none'; 
        (opt1.options[opt1.length-1].selected)? o1.style.display = 'block' : o1.style.display = 'none'; 
    } 
</SCRIPT>

<SELECT NAME="i_skate" SIZE="1" ONCHANGE="toggleField(this.value);">
    <OPTION VALUE="Just a Fan">Just a Fan</OPTION>
    <OPTION VALUE="Everyday">Everyday</OPTION>
    <OPTION VALUE="Few times a Week">Few times a Week</OPTION>
    <OPTION VALUE="Few times a Month">Few times a Month</OPTION>
    <OPTION VALUE="">Other</OPTION>
</SELECT><INPUT TYPE="TEXT" NAME="i_skate" ID="other" STYLE="display: none;" SIZE="20"> 

<SELECT NAME="my-style" SIZE="1" ONCHANGE="toggleField(this.value);">
    <OPTION VALUE="Street Skate">Street Skate</OPTION>
    <OPTION VALUE="Downhill">Downhill</OPTION>
    <OPTION VALUE="Freestyle">Freestyle</OPTION>
    <OPTION VALUE="Pools-Bowls">Pools-Bowls</OPTION>
    <OPTION VALUE="Vert Halfpipe">Vert Halfpipe</OPTION>
    <OPTION VALUE="Park">Park</OPTION>
    <OPTION VALUE="Mini Ramp">Mini Ramp</OPTION>
    <OPTION VALUE="">Other1</OPTION>
</SELECT>
<INPUT TYPE="TEXT" NAME="my-style" ID="other1" STYLE="display: none;" SIZE="20"> 
```

有人可以看看这个并告诉我我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:12:36.960

您正在尝试将 getElementById 与没有您引用的 ID 而是名称（在您的 opt 和 opt1 变量中）的元素一起使用。例如，在您的行`var opt = document.getElementById('i_skate');`中，没有 ID 为 i_skate 的元素，但确实有一个名称为 i_skate 的元素。现在您可以更改该元素的 ID 并解决问题，或者更改您的 JavaScript（如下所示）以使用 getElementsByName 代替`var opt = document.getElementsByName('i_skate');`。

getElementsByName 与 getElementById 略有不同，因为 getElementById 只会返回一个元素（如果存在），而 getElementsByName 可以返回多个元素。在这种情况下，您需要将第一个元素称为 opt[0] 而不仅仅是 opt。

尝试：

```
function toggleField(val) {
    var o = document.getElementById('other');
    var o1 = document.getElementById('other1');
    var opt = document.getElementsByName('i_skate');
    var opt1 = document.getElementsByName('my-style');
    (opt[0].options[opt[0].length - 1].selected) ? o.style.display = 'block' : o.style.display = 'none';
    (opt1[0].options[opt1[0].length - 1].selected) ? o1.style.display = 'block' : o1.style.display = 'none';
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/JNRFL/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:29:19.103

您在没有该 ID 的项目上使用 getElementByID()，您为它们设置了一个不同的名称。有关在 chrome 中工作的固定代码，请参见此处：http: [//jsfiddle.net/zTwmb/5/](http://jsfiddle.net/zTwmb/5/)

# linux - 内核级线程修改.text 区域？

> ID：10756753
> 
> 赞同：0
> 
> 时间：2012-05-25T14:59:49.630
> 
> 标签：linux, multithreading

我不太了解用户级线程和内核级线程之间的区别。这是我目前所知道的：

**内核级**线程

好处：

*   如果我们有多个处理器/内核，我们实际上可以同时运行线程（真正的并行性，因为内核调度程序可以控制线程）
*   阻塞线程（例如用于 I/O 操作）不要阻塞所有线程

缺点：

*   上下文切换是在内核中进行的（这意味着它比在用户空间中慢）

**用户级**线程

好处：

*   更快的上下文切换
*   可以在应用程序中计划调度（而不是由 OS 调度程序）

缺点：

*   内核对线程一无所知，因此该进程一次最多使用一个处理器/内核。
*   如果一个线程进行阻塞调用，所有线程将再次被阻塞，因为内核不知道线程的存在，调度程序将让其他进程访问处理器/内核，即使该程序中的其他线程可以跑。

据我所知，我无法回答这个**问题**：

创建内核级线程时，进程的 .text(code area) 如何修改？

我的直觉说它不会改变，因为线程共享相同的地址空间，因此 .text 区域不会改变。我发现支持这个答案的另一个原因是 .text 区域是只读的。此外，所有其他区域将保持不变（.bss、堆等）。唯一会改变的是堆栈。

但是我想确定这是正确的答案。

注：我主要讲linux内核上的线程（关于windows线程的东西不太了解）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:13:00.343

这里可能会询问 4 种不同类型的线程。

1.  内核自己创建的用于处理后台任务的线程。
2.  `fork()`系统调用派生的进程。
3.  pthread 线程由用户使用 Linux`clone()`系统调用创建但由内核管理
4.  完全在内核调度程序之外运行的“绿色”线程

以下答案假设帖子中提到的“用户级”线程是 pthread 品种，而*不是*“绿色”品种。

**编辑：**我认为@Hristo 是对的，OP 正在谈论“绿色”线程或者混淆了两者。

此答案假定您正在谈论您使用创建的线程`pthread_create()`。还有一些[“绿色”线程](http://en.wikipedia.org/wiki/Green_threads)由用户空间调度，内核不知道。我将把我的答案留给后代。

* * *

**用户线程 == 绿色线程**

所谓的“绿色线程”根据定义是完全由 VM 处理而无需内核参与的线程。

> “用户级”内核对线程一无所知，因此该进程一次最多使用一个处理器/内核。

对。

> 如果一个线程进行阻塞调用，所有线程将再次被阻塞，因为内核不知道线程的存在

不会。只要您使用正确的原语，阻塞调用将导致线程被放入等待队列并运行另一个绿色线程。

> 创建内核级线程时，进程的 .text(code area) 如何修改？

在绿色线程中，它们都使用相同的代码区域。

> 此外，所有其他区域将保持不变（.bss、堆等）。

是的。

* * *

**用户线程 == pthreads**

对于`pthread_create()`“用户线程”，它们与“内核”线程之间几乎没有区别。`clone()`linux内核使用系统调用 将用户级线程实现为单独的内核进程。`clone()`创建一个使用与父进程相同的内存空间的新进程，而不是`fork()`创建一个具有父内存*副本*的新进程。

> “用户级”内核对线程一无所知，因此该进程一次最多使用一个处理器/内核。

不，这是不正确的。内核像任何其他进程一样管理用户级线程，因为它具有上下文切换和在多个 CPU 上调度各种用户级线程的能力等。

> 如果一个线程进行阻塞调用，所有线程将再次被阻塞，因为内核不知道线程的存在

不，一个线程可以阻塞，而其他线程将继续运行。同样，这是在 pthread 样式线程下。

> 创建内核级线程时，进程的 .text(code area) 如何修改？

创建新线程时，它会继承其父线程的内存分段表。文本/代码页（和其他只读页）被标记为只读，并且两个线程在线程的生命周期内共享内存。所有读写页面也是共享的*，直到*新线程对这些部分进行写入，此时页面被复制到另一个位置（写入时复制）。

> 此外，所有其他区域将保持不变（.bss、堆等）。

不，堆页面以及其他未标记为只读的内容（包括您提到的堆栈）将在写入后立即被复制。我不确定 .bss 部分，但由于它们是在运行时初始化的，我相信它们也是读写的。DATA 是只读的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T17:30:14.610

当从用户级线程切换到内核级线程（也称为 LWP 或*轻量级进程*）时，程序的文本会发生变化。原因是这两种线程以完全不同的方式实现/编码。

内核级线程只是单独的指令流，它们共享除堆栈和线程本地存储 (TLS) 之外的所有内容。它们大多被内核视为真实进程，但它们是轻量级的，因为它们彼此共享大量资源。实际上，Linux 中的单线程进程只是只有一个 LWP 加上所有其他内核结构的进程，这使它成为一个成熟的进程。LWP 或多或少像通常的独立 Linux 进程执行一样并发执行——您不需要做任何事情来使它们同时运行——这一切都由内核调度程序完成。与成熟流程的不同之处在于 LWP 共享其大部分数据。他们还共享`.text`可执行文件的部分，但实际上`.text`部分在同一可执行文件的所有实例之间共享，不仅在其 LWP 之间。

用户级线程提供类似于真正的多线程的东西，但它实际上是一种分时解决方案，通常由显式切换机制驱动。这意味着当一个用户级线程正在执行时，所有其他线程都被搁置，因为只有一个正在运行的指令流从代码中的一个点跳转到另一个点，同时保存/恢复一些 CPU 寄存器（最明显的是堆栈指针）。用户级线程的一种形式是在`libpth`(GNU Portable Threads) 中实现的协作多任务。用户级线程向用户代码添加了特殊机制，允许线程以被认为是同时模式的方式运行。`libpth`例如要求每个线程调用特定的 API 函数以允许其他线程运行。计时器信号可用于抢占用户级线程，但如果进程当前卡在阻塞系统调用中，这通常是不可能的。这就是为什么用户级线程通常使用异步 I/O、非阻塞操作等高级东西来编写，这与内核级线程完全不同，后者完全可以接受阻塞系统调用。就内核而言，这一切都发生在单个内核级线程中。

与用户级线程类似的最显着示例是在单线程可执行文件中并行使用`select()`或处理多个网络连接。`poll()`在这种情况下，“线程”状态是连接状态结构，然后用于调用特定通信函数，该函数处理套接字上的数据，该套接字被轮询系统调用检测为活动。

将用户级线程转换为内核级线程通常需要更改源代码（例如，必须删除对切换 API 的调用），因此该`.text`部分也会更改。将内核级线程转换为用户级线程还需要更改源代码，并且可能并不总是可行。您不能只在调用中插入实现用户级线程的函数的名称，`pthread_create()`尽管*如果*用户级线程实现使用诸如计时器信号之类的东西并且线程不调用特殊的切换 API...

两个线程实现之间的另一个显着区别是，在协作线程中，很难有竞争条件或共享冲突（即两个线程同时读取-修改-写入相同的内存位置），因为控制权在代码中的众所周知的点，而在抢占式情况下，进程可以在其间的任何地方中断（例如，可以说在协作情况下所有操作都是原子的），并且这种访问必须由关键部分或其他同步原语保护。

只是为了完整起见，Windows 也有自己的用户级线程实现，称为*fiber*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T15:12:07.630

Linux 中实际上并不存在用户级线程。每当您使用 pthread_create 创建新线程时，也会创建相应的内核级线程。使用`strace`它应该清楚，`clone()`每当您创建新线程时都会调用系统调用。

在任何情况下，所有线程都共享 .text、.data 和 .bss 部分。他们唯一不共享的是他们的堆栈。（是的，是的，还有线程局部变量。我们先不谈这个。）

# protobuf-net - 从 IDE 内部为 protogen 指定命令行选项？

> ID：10756754
> 
> 赞同：1
> 
> 时间：2012-05-25T14:59:54.793
> 
> 标签：protobuf-net

我正在使用 Visual Studio 2008，我想知道在运行 ProtoBufTool 自定义工具时是否可以指定 -p:detectMissing。在网上找不到任何关于它的信息。如果我需要指定命令行选项，我是否必须坚持从命令提示符调用 protogen（或将 protogen 包装在我自己的批处理文件中）？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:06:01.393

是的，有一个……呃，*hack*。“自定义命名空间”是我唯一可用的东西。这仍然可用于提供命名空间，因此我选择在此之后接受分号分隔的选项。所以如果不想指定命名空间，第一个字符**必须**是分号。所以; 尝试设置：

```
;detectMissing 
```

作为“自定义命名空间”（.proto 文件的属性窗格）

# mysql - 从 MySQL 插入语法错误 into type VARCHAR(999) <<< resolved was using improper table name

Getting a MySQL error message when I try to insert a text message from a form element into my database setup to r

> ID：10756758
> 
> 赞同：0
> 
> 时间：2012-05-25T14:59:56.967
> 
> 标签：mysql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:02:28.323

`key`是 mySQL 中的保留字。您需要用反引号包围该表：

```
INSERT HIGH_PRIORITY INTO `key` ... etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:03:18.180

尝试在'key'周围添加``

像这样：

```
INSERT HIGH_PRIORITY INTO `key` (number, category, question, answertxt, answer, correct, incorrect, feedback, lessonref, datemod) 
VALUES ('','$category','$question','$answertxt','$answer','$correct','$incorrect','$feedback','$lessonref',CURDATE()) 
```

应该管用

# ubuntu - GLib-GIO-CRITICAL 断言错误的含义

> ID：10756770
> 
> 赞同：5
> 
> 时间：2012-05-25T15:00:47.810
> 
> 标签：ubuntu, runtime-error, glib

我成功编译了以下程序simple.cc：

```
#include <gtkmm.h>

int main (int argc, char *argv[])
{
  Glib::RefPtr<Gtk::Application> app = 
    Gtk::Application::create(argc, argv,
      "org.gtkmm.examples.base");

  Gtk::ApplicationWindow window;

  return app->run(window);
} 
```

使用以下命令：

```
g++ simple.cc -o simple `pkg-config gtkmm-3.0 --cflags --libs` 
```

这给了我简单的可执行文件，但是当我尝试运行它时，出现以下错误：

```
(simple:2964): GLib-GIO-CRITICAL **: g_application_list_actions: assertion `application->priv->is_registered' failed
Segmentation fault (core dumped) 
```

据我所知，我拥有最新最好的 GLib 软件包。我正在运行 Ubuntu 12.04 LTS。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T23:28:48.373

我遇到了和刚开始学习同一个教程时一样的问题。代替：

```
 Gtk::ApplicationWindow window; 
```

和

```
 GTK::Window window; 
```

如果您阅读教程中的代码描述，则后者实际上是所讨论的代码。进行此更改使该程序对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:45:35.120

尝试将您的窗口连接到应用程序实例。像这样创建它：

```
Gtk::ApplicationWindow window(app); 
```

# c# - 平滑鼠标移动

> ID：10756772
> 
> 赞同：5
> 
> 时间：2012-05-25T15:00:53.920
> 
> 标签：c#, mouse, move, kinect

我正在开发一个软件来根据我从 kinect 的深度图像中获得的某些坐标移动鼠标。但我有 30 帧/秒（图像/秒）并且这些坐标随每一帧而变化，因此鼠标不断移动。我的问题是，有没有办法平滑鼠标的移动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T17:29:48.577

是的，您可以使用一些参数开始跟踪，使您的移动更加顺畅。
下面是一个示例代码：

```
 var parameters = new TransformSmoothParameters
        {
            Smoothing = 0.2f,
            Correction = 0.0f,
            Prediction = 0.0f,
            JitterRadius = 1.0f,
            MaxDeviationRadius = 0.5f
        };

        this._sensor.SkeletonStream.Enable(parameters); 
```

您可以将`Smoothing`、`Correction`、`Prediction`、`JitterRadius`和更改`MaxDeviationRadius`为您想要的任何数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T02:06:27.300

由于您想了解[“将深度坐标映射到骨架点”](https://stackoverflow.com/questions/10756772/smoothing-mouse-movement#comment14285602_10758894)，您可以使用`DepthImageFrame`'s[`MapToSkeletonPoint()`](http://msdn.microsoft.com/en-us/library/microsoft.kinect.depthimageframe.maptoskeletonpoint.aspx)获取深度数据的 X 和 Y 值，然后创建一个`SkeletonPoint`. 例子：

```
 SkeletonPoint point = depthFrame.MapToSkeletonPoint(x, y); 
```

希望这可以帮助！

# javascript - mootools 扩展类

> ID：10756775
> 
> 赞同：0
> 
> 时间：2012-05-25T15:00:59.977
> 
> 标签：javascript, oop, mootools

我有这个代码：

```
var MyClass = new Class({
    Implements: [Options,Events],
    initialize: function(){

    },
    doStuff: function() {
        console.log('In MyClass');
    }
});

var MyBetterClass = new Class({
    Extends: MyClass,
    initialize: function() {

    },
    doExtraStuff: function() {
        console.log('In MyBetterClass');
    }        
});    

var a = new MyBetterClass(); 
```

当`doStuff`在某处被调用时，我希望 doExtraStuff 也被调用。我该怎么做呢？这样我就不必弄乱别人的代码，但是当他们的代码发生某些事情时，我希望我的代码发生其他事情。父类中没有触发事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T15:11:54.383

您不能在父类中调用子类方法。你可以重写`doStuff`父类的方法，通过子类的属性调用父类的方法`parent`，然后实现自己的代码。

**超级班**

```
var MyClass = new Class({
    Implements: [Options,Events],
    initialize: function(){

    },
    doStuff: function() {
        console.log('In MyClass');
    }
}); 
```

**子类**

```
var MyBetterClass = new Class({
    Extends: MyClass,
    initialize: function() {

    },
    doStuff: function() {
        this.parent();
        console.log('In MyBetterClass');
        // your own implementation of this method
    }        
}); 
```

然后

```
var a = new MyBetterClass();
a.doStuff(); // prints on console "In MyClass" and "In MyBetterClass" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T15:11:13.883

你应该做的是覆盖 MyBetterClass 中的 doStuff 方法，然后在超类上调用被覆盖的方法：

```
var MyClass = new Class({
    Implements: [Options,Events],
    initialize: function(){

    },
    doStuff: function() {
        console.log('In MyClass');
    }
});

var MyBetterClass = new Class({
    Extends: MyClass,
    initialize: function() {

    },
    doStuff: function() {
        this.parent();
        console.log('In MyBetterClass');
    }        
});    

var a = new MyBetterClass(); 
```

# javascript - jQuery：将 JSON-Object 转换为 HTML-List 改进

> ID：10756777
> 
> 赞同：0
> 
> 时间：2012-05-25T15:01:04.157
> 
> 标签：javascript, jquery, json

我编写了一个将多维 json 对象转换为 html 列表的函数：http: [//jsfiddle.net/KcvG6/](http://jsfiddle.net/KcvG6/)

1.  为什么该函数会使列表加倍？更新：http: [//jsfiddle.net/KcvG6/2/](http://jsfiddle.net/KcvG6/2/)

2.  做的逻辑有什么改进吗？

3.  原始 JSON 对象在 url 属性中生成 url。这些 url 是使用给定的 slug 生成的。如果给定的 slug 尚不可用（用户尚未选择任何内容或不应该呈现链接的其他内容：

    ```
    'image': {
        'index': {
            'name': 'Show all images',
            'url': Routing.generate('AcmeImageBundle_Image_index')
        },
        'new': {
            'name': 'Add new image',
            'url': Routing.generate('AcmeImageBundle_Image_new')
        },
        'edit': {
            'name': 'Edit selected image',
            'url': Routing.generate('AcmeImageBundle_Image_edit', { 'slug': imageSlug })
        },
        'delete': {
            'name': 'Delete selected image',
            'url': Routing.generate('AcmeImageBundle_Image_delete', { 'slug': imageSlug })
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:09:23.417

由于调用了.children()，它发生了两次。您正在用列表替换每个子元素。相反，选择第一个孩子并替换它。

```
$(container).children().first().replaceWith(renderList(objectCollection)); 
```

[http://jsfiddle.net/KcvG6/1/](http://jsfiddle.net/KcvG6/1/)

如果您需要删除`<p>`元素，请单独执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:13:18.940

[http://jsfiddle.net/VF2sm/](http://jsfiddle.net/VF2sm/)

假设您只想替换`ul`文档中的 ，调用`.children`是不够的。您需要使用`.find`，否则它将替换所有孩子，其中您目前有 2 个

```
$(container).find('ul').replaceWith(renderList(objectCollection)); 
```

或者，您可以轻松清除所有内容并用您的列表替换它，如下所示：

```
$(container).html(renderList(objectCollection)); 
```

就您的`renderList()`功能质量而言，我认为它还不错。

# java - 错误：Button 类中的方法 addActionListener 不能应用于给定类型；

> ID：10756782
> 
> 赞同：2
> 
> 时间：2012-05-25T15:01:19.447
> 
> 标签：java, actionlistener

我只研究了直到方法，没有足够的耐心等到我的 UNI 教我剩下的东西，所以我发现这很有趣......我想创建一个中间有一个圆圈的 GUI，它会根据你用 java 按下的按钮移动。经过大量阅读后，我设法以这种方式完成了它。因此，在我遇到问题中提到的错误之前，我有 19 个错误，只有当我弄清楚所有错误时，这个错误才突然出现。我希望我不会激怒任何人，因为我确信这个错误是由于缺乏编程基础造成的。任何帮助将不胜感激。我指出错误发生在“<---”

```
import java.awt.*;
import java.awt.event.*;
public class Move_the_ball extends Frame {

public static void main(String[] args) {
    Move_the_ball me = new Move_the_ball();
    me.setVisible(true);
}
public Move_the_ball(){
    setSize(700,700);
    setLocation(100,100);
    setTitle("Moving the ball");
    setLayout(new BorderLayout());
    Panel buttonPanel = new Panel();
    buttonPanel.setBackground(Color.blue);
    buttonPanel.setLayout(new FlowLayout());

    Button goUp = new Button("Go up");
    goUp.addActionListener(this); <-----------------
    buttonPanel.add(goUp);

    Button goDown = new Button("Go down");
    goDown.addActionListener(this); <--------------
    buttonPanel.add(goDown);

    Button turnRight = new Button("Turn right");
    turnRight.addActionListener(this);  <-------------
    buttonPanel.add(turnRight);

    Button turnLeft = new Button("Turn left");
    turnLeft.addActionListener(this); <---------------
    buttonPanel.add(turnLeft);
}
    public void paint(Graphics g)
        {
        g.fillOval(x,y,h,d);
}
    private int x=200;
    private int y=100;
    private int h=50;
    private int d=50;

    public void actionPerformed (ActionEvent e){
        String actionCommand = e.getActionCommand();
        if(actionCommand.equals("Go up"))
        {
            y=y-5;
            repaint();
        } else if (actionCommand.equals("Go down"))
        {
            y=y+5;
            repaint();
        } else if (actionCommand.equals("Turn right"))
        {
            x=x+5;
            repaint();
        } else if (actionCommand.equals("Turn left"));
        {
            x=x-5;
            repaint();
        }
    } 
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:03:29.930

您的`Move_the_ball`类必须实现`java.awt.event.ActionListener`接口才能使其工作。

```
import java.awt.*;
import java.awt.event.*;
public class Move_the_ball extends Frame implements ActionListener {

   public void actionPerformed(ActionEvent e) {
      // handle the e event
   } 
```

# .htaccess - htaccess 重写 URL 以附加 Google 活动跟踪导致重定向循环

> ID：10756785
> 
> 赞同：1
> 
> 时间：2012-05-25T15:01:32.780
> 
> 标签：.htaccess, redirect, url-rewriting, google-analytics

我们正在尝试使用指向我们主站点的别名 URL 来跟踪离线活动。当域是别名域之一时，我们需要将 Google 分析活动跟踪代码附加到 URL 的末尾。

以下重定向附加了正确的信息，但会导致重定向循环，我认为这是因为在应用 RewriteRule 后 RewriteCond 仍然匹配为 true。

```
RewriteCond %{HTTP_HOST} ^bikerhelp911\.com$
RewriteRule (.*) http://bikerhelp911.com/?utm_source=bikerhelp911.com&utm_medium=radio&utm_campaign=Radio%2BCampaign$1 [R=302,L] 
```

我觉得我可能以错误的方式做这件事，或者让它变得比需要的更复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T15:15:17.317

将您的代码更改为：

```
RewriteCond %{QUERY_STRING} !utm_campaign= [NC]
RewriteCond %{HTTP_HOST} ^bikerhelp911\.com$
RewriteRule ^(.*)$ /?utm_source=bikerhelp911.com&utm_medium=radio&utm_campaign=Radio%2BCampaign$1 [R=302,L,QSA] 
```

# json - WSO2 ESB：Axis2-JSON 的自定义

> ID：10756787
> 
> 赞同：0
> 
> 时间：2012-05-25T15:01:37.790
> 
> 标签：json, wso2, axis2, wso2esb, esb

我想更正 WSO2 ESB 中包含的 axis2-json 的 JSON 解析错误。包含的确切文件名是：./repository/components/plugins/axis2-json-1.6.1.wso2v4.jar

所以，我想有定制。

关于 apache.org svn repo 的来源，axis2-json con 的确切自定义是什么？

所有的变化都已经在上游了吗？

我可以使用新版本的axis2-json，比如axis2-json-1.6.2吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:24:53.127

您可以在这些位置找到 WSO2 产品依赖项的源代码。

*   [https://svn.wso2.org/repos/wso2/carbon/kernel/trunk/dependencies](https://svn.wso2.org/repos/wso2/carbon/kernel/trunk/dependencies)
*   [https://svn.wso2.org/repos/wso2/carbon/platform/trunk/dependencies](https://svn.wso2.org/repos/wso2/carbon/platform/trunk/dependencies)

所以我想你可以在这里找到axis2-json源代码.. [https://svn.wso2.org/repos/wso2/carbon/kernel/trunk/dependencies/axis2/1.6.1-wso2v5/modules/json](https://svn.wso2.org/repos/wso2/carbon/kernel/trunk/dependencies/axis2/1.6.1-wso2v5/modules/json)

请随时添加问题并在[WSO2 JIRA](https://wso2.org/jira/)提交补丁。

# xhtml - 可以有两个跨度标签和一个跨度关闭标签

> ID：10756788
> 
> 赞同：1
> 
> 时间：2012-05-25T15:01:47.760
> 
> 标签：xhtml

我正在阅读某人编写的代码。我需要进行修改，但我看到他们已经使用

```
 <span class="TextUnderlined">
        <span class="colorText">
             </span> 
```

这可能吗？我认为每个跨度标签都需要关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:03:13.653

你是对的。

**每个 span 标签都应该有自己的结束标签。**

浏览器可能会处理此错误这一事实并不能使其正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:15:54.543

根据 HTML 规范，所有标签都必须有其结束标签。所以答案是否定的。

话虽如此，没有人阻止您这样做，但这会导致大多数浏览器出现问题。

为什么 2 个跨度需要一个结束跨度标签？

# iphone - NSBundle mainBundle 给出 sigabrt 错误？

> ID：10756791
> 
> 赞同：0
> 
> 时间：2012-05-25T15:01:50.803
> 
> 标签：iphone, objective-c

我正在使用 xCode 4.2 来构建 iPhone 应用程序。

**相关问题** - 我认为这可能是我遇到的真正问题： [为什么 tableView dequeueReusableCellWithIdentifier:CellIdentifier 返回 null？](https://stackoverflow.com/questions/10759153/why-does-tableview-dequeuereusablecellwithidentifiercellidentifier-return-null)

但无论如何，让我继续这个问题：

`[[NSBundle mainBundle] loadNibNamed:@"WSCSessionCell" owner:nil options:nil];`当我以某种方式而不是另一种方式设置 rootviewcontroller 时，该行的某些内容会给我一个 SIGABRT 错误。让我从继承 UITableViewController 的 WSCSessionTable 中的示例代码开始：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"WSCSessionCell";

    WSCSessionCell *cell = (WSCSessionCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        NSArray * topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"WSCSessionCell" owner:nil options:nil];

        for(id currentObject in topLevelObjects)
        {
            if([currentObject isKindOfClass:[UITableView class]])
            {
                cell = (WSCSessionCell *) currentObject;
                break;
            }
        }

    }
return cell;
} 
```

**场景 1 - 没问题 - 没有 SIGABRT**

当我的 NavigationController rootviewcontrols WSCSessionTable 时，上面的代码可以正常工作。这是我的故事板的外观以供参考。 ![导航控制器到 WSCSessionTable](../Images/f2be05f3acdf87bdbe15f5533f233eb8.png)

**场景 2 - 问题，代码导致 SIGABRT**

当我在导航控制器和 WSCSessionTable 之间放置 UIViewController 时，上面的代码会导致 SIGABRT 错误。然后我使用一个按钮来实例化 WSCSessionTable。这是我的故事板设置

![通过点击按钮激活 WSCSession](../Images/dbaf764ec994b8f625bce8ec40d7fc03.png)

这是按钮的事件处理程序

```
- (IBAction)goToSession:(id)sender
{
    wscAppDelegate *appDelegate = (wscAppDelegate *)[[UIApplication sharedApplication] delegate];
    UIStoryboard * storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    wscSessions *childView = [storyboard instantiateViewControllerWithIdentifier:@"sessionstable"];
//    wscSessions *childView = [storyboard instantiateViewControllerWithIdentifier:@"sessionstable"];
    childView._arrData = appDelegate._arrSession;
    childView._arrSpeaker = appDelegate._arrSpeaker;
    childView.title = @"SEssions";
    [self.navigationController pushViewController:childView animated:YES]; 
    } 
```

我在 nsbundle mainbundle 行的 cellforrowatindexpath 函数中遇到 sigabrt 错误。这是错误输出

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/dduvernet/Library/Application Support/iPhone Simulator/5.1/Applications/54EF04FD-E010-48BB-A0F4-EB0F12BF8D6A/gmmiphone.app> (loaded)' with name 'WSCSessionCell''
*** First throw call stack:
(0x1da1022 0x2359cd6 0x1d49a48 0x1d499b9 0xa98638 0xa99eb7 0x3d9f 0x911c54 0x9123ce 0x8fdcbd 0x90c6f1 0x8b5d21 0x1da2e42 0x181679 0x18b579 0x1104f7 0x1123f6 0x111ad0 0x1d7599e 0x1d0c640 0x1cd84c6 0x1cd7d84 0x1cd7c9b 0x28f07d8 0x28f088a 0x877626 0x2138 0x2095 0x1)
terminate called throwing an exception(gdb) 
```

 有谁知道我如何通过按钮选项卡向下实例化 WSCSessiontable ？

**相关问题** - 我认为这可能是我遇到的真正问题： [为什么 tableView dequeueReusableCellWithIdentifier:CellIdentifier 返回 null？](https://stackoverflow.com/questions/10759153/why-does-tableview-dequeuereusablecellwithidentifiercellidentifier-return-null)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T20:03:41.230

部分问题是您正在搜索 UITableView 而不是 UITableViewCell。

# javascript - 如何等待 LESS JS 加载 .less 文件？

> ID：10756794
> 
> 赞同：3
> 
> 时间：2012-05-25T15:02:15.017
> 
> 标签：javascript, less, domready

我的网页包含一个`less`文件而不是`css`. 这是由`less`js 脚本解析的。我网站的 js 脚本在 dom 就绪时触发，并基于不同的 dom 尺寸布局页面。

问题是，通过慢速网络，我的 js 文件可以在`less`js 能够下载 `less`文件之前触发。由于这是一个未知的文件类型，所以浏览器没有义务等待这个文件下载然后触发 dom 准备好，即使它在该`<head>`部分中。在这种情况下，我的 js 读取的尺寸不正确，因为尚未应用 CSS 规则。

所以，我的问题是，我怎么知道`less`文件何时下载。这样我的 js 代码就可以`less`在下载并准备好 dom 后被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T21:17:31.620

查看**[这个类似问题](https://stackoverflow.com/a/3178816/1469507)**的答案- 听起来您只需要触发一个`less.refreshStyles()`事件，该事件将`<style>`使用`type="text/less"`.

# sql - SQL Insert INTO - 添加不存在的 ID

> ID：10756803
> 
> 赞同：1
> 
> 时间：2012-05-25T15:02:39.587
> 
> 标签：sql, where, exists

我正在尝试清理表中的数据，以便创建一对一的关系。具有主键的表比它共享 1 对 1 关系的表具有更多的记录。为了解决这个问题，我试图将表 2 中缺少的 ID 插入到表 2 中。

```
INSERT INTO medical_Surveillance(dbo.Medical_surveillance.EmpID)
SELECT dbo.EmployeeInformation.EmpID
FROM EmployeeInformation
WHERE not exists (select dbo.medical_Surveillance.EmpID from medical_Surveillance
WHERE dbo.medical_Surveillance.EmpID = dbo.EmployeeInformation.EmpID) 
```

这个 SQL 语句有什么问题？运行时，它会尝试将值插入到 dbo.Medical_surveillance.EmpID 以外的列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:06:30.670

你可以用左连接做同样的事情：

```
INSERT INTO medical_Surveillance(EmpID)
SELECT EmployeeInformation.EmpID
FROM EmployeeInformation
    LEFT JOIN medical_surveillance ON EmployeeInformation.EmpID = medical_surveillance.EmpID
WHERE medical_surveillance.EmpID IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T15:57:44.170

已解决，SQL 语句没有任何问题。我有其他列设置为非空，但没有默认值。当语句运行时，它会尝试将空值插入这些列。通过添加默认值来修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T15:07:42.903

```
INSERT INTO medical_Surveillance(EmpID)
SELECT ei.EmpID
FROM EmployeeInformation as ei
WHERE ei.EmpID not in (select ms.EmpID from medical_Surveillance as ms) 
```

# ruby-on-rails-3 - Rails API - 版本主义者与火箭裤

> ID：10756806
> 
> 赞同：4
> 
> 时间：2012-05-25T15:02:46.620
> 
> 标签：ruby-on-rails-3, api, rest

想知道是否有人对这些宝石有任何经验？

*   [版本主义者](https://www.ruby-toolbox.com/gems/versionist)
*   [火箭裤](https://www.ruby-toolbox.com/gems/rocket_pants)

或者你能推荐一个更好的来帮助我为我的应用程序添加一个宁静的 API 吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-22T06:16:05.073

这里有一些要结帐：

**Grape** - 有点像 Sinatra，但用于构建 API。建立在 Rack 之上，具有最小的依赖性。

**Rocket Pants** - 一组与 Rails 一起构建 API 的工具，受 Grape 启发，但具有更深的 Rails 和 ActionPack 集成

**Rails::API** - Rails 减去构建 api 不需要的东西。

我在几个项目中使用了 Grape，我发现它非常适合中小型 API，特别是如果您想在现有的 Rails 应用程序之上添加 API，更喜欢与 Rails 控制器干净分离并且仍然能够共享两者之间的模型逻辑。

就像 Sinatra 一样，这意味着定义端点是直截了当和灵活的，这可能是好事也可能是坏事。如果你不遵守纪律，在更大的 API 上事情会变得有点混乱。

相比之下，Rocket Pants 更加固执己见，它为您提供了更多的结构和开箱即用的功能。使用 Grape，随着 API 的增长，您将需要找到一种方法来自己重构和构建代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:15:18.197

在 RailsCast 上有很多关于这个主题的信息：

*   [RABL](http://railscasts.com/episodes/322-rabl)
*   [Rails API 宝石](http://railscasts.com/episodes/348-the-rails-api-gem)
*   [REST API 版本控制](http://railscasts.com/episodes/350-rest-api-versioning)
*   [保护 API](http://railscasts.com/episodes/352-securing-an-api)

# memory-management - DXL 从编辑模式更改为读取模式后释放内存？

> ID：10756807
> 
> 赞同：2
> 
> 时间：2012-05-25T15:02:47.370
> 
> 标签：memory-management, ibm-doors

我陷入了一个 DXL 问题，非常感谢任何帮助。我必须在很多模块中创建链接，因此必须在编辑模式下打开它们。但是，如果我一次在编辑模式下打开它们，那将使用超过 2GB 的 DOORS 内存。所以我决定在编辑模式下打开它们中的每一个来创建链接，然后降级到只读模式。但是这种方式也不会释放内存。

有没有办法释放编辑模式引起的内存？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:04:59.527

添加完链接后，您可以在循环中保存并关闭模块。

```
Folder f = current
Item i
Module mod

for i in f do
{
  if(type(i) "" == "Formal")
  {
    mod = edit(fullName(i) "", false)

    //process and add links here

    save mod
    close mod
  }
} 
```

关闭模块会释放资源，这可能不是你想要的。如果不是，请解释您在程序中要执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:40:44.790

解决您的问题的最佳机会可能是一次打开尽可能少的模块，并在您完成它们时关闭它们。如果这不能解决您的问题，因为您的两个模块已经消耗了所有内存，您可以切换到 64 位操作系统和 DOORS 客户端（如果可用）并升级到 4、8 或 16GB 的 RAM。

顺便说一句：DOORS 的内存消耗令人头疼；-) 我为旧版本（8.3）的 DOORS 开发了很多 DXL 脚本，而具有大量字符串的复杂脚本可能会加剧内存消耗。因此，我鼓励您在所有由您的脚本直接或间接执行的 DXL 脚本中搜索可能的内存泄漏。大多数 DOORS 模块包含 DXL 属性或列，这些属性或列会导致内存分配，如果相应的模块关闭，这些分配将不会被释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-28T11:26:25.610

所以我用打开的模块声明 Array 并在最后关闭它。

```
int sizeOfOpenModules = 0
Array openModules = create (1,1) 
```

当我打开新模块时，我会：

```
 put (openModules, m, 1, sizeOfOpenModules) 
```

当想要获得其中一个打开的模块时：

```
Module m = (Module get (openModules, 1, i)) 
```

最后：

```
void closeAllOpenModules () {
    for (i = 0; i < sizeOfOpenModules; i++) {
        Module m = get (openModules, 1, i)
        save (m)
        close (m)
    }
} 
```

# php - 显示/隐藏文本框

> ID：10756812
> 
> 赞同：2
> 
> 时间：2012-05-25T15:03:14.080
> 
> 标签：php, javascript

如果我从下拉列表中选择一个类别，我有显示/隐藏文本框的代码。它工作正常，但我想要的是如果有人选择了不同的类别，那么文本框就会消失或被另一个文本框替换。例如：如果我选择食物，则会出现一个文本框，如果我选择不同的类别，则先前的文本框会再次隐藏而不刷新整个页面。这是我到目前为止所得到的：

```
<script language="javascript" type="text/javascript">
    function addSubject(){
        selectedSubject = document.getElementById('category').value
        if (selectedSubject == 'food'){
            document.getElementById('box').style.display = 'block';
        }
    }
</script>
<?
    include ('connect.php');
    $query="SELECT id, name FROM category ";
    $result=mysql_query($query);
?>
<form>
    <select name="category" id="category" onchange="addSubject()">
        <option>Select Category</option>
        <?php while($row=mysql_fetch_array($result)) { ?>
            <option value=<?php echo $row['id']?>><?php echo $row['name']?></option>
        <?php } ?>
    </select>
    <div class="box"  id="box" style="display: none;">
        <div>
            <span>Title :</span><input type="text" name="text" size="8" maxlength="7" />
        </div>
    </div>
</form> 
```

像往常一样提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:09:55.400

你有像 jquery 这样的库吗？如果是这样，您可以执行以下操作：

```
jQuery('#box').replaceWith('<newelement>') 
```

在此处查看他们的文档：http: [//api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:40:41.220

如果我正确理解您的问题，您可以使用这样的功能：

```
// Expects your SELECT element as EL
function addSubject( el ){
    // Gets current selected value, as well as all DIVs
    var newValu = el.value,
        kiddies = document.getElementById("options").childNodes,
        klength = kiddies.length, curNode;
    // Counts through all childNodes of the DIV container
    while ( klength-- ) {
      curNode = kiddies[klength];
      // If the current node is a DIV (avoid text nodes )
      if( curNode.nodeName == "DIV" )
        // If the current node id equals our selected value, show the node
        curNode.style.display = curNode.id == newValu ? "block" : "none" ;
    }
} 
```

这需要您将`div`元素包装在容器中，并传递`this`给您的`onchange`函数调用：

```
<select onchange="addSubject(this)">
    <option>Box</option>
    <option>Food</option>
    <option>Stack</option>
</select>
<div id="options">
    <div id="Box">Box: <input type="text" /></div>
    <div id="Food">Food: <input type="text" /></div>
    <div id="Stack">Stack: <input type="text" /></div>
</div>​ 
```

演示：http: [//jsfiddle.net/8nFCB/](http://jsfiddle.net/8nFCB/)

# c - mingw c 编译

> ID：10756815
> 
> 赞同：0
> 
> 时间：2012-05-25T15:03:19.097
> 
> 标签：c, compilation, mingw

我正在尝试编译一个非常简单的 C 程序。使用自动安装程序安装 MinGW，然后在我的环境变量中添加**C:\MinGW\bin 。**

***测试.c***

```
#include <stdio.h>
int main()
{
  printf("Hello");
  return 0;
} 
```

当我编译这个：

> gcc test.c -o test.exe

但我得到了这个错误，

> test.c：在函数'main'中：test.c:5:12：警告：字符常量对其类型来说太长[由默认启用] test.c:5:5：警告：传递'printf'的参数1从整数中生成指针而不进行强制转换 [默认启用] c:\mingw\bin../lib/gcc/mingw32/4.6.2/../../../../include/stdio.h: 294:37：注意：预期为“const char *”，但参数的类型为“int”

原谅我是菜鸟，试图学习一些有价值的东西。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:21:41.473

您收到的错误消息与 GCC 为以下代码生成的错误消息完全匹配：

```
#include <stdio.h>
int main()
{
  printf('Hello');
  return 0;
} 
```

那就是双引号被单引号代替。

使用记事本或更好的 Notepad++ 检查发生了什么。

# php - Ajax时间间隔调用一个php函数

> ID：10756816
> 
> 赞同：0
> 
> 时间：2012-05-25T15:03:19.960
> 
> 标签：php, ajax

我有一个调用 php 文件的 ajax 代码：

```
function ajaxRequest(){
var requestData; 

try{
    // Opera 8.0+, Firefox, Safari
    requestData = new XMLHttpRequest();
} catch (e){
    // IE
    try{
        requestData = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            requestData = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Your browser is brokeded.
            alert("Please try again later!");
            return false;
        }
    }
}
// Send/receive data
requestData.onreadystatechange = function(){
    if(requestData.readyState == 4){
        document.getElementById("testDiv").innerHTML = requestData.responseText;
    }
}
requestData.open("GET", "tester.php", true);
requestData.send(null); } 
```

我实际上想要代码做的是每隔一段时间在同一页面上调用一个 php 函数。我打算在向 mysql 数据库中的表中添加新行时显示通知。请帮我编辑这段代码，或者如果上面的代码不行的话，可能是一个新的。我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T15:13:47.160

我建议你使用 jQuery，它是一个提供多种功能的 js 框架。您的代码示例如下：

```
        函数调用我（）
        {
            $.ajax({
                   类型：“获取”，
                   网址：“test.php”，
                   数据：“id=1”，
                   成功：函数（响应）{
                              $("#testDiv").html(响应);
                            }
           });
        }

    // 叫它
    设置间隔（呼叫我，5000）；//每5秒

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T21:26:15.937

```
<script>
       function callMe()
        {
            $.ajax({
                   type: "GET",
                   url: "count.php",
                   data: "id=1",
                   success: function(response){
                              $("#Count").html(response);
                            }
           });
        }

    // Call it 
    // "setInterval" means every 5 secs 
    // "setTimeout" just once...

    setInterval(callMe, 5000); 
</script>  

<p>Count:<span id="Count"></span></p> 
```

# spring - 一起加载 Spring Data Rest 和 Spring Data JPA

> ID：10756828
> 
> 赞同：0
> 
> 时间：2012-05-25T15:04:38.790
> 
> 标签：spring, rest, spring-data-jpa, spring-data-rest

我在同一个 Web 应用程序中同时尝试 Spring-Data-JPA 和 Spring-Data-Rest，但它们不能正常工作。该应用程序具有所需的所有 Maven 依赖项，并且它们是最新的。

可以同时使用两个 Web 层吗？

可能是什么配置错误？

有人建议正确设置它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:56:40.713

我已经并排使用了这两种技术，没有问题。

我有一个现有的 Spring MVC 应用程序，其中包含使用 Spring 数据 JPA 创建的存储库。然后我在顶部添加了 Spring 数据 REST。

### Servlet 3.0 配置

```
 // Register and map the standard dispatcher servlet
    ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", new DispatcherServlet(mvcContext));
    dispatcher.setInitParameter("contextConfigLocation", "/WEB-INF/spring/appServlet/servlet-context.xml");
    dispatcher.setLoadOnStartup(1);
    dispatcher.addMapping("/app/*");

    // Register the Spring data rest exporter servlet
    ServletRegistration.Dynamic exporter = servletContext.addServlet("exporter", RepositoryRestExporterServlet.class);
    exporter.addMapping("/rest/*"); 
```

### Maven pom.xml 配置

```
<!--
NB. This pulls in Spring data JPA
and just about everything else you need.
-->
<dependency>
  <groupId>org.springframework.data</groupId>
  <artifactId>spring-data-rest-webmvc</artifactId>
  <version>1.0.0.RC2</version>
</dependency> 
```

您需要`xxx-export.xml`在`META-INF/spring-data-rest`. 我只是将其指向我现有的根配置上下文。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans.xsd">

    <import resource="../../root-context.xml"/>

</beans> 
```

### 最后，我的根配置

```
 <context:component-scan base-package="my.package.spring"/>

  <jpa:repositories base-package="my.package.spring.repo"/>

  <!-- enable the configuration of transactional behavior based on annotations -->
  <tx:annotation-driven transaction-manager="transactionManager"/>

  <bean id="entityManagerFactory" ...>
      ...
  </bean>

  <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
  </bean>

  <bean id="dataSource" ...>
      ...
  </bean> 
```

我现有`@Controller`的 s 仍然可用，`localhost:8080/myapp/app/*`新的 rest 端点导出到`localhost:8080/myapp/rest/*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T08:51:39.950

我刚刚遇到同样的问题 - 当我添加`spring-data-rest-webmvc`到 maven时`pom.xml`，Spring data JPA 停止工作（加载 Spring 的问题`applicationContext.xml`- 未知属性）。

问题在于`spring-data-jpa`版本不匹配 -**`spring-data-rest-webmvc`它有自己的依赖关系`spring-data-jpa`**，所以我不得不删除我`spring-data-jpa`的`pom.xml`：

**坏`pom.xml`：**

```
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-jpa</artifactId>
    <version>1.4.2.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-rest-core</artifactId>
    <version>1.0.0.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-rest-webmvc</artifactId>
    <version>1.0.0.RELEASE</version>
</dependency> 
```

**固定的：**

```
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-rest-core</artifactId>
    <version>1.0.0.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-rest-webmvc</artifactId>
    <version>1.0.0.RELEASE</version>
</dependency> 
```

# c# - Winforms应用程序不保存下载的文件

> ID：10756834
> 
> 赞同：0
> 
> 时间：2012-05-25T15:04:51.130
> 
> 标签：c#, winforms, updates

我正在创建一个小型 c# winforms 应用程序。它使用 sqlite 数据库来存储数据，我被要求在此应用程序中添加更新功能，以便用户可以更新 sqlite 文件以及任何其他文件，而无需重新安装应用程序。

问题是，当我进行更新时，它看起来好像一切正​​常，没有错误等，但是当我查看应用程序安装目录时，一旦下载了更新，就会丢失一些下载的文件（通常是 pdf 文件）创建一个 Updates.txt 文件来跟踪它完成的更新。如果我随后卸载并重新安装该应用程序，即使缺少 Updates.txt 文件，它也会像它已经完成更新一样。

奇怪的是，如果我在 Visual Studio 中运行并进行更新，那么它在 100% 的时间内都可以正常工作，而这只是在我构建安装项目并安装导致问题的项目时。也许安装项目中有一个设置导致文件被复制到其他地方？我完全不知道。

请帮忙。谢谢。

编辑：这就是我下载文件的方式

```
String filename = "//test.pdf";

WebClient client = new WebClient();
client.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);

client.DownloadFileAsync(new Uri(dlFile), System.IO.Directory.GetCurrentDirectory() + filename); 
```

更新：这是一个权限问题，为了解决这个问题，我[强制应用程序以管理员身份运行](https://stackoverflow.com/questions/3598824/how-to-force-my-c-sharp-winforms-program-run-as-administrator-on-any-computer)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:10:10.953

如果您在 Program Files 中安装应用程序，那么您可能没有写入文件的权限。您需要以管理员身份运行应用程序，或通过代码提升它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:11:12.823

如果这不是权限问题，我会感到惊讶。让适当的用户读取/写入您正在写入的文件夹，看看这是否不能解决问题。它在 Visual Studio 中工作的原因是 Visual Studio（很可能）以管理员身份运行，因此它的子任务也是如此，比如这个。如果这不起作用，请添加更多调试语句以查看哪里开始出错。

# ios - 将 UITextView 光标位置设置为文本结尾

> ID：10756836
> 
> 赞同：10
> 
> 时间：2012-05-25T15:04:56.303
> 
> 标签：ios, uitextview

我整个早上都在寻找解决方案，但还没有找到可行的方法。

我有一个文本视图，其中包含一些现有的固定文本，我不希望用户能够修改。在这种情况下，我的每个文本视图都以“1.”、“2.”等开头。想法是他们输入的文本将为我稍后要做的事情编号。

我不希望用户能够删除此文本（它本质上是“永久的”）。我也不想让他们开始在这个前置文本的中间添加文本。

为了处理这个问题，我做了：

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text 
{
    if (range.location < 3) return NO;

    return YES;
} 
```

这很好用，除了如果用户触摸视图的“1.”、“2.”等部分中的任何位置，它会将光标设置在那里，然后由于范围位置而阻止用户输入文本查看。在这种情况下，我想做的是将光标（可能在 textViewDidBeginEditing 中）设置到视图中文本的末尾。但是，无论我使用什么 selectedRange 组合，我都无法让该死的光标移动到最后。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T15:18:30.620

将光标移动到末尾

```
textView.selectedRange = NSMakeRange([textView.text length], 0); 
```

或将光标移动到第三个字符之后

```
textView.selectedRange = NSMakeRange(3, 0); 
```

另一种可能更好的方法可能是在用户开始编辑时清除前三个字符，然后在编辑结束后将它们重新添加。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-09T08:44:01.357

已经很晚了，但我在一些博客中找到了可行的解决方案。它需要一点技巧

```
- (void) textViewDidBeginEditing:(UITextView*)textview
{
   [self performSelector:@selector(placeCursorAtEnd:) withObject:textview afterDelay:0.01];
}

- (void)placeCursorAtEnd:(UITextView *)textview
{
     NSUInteger length = textview.text.length;

    textview.selectedRange = NSMakeRange(length, 0);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-25T15:12:00.810

您可以考虑注册到`UIKeyboardWillShowNotification`并在收到通知后将 textview 设置`userInteractionEnabled`为`NO`.

此外，以 if等于字符串`shouldChangeTextInRange`的方式实现该方法，您不更改文本（意味着用户正在点击退格键）。当用户完成文本编辑后恢复用户交互，然后就可以了。`replacementText``@""``@""`

祝你好运！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-27T22:10:42.190

我试图制作一个货币字段。我不希望用户按整个字段并可能删除格式化文本。我发现将光标保持在末尾的最简单方法是在 UITextField 的子类中执行以下操作

```
-(void) setSelectedTextRange:(UITextRange *)selectedTextRange{

    [super setSelectedTextRange:selectedTextRange];
    self.text = self.text;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-16T18:33:28.530

```
extension UITextView {
    func moveCoursoreToEnd(){
        selectedTextRange = textRange(from:endOfDocument, to: endOfDocument)
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-07T09:41:31.677

此方法隐藏自动更正和键盘不跳转。

```
- (void)rejectAutoCorrectSuggestionInTextView:(UITextView *)textView
{
    if ([textView isFirstResponder])
    {
        NSString *original = textView.text;
        NSRange originalRange = textView.selectedRange;
        CGPoint originalOffset = textView.contentOffset;

        [UIView animateWithDuration:.00001 animations:^{
            textView.text = [textView.text stringByAppendingString:@"|"];
            NSRange range;
            range.location = textView.text.length-1;
            range.length = 0;
            textView.selectedRange = range;
            textView.text = [textView.text substringToIndex:textView.text.length - 1];
        }];

        NSString *final = textView.text;

        if (![original isEqualToString:final])
        {
            textView.text = original;
            textView.selectedRange = originalRange;
            [textView setContentOffset:originalOffset animated:NO];
        }
    }
} 
```

# jpa - JPA 多对多更新

> ID：10756840
> 
> 赞同：2
> 
> 时间：2012-05-25T15:05:10.147
> 
> 标签：jpa, many-to-many

只是另一个关于 JPA 中多对多关系的问题。我的数据库中有以下结构：

```
 ______      ___________      _______
| user |    | user2item |    | item  |
|------|    |-----------|    |-------|
| id   |    | user_id   |    | id    |
| name |    | item_id   |    | name  |
 ------      -----------     | type  | 
                              ------- 
```

现在我想将一个用户的分配更新为给定类型的项目。所以不幸的是我不能简单地做：

```
user.setItems(newItemList); 
```

因为它会删除对其他类型项目的分配。在普通的旧 SQL 中，我会这样做：

```
DELETE FROM user2item WHERE user_id = ? AND item_id IN (SELECT id FROM item WHERE type=?);
INSERT INTO user2item (user_id, item_id) VALUES(?,?); 
```

但是因为我使用 JPA 和 QueryDSL 纯 SQL 是没有选择的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:11:12.083

如果我理解正确，您想从项目列表中删除给定类型的所有项目，然后将其他项目添加到此列表中。

```
List<Item> items = user.getItems();
for (Iterator<Item> it = items.iterator(); it.hasNext(); ) {
    Item item = it.next();
    if (item.getType().equals(theType)) {
        it.remove();
    }
}
items.addAll(newItemList); 
```

基本的集合操作。您可能应该将此逻辑封装到 User 实体的方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:24:21.923

如果 user2item 不能作为实体使用，则需要通过域模型来表达它。您的案例的替代解决方案是使用带有 Querydsl JPA 的本机查询或使用字符串形式的本机查询。

# jquery - 移除 jQuery 自定义事件绑定

> ID：10756843
> 
> 赞同：0
> 
> 时间：2012-05-25T15:05:28.460
> 
> 标签：jquery, events, unbind

我有一些代码可以在按下转义键时关闭自定义灯箱。`keyup`一旦按下了转义键，我就尝试编写它来解除绑定事件，但它并没有解除绑定。

```
 $(document).on('keyup.cookieLaw', function(ev){
            if(ev.keyCode == 27) {
                $(document).off('keyup.cookieLaw');
                methods.toggleInfo(ev);
            }
        }); 
```

我不能`one`代替它，因为按下*任何*`on`键后它都会停止- 我需要等待转义键。

 *非常感谢任何/所有帮助！*

# powershell - "." 和有什么不一样 和 [System.ENVIRONMENT]::CurrentDirectory 在 powershell 中？

> ID：10756848
> 
> 赞同：4
> 
> 时间：2012-05-25T15:05:43.080
> 
> 标签：powershell, filesystems

```
PM> $path = "."
PM> Get-ChildItem $path -filter '.nuget'

    Directory: C:\Users\david\Documents\Visual Studio 2010\Projects\...

Mode                LastWriteTime     Length Name                                                                                                                                                                
----                -------------     ------ ----                                                                                                                                                                
d----        25.05.2012     16:20            .nuget                                                                                                                                                              

PM> $cwd = [System.ENVIRONMENT]::CurrentDirectory
PM> $cwd
C:\Windows\system32
PM> Get-ChildItem $cwd -filter '.nuget'
PM> Get-ChildItem $cwd -filter 'adsnt.dll'

    Directory: C:\Windows\system32

Mode                LastWriteTime     Length Name                                                                                                                                                                
----                -------------     ------ ----                                                                                                                                                                
-a---        14.07.2009     03:14     260608 adsnt.dll                                                                                                                                                           

PM> [System.IO.PATH]::GetFullPath(".")
C:\Windows\system32
PM> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T09:03:46.680

`[System.Environment]::CurrentDirectory`返回 PowerShell**进程**的工作目录。要获取控制台会话的工作目录，请使用`Get-Location`cmdlet（或 pwd、$pwd）。

请注意，此“工作目录”也可以是注册表中的一个位置或许多其他位置提供程序中的任何一个。

# php - 教义 findBy() 内存不足错误

> ID：10756852
> 
> 赞同：2
> 
> 时间：2012-05-25T15:05:59.393
> 
> 标签：php, memory, doctrine, doctrine-orm

我有一个表，其中包含大约 300k 行描述 Apple 推送通知服务的设备。我使用 Doctrine 2 作为 ORM。

插入设备没有问题，但是，检索它们是完全不同的故事。使用一个简单的 MySQL `SELECT`，我可以在几秒钟内得到它们，而 WiFi 是主要的瓶颈。但是，如果我尝试通过 Doctrine 获取它们，即使我允许 PHP 高达 1 GB，它也会耗尽内存。根据文档，我已经为 Doctrine 实体创建了 getter 和 setter 以及受保护的属性。

我不知道我做错了什么。这可以：

```
$devices = mysql_query("SELECT * FROM `Devices` WHERE `deviceProperty`='someValue'");

$message = new Message();
while($device = mysql_fetch_array($devices))
{
    $message->addRecipient($device['pushToken']);
} 
```

但这会在第一行耗尽内存（它永远不会在下一行到达断点）：

```
$devices = self::$entityManager->getRepository('Device')->findBy(array("deviceProperty" => "someValue"));
$message = new Message();
foreach($devices as $device)
{
    $message->addRecipient($device->getPushToken);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T16:18:20.030

You're pulling in 300k objects, it'll consume way too much memory, try processing in chunks...

```
$message = new Message();

$limit = 50;
$offset = 0;
while($devices = self::$entityManager->getRepository('Device')->findBy(array("deviceProperty" => "someValue"), array(), $limit, $offset))
{
   foreach($devices as $device)
   {
       $message->addRecipient($device->getPushToken);
   }
   $offset += $limit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T10:18:46.213

如果您使用 DQL，您可以使用 iterate() 函数来遍历结果并在处理后刷新每个结果：

```
$message = new Message();
$cleaner = 0;

$q = self::$entityManager->createQuery(
    'SELECT d from Device d
     WHERE
     d.deviceProperty = :devicePropertyValue
    ');
$q->setParameter('devicePropertyValue', 'someValue');
//$q->setFirstResult(10000);
//$q->setMaxResults(5000);

$devices = $q->iterate();

foreach ($devices as $row) {
    $device = $row[0];

    $message->addRecipient($device->getPushToken);

    self::$entityManager->detach($device);

    if ($cleaner++ > 100) {
        self::$entityManager->clear();
        $cleaner = 0;
    }

} 
```

对于我正在运行的批量重新索引作业，这将我的内存需求从 3GB 降低到了 256M 以下。

根据 Doctrine[文档](http://doctrine-orm.readthedocs.org/en/latest/reference/batch-processing.html)，“使用 fetch-join 集合值关联的查询无法迭代结果” - 我认为这意味着内置方法，例如 findBy()。

请注意注释掉的 setFirstResult() 和 setMaxResults() 可用于偏移和限制。

# certificate - 如何选择 X.509 公司证书的名称？

> ID：10756854
> 
> 赞同：1
> 
> 时间：2012-05-25T15:06:06.307
> 
> 标签：certificate, code-signing, x509certificate, naming, x509

我想创建一个证书来签署我们公司的软件。我为此使用的工具（ Java SDK 中的[keytool](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html)）需要以下格式的专有名称：

```
CN=commonName, OU=organizationalUnit, O=organizationName, L=city, S=state, C=countryCode 
```

如果我只想为我的公司（而不是其中的任何特定人）提供证书，我应该使用

```
CN=MyCompany, C=AT 
```

或者

```
O=MyCompany, C=AT 
```

作为专有名称？后者更有意义（因为 MyCompany 是组织的名称），但我不知道将 commonName 留空是否“正确”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:32:52.470

CommonName 也可以包含您的公司名称。或者您可以将其留空 - 这并不重要，因为标准对 SubjectName 中的元素数量没有要求，也没有 CommonName 格式的标准。

但是，您的整个任务似乎没有多大意义。您将创建一个自签名证书来签署您的软件，但没有验证器会接受这样的签名。人们会期望您的软件使用由授权证书颁发机构颁发的证书进行签名。

# graph - 使用hadoop作为数据源创建图的常用工具有哪些

> ID：10756858
> 
> 赞同：0
> 
> 时间：2012-05-25T15:06:14.393
> 
> 标签：graph, hadoop

我想知道人们在需要从大数据源（如 hadoop）生成图表时使用哪些工具？

我听说过 Graphite，但它似乎更像是一种实时图形工具，而这并不是我真正想要的。

现在，我主要关心的是使用一个带有猪脚本数据的大文件来创建图表。顺便说一句，我尝试过使用 excel，但除了对测试结果不完全满意之外，我担心如果我有一个**非常**大的数据源，Excel 表可能还不够。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:18:33.503

如果您不介意命令行，Gnuplot 可以很好地工作。

# 3d - 反思需要帮助。立方体相机观察

> ID：10756860
> 
> 赞同：0
> 
> 时间：2012-05-25T15:06:20.443
> 
> 标签：3d, three.js

我的物体是四面体，我在四面体内部做反射，它是一个三角锥，我认为立方体相机不能正确用于三角锥，因为立方体相机的面不垂直于四面体的顶点，所以情况与立方体、球体或圆环不一样，我正确吗？

我是否需要实现与 cubecamera 类似的相机？我问这个的原因是：当我从一个顶点进入时，我可以看到对面中间的顶点，但如果我从另一个顶点进入，它不在对面的中间。见：[http ://www.novaui.com/dc/viewer%20-%20v3.html](http://www.novaui.com/dc/viewer%20-%20v3.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T17:00:44.010

CubeCamera 应该可以工作。CubeCamera 生成立方体贴图，它们适用于任何类型的形状。

您需要隐藏从 CubeCamera 渲染时需要反射的对象。这就是这些*咳嗽*的意思:)

[https://github.com/mrdoob/three.js/blob/master/examples/webgl_materials_cubemap_dynamic2.html#L205](https://github.com/mrdoob/three.js/blob/master/examples/webgl_materials_cubemap_dynamic2.html#L205)

# java - java SimpleDateFormat.Parse

> ID：10756865
> 
> 赞同：3
> 
> 时间：2012-05-25T15:06:35.030
> 
> 标签：java, datetime, simpledateformat

我编写了一个通用的 CSV 文件阅读器，我试图用它来读取一些预先生成的 CSV 数据文件。这些文件包含以下格式的价格信息和时间戳

```
lTid,cDealable,NAME,TIMESTAMP,BID,ASK  <--- The header

1705852073,D,EUR/USD,2011-10-02 17:00:16.123000000,1.334400,1.334600 
```

在我的代码中，我假设价格是数字，文本是字符串，日期是 Java 日期（它有点复杂，但你明白了）。对于日期，代码允许您传入解析模板。到目前为止，这一切正常，但我对如何处理这些文件有点困惑（我无法控制格式，而且它们非常大）。如您所见，日期有表格

```
2011-10-02 17:00:16.123000000 
```

六个尾随零始终为零（即文件时间精度低至毫秒）

理想情况下，我可以使用“ `yyyy-MM-dd HH:mm:ss.SSS`”模式，但遗憾的是 SimpleDateFormat 中的解析逻辑将“ `.123000000`”解释为`123,000,000`毫秒而不是 123 毫秒。

显然，如果这不是通用阅读器，我可以简单地截断日期字符串，但我没有那个选择。有没有办法让 parse 语句只使用 ms 数字并忽略尾随零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T15:29:35.677

[无法解析](https://stackoverflow.com/questions/2132247/custom-date-format-cannot-be-parsed-java)重复的自定义日期格式。[（爪哇）](https://stackoverflow.com/questions/2132247/custom-date-format-cannot-be-parsed-java)

结论是：`SimpleDateFormat`不支持微秒，因此必须编写自定义解析器。

# visual-studio-2010 - vs2010不生成dll文件

> ID：10756867
> 
> 赞同：1
> 
> 时间：2012-05-25T15:06:48.600
> 
> 标签：visual-studio-2010, dll

我正在尝试在 vs2010 中创建一个 c++ dll。我创建了一个 win32 项目并选择“动态库”作为配置类型。我添加了 MyDll.cpp 和 MyDll.def。

这是 mydll.h

```
#include "stdafx.h"

extern "C" BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
                     )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
}

extern "C" UINT __stdcall stopGui(MSIHANDLE hModule) 
{
    MessageBox(NULL, TEXT("Stop Gui"), TEXT("Custom Action Monitor Machine"), MB_OK);
    return ERROR_SUCCESS;
}

extern "C" UINT __stdcall stopService(MSIHANDLE hModule) 
{
    MessageBox(NULL, TEXT("Stop Service"), TEXT("Custom Action Monitor Machine"), MB_OK);
    return ERROR_SUCCESS;
} 
```

这是 MyDll.def

```
LIBRARY "MyDll"
DESCRIPTION "My library test"
EXPORTS
    ; Explicit exports can go here
    stopGui
    stopService 
```

当我构建项目时，我得到“构建成功”，但我的“发布”目录中没有 dll 文件。我只是得到很多没有错误的日志文件和几个 obj 文件。我该如何解决这个问题？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:24:12.787

解决了。输出在解决方案的“Debug”目录中，而我在项目的“Release”目录中查找它。

# php - 在数组操作中定义成员变量

> ID：10756869
> 
> 赞同：0
> 
> 时间：2012-05-25T15:07:08.923
> 
> 标签：php, oop, class-variables, member-variables

我想知道在我以后在其他地方使用的数组中声明我的成员变量是否是不好的约定（在下面的代码中，我传递给 insertArray() 函数）。这是我的代码：

```
class myClass{

    private $ID;
    private $name;
    private $type;
    private $catID;
    private $isDefault;
    private $isRequired;

    function __construct($compID = 0, $catID = 0, $name = '', $type = '', $default = false, $required = false){

    $myArray = array(
        'name'       => ($this->name = $name),
        'type'       => ($this->type = $type),
        'catID'      => ($this->catID  = $catID),
        'isDefault'  => ($this->isDefault = $default),
        'isRequired' => ($this->required  = $required)
    )
    self::insertArray($myArray);
   }
 } 
```

在 $myArray 中定义我的成员变量是不是很糟糕？我很确定在 php 中，形式 ($this->value = $value) 的语法会将 $value 存储在 $this->value 中，然后只计算为 ($this->value)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:23:33.877

它是否不好取决于您遵循的编码指南。他们中的大多数人每行只允许一个操作，但你有两个。

以[PSR-2 标准](https://github.com/pmjones/fig-standards/blob/psr-1-style-guide/proposed/PSR-2-advanced.md)为例。

它也不是那么容易阅读，因为它并不常见。

# jquery - 什么jquery modal 窗口可以在ie quirks 模式下运行良好？

> ID：10756879
> 
> 赞同：1
> 
> 时间：2012-05-25T15:07:25.187
> 
> 标签：jquery, css, modal-window

我们项目的模板 html 有一个 quirks 声明，`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">`不幸的是，这不能轻易修改。我尝试了 colobox 1.3.19 并发现它的 css 工作很糟糕。那么有没有其他外观和感觉都不错的基于jquery的模态窗口库解决方案呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:51:30.613

试试这个， http: [//leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

# php - MySQL特定排序

> ID：10756889
> 
> 赞同：1
> 
> 时间：2012-05-25T15:07:55.233
> 
> 标签：php, mysql

我有一个包含以下字段的表：`last_update`, `votes`& `uptime`。

现在，您将如何选择所有表`last_update > 0` **first**然后它应该选择`last_update = 0`. 然后根据数量对所有内容进行排序`votes`，最后，`uptime`。

`last_update > 0`并且`last_update = 0`非常重要，因为它会将服务器放在列表的顶部或底部。

它不应该**排序**last_update！仅排序 if`last_update > 0`和`last_update = 0`。

目前我有：

```
SELECT * FROM servers ORDER BY votes DESC, last_update DESC, uptime_pct DESC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:16:31.560

根据[SELECT 语法](http://dev.mysql.com/doc/refman/5.0/en/select.html) `[ORDER BY {col_name | expr | position} [ASC | DESC], ...]`，可以按顺序使用表达式语法。

所以你的查询是：

```
SELECT * FROM servers ORDER BY last_update>0 DESC, votes DESC, uptime_pct DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T15:15:51.637

```
SELECT * FROM servers 
WHERE last_update > 0 
ORDER BY last_update DESC, votes DESC, uptime_pct DESC 
```

**更新：**

`last_update > 0`用和选择行`last_update = 0`：

```
SELECT * FROM servers 
ORDER BY last_update DESC, votes DESC, uptime_pct DESC 
```

这个查询：

*   从中选择所有行`servers`
*   最近更新的服务器将显示在最上面，没有更新的服务器 ( `last_update = 0`) 显示在底部。
*   如果两台服务器相同`last_update`，则首先显示得票最高的服务器。
*   如果两台服务器的 和 相同`last_update`，则首先显示`votes`最高的服务器。`uptime_pct`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T15:18:38.547

我对这个问题的理解是，所有 last_update > 0 并且这个列表应该根据投票和 uptime_pct 进行排序，然后你想要 last_update = 0 的所有行的列表。

```
SELECT * FROM servers 
 WHERE last_update > 0 
ORDER BY last_update DESC, 
         votes DESC, 
         uptime_pct DESC
UNION
SELECT * FROM servers 
 WHERE last_update = 0 
ORDER BY votes DESC, 
         uptime_pct DESC 
```

# .net - 有没有办法“处理” Environment.FailFast？

> ID：10756890
> 
> 赞同：3
> 
> 时间：2012-05-25T15:08:00.033
> 
> 标签：.net, error-handling

所以我们的应用程序有一个很好的中央异常处理程序，其中记录了异常的详细信息，向用户显示通用窗口，并且以一种很好的优雅方式关闭。但是，我们现在有一个第 3 方组件，它不时（并且可能出于完全正当的原因）调用 Environment.FailFast。这将我们的应用程序从水中吹了出来，对我们的用户来说看起来很糟糕。有什么方法可以优雅地处理 Environment.FailFast 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:09:57.927

我看不到方法，根据 MSDN 中的各种条目，这是该过程的硬终止。您为处理此问题而创建的任何代码都将驻留在进程中。它也不会运行 finally 块或任何挂起的终结器，所以我猜它不会提供任何事件或挂钩以允许自定义代码运行。在某种程度上，这是有道理的，否则它可能不会“快速”失败，并且它主张仅在极端进程损坏的情况下使用。

[http://msdn.microsoft.com/en-us/library/dd289241](http://msdn.microsoft.com/en-us/library/dd289241)

我看到~~两个~~三个选项：

1.  向供应商发送请求以更改代码并删除此调用。
2.  寻找新的供应商。
3.  正如@RB 所建议的那样。将此 DLL 的使用集中到一个新进程中，以便核心应用程序进程保持安全。我这样做过一次，非常头痛，但“它有效”。**如果您不能使用建议 1 或 2，我只会建议您这样做！**

引用 MSDN：

> 此方法在不运行任何活动的 try/finally 块或终结器的情况下终止进程。
> 
> FailFast 方法将消息字符串写入 Windows 应用程序事件日志，创建应用程序的转储，然后终止当前进程。消息字符串也包含在向 Microsoft 报告的错误中。
> 
> 如果应用程序的状态已损坏无法修复，则使用 FailFast 方法而不是 Exit 方法来终止应用程序，并且执行应用程序的 try/finally 块和终结器将损坏程序资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T15:17:48.607

您可以在新进程中执行第 3 方代码。

一种简单的方法是将第 3 方代码包装在可执行文件中，然后使用[Process.Start](http://msdn.microsoft.com/en-us/library/e8zac0ca.aspx)启动它。

请注意，我找不到文档，FailFast 之后的错误级别是什么。当我测试它时，我得到的价值是`-2146232797`......

# jquery - 如何忽略popstate初始加载，使用pjax

> ID：10756893
> 
> 赞同：12
> 
> 时间：2012-05-25T15:08:13.640
> 
> 标签：jquery, ajax, pjax, popstate

我一直在尝试让前进和后退浏览器按钮在使用 pjax 的小型站点上工作，并提出以下代码来处理类更改和淡入淡出各种覆盖。

但是我发现 Chrome 和 Safari 将初始页面加载视为弹出状态，因此这让我很伤心。有没有办法阻止这一切？

```
$(window).on("popstate", function() {
  if ($('body').hasClass('info')) {
    $('body').removeClass("info").addClass("work");
    $('.info_overlay').fadeOut(duration);
    alert('popstate');

  } else if ($('body').hasClass('work')) {
    $('body').removeClass("work").addClass("info");
    $('.info_overlay').fadeIn(duration);    

  } else {
    $('body').removeClass("project").addClass("work");
    $('.project_overlay').fadeOut(duration);
  }
}); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-26T11:03:51.170

调用时标记状态`pushState()`，然后忽略所有`popstate`没有标记的事件。例如

```
history.pushState({ myTag: true }, ...)

$(window).on("popstate", function(e) {
  if (!e.originalEvent.state.myTag) return; // not my problem
  // rest of your popstate handler goes here
} 
```

不要忘记`replaceState`在页面加载时调用，以便在返回初始页面加载时处理 popstate。

```
$(function() { history.replaceState({ myTag: true }); }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T20:26:34.797

我实际上在[pjax](https://github.com/defunkt/jquery-pjax)本身中找到了解决方案。

而不是这样做：

```
$(window).on('popstate', function() { ... 
```

在我做的初始页面加载时触发了popstate：

```
$(window).on('pjax:popstate', function() {... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-04T21:20:50.483

最好的长期解决方案是投票[https://code.google.com/p/chromium/issues/detail?id=63040](https://code.google.com/p/chromium/issues/detail?id=63040)让谷歌解决这个问题。他们已经知道他们不符合 HTML5 规范已有大约两年了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-08T11:19:19.960

为了解决 safari 和 chrome 浏览器中初始页面加载为 popstate 的问题，我们可以使用**SetTimeOut**函数。

这简直行得通！

```
 setTimeout( function() {
      window.addEventListener( 'popstate', myFunction, false );
    }, 500 ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-15T10:19:42.767

```
var StateHelper = {

    pushState: function(url) {
        if(window.history.pushState) {
            window.history.pushState({"popstate": true}, '', url);
        }
    },

    updateStateData: function(stateData) {
        if(window.history.replaceState) {
            window.history.replaceState(stateData, '', window.location.href);
        }
    }
};

/**
 * NOTE: Webkit fires popstate event initial. So we modify the current state, but in the
 * event we still get null. So we can differentiate.
 */
StateHelper.updateStateData({"popstate": true});
window.addEvent('popstate', function(e) {
    if(e.event.state && e.event.state.popstate) {
        window.fireEvent('pophistory', e);
    }
}); 
```

（一个mootools解决方案）

# javascript - 集合中的 Backbone.js 同步事件

> ID：10756897
> 
> 赞同：6
> 
> 时间：2012-05-25T15:08:19.483
> 
> 标签：javascript, javascript-events, backbone.js

根据此处的文档：[http](http://documentcloud.github.com/backbone/#FAQ-events) ://documentcloud.github.com/backbone/#FAQ-events集合在我执行某些操作以将集合与服务器同步时触发了同步事件。我尝试在集合上调用 fetch 方法并等待其上的同步事件，但它从未发生过。添加事件被触发，但在同步集合中的所有项目后我只需要一个事件来更新相应的视图。还有另一种方法可以触发此事件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T15:34:29.300

解决方案是在作为参数传递给 fetch 方法的“成功”回调中手动启动同步事件。

```
this.collection.fetch({add: true, success: function(collection, response){
            collection.trigger('sync');
}}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T15:15:28.220

我相信只有在您更改模型时才会触发“同步”事件。因此，如果您创建、更新或删除模型，则会触发“同步”事件。

就您而言，我认为您想收听集合上的“重置”事件。

编辑：如果您正在设置`{add:true}`选项，则在添加所有模型后不会触发单个 Backbone 事件。你有几个选择：

1.  只听`add`事件并期望它被重复调用
2.  使用已使用该`_.debounce()`函数去抖动的处理程序来模拟单个事件。
3.  from 的返回值`fetch()`是一个 jQuery XMLHttpRequest 对象。它实现了[jQuery Deferred](http://api.jquery.com/category/deferred-object/)接口。所以你可以听那个结尾。例如：

    ```
    myCollection.fetch({add:true}).done(function(){
        myView.render(); //or whatever
    }); 
    ```

# java - Arrays.sort() 如何改变传递给它的变量？

> ID：10756898
> 
> 赞同：7
> 
> 时间：2012-05-25T15:08:19.597
> 
> 标签：java, arrays, sorting

> **可能重复：**
> [Java 是按引用传递吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

我在这里有点困惑。Arrays.sort(a) 如何修改a的值？

```
int[] a = {9,8,7,6,5,4,3,2,1};
Arrays.sort(a);
System.out.println(Arrays.toString(a)); 
```

我以为java是按值传递的...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T15:09:43.887

是的，Java 是按值传递的。但是，这里通过值传递的是对数组的*引用*，而不是数组本身。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-25T15:10:02.277

Java 中的对象是通过*引用值*传递的。所以如果你传入一个对象，它会得到一个引用的副本（如果你将该引用分配给别的东西，只修改参数，原始对象仍然存在并被主程序引用）。

[此链接演示了有关按引用值传递的一些内容](http://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html)。

```
public void badSwap(Integer var1, Integer var2)
{
  Integer temp = var1;
  var1 = var2;
  var2 = temp;
} 
```

这些是对对象的引用，但它们不会被交换，因为它们只是函数范围内的内部引用。但是，如果您这样做：

`var1.doubleValue();`

它将使用对原始对象的*引用。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-25T15:10:21.530

`Arrays.sort`不修改变量，它修改变量指向的数组对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T15:10:21.077

没错，Java 总是按值传递，对于对象，对象的**引用**是按值传递的。因此，您的数组的引用是按值传递的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T15:10:43.400

1.  它对其进行排序。
2.  对数组的引用是按值传递的。不是数组本身。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T15:12:02.247

对数组的引用是按值传递的，因此该`sort`方法有自己的引用，它仍然引用与`a`引用相同的数组。这意味着可以更改引用`sort`的同一数组的内容。`a`

# python - 使用 matplotlib 绘制特征行为

> ID：10756900
> 
> 赞同：6
> 
> 时间：2012-05-25T15:08:28.223
> 
> 标签：python, plot, matplotlib

我正在尝试用 matplotlib 绘制特征行为，基本上我有一个 2D 矩阵，并且想用与热图非常相似的东西来绘制它，但是单元格是分开的并且可以识别的。参见例如：

[http://www.cl.cam.ac.uk/~nv240/pics/eigenbehaviour.jpg](http://www.cl.cam.ac.uk/~nv240/pics/eigenbehaviour.jpg)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T16:01:48.370

这就是你所追求的吗？

![在此处输入图像描述](../Images/e54056bb981263fb1a01439c4b4f035d.png)

```
from pylab import *

z = rand(10, 25)

c = pcolor(z)
set_cmap('hot')
colorbar()
c = pcolor(z, edgecolors='w', linewidths=1)
axis([0,25,0,10])
savefig('plt.png')
show() 
```

# facebook - 隐藏用户墙上的帖子

> ID：10756903
> 
> 赞同：0
> 
> 时间：2012-05-25T15:08:38.097
> 
> 标签：facebook, facebook-graph-api, facebook-wall

是否可以从 Facebook 应用程序隐藏用户墙上的帖子，例如过滤功能，用户指定某些关键字，应用程序将从用户墙上隐藏所有包含关键字的帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T16:32:41.367

从技术上讲，你不能。如果用户无法从他们的个人资料中隐藏帖子，那么应用程序也无法这样做。Facebook 让您可以选择`Hide from Timeline`从用户的时间线中隐藏帖子，但它不会阻止帖子出现在其他地方。

除非您的应用程序是消息的来源（即应用程序创建了消息），否则您不能从用户的时间轴中删除帖子。FB 也不允许你修改用户的帖子：

> 隐私政策：任何非默认隐私设置必须由用户有意选择。除非用户主动指定他们想要此非默认设置，否则您不得设置自定义隐私设置。请注意，帖子的可见性将由更严格的用户隐私设置以及帖子的隐私字段决定

听起来您的应用程序正试图**审查**用户的帖子，而不是根据用户的请求隐藏它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:17:46.640

是的，但我不会在这里解释整个过程，因为它基本上是一个关于如何遍历数组的教程。基本上，您只需要验证并从 Graph API获取用户的[Feed 连接。](https://developers.facebook.com/docs/reference/api/user/#feed)这将为您提供代表该用户时间轴/墙的帖子的 JSON 数组。

一旦你有了这个数组，你就可以遍历它，如果特定的关键字存在于 JSON 对象的内容部分，你可以选择不在你的应用程序中显示它们。

# text - 在 TFS 描述字段中嵌入文本

> ID：10756908
> 
> 赞同：3
> 
> 时间：2012-05-25T15:09:08.130
> 
> 标签：text, tfs, field

我有一个关于描述字段的 TFS 问题。目前，TFS 描述字段是一个空白字段，用户可以在其中添加任何信息。是否可以嵌入某种类型的文本？

示例：创建新错误时，TFS 描述字段为空。相反，我希望在描述字段中填充以下内容。

1.  配置和日志
2.  版本和环境
3.  复制步骤
4.  设备/环境
5.  附上截图或相关文件（证书等）

我认为它类似于使用默认值标签，只是在创建错误时完成。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:56:29.513

我想出了解决方案。

我当前的描述字段是一个纯文本字段，因此我将该字段设置为默认值 X。我在最初过渡到创建 Bug 工作项时执行了此操作。

然后，我导出了工作项 XML 并搜索：

`<FIELD refname="System.Description">`

在它下面，我找到了 Default Value 标签，它看起来像这样：

`<DEFAULT from="value" value="1\. Configuration and Logs 2\. Version and Environment" />`

我继续添加 xml 断线标记`&#xD;`来分隔行。新的默认值看起来像这样

`<DEFAULT from="value" value="1\. Configuration and Logs &#xD; 2\. AW Version and Environment" />`

最后，我导入了修改后的Bug.xml，并进行了测试。现在每当我打开一个新错误时，这些行都会在描述字段中可见

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-02T18:57:29.013

我无法在当前版本的 TFS（例如 2015 年）上找到对此的任何支持，所以我继续自己解决了这个问题。

此信息已经过测试并在 TFS 2015 上运行，我认为它也应该在 2013 上运行，我只是无法测试。

为了开始和理解，我会澄清一些事情。

*   重现字段的错误 WIT 步骤是一个 html 字段。

*   XML 表单对某些字符有特殊的标记，例如在字符串中。

    ```
    & = &amp;
    < = &lt;
    > = &gt;
    " = &quot;
    ' = &apos; 
    ```

*   示例是添加粗体字“Reproduction Steps”的字符串值。重现字段的错误 WIT 步骤是 HTML，因此我们将使用特殊的 XML 标记添加 HTML 标记。

    ```
    <b>Reproduction Steps</b> 
    ```

    在 bug.xml 中看起来像这样：

    ```
    &lt;b&gt; Reproduction Steps &lt;/b&gt; 
    ```

现在将所有这些放在一起，您将需要导出错误 WIT，以便您可以编辑 bug.xml 并在完成后导入回项目。

> 工具 > 流程编辑器 > 工作项类型 > 导出 WIT

然后你会在 bug.xml 中找到这一行

```
<FIELD name="Repro Steps" refname="Microsoft.VSTS.TCM.ReproSteps" type="HTML"/> 
```

您将对其进行编辑以使其看起来像下面的内容，以将文本嵌入到重现错误字段的步骤中。

```
 <FIELD name="Repro Steps" refname="Microsoft.VSTS.TCM.ReproSteps" type="HTML">
    <DEFAULT from="value" value="All the embedded html/xml text will go here" />
  </FIELD> 
```

带有来自 OP 的请求文本的最终产品将如下所示。

```
<FIELD name="Repro Steps" refname="Microsoft.VSTS.TCM.ReproSteps" type="HTML">
<DEFAULT from="value" value="&lt;b&gt; Configuration and Logs &lt;/b&gt; &lt;br/&gt;
        &lt;b&gt; Reproduction Steps&lt;/b&gt; &lt;br/&gt;
        &lt;b&gt; Device/Environment&lt;/b&gt; &lt;br/&gt;          
        &lt;b&gt; Screenshots or related files (certificates, etc.) are attached&lt;/b&gt; &lt;br/&gt;" />
 </FIELD> 
```

保存该 bug.xml 后，您将需要返回 Visual Studio 并导入它。

> 工具 > 流程编辑器 > 工作项类型 > 导入 WIT

# jquery - 在循环内访问当前 div

> ID：10756913
> 
> 赞同：0
> 
> 时间：2012-05-25T15:09:25.743
> 
> 标签：jquery

我正在尝试修改循环以在迭代中返回当前 div，但未使用以下代码设置 div：

```
 $('#id div.columns).each(function() {

        var div = $(this).attr('argument');
        });         
    }); 
```

如何在循环中获取 div 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:11:18.970

我不确定这是否是拼写错误..但是您缺少报价。

```
//                v-- this quote was missing
$('#id div.columns').each(function() {
   var div = $(this).attr('argument');
}); 
```

并假设额外`)};`是复制/粘贴错误..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:16:04.630

.each() 处理程序通常接受两个参数，当前迭代的索引和当前迭代的元素。您必须修改您的函数以接收这两个参数。

```
$('#id div.columns').each(function(index, element) {

    var div = $(element);
    });         
}); 
```

# jquery - JQuery - 单击链接时显示多个选择框

> ID：10756914
> 
> 赞同：0
> 
> 时间：2012-05-25T15:09:32.007
> 
> 标签：jquery

我在 JQuery 中编写了一个小函数，花了我一点时间，但我到了那里。您单击一个链接并显示一个下拉列表。但是我需要单击链接并显示下拉列表，但是再次单击它时，我再次想要相同的下拉列表，最多为 4 个。

现在我有点坚持，这就是我走了多远。

HTML：

```
<a class="toggle" href="#">Add another Location</a> 
```

插入更多位置下拉框​</p>

查询：

```
$(function() {
    $("a.toggle").click(function(e) {
        $(this).next().toggle();
        e.preventDefault();
    });
});​ 
```

CSS：

```
.toggleDiv { display: none; }
.toggle { font: 14px black Tahoma; } 
```

任何人都可以指出正确的方向。我的 JSFiddle 在这里：

[http://jsfiddle.net/Painstar/bkVNk/](http://jsfiddle.net/Painstar/bkVNk/)

谢谢！

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:17:01.820

我已经更新了你发送的小提琴，我会怎么做：

**jQuery**

```
var current = 1;
$(function() {
$("a.toggle").click(function(e) {
    if(current <= 4) {
      $("#moreLocations" + current).show();
    current += 1;
    }
e.preventDefault();
 });
}); 
```

**HTML**

```
<a class="toggle" href="#">Add another Location</a>
<div id="moreLocations1" class="toggleDiv">insert more locations dropdownbox</div>
<div id="moreLocations2" class="toggleDiv">insert more locations dropdownbox</div>
<div id="moreLocations3" class="toggleDiv">insert more locations dropdownbox</div>
<div id="moreLocations4" class="toggleDiv">insert more locations dropdownbox</div> 
```

假设您希望将 4 个盒子作为单独的项目。

您也可以将'`.sibling()`与 ID 一起使用，但如果您知道`ID`' 则应该没问题。

# sql - Django syncdb 命令，在它正在创建的表中找不到列

> ID：10756915
> 
> 赞同：0
> 
> 时间：2012-05-25T15:09:32.873
> 
> 标签：sql, django, django-models, sqlite

在它变得非常混乱之后，我决定从头开始重新启动我的数据库。所以我删除了数据库，现在尝试用syncdb重新创建它。正如您在下面看到的那样，它正在创建表 wood_management，因为它在木材管理中找不到 wood_uuid，所以它在该表中翻倒了。但是，它还没有进行木材管理，所以我很困惑。

```
Creating table timber_measurement
Traceback (most recent call last):
  File "manage.py", line 11, in <module>
    execute_manager(settings)
  File "c:\python26\lib\site-packages\django\core\management\__init__.py", line 438, in execute_manager
    utility.execute()
  File "c:\python26\lib\site-packages\django\core\management\__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "c:\python26\lib\site-packages\django\core\management\base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "c:\python26\lib\site-packages\django\core\management\base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "c:\python26\lib\site-packages\django\core\management\base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "c:\python26\lib\site-packages\django\core\management\commands\syncdb.py", line 99, in handle_noargs
    cursor.execute(statement)
  File "c:\python26\lib\site-packages\django\db\backends\util.py", line 15, in execute
    return self.cursor.execute(sql, params)
  File "c:\python26\lib\site-packages\django\db\backends\sqlite3\base.py", line 200, in execute
    return Database.Cursor.execute(self, query, params)
django.db.utils.DatabaseError: table timber_measurement has no column named timber_uuid 
```

姜戈模型：

```
class TimberMeasurement(models.Model):
    uuid              = UUIDField(primary_key=True)
    timber            = models.ForeignKey(Timber, db_column='timber_uuid',null=True, blank=True, editable=False)
    measurement_value = models.FloatField(null=True, blank=True)
    measurement_type  = models.IntegerField(null=True, blank=True, choices=MEASUREMENT_TYPE, editable=False)

    class Meta:
        app_label = 'boughtin'
        db_table = 'timber_measurement'
        unique_together = ('timber', 'measurement_value', 'measurement_type') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:22:05.113

在运行新的同步数据库之前，似乎需要执行以下操作

```
#unique_together = ('timber', 'measurement_value', 'measurement_type') 
```

# mysql - MySQL 的 FROM_UNIXTIME 仅支持 10 位 unix 时间表示。不是 13 位数字。

> ID：10756916
> 
> 赞同：1
> 
> 时间：2012-05-25T15:09:43.887
> 
> 标签：mysql

是否有一个 MySQL 函数可以将时间戳转换为`datetime`. 我尝试了以下方法：

```
SELECT FROM_UNIXTIME(1337951145000); 
```

但它返回null。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:11:55.907

你的时间戳太长，试试

```
SELECT FROM_UNIXTIME(1337951145); 
```

或者

```
SELECT FROM_UNIXTIME(1337951145.000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T19:58:27.393

Your timestamp is valid ok.

Currently, timestamps are either 10 or 13 digits. 13-digit Timestamps (such as yours) have an additional 3-digit microseconds.

But to my (Google's) knowledge, MySQL's functions only supports the short 32bit timestamp (and you are [not the only one](https://stackoverflow.com/questions/4762288/why-does-mysql-unix-time-stop-short-of-the-32-bit-unsigned-integer-limit) to hit this wall.

Hopefully they'll sort it out before 2038.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T15:13:45.973

最大可表示时间为 2038-01-19。在 03:14:07 UTC，您的时间戳已经结束。

# python - Python If 语句出现语法错误

> ID：10756920
> 
> 赞同：-4
> 
> 时间：2012-05-25T15:09:47.580
> 
> 标签：python, if-statement

我正在编写一个小程序来将字符串转换为整数，然后在字符串列表中转换为二进制。这就是我所拥有的

```
x=0
while x < len(list):
    list[x]=bin(eval(list[x])
    if(list[x].startswith("0b")):
        list[x]=list[x].replace("0b","") 
```

我在 if 语句的冒号上收到语法错误，我不知道为什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T15:10:47.163

您真正的问题是您在`bin()`通话结束时缺少括号。

```
x = 0
while x < len(list):
    list[x] = bin(eval(list[x]))
    if list[x].startswith("0b"):
        list[x] = list[x].replace("0b","") 
```

您可以删除`if`行上的括号；如果测试套件，python 不使用括号。

最好不要为变量使用内置类型名称，因此变量`list`名称不好。如果你想去掉字符串开头的字符，你可以使用索引：

```
list[x] = list[x][2:] 
```

大概您的代码尚未完成，或者由于错误您尚未发现这一点，但您的循环将永远不会结束，因为您没有递增`x`.

最后但同样重要[的是：](https://stackoverflow.com/questions/1933451/why-should-exec-and-eval-be-avoided)[不要*使用*`eval`](https://stackoverflow.com/questions/1933451/why-should-exec-and-eval-be-avoided); 这是一个等待发生的安全漏洞。

# compass-sass - 仅从指南针中的精灵获取 x 或 y 位置？

> ID：10756928
> 
> 赞同：2
> 
> 时间：2012-05-25T15:10:14.290
> 
> 标签：compass-sass

如果我使用

```
@import "icon/*.png";
@include all-icon-sprites; 
```

我可以用

```
background-position: sprite-position($icon, foobar); 
```

获取 foobar-icon 的 xy 位置。是否可以只获取精灵中的 x 或 y 值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T17:05:37.237

尝试这个。

```
$x: nth(sprite-position($icon, foobar), 1);
$y: nth(sprite-position($icon, foobar), 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T19:33:54.903

类似的东西`sprite-position-y`不可用的原因是因为`background-position-y`不在官方的 CSS 规范中。添加它的建议[已被拒绝](http://www.w3.org/Style/CSS/Tracker/issues/9)。Chrome、Safari 甚至 IE 都支持，但 Opera 和 Firefox 不支持（[支持表](http://snook.ca/archives/html_and_css/background-position-x-y)）。

可以编写自己的扩展来计算并返回值，但最好同时更新 x 和 y。

# jquery - 使用 CSS 或 jQuery 垂直样式表

> ID：10756929
> 
> 赞同：0
> 
> 时间：2012-05-25T15:10:17.020
> 
> 标签：jquery, css, html-table

我有下表：

**html:**

```
<table>
    <tr>
        <td>water<br /><br /></td>
        <td>oil</td>
        <td>fire</td>
    </tr>
        <tr>
        <td>spec1<br /><br /></td>
        <td>spec2</td>
        <td>spec3</td>
    </tr>
</table> 
```

**CSS：**

```
table th, td {
    background-color: #ccc;
    border: 1px solid #999;
    padding: 5px;
    vertical-align: top;
    width:10px;
} 
```

我怎样才能使表格看起来像这样：（我只能使用 CSS 或 jQuery 来操作它）

```
water   spec1 
oil     spec2 
fire    spec3 
```

[http://jsfiddle.net/HAQ3s/30/](http://jsfiddle.net/HAQ3s/30/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:23:11.180

试试这个[小提琴更新](http://jsfiddle.net/HAQ3s/34/)。它在FF中正确测试。其他浏览器没试过。

我将下面的块和内联块语句添加到您的原始样式中。

CSS：

```
table th, td {
    background-color: #ccc;
    border: 1px solid #999;
    padding: 5px;
    vertical-align: top;
    width:10px;
    display:block;
}
table tr
{
    display:inline-block;
    margin:-2px;
} 
```

您可以在样式定义中使用负边距`table tr`来调整间距以适应口味。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:12:58.207

添加这个：

```
td {
 display: block;   
} 
```

然后，在给每个 td 一个 id 之后：

```
​#t1:before {
    content:"water";
}​​​​​ 
```

之后，您可以“删除”带有负边距的 br ：

```
#t2 {
   margin-top:-15px;   
} 
```

最后一个技巧是添加间距以补偿不同长度的标签：在内容中使用 unicode \00A0。

```
#t2:before {
    content:"oil \00A0\00A0\00A0\00A0\00A0";
} 
```

[http://jsfiddle.net/dystroy/BNLgH/](http://jsfiddle.net/dystroy/BNLgH/)

编辑：如果您可以生成 html，只需执行以下操作：

```
<table>
<tr><td align=right>water</td><td>0</td></tr>
...
</table> 
```

# c# - 如何在 C#/Direct X 9.0 中使字符跳转？

> ID：10756936
> 
> 赞同：0
> 
> 时间：2012-05-25T15:10:45.417
> 
> 标签：c#, 2d, directx-9

我目前正在使用 Direct X 9.0 在 C# 中制作游戏。我几乎完成了所有事情，但我在跳跃的物理方面遇到了问题。我为 Y 和 X 坐标声明了变量。

我想知道是否有一种简单的方法可以做到这一点。我一直在寻找答案，但我找到的答案要么无关紧要/要么使用不同的编程语言，例如 XNA。

我目前设置了一个布尔变量来检查是否`W`已按下触发任何代码以使他跳跃。我一直在胡闹之类的。

```
if (Form1.jump == true)
{
    Playerypos = Playerypos - vel;
    Playerxpos = Playerxpos + vel;
    //Form1.jump = false;
} 
```

效果不太好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:16:56.533

跳跃比四处走动更需要一点：你需要加速度的概念。

基本上，当您检测到按下跳转键时，您会将垂直加速度设置为某个正值。你的物理循环将不得不改变以不断地将你的加速度添加到你的位置，然后将重力添加到你的加速度中（从而减少它然后将其变为负值以重新降落）。将您的位置固定到您的陆地/飞机/可能的最低位置（*），您就可以了！

(*) 从来没有看起来那么容易，你必须在这里实现某种光线投射算法，因为你会以较大的增量跳跃并且可能会掉到地上。想想盒子相交线而不是点线。

# security - 如何使用 SSL 使我的网站有效？

> ID：10756940
> 
> 赞同：2
> 
> 时间：2012-05-25T15:11:10.203
> 
> 标签：security, ssl, ssl-certificate

我有一个位于具有专用 IP 的专用服务器上的网站，并且安装了 SSL 证书（并且有效）。

当我访问我的网站并输入 https 而不是 http 我的网站只加载了部分内容，因为 google chrome 说我的网站有一些不安全的数据。

我的网站不使用用户名、密码、登录名等 (YET)。什么会导致这种情况发生，我该如何解决？

**编辑** 我认为您不必这样做，但如果您确实需要知道 URL，它是： [https ://www.thexcodec.com](https://www.thexcodec.com)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T15:28:48.113

这是因为您正在混合通过 HTTP 和 HTTPS 提供的内容。

HTTPS 是一个全有或全无的方案。一旦您通过纯 HTTP 包含任何内容，无论是 javascript、css、图像还是其他任何内容，您就会失去对页面仅包含来自受信任来源的受信任内容的信心。确保您仅通过 HTTPS 请求其他资源。

我可以看到您通过 HTTP 从 Google 地图中提取资源。您需要将它们切换到 HTTPS。

# .net - nuget 包链接上的 404

> ID：10756944
> 
> 赞同：3
> 
> 时间：2012-05-25T15:11:15.647
> 
> 标签：.net, nuget, nuget-server

完全免责声明：java 家伙，尝试戴上 .Net 帽子......

我已经完成了如何设置 NuGet 服务器的演练，看起来它大部分都在工作。我得到这个页面：

```
You are running NuGet.Server v1.8.30423.9026

Click here to view your packages. 
```

但是，当我单击链接时，我得到一个 404。 .nupkg mime 类型已添加到 IIS，所以我看不出还有什么我可能做错了。我已将 NLog 添加到项目中，并将日志记录添加到 Routes.cs 类中，并且两个日志语句都显示了：

```
private static readonly Logger Logger = LogManager.GetCurrentClassLogger();

public static void Start() {
    Logger.Info("Start called in CompanyNameHereNuget");

    MapRoutes(RouteTable.Routes);
}

private static void MapRoutes(RouteCollection routes) {
    Logger.Info("MapRoutes called in CompanyNameHereNuget");

    // The default route is http://{root}/nuget/Packages
    var factory = new DataServiceHostFactory();
    var serviceRoute = new ServiceRoute("nuget", factory, typeof(Packages));
    serviceRoute.Defaults = new RouteValueDictionary { { "serviceType", "odata" } };
    serviceRoute.Constraints = new RouteValueDictionary { { "serviceType", "odata" } };
    routes.Add("nuget", serviceRoute);
}

private static PackageService CreatePackageService() {
    return NinjectBootstrapper.Kernel.Get<PackageService>();
} 
```

我应该查看其他一些日志文件吗？我查看了该文件夹：`C:\inetpub\logs`那里的任何日志文件都没有最近的时间戳。或者，也许我在设置中遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:08:34.117

我实际上正在研究为什么 Elmah 没有记录任何内容并发现了这个线程：

[http://forums.asp.net/t/1800305.aspx/1](http://forums.asp.net/t/1800305.aspx/1)

而这个建议：

> 您使用的是经典应用程序池还是集成应用程序池？看看是不是经典。如果是这样，则不会设置您的 httpmodules 和 httphandlers，因为这是一个集成定义而不是经典定义。

更改服务器上的设置（从经典到交互式）后，瞧，它起作用了！

# php - 重命名远程/本地文件然后上传（PHP）

> ID：10756946
> 
> 赞同：1
> 
> 时间：2012-05-25T15:11:30.237
> 
> 标签：php, javascript, codeigniter

我有一个场景（虽然一直在搜索，但尚未找到任何线索），其中用户尝试上传，但在单击上传之前，用户重命名文件名/删除文件。

用户单击上传按钮后，如何在代码（PHP）中捕获此内容？

请帮忙。谢谢。

示例代码将不胜感激。概念也可以。

谢谢。

注意：我正在使用 CodeIgniter 框架

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:16:20.057

您无法在 PHP 中捕获删除/重命名事件。您的上传处理脚本仅在上传完成**后**启动（无论成功/失败）。最多你可以检查失败，例如

```
if ($_FILES['yourfile']['error'] !== UPLOAD_ERR_OK) {
   die("Hey, the upload failed with error code " . $_FILES['yourfile']['error']);
} 
```

代码在这里定义：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

# jquery - phonegap 远程服务器访问的安全问题

> ID：10756947
> 
> 赞同：0
> 
> 时间：2012-05-25T15:11:35.490
> 
> 标签：jquery, security, cordova

好的，所以我试图创建一个具有远程服务器访问权限的 phoneGap 应用程序，并通过 Sam Croft 看到这篇文章，他使用 jQuery.ajax() 函数创建了一个基本数据请求

```
$.ajax({
    url: 'http://yourdomain.com/your-data-request.php?foo=bar',
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    timeout: 5000,
    success: function(data, status){
        //data loaded
    },
    error: function(){
        //error loading data
    }
}); 
```

[http://samcroft.co.uk/2011/updated-loading-data-in-phonegap-using-jquery-1-5/](http://samcroft.co.uk/2011/updated-loading-data-in-phonegap-using-jquery-1-5/)

但是这种方法不会造成安全风险吗？任何掌握您的网址“http://yourdomain.com/your-data-request.php”的人都可以在没有密码的情况下访问您的数据，这不是问题吗？或者有没有办法只允许您创建的应用程序访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T02:47:37.523

好吧，它在服务器端也带有“会话概念”。

您可以先使用用户名和密码登录，然后为该人设置会话。

之后，任何其他页面/网址都需要检查该会话。

# javascript - 如何列出 Math 对象的所有属性？

> ID：10756948
> 
> 赞同：18
> 
> 时间：2012-05-25T15:11:45.493
> 
> 标签：javascript

当我做

```
for (var i in window) console.log(window[i]) 
```

我得到一个窗口属性和方法的列表

但是，当我对“数学”对象做同样的事情时，我什么也得不到。

```
typeof "window" == typeof "Math" 
```

返回**TRUE**，所以我看不出我的循环不工作的原因。

很奇怪，好像我直接写`Math['E']`我得到了常量**E**的值。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T15:13:17.253

并非所有对象属性都是可迭代的。您只会在`for..in`循环中获得可迭代的属性。

由于`window`（恰好是全局对象）的大多数属性都是用户定义的全局变量，因此它们是可枚举的。

在现代 JavaScript 引擎中，您可以使用`Object.getOwnPropertyNames(obj)`来获取所有属性，包括可枚举的和不可枚举的：

```
>>> Object.getOwnPropertyNames(Math)
["toSource", "abs", "acos", "asin", "atan", "atan2", "ceil", "cos", "exp", "floor", "log", "max", "min", "pow", "random", "round", "sin", "sqrt", "tan", "E", "LOG2E", "LOG10E", "LN2", "LN10", "PI", "SQRT2", "SQRT1_2"] 
```

请参阅[是否可以获得对象的不可枚举的继承属性名称？](https://stackoverflow.com/questions/8024149/is-it-possible-to-get-the-non-enumerable-inherited-property-names-of-an-object)更多细节。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T15:14:47.813

```
["max", "ceil", "SQRT2", "PI", "pow", "log", 
"LOG2E", "tan", "sqrt", "exp", "random", "min",
"floor", "atan2", "cos", "atan", "acos", "abs", 
"round", "asin", "LN2", "LOG10E", "sin",
"E", "SQRT1_2", "LN10"].forEach( function(key ) {
    if( Math[key] ) {
        console.log( key, Math[key] );
    }
}); 
```

您可以在现代浏览器中获取这些键的列表`Object.getOwnPropertyNames( Math );`上面适用于所有值得注意的浏览器，只要您[填充 .forEach](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T15:16:28.607

```
console.log(Object.getOwnPropertyNames(Math)); 
```

# android - 为什么移动浏览器加载我的页面时会完全放大？

> ID：10756949
> 
> 赞同：11
> 
> 时间：2012-05-25T15:11:47.427
> 
> 标签：android, iphone, css, mobile, zooming

我目前正在为客户开发一个网站（仍在进行中）并尝试解决该网站上的一些移动问题。

我遇到的主要问题是移动浏览器（android + iphone）在网站的左上角完全放大了加载网站。无论视口的宽度如何，我都希望将其缩小以适应视口中的整个站点宽度。

该网站可以在这里查看：http: [//www.graceprep.com](http://www.graceprep.com)

有一个简单的解决方法吗？我在 HTML / CSS 方面经验丰富，但在移动浏览器方面我有点新手。

这是我的 header.php 文件中可能相关的一些 HTML。我尝试更改宽度属性无济于事。initial-scale 属性是有效的，但太宽泛了——我希望网站对于所有移动浏览器都完全缩小，无论方向或屏幕大小如何。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T21:25:31.320

为什么你有那个元标签？如果您完全删除它，设备将自动决定缩放级别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T15:51:54.427

我几乎可以肯定

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

应该解决这个问题。您可以将“宽度”设置为您想要的任何值，但通过将其设置为设备宽度，它将调整为任何设备的像素宽度值。“initial-scale”控制指定宽度的缩放级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T17:44:02.550

似乎大多数移动浏览器倾向于传达一个默认视口宽度，该宽度比移动设备的宽度要宽得多。例如，iOS Safari 假设网页的宽度为 980 像素，并缩小以适应可用的 iPhone 4 320 像素（[https://webdesign.tutsplus.com/articles/quick-tip-dont-forget-the- viewport-meta-tag--webdesign-5972](https://webdesign.tutsplus.com/articles/quick-tip-dont-forget-the-viewport-meta-tag--webdesign-5972)）。Android 浏览器倾向于适应 800 到 1024 CSS 像素之间的宽度（[https://developers.google.com/speed/docs/insights/ConfigureViewport](https://developers.google.com/speed/docs/insights/ConfigureViewport)）。

预期的宽度似乎在元标记实现之前以某种方式传达，因此在某些情况下将宽度设置为设备的宽度似乎被视为放大。除非您页面上的 css 使用媒体查询来适应设备的实际宽度，我认为最好避免错过值的“宽度=设备宽度”部分，而只需设置您所追求的其他约束。

# tomcat - Tomcat 终端命令

> ID：10756950
> 
> 赞同：3
> 
> 时间：2012-05-25T15:11:48.200
> 
> 标签：tomcat

是否可以使用命令行在 Tomcat (7) 中启动/停止特定应用程序？

这是为了满足无法通过浏览器访问管理器应用程序的情况...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:53:29.367

Tomcat 管理器可以接受非交互式命令。阅读有关支持的命令的部分：http: [//tomcat.apache.org/tomcat-6.0-doc/manager-howto.html#Supported_Manager_Commands](http://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html#Supported_Manager_Commands)

如果您愿意，您还可以使用 Ant 为您发出其中的一些命令：也有一个关于此的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T07:08:04.330

试试这个名为 tomcat-manager[的用于管理 tomcat 的命令行脚本。](https://github.com/kotfu/tomcat-manager "https://github.com/kotfu/tomcat-manager")它通过 HTTP 与 tomcat 附带的管理器应用程序通信，并允许您从 Unix shell 执行以下操作：

```
$ tomcat-manager --user=admin --password=newenglandclamchowder \
> http://localhost:8080/manager/ stop /myapp 
```

和：

```
$ tomcat-manager --user=admin --password=newenglandclamchowder \
> http://localhost:8080/manager start /myapp 
```

# silverlight - Silverlight 控件本身未显示

> ID：10756953
> 
> 赞同：0
> 
> 时间：2012-05-25T15:11:57.543
> 
> 标签：silverlight, user-controls

我有这个问题，我正在尝试创建一个内部具有相同控件的控件。

我的控制代码在这里：

```
<UserControl x:Class="SubEventsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:currentControl="clr-namespace:MyNamespace"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             d:DesignHeight="300"
             d:DesignWidth="400"
             DataContext="{Binding RelativeSource={RelativeSource Self}}"
             mc:Ignorable="d">

    <Grid x:Name="LayoutRoot" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ItemsControl x:Name="SubEventsItemsControl"
                      Grid.Row="0"
                      Margin="5,0,5,5"
                      ItemsSource="{Binding ControlSubEvents}"
                      ScrollViewer.VerticalScrollBarVisibility="Auto">
            <ItemsControl.Template>
                <ControlTemplate TargetType="ItemsControl">
                    <ItemsPresenter />
                </ControlTemplate>
            </ItemsControl.Template>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!--  Header  -->
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!--  Sub event text  -->
                            <TextBlock Grid.Column="0"
                                       Margin="3"
                                       HorizontalAlignment="Left"
                                       VerticalAlignment="Center"
                                       Style="{StaticResource DynamicTextBlockStyle}"
                                       Text="{Binding Path=SubEventName}"
                                       TextWrapping="Wrap" />

                            <Border Grid.Column="1"
                                    Width="10"
                                    Height="10"
                                    HorizontalAlignment="Right"
                                    Background="{Binding RegistrationStatusId,
                                                         Converter={StaticResource BackgroundConverter}}"
                                    CornerRadius="5"
                                    ToolTipService.ToolTip="{Binding RegistrationStatusLabel}" />
                        </Grid>

                        <!--  Subevent's subevents  -->
                        <currentControl:SubEventsControl Grid.Row="1" ControlSubEvents="{Binding Path=SubEvents}" />

                    </Grid>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</UserControl> 
```

而这背后的类是这样的：

```
namespace MyNamespace
{
    public partial class SubEventsControl : UserControl, INotifyPropertyChanged
    {

        private PortalDomainContext _portalDomainContext;
        private EntityCollection<SubEvent> _controlSubEvents;

        public SubEventsControl()
        {
            InitializeComponent();
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public PortalDomainContext PortalDomainContext
        {
            get
            {
                return _portalDomainContext;
            }

            set
            {
                if (_portalDomainContext != value)
                {
                    _portalDomainContext = value;
                    this.NotifyChange("PortalDomainContext");
                }
            }
        }

        public EntityCollection<SubEvent> ControlSubEvents
        {
            get { return _controlSubEvents; }
            set
            {
                if (_controlSubEvents != value)
                {
                    _controlSubEvents = value;
                    NotifyChange("ControlSubEvents");
                }
            }
        }

        // Dependency properties declaration
        public static readonly DependencyProperty SubEventsProperty = DependencyProperty.Register(
            "ControlSubEvents",
            typeof(EntityCollection<SubEvent>),
            typeof(SubEventsControl),
            new PropertyMetadata(null, OnTestEventsChanged));

        private static void OnTestEventsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {   
        }

        protected void NotifyChange(params string[] properties)
        {
            if (PropertyChanged != null)
            {
                foreach (string property in properties)
                {
                    PropertyChanged(this, new PropertyChangedEventArgs(property));
                }
            }
        }
    }
} 
```

我在另一个控件上使用它，我得到了第一级，但不是第二级，我做错了什么？我错过了一些绑定问题吗？我想我应该是可能的，但也许我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:31:17.323

您不能以*声明*方式在其自身中嵌套控件实例，因为这会导致无限递归。

**最好通过代码**将控件的实例添加到与子元素相同的控件的实例中。

# sql - SSRS 是锁定表

> ID：10756955
> 
> 赞同：3
> 
> 时间：2012-05-25T15:12:01.983
> 
> 标签：sql, sql-server, tsql, reporting-services, locking

我有一份报告显示数据库中的一些数据，而且速度很慢。完成大约需要 2 分钟。问题是在执行查询时锁定了从中获取数据的表。这种锁定会使一些进程失败，比如 navision。

有什么办法可以通过非阻塞查询来实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T15:14:31.120

您可以传递查询提示并指定`NOLOCK`：

```
SELECT * FROM yourTable with (NOLOCK) 
```

# javascript - 关于单元格范围的 Google 电子表格脚本正则表达式

> ID：10756966
> 
> 赞同：3
> 
> 时间：2012-05-25T15:12:52.520
> 
> 标签：javascript, vba, vbscript, excel, google-apps-script

**背景（可选）**：我在 VBA 中编写了一个工作脚本，我正在尝试用 JS 为 Google 电子表格编写该脚本，但是我在每个单元格的正则表达式验证方面遇到了巨大的困难。

在这个 VBA 代码片段中，我设置了一个数据范围，并针对之前定义的 RegEx 测试每个单元格。

```
Set rRange = Range(arrLetters1(i) & intRange1, arrLetters2(i) & intRange2)

For Each rCell In rRange.Cells
  If re.Test(rCell) Then
    rCell.Interior.Color = RGB(0, 250, 0)
  Else
    Cells((intRange1 - 1), rCell.Column).Interior.Color = RGB(250, 0, 0)
    rCell.Interior.Color = RGB(250, 0, 0)
  End If
Next rCell 
```

* * *

我很好奇的是实际的**JavaScript**函数，它允许我查看相同的范围并执行相同的操作。这是我所拥有的：

```
var re = "[a-z]+"
var rRange = sheet.getRange(arrLetters1(i) + intRange1, arrLetters2(i) + intRange2)

for (var rCell in rRange) {
  if (rCell //is a "re" match) {
      //do some code
  }
} else {
     //do something else
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T16:32:23.037

好的，快速查看一下，您似乎想要检查一系列单元格中的值，将它们与正则表达式进行比较，并根据结果更改单元格颜色。请记住，我以前没有使用过 google docs api，看起来您现有的代码只有几个小问题。

首先，您需要正确创建正则表达式。

您的线路：

```
var arrPatterns = new Array("^([A-Z]{2}(-[0-9]{5}){4})$", "^[A-Z]{2}$", "^[0-9]{5}$", "^[a-z]{1,}$", "^\(\d\d\d\) \d\d\d-\d\d\d\d$", "^([a-z0-9]{1,}[,]{0,}){1,}$", "^(\d\d?:\d\d[aApP][mM] - \d\d?:\d\d[aApP][mM])|(Closed)|(All Day)$"); 
```

变成：

```
var arrPatterns = [/^([A-Z]{2}(-[0-9]{5}){4})$/, /^[A-Z]{2}$/, ... /^(\d\d?:\d\d[aApP][mM] - \d\d?:\d\d[aApP][mM])|(Closed)|(All Day)$/]; 
```

那里的两个变化是`new Array`只使用文字数组语法`[ ]`（可选但被认为是好的做法），并用正斜杠替换数组字符串中的引号（正则表达式文字语法）。结果是一个正则表达式对象数组而不是字符串。这将允许您实际执行`re.test("some string");`类似于您在评估代码中所做的事情。

其次，您需要遍历单元格范围，获取它们的值并进行比较。[对文档](https://developers.google.com/apps-script/class_range)的快速检查告诉我`sheet.getRange`返回了一个`Range`对象。range 对象有一个`getValues`方法，它返回一个单元格值数组 (array[][])。

因此，您想要的一些快速近似代码是：

```
var rRange = sheet.getRange(arrLetters1(i) + intRange1, arrLetters2(i) + intRange2);
var values = rRange.getValues();
var re = arrPatterns[0];

var row, col;
for (row = 0; rows < values.length; row++) {
  for (col = 0; col < values[row].length; col++) {
    if (re.test(values[row][col])) {
        /*do passes regex, looks like you probably need to pass the row/col to getCell
          to get a range with the desired cell in it and then call setBackgroundColor on
          that range.  I'm also leaving looping through your array of regular expressions to you,
          as it looked like you have a dependency on the expression being used and the array of
          letters i didn't take the time to understand.*/
    }
    else {
      //do fails regex
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T16:23:20.903

这里有 2 个示例如何在 JS 中使用 RegEx，WScript.Echo 是 JScript 以便于测试，替换为 document.write 或 response.write 或其他

```
var rRange = "this string is for testpurposes"
var re = /[a-z]+/
var regExp = new RegExp(re);
if (rRange.match(regExp)) {
  WScript.echo("Successful match");
} else {
  WScript.echo("No match");
}

=>Successful match

var str="The rain in SPAIN stays mainly in the plain"; 
var n=str.match(/ain/g);
WScript.echo(n); 
=> ain,ain,ain 
```

# ios - 在 iOS 应用程序运行时更新资源

> ID：10756969
> 
> 赞同：0
> 
> 时间：2012-05-25T15:12:59.763
> 
> 标签：ios, xcode

有谁知道在应用程序运行时（例如在 Xcode 中调试时）更新资源（图像、文本文件、UI .nib 文件等）的任何方法？

自从我们发布了我们的第一个应用程序以来，我们的应用程序框架变得越来越受数据驱动。*因此，如果我可以简单地按下一个按钮来检查触摸的资产，并在应用程序运行时*将它们复制到应用程序的沙箱中，那就太好了。

然后，我可以简单地按下后退按钮，然后重新打开我正在测试的应用程序部分，而不是在 Xcode 中执行完整的构建周期。

在我看来，有 3rd 方工具可以访问 iOS 文件系统（例如 iExplorer），所以那里有诀窍吗？我想它必须相当智能并与构建目标的 Xcode 资源复制构建规则集成......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:23:36.580

使用 Xcode 更新资源的唯一方法是重新构建程序并将其加载到设备或模拟器上。如果您想从其他任何地方获取文件到您的应用程序中，则必须在您的应用程序中编写一些代码以从网络下载文件。另外，如果您进行更改，则必须使用您的代码重新编译 nib 文件；我猜这只是使用编译语言的缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T23:33:14.580

实际上，您可以在编译和安装后将 nib 文件加载到您的应用程序中。

[http://www.indelible.org/ink/nib-loading/](http://www.indelible.org/ink/nib-loading/)

# ios - 在 iOS 上使用 OpenAL 进行声音捕获

> ID：10756972
> 
> 赞同：4
> 
> 时间：2012-05-25T15:13:06.517
> 
> 标签：ios, openal

我正在尝试使用 OpenAL 在 iOS 上进行声音捕获（我正在编写一个跨平台库，这就是为什么我避免使用特定于 iOS 的方式来录制声音）。开箱即用的 OpenAL 捕获不起作用，但存在一个已知的解决方法：[在开始捕获之前打开一个输出上下文](http://opensource.creative.com/pipermail/openal-devel/2011-September/005853.html)。这个解决方案在 iOS 5.0 上对我有用。

但是在 iOS 5.1.1 上，解决方法仅对我尝试记录的第一个示例有帮助。（我在开始捕获之前将我的 AudioSession 切换到 PlayAndRecord 并打开默认输出设备。录制完我的示例后，我关闭设备并将会话切换回原来的状态。）对于第二个示例，重新打开输出上下文不会帮助，没有声音被捕获。

有没有已知的方法来处理这个问题？

```
// Here's what I do before starting the recording
oldAudioSessionCategory = [audioSession category];
[audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];
[audioSession setActive:YES error:nil];
// We need to have an active context. If there is none, create one.
if (!alcGetCurrentContext()) {
    outputDevice = alcOpenDevice(NULL);
    outputContext = alcCreateContext(outputDevice, NULL);
    alcMakeContextCurrent(outputContext);
}

// Capture itself
inputDevice = alcCaptureOpenDevice(NULL, frequency, FORMAT, bufferSize);
....
alcCaptureCloseDevice(inputDevice);

// Restoring the audio state to whatever it had been before capture
if (outputContext) {
    alcDestroyContext(outputContext);
    alcCloseDevice(outputDevice);
}
[[AVAudioSession sharedInstance] setCategory:oldAudioSessionCategory 
                                 error:nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:38:55.290

这是我用来模拟捕获扩展的代码。一些评论：

1.  在整个项目中，OpenKD 用于，例如，线程原语。您可能需要替换这些调用。
2.  我必须在开始捕获时与延迟作斗争。结果，我不断地读取声音输入，并在不需要时将其丢弃。（例如，[这里](https://stackoverflow.com/questions/10141526/audiooutputunitstart-very-slow)提出了这样的解决方案。）这反过来又需要捕获 onResignActive 通知，以便释放对麦克风的控制。你可能想也可能不想使用这样的组合。
3.  而不是`alcGetIntegerv(device, ALC_CAPTURE_SAMPLES, 1, &res)`，我必须定义一个单独的函数，`alcGetAvailableSamples`。

简而言之，此代码不太可能在您的项目中按原样使用，但希望您可以根据需要对其进行调整。

```
#include <stdbool.h>
#include <stddef.h>
#include <stdint.h>
#include <KD/kd.h>
#include <AL/al.h>
#include <AL/alc.h>

#include <AudioToolbox/AudioToolbox.h>
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>

#include "KD/kdext.h"

struct InputDeviceData {
    int id;
    KDThreadMutex *mutex;
    AudioUnit audioUnit;
    int nChannels;
    int frequency;
    ALCenum format;
    int sampleSize;
    uint8_t *buf;
    size_t bufSize;    // in bytes
    size_t bufFilledBytes;  // in bytes
    bool started;
};

static struct InputDeviceData *cachedInData = NULL;

static OSStatus renderCallback (void                        *inRefCon,
                                AudioUnitRenderActionFlags  *ioActionFlags,
                                const AudioTimeStamp        *inTimeStamp,
                                UInt32                      inBusNumber,
                                UInt32                      inNumberFrames,
                                AudioBufferList             *ioData);
static AudioUnit getAudioUnit();
static void setupNotifications();
static void destroyCachedInData();
static struct InputDeviceData *setupCachedInData(AudioUnit audioUnit, ALCuint frequency, ALCenum format, ALCsizei bufferSizeInSamples);
static struct InputDeviceData *getInputDeviceData(AudioUnit audioUnit, ALCuint frequency, ALCenum format, ALCsizei bufferSizeInSamples);

/** I only have to use NSNotificationCenter instead of CFNotificationCenter
 *  because there is no published name for WillResignActive/WillBecomeActive
 *  notifications in CoreFoundation.
 */
@interface ALCNotificationObserver : NSObject
- (void)onResignActive;
@end
@implementation ALCNotificationObserver
- (void)onResignActive {
    destroyCachedInData();
}
@end

static void setupNotifications() {
    static ALCNotificationObserver *observer = NULL;
    if (!observer) {
        observer = [[ALCNotificationObserver alloc] init];
        [[NSNotificationCenter defaultCenter] addObserver:observer selector:@selector(onResignActive) name:UIApplicationWillResignActiveNotification object:nil];
    }
}

static OSStatus renderCallback (void                        *inRefCon,
                                AudioUnitRenderActionFlags  *ioActionFlags,
                                const AudioTimeStamp        *inTimeStamp,
                                UInt32                      inBusNumber,
                                UInt32                      inNumberFrames,
                                AudioBufferList             *ioData) {
    struct InputDeviceData *inData = (struct InputDeviceData*)inRefCon;

    kdThreadMutexLock(inData->mutex);
    size_t bytesToRender = inNumberFrames * inData->sampleSize;
    if (bytesToRender + inData->bufFilledBytes <= inData->bufSize) {
        OSStatus status;
        struct AudioBufferList audioBufferList; // 1 buffer is declared inside the structure itself.
        audioBufferList.mNumberBuffers = 1;
        audioBufferList.mBuffers[0].mNumberChannels = inData->nChannels;
        audioBufferList.mBuffers[0].mDataByteSize = bytesToRender;
        audioBufferList.mBuffers[0].mData = inData->buf + inData->bufFilledBytes;
        status = AudioUnitRender(inData->audioUnit, 
                                 ioActionFlags, 
                                 inTimeStamp, 
                                 inBusNumber, 
                                 inNumberFrames, 
                                 &audioBufferList);
        if (inData->started) {
            inData->bufFilledBytes += bytesToRender;
        }
    } else {
        kdLogFormatMessage("%s: buffer overflow", __FUNCTION__);
    }
    kdThreadMutexUnlock(inData->mutex);

    return 0;
}

static AudioUnit getAudioUnit() {
    static AudioUnit audioUnit = NULL;

    if (!audioUnit) {
        AudioComponentDescription ioUnitDescription;

        ioUnitDescription.componentType          = kAudioUnitType_Output;
        ioUnitDescription.componentSubType       = kAudioUnitSubType_VoiceProcessingIO;
        ioUnitDescription.componentManufacturer  = kAudioUnitManufacturer_Apple;
        ioUnitDescription.componentFlags         = 0;
        ioUnitDescription.componentFlagsMask     = 0;

        AudioComponent foundIoUnitReference = AudioComponentFindNext(NULL,
                                                                     &ioUnitDescription);
        AudioComponentInstanceNew(foundIoUnitReference,
                                  &audioUnit);

        if (audioUnit == NULL) {
            kdLogMessage("Could not obtain AudioUnit");
        }
    }

    return audioUnit;
}

static void destroyCachedInData() {
    OSStatus status;
    if (cachedInData) {
        status = AudioOutputUnitStop(cachedInData->audioUnit);
        status = AudioUnitUninitialize(cachedInData->audioUnit);
        free(cachedInData->buf);
        kdThreadMutexFree(cachedInData->mutex);
        free(cachedInData);
        cachedInData = NULL;
    }
}

static struct InputDeviceData *setupCachedInData(AudioUnit audioUnit, ALCuint frequency, ALCenum format, ALCsizei bufferSizeInSamples) {
    static int idCount = 0;
    OSStatus status;
    int bytesPerFrame = (format == AL_FORMAT_MONO8) ? 1 :
                        (format == AL_FORMAT_MONO16) ? 2 :
                        (format == AL_FORMAT_STEREO8) ? 2 :
                        (format == AL_FORMAT_STEREO16) ? 4 : -1;
    int channelsPerFrame = (format == AL_FORMAT_MONO8) ? 1 :
                           (format == AL_FORMAT_MONO16) ? 1 :
                           (format == AL_FORMAT_STEREO8) ? 2 :
                           (format == AL_FORMAT_STEREO16) ? 2 : -1;
    int bitsPerChannel = (format == AL_FORMAT_MONO8) ? 8 :
                         (format == AL_FORMAT_MONO16) ? 16 :
                         (format == AL_FORMAT_STEREO8) ? 8 :
                         (format == AL_FORMAT_STEREO16) ? 16 : -1;

    cachedInData = malloc(sizeof(struct InputDeviceData));
    cachedInData->id = ++idCount;
    cachedInData->format = format;
    cachedInData->frequency = frequency;
    cachedInData->mutex = kdThreadMutexCreate(NULL);
    cachedInData->audioUnit = audioUnit;
    cachedInData->nChannels = channelsPerFrame;
    cachedInData->sampleSize = bytesPerFrame;
    cachedInData->bufSize = bufferSizeInSamples * bytesPerFrame;
    cachedInData->buf = malloc(cachedInData->bufSize);
    cachedInData->bufFilledBytes = 0;
    cachedInData->started = FALSE;

    UInt32 enableOutput        = 1;    // to enable output
    status = AudioUnitSetProperty(audioUnit,
                                  kAudioOutputUnitProperty_EnableIO,
                                  kAudioUnitScope_Input,
                                  1,
                                  &enableOutput, sizeof(enableOutput));

    struct AudioStreamBasicDescription basicDescription;
    basicDescription.mSampleRate = (Float64)frequency;
    basicDescription.mFormatID = kAudioFormatLinearPCM;
    basicDescription.mFormatFlags = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
    basicDescription.mBytesPerPacket = bytesPerFrame;
    basicDescription.mFramesPerPacket = 1;
    basicDescription.mBytesPerFrame = bytesPerFrame;
    basicDescription.mChannelsPerFrame = channelsPerFrame;
    basicDescription.mBitsPerChannel = bitsPerChannel;
    basicDescription.mReserved = 0;

    status = AudioUnitSetProperty(audioUnit, 
                                  kAudioUnitProperty_StreamFormat, // property key 
                                  kAudioUnitScope_Output,        // scope
                                  1,                             // 1 is output
                                  &basicDescription, sizeof(basicDescription));      // value

    AURenderCallbackStruct renderCallbackStruct;
    renderCallbackStruct.inputProc = renderCallback;
    renderCallbackStruct.inputProcRefCon = cachedInData;
    status = AudioUnitSetProperty(audioUnit, 
                                  kAudioOutputUnitProperty_SetInputCallback, // property key 
                                  kAudioUnitScope_Output,        // scope
                                  1,                             // 1 is output
                                  &renderCallbackStruct, sizeof(renderCallbackStruct));      // value

    status = AudioOutputUnitStart(cachedInData->audioUnit);

    return cachedInData;
}

static struct InputDeviceData *getInputDeviceData(AudioUnit audioUnit, ALCuint frequency, ALCenum format, ALCsizei bufferSizeInSamples) {
    if (cachedInData && 
        (cachedInData->frequency != frequency ||
         cachedInData->format != format ||
         cachedInData->bufSize / cachedInData->sampleSize != bufferSizeInSamples)) {
            kdAssert(!cachedInData->started);
            destroyCachedInData();
        }
    if (!cachedInData) {
        setupCachedInData(audioUnit, frequency, format, bufferSizeInSamples);
        setupNotifications();
    }

    return cachedInData;
}

ALC_API ALCdevice* ALC_APIENTRY alcCaptureOpenDevice(const ALCchar *devicename, ALCuint frequency, ALCenum format, ALCsizei buffersizeInSamples) {
    kdAssert(devicename == NULL);    

    AudioUnit audioUnit = getAudioUnit();
    struct InputDeviceData *res = getInputDeviceData(audioUnit, frequency, format, buffersizeInSamples);
    return (ALCdevice*)res->id;
}

ALC_API ALCboolean ALC_APIENTRY alcCaptureCloseDevice(ALCdevice *device) {
    alcCaptureStop(device);
    return true;
}

ALC_API void ALC_APIENTRY alcCaptureStart(ALCdevice *device) {
    if (!cachedInData || (int)device != cachedInData->id) {
        // may happen after the app loses and regains active status.
        kdLogFormatMessage("Attempt to start a stale AL capture device");
        return;
    }
    cachedInData->started = TRUE;
}

ALC_API void ALC_APIENTRY alcCaptureStop(ALCdevice *device) {
    if (!cachedInData || (int)device != cachedInData->id) {
        // may happen after the app loses and regains active status.
        kdLogFormatMessage("Attempt to stop a stale AL capture device");
        return;
    }
    cachedInData->started = FALSE;
}

ALC_API ALCint ALC_APIENTRY alcGetAvailableSamples(ALCdevice *device) {
    if (!cachedInData || (int)device != cachedInData->id) {
        // may happen after the app loses and regains active status.
        kdLogFormatMessage("Attempt to get sample count from a stale AL capture device");
        return 0;
    }
    ALCint res;
    kdThreadMutexLock(cachedInData->mutex);
    res = cachedInData->bufFilledBytes / cachedInData->sampleSize;
    kdThreadMutexUnlock(cachedInData->mutex);
    return res;
}

ALC_API void ALC_APIENTRY alcCaptureSamples(ALCdevice *device, ALCvoid *buffer, ALCsizei samples) {    
    if (!cachedInData || (int)device != cachedInData->id) {
        // may happen after the app loses and regains active status.
        kdLogFormatMessage("Attempt to get samples from a stale AL capture device");
        return;
    }
    size_t bytesToCapture = samples * cachedInData->sampleSize;
    kdAssert(cachedInData->started);
    kdAssert(bytesToCapture <= cachedInData->bufFilledBytes);

    kdThreadMutexLock(cachedInData->mutex);
    memcpy(buffer, cachedInData->buf, bytesToCapture);
    memmove(cachedInData->buf, cachedInData->buf + bytesToCapture, cachedInData->bufFilledBytes - bytesToCapture);
    cachedInData->bufFilledBytes -= bytesToCapture;
    kdThreadMutexUnlock(cachedInData->mutex);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:08:38.780

我找到了一种让 Apple 的 OpenAL 工作的方法。在我的原始代码片段中，您需要调用`alcMakeContextCurrent(NULL)`before `alcDestroyContext(outputContext)`。

# spring - 寻找用于绘制数据流图表的基于 Java 的服务器端可视化工具

> ID：10756975
> 
> 赞同：2
> 
> 时间：2012-05-25T15:13:15.443
> 
> 标签：spring, jakarta-ee, data-visualization

**背景：** 我正在使用 Javacript InfoVis Toolkit (JIT) 在 Web 浏览器中向用户显示图表，该图表显示我们正在开发的元数据存储库的数据流。它生成一个 SpaceTree 图，显示节点和箭头，以演示一个数据元素（文件上的字段）如何流入另一个数据元素。（见附图）我的应用程序的基本架构是一个基于 Java EE Spring 3 IoC/Hibernate 的 Web 应用程序，带有 GWT 前端。

**问题：** 我现在需要在服务器端生成许多这些图表作为 Excel 报告的附件。当然，JIT 是一个 javascript 实用程序，在服务器端生成 Excel 报告时对我不可用。我一直在研究 SVG 和 VML，但还没有找到一个服务器端 Java 库，它可以创建与我使用 JIT 创建的图像文件相同类型的图表。我希望我集成到我的应用程序中的任何技术都已经成熟并具有 BSD 许可。

由于我是 stackoverflow 的新用户，他们还不允许我上传图像，所以这里有一个链接到我在客户端使用 JIT 生成的示例图供您参考。 [http://i892.photobucket.com/albums/ac130/originalthought/lineage_diagram.jpg](http://i892.photobucket.com/albums/ac130/originalthought/lineage_diagram.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:45:35.247

我看过这个库[http://jlink.sourceforge.net/](http://jlink.sourceforge.net/)，虽然我没用过。或者看看这个答案[https://stackoverflow.com/a/8125091/1437586](https://stackoverflow.com/a/8125091/1437586)。

# google-chrome-extension - 上下文菜单 API：有没有办法知道哪个按钮用于选择项目？

> ID：10756983
> 
> 赞同：1
> 
> 时间：2012-05-25T15:13:46.007
> 
> 标签：google-chrome-extension, contextmenu, mouseevent

我目前正在使用 Chrome 中的扩展上下文菜单 API。我在上下文菜单中添加了一些项目，并且在我的菜单项上很好地收到了“onclick”事件。

但是左键和右键似乎没有区别，中键不会触发任何事件。

所以问题是：有没有办法知道哪个按钮被用来选择一个项目？

如果没有，我想建议将此功能添加到 API，但我不知道这样做的正确方法。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:37:39.770

使用当前的 API 无法知道这一点。我怀疑这是应用程序级别的限制，因为 Chrome 的上下文选项在右键单击和左键单击时的行为都不同。

[您可以在Chromium bug tracker](http://code.google.com/p/chromium/issues/list)上提出 feture 请求。说清楚你*为什么*想要这个功能（即描述你的具体项目），因为从表面上看，它听起来不像很多人会使用的东西；大多数人可能会满足于创建多个上下文菜单项来实现多种效果。

# javascript - 对角滚动Javascript

> ID：10756988
> 
> 赞同：1
> 
> 时间：2012-05-25T15:13:57.640
> 
> 标签：javascript, jquery

我这里有个问题。我试图对角滚动我的文档。它获取文档的宽度和高度，并将其值添加到每个部分元素中。我知道如何在 y 角度滚动它，但是可以找到一种方法使 x 角度滚动同步滚动宽度为 y 角度。

感谢您的提示！

这是我的js：

```
$(function() {
    var windowHeight = $(window).height();
    var windowWidth = $(window).width();
    var sectionsNumbers = $("#content section").length - 1;
    var sectionCount = 0;
    // Scroll sets
    var windowScrollX = ((sectionsNumbers + 1) * windowWidth) - windowWidth;
    alert(windowScrollX);
    // Set mask w and h
    $("#mask").css("width", windowWidth);
    $("#mask").css("height", windowHeight);
    $(".scrollRule").css("height", (sectionsNumbers + 1) * windowHeight);
    $("#content section").each(function() {
        // Defines its width and height
        $(this).css("width", windowWidth);
        $(this).css("height", windowHeight);
        // Defines its position
        $(this).css("left", sectionCount * windowWidth);
        $(this).css("top", sectionCount * windowHeight);
        sectionCount++;
    });
    // When window scrolls
    $(window).scroll(function() {
        var curScrollTop = $(window).scrollTop();
        $("#debug").html(curScrollTop);
        $("#content").css("top", "-" + curScrollTop);
    });
});​ 
```

**我知道了！**

我只需要将窗口总宽度除以窗口总滚动高度。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T15:21:08.437

尝试使用 jQuery 的动画功能。只需将我的代码示例中的整数替换为您计算出的位置值即可。

```
jQuery('html,body').animate(
    {
         scrollTop: 25
         ,scrollLeft: 20
    }
    ,'slow'
); 
```

来源：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

# qt - 在 OS X 上获取当前的 OpenGL 上下文

> ID：10756993
> 
> 赞同：1
> 
> 时间：2012-05-25T15:14:22.227
> 
> 标签：qt, opengl, opencl

目前我正在尝试让 OpenCL<->OpenGL 互操作功能发挥作用。我获取共享上下文的代码：

```
cl_int error = 0;
CGLContextObj glContext = CGLGetCurrentContext();

CGLShareGroupObj shareGroup = CGLGetShareGroup(glContext);
cl_context_properties props[] =
{
    CL_CONTEXT_PROPERTY_USE_CGL_SHAREGROUP_APPLE, (cl_context_properties)shareGroup,
    CL_CONTEXT_PLATFORM, (cl_context_properties)this->_clPlatform,
    0
};

context =  clCreateContext(props, 1, &this->_clDevice, NULL, NULL, &error); 
```

`clCreateContext`此代码在`INVALID_VALUE`错误期间失败。我知道这`_clDevice`是有效的，因为我的 OpenCL-Only-Context 工作正常，但我发现 CGLGetCurrentContext() 总是返回`0`。我认为这是“无效值”，但为什么总是这样`0`？我必须手动创建上下文吗？我将它用作 C++/Qt 程序的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:12:25.693

尝试删除

```
CL_CONTEXT_PLATFORM, (cl_context_properties)this->_clPlatform 
```

完全地。它只对我有用`CL_CONTEXT_PROPERTY_USE_CGL_SHAREGROUP_APPLE`。

# javascript - JqueryMobile加载图标不一致

> ID：10756994
> 
> 赞同：0
> 
> 时间：2012-05-25T15:14:24.583
> 
> 标签：javascript, jquery, ios, jquery-mobile, cordova

我正在处理 jquerymobile 加载消息的一些不一致。图标何时出现似乎没有押韵或理由。有时当我按下按钮时它会立即显示，有时需要一秒钟，有时它根本不显示。这是一个很大的可用性问题，因为我的应用程序似乎没有做任何事情并导致用户再次点击。无论等待如何，我都希望加载按钮始终显示。有没有办法确保这一点？我尝试使用以下内容向我的每个链接添加 onclick：

```
onclick="$.mobile.loading( 'show' );" 
```

但这似乎无济于事。提供的任何帮助将不胜感激，谢谢！

附带说明一下，我发现 JqueryMobile 存在令人难以置信的错误并且难以使用。这是一个很有前途的平台，但它充满了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T20:13:08.077

看起来您使用错误的代码来显示图标，这在 thinkL 中更改了几个版本

显示它的脚本是：

```
 $.mobile.showPageLoadingMsg(); 
```

隐藏它是

```
$.mobile.hidePageLoadingMsg(); 
```