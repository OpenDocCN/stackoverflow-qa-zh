# StackOverflow 问答 12319000-12319999

# java - 删除/替换数组中的对象

> ID：12319008
> 
> 赞同：2
> 
> 时间：2012-09-07T13:24:20.123
> 
> 标签：java, arrays, swing

我有一个数组中的单词（对象）列表。每个单词都有一个数字、单词和提示。（请不要数字比它在数组中的索引大 1）我希望用户能够删除数组中的一个项目。我编写了一个方法，它读取用户输入（int）单词，输入索引中的提示获取下一个数组中的提示和单词的值，然后那个将获取后面的提示和单词那等等

例如：首先就像

```
1   dog   bark

2 cat meow

3  cow moo

4  chicken cluck

5  pig  oink 
```

用户在 3 处删除单词后

```
1 dog  bark

2  cat meow

3 pig oink

4 pig oink 
```

谁能告诉我问题是什么？

# 代码

```
public void deleteWord() throws IOException {

    if (wCount > 0) {
        int again = JOptionPane.YES_OPTION;
        while (again == JOptionPane.YES_OPTION) {
            int num = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter the number of the word you wish to delete", "Enter word number", JOptionPane.PLAIN_MESSAGE))-1;
            int cnfrm = JOptionPane.showConfirmDialog(null, "Are you sure you wish to delete the word:" + "\n" + "\t" + wArr[num].getWrd(), "Are you sure?", JOptionPane.YES_NO_OPTION);
            if (cnfrm == JOptionPane.YES_OPTION) {
                for (int i = num; i < (wCount - 1); i++) {
                    for (int j = (i + 1); j < wCount; j++) {
                        wArr[i].setWrd(wArr[j].getWrd());
                        wArr[i].setHnt(wArr[j].getHnt());
                    }
                }
                wCount--;
                wArr[wCount] = null;
            }
            PrintWriter pw = new PrintWriter(new FileWriter("words.txt", false));
            for (int x = 0; x < wCount; x++) {
                pw.println(wArr[x].toString(1));
            }
            pw.close();
            displayWords();
            again = JOptionPane.showConfirmDialog(null, "Do you wish to delete another word?", "Delete another wod?", JOptionPane.YES_NO_OPTION);
        }
    } else {
        JOptionPane.showMessageDialog(null, "Thre are no words to delete", "ERROR", JOptionPane.ERROR_MESSAGE);
    }

} 
```

# 编辑：

这是一个家庭作业，这显然意味着我仍然不知道关于编程的分配，包括。`ArrayList`s。我会找到他们的，但不幸的是这个项目（如果你想知道的话，Hangman）将于周一到期，所以我不会在这个程序中实施它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:29:22.977

你的问题是这部分：

```
for (int i = num; i < (wCount - 1); i++) {
    for (int j = (i + 1); j < wCount; j++) {
        wArr[i].setWrd(wArr[j].getWrd());
        wArr[i].setHnt(wArr[j].getHnt());
    }
} 
```

最后，它总是将位置处的内容替换为位置处的`i`内容`wCount - 1`。请改用以下内容：

```
for (int i = num; i < (wCount - 1); i++) {
    int j = i + 1;
    wArr[i].setWrd(wArr[j].getWrd());
    wArr[i].setHnt(wArr[j].getHnt());
} 
```

但正如您对问题的评论中所建议的那样：为什么不使用[List](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)（如[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)）呢？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:31:29.260

当你应该有一个循环时，你有两个循环。使用调试器很容易发现这种错误。

```
for (int i = num; i < (wCount - 1); i++) {
    for (int j = (i + 1); j < wCount; j++) {
        wArr[i].setWrd(wArr[j].getWrd());
        wArr[i].setHnt(wArr[j].getHnt());
    }
} 
```

对于要删除的数字中的每个单词，您都将每个单词复制到最后，最后一个是结尾。

```
for (int i = num; i < (wCount - 1); i++) {
        wArr[i].setWrd(wArr[i+1].getWrd());
        wArr[i].setHnt(wArr[i+1].getHnt());
} 
```

这会将每个值向下复制一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T14:02:47.110

使用这个算法，它将在内循环的主体中获得 (i, j) 的所有组合，令人惊讶地分配给元素 (i) 每个 (j)，最后是 (j) 的最后一个。

但是您不需要这种算法来删除数组中的元素。你最好复制数组的剩余部分。

```
Word[] newWArr = new Word[wArr.length - 1];
System.arraycopy (wArr, 0, newWArr, 0, num);
System.arraycopy (wArr, num + 1, newWArr, num, wArr.length - num - 1);
wArr = newWArr; 
```

# sql - 添加过滤条件时，为什么 NULL 值会从我的 SELECT/JOIN 结果中消失？

> ID：12319014
> 
> 赞同：1
> 
> 时间：2012-09-07T13:24:39.610
> 
> 标签：sql, join, null

我正在进行以下选择查询：

```
select date(al.created_on) date, a.name appname, u.regcode rc, u.email_address ea from audit_logs al 
JOIN users u ON al.user_id = u.id
JOIN applications a ON al.application_id = a.id
group by date, appname, ea
order by date DESC, appname, ea; 
```

并获得超过 900 个结果，其中“u.regcode rc”的许多值为 NULL。

我还需要过滤掉特定的 regcode 并将查询更改为：

```
select date(al.created_on) date, a.name appname, u.regcode rc, u.email_address ea from audit_logs al 
JOIN users u ON al.user_id = u.id
JOIN applications a ON al.application_id = a.id
WHERE u.regcode != '9999'
group by date, appname, ea
order by date DESC, appname, ea; 
```

但是现在所有 u.regcode 为 NULL 的结果也被过滤掉了。即使我将 WHERE 子句更改为“ WHERE u.regcode = NULL ”，NULL 值也会被过滤掉，我什么也得不到。

有没有一种方法可以过滤掉 u.regcode-column 的特定值而不会丢失具有 NULL 值的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:27:04.290

*所有*与 null 的比较都评估为 false （或者，更准确地说，它们评估为*unknown*，这意味着它们*不评估为 true*，这意味着它们的行为类似于 false 但使用这些表达式的任何其他布尔运算也评估为 unknown），包括平等和不平等的比较。这是 SQL 较难掌握的方面之一，但从根本上说`null`是缺失值。就 SQL 服务器而言，可能*有*一个值，但它没有它，因此该值是*unknown*。因为它不知道值是什么，所以它不知道它是等于、小于还是大于任何其他值。

要将值与 null 进行比较，您需要使用`is null`或`is not null`。

因此，对于您的查询，您可以使用

```
where u.regcode != 9999 or u.regcode is null 
```

# javascript - CKeditor Preview Plugin.js，为 Chrome 和 IE 编辑。因为它拒绝 CSS 样式

> ID：12319015
> 
> 赞同：2
> 
> 时间：2012-09-07T13:24:43.287
> 
> 标签：javascript, plugins, ckeditor, preview

我正在为一个相当简单的 CMS 集成 WYSIWYG 编辑器。我选择了 CKeditor 并使用“预览”按钮。这个东西就是在三大浏览器中不一致。（IE、Chrome 和 Firefox）。

如果你曾经使用过 CKeditor，你会知道在它附带的文件中有两个位置可以找到“preview.html”。这些是：

```
http://sitename/ckeditor/plugins/preview 
```

和

```
http://sitename/ckeditor/_source/plugins/preview 
```

后者还包含一个与预览插件相关的 plugin.js 文件，我觉得我的问题的答案在哪里。可以在此处找到此代码：

[http://jsfiddle.net/keKLP/](http://jsfiddle.net/keKLP/)

只是为了让你能看到。现在的问题是默认情况下预览只是纯文本。因此，我编辑了 preview.html 页面，并将从编辑器中提取内容的代码封装在 HTML 中，包括样式表引用和图像路径。在 Firefox 中，这可以正常工作，但仅在 Firefox 中。在 chrome 和 IE 中，它没有样式，没有图像，什么都没有。当我查看它时，我注意到 Firefox 预览会打开一个指向实际地址的新窗口。地址为：

```
http://mysite.co.uk/ckeditor/plugins/preview/preview.html 
```

其中 IE 和 Chrome 打开一个新窗口/标签指向：

```
about:blank 
```

通过查看上面列出的 JavaScript 文件 (plugin.js)，我可以看到它对 Firefox 的作用与其他浏览器不同。我已经更改了文件中几乎所有说“路径”或“URL”的内容，试图让它指向与其他浏览器中的 Firefox 相同的位置，而不是 about:blank。

但是我不是 JavaScript 专家，我觉得我对确切问题的理解不足。这让我发疯，任何人都可以指出我应该查看的那个文件中的一些 JavaScript，或者阐明这个问题吗？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:23:42.777

有一种可能的方法可以跟踪预览插件 .js 文件并尝试编辑它调用预览弹出窗口的方式。然而，这是冗长且有问题的，因为它在 Firefox 中似乎总是比任何其他浏览器都运行得更好。

我对此的解决方案是删除 ckeditor 并实施 TinyMCE。预览页面更容易编辑并且完全没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:01:40.917

我解决了将我自己的自定义文件（css、js、meta 等）添加到 ckeditor.js 中的问题。我创建了一个包含 html 代码（带有链接、元、脚本）的字符串变量，如下所示：

```
var my_includefiles='<link href="http://assets.mydomain.com/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" /><link href="http://assets.mydomain.com/css/mainstyle.css" rel="stylesheet" type="text/css" charset="utf-8"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>'; 
```

我刚刚将我的 var 添加到这部分代码（_cke_htmlToLoad 的一部分）：

```
a=a.config.docType+'<html dir="'+a.config.contentsLangDirection+'"><head>'+e+CKEDITOR.tools.buildStyleHtml(a.config.contentsCss)+my_includefiles+"<title>"+a.lang.preview.preview+"</title></head>"+(b+">")+a.getData()+"</body></html>" 
```

之后，使用我自己的自定义样式和行为进行预览在 IE9、FF19、Opera12 中运行良好，但在 Chrome (25) 中运行良好，因此为了使其在 Chrome 中运行，我删除了 ckeditor.js 的这部分代码

```
CKEDITOR.env.webkit&&setTimeout(function(){f.body.innerHTML=f.body.innerHTML+""},0) 
```

这解决了问题。我希望它有所帮助。

# asp.net - 保护 ASP.NET Web 目录中的文件夹

> ID：12319020
> 
> 赞同：2
> 
> 时间：2012-09-07T13:25:01.713
> 
> 标签：asp.net, security, password-protection, web-folders

我在一个网站上工作了很长时间，它一直运行良好，最近报告了一个问题，我需要解决这个问题。

在我的站点中有一个名为 repository 的文件夹，其中包含诸如 word 和 PDF 文档之类的文件，理想情况下，只有登录的用户才可以下载它们，但现在已经观察到任何未登录该网站的人，甚至也可以下载它们:(

有没有办法在不将文件夹移出 web 目录的情况下处理它？就像使该文件夹受密码保护并且只有我的页面可以访问内容一样，任何代码示例或链接都将非常有用。

我的 Web 应用程序位于带有 C# 的 ASP.NET 2.0 中，服务器具有 IIS 6.0。

提前致谢

**编辑：**

我的 Web.Config 中有这些标签：

```
<authentication mode="Forms">
  <forms slidingExpiration="true" loginUrl="Login.aspx" defaultUrl="HomePage.aspx" name=".ASPXMAIN" timeout="30">
  </forms>
</authentication>
<authorization>
  <deny users="?" />
</authorization> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:28:00.587

使用`<location />`web.config 中的标签， http: [//msdn.microsoft.com/en-us/library/b6x6shw7 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7(v=vs.71).aspx)

```
 <location path="content">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

有关 msdn 文档的更多链接，请参阅此答案： [https ://stackoverflow.com/a/4280257/426894](https://stackoverflow.com/a/4280257/426894)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:29:21.737

您可以在 Web.config 中尝试使用此配置（位置允许您定义路径）

此示例用于`roles`设计配置文件。

也用于`users`设计用户。

```
<location path="~/MembersOnly" > 
  <system.web> 
    <authorization> 
      <allow roles="Members"/> 
      <deny users="?" /> 
    </authorization> 
  </system.web> 
</location> 
```

# android - Jelly Bean 在按下返回按钮时启动 googlequicksearchbox

> ID：12319021
> 
> 赞同：1
> 
> 时间：2012-09-07T13:25:02.730
> 
> 标签：android, google-search, android-4.2-jelly-bean

我正在开发一个应用程序，在带有 Android 4.1 的摩托罗拉 XOOM 上，当我在我的应用程序中按下视频播放器活动的返回按钮时，它会启动 Google 搜索活动。此应用程序未发送任何 Google 搜索意图。它也可以在以前的 android 版本甚至 ICS 设备上正常工作。这是日志

```
09-05 14:19:53.260: I/InputReader(271): Reconfiguring input devices.changes=0x00000004
09-05 14:19:53.260: I/InputReader(271): Device reconfigured: id=2, name='qtouch-touchscreen', surface size is now 1280x800, mode is 1
09-05 14:19:53.360: I/ActivityManager(271): Config changed: {1.0 0mcc0mnc en_US sw800dp     w800dp h1232dp xlrg port finger -keyb/v/h -nav/h s.37}
09-05 14:19:53.410: D/myTag(11672): com.orvis.container.OKnot@41b7f650
09-05 14:19:53.440: D/dalvikvm(1231): GC_CONCURRENT freed 248K, 5% free 7967K/8327K, paused 9ms+6ms, total 70ms
09-05 14:19:53.460: W/AudioFlinger(93): session id 764 not found for pid 11672
09-05 14:19:53.510: I/ActivityManager(271): START {act=android.intent.action.ASSIST flg=0x10000000 cmp=com.google.android.googlequicksearchbox/.SearchActivity u=0} from pid 344 
```

请协助。谢谢你。

# mysql - HeidiSQL 导入 csv 空字段

> ID：12319023
> 
> 赞同：7
> 
> 时间：2012-09-07T13:25:14.153
> 
> 标签：mysql, csv, null, heidisql

我想使用 HeidiSQL 将 csv 文件导入我的 MySQL 数据库。

但是我的一些字段是空的。

我该怎么做才能让 HeidiSQL 知道这些空值必须被视为 NULL 值？

csv 文件样本（最后 2 个字段未知）：

```
 NULL;Students Corner;437452182;; 
```

创建命令：

```
 CREATE  TABLE `db`.`customers` (
         `company_id` INT NOT NULL AUTO_INCREMENT ,
         `company_name` VARCHAR(40) NULL ,
         `company_number` INT NULL ,
         `company_vat` INT NULL ,
         `company_zip` INT NULL,
    PRIMARY KEY (`company_id`) ); 
```

我收到这些错误：

```
 Incorrect integer value: '' for column 'company_id' at row 1 */
    Incorrect integer value: '' for column 'company_vat' at row 1 */
    Incorrect integer value: '' for column 'company_zip' at row 1 */
    etc 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T14:29:04.673

If solved it by writing \N in each empty field instead of writing NULL !

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T14:19:50.207

`LOAD DATA INFILE`您可以使用查询将 CSV 文件导入 MySQL 。

在你的情况下，你会写这样的东西：

```
LOAD DATA INFILE filename.txt
INTO TABLE customers
FIELDS TERMINATED BY ';'
LINES TERMINATED BY '\n'
(@id, @name, @number, @vat, @zip)
SET
  company_id     = (CASE WHEN @id='' THEN NULL ELSE @id END),
  company_name   = (CASE WHEN @name='' THEN NULL ELSE @name END),
  company_number = (CASE WHEN @number='' THEN NULL ELSE @number END),
  company_vat    = (CASE WHEN @vat='' THEN NULL ELSE @vat END),
  company_zip    = (CASE WHEN @zip='' THEN NULL ELSE @zip END) 
```

（您可能需要根据行尾标记等进行调整，但这应该非常接近您的需要）

# python - 调用过滤器返回

> ID：12319025
> 
> 赞同：121
> 
> 时间：2012-09-07T13:25:22.353
> 
> 标签：python, list, python-3.x, filter

我正在学习 Python 中过滤器的概念。我正在运行这样的简单代码。

```
>>> def f(x): return x % 2 != 0 and x % 3 != 0
>>> filter(f, range(2, 25)) 
```

但是，我收到的不是列表，而是这样的消息。

```
<filter object at 0x00FDC550> 
```

这是什么意思？这是否意味着我的过滤对象（即要出来的列表）存储在该内存位置？如何获得我需要的清单？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-09-07T13:26:13.400

看起来您正在使用 python 3.x。在 python3 中，`filter`, `map`,`zip`等返回一个可迭代的对象，但不是一个列表。换句话说，

```
filter(func,data) #python 2.x 
```

相当于：

```
list(filter(func,data)) #python 3.x 
```

我认为它已更改，因为您（通常）想要以一种懒惰的方式进行过滤——您不需要消耗所有内存来预先创建一个列表，只要迭代器返回相同的东西一个列表将在迭代期间。

如果您熟悉列表推导和生成器表达式，那么上面的过滤器现在（几乎）等同于 python3.x 中的以下内容：

```
( x for x in data if func(x) ) 
```

相对于：

```
[ x for x in data if func(x) ] 
```

在 python 2.x 中

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-07T13:26:27.503

它是[过滤器](http://docs.python.org/release/3.0.1/library/functions.html#filter)函数返回的[迭代](http://getpython3.com/diveintopython3/iterators.html)器。

如果你想要一个列表，就做

```
list(filter(f, range(2, 25))) 
```

尽管如此，您可以使用循环来迭代此对象`for`。

```
for e in filter(f, range(2, 25)):
    do_stuff(e) 
```

# sql - 具有计算字段的联接表的 SQL 更新

> ID：12319027
> 
> 赞同：1
> 
> 时间：2012-09-07T13:25:36.530
> 
> 标签：sql, ms-access-2007

首先，我知道已经有关于它的问题和答案，这个线程是最接近我需要的线程：

[SQL 更新其连接值的总和](https://stackoverflow.com/questions/2502032/sql-update-to-the-sum-of-its-joined-values)

但是，我收到了似乎在`FROM`子句附近发生的语法错误（缺少运算符）。然而我看不到。它不喜欢`FROM`自己吗？我不习惯`FROM`在更新语句中使用，但从我刚刚链接的 QA 看来它是有效的：|

知道为什么会有语法错误吗？

我正在使用 Access 2007 SP3。

编辑：哇，我忘了发布查询...

```
UPDATE r

SET
    r.tempsmoy_requete_min = tmm.moy_mob_requete

FROM
    rapports AS r INNER JOIN
    (SELECT 
        id_fichier, 
        Round(Sum(temps_requete_min)/3,0) As moy_mob_requete,
        Round(Sum(temps_analyse_min)/3,0) As moy_mob_analyse, 
        Round(Sum(temps_maj_min)/3,0) As moy_mob_maj, 
        Round(Sum(temps_rap_min)/3,0) As moy_mob_rap, 
        Round(Sum(temps_ddc_min)/3,0) As moy_mob_ddc

    FROM maintenances 

    WHERE 
        periode In (10,9,8) And 
        annee=2011

    GROUP BY id_fichier) AS tmm ON rapports.id_rapport = tmm.id_fichier

WHERE 
    1=0 
```

这`WHERE 1=0`部分是因为我想在运行它之前进一步测试子查询。

编辑：这是我正在尝试的一些更简单的查询。这次我得到一个不同的错误。它现在告诉我 tempsmoy_requete_min （可能还有所有其他左操作数）不是聚合函数的一部分......这是我查询的重点。任何的想法 ？

```
UPDATE 
    rapports INNER JOIN maintenances ON rapports.id_rapport = maintenances.id_fichier

SET
    rapports.tempsmoy_requete_min = Round(Sum(temps_requete_min)/3,0),
    rapports.tempsmoy_analyse_min = Round(Sum(temps_analyse_min)/3,0),
    rapports.tempsmoy_maj_min = Round(Sum(temps_maj_min)/3,0),
    rapports.tempsmoy_rap_min = Round(Sum(temps_rap_min)/3,0),
    rapports.tempsmoy_ddc_min = Round(Sum(temps_ddc_min)/3,0)

WHERE 
    maintenances.periode In (10,9,8) And 
    maintenances.annee=2011 AND
    1=0 
```

![在此处输入图像描述](../Images/bf979214a22cf51d4166be6f54c32289.png)

![在此处输入图像描述](../Images/f1870669078574268bc2c189a0975601.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:36:15.060

```
UPDATE r 
```

应该

```
UPDATE rapports 
```

您不能在更新目标中可靠地使用别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:00:53.563

我尝试调整您的第一个查询示例，并且能够使您的错误消失。但是后来我遇到了一个不同的错误（'*操作必须使用可更新的查询*'）。

也有可能克服这个错误。但是，我发现使用域函数而不是连接来检索替换值更容易。

```
UPDATE rapports
SET tempsmoy_requete_min = Round(DSum("temps_requete_min",
    "maintenances",
    "periode In (10,9,8) AND annee=2011 "
    & "AND id_fichier='" & id_rapport
    & "'")/3, 0); 
```

如果此建议适用于`tempsmoy_requete_min`您的数据，则必须将其扩展到您要替换的其他字段。那不会很漂亮。您可以使用保存的查询使其不那么难看，然后将其用作...的“*域*”参数，`DSum()`这可以让您使用更简单的“*标准*”参数。

# algorithm - 河内max、标尺和塔的递归算法分析

> ID：12319030
> 
> 赞同：3
> 
> 时间：2012-09-07T13:25:48.777
> 
> 标签：algorithm, recursion

我在 C++ 中的算法中有以下来自 robert sedwick 的程序

```
Item max(Item a[], int l, int r){
    if (l == r) return a[l];
    int m = (l+r)/2; 
    Item u = max(a, l, m);
    Item v = max(a, m+1, r);
    if (u > v) 
        return u; 
    else 
        return v;
} 
```

以下是河内塔的程序

```
void hanoi(int N, int d)
  {
    if (N == 0) return;
    hanoi(N-1, -d);
    shift(N, d);    
    hanoi(N-1, -d);
  } 
```

以下是标尺程序

```
void rule(int l, int r, int h)
  { int m = (l+r)/2;
    if (h > 0)
      { 
        rule(l, m, h-1);
        mark(m, h);
        rule(m, r, h-1);
      }
  } 
```

以上三个问题都通过将大小为 2 的 n-1 次方的问题分成两个问题来解决大小为 2 的 n 次方问题。

我理解标尺和最大值，但上述声明中的河内塔怎么样？

在分析上述程序时，作者提到为了找到最大值，我们在输入的大小上有线性时间解；对于绘制标尺和求解塔，我们有输出大小的线性时间解。

作者所说的上述输出大小的线性时间解是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:08:01.757

对于 honoi 塔，您的递归算法是 (H(1) = 1)：

> H(n) = 2 H(n-1) + 1 = 2^2H(n-2) + 2 + 1 .... = 2^(n-1) H(1) + 2^(n-2 ) + ... + 1 = 2^(n-1) + 2^(n-2) + ... + 1 = 2^n - 1。

但是对于 honoi 塔的解决方案也应该打印 2^n - 1 次移动，这等于你的算法的运行时间，所以你的输出的大小和你的算法关系的运行时间是线性的，事实上

> lim [n->∞] 输出 / 运行时间 = 常数。

这意味着算法的运行时间与输出呈线性关系（但您可以看到它与输入的关系是指数的）。

同样在再次找到最大值时，您可以使用这样的 a`lim`来表示它与输入具有线性关系。

# wpf - 网格变黑

> ID：12319035
> 
> 赞同：0
> 
> 时间：2012-09-07T13:26:15.993
> 
> 标签：wpf, windows-8

每次我将图像设置为网格时，图像都不会出现并且出现黑色背景

```
 private void Clk_Enter(object sender, Windows.UI.Xaml.RoutedEventArgs e)
    {
        ImageBrush myBrush = new ImageBrush();
        BitmapImage bi = new BitmapImage();
        bi.UriSource = new Uri(@"C:\Users\Administrator\documents\visual studio 2012\Projects\HelloWorld\HelloWorld\Images\Backgrounds\wallpaper-2022265.jpg",UriKind.Absolute);
        myBrush.ImageSource = bi;

        mygrid.Background = myBrush;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:54:09.483

问题是您没有使用相对于您的项目的路径。在 Metro 应用程序中，您访问文件系统的方式受到限制。[请参阅我在此处](http://windows8applicationdevelopment.blogspot.com/)发表的关于此的帖子。

您可以像这样在 Xaml 中使用项目相对 URI：

```
<!--Relative To Project-->
<Image Margin="5" Source="/Images/favicon.ico" Height="100"/> 
```

或在这样的代码中：

```
bi.UriSource = new Uri("/images/wallpaper-2022265.jpg",UriKind.Relative); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:46:41.953

您需要在设置 UriSource 之前调用 BitmapImage.BeginInit()，然后再调用 BitmapImage.EndInit()。

```
ImageBrush myBrush = new ImageBrush();
BitmapImage bi = new BitmapImage();
bi.BeginInit();
bi.UriSource = new Uri(@"C:\Users\Administrator\documents\visual studio 2012\Projects\HelloWorld\HelloWorld\Images\Backgrounds\wallpaper-2022265.jpg", UriKind.Absolute);
bi.EndInit();
myBrush.ImageSource = bi;

mygrid.Background = myBrush; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:50:10.130

我找到了答案只需在 URI 之前添加：“ms-appx”

```
ImageBrush myBrush = new ImageBrush();
 BitmapImage bi = new BitmapImage();

 bi.UriSource = new Uri("ms-appx:/images/wallpaper-2022265.jpg",UriKind.Absolute);

 myBrush.ImageSource = bi;

  mygrid.Background = myBrush; 
```

# grails - 如何在会话中存储石英作业的结果？

> ID：12319037
> 
> 赞同：2
> 
> 时间：2012-09-07T13:26:22.677
> 
> 标签：grails, quartz-scheduler, grails-2.0

我已经在我的 Grails 2.1 应用程序中安装了 Quartz 插件。每 5 分钟触发一项计算一些数字的作业。数字显示在每一页的侧边栏上。计算结果会经常变化，我的目标是当用户刷新屏幕时，他们可以在侧边栏看到新结果。现在我的方法是将ajax调用发送到控制器并从数据库中获取结果并将其呈现在屏幕上。

有没有办法在数据库以外的地方存储（缓存）来自 JOB 的计算结果，以便我的视图可以使用它们而无需在每次用户单击链接或刷新屏幕时执行查询？

我考虑过会话，但不确定它是否可能超出正常的 Web 请求，或者它根本不是一个好的解决方案。有没有解决方案或替代方法？谢谢

```
class MonitoringJob {
    def calculatorService
    def name  = 'Monitoring'
    def group = 'ApplicationGroup'
    static triggers = {
        simple name: 'mySimpleTrigger', startDelay: 60000, repeatInterval: 30000
    }

    def execute() {
        def results = calculatorService.runCalculators()
            //something like this:   session.results  =result
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T20:00:05.933

Grails 中的服务默认是单例的，因此`calculatorService`在 Quartz 作业中访问的服务将与`calculatorService`在它所连接的其他类（例如，控制器）中访问相同。

只需将值存储在您的类级别，`calculatorService`并为控制器添加一个访问器方法来检索数据。

```
class CalculatorService {

    ConcurrentHashMap cache = [:]

    def runCalculators() {
        // Do calculations
        cache.result1 = calculatedResult1
        // etc...
    }

    def retrieveCalculation(String key) {
        cache[(key)]
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:28:40.643

您可以使用`grailsApplication`. 只需注入`grailsApplication`您的工作，然后通过分配保存值`grailsApplication.config.calcResults = calculatorService.runCalculators`

您可能还想初始化该`grailsApplication.config.calcResults`值，`Bootstrap.groovy`以便在作业第一次运行之前可用。

# android - 来自文件管理器和图库的 .Mp4 自定义 Intent 过滤器

> ID：12319038
> 
> 赞同：2
> 
> 时间：2012-09-07T13:26:24.917
> 
> 标签：android, android-intent, android-manifest

我在编写应用程序的 manifest.xml 时遇到问题。我希望当我尝试打开任何 .mp4 文件时，系统会要求我用我的应用程序打开它。

我能够用这段代码做到这一点：

```
<data android:pathPattern="*.mp4" android:scheme="file"/> 
```

这样，如果我从文件管理器打开任何 .mp4 文件就可以了，但我无法从图片库中执行此操作。有办法只从文件管理器和图库中捕获 mp4 视频吗？

# c# - 删除所有小数点并输入 %

> ID：12319041
> 
> 赞同：0
> 
> 时间：2012-09-07T13:26:33.743
> 
> 标签：c#

我想从十进制值中删除所有小数点并在末尾添加一个“％”。我正在尝试使用以下代码。

```
<%:string.Format("{0:0}",i.discount) %> 
```

这使得 10.0000 到 10。但是有什么办法可以在 10 之后加上“%”吗？

编辑：我在表格中显示数据。有些行有折扣值，有些行没有。所以我的查询返回 null 或折扣值。

我只想在那些行中显示具有折扣价值的 (%)。我不想在那些没有任何折扣值的行中只显示 (%)。

希望它能更好地解释这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:27:45.450

使用[标准格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)：

```
<%:(i.discount / 100).ToString("P0") %> 
```

您可以简单地添加`%`到字符串的末尾：

```
<%:string.Format("{0:0}%",i.discount) %> 
```

或者，在字符串之后，嵌入标记中：

```
<%:string.Format("{0:0}",i.discount) %>% 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:28:40.070

尝试

```
<%:i.discount.ToString("P0") %> 
```

或者，

```
<%:string.Format("{0:P0}", i.discount) %> 
```

请注意，这会将数字乘以 100，使 10.00 变为 1000%；这可能不是你想要的。

**编辑**：由于您在评论中指出这*不是*您想要的，请尝试以下操作之一：

```
<%:(i.discount / 100.0).ToString("P0") %>
<%:string.Format("{0:P0}", i.discount / 100.0) %> 
```

如果为空，这些值应留空`i.discount`。

对于格式化单个数值，`ToString`效率略高于`string.Format`，因为`string.Format`从花括号中解析格式字符串然后将其传递给`ToString`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:27:43.020

添加`%`到您的格式字符串。

```
<%:string.Format("{0:0}%",i.discount) %> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T13:28:37.857

尝试这个;

```
<%:string.Format("{0:0}%",(int)i.discount) %> 
```

您也可以使用`Math.Floor`,`Math.Round`或`Math.Ceil`进行更好的舍入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T13:33:45.077

尝试使用百分比格式化程序：

[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

# sql-server - SQL Server 分区非规范化数据

> ID：12319042
> 
> 赞同：0
> 
> 时间：2012-09-07T13:26:40.107
> 
> 标签：sql-server, sql-server-2008, normalization, database-partitioning

我认为可能有一种方法可以对其进行分区以找到我想要的东西，但我看不到它。我有一些关于产品集的稍微*未标准化的数据：*

```
SetItemID   ComponentItemID quantity    IsPrimary
123         234             1           1
123         345             2           0
456         567             3           1
456         678             2           0 
```

我需要找到`quantity`所描述的集合，例如，`IsPrimary`component's `quantity`> 'IsPrimary=0`component's`数量。我还需要找到组件之间数量相等的集合等。**如果需要，可以为此使用多个语句**

到目前为止，我所拥有的只是一个部分`PARTITION`陈述，可能是也可能不是正确的方法，但我不知道*如何比较集合中的数量*：

```
WITH setdata as
(select *, row_number() OVER(
    PARTITION by s.setitemid order by s.setitemid) position from set_table s )
// descending just to get newer sets
SELECT* from setdata order by setitemid desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:35:20.000

如果我正确地遵循了您的要求，那么应该这样做：

```
SELECT p1.SetItemId
 from (--  IsPrimary = 1
       select SetItemID, ComponentItemId, Quantity
        from SetData
        where IsPrimary = 1) p1
  inner join (--  IsPrimary = 0
              select SetItemID, ComponentItemId, Quantity
               from SetData
               where IsPrimary = 0) p0
   on p0.SetItemID = p1.SetItemID
    and p1.Quantity > p0.Quantity
  --and p1.Quantity = p0.Quantity 
```

将最后一行用于等量的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:39:30.467

```
SELECT *
FROM   set_table a
WHERE  isPrimary = 1
       AND quantity > (SELECT quantity
                       FROM   set_table b
                       WHERE  a.setItemId = b.setItemId
                              AND isPrimary = 0)
ORDER  BY setItemId DESC 
```

或者

```
SELECT a.*
FROM   set_table a
       INNER JOIN set_table b
               ON a.setItemId = b.setItemId
                  AND a.isPrimary = 1
                  AND b.isPrimary = 0
WHERE  a.quantity > b.quantity 
```

# twitter-bootstrap - Bootstrap Carousel 重新计算元素的宽度

> ID：12319051
> 
> 赞同：0
> 
> 时间：2012-09-07T13:27:15.827
> 
> 标签：twitter-bootstrap, width, carousel

嗨，问题出在页面下部的滑块中。Carousel 正在做一些奇怪的事情——在制作动画后不到一秒的时间内，它会重新计算当前项目中每个元素的宽度。它看起来很糟糕，在检查了 CSS 之后我仍然不知道如何修复它。

你有什么主意吗？

[引导轮播问题](http://movetogether.herokuapp.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:39:37.980

在landing-page.css 下：

`.content-carousel .container .carousel .carousel-inner .item { padding:0 5% }`

我把它关了，它解决了这个问题。我还没有确切地诊断出为什么这会导致问题，但是写了一两个旋转木马，在项目上填充 % 让我觉得这是个坏主意。如果填充很重要，您可能想尝试将 box-sizing 设置为border-box，但除了消除物品的橡皮筋之外，我没有注意到任何其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:19:26.297

@Erik Reppen 的代码没有成功。

我没有一个好的解决方案，但我确实修复了它。我非常仔细地观察了引导程序的轮播示例[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)。

我发现 img 宽度必须大于网格宽度。在`span9`中，宽度最大为 870px，因此您必须准备一个大于 870px 的图像。如果您在 img 之外有更多容器，因为所有容器都有边框或边距，您可以使用宽度较小的图像。

与[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)一样，您可以使用 830px 宽度，因为 div.span9 和 Carousel 之间存在

# silverlight-5.0 - 如何在 Silverlight 中实现自动保存功能

> ID：12319053
> 
> 赞同：0
> 
> 时间：2012-09-07T13:27:23.223
> 
> 标签：silverlight-5.0, autosave

我想实现自动保存功能。

我有一个 silverlight 应用程序，在其中，我们通过单击按钮在服务器上发送数据。现在我不想点击那个按钮，我想，我的数据应该以 20 或 30 秒的时间间隔定期发布到服务器。

请向我提供您对如何实施这一点的宝贵建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:43:36.103

我使用此代码来保持会话处于活动状态。它与您尝试做的事情相同；在指定的定期间隔后自动调用服务：

```
 public Page()
    {
        InitializeComponent();
        // Set up timer
        System.Windows.Threading.DispatcherTimer dt =
            new System.Windows.Threading.DispatcherTimer();
        // Set to call every 5 minutes
        dt.Interval = new TimeSpan(0, 0, 5, 0, 0);
        // Set up event handler
        dt.Tick += new EventHandler(dt_Tick);
        // Start timer
        dt.Start();
    }
    void dt_Tick(object sender, EventArgs e)
    {
        // Call web service
        Ping();
    }

    void Ping()
    {
        WebTest.otsref.SilverlightServiceClient webService = new WebTest.SilverlightServiceClient();
        webService.PingAsync();
    } 
```

# android - 当我第二次尝试启动 AsyncTask 时，它会停止应用程序

> ID：12319057
> 
> 赞同：0
> 
> 时间：2012-09-07T13:27:32.370
> 
> 标签：android

我正在尝试创建一个应用程序，该应用程序通过 GPS 获取我的地理位置并将其发送到数据库。一切正常，直到我第二次尝试更新我的地理位置。我正在通过 ubuntu 终端将数据发送到模拟器中。当我第一次发送它时，它将映射指向该点，并将正确的数据插入数据库，但是当我第二次尝试发送数据时，它显示“不幸的是，应用程序已停止”）

我以这种方式发送数据：

```
telnet localhost 5554
geo fix 100 100 
```

代码

```
public class LocationActivity extends MapActivity implements LocationListener { 
...
  InsertToDatabase Insert = new InsertToDatabase();

      @Override
  public void onLocationChanged(Location location) {

      Insert.latitude = location.getLatitude();
      Insert.longitude = location.getLongitude();
      Insert.execute();

    try {
      List<Address> addresses = geocoder.getFromLocation(location.getLatitude(), location.getLongitude(), 10); 
      for (Address address : addresses) {
        this.locationText.append("\n" + address.getAddressLine(0));
      }

      int latitude = (int)(location.getLatitude() * 1000000);
      int longitude = (int)(location.getLongitude() * 1000000);

      GeoPoint point = new GeoPoint(latitude,longitude);
      mapController.animateTo(point); 

    } catch (IOException e) {
      Log.e("LocateMe", "Could not get Geocoder data", e);
    }
  } 
```

InsertToDatabase 类（LocationActivity 类的子类）

```
 class InsertToDatabase extends AsyncTask<String, String, String> {

        Double latitude;
        Double longitude;

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(LocationActivity.this);
            pDialog.setMessage("Creating Product..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("longitude", this.longitude.toString()));
            params.add(new BasicNameValuePair("latitude", this.latitude.toString()));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);

            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {

                } else {

                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:33:10.993

你应该使用

`new Insert(..).execute();` 每次你想启动一个 AsyncTask。根据定义，AsynTask 只运行一次。

由于您只创建了一次 Insert 对象，因此如果您尝试再次运行该实例，您的应用程序将会崩溃。

如果您需要将参数或数据传递给 Insert，您应该编写一个新的构造函数，获取这些参数，然后以这种方式调用它：

```
new Insert(longitude,latitude).execute(); 
```

# iphone - 如何在 uitextfield 委托方法中获取单元格索引路径？

> ID：12319058
> 
> 赞同：14
> 
> 时间：2012-09-07T13:27:33.103
> 
> 标签：iphone, objective-c, uitableview, user-interface, uitextfield

我在自定义单元格中有两个文本字段如何在文本字段委托方法中获取 Tableview 单元格的 indexpath 值我想从用户那里获取输入值并将其保存到相关对象。用户可以通过单击单元格中的按钮（添加更多）来添加更多单元格..

![在此处输入图像描述](../Images/a683ed89d4a88df3d6ec4d772eacc64e.png)

提前致谢...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-03T12:23:09.970

**更新到iOS7！**

有了 iOS7 中的新功能，现在**代码**应该是：

```
UITableViewCell *textFieldRowCell;

if (floor(NSFoundationVersionNumber) <= NSFoundationVersionNumber_iOS_6_1) {
    // Load resources for iOS 6.1 or earlier
    textFieldRowCell = (UITableViewCell *) textField.superview.superview;

} else {
    // Load resources for iOS 7 or later
    textFieldRowCell = (UITableViewCell *) textField.superview.superview.superview; 
   // TextField -> UITableVieCellContentView -> (in iOS 7!)ScrollView -> Whoola!
}

NSIndexPath *indexPath = [self.tableView indexPathForCell:textFieldRowCell]; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-16T15:12:59.253

更动态的解决方案（没有硬编码的超级视图级别和不同 iOS 版本的相同代码）。

此外，`indexPathForCell:`如果单元格不可见，则将无法使用，因此我将`indexPathForRowAtPoint:`其用作解决方法。

```
//find the UITableViewcell superview
UIView *cell = textField;
while (cell && ![cell isKindOfClass:[UITableViewCell class]])
    cell = cell.superview;

//use the UITableViewcell superview to get the NSIndexPath
NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:cell.center]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-30T14:59:40.837

这就是我一直在做的事情，并且一直有更好的运气。我抓住了 textField 框架的原点。将其转换为一个点。然后将该点转换为索引路径。

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{
    CGPoint origin = textField.frame.origin;
    CGPoint point = [textField.superview convertPoint:origin toView:self.tableView];

    NSIndexPath * indexPath = [self.tableView indexPathForRowAtPoint:point];

    [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionMiddle animated:YES];

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-05T09:43:14.127

尝试此方法从`tableview`控制器的任何位置动态获取文本字段

```
 #pragma mark - Get textfield indexpath
- (NSIndexPath *)TextFieldIndexpath:(UITextField *)textField
{
    CGPoint point = [textField.superview convertPoint:textField.frame.origin toView:self.TblView];
    NSIndexPath * indexPath = [self.TblView indexPathForRowAtPoint:point];
    NSLog(@"Indexpath = %@", indexPath);
    return indexPath;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-07T18:26:30.107

要获取 indexPath，请尝试以下代码。

```
 UIView *contentView = (UIVIew *)[textfield superview];
    UITableViewCell *cell = (UITableViewCell *)[contentView superview];
    if(IS_IOS7_OR_GREATER) {
        cell = (UITableViewCell *)[[contentView superview] superview];
    }
    NSIndexPath *indexPath = [self.tableview indexPathForCell:cell]; 
```

Tats它你完成了。

简单来说，

```
NSIndexPath *indexPath = [self.tableview indexPathForCell:(UITableViewCell *)[(UIVIew *)[textfield superview] superview]];

if(IS_IOS7_OR_GREATER) {
    cell = (UITableViewCell *)[[[textfield superview] superview] superview];
} 
```

检查更新的答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-19T06:58:23.710

您可以在 cellForRowAtIndexPath: 中设置文本字段的标签，以便它存储单元格和文本字段的信息

例如：如果是第 4 行的单元格，则第 1 和第 2 文本字段的标签可以分别为 41 和 42。同样，第 5 行的文本字段标签应为 51 和 52，依此类推...

然后在 textfield 委托方法中，您可以获得 textfield.tag 来识别活动的文本字段。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-07T13:31:29.960

将单元格索引路径值设置为`UITextField` `tag`属性，您可以在委托方法中访问索引路径，例如`textfield.tag`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-01T10:04:12.933

这可以在任何实例的 Objective-C 运行时中完成（不必是 UITextField），以及任何关联的对象（不必是 NSIndexPath）。

对于这个问题，我们可以创建一个类别`UIView+RepresentingIndexPath`。

我们的接口允许我们设置和检索一个 NSIndexPath：

```
@interface UIView (RepresentingIndexPath)
- (void)representIndexPath:(NSIndexPath *)indexPath;
- (NSIndexPath *)representedIndexPath;
@end 
```

我们的实现使用 Objective-C 关联对象来设置和检索视图上的索引路径：

```
#import "UIView+RepresentingIndexPath.h"
#import <objc/runtime.h>

static char IndexPathKey;

@implementation UIView (RepresentingIndexPath)

- (void)representIndexPath:(NSIndexPath *)indexPath
{
    objc_setAssociatedObject(self, &IndexPathKey, indexPath, OBJC_ASSOCIATION_COPY_NONATOMIC);
}

- (NSIndexPath *)representedIndexPath
{
    return objc_getAssociatedObject(self, &IndexPathKey);
}

@end 
```

在行动：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    TextFieldTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"TextFieldCell" forIndexPath:indexPath];
    [cell.textField addTarget:self action:@selector(textFieldTextChanged:) forControlEvents:UIControlEventEditingChanged];
    [cell.textField representIndexPath:indexPath];
    return cell;
}

- (void)textFieldTextChanged:(UITextField *)sender
{
    NSIndexPath *indexPath = [sender representedIndexPath];
    NSLog(@"%@", indexPath);
} 
```

*最后一点！如果您可以在不这样做的情况下实现您想要做的事情，那么真的应该避免在运行时乱搞。只是想我会添加另一个解决方案！*

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-22T07:49:20.267

我找到了这个答案，搜索如何在 UITextField 中找到单元格的索引路径。

所以，多亏了上面的答案，我把我的代码放在这里，希望可能有用。

```
- (void)searchSelectedIndexPath:(UIView*)view {
    // This allow to find selected index path for a table view cell with a text field inside.
    for (UIView* subview in view.subviews) {
        if ([view isKindOfClass:[UITextField class]]) {
            if ([view isFirstResponder]) {
                UIView *cell = view;
                while (cell && ![cell isKindOfClass:[UITableViewCell class]]) {
                    cell = cell.superview;
                }
                self.selectedIndexPath = [self.tableView indexPathForRowAtPoint:cell.center];
                return;
            }
        }
        [self searchSelectedIndexPath:subview];
    }
} 
```

这样，当键盘通知将被提升时：

```
- (void)keyboardDidShow:(NSNotification*)notification {
    [self searchSelectedIndexPath:self.tableView];
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-09T17:28:08.200

如果像我这样的人需要@Kerkness 的答案（这个真的对我有用）：

```
func textFieldDidBeginEditing(_ textField: UITextField) {
    let origin: CGPoint = textField.frame.origin
    let point: CGPoint? = textField.superview?.convert(origin, to: tableView)
    let indexPath: IndexPath? = tableView.indexPathForRow(at: point ?? CGPoint.zero)
    tableView.scrollToRow(at: indexPath!, at: .middle, animated: true)
} 
```

它应该是直截了当的：你明白了，然后你得到了 indexPath 并用它做任何你需要的事情！

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-06-27T15:54:09.097

谢谢@Luka，它的效果很好。这是swift 4解决方案，

```
var selectedIndexPath: IndexPath?

override func viewDidLoad() {
    super.viewDidLoad()

    // Do any additional setup after loading the view.
    NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillShowHide(_ :)), name: NSNotification.Name.UIKeyboardWillShow, object: nil)

    NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillShowHide(_ :)), name: NSNotification.Name.UIKeyboardWillHide, object: nil)

}

func searchSelectedIndexPath(view: UIView) {
    view.subviews.forEach { (subview) in
        if view is UITextView, view.isFirstResponder == true {
            var cell:UIView? = view;
            while cell != nil && !(cell is UITableViewCell) {
                cell = cell?.superview;
            }
            if cell != nil {
                self.selectedIndexPath = self.dashBoardTableView.indexPathForRow(at: (cell?.center)!)
                return
            }
        }
        self.searchSelectedIndexPath(view: subview)
    }
}

// Keyboard notification observer menthod
@objc fileprivate func keyboardWillShowHide(_ notification: NSNotification){
     if notification.name == NSNotification.Name.UIKeyboardWillShow {

        UIView.animate(withDuration: duration, animations: { () -> Void in
            self.selectedIndexPath = nil;
            self.searchSelectedIndexPath(view: self.tableView)
            if let indexpath = self.selectedIndexPath {
                self.tableView.scrollToRow(at: indexpath, at: .top, animated: false)
            } else{
                self.bottomContriant.constant = keyboardHeight
                self.view.layoutSubviews()
            }
        })
    } else {
        self.bottomContriant.constant = 15
        UIView.animate(withDuration: duration, animations: { () -> Void in
            self.view.layoutIfNeeded()
        })
    }
} 
```

# svn - 为什么 CollabNet Subversion Edge 这么慢？

> ID：12319059
> 
> 赞同：3
> 
> 时间：2012-09-07T13:27:36.657
> 
> 标签：svn, subversion-edge

我们已经在 Windows 服务器上安装了 Subversion Edge，但是唤醒真的非常非常慢，我们不知道为什么。有时我必须重新启动服务。管理区域有时需要 15 分钟才能加载 - 一旦加载，就可以了。

实际的 SVN 看起来不错，通常只是管理屏幕

只是想知道是否有人有任何想法或经历过

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T09:53:06.443

你是说 Subversion Edge 吗？您是否满足安装的最低要求？

Subversion Edge 是用 Java 编写的，需要 Java 6 运行时环境。作为 Java 服务器应用程序，理想情况下它应该有大约**512 MB 的**可用 RAM。

最终，Apache Subversion 服务器很可能成为服务器硬件需求的更大驱动力。Subversion Edge 不会干扰 Apache Subversion 服务器的性能。理想情况下，它通过正确配置和管理使其运行效率更高一些。

更多信息，请访问[Edge 常见问题解答部分](http://www.open.collab.net/nonav/go/csvne2_r2a/faq.html#3)并在此[论坛中提出您的问题](https://ctf.open.collab.net/sf/discussion/do/listForums/projects.svnedge/discussion)

# wordpress - WordPress：更改附件页面的 URL slug

> ID：12319061
> 
> 赞同：0
> 
> 时间：2012-09-07T13:27:43.417
> 
> 标签：wordpress, url-rewriting, slug

众所周知，WordPress 有附件页面来显示添加到帖子中的每个附件。单击帖子中的图像后，它会将您带到该图像的附件页面。现在对我来说问题在于 WordPress 为这个页面选择的 slug。它将图像的文件名作为其 slug。因此，如果您的图像具有文件名“IMG0019.jpg”，则页面的 url 将变为[http://yoursite.com/post/img0019/](http://yoursite.com/post/img0019/)

这对我来说意义不大。我希望 slug 成为图像的标题，如果它不可用，那么它应该选择图像的文件名。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:36:17.880

您可以使用插件来选择附件post slug，例如[http://wordpress.org/extend/plugins/slug4apig/](http://wordpress.org/extend/plugins/slug4apig/)

[PS：您可以在https://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)上发布此类问题

# javascript - 为什么 AJAX 调用有时会重定向页面？

> ID：12319062
> 
> 赞同：0
> 
> 时间：2012-09-07T13:27:43.643
> 
> 标签：javascript, jquery, asp.net

我有一个包含 3 个 iframe、顶部标题、左侧导航和内容 iframe 的页面。

（这是一个遗留应用程序）。

包含 3 个 iframe 的页面对页面进行 jQuery AJAX 调用：

`/users/getNotifications.aspx`

有时（我相信当我没有登录时）浏览器重定向到我的 AJAX 调用的 URL，即 localhost/users/getNotifications.aspx

我显然不希望它像这样重定向，知道为什么会发生这种情况吗？

笔记：

我的页面响应：

```
 Response.ContentType = "text/html";
 Response.Write(resultInHtml); 
```

此外，如果用户未登录，页面不会重定向。

这是我调用以使用 ajax requestT 获取数据的方法：

```
var x = function () {
        $.ajax({
            type: "GET",
            url: webRoot + "users/getNotifications.aspx",
            cache: false,
            success: function (payload) {
                if (payload.length > 0) {
                    $("#users-popup").html(payload);
                }
                displayPopup();                
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:33:09.807

问题很可能是您的 javascript 在您未登录时无法很好地处理从您的页面返回的任何结果。可能它正在尝试提取此上下文中不存在的值，从而引发错误。

这将意味着它没有完成运行该函数，因此任何“返回 false”或其他防止默认行为的方法都没有运行，因此默认点击行为正在发生并导航到新页面。

没有更多的代码虽然这只是一个理论。

# java - 避免在每一行尝试捕获的聪明方法

> ID：12319068
> 
> 赞同：1
> 
> 时间：2012-09-07T13:28:01.713
> 
> 标签：java, exception-handling, try-catch

我目前正在使用 XML 文件，并且正在寻找一种更好的方法来避免 try/catch 块。

事情就是这样。假设我有一个 XML 文件。

```
<A>
    <BB>37</BB>
    <CC>
        <DDD>1</DDD>
    </CC>
</A> 
```

事实上，我把它变成了一个对象，这意味着我可以做 *myXml.getA()*等等。

在我的代码中，我在这个对象中搜索了很多给定的元素，这意味着我有很多行，比如

```
int ddd = myXml.getA().getCC().getDDD(); 
```

问题是某些元素可能不存在，例如另一个 XML 元素只能是这样的：

```
<A'>
    <BB'>37</BB'>
</A'> 
```

因此，如果我尝试获取 ddd，*getCC()*会引发**NullPointerException**。

最后，我最终这样编码：

```
int ddd;
try{
    ddd = myXml.getA().getCC().getDDD();
}
catch (NullPointerException e){
ddd = 0;
} 
```

这可行，但代码变得非常难看。我正在寻找一种解决方案来拥有类似的东西

```
int ddd = setInt(myXml.getA().getCC().getDDD(), 0); 
```

**0**是默认值，以防方法引发异常。

有什么好方法吗？

到目前为止，我找不到不引发错误的解决方案。

谢谢你的帮助！

**编辑：**只是不要得到与 XML 相关的答案。我向大家展示了xml部分以了解问题。在我的代码中，我无法访问 XML，而只能访问代表它的对象。

**简而言之，我真正喜欢的是某种 isNull 方法来测试我的吸气剂。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:48:57.087

您可以查看[Null 对象模式](http://en.wikipedia.org/wiki/Null_Object_pattern)。

例如 ：

```
public class A {
    private C c;
    public C getC() {
        if (c == null) {
            c = new C(0); // the "null object"
        }
        return c;
    }
}

public class C {
    private int d;
    public C(int d) {
        this.d = d;
    }

    public int getD() {
        return d;
    }
} 
```

但就个人而言，我对这段代码有一种不好的感觉：

```
int ddd = myXml.getA().getCC().getDDD(); 
```

[这是对得墨忒耳法则的](http://en.wikipedia.org/wiki/Law_of_Demeter)强烈违反。类调用者对 A、C 和 D 的了解太多。这段代码显然难以适应和维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:54:32.300

这是与 jaxb 一起工作的一种烦恼。在我的公司，我们使用 jaxb 做了足够多的工作，值得编写一个 xjc 插件，它生成每个 getter 的“安全”版本，保证为任何非平凡值返回非空值（不可变实例在子对象实际上并不存在）。

这是我们生成的模型实体的示例：

```
public class ExampleUser implements Serializable {
    private final static long serialVersionUID = 20090127L;
    @XmlAttribute
    protected String name;
    @XmlAttribute
    protected String email;
    public final static ExampleUser EMPTY_INSTANCE = new ExampleUser() {
        private static final long serialVersionUID = 0L;
        @Override
        public void setName(java.lang.String value) { throw new UnsupportedOperationException(); }
        @Override
        public void setEmail(java.lang.String value) { throw new UnsupportedOperationException(); }
    };

    public String getName() {
        return name;
    }

    public void setName(String value) {
        this.name = value;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String value) {
        this.email = value;
    }
}

public class ExampleAccount implements Serializable {
    private final static long serialVersionUID = 20090127L;
    protected ExampleUser user;
    @XmlElement(name = "alias")
    protected List<String> aliases;
    @XmlAttribute
    protected String id;
    @XmlAttribute
    protected String name;
    public final static ExampleAccount EMPTY_INSTANCE = new ExampleAccount() {
        private static final long serialVersionUID = 0L;
        @Override
        public void setUser(com.boomi.platform.api.ExampleUser value) { throw new UnsupportedOperationException(); }
        @Override
        public List<String> getAliases() { return java.util.Collections.emptyList(); }
        @Override
        public void setId(java.lang.String value) { throw new UnsupportedOperationException(); }
        @Override
        public void setName(java.lang.String value) { throw new UnsupportedOperationException(); }
    };

    public ExampleUser getUser() {
        return user;
    }

    public void setUser(ExampleUser value) {
        this.user = value;
    }

    public List<String> getAliases() {
        if (aliases == null) {
            aliases = new ArrayList<String>();
        }
        return this.aliases;
    }

    public String getId() {
        return id;
    }

    public void setId(String value) {
        this.id = value;
    }

    public String getName() {
        return name;
    }

    public void setName(String value) {
        this.name = value;
    }

    public ExampleUser safeGetUser() {
        return (getUser() != null) ? getUser() : ExampleUser.EMPTY_INSTANCE;
    }
} 
```

因此，您可以编写此代码而不必担心 NPE：

```
userEmail = account.safeGetUser().getEmail(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:01:59.117

解决此类问题的两种一般方法是其他答案已经涵盖的空对象模式，以及类型安全的空值，例如 Scala 的 Option。

[http://www.scala-lang.org/api/current/scala/Option.html](http://www.scala-lang.org/api/current/scala/Option.html)

有几个 Java 版本的 Option 敲门。

[http://functionaljava.googlecode.com/svn/artifacts/2.20/javadoc/fj/data/Option.html](http://functionaljava.googlecode.com/svn/artifacts/2.20/javadoc/fj/data/Option.html)

[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Optional.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Optional.html)

与平面图结合使用时，类型安全的空值特别有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T14:20:33.233

使用[Apache common-beanutils](http://commons.apache.org/beanutils/)创建您的 set 方法。它将使用反射，然后您只有一个地方可以捕获错误。

它看起来像这样（没有编码，所以请原谅语法错误）。

```
int getInt(Object root, String beanPattern, int defaultValue)
{
   try
   {
      return PropertyUtils.getNestedProperty(root, beanPattern);
   }
   catch (Exception e)
   {
      return 0;
   }
} 
```

这将被称为这样。

```
int ddd = getInt(myXml, "A.CC.DDD", 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T13:37:39.343

使用[Xpath 查询](http://www.w3schools.com/xpath/default.asp)而不是 get 方法。如果找不到元素路径，它会给你一个空列表。

```
List ddds = myXml.query("/AA/BB/CC/DDD");
if (!ddds.empty()) {} 
```

正确的语法取决于您使用的 XML 库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T13:32:42.210

你不能只写一个足够通用的函数来为每个值调用，并返回值或 0。

就像是

```
myGetSomething(FOO){
  try {getFOO} catch ...
} 
```

然后您的代码本身看起来不错，但该函数基本上对每个调用都有一个 try-catch。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T14:12:57.847

[用Groovy](http://groovy.codehaus.org/)或[Xtend](http://www.eclipse.org/xtend/)编写部分代码；两者都支持表达式左侧的`?.`返回计算结果为的语法。他们也摆脱了无用的，所以你可以写：`null``null``get`

```
myXml.a?.cc?.ddd 
```

与 Groovy 相比，Xtend 的语法更差，但它编译为纯 Java，因此您只需在代码中添加一个带有一些帮助程序类的 JAR 即可使用结果。

# c# - 如何在 Microsoft 报告中显示字节数组中的图像

> ID：12319071
> 
> 赞同：9
> 
> 时间：2012-09-07T13:28:13.083
> 
> 标签：c#, image, report, bytearray, picturebox

我正在使用报告文件和 ReportViewer 控件来显示在运行时从对象动态加载数据的报告。

我需要显示在对象中存储为字节数组的图像。

PictureBox 的值当前设置为：

```
=First(Fields!ImageData.Value, "dtstItemImage") 
```

我使用以下方法设置数据源：

```
ImageBindingSource.DataSource = this.item.Image.ImageData; 
```

代码编译并运行，但**图像未显示在报告中**。

这是因为 PictureBox 需要绑定到 Image 对象（而不是字节数组）吗？或者我需要设置 PictureBox 的一些属性吗？

**更新 1**

我在 PictureBox 中添加了一个边框，以确保它是可见的并且它确实显示在报告中。它只是不包含图像。

**更新 2**

我已经修复了我的代码中的一个错误。我改变了：

```
ImageBindingSource.DataSource = this.item.Image.ImageData; 
```

到：

```
ImageBindingSource.DataSource = this.item.Image; 
```

由于 PictureBox 绑定到 ImageData 字段，但 DataSource 是 Image 对象。

现在我得到一个小十字图标，而不是什么都没有（至少对我而言）表明取得了一些进展，但我不知道字节 [] 位图转换代码需要在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T06:27:38.413

我设法通过将报告的**图像框`Source`属性设置为`Database`**（之前设置为`External`）来解决此问题。

可以在[(MSDN) HowTo: Add an Image (Reporting Services)](http://msdn.microsoft.com/en-us/library/ms156388%28SQL.105%29.aspx)中找到有关不同可用 Source 值的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:36:11.673

您需要从字节数组创建一个图像对象并将其用作源。

为此，您可以使用如下辅助函数

```
public static Image LoadImage(byte[] imageBytes)
{
     Image image = null;
     using (var ms = new MemoryStream(imageBytes))
         image = Image.FromStream(ms);

     return image;
} 
```

* * *

**编辑**

对于 WPF，您需要使用`BitmapSource`( [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource.aspx) ) 而不是`Image`( [MSDN](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx) )

```
public static BitmapSource LoadImage(Byte[] imageBytes)
{
    var image = new BitmapImage();
    using (var ms = new MemoryStream(binaryData))
    {
        image.BeginInit();
        image.StreamSource = ms;
        image.CacheOption = BitmapCacheOption.OnLoad;
        image.EndInit();
    }

    if (image.CanFreeze)
        image.Freeze();

    return image;
} 
```

**注意：**您也可以使用 来执行此操作`IValueConverter`，请参阅此[博客文章以获取源代码](http://yadyn.blogspot.co.uk/2011/10/converting-image-byte-array-into-usable.html)。

* * *

然后修改你的数据绑定

```
ImageBindingSource.DataSource = LoadImage(item.Image.ImageData); 
```

...

确保`MemoryStream`在完成后正确处理图像（和），否则会泄漏内存。

此外，根据字节数组的格式，您可能需要做一些工作。有关一些有用信息，请参阅我的[问题/答案之一](https://stackoverflow.com/questions/2750342/unsigned-char-buffer-freetype2-bitmap-to-systemdrawingbitmap)。

# actionscript-3 - 来自 Air 项目中外部加载的 swf 的 addchild

> ID：12319078
> 
> 赞同：0
> 
> 时间：2012-09-07T13:28:43.883
> 
> 标签：actionscript-3, air, flash, external

我正在开发适用于 iOS 的 Air 应用程序，并寻找一种方法来加载外部 swf，然后将该库中的影片剪辑添加/删除到主舞台。

通常，我可以在可以从主文档类访问的外部 swf 的文档类中使用 addchild 例程。但是由于 Air 部署中不允许外部加载的 swfs 中的文档类，所以我不能使用这种方法。

每个外部 swf 将包含多达 10 个单独的影片剪辑，并且有超过 25 个外部 swf 我想从主舞台加载/删除，所有这些都包含独特的艺术作品/动画。

谁能建议一种方法来做到这一点？谢谢！马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:53:22.853

我有同样的问题，我也有大约 10 个不同的外部 swfs 代码。所以对我来说最简单的方法是将每个文件编译为 swc 并将它们包含在项目中。

# java - Big O 用于有限的、固定大小的可能值集

> ID：12319079
> 
> 赞同：4
> 
> 时间：2012-09-07T13:28:45.007
> 
> 标签：java, java, algorithm, language-agnostic, big-o

[这个问题](https://stackoverflow.com/questions/12305028/java-what-is-the-best-way-to-find-first-duplicate-character-in-a-string)引发了一些困惑和许多关于各种答案中提出的算法是 O(1) 还是 O(n) 的评论。

我们用一个简单的例子来说明这两种观点：

> 我们想找到一个 long `x`，使得`a * x + b = 0`，在哪里`a`和`b`是已知的，非空 long。

*   一个明显的 O(1) 算法是`x = - b / a`
*   一个更慢的算法将包括测试每个可能的长值，平均慢约 2^63 倍。

第二种算法是 O(1) 还是 O(n)？

链接问题中提出的论点是：

*   它是 O(n)，因为在最坏的情况下，您需要遍历所有可能的 long 值
*   它是 O(1) [，因为它的复杂性是`c x O(1)`](https://stackoverflow.com/a/5872602/829571)，其中`c = 2^64`是一个常数。

虽然我理解说它是 O(1) 的论点，但感觉违反直觉。

ps：我添加了[java](/questions/tagged/java "显示标记为“java”的问题")，因为原始问题是Java，但这个问题与语言无关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T13:34:11.087

仅当存在变量 N 时，复杂性才相关。因此，这个问题没有任何意义。如果问题是：

> 一个更慢的算法将包括在 N 个值的范围内测试每个可能的值，这平均会慢 N 倍。
> 
> 第二种算法是 O(1) 还是 O(N)？

那么答案是：这个算法是 O(N)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T13:37:23.230

Big O 描述了算法的性能将如何*随着输入大小 n 的缩放而缩放*。换句话说，当您在更多输入数据上运行算法时。

在这种情况下，输入数据是固定大小的，因此两种算法都是 O(1)，尽管具有不同的常数因子。

如果您将“n”表示数字中的位数（即您删除了它是 64 位长的限制），那么您可以分析给定的位大小 n 算法如何扩展。

在这种情况下，第一个~~仍然是 O(1)~~ *（参见 Qnan 的评论）*，但第二个现在是 O(2^n)。

我强烈推荐观看[麻省理工学院“算法导论”](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-046j-introduction-to-algorithms-sma-5503-fall-2005/)课程的早期讲座。它们是对大 O（和大欧米茄/西塔）的一个很好的解释，尽管确实假设对数学有很好的掌握。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T13:37:18.110

检查解决方案中每个可能的输入是 O(2^N) 的位数。当您使位数恒定时，两种算法都是 O(1)，您知道需要检查多少个解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T19:50:09.763

事实：你在计算机上实际运行的每个算法都是 O(1)，因为宇宙的计算能力是有限的（有有限的原子，自大爆炸以来已经过去了有限的秒数）。

这是真的，但不是一种非常有用的思考方式。当我们在实践中使用 big-O 时，我们通常假设所涉及的常数相对于渐近项是很小的，因为否则仅给出渐近项并不能告诉您算法如何执行的太多信息。这在实践中效果很好，因为常量通常是“我使用数组还是哈希映射”之类的东西，最多相差 30 倍，输入是 10 ^ 6 或 10 ^ 9，所以二次方之间的差异线性算法比常数因素更重要。不遵守此约定的大 O 讨论（如算法＃2）是毫无意义的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T13:40:23.553

无论 a 或 b 的值是什么，最坏的情况仍然是检查 2^64 或 2^32 或 2^somevalue 值。该算法的复杂度在 O(2^k) 时间内，其中 k 是用于表示长值的位数，如果我们考虑 a 和 b 的值，则为 O(1) 时间。

# r - 如何在 data.table 中进行否定/不匹配/反向搜索？

> ID：12319083
> 
> 赞同：20
> 
> 时间：2012-09-07T13:28:47.690
> 
> 标签：r, select, data.table

如果我想使用二进制搜索选择 data.table 中不包含键变量中特定值的所有行，会发生什么情况？顺便说一句，我想做的正确术语是什么？是“不加入”吗？是“负选择”吗？

```
DT = data.table(x=rep(c("a","b","c"),each=3), y=c(1,3,6), v=1:9)
setkey(DT,x) 
```

让我们对 x=="a" 但使用二分搜索的所有行进行正选择

```
DT["a"] 
```

这很漂亮，但我想要相反的。我想要所有不是“a”的行，换句话说，x！=“a”

```
DT[x!="a"] 
```

那是矢量扫描。上述行有效，但使用矢量扫描。我想使用二进制。我期待以下工作，但唉......

```
DT[!"a"]
DT[-"a"] 
```

以上两个都不起作用，尝试使用 nomatch 让我无处可去。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-07T14:08:57.063

成语是这样的：

```
DT[-DT["a", which=TRUE]]

   x y v
1: b 1 4
2: b 3 5
3: b 6 6
4: c 1 7
5: c 3 8
6: c 6 9 
```

* * *

灵感来自：

*   [发布不匹配的返回选择/加入](http://lists.r-forge.r-project.org/pipermail/datatable-help/2010-July/000140.html)的邮件列表？
*   上一个问题[non-joins with data.tables](https://stackoverflow.com/q/7920688/602276)
*   Matthew Dowle 对将集合操作从 R 的数据帧移植到数据表的回答[：](https://stackoverflow.com/a/7823030/602276)[如何识别重复的行？](https://stackoverflow.com/q/7822138/602276)

* * *

**更新**。v1.8.3 中的新功能是非连接语法。Farrel 的第一个期望（`!`而不是`-`）已经实现：

```
DT[-DT["a",which=TRUE,nomatch=0],...]   # old idiom
DT[!"a",...]                            # same result, now preferred. 
```

有关更多详细信息和示例，请参阅[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T17:30:15.563

安德烈的回答很棒，而且我可能会使用。不过，有趣的是，以下构造似乎（只是有点）更快，尤其是随着 data.tables 大小的增加。

```
DT[J(x = unique(DT)[x!="a"][,x])]

##-------------------------------- Timings -----------------------------------##

library(data.table)
library(rbenchmark)

DT = data.table(x=rep(c("a","b","c"),each=45e5), y=c(1,3,6), v=1:9, key="x")
Josh <- function() DT[J(x = unique(DT)[x!="a"][,x])]
Andrie <- function() DT[-DT["a", which=TRUE]]

## Compare results
identical(Josh(), setkey(Andrie(), "x"))  
# [1] TRUE

## Compare timings
benchmark(replications = 10, order="relative", Josh=Josh(), Andrie=Andrie())
    test replications elapsed relative user.self sys.self user.child sys.child
1   Josh           10   17.50    1.000     14.78      3.6         NA        NA
2 Andrie           10   18.75    1.071     16.52      3.2         NA        NA 
```

* * *

`DT[,x]`如果可以返回**data.table**而不是向量，我会特别想使用它。然后，可以将构造简化为`DT[unique(DT[,x])[x!="a"]]`. 此外，即使键中有多个列，它也可以工作，而它目前没有。

# visual-studio-2005 - 为什么每次新部署后 Windows Mobile 6 模拟器都会重新启动？

> ID：12319086
> 
> 赞同：0
> 
> 时间：2012-09-07T13:28:59.140
> 
> 标签：visual-studio-2005, visual-studio-debugging, windows-mobile-6, windows-mobile-5.0

当我在 Visual Studio 中针对 Windows Mobile 6 设备停止并重新运行调试器时，模拟器每次都会重新启动，从而使调试体验非常缓慢。如果我对代码进行了更改，我可以理解，但是无论是否进行了更改，都会发生这种情况。

Visual Studio 每次都会重新启动一个新的模拟器有什么原因吗？如何确保调试器使用已在运行的同一模拟器实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:15:57.920

我想到了。我在解决方案中有多个项目用于各种程序集，并且为每个项目设置的仿真器类型有时不同，从而导致多个仿真器启动。当我关闭多个模拟器时，Visual Studio 会在下次我去调试时重新启动它们。

# web-services - WS-Security：@EndpointConfig 不起作用

> ID：12319087
> 
> 赞同：1
> 
> 时间：2012-09-07T13:29:00.460
> 
> 标签：web-services, jboss, cxf, ws-security, jbossws

我想构建一个受用户名和密码保护的简单示例 Web 服务。

作为起点，我使用：[https ://docs.jboss.org/author/display/JBWS/WS-Security](https://docs.jboss.org/author/display/JBWS/WS-Security)

问题：每个客户端即使有错误或丢失的凭据也可以调用 Web 服务方法。所以@EndpointConfig 似乎没有效果。但我不知道如何深入挖掘，因为我无法通过调试和 jboss 管理控制台获得有关 Web 服务配置的更详细信息。

网络服务类：

```
@WebService(serviceName="MyWebService", portName="MyWebServicePort")
@EndpointConfig(configFile = "WEB-INF/jaxws-endpoint-config.xml", configName = "myconfig")
public class MyWebService{...} 
```

jaxws-endpoint-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxws-config xmlns="urn:jboss:jbossws-jaxws-config:4.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:javaee="http://java.sun.com/xml/ns/javaee" xsi:schemaLocation="urn:jboss:jbossws-jaxws-config:4.0 schema/jbossws-jaxws-config_4_0.xsd">
  <endpoint-config>
    <config-name>myconfig</config-name>
    <property>
      <property-name>ws-security.username</property-name>
      <property-value>myusername</property-value>
    </property>
    <property>
      <property-name>ws-security.password</property-name>
      <property-value>mypassword</property-value>
    </property>
  </endpoint-config>
</jaxws-config> 
```

有什么建议可以拒绝未经授权的客户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:16:36.993

您基本上需要在您的 WSDL 中发布您的策略。

您必须在 WSDL 的绑定部分下添加。

```
<binding name="SecurityServicePortBinding" type="tns:ServiceIface">
<wsp:PolicyReference URI="#SecurityServiceSignThenEncryptPolicy"/>
...
</binding> 
```

并将策略定义本身添加到您的 WSDL 中。

```
<wsp:Policy wsu:Id="SecurityServiceSignThenEncryptPolicy" xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
 <wsp:ExactlyOne>
   <wsp:All>
    <sp:AsymmetricBinding xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
   ....
 </wsp:ExactlyOne>
</wsp:Policy> 
```

当您点击您的服务 URL（例如`http://localhost:8080/yourservice?wsdl`）时，您应该能够在返回的 WSDL 中看到策略引用。否则，不会发生身份验证/加密。

# android - 如何在同一行显示 textview 和 edittextview？

> ID：12319099
> 
> 赞同：0
> 
> 时间：2012-09-07T13:29:43.017
> 
> 标签：android

这是我在单独的行上显示编辑文本视图和文本视图的代码我如何在同一行上显示两者请帮助我谁能告诉我怎么可能？？？我如何在同一行显示标签登录和edittextview？？？

```
 <?xml version="1.0" encoding="utf-8"?>          

    <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:padding="10dip"
      android:layout_below="@id/header">
      <!-- Full Name Label -->

      <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="100dp"

    android:background="#000000"
    android:orientation="vertical" >

           <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="160dip"
        android:text="Send /Load Money"
        android:textColor="#FFCC00" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="180dip"
        android:text="___________________ "
        android:textColor="#99CC00" />

           <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="170dip"
        android:text="Pay Individual"
        android:textColor="#FFCC00" />

          </LinearLayout>

        <TextView 
            android:id="@+id/lblTPIOtherAccount"
          android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#FFCC00"
            android:text=""/>         

      <EditText  android:id="@+id/txtTPIotheraccount"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
                style="?android:attr/buttonStyleSmall"

            android:layout_marginTop="2dip"
            android:singleLine="true"
            android:textColor="#ffffff"

            android:layout_marginBottom="5dip"/>
      <!--  Pin Label -->
      <TextView 
          android:id="@+id/lblTPIPinno"
          android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#FFCC00"
            android:text=""/>
      <EditText 

         android:id="@+id/txtTPIpinno"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
                style="?android:attr/buttonStyleSmall"

            android:layout_marginTop="2dip"
            android:textColor="#ffffff"

            android:singleLine="true"
            android:layout_marginBottom="5dip"/>

      <TextView 
           android:id="@+id/lblTPIAmount"
          android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#FFCC00"
            android:text=""/>

      <EditText android:id="@+id/txtTPIamount"
            android:layout_width="fill_parent"
                style="?android:attr/buttonStyleSmall"

            android:textColor="#ffffff"

            android:layout_height="wrap_content"

            android:singleLine="true"
            android:layout_marginTop="2dip"
            android:layout_marginBottom="5dip"/>

      <!-- Register Button -->      
      <Button android:id="@+id/btnTPIsubmit"
          style="?android:attr/buttonStyleSmall"

            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:text="Submit"/>

         <Button   android:id="@+id/clearTPIButton"
             style="?android:attr/buttonStyleSmall"

            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:text="Clear"/>
          <Button android:id="@+id/btnTPIgoback"
              style="?android:attr/buttonStyleSmall"

            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:text="Go Back"/>

    </LinearLayout>
    <!-- Registration Form Ends --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:36:47.263

将下面的 XML 代码写入您的主要布局代码中，它将解决您的问题。

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="10dip" >

    <TextView
        android:id="@+id/mTxtView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Name" />

    <EditText
        android:id="@+id/mEdttxt1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:hint="Enter Name" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:34:51.237

把你的`TextView`and`EditText`放入`LinearLayout`with`android:orientation="horizontal"`属性

# c++ - 信号量与互斥量

> ID：12319101
> 
> 赞同：1
> 
> 时间：2012-09-07T13:29:45.567
> 
> 标签：c++, multithreading, synchronization

我正在阅读一些互斥量和信号量。

我有一段代码

```
int func()
{
 i++;
 return i;
} 
```

i 在外部某处被声明为全局变量。如果我创建计数为 3 的计数信号量，它不会有竞争条件吗？这是否意味着在这种情况下我应该使用二进制信号量或互斥量？

有人可以给我一些可以使用互斥锁、临界区和信号量的实用场景吗？

可能我读了很多。最后，我现在有点困惑。有人能理清思路吗。

PS：我知道互斥量和二进制信号量之间的主要区别是所有权。和计数信号量应该用作信令机制。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T14:52:24.077

互斥量和信号量之间的区别（我从未使用过 CriticalSection）：

*   使用条件变量时，它的锁必须是互斥锁。
*   当使用超过 1 个可用资源时，您必须使用用可用资源数量初始化的信号量，因此当您的资源不足时，下一个线程会阻塞。
*   当使用 1 个资源或某些只能由 1 个线程执行的代码时，您可以选择使用互斥锁或用 1 初始化的信号量（这是 OP 问题的情况）。
*   当让一个线程等待另一个线程发出信号时，您需要一个用 0 初始化的信号量（等待线程执行 sem.p()，信号线程执行 sem.v()）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:55:05.343

[临界区对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)是这里最简单的方法。它是一个轻量级的同步对象。

这是一些代码作为示例：

```
#define NUMBER_OF_THREADS 100

// global
CRITICAL_SECTION csMyCriticalSectionObject;
int i = 0;
HANDLE hThread[NUMBER_OF_THREADS];

int main(int argc, char *argv[]) 
{
  // initialize the critical section object
  InitializeCriticalSection(&csMyCriticalSectionObject);
  // create 100 threads:
  for (int n = 0; n < NUMBER_OF_THREADS; n++)
  {
    if (!CreateThread(NULL,0,func,hThread[n],0,NULL)) 
    {
      fprintf(stderr,"Failed to create thread\n");
    } 
  }
  // wait for all 100 threads:
 WaitForMultipleObjects(NUMBER_OF_THREADS,hThread,TRUE,INFINITE);
 // this can be made more detailed/complex to find each thread ending with its
 // exit code. See documentation for that
} 
```

链接：[CreateThread 函数](http://msdn.microsoft.com/en-us/library/ms682453%28VS.85%29.aspx)和[WaitForMultipleObjects 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025%28v=vs.85%29.aspx)

随着线程：

```
// i is global, no need for i to returned by the thread
DWORD WINAPI func( LPVOID lpvParam ) 
{
  EnterCriticalSection(&csMyCriticalSectionObject);
  i++;
  LeaveCriticalSection(&csMyCriticalSectionObject);
  return GetLastError();
} 
```

互斥量和/或信号量为此目的而走得很远。

编辑：信号量基本上是一个可以多次释放的互斥锁。它存储了释放操作的数量，因此可以释放相同数量的等待。

# android - 谷歌移动撰写页面网址

> ID：12319102
> 
> 赞同：0
> 
> 时间：2012-09-07T13:29:51.357
> 
> 标签：android, android-intent, google-plus

我想通过 android 发送预定义的 google+ 消息，但我不确定是否找到了正确的 URL。我找到了[https://plus.google.com/app/plus/mp/430/#~loop:view=compose](https://plus.google.com/app/plus/mp/430/#~loop:view=compose)，但它没有设置我的文本。实际上是否有另一个官方应用程序 URL 可以允许这样做？Twitter有一个波纹管。10倍

```
Intent i = new Intent();
i.putExtra(Intent.EXTRA_TEXT, msg);
i.setAction(Intent.ACTION_VIEW);
i.setData(Uri.parse("https://mobile.twitter.com/compose/tweet"));
ctx.startActivity(i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:26:58.597

`ACTION_SEND`您可以根据意图在 Google+ 上共享文本和图像。

例子：

```
Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_TEXT, "Hello World!");
shareIntent.setType("text/plain");
startActivity(shareIntent); 
```

如果您想直接定位 Google+ 应用，可以`shareIntent`在调用之前调用setPackage `startActivity`。

```
shareIntent.setPackage("com.google.android.apps.plus"); 
```

# javascript - 在我的目录结构中将单元测试帮助程序源文件放在哪里

> ID：12319105
> 
> 赞同：1
> 
> 时间：2012-09-07T13:30:01.167
> 
> 标签：javascript, unit-testing, architecture, directory-structure

我在 javascript 项目中有以下目录结构

```
/src
/test 
```

test 目录是 src 目录的镜像，其中第一个的每个文件在第二个中都有一个相关的测试文件。但是，我有一些常见的帮助源文件，这些文件被 test 目录下的文件用来执行测试。

我应该把它们放在哪里？under test 或 src 目录，还是我应该创建另一个目录？我知道这可能是一个偏好问题，只是要求最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:48:40.957

是的，这是一个偏好问题。

为什么 /test 中有 /src 辅助代码？/src 辅助方法/函数是与其他 /test 方法/函数紧密绑定还是松散耦合？如果是后者，我个人会将它们移出 /test 并将它们放在 /src/helpers 或类似的东西下。

随着时间的推移，您可能会将辅助代码集成到 /src 中的代码文件中和/或创建更多辅助方法来帮助您在 /src 中编写代码，并且在编写 /test 代码时，您也将使用这些辅助方法。

如果您的帮助代码更倾向于测试，那么它应该足够通用，不依赖于 /src 中的代码。这样，您可以将一个 /src 换成另一个，并使用相同的 /test 辅助方法对其进行测试。从本质上讲，这就像拥有一个可以在代码库中的任何位置使用的轻量级测试“框架”。

我在 C# 中使用继承和[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977%28v=vs.100%29.aspx)做了一些类似的事情，特别是与使用[NUnit](http://nunit.org/index.php?p=home)进行单元测试有关。

# spring - Spring、Quartz 和 JobStoreTX

> ID：12319106
> 
> 赞同：0
> 
> 时间：2012-09-07T13:30:05.933
> 
> 标签：spring, quartz-scheduler

通过使用**CronTriggerBean**，我创建了两个触发器（比如触发器 A 和 B）来调用两个不同的操作。我们将项目作为 .war 放置在 2 个服务器中。我正在使用**JobStoreTX**进行集群。我面临的问题是我只想集群一个触发器，即 A 和触发器 B 不应该集群。有没有办法通过代码指定必须集群的触发器。我的代码如下。

```
<bean id="shedulerJobStoreTX" class="org.quartz.impl.jdbcjobstore.JobStoreTX>
  <property name="driverDelegateClass" value="org.quartz.impl. jdbcjobstore.oracle.OracleDelegate">
<property name="dataSource" value ="jndiDS"/>
        <property name="tablePrefix" value="someschemaName"/>
        <property name="isClustered" value="true"/>
<property name="clusterCheckinInterval" value="${someValue}"/>
    </bean>
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">       
        <property name="triggers">
            <list>
                <ref bean="cronTrigger" />
                <ref bean="clusterCronTrigger"/>
            </list>
        </property>
    </bean>
<bean id="cronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
        <property name="jobDetail" ref="runAppJob" />
        <property name="cronExpression" value="${someTimeValue1}"/>
    </bean>
    <bean id="clusterCronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
        <property name="jobDetail" ref="runClusterJob" />
        <property name="cronExpression" value="${someTimeValue2}"/>
    </bean> 
```

嗨，我已经改进了代码，上面说的问题没有发生。PFB 的代码相同。

```
 <bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="triggers">
                <list>
                    <ref bean="cronTrigger" />
                    <ref bean="clusterCronTrigger"/>
                </list>
            </property>
            <property name="quartzProperties">
            <props>
              <prop key="org.quartz.jobStore.isClustered">false</prop> 
              <prop key="org.quartz.scheduler.instanceId">AUTO</prop> 
              <prop key ="org.quartz.jobStore.class">org.quartz.impl.jdbcjobstore.
   JobStoreTX </prop> 
              <prop key="org.quartz.jobStore.tablePrefix">schemaName</prop> 
              <prop key="org.quartz.jobStore.driverDelegateClass"> org.quartz.impl.jdbcjobstore.oracle.OracleDelegate</prop> 
              <prop key="org.quartz.jobStore.selectWithLockSQL"> SELECT * FROM {0}LOCKS UPDLOCK WHERE LOCK_NAME= ?</prop>
            </props>
            </property>
            <property name="dataSource" ref="fsmJndiDataSource"/> 
```

但是执行上述代码的问题是，当石英试图获得锁时，我得到了以下异常......” **init 方法的调用失败；嵌套异常是 org.quartz.SchedulerConfigException：在作业恢复期间发生故障。 [参见嵌套异常：org.quartz.impl.jdbcjobstore.LockException：获取数据库行锁失败：ORA-00942：表或视图不存在**”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-13T12:06:33.743

在运行调度程序之前，您需要在数据库中创建所需的石英表。

默认石英表 sql 脚本位于 \docs\dbTables..

例如，如果您使用的是quartz 2.2.1 分发版（quartz-2.2.1-distribution.tar\quartz-2.2.1\docs\dbTables\tables_oracle）

在数据库上执行 sql 脚本并确保您看到其中创建的表参考下图

[![在此处输入图像描述](../Images/813583e3c5f385e95681c37caa3f7a8a.png)](https://i.stack.imgur.com/Qfty3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:23:35.037

由于消息“ORA-00942：表或视图不存在”，我认为表“schemaNameLOCKS”丢失。确实，来自文档：

> org.quartz.jobStore.selectWithLockSQL
> 
> 必须是选择“LOCKS”表中的一行并在该行上放置锁的 SQL 字符串。如果未设置，默认为“SELECT * FROM {0}LOCKS WHERE SCHED_NAME = {1} AND LOCK_NAME = ? FOR UPDATE”，适用于大多数数据库。“{0}”在运行时被您在上面配置的 TABLE_PREFIX 替换。“{1}”替换为调度程序的名称。

# ios - 在 willRotateToInterfaceOrientation 中访问 self.view.bounds

> ID：12319107
> 
> 赞同：1
> 
> 时间：2012-09-07T13:30:12.007
> 
> 标签：ios, interface-orientation

在我的应用程序中，我想在设备旋转后保持图像居中。为此，我使用 willRotateToInterfaceOrientation 和 didRotateFromInterfaceOrientation 方法来确定平移向量。我正在使用以下代码：

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
  NSLog(@"%s ...", __func__);
  NSLog(@"\t self.view=%@", self.view);
  NSLog(@"\t self.view.bounds=%@", self.view.bounds);
  NSLog(@"\t self.view.frame=%@", self.view.frame);
  NSLog(@"\t self.view.frame=%@", [[self view] frame]);
  // Save previous bounds to determine translation after rotation occurred.
  _previousViewBounds = self.view.bounds;
}
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
  NSLog(@"%s ...", __func__);
  NSLog(@"\t self.view=%@", self.view);
  NSLog(@"\t self.view.bounds=%@", self.view.bounds);
  NSLog(@"\t self.view.frame=%@", self.view.frame);
  NSLog(@"\t self.view.frame=%@", [[self view] frame]);
  // Restore previous view.bounds and use new view.bounds to calculate translation.
  CGFloat tx = self.view.bounds.origin.x - _previousViewBounds.origin.x;
  CGFloat ty = self.view.bounds.origin.y - _previousViewBounds.origin.y;
  // ... do translation stuff ...
} 
```

我真的不明白为什么我不能访问 self.view.bounds 或 self.view.frame 成员，因为我的 NSLog 显示 self.view 存在。生成以下输出：

```
-[MapViewController willRotateToInterfaceOrientation:duration:] ...
  self.view=<UIView: 0x685fcc0; frame = (0 0; 320 367); autoresize = RM+BM; layer = <CALayer: 0x685fcf0>>
  self.view.bounds=(null)
  self.view.frame=(null)
  self.view.frame=(null)

-[MapViewController didRotateFromInterfaceOrientation:] ...
  self.view=<UIView: 0x685fcc0; frame = (0 0; 480 219); autoresize = RM+BM; layer = <CALayer: 0x685fcf0>>
  self.view.bounds=(null)
  self.view.frame=(null)
  self.view.frame=(null) 
```

任何人都知道出了什么问题或我失踪了，因为这真的让我发疯。非常感谢任何建议、意见或帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:37:31.120

`CGRect`不是一个对象，所以你不能记录这样的值。尝试记录 NSValue 对象：

```
NSLog(@"\t self.view.bounds=%@", [NSValue valueWithCGRect:self.view.bounds]); 
```

# asp.net-web-api - 如何在 ASP.NET WebApi 中修改 HttpRequestMessage 的表单数据内容

> ID：12319108
> 
> 赞同：0
> 
> 时间：2012-09-07T13:30:11.553
> 
> 标签：asp.net-web-api

是否可以**修改**过滤器`HttpRequestMessage`或`HttpMessageHandler`.

我想从查询字符串中读取一个值并依赖于某些逻辑我想`HttpRequestMessage`在它到达控制器上的操作方法之前更新传入的表单数据的内容，这样我仍然可以依赖内置的模型绑定并检查`ModelState.IsValid()`方法。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T12:42:31.357

我不相信请求内容可以修改，因为它是“一次读取”流。您对内容进行了哪些更改？

# java - java.lang.IllegalStateException：刷新数据时发生异常

> ID：12319109
> 
> 赞同：3
> 
> 时间：2012-09-07T13:30:12.227
> 
> 标签：java, servlets, servlet-filters, illegalstateexception

> **可能重复：**
> [刷新数据时发生异常。这是什么，为什么我会得到这个？](https://stackoverflow.com/questions/12327857/exception-occurred-when-flushing-data-what-is-this-and-why-am-i-getting-this)

以下是过滤器的片段。它获取客户端 IP，设置属性，然后将请求链接到 servlet。

```
@Override
 public void doFilter(ServletRequest request,ServletResponse response,FilterChain chain) 
        throws ServletException,IOException {
    String IP = request.getRemoteAddr();
    request.setAttribute("client IP from the filter", IP);
    chain.doFilter(request, response);
} 
```

以下是已收到过滤请求的 servlet 的片段。它获取 IP，将其存储为另一个属性，然后将请求分派给*index.jsp*。

```
 @Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String IP = (String)request.getAttribute("client IP from the filter");
    request.setAttribute("Client IP", IP);
    RequestDispatcher rd = request.getRequestDispatcher("index.jsp");
    rd.forward(request,response);
} 
```

index.jsp ，然后检索 servlet 设置的属性并对其进行处理。

servlet 是第一次打开网站*foo.com*时运行的第一件事。但是当我打开网站时，我看到了这个堆栈跟踪：

```
java.lang.IllegalStateException: Exception occurred when flushing data
at com.google.appengine.runtime.Request.process-d6995d0c305e239e(Request.java)
at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:191)
at org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:118)
at org.apache.jasper.runtime.JspFactoryImpl.access$100(JspFactoryImpl.java:40)
at org.apache.jasper.runtime.JspFactoryImpl$PrivilegedReleasePageContext.run(JspFactoryImpl.java:166)
at java.security.AccessController.doPrivileged(AccessController.java:34)
at org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:75)
at org.apache.jsp.index_jsp._jspService(index_jsp.java:139)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:327)
at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:126)
at Servlets.FW_FirstSite.doGet(FW_FirstSite.java:27)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at Filters.FirstSiteFilter.doFilter(FirstSiteFilter.java:24)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:452)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:458)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:698)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:336)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:328)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:456)
at java.lang.Thread.run(Thread.java:679)
Caused by: java.io.IOException: Stream closed
at org.apache.jasper.runtime.JspWriterImpl.ensureOpen(JspWriterImpl.java:204)
at org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:115)
at org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:188)
... 43 more 
```

日志表明异常发生在**Servlets.FW_FirstSite.doGet(FW_FirstSite.java:27)**这是语句*rd.forward(request,response);* 在**Filters.FirstSiteFilter.doFilter(FirstSiteFilter.java:24)**这是语句*chain.doFilter(request, response);* .

为什么会得到这些异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:41:34.163

我的猜测是，您对 response.getWriter() 的调用会在刷新响应时启动将响应写入客户端。出于这个原因，您不能再转发请求，因为它已经被刷新了。

您*可以*多次设置响应内容类型而不用担心，但除非您已经完成了预处理，否则您不应该调用作者。

另请注意，调用 getOutputStream() 具有相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:07:55.167

doGet 方法中以下代码的目的是什么？

```
response.setContentType("text/plain");
PrintWriter writer = response.getWriter(); 
```

我实际上并没有检查规范，但我怀疑您是否可以在将请求转发到另一个资源之前操纵 servlet 的响应（既不能通过设置标头，也不能通过访问 OutputStream 或 Writer）。

# django - blank=False,null=False 在模型代码 Django 中不起作用

> ID：12319110
> 
> 赞同：3
> 
> 时间：2012-09-07T13:30:16.393
> 
> 标签：django, django-models, django-1.3

```
class Url(models.Model):
    url=models.URLField(verify_exists=True,max_length=200,blank=False,null=False)
    date=models.DateTimeField(auto_now_add=True)
    count=models.IntegerField(default=0)
    isspam=models.IntegerField(default=0) 
```

这是我的模型代码..当我创建一个没有参数的对象时..即使在写入之后`blank=False,null=False`，该对象也会被创建并保存到数据库中，并且 URL 也不会检查是否存在。如果我提供了一个死链接，它有效，但它不应该！

我的代码有什么问题？

**相关查询**：现在在 django 1.4 中，verify_exists 已被弃用......我如何检查 1.4 中的验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:14:49.193

所以我通过修改我的'url' `url=models.URLField(verify_exists=True,max_length=200,default=None,blank=False,unique=True)` 并通过object.clean_fields（）验证它来工作。

如果您不使用有效值或空值，则会引发如下错误

```
ValidationError: {'url': [u'This URL appears to be a broken link.'] }

ValidationError: {'url': [u'This field cannot be blank.'] } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:03:57.640

1.  正如您所看到的，django 默认情况下不会在 save() 上验证模型，但是您的数据库在插入 NULL 值时应该抛出错误，我会检查架构以确保。
2.  使用[URLValidator](https://docs.djangoproject.com/en/1.4/ref/validators/#urlvalidator)

# jquery - 如何忽略jquery mobile中的所有CSS元素

> ID：12319111
> 
> 赞同：2
> 
> 时间：2012-09-07T13:30:15.793
> 
> 标签：jquery, css, mobile, jquery-mobile

我想在移动网页上使用我自己的 CSS，但也将 jQuery mobile 用于菜单幻灯片。

我怎样才能忽略他们所有的 CSS 元素？

我知道`data-role="none"`属性会起作用，但不能将其应用于我的所有元素。

我还尝试在 jQuery CSS 之后包含我的 CSS，但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:55:36.503

您可以在事件处理程序中将`autoInitializePage`选项设置为，这样 jQuery Mobile 就不会自动初始化任何内容。然后，您可以通过调用其父元素来初始化单个小部件或一组小部件。`false``mobileinit``.trigger("create")`

文档：http: [//jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html)

这是一个演示：http: [//jsfiddle.net/bBTtN/1/](http://jsfiddle.net/bBTtN/1/)

`mobileinit`请注意，您需要在包含 jQuery 核心之后但在包含 jQuery Mobile 之前，在适当的位置绑定到事件。

例如：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script>
$(document).on("mobileinit", function () {
    $.mobile.autoInitializePage = false;
});
</script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

另请注意，默认情况下，jQuery Mobile`visibility : hidden`在`<body>`元素上设置，因此您需要一个 CSS 规则来覆盖它：

```
body {
    visibility : visible !important;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:32:25.420

不要包括他们的CSS。

# java - Spring WebFlow 项目。我无法阻止 log4j 打印调试语句

> ID：12319114
> 
> 赞同：0
> 
> 时间：2012-09-07T13:30:22.223
> 
> 标签：java, log4j

我正在开发一个 Spring WebFlow 项目。我无法阻止 log4j 打印调试语句。有人可以告诉我如何让它停止在控制台上放置调试语句并记录。

当我的服务器启动时，我看到了这个警告：

```
log4j:WARN Continuable parsing error 42 and column 11
log4j:WARN The content of element type "logger" must match "(level?,appender-ref*)". 
```

下面是我的 log4j.xml 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <appender name="console" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %-5p %c - %m%n" />
        </layout>
    </appender>

    <appender name="logfile" class="org.apache.log4j.FileAppender">
        <param name="File" value="logs/disater_relief.log" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %-5p %c - %m%n" />
        </layout>
    </appender>

    <appender name="rollinglogfile" class="org.apache.log4j.RollingFileAppender">
        <param name="file" value="logs/school_visit.log" />
        <param name="immediateFlush" value="true" />
        <param name="append" value="true" />
        <param name="maxFileSize" value="1MB" />
        <param name="maxBackupIndex" value="3" />

        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %-5p %c - %m%n" />
        </layout>

    </appender>

    <appender name="dailyrollinglogfile" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="file" value="./logs/school_visit.log" />
        <param name="immediateFlush" value="true" />
        <param name="append" value="true" />
        <param name="datePattern" value=" '.' yyyy-MM-dd " />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %-5p %c - %m%n" />
        </layout>

    </appender>

    <appender name="email" class="org.apache.log4j.net.SMTPAppender">
        <param name="BufferSize" value="512" />
        <param name="SMTPHost" value="xxx" />
        <param name="From" value="xx" />
        <param name="To" value="xx" />
        <param name="Subject" value="School Visit Web - SYSTEM ERROR" />

        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %-5p %c - %m%n" />
        </layout>

        <filter class="org.apache.log4j.varia.LevelRangeFilter">
            <param name="LevelMin" value="ERROR" />
            <param name="LevelMax" value="FATAL" />
        </filter>
    </appender>

    <root>
        <priority value="WARN" />
        <appender-ref ref="email" />
        <appender-ref ref="console" />
        <appender-ref ref="dailyrollinglogfile" />
    </root>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:44:07.637

这只是一个 log4j 问题。这似乎`<priority>`不是 logger 元素的有效子元素`<root>`。相反，你应该有`<level>`。

# ide - IntelliJ Idea 11 - 如何计算代码行数（LOC）？

> ID：12319115
> 
> 赞同：4
> 
> 时间：2012-09-07T13:30:31.100
> 
> 标签：ide, intellij-idea, lines-of-code

关于它有一个[老问题](https://stackoverflow.com/questions/3435581/how-to-count-lines-of-java-code-using-intellij-idea)，我刚刚尝试了一些人提到的**静态插件**，但在 Idea 重新启动后我找不到任何与之相关的东西。**有谁知道使用IntelliJ Idea 11**计算代码行数（LOC）的方法（插件等）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T16:53:45.907

查看 -> 工具窗口 -> 统计

我也在寻找这个。

# objective-c - 将图像发送到 AirPrint 的功能

> ID：12319121
> 
> 赞同：4
> 
> 时间：2012-09-07T13:30:55.760
> 
> 标签：objective-c, ios, airprint

我试图找到一个让我使用 AirPrint 打印的功能。

我有一个按钮`btnPrint`，当按下它时，应该将 myPic.jpg 打印到默认的 AirPrint 设备。但我不知道是否有这样的功能。

我在 xcode 中找不到很多关于 AirPrint 的文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:35:19.930

Apple 提供[的打印文档](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/Printing/Printing.html)可能会让您受益。

以下是[AirPrint 的 Objective-C 代码](https://stackoverflow.com/questions/5690931/objective-c-code-for-airprint)：

检查是否可以打印：

```
if ([UIPrintInteractionController isPrintingAvailable])
{
    // Available
} else {
    // Not Available
} 
```

单击按钮后打印：

```
-(IBAction) buttonClicked: (id) sender;
{
    NSMutableString *printBody = [NSMutableString stringWithFormat:@"%@, %@",self.encoded.text, self.decoded.text];
    [printBody appendFormat:@"\n\n\n\nPrinted From *myapp*"];

     UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];
     pic.delegate = self;

     UIPrintInfo *printInfo = [UIPrintInfo printInfo];
     printInfo.outputType = UIPrintInfoOutputGeneral;
     printInfo.jobName = self.titleLabel.text;
     pic.printInfo = printInfo;

     UISimpleTextPrintFormatter *textFormatter = [[UISimpleTextPrintFormatter alloc] initWithText:printBody];
     textFormatter.startPage = 0;
     textFormatter.contentInsets = UIEdgeInsetsMake(72.0, 72.0, 72.0, 72.0); // 1 inch margins
     textFormatter.maximumContentWidth = 6 * 72.0;
     pic.printFormatter = textFormatter;
     [textFormatter release];
     pic.showsPageRange = YES;

     void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) =
     ^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
         if (!completed && error) {
             NSLog(@"Printing could not complete because of error: %@", error);
         }
     };

    [pic presentFromBarButtonItem:self.rightButton animated:YES completionHandler:completionHandler];

} 
```

# teamcity - 我可以在 TeamCity 的 DotCover 统计信息中包含未发现的程序集吗

> ID：12319125
> 
> 赞同：1
> 
> 时间：2012-09-07T13:31:01.460
> 
> 标签：teamcity, teamcity-7.0, dotcover

我有一个 TeamCity 7.0 项目，该项目涵盖了具有多个输出程序集的解决方案。DotCover 统计数据中出现的唯一程序集是至少有一行代码被测试覆盖的程序集。是否还可以将测试完全未发现的程序集包括在统计数据中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:12:32.210

目前这是不可能的。这是一个相应的请求：http: [//youtrack.jetbrains.com/issue/DCVR-2305](http://youtrack.jetbrains.com/issue/DCVR-2305)。欢迎您跟踪其状态。

# ffmpeg - FFMPEG 频道映射

> ID：12319129
> 
> 赞同：2
> 
> 时间：2012-09-07T13:31:13.927
> 
> 标签：ffmpeg

我有一个由 8 个通道组成的 24 位 WAV 文件。我需要做的是将其转换为 4 个 24 位的两个通道文件，其中输出 wav 由源通道 (1,2)、(3,4)、(5,6)、(7,8) 组成。

有人对使用 FFmpeg 的最佳方法有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:26:01.990

[请参阅ffmpeg 文档](http://ffmpeg.org/ffmpeg.html#Advanced-options)中的 -map 和 map_channel ：

> '-map [-]input_file_id[:stream_specifier][,sync_file_id[:stream_specifier]] | [链接标签]（输出）'</p>
> 
> 指定一个或多个输入流作为输出文件的源。每个输入流由输入文件索引 input_file_id 和输入文件内的输入流索引 input_stream_id 标识。两个索引都从 0 开始。如果指定，sync_file_id:stream_specifier 设置哪个输入流用作演示同步参考。
> 
> 命令行上的第一个 -map 选项指定输出流 0 的源，第二个 -map 选项指定输出流 1 的源，依此类推。
> 
> 流标识符前的 - 字符创建“负”映射。它从已创建的映射中禁用匹配流。
> 
> 另一种 [linklabel] 表单会将来自复杂过滤器图的输出（请参阅“-filter_complex”选项）映射到输出文件。linklabel 必须对应于图中定义的输出链接标签。

和地图频道：

> '-map_channel [input_file_id.stream_specifier.channel_id|-1][:output_file_id.stream_specifier]'</p>
> 
> 将给定输入的音频通道映射到输出。如果未设置 output_file_id.stream_specifier，则音频通道将映射到所有音频流上。
> 
> 使用“-1”而不是 input_file_id.stream_specifier.channel_id 将映射静音通道。

# wpf - WPF 用户控件的数据上下文到代码隐藏中的属性

> ID：12319135
> 
> 赞同：1
> 
> 时间：2012-09-07T13:31:29.433
> 
> 标签：wpf

拥有一个简单的 XAML 用户控件，我想将 DataContext 设置为代码隐藏 (xaml.cs) 文件。

我想在 XAML 中设置 DataContext 和 Itemssource，所以我可以使用属性 ListOfCars 填充组合框

XAML

```
<UserControl x:Class="Sample.Controls.MyControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="85" d:DesignWidth="200">
    <Grid Height="85" Width="200" Background="{StaticResource MainContentBackgroundBrush}">
        <StackPanel Orientation="Vertical">                
            <ComboBox Height="23.338" x:Name="CarList" />                
        </StackPanel>    
    </Grid>
</UserControl> 
```

背后的代码

```
public List<Cars> ListOfCars
{
  get { return _store.ListCars(); }
} 
```

换句话说，我如何在 XAML 中设置绑定，而不是在代码隐藏中执行此操作

```
public MyControl()
{
  InitializeComponent();
  _store = new Store();
  CarList.ItemsSource = _store.ListCars();
  CarList.DisplayMemberPath = "Name";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:36:20.723

只需绑定`ItemsSource`.

```
<ComboBox ItemsSource="{Binding ListOfCars}"/> 
```

然后对于用户控件：

```
<MyControl DataContext="{Binding *viewModel*}"/> 
```

您必须绑定`DataContext`UserControl 的使用位置，而不是在定义中，因为在定义中您不知道要绑定什么。`Combobox`自动位于控件的上下文中，因此您无需任何额外工作即可绑定到`DataContext`。

绑定到资源的示例：

```
<Application.Resources>
  ...
  <viewmodels:ViewModelLocator x:Key="ViewModelLocator"/>
  ...
</Application.Resources>

<MyControl DataContext="{Binding Source={StaticResource ViewModelLocator}}"/> 
```

这将创建 ViewModelLocator 的实例，然后将控件的 DataContext 绑定到该资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:39:05.427

[不要**那样**做](https://stackoverflow.com/a/7573570/546730)，你会搞乱所有外部绑定的`DataContext`。改用`UserControl.Name`和`ElementName`绑定（或`RelativeSource`）。

# ios - 在 iOS 上使用 TestFlight 进行应用内更新

> ID：12319138
> 
> 赞同：7
> 
> 时间：2012-09-07T13:31:31.150
> 
> 标签：ios, updates, in-app, testflight

我的 iPhone 应用程序现已进入测试阶段。我正在使用[TestFlight](http://testflightapp.com/)将应用程序发送给测试人员。一切都很好，我发布了链接，他们下载了应用程序，任何证书或任何东西都没有问题（真实故事，哈哈）。

我唯一的问题是我完全不知道如何发送应用内更新。我在最新的 SDK 版本上看到它可用，但我不知道该怎么做！现在，如果我上传新版本并选择“更新并通知”，则会发送一封电子邮件。如何直接通过我的应用程序向用户发送新版本可用的通知？现在我开始认为这是不可能的（如果是这样，我的错）。但我真的以为我能做到！

一如既往，任何帮助/链接/文档总是受到赞赏！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T13:35:12.763

您可以强制升级。

进入右上角的设置，选择“齿轮”，然后选择“51区”（这是新功能区，仍处于测试阶段）。从那里您可以选择打开“强制升级”：

> 如果您在构建上启用强制升级。下次用户打开您的构建并且有可用更新时，他们将被迫在继续之前安装构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T13:57:35.703

到目前为止，我的用户在应用程序中得到通知，而我无需执行任何操作，只需调用 takeOff 并且（我不确定这是否有必要）使用了一些任意检查点。他们可以选择现在、以后或从不更新他们的应用程序。

但显然这在过去几周已经停止工作，我收到越来越多的反馈，他们知道有可用更新的唯一方法是通过 testflight 发送给他们的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T16:12:34.050

上传应用时，您需要有不同的 Bundle 版本。您可以在 Bundle version 下的应用程序 info.plist 中设置您的 bundle 版本。将该值更改为其他值，现在您将被提示打开应用程序以升级或跳过。

# r - R纵向数据 - 按多个因素分组

> ID：12319146
> 
> 赞同：0
> 
> 时间：2012-09-07T13:32:03.470
> 
> 标签：r, time-series, tabular

我仍在尝试创建详细的时间序列数据框。我正在尝试获取多个数据点的月度数据，然后按多个因素分组。我不确定这是可能的，因为我没有在文档、小插图或 SO 上看到与此类似的示例。

这是我试图构建的示例数据：

```
clients <- 1:100
dates <- seq(as.Date("2012/1/1"), as.Date("2012/9/1"), "days")
categories <- LETTERS[1:5]
products <- data.frame(clientID = sample(clients, 10000, replace = TRUE), 
                       OrderDate = sample(dates, 10000, replace = TRUE), 
                       category = sample(categories, 10000, replace = TRUE),
                       numProducts = sample(1:10, 1000, replace = TRUE), 
                       OrderTotal = sample(1:100, 1000, replace = TRUE)) 
```

输出如下所示：

```
head(products)
  clientID  OrderDate category numProducts OrderTotal
1       90 2012-03-20        D           9         18
2       66 2012-08-19        A           3         50
3       45 2012-05-25        A          10         75
4       28 2012-01-01        D           4         27
5       71 2012-02-28        A           4         76
6       26 2012-01-28        C           8         89 
```

我试图达到的结构看起来像这样：

```
 Category A                                                                    ...   Category E
ClientID  Jan2012numProducts  Jan2012OrderTotal  Feb2012numProducts  Feb2012OrderTotal  ...  Sep2012numProducts  Sep2012OrderTotal
1         12                  78                 6                   52                      0                   0
2         7                   218                3                   15                      1                   28
...
99999     20                  192                10                  100                     28                  156 
```

我意识到列名可能会变长并且看起来像 AJan2012numProducts 或 AJan2012OrderTotal，这很好。

以下是我不清楚的程序 - 同样，我在文档或小插曲中找不到它们：

1）可以`zoo`聚合多个观察字段吗？在这种情况下，我想同时获得当月的 numProducts 和 OrderTotal 的总和。即使`zoo`不能，我也可以使用该`merge`功能并加入clientID和类别

2）可以`zoo`按一个因素（或多个因素）进行分组来执行聚合吗？我希望能够按月查看 clientID 和类别。

3) 是否有能力沿 X 轴制作具有类别和月份的数据框。如果没有，如果我可以将时间序列数据简单地按 clientID 和类别组合在一起，那么我可以`reshape`使用`cast`. 我需要将数据框放入此结构中：

```
head(df)
clientID   Month     category    numProducts  OrderTotal
1        2012-01-31  A           12           78
1        2012-01-31  B           0            0
....
99999    2012-09-30  D           6            71
99999    2012-09-30  E           1            28

cast(df, month~category, sum) (or something close to that) 
```

这有可能吗？你能帮忙举一些例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:12:11.310

使用`format.Date`,`xtabs`和的组合`ftable`几乎可以满足您的要求。我稍微缩短了示例，但原理应该很清楚。如果您希望月份字段更短，您可以更改表格对象中维度的名称，或者您可以制作月份列并重做所有工作。（我承认我很难弄清楚“动物园”如何进入这张照片。目前它看起来像一个简单的制表问题。虽然......我确信`aggregate.zoo`能够聚合多个标准并将总和用作聚合功能。）

首先是两个命令，然后是控制台会话输出：

```
prodtble <- xtabs(cbind(numProducts, OrderTotal) ~ clientID + 
                                                  format(OrderDate, "%b%Y") + 
                                                  category, 
                  data=products)
ftable(prodtbl, row.vars=c("category","clientID")) 
```

现在输出：

```
> xtabs(cbind(numProducts, OrderTotal) ~ clientID + format(OrderDate, "%b%Y")+category, data=products)
, , category = A,  = numProducts

        format(OrderDate, "%b%Y")
clientID Feb2012 Jan2012 Mar2012
       1      23       0      16
       2       0       6      27
       3      30       0      21
       4      13      33      24
       5       5      20      12

, , category = B,  = numProducts

        format(OrderDate, "%b%Y")
clientID Feb2012 Jan2012 Mar2012
       1       8      27      23
       2       8      14       4
       3       0       5       6
       4       8      13      39
       5       3      23       9

, , category = C,  = numProducts

        format(OrderDate, "%b%Y")
clientID Feb2012 Jan2012 Mar2012
       1       0       6      20
       2      20      20       4
       3       0      17       0
       4      17      11       2
       5       7       3       8

, , category = A,  = OrderTotal

        format(OrderDate, "%b%Y")
clientID Feb2012 Jan2012 Mar2012
       1      40       0      41
       2       0       5      33
       3      48       0      40
       4      16      28      24
       5      23      42      29

, , category = B,  = OrderTotal

        format(OrderDate, "%b%Y")
clientID Feb2012 Jan2012 Mar2012
       1      14      24      19
       2      22      19      19
       3       0       2       4
       4      19      46      62
       5      10      38      10

, , category = C,  = OrderTotal

        format(OrderDate, "%b%Y")
clientID Feb2012 Jan2012 Mar2012
       1       0       2      39
       2      30      33       7
       3       0      44       0
       4      50      21      19
       5      16      14      28
# You could have skipped the printout by assigning to 'prodtable' in the step above.
# I thought is was useful pedagogically.

> prodtbl <- .Last.value

> ftable(prodtbl, row.vars=c("category","clientID"))
                  format(OrderDate, "%b%Y")     Feb2012                Jan2012                Mar2012           
                                            numProducts OrderTotal numProducts OrderTotal numProducts OrderTotal
category clientID                                                                                               
A        1                                           23         40           0          0          16         41
         2                                            0          0           6          5          27         33
         3                                           30         48           0          0          21         40
         4                                           13         16          33         28          24         24
         5                                            5         23          20         42          12         29
B        1                                            8         14          27         24          23         19
         2                                            8         22          14         19           4         19
         3                                            0          0           5          2           6          4
         4                                            8         19          13         46          39         62
         5                                            3         10          23         38           9         10
C        1                                            0          0           6          2          20         39
         2                                           20         30          20         33           4          7
         3                                            0          0          17         44           0          0
         4                                           17         50          11         21           2         19
         5                                            7         16           3         14           8         28 
```

这是缩短的示例：

```
clients <- 1:5
dates <- seq(as.Date("2012/1/1"), as.Date("2012/3/31"), "days")
categories <- LETTERS[1:3]
products <- data.frame(clientID = sample(clients, 100, replace = TRUE), 
                       OrderDate = sample(dates, 100, replace = TRUE), 
                       category = sample(categories, 100, replace = TRUE),
                       numProducts = sample(1:10, 100, replace = TRUE), 
                       OrderTotal = sample(1:20, 100, replace = TRUE)) 
```

# python - ndb.get_multi(keys) 返回一个无数组

> ID：12319153
> 
> 赞同：2
> 
> 时间：2012-09-07T13:32:28.867
> 
> 标签：python, google-app-engine, google-cloud-datastore

我想从 Google Appengine ndb 获取一些数据。我有以下代码

```
keys = []
for field in self.request.arguments():
    keys.append(ndb.Key(models.MyModel, int(id)))

# Some unrelevant code

for k in keys:
    logging.info(k)

m = ndb.get_multi(keys)
for p in m:
    logging.info(p) 
```

这给了我这个输出：

```
INFO     2012-09-07 13:18:23,436 main.py:58] Key('MyModel', 42)
INFO     2012-09-07 13:18:23,436 main.py:58] Key('MyModel', 44)
INFO     2012-09-07 13:18:23,437 main.py:58] Key('MyModel', 42)
INFO     2012-09-07 13:18:23,437 main.py:58] Key('MyModel', 43)
INFO     2012-09-07 13:18:23,437 main.py:58] Key('MyModel', 44)
INFO     2012-09-07 13:18:23,443 main.py:62] None
INFO     2012-09-07 13:18:23,443 main.py:62] None
INFO     2012-09-07 13:18:23,443 main.py:62] None
INFO     2012-09-07 13:18:23,443 main.py:62] None
INFO     2012-09-07 13:18:23,444 main.py:62] None 
```

我确定模型存在于具有该 ID 号的数据存储中。那么我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:14:18.007

id 可以是数据存储中的字符串。所以 Key('MyModel', '42') 可能是你要找的。ID 可以是字符串或整数。[这](https://developers.google.com/appengine/docs/python/ndb/keyclass)是进一步阅读的文档。

**编辑：** 您的 MyModel 实体是否有父键？如果是，那么您需要在构建密钥时包含父级。

# jquery - Uncaught TypeError: Object [object Object] has no method (使用基于jQuery的Slider)

> ID：12319157
> 
> 赞同：1
> 
> 时间：2012-09-07T13:32:39.167
> 
> 标签：jquery

在以下[**站点上**](http://sh.betaforming.com/)，内容滑块不起作用。我在许多其他网站上使用过这个[**内容滑块。**](http://slidesjs.com/)这个网站正在使用 Twitter Bootstrap（我不熟悉）。

控制台错误是：

```
Uncaught TypeError: Object [object Object] has no method 'slides' 
```

我是 JavaScript 新手，所以我不确定要寻找什么。我明白错误在说什么，但我不明白为什么我在这个网站上而不是在其他网站上得到它，或者从哪里开始寻找。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:03:38.953

您正在加载 jQuery 3 次。第一次，您正在加载它，然后加载幻灯片插件。

第二次加载 jQuery，它取代了第一次，以及所有插件。

您只需要在页面顶部加载一次 jQuery。

# c# - 加快使用 WPF 的文档自定义的 Excel VSTO 启动时间

> ID：12319168
> 
> 赞同：1
> 
> 时间：2012-09-07T13:33:05.837
> 
> 标签：c#, wpf, excel, vsto

我有一个有些复杂的 Excel 2010 文档自定义。

此自定义还包括自定义任务窗格内的 WPF 用户控件和一些弹出控件。

问题是我的自定义需要大约 15 秒才能开始。

有没有好的技术来优化这个启动时间？

我的初始化代码如下所示：

```
// Create a WPF app inside VSTO to configure resource dictionaries and display language
_wpfApp = new System.Windows.Application();

// Load the resource dictionary
var resources = System.Windows.Application.LoadComponent(
    new Uri("ModernCashFlow.WpfControls;component/Resources/CustomResources.xaml", UriKind.RelativeOrAbsolute))
                as System.Windows.ResourceDictionary;

// Merge it on application level
_wpfApp.Resources.MergedDictionaries.Add(resources);

    // Set WPF's app language to system default - useful for number/date formatting - the default is en-US.
FrameworkElement.LanguageProperty.OverrideMetadata(
    typeof(FrameworkElement), new FrameworkPropertyMetadata(XmlLanguage.GetLanguage(
                                CultureInfo.CurrentCulture.IetfLanguageTag))); 
```

提前致谢。

# jquery - 如何处理 Twitter Bootstrap 中的模态关闭事件？

> ID：12319171
> 
> 赞同：216
> 
> 时间：2012-09-07T13:33:14.033
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

在 Twitter 引导程序中，查看[模态](http://twitter.github.com/bootstrap/javascript.html#modals)文档。我无法弄清楚是否有办法监听模式的关闭事件并执行一个函数。

例如，让我们以这个模态为例：

```
<div class="modal-header">
    <button type="button" class="close close_link" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Modal header</h3>
</div>
<div class="modal-body">
...
</div>
<div class="modal-footer">
    <a href="#" class="btn close_link" data-dismiss="modal">Close</a>   
</div> 
```

顶部的 X 按钮和底部的关闭按钮都可以隐藏/关闭模式，因为`data-dismiss="modal"`. 所以我想知道，如果我能以某种方式倾听吗？

或者我可以像这样手动完成，我猜......

```
$("#salesitems_modal").load(url, data, function() { 
     $(this).modal('show'); 
     $(this).find(".close_link").click(modal_closing);
}); 
```

你怎么看？

* * *

## 回答 #1

> 赞同：427
> 
> 时间：2012-09-07T14:04:27.433

### 针对 Bootstrap 3 和 4 进行了更新

[Bootstrap 3](http://getbootstrap.com/javascript/#modals-usage)和[Bootstrap 4](https://getbootstrap.com/docs/4.0/components/modal/#events)文档引用了两个可以使用的事件。

> **hide.bs.modal**：当调用 hide 实例方法时立即触发此事件。
> **hidden.bs.modal**：当模式对用户完成隐藏时触发此事件（将等待 CSS 转换完成）​​。

并提供一个如何使用它们的例子：

```
$('#myModal').on('hidden.bs.modal', function () {
  // do something…
}) 
```

### 旧版 Bootstrap 2.3.2 答案

[Bootstrap 的文档](http://getbootstrap.com/2.3.2/javascript.html)引用了您可以使用的两个事件。

> **hide**：调用 hide 实例方法时立即触发此事件。
> **hidden**：当模式对用户完成隐藏时触发此事件（将等待 css 转换完成）​​。

并提供了如何使用它们的示例：

```
$('#myModal').on('hidden', function () {
    // do something…
}) 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2014-11-06T12:55:16.100

如果您的模态 div 是动态添加的，则使用（对于引导程序 3 和 4）

```
$(document).on('hide.bs.modal','#modal-id', function () {
                alert('');
 //Do stuff here
}); 
```

这也适用于非动态内容。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-04-26T09:08:16.890

模态事件有两对，一对是“显示”和“显示”，另一对是“隐藏”和“隐藏”。从名字可以看出，当modal快要关闭时触发hide事件，比如点击右上角的十字或者关闭按钮等等。在模态实际关闭后触发隐藏。您可以自己测试这些事件。例如：

```
$( '#modal' )
   .on('hide', function() {
       console.log('hide');
   })
   .on('hidden', function(){
       console.log('hidden');
   })
   .on('show', function() {
       console.log('show');
   })
   .on('shown', function(){
      console.log('shown' )
   }); 
```

而且，至于您的问题，我认为您应该听一下模态的“隐藏”事件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-04T09:06:23.903

> 引导模式事件：

1.  **hide.bs.modal** => 当模态即将被隐藏时发生。
2.  **hidden.bs.modal** => 当模态完全隐藏时发生（在 CSS 转换完成之后）。

```
<script type="text/javascript">
    $("#salesitems_modal").on('hide.bs.modal', function () {
        //actions you want to perform after modal is closed.
    });
</script> 
```

我希望这将有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-23T22:39:54.707

如果您想在单击关闭按钮时像您描述的那样专门做某事：

```
<a href="#" class="btn close_link" data-dismiss="modal">Close</a> 
```

您需要使用 css 选择器附加事件：

```
$(document).on('click', '[data-dismiss="modal"]', function(){what you want to do}) 
```

但是如果你想在模态关闭时做一些事情，你可以使用已经写好的提示

# php - 如何在 PHP 中更快地过滤我的电子邮件？

> ID：12319174
> 
> 赞同：3
> 
> 时间：2012-09-07T13:33:26.373
> 
> 标签：php, regex, email, filter

我目前正在编写一个脚本来过滤我收到的一些电子邮件内容。

这些电子邮件是对我的时事通讯活动的回复，我想知道谁想退订。为此，我可以寻找一些特定的词，例如“请”、“删除”，并且我还必须检查电子邮件是否是从 mailer-daemon 发送的，以便提醒用户更改他的电子邮件地址下次他登录时。

首先，我必须从 MySQL 数据库中检索字典，它目前包含 77 个单词，然后我为我处理的每封邮件中的每个单词调用两个 preg_match_all 函数。

我想检查`\bplease\b`邮件内容中是否可以看到整个单词，有些人可能会写错单词“pleease”，然后我再使用`\bp+l+e+a+s+e+\b`。

但是字典越来越大，里面添加的单词越来越多，脚本越来越慢，每秒至少处理 4 封电子邮件。

你有什么其他方法可以比现在更快地处理邮件吗？

构建匹配 77 个单词的正则表达式而不是执行 77 个 preg_match_all 命令会更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:43:13.713

对于您的问题，“构建匹配 77 个单词而不是执行 77 个 preg_match_all 命令的正则表达式会更快吗？”我建议根本不使用正则表达式。我可能是错的，但我认为字符串函数比正则表达式更快。阅读：[http](http://www.webdeveloper.com/forum/showthread.php?190485-performance-doubts-regex-vs-string-functions-using-this-and-1-more-doubt!-plz!-) ://www.webdeveloper.com/forum/showthread.php?190485-performance-doubts-regex-vs-string-functions-using-this-and-1-more-doubt!-plz !-)另请阅读这[更有效，PHP 字符串函数或 PHP 中的正则表达式？](https://stackoverflow.com/questions/634676/which-is-more-efficient-php-string-functions-or-regex-in-php)

# linux - 从带有嵌入字体的 PDF 文件中提取文本

> ID：12319178
> 
> 赞同：4
> 
> 时间：2012-09-07T13:33:46.787
> 
> 标签：linux, pdf, imagemagick, ocr, tesseract

我有一个包含一些表格数据的 PDF 文件。

[http://dl.dropbox.com/u/44235928/sample_rotate-0.pdf](http://dl.dropbox.com/u/44235928/sample_rotate-0.pdf)

我必须从中提取表格数据。我试过以下但没有成功：

1.  选择文本并将其粘贴到记事本/excel-sheet。（我收到垃圾字符）
2.  用于从 Acrobat Reader 中另存为文本。它还提供垃圾字符而不是实际文本。
3.  尝试使用 ApachePDFBox 命令行实用程序从 PDF 中提取文本。它还提供垃圾字符而不是真实文本。
4.  最后，我正在尝试 OCR 解决方案。我正在使用 ImageMagick 将 pdf 文件转换为 .tif 图像，并让这些图像由 tesseract OCR 处理。

OCR 解决方案虽然不是很准确（大约 80% 的单词匹配）。

我尝试更改从 PDF 创建的图像的密度和几何形状，以从 tesseract OCR 获得更好的结果。

```
convert -rotate 90 -geometry 10000 -depth 8 -density 800 sample.pdf img_800_10000.tif;
tesseract img_800_10000.tif img_800_10000.tif nobatch letters; 
```

我不确定哪种图像（密度、几何、单色、锐化边界等）最适合 OCR。

请建议从 PDF 文件生成图像的最佳参数（密度、几何形状、深度等），以便提高 tesseract 精度。

我也对其他（非 ocr）解决方案持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:36:27.893

在这种情况下，我建议**不要**使用 ImageMagick 进行 PDF -> TIFF 转换。相反，请使用 Ghostscript。两个原因：

1.  直接使用 Ghostscript 可以让您更好地控制转换的各个参数。

2.  ImageMagick 本身无法进行特定的转换——它无论如何都会调用 Ghostscript 作为它*的“委托”*，但不允许您提供与您自己的 Ghostscript 命令相同的细粒度控制。

示例 PDF 表格中的大部分文本都非常小（我猜，只有 4 或 5 pt 高）。这使得运行成功的 OCR 变得相当困难，除非您显着提高分辨率。

Ghostscript`-r72`默认使用图像格式输出（例如 TIFF）。Tesseract 在 r=300 或 r=400 时效果最佳——但仅适用于 10-12 pt 或更高的字体大小。因此，为了补偿较小的文本大小，您应该在将 PDF 渲染到图像时使用至少 1200 DPI 的分辨率来制作 Ghostscript。

此外，您必须旋转图像，以便文本以正常阅读方向显示（不是底部 -> 顶部）。

这是我首先要尝试的命令：

```
gs                              \
  -o sample.tif                 \
  -sDEVICE=tiffg4               \
  -r1200                        \
  -dAutoRotatePages=/PageByPage \
   sample_rotate-0.pdf 
```

您可能需要使用`-r1200`参数的变化（更高或更低）以获得最佳结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T21:43:32.647

由于有评论询问*“在使用 Ghostscript 时如何定义图像的几何形状`convert`？”* ，这是一个答案：

1.  同时为 Ghostscript 创建的光栅图像定义*几何图形*（即图像尺寸）和*分辨率*是没有意义的。

2.  一旦将给定尺寸的基于*矢量*的页面（例如 PDF）转换为提供所需分辨率的*光栅*图像（例如 TIFF G4 格式）（如在另一个答案中所做的那样），您已经间接和隐式地设置了方面：

    *   *示例文件sample_rotate-0.pdf*的原始 PDF 尺寸是`1008x612`点。
    *   在 72 DPI 的分辨率下（如果没有直接给出，则默认 Ghostscript 使用，或者`-r72`如果直接给出，则在 Ghostscript 命令中），图像尺寸将为`1008x612`像素。
    *   在 720 DPI 的分辨率下（`-r720`在 Ghostscript 命令中），图像尺寸将为`10080x6120`像素。
    *   在 1440 DPI 的分辨率下（`-r1440`在我的另一个答案的 Ghostscript 命令中），图像尺寸将为`20160x12240`像素。
    *   分辨率为 1200 DPI（`-r1200`在 Ghostscript 命令中）时，图像尺寸将为`16800x10200`像素。
    *   在 1000 DPI 的分辨率下（`-r1000`在 Ghostscript 命令中），图像尺寸将为`14000x8500`像素。
    *   在 120 DPI 的分辨率下（`-r120`在 Ghostscript 命令中），图像尺寸将为`1680x1020`像素。
    *   在 100 DPI 的分辨率下（`-r100`在 Ghostscript 命令中），图像尺寸将为`1400x850`像素。
3.  如果您绝对坚持在 Ghostscript 命令行上指定输出图像的尺寸/几何形状（而不是分辨率），您可以通过添加`-gNNNNxMMMM -dPDFFitPage`到命令行来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T13:10:58.170

在那里您可以找到文件的解码内容：[https ://docs.google.com/open?id=0B1YEM-11PerqSHpnb1RQcnJ4cFk](https://docs.google.com/open?id=0B1YEM-11PerqSHpnb1RQcnJ4cFk)

绝对确定 OCR 是阅读 pdf 文件的最佳方式，但您可以尝试 REGEX-ing 原生内容。这将是艰难而漫长的道路。

# jquery - jquery自动完成：在建议中选择项目

> ID：12319181
> 
> 赞同：1
> 
> 时间：2012-09-07T13:34:03.910
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我已经实现了 ui 自动完成小部件。就我而言，我提供了一个固定的建议列表。

当我输入该字段并填充时，我想选择与输入字段中的文本相同的建议。

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:36:13.220

对于您需要的内容，您可以为 open 事件添加自己的处理程序，您可以在其中决定将激活哪些菜单项。这是我的示例实现：

```
$('#myinput').autocomplete({
    source: function(request, response) {
        response(["bus", "car", "carpet", "donkey"]);
    },
    open: function(event, ui) {
        var val = $('#myinput').val();
        var menu = $(this).data("autocomplete").menu;
        var item = menu.element.find('a:contains("' + val + '")').first();
        menu.activate($.Event({ type: "mouseenter" }), item.parent());
    }
}); 
```

[你可以在这里](http://jsfiddle.net/8X2n5/)检查小提琴。

PS：您也许可以`ui`直接从参数中提取菜单对象，但我没有看到它记录在案，现在我懒得进一步调查；）

PS2：当没有找到我没有包含的匹配项时，还要考虑检查空引用。

# sql - 在 SQL 中使用危险的 IN 子句

> ID：12319185
> 
> 赞同：3
> 
> 时间：2012-09-07T13:34:14.323
> 
> 标签：sql, sql-server, sql-server-2005

为什么 SQL Server 会这样。我在 SQL 2005 上运行它。

IN 子句不验证子查询中的列名，而是根据外部查询中的表名对其进行验证。这是获取的示例

```
Create table #table1(col1 int, col2 char(10), col3 char(15));

Create table #table2(col10 int, col11 char(10), col2 char(15));

insert into #table1(col1, col2, col3)
select 1, 'one', 'three'

insert into #table1(col1, col2, col3)
select 2, 'two', 'three'

insert into #table1(col1, col2, col3)
select 3, 'three', 'four'

insert into #table2(col10, col11, col2)
select 1, 'one', 'three'

insert into #table2(col10, col11, col2)
select 2, 'two', 'three'

insert into #table2(col10, col11, col2)
select 3, 'three', 'four'

select * from #table1
where col1 IN
(select col1 from #table2) 
```

好像我只是选择“从#table2中选择col1”并运行它会吐一个错误

```
Msg 207, Level 16, State 1, Line 1
Invalid column name 'col1'. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T13:39:13.343

为什么？因为能够在子查询中引用来自外部查询的列通常*很有用。*没有可以用来关闭此行为的设置，但是如果您养成使用别名的习惯，您应该避免使用它的大多数问题：

```
select * from #table1 t1
where t1.col1 IN
(select t2.col1 from #table2 t2) 
```

会产生错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T13:39:33.123

问题不在于 IN 子句。

这个：

```
SELECT * 
  FROM #table1
 WHERE col1 IN (SELECT col1 
                  FROM #table2) 
```

...有效，因为假设优化器`col1`来自#table1。如果您使用表别名，那么就没有歧义：

```
SELECT t1.* 
  FROM #table1 t1
 WHERE t1.col1 IN (SELECT t2.col1 
                     FROM #table2 t2) 
```

...你会得到`Msg 207: Invalid column error`.

这与使用 DELETE 和 UPDATE 语句时的原则相同，因为典型语法不允许您为要删除或更新的表设置别名。

# android - Android 中的 WSDL 响应解析

> ID：12319191
> 
> 赞同：1
> 
> 时间：2012-09-07T13:34:38.803
> 
> 标签：android, parsing, soap, response

如何在 android 中解析这个响应；

```
 anyType{
        schema=anyType{
        element=anyType{
        complexType=anyType{
        choice=anyType{
        element=anyType{
        complexType=anyType{
        sequence=anyType{
        element=anyType{}; 
        element=anyType{};  
        element=anyType{}; 
}; }; }; }; }; }; }; 

    diffgram=anyType{
        DocumentElement=anyType{

        PLAKA=anyType{

            ID=7166060; 
            TARIH=2012-07-26T00:00:00+03:00; 
            BOLGEADI=SEVKET TOKUS CADDESI-1; 
            GIRIS=13:39:00; 
            CIKIS=14:41:00; 
            PLAKA=07NSN71; 
            UCRET=1.5; 
            PERON=PERON.1; 
            DAKIKA=62; 
            FIYATADI=3-Normal.01 (1 Saat); 
            BOLGEID=58; 
            SERISIRA=11023; 
            YEDEK_1=anyType{};}; 

PLAKA=anyType{ID=7180277; TARIH=2012-07-27T00:00:00+03:00; BOLGEADI=ATATURK CADDESI; GIRIS=14:22:00; CIKIS=14:57:00; PLAKA=07NSN71; UCRET=1.5; PERON=PERON.1; DAKIKA=35; FIYATADI=3-Normal.01 (1 Saat); BOLGEID=51; SERISIRA=12136; YEDEK_1=anyType{}; }; 

PLAKA=anyType{ID=7305621; TARIH=2012-08-07T00:00:00+03:00; BOLGEADI=ATATURK CADDESI; GIRIS=14:01:00; CIKIS=16:13:00; PLAKA=07NSN71; UCRET=4.5; PERON=PERON.1; DAKIKA=132; FIYATADI=3-Normal.03 (3 Saat); BOLGEID=51; SERISIRA=13471; YEDEK_1=anyType{}; }; 

}; }; }; } 
```

我想解析这个字段；ID、TARIH、BOLGE ADI、PLAKA 的所有记录...我尝试但我没有找到解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T06:36:08.587

您可以使用此[网站](http://www.wsdl2code.com/Pages/Home.aspx)为您的 Web 服务创建一个包。包包含基于 kSoap 的类和用于解析响应的类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:54:52.307

通常，WSDL 用于 SOAP 请求。这将返回一个 XML，您需要解析 XML 文件。为此，我建议您使用 XML Pull 解析器，它快速且易于使用。如果你不知道怎么做，我可以给你一个如何使用 XML 拉解析器的例子。

# android - Android HttpURLConnection 抛出 EOFException

> ID：12319194
> 
> 赞同：15
> 
> 时间：2012-09-07T13:34:42.787
> 
> 标签：android, httpurlconnection, eofexception

这是最简单的问题。

我使用 HttpUrlConnection 对象通过代理创建到我的服务器的 HTTPS 连接。

我的代理关闭了连接，但我的代码仍然尝试重用相同的连接。所以我得到了EOFException。

我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T20:22:14.807

我建议禁用 http.keepalive 系统属性。[文档](http://developer.android.com/reference/java/net/HttpURLConnection.html)的性能部分表明套接字连接将在可能的情况下被重用。听起来它正在尝试重用连接，但代理已经关闭了它。在[这篇文章](https://stackoverflow.com/questions/8487780/weird-eofexception-on-galaxy-nexus)中，Darrell 还表示更改系统属性解决了他的问题。

```
System.setProperty("http.keepAlive", "false"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T23:59:20.260

结果他们已经在 1 月 8 日 [1] 在 Android 中修复了这个问题。该修复基本上将旧连接标记为已回收并在内部重试请求。

为了暂时解决这个问题，我建议在遇到 EOFException 时重试请求，并设置重试限制以防止 stackoverlows。

1.  [https://android.googlesource.com/platform/libcore/+/19aa40c81c48ff98ccc7272f2a3c41479b806376](https://android.googlesource.com/platform/libcore/+/19aa40c81c48ff98ccc7272f2a3c41479b806376)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T13:02:58.090

正常的 HTTP 连接也有这个问题。第一个请求正常，第二个请求失败并出现 EOFException。

最终我通过删除...修复了它

```
urlConnection.setChunkedStreamingMode(0); 
```

...来自 HttpUrlConnection。

我可能是我正在调用的网络服务器无法很好地处理分块数据。不知道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T06:44:07.627

如果您不想重用连接，请释放它。

```
finally {
     urlConnection.disconnect();
   }
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T15:56:21.547

您可以使用此方法从服务器中选择数据，然后将输入修剪转换为字符串，然后您可以解析以供进一步使用。`

```
 public static InputStream getUrlData(final String url)
        throws URISyntaxException, ClientProtocolException, IOException {
    final DefaultHttpClient client = new DefaultHttpClient();
    final HttpGet method = new HttpGet(new URI(url));
    final HttpResponse res = client.execute(method);
    return res.getEntity().getContent();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-08T18:04:57.420

您不应该尝试重用相同的 HttpURLConnection 实例。“类概述”最底线的[文档说](http://developer.android.com/reference/java/net/HttpURLConnection.html)

> HttpURLConnection 的每个实例都可以用于一个请求/响应对。

Keep-Alive 连接工作在不同的级别，请参阅断开连接文档：http: [//developer.android.com/reference/java/net/HttpURLConnection.html#disconnect()](http://developer.android.com/reference/java/net/HttpURLConnection.html#disconnect())

> 与其他 Java 实现不同，这不一定会关闭可重用的套接字连接。您可以通过在发出任何 HTTP 请求之前将 http.keepAlive 系统属性设置为 false 来禁用所有连接重用。

因此，您应该始终使用新的 HttpURLConnection 并让套接字池处理重用。如果它尝试重用已被服务器关闭的套接字，可能会出现问题，这个问题的答案涉及：[Android HttpUrlConnection EOFException](https://stackoverflow.com/q/19258518/2335025)

在 Froyo (2.2) 之前，keep-alive 连接显然存在错误，因此建议在这些旧设备上禁用 keep-alive。

在我的情况下，EOFException 是由我的服务器未发送完整响应引起的，请参阅此处的详细信息：[https ://stackoverflow.com/a/27845939/2335025](https://stackoverflow.com/a/27845939/2335025)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-08T16:59:35.790

您不应该尝试重用相同的 HttpURLConnection 实例。“类概述”最底线的[文档说](http://developer.android.com/reference/java/net/HttpURLConnection.html)

> HttpURLConnection 的每个实例都可以用于一个请求/响应对。

Keep-Alive 连接工作在不同的级别，请参阅断开连接文档：http: [//developer.android.com/reference/java/net/HttpURLConnection.html#disconnect()](http://developer.android.com/reference/java/net/HttpURLConnection.html#disconnect())

> 与其他 Java 实现不同，这不一定会关闭可重用的套接字连接。您可以通过在发出任何 HTTP 请求之前将 http.keepAlive 系统属性设置为 false 来禁用所有连接重用。

因此，您应该始终使用新的 HttpURLConnection 并让套接字池处理重用。

在 Froyo (2.2) 之前，keep-alive 连接显然存在错误，因此建议在这些旧设备上禁用 keep-alive。

在我的情况下，EOFException 是由我的服务器未发送完整响应引起的，请参阅此处的详细信息：[https ://stackoverflow.com/a/27845172/2335025](https://stackoverflow.com/a/27845172/2335025)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-22T17:59:40.883

我发现重试连接可以解决问题，如下所示：[https ://stackoverflow.com/a/20302767/2520390](https://stackoverflow.com/a/20302767/2520390)

确保在递归调用之前关闭连接。

此外，我在连接中添加了以下内容以关闭连接，但我不确定它是否有帮助：

```
if (retries > 0) {
    connection.setRequestProperty("Connection", "close");
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-15T02:42:53.470

也许`httpClient`“有更多错误”并且已被弃用，但 JellyBean 的这个问题是一个引人注目的问题。我正在使用 Ksoap2，所以我尝试了所有建议的答案。

*   `System.setProperty("http.keepAlive", "false");`
*   `httpTransportSE.getServiceConnection().setRequestProperty("Connection", "close");`
*   `httpTransportSE.getServiceConnection().disconnect();`

没有任何效果 - 我的解决方案是将我正在使用的 Ksoap2 版本从 3.1.1 回滚到 2.6.5。使用 2.6.5 大大减少了问题。仍在测试，但甚至可能已解决。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-12T19:59:02.517

```
 if (Build.VERSION.SDK != null
                        && Build.VERSION.SDK_INT > 13) {
                    con.setRequestProperty("Connection", "close");
                } 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-09-07T13:51:59.793

试试这个代码：`

Httppost方法：

```
 HttpParams httpParams = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
    HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
    HttpClient client = new DefaultHttpClient(httpParams);
    HttpPost request = new HttpPost("put_url");
    request.setHeader("Content-Type", "application/xml");

    String file = resourceXml();

    StringEntity se = null;
    try {
        se = new StringEntity(file);
    } catch (UnsupportedEncodingException e1) {

        e1.printStackTrace();
    }

    se.setContentEncoding("UTF-8");
    se.setContentType("application/xml");
    request.setEntity(se);
    HttpResponse response = null;
    try {
        response = client.execute(request);
    } catch (ClientProtocolException e1) {

        e1.printStackTrace();
    } catch (IOException e1) {

        e1.printStackTrace();
    }

    HttpEntity entity = response.getEntity();
    InputStream is = null;
    try {
        is = entity.getContent();
    } catch (IllegalStateException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    }
    String _response = convertStreamToString(is);

    Log.i(TAG, "Response:" + _response);
    // Check if server response is valid code
    int res_code = response.getStatusLine().getStatusCode();
    Log.i(TAG, "status_code" + res_code);
    try {
        is.close();
    } catch (IOException e) {

        e.printStackTrace();
    } 
```

`

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-09-07T14:03:27.737

将流转换为字符串：`

```
private static String convertStreamToString(InputStream is) {

    BufferedReader reader = new BufferedReader(new InputStreamReader(is),
            8192);
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append((line + "\n"));
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();

}` 
```

# caching - Windows Server Appfabric 缓存超时

> ID：12319199
> 
> 赞同：3
> 
> 时间：2012-09-07T13:35:12.450
> 
> 标签：caching, windows-server-2008-r2, appfabric

我们有一个使用 Windows Server AppFabric 缓存的应用程序。缓存在本地机器上，本地缓存未启用。这是代码中的配置，.config 中没有。

```
DataCacheFactoryConfiguration configuration= new DataCacheFactoryConfiguration();
configuration.Servers= servers;
configuration.MaxConnectionsToServer= 100; // 100 is maximum
configuration.RequestTimeout= TimeSpan.FromMilliseconds( 1000); 
```

PutAndUnLock 上的对象到期时间为两分钟。

以下是一些典型的性能监视器值：

```
Total Data Size Bytes 700MB
Total GetAndLock Requests /sec Average 4
Total Eviction Runs: 0
Total Eviced Objects: 0
Total Object COunt: either 0 or 1.8447e+019 (suspicious, eh?) I think the active object count should be about 500. 
```

这是在虚拟机上运行的，我认为我们根本不受硬件限制。

**问题：**每隔几分钟，从 1 到 20 不等，持续一秒左右，所有请求（Get、GetAndLock、Put、PutAndLock）超时。

我在网上看到的唯一补救措施是增加 RequestTimeout。如果我们将时间增加到 2 秒，问题的发生频率似乎会有所降低，但仍然会发生。我们不能更多地增加超时时间，因为我们需要在缓存超时后从头开始创建对象的时间。

# visual-studio-2010 - Visual Studio 2010 - 编码的 UI 测试 - 访问被拒绝

> ID：12319200
> 
> 赞同：1
> 
> 时间：2012-09-07T13:35:18.887
> 
> 标签：visual-studio-2010, coded-ui-tests

我的 Windows XP 上有 Visual Studio 2010 Ultimate。我正在尝试通过 Coded UI Test Builder 记录 Coded UI Test，但我总是收到“访问被拒绝”消息，或者“控件不可用或无效”。当我尝试记录单击“开始”菜单或在记事本中键入内容时，我收到了相同的消息。

我已经阅读了很多关于这个问题的主题，但我还没有找到好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:36:52.153

重装电脑解决了这个问题。

# c# - 反应式扩展评估太多次了吗？

> ID：12319204
> 
> 赞同：1
> 
> 时间：2012-09-07T13:35:31.143
> 
> 标签：c#, system.reactive

Reactive Extensions 应该评估其各种运算符多少次？

我有以下测试代码：

```
var seconds = Observable
    .Interval(TimeSpan.FromSeconds(5))
    .Do(_ => Console.WriteLine("{0} Generated Data", DateTime.Now.ToLongTimeString()));

var split = seconds
    .Do(_ => Console.WriteLine("{0}  Split/Branch received Data", DateTime.Now.ToLongTimeString()));

var merged = seconds
    .Merge(split)
    .Do(_ => Console.WriteLine("{0}   Received Merged data", DateTime.Now.ToLongTimeString()));

var pipeline = merged.Subscribe(); 
```

我希望这将每五秒写入一次“生成的数据”。然后，它将数据传递给写入“Split/Branch received Data”的“split”流和写入“Received Merged data”的“merged”流。最后，因为“合并”流也从“拆分”流接收，所以它第二次接收数据并第二次写入“Received Merged data”。（它写其中一些的顺序并不是特别相关）

但我得到的输出是这样的：

```
8:29:56 AM Generated Data
8:29:56 AM Generated Data
8:29:56 AM  Split/Branch received Data
8:29:56 AM   Received Merged data
8:29:56 AM   Received Merged data
8:30:01 AM Generated Data
8:30:01 AM Generated Data
8:30:01 AM  Split/Branch received Data
8:30:01 AM   Received Merged data
8:30:01 AM   Received Merged data 
```

它正在写入两次“生成的数据”。据我了解，订阅“秒”IObservable 的下游观察者的数量不应影响“生成数据”写入的次数（应该是 ONCE），但确实如此。为什么？

*注意*我在 .Net Framework 3.5 环境中使用反应式扩展的稳定版本 v1.0 SP1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:32:14.667

据推测，他们选择这种方法是为了让每个订阅者从他们的初始订阅开始以相同的时间间隔获取它的值。考虑您的备用间隔将如何工作：

```
0s - First subscriber subscribes
5s - Value: 0
8s - Second subscriber subscribes
10s - Value: 1
15s - Value: 2
17s - Unsubscribe both 
```

你最终得到的是这样的：

```
First  -----0----1----2-|
Second         --1----2-| 
```

在这种情况下，两个观察者的结果**明显**不同，具体取决于是否已经附加了任何其他观察者。在实施时，`Interval`无论订单或过去的订阅者如何，都为每个订阅者提供相同的体验。

综上所述，您可以通过在创建observable时`Interval`添加来“转换”为您描述的行为。`.Publish().RefCount()``seconds`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T16:54:14.077

尽管有时如果在每一步都多播序列似乎会很好，但如果那样的话，它就不允许你拥有 Rx 允许的丰富组合。

换个角度想， `IObservable`就是基于推送的对偶`IEnumerable`。 `IEnumerable`具有惰性求值的特性 - 在您开始通过`Enumerator`. Rx 序列是惰性组合的，最后一个 Subscribe()（与 For-Each 等效的 Observable）实现了该序列。

通过这种方式，您只需从最后一个阶段取消订阅，即可在所有阶段停止管道，让您无需经历管理单个订阅的噩梦即可拥有火灾和忘记行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T02:25:24.367

在相关的说明中，这里有一个脑筋急转弯，说明了 Asti 与懒惰评估的可枚举序列的类比：

```
private static Random s_rand = new Random();

public static IEnumerable<int> Rand()
{
    while (true)
        yield return s_rand.Next();
}

public static void Main()
{
    var xs = Rand();

    var res = xs.Zip(xs, (l, r) => l == r).All(b => b);

    Console.WriteLine(res);
} 
```

如果您使用自身压缩一个随机序列，您是否希望所有元素对都相同（即导致上面的代码永远运行）？或者，您是否希望代码因某种原因终止并打印错误？

（创建类似的可观察代码留给读者作为练习。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T15:23:19.217

从面向对象的角度来看，考虑基于定义`Observables`/的接口的流是正常的`Enumerables`。如果您可以忽略在 Enumerator 上定义了一个名为 Reset 的便捷方法 - 从功能上讲，Enumerables 是这样的`f -> g -> value?`。可枚举本质上是您调用以获取枚举器的函数，该函数本质上是您不断调用的函数，直到没有更多值要返回为止。

类似地，一个 Observable 被简单地定义为`f(g) -> g(h) -> h(value?)`- 它是一个你提供的函数，当有一个值时你想要调用的函数。

这就是为什么将可枚举或可观察描述为除了以某种方式定义的一组函数之外的任何东西是没有意义的，因此它们可以组合 - 合同是为了确保组合计算的能力。

无论它们是实时的、缓存的还是惰性的，都是可以在其他地方抽象出来的实现细节——虽然我当然不同意这些细节很重要，但更重要的是关注它的功能性质。

作为数据库查询或目录列表的序列具有与`IEnumerable`预先计算的一组值（如数组）相同的接口。这取决于最终使用序列来进行区分的代码。如果您能够习惯它是一种组合高阶函数的方法，您会发现使用 Rx 或 Ix 对问题进行建模会更容易。

# solr - Solr索引增加速度？

> ID：12319207
> 
> 赞同：1
> 
> 时间：2012-09-07T13:35:34.890
> 
> 标签：solr, solrj, pdfbox

我试图弄清楚是什么阻碍了索引速度。我正在从 pdf 中提取文本以将每个页面单独索引到 solr 以获取页面命中结果。

我在每个“文档”之后都使用了提交。然后我注意到每次我使用提交时它都会花费大量时间来重建索引。

现在我用这个：

```
 <autoCommit> <maxDocs>10000</maxDocs> <maxTime>60000</maxTime> </autoCommit> 
```

每分钟获得一次提交。

但后来我计算并发现它索引了大约**30 个“文档”（作为 solrDoc 的页面）/秒或 10 个真实文档/秒**。与其他设置相比，这似乎相当慢。

**我怎样才能提高我的速度？**

额外信息：（如果需要，请索取）

*   我的文档包含 7 个字段。（1 个内容字段与页面上的文本）

*   我使用*Solrj*将文档添加到 solr。

*   我正在使用*示例配置*，因为我没有 Solr 的高级知识

*   pc intel core i7 2600+16Gb ram+ssd（这是一台开发计算机，不是最终服务器，但它应该很快）*使用的 cpu 和 ram 不多。*

*   我从*外部存储*中获取文件。（但速度很快，我可以轻松获得 12MB/s）

*   *我使用pdfbox*提取文本

**   制作一个650Mb 的索引花了*390 分钟**（455600 个 solrdocuments ）** 

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:06:21.957

一方面是您的进程是否是多线程的，如果不是，请通过多个线程从 pdf 中提取文本进行测试，然后交给 solr 进行索引。*

# c# - 延迟时间密码的最佳方法？

> ID：12319209
> 
> 赞同：1
> 
> 时间：2012-09-07T13:35:38.900
> 
> 标签：c#, passwords

这是我需要我的程序做的事情：

一种。该程序生成一些随机密码并用它加密文件。湾。我需要能够找回那个密码，但要等到一天后。

看似微不足道，但有两个要求：

1.  该程序必须能够防止 Windows 时钟篡改（不能简单地将时钟提前 1 天，并以这种方式获取密码）
2.  程序必须能够防止调试篡改（有权访问源代码的人，不应该能够检索密码）

我知道我可以从时间服务器获得时间，这可以绕过要求#1，但仍然留下要求#2。有了可用的源代码，任何人都可以修改从时间服务器接收到的数据，并欺骗应用程序以为已经过去了 1 天。

我正在尝试做的事情（考虑到要求）甚至可能吗？

编辑：假设加密阶段是防篡改。

要回答其中一个问题 - 应用程序的重点是让用户能够在特定时间段内对自己隐藏信息（认为在特定时间过去之前您无法打开它的定时安全）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:38:12.910

我会说这是不可能的。他们的关键是它取决于你无法控制的时间。从理论上讲，即使尝试从时间服务器获取它也容易受到中间攻击风格的人的攻击，因为我认为时间检查可能不会有任何加密（尽管我可能是错的）。因此，由于无法依靠任何时间测量，我认为您在追求不可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:40:52.540

如果文件生成和加密例程是防篡改的，那么您的问题的其余部分都可以使用值得信赖的服务器来解决。您可以阻止客户端在没有服务器帮助的情况下解密文件，但强制它实际加密文件并丢弃临时密钥是困难的。

例如，您可以使用服务器公钥加密密钥和时间戳，并将其与加密文件一起存储。然后客户端无法在不咨询服务器的情况下解密文件，服务器只会在时间戳过去后才给它密钥。

您最大的问题是，如果文件生成和加密例程在不受信任的系统上运行，则无法对其进行防篡改。所以你需要重新考虑你的基本设计。可能会牺牲一些要求。

# mercurial - 禁用/弃用（但不删除）mercurial 存储库

> ID：12319214
> 
> 赞同：2
> 
> 时间：2012-09-07T13:36:01.507
> 
> 标签：mercurial, mercurial-subrepos, mercurial-hook

我和我的同事使用了几个位于集中式（ubuntu，如果重要的话）服务器上的存储库。对于我们的几个项目，我们在许多不同的项目中包含相同的 4 个存储库作为子存储库。这可能有点烦人，因为在网络上传输所有内容等需要一段时间，所以不断地在许多不同的项目中推送/拉取/合并 4 个不同的子存储库。

我想将这 4 个存储库合并到一个主存储库中，该存储库可以包含在我们未来的所有项目中。挑战在于我不想删除旧的子存储库，因为这会破坏运行良好的现有项目。

如果有办法将这些旧存储库指定为已弃用，或者至少使我的同事无法将任何新变更集推送到这些存储库并显示有用的错误消息，那就太好了。这有可能吗，也许正如[这个切线问答所暗示的那样，使用了](https://stackoverflow.com/questions/3302058/can-you-prevent-default-push-but-allow-pull)[反复无常的钩子](http://www.selenic.com/mercurial/hgrc.5.html#hooks)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:49:34.310

我并不是非常倾向于使用文件系统来操作权限，因为这不会为我的同事提供非常有用的错误消息。我能够使用[prechangeset hook](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html)来完成这个（在 mercurial 2.3 中） 。首先，创建一个文件（在本例中为 .hg/deprecated.py）以将挂钩存储在您希望弃用的共享存储库中：

```
# .hg/deprecated.py
import sys
import textwrap

# print out a helpful error message in red to make it obvious things
# are not working
msg = "ERROR: Pushing changesets into this repository is no longer supported. "
msg += "This package has been merged into the /path/to/new/repo repository."
print('\033[%im%s\033[0m'%(31, textwrap.fill(msg)))

# return a non-zero exit code to disallow the changeset to be added to the 
# target repository
sys.exit(1) 
```

然后通过将以下内容添加到您的 .hg/hgrc 文件中，告诉 mercurial 在将任何变更集添加到存储库之前执行此挂钩：

```
# .hg/hgrc
[hooks]
prechangegroup.deprecate = python .hg/deprecate.py 
```

此解决方案同时提醒编码人员存储库未处于活动状态，指示编码人员应将更改提交到何处，并防止编码人员将代码提交到已弃用的存储库。虽然这不像操纵文件系统权限那样永久的解决方案，但它确实指导人们在哪里可以找到新的存储库。希望其他人觉得这很有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:11:11.640

如果您使用的是[mercurial-server 之](http://www.lshift.net/mercurial-server.html)类的东西，您可以撤销对已弃用存储库的所有写访问权限，以便唯一允许的操作是拉取或更新。

# permissions - Cygwin Openssh 看不到 /etc/sshd_config

> ID：12319215
> 
> 赞同：2
> 
> 时间：2012-09-07T13:36:10.460
> 
> 标签：permissions, ssh, cygwin, openssh

我无法让 openssh 服务器在 Windows Server 2008 上运行。我让它在另外两台服务器上运行，但其中一台无法运行。

我运行`ssh-host-config`，并选择权限分离。创建了两个用户，`sshd`并且`sshd_server`.

然后我运行`net start sshd`，我看到了这个：

```
The CYGWIN sshd service is starting.
The CYGWIN sshd service could not be started.

The service did not report an error. 
```

然后我运行`cat /var/log/sshd.log`，我看到了这个输出：

```
/etc/sshd_config: No such file or directory 
```

然后我检查以下权限`/etc/sshd_config`：

```
-rw-r--r-- 1 sshd_server root 3344 Sep   7 09:15 /etc/sshd_config 
```

所以现在，sshd 似乎看不到一个存在并且具有正确权限的文件。即使在 Windows 上，该文件也归`sshd_server`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T14:31:24.673

这也发生过。Procmon 会话向我显示 sshd 服务试图在根目录 c:\etc 而不是 c:\cygwin\etc 中定位 /etc。

进一步调查显示 sshd 加载了一个不正确的 cygwin1.dll，它存在于我的系统 PATH 环境变量中。

解决方案是要么删除坏的 cygwin1.dll，要么从系统变量中删除“坏”路径，并将该路径分配给用户特定的环境变量。

之后在没有这个“坏”路径的专用用户下运行 sshd 守护程序，它应该正常工作。

谢谢标记

# linux - gcc 4.1 可以链接 gcc 4.6 构建的库吗？

> ID：12319218
> 
> 赞同：2
> 
> 时间：2012-09-07T13:36:11.440
> 
> 标签：linux, gcc

> **可能重复：**
> [g++ 4.1.2 与 g++ 4.6 混合](https://stackoverflow.com/questions/11528885/g-4-1-2-mixed-with-g-4-6)

我有一个由 GCC 4.6 构建的库。我想将此库与 GCC 4.1 链接到另一台服务器中。我可以这样做吗？如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:34:53.327

大体上是的，这会奏效。ELF 共享库格式是标准的并且在 gcc 版本之间是相同的。

但是当您说“由 gcc 4.6 构建”时，我的猜测是您的真正意思是它构建在恰好使用 gcc 4.6 的整个库平台上，并且您试图在整个系统上运行该库使用 4.1。这些系统之间还会有其他库更改，一般来说，Linux 库中没有前向兼容性的承诺。在 Ubuntu 12.04 上构建一些东西并尝试在 Fedora 13 上运行它可能会失败。

# r - 如何在R中保留字符串的数字部分

> ID：12319219
> 
> 赞同：0
> 
> 时间：2012-09-07T13:36:11.580
> 
> 标签：r

下面的文本是文本格式的输出。我想使用 R 仅保留或提取字符串的数字部分。例如，我想从包含以下文本的文件中提取 56.1129（作为数字）。我正在逐行阅读文本，并想提取与“1 Animal”相关的值。如果我可以将它们转换为列并提取第 2 行（方差）和第 3 行（pheno1），那就太好了。

```
---------------------------- -------------------------------------
           - - - Results from analysis of BBBt - - -

   1 Animal                   56.1129    
   2 Variance                 47.6055    
   3 pheno1  1                 103.72       0.92562    
Her1        = Animal     1/pheno1     3=          0.5410    0.0162
Notice: The parameter estimates are followed by their approximate standard errors.
---------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:55:10.397

一种选择是将其视为固定宽度文件并使用`read.fwf`：

```
txt <- "---------------------------- -------------------------------------
           - - - Results from analysis of BBBt - - -

   1 Animal                   56.1129    
   2 Variance                 47.6055    
   3 pheno1  1                 103.72       0.92562    
Her1        = Animal     1/pheno1     3=          0.5410    0.0162
Notice: The parameter estimates are followed by their approximate standard errors.
----------------------------------------------------------------" 
```

读取数据：

```
read.fwf(textConnection(txt), widths=c(4, 23, 10), skip=3, nrows=3) 
```

结果是一个数据框，您可以根据需要对其进行操作。

```
 V1                      V2       V3
1  1  Animal                  56.1129
2  2  Variance                47.6055
3  3  pheno1  1              103.7200 
```

# html - ruby 中的简单解析

> ID：12319221
> 
> 赞同：0
> 
> 时间：2012-09-07T13:36:14.010
> 
> 标签：html, ruby, string, parsing

> **可能重复：**
> [在 Ruby 中解析 HTML 文档的方法？](https://stackoverflow.com/questions/2554909/method-to-parse-html-document-in-ruby)

如果在变量结果中我有：

```
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link             rel="stylesheet" type="text/css" href="http://2.ai/styles/hello.css" media="screen"/><title>Welcome to Dotgeek.org * 1.ai</title></head><body>..... etc 
```

如果可能的话，我如何在不使用任何 gem 的情况下解析我现在在 results 变量中拥有的那个 HTML 页面的标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:41:14.560

```
html = '<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="http://2.ai/styles/hello.css" media="screen"/><title>Welcome to Dotgeek.org * 1.ai</title></head>'
html.match(/<title>(.*)<\/title>/)[1] #=> "Welcome to Dotgeek.org * 1.ai" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:44:42.613

您可以像这样简单地按标题标签进行拆分：

```
title = result.split(/<title>/,2)[1].split(/<\/title>/,2)[0] 
```

（编辑：split 的第二个参数与我在 python 中使用的不同，它不计算分割数，而是计算结果数组中的元素数，这意味着`split(/pattern/, 1)`实际上不分割任何东西......）

# extjs - extjs 4 如何在网格单元格中保留组合框

> ID：12319225
> 
> 赞同：2
> 
> 时间：2012-09-07T13:36:17.170
> 
> 标签：extjs, datagrid, combobox, extjs4

我在其他地方看到过类似的问题没有得到解答。我想在一列中有一个组合框，里面有两个选项（ASC，DEC）。我希望它显示在每一行中，或者至少在未选中时显示其值。

我知道在每一行中渲染一个组合框不是一个“好主意”，但在这种情况下，我知道我最多会有大约 20 行，所以这应该不是什么大问题。如果无法做到这一点，我希望从组合框中显示选定的值。目前，当我单击一行时，我只会出现组合框，这没有多大意义，因为除非你正在做，否则你看不到你的选择。解决方案是什么？

另外，我想摆脱单击一行时弹出的更改和取消按钮，我只想能够使用组合框编辑单元格，并让它自动更改/保存。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T13:39:43.233

您可以为`combo`.

然后应该在启动时渲染它。

使用单元格到`renderer`您`render`的网格中。遵循一个可以在 API 代码框中张贴的工作示例。`displayField``combo`

工作**[JSFiddle](http://jsfiddle.net/sran/we3Vu/)**

```
Ext.create('Ext.data.Store', {
    storeId: 'simpsonsStore',
    fields: ['name', 'email', 'phone', 'id'],
    data: {
        'items': [{
            "name": "Lisa",
            "email": "lisa@simpsons.com",
            "phone": "555-111-1224",
            "id": 0
        }, {
            "name": "Bart",
            "email": "bart@simpsons.com",
            "phone": "555-222-1234",
            "id": 1
        }, {
            "name": "Homer",
            "email": "home@simpsons.com",
            "phone": "555-222-1244",
            "id": 2
        }, {
            "name": "Marge",
            "email": "marge@simpsons.com",
            "phone": "555-222-1254",
            "id": 3
        }]
    },
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

// the renderer. You should define it within a namespace
var comboBoxRenderer = function(combo) {
    return function(value) {
        var idx = combo.store.find(combo.valueField, value);
        var rec = combo.store.getAt(idx);
        return (rec === null ? '' : rec.get(combo.displayField));
    };
}
// the combo store
var store = new Ext.data.SimpleStore({
    fields: ["value", "text"],
    data: [
        [1, "Option 1"],
        [2, "Option 2"]
    ]
});
// the edit combo
var combo = new Ext.form.ComboBox({
    store: store,
    valueField: "value",
    displayField: "text"
});

// demogrid
Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [{
        header: 'Name',
        dataIndex: 'name',
        editor: 'textfield'
    }, {
        header: 'Email',
        dataIndex: 'email',
        flex: 1,
        editor: {
            xtype: 'textfield',
            allowBlank: false
        }
    }, {
        header: 'Phone',
        dataIndex: 'phone'
    }, {
        header: 'id',
        dataIndex: 'id',
        editor: combo,
        renderer: comboBoxRenderer(combo)
    }],
    selType: 'cellmodel',
    plugins: [
        Ext.create('Ext.grid.plugin.CellEditing', {
            clicksToEdit: 1
        })
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:13:11.980

```
{
    header: 'Your header',
    dataIndex: 'your Column',
    editor: {
        xtype: 'combobox',
        store: yourStore,
        queryMode: 'local',
        displayField: 'Your Display..',
        valueField: 'Your Value'
    } 
```

# python - numpy 一次创建多个 ndarray

> ID：12319237
> 
> 赞同：0
> 
> 时间：2012-09-07T13:37:03.563
> 
> 标签：python, numpy

我想用 numpy.zeros((N,M)) 创建多个矩阵。但我刚刚意识到这并不像我想象的那样工作：

有人可以向我解释以下代码的结果（为简单起见，使用 1dim 数组）：

```
#!/usr/bin/python
import numpy as np

#sequential array creation 
X=np.zeros(1)
Y=np.zeros(1)
X[0],Y[0]=1.0,2.0
print X,Y

#multiple array creation
X,Y=[np.zeros(1)]*2
X[0],Y[0]=1.0,2.0
print X,Y 
```

结果是

[1.] [2.]

[2.] [2.]

这意味着创建数组的第二种方法不起作用......

在 1 行中创建许多具有相同尺寸的 ndarray 的探测方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:41:44.887

```
mylist * 2 
```

相当于

```
mylist + mylist #resulting list has 2 references to each element in mylist 
                #stored as:
                #[mylist[0],mylist[1],...,mylist[0],mylist[1],...]
                #   ^ ----------------------^
                #   reference the same object 
```

因此，在您的情况下，您正在制作一个 numpy 数组，然后将其放入列表中。当您将该列表相乘时，结果列表有 2 个对*同一数组的*引用。

如果你想创建多个数组并将它们放在一个列表中，列表推导就可以了：

```
lst_of_arrays = [ np.zeros(1) for _ in range(N) ] 
```

或者，如果它们的解包数量足够少，您可以使用生成器或列表理解（下面我选择生成器）：

```
X,Y = ( np.zeros(1) for _ in range(2) )
X,Y,Z = ( np.zeros(1) for _ in range(3) )
W,X,Y,Z = ( np.zeros(1) for _ in range(4) )
... 
```

（并且，为了避免不可避免的评论，在 python2.x 中，您可以使用`xrange`而不是`range`来节省创建列表的开销......）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T14:23:38.840

另一个不使用列表理解或生成器的解决方案是：

```
X, Y = np.zeros((2,1)) 
```

因此，如果您需要例如三个形状数组，`(5, 5)`它将是：

```
X, Y, Z = np.zeros((3, 5, 5)) 
```

为了很好地解释原始示例中出了什么问题，我参考了 mgilson 的回答。

# android - 图像未打开引发 ActivityNotFoundException

> ID：12319243
> 
> 赞同：1
> 
> 时间：2012-09-07T13:37:26.587
> 
> 标签：android, image, android-intent

该应用程序无法使用以下代码打开图像，引发 ActivityNotFoundException。我究竟做错了什么？

```
Intent intent=new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse("android.resource://mypackage/" + R.drawable.sample_3), "image/*");
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:43:52.153

写在下面的代码行

```
intent.setDataAndType(Uri.parse("android.resource://com.android.yourappname/" + R.drawable.sample_3), "image/*"); 
```

代替

```
intent.setDataAndType(Uri.parse("android.resource://mypackage/" + R.drawable.sample_3), "image/*"); 
```

它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:45:36.327

利用：

```
 intent.setDataAndType(Uri.parse("android.resource://com.android.yourApplicationName/" + R.drawable.sample_3), "image/*"); 
```

yourApplicationName 是您的应用程序的名称。

你的问题是你不能直接访问 mypackage 。

# code-signing - 您可以在 Xcode 之外对 Mac OS X 应用程序进行代码设计并让 Gatekeeper 接受吗？

> ID：12319249
> 
> 赞同：-1
> 
> 时间：2012-09-07T13:37:52.767
> 
> 标签：code-signing, osx-gatekeeper

我有一个在 Xcode 之外构建的应用程序（实际上是安装程序），我使用该`codesign`实用程序对其进行了代码签名，但是当我在下载签名的应用程序后尝试安装它时，Gatekeeper 抱怨它来自身份不明的开发人员。我曾尝试使用“3rd Party Mac Developer:...”身份，以及我自己的“Mac Developer:...”身份；两种情况下的结果相同。 `codesign`（据我所知）说一切都很好，所以我想我要么使用了错误的身份（在这种情况下，我的问题是我应该使用/制作来代替）或者签名很好，但是需要使用我的开发人员帐户完成一些事情（在这种情况下，我的问题是可能是什么）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T20:23:02.917

根据 Apple 的说法，并经过我的验证:)，还有另一组身份专门用于签署应用程序以满足 Gatekeeper 中的中间安全设置，但只有团队的代理才能获得，这就是我没有获得它们的原因。我的经纪人得到了它们，我使用了它们，Gatekeeper 很高兴。

# oracle - 如何使用 Hibernate 同步不同数据库中的两个等效表？

> ID：12319251
> 
> 赞同：2
> 
> 时间：2012-09-07T13:38:11.093
> 
> 标签：oracle, hibernate

我正在尝试用*Java*设计一个代码，它将数据库上的**表A**与另一个数据库上的表**A同步。**这可以使用 Hibernate 有效地完成吗？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:04:37.697

也许数据库复制是最好的方法，但如果你出于任何原因必须这样做，那么你应该看看像[Quartz Scheduler](http://quartz-scheduler.org/)这样的调度程序。

Quartz 与 Spring 框架很好地集成，因此它可能是编写作业的好方法，该**作业**每天根据需要进行多次复制。小心数据流以及与事务的同步过程，它可能会造成一些数据完整性问题（这可能会“提供”一些不需要的死锁......）。

无论如何，您可以拥有与数据库连接一样多的 hibernate.cfg.xml。因此，您可以将您的对象同时存储在两个数据库中，但这可能是一个繁重的解决方案，可能会影响应用程序的响应时间。**

# sql - 在选择期间更改一列的值 - Sql

> ID：12319255
> 
> 赞同：0
> 
> 时间：2012-09-07T13:38:17.457
> 
> 标签：sql

我有以下查询：

```
Select * from Students 
```

它检索：`Id`、`Name`、`Class`和`School`.

我希望，无论 Class 的值是什么，只要返回 Class = 10。有没有办法在 sql 查询中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:41:05.010

`10`如果您想要每行 10 个，只需替换

```
 Select Id, Name, 10 as class, School from Students 
```

如果你的意思是有条件的

```
 Select * from Students WHERE Class = 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:40:27.490

你可以做

`select id, name, '10' as class, School from students`

无论实际存储的类值是什么，都可以在类列中取回 10。

# java - Windows CTRL+ALT+DEL 杀死 Java 线程

> ID：12319257
> 
> 赞同：-1
> 
> 时间：2012-09-07T13:38:18.393
> 
> 标签：java, multithreading

Windows `CTRL`++是`ALT`如何`DEL`工作的？它对运行 Java 程序线程有什么影响？

我正在运行带有线程的小型Java程序，并且在`CTRL`++`ALT`线程`DEL`被杀死之后。 **如何防止这种情况？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:41:00.413

你的意思是; `CTRL`++进入任务管理器，然后选择你的Java进程和用户结束吗`ALT`？`DEL`

你不能阻止它，你也不应该。`CTRL`++`ALT`机制`DEL`适用于那些行为不应该并且应该被“杀死”的进程。

如果您的流程在用户刚刚按下`CTRL`++时`ALT`结束，`DEL`那么就出现了问题，这不应该发生。

# inheritance - Rails：ActiveRecord 的 default_scope 和类继承

> ID：12319258
> 
> 赞同：6
> 
> 时间：2012-09-07T13:38:19.830
> 
> 标签：inheritance, activerecord, ruby-on-rails-3.2, default-scope

我的应用程序不仅有用户，还有管理员和超级管理员。由于所有三个共享相同的属性，我只想使用一个带有附加属性“角色”的表，该属性可以是“用户”、“管理员”或“超级管理员”：

```
class User < ActiveRecord::Base
 # with nickname and password
end

class Admin < User

  def power
    puts "admin rights"
  end
end

class SuperAdmin < Admin

  def superpower
    puts "I've got the #{power}!"
  end
end 
```

现在我想做一些事情，比如`SuperAdmin.all`只获得超级管理员。使用 default_scope 似乎可以让我到达那里：

```
class SuperAdmin < Admin
  default_scope where(["role = ?", "super_admin"])

  # ...
end 
```

现在我也在向 Admin 添加一个 default_scope：

```
class Admin < User
  default_scope where(["role = ?", "admin"])

  # ...
end 
```

Aaaand... SuperAdmin.all 不再返回任何内容。这是为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T13:38:19.830

如果有多个 default_scope，ActiveRecord 会链接它们。所以 SuperAdmin.all 寻找具有“Admin”和“SuperAdmin”角色的用户——这永远不会发生。

为了解决这个问题，您可以覆盖继承模型的 default_scope，因此只需自己定义一个 self.default_scope ：

```
 class SuperAdmin < Admin
    def self.default_scope
        where(["role = ?", "super_admin"])
    end
    #...
 end 
```

SuperAdmin.all 现在应该可以按预期工作了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-04-05T00:39:22.200

任何像我这样偶然发现的人，还有另一种选择（更好的 imo）。

您可以简单地删除所有`default_scopes`定义为数组的 。

```
class Admin < User
  # This line will clear all the default_scopes defined in parent classes
  self.default_scopes = []
  default_scope { ... }
end 
```

请参阅此处的源代码 [https://apidock.com/rails/ActiveRecord/Base/default_scope/class](https://apidock.com/rails/ActiveRecord/Base/default_scope/class)。您可以看到它所做的只是将后续默认范围添加到数组中。

```
self.default_scopes = default_scopes + [scope] 
```

# jquery - Jquery 1.4.2 表单提交事件处理程序在 IE 7/8 中的表单提交后触发

> ID：12319264
> 
> 赞同：0
> 
> 时间：2012-09-07T13:38:29.757
> 
> 标签：jquery, internet-explorer

我在表单提交事件处理程序中遇到问题。这是我使用 Jquery 1.4.2 的代码

```
<FORM id="mysearchform" method="get" action="http://www.abc.com/results.aspx?q=" target=_blank sizcache="1694" sizset="0" jQuery1347023310528="3">

<DIV class="search">
<span><span>
<LABEL class=hide for=q>Search:</LABEL>
<INPUT accessKey=S id="a" class="abc" name="a" maxLength="50" value="Images" size=69 type="search" autocomplete="off" selectionStart="0" jQuery1347023310528="108">
<INPUT style="WIDTH: 185px; HEIGHT: 33px" class="img" title="Search" alt="Search" value="Search" src="http://dummyimage.com/180x35" type=image>
<INPUT name="form" value="abcd" type="hidden"></SPAN></SPAN></DIV>
</FORM> 
```

我有一个用于 mysearchform 的事件处理程序，用于更改表单输入元素的值和 id 为“a”的文本框的值，以便在提交表单时我可以更改文本框的值，即（添加附加值）

```
$("#mysearchform").submit(mysubmitHandler); 
```

在 mysubmitHandler 中，我正在更改“a”和表单输入元素的值。此代码在 IE9、FF 4.0 和最新版本的 chrome 中运行良好。但是在 IE 7 和 IE8 中，在进入“mysubmitHandler”之前，新窗口正在打开（我在新窗口中显示搜索结果）。所以我的更改没有附加到搜索窗口上的查询字符串。

在其他浏览器中，“mysubmitHandler”首先触发，然后新窗口打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:21:50.840

我确实重现了这个问题。这是我的设置解决问题的方法：

（在代码中注释了我更改的内容）

```
// Wrapped everything in jquery onready event function $(function() { }) 
$(function() {
    var $searchForm = $("#mysearchform");

    function onSubmit() {
        var $formElement = $("input[name=form]", $(this));
        $formElement.attr("value", ($("#a").val() + "search"));
    }

    // Put the handler *after* the function definition
    $searchForm.submit(onSubmit);
}); 
```

# objective-c - 如何使用具有可变参数列表的方法传递的对象启动 NSArray

> ID：12319265
> 
> 赞同：3
> 
> 时间：2012-09-07T13:38:29.697
> 
> 标签：objective-c

是否可以这样做：

```
- (void) setList:(id) firstObj,...
{
    va_list args;
    va_start(args,firstObj);
    list = [[NSArray alloc] initWithObjects:args]; // Compile error
    va_end(args);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T13:42:43.350

试试这个：

```
- (void) setList:(id)firstObj, ... NS_REQUIRES_NIL_TERMINATION
{
    va_list args;
    va_start(args, firstObj);
    list = [[NSMutableArray alloc] initWithObjects:firstObj, nil];
    id obj;
    while ((obj = va_arg(args, id)) != nil) {
        [list addObject:obj];
    }
    va_end(args);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T13:48:05.823

`NSArray`没有采用 a 的构造函数，`va_list`因此您必须自己循环 args 并将它们添加到可变数组中。您还应该为要`nil`终止的参数添加一个约束。

```
- (void) setList:(id) firstObj,... __attribute__((sentinel)) //make sure it is nil terminated
{
    //You have to add the first object yourself
    NSMutableArray *tmplist = [NSMutableArray arrayWithObject:firstObj];
    va_list args;
    va_start(args,firstObj);

    id arg; 
    while((arg = va_arg(args, id)) != nil)
        [tmplist addObject:arg];

    va_end(args);

    list = [tmplist copy];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:47:07.743

非常接近，这样的事情应该可以工作。问题是没有用于此的 API 函数，因此您必须从列表中取出对象并将它们添加到您实例化的数组中。

```
-(void *)setList:(id)firstObj, ... {
    //The array you're holding everything in
    arr = [NSMutableArray array];
    [arr addObject:firstObject];

    //Get the variable list
    va_list args;
    va_start(args, action1);

    //Create the object
    id object = va_arg(args, id);

    //Keep adding objects until you run out
    while(object) {
        [arr addObject:object];
        object = va_arg(args, id);
    }

    va_end(args);
} 
```

# c# - WinForms中的WPF ElementHost不接收鼠标点击

> ID：12319266
> 
> 赞同：3
> 
> 时间：2012-09-07T13:38:33.823
> 
> 标签：c#, .net, wpf

我有一个想要添加 WPF 用户控件的 winforms 应用程序。问题是当我运行程序时，WPF 用户控件不响应鼠标事件。我可以浏览控件并很好地使用键盘，但是控件不响应鼠标单击（当您将鼠标悬停在按钮上时，按钮甚至无法识别）。我在这个 SO 问题中尝试了解决方案，但没有帮助：[WPF WinForms Interop issue with Enable / Disable](https://stackoverflow.com/questions/655410/wpf-winforms-interop-issue-with-enable-disable)。请看下面的代码。

用户控制 XAML

```
<UserControl x:Class="WinformsWPF.ucNotes"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="400" d:DesignWidth="460" Background="#FFD7DFEC" IsHitTestVisible="False" Loaded="Window_Loaded">

    <UserControl.Resources>
        <LinearGradientBrush x:Key="DataGridHeaderBackgroundBrush" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#b3dbcc" Offset="0" />
            <GradientStop Color="#61a99b" Offset="1" />
        </LinearGradientBrush>
    </UserControl.Resources>
    <Grid x:Name="LayoutRoot">
        <Label Content="Notes" HorizontalAlignment="Left" Margin="8,8,0,0" VerticalAlignment="Top" FontSize="16" FontWeight="Bold"/>
        <DataGrid x:Name="dgNotes" Margin="8,50,8,0" VerticalAlignment="Top" Height="121.28" d:LayoutOverrides="HorizontalAlignment" Background="#FFE4EEF3" AutoGenerateColumns="False" HorizontalGridLinesBrush="{x:Null}" VerticalGridLinesBrush="{x:Null}" ColumnWidth="Auto" CanUserDeleteRows="False" CanUserAddRows="False" CanUserReorderColumns="False" CanUserResizeRows="False" IsReadOnly="True" SelectionMode="Single" SelectionChanged="dgNotes_SelectionChanged" RowHeaderWidth="0" BorderBrush="{x:Null}" SelectedIndex="0">
            <DataGrid.Columns>
                <DataGridTextColumn x:Name="nDate" Header="Date"/>
                <DataGridTextColumn x:Name="nEmployee" Header="Employee"/>
                <DataGridTextColumn x:Name="nText" Header="Note" Width="*"/>
            </DataGrid.Columns>
            <DataGrid.Resources>
                <Style TargetType="{x:Type DataGridColumnHeader}">
                    <Setter Property="VerticalContentAlignment" Value="Center" />
                    <Setter Property="Padding" Value="6" />
                    <Setter Property="BorderBrush" Value="#489283" />
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="Background" Value="{StaticResource DataGridHeaderBackgroundBrush}" />
                </Style>
                <Style TargetType="{x:Type DataGridRow}">
                    <Setter Property="Background" Value="Transparent" />
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="#66D7DFEC" />
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="#DDD7DFEC" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
                <Style TargetType="{x:Type DataGridCell}">
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Margin" Value="3" />
                    <Setter Property="Padding" Value="3" />
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Foreground" Value="Black" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.Resources>
        </DataGrid>
        <Grid Margin="8,175.28,8,8" >
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" MinHeight="25.96"/>
                <RowDefinition Height="Auto" MinHeight="25.96"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" MinWidth="61.757"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Label Content="Date" d:LayoutOverrides="Height" HorizontalAlignment="Left"/>
            <Label Content="Employee" Grid.Row="1" d:LayoutOverrides="Width"/>
            <Label Content="Notes" Grid.Row="2" HorizontalAlignment="Left" VerticalAlignment="Top"/>
            <Label x:Name="lblDate" Content="lblDate" Grid.Column="1" HorizontalAlignment="Left" d:LayoutOverrides="Height"/>
            <Label Content="lblEmployee" Grid.Column="1" HorizontalAlignment="Left" Grid.Row="1" d:LayoutOverrides="Height" Name="lblEmployee" />
            <TextBox x:Name="txtNotes" Grid.Column="1" Grid.Row="2" TextWrapping="Wrap" d:LayoutOverrides="Width" LostFocus="txtNotes_LostFocus" />
        </Grid>
        <Button x:Name="btnDelete" HorizontalAlignment="Right" Margin="0,8,8,0" VerticalAlignment="Top">
        </Button>
        <Button x:Name="btnAdd" HorizontalAlignment="Right" Margin="0,8,50,0" VerticalAlignment="Top" Click="btnAdd_Copy_Click">
        </Button>
    </Grid>
</UserControl> 
```

用户控制 CS

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;

namespace WinformsWPF
{
    /// <summary>
    /// Interaction logic for ucNotes.xaml
    /// </summary>
    public partial class ucNotes : UserControl
    {
        List<noteItem> notes;
        List<string> noteColumns;
        public ucNotes()
        {
            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            notes = new List<noteItem>
            {
                new noteItem{nID = 0, nDate = Convert.ToDateTime("9/5/2012 2:48 PM"), nEmployee = "Gardner, John", nText = "This is a test note"},
                new noteItem{nID = 1, nDate = Convert.ToDateTime("9/5/2012 2:51 PM"), nEmployee = "Gardner, John", nText = "This is another test note.  This test note is very long.  It should cause overlap."}
            };
            noteColumns = new List<string> { "nDate", "nEmployee", "nText" };

            dgNotes.GenerateColumns(noteColumns);
            dgNotes.ItemsSource = notes;

        }

        private void dgNotes_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            noteItem noteInfo = (noteItem)dgNotes.SelectedItem;
            lblDate.Content = noteInfo.nDate;
            lblEmployee.Content = noteInfo.nEmployee;
            txtNotes.Text = noteInfo.nText;
        }

        private void txtNotes_LostFocus(object sender, RoutedEventArgs e)
        {
            ((noteItem)dgNotes.SelectedItem).nText = txtNotes.Text;
            dgNotes.Items.Refresh();
        }

        private void btnAdd_Copy_Click(object sender, RoutedEventArgs e)
        {
            notes.Add(new noteItem { nDate = DateTime.Now, nEmployee = "Gardner, John" });
            dgNotes.SelectedIndex = dgNotes.Items.Count - 1;
            dgNotes.Items.Refresh();
            txtNotes.Focus();
        }
    }
    public static class dataGridExtension
    {
        public static void GenerateColumns(this DataGrid dataGrid, List<string> columns)
        {
            List<DataGridColumn> oldColumns = dataGrid.Columns.ToList();
            dataGrid.Columns.Clear();

            int index = 0;
            foreach (var column in oldColumns)
            {
                var newCol = (DataGridTextColumn)column;
                newCol.Binding = new Binding(columns[index++]);
                dataGrid.Columns.Add(newCol);
            }
        }
    }
    public class noteItem
    {
        public int nID { set; get; }
        public DateTime nDate { set; get; }
        public string nEmployee { set; get; }
        public string nText { set; get; }
    }
} 
```

除了 ElementHost 之外，windows 窗体是空的（即，它是一个没有任何更改的新项目）。让我知道您是否也想要该代码。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:45:37.150

你无意中`IsHitTestVisible="False"`设置了`UserControl`....把它取下来，它就起作用了。

这将阻止控件在点击时获取鼠标消息。

*   [http://msdn.microsoft.com/en-us/library/system.windows.uielement.ishittestvisible.aspx](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ishittestvisible.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-08T08:04:32.967

我也遇到过这个问题，但是接受的解决方案不起作用。为了后代，我将在这里添加我发现的内容。

### TLDR

在 Visual Studio 中禁用 XAML 热重载。

`Debug -> Options -> Debugging -> Hot Reload -> Uncheck Enable XAML Hot Reload`

### 问题

我在控件的 WinForms 项目中托管了一个 WPF UserControl `ElementHost`。WPF UserControl 包含许多标签和文本框以及两个按钮，保存和取消。

该问题与 OP 非常相似：您可以`UserControl`使用 tab 键导航，并且可以使用空格键触发按钮上的 Click 事件。`Button`将鼠标悬停在按钮上会导致焦点颜色几乎无法察觉地闪烁，并且仅当您恰好在具有焦点的那一刻单击时才会引发单击事件。

鼠标移动结束后，似乎有东西在`UserControl`“窃取”后焦点，显然只有在 WPF 中有焦点时才能单击按钮。*原来*是调试器和热重载。

~~这个问题也可能由调试器引起的另一个提示是，禁用热重载也解决了我遇到的另一个问题：项目的 WinForms 组件将失去 DPI 意识，并导致各种显示问题。~~

*编辑：不是由热重载引起的。其他一切都如所述。*

作为参考，我正在使用 Visual Studio Professional 2019（版本 16.8.2）

# actionscript-3 - 我想要 List 组件有两种不同的样式

> ID：12319270
> 
> 赞同：-2
> 
> 时间：2012-09-07T13:38:56.423
> 
> 标签：actionscript-3, flash, actionscript

我有两个列表组件的列表实例。我希望他们有两种不同的视觉风格（皮肤），我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:45:18.433

听起来您想更改列表组件的实例，使其外观/样式（设计）与另一个实例不同。

您可以使用列表的`setStyle()`函数在运行时执行此操作。

以下是您可以更改的样式列表：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/List.html#styleSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/List.html#styleSummary)

更多或自定义 UI 组件。 [http://help.adobe.com/en_US/as3/components/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7f50.html](http://help.adobe.com/en_US/as3/components/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7f50.html)

[http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7f41.html](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7f41.html)

# iphone - iPhone 多视图和 iPad 单视图都共享一个视图控制器

> ID：12319277
> 
> 赞同：1
> 
> 时间：2012-09-07T13:39:18.867
> 
> 标签：iphone, ios, ipad, xib, data-entry

我有一个我正在开发的应用程序，并且在用户注册期间我有相当多的数据输入。在 ipad 版本的应用程序上，这非常简单，因为所有数据输入字段都可以在一个屏幕上显示。然而，在 iphone 版本上，这看起来不那么干净，我想在 2 个屏幕上打破它。这可能需要在 XIB 之间切换。所以我的问题是我可以使用单个视图控制器并将 2 个 XIB 视为单个视图吗？这样，我可以为这个屏幕的 ipad 和 iphone 版本共享一个视图控制器，并将所有业务逻辑都放在一个视图控制器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:04:17.993

是的，您可以，当然假设您的 XIB 与您的控制器兼容（例如，您的 XIB 不依赖于您的控制器未实现的属性）。我在没有两页拆分要求的情况下成功地做到了这一点，但没有只有一个控制器类：我还对这个控制器进行了子类化（一个用于 iPhone 的子类，一个用于 iPad），以便将少量特定于设备的逻辑保留在它自己的类。

对于页面拆分，我想如果您有一个单独的模型对象，那么您可以有两个控制器实例，一个用于每个页面的 XIB，并让它们根据您的需要处理相同的数据。

# iphone - 从 HTML + UIWebView 下载视频

> ID：12319278
> 
> 赞同：7
> 
> 时间：2012-09-07T13:39:21.737
> 
> 标签：iphone, ios, video, uiwebview, download

在我的新应用程序中，我需要从不同的网站下载视频，假设它是视频下载器应用程序。为此，我计划在 html 中搜索 .mp4 和 .Flv url，然后尝试下载视频。有很多应用程序已经在做同样的事情

[http://itunes.apple.com/in/app/video-downloader-super-lite/id481701140?mt=8](http://itunes.apple.com/in/app/video-downloader-super-lite/id481701140?mt=8)

我要问的是，我们如何下载视频？任何代码或链接或其他东西。这个应用程序是如何工作的？任何帮助都会非常感激。

我需要的是当您在 UIWebview 中打开页面时假设您打开“www.youtube.com”并选择要播放的视频然后它要求下载。对于下载，我需要 URL（嵌入式 url、Flv url、mpv url），这样我就可以让它发挥作用。我需要知道那个 URL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:26:13.873

如果你真的想去黑客，你会得到苹果的私有库“webkit”，如果你尝试找到 UIWebview 的子视图，它可能会对你有所帮助，我从未尝试过，但你可以用这个逻辑进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:20:12.403

如果你能够使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)库，那就很简单了。您可以发出 HTTP 请求并使用其[`outputStream`](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)属性将文件下载到您的设备。假设您将下载按钮连接到功能`downloadVideoFromURL:withName:`

```
- (void)downloadVideoFromURL:(NSURL*)url withName:(NSString*)videoName
{
    //filepath to your app's documents directory
    NSString *appDocPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *videosPath = [appDocPath stringByAppendingPathComponent:@"Videos"];
    NSString *filePath = [videosPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.mp4", videoName]];

    //check to make sure video hasn't been downloaded already
    if ([[NSFileManager defaultManager] fileExistsAtPath:filePath])
    {
        //file was already downloaded
    }

    //video wasn't downloaded, so continue
    else
    {

        //enable the network activity indicator
        [AFNetworkActivityIndicatorManager sharedManager].enabled = YES;

        NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
        AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:urlRequest];

        //create a temporary filepath while downloading
        NSString *tmpPath = [videosPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@-tmp.mp4", videoName]];

        //the outputStream property is the key to downloading the file
        operation.outputStream = [NSOutputStream outputStreamToFileAtPath:tmpPath append:NO];

        //if operation is completed successfully, do following
        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

            //rename the downloaded video to its proper name
            [[NSFileManager defaultManager] moveItemAtPath:tmpPath toPath:filePath error:nil];

            //disable network activity indicator
            [AFNetworkActivityIndicatorManager sharedManager].enabled = NO;

            //optionally, post a notification to anyone listening that the download was successful
            [[NSNotificationCenter defaultCenter] postNotificationName:@"DownloadedVideo" object:nil];

        //if the operation fails, do the following:
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {

            NSLog(@"error: %@", error);

            //delete the downloaded file (it is probably partially downloaded or corrupt)
            [[NSFileManager defaultManager] removeItemAtPath:tmpPath error:nil];

            //disable network activity indicator
            [AFNetworkActivityIndicatorManager sharedManager].enabled = NO;
        }];

        //start the operation
        [operation start];

    }
} 
```

# android - 如何使用我的应用程序打开具有自定义扩展名的文件

> ID：12319279
> 
> 赞同：0
> 
> 时间：2012-09-07T13:39:21.377
> 
> 标签：android

我被一件事困住了。我有一个扩展名为 .xat 的文件，我想使用我的 android 应用程序打开它。我将此添加到我的 android 清单文件中，但我无法打开我的文件

```
<action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:scheme="http" />
            <data android:scheme="https" />
            <data android:host="*" />
            <data android:pathPattern=".*\\.xat" /> 
```

我做错了什么？

# python - 限制 gtkmozembed 仅从某些服务器加载页面

> ID：12319287
> 
> 赞同：0
> 
> 时间：2012-09-07T13:39:43.027
> 
> 标签：python, gtk

对于 Python 项目，我使用**gtkmozembed MozEmbed()**作为简单的 HTML 浏览器。我在找什么：

(1) 限制，例如只允许连接哪些服务器`http://localhost`。

和/或

(2) 一种**“onClick()”**函数，用于检查用户点击的链接是否指向允许的页面/服务器。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:20:10.610

好吧，这越来越尴尬了。我一直在 stackoverflow 上提问，不久之后在其他地方找到了答案。对不起。

不过，答案是：gtkmozembed 有一个名为[“open-uri”](http://www.pygtk.org/pygtkmozembed/class-gtkmozembed.html#signal-gtkmozembed--open-uri)的信号，它可以连接到这样的回调函数：

```
browser = gtkmozembed.MozEmbed()
browser.connect("open-uri", OpenUri)

def OpenUri(mozembed, uri, data=None):
    if uri.startswith('http://localhost/'):
        print "Will now open", uri, "..."
        return False

    print uri, "is not in the list of allowed uris." + "\nLoading denied."
    return True 
```

除非有人有更好的解决方案？...我会用这个。

## 编辑：

此解决方案**并非**100% 节省。虽然用户不能直接打开不允许的链接，但源代码中嵌入的链接，如

```
 <img src="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png" /> 
```

或者

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script> 
```

仍将被加载！

# string - 在字符串中间添加字符

> ID：12319288
> 
> 赞同：1
> 
> 时间：2012-09-07T13:39:46.493
> 
> 标签：string, cakephp, split, character, add

我有一个六位数代码的列表（有些是 7）。我需要在每个代码的第四个字符之后放置一个空格，以使其在我的视图中更具可读性。就像：

```
234201
234202
234203 
```

到

```
2342 01
2342 02
2342 03 
```

有什么方法可以在 cake php 中快速做到这一点？除了使用 tail 和其他需要更多编码的功能完成所有工作之外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:46:32.480

这可能是一个更优雅的解决方案，但至少它有效。

只需在字符串的各个部分之间附加一个空格。

```
$string           = "123456";
$formatted_string = substr($string, 0, 4) . " " . substr($string, 4); 
```

`$formatted_string`现在应该是`1234 56`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:06:55.013

你总是可以像这样构建一个小的可重用函数：

```
//adds a character to a string at a specific position
function addChar($string, $char, $pos) {
    $newString = substr($string, 0, $pos) . $char . substr($string, $pos);
    return $newString;
} 
```

要使用：

```
$myString = "234201";
$myAlteredString = addChar($myString , " ", 4); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:17:27.077

使用 PHP 的[`substr_replace`](http://php.net/manual/en/function.substr-replace.php)：

```
substr_replace('123456', ' ', 4, 0); // returns '1234 56' 
```

# javascript - 在移动设备轮换上重新加载 javascript？

> ID：12319291
> 
> 赞同：2
> 
> 时间：2012-09-07T13:39:54.037
> 
> 标签：javascript, html

我有一个脚本可以计算 div 的高度并将其作为样式返回。但是当您旋转移动设备时，高度会发生变化，所以我需要一种重新加载它的方法。我怎样才能做到这一点？

```
<script type="text/javascript">
window.onload = function() {
    var height = document.getElementById('id').offsetHeight;
    document.getElementById('id').style.marginTop = height + 'px';
}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:42:42.047

从中创建一个函数并在加载和调整大小时调用它。无需重新加载页面，只需再次调用代码：

```
<script type="text/javascript">
function calcHeight() {
    var height = document.getElementById('id').offsetHeight;
    document.getElementById('id').style.marginTop = height + 'px';
}

window.onload = calcHeight;
window.resize = calcHeight;

</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:44:34.000

您可以创建一个函数：

```
function setHeight() {
   var height = document.getElementById('id').offsetHeight;
   document.getElementById('id').style.marginTop = height + 'px';
} 
```

您可以调用 onload：

```
window.onload = function() {
   setHeight();
   // Other actions when window is loaded
} 
```

并调整大小：

```
window.onresize = function(event) {
   setHeight();
   // Other actions when window is resized
} 
```

这应该可以完成这项工作。

# .net - HashSet.Intersect() 的顺序对性能有影响吗？

> ID：12319293
> 
> 赞同：0
> 
> 时间：2012-09-07T13:40:01.937
> 
> 标签：.net, algorithm, collections, intersection, hashset

我猜它没有，但如果有人可以确认。

如果我尝试相交两组：A（100 万项）B（1 项）

框架是否总是执行 A.Contains(B) 一次，而不是 B.Contains(A) 一百万次？

这是假设相交是如何在引擎盖下工作的，这与我不知道的一些花哨的算法相反。

**更新：**

好的，所以对于 c# 你应该清楚地这样做`B.InsersectWith(A)`，如果 B << A.`Intersect()`被定义`IEnumerable`并且根据下面的答案（和 MSDN）效率会低很多。因此，如果您使用最佳工具（即`IntersectWith()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:40:41.457

从文档

如果另一个参数表示的集合是与当前 HashSet 对象具有相同相等比较器的 HashSet 集合，则该方法是 O(n) 操作。否则，此方法是 O(n + m) 操作，其中 n 是 Count，m 是 other 中的元素数。

[HashSet.IntersectWith 方法](http://msdn.microsoft.com/en-us/library/bb293080%28v=vs.100%29.aspx)

如果您正在寻找速度实现（覆盖）GetHashCode，如果您可以从您的数据中派生出有意义的哈希。并覆盖 Equal。我对将在集合中的任何类执行此操作。

[Object.GetHashCode 方法](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:47:08.757

这取决于您是作为一般问题还是针对特定语言提出问题。

在 Java 中，它将遍历第二个集合，然后遍历第一个集合以查看它是否包含该元素。所以它仍然会遍历这两个集合。

在c#中，该方法的作用是枚举第一个集合（A）的元素，然后枚举第二个集合（B）的元素并标记那些共同的元素，然后按该顺序生成这些元素。

所以，要回答你的问题，我会说它没有。这是它必须通过每个容器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:59:15.203

代码是针对一般情况编写的。如果您是这样的特殊情况，您应该实现对您的特定用例有效的自定义逻辑。

Contains() 方法只是遍历列表，直到找到匹配项，因此如果这就是它正在做的事情，顺序肯定很重要，但我相信另一个答案就其工作方式而言是正确的，因为这意味着迭代每个item 最多一次，而“包含”解决方案可以为主列表中的每个元素迭代整个“子”列表。

实际解决方案 = x+y 次迭代 包含解决方案 = x+(x*y) 次迭代

# ms-access - 将多个控件映射到一个方法

> ID：12319295
> 
> 赞同：0
> 
> 时间：2012-09-07T13:40:04.963
> 
> 标签：ms-access, vba, ms-access-2010

我知道在 .Net 框架中，您可以将任何控件事件映射到单个方法，就好像您想将 GridView 中的一列按钮映射到一个方法一样，您可以。

在 VBA 中，我已经忘记了这个信息。有人可以帮我解决如何将表单控件映射到表单代码隐藏中的一种方法吗？

## 当前的 OnClick 事件，待合并

```
Private Sub btnSubmit_Click()
    CloseForm Me
End Sub

Private Sub btnCancel_Click()
    CloseForm Me
End Sub 
```

每个表单至少有两种方法。在某些情况下，各种事件有 3 或 4 个，但它们都有相同的主体，一条线指向一个全局方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:09:17.213

这取决于你想做什么。您可以设置表单，使其接收点击事件并检查 screen.active 控件，或者您可以将每个控件的属性表上的事件行设置为函数。通常，不熟悉 MS Access 易用性的人会走很长一段路，这就是为什么说你想做什么是有用的，通常有一种更简单的方法，而且通常是一种根本不涉及代码的方法.

在控件属性表的单击线上：

```
=Menu_Or_Exit([Name],"cmdClose") 
```

当然，您可以将 Me 作为表单传递，但我发现 [Name] 在很多方面都非常有用。

该函数的摘录：

```
 Case "cmdClose"
            DoCmd.Close acForm, FormName
            CheckMainMenu 
```

您可以保留一个菜单表单、一个菜单子表单，或者只是将按钮从一个表单复制到另一个表单。

# android - 访问 /data/data/com.whatsapp

> ID：12319301
> 
> 赞同：3
> 
> 时间：2012-09-07T13:40:29.777
> 
> 标签：android, root

Hy，在为 2.3.3 构建 android 应用程序时，出现以下错误：

我试图访问这些文件：

```
private static final String src_msg = "/data/data/com.whatsapp/databases/msgstore.db";
private static final String src_wa = "/data/data/com.whatsapp/databases/wa.db"; 
```

我以前做 su ：

```
Process process = Runtime.getRuntime().exec("su"); 
```

我试图通过 cp 命令将文件复制到 sdcard -> 不成功我试图通过`new File(src_msg).exists()`-> 不成功检查文件是否存在

我在清单中使用以下权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

这里还缺少什么？允许root的弹出窗口出现并已被接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:50:28.163

试试看：（感谢 ramdroid ）

```
private boolean run(boolean runAsRoot, String cmd) {

String shell = runAsRoot ? "su" : "sh";

int exitCode = 255;
Process p;
try {

    p = Runtime.getRuntime().exec(shell);
    DataOutputStream os = new DataOutputStream(p.getOutputStream());

    os.writeBytes(cmd + "\n");
    os.flush();

    os.writeBytes("exit\n");
    os.flush();

    exitCode = p.waitFor();

} catch (IOException e1) {
        Log.e("Exception", e1.toString());
} catch (InterruptedException e) {
        Log.e("Exception", e.toString());
}
return (exitCode != 255); 
```

}

```
public boolean copyFile() {
return run(true, "busybox cp /data/FILE TO COPY space DRECTORY TO COPY");
} 
```

仅将 YOUR_DIRECTORY 和 DIRECTORY TO COPY 更改为所需的。

# c# - 时间：2019-05-10 标签：c#listbox fed List 的行为很奇怪

> ID：12319303
> 
> 赞同：0
> 
> 时间：2012-09-07T13:40:31.790
> 
> 标签：c#, list, listbox, datasource

好的，所以我有这个函数，它通过 gui 中的选择清除列表并提供新选择的内容......它非常简单：一个具有构造函数和重写 ToString 方法的类被扔到 List 中并用作列表框的数据源...我进行的任何测试，这都完美无缺，但在这个特定的程序中却没有，我不知道为什么。我并不绝望，我只是真的很好奇。

我发现如果我只是将 List<> 转换为一个数组，它就可以工作......但是为什么呢？

这是我的原始代码不起作用：

```
private void QaControl(string _itemNo, int _curIndex)
    {
        List<QaControlPoint> list = new List<QaControlPoint>();

        //remove old ones from list 
        if (listBox1.DataSource != null)
        {
            list = (List<QaControlPoint>)listBox1.DataSource;

            for (int n = listBox1.Items.Count - 1; n >= 0; --n)
            {
                QaControlPoint qcp = (QaControlPoint)listBox1.Items[n];
                if (_boxList.IndexOf(qcp.link_box) >= _curIndex)
                    list.Remove(qcp);
            }
        }

        string fs = service.getQa(Int32.Parse(_itemNo), "R");
        string[] temp = fs.Split('@');
        for (int a = 0; a < temp.Length - 1; a++)
            list.Add(new QaControlPoint(temp[a], _boxList[_curIndex]));
        listBox1.DataSource = list;
    } 
```

这段代码，我使用简单的数组作为数据源，效果很好。

```
private void QaControl(string _itemNo, int _curIndex)
    {
        List<QaControlPoint> list1 = new List<QaControlPoint>();

        //remove old ones from list 
        if (listBox1.DataSource != null)
        {
            //convert to list here
            QaControlPoint[] rcp = (QaControlPoint[])listBox1.DataSource;
            list1.AddRange(rcp);

            QaControlPoint rcp2;
            for (int n = listBox1.Items.Count - 1; n >= 0; --n)
            {
                rcp2 = (QaControlPoint)listBox1.Items[n];
                if (_boxList.IndexOf(rcp2.link_box) >= _curIndex)
                    list1.Remove(rcp2);
            }
        }

        string fs = service.getQa(Int32.Parse(_itemNo), "R");
        string[] temp = fs.Split('@');
        for (int a = 0; a < temp.Length - 1; a++)
            list1.Add(new QaControlPoint(temp[a], _boxList[_curIndex]));

        //convert back to array here
        QaControlPoint[] rcnew = list1.ToArray();
        listBox1.DataSource = rcnew;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:48:18.147

这里只是一个猜测，但在第一个示例中，DataSource 属性从未更改。当然，您正在添加和删除项目，但是当您设置 DataSource 时，您将它设置为它已经拥有的相同对象实例。

在第二个示例中，您正在使用一个新实例（一个新的 List，然后又是一个新的 Array）。

我的猜测是 ListBox 足够聪明，可以识别出在设置相同实例时不会更改 DataSource 的值，因此它不会执行非常昂贵的刷新步骤。这看起来像 WinForms，我不太熟悉，但我不认为它`List<T>`实现了 ListBox 捕获集合更改事件的必要接口。

试试这个：

```
 private void QaControl( string _itemNo, int _curIndex ) {
        List<QaControlPoint> list = new List<QaControlPoint>();

        //remove old ones from list         
        if ( listBox1.DataSource != null ) {
            List<QaControlPoint> oldList = (List<QaControlPoint>) listBox1.DataSource;
            list.AddRange( oldList );
            for ( int n = listBox1.Items.Count - 1; n >= 0; --n ) {
                QaControlPoint qcp = (QaControlPoint) listBox1.Items[n];
                if ( _boxList.IndexOf( qcp.link_box ) >= _curIndex )
                    list.Remove( qcp );
            }
        }

        string fs = service.getQa( Int32.Parse( _itemNo ), "R" );
        string[] temp = fs.Split( '@' );
        for ( int a = 0; a < temp.Length - 1; a++ )
            list.Add( new QaControlPoint( temp[a], _boxList[_curIndex] ) );
        listBox1.DataSource = list;
    } 
```

# asp.net - 读入 GridView 时格式化日期

> ID：12319304
> 
> 赞同：0
> 
> 时间：2012-09-07T13:40:33.293
> 
> 标签：asp.net

我正在将 a`Date`从 Table 读入 a `GridView`，它的格式显示`GridView`为：

```
15/01/2012 00:00:00 
```

*   我怎样才能阅读它，以便只显示日期部分，减去`00:00:00`?
*   当我使用 UPDATE 时，如何将其存储回表中？

> ```
> <asp:TemplateField HeaderText="Date">
>                             <ItemTemplate>
>                                 <asp:Label ID="Label1" runat="server" Text='<%# Eval("SDate") %>' >
>                                 </asp:Label>
>                             </ItemTemplate>
>                             <EditItemTemplate>
>                                 <asp:TextBox ID="TextBox1" runat="server" Text='<%# Eval("SDate")%>'></asp:TextBox>
>                             </EditItemTemplate>
>                         </asp:TemplateField> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:42:30.160

如果您使用 a`BoundField`来显示日期，它有一个名为`DataFormatString`您可以设置的属性，它将您的字段格式化为您想要的简单日期格式：

```
<asp:BoundField ... DataFormatString="{0:dd/MM/yyyy}" ... runat="server" /> 
```

如果你想用 a 做某事`TemplateField`，你可以在绑定表达式中指定日期格式：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Label ...>
            <%# Eval(Container.DataItem, "DateProperty", "{0:dd/MM/yyyy}") %>
        </asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

因为您只是更改数据的*显示*方式，所以当您执行 SQL 时，您仍然可以使用完整的基础日期`UPDATE`，假设您通过`DataItem`each 的属性检索数据`GridViewRow`。

# c# - 首先在实体框架代码中与中间对象进行多对多映射

> ID：12319306
> 
> 赞同：2
> 
> 时间：2012-09-07T13:40:49.653
> 
> 标签：c#, .net, entity-framework

我有一个多对多关系，我想添加一个中间类，这将使我能够使用存储库模式添加多对多关系。

我无法弄清楚的是映射。

这是结构

```
public class Product
{
    public Product()
    {
        Categories = new HashSet<Category>();
    }

    public int  Id { get; set; }
    public string Name { get; set; }

    public ICollection<Category> Categories { get; set; }
}

public class Category
{
    public int Id { get; set; }
    public String Name { get; set; }

    public ICollection<Product> Products { get; set; }

}

public class PCMap
{
    public int product_id { get; set; }
    public int category_id { get; set; }

    public Product Product { get; set; }
    public Category Category { get; set; }
} 
```

和映射

```
modelBuilder.Entity<Product>()
    .HasEntitySetName("PCMap")
    .HasMany(p=>p.Categories)
    .WithMany(p=>p.Products)
    .Map(m=>
        {
            m.MapLeftKey("product_id");
            m.MapRightKey("category_id");
            m.ToTable("PCMap");
        });

modelBuilder.Entity<PCMap>()
    .ToTable("PCMap");

modelBuilder.Entity<PCMap>().HasKey(k => new
    {
        k.category_id,
        k.product_id
    });

modelBuilder.Entity<PCMap>()
    .HasRequired(p=>p.Product)
    .WithMany()
    .HasForeignKey(p => p.product_id);

modelBuilder.Entity<PCMap>()
    .HasRequired(p => p.Category)
    .WithMany()
    .HasForeignKey(p => p.category_id); 
```

这是我得到的错误..我该如何解决这个问题？

![在此处输入图像描述](../Images/bc8d22b2083a9a120d35539065e9714a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:46:04.127

你设置的方式。`PCMap`是一个非实体，仅用于促进引擎盖下的 M:N 连接。

```
Product p = new Product();
p.Categories ...

Category c = new Category();
c.Products ... 
```

因此，因为您已经在此处将 PC 定义为产品实体定义的一部分。

```
.Map(m=>
        {
            m.MapLeftKey("product_id");
            m.MapRightKey("category_id");
            m.ToTable("PCMap");
        }); 
```

我不相信您需要（或有可能）再次定义它，分别在下面。尝试删除所有这些代码。

```
modelBuilder.Entity<PCMap>()
    .ToTable("PCMap");
modelBuilder.Entity<PCMap>().HasKey(k => new
    {
        k.category_id,
        k.product_id
    });

modelBuilder.Entity<PCMap>()
    .HasRequired(p=>p.Product)
    .WithMany()
    .HasForeignKey(p => p.product_id);

modelBuilder.Entity<PCMap>()
    .HasRequired(p => p.Category)
    .WithMany()
    .HasForeignKey(p => p.category_id); 
```

# sql - SQL Server 子字符串缓冲区填充

> ID：12319310
> 
> 赞同：-1
> 
> 时间：2012-09-07T13:40:59.227
> 
> 标签：sql, buffer, substring, padding

这可能是一个简单的问题，但我试图在 SQL Server 中创建一个基于其他 4 个的新列。这个想法是根据 Zip、姓氏、名字和地址的前 5 个字符创建一个客户 ID。

我的问题是：如果名称太短，如何确保获得间距缓冲区？例如，我有一个名字叫 Tom 的人。如何让它返回带有两个空格的“TOM”？

**注意：** 我完全清楚，根据地址等可以更改的内容创建客户密钥可能会导致问题。我已经和客户讨论过，他们说无论如何都要这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:46:46.600

结合更多方式

```
select STUFF('     ', 1, LEN(name), name)
select name + REPLICATE(' ', 5 - len(name)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:45:48.963

```
left (rtrim(@str) + '     ', 5) 
```

那是五个空格;-)

# javascript - 动态表单字段提取和计算，如何？

> ID：12319314
> 
> 赞同：0
> 
> 时间：2012-09-07T13:41:10.293
> 
> 标签：javascript, forms, field

我有一个动态字段名称长度可变的表单，例如 item{n}，n 可以是 1 或 30，我需要为每个这样的数据行计算 qty{n} * price{n} 的小计，然后最后汇总小计。

表单如下所示：

```
<form>
    <table name="forInstruction">
        <tr><td>... </td> <td>...</td> ... more td </tr>
        ....
    </table>

    <table name="forUserinput"> 
        <tr>
            <td><input type="text" id="item1">,</td> <td><input type="text" id="qty1">,</td> 
            <td><input type="text" id="price1">,</td> <td>fieldX1 t1 </td> ... more td
        </tr> 
        <tr>
            <td><input type="text" id="item2">,</td> <td><input type="text" id="qty2">,</td> 
            <td><input type="text" id="price2">,</td> <td>fieldX2,t2 </td> ... more td
            <td><input type="text" id="item3">,</td> <td><input type="text" id="qty3">,</td> 
            <td><input type="text" id="price3">,</td> <td>fieldX3,t3 </td> ... more td
            ... 
    </table>
    <input type="button" value="Calculate subtotal and total" ... /> 
</form> 
```

注：a) t{n} = 小计字段。b）如上所述，行数未知，可能是1到30。我想做的是：计算小计和总计。each subtotal = qty{n} * parseFloat(price{n}) 我的尝试是遍历整个表单，我能够检索 qty{n} 字段的所有值，但我不知道如何检索其对应价格{n}的值。

```
var fQ=0,fP=0; 
st = 0; 
total = 0; 
for (f=0; f < document.qr.elements.length; f++) { 
    if (document.qr.elements[f].name.indexOf('qty')>=0) { 
        // alert(document.qr.elements[f].name + ' ' + document.qr.elements[f].value); 
        fQ = document.qr.elements[f].value; 
        // alert(fQ); 
    } 
    else if (document.qr.elements[f].name.indexOf('priceLabel')>=0) { 
        fP = document.qr.elements[f].value; 
    } 
    // what do we do here?  Or this is not the good way to go? 
} 
```

也许，遍历整个表单不是一个好主意......只有命名表中的数据行？如果是这样，怎么做？

提前谢谢了。

编辑1：根据建议，新代码：

```
 var i = 0, t=0,
      element; 
   while ((element = forms[0].elements['qty' + i])) {
     var subtotal = forms[0].elements['qty' + i] * forms[0].elements['price' + i]; 
         forms[0].elements['total' + i].value = subtotal;
         t = t + parseFloat(subtotal);
         alert(t);
     // ... 
     i++; 
```

}

```
forms[0].elements['totalFinal'].value = t; 
```

但错误消息：“ReferenceError：未定义表单”。怎么来的？谢谢。

# django - 如何使用 X-Accel-Redirect 配置对远程 nginx 上文件的受保护访问

> ID：12319317
> 
> 赞同：0
> 
> 时间：2012-09-07T13:41:20.587
> 
> 标签：django, apache, nginx

我有 2 台服务器。第一个（domain.com）是一个 django/apache 服务器，第二个（f1.domain.com）是一个文件服务器（nginx）。某些文件受到保护，只能由注册用户下载。为此，我设置了一个 nginx 服务器

```
server {
        listen 80 default_server;
        server_name *.domain.com;
        access_log /home/domain/logs/access.log;
        location /files/ {
             internal;
             root /home/domain;
        }
} 
```

从 Django 我通过 X-Accel-Redirect 标头发送请求，但它不起作用。我认为是因为请求来自远程服务器。

我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:27:35.837

“并且从 django 我通过 X-Accel-Redirect 标头发送请求” - 这是不正确的，“X-Accel”标头必须是来自上游服务器的响应标头的一部分。

正如[http://wiki.nginx.org/X-accel](http://wiki.nginx.org/X-accel)所说，必须有proxy_pass 或fastcgi_pass 指令才能将响应头发送到nginx。

```
location /protected_files { 
    internal;
    proxy_pass http://127.0.0.2; 
} 
```

# iphone - 核心位置警告问题

> ID：12319318
> 
> 赞同：1
> 
> 时间：2012-09-07T13:41:26.093
> 
> 标签：iphone, xcode4.3, core-location

我的核心位置有效，但我在这行代码中收到警告。locationManager.delegate = self; 警告是从不兼容的类型“phoneLocationViewController *const __strong”分配给“id”。我如何摆脱这个警告？这是我的代码

。H

```
@interface phoneLocationViewController : UIViewController {

}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation    
*)newLocation fromLocation:(CLLocation *)oldLocation;

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error;

@property (nonatomic, retain) CLLocationManager *locationManager;
@property (nonatomic, retain) CLLocation *currentLocation; 
```

.m

```
@synthesize locationManager, currentLocation;

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation  
*)newLocation fromLocation:(CLLocation *)oldLocation {
self.currentLocation = newLocation;

if(newLocation.horizontalAccuracy <= 100.0f) { [locationManager stopUpdatingLocation]; }
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
if(error.code == kCLErrorDenied) {
    [locationManager stopUpdatingLocation];
} else if(error.code == kCLErrorLocationUnknown) {
    // retry
} else {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error retrieving location"
                                                    message:[error description]
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
}
}

- (void)viewDidLoad
{
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self; (I GET THE WARNING HERE)
[locationManager startUpdatingLocation];

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[locationManager stopUpdatingLocation];

[super viewDidUnload];
// Release any retained subviews of the main view.
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T13:44:51.033

将您的类声明为实现位置管理器委托的协议。

```
@interface phoneLocationViewController : UIViewController <CLLocationManagerDelegate> { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:45:05.453

您应该添加`CLLocationManagerDelegate`到您的接口声明。

```
@interface phoneLocationViewController : UIViewController <CLLocationManagerDelegate> {
    ....
} 
```

# web-services - Spring-WS：将 SOAP 错误转换为特定异常

> ID：12319323
> 
> 赞同：3
> 
> 时间：2012-09-07T13:41:46.540
> 
> 标签：web-services, spring-ws

当使用 Spring-WS 作为 SOAP 客户端时，我很难将传入的错误转换为特定的 Java 异常。

例如，如果我正在调用的 Web 服务操作可以返回 ClientNotFoundFault 并且假设是 InvalidAmountFault，我可以让 Spring-WS 抛出 ClientNotFoundException 或 InvalidAmountException 吗？

Spring-WS 可以抛出与 SoapFaultClientException 不同的东西吗？

在自己编写 Web 服务时，我可以反过来做。在那里，使用 SoapFaultMappingExceptionResolver，我可以轻松地将异常转换为等效的故障。我只是在写客户时找不到任何关于这样做的事情......

我正在使用带有 JDK 1.7.6 的 Spring-WS 2.1.0.RELEASE

谢谢，如果我不够清楚或者您需要一些代码示例，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T21:16:04.247

客户端没有等效的解析器。解析器接口已准备好供某人编写类似的映射器。应该非常直接地保存故障代码与异常类的映射。

见 org.springframework.ws.client.core.FaultMessageResolver

这是由 SoapFaultMessageResolver 实现的，它只是将错误消息包装在您看到的 SoapFaultClientException 中。

# c# - 无法从 HTML 元素中获取值

> ID：12319324
> 
> 赞同：0
> 
> 时间：2012-09-07T13:41:54.730
> 
> 标签：c#, html, html-agility-pack

```
<div id="a_1" class="c_1">
   <h3><img src="image.png" alt="image text" />versions</h3>
   <div>
      <dl>
         <dt>V1</dt>
            <dd>14</dd>
         <dt>V2</dt>
            <dd>5776</dd>
      </dl>
   </div>
</div> 
```

我怎样才能得到14？我试过这样的事情：

```
document.DocumentNode.SelectSingleNode("//div[@class='c_1']//a[@href]"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:48:26.257

这应该有效：

```
document.DocumentNode.SelectSingleNode("//div[@class='c_1']//dd[1]"); 
```

或者

```
document.DocumentNode.SelectSingleNode("//div[@class='c_1']/div/dl/dd[1]"); 
```

# .net - 如何查看部分类的双方

> ID：12319328
> 
> 赞同：3
> 
> 时间：2012-09-07T13:42:01.220
> 
> 标签：.net, winforms, visual-studio-2010, visual-studio

我正在创建一个 Windows 窗体，并且该类被声明为部分。我可以对我这边的所有行为进行编码，但我注意到在部分类的另一侧，我可以看到 UI 是如何创建的。我怎样才能打开这个？（我在调试器中单步执行时注意到了这个隐藏的代码）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:48:30.223

您可以单击类名称，然后按 F12，它将列出您的类的每个声明，无论是否部分。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:44:40.693

在您的解决方案资源管理器中展开您的表单（通过单击左侧的加号，它具有 .cs 扩展名）。里面有一个 myForm.designer.cs。在那个文件中是你的部分类的其余部分。

# c - 如何快速动态加载经常重新生成的c代码？

> ID：12319329
> 
> 赞同：9
> 
> 时间：2012-09-07T13:42:02.047
> 
> 标签：c, linux

我希望能够动态生成 C 代码并将其快速重新加载到我正在运行的 C 程序中。

我在Linux上，怎么能做到这一点？

Linux 上的库 .so 文件可以在运行时重新编译和重新加载吗？

是否可以在不生成 .so 文件的情况下对其进行编译，编译后的输出是否可以以某种方式进入内存然后重新加载？我想快速重新加载编译的代码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T17:22:15.490

您想要做的事情是合理的，而我正是在[MELT](http://gcc-melt.org/)（扩展 GCC 的高级域特定语言；MELT 编译为 C，通过本身用 MELT 编写的翻译器）中做的。

首先，在生成 C 代码（或许多其他源语言）时，一个好的建议是在内存中保留某种[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)(AST)。因此，首先构建生成的 C 代码的整个 AST，然后将其作为 C 语法发出。不要认为你的代码生成框架没有明确的 AST（换句话说，用一堆 printf 生成 C 代码是一场维护噩梦，你想要一些中间表示）。

其次，生成 C 代码的主要原因是利用良好的优化编译器（另一个原因是 C 的可移植性和普遍性）。如果您不关心生成代码的性能（并且 TCC 非常快地将 C 编译成非常幼稚和缓慢的机器代码），您可以使用其他一些方法，例如使用一些 JIT 库，如[Gnu 闪电](http://www.gnu.org/software/lightning/)（非常快速地生成慢速机器代码）、[Gnu Libjit](http://www.gnu.org/software/dotgnu/libjit-doc/libjit.html)或[ASMJIT](https://github.com/kobalicek/asmjit)（生成的机器代码更好一点）、[LLVM](http://llvm.org)或[GCCJIT](https://gcc.gnu.org/onlinedocs/jit/)（生成的机器代码很好，但生成时间与编译器相当）。

因此，如果您生成 C 代码并希望它快速运行，则 C 代码的编译时间不可忽略（因为您可能会派生一个`gcc -O -fPIC -shared` 命令以`foo.so` 从您生成的`foo.c`. 根据经验，生成 C 代码比编​​译它（使用`gcc -O`）花费的时间要少得多。在 MELT 中，C 代码的生成速度比 GCC 编译快 10 倍以上（通常快 30 倍）。但是 C 编译器所做的优化是值得的。

一旦你发布了你的 C 代码，将它的编译分叉到一个`.so`共享对象中，你就可以`dlopen`了。不要害羞，我的[manydl.c](http://starynkevitch.net/Basile/manydl.c)示例演示了在 Linux 上您可以 dlopen 大量共享对象（数十万个）。真正的瓶颈是生成的 C 代码的编译。实际上，您实际上并不需要`dlclose`在 Linux 上编写（除非您正在编写一个需要运行数月的服务器程序）；未使用的共享模块实际上可以保留`dlopen`，并且您主要是在泄漏进程地址空间（这是一种廉价的资源），因为大部分未使用的模块`.so`将被换出。`dlopen`很快就完成了，需要时间的是编译 C 源代码，因为您确实希望由 C 编译器完成优化。

您可以使用许多其他不同的方法，例如拥有一个字节码解释器并为该字节码生成，使用 Common Lisp（例如 Linux 上的 SBCL，它动态编译为机器代码）、LuaJit、Java、MetaOcaml 等。

正如其他人所建议的那样，您不太关心编写 C 文件的时间，实际上它会保留在文件系统缓存中（另请参阅[this](https://stackoverflow.com/a/7880788/841108)）。而且编写它比编译它要快得多，所以留在内存中是不值得的。如果您担心 I/O 时间，请使用一些*tmpfs 。*

## 附加物

您问

> Linux 上的库`.so`文件可以在运行时重新编译和*重新*加载吗？

当然是的：你应该派生一个命令来从生成的 C 代码构建库（例如 a `gcc -O -fPIC -shared generated.c -o generated.so`，但你可以间接地做到这一点，例如通过运行 a `make -j`，特别是如果`generated.so`它足够大以使其与`generated.c`在几个 C 生成的拆分相关文件！），然后你用[dlopen](http://linux.die.net/man/3/dlopen)动态加载你的库（给它一个完整的路径`/some/file/path/to/generated.so`，可能还有`RTLD_NOW`标志），你必须使用它`dlsym`来查找里面的相关符号。不要考虑*重新*加载（第二次）相同的`generated.so`，最好发出一个唯一的`generated1.c`（然后`generated2.c`等...）C文件，然后将其编译为一个*唯一* `generated1.so`的（第二次等`generated2.so`...）然后至`dlopen`它（这可以做几十万次）。您可能希望在发出的`generated*.c`文件中包含一些[构造](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)函数，这些构造函数将`dlopen`在`generated*.so`

您的基础应用程序应该已经定义了关于一组[dlsym](http://linux.die.net/man/3/dlsym)名称（通常是函数）以及如何调用它们的约定。它应该只在你的`generated*.so`直通`dlsym`函数指针中直接调用函数。在实践中，您会决定，例如，每个都`generated*.c`定义一个函数`void dynfoo(int)`，`int dynbar(int,int)`并使用and`dlsym`并通过函数指针调用这些函数指针（由 返回）。您还应该定义如何以及何时调用这些和的约定。您最好将您的基础应用程序链接起来，以便您的文件可以调用您的应用程序函数。`"dynfoo"``"dynbar"``dlsym``dynfoo``dynbar``-rdynamic``generated*.c`

您**不**希望您`generated*.so`重新**定义** *现有*名称。`malloc`例如，您不想重新定义`generated*.c`并期望所有堆分配函数都能神奇地使用您的新变体（这可能不起作用，即使它起作用，也会很危险）。

您可能不会打扰`dlclose`动态加载的共享对象，除非在应用程序清理和退出时（但我根本不打扰`dlclose`）。如果您执行`dlclose`一些动态加载的`generated*.so`文件，请确保其中没有使用任何内容：不存在指针，甚至不存在调用帧中的返回地址。

PS MELT 翻译器目前将 57KLOC 的 MELT 代码翻译成近 1770KLOC 的 C 代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T13:47:20.550

您最好的选择可能是[TCC](http://bellard.org/tcc/)编译器，它允许您完全做到这一点 --- 编译源代码、将其添加到您的程序、运行它，所有这些都无需接触文件。

对于更健壮但非基于 C 的解决方案，您可能应该查看[LLVM](http://llvm.org/)项目，该项目的作用大致相同，但从生成 JIT 的角度来看。您不必通过 C 语言，而是使用一种抽象的可移植机器代码，但生成的代码加载速度更快，并且正在更积极的开发中。

OTOH，如果您想手动完成所有操作，只需使用 gcc，编译 a`.so`然后自己加载它，`dlopen()`然后`dlclose()`执行您想要的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:47:24.773

您确定 C 是正确的答案吗？有各种解释语言，例如 Lua、Bigloo Scheme，甚至可能是 Python，它们都很好地嵌入到了现有的 C 应用程序中。您可以使用扩展语言编写动态部分，这将支持在运行时重新加载代码。

明显的缺点是性能——如果你绝对需要编译 C 的原始速度，那么这些可能是不行的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T15:40:58.857

如果要动态重新加载库，可以使用`dlopen`函数（参见 mans）。它打开一个库 .so 文件并返回一个指向它的 void* 指针，然后您可以使用 .so 获取指向库的任何函数/变量的指针`dlsym`。

要在内存中编译你的库，我认为你能做的最好的事情就是创建内存文件系统，如此处[所述](http://256.com/gray/docs/misc/linux_memory_tmp_filesystem_fs.shtml)。

# google-maps - Google Maps Api3，删除地点

> ID：12319338
> 
> 赞同：-2
> 
> 时间：2012-09-07T13:42:37.280
> 
> 标签：google-maps, google-maps-api-3

如何从地图（Google API 3）中删除所有地方，例如政府、商店？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:11:20.057

使用[样式地图](https://developers.google.com/maps/documentation/javascript/styling)。关闭 POI 标签。

```
[
  {
    "featureType": "poi",
    "elementType": "labels",
    "stylers": [
      { "visibility": "off" }
    ]
  }
] 
```

# php - file_get_contents 身份验证给出“401 访问被拒绝错误”

> ID：12319339
> 
> 赞同：0
> 
> 时间：2012-09-07T13:42:38.630
> 
> 标签：php, cpanel, http-status-code-401

我正在尝试`cpanel`使用以下评论创建数据库

```
$result =file_get_contents("http://$cpanel_user:$cpanel_password@$cpanel_host:2082/frontend/$cpanel_skin/sql/adddb.html?db=$db_name") 
```

回显$结果；

这个命令给了我`HTTP request failed! HTTP/1.1 401 Access Denied`错误。我使用了正确的密码和用户名进行连接。*当我在浏览器的 url 字段中给出这个 url（这种格式的 url）时，我能够创建数据库*。

有人可以解释似乎是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:10:04.997

这不是使用 cPanel 创建数据库的正确方法。我相信您正在尝试在 cPanel 中复制表单以创建数据库，这是不正确的。

此外，您将无法使用您的 cPanel 用户名和密码创建数据库。我认为您应该参考[此线程](http://forums.cpanel.net/f42/create-database-without-login-cpanel-130825.html)来解决您的问题。

# .htaccess - Zend App 部署后不工作。只能访问主页

> ID：12319346
> 
> 赞同：2
> 
> 时间：2012-09-07T13:42:53.140
> 
> 标签：.htaccess, zend-framework, deployment, webserver, web-deployment

我可以访问主页并可以从数据库中获取数据。那里一切似乎都很好。但是当我尝试从我的应用程序转到另一个页面时，我被重定向到`404 error page`. 悬停链接时显示在浏览器左下角的 URL 似乎没问题。这是应该的。

我试图从以下位置更改`.htaccess`服务器上的文件：

```
# Do not remove this line, otherwise mod_rewrite rules will stop working

RewriteBase / 
```

至：

```
# Do not remove this line, otherwise mod_rewrite rules will stop working

RewriteBase /

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

但它又失败了。尝试了不同的组合。例如更改`RewriteBase /`为`RewriteBase /projectname/public/`或`RewriteBase /projectname/`。仍然没有成功。

当然，我不确定是否`.htaccess`是问题所在。可能会有所不同，但我不知道是什么...

在 localhost 上，应用程序正在运行，并且那里一切正常。

**编辑：**经过我尝试的几次更改，我终于让它工作了。

## ***这是解决方案：***

我保留了服务器的 .htaccess 文件。所以它只有`RewriteBase /`它。然后在我的 .htaccess 文件的第一行（在`projectname/public`文件夹中）我添加了这个：

```
RewriteBase /projectname/public 
```

现在一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:43:25.563

## **解决方案**

保持服务器的 .htaccess 文件不变。所以只有`RewriteBase /`在里面。然后在应用程序的 .htaccess 文件（位于`projectname/public`文件夹中）的第一行添加以下行：

```
RewriteBase /projectname/public 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T23:12:05.840

您的域名（您的网址）必须指向`/projectname/public/`并且您不需要在`.htaccess`文件中添加任何内容。例如，这是我自己的`.htaccess`文件（通过创建我的项目时生成`Zend_Tool`）。我不需要`RewriteBase`！：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]

SetEnv APPLICATION_ENV development 
```

# c++ - C++ 增量运算符重载

> ID：12319358
> 
> 赞同：2
> 
> 时间：2012-09-07T13:43:43.147
> 
> 标签：c++, operator-overloading

我正忙着为 C++ 中的 Comp Sci 模块做作业，我只是对其中一个问题有点困惑。它要求给出重载增量运算符的 3 个实现：

1.  使用在上一个问题中编码的成员函数 Adjust()。
2.  将重载运算符实现为友元函数。
3.  将重载运算符实现为成员函数。

现在我理解了我认为的运算符重载的概念，没关系。但我其实不太确定第一个，使用现有的成员函数 Adjust()。因为如果我重载并且只是调用另一个函数，它肯定是一个朋友或一个调用另一个成员函数的成员函数，如果你知道我的意思的话。无论如何，任何帮助将不胜感激。下面是我的 2 号和 3 号代码，仅供参考。

```
//Friend Function
friend Chequebook operator ++(const Chequebook &c); //Declaration in class.
Chequebook operator++(const Chequebook &c) //Function
{
    return Chequebook(c.Balance+100);
}

//Member Function
Chequebook operator++(); //Declaration in class.
Chequebook Chequebook::operator++() //Function.
{
    return Chequebook(Balance+100);
} 
```

很抱歉代码中的错误。这应该是预增量运算符重载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:57:36.250

我将第一个问题解释为“根据之前编码的成员函数 Adjust 实现 operator++”。

Adjust 可能是一个公共函数，因此不需要 operator++ 的成员实现。您将其实现为

```
Chequebook& operator++(Chequebook& i_lhs)
  {
  i_lhs.Adjust(1); // Or whatever Adjust actually takes as parameters.
  return i_lhs;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:00:02.567

您可能误解了增量运算符的作用，或者您没有发布作业的全文。

它修改对象。它可以是成员和非成员。它可以是前缀和后缀。以下是通常如何实现前缀 (++x) 增量的示例：

```
class X 
{
  int i;
public:

  // member prefix ++x
  X& operator++() { ++i; return *this;}
};

class Y 
{ 
  int i;
public:
  void adjust() {++i;}
};

// non-member prefix ++y
Y& operator++(Y& y) { y.adjust(); return y;}

class Z 
{ 
  int i;
public:
  // friend prefix ++z
  friend Z& operator++(Z& z) { z.i++; return z;}
}; 
```

后缀增量（x++）不同，应该有额外的 int 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:59:01.520

好吧，您的 #2 尝试显然被破坏了，因为您实际上根本没有更改对象，这不是 的语义`++`，无论是 pre 还是 post。此外，您似乎正在从余额中*减去以**增加*？

# database - 如何提高 db4o 中的查询速度？

> ID：12319361
> 
> 赞同：0
> 
> 时间：2012-09-07T13:43:56.647
> 
> 标签：database, optimization, db4o, large-data

[当 db4o 数据库有 15000 多个对象时导致 OutOfMemoryError](https://stackoverflow.com/questions/12142625/outofmemoryerror-caused-when-db4o-databse-has-15000-objects)

我的问题是参考我之前的问题（上）。对于相同的 PostedMessage 模型和相同的查询。

对于 100,000 个 PostedMessage 对象，查询需要大约 1243 毫秒才能返回前 20 个 PostedMessage。

现在，我在 db4o 中保存了 1,000,000 个 PostedMessage 对象。相同的查询花费了 342,132 毫秒。这是非线性的高。

如何优化查询速度？

FYR：timeSent 和 timeReceived 是索引字段。我正在使用 SNAPSHOT 查询模式。我没有使用 TA/TP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:50:18.190

你对结果进行排序吗？不幸的是 db4o 不使用索引进行排序/orderBy。这意味着它将使用 O(n*log(n)) 运行常规排序算法。它不会线性缩放。

db4o 也不支持 TOP 运算符。这意味着即使没有排序，将 id 复制到结果集中也需要相当多的时间，即使您之后从未阅读过实体。

因此，除了尝试使用一些减少结果大小的标准外，没有真正好的解决方案。

一些冒险的人可能会使用不同的[查询评估](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/configuration/common/query_modes.htm)，但个人不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:31:10.380

@Gamlor不，我根本没有排序。代码如下：

```
public static ObjectSet<PostedMessage> getMessagesBetweenDates(
        Calendar after,
        Calendar before,
        ObjectContainer db) {

    if (after == null || before == null || db == null) {
        return null;
    }
    Query q = db.query(); //db is pre-configured to use SNAPSHOT mode.
    q.constrain(PostedMessage.class);
    Constraint from = q.descend("timeRecieved").constrain(new Long(after.getTimeInMillis())).greater().equal();
    q.descend("timeRecieved").constrain(new Long(before.getTimeInMillis())).smaller().equal().and(from);
    ObjectSet<EmailMessage> results = q.execute();
    return results;
} 
```

该方法的参数如下：

之后 = 2011 年 9 月 13 日 10:55:55

之前 = 2011 年 9 月 13 日 10:56:10

而且我希望在“之后”和“之前”之间只返回 10 个 PostedMessages。（我正在生成虚拟 PostedMessage，timeReceived 每次增加 1 秒。）

# eclipse - 如何在eclipse中设置系统范围的设置

> ID：12319364
> 
> 赞同：1
> 
> 时间：2012-09-07T13:44:08.340
> 
> 标签：eclipse, ubuntu, configuration

对于多用户桌面，我需要在 Eclipse 中设置一些首选项。

例如，我需要默认激活这两个首选项：General>Workspace>Refresh using native hooks or polling General>Workspace>Refresh on access

我发现通过检查它们并关闭 Eclipse，它被保存到`<workspace>/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.core.resources.prefs`其中包含：

```
eclipse.preferences.version=1
refresh.enabled=true
refresh.lightweight.enabled=true
version=1 
```

在系统范围内设置它的方法是什么？所有用户，所有工作区。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T14:38:28.393

使用[Google Workspace Mechanic](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/)共享这些设置。[或者让Yoxos](https://yoxos.eclipsesource.com/)管理您的 IDE 和工作区（除了偏好之外，它还可以做很多其他事情）。

在纯 Eclipse 中，仅通过配置无法做到这一点。

# asp.net-mvc - 我可以使用 MVC4 将通用代码从方法移动到基本控制器吗？

> ID：12319373
> 
> 赞同：1
> 
> 时间：2012-09-07T13:45:04.750
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在五个控制器中有以下方法：

```
 public ActionResult Index(string page, string title) {
        var vm = new BaseViewModel(); 
        vm.Role = GetRoleNumber(User);
        vm.MenuItems = contentService.GetMenuItems("00", vm.Role);
        vm.Menu = pageService.GetMenu(vm.MenuItems, Request.FilePath);

        // difference code here for each controller
    } 
```

我所有的控制器都继承自一个名为 BaseController 的控制器。

有没有办法可以将此代码移动到我的基本控制器中并调用它？如果是这样，那么实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:54:42.737

这是存储库模式的确切候选者。您可以在您的 Repository 类中创建所有这些并在每个 ActionResult 方法中调用该方法

```
public void Repository : IRepository
{
   public GetMyBaseViewModel()
   {
    //..implementation here
   }
}

public interface IRepository
{
  BaseViewModel GetMyBaseViewModel();
} 
```

....在您的控制器中：...

```
public class HomeController : Controller
    {
        //private repository member
        private readonly IRepository _repository;

        //controller constructors
        //injecting the repository here
        public HomeController() : this(new Repository()) 
        {

        }
        public HomeController(IRepository repository)
        {
          _repository = repository;
        }

        //methods that call the repository for the vm data context
        public ActionResult Index()
        {
            var vm = _repository.GetMyBaseViewModel();
            return View();
        }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T13:48:43.417

您可以`ActionResult`在基本控制器中创建一个抽象方法：

```
protected BaseViewModel vm;

public ActionResult Index(string page, string title) {
    vm = new BaseViewModel(); 
    vm.Role = GetRoleNumber(User);
    vm.MenuItems = contentService.GetMenuItems("00", vm.Role);
    vm.Menu = pageService.GetMenu(vm.MenuItems, Request.FilePath);

    try
    {
        return IndexSupplemental();
    }
    catch(NotImplementedException ex)
    {
        // Log and move on; the abstract method is not implemented.
    }

    return View();
}

protected abstract ActionResult IndexSupplemental(); 
```

然后每个控制器都必须实现这个抽象方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:53:14.703

您可以将其移动到基本控制器中的方法中，并在需要时调用它。

```
public class BaseController : Controller
{
    protected BaseViewModel _viewModel;

    public void InitializeViewModel() {

        vm = new BaseViewModel(); 
        vm.Role = GetRoleNumber(User);
        vm.MenuItems = contentService.GetMenuItems("00", vm.Role);
        vm.Menu = pageService.GetMenu(vm.MenuItems, Request.FilePath);
    }
} 
```

一个例子：

```
public class MyController : BaseController
{
    public ActionResult Index(string page, string title)
    {
        InitializeViewModel();

        DoSomething(_viewModel);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T14:01:46.010

在我的项目中，我的大部分操作都会返回一个继承自 BaseViewModel 的视图模型，但也有例外。所以我在 ControllerBase 中所做的是这样的：

```
 protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        base.OnActionExecuted(filterContext);
        var authData = GetUserData();
        if (authData != null)
        {
            var result = filterContext.Result as ViewResult;
            if (result != null)
            {
                var vm = result.Model as ViewModelBase;
                if (vm != null)
                {
                    vm.UserId = authData.UserID;
                    vm.UserName = User.Identity.Name;
                }
            }

        }
    } 
```

否则你可以做的，因为我希望你的 ViewModel 是不同的类型，是在 ControllerBase 中创建一个类似的方法：

**注意**这不符合您的要求。我只是展示了一种使用一些初始化代码创建派生类的新实例的技术。

```
 protected T Command<T>() where T : BaseCommand, new()
    {
        var command = new T();
        command.IP = Request.UserHostAddress;
        if (User != null && User.Identity.IsAuthenticated)
        {

            var authData = GetUserData();
            if (authData != null)
            {
                command.UserId = authData.UserID;

            }
        }
        return command;
    } 
```

哪个将用作

```
var command = Command<CreateUserCommand>(); 
```

# c# - 绑定到 DependencyProperty 仅适用于“MyValue”而非“{Binding PropertyHoldingMyValue}”

> ID：12319374
> 
> 赞同：2
> 
> 时间：2012-09-07T13:45:19.237
> 
> 标签：c#, silverlight, data-binding, dependency-properties

我正在创建一个带有标题属性的自定义“PageHeaderControl”用户控件：

```
 public partial class PageHeaderControl: UserControl
 {
    public static readonly DependencyProperty HeaderProperty =
        DependencyProperty.Register("Header",
                        typeof(string), typeof(PageHeaderControl),
                        new PropertyMetadata(""));

    public string Header
    {
        get { return GetValue(HeaderProperty) as string; }
        set { SetValue(HeaderProperty, value); }
    }

 } 
```

在该控件的 XAML 中，我有：

```
<sdk:Label Content="{Binding Header,Mode=TwoWay}" /> 
```

**现在解决问题：**当我创建控件时，绑定它仅适用于执行此操作：

```
<my:PageHeaderControl Header="This is my page header" /> 
```

这样做是行不通`PageHeader`的，我的 ViewModel 中保存标头值的属性在哪里：

```
<my:PageHeaderControl Header="{Binding PageHeader,Mode=TwoWay}" /> 
```

我想也许我的属性搞砸了，但这也有效：

```
<TextBlock Text="{Binding PageHeader,Mode=TwoWay}" /> 
```

关于问题可能是什么的任何想法！

**非常感谢！！！**

**编辑：**

在我的 ViewModel 中，PageHeader 是这样的：

```
private string _pageHeader = "This is my page header";
public string PageHeader
{
    get
    {
        return _pageHeader;
    }
    set
    {
        _pageHeader = value;
        RaisePropertyChanged("PageHeader");
    }
} 
```

**编辑2：**

当我在我的属性的“get”中放置一个断点时`PageHeader`，它根本不会被命中，除非我在 TextBlock 中添加......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:45:09.763

如果我理解正确，您正在尝试将控件的 XAML 标记中元素的属性绑定到控件本身的属性。

如果是这种情况，请查看以下内容是否对您有帮助。

PageHeaderControl.xaml：

```
<UserControl x:Class="TryElementBinding.PageHeaderControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
x:Name = "MyControl"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400">

<Grid x:Name="LayoutRoot" Background="White">
    <TextBlock Text="{Binding Header, ElementName=MyControl}"></TextBlock>
</Grid> 
```

PageHeaderControl.xaml.cs：

```
public partial class PageHeaderControl : UserControl
{
    public static readonly DependencyProperty HeaderProperty =
            DependencyProperty.Register("Header", typeof(string), typeof(PageHeaderControl), new PropertyMetadata(""));

    public string Header
    {
        get
        {
            return GetValue(HeaderProperty) as string;
        }
        set
        {
            SetValue(HeaderProperty, value);
        }
    }

    public PageHeaderControl()
    {
        InitializeComponent();
    }
} 
```

ViewModel.cs：

```
public class ViewModel : INotifyPropertyChanged
{
    private string _pageHeader = "This is my page header";

    public string PageHeader
    {
        get
        {
            return _pageHeader;
        }
        set
        {
            _pageHeader = value;
            PropertyChanged(this, new PropertyChangedEventArgs("PageHeader"));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

MainPage.xaml：

```
<Grid x:Name="LayoutRoot" Background="White">
    <my:PageHeaderControl Header="{Binding PageHeader, Mode=TwoWay}"></my:PageHeaderControl>
</Grid> 
```

MainPage.xaml.cs：

```
public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();
        DataContext = new ViewModel();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:54:20.583

我有点困惑，我认为您错过了 Binding 内联表达式的语法。

在“{Binding”之后是您的财产的路径。“PageHeader”是您的财产的路径吗？

我想你的意思是：

```
<my:PageHeader Header="{Binding PageHeader, Mode=TwoWay}" />

<TextBlock Text="{Binding PageHeader, Mode=TwoWay}" /> 
```

问题是绑定表达式仅在您使用 SetValue 方法设置属性值并通知父 DependencyObject 特定属性已更改时才有效！您应该使用 DependencyProperty 对其进行双向绑定，或者在您的类中实现 System.ComponentModel.INotifyPropertyChange 接口，并通过在接口中调用 PropertyChanged 事件手动通知 Binding 对象。

PageHeader 属性的定义应该是这样的：

```
public static readonly DependencyProperty PageHeaderProperty = DependencyProperty.Register("PageHeader", typeof(string), typeof(YOUROWNER), new PropertyMetadata(""));

public string PageHeader
{
    get { return GetValue(PageHeaderProperty) as string; }
    set { SetValue(PageHeaderProperty, value); }
} 
```

干杯

# php - 联系表单上来自字段中的电子邮件地址未在电子邮件标题中显示为“发件人”

> ID：12319381
> 
> 赞同：0
> 
> 时间：2012-09-07T13:45:49.773
> 
> 标签：php, forms, field

iv 在表单代码中添加了标题字段，但是当我收到电子邮件时，电子邮件中的“发件人”字段显示乱码，而不是发送邮件的人的电子邮件地址。这是我的消息处理代码：

```
<?php session_start();
if(isset($_POST['Submit'])) {   if( $_SESSION['chapcha_code'] == $_POST['chapcha_code'] && !empty($_SESSION['chapcha_code'] ) ) {
$youremail = 'I removed my address for privacy on stack overflow';
$fromsubject = 'A message from your website';
$title = $_POST['title'];
$fname = $_POST['fname'];
$lname = $_POST['lname'];
$mail = $_POST['mail'];
$address = $_POST['address']; 
$city = $_POST['city']; 
$zip = $_POST['zip']; 
$country = $_POST['country']; 
$phone = $_POST['phone']; 
$subject = $_POST['subject']; 
$message = $_POST['message']; 
$headers = "From: $nome <$mail>\r\n";

    $to = $youremail; 
    $mailsubject = 'Message received from'.$fromsubject.' Contact Page';
    $body = $fromsubject.'

    The person that contacted you is  '.$fname.' '.$lname.'
     Address: '.$address.'
    '.$city.', '.$zip.', '.$country.'
     Phone Number: '.$phone.'
     E-mail: '.$mail.'
     Subject: '.$subject.'

     Message: 
     '.$message.'

    |---------END MESSAGE----------|'; 
echo "Thank you for your feedback. I will contact you shortly if needed.<br/>Go to <a href='/index.php'>Home Page</a>"; 
                                mail($to, $subject, $body);
        unset($_SESSION['chapcha_code']);
   } else {
        echo 'Sorry, you have provided an invalid security code';
   }
 } else { 
echo "You must write a message. </br> Please go to <a href='/contact.php'>Contact Page</a>"; 
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:48:05.777

您没有`$nome`在代码中的任何地方声明，也没有`$mail`在：

```
$headers = "From: $nome <$mail>\r\n"; 
```

除此之外，正[如此评论](https://stackoverflow.com/questions/12319381/email-address-in-from-field-on-contact-form-not-showing-in-email-header-as-from/12319426#comment16532318_12319381)所提到的，您没有将标头传递给邮件功能。见[邮件函数](http://php.net/manual/en/function.mail.php)的第四个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:05:40.723

你在这里声明了你的 ^From: header`：

```
$headers = "From: $nome <$mail>\r\n"; 
```

但是当你打电话时它不使用`mail()`

```
mail($to, $subject, $body); 
```

您需要`$headers`作为第四个参数传递。否则标题不会生效

```
mail($to, $subject, $body, $headers); 
```

# powershell - 使用脚本运行时的文件系统观察程序事件

> ID：12319382
> 
> 赞同：0
> 
> 时间：2012-09-07T13:45:50.313
> 
> 标签：powershell, powershell-2.0, filesystemwatcher

嗨，我已经安装了 PowerShellPack，并且正在使用 FileSystem 观察程序模块，但是当我将文件作为脚本保护并执行它时出现问题。

问题是，如果您执行它运行的脚本并监视文件夹以进行更改，但是一旦脚本停止（到达执行结束），则不再监视文件夹。我试图将所有内容都放在一个 do while 循环中，但这似乎不起作用。

[PowerShellPack 安装](http://archive.msdn.microsoft.com/PowerShellPack)

```
Import-Module -Name FileSystem

$TempCopyFolder = "c:\test"
$PatchStorage = "c:\testpatch"

Start-FileSystemWatcher -File $TempCopyFolder  -Do {   
    $SearchPath = $File
    $PatchesPath = $PatchStorage
    $NewFolderFullPath = "$($eventArgs.FullPath)"
    $NewFolderName = "$($eventArgs.Name)"
    $PathToCheck = "$PatchesPath\$NewFolderName"

    #Check if it is a filde or folder 
    switch ($ObjectType) 
           {{((Test-Path $NewFolderFullPath -PathType Container) -eq $true)}{$ObjectType = 1;break}
           {((Test-Path  $NewFolderFullPath -PathType Leaf) -eq $true)}{$ObjectType = 2;break}} 

    # Its a folder so lets check if we have a folder in the $PatchesPath already
    IF($ObjectType -eq 1){
       IF(!(Test-Path -LiteralPath $PathToCheck -EA 0))
           {
            sleep -Seconds 3

            #Make a new directory where we store the patches
              New-item -Path $PatchesPath -Name $NewFolderName -ItemType directory

            #Make a folde in the folder for TC1
            $TcFolder=$NewFolderName + '_1'
            $NewPatchesPath = "$PatchesPath\$NewFolderName"

            New-item -path $NewPatchesPath -Name $TcFolder -ItemType directory

            $CopySrc = $NewFolderFullPath
            $CopyDes = "$NewPatchesPath\$TcFolder"

           }

       # There is a folder there so lets get the next number
       Else{

            $HighNumber = Get-ChildItem -Path $PathToCheck | select -Last 1

            #Core_SpanishLoginAttemptsConfiguration_Patch_03                                       

            $NewNumber = [int](Select-String -InputObject $HighNumber.Name -Pattern "(\d\d|\d)" | % { $_.Matches } | % { $_.Value } )+1
            $TcFolder= $NewFolderName + '_' + $NewNumber

            $NewPatchesPath = "$PatchesPath\$NewFolderName"

            $CopySrc = $NewFolderFullPath
            $CopyDes = "$NewPatchesPath\$TcFolder"
           }

         #Lets copy the files to their new home now that we know where every thing goes 

         $robocopy = "robocopy.exe"
         $arguments = '''' + $CopySrc + '''' +' '+ ''''+ $CopyDes + '''' + '/E'

         Invoke-Expression  -Command "$robocopy $arguments"

         Do {sleep -Seconds 1;$p = Get-Process "robo*" -ErrorAction SilentlyContinue}
             While($p -ne $null)

        #Now lets check every thing copyed 

        $RefObj = Get-ChildItem -LiteralPath $NewFolderFullPath -Recurse
        $DifObj = Get-ChildItem -LiteralPath $CopyDes -Recurse

        IF(Compare-Object -ReferenceObject $RefObj -DifferenceObject $DifObj)
           {write-host "Fail"}
        Else{# Now lets delete the source

             Remove-Item -LiteralPath $CopySrc -Force -Recurse
             }     
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:00:14.773

为此，您不需要附加模块或 WMI。只需设置`FileSystemWatcher`您自己并注册一个活动。当然，它的代码要多一些，但至少你知道发生了什么。:)

```
$watcher = new-object System.IO.FileSystemWatcher
$watcher.Path = 'c:\logs'
$watcher.Filter = '*.log'  # whatever you need
$watcher.IncludeSubDirectories = $true  # if needed
$watcher.EnableRaisingEvents = $true

Register-ObjectEvent $watcher -EventName Changed -SourceIdentifier 'Watcher' -Action { param($sender, $eventArgs) 
   <process event here>
} 
```

完成后：

```
Unregister-Event -SourceIdentifier 'Watcher' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:47:16.600

这是您可能需要的东西：[Monitoring file creation using WMI and PowerEvents module](http://www.ravichaganti.com/blog/?p=1951)

如果您知道如何在 WMI 中创建永久事件，则 PowerEvents 模块不是必需的。有关这方面的更多信息，请通过 PowerShell 查看我关于 WQL 的电子书：[http ://www.ravichaganti.com/blog/?page_id=2134](http://www.ravichaganti.com/blog/?page_id=2134)

# javascript - 在 JavaScript 中延迟后弹奏钢琴键

> ID：12319383
> 
> 赞同：2
> 
> 时间：2012-09-07T13:45:52.467
> 
> 标签：javascript, arrays, keypress

我试图编写一个脚本，通过使用 JavaScript 为我“单击”这些键，在[这个在线键盘上“播放”一些键。](http://www.p-ano.com/p-ano.html)

# 编码

```
//sample array to iterate over
var keys_ = ['et', 'dst', 'et', 'dst', 'et', 'b', 'dt', 'ct', 'a', ...];

//handles the clicking only
function playKey(id_) {
    key_ = document.getElementById(id_);
    key_.click(); }

//iterates over the array
function playKeys(keys_) {
    delay = 1000;
    for (i = 0; i < keys_.length; i++) {
        console.log(delay);
        key_ = keys_[i];
        console.log(key_);
        window.setTimeout('playKey(key_)', delay);
        delay += 1000; 
        } 
    } 
```

# 输出

控制台抛出以下错误：

> 1000
> et
> 2000
> dst
> ...
> 9000 未定义
> 的 未捕获类型错误：无法读取 null p-ano.html:142 的属性“样式”：142 8 未捕获类型错误：无法调用 null 的方法“点击”

如您所见，`delay`和`key_`值是完全正确的。但是当我执行此操作时，在一秒钟后（即第^(一次)超时），所有键似乎都同时播放，然后什么也没有发生。

我究竟做错了什么？

*PS：我看到过类似的其他问题[并](https://stackoverflow.com/questions/11492116/how-to-create-a-javascript-that-clicks-a-particular-url-after-a-certain-amount-o)搜索了谷歌和其他论坛，无济于事*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:54:46.737

了解闭包。

```
window.setTimeout(function(){ playKey(key_); }, delay); 
```

并且您对全局变量和本地变量有疑问。使用变量！

我写它的方式是

```
( function() {
    var keys_ = ['et', 'dst', 'et', 'dst', 'et', 'b', 'dt', 'ct', 'a'],
        delay = 250,
        currentIndex = 0,
        playKeys = function () {
            document.getElementById(keys_[currentIndex]).click();        
            currentIndex++;
            if (currentIndex<keys_.length) {
                window.setTimeout(playKeys,delay);
            }    
        };    
    playKeys();
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:22:08.450

嗯？已经有一个名为`playstr()`.

```
function playstr(instr) {
    keystr = instr;
    time = 0;
    k = 0;
    for (i = 0; i < keystr.length; i++) {
        setTimeout("playkbd(keystr[k])", time += 50);
        setTimeout("k++", time + 50);
        setTimeout("cb()", time += 200);
    }
}​ 
```

尝试按“z”、“x”或“m”来运行它们。

```
if (key=="z")
  playstr("wetyuyuju     ujo..juyyuj..uyttfy..yuytft     ujp..o;poko     opoj..uy\
  uju     ujo..juyyuj..uyttfy..yuytft     w e t y u y uoj u ")

if (key=="x")
  playstr("tgtdtgtdtgghhgtdd              tgtdtgtdtgghhgtdd              djjjkjhh\
  jhghjhg djjjkjhhjhghjhg djjjkjhhjhghjhg djjjkjhhjh     tgtdtgtdtgghhgtdd")

if (key=="m")
  playstr("         k j y j k j y f e f e a e f y j k j y j k j y f e f e a e f y\
   j k j y j k j y f e f e a e f y j k j y j k j y f e f e a e f y j ") 
```

我正在运行[一面镜子](http://tinabama.com/p-ano/p-ano.html)，想知道如何自动播放和弦。

```
// F F 1 F A N F A R E 

if (key==".") {
  setTimeout("playstr('u y u yo ok ok ku y g yf   u y u yo ok ok ku y u op ')",100)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:52:54.303

我假设您发布的代码正是您正在运行的代码。在这种情况下，三个点是非法的。

```
keys_ = ['et', 'dst', 'et', 'dst', 'et', 'b', 'dt', 'ct', 'a', ...] 
```

尝试删除它们

```
keys_ = ['et', 'dst', 'et', 'dst', 'et', 'b', 'dt', 'ct', 'a'] 
```

另外，作为提示，尝试编写更简洁的 javascript。`var`在声明变量之前使用。`;`用分号结束你的陈述。

# scala - Angularjs + OAuth + Play 2.0

> ID：12319385
> 
> 赞同：7
> 
> 时间：2012-09-07T13:45:59.990
> 
> 标签：scala, oauth, facebook-javascript-sdk, playframework-2.0, angularjs

我正在学习 Angularjs 为新项目创建单页应用程序。后端将采用 Scala 和 Play 2.0 框架，采用 REST 风格的 API。我想使用 FB、Twitter、Google，OpenId 帐户有一种用户注册和登录的方式，但我不太了解 OAuth 以及如何使其与 Angular 和 Play 2.0 一起使用（当然我已开始阅读 OAuth）。

您对如何实现这一目标有任何想法吗？是否有任何库/工具来处理它？还是教程和例子？

编辑：正如 Pere Villega 所指出的，[SecureSocial](https://github.com/jaliss/securesocial)在 Play 方面似乎是一个不错的选择，但它遵循 MVC 模式（在服务器上生成的视图），而不是 angularjs + play，后者更多是 MVP（或 MVVM）+ REST api服务器。对于 Angular，我找到了[Sapling](http://sapling.scotchmedia.com/)。我必须弄清楚如何整合2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:43:40.167

看看[http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application](http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application)

它向您展示了如何从 Angular 的角度处理访问安全资源，所有这些都是从客户端触发的。我认为您可以在服务器上使用 Secure Social`SecureAction`以及 Play 中的所有 REST API 背后的操作！控制器。

我需要做类似的事情，但现在我将使用 LDAP，因为它是我正在构建的企业应用程序。也许我会考虑为 Secure Social 贡献 LDAP/AD。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:09:02.693

使用[安全社交](https://github.com/jaliss/securesocial)。自切片面包以来的最佳发明。真实的故事 ;）

# php - 如何在 Facebook 画布应用中检查所需的权限？

> ID：12319391
> 
> 赞同：-1
> 
> 时间：2012-09-07T13:46:40.023
> 
> 标签：php, facebook, facebook-graph-api, canvas, permissions

Facebook 画布应用程序需要做的基本事情之一是检查权限并要求用户授权他们访问页面。有什么好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:46:40.023

这是我为自己的应用程序开发的系统。您可以从以下位置下载代码：

[http://developsocialapps.com/permissions-and-basic-graph-api-calls/](http://developsocialapps.com/permissions-and-basic-graph-api-calls/)

这是完成繁重工作的图书馆。检查权限的主要方法是**requireAuthorization**。这将首先使用**initOauthUserFromSignedRequest**来查看是否有 signed_request 以查看使用是否经过身份验证并设置 userid 和 token。然后它将使用**hasAllPermissions**从图形 API 检查我/权限，以查看用户是否具有所有必需的权限。因为我不想在每次页面加载时都点击这个 API，所以我将权限存储在 cookie 中。如果用户没有权限或未被授权，它会将用户定向到授权对话框。

```
class FacebookApp {               

    public $appId;
    private $appSecret;
    private $nameSpace;
    public $userId;
    public $token;
    public $tokenExpires;

    // get your own from http://www.w3.org/P3P/
    public $p3p = 'P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'; 

    /*  construct object 
        appid, secret, and namespace from app settings  */
    public function __construct($id, $secret, $namespace) {
        $this->appId = $id;
        $this->appSecret = $secret;
        $this->nameSpace = $namespace;
    }

    /*  return json data from a graph api object or false   */
    function getGraphObject($object) {
        $return = false;
        $url = $this->getGraphUrl($object);
        $response = $this->makeCurlRequest($url);
        if ($repsonse !== false) {
            $return = json_decode($response,true);
            if (isset($return['error'])) {
                $return = false;
                // the request return an error, you can debug here
            }
        }
        return $return;
    }

    /*  constructs graphs url   */
    public function getGraphUrl($object,$limit=false) {
        $url = "https://graph.facebook.com/".$object;
        if (strpos($url,"?") === false) $url .= "?";
        else $url .= "&";
        $url .= "access_token=".$this->token;
        if ($limit !== false) $url .= "&limit=".$limit;
        return $url;
    }

    /*  uses curl to get a url  */
    public function makeCurlRequest($url) { 
        $return = false;
        try {
            $ch = curl_init(); 
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_HEADER, false); 
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
            $response = curl_exec($ch); 
            $responseInfo = curl_getinfo($ch); 
            curl_close($ch); 
            if ($responseInfo['http_code']==200) { 
                $return = $response; 
            } 
        } catch (Exception $e) {
            $return = false; 
        }
        return $return;
    } 

    /*  sets userid and token from signed request, return true or false if authorized   */
    public function initOauthUserFromSignedRequest() {
        $authorized = false;
        if (isset($_REQUEST['signed_request'])) {
            $data = $this->parseSignedRequest($_REQUEST['signed_request']);
            if ($data !== false) {
                if (isset($data['user_id']) && isset($data['oauth_token'])) {
                    $this->userId = $data['user_id'];
                    $this->token = $data['oauth_token'];
                    $this->tokenExpires = $data['expires'];
                    $authorized = true;
                }
            }
        }
        return $authorized;
    }

    /*  require user to authorize and have permissions for page
        redirect_uri = url to return after user has authorized like redirect.php
        success_uri = url to redirect to on successful authorization like mypage.php
        scope = comma separted list of permissions  */
    function requireAuthorization($redirect_uri,$success_uri=false,$scope=false) {
        if ($success_uri === false) {
            // if no success_uri use current page, all files for app must be in same directory
            $success_uri = substr($_SERVER['REQUEST_URI'],strrpos($_SERVER['REQUEST_URI'],"/")+1); 
        }
        $this->setCookie ("success_uri",$success_uri,0); // we will use this on the redirect_uri page
        $requireauth = true;
        if ($this->initOauthUserFromSignedRequest()) { // user has authorized
            if (($scope === false) || ($this->hasAllPermissions($scope))) { // now check for perms
                $requireauth = false;
            }
        }
        if ($requireauth) { // user is either not authorized or doesn't have permissions
            $url = $this->getAuthUrl($this->getCanvasUrl($redirect_uri),$scope);
            echo "<html>\n<body>\n<script>\ntop.location.href='".$url."';\n</script></body></html>";
            exit();
        }
    }

    /*  checks to see if has permissions, scope is comma separated list */
    public function hasAllPermissions($scope) {
        $return = false;
        $cookiename = "permissions_".$this->appId."_".$this->userId;
        $requiredpermissions = explode(",",$scope);
        // first check cookie
        if (isset($_COOKIE[$cookiename])) {
            $return = true;
            $permissions = json_decode($_COOKIE[$cookiename],true);
            foreach ($requiredpermissions as $perm) {
                if ($permissions['data'][0][$perm] != 1) {
                    $return = false;
                    break;
                }
            }
        }
        // if didn't have all in cookie, then see if it is in graph 
        if ($return == false) {
            $permissions = $this->getGraphObject("me/permissions");
            if ($permissions !== false) {
                $this->setCookie($cookiename,json_encode($permissions),0);
                $return = true;
                foreach ($requiredpermissions as $perm) {
                    if ($permissions['data'][0][$perm] != 1) {
                        $return = false;
                        break;
                    }
                }   
            }
        }
        return $return;
    }

    /*  sets a cookie with p3p headers  */
    public function setCookie($name,$value,$expires) {
        if ($this->p3p != '') {
            header($this->p3p);
            $this->p3p = '';
        }
        setcookie ($name,$value,$expires,"/"); 
    }

    /*  returns url for oauth authorization
        redirect_uri = url to return after user has authorized
        scope = comma separted list of permissions  */
    public function getAuthUrl($redirect_uri,$scope=false) {
        $url = "https://www.facebook.com/dialog/oauth/?client_id=".$this->appId."&redirect_uri=".rawurlencode($redirect_uri);
        if ($scope !== false) $url .= "&scope=".rawurlencode($scope);
        return $url;
    }

    /* returns url to app canvas page, $page like mypage.php?foo=bar    */
    public function getCanvasUrl($page) {
        if ($_SERVER['HTTPS'] == "on") $protocol = "https";
        else $protocol = "http";
        return $protocol."://apps.facebook.com/".$this->nameSpace."/".$page;
    }

    /*  parses signed_request parameter and returns data object, returns false if sigs don't match  */
    public function parseSignedRequest($signed_request) {
        list($encoded_sig, $payload) = explode('.', $signed_request, 2); 
        $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);
        $sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
        $expected_sig = hash_hmac('sha256', $payload, $this->appSecret, true);
        if ($sig == $expected_sig) {
            return $data;
        } else {
            return false;
        }
    }
} 
```

在这样的页面上使用它：

```
$facebookapp = new FacebookApp("id1234...","secret...","appnamespace");

$facebookapp->requireAuthorization("redirect.php","thispage.php","user_about_me,user_likes,more_permissions"); 
```

**redirect.php**是一个页面，它将检测用户是否接受或取消了授权。如果接受，它将重定向回第一页，如果取消，它将显示一条消息。

```
<?php 
require_once("../lib/facebookapp.php");
require_once("config.php");

$facebookapp = new FacebookApp($GLOBALS['facebookAppId'],$GLOBALS['facebookAppSecret'],$GLOBALS['facebookNamespace']);

if ((!isset($_GET['error'])) && isset($_GET['code'])) {
    // user has auhtorized this app, go the the page from success_uri cookie
    if (isset($_COOKIE['success_uri'])) $url = $facebookapp->getCanvasUrl($_COOKIE['success_uri']);
    else $url = $facebookapp->getCanvasUrl('');
    echo "<html>\n<body>\n<script>\ntop.location.href='".$url."';\n</script></body></html>";
    exit();
}

?><html>
<body>
<h1>Permission Denied</h1>
<p>You have denied permissions to this app.</p>
<p><a href="<?php echo $facebookapp->getCanvasUrl(''); ?>" target="_top">Home</a></p>
</body>
</html> 
```

# silverlight - Silverlight OOB 图标未出现在 Windows 8 桌面上

> ID：12319394
> 
> 赞同：3
> 
> 时间：2012-09-07T13:46:44.673
> 
> 标签：silverlight, icons, windows-8, desktop, out-of-browser

我有一个在 VS2012 中编译的 Silverlight 5 项目。我已经正确设置了浏览器外的所有 png 图标。如果我在例如 Windows XP 中测试安装，我会在任何地方（在桌面、开始菜单、任务栏等）看到所有这些图标。Windows 8 除了在 Metro 和经典桌面上之外，在任何地方都显示该图标。

这是 Silverlight 中的错误，还是适用于 Windows 8 的任何解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T06:31:14.550

我可以确认这个问题。**我在Windows 7**上安装了一个 OOB 应用程序并且没有任何问题。在**Windows 8**中，我可以在安装对话框和 OOB 窗口的左上角看到正确的图标，但在开始菜单和桌面上，图标是白皮书。

我检查了图标的路径：

```
%USERPROFILE%\AppData\LocalLow\Microsoft\Silverlight\OutOfBrowser\2301909557.app.url.com\2301909557.app.url.com.ico 
```

我尝试使用另一个 .ICO 文件并且没有问题。然后我把它改回原来的。我可以在预览窗口中看到正确的图标，但是当我接受更改时，图标再次变为白皮书。

也许 .ICO 文件有问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:37:45.003

几个月前，我在 Windows 7 上遇到了类似的问题。我通过将`png`图像转换为`ico`文件来修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T15:47:36.843

我遇到了这个问题，然后通过在 ico 文件中添加一个 64x64 图标来修复它（我认为它可以工作，但现在我又有了一个空白页）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-06T08:36:34.853

在[http://social.msdn.microsoft.com/Forums/silverlight/en-US/759bd857-ce84-45a2-8b38-4cd83744ea2b/oob-icon-on-windows-8](http://social.msdn.microsoft.com/Forums/silverlight/en-US/759bd857-ce84-45a2-8b38-4cd83744ea2b/oob-icon-on-windows-8)他们说您可以将 OOB 应用程序设置为使用提升的解决问题的权利，但发现它很奇怪，加上仅为此使用权利提升不是解决方案（请参阅此处了解为什么它不可接受的更多信息）

# wpf - WPF 在 Listview 中展开特定的 Expander

> ID：12319398
> 
> 赞同：2
> 
> 时间：2012-09-07T13:46:52.673
> 
> 标签：wpf, listview, expander

我有一个列表视图，其中是 groupstyle，我已经定义了一个扩展器（下面的代码），我以编程方式将许多项目添加到列表视图中，这些项目将添加到适当的扩展器中，如果新项目不存在扩展器，它会被动态创建。

```
<ListView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                        <Expander IsExpanded="True" >
                                            <Expander.Header>
                                                <DockPanel>
                                                    <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" Margin="5,0,0,0" Width="100"/>
                                                </DockPanel>
                                            </Expander.Header>
                                            <Expander.Content>
                                                <ItemsPresenter />
                                            </Expander.Content>
                                        </Expander>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </ListView.GroupStyle> 
```

所以需要做的是，当添加一个新项目时，焦点应该转移到那个项目上，并且应该在折叠所有其他内容的同时展开扩展器......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T15:37:34.053

我想扩展上一个答案——我在 MVVM 场景中使用它，并且遇到了与上面提到的比利相同的错误

> “不能在“Binding”类型的“ConverterParameter”属性上设置“Binding”。只能在 DependencyObject 的 DependencyProperty 上设置“Binding”。”

我最终修改了转换器和 XAML（DataContext.CurrentItem 是一个占位符，用于引用视图模型中的当前项所需的任何内容）：

```
public class MultiBindingItemsEqualConverter : IMultiValueConverter
{
    #region IMultiValueConverter Members

    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        bool valuesEquals = values[0].Equals(values[1]);
        return valuesEquals;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
}

<Expander ...>
    <Expander.IsExpanded>
        <MultiBinding
            Mode="OneWay"
            Converter="{StaticResource MultiBindingItemsEqualConv}">
            <Binding
                RelativeSource="{RelativeSource FindAncestor, AncestorType=ListView, AncestorLevel=1}"
                Path="SelectedItem"></Binding>
            <Binding
                RelativeSource="{RelativeSource FindAncestor, AncestorType=ListView, AncestorLevel=1}"
                Path="DataContext.CurrentItem"></Binding>
        </MultiBinding>
    </Expander.IsExpanded>
</Expander> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T13:59:42.817

使用绑定来查看列表 SelectedItem 是否是我们绑定到的 Group 的一部分。

```
<Expander IsExpanded="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ListView, AncestorLevel=1}, Path=SelectedItem, Converter={StaticResource yourConverter}, ConverterParameter={Binding}}" > 
```

您将使用绑定到视图模型的转换器参数将 IsExpanded 绑定到列表 SelectedItem，并让转换器简单地检查参数是否匹配。

转换器只返回 true 或 false

```
public class yourConvertor : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return ((GroupItem)parameter).Contains(value);
    }
 } 
```

# python - Couchdb python -- endkey 在视图中似乎没有效果

> ID：12319399
> 
> 赞同：0
> 
> 时间：2012-09-07T13:46:55.873
> 
> 标签：python, view, couchdb, key

我一直在尝试使用日期键检索 couchdb 文档，格式为： `yyyy mm dd`.

我希望能够使用 couchdb-python 中的视图检索一系列日期。我可以使用 curl 让它工作。例如：

```
curl -X GET mylocation:5984/small/_design/Common/_view/date?startkey='"2012%2006%2004"'\&endkey='"2012%2006%2006"' 
```

但是，在 Python 中使用 view 方法，例如

```
a=ui.db.view(docname, startkey='"2012%2006%2004"', endkey='"2012%2006%2006"')
a.rows 
```

什么都不生产。我试过了：

1.  单独使用 startkey --works

2.  单独的 Endkey - 不起作用。

3.  将键更改为以下形式的复合键：“yy”、“mm”、“dd”

然后尝试按如下方式检索它们：

```
a=ui.db.view(docname, startkey='\["12","06","04"\]', endkey='\["12","06","06"\]')
a.rows 
```

同样， startkey 本身有效，不使用 endkey 有效。这在 curl 中也可以正常工作，例如：

```
curl -X GET mylocation:5984/small/_design/Common/_view/date?startkey='\["12","06","04"\]'&endkey='\["12","06","06"\]' 
```

然后，我将键更改为整数而不是字符串——同样，使用 startkey 的任何东西都可以使用，使用 endkey 的任何东西都不起作用。

我终于将密钥更改为仅整数 1-->10，但仍然无法让 endkey 做任何事情。

我正在使用 couchdb-python 0.8 版。我正在 eric4 内部调试这个（这可能是问题吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:25:19.283

您不需要在视图调用中将 startkey/endkey 查询参数显式编码为 JSON。默认情况下，CouchDB 要求它们具有有效的 JSON 值。例如，如果您的视图以 ["yy", "mm", "dd"] 形式返回复合键，那么您的视图请求将是下一个

`a = ui.db.view(docname, startkey=["12","06","04"], endkey=["12","06","06"])`

请注意，startkey 和 endkey 具有列表类型值 - 与您的视图功能键相同。

关于 curl 请求：它不等同于您的 db.view() 请求：单引号充当 shell 字符串转义，但它们不会随请求一起传递。所以 curl 对 CouchDB 的实际请求是

`mylocation:5984/small/_design/Common/_view/date?startkey=["12","06","04"]&endkey=["12","06","06"]`

除非你会有 invalid_json 错误响应，因为 JSON 字符串应该用双引号引起来。

无论如何，您可以查看 CouchDB 日志（信息级别对于您的情况来说已经足够了）来比较您的 Python 程序和 curl 对 CouchDB 的实际请求 - 它们对于您的情况会有所不同。

# c# - 表达式构建器或在运行时查询对象列表

> ID：12319401
> 
> 赞同：0
> 
> 时间：2012-09-07T13:47:01.637
> 
> 标签：c#, wpf, expression

这是场景：

我正在使用一个将 XML 字符串存储在其中一列中的数据库表。此 XML 包含我正在使用 Crystal Reports 生成报告的重要数据。为此，我创建了一个对象来表示 XML 字符串中的相关数据，并将这些对象的列表绑定到我的报表查看器。我已经对 Crystal Reports 进行了一些工作，使用它们的本机控件设置过滤和排序，但事实证明这不够冗长，无法处理我想要的过滤类型。

我想要某种 UI 控件，允许用户构建可用于过滤我的对象列表的表达式。然后可以通过编程将列表与相关对象绑定到报告查看器。

为了澄清一个我想做的事情的例子。让用户能够选择在 9 - 10 和 12 - 2 或 4- 5 之间发生的给定产品的所有交易。基本上可以使用逻辑操作对我的对象中的任何属性进行查询控制。

关于如何做到这一点的任何想法或建议？想知道是否有人知道包含这种功能的任何工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:57:10.163

基于文本的查询很少用于良好的用户体验。它们更常用于一个软件以人类可读和机器可读的方式与另一个软件对话。

您最好制作一个 UI 来为您构建查询。例如，您可以创建一个类来表示约束类型，并为 ListBox 中的每个查询维护一个约束列表。然后，用户可以根据需要从约束列表中添加和删除约束。您可以将 ListBox 的选定项绑定到约束构建器控件，他们可以在其中选择约束类型（字符串匹配、日期范围等）

# php - 如何使用 zend 框架读取 xls 文件？

> ID：12319403
> 
> 赞同：0
> 
> 时间：2012-09-07T13:47:05.757
> 
> 标签：php, zend-framework, xls

如何使用 zend 框架读取 xls 文件？

是否可以读取使用**Zend Spreadsheets**命名的**xls**文件（Excel） 。`common.xls`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T18:10:38.187

就像评论中提到的那样，您可以使用`[PHPExcel][1]`

```
//-----Create a reader, set some parameters and read in the file-----
$objReader = PHPExcel_IOFactory::createReader('CSV');
$objReader->setDelimiter(’,’);
$objReader->setEnclosure('');
$objReader->setLineEnding("\r\n");
$objReader->setSheetIndex(0);
$objPHPExcel = $objReader->load('path/to/commons.xls’); 
```

完整教程 [http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/05/07/4606.aspx](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/05/07/4606.aspx)

可以帮助您的 Stackoverflow Qs -

[PHPExcel 阅读器 -- 需要帮助](https://stackoverflow.com/questions/4792543/phpexcel-reader-help-required)

* * *

或者看看[PHP Excel Reader](http://code.google.com/p/php-excel-reader/)

例子

```
$data = new Spreadsheet_Excel_Reader("common.xls",false); 
```

> 与 XLS 文件交互的最简单方法是将其转储为 HTML 以在浏览器中显示。此方法将生成一个带有内联 CSS 和所有可用格式的表格。

```
$data->dump($row_numbers=false,$col_letters=false,$sheet=0,$table_class='excel') 
```

希望这可以帮助。**

# ruby-on-rails - Mongoid、belongs_to和embedded_in hot id可以做什么？

> ID：12319407
> 
> 赞同：2
> 
> 时间：2012-09-07T13:47:14.500
> 
> 标签：ruby-on-rails, mongoid, ruby-on-rails-3.2

我有三个模型：用户、图片和点赞

在哪里：

```
class Picture
    include Mongoid::Document
    embeds_many :likes
    belongs_to :user
end
class User
    include Mongoid::Document
    has_many :pictures
    has_many :likes
end
class Like
    include Mongoid::Document
    belongs_to :user
    embedded_in :picture
end 
```

不，我想将喜欢的内容存储到：

*   查看有多少赞有一张图片（ Picture.first.likes.count ）
*   查看用户有多少喜欢（ User.first.likes.count ）
*   看看用户点赞了哪些图片？

这个 Schema 是否正确地实现了这三个要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:00:09.147

首先，嵌入模型无法在其他用户中引用，就像您尝试在 User 中引用 Like（已嵌入图片中）一样。

正确的模型结构将是

```
class Picture
    include Mongoid::Document
    has_and_belongs_to_many :likers, :class_name => "User", :inverse_of => nil
    belongs_to :user
end

class User
    include Mongoid::Document
    has_many :pictures
end 
```

现在回答您的疑问

```
# See how many likes have a picture
Picture.first.likers.count
# See how many likes a user has
# (assumption - will have only one like from one user for a specific picture)
Picture.where(:liker_ids => User.first).count
# See to what picture the user make a like?
Picture.where(:liker_ids => User.first).all 
```

# ios - MPMoviePlayerController 无法播放 ts

> ID：12319412
> 
> 赞同：1
> 
> 时间：2012-09-07T13:47:20.690
> 
> 标签：ios, mpmovieplayercontroller

我的 localhost 有一个 ts 文件，我可以用 VLC 播放，但不能用模拟器中的 MPMoviePlayerController 播放

```
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://127.0.0.1/test.ts"]]; 
```

ts文件的信息是：

![在此处输入图像描述](../Images/180f919a23cd72fdc6684e2ade6dda35.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:40:39.053

引用[iOS 技术概述](http://developer.apple.com/library/ios/#DOCUMENTATION/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html)：

> iOS 中的视频技术支持播放具有 .mov、.mp4、.m4v 和 .3gp 文件扩展名并使用以下压缩标准的电影文件： ...

因此，您的文件不能播放不是因为编解码器，而是因为视频容器格式。iOS 不理解 MPEG TS。

# android - Android 4 的位图宽度和高度

> ID：12319415
> 
> 赞同：2
> 
> 时间：2012-09-07T13:47:28.690
> 
> 标签：android, selector, drawable, android-4.0-ice-cream-sandwich, hdpi

我在 drawable-hdpi 和 carema_btn.xml 布局文件中有 carema.png 和 carema_sel.png 图像。在 Android 2.2 和 2.3 设备上，一切正常，但在 android 4.0 中，按钮太大。这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?> 
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
         <item android:state_enabled="false" android:drawable="@drawable/camera"/>
         <item android:state_enabled="true" android:state_pressed="true" android:drawable="@drawable/camera_sel" />
         <item android:state_enabled="true" android:state_focused="true" android:drawable="@drawable/camera_sel" />
         <item android:state_enabled="true" android:drawable="@drawable/camera"/>
    </selector>

    <Button
        android:id="@+id/cameraButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:background="@drawable/camera_btn" /> 
```

为什么按钮在 Android 4.0 中显得太大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:55:41.253

你只有 hdpi 中的 png 图像吗？如果您想支持多种屏幕尺寸，您还应该提供图像的 ldpi、mdpi 和 xhdpi 版本。

如果 4.0 设备的屏幕尺寸与 2.2 / 2.3 设备不同，这可能是问题所在。

查看[Android 开发者教程了解多种屏幕尺寸](http://developer.android.com/guide/practices/screens_support.html)

# sql - 在 Sql select 语句中获取 Count 作为字段的最佳方法

> ID：12319419
> 
> 赞同：0
> 
> 时间：2012-09-07T13:47:39.710
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在 Sql select 语句中获取 Count 作为字段的最佳方法

我有 2 张桌子：人员和订单

人

* * *

```
 Id            Name            Age
 1            name1           1
 2            name2           2 
```

命令

* * *

```
Id            Amount           PersonId
 1              30               1
2              40               2
3              30               2
4              40               2
5              30               1
6              40               2
7              30               1
8              40               2 
```

我想要用户详细信息以及订单总数，因此为此我有 2 个解决方案：

```
 1\. select p.Name,p.Age,(select count(1) form orders o where o.personId= p.Id as       cntVal 
    from Person p

 2\. select p.Name,p.Age,cntVal 
    from Person p
    inner join (select personId,count(1) as cntVal from orders o group by PersonId) cnt
     on cnt.personId=p.Id 
```

我们在 Person 表中有大约 200K 条记录，在 Order 表中有 15K 条记录。我想知道哪种方法更好？或者你可以建议我一个更快的查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T13:50:21.630

我错过了什么吗？

```
select  p.name, p.age, count(o.OrderId)
from    Person p join Orders o on p.PersonId = o.PersonId
group by p.name, p.age 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:51:59.283

这是另一种选择——这将是我的第一选择。

```
select p.Name,p.Age, count(orderID)
from 
    Person p 
inner join 
    Orders o
        on p.Id = o.personId
group by p.id, p.Name, p.Age 
```

如果您希望将未下订单的人也计算在内，请将内连接更改为左连接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:53:29.943

如果您唯一关心的是效率和速度，我建议您使用 SQL Profiler 并查看哪个选项以最少的读取量和消耗的资源生成最快的结果。

您还有另一种选择：

```
Select  
   p.Name, 
   p.Age, 
   Count(*) as OrderCount
From  Person p 
   Join Orders o on p.PersonId = o.PersonId
Group By p.Name, p.Age 
```

测试所有这些，看看哪个是最好的。

# javascript - 如何将 HTMLAudioElement 的当前播放位置重置为 0？

> ID：12319421
> 
> 赞同：4
> 
> 时间：2012-09-07T13:47:46.760
> 
> 标签：javascript, audio, html5-video, html5-audio

查看此演示页面：[http ://www.phon.ucl.ac.uk/home/mark/audio/play10.htm](http://www.phon.ucl.ac.uk/home/mark/audio/play10.htm)

快速连续单击`Play Sound`按钮两次。因为当您再次按下按钮时它还没有完成第一次播放，所以什么都没有发生，并且单击似乎被忽略了。怎么重新编码让它停止当前播放，将播放位置重置到声音的最开始，并在每次单击`Play Sound`按钮时重新启动它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T14:01:34.843

你可以把它改成这样

```
var thissound=document.getElementById('audioElemID');
thissound.currentTime=0;
thissound.play(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:03:27.573

```
thissound=document.getElementById(soundobj);
thissound.currentTime = 0; 
```

# c# - 为什么 C# CreateObject 比 VB.NET 更冗长？

> ID：12319422
> 
> 赞同：8
> 
> 时间：2012-09-07T13:47:49.023
> 
> 标签：c#, vb.net, com

我希望将一些 VB6/COM+ 代码转换为 C#/COM+

但是在 VB6 或 VB.NET 中我有：

```
Dim objAdmin
objAdmin = Server.CreateObject("AppAdmin.GUI")
objAdmin.ShowPortal() 
```

在 C# 中，我似乎必须执行以下操作：

```
object objAdmin = null;
System.Type objAdminType = System.Type.GetTypeFromProgID("AppAdmin.GUI");
m_objAdmin = System.Activator.CreateInstance(objAdminType);
objAdminType.InvokeMember("ShowPortal", System.Reflection.BindingFlags.InvokeMethod, null, objAdmin, null); 
```

有没有办法让 c# 不必使用 InvokeMember 函数而直接调用该函数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T13:49:29.723

> 有没有办法让 c# 不必使用 InvokeMember 函数而直接调用该函数？

是的，从具有[动态类型](http://msdn.microsoft.com/en-us/library/dd264736.aspx)的 C# 4 开始：

```
dynamic admin = Activator.CreateInstance(Type.GetTypeFromProgID("AppAdmin.GUI"));
admin.ShowPortal(); 
```

它在这部分中仍然更加冗长`CreateObject`，但是如果您愿意，您可以随时将其包装在方法调用中。（*可能*有一个我不知道的现有调用，或者您可以尝试查找在这种情况下 VB 调用的任何内容 - 我不知道 的详细信息`Server.CreateObject`。）

请注意，动态类型比让反射更简单更丰富*，*但它确实做到了。在幕后，虽然这两种情况都会发生同样的事情——它仍然不会像静态绑定那样快，但几乎可以肯定它已经*足够*快了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T13:49:18.937

是的，您可以使用[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264741.aspx)关键字

```
dynamic objAdmin = System.Activator.CreateInstance(objAdminType);
objAdmin.ShowPortal(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T13:55:31.790

如果您有权访问实际的类类型，则可以按如下方式进行：

```
AppAdminClass m_objAdmin = (AppAdminClass)System.Activator.CreateInstance(typeof(AppAdminClass));
m_objAdmin.ShowPortal(); 
```

# android - libspotify 在 Android 上使用 SIGSEGV 失败

> ID：12319423
> 
> 赞同：3
> 
> 时间：2012-09-07T13:47:54.360
> 
> 标签：android, android-ndk, spotify

我正在围绕本机*libspotify.so*（ Android 的*Spotify*库）编写一个包装器。我在调用**sp_session_starred_create**时得到了这个：

```
A/libc(26182): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 26182 
I/DEBUG(34): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG(34): Build fingerprint: 'generic/sdk/generic:4.1.1/JRO03E/403059:eng/test-keys'
I/DEBUG(34): pid: 26182, tid: 26182, name: UNKNOWN 
I/DEBUG(34): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000
...
I/DEBUG(34): backtrace:
I/DEBUG(34):     #00  pc 0011fc40  /data/data/.../lib/libspotify.so
I/DEBUG(34):     #01  pc 000e1e58  /data/data/.../lib/libspotify.so
...
D/Zygote(37): Process 26182 terminated by signal (11) 
```

当我调用**sp_search_create**或**sp_session_playlistcontainer**时，同样的问题。

这是跟踪文件的内容（我删除了一些重复的 sp_session_process_events）：

```
libspotify trace from 12.1.51.g86c92b43 Release Android-arm 

> sp_session_process_events(0x200f40 0xbeba10cc) on 0xafd4a828
< sp_session_process_events() = 300447
< sp_session_create() = 0
> sp_session_connectionstate(0x200f40) on 0xafd4a828
< sp_session_connectionstate() = 0
> sp_session_remembered_user(0x200f40 0xbeba12a4 256) on 0xafd4a828
< sp_session_remembered_user() = 21
> sp_session_relogin(0x200f40) on 0xafd4a828
< sp_session_relogin() = 0
> sp_session_connectionstate(0x200f40) on 0xafd4a828
< sp_session_connectionstate() = 1
> sp_session_starred_create(0x200f40) on 0xafd4a828
> sp_session_process_events(0x200f40 0xbeba0e9c) on 0xafd4a828
< sp_session_process_events() = 693
> sp_session_process_events(0x200f40 0xbeba0e7c) on 0xafd4a828
< sp_session_process_events() = 692 
```

我确信调试跟踪应用程序在**sp_session_starred_create**某处崩溃。

有人收到这些错误吗？我怎样才能避免它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:28:09.290

我怀疑这是 libspotify 本身的一个问题，并有望在库的下一个版本中得到解决（免责声明：我在 Spotify 工作）。我无法评论此版本何时可用。所以紧紧抓住！

但是，我建议检查您传递给的会话对象`sp_session_starred_create()`，即通过调用`sp_session_connectionstate()`以确保一切正常。

# c++ - 在 C++ 中处理类？

> ID：12319424
> 
> 赞同：4
> 
> 时间：2012-09-07T13:47:59.567
> 
> 标签：c++, inheritance

在 C++ 入门 15.8 中，当作者谈到“句柄类和继承”时，他说：

> C++ 中的一种常用技术是定义所谓的覆盖类或句柄类。句柄类存储和管理指向基类的指针。该指针指向的对象的类型会有所不同；它可以指向基类或派生类对象。用户通过句柄访问继承层次结构的操作。因为句柄使用它的指针来执行这些操作，所以虚拟成员的行为在运行时会根据句柄实际绑定到的对象的类型而有所不同。句柄的用户因此获得动态行为，但他们自己不必担心管理指针。

以上听起来很像我的智能指针。但是，这个“句柄”的用法有点不同。

```
Handle h(Derived()); // noticed a derived object, not a pointer is used to initialize the handle!
h->func(); 
```

句柄的后一种实现（如下所示）证明了作者对句柄的评论：

> 我们希望我们的句柄的用户创建他们自己的对象，他们可以附加一个句柄。**句柄将分配适当类型的新对象并将用户的对象复制到新分配的对象**中。这样，句柄类将**拥有该对象**，并且可以保证在附加到该对象的最后一个句柄消失之前不会删除该对象。

代码：

```
public:
    Base(){}
    virtual int func(std::size_t n) const {}
    virtual Base* clone() const { return new Base(*this); }
};

class Derived : public Base {
public:
    Derived():Base(){}
    int func(std::size_t) const; // redefine
    Derived* clone() const { return new Derived(*this); }
};

class Handle {
public:
    Handle(const Base &b):p(b.clone()), use(new std::size_t(1)) { }
private:
    Base *p;
    std::size_t *use; // pointer to shared use count
}; 
```

我的问题是：这真的是 C++ 或 OO 中句柄的典型含义吗？我认为句柄可以只是一个基本类型的智能指针，它在内部保持使用计数，或者更一般地说，系统知道它指向什么以及如何处理它的一些魔法 int 类型。为什么这里的句柄需要将用户对象复制到自身，然后根据副本进行使用计数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:54:53.160

现代 C++ 中的惯用等价物是：

```
std::shared_ptr<Base> h{std::make_shared<Derived>()}; 
```

一般来说，“句柄”意味着某种形式的类型擦除，因此处理句柄的代码不需要知道如何实现功能的细节。

您显示的代码`clone`用于复制对象的原因正是为了执行类型擦除；在`clone`调用该方法时，对象的实际类型的知识`Derived`被擦除。就实现质量而言，代码是非线程安全的，这与传统 C++ 无关，但对于现代 C++ 来说是一个问题，后者确实具有线程感知内存模型。它也不是明显的异常安全的；将异常安全委托给标准库类（如`shared_ptr`. 最后，`Base`该类缺少虚拟析构函数。

# ruby-on-rails - 如何在 ruby 中使用正在运行的线程

> ID：12319432
> 
> 赞同：0
> 
> 时间：2012-09-07T13:48:24.590
> 
> 标签：ruby-on-rails, ruby, multithreading

我在以下代码中遇到问题

```
 def create
  mythreads=[]
  mythreads=Thread.list
  @device_id=params[:data]['device_id']

    if mythreads[@device_id].alive?
      //I want this stuff
    else
       mythreads[@device_id]=Thread.new(arg) { savedata(params[:data])  }
    end

 end

  def savedata(data)
     Model.create(data)
  end 
```

*   数据是通过邮寄请求来的

*   **如果未创建，**我想为每个 device_id 创建单独的线程

***   如果它**已经创建，我想使用同一个线程来存储数据**

    *   **如果线程还活着，如果条件为真块**，我应该写什么代码

     **将数据传递给现有线程？？？

    以便**调用 savedata() 函数并存储数据******

# yii - Yii 试图获取非对象的属性

> ID：12319437
> 
> 赞同：0
> 
> 时间：2012-09-07T13:48:41.473
> 
> 标签：yii

在我的主机上出现此类错误，但在我的本地主机上没有错误。当我使用关系名称（如`model.attribute`. 可能是什么问题？

这是我的**模型**：

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('ammount, currency_id, operation_type', 'required'),
        array('currency_id, operation_type, client_id, organization_id', 'numerical', 'integerOnly'=>true),
        array('creation_date, modification_date, ammount, ammount_usd', 'length', 'max'=>10),
    //array('ammount, currency_id, operation_type, client_id, organization_id,comment', 'safe'),

        array('ammount, ammount_usd, currency_id, operation_type, client_id, organization_id, currency,comment,
        operationType ,client, organization', 'safe', 'on'=>'search'),
    );
}

/**
 * @return array relational rules.
 */
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'client' => array(self::BELONGS_TO, 'Client', 'client_id'),
        'currency' => array(self::BELONGS_TO, 'Currencies', 'currency_id'),
        'organization' => array(self::BELONGS_TO, 'Organizations', 'organization_id'),
        'operationType' => array(self::BELONGS_TO, 'OperationType', 'operation_type'),
        'operationsMeta' => array(self::HAS_MANY, 'OperationsMeta', 'operation_id'),
    );
} 
```

这是**视图**文件：

```
<h1>Управление операциями</h1>

<?php $this->widget('bootstrap.widgets.BootGridView',array(
    'id'=>'operations-grid',
    'type'=>'striped bordered',
    'dataProvider'=>$model->search(),
    //'filter'=>$model,
    'columns'=>array(
        array(
            'name'=>'operationType',
            'value'=>'$data->operationType->name',
            'header'=>'Операция'
        ),
        array(
            'name'=>'creation_date',
            'type'=>'datetime',
            'header'=>'Дата создания'
        ),
        'ammount_usd:raw:Сумма',
        'comment:text:Комментарий',
        array(
            'name'=>'currency',
            'value'=>'$data->currency->short',
            'header'=>'Валюта',
        ),
        array(
            'name'=>'client',
            'value'=>'$data->client->fio',
            'header'=>'Клиент',
        ),
        array(
            'name'=>'organization',
            'value'=>'$data->organization->name',
            'header'=>'Организация',
        ),

        array(
            'class'=>'bootstrap.widgets.BootButtonColumn',
            'header'=>'Action'
        ),
    ),
)); ?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:04:17.850

我认为您需要检查模型类的文件名！因为当你在 windows 下运行你的应用程序时，所有文件名都不区分大小写，但在基于 linux 的系统下 Yii 找不到它们。

# gnuplot - gnuplot - 关于图例：如何将框设置在中间并设置框大小

> ID：12319440
> 
> 赞同：1
> 
> 时间：2012-09-07T13:48:48.523
> 
> 标签：gnuplot

默认位置是：顶部、底部、左侧、右侧等 - 但没有“中间”。当我使用

```
set key top 
```

默认情况下，图例位于右上角。如何将其定位在“顶部中间”？

另外，当我给图例框加边框时，我可以控制框的宽度吗？我需要这个，因为有时框架会剪切图例中的文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T14:15:39.340

要回答您的第一个问题，有一个`center`选项可以代替`middle`：

```
set key top center 
```

要更改框的宽度，请尝试

```
set key width 10 
```

（或其他数字），看看是否有帮助。如果这没有帮助，您可以发布一个最小的代码示例吗？你也可以试试

```
help set key 
```

在 gnuplot 中了解有关所有可用选项的更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T14:10:50.050

而不是中间，使用`center`. 您可以通过使用在 gnuplot 中找到此指令`help`

```
gnuplot> help key
 The `set key` command enables a key (or legend) describing plots on a plot. 
 [...]
 Syntax:
       set key {on|off} {default}
                     [...]
                    {left | right | center} {top | bottom | center} 
```

此帮助中还提供了所有其他答案。

# oracle - 备份数据与生产不同？

> ID：12319442
> 
> 赞同：1
> 
> 时间：2012-09-07T13:48:54.357
> 
> 标签：oracle, oracle10g

*（如果您讨厌冗长的解释，请阅读下面我的问题）*

我们遇到了一些由不合作的供应商销售的软件的问题（不幸的是，我们是该产品的唯一客户）。该软件的平台是 Oracle。在晚上，该应用程序会运行一系列夜间进程。偶尔一些夜间进程崩溃，导致我们争先恐后地恢复数据库并将工作延续到第二天晚上。当然，这会导致用户心痛，这会影响到管理，直至 IT。我们责备供应商，他们责备我们。至少有一些额外的日志记录来帮助我们定位问题会很好。

我们已经缩小到几个可能的问题。奇怪的是，当我们从故障前恢复备份并在测试盒上重新运行每晚的进程时，它永远不会失败。因此，这使我们相信：

*   我们尚未检测到的测试盒和生产盒之间的差异
*   软件有点奇怪
*   导出前的生产数据和恢复的数据有所不同
*   ??

这让我想到了我期待已久的问题（关于上面的“C”）：

是否有什么会导致生产数据与备份数据不同（使用“exp”从命令行派生）？

我想我很怀疑，但只是想消除上述选项之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:56:36.593

这不太可能是由 imp/exp 所做的任何事情引起的（尽管 imp/exp 可能会按顺序很好地加载您的数据并具有新的索引，因此测试数据库具有更好的性能并避免一些应用程序内存泄漏） . 更有可能是测试数据库和应用程序的初始状态是干净且无竞争的，而生产系统将整天运行，因此处于不同的状态（内存加载了各种东西），甚至可能运行其他进程会阻止您的某些进程并导致应用程序失败。

在运行进程之前，您可能会尝试关闭并重新启动数据库和应用程序。这为您提供了与测试相同的起点。您可能希望在生产中重建索引和统计信息等，以消除此处的问题。您还需要通过应用程序或在同一数据库中运行的任何其他内容消除可能与流程冲突的任何其他工作。

如果 Oracle 没有崩溃并且警报日志中没有问题，则应用程序存在问题并需要调查。监视应用程序服务器的内存或进程问题，并让供应商记录发生的事情（告诉他们，如果他们对此很棘手，您需要它来查找 Oracle 错误）。

# android - 一个联系人下有多个号码时只更新手机的联系人号码

> ID：12319445
> 
> 赞同：2
> 
> 时间：2012-09-07T13:48:56.357
> 
> 标签：android, contacts

我在手机中有一个联系人，例如 name="ABC"。**电话**号码="123456789" type="work" **google** number="987654321" type="work"。现在当我更新号码“123456789”的联系人时，首先获取该联系人的ID，然后更新联系人phone.type="work"。但问题是，当我更新联系人时，联系人将同时更新电话号码和谷歌号码等号码。所以我怎样才能只更新手机的联系人号码而不更新任何其他帐户加入了这个id？。我写的代码如下：

```
 public Long getID(String number) {

            Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,
                    Uri.encode(number));
            Cursor c = getContentResolver().query(uri,
                    new String[] { PhoneLookup._ID}, null, null, null);
            while (c.moveToNext()) {
                return c.getLong(c.getColumnIndex(PhoneLookup._ID));
            }
            return null;
        }  
 public int gettype(String number) {

            Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI,
                    Uri.encode(number));
            Cursor c = getContentResolver().query(uri,
                    new String[] { PhoneLookup.TYPE }, null, null, null);
            while (c.moveToNext()) {
            return c.getInt(c.getColumnIndex(PhoneLookup.TYPE));

            }
            return 0;
        }

Long id = getID(delnumber);
int contact_type= gettype(delnumber);

 String selectPhone = Data.CONTACT_ID+ "=? AND "    + Data.MIMETYPE+ "='"+ Phone.CONTENT_ITEM_TYPE+ "'" + " AND " + Phone.TYPE + "=?";
                                                    Log.i("type",""+contact_type);
                                                    if(contact_type==1)
                                                    {String[] phoneArgs = new String[] {String.valueOf(id), String.valueOf(Phone.TYPE_HOME)};
                                                    ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI).withSelection(selectPhone,phoneArgs).withValue(Phone.NUMBER,getnum).build());}
                                                    else if(contact_type==2)
                                                    {String[] phoneArgs = new String[] {String.valueOf(id), String.valueOf(Phone.TYPE_MOBILE)};
                                                    ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI).withSelection(selectPhone,phoneArgs).withValue(Phone.NUMBER,getnum).build());}
                                                    else if(contact_type==3)
                                                    {String[] phoneArgs = new String[] {String.valueOf(id), String.valueOf(Phone.TYPE_WORK)};
                                                    ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI).withSelection(selectPhone,phoneArgs).withValue(Phone.NUMBER,getnum).build());}
                                                    else
                                                    {String[] phoneArgs = new String[] {String.valueOf(id), String.valueOf(Phone.TYPE_MOBILE)};
                                                    ops.add(ContentProviderOperation.newUpdate(Data.CONTENT_URI).withSelection(selectPhone,phoneArgs).withValue(Phone.NUMBER,getnum).build());} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:25:18.073

首先，使用上面的格式很难阅读您的代码，这可能是为什么没有人试图回答这个问题，但这是我用来更新电话号码而不更新任何其他电话号码的代码：

```
 ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
    ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
            .withSelection(ContactsContract.Data.CONTACT_ID + " = ?", new String[] {userId})
            .withSelection(ContactsContract.Data._ID + " = ?", new String[] {phoneId})
            .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
            .withValue(ContactsContract.Data.DATA1, phoneNumber)
            .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, type)
            .withValue(ContactsContract.CommonDataKinds.Phone.LABEL, label)
            .build());

    try 
    {
        resolver.applyBatch(ContactsContract.AUTHORITY, ops);
    } 
```

关键是要在您的查询选择中包含联系人的联系人 ID 和要更新的电话的电话 ID。

# c# - 我应该处置给我的 IDisposable 吗？

> ID：12319447
> 
> 赞同：3
> 
> 时间：2012-09-07T13:49:13.353
> 
> 标签：c#, io, idisposable

> **可能重复：**
> [当传递到另一个对象时，谁应该在 IDisposable 对象上调用 Dispose？](https://stackoverflow.com/questions/4085939/who-should-call-dispose-on-idisposable-objects-when-passed-into-another-object)

假设您有一个具有如下接口的类：

```
public interface Foo
{
    Load(IDisposable something);
} 
```

实现此方法时，我应该在完成后调用 dispose 吗？换句话说，当一个类的方法采用 a或任何其他是时`Stream`，该方法是否也应该处理流，还是应该留给调用该方法的人？`Reader``IDisposable`

我知道任何一种方式都会奏效，只是好奇其他更有经验的人会认为良好的行为:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:57:51.550

你不应该调用方法，因为你可能对对象做更多的`Dispose`事情。如果您不需要更多，应该使用外部处理。示例代码：`Load``IDisposable``using`

```
using (var something = new Something())
{
    IFoo foo = new Foo();
    foo.Load(something);

    // Do more with something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:51:42.440

这取决于您的界面的记录行为。

如果流保持打开以供调用者“（重新）使用”是有意义的，那么您可以将其保持在某些记录状态（例如，在某某块之后的当前位置）。

否则，最有帮助的事情似乎是为用户处理它。

请注意，CLR 框架类有时具有专门的重载，以允许调用者指定应该发生的情况。参见例如：http: [//msdn.microsoft.com/en-us/library/gg712952.aspx](http://msdn.microsoft.com/en-us/library/gg712952.aspx)

```
public StreamReader(
    Stream stream,
    Encoding encoding,
    bool detectEncodingFromByteOrderMarks,
    int bufferSize,
    bool leaveOpen
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:54:51.557

我会添加一个参数，所以调用者可以告诉我是否处理它（我还添加`void`了方法返回类型）：

```
public interface Foo 
{ 
    void Load(IDisposable something, bool disposeSomething); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T13:55:35.373

如果您的对象包含其他本身是一次性的对象，那么您的对象也应该是一次性的。例如，持有对以独占读/写权限打开的文件的引用的对象应该是一次性的，以便对象的客户端可以控制底层资源何时关闭或清理。使 Foo 接口继承自 IDisposable

# cakephp - CakePHP 中的多重关系

> ID：12319451
> 
> 赞同：3
> 
> 时间：2012-09-07T13:49:27.033
> 
> 标签：cakephp, database-relations

我正在使用 CakePHP 创建一个锦标赛平台。目前，我创建了以下表格、模型和控制器，它们可以完美运行：锦标赛、用户和团队。

我还创建了一个“Tournamentuser”表、控制器和模型，其中存储了锦标赛 ID、用户 ID 和团队 ID。

然后，当在 Tournaments 下使用 View.ctp 时，它应该显示与 Tournamentuser 相关的 User.Username 和 Team.Username。截至目前，我只设法通过从表中检索到 id。一个*foreach(.. as ..)*。我可以在 CakePHP 查询中看到它检索数据，我只是不知道如何打印它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:14:24.647

我想你已经知道了，但是在 CakePHP 中，约定是：

*   模型必须有单数名称：user/car/image
*   控制器必须有复数名称：users/cars/images
*   表必须有复数名称：users/cars/images

例如，如果我们需要一个关系：锦标赛用户，我们必须遵循约定（在 CakePHP 2+ 中）：

*   控制器：TournamentsUsersController.php
*   模型：TournamentsUser.php
*   表：锦标赛_用户

如果在建立关系之前遵循所有上述约定，则锦标赛用户必须定义​​两个表之间的关系。

在这里您可以找到有关如何执行此操作的更多详细信息：http: [//book.cakephp.org/2.0/en/models/associations-linking-models-together.html](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html)

如果到目前为止一切都正确完成，您现在可以查询 TournamentsUser 模型。

### 假设您在 TournamentsUsersController.php 控制器中：

```
$data = $this->TournamentsUser->find('all'); 
```

### 您现在可以使用以下命令查看 $data 包含的内容：

```
debug($data); 
```

### 要打印数据，您可以使用 for/foreach 循环：

```
$size = count($data);
for($i=0; $i<$size; ++i) {
   debug($data[$i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:01:32.987

如果您正在获取数据，但只需要访问这些值，则可以使用普通的 PHP 数组功能：

```
echo $myData['User']['username'];
echo $myData['Team']['username']; 
```

或者，如果您有多个：

```
foreach($myData as $data) {
    echo $data['User']['username'];
    echo $data['Team']['username'];
} 
```

显然，这需要根据您的代码进行调整，但它应该可以帮助您了解这个想法。

# c# - SSRS 从数据集中获取最常见的条目

> ID：12319453
> 
> 赞同：1
> 
> 时间：2012-09-07T13:49:33.823
> 
> 标签：c#, sql-server, reporting-services, reportviewer

我有一个返回以下数据集的查询：

```
设备 | 服务
----------------
PC1 | 服务1
PC1 | 服务2
PC1 | 服务3
PC1 | 服务4
PC1 | 服务5
PC1 | 服务6
PC1 | 服务7
电脑2 | 服务1
电脑2 | 服务2

```

我的报告中有一个表格，按设备分组并显示服务。但我还想要一个饼图，显示五种最常见的服务。

我可以使用第二个数据集和存储过程相当容易地做到这一点，但我想知道是否有一种方法可以使用同一个数据集来做到这一点（数据已经被查询并返回，所以在我看来它会比对服务器运行单独的程序性能更好）。

关于这是否可能的任何想法？或者我应该只使用第二个查询/存储过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:05:26.393

我假设您希望获得每组的计数，并且只显示前 5 名。您可以将 CTE 与`COUNT(*)OVER`and一起使用`DENSE_RANK()OVER`：

```
WITH CTE AS
(
  SELECT Device, Service
   , COUNT(Service) OVER (PARTITION BY Device) AS Count
   , DENSE_RANK() OVER (PARTITION BY Device ORDER BY Service) AS Rank
  FROM tdevice
)
SELECT Count, Rank, Device, Service
FROM CTE
WHERE RANK <= 5 
```

这是小提琴：[http ://sqlfiddle.com/#!3/1f42a/8/](http://sqlfiddle.com/#!3/1f42a/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T16:21:24.507

您可以使用嵌套查询。如果您从中提取的表的名称称为“#MYTABLE”，并且在上面的示例中返回了两列，那么您将使用

```
SELECT #MYTABLE.Device, #MYTABLE.Service, NUMBEROFINSTANCES FROM #MYTABLE
    LEFT JOIN
        (SELECT SERVICE, COUNT(DEVICE) AS NUMBEROFINSTANCES 
        FROM #MYTABLE
        GROUP BY SERVICE) AS ABB1 ON ABB1.SERVICE = #MYTABLE.SERVICE 
```

# hadoop - 使用 mahout mapreduce 计算用户相似度

> ID：12319454
> 
> 赞同：6
> 
> 时间：2012-09-07T13:49:38.710
> 
> 标签：hadoop, mapreduce, cluster-analysis, data-mining, mahout

我正在使用 Mahout 集群，我有大型集群，每个集群有大约 10 万用户，每个用户有 5 个功能。在下一步中，我需要计算 pearson 相关性以找到集群用户之间的相似性。

目前我有一个 python 脚本，它对我做同样的事情，但正如预期的那样，计算需要很长时间，并且不再是一个可行的选择

我查看了 Mahout，因为它提供了使用 Pearson、Tanimoto、对数似然度量来查找 UserSimilarity 的功能，但我无法找到开发这些相似度量的 Mapreduce 版本的方法。

是否有任何资源可以举例说明如何开发 UserSimilarity 的 mapreduce 版本，或者使用 hadoop 流和相同的 java 类是否有意义。

**编辑**

即使我在集群中有 100k 用户，我也很少需要计算 100k* 100k 矩阵。大多数时候它将是一个 10k*100k 矩阵。但是我有大约 500 个这样的集群，所以计算 500 个 10k * 100k 的集群所花费的时间很长，这就是我寻找更好的方法并引发讨论的原因

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T15:05:05.013

# MapReduce 的局限性

*****根据定义*****，成对**用户相似性**在 MapReduce 中是不可表示的***。***

 ***如果您还记得是什么`map`，它会读取*一个*键值对。它*没有*读取*两个*键值对。

根据 的定义`map`，您无法计算*成对*比较。

如果您意识到*map*和*reduce*是线性过程，这应该是显而易见的。成对相似性是一个二次任务。它不能工作。

也就是说，除非你*滥用*mapreduce。您可以将数据空间*分解*为二次大小。如果您首先生成所有 n*n 对，那么您可以再次使用 MapReduce 处理这些对。但这是对它的严重滥用（尽管有些人似乎正是这样做的）。

# MapReduce 的替代品（滥用）

首先，有时您可以将问题重写为实际上是线性的，例如通过反转数据。或者通过一些巧妙的剪枝，虽然实际上它是二次的，但在实际数据中它通常保持线性（因为您可以在生成期间或之前丢弃大量理论上的二次数据）。

其次，请注意 Mahout 构建在 Hadoop 平台上，但仅使用 MapReduce 并不能解决所有问题。很多 Hadoop 的东西不只是“map+reduce”。例如 TeraSort - 由于排序不是线性问题（它还涉及比较元素！），它无法通过 MapReduce 解决。但是您可以将 Hadoop 用于 TeraSort，通过编写一个分布式排序，该排序使用广义中位数方法来估计分位数，根据这些分位数分布数据，然后对`O(n log n)`各个节点上的各个存储桶 (in) 进行排序。复杂性仍然是超线性的，但运行时间远低于单个节点。

我很确定 Hadoop 为您提供了 MapReduce 之外的几个选项。**您可能想更仔细地了解 Mahout 为解决此类非线性问题所做的工作。**它不会尝试或假装 MapReduce 一切。还有 Apache Hama，它也超越了 MapReduce，使用了一种称为“批量同步处理”的概括。Hadoop（和 Yarn）通常*确实*允许这样的事情。但是这个 API 显然比经典的 Mapper 和 Reducer API 难多了。

# MapReduce 的幼稚滥用

或者你采取滥用方式（这可能*不是*Mahout 所做的）。滥用 map reduce 实际上相当简单。因为对输出大小没有限制。因此，如果您不关心内存，则可以执行以下操作：

假设您知道所有键，例如因为它们的编号为 1 到 n。然后你可以使用

```
map(K, V) -> [ (1, (K, V)), (2, (K, V)),  (3, (K, V)), ..., (n, (K, V)) ] 
```

（这显然会创建一个二次大小的数据集！）在 reducer 中，现在每个键都有一个*完整的数据集副本*和一个需要关心的 ID。

因此，reducers 为每个对象再次读取*完整*的数据集，计算*n 个*相似度，然后输出它们。

繁荣，你的地图减少了问题。这是愚蠢和低效的，但它有效并且正在完成。

# 使用辅助数据进行更明智的滥用

更智能的版本将直接将数据集作为所谓的“辅助数据”加载到系统中。所以它：

```
map (K,V) -> [ (K_1, sim(V, aux_obj1)), (K_2, sim(V, aux_obj2)),
             (K_3, sim(V, aux_obj3)), ... (K_n, sim(V, aux_objn)) ] 
```

这并不是滥用 MapReduce（它只是并行计算二次结果矩阵的规范方法），因为它至少诚实地说明了它的作用：使用大量辅助数据。它也可以工作 - 只要辅助数据适合您的工作人员记忆。而且它不再是一个合适的 mapreduce，因为它使用了不能真正被视为函数参数化的辅助数据。

鉴于您显然*可以*将数据加载到内存中（即使在 python 中），最后一个选项可能是您最简单的方法。您甚至可以将辅助内存分成块并将数据库的这些切片作为单独的作业进行计算。

不过，它不是 MapReduce。这是一个二次问题，根据定义不能是 MapReduce。这些问题可以在 Hadoop 上解决（参见 Mahout），但您需要的不仅仅是 MapReduce。

# 对您的实际任务的最后评论

首先，请分享更多关于您真正计划做的事情。**变得更快的关键思想是少做。**如果你可以节省计算，你总是更快。

10 万用户和 5 个属性（双重价值？）不是很多。所以也许你的python实现效率太低了。编译和优化的语言可能会使您的速度提高 1-2 个数量级。我在 10 分钟内完成了 110k 个具有 8 个属性的对象的成对相似性；所以你的问题应该在这个时候也可以解决。10 万用户和 5 个属性还不是真正的“hadoop 大小的大数据”。与快速的低级实现相比，您最终可能会为 Hadoop 开销付出更多的代价。

**优化 Pearson 相关性**：您可以在这里做几件事。请注意您最终是如何重新计算标准偏差之类的？如果您*预处理*数据并将每条记录标准化为均值 0 和标准差 1，则 Pearson 相关简化为协方差（因为 stddev 为 1）。并且因为平均值为 0，协方差变为`E(x*y) = 1/5 \sum x_i * y_i`. 如果您只对前 10 个相似对象感兴趣，则可以通过使用空间索引来加速此功能。我认为您可以轻松地将其添加到[ELKI](http://elki.dbs.ifi.lmu.de/)中并在那里使用空间索引结构。这通常会减少另一个数量级的运行时间，这意味着您应该在单个 CPU 上进行大约 1 分钟的处理时间。***

# testing - 使用 Theories JUnit4 运行的测试类中可以放入多少测试方法

> ID：12319456
> 
> 赞同：1
> 
> 时间：2012-09-07T13:49:50.183
> 
> 标签：testing, junit

似乎在一个测试类中放置多个测试方法是不合理的，因为在一个类中添加两组静态数据点是没有意义的。在测试类中只有一种测试方法是最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:42:54.423

不，有几种方法可以在单个测试类中包含多个理论。

1.  你可能有`@DataPoints`不同的类型
2.  您可能有`@DataPoints`相同类型的不同集合（例如，一个是有效案例，一个是无效案例）并用于`assumeThat`限制 a`@Theory`仅使用一组中的值。
3.  您可能在同一个测试类中有`@Test`s 和s`@Theory`
4.  您可以使用`Enclosed`runner 运行多个内部类，每个内部类都有自己的一组专有`@DataPoints`

当然，这很大程度上取决于被测类的复杂性。但我通常混合`@Theory`在一起`@Test`并在几种情况下有多个不同的`@DataPoints`. 一个常见的例子是一个具有多个 setter 的类，每个 setter 采用不同的类型。

# c++ - C++中指针结构的运算符重载

> ID：12319460
> 
> 赞同：1
> 
> 时间：2012-09-07T13:50:00.473
> 
> 标签：c++, pointers, struct, operator-overloading

我想要完成的是以下内容：

```
foo* f = foo(1) + foo(2) + foo(3) 
```

与

```
foo* f = new foo[3];
f[0] = foo(1);
f[1] = foo(2);
f[2] = foo(3); 
```

我必须这样做的代码是：

```
foo*& operator+(foo f){
     foo* ret = new foo[2];
     ret[0] = *this;
     ret[1] = f;
     return ret;
} 
```

这将适用于两个，但我想以几乎无限的数量制作它。我不知道从哪里开始，因为我不知道那叫什么，所以我无法查找。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:06:46.237

你可以做类似的事情`vector`：

```
#include <vector>
#include <iostream>

struct foo {
  foo(int) {}
};

std::vector<foo>
operator+(const foo& lhs, const foo& rhs) {
  std::vector<foo> v;
  v.push_back(lhs);
  v.push_back(rhs);
  return v;
}

std::vector<foo>
operator+(std::vector<foo> lhs, const foo& rhs) {
  lhs.push_back(rhs);
  return lhs;
}

int main () { 
  std::vector<foo> f = foo(1) + foo(2) + foo(3);
} 
```

但我无法想象你为什么想要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:26:37.593

如果您需要一个大小不同的容器，只需像这样使用 std::vector ：

```
#include <iostream>
#include <vector>

class Foo
{
public:
    Foo(int x) : x_(x) {}

private:
    int x_;
}

int main(int argc, char* argv[])
{
    std::vector<Foo> fooContainer;

    fooContainer.push_back(Foo(1));
    fooContainer.push_back(Foo(2));
    fooContainer.push_back(Foo(3));

    return 0;
} 
```

它可能不如使用您的运营商版本“方便”，但有多种原因导致您无论如何都不应该使用它。首先，你不应该使用指针（至少不是“裸”指针），并且应该避免使用 operator new，因为内存泄漏的风险非常高。另一个原因是您对 operator + 的使用实际上并不代表求和运算。重载运算符时，您应该使它们像在原始类型上一样起作用。当您执行“2 + 3”时，结果是 5，也就是总和。你在这里让 operator + 做的不是你从元素创建一个容器的总和，这与 operator + 的预期含义不同。

# python - 在其上运行脚本时如何保留 Excel 公式

> ID：12319461
> 
> 赞同：3
> 
> 时间：2012-09-07T13:50:11.867
> 
> 标签：python, excel, csv

我刚刚编写了一个 python 脚本，它接受一个输入 csv，并输出一个新的 csv，它有一个额外的列并对原始文件中的行做一些事情。输入文件中的三列具有公式，但看起来输出文件只采用这些列中的值，而不是公式。

有没有办法编写我的程序，以便将公式写入输出，而不仅仅是那里的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T14:08:06.173

当您将工作簿转换为 CSV 时，不会保存公式。[显示的值保存在 CSV，而不是公式本身。](http://office.microsoft.com/en-us/help/excel-formatting-and-features-that-are-not-transferred-to-other-file-formats-HP010014105.aspx#BM4)

如果您希望将公式保存在 CSV 中，则需要让单元格显示公式本身而不是值。您可以通过`'`在单元格的开头添加一个来表示它应该被视为文本来做到这一点。

换句话说，这个问题是在 Python 甚至开始读取您的输入 CSV 之前引起的。制作 CSV 时会创建问题。

# java - 试图弄清楚线程和Java

> ID：12319464
> 
> 赞同：0
> 
> 时间：2012-09-07T13:50:26.020
> 
> 标签：java, multithreading, list

我只是在学习一些关于 Java 线程的知识，我想知道是否有人可以帮助我。

我创建了一个包含 10 个整数的列表。我想要做的是让多个线程进入，获取索引 0 处的整数，打印并删除它。我希望这种情况发生，直到列表中没有更多数字为止。到目前为止，这是我的代码。

```
public class SlothTest implements Runnable{

static ArrayList<Object> test = new ArrayList<>();
static int listSize;

public static void main(String[] args) {

    for (int i = 0; i < 10; i++){
        test.add(i);
    }

    SlothTest runner = new SlothTest();
    Thread alpha = new Thread(runner);
    Thread beta = new Thread(runner);
    alpha.setName("Alpha thread");
    beta.setName("Beta thread");
    alpha.start();
    beta.start();
}

@Override
public void run() {
    listSize = test.size();
    while (listSize > 0){
        getLink();
    }
}

private synchronized void getLink(){
    String threadName = Thread.currentThread().getName();
    System.out.println(threadName + " printed " + test.indexOf(listSize - 1));
    test.remove(0);
    listSize = test.size();
}

} 
```

有人可以帮助指出我做错的一切，可能很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:52:42.067

的测试`listSize > 0`没有正确同步。执行检查时列表可能是非空的，但在线程调用时实际上是空的`getLink()`。`getLink()`使用return`boolean`而不是 void可能会更容易，哪里`true`会指示列表为空，并`false`指示它不是，然后每个线程可以继续调用该方法，直到它返回`false`。`getLink()`在尝试删除项目之前，您还必须检查列表顶部是否为空。

```
@Override
public void run() {
    while (getLink());
}

private synchronized boolean getLink(){
    String threadName = Thread.currentThread().getName();
    System.out.println(threadName + " printed " + test.indexOf(test.size() - 1));
    if(!test.isEmpty()){
        test.remove(0);
    }
    return !test.isEmpty()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:53:41.730

使用多线程方法去抓取索引 0 处的元素是没有意义的，因为同步自旋锁的执行（几乎）与单线程应用程序相同。多个线程可以读取，但只有一个线程可以写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:53:43.320

基本问题是您正在做的事情最好由一个线程完成。JVM 会处理此问题，但允许一个线程锁定锁并在其他线程甚至有机会之前消耗所有元素。

# javascript - 拆分文本节点

> ID：12319466
> 
> 赞同：4
> 
> 时间：2012-09-07T13:50:34.930
> 
> 标签：javascript, html, css

我有 div [contenteditable=true]。文本可以是粗体/斜体/下划线。

```
<div contenteditable=true>
  <b>Text</b>
</div> 
```

我需要将文本节点拆分为 2 个块：。

```
<div contenteditable=true>
  <b>Te</b><b>xt</b>
</div> 
```

仅适用于 Chrome 和 Safari。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T13:52:39.803

看[`Text.splitText`](https://developer.mozilla.org/en-US/docs/DOM/Text.splitText)。

```
var b = document.querySelectorAll("div[contenteditable='true'] > *")[0];
var p = b.parentNode; // the element's parent
var t = b.firstChild; // the textNode content

var newText = t.splitText(2);    // splits the node, leaving it in place
var copy = document.createElement(b.tagName);  // make another wrapper
copy.appendChild(b.lastChild);  // move second text into the copy
p.insertBefore(copy, b.nextSibling);  // put the copy into the DOM. 
```

见[http://jsfiddle.net/alnitak/JbEnL/](http://jsfiddle.net/alnitak/JbEnL/)

当您指定 Chrome 和 Safari 时，我已经习惯于`querySelectorAll`查找初始的内部 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:56:04.360

这是一种获取 div 中第一个粗体标签的方法，并将其中的文本拆分为两个粗体标签：

初始 HTML：

```
<div id="target" contenteditable=true>
  <b>Text</b>
</div>​ 
```

代码：

```
var bold = document.getElementById("target").getElementsByTagName("b")[0];
var txt = bold.innerHTML;
bold.innerHTML = txt.substr(0,2);
var newBold = document.createElement("b");
newBold.innerHTML = txt.substr(2);
bold.parentNode.insertBefore(newBold, bold.nextSibling); 
```

工作演示：http: [//jsfiddle.net/jfriend00/KsPrg/](http://jsfiddle.net/jfriend00/KsPrg/)

​</p>

# facebook - 某些用户无法查看自定义 Facebook 页面（空白页面）

> ID：12319467
> 
> 赞同：1
> 
> 时间：2012-09-07T13:50:38.650
> 
> 标签：facebook, facebook-apps

我已经按照[本教程](http://www.labnol.org/internet/create-custom-facebook-pages/17957)在一些 Facebook 页面上创建了一个自定义页面；现在的问题是有些人什么都看不到：他们只能在 facebook 中看到一个空白页面

这些页面是：

[https://www.facebook.com/AmbassadorRicevimenti](https://www.facebook.com/AmbassadorRicevimenti)（点击主页选项卡有些人看不到我的 html 页面）

[https://www.facebook.com/pages/Le-torte-di-Antonietta/173602889364785](https://www.facebook.com/pages/Le-torte-di-Antonietta/173602889364785)（点击主页选项卡有些人看不到我的html页面）

对于这些页面，我有 https 和 http 网址；我什至试图在这些页面中只放“hello word”，但什么也没有，有些人什么都看不到。

显然沙盒模式是关闭的，所以每个人都可以看到页面。

我已经看到这个空白页面发生在 facebook 登录用户和未登录用户的情况下（所以人们试图在没有登录 facebook 的情况下查看该页面，但使用直接链接）；许多其他人（已登录和未登录）可以毫无问题地查看该页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:19:53.430

对我来说，您的选项卡应用程序的安全页面选项卡 URL 看起来工作正常，但您的页面选项卡 URL 不是。对于您共享的两个 Facebook 页面，如果我通过 https 而不是 http 浏览，我可以看到您的应用程序内容。在通过 http 查看选项卡时，我在两个页面上都看到错误消息“Loggati su Facebook per vedere questa pagina. Grazie mille”。（这在意大利语中翻译为“登录 Facebook”，但我已登录。）

您确定 http URL 工作正常吗？

您的 http URL 中是否有任何应用程序设置或功能会在通过 http 而不是 https 查看页面时破坏页面？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T11:01:57.903

听起来它可能与您的服务器发送 HTTP Header 相关`X-Frame-Options`，当设置为`DENY`禁止浏览器 iframe 提供的文档时。

有一个选项`ALLOW facebook.com`（或其他域），但根据[MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP/X-Frame-Options?redirectlocale=en-US&redirectslug=The_X-FRAME-OPTIONS_response_header "联邦国防军")还没有得到很好的支持。

一些忽略此设置的浏览器会解释您看到的行为。

# python - Python 中 raw_input() 中子命令的制表符补全

> ID：12319471
> 
> 赞同：1
> 
> 时间：2012-09-07T13:50:52.293
> 
> 标签：python, autocomplete, raw-input

我正在尝试对主列表的子列表进行选项卡补全，例如

```
commands = ['help', 'set', 'info']
sub_command = ['module', 'level'] 
modules = ['pr', 'tls', 'tld']
levels = ['high', 'mid', 'low'] 
```

任何想法如何做这样的事情：

```
>>> se<tab> mo<tab> tl<tab> 
```

这是我的主列表代码：

```
from core.libs.interpreter import interpreter

import re
try:
    import readline
except ImportError:
    print '\n[!] The "readline" module is required to provide elaborate line editing and history features'
else:
    pass

COMMANDS = interpreter.commands

RE_SPACE = re.compile('.*\s+$', re.M)

class Completer(object):
    '''
    internal readline buffer to determine the state of the overall completion,
    which makes the state logic a bit simpler
        '''
    def complete(self, text, state):
        "Generic readline completion entry point."
        buffer = readline.get_line_buffer()
        line = readline.get_line_buffer().split()
        # show all commands
        if not line:
            return [c + ' ' for c in COMMANDS][state]
        # account for last argument ending in a space
        if RE_SPACE.match(buffer):
            line.append('')
        # resolve command to the implementation function
        cmd = line[0].strip()
        if cmd in COMMANDS:
            #impl = getattr(self, 'complete_%s' % cmd)
            args = line[1:]
            if args:
                return (args + [None])[state]
            return [cmd + ' '][state]
        results = [c + ' ' for c in COMMANDS if c.startswith(cmd)] + [None]
        return results[state]

    def tab(self):
        # to work with non nix systems
        try:
            readline.set_completer_delims(' \t\n;')
            readline.parse_and_bind("tab: complete")
            readline.set_completer(self.complete)
        except:
            pass

complete = Completer() 
```

我试图按照本[教程](https://stackoverflow.com/questions/5637124/tab-completion-in-pythons-raw-input)进行操作，但没有运气。

提前致谢。

# android - Android 应用仅适用于手机

> ID：12319476
> 
> 赞同：4
> 
> 时间：2012-09-07T13:51:10.813
> 
> 标签：android, google-play, android-permissions

是否可以创建只能通过手机而不是平板电脑从 google play 下载的 Android 应用程序？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-07T13:55:28.307

对此的答案总是会提出您将什么定义为“平板电脑”的问题。你包括 Galaxy Note 之类的东西吗？从技术上讲，它仍然是一部手机，但它有点处于边缘。我的问题是什么条件让你想限制它？如果您只想要求它能够拨打电话，您可以在清单中添加一个功能标签：

```
<uses-feature android:name="android.hardware.telephony"/> 
```

这将要求设备具有拨号器和数据网络（应排除绝大多数平板设备）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T13:59:12.360

您可以在 AndroidManifest 中指定哪些设备应该在 Google Play 上看到您的应用：

```
<compatible-screens>
    <screen android:screenSize=["small" | "normal" | "large"] />
</compatible-screens> 
```

通过删除 xlarge，您将删除所有 10 英寸平板电脑。

信息：

*   超大屏幕至少为 960dp x 720dp
*   大屏幕至少为 640dp x 480dp
*   普通屏幕至少为 470dp x 320dp
*   小屏幕至少为 426dp x 320dp

Android 开发者网站上的更多信息： - [http://developer.android.com/guide/topics/manifest/compatible-screens-element.html](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html) - [http://developer.android.com/guide/practices/screens_support.html#范围](http://developer.android.com/guide/practices/screens_support.html#range)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T13:55:03.267

在清单上使用兼容屏幕

更多信息：http: [//developer.android.com/guide/practices/screens-distribution.html](http://developer.android.com/guide/practices/screens-distribution.html)

# ruby-on-rails - 获取回形针数据库图像以使用 pdfkit 生成的 pdf 格式显示

> ID：12319477
> 
> 赞同：0
> 
> 时间：2012-09-07T13:51:20.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, paperclip, asset-pipeline, pdfkit

我正在使用回形针来允许用户上传存储在数据库中的徽标

company_setting.rb 模型：

```
has_attached_file :logo_image,
      :storage => :database,
      :styles => {:original => "160x80>",
                  :small  => {:geometry =>"100x50>" , :column =>'logo_image_small_file'}},
      :url => '/settings/:id/logo_images?id=:id&style=:style' 
```

我在 html.erb 视图中将此图像渲染为 html 没有问题，如下所示

```
<%=  image_tag current_user.company.company_setting.logo_image.url + "&id=#{current_user.company.company_setting.id}" %> 
```

但是，我无法在我的 pdf.erb 文件中渲染相同的图像。我以前遇到过 pdfkit 和资产管道的问题。我认为 pdfkit 需要完整的 url 才能找到图像，所以我尝试了多种方法，例如：

```
<%=  image_tag "#{Rails.root}" + current_user.company.company_setting.logo_image.url + "&id=#{current_user.company.company_setting.id}" %> 
```

仍然没有渲染。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:10:13.460

所以事实证明，我在这里尝试做的事情有两个问题。

首先，我创建的完整网址是错误的。我将图像标签的 url 结构更改为：

```
<%=  image_tag URI.join(root_url(:subdomain => current_user.company.subdomain),(company_setting.logo_image.url + "&id=#{company_setting.id}"))).to_s%> 
```

这允许在基础 url 前面添加子域，无论是在开发还是生产中。（[这里是 Railscast](http://railscasts.com/episodes/221-subdomains-in-rails-3)）

第二个问题是，当请求 pdf 时，会发生死锁，即为徽标图像和 pdf 调用服务器，但在另一个完成之前，两者都无法完成。我还没有想出一个令我满意的解决方案。通过设置 config.threadsafe 来解决！在 production.rb 和 development.rb 文件中，它们在执行任何服务器请求之前有效地加载所有资源和代码。这在生产中很好，但是在 development.rb 中设置它意味着我无法执行[F5 驱动的开发](http://tenderlovemaking.com/2012/06/18/removing-config-threadsafe.html)......需要重新启动服务器才能在浏览器中看到每个更改。我正在研究缓存图像并在本地提供它或在本地​​找出线程请求（使用 WeBrick 服务器）

同时，由于我已经设置了 pdf 并且我真的不需要编辑它（还没有！）我已经在生产中设置了线程安全，而不是在开发中以图像为条件：

```
<% if !Rails.env.development? %>
    <%=  image_tag URI.join(root_url(:subdomain......%>
<% end %> 
```

不理想，但现在可以了....

# ajax - EXTJS：类>访问和修改类的属性

> ID：12319480
> 
> 赞同：1
> 
> 时间：2012-09-07T13:51:43.893
> 
> 标签：ajax, class, extjs, request

我在 ExtJs 中创建了一个类，包括修改类内部属性的变量和函数。

当我想更改类的内部属性（从类的内部或外部函数）时，我的问题集中在。

班上：

```
var Ws = new Ext.Class({
    WsUrl: '',
    WsErrorCode: 0,
    WsOut: null,
    CoreVersion: '',
    AppName: '',
    AppVersion: '',
    BrowserLanguage: GetBrowserLanguage(),
    BrowserUserAgent: GetBrowserLanguage(),
    BrowserToken: '',

    constructor: function(url) {
        this.WsUrl = url;

        return this;
    },

    SendCmd: function(CmdName) {

    var WsOut;
    var WsErrorCode;

        //Send request
        Ext.Ajax.request({
            loadMask: true,
            url: this.WsUrl,
            params: {cmd: CmdName},
            success: function(response, opts) {

                WsOut = Ext.decode(response.responseText);
                WsErrorCode = response.status;    
            },
            failure: function(response, opts) {

                WsOut = Ext.decode(response.responseText);
                WsErrorCode = response.status;    
            }
        });

        this.WsOut = WsOut;
        this.WsErrorCode = WsErrorCode;

        return this;
    }
}); 
```

这里创建了对象：

```
var WsTest = new Ws('ws.php');
WsTest = WsTest.SendCmd('GetBrowserToken');

alert(WsTest.WsErrorCode);  //Here, the code must return 200 but the value is 0 ... why ? 
```

你知道为什么`This.WsOut = WsOut`没有正确设置属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:39:01.857

您的问题是请求是异步的。因此，当您分配 wsOut 时，请求仍在进行中。将范围添加到请求并在回调函数上设置内部属性。

```
 Ext.Ajax.request({
            loadMask: true,
            url: this.WsUrl,
            scope:this,
            params: {cmd: CmdName},
            success: function(response, opts) {

                this.WsOut = Ext.decode(response.responseText);
                WsErrorCode = response.status;    
            },
            failure: function(response, opts) {

                this.WsOut = Ext.decode(response.responseText);
                WsErrorCode = response.status;    
            }
        }); 
```

# mysql - Mysql在正则表达式上抛出异常

> ID：12319482
> 
> 赞同：0
> 
> 时间：2012-09-07T13:51:46.250
> 
> 标签：mysql, regex

这有效：

```
mysql> SELECT '123456789' REGEXP '.{3}';#1

mysql> SELECT '123456789' REGEXP '.{10}';#2 
```

但不是这个：

```
mysql> SELECT * FROM mymodel WHERE some_text_field REGEXP '.{100}';#3 
```

抛出异常：错误 1139（42000）：从正则表达式中得到错误“无效的重复计数”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:53:50.950

这意味着您在此字段中没有 100 个或更多字符的字符串。
如果您只想检查这种情况，您可以尝试这样做：

```
SELECT * FROM mymodel WHERE LENGTH(some_text_field) = 100 ; 
```

# javascript - 这段代码中的问号是什么意思？

> ID：12319483
> 
> 赞同：1
> 
> 时间：2012-09-07T13:51:52.690
> 
> 标签：javascript

这段代码中的问号是什么意思？

```
<SCRIPT language=JavaScript>
    function reload(form)
    {
        var val=form.cat.options[form.cat.options.selectedIndex].value;
        self.location='dd.php?cat=' + val;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T13:53:11.640

它指示URI 中[查询字符串的开始。](http://en.wikipedia.org/wiki/Query_string)

由于它是字符串的一部分，因此它对 JavaScript 没有特殊意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:53:37.177

`?`在 url 中，表示`QueryString.`

所以`dd.php>cat=val`定义了——`dd.php`定义`webpage url` `?cat=val`了`QueryString`

`cat`是`key`in `QueryString`，并且`val`是`value`for cat QueryString 键

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T13:53:57.860

url 上的`?`表示可用于`GET`请求的查询字符串的开始。这允许将参数传递给服务器，这些参数可用于获取响应等。

# java - Java Swingworker 线程

> ID：12319484
> 
> 赞同：1
> 
> 时间：2012-09-07T13:51:54.267
> 
> 标签：java, swing, swingworker

我有一个关于 Java 并发的问题要问。我正在练习 Java 线程。我所做的是创建一个简单的界面，它有一个按钮和一个 JSlider。因此，当我单击按钮时，变量会增加，JSlider 也会相应移动。现在我想知道 Swingworker 是否是一个正确的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T13:56:01.770

您只需将 SwingWorker 用于长时间运行的任务。您所描述的将立即执行。因此，您可以在执行所有 ActionListener 的事件调度线程上执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:35:15.960

您可能想先[分析](https://stackoverflow.com/a/2065760/230513)您的代码。

*   状态更改不会阻塞 EDT 的*示例*：[here](https://stackoverflow.com/a/10208380/230513)和[here](https://stackoverflow.com/a/5522387/230513)。

*   一个动作*可能会*阻止 EDT 的示例：[这里](https://stackoverflow.com/a/4530659/230513)。

*   一个动作*会*阻塞 EDT 的例子：[这里](https://stackoverflow.com/a/4637725/230513)。

# c++ - 在 Windows CE DLL 中使用 __stdcall 和 __cdecl

> ID：12319487
> 
> 赞同：1
> 
> 时间：2012-09-07T13:51:59.983
> 
> 标签：c++, dll, windows-ce, calling-convention

我有一个适用于 Windows CE 6.0 x86 的 Visual Studio 2008 C++03 应用程序。我遇到了一个问题，即从 DLL 调用函数会导致访问冲突异常，但仅限于调试模式。

```
// DLL header
extern "C" BOOL __stdcall Foo( const wchar_t*, const wchar_t*, wchar_t*, unsigned long );

// program
#include "foo.h"
#pragma comment( lib, "foo.lib" )
int main()
{
    wchar_t f[ 100 ];
    Foo( L"something", L"nothing", f, countof( f ) );    // access violation
    return 0;
} 
```

我意识到这可能是由许多不同的事情引起的，但我很好奇`__stdcall`在 DLL 标头中的使用。在 Windows CE 中，默认（对于 Windows API）是`__cdecl`. 为什么要使用这个库`__stdcall`？这会产生不利影响吗？

实际上，为什么要指定调用约定呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:04:52.077

在 Windows CE 中，`__stdcall`是一个解析为`__cdecl`. 也就是说，它们指定了相同的调用约定。你的问题在别处。使用调试器进行调查。

可能会指定调用约定，因为它需要为 DLL 的桌面版本指定，并且为两个目标保持相同的源代码比使用没有实际效果的条件编译来混乱它更容易。

# git - 如何最好地处理多个 Web 服务器的 Git 部署

> ID：12319490
> 
> 赞同：1
> 
> 时间：2012-09-07T13:52:04.227
> 
> 标签：git, svn, version-control

我正在将我们的代码库从 svn 转换为 git。

我们当前的部署过程是运行一个内部脚本，将最新的 svn 修订检出到新创建的目录中，以在服务器上创建一个工作副本。然后它运行任何需要执行的 sql 命令，并将符号链接从当前工作副本更改为新签出的工作副本。

这是一种处理更新的简单方法，如果出现问题，我们可以通过更改符号链接轻松地将代码库回滚到旧代码库。

是否可以从 git 服务器中仅获取一个指定的分支到新创建的目录中，或者我是否需要克隆存储库的全部内容？

或者有没有更好的方法来使用 git 处理代码库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:26:22.313

git 中的每个提交都由“sha1”id 标识。此 id 代表文件的确切快照。因此，您不必创建多个工作副本并对其进行符号链接，而只需执行`git checkout`特定的提交即可。要回滚，您只需检查最后一个已知的良好提交 ID。由于结帐工作非常快（与 SVN 相比）并且不依赖网络存储库（因此它永远不会失败），我建议您忘记符号链接的噩梦。

要制作更人性化的 ID，您可以使用标签（本质上是提交 id 的人类可读别名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:41:23.777

我们有以下方案：

1.  我们使用 gitolite 对我们的网络存储库进行访问控制，并让我们的构建服务器使用一个特殊的 SSH 密钥，该密钥只​​有对存储库的读取访问权限。
2.  我们在构建机器上有一个完整的克隆，并定期从我们的构建脚本中获取。
3.  我们使用标签名称来标记要构建的东西。我们使用 2012-09-01[az] 作为这些名称的模式，因为它们的排序很好。例如，2012-09-01 之后是 2012-09-01a，如果您每天需要多个构建...也可以使用完整的时间戳。
4.  当自动 shell 脚本看到要更改的标签（最后一个标签是最新的）时，会执行签出/重建。

不需要符号链接，因为 git 中的结帐速度非常快。你也可以使用

```
git -xfd clean 
```

以确保您的源代码树干净整洁，以防您的脚本乱七八糟。

然后，您的开发团队只需要制作一个标签并推送它即可获得更新的构建：

```
git tag 2012-09-01
git push 
```

当然标签可以使用嵌套名称，因此您可以执行以下操作：

```
git tag test/2012-09-01
git tag release/2012-09-01
... 
```

对您正在做的事情进行分类：测试修复、发布版本等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T17:33:58.787

Git 是一个分布式存储库。执行 git clone 时需要克隆整个存储库，不能只克隆分支或 sha id。但是，git 压缩得很好，你不应该因为 git 而对你的策略有问题。

我们在我的工作中这样做并且已经使用这种方法超过 5 年了 - 它并没有减慢我们的速度，我们有一个持续交付系统，允许我们在一天内多次部署到生产中，我们的部署大约是 3分钟长 - 取决于数据库迁移。

抱歉，答案是 - 您必须克隆整个存储库。

# facebook - 测试插件后暂停 Facebook 帐户

> ID：12319491
> 
> 赞同：1
> 
> 时间：2012-09-07T13:52:15.613
> 
> 标签：facebook, testing

**问题：**

我正在尝试按照 facebook 的描述测试对 facebook 评论事件的订阅：http: [//developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)。

```
FB.Event.subscribe('comment.create',
    function(response) {
        alert('You commented on: ' + response);
    }
); 
```

当我对此进行集成测试时，在收到 23 条评论后，我发现我的帐户已被暂停。我不能再评论了。我试图通过登录我的 Facebook 帐户并通过回答问题（DOB、Captcha）和重置我的密码重新激活来解决此问题。不幸的是，这不允许我再次发表评论。我以为他们是通过 IP 阻止我。

**细节：**

1.  评论都发生在同一页面上。
2.  评论插件实现如下：

> ```
> <script>(function(d, s, id) {
>       var js, fjs = d.getElementsByTagName(s)[0];
>       if (d.getElementById(id)) return;
>       js = d.createElement(s); js.id = id;
>       js.src = '//connect.facebook.net/en_US/all.js#xfbml=1&appId=111111111111111';
>       fjs.parentNode.insertBefore(js, fjs);
>     }(document, 'script', 'facebook-jssdk'));</script>
> 
>    <div class="fb-comments" data-href="THE_URL"" data-num-posts="6" data-colorscheme="light" data-mobile="auto-detect" data-width="744"></div> 
> ```

**问题**

在不被 Facebook 关闭的情况下，我可以做些什么来测试这个插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:22:32.793

您需要使用测试帐户测试功能，否则 FB 将视为垃圾邮件并禁用您的帐户或 APP。

查看以下链接，了解如何使用测试帐户。

[https://developers.facebook.com/blog/post/35/](https://developers.facebook.com/blog/post/35/) https://developers.facebook.com/docs/test_users/

如果您有自己创建的应用程序，在测试时确保它处于沙盒模式

[https://developers.facebook.com/blog/post/112/](https://developers.facebook.com/blog/post/112/)

# ruby-on-rails - Rails 中的自定义函数

> ID：12319493
> 
> 赞同：0
> 
> 时间：2012-09-07T13:52:38.883
> 
> 标签：ruby-on-rails, rails-routing

我是一名 Rails 初学者，我正在努力将这个概念牢记在心。即使我们有像“索引，显示”这样的函数，我也想知道自定义函数，比如我们是否可以创建它们

我正在开发一个移动应用程序的后端，我必须呈现登录请求的响应。我想启用 URL 'http://www.mysite.com/client/login '，其中**客户****端**是我的模型。我可以在我的**客户端控制器中定义一个像****登录**这样的功能吗？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:09:48.210

是的你可以！您首先在控制器中定义新操作。

在 app/controllers/clients_controller.rb

```
class ClientsController < Application Controller
  def index
    ...
  end

  def show
    ...
  end

  def login
    ...
  end
end 
```

然后在 config/routes.rb

```
AppName::Application.routes.draw do
  resources :clients do
    member do
      get 'login'
    end
  end
end 
```

您必须修改 routes.rb 文件，因为您的应用程序默认情况下不知道如何处理自定义控制器操作！

根据处理登录后您想要执行的操作，您可以在 #login respond_to 块中放置重定向，或在 app/clients/views 目录中添加 login.html.erb。**

# c# - c# 中用于管道 (|) 模式字符串的正则表达式

> ID：12319498
> 
> 赞同：0
> 
> 时间：2012-09-07T13:52:42.070
> 
> 标签：c#, regex

我有以下格式的多行输入字符串

身份证 | Col1 | Col2 | Col3 | Col4 | Col5 | Col6 | Col7 | Col8

数据可能会出现数千行 Col1-8 的数据类型可以是字母数字或仅 alpha，这可能因行而异。

我需要做以下事情：

1.  提取 Col2 和 Col3 （考虑在这里使用正则表达式而不是通常的字符串拆分，因为在我的情况下以后会更慢？）

2.  我也希望其余数据也采用以下格式。身份证 | Col1 | Col4 | Col5 | Col6 | Col7 | Col8 （这我可以使用 string.Replace 来实现，一旦我在第 1 点获得数据）

请注意，在实现第 2 点的解决方案时，我不想丢失 Col2 和 Col3 的数据，因此第一点对我来说也很重要。

我尝试将第 1 点的正则表达式创建为 (|){2,4}，我现在理解这是完全错误的，目前我不知道如何使用正则表达式进行此操作。

我将感谢有关如何为其创建正则表达式的任何帮助/指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:19:02.033

```
var cols = input.Split(new[] {'|'}, StringSplitOptions.RemoveEmptyEntries)
            .Select(s => s.Trim())
            .ToList();

var extractedcols = cols.Skip(2).Take(2);
var output = string.Join(" | ", cols.Except(extractedcols)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:59:46.967

你有理由不能这样做吗？

```
var str = "ID | Col1 | Col2 | Col3 | Col4 | Col5 | Col6 | Col7 | Col8";
var strA = str.Split(" | ".ToArray(), StringSplitOptions.RemoveEmptyEntries).ToList();
var strExtract = new List<string> { strA[2], strA[4] };
strA.RemoveAt(2);
strA.RemoveAt(3);
Console.WriteLine(string.Join(" | ", strA.ToArray())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:10:59.427

使用 .Split'|', 5) 将前 4 个元素和字符串的其余部分作为数组获取。

# ios - 我可以使用具有不同 UIview 类而不是 UINavigationController 的水平 ScrollView 来导航到不同的视图控制器吗

> ID：12319500
> 
> 赞同：0
> 
> 时间：2012-09-07T13:52:52.930
> 
> 标签：ios, uiview, uiviewcontroller, uinavigationcontroller, uiscrollview

我正在考虑创建`UIView`类并将所有视图添加到单个水平`UIScrollView`，以便当我们完成一个视图并单击下一步按钮时，它会滑动到下一个视图而不是创建多个视图`UIViewControllers`并用于`UINavigationController`导航到下一页。. 这是一个好主意还是会导致性能问题？你能告诉我哪种方式更好，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:45:01.330

将所有`UIView`s 添加到 a`UIScrollView`确实会将所有内容加载到内存中（不会自动释放不必要的东西），因此您需要自己释放这些视图。希望这能给你一个想法；

在 scrollView 上加载您的第一个视图 1）一个按钮来创建（和添加）下一个视图并滚动到它 2）您的新视图需要一个后退按钮，它将滚动移动到您的第一个视图并为零您的第二个视图。

```
1)-(void) moveToSecondView{
   //iVar of your second view
   secondView = [[UIView alloc] initWithFrame:CGRectMake(320,0,320,480)];
   //Previously created button with a returnToFirstView selector
   [secondView addSubview:backButton];
   [scrollView addSubview:secondView];
   [scrollView scrollRectToVisible:secondView.frame animated:YES];
}

2)-(void) returnToFirstView{
    [secondView removeFromSuperview];
    secondView = nil;
    [scrollView scrollRectToVisible:firstView.frame animated:YES];
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:21:23.370

在内存管理方面，您可能最好使用导航控制器。至少这样做会使这部分过程更容易，但是没有理由不能用滚动视图来做到这一点，你只需要跟踪屏幕上和屏幕外的元素，这样你就可以分配/释放不同的对象在正确的时间。

但是，如果您确实决定采用滚动视图路线，您可以在滚动视图上简单地制作按钮，调整滚动视图的内容 offset.x 属性以在页面之间跳转，您可以使用它来设置滚动视图：

只需在下面的数组中添加您想要的页数作为条目，滚动视图将动态调整以适应每个页面的新视图。

```
[myScrollView setPagingEnabled:YES];

NSArray *arrayOfViews = [[NSArray alloc] initWithObjects:@"First View",@"Second  View",@"Third View",@"Fourth View",@"Fifth View", nil];//number of views you want in your scroll view

[arrayOfViews enumerateObjectsUsingBlock:^(id obj, NSUInteger idx,BOOL *stop) {
    UIView *subView = [[UIView alloc] initWithFrame:CGRectMake(320 * idx, 0, 320, 480)];
    float randNum = arc4random() % 255;
    [subView setBackgroundColor:[UIColor colorWithRed:randNum/255 green:randNum/255 blue:randNum/255 alpha:1.0]];
    [myScrollView addSubview:subView];
    [myScrollView setContentSize:CGSizeMake(320 * (idx + 1), 480)];
}]; 
```

# jquery - JQtouch useFastTouch 在带有 Phonegap 的 iPhone 上不起作用

> ID：12319502
> 
> 赞同：0
> 
> 时间：2012-09-07T13:52:58.783
> 
> 标签：jquery, cordova, jqtouch

或者是吗？默认情况下，JQtouch 将 useFastTouch 设置为 true。但是我的应用程序仍然有 300 毫秒的延迟，实际上它高达一秒。然后我读到我应该使用“.tap event”但是我如何将点击事件附加到我的所有 a-tags ？我尝试了很多，但后来我失去了页面之间的动画或延迟仍然存在。

我找到了这个线程，已经 8 个月大了......仍然没有解决方案？：[https ://github.com/senchalabs/jQTouch/issues/360](https://github.com/senchalabs/jQTouch/issues/360)

当我尝试使用此解决方案时，（向下滚动以测试 webapp ...）但我的应用程序崩溃： [http ://www.dconnell.co.uk/blog/index.php/2011/08/01/developing- an-iphone-app-using-html-css-javascript-and-phonegap-from-concept-to-app-store/](http://www.dconnell.co.uk/blog/index.php/2011/08/01/developing-an-iphone-app-using-html-css-javascript-and-phonegap-from-concept-to-app-store/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T20:50:20.340

我做了一个解决方案。首先，我必须从 JQtouch 中删除所有动画。这真的加快了速度......为了摆脱鬼点击，我制作了一种禁用指针的样式

```
<style type="text/css">
        .pointer-events-none {
            pointer-events: none;
        }
    </style> 
```

然后在我的函数中我放置了这段代码：

```
$('a[href=#some_class], a[href=#some_class]').not('a.on').bind('touchstart', function(e) {

               var pageToGoTo = $(this).attr('href');
                   jQT.goTo(pageToGoTo, 'slide');

                   $('.scroll').addClass('pointer-events-none');

                   setTimeout(function(){
                      $('.scroll').removeClass('pointer-events-none');
                   }, 1500);

  }); 
```

它可以工作，但如果我将超时设置为低于 1500，应用程序就会崩溃......

# r - 将绘图限制为 r 中的 shapefile 边界

> ID：12319504
> 
> 赞同：3
> 
> 时间：2012-09-07T13:53:02.260
> 
> 标签：r, gps, plot, shapefile

我已经使用 density.ppp 分析了一个 GPS 点数据集，以生成一种点强度的热图，如下所示：

![在此处输入图像描述](../Images/24e8ff1b2ddf7e66425884dfaf20dd19.png)

但是，我希望图像限制在 shapefile 的边界内，如下所示：

![在此处输入图像描述](../Images/0e52c15fb9c953a3bfe4d4bb4142356f.png)

第一个图像被称为

```
x <- readShapePoly("dk.shp")
xlim<-c(min(912),max(920))
ylim<-c(min(8023),max(8030))
a<-ppp(cases@coords[,1], cases@coords[,2], xlim, ylim, unitname=c("km"))
plot(density.ppp(a, 0.1), col=COLORS)
plot(x, add=T, border="white") 
```

其中 case@coords 是每个兴趣点的 GPS 坐标，x 是提供地理单位轮廓的 shapefile。

使用以下代码调用第二个图像：

```
plot(x, axes=T, col=COLORS, border="White") 
```

有谁知道如何做到这一点？也许 plot() 不可能，我需要另一个包。

顺便说一句，我计划做的下一步是将这张图片覆盖在从 GoogleEarth 导入的地图上。我也不确定该怎么做，但如果我解决了，我会发布答案

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T16:52:34.957

的结果`density.ppp`有一个包含信息的矩阵 (v)，如果感兴趣的多边形外部的点在`NA`绘制之前更改为，则它们将不会绘制。这是执行此操作的示例：

```
library(maptools)
library(sp)
library(spatstat)

xx <- readShapePoly(system.file("shapes/sids.shp", package="maptools")[1],
      IDvar="FIPSNO", proj4string=CRS("+proj=longlat +ellps=clrk66"))

x <- rnorm(25, -80, 2)
y <- rnorm(25, 35, 1 )

tmp <- density( ppp(x,y, xrange=range(x), yrange=range(y)) )
plot(tmp)
plot(xx, add=TRUE)
points(x,y)

tmp2 <- SpatialPoints( expand.grid( tmp$yrow, tmp$xcol )[,2:1],
    proj4string=CRS(proj4string(xx)) )

tmp3 <- over( tmp2, xx )

tmp$v[ is.na( tmp3[[1]] ) ] <- NA

plot(tmp)
plot(xx, add=TRUE) 
```

# mysql - 如何在 Drupal 中重新分配分类法

> ID：12319507
> 
> 赞同：0
> 
> 时间：2012-09-07T13:53:10.033
> 
> 标签：mysql, drupal

我必须为客户创建新的分类法，他们希望将与这些术语和分类法关联的节点分配给新的分类法，我通过 MySQL 使用更新语句完成了此操作，以便所有与某个术语相关联的节点现在与新的相关联，例如

更新 taxonomy_copy SET tid = 316 WHERE tid = 152

现在，当我进行`select *`查询时，它显示所有节点都与新分类法相关联，但是当我检查前端时，节点仍与以前的分类法相关联。我已经清除了缓存和历史记录，但这仍然无济于事。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:08:01.917

在这里在黑暗中刺伤......

正如我回答昨天发布完全相同问题的[“克里斯”](https://drupal.stackexchange.com/questions/41902/why-are-nodes-not-being-reassigned-to-new-term-when-termid-is-changed)`taxonomy_index`一样，您可能正在更新表（不是`taxonomy_copy`，在标准的 Drupal 安装中不存在），而没有考虑到这些数据实际上是如何存储的节点。

该`taxonomy_index`表只是一个索引表，“真实”数据存储在字段表中（因为分类术语通过 Drupal 7 中的字段与实体相关）。因此，更新`taxonomy_index`实际上不会更新您要查找的数据。

您确实需要使用 API 函数来处理此类事情，但是由于您已经更新`taxonomy_index`了数据，因此目前处于一致状态。

我还建议手动更新`field_data_field_name`and`field_revision_field_name`表；如果这样做，您希望在节点上看到的数据将在缓存刷新后突然出现。

一个示例查询：

```
UPDATE field_data_field_name SET field_name_tid = 316 WHERE field_name_tid = 152 
```

`field_revision_field_name`由于字段数据存储在 Drupal 7 中的 2 个位置，因此必须运行相同的操作。

请记住，这只是一个猜测，在对数据库运行更多查询之前，值得确认这绝对是问题所在。

# php - 什么是 netbeans 中的重要文件文件夹项目

> ID：12319509
> 
> 赞同：6
> 
> 时间：2012-09-07T13:53:11.223
> 
> 标签：php, netbeans-7

我看到我的一些项目在 NetBeans 的“项目”窗口下有“**重要文件”文件夹。**不是所有的项目都有这个。这也不是磁盘上的物理文件夹，并且在“源文件”文件夹下列出了已经存在的文件。那是什么以及 NetBeans 如何填充这个文件列表？我正在使用 NetBeans 7.2 版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-23T20:25:25.537

扩展 PHP 项目的插件，无论是库存的还是第三方的，都能够定义对项目很重要的特定文件或目录，开发人员可能需要快速访问。

这是[由专门制作的官方教程演示的，用于解释如何扩展项目类型以将“重要文件”节点添加到逻辑项目视图](https://platform.netbeans.org/tutorials/nbm-projectextension.html)。

> 自 NetBeans IDE 6.0 以来的新 NetBeans IDE API 使您能够将新节点添加到现有项目类型的逻辑视图、将新对象添加到现有项目类型的查找以及将新面板添加到现有项目类型的“项目属性”对话框。例如，在本教程中，为了说明这些扩展，我们扩展了 Web 应用程序项目类型的逻辑视图，通过添加一个新的“重要文件”节点，公开项目的“nbproject”文件夹的内容......

我不能确切说明为什么您的某些项目有或没有这个“重要文件”节点，但我知道在我自己的一个项目中，Netbeans 对 PHP 包管理器“Composer”的原生支持将`composer.json`如果在项目文件夹中找到该文件，则显示重要文件。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-04-05T21:09:11.690

维平：

“nbproject”是最重要的文件夹。如果你删除了这个文件夹，然后在 netbeans 中启动一个新项目，就像从零开始你的项目一样。

# java - Java 缓存框架

> ID：12319531
> 
> 赞同：1
> 
> 时间：2012-09-07T13:54:27.060
> 
> 标签：java, caching, frameworks, bigdata

我想问是否有人知道具有以下属性的 JAVA 缓存框架：

*   我有大数据文件（2mb 到 5gb），如果内存增加，我需要对其进行序列化，并根据需要对其进行反序列化。

*   最近最近使用的策略

*   我想自己处理序列化/反序列化，这意味着我只想从框架中知道什么时候必须序列化。反序列化是根据用户需求进行的。

*   我想要最小的 IO，因为我有大数据

如果对此没有直接的框架，也许您可​​以向我指出启发式或任何其他策略？SoftReferences/WeakReference 作为解决方案不起作用，因为我无法序列化，即使我在它们被垃圾收集时注意到它们（用于序列化的内存更少或更糟：文件在序列化之前消失）。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T10:57:34.127

（免责声明 - 我为 GigaSpaces 工作）

GigaSpaces XAP [DataGrid](http://www.gigaspaces.com/datagrid)提供了一个完整的面向对象的 Java 缓存解决方案。

*   [存储类型](http://wiki.gigaspaces.com/wiki/display/XAP9/Storage+Types)——不同的存储类型可以分配给数据的不同部分。XAP 还支持[外部数据源](http://wiki.gigaspaces.com/wiki/display/XAP9/External+Data+Source)集成，例如 DB 和[NoSQL](http://wiki.gigaspaces.com/wiki/display/XAP9/Cassandra+External+Data+Source)，以允许卸载大数据。
*   [驱逐策略](http://wiki.gigaspaces.com/wiki/display/XAP9/Memory+Management+Facilities)- 可以设置不同的驱逐策略，包括 [LRU](http://wiki.gigaspaces.com/wiki/display/XAP9/LRU-Cache+Policy)。
*   存储类型使用 Java 序列化，这样可以实现 Externalizable 并获得完全控制。
*   XAP 通常在使用网络资源和 IO 方面非常有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T13:56:39.177

试试[Ehcache](http://ehcache.org/)。Ehcache 是一个开源的、基于标准的缓存，用于提高性能、卸载数据库和简化可扩展性。Ehcache 功能强大、经过验证且功能齐全，这使其成为使用最广泛的基于 Java 的缓存

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-11T22:30:55.807

JCache API 处于公开草案中（截至 2013 年 8 月），并将附带一个开源参考实现 (RI)。所有主要的缓存供应商（例如 Oracle Coherence、ehCache）和开源项目都将为其实现提供 JCache 绑定，因此值得一看。

见：[https ://github.com/jsr107](https://github.com/jsr107)

**更新**（2014 年 7 月 11 日）- JCache API 已完成并在几个月前作为标准发布。

如果您需要 JCache 的实现，我知道今天唯一可用的是 Oracle Coherence；请参阅：[http ://docs.oracle.com/middleware/1213/coherence/develop-applications/jcache_part.htm](http://docs.oracle.com/middleware/1213/coherence/develop-applications/jcache_part.htm)

*为了全面披露，我在 Oracle 工作。这篇文章中表达的观点和观点是我自己的，并不一定反映我雇主的观点或观点。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-17T08:40:15.390

检查[Redis](http://redis.io/) - Redis 是一个开源、BSD 许可的高级键值存储。它通常被称为数据结构服务器，因为键可以包含字符串、散列、列表、集合和排序集合。更多详情请点击[Redis](http://redis.io/)

# php - 如何根据以下条件对这个多维数组进行排序

> ID：12319534
> 
> 赞同：-1
> 
> 时间：2012-09-07T13:54:40.030
> 
> 标签：php, arrays, sorting

我有一个称为数组的数组，它`parentArray()`是一个关联数组，其键为数字（非有序整数），值可能是数组，也可能不是数组。我有一个`foreach()`循环，它循环`parentArray()`并在 html 表中打印数据，如下所示：

```
foreach ($parentArray as $parentkey => $childArray){
    echo "<tr>";
    $Usage = some_function1($parentkey);
    $schoolUsage = some_function2($parentkey);
    echo "<td>".$Usage."</td>";
    echo "<td>".$schoolUsage."</td>";
    echo "</tr>";
} 
```

我需要按 $Usage 的升序对输出表进行排序，如果 2 行的 $Usage 数量相同，那么它应该比较 $schoolUsage 并按降序对它们进行排序。关于如何做到这一点的任何想法，因为我完全一无所知。请注意，$Usage 和 $schoolUsage 是整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:57:56.657

看看函数[usort()](http://php.net/usort)。您可以传递一个自定义函数来进行排序（类似冒泡排序）。

```
usort($parentArray, function($element1, $element2) {
  if($element1 == $element2) return 0; // elements stay on the same position as before
  if$element1 < $element2) {
    return -1; // move $element1 before element2
  } else {
    return 1; // move $element2 before element1
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:41:43.997

你的问题对我来说并不完全清楚，但据我所知，你可能需要 php 中的这个内置函数：[array_multisort](http://php.net/manual/en/function.array-multisort.php)。希望这有助于解决您的问题。

快乐编码:)

# asp.net-mvc - 使用 UnobtrusiveJavaScriptEnabled 输入可空日期

> ID：12319542
> 
> 赞同：0
> 
> 时间：2012-09-07T13:54:54.677
> 
> 标签：asp.net-mvc

MVC4。

当我在我的视图模型中将 UnobtrusiveJavaScriptEnabled 设置为 true 和一个可为空的日期属性时：

```
 public Nullable<DateTime> TestDate { get; set; } 
```

如果我尝试将日期留空，则会收到验证错误：

```
The field TestDate must be a date 
```

将 UnobtrusiveJavaScriptEnabled 切换为 false 并允许空白条目。

任何想法为什么，或者我如何解决它？

# winforms - 尽管设置了不同的过滤器，我们能否限制 openfile 对话框控制不显示快捷方式（.lnk 文件）

> ID：12319543
> 
> 赞同：0
> 
> 时间：2012-09-07T13:54:58.090
> 
> 标签：winforms, c#-4.0, openfiledialog

我在 C# 中使用 openfiledialog 控件默认打开 ppt 文件。但是，尽管为 *.ppt 设置了过滤器，但文件夹和程序快捷方式也会显示出来，这是我想避免的。

是否有某种方法可以强制 OpenFileDialog**不**显示 .lnk 和 .url 文件之类的快捷方式。

我的代码：

```
openFileDialog1.DefaultExt = "*.ppt";
        openFileDialog1.Filter = "Powerpoint Presentations|*.ppt;*.pptx";
        openFileDialog1.FilterIndex = 1;
        openFileDialog1.DereferenceLinks = false;
        openFileDialog1.Title = "Select a file.";
        openFileDialog1.ShowDialog();

        textBox1.Text = openFileDialog1.FileName; 
```

现在，虽然我的 openfile 对话框窗口从所有文件中过滤了 ppt 文件，但它也显示了我想避免的 .lnk 文件。请建议这样做的方法...

# php - php私有属性可以在外面访问

> ID：12319551
> 
> 赞同：1
> 
> 时间：2012-09-07T13:55:28.077
> 
> 标签：php, private-members

这里的代码输出20、20，为什么这里可以访问私有属性：

```
class myClass {
    private $a;

    public function __construct() {
      $this->a = 10;
    }

    public function printValue() {
       print "The Value is: {$this->a}\n";
    }

    public function changeValue($val, $obj = null) {
        if(is_null($obj)) {
            $this->a = $val;
        } else {
           $obj->a = $val; //why this works?
        }
     }

    public function getValue() {
      return $this->a;
     }
 }

 $obj_one = new myClass();
 $obj_two = new myClass();

 $obj_one->changeValue(20, $obj_two);
 $obj_two->changeValue($obj_two->getValue(), $obj_one);

 $obj_two->printValue();
 $obj_one->printValue(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:00:08.773

类总是可以访问它自己的属性，无论它们是属于实例本身还是属于另一个实例。这完全符合预期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:03:34.123

出于封装的目的，重要的是要保护类的内部不被其他不知道该类内部的代码部分访问。类本身大概知道它的内部结构，并且可以`private`很好地访问自身实例的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:00:25.620

这不是问题。您不是从外部访问私有财产，而是在班级内部访问并返回它。这个基本的OO。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T14:01:08.637

`$obj->a = $val; //why this works?`

它之所以有效，是因为您正在传递一个`myClass`using对象，`$obj_two`并且**在**`$a`类内部可以访问该变量，这非常好

当您尝试以下操作时，会强制执行访问私有变量的限制：

```
$obj_two = new myClass();
echo $obj_two->a; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T14:01:39.100

```
$obj_one->changeValue(20, $obj_two);
$obj_two->changeValue($obj_two->getValue(), $obj_one); 
```

在这两行中，$obj 都不为 null，因此执行 else 部分。在第一次调用`$this->a = 20`期间和第二次调用期间，当您使用`$obj_two->getValue()`它时，将检索`$obj_two->a`调用第一个函数时设置的值。

# android - 来自通知栏意图的Android调用方法

> ID：12319554
> 
> 赞同：1
> 
> 时间：2012-09-07T13:55:34.770
> 
> 标签：android, android-intent, android-mediaplayer, android-notifications, android-4.2-jelly-bean

我的 android MainActivity.java 类中有以下（简化的）代码

```
case R.id.menu_stop:
    stopPlaying();
  return true; 
```

`stopPlaying()`在 Jelly Bean 通知中按下操作按钮时，如何使用意图调用,？通知是在我的 StreamingService.java 类中构建的。我可以使用触发电子邮件、电话和 SMS 意图的操作按钮，我只是不知道如何在我的代码中调用方法。

我在 stopPlaying() 方法中的代码如下

```
private void stopPlaying() {
    Intent intent = new Intent(this, StreamingService.class);
    stopService(intent);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:59:56.437

您将需要使用广播/接收器设计模式。

这是一个很好的入门教程：[http ://www.vogella.com/articles/AndroidBroadcastReceiver/article.html](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

基本上，您需要编写一个接收器并将其注册到您的服务中。然后，当您的通知中的按钮被按下时，您希望在服务的接收者等待时触发广播（这需要一个意图）。当它接收到广播（基本上是瞬间）时，它可以调用您的 stopPlaying() 方法。

# asp.net - IIS 7.5 客户端证书身份验证

> ID：12319558
> 
> 赞同：6
> 
> 时间：2012-09-07T13:55:41.223
> 
> 标签：asp.net, certificate, iis-7.5, ssl-certificate

我的本地机器上有 asp.net 站点。

IIS 配置：绑定：带有自签名证书的 https 绑定，ssl 设置：需要 SSL 和需要客户端证书

我在我的机器上安装了下一个证书：受信任的根证书颁发机构存储中的 CA 证书（称为“CA 中心”）。个人商店中“CA Center”颁发的客户证书

我去现场并接受服务器证书。但接下来我得到错误：

*HTTP 错误 403.7 - 禁止。您尝试访问的页面要求您的浏览器具有 Web 服务器可识别的安全套接字层 (SSL) 客户端证书。*

这意味着浏览器 (IE) 不会将适用的客户端证书发送到服务器。

怎么了？我应该配置其他东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:17:46.943

我确实遇到了这个问题，我花了很长时间才弄清楚原因。原来这是因为我的计算机是域的一部分，并且该域的某种组策略限制了 IIS 愿意接受的受信任的根证书。我不确切知道设置是什么或如何更改它，但我发现我可以通过选择使用 certutil 命令将我的证书安装到企业物理存储中来解决它：

```
certutil -addstore -v -enterprise root CertificateAuthority.cer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-08T14:42:34.223

听起来浏览器从未提示您选择要发送的客户端证书，这意味着 SSL 握手有问题。尝试使用 OpenSSL 进行测试。

此外，一个非常常见的问题是受信任的根 CA 文件夹中的证书过多。当服务器发送 CA 列表时，列表的大小是有限制的，因此如果超出限制，它将截断剩余的 CA 证书。确保受信任的根 CA 文件夹没有太多证书。检查这一点的一种方法是临时修改注册表编辑器中的 SCHANNEL 以不发送 CA 列表，然后重试。

> 开始 > 运行 > 'regedit' > HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL > 右键单击​​ > 新建 > DWORD > 'SendTrustedIssuerList' > 值：0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:10:03.053

重新安装证书并检查其生效日期。来自[微软支持](http://support.microsoft.com/kb/186812)：

*   在服务器计算机的浏览器中下载根服务器证书。运行位于 Inetsrv 目录中的 Iisca.exe 命令行实用程序。

*   检查客户证书上的生效日期，确保日期和时间已到。

*   检查过期日期并确保证书没有过期。请联系您的证书颁发机构以查看您的证书是否已过期。

# java - 我应该如何使用 Guava 的 Hashing#consistentHash？

> ID：12319560
> 
> 赞同：24
> 
> 时间：2012-09-07T13:55:50.230
> 
> 标签：java, guava, consistent-hashing

我正在研究在我正在编写的一些 java 代码中使用[一致的哈希算法。](http://en.wikipedia.org/wiki/Consistent_hashing)guava Hashing 库有一个`consistentHash(HashCode, int)`方法，但[文档](http://code.google.com/p/guava-libraries/wiki/HashingExplained)相当缺乏。我最初的希望是，我可以只使用`consistentHash()`简单的会话亲和性来在一组后端服务器之间有效地分配负载。

有没有人有一个如何使用这种方法的真实例子？特别是我关心管理从目标范围中移除存储桶。

例如：

```
@Test
public void testConsistentHash() {
    List<String> servers = Lists.newArrayList("server1", "server2", "server3", "server4", "server5");

    int bucket = Hashing.consistentHash(Hashing.md5().hashString("someId"), servers.size());
    System.out.println("First time routed to: " + servers.get(bucket));

    // one of the back end servers is removed from the (middle of the) pool
    servers.remove(1);

    bucket = Hashing.consistentHash(Hashing.md5().hashString("blah"), servers.size());
    System.out.println("Second time routed to: " + servers.get(bucket));
} 
```

导致输出：

```
第一次路由到：server4
第二次路由到：server5

```

我想要的是在删除列表中较早的服务器后将该标识符（“someId”）映射到同一台服务器。所以在上面的示例中，删除后我想我希望存储桶 0 映射到“server1”，存储桶 1 映射到“server3”，存储桶 2 映射到“server4”，存储桶 3 映射到“server5”。

我是否应该维护一个单独的（比列表更复杂的）数据结构来管理存储桶的删除和添加？我想我可能已经设想了一个更复杂的哈希 API，它可以在为我添加和删除特定存储桶之后管理重新映射。

*注意：*我知道示例代码使用了一个小的输入和存储桶集。我在 100 个存储桶中尝试了 1000 次输入，结果是一样的。当我将 更改为 99 时，映射到存储桶 0-98 的输入保持不变，`buckets`并且存储桶 99 分布在剩余的 99 个存储桶中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T14:34:01.073

我认为目前没有什么好的方法可以做到这一点。`consistentHash`目前的形式只在简单的情况下有用——基本上，你有一个旋钮来增加或减少服务器的数量……但总是在最后添加和删除。

正在进行一些工作来添加这样的类：

```
public final class WeightedConsistentHash<B, I> {
  /** Initially, all buckets have weight zero. */
  public static <B, I> WeightedConsistentHash<B, I> create(
      Funnel<B> bucketFunnel, Funnel<I> inputFunnel);

  /**
   * Sets the weight of bucket "bucketId" to "weight".
   * Requires "weight" >= 0.0.
   */
  public void setBucketWeight(B bucketId, double weight);

  /**
   * Returns the bucket id that "input" maps to.
   * Requires that at least one bucket has a non-zero weight.
   */
  public B hash(I input);
} 
```

然后你会写：

```
WeightedConsistentHash<String, String> serverChooser =
    WeightedConsistentHash.create(stringFunnel(), stringFunnel());
serverChooser.setBucketWeight("server1", 1);
serverChooser.setBucketWeight("server2", 1);
// etc.

System.out.println("First time routed to: " + serverChooser.hash("someId"));

// one of the back end servers is removed from the (middle of the) pool
serverChooser.setBucketWeight("server2", 0);

System.out.println("Second time routed to: " + serverChooser.hash("someId")); 
```

而且您每次都应该获得相同的服务器。那个 API 看起来合适吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T15:11:48.610

恐怕没有任何数据结构可以用当前的`consistentHash`. 由于该方法只接受列表大小，因此只能支持从末尾追加和删除。目前，最好的解决方案可能包括更换

```
servers.remove(n) 
```

经过

```
server.set(n, servers.get(servers.size() - 1);
servers.remove(servers.size() - 1); 
```

这样你就可以交换失败的服务器和最后一个服务器。这看起来很糟糕，因为它使对两个交换服务器的分配错误。这个问题只是其中一个失败的一半。但这是有道理的，因为在以下删除最后一个列表元素之后，一切都很好，除了分配给失败的服务器和之前的最后一个服务器。

因此，需要更改两倍的作业。不是最佳的，但希望可以使用？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T03:29:26.100

guava API 不知道您的服务器列表。它只能保证：

```
int bucket1 = Hashing.consistentHash(Hashing.md5().hashString("server1"),N);    
int bucket2 = Hashing.consistentHash(Hashing.md5().hashString("server1"),N-1);

assertThat(bucket1,is(equalTo(bucket2))); iff bucket1==bucket2!=N-1 
```

您需要自己管理存储桶到您的服务器列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-20T06:05:00.403

问题中提出的答案是正确的：

> 我是否应该维护一个单独的（比列表更复杂的）数据结构来管理存储桶的删除和添加？

番石榴正在散列成一个带有序数的环。从这些序数到服务器 ID 的映射必须在外部维护：

*   最初给定 N 个服务器 - 可以为每个序数 0..N-1 选择一些任意映射到服务器 ID A..K ( *0* -> *A* , *1* -> *B* , .., *N-1* -> *K* ) . 还需要从服务器 ID 到其序号的反向映射（*A* -> *0*，*B* -> *1*，..）。

*   在删除服务器时 - 序数空间缩小一。所有以已删除服务器的序号开头的序数都需要重新映射到下一个服务器（移位一个）。

    例如，在初始映射之后，假设服务器 C（对应于序号 2）被删除。现在新的映射变为： ( *0* -> *A* , *1* -> *B* , **2->D** , *3* -> *E* , .., *N-2* -> *K* )

*   在添加服务器 L 时（比如从 N 到 N+1 个服务器） - 可以从 N->L 添加一个新映射。

我们在这里所做的是模仿节点在添加和删除时如何在环中移动。虽然节点的顺序保持不变 - 它们的序号（Guava 在其上运行）可以随着节点的到来和离开而改变。

# xml - 使用 xslt 合并两个 xml 文件

> ID：12319566
> 
> 赞同：1
> 
> 时间：2012-09-07T13:56:50.013
> 
> 标签：xml, xslt, parameters

我想使用 xslt 将两个 xml 文件合并为一个。

```
file1:

<cut> <content1> .... </content1> </cut>

file1:

<cut> <content2> .... </content2> </cut>

merged:
<cut>
<content1> ... </content1>
<content2> ... </content2>
</cut> 
```

我想将参数传递给包含要合并的文件的 xslt。

**xsltproc.exe" --stringparam file1 s:\file1.xml --stringparam file2 s:\file2.xml s:\merge.xslt**

```
merge.xslt:

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:exsl="http://exslt.org/common"
    extension-element-prefixes="exsl">

  <xsl:output indent="yes" omit-xml-declaration="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:param name="file1"/>
  <xsl:param name="file2"/>

  <xsl:variable name="big-doc-rtf">
    <xsl:copy-of select="document($file1)"/>
    <xsl:copy-of select="document($file2)"/>
  </xsl:variable>

  <xsl:variable name="big-doc" select="exsl:node-set($big-doc-rtf)"/>

  <xsl:template match="/">
    <cut>
      <xsl:apply-templates select="$big-doc/cut/*"/>
    </cut>
  </xsl:template>

  <xsl:template match="*">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@*|text()|comment()|processing-instruction()">
    <xsl:copy-of select="."/>
  </xsl:template>

</xsl:stylesheet> 
```

我只得到一个空的“剪切”标签。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T15:30:24.710

不使用 xsltproc 但**xmllint**：

（编辑：xsltproc 也允许 xinclude）

> --xinclude : 对文档输入进行 XInclude 处理

x1.xml

```
<cut><content1>content1</content1></cut> 
```

x2.xml

```
<cut><content2>content2</content2></cut> 
```

x3.xml

```
<?xml version="1.0"?>
<cut xmlns:xi="http://www.w3.org/2003/XInclude">
  <xi:include href="x1.xml" parse="xml" xpointer="xpointer(/cut/content1)"/>
  <xi:include href="x2.xml" parse="xml" xpointer="xpointer(/cut/content2)"/>
</cut> 
```

跑：

```
$ xmllint -xinclude  x3.xml 
<?xml version="1.0"?>
<cut xmlns:xi="http://www.w3.org/2003/XInclude">
  <content1>content1</content1>
  <content2>content2</content2>
</cut> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:27:19.330

**无法重现问题**。

很可能`document()`代码中的两个函数都返回“nothing”——这意味着用作每个调用的第一个参数的 URI 不标识文件（无法找到/解析文件），或者文件不包含格式良好的 XML 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:44:52.530

这对我来说很好用 xalan 和 saxon 解析器在 document() 调用中具有硬编码路径。问题很可能是由于某种原因，您的 xsl 没有看到您的文档。

我怀疑源文档中的 xml 存在问题，因为这可能会引发错误。

# iphone - 带有 UIButtons 的可缩放 UIScrollView 捕捉触摸

> ID：12319572
> 
> 赞同：0
> 
> 时间：2012-09-07T13:57:16.033
> 
> 标签：iphone, ios, uiscrollview, uikit, uibutton

我有一个 UIScrollView 并且我正在实现一个`viewForZoomingInScrollView:`委托方法，它返回一个 UIImage ，用户可以缩放和平移。我还有一些 UIButtons 作为 UIScrollView 的子视图，我将其用作注释，例如 Google Maps。

我遇到的问题是很多 UIImage 可以在缩小时被 UIButtons 遮挡。当试图捏缩放 UIButtons 正在接收触摸事件，而不是缩放。您最终不得不小心地将手指放在清晰的空间中进行缩放。

我注意到当有很多注释视图时，谷歌地图应用程序似乎工作正常，你仍然可以捏。

我想我需要优先考虑触摸，UIScrollView 需要响应捏和平移，而按钮只是轻按。

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T20:46:34.933

我有这个确切的问题，这有点奇怪。这不是由于按钮上的任何手势识别器，而是 UIScrollView 的捏合手势识别器由于某种原因被转发到 UIButton。此外，UIButton 正在响应某些 UIGestureRecognizerDelegate 调用（如 -gestureRecognizerShouldBegin:)，但不响应其他调用（如 -gestureRecognizer:shouldReceiveTouch:)。就像 UIScrollView 选择性地将一些委托调用转发给 UIButton 而有些则没有。

我终于找到了一个非常简单的方法来解决这个问题：

```
yourScrollView.pinchGestureRecognizer.delaysTouchesBegan = YES;
yourScrollView.pinchGestureRecognizer.delaysTouchesEnded = YES; 
```

幸运的是，UIScrollView 上的默认捏合手势识别器是可公开访问的，两个 delaysTouches 属性默认为 NO。当您将它们设置为 YES 时，如果手势识别器可能或确实识别出捏合手势，即使它从 UIButton 顶部开始，它也不会将这些触摸转发到 UIButton，并且 UIButtons 将不再干扰 UIScrollView 的缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T17:12:02.640

看看 UIView 的`hitTest:withEvent:` [方法](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)。在该方法中，您需要检查要返回的视图。您返回的视图将是收到触摸的视图。例如，您可以对按钮进行子类化并覆盖该方法以返回`ImageView`您的特定场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T14:15:46.180

我以不同的方式解决了这个问题，但这可能不是你的情况。我的按钮被添加到图像视图上，图像视图被自己添加到另一个容器视图中。在里面：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView 
```

...方法，我返回了图像视图 - 不好。更改为在层次结构中返回我的第一个容器视图修复了这些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T16:51:07.050

尝试这个

```
 UIGestureRecognizer* tapRecognizer = nil;    
for (UIGestureRecognizer* recognizer in yourButton) {
    if ( ![recognizer isKindOfClass:[UITapGestureRecognizer class]] ) {
        [yourButton removeGestureRecognizer:recognizer];
        break;
    }
} 
```

所以你从与 UITapGestureRecognizer 不同的按钮中删除所有手势识别器

# c# - 如何使这个 c# 属性线程安全？

> ID：12319573
> 
> 赞同：1
> 
> 时间：2012-09-07T13:57:18.810
> 
> 标签：c#, .net, properties

我有一些库实用程序可以让事情变得更简单一些。

```
 public static RequestUow Uow
        {
            get { return ContextItemsHelper.Get<RequestUow>("Uow"); }
            set { ContextItemsHelper.Set<RequestUow>("Uow", value); }
        } 
```

并在 ContextItemsHelper

```
 public static T Get<T>(string key)
    {
        Guard.NullOrEmpty(key, "key");

        object obj = Items[key];

        return obj.IsNotNull() ? (T)obj : default(T);
    }

    static IDictionary Items { get { return HttpContextHelper.Current.Items; } } 
```

这工作正常，但我现在想检查属性 uow 是否为空，是否设置了新的 RequestUow 并返回它。

我见过的示例涉及设置您自己的成员变量，但是我想知道这是否可能是线程安全的。

有人有任何建议或解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:01:18.880

制作`Items`一个[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)并使用它的[AddOrUpdate](http://msdn.microsoft.com/en-us/library/ee378664.aspx)方法。由于集合本身是线程安全的，因此您不必关心它。

`Get`如果您更改为这样的内容也会更好：

```
public static T Get<T>(string key)
{
    Guard.NullOrEmpty(key, "key");
    return Items.GetOrAdd( key, (key) => default(T) );
} 
```

这样，默认值会在第一次尝试时添加，如果再次调用则返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:01:49.270

使用模式[双重检查锁定模式](http://en.wikipedia.org/wiki/Double_checked_locking_pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:05:30.443

只要字典没有变异（例如没有更新），访问它是完全线程安全的，无需任何额外措施 (*)。

请注意，如果包含的项目本身不是线程安全的，则为字典提供线程安全的 getter/setter 并没有帮助。最安全的选择是使用字典中的不可变项；如果您的`RequestUow`对象是可变的，那么您还需要使它们（以及可能使用此字典检索的所有其他内容）成为线程安全的。

*：例如，有关 .NET 中线程安全集合的信息，请参阅[此 PDF 。](http://download.microsoft.com/download/B/C/F/BCFD4868-1354-45E3-B71B-B851CD78733D/PerformanceCharacteristicsOfThreadSafeCollection.pdf)第 18 页阐明了只读访问不需要额外测量线程安全。

# c# - Xml 中的 Xml

> ID：12319574
> 
> 赞同：0
> 
> 时间：2012-09-07T13:57:22.270
> 
> 标签：c#, xml, xmldocument

我基本上想知道如何在另一个 XmlDocument 中插入一个 XmlDocument。

第一个 XmlDocument 将具有基本的页眉和页脚标记。第二个 XmlDocument 将是必须插入到第一个 XmlDocument 中的正文/数据标记。

```
 string tableData = null;
            using(StringWriter sw = new StringWriter())
            {
                rightsTable.WriteXml(sw);

                tableData = sw.ToString();                    
            }

            XmlDocument xmlTable = new XmlDocument();
            xmlTable.LoadXml(tableData);

            StringBuilder build = new StringBuilder();
            using (XmlWriter writer = XmlWriter.Create(build, new XmlWriterSettings { OmitXmlDeclaration = true }))
            {
                writer.WriteStartElement("dataheader");

                //need to insert the xmlTable here somehow

                writer.WriteEndElement();
            } 
```

有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:11:51.543

我不确定您真正在寻找什么，但这可以显示如何合并两个 xml 文档（使用 Linq2xml）

```
string xml1 =
    @"<xml1>
    <header>header1</header>
    <footer>footer</footer>
    </xml1>";

string xml2 =
    @"<xml2>
    <body>body</body> 
    <data>footer</data>
    </xml2>";

var xdoc1 = XElement.Parse(xml1);
var xdoc2 = XElement.Parse(xml2);

xdoc1.Descendants().First(d => d.Name == "header").AddAfterSelf(xdoc2.Elements());

var newxml = xdoc1.ToString(); 
```

**输出**

```
<xml1>
  <header>header1</header>
  <body>body</body>
  <data>footer</data>
  <footer>footer</footer>
</xml1> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:59:41.367

在文档解析器中使用 importNode 功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T13:59:53.927

您将需要`CDATA`分段编写​​内部 XML 文件。

用于[`writer.WriteCData`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.writecdata.aspx)此类节点，将内部 XML 作为文本传递。

```
writer.WriteCData(xmlTable.OuterXml); 
```

* * *

另一种选择（[感谢 DJQuimby](https://stackoverflow.com/questions/12319574/xml-within-an-xml/12319616#comment16532823_12319616)）是将 XML 编码为某种 XML 兼容格式（例如 base64） - 请注意，使用的编码必须与 XML 兼容，并且某些编码方案会增加编码文档的大小（base64 增加了约 30%） .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T14:00:45.250

您可以基于 CreateCDataSection 方法使用此代码

```
// Create an XmlCDataSection from your document
var cdata = xmlTable.CreateCDataSection("<test></test>");

XmlElement root = xmlTable.DocumentElement;

// Append the cdata section to your node
root.AppendChild(cdata); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.xml.xmldocument.createcdatasection.aspx](http://msdn.microsoft.com/fr-fr/library/system.xml.xmldocument.createcdatasection.aspx)

# reporting-services - 报表查看器分页

> ID：12319577
> 
> 赞同：2
> 
> 时间：2012-09-07T13:57:35.207
> 
> 标签：reporting-services, linq-to-entities, reportviewer

我在本地处理模式下使用 ReportViewer，并使用 linq-to-entites (IQueryable<>) 获取数据。数据还包含图像，这些图像在表格内的报表中呈现。在示例数据库上运行时，生成的数据集大约有 30000 个项目。

即使报表被分成页面，ReportViewer 仍然同时加载所有记录。我将图像源从 [Database] 更改为 [external]，并通过服务 (.ashx) 实现图像加载以加快 SQL 查询速度。报表查看器仍然会加载所有图像（不仅是显示页面的图像），而且只加载报表。

您知道如何提高报告的性能吗？为什么报表查看器不使用分页，而是加载所有数据？也许我做错了什么？如何让reportviewer 逐页加载数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:22:24.597

**来自关于何时使用本地处理**的 MSDN 页面

 **“由于所有数据和报表处理都是在客户端上执行的，因此如果您尝试处理大型或复杂的报表和查询，您可能会遇到性能下降。”

来源： http: [//msdn.microsoft.com/en-us/library/ms251704 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms251704(v=vs.80).aspx)

**可能的解决方案**：尝试添加一个报告过滤器以逻辑方式分解结果集。**

# mongodb - 如何在更改数据集时降低 32 位 mongodb 内存使用率

> ID：12319579
> 
> 赞同：1
> 
> 时间：2012-09-07T13:57:40.913
> 
> 标签：mongodb

我在 32 位生产系统上使用 MongoDB，这很糟糕，但现在我无法控制。挑战在于将内存使用量保持在 ~2.5GB 以下，因为超过此值会导致 32 位系统崩溃。

[根据 mongoDB 团队](http://blog.mongodb.org/post/137788967/32-bit-limitations#comment-472372423)的说法，跟踪内存使用情况的最佳方法是使用操作系统的进程跟踪系统（即 Unix 系统上的 ps 或 htop；Windows 上的 Process Explorer。）来获取虚拟内存大小。

数据库主要由一个不断循环数据的表组成，即定期从传感器接收数据，并且每天一个 cron 作业擦除过去 3 天之前的所有数据。在一段时间内，内存使用量会慢慢增加。随着时间的推移，我使用 db.serverStats()、db.lectura.totalSize() 和 ps 做了一些笔记，如下图所示。请注意，相关表的大小在上个月有所减少，但内存使用量仍然增加。

![在此处输入图像描述](../Images/526845394749a1441c8fc010275c6a63.png)

现在，我存储的数据天数有一些调整空间。今天基本删除了一半的数据，然后重启了mongodb，但是根据ps的mem virtual/mem mapped，最重要的内存使用量几乎没有变化！**为什么当我擦除数据**（并重新启动）时这些不会减少？我读[了一些其他问题](https://stackoverflow.com/questions/6861184/is-there-any-option-to-limit-mongodb-memory-usage)，人们说 mongo 并没有真正使用它可能正在使用的所有内存，并且您无法清除缓存或限制内存使用。但是，我怎样才能确保我保持在 2.5GB 的限制之下呢？

除非有办法阻止这个数据集大小——不管内存使用量的逐渐增加，否则在我看来 32 位版本的 Mongo 是不可用的。注意：如果它解决了问题，我不介意损失一点性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T16:10:37.263

要回答为什么映射和虚拟内存使用量不会随着删除而减少，映射数实际上是您`mmap()`在整个数据文件集时得到的。当您删除记录时，这不会缩小，因为尽管数据文件内部的空间被释放了，但它们本身并没有缩小 - 之后文件只是更空了。

虚拟将包括日志文件、连接以及其他与数据无关的内存使用，但同样的原则也适用于那里。此处描述了这一点以及更多内容：

[http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage](http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage)

因此，32 位的[2GB 存储大小限制](http://docs.mongodb.org/manual/faq/fundamentals/#what-are-the-32-bit-limitations)实际上适用于数据文件，无论其中是否有数据。要回收已删除的空间，您必须运行[修复](http://docs.mongodb.org/manual/reference/command/repairDatabase/)。这是一个阻塞操作，将要求数据库在运行时处于脱机/不可用状态。就可用磁盘空间而言，它还需要高达原始大小的 2 倍才能运行修复，因为它本质上表示从头开始再次写出文件。

这个限制，以及它引起的问题，就是为什么 32 位版本不应该在生产中运行，它只是不适合。我建议尽快进入 64 位版本。

顺便说一句，这些数字（映射的或虚拟的）实际上都不能代表您的常驻内存使用情况，而这正是您真正想要查看的。随着时间的推移，最好的方法是通过[MMS](https://mms.10gen.com/)，这是 10gen 提供的免费监控服务 - 它会随着时间的推移为您绘制虚拟、映射和常驻内存以及大量其他统计信息。

如果您想立即查看，请运行[mongostat](http://docs.mongodb.org/manual/reference/mongostat/)并检查相应的内存列（res、mapped、virtual）。

通常，当使用具有无限存储空间的 64 位构建时，数据通常会大大超过可用内存。因此，mongod 将使用所有可用内存作为常驻内存（这就是为什么您应该始终将交换配置为 OOM Killer 不会发挥作用的原因）。

一旦使用了它，操作系统就不会停止分配内存，它只会将最旧的项目分页，以便为新数据 ( [LRU](http://en.wikipedia.org/wiki/Cache_algorithms#Least_Recently_Used) ) 腾出空间。换句话说，内存的回收将为您完成，并且常驻内存级别将保持相当恒定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T13:16:43.350

拉伸 32 位的选项有限，但您可以尝试一些方法。您用完的是地址空间，而附加数据库文件大小的增加意味着您希望避免从“n”个文件跨越到“n+1”个文件的边界。将数据结构化到更多或更少的数据库中可能是值得的，这样您就可以将最大数量的实际数据放入内存并尽可能少地“死空间”。

例如，如果名为“mydatabase”的数据库包含 16 MB 的文件 mydatabase.ns（命名空间文件）、64 MB 的 mydatabase.0、128 MB 的 mydatabase.1 和 256 MB 的 mydatabase.2，那么下一个为此数据库创建的文件将是 mydatabase.3，大小为 512 MB。如果不是添加到 mydatabase，而是创建了一个额外的数据库“mynewdatabase”，它将以 16 MB 的 mynewdatabase.ns 和 64 MB 的 mynewdatabase.0 开始......比添加到原始数据库的 512 MB 小很多将会。事实上，您可以创建 4 个新数据库，而其占用的空间比向原始数据库添加新文件所消耗的空间要少，而且由于文件更小，它们更容易放入连续的内存块中。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-07T14:04:01.347

众所周知，不应将 32 位用于生产。

使用 64 位系统。

观点。

# django - 使用 Postgres 运行 Django 时遇到问题

> ID：12319580
> 
> 赞同：2
> 
> 时间：2012-09-07T13:57:42.270
> 
> 标签：django, postgresql-9.1

我已经在我的机器（Mac OS）上安装了 Postgres 和 Django，但是当我运行 Django 服务器时，我得到了这个错误

```
50>>
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Python/2.7/site-packages/django/core/management/validation.py", line 23, in get_validation_errors
    from django.db import models, connection
  File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/Library/Python/2.7/site-packages/django/db/utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/Library/Python/2.7/site-packages/django/db/utils.py", line 24, in load_backend
    return import_module('.base', backend_name)
  File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Library/Python/2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 13, in <module>
    from django.db.backends.postgresql_psycopg2.creation import DatabaseCreation
  File "/Library/Python/2.7/site-packages/django/db/backends/postgresql_psycopg2/creation.py", line 1, in <module>
    import psycopg2.extensions
  File "/Library/Python/2.7/site-packages/psycopg2/__init__.py", line 67, in <module>
    from psycopg2._psycopg import BINARY, NUMBER, STRING, DATETIME, ROWID
ImportError: dlopen(/Library/Python/2.7/site-packages/psycopg2/_psycopg.so, 2): Library not loaded:
@loader_path/../lib/libssl.dylib
  Referenced from: /usr/lib/libpq.5.dylib
  Reason: Incompatible library version: libpq.5.dylib requires version 1.0.0 or later, but libssl.0.9.8.dylib provides version
0.9.8 
```

请问我在这里错过了什么。

# android - Android 4.0 保存asp页面内容供离线查看

> ID：12319583
> 
> 赞同：1
> 
> 时间：2012-09-07T13:57:57.883
> 
> 标签：android, ssl, sharepoint-2010

我是一名初级开发人员，一直在开发 RSS 阅读器。

我正在尝试从我的应用程序下载网页以供离线查看，但我遇到了一些问题。当我尝试下载一个 asp 页面时，我似乎没有得到正确的内容，而是一个带有 asp 表单小部件的 html 页面。

谁能帮助我了解正在发生的事情以及如何下载页面内容？

我还应该提到该网页是使用 https ssl 身份验证的共享点网页，使用 httpclient 作为连接和下载网页的手段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:14:15.903

要与 ASP 通信，您通常需要*在 HttpPost 和其他请求中发送 __VIEWSTATE 和 _ EVENTVALIDATION 令牌。您可以通过在基本页面上调用 HttpGet 并将 Patten 与正则表达式或简单的 str.contains("* _VIEWSTATE") 一起使用，然后将其从 HTML 中剥离并随每个请求一起发送来获取这些内容。

如果你没有做任何 POST，只是基本的 GET，那么请确保你正确设置了标题，如下所示：

```
HttpGet req = new HttpGet("YOUR SITE'S URL");         
req.setHeader("Content-Type", "application/x-www-form-urlencoded");
req.setHeader("Host", "YOUR SITE'S ROOT PAGE");
req.setHeader("User-Agent", "Mozilla/5.0 ...");
req.setHeader("Accept-Encoding", "gzip,deflate,sdch");
req.setHeader("Accept", "text/html,application/xhtml+xml,application/xml");
req.setHeader("Accept-Language", "en-us,en");
req.setHeader("Accept-Charset", "ISO-8859-1,utf-8");
HttpResponse resp = client.execute(req, localContext); 
```

不要忘记您可以存储在 httpcontext 中的可能会话 cookie，并且还可以在每次执行时传入，如上所示：

```
CookieStore cookieStore = new BasicCookieStore();
HttpContext localContext = new BasicHttpContext();
localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore); 
```

理论上最好的方法是下载 Fiddler，在 Chrome 中运行该站点，查看发生了什么并在您的应用程序中模拟实际的浏览器请求：[http ://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

# java - JFrame的实际大小

> ID：12319590
> 
> 赞同：2
> 
> 时间：2012-09-07T13:58:26.783
> 
> 标签：java, swing, jframe, screen-size

我已经通过Java清楚地制作了一个JFrame，并设置了大小，使其在屏幕上尽可能大。例如，我将使用 Toolkit.getDefaultToolkit().getScreenSize() 来设置 JFrame 的大小，但由于菜单栏/停靠栏等（在 windows 和 mac 中），它会调整大小以适应屏幕。我怎样才能获得这个 JFrame 默认的新维度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:05:43.517

我不知道我是否正确理解了你的问题。但是，如果您想获得屏幕大小减去菜单栏/任务栏，[这个](https://stackoverflow.com/questions/10123735/get-effective-screen-size-from-java)答案可能会有所帮助。

如果您只是想获得 JFrame 的新尺寸，请使用：

```
yourFrame.getSize(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T14:30:17.857

为了最大化 JFrame，您将最大化两者添加到扩展状态。

```
frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH); 
```

在 Windows XP 上，此最大化考虑了 Windows 状态栏。但是，水平计算偏离了几个像素，您不会看到所有的边边框。

我没有在 Windows 7 或 Unix 上试过这个。

您还应该设置 JFrame 大小，以防用户单击最大化/恢复大小按钮（Windows JPanel 上的中间按钮）。

# .net - VB.NET 编译器如何选择运行哪个扩展重载？

> ID：12319591
> 
> 赞同：7
> 
> 时间：2012-09-07T13:58:26.313
> 
> 标签：.net, vb.net, extension-methods, overloading

有一个有趣的怪事 - 认为有人可以提供帮助。

这是来自这个问题的可空类型的一些乐趣：

[如何检查一个对象是否可以为空？](https://stackoverflow.com/questions/374651/how-to-check-if-an-object-is-nullable)

```
Option Strict On

Module Test
  ' Call this overload 1
  <Extension()>
  Function IsNullable(obj As ValueType) As Boolean
    Return False
  End Function

  ' Call this overload 2
  <Extension()>
  Function IsNullable(Of T As {Structure})(obj As Nullable(Of T)) As Boolean
    Return True
  End Function

  Sub Test() 
    ' a is an integer!
    Dim a As Integer = 123

    ' calling IsNullable as an extension method calls overload 1 and returns false
    Dim result1 As Boolean = a.IsNullable()

    ' calling IsNullable as method calls overload 2 and returns true
    Dim result2 As Boolean = IsNullable(a)

    ' why? surely the compiler should treat both those calls as equivalent
  End Sub
End Module 
```

我希望编译器会对 IsNullable 的两个调用进行相同的处理，但事实并非如此。即使参数“a”没有改变，扩展方法调用使用与普通方法调用不同的重载。

我的问题是为什么？是什么让编译器在两次调用之间改变主意？

FTR：我们正在使用 Visual Studio 2010、.NET Framework 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:45:52.547

重载 2 只能作为显式定义的 Nullable(of T) 的扩展。例如：

```
 Dim y As New Nullable(Of Integer)
    y.IsNullable() 
```

这是因为扩展方法扩展了类型（或基类型），在本例中为 Nullable(of T)。调用 a.IsNullable() 永远不会调用重载 2。这是很容易弄清楚的部分。这意味着真正的问题是为什么要调用重载 2 而不是重载 1 作为标准重载方法调用。

CLR 将通过执行“[更好的转换](http://msdn.microsoft.com/en-us/library/aa691339%28v=vs.71%29)”检查来确定要使用的重载，其中它隐式地将传入的值转换为重载方法中定义的参数的类型，然后查看规则清单以确定最佳使用方法。

来自 MSDN 更好的转换文章：

> 如果 S 是 T1，则 C1 是更好的转换。
> 
> 如果 S 是 T2，则 C2 是更好的转换。

将此代码放入 Visual Studio 将显示重载 2 是更好的转换，因为整数 a (S) 是 a (T2) 的隐式转换的 Nullable(of Integer) 版本。

```
 ' a is an integer! 
    Dim a As Integer = 123

    Dim objValueType As ValueType = 123 'Or CType(a, ValueType)
    Dim objNullable As Nullable(Of Integer) = 123 'Or CType(a, Nullable(Of Integer))

    'Oh No, a compiler error for implicit conversion done for overload 1!
    Dim bolValueTypeConversionIsBetter As Boolean = (objValueType = a)

    'No error as long as Option Strict is off and it will equal True.
    Dim bolNullableConversionIsBetter As Boolean = (objNullable = a) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:29:33.153

我*认为*这是一个错误，或者至少是 VB.NET 的“功能”。（我只是不确定 VB.NET 或 C# 中的哪一个是错误的。）

我已经在 LINQPad 4 中尝试过（因为那是我在我正在使用的机器上得到的）和对于 C#，我得到`False`了两个结果，当然，除了类型之外的每个值类型和枚举`Nullable`。

`False`而对于 VB.NET，我得到了`True`所有值类型和枚举的 and，除了`Nullable`类型，`ValueType`and `[Enum]`which return `False`，`False`因为你不能有`ValueType?`or `[Enum]?`。使用`Option Strict Off`,`Object`会导致后期绑定，并且在运行时无法找到任一重载，但第二个结果`False`也是因为您不能拥有`Object?`.

为了完整起见，`Nullable`类型返回`True`,`True`两种语言都符合预期。

C# 正在做一些不同的事情（假设我的测试是正确的）这一事实证实了对 C#“更好的转换”检查的引用是错误的（或者至少被误读了 - 因为 C# 没有做被解释为为什么 VB.NET正在做它正在做的事情）。

但是，我确实同意该问题可能与隐式转换为`Nullable(Of T)`现有有关，并且以某种方式比隐式转换为更高的优先级`ValueType`。

这是我的 LINQPad 4“查询”（C# 程序）：

```
void Main()
{
    Test.test();
}

// Define other methods and classes here
static class Test
{
    static bool IsNullable(this ValueType obj)
    {
        return false;
    }

    static bool IsNullable<T>(this T? obj) where T:struct
    {
        return true;
    }

    public static void test()
    {
        int x = 42;

        bool result1 = x.IsNullable();
        bool result2 = IsNullable(x);

        result1.Dump("result1");
        result2.Dump("result2");
    }
} 
```

# css - 是否可以将 iframe 的元素位置更改为超出 iframe

> ID：12319592
> 
> 赞同：0
> 
> 时间：2012-09-07T13:58:34.503
> 
> 标签：css, iframe

我在页面上有一个 iframe，在这个 iframe 页面中有一个按钮，我想将按钮的位置移到 iframe 之外（视觉上）。是否可以。

```
----(want to move the button to here)
<div>
--- other elements----
</div> 
-------iframe---------
-                  ---
----the menu button---
-                  ---
---------------------- 
```

可以通过调整CSS来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:18:53.150

我不认为 iFrame 内容被视为页面 DOM 的一部分，或者如果它是出于安全原因可能会被阻止（我在这里可能是错的） - 所以如果这有效，我会感到非常惊讶。

解决此问题的一种非常hacky，肮脏，“天哪，我感到羞耻”的方法是屏幕抓取iFrame所在的页面，并使用您的服务器端（如果有）技术将解析后的抓取内容插入您的页面。新内容将成为 DOM 的一部分，您可以使用 CSS 和 jQuery 的东西。

不过，我真的不能推荐这种技术。

# java - java中的XML解析：忽略标签作为值

> ID：12319595
> 
> 赞同：1
> 
> 时间：2012-09-07T13:58:48.933
> 
> 标签：java, xml, parsing

我在解析 XML 文件时遇到了一些麻烦。

**问题：**

```
<verification appearance="4">
       content="<myTag>test<myTag>/images/titleIcon.png"  
</verification> 
```

对于解析，我使用了以下内容：

```
DocumentBuilder db;
db = DocumentBuilderfactory.newInstance().newDocumentBuilder();
this.doc = db.parse() 
```

如果我使用 访问内容`[...]getChildNodes().item(1).getTextContent()`，它会返回不带标签的值。

我认为问题与`db.parse()`. 更具体地说，他将其解析`&lt;myTag>`为节点或类似的东西。

如何获取完整的 TextContent 作为字符串（包括标签等）？

有没有办法告诉解析器（如果这是问题）忽略两个标签内的所有内容？

我已经google了很多。但是像使用 < ; for < 不是我要找的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:06:32.930

为此，此 XML 必须是这样的：

```
<verification appearance="4">
<![CDATA[
       content="<myTag>test<myTag>/images/titleIcon.png"  
]]>
</verification> 
```

然后解析器将按您希望的方式工作。

# javascript - jQuery鼠标点击计数器

> ID：12319598
> 
> 赞同：7
> 
> 时间：2012-09-07T13:59:01.737
> 
> 标签：javascript, jquery, html, click, mouseevent

我需要以斑马样式为表格着色，然后当我单击表格两次（不是双击）时，它应该变回原来的样子。

我的问题是，如何计算 2 次点击？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T14:01:36.600

演示：http: [//jsfiddle.net/aztVY/](http://jsfiddle.net/aztVY/)

```
(function () {
  var count = 0;

  $('table').click(function () {
    count += 1;

    if (count == 2) {
      // come code
    }
  });
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T14:02:00.197

您可以为此使用 jQuery 的[`toggleClass`](http://api.jquery.com/toggleClass/)函数：

```
$(" ... ").click(function() {
    $(this).toggleClass("someClass");
}); 
```

单击一次时，该元素具有`someClass`类，单击两次时，再次删除该类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T14:00:57.387

我可能是错的，但在您的问题的字里行间，我读到您实际上询问了[此处](http://api.jquery.com/toggleClass/)`toggleClass()`记录的方法。

> 根据类的存在或 switch 参数的值，从匹配元素集中的每个元素中添加或删除一个或多个类。

# php - $_SERVER['SERVER_NAME'] 有什么好的替代品吗？

> ID：12319599
> 
> 赞同：4
> 
> 时间：2012-09-07T13:59:02.047
> 
> 标签：php, apache, security, superglobals

[我在PHP 文档页面](http://php.net/manual/en/reserved.variables.server.php)上阅读了以下评论：

> “请注意，服务器数组的大部分内容（甚至 $_SERVER['SERVER_NAME']）都是由客户端提供的并且可以被操纵。它们也可以用于注入，因此必须像任何其他用户输入一样进行检查和处理。”

然后我在 StackOverflow 上看到一个话题[，说 $_SERVER['SERVER_NAME'] 部分是服务器控制的](https://stackoverflow.com/questions/6474783/which-server-variables-are-safe/6474936#6474936)。

我可以相信这个值来获取我网站的网址吗？如果我不能真正信任 $_SERVER['SERVER_NAME']，我怎样才能得到这个值？有哪些可能的替代方案及其优缺点？

**OBS：** *Apache、Unix 上的 PHP 5.3。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:02:57.630

我通常将我网站的“真实”网址硬编码到网站配置文件中。我不会依赖 Apache 的“说”来告诉您您的网址。您是否有几个不同的虚拟主机或服务器别名指向同一个 docroot？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:02:47.967

您可以通过在 Apache 配置中启用 UseCanonicalName 指令来强制执行此变量的安全性，如[http://www.apacheref.com/ref/http_core/UseCanonicalName.html中所述](http://www.apacheref.com/ref/http_core/UseCanonicalName.html)

# php - 使用 php 更新我的 sql 以获得评论页面

> ID：12319600
> 
> 赞同：0
> 
> 时间：2012-09-07T13:59:02.150
> 
> 标签：php, sql

所以这应该是我对整个项目的最后一个问题。我已经制作了员工考勤卡页面。效果很好。我正在尝试使它们成为每个考勤卡的审核/更改页面。基本上，最初的评论页面会调出他们提交的考勤卡。他们选择审查。它将 ID 号带到评论页面，我调用 ID 号将来自该时间卡的所有信息显示到新的时间卡 html/php 表单中。（基本上它与他们用来提交的表单完全相同，但是我已经将这些值作为选项回显）

当我进行更新时，它不仅会继承回显值。它只是更新他们所做的任何更改，实际上删除了其他所有内容。下面是一个下拉列表的片段（所有非下拉列表的更新都很好。这仅适用于数据包含在数据库中的下拉列表。

```
 <select name="starttime" id="input_6" style="width:150px">
            <option value="" selected><?php echo $stime ?></option>
          <?php

                $result = mysql_query("SELECT time FROM selTime ORDER BY id");

                 while($row = mysql_fetch_array($result)) {

                 echo "<option value=\"" . $row['time'] . "\">" . $row['time'] . "                                              </option>";

                }

             ?>
      </select> 
```

那么这段代码会发生什么。当他们打开评论页面时，他们会在提交时看到他们的开始时间。如果他们不理会它，并且不更改任何内容并在更改其他内容后推送提交。开始时间实际上更新为空白。如果他们将开始时间更改为一个值，它确实会提交更改。这段代码中是否有我可以更改的内容来提交 echo'd 值，而不仅仅是显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:04:47.620

我相信问题出在这行代码上：

```
<option value="" selected><?php echo $stime ?></option> 
```

尽管您将其设置为“选定”，但选定元素的值为“”（空）。尝试将其更改为：

```
<option value="<?php echo $stime; ?>" selected="selected"><?php echo $stime; ?></option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:02:53.760

如果他们不更改此选择列表项，并直接提交页面，则所选项目是第一个具有 value="" 的项目，因此这将在数据库中更新为空白（null）。

你现在需要给你的第一个项目一个日期时间的值。这段代码在这里：

```
 <option value="DATETINMENOW" selected><?php echo $stime ?></option> 
```

# javascript - 在 Twitter BootStrap 嵌套下拉列表中托管选择列表（特定于 IE 9）

> ID：12319606
> 
> 赞同：4
> 
> 时间：2012-09-07T13:59:14.830
> 
> 标签：javascript, jquery, internet-explorer, twitter-bootstrap

我有一个使用最新版本的 Twitter BootStrap 创建的嵌套下拉列表。我需要在嵌套下拉列表中有一个包含许多元素的选择列表。我能够使嵌套下拉菜单正常工作，并且选择选项显示没有问题。不幸的是，在 IE9 中单击选择列表后，将鼠标移到任何项目上都会导致下拉菜单关闭。此问题在其他浏览器中不存在。更倒霉的是，我*必须*支持IE7+作为这项工作的一部分。

有一个错误的 jsfiddle 在：http: [//jsfiddle.net/GtbSE/2/](http://jsfiddle.net/GtbSE/2/)

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:04:12.707

从您的示例中，我可以将其更改为允许 IE 中的“频道”菜单选项中的下拉菜单，并对您的小提琴进行一些小的更改：http: [//jsfiddle.net/amelvin/XxSTF/](http://jsfiddle.net/amelvin/XxSTF/) - 但您需要重新 -风格。

我想知道引导程序是否被下拉菜单项弄糊涂了。

```
<span class="dropdown" id="filter-add">
    <a href="#filter-add" id="addFilter" class="dropdown-toggle" data-toggle="dropdown" >
        More
    </a>
    <ul id="Channels" class="nav nav-pills">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Channel</a>
            <ul class="dropdown-menu">                    
           <li>
                <select>
                    <option value="1" >LIst Item 1</option> 
                    <option value="2" >LIst Item 2</option>  
                    <option value="3" >LIst Item 3</option>  
                    <option value="4" >LIst Item 4</option>  
                    <option value="5" >LIst Item 5</option>  
                    <option value="6" >LIst Item 6</option>  
              </select>
              </li>
          </ul>
        </li>
        <li><a>Cancel</a></li>
    </ul>
</span>

$('.dropdown select').click(function(e) { e.stopPropagation(); }); 

$("#Channels").hide();

$("#addFilter").click(function() { $("#Channels").show(); }); 
```

# javascript - 在 SlickGrid 中编辑后，基于不同列中的另一个单元格清除单元格

> ID：12319626
> 
> 赞同：0
> 
> 时间：2012-09-07T14:00:18.090
> 
> 标签：javascript, jquery, slickgrid

我创建了这两列。

```
 var columns = [

    {id: "Fclass", name: "Class", field: "Fclass", minWidth:100,width:150, options:["10000","Dallas","10002","10003","10004","10005","10006","10007","10008","10009","10010"], editor: Slick.Editors.Auto},
    {id: "subclass", name: "Subclass", field: "subclass", minWidth:100,width:150, dependency:"Fclass", editor: Slick.Editors.Auto}

  ]; 
```

字段名为“子类”的列取决于字段“Fclass”的列。所以发生的事情是，在 onBeforeEditCell 函数中，“子类”中的单元格根据“Fclass”列中单元格中选择的值填充。到目前为止一切顺利。

但是，我试图弄清楚“Fclass”中的单元格是否在编辑后被清除，如何清除“子类”中的单元格。这就是为什么我正在寻找像“onAfterEditCell”这样的函数，但我相信 SlickGrid API 中没有这样的函数。

**注意：** *由于保持一致性，我不想在 Slick.Editors.js 文件中触摸“applyValue”函数。但是，如果您说除了编辑 applyValue 函数之外别无他法，请提供一些信息。*

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:07:40.200

您可以使用`onBeforeCellEditorDestroy`事件回调来捕获它。当您正在编辑的单元格失去焦点时触发此事件。这实际上会破坏与单元格关联的编辑器。

# javascript - 画布游戏的滞后运动

> ID：12319629
> 
> 赞同：3
> 
> 时间：2012-09-07T14:00:30.243
> 
> 标签：javascript, html, canvas

嘿伙计们不完全确定我做错了什么。我玩过一些 HTML5 游戏，但它们似乎遇到了不同的问题。绘图滞后于运动，看起来很奇怪。这似乎不是这里的情况。

在我的游戏中，绘图看起来不错，但随着他的移动，它就像每一秒一样滞后。（移动是箭头键）。如果我将他设置为自动移动，它也不需要箭头键，所以我认为这不是关键检测问题。

几乎就像垃圾收集器每秒都在运行一样。我不认为我会喷出那么多物体。

我正在使用 Chrome 21 (MacOSX) 和 Firefox 14。

[http://tempdrew.dreamhosters.com/spine/](http://tempdrew.dreamhosters.com/spine/)

这是带有相关代码的js小提琴。

[http://jsfiddle.net/ju3ag/](http://jsfiddle.net/ju3ag/)

这在 chrome canary 上很好。我不知道这是否只是因为金丝雀中的 javascript 比标准 chrome 快得多。这在最新的 Firefox 中很糟糕。我不确定我做错了什么。我正在根据时间更新运动。如果我把它拿出来，虽然它仍然很糟糕。

我只是想知道是否有任何事情会引起任何人的注意。谢谢你的帮助。

```
 sg = Class.extend({

});

sg.entities = [];
sg.buttonStates = [];

sg.createEntity = function (entity) {    
    this.entities.push(entity);    
};

window.requestAnimFrame = (function () {
    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
    function (callback, element) {
        window.setTimeout(callback, 1000 / 60);
    };

})();

(function defineUtil() {

    sg.util = {};

    sg.util.getRandomInt = function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    };

    sg.util.getRandomNumber = function getRandomNumber(min, max) {
        return Math.random() * (max - min) + min;
    };

})();

/*************************/
(function createEntity() {

    var Entity = Class.extend({

        init: function (x, y) {

            this.name = 'Entity';
            this.health = 100;

            this.pos = {
                x: x,
                y: y
            };

            this.vel = {
                x: 0,
                y: 0
            };

            this.accel = {
                x: 0,
                y: 0
            }

            console.log(this.name + ' created ' + x + ' ' + y);
        },

        update: function (elapsed) {

        },

        draw: function (ctx) {

        }

    });

    sg.Entity = Entity;

})();

/************************/

// -- player.js
(function createPlayer() {

    var Player = sg.Entity.extend({

        x: 0,
        y: 0,
        moveLeft: false,
        moveRight: false,
        speed : 5,

        init: function (x, y) {

            this.x = x;
            this.y = y;
            this.name = 'Player';
        },

        draw: function (ctx) {

            var x = this.x,
                y = this.y;

            ctx.beginPath();
            ctx.rect(x, y, 40, 50);
            ctx.fillStyle = 'white';
            ctx.fill();
            ctx.lineWidth = .5;
            ctx.strokeStyle = 'rgba(0,0,0,.3)';
            ctx.stroke();
            ctx.fillStyle = 'rgba(0,0,0,.5)';
            ctx.fillRect(x + 25, y + 15, 5, 5);
        },

        update: function (elapsed) {
            var distance = (60 / 1000) * elapsed;
            if (this.moveLeft) {
                this.x += this.speed * distance;
            } else if (this.moveRight) {
                this.x -= this.speed * distance;
            }
        },

        keyDown: function (e) {

            if (e.keyCode === 39) {
                this.moveLeft = true;
            } else if (e.keyCode === 37) {
                this.moveRight = true;
            } else {
                this.moveLeft = false;
                this.moveRight = false;
            }
        },

        keyUp: function (e) {

            if (e.keyCode === 39) {
                this.moveLeft = false;
            } else if (e.keyCode === 37) {
                this.moveRight = false;
            }
        }

    });

    sg.Player = Player;

})();

/**********************************/

(function createGame() {

    var Game = Class.extend({

        canvas: null,
        context: null,
        width: null,
        height: null,

        init: function (width, height) {

            this.canvas = document.getElementById('canvas');
            this.context = this.canvas.getContext('2d');

            this.width = width || 800;
            this.height = height || 600;

            this.canvas.width = this.width;
            this.canvas.height = this.height;
        },

        clear: function () {
            this.context.clearRect(0, 0, this.width, this.height);
        },

        draw: function () {

            this.clear();       

            for (var i = 0; i < sg.entities.length; i++) {
                sg.entities[i].draw(this.context);
            }
        },

        update: function (elapsed) {

            for (var i = 0; i < sg.entities.length; i++) {
                sg.entities[i].update(elapsed);
            }
        },

        keyDown: function (e) {

            for (var i = 0; i < sg.entities.length; i++) {

                if (typeof sg.entities[i].keyDown === 'function') {
                    sg.entities[i].keyDown(e);
                }
            }
        },

        keyUp: function (e) {

            for (var i = 0; i < sg.entities.length; i++) {
                if (typeof sg.entities[i].keyUp === 'function') {
                    sg.entities[i].keyUp(e);
                }
            }
        }

    });

    sg.Game = Game;

    var game = sg.currentGame = new sg.Game(800, 600);

    var player = new sg.Player(200, 459);

    sg.createEntity(player);

    function update(elapsed) {

        game.update(elapsed);
    }

    var lastUpdate = Date.now();

    function draw() {

        var now = Date.now();
        var elapsed = (now - lastUpdate);
        lastUpdate = now;

        game.draw();
        update(elapsed);
        requestAnimFrame(draw);
    }

    window.addEventListener('keydown', sg.currentGame.keyDown, false);
    window.addEventListener('keyup', sg.currentGame.keyUp, false);

    draw();

})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:27:02.500

keydown/keyup 事件在一次按下和另一次按下之间等待一点时间。

这是我解决问题的方法（不确定这是否正是您的问题）；添加一个 setInterval ，每 20 毫秒检查一次是否有按键按下（对角线移动不止一个）。

```
 var keys = {};
    $(document).bind('keyup', function(e){
        delete keys[e.which];
    });
    $(document).bind('keydown', function(e){
        keys[e.which] = true;
    });

    setInterval(keyEvent, 20);

    function keyEvent(){
        for(var idKeyPressed in keys){
            switch(idKeyPressed){
                case "87": // "W" key; Move to the top
                    // Do something
                    break;
            }
        }
    } 
```

希望有帮助:)

# android - 从非活动类发出开始活动

> ID：12319631
> 
> 赞同：0
> 
> 时间：2012-09-07T14:00:31.600
> 
> 标签：android, class, android-intent, android-activity, static

我是 android 的菜鸟，我有一个 Map Activity，它也使用 OverlayItems。在我的覆盖类的 onButtonTap 方法中，我想执行 startActivity，这样我就可以使用 intent.ACTION_CALL。

```
Intent callIntent = new Intent(Intent.ACTION_CALL);   
callIntent.setData(Uri.parse("tel:"+MapActivity.phonenumber0));
startActivity(callIntent); 
```

在上面的代码中，我被要求为 startActivity(Intent) 创建一个我不明白的方法。当我尝试...

```
Intent callIntent = new Intent(Intent.ACTION_CALL);   
callIntent.setData(Uri.parse("tel:"+MapActivity.phonenumber0));
MapActivity.startActivity(callIntent); 
```

它说我不能对非静态方法的非静态引用进行静态引用。当我尝试使用对象的上下文时，即被点击的按钮，它不允许我这样做。

```
Intent callIntent = new Intent(Intent.ACTION_CALL);   
callIntent.setData(Uri.parse("tel:"+MapActivity.phonenumber0));
ContextObj.startActivity(callIntent); 
```

当然，将这段代码移动到主 Activity 需要一个静态方法，该方法会出现一系列问题。

如何为 startActivity 设置适当的上下文？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T14:15:52.900

您可以像这样在 MapActivity 类中创建方法来获取上下文...

**编辑：** 采取一些像这样的静态变量......

```
public static Context mContext; 
```

在 Activity 的 onCreate() 方法中为其分配基本上下文...

```
mContext = getBaseContext(); 
```

& 返回 mContext...

```
public static Context getContext() {
    return mContext;
} 
```

并将其调用到您的非活动课程中以开始活动...

```
Intent callIntent = new Intent(Intent.ACTION_CALL);   
callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
callIntent.setData(Uri.parse("tel:"+MapActivity.phonenumber0));
MapActivity.getContext().startActivity(callIntent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:20:50.327

在开始活动之前尝试这个设置这个标志：

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

希望它会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:03:32.573

您可以将活动（地图活动）的上下文传递给您的类，然后使用它。

# ios5 - 如何创建唯一标识符并将其保存以识别用户（设备）

> ID：12319632
> 
> 赞同：1
> 
> 时间：2012-09-07T14:00:36.967
> 
> 标签：ios5, uniqueidentifier, sskeychain

我想在 iOS 5 上创建唯一标识符，并在每次启动应用程序时使用它来识别用户（用户设备）。我可以通过以下代码创建唯一标识符

```
 CFUUIDRef theUUID = CFUUIDCreate(NULL);
 CFStringRef string = CFUUIDCreateString(NULL, theUUID);
 CFRelease(theUUID); 
```

但无法将其保存在用户设备上，因此即使卸载应用程序也不会删除特定标识符。我尝试使用 SSKeychain 方法，但它给出了 Apple Mach-o Linker 错误。

请让我知道我可以完成同样的方式。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:11:55.823

按照作者在线说明将 SSKeyChain 添加到我的项目后，我遇到了完全相同的问题。我最终发现实现文件未包含在构建阶段的源文件列表中。要纠正此问题，请执行以下操作：

1) 选择您的项目，然后选择它的目标。2）然后选择 Build Phases 选项卡 3）在 Build Phases 选项卡上，您将看到一个名为 Compile Sources 的组，展开它以查看内容 4）检查 SSKeyChain 是否在列表中 5）如果不是（如我的情况）单击组底部的小加号并导航到添加 SSKeyChain.m 的位置并添加它。

构建您的项目，错误应该消失了......我希望这会有所帮助！

# objective-c - UITabBarItem 和图标大小

> ID：12319636
> 
> 赞同：2
> 
> 时间：2012-09-07T14:00:50.127
> 
> 标签：objective-c, uitabbar, uitabbaritem

我正在使用 UITabBarItem。如果我设置图像，它不会正确显示。图像被“放大”，所以我只能看到它的顶部。图片尺寸为 60x60 像素。

我正在从 xcodes XIB 编辑器设置图像 -> BarItem -> Image

它出什么问题了 ？根据 Apple Doc，Retina 的图像应为 60x60，甚至更大的图像应自动缩放以适合查看区域。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T14:17:46.463

首先，您必须制作两个图标，一个是 30x30，另一个是 60x60，并在文件名末尾附加“@2x”。

然后将 30x30 图标绑定到 XIB 编辑器中的 UITabBarItem。Apple 应根据运行的设备自动选择要显示的适当图片。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-07T14:19:45.210

当您提供视网膜图像时，您应该使用 [name]@2x~iphone.png 或 [name]@2x~ipad.png 命名它。然后，在 IB 中，您应该将文件名放在不带整个后缀的位置，因此只需 [name] 而不是 [name]@2x~iphone.png。图像不会显示在 IB 中，但在实时应用程序中应该没问题。

# .htaccess - Netbeans 7.x 中.htaccess 文件的“切换评论”？

> ID：12319638
> 
> 赞同：5
> 
> 时间：2012-09-07T14:00:56.400
> 
> 标签：.htaccess, netbeans, comments, toggle, syntax-highlighting

有没有办法让***Toggle Comment***命令适用于 Netbeans 7.2 中的 .htaccess 文件？我已经习惯了 php、css、js 和 css 文件中相应的键盘快捷键。由于 7.2 支持语法突出显示，也许可以通过更改配置来实现？

![在此处输入图像描述](../Images/011f067dd183ac5343f829e08ef17951.png)

**编辑**：我不限于 Netbeans 7.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T06:22:46.537

您是否严格限于 Netbeans v7.2？如果没有，您可以使用最新版本。它是早些时候宣布的。

[https://blogs.oracle.com/netbeansphp/entry/toggling_comments](https://blogs.oracle.com/netbeansphp/entry/toggling_comments)

# ssis - SCD 和命令任务不工作

> ID：12319640
> 
> 赞同：0
> 
> 时间：2012-09-07T14:00:58.603
> 
> 标签：ssis, scd

缓慢变化的维度任务在数据流任务中不起作用..但是如果我删除它并使用 OLEDB 目标它正在插入数据。我不知道为什么它没有将数据插入表中。SCD 和叶子任务也没有转换为黄色或绿色。

我必须根据两列对表进行插入和更新。

这是我尝试过的：

*   当我只使用 OLEDB 目的地时 - 一切正常
*   当我正在查找并将匹配的输出发送到命令任务（我正在使用更新命令）并且与 OLEDB 目标不匹配时 - 没有任何效果。
*   当我使用 SCD 并使用两列作为业务键和其他作为更改属性时 - 没有任何效果。

我的意思是“没有任何效果”，即使这些任务也没有转换为黄色或绿色。

知道这可能是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:25:18.593

即使你让它工作了，你也会意识到它非常慢并且缺少很多配置选项。

因此，我推荐[这个](http://dimensionmergescd.codeplex.com/)由 ETL 和数据仓库教父[Ralph Kimball](http://www.amazon.de/Kimballs-Data-Warehouse-Toolkit-Classics/dp/0470479574)发起和推荐的方便组件。

我个人永远不会回到 SSIS 标准组件。试试看，太棒了。

# c# - MVC4 + async/await + 在操作完成之前返回响应

> ID：12319642
> 
> 赞同：16
> 
> 时间：2012-09-07T14:01:06.983
> 
> 标签：c#, asynchronous, asp.net-mvc-4, .net-4.5, async-await

在我的 MVC4 应用程序中，我需要添加一个控制器来上传和处理大文件。文件上传后，我需要立即开始对该文件进行异步处理并将响应返回给浏览器，而无需等待处理完成。

显然我可以启动一个新线程来手动处理文件，但我想知道我是否可以使用 .net 4.5 引入的 async/await 机制来实现这个场景

为了测试这个概念，我尝试了这样的事情：

```
public async Task<ActionResult> Test()
{
    TestAsync();
    return View("Test");
}

public async void TestAsync()
{
    await LongRunning();
}

private Task<int> LongRunning()
{
    return Task<int>.Factory.StartNew(() => Pause());
}

private int Pause()
{
    Thread.Sleep(10000);
    return 3;
} 
```

异步机制似乎在一般情况下工作：当我调试代码时，我点击了“return View("Test");” “return 3”行之前的行。但是，浏览器仅在 Pause 方法完成后才会收到响应。

这似乎表现得像常规异步控制器（具有 Async 和 Completed 方法的控制器）。有没有办法在我的场景中使用控制器中的异步/等待？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T18:45:17.190

> 显然我可以启动一个新线程来手动处理文件，但我想知道我是否可以使用 .net 4.5 引入的 async/await 机制来实现这个场景

不，你不能，因为[`async`不会改变 HTTP 协议](http://nitoprograms.blogspot.com/2012/08/async-doesnt-change-http-protocol.html)。

Svick 和 James 已经将正确答案作为评论发布，为方便起见，我将其复制如下：

> IIS 几乎可以随时回收您的应用程序。
> 
> 如果您有长时间运行的事情要与请求异步，请在其他地方执行。“典型”是一个持久队列（MSMQ、Azure、RabbitMQ 等），其他东西（Windows 服务、由任务调度程序运行的 exe、使用 Quartz.net 的应用程序等）处理它们。

总而言之，HTTP 给你一个请求和一个响应（`async`- 以及其他任何东西 - 不会改变这一点）。

ASP.NET 是围绕 HTTP 请求设计的（并做出诸如“如果没有未完成的请求，则停止该网站是安全的”之类的假设）。您*可以*启动一个新线程并将上传的内容保存在内存中（这是最简单的方法），但强烈不建议这样做。

对于您的情况，我建议您遵循 James 的建议：

*   上传完成后，将上传保存到持久存储（例如，Azure 队列），并向浏览器返回“票证”。
*   让其他进程（例如，Azure 辅助角色）处理队列，最终将其标记为完成。
*   让浏览器用它的“票”轮询服务器。服务器使用“票证”在持久存储中查找文件并返回它是否完整。

这有一些变化（例如，当处理完成时使用 SignalR 通知浏览器），但一般架构是相同的。

这很复杂，但这是正确的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:01:50.590

您的代码中有错误。您必须在操作中等待对 TestAsync 的调用。如果你不这样做，它只会返回一个“任务”对象而不运行任何东西。

```
public async Task<ActionResult> Test()
{
    await TestAsync();
    return View("Test");
} 
```

在异步方法中睡眠的正确方法是调用

```
await Task.Delay(10000); 
```

您必须更改 TestAsync 的签名：如果方法返回 void，则不应将其标记为异步。它必须返回 Task 。返回 void 是为了与 .net 事件兼容而保留的。

```
public async Task TestAsync()
{
    await LongRunning();
} 
```

方法体是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:15:03.247

您的 LongRunning 方法正在同步休眠 10 秒。更改它，以便在任务中发生睡眠。

# javascript - 原型。Ajax 请求参数作为嵌套 json

> ID：12319644
> 
> 赞同：1
> 
> 时间：2012-09-07T14:01:09.847
> 
> 标签：javascript, ajax, json, prototype

我想发送带有特殊参数的请求，如下面的示例所示。但不幸的是，这个脚本只发送 id。如何传输嵌套的 JSON？

```
new Ajax.Request("/specials/update_users_specials", {
    method: 'post',
    parameters: {
        id: '1',
        data: {
            data_one: '2',
            data_two: '3'
        }
    },
    onSuccess:function(){}
}); 
```

UPD。
我试过了

```
var parameters = {}; 
$A(rows).each(function(d){ 
    parameters[d.dataset.userId] = d.value; 
}); 
params={}; 
params['data']=parameters; 
params['part']=45; 
```

不工作。我试过了

```
var parameters_json = eval("(" +JSON.stringify(params) + ")"); 
```

不工作。现在我试过了

```
$H({ id: '1', data: { data_one: '2', data_two: '3' } }) 
```

同样的结果。

UPD。

我正在使用rails，我的解决方案是：

```
var parameters = {}; 
$A(rows).each(function(d){ 
    parameters['users[' + d.dataset.userId + ']'] = d.value; 
}); 
parameters['part_id']=id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:08:14.940

从手册中， http: [//www.prototypejs.org/api/ajax/options](http://www.prototypejs.org/api/ajax/options)：

> parameters '' 请求的参数，将被编码到“get”方法的 URL 中，或其他方法的请求正文中。这可以作为 URL 编码的字符串或任何与[Hash](http://www.prototypejs.org/api/hash)兼容的对象（基本上是任何东西）提供，其属性表示参数。”

关于哈希， http: [//www.prototypejs.org/api/hash](http://www.prototypejs.org/api/hash)：

> 构造 Hash 实例有两种方法：第一种是使用 new 关键字的常规 JavaScript 对象实例化，第二种是使用[$H](http://www.prototypejs.org/api/utility/dollar-h)函数。将纯 JavaScript 对象或 Hash 传递给它们中的任何一个都会克隆它，从而保持原始对象不变。

所以，从 JSON 中创建一个哈希，你应该会很好。

**更新**

更多来自他们的页面（这是很久以前，因为我自己使用原型）[http://www.prototypejs.org/learn/introduction-to-ajax](http://www.prototypejs.org/learn/introduction-to-ajax)

```
new Ajax.Request('/some_url', {
    method: 'get',
    parameters: {company: 'example', limit: 12}
}); 
```

> 参数作为散列（首选）或由 & 号分隔的键值对字符串（如 company=example&limit=12）传入。

因此它不理解多维散列，只理解键值对。

但是，我确实在 Google 群组中找到了可能对您有所帮助[的这段代码。](https://groups.google.com/d/msg/prototype-scriptaculous/G8-10cG_E4k/_499MGaUT7IJ)

# c# - 如何在 c# 中使用 ffmpeg 将所有视频类型转换为 flv 视频类型？

> ID：12319645
> 
> 赞同：1
> 
> 时间：2012-09-07T14:01:12.363
> 
> 标签：c#, asp.net, ffmpeg

这是我的 C# 代码的一部分。

> ```
>  if (fileExt != ".flv") {// file extension 
>  string SaveADDConvertVideo = Server.MapPath("~/videoFile/Video/") + filename; 
> ```
> 
> ffmpeg.StartInfo.Arguments = " -i " + 视频 + " -ar 22050 -ab 32 -f flv -s 320×240 " + SaveADDConvertVideo + ".flv";
> 
> ```
>  ffmpeg.StartInfo.FileName = Server.MapPath("ffmpeg.exe");
>   ffmpeg.Start(); 
> ```
> 
> }

我想将任何视频格式转换为 .flv 格式。但是这段代码不起作用。我也很好地调试了我的代码，没有任何错误。谁能帮我？Tq 非常:)

# php - PHP Switch 语句在 echo 语句中显示 case 标签

> ID：12319648
> 
> 赞同：0
> 
> 时间：2012-09-07T14:01:27.170
> 
> 标签：php, switch-statement

我已使用以下 SWITCH 语句来 ECHO 三个 CASE 之一。但是，当我这样做时，网页的输出会显示 CASE 标签，然后是实际的回显语句。

`$sc_stk_poa`是`0`或的布尔字段`-1`。
`$sc_stk_prc_stanard`是 MySQL 数据库中的价格字段。

```
echo $x = $sc_stk_poa;
switch($x) {
    case 0: echo "£{$sc_stk_prc_standard}";
        break;
    case -1: echo "POA";
        break;
    default: echo "";
} 
```

我在网页中得到的输出类似于：`-1POA`或`0£59.14`取决于选择输出的情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T14:06:07.867

写一些不那么复杂的东西：

```
<?php 
switch ($sc_stk_poa)
{ 
    case 0: 
      echo "£{$sc_stk_prc_standard}"; 
    break; 
    case -1: 
      echo "POA"; 
    break; 
    default: 
      echo "";
} 
```

不需要变量 $x，是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:04:31.910

它不显示标签。你在这里有一个回声：`<?php echo $x=$sc_stk_poa;`。这是输出 的值`x`，在您的情况下使用。

# silverlight - 通过 OData 端点访问 Azure 表存储

> ID：12319649
> 
> 赞同：2
> 
> 时间：2012-09-07T14:01:27.997
> 
> 标签：silverlight, wcf-data-services, odata, visual-studio-2012, azure-table-storage

我想通过 OData 端点访问 Azure 表存储。

我看到的所有公开 OData 端点的示例都使用 SQL Azure 或 SQL Server，通过创建域服务类并选中“公开 OData 端点”复选框来使用 WCF RIA。另一种方法是添加“WCF 数据服务”类时。由于我使用的是 Azure 表存储，因此我没有模型 (.edmx) 来完成此操作。

处理这种情况的最佳做法是什么？我需要通过 OData 端点访问 Azure 表存储，以便在包括 Silverlight 在内的多个客户端应用程序中使用它。

我正在使用 Visual Studio 2012、ASP.NET Framework 4.5、Silverlight 5、C#。

如果有人能指出我正确的方向，将不胜感激。

# java - swing - JFrame 不显示实际大小

> ID：12319655
> 
> 赞同：1
> 
> 时间：2012-09-07T14:01:40.703
> 
> 标签：java, swing, jframe

我对java很陌生。我不知道我的框架有什么问题。我将尺寸设置为 300 和 200。我看到的是一个短而粗的棒状东西。

下面是我的代码：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.FlowLayout;

import javax.swing.JFrame;

public class BicycleDemo extends JFrame {
    /**
     * The serialVersionUID.
     */
    private static final long serialVersionUID = -4541236176053545919L;

    public static void createGUI () {
            JFrame jFrame = new JFrame("JFrame Demo");
            jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            Container container = jFrame.getContentPane();
            container.setLayout(new FlowLayout());
            container.setBackground(Color.BLACK);

            jFrame.setSize(300, 200);
            jFrame.setResizable(false);
            jFrame.pack();
            jFrame.setVisible(true);
    }

    public static void main(String[] args) {
            javax.swing.SwingUtilities.invokeLater(new Runnable() {
                 public void run() {
                      createGUI ();
                 }
            });
    }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:07:17.643

你在打电话`pack()`。`pack()`方法将框架调整为尽可能小的尺寸以容纳所有元素。因此，实际上您将大小设置为 200 x 300，然后再次使用`pack()`.

但是请注意，“保存所有元素”是根据它们的首选大小计算的，在很多情况下可能只是 0x0 像素。

# quartz-scheduler - 触发器是否计划在特定时间触发？

> ID：12319656
> 
> 赞同：0
> 
> 时间：2012-09-07T14:01:44.563
> 
> 标签：quartz-scheduler

我们如何知道触发器是否计划在特定时间触发？我搜索了所有的api，但找不到。我找到的最接近的 api 是 getNextFireTime() 和 getFireTimeAfter(Date afterTime)。我的要求是找出触发器是否计划在特定时间触发。如果不计划在那个时间触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:03:05.387

您可以使用 Quartz [TriggerUtils](http://quartz-scheduler.org/api/2.1.0/org/quartz/TriggerUtils.html)实用程序方法。

该方法`computeFireTimes(org.quartz.spi.OperableTrigger trigg, Calendar cal, int numTimes)`返回一个日期列表，这些日期是触发器的下一次触发时间。

该方法`computeFireTimesBetween(org.quartz.spi.OperableTrigger trigg, Calendar cal, java.util.Date from, java.util.Date to)`返回一个日期列表，这些日期是在给定日期范围内的触发器的下一次触发时间。

我希望这有帮助。

# php - 用 preg_match 提取一些 html

> ID：12319657
> 
> 赞同：0
> 
> 时间：2012-09-07T14:01:45.047
> 
> 标签：php, html, arrays, preg-match, extract

我使用 preg_mach 提取一些 html （我尝试使用 DOMDocument 但我在换行时遇到了一些问题）...这是我的代码..

1.html

```
<body>

            <!-- icon and title -->
            <div class="smallfont">
                <img class="inlineimg" src="images/icons/icon1.gif" alt="" border="0" />
                <strong>qrtoobah 3nwan</strong>
            </div>
            <hr size="1" style="color:#CCCCCC; background-color:#CCCCCC" />
            <!-- / icon and title -->

        <div id="post_message_14142536">

            <font size="7"><font color="red">msaha 700</font></font><br />
<font size="7"><font color="red">shamali 20</font></font><br />
<font size="7"><font color="red"> 1700 almetr</font></font><br />
<font size="7"><font color="#ff0000">sooom bs</font></font><br />
<font size="7"><font color="#ff0000">albee3 qreeb</font></font>
        </div>
        <!-- message -->

</body> 
```

提取.php

```
<?php 
$html = file_get_contents("1.html");
$pattern = '/<([!]+)([^]+).*>([^]+)(message\ \-\-\>)/';
   preg_match($pattern, $html, $matches);
 print_r($matches);

?> 
```

我想在`<!-- icon and title -->)blablabla(<!-- / message -->`......之间得到任何东西，但我得到了那个数组：

```
Array ( [0] => [1] => ! [2] => -- [3] => message --> ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:35:04.470

用于`strpos`查找第一个标签位置。然后用 . 找到结束标签`strpos`。我的意思是-如果您知道从哪里到您要寻找的东西并且它们是独一无二的..那么`preg_*`功能有什么重要的？

所以我想这样的事情会很好用（我让代码尽可能清晰，以便在逐步操作中理解我的想法）：

```
$tag_begin = "<!-- icon and title -->";
$tag_end   = "<!-- message -->";
$begin     = strpos($tag_begin,$text)+strlen($tag_begin);
$end       = strpos($tag_end,$text);
$result    = substr($begin,$end, $text); 
```

`<!-- (.*) -->`如果您想查找并存储打开和关闭之间的所有结构，您也可以执行完全相同的操作`<!-- / (.*) -->`。
只有你必须做的改变——首先用 preg_match 找到所有打开的结构名称。例如：

```
$result_cnt = preg_match_all('#<!-- [^/].*-->#', $text , $openings);

// Output for your example HTML is:
$openings = 
array (
  0 => 
  array (
    0 => '<!-- icon and title -->',
    1 => '<!-- message -->',
  ),
) 
```

在 $openings 的一个循环之后，首先需要使用代码进行查找。只是在正确的位置添加关闭“/”字符的开口。

# yii - Yii：模型属性的注释/提示

> ID：12319659
> 
> 赞同：7
> 
> 时间：2012-09-07T14:01:47.433
> 
> 标签：yii

我需要对表单中的某些字段进行评论/提示。我的想法是用模型来描述它，就像attributeLabels一样。我该怎么做？

如果 Gii 模型（和 Crud）生成器直接从 mysql 专栏的评论中获取它，那将是理想的

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-07T17:00:00.057

所以我在这里看到两个问题：

1.  在模型中描述提示并在表单上显示。
2.  从 mysql 评论中获取提示

**显示来自模型的提示**

`login.php`这是由生成的默认文件的略微修改版本`Yiic`

```
<div class="form">
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'login-form',
    'enableClientValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>true,
    ),
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <div class="row">
        <?php echo $form->labelEx($model,'username'); ?>
        <?php echo $form->textField($model,'username'); ?>
        <?php echo $form->error($model,'username'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'password'); ?>
        <?php echo $form->passwordField($model,'password'); ?>
        <?php echo $form->error($model,'password'); ?>
        <p class="hint">
            Hint: You may login with <kbd>demo</kbd>/<kbd>demo</kbd> or <kbd>admin</kbd>/<kbd>admin</kbd>.
        </p>
    </div>

    <div class="row rememberMe">
        <?php echo $form->checkBox($model,'rememberMe'); ?>
        <?php echo $form->label($model,'rememberMe'); ?>
        <?php echo $form->error($model,'rememberMe'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton('Login'); ?>
    </div>

<?php $this->endWidget(); ?>
</div><!-- form --> 
```

`attributeHints()`让我们通过向模型添加一个方法和一个`getHint()`方法来将该密码提示移动到`LoginForm.php`模型中。

```
 /**
     * Declares attribute hints.
     */
    public function attributeHints()
    {
        return array(
                'password'=>'Hint: You may login with <kbd>demo</kbd>/<kbd>demo</kbd> or <kbd>admin</kbd>/<kbd>admin</kbd>.',
        );
    }

    /**
     * Return a hint
     */
    public function getHint( $attribute )
    {
        $hints = $this->attributeHints();

        return $hints[$attribute];
    } 
```

如您所见，我们已将提示文本从视图移到模型中，并添加了访问它的方法。

现在，回到 中`login.php`，让我们根据模型中的数据添加提示标签。

```
<div class="row">
    <?php echo $form->labelEx($model,'password'); ?>
    <?php echo $form->passwordField($model,'password'); ?>
    <?php echo $form->error($model,'password'); ?>
    <?php echo CHtml::tag('p', array('class'=>'hint'), $model->getHint('password')); ?>
</div> 
```

所以现在我们已经将硬编码的提示更改为一个生成的元素，其中填充了来自模型的数据。

现在，继续第二个问题。

**从 mySQL 注释中获取提示**

不幸的是，我对 Gii 不够熟悉，不知道如何从 mySQL 注释中自动生成提示。但是，将 mySQL 注释数据放入模型中是相当容易的。

为此，我们可以使用以下 mySQL 查询

```
SHOW FULL COLUMNS FROM `tbl_user` 
```

所以让我们在密码字段中添加注释

```
ALTER TABLE  `tbl_user` 
CHANGE  `password`  `password` VARCHAR( 256 ) 
CHARACTER SET latin1 COLLATE latin1_swedish_ci NULL DEFAULT NULL 
COMMENT  'Hint: You may login with <kbd>demo</kbd>/<kbd>demo</kbd> or <kbd>admin</kbd>/<kbd>admin</kbd>.'; 
```

让我们添加代码以将其提取到我们的`attributeHints()`方法中。

```
 /**
     * Declares attribute hints.
     */
    public function attributeHints()
    {
        $columns= Yii::app()->db->createCommand('SHOW FULL COLUMNS FROM `tbl_user`')->queryAll();

        $comments=array();
        foreach($columns as $column){
            if( isset( $column['Comment'] ) )
            {
                $comments[ $column['Field'] ] = $column['Comment'];
            }

        }

        //Add any hardcoded hints here
        $hints = array(
                'username'=>'Enter username above',
        );

        //Return merged array
        return array_merge( $comments, $hints );
    } 
```

我们现在有两种方法来设置注释，通过 mySQL 注释或通过硬编码语句。

让我们快速更新我们的`login.php`文件以包含两种类型的提示。

```
<div class="row">
    <?php echo $form->labelEx($model,'username'); ?>
    <?php echo $form->textField($model,'username'); ?>
    <?php echo $form->error($model,'username'); ?>
    <?php echo CHtml::tag('p', array('class'=>'hint'), $model->getHint('username')); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'password'); ?>
    <?php echo $form->passwordField($model,'password'); ?>
    <?php echo $form->error($model,'password'); ?>
    <?php echo CHtml::tag('p', array('class'=>'hint'), $model->getHint('password')); ?>
</div> 
```

就是这样！

![登录页面](../Images/af44bfc00ff7a8a048cf5b9f387ba1e0.png)

现在我们的登录页面将如下所示，带有来自模型的用户名提示和来自 mySQL 注释的密码提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T20:02:18.847

从 Yii-1.1.13[`comment`](http://www.yiiframework.com/doc/api/1.1/CDbColumnSchema#comment-detail "http://www.yiiframework.com/doc/api/1.1/CDbColumnSchema#comment-detail")开始，添加了一个新属性 ,`CMysqlColumnSchema`定义在 parent 中`CDbColumnSchema`：

> 本专栏的评论。默认值为空字符串，表示未为该列设置注释。空值意味着 RDBMS 根本不支持列注释 (SQLite)，或者框架尚不支持活动 RDBMS 的注释检索。

所以我们可以使用它来访问评论。有点像这样：

```
$modelObject->tableSchema->columns['column_name']->comment

// or if you are doing this within your model use
$this->tableSchema->columns['column_name']->comment 
```

* * *

请注意，在构建[`tableSchema`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#tableSchema-detail "http://www.yiiframework.com/doc/api/1.1/CActiveRecord#tableSchema-detail")任何`CActiveRecord` [模型](https://github.com/yiisoft/yii/blob/1.1.13/framework/db/ar/CActiveRecord.php#L77 "https://github.com/yiisoft/yii/blob/1.1.13/framework/db/ar/CActiveRecord.php#L77")时或即使使用[静态模型](https://github.com/yiisoft/yii/blob/1.1.13/framework/db/ar/CActiveRecord.php#L387 "https://github.com/yiisoft/yii/blob/1.1.13/framework/db/ar/CActiveRecord.php#L387")时，都已设置，因此当我们访问该属性时不会执行新的查询。

* * *

模型中的示例实现：

```
class MyModel extends CActiveRecord {
    // hints array will store the hints
    public $hints=array();

    public function init() {
        parent::init();
        $this->hints=self::initHints($this);
    }

    public static function initHints($model) {
        $comments=array();
        foreach ($model->tableSchema->columns as $aColumn){
            if(!empty($aColumn->comment))
                $comments["$aColumn->name"]=$aColumn->comment; 
        }
        return $comments;
    }

    public static function model($className=__CLASS__) {
        $model=parent::model($className);
        $model->hints=self::initHints($model);
        return $model;
    }

} 
```

现在您可以通过以下方式访问提示：

```
$model = new MyModel;
$single_column_hint=$model->hints['column_name'];

$model = MyModel::model();
$single_column_hint=$model->hints['column_name']; 
```

* * *

要通过 gii 模板执行此操作，您只需将上述代码复制到您的自定义*模型代码模板*中，[阅读指南](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii#extending-gii "http://www.yiiframework.com/doc/guide/1.1/en/topics.gii#extending-gii")以了解如何完成此操作。

我建议将代码放在自定义基类中，您可以从中派生活动记录。

# asp.net - Web 应用程序按钮的热键

> ID：12319661
> 
> 赞同：1
> 
> 时间：2012-09-07T14:01:52.207
> 
> 标签：asp.net

我的网络应用程序上有一个命令按钮，当我单击该按钮时，我希望它的行为就像它正在输入击键 ( `Ctrl`+ `O`)。有没有办法做到这一点，如果有，怎么做？

# java - Java：Java EE 应用程序中的静态和线程安全

> ID：12319665
> 
> 赞同：2
> 
> 时间：2012-09-07T14:01:59.493
> 
> 标签：java, jakarta-ee, thread-safety

我想知道在 Java EE 应用程序中使用静态方法的含义是什么。

例如：有一个类可以处理日期的转换、字符串的重新排序等
。这个类中的所有方法都是静态的。
这些方法由 Servlet 使用。

这是否意味着静态方法需要是线程安全的（如果许多用户同时使用应用程序并同时访问静态方法，可能会出现一些问题）？

**编辑**我想在 Web 应用程序的上下文中了解这一点 - 两个用户是否会同时使用静态方法并相互混淆（静态方法的）结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T14:06:41.417

只要没有共享类变量，并行访问方法就可以了；例如，如果该方法声明了自己的东西，那么你很好：

```
public static void thing() {
    String x = "";
    // do stuff with x
} 
```

上面的很好。

```
String x = "";

public static void thing() {
    // do stuff with x
} 
```

这个不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:04:42.257

> 这是否意味着静态方法需要是线程安全的（如果许多用户同时使用应用程序并同时访问静态方法，可能会出现一些问题）？

仅当存在共享状态时。如果您为每次调用在堆上分配新对象，那么这不是问题。

但我从不喜欢做这种事情，因为立即引入共享状态意味着你有线程安全问题。我更喜欢创建转换器/助手类的实例（对象创建通常在性能方面可以忽略不计）。这立即意味着您是线程安全的（前提是您不共享状态）并且每个实例都可以（例如）在构造时进行自定义，以便在需要时提供不同的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:05:31.567

当然，如果您不保护静态方法并且它们会更改 a 状态，则会出现问题。

考虑这个样本

```
public class GlobalCount {

    private int count = 0;
    public static void increment() {
       count++; // that is : count = count + 1 (which means some thread may use the old value of count when assigning)
    }
} 
```

如果有多个线程调用`increment`，您可能会丢失一些增量（也就是说，您`count`的增量方法可能会小于调用的次数。

所以你必须将你的方法设置为同步：

```
public static synchronized void increment() {
       count++;
    } 
```

如果您认为您没有共享状态，请注意：许多标准类（例如[SimpleDateFormat](http://www.codefutures.com/weblog/andygrove/2007/10/simpledateformat-and-thread-safety.html)，正如您所说的日期格式）不是线程安全的，如果从多个线程调用实例可能会失败同时。

所以，一旦你有一个从多个线程访问的静态实例，就要非常小心。

# java - JTDS：Unicode 参数使用 CallableStatement 和 sendStringParametersAsUnicode=false

> ID：12319670
> 
> 赞同：0
> 
> 时间：2012-09-07T14:02:10.150
> 
> 标签：java, sql-server, unicode, jtds

我们遇到了 JTDS 文档中描述的有关索引扫描（SQL Server 2000 及更高版本）的性能问题，因此不得不将`sendStringParametersAsUnicode`参数设置为`false`.

这适用于我们 99.9% 的案例，但是，我们有一个应用程序确实依赖于 ntext 字段中的 unicode 数据。我们使用具有 NTEXT 参数的存储过程写入上述表。由于更改了上述设置，我们的 unicode 字符串被翻译为 '?' 字符，这不是特别有用。

我摆弄了各种各样的东西，包括：

*   `setObject(1, unicode_string, Types.NCLOB); //as well as NVARCHAR`

*   `stmt.setUnicodeStream(1, new ByteArrayInputStream(unicode_string.getBytes("UTF16")), unicode_string.length());`

*   `setNClob(1, unicode_string);`

然而，这些都不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:10:09.193

一种解决方法（尽管它不是正确的答案）是使用**Statement**而不是**CallableStatement**：

```
stmt = cn.createStatement();
stmt.execute("INSERT INTO test_unicode (my_unicode) VALUES (N'" + input + "')"); 
```

然而，这会带来显着的性能开销。

# android - 操作栏选项卡选项卡宽度不固定

> ID：12319671
> 
> 赞同：0
> 
> 时间：2012-09-07T14:02:16.390
> 
> 标签：android, mono

我的应用程序包含带有片段的操作栏选项卡。它将动态添加选项卡到操作栏。当添加多个选项卡时，选项卡上的文本会被换行。有没有办法只在单行中设置文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:16:04.963

看看这个非常有用的库，可以在 android 中使用 ActionBar 选项卡：http: [//actionbarsherlock.com/](http://actionbarsherlock.com/)

希望对你有帮助！;)

# asp.net - 命名空间“System.Web”中不存在类型或命名空间“Mvc”

> ID：12319672
> 
> 赞同：5
> 
> 时间：2012-09-07T14:02:19.243
> 
> 标签：asp.net, asp.net-mvc, visual-studio

我最近安装了 VS.NET 2012 并将我的 ASP.NET MVC 4 项目移过来。但是，在构建解决方案时，我遇到了数百个错误：

```
The type or namespace 'Mvc' does not exist in the namespace 'System.Web' (are you missing an assembly reference) 
```

AFAIK ASP.NET MVC 4 内置于 VS 2012 中，无需安装任何东西。任何想法如何摆脱这些错误并构建应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:03:20.990

您需要`System.Web.Mvc`在项目中包含对程序集的引用。

# java - 使用 Spring WebFlow 在 Hibernate 中进行 C3P0 池仍然没有运气

> ID：12319674
> 
> 赞同：0
> 
> 时间：2012-09-07T14:02:30.707
> 
> 标签：java, spring, hibernate, spring-mvc, c3p0

如果我使用以下 database.xml 文件并运行我的项目，在 Hibernate 中使用 Spring WebFlow 进行 C3P0 池仍然没有运气我检查数据库，我只看到两个连接到它，但我将它设置为十。

数据库.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jdbc="http://www.springframework.org/schema/jdbc"

    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                            http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://www.springframework.org/schema/context 
                            http://www.springframework.org/schema/context/spring-context-3.0.xsd
                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                            http://www.springframework.org/schema/jdbc
                            http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd">

    <context:property-placeholder location="classpath:jdbc.properties" />
    <context:component-scan base-package="org.uftwf" />
    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass" value="${database.driver}" />
        <property name="jdbcUrl" value="${database.url}" />
        <property name="user" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>org.uftwf.schoolvisit.model.VisitModel</value>
                <value>org.uftwf.schoolvisit.model.NameID_lookupModel</value>
                <value>org.uftwf.schoolvisit.model.School_lookupModel</value>
            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.use_sql_comments">${hibernate.use_sql_comments}</prop>
                <prop key="format_sql">${format_sql}</prop>
                <prop key="hibernate.c3p0.min_size">10</prop>
                <prop key="hibernate.c3p0.max_size">25</prop>
                <prop key="hibernate.c3p0.timeout">600</prop>
                <prop key="hibernate.c3p0.max_statements">0</prop>
                <prop key="hibernate.c3p0.idle_test_period">300</prop>
                <prop key="hibernate.c3p0.acquire_increment">5</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

但是，如果我使用这个 database.xml 文件，我会看到有十个连接到数据库，但我希望 hibernate 来管理池，所以有人可以告诉我为什么上面的 database.xml 不起作用但下面的那个起作用吗？

数据库.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jdbc="http://www.springframework.org/schema/jdbc"

    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                            http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://www.springframework.org/schema/context 
                            http://www.springframework.org/schema/context/spring-context-3.0.xsd
                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                            http://www.springframework.org/schema/jdbc
                            http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd">

    <context:property-placeholder location="classpath:jdbc.properties" />
    <context:component-scan base-package="org.uftwf" />
    <tx:annotation-driven transaction-manager="hibernateTransactionManager" />

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">

        <!-- these are C3P0 properties --> 
        <property name="acquireIncrement" value="${database.acquireIncrement}" />
        <property name="minPoolSize" value="${database.minPoolSize}" />
        <property name="maxPoolSize" value="${database.maxPoolSize}" />
        <property name="maxIdleTime" value="${database.maxIdleTime}" />
        <property name="idleConnectionTestPeriod" value="300" />

        <property name="driverClass" value="${database.driver}" />
        <property name="jdbcUrl" value="${database.url}" />
        <property name="user" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>org.uftwf.schoolvisit.model.VisitModel</value>
                <value>org.uftwf.schoolvisit.model.NameID_lookupModel</value>
                <value>org.uftwf.schoolvisit.model.School_lookupModel</value>
            </list>
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.use_sql_comments">${hibernate.use_sql_comments}</prop>
                <prop key="format_sql">${format_sql}</prop>
                <prop key="hibernate.c3p0.min_size">10</prop>
                <prop key="hibernate.c3p0.max_size">25</prop>
                <prop key="hibernate.c3p0.timeout">600</prop>
                <prop key="hibernate.c3p0.max_statements">0</prop>
                <prop key="hibernate.c3p0.idle_test_period">300</prop>
                <prop key="hibernate.c3p0.acquire_increment">5</prop>
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:43:42.693

为什么要hibernate来管理池？第二种情况下的设置方式是使用 spring 配置 dataSource & hibernate session factory 的正确方式。这将与 spring 事务管理一起正常工作。

当您将 dataSource 作为参数传递给 sessionFactoryBean 时，与 dataSource 配置相关的休眠属性将被忽略。如果您坚持使用休眠管理池，您可以尝试通过删除 AnnotationSessionFactoryBean 中的 dataSource 属性注入。现在需要将 driverClass、jdbcURL 等指定为休眠属性的一部分。

来自春天的 javadoc。

> 设置 SessionFactory 使用的 DataSource。如果设置，这将覆盖 Hibernate 属性中的相应设置。如果设置了此项，Hibernate 设置不应定义连接提供程序以避免无意义的双重配置。

[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/AbstractSessionFactoryBean.html#setDataSource(javax.sql.DataSource](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/AbstractSessionFactoryBean.html#setDataSource(javax.sql.DataSource) )

您可以让 spring 管理连接池（通过配置数据源 bean 并将其传递给 sessionFactory）或让 hibernate 完全管理它。一半一半都行不通。

# database - WARN (org.hibernate.jdbc.JDBCContext:333) - afterTransactionCompletion() 从未被调用

> ID：12319676
> 
> 赞同：1
> 
> 时间：2012-09-07T14:02:32.070
> 
> 标签：database, performance, hibernate, postgresql

当我检查我的日志时，我使用休眠作为 ORM (catalina.out)

我多次收到此警告

```
WARN   (org.hibernate.jdbc.JDBCContext:333) - afterTransactionCompletion() was never called 
```

谁能帮我解决这个警告......？

该警告的含义是什么以及何时发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:40:19.340

在文件 JDBCContext.java 源文件中是以下注释

```
/**
 * We cannot rely upon this method being called! It is only
 * called if we are using Hibernate Transaction API.
 */ 
```

这意味着，方法 afterTransactionCompletion() 通常由休眠事务 API 调用，例如 Session.flush() 或 Transaction.commit()。似乎在您的程序中的某个地方可能会发生事务没有定期结束。我们不能告诉你在哪里，因为我们不知道你的代码。

# php - 返回一个时间段内每天创建、关闭和打开的记录数

> ID：12319683
> 
> 赞同：6
> 
> 时间：2012-09-07T14:03:00.257
> 
> 标签：php, mysql

我有一个存储创建和关闭日期的表。我要做的是运行一个查询，在给定的时间段内为我提供每天创建的记录数、关闭的记录数以及打开的记录数。表结构：

```
+------------------------+
| Field      | Structure |
+------------+-----------+
| id         | int       |
| start_date | datetime  |
| close_date | datetime  |
+------------+-----------+ 
```

前两个查询不是问题 - 我现在正在处理的是：

```
SELECT COUNT(*), start_date FROM dates 
WHERE start_date BETWEEN 'start' AND 'end' 
GROUP BY start_date 
ORDER BY start_date ASC

SELECT COUNT(*), close_date FROM dates 
WHERE close_date BETWEEN 'start' AND 'end' 
GROUP BY close_date 
ORDER BY close_date ASC 
```

第三个查询是一个问题 - 我可以让它告诉我在表中存在这一天的那一天有多少人打开，但我没有想出的是如何让它在每一天写出一行年，给我那天的计数。

这是第一个问题。

第二个是我想让它给我这样的结果，但我不知道该怎么做 - 在这里搜索给了我一些错误的开始，但没有什么可靠的。

```
+------------+--------+--------+--------+
|    Date    | Opened | Closed | Active |
+------------+--------+--------+--------+
| 2012-05-06 | 3      | 2      | 7      |
| 2012-05-07 | 2      | 0      | 9      |
| 2012-05-08 | 0      | 0      | 9      |
| 2012-05-09 | 0      | 3      | 6      |
+------------+--------+--------+--------+ 
```

如果需要，我完全愿意运行单独的查询，并在必要时用代码而不是 db 处理所有查询 - 我相当确定我可以将所有查询数据从单个查询写入单个数组，然后循环通过它来构建报告，但我真的不希望这样做。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:12:00.550

> 我可以让它告诉我在表中存在这一天的那一天有多少人开放，但我没有想出的是如何让它为一年中的每一天写下一行并给我计数为那一天。

我的理解是：你想计算每个结束日期的问题吗？

```
SELECT COUNT(*) FROM dates WHERE your_condition GROUP BY DAY_OF_YEAR(close_date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:00:06.953

仅使用 SQL 语句创建这样的聚合表确实很困难。您将需要使用子查询、UNION 语句和/或可能的存储过程来获取逻辑点，以便它在您呈现表格时显示表格。

您已经拥有的两个查询比我上面提到的方法快得多。PHP 数组肯定会帮助您获得所需的东西。

所以：

**第1步**

```
SELECT COUNT(*) AS active_before_start 
WHERE start_date < 'start'
AND close_date IS NULL 
```

获取该号码并将其存储在 $active_before_start 中。

**第2步**

```
SELECT COUNT(*) AS total_opened, start_date FROM dates 
WHERE start_date BETWEEN 'start' AND 'end' 
GROUP BY start_date 
ORDER BY start_date ASC 
```

将这些结果放在一个数组中

```
foreach ($results as $result)
{
    $key = $result->start_date;
    $final_table[$key]['date']   = $key;
    $final_table[$key]['opened'] = $result->total_opened;
} 
```

**第 3 步**

```
SELECT COUNT(*) AS total_closed, close_date FROM dates 
WHERE close_date BETWEEN 'start' AND 'end' 
GROUP BY close_date 
ORDER BY close_date ASC 
```

再次将它们存储在数组中

```
foreach ($results as $result)
{
    $key = $result->close_date;
    $final_table[$key]['date']   = $key;
    $final_table[$key]['closed'] = $result->total_closed;
} 
```

**第4步**

现在您可以遍历表来操作数据，以便它产生您需要的结果：

```
$results_table = array();
$active        = $active_before_start;
foreach ($final_table as $key => $item)
{
    $opened = (isset($item['opened']) ? $item['opened'] : 0;
    $closed = (isset($item['closed']) ? $item['closed'] : 0;
    $active = $active + ($opened' - $closed);

    $results_table[$key]['date']   = $key;
    $results_table[$key]['opened'] = $opened;
    $results_table[$key]['closed'] = $closed;
    $results_table[$key]['active'] = $active;
} 
```

从那时起，您始终可以执行[ksort](http://php.net/manual/en/function.ksort.php)以防万一显示排序后的数组结果。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:48:40.307

**此查询很棘手，因为您需要范围内每个**日期的状态列表。

在此查询中，日期是在联接查询中生成的。为此，我使用了同一张表，假设它有

*   记录数 >= 日期范围之间的日期数
*   id-s 必须连续到 daterange 之间的日期数

您可以将其替换为您自己的日期列表生成子查询。

```
set @start :='2012-05-06';
set @end :='2012-05-09';

select cdate as Date
     , sum(start_date = cdate) Opened
     , sum(close_date = cdate or close_date is null) Closed
     , sum(start_date <= cdate and (close_date>cdate or close_date is null)) Active
from dates
join (select date(@start + interval id-1 day) cdate from dates where id <= to_days(@end)-to_days(@start)+1) d
  on start_date <= cdate and (close_date>=cdate or close_date is null)
where start_date <= @end 
  and (close_date >= @start or close_date is null)
group by cdate
order by cdate
; 
```

# c++ - 为什么链接器找不到 CppUnit 库？

> ID：12319685
> 
> 赞同：0
> 
> 时间：2012-09-07T14:03:02.440
> 
> 标签：c++, linker-errors

我正在尝试学习 CPPUNIT 我查看了以下链接：

[CPPUNIT](http://netbeans.org/kb/docs/cnd/c-unit-test.html)

虽然这里选择的语言是 ci 在创建这个应用程序时选择了 c++ 并添加了

C:\cppunit\cppunit-1.12.1\include 到包含目录我还在链接器选项中添加了 cppunitd,cppunit 但是当我尝试测试 cppunit 时仍然出现错误。

错误：

```
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../mingw32/bin/ld.exe: cannot find    
-lcppunitd
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../mingw32/bin/ld.exe: cannot find -lcppunit
c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../mingw32/bin/ld.exe: cannot find -lcppunit
collect2: ld returned 1 exit status
make[1]: *** [build/Debug/MinGW_1-Windows/tests/TestFiles/f1] Error 1
make: *** [.build-tests-impl] Error 2

BUILD TESTS FAILED (exit value 2, total time: 4s) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:05:15.560

需要使用`-L`标志并具有库的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T13:48:54.550

我遇到了同样的链接器错误，发现我在构建 32 位应用程序时只安装了 64 位版本的 CppUnit。我通过安装 32 位版本的库解决了这个问题。

# operating-system - 音乐播放器流程

> ID：12319686
> 
> 赞同：14
> 
> 时间：2012-09-07T14:03:03.360
> 
> 标签：operating-system, processor

我正在读一本书，上面说单核且没有超线程的处理器一次只能处理一个进程，所以当我们在 PC 上执行如此多的操作并且一些后台进程总是在那里时，就会产生疑问为什么不让音乐播放器在两者之​​间短暂停留。我知道 CPU 速度非常快，但音乐播放器通常会连续播放音乐，没有任何小中断（这是可以观察到的）。谁能澄清这种行为？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T14:12:32.793

1）如您所说，没有超线程的单核CPU一次只能运行一个进程。多个进程通过上下文切换来处理，即 CPU 将运行一个进程，然后切换到下一个进程，然后再切换到下一个进程，以此类推。某个进程的调度频率取决于许多不同的因素，其中进程优先级是一个。（过去常常需要以更高的优先级运行 WinAmp 以避免故障等。现在不需要这样做，因为 CPU 速度要快得多）。

2）*那么，考虑到这一点，为什么它仍然听起来很棒并且没有故障？*

在处理音频时，CPU 通过将样本放在声卡上的硬件缓冲区或 RAM 中来为声音设备提供样本。声音处理器不直接从 CPU 获取数据，而是从这两个缓冲区之一读取样本。只要我们在缓冲区中有样本，我们就很好，即使 CPU 正在做其他事情。

关于硬件缓冲区大小的细节在不同的声卡上是不同的。一些（较旧的）声卡根本没有声音缓冲区，而在这里 RAM 开始发挥作用。

用完样本称为*缓冲区欠载*。即使在现代计算机上也可能发生这种情况，例如，如果您在运行音频播放器时启动繁重的进程，CPU 可能无法及时切换回来，我们可以清楚地听到声音馈送中的故障和间隙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:10:22.343

[这是由于执行抢先式多任务](http://en.wikipedia.org/wiki/Preemption_%28computing%29)的操作系统。该过程实际上被中断了很短的时间，不足以引起人类的注意。另一个原因也是声卡有一个播放缓冲区，它允许连续播放，同时数据以块的形式提供给它。*因此，虽然向卡提供数据的过程被中断了很短的时间，但仍然可以进行播放*。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-07T14:23:22.470

这由操作系统调度程序处理。

调度程序将为每个进程分配一个时间片（这可能是几毫秒），并允许进程在该时间长度内执行它需要执行的操作。分配的长度由操作系统使用的算法确定（即短期调度、长期等）。您没有注意到这一点的原因是因为 CPU 可以在如此高的频率下运行，即 1GHz，这使得单核/线程上的多任务对用户透明。

[http://en.wikipedia.org/wiki/Scheduling_](http://en.wikipedia.org/wiki/Scheduling_(computing) (计算) [http://web.cs.wpi.edu/~cs3013/c07/lectures/Section05-Scheduling.pdf](http://web.cs.wpi.edu/~cs3013/c07/lectures/Section05-Scheduling.pdf)

# android - 针对多种尺寸因素的 Android UI 设计

> ID：12319692
> 
> 赞同：2
> 
> 时间：2012-09-07T14:03:20.587
> 
> 标签：android, android-layout, android-ui

我正在构建一个应用程序，它从类似于股票 PIN 输入屏幕的 PIN 屏幕开始，问题是我无法让设计适用于所有类型的手机，为了简单起见，我们只讨论纵向模式（我会链接下面的布局xml）：

*   在小屏幕设备上，我需要减小按钮的 dp 大小，这样它们就不会挂在屏幕边缘
*   在大型设备上，按钮更大，因此它们不会在屏幕中间聚集在一起
*   我需要支持一些旧的（2.3）设备，其中一个是 5 英寸的平板电脑，按钮挂在上面（因为尺寸因素属于*大类*），但它应该是*正常*尺寸类别。我知道最小宽度尺寸组，但这仅适用于 >3.2 设备。

我想在所有设备上都有一个一致的外观，（很大程度上）独立于它的形式或大小。我想过元素的动态大小，但没有支持它，我不想靠近 AbsoluteLayout 类。

有没有人分享我的挫败感，或者已经开发了一个好的解决方案？

我正在使用的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="fill_parent" >

    <TextView android:id="@+id/enter_pin"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:text="@string/DIALOG_ENTERPIN" />

    <EditText android:id="@+id/pin_box"
              android:layout_below="@id/enter_pin"
              android:layout_centerHorizontal="true"
              android:layout_width="fill_parent" />

    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
                 android:layout_below="@id/pin_box"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content" >

        <TableRow android:gravity="center" >
            <Button android:id="@+id/pin_1"
                    style="@style/pinbutton"
                    android:text="1" />

            <Button android:id="@+id/pin_2"
                    style="@style/pinbutton"
                    android:text="2" />

            <Button android:id="@+id/pin_3"
                    style="@style/pinbutton"
                    android:text="3" />    
        </TableRow>

        <TableRow android:gravity="center" >
            <Button android:id="@+id/pin_4"
                    style="@style/pinbutton"
                    android:text="4" />

            <Button android:id="@+id/pin_5"
                    style="@style/pinbutton"
                    android:text="5" />

            <Button android:id="@+id/pin_6"
                    style="@style/pinbutton"
                    android:text="6" />
        </TableRow>

        <TableRow android:gravity="center" >
            <Button android:id="@+id/pin_7"
                    style="@style/pinbutton"
                    android:text="7" />

            <Button android:id="@+id/pin_8"
                    style="@style/pinbutton"
                    android:text="8" />

            <Button android:id="@+id/pin_9"
                    style="@style/pinbutton"
                    android:text="9" />
        </TableRow>

        <TableRow android:gravity="center" >
            <Button android:id="@+id/pin_back"
                    style="@style/pinbutton"
                    android:text="‹" />

            <Button android:id="@+id/pin_0"
                    style="@style/pinbutton"
                    android:text="0" />

            <Button android:id="@+id/pin_ok"
                    style="@style/pinbutton"
                    android:text="OK" />
          </TableRow>
     </TableLayout>
</RelativeLayout> 
```

## 更新：

我已经在为不同的大小组使用不同的布局，并且专门使用 dp & sp，仅供参考，所以请不要写泛泛而谈。问题仍然在于更精细的细节，IMO 的尺寸箱选择得不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:12:58.507

> 我考虑过元素的动态大小，但不支持它

这是什么意思？动态大小或多或少是 Android 布局的基础。您可以使用前面提到的 DP 进行基于密度的相对大小调整，您可以使用`layout_weight`LinearLayouts 来处理显示的小数部分，您可以使用`wrap_content`and`match_parent`根据显示的大小制作图形大小，或者里面的内容。我的建议是给按钮一个`min_width`/`min_height`属性，这样在较大的设备上按钮不会变得太大而荒谬，但也不要太小而无法在较小的设备上按下。

如果您不介意有几个不同版本的布局文件，另一种方法是拥有更多资源限定的布局文件夹（例如`layout-large`,`layout-small`等），根据显示的一般大小，布局略有不同。

**编辑：**好的，快速的想法，只是为了密码键盘，我什至没有在布局编辑器中查看它，但这是我可能如何做到这一点的基本想法。没有 maxWidth 或 maxHeight 属性`LinearLayout`，所以我可能会创建一个资源文件夹，`layout_sw600dp`并`layout_sw720dp`为该尺寸的屏幕的 PIN 键盘硬编码一个较小的尺寸。

```
<LinearLayout
    android:id="@+id/pin_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:max_width="480dp"
    android:max_height
    android:layout_margin="20dp"
    android:orientation="vertical"
    >
    <LinearLayout
        android:id="@+id/pin_row1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal"
        >
        <Button
            android:id="@+id/num1"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="1"
            />
        <Button
            android:id="@+id/num2"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="2"
            />
        <Button
            android:id="@+id/num3"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="3"
            />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/pin_row2"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal"
        >
        <Button
            android:id="@+id/num4"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="4"
            />
        <Button
            android:id="@+id/num5"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="5"
            />
        <Button
            android:id="@+id/num6"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="6"
            />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/pin_row3"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal"
        >
        <Button
            android:id="@+id/num7"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="7"
            />
        <Button
            android:id="@+id/num8"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="8"
            />
        <Button
            android:id="@+id/num9"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="9"
            />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:13:16.913

是的，Android 的 UI 设计是应用程序开发中最乏味和最令人沮丧的方面之一。

有几种方法可以处理这个问题（没有一种方法本身是快速和简单的）。要么在代码中进行布局，然后处理不同的密度/分辨率。

否则，复制您的布局，但调整值，并将它们存储在单独的布局文件夹中，操作系统将根据制造商指定的屏幕尺寸自动从中选择。

利用`layout, layout-small, layout-large, layout-xlarge, layout-xlarge, layout-land`等。这样，您基本上可以将您的布局 c&p 到每个目录中，并以这种方式修改特定尺寸。此外，如果您发现重用了许多不同的维度，请指定 dimensions.xml 或 styles.xml，这样您就可以避免重复键入它们。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

是一个相当不错的资源，但总的来说，答案是多种尺寸的 ui 设计只需要大量的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:17:40.830

一般来说，使用 dip 或 dp 定义 Button 或其他 View 的大小，使用 sp 定义文本的大小，如果这样做，那么您的应用程序可以适合大多数屏幕。

# java - 使用@Formula 休眠多对一

> ID：12319696
> 
> 赞同：3
> 
> 时间：2012-09-07T14:03:31.247
> 
> 标签：java, spring, hibernate, jakarta-ee, hibernate-mapping

我有两个数据库表，想使用 Hibernate 在两者之间建立多对一关系。

![在此处输入图像描述](../Images/2d464e48bcc6e8f768dcee1f1a77cdbc.png)

![和](../Images/b5da97c5b239b6ba12f8396372f687c0.png)

我没有构建这两个表，但在我开始项目时已经制作好了。我是 Hibernate 的新手，想在两个表之间建立多对一关系。

这通常会很困难，但是两个表之间的链接，“Praxiscode”不是主键，我想做类似的事情

```
@ManyToOne(targetEntity = PraxisIITest.class)
    @Fetch(FetchMode.JOIN)
    @NotFound(action = NotFoundAction.IGNORE)
    @Formula(value = "(SELECT praxis.ID FROM lstPraxis praxis where praxis.Praxiscode=Praxiscode and Testdate BETWEEN praxis.BeginDate AND praxis.EndDate)")
    private PraxisIITest praxisIITest; 
```

但是在指定上述@Formula 时，它会引发异常，抱怨列不在“字段列表”中

```
org.hibernate.exception.SQLGrammarException: Unknown column 'praxisiite1_.praxisIITest_ID' in 'field list'
    org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:82) 
```

这是在 PraxisIITest 中指定 ID 的地方 ->

```
@Entity
@Table(name="lstPraxis")
@Cache(region="edu.uky.cepis.cache.praxisIItest", usage=CacheConcurrencyStrategy.READ_WRITE)
public class PraxisIITest implements java.util.Comparator<PraxisIITest>, Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="ID")
    private long id; 
```

我对这一切都错了吗？还是我错过了一些非常基本的东西，我的理解是这应该有效......

非常感谢任何想法或建议！再次提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:17:44.257

我认为问题在于您没有使用有效的 SQL 片段。它假设 Hibernate 会做一些别名：

```
(SELECT praxis.ID FROM lstPraxis praxis where praxis.Praxiscode=Praxiscode and Testdate BETWEEN praxis.BeginDate AND praxis.EndDate) 
```

lstPraxis 表中不存在 Testdate（根据您的图像），它在 tbl20Praxis 表中。即使该表是 PraxisIITest 实体映射到的表，我认为您需要在 @Formula 片段中显式地进行表连接。

我认为 Hibernate 没有对公式进行任何处理，而是将其视为原生 SQL。但这会使您看到的错误更加令人困惑...

# database - identity() / scope_identity() 在分配时在 H2 中不起作用

> ID：12319700
> 
> 赞同：4
> 
> 时间：2012-09-07T14:03:41.420
> 
> 标签：database, h2

使用 H2 嵌入式 Java 数据库，我遇到了 identity() 和 scope_identity() 的问题。这些函数在分配给变量时似乎不起作用：

让我们有一个简单的表：

```
create table test3 (x int IDENTITY); 
```

这有效，正如预期的那样返回插入的最后一个值：

```
insert into test3 values (default);
select scope_identity() 
```

以下构造应返回相同但返回 null

```
insert into test3 values (default);
set @a=scope_identity();
select @a; 
```

我做错了什么还是H2中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:11:36.757

问题是`set`实际上重置了范围标识（为空），因为它不是查询。只有返回结果的语句，例如`select`and `call`，才是查询。所以你可以做的是：

```
select @a := scope_identity(); 
```

这行得通。我同意`set`在这种情况下不起作用是出乎意料的，我会检查是否可以支持它。

# sql - 我有数据库文件（，sql），我想在 phonegap 中使用这个数据库文件

> ID：12319703
> 
> 赞同：0
> 
> 时间：2012-09-07T14:03:59.740
> 
> 标签：sql, cordova

我有数据库文件（.sql），我想在 phonegap 中使用这个数据库文件。我能怎么做 ？sql文件可以与phonegap一起使用吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T15:25:55.237

查看我关于该主题的几篇博客文章：

从 SQL 文件创建数据库： http: [//simonmacdonald.blogspot.ca/2011/12/on-fourth-day-of-phonegapping-creating.html](http://simonmacdonald.blogspot.ca/2011/12/on-fourth-day-of-phonegapping-creating.html)

复制现有的 SQLite DB 文件： [http ://simonmacdonald.blogspot.ca/2011/12/on-second-day-of-phonegapping-copying.html](http://simonmacdonald.blogspot.ca/2011/12/on-second-day-of-phonegapping-copying.html)

# php - 如何返回图像上传的文件名以插入数据库？

> ID：12319705
> 
> 赞同：0
> 
> 时间：2012-09-07T14:04:02.723
> 
> 标签：php, database, forms, codeigniter, function

有谁知道我如何获取刚刚上传的文件的名称，然后将其传递给 index() 函数，以便将其插入到我的数据库中？

它是用 codeigniter 编写的，这是我的表单控制器中的代码。

谢谢。

```
public function index() {

    $this->load->library('form_validation');

    $this->form_validation->set_rules('nominee', 'Nominee', 'required');
    $this->form_validation->set_rules('email', 'Email', 'required|valid_email|is_unique[self_nominees.email]');
    $this->form_validation->set_rules('location', 'Location', 'required');
    $this->form_validation->set_rules('category', 'Category', 'required');
    $this->form_validation->set_rules('description', 'Description', 'required');
    $this->form_validation->set_rules('imageupload', 'Image Upload', 'callback__image_upload');
    $this->form_validation->set_rules('videoupload', 'Video Upload', 'callback__video_upload');

    if ($this->form_validation->run() == FALSE)
    {
        //Load the form
        $this->template('form.php');
    }
    else
    {       
        //Run code to add into the database
        $formdata = $this->input->post(NULL, TRUE); // this prevent from XSS attacks
        $this->load->model('users');
        $this->users->self_nominate($formdata['nominee'], $formdata['email'], $formdata['location'], $formdata['category'], $formdata['description'], 'image', 'video');                                    

        //Load the thankyou page
        $this->template('thankyou.php');
    }

}

/*----------------------------------------------------------------
    Image Upload Function
----------------------------------------------------------------*/

function _image_upload()
{
      $this->load->library('upload');

        // Check if there was a file uploaded
        if (!empty($_FILES['imageupload']['name']))
        {
            // Specify configuration for File 1
            $config['upload_path'] = 'uploads/images';
            $config['allowed_types'] = 'gif|jpg|png';
            $config['max_size'] = '100';
            $config['max_width']  = '1024';
            $config['max_height']  = '768';       

            // Initialize config for File 1 
            $this->upload->initialize($config);

            // Upload file 1
            if ($this->upload->do_upload('imageupload'))
            {
                $data = $this->upload->data();

                return true;
            }
            else
            {
                $imageerrors = $this->upload->display_errors();
                $this->form_validation->set_message('_image_upload', $imageerrors);

                return false;
            }

        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:07:04.797

就在文档中，在[此处](http://codeigniter.com/user_guide/libraries/file_uploading.html)找到。

```
$this->upload->data() 
```

这是一个帮助函数，它返回一个数组，其中包含与您上传的文件相关的所有数据。这是数组原型：

```
Array
(
    [file_name]    => mypic.jpg
    [file_type]    => image/jpeg
    [file_path]    => /path/to/your/upload/
    [full_path]    => /path/to/your/upload/jpg.jpg
    [raw_name]     => mypic
    [orig_name]    => mypic.jpg
    [client_name]  => mypic.jpg
    [file_ext]     => .jpg
    [file_size]    => 22.2
    [is_image]     => 1
    [image_width]  => 800
    [image_height] => 600
    [image_type]   => jpeg
    [image_size_str] => width="800" height="200"
) 
```

`$this->upload->data()`拥有您可能需要的有关文件的所有信息！

# java - DAOFactory：返回一个新实例还是总是一样？

> ID：12319707
> 
> 赞同：2
> 
> 时间：2012-09-07T14:04:11.907
> 
> 标签：java, design-patterns, dao, factory-pattern

我想到了一个简单的问题：我有我的 DAOFactory 类：

```
public class DAOFactory {
    public static UserDAO createUserDAO() {
        return new UserDAO();
    }

    public static AdminDAO createUserDAO() {
        return new AdminDAO();
    }
    //etc etc
} 
```

这样做（AFAIK 是标准的），每次有人请求 DAO 时，都会创建一个新实例。实际上，没有必要为每个 DAO 拥有多个实例，除非我遗漏了什么。:D

那么，我们为什么不这样做呢？

```
public class DAOFactory {
    /* eventually we could use lazy initialization */
    private static UserDAO userDAO = new UserDAO();
    private static UserDAO AdminDAO = new AdminDAO();
    //etc etc
    public static UserDAO createUserDAO() {
        return userDAO;
    }

    public static AdminDAO createUserDAO() {
        return adminDAO;
    }
    //etc etc
} 
```

前者和后者在性能和内存方面有什么区别？我想实际上，对于 DAOFactory 的客户端，这两种实现之间没有区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:16:42.760

基本上，如果你的 DAO 类是不可变的或无状态的，那么你可以这样做，但如果不是，你必须使 DAO 类线程安全，如果多个线程访问同一个对象并弄乱它的状态，它可能会导致失败。

（在单线程环境下，你写的可以接受，但是当你写DAO模式的时候，肯定不是单线程的）

**那么为什么我们不这样做，为什么不一样：线程安全成为一个问题。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:12:53.337

如果我调用一个方法`create()`，我*希望*它会创建一个新版本。也许调用你的方法更直观`getInstance()`，它没有这样的承诺。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:11:28.343

嗯，这取决于 DAO 是否具有非全局状态。如果是这样，则不建议使用单例。

除此之外，在第二种方法中访问工厂时，您正在创建所有 DAO。如果您使用它，请使用一些惰性初始化，例如双重检查锁定。

要记住的另一点：如果您不需要很多 DAO（我猜这里不是这种情况），如果您总是返回一个新实例，它们可能会被垃圾收集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T14:15:31.957

这两种实现之间有很大的不同。第二个使用状态变量，这意味着我们可以（*或不能*）在并发环境中遇到一些问题。事实上，这取决于具体的 DAO 实现（是否*使用状态*）。

我更喜欢第一个版本，因为它遵循模式工厂的理念。工厂生产一些东西，而不是持有一些东西并按需退回产品。工厂模式的另一个词是**虚拟构造函数**，因此所有人都可能期望构造函数返回新实例。

# git - Git合并没有推送所有合并的文件？

> ID：12319708
> 
> 赞同：-1
> 
> 时间：2012-09-07T14:04:12.957
> 
> 标签：git, svn

也许我做错了什么，但我使用的是 git svn，我执行以下命令

```
git checkout master
git merge clean
git svn dcommit 
```

合并很顺利，删除大量文件，合并文件，添加文件，但 git svn dcommit 不会推送所有文件。然后我做了一个 git svn rebase 以确保一切都在加速，找到并修复一些冲突，然后再次提交并推送，我只看到在冲突中更改的文件被推送。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:47:54.213

在 git 中，你应该做 rebase 而不是合并以获得线性历史，然后你可以将它提交到 svn 中。

# html - 背景图像不透明度和：悬停

> ID：12319718
> 
> 赞同：0
> 
> 时间：2012-09-07T14:04:59.913
> 
> 标签：html, css, hover, png

是否可以仅在光标位于 div 背景图像的不透明部分上时触发 div 的鼠标悬停？也许通过Javascript？

我在谷歌上只能找到旧的 IE PNG 修复程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:17:11.017

这看起来与这个问题类似：[Hit detection on non-transparent pixel](https://stackoverflow.com/questions/2878511/hit-detection-on-non-transparent-pixel)

我想这也可以通过使用 jQuery 获取属性来为背景图像完成：

```
$('#myDiv').css('background-image'); 
```

我个人没有这样做，但这似乎是一个可行的解决方案。这仅适用于现代浏览器，但您应该能够使其与[excanvas](http://code.google.com/p/explorercanvas/)向后兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:17:43.590

这是一些调整，但为什么不向不透明的 div 添加一个类，并使用 JavaScript 来检查它呢？

在 jQuery 中：

```
$('div').mouseover(function(){
    if ($(this).is('.opaque')) {
        //Some actions
    }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:17:53.017

这是可能的，只是不是很容易。您将不得不使用大量的 Javascript。

您希望附加到您`<div>`的 onmousemove 事件，该事件返回光标的 X、Y 坐标。然后，您的事件处理函数将测试光标是否在正确的位置，以触发另一个 onmouseover 事件。

实现“光标是否在不透明像素上？” 测试可以通过两种方式进行：第一种是创建一个简单的数学表达式（例如，图像的不透明部分是否形成整齐的矩形、圆形或多边形）。更困难（且浏览器支持较少）的方法是将背景图像加载到 Canvas 对象中，然后获取当前像素值的不透明度图并从那里获取它，如下所示：

```
var pixel = canvas.getImageData(x, y, 1, 1).data;
var alpha = pixel[3]; // assuming RGBA
if( alpha > threshold ) onMouseOver(); // raise the event 
```

另一种选择是创建一个完全透明的 div（或其他一些元素），定位和调整大小，使其仅覆盖下面 div 的不透明部分，然后只测试该`mouseover`元素的框。

# c# - 删除 Outlook 2010 中已删除的项目

> ID：12319725
> 
> 赞同：1
> 
> 时间：2012-09-07T14:05:36.123
> 
> 标签：c#, outlook-addin, outlook-2010

根据文档，当我从通讯录中删除联系人时，它会被移动到“已删除”文件夹。假设有一个懒惰的程序员（当然不是你也不是我）不想编写代码来**更新**Outlook 每次启动时的联系人，而只是从地址簿中删除**所有**联系人，然后重新填充它（假设填充的用户并不多，而且 Outlook 每天都会启动很多次），因此性能不是问题，但已删除文件夹中的条目数量越来越多。

Outlook 是否整齐地管理删除的存储，还是我需要 hrmp...，*那个*懒惰的程序员需要担心它吗？

上述程序员可能会使用看起来像这样的代码。

```
Outlook.Folder contacts = 
  this.Application.Session.GetDefaultFolder(
    Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;
Outlook.Folder addressBook = contacts.Folders["lazy"] as Outlook.Folder;

while (addressBook.Items.Count > 0)
  addressBook.Items.OfType<Outlook.ContactItem>().Last().Delete(); 
```

如果他需要担心，他可能想从删除文件夹中删除删除，但当然，**只有**那些被他的软件删除的。有没有一种流畅的删除-删除联系人的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:21:38.050

我只会重新创建`Folder`每次并避免缓慢的逐一`ContactItem`删除。当您删除`Folder`它时，它不会在已删除的项目中保留副本。一次`Folder`删除和保存将比大量删除项目更快。

```
Outlook.Folders contactFolders = contacts.Folders;
if (contactFolders.Cast<Outlook.Folder>()
  .Where(c => c.Name == "My AB").Count() > 0)
    contactFolders["My AB"].Delete(); 
```

只需按照[上一个 SO 帖子中的地址簿创建步骤即可](https://stackoverflow.com/a/12305103/175679)。

# asp.net - 如何从 gridview 的 RowDataBound 事件中删除行

> ID：12319728
> 
> 赞同：0
> 
> 时间：2012-09-07T14:05:53.537
> 
> 标签：asp.net, vb.net, gridview

我正在尝试从 gridview 中删除一行（基于条件），然后将行添加到“master”gridview 的 RowDataBound 事件内的另一个 gridview 中。最初我不知道为了调用 .DeleteRow(i) 您需要有一个“ondelete”事件处理程序。但是，由于所有 gridview 的 .DeleteRow 方法都是调用这个事件处理程序，所以我对如何使用它感到困惑。有人可以帮我指出正确的方向吗？

```
Protected Sub grdProduct_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles grdProduct.RowDataBound

    ' Grey out expired products
    Dim row As GridViewRow
    row = e.Row

    Dim incomingDate As String
    Dim incomingStatus As String = ""

    incomingDate = row.Cells(3).Text.ToString()
    incomingStatus = row.Cells(5).Text.ToString()

    If (e.Row.RowType <> DataControlRowType.DataRow) Then
        Exit Sub
    End If

    Try
        Dim expDate As Date = incomingDate
        If (expDate < DateTime.Today Or incomingStatus.Equals("D")) Then

            'Create object for RowValues
            Dim RowValues As Object() = {"", "", "", "", "", ""}

            'Create counter to prevent out of bounds exception
            Dim i As Integer = row.Cells.Count

            'Fill row values appropriately
            For index As Integer = 0 To i - 1
                RowValues(index) = row.Cells(index).Text
            Next

            'create new data row
            dProdRow = dProdtable.Rows.Add(RowValues)
            dProdtable.AcceptChanges()

            grdProduct.DeleteRow(e.Row.RowIndex)
        End If
    Catch ex As Exception
    End Try
End Sub

Protected Sub grdProduct_Delete(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewDeleteEventArgs) Handles grdProduct.RowDeleting
    'Not sure what to do here
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:29:20.710

最好的方法是在数据源级别进行操作，而不是操作 UI 组件本身。

例如：

```
if(!IsPostback)
{
    DataTable one  = ...
    DataTable two = ...

    var removeRows = (from c in one.AsEnumerable()
                     where c.Field<DateTime>("incomingDate")< incomingDate || 
                           c.Field<string>("incomingStatus")=="D"
                     select c).ToList();

   for(var item in removeRows)
   {
       two.ImportRow(item);
   }
   //now delete from initial table
   foreach(var item in removeRows)
   {
       one.Rows.Remove(item);
   } 

   //Now bind both grids
   grid1.DataSource=one;
   grid1.DataBind();
   grid2.DataSource=two;
   grid2.DataBind();

} 
```

**更新 - VB.NET 中的示例玩具程序**希望您可以根据自己的情况调整它。

```
Sub Main
    Dim one As New DataTable()
    one.Columns.Add("one", GetType(Integer))
    For i As Integer = 0 To 9
        Dim r As DataRow = one.NewRow()
        r.ItemArray = New Object() {i}
        one.Rows.Add(r)
    Next

    Dim two As New DataTable()
    two.Columns.Add("one", GetType(Integer))
    For i As Integer = 0 To 9
        Dim r As DataRow = two.NewRow()
        r.ItemArray = New Object() {i}
        two.Rows.Add(r)
    Next
    Dim removeRows = (From c In one.AsEnumerable() Where c.Field(Of Integer)("one") = 5).ToList()

    For Each item As DataRow In removeRows
        two.ImportRow(item)
    Next

    For Each item As DataRow In removeRows
        one.Rows.Remove(item)
    Next

End Sub 
```

我刚刚意识到您正在使用 VB.NET。您应该能够将上述内容从 C# 转换为 VB.NET。无论如何，总体思路就在那里。

# objective-c - 将单元格添加到 UITableView

> ID：12319732
> 
> 赞同：0
> 
> 时间：2012-09-07T14:06:07.977
> 
> 标签：objective-c, ios

无法处理简单的问题 - 将单元格添加到`UITableView`.

我有单视图应用程序，从对象添加 - 表视图和简单`NSArray`（来自互联网抓取数据的反序列化 json）。

```
- (void) didLoadMusicList:(APIDownload *)request
{
    NSLog(@"Music list loaded");
    CJSONDeserializer *deserializer = [CJSONDeserializer new];

    NSDictionary *dict = [deserializer deserializeAsDictionary:request.downloadData error:nil];

    NSArray *response = [dict objectForKey:@"response"];
    NSArray *audios = [response subarrayWithRange:NSMakeRange(1, response.count-1)];      

    for(int i = 0; i < audios.count; i++)
    {
        NSDictionary *audio = [audios objectAtIndex:i];

        // add a cell?
    }
} 
```

那么，如何为每个元素添加单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:12:58.070

您需要在视图控制器上实现 UITableViewDatasource。您可以使用相同的数组向单元格提供数据，并使用 cellForRowAtIndexPath 数据源方法返回它们。您还需要提供 tableView 上的单元格计数。

检查此文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)

# python - Python不显示小数

> ID：12319733
> 
> 赞同：2
> 
> 时间：2012-09-07T14:06:22.243
> 
> 标签：python

Python 表现出一种我以前没有见过的奇怪行为，不确定我做了什么或发生了什么，但如果我输入简单，基本上它不会在带有小数的 shell 中运行

```
>>> 2/3
0
>>> 3/2
1 
```

如果我尝试通过 % 或 format() 对其进行格式化，它也没有多大作用，基本上它只是不识别任何小数

```
>>> a =2/3
>>> a
0
>>> format(a, '.5f')
'0.00000' 
```

我需要一个简单的除法来检查我的代码，突然间我遇到了像这样奇怪的事情

我使用 Python 2.7

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T14:09:41.307

在 Python 2 中，`/`默认执行“整数除法”。如果你把

```
from __future__ import division 
```

在脚本的顶部，它将执行您想要的除法，这将是 Python 3 中的默认行为。或者，如果您想与旧的 Python 版本保持兼容（不推荐用于新代码），请执行

```
2\. / 3. 
```

或者，使用变量

```
x / float(y) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T14:08:15.570

a = 2/3。

或者

a = 2./3

至少有一个数字需要是浮点数！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T14:07:53.890

您只对整数执行操作，这意味着数字的小数部分被删除。您需要类似的东西`2.0/3`，因此将使用浮点运算。

# c# - Excel VSTO 和 Ninject.Extensions.Factory 中的依赖注入

> ID：12319739
> 
> 赞同：9
> 
> 时间：2012-09-07T14:06:52.477
> 
> 标签：c#, dependency-injection, vsto, ninject

我正在尝试为 Excel VSTO 项目配置 DI。

为给定工作表生成的代码隐藏为我提供了一个名为 Startup 的事件，该事件负责为 Startup、Change、BeforeDoubleClick 等事件设置事件处理程序。

我认为通常避免代码隐藏文件中的代码是一个好习惯。
我所做的是创建负责操作工作表并调用外部代码（如 Web 服务、数据库和域逻辑）的外部类。

我可以成功创建一个工厂供代码隐藏文件使用并实例化工作表逻辑类。

例如：

```
//...inside Sheet1.cs

private IExpenseWorksheetFactory _factory;

void ExpensesBeforeRightClick(Excel.Range target, ref bool cancel)
{
    Application.EnableEvents = false;

    var popup = _factory.CreateContextMenu();
    popup.ShowContextMenu(target, ref cancel);

    Application.EnableEvents = true;
}
// ... rest of Sheet1.cs 
```

上面的代码位于 Visual Studio 生成的代码隐藏文件中，而且它是最小的。显示弹出窗口的责任委托给不同的对象。工厂对象负责与 Ninject 交谈并为我获取对象。这个代理是使用 Ninject.Extensions.Factory 项目自动生成的，因为我通过了这样的接口：

```
/// <summary>
/// Abstract Factory for creating Worksheet logic objects. Meant to be used with Ninject Factory extension.
/// </summary>
public interface IExpenseWorksheetFactory
{
    ExpenseWorksheet CreateWorksheet();
    ExpenseWorksheet.ContextMenus CreateContextMenu();
    ExpenseWorksheet.Events CreateEventHandlers();
} 
```

在应用程序启动中，我为工厂本身定义了绑定和绑定：

```
//instantiate the kernel in app's Composition Root
_kernel = new StandardKernel();

//worksheet related stuff - seems to be ok to be singleton
_kernel.Bind<ExpenseWorksheet>().ToSelf().InSingletonScope();
_kernel.Bind<ExpenseWorksheet.Events>().ToSelf().InSingletonScope();
_kernel.Bind<ExpenseWorksheet.ContextMenus>().ToSelf().InSingletonScope();

//"automagic" factories
_kernel.Bind<IExpenseWorksheetFactory>().ToFactory(); 
```

问题是：

如何在 VSTO 工作表的生成代码中注入这个工厂？我不喜欢`_kernel.Get<IExpenseWorksheetFactory>`在工作表的 Startup 方法中调用的想法。是否可以查找 Sheet1 的所有可用实例并强制注入工厂？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-01T07:34:32.880

简短的回答：没有。

您正在寻找像构造函数注入这样的东西，它无疑读起来更优雅。但事实上，这是不可能的，因为您无权访问 VSTO 插件中的 c'tor。

但无论如何，打电话有什么不好`_kernel.Get<IExpenseWorksheetFactory>`？毕竟，显式调用 DI 容器来解决依赖关系是其正常用例之一，而代码隐藏文件正是为此而制作的：连接事物。

你是对的，代码隐藏不应该包含任何业务逻辑，但另一方面，它肯定*应该*包含连接事物所需的所有代码。这就是它存在的主要原因。或者，换句话说：

> 我认为通常避免代码隐藏文件中的代码是一个好习惯。

并非在每种情况下都是正确的（但仅适用于绝大多数情况），您不应该在这里过度使用。如果你这样做了，你会发现自己在与系统作斗争——记住，系统**总是**会赢的 ;-)...

# java - 有限大小的哈希图

> ID：12319741
> 
> 赞同：10
> 
> 时间：2012-09-07T14:06:55.630
> 
> 标签：java

我想制作一个哈希映射来像缓存一样使用。缓存有一个初始大小，如果您尝试在缓存已满时插入一个项目，最近使用的项目应该被替换......有什么想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-07T14:09:52.610

[您可以通过实现removeEldest](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html#removeEldestEntry%28java.util.Map.Entry%29)来使用 LinkedHashMap

```
public static <K,V> Map<K,V> lruCache(final int maxSize) {
    return new LinkedHashMap<K,V>(maxSize*4/3, 0.75f, true) {
        @Override
        protected boolean removeEldestEntry(Map.Entry<K,V> eldest) {
            return size() > maxSize;
        }
    };
} 
```

更多细节

[http://vanillajava.blogspot.co.uk/2011/06/java-secret-lru-cache-in-java.html](http://vanillajava.blogspot.co.uk/2011/06/java-secret-lru-cache-in-java.html)

[http://blog.meschberger.ch/2008/10/linkedhashmaps-hidden-features.html](http://blog.meschberger.ch/2008/10/linkedhashmaps-hidden-features.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-07T14:08:29.107

你看过[番石榴](https://code.google.com/p/guava-libraries/)吗？它具有基于工厂的方法来创建带有[缓存](https://code.google.com/p/guava-libraries/wiki/CachesExplained)等的集合。

例如（来自链接的文章）

```
LoadingCache<Key, Graph> graphs = CacheBuilder.newBuilder()
   .maximumSize(1000)
   .expireAfterWrite(10, TimeUnit.MINUTES)
   .removalListener(MY_LISTENER)
   .build(
       new CacheLoader<Key, Graph>() {
         public Graph load(Key key) throws AnyException {
           return createExpensiveGraph(key);
         }
       }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T14:10:26.773

在 Android 上，您可以使用[http://developer.android.com/reference/android/util/LruCache.html](http://developer.android.com/reference/android/util/LruCache.html)。我很确定您可以从 AOSP 获取该实现并在 Apache 许可下使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T14:10:22.670

最简单的方法是扩展`LinkedHashMap`，覆盖该`removeEldestEntry(Map.Entry<K,V> eldest)`方法并在其实现中决定您的缓存是否“满”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T14:10:28.990

查看来自 Apache Commons的[LRUMap 。](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/LRUMap.html)

> 具有固定最大大小的 Map 实现，如果在满时添加条目，则删除最近最少使用的条目。
> 
> 最近最少使用的算法仅适用于 get 和 put 操作。任何类型的迭代，包括通过迭代设置值，都不会改变顺序。containsKey 和 containsValue 等查询或通过视图访问也不会更改顺序。
> 
> 该地图实现了 OrderedMap，并且可以使用双向 OrderedMapIterator 查询条目。返回的订单是最近最少使用到最近使用的。如果需要，地图视图中的迭代器也可以转换为 OrderedIterator。
> 
> 通过强制转换为 ResettableIterator 并调用 reset()，可以将所有可用的迭代器重置回起点。
> 
> 请注意，LRUMap 不是同步的，也不是线程安全的。如果您希望从多个线程同时使用此映射，则必须使用适当的同步。最简单的方法是使用 Collections.synchronizedMap(Map) 包装此地图。当被并发线程访问时，此类可能会抛出 NullPointerException。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-07T14:10:36.487

您可以将绑定队列与您的哈希映射一起保留。这样，您将很容易知道哪个项目是最旧的。

# java - 在 oracle 11g 中缓慢插入表中的记录

> ID：12319745
> 
> 赞同：0
> 
> 时间：2012-09-07T14:07:11.137
> 
> 标签：java, jdbc, oracle11g, weblogic-10.x

我们有来自第三方的非常旧的 Java 应用程序，它在表中插入一些记录并启用自动提交（我知道它的技术不好，但我无法控制源代码）。

它在 Oracle 10G 上运行良好，插入延迟可接受。

现在，当我们迁移到 Oracle 11G 时，我们观察到插入 28K 记录需要 15 分钟。

请提出任何技术来提高自动提交的性能？

我还想知道 11G 有哪些类型的变化，因为它在这方面比 10g 慢？

我与我的 DBA 讨论过，他们正在探索一些关于 LGWR 的选项。

# network-programming - socket和http之间有什么关系，如果有，它们是什么？

> ID：12319750
> 
> 赞同：0
> 
> 时间：2012-09-07T14:07:32.860
> 
> 标签：network-programming, network-protocols

socket和http之间有什么关系，如果有，它们是什么？

我知道http是应用层中的一种通信协议，而socket是用来建立应用层和传输层之间的连接的。但是，我很困惑它们之间的关系，比如，谁为谁服务，或者也许谁打包谁，socket在哪一层工作。</p>

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:25:21.040

套接字是 TCP 连接（或其他东西）的端点，而 HTTP 在 TCP 之上分层。

# bash - 用不同的结构替换结构并保留一些值

> ID：12319752
> 
> 赞同：0
> 
> 时间：2012-09-07T14:07:41.253
> 
> 标签：bash

我想在 bash 中将输入传输到输出。我尝试使用 sed 但它没有用 - 我可能错了。到目前为止，我有这个（只是尝试是否可以提取 id）但它不起作用：

```
sed 's;id="([a-zA-Z:]+)";\\1;p' input 
```

输入

```
<mediaobject>
    <imageobject id="fig:deployment">
        <caption>Application deployment</caption>
        <imagedata fileref="images/deployment.png" width="90%" />
    </imageobject>
</mediaobject> 
```

输出

```
<img src="images/deployment.png" width="90%" id="fig:deployment" title="Application deployment" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:11:48.873

awk 几乎在任何安装了 bash 的地方都可用，并且可以避免您在使用 sed 时可能遇到的一些陷阱（例如，如果 xml 中的属性的顺序不一致）。

```
awk '
    ## set a variable to mark that we are in a mediaobject block
    $1=="<mediaobject>" { object=1 }

    ## mark that we have exited the object block
    $1=="</mediaobject>" { object=0 }

    ## if we are in an mediaobject block and we find an imageblock
    $1=="<imageobject" && object==1 { 
        iobject=1                          ## record that we are in an imageblock
        id = substr($2, 5, length($2) - 6) ## this is unnecessary for output
    }

    ## if we have a line with image data
    $1~/<imagedata/ && iobject==1 {
        fileref=substr($2,9,length($2)-8)  ## the path, including the quotations
        width=$3                           ## the width
    }

    ## if we have a caption line
    $1~/<caption>/ && iobject==1 {
        gsub("(</?caption>|^ *| *$)", "")  ## remove xml and leading/trailing whitespace
        caption=$0                         ## record the modified line as the caption
    }

    ## when we arrive at the end of an imageblock
    $1=="</imageobject>" && object==1 {
        iobject=0                                                            ## record it
        printf("<img src=%s %s title=\"%s\" />\n", fileref, width, caption)  ## print record
    }

' input 
```

尽管正如我所提到的，无论属性如何排序，此代码都应该同样有效，但如果行上的属性更改顺序（可能性较小），它将失败。如果您遇到该问题，您可以执行以下操作：

```
## use match to find the beginning of the attribute
## use a nested substr() to pull only the value of fileref (with quotations)
fileref = substr(substr($0, match($0,/fileref=[a-z\/"]+/),RLENGTH),9)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:18:32.653

使用[xsh](http://p3rl.org/XML%3a%3aXSH2)：

```
open 1.xml ;
rename img mediaobject ;
mv img/imageobject/@id into img ;
set img/@title img/imageobject/caption ;
set img/@src img/imageobject/imagedata/@fileref ;
mv img/imageobject/imagedata/@width into img ;
rm (img/* | img/text()) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:32:30.140

使用 sed：

```
 sed -n '\!<mediaobject>!{
  n;
  s/ *[^ ]* \(id="[^"]*"\).*/\1/; 
  h; n;
  s/ *[^>]*>\([^<]*\).*/title="\1"/;
  H; n;
  s/ *<[^ ]* *fileref=\("[^"]*"\) *\(width="[^"]*"\).*/src=\1 \2/;
  H; n;
  x;
  s/\n/ /g;
  s/^/<img /;
  s/$/ \/>/;
  p
 }' input 
```

# python - python - 同一个“for”循环中的不同变量？

> ID：12319755
> 
> 赞同：0
> 
> 时间：2012-09-07T14:07:50.260
> 
> 标签：python, for-loop

我有一些数据（ID = 名称），我想将给定人员 ID 的名称放在 QTableWidget 中，但我遇到了 for 循环问题......

这是我的代码：

```
for x in people:
  for y in range(len(people)):
   view.setItem(y, 0, QtGui.QTableWidgetItem(name[x][:-1][1:])) 
```

其中`y`in`view.setItem(y, 0, QtGui.QTableWidgetItem(name[x][:-1][1:]))`是表上的行索引，我想用给定 ID 的名称制作一个表。

这是给出 3 个 ID 的结果：

```
|  Jhon   |
|  Jhon   |
|  Jhon   | 
```

这就是我希望它显示的内容：

```
|  Sally  |
|  kate   |
|  Jhon   | 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:12:28.407

我想你想要[`enumerate`](http://docs.python.org/library/functions.html#enumerate)这里。

```
for idx,x in enumerate(people):
    view.setItem(idx, 0, QtGui.QTableWidgetItem(name[x][:-1][1:])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:12:44.963

您正在遍历所有人并为所有行设置它们。您最后遇到的人自然会被设置为所有行，因为没有任何内容会覆盖它。

# java - Gradle Copy Task：如何覆盖现有文件？

> ID：12319756
> 
> 赞同：20
> 
> 时间：2012-09-07T14:07:51.177
> 
> 标签：java, copy, gradle, overwrite

[Copy](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.Copy.html) api 没有提到可以设置的标志/属性。那么默认操作是什么，如何修改呢？

* * *

据此，[_](http://issues.gradle.org/browse/GRADLE-1264)

> 从 Gradle 0.9.1 开始，复制任务总是覆盖文件。尚不支持其他策略。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T17:32:18.680

正如问题文本所说，该`Copy`任务会覆盖文件，并且当前不支持其他策略。如果这不适合您的情况，您可以随时退回到 Ant 任务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-25T11:40:37.693

查看 DuplicatesStrategy [http://www.gradle.org/docs/1.7-rc-1/release-notes#duplicate-file-handling-for-copy-and-archive-operations](http://www.gradle.org/docs/1.7-rc-1/release-notes#duplicate-file-handling-for-copy-and-archive-operations)和[http://www.gradle.org /docs/current/javadoc/org/gradle/api/file/DuplicatesStrategy.html](http://www.gradle.org/docs/current/javadoc/org/gradle/api/file/DuplicatesStrategy.html)。两者都应该适用于非覆盖复制（而覆盖复制是默认设置）。

```
duplicatesStrategy 'exclude' 
```

另请查看[Gradle Zip DuplicatesStrategy 无法正常工作](https://stackoverflow.com/questions/26036879/gradle-zip-duplicatestrategy-not-working-correctly)，以了解嵌套“from”可能存在的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-03T07:32:08.213

当我使用任务复制时，我遇到了同样的问题，gradle 总是执行最新的检查，这会导致复制被跳过。

在阅读了 gradle 用户手册的更多内容后，我发现我们可以使用 project.copy() 方法而不是任务**Copy**。此方法跳过最新检查，因此文件将始终被复制到目标。

```
task myCopy << {
    copy {
        from (yourSourceDir)
        into (yourDestDir)
    }
} 
```

# java - 如何使用 Java 代码中的 JasperReports 生成报告（包含许多子报告和多个波段）

> ID：12319757
> 
> 赞同：1
> 
> 时间：2012-09-07T14:07:51.323
> 
> 标签：java, jasper-reports, ireport

如果我必须在版本之间进行选择，哪个版本最稳定？

我尝试了许多版本的报告。从*iReport*（任何版本）一切正常，但是当我尝试从我的 java 类编译它时（主报告编译成功，但子报告未编译导致*JasperCompileManager*找不到“subreport.jasper”）

```
JasperDesign jasperDesign = JRXmlLoader.load("C://report/reportPI.jrxml");
JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign); 
```

所以我用*iReport 2.0.7*编译它们并使用它们 Compiled >> 与我的 java 类一起工作的唯一版本是从*iReport 2.0.7*编译的版本（问题：不可能为另一个子报表添加新波段）。

*其他人用更高版本的iReport*编译文件，例如*4.5.1*或*4.7.0*

在这条线上崩溃

```
 JasperReport jasperReport =(JasperReport) JRLoader.loadObject("C:\\report/reportPI.jasper"); 
```

返回

```
cannot assign instance of net.sf.jasperreports.engine.base.JRBaseTextField to field 
net.sf.jasperreports.engine.base.JRBaseParagraph.paragraphContainer of type
net.sf.jasperreports.engine.JRParagraphContainer in instance of 
net.sf.jasperreports.engine.base.JRBaseParagraph 
```

在论坛上，他们说这是 jar 问题，其他人说这是设计错误。但就我而言，这是另一回事，因为我用罐子尝试了一切。

实际上我找到了一个解决方案（通过测试），但它有点复杂。*我使用iReport 2.0.7*编译子报表和我用*iReport 4.5.1*设计的主报表（包含许多波段和许多子报表），我通过第一个代码编译主报表。

它可以工作**，但是**当我想在 OneSubreport 下做很多子报表时。我回到同样的问题。

好吧，我认为问题很详细，但这是必要的

如果有人有一个所有情况都适用的稳定版本，请帮助

经过更多测试..

我试图通过使用在文件中编译 subreport.jrxml

```
JasperDesign jasperDesign1 = JRXmlLoader.load("C://report/report74.jrxml");
JasperCompileManager.compileReportToFile(jasperDesign1, "C://report"); 
```

但反应`Access denied to save`。

# javascript - 单击表单中的按钮会导致页面刷新

> ID：12319758
> 
> 赞同：222
> 
> 时间：2012-09-07T14:07:52.433
> 
> 标签：javascript, angularjs

我在 Angular 中有一个表单，其中有两个按钮标签。一键提交表单`ng-click`。另一个按钮纯粹用于使用 导航`ng-click`。但是，当单击第二个按钮时，AngularJS 会导致页面刷新，从而触发 404。我在函数中放置了一个断点，它正在触发我的函数。如果我执行以下任何操作，它将停止：

1.  如果我删除`ng-click`，该按钮不会导致页面刷新。
2.  如果我注释掉函数中的代码，它不会导致页面刷新。
3.  如果我将按钮标签更改为带有 的锚标签 ( `<a>`) `href=""`，则不会导致刷新。

后者似乎是最简单的解决方法，但为什么 AngularJS 甚至在我的函数之后运行任何导致页面重新加载的代码？似乎是一个错误。

这是表格：

```
<form class="form-horizontal" name="myProfile" ng-switch-when="profile">
  <fieldset>
    <div class="control-group">
      <label class="control-label" for="passwordButton">Password</label>
      <div class="controls">
        <button id="passwordButton" class="secondaryButton" ng-click="showChangePassword()">Change</button>
      </div>
    </div>

    <div class="buttonBar">
      <button id="saveProfileButton" class="primaryButton" ng-click="saveUser()">Save</button>
    </div>
  </fieldset>
</form> 
```

这是控制器方法：

```
$scope.showChangePassword = function() {
  $scope.selectedLink = "changePassword";
}; 
```

* * *

## 回答 #1

> 赞同：490
> 
> 时间：2013-03-09T18:12:05.483

如果您查看[W3C 规范](https://www.w3.org/wiki/HTML/Elements/button)，似乎显而易见的尝试是`type='button'`在您不希望它们提交时标记您的按钮元素。

特别要注意的是它说的地方

> 未指定类型属性的按钮元素与类型属性设置为“提交”的按钮元素表示相同的事物

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-09-10T16:02:51.000

您可以尝试阻止默认处理程序：

html:

```
<button ng-click="saveUser($event)"> 
```

js：

```
$scope.saveUser = function (event) {
  event.preventDefault();
  // your code
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-09-07T20:08:14.527

`ng-submit={expression}`您应该在`<form>`标签中声明该属性。

来自 ngSubmit 文档 [http://docs.angularjs.org/api/ng.directive:ngSubmit](http://docs.angularjs.org/api/ng.directive:ngSubmit)

> 启用绑定角度表达式以提交事件。
> 
> **此外，它会阻止默认操作（对于表单而言，这意味着将请求发送到服务器并重新加载当前页面）。**

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-02-05T12:50:23.760

我使用指令来防止默认行为：

```
module.directive('preventDefault', function() {
    return function(scope, element, attrs) {
        angular.element(element).bind('click', function(event) {
            event.preventDefault();
            event.stopPropagation();
        });
    }
}); 
```

然后，在 html 中：

```
<button class="secondaryButton" prevent-default>Secondary action</button> 
```

该指令也可以与`<a>`所有其他标签一起使用

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-02-07T06:25:49.893

可以保留`<button type="submit">`，但必须去掉 的属性`action=""`。`<form>`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-23T00:03:53.167

我想知道为什么没有人提出可能最简单的解决方案：

> 不要使用`<form>`

恕我直言， A`<whatever ng-form>`做得更好，并且没有 HTML 表单，浏览器本身无需提交任何内容。使用角度时，这完全是正确的行为。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-09T12:04:12.977

这个答案可能与问题没有直接关系。这仅适用于您使用脚本提交表单的情况。

根据[ng-submit 代码](https://github.com/angular/angular.js/blob/b168aef86122caa9fdba608729cc5704ae5d0a52/src/ng/directive/form.js#L529)

```
 var handleFormSubmission = function(event) {
  scope.$apply(function() {
    controller.$commitViewValue();
    controller.$setSubmitted();
  });

  event.preventDefault();
};

formElement[0].addEventListener('submit', handleFormSubmission);
```

它在表单上添加了提交事件侦听器。但是通过调用 form.submit() 发起提交时，不会调用提交事件处理程序。在这种情况下，ng-submit 不会阻止默认操作，您必须自己在 ng-submit 处理程序中调用 preventDefault；

> 为了提供一个合理确定的答案，HTML 表单提交算法第 5 项指出，如果表单没有通过调用 submit 方法提交，它只会调度提交事件（这意味着如果通过按钮或其他隐式提交，它只会调度提交事件方法，例如在焦点位于输入类型文本元素上时按 Enter）。

请参阅[使用 submit() 从链接提交的表单不能被 onsubmit 处理程序捕获](https://stackoverflow.com/questions/12819357/form-submitted-using-submit-from-a-link-cannot-be-caught-by-onsubmit-handler)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-24T19:15:04.770

向您的表单添加操作。

`<form action="#">`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-02T09:13:24.257

第一个按钮提交表单，第二个不提交

```
<body>
<form  ng-app="myApp" ng-controller="myCtrl" ng-submit="Sub()">
<div>
S:<input type="text" ng-model="v"><br>
<br>
<button>Submit</button>
//Dont Submit
<button type='button' ng-click="Dont()">Dont Submit</button>
</div>
</form>

<script>
var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope) {
$scope.Sub=function()
{
alert('Inside Submit');
}

$scope.Dont=function()
{
$scope.v=0;
}
});
</script>

</body> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-13T15:09:28.440

我也遇到了同样的问题，但很高兴我通过将类型更改为 from `type="submit"`to 来解决这个问题，`type="button"`并且它起作用了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-12T08:34:47.143

只需`FormsModule`在文件`imports`数组中添加，然后在该文件的顶部添加...这将起作用。`app.module.ts``import { FormsModule } from '@angular/forms';`

# ruby-on-rails - Rspec 应该 match 是 false 但 eq 应该是 true 吗？

> ID：12319759
> 
> 赞同：1
> 
> 时间：2012-09-07T14:07:53.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

谁能向我解释为什么会这样？

```
get :robots
response.should render_template("no_index")
response.body.should match "User-agent: *\nDisallow: /\n"

Failure/Error: response.body.should match "User-agent: *\nDisallow: /\n"
  expected "User-agent: *\nDisallow: /\n" to match "User-agent: *\nDisallow: /\n"
# ./spec/controllers/robots_controller_spec.rb:12:in `block (3 levels) in <top (required)>' 
```

但

```
get :robots
response.should render_template("no_index")
response.body.should eq "User-agent: *\nDisallow: /\n" 
```

通过？

这似乎相关（irb）：

```
1.9.2p318 :001 > "User-agent: *\nDisallow: /\n".match "User-agent: *\nDisallow: /\n"
=> nil 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:22:07.167

对我来说，这似乎是非常*出乎意料的行为，但我已经解决了这个问题。String#match 的 Ruby 文档说

> 将模式转换为正则表达式（如果还不是）

但是这种“转换”似乎只是意味着将“foo”更改为/foo/，而不进行任何转义或任何操作。所以，例如，

```
1.9.2p318 :014 > "User-agent: *\nDisallow: /\n".match /User-agent: \*\nDisallow: \/\n/
=> #<MatchData "User-agent: *\nDisallow: /\n"> 
```

如果您使用单引号但添加特殊正则表达式字符的转义，则字符串匹配也有效：

```
1.9.2p318 :015 > "User-agent: *\nDisallow: /\n".match 'User-agent: \*\nDisallow: \/\n'
 => #<MatchData "User-agent: *\nDisallow: /\n"> 
```

但是，如果你使用双引号，它仍然不起作用，因为换行符：

```
1.9.2p318 :013 > "User-agent: *\nDisallow: /\n".match "User-agent: \*\nDisallow: \/\n"
=> nil 
```

！！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:13:53.513

您的字符串正在与自身匹配（作为正则表达式），由于斜杠和星号等特殊字符，这很可能会失败。

eq 确实是在您的情况下使用的正确匹配器。

[http://rspec.rubyforge.org/rspec/1.1.9/classes/Spec/Matchers.html#M000437](http://rspec.rubyforge.org/rspec/1.1.9/classes/Spec/Matchers.html#M000437)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:16:49.890

只是一个猜测，但匹配使用正则表达式，其中`*`部分表示“任意数量的空格”，而不是“空格和 *”。转义该（或其他）字符。

```
response.body.should eq 'User-agent: \*\nDisallow: /\n' 
```

# parallel-processing - 我可以指定哪个主机在 MPI 程序中具有哪个等级吗？

> ID：12319760
> 
> 赞同：2
> 
> 时间：2012-09-07T14:07:53.250
> 
> 标签：parallel-processing, mpi

我正在使用 MPI 在异构计算系统上执行并行作业。我网络中的节点并不完全相同。

我想指定机器“A.univ.edu”的排名为 0，机器“B.univ.edu”的排名为 1。

有什么方法可以指定如何在 MPI 中将等级分配给主机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:54:49.740

看起来至少 OpenMPI 允许您指定排名文件

上面的例子如下

```
rankfile.txt:
rank 0=A.univ.edu slot=0
rank 1=B.univ.edu slot=0

mpiexec -np 2 -H A.univ.edu,B.univ.edu -rf rankfile.txt executable.exe 
```

[http://mirror.its.dal.ca/openmpi/doc/v1.5/man1/mpiexec.1.php#sect9](http://mirror.its.dal.ca/openmpi/doc/v1.5/man1/mpiexec.1.php#sect9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T12:57:54.913

如果所有其他方法都失败了，您始终可以使用`MPI_Comm_split`创建一个新的通信器，其中您的进程都具有所需的等级。在每个进程确定其预期等级（例如存储在 中`newRank`）之后，调用`MPI_Comm_split(MPI_COMM_WORLD, 0, newRank, newComm)`将创建一个`newComm`具有正确顺序的通信器。然后，您可以使用该通信器，而不是`MPI_COMM_WORLD`在所有通信呼叫中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-08T23:27:30.087

您可以使用“-rank-by node”开关。这将导致进程按照指定主机的顺序进行映射。

# javascript - 访问加载到 div 中的页面的查询字符串

> ID：12319775
> 
> 赞同：0
> 
> 时间：2012-09-07T14:08:59.543
> 
> 标签：javascript, jquery, html

我正在寻找一种通过 jquery 或 javascript 访问已加载到 div 中的页面的查询字符串的方法。

原因是我需要根据参数是否已加载到页面中来修改页面调用函数的方式。

我已经在加载到 div 的页面中尝试过这个

```
var fileIDPresent = false;
var url = this.window.location.href;
alert(url);
if (url.indexOf('?' + 'FileID' + '=') != -1)
   fileIDPresent = true;
else if (url.indexOf('&' + 'FileID' + '=') != -1)
   fileIDPresent = true; 
```

页面通过以下代码加载到 div 中：

```
 $('#loadedContentHolder').load('/ViewDetails.aspx?FileID=' + File, function () {
                // load finished...
                $('#loadedContentHolder').slideDown('slow');
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:12:46.107

将代码注入 DIV 时，URL 会丢失。您需要以某种方式将 URL 保存到 div 节点。

你可以这样做：

```
var url = '/ViewDetails.aspx?FileID=' + File;
$('#loadedContentHolder').load(url, function () {
  // load finished...
  $('#loadedContentHolder').data('url', url).slideDown('slow');
}); 
```

下次您想知道使用了什么 URL 时，您可以像这样获取 url：

```
var url = $('#loadedContentHolder').data('url'); 
```

这将返回使用的 URL，您可以使用该 URL 来提取参数：

```
var params = getUrlParams(url);

function getUrlParams(url) {
  var vars = [], hash
      ,hashes = url.indexOf('?') + 1).split('&');

  for (var i = 0; i < hashes.length; i++) {
    hash = hashes[i].split('=');
    if (hash.length === 2) {
        vars.push(hash[0]);
        vars[hash[0]] = unescape(hash[1]);
    }
  }
  return vars;
} 
```

# c# - 无法使用 SSL 访问 WCF 服务

> ID：12319776
> 
> 赞同：2
> 
> 时间：2012-09-07T14:08:59.380
> 
> 标签：c#, wcf

我创建了一个 WCF 服务及其使用 SSL。我可以编译并启动服务。但是，我无法在网络浏览器中点击它。它只说“与 192.168.1.12 的连接已中断。” 我确保我的浏览器已启用它，并且它可以在使用 SSL 的其他网站上运行。我是 WCF 服务的新手，因此任何有关故障排除的建议或技巧都会有所帮助。

我没有使用 IIS**

以下是我的网络配置信息：

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="WSHttpBinding_IApplicationService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="6553600" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="Transport">
            <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
            <message clientCredentialType="Certificate" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <services>
      <service name="Application.ServiceModel.ApplicationService" behaviorConfiguration="ApplicationServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="https://192.168.1.12:8000/ApplicationServiceModel/service" />
          </baseAddresses>
        </host>
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="WSHttpBinding_IApplicationService" contract="Application.ServiceModel.IApplicationService" />
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ApplicationServiceBehavior">
          <serviceMetadata httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:10:48.497

自签名证书通常被认为是无效的，并且仅真正用于测试。

在 wcf 中，您可以使用以下内容忽略证书错误（在客户端上）。

```
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; }; 
```

但是，它应该只用于测试。在生产环境中，您希望获得由受信任的证书颁发机构签署的证书。

# android - Android Soundpool VS 振动器

> ID：12319778
> 
> 赞同：0
> 
> 时间：2012-09-07T14:09:07.400
> 
> 标签：android, soundpool, vibration

我必须让智能手机振动并同时播放声音。

我试过这样的事情：

```
soundPool.play(sID, 1.0f, 1.0f, 1, 0,1.0f);
vibrator.vibrate(90); 
```

问题是电话会立即振动，但声音池会稍有延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:13:45.713

你可以使用[`vibrator.vibrate(long[] pattern, int repeat)`](http://developer.android.com/reference/android/os/Vibrator.html#vibrate%28long%5B%5D,%20int%29)方法。模式数组中的第一个值表示打开振动器之前要等待的毫秒数。

# css - 从导航栏品牌打开下拉菜单

> ID：12319784
> 
> 赞同：4
> 
> 时间：2012-09-07T14:09:41.913
> 
> 标签：css, twitter-bootstrap

每次单击导航栏的品牌时，我都想打开一个下拉菜单（使用 Twitter Bootstrap），所以我尝试了以下代码：

```
<div class="navbar navbar-fixed-top">
<div class="navbar-inner">
<div class="tabbable">
    <div class="dropdown">
    <a id="drop1" class="dropdown-toggle" data-toggle="dropdown" href="#menu">
        <div class="brand">Brand</div>
    </a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
        <li><a href="#">Action</a></li>
    </ul>
    </div>
<ul class="nav">
    <li>
        <a href="#" data-toggle="tab">Item</a>
    </li>
</ul>
</div>
</div>
</div> 
```

**结果**：当我点击它时，会出现菜单，但它*在*品牌上方，而不是*在*. 如何解决？

## 例子

*   标准版【OK】：http: [//jsfiddle.net/4rdPU/2/](http://jsfiddle.net/4rdPU/2/)
*   标准版+ `div class="brand"`【样式问题】：http: [//jsfiddle.net/4rdPU/1/](http://jsfiddle.net/4rdPU/1/)
*   品牌版【菜单位置错误】：http: [//jsfiddle.net/4rdPU/3/](http://jsfiddle.net/4rdPU/3/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T14:20:30.867

要正确呈现下拉菜单，您的品牌必须是一个`.nav li`元素。所以只需将`.brand`类添加到标准下拉列表中。

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="tabbable">
            <ul class="nav">
                <li class="dropdown">
                    <a id="drop1" class="dropdown-toggle brand" data-toggle="dropdown" href="#menu">
                        Brand
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="drop1">
                        <li><a href="#">Action</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#" data-toggle="tab">Item</a>
                </li>
            </ul>
        </div>
    </div>
</div> 
```

这会破坏你的品牌定位，但你可以用这个简单的 CSS 修复它：

```
.navbar .brand {
    margin-left: 10px; /* This value could be different for another layout */
} 
```

# python - 在 Google App Engine (GAE) Datastore 中将键名和父级复制为属性？

> ID：12319786
> 
> 赞同：2
> 
> 时间：2012-09-07T14:09:45.617
> 
> 标签：python, google-app-engine, google-cloud-datastore

在阅读了 GAE Datastore API 之后，我仍然不确定是否需要将键名和父级复制为实体的属性。

假设有两种实体：Employee 和 Division。每个员工都有一个部门作为**其父**级，并由一个帐户名称标识。我使用帐户名作为员工的**键名**。但是在为 Employee 建模时，我仍然会将这两个保留为属性：

```
division = db.ReferenceProperty(Division)
account_name = db.StringProperty() 
```

显然，我必须手动`division`与其父级保持一致，并`account_name`与其键名保持一致。我做这项额外工作的原因是：

1.  恐怕 GQL/Datastore API 可能不支持父级和键名以及普通属性。我可以对属性做些什么，而不是父名或键名（或者它们本质上是引用属性）？如何在 GQL 查询中使用键名？
2.  键名和父级的含义不是特别清楚。由于名称不是自我描述的，我必须通知其他贡献者我们使用帐户名称作为键名......

但这确实是不必要的工作，浪费时间和存储空间。我无法摆脱 SQL 的想法——为什么谷歌不让我们定义一个属性作为关键？另一个是父母？然后我们可以命名它们并用作普通属性......

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:33:36.690

请记住，在 GAE 数据存储中，一旦创建实体，您将永远无法更改实体的 parent 或 key_name。这些值在实体的生命周期内是永久的。

如果 Employee 的 account_name 有很小的可能发生变化，那么您就不能将其用作 key_name。如果它永远不会改变，那么它可能是一个非常好的 key_name，并且允许您使用 Employee.get_by_key_name() 而不是昂贵的查询为员工进行廉价获取。

Parent 并不等同于外键。外键更好的等价物是引用属性。

使用 parent 的主要原因是父实体和子实体位于同一个实体组中，这允许您在单个事务中对它们进行操作。如果您只需要从 Employee 中引用部门，则只需使用引用属性。我建议熟悉实体组的工作方式，因为这对 GAE 数据建模非常重要：

*   [https://developers.google.com/appengine/docs/python/datastore/entities#Transactions_and_Entity_Groups](https://developers.google.com/appengine/docs/python/datastore/entities#Transactions_and_Entity_Groups)

使用 parent 也可能导致写入性能问题，因为写入单个实体组的速度有限制（大约每秒一次写入）。在决定是使用父属性还是引用属性时，您需要考虑在同一事务中需要修改哪些实体。在许多情况下，您可以改用跨组 (XG) 事务。这完全取决于您想要做出哪些权衡。

所以我的建议是：

*   如果您的员工 account_name 绝对不会更改，则将其用作 key_name。否则，只需将其设为基本属性。
*   如果您需要在同一事务中修改 Employee 和 Division（并且您不能让它与 XG 事务一起使用）并且您永远不会更改 Employee 的 Division，那么将 Division 设置为 Employee 的父级。否则，只需使用参考属性对这种关系进行建模。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T16:29:43.780

当您创建一个以 Divison 为父对象的新 Employee 对象时，它将如下所示：

```
div = Division()
... #Complete the division properties
div.put()
emp = Employee(key_name=<account_name>, parent=div)
... #Complete the employee properties
emp.put() 
```

然后，当您想获得对 Employee 所属部门的引用时：

```
div = emp.parent()
#Get the Employee account_name (which is the employees's key name):
account_name = emp.key().name() 
```

您不必将 RefrenceProperty 存储到员工所属的部门，因为它已经在父级中完成。此外，您可以根据需要从 Employee 实体的密钥中获取 account_name。

要查询密钥：

```
emp = Employee.get_by_key_name(<account_name>, parent=<division>)
#OR 
div = Division.get_by_key_name(<keyname>)

#Get all employees in a division
emps = Employee.all().ancestor(div) 
```

# android - 全屏显示 HTML5 视频

> ID：12319790
> 
> 赞同：6
> 
> 时间：2012-09-07T14:10:03.403
> 
> 标签：android, webview, android-webview

我有一个里面有 html 视频的 webview。我想全屏显示这个视频，所以我覆盖`onShowCustomView`了我`WebChromeClient`的使用`VideoView`. 这在 2.3 中效果很好，但是在 4.x`onShowCustomView`中永远不会被调用。视频仍然会播放，但是，它是从 web 视图中播放的，除了单击播放和停止之外没有任何控件。

另外，我有 hardwareAccelerated="true"。

知道为什么`onShowCustomView`从未被调用吗？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    webView = (WebView) findViewById(R.id.webView);

    webView.getSettings().setSupportZoom(true);
    webView.getSettings().setLoadWithOverviewMode(true);
    webView.getSettings().setUseWideViewPort(true);
    webView.getSettings().setBuiltInZoomControls(true);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setDomStorageEnabled(true);
    webView.getSettings().setPluginState(WebSettings.PluginState.ON);
    webView.setWebViewClient(new WebViewClient());
    webView.setWebChromeClient(new MyChromeClient());

    webView.loadUrl(URL);

}

private class MyChromeClient extends WebChromeClient implements
        OnCompletionListener, OnErrorListener, OnPreparedListener {

    @Override
    public void onShowCustomView(View view, CustomViewCallback callback) {
        Log.d("ma", "onShowCustomView");
    }

... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T03:20:25.230

好吧，在挣扎了一段时间后，我终于找到了原因。在 Android 4.x 中，您必须使用 'video' 标签中的 html 'controls' 属性来显示控件。显示这些控件后，您可以单击将调用“onShowCustomView”的全屏按钮。由于嵌入式视频在 4.x 中可用，并且您可以选择使用控件进入全屏模式，因此在播放时不会自动调用 onShowCustomView。不幸的是，这在 Android 文档中的记录很差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T09:58:19.453

这对我有用。

在使用 vimeo 视频制作网络应用程序时，我发现了一个“怪癖解决方案”。我测试了两个设备。一个是Android 4.2.x 版本，另一个是4.4.x 版本。一个能够以全屏模式播放视频，另一个不能。

在阅读了官方文档' [Migrating to WebView in Android 4.4](http://developer.android.com/guide/webapps/migrating.html) '后，我发现两个设备中存在不同的'UserAgent'名称。

一个有这个userAgent。

```
Mozilla/5.0 (Linux; Android 4.4.2; SHV-E300L Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36 
```

另一个有这个。

```
Mozilla/5.0 (Linux; Android 4.4.4; SHV-E370K Build/KTU84P) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/33.0.0.0 Mobile Safari/537.36 
```

我认为 chrome 版本是制作全屏视频的解决方案。所以我把chrome版本改成了30.x。

```
WebSettings s = mWebView.getSettings();
//Change UserAgent to play fullscreen vimeo's videos.
String agent = s.getUserAgentString();
String p = "(Chrome/[0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+)";
Pattern pattern = Pattern.compile(p);
Matcher matcher = pattern.matcher(agent);
if(matcher.find()) {
    agent = matcher.replaceFirst("Chrome/30.0.0.0");
}
s.setUserAgentString(agent); 
```

哦~~我可以睡觉了...（对不起我的英语不好）

# jquery - 选项卡内的 jQuery 自动完成功能 - 搜索后点击离开会创建孤立结果窗口

> ID：12319793
> 
> 赞同：1
> 
> 时间：2012-09-07T14:10:04.950
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, jquery-tabs

我在一些选项卡中有一个自动完成文本框。

见这里的例子：http: [//jsfiddle.net/fTQ26/3/](http://jsfiddle.net/fTQ26/3/)

尝试以下步骤：

1.  在文本框中输入“A”
2.  之后立即单击其他选项卡之一
3.  等待几秒钟

您应该看到最终得到一个孤立的自动完成结果框。

**确保不会发生这种情况的最佳方法是什么？**

（如果可能的话，我会很感激一个优雅的解决方案，因为发生这种情况的实际页面非常复杂！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:31:17.683

约翰·科尔纳是正确的。但是您还需要在单击另一个选项卡后关闭自动完成功能。

```
 $( "#tabs" ).tabs({
     select: function(event, ui) {
         $( "#tags" ).autocomplete('close');
     }
 }); 
```

否则，如果您在第一个选项卡中等待自动完成功能打开，然后转到另一个选项卡，自动完成功能仍位于内容之上。

更新小提琴：http: [//jsfiddle.net/fTQ26/16/](http://jsfiddle.net/fTQ26/16/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:09:38.533

您可以绑定到 open 事件，如果元素不可见，则关闭自动完成：

```
open: function (event, ui)
{
    if (!$(this).is(":visible"))
        $(this).autocomplete("close");                
} 
```

更新小提琴：http: [//jsfiddle.net/fTQ26/15/](http://jsfiddle.net/fTQ26/15/)

# python - 在 matplotlib 中动态添加/创建子图

> ID：12319796
> 
> 赞同：41
> 
> 时间：2012-09-07T14:10:16.537
> 
> 标签：python, matplotlib

我想创建一个由多个共享 x/y 轴的子图组成的图。从文档中它应该看起来像这样（尽管我的子图将是散点图）：（[代码here）](http://matplotlib.sourceforge.net/mpl_examples/pylab_examples/subplots_demo.py)

![3 个共享 x 和 y 轴的子图](../Images/96bcea945f52a78de1d10108e45d5d77.png)

**但我想动态创建子图！**

所以子图的数量取决于前一个函数的输出。（每个图表可能会有大约 3 到 15 个子图，每个子图都来自不同的数据集，具体取决于我的脚本的输入。）

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2016-12-29T18:24:11.003

假设您知道要使用的**总子图**和**总列：**

```
import matplotlib.pyplot as plt

# Subplots are organized in a Rows x Cols Grid
# Tot and Cols are known

Tot = number_of_subplots
Cols = number_of_columns

# Compute Rows required

Rows = Tot // Cols 
Rows += Tot % Cols

# Create a Position index

Position = range(1,Tot + 1) 
```

**Rows**的第一个实例仅考虑完全由子图填充的行，然后如果 1 或 2 或 ... Cols - 1 个子图仍需要位置，则再添加一个 Row。

然后创建图形并使用**for 循环****添加子**图。

 **```
# Create main figure

fig = plt.figure(1)
for k in range(Tot):

  # add every single subplot to the figure with a for loop

  ax = fig.add_subplot(Rows,Cols,Position[k])
  ax.plot(x,y)      # Or whatever you want in the subplot

plt.show() 
```

请注意，您需要范围**Position**才能将子图移动到正确的位置。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-07T14:50:53.580

```
import matplotlib.pyplot as plt
from pylab import *
import numpy as np

x = np.linspace(0, 2*np.pi, 400)
y = np.sin(x**2)

subplots_adjust(hspace=0.000)
number_of_subplots=3

for i,v in enumerate(xrange(number_of_subplots)):
    v = v+1
    ax1 = subplot(number_of_subplots,1,v)
    ax1.plot(x,y)

plt.show() 
```

此代码有效，但您需要更正轴。我曾经`subplot`在同一列中绘制 3 个图表。您需要做的就是为`number_of_plots`变量分配一个整数。如果每个图的 X 和 Y 值不同，则需要为每个图分配它们。

`subplot`工作方式如下，例如，如果我有一个`3,1,1`. 这将创建一个 3x1 网格并将绘图放置在第一个位置。在下一次交互中，如果我的`subplot`值是`3,1,2`它，它会再次创建一个 3x1 网格，但将绘图放置在第二个位置，依此类推。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-04-30T07:53:47.343

[根据这篇文章](http://matplotlib.1069221.n5.nabble.com/dynamically-add-subplots-to-figure-tp23571p23572.html)，你想做的是这样的：

```
import matplotlib.pyplot as plt

# Start with one
fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot([1,2,3])

# Now later you get a new subplot; change the geometry of the existing
n = len(fig.axes)
for i in range(n):
    fig.axes[i].change_geometry(n+1, 1, i+1)

# Add the new
ax = fig.add_subplot(n+1, 1, n+1)
ax.plot([4,5,6])

plt.show() 
```

但是，[Paul H](https://stackoverflow.com/users/1552748/paul-h)的[回答](https://stackoverflow.com/a/31575923/232794)指向名为[gridspec](http://matplotlib.org/users/gridspec.html)的子模块，这可能会使上述操作更容易。我把它作为练习留给读者^_~。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-24T08:56:27.243

我发现不是计算自己的行数和列数，而是`plt.subplots`先使用创建子图更容易，然后遍历轴对象以添加图。

```
import matplotlib.pyplot as plt
import numpy as np

fig, axes = plt.subplots(nrows=3, ncols=2, figsize=(12, 8))
x_array = np.random.randn(6, 10)
y_array = np.random.randn(6, 10)

i = 0
for row in axes:
    for ax in row:
        x = x_array[i] 
        y = y_array[i]
        ax.scatter(x, y)
        ax.set_title("Plot " + str(i))
        i += 1
plt.tight_layout()
plt.show() 
```

在这里，我使用 i 来遍历 and 的元素`x_array`，`y_array`但您同样可以轻松地遍历函数或数据框列以动态生成图形。**

# jquery - jQuery：将 mouseenter 事件添加到自定义单击功能

> ID：12319802
> 
> 赞同：1
> 
> 时间：2012-09-07T14:10:33.610
> 
> 标签：jquery, click, mouseevent, swipe

我一直在尝试将 'mouseenter' 事件添加到现有单击功能上的附加鼠标悬停功能，但似乎没有找到正确的公式来达到预期的效果。

原始代码：

```
 $('.navhandle, .navcontainer, #tray-button, .page-template-template-home-php .lines, .single-portfolio .lines').hover(
function(){ $('#supersized img').addClass('resize'); //add class for css3 transitions
$thisid = $(this).attr("id");
$thisclass = $(this).attr("class");
$navnow = $('.navhandle').css('left');

if ($navnow == navhandleinit) {

if (($thisid == 'tray-button')) {
    $('#thumb-tray').stop().animate({bottom : 0}, 300);
}
    $('#prevslide').stop().animate({left: 25 }, 500, 'easeOutCubic');
    $('.navcontainer').stop().animate({ left: -210 }, 500, 'easeOutCubic');
    $('.navhandle').stop().animate({ left: -10 }, 500, 'easeOutCubic');
     $('.mainbody').stop().animate({marginLeft: 10}, 500, 'easeOutCubic', function(){ $('#supersized img').removeClass('resize'); }); //remove css3 transition class after completion
    $('.videowrapper').animate({width: '120%', paddingLeft:0}, 500, 'easeOutCubic');

    $('.nav').fadeOut(500, 'easeOutCubic');

    $('.navhandle').toggleClass("rightarrow");
},function(){ $('#prevslide').stop().animate({left: 245}, 500, 'easeOutCubic');
    $('.navcontainer').stop().animate({ left: 0 }, 500, 'easeOutCubic');
    $('.navhandle').stop().animate({ left: navhandleinit}, 500, 'easeOutCubic');
    $('.mainbody').stop().animate({marginLeft: 220}, 500, 'easeOutCubic', function(){ $('#supersized img').removeClass('resize'); }); //remove css3 transition class after completion
    $('#thumb-tray').stop().animate({bottom : -$('#thumb-tray').height()}, 300);
    $('.videowrapper').animate({paddingLeft: 220, width: '100%'}, 500, 'easeOutCubic');

    $('.nav').fadeIn(500, 'easeOutCubic');

    $('.navhandle').toggleClass("rightarrow");

    $navnow = navhandleinit;
    } 
```

只需将“click”更改为“mouseenter”即可触发效果，但不能将其隔离到特定元素。

失败的尝试：

```
 jQuery(function($) {

var navhandleinit = $('.navhandle').css('left');
var navwidth = $('.navcontainer').width() + 30;
var mainmargin = $('.mainbody').css('margin-left');
var $navnow = $('.navhandle').css('left');
var navtray = $('#thumb-tray').css('left');

$('.navhandle, .navcontainer').mouseenter(function() {

$('#supersized img').addClass('resize');
$thisid = $(this).attr("id");
$thisclass = $(this).attr("class");
$navnow = $('.navhandle').css('left');

if ($navnow == navhandleinit) {

if (($thisid == 'tray-button')) {
    $('#thumb-tray').stop().animate({bottom : 0}, 300);
}
    $('#prevslide').stop().animate({left: 25 }, 500, 'easeOutCubic');
    $('.navcontainer').stop().animate({ left: -210 }, 500, 'easeOutCubic');
    $('.navhandle').stop().animate({ left: -10 }, 500, 'easeOutCubic');
     $('.mainbody').stop().animate({marginLeft: 10}, 500, 'easeOutCubic', function(){ $('#supersized img').removeClass('resize'); }); //remove css3 transition class after completion
    $('.videowrapper').animate({width: '120%', paddingLeft:0}, 500, 'easeOutCubic');

    $('.nav').fadeOut(500, 'easeOutCubic');

    $('.navhandle').toggleClass("rightarrow");

} else {

    $('#prevslide').stop().animate({left: 245}, 500, 'easeOutCubic');
    $('.navcontainer').stop().animate({ left: 0 }, 500, 'easeOutCubic');
    $('.navhandle').stop().animate({ left: navhandleinit}, 500, 'easeOutCubic');
    $('.mainbody').stop().animate({marginLeft: 220}, 500, 'easeOutCubic', function(){ $('#supersized img').removeClass('resize'); }); //remove css3 transition class after completion
    $('#thumb-tray').stop().animate({bottom : -$('#thumb-tray').height()}, 300);
    $('.videowrapper').animate({paddingLeft: 220, width: '100%'}, 500, 'easeOutCubic');

    $('.nav').fadeIn(500, 'easeOutCubic');

    $('.navhandle').toggleClass("rightarrow");

    $navnow = navhandleinit;
}

}); 
```

});

如何有效地添加 mouseenter 事件，以及可选的平板电脑滑动事件，同时保持原始的单击事件功能？

[可在http://stage.daylight.pro](http://stage.daylight.pro)获得实时页面。

我会很感激你的帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:31:45.877

我不确定这是否只是从您的代码中省略了，但是您的示例都没有关闭`hover()`and`mouseenter()`方法。你失败的尝试*应该*以 ); 像

```
$('.navhandle, .navcontainer').mouseenter(function() { ... }); 
```

除此之外，我不确定为什么您的`hover()`or`mouseenter()`方法会影响定义的任何点击方法（除非函数中的某些内容`click()`专门覆盖了您的`hover()`函数中的某些内容）。

更新：如果我理解你，你有以下参数/目标：

1.  `hover`jQuery函数中的现有代码
2.  您希望保持原样，但添加一个附加`mouseenter`功能
3.  `click`您还想维护一个现有功能
4.  此外，您希望触摸用户体验`hover`和`click`功能，而不仅仅是`click`（因为触摸用户体验`hover`和`click`同时）

就`mouseenter`vs而言`hover`。我会让你自己（和其他开发人员）更干净一些，并分离出这些功能。与其在参数中定义匿名函数，不如`hover`说如下：

```
$('myDiv').hover(hoverIn, hoverOut);
function hoverIn() { ... }
function hoverOut() { ... } 
```

通过这种方式，您可以更轻松地清楚地查看您的重复代码。此外，如果您希望另一个函数（例如，禁用它的调用），这更适合重用。

您`hover`的`mouseenter`、 和`mouseout`函数不应妨碍`click`事件。在每次互动中，您都会同时拥有这两种互动`mouseenter`并`click`连续发生。

也许使用 jQuery mobile 来处理`tap`暂时暂停点击的事件。但是，最终，该`hover`事件只是一个细节，它很可能会惹恼触摸设备上的人们在触发 click 事件之前触发悬停事件时必须暂时等待。

希望这可以帮助。

# android - 应用程序错误 - 与服务器的连接不成功。（文件：///android_asset/www/index.html）

> ID：12319809
> 
> 赞同：160
> 
> 时间：2012-09-07T14:10:57.493
> 
> 标签：android, cordova

应用程序在启动时死机（连接到服务器不成功）

我有一个使用PhoneGap BUILD 编写的Android 应用程序。该应用程序之前运行良好，但现在似乎在改进我的应用程序后出现此错误（仅限一些 UI 更改）

1）当我启动应用程序时，我（通常）得到：

**应用程序错误 - 与服务器的连接不成功。（文件：///android_asset/www/index.html）**

对不起，如果这是任何问题的重复。我在这里看到了一些类似的问题，但我找不到完美的答案或解决方案。就我而言，它工作正常，直到我最后一次更改。

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2015-07-13T07:42:03.017

在您的 config.xml 文件中添加以下行：

```
<preference name="loadUrlTimeoutValue" value="700000" /> 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-09-07T17:43:28.367

正如您所说，同一主题有许多重复的问题。无论如何解释你的情况。

可以通过添加超时来调用 index.html 来解决问题

即你需要`super.setIntegerProperty("loadUrlTimeoutValue", 70000);`在你的activity.java文件中添加（在src/com/yourProj/--/youractivity.java里面）这行上面： `super.loadUrl("file:///android_asset/www/index.html");`

**解释：**

这可能是由于以下原因而发生的

核心原因：问题可能是模拟器速度太慢导致网络太慢，及时完成通讯。

这可能是由于：

1.  您的代码/数据/图像太大（我猜在您的情况下您正在使用一些图像，正如您所说您进行了一些 UI 修改，可能是图像的大小很大）
2.  您的脚本可能有一个无限或很长的循环，因此加载时间过长。
3.  您将使用过多的脚本（jQuery、iscroll 等。更多的插件或脚本）

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-03-26T04:10:53.253

**这是工作解决方案**

创建一个新页面 main.html

例子：

```
<!doctype html>
<html>
  <head>
   <title>tittle</title>
   <script>
     window.location='./index.html';
   </script>
  </head>
  <body>
  </body>
</html> 
```

在 mainactivity.java 中更改以下内容

```
super.loadUrl("file:///android_asset/www/index.html"); 
```

到

```
super.loadUrl("file:///android_asset/www/main.html"); 
```

现在构建您的应用程序，它适用于任何慢速连接

[参考](http://www.robertkehoe.com/2013/01/fix-for-phonegap-connection-to-server-was-unsuccessful/)。

**注意：这是我在 2013 年找到的解决方法。**

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-12T11:03:32.557

请删除远程链接的 jQuery 文件，例如： `https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js`

相反，下载此文件并从本地 js 文件夹加载它，生成 URI：

`js/jquery.min.js`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-03-16T14:04:12.697

删除 index.html 中的外部脚本

改变这个：

```
<script src="http://code.highcharts.com/highcharts-more.js"></script> 
```

到

```
<script src="project_folder/highcharts-more.js"></script> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-04-11T10:43:32.410

我遇到了类似的问题，根据上述建议，我首先添加了“super.setIntegerProperty("loadUrlTimeoutValue", 70000);" 但这并没有帮助。所以我尝试了 Project -> Clean，它成功了，我现在可以启动应用程序了！

阿维纳什...

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-09-25T06:04:17.267

试试这个，

> 1.将你的index.html重命名为“main.html”</p>
> 
> 2.新建一个“index.html”，放入以下内容：
> 
> ```
> <!doctype html>
> <html>
>   <head>
>    <title>tittle</title>
>    <script>
>      window.location='./main.html';
>    </script>
>   <body>
>   </body>
> </html> 
> ```
> 
> 3.重建您的应用程序！没有更多的错误！

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-03-21T06:49:16.790

在离子应用程序上修复此问题，只需添加

```
<preference name="loadUrlTimeoutValue" value="700000" /> 
```

在此行之后立即添加到您的 config.xml 文件

```
<platform name="android"> 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-01-23T10:06:24.953

我的项目也有同样的情况。

我尝试了“ super.setIntegerProperty("loadUrlTimeoutValue", 70000); ”但无济于事。

我确保所有文件都正确链接 [CSS、JS 文件等]，使用 w3c 验证器 [ [http://validator.w3.org/#validate_by_upload](http://validator.w3.org/#validate_by_upload) ] 验证了 HTML，并清理了项目 [Project -> Clean]

它现在加载并执行而没有相同的错误。

希望这可以帮助

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-01-18T08:39:03.180

延长加载超时限制并不能解决导致错误的问题，它只会避免系统显示消息，但无论如何都会影响性能。

实际原因：您可能将文件或图像链接到远程位置，而这些资源加载时间过长。（这可能是最常见的错误）

最终解决方案：将所有需要的脚本、图片和css移动到一些本地文件夹中，并在本地加载...

性能将提高，错误将得到有效解决。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-02-24T22:14:12.897

检查你`index.html`的文件。如果您使用外部资源，则在运行应用程序时不可用，那么您可能会收到此错误。

就我而言，我忘记删除调试器脚本（weinre）上的链接。

```
<script src="http://192.168.0.102:8080/target/target-script-min.js#anonymous"></script> 
```

所以应用程序在模拟器上工作，因为`http://192.168.0.102:8080/`它在我的本地主机上并且可用于模拟器。

但是当我在手机上设置应用程序时，我遇到了同样的错误，因为 192.168.0.102 在移动网络上不可用。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-04-03T12:10:13.207

就我而言，问题是由于我的 WiFi 中的互联网连接丢失。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-05-17T03:42:24.207

在我的情况下，我使用的是 ionic，我只是关闭了对话框，转到模拟器中的应用程序，然后从那里运行我的应用程序。这行得通。我从这里得到了这个想法，因为这只是一个超时问题。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-04-03T06:52:51.750

如果您使用的是视觉工作室。更改 config.xml 后有时你需要这个

> 干净的构建解决方案重建您的应用程序

它对我有用。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-10-30T14:19:12.047

我面临着同样的问题。我注意到在我的索引中我同时具有“设备就绪”和“document.ready”功能，因此删除其中一个解决了我的问题:)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-08-06T11:59:33.183

这是一个相当小众的情况，但我想我会把它贴在这里，以防其他人节省我花在兜圈子上的时间。

在尝试了 cordova-android@10.0.1 后，我恢复到了 cordova-android@9.1，并在尝试以开发模式运行我的应用程序时开始出现此错误。

我忘记的是，当我升级到 10.0.1 时，我不得不删除白名单插件，因为它现在是 cordova-android 的一部分。

恢复 cordova-plugin-whitelist 让我的一切都恢复正常了！

* * *

## 回答 #17

> 赞同：-8
> 
> 时间：2014-06-05T15:03:34.393

可能发生此错误的另一个原因是：没有`index.html`in `.../YourApp/www/`！

我只是按照**[ionic guide](http://ionicframework.com/docs/guide/)**，其中一个步骤是：

```
$ rm www/index.html 
```

在 iOS 上，这没有问题，因为在构建过程中，编译器会采用一些默认的 HTML。但是，在为 android 构建时，没有`index.html`使用示例。我花了一些时间才知道（“为什么它可以在 iOS 上运行，但不能在 android 上运行......？）

简单的解决方案：创建一个 index.html，将其保存在 下`.../YourApp/www`，重建...等等！

# javascript - 定时循环，间隔 10 秒

> ID：12319813
> 
> 赞同：0
> 
> 时间：2012-09-07T14:11:10.707
> 
> 标签：javascript

我目前得到了这个：

```
var xnumLow = 3000;
var xnumHigh = 4900;

var ynumLow = 9969;
var ynumHigh = 13900;

var ts = Math.round((new Date()).getTime() / 1000);

for (y=ynumLow; y<ynumLow; y++)
{
    for(x=xnumLow; x<xnumHigh; x++)
    {
        $('#box').append(y + " - " + x);
    }
} 
```

现在我希望它每 10 秒追加一次新的整个 y“行”，所以它们都不会一次全部追加。

y“行”是外`for()`循环

我怎样才能做到这一点？

我有：

```
var refreshId = setInterval(function(){ (...) }, 10000); 
```

但我不知道在哪里将它与上面的代码合并，以便正确工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:15:01.970

```
setInterval(function () {
    // code that appends a box
}, 10000); 
```

[https://developer.mozilla.org/en-US/docs/DOM/window.setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:18:18.680

```
var y = ynumLow;

function addRow()
{
    for (x = xnumLow; x < xnumHigh; x++) {
        $('#box').append(y + " - " + x);
    }

    if (y++ < ynumHigh)
        refreshId = setTimeout(addRow, 10000);
}

addRow(); 
```

为清楚起见，按照皮特的建议进行了编辑

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:19:48.907

```
(function () {
    var xnumLow = 3000,
        xnumHigh = 4900,
        ynumLow = 9969,
        ynumHigh = 13900,
        currentY = ynumLow,
        delay = 500,
        displayData = function () {        
            var out = [],
            x;            
            for (x=xnumLow; x<xnumHigh; x++) {
                out.push( currentY + "-" + x );          
            }            
            console.log(out.join(","));  //do the append here      
            currentY++;            
            if (currentY<ynumHigh) {
                window.setTimeout(displayData,delay);
            }        
        };
    displayData()
})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T14:19:57.447

我会这样做：

```
var xnumLow = 3000;
var xnumHigh = 4900;

var ynumLow = 9969;
var ynumHigh = 13900;
var x, y = ynumLow; //don't forget to declare your variables!

var ts = Math.round((new Date()).getTime() / 1000);

(function addYRow() { //Create a function that adds the X elements
    for(x=xnumLow; x<xnumHigh; x++)
    {
        $('#box').append(y + " - " + x);
    }

    y++; //don't forget to increment y
    if(y < ynumHigh) { //only re-call if we aren't done yet
        setTimeout(addYRow, 10000); //Recall the function every 10 seconds.
    }
}()); 
```

查看其他一些答案，重要的是要意识到您不想设置一堆事情在给定点 10 秒后发生（如果您执行循环调用会发生这种情况`setTimeout()`。相反，我假设您想添加一行，然后等待 10 秒，然后再添加一行。这只能通过添加一行来实现（在我的例子中，`addYRow()`函数），然后延迟 10 秒，然后重新调用 add-a-row功能。

**列延迟：**

在回答关于如何在 x 行中延迟 500 毫秒的问题时，这有点棘手，但还不错。你只需要再嵌套一次：

```
var y = ynumLow; //don't forget to declare your variables!

var ts = Math.round((new Date()).getTime() / 1000);

(function addYRow() { //Create a function that adds the X elements
    var x = xnumLow;
    (function addXCol() { //Create a function that adds each X element
        $('#box').append(y + " - " + x);

        x++;
        if(x < xnumHigh) { //if x is not done, call  addXCol 500ms later
            setTimeout(addXCol, 500);
        } else {
            y++;
            if(y < ynumHigh) { //If x is done but y isn't, call addYRow 10 seconds later
                setTimeout(addYRow, 10000); //Recall the function every 10 seconds.
            }
        }
    }());
}()); 
```

请注意，如果您想延迟添加列/行的开始（例如，如果您想在添加行和添加第一列之间延迟 500 毫秒，则需要将`addXCol()`表达式创建调整为看起来像这样：

```
setTimeout(function addXCol() { //Create a function that adds each X element
    //...
}, 500); 
```

这将导致最初的延迟。希望有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-07T14:16:25.480

像这样的东西？

```
var refreshId = setInterval(function(){
  $('#box').append(++y + " - " + x);
}, 10000); 
```

# javascript - Javascript 文本输入更改处理程序与 div 点击处理程序相结合

> ID：12319815
> 
> 赞同：3
> 
> 时间：2012-09-07T14:11:13.170
> 
> 标签：javascript, jquery, user-interface, events, jquery-events

我有以下情况。（[可以在这里找到一个 jsfiddle](http://jsfiddle.net/BcMZM/)）

**HTML**

```
<div id="container">
    <input type="text" id="txtBox" />

    <div>
        <div class="option">Option 1</div>
        <div class="option">Option 2</div>
        <div class="option">Option 3</div>
    </div>

    <div id="out"></div>
</div>​ 
```

**Javascript (jQuery)**

```
$(".option").click(function(){
    $("#out").append("<br/>clicked " + $(this).html());
    $("#txtBox").val($(this).html());
});

$("#txtBox").change(function(){
    $("#out").append("<br/>changed value to " + $(this).val());
}); 
```

想法是用户可以在文本框中输入一个值，或者从选项列表中选择一个。选择的值使用 ajax 调用写入数据库，如果用户键入一个值，它将触发文本框上的更改处理程序，如果单击选项，则使用单击处理程序。

**问题在于以下步骤：**

*   在文本框中输入一些随机值
*   单击一个选项
*   *-> 更改处理程序和单击处理程序一起触发。*

现在这最后一种情况是非常不可取的，因为更改处理程序是使用文本框中的随机值触发的，**并且**单击处理程序是使用选项的 html 属性触发的。

我想要的只是单击处理程序正在执行，而更改处理程序在这种情况下什么都不做（或另一种解决方案，它产生在每个可能的用例中只采取一个动作的效果。有谁知道如何解决这个问题?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T14:29:07.553

Change your click handler to the mousedown event:

```
$(".option").mousedown(function(){
    $("#out").append("<br/>clicked " + $(this).html());
    $("#txtBox").val($(this).html());
}); 
```

Try it: [http://jsfiddle.net/CAUQv/](http://jsfiddle.net/CAUQv/)

You could also bind the the `keyup` event instead, that way, you're detecting every change performed by actual typing:

```
$("#txtBox").keyup(function(){
    $("#out").append("<br/>changed value to " + $(this).val());
}); 
```

Try it: [http://jsfiddle.net/RZmtz/](http://jsfiddle.net/RZmtz/)

**Documentation**

*   `jQuery.mousedown` - [http://api.jquery.com/mousedown/](http://api.jquery.com/mousedown/)
*   `jQuery.keyup` - [http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T14:18:38.750

您可以在输入的值更改处理程序中构建[超时](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)并在选项单击处理程序中[清除它。](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)

```
var myTimeout;

$(".option").click(function(){
  clearTimeout(myTimeout);
  $("#out").append("<br/>clicked " + $(this).html());
  $("#txtBox").val($(this).html());
});

$("#txtBox").change(function(){
  myTimeout = setTimeout(function(){
    $("#out").append("<br/>changed value to " + $("#txtBox").val());
  }, 50);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:32:29.007

如果用户在框中键入某些内容，则另一种选择是“禁用”这些选项：

[http://jsfiddle.net/BcMZM/2/](http://jsfiddle.net/BcMZM/2/)

```
$(".option").click(function(){
    if ($(this).hasClass("disabled")) return false;

    $("#out").append("<br/>clicked " + $(this).html());
    $("#txtBox").val($(this).html());
});

$("#txtBox").change(function(){
    if ($(this).val() == '') return false;

    $("#out").append("<br/>changed value to " + $(this).val());
});

$("#txtBox").keyup(function(){
    var val = $(this).val();     

    if (val != '')
        $(".option").addClass("disabled");
    else
        $(".option").removeClass("disabled");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T15:02:09.473

```
var delay = (function(){
 var timer = 0;
 return function(callback, ms){
  clearTimeout (timer);
  timer = setTimeout(callback, ms);
 };
})(jQuery);

var clickedOption = false;
$(".option").click(function(){
 clickedOption = true;
 $("#out").append("<br/>clicked " + $(this).html());
 $("#txtBox").val($(this).html());
});

$("#txtBox").change(function(){
var changeThis = $(this);
delay(function(){
if(!clickedOption){ $("#out").append("<br/>changed value to " + changeThis.val()); }
clickedOption = false;
}, 50 );

}); 
```

# ios - 使用 sysctl 检测当前在 iOS 上运行的应用程序

> ID：12319817
> 
> 赞同：13
> 
> 时间：2012-09-07T14:11:17.543
> 
> 标签：ios, sysctl

我目前已经实现了一个简单的活动监视器来监视 iOS 上所有正在运行的进程。

要检索所有正在运行的进程的列表，我这样做：

```
size_t size;
struct kinfo_proc *procs = NULL;
int status;
NSMutableArray *killedProcesses = [[NSMutableArray alloc] init];

int mib[4] = { CTL_KERN, KERN_PROC, KERN_PROC_ALL, 0 };

status  = sysctl(mib, 4, NULL, &size, NULL, 0);
procs   = malloc(size);
status  = sysctl(mib, 4, procs, &size, NULL, 0);

// now, we have a nice list of processes 
```

如果我想了解有关特定流程的更多信息，我会这样做：

```
struct kinfo_proc *proc;
int mib[5] = { CTL_KERN, KERN_PROC, KERN_PROC_PID, pidNum, 0 };
int count;
size_t size = 0;

// ask the proc size
if(sysctl(mib, 4, NULL, &size, NULL, 0) < 0) return -1;

// allocate memory for proc
proc = (struct kinfo_proc *)malloc(size);

sysctl(mib, 4, proc, &size, NULL, 0); 
```

我想要的所有额外的 proc 信息现在都存储在*proc*中。

我注意到应用程序不会被操作系统杀死。即使应用程序长时间不使用（超过 10 分钟），它也会保留在进程列表中。即使当我查询进程具有什么“状态”（proc->kp_proc.p_stat）时，它也会返回“正在运行”。

我的问题是：有没有人知道一种方法来检测当前正在运行/正在使用的 PID（也许：增加 cpu 时间？运行时间？cpu 滴答声等）？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:35:30.083

回答问题的“当前运行”部分：

我使用了这个答案中的代码[我们可以检索当前在 iPhone 和 iPad 上运行的应用程序吗](https://stackoverflow.com/questions/4312613/can-we-retrieve-the-applications-currently-running-in-iphone-and-ipad/4312705#4312705)

在此处查看 k_proc 声明：[http ://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/sys/proc.h](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/sys/proc.h)

通过反复试验发现 p_flag 设置为 18432 的进程是当前正在运行的应用程序（在本例中为该测试）。

请参阅第一个链接，并将 for 循环的内部替换为：

```
if (process[i].kp_proc.p_flag == 18432){

                        NSString * processID    = [[NSString alloc] initWithFormat:@"%d", process[i].kp_proc.p_pid];
                        NSString * processName  = [[NSString alloc] initWithFormat:@"%s", process[i].kp_proc.p_comm];
                        NSString * status       = [[NSString alloc] initWithFormat:@"%d",process[i].kp_proc.p_flag ];

                        NSDictionary * dict = [[NSDictionary alloc] initWithObjects:[NSArray arrayWithObjects:processID, processName,status, nil]
                                                                            forKeys:[NSArray arrayWithObjects:@"ProcessID", @"ProcessName",@"flag", nil]];

                        [array addObject:dict];

} 
```

# actionscript - 使用 Stage3D/AGAL 的简单平面着色

> ID：12319822
> 
> 赞同：1
> 
> 时间：2012-09-07T14:11:33.450
> 
> 标签：actionscript, 3d, stage3d, agal

我对 3D 开发比较陌生，目前正在使用 Actionscript、Stage3D 和 AGAL 来学习。我正在尝试创建一个带有平面阴影的简单程序网格的场景。但是，我一直坚持到底应该如何将表面法线传递给着色器以进行照明。我真的很想为每个三角形使用一个单一的表面法线，并为每个三角形做平面，甚至着色。我知道通过每个顶点的法线来实现更好看的照明很容易，但这是我所追求的外观。

由于着色器通常处理每个顶点，而不是每个三角形，我是否可以只为每个三角形传递一个法线，而不是每个顶点一个法线？我的想法完全在这里吗？如果有人有一个简单的平面阴影的工作示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T09:23:55.293

我在这里挖掘了一个老问题，因为我通过谷歌偶然发现了它，并且可以看到没有可接受的答案。

Stage3D 的着色器引擎没有等效的“GL_FLAT”选项。这意味着片段着色器程序总是从三个相应顶点的输出（通过顶点程序）接收“变化”或内插值。如果你想要平面阴影，你基本上只有一个选择：

> 为每个三角形创建三个唯一的顶点，并将每个顶点的法线设置为三角形的面法线。这样，每个顶点将计算相同的光照并产生相同的顶点颜色。当片段着色器进行插值时，它将插入三个相同的值，从而产生平面着色。

这很蹩脚。每个三角形唯一顶点的要求意味着您不能在三角形之间共享顶点。这肯定会增加您的顶点数，从而导致 VertexBuffer3D 上传期间的延迟增加以及整体较低的帧速率。但是，我在任何地方都没有看到更好的解决方案。

# html - 带有li标签的CSS“第一个孩子”

> ID：12319828
> 
> 赞同：1
> 
> 时间：2012-09-07T14:12:03.580
> 
> 标签：html, css

```
 <ul>
        <li class="bla">aaa</li>
        <li class="my_li">sss</li>
        <li class="my_li">ddd</li>
        <li class="my_li">fff</li>
    </ul> 
```

CSS：

```
 .my_li:first-child{
            color: #090;
    } 
```

这不起作用，如果为第一个 li 标签类制作不是“bla”，而是“my_li”，则 li 元素已设置为绿色。请有人告诉，为什么会这样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T14:15:14.647

作为“my_li”类成员的第一个元素是其父元素的第二个子元素。

`:first-child`选择作为其父元素的第一个子元素的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:26:34.217

你应该使用这个选择器：

```
.my_li:nth-child(2) { ... } 
```

（如果我目前正在理解您的问题并且您希望第二个 <li> 具有这种风格）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:22:39.680

它不起作用，因为该选择器意味着您正在选择一个带有 my_li 类的元素，该元素是其父级的第一个子级，而该元素不存在于您的 html 中。

尝试

```
<ul>
    <li class="my_li">aaa</li>
    <li class="my_li">sss</li>
    <li class="my_li">ddd</li>
    <li class="my_li">fff</li>
</ul> 
```

然后您的规则将适用于 aaa。

[http://www.w3schools.com/cssref/sel_firstchild.asp](http://www.w3schools.com/cssref/sel_firstchild.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T14:26:43.823

如果您不想更改第一个元素的类，请使用：

```
ul li:first-child{
            color: #090;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T14:27:15.150

正如[Quentin](https://stackoverflow.com/a/12319879/1164726)所说，`:first-child`指的是其父元素的第一个元素。

如果要定位示例列表的第一个元素，请执行以下操作：

```
ul li:first-child {
   color: #090;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-07T14:49:45.187

我认为最好的解决方案是为您的`li`元素添加第二类

CSS：

```
.first_li{ color:#090; }

<ul>
  <li class="bla">aaa</li>
  <li class="my_li first_li">sss</li>
  <li class="my_li">ddd</li>
  <li class="my_li">fff</li>
</ul> 
```

您可以使用选择器解决您的问题`:nth-child(n)`，但这意味着您需要确切知道`li`其父元素`ul`（在本例中为第二个子元素）中的元素的顺序，如果您插入更多元素，这将失败。

```
css: .my_li:nth-child(2){ color: #090;} 
```

# ruby-on-rails - ruby on rails find_or_initialize

> ID：12319832
> 
> 赞同：28
> 
> 时间：2012-09-07T14:12:07.897
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在 Ruby on Rails 中有没有更好的方法来实现这一点？

我正在搜索 11 个字段，并且所有字段都是必需的，如果找不到，请对其进行初始化。

将添加更多必填字段。

这个查询对我来说很完美，但它看起来并不是最好的方法。

```
find_or_initialize_by_make_and_country_and_engine_and_power_and_body_and_doors_and_fuel_and_cylinders_and_transmission_and_gears_and_wheels(model,country,engine,power,body, doors, fuel, cylinders, transmission,gears,wheels) 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-05-14T18:21:36.963

在rails 3.2上我会做

```
attributes = {}
Model.where(attributes).first_or_initialize 
```

文档[http://apidock.com/rails/ActiveRecord/Relation/first_or_initialize](http://apidock.com/rails/ActiveRecord/Relation/first_or_initialize)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-07T17:30:05.050

考虑到您正在使用的字段数量，您最好手动查找记录并在它不存在时对其进行初始化：

```
attributes = {
  country: country,
  engine: engine,
  power: power,
  body: body
  etc ...
}

record = where(attributes).first
record = new(attributes) unless record 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T17:01:19.680

您可以在模型中定义这样的方法

```
def self.find_or_initialize_by_field(params)
    send("find_or_initialize_by_#{params.keys.join("_and_")}", *params.values)
end 
```

然后你可以像这样调用这个方法

```
YourModel.find_or_initialize_by_field({country: country, engine: engine}) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-07T14:26:53.357

使用时`find_or_intialize_by`

通过关键字段查找，不要一次分配所有字段

例如，我假设品牌是模型中的关键字段

```
car = find_or_initialize_by_make(model)

car.update_attributes(country: country,engine: engine,power: power, body: body,doors: doors ,fuel: fuel,cylinders:cylinders,transmission: transmission, gears: gears, wheels: wheels) 
```

[http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Dynamic+attribute-based+finders](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Dynamic+attribute-based+finders)

# html - 自动热键脚本中撇号的正则表达式匹配

> ID：12319833
> 
> 赞同：4
> 
> 时间：2012-09-07T14:12:11.657
> 
> 标签：html, regex, escaping, autohotkey, apostrophe

我有一个自动热键脚本，当我双击网页上的任何单词时，它会在双语词典中查找一个单词。如果我单击“ *l'homme* ”之类的内容，则*l'*将被复制到剪贴板以及*homme*中。我希望自动热键脚本删除所有内容，包括撇号。

我无法获得自动热键来匹配撇号。下面是一个示例脚本，它打印出前四个字符的 ascii 值。如果我双击[此页面](http://www.parismatch.com/Actu-Match/Societe/Actu/Michel-Neyret.-Flic-ou-voyou-340063/ "这一页")上的“l'homme” ，它会打印出：108,8217,104,111。第二个字符显然不是撇号的 ascii 代码。我认为这很可能与撇号的 HTML 表示有关，但我无法深入了解它。我尝试过使用 autohotkey 的*转换、HTML*功能，但没有任何运气。

我已经尝试过 Unicode 和非 Unicode 版本的 autohotkey。我已将脚本保存为 UTF-8。

```
#Persistent
return
OnClipboardChange:
;debugging info:
c1 := Asc(SubStr(clipboard,1,1))
c2 := Asc(SubStr(clipboard,2,1))
c3 := Asc(SubStr(clipboard,3,1))
c4 := Asc(SubStr(clipboard,4,1))
Msgbox 0,info, char1: %c1% `nchar2: %c2% `nchar3: %c3% `nchar4: %c4%

;the line below is what I want to use, but it doesn't find a match
 stripToApostrophe:= RegExReplace(clipboard,".*’") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:28:38.083

# c++ - Dependency Walker：打开文件时出错

> ID：12319834
> 
> 赞同：1
> 
> 时间：2012-09-07T14:12:19.830
> 
> 标签：c++, visual-studio, dll, dependencies

我正在使用 Dependency Walker 尝试解决 .dll 错误。我有一个包含许多库的主要项目。Dependency Walker 在 4 个 .dll 上显示错误：

`Error opening file. The system cannot find the file specified (2).`

这很有趣，因为 Visual Studio 链接器的输出清楚地表明已找到库。.exe 中的所有内容都已正确链接（所有符号均已解析）。当我启动应用程序时，我收到一个 Windows 错误：

`The program has stopped working.`

我使用的是在这个问题中讨论的相同 API：[Win32 DLL importing issues (DllMain)](https://stackoverflow.com/questions/2925726/win32-dll-importing-issues-dllmain/4163102#comment16506612_4163102)。如果我在调试模式下构建，我会得到引用的关于内存初始化的错误。

是包含 .dll 还是 Dependency Walker 看不到 .dll 的问题？这是因为相关库是导入库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:49:21.950

.dll 被包括在内。Dependency Walker 只是不知道在哪里可以找到这些文件。将库目录添加到系统`PATH`变量允许 Dependency Walker 找到库。

# windows - 如何在 Windows 上仅获取 ping 测试的回复行

> ID：12319836
> 
> 赞同：13
> 
> 时间：2012-09-07T14:12:24.263
> 
> 标签：windows, cmd, ping

通常，在 ping 服务器 IP 地址时，我们会得到以下回报：

```
Pinging <IP address> with 32 bytes of data:
Reply from <ip> : bytes=32 time=151 TTL=121
Reply from <ip> : bytes=32 time=151 TTL=121
Reply from <ip> : bytes=32 time=151 TTL=121
Reply from <ip> : bytes=32 time=151 TTL=121

Ping statistics for <IP address>:
packets: sent = 4, Received = 4, lost = 0 (0% loss),
Approximate round trip times in milli-secounds:
Minimum = 151ms, Maximum = 151 ms, Average = 151 ms 
```

如何通过 Windows 上的 cmd.exe 中的简单命令（无论使用什么 Windows 语言）仅获取以下行（仅一个 ping 测试的回复行）？

```
Reply from <IP address> : bytes=32 time=151 TTL=121 
```

也许最简单的方法是只显示第二行？这应该怎么做？因为我不知道如何在 Windows 上做到这一点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-27T15:55:59.563

这可能会更普遍。

```
ping -n 1 <hostname/IP> | FIND "TTL=" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T16:55:13.520

您可以将 findstr 命令与 for 的跳过行选项结合使用：

```
C:\>ping 127.0.0.1 | for /f "skip=3 tokens=*" %a in ('findstr Reply') do @echo %a 
```

输出是：

```
Reply from 127.0.0.1: bytes=32 time<1ms TTL=128 
```

如果写入批处理文件，请更改`%a`为。`%%a`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T14:22:20.360

出色地，

```
ping -n 1 <hostname/IP> 
```

只会发送 1 个 ping 请求。并且您应该能够使用`FIND`命令找到回复行。

所以，像这样：

```
ping -n 1 <hostname/IP> | FIND "Reply" 
```

**更新**

我知道以上内容适用于英文 Windows 7 机器。我会假设它适用于其他本地化，但这可能是一个不正确的假设。

**更新 2**

[这个问题](https://stackoverflow.com/questions/1516411/batch-command-to-take-only-first-line-from-input)似乎提供了一些见解。您可能必须将 ping 的输出写入文件（使用`>`输出重定向管道），然后使用答案中的命令仅获取第二行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-08T09:50:10.007

从批处理中非常简单，但是从命令行中...丑陋是主要的轻描淡写：

```
(for /f "skip=1 delims=" %F in ('ping -n 1 localhost') do @if not defined _A @echo %F&set _A=0) &set "_A=" 
```

但它可以解决问题，打印第二行（无论它会包含什么）并跳过其余部分。您可以更改打印的行正在更改`skip=`。

如果您有可用的 powershell，您可以简单地执行以下操作：（*是的，我知道这不是在 PS 中应该如何执行 ping 操作*）`powershell "ping -n 1 localhost | select -index 2"`：。您可能需要使用索引，因为在我的（XP）笔记本电脑上，ping 在每一行中插入了额外的 CR，这具有从 PS 输出双倍间距的效果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T16:26:16.817

基于@wmz 的回答，

```
(for /f "skip=3 tokens=*" %F in ('ping -n 1 <hostname/IP>') do @if not defined _A @echo %F&set _A=0) &set "_A=" 
```

可以作为不依赖语言的单线。
当没有给出响应（超时）时，它也会给出结果，而 find 和 findstr 不会。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-07T15:03:21.967

您可以使用 powershell 完成此操作...这是您可以添加到脚本中的代码

```
$ping = new-object System.Net.NetworkInformation.Ping
$reply = $ping.send('127.0.0.1')
if ($reply.status -eq "Success"){
    [string]::Format("Reply from {0},time={1}",$reply.Address.ToString(),$reply.RoundtripTime)
    }else{
    $z = [system.net.dns]::gethostaddresses($hostname)[0].ipaddresstostring
    [string]::Format("FAIL,{0},{1}",$z,"***")
} 
```

您可以将字符串格式化为您想要的任何格式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-11T15:13:39.760

出于某种原因，我无法让 FIND 管道在 powershell 5.1 shell 中工作。感觉这一切都过于复杂，我想如果我能grep回复行？然后我找到了等效的powershell！我只是在匹配“回复”的第一行上使用了选择字符串，这给了我正在寻找的单行输出。所以这对我来说非常简单和容易。

```
ping -n 1 <hostname/IP> | select-string -pattern 'Reply' 
```

# objective-c - 从另一个 ViewController 隐藏栏按钮（左右）？

> ID：12319842
> 
> 赞同：0
> 
> 时间：2012-09-07T14:12:49.850
> 
> 标签：objective-c, ios, uinavigationitem

我从第一个 ViewController 开始我已经向第二个 ViewController 添加了两个条形按钮。代码在这里-`

```
self.navigationItem.leftBarButtonItem =
[[[UIBarButtonItem alloc]
  initWithBarButtonSystemItem:UIBarButtonSystemItemCancel
  target:self
  action:@selector(backBtnAction)] autorelease];
self.navigationItem.rightBarButtonItem =
[[[UIBarButtonItem alloc]
  initWithBarButtonSystemItem:UIBarButtonSystemItemDone
  target:callListViewCtrObj
  action:@selector(saveListNameAction)] autorelease];
self.navigationItem.rightBarButtonItem.tintColor = [UIColor blueColor];` 
```

现在我想在单击完成按钮时删除这两个按钮（即调用 callListViewCtrObj 的 saveListNameAction，参见上面的代码），我已经尝试过这样 -`homeViewCtrObj.navigationItem.leftBarButtonItem = nil; homeViewCtrObj.navigationItem.rightBarButtonItem =nil;` 其中 homeViewCtrObj 是第一个视图控制器的对象。

任何建议或示例代码将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:19:06.347

尝试

```
self.navigationItem.leftBarButtonItem = nil;
self.navigationItem.rightBarButtonItem = nil; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T02:45:52.987

在 CallListViewCtr 中为 HomeViewCtr 创建一个属性

```
@property (nonatomic, assign) HomeViewCtr *homeView; 
```

现在，当您推送此视图时，请确保将新创建的 viewController 分配给此属性。

```
self.homeView = theNewViewControllerImAboutToPush; 
```

现在你可以使用

```
self.homeView.navigatioItem.leftBarButtonItem = nil;
self.homeView.navigatioItem.rightBarButtonItem = nil; 
```

我想你会想在你完成后将 homeView 设置为 nil 。

# c# - c#asp.net网站在全局主文件中启用或禁用侧边菜单

> ID：12319844
> 
> 赞同：1
> 
> 时间：2012-09-07T14:12:55.090
> 
> 标签：c#, asp.net, web, master-pages, visual-web-developer

我正在用 Visual Studio Web Developer 2010（速成版）编写一个网站。我创建了一个主文件，我的内容使用它来设置样式。

我想在我的主文件中放置一个右手菜单，但是从实际的网站页面中，我想说它是否应该显示特定的菜单项。例如，主页将在右侧有一组特定的菜单项，而联系页面可能有另一组。

我应该设置它以便主文件处理是否显示某些菜单项的真或假（默认全部为假）......还是应该从内容页面处理这个？即：调用菜单函数从那里绘制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:14:55.397

您可以向页面添加母版页声明，以便您可以像这样以编程方式访问它：

```
<%@ MasterType  virtualPath="~/MasterPage.master"%> 
```

将其放在要启用或禁用访问的页面上的页面标记下。

然后，在您的代码中，您可以访问母版页方法，其中一个方法可以是启用或禁用该侧菜单的方法。

就像是：

```
Master.MyEnableMenuMethod(); 
```

此外，您可以动态添加该母版页声明，如下所示：

```
void Page_PreInit(Object sender, EventArgs e)
{
    this.MasterPageFile = "~/MasterPage.master";
} 
```

有关更多信息，请参阅[http://msdn.microsoft.com/en-us/library/c8y19k6h(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/c8y19k6h%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:19:33.950

我做这种事情的方法是把一些代码和菜单标记放在一起：

```
<% if(!HttpContext.Request.Path.Contains("Contact.aspx")) { %>
   <li> <a href="Contact.aspx">Contacts</a></li>
<%}%}> 
```

等等...

# ios - 从 base64 编码的字符串中获取 SecKeyRef

> ID：12319849
> 
> 赞同：14
> 
> 时间：2012-09-07T14:12:57.080
> 
> 标签：ios, security, rsa

我正在开发一个 iOS 应用程序，我得到一个 base64 编码的公钥，例如：

> MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC3gn+tJ1+PbP0GHa6hmM35WsVyibpypWAwRuBYY4MGfh3VWoXgiyiLo5HJTW1eR9BUFq3z+yOG1rwzSabZ8I4zneWm0kH7xErSjNrMbmjirbL7e6TQNa1ujP/x4x9XVbqf3vIsNVs19kn/qSX/HGzd5Ct3TGAo0AT0T4JwkCfciwIDAQAB

我想用这个公钥对一些文本进行编码，但是我找不到将这个字符串转换为有用公钥的方法。

我需要做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-12T18:31:40.217

首先，您必须 base64 将您的 NSString 解码为 NSData：请参阅[此答案](https://stackoverflow.com/questions/392464/how-do-i-do-base64-encoding-on-iphone-sdk)以获取解决方案。如果你正在为 iOS 7 开发，你可以使用[`initWithBase64EncodedString::options`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/instm/NSData/initWithBase64EncodedString:options:).

将字符串解码为 NSData 后，您可以尝试从中创建证书。您收到的证书格式很重要 - 您可以使用 DER（很常见）或 PKCS12。您很可能将其作为 DER，所以我认为您需要指导。

创建证书和策略：

```
SecCertificateRef   cert    = NULL;
SecPolicyRef        policy  = NULL;

cert = SecCertificateCreateWithData(kCFAllocatorDefault, data);
policy = SecPolicyCreateBasicX509(); 
```

如果证书数据在传递给`SecCertificateCreateWithData`您时格式不正确，则会得到 NULL 结果。

此时您拥有证书，但没有公钥。要获取公钥，您必须[创建信任引用并评估](https://developer.apple.com/library/ios/documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW10)证书的信任度。

```
OSStatus        status      = noErr;
SecKeyRef       *publicKey  = NULL;
SecTrustRef     trust       = NULL;
SecTrustResultType  trustType   = kSecTrustResultInvalid;

if (cert != NULL){
    SecCertificateRef   certArray[1] = {cert};
    certs = CFArrayCreate(kCFAllocatorDefault, (void *)certArray, 1, NULL);
    status = SecTrustCreateWithCertificates(certs, policy, &trust);

    if (status == errSecSuccess){
        status = SecTrustEvaluate(trust, &trustType);

        // Evaulate the trust.
        switch (trustType) {
            case kSecTrustResultInvalid:
            case kSecTrustResultConfirm:
            case kSecTrustResultDeny:
            case kSecTrustResultUnspecified:
            case kSecTrustResultFatalTrustFailure:
            case kSecTrustResultOtherError:
                break;
            case kSecTrustResultRecoverableTrustFailure:
                *publicKey = SecTrustCopyPublicKey(trust);
                break;
            case kSecTrustResultProceed:
                *publicKey = SecTrustCopyPublicKey(trust);
                break;
        }

    }
} 
```

如果一切顺利，您现在应该拥有一个包含公钥的 SecKeyRef。如果进展不顺利，您将有一个 NULL SecKeyRef 和一个 OSStatus 指示出了什么问题。`SecBase.h`安全框架中提供了有关这些错误代码的更详细信息。

现在您有了一个带有公钥的 SecKeyRef，[编程指南](https://developer.apple.com/library/ios/documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-SW9)很好地介绍了使用它来使用相应的私钥加密数据。

请注意，您必须使用 ARC 或 CFRelease 释放您在上面分配的内容（策略、证书）。

# css - IE中的对齐

> ID：12319852
> 
> 赞同：0
> 
> 时间：2012-09-07T14:13:10.013
> 
> 标签：css, internet-explorer

我有在 IE 中显示的对齐问题，这是页面：

[http://calibredesign.com/clients/spec/index.html?view=http://calibredesign.com/clients/spec/envi_news.html](http://calibredesign.com/clients/spec/index.html?view=http://calibredesign.com/clients/spec/envi_news.html)

第一段的图片和副本之间有很大的差距，有人知道如何编写css代码来最小化差距吗？

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:17:10.160

不需要时，您的 TD 元素的内容似乎会向左浮动。我认为这可能是导致 IE 问题的原因。

你真的不应该使用 TABLE 元素来布局你的页面，除非它是实际的表格数据。

# objective-c - 为 iOS 创建静态库值得吗？

> ID：12319857
> 
> 赞同：7
> 
> 时间：2012-09-07T14:13:25.837
> 
> 标签：objective-c, ios, xcode, static-libraries

我想在我的大多数项目中包含一些代码。AFNetworking、CoreData 的类别和单元测试等。

将所有这些都包含在一个静态库中，然后在每个项目中使用它似乎是合乎逻辑的。不过我注意到，许多第三方库（如 AFNetworking，它的前身 ASIHTTP）通过复制所有源文件然后手动将必要的库链接到项目目标来包含在项目中。

在我看来，这似乎是最简单的方法。花了相当多的时间来弄清楚如何将现有的静态库包含到项目中。即使在我知道如何做之后，为每个新项目都这样做似乎仍然很痛苦。此外，您指定的标头搜索路径指向包含静态库文件的本地目录。将静态库的文件复制到项目中不是更容易吗？有没有办法？这与大多数库似乎已经直接包含类文件的想法相同，但它会更有条理，因为所有内容都将集中到一个库项目中，而不是到处都有类文件并且必须包含它们中的每一个。

静态库感觉它们应该是正确的方法。创建一个可用于所有项目的库，其中包含每个项目都需要的类。说得通。我只是很矛盾，因为似乎正确的方法是将所有内容都从“正式”库中删除，而只是复制所有类文件。

我想我只是在寻找有经验的开发人员认为最好的选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T14:22:58.003

我是第一个承认在 Xcode 中引用静态库的过程并不完全直观的人之一。但是，毫无疑问，使用静态库是最好的选择。

主要原因是可维护性：当您将库的源代码复制到许多地方时，您必须记住在升级到下一个版本的库时将它们全部更新为最新代码。这可能是一个相当容易出错的过程，尤其是当底层库源发生重大变化时（例如，添加新文件、重命名旧文件等）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T15:06:58.267

有一个半途而废的解决方案 - 创建一个 XCode 项目，从源代码构建您的静态库并将其放入共享存储库（即 ..git 子模块等），该存储库包含在每个项目的主存储库中。

您的每个项目都将包含此子模块和项目。然后，他们每次拉取该子模块时都会获得最新的源代码。如果您将其设置为构建依赖项，它将在您第一次构建时构建一个静态库，然后 XCode 足够聪明，只需在每个后续构建中包含它，因此您可以获得快速构建时间的好处。

您还可以获得将源代码放在那里进行单步调试/调试的优势。

如果它在一个单独的 XCode 项目中，并且一个新版本的库添加或删除了一个源文件，您只需要更改该共享项目 - 您的所有单个项目都不会更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T09:49:08.880

使用[CocoaPods](http://cocoapods.org/)怎么样？该工具以声明的方式完全满足您的要求：您有一个文件（Podfile），您在其中声明您的依赖项，该工具会下载所有依赖项并构建一个添加到您的项目中的静态库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T14:29:30.813

我同意静态库感觉它们可能是正确的方法，原因有很多，但也可能引入一些问题。

积极的一面是创建一种将库添加到项目的简单方法。虽然不完全直观，但在一个项目中添加一个静态库后，在做几次之后就相当简单了。添加文件，添加搜索路径，完成。这在某些源代码控制情况下也很有用。此外，更新库可能更容易。

我认为这里真正的问题是开源社区。例如，通过将 AFNetworking 作为静态库包含在内，您将失去对实现文件的所有访问权限。这是包含源而不是库的一个很棒的功能。它使您可以将代码更改为您认为合适的方式，并希望回馈。

# magento - 自动选择可配置属性

> ID：12319858
> 
> 赞同：1
> 
> 时间：2012-09-07T14:13:30.903
> 
> 标签：magento, select, attributes, product, configurable

我正在为我们的一位客户配置一个 magento 网上商店。他们有颜色代码，因此我必须设置可配置的产品。但是，在网上商店显示可配置产品之前，我需要选择一个属性来分配给它......

现在，如果我必须导入 +/- 800 种产品的整个目录，这真的很不方便......

我已经找到了下一个脚本来自动执行此操作，但我不知道将它放在哪里...我已经尝试在可配置的.php 文件中使用它，但没有用。请帮帮我！

```
 foreach($configAttrCodes as $attrCode){ 

        $super_attribute= Mage::getModel('eav/entity_attribute')->loadByCode('catalog_product',$attrCode->code); 
        $configurableAtt = Mage::getModel('catalog/product_type_configurable_attribute')->setProductAttribute($super_attribute); 

        $newAttributes[] = array( 
           'id'             => $configurableAtt->getId(), 
           'label'          => $configurableAtt->getLabel(), 
           'position'       => $super_attribute->getPosition(), 
           'values'         => $configurableAtt->getPrices() ? $configProduct->getPrices() : array(), 
           'attribute_id'   => $super_attribute->getId(), 
           'attribute_code' => $super_attribute->getAttributeCode(), 
           'frontend_label' => $super_attribute->getFrontend()->getLabel(), 
        ); 
        echo "test ";
    } 
 echo "test2 ";
    if(empty($existingAtt) && !empty($newAttributes)){ 
        $configProduct->setCanSaveConfigurableAttributes(true); 
        $configProduct->setConfigurableAttributesData($newAttributes); 
        $configProduct->save(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:27:54.047

此脚本最好使用 shell 脚本将配置属性分配给产品。它不完整你。我必须在这个脚本中添加很多东西，比如向它提供产品 ID 的能力，以及与可配置属性一起配置的属性代码。

很难向您展示其中缺少的内容，因为您需要的不仅仅是这个脚本来分配属性。我运行一个脚本来获取可配置产品的所有 id，然后用它们制作一个缓存文件。我他们使用另一个脚本将这些 id 提供给上述脚本，以便它可以配置它们。所以总共有3个脚本。然后我使用一个 shell 脚本来运行这个过程。

这是由另一位用户发布的，以帮助您指出您需要前进的方向，但这绝不是一个独立的脚本。我可以将所有三个脚本的源文件通过电子邮件发送给您，您可以将它们倒过来看看我做了什么，如果有帮助的话。

# android - JSONObject 构造函数重新排列值

> ID：12319861
> 
> 赞同：0
> 
> 时间：2012-09-07T14:13:49.937
> 
> 标签：android, json

我有这个：

```
String foo = 

    "options": {
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "7",
      "8",
      "9",
    } 
```

但是`JSONObject`构造函数重新排列了键：

```
new JSONObject(foo).toString() = 

    "options": {
      "6",
      "3",
      "7",
      "2",
      "5",
      "1",
      "4",
      "8",
      "9",
    } 
```

新顺序是可重现的，这意味着每次执行都会导致相同（看似随机）的重新排列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:15:30.453

在 json 中，字段的顺序并不重要，只有它们的嵌套。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:16:47.570

您的示例`Strings`是无效的 JSON。您有一个裸露的顶级字段`options`，并且它的字段没有值。

一个 javascript *object*，它是 JSON 表示，特别是 a `JSONObject`，不保证字段的顺序。

从[JSONObject javadoc](http://www.json.org/javadoc/org/json/JSONObject.html)：

> JSONObject 是名称/值对的无序集合。

您*可以*使用数组来维护排序。因此，如果您的数据是或可以表示为一个数组 - 从您的示例中它*看起来*像一个数组 - 那么元素的顺序*将*保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T14:17:13.750

对我来说，这看起来不像是有效的 JSON。首先，没有`{}`或`[]`围绕整个字符串。其次，看起来与关联的数据`options`应该在内部，并且数组（`[]`）不是对象（`{}`）。如果它是一个数组，则顺序将被保留，而仅将值声明为属性，则无法保证它们的顺序。

# c# - 将客户端自定义的 Principal 对象转移到 WCF 服务端

> ID：12319862
> 
> 赞同：1
> 
> 时间：2012-09-07T14:13:51.707
> 
> 标签：c#, visual-studio-2010, wcf

我在 VS2010 上使用 WCF 服务。

在我的客户端，Thread.CurrentPrincipal 填充了实现 IPrincipal 的自定义主体对象。

但是当 WCF 服务方法被调用时，服务端的 Thread.CurrentPrinicpal 是默认的 WindowsPrincipal。

如何使服务端 Thread.CurrentPrincipal 与客户端（自定义主体对象）相同？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:52:23.710

这是一种方法，但我不知道是否有更简单的方法：

您需要一个 IEndpointBehaviour 实现，该实现在 ApplyClientBehavior 方法中附加一个自定义消息检查器，该检查器又添加一个包含您的自定义主体实例的自定义消息头（在 BeforeSendRequest 方法中）。您可能需要使用 Data Contract 属性装饰您的自定义主体对象，以使其序列化。然后，实现一个自定义授权策略（类似于[http://burcakcakiroglu.com/?p=2189](http://burcakcakiroglu.com/?p=2189)），它将在服务器端运行并在 Evaluate 方法中再次读取自定义消息标头并复制标头中的主体进入evaluationContext.Properties [“Principal”]。

# java - GWT Celltable 固定列

> ID：12319869
> 
> 赞同：2
> 
> 时间：2012-09-07T14:14:18.567
> 
> 标签：java, gwt

有没有办法让，比如说 7 个中的前 3 个，固定在单元格表中的列。我希望能够始终看到前三列并在其他列上进行水平滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:30:34.383

您必须创建一个由 ScrollPanel 组成的自定义小部件，其中包括两个并排设置的 CellTable 小部件。右表应包装在 FlowPanel 中，其 overflow-x 属性设置为 AUTO（overflow-y 应保持为 HIDDEN）。

您可以对两个表使用相同的 DataProvider 来同步所有更改。但是，如果需要，请小心使用 SelectionModel。我会将选择限制在复选框的第一列，并通过单击一行来禁用选择。

确保您的小部件适合其空间，否则您可能会得到两个水平滚动条 - 一个用于 ScrollPanel，一个用于右表。最后，请记住在两张桌子上设置尺寸，以使它们具有相同的高度。

# php - 如何正确编写 Doctrine 2 DQL 查询？

> ID：12319871
> 
> 赞同：3
> 
> 时间：2012-09-07T14:14:26.613
> 
> 标签：php, doctrine-orm, dql

我现在已经升级到 Doctrine 2.2.2。我已经成功地将我的数据库连接到我的应用程序，并且能够生成代理和存储库。我对那一代没有问题。我只是对使用学说 2.2.2 的 DQL 感到困惑。情况是这样的：我目前有一个负责用户注册、身份验证等的存储库类。我已经设法在它上面执行了 DQL，但我对这些东西感到很奇怪（在我的存储库类中）。

```
$query = $em->createQuery("SELECT u FROM MyProject\\Entity\\AdminUsers u"); 
```

我也试过：

```
$query = $em->createQuery("SELECT u FROM AdminUsers u"); 
```

最后一个不起作用，但第一个工作正常，但看起来很奇怪。它真的是在学说 2 中执行 DQL 的正确方法吗？还是我错过了一些重要的事情。

注意：关于这个存储库类的上述声明是：

```
namespace MyProject\Repository;

use Doctrine\ORM\EntityRepository,
    MyProject\Entity\AdminUsers; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:35:59.130

这几乎是正确的方法。如果要使用单引号`'`，则可以只使用单个反斜杠`\`而不是双反斜杠`\\`。

Doctrine 无法找出（或者这样做会非常昂贵）您通过`use`语句导入了哪些类。

但是您可以使用从实体管理器中检索的类型化存储库：

```
$repo  = $em->getRepository('MyDomain\Model\User');
$res = $repo->findSomeone(); 
```

在`findSomeone()`函数中你可以这样做：

```
$qb = $this->createQueryBuilder('u');
$dql = $qb->where('u.id = 1')->getDQL();

return $this->_em->createQuery($dql)->getSingleResult(); 
```

意思是，存储库已经在您的实体上键入，并且知道要从哪个类中选择。

一些文档：

*   [用教义查询](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html)
*   [查询生成器](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/query-builder.html)
*   [10 步入门指南](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/in-ten-quick-steps.html)（涵盖包括存储库在内的基础知识）

# xml - 使用 bash 在文件夹中添加文件

> ID：12319872
> 
> 赞同：0
> 
> 时间：2012-09-07T14:14:28.113
> 
> 标签：xml, bash

我已经想出了如何删除文件夹中的坏文件，但我想知道如何将某些命名文件添加到该文件夹​​中。

我想添加类似 address.xml 的内容

我有这个，可以删除坏文件。

```
 for addxml in $(find $DIRECTORY/$directoryname -name address.xml); do
    rm -v $addxml
done 
```

我正在尝试了解以后如何在代码中添加来自另一个文件夹的文件，而不是靠近正在编辑的文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:16:00.997

我建议检查[`cp`](http://unixhelp.ed.ac.uk/CGI/man-cgi?cp)（复制文件/目录）或[`mv`](http://unixhelp.ed.ac.uk/CGI/man-cgi?mv)（移动文件/目录）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:16:17.270

如果要创建一个空文件，请使用`touch /<dir>/<filename.ext>`( [docs](http://www.howtogeek.com/74667/how-to-use-touch-to-create-empty-files-and-modify-timestamps/) )。如果您尝试将文件从一个地方移动到另一个地方，请使用`mv <source> <target>`( [docs](http://ss64.com/bash/mv.html) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:16:25.290

vim 地址.xml ...？

:wq

您是在创建 bash 脚本来制作文件，还是在命令提示符下需要制作文件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T14:21:05.647

> 以后如何在代码中添加另一个文件夹中的文件

```
OTHER_DIRECTORY=/home/CuriousGeorge/some/other/directory

for addxml in $(find $DIRECTORY/$directoryname -name address.xml); do
    mv $addxml $OTHER_DIRECTORY
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T15:36:27.030

问题和脚本在脚本正在寻找现有文件的意义上不匹配，并且请求说明如何将文件（即不存在的文件放入该位置）

```
#!/bin/sh

FILECONTENT="something";
FILECONTENT=$FILECONTENT"something2";

for addxml in $(find . -name address.xml); do

if [ $? = 0 ]; then
        echo found
        echo   rm -v $addxml
else
        echo "putting content in $addxml"
        echo $FILECONTENT > $addxml
fi      
done

# OR CHANGE IT TO 
#FILECONTENT="/tmp/filecontent"
#cat $FILECONTENT > $addxml 
```

# html - HTML 选择元素 - 所选项目使用选项字体

> ID：12319878
> 
> 赞同：0
> 
> 时间：2012-09-07T14:15:08.817
> 
> 标签：html, css, user-interface

我正在网页上创建一个字体下拉列表。我用它所代表的字体为每个选项元素设置了样式：-

```
<option value="Arial, Helvetica, sans-serif" style="font-family: Arial,Helvetica,sans-serif;">Arial</option> 
```

当我展开下拉列表时，它看起来是正确的，但是当我选择一个项目时，下拉列表不使用所选选项的字体。有没有办法让它在选择选项时更新字体？

jsFiddle - [http://jsfiddle.net/bq2d9/](http://jsfiddle.net/bq2d9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:21:51.200

试试这个：

[http://jsfiddle.net/Rp9gp/1/](http://jsfiddle.net/Rp9gp/1/)

试试这个来改变下拉菜单中的样式：

[http://jsfiddle.net/Rp9gp/2/](http://jsfiddle.net/Rp9gp/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T14:25:06.690

尝试添加：

```
onChange="this.style.fontFamily=this.value;" 
```

[http://jsfiddle.net/bq2d9/5/](http://jsfiddle.net/bq2d9/5/)

请注意，下拉菜单中的字体在 Firefox 中正确显示，但在 Chrome 中不正确。但是，选择后，两者都会以正确的字体显示文本。

Chrome 不支持在每个选择选项中使用不同的字体。

* * *

要获得显示每个选项字体的跨浏览器字体选择器，您必须获得一个插件。

看 jQuery 插件，数量很多。目前尚不清楚其中哪些支持个人样式。我可以找到一些可以单独设置选项的选项，但是它们也可能看起来很丑。对于那些看起来更好的，有时很难知道它们是否可以单独设计。

我能找到的最好的是 jQuery-Font-Chooser - [https://github.com/CD1212/jQuery-Font-Chooser](https://github.com/CD1212/jQuery-Font-Chooser)。它看起来足够好，响应时间还可以。

否则，对于其他插件，您可以搜索，例如“jquery 选择框”或“jquery 字体选择器”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:22:36.707

在这种情况下，您需要一些每个浏览器可能不支持的自定义，并且您将面临您提到的问题。因此，我当然建议您使用完全自定义的组合框。一个 jquery 可能对你有好处。

这是 ComboBox 插件的链接：http: [//archive.plugins.jquery.com/plugin-tags/combobox](http://archive.plugins.jquery.com/plugin-tags/combobox)

# c++ - 使用 FireBreath 的 WMI 和 C++

> ID：12319880
> 
> 赞同：0
> 
> 时间：2012-09-07T14:15:17.723
> 
> 标签：c++, activex, wmi, firebreath

我正在尝试通过创建浏览器插件来获取用户硬件信息。它使用 c++ 查询 WMI。最终用户是否需要 C++ 运行时才能运行插件？

我创建了在后端使用 c# 的 activex，但我无法在 firefox 上运行它，所以我不得不将 FireBreath 与 c++ 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:03:56.093

就像 Neil 在邮件列表中所说的那样，如果您静态链接（FireBreath 默认情况下会这样做），则不会

# avr - 在 AT Mega-1284P Xplained 中打开或关闭 LED

> ID：12319883
> 
> 赞同：0
> 
> 时间：2012-09-07T14:15:23.250
> 
> 标签：avr, led

我是 AT Mega-1284P Xplained 的初学者。

我想在 ATMEL 的 AT Mega 1284P Xplained 板上的指定时间后打开一个 LED，然后再关闭（比如 LED0）。令我惊讶的是，我没有找到这个基本任务的官方文档，但有几个不同的函数调用——所有这些都失败了编译——在网上搜索。

请提及 API 调用以及为此需要包含的头文件。我正在使用 AVR Studio 6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:17:20.523

我假设一个 LED 连接到 AtMega1284P 上端口 b 的引脚 0。以下程序应使 LED 闪烁。

```
#include <util/delay.h>
#include <avr/io.h>

int main() {
  // Set the pin 0 at port B as output
  DDRB |= (1<<PB0);

  while(1) {    
    // Turn led on by setting corresponding bit high in the PORTB register.
    PORTB |= (1<<PB0);

    _delay_ms(500);

    // Turn led off by setting corresponding bit low in the PORTB register.
    PORTB &= ~(1<<PB0);

    _delay_ms(500);

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:27:44.007

回答我自己的问题：我发现 Atmel 有一个示例代码，其中涵盖了一堆传感器和其他外围组件，包括用于 Mega-1284P 的 LED。链接是[链接](http://asf.atmel.com/docs/latest/mega.applications.mega_1284p_xplained.example/html/group__mega__1284p__xplained__group.html#application_description)和[链接](http://asf.atmel.com/docs/latest/mega.applications.mega_1284p_xplained.example/html/mega__1284p__xplained__example_8c_source.html)。此外，很难找到位置（它们没有出现在网络搜索中），这些网站是_very_slow。爱特梅尔，你在听吗？

# java - 如何重构此 Java 方法以更好地利用 OOP

> ID：12319886
> 
> 赞同：0
> 
> 时间：2012-09-07T14:15:32.423
> 
> 标签：java, refactoring

我正在尝试重构此代码以使其更清洁并使用更好的 OOP 实践。此方法采用一堆单选框/复选框和文本框响应并在数据库表中更新它们，然后在另一个数据库表中更新检查表本身。

我觉得这种方法正在尝试做很多事情。但是我需要确定其他方法和类使用的一些东西，例如是否存在缺陷（单选值 = 2），是否推进工作流（在 processUpdateCheckbox 中确定的高级工作流布尔值），接下来根据状态向谁发送电子邮件currentActionItem 和advanceWorkflow 布尔值，以及持久化响应。

setFormFeedback 也不属于这里，因为该方法是从另一个处理表单数据的 Servlet 调用的，并且该消息丢失了。

非常感谢任何有助于重构的帮助。

```
public ChecklistInstance updateYesNoNAChecklistTogles(HttpServletRequest request, ChecklistInstance ci) throws DAOException {
    String work_item_class_id = request.getParameter("work_item_class_id");
    String work_action_class_id = request.getParameter("work_action_class_id");

    String paramName;
    String attribute_id;
    String radioValue;
    String textValue;
    String strStatus = "1";
    String strStoredNo = "";
    Date dateNow = new Date();

    YesNoNAAnswerDAO ynnDao = new YesNoNAAnswerDAO();
    ChecklistInstanceDAO ciDao = new ChecklistInstanceDAO();

    WorkflowInstanceWorkItemAction currentActionItem = new WorkflowInstanceWorkItemAction();
    currentActionItem.setWork_item_class_id(work_item_class_id);
    currentActionItem.setWork_action_class_id(work_action_class_id);

// Put the form check list responses into a list
    List answer_attribute_list = new ArrayList();

    java.util.Enumeration enum2 = request.getParameterNames();
        while (enum2.hasMoreElements()) {
            paramName = (String) enum2.nextElement();
            boolean isNewQ = paramName.startsWith("qID_");

            if (isNewQ) {
                attribute_id = paramName.replaceAll("qID_", "");
                YesNoNAAnswer clr = new YesNoNAAnswer();

                if (request.getParameter("radio_" + attribute_id) != null) {
                    radioValue = request.getParameter("radio_" + attribute_id);
                } else {
                    radioValue = "0";
                }

                if (request.getParameter("textbox_" + attribute_id) != null) {
                    textValue = request.getParameter("textbox_" + attribute_id);
                } else {
                    textValue = "";
                }

                if (request.getParameter("check_" + attribute_id) != null) {
                    radioValue = request.getParameter("check_" + attribute_id);
                } else {
                    // checkValue = "";
                }

                if ("0".equals(radioValue) || "2".equals(radioValue)) {
                    strStatus = "0";
                }

                strStoredNo = request.getParameter("stored_" + attribute_id);
                if ("2".equals(radioValue) && !"yes".equals(strStoredNo)) {
                    deficiencyFound = true;
                }

                clr.setWorkflow_instance_id(ci.getWorkflow_instance_id());
                clr.setWfi_work_item_action_id(ci.getWfi_work_item_action_id());
                clr.setFail_reason(textValue);
                clr.setAttribute_id(attribute_id);
                clr.setToggle_value(radioValue);
                answer_attribute_list.add(clr);
            }
        }

        ci.setChecklist_state(strStatus);
        ci.setLast_update(dateNow);
        ci.setAdditional_info(FormUtil.getFieldValue(request, FIELD_ADDITIONAL_INFO));

        processUpdateCheckbox(request, ci, currentActionItem);

            // Update the base check list
            ciDao.updateInstance(ci, authenticatedUser);

            // Update the check list question responses
            ynnDao.updateToggles(answer_attribute_list, authenticatedUser);

            // update the work flow
            WorkflowInstanceDAO wfiDao = new WorkflowInstanceDAO();
            WorkflowInstanceForm wfiForm = new WorkflowInstanceForm(wfiDao, authenticatedUser);
            WorkflowInstance wfi = (WorkflowInstance) wfiForm.view(ci.getWorkflow_instance_id(), authenticatedUser);
            wfiForm.updateWorkFlowInstance(wfi, currentActionItem);

            setFormFeedback("You have successfully updated the checklist.");
            triggerUpdateEmail(request, ci, wfi, currentActionItem);

    return ci;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:38:56.677

**首先要做的事情**是：您正在做面向对象的编程，而不是过程编程，这就是为什么您应该事先考虑哪个类应该承担哪些责任。

那么，这里的职责是什么？我们可以列出以下必须独立完成的任务：

*   **验证用户输入数据**：检查客户端通过 HTTP 提供的值的有效性（值范围、无效值、安全问题（注入保护）...）。
*   **仅包含对域模型方法的调用列表的**控制器。****
***   **领域模型**：一组代表您的业务数据并提供操作方法的类。*   一种将您的域模型**持久**化的方法：到数据库，到 XML 文件......**

 **不要忘记从所有处理的开始到结束管理**事务（如果需要）。**

**删除无用的依赖项**：您的域模型不应该知道 HTTP 以及数据的来源。你的控制器不应该知道数据是如何被持久化的。

**不要重新发明轮子**：使用像[Struts 2](http://struts.apache.org/2.x/)这样的 MVC 框架来满足您的验证和控制器需求。使用像[hibernate/JPA](http://www.hibernate.org/)这样的持久性框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:37:56.807

快速解决 ：

1.  手工制作这个函数中发生的事情的简单图表
2.  为所采取的每种类型的操作编写一个小函数。
3.  创建一个包含所有有价值的参数值的类`HttpServletRequest`
4.  `HttpServletRequest`创建从（构造函数、静态方法、设置器，如您所愿）创建此类对象的方法
5.  您可以为 UI 组件使用***状态***。

伪代码看起来像

```
 HttpServletRequest req;
  RequestParameters params = new RequestParameters(req);
  //make some processing here (database)
  for(UIState state : stateList){
    state.makechanges(params)
  }
  /* UIState can be an interface, each UI item has it own subclass*/ 
```**

# iphone - 如何在 Xcode 4.3.2 Organizer 中将包添加到 SVN 工作副本？

> ID：12319887
> 
> 赞同：0
> 
> 时间：2012-09-07T14:15:33.523
> 
> 标签：iphone, xcode, svn

我重命名了我的项目，Xcode 创建了一个新包，旧包也留在那里。该应用程序使用新名称可以正常工作，但是当我想提交到 SVN 时，我遇到了一个错误，比如新包中的文件被标记为“已复制”，但没有计划添加或位于未版本控制的目录中。当我想在控制台中添加到 SVN 时，我有一个警告，它已经在版本控制之下。

问题是：我只能看到管理器中的旧包，它被标记为已删除，但我看不到新包。

如何将其添加到列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:11:08.327

从存储库中获取一个新副本，然后从重命名的文件夹（不包括 .svn 文件夹）中恢复您的修改。

完成后删除重命名的文件夹。否则，您最终可能会遇到损坏的文件夹：

```
If you renaming a project, Xcode does not remove the .svn directory in the .xcodeproj. As a result, svn gets confused, thinking the renamed project directory is under version control 
```

# msbuild - MSBuild、M SBuild.ExtensionPack.Xml.XmlFile 不更新文件

> ID：12319893
> 
> 赞同：0
> 
> 时间：2012-09-07T14:16:01.667
> 
> 标签：msbuild, msbuildextensionpack, xml

我得到以下测试代码：

```
<Target Name="TestTarget">
    <MSBuild.ExtensionPack.Xml.XmlFile
        TaskAction="UpdateElement"
    File="@(ConfigurationFile)"
    XPath="/MyConfiguration/Settings/RetentionTime"
        InnerText="$(RetentionTime)"/>
</Target> 
```

（ConfigurationFile 在 ItemGroup 中，在其他地方我需要 FullName，所以它派上用场了）

输出为：XmlFile：C:\Development\Test\build\Test.xml 更新元素：/MyConfiguration/Settings/RetentionTime。内文：30

没有错误，构建成功。但是，当我之后打开 XML 文件时，RetentionTime 元素仍然是空的。

如果我将 XPath 更改为不存在的元素，则会出现错误，所以这应该是正确的。你知道我是否遗漏了什么吗？我不明白...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:05:31.800

一个陷阱是目标文件声明了默认命名空间。此命名空间必须在 xpath 中提供：

```
<Target Name="TestTarget">
    <ItemGroup
      <_namespaces Include="MyNamespace">
        <Prefix>mns</Prefix>
        <Uri>http://myNamespace</Uri>
      </_namespaces>
    </ItemGroup>

    <MSBuild.ExtensionPack.Xml.XmlFile
        TaskAction="UpdateElement"
    File="@(ConfigurationFile)"
    XPath="/mns:MyConfiguration/mns:Settings/mns:RetentionTime"
        InnerText="$(RetentionTime)"
        Namespaces="@(_namespaces)"/>
</Target> 
```

# linux - %CPU 列并加载到顶部

> ID：12319894
> 
> 赞同：6
> 
> 时间：2012-09-07T14:16:04.840
> 
> 标签：linux, load, cpu

我的一个 c++ 应用程序在顶部显示非常高的 %CPU，但负载非常低。myapp 总是占用 30% 左右，显示在“top”命令的最顶部，但负载总是像 0.00，所以我很困惑负载和 %CPU 列之间有什么区别？

```
top - 14:09:54 up 62 days,  2:52,  1 user,  load average: 0.00, 0.00, 0.00
Tasks: 124 total,   1 running, 123 sleeping,   0 stopped,   0 zombie
Cpu0  :  0.0%us,  0.0%sy,  0.0%ni, 99.7%id,  0.3%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu1  :  0.0%us,  0.0%sy,  0.0%ni, 99.3%id,  0.3%wa,  0.0%hi,  0.3%si,  0.0%st
Mem:   2054824k total,  1440364k used,   614460k free,     4644k buffers
Swap:  4194296k total,    16604k used,  4177692k free,   610784k cached

PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                                                         
14774 root      20   0 1201m 9416 1856 S 28.3  0.5 376:13.50 myapp                                                                                        
14746 mysql     20   0 2012m 157m 3888 S  0.3  7.8   5:01.08 mysqld 
```

谁能告诉我理解 %CPU 和 load 之间的区别？

先感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T14:19:35.473

**例如显示的**%CPU**`top`是瞬时的，即当时正在使用的，而显示的**负载**`uptime`是平均值：**

 **> 它通常以三个数字的形式出现，代表最后一分钟、五分钟和十五分钟期间的系统负载。

来自[维基百科](https://en.wikipedia.org/wiki/Load_%28computing%29)。

随着时间的推移，这些应该会收敛，但是当 %CPU 最大为 100% 时，尽管有进程等待，负载可能会高于 1。例如：

> 例如，可以将单 CPU 系统上“1.73 0.50 7.98”的平均负载解释为：
> 
> 最后一分钟，CPU超载了73%（1个CPU有1.73个可运行进程，所以0.73个进程要等一转）
> 
> 在最后 5 分钟内，CPU 负载不足 50%（没有进程必须等待转机）
> 
> 在过去的 15 分钟内，CPU 过载了 698%（1 个 CPU 有 7.98 个可运行进程，因此 6.98 个进程必须等待轮换）

**更新：**

我现在才注意到您的进程正在使用 28% 的 CPU，而`top`报告两个 CPU 都 > 99% 空闲。我无法在我的 Linux 系统（Ubuntu 12.04，Intel i7-3770K 四核 HT）上重现这一点，请参见下面的屏幕截图。

**正常设置，无负载，显示所有内核的平均 CPU 使用率：**

```
top - 18:10:04 up  7:50,  2 users,  load average: 0.00, 0.05, 0.15
Tasks: 157 total,   1 running, 156 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.0%us,  0.0%sy,  0.0%ni, 99.9%id,  0.0%wa,  0.0%hi,  0.0%si, 0.0%st
Mem:  16528224k total,  1124956k used, 15403268k free,   148772k buffers
Swap: 15624188k total,        0k used, 15624188k free, 670460k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
    7022 root      20   0     0    0    0 S    0  0.0   0:00.14 kworker/0:1        
    1 root      20   0  3640 2060 1324 S    0  0.0   0:01.23 init               
    2 root      20   0     0    0    0 S    0  0.0   0:00.00 kthreadd           
    3 root      20   0     0    0    0 S    0  0.0   0:00.14 ksoftirqd/0        
    6 root      RT   0     0    0    0 S    0  0.0   0:00.00 migration/0 
```

**一个核心上的全负载（运行`yes > /dev/null`），显示所有核心的平均 CPU 使用率：**

```
top - 18:11:58 up  7:52,  2 users,  load average: 0.11, 0.07, 0.15
Tasks: 157 total,   2 running, 155 sleeping,   0 stopped,   0 zombie
Cpu(s): 12.5%us,  0.0%sy,  0.0%ni, 87.5%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:  16528224k total,  1124880k used, 15403344k free,   148824k buffers
Swap: 15624188k total,        0k used, 15624188k free,   670472k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND           
 8254 tim       20   0  4188  280  228 R  100  0.0   0:04.88 yes                
    1 root      20   0  3640 2060 1324 S    0  0.0   0:01.23 init               
    2 root      20   0     0    0    0 S    0  0.0   0:00.00 kthreadd           
    3 root      20   0     0    0    0 S    0  0.0   0:00.15 ksoftirqd/0        
    6 root      RT   0     0    0    0 S    0  0.0   0:00.00 migration/0 
```

**与 2) 相同，但显示每核 CPU 使用情况：**

```
top - 18:13:47 up  7:54,  2 users,  load average: 0.86, 0.36, 0.24
Tasks: 157 total,   2 running, 155 sleeping,   0 stopped,   0 zombie
Cpu0  :  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu1  :  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu2  :  0.3%us,  0.0%sy,  0.0%ni, 99.7%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu3  :  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu4  :  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu5  :100.0%us,  0.0%sy,  0.0%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu6  :  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Cpu7  :  0.0%us,  0.0%sy,  0.0%ni,100.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:  16528224k total,  1124756k used, 15403468k free,   148840k buffers
Swap: 15624188k total,        0k used, 15624188k free,   670472k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND           
 8254 tim       20   0  4188  280  228 R  100  0.0   1:53.98 yes                
    1 root      20   0  3640 2060 1324 S    0  0.0   0:01.23 init               
    2 root      20   0     0    0    0 S    0  0.0   0:00.00 kthreadd           
    3 root      20   0     0    0    0 S    0  0.0   0:00.15 ksoftirqd/0        
    6 root      RT   0     0    0    0 S    0  0.0   0:00.00 migration/0 
```

**注意：**我确实注意到第一个统计数据`top`显示不显示 100% cpu 使用率`yes`，类似于你所拥有的。也许这就是问题所在？**

# dao - 复制 DAO 对象功能

> ID：12319895
> 
> 赞同：0
> 
> 时间：2012-09-07T14:16:06.907
> 
> 标签：dao

我正在实现一些基本的 DAO 操作，但在我的数据库中，我有不同的表，它们的结构完全相同。

例如，如果我正在配置具有特定选项的汽车，我可能会有一个包含以下字段的配置表：

```
Configuration

 - UID id
 - varchar name
 - UID interiorColor
 - UID exteriorColor 
```

每个颜色表看起来像这样：

```
InteriorColor/ExteriorColor
 - UID id
 - varchar name
 - varchar description
 - int cost 
```

如果我正在创建用于 DAO 模式的代表性对象（ 、 等），我是否需要为 和 复制本质上相同`Configuration`的对象？`InteriorColor``InteriorColor``ExteriorColor`

我想简单地编写一个抽象类，然后将其扩展为每个唯一类型而不覆盖任何方法，但这感觉很奇怪......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:51:55.313

如果您对表格别无选择，并且必须继续使用当前的表格结构，那么我建议您可以使用一种界面颜色和一种代表两者的类颜色。接口将确保您使用多态性，以便稍后您可以灵活地对其进行子类化，并在需要时添加或覆盖现有行为。

# iphone - 从一个故事板到另一个

> ID：12319901
> 
> 赞同：0
> 
> 时间：2012-09-07T14:16:26.100
> 
> 标签：iphone, sdk

例如，我有 2 个 Storybard。在第一个故事板中，我有一个带有按钮的视图，当您按下按钮时，应该会出现第二个故事板。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:31:12.790

查看[故事板类的文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html)

您可以使用创建故事板

```
UIStoryBoard *storyboard = [UIStoryboard storyboardWithName:@"secondStoryboard" bundle:nil]; 
```

并从中获取视图控制器

```
UIViewController *initialViewController = [storyboard instantiateInitialViewController]; 
```

或者

```
UIViewController *otherViewcontroller = [storyboard instantiateViewControllerWithIdentifier:@"otherController"]; 
```

一旦你有了视图控制器，我猜你可以将它们推送到导航控制器上。

但是，我不知道在同一个视图层次结构中使用两个故事板对象会发生什么——这可能很好，但你永远不知道 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:32:18.713

尽管您的问题有点令人困惑，但我想我知道您要做什么。

您想使用两个故事板。[UIStoryboard](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html)有一个方法来检索具有给定名称的任何故事板的实例。所以首先，在 Xcode 中为你的故事板和视图控制器设置一个名称，然后加载它们，然后从任何视图控制器中加载它们：

```
UIStoryboard *anotherStoryboard = [UIStoryBoard storyboardWithName:@"SomeStoryboardName" bundle:nil]; 
```

之后，从任何情节提要中实例化所需的 UIViewController：

```
UIViewController *anotherViewController = [anotherStoryboard instantiateViewControllerWithIdentifier:@"SomeViewControllerName"]; 
```

然后，您可以将其推送到导航堆栈中，例如：

```
[self.navigationController pushViewController:anotherViewController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T14:39:16.587

修改为通用这是我在我的应用程序中执行此操作的方式...

```
UIStoryboard *alternateStoryboard;

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    alternateStoryboard = [UIStoryboard storyboardWithName:@"Alternate_iPad" bundle:nil];
} else {
    alternateStoryboard = [UIStoryboard storyboardWithName:@"Alternate_iPhone" bundle:nil];
}

AlternateController *altController = [alternateStoryboard instantiateInitialViewController];
[altController setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
[self presentModalViewController:altController animated:YES]; 
```

如果您的应用程序只有 iPhone 或 iPad 可以简化为...

```
UIStoryboard *alternateStoryboard = [UIStoryboard storyboardWithName:@"Alternate" bundle:nil];

AlternateController *altController = [alternateStoryboard instantiateInitialViewController];
[altController setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
[self presentModalViewController:altController animated:YES]; 
```

您可能需要更改最后 2 行以适应您想要的演示风格。

# c# - System.Windows.Forms.Screen.DeviceName 在 Windows XP 上提供垃圾

> ID：12319903
> 
> 赞同：8
> 
> 时间：2012-09-07T14:16:39.797
> 
> 标签：c#, .net, winforms, windows-xp, screen

我的 3.5 .NET Framework 程序处理多个监视器，所以我[`Screen.DeviceName`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.devicename%28v=vs.90%29.aspx)用来区分不同的监视器（不能只比较对`Screen`对象实例的引用——不同的实例可以引用同一个屏幕）。

该程序在 Windows 7 上运行没有问题，但在安装了所有 .NET 框架的 Windows XP SP3 上，它会随机做一些奇怪的事情，好像它没有意识到两个给定的屏幕实际上是同一个屏幕，它应该能够认识到它们应该具有相同`DeviceName`的 s。

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T14:18:22.917

框架或 Windows XP 中的某处似乎存在错误。

如果你`Screen.DeviceName`在 Windows 7 下转储 a ，你会得到类似的东西

> ```
> \\.\DISPLAY1
> \\.\DISPLAY2
> ```

但是如果你在 Windows XP 上做同样的事情，你会得到类似的东西

> ```
> \\.\DISPLAY1 ????A??M?↕?☺ ?
> \\.\DISPLAY2 ????☺ ? ☺?????
> ```

显然微软已经意识到了这个错误，所以他们在[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.devicename(v=vs.90).aspx)中写了一个注释：

> 此字符串可能包含不可打印的字符。

如果不可打印的字符每次都相同，那将是完全可以的。
**但它们不是**，因为事实上，它们是在终止空字符之后的垃圾随机内存内容。

如果只创建一个对象的缓存实例并多次`Screen`调用其属性，则每次的垃圾都是相同的，因为对象本身缓存了名称。但是如果你为每个请求创建一个新的对象实例，那么这些实例的垃圾很可能是不同的，即使它们引用的是同一个设备：`DeviceName``Screen``Screen`

```
System.Windows.Forms.Screen s = null;
System.Drawing.Point p = new System.Drawing.Point(0,0);

Console.WriteLine("Using same instance of Screen:");
s = System.Windows.Forms.Screen.FromPoint(p);
for (int i = 0; i < 5; ++i)
{
    Console.WriteLine(s.DeviceName);
}

Console.WriteLine();

Console.WriteLine("Using new instance of Screen:");
for (int i = 0; i < 5; ++i)
{
    Console.WriteLine(System.Windows.Forms.Screen.FromPoint(p).DeviceName);
} 
```

如果您在 Windows XP 上运行此代码段，您将得到如下内容：

![在此处输入图像描述](../Images/00dc508bb87d743f6577a4ede7f737fa.png)

请注意您如何拥有至少三个版本的`DeviceName`此处。

相反，在 Windows 7 上，垃圾部分将被剔除。

这就是代码无法识别屏幕的原因——设备名称每次都不同。

要解决此问题，请`DeviceName`在第一个字符之后裁剪字符串`'\0'`。

# java - 是否存在java“平台不可知论”可能失败的情况？

> ID：12319911
> 
> 赞同：2
> 
> 时间：2012-09-07T14:17:24.317
> 
> 标签：java, compilation, platform-agnostic

我已经使用 java 很长时间了，但这个问题最近出现在我的脑海中，从那以后一直困扰着我。

我知道某些情况下平台不可知论可能会在 Java 世界中受到影响。

1.  与文件系统交互的代码
2.  在代码中使用平台相关库。
3.  还有浮点数

是否还有更多 Java 平台不可知论可能失败的情况？假设我在 Solaris 上编译的文件可能无法在 RedHat Linux 上运行。

对此主题的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:21:11.870

平台特定的方法，例如

*   Runtime.exec() 是特定于平台的。
*   sun.* 或 com.sun.* 下的任何东西可能存在也可能不存在，或者做同样的事情。
*   一些系统属性应该因系统而异。例如，有一个应用程序期望某些供应商在 VM 供应商更改为 Oracle 时失败。;)
*   任何依赖于 System.getenv()
*   使用本机库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T14:23:40.570

您需要小心路径，例如在 Windows 和 UNIX 之间使用 \ 和 / 是自找麻烦。此外，换行符可能很棘手：Windows 是 CR+LF，UNIX 只是 CR（如果我没记错的话）。Java 确实提供了处理此类问题的机制，但天真的/新开发人员可能会错过它们。

此外，我相信操作系统文件锁定是不同的，例如在 Windows 上，您可能会被阻止/拒绝访问某些在 UNIX 上您不会的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-29T06:50:48.467

一些不依赖于平台的库使用 JVM 默认值。例如，如果您在两台机器上请求*AES ，JVM 可能会选择不同的***加密算法。**在这种情况下，您应该在选择算法时更加具体，例如*AES/ECB/PKCS5Padding*。请参阅[Java 默认加密/AES 行为](https://stackoverflow.com/a/15528182/772981)。

 **所以一般来说，当文档说有一些*默认值*并且不要使用**defaults**时要小心。**

# plone - ZEO：我怎样才能让客户端只读但通过控制台进行更改

> ID：12319914
> 
> 赞同：2
> 
> 时间：2012-09-07T14:17:33.170
> 
> 标签：plone

我通过将脚本粘贴到这样的控制台中来运行脚本：

```
 bin/client2 debug

 ... my script ... 
```

该脚本规范化文件的标题。由于有超过 20k 个文件，因此需要花费*太多*时间。所以我需要用户仍然可以以只读方式使用该网站。

但我假设设置不会让我运行我的规范化脚本`read-only true`。`zeo.conf`不会吗？

我该如何解决这个问题？

此致，

曼努埃尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T15:07:58.983

没有，*恐怕*。

如果您的用户在登录时更改了站点，请禁用他们的登录，直到您完成。

通常，对于此类任务，我会分批运行更改，以最大程度地减少冲突并允许最终用户继续正常使用该站点。将您的工作分成几块，并在每处理 n 个项目后提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T19:41:20.103

您可以添加另一个不是 RO 的 zeo 客户端 - 不需要 zeoserver 必须是 RO 才能拥有客户端 RO。

所以，所有正在使用的客户端，制作 RO，然后添加一个额外的 RW 客户端，除了你的脚本之外没有人使用，然后离开 zeoserver RW。

# jquery - 同位素，砌体或两者都不是？

> ID：12319926
> 
> 赞同：2
> 
> 时间：2012-09-07T14:18:21.200
> 
> 标签：jquery, jquery-plugins, jquery-masonry, jquery-isotope

[同位素](http://isotope.metafizzy.co/index.html)和[砖石](http://masonry.desandro.com/demos/fluid.html)都是令人印象深刻的插件。但我不确定它们是否是我实现这种[效果](http://themes.rubenbristian.com/?theme=wowway)所需要的——图像会调整，以便它们始终完美地贴合，并且两边都没有边距。所以[这](http://jsfiddle.net/AndyMP/LTXRt/1/)就是我所拥有的，但我最初希望这些盒子填满容器，然后随着容器的缩小调整大小。

这些插件中的哪个会达到这种效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:37:10.663

如果你想要一个流畅的布局，你可以通过[这种方式](http://isotope.metafizzy.co/demos/fluid-responsive.html)使用 Isotope并省略边距以使元素彼此相邻。

# jquery - .change() 冲突？

> ID：12319935
> 
> 赞同：0
> 
> 时间：2012-09-07T14:18:51.300
> 
> 标签：jquery, jquery-ui

我有 2 个更改，实时更改工作正常，但是选择的第二个更改似乎不起作用，有人知道或者可以将它们合并在一起吗？

```
$(".shipping").live('change', function () {
    var billingId = $(this).attr('id').replace('_shipping_', '_billing_');
    $('#' + billingId).val($(this).val());
});

$("#same_shipping_address_title").change(function () {
    $("#same_billing_address_title").val($(this).val());
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:56:05.897

对每个步骤进行故障排除以查看故障所在是一个好主意。试试这个开始：

```
 $("#same_shipping_address_title").change(function () {
         console.log("change fired");
         var newvalue = $(this).val();
         console.log(newvalue);
         $("#same_billing_address_title").val(newvalue);
    }); 
```

然后在浏览器的开发人员工具中使用控制台，您应该会看到更改事件是从#same_shipping_address_title 触发的事实及其值的确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:10:43.447

这是由于制服需要`$.uniform.update()`更新列表。

# php - 将数据从 xcode 传递到 php

> ID：12319938
> 
> 赞同：2
> 
> 时间：2012-09-07T14:18:54.490
> 
> 标签：php, objective-c, xcode

我一直致力于将 NSString 传递给 php 文件，我想要得到的结果是在 viewDidload 之后将 id 传递给 php 文件，这样我就可以使用 id 来查询 mysql 数据库并检索数据。有人可以教我怎么做吗？我看到很多人在下面讨论这些代码，但我不太确定它是关于什么的。

```
NSString * myString=@"1";
NSString * post = [[NSString alloc] initWithFormat:@"&id=%@", myString];
NSData * postData = [post dataUsingEncoding:NSASCIIStringEncoding  allowLossyConversion:NO];
NSString * postLength = [NSString stringWithFormat:@"%d",[postData length]];
NSMutableURLRequest * request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://localhost/getdata.php"]]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];
NSURLConnection * conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];

if (conn) NSLog(@"Connection Successful"); 
```

这些代码是否适用于我的案例？感谢您的时间和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:39:50.893

这是我为自己的一个应用程序做同样事情的方式：

***注意：这运行的是 GET 请求，而不是 POST 请求，但它在后台执行并高效运行**

创建一个类来从服务器检索数据（我叫我的 online.h/m）

**AppDelegate.h**

```
//
//  AppDelegate.h
//  Faith Life Fellowship Streamer
//
//  Created by David Worth on 7/17/11.
//  Copyright 2011 Math Nerd Productions, LLC. All rights reserved.
//

#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : NSObject <UIApplicationDelegate> {
    NSOperationQueue *queue;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;

@property (nonatomic, retain) IBOutlet ViewController *viewController;
@property (nonatomic, retain) NSString *receivedURL;

- (void)stringLoad:(NSString*)str;
+ (id)shared;
- (void)addOperation:(NSOperation*)operation;

@end 
```

将这些部分添加到 AppDelegate.m

```
@synthesize receivedURL;

static AppDelegate *shared;

+ (id)shared;
{
    if (!shared) {
        [[AppDelegate alloc] init];
    }
    return shared;
}

- (id)init
{
    if (shared) {
        [self autorelease];
        return shared;
    }
    if (![super init]) return nil;

    queue = [[NSOperationQueue alloc] init];
    shared = self;
    return self;
}

- (void)addOperation:(NSOperation *)operation
{
    [queue addOperation:operation];
}

- (void)stringLoad:(NSString *)str
{
    self.receivedURL = str;
    [[NSNotificationCenter defaultCenter] postNotificationName:@"string" object:nil];
} 
```

**在线.h**

```
//
//  online.h
//  FLF Streamer
//
//  Created by David Worth on 4/30/12.
//  Copyright (c) 2012 Math Nerd Productions, LLC. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "AppDelegate.h"

@interface online : NSOperation

@property (nonatomic, retain) NSString* str;
@property (nonatomic) int type;

- (id)initWithString:(NSString*)url;

@end 
```

**在线.m**

```
//
//  online.m
//  FLF Streamer
//
//  Created by David Worth on 4/30/12.
//  Copyright (c) 2012 Math Nerd Productions, LLC. All rights reserved.
//

#import "online.h"

@implementation online
@synthesize str;

- (id)initWithString:(NSString *)url
{
    if (![super init]) return nil;
    [self setStr:url];
    return self;
}

- (void)dealloc {
    [str release], str = nil;
    [super dealloc];
}

- (void)main {
    NSString *webpageString = [[[NSString alloc] initWithContentsOfURL:[NSURL URLWithString:str] encoding:NSUTF8StringEncoding error:nil] autorelease];

    [[AppDelegate shared] performSelectorOnMainThread:@selector(stringLoad:)
                                                                         withObject:webpageString
                                                                      waitUntilDone:YES];
}

@end 
```

然后在您的**viewcontroller.m**中调用它（将 mysite.com... 替换为您要访问的 PHP 页面的 URL）：

```
online* o = [[online alloc] initWithString:@"http://www.mysite.com/myphppage.php?variable1=blah+blah+blah"];
AppDelegate* delegate = [AppDelegate shared];
[delegate addOperation:o]; 
```

在您的**viewcontroller.m** viewDidLoad 方法中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myMethodToProcessWhatTheServerReturns) name:@"string" object:nil]; 
```

然后在 viewController.m 中创建解析服务器返回内容的方法：

```
- (void)myMethodToProcessWhatTheServerReturns
{
     NSString* serverResponse = [AppDelegate shared].receivedURL;
     //Do stuff with serverResponse
} 
```

快乐编码！

# c++ - Qt QLabel 默认文本

> ID：12319944
> 
> 赞同：1
> 
> 时间：2012-09-07T14:19:26.367
> 
> 标签：c++, qt, qlabel

我的代码很简单：

```
Widget::Widget(QWidget *parent) : QWidget(parent), ui(new Ui::Widget)
{
    lineEdit = new QLineEdit();
    label = new QLabel("");
    connect(lineEdit, SIGNAL(textChanged(QString)), label, SLOT(setText(QString)));
    ui->setupUi(this);
} 
```

我编译了它，没有错误或警告。

但是当我运行它时，用户界面是这样的：

![在此处输入图像描述](../Images/8d85940da24c9073f8124341b02b93b1.png)

为什么`QLabel`默认文本是`TextLabel`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:55:47.327

您应该阅读 Qt 文档中的一些教程。您将 QtDesigner ui 与手动小部件创建混合在一起。标签上的默认文本来自您的 ui 文件。此外，当您使用 ui 文件时，您不需要创建标签/行编辑。只需从 ui 类中得到它们即可。因此，如果您将 ui 文件恢复正常，那么您可以执行以下操作：

```
Widget::Widget(QWidget *parent) : QWidget(parent), ui(new Ui::Widget)
{
    ui->setupUi(this);
    connect(ui->lineEdit, SIGNAL(textChanged(QString)), ui->label, SLOT(setText(QString)));
} 
```

也可以通过双击使用 Qt Designer 更改标签中的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:57:16.777

那是因为你的两个

```
 lineEdit = new QLineEdit();
 label = new QLabel(""); 
```

与您在 ui 中创建的不同。您正在定义两个新的小部件，而您可能应该参考以前的小部件：

```
 ui->lineEdit->clear();
 ui->label->clear();
 connect(ui->line....
 //etc... 
```

# objective-c - 在 CoreImage 的内置过滤器中找不到 CICategoryBlur

> ID：12319945
> 
> 赞同：0
> 
> 时间：2012-09-07T14:19:26.977
> 
> 标签：objective-c, filter, core-image, built-in

> **可能重复：**
> [iOS 5 是否支持模糊 CoreImage 拟合器？](https://stackoverflow.com/questions/8528726/does-ios-5-support-blur-coreimage-fiters)

我想在 CICategoryBlur 中使用 fitler，但是当我在 kCICategoryBlur 中搜索过滤器时，我找不到任何过滤器。我终于搜索了所有内置过滤器，但我无法找到模糊类别的任何过滤器，而且它似乎缺少一些我希望成为内置过滤器的过滤器。

这是我用来查找过滤器的代码，没有什么特别的。但是有了这个我只能找到48个过滤器。

有人知道我的问题可能是什么吗？

```
NSMutableArray  *filtsInCat = [[NSMutableArray alloc]init];
filtsInCat = [NSMutableArray arrayWithArray:[CIFilter filterNamesInCategory:kCICategoryBuiltIn]];

NSLog(@"filter count: %i",[filtsInCat count]);
for (int i=0; i<[filtsInCat count]; i++) {
    NSLog(@"filter name: %@", [filtsInCat objectAtIndex:i]);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:06:28.060

iOS 中可用的过滤器集只是 OS X 中可用过滤器的一个子集。

也可以看看

[iOS 5 是否支持模糊 CoreImage 过滤器？](https://stackoverflow.com/questions/8528726/does-ios-5-support-blur-coreimage-fiters)

# python - 如何在python中识别csv文件中的空白字段？

> ID：12319950
> 
> 赞同：3
> 
> 时间：2012-09-07T14:19:35.803
> 
> 标签：python, csv, python-2.7

我有一个包含 5 列的 csv 文件：

```
1, 2312, "A", , 20
2, 8383, "B", "UK", 
3, 3883, , , 45 
```

其中列代表 id、customerId、customerName、customerAddress 和 customerAge。我想放在`0`年龄为空白且`''`其他字符串类型属性为空白的地方。但我无法识别python中的空白字段。我试过做一些事情，比如：

1.  `len(row[4]) == 0`
2.  `row[4] == ''`
3.  `row[4] == None`
4.  `repr(row[4]) == ''`

但它没有用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:50:42.947

你想用`not`

`0`, `None`, `False`,`''`都是`not True`

```
if not row[4]: 
```

你也可以

```
bool(row[4]) 
```

这将返回`False`所有上述值

# .net - 如何使用 Visual Studio 2012 在 XP 上定位 .NET 4.0.3？应用程序无法运行“不是有效的 Win32 应用程序”

> ID：12319952
> 
> 赞同：20
> 
> 时间：2012-09-07T14:19:44.010
> 
> 标签：.net, visual-studio-2010, windows-7, windows-xp, visual-studio-2012

我有一个需要在 XP 上运行的面向 .NET 4.0.3 的大型应用程序。它使用 Visual Studio 2010 SP1 构建良好，并在 XP 上正常运行。

使用面向 .NET 4.0.3 的 Visual Studio 2012 构建也可以正常构建并在 Windows 7 上运行良好，但无法在 XP 上运行。我收到一条错误消息，提示 MyApp.exe 不是有效的 Win32 应用程序。

如何继续以 .NET 4.0.3 为目标，支持使用 Visual Studio 2012 的 XP 机器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T21:19:16.970

我们也遇到了这个问题。这与您的应用程序所针对的框架无关（我们针对的是 4.0 客户端）。

问题是 Visual Studio 2012 不会在 XP 上运行 setup.exe 后产生一次点击。该错误具有误导性，因为它总是报告该程序不是有效的 Win32 应用程序。它在包括 64 位版本在内的任何版本的 XP 上执行此操作。

不是你的应用程序导致了问题，而是VS2012产生的setup.exe。我们发现解决它的唯一方法是使用 VS2010 发布。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T09:28:57.297

我不确定这是否可行，但请尝试[此处显示](https://web.archive.org/web/20130314124514/http://supportxp.com/2012/03/30/editbins-dirty-little-secret/)的技巧以手动设置子系统版本`EditBin.exe`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-15T16:14:12.557

微软最近刚刚发布了一个修复程序。（包括快速版本。）

详情见：http: [//blogs.msdn.com/b/smondal/archive/2012/10/15/setup-exe-is-not-a-valid-win32-application.aspx](http://blogs.msdn.com/b/smondal/archive/2012/10/15/setup-exe-is-not-a-valid-win32-application.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-22T06:43:26.100

可以在 Project Properties -> Publish -> Prerequisites 面板下设置目标系统要求（VS2012 with Update 1）。即使您正在为 .NET 4（项目属性 -> 应用程序 -> 目标框架）构建，您也需要将先决条件从 4.5 更改为 4，因为它不会自动放弃要求。

以 4 为目标但前提为 4.5 的构建将启动安装程序但系统检查失败

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T01:49:31.223

VS2012 Update 1 应该可以解决这个问题。但是，我不确定要使用哪些选项，它是项目属性->常规->平台工具集下的工具集吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-24T21:42:15.377

这对我有用 - 只需在 Studio 2012 中构建您的解决方案，然后从 Debug 文件夹中获取解决方案内容的副本。确保 XP 客户端已安装 .net 4。

# python - openerp 6.1 版中的 aeroo 报告存在错误

> ID：12319957
> 
> 赞同：2
> 
> 时间：2012-09-07T14:19:57.167
> 
> 标签：python, openerp

点击打印按钮后出现以下错误，该报告在 openerp6.1 中使用 aeroo 功能齐全：

Aeroo 报告：生成报告时出错。解析表达式“__filter(get_label("report.account.account.balance","chart_account_id")”时出现意外的 EOF 指令 (, line 1) (, line 1) 在表达式“__filter( get_label("report.account.account.balance","chart_account_id")" of "replace" 指令 (, line 1) (, line 1) 更多参考检查错误日志。

(, Exception(u'Aeroo Reports: Error while generated the report.', TemplateSyntaxError('unexpected EOF while parsing in expression "__filter(get_label("report.account.account.balance","chart_account_id")" of "replace"指令（，第 1 行）（，第 1 行）'，），'在“替换”指令的表达式“__filter（get_label（“report.account.account.balance”，“chart_account_id”）”（，行1) (, line 1)', u'有关更多参考检查错误日志。'), ) 请帮帮我..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:37:29.610

这意味着显示的指令有语法错误。如果你看它，它是相当清楚的。一组括号没有闭合。另一个常见原因是缺少结束 > 标签

# perl - 只在模式前留下新行

> ID：12319958
> 
> 赞同：0
> 
> 时间：2012-09-07T14:19:59.157
> 
> 标签：perl, shell, sed

我需要在 shell 中重新格式化文件，所以我只在某些模式之前留下“新行”。前任：

输入：

```
Europe First
Asia Second
Africa Third
Australia Fourth
Europe Sixth
Australia Seventh
Europe  Eight
America Last 
```

输出：

```
Europe FirstAsia SecondAfrica ThirdAustralia Fourth
Europe SixthAustralia Seventh
Europe  EightAmerica Last 
```

模式是“欧洲”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:27:14.997

```
perl -i -0777pe's/\n(?!Europe|\z)/ /g' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:30:36.847

只需`chomp`每一行和`print`它，如果它以模式开头，则在它前面加上一个额外的换行符

```
perl -ne 'chomp; print "\n"  if /^Europe/; print' myfile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T21:33:37.110

这可能对您有用（GNU sed）：

```
sed ':a;$!N;/\nEurope/!s/\n//;ta;P;D' file 
```

# php - 将订阅者添加到 dotmailer 通讯簿

> ID：12319959
> 
> 赞同：1
> 
> 时间：2012-09-07T14:20:07.627
> 
> 标签：php, nusoap

我在使用 nusoap 将订阅者添加到 dotmailer 中的特定地址簿时遇到问题。我使用[CreateContact](http://www.dotmailer.co.uk/api/contacts/create_contact.aspx)方法向所有联系人添加通用订阅者没有问题，但是当我尝试使用[AddContactToAddressbook](http://www.dotmailer.co.uk/api/address_books/add_contact_to_address_book.aspx)方法时，我就是不工作。底部使用的 if 语句返回成功，但`$result`变量中不存在任何内容。

```
<?php
function subscribe($email, &$result)
{
    global $postURL, $username, $password;

    $addressBookId = "######";
    $contact = array("Email" => $email, "EmailType" => "Html");
    $params = array("username" => $username, "password" => $password, "contact" => $contact, "addressbookId" => $addressBookId);

    $client = new soapclient($postURL, true);
    $error = $client->getError();
    $result = $client->call('AddContactToAddressbook', $params);

    if($client->fault) {
        $rv = false;
    } else {
        // Check for errors
        if($error) {
            $rv = false;
        } else {
            $rv = true;
        }
    }
    return $rv;
}

if(subscribe("test@test.com", $result)) {
    echo "success<br />";
    print_r($result);
} else {
    echo "failed<br />";
}
?> 
```

此代码按原样工作，仅更改

`$result = $client->call('AddContactToAddressbook', $params);` 到

`$result = $client->call('CreateContact', $params);`

但是订阅者不在任何特定列表中。有谁知道我可能做错了什么。

ps`$addressBookId`变量已被有意清除，我没有尝试使用 '######' 作为值来运行它，以防您想知道。并且一旦在生产中，该`$result`变量将不会随函数返回。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:28:54.723

采用

`$result = $client->call('AddContactToAddressBook', $params);`

`B`账面资本

# git - 远程分支未显示在“git branch -r”中

> ID：12319968
> 
> 赞同：172
> 
> 时间：2012-09-07T14:20:45.340
> 
> 标签：git

我一直在推送到远程 Bitbucket 存储库，最近一位同事将他创建的新分支推送到了同一个存储库。

我正在尝试获取他上传的更改。

```
 $ git branch -a
 * master
 localbranch1
 localbranch2
 remotes/origin/master 
```

> $ git 分支 -r 原点/主

在 Bitbucket 的 Web UI 中，我可以看到他创建的分支。我怎样才能做到这一点？

下次尝试：

```
$ git fetch bitbucket
Password for 'https://xxxxx@bitbucket.org':
From https://bitbucket.org/user/repo
 * branch            HEAD       -> FETCH_HEAD 
```

如果他创建的分支名为**new_branch_b**我应该期待看到以下内容吗？

```
$ git branch -r
origin/master
origin/new_branch_b 
```

第三次尝试：

```
$ git remote update
Fetching bitbucket
Password for 'https://xxxxx@bitbucket.org':
From https://bitbucket.org/user/repo
 * branch            HEAD       -> FETCH_HEAD

$ git branch -r
  origin/master 
```

第四次尝试：

```
[remote "bitbucket"]
url = https://user@bitbucket.org/user/repo.git 
```

我打电话给遥控器`bitbucket`而不是起源（至少这是我记得的；我前一阵子设置的）

第五次尝试：

我根据[kan 的回答](https://stackoverflow.com/questions/12319968/remote-branch-is-not-showing-up-in-git-branch-r/12320930#12320930)更新了 Bitbucket 远程配置：

> $ git配置-e

```
[remote "bitbucket"]
    url = https://user@bitbucket.org/user/repo.git
    fetch = +refs/heads/*:refs/remotes/bitbucket/* 
```

对于大多数人来说，它将被称为起源：

```
[remote "origin"]
    url = https://user@bitbucket.org/user/repo.git
    fetch = +refs/heads/*:refs/remotes/origin/* 
```

然后，

```
$ git remote update

Fetching bitbucket
Password for 'https://user@bitbucket.org':
remote: Counting objects: 48, done.
remote: Compressing objects: 100% (32/32), done.
remote: Total 35 (delta 21), reused 0 (delta 0)
Unpacking objects: 100% (35/35), done.
From https://bitbucket.org/user/repo
 * [new branch]      branch_name1 -> origin/branch_name1
 * [new branch]      branch_name2    -> origin/branch_name2 
```

.... 等等。

我认为`git fetch origin`也适用于`git remote update`.

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2012-09-07T14:40:14.950

如果您还没有这样做，请更新您的遥控器：

```
$ git remote update
$ git branch -r 
```

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2012-09-07T15:17:10.397

该`remote`部分还指定了获取规则。您可以在其中添加类似的内容以从远程获取所有分支：

```
fetch = +refs/heads/*:refs/remotes/origin/* 
```

（或替换`origin`为`bitbucket`。）

请在此处阅读：*[10.5 Git Internals - The Refspec](https://git-scm.com/book/en/v2/Git-Internals-The-Refspec)*

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2017-07-26T09:08:24.753

如果使用`--depth`参数克隆，它设置`.git/config`为不获取所有分支，而只获取 master。

您可以简单地省略参数或更新配置文件

```
fetch = +refs/heads/master:refs/remotes/origin/master 
```

到

```
fetch = +refs/heads/*:refs/remotes/origin/* 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-04-15T07:43:49.230

我遇到过同样的问题。似乎最简单的解决方案是删除遥控器，读取它并获取。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-01-07T13:21:45.427

不幸的是，如果您还*没有*执行“git fetch”，请不要向您显示所有远程`git branch -a`分支`git branch -r`。

 *`git remote show origin`始终如一地工作。还`git show-ref`显示 Git 存储库中的所有引用。但是，它就像`git branch`命令一样工作。*

# python - 当第一列是字符串而其余列是数字时，如何使用 numpy.genfromtxt？

> ID：12319969
> 
> 赞同：69
> 
> 时间：2012-09-07T14:20:47.993
> 
> 标签：python, numpy

基本上，我有一堆数据，其中第一列是字符串（标签），其余列是数值。我运行以下命令：

```
data = numpy.genfromtxt('data.txt', delimiter = ',') 
```

这可以很好地读取大部分数据，但标签列只是得到“nan”。我该如何处理？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-07T14:47:06.350

默认情况下，`np.genfromtxt`使用`dtype=float`: 这就是将字符串列转换为 NaN 的原因，因为毕竟它们不是数字......

您可以要求`np.genfromtxt`尝试使用以下方法猜测列的实际类型`dtype=None`：

```
>>> from StringIO import StringIO
>>> test = "a,1,2\nb,3,4"
>>> a = np.genfromtxt(StringIO(test), delimiter=",", dtype=None)
>>> print a
array([('a',1,2),('b',3,4)], dtype=[('f0', '|S1'),('f1', '<i8'),('f2', '<i8')]) 
```

您可以使用它们的名称访问列，例如`a['f0']`...

`dtype=None`如果你不知道你的列应该是什么，那么使用是一个很好的技巧。如果你已经知道它们应该有什么类型，你可以给出一个明确的`dtype`. 例如，在我们的测试中，我们知道第一列是字符串，第二列是 int，我们希望第三列是浮点数。然后我们将使用

```
>>> np.genfromtxt(StringIO(test), delimiter=",", dtype=("|S10", int, float))
array([('a', 1, 2.0), ('b', 3, 4.0)], 
      dtype=[('f0', '|S10'), ('f1', '<i8'), ('f2', '<f8')]) 
```

使用显式`dtype`比使用更有效，`dtype=None`并且是推荐的方式。

在这两种情况下（`dtype=None`或显式的、非同质的`dtype`），您最终都会得到一个结构化数组。

[注意：使用`dtype=None`，输入被第二次解析，每列的类型被更新以匹配可能的更大类型：首先我们尝试一个 bool，然后是一个 int，然后是一个浮点数，然后是一个复数，然后我们保留一个字符串如果一切都失败了。实际上，实现相当笨拙。有一些尝试使类型猜测更有效（使用正则表达式），但到目前为止没有任何问题]

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-09-07T15:11:33.553

如果您的数据文件是这样的结构

```
col1, col2, col3
   1,    2,    3
  10,   20,   30
 100,  200,  300 
```

然后可以使用该选项`numpy.genfromtxt`将第一行解释为列标题。`names=True`有了这个，您可以通过提供列标题非常方便地访问数据：

```
data = np.genfromtxt('data.txt', delimiter=',', names=True)
print data['col1']    # array([   1.,   10.,  100.])
print data['col2']    # array([   2.,   20.,  200.])
print data['col3']    # array([   3.,   30.,  300.]) 
```

因为在你的情况下，数据是这样形成的

```
row1,   1,  10, 100
row2,   2,  20, 200
row3,   3,  30, 300 
```

您可以使用以下代码片段实现类似的功能：

```
labels = np.genfromtxt('data.txt', delimiter=',', usecols=0, dtype=str)
raw_data = np.genfromtxt('data.txt', delimiter=',')[:,1:]
data = {label: row for label, row in zip(labels, raw_data)} 
```

第一行将第一列（标签）读入字符串数组。第二行从文件中读取所有数据，但丢弃第一列。第三行使用字典理解来创建一个字典，该字典的使用非常类似于使用选项`numpy.genfromtxt`创建的结构化数组：`names=True`

```
print data['row1']    # array([   1.,   10.,  100.])
print data['row2']    # array([   2.,   20.,  200.])
print data['row3']    # array([   3.,   30.,  300.]) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-06-02T06:40:00.507

`data=np.genfromtxt(csv_file, delimiter=',', dtype='unicode')`

这对我来说可以。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-10T18:39:30.207

对于这种格式的数据集：

```
CONFIG000   1080.65 1080.87 1068.76 1083.52 1084.96 1080.31 1081.75 1079.98
CONFIG001   414.6   421.76  418.93  415.53  415.23  416.12  420.54  415.42
CONFIG010   1091.43 1079.2  1086.61 1086.58 1091.14 1080.58 1076.64 1083.67
CONFIG011   391.31  392.96  391.24  392.21  391.94  392.18  391.96  391.66
CONFIG100   1067.08 1062.1  1061.02 1068.24 1066.74 1052.38 1062.31 1064.28
CONFIG101   371.63  378.36  370.36  371.74  370.67  376.24  378.15  371.56
CONFIG110   1060.88 1072.13 1076.01 1069.52 1069.04 1068.72 1064.79 1066.66
CONFIG111   350.08  350.69  352.1   350.19  352.28  353.46  351.83  350.94 
```

此代码适用于我的应用程序：

```
def ShowData(data, names):
    i = 0
    while i < data.shape[0]:
        print(names[i] + ": ")
        j = 0
        while j < data.shape[1]:
            print(data[i][j])
            j += 1
        print("")
        i += 1

def Main():
    print("The sample data is: ")
    fname = 'ANOVA.csv'
    csv = numpy.genfromtxt(fname, dtype=str, delimiter=",")
    num_rows = csv.shape[0]
    num_cols = csv.shape[1]
    names = csv[:,0]
    data = numpy.genfromtxt(fname, usecols = range(1,num_cols), delimiter=",")
    print(names)
    print(str(num_rows) + "x" + str(num_cols))
    print(data)
    ShowData(data, names) 
```

Python-2 输出：

```
The sample data is:
['CONFIG000' 'CONFIG001' 'CONFIG010' 'CONFIG011' 'CONFIG100' 'CONFIG101'
 'CONFIG110' 'CONFIG111']
8x9
[[ 1080.65  1080.87  1068.76  1083.52  1084.96  1080.31  1081.75  1079.98]
 [  414.6    421.76   418.93   415.53   415.23   416.12   420.54   415.42]
 [ 1091.43  1079.2   1086.61  1086.58  1091.14  1080.58  1076.64  1083.67]
 [  391.31   392.96   391.24   392.21   391.94   392.18   391.96   391.66]
 [ 1067.08  1062.1   1061.02  1068.24  1066.74  1052.38  1062.31  1064.28]
 [  371.63   378.36   370.36   371.74   370.67   376.24   378.15   371.56]
 [ 1060.88  1072.13  1076.01  1069.52  1069.04  1068.72  1064.79  1066.66]
 [  350.08   350.69   352.1    350.19   352.28   353.46   351.83   350.94]]
CONFIG000:
1080.65
1080.87
1068.76
1083.52
1084.96
1080.31
1081.75
1079.98

CONFIG001:
414.6
421.76
418.93
415.53
415.23
416.12
420.54
415.42

CONFIG010:
1091.43
1079.2
1086.61
1086.58
1091.14
1080.58
1076.64
1083.67

CONFIG011:
391.31
392.96
391.24
392.21
391.94
392.18
391.96
391.66

CONFIG100:
1067.08
1062.1
1061.02
1068.24
1066.74
1052.38
1062.31
1064.28

CONFIG101:
371.63
378.36
370.36
371.74
370.67
376.24
378.15
371.56

CONFIG110:
1060.88
1072.13
1076.01
1069.52
1069.04
1068.72
1064.79
1066.66

CONFIG111:
350.08
350.69
352.1
350.19
352.28
353.46
351.83
350.94 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-11T16:47:43.953

您可以使用`numpy.recfromcsv(filename)`：将自动确定每列的类型（就像您使用`np.genfromtxt()`with一样`dtype=None`），并且默认为`delimiter=","`. 这基本上是`np.genfromtxt(filename, delimiter=",", dtype=None)`Pierre GM 在他的回答中指出的捷径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-06T15:13:09.940

这是一个从头到尾的工作示例：

如果我想从没有第一行的文件中导入数字：

```
 I like trains #this is the first line, a string

1 \t 2 \t 3   #\t is to signify that the delimeter (separation) is tab and not komma  

4 \t 5 \t 6 
```

然后运行以下代码：

```
import numpy as np              #contains genfromtxt
import matplotlib.pyplot as plt #enables plots 
from pathlib import Path        # easier using path instead of writing it again and again when you have many files in the same folder
path = r'some_path'             #location of your file in your computer like r'C:my comp\folder\folder2' r is there to make the win 10 path readable in python, it means "just text"
fileNames = [r'\I like trains.txt',
             r'\die potato.txt']

data=np.genfromtxt(path + fileNames[0], delimiter='\t', skip_header=1) 
```

产生这个结果：

```
data = [1 2 3
        4 5 6] 
```

每个号码都有自己的单元格，可以单独到达

# c# - 需要：.Net 帮助程序来处理 url 路径

> ID：12319972
> 
> 赞同：0
> 
> 时间：2012-09-07T14:20:59.447
> 
> 标签：c#, asp.net, .net

我需要对看起来像这样的网址做一些工作：

```
https://www.myurl.com/deep/path/file.rdp?q=true 
```

我需要将其更改为：

```
https://www.myurl.com/deep/z.asmx 
```

路径可以更深。

当我处理用于`System.IO.Path`修改的文件时。

有没有一种很好的方法可以在不进行大量字符串操作的情况下使用 url 路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T14:24:03.047

```
var uri = new Uri("https://www.myurl.com/deep/path/file.rdp?q=true");
var parts = uri.Segments; 
```

部分将是`/` `deep/` `path/` `file.rdp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:56:58.763

```
string sResult = 
    Regex.Replace("http://site.com/page1.php?par=true", @"(?<=/)[^/]*$", "z.asmx"); 
```

正则表达式`"(?<=/)[^/]*$"`被称为“find *page1.php?par=true* ”，然后该方法`Regex.Replace`将找到的部分替换为“z.asmx”。

您也可以`strToModify.Split('/').Last();`用于查找最后一部分。

# javascript - 在 JW Player 的 flash 模式下加载视频时如何删除视频的缩略图？

> ID：12319979
> 
> 赞同：0
> 
> 时间：2012-09-07T14:21:21.243
> 
> 标签：javascript, flash, html5-video, jwplayer

我正在尝试为 JW Player (5.10) 加载的视频项目实现类似“重置”的功能。

当项目首先显示时，我将它的“海报”和“src”属性存储在某种缓存中。当调用 'reset' 事件处理程序时，它会检索此数据 - 并调用 JW Player 的 JavaScript API`load`方法：

```
var contentElement = retrieveCachedData('video', contentId);
// now contentElement looks like this:
// { 
//   file:   '/path/to/videos/video.mp4',
//   image:  '/path/to/images/video_thumbnail.jpg'
// } 
jwplayer(contentId).load(contentElement); 
```

`image`当财产确实存在时，一切正常；`edit`顺便说一句，对视频使用相同的方法。正确的海报和视频以 HTML5 和后备 Flash 模式显示。

但不知何故，当我尝试*删除*海报图像时，事情并不那么乐观，将一个空字符串分配给`image`of 的属性`contentElement`（或完全删除此属性）。

它在 HTML5 模式下仍然很好用（当视频停止时，显示黑屏而不是海报图片）。但在 Flash 模式下，视频的现有海报只是停留在那里，因为什么都没有发生。

有人知道如何应对吗？我已经考虑过提供一些已经制作的“空白屏幕”URL 作为`image`值。但是，坦率地说，这很荒谬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:57:13.063

您可以调用`setup`您的播放器而不是`load`. 这似乎可以解决问题。

在此[示例](http://jsfiddle.net/jbalsas/RDbvs/1/)中，您可以看到视频结束后，我们如何强制执行没有图像属性的新设置，并且屏幕会删除旧图像预览并保持黑色。

# c# - 导航导致内存不足异常

> ID：12319981
> 
> 赞同：0
> 
> 时间：2012-09-07T14:21:35.507
> 
> 标签：c#, windows-phone-7

我正在开发一个至少有 60 个不同页面的 Windows 手机应用程序（真的很大），在某些导航上我得到一个“内存不足错误”。这通常发生在最后一页（在导航流程上）。我`NavigationService.navigate("MyURL");`用来移动到下一页并`NavigationService.goback();`导航到之前的页面，这种导航有什么更好的方法吗？

如果不够清楚，请告诉我（英语不是我的第一语言）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:33:08.340

对于这个问题，几周后我创建了一个导航管理器并开始删除不需要的返回堆栈以减少问题，之后对图片视图类进行了一些编辑，而不是允许用户旋转图片和所有内容，只是出示图片，到目前为止还没有看到那个错误

# servlets - 创建新节点的小部件对话框 - Adob e CQ5

> ID：12319982
> 
> 赞同：0
> 
> 时间：2012-09-07T14:21:37.627
> 
> 标签：servlets, widget, aem

我正在尝试为请求各种详细信息的页面创建一个编辑小部件，然后将这些详细信息存储为新创建节点的属性。

例如：制作模型里程

我想将它们存储为 /content/cars 或类似的父节点下的节点。

如何获取小部件以在 /content/cars 下创建新节点并将这些属性存储在那里？

我是否必须将数据发送到我创建的 servlet？还是有启用此功能的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T17:12:55.657

您可能想要做的是在包含页面中您希望创建节点的路径中包含一个组件。

例如，如果您有一个页面 /content/cars，并且您想在 /content/cars/jcr:content/chevy 下创建一个 Chevy 节点，您可以在该片段中包含该组件：

`<cq:include path="chevy" resourceType="myapp/components/manufacturer" />`

这将包括内容并呈现它，并允许使用位于 /apps/myapp/components/manufacturer 的组件对其进行编辑。

如果您愿意，您甚至可以让节点位于绝对路径，例如，如果您想在另一个页面上引用 /content/data/cars/chevy 的内容，您可以使用：

`<cq:include path="/content/data/cars/chevy" resourceType="myapp/components/manufacturer" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:46:25.897

根据 Adob​​e 提供的备忘单：

[http://dev.day.com/content/ddc/blog/2008/07/cheatsheet/_jcr_content/par/download/file.res/cheatsheet.pdf](http://dev.day.com/content/ddc/blog/2008/07/cheatsheet/_jcr_content/par/download/file.res/cheatsheet.pdf)

默认的 Sling POST servlet 通过检查 ExtJS 对话框中包含的输入标记的“名称”属性来识别要更新的 JCR 属性。要配置像文本字段或下拉字段这样的小部件以定位和更新特定属性，您需要在小部件定义中指定属性的名称。

例如，如果您使用 XML 文件在 /content/cars 定义您的页面对话框，并且您希望有允许用户将模型、品牌和年份存储到汽车页面的 jcr:content 节点的小部件。您的关联对话框定义将包含如下所示的节点：

```
<make
    jcr:primaryType="cq:Widget"
    xtype="textfield"
    name="./make"/>
<model
    jcr:primaryType="cq:Widget"
    xtype="textfield"
    name="./model"/>
<year
    jcr:primaryType="cq:Widget"
    xtype="textfield"
    name="./year"/> 
```

要更改小部件类型，您将调整**xtype**属性并将属性更改为 target，您将调整**name**属性。请注意，它与正在调用对话框的页面/组件的内容节点是相对的（在这种情况下，与 /content/cars/jcr:content 相对）。

另一个例子：假设你想将 make 的值存储到像 /content/cars/jcr:content/brands 这样的节点上名为 'make' 的属性中，那么你的定义将如下所示：

```
<make
    jcr:primaryType="cq:Widget"
    xtype="textfield"
    name="./brands/make"/> 
```

有关可用 xtypes 的参考，请查看： [http ://dev.day.com/docs/en/cq/current/widgets-api/index.html](http://dev.day.com/docs/en/cq/current/widgets-api/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T10:15:10.703

尝试这个 ：

将此js函数添加到您的页面

```
function doOpenDlg(url, path) {
    var d = CQ.WCM.getDialog(url);
    var reloadPage = true;
    if(d) {
        if( reloadPage ) {
            d.success = function(form, action) {
                CQ.Util.reload(CQ.WCM.getContentWindow());
            };
        }
        d.show();
        d.loadContent(path);
    }
} 
```

然后创建一个类似文件的对话框。在这个例子中：

/apps/myapp/components/page/mypage/myxmlfile.xml

然后您可以打开一个与此文件匹配的对话框：

```
 <input type="button" value="Open my dialog" style="font-size: 14px;font-weight: bold;"
           onclick="doOpenDlg('/apps/myapp/components/page/mypage/myxmlfile.infinity.json', '<%=currentNode.getPath() %>');" /> 
```

这样，您的对话数据将保存在 currentNode 中，但您可以放置​​任何您想要的路径。

# ruby-on-rails - 重构 Rails 路由以通过测试

> ID：12319986
> 
> 赞同：0
> 
> 时间：2012-09-07T14:21:54.990
> 
> 标签：ruby-on-rails, testing, refactoring

我不能让它通过：

```
 %w[home help about contact].each do |page|
    get :controller => 'static_pages', :action => page
  end 
```

我试图重构这段代码：

```
 get 'static_pages/home'
  get 'static_pages/help'
  get 'static_pages/about'
  get 'static_pages/contact' 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:20:15.493

```
static_pages = %w(home help about contact).map {|p| p.to_sym}

resources :static_pages, only: static_pages do
  static_pages.each do |page|
    get page, on: :collection
  end
end 
```

使成为

```
$ rake routes
   home_static_pages GET /static_pages/home(.:format)       static_pages#home
   help_static_pages GET /static_pages/help(.:format)       static_pages#help
   about_static_pages GET /static_pages/about(.:format)     static_pages#about
   contact_static_pages GET /static_pages/contact(.:format) static_pages#contact 
```

用于`only: static_pages`不生成 CRUD 路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T05:33:14.037

我想如果你不喜欢以下的[原始代码](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/config/routes.rb)：

```
root to: 'static_pages#home'

match '/help',    to: 'static_pages#help'
match '/about',   to: 'static_pages#about'
match '/contact', to: 'static_pages#contact' 
```

并且您想获得相同的路线，可以使用简单的循环，例如：

```
root to: 'static_pages#home'

%w(help about contact).each do |page|
   get "#{page}" => "static_pages##{page}"
end 
```

不过，对我来说，这似乎还不足以证明它的合理性。

### 编辑

要修复代码中的错误，请使用：

```
%w(home help about contact).each do |page|
  get "/#{page}", :controller => 'static_pages', :action => page
end 
```

检查[api 以`match`](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Base.html#method-i-match)获取`get`.

# biztalk - 文档规范名称？

> ID：12319987
> 
> 赞同：5
> 
> 时间：2012-09-07T14:21:58.283
> 
> 标签：biztalk

我一直在寻找一个多小时，我放弃了。在**XML 反汇编组件**上，有一个`DocumentSpecNames`属性。我找不到关于放在那里的有用文档。它像目标命名空间吗？它是什么？一个例子会有所帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T14:32:31.873

[`DocumentSpecNames`](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.component.xmldasmcomp.documentspecnames%28v=bts.10%29)用于根据特定模式 ( [`SchemaList`](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.component.utilities.schemalist%28v=bts.10%29)) 验证消息。如果您想在处理管道中的给定消息之前确保严格接受消息传递，这很有用。请参阅[相关博文](http://bergdaniel.se/validating-data-types-in-a-biztalk-receive-location)。

属性值应该是程序集的名称和类名（*来自上面的链接*）。

> DBLOG.ValidateMessage.IntegerSchema，DBLOG.ValidateMessage，版本=1.0.0.0，文化=中性，PublicKeyToken=349a4171d9432c58

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-31T08:19:27.910

文档命名空间是“名称”、“程序集”的组合

第1步。要找到它，您需要转到 BizTalk 管理控制台，然后导航到您已部署架构 Dll 的应用程序。

第2步。双击您想要文档规范名称的架构；您将在窗口左侧找到“常规”选项卡。

步骤 3。在此常规选项卡上，将定义“名称”、“程序集”和“类型”，现在获取文档规范名称 - 复制“名称”并将其粘贴到记事本，后跟逗号和空格。

前任。名称-“Microsoft.EAI.SAP.Schema.PurchaseOrder”程序集-“Microsoft.EAI.SAP.Schema，版本=1.0.0.0，文化=中性，PublicKeyToken=078b35dbd180a45k”

因此，正如我上面定义的那样，文档规格名称将是-

文档名称-“Microsoft.EAI.SAP.Schema.PurchaseOrder, Microsoft.EAI.SAP.Schema, Version=1.0.0.0, Culture=neutral, PublicKeyToken=078b35dbd180a45k”

希望这能消除您的疑问:)

问候马扬克

# javascript - 如何使用 Wordpress 的 REST Api 访问本地主机上的数据？

> ID：12319988
> 
> 赞同：0
> 
> 时间：2012-09-07T14:22:00.670
> 
> 标签：javascript, wordpress, rest, jquery

我一直在本地主机上编写 wordpress 博客，我需要使用 wordpress 的 REST Api 进行概念验证——如何从本地主机上请求数据？我找不到太多关于如何使用 REST Api 的文档，有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T23:43:34.873

实际上，使用 Jetpack，只要您的自托管 WordPress 使用 Jetpack 激活，您现在就可以访问 REST API ；) 现在正在使用它。[http://developer.wordpress.com/2012/10/26/using-the-rest-api-with-wordpress-org-self-hosted-sites-via-jetpack/](http://developer.wordpress.com/2012/10/26/using-the-rest-api-with-wordpress-org-self-hosted-sites-via-jetpack/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:18:47.840

使用 Wordpress 的 REST API 无法做到这一点，因为它仅适用于 Wordpress 域上的博客。但是，有几个由其他用户创建的 Wordpress 博客插件，您可以在本地安装这些插件，并使用这些插件通过 REST API 调用访问您的数据。

# apache - mod_rewrite 似乎忽略了 [L] 标志

> ID：12319991
> 
> 赞同：2
> 
> 时间：2012-09-07T14:22:08.737
> 
> 标签：apache, mod-rewrite

我正在尝试在 中使用该`[L]`标志`RewriteRule`，但它似乎不起作用。如果您调用该页面，我希望这样：

```
www.domain.com/admin/

```

它会将您重定向到：

```
www.domain.com/backend.php

```

否则，如果您调用任何其他页面（某些页面除外），它会重定向到：

```
www.domain.com/index.php

```

这是我到目前为止所拥有的：

```
RewriteEngine on

RewriteRule ^admin/(.*) /backend.php/$1 [L]

RewriteCond $1 !^(index\.php|admin|assets|images|uploads|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

如果我只使用第一条规则，它可以工作（但显然不会将其他页面重定向到 index.php）。如果我添加第二条规则，服务器似乎忽略了第一条规则（我认为它被第二条规则“覆盖”，即使我添加了`[L]`标志）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T14:40:25.777

这不是`L`工作方式。重写引擎将不断循环遍历所有规则，直到进入引擎的 URI 与出来的​​ URI 相同。`L`只是告诉重写引擎停止在*当前循环迭代中*应用规则。所以说你有：

```
RewriteRule ^(.*)$ /foo/$1 [L]
RewriteRule ^(.*)$ /bar/$1 [L] 
```

在 1 次迭代后，给定 URI `/blah`，我得到，`/foo/blah`因为它在第一条规则之后停止重写（但仍将继续循环）。如果我删除`L`：

```
RewriteRule ^(.*)$ /foo/$1
RewriteRule ^(.*)$ /bar/$1 
```

1 次迭代后，给定 URI `/blah`，我得到`/bar/foo/blah`. 两个规则都被应用，一个接一个，因为`L`没有阻止它。

您需要在第二个规则中添加一个条件以防止它重写第一个规则，其中任何一个都可以：

```
RewriteCond $1 !^(backend\.php|index\.php|admin|assets|images|uploads|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

或者：

```
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteCond $1 !^(index\.php|admin|assets|images|uploads|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:28:28.350

你的第二条规则很奇怪。我不知道您通过将`$1`您检查条件的值作为值来尝试做什么。它应该看起来像这样：

```
RewriteEngine on

RewriteRule ^admin/(.*) /backend.php/$1 [L]

RewriteCond %{REQUEST_FILENAME} !^(index\.php|admin|assets|images|uploads|robots\.txt|backend\.php)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

注意我还为`backend.php`

# ruby-on-rails - 它 {should_not be_valid} 和 @user.should_not 有效

> ID：12319992
> 
> 赞同：0
> 
> 时间：2012-09-07T14:22:18.597
> 
> 标签：ruby-on-rails, ruby, rspec

我正在学习 rails 和 rspec，并且不要理解这两个代码之间的区别：

在我的 spec/models/user_spec.rb 我有：

```
describe User do$
  before { @user = User.new(name: "Example User", email: "user@example.com") }
  subject {@user} 
```

现在我检查名称格式：

```
describe "when name has wrong format" do
  it "should not be valid" do    
    names = %w[%marcin ??? 123 ___123 ___] 
    names.each do |invalid_name|   
      @user.name = invalid_name      
      it{should_not be_valid}        
    end
  end
end 
```

它不起作用，但是当我使用它`@user.should_not be_valid`而不是`it{should_not be_valid}`它时，它可以正常工作，我不明白为什么我有`subject {@user}`，所以我认为`it {should` 意味着相同`@user.should`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T15:15:00.257

```
describe User do
  subject do
    User.new(name: name, email: "user@example.com")
  end

  describe "#name" do  
    context "Just Numbers" do
      let(:name) { "123" }
      it { should_not be_valid }
    end
  end
end 
```

# blackberry - BrowserField 和失去连接

> ID：12319999
> 
> 赞同：2
> 
> 时间：2012-09-07T14:23:01.237
> 
> 标签：blackberry, browserfield

我有一个使用浏览器字段连接到网页的应用程序。一切正常，模拟器显示正确的页面。

如果我将模拟器网络属性设置为“超出范围”并单击网页中的链接，那么我会得到一个异常 - 在 BrowserFieldConnectionManagerImpl

如何捕获此异常以便我可以采取适当的措施？

该应用程序正在使用 BlackBerry SDK

代码在这里：

公共最终类 example_Screen 扩展 MainScreen {

```
// Create the ErrorHandler class
public class MyBrowserFieldErrorHandler extends BrowserFieldErrorHandler {
    protected MyBrowserFieldErrorHandler(BrowserField browserField){
        super(browserField);
    }

    public void displayContentError(String url, String errorMessage) {
        System.out.println("JERRY: displayContentError" + url);
        System.out.println("JERRY: displayContentError" + errorMessage);
    }

    public void displayContentError(String url, InputConnection connection, Throwable t) {
        displayContentError(url, t.getMessage());
    }

    public void navigationRequestError(BrowserFieldRequest request, Throwable t) {
        displayContentError(request.getURL(), t.getMessage());
    }

    public void requestContentError(BrowserFieldRequest request, Throwable t) {
        displayContentError(request.getURL(), t.getMessage());
    }

    public InputConnection resourceRequestError(BrowserFieldRequest request, Throwable t) {
        displayContentError(request.getURL(), t.getMessage());
        InputConnection connection = null;
        return connection;
    }   

}

/**
 * Creates a new example_Screen object
 */
public example_Screen() {

    GIFEncodedImage ourAnimation = (GIFEncodedImage) GIFEncodedImage.getEncodedImageResource("2.gif");       

    AnimatedGIFField _ourAnimation = new AnimatedGIFField(ourAnimation, Field.FIELD_HCENTER + Field.FIELD_VCENTER);
    this.add(_ourAnimation);
    LabelField _ourLabelField = new LabelField("Updating ...", Field.FIELD_HCENTER + Field.FIELD_VCENTER);
    this.add(_ourLabelField);                   

    int anim_ht = _ourAnimation.getPreferredHeight();
    int label_ht = _ourLabelField.getPreferredHeight();

    EncodedImage ei = EncodedImage.getEncodedImageResource("img/menu.png");       

    int currentWidthFixed32 = Fixed32.toFP(ei.getWidth());
    int currentHeightFixed32 = Fixed32.toFP(ei.getHeight());

    int displayWidthFixed32 = Fixed32.toFP(Display.getWidth());
    int displayHeightFixed32 = Fixed32.toFP((Display.getHeight() - anim_ht - label_ht));

    int scaleXFixed32 = Fixed32.div(currentWidthFixed32, displayWidthFixed32);
    int scaleYFixed32 = Fixed32.div(currentHeightFixed32, displayHeightFixed32);

    ei = ei.scaleImage32(scaleXFixed32, scaleYFixed32);

    BitmapField bmp = new BitmapField(ei.getBitmap(), Field.FIELD_HCENTER + Field.FIELD_VCENTER);
    add(bmp);      

    BrowserFieldConfig myBrowserFieldConfig = new BrowserFieldConfig();
    myBrowserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE, BrowserFieldConfig.NAVIGATION_MODE_POINTER);       
    BrowserField browserField = new BrowserField(myBrowserFieldConfig);
    add(browserField);

    browserField.requestContent("http://www.bbc.co.uk");

    BrowserFieldListener listener = new BrowserFieldListener() {
        public void documentAborted(BrowserField browserField, Document document) {
            System.out.println("JERRY: documentAborted");
        }

        public void documentCreated(BrowserField browserField, ScriptEngine scriptEngine, Document document) {
            System.out.println("JERRY: documentCreated");
        }

        public void documentError(BrowserField browserField, Document document) {
            System.out.println("JERRY: documentError");
        }

        public void documentLoaded(BrowserField browserField, Document document) {
            System.out.println("JERRY: documentLoaded");  

            Node node = document.getFirstChild();
            String nodeText = node.getTextContent();            
            int index = -1;
            if (nodeText != null) {             
                String errorText = "Error requesting content for:";                 
                index = nodeText.indexOf(errorText); 
            }

            Screen screen = browserField.getScreen();   
            try {
                synchronized (Application.getEventLock()) {
                    if (index == -1) {
                        System.out.println("JERRY: documentLoaded: no error");
                        int count = screen.getFieldCount();
                        if (count > 1) {
                            screen.deleteRange(0, (count-1));  
                            System.out.println("JERRY: documentLoaded: " + (count-1) + " fields deleted");
                        } else {
                            System.out.println("JERRY: documentLoaded: only 1 field so none deleted");
                        }
                    } else {
                        System.out.println("JERRY: documentLoaded: error");
                    }
                }
            } catch (final Exception ex) {
                System.out.println("example_Screen: documentLoaded: exception caught: " + ex.toString());
            }               

        }

        public void documentUnloading(BrowserField browserField, Document document) {
            System.out.println("JERRY: documentUnloading");
        }

        public void downloadProgress(BrowserField browserField, ContentReadEvent event) {
            System.out.println("JERRY: downloadProgress");
        }

    };
    browserField.addListener(listener);

    // Attach the Error Handler to the BrowserField
    BrowserFieldErrorHandler eHandler = new MyBrowserFieldErrorHandler(browserField);
    browserField.getConfig().setProperty(BrowserFieldConfig.ERROR_HANDLER, eHandler);

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:16:40.320

`BrowserField`包含一个方法[addListener()](http://tinyurl.com/9a3wafa)，它引用[BrowserFieldListener](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/browser/field2/BrowserFieldListener.html)实现。

扩展`BrowserFieldListener`和处理方法`documentError()`和`documentAborted()`此实现中的错误。

然后添加您的类实例的引用，该引用`BrowserFieldListener`通过 延伸到您的浏览器字段`browserField.addListener(browserFieldListener);`。

**编辑：**

如果这不起作用，则使用RIM API 中的[BrowserFieldErrorHandler](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/browser/field2/BrowserFieldErrorHandler.html)类。构建您自己的错误处理程序并将其实例传递给浏览器字段配置。

下面是示例代码：

```
// Create the ErrorHandler class
public class MyBrowserFieldErrorHandler extends BrowserFieldErrorHandler {
  public void displayContentError(String url, String errorMessage) {
    String error = "Error: (url=" + url + "): " + t.getMessage();
    Dialog.ask(Dialog.D_OK, error);
    logMessage(“BrowserFieldError: “ + error );
  }

 public void displayContentError(String url, InputConnection connection, Throwable t) { 
    displayContentError(url, t.getMessage());
 }

 public void requestContentError(BrowserFieldRequest request, Throwable t){
  displayContentError(request.getURL(), t.getMessage());
 }
}

// Attach the Error Handler to the BrowserField
BrowserFieldErrorHandler eHandler = new MyBrowserFieldErrorHandler();
browserField.getConfig().setProperty(BrowserFieldConfig.ERROR_HANDLER,eHandler); 
```

我从浏览器字段功能的 DevCon2010 演示中获得了这个示例代码。你可以在这里得到它：http: [//dev.tuyennguyen.ca/wp-content/uploads/2011/02/DEV49.pdf](http://dev.tuyennguyen.ca/wp-content/uploads/2011/02/DEV49.pdf)