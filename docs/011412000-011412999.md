# StackOverflow 问答 11412000-11412999

# javascript - 在javascript中隐藏新窗口

> ID：11412007
> 
> 赞同：0
> 
> 时间：2012-07-10T11:08:59.133
> 
> 标签：javascript, windows, browser, hide

是否可以在打开新浏览器窗口之前隐藏它。我打开窗口使用

```
var printwindow = window.open(''); 
```

# php - 加载网页时发现瓶颈？

> ID：11412008
> 
> 赞同：5
> 
> 时间：2012-07-10T11:09:03.317
> 
> 标签：php, linux, apache, webserver

**更新 1：**

在服务器上进行 strace 后，我发现 mmap 的进程占用了该处理时间的 90%。我发现其中一个页面需要一分钟才能加载。

所以我找到了这个链接： [PHP script keep doing mmap/munmap](https://stackoverflow.com/questions/3021799/php-script-keeps-doing-mmap-munmap)

它可能显示相同的问题。但是，我不明白正确禁用 php 错误处理程序意味着什么？

**原始问题：**

在加载由我的服务器提供的特定网页时，如何检查我的 Web 服务器上的瓶颈？

出于某种原因，我网站上的几个页面变得非常缓慢，我不确定缓慢发生在哪里。

Chrome 开发工具的屏幕截图：

[点击这里放大](https://i.stack.imgur.com/wMpLV.png)： ![在此处输入图像描述](../Images/d2e4745de6ce416275f075bfc5bc5c10.png)

所以基本上，我需要找出是什么让这部分加载时间太长？客户端 Web 工具似乎无法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:55:09.990

[Xdebug: Profiling PHP Scripts](http://xdebug.org/docs/profiler) - 注意 KCacheGrind 工具，或者，您可以使用[高级 PHP 调试器](http://sg3.php.net/apd)apd_set_pprof_trace() 函数和 pprofp 来处理生成的数据文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:47:07.553

我建议查看[Xdebug 分析](http://xdebug.org/docs/profiler)。其他两个答案处理客户端加载问题，但如果您的瓶颈是服务器端，则使用这些工具不会变得明显。

您可能还想查看正在运行以提供相关页面的数据库查询。您可能在某处丢失了一个索引，这可以解释最近随着数据库表大小的增长而导致特定页面速度缓慢的原因。

我会提取这些查询并使用 MySQL [EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)运行它们（假设您使用的是 MySQL）以查看那里是否存在缓慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:17:47.060

Derick Rethans（Xdebug 的作者）今天发布了一篇相当不错的文章，名为[PHP 在做什么？](http://derickrethans.nl/what-is-php-doing.html)

它涵盖了您已经完成的 strace，还向您展示了如何使用自定义`.gdbinit`来获取导致问题的实际 php 函数名称。

当然，您必须使用 gdb 从命令行运行脚本，所以我希望您的问题可以通过这种方式重现。

`mmap`用于创建*文件*的内存映射视图。

如果确实是导致它的错误处理程序，我猜您的脚本正在生成很多错误（您正在尝试记录这些错误），可能是循环中未定义索引的通知或其他内容）。

检查日志文件（是否记录了任何内容？），如果没有记录任何内容，请检查日志文件的权限，还要仔细检查您的错误报告级别设置为什么。

`var_dump(ini_get('error_reporting') & E_NOTICE);`- 如果您正在报告通知，则非零。

`error_reporting(E_ALL & ~E_NOTICE);`- 关闭报告通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:17:16.743

使用 Fiddler 或 YSlow Firefox 插件等应用程序将有助于识别网站中加载缓慢的元素。这应该使任何问题变得明显。

[http://fiddler2.com/fiddler2/](http://fiddler2.com/fiddler2/)

[https://addons.mozilla.org/en-US/firefox/addon/yslow/](https://addons.mozilla.org/en-US/firefox/addon/yslow/)

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T13:02:48.400

Chrome 的 Page Speed 也是一个选项：

[https://developers.google.com/speed/docs/insights/using_chrome](https://developers.google.com/speed/docs/insights/using_chrome)

# javascript - Knockout JS 将我的视图模型创建更改为使用映射插件

> ID：11412015
> 
> 赞同：0
> 
> 时间：2012-07-10T11:09:13.080
> 
> 标签：javascript, mapping, knockout.js

我`Knockout.js`对视图模型的创建相对较新并且有一个问题。

我目前正在做的是：

```
viewModel = {

                Menu: ko.observableArray(ko.utils.parseJson(data)),

                editMenu: function (menu) {
                    ko.applyBindings(menu, document.getElementById("MenuCategories"));
                    $("#MenuCategories").bPopup();
                } 
```

有不止一个功能，但尽量保持简短。

我想要做的是使用映射插件，因为我使用的 json 数据包含对象数组，每个对象包含一个数组，并且该数组中的每个对象也包含一个数组。JSON 的样子：

```
[
  {
    "Id": 1,
    "Name": "Test 5",
    "Description": "Testing menu",
    "BeveragesMenu": false,
    "Active": true,
    "Categories": [
      {
        "Id": 1,
        "Name": "Test 1",
        "Active": true,
        "MenuItems": [
        {
          "Id": 1,
          "Name": "Food",
          "Description": "2 Eggs and Bread",
          "Price": 50,
          "DateBased": false,
          "PriceOnRequest": false,
          "DateFrom": null,
          "DateTo": null,
          "Active": true
        }
      ]
    },
    {
      "Id": 2,
      "Name": "Test 2",
      "Active": true,
      "MenuItems": [
        ]
     },
     {
       "Id": 1004,
       "Name": "test",
       "Active": true,
       "MenuItems": [
        ]
     },
     {
       "Id": 1005,
       "Name": "Test 4",
       "Active": true,
       "MenuItems": [
         ]
     }
   ]
 },
 {
   "Id": 92,
   "Name": "Test 4",
   "Description": "",
   "BeveragesMenu": false,
   "Active": false,
   "Categories": [
   {
     "Id": 1006,
     "Name": "Test 1",
     "Active": true,
     "MenuItems": [
     {
       "Name": "Test",
       "Description": "",
       "Price": "",
       "DateBased": false,
       "PriceOnRequest": false
      }
    ]
  }
]
},
{
"Id": 93,
"Name": "Test 6",
"Description": "",
"BeveragesMenu": false,
"Active": false,
"Categories": [

]
},
{
"Id": 94,
"Name": "Test 9",
"Description": "",
"BeveragesMenu": false,
"Active": false,
"Categories": [

]
},
{
  "Id": 95,
  "Name": "Test 20]",
  "Description": "",
  "BeveragesMenu": false,
  "Active": false,
  "Categories": [
  {
    "Id": 4,
    "Name": "Test 6666",
    "Active": true,
    "MenuItems": [

    ]
  }
]
},
{
  "Id": 96,
  "Name": "Test 444",
  "Description": "",
  "BeveragesMenu": false,
  "Active": false,
  "Categories": [
  {
    "Id": 3,
    "Name": "Test 555",
    "Active": true,
    "MenuItems": [

    ]
  },
  {
    "Id": 5,
    "Name": "Test 6666",
    "Active": true,
    "MenuItems": [

    ]
  },
  {
    "Id": 1003,
    "Name": "test 777",
    "Active": true,
    "MenuItems": [

    ]
  }
]
}
] 
```

很抱歉粘贴了长的 JSON 代码。

所以现在我在使用对象等更新数组中对象的某些部分时遇到了问题。

所以我教导说映射插件可能会解决我的问题，因为它将所有数组都创建为可观察的，我假设这是我的问题。

所以我尝试了：

```
viewModel = {
                Menu: ko.mapping.fromJSON(ko.utils.parseJson(data)),
                //Menu: ko.observableArray(ko.utils.parseJson(data)),

                editMenu: function (menu) {
                    ko.applyBindings(menu, document.getElementById("MenuCategories"));
                    $("#MenuCategories").bPopup();
                }, 
```

但是后来我的绑定都没有工作，我似乎找不到原因，任何关于这个问题的建议或提示将不胜感激。

这是我尝试过的所有事情的小提琴。[http://jsfiddle.net/armandvdwalt/pjJc2/3/](http://jsfiddle.net/armandvdwalt/pjJc2/3/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:52:55.947

试试这个[小提琴](http://jsfiddle.net/pjJc2/7/)，我切换了资源的顺序。您在敲除之前引用了映射插件，这会生成关于无法识别“ko”的脚本错误。此外，在使用 fromJSON 时不需要使用 ko.utils.parseJson，因为 fromJSON 需要 JSON 作为参数。

# hypertable - Hypertable 可以删除多行吗？

> ID：11412018
> 
> 赞同：0
> 
> 时间：2012-07-10T11:09:26.397
> 
> 标签：hypertable

如何在超表的一个查询中删除多行？似乎 delete 没有这样做，我读了一些关于 compact 命令的内容，但它似乎还没有实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:45:13.197

不，那还没有实施。您必须逐行删除。COMPACT 命令与此无关。

# iphone - 更改图像中的特定颜色

> ID：11412021
> 
> 赞同：2
> 
> 时间：2012-07-10T11:09:40.557
> 
> 标签：iphone, ios

通过使用下图，我想编写代码。

![在此处输入图像描述](../Images/cfd58180a3ae48c57752ac9568a656fa.png)

这是我想以编程方式执行此操作的图像。用户可以选择屋顶或墙壁或围栏或窗户。选择特定零件和颜色（另一种型号）后，当前颜色（另一种型号）应替换为所选颜色。

在此图像（示例）中，用户为墙壁选择颜色（黄色），为屋顶选择棕色，在选择颜色和部分后，旧颜色应替换为新颜色。

我们如何才能做到这一点任何建议或帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:36:58.043

查看我关于如何更改 UIImage 的特定颜色的[答案。](https://stackoverflow.com/questions/10708656/changing-color-space-on-and-image/10711552#10711552)

两个注意事项：

*   问题是关于灰色到白色的颜色变化，您可以使用这种技术将任何颜色更改为任何其他颜色，
*   该代码取自开发人员参考的某处，因此代码段中的颜色有点随机。

# media-queries - Modernizr 像素比媒体查询

> ID：11412022
> 
> 赞同：0
> 
> 时间：2012-07-10T11:09:40.710
> 
> 标签：media-queries, modernizr

一直在使用 modernizr 和 css 媒体查询进行测试，以查看不同设备上的结果。我为 -webkit-device-pixel-ratio:2 添加了一个测试，以检测何时有视网膜显示设备，然后它将执行一个小的 jquery 脚本以将图像插入页面。

但是脚本没有被执行，而是调用另一个测试的回调函数。任何想法为什么会这样？一直在 ipad 2、iphone 4 和 android 模拟器上进行测试。

纯 CSS 媒体查询就像一个魅力，并插入一条消息。Modernizr mq 测试似乎不起作用。

```
 /*
    * Retina Display Test
    */  
    {
        test: Modernizr.mq('-webkit-device-pixel-ratio:2'), 
            yep: 'js/retina.js',
            nope: 'js/regular.js',

    },//end retina test 
```

[https://dl.dropbox.com/u/85173358/devicewidth/orientation.html](https://dl.dropbox.com/u/85173358/devicewidth/orientation.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:13:23.690

这是我使用的：

```
Modernizr.addTest('highres', function() {
  // for opera
  var ratio = '2.99/2';
  // for webkit
  var num = '1.499';
  var mqs = [
      'only screen and (-o-min-device-pixel-ratio:' + ratio + ')',
      'only screen and (min--moz-device-pixel-ratio:' + num + ')',
      'only screen and (-webkit-min-device-pixel-ratio:' + num + ')',
      'only screen and (min-device-pixel-ratio:' + num + ')'
  ];
  var isHighRes = false;

  // loop through vendors, checking non-prefixed first
  for (var i = mqs.length - 1; i >= 0; i--) {
      isHighRes = Modernizr.mq( mqs[i] );
      // if found one, return early
      if ( isHighRes ) {
          return isHighRes;
      }
  }
  // not highres
  return isHighRes;
}); 
```

然后在你的 JS 中的任何地方测试 Modernizr.highres。

注意：此代码不是我的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:34:26.687

根据[w3.org 文档](http://www.w3.org/blog/CSS/2012/06/14/unprefix-webkit-device-pixel-ratio/ "如何取消前缀 -WEBKIT-DEVICE-PIXEL-RATIO")，您可能希望在上述消息列表中添加：

```
'only screen and (min-resolution: 192dpi)' 
```

和

```
'only screen and (min-resolution: 1.5dppx)' 
```

我也不确定

```
min--moz-device-pixel-ratio 
```

在[Mozilla 文档](https://developer.mozilla.org/en/docs/CSS/Media_queries#-moz-device-pixel-ratio "Mozilla 文档")中它被指定为

```
-moz-device-pixel-ratio 
```

顺便说一句，这对我有用（在 iPhone 4s 上测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:11:06.727

我也想听听你的回答。

供您参考，这在我的桌面 Mozilla 中有效：

```
var pr = Modernizr.mq('only all and (max-width: 2000px) and (min--moz-device-pixel-ratio: 1)');
alert(pr);  //returns true. 
```

因此，要么它什么都不返回，例如：“如果浏览器根本不支持媒体查询（例如 oldIE），mq() 将始终返回 false。”

或者您可能不在 webkit 比率 2 中。其他一些可能性：

```
(-webkit-min-device-pixel-ratio: 1.5)
(-o-min-device-pixel-ratio: 3/2)
(min--moz-device-pixel-ratio: 1.5)
(min-device-pixel-ratio: 1.5) 
```

我想听听这些对你有用吗，谢谢！:)

# c++ - 在包含非唯一元素的未排序数组中选择第 k 个最大数的最快算法是什么？

> ID：11412023
> 
> 赞同：0
> 
> 时间：2012-07-10T11:09:42.153
> 
> 标签：c++, c, selection

> **可能重复：**
> [如何在 O(n) 中找到长度为 n 的未排序数组中的第 k 个最大元素？](https://stackoverflow.com/questions/251781/how-to-find-the-kth-largest-element-in-an-unsorted-array-of-length-n-in-on)

元素的数量可以从 1 到 1000 万不等。可用于此目的的最快选择算法是什么？请注意，由于数组元素的重复，我认为像 AVL 树这样的数据结构在这里不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T11:13:39.560

[选择算法](https://en.wikipedia.org/wiki/Selection_algorithm)可以在 O(N) 时间内运行。

最通用的方法是通过数组，保留迄今为止你见过的最大的 K 个数字。返回该列表的最后一个元素。正如@ChrisA 在评论中指出的那样`std::nth_element`（[在此处](http://www.sgi.com/tech/stl/nth_element.html)记录）是使用这种方法的最快方法。

如果您总是想要前 Kth 最大的项目（并且数据有时会更改），那么请考虑将数据存储在[heap](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)中。这更昂贵，但为您提供了数据的“实时”结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:25:15.313

这可以在编译时使用此代码完成（请记住，您需要最新的 GCC 或 Clang，此时在 MSVC2k12 中不起作用）。它使它编译缓慢，但在运行时是即时的。

```
#include <iostream>

constexpr int array[10] = { 1, 0, 2, 3, 0, 2, 7, 1, 9, 2 };

template<int maxest, int index>
struct find_biggest_r {
  enum { value = find_biggest_r<(array[index] > maxest ? array[index]:maxest),index-1>::value };
};

template<int maxest>
struct find_biggest_r<maxest,0> {
 enum { value = (array[0] > maxest ? array[0] : maxest) };
};

template<int index>
struct find_biggest {
  enum { value = find_biggest_r<array[index-1],index-2>::value };
};

int main()
{
    std::cout << find_biggest<10>::value;
} 
```

编辑：对不起，这只是最大的。对于第 k 个最大的，我需要添加一两个参数，我将在今天晚些时候做。

# iphone - cocos2d v2.0 image warp app/ccgrid/ccactiongrid入门

> ID：11412024
> 
> 赞同：1
> 
> 时间：2012-07-10T11:09:42.767
> 
> 标签：iphone, cocos2d-iphone

我必须制作一个应用程序来拍摄面部图像，允许用户指示眼睛和嘴巴等主要特征的位置，然后扭曲图像以给出特定的表情（微笑/皱眉）。

我的想法是，我可以分别为嘴/眼睛使用一些组件 ccgrid，然后将它们结合起来制作一个实时 ccgrid，以与 ccactiongrid 一起应用。

首先，这是解决这个问题的明智方法吗？

其次，我找不到任何关于如何使用 ccgrid 对象或 ccactiongrids 的示例。有没有我遗漏的例子，或者有人可以给我一个速成课程？

谢谢，

马丁

# git - Git不在Windows上将符号链接存储为符号链接

> ID：11412028
> 
> 赞同：0
> 
> 时间：2012-07-10T11:10:20.333
> 
> 标签：git

我有一个包含三个顶级目录的项目：

```
A
B/dir1
C/symlink_to_dir1 
```

如您所见，我们正在将 C 中的一个目录符号链接到 B 中的另一个目录。这三个目录存储在 Windows 上的一个 Git 存储库中，但是当我们尝试提交符号链接时遇到了问题。据我了解，Git 会将符号链接存储为这样，并将其作为符号链接解压缩到克隆到的任何 repo 中。

但是，当我们暂存符号链接时，添加的是 dir1 本身中的文件，而不是链接本身。当我们提交时，`git status`会告诉我们工作目录是干净的，但`git add -A`会从符号链接目录中删除所有文件，并告诉我们符号链接未跟踪。这在我们提交后立即发生，没有发生任何操作。

我们希望保留符号链接，这样我们就不必在每次克隆存储库时都恢复它，我的理解是这是 Git 中的默认行为。谁能告诉我我们在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:26:46.533

如果您使用[基于 msysgit 的 Windows 版 Git](http://msysgit.github.com/)，那么答案就是不支持符号链接（由 Windows Vista 引入），即使 core.symlinks 设置为 true。作为参考，您可能想查看[这个讨论](http://code.google.com/p/msysgit/issues/detail?id=224)，但请记住，Google Code 上的问题跟踪器已关闭（支持 GitHub 上的问题跟踪器）。

但是，似乎有[一个实现 symlink 支持的 fork](https://github.com/frogonwheels/git/commits/mrg/unicode-symlink-v9)，但该工作尚未合并到 msysgit 中。

# c# - C# XML，找到节点和他所有的父母

> ID：11412029
> 
> 赞同：3
> 
> 时间：2012-07-10T11:10:30.703
> 
> 标签：c#, xml, linq

我有一个 XML 结构，如：

```
<siteNode controller="a" action="b" title="">
  <siteNode controller="aa" action="bb" title="" />
  <siteNode controller="cc" action="dd" title="">
    <siteNode controller="eee" action="fff" title="" />
  </siteNode>
</siteNode> 
```

从 [C# Linq 到 XML，当孩子满足条件时获取父母](https://stackoverflow.com/questions/7563020/c-sharp-linq-to-xml-get-parents-when-a-child-satisfy-condition)

我得到了这样的东西：

```
XElement doc = XElement.Load("path");
var result = doc.Elements("siteNode").Where(parent =>
  parent.Elements("siteNode").Any(child => child.Attribute("action").Value ==
  ActionName && child.Attribute("controller").Value == ControlerName)); 
```

返回我的节点及其父节点。我怎样才能不仅获得节点的父节点，而且还获得它的“祖父母”，我的意思是父节点的父节点等。所以对于我的 XML，它将是：

```
<siteNode controller="eee" action="fff" title="" /> 
with parent 
<siteNode controller="cc" action="dd" title="" >
with parent
<siteNode controller="a" action="b" title="" > 
```

明显的答案是在找到的父级上使用该 linq 表达式，直到它为空，但有没有更好（更清洁）的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:21:48.700

AncestorsAndSelf method does exactly what you need, it finds ancestors of an element on all parent levels. Descendants method finds elements by name at any level and FirstOrDefault method returns first element that matches criteria or null if no matching element is found:

```
 XElement el = doc.Descendants("siteNode")
                    .FirstOrDefault(child => 
                        child.Attribute("action").Value == ActionName 
                        && 
                        child.Attribute("controller").Value == ControlerName);
    if (el != null)
    {
        var result2 = el.AncestorsAndSelf();
    } 
```

# datetime - How do I calculate the difference in days between two ISO8601 dates with Freemarker?

> ID：11412040
> 
> 赞同：4
> 
> 时间：2012-07-10T11:11:03.400
> 
> 标签：datetime, freemarker

I have an object in Freemarker which has dates in ISO8601 format (e.g. `2012-02-01T13:01:02+0000`), how would I go about working out the difference in days between it and now?

In other non-Java scenarios I'd reformat it as a unix timestamp and do the maths (like the `distance_of_time_in_words` functions in RoR or Symfony), however as far as I can see, Freemarker is unable to turn a ISO8601 timestamp into unix timestamp.

And yes, I realise the template layer probably isn't the right place to be doing this kind of thing, but needs must etc.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T17:28:54.257

如果用天数来表示两个日期之间经过了多少次 24 小时，那么这个表达式就是这样做的（您至少需要 FreeMarker 2.3.17`?long`才能像这样工作）：

```
(
  (
    s2?datetime("yyyy-MM-dd'T'HH:mm:ssZ")?long
    - s1?datetime("yyyy-MM-dd'T'HH:mm:ssZ")?long
  ) / (1000 * 60 * 60 * 24)
)?int 
```

更好的方法是在 Java 中使用 implementation 来实现该功能`TemplateMethodModelEx`。模板可以将其拉入`<#assign distanceInDays = 'com.example.DistanceInDaysMethod'?new()>`（将其放入通常的`#include`-d 或`#import`-ed 文件中），然后您可以将其用作`distanceInDays(s1, s2)`.

# selenium - Selenium 2 Webdriver

> ID：11412041
> 
> 赞同：1
> 
> 时间：2012-07-10T11:11:05.970
> 
> 标签：selenium, webdriver

How can we make a batch file for executing Selenium Webdriver projects in Java?

I am able to make Executable jar files By File> Export> Java> Runnable jar, but Want to make the BATCH File.

Please Help!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:29:31.020

批处理文件不能用 jar 制作。您可以做的是制作 jar 文件并从批处理文件中调用它。您可以制作一个批处理文件并使用命令“java -jar Jar_File_Name”，现在当您运行批处理文件时，jar 将被执行。

# javascript - javascript alt键

> ID：11412044
> 
> 赞同：14
> 
> 时间：2012-07-10T11:11:18.530
> 
> 标签：javascript, keyboard-events

我们正在创建一个看起来像桌面窗口的 Web 用户界面。现在我们需要处理`Alt`密钥。按下键时`Alt`，焦点转到上层菜单。

在 Javascript 中，如何在按下`Alt`ONLY`Alt`键时获取键事件？我需要确保没有同时按下其他键。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T11:23:59.537

也许像这样

```
document.onkeydown = keydown;

function keydown(evt) {
    if (!evt) evt = event;
    if (evt.altKey) {
        alert('alt');
    }
} // function keydown(evt)​ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T11:33:49.573

工作**[演示](http://jsfiddle.net/Rw4km/)**

```
document.onkeyup = KeyCheck;       

function KeyCheck(e)
{
   var KeyID = (window.event) ? event.keyCode : e.keyCode;
   switch(KeyID)
   {
      case 18:
      document.Form1.KeyName.value = "Alt";
      // do your work on alt key press....
      break; 

      case 17:
      document.Form1.KeyName.value = "Ctrl";
      break;
   }
} 
```

你的html可能是这样的

```
<form name="Form1">

<input type="text" name="KeyName" value="" />

</form>​ 
```

**注意：**如果您想在其他控件/类型上获取 alt 事件，而不是根据您的要求对其进行修改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-11T12:30:12.863

我不知道这是否是最优雅的解决方案，但效果很好。

```
$(function()
{
    //Flag to check if another key was pressed with alt
    var vAnotherKeyWasPressed = false;
    //ALT keycode const
    var ALT_CODE = 18;

    //When some key is pressed
    $(window).keydown(function(event)
    {
        //Identifies the key
        var vKey = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
        //The last key pressed is alt or not? 
        vAnotherKeyWasPressed = vKey != ALT_CODE;
    });

    //When some key is left
    $(window).keyup(function(event)
    {
        //Identifies the key
        var vKey = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;

        //If the key left is ALT and no other key is pressed at the same time...
        if (!vAnotherKeyWasPressed && vKey == ALT_CODE)
        {
            //Focus the menu
            $('#myMenu').focus();
            //Stop the events for the key to avoid windows set the focus to the browser toolbar 
            return false;
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-09T02:32:02.223

就放`e.preventDefault();`

```
$(document).on('keydown', function (e) {
    if (e.key === 'Alt') {
        e.preventDefault();
    }
}); 
```

# php - Appending a css class to a textbox javascript

> ID：11412049
> 
> 赞同：0
> 
> 时间：2012-07-10T11:11:41.840
> 
> 标签：php, javascript

Is it possible to add the css class named **color** to the textbox define inside the javascript below?

```
<script type="text/javascript">

newTextBoxDiv.after().html('<label>Colors and price: #'+ counter + ' : </label>' + '<input name="colors[]" value=""  >');

</script> 
```

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:13:34.187

这应该这样做

```
newTextBoxDiv.after().html('<label>Colors and price: #'+ counter + ' : </label>' + '<input name="colors[]" value="" class="color" >'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:13:42.883

你的意思是，输入？

简单地

```
'<input name="colors[]" value="" class="color">' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:13:52.733

是的

```
newTextBoxDiv.siblings("input:text[name='colors[]']").addClass('color'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:15:00.580

如果你的意思是`newTextBoxDiv`then 使用：

```
newTextBoxDiv.addClass('color'); 
```

如果是输入，则：

```
'<input name="colors[]" value="" class="color">' 
```

# css - CSS - Is it possible for html in an include to ignore styles from a file referenced in the main page?

> ID：11412050
> 
> 赞同：4
> 
> 时间：2012-07-10T11:11:47.097
> 
> 标签：css

I've developed a dynamic ad banner that consits of html and styles loaded into the host site via javascript. On one particular site, certain styles in the stylesheet for the main page are affecting the html that I'm dynamically loading.

Is there a technique for having the dynamically loaded html only render styles from the css I have loaded along with the html, and ignoring any styles in the host page?

Any advice appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:17:07.837

将您的横幅放入 iframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:17:09.437

是的，有一个真正简单的方法。为什么不将您的类与主页 HTML 分开。如果您希望没有冲突，请给他们一个唯一的标识。

例子

您的主页有一个 css 类`.input` 给您的动态加载页面，因为`.Dybamically_input`这将作为命名空间提供服务。您也可以使用`!important`您肯定要添加的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:17:44.340

有一个不断发展的标准来向 CSS 引入范围块，但它还没有得到足够的支持而无法使用。您可以使用 !important 指令，但如果您不仔细应用它，这也可能会影响基础文档。

最好的解决方案是通过将添加横幅中的所有 HTML 包含在具有唯一命名类的 div 中来创建范围（并使用您自己的命名空间，例如 'cog_myAd' 来尝试保证唯一性。然后将样式仅应用于该类, 使用 !important 您可能需要覆盖可以在样式级联下更改的样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:20:01.540

如果您已将 CSS 文件附加到 HTML 页面，那么唯一的解决方案是使用`!important`所有冲突的 CSS 属性 -

```
.className{
  color: red !important;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T11:14:52.923

将 !important 添加到您的 CSS 中，例如

p {颜色：#ff0000！重要；}

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-10T11:18:15.333

使用内联样式（您想要设置样式的所有横幅元素的样式属性）而不是外部 css 文件 - 这样您就不会发生冲突。

其他人建议的另一个选项是使用 IFrame。

# android - Android: ViewProperty Animator is not working on 3.0 emulator

> ID：11412051
> 
> 赞同：1
> 
> 时间：2012-07-10T11:11:49.350
> 
> 标签：android, animation

I've used some Viewproperty animation in my application. Once it compile on android 3.0 tablet its working fine, if run on 3.0 emulator application crashes and its showing error on logcat.

**Code:**

```
ImageButton home = (ImageButton)findViewById(R.id.Home);
home.animate().setDuration(200);
smmslogo.animate().alpha(1); 
```

**Error:**

```
java.lang.NullPointerException
at android.view.ViewPropertyAnimator.animatePropertyBy 
```

can anyone help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:30:19.503

我认为崩溃与[http://code.google.com/p/android/issues/detail?id=18803上的错误有关](http://code.google.com/p/android/issues/detail?id=18803)

尝试使用此调用：

```
ObjectAnimator.ofFloat(home, "alpha", 0f, 1f).setDuration(200).start(); 
```

# java - 使用paint方法创建类的对象

> ID：11412057
> 
> 赞同：0
> 
> 时间：2012-07-10T11:11:58.717
> 
> 标签：java

我创建了一个菜单，其中包含一些可供选择的选项。其中一个选项是启动游戏的“玩电脑”。

```
 JButton ai = new JButton("Play with computer");
    ai.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            GameBoard play = new GameBoard();
            hi.dispose(); //jframe
        }
    }); 
```

然后是游戏板：

```
@SuppressWarnings("serial")
public class GameBoard extends Canvas {
    private Image dbi;
    private Graphics db;
    private JFrame okno;
    Rectangle aiPaddle = new Rectangle(10, 590, 10, 50);
    Rectangle pPaddle = new Rectangle(10, 100, 10, 50);
    Rectangle ball = new Rectangle(560, 10, 10, 10);
    Player p = new Player(this);
    Ai a = new Ai(this);
    Ball b = new Ball(this);
    GameBoard() {
        okno = new JFrame();
        okno.setTitle("Pink Ponk");
        okno.setSize(600, 300);
        okno.getContentPane().setBackground(Color.black);
        okno.setResizable(false);
        okno.setVisible(true);
        okno.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        addKeyListener(p);
    }

    public static void main(String[] args) {
        GameBoard gra = new GameBoard();
        gra.okno.add(gra);
    }

    @Override
    public void update(Graphics g) {
        dbi = createImage(10, 50);
        db = dbi.getGraphics();
        paint(db);
        g.clearRect(0, 0, 600, 300);
        g.setColor(Color.white);
        g.drawRect(p.getX(), p.getY(), 10, 50);
        g.fillRect(p.getX(), p.getY(), 10, 50);
        g.drawOval(b.getX(), b.getY(), 10, 10);
        g.fillOval(b.getX(), b.getY(), 10, 10);
        g.drawRect(a.getX(), a.getY(), 10, 50);
        g.fillRect(a.getX(), a.getY(), 10, 50);
    }

    @Override
    public void paint(Graphics g) {
        pPaddle = new Rectangle(p.getX(), p.getY(), 10, 50);
        aiPaddle = new Rectangle(a.getX(), a.getY(), 10, 50);
        ball = new Rectangle(b.getX(), b.getY(), 10, 10);
        g.clearRect(0, 0, 600, 300);
        g.setColor(Color.white);
        g.drawRect(p.getX(), p.getY(), 10, 50);
        g.fillRect(p.getX(), p.getY(), 10, 50);
        g.drawOval(b.getX(), b.getY(), 10, 10);
        g.fillOval(b.getX(), b.getY(), 10, 10);
        g.drawRect(a.getX(), a.getY(), 10, 50);
        g.fillRect(a.getX(), a.getY(), 10, 50);
    }

} 
```

我确信它应该工作，但它没有。我得到黑屏，没有任何矩形或椭圆形。其他课程的线程正在工作，因为我仍然输掉了比赛。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:17:58.080

GameBoard 构造函数是您按下开始按钮时唯一调用的东西，它创建一个新框架、设置其背景并使其可见。但它不会向框架添加任何组件。您可能需要添加

```
okno.add(this); 
```

请注意，Canvas 的构造函数并不真正负责显示一个框架并将其自身添加到该框架中。我会将框架创建移到构造函数之外。让构造函数做它应该做的事情：构造对象。

# maven - maven-failsafe-plugin not seeing my tests (seleniumHQ)

> ID：11412060
> 
> 赞同：0
> 
> 时间：2012-07-10T11:12:19.507
> 
> 标签：maven, selenium, maven-failsafe-plugin

i'm writing tests via selenium web driver here's my code :

Pom.xml

```
<project>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-java</artifactId>
            <version>2.24.1</version>
        </dependency>
    </dependencies>

    <build>
        <finalName>SeleniumebDriverProject</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <version>2.11</version>
                <configuration>
                    <!-- Skip the normal tests, we'll run them in the integration-test phase-->
                    <skip>false</skip> 
                </configuration>
                <executions>
                    <execution>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                        <configuration>
                            <skip>false</skip>
                            <includes>
                                <include>**/*Test.java</include>
                            </includes>
                        </configuration>
                    </execution> 
                </executions>
            </plugin>
        </plugins> 
    </build>
</project> 
```

My test class named GoogleTest.java. after reading this post : [failsafe plugin won't run on one project but will run on another -- why?](https://stackoverflow.com/questions/9947701/failsafe-plugin-wont-run-on-one-project-but-will-run-on-another-why)

I changed the name of my class so it's:

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.11</version>
    <configuration>
        <!-- Skip the normal tests, we'll run them in the integration-test phase-->
        <skip>false</skip> 
    </configuration>

    <executions>
        <execution>
            <goals>
              <goal>integration-test</goal>
              <goal>verify</goal>
            </goals>
        </execution>
    <executions>
</plugin> 
```

But the problem persist.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:18:01.060

[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/plugin-info.html)的目标被命名为*integration-test*而不是*test*。此外，如果您将命名约定更改为 maven-failsafe-plugin 的约定，则不需要任何包含 etc. 文件的配置。只需使用默认值。此外，我假设您已经开始通过以下方式运行集成测试：

```
mvn verify 
```

# tcl - how to execute a command for multiple occurrance and change the variable from list each time

> ID：11412063
> 
> 赞同：-3
> 
> 时间：2012-07-10T11:12:50.480
> 
> 标签：tcl

I have a list which contains 72.xx.xxx.xxx 72.xx.xxx.xxx (There are some spaces ) I have a variable say var

Now I have to execute a command for $var times and I have to use "72.xx.xxx.xxx" each time. let us say the command is : "reset vpn $IP".

I have to execute the above command say two times (stored in variable) and for two IP address stored in list. Can any one help with TCL code? Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:18:42.497

这真的是一个家庭作业。并且任务规范缺少一些重要的细节。

如果要遍历列表中的*所有*IP，只需执行

```
set ips {72.xx.xxx.xxx 72.xx.xxx.xxx}
foreach ip $ips {
  reset vpn $ip
} 
```

如果您向`ips`列表中添加更多值，则该[`foreach`](http://www.tcl.tk/man/tcl8.5/TclCmd/foreach.htm)命令将对所有剩余元素进行更多次迭代。

如果你想迭代，比如说，前 N 个元素，只需一个一个地选择它们：

```
set ips {72.xx.xxx.xxx 72.xx.xxx.xxx 72.xx.xxx.xxx 72.xx.xxx.xxx ...}
set ntimes 2
for {set ix 0} {$ix < $ntimes} {incr ix} {
  reset vpn [lindex $ips $ix]
} 
```

等等。

没有火箭科学。只需阅读[教程](http://www.tcl.tk/man/tcl8.5/tutorial/tcltutorial.html)，阅读[本书](http://beedub.com/book)，在您真正尝试自己之前，请尽量避免提出这些简单的问题。

# iphone - 从 iPhone 开发中的 URL 读取 XML 文件

> ID：11412065
> 
> 赞同：-3
> 
> 时间：2012-07-10T11:12:55.863
> 
> 标签：iphone, objective-c, ios, xml

我是iOS开发的初学者，基本上是软件公司的实习生。现在我的任务是从 URL 读取 XML 文件并将内容实现为我的应用程序中的下拉框。例如，美国的城市列表之类的。我希望你能帮助我。

期待回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:15:06.177

您可以使用[NSXMLParser 。请参阅](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)[此处](https://stackoverflow.com/questions/4705588/nsxmlparser-example)的线程以获取示例。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:48:10.103

根据您期望在该 XML 中的结构和/或您希望如何处理数据，

```
NSDictionary* myDictionary = [NSDictionary dictionaryWithContentsOfURL:aURL]; 
```

可能是，你在找什么。调试和学习很容易使用

```
NSLog(@"myDictionary: %@", myDictionary); 
```

这将显示一些非常易读的数据结构（在大多数情况下）。

# c++ - Can deque memory allocation be sparse?

> ID：11412067
> 
> 赞同：0
> 
> 时间：2012-07-10T11:13:09.570
> 
> 标签：c++, memory, stl, deque

Is it allowed by the standard for a deque to allocate is memory in a sparse way?

My understanding is that most implementations of deque allocate memory internally in blocks of some size. I believe, although I don't know this for a fact, that implementations allocate at least enough blocks to store all the items for there current size. So if a block is 100 items and you do

```
std::deque<int> foo;
foo.resize( 1010 ); 
```

You will get at least 11 blocks allocated. However given that in the above all 1010 int are default constructed do you really need to allocate the blocks at the time of the resize call? Could you instead allocate a given block only when someone actually inserts an item in some way. For instance the implementation could mark a block as "all default constructed" and not allocate it until someone uses it.

I ask as I have a situation where I potentially want a deque with a very large size that might be quite sparse in terms of which elements I end up using. Obviously I could use other data structures like a map but I'm interested in what the rules are for deque.

A related question given the signature of resize `void resize ( size_type sz, T c = T() );` is whether the standard requires that the default constructor is called exactly `sz` times? If the answer is yes then I guess you can't do a sparse allocation at least for types that have a non trivial default constructor, although presumably it may still be possible for built in types like int or double.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:32:25.103

中的所有元素都`deque`必须正确构造。如果你需要一个稀疏的实现，我会建议一个`deque`（或一个`vector`）指向指针或一个`Maybe`类（你真的应该在你的工具箱中有一个），它在类型有效之前不会构造类型。这不是 的作用`deque`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T11:41:06.590

`23.3.3.3``deque::resize`将附加`sz - size()`默认插入元素的状态（`sz`是 的第一个参数`deque::resize`）。

默认插入（参见 参考资料`23.2.1/13`）意味着元素由表达式初始化`allocator_traits<Allocator>::construct(m, p)`（​​其中`m`是分配器和`p`要构造的类型的指针）。所以内存必须可用，并且元素将被默认构造（初始化？）。

总而言之：`deque::resize`如果要符合要求，就不能懒惰地构造对象。您可以通过将其包装在一个`boost::optional`或任何其他`Maybe`容器中来轻松地将惰性构造添加到一个类型中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:39:16.483

回答你的第二个问题。有趣的是，C++03 和 C++11 之间是有区别的。

使用 C++03，你的签名

```
void resize ( size_type sz, T c = T() ); 
```

将默认构造参数（除非您提供另一个值），然后从该值*复制构造*新成员。

在 C++11 中，此函数已被两个重载替换

```
void resize(size_type sz);

void resize(size_type sz, const T& c); 
```

其中第一个默认构造（或值初始化）`sz`元素。

# asp-classic - Does many include's (in "case") in ASP classic hurt the performance of the server?

> ID：11412068
> 
> 赞同：2
> 
> 时间：2012-07-10T11:13:19.477
> 
> 标签：asp-classic

I want to build this page with ASP classic:

```
<%
Dim depart

depart = 1556

Select Case depart
    Case 1
    %>
    <!--#include virtual="/check/noam/newDesign/test1.asp"-->
    <%
    Case 2
    %>
    <!--#include virtual="/check/noam/newDesign/test2.asp"-->
    <%
    Case 3
    %>
    <!--#include virtual="/check/noam/newDesign/test3.asp"-->
    <%
    Case 4
    %>
    <!--#include virtual="/check/noam/newDesign/test4.asp"-->
    <%
    Case 5
    %>
    <!--#include virtual="/check/noam/newDesign/test5.asp"-->
    <%
    Case 6
    %>
    <!--#include virtual="/check/noam/newDesign/test6.asp"-->
    <%
    Case 7
    %>
    <!--#include virtual="/check/noam/newDesign/test7.asp"-->
    <%
    Case 8
    %>
    <!--#include virtual="/check/noam/newDesign/test8.asp"-->
    <%
End If
%> 
```

And I like to know if the server in the background need to enter to every include or he will enter only to the include in the right case? I need to know that because I like to know if the server will get bad performance with this one.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:27:55.863

这实际上取决于包含的内容，但我不希望这样的结构对性能产生任何明显的影响，除非您有 100 条案例语句或每秒有 100 条页面请求。

确实，在执行代码之前，所有包含将首先组合到脚本中，但是还应该记住，最终脚本的组合和解析的“p-code”版本由 ASP 缓存。

如果包含主要只是静态 HTML 内容，那么这种方法实际上非常有效。另一方面，内联全局标识符（未包含在`Sub`,`Function`或中的标识符`Class`）越多，在脚本上下文中注册这些标识符所需的时间就越多（但是仍然需要*很多*标识符才能产生显着差异）。

一种潜在的替代方法是使用`Server.Execute`而不是包含。在这种情况下，执行的 ASP 有自己独立的脚本上下文，因此它不能共享调用者函数和变量（这可能是也可能不是一件好事。）而且它很可能`Server.Execute`实际上会变慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:34:29.567

包含在经典 ASP 中执行之前加载，因此您基本上是在加载所有这些包含，即使它们没有执行。

您可以使用不同的模式：[Execute Global](http://www.gwmicro.com/mediawiki/index.php/Using_ExecuteGlobal_to_Include_VBScript_Code)，这相当于在 VB 中使用 eval() 。您将文件作为字符串读入，然后执行它。这绕过了一组包含，但本身就相当丑陋。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-26T17:27:46.447

您可以使用 server.execute

```
server.execute("/check/noam/newDesign/test"&depart&".asp") 
```

或者

```
page="/check/noam/newDesign/test"&depart&".asp"

server.execute(page) 
```

# azure - 如何使用其他订阅在 Azure 上创建新网站

> ID：11412075
> 
> 赞同：0
> 
> 时间：2012-07-10T11:13:33.227
> 
> 标签：azure, subscription, azure-web-app-service

在新的 Azure 门户中，订阅了 3 个月免费试用的用户最多可以创建 10 个网站。我已经使用 3 个月免费试用订阅创建了一个网站。否则我有其他订阅，如 Windows Azure MSDN 和 Pay-As-You-Go，但我如何使用这些其他订阅创建新网站。我的意思是，当我尝试创建新网站时，无法选择订阅，并且新网站始终处于 3-Month Free Trial 订阅状态​​。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:59:46.157

根据您的上述描述，我不确定您是否有付费 Windows Azure 订阅。因此，您真正需要的是首先获得付费订阅，并且您可以直接从 Portal 的 Windows Azure 帐户部分获得。付费订阅意味着您必须为您将使用的任何其他服务（即存储、带宽等）付费。您将拥有 10 个免费网站，如果您只使用 Windows Azure 网站（仅限）但仍需支付 Azure 存储或其他任何费用，则无需支付任何费用。

如果您有多个订阅与一个真实帐户关联并且帐户启用了预览功能，那么我可以看到新的管理门户无法选择特定订阅来创建服务。您需要登录旧门户网站并在“用户管理”部分为不同订阅设置不同的 Live ID，然后使用该特定 Live ID 访问特定订阅以创建您的网站。（注意：预览门户仍处于预览状态，因此此类功能尚不可用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:23:34.573

新订阅需要启用预览功能：

“您所要做的就是通过转到帐户（查看我的账单）-> 预览功能来激活新订阅的网站预览：[https](https://account.windowsazure.com/PreviewFeatures) ://account.windowsazure.com/PreviewFeatures ”

从：

[http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/6fc50df9-9d71-472b-b39b-a051fb1f8560](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/6fc50df9-9d71-472b-b39b-a051fb1f8560)

# windows-phone-7 - 从数据绑定的 ListBox 中获取 TextBox 的值

> ID：11412086
> 
> 赞同：0
> 
> 时间：2012-07-10T11:14:02.807
> 
> 标签：windows-phone-7, xaml, silverlight-4.0

我需要从列表框选定项中获取值。请注意，数据模板是数据绑定的。这是xaml：

```
<ListBox Name="AppointmentResultsData" ItemsSource="{Binding}" Height="650" Width="480" Margin="24,0,0,0" Foreground="#CBF7FA" SelectionChanged="AppointmentResultsData_SelectionChanged">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <TextBlock Text="{Binding Path=Subject, Mode=TwoWay}" TextWrapping="Wrap" FontSize="30" Grid.Column="0" Grid.Row="1"/>
                            <Grid Grid.Column="0" Grid.Row="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                <TextBlock Text="{Binding Path=Account.Name}" Grid.Column="0" Grid.Row="1" FontSize="28"/>
                                <TextBlock Text="Start : " Grid.Column="0" FontSize="22" Grid.Row="2"/>
                                <TextBlock Text="{Binding Path=StartTime}" FontSize="22" Grid.Column="1" Grid.Row="2"/>
                                <TextBlock Text="End : " Grid.Column="0" Grid.Row="3" FontSize="22"/>
                                <TextBlock Text="{Binding Path=EndTime}" Grid.Column="1" FontSize="22" Grid.Row="3"/>
                                <TextBlock Text="Location : " Grid.Column="0" Grid.Row="4" FontSize="22"/>
                                <TextBlock Text="{Binding Path=Location}" Grid.Column="1" FontSize="22" Grid.Row="4"/>
                                <TextBlock Text="Status : " Grid.Column="0" FontSize="22" Grid.Row="5"/>
                                <TextBlock Text="{Binding Path=Status}" Grid.Column="1" FontSize="22" Grid.Row="5"/>
                            </Grid>
                            <TextBlock Text="    "/>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

我需要选择更改事件中文本框的值。我试过这样......

```
private void AppointmentResultsData_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        //SelectedEvent seleted = AppointmentResultsData.SelectedItem as SelectedEvent;
        if (AppointmentResultsData.SelectedIndex == -1)
            return;

        ListBoxItem currentSelectedListBoxItem = this.AppointmentResultsData.ItemContainerGenerator.ContainerFromIndex(AppointmentResultsData.SelectedIndex) as ListBoxItem;

        if (currentSelectedListBoxItem == null)
            return;

        // Iterate whole listbox tree and search for this items
        TextBox nameBox = helperClass.FindDescendant<TextBox>(currentSelectedListBoxItem);
        TextBlock nameBlock = helperClass.FindDescendant<TextBlock>(currentSelectedListBoxItem);
        MessageBox.Show(nameBlock.Text + " " + nameBox.Text);
    } 
```

但它没有用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:09:56.817

解决了！

```
private void AppointmentResultsData_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var listBoxItem = AppointmentResultsData.ItemContainerGenerator.ContainerFromIndex(AppointmentResultsData.SelectedIndex) as ListBoxItem;
        var txtBlk = FindVisualChildByType<TextBlock>(listBoxItem, "txtLocation");

        MessageBox.Show(txtBlk.Text);
    }

T FindVisualChildByType<T>(DependencyObject element, String name) where T : class
    {
        if (element is T && (element as FrameworkElement).Name == name)
            return element as T;
        int childcount = VisualTreeHelper.GetChildrenCount(element);
        for (int i = 0; i < childcount; i++)
        {
            T childElement = FindVisualChildByType<T>(VisualTreeHelper.GetChild(element, i), name);
            if (childElement != null)
                return childElement;
        }
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:23:13.340

假设您有一个已绑定到列表框的类（MyClass）对象列表

将处理程序手势侦听器点击添加到数据模板

在处理程序中这样做：

```
private void ItemClickedEventHandler(object sender, Microsoft.Phone.Controls.GestureEventArgs e)
        {                   
           MyClass clickedMyclass = (MyClass)((System.Windows.Controls.Grid)sender).DataContext;

        } 
```

您拥有当前选定项目的对象，并且可以访问所有类变量。例如（开始时间等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:34:54.577

好吧，您将其转换为错误的类型，这应该可以：

```
private void AppointmentResultsData_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {  
      var listBoxItem = AppointmentResultsData.SelectedItem as ListBoxItem;
      TextBox nameBox = listBoxItem .FindName("nameYourTextBox") as TextBox;
      TextBlock nameBlock = dd.FindName("nameYourTextBlock") as TextBlock;
      MessageBox.Show(nameBlock.Text + " " + nameBox.Text);
     } 
```

当然，您需要将名称添加到您的`TextBox`和`TextBlock`

```
<TextBlock x:Name="nameYourTextBlock Text="{Binding Path=Account.Name}" Grid.Column="0" Grid.Row="1" FontSize="28"/> 
```

另外，我`TextBox`在您的`XAML`.

# java - 如何避免 gwt 中的 addWindowClosingHandler/ClosingEvent 不需要的重新加载请求

> ID：11412096
> 
> 赞同：0
> 
> 时间：2012-07-10T11:14:23.080
> 
> 标签：java, gwt, smartgwt

如果用户在登录后误按了 F5 或刷新按钮，他应该留在同一页面上。现在他被重定向到登录页面。

我使用以下代码保持在同一页面上。

但是我不想通过在 onWindowClosing() 方法中编写 event.setMessage() 来警告用户这种情况。我只想做一些功能，即使他错误地刷新了浏览器，用户也会觉得什么都没有发生。

我希望避免由 [**或如何处理手动取消创建的弹出窗口上的事件，以便不会重新加载 com.google.gwt.user.client.Window.confirm 给出的不需要的弹出窗口（“你真的想要退出？”）** ]

```
 Window.addWindowClosingHandler(new Window.ClosingHandler() {
    @Override
    public void onWindowClosing(ClosingEvent event) {
     //how to prevent sending reload request OR [on cancel button MANUALLY]
    }}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:44:37.117

在上面的一些评论中提到了活动和地点作为您问题的解决方案。当然，它是一个漂亮而现代的。您将在 GWT 的这些文档中找到更多详细信息。

但如果你不想走那条路，另一种解决方案是使用 GWT 提供的历史机制。您应用程序的每个“页面”（相当一部分）都应具有特定的令牌。然后，您所要做的就是创建一个历史更改处理程序并根据用户重新加载操作传递的令牌呈现适当的对象。如果您想在用户注销（但不是浏览器重新启动）之间有一些“记忆”，您可以将此令牌保存在本地存储中，并在用户登录后使用它来将她引导到她所在的最后一页。

# emacs - windows7下如何将slime安装到emacs中

> ID：11412100
> 
> 赞同：3
> 
> 时间：2012-07-10T11:14:39.490
> 
> 标签：emacs, lisp, slime

**Win7下如何将slime安装到emacs中？**

我下载了一个带有“.tgz”的压缩包。但它似乎适用于linux。但是对于windows（win 32 OS）真的没有一件事。

我打开这个包裹，发现里面有很多文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:20:16.070

据我所知，它实际上[与其他操作系统相同。](http://common-lisp.net/project/slime/doc/html/Getting-started.html#Getting-started)（至少，它在 FreeBSD/ArchLinux/Win7 下对我来说总是有效的。）首先，你解压到一个你喜欢的位置，然后在你的 .emacs 中添加类似的东西（假设你在你的用户目录下的某个地方解压）：

```
(add-to-list 'load-path "~/my/path/to/slime/")
;; (add-to-list 'load-path "~/my/path/to/slime/contrib/") ; for optional features

(slime-setup
;; '(slime-fancy slime-asdf slime-references              ; optional features
;;   slime-indentation slime-xref-browser)
)

(setq slime-lisp-implementations
      '((ccl ("~/path/to/ccl/wx86cl"))
        (clisp ("~/path/to/clisp-2.49/clisp" "-modern"))) ; giving a command arg
      slime-default-lisp 'ccl) 
```

重新启动 Emacs 或`C-x C-e`在每个顶级表单后面键入。然后，输入`M-x slime RET`（或者`C-u M-x slime RET`如果您想在 中的实现之间进行选择`slime-lisp-implementations`，否则`slime-lisp-default`将使用）它应该可以正常工作（它对我有用）。的设置`slime-lisp-implementations`是可选的——您也可以在启动 Slime 时手动提供 lisp 实现可执行文件的路径。

假设你想在 CL 中使用 Slime，因为没有 Clojure 标签。如果您想将它与 Clojure 一起使用，不幸的是，情况有些不同，并且两个版本不能很好地配合使用。上次我检查时，推荐的与 Clojure 一起使用的方法是使用 Emacs 24 的包系统进行安装，或者，如果您使用的是旧版本，则使用 E​​LPA（基本相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T08:07:09.570

这对我有用，

*   通过或下载 zip从[https://github.com/slime/slime](https://github.com/slime/slime)获取 Slime 副本。`git clone`解压缩并保存在 中`D:/myuser/slime-2.13`，例如
*   下载并安装[CLISP](http://sourceforge.net/projects/clisp/)
*   将此添加到`.emacs`文件中，通常位于`C:/users/myuser/AppData/Roaming`：

    ```
    ; This is the path where you've saved Slime in the first step
    (add-to-list 'load-path "D:/myuser/slime-2.13/")
    (require 'slime-autoloads)
    ; This is the path where CLISP was installed. 
    ; Use Progra~1 for "Program Files" and Progra~2 for "Program Files (x86)"
    (setq inferior-lisp-program "/C/Progra~2/clisp-2.49/clisp.exe") 
    ```

# cocoa-touch - UIView 中的 touchesBegan 未被调用

> ID：11412101
> 
> 赞同：9
> 
> 时间：2012-07-10T11:14:42.477
> 
> 标签：cocoa-touch, uiview

我知道这个问题一定已经回答了很多次了，但我不知道为什么`touchesBegan:`我的`UIView`.

在我将它添加到我的应用程序之前，我做了一个试验项目来做一些测试。我所做`UIView`的`touchesBegan:`是实现的子类 a 并将其添加为另一个视图的子视图。超级视图有一个按钮，`UIView`单击后会显示子类。一切都按预期工作。

但是，当我在现有应用程序中执行相同操作时，从未调用该`touchesBegan:`方法以及. `touchesMoved:`谁能解释是什么阻止了这些方法被调用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T09:10:01.503

我刚刚找到了这个问题的答案。我意识到 superview 的`UIView`设置`userInteraction`为禁用（这是默认值）。因此，当我启用`userInteraction`超级视图时，现在可以识别触摸。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-08T22:08:51.787

在我的情况下是没有被调用`background = UIColor.clearColor()`的原因。`touchesBegan`它显然不调用透明元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-02T09:31:19.360

我在这个问题上苦苦挣扎了一段时间......我想通了。我认为*touchesBegan*覆盖函数在主视图上侦听：ViewController 的情节提要树上的第一个！我很想发布我的故事板的图像以更清晰，但我不能！;)

无论如何，**如果**您有子视图，它们可能会覆盖主视图......以这种方式触摸不会“到达”主视图。

为避免这种情况，您必须将**Attribute Inspector**中的**Background**属性设置为**所有 SUBVIEWS的****默认值**。这样背景将是透明的，触摸将能够到达主视图。

 ******如果您不想将背景设置为透明，您可以执行以下操作：

- 添加最后一个视图的出口（背景设置）

- 添加轻击*手势识别*器

- 处理处理键盘的水龙头

ES。

在属性中：

```
//The last view's outlet
@IBOutlet weak var ContainerView: UIView! 
```

在 viewDidLoad() 中：

```
let tap = UITapGestureRecognizer(target: self, action: Selector("handleTap:"))
self.ContainerView.addGestureRecognizer(tap) 
```

外部：

```
func handleTap(recognizer: UITapGestureRecognizer){
    self.view.endEditing(true)
} 
```******

# javascript - 在 IE9 中单击带有 javascript 的 LinkBut ton

> ID：11412103
> 
> 赞同：0
> 
> 时间：2012-07-10T11:14:43.447
> 
> 标签：javascript, asp.net, internet-explorer

我在中继器中有几个链接按钮。当我手动单击它们时，它们会很好地回发。我所有通过 javascript 点击 LinkBut​​ton 的尝试都失败了，我现在的想法已经用完了（谷歌也是如此，似乎找不到任何其他选项）。我试图在 OnClick 和 OnCommand 之间切换。

链接按钮：

```
<asp:Repeater ID="repItems" runat="server" OnItemDataBound="repItems_OnItemDataBound">
    <ItemTemplate>
        <asp:Panel ID="pnlItem" runat="server">                       
            <asp:LinkButton ID="lnkItem" runat="server" OnClick="lnkItem_OnClick" OnCommand="lnkItem_OnCommand"></asp:LinkButton>                  
        </asp:Panel>
    </ItemTemplate>        
</asp:Repeater> 
```

Javascript：

```
eval(LinkButton.attr('href'); //Causes Sys.ParameterCountException
LinkButton.click();           //Nothing happens (no click event on LinkButton)
LinkButton.trigger('click');  //Same as LinkButton.click() 
```

如果我将 OnClientClick 设置为回发，则 click() 函数开始工作，但我再次收到 Sys.ParameterCountException 错误：

```
lnkItem.OnClientClick = String.Format("__doPostBack('{0}', '');", lnkItem.UniqueID); 
```

有人建议将 ScriptManager 更改为发布模式，但这并没有触发回发，它只是删除了错误消息。

`eval(LinkButton.attr('href');`确实在谷歌浏览器中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:58:27.443

我不确定您遇到了什么问题，但以下内容对我有用。

澳交所：

```
<asp:Repeater ID="repItems" runat="server">
    <ItemTemplate>
        <asp:Panel ID="pnlItem" runat="server">                       
            <asp:LinkButton ID="lnkItem" runat="server" Text='<%# Eval("Text") %>' OnClick="lnkItem_OnClick" OnCommand="lnkItem_OnCommand"></asp:LinkButton>                  
        </asp:Panel>
    </ItemTemplate>        
</asp:Repeater>

<button onclick="document.getElementById('MainContent_repItems_lnkItem_0').click(); return false;">Huzzah!</button> 
```

代码隐藏：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        List<Item> test = new List<Item>();
        test.Add(new Item { Text = "Item 1" } );
        test.Add(new Item { Text = "Item 2" } );
        repItems.DataSource = test;
        repItems.DataBind();
    }

    protected void lnkItem_OnClick(object sender, EventArgs e)
    {
        this.Controls.Add(new Literal() { Text = ((LinkButton)sender).Text });
    }

    protected void lnkItem_OnCommand(object sender, EventArgs e)
    {
        this.Controls.Add(new Literal() { Text = ((LinkButton)sender).Text });
    } 
```

在此示例中 OnClick 和 OnCommand 都会触发。

# wpf - 在 ListView 中禁用键盘箭头导航

> ID：11412104
> 
> 赞同：1
> 
> 时间：2012-07-10T11:14:48.063
> 
> 标签：wpf, xaml, keyboard

我有一个 ListView，我正在尝试禁用各个项目之间的键盘导航。我尝试将 KeyboardNavigation.DirectionalNavigation="None" 设置为 ListView、其 PanelTemplate 以及单个项目。都没有奏效。

此外，键盘方向导航搞砸了 - 面板是一个包裹面板，按箭头导航混乱，有时它也会在两个孩子之间循环，没有机会用箭头跳到其他孩子。这就是我想禁用的原因，尽管纠正它会更好。

以下是相关代码：

```
<ListView IsTabStop="False" ItemsSource="{Binding Symbols}" SelectedItem="{Binding Selected,Mode=TwoWay}" IsSynchronizedWithCurrentItem="True" KeyboardNavigation.DirectionalNavigation="None">

<ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal" Width="210" Margin="0,12" KeyboardNavigation.DirectionalNavigation="None" />
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>

 <ListView.ItemTemplate>
            <DataTemplate>
                <Border Width="24" Height="24" Background="White"
          BorderBrush="Black" BorderThickness="1 1 1 1" Margin="0"
                        KeyboardNavigation.IsTabStop="False" KeyboardNavigation.DirectionalNavigation="None">
                    <TextBlock Text="{Binding Text}" FontSize="20" VerticalAlignment="Center" HorizontalAlignment="Center" x:Name="textBlock" FontFamily="Verdana, Arial"/>
                </Border>
            </DataTemplate>
        </ListView.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:21:18.687

只需为 PreviewKeyDown 事件添加一个处理程序：

```
 private void listView1_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        switch(e.Key)
        {
            case Key.Left:
            case Key.Right:
            case Key.Up:
            case Key.Down:
                e.Handled = true;
                break;
            default:
                break;
        }
    } 
```

# html - css 滚动/触摸幻灯片视图 - 如何使用 -ms-scroll-snap 等？

> ID：11412105
> 
> 赞同：0
> 
> 时间：2012-07-10T11:14:48.650
> 
> 标签：html, css, touch

[我在http://msdn.microsoft.com/en-us/library/windows/apps/hh466066.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh466066.aspx)上发现了控制滚动和捕捉的新 css

我想知道是否有一个教程或示例来解释它是如何工作的以及使用这些 css 属性。

我正在开发一个（基于angularjs的）日历，我想知道是否可以使用css扩展它以支持几个月的触摸平移（比如用手指导航的win8日历）。

[http://jsfiddle.net/johnnayweiler/FyrtQ/](http://jsfiddle.net/johnnayweiler/FyrtQ/)

如何使用 like -ms-scroll-snap 让视图随手指移动，然后捕捉到下一页？当滚动量达到这个快照点（下个月加载）时，建议知道哪些 js 事件。

当然，其他浏览器中是否有类似的东西（这似乎不是标准功能）？可能使用 javascript，是否有一些简单的解决方案来处理动量和快照？

谢谢你的想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:59:35.377

现在有一个官方示例；） [http://code.msdn.microsoft.com/ie/Scrolling-panning-and-6834aaf9/sourcecode?fileId=68336&pathId=380363024](http://code.msdn.microsoft.com/ie/Scrolling-panning-and-6834aaf9/sourcecode?fileId=68336&pathId=380363024)

# facebook - 限制 Facebook Graph 查询

> ID：11412114
> 
> 赞同：0
> 
> 时间：2012-07-10T11:15:12.400
> 
> 标签：facebook

是否有任何可能的方法将 facebook 图形查询结果限制在特定国家，而不仅仅是语言？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:31:44.673

我认为目前这是不可能的。之前在下面的链接中回答了这个问题：

[按国家/地区过滤的 Facebook 公开帖子](https://stackoverflow.com/questions/9916495/facebook-public-posts-filtered-by-country)

# linux - Linux 帐户的 Web 应用程序身份验证

> ID：11412115
> 
> 赞同：2
> 
> 时间：2012-07-10T11:15:15.800
> 
> 标签：linux, authentication, login, web

我有一个具有用户身份验证系统的 Web 应用程序。对于我正在构建的应用程序，我需要用户登录到一个 linux 机器。我想知道是否有办法可以将 linux 配置为使用 web 应用程序身份验证后端而不是引用 /etc/passwd。

# c# - 使用 GetModifiedMembers 查找值的 Linq-to-sql 日志记录

> ID：11412116
> 
> 赞同：1
> 
> 时间：2012-07-10T11:15:16.690
> 
> 标签：c#, asp.net, linq-to-sql, logging, lookup

我正在使用 Entity.GetModifiedMembers() 来记录实体的更新值。但是由于存在查找值，因此修改后的成员被视为相关的查找 Id。

为了使客户从日志视图中看到的视图尽可能用户友好，我想获取更新后的属性“名称”值而不是 Id。

例子：

```
//Entities
public class User
{
    Id { get; set; }
    Name { get; set; }
    FacultyId { get; set; }
}

public class UserFaculty
{
    Id { get; set; }
    Name { get; set; }
}

//Update Operation
public UpdateSomething
{
    var user = GetUser();
    user.FacultyId = SomeFacultyId;

    //Log operation
    Log(Entity.User.GetModifiedMembers());
    Entity.SubmitChanges();
} 
```

日志视图：

```
Updated Entity | Updated Field | Original Value | New Value
User             FacultyId       3                SomeFacultyId 
```

而不是上面的视图，我想要如下视图：

```
Updated Entity | Updated Field | Original Value | New Value
User             FacultyId       OldFacultyName   SomeFacultyName 
```

我愿意接受建议。我并不是要在这一点之后找到确切的方法，如果有任何一点不是那么理想，那么我想听听我出错的每个方面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:54:53.923

您需要在 linq 类中公开一个方法，该方法将 SomeFacultyID 作为输入并返回 FacultyName。

# html - 如何在jsp中使用音频标签

> ID：11412119
> 
> 赞同：0
> 
> 时间：2012-07-10T11:15:34.927
> 
> 标签：html, jsp, html5-audio

我想在带有 html5 音频标签的 jsp 页面中播放 mp3 或 ogg 文件。当我在纯 html 页面中使用音频标签时，一切正常，但是当我尝试在 jsp 页面中使用它时，似乎没有任何效果。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%--<%@page contentType="audio/mpeg3" pageEncoding="UTF-8"%>--%>
<!DOCTYPE html>
<html>
<head>
<!--        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">-->
    <title>JSP Page</title>
</head>
<body>
    <h1>Hello World!</h1>
    <br>
    <audio controls="controls">  
        <source src="/home/stelios/html5/recit.mp3" type="audio/mp3" />
        Your browser does not support the audio tag.
    </audio> 
</body>
</html> 
```

我也尝试将 contentType 设置为 audio/mpeg3 但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:23:46.363

网址

```
http://localhost:8080/home/stelios/html5/recit.mp3 
```

可能不存在（假设您的 Web 容器在您自己机器上的端口 8080 上运行）。

标记的`src`属性`audio`是 URL，而不是客户端或服务器机器上的文件路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:30:31.223

具体来说，浏览器旨在检测嵌入文件的 MIME 类型。尝试使用嵌入标签而不是源标签。embed 标签用于在 jsp 中包含音频文件。

例如：

```
<%@ taglib uri="http://java.sun.com/jstl/core" %>

<html>
<head><title>Choose Your Tunes</title></head>
<body>

<h2>Thanks for listining to the song:</h2>

<embed src="ConstantCraving.mp3" width="240" height="160">
</embed>

</body>
</html> 
```

它只是一个示例代码，未经测试。

另一个问题可能是源文件不可用。

如果您可以指定错误，则更容易提供帮助

# jsf - 使用 dataTable 管理动态数量的字符串

> ID：11412123
> 
> 赞同：0
> 
> 时间：2012-07-10T11:15:45.520
> 
> 标签：jsf, richfaces, jsf-1.2, seam2

我已经陷入了这个困境：

```
 <rich:dataTable id="tabA" value="#{m.a}" rowKeyVar="nr" var="ex">
        <rich:column><h:outputText value="Exercise #{nr + 1}:" /></rich:column>
        <rich:column><h:inputText value="#{ex}" /></rich:column>
    </rich:dataTable>
    <h:panelGrid columns="2">
        <a4j:commandButton value="+" title="new" ajaxSingle="true"
            action="#{m.createNewExercise}" reRender="tabA"/>
        <a4j:commandButton value="-" title="remove last" ajaxSingle="true"
            action="#{m.deleteExercise}" reRender="tabA"/>
    </h:panelGrid> 
```

因为这是更大表格的一部分，所以我设置了`ajaxSingle="true"`.

我正在迭代的值是一个字符串列表，定义如下：

```
@Entity
public class M {
    ...
    private List<String> a = Lists.newArrayList();

    @CollectionOfElements
    public List<String> getA() { return a; }
    public void setA(List<String> a) { this.a = a; }
} 
```

这在提交时无法更新支持列表`a`（提交是通过简单的 完成的`<h:commandButton>`）。由于`inputText`提交了元素的内容，JSF 似乎无法应用这些值。也许有人可以阐明这是否是`@CollectionOfElements`因为`M`.

所以我正在寻找的是一种`ex`在调用`createNewExercise`or时保存值的方法`deleteExercise`，要么不必重新渲染完整的表，要么先将它们发送到服务器。

[我可能可以通过此处](http://www.coderanch.com/t/212595/JSF/java/InputText-DataTable-does-not-store)建议的绑定使其工作，但我对避免绑定开销的方法感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:06:49.353

简单的方法：将[`@KeepAlive`](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_keepAlive.html)注释添加到您的 M bean。有了这个，您的 bean 将为您在同一视图上的每个请求保存和恢复，您无需担心在会话中保存 bean 数据并在（几乎）每个请求上恢复。

更难的方法：您必须将列表值保存在会话中，并在 M bean 上的每个请求中恢复它。

建议：如果可以，请转到 JSF 2 和 RF 4。在 JSF 2 中，已经有一个 ViewScope 可以解决此类问题（以及更多问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:48:14.483

问题在于`ajaxSingle="true"`属性，再加上 JSF 明显无法更新`@CollectionOfElements`.

的描述`ajaxSingle`清楚地表明它跳过了不属于它的组件的所有模型更新（**不是**dataTable 也不是它的 value 属性）。所以这是经典的PEBKAC。

但这仍然无法在没有 ajaxSingle 的情况下工作，这让我在测试该选项时相信 JSF 方面是可以的。

我最终得到的是：

```
<rich:dataTable id="tabA" value="#{m.a}" rowKeyVar="nr" var="ex">
    <rich:column><h:outputText value="Exercise #{nr + 1}:" /></rich:column>
    <rich:column><h:inputText value="#{ex}" /></rich:column>
</rich:dataTable>
<h:panelGrid columns="2">
    <a4j:commandButton value="+" title="new"
        action="#{m.createNewExercise}" reRender="tabA"/>
    <a4j:commandButton value="-" title="remove last"
        action="#{m.deleteExercise}" reRender="tabA"/>
</h:panelGrid> 
```

还有豆子：

```
@Entity
public class M {
  ...
  private List<Exercise> a = Lists.newArrayList();

  @OneToMany(cascade = CascadeType.ALL)
  @JoinColumn(name = "ex_id")
  public List<Exercise> getA() { return a; }
  public void setA(List<Exercise> a) { this.a = a; }
}

@Entity
public class Exercise {
  [id definition omitted]
  private M m;
  private String description;

  @ManyToOne
  @JoinColumn(name = "ex_id", insertable = false, updatable =false)
  public M getM() { return m; }
  public void setM(M m) { this.m = m; }

  public String getDescription() { return description; }
  public void setDescription(String d) { this.description = d; }
} 
```

# css - 全高固定左侧边栏实现

> ID：11412126
> 
> 赞同：4
> 
> 时间：2012-07-10T11:15:59.910
> 
> 标签：css, html, twitter-bootstrap

我正在尝试使用*Twitter Bootstrap*和 Fluid Layout 实现以下场景：

*   **左侧边栏**（我不在乎宽度是否固定） - 占据整个高度（根本没有边距，就像[jsfiddle.net](http://www.jsfiddle.net)中的边栏）
*   最右边的部分内容，会占据窗口的剩余部分（流体）

我试过这样设置，但它肯定不起作用（到处都有边距，*列肯定不会占据所有垂直空间*）：

```
<div class="container-fluid" style="">
    <div class="row-fluid" style="">
        <div class="span3" style="">
        </div>

        <div class="span9" style='background:#fff;'>
        </div>
    </div>
</div> 
```

有任何想法吗？你会怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-10T12:22:26.477

不完全确定，但我认为这可能有效......

将 height:100% 放在页面的 html 和 body 元素上。

然后给要成为页面全高的元素 min-height:100%

希望有帮助。

# c# - 访问 DOM 以将 HTML 表值存储/获取到不同的对象中？

> ID：11412127
> 
> 赞同：0
> 
> 时间：2012-07-10T11:16:00.753
> 
> 标签：c#, asp.net, winforms, html, c#-4.0

我正在使用 C#.Net 以编程方式在网页上触发事件。其中一个按钮事件（单击）以表格格式在不同页面中提供搜索结果。我想从该页面中提取表数据并将它们存储在数组或列表或数据表..

```
<div id = "results" >
<table class = "scroll" id = "list5" cellspacing ="0" cellpadding="0">
<tbody id = "0">
<tbody class = "hrblank">
<tbody class = "G" id="1">
<tr class = "r1">
<td class="i1">
<tbody class="hrblank">
<tbody class="G" id="3">
<tr class="r1"> 
```

关于如何做到这一点的任何建议？

# python - python for循环扩展

> ID：11412132
> 
> 赞同：0
> 
> 时间：2012-07-10T11:16:13.100
> 
> 标签：python

我想知道为什么 for 循环没有扩展它的迭代：

```
 for link in frontLinks:  
        #try:           
        getCurlink = self.getHref(link) # get current site links
        #print getCurlink
        #print frontLinks 
        if getCurlink:
            frontLinks = frontLinks + getCurlink 
```

这一行：

```
frontLinks = frontLinks + getCurlink 
```

不适用于“for”循环的frontLinks。有任何想法吗？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T11:18:57.487

for 循环对其表达式求值一次，以获得一个迭代器。稍后，您将名称重新绑定为`frontLinks`新列表。新列表与 for 循环没有任何关系。

虽然在迭代列表时修改列表很棘手，但可以添加到列表的末尾，它会起作用。将最后一行更改为：

```
frontLinks.extend(getCurlink) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:17:44.363

迭代列表时，您不会在列表中看到更改。

你需要使用类似的东西：

```
 while i < len(frontLinks):
     link = frontLinks[i]
     ...
     if condition:
       frontLinks.append(item)
     i += 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:42:45.043

虽然您可以在迭代时附加到列表，但我会使用一个列表和一个双端队列（您可以使用列表而不是双端队列，只需替换`todo.popleft()`为`todo.pop(0)`）：

```
from collections import deque

done = []
todo = deque(frontLinks) # your initial frontLinks
while todo:
    link = todo.popleft() # take the first element from todo
    getCurlink = self.getHref(link) # get current site links
    if getCurlink:
        todo.extend(getCurlink) # extend the todo list
    done.append(link) 
```

这样，您总是有两个具有明确角色的集合：`todo`和`done`. 您可以停止/恢复迭代、转储/加载当前状态等，而无需重新启动整个过程。

# c# - 如何使用互操作在 powerpoit 中获取图像形状的文件格式

> ID：11412134
> 
> 赞同：0
> 
> 时间：2012-07-10T11:16:13.727
> 
> 标签：c#, image, interop, powerpoint

我需要使用 interop 和 c# 获取 PowerPoint 演示文稿（2007 和 2010）中的所有 GIF 图片，但是 shape.PictureFormat.GetType() 不包含任何有用的信息，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:24:01.737

当用户添加图像时，原始文件名（带扩展名）默认保存为形状“替代文本”（右键单击形状/大小和位置/替代文本）。

但是用户可以更改它，因此对于某些图像，您可能没有数据。

相反，如果您可以控制图像插入，则可以将该信息存储到特定的 shape.tag 属性中，然后稍后再读取。

# google-chrome - Safari 处理 z-index 而不是 Chrome (rotationY)

> ID：11412135
> 
> 赞同：0
> 
> 时间：2012-07-10T11:16:14.567
> 
> 标签：google-chrome, css, safari, z-index

我正在用 CSS3 创建 3D 翻转卡片。

在谷歌浏览器中，它完全符合它应该做的事情，但 Safari 的 z-index 似乎有一些问题。

Safari 行为（错误）：http: [//i.stack.imgur.com/z4O9N.png](http://i.stack.imgur.com/z4O9N.png)

Chrome 行为（正确）：http: [//i.stack.imgur.com/EX2Jw.png](http://i.stack.imgur.com/EX2Jw.png)

示例演示：http: [//jsfiddle.net/Widmore/XJFAy/7/](http://jsfiddle.net/Widmore/XJFAy/7/)

有谁熟悉这个问题？谢谢！

# java - Java - 键值决策

> ID：11412140
> 
> 赞同：0
> 
> 时间：2012-07-10T11:16:24.530
> 
> 标签：java

将以下业务规则存储在文件中以便它们可以应用于作为键的输入值的最佳方法是什么？

```
Key-INDIA; Value-Delhi.
Key-Australia; Value-Canberra.
Key-Germany, Value-Berlin. 
```

一种解决方案：- Xml

```
<Countries>
  <India>Delhi</India>
  <Australia>Canberra</Australia>
  <Germany>Berlin</Germany>
</Countries> 
```

由于规则的数量将> 1000；使用 Map 实现它是不可能的。

问候，Shreyas。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:20:35.930

使用`.properties`文件并将它们存储在键值对中。

```
India=Delhi.
Australia=Canberra.
Germany=Berlin. 
```

并用于`java.util.Properties`按照 hmjd 的指示读取该文件。

例如 ：

```
 Properties prop = new Properties();      
        try {
               //load a properties file
            prop.load(new FileInputStream("countries.properties"));

               //get the property value and print it out
                System.out.println(prop.getProperty("India"));
            System.out.println(prop.getProperty("Australia"));
            System.out.println(prop.getProperty("Germany"));

        } catch (IOException ex) {
            ex.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:19:40.977

用于`java.util.Properties`从文件写入和读取：

```
Properties p = new Properties();
p.setProperty("Australia", "Canberra");
p.setProperty("Germany", "Berlin");

File f = new File("my.properties");
FileOutputStream fos = new FileOutputStream(f);
p.store(fos, "my properties"); 
```

用于`p.load()`从文件中读回它们并`p.getProperty()`在加载后查询它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:23:29.407

Create a properties file (like file.properties):

```
INDIA=Delhi.
Australia=Canberra.
Germany=Berlin. 
```

Then in the code:

```
public static void main(String[] args) {
            Properties prop = new Properties();
            try {
                    prop.load(new FileInputStream("file.properties"));
                    String value= prop.getProperty("INDIA");
                    ...

            } catch (Exception e) {
            }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:23:51.737

Have you looked at [Spring configuration](http://static.springsource.org/spring/docs/2.0.x/reference/beans.html) ? That way you can/create a map in config and store object definitions per key. e.g.

```
 <map>
      <entry key="India" value="Delhi">
   </map> 
```

You're talking about business rules but at the moment you're simply storing a key/value pair. If those rules become more complex then a simple key/value pair won't suffice. So perhaps you need something like:

```
 Map<String, Country> 
```

in your code, and Country is an object with (for now) a capital city, but in the future it would contain (say) locations, or an international phone number prefix, or a tax rule etc. In Spring it would resemble:

```
 <map>
      <entry key="India" ref="india"/>
  </map>

  <!-- create a subclass of Country -->
  <bean id="india" class="com.example.India"> 
```

I realise this is considerably more complex than the other suggestions here. However since you're talking about rules, I suspect you'll be looking to configure/define some sort of behaviour. You can do this using properties (or similar) but likely you'll end up with different properties sets for the different behavioural aspects of your rules. That rapidly becomes a real maintenance nightmare.

# iphone - 分组表视图中的多项选择

> ID：11412156
> 
> 赞同：1
> 
> 时间：2012-07-10T11:17:09.347
> 
> 标签：iphone, objective-c, ios5, uitableview

我正在使用具有多个部分的分组表视图。而且我必须在 indexpath 方法的 didselectrow 上实现多项选择的功能。我的代码如下。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)path
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:path];
    if (cell.accessoryType == UITableViewCellAccessoryCheckmark)
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
} 
```

这允许我选择多个单元格，但是当我滚动我的表格视图时，我的选择消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:33:49.877

滚动时您的选择会消失，因为它调用 cellForRowAtIndexPath 并且您没有处理选择。

为避免此问题，您可以执行以下操作：在 didSelectRowAtIndexPath 中，您可以保存所选行的索引路径，如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)path
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:path];
    if (cell.accessoryType == UITableViewCellAccessoryCheckmark)
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
        //remove index path
        [selectedIndexPathArray removeObject:path];
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        [selectedIndexPathArray addObject:path];
    }
} 
```

并且`cellForRowAtIndexPath`您可以检查是否选择了单元格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //If selectedIndexPathArray contains current index path then display checkmark.
    if([selectedIndexPathArray containsObject:indexPath])
       cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:18:44.083

试试这个

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];

    if (self.tableView.isEditing) {
        cell.selectionStyle = UITableViewCellSelectionStyleBlue;
    } else {
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    return cell;
}

-(UITableViewCellEditingStyle) tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    return UITableViewCellEditingStyleMultiSelect;
}

-(IBAction) switchEditing {
    [self.tableView setEditing:![self.tableView isEditing]];
    [self.tableView reloadData]; // force reload to reset selection style
} 
```

希望这有助于解决您的问题。（[参考](https://stackoverflow.com/questions/4890900/multi-select-table-view-cell-and-no-selection-style)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:21:02.123

您的选择消失了，因为该方法`CellForRowAtIndexPath`将在滚动时调用。您需要重新设置附件。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    ...
    // here
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:43:56.157

你遇到这个问题是因为你没有跟踪你的行选择。当回调方法**cellForRowAtIndexPath**被调用为已经消失/（向上/向下滚动）的行时，单元格对象不再记得它是否被选中。（因为这些选择正在消失）

我建议您使用**NSMutableArray/NSArray**之类的集合来跟踪选定的行。您可以使用其中任何一种方法。

这将是一个快速的工作修复：根据用户选择添加/删除**didSelectRowAtIndexPath**中的索引路径对象，然后根据该数组的内容，您可以切换相应单元格的 cell.accessoryType 的值。

理想情况下，您可以使用带有一些名为**selected**的布尔成员的数据 bean/模型，并且您可以根据所做的选择更新其值。然后，您可以将那些有意义的数据 bean 对象添加到您的数组中，而不是简单地添加那些索引路径并获得从 bean 的**选定**属性返回选择。这种方法将帮助您取回行选择，即使用户杀死并重新启动应用程序**，只要您将 bean 对象持久保存在数据库/存档中**..（但这一切都取决于您的使用案例和要求！）

希望这有帮助！

# jit - Asp.net 4.5“多核抖动”不起作用

> ID：11412159
> 
> 赞同：0
> 
> 时间：2012-07-10T11:17:11.313
> 
> 标签：jit, asp.net-4.5

我想利用 .net 4.5 中新的多核抖动功能。

*   我的 web.config 设置为 targetFramework="4.5"
*   IIS中的应用程序池框架设置为v4.0（据我了解，是正确的）
*   我的处理器是具有 4 个内核（或 8 个具有超线程）的 i7 - [http://ark.intel.com/products/52214/](http://ark.intel.com/products/52214/)

但它似乎并没有减少 JIT 编译时间（基于性能分析），而且我看不到任何 *.prof 文件在 ASP.NET 临时文件中创建的证据。

我怎样才能找到造成这种情况的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:37:40.270

后台 JIT 编译在某些特定情况下可能不起作用。您可以使用 PerfView [http://www.microsoft.com/en-us/download/details.aspx?id=28567对其进行调试](http://www.microsoft.com/en-us/download/details.aspx?id=28567)

从文档中可以看出，主要原因如下：

> 1.  加载模块时，可能会调用模块构造函数，这可能会产生副作用（即使这种情况非常罕见）。因此，如果后台 JITTing 会导致模块比其他情况更早加载，它可能会暴露（罕见的）错误。因为后台 JIT 有一个非常高的兼容性栏，它通过使用在 JIT 编译时加载的 EXACT 模块标记每个方法来防止这种情况发生，并且只允许在所有这些 EXACT 模块也加载后进行后台 JIT 编译当前运行。因此，如果您有一个场景（比如打开菜单），有时会加载更多或更少的模块（因为之前的用户操作导致加载不同的模块），那么后台 JIT 可能无法正常工作。
>     
>     
> 2.  如果您已将回调附加到 System.Assembly.ModuleResolve 事件，那么如果 ModuleResolve 回调在第二次运行时返回的答案与在首轮。由于这个背景，第一次调用 ModuleResolve 回调时，JIT 编译会暂停。
>     
>     
> 3.  因为任何失败的模块查找，都会在它最终失败之前调用 ModuleResolve 事件，这意味着对失败的模块的任何探测也将禁止后台 JIT 编译。

我建议检查未通过后台 JIT 的程序集是否暴露了这些问题之一。为此，请在您的应用程序启动之前启动一个新的集合，并在完成后停止它。不要忘记检查 Advanced 部分中的*Background JIT*选项。

在 JITStats 部分中，您应该得到如下内容：

```
Total Number of JIT compiled methods : 10,673 
Total MSec JIT compiling : 9,873 
This process uses Background JIT compilation (System.Runtime.ProfileOptimize) 
WARNING: Background JIT aborted at 11,847.909 Msec 
The last assembly before the abort was 'NHibernate.XmlSerializers' loaded unsuccessfully at 11,793.741 
Methods Background JITTed : 0 
Percent # Methods Background JITTed : 0.0% 
```

**更新**

与场景 3 相关，对于 ASP.NET，ASP.NET 本身处理 ModuleResolve 事件，因此任何无法加载的模块都会导致 MCJ 在 ASP.NET 应用程序中中止。

# java - GPL 下的 Java 库

> ID：11412160
> 
> 赞同：4
> 
> 时间：2012-07-10T11:17:15.487
> 
> 标签：java, gpl

如果 GPL 下的 java 库以 .jar 的形式发布，那么专有项目是否可以合法地将这个 .jar 包含在其应用程序分发中并使用其中的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:19:25.037

只有专有项目也是开源的。但是，LGPL 许可证确实允许这样做。

对于像 JAR 文件这样的动态链接文件，关于 GPL 的不同意见比比皆是。因此，如果您对不太明确的答案感到满意，那么您的问题的答案是“也许”。除非您能负担得起昂贵的律师费用并且手头有很多时间，否则我建议您坚持“不”的原始答案。

# wolfram-mathematica - Manipulate 不接受常量（即只是数字）作为变量的上限

> ID：11412166
> 
> 赞同：1
> 
> 时间：2012-07-10T11:17:36.797
> 
> 标签：wolfram-mathematica, mathematica-cdf

在下面的代码中，如果我将 (4/([Zeta]*[Omega])) 更改为 20，则不会绘制任何内容。为什么？如果我在开始时删除两个滑块，则不会绘制任何内容

```
ClearAll[\[Zeta], \[Omega]]
{Slider[ Dynamic[\[Zeta]], {0.1, 1.4, 0.1}], Dynamic[\[Zeta]]}
{Slider[ Dynamic[\[Omega]], {1, 5, 0.1}], Dynamic[\[Omega]]}
tf[\[Omega]_, \[Zeta]_] := 
 TransferFunctionModel[\[Omega]^2/(s^2 + 
     2 \[Zeta] \[Omega] s + \[Omega]^2), s]
f[t_] = OutputResponse[tf[\[Omega], \[Zeta]], UnitStep[t], t];
Manipulate[
 Plot[f[t], {t, 0, (4/(\[Zeta]*\[Omega]))}, 
  PlotRange -> {{0, (4/(\[Zeta]*\[Omega]))}, {0, 2}}], {{\[Zeta], 
   0.2}, 0.1, 1.4}, {{\[Omega], 1}, 0.5, 4}
 ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:04:46.653

```
tf[o_, z_] := TransferFunctionModel[o^2/(s^2 + 2 z o s + o^2), s]
f[t_, o_, z_] = OutputResponse[tf[o, z], UnitStep[t], t];
Manipulate[Plot[f[t, o, z], {t, 0, 20}, PlotRange -> {0, 2}], 
           {{z, 0.2}, 0.1, 1.4}, {{o, 1}, 0.5, 4}] 
```

![在此处输入图像描述](../Images/84505f51113721e8de8f8ed402b71c6f.png)

# c# - 是否可以有两个重叠的带有透明图像的 PictureBox 控件？

> ID：11412169
> 
> 赞同：16
> 
> 时间：2012-07-10T11:17:40.653
> 
> 标签：c#, .net, winforms, picturebox, alpha-transparency

有两个重叠的[`PictureBox`控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.aspx)，我试图使图片框的透明区域让下面的控件（按 z 顺序）可见。

即使在[尝试了微软的建议](http://msdn.microsoft.com/en-us/library/wk5b13s4.aspx)之后，我也无法得到想要的结果。

这是我目前拥有的：

![在此处输入图像描述](../Images/7b06a7b1f4f0eb695c7dc168ba4c651f.png)

这就是我想要的：

![在此处输入图像描述](../Images/59dc4bce2d9a17818f77fd5937538f88.png)

**所以我的问题是：**

`PictureBox`有什么方法可以通过两个相互重叠的控件（或其他方式）来实现我想要的结果并让透明区域发光？

**更新：**

实际上，我通过使用SO 问题“[带有 C# WinForms 的透明图像”的](https://stackoverflow.com/questions/395256/transparent-images-with-c-sharp-winforms)[答案解决了这个](https://stackoverflow.com/a/434706/107625)问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-10T12:47:44.043

尝试这个

```
private void Form1_Load(object sender, EventArgs e)
{
  // Transparent background...  
  pictureBoxOverlay.BackColor = Color.Transparent;

  // Change parent for overlay PictureBox...
  pictureBoxOverlay.Parent    = pictureBoxMain;

 // Change overlay PictureBox position in new parent...
 // pictureBoxOverlay.Location  = new Point(0, 0);
} 
```

结果

![在此处输入图像描述](../Images/52e0dfed6fa735c3bca3ec9812028c68.png)

[关联](http://dandar3.blogspot.it/2011/01/picturebox-with-transparent-overlay.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:41:18.413

据我所知，控件的透明度取决于其父控件（如您提供的链接中所述），这意味着为了获得您想要的效果，您需要将一个图片框嵌套到鉴于图片框不是容器，另一个图片框是不可能的。

但是，您可以使用自定义容器控件而不是父图像的图片框。最基本的控件是面板。只需设置控件的背景图片，并将第二个图片框放入其中即可。

另一种解决方案是使用单个图片框并手动管理渲染。

这是迄今为止最好的解决方案，因为另一种方法的伪模拟透明度非常低效。

# css - 如何.. 三个居中的中间 div 以及导航器是否已调整大小

> ID：11412172
> 
> 赞同：0
> 
> 时间：2012-07-10T11:17:45.150
> 
> 标签：css, html

对不起我的英语。

拜托，我的 div 有问题，我有 3 个水平“带图像”的 div，图像必须在一起。

如果屏幕足够大，这是默认视图。 ![开始](../Images/73f5b060bc7dace925cd4405e1c0081d.png)

如果导航器被调整大小，我会用#div2 失去中心。#div1 向左对齐，这不是我需要的。 ![问题](../Images/09d065732a8fa1439432ca9f69698450.png)

我需要的是#div2 保持在中心位置，但我不知道该怎么做。#div1 和 #div3 在导航器之外，没有一个 div 可以调整大小，都是固定大小。 ![我想要的是](../Images/e8ec8c1b0872cb0a8970834f4b18b2bc.png)

html代码：

```
<body id="body">
    <div id="wrap">
        <div id="baseLeftBg">
        </div>
        <div id="baseContent">
        </div>
        <div id="baseRightBg">
        </div>
    </div>
</body> 
```

CSS 代码：

```
#body {
    text-align: center;
    height: 100%;
    margin: 0 auto;
    padding: 0px;
    background: #ffffff;
    -moz-background-size: cover;
    background-size: cover;
    float: inherit;
}

#wrap { 
    width: 1484px;
    margin: 0 auto;
    text-align:center;
}

#baseLeftBg {
    margin-top: 60px;
    background: #CDCDCD;
    width: 286px;
    height: 776px;
    float: left;
}

#baseContent {
    margin-top: 60px;
    background: #A7A7A7;
    width: 911px;
    height: 776px;
    float: left;
}

#baseRightBg {
    margin-top: 60px;
    background: #CDCDCD;
    width: 286px;
    height: 776px;
    float: left;
} 
```

我怎么能这样做？

链接到小提琴：http: [//jsfiddle.net/murb83/BChLs/](http://jsfiddle.net/murb83/BChLs/)

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:23:57.953

为包装器制作文本对齐中心会很有帮助。这将显示中心的元素。

```
#wrap { 
    width: 1484px;
    margin: 0 auto;
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:38:18.660

也许您应该尝试使其动态化，百分比如下：

```
#baseLeftBg {
    ..
    width: 20%;
    ..
}

#baseContent {
    ..
    width: 60%;
    ..
}

#baseRightBg {
    ..
    width: 20%;
    ..
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:43:33.540

其他解决方案可能是这样使用绝对定位：

```
#wrap {
..
position:relative;
..
}

#baseLeftBg {
margin-top: 60px;
background: #CDCDCD;
width: 286px;
height: 776px;
position:absolute;
top:0;
left:0;
}

#baseContent {
margin-top: 60px;
background: #A7A7A7;
width: 911px;
height: 776px;
position:absolute;
top:0;
left:0;
right:0;
}

#baseRightBg {
margin-top: 60px;
background: #CDCDCD;
width: 286px;
height: 776px;
position:absolute;
top:0;
right:0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T12:21:47.783

您为什么不考虑使用 Javascript 来解决您的问题？
您应该有一个尽可能大的容器，其中包含三个 div，并且使用 javascript，根据屏幕宽度，您应该设置左边距（显然它可能是一个负数）。

然后，使用 JS，您还可以处理屏幕调整大小的事件以“调整”左边距

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T14:38:14.323

我找到了一种使用 jsQuery 的方法。

HTML

```
<body id="body">
    <div id="wrap">
        <div id="baseLeftBg">
        </div>
        <div id="baseContent">
        </div>
        <div id="baseRightBg">
        </div>
    </div>
</body>​ 
```

CSS

```
#body {
    text-align: center;
    height: 100%;
    margin: 0 auto;
    padding: 0px;
    background: #ffffff;
    -moz-background-size: cover;
    background-size: cover;
    float: inherit;
}

#wrap { 
    width: 500px;
    height: 300px;
}

#baseLeftBg {
    background: #CDCDCD;
    width: 100px;
    height: 300px;
    float: left;
}

#baseContent {
    background: #A7A7A7;
    width: 300px;
    height: 300px;
    float: left;
}

#baseRightBg {
    background: #CDCDCD;
    width: 100px;
    height: 300px;
    float: left;
}​ 
```

JS查询

```
$(window).resize(function(){
  $('#wrap').css({
    position:'absolute',
    left: ($(window).width() - $('#wrap').outerWidth())/2,
    top: ($(window).height() - $('#wrap').outerHeight())/2
  });
});

// To initially run the function:
$(window).resize();

var $scrollingDiv = $("#wrap");
     $(window).scroll(function(){            
        $scrollingDiv.stop().animate({"marginTop": ($(window).scrollTop() + 0) + "px"}, 500, 'easeInOutSine' );            
     }); 
```

查看实际操作：http: [//jsfiddle.net/murb83/BChLs/](http://jsfiddle.net/murb83/BChLs/ "jsFiddle")

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T14:20:53.927

那就是没有 JS 的解决方案目前对我来说还可以......

```
#wrap { 
    margin-top: 5%; 
    left: 50%;
    margin-left: -742px;
    position: absolute;
    width: 1484px;
    height: 776px;
} 
```

# java - 如何从聊天机器人向客户发送聊天消息？

> ID：11412174
> 
> 赞同：1
> 
> 时间：2012-07-10T11:17:48.223
> 
> 标签：java, eclipse, google-app-engine, xmpp

我制作了一个机器人，它可以在客户端发送消息时回复。我想向客户发送消息，而他们不向我发送消息。我不想在每条消息中编码。有人可以为此建议一种方法吗？谢谢你。

```
XMPPService xmpps = XMPPServiceFactory.getXMPPService();
Message msg = xmpps.parseMessage(req);
.....
......
msg = new MessageBuilder()
    .withRecipientJids(jid)
    .withBody(respMsg)
    .build();
xmpps.sendMessage(msg); 
```

上面的代码所做的是，它在收到来自客户端的消息后发送消息。我的机器人基本上会通知客户重要的公告。所以假设我想在他们不问的情况下告诉他们一些重要的事情。我只想发送一条消息，我的所有客户都应该收到它。我需要客户的 JID 吗？如果是这样，那么我该如何获得它们？我是xmpp的新手，请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:55:31.287

不可能一次向所有 jou xmpp 联系人广播消息。你必须一一解决。如果您深入查看 xmpp 代码，您会看到状态更新将广播给所有未离线的联系人。也许你可以利用它来发挥你的优势。

# c# - 动态生成的复选框的选中属性显示为 false，无论其实际状态如何

> ID：11412175
> 
> 赞同：0
> 
> 时间：2012-07-10T11:17:51.993
> 
> 标签：c#, asp.net, web-controls

我有一个 asp:Table，它使用页面上的控件填充了“产品”（一个“添加”按钮和一个用于数量的文本框）。在我后面的代码中，每当要添加表项时，我首先创建一个 Product 实例，设置其属性，然后将其添加到产品列表中。然后我对表格执行以下操作： - 清除其行集合 - 添加标题行 - 将表格绑定到产品列表 - 缓存产品列表，以备后用

表格中的每一行都以一个包含复选框的单元格开头。表格下方是一个“全部清除”链接按钮。当单击 Clear All LinkBut​​ton 时，我将其引导到一个方法以循环遍历所有 CheckBox，确定它们是否被选中，如果选中 == true，则删除产品列表中的相应条目。因此，理论上，当我将 Products 列表重新绑定到 Table 时，应删除选中其 CheckBoxes 的行。

如果表中有单个行，则此方法有效：调试时，CheckBox 的选中属性显示为“true”，并且该行被删除。但是，如果多于一行，则所有 CheckBox 的已选中属性显示为“false”，并且不会删除任何内容。

编辑 - 它实际上似乎删除了表格的最后一行，尽管其余的 CheckBoxes 被视为未检查。

这是页面上的表格：

```
<asp:Table ID="tblProducts" runat="server">
<asp:TableHeaderRow ID="tblProductsHead" runat="server" BorderStyle="Solid">
    <asp:TableHeaderCell ID="colCheckBox" runat="server" Text="">
        <asp:CheckBox ID="chkSelectAll" runat="server" Text="" />
    </asp:TableHeaderCell>
    <asp:TableHeaderCell ID="colProduct" runat="server" Text="Product"><asp:TableHeaderCell>
    <asp:TableHeaderCell ID="colValue" runat="server" Text="Value"></asp:TableHeaderCell>
    <asp:TableHeaderCell ID="colQuantity" runat="server" Text="Quantity"></asp:TableHeaderCell>
    <asp:TableHeaderCell ID="colTotalValue" runat="server" Text="Total Value"></asp:TableHeaderCell>
</asp:TableHeaderRow>
</asp:Table>
<asp:LinkButton ID="lbtnClearAll" runat="server" Text="Clear All" 
    onclick="lbtnClearAll_Click"></asp:LinkButton> 
```

...这是代码隐藏的相关部分：

```
 private void ClearSelectedTableRows()
    {
        if (Cache["TableRows"] != null)
        {
            tableRows = Cache["TableRows"] as List<TableRow>;
            Cache.Remove("TableRows");

            TableRow row = new TableRow();
            CheckBox rowBox = new CheckBox();

            for (int i = 0; i < tableRows.Count; i++)
            {
                row = tblProducts.Rows[i+1]; // skip header row
                rowBox = row.Cells[0].Controls[0] as CheckBox;

                if (rowBox.Checked)
                    tableRows.RemoveAt(i);

            }

            TableRow headRow = tblProductsHead;
            tblProducts.Rows.Clear();
            tblProducts.Rows.Add(headRow);
            Cache.Insert("TableRows", tableRows, null, System.Web.Caching.Cache.NoAbsoluteExpiration, System.Web.Caching.Cache.NoSlidingExpiration);
            PopulateTable();                
        }
    }

private void PopulateTable()
    {
        if (Cache["TableRows"] != null)
        {
            List<TableRow> rows = Cache["TableRows"] as List<TableRow>;
            foreach (TableRow row in rows)
                tblProducts.Rows.Add(row);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:20:27.963

我也认为你的循环看起来很奇怪，并同意你也应该从 i=1 开始。一个快速的答案是在删除一行后立即使用 --i

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:44:29.507

有人留下了答案，说控件需要 ID 才能正确评估其属性，但随后将其删除。无论如何，这被证明是问题的根源。在创建代码中提供复选框 ID 后，它开始工作。

但是，使用 RemoveAt() 方法会导致更多问题；我使用“tableRows”列表的计数作为循环的长度，同时可能会改变循环内该列表的长度。

它现在已修复，这是更新的方法：

```
 private void ClearSelectedTableRows()
    {
        if (Cache["TableRows"] != null)
        {
            tableRows = Cache["TableRows"] as List<TableRow>;
            Cache.Remove("TableRows");

            TableRow row = new TableRow();
            CheckBox rowBox = new CheckBox();
            List<TableRow> rowsToRemove = new List<TableRow>();
            for (int i = 0; i < tableRows.Count; i++)
            {
                row = tblProducts.Rows[i+1]; // skip header row
                rowBox = row.Cells[0].Controls[0] as CheckBox;

                if (rowBox.Checked)
                    rowsToRemove.Add(tableRows[i]);                    
            }

            foreach (TableRow removeRow in rowsToRemove)
            {
                if (tableRows.Contains(removeRow))
                    tableRows.Remove(removeRow);
            }

            TableRow headRow = tblProductsHead;
            tblProducts.Rows.Clear();
            tblProducts.Rows.Add(headRow);
            Cache.Insert("TableRows", tableRows, null, System.Web.Caching.Cache.NoAbsoluteExpiration, System.Web.Caching.Cache.NoSlidingExpiration);
            PopulateTable();                
        }            
    } 
```

感谢那些帮助过的人，感谢幻影回答者！

# php - 将哈希偏移 28px 以适应登录 Wordpress 用户的管理栏

> ID：11412176
> 
> 赞同：0
> 
> 时间：2012-07-10T11:17:54.183
> 
> 标签：php, wordpress, hash, hyperlink

由于在我的 Wordpress 网站上为登录用户显示的管理栏，哈希链接无法按我希望的那样工作，即它们可以正常工作，但哈希 div 的顶部被 Wordpress 管理员遮住了酒吧。所以我想知道是否有一种方法，对于登录的用户，所有哈希的位置可以偏移 28px，以便它们正确显示。

据推测，如果有一个脚本可以做到这一点，我需要将它添加到我的 functions.php 文件中并将其包装在：

```
if (is_user_logged_in()) :

[script here]

endif; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:23:56.757

您实际上会想在 JavaScript 中执行此操作。我假设您正在运行 jQuery。您可以使用以下代码。这将一直运行它：

```
jQuery(document).ready(function(){

    jQuery(window).bind("hashchange", function() {
        jQuery("html,body").scrollTop(jQuery(window).scrollTop() - 28);
    });

});​ 
```

如果您只希望它在登录时运行，您可以使用您建议的 PHP 从您的模板中回显，其内容类似于（未测试）：

```
if (is_user_logged_in()) :

echo '<script>jQuery(document).ready(function(){

        jQuery(window).bind("hashchange", function() {
            jQuery("html,body").scrollTop(jQuery(window).scrollTop() - 28);
        });

      });​&lt;/script>';

endif; 
```

工作示例：http: [//jsfiddle.net/smUr4/](http://jsfiddle.net/smUr4/)

托马斯

# sql - WHERE IN 的数组中可以放置多少项？

> ID：11412179
> 
> 赞同：1
> 
> 时间：2012-07-10T11:18:02.163
> 
> 标签：sql, oracle, where-clause

我有一个查询

```
SELECT [whatever] FROM [somewhere] WHERE [someValue] IN [value1, valeue2, ..., valueN] 
```

Oracle 10g 数据库中 N（来自上面的 valueN）的最大大小是多少？它可能高达10k或50k吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:30:40.073

如手册中所述，Oracle 对 IN 子句有 1000 个元素的固定限制：

[http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions013.htm#i1050801](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions013.htm#i1050801)

> *您最多可以在 expression_list 中指定 1000 个表达式。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T11:32:33.480

如果您使用的是[`IN`condition](http://docs.oracle.com/cd/B19306_01/server.102/b14200/conditions013.htm)的“表达式列表”版本，尽管您缺少值列表周围的括号，但您的问题似乎就是这种情况，那么您会受到[表达式列表](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions014.htm)本身的限制：

> 以逗号分隔的表达式列表最多可以包含 1000 个表达式。以逗号分隔的表达式集合列表可以包含任意数量的集合，但每个集合最多可以包含 1000 个表达式。

如果您使用的是子查询版本，那么除了可能的系统资源外，没有限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T11:35:18.873

该[线程](https://forums.oracle.com/forums/thread.jspa?threadID=908874%20thread)建议限制为 1000。但是，我建议您甚至不要去那里，而是将您的值放在一个表中并将您的查询变成一个子选择。更整洁、更灵活、性能更好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-10T11:29:04.753

这取决于该特定列的行数。在某些情况下，它可能是您在 table 中拥有的数百万条记录。

# visual-studio - 使用 RegEx 和完整文件路径的 ProdPowerTools 中的选项卡颜色

> ID：11412180
> 
> 赞同：1
> 
> 时间：2012-07-10T11:18:02.760
> 
> 标签：visual-studio, colors, tabs, productivity-power-tools

我刚刚在VS2010上安装了PPT。可以按项目和 reg.ex 为选项卡着色。（文件名）。可能有人知道是否可以通过完整的文件名/路径进行着色？

例如：我有两个文件“Index.cshml”，一个放在“User\”子文件夹中，一个放在“Products\”中。如果我将颜色 Reg.Ex 设置为“.User *.* ”，那么只有那些名称中有“User”的文件才会被着色：“Controllers\UserController.cs”而不是“Views\User\Index.cshml”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T12:07:27.403

有设置使用正则表达式的完整文档路径。

![PPT 选项](../Images/7e038d5ae082060edd47377468b4bed7.png)

# image-processing - 一组 3D 模型点与其图像投影之间的对应关系

> ID：11412185
> 
> 赞同：1
> 
> 时间：2012-07-10T11:18:17.443
> 
> 标签：image-processing, opencv, computer-vision

我有一组 3-d 点和一些带有这些点投影的图像。我还有相机的焦距和带有投影的图像的主要点（由先前完成的相机校准产生）。

给定这些参数，有什么方法可以找到 3-d 点和图像投影之间的自动对应关系？我浏览了一些 OpenCV 文档，但直到现在我还没有找到合适的东西。我正在寻找一种方法来自动标记投影以及它们与 3-d 点之间的对应关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:11:54.910

这个问题不是很清楚，但我*认为*你的意思是说你有相机的内在校准，而不是它相对于场景的位置和姿态（校准的“外在”部分）。

如果您只有一张图像，则此问题对于一般 3d 点云没有唯一的解决方案：请注意，如果您将 3d 点沿着将它们投射到相机中的光线移动到任何位置，图像不会改变。

如果有一张或多张图像，您就知道关于 3D 点云的所有信息（例如，这些点属于已知形状和大小的对象，并且位于其上的已知位置），并且您已经将它们与它们的图像进行了匹配，那么它是一个标准的“相机切除”问题：您只需解决使 3D 点投影到其图像上的相机外部参数。

如果您有多个图像并且您知道在相机移动时场景是静态的，并且您可以在每个相机位置将“足够”的 3d 点与它们的图像匹配，您可以按比例求解相机姿势。您可能想从 David Nister 和/或 Henrik Stewenius 的关于校准相机求解器的论文开始，然后研究“捆绑调整”。

如果你真的想了解这个（广泛的）主题，Zisserman 和 Hartley 的[书](http://www.robots.ox.ac.uk/~vgg/hzbook/index.html)和​​任何书一样好。有关代码，请查看[libmv](http://code.google.com/p/libmv/)、[vxl](http://vxl.sourceforge.net/)和[ceres](http://code.google.com/p/ceres-solver/)捆绑调节器。

# php - Symfony 直接管理资产

> ID：11412187
> 
> 赞同：2
> 
> 时间：2012-07-10T11:18:24.993
> 
> 标签：php, symfony

很抱歉打开另一个主题，但经过数小时的研究，我还没有找到解决方案：

如[symfony 的文档](http://symfony.com/doc/current/cookbook/assetic/asset_management.html)中所述，我想直接包含我的资产（css、js、图像），而不使用 Assetic。该文档推荐以下代码片段：

```
<script src="{{ asset('js/script.js') }}" type="text/javascript" /> 
```

`404 file not found`不幸的是，每次尝试都会以错误告终。我已将我的资产放在`myBundle/Resources/public`文件夹中，并且我也将其复制到`web`文件夹中，`php app/console assets:install web`但没有成功。

我在这里想念什么？是否缺少配置？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:40:25.350

`asset('js/script.js')`将产生一个链接，如`/js/script.js`. 这些文件将被复制到一个`bundles`文件夹，而不是`web`根目录。你想要这样的东西来生成正确的 URL：

```
<script src="{{ asset('bundles/myBundle/js/script.js') }}" type="text/javascript"></script> 
```

（另请注意，`script`标签需要关闭`</script>`才能使它们跨浏览器工作。）

# jquery - Jquery 模态对话框仅在第一次单击时显示

> ID：11412189
> 
> 赞同：1
> 
> 时间：2012-07-10T11:18:40.127
> 
> 标签：jquery, jquery-ui, onclick, jquery-ui-dialog

以下代码仅适用于第一次单击事件。但是，对于任何后续点击都不会发生任何事情。

```
<input type="submit" name="add" value="Add it" onClick="javascript:Add(); return false;">

function Add()
{
   $(function(){
    var dialogOpts = {
        width: 880,
        height: 270,
        minWidth: 880,
        minHeight: 270,
        maxWidth: 890,
        maxHeight: 300
    };
    $("#add").dialog(dialogOpts);
    });
 } 
```

如果我从以下位置删除 return false：

```
<input type="submit" name="add" value="Add it" onClick="javascript:Add(); return false;"> 
```

我让它适用于 Firefox，但在 IE8 中，窗口显示一到两秒钟，然后消失（缓存清理和所有）。

我在这个网络上似乎有很多关于这个问题的例子，但我担心我对 jquery 太陌生而无法应用它们:(

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:31:01.853

写这个来实例化你的对话框：

```
$(function(){

    $diag = $("#add");
    var dialogOpts = {
        width: 880,
        height: 270,
        minWidth: 880,
        minHeight: 270,
        maxWidth: 890,
        maxHeight: 300,
        autoOpen: false
    };
    $diag.dialog(dialogOpts); // This instantiates the dialog once.
    //And then add this eventhandler:
    $("input[name='add']").click(function(){
       $diag.dialog('open');
    });
}); 
```

并删除所有内联的`onclick`东西 - 尽可能避免它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:22:46.740

你想删除你的一些代码:) "javascript:" 不是必需的

```
<input type="submit" name="add" value="Add it" onClick="Add();"> 
```

并且不需要在dom准备好的部分

```
function Add()
{
    var dialogOpts = {
        width: 880,
        height: 270,
        minWidth: 880,
        minHeight: 270,
        maxWidth: 890,
        maxHeight: 300
    };
    $("#add").dialog(dialogOpts);
 } 
```

# cakephp - CakePHP 2.2 - 两个不同的应用程序和一个会话

> ID：11412193
> 
> 赞同：2
> 
> 时间：2012-07-10T11:18:49.763
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我有**一个数据库 - （用户，管理员）。** 我有 2 个应用程序。**（应用程序/登录，后端/登录）**。

因此，当我使用管理员数据在“后端”登录时，我不想在“应用程序”上使用相同的数据登录。

在同一个浏览器下，如何在 CakePHP 中为两个不同的应用程序获取**两个不同的会话？**

我想用**/backend 下的管理员**和**/application 下的用户**登录。

CakePHP 2.2.0。

谢谢你们。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:23:11.730

解决了。在 app/Config/core.php 中：

应用：

```
Configure::write('Session', array(
        'defaults' => 'cake',
        'ini' => array(
            'session.cookie_path' => '/application',
        ),
        'cookie' => 'my_cookie',
    )); 
```

后端：

```
Configure::write('Session', array(
        'defaults' => 'cake',
        'ini' => array(
            'session.cookie_path' => '/backend',
        ),
        'cookie' => 'my_cookie_2',
    )); 
```

不管怎么说，还是要谢谢你。:D 在这几个小时里我学到了很多东西。:D

# java - 通过电子邮件更新带有图片的状态。(Java 邮件)

> ID：11412195
> 
> 赞同：0
> 
> 时间：2012-07-10T11:18:51.773
> 
> 标签：java, email, jakarta-mail, processing, facebook-timeline

我正在处理中编写一个独立的应用程序，我需要通过 JavaMail 在 FB 页面时间轴上发布草图截图。所以我写了这个：

```
void sendMail() {

  String host="smtp.gmail.com";
  Properties props=new Properties();

  props.put("mail.transport.protocol", "smtp");
  props.put("mail.smtp.host", host);
  props.put("mail.smtp.port", "587");
  props.put("mail.smtp.auth", "true");
  props.put("mail.smtp.starttls.enable","true");

  Session session = Session.getDefaultInstance(props, new Auth());

  try
  {

    MimeMessage message = new MimeMessage(session);

    message.setFrom(new InternetAddress("xxxxx@gmail.com", "xxxxx"));

    message.setRecipients(Message.RecipientType.TO, InternetAddress.parse("xxxxxxxxxx@m.facebook.com", false));

    message.setSubject("ok");

    BodyPart mbp = new MimeBodyPart();
    DataSource fds = new FileDataSource(file);
    mbp.setDataHandler(new DataHandler(fds));
    mbp.setFileName("screen.png");
    Multipart mp = new MimeMultipart();
    mp.addBodyPart(mbp);
    message.setContent(mp);
    message.setSentDate(new Date());

    Transport.send(message);
    println("Mail sent!");
  }
  catch(Exception e)
  {
    println(e);
  }
} 
```

现在，当我写下我的 gmail 电子邮件作为收件人时 - 方法非常有效（我只收到主题和附件照片），但是当我使用我的 FB 页面电子邮件时 - 只有主题出现在我的时间轴中，没有照片。

我以前用 PHP 做过同样的事情，它工作。也许我错过了什么？

先感谢您！：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:49:03.380

好吧，我查看了原始消息的内容并注意到了这一点：

```
Content-Type: application/octet-stream; name=screen.png 
```

所以我只是在我的代码中添加了第三行：

```
MimeBodyPart mbp = new MimeBodyPart();
mbp.attachFile(new File(file));
mbp.setHeader("Content-Type", "image/png"); 
```

然后我得到：

```
Content-Type: image/png 
```

现在一切正常！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:21:38.170

您正在创建仅包含一个部分的多部分消息，并且该部分不是文本部分，而是图像部分。虽然根据 MIME 规范这是完全合法的，但它是“不寻常的”，也许 Facebook 电子邮件不准备处理这样的消息。

当您使用 PHP 做同样的事情时，您是否创建了具有相同结构的消息？

尝试不要创建多部分消息。相反，只需将图像设置为消息本身的内容。

另外，尝试创建一个多部分消息，第一部分是纯文本，第二部分是图像。

# iphone - 通知上的 performSelectorOnMainThread

> ID：11412200
> 
> 赞同：1
> 
> 时间：2012-07-10T11:19:05.363
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsnotificationcenter

我有一些基本的疑问，猜想有人会帮助我。

请参考这个问题：[下载文件时立即更新 ULabel](https://stackoverflow.com/questions/11411373/update-ulabel-immediately-while-downloading-files/)

我试过使用`performSelectorOnMainThread`，它在另一个类中调用 updateProgress 方法，但标签没有更新。

但现在我已经使用了类似的通知

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"updateProgress" object:nil userInfo:nil]; 
```

这似乎正在调用该方法并更新 UILabel。即使我的问题解决了，我想知道为什么上面`performSelectorOnMainThread`的方法对我不起作用？有什么具体原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:58:31.730

您进行`performSelectorOnMainThread`调用的类和`updateProgress`方法需要在同一个类中。如果没有，（在您的情况下），在`performSelectorOnMainThread`被调用的类中创建一个方法并将其重定向到`updateProgress`另一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:29:05.013

可`performSelectorOnMainThread`用于在主线程中运行一些代码。它似乎不是在另一个类上调用方法的方法（即使如果您有该类的工作实例，您也可以使用它在另一个类上调用该方法）。如果您在其中一个类中使用 API 调用，则可能必须使用单独的线程来执行 API 调用，因为它会阻塞主线程（这对使用您的应用程序的用户不利）。所以在 ios 中你必须只从主线程调用 UIKit。

`NSNotification`用于获取事件调用。我的意思是它在发生观察者注册以获得通知的特定事件时通知观察者。

希望这对您有所帮助。

# c# - asp.net controlIDs

> ID：11412202
> 
> 赞同：0
> 
> 时间：2012-07-10T11:19:06.197
> 
> 标签：c#, javascript, asp.net, button

我有以下代码：

```
<script type="text/javascript">    

    Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandle);
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);
    function beginRequestHandle(sender, Args) {
        //Do something when call begins. 

        document.getElementById("btn1").style.visibility = "hidden";
        document.getElementById("btn2").style.visibility = "hidden";
    }

    function endRequestHandle(sender, Args) {
        if (document.getElementById('<%= hfResultsCount.ClientID %>').value != 0) {
            document.getElementById("btn1").style.visibility = "visible";
            document.getElementById("btn2").style.visibility = "visible";
        }
        else {
            document.getElementById("results").innerHTML = "<br><b><center><font style='font-family:Haettenschweiler; font-size:xx-large'>No data found, please try again.</b></font></center>";
        }
    }
</script> 
```

和 btn2 的代码：

```
 <input type="button" runat="server" name="btn2" id="btn2" value="New Window"
 style="visibility:hidden;font-weight:bold;width:200" onclick="window.open('http://microsoft.com');" /> 
```

我正在使用 Js 来显示/隐藏按钮（需要这样做，所以不要提出其他建议），虽然`btn1`它`asp:button`总是有效，但`<input type=button>`我一直收到这个错误

```
Microsoft JScript runtime error: Unable to get value of the property 'style': object is null or undefined 
```

解决这个问题的方法`btn1`是添加`ClientID=Static`，但如何为`<input>`按钮做到这一点？（我不想让它成为 asp:button 因为我需要它不回发）

一切都在一个带有 ClientID=Static 的 UpdatePanel 中。

我知道它与 ID 和母版页有关，因为它可以在自己的页面上正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:22:51.790

If you do not need to access button on server side then you should not put runat="server", This will make your script to find button and it will not generate error.

```
<input type="button"  name="btn2" id="btn2" value="New Window"
 style="visibility:hidden;font-weight:bold;width:200" onclick="window.open('http://microsoft.com');" /> 
```

OR, If you want to make runat="server" you can access it like this

```
document.getElementById(<%= btn1.ClientID %>).style.visibility = "visible"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:21:28.003

After the page rendering go to view source and check how ID is appearing with master page you may get some idea

It might not be btn directly....master_xxx

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:54:29.813

这应该工作：

```
<input type="button" runat="server" ClientIDMode="Static" 
name="btn2" id="btn2" value="New Window"
style="visibility:hidden;font-weight:bold;width:200"
onclick="window.open('http://microsoft.com');"/> 
```

或者，如果您不需要访问后面代码中的控件：

```
<input type="button" name="btn2" id="btn2" value="New Window" 
style="visibility:hidden;font-weight:bold;width:200"
onclick="window.open('http://microsoft.com');"/> 
```

# java - Java/Linux：错误卡上的声音输出

> ID：11412205
> 
> 赞同：0
> 
> 时间：2012-07-10T11:19:17.363
> 
> 标签：java, linux, audio, javasound, alsa

我有一个 java 应用程序，可以在我的 linux 机器上重放一些 PCM 声音。不幸的是，它使用了错误的声卡。

我可以通过使用 .asoundrc 将 xine 引导到正确的声卡 - 但是我如何告诉 JVM 默认使用哪个声音输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:53:07.577

您知道如何列出可用/可见的“混合器”吗？这个 JavaTutorial 涵盖了这个主题。

[http://docs.oracle.com/javase/tutorial/sound/accessing.html](http://docs.oracle.com/javase/tutorial/sound/accessing.html)

如果它被列出，您可以编写 Java 应用程序来选择它。我不知道如何设置 JVM 声卡默认值。我猜这可能更像是一个操作系统问题。我认为 JVM 正在咨询 Linux 中的某个位置。

我希望这至少有点帮助。祝你好运！

# php - 选择列 magento

> ID：11412213
> 
> 赞同：0
> 
> 时间：2012-07-10T11:19:40.370
> 
> 标签：php, magento

我想知道如何选择列。上面你可以看到我想在控制器中写的sql。但我想以正确的方式做到这一点。像 magento 中的其他 sql 语句一样。

我尝试添加 ->columns('o.sku AS SKU') 但这不起作用。

有任何想法吗？提前致谢！

```
//sql
$readresult="SELECT o.name AS  'Product', o.sku AS  'SKU', c.entity_id AS  'Order', c.customer_email AS  'Email', c.customer_firstname AS  'Voornaam', c.customer_lastname AS  'Achternaam', c.customer_middlename AS  'Tussenvoegsel', o.product_options AS 'Options', a.telephone AS  'Telefoon', a.postcode AS  'Postcode', a.street AS  'Street', a.city AS  'City', c.increment_id AS 'Bestelnr' FROM magento_sales_flat_order AS c INNER JOIN magento_sales_flat_order_item AS o ON c.entity_id = o.order_id INNER JOIN magento_sales_flat_order_address AS a ON a.parent_id = c.entity_id WHERE o.product_id =".$product." GROUP BY c.entity_id ORDER BY o.sku;";

//THE MAGENTO WAY!
$resource = Mage::getSingleton('core/resource');
$read = $resource->getConnection('core_read');
$o = $resource->getTableName('magento_sales_flat_order');
$o_item = $resource->getTableName('magento_sales_flat_order_item');
$o_address = $resource->getTableName('magento_sales_flat_order_address');
$select = $read->select()->from(array('c'=>$o))
    ->join(array('o'=>$o_item), 'c.entity_id = o.order_id', array(o.sku AS  'SKU'))
    ->join(array('a'=>$o_address), 'a.parent_id = c.entity_id', array())
    ->where('o.product_id', $product)
    ->group('c.entity_id')
    ->order('o.sku'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:00:33.940

你根本不会像这样使用核心模块。那些低级 SQL 查询只能由资源模型*使用*。尤其是不在控制器内。

`Mage_Sales_Model_Resource_Order_Collection`您应该通过调用`Mage::getModel('sales/order')->getCollection()`并从那里构建您的查询来获得一个实例。只需查看源代码即可了解如何准确执行此操作；从 app/code/core/Mage/Sales/Model/Resource/Order/Collection.php 开始，沿着继承链向下工作。

例如，您可以添加一个`WHERE`using 之类的东西`$collection->addAttributeToSearchFilter()`。

Magento 有很好的数据库抽象，你肯定会使用它。

希望这可以帮助。

# xcode - 有什么方法可以使用 xcode for ios 应用程序远程访问 postgresql？

> ID：11412216
> 
> 赞同：2
> 
> 时间：2012-07-10T11:19:41.980
> 
> 标签：xcode, postgresql

任何尝试将 postgresql 与 xcode 连接到 ios 应用程序的人？我应该尝试什么？你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:21:57.267

The usual approach is to avoid making a direct connection but to route everything through an HTTP based API.

The iOS application then only needs to perform HTTP requests and parse the responses (which you can format using JSON).

You can write the HTTP API in the server side language of your choice.

* * *

It is possible to connect directly to the database, but you would have to write or otherwise acquire a Postgresql client library for iOS (which [appears to exist](https://stackoverflow.com/questions/4508997/compiling-libpq-with-ios-sdk-4-2), thanks Craig) and expose the database on the network (if the iOS application is going to connect over the Internet that means exposing the database directly to the Internet, which is generally considered to be a Bad Idea).

# c# - LINQ 的字数统计

> ID：11412218
> 
> 赞同：2
> 
> 时间：2012-07-10T11:19:45.210
> 
> 标签：c#, linq

我需要通过 LINQ 计算字数。这是我用来计算长字符串数组中单词的代码，但这不是很有效：

```
public static int WordCount(string haystack, string needle)
{
    if (needle == null)
    {
        return 0;
    }

    string[] source = haystack.Split(new char[] { '.', '?', '!', ' ', ';', ':', ',', '*', '-' }, StringSplitOptions.RemoveEmptyEntries);
    var matchQuery = from word in source
        where word.ToLowerInvariant() == needle.ToLowerInvariant()
        select word;
    int count=matchQuery.Count();
    return count;
} 
```

假设我有一个这样的字符串：

```
Geo Prism GEO 1995 GEO* - ABS #16213899 HGEO- 
```

如果我尝试在上面的句子中找到 GEO，我的例程不会返回正确的计数：我希望**4**。我的日常有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:23:27.107

Your code I think is almost right, but the reason you don't get 4 is because you need to do an "Contains" check since the last Geo is part of hgeo (assuming you meant to get 4, and not 3)

```
var matchQuery = from word in source
    where word.ToLowerInvariant.Contains(needle.ToLowerInvariant())
    select word; 
```

Also, you might find it gives you better mileage to split your text with:

```
Regex.Split(haystack, @"\W+") 
```

Which would split your text into a bunch of words, ignoring any grammar (untested, but I think should work)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T11:31:41.020

您可以使用 LINQ 将其作为单线：

```
void Main()
{
    string data = "Geo Prism GEO 1995 GEO* - ABS #16213899 HGEO-";
    var target = "GEO";
    var count = data.Select((c, i) => data.Substring(i)).Count(sub => sub.ToUpper().StartsWith(target));
    Console.WriteLine(count.ToString());
} 
```

* * *

**结果：**

```
4 
```

# c++ - “N”的模板参数无效，预期的编译时常量表达式

> ID：11412219
> 
> 赞同：2
> 
> 时间：2012-07-10T11:19:50.897
> 
> 标签：c++, templates

我正在创建一个高精度浮点库（用于教育目的），构造函数如下所示。

这个想法是有一个通用构造函数（第一个），然后是 std::string 和 std::bitset 的 2 个专用构造函数。

问题是我不断收到：“错误C2975：'Float'：'N'的无效模板参数，预期的编译时常量表达式”对于两个专门的构造函数。

谁能告诉我如何纠正这个问题？

提前致谢！

```
template<typename T>
Float(T n) {
    type_wrapper<T> data;
    data.in = n;
    bits = std::bitset<N>(data.out);
    _overflow = false;
}

template<>
Float< const std::bitset<N> >(const std::bitset<N> bits) {
    this->bits = bits;
    _overflow = false;
}

template<>
Float< const std::string& >(const std::string& s) {
    int n = std::min(N, s.length());
    for(int i = 0; i < n; i++) {
        bits[n-i-1] = (s.at(i) == '1' ? 1 : 0);
    }
    _overflow = false;
} 
```

编辑：我可能应该补充一点，我实际上是在构造一个具有恒定大小的 Float 对象，如下所示：

```
int main(int argc, char* argv[])
{
    Float<64> number("01011001100010001110010101100111");   //1502143847
    std::cout << number << std::endl;

    std::cin.get();
    return 0;
} 
```

此外，模板化参数“N”来自类定义，如下所示：

```
template<size_t N>
class Float
{
private:
    ...
public:
    ...
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:59:35.583

不要专门化你的构造函数，使用重载。

```
#include <cstdint>
#include <bitset>
#include <string>
#include <iostream>
template<std::size_t N>
class Float
{
private:

public:
  template<typename T>
  Float(const T& n) {
  }

  Float(const std::bitset<N>& bits) {
  }

  Float(const std::string& s) {
  }
};

int main()
{
    Float<64> number("01011001100010001110010101100111");   //1502143847

    std::cin.get();
    return 0;
} 
```

最初的错误可能是因为您在定义它们时没有完全限定您的构造。这应该是：

```
template<std::size_t N>
template<>
Float<N>::Float<const std::string&>(const std::string&) {} 
```

# cobol - COBOL 程序按顺序读取平面文件并将其写入输出文件，根本无法读取循环将无限循环

> ID：11412221
> 
> 赞同：-1
> 
> 时间：2012-07-10T11:20:00.553
> 
> 标签：cobol

我正在尝试编写 COBOL 程序以顺序读取平面文件并将其写入输出文件，我一次只能读取一条记录，无法读取下一条记录我该怎么办？

这是我的代码：

```
PROCEDURE DIVISION.                                           
    OPEN INPUT FILEX.                                         
    PERFORM READ-PARA THRU END-PARA UNTIL END-OF-FILE = 'Y'.  
    CLOSE FILEX.                                              
    STOP RUN.                                                 
READ-PARA.                                                    
    READ FILEX                                                
      AT END                                                  
    MOVE 'Y' TO END-OF-FILE                                   
    DISPLAY OFFCODE1                                          
    DISPLAY AGCODE1                                           
    DISPLAY POLNO1                                            
    DISPLAY EFFDATE1                                          
    DISPLAY EXPDATE                                           
    DISPLAY REPCODE                                           
    DISPLAY POLHOLDER1                                        
    DISPLAY LOCATION1                                         
    GO TO END-PARA.                                           
END-PARA. 
```

我，已经尝试使用范围终止符，仍然无法循环'我得到 S001 ABEND 这是我的代码：

```
IDENTIFICATION DIVISION.             
PROGRAM-ID. SIMPLE.                  
ENVIRONMENT DIVISION.                
INPUT-OUTPUT SECTION.                
FILE-CONTROL.                        
 SELECT FILEX ASSIGN TO SYSUT1   
 FILE STATUS IS FS.              
DATA DIVISION.                       
FILE SECTION.                        
FD  FILEX.                           
01  FILEXREC.                        
02 OFFCODE1 PIC X(3).            
02 FILLER PIC X.                 
02 AGCODE1 PIC X(3).             
02 FILLER PIC X.                 
02 POLNO1 PIC X(6).              
02 FILLER PIC X.                 
02 EFFDATE1 PIC X(8).            
02 FILLER PIC X.                                        
02 EXPDATE PIC X(8).                                    
02 FILLER PIC X.                                        
02 REPCODE PIC X(1)                                     
02 FILLER PIC X.                                        
02 POLHOLDER1 PIC X(8).                                 
02 FILLER PIC X.                                        
02 LOCATION1 PIC X(9).                                  
02 FILLER PIC X(87).                                    
WORKING-STORAGE SECTION.                                    
77  FS PIC 9(2).                                            
01  WS-INDICATORS.                                          
 10  WS-EOF-IND                    PIC X(01) VALUE 'N'.  
     88  WS-END-OF-FILE                      VALUE 'Y'.  
PROCEDURE DIVISION.                                         
 OPEN INPUT FILEX.                                       
 PERFORM READ-PARA THRU END-PARA UNTIL WS-END-OF-FILE.   
 CLOSE FILEX. 
 STOP RUN.                         
READ-PARA.                            
 READ FILEX                        
   AT END                          
      MOVE 'Y' TO WS-EOF-IND.      
   DISPLAY OFFCODE1                
   DISPLAY AGCODE1                 
   DISPLAY POLNO1                  
   DISPLAY EFFDATE1                
   DISPLAY EXPDATE                 
   DISPLAY REPCODE                 
   DISPLAY POLHOLDER1              
   DISPLAY LOCATION1               
   IF WS-END-OF-FILE               
      GO TO END-PARA.            
  END-PARA.                             
 EXIT. 
```

我甚至在此尝试的另一种方法仅适用于一条记录，在运行代码时再次获得 S001 ABEND。这是代码：

```
 IDENTIFICATION DIVISION.                  
   PROGRAM-ID. ASSIGNMENT.                   
   ENVIRONMENT DIVISION.                     
   INPUT-OUTPUT SECTION.                     
   FILE-CONTROL.                             
   SELECT FILEX ASSIGN TO SYSUT1         
   DATA DIVISION.                            
   FILE SECTION.                             
   FD  FILEX.                                
   LABEL RECORDS ARE STANDARD            
   RECORD CONTAINS  140  CHARACTERS      
   BLOCK CONTAINS  00  RECORDS.          
     01  FILEXREC.                             
      02 OFFCODE1 PIC 9(3).                 
      02 FILLER PIC X.                      
      02 AGCODE1 PIC X(3).                  
      02 FILLER PIC X.                      
      02 POLNO1 PIC X(6).                   
      02 FILLER PIC X.                                      
      02 EFFDATE1 PIC X(8).                                 
      02 FILLER PIC X.                                      
      02 EXPDATE1 PIC X(8).                                 
      02 FILLER PIC X.                                      
      02 REPCODE1 PIC X(1).                                 
      02 FILLER PIC X.                                      
      02 POLHOLDER1 PIC X(8).                               
      02 FILLER PIC X.                                      
      02 LOCATION1 PIC X(9).                                
      02 FILLER PIC X(26).                                  
  WORKING-STORAGE SECTION.                                  
   01  WS-INDICATORS.                                        
   10  WS-EOF-IND                    PIC X(01) VALUE 'N'.
    88  WS-END-OF-FILE                      VALUE 'Y'.

   01  TEMP1\.                                                
    02 OFFCODE2 PIC 9(3).                                 
    02 FILLER PIC X.                                      
    02 AGCODE2 PIC X(3).                                  
    02 FILLER PIC X.                                      
    02 POLNO2 PIC X(6).                                   
    02 FILLER PIC X.                                      
    02 EFFDATE2 PIC X(8).                                 
    02 FILLER PIC X.                                      
    02 EXPDATE2 PIC X(8).                                 
    02 FILLER PIC X.                                      
    02 REPCODE2 PIC X(1).                                 
    02 FILLER PIC X.                                      
    02 POLHOLDER2 PIC X(8).                               
    02 FILLER PIC X.                                      
    02 LOCATION2 PIC X(9).                                
    02 FILLER PIC X(26).                                  
 PROCEDURE DIVISION.                                       
 OPEN INPUT FILEX.                                     
 PERFORM READ-PARA THRU END-PARA UNTIL WS-END-OF-FILE. 
CLOSE FILEX.                                          
STOP RUN.                        
READ-PARA.                           
READ FILEX                       
     INTO TEMP1                  
  AT END                         
     MOVE 'Y' TO WS-EOF-IND.     
  DISPLAY OFFCODE1               
  DISPLAY AGCODE1                
  DISPLAY POLNO1                 
  DISPLAY EFFDATE1               
  DISPLAY EXPDATE1               
  DISPLAY REPCODE1               
  DISPLAY POLHOLDER1             
  DISPLAY LOCATION1              
        IF WS-END-OF-FILE        
           GO TO END-PARA.       
  END-PARA.                      
      EXIT. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T12:37:41.987

你真的应该使用你的 END- 终止符... END-PERFORM、END-IF、END-READ 等。

至于你的问题，如果我猜的话，我会说你不是只读取第一条记录，而是读取所有记录并只显示最后一条记录。您的 READ 语句有一个 AT END，一切都已完成，但它没有一个 NOT AT END 来告诉它如何处理已成功读取的记录。我通常这样编写我的 READ 语句：

```
READ FILE
  AT END
    SET FILE-EOF TO TRUE
  NOT AT END
    PERFORM PROCESS-RECORD
END-READ 
```

把它包装成这样的表演，效果很好：

```
SET FILE-NOT-EOF TO TRUE
PERFORM UNTIL FILE-EOF
  READ FILE
    AT END
      SET FILE-EOF TO TRUE
    NOT AT END
      PERFORM PROCESS-RECORD
  END-READ
END-PERFORM 
```

祝你好运，希望它对你有用。编写可靠的 COBOL 可能非常困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:38:15.187

我猜你还没等到:-)

在一个地方文件是 140，但定义只有 79。

您使用文件状态，但不检查它。您的文件可能没有成功打开，如果您检查了 FS 字段，您会发现这一点（狡猾的名称，但可能是从 IBM 示例中复制的）。

当您读取并获得文件结尾时，您设置了标志，但仍像您有记录一样处理。根据“事物”，这会给您带来错误的数据，或者让您异常终止。

GO TO END-PARA 没有意义，因为 END-PARA 无论如何都会紧随其后。

希望你回去查看 NealB 提供的代码，并在几个月前让事情顺利进行......

# django - django was_published_recently 错误

> ID：11412222
> 
> 赞同：2
> 
> 时间：2012-07-10T11:20:01.010
> 
> 标签：django

[在这里](https://docs.djangoproject.com/en/1.4/intro/tutorial02/)的教程中，我开始运行 was_published_recently 并收到此错误：

> 在 /admin/polls/poll/PollAdmin.list_display[2] 中配置不当，“was_published_recently”不是“PollAdmin”的可调用或属性，也不是在“Poll”模型中找到的。请求方法：GET 请求 URL：/admin/polls/poll/ Django 版本：1.4 异常类型：ImproperlyConfigured 异常值：
> PollAdmin.list_display[2]，“was_published_recently”不是“PollAdmin”的可调用或属性，也不是在模型“民意调查”。异常位置：C:\Python27\lib\site-packages\django\contrib\admin\validation.py 在验证中，第 38 行

这是我的代码：

```
from polls.models import Poll

from django.contrib import admin

from polls.models import Choice

class ChoiceInline(admin.TabularInline):
  model = Choice
  extra = 3

class PollAdmin(admin.ModelAdmin):

   fieldsets = [
    (None,               {'fields': ['question']}),
    ('Date information', {'fields': ['pub_date'], 'classes': ['collapse']}),
    ]
   inlines = [ChoiceInline]

class PollAdmin(admin.ModelAdmin):
   # ...
   list_display = ('question', 'pub_date', 'was_published_recently')

  admin.site.register(Poll, PollAdmin) 
```

这是我的投票模型

```
 from django.db import models

  class Poll(models.Model):
   question = models.CharField(max_length=200)
   pub_date = models.DateTimeField('date published')

  class Choice(models.Model):
   poll = models.ForeignKey(Poll)
   choice = models.CharField(max_length=200)
   votes = models.IntegerField()

  class Poll(models.Model):
   # ...
   def __unicode__(self):
    return self.question

  class Choice(models.Model):
    # ...
    def __unicode__(self):
    return self.choice 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T11:37:50.893

你能用你的`Poll`模型更新你的问题吗？

在教程 1[的使用 API 步骤](https://docs.djangoproject.com/en/1.4/intro/tutorial01/#s-playing-with-the-api)`was_published_recently`中将方法添加到`Poll`模型时，您似乎犯了一个错误。

# 更新：

现在你已经发布了你的模型，看起来你好像错过了这个`was_published_recently`方法。回到教程 1 并添加它。

其次，不要在 models.py 中多次包含每个模型 - 第二个将替换第一个。

# xml - XSD：根据前一个属性的值定义属性

> ID：11412224
> 
> 赞同：4
> 
> 时间：2012-07-10T11:20:07.863
> 
> 标签：xml, xsd, schema

我猜这个功能不存在，但我想我会再试一次。

我有一个我正在尝试验证的 XML 结构（我无法控制这个结构）。

在这个结构中，我可以有多个“条件”标签，每个标签都有一个属性“类型”，然后该标签中的其余属性取决于该类型是什么。因此，例如，如果它看起来像这样：

```
<Condition type="LessThan" maxAmount="3">
   <Effect type="Add" value="2" />
</Condition>
<Condition type="GreaterThan" minAmount="1">
   <Effect type="Transform" action="Skew" value="4"  />
   <Effect type="Transform" action="Stretch" value="3" />
</Condition>
<Condition type="Range" minAmount="1" maxAmount="3">
   <Effect type="YouGetTheDrift" />
</Condition> 
```

那么如果是LessThan类型，它只需要一个maxAmount标签，等等。

没有办法根据前一个属性的值来使属性成为必需/可选/禁止，嘿？

我尝试使用多个 Condition 标签创建一个选项，每个类型具有固定的类型值和自定义属性集，但它抱怨标签具有相同的名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:55:14.810

您所描述的功能的名称是“共现约束”，它们在 XSD 1.0 中不受支持。

您可以在 XSD 1.1 中使用“条件类型赋值”语法来执行此操作，其中元素的类型取决于其属性的值；你也可以使用断言来做到这一点。XSD 1.1 现在是最终的 W3C 建议，并在 Xerces 和 Saxon 中实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:32:21.857

你是对的，这个功能不存在。

它可以在[Schematron](http://www.schematron.com/)中完成，但我不知道它是否适合您的项目。

# asp.net-mvc-3 - 在 _Layout razor (master) 中动态加载 parial 列表

> ID：11412225
> 
> 赞同：0
> 
> 时间：2012-07-10T11:20:10.310
> 
> 标签：asp.net-mvc-3, razor, repository, partial

我在主 _Layout 中的 _Partial 遇到问题。

我的 _MemberList (Partial) 有自己的 ViewModel (MemberListViewModel)，我想在 _Layout 中加载这个 Partial，可能通过带有 Layout Attribute 或其他东西的 BaseController，这是最好的解决方案吗？

_MemberList 是动态加载的，它取决于用户选择的内容。

当我在 _Layout 中有一个强类型的 ViewModel 之前，它可以工作，但是当我尝试加载其他 ViewModel 时，它会要求 _Layout 中的那个，所以我想我必须为此找到另一个解决方案。

所以我需要的是“使用 _partial 在 _Layout(master) 中动态加载的列表”。

样品会很棒！

谢谢

# ios - MKMapView 发生奇怪的崩溃

> ID：11412232
> 
> 赞同：0
> 
> 时间：2012-07-10T11:20:32.103
> 
> 标签：ios, mkmapview

我有一个显示“显示路线”按钮的应用程序（在当前位置和以前固定的另一个位置之间）。好的，如果用户点击显示路线按钮，地图将打开并进行缩放，一切正常。但是，如果用户在缩放移动完成之前点击“返回”按钮，则应用程序崩溃。

我怎样才能避免用户按下后退按钮？有没有办法向用户隐藏它？

谢谢你。

PD：这是崩溃：

> -[RutaViewController respondsToSelector:]：消息发送到已释放实例 0x10227c30

然后，该应用程序只是冻结，没有显示一个`EXC_BAD_ACCESS`也没有`SIGABRT`信号......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:29:03.550

To fix the crash, try setting your mapView's delegate to nil in your view controller's `viewWillDisappear` method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:24:45.470

当您的地图开始缩放时，您能否将按钮设置为禁用？

例如：

```
-(void)zoomMap
{
   ...

   // set button as disable so user can't press it
   myButton.enabled = NO;

   // now start zooming
   [myMapView setRegion...];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:27:48.300

您可以在缩放之前隐藏后退按钮。并在缩放完成时显示。

```
backButton.hidden = YES; 
```

# ruby - Ruby 1.9 中新的哈希语法有什么好处？

> ID：11412242
> 
> 赞同：14
> 
> 时间：2012-07-10T11:21:08.707
> 
> 标签：ruby, syntax, ruby-1.9

除了使用符号作为键来定义散列时看起来更简洁之外，将散列编写为还有其他好处：

`{key1: "value1", key2: "value2"}`而不是`{:key1 => "value1", :key2 => "value2"}`？

另外，当您将字符串和符号混合作为哈希键时，约定是什么？

你是写成`{"key1" => "value1", key2: "value2"}`还是保持风格一致`{"key1" => "value1", :key => "value2"}`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T14:16:47.197

它只是看起来更好——它是语法糖；它最终成为同一件事。

混合密钥时（呃，你为什么要这样做？）我对整个哈希使用旧的哈希火箭语法。

对于符号值，我还对整个哈希使用旧的哈希火箭语法——这看起来很恶心：

```
{ ohai: :kthxbye } 
```

我不喜欢在同一个哈希中混合两种样式——我认为这很混乱。

不过，这一切都基于个人喜好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T14:17:03.343

它更短，类似于 JavaScript 表示法。不值得出于任何原因将旧符号迁移到新符号，否则请选择您喜欢的符号。

始终保持代码一致，不要混淆符号。这种方式更具可读性。

# memory - Would Terracota be a good solution for fast changing large data made up of fine objects?

> ID：11412248
> 
> 赞同：0
> 
> 时间：2012-07-10T11:21:29.387
> 
> 标签：memory, scalability, cpu, terracotta

I am evaluating Terracotta for my current problem statement. The process is CPU intensive and takes about 5-10 GB working memory(RAM). Each object in memory is 1 kilobyte fine and consists of a handful of primitive data types. The whole RAM data goes through thousands of iterations and each iteration changes all the objects. Each object is modified completely. The process takes days to finish.

The million+ objects are partitioned and now run on multiple core machines, but i need more power and much more RAM(for bigger problems). The data/objects processed by one thread is not shared with others

Would Terracota be a good solution? Would syncing up of the million of objects to the clustering server be a really bad bottleneck rendering it ineffective?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:20:53.633

我认为 Terracotta 最适合缓存和快速检索。作为放置率，我看到每个缓存服务器实例每秒有 10K“批量放置”。“批量更新”模式意味着您可以一次性放置一组条目，这将比单次放置更有效。

以下是批量更新的示例：

```
cache.setNodeBulkLoadEnabled(true);
try
{
  Collection<Element> entries= new ArrayList<Element>();
  while (...)
  {
    entries.add(new Element(key, value));
  }
  cache.putAll(entries);
}
finally
{
  cache.setNodeBulkLoadEnabled(false);
} 
```

此外，Terracotta 具有 BigMemory 功能，能够使用 JVM 堆之外的内存。要启用它，您必须在 ehcache.xml 中添加：

```
<cache name="com.xyz.MyPOJO" maxMemoryOffHeap="3g">
  <terracotta/>
</cache> 
```

上面的示例将在 JVM 之外使用 3Gig 的 Ram。一般来说，您的堆大小不应大于 4G，否则您的 JVM 将在 GC 上花费大量周期......在您的情况下，这会进一步减慢您的计算速度。

另一种检查方法是“计算/数据网格”解决方案。您可以从[http://www.gridgain.com](http://www.gridgain.com)和[http://www.gigaspaces.com开始](http://www.gigaspaces.com)

# powershell - Copy folder from remote machine (Azure) to remote machine

> ID：11412249
> 
> 赞同：3
> 
> 时间：2012-07-10T11:21:29.463
> 
> 标签：powershell, azure, powershell-remoting, azure-vm-role

I have two machines say Machine-A: An azure vm role on cloud. Machine-B: A machine on my network domain.

I **can remote login to both** MachineA and MachineB (using RDP) and copy say a folder 'temp' from location \MachineA.cloudapp.net\C$\temp to \MachineB\C$\

How do I achieve this programmatically, preferrably through powershell script?

I tried:

```
$rm = new-object RemoteMachine
$pass = ConvertTo-SecureString -AsPlainText $rm.Password -Force
$Cred = New-Object System.Management.Automation.PSCredential -ArgumentList $rm.Username,$pass
Invoke-Command -ComputerName $rm.MachineName -Credential $Cred -ScriptBlock{
#   Copy folder
} 
```

Where RemoteMachine is:

```
public class RemoteMachine
{
    public string MachineName="MachineA.cloudapp.net";
    public string Username="remote";
    public string Password="password";    
    }
} 
```

It fails with logon failure, though I use the same credentials for RDP. I have **another doubt, even if the login is possible, then how will MachineA will know about MachineB?**

Probably I am missing something simple and direct!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:54:51.677

需要在 VM 上启用 PowerShell 远程处理：

```
 PS> Enable-PSRemoting 
```

然后，您应该能够远程进入，并在该计算机上传递管理员的凭据：

```
Invoke-Command -ComputerName MachineA -Credential username -ScriptBlock {
#   Copy folder
} 
```

如果`username`是域帐户，请确保包含域（例如`DOMAIN\username`）。PowerShell 将提示您输入密码。

因为您是从 MachineA 复制到 MachineB，所以您可能会遇到双跳问题。要从 MachineA 连接到 MachineB，PowerShell 再次需要您的凭据（用户名/密码），而 MachineA 上没有这些凭据。您必须启用名为 CredSSP 的功能，以允许在机器之间存储和共享凭据。

*   接收凭据的机器必须配置为接收它们（即充当服务器）
*   发送凭据的机器必须配置为发送它们（即充当客户端）

有关启用 CredSSP 的详细信息，请参阅我[对此问题的回答。](https://stackoverflow.com/a/8436654/125356)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:43:43.443

您可以查看Bruce Payette 好书第 13 章中的[在多跳环境中转发凭据。](http://www.manning.com/payette2/SampleCh-13.pdf)

您可能需要 CredSSP 机制，该机制使您能够通过受信任的中介将您的凭据安全地传递给目标机器。

# iis - Unable to enable gzip compression for XHR responses in Azure Web Role

> ID：11412251
> 
> 赞同：1
> 
> 时间：2012-07-10T11:21:34.690
> 
> 标签：iis, iis-7, azure

Strangely I read tons of posts regarding the exact problem and many resolutions with it, but couldn't figure this out. So please read the following just to clarify what my problem is and what I have done so far to resolve the issue.

**Problem** : Unable to use dynamic compression for the xhr responses from my webservice hosted in an azure web role (instance has IIS 7.0), although javascript files (using mime type text/javascript) and aspx pages are properly loaded with gzip compression.

**Environment** : A medium azure instance running IIS 7.0

**What I have tried and verified to resolve the issue**

*   Make sure Azure CDN is disabled ( enabling azure cdn will disallow compression for xhr and this has to be resolved using different means. For instance by writing a custom web resource handler as explained here [Azure CDN - Enabling HTTP Compression - Hosted Web Role](https://stackoverflow.com/questions/10420004/azure-cdn-enabling-http-compression-hosted-web-role/10434390#10434390) ) (Done)
*   Make sure that the right applicationHost.config file is being targeted for editing if you're doing it manually. For instance on an IIS 7.0 running on 64-bit your applicationHost.config file would be located at %windir%\SYSWOW64\inetsrv\config and not in %windir%\System32\inetsrv\config folders. (Done)
*   Make sure dynamic compresion is enabled at IIS Server level and website level via IIS 7.0 (Done)
*   Verify that the applicationhost.config also has dynamic compression enabled. (Done)
*   Verify that appropriate mime types are used for compression. (Done) I have used the following mime types.
    *   add mimeType="application/json" enabled="true"
    *   add mimeType="application/json; charset=utf-8" enabled="true"
*   Verify that the size of the response meets the set threshold of the size of data that requires compression. (Done)
*   Recycle the application pool once the applicationhost.config file is edited for changes to httpCompression to take effect. (Done)
*   Verify that there's enough space on the directory where temporary files are created for compression. (Space available)
*   Verify that failed request logs do not show disabled compression errors. (No failed requests logged).

I guess the above ought to cover what I have tried and tested so far. Most people seem to have had issues related to the mime type but mine doesn't seem to be it.

Any suggestions or procedures that might help me sort this issue are welcome.

**UPDATE** : Added new step for verification. Please refer to step number 02 (Edited on 07/19/2012)

# objective-c - 自动引用计数——在同一个实现文件的其他地方使用一个值

> ID：11412252
> 
> 赞同：0
> 
> 时间：2012-07-10T11:21:35.533
> 
> 标签：objective-c, xcode, automatic-ref-counting

我正在将 ARC 与 TWRequest 一起使用。我已经成功地从 twitter 返回了一个搜索并创建了一个结果数组。这是我的代码...

```
NSArray *results = [dict objectForKey:@"results"];

//Loop through the results
NSMutableArray *twitterText = [[NSMutableArray alloc] init];

for (NSDictionary *tweet in results)
{
    // Get the tweet
    NSString *twittext = [tweet objectForKey:@"text"];

    // Save the tweet to the twitterText array
    [twitterText addObject:twittext];
}
NSLog(@"MY ************************TWITTERTEXT************** %@", twitterText ); 
```

我的问题是，我想稍后在 cellForRowAtIndexPath 下的 .m 文件中使用 twitterText，但是一旦循环（如上）完成，它就会在 ARC 下发布。

我已经在我的 .h 文件中将该属性设置为 strong （以及在循环之前在上面声明它 - 不确定我是否可以这样做，但如果我没有像上面那样声明 twitterText 返回 NULL）。

在上述循环之后直接打印日志可以很好地打印 twitterText 数组，但是 cellForRowAtIndex 路径方法中的相同日志返回一个空白，几乎就像它忘记了它的存在一样。任何帮助，将不胜感激。谢谢。艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:37:15.403

您正在本地上下文中声明变量 twitterText。因此，ARC 在方法完成后将其删除。如果您想在该方法的范围之外使用它，您应该像这样声明它。

```
.h
@property (nonatomic, strong) NSMutableArray *twitterText;

.m
@synthesize twitterText = _twitterText; // ivar optional

_twitterText = [[NSMutableArray alloc] init];

for (NSDictionary *tweet in results) {
    // Get the tweet
    NSString *twittext = [tweet objectForKey:@"text"];

    // Save the tweet to the twitterText array
    [_twitterText addObject:twittext];
}

-(void)someOtherMethod {
    NSLog(@"twitterText: %@", _twitterText);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:37:52.233

`NSMutableArray *twitterText` `@property`公开，因为它肯定会在函数生命周期结束后发布。如果没有 ARC 保留，它将正常工作并且对我有用。编辑尝试.h

```
@property (strong, nonatomic) NSMutableArray *twitterText; 
```

.m

```
@synthesize twitterText = _twitterText; 
```

在“ViewDidLoad”委托中

```
self.twitterText = [[NSMutableArray alloc]init]; 
```

在你的函数中

```
for (NSDictionary *tweet in results)
{
    [self.twitterText addObject:[tweet objectForKey:@"text"]];
} 
```

# tinymce - tinymce iframe 高度

> ID：11412256
> 
> 赞同：2
> 
> 时间：2012-07-10T11:21:39.527
> 
> 标签：tinymce

我正在使用 tinyMCE，页面上有 100 多个 texarea。初始化后创建的iframe，min-width=62px，即使里面只有一行。我可以以某种方式降低这个值吗？

第二个问题，在 Iframe 里面有一个 HTML 页面，body style="padding-bottom:50px"。是否可以减少它，否则 textarea 会占很多位置：/

![在此处输入图像描述](../Images/108d627b49fc8bac2f6e3f3cbdd336c6.png)

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T16:38:58.353

```
tinyMCE.init({
   ...
   autoresize_bottom_margin : 10,       
   theme : 'advanced',
   plugins : 'autoresize',
   ...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:40:37.150

是的，这是可能的。这里是：

```
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onInit.add(function(ed, evt) {

          var new_val = '30px';

          // adjust table element
          var elem = document.getElementById(ed.id + '_tbl');
          elem.style.height = new_val;

          // adjust iframe element
          var iframe = document.getElementById(ed.id + '_ifr');
          iframe.style.height = new_val;
      });
   }
}); 
```

# hadoop - external jars on hadoop 0.20.203

> ID：11412257
> 
> 赞同：0
> 
> 时间：2012-07-10T11:21:43.147
> 
> 标签：hadoop

I have to work with hadoop 0.20.203.I try to run a job that needs some external jars but I can't find out how to include them. I have tried 1) -libjars 2) putting the jars $HADOOP_HOME/lib but none of them seems to work. Is there any way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:41:39.880

您做得对，但您还需要在 HADOOP_CLASSPATH 中包含 .jar 文件，您可以在文件 $HADOOP_HOME/conf/hdfs-site 文件中对其进行修改。重新启动集群以使其生效。

# php - jquery <-> php 逻辑在哪一边

> ID：11412258
> 
> 赞同：1
> 
> 时间：2012-07-10T11:21:45.630
> 
> 标签：php, jquery

我有一个关于在 jquery 和 php 之间放置逻辑的问题。我正在写一个小网站，用户可以在其中输入不同的值。这些值相加并与保存在 mysql 数据库中的值相乘，然后再次输出给用户。

我的问题是这样做的更好方法是什么。

> A：让 Jquery 序列化表单并将所有值发送到 php。Php 从数据库中捕获 Post 变量和值，计算所有内容，将总和写入数据库并将所有内容返回给用户。
> 
> B：当用户启动脚本时，数据库的值从 PHP 发送到用户表单。现在 Jquery 进行所有计算。一切准备就绪后，Sum 将发送回 PHP 并写入数据库。

我问的原因是 A：通过验证给定值似乎更安全。但是B：对服务器比较友好。（在 Keyup 上触发 Jquery ajax，这意味着每次用户编辑表单时都会从数据库中查询该值。）

问候，

托尼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:24:50.200

你永远不应该相信客户。始终在服务器上验证，即使您在客户端上进行验证。

**在客户端**上进行验证可以提供更好的用户体验，因为它不需要访问服务器。

**在服务器**上进行验证可确保用户没有篡改数据。

简而言之：**两者都做。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:24:57.957

如果您的计算复杂到足以减慢您的服务器速度，我认为您的客户也不会希望在 javascript 中计算它们。如果我在字里行间阅读，我不认为这是一个如此大的计算，那么为什么不走安全（A）路线，让服务器这样做呢？

这样，您的客户就不会弄乱计算：他们可以将任何他们想要的东西发送到数据库（嘿，这是一个表格），但最终您会进行计算。

如果您不需要，请不要优化:)

# objective-c - ObjC：写入.plist，优化方式？

> ID：11412263
> 
> 赞同：1
> 
> 时间：2012-07-10T11:21:52.273
> 
> 标签：objective-c, ios, file-io, plist

例如，阅读这篇[文章](http://ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/)，将 NSDictionary 写入 plist 看起来很容易。现在，如果我只想修改现有 plist 的一行：有没有办法在不重写整个文件的情况下更新该行？

就像“更新数据库表中的一行时，我不必重写整个表”？

谢谢，J。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:32:41.160

**第一**：plist是针对非常琐碎的数据，所以应该不存在读写优化的问题。好像您需要优化它，这意味着您需要更改应用程序设计。

**第二**：plist基本上是一个xml文件，所以你当然可以使用xml解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:40:49.703

从理论上讲，在新值的字符串表示的长度占用与旧值一样多的字符的情况下，您可以更快地进行修改。但是，这将是微优化的一个坏情况：与重写整个表可能需要相当长的时间的数据库不同，就时间而言，重写整个 plist 应该被忽视。从任何标准来看，您在文件中定位和覆盖旧值的代码都不是很漂亮。它没有机会匹配重写整个事物的三行“读取-修改-写入”代码片段的清晰度。

这假设您将属性列表用于其预期目的，即存储相对少量的数据。如果您使用 plist 来存储中量到大量数据，则可能需要切换到使用数据库，其中允许更新单个行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:04:31.943

这其中的意义在哪里？

尽管已经说过，使用 XML 的 plist 是为少量数据而设计的，并且只有当新值不对您的值的长度（XML 中的字符串表示）进行任何更改时，它才能正常工作, 几乎没有任何讨价还价的余地。

坦率地说，我不知道集群（或者在 iOS 文件系统中命名的可分配磁盘空间的最小部分）的大小是多少，但我不希望它比典型 plist 文件的平均大小小得多。在我所知道的所有文件系统中，一个集群总是会一次性写入。即使程序员只是更改了一个字节并尝试仅将那个字节写回文件，操作系统也会始终将整个集群写入磁盘（或者我们仍然称之为磁盘的任何东西：）。

意思是——即使你努力，你也很难从那次尝试中得到任何东西。当然，除非您的数据结构相当大并且对于 plist 文件来说可能很复杂。在这种情况下，正如已经说过的那样，请考虑更改您正在使用的数据存储方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:32:31.957

从[另一个答案](https://stackoverflow.com/a/10950893/988769)：

* * *

你有：

1.  一个 plist 文件
2.  `NSMutableArray`加载此 plist的容器（例如）
3.  一个表格视图，它从这个容器中获取值。

通过表格视图修改 plist：

1.  更改容器中的值
2.  将容器写回 plist 文件。

# web-services - how to find full visitor GEO details by IP

> ID：11412264
> 
> 赞同：1
> 
> 时间：2012-07-10T11:21:56.333
> 
> 标签：web-services, api, rest, soap

when my site visitor enter it..i want him to see some geographic info like weather ,to do this task i need to get his Accurately full location details by IP like(( country,city,latitude ,longitude,time zone,else))but when search for web services. i cant find the service which give me this info for free and Accurately.so anyone help me to find this service.

some sites :

```
http://software77.net/geo-ip/
http://www.ip2location.com
http://www.maxmind.com/app/city
http://whatismyipaddress.com/ip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:19:18.443

以下是您可以找到答案的两个可能的地方：

[http://blog.programmableweb.com/2009/03/31/3-free-ways-to-geolocate-by-ip/](http://blog.programmableweb.com/2009/03/31/3-free-ways-to-geolocate-by-ip/)

[http://www.maxmind.com/app/geolite](http://www.maxmind.com/app/geolite)

# javascript - jQuery - 从元素中删除 onclick

> ID：11412268
> 
> 赞同：1
> 
> 时间：2012-07-10T11:22:14.740
> 
> 标签：javascript, jquery, click, listeners

我有以下设置：

```
 <div id="whatever" onclick="dostuff()">Super Mega Giga Button or Whatever</div>

   <!-- Import jquery and whatever other libs I need-->

   <script>
        $("#whatever").click(function() { //do something });
   </script> 
```

现在我需要做的是在某个时候删除所有的 onclick 事件。

我试过 $("#whatever").unblind('click'); 但这仅删除了使用 jquery 添加的事件，仍然调用 dostuff() 函数。

知道如何一次删除所有内容吗？

PS 不要开始问为什么 some1 会有内联 onclick 和监听器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T11:23:08.637

您可以使用以下[`removeAttr()`](http://api.jquery.com/removeAttr/)方法：

> 从匹配元素集中的每个元素中删除一个属性。

```
$('#whatever').removeAttr('onclick')
$("#whatever").click(function() { 
  //do something 
}); 
```

# ruby - Capturing printer data stream in ruby

> ID：11412270
> 
> 赞同：3
> 
> 时间：2012-07-10T11:22:19.813
> 
> 标签：ruby, printing, data-stream, redmon

anyone knows where a printer data stream is stored, and how to capture it a ruby executable? (for later pdf conversion for example)

I'm questioning this one, related to another question of mine. [So transparent that i can't catch it...Using Rghost to emulate ghostscript command as would be on virtual printer](https://stackoverflow.com/questions/11405655/so-transparent-that-i-cant-catch-it-using-rghost-to-emulate-ghostscript-comma)

![enter image description here](../Images/d32bcc4e50508cd5f62a8d8f131733cf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:35:21.923

这将取决于您的操作系统。它看起来像上面的 Windows。在这种情况下，我通常会使用 procmon 捕获所有系统调用，然后通过输出查找我正在寻找的调用。这有点像在网络跟踪中寻找特定的数据包。

Procmon 是我使用的 windows 工具。可以在这里找到： [http ://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

# java - what to use parse xml file in oracle

> ID：11412273
> 
> 赞同：1
> 
> 时间：2012-07-10T11:22:33.183
> 
> 标签：java, oracle, xml-parsing, xmltype

I need to load and parse this huge xml file in Oracle 11g. will be having a structure something like this :

```
<condition>
   <if test='check'>
       <name>abc</name>
   </if>
   <else>
        <name>efg</name>
   </else>
</condition> 
```

Based on applied 'check', I need to create objects.

Earlier I was doing this parsing in python using lxml. Even before that, I used to use dom based parser in python, but its performance was pretty bad.

Also, I need to validate this file before parsing, using a DTD file.

So, whats the best option to use while switching to oracle. Or maybe in Java. I can use that thru java stored procedure.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:33:13.477

如果您使用的是 9i 或更高版本，您可能[对 PL/SQL 的 XML Parser感兴趣。](http://docs.oracle.com/cd/A97630_01/appdev.920/a96621/adx20ppl.htm)支持 DTD 验证。

# vba - Move a certain row of data into column (reversal of existing macro)

> ID：11412278
> 
> 赞同：0
> 
> 时间：2012-07-10T11:22:48.030
> 
> 标签：vba, excel

Reference to solution provided here: [https://stackoverflow.com/a/9231458](https://stackoverflow.com/a/9231458)

I need to do this in reverse, e.g.:

```
A E F G H I
B J K L M N
C O P Q R S
D T U V W X

```

to

```
A E
A F
A G
A H
A I
B J
B K
B L
B M
B N
C O
C P
C Q
C R
C S
D T
D U
D V
D W
D X

```

Can someone please help me?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:02:53.557

![床单](../Images/d3e90cb97b30f6a7dfc62f36f3dc3c13.png)

```
Sub foo()

    Dim rng As Range
    Dim row As Integer
    Dim col As Integer

    Set rng = Sheets("Sheet1").Range("A1:A4")
    row = 0

    For Each cell In rng
        col = 1
        Do Until cell.Offset(0, col) = ""
            Sheets("Sheet1").Range("A6").Offset(row, 0) = cell
            Sheets("Sheet1").Range("A6").Offset(row, 1) = cell.Offset(0, col)
            row = row + 1
            col = col + 1
        Loop
    Next cell

End Sub 
```

# header - 标题中的 RSS 提要链接的目的是什么？

> ID：11412279
> 
> 赞同：5
> 
> 时间：2012-07-10T11:22:51.007
> 
> 标签：header, rss

大多数新闻/博客网站的标题中都包含 RSS 提要链接。例如：

```
<link rel="alternate" type="application/rss+xml" title="Example Feed" href="http://example.com/feed/" /> 
```

我想知道上面添加的实际用途是什么？是告诉浏览器网站有RSS提要吗？过去 Firefox 在地址栏中有该按钮，但现在他们已将其删除。此外，如果某些用户想要订阅 RSS，他需要直接输入提要 url。那么它在哪里使用呢？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T11:59:35.903

是的，它是告诉任何使用页面的东西（例如浏览器），在别处有另一种形式的内容。

大多数浏览器过去都有一个 RSS 按钮，如果看到这个按钮就会亮起，以便您订阅提要。

RSS（可以说）流行度下降了，所以现在默认情况下这在浏览器中不太常见。但是扩展等仍然会使用它。

或者实际上，如果您向 Google Reader 之类的东西添加“普通”url，它会获取该页面，并在 head 标签中查找 rss 链接，以找到最终的提要 url。

# android - 如何更改android中的启动活动

> ID：11412282
> 
> 赞同：3
> 
> 时间：2012-07-10T11:22:56.873
> 
> 标签：android, login, android-manifest, homescreen, app-startup

第一次使用该应用程序时，我将向用户显示一个登录屏幕，我将在清单文件中将其定义为“android.intent.action.MAIN”。成功登录后，每次应用程序启动时，我都希望用户看到主屏幕。请让我知道如何实现这一目标。

另外请让我知道有什么方法可以在成功登录后以编程方式更改 MAIN 活动，以便我可以重定向到主屏幕。

谢谢，

维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:27:59.593

如果你继承`Application`类并从你的应用程序中调用你需要的活动怎么`onCreate()`办？并在清单中删除它`intent.MAIN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:32:01.470

我认为您不能以编程方式设置主要活动，但您可以在`sharedPreferences`. 如果这个布尔值是`true`，那么你调用你的`HomeActivity`，并完成你的`LoginActivity`.

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:27:06.797

我会从登录屏幕简单地调用主屏幕。或者从主屏幕，如果登录详细信息未保存/无效，则显示登录屏幕。

基本上，按照您的要求，没有必要或没有良好的编程习惯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:28:08.080

成功登录后，调用`finish();`main 活动，这会将其从堆栈中删除。然后在您的 HomeScreenActivity 中，覆盖后退按钮以充当主页按钮：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# javascript - 一键上传文件

> ID：11412284
> 
> 赞同：12
> 
> 时间：2012-07-10T11:22:57.857
> 
> 标签：javascript, html

如何在您需要发送文件的 html 中创建一个按钮，以允许您选择文件，然后在我想要的页面上发送它，而无需使用按钮选择文件和按钮将其发送到另一个页面？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-10T11:30:32.430

```
<form>
    <input type="file" onchange="this.form.submit()" /> 
</form> 
```

*   [jsFiddle 演示](http://jsfiddle.net/Cg7g6/)
*   [MDN 上的 form.submit()](https://developer.mozilla.org/en/DOM/form.submit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:28:32.637

你应该使用

**HTML**

```
<form id="form">
 <input type="file" id=file"/> 
</form> 
```

更多信息：[http ://www.w3.org/wiki/HTML/Elements/input/file](http://www.w3.org/wiki/HTML/Elements/input/file)

**jQuery**

```
$("#file").onchange(function () {
 $("#form").submit();
}); 
```

# java - 命名静态 int 变量

> ID：11412285
> 
> 赞同：3
> 
> 时间：2012-07-10T11:23:02.240
> 
> 标签：java, variables, naming-conventions

我的代码中有很多整数变量（其中大部分是静态的，有些是非静态的）。由于我正在从事 ajax 测试，因此不可能摆脱这些变量。目前，我使用“int”前缀来匹配使用变量的上下文。但是太多了让我的代码看起来很奇怪。例如。我需要按下取消按钮，其 id 每次运行都会增加。所以我使用了一个静态变量，我将它命名为

`static int intCancel;`

是否有任何特定的模式可以命名变量以使代码更具可读性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:26:44.553

一个常见的误解是变量名必须很短。考虑扩展它们以说明它们是什么。IDE 使完成变量名变得容易。所以`numberTimesCancelSelected`可能是一个选择。

考虑阅读[Clean Code](https://rads.stackoverflow.com/amzn/click/com/B001GSTOAM)以更好地讨论该主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:34:25.620

在 C# 世界中，有诸如 Resharper 之类的工具，甚至是 Microsoft 的 Visual Studio 本身，它们都非常乐意将命名约定强加给您。这是一个很好的方法，因为它意味着每个人都编写出外观一致的代码，并且去除了很多“主观性”。

现在 Resharper 和 Visual Studio 都应用了不同的规则（彼此），但这并不是重点。关键是你选择一个约定并坚持下去。无论是骆驼案（这是我这些天通常使用的，如果你无法选择，我会向你推荐）或匈牙利语（我会在 15 年前使用），或者其他什么。只需选择一个并保持一致，这样您的代码就更易于维护，这就是 imo 的圣杯。

我同意之前关于适当命名事物的评论（缩写名称或使它们变得晦涩只是懒惰），并且在适当的地方使用枚举（尽管我怀疑你只是举了一个例子）。但无论你做什么，选择一个约定并保持一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:33:42.490

匈牙利符号是命名变量的标准：

[http://en.wikipedia.org/wiki/Hungarian_notation](http://en.wikipedia.org/wiki/Hungarian_notation)

你的情况是：

```
static int iCancel 
```

# c# - 获取 chrome 下载文件夹

> ID：11412289
> 
> 赞同：6
> 
> 时间：2012-07-10T11:23:16.950
> 
> 标签：c#, google-chrome, download, directory

对于 Chrome ，Windows 7 中的默认下载文件夹是*c:\users\username\downloads 。*但是可以通过设置将默认下载文件夹设置为另一个文件夹。我需要找出哪个文件夹是下载文件夹。因此，如果我将下载文件夹设置为*c:\dd*，那么我需要找出具体的文件夹。

有没有办法使用*C#*找到它？我的意思是我不想访问 chrome 设置并从那里获取文件夹路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T13:49:55.830

Chrome 设置的默认位置在[此处](https://stackoverflow.com/questions/4008194/how-can-i-programmatically-access-the-google-chrome-home-or-start-page)。我实际上发现我的位于Chrome **20.0.1132.47的“** **C:\Users[UserName]\AppData\Local\Google\Chrome\User Data\Default** ”下。

 **如果打开**Preferences**文件，可以解析 JSON 以获取下载文件夹：

```
"download": {
  "default_directory": "C:\\Users\\[UserName]\\Downloads",
  "directory_upgrade": true,
  "extensions_to_open": ""
} 
```

如果没有`default_directory`值，则使用目录**C:\Users\[UserName]\Downloads**。**

# python - 启动和停止集群中的进程

> ID：11412290
> 
> 赞同：3
> 
> 时间：2012-07-10T11:23:26.013
> 
> 标签：python, linux, network-programming, cluster-computing

我正在编写运行一堆不同程序的软件（通过[twisted's](http://twistedmatrix.com) `twistd`）；也就是说，必须在多台机器上启动 N 个不同类型的守护进程。如果我手动执行此操作，我将在所涉及的机器上运行诸如`twistd foo_worker`,之类的命令。`twistd bar_worker`

**基本上会有一个机器列表，以及我需要它们运行的​​守护进程。此外，我需要在需要时将它们全部关闭。**

如果我要从头开始编程，我会编写一个“spawner”守护程序，它将在集群中的每台机器上永久运行，并具有以下功能，可通过网络访问以供经过身份验证的管理员客户端使用：

*   使用给定的命令行启动进程。返回一个句柄来管理它。
*   杀死一个给定句柄的进程。
*   （可选）在给定句柄的情况下查询诸如 cpu 时间之类的东西。

对上述内容进行编程相当简单，但我无法想象这是一个新问题。确实有现有的解决方案可以做到这一点吗？但是，我确实缺乏服务器管理经验，甚至不知道相关术语是什么。

**在 linux 集群上有哪些现有的方法可以做到这一点，以及涉及的一些重要术语是什么？**欢迎使用 Python 特定的解决方案，但不是必需的。

另一种说法：给定一个局域网中的一堆机器，我如何以编程方式将它们作为一个集群工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:27:20.360

常用的工具是批处理队列系统，如 SLURM、SGE、Torque/Moab、LSF 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:02:59.903

最熟悉和最普遍的方式就是使用`ssh`. 要自动化，您可以使用[`fabric`](http://fabfile.org).

`foo_worker`在所有主机上启动：

```
$ fab all_hosts start:foo_worker 
```

`bar_worker`要在特定的主机列表上停止：

```
$ fab -H host1,host2 stop:bar_worker 
```

这是一个例子`fabfile.py`：

```
from fabric.api import env, run, hide # pip install fabric

def all_hosts():
    env.hosts = ['host1', 'host2', 'host3']

def start(daemon):
    run("twistd --pid %s.pid %s" % (daemon, daemon))

def stop(daemon):
    run("kill %s" % getpid(daemon))

def getpid(daemon):
    with hide('stdout'):
        return run("cat %s.pid" % daemon)

def ps(daemon):
    """Get process info for the `daemon`."""
    run("ps --pid %s" % getpid(daemon)) 
```

[有多种方法可以在结构中配置主机列表，范围从全局到每个任务，并且可以根据需要混合和匹配。](http://docs.fabfile.org/en/1.4.3/usage/execution.html#defining-host-lists).

要简化特定主机上的进程管理，您可以为守护进程编写 initd 脚本（并运行`service daemon_name start/stop/restart`）或使用[`supervisord`](http://supervisord.org)（并运行`supervisorctl`例如`supervisorctl stop all`）。为了控制“安装在哪里”并以集中方式推送配置，[`puppet`](https://en.wikipedia.org/wiki/Puppet_%28software%29)可以使用类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:27:29.313

马戏团 ：

文档： [http ://docs.circus.io/en/0.5/index.html](http://docs.circus.io/en/0.5/index.html)

代码： http: [//pypi.python.org/pypi/circus/0.5](http://pypi.python.org/pypi/circus/0.5)

文档摘要：

> Circus 是一个进程和套接字管理器。它可用于监视和控制进程和套接字。
> 
> Circus 可以通过命令行界面或通过其 python API 以编程方式驱动。
> 
> 它共享 Supervisord、BluePill 和 Daemontools 的一些目标。如果您对 Circus 与其他项目相比带来了什么感到好奇，请阅读我为什么要使用 Circus 而不是 X？。
> 
> Circus 是使用 ZeroMQ [http://www.zeromq.org/](http://www.zeromq.org/)设计的。有关详细信息，请参阅设计。

# ruby-on-rails - Ruby on Rails - Date Comparison

> ID：11412300
> 
> 赞同：1
> 
> 时间：2012-07-10T11:23:52.817
> 
> 标签：ruby-on-rails, date, date-comparison

I am trying to compare dates for an app in rails. I have tried this link [Comparing dates in rails](https://stackoverflow.com/questions/992431/comparing-dates-in-rails). But this is not what I want, suppose I have a filter according to dates, then I am doing

`<% jobs = @user.jobs.where(:curr_date => (Date.today))%>`

Here, curr_date is a "date" attribute chosen by me.

This code works for entries which have today's date, but if I want all entries which have date between today and a week before, what should I do?

Thanx! :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:33:52.013

你可以简单地使用

```
jobs = @user.jobs.where(:curr_date => (DateTime.now..1.week.ago)) 
```

更新到`DateTime.now`或者也可以使用`Date.today.to_time`，否则比较 a`Date`和 a会出错`Time`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:31:30.697

我认为这样的事情应该有效：

`<% jobs = @user.jobs.where(['curr_date < ? AND curr_date > ?', Date.today, 1.week.ago])) %>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:43:25.663

compare_date_1 <=> comparison_date_2 可能对您有用，它会相应地返回-1,1,0，您可以填充它们......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:34:35.347

没有在控制台中尝试过，但我认为它应该可以工作：

```
# You need to implement the #week_before method
@user.jobs.where(:curr_date => (Date.week_before..Date.today)) 
```

[Active Record Querying -](http://guides.rubyonrails.org/active_record_querying.html#array-conditions) Range 条件下的数组条件检查 (2.2.2)

# java - 未触发 JTable 键事件

> ID：11412307
> 
> 赞同：1
> 
> 时间：2012-07-10T11:24:12.323
> 
> 标签：java, swing, netbeans-7, keyevent

我正在为我的列（ButtonColumns）使用 TableCellEditor，如下所示。当我输入向下键时，与 Jtable 关联的键事件未触发。请指导我解决这个障碍，提前致谢。以下SSCCE如下

```
class ButtonEditor_Utility extends DefaultCellEditor {

protected JButton button;

public ButtonEditor_Utility() {
button.setActionCommand(tableName);
button.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {
            fireEditingStopped();
        }
    });
}

public Component getTableCellEditorComponent(JTable table, Object value,
        boolean isSelected, int row, int column) {
    if (isSelected) {
        button.setForeground(table.getSelectionForeground());
        button.setBackground(table.getSelectionBackground());
    } else {
        button.setForeground(table.getForeground());
        button.setBackground(table.getBackground());
    }

    label = (value == null) ? "" : value.toString();
    button.setText(label);
    isPushed = true;
    return button;
}

public boolean stopCellEditing() {
    isPushed = false;
    return super.stopCellEditing();
}

protected void fireEditingStopped() {
    super.fireEditingStopped();
} 
```

}

```
 Class Test extent JFframe{

  public void    AddButtonColumn(){
 tblDetailInfo.getColumn(1).setCellEditor(
 new ButtonEditor_Utility(new JCheckBox(), this, 1, selectedRow,    this,null, "TestDB"));} 
```

// 下面的事件在 Down Key 上没有响应 // 其键码是 40

```
 private void tblDetailInfoKeyPressed(java.awt.event.KeyEvent evt){                                         
    // TODO add your handling code here:
    if (evt.getKeyCode() == 40) {

        int rowId = tblDetailInfo.getRowCount() - 1;

        setSelectedRow(rowId);
        tblDetailInfo.setCellSelectionEnabled(true);
        tblDetailInfo.changeSelection(rowId, 0, false, false);
        tblDetailInfo.requestFocus();
        tblDetailInfo.scrollRectToVisible(new Rectangle(tblDetailInfo.getCellRect(rowId, 0, true)));
        AddDetailRow();

    }
}  

   private void formWindowOpened(java.awt.event.WindowEvent evt){                      AddButtonColumn(); }

public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {

            Test test = new Test();

            test.setVisible(true);
        }
    });
} } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:02:42.493

不要试图强制 a`JLabel`和 a`KeyEvent`作为表格单元格编辑器使用，而是使用`TableCellEditor`诸如 @camickr's 之类的实际值[`ButtonColumn`](http://tips4java.wordpress.com/2009/07/12/table-button-column/)。这[`TableTest`](https://stackoverflow.com/a/5559747/230513)说明了[`ButtonColumn`](http://tips4java.wordpress.com/2009/07/12/table-button-column/)在`JTable`. 优点是您可以获得所有熟悉的用于导航（箭头键）和激活（空格键）的[键绑定。](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

# php - CodeIgniter - 插入查询的活动记录缓存

> ID：11412311
> 
> 赞同：1
> 
> 时间：2012-07-10T11:24:27.390
> 
> 标签：php, codeigniter, activerecord

我目前正在尝试创建一个相当基本的网络应用程序，它有可能为用户及其组织保存敏感（ish）数据。

我原本打算将所有用户输入的记录数据存储在一个数据库中，并将所有应用程序数据存储在另一个数据库中。这些数据将存储在一个共享数据库中，其中 user_id 和 org_id 针对所有表中的所有记录，以方便分离。

[为了最大限度地降低代码错误和数据泄露的风险，我研究了使用Active Record 缓存](http://codeigniter.com/user_guide/database/active_record.html#caching)自动将标准“where”语句附加到我的活动记录查询的能力

```
$this->db->start_cache();
$this->db->where('user_id',$_SESSION['user_id']);
$this->db->where('org_id',$_SESSION['org_id']);
$this->db->stop_cache(); 
```

这太棒了，可以省去很多麻烦。但是，根据文档 [http://codeigniter.com/user_guide/database/active_record.html#caching](http://codeigniter.com/user_guide/database/active_record.html#caching)我也应该能够将其用于更新（设置方法）：

> 注意：可以缓存以下语句：select、from、join、where、like、group_by、have、order_by、set。

查看 active_record 类“DB_active_rec.php”，存在代码以在几种方法（选择、位置等）中提供缓存。

```
if ($this->ar_caching === TRUE)
{
...do caching stuff 
```

据我所知，这似乎从 set 方法中丢失了。

我不确定我想要什么答案，但希望是我做错了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:57:20.943

您不能缓存更新语句。这没有多大意义。在您的更新中，您使用该`$this->db->where()`方法，它本质上是一个选择。该部分可以被缓存，这样做可以为自己节省一条选择语句。

# android - ActionBarSherlock：使用菜单按钮打开子菜单

> ID：11412321
> 
> 赞同：7
> 
> 时间：2012-07-10T11:24:56.790
> 
> 标签：android, menu, android-actionbar, actionbarsherlock, submenu

我正在使用 ActionBarSherlock-4.1.0-0，我想用硬件菜单按钮在操作栏中打开我的子菜单。我正在计划更新，在我的旧版本中，我使用了“普通”菜单。我想帮助用户习惯新的设计。

我得到了子菜单和主菜单：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater i = getSupportMenuInflater();
    i.inflate(R.menu.main_menu, menu);
    SubMenu subMenu = (SubMenu) menu.findItem(R.id.actionbar_submenu);
    Menu mainMenu = menu;
    return super.onCreateOptionsMenu(menu);
} 
```

我得到了硬件菜单按钮的监听器：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(event.getAction() == KeyEvent.ACTION_DOWN){
        switch(keyCode) {
        case KeyEvent.KEYCODE_MENU:
            // TODO: expand submenu from actionbar
            return true;

        }
    }
    return super.onKeyDown(keyCode, event);
} 
```

我找不到要调用的方法或其他任何东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T14:19:04.190

我用 android actionbar 尝试了 Frederik 的这个解决方案，我遇到了子菜单立即打开和关闭的问题。更改为 onKeyUp 解决了这个问题。

这是我的代码：

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if(keyCode == KeyEvent.KEYCODE_MENU){
        if (event.getAction() == KeyEvent.ACTION_DOWN && optionsMenu != null && optionsMenu.findItem(R.id.sub_menu) != null)
        {
            Log.i(TAG, "performIdentifierAction");
            optionsMenu.performIdentifierAction(R.id.sub_menu, 0);
            return true;
        }
    }
    return super.onKeyUp(keyCode, event);
} 
```

我会检查是否`optionsMenu != null && optionsMenu.findItem(R.id.sub_menu) != null`因为与没有操作栏的旧 Android 版本的兼容性问题。如果您对所有版本都使用 ActionBarSherlock，这不是必需的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T18:01:07.403

这就是我解决问题的方法

```
mainMenu.performIdentifierAction(id_of_menu_item, 0); 
```

所以在你的情况下，我想它会是这样的

```
private Menu mainMenu; // local variable for menu

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater i = getSupportMenuInflater();
    i.inflate(R.menu.main_menu, menu);
    SubMenu subMenu = (SubMenu) menu.findItem(R.id.actionbar_submenu);
    mainMenu = menu; // store the menu in an local variable
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(event.getAction() == KeyEvent.ACTION_DOWN){
        switch(keyCode) {
        case KeyEvent.KEYCODE_MENU:
            SubMenu subMenu = (SubMenu) mainMenu.findItem(R.id.actionbar_submenu);
            mainMenu.performIdentifierAction(subMenu.getItem().getItemId(), 0);

            return true;  
        }
    }
    return super.onKeyDown(keyCode, event);
} 
```

简而言之：

*   将菜单存储在局部变量中
*   使用该变量查找子菜单
*   使用该变量调用`performIdentifierAction`方法

希望这会奏效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-07T19:39:18.600

在 Fredrik Sundmyhr 的解决方案中，我总是得到一个 NullPointerException，然后我改变了一些东西并且它起作用了。这是我的解决方案：

```
@Override
    public boolean onKeyUp(int keyCode, KeyEvent event) {
        if(event.getAction() == KeyEvent.ACTION_UP){
            switch(keyCode)
            {
            case KeyEvent.KEYCODE_MENU:
                SubMenu subMenu = mainMenu.getItem(2).getSubMenu();
                mainMenu.performIdentifierAction(subMenu.getItem().getItemId(), 0);

                return true;  
            }
        }
        return super.onKeyUp(keyCode, event);
    } 
```

# c# - 使用 C# 在 Unity 3d 中获取 IP 地址

> ID：11412329
> 
> 赞同：1
> 
> 时间：2012-07-10T11:25:32.353
> 
> 标签：c#, html, json, ip, unity3d

我想获取客户端 IP 的所有详细信息，例如位置、纬度、州、城市、国家、速度、isp 等，就像这些人在做什么

[http://www.ip-adress.com/ip_tracer/](http://www.ip-adress.com/ip_tracer/)

我想在 Json 或 XMl 中得到理想的响应，这样我就不必解析 HTML。目前我正在解析html

```
myIP = myExtIPWWW.text;
myIP=myIP.Substring(myIP.IndexOf("Your IP address is:"),myIP.IndexOf("</h3>"));
myIP=myIP.Substring(myIP.IndexOf(":")+1);
myIP=myIP.Substring(0,myIP.IndexOf("<")); 
```

但我不喜欢这种方法。有没有更好的方法可以让我在 Json 中得到响应并立即访问所有字段？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:39:49.650

有免费的数据库以（大）平面文件或数据库格式向您提供这些信息。[MaxMind GeoLite Country/City Databases](http://www.maxmind.com/app/geoip_country)就是一个这样的例子。

但是，您应该知道**，这些细节中没有一个是准确的**（*可能*国家除外）。如果您试图在任何事情上依赖它们，那么您可能应该重新考虑您的策略，IP 无法可靠地“定位”，并且这些数据库通常基于 RIPE IP 将 IP 分配给各个 ISP 及其当地办事处和/或交易所来工作他们所在的地方。充其量，您将在离您的用户最近的交易所工作。

当然，如果用户实际上拥有自己的 ISP/IP，则这并不适用，因为他们可以将这些详细信息作为任何内容提供给 RIPE，而这将在您的数据库中。

* * *

只是为了举例说明这些细节如何*如此错误*，您上面引用的网站给了我这些细节：

```
My IP address state:     London, City of
My IP address city:  London
My IP address latitude:  51.5142
My IP address longitude:     -0.0931
My ISP [?]:  VAIONI Group Ltd 
```

我在曼彻斯特，VAIONI 是经销商/连接端点，而不是我的 ADSL 提供商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:44:03.017

> 我想获取客户 [..] 的所有详细信息，例如位置、纬度、州、城市、国家、速度、[..] 等

然后不要使用 IP 地址（因为我可能错过了后期更新，但 AFAIK IP 地址不包含速度部分），但适当的[功能](http://webcache.googleusercontent.com/search?q=cache:9GUXnhhsB50J%3aunity3d.com/support/documentation/ScriptReference/iPhoneSettings.StartLocationServiceUpdates.html+&cd=1&hl=nl&ct=clnk&gl=nl)：

```
 iPhoneSettings.StartLocationServiceUpdates();
  print("Location: " + iPhoneInput.lastLocation.latitude + " " + 
                       iPhoneInput.lastLocation.longitude + " " + 
                       iPhoneInput.lastLocation.altitude + " " + 
                       iPhoneInput.lastLocation.horizontalAccuracy + " " + 
                       iPhoneInput.lastLocation.timestamp); 
```

# r - 如何使用 randomForest 包进行特征选择？

> ID：11412331
> 
> 赞同：1
> 
> 时间：2012-07-10T11:25:46.427
> 
> 标签：r, random-forest, feature-selection

我正在使用 randomForest 来找出最重要的变量。我期待一些输出来定义模型的准确性，并根据变量的重要性对变量进行排名。但我现在有点困惑。我尝试了 randomForest，然后运行`importance()`以提取变量的重要性。但是后来我看到了另一个命令`rfcv`（用于特征选择的随机森林交叉验证），我想这应该是最适合这个目的的，但我对此的问题是：如何获取最重要变量的列表？运行后如何查看输出？使用哪个命令？

`randomForest`另一件事：和有什么区别`predict.randomForest`？

我对随机森林和 R 不是很熟悉，因此我们将不胜感激。

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:02:46.140

`randomForest`创建模型后，您`predict.randomForest`可以使用在新数据上创建的模型，例如使用训练数据构建随机森林，然后通过该模型运行验证数据`predict.randomForest`。

至于 rfcv 有一个选项`recursive`（来自帮助）：

> 在变量减少的每个步骤中是否（重新）评估变量重要性

全部在[帮助文件中](http://cran.r-project.org/web/packages/randomForest/randomForest.pdf)

# php - 将缩略图插入数据库

> ID：11412333
> 
> 赞同：0
> 
> 时间：2012-07-10T11:25:58.283
> 
> 标签：php, mysql, thumbnails

我已成功将原始图像添加到我的 imgs/ 文件夹以及服务器上。但我想将缩略图添加到数据库中。我已将其添加到 imgs/ 文件夹中，但似乎无法将其插入数据库。

这是用于裁剪 img 并将其插入文件夹的最后一段代码。

我还需要将它插入数据库，以便我可以为 $_SESSION 用户和用户朋友调用它，因为我有个人资料。

```
if (isset($_POST["upload_thumbnail"]) && strlen($large_photo_exists)>0) {
    //Get the new coordinates to crop the image.
    $x1 = $_POST["x1"];
    $y1 = $_POST["y1"];
    $x2 = $_POST["x2"];
    $y2 = $_POST["y2"];
    $w = $_POST["w"];
    $h = $_POST["h"];
    //Scale the image to the thumb_width set above
    $scale = $thumb_width/$w;
    $cropped = resizeThumbnailImage($thumb_image_location, $large_image_location,$w,$h,$x1,$y1,$scale);
    //Reload the page again to view the thumbnail
    header("location:".$_SERVER["PHP_SELF"]);
    exit();
}
if(isset($_GET['a'])){
if ($_GET['a']=="delete"){
if (file_exists($large_image_location)) {
        unlink($large_image_location);
    }
    if (file_exists($thumb_image_location)) {
        unlink($thumb_image_location);

        $creator_id     =   $_SESSION['id'];
            $sql = "UPDATE users SET user_pic_small='".$img."' WHERE id=$creator_id";
            $sql2 = "INSERT INTO userphotos(photo_ownerid,photo_ispublic, photo_name, photo_caption, photo_imagedata) VALUES ($creator_id,1,'Profile Picture','Profile Picture','$img')";

            // insert the image
            if(!mysql_query($sql)) {
                echo "Fail. It broke.";
            }else{
            $c=mysql_query($sql2);

                echo "<script> parent.alert('Image Uploaded','',1000);</script>";
            }

    }
}
} 
```

希望有人可以提供帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:37:01.773

如果要在数据库中添加缩略图的路径 ($thumb_image_location)，只需在 unlink() 之前添加插入路径的代码。

如果要将整个图像存储到数据库中，则需要列为 MEDIUMBLOB 类型，然后，在 unlink() 之前读取包含图像的文件的代码，例如：

```
$img = file_get_contents($thumb_image_location); 
```

然后，将存储在 $img 中的数据插入到您的数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:38:05.297

理想情况下，[您不想将缩略图本身添加到数据库](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)中，而只是对文件的引用（文件路径）。因此，虽然我不知道您的数据库是什么样的，但您需要执行以下步骤：

1.  在您的表格中创建一个名为“缩略图”或类似名称的字段。这将保存缩略图文件的名称。
2.  裁剪大图像后立即将文件路径添加到数据库（即在代码中的 '$cropped = ...' 和 'header("location....' 行之间）
3.  每当用户或用户的朋友登录时，检查此字段并提取表中引用的任何缩略图。

基本上就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:50:08.980

你可以使用这个：

```
// Read the file 
$fp = fopen($file, 'r');
$data = fread($fp, filesize($file));
$data = addslashes($data);
fclose($fp);

// Create the query and insert into our database.
// image is an BLOB field type
$query = "INSERT INTO tbl_images ";
$query .= "(image) VALUES ('$data')";
$results = mysql_query($query, $link); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:39:39.493

如果您只想将图像的路径存储到数据库中，那么只插入路径并使用 HTML 提供它就可以了。

否则，如果要将图像的原始数据存储到数据库中，则必须将图像编码为 base64 String 。

[发送/显示 base64 编码图像](https://stackoverflow.com/questions/3259967/sending-displaying-a-base64-encoded-image)- 以下是在 base64 编码和图像的方式。

并将这个巨大的字符串存储到数据库中的 Blob 字段类型中。

# php - 我无法使用 phpdoc [无法打开输入文件：\phpdoc.php]

> ID：11412335
> 
> 赞同：2
> 
> 时间：2012-07-10T11:26:16.337
> 
> 标签：php, phpdoc

我下载了 phpdoc，无论我做什么，他都会掉线：

`Could not open input file: \phpdoc.php`

在控制台中。这个文件的路径在path和php include的路径中。我确实用另一个 php 脚本尝试过他，它证实了这一点（从控制台）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:41:48.167

尝试按照[主页](http://www.phpdoc.org/)上建议的方法：

```
$ pear channel-discover pear.phpdoc.org
$ pear install phpdoc/phpDocumentor-alpha
$ phpdoc -d . -t docs 
```

# android - RESTful Content Provider 是否应该使用 SyncAdapter？

> ID：11412342
> 
> 赞同：2
> 
> 时间：2012-07-10T11:26:50.070
> 
> 标签：android, android-asynctask, android-contentprovider, restful-url, android-syncadapter

我有一个自定义内容提供程序和同步适配器，它们工作正常，但我不清楚向服务器发起异步请求的最佳实践。例如，当客户端向内容提供者发出查询请求时，它会查询本地数据数据库——现在它需要检查服务器内容。

对于服务器请求，推荐使用这两种方式中的哪一种？

1）在内容提供者内部向服务器发起直接异步请求以获得更多内容，或者，如果我有一个同步适配器，2）在内容提供者内部创建一个 ContentResolver.requestSync(... 以间接实现这一点？

看起来（1）最终会实现（2），但我还没有遇到从内容提供程序中使用同步适配器的示例。UI 是通过光标适配器和观察者驱动的，因此对服务器同步是如何发生的有信心是非常有帮助的！

谢谢

# javascript - 未定义使用对象属性访问 jquery 选择器

> ID：11412345
> 
> 赞同：1
> 
> 时间：2012-07-10T11:27:03.333
> 
> 标签：javascript, jquery, backbone.js

我在使用对象属性作为 jquery 选择器时遇到问题

```
define(["models/security/user", 'text!templates/security/registration.html'], function(SecurityUserModel, Template){

    var SecurityRegistrationView;

    SecurityRegistrationView = Backbone.View.extend({
        initialize: function(){
            // setting model
            this.model = new SecurityUserModel();

            // binding validation
            Backbone.Validation.bind(this);
            this.model.bind("validated:valid", this.valid);
            this.model.bind("validated:invalid", this.invalid);

            this.render();
        },
        form: {
            "username": "#_user_username"
            , "email": "#_user_email"
            , "password": "#_user_password"
        },
        render: function(){
            $(this.el).append(Template);
        },
        events: {
            "submit form": "submit"
        },
        submit: function(e){
            e.preventDefault();

            this.model.set("username", $(this.form.username).val());
            this.model.set("password", $(this.form.email).val());
            this.model.set("email", $(this.form.password).val());
            this.model.validate();

            if (this.model.isValid) {
                this.model.save();
            }
        },
        valid: function(model, attrs){
            console.log(attrs[0]);
            $(this.form[attrs[0]]).parent("div.control-group").addClass("success");
        },
        invalid: function(model, attrs){
            console.log(attrs[0]);
            $(this.form[attrs[0]]).parent("div.control-group").addClass("error");
        }
    });

    return SecurityRegistrationView;
}); 
```

铬控制台输出：

```
username registration.js:45
Uncaught TypeError: Cannot read property 'username' of undefined registration.js:46
password registration.js:45
Uncaught TypeError: Cannot read property 'password' of undefined registration.js:46
email registration.js:45
Uncaught TypeError: Cannot read property 'email' of undefined registration.js:46
username registration.js:45
Uncaught TypeError: Cannot read property 'username' of undefined registration.js:46

$(this.form.username).val(); // works
$(this.form[someVar]); // does not work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:00:53.040

`this`在你的`valid`和`invalid`回调中可能并不涉及你的观点。将方法中的绑定修改为`initialize`适当的范围：

```
this.model.bind("validated:valid", this.valid, this);
this.model.bind("validated:invalid", this.invalid, this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:58:32.207

尝试替换：

```
$(this.form.username) 
```

和：

```
$(this.form['username']) 
```

或者，没有“这个”：

```
$(form['username']) 
```

*   “密码”和“电子邮件”也是如此。

# php - 用于 Facebook 视频嵌入生成器的带有 GET 命令的 PHP

> ID：11412346
> 
> 赞同：1
> 
> 时间：2012-07-10T11:27:03.830
> 
> 标签：php, facebook, video-embedding

我想用 $_get 命令为 facebook 视频嵌入生成器创建一个 php 文件。请帮帮我。写下不工作的代码：

```
<?php
echo "<object width="400" height="224" >
      <param name="allowfullscreen" value="true" />
      <param name="allowscriptaccess" value="always" />
      <param name="movie" value="' . $video_url . '" />
      <embed src="http://www.facebook.com/v/'.$_GET["id"].'" type="application/x-    shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="400" height="224">
      </embed>
      </object>";
?> 
```

示例：如果 facebook 视频 ID 为：10150257497405484 网址应为：[http ://www.domain.com/embed.php?id=10150257497405484](http://www.domain.com/embed.php?id=10150257497405484)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:30:26.860

你有不匹配的报价

尝试这个：

```
<?php
echo '<object width="400" height="224" >
      <param name="allowfullscreen" value="true" />
      <param name="allowscriptaccess" value="always" />
      <param name="movie" value="' . $video_url . '" />
      <embed src="http://www.facebook.com/v/' . $_GET["id"] . '" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="400" height="224">
      </embed>
      </object>';
?> 
```

# java - Connection.setAutoCommit(true) 是否适用于 SQL 存储过程和函数？

> ID：11412349
> 
> 赞同：2
> 
> 时间：2012-07-10T11:27:07.897
> 
> 标签：java, sql, oracle, jdbc

数据库是甲骨文。

我想`Connection.setAutoCommit`用于`SQL`存储过程和函数。它会起作用吗？

对于我使用的调用程序`CallableStatement`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:35:25.207

它不起作用，connection.setAutoCommit(true)，在这个连接中是一个 Java 对象。您不能在存储过程中使用相同的。

我们有一个名为 autocommit 的 sql 系统变量，如果我们在编写存储过程时将其设置为 on，那么您的过程将自动提交您尝试执行的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:37:14.450

是的，它有效。实际上自动提交是默认开启的。本章[将为](http://oreilly.com/catalog/jorajdbc/chapter/ch19.html)您提供一个想法，但可以节省您一些时间：

> 默认情况下，JDBC 的自动提交功能是开启的，这意味着每条 SQL 语句在执行时都会被提交。如果您的程序执行了多个 SQL 语句，则可以通过关闭自动提交来实现小幅性能提升。

也阅读 CallableStatement 部分：

> 您可能还记得，CallableStatement 对象用于执行数据库存储过程。我将 CallableStatement 对象保存到最后，因为它们是所有 JDBC SQL 执行接口中执行最慢的对象。这听起来可能违反直觉，因为通常认为调用存储过程比使用 SQL 更快，但事实并非如此。给定一个简单的 SQL 语句和一个完成相同任务的存储过程调用，简单的 SQL 语句总是执行得更快。为什么？因为使用存储过程，您不仅有执行 SQL 语句所需的时间，还有处理过程调用本身的开销所需的时间。

我认为它将帮助您做出有关应用程序性能的决定。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T11:34:00.387

一句话：是的。只要确保您没有在存储过程中嵌入事务逻辑即可。把它全部交给 JDBC 驱动程序或事务管理器。

没有什么比亲自尝试并看到更好的了。我认为这比在这里提问还要好。

# python - 使用 GLSL 着色器在 PyOpenGL 中进行多纹理处理

> ID：11412350
> 
> 赞同：0
> 
> 时间：2012-07-10T11:27:12.020
> 
> 标签：python, opengl, glsl, textures, pyopengl

我希望能够在 GLSL 片段着色器中组合两个纹理。我目前正在使用 PyOpenGL，到目前为止我使用着色器所做的一切都运行良好。

当我尝试从片段着色器访问多个纹理时遇到困难，例如，以下着色器显示正确的纹理减去蓝色像素：

```
uniform sampler2D my_texture1;
uniform sampler2D my_texture2;
void main()
{
    vec4 color1 = texture2D(my_texture1, gl_TexCoord[1].st);
    vec4 color2 = texture2D(my_texture2, gl_TexCoord[2].st);
    if (color1.b > 0.8)
        discard;
    gl_FragColor = color1;
} 
```

但

```
uniform sampler2D my_texture1;
uniform sampler2D my_texture2;
void main()
{
    vec4 color1 = texture2D(my_texture1, gl_TexCoord[1].st);
    vec4 color2 = texture2D(my_texture2, gl_TexCoord[2].st);
    if (color2.b > 0.8)
        discard;
    gl_FragColor = color2;
} 
```

导致空白屏幕。

我有一种感觉，问题可能在于我如何将纹理制服传递给着色器，但我一生都无法弄清楚为什么第一个纹理有效而第二个无效。以下是完整的程序。

```
from OpenGL.GL import *
from OpenGL.GLU import *
from OpenGL.GLUT import *
from Image import *
from OpenGL.GL.shaders import *

ESCAPE = '\033'
global size
size = 512

def drawQuad(B,T,L,R):
    glBegin(GL_QUADS)
    glMultiTexCoord2f(GL_TEXTURE1, 0.0, 0.0); glMultiTexCoord2f(GL_TEXTURE2, 0.0, 0.0); glVertex3f(B, L,  1.0);       ## Bottom Left Of The Texture and Quad
    glMultiTexCoord2f(GL_TEXTURE1, 1.0, 0.0); glMultiTexCoord2f(GL_TEXTURE2, 1.0, 0.0); glVertex3f( T, L,  1.0);       ## Bottom Right Of The Texture and Quad
    glMultiTexCoord2f(GL_TEXTURE1, 1.0, 1.0); glMultiTexCoord2f(GL_TEXTURE2, 1.0, 1.0); glVertex3f( T,  R,  1.0);       ## Top Right Of The Texture and Quad
    glMultiTexCoord2f(GL_TEXTURE1, 0.0, 1.0); glMultiTexCoord2f(GL_TEXTURE2, 0.0, 1.0); glVertex3f(B,  R,  1.0);       ## Top Left Of The Texture and Quad
    glEnd()

def InitGL(Width, Height):
    print "Vendor:   " + glGetString(GL_VENDOR)
    print "Renderer: " + glGetString(GL_RENDERER)
    print "OpenGL Version:  " + glGetString(GL_VERSION)
    print "Shader Version:  " + glGetString(GL_SHADING_LANGUAGE_VERSION)

    if not glUseProgram:
        print 'Missing Shader Objects!'
        sys.exit(1)

    global program
    program = compileProgram(
        compileShader('''
                void main()
                {
                    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
                    gl_TexCoord[1] = gl_MultiTexCoord1;
                    gl_TexCoord[2] = gl_MultiTexCoord2;
                }
        ''',GL_VERTEX_SHADER),
        compileShader('''
                uniform sampler2D my_texture1;
                uniform sampler2D my_texture2;
                void main()
                {
                    vec4 color1 = texture2D(my_texture1, gl_TexCoord[1].st);
                    vec4 color2 = texture2D(my_texture2, gl_TexCoord[2].st);
                    if (color1.b > 0.8)
                        discard;
                    gl_FragColor = color1;
                }
    ''',GL_FRAGMENT_SHADER),
    )

    #bmp texture 1
    image = open("rgb.bmp")
    ix = image.size[0]
    iy = image.size[1]
    image = image.tostring("raw", "RGBX", 0, -1)
    glActiveTexture(GL_TEXTURE1)
    global my_texture1
    my_texture1 = glGenTextures(1)
    glBindTexture(GL_TEXTURE_2D, my_texture1) 
    glPixelStorei(GL_UNPACK_ALIGNMENT,1)
    glTexImage2D(GL_TEXTURE_2D, 0, 3, ix, iy, 0, GL_RGBA, GL_UNSIGNED_BYTE, image)
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST)
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST)
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL)
    glGenerateMipmap(GL_TEXTURE_2D)

    #bmp texture 2
    image = open("rgb2.bmp")
    ix = image.size[0]
    iy = image.size[1]
    image = image.tostring("raw", "RGBX", 0, -1)
    glActiveTexture(GL_TEXTURE2)
    global my_texture2
    my_texture2 = glGenTextures(1)
    glBindTexture(GL_TEXTURE_2D, my_texture2) 
    glPixelStorei(GL_UNPACK_ALIGNMENT,1)
    glTexImage2D(GL_TEXTURE_2D, 0, 3, ix, iy, 0, GL_RGBA, GL_UNSIGNED_BYTE, image)
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST)
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST)
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL)
    glGenerateMipmap(GL_TEXTURE_2D)

def DrawGLScene():
    global frame, testvar, my_texture1,my_texture2
    glEnable(GL_TEXTURE_2D)
    glBindTexture(GL_TEXTURE_2D, 0)
    glUseProgram(program)
    myUniformLocation1 = glGetUniformLocation(program, "my_texture1")
    glUniform1i(myUniformLocation1, 1)
    myUniformLocation2 = glGetUniformLocation(program, "my_texture2")
    glUniform1i(myUniformLocation2, 2)
    glViewport(0, 0, size,size)
    glClearDepth(1.0)
    glClearColor (0.0, 0.0, 0.0, 1.0)
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)
    glMatrixMode(GL_PROJECTION)
    glLoadIdentity()  
    glOrtho(-1, 1, -1, 1, -30.0, 30.0)
    glMatrixMode(GL_MODELVIEW)
    glLoadIdentity() 
    glEnable(GL_DEPTH_TEST)
    drawQuad(-1.0,1.0,-1.0,1.0)
    glutSwapBuffers()

def keyPressed(*args):
    global texturenumber, shadernumber, frame
    # If escape is pressed, kill everything.
    if args[0] == ESCAPE:
        sys.exit()

def main():
    global window
    glutInit(sys.argv)
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH)
    glutInitWindowSize(size,size)
    glutInitWindowPosition(0, 0)
    window = glutCreateWindow("Multitexturing")
    glutDisplayFunc(DrawGLScene)
    glutIdleFunc(DrawGLScene)
    glutKeyboardFunc(keyPressed)
    InitGL(size,size)
    glutMainLoop()

if __name__ == "__main__":
    print "Press 'ESC' key to quit."
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:56:35.580

您实际上在使用它之前取消绑定第二个纹理：

```
def DrawGLScene():
    global frame, testvar, my_texture1,my_texture2
    glEnable(GL_TEXTURE_2D)
    glBindTexture(GL_TEXTURE_2D, 0)
    [...] 
```

初始化后，纹理单元 1 已`my_texture1`分配和纹理单元 2 `my_texture2`。活动纹理仍然是纹理 2。因此，通过调用`glBindTexture(GL_TEXTURE_2D, 0)`您将纹理与活动纹理单元 2 解除绑定。

你应该做的是：

```
def DrawGLScene():
    global frame, testvar, my_texture1,my_texture2
    glActiveTexture(GL_TEXTURE1)
    glBindTexture(GL_TEXTURE_2D, my_texture1) 
    glActiveTexture(GL_TEXTURE2)
    glBindTexture(GL_TEXTURE_2D, my_texture2)
    [...] 
```

您也可以简单地删除最后四行（在 之后`global frame, testvar, my_texture1,my_texture2`），因为您的 init 例程会处理此问题。但是，如果您在代码中绑定和取消绑定任何其他纹理，则必须如上所述进行纹理单元激活和纹理绑定。

# java - Java Syslog 仅使用 logback 记录到本地机器

> ID：11412357
> 
> 赞同：2
> 
> 时间：2012-07-10T11:27:42.390
> 
> 标签：java, udp, slf4j, logback, syslog

我只需要将事件记录到`syslog`本地主机**上**。我的第一次试用是使用`logback` `SyslogAppender`，但看起来它是通过 UDP 写入日志的。问题是`syslog`守护进程需要配置为访问远程日志记录，我不能保证所有部署目标。有没有办法从JAVA `syslog`“直接”登录（这样`/bin/logger`做的方式）？（我的意思是，不需要通过 UDP 或 TCP）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:36:41.290

我猜你可以直接调用 /bin/logger ，但是你需要编写一个新的适配器来这样做。“最简单”的事情可能是对当前适配器进行子类化以获取所有脚手架，并且只覆盖发送消息的片段。

您可能想对是否可以编写一个调用 /bin/logger 的简单 Java 程序进行一些实验，看看这是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T21:00:38.003

刚好遇到类似的问题，发现[SysLog4J](http://www.syslog4j.org/)。不幸的是，它自 2011 年以来一直没有得到积极开发。

存在一些替代包装 - 这似乎是新鲜的和活着的：[https ://github.com/Graylog2/syslog4j-graylog2](https://github.com/Graylog2/syslog4j-graylog2)

编辑：更好的答案已经是以下问题的一部分：[Using Syslog's unix socket with Log4J2](https://stackoverflow.com/questions/32053768/using-syslogs-unix-socket-with-log4j2) :)

# format - JavaFX 表格单元格格式

> ID：11412360
> 
> 赞同：10
> 
> 时间：2012-07-10T11:27:49.033
> 
> 标签：format, render, cell, javafx-2

```
 TableColumn<Event,Date> releaseTime  = new TableColumn<>("Release Time");
    releaseTime.setCellValueFactory(
                new PropertyValueFactory<Event,Date>("releaseTime")
            ); 
```

如何更改 releaseTime 的格式？目前它在 Date 对象上调用一个简单的 toString。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-26T15:21:23.000

如果您想保留 TableColumn 的排序功能，上述解决方案均无效：如果您将 Date 转换为 String 并在 TableView 中以这种方式显示；该表将对其进行排序（因此不正确）。

我找到的解决方案是继承 Date 类以覆盖 toString() 方法。不过这里有一个警告：TableView 使用 java.sql.Date 而不是 java.util.Date；所以你需要对前者进行子类化。

```
import java.text.SimpleDateFormat;

public class CustomDate extends java.sql.Date {

    public CustomDate(long date) {
        super(date);
    }

    @Override
    public String toString() {
        return new SimpleDateFormat("dd/MM/yyyy").format(this);
    }
} 
```

该表将调用该方法以打印日期。

当然，您也需要将 TableColumn 声明中的 Date 类更改为新的子类：

```
@FXML
TableColumn<MyObject, CustomDate> myDateColumn; 
```

将对象属性附加到表的列时也是如此：

```
myDateColumn.setCellValueFactory(new PropertyValueFactory< MyObject, CustomDate>("myDateAttr")); 
```

最后，为了清楚起见，这是您在对象类中声明 getter 的方式：

```
public CustomDate getMyDateAttr() {
    return new CustomDate(myDateAttr.getTime()); //myDateAttr is a java.util.Date           
} 
```

由于它在幕后使用 java.sql.Date ，我花了一段时间才弄清楚这一点；所以希望这会为其他人节省一些时间！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-05T14:38:25.650

Java FX8 更新：

（我不确定这是回答这个问题的好地方，但我在 JavaFX8 中遇到了问题，并且有些事情发生了变化，比如 java.time 包）

与前面的答案有些不同：我在列上保留了日期类型，所以我需要同时使用 cellValueFactory 和 cellFactory。我制作了一个通用的可重用方法来为所有日期列生成 cellFactory。我使用 java.time 包的 java 8 日期！但是该方法可以很容易地为 java.util.date 重新实现。

```
 @FXML
 private TableColumn<MyBeanUi, ZonedDateTime> dateColumn;

@FXML
public void initialize () {
  // The normal binding to column 
  dateColumn.setCellValueFactory(cellData -> cellData.getValue().getCreationDate());

  //.. All the table initialisation and then
  DateTimeFormatter format = DateTimeFormatter .ofLocalizedDate(FormatStyle.SHORT);
  dateColumn.setCellFactory (getDateCell(format));

}

public static <ROW,T extends Temporal> Callback<TableColumn<ROW, T>, TableCell<ROW, T>> getDateCell (DateTimeFormatter format) {
  return column -> {
    return new TableCell<ROW, T> () {
      @Override
      protected void updateItem (T item, boolean empty) {
        super.updateItem (item, empty);
        if (item == null || empty) {
          setText (null);
        }
        else {
          setText (format.format (item));
        }
      }
    };
  };
} 
```

优点是：

*   该列使用“java8 Date”键入以避免@Jordan 引发的排序问题
*   方法“getDateCell”是通用的，可以用作所有 Java8 时间类型（Local Zoned 等）的 util 函数

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-16T05:24:39.763

我建议使用 Java 泛型来创建可重用的列格式化程序，它需要任何`java.text.Format`. 这减少了样板代码的数量......

```
private class ColumnFormatter<S, T> implements Callback<TableColumn<S, T>, TableCell<S, T>> {
    private Format format;

    public ColumnFormatter(Format format) {
        super();
        this.format = format;
    }
    @Override
    public TableCell<S, T> call(TableColumn<S, T> arg0) {
        return new TableCell<S, T>() {
            @Override
            protected void updateItem(T item, boolean empty) {
                super.updateItem(item, empty);
                if (item == null || empty) {
                    setGraphic(null);
                } else {
                    setGraphic(new Label(format.format(item)));
                }
            }
        };
    }
} 
```

使用示例

```
birthday.setCellFactory(new ColumnFormatter<Person, Date>(new SimpleDateFormat("dd MMM YYYY")));
amplitude.setCellFactory(new ColumnFormatter<Levels, Double>(new DecimalFormat("0.0dB"))); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-10T21:04:22.350

我最近需要这样做 -

```
dateAddedColumn.setCellValueFactory(
   new Callback<TableColumn.CellDataFeatures<Film, String>, ObservableValue<String>>() {
      @Override
      public ObservableValue<String> call(TableColumn.CellDataFeatures<Film, String> film) {
         SimpleStringProperty property = new SimpleStringProperty();
         DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
         property.setValue(dateFormat.format(film.getValue().getCreatedDate()));
         return property;
      }
   }); 
```

但是 -在 Java 8 中使用 Lamba 表达式*要容易得多：*

```
dateAddedColumn.setCellValueFactory(
   film -> {
      SimpleStringProperty property = new SimpleStringProperty();
      DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
      property.setValue(dateFormat.format(film.getValue().getCreatedDate()));
      return property;
   }); 
```

快点使用 Java 8 版本的 oracle！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-10T11:46:31.740

您可以通过细胞工厂实现这一目标。请参阅
[https://stackoverflow.com/a/10149050/682495](https://stackoverflow.com/a/10149050/682495)
[https://stackoverflow.com/a/10700642/682495](https://stackoverflow.com/a/10700642/682495)
虽然第二个链接是 about `ListCell`，但同样的逻辑也完全适用于`TableCell`s。

PS 如果您需要一些示例代码，请在此处附上。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-12-03T04:59:18.760

一个通用的解决方案可能很简单：

```
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.util.Callback;

public interface AbstractConvertCellFactory<E, T> extends Callback<TableColumn<E, T>, TableCell<E, T>> {

    @Override
    default TableCell<E, T> call(TableColumn<E, T> param) {
        return new TableCell<E, T>() {
            @Override
            protected void updateItem(T item, boolean empty) {
                super.updateItem(item, empty);
                if (item == null || empty) {
                    setText(null);
                } else {
                    setText(convert(item));
                }
            }
        };
    }

    String convert(T value);        
} 
```

及其示例用法：

```
TableColumn<Person, Timestamp> dateCol = new TableColumn<>("employment date");
dateCol.setCellValueFactory(new PropertyValueFactory<>("emploumentDateTime"));    
dateCol.setCellFactory((AbstractConvertCellFactory<Person, Timestamp>) value -> new SimpleDateFormat("dd-MM-yyyy").format(value)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-20T19:15:17.797

这就是我所做的，我工作得很好。

```
tbColDataMovt.setCellFactory((TableColumn<Auditoria, Timestamp> column) -> {
    return new TableCell<Auditoria, Timestamp>() {
        @Override
        protected void updateItem(Timestamp item, boolean empty) {
            super.updateItem(item, empty);
            if (item == null || empty) {
                setText(null);
            } else {
                setText(item.toLocalDateTime().format(DateTimeFormatter.ofPattern("dd/MM/yyyy")));
            }
        }
    };
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-23T10:33:37.800

您可以轻松地通过管道传输不同类型的属性，并在两者之间放置一个格式化程序或转换器。

```
 //from my model
    ObjectProperty<Date> valutaProperty;

    //from my view
    TableColumn<Posting, String> valutaColumn;

    valutaColumn.setCellValueFactory(
            cellData -> {
                  SimpleStringProperty property = new SimpleStringProperty();
                  property.bindBidirectional(cellData.getValue().valutaProperty,  new SimpleDateFormat("dd.MM.yyyy", Locale.GERMAN));
                  return property;
               }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-24T09:31:40.207

类`StringConverter`是另一种机制。

`TextFieldTableCell`有一个构造函数如下：`public TextFieldTableCell(StringConverter<T> converter)`.

... 和`StringConverter`s 由子类组成，例如`LocalDateStringConverter`. 然后，默认实现将是：

```
new TextFieldTableCell( new LocalDateStringConverter() ); 
```

...这还不错，但是无参数`LocalDateStringConverter`使用格式为“dd/mm/yyyy”的日期进行解析（`fromString()`方法）和`toString()`. 但是还有其他构造函数可以传递 a`FormatStyle`或`DateTimeFormatter`.

然而，从我的实验来看，`StringConverter`s 存在一些问题，因为它很难捕捉到无效日期的`DateTimeParseException`抛出。`fromString()`

这可以通过创建自己的`StringConverter`类来解决，例如：

```
class ValidatingLocalDateStringConverter extends LocalDateStringConverter {
    boolean valid;

    @Override
    LocalDate fromString(String value) {
        valid = true;
        if (value.isBlank()) return null;
        try {
            // NB wants ISO
            return LocalDate.parse( value );
        } catch ( DateTimeParseException e) {
            valid = false;
        }
        return null;
    }

    @Override
    String toString( LocalDate date ){
        // NB returns ISO or the String "null" with null date value (!)
        String s = date.toString();
        return s.equals( 'null' )? '' : s;
    }
} 
```

使用此`StringConverter`解决方案将意味着日期按时间顺序排序，而不管`String`表示形式如何。

# wordpress - 是否可以通过 URL/搜索查询等访问自定义字段？

> ID：11412367
> 
> 赞同：1
> 
> 时间：2012-07-10T11:28:10.507
> 
> 标签：wordpress, security, custom-fields

我要建立一个销售域名的网上商店。

每个域都是一个帖子，每个帖子包含大约 10 个自定义字段。

我的问题是，如果我不查询这些自定义字段，它们是否可以访问？

例如，您转到单个帖子（在我的案例中是域概述），您可以检索我的自定义字段的值吗？否则人们可以检索代码，而无需付费。如果我不查询这些自定义字段，或者不是所有这些字段，它们是否可以访问？

将代码保存在您支付的自定义字段中是否安全？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:38:42.237

您*不应该这样*做，但是 WP 中总是存在安全漏洞的可能性，甚至是对 WP 管理区域或 MySQL 数据库进行暴力攻击这样简单的事情。

我会谨慎行事，并将任何关键数据保存在单独的系统中。也许在有人购买后，您可以让他们登录到一个单独的系统来检索他们的激活码。

Gumroad 对您来说可能是一个不错的端到端履行系统。您的每个域都是一个单独的 Gumroad 产品，您可以将短链接作为自定义字段粘贴到 WordPress 中。更多信息：[https ://gumroad.com/](https://gumroad.com/)

# macos - 链接时从错误的dylib中拾取符号

> ID：11412370
> 
> 赞同：0
> 
> 时间：2012-07-10T11:28:22.543
> 
> 标签：macos, ld, dylib

我正在链接一个二进制文件，该二进制文件导入在两个依赖 dylib 中定义的符号，但我无法`ld`选择正确的。

该符号是`_init_process`并且它在 libSystem.dylib（由 ld 隐式添加）和 libida.dylib（我们的库）中定义。我想`ld`选择libida，但我无法让它发挥作用。

这是最终的链接器命令行：

```
/usr/libexec/gcc/i686-apple-darwin10/4.2.1/ld -dynamic -dylib
-dylib_compatibility_version 1.0 -dylib_current_version 1.0 -arch
i386 -macosx_version_min 10.5 -macosx_version_min 10.5
-single_module -weak_reference_mismatches non-weak -w -o
../../bin/x86_mac_gcc/plugins/python.pmc -ldylib1.10.5.o
-L../../bin/x86_mac_gcc/
-L/Developer/SDKs/MacOSX10.5.sdk/usr/lib/i686-apple-darwin10/4.2.1
-L/Developer/SDKs/MacOSX10.5.sdk/usr/lib
-L/usr/lib/gcc/i686-apple-darwin10/4.2.1
-L/usr/lib/gcc/i686-apple-darwin10/4.2.1
-L/Developer/SDKs/MacOSX10.5.sdk/usr/lib/gcc/i686-apple-darwin10/4.2.1/../../../i686-apple-darwin10/4.2.1
-L/Developer/SDKs/MacOSX10.5.sdk/usr/lib/gcc/i686-apple-darwin10/4.2.1/../../..
-v -lpthread ../../lib/x86_mac_gcc_32/libiconv.2.2.0.dylib
obj/x86_mac_gcc_32/python.o32 obj/x86_mac_gcc_32/idaapi.o32 -lida
-install_name python.pmc -lpython2.6 -ldl -why_load
-search_paths_first -t -lstdc++ -lgcc_s.10.5 -lgcc -lSystem 
```

正如你所看到的，-lida 出现在 -lSystem 之前，所以我希望`ld`首先选择 libida.dylib，但它没有发生：

```
dlopen(/home/test/build/bin/x86_mac_gcc/plugins/python.pmc): dlopen(/home/test/build/bin/x86_mac_gcc/plugins/python.pmc, 2): Symbol not found: _init_process
  Referenced from: /home/test/build/bin/x86_mac_gcc/plugins/python.pmc
  Expected in: /usr/lib/libSystem.B.dylib
 in /home/test/build/bin/x86_mac_gcc/plugins/python.pmc
/home/test/build/bin/x86_mac_gcc/plugins/python.pmc: can't load file 
```

链接器的调试输出：

```
Library search paths:
    ../../bin/x86_mac_gcc/
    /Developer/SDKs/MacOSX10.5.sdk/usr/lib/i686-apple-darwin10/4.2.1
    /Developer/SDKs/MacOSX10.5.sdk/usr/lib
    /usr/lib/gcc/i686-apple-darwin10/4.2.1
    /usr/lib/gcc/i686-apple-darwin10/4.2.1
    /Developer/SDKs/MacOSX10.5.sdk/usr/lib/i686-apple-darwin10/4.2.1
    /Developer/SDKs/MacOSX10.5.sdk/usr/lib
    /usr/lib
    /usr/local/lib
Framework search paths:
    /Library/Frameworks/
    /System/Library/Frameworks/
/Developer/SDKs/MacOSX10.5.sdk/usr/lib/dylib1.10.5.o
/Developer/SDKs/MacOSX10.5.sdk/usr/lib/libpthread.dylib
../../lib/x86_mac_gcc_32/libiconv.2.2.0.dylib
obj/x86_mac_gcc_32/python.o32
obj/x86_mac_gcc_32/idaapi.o32
../../bin/x86_mac_gcc//libida.dylib
/usr/lib/libpython2.6.dylib
/Developer/SDKs/MacOSX10.5.sdk/usr/lib/libdl.dylib
/Developer/SDKs/MacOSX10.5.sdk/usr/lib/i686-apple-darwin10/4.2.1/libstdc++.dylib
/Developer/SDKs/MacOSX10.5.sdk/usr/lib/libgcc_s.10.5.dylib
/usr/lib/gcc/i686-apple-darwin10/4.2.1/libgcc.a
/Developer/SDKs/MacOSX10.5.sdk/usr/lib/libSystem.dylib
/usr/lib/system/libmathCommon.A.dylib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:12:29.180

解决了。罪魁祸首是`-lpthread`- libpthread 是 libSystem 的符号链接：

```
$ ls -la /Developer/SDKs/MacOSX10.5.sdk/usr/lib/libpthread.dylib
lrwxr-xr-x  1 root  wheel  15 Nov  9  2011 /Developer/SDKs/MacOSX10.5.sdk/usr/lib/libpthread.dylib -> libSystem.dylib 
```

在 -lida 之后移动它后，一切都按预期工作。

# javascript - geocoder.geocode() 如何工作？

> ID：11412375
> 
> 赞同：3
> 
> 时间：2012-07-10T11:28:53.793
> 
> 标签：javascript, jquery, google-maps-api-3

我唯一的问题是，如果浏览器不支持**跨域 AJAX 请求**，那么google map api 如何获取数据。

以下代码如何工作？

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
geocoder = new google.maps.Geocoder();
geocoder.geocode( { 'address': address}, function(results, status) {
   if (status == google.maps.GeocoderStatus.OK) {
   }
});
</script> 
```

**geocoder.geocode 在内部做什么？**

编辑：好的，他们包括**http://maps.gstatic.com/intl/en_us/mapfiles/api-3/9/8/main.js**

**谁能告诉我他们在 JS 代码中在哪里使用 JSONP？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:32:27.307

它很可能使用 JSONp，即它包含来自 google 服务器的脚本，该脚本调用回调函数并将响应传递给该函数。

# python - 用python登录facebook

> ID：11412376
> 
> 赞同：2
> 
> 时间：2012-07-10T11:28:53.473
> 
> 标签：python, facebook, cookies, login, keep-alive

我可以使用此代码登录 Facebook。登录后，我可以访问需要您登录的页面。

```
def SignIn(self):
    url = 'https://login.facebook.com/login.php?login_attempt=1'
    data = "locale=en_US&non_com_login=&email="+str(self.Username)+"&pass="+str(self.Password)+"&lsd=20TOl"
    self.cookie = cookielib.CookieJar()

    try:
        self.opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(self.cookie))
    except:
        sys.stderr.write("Unexpected error!".format(src))

    try:
         self.opener.open('https://www.facebook.com')
    except:
         sys.stderr.write("Unexpected error!1")

    try:
         self.opener.open(url, data)
    except:
        sys.stderr.write("Unexpected error!2")

    self.IsSignIned=True  
    return self.opener 
```

但是这段代码不起作用

```
import requests

headers = {'Host':'www.facebook.com',
'Origin':'http://www.facebook.com',
'Referer':'http://www.facebook.com/',
'User-Agent':'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11'}

s = requests.session(headers=headers)
login_data = {
    'locale':'en_US',
    'non_com_login':'',
    'email':'mymail@mail.com',
    'pass':'mypassword',
    'lsd':'20TOl'
    }

r=s.post('https://login.facebook.com/login.php?login_attempt=1',data=login_data,verify=False)
print r.content
print r.status_code 
```

它返回

> Facebook登入
> 
> 需要 Cookie
> 
> 您的浏览器未启用 Cookie。在继续之前，请在您的安全首选项中进行调整。

我必须使用 requests 库，因为我需要 Gzip 和 keep-alive

问题是什么？有没有其他图书馆可以处理所有这些？（Gzip，保活cookie，..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:46:07.510

你真的需要自己做所有的事情吗？您是否尝试过 facepy（https://github.com/jgorset/facepy）？

该库也使用“请求”，但我确信他们解决了这个问题（假设你想登录，因为你需要一个访问令牌来做 OpenGraph 的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T11:06:16.727

self.cookie =,cookielib.CookieJar() 你没有在第二个代码中激活 python cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T23:45:32.733

我阅读了您的问题，并认为您想在登录后获取信息。下面是我显示 HTML 内容的代码，它解决了你的问题吗？

```
#!/usr/bin/python

import urllib, urllib2, cookielib

username = 'yourusername'

password = 'yourpassword'

cj = cookielib.CookieJar()

opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))

login_data = urllib.urlencode({'username' : username, 'j_password' : password})

opener.open('https://login.facebook.com/login.php?login_attempt=1', login_data)

resp = opener.open('http://www.facebook.com/')

print resp.read() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-23T08:02:11.030

我在中国使用[selenium](http://selenium-python.readthedocs.org/)自动登录微信。代码在这里：

```
# -*- coding: utf-8 -*-
from selenium import webdriver
from selenium.webdriver.support import ui
from selenium.webdriver.common.keys import Keys

def page_is_loaded(driver):
    return driver.find_element_by_tag_name("body") != None

driver = webdriver.Firefox() # open firefox browser
driver.get('https://mp.weixin.qq.com/') # go to url 

wait = ui.WebDriverWait(driver, 10)
wait.until(page_is_loaded)

wechat_account = driver.find_element_by_id("account") # here you should find the facebook login account id in webpage sourcecode and change the string "account"
wechat_account.send_keys("user@email.com")      # input your email address or your wechat account

your_password = driver.find_element_by_id("pwd")
your_password.send_keys("balabalabala")         # your password instead of balabalabala
your_password.send_keys(Keys.RETURN)

print "Mission Completed! Write your new article.-->" 
```

希望它会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-25T13:52:40.583

我建议你使用硒。

```
from selenium import webdriver  ##Imports the selenium web driver
driver = webdriver.Firefox()    ##Create a Firefox Webdriver
driver.get("https://www.facebook.com/")  ##Tells the driver to go to     facebook.com
driver.find_element_by_css_selector("#email").send_keys("insert username here")
driver.find_element_by_css_selector("#pass").send_keys("insert password  here")
driver.find_element_by_css_selector("#u_0_q").click() 
```

有关更深入的指南，我建议您看一下[这篇文章](http://strawbot.com/python-selenium-facebook-login-tutorial/)

# java - 如何将不同级别的两个过滤器添加到同一个 GlazedList 表？

> ID：11412377
> 
> 赞同：1
> 
> 时间：2012-07-10T11:29:00.853
> 
> 标签：java, swing, filter, glazedlists

我创建了一个表，我想在两个不同的级别对其进行过滤。首先使用文件扩展名上的单选按钮过滤它（.jpg，.doc，其余）。第二次使用 textField 对其进行过滤，以在第一次过滤后搜索内容。如下所示，您可以在演示中看到我可以使用单选按钮过滤表格，但我不知道如何在表格上应用二级过滤器（JTextField）。

**有没有人知道怎么做？**

![在此处输入图像描述](../Images/278408c8e381eec8da492a2273277853.png)

```
public class TwoLevelFilterTablePanel extends OeVubPanel {
private static final File DirectoryEngine = new File("C:\\Users\\Public\\Pictures\\Sample Pictures");
private JRadioButton jpg,doc,others;
private ButtonGroup radioSet;
private JTextField txtFilter;
private JTable glazedTable;
private BasicEventList<MyCode> eventList;
private JPanel filterPanel,radioSetPanel;

public TwoLevelFilterTablePanel(BasicEventList<MyCode> eventList) {
    this.eventList=eventList;
    createComponents();
    layoutComponents();
}

public void createComponents() {
    jpg = new JRadioButton("jpg");
    doc= new JRadioButton("doc");
    others= new JRadioButton("other");
    radioSet = new ButtonGroup();
    radioSet.add(jpg);
    radioSet.add(doc);
    radioSet.add(others);
    txtFilter = new JTextField();

    radioSetPanel = new JPanel();
    radioSetPanel.setLayout(new BoxLayout(radioSetPanel, BoxLayout.X_AXIS));
    radioSetPanel.add(jpg);
    radioSetPanel.add(doc);
    radioSetPanel.add(others);
    filterPanel=new JPanel();
    filterPanel.setLayout(new BoxLayout(filterPanel, BoxLayout.Y_AXIS));
    filterPanel.add(radioSetPanel);
    filterPanel.add(txtFilter);

    final BarcodeMatcherEditor barcodeMatcherEditor = new BarcodeMatcherEditor(jpg,doc,others);
    final FilterList filteredRadioSet = new FilterList(eventList, barcodeMatcherEditor);

    // build a JTable
    String[] propertyNames = new String[] {"name", "size","date"};
    String[] columnLabels = new String[] {"Name", "Size","Date"};
    TableFormat tf = GlazedLists.tableFormat(MyCode.class, propertyNames, columnLabels);
    glazedTable = new JTable(new EventTableModel(filteredRadioSet, tf));
}

public void layoutComponents() {
    setLayout(new BoxLayout(this,BoxLayout.Y_AXIS));
    add(filterPanel);
    add(new WebScrollPane(glazedTable));
}

public static void main(String[] args) {
    BasicEventList<MyCode> eventList  = new BasicEventList<MyCode>();
    for(File file : DirectoryEngine.listFiles()){
        eventList.add(new MyCode(file.getName(),file.length(),new Date(file.lastModified())));
    }
    TwoLevelFilterTablePanel demo = new TwoLevelFilterTablePanel(eventList );
    JFrame frame = new JFrame();
    Container cp = frame.getContentPane();
    cp.add(demo);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(500, 500);
    frame.setLocation(500, 500);
    frame.setVisible(true);
}
} 
```

MatcherEditor 类：

```
public class BarcodeMatcherEditor extends AbstractMatcherEditor implements ActionListener {
    private JRadioButton jpg,doc,others;
    public BarcodeMatcherEditor(JRadioButton jpg, JRadioButton doc, JRadioButton others) {
        this.jpg = jpg;
        this.doc=doc;
        this.others =others;
        this.jpg.addActionListener(this);
        this.doc.addActionListener(this);
        this.others.addActionListener(this);
    }

    public void actionPerformed(ActionEvent e) {
        final String filter = ((JRadioButton)e.getSource()).getText();
        if (filter == null)
            this.fireMatchAll();
        else
            this.fireChanged(new BarcodeFilterMatcher(filter));
    }

    private static class BarcodeFilterMatcher implements Matcher {
        private final String filter;
        public BarcodeFilterMatcher(String filter) {
            this.filter = filter;
        }
        public boolean matches(Object item) {
            final MyCode code = (MyCode) item;
            return return filter.equals("other") || code.getName().endsWith(this.filter);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:22:00.700

您只需将两个`FilterList`s 链接在一起：

```
EventList<Person> personLists = ...
...
FilterList<Person> filterListByGender = new FilterList<Person>(personList, genderMatchEditor);
FilterList<Person> filterListBySurname = new FilterList<Person>(filterByGender, textSurnameMatchEditor);
// Continue using the filterListBySurname as you usually would
... 
```

# unicode - 用于标记的 Unicode 字符

> ID：11412382
> 
> 赞同：1
> 
> 时间：2012-07-10T11:29:22.043
> 
> 标签：unicode

我们将数字化很多书籍。我们想在不影响电子书的流程的情况下在原书中标记换行符的地方。哪个不可见的 Unicode 宪章可用于标记原始文件中的某些特殊位置？

(\n 将用于表示段落的结尾)

```
This  is  a  sentence 
in the original book that
I want to mark      line
break places. 
```

替换的正确字符是什么`*`：

```
This  is  a sentence * in the original book that * I want to mark line *break places. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:48:24.593

Unicode 没有隐藏字符的概念，它表示某些原始文件中的换行符，但不会导致渲染中的换行符。Unicode 对纯文本数据进行编码，它的换行控制字符在呈现纯文本时会产生影响。

这里重要的是如何使用这些文件。如果它们需要用纯文本编辑器处理，那么你需要决定：要么在默认渲染中复制换行符，要么在创建文件时省略它们。你不能让它们隐形。而不同的文本编辑器，如记事本和 Emacs，可能会使用不同的行控制约定；一个程序的行尾是另一个程序的段尾。

如果文件仅由您创建的程序处理，那么您可以使用您喜欢的任何约定。最合乎逻辑的是：“行和段落分隔符。Unicode 标准提供了两个明确的字符，U+2028 行分隔符和 U+2029 段落分隔符，用于分隔行和段落。它们被认为是 Unicode 纯文本中表示行和段落边界的默认形式。在每个行分隔符之后开始一个新行。在每个段落分隔符之后开始一个新段落。由于这些字符是分隔符代码，因此不必以它们开始第一行或段落或结束最后一行或段落。这样做将表明后面有一个空的段落或行。段落分隔符可以插入文本段落之间。它的使用允许创建纯文本文件，这些文件可以在接收端以不同的线宽进行布局。行分隔符可用于指示无条件的行结束。” [http://www.unicode.org/versions/Unicode6.1.0/ch16.pdf（PDF](http://www.unicode.org/versions/Unicode6.1.0/ch16.pdf)中的第 6 和 7 页）

注意 U+2028 和 U+2029 通常不被文本编辑器理解。它们适用于以纯文本格式存储数据。当要渲染文本时，渲染软件可以选择忽略原来的分割线，把 U+2028 当作一个空格，除非前面有一个连字符（这是一个没有更高级别无法解决的问题）信息：以“foo-”结尾的行和以“bar”开头的行可以表示单词“foobar”作为断行的连字符，或连字符的复合词“foo-bar”，或者在某些情况下，组合“foo-bar”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:31:51.100

使用换行符 (LF, `"\n"`, `0x0A`) 和/或回车符 (CR, `"\r"`, `0x0D`)。
即，用于此目的的常规字符。

# video - Kaltura -- 发生内部服务器错误

> ID：11412383
> 
> 赞同：0
> 
> 时间：2012-07-10T11:29:22.027
> 
> 标签：video, upload, media

我在`Uploading any Content`（或）访问`[ Content ] Tab`Kaltura 管理控制台中的 , 时出错。我是管理员角色。

它显示如下：

![在此处输入图像描述](../Images/499e76ac1b05d1f912d64dfc24f64a13.png)

在`kaltura_api_v3.log`文件中：

```
2012-07-10 19:35:52 [127.0.0.1] [2090136132] [API] [KalturaFrontController->errorHandler] NOTICE: /opt/kaltura/app/infra/general/myCache.class.php line 39 - Memcache::connect(): Server example.mydomain.com (tcp 11211, udp 0) failed with: Connection refused (111)
2012-07-10 19:35:52 [127.0.0.1] [2090136132] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/general/myCache.class.php line 39 - Memcache::connect(): Can't connect to example.mydomain.com:11211, Connection refused (111)
2012-07-10 19:35:52 [127.0.0.1] [2090136132] [API] [myCache->myCache] NOTICE: ERROR: Error while trying to connect to memcache. Make sure it is properly running on example.mydomain.com:11211
2012-07-10 19:35:52 [127.0.0.1] [2090136132] [API] [kPermissionManager::addPartnerGroupAction] NOTICE: Permission item id [571] is not of type PermissionItemType::API_ACTION_ITEM but still defined in partner group permission id [117]
2012-07-10 19:35:52 [127.0.0.1] [2090136132] [API] [kPermissionManager::addPartnerGroupAction] NOTICE: Permission item id [633] is not of type PermissionItemType::API_ACTION_ITEM but still defined in partner group permission id [117]
2012-07-10 19:35:52 [127.0.0.1] [48976061] [API] [KalturaFrontController->errorHandler] NOTICE: /opt/kaltura/app/infra/general/myCache.class.php line 39 - Memcache::connect(): Server example.mydomain.com (tcp 11211, udp 0) failed with: Connection refused (111)
2012-07-10 19:35:52 [127.0.0.1] [48976061] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/general/myCache.class.php line 39 - Memcache::connect(): Can't connect to example.mydomain.com:11211, Connection refused (111)
2012-07-10 19:35:52 [127.0.0.1] [48976061] [API] [myCache->myCache] NOTICE: ERROR: Error while trying to connect to memcache. Make sure it is properly running on example.mydomain.com:11211
2012-07-10 19:35:53 [127.0.0.1] [48976061] [API] [kPermissionManager::addPartnerGroupAction] NOTICE: Permission item id [571] is not of type PermissionItemType::API_ACTION_ITEM but still defined in partner group permission id [117]
2012-07-10 19:35:53 [127.0.0.1] [48976061] [API] [kPermissionManager::addPartnerGroupAction] NOTICE: Permission item id [633] is not of type PermissionItemType::API_ACTION_ITEM but still defined in partner group permission id [117]
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] NOTICE: /opt/kaltura/app/infra/general/myCache.class.php line 39 - Memcache::connect(): Server example.mydomain.com (tcp 11211, udp 0) failed with: Connection refused (111)
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/general/myCache.class.php line 39 - Memcache::connect(): Can't connect to example.mydomain.com:11211, Connection refused (111)
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [myCache->myCache] NOTICE: ERROR: Error while trying to connect to memcache. Make sure it is properly running on example.mydomain.com:11211
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:02 [81.152.216.67] [1659128380] [API] [KalturaFrontController->errorHandler] WARN: /opt/kaltura/app/infra/KAutoloader.php line 52 - require_once(): Unable to allocate memory for pool.
2012-07-10 19:36:03 [81.152.216.67] [1659128380] [API] [KalturaFrontController->getExceptionObject] CRIT: exception 'Exception' with message 'Failed to connect to any Sphinx config' in /opt/kaltura/app/infra/db/DbManager.php:157
Stack trace:
#0 /opt/kaltura/app/plugins/sphinx_search/lib/SphinxCriteria.php(169): DbManager::getSphinxConnection()
#1 /opt/kaltura/app/plugins/sphinx_search/lib/SphinxCriteria.php(359): SphinxCriteria->executeSphinx('kaltura_entry', 'WHERE display_i...', 'ORDER BY create...', 50, 1000, true, '')
#2 /opt/kaltura/app/alpha/lib/model/entryPeer.php(449): SphinxCriteria->applyFilters()
#3 /opt/kaltura/app/api_v3/lib/KalturaEntryService.php(883): entryPeer::doSelect(Object(SphinxEntryCriteria))
#4 /opt/kaltura/app/api_v3/services/BaseEntryService.php(441): KalturaEntryService->listEntriesByFilter(Object(KalturaMediaEntryFilter), Object(KalturaFilterPager))
#5 [internal function]: BaseEntryService->listAction(Object(KalturaMediaEntryFilter), Object(KalturaFilterPager))
#6 /opt/kaltura/app/api_v3/lib/KalturaServiceReflector.php(293): call_user_func_array(Array, Array)
#7 /opt/kaltura/app/api_v3/lib/KalturaDispatcher.php(85): KalturaServiceReflector->invoke('list', Array)
#8 /opt/kaltura/app/api_v3/lib/KalturaFrontController.php(246): KalturaDispatcher->dispatch('baseentry', 'list', Array)
#9 /opt/kaltura/app/api_v3/lib/KalturaFrontController.php(90): KalturaFrontController->handleMultiRequest()
#10 /opt/kaltura/app/api_v3/web/index.php(19): KalturaFrontController->run()
#11 {main} 
```

那我该怎么办？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:41:18.167

异常显示系统无法连接 sphinx。检查“searchd”进程是否正在运行，如果没有则运行它（/opt/kaltura/app/scripts 下应该有一个脚本）

Memcache 应该是可选的，但绝对推荐使用它来提高性能。您可以从 Linux 发行版的存储库中安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:43:02.880

我看到两个问题。您的 PHP 没有足够的内存，或者您的盒子似乎内存不足。

*对于 php，您可以在/etc/php.ini*中增加 *memory_limit* 值（需要重新启动 Web 服务器）

另一件事是 memcached 服务器似乎不可用。如果它在不同的盒子上运行，您可能需要检查防火墙设置。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-06T15:59:15.980

删除 /opt/kaltura/log/sphinx/data/ 中的所有文件并再次启动 sphinx。

# java - JasperReports 本地化

> ID：11412384
> 
> 赞同：0
> 
> 时间：2012-07-10T11:29:23.230
> 
> 标签：java, jasper-reports

我正在使用*JasperReports*并希望生成不同语言的报告，但出现了问题。

这是我的代码

```
public void initQueryReport() throws JRException, ParseException {
    try {
        Map param = new HashMap();
        param.put("DATE", date2);
        fill1 = JasperFillManager.fillReport(
                "E:\\jasper reports\\employees.jasper", param, connection);
    } catch (Exception e) {
        System.out.println();
    }
}

ServletResponse respnce;
HttpServletResponse respons;

public void PDFQuery(ActionEvent event) throws JRException, IOException, ParseException {
    try {
        initQueryReport();
        respnce = (ServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
        respons = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
        respons.setContentType("application/pdf");
        respons.setHeader("Content-Disposition", "inline");
        respons.setContentType("application/pdf");
        ServletOutputStream out = respnce.getOutputStream();
        JRPdfExporter pdf = new JRPdfExporter();
        pdf.setParameter(JRExporterParameter.JASPER_PRINT, fill1);
        pdf.setParameter(JRExporterParameter.OUTPUT_STREAM, out);

        pdf.exportReport();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

我创建了一个名为***localizationdemo.prperties***的属性文件，其中包含我想要使用的语言的文本，我将此文件放在*`src`*文件夹中。

当我运行应用程序并单击生成报告的链接时，出现以下异常：

```
net.sf.jasperreports.engine.JRException: No input source supplied to the exporter 
```

请注意，当我在调试模式下运行应用程序时，我有以下异常详细信息：

```
java.util.missingresourceexception can't find bundle for base name locale en_us 
```

请帮我解决这个问题。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T17:14:49.680

你确定你已经在 .jrxml 文件中设置了资源包属性，因为你似乎没有在你的 java 文件中设置它？

如果您使用的是 Jaspersoft Studio：在 Jaspersoft Studio 中单击*大纲*中的报告名称，然后从*属性视图*中选择“报告”菜单并检查子菜单“数据集”下的资源包属性（本地化演示）是否具有已设置为适当的属性文件。

您也可以在 Source View 中查看它，它应该是这样的：

```
<jasperReport /*****/ resourceBundle="localizationdemo" /****/> 
```

更多信息：[http ://www.tutorialspoint.com/jasper_reports/jasper_Internationalization.htm](http://www.tutorialspoint.com/jasper_reports/jasper_Internationalization.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T02:14:16.617

你在使用 Spring 框架吗？可能是如果您在 spring.xml 中使用**ResourceBundleViewResolver 。**您必须将位于的路径**本地化demo.properties 作为基本名称属性值。**在 spring.xml 中查看我的以下代码：

```
class="org.springframework.web.servlet.view.ResourceBundleViewResolver"

property name="basename" value="config/jasperreports-views" 
```

**就我而言，我使用了 spring 3.0**

# android - 如何让 Eclipse Indigo 中的 Package Explorer 显示我的 Android 项目？

> ID：11412389
> 
> 赞同：0
> 
> 时间：2012-07-10T11:30:01.023
> 
> 标签：android, eclipse, package, explorer

我最近升级了计算机，并在此过程中升级为使用 Eclipse Indigo 开发 Android 应用程序。问题是 Package Explorer 将不再显示我的 Android 2.3.3 或 Android 3.0 项目。但是，它会在各自的工作区中显示较早的 Android 版本（例如，2.0 和 2.2）。

我已经检查过了，并且安装了 2.3.3 和 3.0 的 SDK，并且应用程序/项目位于正确的工作区中。使问题更加复杂的是，当我尝试将 2.3.3 或 3.0 应用程序/项目“导入”到它们各自的工作区时，Eclipse 不允许我这样做，因为它说它们已经存在于工作区中。

任何人以前见过这种行为或知道如何纠正它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:34:07.913

听起来您的某些桌面文件已损坏或 Indigo 无法识别。尝试将项目的文件夹移出工作区文件夹，然后导入它们。

# windows-phone-7 - 使用 CloudStorageAccount 访问 Azure

> ID：11412394
> 
> 赞同：0
> 
> 时间：2012-07-10T11:30:28.807
> 
> 标签：windows-phone-7, azure

我有向 Azure 队列提交消息的控制台应用程序。现在我正在尝试将此应用程序迁移到 Mobile，但遇到了`CloudStorageAccount`. 它需要 Windows dll 版本，但我的是 Mobile。

你们知道如何初始化`CloudStorageAccount`对象替代方式吗？

```
 public Initializator()
    {
        CloudStorageAccount.SetConfigurationSettingPublisher((configName, configSetter) =>
        {
            // for a console app, reading from App.config
            configSetter(ConfigurationManager.ConnectionStrings[configName].ConnectionString);
        });

        CloudStorageAccount storageAccount = CloudStorageAccount.FromConfigurationSetting("QueueStorage");
        CloudQueueClient queueClient = storageAccount.CreateCloudQueueClient();

        queueIn = queueClient.GetQueueReference("queuein");

        queueOut = queueClient.GetQueueReference("queueout");

        queueIn.CreateIfNotExist();

        queueOut.CreateIfNotExist();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:53:14.940

在我看来，使用 Windows Phone 中的 Windows Azure 存储（表、blob 和队列）最简单的方法之一是使用 Phone.Storage NuGet 包（[http://www.nuget.org/packages/Phone .存储](http://www.nuget.org/packages/Phone.Storage)）。这使得在手机上使用存储几乎与使用服务器（或控制台应用程序）中的存储相同。

请务必查看 Wade Wegner 在[http://www.wadewegner.com/2011/11/nuget-packages-for-windows-azure-and-windows-phone-developers/](http://www.wadewegner.com/2011/11/nuget-packages-for-windows-azure-and-windows-phone-developers/)上的博客文章，了解有关 NuGet 包的更多信息.

还有一个 Phone.Storage.Sample 包可能值得一看。

# android - 从 android(java) 数组中的 sqlite 获取并存储列值

> ID：11412395
> 
> 赞同：0
> 
> 时间：2012-07-10T11:30:30.557
> 
> 标签：android, arrays, sqlite, fetch

我想将特定列的值存储在数组中，因为我是新手，所以我不知道该怎么做。我从 sqlite 获取值作为

```
1
2
123
432
3
5 
```

我想将这些值存储在字符串数组中。请告诉我，我没有通过谷歌搜索找到任何合适的例子..thanx 提前。

```
public void fun(String query){
    Cursor cursor = db.rawQuery(query, null);

    try{
        String[] arr = new String[cursor.getCount()];
        if(cursor != null){
            while(cursor.moveToNext()){
                for(int i = 0; i < cursor.getCount(); i++){
                    arr[i] = cursor.getString(0).trim();

                }
                cursor.moveToNext();
            }
            cursor.close();
        }

    }finally{
        cursor.close();
    }

} 
```

这里查询是

```
SELECT <COLUMN_NAME> FROM <TABLE_NAME> WHERE <CONDITION>; 
```

我认为我做错了，请纠正我的错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:02:57.743

我认为使用`rawQuery`是一个坏习惯，尽量避免这种情况（极端情况除外）

尝试以下方法来解决您的问题，希望对您有所帮助：

```
public ArrayList<String> getAllStringValues() {
    ArrayList<String> yourStringValues = new ArrayList<String>();
    Cursor result = db.query(true, YOUR_TABLE,
            new String[] { YOUR_COLUMN_NAME }, null, null, null, null,
            null, null);

    if (result.moveToFirst()) {
        do {
            yourStringValues.add(result.getString(result
                    .getColumnIndex(YOUR_COLUMN_NAME)));
        } while (result.moveToNext());
    } else {
        return null;
    }
    return yourStringValues;
} 
```

**在YourCustomDBManager**类中使用此方法。考虑Android 开发者网站示例程序员指南的**记事本示例以获得更好的概念。**它将帮助您学习如何处理 SQLite。我也是 Android 新手，但我从*记事本*示例中学到了有关 SQLite 的一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:34:28.203

```
Vector<String> vecInt = new Vector<String>; // you can use any datatype <int><float>

cursor.moveToFirst();
for(i=0;i<cursor.getCount();i++)
{
      vecInt.add(cursor.getString(COLUMN_NUM));// if you are using datatype other then string then need to convert here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:36:08.270

```
int [] val = new int[cursor.getCount()]; // integer array
for(int i= 0; i<cursor.getCount(); i++)
     val[i] = cursor.getInt(cursor.getColumnIndex(COLUMN_NAME)); 
```

# html-agility-pack - HtmlAgilityPack Div 类包含字符串

> ID：11412401
> 
> 赞同：0
> 
> 时间：2012-07-10T11:30:53.130
> 
> 标签：html-agility-pack

我正在尝试仅从网页中抓取文章文本。我发现文章总是被 div 标签包围。不幸的是，每个网页的这些 div 标签的类别略有不同。我研究过使用 XPath，但由于类名不同，我认为它不会起作用。有没有办法可以获取所有 div 标签然后获取类？

例子

```
<div class="entry_single">
  <p>I recently traveled without my notebook for the first time in ages.</p>
</div>

<div class="entry-content-pagination">
  <p>Ward 9 Ald. Steven Dove</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:40:43.287

使用 Linq 会更容易。

```
foreach(HtmlNode div in doc.DocumentNode.Descendants("div"))
{
    string className = div.GetAttributeValue("class", string.Empty);
    // do something with class name
} 
```

# r - R Eurequa 接口

> ID：11412402
> 
> 赞同：1
> 
> 时间：2012-07-10T11:30:54.863
> 
> 标签：r

[http://creativemachines.cornell.edu/eureqa/](http://creativemachines.cornell.edu/eureqa/)

[http://code.google.com/p/eureqa-api/](http://code.google.com/p/eureqa-api/)

有没有办法将 Eureqa 与 R 连接起来？（Windows操作系统）也许：

Rcpp 包和：

使用 Eureqa API 的最简单的完整 C++ 程序：

```
#include eureqa/eureqa.h

#include iostream

int main(int argc, char *argv[])
{
  // initialize data set and options
  eureqa::data_set data("my_data.txt");
  eureqa::search_options options("y = f(x)");

  // connect to a eureqa server
  eureqa::connection conn("127.0.0.1");
  conn.send_data_set(data);
  conn.send_options(options);
  conn.start_search();

  // display results
  eureqa::search_progress progress;
  eureqa::solution_frontier solutions;

  while (conn.query_progress(progress))
  {
    solutions.add(progress.solution_);
    std::cout << progress.summary() << std::endl;
    std::cout << solutions.to_string() << std::endl;
  }
  return 0;
} 
```

# c# - 如何创建一个快速加载的包装列表框？

> ID：11412403
> 
> 赞同：3
> 
> 时间：2012-07-10T11:30:55.393
> 
> 标签：c#, windows-phone-7, xaml, listbox, virtualization

我已经制作了一个很好的小三项宽列表作为开关工作的瓷砖。它看起来像这样：

![瓷砖切换器](../Images/ea51a48acb4ade8647c1a8d2074070f5.png)

看起来不错吧？好吧，我在垂直滚动列表中有大约 130 个这样的图块，加载需要很长时间。根据性能分析工具，每个元素渲染大约需要 18 毫秒——这给了我大约 2.3 秒的渲染时间。在设备上，它通常是那个时间的两倍。这并不是真正的危机，但在绘制这些元素之前，UI 是完全黑色的并且没有响应。

在网上进行了一些研究后，我意识到这是因为`WrapPanel`工具包中的控件没有虚拟化它的项目 - 因此`GPU`一次渲染所有对象（在此过程中占用了大量内存）。

现在，有什么方法可以让这一切变得更快吗？

XAML：

```
<ListBox x:Name="ChannelsListBox" Grid.Row="2" Margin="0,40,0,0">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <toolkit:WrapPanel />
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.Template>
        <ControlTemplate>
            <ItemsPresenter />
        </ControlTemplate>
    </ListBox.Template>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid x:Name="ChannelTile" Margin="6,6,6,6" Tap="ChannelTile_Tap">
                <!-- context menu code removed -->
                <Rectangle Width="136" Height="136" Fill="{StaticResource LightGrayColor}" />    
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

的`ListBox`ItemsSource 设置在代码隐藏中 - 如果您想知道的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:50:54.940

好吧，如果您从另一个线程异步填充列表框，您可以避免无响应的 UI。

编辑2：

```
public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();

        /* In the xaml code:
           <ListBox x:Name="ChannelsListBox" ItemsSource="{Binding ListOfTestClasses}" ...
        */

        var vm = new MainPageViewModel();
        DataContext = vm;

        vm.StartLoadingDataAsync(10000);
    }
}

public class MainPageViewModel
{
    public ObservableCollection<TestClass> ListOfTestClasses { get; set; }
    private BackgroundWorker workerThread;
    public MainPageViewModel()
    {
        ListOfTestClasses = new ObservableCollection<TestClass>();
        workerThread = new BackgroundWorker();
        workerThread.DoWork += new DoWorkEventHandler((object sender, DoWorkEventArgs e) =>
        {
            for (int i = 0; i < (int)e.Argument; i++)
            {
                Deployment.Current.Dispatcher.BeginInvoke(() =>
                {
                    ListOfTestClasses.Add(new TestClass { Text = "Element " + (i + 1) });
                });

                Thread.Sleep(150);
            }
        });
    }

    public void StartLoadingDataAsync(int numberOfElements)
    {
        workerThread.RunWorkerAsync(numberOfElements);   
    }
}

public class TestClass
{
    public string Text { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:14:37.337

一些可能有用的想法：

1.  查找或实现一个虚拟化 WrapPanel。这是最合适的解决方案，但我认为我还没有看到一个可靠的实现。但是为了这个目的，也许你不需要完美，并且可以摆脱别人已经写过的东西。
2.  使用包含水平 StackPanel 子项的父虚拟化垂直 StackPanel。为此，您需要将单个数据序列重新塑造成较短的 3 项条目序列。但是，这可能并不难，并且应该为您提供理想解决方案的大部分好处。
3.  考虑像我为 DeferredLoadListBox 所做的那样实现“惰性”容器。基本思想是延迟渲染容器，直到它们出现在屏幕上。我在这里有更多信息和示例代码：http: [//blogs.msdn.com/b/delay/archive/2010/09/08/never-do-today-what-you-can-put-off-till-tomorrow -deferredloadlistbox-and-stackpanel-help-windows-phone-7-lists-scroll-smoothly-and-consistently.aspx](http://blogs.msdn.com/b/delay/archive/2010/09/08/never-do-today-what-you-can-put-off-till-tomorrow-deferredloadlistbox-and-stackpanel-help-windows-phone-7-lists-scroll-smoothly-and-consistently.aspx)

# iphone - Box2d 夹具和身体在视网膜显示器上不同步

> ID：11412404
> 
> 赞同：1
> 
> 时间：2012-07-10T11:30:55.967
> 
> 标签：iphone, objective-c, ipad, cocos2d-iphone, box2d

我正在尝试在 iPad、iPhone 和 iPhone 视网膜上制作 cocos2d/box2d 游戏。我的问题是，视网膜模拟器上的fixture和body不对齐，请点击下面的截图进行说明（作为stackoverflow的新成员，它不允许我在这里发布截图）。

[截屏](http://i198.photobucket.com/albums/aa223/hmauction/dontdelete/versions.png)

（请忽略不同的形状，我希望 4 个角对齐）在过去的几天里，我对此做了很多研究，我发现最接近的是：

[关联](https://stackoverflow.com/questions/8710268/box2d-custom-polygon-and-sprites-mis-matching)

但是 PTM_RATIO 和 CC_CONTENT_SCALE_FACTOR() 提供的解决方案在我的情况下似乎不起作用。我认为这与我没有将文件中的图像加载到我的精灵中这一事实有关。这个问题的大多数解决方案都是基于为视网膜显示器加载 -hd 图像文件，但我根本不想在我的游戏中使用文件。我基本上想在运行时自己绘制多边形，

我的代码如下所示：

```
-(CCSprite*)addSprite
{
    CGSize contextsize = CGSizeMake(200, 200); 
    UIGraphicsBeginImageContext(contextsize);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextFlush(context);
    CGContextSetAllowsAntialiasing(context, true);
    CGContextTranslateCTM(context, 0, contextsize.height);
    CGContextScaleCTM(context, 1.0, -1.0);
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGFloat components[] = {0.0, 0.0, 1.0, 1.0};
    CGColorRef color = CGColorCreate(colorspace, components);
    CGContextSetStrokeColorWithColor(context, color);

    UIBezierPath* aPath;

    aPath = [UIBezierPath bezierPathWithArcCenter:CGPointMake(100, 100)
                                           radius:100
                                       startAngle:0 
                                         endAngle:1.57 
                                        clockwise:YES];
    [aPath addArcWithCenter:CGPointMake(100, 100) 
                     radius:50
                 startAngle:1.57
                   endAngle:0
                  clockwise:NO];

    [aPath stroke];

    CGContextStrokePath(context);
    CGColorSpaceRelease(colorspace);
    CGColorRelease(color);

    UIImage *graphImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    CCTexture2D *tex = [[[CCTexture2D alloc] initWithImage:graphImage] autorelease];
    CCSprite *sprite = [CCSprite spriteWithTexture:tex];
    return sprite;
}

-(void) addFixture:(CCSprite *)fixsprite
{
    b2Vec2 arcdots[] = {
        b2Vec2(50.0f / PTM_RATIO, 0.0f / PTM_RATIO),
        b2Vec2(100.0f / PTM_RATIO, 0.0f / PTM_RATIO),
        b2Vec2(0.0f / PTM_RATIO, 100.0f / PTM_RATIO),
        b2Vec2(0.0f / PTM_RATIO, 50.0f / PTM_RATIO)
};

    b2PolygonShape p_shape;
    b2FixtureDef fixtureDef;

    b2BodyDef bodyDef;
    bodyDef.type = b2_kinematicBody;

    bodyDef.position.Set(100/PTM_RATIO, 100/PTM_RATIO);
    bodyDef.userData = fixsprite;
    b2Body *body = world->CreateBody(&bodyDef);

    p_shape.Set(arcdots, 4);
    fixtureDef.shape = &p_shape;    
    fixtureDef.density = 1.0f;
    fixtureDef.friction = 0.3f;
    body->CreateFixture(&fixtureDef);
} 
```

我从主例程中调用这些函数，如下所示：

```
CCSprite *sprite2 = [self addSprite];
sprite2.position = ccp(0, 0);
[self addChild:sprite2 z:0];        
[self addFixture:sprite2]; 
```

我在委托文件中未注释这些行：

```
if( ! [director enableRetinaDisplay:YES] )
    CCLOG(@"Retina Display Not supported"); 
```

如果需要更多信息，请告诉我。请温柔一点，我才刚刚开始学习这个。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:27:07.657

除非另有说明，cocos2d（以及大部分 UIKit）中的所有坐标都以点为单位，而不是像素。在 Retina 显示设备上，您的点分辨率仍为 480x320 点（960x640 像素）。

由此得出：当您以实际像素计算时，乘以或除以 CC_CONTENT_SCALE_FACTOR。如果您处理点坐标，则什么也不做。由于您正在渲染自己的多边形，我假设您知道是否使用实际的像素坐标。如果您直接使用 OpenGL，那么您将使用像素坐标。

如果您不使用 cocos2d 来呈现您的内容，我不确定启用 Retina 显示模式是否对您有任何帮助。

最后，一个常见的误解是 Box2D 世界使用点坐标并且必须转换为像素，反之亦然。也不是这样。Box2D 世界完全没有特定的坐标系。PTM_RATIO 的使用仅用于确保 Box2D 坐标在 Box2D 引擎的合理范围内，因为它最适用于尺寸/直径为 1 米的对象，并且大多数对象的直径范围应为 0.1 到 10 米。

# php - PHP中的Facebook图非常慢

> ID：11412406
> 
> 赞同：10
> 
> 时间：2012-07-10T11:31:01.523
> 
> 标签：php, facebook-graph-api, curl

无论是使用 Facebook PHP SDK，还是仅仅使用 curl 加载数据`$contents = file_get_contents("https://graph.facebook.com/$id?access_token=$accessToken")`，响应都需要大约一秒钟的时间。

当我需要检查一堆 id 的数据时，这算得很慢。

在浏览器中，如果我输入一个 facebook 图表 url，我几乎可以立即得到结果，不到 PHP 所用时间的十分之一。

是什么导致了这个问题，我怎样才能让它像在任何浏览器中一样快？我知道浏览器可以做到。也必须有一种方法可以在 PHP 中使其快速。

IDEA：也许我需要在 cURL 中配置一些东西？

我试过的：

*   使用 PHP SDK。一样慢。我首先尝试使用的原因`file_get_contents()`是因为我希望 PHP SDK 没有正确配置。
*   使用`setopt($ch, CURLOPT_SSL_VERIFYPEER, false);`. 这并没有什么不同。回答后接受编辑：实际上，这与重用 curl 句柄一起使后续请求非常快。

编辑：这是我用来测量执行请求所需时间的代码的 pastebin：http: [//pastebin.com/bEbuqq5g](http://pastebin.com/bEbuqq5g)。我将以前说微秒的文本更正为秒。这就是产生类似于我在这个问题的评论中所写的结果的结果：[Facebook 图表在 PHP 中非常慢](https://stackoverflow.com/questions/11412406/facebook-graph-extremely-slow-in-php#comment16127892_12073498)。另请注意，即使访问令牌已过期，它们也会花费类似的缓慢时间，就像在我的 pastebin 示例中一样。

编辑 2： ssl 应该有部分问题。我尝试对[http://graph.facebook.com/4](http://graph.facebook.com/4)（无 httpS）进行基准测试，结果三个请求需要 1.2 秒，而同样的，但使用 https 需要 2.2 秒。但这绝不是一个解决方案，因为对于任何需要访问令牌的请求，我必须使用 https。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T12:46:54.847

`file_get_contents`在 PHP 中可能会非常慢，因为它没有正确发送/处理标头，导致文件传输完成时 HTTP 连接没有正确关闭。我还阅读了有关 DNS 问题的信息，但我没有任何相关信息。

我强烈推荐的解决方案是使用 PHP SDK，它设计用于对 Facebook 进行 API 调用，或者使用[cURL](http://php.net/manual/en/book.curl.php)（SDK 使用）。使用 cURL，您可以真正配置请求的很多方面，因为它基本上是为进行这样的 API 调用而设计的。

PHP SDK 信息：[https ://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)

PHP SDK 源码：[https ://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)

如果您选择不使用 SDK，您可以查看他们如何在[base_facebook.php](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php)中使用 cURL 。下面是一些示例代码，您可以使用 cURL 来获取：

```
function get_url($url)
{
   $ch = curl_init();
   curl_setopt($ch, CURLOPT_URL, $url); 
   curl_setopt($ch, CURLOPT_HEADER, FALSE);  // Return contents only
   curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);  // return results instead of outputting
   curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10) // Give up after connecting for 10 seconds 
   curl_setopt($ch, CURLOPT_TIMEOUT, 60);  // Only execute 60s at most
   curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);  // Don't verify SSL cert
   $response = curl_exec($ch);
   curl_close($ch);
   return $response;
}

$contents = get_url("https://graph.facebook.com/$id?access_token=$accessToken"); 
```

该函数将在失败时返回 FALSE。

我看到你说你使用了 PHP SDK，但也许你没有设置 cURL。尝试[安装或更新](http://www.php.net/manual/en/curl.setup.php)它，如果它仍然看起来很慢，你应该使用

```
curl_setopt($ch, CURLOPT_HEADER, TRUE);
curl_setopt($ch, CURLOPT_VERBOSE, TRUE); 
```

并检查输出。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T10:20:48.733

我想知道如果我在`curl_exec()`没有执行 a 的情况下执行两个后续调用会发生什么`curl_close()`，从而启用 HTTP Keep-Alive。

测试代码：

```
$ch = curl_init('https://graph.facebook.com/xxx');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

// FIRST REQUEST
curl_exec($ch);
print_r(curl_getinfo($ch));

// SECOND REQUEST
curl_exec($ch);
print_r(curl_getinfo($ch));

curl_close($ch); 
```

下面是结果，显示了来自的部分输出[`curl_getinfo()`](http://php.net/manual/en/function.curl-getinfo.php)：

```
// FIRST REQUEST
[total_time] => 0.976259
[namelookup_time] => 0.008271
[connect_time] => 0.208543
[pretransfer_time] => 0.715296

// SECOND REQUEST
[total_time] => 0.253083
[namelookup_time] => 3.7E-5
[connect_time] => 3.7E-5
[pretransfer_time] => 3.9E-5 
```

第一个请求很慢，几乎一秒钟，与您的经验相似。但是从第二次请求的时间（仅 0.25 秒）您可以看到 keep-alive 产生了多大的差异。

当然，您的浏览器也使用这种技术，在浏览器的新实例中加载页面将花费相当长的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T16:03:03.850

只是两个想法：

1.  您是否已验证浏览器与 facebook 没有持久连接？浏览器没有缓存 DNS 查找（您可以尝试将 graph.facebook.net 添加到您的主机文件以排除 DNS）

2.  您当然是从与浏览器相同的系统/环境中运行 php 代码（不是来自 vm，而不是来自另一台主机？另外，该 php 运行的调度优先级与您的浏览器相同？（相同的好级别等））

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T15:45:24.887

使 Graph API 调用“慢”的最大因素是——HTTP 连接。

通过调整一些参数或获得具有更好连接的服务器，可能会有*一些改进。*

但这很可能不会产生*太大*的影响，因为 HTTP 通常被认为是“慢”的，对此几乎没有什么可以做的。

> 当我需要检查一堆 id 的数据时，这算得很慢。

当然，要加快速度，最好的办法就是**减少 HTTP 请求的数量。**

如果您必须连续执行多个 Graph API 调用，请尝试将它们作为[批处理请求](https://developers.facebook.com/docs/reference/api/batch/)来执行。这允许您查询数据的多个部分，同时只发出*一个*HTTP 请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T08:46:50.723

这纯粹是一种猜测，但原因可能是 Facebook 使用了 SPDY 协议（不确定 API 是否属实）。PHP 无法使用 SPDY 协议加载页面。

# python - 输入数据未定义

> ID：11412409
> 
> 赞同：1
> 
> 时间：2012-07-10T11:31:05.567
> 
> 标签：python, input

我正在编写一些代码，需要用户输入一个文件以在程序中使用：

```
file=input('input file name') 
```

但是，每当您输入文件名（或其他任何内容）时，都会弹出一个错误，说明刚刚输入的任何内容都没有定义并结束程序。是什么导致这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:36:48.147

如果您使用的是 Python 2.x - 您想要使用`raw_input`-`input`用于 2.x 中完全不同的东西。如果您使用的是 Python 3.x -`input`是正确的。

附带说明一下，推荐的样式指南是`open`用于打开文件的，所以你在`file`这里遮蔽并不算太糟糕，但是任何希望能够使用`file`（基本上与`open`）作为函数的人可能会在以后感到震惊。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:37:05.827

这个很重要：

```
input([prompt]) -> value
Equivalent to eval(raw_input(prompt)). 
```

输入将尝试`eval`您的输入

检查这个

```
In [38]: l =  input("enter filename: ")
enter filename: dummy_file
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
C:\Python27\<ipython-input-37-b74d50e2a058> in <module>()
----> 1 l =  input("enter filename: ")

C:\Python27\<string> in <module>()

NameError: name 'dummy_file' is not defined

In [39]: input /?
Type:       builtin_function_or_method
Base Class: <type 'builtin_function_or_method'>
String Form:<built-in function input>
Namespace:  Python builtin
Docstring:
input([prompt]) -> value

Equivalent to eval(raw_input(prompt)).

In [40]: file = raw_input("filename: ")
filename: dummy_file

In [41]: file
Out[41]: 'dummy_file' 
```

使用`raw_input`有它的缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:36:30.330

您需要使用 raw_input 而不是输入。

输入文档：

> 输入（[提示]）-> 值
> 
> 等效于 eval(raw_input(prompt))。

python 解释器尝试评估您的输入，如果它是文件名，它将失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:36:40.830

`input`评估它的论点，所以当你给它类似的东西时，`my_text_file`它会尝试把它当作一个变量。改为使用`raw_input`。

（另外，`file`用作变量名是个坏主意，因为它也是 Python 内置类的名称。更喜欢类似`path`, `filename`, `f`.)

# javascript - 使用 ng-include 时失去作用域

> ID：11412410
> 
> 赞同：181
> 
> 时间：2012-07-10T11:31:06.283
> 
> 标签：javascript, html, angularjs, angularjs-scope, angularjs-ng-include

我有这个模块路线：

```
var mainModule = angular.module('lpConnect', []).
    config(['$routeProvider', function ($routeProvider) {
    $routeProvider.
        when('/home', {template:'views/home.html', controller:HomeCtrl}).
        when('/admin', {template:'views/admin.html', controller:AdminCtrl}).
        otherwise({redirectTo:'/connect'});
}]); 
```

主页 HTML：

```
<div ng-include src="views.partial1"></div> 
```

`partial1`HTML：

```
<form ng-submit="addLine()">
    <input type="text" ng-model="lineText" size="30" placeholder="Type your message here">
</form> 
```

`HomeCtrl`：

```
function HomeCtrl($scope, $location, $window, $http, Common) {
    ...
    $scope.views = {
        partial1:"views/partial1.html"
    };

    $scope.addLine = function () {
        $scope.chat.addLine($scope.lineText);
        $scope.lines.push({text:$scope.lineText});
        $scope.lineText = "";
    };
...
} 
```

在`addLine`函数`$scope.lineText`is 中`undefined`，这可以通过添加`ng-controller="HomeCtrl"`to来解决`partial1.html`，但是它会导致控制器被调用两次。我在这里想念什么？

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-01-03T20:02:56.813

正如@Renan 提到的， ng-include 创建了一个新的子范围。这个范围原型继承自 HomeCtrl 范围（见下面的虚线）。 `ng-model="lineText"`实际上在子作用域上创建了一个原始作用域属性，而不是 HomeCtrl 的作用域。父/HomeCtrl 范围无法访问此子范围：

![ng-包含范围](../Images/4ad8ac35a78eca6dccfe359a91dc8f55.png)

要将用户键入的内容存储到 HomeCtrl 的 $scope.lines 数组中，我建议您将值传递给 addLine 函数：

```
 <form ng-submit="addLine(lineText)"> 
```

此外，由于 lineText 归 ngInclude 范围/部分所有，我觉得它应该负责清除它：

```
 <form ng-submit="addLine(lineText); lineText=''"> 
```

函数 addLine() 将因此变为：

```
$scope.addLine = function(lineText) {
    $scope.chat.addLine(lineText);
    $scope.lines.push({
        text: lineText
    });
}; 
```

[小提琴](http://jsfiddle.net/mrajcok/9krVn/)。

备择方案：

*   在 HomeCtrl 的 $scope 上定义一个对象属性，并在部分中使用它`ng-model="someObj.lineText`：[小提琴](http://jsfiddle.net/mrajcok/9krVn/4/)
*   不推荐，这更像是一种技巧：在部分中使用 $parent 来创建/访问`lineText`HomeCtrl $scope: 上的属性  `ng-model="$parent.lineText"`；[小提琴](http://jsfiddle.net/mrajcok/9krVn/3/)

解释为什么上述两种替代方案起作用有点复杂，但在这里完全解释了：[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs)

我不建议`this`在 addLine() 函数中使用。正在访问/操作哪个范围变得不太清楚。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2012-07-10T15:49:01.773

这是因为`ng-include`它创建了一个新的子范围，所以`$scope.lineText`没有改变。我认为是`this`指当前的范围，所以`this.lineText`应该设置。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-12-05T05:55:10.687

不要`this`像公认的答案所建议的那样使用，`$parent`而是使用。所以在你的`partial1.html`你将拥有：

```
<form ng-submit="$parent.addLine()">
    <input type="text" ng-model="$parent.lineText" size="30" placeholder="Type your message here">
</form> 
```

如果您想了解有关范围`ng-include`或其他指令的更多信息，请查看：[https ://github.com/angular/angular.js/wiki/Understanding-Scopes#ng-include](https://github.com/angular/angular.js/wiki/Understanding-Scopes#ng-include)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-04T13:39:28.647

我已经想出了如何在不混合父范围数据和子范围数据的情况下解决这个问题。`ng-if`在元素上设置 a`ng-include`并将其设置为范围变量。例如 ：

```
<div ng-include="{{ template }}" ng-if="show"/> 
```

在您的控制器中，当您在子范围中设置了所需的所有数据后，将 show 设置为`true`. 此时`ng-include`将复制您范围中的数据集并将其设置在您的子范围中。

经验法则是在范围更深的范围内减少范围数据，否则您会遇到这种情况。

最大限度

# lotus-notes - Lotus Domino Designer 8.5 Web 预览端口号

> ID：11412412
> 
> 赞同：0
> 
> 时间：2012-07-10T11:31:21.960
> 
> 标签：lotus-notes, lotus-domino

是否可以在 Designer 8.5 中更改端口号和主机？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T15:57:58.560

在 Domino Designer 8.5.3 之前，答案是否定的。

在 8.5.3 中，IBM 在 Preferences 对话框的 Domino Designer 窗格中实现了一项设置。

请参阅[此处](http://www.xpagedeveloper.com/2011/domino-web-preview)了解更多信息。

# javascript - javascript ajax，表单提交然后页面加载

> ID：11412414
> 
> 赞同：0
> 
> 时间：2012-07-10T11:31:27.610
> 
> 标签：javascript, ajax, forms

我正在尝试使用 javascript 验证表单。一旦执行下面的代码，我想从外部脚本中获取 php，以便在没有页面加载的情况下运行并显示成功消息，有人可以帮忙吗？

下面的脚本工作正常，并从单独的函数中提取 notEmpty。然后我需要脚本： 1\. 如果没有产生错误，则从列出的每个值中提取 php 并传输数据。2.显示成功信息

```
var year = document.getElementById('year');
var period = document.getElementById('period');
var live = document.getElementById('live');
var start = document.getElementById('start');
var todate = document.getElementById('todate');
var sdeadline = document.getElementById('sdeadline');
var cdeadline = document.getElementById('cdeadline');
var circ = document.getElementById('circ');
var line = document.getElementById('line');

// Check each input in the order that it appears in the form!
if(notEmpty(year, "Please fill in Year")){
if(notEmpty(period, "Please fill in Period")){
if(notEmpty(live, "Please fill in live Date")){
if(notEmpty(start, "Please fill in Start Date")){
if(notEmpty(todate, "Please fill in End Date")){
if(notEmpty(sdeadline, "Please fill in Supplier Deadline")){
if(notEmpty(cdeadline, "Please fill in Commerical Deadline")){
if(notEmpty(circ, "Please fill in Circulars Due")){
if(notEmpty(line, "Please fill in Line Listing Downloads")){

}}}}}}}}}

return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:48:32.137

想法是创建一个字符串，其中包含要传输到 php 脚本的数据：

```
var datasend = 'year='+year+'&period='+period+'&live='+live+ ...; 
```

然后，如果没有错误，则调用 Ajax 函数，通过 Post 将字符串发送到服务器。

请参阅有关以下内容的教程：[AJAX with POST and PHP](http://www.coursesweb.net/ajax/ajax-post-php)

# asp.net-mvc-4 - 如何在 MVC Web Api RC 中隐藏基于自定义逻辑的模型类字段

> ID：11412415
> 
> 赞同：3
> 
> 时间：2012-07-10T11:31:29.133
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在使用 Asp.Net Mvc Web api RC。

我想使用自定义属性隐藏模型类的字段/属性。下面是我的课：

```
public class Employee
{              
     public int EmpId { get; set; }       
     public string Name{ get; set; }

     //Wanted to hide this attribute based on custom logic. Like for a certain role, i want to hide the designation
     public string Designation{ get; set; }

     public string Department{ get; set; }
} 
```

我们如何使用数据注释来实现。我的意思是我想创建一个单独的属性以这种方式使用：

```
[HideForRoles(Roles="Admin,Writer")]
public string Designation{ get; set; } 
```

**更新 ：**

因为我正在开发 web api。响应被序列化为 XML 或 Json 格式，具体取决于格式化程序。所以更好的问题是如何在写入响应时不允许字段被序列化。

但是，一种选择可能是使用 IgnoreDataMember 属性。喜欢

```
[IgnoreDataMember]
public string Designation{ get; set; } 
```

但以上是一个编译时声明，我不能强加任何条件。

问题：如何在运行时根据某些条件进行序列化时忽略字段/属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:55:24.943

完全错过了您使用 Web Api 的第一轮，我很抱歉。

您要做的是创建自定义格式化程序。

这里有一篇关于 MVC 和 Web Api 之间的流程/差异的好文章（我知道你已经理解了，这里仍然有一些有效的观点）： http: [//lostechies.com/jimmybogard/2012/04/10/asp -net-web-api-mvc-viewmodels-and-formatters/](http://lostechies.com/jimmybogard/2012/04/10/asp-net-web-api-mvc-viewmodels-and-formatters/)

这是自定义格式化程序的示例实现： [http ://www.tugberkugurlu.com/archive/creating-custom-csvmediatypeformatter-in-asp-net-web-api-for-comma-separated-values-csv-format](http://www.tugberkugurlu.com/archive/creating-custom-csvmediatypeformatter-in-asp-net-web-api-for-comma-separated-values-csv-format)

在此基础上，您将使用反射来读取属性，在您必须编写的自定义 ActionFilterAttribute 基础上构建，您可以在其中评估用户的角色并确定应该省略/包含哪些字段。这是一个动作过滤器的示例： [https ://github.com/MisterJames/MovieFu/blob/master/MovieFu/ActionFilters/UserNameFilter.cs](https://github.com/MisterJames/MovieFu/blob/master/MovieFu/ActionFilters/UserNameFilter.cs)

希望这有助于更多。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T09:39:30.733

你最好的选择是返回一个`dynamic`对象。在这种情况下，您可以说：

```
 dynamic viewModel = new ExpandoObject();
        viewModel.Id = 12;
        if(role == "Admin")
        {
            viewModel.SecureStuff = "Others should not see it";
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T07:39:06.077

我已经在模型存储库中完成了授权检查。相当理想的方法是创建自定义格式化程序以根据某些条件隐藏某些字段。

从 db 获取员工列表并将它们放入列表后，我再次迭代并将 NULL 放置到我不想显示的字段中。我写的代码如下：

```
foreach (var employee in listEmployees)
{
     //get all props. of Employees object using reflection
     var props = employee .GetType().GetProperties();

     //loop through each field to match with the field name to remove/place null
     foreach (var propertyInfo in props)
     {
          var fieldName = propertyInfo.Name;
          if (fieldsNamesToRemove .Contains(fieldName))
          {
                    propertyInfo.SetValue(employee , null, null);
          }
     }
 } 
```

这里的 fieldsNamesToRemove 是我根据当前用户的角色动态创建的列表。

这个解决方案实际上为我们不想显示的字段放置了一个 NULL。因此，在 JSON 格式中，字段不显示，但在 XML 中，字段以类似 lt; 的语法显示。指定 i:nil="true"/ gt;，但可以管理，因为我们主要需要处理 json 响应。

感谢 Ali 和 MisterJames 提出的宝贵建议

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T16:52:20.633

它不会那么简单，因为您需要有条件地在视图中呈现字段。但是你可以通过属性获得大部分的方式。

您需要让您的自定义属性元数据知道，然后检查您的视图中的属性。此处发布了一个解决方案：[Can't get Custom Attribute Value in MVC3 HTML Helper](https://stackoverflow.com/questions/7930574/cant-get-custom-attribute-value-in-mvc3-html-helper)。

干杯。

# php - Highchart 仅显示 12 个类别

> ID：11412417
> 
> 赞同：0
> 
> 时间：2012-07-10T11:31:40.053
> 
> 标签：php, jquery, graph

大家好，我在使用 Highchart 时遇到了麻烦。我认为我的错误是类别超过 12。这是我的代码：

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25
        },
        title: {
            text: 'Monthly Average Temperature',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: WorldClimate.com',
            x: -20
        },
        xAxis: {
            categories: ['ARC', 'CLM', 'COLREP', 'CUI', 'FB', 'IOH', 'IST', 'LCV', 'LCWSLC', 'LOGDFR', 'LOGDRT', 'LOGGLE', 
                        'LOGGT', 'LOGSR', 'LOGVL', 'LST', 'OARD', 'OARP', 'OARPPP', 'POR', 'PRIN', 'SLRD', 'SLRS', 'SLRSUP', 'SVTCBR', 
                        'SVTSP', 'SVTST', 'TKD', 'TR', 'USO']
        },
        yAxis: {
            title: {
                text: 'Temperature (°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    this.x +': '+ this.y +'°C';
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'Tokyo',
            data: [400.6, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
        }, {
            name: 'New York',
            data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
        }, {
            name: 'Berlin',
            data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
        }, {
            name: 'London',
            data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 100.9]
        }]
    });
}); 
```

});​</p>

我已经尝试将类别放入数组变量中，但结果显示相同。

x 轴仅显示 12 个类别。该网站上的示例适用于 12 个类别。有谁知道如何解决这个问题或在插件中配置任何东西？

这里有演示页面[http://www.highcharts.com/demo/line-basic](http://www.highcharts.com/demo/line-basic)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:36:02.320

问题是每个数组中只有 12 个值的系列，所以如果只有 12 个值，它将选择前 12 个类别。

高图表不会使用 Series 显示没有与它们相关的数据的类别，只需在 Series Array 中放置 18 个下一个 0 值，它将显示这些类别。

# fonts - 如何在 ckeditor 中添加 Kruti Dev 010 字体？

> ID：11412423
> 
> 赞同：0
> 
> 时间：2012-07-10T11:31:56.470
> 
> 标签：fonts, ckeditor, hindi

嗨，我需要将 Kruti Dev 010 字体添加到我的 CKEditor。我已经下载了字体并将其字体添加到我的 ckeditor 的 content.css 文件中。在 ckeditor.config.js 文件中，我添加了这一行：

```
 config.font_names = 'Kruti Dev 010/"Kruti_Dev_010";' + config.font_names; 
```

它工作正常（我可以添加印地语字体）。但是当我将此文本复制到 word 文件时出现问题，然后出现英文字体而不是 Krutidev 字体，因为 word 需要字体系列，例如：

```
<span style="font-family:&quot;Kruti Dev 010&quot;"> 
```

我的字体系列是“kruti_dev_010”。

所以我尝试将 ckeditor.config.js 中的字体名称更改为：

```
config.font_names = 'Kruti Dev 010/"Kruti Dev 010";' + config.font_names; 
```

但它不起作用，我认为字体名称中带有空格的数字字符会导致问题。DevLys 010 字体也有同样的问题。

任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:19:51.533

您可以在 CkEditor 实例外部添加另一个 div 和按钮。当您单击该按钮时，它将获取编辑器内容，将“Kruti_Dev_010”替换为“Kruti Dev 010”并将更新的内容放入 div。然后将 div 的内容复制到 word doc 中。

```
$("#button").click(function() {
    var editorContent = CKEDITOR.instances['TextAreaID'].getData();
    editorContent.replace('Kruti_Dev_010', 'Kruti Dev 010');
    $('#divForWord').html(editorContent);
}); 
```

如果您希望 HTML 标签显示在 div 中而不是呈现，请使用`.text`而不是`.html`，如下所示：

```
$('#divForWord').text(editorContent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T11:08:56.900

您可以在 CkEditor 实例外部添加另一个 div 和按钮。当您单击该按钮时，它将获取编辑器内容，将“Kruti_Dev_010”替换为“Kruti Dev 010”并将更新的内容放入 div。然后将 div 的内容复制到 word doc 中。

```
    $("#button").click(function() {
    var editorContent = CKEDITOR.instances['TextAreaID'].getData();
    editorContent.replace('Kruti_Dev_010', 'Kruti Dev 010');
    $('#divForWord').html(editorContent);
});

```

# c - 使用 struct 和 typedef 的编译器错误

> ID：11412425
> 
> 赞同：1
> 
> 时间：2012-07-10T11:32:00.413
> 
> 标签：c, compiler-errors

我的 VS 项目中有以下文件：

```
// list.h

#include "node.h"

typedef struct list list_t;

void push_back(list_t* list_ptr, void* item); 
```

```
// node.h

typedef struct node node_t; 
```

```
// node.c

#include "node.h"

struct node
{
   node_t* next;
}; 
```

```
// list.c

#include "list.h"

struct list
{
    node_t* head;
};

void push_back(list_t* list_ptr, void* item)
{
   if(!list_ptr)
       return;

   node_t* node_ptr; // Here I have two compiler errors
} 
```

我有编译器错误：[Compiler Error C2275](http://msdn.microsoft.com/en-us/library/76c9k4ah%28v=vs.110%29)和[Compiler Error C2065](http://msdn.microsoft.com/en-us/library/ewcf0002%28v=vs.110%29)。

为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:31:41.867

这是预处理器处理行后 list.h 的样子`#include`（排除一些注释）：

```
// list.h 

typedef struct node node_t;

typedef struct list list_t; 

void push_back(list_t* list_ptr, void* item); 
```

当您在 list.c 中使用此标头时，编译器会出现问题，`struct node`因为它未在此上下文中定义。它仅在 node.c 中定义，但编译器无法从 list.c 中看到该定义。

由于您只使用指向 的指针`node_t`，请尝试将 node.h 更改为如下所示：

```
// node.h     

struct node;
typedef struct node node_t; 
```

现在，您已经预先声明了一个名为`struct node`. 编译器处理`typedef`s 和创建指针的信息已经足够了，但是由于它尚未完全定义，因此您不能声明类型对象`struct node`或取消引用`struct node`指针。

# c# - 当我 invalidate()/Update() TableLayoutPanel 控件时，TableLayoutPanel_CellPaint() 事件未触发

> ID：11412436
> 
> 赞同：1
> 
> 时间：2012-07-10T11:32:40.403
> 
> 标签：c#, winforms, windows-applications

谁能给出解决方案：当我/控制`TableLayoutPanel_CellPaint()`时事件没有触发。`Invalidate()``Update()` `TableLayoutPanel`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:15:16.697

不要尝试处理 OnCellPaintevent，而是尝试覆盖 TableLayoutPanel 类的 OnPaint 和/或 OnCellPaint 方法：

```
 protected override void OnCellPaint(PaintEventArgs e)
    {
        base.OnCellPaint(e);

        // Your Code Here after the call to the base class.
    } 
```

另外，尝试使用 Invalidate(true)。Boolean 参数指示控件是否应使其所有子控件无效。

# regex - 无法理解多行正则表达式 qr/( . $ .+ )/xms 的结果

> ID：11412439
> 
> 赞同：12
> 
> 时间：2012-07-10T11:32:45.133
> 
> 标签：regex, perl

对于字符串“aa\nbb\ncc”，我想从最后一个字母到第一个换行符（“a”）匹配到多行字符串的末尾，并期望

`"aa\nbb\ncc" =~ qr/( . $ .+ )/xms`火柴`a\nbb\ncc`

然后

`"aa\nbb\ncc\n" =~ qr/( . $ .+ )/xms`匹配 `a\nbb\ncc\n`。

但是我没有匹配`"aa\nbb\ncc" =~ qr/( . $ .+ )/xms` 和`c\n`匹配`"aa\nbb\ncc" =~ qr/( . $ .+ )/xms`。

使用`qr/( . $ ..+ )/xms`我得到了预期的结果（参见示例代码）。

Perl 版本 5.14.2。

谁能解释这种行为？

perldoc perlre:

```
 m   Treat string as multiple lines.  That is, change "^" and "$" 
       from matching the start or end of the string to matching the start 
       or end of any line anywhere within the string.

   s   Treat string as single line. That is, change "." to match any character 
       whatsoever, even a newline, which normally it would not match.

       Used together, as "/ms", they let the "." match any character whatsoever, 
       while still allowing "^" and "$" to match, respectively, just after and 
       just before ewlines within the string.

   \z  Match only at end of string 
```

运行以下示例代码：

```
#!/usr/bin/env perl

use strict;
use warnings;

print "Multiline string : ", '"aa\nbb\ncc"', "\n\n";
my $str = "aa\nbb\ncc";

print_match($str, qr/( . $ )/xms);       # matches "a"
print_match($str, qr/( . $ . )/xms);     # matches "a\n"
print_match($str, qr/( . $ .. )/xms);    # matches "a\nb"
print_match($str, qr/( . $ ..+ )/xms);   # matches "a\nbb\ncc"
print_match($str, qr/( . $ .+ )/xms);    # NO MATCH ! Why ???
print_match($str, qr/( . $ .+ \z )/xms); # NO MATCH ! Why ???

print "\nMultiline string now with terminating newline : ", '"aa\nbb\ncc\n"', "\n\n";
$str = "aa\nbb\ncc\n";

print_match($str, qr/( . $ )/xms);       # matches "a"
print_match($str, qr/( . $ . )/xms);     # matches "a\n"
print_match($str, qr/( . $ .. )/xms);    # matches "a\nb"
print_match($str, qr/( . $ ..+ )/xms);   # matches "a\nbb\ncc\n"
print_match($str, qr/( . $ .+ )/xms);    # MATCHES "c\n" ! Why ???
print_match($str, qr/( . $ .+ \z)/xms);  # MATCHES "c\n" ! Why ???

sub print_match {
    my ($str, $regex) = @_;
    $str =~ $regex;
    if ( $1 ) {
        printf "--> %-20s matched : >%s< \n", $regex, $1;
    }
    else {
        printf "--> %-20s : no match !\n", $regex;
    }
} 
```

输出是：

```
Multiline string : "aa\nbb\ncc"

--> (?^msx:( . $ ))      matched : >a<
--> (?^msx:( . $ . ))    matched : >a
<
--> (?^msx:( . $ .. ))   matched : >a
b<
--> (?^msx:( . $ ..+ ))  matched : >a
bb
cc<
--> (?^msx:( . $ .+ ))   : no match !

Multiline string now with terminating newline : "aa\nbb\ncc\n"

--> (?^msx:( . $ ))      matched : >a<
--> (?^msx:( . $ . ))    matched : >a
<
--> (?^msx:( . $ .. ))   matched : >a
b<
--> (?^msx:( . $ ..+ ))  matched : >a
bb
cc
<
--> (?^msx:( . $ .+ ))   matched : >c
< 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T15:34:23.947

这是一个错误。请也通过运行`perlbug`命令行报告它。

```
$ perl -E'say "aa\nbb\ncc" =~ qr/( . $ .+ )/xms ? ">$1<" : 0'
0

$ perl -E'say "aa\nbb\ncc\n" =~ qr/( . $ .+ )/xms ? ">$1<" : 0'
>c
<

$ perl -v
...
This is perl 5, version 16, subversion 0 (v5.16.0) built for x86_64-linux
... 
```

就像你说的，它们应该分别匹配`"a\nbb\ncc"`和`"a\nbb\ncc\n"`。有与 相关的优化`$`。其中之一似乎没有考虑`/ms`到。

* * *

PS——你可能对`use re 'debug';`.

```
$ perl -Mre=debug -E'say "aa\nbb\ncc" =~ qr/( . $ .+ )/xms ? ">$1<" : 0'
Compiling REx "( . $ .+ )"
Final program:
   1: OPEN1 (3)
   3:   SANY (4)
   4:   MEOL (5)
   5:   PLUS (7)
   6:     SANY (0)
   7: CLOSE1 (9)
   9: END (0)
anchored ""$ at 2 minlen 2 
Matching REx "( . $ .+ )" against "aa%nbb%ncc"
   0 <> <aa%nbb%ncc>         |  1:OPEN1(3)
   0 <> <aa%nbb%ncc>         |  3:SANY(4)
   1 <a> <a%nbb%ncc>         |  4:MEOL(5)
                                  failed...
   3 <aa%n> <bb%ncc>         |  1:OPEN1(3)
   3 <aa%n> <bb%ncc>         |  3:SANY(4)
   4 <aa%nb> <b%ncc>         |  4:MEOL(5)
                                  failed...
   6 <aa%nbb%n> <cc>         |  1:OPEN1(3)
   6 <aa%nbb%n> <cc>         |  3:SANY(4)
   7 <aa%nbb%nc> <c>         |  4:MEOL(5)
                                  failed...
Match failed
0
Freeing REx: "( . $ .+ )" 
```

# php - php 图像处理（将 jpeg 转换为 png 或 gif 或 wbmp）

> ID：11412441
> 
> 赞同：0
> 
> 时间：2012-07-10T11:32:46.150
> 
> 标签：php, image-processing

情况是这样的：服务器返回给我一张 jpeg 格式的图片。现在我必须对图像进行一些处理（比如在上面写标题，..）。由于**我的服务器不支持 jpeg**，我想将其转换为我的服务器支持的格式（png、gif 和 wbmp）。如何在不使用的情况下将服务器返回的图像转换为 png/gif/wbmp 格式`imagecreatefromjpeg`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:35:35.487

试试想象[http://imagine.readthedocs.org/en/latest/index.html](http://imagine.readthedocs.org/en/latest/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:39:38.757

您的服务器以何种方式不支持 jpeg？你是说这个`imagecreatefromjpeg()`函数在你的 PHP 中不可用吗？

假设是这种情况，那么这并不意味着您的服务器“不支持 jpeg”；这意味着您的 PHP 副本没有安装 GD 库。这将影响所有 PHP 的图形处理功能，而不仅仅是 JPEG 的。

如果您有能力安装 PHP 扩展，或者要求您的服务器管理员安装它们，那么安装 GD 库将是迄今为止解决此问题的最简单的方法。

如果您没有这种能力，您仍然需要在您的服务器上安装*一些东西*才能读取和处理图像（任何类型，而不仅仅是 jpeg）。

一个常用的工具是[ImageMagick](http://www.imagemagick.org/)。这是一个独立的工具，因此您可以安装它并从命令行调用它（即使用 PHP 的`exec`命令等）。还有一个[PHP 扩展来控制它](http://php.net/manual/en/book.imagick.php)，但是如果它还没有安装的话，它显然会和 GD 库有同样的问题。

但最终，无论您做什么，都将涉及在您的服务器上安装一些东西。

# c# - 内部连接中 GroupBy 的 Nhibernate QueryOver 表示

> ID：11412443
> 
> 赞同：1
> 
> 时间：2012-07-10T11:32:58.660
> 
> 标签：c#, nhibernate, fluent-nhibernate, queryover

所以我是来自 EF 的 Nhibernate 新手。在尝试了 Query<> 并因缺乏受支持的函数和无意义的 sql 而感到不知所措后，我正在尝试 QueryOver 但还没有走远。有人可以帮我用这个 SQL 的 QueryOver 表示吗？

```
select p2.* from
   PurchaseOrders p2 inner join 
   (SELECT po.PurchaseOrderID, MAX(POS.StatusDate) as LastUpdate FROM PurchaseOrders Po 
   inner join PurchaseOrderStatuses POS on PO.PurchaseOrderID = pos.PurchaseOrderID 
   where pos.StatusID = :@status and po.SupplierID = :@supplierId
   group by po.PurchaseOrderID) p1
   on p2.PurchaseOrderID = p1.PurchaseOrderID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:06:44.853

当前的解决方案看起来像这样，但需要进一步的工作：

```
 int supplierId = 20;
         Status.StatusesEnum status = Status.StatusesEnum.Complete;

         PurchaseOrder orderAlias = null;

         IList<PurchaseOrder> orders =
                 Session.QueryOver<PurchaseOrder>(() => orderAlias).WithSubquery
                   .WhereExists(QueryOver.Of<PurchaseOrderStatus>()
                      .Where(c => c.PurchaseOrder.Id == orderAlias.Id)
                      .OrderBy(c=>c.StatusDate)
                      .Desc
                      .Select(c=>c.Status.Id == (int)status)
                      .Take(1)
                      //.Having status = statusID
                      )
                   .Where(o=>o.Supplier.Id == supplierId)
                   .List<PurchaseOrder>(); 
```

# python - 如何使用 python webdriver 将网页中的滑块拖动到特定位置

> ID：11412446
> 
> 赞同：1
> 
> 时间：2012-07-10T11:33:06.250
> 
> 标签：python, webdriver

我在网页中有一个滑块，它的默认位置是 0 ，比如说我必须将它移动到位置 5.How 将它移动到这个位置。目前我正在使用该方法：

```
move_by_offset(x-offset,y-offset) 
```

但无法知道如何给出随机行为的值..

# jquery - jQuery css 选择器怪癖

> ID：11412456
> 
> 赞同：1
> 
> 时间：2012-07-10T11:33:43.227
> 
> 标签：jquery

**背景：**

我有一个 CMS 工具，允许用户在内容区域内创建一个表格。如果使用边框选项，该工具会在表格上设置边框属性，并且不使用样式。我的重置样式表默认所有表格都没有边框，这会覆盖表格边框属性（即不显示边框）。

作为一个快速破解，我放入了一些 jQuery 来抓取具有非 0 边框属性的表格元素，并将边框属性转换为内联样式。

**我的问题：**

虽然我能够让代码正常工作，但这并不是我最初想要的解决方案。

这目前正在工作：

```
 $("table[border!='0']").css('border', function() { 
         return $(this).attr('border') + "px solid"; 
    }); 
```

我最初的解决方案是不需要 css 方法中的函数 -

```
$("table[border!='0']").css('border', $(this).attr('border') + "px solid"); 
```

我在写这个问题时意识到 $(this) 并没有引用选择中的每个项目，就像它在函数内部所做的那样，因此是我的问题。

[jsFiddle](http://jsfiddle.net/eMan5/3/)

没有这个功能有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:35:37.710

不，使用该功能是唯一（也是最好的）方法，否则您无法单独访问每个项目。

请注意，您的代码包含一个错误：`$(this).attr['border']`应该是`$(this).attr('border')`- 否则您总是会得到`undefinedpx solid`这没有多大意义。

但是，只要您没有大量不同的值，`border`就可以使用 CSS：

```
table[border=1] { border: 1px solid; }
table[border=2] { border: 2px solid; } 
```

显然，这对于许多不同的值来说会很混乱，但很有可能你没有很多不同的边框宽度。

# jquery - 为什么 jQuery 不将正确的值传递给 HTML？

> ID：11412458
> 
> 赞同：1
> 
> 时间：2012-07-10T11:33:44.783
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

在我的代码中，它就像 count 和 countin 变量的 for 循环 .. 在最后一个循环中，一切都很好，它返回正确的值，但它不能返回过去的值。

问题是什么 ？

这是我的代码：

```
@{
    int count = 1;
    int countin = 110;
    }

@foreach (var item in Model) {

<script>
    obj = {};
    obj[@count] = Math.round(@Html.DisplayFor(modelItem => item.ProgressPercent) * 268 / 100);

    var objin = {};
    objin[@count] = "-" + obj[@count] + "px 0";

    var jq3 = jQuery.noConflict();
    jq3(document).ready(function () {

        jq3("#bar-pro-@count").css({ "background-position": objin[@count] });

        if (obj[@count] == 100) {
            jq3("#bar-pro-@count").css({ "background-image": "none" });
            jq3("#bar-pro-@countin").css({ "background-image": "none" });
        };

    });
</script>

<div class="bar-t"><b>@Html.DisplayFor(modelItem => item.Name) | در مرحله : @Html.DisplayFor(modelItem => item.Phase)</b></div>
<div class="bar-100">
<div class="bar" id="bar-pro-@countin">
</div>
<div class="bar-pro" id="bar-pro-@count"></div>
<div class="bar-num"><script> document.write(@Html.DisplayFor(modelItem => item.ProgressPercent) + "%");</script></div>
</div>
    count = count + 1;
    countin = countin + 10;
} 
```

并在 HTML 中呈现后：

```
<script>
    obj = {};
    obj[1] = Math.round(12 * 268 / 100);    
    var objin = {};    
    objin[1] = "-" + obj[1] + "px 0";
    var jq3 = jQuery.noConflict();    
    jq3(document).ready(function () {
        jq3("#bar-pro-1").css({ "background-position": objin[1] });
        if (obj[1] == 100) {
            jq3("#bar-pro-1").css({ "background-image": "none" });
            jq3("#bar-pro-110").css({ "background-image": "none" });
        };
    });

</script>
<div class="bar-t"><b>Progress</b></div>
<div class="bar-100">
<div class="bar" id="bar-pro-110">
</div>
<div class="bar-pro" id="bar-pro-1"></div>
<div class="bar-num"><script> document.write(12 + "%");</script></div>
</div> 
```

这只是循环之一。如果你愿意，我可以放完整的代码和结果。注意：最后一个值是正确的，它适用于 CSS，但 CSS 的过去值不起作用。

问题是什么 ？

**注意：我发现了问题。因为 obj 和 objin 数组在循环中。他们应该不在循环中。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:40:47.877

这里有一个问题：

```
 if (objin[1] == 100) ... 
```

您正在将此值与一个数字进行比较。由于您将“px 0”附加到此值，因此它将始终是一个字符串。这种比较总是会失败。

```
objin[1] = "-" + obj[1] + "px 0"; 
```

# java - Java LOC 通过比较两个项目进行计数

> ID：11412463
> 
> 赞同：0
> 
> 时间：2012-07-10T11:33:52.927
> 
> 标签：java, eclipse, lines-of-code

我`Java`在eclipse中有两个项目。相同的项目，但不同的版本。

现在我想比较这些项目，找出`LOC`每个`java`项目的 Inserted, Modified, Deleted 。

是否有任何插件可用于相同目的？或者有没有这样的工具可用？请给我提意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:38:05.447

在 Windows 上，[WinMerge](http://winmerge.org/?lang=en)可以比较整个文件层次结构，并告诉您哪些文件只存在于一侧，以及如果文件存在于两个层次结构中，左右版本之间有什么区别。不过，不确定它是否计算了不同的行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:27:47.290

您可以单击 Eclipse 中的项目/文件夹/包，右键单击并选择`Compare With`> `Each Other`。这将使您概述它们之间的差异。但是，它不会以行为基础，也不会递归到子目录中。

在 Linux 上，您可以像下面这样一起使用`diff`和。`diffstat`

```
diff -rN old-dir new-dir | diffstat 
```

参数`-r`将使差异递归（即查看子目录），并将`-N`丢失的文件视为空（以报告添加的行，而不是添加的文件）。

这将产生一个类似的列表：

```
directory/some-file  |    5 +++++
directory/other-file |   18 +++++++++-------
2 files changed, 14 insertions(+), 7 deletions(-) 
```

它不报告修改文件的数量，而是插入和删除。

# silverlight - Silverlight 应用程序检查更新？

> ID：11412464
> 
> 赞同：0
> 
> 时间：2012-07-10T11:33:58.717
> 
> 标签：silverlight

好吧，我有一个 silverlight 应用程序，它检查是否有任何更新（这是通过调用 web 服务来完成的）。

如果有更新，我会调用 Application.CheckAndDownloadUpdateAsync 但相应的事件 CheckAndDownloadUpdateCompleted 永远不会引发......注意：这不是浏览器应用程序。

# c# - 应用程序启动时显示然后关闭的表单

> ID：11412466
> 
> 赞同：0
> 
> 时间：2012-07-10T11:34:04.780
> 
> 标签：c#, winforms, visual-studio-2010

这是表单代码，每次我测试一些输入时，应用程序都会打开然后立即关闭，我不知道是什么原因造成的。

```
 namespace Assignment2
  {
public partial class IsmClassForm : Form
{
    public IsmClassForm()
    {

        InitializeComponent();
    }
    private void IsmClassForm_Load(object sender, EventArgs e)
    {
    }

    protected Student m_student;
    protected Course m_course;
    protected IsmClassForm m_next;
    protected EnrollmentForm m_home;

     public bool TestPrerequisites()

    {
        if (!m_student.Record.MeetsPrerequisites(m_course.Number))
        {
            MessageBox.Show("The registrar reports that you don't meet the prerequisites for " + m_course.Prefix + m_course.Number.ToString());
            m_student.PridePoints = m_student.PridePoints - 5;
            m_student.Record.Remove(m_course);
            return false;
        }
        return true;
    }
    public string Description
    {
        get
        {
            return textDescription.Text;
        }
        set
        {
            textDescription.Text = value;
        }
    }

    public string Title
    {
        get
        {
            return this.Text;
        }
        set
        {
            this.Text = value;
        }
    }
    public string Welcome
    {
        get
        {
            return labelWelcome.Text;
        }
        set
        {
            labelWelcome.Text = value;
        }
    }

    public bool Initialize(Student student, int course, IsmClassForm next, EnrollmentForm home)
    {
        if (student == null) return false;
        m_student = student;
        m_next = next;
        m_home = home;
        m_course = m_student.Record.FindEnrolled(course);
        if (m_course == null)
        {
            return false;
        }

        labelCourse.Text = m_course.Prefix + "-" + m_course.Number.ToString();
        return TestPrerequisites();

    }

    public enum DropMode
    {
        FreeDrop, PayDrop, Withdraw, NoDrop
    };
    DropMode mState = DropMode.FreeDrop;
    public DropMode Drop
    {
        get
        {
            return mState;
        }
        set
        {
            mState = value;
            UpdateDrop();
        }
    }

    public void UpdateDrop()
    {
        switch (Drop)
        {
            case DropMode.FreeDrop:
                buttonDrop.Text = "Drop";
                break;
            case DropMode.PayDrop:
                buttonDrop.Text = "Drop";
                break;
            case DropMode.Withdraw:
                buttonDrop.Text = "Withdraw";
                break;
            case DropMode.NoDrop:
                buttonDrop.Text = "Done";
                break;
        }

    }

    protected void buttonDrop_Click(object sender, EventArgs e)
    {
        switch (Drop)
        {
            case DropMode.FreeDrop:
                m_student.PridePoints = m_student.PridePoints - 5;
                m_student.Record.Remove(m_course);
                m_course = null;
                break;
            case DropMode.PayDrop:
                m_student.PridePoints = m_student.PridePoints - 10;
                m_student.WealthPoints = m_student.WealthPoints - 500;
                m_student.Record.Remove(m_course);
                m_course = null;
                break;
            case DropMode.Withdraw:
                m_student.PridePoints = m_student.PridePoints - 50;
                m_student.WealthPoints = m_student.WealthPoints - 500;
                m_course.Grade = "W";
                break;
            case DropMode.NoDrop:
                m_student.WealthPoints = m_student.WealthPoints - 500;
                break;
        }
        Close();

    }

    protected void IsmClassForm_FormClosed(object sender, FormClosedEventArgs e)
    {
        if (e.CloseReason == CloseReason.UserClosing)
        {
            //The student not having a grade suggest the buttons were ignored
            if (m_course != null && m_course.Grade == null)
            {
                m_course.Grade = "F";
                m_student.PridePoints = m_student.PridePoints - 100;
                m_student.WealthPoints = m_student.WealthPoints - 500;
            }
            if (m_next != null) m_next.Show();
            else if (m_home != null) m_home.Show();
        }

    } 
```

以下是一些测试输入：

```
 static void TestIsmClassForm()
    {
        Student tjt1 = new Student("Travis Todd");
        tjt1.Record = new Transcript();
        tjt1.Record.Add(new Course(1, 3113, "B", false));
        tjt1.Record.Add(new Course(1, 3232, "C", false));
        tjt1.Record.Add(new Course(2, 3113, "A", true));
        tjt1.Record.Add(new Course(2, 3232, null, true));
        tjt1.Record.Add(new Course(2, 4220, null, true));
        IsmClassForm f4220 = new IsmClassForm();
        IsmClassForm f3232 = new IsmClassForm();
        IsmClassForm f4212 = new IsmClassForm();
        f4212.Initialize(tjt1, 4212, f3232, null);
        f3232.Initialize(tjt1, 3232, f4220, null);
        f4220.Initialize(tjt1, 4220, null, null);
        f4212.Show();
    } 
```

这确实使用了项目中的一些其他类及其形式，但我其他功能都可以工作，这是我迄今为止发现的唯一问题。我错过了一些明显的东西吗？

谢谢你，特拉维斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:47:38.377

您有两种方法可以实现这一目标；

鉴于您的输入方法：

```
public static void Main()     
{         
    TestIsmClassForm();    
} 
```

您可以使用[Application.Run](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.run%28v=vs.71%29.aspx)或[Form.ShowDialog](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)：

```
static void TestIsmClassForm()
{
    ...All of your original code...

    Application.Run(f4212.Show());

    //OR

    f4212.ShowDialog()

} 
```

现在发生的事情是 Form.Show 是非阻塞的 - 应用程序调用它，继续离开方法，然后关闭。

Application.Run 将显示表单并等待它关闭，然后再退出应用程序。Form.ShowDialog() 将阻塞调用方法，直到窗体关闭。

Application.Run 是首选，因为它保证用作应用程序主机的表单在[“主”或“GUI”线程](https://stackoverflow.com/questions/2222365/what-is-a-message-pump)中编组。ShowDialog() 不保证直接从 Main() 运行时（[Application.MessageLoop](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.messageloop.aspx)为 false），并且可能会发生一些令人惊讶的烦人的线程错误 - 所以大多数情况下 Application.Run 是实现您的目标的最佳方式是做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:43:51.660

确保您的项目中有一个`Program.cs`（这是默认名称）文件。它应该有`void Main(string[] args)`方法，它将构造表单的一个实例（即`form1`）和 do `Application.Run(form1)`。

放置断点`IsmClassForm_Load`并`IsmClassForm_FormClosed`捕捉表单打开和关闭的时刻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:52:18.633

表单消失的原因是包含表单的变量/对象超出范围并在测试块的末尾被丢弃。

即，一旦“代码”到达结束“}”，所有这些表单（和学生）变量都将被处理掉。

您可以将 .Show() 替换为 .ShowDialog()，这将导致代码停止，直到手动关闭表单。

[MSDN：显示对话框](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx "MSDN 显示对话框")

[MSDN：变量和方法范围](http://msdn.microsoft.com/en-us/library/ms973875.aspx "MSDN 变量范围")

# iphone - 带过渡的dismissModalViewController：从左到右

> ID：11412467
> 
> 赞同：17
> 
> 时间：2012-07-10T11:34:06.603
> 
> 标签：iphone, animation, uiviewanimationtransition, catransition

我正在使用一种很好的方法来关闭我的模态视图控制器：

```
[self dismissModalViewControllerWithTransition:2]; 
```

这使得从左到右的滑动过渡，就像导航控制器弹出视图一样。

由于该方法是非公开方法，Apple 不会接受。如何在我的代码中编写这种动画（从左向右滑动以关闭模态视图，从右向左滑动以呈现模态视图）？

提前致谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-10T13:10:16.870

我已经接受了 Safecase 的答案，但我想在这里发布我的最终解决方案：

1) To present a modal view controller with a from right to left transition I have written following method:

```
-(void) presentModalView:(UIViewController *)controller {
    CATransition *transition = [CATransition animation];
    transition.duration = 0.35;
    transition.timingFunction =
    [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionMoveIn;
    transition.subtype = kCATransitionFromRight;

    // NSLog(@"%s: self.view.window=%@", _func_, self.view.window);
    UIView *containerView = self.view.window;
    [containerView.layer addAnimation:transition forKey:nil];
    [self presentModalViewController:controller animated:NO];
} 
```

2) To dismiss a modal view with an slide transition left to right:

```
-(void) dismissMe {
    CATransition *transition = [CATransition animation];
    transition.duration = 0.35;
    transition.timingFunction =
    [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionMoveIn;
    transition.subtype = kCATransitionFromLeft;

    // NSLog(@"%s: controller.view.window=%@", _func_, controller.view.window);
    UIView *containerView = self.view.window;
    [containerView.layer addAnimation:transition forKey:nil];

    [self dismissModalViewControllerAnimated:NO];
} 
```

Thanks guys!

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T12:14:49.953

试试这个：

我假设您正在从视图控制器 1 中关闭视图控制器 2。在视图控制器 2 中，您正在使用它

```
[self  dismissModalViewControlleAnimated: NO]]; 
```

现在在第一个视图控制器中，在 viewWillAppear: 方法中添加代码

```
CATransition *animation = [CATransition animation];

[animation setDelegate:self];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromLeft];

[animation setDuration:0.50];
[animation setTimingFunction:
 [CAMediaTimingFunction functionWithName:
  kCAMediaTimingFunctionEaseInEaseOut]];

[self.view.layer addAnimation:animation forKey:kCATransition]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-04T07:23:00.557

This Swift 4 `ModalService` class below is a pre-packaged flexible solution that can be dropped into a project and called from anywhere it is required. This class brings the modal view in on top of the current view from the specified direction, and then moves it out to reveal the original view behind it when it exits. Given a `presentingViewController` that is currently being displayed and a `modalViewController` that you have created and wish to display, you simply call:

```
ModalService.present(modalViewController, presenter: presentingViewController) 
```

Then, to dismiss, call:

```
ModalService.dismiss(modalViewController) 
```

This can of course be called from the modalViewController itself as `ModalService.dismiss(self)`. Note that dismissing does not have to be called from the presentingViewController, and does not require knowledge of or a reference to the original presentingViewController.

The class provides sensible defaults, including transitioning the modal view in from the right and out to the left. This transition direction can be customised by passing a direction, which can be customised for both entry and exit:

```
ModalService.present(modalViewController, presenter: presentingViewController, enterFrom: .left) 
```

and

```
ModalService.dismiss(self, exitTo: .left) 
```

This can be set as `.left`, `.right`, `.top` and `.bottom`. You can likewise pass a custom duration in seconds if you wish:

```
ModalService.present(modalViewController, presenter: presentingViewController, enterFrom: .left, duration: 0.5) 
```

and

```
ModalService.dismiss(self, exitTo: .left, duration: 2.0) 
```

Head nod to @jcdmb for the Objective C answer on this question which formed the kernel of the solution in this class.

* * *

Here's the full class. The values returned by the private `transitionSubtype` look odd but are set this way deliberately. You should test the observed behaviour before assuming these need 'correcting'. :)

```
import UIKit

class ModalService {

    enum presentationDirection {
        case left
        case right
        case top
        case bottom
    }

    class func present(_ modalViewController: UIViewController,
                       presenter fromViewController: UIViewController,
                       enterFrom direction: presentationDirection = .right,
                       duration: CFTimeInterval = 0.3) {
        let transition = CATransition()
        transition.duration = duration
        transition.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)
        transition.type = kCATransitionMoveIn
        transition.subtype = ModalService.transitionSubtype(for: direction)
        let containerView: UIView? = fromViewController.view.window
        containerView?.layer.add(transition, forKey: nil)
        fromViewController.present(modalViewController, animated: false)
    }

    class func dismiss(_ modalViewController: UIViewController,
                       exitTo direction: presentationDirection = .right,
                       duration: CFTimeInterval = 0.3) {
        let transition = CATransition()
        transition.duration = duration
        transition.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseInEaseOut)
        transition.type = kCATransitionReveal
        transition.subtype = ModalService.transitionSubtype(for: direction, forExit: true)
        if let layer = modalViewController.view?.window?.layer {
            layer.add(transition, forKey: nil)
        }
        modalViewController.dismiss(animated: false)
    }

    private class func transitionSubtype(for direction: presentationDirection, forExit: Bool = false) -> String {
        if (forExit == false) {
            switch direction {
            case .left:
                return kCATransitionFromLeft
            case .right:
                return kCATransitionFromRight
            case .top:
                return kCATransitionFromBottom
            case .bottom:
                return kCATransitionFromTop
            }
        } else {
            switch direction {
            case .left:
                return kCATransitionFromRight
            case .right:
                return kCATransitionFromLeft
            case .top:
                return kCATransitionFromTop
            case .bottom:
                return kCATransitionFromBottom
            }
        }
    }
} 
```

# google-places-api - Google Places API：下一页标记错误

> ID：11412469
> 
> 赞同：0
> 
> 时间：2012-07-10T11:34:11.477
> 
> 标签：google-places-api

> **可能重复：**
> [Google Places API：页面令牌错误](https://stackoverflow.com/questions/11367307/google-places-api-page-token-errors)

尝试获取下一页时，我得到 REQUEST_DENIED 我尝试按照此处给出的答案： [Google Places API：Page Token Errors](https://stackoverflow.com/questions/11367307/google-places-api-page-token-errors)

有人可以告诉我我做错了什么没有帮助：

第一个请求是： [https ://maps.googleapis.com/maps/api/place/search/xml?location=32.12313,34.81649&radius=500&types&sensor=false&type=restaurant&key=MY_API_KEY](https://maps.googleapis.com/maps/api/place/search/xml?location=32.12313,34.81649&radius=500&types&sensor=false&type=restaurant&key=MY_API_KEY)

我尝试了对下一页的请求，它们都返回相同的结果 REQUEST_DENIED：

[https://maps.googleapis.com/maps/api/place/search/xml?key=MY_API_KEY&](https://maps.googleapis.com/maps/api/place/search/xml?key=MY_API_KEY&) **page_token** =ClREAAAAuG1aiCCfHnOxAkikjB6KeX7X0frDUn-cicSo1dt4iPoVwJubPspSmIXCvx8TRj1rvYwrlFhOOo0sL2Qf1E_45Ns36cM0VEkOLn4uPHBKH28SEIIgbTu00cePSEUuLgiKTm8aFBa709qEWkpww6ya_v25dfbV-43N

我试图将**page_token**更改为**nextpage**和**next_page**

对国家或地理位置有任何限制吗？这个选项可以让下一页甚至工作吗

# java - 是否可以在已安排工作的 tomcat 中部署 jar？

> ID：11412470
> 
> 赞同：0
> 
> 时间：2012-07-10T11:34:22.250
> 
> 标签：java, tomcat

是否可以在tomcat中部署一个jar？我使用 Maven 创建了一个 jar。现在我可以在tomcat中部署它吗？我已经安排了一些工作并将其打包。

Tomcat部署一个jar

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:39:27.787

您可以使用直接启动 JAR

```
java -jar /path/to/yourJar.jar 
```

Tomcat是一个web容器，它部署webapplication，`web.xml`按照指示读取和启动web应用

# php - 如何根据接受语言标题在 Symfony 2 中翻译语言？

> ID：11412476
> 
> 赞同：3
> 
> 时间：2012-07-10T11:34:35.120
> 
> 标签：php, symfony

我有

配置.yml

```
#Here locale is en
translator:      { fallback: %locale% }
...
session:
    default_locale: %locale% 
```

路由.yml

```
AcmeDemoBundle_homepage:
    pattern:  /{_locale}/index
    defaults: { _controller: AcmeDemoBundle:Default:index, _locale: de}
    requirements:
    _locale: en|de 
```

所以在这里通过手动输入 URL 将导致 `/en/index`英语和`/de/index`德语。

如果浏览器接受语言是 de_DE 或 de（德语），我们如何自动转到德语，否则转到英语（所有其他浏览器接受语言）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T12:16:13.080

基本上你可以做这样的事情

```
$this->get('session')->setLocale(
    $request->getPreferredLanguage(array('en', 'de'))
); 
```

它应该可以解决问题。但是，是的，在每个动作中添加它可能很难......这就是为什么你可以创建自己的内核事件监听器。

我认为这些链接可能会有所帮助：

[Symfony2 错误的语言环境检测？](https://stackoverflow.com/questions/7656114/symfony2-wrong-locale-detection)

[http://symfony.com/doc/current/cookbook/service_container/event_listener.html](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T12:48:17.697

我一直在使用[JMSI18nRoutingBundle](http://packagist.org/packages/jms/i18n-routing-bundle)，它会自动处理 URL 中的语言环境。在默认 URL 上，它可以选择使用首选语言环境。

内核事件侦听器是一个不错的选择，您可以[在文档](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)中找到相关信息。但是，请记住，您应该只在新会话上触发它，以确保用户仍然可以手动选择他们查看网站时使用的语言。

# javascript - 动画 jquery 一次设置一个对象

> ID：11412479
> 
> 赞同：1
> 
> 时间：2012-07-10T11:34:41.257
> 
> 标签：javascript, jquery, while-loop, jquery-animate

首先，我对 js 和 jQuery 都比较陌生，所以如果这是一个非常愚蠢的问题，我提前道歉。也就是说，就是这样：我正在尝试为背景创建一个类似大炮的动画，从一个图像到另一个图像进行缓慢的“扫描式”过渡。我遇到的最大问题是确保这一点；一个。递增计数器进行，并且；湾。图像的每个“切片”在下一个开始之前完成其淡出。

如果有一种简单（或明显）的方法可以做到这一点，我很想听听。我一直在努力弄清楚为什么这些（以及其他类似的变体）不起作用。

HTML：img class="bg"（这个的 10 个实例）

```
(function () {
  // --- Variation 1 ---

  function effect() {
    var i = 0,
    var current = $(".bg_1:eq(" + i + ")"),
      arrLength = $(".bg_1").length;
    while (i < arrLength) {
      current.fadeOut(1000, 0);
      i++;
    }

  }
  effect();

  // --- Variation 2 ---
  function effect() {
    var i = 0,
    var current = $(".bg_1:eq(" + i + ")"),
      arrLength = $(".bg_1").length;
    while (i < arrLength) {
      current.fadeOut(1000, 0, function () {
        i++;
      });
    }

  }
  effect();

})(); 
```

我认为这可能是“i”变量的范围有问题，或者是 jQuery 在该范围深度的冲突。任何可能的解决方案将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:44:39.417

如果没有看到您的 html，这有点难以回答，但这是按顺序为多个元素设置动画的一般方法：

```
(function _loop(idx) {
    var $elements = $('#wrapper .bg'), idx = idx % $elements.length;
    $elements.eq(idx).fadeIn('slow').delay(2500).fadeOut('slow', function () {
      _loop(idx + 1);
    });
}(0));​ 
```

演示：http: [//jsfiddle.net/UU5AM/](http://jsfiddle.net/UU5AM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:41:50.957

您的解决方案是同时为所有图片设置动画。您必须安装一个[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)事件链来执行此操作：

```
// initial count value declared outside the function to not reinitialize
var count = 0;
function effect() {
  // search the current image
  var current = $(".bg_1:eq(" + count + ")");
  // if there's an image, fade it out
  if (current.length) {
    current.fadeOut(1000, function() {
     // increment the count;
     count++;
     // call the function recursively
     effect();
    });
  }
}
// call the function
effect(); 
```

在此处查看它与[JSFiddle一起使用](http://jsfiddle.net/8J6dT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:42:07.503

你的`var current`永远都是一样的

尝试这个：

```
function effect() {
    var i = 0;
    var arrLength = $(".bg_1").length;
    while (i<arrLength) {
        $(".bg_1:eq(" + i + ")").fadeOut(1000, 0);
        i++;
    }

}
effect(); 
```

只是现在它会像 while 循环一样快地运行。这意味着它将几乎立即淡出所有内容。`setTimeout`只要 fadeOut 继续，您可能希望运行一个函数：

```
var i = 0;
setTimeout(function(){ 
    $(".bg_1:eq(" + i + ")").fadeOut(1000, 0);
    i++;
}, 1000); 
```

当然，当它到达终点时，您需要重置它。

编辑：击败 Richartz 的方式，在 fadeOut 完成后再次运行该功能，甚至比`setTimeout`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:47:21.337

您可以使用`fadeOut`'`callback`参数为其提供一个函数，该函数将在动画完成时执行。您可以使用它来提高计数器并（如有必要）为下一个元素设置动画。

例如：

```
(function () {

  function effect() {
    var i = 0,
    var current = $(".bg_1:eq(" + i + ")"),
      arrLength = $(".bg_1").length;
    var animateNext = function() {
      current.fadeOut(1000, 0, function() {
        i++;
        if (i < arrLength) {
          animateNext();
        }
      });
    }
    animateNext();
  }

  effect();

})(); 
```

如您所见，我们在`animateNext`. 我们在`effect`第一次结束时调用它来启动字符串动画。之后，每个下一个动画都从 中的回调开始`fadeOut`。

# java - 比较 TreeMap 的内容给出了错误的答案

> ID：11412480
> 
> 赞同：0
> 
> 时间：2012-07-10T11:34:41.867
> 
> 标签：java, dictionary, hashcode, treemap, compareto

我在另一个 TreeMap 中使用 TreeMap 作为“键”

IE

```
TreeMap<TreeMap<String, String>, Object> 
```

在我的代码中，“对象”是一个个人构造，但对于这个例子，我使用了一个字符串。

我创建了一对 TreeMap 来测试`TreeMap.CompareTo()`和`TreeMap.HashCode()`方法。这从以下开始......

```
public class TreeMapTest 

public void testTreeMap()
{
TreeMap<String, String> first = new TreeMap<String, String>();
TreeMap<String, String> second = new TreeMap<String, String>();

first.put("one", "une");
first.put("two", "deux");
first.put("three", "trois");
second.put("une", "one");
second.put("deux", "two");
second.put("trois", "three");

TreeMap<TreeMap<String, String>, String> english = new TreeMap<TreeMap<String, String>, String>();
TreeMap<TreeMap<String, String>, String> french = new TreeMap<TreeMap<String, String>, String>();

english.put(first, "english");
french.put(second, "french"); 
```

从这里我现在调用英语项目以查看它是否包含密钥

```
if (english.containsKey(second))
{
System.out.println("english contains the key");
//throws error of ClassCastException: Java.util.TreeMap cannot be cast to
//Java.Lang.Comparable, reading the docs suggests this is the feature if the key is
//not of a supported type.
//this error does not occur if I use a HashMap structure for all maps, why is
//this key type supported for one map structure but not another?
} 
```

但是我应该注意到 HashMap 和 TreeMap 都指向 AbstractMap 父级中的相同 HashCode() 方法。

我的第一个想法是将我的 TreeMap 转换为 HashMap，但这似乎有点笨拙！所以我决定将 hashCode() 方法应用于 2 个树图对象。

```
int hc1 = first.hashCode();
int hc2 = second.hashCode();

if(hc1 == hc2)
{
systom.out.printline("values are equal " + hc1 + " " + hc2);
} 
```

打印以下内容

```
values are equal 3877431 & 3877431 
```

对我来说，哈希码应该不同，因为键值不同，我找不到关于 HashMap 和 TreeMap 之间的 hashCode() 方法的实现差异的详细信息。

请不要以下。仅将 Keys 更改为 HashMap 不会停止 ClassCastException 错误。将所有映射更改为 HashMap 即可。所以 TreeMap 中的 containsKey() 方法有些东西不能正常工作，或者我误解了 - 谁能解释一下？

我得到第一个和第二个映射对象的 hashCode 的部分总是产生相同的输出（无论我在这里使用哈希映射还是树映射）但是 if(english.ContainsKey(second)) 不打印任何消息使用了 HashMap，因此 HashMap 实现中的某些内容显然与 compareTo() 方法不同。

我的主要问题是。

在哪里可以找到用于 TreeMap 对象的键类型的详细信息（以防止将来出现“ClassCastException”错误）。

如果我不能使用某种类型的对象作为键，为什么我首先允许将它作为键插入到 TreeMap 中？（当然，如果我可以插入它，我应该能够检查密钥是否存在？）

谁能建议另一个已订购 inster/retrieves 的构造来替换我的 TreeMap 关键对象？

还是我可能发现了奇怪的行为。根据我的理解，我应该能够将 TreeMap 替换为 HashMap，或者我偶然发现了一个边缘场景？

提前感谢您的评论。

大卫。

附言。这个问题在我的代码中不是问题，因为我使用个人实用程序创建依赖于键和值对的哈希（即，我计算键哈希值与值哈希值不同......对不起，如果是一个令人困惑的句子！）我假设 hashCode 方法只是将所有值加在一起，而不考虑项目是键还是值。

pps。我不确定这是否是一个好问题，关于如何改进它的任何指示？

编辑。

从人们的回应中，人们似乎认为我在做一些花哨的语言词典，这对我的例子并不感到意外，对此感到抱歉。我用这个作为例子，因为它很容易进入我的大脑，写得很快，并展示了我的问题。

真正的问题如下。

我正在访问一个遗留的数据库结构，它不能很好地与任何东西交谈（结果集不是正向和反向可读的等）。所以我抓取数据并从中创建对象。最小的对象代表表中的一行（这是在上面的示例中我使用字符串值 'english' 或 'french' 的对象。

我有这些 rowObject 的集合，每一行都有一个明显的键（这是指向相关 rowObject 的 TreeMap）。

我不知道这是否使事情更清楚！

编辑 2。

我觉得我需要进一步详细说明我对原始使用的选择

```
hashMap<HashMap<String,string>, dataObject> 
```

对于我的数据结构，然后转换为 TreeMap 以获得有序视图。

在编辑 1 中，我说旧版 DB 不能很好地运行（这是我怀疑的 JDBC.ODBC 的问题，我不打算购买 JDBC 来与 DB 通信）。事实上，我在创建 java 'dataObject' 时对数据进行了一些修改。这意味着尽管 DB 可能会以升序或降序的方式输出结果，但我无法知道它们以什么顺序插入到我的 dataObject 中。使用 likeHashMap 似乎是一个不错的解决方案（请参阅 duffymo 的建议），但我后来需要以有序的方式提取数据，而不仅仅是连续提取数据（LinkedHashMap 仅保留插入顺序），而且我不倾向于对所有内容进行排序和当我需要在另外两个项目之间插入一个新项目时制作副本，TreMap 会为我做这件事...... 但是如果我为键创建一个特定对象，它将只包含一个 TreeMap 作为成员，显然我需要提供一个 compareTo 和 hashCode 方法。那么为什么不只是扩展 TreeMap （尽管 Duffymo 有一点关于抛出该解决方案）！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T11:37:40.150

这*不是*一个好主意。映射键必须是不可变的才能正常工作，而您的则不是。

你真正想做什么？当我看到人们用数据结构做这样的事情时，我觉得他们真的需要一个对象，但却忘记了 Java 是一种面向对象的语言。

看起来你想要一个粗略的字典来翻译语言。我会创建一个`LanguageLookup`嵌入这些地图的类，并提供一些方法让用户更容易与之交互。更好的抽象和封装，更多的信息隐藏。这些应该是您的设计目标。考虑如何添加除英语和法语之外的其他语言，以便您可以在其他上下文中使用它。

```
public class LanguageLookup { 
    private Map<String, String> dictionary;

    public LanguageLookup(Map<String, String> words) {
        this.dictionary = ((words == null) ? new HashMap<String, String>() : new HashMap<String, String>(words));
    }

    public String lookup(String from) {
        return this.dictionary.get(from);
    }

    public boolean hasWord(String word) { 
        return this.dictionary.containsKey(word);
    }
} 
```

在您的情况下，您似乎想将一个英语单词翻译成法语，然后查看法语词典是否包含该单词：

```
Map<String, String> englishToFrenchWords = new HashMap<String, String>();
englishToFrenchWords.put("one", "une");
Map<String, String> frenchToEnglishWords = new HashMap<String, String>();
frenchToEnglishWords.put("une", "one");
LanguageLookup englishToFrench = new LanguageLookup(englishToFrenchWords);
LanguageLookup frenchToEnglish = new LanguageLookup(frenchToEnglishWords);
String french = englishToFrench.lookup("one");
boolean hasUne = frenchToEnglish.hasWord(french); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:57:18.940

您的 TreeMap 不是 Comparable，因此您无法将其添加到 SortedMap 并且它不是不可变的，因此您无法将其添加到 HashMap。您可以使用 IdentityMap 但怀疑 EnumMap 是更好的选择。

```
enum Language { ENGLISH, FRENCH }

Map<Language, Map<Language, Map<String, String>>> dictionaries = 
                                                    new EnumMap<>(Language.class);

Map<Language, Map<String, String>> fromEnglishMap = new EnumMap<>(Language.class);
dictionaries.put(Language.ENGLISH, fromEnglishMap);
fromEnglishMap.put(Language.FRENCH, first);

Map<Language, Map<String, String>> fromFrenchMap = new EnumMap<>(Language.class);
dictionaries.put(Language.FRENCH, fromFrenchMap);
fromEnglishMap.put(Language.ENGLISH, second);

Map<String, String> fromEnglishToFrench= dictionaries.get(Language.ENGLISH)
                                             .get(Language.FRENCH); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:46:07.307

对于 Hashmap 有效而 Treemap 无效的问题：

Treemap 是“排序映射”，这意味着条目是根据键排序的。这意味着通过实现`Comparable`接口，密钥必须是可比较的。地图通常不会实现这一点，我强烈建议您不要创建自定义类型来添加此功能。正如 duffymo 所提到的，使用地图作为键是一个*坏*主意。

# javascript - 如何使用地图链接打开fancybox

> ID：11412483
> 
> 赞同：1
> 
> 时间：2012-07-10T11:35:16.073
> 
> 标签：javascript, html, fancybox

使用 map 将链接提供给 jpg 文件。

```
<map name="Map" id="Map">
<area shape="rect" coords="350,350,350,350" href="......" target="_new" />
</map> 
```

我如何使用该链接打开fancybox？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:04:02.163

只需使用此脚本

```
$(document).ready(function(){
 $("#Map area").fancybox({
  // API options here
 }); // fancybox
});//ready 
```

确保为您使用的版本添加正确的 API 选项（如果您的`href`目标是图像，则可能不需要）

如果使用 v1.3.4 检查[http://fancybox.net/api](http://fancybox.net/api)。

对于 v2.x，请查看[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:25:01.823

```
$('#Map area').click(function(e){     // On click of <area> tag
    var href = $(this).attr('href'); // Get the href param 
    $.fancybox({                     // Open fancybox
        'href'   : href,
        'width'  : 350,
        'height' : 'auto'
    });

    e.preventDefault();
}); 
```

# iphone - XIB 未显示/加载滚动视图，但通过 viewdidload 中的代码添加的控件正在显示

> ID：11412485
> 
> 赞同：1
> 
> 时间：2012-07-10T11:35:20.703
> 
> 标签：iphone, ios, ios4, pushviewcontroller

我已添加`UIScrollView`到我的 xib，但它没有显示在我的视图控制器上。

同样在视图确实加载方法中，我已将文本框添加到视图控制器。这在我推送视图时显示，但不是我在 xib 中添加的滚动视图。

我试图以两种方式推送视图

方式一

```
SubscribedDetailedViewController *aDetailView = [[[SubscribedDetailedViewController alloc]initWithNibName:@"SubscribedDetailedViewController" bundle:nil]autorelease];

[self.navigationController pushViewController:aPoemDetailView animated:YES]; 
```

方式二

```
SubscribedDetailedViewController *aDetailView = [[[SubscribedDetailedViewController alloc]init]autorelease];

[self.navigationController pushViewController:aPoemDetailView animated:YES]; 
```

我还放置了以下代码

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

上面的函数也被调用。

为什么我添加到 xib 中的滚动视图没有显示？但是通过`viewdidload`显示内部的代码添加的控件。

# windows-phone-7 - XML 到地图上的 Pin 图

> ID：11412494
> 
> 赞同：0
> 
> 时间：2012-07-10T11:35:42.280
> 
> 标签：windows-phone-7, bing-maps

我可以将列表中的经纬度列表作为完整字符串获取。我现在需要能够在地图中使用它。

这是显示地图的代码。目前它正在显示两个引脚和位置。(xml)

```
phone:PhoneApplicationPage 
x:Class="BrightonHoveBuses.location"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
mc:Ignorable="d" d:DesignHeight="696" d:DesignWidth="480"
shell:SystemTray.IsVisible="True" xmlns:my="clr-  
namespace:Microsoft.Phone.Controls.Maps;assembly=Microsoft.Phone.Controls.Maps">
      <phone:PhoneApplicationPage.Resources>

    <DataTemplate x:Key="PinItemTemplate">
        <my:Pushpin Location="{Binding Location}" 
                    MouseLeftButtonUp="Pushpin_MouseLeftButtonUp_1"
                    Content="{Binding Id}">
        </my:Pushpin>
    </DataTemplate>

    <ControlTemplate x:Key="pinMyLoc"
                     TargetType="my:Pushpin">
        <Grid Height="26" 
                  Width="26"
                  Margin="-13,-13,0,0"
                  RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
                <CompositeTransform Rotation="-45" />
            </Grid.RenderTransform>
            <Rectangle Fill="Black" 
                       HorizontalAlignment="Center"                       Margin="0"                       Stroke="White"                       VerticalAlignment="Center"                       Height="26"                       Width="26" />
            <Ellipse HorizontalAlignment="Center"
                     Height="16" Margin="0" VerticalAlignment="Center"
                     Fill="Teal"
                     Width="16" />
        </Grid>
    </ControlTemplate>
          <DataTemplate x:Key="BusItemTemplate"> 
            <my:Pushpin Location="{Binding Location}"  
                Name="{Binding Id}"  
                MouseLeftButtonUp="Pushpin_MouseLeftButtonUp_1"> 
    <Grid> 
        <StackPanel Orientation="Horizontal"> 
            <Image Source="/Images/1.png" Stretch="None" Width="20" Height="25"/> 
        </StackPanel> 
    </Grid> 
</my:Pushpin> 
</DataTemplate> 
    <ControlTemplate x:Key="stops"
                     TargetType="my:Pushpin">
        <Grid Height="26" 
                  Width="26"
                  Margin="-13,-13,0,0"
                  RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
                <CompositeTransform Rotation="-45" />
            </Grid.RenderTransform>
            <Rectangle Fill="Black" 
                       HorizontalAlignment="Center"                       Margin="0"                       Stroke="White"                       VerticalAlignment="Center"                       Height="26"                       Width="26" />
            <Ellipse HorizontalAlignment="Center"
                     Height="16" Margin="0" VerticalAlignment="Center"
                     Fill="Yellow"
                     Width="16" />
        </Grid>
    </ControlTemplate>
    </phone:PhoneApplicationPage.Resources>

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="BRIGHTON &amp; HOVE BUSES" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="Stop Map" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <!-- This is the coding for the pushpins on the map-->
    <Grid Grid.RowSpan="2">
        <my:Map Name="map1" CredentialsProvider="Apg4fepCyTYEAQ0UxPKpbIljr_THidmUi7BNRth0JGtGSE0blId5FJSJqYy80kQC" Center="47.620574,-122.34942" Margin="0,139,6,99" Height="458" ZoomLevel="17" LogoVisibility="Visible" CopyrightVisibility="Visible" Loaded="startLocationButton_Click">
            <my:Pushpin Location="{Binding CurrentLocation}" Template="{StaticResource pinMyLoc}" Name="myPushPin"/>
            <my:MapItemsControl x:Name="MapPins"
            ItemsSource="{Binding Pins}"
            ItemTemplate="{StaticResource PinItemTemplate}"
            />
        </my:Map>
        <ListBox Height="87" HorizontalAlignment="Left" Margin="12,603,0,0" Name="listBox1" VerticalAlignment="Top" Width="460" >
                       <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding latitude}"/>
                            <TextBlock Text="{Binding NaptanCode}"/>
                            <TextBlock Text=" "/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>

        </ListBox>
    </Grid>
</Grid>
<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar Opacity="1.0" IsMenuEnabled="True" IsVisible="True">           

        <shell:ApplicationBarIconButton Text="Zoom In" IconUri="/Images/add.png" Click="Buttonplus_Click" />
        <shell:ApplicationBarIconButton Text="Zoom Out" IconUri="/Images/minus.png" Click="Buttonminus_Click" />
        <shell:ApplicationBarIconButton Text="Me" IconUri="/Images/location.png" Click="ButtonLocation_Click" />

        <shell:ApplicationBar.MenuItems>

        <shell:ApplicationBarMenuItem Text="Road View" Click="ApplicationBarRoad_Click" />
        <shell:ApplicationBarMenuItem Text="Aerial View" Click="ApplicationBarAerial_Click" />

        </shell:ApplicationBar.MenuItems>          

    </shell:ApplicationBar>

</phone:PhoneApplicationPage.ApplicationBar>
</phone:PhoneApplicationPage> 
```

这是代码....

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Device.Location;
using Microsoft.Phone.Shell;
using System.Xml.Serialization;
using System.Xml;
using System.IO.IsolatedStorage;
using Microsoft.Phone.Controls;
using System.Runtime.Serialization.Json;
using System.Collections.ObjectModel;
using System.Runtime.Serialization;
using System.Text;
using System.Xml.Linq;
using System.Data.Linq.Mapping;
using System.ComponentModel;
using Microsoft.Phone.Controls.Maps;
using Microsoft.Phone.Controls.Maps.Platform;
namespace BrightonHoveBuses
{
public partial class location : PhoneApplicationPage
{

    public location()
    {
        InitializeComponent();
        DataContext = App.ViewMapModel;
        MapViewModel view = new MapViewModel();
        view.Load();
        this.DataContext = view;

        WebClient client = new WebClient();
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
        Uri url = new Uri("http://www.henry-edwards.co.uk/feed.txt", UriKind.Absolute);
        client.DownloadStringAsync(url);

    }
    GeoCoordinateWatcher watcher;

    // Click the event handler for the “Start Location” button.
    private void startLocationButton_Click(object sender, RoutedEventArgs e)
    {
        // The watcher variable was previously declared as type GeoCoordinateWatcher. 
        if (watcher == null)
        {
            watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High); // using high accuracy
            watcher.MovementThreshold = 20; // use MovementThreshold to ignore noise in the signal

            watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(watcher_StatusChanged);
            watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);
        }

        watcher.Start();
    } // End of the Start button Click handler.

    public class RootContainer
    {
        [DataMember]
        public string StopName { get; set; }

        [DataMember]
        public string StopId { get; set; }

        [DataMember]
        public string Stop { get; set; }

        [DataMember]
        public string RouteId { get; set; }

        [DataMember]
        public string RouteName { get; set; }

        [DataMember]
        public string latitude { get; set; }

        [DataMember]
        public string longitude { get; set; }

        [DataMember]
        public List<Location> Location { get; set; }

    }

    void watcher_StatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
    {
        if ((App.Current as App).locsettings == false)
        {
            MessageBoxResult m = MessageBox.Show("Do you want to allow this application to use information about your location?", "Use Location", MessageBoxButton.OKCancel);

            if (m == MessageBoxResult.OK)
            {
                watcher.Start();
                (App.Current as App).locsettings = true;
            }
            else if (m == MessageBoxResult.Cancel)
            {
                watcher.Stop();
                (App.Current as App).locsettings = false;
            }
        }
        switch (e.Status)
        {
            case GeoPositionStatus.Disabled:
                // The Location Service is disabled or unsupported.
                // Check to see whether the user has disabled the Location Service.
                if (watcher.Permission == GeoPositionPermission.Denied)
                {
                    // The user has disabled the Location Service on their device.
                    MessageBox.Show("Location services must be enabled in your phone settings");
                }
                else
                {
                    MessageBox.Show("Location services must be enabled");
                }
                break;

        }
    }

    // Click the event handler for the “Start Location” button.
    private void stopLocationButton_Click(object sender, RoutedEventArgs e)
    {
        watcher.Stop();
    }

    private GeoCoordinateWatcher loc = null;

    public string stopslist;

    private void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        myPushPin.Location = e.Position.Location;
        map1.SetView(myPushPin.Location, 17.0);
        watcher.MovementThreshold = 100;
    }

    void loc_StatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
    {
        if (e.Status == GeoPositionStatus.Ready)
        {
            map1.SetView(loc.Position.Location, 17.0);
            loc.Stop();

        }
    }

    void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            if (e.Result != null)
            {
                XDocument doc = XDocument.Parse(e.Result);
                XNamespace ns = "http://schemas.datacontract.org/2004/07/BusExpress.ClassLibrary";
                var locations = (from n in doc.Descendants(ns + "ArrayOfStop")
                                 select new RootContainer
                                 {

                                     Location = (from s in n.Elements(ns + "Stop")
                                                 select new Location
                                                 {
                                                     latitude = s.Element(ns + "Lat").Value + " ," + s.Element(ns + "Long").Value,
                                                     // longitude = s.Element(ns + "Long").Value,

                                                 }).ToList()
                                 }).Single();

                // Do something with the list of Route Names in routeNames 
                listBox1.ItemsSource = locations.Location;
            }
        }
    }

 public class MapViewModel : INotifyPropertyChanged
{
    public void Load()
    {

        //Do something here to populate your view collection with pins

        Pins.Add(new PinModel() { Id = 2, Name = string.Format("Pin # 2"), Location = new GeoCoordinate(39.932825, -75.168396) });

    }

    private ObservableCollection<PinModel> _pins = new ObservableCollection<PinModel>();
    public ObservableCollection<PinModel> Pins
    {
        get { return _pins; }
        set { _pins = value; RaisePropertyChanged("Pins"); }
    }

    //Event code to ensure the page updates to model changes.
    public event PropertyChangedEventHandler PropertyChanged;
    private void RaisePropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    private void Pushpin_MouseLeftButtonUp_1(object sender, MouseButtonEventArgs e)
    {
        Pushpin pin = (Pushpin)sender;
        MessageBox.Show(pin.Content.ToString());
    }
    public class PinModel
    {
        public string Name { get; set; }
        public int Id { get; set; }
        public GeoCoordinate Location { get; set; }
    }

   }

    private void ButtonLocation_Click(object sender, EventArgs e)
    {
        loc = new GeoCoordinateWatcher(GeoPositionAccuracy.Default);
        //EventHandler for location service status changes
        loc.StatusChanged += loc_StatusChanged;
        //If the location service is disabled or not supported
        if (loc.Status == GeoPositionStatus.Disabled)
        {
            //Display a message
            MessageBox.Show("Location services must be enabled");
            return;
        }
        loc.Start();
    }

    private void Pushpin_MouseLeftButtonUp_1(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        Pushpin pin = (Pushpin)sender;
    }

    private void Buttonminus_Click(object sender, EventArgs e)
    {
        double zoom;
        zoom = map1.ZoomLevel;
        map1.ZoomLevel = --zoom;

    }

    private void Buttonplus_Click(object sender, EventArgs e)
    {
        double zoom;
        zoom = map1.ZoomLevel;
        map1.ZoomLevel = ++zoom;

    }

    private void ApplicationBarRoad_Click(object sender, EventArgs e)
    {
        map1.Mode = new RoadMode();

    }

    private void ApplicationBarAerial_Click(object sender, EventArgs e)
    {
        map1.Mode = new AerialMode();

    }

   }

  } 
```

编辑：

```
 public class PinModel : INotifyPropertyChanged
    {
        public string Name { get; set; }
        public int Id { get; set; }
        public GeoCoordinate Location { get; set; }
    } 
```

编辑：我试图在 bing 地图上找到所有站点。我可以获取列表中的所有位置，这将填充到列表框中。这一切都有效。

它现在正试图将所有这些位置连同名称一起显示在地图上。

所以我需要在网站上做些什么 - 但在电话上 - [http://www.buses.co.uk/travel/live-bus-times.aspx](http://www.buses.co.uk/travel/live-bus-times.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:54:27.700

我不太确定您的问题是什么，但我认为您与图钉的绑定不起作用？

您已经在 ObservableCollection 上实现了 INotifyPropertyChanged。那没有必要。要使其工作，您必须在 PinModel 上实现它，并且在设置 Location 属性时调用 RaisePropertyChanged 方法。

您的 PinModel 类应该如下所示，以使您的绑定工作（尽管您的绑定现在可能正在工作，因为您将它作为一个整体绑定一次。）

```
public class PinModel : INotifyPropertyChanged
{
    public string Name { get; set; }
    public int Id { get; set; }
    private GeoCoordinate _location;
    public GeoCoordinate Location
    {
        get
        {
            return _location;
        }
        set
        {
            _location = value;
            RaisePropertyChanged("Location");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void RaisePropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    } 

} 
```

另请注意，您在 linq 查询上调用的 het .Single() 方法返回的是单个值而不是列表。请查看 Lance 关于如何构建 linq 查询的答案。（有关.Single() 文档，请参阅此[链接）](http://msdn.microsoft.com/en-us/library/bb919331%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:55:26.157

你检查过你的 LINQ 方法的输出吗？您似乎只在列表中创建了一个实例。试试这个而不是你当前的解析方法。

```
var locations = (from n in doc.Descendants(ns + "ArrayOfStop") 
                             select new RootContainer 
                             { 

                                 Location = (from s in n.Elements(ns + "Stop") 
                                             select new Location 
                                             { 
                                                 latitude = s.Element(ns + "Lat").Value + " ," + s.Element(ns + "Long").Value, 
                                                 // longitude = s.Element(ns + "Long").Value, 

                                             }).ToList() 
                             }); 
```

# iphone - iphone 项目中的 Chartboost / iOS 中的 Chartboost 使用

> ID：11412496
> 
> 赞同：4
> 
> 时间：2012-07-10T11:35:57.490
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, chartboost

将[chartoost](https://chartboost.com/) sdk 集成到 iPhone 游戏中。（风景游戏）

```
#define CHARTBOOST_ID @"55c9f216f6cd4572f3975566"
#define CHARTBOOST_SIG @"9cc8122cfb05bfe0e171f46990180147e8b6f23c"

[Chartboost startWithAppId:CHARTBOOST_ID appSignature:CHARTBOOST_SIG delegate:self];

[Chartboost showInterstitial:CBLocationHomeScreen]; 
```

但它没有显示任何广告。帮助我找出 Xcode 中的设置或图表增强中的帐户有什么问题。

**Notes_Warning**：

大家好，不要使用 Chartboost，而是尝试 google Admob 或其他广告网络。因为 Chartboost - 骗子！我在我的游戏中使用了 Chartboost，游戏在柬埔寨获得了不错的排名 - 在赛车/游戏中排名第一。游戏的下载量也不错...但是 Chartboost 说我们在柬埔寨使用了很多设备并下载了游戏...这不是真的...我们不是来自柬埔寨...我多次尝试向 Chartboost 发送消息...但是他们没有回应并暂停了我的帐户。他们甚至没有支付我的 7463 美元。对我们来说真的是心脏病发作。现在我们移除了 Chartboost 并使用了 Admob，并且轻松地从 Admob 中赚取了我们的开发成本。所以避免 Chartboost 避免被骗！！！真理总是赢……总是做好事。 **做一个好人，但不要试图证明这一点**。远离坏骗子！！！！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T17:34:45.163

**Notes_Warning**：

大家好，**不要使用 Chartboost**，而是尝试 google Admob 或其他广告网络。因为**Chartboost - 骗子**！我在我的游戏中使用了 Chartboost，游戏在柬埔寨获得了不错的排名 - 在赛车/游戏中排名第一。游戏的下载量也不错...但是 Chartboost 说我们在柬埔寨使用了很多设备并下载了游戏...这不是真的...我们不是来自柬埔寨...我多次尝试向 Chartboost 发送消息...但是他们没有回应并暂停了我的帐户。他们甚至没有支付我的 7463 美元。对我们来说真的是心脏病发作。现在我们移除了 Chartboost 并使用了 Admob，并且轻松地从 Admob 中赚取了我们的开发成本。所以避免 Chartboost 避免被骗！！！真理总是赢……总是做好事。做一个好人，但不要试图证明这一点。远离坏骗子！！！！

* * *

现在它工作正常。我们需要在我们的 chartboost 帐户中添加发布活动。[这里](http://chartboost.com/campaign)

![在此处输入图像描述](../Images/c172660fcbe1b16229c0a9d6dbd22c70.png)

**更新：**

```
 [Chartboost startWithAppId:CHARTBOOST_APP_ID appSignature:CHARTBOOST_APP_SIGNATURE delegate:self];
 [Chartboost  showInterstitial:CBLocationHomeScreen]; 
```

# 查看测试广告的其他方式：

*   在发布活动中添加您的设备 UDID ![如何在发布活动中添加您的设备 UDID](../Images/0ce1f7c82f9194f9a16b50c02f2b6ddf.png) ![如何在发布活动中添加您的设备 UDID](../Images/8112b60963f35022083c3788eb4c2942.png)

*   在应用设置中启用测试模式。 ![如何在应用设置中启用测试模式？](../Images/4476ba666e2e6338a525de969880bc7f.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-10T12:09:06.717

加载它们时可能出现错误。[我将按照文档中的](http://www.chartboost.com/support/sdk)描述实现委托方法，特别是`didFail`方法：

```
// Called before requesting an interstitial from the back-end
- (BOOL)shouldRequestInterstitial:(NSString *)location;

// Called when an interstitial has been received, before it is presented on screen
// Return NO if showing an interstitial is currently inappropriate, for example if the user has entered the main game mode
- (BOOL)shouldDisplayInterstitial:(NSString *)location;

// Called when the user dismisses the interstitial
- (void)didDismissInterstitial:(NSString *)location;

// Same as above, but only called when dismissed for a close
- (void)didCloseInterstitial:(NSString *)location;

// Same as above, but only called when dismissed for a click
- (void)didClickInterstitial:(NSString *)location;

// Called when an interstitial has failed to come back from the server
// This may be due to network connection or that no interstitial is available for that user
- (void)didFailToLoadInterstitial:(NSString *)location; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T12:26:01.670

也可能是因为活动没有填充广告，并且您没有将设备添加为测试设备来强制填充广告。

这很容易错过，因为起初可能会填充广告 - 只有在测试期间它们才会神秘地停止。

Chartboost 中有一个设置：

编辑您用于测试的广告系列

*   在“活动逻辑”下，单击“显示测试设备”按钮。
*   单击“添加测试设备”以添加每个设备。
*   启用每个设备并保存活动。

（不要忘记在直播时取消勾选它们 - 因为我认为缺少它意味着这些设备会继续看到广告，但您可能想看看应用程序的实际行为方式）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-19T17:41:18.730

你需要设置

cb.delegate = 自我；

# mime-types - Google Docs 和 Google Drive 中的 Google Apps MIME 类型是什么？

> ID：11412497
> 
> 赞同：42
> 
> 时间：2012-07-10T11:35:58.710
> 
> 标签：mime-types, google-docs, file-type, google-drive-api

以下每个文件扩展名的 MIME 类型是什么：

*   文档
*   滑动
*   表格
*   绘图

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-10T14:23:32.190

谷歌文档：

`application/vnd.google-apps.document`
`application/vnd.google-apps.kix`

谷歌演示文稿：

`application/vnd.google-apps.presentation`

谷歌电子表格：

`application/vnd.google-apps.spreadsheet`

谷歌绘图：

`application/vnd.google-apps.drawing`

* * *

请参阅[此处](https://developers.google.com/drive/mime-types)了解更多信息。

* * *

以下是一长串 Google Docs 和 Google Drive MIME 类型（并非详尽无遗）：

```
application/vnd.google-apps.audio

application/vnd.google-apps.document

application/vnd.google-apps.drawing

application/vnd.google-apps.file

application/vnd.google-apps.folder

application/vnd.google-apps.form

application/vnd.google-apps.fusiontable

application/vnd.google-apps.kix

application/vnd.google-apps.photo

application/vnd.google-apps.presentation

application/vnd.google-apps.script

application/vnd.google-apps.sites

application/vnd.google-apps.spreadsheet

application/vnd.google-apps.unknown

application/vnd.google-apps.video 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-24T13:41:08.797

这是我的 MimeTypes 列表

```
 "application/vnd.google-apps.audio"
     "application/vnd.google-apps.document"
     "application/vnd.google-apps.drawing"
     "application/vnd.google-apps.file"
     "application/vnd.google-apps.folder"
     "application/vnd.google-apps.form"
     "application/vnd.google-apps.fusiontable"
     "application/vnd.google-apps.photo"
     "application/vnd.google-apps.presentation"
     "application/vnd.google-apps.sites"
     "application/vnd.google-apps.spreadsheet"
     "application/vnd.google-apps.unknown"
     "application/vnd.google-apps.video"
     "application/pdf"
     "application/msword"
     "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
     "application/vnd.ms-powerpoint.presentation.macroEnabled.12"
     "application/vnd.ms-excel"
     "image/jpeg"
     "audio/mpeg"
     "video/mpeg"
     "application/zip"
     "text/plain"
     "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
     "application/vnd.android.package-archive"
     "application/vnd.google-apps.kix" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-15T23:29:57.360

**（2016 年 7 月）**[@Ali](https://stackoverflow.com/users/28380/ali-afshar)的答案今天仍然有效，回答了关于 G Suite/Google Apps（文档、表格、幻灯片等）文件的特定 MIME 类型是什么的 OP 问题。

然而，在[Google Drive API](http://developers.google.com/drive)的情况下，澄清/组织各种支持的 MIME 类型也很重要，这些 MIME 类型用于在上传*到*Drive 时导入文件，即[纯文本 [或 Word] 文件到 Google Docs](http://googleappsdeveloper.blogspot.com/2015/12/google-drive-uploading-downloading.html)，以及导出*从*云端硬盘下载时的 G Suite 编辑器文件，即[CSV 格式的表格文件](http://wescpy.blogspot.com/2016/07/exporting-google-sheet--as-csv.html)。

*   驱动器[**导入**MIMEtypes](http://developers.google.com/drive/web/mime-types)
    *   [常见导入转换图表和示例](https://developers.google.com/drive/api/v3/manage-uploads#import_to_google_docs_types)
*   驱动[**导出**MIMEtypes](https://developers.google.com/drive/api/v3/ref-export-formats)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-12-02T13:04:54.837

对于那些尝试创建新的可编辑 Google 文档的人，请尝试以下操作

```
DocumentApp.create("My new GDoc"); 
```

# jquery - 在 Wordpress 中正确调用 jquery 函数

> ID：11412500
> 
> 赞同：0
> 
> 时间：2012-07-10T11:36:03.193
> 
> 标签：jquery, wordpress

我正在通过 wordpress 源代码开发一个网站。我正在使用二十十岁的儿童主题，并且我有一个 jquery 文件，其中包含我想要合并到网站中的功能。我的问题是：如何通过“functions.php”而不是通过将脚本粘贴到 html 页面上来调用此文件？

我发现我应该使用这样的东西：

```
 function my_scripts() {
         wp_enqueue_script( 'my-sweet-script', get_bloginfo('template_directory') . '/script.js', array('jquery') );
     }

 add_action('template_redirect', 'my_scripts'); 
```

我应该把 .js 文件放在哪里，这样他就不会被 wordpress 更新所取代？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:47:43.877

在您的模板目录中上传 js 文件.. 类似 /wp-content/themes/my-theme/ 或 /wp-content/themes/my-theme/js/

> get_bloginfo('template_directory')

这将返回您模板的目录路径

> wp_enqueue_script('my-sweet-script', get_bloginfo('template_directory') . '/script.js', array('jquery') );

这是将 JavaScript 添加到 WordPress 生成的页面的安全且推荐的方法

> function my_scripts() { wp_enqueue_script( 'my-sweet-script', get_bloginfo('template_directory') . '/script.js', array('jquery') ); }
> 
> add_action('template_redirect', 'my_scripts');

此代码应添加到您的子主题中应找到的 function.php（路径 ike：/wp-content/themes/my-theme/functions.php）

# jquery - jQuery.ajax 方法获取数据而不刷新

> ID：11412503
> 
> 赞同：1
> 
> 时间：2012-07-10T11:36:18.760
> 
> 标签：jquery, ajax, methods

我有这个问题，我喜欢做的是没有刷新。我想要的是，当我搜索然后按 Enter 时，播放列表不应该刷新。

我的网页示例是[http://cocopop12.site11.com/v1.7/index.php](http://cocopop12.site11.com/v1.7/index.php)

我的 jquery 脚本正确吗？我是否需要使用 ajax 以使页面不会刷新？

```
$(function(){
$('input[name="searchsubmit"]').click(function(e) {         
    e.preventDefault();
    var qS = $('#qsearch').val();

    $.ajax({
        type:"GET",
        url:"",
        data: qS,
        dataype: 'html',
        success: function(data){
           $('input#qsearch').html(data);
            return false;
        }
    })
}); 
}); 
```

按钮是

```
<div class="search">
<form id="quick-search" action="" method="get">
<p>
<label for="qsearch">Search:</label>
<input class="tbox" id="qsearch" type="text" name="q" value="Keywords" title="Start typing and hit ENTER" onblur="if(this.value=='') this.value='Keywords';" onfocus="if(this.value=='Keywords') this.value='';" />
<input class="btn" alt="Search" type="image" name="searchsubmit" title="Search" src="./css/search.gif" />
</p>
</form>
</div> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:42:10.860

尝试`success`代替`done()`，您不能将 ajax 调用传递`data`给`done()`方法：

```
 $.ajax({
        type:"GET",
        url:"",
        data: qS,
        datatype: 'html',
        success: function(data){
           $('input#qsearch').html(data);
        }
    }).done(function() {
        alert('done')
    }) 
```

# html - 如何设置输入类型复选框边框和背景？

> ID：11412511
> 
> 赞同：0
> 
> 时间：2012-07-10T11:37:04.377
> 
> 标签：html, css

我需要将输入类型复选框右侧填充设置为`10px`and `border-right:1px solid #000`。我正在尝试这个，但复选框没有取值。有谁知道为什么它不起作用？

我正在使用以下代码：

```
input[type="checkbox"] {
  border-right:1px solid #fff;
  margin-right:10px;
} 
```

边界不占用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:52:04.807

这是浏览器倾向于不让您设置太多样式的元素之一，并且大多数人用 javascript 替换它。

你为什么不试试漂亮的复选框？:) [http://www.no-margin-for-errors.com/projects/prettycheckboxes/](http://www.no-margin-for-errors.com/projects/prettycheckboxes/)

**编辑：**

这是一个示例： http: [//jsfiddle.net/v4Dde/2/](http://jsfiddle.net/v4Dde/2/)这是我在没有 javascript 的情况下制作一次的方式，希望对您有所帮助（抱歉，颜色只是以这种方式制作，所以您可以看到 :)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:57:41.567

您是否尝试过使用轮廓而不是边框​​？

例如 ：

```
outline : 2px solid #000000; 
```

# android - android中的数据库检索

> ID：11412515
> 
> 赞同：0
> 
> 时间：2012-07-10T11:37:20.157
> 
> 标签：android, database

我正在使用选择查询从数据库中检索数据。我的要求是我必须对（总）列进行求和`group=household`。`category=Income`我在数据库中有 1 个条目满足此条件。但它总是返回 0。请帮助我。

我的查询是：

```
long sum=0;
    Cursor cursor1 = db.rawQuery(
             "SELECT SUM("+(KEY_TOTAL)+") FROM incomexpense WHERE groups='Household' & category='Income'",null);
     if(cursor1.moveToFirst())
     {
       sum = cursor1.getLong(0);
     }
     cursor1.close();
     String housetotal=String.valueOf((long)sum);       
     System.out.println("house="+housetotal); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:44:28.880

尝试在查询中替换`&`with 。`AND`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:49:18.773

我猜这个查询可能不起作用，因为你写的是 '&' 而不是 'and'

# c - 为什么两个不同的枚举枚举常量可以具有相同的整数值？

> ID：11412516
> 
> 赞同：55
> 
> 时间：2012-07-10T11:37:37.913
> 
> 标签：c, enums

我知道如果我像这样定义一个枚举工作日：

```
enum weekday {
    MON,
    TUE,
    WED,
    THU,
    FRI,
}; 
```

然后，默认情况下，MON 在内部等于 0，TUE 为 1，WED 为 2...

但如果我这样定义：

```
enum weekday {
    MON,
    TUE = 0,
    WED,
    THU,
    FRI,
}; 
```

然后两者都`MON`将`TUE`得到 0 的值。

系统如何在内部区分 MON 和 TUE？我的意思是，如果我声明这样的内容：

```
enum weekday today = 0; 
```

那么是今天`MON`还是`TUE`？或者，从哲学上讲，两者兼而有之？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-07-10T11:46:27.420

C 枚举是“真正的”整数——不仅因为它们碰巧以这种方式实现，还因为标准*将*枚举类型定义为具有整数值。所以 的值`today`是“真的” 0。所发生的只是你为值 0 创建了两个不同的名称。

我想“今天是周一还是周二”的答案是“是”；-)

该语言不会阻止您，因为有时枚举具有相同值的多个名称很有用。例如：

```
enum compression_method {
    COMP_NONE = 0,
    COMP_LOW = 1,
    COMP_HIGH = 2,
    COMP_BEST = 2,
    COMP_FASTEST = 0,
}; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-06-18T13:15:49.887

**为什么两个不同的枚举常数可以具有相同的整数值？**

因为[N1265 C99 标准草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)在 6.7.2.2/3 "Enumeration specifiers" 明确允许它：

> 使用枚举器 with`=`可能会产生枚举常量，其值与同一枚举中的其他值重复。

**系统如何在内部区分 MON 和 TUE？**

我认为这是不可能的，因为它们是编译时常量（6.6/6“常量表达式”）。因此，他们：

*   编译后无法修改以使它们不同

*   没有地址可以区分它们：[C 中枚举值的内存位置](https://stackoverflow.com/questions/1206579/memory-location-of-enum-value-in-c)

    编译时间常数不需要任何地址，因为地址对于您无法修改的东西是无用的。

GCC 只是在编译时用汇编中的立即值替换枚举成员的使用。考虑：

```
#include <stdio.h>

enum E {
    E0 = 0x1234,
    E1 = 0x1234
};
int i = 0x5678;

int main() {
    printf("%d\n", E0);
    printf("%d\n", E1);
    printf("%d\n", i);
    return 0;
} 
```

使用 GCC 4.8 x86_64 编译和反编译：

```
gcc -c -g -O0 -std=c89 main.c
objdump -Sr main.o 
```

输出包含：

```
 printf("%d\n", E0);
   4:       be 34 12 00 00          mov    $0x1234,%esi
  ...
    printf("%d\n", E1);
  18:       be 34 12 00 00          mov    $0x1234,%esi
  ...
    printf("%d\n", i);
  2c:       8b 05 00 00 00 00       mov    0x0(%rip),%eax        # 32 <main+0x32>
                    2e: R_X86_64_PC32       i-0x4
  32:       89 c6                   mov    %eax,%esi 
```

所以我们看到：

*   枚举成员用作立即`$0x1234`数，因此无法知道它们来自哪里
*   然而，变量`i`来自内存`0x0(%rip)`（要重新定位），因此可以通过地址区分两个变量

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-06-18T17:59:09.453

只是为了补充其他答案，我会给你一个实际的例子，说明如何对给定的不同枚举使用相同的值`enum`是非常有用的：

```
enum slots_t {
    SLOT_FIRST = 0,
    SLOT_LEFTARM = SLOT_FIRST,
    SLOT_RIGHTARM = 1,
    SLOT_TORSO = 2,
    SLOT_LEFTLEG = 3,
    SLOT_RIGHTLEG = 4,
    SLOT_LAST = SLOT_RIGHTLEG
}; 
```

然后你可以在你的代码中做：

```
for (int i = SLOT_FIRST; i <= SLOT_LAST; ++i) { } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-06-16T11:02:28.420

它与哲学（或不是）一样

```
#define ZILCH 0
#define NADA  0 
```

在许多用途中，不同的名称产生相同的数字是有意义的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-10T12:02:17.623

枚举常量的名称用于分配值，而不是实际值本身。如果将值 0 分配给今天，则输出值将为 0。是的，MON 和 TUE 的值都为 0，其余的值将分配为 WED=1 THU=2，依此类推。

# api - 获取与文件修订相关的日期和描述 - Java API Perforce

> ID：11412517
> 
> 赞同：2
> 
> 时间：2012-07-10T11:37:38.787
> 
> 标签：api, perforce, java

我正在尝试编写一个方法，该方法将文件路径和修订号作为其参数并返回与修订关联的日期。我的代码可以工作（虽然速度很慢）但是，当我输入大于 51 的修订号时，输出会变得混乱。[这是 API。](http://www.perforce.com/perforce/doc.current/manuals/p4java-javadoc/index.html)

**输入**

```
String [] filePaths= {"//file/x/y/strings/somefile.csv"};
p4Client.getDateAssociatedWithFileRevision(filePaths, 52); 
```

**输出 - 这应该只是一行......**

```
Rev number: 2 :: Revision Date: Wed Aug 24 23:48:42 BST 2005

Rev number: 52 :: Revision Date: Wed Aug 24 23:52:53 BST 2005

Rev number: 51 :: Revision Date: Sat Aug 20 02:01:59 BST 2005 
```

**getDateAssociatedWithFileRevision**

```
public Date getDateAssociatedWithFileRevision(String [] filePath, int revisionNumber) {

        List<IFileSpec> fileList = null;
        Map<IFileSpec,List<IFileRevisionData>> fileRevisionData = null;
        String currentFile = null;
        Date revisionDate = null;

        try 
        {
            String file = filePath[0] + "#" + revisionNumber;
            currentFile = file;
            fileList = getIFileSpecList(file);  //Get list of file(s) in path

            for(IFileSpec fileSpec: fileList)
            {
                if(file.toString() == null)
                {
                    System.out.println("\"" + currentFile +"\"" + " does not exist...");
                    break;
                }
                fileRevisionData = fileSpec.getRevisionHistory(0, true,false,true,false);
                int i = 0;
                for(List<IFileRevisionData> revisionData : fileRevisionData.values()) {
                    revisionDate = revisionData.get(0).getDate();
                    int revision = revisionData.get(0).getRevision();
                    System.out.println("Rev number: " +revision +" :: " + "Revision Date: " + revisionDate);
                    System.out.println(i);
                    i++;
                }

            }
        }
        catch(Exception e){e.printStackTrace();}
        return revisionDate;  
     } 
```

**获取IFileSpecList**

```
public List<IFileSpec> getIFileSpecList(String file) {
        List<IFileSpec> fileList = null;
        try {
            fileList = iServer.getDepotFiles(
                        FileSpecBuilder.makeFileSpecList(new String[] {file}), false);  //Get list of file(s) in path
        }
        catch(Exception e){e.printStackTrace();}
        return fileList;
     } 
```

**编辑**

刚刚发现集成后输出变得混乱，现在只需要找到一种方法来处理它们..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:28:50.493

太多的工作。采用这个命令行理念（“p4 文件会为您提供经过解析的信息”）并让 Perforce 为您连接数据。然后对其进行 Java 化。

```
% p4 -Ztag files //guest/jeff_bowles/scripts/0228devbranch.html
... depotFile //guest/jeff_bowles/scripts/0228devbranch.html
... rev 2
... change 4421
... action edit
... type ktext
... time 1093044566

% p4 -Ztag files //guest/jeff_bowles/scripts/0228devbranch.html#1
... depotFile //guest/jeff_bowles/scripts/0228devbranch.html
... rev 1
... change 4420
... action add
... type ktext
... time 1093042787 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:24:28.013

我设法通过添加 if 语句（标记如下）仅返回我想要的日期。我不知道这个解决方案有多优雅......欢迎任何评论。

**getDateAssociatedWithFileRevision**

```
public Date getDateAssociatedWithFileRevision(String [] filePath, int revisionNumber) {

        List<IFileSpec> fileList = null;
        Map<IFileSpec,List<IFileRevisionData>> fileRevisionData = null;
        String currentFile = null;
        Date revisionDate = null;

        try 
        {
            String file = filePath[0] + "#" + revisionNumber;
            currentFile = file;
            fileList = getIFileSpecList(file);  //Get list of file(s) in path

            for(IFileSpec fileSpec: fileList)
            {
                if(file.toString() == null)
                {
                    System.out.println("\"" + currentFile +"\"" + " does not exist...");
                    break;
                }
                fileRevisionData = fileSpec.getRevisionHistory(0, true,false,true,false);
                for(List<IFileRevisionData> revisionData : fileRevisionData.values()) {
                    int revision = revisionData.get(0).getRevision();
     -------------> if(revision.equals(revisionNumber))
                    {
                        revisionDate = revisionData.get(0).getDate();

                        System.out.println("Rev number: " +revision +" :: " + "Revision Date: " + revisionDate);
                        break;

                    }
                }

            }
        }
        catch(Exception e){e.printStackTrace();}
        return revisionDate;  
     } 
```

# c# - 在成员资格提供者中动态选择角色

> ID：11412520
> 
> 赞同：0
> 
> 时间：2012-07-10T11:37:55.993
> 
> 标签：c#

我在会员提供者中有 3 个角色，例如：

*   主要的
*   老师
*   学生

单个用户可能同时具有“PRINCIPAL”和“TEACHER”角色。不久之后，该特定用户（具有 2 个角色）登录后，我在该用户的 RadioButtonList 中绑定了所有角色。

现在，他想在登录后选择一个角色，而我的主页应该是该用户的特定角色。

如何为用户动态分配角色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:51:00.800

如果您使用 Microsoft 的 Membership API，您可以像这样分配角色

```
Roles.AddUserToRole("UserName", "RoleName"); 
```

[点击这里了解更多信息](http://msdn.microsoft.com/en-us/library/ff647401.aspx#paght000013_step3)

# c# - axwindowsmediaplayer 上时间更改时触发事件

> ID：11412521
> 
> 赞同：3
> 
> 时间：2012-07-10T11:38:01.460
> 
> 标签：c#, winforms, wmplib

我有一个 Windows 应用程序。我正在使用 AxInterop.WMPLib dll 中的 axwindowsmediaplayer。我对播放视频没有任何问题，但我想在用户通过单击媒体播放器进入特定时间时触发一个事件。我查看了 dll 文件，但找不到这样的事件。任何人都可以帮助我了解当用户转到另一个视频时间时如何触发事件？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:54:52.833

[PositionChange](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562462%28v=vs.85%29.aspx)事件怎么样？

**编辑**

一个简短的例子：

```
public Form1()
{
  // ...
  axWindowsMediaPlayer1.PositionChange += axWindowsMediaPlayer1_PositionChange;
}

void axWindowsMediaPlayer1_PositionChange(object sender, AxWMPLib._WMPOCXEvents_PositionChangeEvent e)
{
  MessageBox.Show("The user changed the position from " + e.oldPosition + " to " + e.newPosition);
} 
```

# java - Android SQLite查询从大数据集中获取最接近给定经度和纬度的位置？

> ID：11412528
> 
> 赞同：3
> 
> 时间：2012-07-10T11:38:34.003
> 
> 标签：java, android, sqlite

我的表中有关于`15,000`经度和纬度位置的记录，我想选择最接近用户的`longitude and latitude`.

我应该如何处理这个？

我不认为我可以做一个边界框，因为查询完成需要很长时间。所以我迷失了我还能做什么。

谢谢。

# javascript - 同一台机器上的 Ajax 跨域但不同的端口

> ID：11412532
> 
> 赞同：5
> 
> 时间：2012-07-10T11:38:59.793
> 
> 标签：javascript, ajax, jquery, cross-domain

我们有一组从同一台机器调用的 api，地址`mycompany.com:8080`用于服务器和`mycompany.com`ajax.html 文件。

我们如何避免跨域策略？

无论如何要通过一些代理配置来做到这一点？

**拜托，不要 JSONP！**

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-11T11:21:38.507

如果两个或多个文档具有 - 相同主机 - 相同端口 - 相同协议，则可以将它们视为同一域来源。在您的情况下，端口不同，因此您不能直接放置 ajax 查询。相反，您需要指定以下标头作为响应。

```
 Access-Control-Allow-Origin: mycompany.com 
```

有关更多信息，请查看[此](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:49:21.453

您问这是否可以通过代理配置来完成，当然这是一种简单的解决方案，只需将主服务器代理请求发送到 AJAX 服务器即可。它通常很容易设置。但是[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)意味着您将无法使用纯客户端解决方案来做到这一点。

# objective-c - 应用内购买方法（mkstorekit？）

> ID：11412533
> 
> 赞同：1
> 
> 时间：2012-07-10T11:39:07.047
> 
> 标签：objective-c, xcode

我在应用商店有一个应用，我想将它添加到应用内购买，一个基本的，以便购买更多关卡。

我知道这`apple sdk`很难实现，我知道它`mkstorekit`很容易，但我找不到从头开始使用它的指南。

最好的方法是什么，还有其他方法吗？有什么好的教程吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:45:50.660

首先你需要初始化 MKStoreKit。您可以添加到您的示例初始化代码`application:didFinishLaunchingWithOptions:`如下在 Objective-C 中

```
[[MKStoreKit sharedKit] startProductRequest];

  [[NSNotificationCenter defaultCenter] addObserverForName:kMKStoreKitProductsAvailableNotification
                                                    object:nil
                                                     queue:[[NSOperationQueue alloc] init]
                                                usingBlock:^(NSNotification *note) {

    NSLog(@"Products available: %@", [[MKStoreKit sharedKit] availableProducts]);
  }];

  [[NSNotificationCenter defaultCenter] addObserverForName:kMKStoreKitProductPurchasedNotification
                                                    object:nil
                                                     queue:[[NSOperationQueue alloc] init]
                                                usingBlock:^(NSNotification *note) {

                                                  NSLog(@"Purchased/Subscribed to product with id: %@", [note object]);
                                                }];

  [[NSNotificationCenter defaultCenter] addObserverForName:kMKStoreKitRestoredPurchasesNotification
                                                    object:nil
                                                     queue:[[NSOperationQueue alloc] init]
                                                usingBlock:^(NSNotification *note) {

                                                  NSLog(@"Restored Purchases");
                                                }];

  [[NSNotificationCenter defaultCenter] addObserverForName:kMKStoreKitRestoringPurchasesFailedNotification
                                                    object:nil
                                                     queue:[[NSOperationQueue alloc] init]
                                                usingBlock:^(NSNotification *note) {

                                                  NSLog(@"Failed restoring purchases with error: %@", [note object]);
                                                }]; 
```

您可以使用 -isProductPurchased 检查以前是否购买过产品，如下所示。

```
if([MKStoreManager isProductPurchased:productIdentifier]) {
//unlock it
} 
```

您可以使用 -expiryDateForProduct 检查产品的到期日期，如下所示。

```
if([MKStoreManager expiryDateForProduct:productIdentifier]) {
//unlock it
} 
```

要购买功能或订阅自动续订订阅，只需致电

```
[[MKStoreKit sharedKit] initiatePaymentRequestForProductWithIdentifier:productIdentifier]; 
```

您还可以[在此处](http://blog.mugunthkumar.com/coding/introducing-mkstorekit-%E2%80%93-version-3/)和[此处找到 mkstorekit 的教程。](http://blog.mugunthkumar.com/coding/iphone-tutorial-%E2%80%93-in-app-purchases/)

# php - MySQL/PHP全文搜索1词相似度

> ID：11412543
> 
> 赞同：0
> 
> 时间：2012-07-10T11:39:46.043
> 
> 标签：php, mysql, match, full-text-search

我有一个客户想要管理网站中任何页面的 SEO 标题/描述，所以我考虑制作一个模块，他可以在其中输入 URL/TITLE/DESCRIPTION 并且网站将检查该页面是否有条目，如果有，显示出来。

我试过这个：

```
$url = 'http://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];

$q_seo = $conexio->query('SELECT modulseo.titol, modulseo.descripcio, MATCH(modulseo.url) AGAINST("'.$url.'") AS score FROM modulseo WHERE MATCH(modulseo.url) AGAINST("'.$url.'") ORDER BY score DESC LIMIT 0,1');

if(mysql_num_rows($q_seo)>0)
{
    $d_seo = mysql_fetch_array($q_seo);

    $titol = $d_seo['titol'];
    $descripcio = $d_seo['descripcio'];

}
else
{
    $titol = 'default title';
    $descripcio = 'default description';
} 
```

这显然不起作用，因为我相信全文搜索只适用于匹配不同的单词，而不是 1 个单词和另一个单词之间的相似性，因为客户端可以在后端 url 中输入，例如：

*   `http://www.domain.com/index.php`
*   或者`http://domain.com/index.php`
*   或者`http://www.domain.com/index.php?language=fr`
*   或者`http://domain.com/index.php?language=fr`
*   ETC..

然后网站的用户可以访问任何这些 url，因此必须有一种方法可以将任何 url 与客户端在后端输入的任何 url 匹配。

关于如何做到这一点的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:32:21.597

使用它进行搜索`LIKE %varible%`是一个较慢的查询，但它会起作用。

您的表引擎必须是 MyISAM，或者如果您使用 MySQL -v 5.6+，您可以使用 InnoDB 和全文索引

```
mysql> select * from test;
+------+------+------------------------------+
| ids  | name | last_name                    |
+------+------+------------------------------+
|    0 | 0    | http://domain.com/index.php  |
|    1 | 0    | http://domain2.com/index.php |
|    2 | 0    | http://domain3.com/index.php |
+------+------+------------------------------+
3 rows in set (0.00 sec)

mysql> select * from test where last_name like '%http://domain.com/index.php%';
+------+------+-----------------------------+
| ids  | name | last_name                   |
+------+------+-----------------------------+
|    0 | 0    | http://domain.com/index.php |
+------+------+-----------------------------+
1 row in set (0.00 sec) 
```

# scheme - 如何解决此错误“在定义之前引用标识符：with”

> ID：11412546
> 
> 赞同：3
> 
> 时间：2012-07-10T11:40:00.657
> 
> 标签：scheme, racket, plai

我正在学习“编程语言：应用程序和解释”，执行后可以在 DrRacket 5.2.1 中运行前两章的示例`#lang plai`。但是当我输入第 3 章的第一个示例时，如下所示：

```
(with (x 5) (+ x x)) 
```

我收到以下错误：

```
reference to an identifier before its definition: with 
```

`with`我在这本书中没有找到 的定义。我需要图书馆吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:04:52.570

构造`with`不是您在自己的程序中使用的东西——它是存在于您定义的语言中的东西。换句话说，它是你*实现*的东西，而不是你*使用*的东西。请注意，书籍总是将它与花括号一起使用，`{with {x ...} ...}`这是为了避免您遇到的这种确切的混淆——花括号始终用于您实现的语言的代码中，圆括号用于您自己的实现的代码。

请注意，在 Racket 中定义自己的`with`内容很简单，但这是错误的，并且可能会让您更加困惑。与其尝试在 Racket 中使用它，不如按照本书进行操作，在第 3 章结束时，您将拥有一个适用于 WAE 语言的解释器——然后您将能够使用它来运行 WAE 程序使用`with`.

附带说明一下，如果您正在寻找与 类似的 Racket 表单，`with`请查看`let`- 唯一的区别是它`let`允许您指定多个绑定，而不仅仅是一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:00:58.500

```
(with (x a) <body>) is just a synonym for ((lambda x <body>) a) 
```

如果您仍然有问题，您可以使用

```
((lambda x (+ x x)) 5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T04:02:49.790

很抱歉我昨天无法测试这些示例！好像还是有错误，我把第3章末尾的这些代码打了如下：

```
(define (parse sexp)
    (cond
      [(number? sexp) (num sexp)]
      [(list? sexp)
       (case (first sexp)
         [(+) (add (parse (second sexp))
                   (parse (third sexp)))]
         [(-) (sub (parse (second sexp))
                   (parse (third sexp)))])]))

 (define-type WAE
    [num (n number?)]
    [add (lhs WAE?)(rhs WAE?)]
    [sub (lhs WAE?) (rhs WAE?)]
    [with (name symbol?) (named-expr WAE?)(body WAE?)]
    [id (name symbol?)])

(define (subst expr sub-id val)
       (type-case WAE expr
          [num (n) expr]
          [add (l r) (add (subst l sub-id val)
                  (subst r sub-id val))]
          [sub (l r) (sub (subst l sub-id val)
                  (subst r sub-id val))]
          [with (bound-id named-expr bound-body)
            (if (symbol=? bound-id sub-id)
                (with bound-id
                  (subst named-expr sub-id val)
                  bound-body)
                (with bound-id
                  (subst named-expr sub-id val)
                  (subst bound-body sub-id val)))]
          [id (v) (if (symbol=? v sub-id) val expr)]))

(define (calc expr)
    (type-case WAE expr
      [num (n) n]
      [add (l r) (+ (calc l) (calc r))]
      [sub (l r) (- (calc l) (calc r))]
      [with (bound-id named-expr bound-body)
            (calc (subst bound-body
                         bound-id
                         (num (calc named-expr))))]
           [id (v) (error 'calc "free identifier")])) 
```

然后，我在第 21 页测试“with”，如下所示

(calc (parse '{with {x {+ 5 5}} {+ xx}}))

我得到了错误：

```
 "type-case: expected a value from type WAE, got: #"
```

原因是需要更新解析，我从谷歌获得了一些关于第 3 章的片段，例如，在[CS 345 Progamming Languages](http://www.cs.utexas.edu/~cannata/cs345/Class%20Notes/03%20chapter%203.scm)中，它的解析定义如下：

```
(define parse
  (lambda (sexp)
    (cond
      [(number? sexp) (num sexp)]
      [(symbol? sexp) (id sexp)]
      [(list? sexp)
       (case (first sexp)
         [(+)(add (parse (second sexp))
                  (parse (third sexp)))]
         [(-) (sub (parse (second sexp))
                   (parse (third sexp)))]
         [(with) (with (first (second sexp))
                       (parse (second (second sexp)))
                       (parse (third sexp)))]
         )]))) 
```

最后，我得到了正确的结果：

(calc (parse '{with {x {+ 5 5}} {+ xx}}) ) => 20

# zend-framework - 从视图脚本更改布局中的变量

> ID：11412548
> 
> 赞同：0
> 
> 时间：2012-07-10T11:40:04.757
> 
> 标签：zend-framework, layout

在我的布局中，我有诸如元标记之类的东西，它们可能会在不同的静态站点中发生变化。

示例：如果我去 /static/about 我希望有一个不同的元描述，如 /static/contact

我的问题是我想在视图脚本 static/content/about 或 static/content/contact 中更改这些变量/值，而不是在控制器中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:15:16.763

看看这篇文章可能对你有用：http: [//blog.ggshow.com/index.php/reference/zend-framework-view-helper-placeholder](http://blog.ggshow.com/index.php/reference/zend-framework-view-helper-placeholder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:47:08.970

看一下视图助手：[PlaceHolders](http://framework.zend.com/manual/en/learning.view.placeholders.conclusion.html)

# ember.js - 在 create() 上不调用观察者

> ID：11412550
> 
> 赞同：6
> 
> 时间：2012-07-10T11:40:07.823
> 
> 标签：ember.js

我有一个`Ember.Mixin`观察它的一个属性（这里`bar.baz`）。

我已经扩展了这个 Mixin 并设置`bar.baz`了`.create()`参数，但是我的观察者没有被调用。

这是我的代码：

```
App.FooMixin = Ember.Mixin.create({
    barBazDidChange: function() {
        console.log('barBazDidChange'); // never called
    }.observes("bar.baz")
});

App.Foo = Ember.Object.extend(App.FooMixin);

App.fooObject = App.Foo.create({
    bar: Ember.Object.create({
        baz: "ember"
    })
});​ 
```

以及相关的 jsfiddle：http: [//jsfiddle.net/aMQmn/](http://jsfiddle.net/aMQmn/)

我当然可以用下面的方法调用观察者`init()`，但我想知道是否有更好的解决方案（或者这个解决方案是否是正确的方法）：

```
App.FooMixin = Ember.Mixin.create({
    init: function() {
      this._super();
      if (this.getPath('bar.baz')) { 
        this.notifyPropertyChange('bar.baz');
      }
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:43:33.543

所以在 7 天内没有答案......我不会在创建时传递属性，而是链接创建和设置属性，如下所示：

```
App.fooObject = App.Foo.create().set('bar', Ember.Object.create({baz: "ember"}));​ 
```

如果还不够满意，也许你可以在 github 的 ember 项目中发布一个问题： [https ://github.com/emberjs/ember.js/issues](https://github.com/emberjs/ember.js/issues)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T01:14:26.433

正确的解决方案是覆盖该`init`方法（确保调用`this._super()`）并在那里调用该函数。正如其他人所指出的，观察者没有触发，因为值实际上并没有改变。围绕使`create`行为更像`setProperties`这将使其成为非问题进行了一些讨论。

# jquery - jquery容器滚动滚动页面以及Safari/Chrome

> ID：11412553
> 
> 赞同：0
> 
> 时间：2012-07-10T11:40:26.390
> 
> 标签：jquery, google-chrome, safari, scroll

我正在使用 Abhijit Rao 在[下一页](https://stackoverflow.com/a/3782959/392591)上提供的代码，当它包含在内部和溢出：自动容器时，它会显示一个元素。

我将它用于我正在创建的自定义组合框，它在所有浏览器中运行良好，除了 Safari/Chrome 项目滚动到视图中，但页面也会滚动。

知道如何阻止他们这样做吗？

谢谢， 雅克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:17:14.220

看起来 JQuery event.preventDefault() 在这种情况下有效，尽管我不太确定为什么它只影响 webkit 浏览器。

# html - 将本地 wordpress 网站上传到免费的 wordpress

> ID：11412555
> 
> 赞同：0
> 
> 时间：2012-07-10T11:40:31.847
> 
> 标签：html, wordpress, mamp

我第一次使用 wordpress，我创建了一个名为 trimline news 的新闻/博客网站。我已经使用 MAMP 在本地创建了站点，（修改了二十一个主题）。
我想要的是将我制作的网站上传到一个免费的 wordpress 网站，所以 trimlinenews.wordpress.com，我一直在网上寻找如何做到这一点的教程，但我只能找到那些需要你拥有自己的服务器和领域。

任何人都可以帮助我，或者指出我的方向以寻求帮助。

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:48:48.733

您需要将托管的博客导出为 XML 文件并将其导入 wordpress.com 网站请参阅 wordpress 支持中的以下链接

[移动博客](http://en.support.wordpress.com/moving-a-blog/)

Wordpress.com 不提供[FTP 访问](http://en.forums.wordpress.com/topic/migrating-existing-site-to-wordpresscom)，因此无法上传您的主题。您可以只导入博客上的内容。您需要在 wordpress 仪表板中选择一个类似的主题并购买[自定义设计升级](http://en.support.wordpress.com/themes/#editing-themes)来编辑您的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:23:34.277

在本地导出您的内容 - 仪表板>>工具>>导出 - 并将其导入 wordpress.com

您不能将完整的主题文件夹上传到 .COM ；没有 FTP 访问权限。您需要使用自定义 CSS 升级在 .COM 的主题副本中重做您的编辑。

请参阅[WordPress.com、WordPress 和 WordPress.org 之间的区别](http://en.support.wordpress.com/com-vs-org/)

# java - 在哪里下载 JMXMP？

> ID：11412560
> 
> 赞同：7
> 
> 时间：2012-07-10T11:40:53.783
> 
> 标签：java, profiling, jmx, visualvm, jmxmp

我想通过 JMX 远程使用 VisualVM 分析 Java 应用程序。因为它是一个经过 NAT 和防火墙的 EC2 实例，所以我不能使用默认的 RMI 方法，需要使用可选的 JMXMP 扩展，我必须先下载它。

> 注意 – 如果您想使用 JMXMP 连接器，请从 下载 JSR 160 参考实现，并将 JMXREMOTE_OPTIONAL.JAR 文件添加到您的 CLASSPATH 中。您将在 JSR 160 参考实现随附的 JMX 远程 API 教程中找到使用 JMXMP 连接器的示例。

[http://docs.oracle.com/javase/6/docs/technotes/guides/jmx/overview/connectors.html](http://docs.oracle.com/javase/6/docs/technotes/guides/jmx/overview/connectors.html)

但是当我去那个页面时，我找不到下载。事实上，谷歌找不到下载。我在哪里可以得到这些扩展？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T12:47:10.877

规范的 javax.management:jmxremote_optional 似乎已从 Maven Central [1] 中删除。（我想知道为什么......拉里的律师军团？）

幸运的是，以下似乎*是*Maven Central [2] 上的替代品：

```
<dependency>
    <groupId>org.glassfish.external</groupId>
    <artifactId>opendmk_jmxremote_optional_jar</artifactId>
    <version>1.0-b01-ea</version>
</dependency> 
```

我的 JMXMP/TLS 代码继续使用它，并且在双方都具有安全性和身份验证。愿你的里程一样好。:)

[1] [http://repo1.maven.org/maven2//javax/management/jmxremote_optional/1.0.1_04/](http://repo1.maven.org/maven2//javax/management/jmxremote_optional/1.0.1_04/)

[2] [http://repo1.maven.org/maven2/org/glassfish/external/opendmk_jmxremote_optional_jar/1.0-b01-ea/](http://repo1.maven.org/maven2/org/glassfish/external/opendmk_jmxremote_optional_jar/1.0-b01-ea/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T12:44:12.287

[http://www.oracle.com/technetwork/java/javase/tech/download-jsp-141676.html](http://www.oracle.com/technetwork/java/javase/tech/download-jsp-141676.html)

...具有**JMX Remote API 1.0.1_04 Reference Implementation**的下载按钮。这链接到...

[http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-plat-419418.html](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-plat-419418.html)

...仅提供**Java Management Extensions (JMX) Remote API Reference Implementation 1.0.1_03**。所以还是有点飘。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T14:37:33.053

最简单的解决方案是使用`ssh -D`. 有关更多详细信息，请参阅[此帖子](https://bowerstudios.com/node/731)。然后启动 VisualVM 并在 Tools->Options->Network 中设置此代理。您不需要`-J-Dnetbeans.system_socks_proxy -J-Djava.net.useSystemProxies`在 VisualVM 命令行上使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-07T14:39:17.613

v4.0于2013年5月问世

[jmxremote_optional-repackaged jar](http://mvnrepository.com/artifact/org.glassfish.main.external/jmxremote_optional-repackaged)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T12:45:27.027

[请参阅https://github.com/nickman/OpenDMK](https://github.com/nickman/OpenDMK)上的 OpenDMK 。这是一个行家构建。您需要 jmx-optional 模块。

# php - php数组 - 删除重复和相应的值

> ID：11412562
> 
> 赞同：0
> 
> 时间：2012-07-10T11:41:06.570
> 
> 标签：php, multidimensional-array

我有一个包含“title”和“url”（两个字符串）的二维数组，如下所示。是否可以检查“url”中的重复项，如果存在，也删除相应的“标题”？

```
array
      0 => 
        array
          'title' => string 'China - Wikipedia, the free encyclopedia'
          'url' => string 'http://en.wikipedia.org/wiki/China'
      1 => 
        array
          'title' => string 'China'
          'url' => string 'http://www.state.gov/r/pa/ei/bgn/18902.htm'
      2 => 
        array
          'title' => string 'China | World news | The Guardian'
          'url' => string 'http://www.guardian.co.uk/world/china'
      3 => 
        array
          'title' => string 'China Travel Information and Travel Guide - Lonely Planet'
          'url' => string 'http://www.lonelyplanet.com/china'
      4 => 
        array
          'title' => string 'ChinaToday.com'
          'url' => string 'http://www.chinatoday.com/' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:44:40.067

试试这个功能它可以完成这项工作

```
function super_unique($array,$key)
{
   $temp_array = array();

   foreach ($array as &$v) {

       if (!isset($temp_array[$v[$key]]))

       $temp_array[$v[$key]] =& $v;

   }
   $array = array_values($temp_array);
   return $array;
}

$yourearray = super_unique($arr,'url'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:46:30.683

或者，如果您对使用 url 的最后一个值感到满意，您可以

```
foreach($array as $subarray) {
    $output[$subarray['url']] = $subarray['title'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:45:26.573

尝试这样的事情：

```
$originals = array();

foreach($array as $key => $value) {
   if(!isset($originals[$value['url']])) {
      $originals[$value['url']] = true;
   }
   else {
      // exists already, delete entry
      unset($array[$key]);
   }
} 
```

# c# - 如何从网格的单元格中获取日期值到新形式的日期时间选择器控件

> ID：11412565
> 
> 赞同：0
> 
> 时间：2012-07-10T11:41:09.680
> 
> 标签：c#, visual-studio-2008, datagridview, datetimepicker

我们如何将**网格单元格的值传递给 datetimepicker**？我有一个带有列的网格，其中**一列存储日期值（YYYY-MM-DD）**格式。当我**单击编辑按钮时，需要将选定的行值传递给新表单**，并且**需要设置 DateTimePicker 控件的日期值**。这可能吗，如果是，那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:58:33.907

你可以试试这个，而你的日期必须是一个`YYYY-MM-DD`格式。

```
<script type="text/javascript"> 
function SetmyDate(){
    var yDate = "YYYY-MM-DD";
    var date  = yDate.substr(7,2);
    var mon   = yDate.substr(4,2);
    var year  = yDate.substr(0,4);
    $('#dateselector').datepicker(
        "setDate",
        new Date(mon + "/" + date + "/" + year)
    ); 
}   
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:37:04.583

这就是我需要的：

```
DateTime dtBookPublishDate = DateTime.Parse (dgvBooksDetails.CurrentRow.Cells[5].Value.ToStrin());                                                                      
myBookInformation.dtpBookPublishDateInfo.Value = DateTime.Parse(dtBookPublishDate.ToShortDateString()); 
```

其中，frmBookInformation 是子表单，目前我在主表单上。

# shell - 替换文件名的字符串并在同一个shell脚本中使用它

> ID：11412567
> 
> 赞同：0
> 
> 时间：2012-07-10T11:41:22.363
> 
> 标签：shell

我有一组命名约定为bond_7.LEU.CA.1.dat bond_10.VAL.CB.1.dat.....的文件，还有其他以字符串距离开头的文件，而不是以相同扩展名绑定的文件即，distance_7.LEU.CA.1.dat ....我正在尝试使用shell脚本中的粘贴命令合并相应或后续文件行

我打算粘贴 bond_7.LEU.CA.1.dat distance_7.LEU.CA.1.dat > ../raj/angle_dist_7.LEU.CA.dat

我尝试使用 for 循环并坚持替换文件名的字符串以访问相应的文件。

提前致谢，

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:50:46.810

```
#!/bin/bash
for FILE in bond* 
do
    paste "$FILE" "${FILE/bond/distance}" > "../raj/${FILE/bond/angle_dist}"
done 
```

是这样吗？

附言。这种替换在 pure 中不起作用`sh`。你应该这样使用`bash`or `ksh`or or `zsh`or smth。

pps。将其与`sh`替换`"${FILE/bond/distance}"`为一起使用

```
`echo $FILE | sed 's/bond/distance/'` 
```

# cocoa - 如何知道用户是否强制退出应用程序？

> ID：11412568
> 
> 赞同：1
> 
> 时间：2012-07-10T11:41:24.907
> 
> 标签：cocoa, macros, nsapplication

在我的 mac 应用程序中，我通过更改设备的系统分辨率来支持全屏。如果用户从全屏模式切换到窗口模式或者用户退出应用程序并且我还需要处理强制退出情况，我将重置回旧分辨率。
1.如果用户按下cmd+opt+esc（强制退出），是否有任何API或回调告诉应用程序。
2\. 有没有其他办法处理？

我知道在 NSApplicaction 中有一个选项可以禁用强制退出（[NSApplication setPresentationOptions: NSApplicationPresentationDisableForceQuit]），但我不想禁用它，而是要处理强制退出事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:52:03.557

普遍的共识是强制退出发送一个`SIGKILL`（“共识”，因为我不知道任何说明这一点的 Apple 文档，但这是合乎逻辑的答案）。A`SIGKILL`无法被捕获，因此您无法直接进行清理。另一种方法是运行一个助手应用程序来监视您的主应用程序并进行清理，主应用程序可以在正常退出时终止助手。另请参阅此[问题](https://stackoverflow.com/questions/3360761/how-to-do-a-cleanup-after-sigkill)。

# c++ - ＃包括 ＃包括 - 有什么不同？

> ID：11412570
> 
> 赞同：0
> 
> 时间：2012-07-10T11:41:41.997
> 
> 标签：c++, include, c++builder-xe2

> **可能重复：**
> [<string> 和 <string.h> 之间的区别？](https://stackoverflow.com/questions/9257665/difference-between-string-and-string-h)

我的具体示例使用以下子句：

```
#include <string> 
```

如果我改用以下子句

```
#include <string.h> 
```

编译器以错误结束

[BCC32 错误] utils.cpp(173): E2316 'getline' 不是 'std' 的成员

utils.cpp 文件中的第 173 行如下：

```
while(std::getline(in, line, '\n')) 
```

我认为这两个条款之间没有区别。现在我很困惑。这两个子句实际上包含哪些文件？可以说，我的 C++ Builder 安装有程序目录 C:\Program Files\RAD Studio\9.0，包含文件位于子目录 C:\Program Files\RAD Studio\9.0\include 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T11:44:09.427

```
#include <string> 
```

这包括 C++ 字符串标头。

```
#include <string.h> 
```

这包括 C 字符串标头，以及全局命名空间中的所有标识符。（已弃用。）

```
#include <cstring> 
```

这包括 C 字符串标头，所有标识符都放置在`std::`命名空间中。

**编辑：**经验法则 - C++ 标头永远不会以“.h”结尾。使用“c”作为传统 C 标头名称的前缀并删除“.h”以保持全局命名空间干净。仅对项目的 C 头文件使用“.h”。对仅 C++ 的标头使用“.hpp”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:44:53.800

它们是两个不同的标题。标准库中的约定是以 .`C`结尾的标题`.h`，而在`C++`标准库中，约定是完全省略文件扩展名。来自维基百科的更多细节：

> C 标准库中的每个标头都以不同的名称包含在 C++ 标准库中，通过删除 .h 并在开头添加“c”生成；例如，“time.h”变成“ctime”。这些头文件和传统的 C 标准库头文件之间的唯一区别是函数应该尽可能放在 std:: 命名空间中（尽管很少有编译器实际上这样做）。在 ISO C 中，标准库中的函数允许用宏来实现，而 ISO C++ 不允许。

其他库遵循不同的约定。例如，Boost 选择`.hpp`作为他们选择的`C++`标题扩展。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-10T11:46:07.333

按照惯例，C（过程）标头以 '.h' "string.h", "stdio.h"... 结尾，而 C++（主要面向对象）不包含任何扩展名： "iostream", "string" 。 ..

不确定所有标题是否都遵循此约定，但我认为标准的所有标题都遵循。

# android - Twitter回调网址在android中不起作用

> ID：11412579
> 
> 赞同：0
> 
> 时间：2012-07-10T11:42:05.097
> 
> 标签：android, callback, twitter

现在，我尝试使用**twitter4j库在 android 中实现 Twitter 集成。几个月前，我使用像“** **PicPuzzle://tkxel** ”这样的虚拟回调 url 成功实现了这一点。

但是现在 Twitter 改变了它的方案，现在不允许使用虚拟 URL 创建应用程序。

现在的问题是身份验证后它重定向到 callbackurl 但不返回到应用程序。

我在申请和注册页面中指定了相同的 url。我提到[了 Android 中 Twitter 回调中的问题](https://stackoverflow.com/questions/6813996/problem-in-callback-in-twitter-in-android)以及[如何使用 OAuth for Twitter 在 Android 中回调？](https://stackoverflow.com/questions/4644239/how-i-can-call-back-in-android-using-oauth-for-twitter). 但是这些解决方案现在不起作用，因为现在 twitter 不允许使用虚拟 URL 创建应用程序。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-22T13:33:26.787

请按照以下步骤操作：

1.  转到 Twitter 应用程序：[https ://apps.twitter.com/](https://apps.twitter.com/)

2.  然后，转到您的应用程序。

3.  转到设置选项卡

4.  在“回调 URL”部分中，添加以下行：

> twittersdk://

5.  单击底部的“更新设置”按钮。而已。

希望这有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:24:25.423

1.  创建您自己的 WebViewClient 子类。
2.  覆盖 shouldOverrideUrlLoading(WebView view, String url) 方法。
3.  在 shouldOverrideUrlLoading() 中，检查 url.startsWith(YOUR_CALLBACK_URL) 是否为真。
4.  如果为 true，则从 URL 中检索“oauth_verifier”参数并返回 true（来自 shouldOverrideUrlLoading() 的 true 会阻止 WebView 实例加载 URL）。
5.  使用步骤 4 中获取的参数值获取访问令牌。

在第 4 步之后，您的应用程序可以从 WebView 实例中取回控制权。

如果上述步骤听起来很麻烦，请尝试[TwitterOAuthView](http://darutk-oboegaki.blogspot.jp/2012/07/twitter-oauth-view-for-android-using.html "使用 twitter4j 的 Android 版 Twitter OAuth 视图")。它的用法很简单。打电话

```
view.start(CONSUMER_KEY, CONSUMER_SECRET, CALLBACK_URL, true, listener); 
```

并通过如下定义的 TwitterOAuthView.Listener 接口接收结果。

```
void onSuccess(TwitterOAuthView view, AccessToken accessToken);
void onFailure(TwitterOAuthView view, TwitterOAuthView.Result result); 
```

如果将 true 作为第四个参数赋予 TwitterOAuthView.start() 方法，则 TwitterOAuthView 不会访问回调 URL，我认为这种行为是您想要实现的。源代码[TwitterOAuthView.java](https://github.com/TakahikoKawasaki/TwitterOAuthView/blob/master/src/com/neovisionaries/android/twitter/TwitterOAuthView.java)可能会有所帮助。

# php - 如何在管理面板中隐藏管理菜单

> ID：11412582
> 
> 赞同：0
> 
> 时间：2012-07-10T11:42:24.177
> 
> 标签：php, drupal, drupal-6

我使用了 Drupal 6 和管理菜单模块。我需要在管理面板中隐藏管理菜单。我写了模块，但它不起作用。请帮帮我

模块代码：

```
<?php

/**
 * Implements hook_init().
 */
function YOURMODULE_init() {
  global $theme_key;
  if ($theme_key == 'rootcandy') {
    module_invoke('admin_menu', 'suppress');
  }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T01:00:00.273

问题是主题全局变量在您在`hook_init()`. 您可以`theme_init()`在检查`$theme_key`值之前打电话，但我不确定这是否有意外的副作用。

# git - 签出上一个提交后如何合并到本地分支

> ID：11412583
> 
> 赞同：1
> 
> 时间：2012-07-10T11:42:24.463
> 
> 标签：git, merge, commit

我在当地的分支机构工作`VISS`。然后我决定检查以前的提交：

> git 结帐 98ea3c8042c39e

我对代码做了一些重要的更改。然后我再次承诺。

现在我需要回到我的分支`VISS`来保留这些更改。

如果我想这样做，我应该怎么做：

1.  回到我的`VISS`分支，放弃在签出之前的提交 ( `98ea3c8042c39e`) 之前所做的事情。

2.  回到我的`VISS`分支，将新的更改与我在`VISS`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:47:51.493

1.  返回您的分支并丢弃所有内容：

    ```
    git checkout VISS 
    ```

    您在顶部的新提交`98ea3c`将漂浮在不知名的地方，最终将被 git 垃圾收集。

    相反，如果您愿意在当前指向的内容`98ea3c`上置顶`VISS`并丢弃，请执行以下操作：`VISS`

    ```
    git checkout VISS
    git reset --hard 98ea3c 
    ```

2.  返回`VISS`并在其顶部合并您的新更改：

    ```
    # On the new commit you just made:
    git rebase VISS

    # Now take note of what the commit ID is.  Assume I got "abc123"; then:
    git checkout VISS
    git merge abc123 
    ```

    您现在`VISS`将更改作为最新提交，并且没有合并提交。

# ios - iOS UIView滚动UI——如何实现？

> ID：11412584
> 
> 赞同：0
> 
> 时间：2012-07-10T11:42:29.980
> 
> 标签：ios, uiwebview, scroll

请原谅我这个迟钝的标题，因为我不确定如何描述这个问题。

最近，许多 iOS 应用程序使用滚动 UI 设计模式，这有助于最大化屏幕空间，通常在用户向下滚动时隐藏标题。

例如，Instragram 的主视图顶部有 Instragram 标题。在此视图上向上滚动会使标题固定在顶部，并且视图通常会弹回内容的顶部。但是向下滚动，标题作为内容的一部分，为额外的 44 点垂直空间让路。

可能我有一段时间没有做太多 iOS 工作了，但我无法轻易弄清楚如何最好地实现这一点？为可怕的描述道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:59:42.127

如果无论如何标题都保持不变，请在滚动视图顶部使用单独的视图。如果您使用 UITableView，则可以使用节标题。

**编辑**使用此代码：

```
- (void)scrollViewDidScroll:(UIScrollView*) scrollView
{
    CGPoint offset = scrollView.contentOffset;

    CGRect headerFrame = _headerView.frame;

    if(offset.y > 0){
        headerFrame.origin.y = offset.y;
    }
    else{
        headerFrame.origin.y = 0.0;
    }

    [_headerView setFrame:headerFrame];
} 
```

（假设 _headerView 是您的标题，位于滚动视图的顶部，而不是其中。此外，滚动视图和标题都从其父视图的顶部开始，y==0。此外，**您的视图控制器必须设置为滚动视图的代表**）

我只是从内存中编写了这段代码；尚未对其进行测试，但最多只需要调整即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:27:00.230

我在上面尝试了ranReloaded的答案，但似乎调用`setFrame:`UIScrollView 会阻止视图在超出其范围时弹跳。

相反，我将滚动视图设置为适合另一个名为`scrollerWrapper`. 将计算出的原点和高度应用于此视图会给我带来我想要的效果，并保留反弹行为。

```
- (void)scrollViewDidScroll:(UIScrollView*) scrollView
{
    CGPoint offset = scrollView.contentOffset;

    CGRect headerFrame = header.frame;
    CGRect wrapperFrame = scrollerWrapper.frame;

    if(offset.y > 0){
        headerFrame.origin.y = -offset.y;
        wrapperFrame.origin.y = MAX(0, headerFrame.size.height - offset.y);
        }
    else{
        headerFrame.origin.y = 0.0;
        wrapperFrame.origin.y = headerFrame.size.height;
        }
   wrapperFrame.size.height = self.view.frame.size.height - wrapperFrame.origin.y;

    [header setFrame:headerFrame];
    [scrollerWrapper setFrame:wrapperFrame];
} 
```

# objective-c - 目标 c - 在 dealloc 中取消操作

> ID：11412587
> 
> 赞同：2
> 
> 时间：2012-07-10T11:42:56.497
> 
> 标签：objective-c, ios, objective-c-blocks, nsoperation

我试图了解当在操作的完成块中引用对象时，让对象在其 dealloc 方法中取消网络操作是否是个好主意。

我将尝试用一个例子来解释：

我有一个`User`带有属性的对象`picture`，`User`有一个`[self fetchPictureFromServer]`：

```
- (void)fetchPictureFromServer
{
    NSDictionary *cmdParameters = ...; // set parameters

    __block User *weakSelf = self;  

    [[AppClient sharedClient] sendCommand:@"getpicture" parameters:cmdParameters success:^(AFHTTPRequestOperation *operation, id response) 
     {  
        // success  
        UIImage *downloadedImage = ...; // get image from response  

        weakSelf.picture = downloadedImage; // set image to user's picture property
     }

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        // failed 
    }]; 
```

该`sendCommand`方法将创建（并排入队列`NSOperationQueue`） a `NSOperation` ，该 a 将及时启动 a`NSURLConnection`以下载图像。当操作成功完成时，成功块将被调用。

我使用`weakSelf`是因为我不希望块保留我的用户对象（并防止它被释放），我希望用户在获得释放时负责取消现有操作（如果存在）。
所以 User dealloc 方法看起来像这样：

```
- (void)dealloc
{    
    [[AppClient sharedClient] cancelAllCommandsForSender:self];

    [super dealloc];
} 
```

但是好像虽然我在dealloc方法中取消了操作，但是有时候用户拿到dealloc**之后**`EXC_BAD_ACCESS`调用成功块，我就排队了`weakSelf.picture = downloadedImage`。

**为什么会这样？是不是该操作即使被取消也会尝试完成连接？**

我知道如果我在块中只使用 self 而不是weakSelf，这将不会发生，因为块将保留用户。但我不希望这种行为，我希望用户在释放后立即获得 dealloc，即使存在获取操作。

***更新：*** 我注意到操作状态是Finished = YES，似乎使用我使用的库，当操作完成时，它不会立即执行成功块，而是将成功块与主队列dispatch_async。

所以正确发生的是：
1.用户获取图像->创建操作
2.操作完成->dispatch_async成功块（仍未执行）
3.在成功块执行之前用户dealloc->取消他的所有操作（但不是第 1 步的操作，因为它处于 isFinished 状态）
4\. 现在执行成功块 -> 我在尝试引用用户时得到 EXC_BAD_ACCESS。

仍然不知道如何解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:51:17.623

```
[[AppClient sharedClient] sendCommand:@"getpicture" parameters:cmdParameters success:^(AFHTTPRequestOperation *operation, id response) 
     {  
       if(!operation.isCancelled)
       { 
       // success  
        UIImage *downloadedImage = ...; // get image from response  

        weakSelf.picture = downloadedImage; // set image to user's picture property
       } 
     } 
```

# javascript - 该示例用于将变量传递给 javascript 中的对象的技术名称是什么？

> ID：11412589
> 
> 赞同：0
> 
> 时间：2012-07-10T11:43:03.297
> 
> 标签：javascript, oop

下面的示例使用的技术名称是什么，用于将变量传递给 javascript 中的对象？此外，为什么它不起作用（**“大”**没有按预期输出到控制台日志）？

```
var thumbnailBlock = new ThumbnailBlock();
thumbnailBlock.thumbnailSize = "large";

function ThumbnailBlock() {

    this.thumbnailSize;

    console.log("DEBUG");
    console.log(this.thumbnailSize);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:46:45.637

[Willem Mulder 的回答](https://stackoverflow.com/a/11412636/95033)解释了你的代码出了什么问题：

> 没有具体的名称。您只需设置一个对象属性。
> 
> 不会输出“大”，因为您首先使用 ThumbnailBlock 构造函数（它记录 this.thumbnailSize）创建了一个对象，然后才将 .thumbnailSize 设置为“大”。

您可以将大小作为函数参数传递。

```
function ThumbnailBlock(size) {
    this.thumbnailSize = size;
}

var thumbnailBlock = new ThumbnailBlock("large");

console.log(thumbnailBlock.thumbnailSize); 
```

另外，请查看该页面上[的构造函数模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#constructorpatternjavascript)和其他不错的模式。我还推荐免费书籍[*Eloquent JavaScript*](http://eloquentjavascript.net/chapter8.html)[中关于 OOP 的章节](http://eloquentjavascript.net/chapter8.html)*。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:46:06.963

没有具体的名称。您只需设置一个对象属性。

不会输出“大”，因为您*首先*使用 ThumbnailBlock 构造函数（它记录 this.thumbnailSize）创建了一个对象，*然后*才将 .thumbnailSize 设置为“大”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:04:41.830

正确的答案已经给出，我只想指出，如果您的对象是[seal](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/seal)或[freeze](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/freeze) ，添加动态属性将不起作用。

```
function ThumbnailBlock(size) {
    Object.seal(this);
}

var thumbnailBlock = new ThumbnailBlock("large");
thumbnailBlock.thumbnailSize = 10;

console.log(thumbnailBlock.thumbnailSize); // undefined 
```

在[严格模式下](https://developer.mozilla.org/en/JavaScript/Strict_mode)，您将引发异常。*

# android - android中的滑动抽屉问题

> ID：11412594
> 
> 赞同：0
> 
> 时间：2012-07-10T11:43:28.273
> 
> 标签：android, android-intent, android-ui

我在活动中使用列表视图和滑动抽屉。我的意图是打开滑动抽屉并在列表项单击时显示内容。滑动抽屉的内容将根据选择的项目而改变。

UI 布局如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ListView
    android:id="@+id/presentation_list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

<SlidingDrawer
    android:id="@+id/slidingDrawer1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:content="@+id/content"
    android:handle="@+id/handle"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/handle"
        android:layout_width="40dp"
        android:layout_height="fill_parent"
        android:background="@android:color/darker_gray" />

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent"

        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Presentation&apos;s Images.. Please Flip"
            android:textColor="@android:color/black"
            android:textStyle="bold" />
        <ImageView
            android:id="@+id/content_imageview"
            android:layout_width="match_parent"
            android:layout_height="200dp"
            android:background="@android:color/black" 
            android:layout_below="@id/presentation_list"
            />
    </LinearLayout>
</SlidingDrawer> 
```

我单击列表视图滑块打开，当我单击滑动抽屉的图像视图时，我的列表视图也被单击。控件进入列表视图项单击方法并且图像被更改

谁能帮我纠正这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T12:19:03.633

将`android:clickable`属性添加到您的`content`布局并将其设置为`true`：

```
<LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:clickable="true" > 
```

不幸的是，我无法解释为什么会这样。

# php - 从格式错误的数据库中检索数据

> ID：11412597
> 
> 赞同：0
> 
> 时间：2012-07-10T11:43:39.537
> 
> 标签：php, mysql

我必须从非常旧的 mysql 数据库（大约 2003 年）中进行报告。所以画风不好。结构是表有列：id、type、field、value。在这些字段中是所有信息，但对于一个 id 有许多条目。如果通常数据会这样存储：id、name、speed、service、project 等，那么在这个表中数据存储如下：id（用于许多行）、type、field（这里放置 name、speed、service 。 ...但只是其中之一），值（字段“字段”的值）。但是我需要将每个 id 的表数据（每个 id 有多个条目）与表之间的连接表结合起来，然后与第三个表（实际上与第一个表相同但具有不同的 id）结合。我写了一个脚本，但它非常慢，PHP 无法在 30 秒内执行它。

表“基础”：

```
id | type | field | value 
```

表“连接”：

```
master | slave 
```

我从表“base”按“type”过滤获取数据，然后获取第一行和正确的数据，然后循环，而表“connects”中的“master”指向我需要的“type”的“base”项目并获取正确的数据. 以及太慢的完整脚本：

[http://paste.php.lv/ce693aee64e9617b509e336b25e3262f?lang=php](http://paste.php.lv/ce693aee64e9617b509e336b25e3262f?lang=php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:01:10.543

你用 JOIN 来做。

“正常”查询：

```
 SELECT SUM(value) FROM products WHERE product_name = "stanchion"; 
```

“您的”查询，如果我理解正确的话：

```
 SELECT SUM(v.value) FROM bigtable v JOIN bigtable p ON (v.key = p.key AND v.field = "value" AND p.field = "product_name" ) WHERE p.value = "stanchion"; 
```

您可能希望在多列表中翻译整个 bigtable：

```
 CREATE TABLE translated [AS]
 SELECT v.key AS product_id, v.value AS value,
     p.value AS product_name,
     s.value AS stock,
     ...
     FROM bigtable v
     JOIN bigtable p ON (v.key = p.key AND v.field = "value" AND p.field = "product_name" )
     JOIN bigtable s ON (v.key = s.key AND v.field = "value" AND s.field = "stock" ) 
```

# mysql - node.js-MySQL COUNT 记录数

> ID：11412599
> 
> 赞同：22
> 
> 时间：2012-07-10T11:43:48.150
> 
> 标签：mysql, node.js, node-mysql

我有以下代码。

```
var mysql = require('mysql');
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'root',
  password : '',
  database : 'test'
});
connection.connect();

var userdata = '24';

var sql = 'SELECT COUNT(*) FROM names WHERE age = ?'
connection.query(sql, [userdata], function(err, rows, fields) {
  if (err) throw err;
  console.log('Query result: ', rows);
});

connection.end(); 
```

我想从表 'names' 中获取记录总数，其中 'age' = 24。我在 node.js 命令提示符下收到以下信息。

```
Query result:  [ { 'COUNT(*)': '14' } ] 
```

我的问题是如何将这个数字 14 存储在一个变量中以供进一步使用。

我知道我可以通过将“sql”行更改为

```
var sql = 'SELECT * FROM names WHERE age = ?' 
```

然后控制台线

```
console.log('Query result: ', rows.length); 
```

但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-10T12:07:16.953

重写

```
var sql = 'SELECT COUNT(*) FROM names WHERE age = ?' 
```

看起来像，即：

```
var sql = 'SELECT COUNT(*) AS namesCount FROM names WHERE age = ?' 
```

然后，您将获得查询结果： `[ { 'namesCount': '14' } ].`

所以现在你有

```
rows[0].namesCount 
```

够好了？

# actionscript-3 - TypeError：错误 #1009：无法访问空对象引用的属性或方法。类引用可能吗？

> ID：11412602
> 
> 赞同：-1
> 
> 时间：2012-07-10T11:43:57.243
> 
> 标签：actionscript-3, flash, object, null, typeerror

运行代码时出现此错误：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在脚本::Enemy/moveToward()

我假设它与在舞台上注册玩家有关。到目前为止，我有 3 个课程：引擎、玩家和敌人。我目前正在构建一个横向滚动击败 em up 游戏。

```
package scripts 
{
    import flash.display.*;
    import flash.events.*;
    import flash.events.Event;
    import flash.display.Stage;

    public class Enemy extends MovieClip
    {
        var enemySpeed: Number = 3;
        var xDistance: Number = 50
        var yDistance: Number = 20;

        public var player: Player;

                public function Enemy()
                {
                        this.addEventListener(Event.ADDED_TO_STAGE, addListeners)
                }

        public function addListeners(event: Event):void
        {
            stage.addEventListener(Event.ENTER_FRAME, moveToward);
            trace("handeled");
        }

        function moveToward(event: Event):void
        {
            if(this.x < player.x - xDistance)
            {
                this.x += enemySpeed;
                this.scaleX = -1;
            }
            if(this(root).x > player.x+xDistance)
            {
                this.x -= enemySpeed;
                this. scaleX = 1;
            }

            if(this.y < player.y-yDistance)
            {
                this.y += enemySpeed;
            }
            if(this.y > player.y+yDistance)
            {
                this.y -= enemySpeed;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:57:09.483

当调用“moveForward”时，“Player”很可能没有被初始化或实例化。这通常发生在影片剪辑的第一帧事件期间。您可以考虑在 moveForward 方法中添加一条语句：

```
if ( player == null )
{
    return;
} 
```

# java - 使用休眠和线程锁定

> ID：11412604
> 
> 赞同：1
> 
> 时间：2012-07-10T11:43:59.043
> 
> 标签：java, multithreading, hibernate

我使用多个同步线程来处理多个事务，这些事务通过使用休眠框架和使用锁定概念从数据库中获取。问题是，每个线程第一次正确处理，但下一次它抛出 SQL 01002 和 SQL 72000 异常。请查看代码-

```
 long _StartTimeForMe = System.currentTimeMillis();

    boolean _contextPushed;
    txContext =
        GlobalFunctions.generateId(
            true,
            DataBrokerConstants.CONTEXT_PREFIX,
            null,
            null);
    txContext = this.getName() + txContext;
    logger_U.pushContext(txContext);
    _contextPushed = true;

    try
    {
        coreSession = openTxCoreSession();
    }
    catch (Exception e1)
    {
        logger_U.info("exception while creating Tx_Core session");
        e1.printStackTrace();
        return;
    }

    try
    {
        stagSession = openStagSession();
    }
    catch (RuntimeException e2)
    {
        logger_U.info("exception while creating stag session");
        e2.printStackTrace();
        return;
    }

    String _txContextBackup = txContext;

    int i = 1;
    long _timeElapsedByMe = System.currentTimeMillis() - _StartTimeForMe;

    try
    {
        while (doIhaveMoreTime(_timeElapsedByMe))
        {
            txContext = _txContextBackup + "-" + (i);
            logger_U.removeContext();
            logger_U.pushContext(txContext);

            coreTransaction = null;
            stagTransaction = null;

            InnerClassUpdate _rec = null;
            UpdateRecord _r = null;
            if (null != coreSession)
            {
                coreTransaction = coreSession.beginTransaction();
                _rec = getURForUpdates(coreSession);
            }
            else
            {
                logger_U.error("coreSession is not created.");
                break;
            }

            if (null != _rec)
            {
                _r = _rec.record;
                logger_U.info(
                    "record found. Going to process Record: ID = "
                        + _r.getId()
                        + " TX_IDENTIFIER = "
                        + _r.getTxIdentifier()
                        + "UPDATE_TYPE = "
                        + _r.getUpdateType());

                //If a record of same transaction is processing or has been processed before in same run, it will not run again in this run
                if (isTxProcessing(_r.getTxIdentifier()))
                {
                    if (coreTransaction != null
                        && !coreTransaction.wasCommitted()
                        && !coreTransaction.wasRolledBack())
                        coreTransaction.rollback();

                    if (stagTransaction != null
                        && !stagTransaction.wasCommitted()
                        && !stagTransaction.wasRolledBack())
                        stagTransaction.rollback();

                    logger_U.debug(
                        "A record of Tx_Identifier : "
                            + _r.getTxIdentifier()
                            + " is either processing or has been processed in this run.");
                }
                else
                {
                    try
                    {
                        stagTransaction = stagSession.beginTransaction();
                        if (processUpdates(_rec))
                        {
                            try
                            {
                                if (stagTransaction != null
                                    && !stagTransaction.wasCommitted()
                                    && !stagTransaction.wasRolledBack())
                                {
                                    stagTransaction.commit();

                                    logger_U.debug("stag commit success");
                                }
                                if (coreTransaction != null
                                    && !coreTransaction.wasCommitted()
                                    && !coreTransaction.wasRolledBack())
                                {
                                    coreTransaction.commit();

                                    logger_U.debug("core commit success");
                                }

                            }
                            catch (HibernateException e)
                            {
                                logger_U.debug("error while commit");
                                e.printStackTrace();
                            }

                        }
                        else
                        {
                            if (stagTransaction != null
                                && !stagTransaction.wasCommitted()
                                && !stagTransaction.wasRolledBack())
                                stagTransaction.rollback();

                            logger_U.debug("stagTransaction rollback...");
                            if (coreTransaction != null
                                && !coreTransaction.wasCommitted()
                                && !coreTransaction.wasRolledBack())
                                coreTransaction.rollback();

                            logger_U.debug("coreTransaction rolback...");
                        }
                    }
                    catch (Exception e1)
                    {
                        if (stagTransaction != null
                            && !stagTransaction.wasCommitted()
                            && !stagTransaction.wasRolledBack())
                            stagTransaction.rollback();

                        if (coreTransaction != null
                            && !coreTransaction.wasCommitted()
                            && !coreTransaction.wasRolledBack())
                            coreTransaction.rollback();

                        logger_U.error(
                            "Exception while processing UpdateRecord.");
                        e1.printStackTrace();
                    }
                }
            }
            else
            {
                if (stagTransaction != null
                    && !stagTransaction.wasCommitted()
                    && !stagTransaction.wasRolledBack())
                    stagTransaction.rollback();

                if (coreTransaction != null
                    && !coreTransaction.wasCommitted()
                    && !coreTransaction.wasRolledBack())
                    coreTransaction.rollback();

                logger_U.info(
                    "No record found. wait for "
                        + convertMilliesToSec(
                            DataBrokerConstants.SMALL_SLEEP)
                        + "Sec.");
                Thread.sleep(DataBrokerConstants.SMALL_SLEEP);
                i++;
                _timeElapsedByMe =
                    System.currentTimeMillis() - _StartTimeForMe;

                continue;
            }

            //No matter record is processed successfully or not, it will not be processed again in this run
            if (_rec != null && vectForUpdate.contains(_rec))
            {
                logger_U.debug(
                    "UpdateRecord of ID "
                        + _r.getId()
                        + " and TX_IDENTIFIER "
                        + _r.getTxIdentifier()
                        + " is removing from vectForUpdate.");
                removeObjectFromVect(_rec);
            }
            Thread.sleep(1000);
            _timeElapsedByMe = System.currentTimeMillis() - _StartTimeForMe;
            i++;
        } //END while loop
    }
    catch (Exception e)
    {
        try
        {
            if (stagTransaction != null
                && !stagTransaction.wasCommitted()
                && !stagTransaction.wasRolledBack())
                stagTransaction.rollback();

            if (coreTransaction != null
                && !coreTransaction.wasCommitted()
                && !coreTransaction.wasRolledBack())
                coreTransaction.rollback();

        }
        catch (HibernateException e3)
        {
            // TODO Auto-generated catch block
            e3.printStackTrace();
        }
        logger_U.error("Unknown Exception occured while processing.");
        e.printStackTrace();
    }
    finally
    {
        txContext = _txContextBackup;
        logger_U.removeContext();
        logger_U.pushContext(txContext);
        closeSession(coreSession);
        closeSession(stagSession);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:47:29.517

在使用 Hibernate 时，在多线程环境中应该非常小心。

*   您应该验证的第一件事是事务已正确提交，并且 SQL 已执行。如果你不能通过阅读你的代码来验证它，你可以提高 Hibernate 的日志级别来验证它

*   Hibernate Session 不是线程安全的，您只能在线程之间共享 SessionFactory。您还必须验证每次打开会话时都要注意关闭它，因为这不会自动发生，并且会阻止新线程打开新会话。

# c++ - 有没有办法告诉我的进程中正在运行哪些线程？

> ID：11412611
> 
> 赞同：0
> 
> 时间：2012-07-10T11:44:26.213
> 
> 标签：c++, multithreading, visual-studio-2010

每隔一段时间，我的游戏的一帧需要太长时间，我认为原因可能是某些线程需要很长时间才能恢复。（只是一个提示）。

在加载屏幕期间，我在游戏中明确创建了一个线程，之后立即暂停。我知道我的声音库也创建了一个。但我不知道是否正在创建任何其他线程。我使用 gDebugger 调试线程，它告诉我很多线程已启动，但我无法从中获取任何信息。我想确保这些线程都不会影响我的游戏时间。

我怎么做？有没有办法在 VisualStudio 中的线程创建处设置断点并获取执行此操作的模块？我使用的是 Express 版本，但我只能进行专业试用以检查这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:48:30.600

每当您在 VS 中中断时，它都会为您提供当前活动线程及其当前调用堆栈的列表。

# amazon-ec2 - EC2 实例崩溃并需要从终端重新启动

> ID：11412612
> 
> 赞同：0
> 
> 时间：2012-07-10T11:44:26.510
> 
> 标签：amazon-ec2, terminal, ec2-api-tools

我有一个亚马逊 ec2 实例，我通常通过 ssh 使用终端。我正在做一些改变，我的终端冻结了。所以，我关闭了终端并再次尝试 ssh。但是，我没有得到任何回应。

我*认为*实例已经崩溃，我需要重新启动，但我不知道该怎么做。问题是：我无法在线访问实例，因为用户名和密码属于我团队中的其他人（我目前无法联系，在国外）。

如何从终端重新启动服务器？我尝试下载 Amazon EC2 API 工具，但没有设置说明，我迷路了（我尝试了这些： http: [//linuxsysadminblog.com/2009/06/howto-get-started-with-amazon-ec2-api-tools /](http://linuxsysadminblog.com/2009/06/howto-get-started-with-amazon-ec2-api-tools/)但卡在私钥上。我只有一个 pem 文件？）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:10:04.050

如果您没有证书和密钥，就没有办法做到这一点。我会要求他们访问 EC2 管理控制台。如果他们设置了 IAM，您可以有限地访问您需要的工具。

# powershell - 从资源管理器菜单获取文件夹路径到 powershell 变量

> ID：11412617
> 
> 赞同：5
> 
> 时间：2012-07-10T11:44:43.490
> 
> 标签：powershell, explorer, cmdlet

是否可以从 powershell 打开资源管理器窗口并将资源管理器中选择的路径存储到变量中？

从 powershell 打开资源管理器窗口

PS C:> 资源管理器

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T11:57:17.480

也许这个脚本是你想要的：

```
Function Select-FolderDialog
{
    param([string]$Description="Select Folder",[string]$RootFolder="Desktop")

 [System.Reflection.Assembly]::LoadWithPartialName("System.windows.forms") |
     Out-Null     

   $objForm = New-Object System.Windows.Forms.FolderBrowserDialog
        $objForm.Rootfolder = $RootFolder
        $objForm.Description = $Description
        $Show = $objForm.ShowDialog()
        If ($Show -eq "OK")
        {
            Return $objForm.SelectedPath
        }
        Else
        {
            Write-Error "Operation cancelled by user."
        }
    } 
```

用于：

```
$folder = Select-FolderDialog # the variable contains user folder selection 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-07T18:35:51.677

我发现在所选答案中使用反射有点尴尬。下面的链接提供了更直接的方法

[http://www.powershellmagazine.com/2013/06/28/pstip-using-the-system-windows-forms-folderbrowserdialog-class/](http://www.powershellmagazine.com/2013/06/28/pstip-using-the-system-windows-forms-folderbrowserdialog-class/)

复制粘贴相关代码：

```
Add-Type -AssemblyName System.Windows.Forms
$FolderBrowser = New-Object System.Windows.Forms.FolderBrowserDialog
[void]$FolderBrowser.ShowDialog()
$FolderBrowser.SelectedPath 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T18:21:07.947

以上对我不起作用。使用 Powershell 版本 2 运行 Windows 7。我确实找到了以下内容，它确实允许弹出和选择：

```
 Function Select-FolderDialog
    {
         param([string]$Description="Select Folder",[string]$RootFolder="Desktop")

     [System.Reflection.Assembly]::LoadWithPartialName("System.windows.forms") Out-Null     

     $objForm = New-Object System.Windows.Forms.FolderBrowserDialog
     $objForm.Rootfolder = $RootFolder
     $objForm.Description = $Description
     $Show = $objForm.ShowDialog()
     If ($Show -eq "OK")
     {
         Return $objForm.SelectedPath
     }
     Else
     {
        Write-Error "Operation cancelled by user."
     }
    } 
```

以防其他人有同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-30T18:10:04.863

只是想发布一个附录，我相信`|`中间缺少一个管道：

```
[System.Reflection.Assembly]::LoadWithPartialName("System.windows.forms") 
```

和：

```
Out-Null 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-08T21:14:54.210

这是一个打开资源管理器对话框窗口的解决方案，要求用户选择一个文件夹。然后将文件夹路径存储在名为“path”的变量中：

```
Add-Type -AssemblyName System.Windows.Forms
$browser = New-Object System.Windows.Forms.FolderBrowserDialog
$null = $browser.ShowDialog()
$path = $browser.SelectedPathode 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-02T12:16:06.610

只有在我将“ **.SelectedPathode** ”替换为“ **.SelectedPath** ”之后，您的代码才对我有用

```
Add-Type -AssemblyName System.Windows.Forms
$browser = New-Object System.Windows.Forms.FolderBrowserDialog
$null = $browser.ShowDialog()
$path = $browser.SelectedPath 
```

这也是有关各自属性的文档 - [https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.folderbrowserdialog.selectedpath?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.folderbrowserdialog.selectedpath?view=net-5.0)

# javascript - Google Maps - 来自 VB.Net 的 JSON 对象标记

> ID：11412618
> 
> 赞同：0
> 
> 时间：2012-07-10T11:44:44.780
> 
> 标签：javascript, vb.net, json, google-maps-api-3

我已经使用 VB 创建了一个 JSON 标记对象。

```
 Dim nearbyLocations = CType(sqldata.Select(DataSourceSelectArguments.Empty),
                                DataView)

    For Each location As DataRowView In nearbyLocations
        markers.Add(
             String.Format(
                 "{{ title: ""AccName:{0}"", position: new google.maps.LatLng({1}, {2})}}", 
                     location("accgrpname"), 
                     location("Lat"), 
                     location("Long")))            
    Next

    Dim locationsJson = "[" & String.Join(",", markers.ToArray()) & "]" 
```

我将如何在 javascript 中引用此对象以在地图上绘制？

最终的 JSON 如下：

```
 [{ title: "AccName: Name", position: new google.maps.LatLng(51.0000, -0.1000)}] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:19:52.757

我假设您使用 AJAX 调用来加载使用 VB 代码创建的 JSON 对象。您可以使用 JQuery 来简化您的 ajax 调用，并且您收到的数据将为您转换为 JavaScript 对象。

一个快速示例看起来像（未经测试的代码）：

```
 $.ajax({
        url: service,  //your VB service
        dataType: 'json',  //could be JSONP 
        success: function(data){ var mk = new google.maps.Marker(data); }
    }); 
```

# c - 是否可以编写转换为 C 代码的脚本语言？

> ID：11412620
> 
> 赞同：2
> 
> 时间：2012-07-10T11:44:49.590
> 
> 标签：c, scripting, macros, programming-languages, scripting-language

我有一个想法来创建脚本语言，它可以让人们更轻松地编写大量宏、函数、更简单的函数名称，让简单的人使用起来更简单。该代码（自定义脚本语言）然后应该被翻译成简单的 C 语言的东西。像这样：

```
Scripting:
IO[9].high
@include "lib"
for (int i=0 to 55)

end
C:
IO |= (1<<9);
#include "lib.h"
int i = 0;
for (i=0; i<55; i++) {

} 
```

是否有可能以某种方式有效地编写这种可以很好地输出到 c 代码的宏/脚本语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:21:02.457

绝对地; 一些编译（或已经编译）成 C 的语言包括 Eiffel、Haskell (GHC)、Vala 和 Squeak。早期版本的 C++ 是作为 C++ 到 C 的转换器 (CFront) 实现的。

一般概念是一种[中间语言](http://en.wikipedia.org/wiki/Intermediate_language)。提到 C 被[用作中间语言](http://en.wikipedia.org/wiki/C_programming_language#Uses)；通过使用 C 编译器，您可以获得与许多语言和库的二进制兼容性，并且不必编写自己的编译器；Ritchie 将 C 描述为一种“[可移植的汇编语言](http://cm.bell-labs.com/cm/cs/who/dmr/chist.html)”。

但是，与 C++ 一样，您可能很快就会发现以 C 为目标的限制过于严格。GHC 正在转向一种名为[C--](http://en.wikipedia.org/wiki/C--)的专用中间语言，您可能会发现使用[LLVM 工具链](http://en.wikipedia.org/wiki/LLVM)（本质上是针对 LLVM 中间表示）是一种更好的多平台兼容性方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T15:17:46.200

感谢 PyPy，可以将 Python 代码的子集翻译成 c。

有关详细信息，请参阅以下参考： [http ://doc.pypy.org/en/latest/translation.html](http://doc.pypy.org/en/latest/translation.html)

另请参阅以下问题，这基本上是您将 Python 指定为脚本语言的问题：[Use Cython as Python to C Converter](https://stackoverflow.com/questions/7112812/use-cython-as-python-to-c-converter)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:33:00.657

例如，您是否看过[netsnmp](http://www.net-snmp.org/tutorial/tutorial-5/toolkit/mfd/if-mib/ifTable/mib2c.html)的 mib2c 脚本？它使用脚本生成 C 源代码。你可以参考那个以获得更多的想法。

# html - 容器宽度适合他的孩子宽度

> ID：11412623
> 
> 赞同：1
> 
> 时间：2012-07-10T11:44:59.250
> 
> 标签：html, css

也许这是一个愚蠢的问题，但我无法自己解决。我有一个容器（一个 div），其中包含一些其他元素（例如段落、图像等）。我想为容器的宽度分配一个值，以便在页面中居中。（默认行为使容器的宽度为 100%，所以我不能居中）我发现很多帖子都在谈论如何使子元素的宽度适合容器的宽度，但我知道的唯一方法是反过来是通过使用javascript（我想避免这种情况）。

有没有办法通过css做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:23:41.660

如果我对您的理解不正确，请纠正我。

您有一个带有未知宽度的子元素的 div，并希望 div 居中。

正如比利护城河所说，您可以通过添加一个带有“text-align:center”作为css属性的父div来实现这一点。

您不需要为要居中的 div 添加固定宽度；相反，添加

```
display:inline-block; 
```

到这个 div。div 现在将居中并采用子元素的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:13:01.293

如果我对您的理解正确，那么这就是您需要做的。

您需要在您已经提到的 DIV 之外设置一个容器 DIV，并在其上设置“text-align:center”。

然后内部 DIV 上应该有一个设定的宽度，并且上面还有“margin-left:auto”和“margin-right:auto”。

希望有帮助。

# php - 如何使用 preg_match 获取第一个数字字符？

> ID：11412624
> 
> 赞同：2
> 
> 时间：2012-07-10T11:45:01.440
> 
> 标签：php

我有电话号码。如果数字的第一个数字字符不是 1，我需要添加它。我不知道如何用 preg_match 来做，或者还有其他方法吗？

```
$first_number = $number;
if(preg_match('something', $first_number, $result))
{
$first_number = '1'. $result[1];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:48:20.367

这里不需要使用正则表达式。你可以做：

```
if($first_number[0] != '1') {
    $first_number = '1'.$first_number;
} 
```

但是，如果数字可以有前导空格或`+`符号，您可以这样做：

```
if(preg_match('/^(\D*)(\d)/',$first_number,$match))
    $first_number = $match[1].'1'.$match[2];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:54:38.910

如果我正确阅读您的问题，第一个非数字字符并不总是位于数组中的第 1 位。

```
$n="foo 415";
preg_match("/^[^0-9]*([0-9])/", $n, $matches);
print $matches[0]."\n";' 
```

返回`4`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:47:33.427

无需使用`preg_match`或`preg_replace`在这里，下面的简单解决方案应该可以工作

```
if ($number[0] != 1)
{
  $number.= '1'. $number;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:48:05.107

利用

```
'/^([^1][0-9]+)$/' 
```

它应该可以解决问题！

# entity-framework - 具有实体框架的简单多租户 Web 应用程序的解决方案

> ID：11412626
> 
> 赞同：5
> 
> 时间：2012-07-10T11:45:12.693
> 
> 标签：entity-framework, multi-tenant

我正在开发一个多租户网络应用程序（堆栈：MVC 4 + Entity framework 4.3）。我的要求很简单：每个租户都有相同的 UI 和 CodeBase。

在我的数据库中，我有一些带有 TenantId 字段的表（而其他表没有）。

我已经建立了一个非常简单的通用存储库：

```
public class GenericRepository<TEntity> where TEntity : class
{
    internal Database.CRMEntities context;
    internal DbSet<TEntity> dbSet;
    internal int tenantId;

    public GenericRepository(Database.CRMEntities context)
    {
        this.context = context;
        this.dbSet = context.Set<TEntity>();
        this.tenantId = 1;
    } 
```

我想要“get”方法来过滤我的tenantId。我的插入、更新和删除方法也应该约束适当的 TenantId。

我的实体是自动生成的 POCO 类。

我考虑了这些解决方案：

1- GenericRepository 应该实现定义 TenantId 的“ITenant”接口。问题是某些实体没有 TenantId 属性。另外，我不太喜欢修改我用来生成 POCO 对象的 T4 模板以使它们实现我的接口

2- 反射（当然 EF 不能将其转换为 SQL 语句）

```
if (typeof(TEntity).GetProperty("TenantId") != null)
            query = query.Where(x => (int)   (x.GetType().GetProperty("TenantId").GetValue(x, null)) == tenantId); 
```

在我的情况下你会怎么做？如有必要，我愿意重新考虑我的架构。

谢谢，尼古拉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:55:31.810

您可以进行反射检查，然后手动创建 EF 可以理解的表达式树。

例如：

```
int tenantId = 5;

var tenantIdInfo = typeof(TEntity).GetProperty("TenantId");

if (tenantIdInfo != null)
{
    var entity = Expression.Parameter(typeof(TEntity), "it");

    var predicate = (Expression<Func<TEntity, bool>>)Expression.Lambda(
        Expression.Equal(
            Expression.MakeMemberAccess(entity, tenantIdInfo),
            Expression.Constant(tenantId, typeof(int))),
        entity);

    query = query.Where(predicate);
} 
```

# android - 来自编辑文本的数据

> ID：11412632
> 
> 赞同：0
> 
> 时间：2012-07-10T11:45:45.090
> 
> 标签：android, android-edittext

我正在获取如下编辑文本字段的数据：

```
 editfield1.setOnEditorActionListener(this); 
```

然后

```
 @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        InputMethodManager imm = (InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
        if (actionId == EditorInfo.IME_ACTION_DONE ||(event.equals(KeyEvent.KEYCODE_ENTER))||(event.equals(KeyEvent.KEYCODE_DPAD_CENTER))){
            imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
            String data= editfield1.getText().toString();
        }
    } 
```

这适用于某些 android 设备三星 2.2。因为要获得每个编辑字段，必须有一些关键事件。

但是如果我尝试在 micromax 4.0 中运行，则无法从所有编辑字段中获取数据。因为在这里我可以触摸每个编辑字段并写入值..所以没有关键事件。

我该如何解决这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:03:53.477

我想您想跟踪 TextView/EditText 中的每个更改，不是吗？您可以使用[addTextChangedListener](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)来跟踪更改。如果您需要，我将添加一个示例。

编辑：您可以实现某种包装器来处理多个文本视图：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        attachTextViewWatcher(R.id.text1);
        attachTextViewWatcher(R.id.text2);
        attachTextViewWatcher(R.id.text3);
        attachTextViewWatcher(R.id.text4);
        attachTextViewWatcher(R.id.text5);
        // tbc...
    }

    private void attachTextViewWatcher(int resId) {
        TextView tv = (TextView) findViewById(resId);
        tv.addTextChangedListener(new TextViewWatcher(tv));
    }

    private void onTextChanged(TextView v, CharSequence s, int start, int before, int count) {
        // TODO do your stuff
    }

    private class TextViewWatcher implements TextWatcher {

        private final TextView tv;

        public TextViewWatcher(TextView tv) {
            this.tv = tv;
        }

        @Override
        public void afterTextChanged(Editable s) {
            // ignore
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            // ignore
        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            MainActivity.this.onTextChanged(tv, s, start, before, count);
        }
    }
} 
```

# c# - 双问号 ('??') vs if 分配相同的 var

> ID：11412639
> 
> 赞同：37
> 
> 时间：2012-07-10T11:46:20.400
> 
> 标签：c#, compiler-optimization, null-coalescing-operator

参考以下[SE 答案](https://stackoverflow.com/a/446839/799379)。

写的时候

```
A = A ?? B; 
```

它与

```
if( null != A )
    A = A;
else
    A = B; 
```

这是否意味着

```
if( null == A ) A = B; 
```

会是首选，性能明智？

或者我可以假设当`??`符号中存在同一个对象时编译器会优化代码？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-10T11:49:37.757

不要担心性能，它可以忽略不计。

如果您对此感到好奇，请编写一些代码来测试使用`Stopwatch`并查看性能。我怀疑您需要进行几百万次迭代才能开始看到差异。

您也永远不能假设事物的实现，它们将来可能会发生变化-使您的假设无效。

我的假设是性能差异可能非常非常小。我个人会选择 null 合并运算符以提高可读性，它很好而且很简洁，并且很好地传达了这一点。我有时会这样做以进行延迟加载检查：

```
_lazyItem = _lazyItem ?? new LazyItem(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-13T07:18:58.223

尽管 for 的性能`??`可以忽略不计，但副作用有时可能不可忽略。考虑以下程序。

```
using System;
using System.Diagnostics;
using System.Threading;

namespace TestProject
{
    class Program
    {
        private string str = "xxxxxxxxxxxxxxx";
        public string Str
        {
            get
            {
                return str;
            }
            set
            {
                if (str != value)
                {
                    str = value;
                }
                // Do some work which take 1 second
                Thread.Sleep(1000);
            }
        }

        static void Main(string[] args)
        {
            var p = new Program();

            var iterations = 10;

            var sw = new Stopwatch();
            for (int i = 0; i < iterations; i++)
            {
                if (i == 1) sw.Start();
                if (p.Str == null)
                {
                    p.Str = "yyyy";
                }
            }
            sw.Stop();
            var first = sw.Elapsed;

            sw.Reset();
            for (int i = 0; i < iterations; i++)
            {
                if (i == 1) sw.Start();
                p.Str = p.Str ?? "yyyy";
            }
            sw.Stop();
            var second = sw.Elapsed;

            Console.WriteLine(first);
            Console.WriteLine(second);

            Console.Write("Ratio: ");
            Console.WriteLine(second.TotalMilliseconds / first.TotalMilliseconds);
            Console.ReadLine();
        }

    }
} 
```

在我的电脑上运行结果。

```
00:00:00.0000015
00:00:08.9995480
Ratio: 5999698.66666667 
```

因为使用 有一个额外的分配`??`，并且有时可能无法保证分配的性能。这可能会导致性能问题。

我宁愿使用`if( null == A ) A = B;`而不是`A = A ?? B;`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T11:50:57.033

我的建议是检查 IL（中间语言）并比较不同的结果。然后，您可以准确地看到每个归结为什么，并决定什么是更优化的。但正如亚当在他的评论中所说，你最有可能最好关注可读性/可维护性，而不是这么小的东西的性能。

编辑：您可以使用 Visual Studio 附带的 ILDASM.exe 查看 IL 并打开已编译的程序集。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-10T11:59:17.637

我刚刚在 C# 中尝试过这个 - 非常快，所以我的方法可能有错误。我使用以下代码并确定第二种方法比第一种方法花费了大约 1.75 倍。
*@Lockszmith*：在下面的编辑之后，比率是 1.115，有利于第一次实现

即使他们花费相同的时间，我个人也会使用内置的语言结构，因为它更清楚地向任何可能具有更多内置优化的未来编译器表达了您的意图。

*@Lockszmith*：我编辑了代码以反映评论中的建议

```
var A = new object();
var B = new object();

var iterations = 1000000000;

var sw = new Stopwatch();
for (int i = 0; i < iterations; i++)
{   
    if( i == 1 ) sw.Start();
    if (A == null)
    {
        A = B;
    }
}
sw.Stop();
var first = sw.Elapsed;

sw.Reset();
for (int i = 0; i < iterations; i++)
{
    if( i == 1 ) sw.Start();
    A = A ?? B;
}
sw.Stop();
var second = sw.Elapsed;

first.Dump();
second.Dump();

(first.TotalMilliseconds / second.TotalMilliseconds).Dump("Ratio"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-18T16:27:20.697

是，有一点不同。

使用`Visual Studio 2017 15.9.8`定位`.NET Framework 4.6.1`。考虑下面的示例。

```
static void Main(string[] args)
{
    // Make sure our null value is not optimized away by the compiler!
    var s = args.Length > 100 ? args[100] : null;
    var foo = string.Empty;
    var bar = string.Empty;

    foo = s ?? "foo";
    bar = s != null ? s : "baz";

    // Do not optimize away our stuff above!
    Console.WriteLine($"{foo} {bar}");
} 
```

使用`ILDasm`它变得很明显，编译器不会平等地对待这些语句。

**?? 运营商**：

```
IL_001c:  dup
IL_001d:  brtrue.s   IL_0025
IL_001f:  pop
IL_0020:  ldstr      "foo"
IL_0025:  ldloc.0 
```

**有条件的空检查**：

```
IL_0026:  brtrue.s   IL_002f
IL_0028:  ldstr      "baz"
IL_002d:  br.s       IL_0030
IL_002f:  ldloc.0 
```

显然，`??`运算符意味着堆栈值的重复（应该是`s`变量吧？）。我进行了一个简单的测试（多次），以了解两者中哪一个*更快*。在这台特定机器上`string`运行，我得到了这些平均数字：

```
?? operator took:           583 ms
null-check condition took: 1045 ms 
```

**基准示例代码：**

```
static void Main(string[] args)
{
    const int loopCount = 1000000000;
    var s = args.Length > 1 ? args[1] : null; // Compiler knows 's' can be null
    int sum = 0;

    var watch = new System.Diagnostics.Stopwatch();
    watch.Start();

    for (int i = 0; i < loopCount; i++)
    {
        sum += (s ?? "o").Length;
    }

    watch.Stop();

    Console.WriteLine($"?? operator took {watch.ElapsedMilliseconds} ms");

    sum = 0;

    watch.Restart();

    for (int i = 0; i < loopCount; i++)
    {
        sum += (s != null ? s : "o").Length;
    }

    watch.Stop();

    Console.WriteLine($"null-check condition took {watch.ElapsedMilliseconds} ms");
} 
```

**所以答案是肯定的，有区别。**

PS。StackOverflow 应该自动警告在同一个句子中提到“性能”和“可忽略不计”的帖子。只有原始发布者才能确定时间单位是否可以忽略不计。

# fastcgi - 通过 lighttpd 运行 fastcgi 服务器

> ID：11412644
> 
> 赞同：2
> 
> 时间：2012-07-10T11:46:36.527
> 
> 标签：fastcgi, lighttpd

我正在尝试为我的 fastcgi 二进制文件设置权限，该二进制文件是使用 lighttpd 网络服务器启动的。当 lighttpd 启动我的二进制文件时，lighttpd 访问权限将转移到我的二进制文件中。我需要以 root 权限运行我的二进制文件，以便它可以访问某些文件。我读到出于安全原因，不希望以 root 身份运行 lighttpd，所以我不愿意这样做。如果以与 lighttpd 相同的权限运行，我的 fastcgi 二进制文件无法读取/写入我的 arm 文件系统上的文件。

下面是我的 lighttpd.conf 文件中的一些配置

```
server.modules           = ( "mod_rewrite", "mod_redirect", "mod_access", "mod_fastcgi", "mod_proxy", "mod_accesslog" )
server.username          = "www"                                
server.groupname         = "www"                                
server.document-root     = "/srv/www/htdocs/"                    
server.errorlog          = "/var/log/lighttpd/error.log"        
server.upload-dirs       = ("/tmp")                             
server.max-request-size  = 40960                                  
server.network-backend   = "write"

fastcgi.server             = (                                            
                             ".php" =>                     
                             ("localhost" =>                       
                               (                           
                                 "socket" => "/var/run/lighttpd/php-fastcgi.socket",
                                 "max-procs" => 2,
                                 "bin-path" => "/usr/bin/php-cgi -c /etc"
                                )
                              ),   
                             ".cgi" =>                                                                                
                            ("localhost" =>                                
                              (                                  
                                "host" => "<hostAddress>",
                                "port" => 8088,                                                   
                                "min-procs" => 1,    
                                "max-procs" => 1,
                                "check-local" => "disable",
                                 "bin-path" => "/<pathToMyFastCGI_Binary>/"
                               ) )                        
                           ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:10:20.707

感谢您查看此问题。我现在通过运行我的 FCGI 二进制文件并将用户/组权限设置为“s”解决了我的问题，因此 lighttpd 将使用它自己的权限而不是 lighttpd 启动我的 FCGI 二进制文件。

谢谢。

# facebook - Facebook Graph API 公共数据

> ID：11412646
> 
> 赞同：1
> 
> 时间：2012-07-10T11:46:42.700
> 
> 标签：facebook, facebook-graph-api

有什么方法可以使用图形 api 在 facebook 中搜索所有公共 chechkins，或者签入不是可访问的公共数据类别的一部分？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:24:08.327

是的，您可以从他的 CHECKIN_ID 中读取有关签入的所有信息。您无法通过图形 api 获取所有可用的签到，您需要每个 CHECKIN_ID 才能获取每个签到的信息。

[在这里](http://developers.facebook.com/docs/reference/api/checkin/)阅读更多

还要考虑到，Facebook 已弃用 Checkin 对象，而是使用附加位置的 Post 对象

# macos - OS x 中的 Tary 弹出通知

> ID：11412647
> 
> 赞同：0
> 
> 时间：2012-07-10T11:46:44.483
> 
> 标签：macos, notifications, popup, growl

我需要在我的 OS x 应用程序中显示类似于 Skype 的弹出消息“A 上线”。当我对此进行研究时，我发现我们可以使用 Growl 来实现它。但是为此，每个使用我的应用程序的用户也需要安装 Growl 吗？

有什么办法可以制作一个独立的应用程序来显示通知？因为我们在安装 Skype 时没有安装 Growl 或任何其他软件，但它们仍然显示弹出通知。

我真的很困惑。请帮帮我！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:39:08.797

不，您的用户不需要 Growl。旧版本确实如此，但从 1.3 开始，引用[A Note to Developers](http://growl.info/notetodevelopers)：

> 不再需要咆哮本身来显示通知。1.3 SDK 允许应用程序在没有安装 Growl 的情况下生成 Growl 通知。这称为“Mist”，是 1.3 SDK 的新功能。因此，当允许您自定义通知时，Growl 成为 Growl 的“专业”版本，而“免费”版本是内置通知。

如果您下载并安装其中一个[应用程序插件](http://growl.info/documentation/appconfigs/)，而不安装 Growl 本身（邮件、iTunes 或任何仍会显示通知的东西），您可以看到此功能。您只是没有方便的工具来配置它们（或查看历史记录，或汇总您离开时发生的通知）。这正是您的应用程序将如何为没有 Growl 的用户工作的方式。

主要的[Growl 文档](http://growl.info/documentation.php)还没有完全更新，所以它是很多混乱的根源，学习所有细节有点复杂。

但简单的版本很简单：只需使用 Growl 框架显示通知，如果用户有 Growl，则使用 Growl，如果没有，则使用“Mist”。

# c++ - 为特定的 mfc dll 调用 AfxEnableMemoryLeakDump

> ID：11412650
> 
> 赞同：0
> 
> 时间：2012-07-10T11:47:03.537
> 
> 标签：c++, visual-studio-2010, mfc, afx

我们有一个 Visual Studio Unicode 应用程序，我们在其中使用一些外部 dll。在这个应用程序中加载了 mfc100ud.dll（注意 u，它代表 Unicode）。该应用程序还使用一些与 mfc100d.dll 链接的外部 dll（因此没有 Unicode）。

在我们的应用程序中，我想通过调用 AfxEnableMemoryLeakDump(FALSE) 来禁用作为 Afx 一部分的内存泄漏转储。当我调用这个函数时，我最终进入了 mfc100ud.dll，因为我们直接与这个 dll 链接。然而，稍后外部 dll 被加载，因此 mfc100d.dll 也被加载。当应用程序关闭时，mfc100d.dll 被卸载，并且由于没有为此 dll 调用 AfxEnableMemoryLeakDump，我们的 MemoryLeakDump 仍然发生。

为了解决这个问题，我尝试通过执行以下操作显式调用 dll 中的函数：

```
 PGNSI pGNSI = (PGNSI) GetProcAddress(GetModuleHandle(TEXT("mfc100d.dll")),
       "?AfxEnableMemoryLeakDump@@YGHH@Z"); // 64-bit
  if (pGNSI!=nullptr)
  {
    pGNSI(FALSE);
  }
  pGNSI = (PGNSI) GetProcAddress(GetModuleHandle(TEXT("mfc100d.dll")),
       "?AfxEnableMemoryLeakDump@@YAHH@Z"); // 32-bit
  if (pGNSI!=nullptr)
  {
    pGNSI(FALSE);
  } 
```

我使用 dumpbin.exe 来查找修饰的函数名称。

但这不起作用，因为 GetProcAddress 为 32 位和 64 位返回一个 nullptr。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:58:27.877

`AfxenableMemoryLeakDump`不是按名称导出的，而是按其序数值导出的。您可以通过`[NONAME]`显示的标记来判断这一点`dumpbin`。这是我得到的：

```
C:\Windows\System32>dumpbin /exports mfc100d.dll | grep AfxEnableMemoryLeakDump
      15902      003A20D0 [NONAME] ?AfxEnableMemoryLeakDump@@YGHH@Z (int __stdcall AfxEnableMemoryLeakDump(int)) 
```

第一个值`15902`是序数值。该[`GetProcAddress`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)文档解释说：

> lpProcName [in] 函数或变量名，或函数的序数值。如果该参数为序数值，则必须在低位字中；高位字必须为零。

所以试试

```
const WORD AfxEnableMemoryLeakDumpOrdinal = 15902;
GetProcAddress( GetModuleHandle( ... ), (LPCSTR)AfxEnableMemoryLeakDumpOrdinal ); 
```

# ruby-on-rails - Rails 嵌套模型表单

> ID：11412653
> 
> 赞同：0
> 
> 时间：2012-07-10T11:47:08.857
> 
> 标签：ruby-on-rails, ruby, form-for

目前我有三个模型：

```
Songs have many Setlists through Allocations
Setlists have many Songs through Allocations
Allocations belong to Setlists and belong to Songs 
```

我现在的表格如下：

```
 <%=f.label :date, "Set a date" %>
 <%=f.date_select :date%>

 <div>
  <%= render 'song' %> 
 </div>

 <%=f.submit "Create Setlist", class: "btn btn-large btn-primary" %> 
```

上面给出的歌曲部分是：

```
<div id="songSelection">
<table class= "table table-striped table-bordered">
        <thead>
            <th>Title</th>
            <th>Artist</th>
            <th>Add to Set</th>
        </thead>
            <tbody>
      <% @songs.each do |song| %>
        <tr>
           <%= nested_form_for(@setlist.allocations.build(song_id: song.id)) do |builder| %>
           <td><%= song.title %></td>
           <td><%= song.artist %></td>
           <td>
              <%= builder.submit "Add Song", class: "btn btn-small btn-primary" %>
            <% end %>
           </td>
        </tr>
      <% end %>
    </tbody>
</table>
</div> 
```

基本上我正在尝试通过分配将歌曲分配给曲目。目前它指出歌曲部分中的 f 没有定义。如果我摆脱它，则页面呈现正常但无法正常运行（即，每当我单击按钮添加歌曲时，它会重定向它会将更改保存到设置列表日期但不分配任何新分配）。任何帮助将非常感激。我意识到我可能错过了一些信息，因为我对此有些陌生，所以如果需要任何其他详细信息，请询问。

我试过使用 Ryan Bates 的嵌套表单 gem，但我无法让它工作。我认为这是因为它在尝试构建它时没有为分配分配歌曲 ID，但不确定我将它放在哪里/如何放入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:51:06.023

试试[https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)

# javascript - jQuery：确定容器中至少一个孩子是否可见的最快方法

> ID：11412654
> 
> 赞同：1
> 
> 时间：2012-07-10T11:47:12.203
> 
> 标签：javascript, jquery, performance, visible

确定容器中是否至少有一个孩子可见的最快方法`div`是`div`什么？

我一直在使用这个：

`if ($this.children('div:visible').length) {...`

但它很慢，因为它检查了所有的孩子（其中有很多）。

我猜最快的方法将在找到第一个可见元素后立即停止搜索，但最快的方法获胜:)

顺便提一句：

> 我的实际情况是一个主要容器，其中包含大约 100 个次要容器，每个次要容器最多包含 100 个元素。我想确定哪些次要容器至少有一个可见元素。底部的元素被各种类隐藏和显示。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:55:48.917

## 此页面上所有方法的 JSPerf

*   所有元素可见：http: [//jsperf.com/jquery-quickest-visible-check/3](http://jsperf.com/jquery-quickest-visible-check/3)
*   隐藏所有元素：http: [//jsperf.com/jquery-quickest-visible-check/2](http://jsperf.com/jquery-quickest-visible-check/2)
    建议的替代方法使用`.each()`and`.is(':visible')`是最慢的方法。在所有元素都可见的情况下， My/ [qwertymk](https://stackoverflow.com/a/11412765/938089)的方法比 OPs 解决方案更快。然而，当所有元素都被隐藏时，**原来的方法似乎是最优**的。

**编辑：**我原来的方法更快的原因是它使用`.find('>' + selector)`, where`.children()`必须使用（循环遍历所有子元素，并检查元素是否与选择器匹配）。

由于`div`是原生支持的选择器，并且测试用例不包含深度嵌套的元素，因此我的解决方案速度很快。但是在对其进行规范化之后，它看起来几乎等于 qwertymks 解决方案。这两种方案的 JSPerf 会显示他的方案稍微快一点，因为它少了一个函数调用。

此页面上的解决方案是通用的：下面的代码可以针对特定情况进行优化（例如选择器只是一个标签的事实）：http: [//jsfiddle.net/kFZJs/](http://jsfiddle.net/kFZJs/)

* * *

为了加快进度，拆分选择器，因为`:visible`不是原生的 CSS 选择器。

首选的解决方案应该使用尽可能少的 jQuery，因为所需的解决方案必须是高性能的。为此，请[检查`:visible`](https://stackoverflow.com/a/9638017/938089?non-jquery-equivalent-of-visible-in-javascript).

原始函数包含`jQuery.support.reliableHiddenOffsets`. 当您的孩子不是表格单元格（仅在 IE8- 中使用）时，可以安全地剥离这有利于性能。

现在，编写一个 jQuery 插件（它并不昂贵）：

```
 (function($) {
     $.fn.hasAtLeastOneVisibleChild = function(selector) {
         var $col = this.children(selector), i, elem;
         for (i=0; i<$col.length; i++) {
             var elem = $col[i];
             if (elem.offsetWidth !== 0 || elem.offsetHeight !== 0) {
                 return true;
             }
         }
         return false;
     };
 })(jQuery);
 // Usage:
 $this.hasAtLeastOneVisibleChild('div'); // True or false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T11:54:11.427

[一种方法是使用each()](http://api.jquery.com/jQuery.each/)遍历子项。但是，如果可见元素是最后一个元素，这将与您的代码一样慢:)

另一种选择是检查容器的高度。

```
if($('#container').height() > 0) { ... } 
```

如果孩子占用空间（高度），那么容器的高度也将 > 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:50:46.280

试试这个，使用 each 进行迭代并在匹配时返回 false 可能会减少迭代。

```
isAtleastVisible = false;
$this.children('div').each(function (){
    if($(this).is(':visible') == true)
    {
       isAtleastVisible = true;
       return false;  //This will break each loop at the first visible div
    }
});

if(isAtleastVisible)
   alert("atleast one is visible");
else
   alert("None is visible"); 
```

这将提高性能，它取决于可见 div 的第一次出现。如果是百分之一，则只需要一次迭代，如果是百分之一，则需要一百次迭代，并且不会有任何性能提升。

正如*@Rob W*在回答有关 is('visible') 的工作时解释的那样，该函数通过这些参数检查可见性。

1.  宽度和高度为零
2.  style.display 没有

假设通过设置 display = none 隐藏元素，您可以使用其中之一来提高性能。这个条件可以用 javascript 语句 .style.display == 'block' 替换 jQuery 方法 .is(':visible') == true

```
 isAtleastVisible = false;
    $this.children('div').each(function (){
        if(this.style.display == 'block')
        {
           isAtleastVisible = true;
           return false;  //This will break each loop at the first visible div
        }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T11:54:30.073

自己做：

```
var $container = $('#container'), $children = $container.children(), found = false;

for (var i = 0; i < $container.length; i++) {
    var elem = $children[i];
    if (!( width === 0 && height === 0 ) || (!jQuery.support.reliableHiddenOffsets && ((elem.style && elem.style.display) || jQuery.css( elem, "display" )) === "none")){
        found = true;
        break;
    }
} 
```

## [资源](https://github.com/jquery/jquery/blob/master/src/css.js#L582)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T11:52:16.343

```
var isVisible;
$(this.children('div')).each(function() {
    if ($(this).is(":visible")) {
        isVisible = true;
        return false;
    }
}); 
```

# opencv - 错误“无法填充临时阶段的训练数据集。” 在使用 OpenCV 的 traincascade 工具时

> ID：11412655
> 
> 赞同：11
> 
> 时间：2012-07-10T11:47:14.187
> 
> 标签：opencv

我正在使用 Windows 7 上的 vs2010 从源代码（OpenCV 2.4.0）构建 opencv_traincascade.exe 工具。我想训练 LBP 分类器，所以我使用带有以下参数的 opencv_traincascade.exe

> -data D:\OpenCV\Classifiers\lbpclassifier1\temp\data -vec D:\OpenCV\Classifiers\lbpclassifier1\temp\samples.vec -bg D:\OpenCV\Classifiers\lbpclassifier1\temp\negative\infofile.txt -numPos 40 -numNeg 40 -precalcIdxBufSize 500 -precalcValBufSize 500 -stageType BOOST -featureType LBP -w 24 -h 24

我得到的错误信息是：

```
PARAMETERS:
cascadeDirName: D:\OpenCV\Classifiers\lbpclassifier1\temp\data
vecFileName: D:\OpenCV\Classifiers\lbpclassifier1\temp\samples.vec
bgFileName: D:\OpenCV\Classifiers\lbpclassifier1\temp\negative\infofile.txt
numPos: 2
numNeg: 40
numStages: 20
precalcValBufSize[Mb] : 500
precalcIdxBufSize[Mb] : 500
stageType: BOOST
featureType: LBP
sampleWidth: 24
sampleHeight: 24
boostType: GAB
minHitRate: 0.995
maxFalseAlarmRate: 0.5
weightTrimRate: 0.95
maxDepth: 1
maxWeakCount: 100

===== TRAINING 0-stage =====
<BEGIN
POS count : consumed   2 : 2
Train dataset for temp stage can not be filled. Branch training terminated. 
```

之前有人问过这个问题：[使用 opencv_train 级联时出错](https://stackoverflow.com/questions/9973813/error-while-using-opencv-train-cascade) ，解决方案建议在那里。在这种情况下，使正样本和负样本的数量相等并没有帮助。

我认为该错误可能与此错误有关：[http](http://code.opencv.org/issues/1834) : //code.opencv.org/issues/1834 因此，我从该页面下载了最新版本的 imagestorage.cpp 并重建了 opencv_traincascades 工具。此外，.vec 文件中的样本总数为 45。因此，正如此[评论](http://code.opencv.org/issues/1834#note-8)中所建议的，我已将 numPos 参数更改为 2，这样我就不会用完 .vec 文件中的样本。.vec 文件中的样本数为 45。

任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-03-28T19:05:52.460

首先，对我来说，错误也出在 bg 文件上。我使用 Opencv 2.4.10.1。

当我在命令中指定 bg 文件的*绝对*路径时出现错误（如帖子的作者）。看起来作者在找出完整的负面图像路径方面做得非常非常糟糕。一种简单的解决方法是简单地 CD 到 .info 文件的目录（注意**-bg infofile.txt**）

```
cd D:\OpenCV\Classifiers\lbpclassifier1\temp\negative
train_cascade -data D:\OpenCV\Classifiers\lbpclassifier1\temp\data -vec D:\OpenCV\Classifiers\lbpclassifier1\temp\samples.vec -bg infofile.txt -numPos 40 -numNeg 40 -precalcIdxBufSize 500 -precalcValBufSize 500 -stageType BOOST -featureType LBP -w 24 -h 24 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T03:01:28.393

我也在学习如何使用 OpenCV 对象检测工具。

我注意到如果 bg 文件（在您的情况下为“D:\OpenCV\Classifiers\lbpclassifier1\temp\negative\infofile.txt”）格式错误或包含不存在文件的条目，则 opencv_traincascade 会产生错误。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-04T11:25:49.657

我希望结束这个问题。对于那些偶然发现这一点的人。我知道它老了。我调试了 traincascade 并发现，在某些时候以下行：

```
src = imread( imgFilenames[last++], CV_LOAD_IMAGE_GRAYSCALE ); 
```

返回一个空垫。这一行应该读取背景图像。

如果您将 traincascade.cpp 构建为调试并使用 opencv 的发布库和 dll，则会出现此错误。（反之亦然。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-16T14:28:46.470

我有这个类似的问题，它给出了错误：

```
POS count : consumed   50 : 50
Train dataset for temp stage can not be filled. Branch training terminated. 
```

问题是，我的 bg.txt 是在 Windows 系统中使用 \r 生成的。当我尝试在 Ubuntu 中使用 opencv_traincascade 时，它​​会将 '\r' 读入文件列表的字符串中，因此在 中`CvCascadeImageReader::NegReader::nextImg()`，该行`src = imread(imgFilenames[last++], 0);`（如 xeed 所述）不起作用。

我的解决方法是在之前`str.erase(std::remove(str.begin(), str.end(), '\r'), str.end());`添加`imgFilenames.push_back(dirname + str);``imagestorage.cpp`

如果有人还在挣扎，我希望这会有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-17T12:40:20.387

`opencv_traincascade`正在尝试读取当前文件夹中的负文件夹图像。因此，您必须将其传输`opencv_traincascade.exe`到`negative/`图像文件夹中。

例如：

```
- opencv_traincascade.exe -data C:\Users\home\Documents\Face_Detection\HaarTrain\cascades -vec C:\Users\home\Documents\Face_Detection\HaarTrain\vector\vector.vec -bg bg.txt -numPos 130 -numNeg 500 -numStages 10 -precalcValBufSize 1024 -precalcIdxBufSize 1024 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-11T05:33:11.550

我有同样的问题。对我来说，问题是我使用 PowerShell 创建了negatives.txt 文件，该文件将 BOM 写入文件。当 BOM 尝试读取文件并导致它找不到任何图像时，它会触发 opencv_traincascade 程序。我使用 Notepad++ 将文件转换为 UTF-8 并解决了这个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-07T17:12:56.683

我曾多次遇到此问题，最终是由于我生成的`.vec`文件为正图像指定的尺寸错误。

例如，我有 700 张 100×100 像素的正图像，我成功地`.vec`用它们生成了我的图像。所以我的文本文件看起来像这样：

```
/filepath/directory/image1.jpg 1 0 0 100 100
/filepath/directory/image2.jpg 1 0 0 100 100
… 
```

但是当我尝试训练我的级联 HAAR 文件时，图像太大了。所以我将它们调整为 50×50，并`.vec`用缩小的图像重新创建了我的（在命令行中指定新尺寸）。

据说`.vec`成功创建，但是当我尝试训练时，我得到了错误。一旦我用正确的尺寸重新创建了我的文本文件，重新创建了我的`.vec`文件，并尝试再次训练，错误就消失了。我遇到的另一个问题是底片文件中有错误，例如路径错误或其他问题；所有其他评论都对找出 -bg 文件可能存在的问题提出了很好的建议。希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-21T20:20:59.990

CentOS Linux 版本 7.4.1708（核心）

```
 opencv_traincascade -data haarcascadeHAAR 
-vec samples.vec -bg Bad.dat -numPos 1500 -numNeg 3000 
-numStages 35 -minHitRate 0.95 -maxFalseAlarmRate 0.5 
-mode ALL -w 20 -h 20 
-precalcValBufSize 2048 -precalcIdxBufSize 4096 
```

系统返回响应：临时阶段的训练数据集无法填充。分部培训终止。级联分类器无法训练。检查使用的训练参数。

这个问题出现在 OpenCV 2.4.6 和 3.1.0 中。下一个解决方案（就我而言）-我在 Windows 主机上创建文件 Bad.dat，当我在 unix 上复制此文件时，我将 b-slash 切换为斜杠（对于 Vi：%s/\//），但得到相同的结果。当我将 EOL 从 Win (CR LF) 更改为 Nix (LF) 时 - traincascade 成功启动。

```
 $ file Bad.dat
Bad.dat: ASCII text, with CRLF line terminators

$ dos2unix Bad.dat
dos2unix: converting file Bad.dat to Unix format ...

$ file Bad.dat
Bad.dat: ASCII text 
```

该过程运行良好的原因 - 检查你 Bad.dat（-bg 参数中的文件）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-14T11:05:39.830

我之前也有这个问题。但是在我减少参数 [maxFalseAlarmRate] 之后，就像设置小于 0.1 一样，它工作正常。希望这有一些帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-06T10:15:37.933

至于我（ubuntu16）是文件路径问题。下面是我的文件结构。

```
xy@xy:~/face_sample/face_csdn$ ll
total 7144
drwx------ 5 xy xy    4096 Jun  6 17:58 ./
drwxrwxr-x 3 xy xy    4096 Jun  5 19:03 ../
drwx------ 2 xy xy  376832 Jun  6 17:50 negdata/
drwx------ 2 xy xy  516096 Jun  6 17:11 posdata/
-rw-rw-r-- 1 xy xy 6408012 Jun  6 17:15 pos.vec
drwxrwxr-x 2 xy xy    4096 Jun  6 17:54 xml/ 
```

`posdata`是我的正图像目录，其中包含 pathpos.txt（图像绝对路径）

```
xy@xy:~/face_sample/face_csdn$ ll -th  posdata/ | head - 5
==> standard input <==
total 75M
drwx------ 5 xy xy 4.0K Jun  6 17:58 ../
drwx------ 2 xy xy 504K Jun  6 17:11 ./
-rw-rw-r-- 1 xy xy 1.1M Jun  6 17:11 pathpos.txt
-rw-rw-r-- 1 xy xy  938 Mar 24  2014 18540.jpg
-rw-rw-r-- 1 xy xy  919 Mar 24  2014 18541.jpg
-rw-rw-r-- 1 xy xy  922 Mar 24  2014 18542.jpg
-rw-rw-r-- 1 xy xy  931 Mar 24  2014 18543.jpg 
```

AO到`pathpos.txt`我使用图像的绝对路径

```
xy@xy:~/face_sample/face_csdn$ head -5 posdata/pathpos.txt 

/home/xy/face_sample/face_csdn/posdata/10000.jpg 1 0 0 20 20
/home/xy/face_sample/face_csdn/posdata/10001.jpg 1 0 0 20 20
/home/xy/face_sample/face_csdn/posdata/10002.jpg 1 0 0 20 20
/home/xy/face_sample/face_csdn/posdata/10003.jpg 1 0 0 20 20
/home/xy/face_sample/face_csdn/posdata/10004.jpg 1 0 0 20 20 
```

[![在此处输入图像描述](../Images/a8694a6f62e817f19597f5bf83517678.png)](https://i.stack.imgur.com/oAmH5.png)

回到父目录，看一下负片txt文件（负图路径）

[![在此处输入图像描述](../Images/d67306152f9fe3844ff50bded0381bfb.png)](https://i.stack.imgur.com/esENY.png)

然后坐火车：

[![在此处输入图像描述](../Images/358a3ba1b6a80446d37f858a23adcdd3.png)](https://i.stack.imgur.com/czLO8.png)

以上只是展示了如何使用 opencv_traincascade 进行训练。

我也遇到上述问题，主要是关于图像路径。

# php - Ceon SEO URl 给出了在 zen cart 中找不到的错误页面

> ID：11412656
> 
> 赞同：0
> 
> 时间：2012-07-10T11:47:19.487
> 
> 标签：php, .htaccess, zen-cart, zen

我已经安装了一个 zen cart 插件`"Ceon's SEO URL"`。

管理面板在安装中没有错误，但是当我单击产品名称时在站点上显示 404 错误。

我正在尝试遵循ceon插件的安装步骤，但我遇到了问题

```
8.Add the Rewrite Rule to the Webserver (Apache/IIS etc.) 
```

所以请帮助我。

我在这个路径上有这个 .htaccess 文件`htdocs\zencarttest\zencart`，我的 .htaccess 如下

```
## BEGIN CEON URI MAPPING REWRITE RULE

RewriteEngine On

# ONLY rewrite URIs beginning with /zencarttest/zencart/
RewriteCond %{REQUEST_URI} ^/zencarttest/zencart/ [NC]

# Don't rewrite any URIs ending with a file extension (ending with .[xxxxx])
RewriteCond %{REQUEST_URI} !\.[a-zA-Z]{2,5}$ [OR]
RewriteCond %{REQUEST_URI} \.(html)$ [NC]

# Don't rewrite any URIs for some specific file format extensions,
#   which are not covered by main file extension condition above
#   Uncomment the following line to apply this condition! (Remove the # at the start of the next line)
RewriteCond %{REQUEST_URI} !\.(3gp|3g2|h261|h263|mj2|mjp2|mp4v|mpg4|m1v|m2v|m4u|f4v|m4v|3dml)$ [NC]

# Don't rewrite admin directory
RewriteCond %{REQUEST_URI} !^/zencarttest/zencart/admin_test [NC]

# Don't rewrite editors directory
RewriteCond %{REQUEST_URI} !^/zencarttest/zencart/editors/ [NC]

# Handle all other URIs using Zen Cart (its index.php)
RewriteRule .* /zencarttest/zencart/index.php [QSA,L]

## END CEON URI MAPPING REWRITE RULE 
```

我哪里做错了？？

请帮我！提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:35:45.827

Did you write that .htaccess file yourself or you used the automatically generated .htaccess file? If you go to admin->Modules->Ceon URI Config, select Installation Check and click on the Check Installation link, you will get a generated .htaccess file which you need to place in your store's root (in your case htdocs\zencarttest\zencart). If you're still getting a 404, try removing the slash here:

```
# Handle all other URIs using Zen Cart (its index.php)
RewriteRule .* /zencarttest/zencart/index.php [QSA,L] 
```

so you get:

```
# Handle all other URIs using Zen Cart (its index.php)
RewriteRule .* zencarttest/zencart/index.php [QSA,L] 
```

Also, make sure your server has mod_rewrite installed (I've seen some that didn't have it).

# tfs - 如何在 TFS 中以最大化模式打开文件比较版本窗口？

> ID：11412668
> 
> 赞同：4
> 
> 时间：2012-07-10T11:48:08.963
> 
> 标签：tfs, tfs-2010

我正在使用 TFS 2010 和 Visual Studio 2010

当我比较文件的本地版本和最新版本时，窗口会以小尺寸打开，因此每次我都想最大化模式。

所以谁能告诉我有什么设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:08:32.207

标准比较工具还有其他一些替代方法可以为您提供更多选择。

这是一篇关于将 diff/merge 工具更改为 winmerge 的好帖子。 [http://blog.paulbouwer.com/2010/01/31/replace-diffmerge-tool-in-visual-studio-team-system-with-winmerge/](http://blog.paulbouwer.com/2010/01/31/replace-diffmerge-tool-in-visual-studio-team-system-with-winmerge/)

这是另一个替代 diff/merge 工具的工具 [http://visualstudiogallery.msdn.microsoft.com/dace3633-0b51-4629-85d4-c59cdce5bb3b/](http://visualstudiogallery.msdn.microsoft.com/dace3633-0b51-4629-85d4-c59cdce5bb3b/)

最后，Visual Studio 2012 中的比较/差异体验已经完全重写，现在是一个带有智能感知的文档窗口。最重要的是，您可以在 Visual Studio 2012 中打开 Visual Studio 2010 (sp1) 项目，而无需转换解决方案/项目。

# android - 为什么在我的 android 应用程序中创建 TelnetClient 时出现错误？

> ID：11412680
> 
> 赞同：1
> 
> 时间：2012-07-10T11:48:39.180
> 
> 标签：android, telnet

我正在使用 eclipse Juno
并且正在为 android 2.3.3 api level 10 开发

我正在尝试在 android 应用程序中创建 TelnetClient 以将命令发送到 telnet 服务器。出现错误后，我将代码简化为无济于事。

我的 Main.java

```
package com.vision.hometest;

import org.apache.commons.net.telnet.TelnetClient;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Main extends Activity implements OnClickListener{
Button b;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        b = (Button) findViewById(R.id.b);
        b.setOnClickListener(this);
 }

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    TelnetClient tc = new TelnetClient();

}

} 
```

和 main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/b"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:text="Button" />

</RelativeLayout> 
```

我已添加权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

在清单中

我已经下载了 commons-net-3.1-bin.zip 二进制文件并将 commons-neet-3.1.jar 文件添加到 android 项目构建路径中。

但是，当我在扩展它时添加了罐子时，它说

```
Source attachment:(None)
Javadoc Location:(None)
Native libary location:(None)
Access rules :(No restrictions) 
```

这些不应该说吗？

然后我编译项目并在模拟器上运行，当按下按钮时，应用程序强制关闭。

这是日志猫

```
07-10 11:18:18.137: E/dalvikvm(618): Could not find class'org.apache.commons.net.telnet.TelnetClient', referenced from method com.vision.hometest.Main.onClick
07-10 11:18:18.169: W/dalvikvm(618): VFY: unable to resolve new-instance 490 (Lorg/apache/commons/net/telnet/TelnetClient;) in Lcom/vision/hometest/Main;
07-10 11:18:18.169: D/dalvikvm(618): VFY: replacing opcode 0x22 at 0x0000
07-10 11:18:18.169: D/dalvikvm(618): VFY: dead code 0x0002-0005 in Lcom/vision/hometest/Main;.onClick (Landroid/view/View;)V
07-10 11:20:19.556: D/AndroidRuntime(618): Shutting down VM
07-10 11:20:19.556: W/dalvikvm(618): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-10 11:20:19.576: E/AndroidRuntime(618): FATAL EXCEPTION: main
07-10 11:20:19.576: E/AndroidRuntime(618): java.lang.NoClassDefFoundError: org.apache.commons.net.telnet.TelnetClient
07-10 11:20:19.576: E/AndroidRuntime(618):  at com.vision.hometest.Main.onClick(Main.java:28)
07-10 11:20:19.576: E/AndroidRuntime(618):  at android.view.View.performClick(View.java:2485)
07-10 11:20:19.576: E/AndroidRuntime(618):  at android.view.View$PerformClick.run(View.java:9080)
07-10 11:20:19.576: E/AndroidRuntime(618):  at android.os.Handler.handleCallback(Handler.java:587)
07-10 11:20:19.576: E/AndroidRuntime(618):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-10 11:20:19.576: E/AndroidRuntime(618):  at android.os.Looper.loop(Looper.java:123)
07-10 11:20:19.576: E/AndroidRuntime(618):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-10 11:20:19.576: E/AndroidRuntime(618):  at java.lang.reflect.Method.invokeNative(Native Method)
07-10 11:20:19.576: E/AndroidRuntime(618):  at java.lang.reflect.Method.invoke(Method.java:507)
07-10 11:20:19.576: E/AndroidRuntime(618):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-10 11:20:19.576: E/AndroidRuntime(618):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-10 11:20:19.576: E/AndroidRuntime(618):  at dalvik.system.NativeStart.main(Native Method)
07-10 11:20:22.036: I/Process(618): Sending signal. PID: 618 SIG: 9 
```

*   最后

    当我将程序创建为普通的 java 应用程序时，它可以完美运行。

我有没有做正确的事情，或者我错过了一些事情。如果有人可以帮助我，请提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:01:49.457

您没有在构建路径中包含 Apache Commons Net 库。您需要通过从[http://commons.apache.org/net/download_net.cgi](http://commons.apache.org/net/download_net.cgi)下载库来包含库，然后在 Eclipse 中右键单击您的项目，构建路径 -> 配置构建路径，然后单击“库”选项卡，然后单击“添加外部 JAR”，然后导航到您下载的 commons-net 的 jar 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:59:38.683

几周前我创建了几乎相同的代码并且遇到了同样的问题。创建“TelnetClient tc = new TelnetClient();”时，Android 只会崩溃 目的。我也发现它在 Java 中完美运行，但在 Android 上它立即崩溃。

显然，Apache Commons telnet 存在某种问题。我从未见过有人成功使用 Apache Commons telnet 库从 android 连接到 telnet。它根本行不通。

# android - 空 NFC 标签属于哪种 Intent 类型？

> ID：11412683
> 
> 赞同：3
> 
> 时间：2012-07-10T11:48:58.930
> 
> 标签：android, android-intent, nfc

我无法匹配`Intent`用于空 NFC 标签的过滤器。我能够检测带有 NDEF 数据的标签。但是当我点击一个空的 NFC 标签时，什么也没有发生。

下面是我的过滤器部分`AndroidManifest.xml`

```
<intent-filter>
    <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:mimeType="text/plain" />
</intent-filter>
<intent-filter>
    <action android:name="android.nfc.action.TECH_DISCOVERED"/>
</intent-filter>
<intent-filter>
    <action android:name="android.nfc.action.TAG_DISCOVERED"/>
</intent-filter>
<meta-data android:name="android.nfc.action.TECH_DISCOVERED"
    android:resource="@xml/nfc_tech_filter" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:20:53.900

我发现在我的 nfc 技术过滤器列表中执行以下操作：

```
<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
    <tech-list>
        <tech>android.nfc.tech.IsoDep</tech>
        <tech>android.nfc.tech.NfcA</tech>
        <tech>android.nfc.tech.NfcB</tech>
        <tech>android.nfc.tech.NfcF</tech>
        <tech>android.nfc.tech.NfcV</tech>
        <tech>android.nfc.tech.Ndef</tech>
        <tech>android.nfc.tech.NdefFormatable</tech>
        <tech>android.nfc.tech.MifareClassic</tech>
        <tech>android.nfc.tech.MifareUltralight</tech>
    </tech-list>
</resources> 
```

与我的任何标签都不匹配，因为它们被评估为逻辑 AND。为了让我的应用程序匹配我的 NFC 标签，我刚刚为我的标签创建了一个特定的标签技术列表，如下所示：

```
<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
    <tech-list>
        <tech>android.nfc.tech.NfcA</tech>
        <tech>android.nfc.tech.Ndef</tech>
        <tech>android.nfc.tech.MifareUltralight</tech>
    </tech-list>
    <tech-list>
        <tech>android.nfc.tech.NfcA</tech>        
    </tech-list>
    <tech-list>
        <tech>android.nfc.tech.Ndef</tech>
    </tech-list>
    <tech-list>
        <tech>android.nfc.tech.MifareUltralight</tech>
    </tech-list>
</resources> 
```

这会将标签匹配为`(NfcA AND Ndef AND MifareUltralight) OR NfcA OR Ndef OR MifareUltralight`. 希望这可以帮助目前遇到此问题的任何人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T21:23:32.510

您应该添加`<category android:name="android.intent.category.DEFAULT"/>`到 TECH_DISOVERED（和 TAG_DISCOVERED）过滤器。否则将不匹配。

# c# - ANTLR 3.4，c#找不到类型或命名空间名称“GrammarRule”

> ID：11412684
> 
> 赞同：1
> 
> 时间：2012-07-10T11:49:03.503
> 
> 标签：c#, antlr

而已。我有正确的语法文件（或者我可以从 ANTLR 站点举个例子），在代码生成之后，我在我的 Visual Studio 2010 中得到了这个。

运行时已在引用中： - antlr.runtime.dll - Antlr3.Runtime.dll - Antlr3.Utility - StringTemplate

任何解决方法，或者，也许，想法？

*   ANTLR 3.4（语言 = CSharp2）
*   C# 4.0

# c# - 如何通过后面的代码创建 ComponentResourceKey？

> ID：11412686
> 
> 赞同：1
> 
> 时间：2012-07-10T11:49:13.237
> 
> 标签：c#, .net, wpf, xaml

我如何通过后面的代码编写下面的代码。

```
<Style x:Key="{ComponentResourceKey {x:Type igDP:XamDataGrid}, GrayForegroundStyle}">
    <Setter Property="TextBlock.Foreground" Value="#FF333333" />
</Style> 
```

这就是我所做的。

```
void ApplyRecordAreaStyle()
{
    Style recordstyle = new Style(typeof(DataRecordCellArea));

    recordstyle.Setters.Add(new Setter(DataRecordCellArea.BackgroundAlternateProperty, SelectedBackground));
    recordstyle.Setters.Add(new Setter(DataRecordCellArea.ForegroundAlternateStyleProperty, ????????));

    xamGrid.FieldLayoutSettings.DataRecordCellAreaStyle = recordstyle;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-09T06:42:03.797

替代属性的值是画笔。

例如：

```
recordstyle.Setters.Add(new Setter(DataRecordCellArea.ForegroundAlternateStyleProperty, Brushes.Red)); 
```

任何刷子都是可能的。您不仅可以使用我的示例中所示的实心画笔，还可以使用渐变画笔。

# java - Android sqlite 异常。无法实例化活动

> ID：11412690
> 
> 赞同：0
> 
> 时间：2012-07-10T11:49:29.847
> 
> 标签：java, android, sqlite

当我在我的 Android 应用程序中运行一个带有实例化 dbs 类的活动时，如下所示：

```
private final DbOpenHelper dbOpen = new DbOpenHelper(MainMonitor.this);
private final SQLiteDatabase db = dbOpen.getWritableDatabase();
private final ContentValues cv = new ContentValues(); 
```

它例外：

```
 07-10 15:33:31.581: E/AndroidRuntime(1142): FATAL EXCEPTION: main
07-10 15:33:31.581: E/AndroidRuntime(1142): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.android.analizer/com.android.analyzer.MainMonitor}: java.lang.NullPointerException
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1879)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.os.Looper.loop(Looper.java:137)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.app.ActivityThread.main(ActivityThread.java:4340)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at java.lang.reflect.Method.invokeNative(Native Method)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at java.lang.reflect.Method.invoke(Method.java:511)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at dalvik.system.NativeStart.main(Native Method)
07-10 15:33:31.581: E/AndroidRuntime(1142): Caused by: java.lang.NullPointerException
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at com.android.analyzer.MainMonitor.<init>(MainMonitor.java:40)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at java.lang.Class.newInstanceImpl(Native Method)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at java.lang.Class.newInstance(Class.java:1319)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
07-10 15:33:31.581: E/AndroidRuntime(1142):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1870)
07-10 15:33:31.581: E/AndroidRuntime(1142):     ... 11 more 
```

DbOpenHelper 看起来像这样：

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DbOpenHelper extends SQLiteOpenHelper {

    private static final String DB_NAME = "analyzer";
    private static final int DB_VERSION = 1;

    public static final String TABLE_NAME = "network";
    public static final String ACTIVITY = "activity";

    public static final String CREATE_TABLE_NETWORK = "CREATE TABLE "+TABLE_NAME+"(" +
            "_id integer primary key autoincrement, activity integer default 1)"; 

//  DbOpenHelper openHelper = null;

    public DbOpenHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
//      openHelper = new DbOpenHelper(context);

    }

    public void onCreate(SQLiteDatabase sqliteDb) {
        sqliteDb.execSQL(CREATE_TABLE_NETWORK);
        sqliteDb.execSQL("INSERT INTO network(activity) VALUES(1)");
    }

    public void onUpgrade(SQLiteDatabase sqliteDb, int i, int i2) {

    }

//  @Override
//  public void close() {
//      if (openHelper!=null) openHelper.close();       
//  }

} 
```

问题解决了，但下一个问题出现了。我将 insert 方法放在 DbOpenHelper 类中，如下所示：

```
 public void onCreate(SQLiteDatabase sqliteDb) {
        sqliteDb.execSQL(CREATE_TABLE_NETWORK);
//      sqliteDb.execSQL("INSERT INTO network(activity) VALUES(1)");
        ContentValues cv = new ContentValues();
        cv.put(ACTIVITY_FIELD, 1);
        sqliteDb.insert(DbOpenHelper.TABLE_NAME, null, cv);
    } 
```

在活动中，我试图以这种方式更新表：

```
 cv.put(DbOpenHelper.ACTIVITY_FIELD, 0);
//                  db.insert(DbOpenHelper.TABLE_NAME, null, cv);
                    db.update(DbOpenHelper.TABLE_NAME, cv, null, null);

An Exception is:
07-11 15:02:47.341: E/AndroidRuntime(933): FATAL EXCEPTION: main
07-11 15:02:47.341: E/AndroidRuntime(933): java.lang.NullPointerException
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.database.sqlite.SQLiteStatement.releaseAndUnlock(SQLiteStatement.java:290)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:96)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.database.sqlite.SQLiteDatabase.updateWithOnConflict(SQLiteDatabase.java:1810)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.database.sqlite.SQLiteDatabase.update(SQLiteDatabase.java:1761)
07-11 15:02:47.341: E/AndroidRuntime(933):  at com.android.analyzer.MainMonitor$2.onCheckedChanged(MainMonitor.java:99)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.widget.CompoundButton.setChecked(CompoundButton.java:125)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.widget.Switch.setChecked(Switch.java:517)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.widget.Switch.animateThumbToCheckedState(Switch.java:508)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.widget.Switch.stopDrag(Switch.java:498)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.widget.Switch.onTouchEvent(Switch.java:458)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.View.dispatchTouchEvent(View.java:5486)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
07-11 15:02:47.341: E/AndroidRuntime(933):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1892)
07-11 15:02:47.341: E/AndroidRuntime(933):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
07-11 15:02:47.341: E/AndroidRuntime(933):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1840)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.View.dispatchPointerEvent(View.java:5662)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2863)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.os.Looper.loop(Looper.java:137)
07-11 15:02:47.341: E/AndroidRuntime(933):  at android.app.ActivityThread.main(ActivityThread.java:4340)
07-11 15:02:47.341: E/AndroidRuntime(933):  at java.lang.reflect.Method.invokeNative(Native Method)
07-11 15:02:47.341: E/AndroidRuntime(933):  at java.lang.reflect.Method.invoke(Method.java:511)
07-11 15:02:47.341: E/AndroidRuntime(933):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-11 15:02:47.341: E/AndroidRuntime(933):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-11 15:02:47.341: E/AndroidRuntime(933):  at dalvik.system.NativeStart.main(Native Method) 
```

我发现这条线很有帮助-

```
at com.android.analyzer.MainMonitor$2.onCheckedChanged(MainMonitor.java:99) 
```

似乎在 dbs 中没有创建表或/和行，这就是它无法自我更新的原因。这个令人敬畏的拖拽式 sqlite 有什么问题？=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:04:15.363

您可能在 onCreate 中收到空指针异常-我不了解 INSERT INTO 网络（活动）-肯定它只是 INSERT INTO 网络-您确实插入了*表名*

但这也不是您要进行插入的方式-使用此示例

```
db = this.getWriteableDatabase();
ContentValues insertValues = new ContentValues();
insertValues.put("Description", "Electricity");
insertValues.put("Amount", 500);
insertValues.put("Trans", 1);
insertValues.put("EntryDate", "04/06/2011");
db.insert("CashData", null, insertValues); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:05:22.003

首先，您可以在不插入的情况下进行检查。如果创建了数据库，那么您可以测试插入。检查数据文件夹，数据库是否创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:12:44.380

`Activity`仅在调用`onCreate`后创建。因此，当您调用 `private final DbOpenHelper dbOpen = new DbOpenHelper(MainMonitor.this);` 活动时仍未创建。从您的 db 选项中删除`final`修饰符，并在`onCreate`调用后以单独的方法对其进行初始化。

你应该这样做：

```
public class MainMonitor extends Activity {
private DbOpenHelper dbOpen;
private SQLiteDatabase db;
private ContentValues cv;

@Override
protected void onResume() {
    super.onResume();

    initDb();
}

private void initDb() {
    dbOpen = new DbOpenHelper(MainMonitor.this);
    db = dbOpen.getWritableDatabase();
    cv = new ContentValues();
}

//....your code 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T12:12:00.157

我相信这是给你带来麻烦的线路：

```
sqliteDb.execSQL("INSERT INTO network(activity) VALUES(1)"); 
```

尝试，

```
ContentValues v = new ContentValues();
v.put(ACTIVITY, 1);
sqliteDb.insert(TABLE_NAME, null, v); 
```

确保不要插入空`ContentValues`对象，否则将引发异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T12:34:14.733

你的错误在于这一行

```
sqliteDb.execSQL("INSERT INTO network(activity) VALUES(1)"); 
```

由于您试图引用表格中的`activity`列，因此您应该用引号将其括起来。应该是这样的

```
sqliteDb.execSQL("INSERT INTO network(\"activity\") VALUES(1)"); 
```

或者

```
sqliteDb.execSQL("INSERT INTO network(" + ACTIVITY + ") VALUES(1)"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T10:33:00.870

公共静态最终字符串活动=“活动”；

我认为您可以尝试使用其他名称更改 ACTIVITY 字段。db 对象是否为空。更改 DB_VERSION 值。

# python - 运行 python mrjob 字数统计示例时出错

> ID：11412692
> 
> 赞同：0
> 
> 时间：2012-07-10T11:49:39.730
> 
> 标签：python, mapreduce, emr, mrjob

[我正在尝试使用mrjob](https://github.com/Yelp/mrjob/)运行示例字数地图减少任务。我收到以下错误：

```
Traceback (most recent call last):
  File "mr.py", line 3, in <module>
    from mrjob.job import MRJob
  File "/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/site-packages/mrjob-0.4_dev-py2.7.egg/mrjob/job.py", line 39, in <module>
    from mrjob.launch import MRJobLauncher
  File "/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/site-packages/mrjob-0.4_dev-py2.7.egg/mrjob/launch.py", line 32, in <module>
    from mrjob.options import add_basic_opts
  File "/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/site-packages/mrjob-0.4_dev-py2.7.egg/mrjob/options.py", line 22, in <module>
    from mrjob.runner import CLEANUP_CHOICES
  File "/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/site-packages/mrjob-0.4_dev-py2.7.egg/mrjob/runner.py", line 49, in <module>
    from mrjob.fs.local import LocalFilesystem
ImportError: No module named fs.local 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:22:14.953

我也有这个确切的错误。您是否像我最初那样直接从 Git 存储库中克隆了 mrjob？如果是这样，请尝试使用对我有用的[标记](https://github.com/Yelp/mrjob/tags)版本之一，例如[v0.3.4.1](https://github.com/Yelp/mrjob/zipball/v0.3.4.1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:33:48.160

我是维护者之一。下次遇到此类问题时，您应该在 Github 上开一张票。我们根本不看 Stack Overflow。

我们使用 master 分支进行开发。PyPI 中的标记版本和文件是稳定的。

请查看这张票并回答任何其他问题。[https://github.com/Yelp/mrjob/issues/513](https://github.com/Yelp/mrjob/issues/513)

# django - django-haystack 在 order_by 函数中按字母顺序排序

> ID：11412693
> 
> 赞同：1
> 
> 时间：2012-07-10T11:49:51.690
> 
> 标签：django, django-models, solr, sql-order-by, django-haystack

我在 django-haystack 中订购时遇到一些问题>.<

情况是：我有产品模型，产品模型有 company_name 属性，这个属性也包含在 solr-haystack 中。

```
product_1.company name = "Cba ltd"
product_2.company_name = "Abc ltd"
product_3.company_name = "bac ltd"
product_4.company_name = "aac ltd"

sqs = SearchQuerySet().models(Product).order_by("company_name") 
```

当我按公司名称搜索和订购时，结果是 [product_2, product_1, product_4, product_3]

系统先大写，大写完成后，继续小写。

如何在不检查大写或小写的情况下使其仅按字母顺序排列？结果应该是 [product_4, product_2, product_3, product_1]

感谢您在这种情况下帮助我。

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:03:17.987

您可以使用 extra 并将 'company_name' 传递给 lower()

这看起来像：

```
sqs = SearchQuerySet().models(Product).order_by("company_name").extra(select={'company_name': 'lower(company_name)'}).order_by('company_name') 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T03:40:28.647

按多值字段排序是没有意义的，分析的字符串是多值字段。

因此，使用用于排序的相同数据创建一个非分析字段：

```
class ProductIndex(indexes.SearchIndex, indexes.Indexable):
    company_name = indexes.EdgeNgramField(model_attr='company_name')
    company_name_raw = indexes.CharField(model_attr='company_name', indexed=False)

sqs = SearchQuerySet().models(Product).order_by('company_name_raw') 
```

有关更多信息，请参阅[文档](https://www.elastic.co/guide/en/elasticsearch/guide/master/multi-fields.html "文件")。

# ruby-on-rails - has_many through：为什么 3 个模型中的每一个都需要 2 个关联？

> ID：11412695
> 
> 赞同：0
> 
> 时间：2012-07-10T11:49:59.550
> 
> 标签：ruby-on-rails, has-many, has-many-through

**我想知道，为什么在使用 :through 时**，我总是必须在两个有问题的模型中指定 has_many :assignments 关联？这是干的吗？是否存在不需要指定它们的情况，或者它们不同的情况？谢谢你的解释。

```
class Programmer < ActiveRecord::Base
  has_many :projects, :through => :assignments
  has_many :assignments # Why that?
end

class Project < ActiveRecord::Base
  has_many :programmers, :through => :assignments
  has_many :assignments # Why that?
end

class Assignment < ActiveRecord::Base
  belongs_to :project
  belongs_to :programmer
end 
```

**更新**

似乎我说的还不够清楚**has_many :through**！所以对这一点给出的答案并不真正适合我的问题。再说一遍：

**为什么`has_many :assignments`我已经有 a 时总是需要 a `has_many :projects, :through => :assignments`？**Rails 不应该`has_many :assignments`自动添加自己吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:27:23.747

我认为理解以下内容很重要：

和之间存在[多对多](http://en.wikipedia.org/wiki/Many-to-many_(data_model))关系。为了解决这种关系，您添加了一个名为的[连接模型](http://en.wikipedia.org/wiki/Junction_table)。`Programmer``Project``Assignment`

实际上，该表`projects`没有链接到`programmers`，而是都连接到`assignments`了。

你可以有这样的东西：

```
class Programmer < ActiveRecord::Base
  has_many :assignments
end

class Project < ActiveRecord::Base
  has_many :assignments
end

class Assignment < ActiveRecord::Base
  belongs_to :project
  belongs_to :programmer
end 
```

但是，您不希望`assignments`每次要查找与程序员相关的所有项目时都访问该表。为了促进这种连接，您可以在`Programmer`和之间创建直接链接`Project`。所以，你可以这么说`a programmer has many projects through the table assignments`。

结果是您当前的设置。例如，如果没有此配置，您将无法做到。

```
#find a programmer
@programmer = Programmer(1)  
#find all projects related to this programmer
@projects = @programmer.projects 
```

在上面的示例中，您甚至不需要记住它们`assignments`之间有一个表。

看看这里： http: [//guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

我希望它有帮助...

**编辑**

我已经包含了一个图表，所以你可以想象我想要解释的内容。

和没有直接联系`Project`。`Programmer`因此，`has_many :projects, :through => :assignments`Rails 的一项功能可以帮助您进行思考。不，它不会取代`has_many :assignments`，这是与 table 的真正连接`assignments`。

此外，该`:through =>`功能也可以在其他情况下使用。

![在此处输入图像描述](../Images/c98c43a1462209a776bef8863741ef01.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:58:52.460

如果您希望能够从程序员和项目实例访问分配（并且它有有用的数据），那么是的，您必须在每个实例中包含该关联。

但是，这不是必需的 - 因此，如果您不需要访问分配并且它实际上只是一个连接表，那么将其排除在外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:54:38.090

有许多 x 到 x 线定义了它自己的关系。在您的情况下，它告诉程序员模型程序员有很多项目，并且可以通过查看分配模型来了解这种关系。但是，这并没有指定与分配模型本身的关系。因此，为什么第二行是必要的。

# android - Android：禁用文本视图链接

> ID：11412699
> 
> 赞同：2
> 
> 时间：2012-07-10T11:50:29.293
> 
> 标签：android, textview

我有一个包含电话号码的 TextView，例如“01.40.56.55.20”（法国号码）。

在这种情况下，Android 将 1.40.56.55 识别为 IP 地址并为其添加链接/下划线。

如何删除这个？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:59:33.410

将以下属性设置为`TextView`以将数字呈现为电话号码：

```
android:autoLink="phone" 
```

或者只是将上面的“电话”切换为“无”以保持清晰。

# c# - App_Data 文件夹中的图像未正确替换

> ID：11412701
> 
> 赞同：0
> 
> 时间：2012-07-10T11:50:30.040
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, app-data

好的，所以我有一个 Visual Studio 项目，用户上传的所有文件、图像等都放入 App_Data 文件夹中。在我允许用户替换图像之前，这工作得非常好。

我有一个非常具体的问题，当图像被替换时，因为图像是相同的文件名，所以图像与旧图像保持相同。这很好，这只是因为图像被缓存了。但是，您会期望当我删除缓存并重新加载页面时，会显示新图像。

即使正确的图像位于 App_Data 文件夹中，它也会显示损坏的图像图标。我觉得这很奇怪，所以我重建了项目并刷新了页面。然后，这带来了新的形象。

我的问题是，为什么这个设计需要重建才能正确刷新图像？图像不是从 App_Data 明确提供的：

```
<img src="@Html.ImageAssetUrl(asset.ImageAssetId)" alt="@asset.FileDescription" style="width: 100px;" />

    [OutputCache(Duration = 60 * 60 * 24 * 30, Location = OutputCacheLocation.Any)]
    public ActionResult Image(int assetId, string fileName, string extension, int? cropSizeId)
    {
        ImageAsset asset = imageAssetService.Single(assetId, fileName, extension, true);

        if (asset == null)
            return FileAssetNotFound("Image could not be found");

        string filePath = null;

        if (cropSizeId.HasValue)
        {
            if (asset.ImageCropSizeId.HasValue && asset.ImageCropSizeId.Value == cropSizeId.Value)
            {
                filePath = Server.MapPath(string.Format("~/App_Data/Files/Images/{0}-{1}.{2}", assetId, asset.ImageCropSizeId.Value, asset.Extension));
            }
            else
            {
                foreach (var crop in asset.ImageAssetCrops)
                {
                    if (crop.ImageCropSizeId == cropSizeId.Value)
                    {
                        filePath = Server.MapPath(string.Format("~/App_Data/Files/Images/{0}-{1}.{2}", assetId, crop.ImageCropSizeId, crop.Extension));
                        break;
                    }
                }
            }
        }
        else
        {
            filePath = Server.MapPath(string.Format("~/App_Data/Files/Images/{0}.{1}", assetId, asset.Extension));
        }

        // TODO: Show a better error message
        if (string.IsNullOrEmpty(filePath) || !System.IO.File.Exists(filePath))
            return FileAssetNotFound(string.Format("Image file {0} not found on disk", filePath));
        else
            return new FilePathResult(filePath, FileUtil.GetContentType(extension));
    } 
```

注意：我不是这样设计的，所以如果我可以保留保存在 App_Data -> Files -> Images -> Image 结构中的图像，那将是完美的。我知道他们不应该在那里！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:58:01.077

要始终显示最新图像，请在图像 url 的末尾添加时间戳

```
<img src="folder/image.jpg?ts=<%=DateTime.Now.Ticks%>" /> 
```

像这样图像不会被浏览器缓存，导致浏览器认为它是一个全新的图像，即使它是相同的图像或相同的图像名称

# lwuit - lwuit httprequesthandler 抛出 java.lang.Error：静态初始化程序：java/lang/NullPointerException

> ID：11412703
> 
> 赞同：0
> 
> 时间：2012-07-10T11:50:38.340
> 
> 标签：lwuit

我在 LWUIT 浏览器示例中使用 HttpRequestHandler。当我初始化 HttpRequestHandler 时，我得到 java.lang.Error: Static initializer: java.lang.NullPointerException。这是我在 startApp 中的代码。公共无效startApp（）{

```
Display.init(this);

try {
    InputStream imageStream= Home.class.getResourceAsStream("tipster.res");
    //String filesPathAndName = url.getPath();        
      Resources r = Resources.open(imageStream);
      UIManager.getInstance().setThemeProps(r.getTheme("Theme 2"));
    } catch (IOException ioe) {
        ioe.printStackTrace();
      // Do something here.
    }

 HttpRequestHandler handler = new HttpRequestHandler();
    HTMLComponent h = new HTMLComponent(handler);
    h.setPage("http://m.google.com");
    ffForm.addComponent(h); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:58:29.703

您必须先调用网络管理器的 start() 才能执行网络操作。

```
 NetworkManager.getInstance().start();
        Storage.init("LWUITtester"); 
```

# sql - 查找员工用户有权访问的最快方法是什么？

> ID：11412708
> 
> 赞同：5
> 
> 时间：2012-07-10T11:50:56.757
> 
> 标签：sql, oracle

我有一个包含一般员工信息的员工表。另一个包含用户信息的用户表。用户可以创建员工。

当用户创建员工时，用户将部门、产品、子产品和区域分配给员工。

用户自己可以访问特定的部门、产品、子产品和区域。

例如，用户 A 可以访问 Division D1、产品 P1（区域 = 亚洲、美洲）、P2（区域 = 亚洲）、P3（区域 = 亚洲、美洲）。

Division 是 Product 的父级。每个部门可以有许多产品。

当我说用户 A 可以访问产品 P1（区域 = 亚洲，美国）时，这意味着用户 A 可以添加产品 = P1 和区域 = 亚洲或美洲的员工。

他不能将员工添加到产品 P1 或任何其他产品本身的任何其他区域。

如果假设用户 A 在 db 中增加了 500 名员工，那么另一个用户 B 又增加了 500 名员工，依此类推。

如何编写有效的查询来获取我有权访问的员工？

请注意，可能会发生与我具有相同访问权限的另一个用户可以添加员工，我也应该能够看到这些员工。

下面是我拥有的数据库架构。

```
 --------------------------------------------------------
    --  DDL for Table BI_DIVISION
    --------------------------------------------------------

      CREATE TABLE "HEADCOUNT_BI"."BI_DIVISION" 
       (    "DIVISION_ID" NUMBER(*,0) NOT NULL 
        "DIVISION_NAME" VARCHAR2(4000) 
       ) ;

    --------------------------------------------------------
    --  DDL for Table BI_PRODUCT
    --------------------------------------------------------

      CREATE TABLE "HEADCOUNT_BI"."BI_PRODUCT" 
       (    "PRODUCT_ID" NUMBER(*,0) NOT NULL , 
        "PRODUCT_NAME" VARCHAR2(4000), 
        "DIVISION_ID" NUMBER(*,0) 
       ) ;

    --------------------------------------------------------
    --  DDL for Table BI_SUB_PRODUCT
    --------------------------------------------------------

      CREATE TABLE "HEADCOUNT_BI"."BI_SUB_PRODUCT" 
       (    "SUB_PRODUCT_ID" NUMBER(*,0) NOT NULL, 
        "SUB_PRODUCT_NAME" VARCHAR2(4000), 
        "PRODUCT_ID" NUMBER(*,0), 
       ) ;

    --------------------------------------------------------
    --  DDL for Table BI_REGION
    --------------------------------------------------------

      CREATE TABLE "HEADCOUNT_BI"."BI_REGION" 
       (    "REGION_ID" NUMBER(*,0) NOT NULL, 
        "REGION_NAME" VARCHAR2(4000) NOT NULL ENABLE 
       ) ;

    --------------------------------------------------------
    --  DDL for Table BI_EMPLOYEE
    --------------------------------------------------------

      CREATE TABLE "HEADCOUNT_BI"."BI_EMPLOYEE" 
       (    "EMP_ID" NUMBER(*,0) NOT NULL , 
        "DIVISION_ID" NUMBER(*,0), 
        "PRODUCT_ID" NUMBER(*,0), 
        "SUB_PRODUCT_ID" NUMBER(*,0), 
        "REGION_ID" NUMBER(*,0) ,
        "CONFIDENTIAL" VARCHAR2(1) DEFAULT 'Y' 
       );

    --------------------------------------------------------
    --  DDL for Table BI_USER
    --------------------------------------------------------

      CREATE TABLE "HEADCOUNT_BI"."BI_USER" 
       (    "USER_ID" NUMBER(*,0) NOT NULL, 
        "FIRSTNAME" VARCHAR2(4000), 
        "LASTNAME" VARCHAR2(4000) 
       ) ;

    --------------------------------------------------------
    --  DDL for Table BI_USER_ACCESS
    --------------------------------------------------------

      CREATE TABLE "HEADCOUNT_BI"."BI_USER_ACCESS" 
       (    "USER_ACCESS_ID" NUMBER(*,0) NOT NULL, 
        "USER_ID" NUMBER(*,0), 
        "DIVISION_ID" NUMBER(*,0), 
        "PRODUCT_ID" NUMBER(*,0), 
        "SUB_PRODUCT_ID" NUMBER(*,0), 
        "REGION_ID" NUMBER(*,0), 
        "ACCESS_LEVEL" NUMBER(*,0), 
        "CONFIDENTIAL" VARCHAR2(1) DEFAULT 'Y' 
       ) ;

    Insert into BI_DIVISION (DIVISION_ID,DIVISION_NAME) values (1,'DIVISION 1');
    Insert into BI_DIVISION (DIVISION_ID,DIVISION_NAME) values (2,'DIVISION 2');

    Insert into BI_PRODUCT (PRODUCT_NAME,DIVISION_ID,PRODUCT_ID) values ('PRODUCT 1',1,1);
    Insert into BI_PRODUCT (PRODUCT_NAME,DIVISION_ID,PRODUCT_ID) values ('PRODUCT 2',1,2);
    Insert into BI_PRODUCT (PRODUCT_NAME,DIVISION_ID,PRODUCT_ID) values ('PRODUCT 3',2,3);
    Insert into BI_PRODUCT (PRODUCT_NAME,DIVISION_ID,PRODUCT_ID) values ('PRODUCT 4',2,4);

    Insert into BI_SUB_PRODUCT (SUB_PRODUCT_ID,SUB_PRODUCT_NAME,PRODUCT_ID) values (1,'SUB PRODUCT 1', 1);
    Insert into BI_SUB_PRODUCT (SUB_PRODUCT_ID,SUB_PRODUCT_NAME,PRODUCT_ID) values (2,'SUB PRODUCT 2', 1);
    Insert into BI_SUB_PRODUCT (SUB_PRODUCT_ID,SUB_PRODUCT_NAME,PRODUCT_ID) values (3,'SUB PRODUCT 3', 2);
    Insert into BI_SUB_PRODUCT (SUB_PRODUCT_ID,SUB_PRODUCT_NAME,PRODUCT_ID) values (4,'SUB PRODUCT 4', 2);
    Insert into BI_SUB_PRODUCT (SUB_PRODUCT_ID,SUB_PRODUCT_NAME,PRODUCT_ID) values (5,'SUB PRODUCT 5', 3);

    Insert into BI_REGION (REGION_ID,REGION_NAME) values (1,'Americas');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (2,'Asia');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (3,'Germany');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (4,'Japan');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (5,'Pacific');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (6,'ROE');
    Insert into BI_REGION (REGION_ID,REGION_NAME) values (7,'United Kingdom');

    Insert into BI_USER (USER_ID,FIRSTNAME,LASTNAME) values (1,'Adam,'Smith);
    Insert into BI_USER (USER_ID,FIRSTNAME,LASTNAME) values (2,'Steve','Jones');

    -- user with user id = 1 has access to division 1 , product 1 , sub product 1 in regons americas, asia, germany with ACCESS_LEVEL = write access (2) and also access to confidential data 
    Insert into BI_USER_ACCESS (USER_ACCESS_ID,USER_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,ACCESS_LEVEL, CONFIDENTIAL) values (1,1,1,1,1,1,2,'Y');
    Insert into BI_USER_ACCESS (USER_ACCESS_ID,USER_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,ACCESS_LEVEL, CONFIDENTIAL) values (1,1,1,1,1,2,2,'Y');
    Insert into BI_USER_ACCESS (USER_ACCESS_ID,USER_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,ACCESS_LEVEL, CONFIDENTIAL) values (1,1,1,1,1,3,2,'Y');

    -- user with user id = 1 has access to division 1 , product 2 , sub product 4 in regons americas, asia, germany with ACCESS_LEVEL = write access (2) and also NO access to confidential data 
    Insert into BI_USER_ACCESS (USER_ACCESS_ID,USER_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,ACCESS_LEVEL, CONFIDENTIAL) values (1,1,1,2,4,1,2,'N');
    Insert into BI_USER_ACCESS (USER_ACCESS_ID,USER_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,ACCESS_LEVEL, CONFIDENTIAL) values (1,1,1,2,4,2,2,'N');
    Insert into BI_USER_ACCESS (USER_ACCESS_ID,USER_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,ACCESS_LEVEL, CONFIDENTIAL) values (1,1,1,2,4,3,2,'N');

    -- employees in division 1 , product 1, sub product 1 and region americas and not confi.
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (1,'1','1','1',1,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (2,'1','1','1',1,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (3,'1','1','1',2,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (4,'1','1','1',2,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (5,'1','1','1',7,'N');

    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (11,'1','1','2',1,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (12,'1','1','2',2,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (13,'1','1','2',3,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (14,'1','1','2',2,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (15,'1','1','2',3,'N');

    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (111,'2','3','5',1,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (112,'2','3','5',2,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (113,'2','3','5',3,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (114,'2','3','5',4,'N');
    Insert into BI_EMPLOYEE (EMP_ID,DIVISION_ID,PRODUCT_ID,SUB_PRODUCT_ID,REGION_ID,CONFIDENTIAL) values (115,'2','3','5',5,'N'); 
```

下面是我到目前为止写的查询，但我不确定这是否是最好的方法。

```
 SELECT 
  *
FROM 
  BI_EMPLOYEE e 
JOIN BI_USER_ACCESS uad On uad.DIVISION_ID = e.DIVISION_ID and uad.USER_ID = 137
JOIN BI_USER_ACCESS uap On uap.PRODUCT_ID = e.PRODUCT_ID and uap.USER_ID = 137
JOIN BI_USER_ACCESS uasp On uasp.SUB_PRODUCT_ID = e.SUB_PRODUCT_ID and uasp.USER_ID = 137
JOIN BI_USER_ACCESS uar On uar.REGION_ID = e.REGION_ID  and uar.SUB_PRODUCT_ID = e.SUB_PRODUCT_ID and uar.USER_ID = 137 
```

**编辑 1：**

我已经用 db 脚本和一些示例数据更新了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:39:34.587

您的问题专门询问获取用户可访问的员工列表的*最快方法是什么。*所以我会回答这个问题。

几年前，我曾经在一个类似的系统上工作过，我们可以非常快速地评估这些信息，这一点至关重要。原则是一样的，但我们有更多的标准（部门、产品、地区、国家、城市、单位、部门等）。

如果性能真的很关键，那么值得将查询结果具体化到一个表中，例如`ACL_CACHE(USER_ID, EMP_ID)`

然后让用户访问员工的查询变得微不足道：

```
SELECT EMP_ID
FROM ACL_CACHE
WHERE USER_ID = #### 
```

`ACL_CACHE`如果您想根据用户的访问级别限制用户可以看到的结果，您还可以将表加入其他查询。

这非常有效，并且在与大量员工和/或用户一起工作时带来了巨大的好处；我们通常使用约 500,000 条记录。

缺点显然是您需要使`ACL_CACHE`表格保持最新。这意味着其他一些事务可能会变慢一些。例如，添加新员工时，您还需要将记录添加到`ACL_CACHE`表中，以便所有可以看到新员工的用户。

根据我们的经验，此类事务的额外延迟对用户来说并不明显，并且值得为使所有只读事务的工作速度提高一个数量级而做出牺牲。

或者，`ACL_CACHE`如果您可以忍受长达 24 小时“旧”的数据，您可以在一次大规模更新中将表更新为夜间作业。由于您的表格被称为“HEADCOUNT_BI”，我猜如果您的人数报告在昨天晚上之前始终准确无误，这可能是可以接受的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T08:20:02.027

用户可以访问的员工列表将由如下查询给出：

```
SELECT * 
  FROM bi_employee e
 WHERE EXISTS (SELECT NULL
                 FROM bi_user_access ua
                WHERE ua.division_id = e.division_id
                  AND ua.product_id = e.product_id
                  AND ua.sub_product_id = e.sub_product_id
                  AND ua.region_id = e.region_id
                  AND (e.confidential = 'N' OR ua.confidential = 'Y')
                  AND ua.user_id = :user_id); 
```

使用您的数据样本，用户 1 可以访问员工 1 到 4。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:16:35.227

此查询将表连接`USER_ACCESS`到`EMPLOYEE`表。`USER_ACCESS`它在提供的(137) 上过滤表`USER_ID`，然后加入`EMPLOYEE`将只返回与表中存在的相同`DIVISION_ID`和`PRODUCT_ID`记录的员工`USER_ACCESS`。

```
select  e.*
from    BI_USER_ACCESS a
join    BI_EMPLOYEE e
on      a.DIVISION_ID = e.DIVISION_ID
and     a.PRODUCT_ID = e.PRODUCT_ID
where   a.USER_ID = 137 
```

它只选择`EMPLOYEE`数据（例如*），但如果需要，您可以（例如）将`USER_ACCESS`表连接到`USER`表并返回用户数据。但是只返回`EMPLOYEE`数据，基于 2 个字段`USER_ACCESS`，应该这样做。

这能得到你想要的吗？

# excel - 从 sharepoint 2010 保存到 excel

> ID：11412710
> 
> 赞同：0
> 
> 时间：2012-07-10T11:51:00.543
> 
> 标签：excel, gridview, sharepoint-2010, openfiledialog

这是我的问题。假设我在 sharepoint 站点中有一些 gridview。gridview 有 2 列（第一列是标题，第二列是描述）。我填满了我的gridview。现在我想做一些按钮“保存到excel”，它可以以同样的方式将gridview中的数据保存到excel（我的意思是，在excel文件中我想看到2列）。我该怎么做？

PS对不起我的英语不好......

# android - 在Android中生成两个日期之间的日期

> ID：11412713
> 
> 赞同：15
> 
> 时间：2012-07-10T11:51:04.303
> 
> 标签：android, datetime, date, android-date

如何在 Android 中获取两个日期之间的所有日期。

例如。我有两个字符串。

```
String first="2012-07-15";  
String second="2012-07-21"; 
```

我从这些字符串中转换并获取日期。

```
DateFormat df1 = new SimpleDateFormat("yyyy-MM-dd");                                    
DateFormat df2 = new SimpleDateFormat("MMM dd");
String mydate = df2.format(df1.parse(first)); 
```

这样我就可以从第一个和第二个字符串中获取日期。

现在我还显示这两个日期之间的所有日期。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-10T12:43:30.193

最好不要在日期计算中使用任何硬编码值。我们可以依靠java`Calendar`类方法来完成这个任务

看代码

```
private static List<Date> getDates(String dateString1, String dateString2)
{
    ArrayList<Date> dates = new ArrayList<Date>();
    DateFormat df1 = new SimpleDateFormat("yyyy-MM-dd");

    Date date1 = null;
    Date date2 = null;

    try {
        date1 = df1 .parse(dateString1);
        date2 = df1 .parse(dateString2);
    } catch (ParseException e) {
        e.printStackTrace();
    }

    Calendar cal1 = Calendar.getInstance();
    cal1.setTime(date1);

    Calendar cal2 = Calendar.getInstance();
    cal2.setTime(date2);

    while(!cal1.after(cal2))
    {
        dates.add(cal1.getTime());
        cal1.add(Calendar.DATE, 1);
    }
    return dates;
} 
```

并如下使用它

```
 List<Date> dates = getDates("2012-02-01", "2012-03-01");
    for(Date date:dates)
        System.out.println(date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:00:05.340

```
public class DummyWorks extends Activity 
{
static final long ONE_DAY = 24 * 60 * 60 * 1000L;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    getDatesBetween("03/23/2011","03/28/2011");
}

public static void getDatesBetween(String startDate,String endDate) {

    long  from=Date.parse(startDate);  

    long to=Date.parse(endDate);  

    int x=0;

    while(from <= to) {
          x=x+1;
          System.out.println ("Dates  : "+new Date(from));
          from += ONE_DAY;
    }
    System.out.println ("No of Dates  :"+ x);

 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-06T12:54:50.823

Kotlin 中的解决方案：它将返回两个日期之间的日期列表。

```
 fun getDatesBetween(dateString1:String, dateString2:String):List<String> {
        val dates = ArrayList<String>()
        val input = SimpleDateFormat("yyyy-MM-dd", Locale.getDefault())
        var date1:Date? = null
        var date2:Date? = null
        try
        {
            date1 = input.parse(dateString1)
            date2 = input.parse(dateString2)
        }
        catch (e:ParseException) {
            e.printStackTrace()
        }
        val cal1 = Calendar.getInstance()
        cal1.time = date1
        val cal2 = Calendar.getInstance()
        cal2.time = date2
        while (!cal1.after(cal2))
        {
            val output = SimpleDateFormat("yyyy-MM-dd", Locale.getDefault())
            dates.add(output.format(cal1.time))
            cal1.add(Calendar.DATE, 1)
        }
        return dates
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-03T09:38:21.747

## java.time 通过脱糖

考虑为您的日期工作使用现代 Java 日期和时间 API java.time。`LocalDate`是用于日期的类（没有时间）。我假设您想要所有日期，包括两个给定的日期。

```
 String first = "2012-07-15";
    String second = "2012-07-21";

    List<LocalDate> dates = LocalDate.parse(first)
            .datesUntil(LocalDate.parse(second).plusDays(1))
            .collect(Collectors.toList());

    System.out.println(dates); 
```

输出：

> [2012-07-15、2012-07-16、2012-07-17、2012-07-18、2012-07-19、2012-07-20、2012-07-21]

`LocalDate.datesUntil()`为我们提供了*不*包括指定结束日期的日期流，因此我们需要在其中添加一天以包含它。

我正在利用您的字符串采用 ISO 8601 格式并将`LocalDate`此格式解析为其默认格式的事实，即没有任何显式格式化程序。

## 或通过 ThreeTenABP

如果由于某种原因您使用的是 ThreeTenABP 库而不是脱糖，我相信该`datesUntil`方法不存在。在这种情况下，请改用循环。

```
 List<LocalDate> dates = new ArrayList<>();
    LocalDate currentDate = LocalDate.parse(first);
    LocalDate lastDate = LocalDate.parse(second);
    while (! currentDate.isAfter(lastDate )) {
        dates.add(currentDate);
        currentDate = currentDate.plusDays(1);
    } 
```

> [2012-07-15、2012-07-16、2012-07-17、2012-07-18、2012-07-19、2012-07-20、2012-07-21]

## 问题：java.time 不需要 Android API 级别 26 吗？

java.time 在较旧和较新的 Android 设备上都能很好地工作。它只需要至少**Java 6**。

*   在 Java 8 及更高版本以及更新的 Android 设备（从 API 级别 26 开始）中，现代 API 是内置的。
*   在非 Android Java 6 和 7 中获得 ThreeTen Backport，现代类的后向端口（ThreeTen 用于 JSR 310；请参阅底部的链接）。
*   在较旧的 Android 上，要么使用脱糖，要么使用 ThreeTen Backport 的 Android 版本。它被称为 ThreeTenABP。在后一种情况下，请确保您从`org.threeten.bp`子包中导入日期和时间类。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [Java 规范请求 (JSR) 310](https://jcp.org/en/jsr/detail?id=310)，`java.time`第一次描述的地方。
*   [ThreeTen Backport 项目](http://www.threeten.org/threetenbp/)，`java.time`Java 6 和 7 的反向移植（ThreeTen for JSR-310）。
*   [可通过脱糖获得 Java 8+ API](https://developer.android.com/studio/write/java8-support-table)
*   [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) , ThreeTen Backport 的 Android 版
*   [问题：如何在Android项目中使用ThreeTenABP](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)，有非常详尽的解释。
*   [维基百科文章：ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-03T07:08:28.610

```
 val currentDateCalendar = Calendar.getInstance()
        val mCurrentDate = getDateChanger(currentDateCalendar.time, "yyyy-MM-dd")
        currentDateCalendar.add(Calendar.MONTH, 1)
        val oneMonthNextCalendar = currentDateCalendar
        val mNextDate = getDateChanger(oneMonthNextCalendar.time, "yyyy-MM-dd")

        val mDates = datesBetween(
            mCurrentDate,
            mNextDate,
            "yyyy-MM-dd"
        )
        for (date in mDates)
            Log.i("DatesBetween",date)

 @SuppressLint("SimpleDateFormat")
    fun getDateChanger(mDate:Date,formatter: String): String {
        val dateFormat = SimpleDateFormat(formatter)
        return dateFormat.format(mDate)
    }

    @SuppressLint("SimpleDateFormat")
    fun datesBetween(startDate: String, endDate: String,formatter: String): List<String> {
        val dates = ArrayList<String>()
        val dateFormat: DateFormat = SimpleDateFormat(formatter)
        var sDate: Date? = null
        var eDate: Date? = null
        try {
            sDate = dateFormat.parse(startDate)
            eDate = dateFormat.parse(endDate)
        } catch (e: ParseException) {
            e.printStackTrace()
        }
        val sCalendarDate = Calendar.getInstance()
        sCalendarDate.time = sDate!!
        val eCalendarDate = Calendar.getInstance()
        eCalendarDate.time = eDate!!
        while (!sCalendarDate.after(eCalendarDate)) {
            dates.add(dateFormat.format(sCalendarDate.time))
            sCalendarDate.add(Calendar.DATE, 1)
        }
        return dates
    } 
```

# php - 如何将 PHP 变量传递给 Javascript？

> ID：11412715
> 
> 赞同：-4
> 
> 时间：2012-07-10T11:51:07.083
> 
> 标签：php, javascript, variables

我正在尝试加载使用 PHP 脚本上传的文件。我已经为上传文件的位置分配了一个变量，`$tra = basename( $_FILES['userfile']['name']);`并尝试将其作为 java 脚本的输入

```
<script type="text/javascript">
var a = <?php echo $tra; ?>;   
</script>
<script type="text/javascript" src="C:/xampp/htdocs/new/jmol/Jmol.js"></script> 
```

但它显示错误 **Parse error: syntax error, unexpected '<' in C:\xampp\htdocs\example.php 在第 30**行和第 30 行是

```
<script type="text/javascript"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:57:16.483

试试这个：

```
<script type="text/javascript">
var a = '<?php echo $tra; ?>';   
</script> 
```

您需要用 '' 括起来以将字符串分配给 javascript 变量。如果您尝试分配一个数字，它应该在没有引号的情况下工作，除非您的 PHP 中有错误。

# python - 如何使用python打开一些特定的文件

> ID：11412717
> 
> 赞同：2
> 
> 时间：2012-07-10T11:51:13.563
> 
> 标签：python, datetime, glob

我有几个名为`yyyymmdd-hhmmss.csv.gz`. 现在我想从凌晨 2 点开始打开每天的第一个文件，一个一个地做一些处理。

我的文件是：

```
...
20120706-015923.txt
20120706-015934.txt 
20120706-020008.txt
20120706-020030.txt
...
20120707-015934.txt
20120707-020005.txt
20120707-020015.txt
... 
```

所以我想先查看这个文件夹中的文件名，找出`20120706-020008.txt`当天凌晨 2 点开始的第一个文件，然后我有一个脚本来读取所有行并进行一些处理。我的问题是，如何告诉这个脚本找到这些文件？ `20120706-020008.txt`, `20120707-020015.txt`, `20120708-02`....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:52:28.023

您可以使用该[`glob`](http://docs.python.org/library/glob.html)模块来遍历文件：

```
import glob
for f in glob.glob('20120707-*'):
    # do something with f 
```

上面的代码意思是：遍历所有文件名以.开头的文件`20120707-`。该`*`符号与文件名的其余部分匹配。

您可以使用该[`datetime`](http://docs.python.org/library/datetime.html)模块在 Python 代码中计算文件的前缀（请参阅[文档](http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior)以了解您可以使用哪些值`strftime`）：

```
import datetime
today = datetime.date.today()
print today.strftime("%Y%m%d") 
```

结合代码变为：

```
import datetime    
import glob

today = datetime.date.today()
pattern = "{0}-*".format(today.strftime("%Y%m%d"))
for f in glob.glob(pattern):
    # do something with f 
```

您还可以通过在搜索模式中包含文件来强制`glob`只查找`.txt`文件：

```
pattern = "{0}-*.txt".format(today.strftime("%Y%m%d")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T12:07:15.203

`for loop`和的一些简单用法`dictionary`：

```
import glob
import datetime

dic={}

for f in glob.glob('*-*.txt'):
    d = datetime.datetime.strptime(f, '%Y%m%d-%H%M%S.txt')
    if d.hour < 2:
        continue
    if not d.day in dic or dic[d.day][0] > d.time:
        dic[d.day] = (d.time, f)

for t, f in dic.values():
    print f 
```

* * *

**给定以下文件：**

```
20120706-015923.txt
20120706-015934.txt 
20120706-020008.txt
20120706-020030.txt
20120707-015934.txt
20120707-020005.txt
20120707-020015.txt 
```

**输出将是：**

```
20120706-020008.txt
20120707-020005.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:20:07.973

您希望将文件按时间顺序*分组*到凌晨 2 点到凌晨 2 点之间的时间，对它们进行排序并取第一个：

```
import itertools as it
import glob
import datetime

def map_to_day_2am(fn):
    # parses filename, substracts two hours and returns the date
    return (datetime.strptime(fn, '%Y%m%d-%H%M%S.txt') -
            datetime.timedelta(hours=2)).date()

for day, daily_fns_iter in it.groupby(sorted(glob.glob('*.txt')),
                                      key=map_to_day_2am):
    print min(daily_fns_iter) 
```

# php - 将所有hrefs更改为工作目录

> ID：11412720
> 
> 赞同：0
> 
> 时间：2012-07-10T11:51:15.893
> 
> 标签：php, html, regex, hyperlink

我必须抓取一个网站并将所有页面保存为 HTML 并将其完全放在 DVD 上。我已经这样做了，但是现在所有的链接都以 开头`/`，并且抓住了我的根目录。我想将`href`所有文件（1500 页）的所有 s 更改为`href="./"`使其始终获取工作目录。

我见过关于`sed`in 的事情`bash`，但我不太了解如何动态抓取所有`href`s 并更改它们。

我怎样才能以有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:31:16.303

正如我在上面的评论中所说，根据您用来抓取网站的工具，您可以从检查它是否支持重写链接开始。将让你通过传递选项`wget`来做到这一点：`-k`

```
-k,  --convert-links      make links in downloaded HTML or CSS point to
                          local files. 
```

我不认为 Ugo Méda 的建议[`base`tag](http://www.w3.org/TR/html4/struct/links.html#h-12.4)会起作用，因为您的 URL 是绝对的，并且 base 标记只允许您为相对 URL 指定一个基础：

```
href = uri [CT]
This attribute specifies an absolute URI that acts as the base URI for resolving relative URIs. 
```

重写每一个`href`都是棘手的，因为很难知道你在做正确的事情——这取决于网站的结构。考虑以下示例：

/foo/bar.html：

```
<a href="/bar/baz.html">baz</a> 
```

如果您根据您的建议重写它，它将是：

```
<a href="./bar/baz.html">baz</a> 
```

但这不起作用，因为`/foo/bar/baz.html`当文件真正位于时，浏览器会将其解析为`[SOME DIR]/bar/baz.html`. 在这种情况下，你真的想要：

```
<a href="../bar/baz.html">baz</a> 
```

我想说的是，正确（重写）的 URL 始终取决于当前文件*的*位置和目标文件的位置。总之，我认为您最好的选择是使用`wget`或其他支持 URL 重写的工具，或者您将需要一些更高级的程序，而不仅仅是`sed`缺少正确转换链接所需的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:58:22.427

你试过使用[`base`标签](https://developer.mozilla.org/en/HTML/Element/base)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:06:17.743

尝试这样的事情，正则表达式可能不是 100%，所以在 1 或 2 个文件上测试它并相应地调整：

```
find . -name "*.html" -exec sed -i 's|href="[^"]/|href="./|g' '{}' \; 
```

# iphone - 线程 1: EXC_BAD_ACCESS (code=2,address=0x0) { inside switch case}

> ID：11412723
> 
> 赞同：3
> 
> 时间：2012-07-10T11:51:25.970
> 
> 标签：iphone, ios5

我在 storboard 中创建了一个带有两个视图控制器的导航控制器。第一个视图控制器有一个开始按钮，我从那里连接到第二个视图控制器。在 secondviewcontroller 中，我放置了一个分段控件，它包含三个带有标题的分段：Man、Truck、Movie。

在第二个视图控制器的实现文件中声明并定义了 setActiveModel 方法。此方法在段控制中具有三个段的切换情况。

最后在 IBaction 中用于段控制，称为 setActivemethod。

```
- (void) setActiveModel: (int) modelIndex
{
    switch ( modelIndex )
    {
        case 0:
            m_truckModel->setVisible(false); **---->>[ I get BAD_ACCESS error in this line which steps over in the debugger to viewdidload method to the line where I initialize setActiveModel to integer 0 ]    <<-----**
            m_metaioMan->setVisible(true);

            // stop the movie
            m_moviePlane->stopMovieTexture();
            m_moviePlane->setVisible(false);
            m_moviePlaneButton->setVisible(false);
            break;

        case 1:
            m_truckModel->setVisible(true);
            m_metaioMan->setVisible(false);           

            // stop the movie
            m_moviePlane->stopMovieTexture();
            m_moviePlane->setVisible(false);
            m_moviePlaneButton->setVisible(false);
            break;

        case 2:
            m_truckModel->setVisible(false);
            m_metaioMan->setVisible(false);

            m_moviePlane->setVisible(false);
            m_moviePlaneButton->setVisible(true);
            break;
    }
}

- (IBAction)onSegmentControlChanged:(UISegmentedControl*)sender
{
    [self setActiveModel:sender.selectedSegmentIndex];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:05:10.107

您可以使用 Instruments 找出代码中发生过度释放的位置。这是有关如何使用仪器的链接。 [消除消息到释放对象](http://developer.apple.com/library/ios/#recipes/instruments_help-memory-allocations-help/Eliminating_Messages_To_Deallocated_Objects/06_Eliminating_Messages_To_Deallocated_Objects.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T01:31:54.150

你有没有尝试过使用

```
[self.m_truckModel setVisible:NO]; 
```

它有点奇怪的编码方式。您还应该查看故事板。

# asp.net - 禁用的验证器在回发时丢失内容

> ID：11412724
> 
> 赞同：0
> 
> 时间：2012-07-10T11:51:30.783
> 
> 标签：asp.net, validation

**摘要：**
禁用的 ASP.NET 验证器在回发到服务器时会丢失其`InnerHTML`内容，然后在启用时（通过 JavaScript 在本地）在触发时显示`ErrorMessage`而不是原始的。`InnerHTML`

**更多详细信息：**
我处理一些复杂的表单，这些表单需要许多单独的控件可见/不可见，并且需要启用/禁用它们的验证器，具体取决于其他控件的选择。

所有验证器都包含一个“星号”图像，并通过中心`asp:ValidatorSummary`对象显示错误消息。例如（格式化为在这里查看，~~通常没有空格~~ **UPDATE**，这实际上是不正确的，请参阅下面的更新）...

```
<asp:RequiredFieldValidator runat="server" ID="valName" 
  ControlToValidate="txtName" ErrorMessage="Enter a name">
    <img runat="server" src="~/images/error.gif" />
</asp:RequiredFieldValidator> 
```

我没有在每个单独的验证器上使用`asp:CustomValidator`（每个验证器都需要本地 JavaScript 和服务器端处理程序），而是简单地将`.enabled = false`普通验证器设置为“父”控件的事件处理程序的一部分。（控件的状态也在初始页面加载时在服务器端设置，以及随后的回发页面加载。）

```
function showName(show){
  document.getElementById("txtName").style.display = (show ? "" : "none");
  document.getElementById("valName").enabled = show;
} 
```

问题在于禁用验证器的事件序列，回发表单......然后更改控件（通过用户交互）并启用验证器。如果验证器现在失败（在尝试回发时），则`<img`代码已经消失，因此它会显示`ErrorMessage`图像应该位于的文本。

`InnerHTML`只要验证器保持启用状态，它就会一直存在。

除了在每个页面加载时动态地将图像添加到每个验证器（我*真的*不想这样做），或者将它们全部转换为`CustomValidator`s（我*真的*不想这样做）之外，有没有人知道任何方式围绕这个？这是一个已知的错误（因为我找不到任何明显的东西）？

我在 Visual Studio 2010 下使用 ASP.NET 2.0 - 不幸的是，目前无法升级到更高版本的 ASP.NET。

 **我刚刚发现的**更新**`<img`是标签实际上前面有一个`&nbsp;`实体......如果我删除它，只`<img`在验证器中留下标签，它就可以工作。**

 **经过大量播放后，如果`InnerHTML`验证器仅包含纯文本（即没有 ASP 服务器端控件），那么`InnerHTML`无论验证器是否启用，它都会在回发中持续存在。

但是，如果`InnerHTML` **以**任何纯文本（空格除外）开头并且还具有任何服务器端控件，那么当验证器被禁用时，它不会在回发中正确保留。

我不明白为什么会这样，但是对于较小的格式问题，我当然可以应付...要么，要么我必须在`&nbsp;`里面放一个文字或标签...很多不同的`style`选择`<img`在那一个。

使用 ASP.NET 4.0 测试平台应用程序，我可以确认在该版本中发生了同样的事情。

如果在接下来的几天里没有人想添加任何其他内容，我将自己用上述内容“回答”这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:27:43.420

正如我在更新的问题中所述，问题的原因是由于`InnerHTML`验证器从服务器端控件开始，`&nbsp;`然后包含服务器端控件。

在我拥有它之前...

```
<asp:RequiredFieldValidator runat="server" ID="valName" ControlToValidate="txtName"
  ErrorMessage="Enter a name">&nbsp;<img runat="server" src="~/images/error.gif" 
  /></asp:RequiredFieldValidator> 
```

为了修复它，我只是删除了`&nbsp;`...

```
<asp:RequiredFieldValidator runat="server" ID="valName" ControlToValidate="txtName"
  ErrorMessage="Enter a name"><img runat="server" src="~/images/error.gif" 
  /></asp:RequiredFieldValidator> 
```

希望这将帮助其他人，以防万一他们发现自己处于困境中。

与往常一样，如果有人提出不同的答案/解决方案，我总是愿意重新考虑我的选择。**

# jquery - 同类 jQuery 选择之间的区别

> ID：11412729
> 
> 赞同：-1
> 
> 时间：2012-07-10T11:52:00.730
> 
> 标签：jquery, jquery-selectors

遵循不同的 jQuery 选择方式有什么区别。对我来说，它们似乎**是以相同的性能成本**做同样事情的不同方式：

```
$("#list li").hover(function () {
                $(this).addClass("red");
}, function (){
        $(this).removeClass("red");
}); 
```

带有大于符号：

```
$("#list > li").hover(function () {
                $(this).addClass("red");
}, function (){
        $(this).removeClass("red");
}); 
```

现在添加上下文：

```
$("li", $("#list")).hover(function () {
                $(this).addClass("red");
}, function (){
        $(this).removeClass("red");
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:56:06.843

*   `#list li`找到相同的元素集，但在现代浏览器中，它可以将整个选择器传递给浏览器的选择器引擎，因此它可能会**快得多**。

*   `#list > li`查找所有的**直接**子`li`元素，即，但不是。**`#list``<ul id="list"><li>``<div id="list"><ul><li>`**

***   `$("li", $("#list"))`创建一个 jQuery 对象，其中包含匹配的元素`#list`，然后创建一个新元素，其中包含`li`具有上下文的任何元素`#list`，即内部的所有`li`元素`#list`。它不是真正可读的，所以不要使用它。** 

 *** * *

还有其他方法：

*   `$('#list').children('li')`等于`$('#list > li')`
*   `$('#list').find('li')`等于`$('#list li')`

这两种情况都不能利用本地人的速度优势，`querySelectorAll`所以除了更具可读性之外，它们几乎和`$("li", $("#list"))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:55:39.230

它们是不同的：

`#list li`指任何作为 的后代的列表项`#list`。这与`$("li", $("#list"))`

`#list > li`指代任何列表元素，它是 . 的直接子元素（而不是孙子元素，等等）`#list`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:56:06.507

`"#list li"`and `$("li", $("#list"))`: #list 中的所有 li 元素，包括子、孙...

`"#list > li"`: 只有 li #list 的孩子。**

# javascript - 如何在 Joomla 的首页上进行 A/B 拆分测试？

> ID：11412731
> 
> 赞同：0
> 
> 时间：2012-07-10T11:52:10.163
> 
> 标签：javascript, joomla, google-analytics, ab-testing

我目前正在使用 Google 实验（以前：Google 网站优化器）对我在 Joomla 1.5 上运行的网站进行 A/B 测试。

问题是该设置仅适用于测试在 Joomla 中创建的特定文章/页面。即：我创建了一个变体页面，获取 URL 并针对 Google 实验中的原始 URL 进行测试（通过原始页面 HEAD 中的脚本自动将原始页面的布局切换到变体）。

我想做的是 A/B 头版。我创建了一个“新”首页，它有一个不同的 URL。但是，在使用索引页面时，如何添加 Experiments 脚本以仅显示在首页上，而不是网站的所有页面上？如果我将脚本添加到 index.php 文件中，它将显示在我网站的所有页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:51:03.887

我在使用 Joomla 的几个案例中都遇到过这个问题！有时有点烦人。您需要添加一个扩展，以便您可以选择在特定页面的标题部分添加代码。

尝试使用这些扩展：

[http://extensions.joomla.org/extensions/edition/custom-code-in-modules/11936](http://extensions.joomla.org/extensions/edition/custom-code-in-modules/11936)

[http://extensions.joomla.org/extensions/5139/details](http://extensions.joomla.org/extensions/5139/details)

我认为第一个对你来说会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:24:46.373

我设法在不使用插件的情况下解决了这个问题。不是说 PersianBoy67 发布的插件不起作用，但这对我有用。在 index.php 文件中，我添加了以下 php 代码：

```
<?php if( JRequest::getCmd('view') == 'frontpage') { ?> 
```

谷歌分析实验代码在这里

```
<?php } ?> 
```

如果 JRequest 在首页上，则该 JRequest 将回显“首页”（如果在文章上，则将回显“文章”），这意味着实验代码仅在首页上时才会显示。

# php - 将多个txt文件制作成1个文件而不复制文件内容

> ID：11412739
> 
> 赞同：-2
> 
> 时间：2012-07-10T11:52:49.947
> 
> 标签：php, mysql

我有很多文件是 txt 文档，我很难打开每个文件并清除我的 txt 文档的第 4 行并复制到全局文件是任何方式或任何 php 代码来打开文件夹中的每个文件并清除第 4 行和在全局文件中收集此文件........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:04:03.850

如果您不想使用 PHP 处理文件内容，您可以使用**[exec()](http://php.net/manual/en/function.exec.php)**并使用 Unix Command 来执行此操作。

```
cat partialFile.xml >> HUGE-FILE.xml 
```

# asp.net - 将 asp:Menu 直接渲染到 HtmlWriter

> ID：11412740
> 
> 赞同：0
> 
> 时间：2012-07-10T11:52:50.930
> 
> 标签：asp.net, asp.net-mvc, servercontrols

我正在将一些 MVC 页面添加到已经存在的 WebForms 项目中。我想继续对 WebForms 母版页/辅助方法进行尽可能少的更改。WebForms 项目使用 asp:Menu 构建菜单导航，因此我创建了一个 HTML 帮助器方法，该方法动态构建相同的菜单，将控件呈现给包装 StringBuilder 的 HtmlWriter，然后返回输出。

这是我的代码：

```
 <Extension()> _
    Public Function RenderMenu(helper As HtmlHelper) As MvcHtmlString
        'Build menu with asp .net standard menu control
        Dim menuSource As New System.Web.UI.WebControls.SiteMapDataSource() With {
            .ShowStartingNode = False,
            .SiteMapProvider = "MySiteMapProvider"
        }

        Dim menuBuilder As New System.Web.UI.WebControls.Menu() With {
            .CssClass = "menu",
            .IncludeStyleBlock = "false",
            .Orientation = System.Web.UI.WebControls.Orientation.Horizontal,
            .StaticSubMenuIndent = New System.Web.UI.WebControls.Unit(20),
            .RenderingMode = System.Web.UI.WebControls.MenuRenderingMode.List,
            .DataSource = menuSource
        }
        menuBuilder.DynamicHoverStyle.BorderStyle = System.Web.UI.WebControls.BorderStyle.Dotted

        Dim buffer As New StringBuilder()
        Dim writer As New System.Web.UI.HtmlTextWriter(New StringWriter(buffer))

        menuBuilder.RenderControl(writer)

        'Convert rendered html to an mvc html string (to avoid re-encoding)
        Return New MvcHtmlString(buffer.ToString())
    End Function 
```

问题是，我的 HtmlWriter 没有呈现任何内容！我已经在调试器上逐步完成并确认我的 menuSource 有数据。我也尝试过手动将项目添加到菜单中，但结果相同。

这可能是菜单控件的 Page 属性未设置的某种问题吗？如果是这样，有没有办法伪造它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:58:19.510

您没有调用`DataBind()`此代码示例中的菜单来绑定所有数据并创建菜单项。添加对 的调用`DataBind()`。

如果这仍然不起作用，请读入文件并以编程方式创建菜单项。

# android - 在 sencha touch 表单提交中加载掩码

> ID：11412743
> 
> 赞同：1
> 
> 时间：2012-07-10T11:52:53.047
> 
> 标签：android, extjs, cordova, sencha-touch, sencha-touch-2

我刚刚开始使用 sencha touch 2 构建应用程序我试图提交一个我现在所做的我想在提交表单时显示一个加载掩码。我怎么能点那个？我尝试了几种方法都没有成功。

```
Ext.define('AddressBook.view.Login', {
    extend: 'Ext.form.Panel',
    xtype: 'login',
    requires: ['Ext.form.*'],
    config: {
        xtype: 'formpanel',
        title: '<img src="resources/images/logo.png" width="180px"/>  ',
        iconCls: 'user',
        layout: 'vbox',
        style: 'border:none;',
        items: [
    {
            xtype: 'fieldset',
            title: 'Service Seeker Login',
            scrolable: true,
            items: [{
                xtype: 'emailfield',
                name: 'useremail',
                placeHolder: 'Username or Email',
                allowBlank: false
            }, {xtype:'spacer',  style: 'background-color: #EEE; height:20px; border:none;'}, {
                xtype: 'passwordfield',
                name: 'password',
    placeHolder: 'Password',
                allowBlank: false
            },{xtype:'spacer',  style: 'background-color: #EEE; height:20px; border:none;'},{
            xtype: 'checkboxfield',
            name : 'Remember',
           labelWidth: '80%' ,
            label: 'Remember me',
            value: 'remember'
        }, {
                xtype: 'hiddenfield',
                name: 'type',
                value: 'user'
            }]
        }, {
            xtype: 'button',
            text: 'LOGIN',
        id: 'LoginButon',
            ui: 'confirm',
            width: '75px',
            handler: function () {
     //iniate loading screen for user
    var myMask = new Ext.LoadMask(Ext.getBody(), {msg:"Please wait..."});
                var form = this.up('formpanel');
                var values = form.getValues();
                if (values.useremail && values.password) {
                    form.submit({
                   url: 'http://mysite/mobilelogin',
                        method: 'POST',
                        success: function (form, result) {
                            if (result.go) {
            myMask.show();
            localStorage.setItem('userName',values.useremail);
                                var indexPanel = Ext.create('AddressBook.view.Contacts');
            Ext.Viewport.add(indexPanel);
            Ext.Viewport.setActiveItem(indexPanel,{type: 'slide', direction: 'right'});
                            }
                        },
                        failure: function (form, result) {
                            Ext.Msg.alert('', result.message);
                        }
                    });
                } else {
                    Ext.Msg.alert('Error', 'Both username and password are required.');
                }
            }
        }
        }]
}); 
```

我也在sencha网站上发布了这个。 [http://www.sencha.com/forum/showthread.php?190430-Simple-Form-example-with-Ajax-or-Connection-to-backend&p=851571#post851571](http://www.sencha.com/forum/showthread.php?190430-Simple-Form-example-with-Ajax-or-Connection-to-backend&p=851571#post851571)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T14:21:32.943

这通常是我的做法：

```
Ext.Viewport.mask({ xtype: 'loadmask' });

Ext.Ajax.request({
  ...
  success: function(response, opts) {
    Ext.Viewport.unmask();
  },
  failure: function(response, opts) {
    Ext.Viewport.unmask();
    // handle error
  }
}); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:40:25.863

试试这个代码

```
if (values.useremail && values.password) {
 Ext.Viewport.setMasked({
                      xtype: 'loadmask',
                     message: 'Loading....'
          });
                form.submit({
               url: 'http://mysite/mobilelogin',
                    method: 'POST',
                    success: function (form, result) {
                         Ext.Viewport.setMasked(false);        
                        if (result.go) {
        myMask.show();
        localStorage.setItem('userName',values.useremail);
                            var indexPanel = Ext.create('AddressBook.view.Contacts');
        Ext.Viewport.add(indexPanel);
        Ext.Viewport.setActiveItem(indexPanel,{type: 'slide', direction: 'right'});
                        }
                    },
                    failure: function (form, result) {
                       Ext.Viewport.setMasked(false);        
                        Ext.Msg.alert('', result.message);
                    }
                });
            } else {
                Ext.Msg.alert('Error', 'Both username and password are required.');
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T21:11:55.000

制作两种方法，这些方法确实有用。一个是 showPageLoadMessage，另一个是 hidePageLoad 消息，在发送请求调用 show 和响应收到调用 hide 之前使用此代码。

方法1

```
function showPageLoadMessage() {
try {
    Ext.MessageBox.show({
        msg: 'Please wait while your request is served...',
        progressText: 'Loading...',
        width: 300,
        wait: true,
        animate: true,
        waitConfig: {
            interval: 200
        }
    });
    var dlg = Ext.MessageBox.getDialog();
    dlg.center();
} catch (e) {}
} 
```

方法2

```
function hidePageLoadMessage(rand) {
try {
Ext.MessageBox.hide();  
} catch (e) {} 
```

}

我已经将它们写在 try catch 块中，因为即使出现问题或您错误地调用消息两次，您的事情也会继续进行。

# ruby - ruby Marshal 序列化

> ID：11412753
> 
> 赞同：3
> 
> 时间：2012-07-10T11:53:33.370
> 
> 标签：ruby, marshalling

谢谢你的时间！

我有这样的课

```
class Vuser

    def initialize (logfile_name, iteration_hash)
        @logfile_name = logfile_name
        @iteration_hash = iteration_hash
    end

    attr_accessor :logfile_name, :iteration_hash

    def output_iteration_info ()
        puts @logfile_name
        puts @iteration_hash
    end
end 
```

并且会有一个数组来存储 Vuser 类的实例。假设数组的名称是 vuser_ary。

我想将此数组（ vuser_ary ）存储到二进制文件中，我认为它称为序列化。我用谷歌搜索，发现标准库中的 Marshal 可以做到这一点。这是我根据 Internet 上的示例如何执行此操作的示例：

```
#serialization
File.open("some.file","wb") do |file|
   Marshal.dump(vuser_ary,file)
end

#loading
vuser_ary = nil
File.open("some.file","rb") {|f| vuser_ary = Marshal.load(f)} 
```

但是当我检查 some.file 的大小时。我发现它只有四个字节。然后我意识到存储在 some.file 中的数据可能是引用而不是 vuser_ary 的值。

然后我的问题是如何将 vuser_ary 的值存储到二进制文件中。如何更改我的代码以实现这一目标？提前致谢！

顺便说一句：存储在 vuser_ary 中的值将是这样的：

RO_3.2_S4_CommericalRealEstate1_274.log

{1=>“失败”，2=>“失败”，3=>“通过”，4=>“通过”，5=>“失败”}

RO_3.2_S4_CommericalRealEstate1_275.log

{11=>“失败”、2=>“失败”、3=>“失败”、4=>“通过”、5=>“失败”

RO_3.2_S4_CommericalRealEstate1_276.log

{1=>“失败”，2=>“失败”，3=>“通过”，4=>“通过”，5=>“失败”}

RO_3.2_S4_CommericalRealEstate1_277.log

{1=>“失败”，2=>“失败”，3=>“通过”，4=>“通过”，5=>“失败”}

RO_3.2_S4_CommericalRealEstate1_278.log

{1=>“失败”，2=>“失败”，3=>“通过”，4=>“通过”，5=>“失败”}

RO_3.2_S4_CommericalRealEstate1_279.log

{1=>“失败”，2=>“失败”，3=>“通过”，4=>“通过”，5=>“失败”}

RO_3.2_S4_CommericalRealEstate1_280.log

{1=>“失败”，2=>“失败”，3=>“失败”，4=>“通过”，5=>“失败”}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:57:43.737

四个字节？碰巧编组空数组`[]`会在我的 Ruby 上生成一个 4 字节的字符串：

```
> Marshal.dump([]).length
 => 4 
```

尝试编组时确定`vuser_ary`它不是空的吗？

碰巧的是，对对象的“引用”和对象本身之间没有区别：Ruby 中没有指针，所以如果你有一个数组（并且它不是空的），那么它将被编组：

```
> Marshal.dump([1, 2, 3]).length
 => 10 
```

为了更好的衡量：

```
> vuser_ary = [{1=>"Fail", 2=>"Fail", 3=>"Pass", 4=>"Pass", 5=>"Fail"}]
 => [{1=>"Fail", 2=>"Fail", 3=>"Pass", 4=>"Pass", 5=>"Fail"}] 
> Marshal.dump(vuser_ary).length
 => 72 
```

# php - 与 ZEND auth ldap 连接的另一种方式

> ID：11412756
> 
> 赞同：1
> 
> 时间：2012-07-10T11:53:53.643
> 
> 标签：php, zend-framework, authentication, ldap

我想连接到 ldap 服务器。我已经通过在 application.ini 中使用以下代码来完成它

```
ldap.server.host = ldaps://ldap.example.ro
ldap.server.username = "uid=admin,ou=people,dc=example,dc=ro"
ldap.server.password = "password"
ldap.server.baseDn = "ou=people,dc=example,dc=ro"
ldap.server.bindRequiresDn = true 
```

进而

```
 $auth = Zend_Auth::getInstance();

    $config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/application.ini',
                                'production');
    $options = $config->ldap->toArray();

    $adapter = new Zend_Auth_Adapter_Ldap($options, $username, $password);

    $result = $auth->authenticate($adapter); 
```

有没有什么方法可以让我在没有管理员和密码的情况下做同样的事情？没有 ldap.server.username 和 ldap.server.password

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:22:37.177

我找到了一个方法。很简单...

在应用程序.ini

```
 ldap.server.host = ldaps://ldap.example.ro
 ldap.server.baseDn = "ou=people,dc=example,dc=ro" 
```

唯一的区别是 $username 必须是

```
 $username = "uid=". $username . ",ou=people,dc=example,dc=ro" 
```

# multithreading - 确保 QProcess 在其父 QThread 终止时终止

> ID：11412757
> 
> 赞同：2
> 
> 时间：2012-07-10T11:53:56.257
> 
> 标签：multithreading, qt

我正在 Qt 中编写代码，其中我使用多个线程 (Qthreads) 以下面代码片段中所示的方式启动命令行进程：

```
void test_streamer_thread::run()
{
    QProcess    start_process;
    ...

    ret_status = start_process.execute("some_cmd.exe",some_args);
    start_process.close();
} 
```

一旦启动，该进程将无限进行（在 Windows 任务管理器中显示为一个单独的进程）。但是，当应用程序终止时，该进程仍然继续存在。如何确保此进程在启动它的应用程序终止时终止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:17:15.167

完全没有必要使用单独的线程来启动进程。

确保在应用程序终止时终止子进程的最简单方法是

```
QProcess * p = new QProcess(....);
connect(qApp, SIGNAL(aboutToQuit()), process, SLOT(terminate())); 
```

请参阅下面的完整示例。

这种误解就像一种疾病一样传播开来，认为线程是解决每个人问题的方法。我的观察是，在带有标签的 10 个帖子中，有 9 个`Qt`使用线程是不必要的，并且是不了解问题的结果。

我的规则是：如果你认为你需要使用线程，试着解释它，如果只是在你的脑海里，以说服你的同事。完成此操作后，检查您引用来支持您的论点的所有事实是否确实正确。在许多情况下，它们不是。

下面的示例代码不会捕获 Unix 信号，因此——正如您在 Linux 和 OS X 上会注意到的那样——它只会终止直接后代进程，而不是可能从它启动的任何后续进程。你[需要处理 Unix 信号](http://qt-project.org/doc/qt-4.8/unix-signals.html)来解决这个问题。

```
//main.cpp
#include <QApplication>
#include <QPushButton>
#include <QProcess>

class Launcher : public QObject
{
    Q_OBJECT
    int n;
    QProcess * process;
signals:
    void setDisabled(bool);
public slots:
    void launch() {
        QStringList args;
        args << QString::number(n);
        process = new QProcess(this);
        process->start(QCoreApplication::applicationFilePath(), args);
        connect(qApp, SIGNAL(aboutToQuit()), process, SLOT(terminate()));
        emit setDisabled(true);
    }
public:
    Launcher(int no) : n(no), process(0) {}
    ~Launcher() {
        if (process) {
            process->terminate();
            process->waitForFinished();
        }
    }
};

int main(int argc, char ** argv)
{
    QApplication a(argc, argv);
    int n = 0;
    if (argc > 1) n = QByteArray(argv[1]).toInt();
    Launcher launcher(n+1);
    QPushButton spawn(QString("Spawn #%1").arg(n));
    launcher.connect(&spawn, SIGNAL(clicked()), SLOT(launch()));
    spawn.connect(&launcher, SIGNAL(setDisabled(bool)), SLOT(setDisabled(bool)));
    spawn.show();
    return a.exec();
}

#include "main.moc" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:37:14.450

看起来您正在分叉一个单独的进程，而不是创建线程。

如果它是一个单独的进程，那么您将需要在父进程和子进程（可能是管道或信号）之间进行某种通信，以告知它应该退出。

如果是线程，则在终止进程后，所有线程都会随之死亡。此外，您不会在 Windows 任务管理器中将线程视为单独的进程（不确定它们将如何显示，但它们不会显示为线程）。

# php - 如何仅删除字符串中的html标签？

> ID：11412758
> 
> 赞同：10
> 
> 时间：2012-07-10T11:54:10.760
> 
> 标签：php, regex

我已经编写了删除 HTML 标签的代码，但它也删除`a<b`了字符串类型。我希望它不要删除像`2<3`or之类的字符串`a<b`。

```
$term="a<b";
echo "Text is--->".preg_replace('/(?:<|&lt;).+?(?:>|&gt;)/', '', $term); 
```

如何在不删除 LT 或 GT 的情况下删除字符串中的 html 标签？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T08:55:46.260

对不起，我没有足够的验证。

我检查了下面的 php5-cli 表达式。

```
(?:<|&lt;)\/?([a-zA-Z]+) *[^<\/]*?(?:>|&gt;) 
```

PHP代码去：

```
#!/usr/bin/php 
<?php

$str = "<html></html>
a<b 1<2 3>1 
<body>1>2</body>
<style file=\"'googe'\" alt=\"google\">hello world</style>
<have a good efghijknopqweryuip[]asdfgghjkzxcv bnm,.me>hello world<> google com</s>
<a se=\"font: googe;\">abcde</a>";

echo "text--->".preg_replace('/(?:<|&lt;)\/?([a-zA-Z]+) *[^<\/]*?(?:>|&gt;)/', '', $str)."\n";

?> 
```

结果：

```
text--->
a<b 1<2 3>1 
1>2
hello world
hello world<> google com
abcde 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-10T11:57:11.257

使用php的strip tags功能

```
echo strip_tags($html) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:49:51.953

Strip_tags 函数是很好的解决方案。

但是，如果您需要正则表达式，请使用下面的表达式。

`(?:<|&lt;)\/?([a-z]+) *[^\/(?:<|&lt;)]*?(?:>|&gt;)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-24T05:36:46.767

# 从带有内容的 PHP 字符串中删除所有 HTML 标记！

假设您的字符串包含锚标记，并且您想删除带有内容的此标记，那么此方法将很有帮助。

```
$srting = '<a title="" href="/index.html"><b>Some Text</b></a> a<b';

echo strip_tags_content($srting);

function strip_tags_content($text) {

    return preg_replace('@<(\w+)\b.*?>.*?</\1>@si', '', $text);

 } 
```

输出：

> a < b

检索自：[从 php 字符串中删除所有 html 标记](https://stackoverflow.com/questions/14684077/remove-all-html-tags-from-php-string/39320168#39320168)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-10T11:59:53.790

使用[strip_tags](http://php.net/manual/en/function.strip-tags.php)

```
//If you want to allow some tags
$term = strip_tags($term,"<b>"); 
```

# google-places-api - Google Places API 返回的评分与 Web UI 评分不匹配

> ID：11412760
> 
> 赞同：0
> 
> 时间：2012-07-10T11:54:12.573
> 
> 标签：google-places-api

自从更改为 Google+ 地方信息后，评分基于 0-30 的等级。但是，API 仍会返回旧的 0-5 等级评级。有谁知道从 API 获取与用户在 Google+ Places 上看到的相同的总体评分数据的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:19:46.840

您可以将 API 评级乘以 6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:58:31.487

Please place a 'Places API - Feature Request' for this [here](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request).

# c# - NAudio 没有播放，但 WaveProvider32 Read 被调用

> ID：11412766
> 
> 赞同：2
> 
> 时间：2012-07-10T11:54:31.407
> 
> 标签：c#, .net, system.reactive, naudio

我正在尝试将 NAudio 与 Reactive Extensions 结合使用，但在让 NAudio 播放音频时遇到了问题。

到目前为止，以下是我的代码：

```
 public class WaveOutPlayer : IDisposable
{
    WaveOut wavOut = new WaveOut(WaveCallbackInfo.FunctionCallback());

    public WaveOutPlayer(int device, int sampleRate, int channels, IStereoSource source)
    {
        var provider = new WavProv(source, sampleRate, channels);
        provider.SetWaveFormat(sampleRate,channels);

        wavOut.Init(provider);
    }

    private class WavProv : WaveProvider32
    {
        AutoResetEvent are = new AutoResetEvent(false);
        ConcurrentQueue<float> queue = new ConcurrentQueue<float>();

        public WavProv(IStereoSource source, int sampleRate, int channels)
        {
            source.ChannelLeft
           .Zip(source.ChannelRight, (ls, rs) => new double[] { ls, rs })      //one sample from each channel
           .SelectMany(samps => samps)                                         //convert to samples array l,r,l,r,l
           .Buffer(sampleRate * channels * 1)                                     //buffer samplerate*channels*2 seconds
           .Select(x => x.ToArray())                                            // to observable of chunks
           .Do(x => { are.Set(); })
           .SubscribeOn(NewThreadScheduler.Default)
           .Subscribe(data =>
           {
               //queue.Enqueue((float)data);
               data.ToList().ForEach((x) => queue.Enqueue((float)x));
           });

        }

        public override int Read(float[] buffer, int offset, int sampleCount) 
        {
            int itemsRead;

            if (!queue.Any())                                                    //No data in the queue
            {
                //are.WaitOne();
                buffer = Enumerable.Repeat(0.0f, sampleCount).ToArray();        //Wait for some data
                itemsRead = sampleCount;
            }
            else
            {

                //number of items to read is lower of  samplecount or items in queue
                int itemsToRead = (queue.Count() > sampleCount) ? sampleCount : queue.Count();

                for (itemsRead = 0; itemsRead < itemsToRead; itemsRead++)
                {
                    float res;
                    if(queue.TryDequeue(out res))
                        buffer[itemsRead + offset] = res;       //add items from queue to buffer
                }
            }
            Console.WriteLine("Requested:{0}, Read: {1}",sampleCount, itemsRead);
            return itemsRead;
        }
    }

    public void Play()
    {
        wavOut.Play();
    }

    public void Dispose()
    {
        wavOut.Dispose();
    }
} 
```

正在调用 Read 方法，并且 Console.WriteLine 显示我总是提供足够的数据。顺便说一句，如果我减慢信号的产生速度，以至于我需要偶尔提供一个全零缓冲区（代码当前不存在），那么我会听到“咔哒”声。

还有其他我错过的问题/陷阱吗？

例如，幅度范围仅在 0-1 之间，还是支持全范围的浮点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:49:00.517

`BufferedWaveProvider`使用 NAudio而不是整个重置事件/队列更为可取。它是为这样的场景而设计的。

当播放器的缓冲区突然用完时，您会遇到中断 - 数据流的速度不够快。

其次，让我清理一下函数签名：

`int Read(float[] buffer, int offset, int sampleCount)`

您将获得一个缓冲区、缓冲区中的偏移量和块大小。您返回的值表示您可以为此读取操作提供的项目数。您**不需要**提供与请求的样本相对应的确切字节数。

因此，如果您想提供静音，请不要构造并返回零缓冲区，而只需返回 0 作为读取长度。

最后，如果您不想突然中断，您可以慢慢减小最后一组样本的幅度 - 它可以像乘以`(N - n) / N`(n ϵ [0, N]) 一样简单。由于缓冲区不足而中断是一个完全不同的问题。

**注意**

让我补充一点，您目前的解决方案不是在生产中执行此操作的好方法。当垃圾收集来敲门时，在两者之间使用大量对象最终会导致很多延迟问题。NAudio 的作者 Mark Heath 使用了很多技巧来最小化 Garbage 收集，比如重用缓冲区、EventArgs 之类的，所以如果浪费掉就很不公平了。

# ocean - 海洋插件过期了？

> ID：11412767
> 
> 赞同：1
> 
> 时间：2012-07-10T11:54:33.020
> 
> 标签：ocean

如何定义 Ocean/Petrel 插件的到期日期？这个过期日期显示在 Petrel 的插件管理器中，“过期时间：”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:29:09.587

没有 Ocean API 可以获取给定 Ocean 插件的到期日期。

此外，此字段在 Petrel 2011 插件管理器中不起作用，并且在“过期时间：”字段中始终显示“N/A”。

# php - 上传和添加新页面脚本不能一起工作。请帮忙

> ID：11412770
> 
> 赞同：0
> 
> 时间：2012-07-10T11:54:39.073
> 
> 标签：php, upload, panel, admin

有人可以帮我吗：

[http://tinypaste.com/92c58033/fullscreen.php?hash=1666f7f5138aba227d96d38e9b406c78&toolbar=true&linenum=true](http://tinypaste.com/92c58033/fullscreen.php?hash=1666f7f5138aba227d96d38e9b406c78&toolbar=true&linenum=true)

我创建了一个脚本来从管理员面板添加一个新页面。当我使用与添加新页面脚本分开的上传脚本脚本时，它们都可以正常工作，但是当我尝试将它们放在该页面中时，它们都不起作用。我是 PHP 编程的新手，所以我将不胜感激。

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:59:55.780

尝试添加`enctype="multipart/form-data"`您的表单标签

# c# - Trampoline 上的 AVPlayer 随机崩溃AVCompletionHandle / 最大蹦床数

> ID：11412772
> 
> 赞同：1
> 
> 时间：2012-07-10T11:54:47.903
> 
> 标签：c#, iphone, xamarin.ios, avfoundation

使用 AVFoundation.AVPlayer 时，我的应用程序有时会发生崩溃。它是随机发生的，例如当用户更改视频的位置或播放/暂停视频时。我不知道如何修复它，因为崩溃似乎发生在 MonoTouch 层中。

您可以在下面看到崩溃日志。

首先，是什么意思：`System.ArgumentException: GCHandle value belongs to a different domain`？我试图谷歌它，但我发现没有任何帮助。

此外，该行`MonoTouch_AVFoundation_AVPlayer_TrampolineAVCompletionHandler`可能表明我在构建设置中设置的蹦床数量有问题：

-aot“ntrampolines=4048”“nimt-trampolines=4048”

也许我应该增加这个数字，但有人知道我们可以设置的限制是多少？如果我增加这个数字会有什么后果？性能/内存问题？

```
[ERROR] FATAL UNHANDLED EXCEPTION: System.ArgumentException: GCHandle value belongs to a different domain
  at System.Runtime.InteropServices.GCHandle.op_Explicit (IntPtr value) [0x00036] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Runtime.InteropServices/GCHandle.cs:126 
  at System.Runtime.InteropServices.GCHandle.FromIntPtr (IntPtr value) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Runtime.InteropServices/GCHandle.cs:169 
  at MonoTouch.AVFoundation.AVPlayer.TrampolineAVCompletionHandler (IntPtr block) [0x00007] in /Developer/MonoTouch/Source/monotouch/src/AVFoundation/AVPlayer.g.cs:501 
  at (wrapper native-to-managed) MonoTouch.AVFoundation.AVPlayer:TrampolineAVCompletionHandler (intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29 
  at Dartfish.Application.EasyCapture.Common.Application.Main (System.String[] args) [0x00000] in /Users/admin/Dev/Dartfish/Dartfish EasyCapture/Source/Application/EasyCaptureMonoTouch/Main.cs:17 
  Symbol file /private/var/mobile/Applications/A0243AD3-C734-41E1-981E-A1ACB2E1AB77/EasyCaptureMonoTouch.app/Dartfish.LibraryCoreHeimdall.dll.mdb doesn't match image /private/var/mobile/Applications/A0243AD3-C734-41E1-981E-A1ACB2E1AB77/EasyCaptureMonoTouch.app/Dartfish.LibraryCoreHeimdall.dll
  Terminating runtime due to unhandled exception
Stacktrace:

Native stacktrace:

0   MonoTouchEasyCapture                0x0187e451 mono_handle_native_sigsegv + 244
1   MonoTouchEasyCapture                0x01895501 sigabrt_signal_handler + 112
2   libsystem_c.dylib                   0x328ba7ed _sigtramp + 48
3   libsystem_c.dylib                   0x328b020f pthread_kill + 54
4   libsystem_c.dylib                   0x328a929f abort + 94
5   MonoTouchEasyCapture                0x0192cb5d monoeg_assertion_message + 0
6   MonoTouchEasyCapture                0x0192cb7f monoeg_assertion_message + 34
7   MonoTouchEasyCapture                0x0186ef95 mono_thread_abort + 112
8   MonoTouchEasyCapture                0x0187e1cf mono_handle_exception_internal + 2138
9   MonoTouchEasyCapture                0x0187e29d mono_handle_exception + 12
10  MonoTouchEasyCapture                0x018947c5 mono_arm_throw_exception + 116
11  MonoTouchEasyCapture                0x01072cc4 throw_exception + 48
12  MonoTouchEasyCapture                0x00f87cc8 System_Runtime_InteropServices_GCHandle_FromIntPtr_intptr + 36
13  MonoTouchEasyCapture                0x00513c30 MonoTouch_AVFoundation_AVPlayer_TrampolineAVCompletionHandler_intptr + 96
14  MonoTouchEasyCapture                0x0056e360 wrapper_native_to_managed_MonoTouch_AVFoundation_AVPlayer_TrampolineAVCompletionHandler_intptr + 64
15  AVFoundation                        0x35303a51 __avplayeritem_fpItemNotificationCallback_block_invoke_0 + 3936
16  libdispatch.dylib                   0x3433bc59 _dispatch_call_block_and_release + 12
17  libdispatch.dylib                   0x3433dee7 _dispatch_main_queue_callback_4CF$VARIANT$mp + 194
18  CoreFoundation                      0x354812ad __CFRunLoopRun + 1268
19  CoreFoundation                      0x354044a5 CFRunLoopRunSpecific + 300
20  CoreFoundation                      0x3540436d CFRunLoopRunInMode + 104
21  GraphicsServices                    0x370a0439 GSEventRunModal + 136
22  UIKit                               0x32f10cd5 UIApplicationMain + 1080
23  MonoTouchEasyCapture                0x0056dcec wrapper_managed_to_native_MonoTouch_UIKit_UIApplication_UIApplicationMain_int_string___intptr_intptr + 240
24  MonoTouchEasyCapture                0x011d23d0 Dartfish_Application_EasyCapture_Common_Application_Main_string__ + 152
25  MonoTouchEasyCapture                0x0103ab08 wrapper_runtime_invoke_object_runtime_invoke_dynamic_intptr_intptr_intptr_intptr + 200
26  MonoTouchEasyCapture                0x01870d57 mono_jit_runtime_invoke + 1054
27  MonoTouchEasyCapture                0x018e0abb mono_runtime_invoke + 90
28  MonoTouchEasyCapture                0x018e37f7 mono_runtime_exec_main + 306
29  MonoTouchEasyCapture                0x018e3a4b mono_runtime_run_main + 482
30  MonoTouchEasyCapture                0x01873dbf mono_jit_exec + 94
31  MonoTouchEasyCapture                0x0186e59b main + 2802
32  MonoTouchEasyCapture                0x000029c8 start + 40 
```

# android - 如何在“购物车”选项卡上显示添加到购物车的商品数量

> ID：11412773
> 
> 赞同：1
> 
> 时间：2012-07-10T11:54:50.040
> 
> 标签：android

我有一个 TabHost，其中包含几个选项卡，其中一个选项卡为“购物车”。将商品添加到购物车后，我想在“购物车”选项卡上显示计数（已添加商品的数量）。

你能帮我实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:57:13.240

单击 addToCart 按钮时创建一个静态变量 Counter，然后在删除 addTocart 项目时增加计数器，然后减少计数器。

# tridion - Tridion 2011 中的 Session.GetObject 返回不存在项目的组件

> ID：11412775
> 
> 赞同：5
> 
> 时间：2012-07-10T11:54:54.667
> 
> 标签：tridion, tridion-2011

我试图弄清楚如何在自定义后端检查组件是否为空（例如，在 Tridion 中找不到）。除了捕获错误之外，我只是不知道如何检查这一点。

```
Component comp = (Component)session.GetObject(base.ComponentUri);

if (component != null)
{
    bool isCheckedOut = component.IsCheckedOut;
}
else
{
    // how do I get in here!
} 
```

我 100% 确定 uri 是正确的（'tcm:113-438134'）并且 100% 确定 Tridion 中没有具有该 URI 的项目。上面的代码会在 component.IsCheckedOut 处抛出错误：

```
The item tcm:113-438134-16 does not exist. 
```

如何检查 Tridion 项目的存在？我已经尝试将演员表放在最后，但这并没有太大帮助：

```
Component comp = session.GetObject(base.ComponentUri) as Component; 
```

而且我尝试过根本不进行投射，而是使用 IdentifiableObject，这也没有任何区别。任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T11:57:14.657

这是因为 Tridion 的延迟加载 - 如果 URI 看起来有效，它将永远不会返回空对象。您可以使用`session.IsExistingObject(TcmUriOrWebdavUrl)`来检查对象是否存在。

和...

我相信你会期待这个...

> 在自定义后端

您不能将 TOM.NET API 用于模板和事件系统以外的进程。请改用核心服务 API。

# javascript - 在 ColdFusion 中通过 XML 获取滑块图像

> ID：11412777
> 
> 赞同：0
> 
> 时间：2012-07-10T11:54:59.027
> 
> 标签：javascript, jquery, ajax, coldfusion

我正在尝试在冷融合页面中实现一个滑块并编写用于通过 XML 文件获取图像的 jQuery 脚本。我的 XML 文件包括图像的路径和其他详细信息。但它不起作用，尽管它适用于我的 WAMP 服务器上的简单文件。冷融合代码：

```
<cfoutput>
<script type="text/javascript" src="#request.serverCustom#rangers/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="#request.serverCustom#rangers/js/simplegallery.js"></script>
<script type="text/javascript">
    var myArray = [];    
    $(document).ready(function() {
        alert("outside");
        $.ajax({
            //alert("ajax inside");
            type: "GET",
            url: "#request.serverCustom#rangers/js/sites.xml",
            dataType: "xml",
            success: function(xml) {
                var count = 0;
                $(xml).find('site').each(function() {
                    var url = $(this).find('url').text();
                    var target = $(this).find('target').text();
                    var imageURL = $(this).find('imageURL').text(); 
                    var alt = $(this).find('alt').text();
                    myArray[parseInt(count)] = new Array(imageURL, url, target, alt); 

                    count++;
                });
                var mygallery2 = new simpleGallery({
                    wrapperid: "simplegallery2",
                    dimensions: [400, 240],                 
                    imagearray: myArray,                    
            autoplay: [true, 10000, 99], 
                    persist: true,
                    fadeduration: 1000, 
                    oninit: function() {
                    },
                    onslide: function(curslide, i) { 
                    }
                })                
            }
        });
alert(mygallery2);
    });
</script>
<div style="background: black none repeat scroll 0% 0%; overflow: hidden; 
position: relative; visibility: visible; -moz-background-clip: border; -moz-background-origin: 
padding; -moz-background-inline-policy: continuous; width: 400px; height: 265px;" id="simplegallery2"> 
</div>
</cfoutput> 
```

我的 XML 代码：-

```
<?xml version="1.0" encoding="iso-8859-1"?>
<sites>
  <site>
    <url><![CDATA[http://facebook.com]]></url>
    <target>_new</target>
    <alt>First Image : Random Image with Baloon(Will Go to FB)</alt>
    <imageURL><![CDATA[/img/Image1.jpg]]></imageURL>
  </site>

  <site>
    <url><![CDATA[http://google.com]]></url>
    <target>_new</target>
    <alt>Second Image : Random Image of a Toy(Will Go to Google)</alt>
    <imageURL><![CDATA[/img/Image2.jpg]]></imageURL>
  </site>

  <site>
    <url><![CDATA[http://twitter.com]]></url>
    <target>_new</target>
    <alt>Third Image : Random Image with Lighter with Water Filled</alt>
    <imageURL><![CDATA[/img/Image3.jpg]]></imageURL>
  </site>

  <site>
    <url><![CDATA[http://enablingdimensions.com]]></url>
    <target>_new</target>
    <alt>Fourth Image : A Image from Game(Will Go To Our Site)</alt>
    <imageURL><![CDATA[/img/Image4.jpg]]></imageURL>
  </site>

  <site>
    <url><![CDATA[http://ed.konnected.me]]></url>
    <target>_new</target>
    <alt>Fifth Image : A Cartoon in Yellow Background</alt>
    <imageURL><![CDATA[/img/Image5.jpg]]></imageURL>
  </site>

  <site>
    <url><![CDATA[http://yahoo.com]]></url>
    <target>_new</target>
    <alt>Sixth Image : Eating Fish with Anger(Will Go To Yahoo)</alt>
    <imageURL><![CDATA[/img/Image6.jpg]]></imageURL>
  </site>

</sites> 
```

我的文件夹“img”位于本地路径中。即使我在里面尝试过警报`$.ajax`，但它被打破了。我也尝试过获取链接图像，它与 WAMP 一起使用，但这也不起作用。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:55:09.340

您的示例中没有 ColdFusion 代码（除了#request.serverCustom#）。在这种情况下，您不需要将整个 dang 脚本括起来。将输出放在这些变量周围。

```
<cfoutput>
<script type="text/javascript" src="#request.serverCustom#rangers/js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="#request.serverCustom#rangers/js/simplegallery.js"></script>
</cfoutput> 
```

然后在 JS 内部：

```
 type: "GET",
 url: "<Cfoutput>#request.serverCustom#</cfoutput>rangers/js/sites.xml", 
```

包围整个事情会起作用，但对我来说*似乎*更混乱（尽管其他人会更喜欢它）。

如果您对 CF 有疑问，则很可能这个 var 就是问题所在。加载您的页面并转到“查看源代码” - 检查呈现的 HTML。如果您的 jquery-1.3.2.min.js 和 simplgallery.jas 文件的路径搞砸了，那么您需要通过调整 #request.serverCustom# 变量来修复它 - 或者通过添加斜杠或其他方式。

我通常从视图源中复制出来并在我的浏览器中加载路径以查看我得到的内容（当然要调整相对与绝对。

如果是其他问题，恐怕我们需要更多信息。它实际上在做什么？

# python - Jira SOAPclient - 日期时间字段

> ID：11412778
> 
> 赞同：0
> 
> 时间：2012-07-10T11:54:59.790
> 
> 标签：python, datetime, soap, jira

我正在使用 python SOAPpy lib 连接到 jira 并创建问题。它工作得很好，但我不知道如何正确格式化日期（对于 'duedate' 字段），所以 Jira 吃掉了它。

代码非常简单：

```
issue_params = dict()
issue_params['project'] = key
issue_params['type'] = str(issue_type)
issue_params['summary'] = title
issue_params['duedate'] = '{0}T00:00:00.000Z'.format(finish_plan.strftime("%Y-%m-%d"))
newissue = self.soap.createIssue(self.auth, issue_params) 
```

对于 issue_params['duedate'] 我尝试了很多不同的选项（YYYY-MM-DD、ISO 格式以及您在上面看到的内容、纪元、各种各样的东西）但是当我添加到期日期时我不断收到以下错误属性：

```
Fault soapenv:Server.userException: 
java.lang.IllegalArgumentException: argument type mismatch: 
SOAPpy.Types.structType detail at 75267848>: {'hostname': '*********', 'faultData': ''}> 
```

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:10:16.187

[我刚刚更新了https://studio.plugins.atlassian.com/svn/JCLIMD/trunk/src](https://studio.plugins.atlassian.com/svn/JCLIMD/trunk/src)上的 Python JIRA CLI 插件， 以及如何为 createIssue 执行此操作。

我建议使用 suds 而不是 SOAPpy，但这应该可以：

```
import SOAPpy.Types
issue_params['duedate'] = SOAPpy.Types.dateTimeType((int("2012"),
                                                        int("7"),
                                                        int("21"),
                                                        int(0),
                                                        int(0),
                                                        int(0),
                                                        )) 
```

# reporting-services - ReportViewer 控件中的过滤器（使用带有 AS Cube 的报告服务）

> ID：11412779
> 
> 赞同：0
> 
> 时间：2012-07-10T11:55:00.337
> 
> 标签：reporting-services, reportviewer

我使用 SQL 报告服务创建了一个报告，并将分析服务多维数据集用作数据源。我还在报表设计时定义了一些过滤器。当我使用报表服务器查看报表时，一切正常，报表也会根据选择的过滤器显示。现在我使用 ReportViewer 控件来查看我的应用程序的报告。我设置了 ReportServerUrl、ReportPath 并使用 ReportServerCredentials 进行授权。当我执行我的 aspx 屏幕时，它正确显示了我的报告，但过滤器不起作用。每次我更改过滤器值并单击 ViewReport 按钮时，它都会自动重置过滤器值。

有任何想法吗？？想法？还是我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:50:14.557

我正在回答我自己的问题，因为我发现我的代码有问题。我在每个回帖上都分配了凭据，我只是在 !IsPostBack 条件中添加了凭据并且它起作用了。

# command-line - 用于备份的 windows 批处理脚本

> ID：11412780
> 
> 赞同：1
> 
> 时间：2012-07-10T11:55:02.210
> 
> 标签：command-line, batch-file, backup

我不知道如何编写脚本来只备份前一天创建或修改的文件。因此，如果我在 25.07 的 15:30 启动脚本，它会在 24.07 00:00 和 25.07 00:00 之间备份文件。如果可能，首选方法是使用 robocopy。我知道 /maxage -1 开关，但它适用于从脚本启动时间开始计算的 1 天前的文件（问题是因为它还包括当天的文件）。

```
set source="C:\Folder1"
set destination="F:\Folder2"
robocopy %source% %destination% /z /MAXAGE: -1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:44:41.367

Robocopy 为您提供了两种指定日期的选项（用于 maxage、minage、maxlad、minlad）——相对日期（n<1900）或固定日期（否则，视为 yyyymmdd）。[完整的语法在这里](http://technet.microsoft.com/en-us/library/cc733145%28WS.10%29.aspx)。
您想包含在给定日期创建或访问的文件，因此您必须使用最小/最大 lad（最后访问日期）和固定日期，所以让我们使用 robocopy 语法指定您的标准：
1\. 排除自昨天以来未使用的文件：使用 /maxlad ( today_date - 1 天）
2\. 排除今天使用的文件：使用 /minlad (today_date)
将它们放在一起：
`robocopy source_dir destination_dir file_spec /maxlad:%today_minus_1% /minlad:%today%`

`today`并且`today_minus_1`vars 必须是 yyyymmdd 格式的日期（例如 20120710） - 如何获取它们？好吧，如果您仅限于纯批处理，则必须找到脚本来为您计算，有一些可用的（例如，[here](http://www.robvanderwoude.com/datetime.php)) 或自己编写。

如果您可以使用 powershell，那非常简单：
`for /f %y in ('powershell get-date ^(get-date^).adddays^(-1^) -uformat %Y%m%d') do set today_minus_1=%y`让您获得第一个变量和
`for /f %t in ('powershell get-date -uformat %Y%m%d') do set today=%t`第二个变量。

总结一下：设置您的日期变量，然后运行 ​​robocopy（在排除项中使用它们）。检查它是否正常工作时值得使用`/L`选项，因为实际副本将重新设置文件的访问时间戳！

给出的所有变量和命令就好像直接从 cmd 行执行一样。如果批量使用，您将需要添加一些`%`（使用 setlocal 可能是明智的）

注意：我使用的版本（XP010）**不允许**像您的示例中那样使用负数或空格

# memory-management - SQLite 是否倾向于在可能的情况下将索引保留在其缓存中？

> ID：11412781
> 
> 赞同：2
> 
> 时间：2012-07-10T11:55:07.450
> 
> 标签：memory-management, sqlite, indexing

我正在使用 SQLite 3 在内存受限的环境中工作。

我会将 PRAGMA 缓存大小设置为（例如）1MB。

假设我有 2MB 的数据和 100Kb 的索引数据。

SQLite 是否会尝试将索引保留在其内存缓存中的数据本身之上（在缓存中保留 900Kb 的数据）？

如果没有，从内存的角度如何访问索引？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:43:21.497

**不，索引不会无限期地保存在内存缓存中。**如果要插入、更新或删除新数据，sqlite3 可能会简单地释放较少使用的数据。

事实上，索引与内存管理几乎没有共同之处：每次使用`INSERT`or`UPDATE`时，sqlite3 都会重新排列数据（取决于您的系统在 HD 或 RAM 上）。简而言之，您可能会说，当您尝试访问该表时，该表已被订购。与没有索引的表相比，不需要更多的内存。

# java - 自动调整大小的表中的 Java 表

> ID：11412783
> 
> 赞同：1
> 
> 时间：2012-07-10T11:55:16.537
> 
> 标签：java, swing, jtable, jpanel, jscrollpane

我想制作一个可以包含小桌子并支持调整大小的桌子。![在此处输入图像描述](../Images/4b6ace08a44036d9cc606753ef9d6781.png)

我的解决方案使用一个包含表格的 JScrollpane，而 gridbaglayout 包含作为 JPanel 的行，而这一行 JPanel 包含 JLabels 和 ETable（流布局）。

我怎样才能解决调整大小的问题？当我调整窗口大小时，列会自动与窗口对齐。

我的代码在[这里](http://pastebin.com/4k6PSDk2)。

![在此处输入图像描述](../Images/9cbb550e50dd4517a17526f52a540db4.png)

大表中的列未正确对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:21:25.503

1.  我看到 J(X)TreeTable 或 Outline with Custom Look and Feel（渲染器谈论 Nimbus L&F，因为没有正确使用布尔值的背景）

2.  将 JComponents（从顶部）放在 JPanel 顶部并使用 GridBagLayout

3.  将 JScrollPane 与 J(X)TreeTable 或 Outline 放在中心区域

4.  请问使用的是哪种类型的 TreeTable ？？？（用于计算列的 PreferredSize）

编辑

> 在这种情况下，将表格替换为黑匣子。这不相关。

`JFrame`已经`BorderLayout`在 API 中实现了，那么

*   all `JComponent`s 从`TOP of the JFrame`put 到 separate `JPanel`，你可以在那里使用`GridBagLayout`， this `JPanel`put 到`NORTH area`eg`JFrame.add(JPanel, BorderLayout.NORHT)`

*   放在`black box`中心区域，例如`JFrame.add(black box, BorderLayout.CENTER)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:15:16.787

你可以用这个

```
Jtable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF); 
```

使用它`JTable`会在需要时显示水平和垂直滚动条。

# ruby - ruby 中的动态方法定义

> ID：11412787
> 
> 赞同：1
> 
> 时间：2012-07-10T11:55:46.660
> 
> 标签：ruby, metaprogramming

`$1.to_sym => args[0]`以下代码行中的作用和作用是什么`($1.to_sym,*args,&block)`？

```
class Table
  def method_missing(id,*args,&block)
    return as($1.to_sym,*args,&block) if id.to_s =~ /^to_(.*)/
    return rows_with($1.to_sym => args[0]) if id.to_s =~ /^rows_with_(.*)/
    super
  end
  # ...
end 
```

**背景：**
Ruport 是一个 Ruby 报告库。您可以使用 Ruport::Data::Table 类创建表格数据并将其转换为不同的格式——文本，例如：

```
require 'ruport'  
table = Ruport::Data::Table.new :column_names => ["country" , "wine" ], :data => [["France" , "Bordeaux" ], ["Italy" , "Chianti" ], ["France" , "Chablis" ]]  
puts table.to_text

⇒    
+--------------------+
| country |   wine   |
+--------------------+
| France | Bordeaux |
| Italy  | Chianti |
| France | Chablis |
+--------------------+ 
```

假设您只选择法国葡萄酒并将它们转换为逗号分隔值：

```
found = table.rows_with_country("France" )
found.each do |row|
  puts row.to_csv
end

⇒
France, Bordeaux
France, Chablis 
```

您刚才所做的是在 Ruport::Data::Table 上调用名为 rows_with_country( ) 的方法。但是这个类的作者怎么会知道你会有一个名为 country 的列呢？事实是，作者并不知道这一点。如果您查看 Ruport 内部，您会发现 rows_with_country( ) 和 to_csv( ) 都是 Ghost 方法。Ruport::Data::Table 类有点像上面的定义。

对 rows_with_country( ) 的调用变成了对看起来更传统的方法 rows_with(:country) 的调用，它以列名作为参数。此外，对 to_csv( ) 的调用变成了对 as(:csv) 的调用。如果方法名不是以这两个前缀中的任何一个开头，Ruport 就会退回到 Kernel#method_missing()，这会抛出 NoMethodError。（这就是 super 关键字的用途。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:06:00.383

让我们看看`method_missing`：

```
def method_missing(id,*args,&block)
  return as($1.to_sym,*args,&block) if id.to_s =~ /^to_(.*)/
  return rows_with($1.to_sym => args[0]) if id.to_s =~ /^rows_with_(.*)/
  super
end 
```

必要的背景：`method_missing`当请求的方法没有明确定义时在对象上调用。`id`将被调用的方法的一个符号；`args`将是一个参数数组，如果有一个块，`block`将是a ，或者.`Proc``nil`

```
 return as($1.to_sym,*args,&block) if id.to_s =~ /^to_(.*)/ 
```

执行真正从最后开始，在`if`: 它检查条件

```
id.to_s =~ /to_(.*)/ 
```

这基本上是在被调用方法的字符串上匹配正则表达式。如果在任何地方，则`x =~ y`返回匹配位置的整数偏移量，否则为零。例如：`x``y`

```
> "abc" =~ /a/
 => 0
> "abc" =~ /.$/
 => 2
> "abc" =~ /\d/
 => nil 
```

请记住，`0`在布尔条件下它被视为真值，因此`if`只有被调用函数的名称以 . 开头时才会被认为是真值`to_`。方法名称的其余部分由`(.*)`.

现在，我们没有显式保存捕获组，但是 Ruby 从 Perl 中借用了第一个捕获组的内容将保存在 中`$1`，第二个保存在 中`$2`，依此类推：

```
> "abc" =~ /a(.)(.)/
 => 0
> $1
 => "b"
> $2
 => "c" 
```

现在，回到有问题的行：

```
 return as($1.to_sym,*args,&block) if id.to_s =~ /^to_(.*)/ 
```

因此，如果被调用方法的名称为 形式`to_XYZ`，它调用`as()`方法时将第一个参数设置为`:XYZ`，并附加来自调用的其余参数，并通过该块（如果有）。

继续：

```
 return rows_with($1.to_sym => args[0]) if id.to_s =~ /^rows_with_(.*)/ 
```

这基本上是一样的：如果方法名是 like `rows_with_ABC`，那么它`rows_with()`使用一个 hash进行调用`{:ABC => args[0]}`，其中`args[0]`是给缺失方法调用的第一个参数。

# sockets - 套接字连接和 ActorSystem

> ID：11412790
> 
> 赞同：1
> 
> 时间：2012-07-10T11:55:50.000
> 
> 标签：sockets, scala, connection, akka

我有一个使用 akka 的应用程序，现在我想通过套接字连接连接到它。因此，我使用类似于[scala page 的机制](http://www.scala-lang.org/node/55)。但是，如果我尝试这样做`tell`，虽然我有一个 open `OutputStream`，但目标不会收到任何消息。

这是我的源代码：

```
object Connector {

  def main(args: Array[String]) {
    val port = 1337
    val conf = ConfigFactory.load
    val system = ActorSystem("SDDB", conf.getConfig("SDDB"))
    val master = system.actorOf(Props[TestActor])
    master ! "a"

    try {
      val listener = new ServerSocket(port)
      println("listening on port: " + port)
      while (true)
        new ConnectionThread(listener accept, master).start
      listener close
    } catch {
      case e: IOException =>
        System.err.println("Could not listen on port: " + port + ".")
        System.exit(-1)
    } finally {
      system.shutdown
    }
  }
}

case class ConnectionThread(socket: Socket, master: ActorRef) 
  extends Thread("ConnectionThread") {

  private val Select_* = """select (\w+) from (\w+) on (\d{4})-(\d\d)-(\d\d)""".r
  private implicit var id = 0L
  private implicit val timeout = Timeout(25.0 seconds)

  master ! "b"

  override def run {
    master ! "c"
    try{
      master ! "d"
      val in = new ObjectInputStream(socket getInputStream)
      master ! "e"
      val out = new ObjectOutputStream(socket getOutputStream)

      out writeObject("listening")
      out flush

      master ! "f"
      val command = in.readObject.asInstanceOf[String]
      println("client sent: '" + command + "'")
      // process the command

      master ! "g"
      out.writeObject("EOF")
      out.flush

      out.close
      in.close
      socket.close
    } catch {
      case e: SocketException =>
      case e: IOException => e printStackTrace
    }
  }
}

class TestActor extends Actor with ActorLogging{

  log info("TestActor running")

  def receive = {
    case s: String =>
      log info("received: " + s)
  }

} 
```

我得到输出：

```
listening on port: 1337
[INFO] TestActor running
[INFO] received: a
[INFO] received: b
[INFO] received: c
[INFO] received: d 
```

现在我预计它会一直持续到 g，但我得到了：

```
client sent: 'select content from testdata on 2012-07-06' 
```

我发现它可以工作，直到我打开套接字的流，可能是因为它也是基于套接字的`tell`并且`ask`使用套接字的输出流，胎面运行。之后套接字连接工作，但我无法发送*任何*消息到演员系统。
我无法删除连接器和 ConnectionThread。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:21:10.877

我必须承认，我没有完全理解文档中的示例。但我发现使用 a`ConnectionHelper`而不是直接寻址`ActorRef`效果很好。
我将代码更改为以下内容：

```
object Connector {

  def main(args: Array[String]) {
    val port = 1337
    val conf = ConfigFactory.load
    val system = ActorSystem("SDDB", conf.getConfig("SDDB"))

    //    val master = system.actorOf(Props[TestActor], "master")
    //    master ! "a"

    try {
      val listener = new ServerSocket(port)
      println("listening on port: " + port)
      while (true)
      //        new ConnectionThread(listener accept, master.asInstanceOf[TestActor]).start
        new ConnectionThread(listener accept, system).start
      listener close
    } catch {
      case e: IOException =>
        System.err.println("Could not listen on port: " + port + ".")
        System.exit(-1)
    } finally {
      //      master ! PoisonPill
      system.shutdown
    }
  }

}

case class ConnectionThread(socket: Socket, sys: ActorSystem) 
  extends Thread("ConnectionThread") {

  private val Select_* = """select (\w+) from (\w+) on (\d{4})-(\d\d)-(\d\d)""".r
  private implicit var id = 0L
  private implicit val timeout = Timeout(25.0 seconds)
  private val conHelper = new ConnectionHelper

  override def run {
    try {
      val out = new ObjectOutputStream(socket getOutputStream)
      val in = new ObjectInputStream(socket getInputStream)

      conHelper tell "funzt"
      out writeObject ("Hi")
      out.flush
      val command = in.readObject.asInstanceOf[String]
      println("received: " + command)
      out writeObject ("test")
      out.flush
      out writeObject ("EOF")
      out.flush

      out.close
      in.close
      socket.close
    }
  }

  private class ConnectionHelper {
    val tester = sys.actorOf(Props[TestActor])

    def tell(s: String) { tester ! s }

  }

} 
```

我真的不明白为什么这行得通，而我的问题中的代码却没有。我欢迎所有的解释。

# simple.data - Simpledata 随机排序

> ID：11412791
> 
> 赞同：0
> 
> 时间：2012-07-10T11:55:54.557
> 
> 标签：simple.data

一个简单数据问题

我有两个表：公司和产品。当我查询并获取所有满足特定条件的公司的产品时，我希望每次返回时都对结果进行随机排序。我怎么做？

还，

我很乐意（如果您能提供帮助）每家公司拥有最大数量的产品。所以

```
Database.Default.Products.All().Where(Database.Default.Products.Companies.Status=3) 
```

将退回所有产品，但我只想要最多 3 个或每个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:45:42.507

这样做没有内置支持，因为在 Simple.Data 支持的不同 SQL 和 NoSQL 数据库中实现它的方式太多样化了。

最好的办法是将搜索实现为存储过程，您可以从 Simple.Data 调用它，就好像它是数据库对象上的方法一样。

假设您使用的是 SQL Server，那将是

```
CREATE PROCEDURE RandomProductSearch(@Status int, @Take int) 
AS
BEGIN
    SET NOCOUNT ON;

    SELECT TOP (@Take) Products.*
    FROM Products
    JOIN Companies ON Products.CompanyId = Companies.CompanyId
    WHERE Companies.Status = @Status
    ORDER BY NEWID()
END 
```

然后您可以像这样从 Simple.Data 调用它：

```
var products = Database.Default.RandomProductSearch(3,10); 
```

希望有帮助。

# html - CSS中div右上角的工具提示箭头

> ID：11412794
> 
> 赞同：0
> 
> 时间：2012-07-10T11:56:34.290
> 
> 标签：html, css, alignment, tooltip

我需要在 div 的右上角显示一个可以使用 css 创建的箭头。并且箭头应该与div的连续渐变。

我已经为箭头编写了 css，但它不起作用。

箭头应朝上。

这是我的演示 [http://jsfiddle.net/n5vK5/3/](http://jsfiddle.net/n5vK5/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:03:44.660

只需删除溢出：自动；

[http://jsfiddle.net/n5vK5/7/](http://jsfiddle.net/n5vK5/7/)

# php - PDFLib 在框中将图像居中

> ID：11412795
> 
> 赞同：1
> 
> 时间：2012-07-10T11:56:36.483
> 
> 标签：php, image, pdflib

我想使用 PDFLib 和 PHP 在一个框中垂直和水平居中图像。

我为此使用以下代码：

```
$p->fit_image($image, $xPos,$yPos,"boxsize={".$width." ".$height."} position={center center} fitmethod=clip showborder"); 
```

在我生成的 pdf 中显示的图像中心有些偏离（几厘米） PDFLib 如何计算图像的中心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T11:01:40.147

有没有可能，您期望 $xpos,$ypos 应该是图像的中心？fit_image() 的参数 x/y 是左下角的参考点。所以在这个（左下）点，图像将根据 boxsize、position 和 fitmethod 放置。

我在 PDFlib 9 API 参考的第 6.1 章表 6.1 中找到了以下内容：

> fitbox 的左下角与参考点 (x, y) 重合

# sql-server - ')' 附近的语法不正确。在 sqlserver 2008 中

> ID：11412797
> 
> 赞同：0
> 
> 时间：2012-07-10T11:56:42.277
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures

我已经创建了有条件返回记录的 Sp。它在我的本地服务器上工作，但是当我在另一台服务器上部署时出现错误

> 153|错误|500|“*”附近的语法不正确。')' 附近的语法不正确。')' 附近的语法不正确。检索数据时发生意外错误。请稍后重试|

这是我的查询：-

```
 DECLARE @MemberID int  
    DECLARE @FolderID INT -- 1 = Inbox, 2 = Draft, 3 = Sent Items, 4 = Deleted Items, 5 = Templates etc    
     DECLARE @Email varchar(50)  
    DECLARE @OrderBy VARCHAR(50)
    DECLARE @PageSize INT  
    DECLARE @PageNumber INT  
    DECLARE @EnvelopeCurrentStatus varchar(5)  
    DECLARE @Subject varchar(50)   
    DECLARE @DateFrom VARCHAR(15)
    DECLARE @DateTo VARCHAR(15) 

    SET @MemberID =35185  
    SET @FolderID =1 -- 1 = Inbox, 2 = Draft, 3 = Sent Items, 4 = Deleted Items, 5 = Templates etc    
    SET @Email ='sd' 
    SET @OrderBy = 'ti.ID DESC'  
    SET @PageSize =10  
    SET @PageNumber =1  
    SET @EnvelopeCurrentStatus  = '' 
    SET @Subject  = ''  
    SET @DateFrom  = '1/1/1990'   
    SET @DateTo  = '1/1/2990'
--,@DocGuid uniqueidentifier='00000000-0000-0000-0000-000000000000 '

    DECLARE @SQL VARCHAR(MAX)  
    DECLARE @SQL1 VARCHAR(MAX)  
    DECLARE @SQL2 VARCHAR(MAX)  
    DECLARE @SQL3 varchar(Max)  
    DECLARE @Select varchar(50)  
    DECLARE @Expr varchar(max)  
    SET @SQL = ''  
    SET @OrderBy = ''  

    SET @Expr = ''  
    IF ((@DateFrom <> '' AND @DateFrom IS NOT NULL) AND (@DateTo <> '' AND @DateTo IS NOT NULL ) )  
           SET @Expr = @Expr + ' AND ti.CreatedOn BETWEEN ''' + @DateFrom + ''' AND ''' + @DateTo+''''

    IF @Subject <> '' AND @Subject IS NOT NULL 
     begin  
      BEGIN TRY
      DECLARE @nPortalUID AS uniqueidentifier
      SET @nPortalUID = CAST(@Subject AS uniqueidentifier)
      SET @Expr = @Expr + ' AND  ti.TemplateID= '''+@Subject+' '''
      end try

      BEGIN catch
      SET @Expr = @Expr + ' and ti.Subject LIKE ''%'+@Subject+'%'' '
      end catch
     end     

    IF @EnvelopeCurrentStatus <> '' AND @EnvelopeCurrentStatus IS NOT NULL  
            SET @Expr = @Expr + ' AND ti.EnvelopeCurrentStatus = ''' + cast( @EnvelopeCurrentStatus AS varchar(5))+ ''''

    IF @OrderBy ='' AND @OrderBy IS NOT NULL   
            SET @OrderBy = 'ti.ID DESC'
    ELSE   
            SET @OrderBy = @OrderBy  

    DECLARE @IsShare BIT
    DECLARE @ParentID INT
    SELECT @IsShare = m.MUIsShare, @ParentID = m.createdby FROM tblcontact m WHERE m.ID = @MemberID

    DECLARE @MemberParentID VARCHAR(MAX)

    IF @IsShare = 1 
    BEGIN
    SET @MemberParentID = cast(@MemberID AS varchar(5))
        --SET @MemberParentID = cast(@MemberID AS varchar(5))+ ', ' + cast(@ParentID AS varchar(5))
    END
    ELSE
    BEGIN
        SET @MemberParentID = cast(@MemberID AS varchar(5))
    END

    SET @SQL1 = 'SELECT * INTO #TMP FROM (  
                    SELECT * FROM (  
                        SELECT (  
                            SELECT Count(*) FROM TemplateInfo ti  WHERE (ti.FolderID = '+ cast( @FolderID AS varchar(5) )+ ') AND (ti.MemberID IN( '+ @MemberParentID + '))  AND (ti.EnvelopeStatus = 2) '  

    SET @SQL2 = ' OR  (ti.ID IN (SELECT TempleteInfoID  FROM  Recipients AS r  WHERE (Email = '''+ @Email+''')  AND (FolderID = '+ cast( @FolderID AS varchar(5))+') ) ) ) AS TotalRecord  
                , ROW_NUMBER() OVER(ORDER BY '+ @OrderBy + ') AS ROWID , ti.ID  , ti.TemplateID  , ti.EnvelopeStatus  , ti.EnvelopeCurrentStatus  , ti.Subject  , ti.CreatedOn AS SentDate  
                , ti.CreatedOn  , ti.ModifiedOn  , m.FirstName + '' '' + m.LastName AS Sender  , m.Email AS SenderEmail  
                FROM TemplateInfo ti  LEFT OUTER JOIN tblcontact AS m ON ti.MemberID = m.ID  
                WHERE (ti.FolderID = '+ cast( @FolderID AS varchar(5))+ ') AND (ti.MemberID IN( '+ @MemberParentID + '))  AND (ti.EnvelopeStatus = 2) '  

    SET @SQL3 = ' OR (ti.ID IN ( SELECT TempleteInfoID   FROM  Recipients AS r  WHERE (Email = '''+ @Email+''')  AND (FolderID = '+ cast( @FolderID AS varchar(5)) + ') ) ) ) AS Template  
                    WHERE ROWID BETWEEN  '+ CAST( (@PageNumber - 1) * @PageSize + 1 AS VARCHAR(5)) +' AND '+CAST (@PageNumber*@PageSize AS  VARCHAR(5)) + ' ) AS TmpTable  

                SELECT * FROM #TMP  

                SELECT r.ID  , r.Guid  , r.Name  , r.Email  , r.RecipientOrder  , r.Status  , r.ModifiedOn  , r.TempleteInfoID  
                , CASE WHEN r.Status = 0 THEN ''Waiting to Sign''  WHEN r.Status = 1 THEN ''Completed''  WHEN r.Status = 2 THEN ''Declined'' END AS StatusText  
                FROM Recipients r WHERE r.IsActive <> 0 and r.TempleteInfoID IN (SELECT ID FROM  #TMP)  

                SELECT * FROM UsedCustomFields ucf WHERE ucf.TemplateInfoID IN (SELECT ID FROM  #TMP)  

                DROP TABLE #TMP '  

    SET @SQL = @SQL1 + @Expr + @SQL2 +@Expr + @SQL3  
    select @SQL
    --PRINT (@SQL)  
    EXEC (@SQL);  

    IF @@Error <> 0
    BEGIN
        RAISERROR('Unexpected error occured while retrieving data.Please try again later',16 , 1)
    END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:02:39.560

一种可能性是生产表中​​的数据包含引号（'）。由于您使用的是动态sql，如果数据本身包含引号，它将作为查询字符串的终止，因此查询失败

# java - 如何找到可迭代对象的大小？

> ID：11412798
> 
> 赞同：7
> 
> 时间：2012-07-10T11:56:44.360
> 
> 标签：java, iterator

我正在写一个 MR Job。但是我遇到了一个与 Iterable 对象相关的问题。我需要找到它的大小。我将它转换为 List 对象，但这是错误的。（List 可以转换为 Iterable，但不能进行反转。）还有另一种方法，即对对象使用 Iterator 并为每个值增加一个计数器。但这不是最佳解决方案。有人可以提出更好的方法吗？

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T13:55:05.143

该`Collection`接口提供了一个`size()`方法并扩展了`Iterable`. 如果你的迭代器恰好来自一个集合，你可以询问它的大小，否则你就不走运了，你只需要迭代到最后。

这是一个实现这一点的hack：

```
public int size(Iterable<?> it) {
  if (it instanceof Collection)
    return ((Collection<?>)it).size();

  // else iterate

  int i = 0;
  for (Object obj : it) i++;
  return i;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T13:59:18.357

您必须通过迭代器并计算项目。例如，

```
 while (iterator.hasNext()) {
            iterator.next();
            count++;
        } 
```

这不是很干净，但迭代器用于迭代的目的，并且没有为此提供任何特定的 api。

但是，迭代器是在哪里创建的？如果它来自另一个对象，例如 Collection 对象，您可以确定源的大小，而不是迭代器本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:56:18.673

Iterator 上没有 size()，但一些从中派生 Iterator 的 Collections 有一个 size()，例如 java.util.LinkedList.size()。因此，在某些情况下，您可能需要进行迭代。

# php - PHP：使用 PDO 从 MySQL 数据库输出 utf8 的问题

> ID：11412801
> 
> 赞同：3
> 
> 时间：2012-07-10T11:56:55.610
> 
> 标签：php, mysql, unicode, utf-8, pdo

```
$dbo = new PDO("mysql:host=localhost;dbname=database", "databaseuser",
  "databasepassword", array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));
$dbo -> exec("set character_set_client='utf8'");
$dbo -> exec("set character_set_results='utf8'");
$dbo -> exec("set collation_connection='utf8_general_ci'");
$prepSnapRetrieve = $dbo->prepare(
  "SELECT * FROM znc_log WHERE `nick` LIKE :u AND `tstamp` BETWEEN :t1 AND :t2"
);
$prepSnapRetrieve->execute(array(':u' => str_replace("|osu","", $_GET['u']),
  ':t1' => $_GET['sns'], ':t2' => $_GET['sne']));
$snapshotListing = $prepSnapRetrieve->fetchAll();
echo("Snapshot of ".$_GET['u']. "'s chat on ".strftime("%e/%m/%g",$_GET['sne']));
echo("<br><br>");
foreach($snapshotListing as $chat) {
  echo "<i>" . " " . "[" . strftime("%H:%M:%S", $chat['tstamp']) . "]" .
   "</i> " . " ><u>" . $chat['channel'] . "</u>< " . "(<b>" .
   htmlspecialchars($chat['nick'])."</b>) ".htmlspecialchars($chat['message']);
  echo("<br>");
} 
```

这段代码应该解析和输出存储在 UTF-8 中的 IRC 数据 - 但在回显时，任何 unicode 内容都简单地显示为：

```
?????? 
```

我已经查看了几个问题并包含了几个据称的修复程序，但似乎没有任何效果。另一个使用相同数据库的脚本完美地回显了 UTF-8 内容，但它使用的是 PHP 的标准 MySQL 实现，而不是 PDO。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T12:24:14.510

使用 UTF8 时有多个故障点：

*   确保表格是 utf8

    使用 SQL-Command`Show Variables;`检查表的 MySQL 字符设置。

*   插入的数据是 utf8

    您可以尝试使用**phpMyAdminer**或**Adminer**等工具来检查
    数据是否正确插入。尝试通过工具手动插入数据。通过脚本插入时，不要使用基本的字符串函数。始终使用他们的 mbstring 替代品。设置`mb_internal_encoding( 'UTF-8' );`为让 PHP 在内部处理 UTF-8。

*   获取的数据是 utf8

    我只会使用`$pdo->exec("SET NAMES utf8");`并放弃其余的。因为 `SET NAMES x`相当于 `SET character_set_client = x; SET character_set_results = x; SET character_set_connection = x;`

*   显示的数据是 utf8

    如果这显示在 html 页面中，请不要忘记设置 meta 标签或 header
    `"Content-Type: text/html; charset=utf-8"`。

# pdf - PDF 和文本层

> ID：11412802
> 
> 赞同：15
> 
> 时间：2012-07-10T11:57:01.630
> 
> 标签：pdf, ocr, scanning

根据该站点[http://www.searchable-pdf.com/content.php?lang=en&c=61](http://www.searchable-pdf.com/content.php?lang=en&c=61)，添加文本层后可以搜索 PDF。

我正在寻找 PDF 的技术规范。我认为文本可以以两种方式存储到 PDF 中：a）作为图像层上方的文本层（如上面的网页中所述）b）当您从 Word 文档（带文本）创建 PDF 时，我不t 认为 Word 会将所有文本存储在文本层中。我认为它会将其存储在图像层中？正确的？

从 PDF 1.4 开始，添加了 XMP (http://en.wikipedia.org/wiki/Extensible_Metadata_Platform)。但是什么是 XMP？这是我上面讨论的“文本层”吗？

如果扫描仪正在对图像执行 OCR，它是否将文本存储在“文本层”中？还是“XMP”字段？这只能在 PDF 版本为 1.4 时出现？

以及如何检测 PDF 是否已经包含文本数据？例如：PDF A 已使用 OCR 进行扫描，而 PDF B 则没有。我怎么知道应该将 PDF B 发送到单独的 OCR 引擎？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T14:44:37.320

PDF 规范没有提到“文本层”。通常，只有一种“存储”文本的方法：通过文本显示运算符。这些运算符使用特定的颜色、字体、字体大小和文本渲染模式在特定位置绘制文本。有几种文本渲染模式。为了回答您的问题，文本可以是可见的或不可见的。

执行 OCR 的扫描仪将光栅图像和文本呈现到 PDF 文档。使用不可见文本呈现模式呈现文本。结果是您可以使用鼠标选择文本（突出显示的区域将显示在图像顶部的预期位置）并且您可以搜索文本。搜索结果将再次显示在正确的位置。

从 Word 文档生成 PDF 时会发生什么取决于您用于转换的软件。据我所知，这些转换器不会生成图像，但它们会生成可见文本。

XMP 是元数据，而不是视觉数据。

最后，关于您关于检测 PDF 是否有文本数据的问题，这里有一个[类似的问题（仅限 10k）](https://stackoverflow.com/questions/7725117/pdf-type-detection-text-on-image-vs-embedded-tiffs)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T17:45:09.173

我赞成 Frank Rem 的回答，因为它是“完整的”。

不过，让我添加一些细节：

1.  文本的“不可见性”来自PDF`Tr`中的*文本渲染模式 3*运算符：*“既不填充也不描边文本”* [（PDF-1.7 规范，第 9.3.6 章）](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)。
2.  看看这个超级用户问题：[**“PDF 在运行 Ghostscript 后所有单词都有一个额外的空白”**](https://superuser.com/questions/285684/pdf-has-an-extra-blank-in-all-words-after-running-through-ghostscript)和我在那里的答案，以了解更多关于技术细节的东西（尤其是看标题为*“如何我们使不可见的文本可见吗？”*）。

# ruby-on-rails - Rails 中的 link_to 与 AngularJS 等效

> ID：11412808
> 
> 赞同：3
> 
> 时间：2012-07-10T11:57:16.793
> 
> 标签：ruby-on-rails, haml, angularjs

使用 AngularJS 在 Rails 中编写 html.haml 中的代码

```
%table
  %tbody{:"ng-init" => "my_model=#{@current_user_things.to_json}"}
    %tr{:"ng-repeat" => "row in my_model"}
      %td
        %a{:href => "{{row.permalink}}"}
          {{row.name}} 
```

我正在尝试将 Rails 中最初链接到行页面的 link_to 替换为使用 AngularJS 的等效项。由于我为 AngularJS 提供了一个重复的模板，我现在需要在客户端生成链接。有没有办法轻松做到这一点？

我意识到我可以简单地去`%a{:href => "http://blah.com/rows/{{row.permalink}}"}`，但我更喜欢更优雅的解决方案，因为主机可以改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:11:18.363

我想我可以像这样修复它：

```
%a{:href => "#{url_for(:action => 'index')}/{{row.permalink}}"} 
```

# ant - 需要一个 Ant 示例来从文件中删除重复的行。 不管用

> ID：11412825
> 
> 赞同：2
> 
> 时间：2012-07-10T11:58:26.240
> 
> 标签：ant

需要一个 ant 脚本来删除文件中的重复行 --> 不起作用

```
 <copy file="${logfile}" tofile="C:/workspace/oracletest/servers.txt" overwrite="yes" >
         <filterchain>
           <tokenfilter delimoutput="\n">
                    <containsregex pattern="(JB|ws)" flags="i"/>
                 <stringtokenizer/> 
                 <!--<uniqfilter/>--> 
           </tokenfilter>
        </filterchain>
        </copy>
      </target> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:04:49.217

该[文档](http://javasourcecode.org/html/open-source/ant/ant-1.8.2/org/apache/tools/ant/filters/UniqFilter.html)似乎建议您必须在 uniqfilter 之前使用 sortfilter：

```
 <filterchain>
       <tokenfilter delimoutput="\n">
                <containsregex pattern="(JB|ws)" flags="i"/>
             <stringtokenizer/> 
       </tokenfilter>
       <sortfilter />
       <uniqfilter/>
    </filterchain> 
```

# asp.net - cookie 不添加

> ID：11412826
> 
> 赞同：0
> 
> 时间：2012-07-10T11:58:27.777
> 
> 标签：asp.net, .net, asp.net-mvc-3, cookies

我在服务器上添加 cookie：

```
private void AddCookie(int id)
{
    HttpCookie cookie = new HttpCookie("wmpayment");
    cookie.Value = id.ToString();
    cookie.Expires = DateTime.Now.AddDays(2);
    this.ControllerContext.HttpContext.Response.Cookies.Add(cookie);
} 
```

但是当我从请求中读取 cookie - cookie.Expire 等于日期 01.01.0001

```
public static int WMPendingOrder
{
    get
    {
        var cookie = HttpContext.Current.Request.Cookies["wmpayment"];
        int id = 0;
        DateTime exp;

        if (cookie != null)
        {
            DateTime.TryParse(cookie.Expires.ToString(), out exp);
            if (DateTime.Now < exp)
                int.TryParse(cookie.Value, out id);
        }
        return id;
    }
} 
```

日志：*COOKIE.Name：wmpayment COOKIE.Value：0 COOKIE.Expire：01.01.0001 0:00:00* 我不明白是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:24:19.987

所以基本上有两条信息需要你坚持。id 和到期日期。如何将到期日期存储在单独的 cookie 中：

```
private void AddCookie(int id) 
{ 
    HttpCookie cookie = new HttpCookie("wmpayment"); 
    cookie.Value = id.ToString(); 
    cookie.Expires = DateTime.Now.AddDays(2); 
    this.ControllerContext.HttpContext.Response.Cookies.Add(cookie); 

    HttpCookie cookie = new HttpCookie("wmpaymentexpire"); 
    cookie.Value = DateTime.Now.AddDays(2).ToString(); 
    cookie.Expires = DateTime.Now.AddDays(2); 
    this.ControllerContext.HttpContext.Response.Cookies.Add(cookie); 
} 
```

因此，要检查 cookie 的过期日期，`wmpayment`您需要读取 cookie 的值`wmpaymentexpire`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:45:46.690

您可以使用此代码创建 cookie：

```
 FormsAuthenticationTicket tkt;
            string cookiestr;
            HttpCookie ck;

            tkt = new FormsAuthenticationTicket(1, UsrNm, DateTime.Now,
      DateTime.Now.AddMinutes(30), chkPersistCookie.Checked, "Issue Ticket");
            cookiestr = FormsAuthentication.Encrypt(tkt);

            ck = new HttpCookie(FormsAuthentication.FormsCookieName, cookiestr);
            if (chkPersistCookie.Checked)
                ck.Expires = tkt.Expiration;
            ck.Path = FormsAuthentication.FormsCookiePath;
            Response.Cookies.Add(ck);

            string strRedirect;
            strRedirect = Request["ReturnUrl"];
            if (strRedirect == null)
                strRedirect = "~/default.aspx";
            Response.Redirect(strRedirect, true); 
```

**注意：* *添加程序`using System.Web.Security`集`FormsAuthenticationTicket`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:24:52.783

当 cookie 被提交回服务器时，它们不包含“Expires”选项，因此`exp`不会被填充，因此它保持其默认值 DateTIme.MinValue。因此，`DateTime.Now < exp`永远不会是真的，所以`int.TryParse(cookie.Value, out id)`永远不会运行，所以 id 保持它的默认值，`0`.

试试这个：

```
public static int WMPendingOrder
{
    get
    {
        var cookie = HttpContext.Current.Request.Cookies["wmpayment"];
        int id = 0;

        if (cookie != null)
        {
            int.TryParse(cookie.Value, out id);
        }
        return id;
    }
} 
```

您不需要在服务器端检查过期的 cookie - 如果它们过期，客户端将不会发送它们。

# html - 用草书文字（如阿拉伯文字）将字母加粗

> ID：11412828
> 
> 赞同：3
> 
> 时间：2012-07-10T11:58:29.870
> 
> 标签：html, unicode, arabic, right-to-left, persian

考虑波斯语 سیب (/si:b/ apple)。我想让它的中间字母加粗。使用以下代码

```
س<b>ی</b>ب 
```

生产

س **ی** ب。

如何防止字母分离？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T12:18:06.993

浏览器/操作系统没有预定义的方法可以将 Normal س 连接到 Bold ی。有不同字体大小的 س 和 ی 有点相似。

一种解决方法是在字母前后使用[Kashida ：](http://en.wikipedia.org/wiki/Kashida)

سـ **ـیـ** ب

另一种解决方法是使用[零宽度连接器](http://en.wikipedia.org/wiki/Zero-width_joiner)：

س‍<b>‍ی‍</b>ب

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T12:05:09.987

正如您所描述的，您不希望`b`标签之间有空格，因此您可以使用`margin`并`padding`设置为0。

# refactoring - 长方法是坏事吗？

> ID：11412834
> 
> 赞同：2
> 
> 时间：2012-07-10T11:58:39.230
> 
> 标签：refactoring, design-patterns

据我所知，包含长序列操作的方法被认为是一件坏事，需要重新设计。不仅如此，我听到一个意见，方法不应该大于屏幕（即所有方法代码应该立即在 IDE 屏幕中可见，无需滚动）。

对此有什么一般规则吗？例如，“如果方法超过 15 行，就应该重构”？如果是这样，你如何重构它？只是使用提取方法的方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T12:12:57.720

这取决于你问谁。 [罗伯特马丁](http://www.cleancoders.com/)会告诉你有两条规则：

1.  方法应该很小。
2.  一个方法应该比那个小。

不要从行数的角度来考虑它。行数是一个任意且不重要的指标。根据该方法在逻辑上的作用来考虑*它*。最好的规则是：

*   一个方法应该做一件事。

或者，换一种更好的方式：

*   一种方法应该只有一个改变的理由。

（仍然在这里引导鲍勃叔叔，我最近一直在努力实现清洁代码。）

将此与其他逻辑规则结合起来，例如：

*   一个方法应该只有一个抽象级别。
*   一种方法应该[遵循得墨忒耳法则](https://stackoverflow.com/q/8646799/328193)。

而且，*一般来说*，你最终会得到非常小的方法。然而，也*有*例外。在许多情况下，“一件事”用一行代码表示，可能是两三行。但它是简单而富有表现力的代码，并且很清楚“一件事”是什么。（当然，方法的名称应该清楚地反映一件事。）

然而，有时，“一件事”是一个较长的步骤序列。也许您有一种方法在您的域中封装了单个原子进程，但该进程恰好由十几个或更多步骤组成。每个步骤都是它自己的“一件事”，并且它可能在内部在其他方法中还有其他“一件事”，依此类推。

每个单独的方法都做“一件事”。但是将较小的步骤聚合成较大的原子过程的高级封装方法会变得更长一些，因为它们的“一件事”是由许多较小的“一件事”组成的。这是罕见的，但它会发生。当它发生时，通常的结果是一个方法，它只不过是一系列方法调用。（这并不是说这是长方法的借口。仔细检查代码的逻辑以确定重构更大的方法是否真的有意义。）

这种更大的封装方法通常是将[事务脚本模式](http://martinfowler.com/eaaCatalog/transactionScript.html)应用于业务逻辑的结果。有一个步骤，响应一个请求，它由业务逻辑中的一个多步骤过程组成。

方法*应该*很小。它们*应该*比这还要小。如果不是，请仔细检查它们以确定原因。如果有不止一层缩进，这通常表明它应该被重新分解。如果输入中有多个制衡，它可能会使用一些重构。如果方法做不止一件事或有不止一个改变的理由，它*肯定*应该被重构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:07:53.057

将大型函数拆分为较小的函数通常是一个非常好的主意。
如果它们设计得很好并且很容易理解正在发生的事情，这不是问题。但功能越大，就越难做到。保持功能简单将使您以后更容易跟踪问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:14:52.527

早期的程序员过去常常将他们的方法长度限制在 10 行代码以内。如果他们的方法更长，那么他们将其分开。这是一种过时的编程风格，不再被广泛使用。大多数专家都同意，只要对它们有意义，方法就可以存在。（也就是说，只要没有逻辑断点，它们就不应该被分解）

就个人而言，我争取更短的方法。但话虽如此，除非有一个明显的逻辑断点，否则我**不会**强调打破一个长的。这样做的唯一原因是它使我的代码更易于阅读和调试；特别是如果方法名称是描述性的。

# php - 时间戳比较

> ID：11412836
> 
> 赞同：-1
> 
> 时间：2012-07-10T11:58:50.693
> 
> 标签：php, mysql, time

我正在尝试制作一个时钟系统，以便我制作网站的人可以看到我在什么时候做了什么。我在 SQL 数据库中有两个时间戳。

我想知道他们之间有多少小时，因为我是按小时付费的。当我查询我的表时，我得到时间戳并将它们分配给变量

```
$clock_in;
$clock_out; 
```

我想找到它们之间的小时/分钟。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:03:53.787

在 SQL 时间戳上使用 PHP [strtotime()](http://php.net/manual/en/function.strtotime.php)函数，然后只需从 $clock_out 中减去 $clock_in 即可得到两者之间的秒数。除以 60 得到分钟。

```
$minutes = ($clock_out - $clock_in) / 60 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:05:05.610

```
select time_to_sec(timediff('2010-09-01 03:00:00', '2010-09-01 00:10:00' )) / 3600;

+-----------------------------------------------------------------------------+
| time_to_sec(timediff('2010-09-01 03:00:00', '2010-09-01 00:10:00' )) / 3600 |
+-----------------------------------------------------------------------------+
|                                                                      2.8333 | 
+-----------------------------------------------------------------------------+ 
```

另请阅读[此](https://stackoverflow.com/questions/3528219/mysql-how-to-get-the-difference-between-two-timestamps-in-seconds)内容以了解秒数的差异。

# jquery - 外部 html 和 jquery

> ID：11412837
> 
> 赞同：0
> 
> 时间：2012-07-10T11:58:51.130
> 
> 标签：jquery, ajax, css-position

我在 SO 上找到了这个脚本，我一直在尝试将它实现到我的项目中，但是我仍然是 jQuery 新手，需要一些帮助。

这是脚本：http: [//jsfiddle.net/9erk2/](http://jsfiddle.net/9erk2/)

我正在尝试获得这种效果，但是在外部加载的 html div 部分上并且它不起作用。

我认为这与加载时不存在 div 的事实有关，因此我需要使用 .live() 方法。这是对的，我该怎么做。

任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:35:51.970

结合小提琴中提供的 css 和 html 代码试试这个。

```
<script>
    $window.delegate("#divID", "scroll", function(event){
        scrollTop = $window.scrollTop(),
        topPosition = Math.max(0, sidebarTop - scrollTop),
        topPosition = Math.min(topPosition, (footerTop - scrollTop) - sidebarHeight);
        $sidebar.css('top', topPosition);
    });
</script> 
```

# android - 安装eclipse android插件时出错

> ID：11412838
> 
> 赞同：0
> 
> 时间：2012-07-10T11:58:51.367
> 
> 标签：android, eclipse

我已经为 Java 开发人员下载了 Eclipse 4.2 IDE，现在我正在尝试安装 Android plusing，但出现此错误：

```
session context was:(profile=epp.package.java, phase=org.eclipse.equinox.internal.p2.engine.phases.Install, operand=null --> 
[R]com.android.ide.eclipse.adt 20.0.0.v201206242043-391819, action=). 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:08:03.987

首先你应该安装JDK。那么请参考下面的链接，这将解决您的问题。 [http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T06:04:18.717

通过在我的主目录中删除解压缩的主 eclipse 目录和 .eclipse 目录并重新启动它来修复！

# android - Android ActionBarSherlock 顶栏

> ID：11412841
> 
> 赞同：5
> 
> 时间：2012-07-10T11:58:54.983
> 
> 标签：android, tabs, actionbarsherlock

![在此处输入图像描述](../Images/1558a497c18dcf26d5e33f438458925d.png)

我想要一个像foursquare这样的Action Bar。我想要的是诸如**Friends、Explore 和 Me 之**类的标签。此外，在选项卡上方，我希望有一个自定义布局，其中包括一些按钮，例如**foursquare 徽标、刷新和**在foursquare 中签入。我创建了选项卡，但无法更改 ActionBarSherlock 中选项卡上方的布局。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T12:29:11.047

要实现 Foursquare 外观，您无需考虑在选项卡上方创建布局。使用 Actionbar Sherlock 时，您只需要担心：

1.  为顶部栏制作背景
2.  为顶部栏制作徽标
3.  在 menu.xml 文件中添加项目，ActionbarSherlock 将使用这些项目用按钮填充顶部（只要将使用 Actionbar Sherlock 样式的样式附加到 thw 活动）。

因此，对于 1\. 和 2\. 来说，这完全是关于使用 styles.xml 文件（应该位于 res 文件夹中的 values 文件夹中），如下所示：

```
<style name="Theme.Example" parent="Theme.Sherlock">
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="absForceOverflow">true</item>       
</style>

<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.ActionBar.Solid">
    <item name="background">@drawable/actionbar_background</item> <-- the background for top bar
    <item name="icon">@drawable/actionbar_logo</item> <-- the logo that goes top left in the top bar
    <item name="backgroundSplit">@drawable/bg_striped_split</item> <-- the image used between the menu items
</style> 
```

对于 3\. 您需要做的就是在 menu.xml 下创建菜单项（应该位于 menu 文件夹中（如果没有，请在 res 文件夹中创建一个））：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">     

<item android:id="@+id/menu_prefs"
      android:icon="@drawable/settings_icon"
      android:title="Preferences"
      android:showAsAction="ifRoom" /> 
</menu> 
```

要查看菜单项，您要做的最后一件事是在活动中使用这些功能：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

public boolean onOptionsItemSelected (MenuItem item) {

    Intent intent;

    switch (item.getItemId())
    {   
    case R.id.menu_prefs:

        // Launch Preference Activity
        intent = new Intent(getBaseContext(), Preferences.class);           
        startActivity(intent);
        break;
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T12:27:12.423

要设置您的自定义操作项（刷新、签入、...），您必须覆盖 onCreateOptionsMenu(Menu menu) 并设置您的自定义菜单。

例如：

文件菜单/my_menu.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/refresh"
        android:icon="@drawable/ic_menu_refresh"
        android:title="refresh"
        android:showAsAction="always">
    </item>

</menu> 
```

然后在您的活动（或片段）中：

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
  MenuInflater inflater = getSupportMenuInflater();
  inflater.inflate(R.menu.my_menu, menu);

  // Allow activity and fragments to add items
  super.onCreateOptionsMenu(menu);

  return true;
} 
```

并且要在它们被选中时得到通知，只需覆盖 onOptionsItemSelected(MenuItem item)：

```
@Override
public boolean onOptionsItemSelected(MenuItem item)
{
  switch (item.getItemId())
  {
    case android.R.id.refresh :
      // refresh your data...
      return true;

    default :
      return super.onOptionsItemSelected(item);
  }
} 
```

# mysql - php mysql 股市交易游戏 - 计算盈亏

> ID：11412842
> 
> 赞同：0
> 
> 时间：2012-07-10T11:59:01.633
> 
> 标签：mysql

我正在使用 php/mysql 在 yahoo 上编写一个基于 yahoo 的股票市场交易游戏，它几乎完成了。我正在努力的最后一部分是计算盈亏

假设将这些作为交易起始余额 = $5000

```
> order_id stock_id  transaction qty_shares cost  user_id
> 1        1234      B           100        1000  1
> 2        1234      B           50         450   1
> 3        1234      S           80         640   1
> 4        1234      S           30         300   1 
```

我在想出一个算法或一个 mysql 查询来计算损益时迷失了方向

在阅读下面发布的 2 条回复后添加附加说明：请注意，在此场景中购买了 150 股，仅售出了 110 股，并且全部以不同的价格购买和出售

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:12:24.000

```
SELECT SUM(qty_shares*cost) AS out, user_id, stock_id, order_id
FROM table
WHERE transaction = 'B'
GROUP BY user_id, stock_id, order_id 
```

然后：

```
SELECT SUM(qty_shares*cost) AS in, user_id, stock_id
FROM table
WHERE transaction = 'S'
GROUP BY user_id, stock_id, order_id 
```

PHP：

```
$Margin = ($query2->in - $query1->out);
$Balance += $Margin; 
```

这一切都可以在单个查询上完成，但如果速度更重要，那么这可能比子查询更快。

编辑：对于每股平均损益：

```
SELECT AVG(qty_shares/cost) AS price_per_share, transaction, user_id, stock_id
FROM table
GROUP BY transaction,user_id,stock_id 
```

这应该返回每个交易类型、每个用户的每个股票类型的平均每股价格。所以交易 S 行是平均售价，交易 B 行是平均买入价。它们之间的差异是平均损益。

```
SELECT 
SUM(
qty_shares *
    (
      SELECT AVG(A.qty_shares/A.cost) AS price_per_share
      FROM table AS A
      WHERE A.transaction = table.transaction
      AND   A.user_id = table.user_id
      AND   A.stock_id = table.stock_id
    )
), user_id, stock_id, order_id
FROM table
WHERE transaction = 'B'
GROUP BY user_id, stock_id, order_id 
```

该查询应返回每行卖出的股票数量乘以当前每股平均价格，得出每笔交易的平均保证金，卖出保证金为负数。您可能会发现查询速度很慢。我建议使用此信息作为起点，并为您的应用程序找到最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:06:53.693

好吧，您只需遍历每一行并计算余额。

显然，此代码将完全取决于您现有的代码以及您如何从数据库中获取行（？），但如果您只想获得一个整体数字，您可以做这样的事情（基于`cost`共享):

```
$start_balance = 5000;
$balance = $start_balance;
foreach ($transactions as $transaction) {
    switch($transaction->transaction) {
        case 'B':
            $balance -= $transaction->qty_shares * $transaction->cost;
            break;
        case 'S':
            $balance += $transaction->qty_shares * $transaction->cost;
            break;
   }
}

$profitloss = $balance - $startbalance; 
```

如果`$profitloss`为负数，则他们根据 内的交易而蒙受损失`$transactions`。

当然，您也可以扩展它以显示基于执行的每笔交易的损益平衡。像这样的东西：

```
$start_balance = 5000;
$balance = $start_balance;
foreach ($transactions as $transaction) {
    $start_balance = $balance;
    switch($transaction->transaction) {
        case 'B':
            $balance -= $transaction->qty_shares * $transaction->cost;
            break;
        case 'S':
            $balance += $transaction->qty_shares * $transaction->cost;
            break;
   }
   $transaction->profitloss = $balance - $startbalance;
} 
```

这样，每笔交易都会产生与之相关的损益。

# javascript - 有没有办法使用 JavaScript 创建 GWT 小部件？

> ID：11412845
> 
> 赞同：0
> 
> 时间：2012-07-10T11:59:06.423
> 
> 标签：javascript, gwt, widget

有没有一种方法可以使用 JavaScript 创建 GWT 小部件（省力）......例如像下面的那个？由于 GWT 编译为 JavaScript，这应该是可能的，之前有没有人尝试过这个......我喜欢 GWT 小部件和 JavaScripting，但不喜欢 Java :)

```
function doSomething(){
    layout = new FlexTable();
    layout.spacing = 6;
    cellFormatter = layout.getFlexCellFormatter();
    // Add a title to the form
    layout.setHTML(0, 0, 'form title');
    cellFormatter.setColSpan(0, 0, 2);
    cellFormatter.setHorizontalAlignment(0, 0, HasHorizontalAlignment.ALIGN_CENTER);
    //......
    // Wrap the content in a DecoratorPanel
    decPanel = new DecoratorPanel();
    decPanel.setWidget(layout);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:04:34.833

您可以使用可以从您的 Java 代码中调用的本机 javascript。

```
 public native void loadJQueryStyling() /*-{
    //Javascript here
 }-*/; 
```

然后，您可以像任何其他 java 方法一样调用它，在其中`AttachHandler`调用它将允许您在它所在的小部件附加到 dom 时调用它。

也就是说，使用 GWT 的全部原因是您最终用 Java 编写客户端和服务器端代码，客户端被交叉编译为非常有效的跨浏览器 JavaScript。

我会正确地学习 Java 并继续在大部分 GWT 应用程序中使用 Java 代码，但在需要它们的地方使用 javascript 本机方法，即做 GWT 不能做的事情。

举个例子，我有一些用 jQuery 编写的注释代码，而我在直接 GWT 中做不到。我编写了一些本机方法，允许我与我编写的 javascript 代码进行交互。您还可以在 javascript 之间传递和返回值。

# linux - 新调整大小的 Lun 未显示正确的 LUN 大小 RHel 5.3

> ID：11412847
> 
> 赞同：0
> 
> 时间：2012-07-10T11:59:26.763
> 
> 标签：linux

我的 linux 服务器在动态扩展（在线）后没有显示新调整大小的光纤 Luns。存储人员已成功将 LUNS 从 1Tb 调整到 2Tb。我们正在运行光纤 SAN（（在 HP EVA 套件，PSV450）不是RHEL 5.3 Linux 机器上的 ISCSI LUN。我做了以下但不成功，我仍然看不到 2Tb 的新大小，我仍然看到 1Tb 的旧大小。请注意，这些 LUN 被配置为 oracle 的原始设备，因此没有使用 LVM。

我是否错过了任何程序

重新扫描 scsi 总线 1\. echo 1 > /sys/block/sda/device/rescan echo 1 > /sys/block/sdb/device/rescan

更新多路径设备的大小

multipathd -k"resize map orac_backup"

3.resize2fs /dev/mapper/orac_backup （似乎失败了，可能是这种情况下不需要的过程）

我还尝试通过运行来测试多路径故障转移] multipathd -k del path sda add path sda

del path sdb 添加路径 sdb

所有命令运行成功，但仍然显示旧 LUN 大小，Linux 操作系统或内核仍然看不到新的 LUN 大小。我已经尝试了几次，并且还在上面编号（列出）的每个过程之间重新启动了多路径服务，但仍然不成功。请帮助，任何帮助将不胜感激。

亲切的问候 D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:07:28.093

您是否尝试在重新扫描后刷新并重新加载地图？multipath -f orac_backup 和之后的 multipath -r

*   大号

# jquery - Google Maps v3 商店定位器问题

> ID：11412850
> 
> 赞同：0
> 
> 时间：2012-07-10T11:59:31.837
> 
> 标签：jquery, google-maps, google-maps-api-3

我一直在使用 Google Maps API v3 创建中心定位器，如本教程[https://developers.google.com/maps/articles/phpsqlsearch_v3](https://developers.google.com/maps/articles/phpsqlsearch_v3)中所述。

我已根据自己的需要对其进行了编辑，并在地图下方有一个表格，其中包含当地商店的详细信息。这适用于 Chrome、Firefox 和 IE8，但我无法让它在 IE7 中运行。我没有收到任何错误，只是结果表根本不会显示，有人有什么想法吗？我使用了 IE javascript 调试工具，数据似乎正常

这是JS

```
$(document).ready(function () {

$('form').after('<div id="map"></div>');
$('#map').after('<div id="directionsPanel"></div>');
$('#directionsPanel').after('<h3 id="local-centres">Your search results</h3>');
$('h3#local-centres').hide();
$('h3#local-centres').after('<table id="locationSelect"></table>');
var tableHeaders = '<ul class="col-titles"><li class="centre-title">Centre</li><li class="address-title">Address &amp Tel</li><li class="distance-title">Distance</li><li class="option-title">Options</li></ul>'

$('#directionsPanel').hide();
$('#directionsPanel').prepend('<h2>Directions by text - Driving</h2>');
$('#directionsPanel').before('<a href="#" class="print-locations" id="print-locations">Print text directions</a>');
$('a.print-locations').hide();

function runFunctionIfEnter(e, fnName) { // the arguments here are the event (needed to detect which key is pressed), and the name of the resulting function to run if Enter has been pressed.
    var keynum; // establish variable to contain the value of the key that was pressed
    // now, set that variable equal to the key that was pressed
    if (window.event) // ID
    {
        keynum = e.keyCode;
    } else if (e.which) // other browsers
    {
        keynum = e.which;
    }
    if (keynum == 13) { // if the key that was pressed was Enter (ascii code 13)
        eval(fnName)(); // run the resulting function name that was specified as an argument
    }
}

$('#showmarkers').click(function () {
    searchLocations();

});
$('input#addressInput').keypress(function (e) {
    if (e.keyCode == 13) {
        searchLocations();
        return false;
    }
});
$('#radiusSelect').change(function () {
    searchLocations();
});
$('a.print-locations').click(function () {
    printIt(document.getElementById('directionsPanel').innerHTML);
    return false;
});

$('input#reset-markers').click(function () {
    clearLocations();
    $('ul.col-titles').remove();
    allLocations();
});

var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;
var markers = [];
var locationSelect;
var geocoder;
var userMarker;
var win = null;

// $('table#locationSelect').prepend('<tr><th>Centre</th><th>Address &amp; Tel</th><th>Distance</th><th>Options</th></tr>');

function printIt(printDirection) {

    win = window.open();
    self.focus();
    win.document.open();
    win.document.write('<' + 'html' + '><' + 'head' + '><' + 'style' + '>');
    win.document.write('body, td { font-family: Verdana; font-size: 10pt;}');
    win.document.write('<' + '/' + 'style' + '><' + '/' + 'head' + '><' + 'body' +   '>');
    win.document.write(printDirection);
    win.document.write('<' + '/' + 'body' + '><' + '/' + 'html' + '>');
    win.document.close();
    win.print();
    win.close();
}

// initialise the map 
function load() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    geocoder = new google.maps.Geocoder();
    map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(53, -1.7),
        zoom: 6,
        mapTypeId: 'roadmap',
        mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        }
    });

    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById("directionsPanel"));
    infoWindow = new google.maps.InfoWindow();
    locationSelect = document.getElementById("locationSelect");
allLocations();
}

load();

function allLocations() {

    var searchUrl = 'search_all_genxml.php';
    downloadUrl(searchUrl, function (data) {
        var xml = parseXml(data);
        var markerNodes = xml.documentElement.getElementsByTagName("marker");
        var bounds = new google.maps.LatLngBounds();
        //loop through all markers returned and save in variables
        if (markerNodes.length < 1) {
            $('h3#local-centres').hide();
            var noCentres = "Sorry we have no centres in this distance range. Please try expanding your search";
            alert(noCentres);
            _gaq.push(['_trackEvent', 'search', 'click', 'search_none-location']);

        } else {

            for (var i = 0; i < markerNodes.length; i++) {
                var name = markerNodes[i].getAttribute("name");
                var address = markerNodes[i].getAttribute("address");
                var postcode = markerNodes[i].getAttribute("postcode");
                var telephone = markerNodes[i].getAttribute("telephone");
                var email = markerNodes[i].getAttribute("email");
                var page = markerNodes[i].getAttribute("page");
                var distance = parseFloat(markerNodes[i].getAttribute("distance"));
                var latlng = new google.maps.LatLng(
                parseFloat(markerNodes[i].getAttribute("lat")), parseFloat(markerNodes[i].getAttribute("lng")));
                // call createOption and createMarker functions
                //createOption(name, address, postcode, telephone, email, page, distance, i);
                //alert(name);
                createMarker(latlng, name, address, postcode, telephone, email, page);
                bounds.extend(latlng);
            }
            // Don't zoom in too far on only one marker
            if (bounds.getNorthEast().equals(bounds.getSouthWest())) {
                var extendPoint1 = new google.maps.LatLng(bounds.getNorthEast().lat() + 0.01, bounds.getNorthEast().lng() + 0.01);
                var extendPoint2 = new google.maps.LatLng(bounds.getNorthEast().lat() - 0.01, bounds.getNorthEast().lng() - 0.01);
                bounds.extend(extendPoint1);
                bounds.extend(extendPoint2);
            }

        }
        map.fitBounds(bounds);
        //locationSelect.style.visibility = "visible";
        var localCentres = document.getElementById('local-centres');
        //localCentres.style.visibility = "visible";
        locationSelect.onchange = function () {
            var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
            google.maps.event.trigger(markers[markerNum], 'click');
        };
    });

}

// Geocode the users address and pass result to searchLocationsNear function
function searchLocations() {
    //console.log('hello');
    var address = document.getElementById("addressInput").value;
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({
        address: address
    }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            searchLocationsNear(results[0].geometry.location);
            map.setCenter(results[0].geometry.location);
            userMarker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
            var htmlContent = "<div>" + "<h3>" + "Your Address" + "</h3>" + "<p>" + address + "</p>" + "</div>";
            var infowindow = new google.maps.InfoWindow({
                content: htmlContent
            });
            google.maps.event.addListener(userMarker, 'click', function () {
                infowindow.open(map, userMarker);
            });

            if($('ul.col-titles').length > 0){

            } else {
                $('table#locationSelect').before(tableHeaders);
                console.log(locationSelect);
            }

        } else if (address === '') {
            clearLocations();
            allLocations();
            _gaq.push(['_trackEvent', 'search', 'click', 'search_none-location']);
        } else {
            alert(address + ' not found');
            _gaq.push(['_trackEvent', 'search', 'click', 'search_none-location']);
        }
    });
}

// Clear all locations on map after 
function clearLocations() {
    directionsDisplay.setMap(null);
    if (userMarker) {
        userMarker.setMap(null);
    }
    infoWindow.close();
    for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null);
    }
    markers.length = 0;

    //var children = document.getElementById('locationSelect').childNodes;
    //locationSelect.innerHTML = "";
    $('#locationSelect tr').remove();
    $('#directionsPanel').slideUp('slow');
    $('a.print-locations').hide();
    $('h3#local-centres').hide();
}

// call clearLocations and loop through all results
function searchLocationsNear(center) {
    clearLocations();

    var radius = document.getElementById('radiusSelect').value;
    var searchUrl = 'search_genxml.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
    downloadUrl(searchUrl, function (data) {
        var xml = parseXml(data);
        var markerNodes = xml.documentElement.getElementsByTagName("marker");
        var bounds = new google.maps.LatLngBounds();
        //loop through all markers returned and save in variables
        if (markerNodes.length < 1) {

            var noCentres = "Sorry we have no centres in this distance range. Please try expanding your search";
            alert(noCentres);
            _gaq.push(['_trackEvent', 'search', 'click', 'search_none-location']);

        } else {

            for (var i = 0; i < markerNodes.length; i++) {
                var name = markerNodes[i].getAttribute("name");
                var address = markerNodes[i].getAttribute("address");
                var postcode = markerNodes[i].getAttribute("postcode");
                var telephone = markerNodes[i].getAttribute("telephone");
                var email = markerNodes[i].getAttribute("email");
                var page = markerNodes[i].getAttribute("page");
                var distance = parseFloat(markerNodes[i].getAttribute("distance"));
                var latlng = new google.maps.LatLng(
                parseFloat(markerNodes[i].getAttribute("lat")), parseFloat(markerNodes[i].getAttribute("lng")));
                // call createOption and createMarker functions
                console.log(locationSelect);
                createOption(name, address, postcode, telephone, email, page, distance, i);

                createMarker(latlng, name, address, postcode, telephone, email, page);
                bounds.extend(latlng);
            }
            $('h3#local-centres').show();
            // Don't zoom in too far on only one marker
            if (bounds.getNorthEast().equals(bounds.getSouthWest())) {
                var extendPoint1 = new google.maps.LatLng(bounds.getNorthEast().lat() + 0.01, bounds.getNorthEast().lng() + 0.01);
                var extendPoint2 = new google.maps.LatLng(bounds.getNorthEast().lat() - 0.01, bounds.getNorthEast().lng() - 0.01);
                bounds.extend(extendPoint1);
                bounds.extend(extendPoint2);
            }

        }
        map.fitBounds(bounds);
        locationSelect.style.visibility = "visible";
        var localCentres = document.getElementById('local-centres');
        localCentres.style.visibility = "visible";
        locationSelect.onchange = function () {
            var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
            google.maps.event.trigger(markers[markerNum], 'click');
        };
    });
}

//create a custom marker
function createMarker(latlng, name, address, postcode, telephone, email, page) {

    var img = new google.maps.MarkerImage('kaplan-logo.png', new google.maps.Size(20, 50), new google.maps.Point(0, 0), new google.maps.Point(10, 40));
    var shape = {
        coord: [1, 1, 1, 20, 18, 20, 18, 1],
        type: 'poly'
    };
    var html = "<div class='center-info'>" + "<h2>" + name + "</h2>" + "<p>" + address + "</p>" + "<p class='postcode'>" + postcode + "</p>" + "<p>Tel: " + telephone + "</p>" + "<a href=mailto:" + email + ">" + email + "</a>" + "<a href=" + page + " target='_blank'>" + "View centre page" + "</a>" + "</div>";
    var infowindow = new google.maps.InfoWindow({
        content: html
    });
    var marker = new google.maps.Marker({
        map: map,
        icon: img,
        shape: shape,
        animation: google.maps.Animation.DROP,
        position: latlng
    });

    markers.push(marker);
    //alert(markers);
    google.maps.event.addListener(marker, 'click', function () {
        infowindow.open(map, marker);
    });
}

// create text lists of address nearby
function createOption(name, address, postcode, telephone, email, page, distance, i) {
    i = i + 1;
    var rowOption = document.createElement("tr");
    rowOption.className = 'local-centre';
    var titleOption = document.createElement("td");
    titleOption.className = 'centre-name';
    var titleLink = document.createElement("a");
    titleLink.setAttribute('href', page);
    titleLink.innerHTML = "<h3>" + name + "</h3>";
    var addressOption = document.createElement("td");
    addressOption.className = 'address';
    addressOption.innerHTML = "<p>" + address + "</p>" + "<p class='postcode" + i + "'>" + postcode + "</p>" + "<p> Tel: " + telephone + "</p>";
    var distanceOption = document.createElement("td");
    distanceOption.className = 'distance';
    distanceOption.innerHTML = "<p class='distance'>" + distance.toFixed(1) + " miles" + "</p>";
    var directionsOption = document.createElement("td");
    directionsOption.className = "directions";
    directionsOption.innerHTML = "<button class='direction-btn directionSubmit" + i + "' type='button'>Get Directions</button>";
    var pageUrl = document.createElement("a");
    pageUrl.className = 'centre-url';
    pageUrl.innerHTML = "View centre page >";
    pageUrl.setAttribute('href', page);
    pageUrl.setAttribute('target', '_blank');
    directionsOption.appendChild(pageUrl);
    locationSelect.appendChild(rowOption);
    console.log(rowOption);
    rowOption.appendChild(titleOption);
    titleOption.appendChild(titleLink);
    rowOption.appendChild(addressOption);
    rowOption.appendChild(distanceOption);
    rowOption.appendChild(directionsOption);
    $('tr:odd').addClass("odd");
    $('tr:even').addClass("even");
    //divOptionContent.appendChild(directionsDiv);
    $('.directionSubmit' + i).click(function () {
        var caddress = $('.postcode' + i).text();
        var address = $('#addressInput').val();
        calcRoute(address, caddress);
        $('#directionsPanel').slideDown('slow', function () {
            $('a.print-locations').show();

        });
        $('html, body').animate({
            scrollTop: 0
        }, 'slow');

    });
}

// calculate the route from users address to centre
function calcRoute(address, caddress) {
    var request = {
        origin: address,
        destination: caddress,
        travelMode: google.maps.TravelMode.DRIVING,
        unitSystem: google.maps.UnitSystem.IMPERIAL
    };
    directionsService.route(request, function (result, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(result);
            directionsDisplay.setMap(map);
        }
    });

} // end of calcRoute function

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request.responseText, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function parseXml(str) {
  if (window.ActiveXObject) {
    var doc = new ActiveXObject('Microsoft.XMLDOM');
    doc.loadXML(str);
    return doc;
  } else if (window.DOMParser) {
    return (new DOMParser).parseFromString(str, 'text/xml');
  }
}

function doNothing() {}

}); // end of jquery 
```

这是HTML

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>

<meta charset="UTF-8" />
<title>Centre Search</title>
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<link rel="stylesheet" href="_assets/css/style.css" media="screen" />
<link rel="stylesheet" href="_assets/css/print.css" media="print" />

</head>
<body>

<div id="centre-map">
<h2>Centre Locations</h2>

<p>The map below allows you find your nearest Centre, get directions and contact the relevant team.</p>

    <form>
        <label>Your City / Postcode:</label>
        <input type="text" id="addressInput" />
        <label>Radius:</label>
        <select id="radiusSelect" onchange="_gaq.push(['_trackEvent', 'search', 'click', 'search_select_location']);">
            <option value="5">5 Miles</option>
            <option value="10">10 Miles</option>
            <option value="25" selected>25 Miles</option>
            <option value="50">50 Miles</option>
            <option value="75">75 Miles</option>
        </select>
        <input type="button" value="Search" id="showmarkers" />
        <input type="reset" value="Reset" id="reset-markers" />
    </form>

</div>

<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCDgCnbWSMQhBBmLnIOBKGn1EznhPVcVoY&sensor=false"></script>
<script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/src/infobubble.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="_assets/js/script.js?v=<?=filemtime('_assets/js/script.js');?>"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:56:34.823

console.log() 会导致IE7出现问题，把你所有的console语句取出或注释掉再试一次。没有太多的答案，我在工作，只是在戳这个，这完全符合规则吗？我很确定您的其余代码是否可以正常工作，删除 console.log() 语句将在 IE 7 中修复它。

阅读本文：[在 IE 中测试 console.log 语句](https://stackoverflow.com/questions/7585351/testing-for-console-log-statements-in-ie)

# iphone - 比较 iPhone 中的两个 NSDate

> ID：11412852
> 
> 赞同：2
> 
> 时间：2012-07-10T11:59:33.680
> 
> 标签：iphone, ipad, comparison, nsdate

我是 iPhone 开发者的新手，

我想比较两个日期，第一个日期将来自数据库，比如说，`newDate`第二个是今天的日期，

如果今天更大，`newDate`那么我想显示警报。

这是我的代码片段，

```
NSString *newDate = [formatter stringFromDate:st];
NSDate *today=[[NSDate alloc]init];

if ([today compare:newDate] == NSOrderedDescending)
{
    NSLog(@"today is later than newDate");        
}
else if ([today compare:newDate] == NSOrderedAscending)
{
    NSLog(@"today is earlier than newDate");        
}
else
{
    NSLog(@"dates are the same");        
} 
```

但它崩溃了，在编译它时也会在这里向我显示警告`[today compare:newDate]`

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T12:03:59.933

问题是，您正在比较字符串和日期。如果你看一下`newDate`，你会发现它是 a`NSString`而不是 a `NSDate`。如果在`compare:`上使用方法`NSDate`，则两个对象都必须是`NSDate`'s。`st`查看您的代码，它看起来`NSDate`对应于`newDate`（尽管您的命名似乎有点奇怪），尝试`today`使用它而不是`newDate`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T12:09:54.777

您正在尝试将日期对象与字符串进行比较。您需要与日期对象进行比较。

```
[today compare:newDate] == NSOrderedDescending) 
```

`newDate`应该是一个 NSDate 实例。我已经完成了这个及其工作。

# c# - 在c#中从文本文件中拆分文本

> ID：11412853
> 
> 赞同：0
> 
> 时间：2012-07-10T11:59:34.927
> 
> 标签：c#, .net, split

我的文本文件中有一个内容，如下所示

![在此处输入图像描述](../Images/726c91f0285ca8c18d6c1b87f9407b4c.png)

现在我想拆分所有具有“：”的内容，例如 Mode-->Allowed、Status --> Started 等 BSSID 将被免除。

任何人都可以帮助我了解如何拆分内容，我尝试根据“：”拆分内容，但我得到了托管网络设置 -------------- 和托管网络状态 -- -------- 也在分裂中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:02:52.727

查看您的文件，我会逐行阅读，拆分“：”（空格是不拆分 IPv6 地址的简单方法）。然后只接受包含该字符串的行。就像是：

```
from line in textFileLines.Where(x=>x.Contains(": "))
select x.Split(": ") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:12:37.123

我会选择@lc.的答案，但如果您需要更多自定义逻辑的东西，试试这个：

```
var keyValue = new Dictionary<string, string>();
foreach (var lineItem in System.IO.File.ReadAllLines(@"C:\Users\Kane\Desktop\yourFile.txt").Where(x => x.Contains(": ")))
{
    var splitPosition = lineItem.IndexOf(": ", System.StringComparison.OrdinalIgnoreCase);
    var key = lineItem.Substring(0, splitPosition);
    var value = lineItem.Substring(splitPosition + 1);

    // add in functions for checking null
    // add in functions for trimming
    // add in special cases for 
    keyValue.Add(key, value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:08:29.023

如果您有像 (x, y) 一样的固定长度列，那么我认为这是阅读文本文件的更合适的方式

```
 public DataTable GetDataTableFromTextFile(string filepath) 
    {
                                string line;
                                DataTable dt = new DataTable();                         
                                using (TextReader tr = File.OpenText(filepath))
                                {
                                    while ((line = tr.ReadLine()) != null)
                                    {
                                        string[] items = line.Split('\t',":",";","=");
                                        if (dt.Columns.Count == 0)
                                        {
                                            dt.Columns.Add(new DataColumn("FirstColumn", typeof(string)));
                                            dt.Columns.Add(new DataColumn("SecondColumn", typeof(string)));
                                            dt.Columns.Add(new DataColumn("ThridColumn", typeof(string)));

                                        }

                                        if (items.Length > 0 && !string.IsNullOrWhiteSpace(items[0].ToString()))
                                        {
                                            dt.Rows.Add(items);                                       
                                        }
                                    }
                                }
    return dt;

} 
```

完全希望这对您有所帮助。

您可以根据需要添加列。并且 dt.rows.add(item) 将仅在行中添加列，因为它具有例如 item 只有两个项目，然后该行将仅添加两列。

# jquery - 如何使用 jQuery 查找特定脚本

> ID：11412856
> 
> 赞同：2
> 
> 时间：2012-07-10T11:59:41.257
> 
> 标签：jquery

我想查看我的 html 文件并确定是否存在特定脚本。

我写了这段代码：

```
var scriptExist = false;
$('script').each(function(i,e){                 
if( $(e).attr('src')){
if( $(e).attr('src').search("load.js)!=-1){    
scriptExist = true;
return false;
}            
}
 });
 return scriptExist;                    
}, 
```

可以在不使用 use.each 的情况下在 jQuery 中执行此 lofic 并找到特定的脚本，例如 src = load.js ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:03:33.530

试试这个：

```
$('script').filter(function(){
   return $(this).attr('src') === "load.js"
}) 
```

或者您可以使用 [`attribute contains selector`](http://api.jquery.com/attribute-contains-selector/)：

> 选择具有指定属性且值包含给定子字符串的元素。

```
$('script[src*="load.js"]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:04:42.133

您可以使用[Attribute Equals](http://api.jquery.com/attribute-equals-selector/)选择器：

```
var $script = $("script[src='load.js']");
var scriptExists = $script.length > 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:07:26.047

```
var script = $("script[src='load.js']");
if (script.length>0)
alert("exists") 
```

# spring - 使用 Scala 的 Spring 事务

> ID：11412860
> 
> 赞同：2
> 
> 时间：2012-07-10T11:59:59.543
> 
> 标签：spring, scala, transactional, spring-transactions

我尝试在我的 Spring (v 3.1) Web 应用程序中使用一些在 scala 中编程的 bean，并且在事务方面遇到了奇怪的问题。

我在 Roo 中设置了一个小而完整的 Spring 应用程序来显示我的问题。老实说，我不知道为什么它不起作用......

```
project --topLevelPackage com.app
jpa setup --provider ECLIPSELINK --database DERBY_EMBEDDED
entity jpa --class com.app.MyEntity
field string --fieldName title 
```

然后我在java中创建了接口

```
package com.app;
public interface IScalaMainClass {
 void doSomething();
}

package com.app;
public interface IScala1 {
 void someMethod();
}

package com.app;
public interface IScala2 {
 void someMethod();
} 
```

这些实现是在 Scala 中创建的，其中 Scala1 持久化 MyEntity 并且 Scala2 进行 DELETE 查询：

```
package com.app

import org.springframework.transaction.annotation.Transactional
import org.springframework.stereotype.Repository
import org.springframework.beans.factory.annotation.Autowired

@Repository class ScalaMainClass extends com.app.IScalaMainClass {
 @Autowired var bean1: IScala1 = null
 @Autowired var bean2: IScala2 = null

 @Transactional def doSomething() = {
  bean1.someMethod()
  bean2.someMethod()
 }
}

package com.app

import org.springframework.stereotype.Repository
import javax.persistence.{EntityManager, PersistenceContext}

@Repository class Scala1 extends com.app.IScala1 {
 @PersistenceContext var em: EntityManager = null

 def someMethod = {
  val e = new MyEntity
  em persist e
 }
}

package com.app

import org.springframework.transaction.annotation.Transactional
import org.springframework.stereotype.Repository
import javax.persistence.{EntityManager, PersistenceContext}

@Repository class Scala2 extends com.app.IScala2 {
 @PersistenceContext var em: EntityManager = null

 @Transactional def someMethod = {
  val q = em createQuery "DELETE FROM MyEntity"
  q executeUpdate
 } 
```

}

最后创建执行 IScalaMainClass 的 Java 测试：

```
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.transaction.TransactionConfiguration;
import org.springframework.test.annotation.Rollback;
import org.springframework.beans.factory.annotation.Autowired;

import org.junit.runner.RunWith;
import org.junit.Test;
import org.junit.Assert;

import com.app.IScalaMainClass;

@ContextConfiguration(locations = "classpath:/META-INF/spring/applicationContext.xml")
@RunWith(SpringJUnit4ClassRunner.class)
@TransactionConfiguration(defaultRollback = false)
public class AppTest {
 @Autowired private IScalaMainClass smc;

 @Test public void testIt() {
  smc.doSomething();
 }
} 
```

如果您现在将 scala 依赖项添加到 pom.xml 并执行“mvn test”，您将收到

```
javax.persistence.TransactionRequiredException: 
Exception Description: No transaction is currently active
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:22:43.433

当您查看 Spring 对 Transaction 和其他面向方面的特性的支持时，您需要非常小心。

*   无法自动装配不可变字段：自动装配是在初始化后建立依赖关系的模式，val 是在初始化后无法更改的不可变属性

*   正如您在文档中看到的那样，Spring AOP 支持不是基于字节码编织，而是纯粹用 Java 实现的： http: [//static.springsource.org/spring/docs/3.0.x/reference/aop.html](http://static.springsource.org/spring/docs/3.0.x/reference/aop.html)

这意味着只有通过 Spring IoC 创建的 bean 才能受益于 Spring AOP 支持。

如果您查看本章的介绍，您可以阅读：

> AOP 在 Spring 框架中用于...
> 
> ... 提供声明性企业服务，尤其是作为 EJB 声明性服务的替代品。最重要的此类服务是声明式事务管理。

因此，如果您的 bean 不是通过 Spring 创建的，那么您将无法获得 Spring 事务支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T07:50:02.040

虽然我主要同意@Edmondo1984 的回答，但我认为上面的 Rainerh 代码已将所有 bean 放在 Spring 上下文中，因此它可以与 Spring Transaction 一起使用。

从上面的代码，我认为你应该改变测试如下

```
@ContextConfiguration(locations = "classpath:/META-INF/spring/applicationContext.xml")
public class AppTest extends AbstractTransactionalJUnit4SpringContextTests {
 @Autowired private IScalaMainClass smc;

 @Test public void testIt() {
  smc.doSomething();
 }
} 
```

不要忘记导入`org.springframework.test.context.junit4.AbstractTransactionalJUnit4SpringContextTests`

# javascript - 如何使用 JS/Jquery 清除 div 容器的内容？

> ID：11412861
> 
> 赞同：1
> 
> 时间：2012-07-10T12:00:00.670
> 
> 标签：javascript, jquery

我一直在开发一些页面，我需要清除一些 div 的内容：

```
 <table>
                    <tbody>
                    <div class="records_content">
                        <?php
                            $i=0;
                            foreach ($records as $record) {
                                echo "<tr class = 'output' style='border-bottom: 1px dotted silver;'>";
                                echo "<td width='400'>" . strip_tags($record['language_value']) . "</td>";
                                if ($record['approved_translation'])
                                {
                                    echo "<td width='200' height='30'><div class='field' id='".$record['label_value']."/".$record['language_id']."'>".
                                        strip_tags($record['approved_translation']['language_value'])."</div></td><td><button class='btn btn-info' id='{$record['label_value']}/{$record['language_id']}' href='#'>More...</button>"."</td>";
                                }
                                else
                                {
                                    echo "<td  width='200'>"."<div id='".$record['label_value']."/".$record['language_id']."'><span class='no_translate'>Not translated</span></div>" . "</td>";   
                                }                   
                                echo '</tr>';
                                $i++;
                            }
                        ?>
                    </div>
                    </tbody>
                </table> 
```

一段JS代码：

```
 $(".page_button").click(function () {
                $.post("http://"+document.location.host+"/index.php/welcome/update_records_set/"+this.id,
                    function(data)
                    {
                        alert('123');
                        $(".records_content").empty();
                    });
            }); 
```

该脚本有效，因为我看到了“123”通知，但带有“.records_content”类的 div 容器不清楚。请告诉我，我该如何解决？谢谢你。

**更新：** 现在可以了。但是我有一个新的分页问题：

```
 <br><b>Page:</b><br/>
                <?php
                    for($i=0; $i<$count; $i++)
                    {
                        if ($i==0)
                        {
                            echo "<div class='selected_page_button'>".($i+1)." "."</div>";
                        }
                        else
                        {
                            echo "<div class='page_button'>".($i+1)." "."</div>";
                        }
                    }
                ?> 
```

以及更改按钮类别的代码：

```
 $(".page_button").click(function () {

                    $(".selected_page_button").attr("class", "page_button");
                    $(this).attr("class", "selected_page_button");
                }); 
```

它适用于所有按钮，无需先。创建我的页面时，选择了第一页。当我点击“2”时，“1”很简单，“2”被选中。所有没有“1”的按钮也是如此：如果我点击“2”（或其他），那么我不能先点击！“1”会改变它的视图但不会改变行为，因为简单的按钮是可点击的，而选定的按钮是不可点击的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:10:07.127

正如您的代码已经说明的那样，它确实`.empty()`可以清除，但它会在警报*之后清除。*见这里：http: [//jsfiddle.net/YPLeB/](http://jsfiddle.net/YPLeB/)

单击“确定”后，`DIV`按预期清除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:00:47.247

尝试这个：

```
$(".records_content").html(''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:01:46.107

您会在 HTML 被清空**之前看到警报发生。**尝试在函数之后放置警报`.empty()`或使用非阻塞命令，例如`console.log()`调试代码。

你的代码本身是正确的......只有命令的顺序会让你绊倒......

# jquery - jquery：添加设置时间功能

> ID：11412871
> 
> 赞同：0
> 
> 时间：2012-07-10T12:00:36.533
> 
> 标签：jquery, animation, settimeout

我找到了 Mary Lou 的代码[http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizo​​ntal](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery) -page-scrolling-with-jquery 我尝试在 5 秒后自动添加动画。不幸的是，无济于事。

我可以寻求帮助，并添加这些行。我不是程序员，我真的不知道还有什么奇怪的技巧。

```
$(function() {
            $('ul.nav a').bind('click',function(event){
                var $anchor = $(this);
                    $('html, body').stop().animate({
            scrollLeft: $($anchor.attr('href')).offset().left
            }, 1000);
            event.preventDefault();
            });
       }); 
```

THX 德德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:23:38.800

`1000`设置`animate`动画持续时间，所以如果你想在动画明星之前等待，你应该使用：像`delay(5000)`这样：

```
$(function() { 
            $('ul.nav a').bind('click',function(event){ 
                var $anchor = $(this); 
                    $('html, body').stop().delay(5000).animate({ 
            scrollLeft: $($anchor.attr('href')).offset().left 
            }, 1000);
            event.preventDefault(); 
            }); 
       }); 
```

如果`delay`不起作用，请尝试写入`idle`而不是延迟。

如果您希望动画在页面加载后单击 OR 5 秒时起作用，您应该这样做：

```
$(document).ready(function () {
      $('ul.nav a').bind('click',function(event){ 
           var $anchor = $(this); 
           $('html, body').stop().animate({ 
                scrollLeft: $($anchor.attr('href')).offset().left 
           }, 1000);
           event.preventDefault(); 
       }); 
       var $anchor = $('ul.nav a');
       $('html, body').stop().delay(5000).animate({ 
            scrollLeft: $($anchor.attr('href')).offset().left 
       }, 1000);
       event.preventDefault(); 

}); 
```

希望这有帮助！

# ruby-on-rails - 如何为 mongoid 设置时区

> ID：11412872
> 
> 赞同：2
> 
> 时间：2012-07-10T12:00:46.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

我正在为我的 rails 应用程序使用 mongoid。

我想为 mongoid 设置时区。

我在 application.rb 中试过这个

```
config.mongoid.time_zone  = 'Kolkata' 
```

但没有运气。我也试过这个

```
use_utc: false
use_activesupport_time_zone: true 
```

它仍然使用默认时区 UTC。

轨道 3.0.10

mongoid 2.2.4

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:03:17.390

在 application.rb 像这样

```
config.time_zone = 'Kolkata' 
```

在 mongoid.yml 中

```
use_activesupport_time_zone: true 
```

# drupal - 小镇商店的产品目录

> ID：11412875
> 
> 赞同：0
> 
> 时间：2012-07-10T12:01:10.443
> 
> 标签：drupal, joomla, content-management-system, cart, shopping

我来自一个小镇，那里有许多商店，分散在镇上，购物时很难找到某种产品

-希望建立该镇商店的开放在线目录。

*   一个开放的网站，每个商店都可以创建一个帐户并将可用的产品添加到网站上，这将使购物更容易。没有电子商务

你会推荐什么平台？

我应该去CMS吗？

购物车脚本？

或聘请开发人员？

我的预算很紧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:59:25.490

我个人建议使用 Joomla 2.5 并下载和购物车扩展程序，例如 JoomShopping 或 VirtueMart。JoomShopping 有点小，不那么复杂，但仍然非常强大，易于使用，并且一直是我个人和客户网站的选择。您还可以查看 Joomla Extensions Directory 站点并测试更多扩展，看看哪一个适合您的要求。

我不建议建立自己的购物车，因为这需要很长时间才能完成，即使是最有经验的 PHP 开发人员也会发现这是一个挑战。

问候。

# windows - UTF-8 字符在记事本中丢失或显示为框，但在网络浏览器和其他文本编辑器中工作正常

> ID：11412879
> 
> 赞同：4
> 
> 时间：2012-07-10T12:01:18.807
> 
> 标签：windows, utf-8, character-encoding, notepad

我将 UTF-8 文本存储在 DB 中并用作`text/plain; charset=utf-8`Web 应用程序。所有的东西都工作正常。我可以毫无问题地在浏览器窗口上看到 UTF-8 文本。

但是当我将该文本保存到一个文件并尝试在 Windows 记事本中打开它时，我丢失了一些字符并显示为一个小矩形框。但是，文本文件在 EditPlus 和 Notepad++ 等其他编辑器中看起来不错。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:09:00.693

如果它在其他编辑器中看起来不错，那么文本本身就很好。如果它在浏览器中看起来不错，那么响应也可能很好（但最好在浏览器中检查页面信息并查看编码是什么）。您的问题可能与记事本本身有关。有时它需要 BOM 才能正确检测 Unicode。但是 BOM 可以破坏其他不支持它的应用程序。您还应该在不同版本的 Windows 上尝试记事本。我刚刚尝试在 Windows 7 中打开一个 UTF-8 文件，对我来说看起来不错。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-10T12:05:14.537

如果您使用 tomcat 作为应用程序服务器，您可能希望将其添加到其配置中：“-Dfile.encoding=UTF-8”

另外，请看这里： [设置默认 Java 字符编码？](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-11-26T10:02:36.633

您需要使用如下：

response.setContentType("text/html; charset=utf-8"); response.setCharacterEncoding("UTF-8");

# c# - C#中的哈希密码？Bcrypt/PBKDF2

> ID：11412882
> 
> 赞同：43
> 
> 时间：2012-07-10T12:01:24.547
> 
> 标签：c#, .net, hash, passwords, bcrypt

我查找了有关如何执行此操作的 msdn 和其他资源，但我没有找到明确的解决方案。这是我找到的最好的[http://blogs.msdn.com/b/shawnfa/archive/2004/04/14/generating-a-key-from-a-password.aspx?Redirected=true](http://blogs.msdn.com/b/shawnfa/archive/2004/04/14/generating-a-key-from-a-password.aspx?Redirected=true)

我想使用 bcrypt 或 PBKDF2（这似乎与 bcrypt 相关）在 C# 中对密码进行哈希处理。我喜欢试验我的计算机需要多少轮来散列密码。然而，当每个人都在谈论散列时，一切似乎都是关于加密的。我想不通。我如何散列密码？它看起来更像 PBKDF2 (Rfc2898?) 是一个随机数生成器，我使用 GetBytes(amount) 来选择我的哈希大小有多大。

我很困惑。我如何使用 bcrypt/PBKDF 对密码进行哈希处理？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-10T12:28:06.557

## PBKDF2

你真的很亲近。您提供的链接向您展示了如何调用[Rfc2898DeriveBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)函数来获取 PBKDF2 哈希结果。但是，您对示例使用派生密钥进行加密这一事实感到失望（PBKDF1 和 2 的最初动机是创建适合用作加密密钥的“密钥”派生函数）。当然，我们不想将输出用于加密，而是将其用作哈希。

如果您想要 PBKDF2，您可以尝试为此目的编写的[SimpleCrypto.Net库。](http://shawnmclean.com/simplecrypto-net-a-pbkdf2-hashing-wrapper-for-net-framework/)如果您[查看实现](https://github.com/shawnmclean/SimpleCrypto.net/blob/50adce7cbd654f54f0fd09288cc98417b8212f3d/src/PBKDF2.cs#L187)，您会发现它实际上只是（您猜对了）[Rfc2898DeriveBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)的一个薄包装器。

## BCrypt

如果你想试验这个变体，你可以尝试名为（还有什么）[BCrypt.NET的 C# 实现。](http://bcrypt.codeplex.com/)

**免责声明：**我没有使用或测试过我链接到的任何库... YMMV

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-07-09T09:37:45.643

首先，我敦促大家使用平台本身附带的*经过密码验证的参考算法。*

**不要使用 3rd 方包和未经验证的 OSS 组件**或您刚刚从 Internet 复制粘贴的任何其他代码。

对于 .NET**使用 PBKDF2**而**不是 bCrypt**，因为没有经过认证的 bCrypt for .NET 实现

我并不是说对任何高尚的开源开发者（我自己）有任何不尊重，但你永远无法确定他们的网站在 10 年内不会被黑客入侵，最终你会从 Nuget/npm 或其他网站获得恶意软件包包管理器。

有关验证的更多信息可以在[这个 SO 答案中找到](https://stackoverflow.com/questions/481160/is-bcrypt-a-good-hashing-algorithm-to-use-in-c-where-can-i-find-it/6228051#6228051)

现在，回到 PBKDF2，这是简单的代码

```
public static byte[] PBKDF2Hash(string input, byte[] salt)
{
    // Generate the hash
    Rfc2898DeriveBytes pbkdf2 = new Rfc2898DeriveBytes(input, salt, iterations: 5000);
    return pbkdf2.GetBytes(20); //20 bytes length is 160 bits
} 
```

如果您需要哈希的字符串表示形式（不是字节数组） - 您可以从这个答案[http://stackoverflow.com/a/624379/714733使用这个超快转换类](http://stackoverflow.com/a/624379/714733)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-09-20T14:03:02.883

我花了很[长时间](https://stackoverflow.com/questions/5393803/can-someone-explain-how-bcrypt-verifies-a-hash)（几天花了几天）才[找到实际编码](https://stackoverflow.com/questions/873403/net-implementation-of-bcrypt)的内容以使散列密码起作用！所以为了方便我把它放在这里。

您确实需要阅读[文档](https://bcrypt.codeplex.com/)和[理论 1](https://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage) [理论 2](https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords/31846)，然后阅读一些，否则您可能会遇到安全漏洞。安全是一个很大的话题！买家当心！

将 NuGet 包 BCrypt.Net 添加到解决方案中

```
const int WorkFactor = 14;
var HashedPassword = BCrypt.Net.BCrypt.HashPassword(Password, WorkFactor); 
```

您应该将[WorkFactor](https://wildlyinaccurate.com/bcrypt-choosing-a-work-factor/)调整为合适的值，请参阅[讨论](https://security.stackexchange.com/questions/3959/recommended-of-iterations-when-using-pkbdf2-sha256/3993#3993)。它是一个[log2 函数](https://stackoverflow.com/questions/4443476/optimal-bcrypt-work-factor)

“数字是log2，所以每次计算机速度翻倍，默认数字加1。”

然后你将散列密码存储在你的数据库中`passwordFromLocalDB`并测试这样的传入`password`：

```
if (BCrypt.Net.BCrypt.Verify(password, passwordFromLocalDB) == true) 
```

祝你好运！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-06-12T02:42:01.667

Microsoft 为使用 .Net Core 的任何人提供了使用 PBKDF2 的示例代码页面：

[ASP.NET Core 中的哈希密码](https://docs.microsoft.com/en-us/aspnet/core/security/data-protection/consumer-apis/password-hashing?view=aspnetcore-2.2)

来自文章：

```
using System;
using System.Security.Cryptography;
using Microsoft.AspNetCore.Cryptography.KeyDerivation;

public class Program
{
    public static void Main(string[] args)
    {
        Console.Write("Enter a password: ");
        string password = Console.ReadLine();

        // generate a 128-bit salt using a secure PRNG
        byte[] salt = new byte[128 / 8];
        using (var rng = RandomNumberGenerator.Create())
        {
            rng.GetBytes(salt);
        }
        Console.WriteLine($"Salt: {Convert.ToBase64String(salt)}");

        // derive a 256-bit subkey (use HMACSHA1 with 10,000 iterations)
        string hashed = Convert.ToBase64String(KeyDerivation.Pbkdf2(
            password: password,
            salt: salt,
            prf: KeyDerivationPrf.HMACSHA1,
            iterationCount: 10000,
            numBytesRequested: 256 / 8));
        Console.WriteLine($"Hashed: {hashed}");
    }
}

/*
 * SAMPLE OUTPUT
 *
 * Enter a password: Xtw9NMgx
 * Salt: NZsP6NnmfBuYeJrrAKNuVQ==
 * Hashed: /OOoOer10+tGwTRDTrQSoeCxVTFr6dtYly7d0cPxIak=
 */ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-05T15:05:26.407

今年早些时候，我正在研究为我们的 ASP.NET Web 窗体项目创建哈希值的相同方法，我想以与 MVC 项目开箱即用的方式相同的方式进行操作。

我偶然发现了这个问题=> [ASP.NET Identity 默认密码哈希，它是如何工作的，它是否安全？](https://stackoverflow.com/questions/20621950/asp-net-identity-default-password-hasher-how-does-it-work-and-is-it-secure) 然后我在这里找到了使用 ByteArraysEqual 方法的源 => [http://www.symbolsource.org/MyGet/Metadata/aspnetwebstacknightly/Project/Microsoft.AspNet.Identity.Core/2.0.0-rtm-140327/Release/Default/ Microsoft.AspNet.Identity.Core/Microsoft.AspNet.Identity.Core/Crypto.cs?ImageName=Microsoft.AspNet.Identity.Core](http://www.symbolsource.org/MyGet/Metadata/aspnetwebstacknightly/Project/Microsoft.AspNet.Identity.Core/2.0.0-rtm-140327/Release/Default/Microsoft.AspNet.Identity.Core/Microsoft.AspNet.Identity.Core/Crypto.cs?ImageName=Microsoft.AspNet.Identity.Core)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-23T03:14:46.713

我对不涉及任何库的答案感兴趣。

我阅读了这篇文章[https://crackstation.net/hashing-security.htm](https://crackstation.net/hashing-security.htm)，其中链接了不同语言 C# 的实现，我也会在这里链接

[https://github.com/defuse/password-hashing/blob/master/PasswordStorage.cs](https://github.com/defuse/password-hashing/blob/master/PasswordStorage.cs)

有趣的是，它使用了这里多次提到的 Rfc2898DeriveBytes。

```
private static byte[] PBKDF2(string password, byte[] salt, int iterations, int outputBytes){
    using (var pbkdf2 = new Rfc2898DeriveBytes(password, salt)) {
        pbkdf2.IterationCount = iterations;
        return pbkdf2.GetBytes(outputBytes);
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-10T12:23:23.573

对于 PBKDF2，您也许可以使用 System.Security.Cryptography.Rfc2898DeriveBytes。

请参阅此处的 MSDN：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-04T03:45:12.230

PBKDF2 使用 HMACSHA1，如果您想要更现代和可定制的解决方案，您应该使用 HMACSHA256 或 512 来查看这个 API，就像 PBKDF2 一样

[https://sourceforge.net/projects/pwdtknet/](https://sourceforge.net/projects/pwdtknet/)

源代码中包含的示例 GUI 演示了如何从密码中获取哈希，包括创建加密随机盐.....享受:)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-01-27T10:03:50.333

PBKDF2

在[http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)的示例中，当您到达“Rfc2898DeriveBytes k1 = new Rfc2898DeriveBytes(pwd1, salt1, myIterations); ", k1 是哈希值。该示例用于加密的原因是 Rfc2898DeriveBytes 最初旨在创建加密密钥。

如果您不提供盐，Rfc2898DeriveBytes 将创建它自己的，但我不知道 RNGCryptoServiceProvider 在加密随机方面是否做得更好。

根据 OWASP ( [https://www.owasp.org/index.php/Using_Rfc2898DeriveBytes_for_PBKDF2](https://www.owasp.org/index.php/Using_Rfc2898DeriveBytes_for_PBKDF2) )，Rfc2898DeriveBytes 对 SHA1 的底层使用意味着它只适用于长度不超过 160 位的哈希。如果您创建更长的散列，攻击者仍然只需要担心前 160 位，但是您已经使密码散列/身份验证对您自己来说更加昂贵而没有任何收益。

这是 Rfc2898DeriveBytes 密码散列的一些示例代码（将散列、盐和迭代存储在数据库中）：

```
public class Rfc2898PasswordEncoder
{
    private int _byteLength = 160 / 8; // 160 bit hash length

    public class EncodedPassword
    {
        public byte[] Hash { get; set; }
        public byte[] Salt { get; set; }
        public int Iterations { get; set; }
    }

    public EncodedPassword EncodePassword(string password, int iterations)
    {
        var populatedPassword = new EncodedPassword
        {
            Salt = CreateSalt(),
            Iterations = iterations
        };

        // Add Hash
        populatedPassword.Hash = CreateHash(password, populatedPassword.Salt, iterations);

        return populatedPassword;
    }

    public bool ValidatePassword(string password, EncodedPassword encodedPassword)
    {
        // Create Hash
        var testHash = CreateHash(password, encodedPassword.Salt, encodedPassword.Iterations);

        return testHash == encodedPassword.Hash;
    }

    public byte[] CreateSalt()
    {
        var salt = new byte[_byteLength]; // Salt should be same length as hash

        using (var saltGenerator = new RNGCryptoServiceProvider())
        {
            saltGenerator.GetBytes(salt);
        }

        return salt;
    }

    private byte[] CreateHash(string password, byte[] salt, long iterations)
    {
        byte[] hash;
        using (var hashGenerator = new Rfc2898DeriveBytes(password, salt, (int)iterations))
        {
            hash = hashGenerator.GetBytes(_byteLength);
        }

        return hash;
    }
} 
```

# c# - WCF 中实例管理的每次调用模式不起作用

> ID：11412883
> 
> 赞同：0
> 
> 时间：2012-07-10T12:01:37.233
> 
> 标签：c#, wcf

我做了一个相当简单的示例来演示实例管理的 Per Call 模式。我使用静态变量计数器来增加每个实例的计数，并将实例模式分配为 perCall。count 变量的预期行为应该不应该增加值，因为实例是针对每个请求进行处理的，但是观察到的行为是 counter 变量对于每个请求甚至对于新客户端都连续增加。

这是我的服务代码

```
namespace PerCallInstanceService 
{
    [ServiceContract]
    public interface IMyService 
    {
        [OperationContract]
        int MyMethod();

    }
}

namespace PerCallInstanceService 
{
    [ServiceBehavior(InstanceContextMode=InstanceContextMode.PerCall)]
    public class MyService :IMyService
    {
        public int m_Counter=0;

        #region IMyService Members

        public int MyMethod()
        {
           m_Counter++;
           return m_Counter;
        }

        #endregion
    }
} 
```

这是客户端代码。

```
 Console.WriteLine("Service Instance mode: Per-Call");

 Console.WriteLine("Client  making call to service...");

 MyServiceClient proxy = new MyServiceClient();

 Console.WriteLine("Counter:" + proxy.MyMethod());

 Console.WriteLine("Counter:" + proxy.MyMethod());

 Console.WriteLine("Counter:" + proxy.MyMethod());

 Console.WriteLine("Counter:" + proxy.MyMethod());

 Console.ReadLine(); 
```

我的服务主机：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T03:24:42.817

您的问题指出，“我使用**静态**变量计数器来增加计数”，但您的代码没有静态变量。但是，如果您使用的是 static ，那么即使它是 PerCall 并且尽管在每次调用时都重新创建了对象，计数器也会继续增加。静态变量不会出现在每次调用时创建的对象实例之外。一旦创建了一个对象，相应的静态变量将保留在内存中，直到程序集被卸载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:10:17.570

您必须使用 InstanceContextMode.PerCall 而不是 InstanceContextMode.PerSession

# javascript - 打开 docx Sharepoint 喜欢

> ID：11412885
> 
> 赞同：0
> 
> 时间：2012-07-10T12:01:47.353
> 
> 标签：javascript, jquery, sharepoint, ms-word

我试图像 Sharepoint 一样打开一个 .docx 文件。

我已经设置了一个 apache2 Web 服务器，例如 webdav 部分。

我知道它适用于以下小型 javascript 代码：

> var obj = new ActiveXObject('SharePoint.OpenDocuments.3');

但是当我使用那段代码时，我遇到的问题是它会在 Word 中使用指定的编辑栏打开 .docx，但是如果我单击编辑，则文档将保持只读模式。

可能是什么问题呢 ？您可以在下面找到我的 apache/webdav 配置部分。

另一个问题是，由于 ActiveXObject 的原因，这段代码在 FF 中不起作用，有人知道我能做什么，它也适用于 FF 吗？

因为我们已经有一个很大的应用程序来尝试实现这一点，所以我们不建议将整个应用程序切换到共享点。

阿帕奇 2 配置：

```
DavLockDB WebDAV/Locks
Directory Uploads
Dav on

ForceType text/plain

AuthType Basic
AuthName "Mein WebDAV"
AuthUserFile C:\Users

Require valid-user

AllowOverride None

Options Indexes 
```

真诚的 k3n0b1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:00:30.060

解决了！

问题是我的 WebDAV 文件夹与 http 文档的结构相同。我认为是这样，因为当我在 http docs 路径之外定义另一个文件夹时，它开始工作。

您只需要一小段 javascript：

```
var obj = new ActiveXObject('SharePoint.OpenDocuments.3');
obj.EditDocument('https://localhost/uploads/****.docx'); 
```

以及 apache2 中正确配置的 webdav。

现在我只需要处理它在 ff、chrome 等中的工作方式。

# ios - 以编程方式更改 Apple 推送通知的样式

> ID：11412894
> 
> 赞同：1
> 
> 时间：2012-07-10T12:02:30.613
> 
> 标签：ios, apple-push-notifications

我已经使用 Apple Push Notification 实现并配置了一个应用程序。APN 的默认警报样式是“横幅”，但我需要以编程方式将其更改为“警报”。我检查了 UIKit.framework 并没有找到任何选项，设置通知样式有什么解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T12:05:20.510

你不能。这取决于用户。您的应用程序必须服从用户对通知的决定 - 他们拥有设备，而不是您！

# objective-c - 子类 UITableViewController，我在 UIViewController 中的哪里设置它？

> ID：11412895
> 
> 赞同：0
> 
> 时间：2012-07-10T12:02:38.413
> 
> 标签：objective-c, ios, uitableview

我有一个 UIViewController，它的 UITableView 占据了屏幕的一半。

我也有一个子类 UITableViewController，但我不知道如何将子类 UITableViewController 与我的表关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:15:27.777

从您的问题中不清楚为什么在这种情况下您要尝试创建 UITableViewController 和 UIViewController 。您是否有 2 个不同的表要控制？或者您是否正在尝试做一些特别的事情来让 2 个不同的控制器管理视图/子视图层次结构的不同部分？

通常，UITableViewController 的表是自动创建的或在 NIB 文件中创建的。从 UITableViewController 文档：

> 如果通过 initWithNibName:bundle: 方法（由超类 UIViewController 声明）指定 nib 文件，UITableViewController 会加载归档在 nib 文件中的表视图。否则，它会创建一个未配置的 UITableView 对象，具有正确的尺寸和自动调整大小的掩码。您可以通过 tableView 属性访问此视图。

因此，您通常不需要将您的子类 UITableViewController 与其表相关联，因为这已经为您处理好了。

# salesforce - Box.net api 从 Salesforce 上传文件

> ID：11412898
> 
> 赞同：0
> 
> 时间：2012-07-10T12:02:55.097
> 
> 标签：salesforce, box-api

我正在使用以下代码使用 V2 api 将文件从 Salesforce 上传到 Box.net 并收到以下错误

**System.HttpResponse[状态=未找到，状态代码=404]**

```
String sUrl = 'https://upload.box.com/api/2.0/files/data' ;
Http h = new Http();
HttpRequest req = new HttpRequest();
req.setEndpoint(sUrl);
req.setHeader('Authorization', newAuthorization);      
req.setMethod('POST');

req.setHeader('Content-Type', 'application/pdf');
String content = '{"filename":"/Users/rmasineni/temp/DealPackage/Cederquist Credit Memo.pdf", "folder_id":"0"}';

//String content = '{"filename":"&", "folder_id":"0"}';
req.setbody(content);

HttpResponse res;
res = h.send(req); 
```

如果有人帮助我如何使用 Box-api V2 上传文件，那就太好了。

谢谢， 拉格

# java - java中解析日期并运行到“对非静态方法的静态引用”错误

> ID：11412901
> 
> 赞同：4
> 
> 时间：2012-07-10T12:02:59.293
> 
> 标签：java, date-format, non-static

我的主要内容如下：

```
Date gameDate = DateFormat.parse(scanner.nextLine()); 
```

本质上我想用 util.Scanner 扫描一个日期

哪个命中错误：

> *无法从 DateFormat 类型对非静态方法 parse(String) 进行静态引用*

现在，我已经查看了这个错误，但它似乎不像这个[例子](http://www.javacoffeebreak.com/articles/toptenerrors.html)那么明确。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T12:07:49.887

`parse()`不是静态方法。这是一个实例方法。您需要创建一个 DateFormat 实例，然后调用`parse()`此实例：

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
Date gameDate = dateFormat.parse(scanner.nextLine()); 
```

静态方法属于一个类。打电话没有意义`Person.getName()`。但是打电话是有道理的

```
Person pureferret = new Person("Pureferret");
String name = pureferret.getName(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:04:57.967

如[API 文档](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html)中所述：

```
DateFormat df = DateFormat.getDateInstance();
myDate = df.parse(myString); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T12:10:25.480

您必须创建一个 DateFormat 实例才能调用“解析”。只有静态方法才能被调用而不需要实例化指定类的实例。您可以使用默认 DateFormat 调用获取实例：

```
DateFormat.getInstance() 
```

然后你可以打电话

```
DateFormat.getInstance().parse() 
```

或者您可以使用例如 DateFormat 的子类定义您自己的 DateFormat，如 SimpleDateFormat。

```
DateFormat myFormat = new SimpleDateFormat("yyyy-MM-dd");
myFormat.parse(myString); 
```

在此处查看如何自定义它：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T12:05:36.523

`DateFormat`是一个需要具体实例化的抽象类。

例如

```
 DateFormat df = new SimpleDateFormat(...); 
```

查看[此示例](http://www.xyzws.com/Javafaq/how-to-use-simpledateformat-class-formating-parsing-date-and-time/142)以了解如何使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T12:07:37.457

你可以试试这段代码：

```
String format = "yyyy-MM-dd"; // put proper format here
Date gameDate = new SimpleDateFormat(format).parse(scanner.nextLine()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-10T12:10:02.193

DateFormat 类的方法解析不是静态的。您必须先实例化一个 DateFormat 对象，然后才能调用它的 parse 方法。

您还必须配置日期格式的“规则”，以便解析器知道要解析什么以及如何解析。

请参阅 SimpleDateFormat 类： [http ://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

# python - 获取 wx.treectrl 的选择

> ID：11412909
> 
> 赞同：0
> 
> 时间：2012-07-10T12:03:41.993
> 
> 标签：python, wxpython, wxwidgets

tree.GetSelection() 给出实际的树 id 对象。

我想得到一个 int 的选择，就像 listbox.GetSelection() 会返回一样。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:44:38.103

`TreeItemId`对象应该有一个方法，该`GetID`方法将在树中返回其 id

## 编辑

树控件有一个内置功能来存储有关树项目的附加信息。

```
item= self.tree.GetSelection()
self.tree.SetPyData(item,{"Source":"C:\hi.png","Opacity":1})
print self.tree.GetPyData(item) 
```

# jquery-masonry - 如何使用 jquery masonry 拥有超过 1 个容器

> ID：11412911
> 
> 赞同：1
> 
> 时间：2012-07-10T12:03:49.213
> 
> 标签：jquery-masonry

我在我的网站上设置了一个标签，我想在每个标签的内容上使用 Masonry，但我一次只能在一个标签上工作。

最初我尝试只使用通用选择器并在每个选项卡中使用它。但是，这仅在第一个选项卡中起作用。然后我尝试添加更多容器变量：

```
<!--Masonry kit-->
<script type="text/javascript" src="http://localhost/LazyDuck/masonry-site/js/jquery.masonry.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$(window).load(function() {

var $container = $('#container');
var $container = $('#dining');
var $container = $('#events');
var $container = $('#climbing');
var $container = $('#wildlife');
var $container = $('#shopping');
var $container = $('#kids');
var $container = $('#sport');

$container.masonry({
  itemSelector: '.item',
  gutterWidth : 10,
  isAnimated: !Modernizr.csstransitions
});
});}); 
```

但这也行不通。我确信这是一件简单的事情，但我的 JavaScript 编码并不是那么好。以上是我猜的。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:23:41.480

我认为这更多的是 jQUery 语法，但我认为如果没有可见内容，砌体将无法工作。它必须应用于可见的 div。

所以一种方法是在它可见的时候做这一切然后隐藏它..不太好..我知道。

```
var $container = $('#container');
var $container = $('#dining');
var $container = $('#events');
var $container = $('#climbing');
var $container = $('#wildlife'); 
```

要解决启动插件的链接问题，只需执行此操作

```
$('#wildlife, #climbing , ... ,#container).masonry({ .. 
```

但在这种情况下，通过唯一的类名来切换它会更容易，例如

```
class="MasoniseThis otherClasses"
...
$('.MasoniseThis').masonry({ .. 
```

并且在每个页面加载时，它都应该将插件应用到任何带有该类的可见 div。

*如果没有 JSFiddle 中的一些标记示例，我们将无法真正帮助您。*

# java - SWT：包含跨列单元格的表格

> ID：11412914
> 
> 赞同：8
> 
> 时间：2012-07-10T12:04:01.080
> 
> 标签：java, ubuntu, swt

在具有基于 SWT 的 GUI 的 Java 桌面应用程序中，我们有一个表，其中一些行必须跨越多个列。使用这个官方 SWT Snippet 中显示的方法解决了这个问题：[Snippet239.java](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet239.java)

然而，很久以后才发现，在默认 Ambiance/Radiance 主题的 Ubuntu 上，这种方法存在一个主要问题：列之间总是有垂直线，即使对于跨越多列的单元格也是如此。这显示在以下屏幕截图中：

![带有 Ambiance/Radiance 主题的 Ubuntu](../Images/fabc6fde00991e4427b1c7a543029a1a.png)

![带有 Clearlooks 主题的 Ubuntu](../Images/676d383532ac1ae5255d7f795caba27b.png)

如您所见，在第一个屏幕截图中，第 1 列和第 2 列之间有一条垂直线。有人知道如何摆脱这些线吗？

我们已经尝试了以下方法：

*   `Table.setLinesVisible(false)`：不起作用，垂直线不会消失。
*   使用基于所有者绘制的标签提供者来绘制这些垂直线：不起作用，垂直线似乎是在标签提供者绘制的所有内容之上绘制的。
*   将绘图侦听器附加到表格以绘制垂直线：不起作用，因为每当表格滚动或以其他方式更新时都会出现很多故障。
*   [Nebula 项目](http://www.eclipse.org/nebula/)有一个 Grid 小部件，其中单元格可以跨越多个列，并且垂直线没有问题，因为整个表格是非本地绘制的。但是，我们不能证明用 Grid 小部件替换我们的表格只是为了解决具有某些主题的特定平台上的垂直线问题。此外，Grid 小部件似乎是一个预发布的 alpha 版本。

基于我们已经尝试过的事情，我认为剩下的唯一方法是在 SWT 的特定于平台的内部进行处理，但我什至不知道从哪里开始这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:52:32.953

我们通过使用`Table`模拟多个列的单个所有者绘制列解决了这个问题。

# ruby - 使用 asciidoc / markdown 输入、html / pdf 输出发布工具链

> ID：11412915
> 
> 赞同：3
> 
> 时间：2012-07-10T12:04:00.713
> 
> 标签：ruby, pdf, markdown, publishing, asciidoc

我看到了[这个](https://stackoverflow.com/questions/2733170/publishing-toolchain)关于发布工具链的相关问题，但我知道最近很多人做了很多工作来制作发布工具链。

我发现的一个很好的例子是来自 akosma的[这个项目。](https://github.com/akosmasoftware/eBook-Template)

[Avdi Grimm 在这个项目](https://github.com/avdi/orgpress)中分享了他与 org-mode 的工作

我知道还有（应该）很多其他人。

我正在寻找的是一个发布工具链

*   asciidoc / markdown / Textile / org-mode 或乳胶输入。我不想要 xml 输入
*   pdf AND html 输出，epub 输出对我来说不是必需的。

我能做什么

*   在 latex / html / css / js 中编写模板。再次，没有xml。
*   读写 ruby​​ 和 shell 脚本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T15:48:43.520

看看 asciidoc，这是 O'Reilly 开始使用的，它是 DocBook 的一个令人耳目一新的突破。我使用 asciidoc，工具和支持有点不足，但有人致力于创建更好的替代方案（不涉及 Python 和现有的 Docbook 管道）。

看看这个：[https ://github.com/runemadsen/asciidoc](https://github.com/runemadsen/asciidoc)

**编辑 1/6/13**：您还真的需要查看 AsciiDoctor。来自 RedHat 的 Dan Allen 已经在这个特殊的包和 Ryan Waldron 上花费了很多时间。我期待 AsciiDoctor 能带来伟大的成就，因为它开始成为一系列重要的 AsciiDoc 文档工作的基础。

# ffmpeg - 使用 x264 编码文件播放失真的 vlc

> ID：11412916
> 
> 赞同：1
> 
> 时间：2012-07-10T12:04:01.413
> 
> 标签：ffmpeg, webcam, capture, vlc, x264

我使用 ffmpeg 从我的网络摄像头捕获了 rgb 格式的原始视频：

```
ffmpeg -f video4linux2 -s 320x240 -r 10 -i /dev/video0 -f rawvideo \
-pix-fmt rgb24 -r10 webcam.rgb24 
```

这个原始视频文件在 mplayer 中可以正常播放。

我使用 x264 编码这个文件：

```
x264 --input-res 320x240 --demuxer raw --input-fmt rgb24 --fps 10 \
-o webcam.mkv webcam.rgb24 
```

但是，当我尝试使用 vlc 播放 webcam.mkv 时，它是一个交错的、扭曲的图像。

我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:55:04.277

经过一些进一步的研究，我能够成功地编码原始视频流。问题（我认为）是 x264 需要 yuv420p 格式的数据。当我更改捕获格式时，我可以播放 mkv 文件而不会出现任何失真。

捕获命令：

```
ffmpeg -t 10 -f video4linux2 -s 320x240 -r 10 -i /dev/video0 -f rawvideo \
-pix_fmt yuv420p -r 10 webcam.yuv420p 
```

（以 10 帧速率从输入设备 /dev/video0 捕获 10 秒，并以 yuv420p 像素格式输出到文件 webcam.yuv420p）

编码命令：

```
x264 --input-res 320x240 --demuxer raw  --input-fmt yuv420p --fps 10 \
-o webcam.mkv webcam.yuv420p 
```

播放命令：

```
mplayer -vo gl:nomanyfmts webcam.mkv 
```

（或者用vlc打开）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:19:49.517

您的问题是您将 --input-fmt 选项（专门用于 lavf demuxer）与 --demuxer raw 一起使用。使用 raw demuxer 您应该使用 --input-csp 选项（bgr 值可能用于 ffmpeg 的 -pix-fmt rgb24）。

# vba - 仅粘贴值，Excel VBA

> ID：11412918
> 
> 赞同：0
> 
> 时间：2012-07-10T12:04:06.437
> 
> 标签：vba, excel

我有这个脚本，我已经得到了帮助，但现在出现了一个问题。我试图仅将值而不是单元格内的公式粘贴到另一个单元格。

我认为将 .Value 放在公式的末尾会告诉脚本只粘贴值......它似乎不是。有人可以给我一个关于如何完成这项工作的建议吗？

```
Option Explicit

    Sub ONJL()
        Dim lastrow As Long
        Dim wsPAR As Worksheet 'PAERTO
        Dim wsRD As Worksheet 'Raw Data
        Dim wsTEM As Worksheet 'Archive

        Set wsPAR = Sheets("PAERTO")
        Set wsRD = Sheets("Raw Data")
        Set wsTEM = Sheets("Template")

        With wsRD
            Application.ScreenUpdating = False
            lastrow = .Range("J" & .Rows.Count).End(xlUp).Row
            wsRD.Range("J" & lastrow + 1).Formula = Date
            wsRD.Range("B2").Copy wsRD.Range("K" & lastrow + 1).Value
            wsRD.Range("B3").Copy wsRD.Range("L" & lastrow + 1).Value
            wsRD.Range("E2").Copy wsRD.Range("M" & lastrow + 1).Value
            wsRD.Range("E3").Copy wsRD.Range("N" & lastrow + 1).Value
            wsRD.Range("H2").Copy wsRD.Range("O" & lastrow + 1).Value
            wsRD.Range("H3").Copy wsRD.Range("P" & lastrow + 1).Value
            wsRD.Range("Q1:T1").Copy wsRD.Range("Q" & lastrow + 1)
            Application.ScreenUpdating = False
        End With
    End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T12:37:16.153

您可以“复制”而无需`.Copy`像这样实际使用：

```
Sub CopyWithoutCopying()
    Dim wsRD As Worksheet
    Dim lastrow As Long

    Set wsRD = Sheets("Raw Data")

    With wsRD
        lastrow = .Range("J" & .Rows.Count).End(xlUp).Row
        .Range("K" & lastrow + 1).Value = .Range("B2").Value
        .Range("L" & lastrow + 1).Value = .Range("B3").Value
        ' etc...
    End With
End Sub 
```

这种方法不使用您的剪贴板，性能更好，并且不选择任何东西。正如 Jimmy 指出的那样，您不需要`With`块内的 wsRD 前缀。

# java - 提取内联模式 WSDL 样式表 xsom

> ID：11412925
> 
> 赞同：0
> 
> 时间：2012-07-10T12:04:36.640
> 
> 标签：java, xslt, wsdl

我想从 WSDL 文件中提取内联模式。但是，我不知道如何为此执行 XSL 转换。创建这样一个样式表的任何帮助都会很棒。

多谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:04:55.547

这个对我有用：

```
<?xml-stylesheet type="text/xsl"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:s="http://www.w3.org/2001/XMLSchema" >

<xsl:output method="xml" />

<xsl:template match='text()' />

<xsl:template match="//s:schema">
    <xsl:copy-of select='.'/>
</xsl:template>    

</xsl:stylesheet> 
```

它假定您的内联模式使用[http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema)命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T17:28:11.673

当 wsdl 包含多个模式元素时，您可以执行以下操作：使用 [https://gist.github.com/ebratb/3819949](https://gist.github.com/ebratb/3819949) 中的 xsd-split.xslt 将 *.wsdl 文件拆分为多个 *.xsd文件。

您可以使用 maven 插件在 Saxon 上运行 2.0 xslt（参见[http://www.mojohaus.org/xml-maven-plugin/examples/transform-saxon.html](http://www.mojohaus.org/xml-maven-plugin/examples/transform-saxon.html)）

然后编写一个小的模式文件，它只导入那些生成的 *.xsd 文件以及肥皂信封的官方定义。

```
<?xml version="1.0" encoding="UTF-8" ?>  
<xsd:schema attributeFormDefault="unqualified"       elementFormDefault="qualified" targetNamespace="http://your.company.com/dummy" xmlns:xsd="http://www.w3.org/2001/XMLSchema">                      
   <xsd:import namespace="http://<target namespace of the first xsd file>"  schemaLocation="file:///path/to/first.xsd"  />
   <xsd:import namespace="http://<target namespace of the second xsd file>" schemaLocation="file:///path/to/second.xsd"  />
    ...

   <xsd:import namespace="http://schemas.xmlsoap.org/soap/envelope/" schemaLocation="http://schemas.xmlsoap.org/soap/envelope/" />
</xsd:schema> 
```

使用自定义资源解析器时，不需要 schemaLocation 属性。

# php - 证书有密码时如何使用ws-secuirty

> ID：11412929
> 
> 赞同：1
> 
> 时间：2012-07-10T12:04:48.810
> 
> 标签：php, certificate, wso2, ws-security, wsh

我正在使用 WSO2 Web Services Framework for PHP 中的 wsf php。他们有很多如何使用证书的例子，但没有一个使用带密码的证书的例子。如何使用此库打开带有密码的证书

# c# - 错误列表，未绑定在组合框中

> ID：11412934
> 
> 赞同：-3
> 
> 时间：2012-07-10T12:04:58.653
> 
> 标签：c#, wpf

> **可能重复：**
> [未绑定数据网格中的路径（wpf）](https://stackoverflow.com/questions/11409540/not-binding-path-in-datagrid-wpf)

数据网格中的组合框！！！**啊通！**

```
 <ComboBox Name="mex" DataContext="{Binding RelativeSource={RelativeSource Self}}" Style="{DynamicResource ComboBoxStyle}"  ItemsSource="{Binding Path=combolist}" SelectionChanged="status_SelectionChanged" Height="Auto" Width="Auto">
</ComboBox> 
```

所以

```
MySqlCommand status_db = new MySqlCommand("select name_ru from request_status", conn);
MySqlDataReader combodata = status_db.ExecuteReader();
List<string> combolist = new List<string>();
  while (combodata.Read())
  {
     combolist.Add(combodata.GetString(0));
  } 
```

为什么组合框中的项目为空？我要疯了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:27:48.763

您正在使用`RelativeSource Self`您的 DataContext，这意味着 DataContext 将是 ComboBox 本身。绑定 ItemsSource 时，它​​会尝试查找名为 combolist 的 ComboBox 的属性（当然不存在）。

要解决此问题，您可以

*   将 ComboBox 的 DataContext 更改为您的控件（或窗口、页面等），并使列表成为控件的属性。
*   直接在后面的代码中设置 ItemsSource：`mex.ItemsSource = combolist`

# jquery - 有机会禁用图片加载

> ID：11412936
> 
> 赞同：0
> 
> 时间：2012-07-10T12:05:05.953
> 
> 标签：jquery, jquery-plugins

是否可以防止（使用 jQuery）某些图像被移动设备加载？已经有 jQuery 插件了吗？

例如：我希望所有具有“太大”类的图像都不会被移动设备加载。

谢谢你的耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:07:41.597

我认为没有办法*阻止*它们加载，但您可以简单地更改这些元素的属性以*更改*浏览器尝试加载的内容：

```
$('img.toobig')
    .attr({'width' : 0, 'height' : 0, 'src' : 'path/to/small/image.png'})
    .hide(); 
```

上面找到了相关的图像，给它们一个`height`and `width`of `0`（所以布局引擎可以快速流动/重排文档，并给出一个`src`to，理想情况下，一个小的透明图像文件。当然`removeAttr('src')`，如果你愿意，你可以简单地。

最后的调用`hide()`只是为了确保即使大小为`0`，图像也无法在文档中显示。在这种情况下`remove()`，当然可以改为使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:10:27.840

这是可能的，但我建议仅在您知道它不是这样的移动设备时才加载它们：

```
$('.toobig').each(function(){
    $(this).replaceWith('<img src="'+$(this).data('src')+'" />');
}); 
```

您有类似 span 的东西来表示您不想在移动设备上加载的图像，其数据属性为“src”，如下所示：

```
<span class="toobig" data-src="/your/location/image.jpg"></span> 
```

您可以扩展它以添加诸如替代文本之类的内容，等等。

# javascript - 在 FireFox 的 iFrame 中显示内容时的 jQuery 高度问题

> ID：11412937
> 
> 赞同：0
> 
> 时间：2012-07-10T12:05:06.360
> 
> 标签：javascript, jquery, firefox, iframe, height

我正在制定一个日历/时间表，该时间表需要休息以跨越包含事件的整个高度。下面的代码在 FF/Chrome 和 IE 中运行良好。在 Firefox 中通过 iFrame 加载内容时会出现问题，高度始终设置为零。只有在重新加载 iFrame 时，页面才会正确显示。

[这是演示](http://jsfiddle.net/fBTeg/3)

```
$(window).load(function () {
    $(".event").each(function () {
        var height = $(this).height();
        $(".note, .break").each(function () {
            $(this).height(height);
        });
    });
}) 
```

我正在为 FF 寻找一致的解决方案或解决方法，以便在 iFrame 的第一次加载时正确应用高度。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:09:40.003

方式 1：用 div 包裹你的 iframe 得到 float:left; 并在fireforx上计算div的高度。

尝试计算这个 div 的高度，而不是 iframe 的..

```
<div style="float:left">
    <iframe></iframe>
</div> 
```

[.load() 用法](http://api.jquery.com/load/)

方式2：

```
$(document).ready(function () {//if u wont define more specific element, use docment ready
    $(".event").each(function () {
        var height = $(this).height();
        $(".note, .break").each(function () {
            $(this).css('height':height+'px');//to change css height
            //$(this).attr('height',height);//to change inline attr height
        });
    });
}) 
```

# linux - 调用 dlclose(NULL) 是否安全？

> ID：11412943
> 
> 赞同：6
> 
> 时间：2012-07-10T12:05:27.977
> 
> 标签：linux, posix, dynamic-loading, dynamic-library, shared-libraries

当我将`null`指针传递给`dlclose`.

我应该在调用之前检查 null`dlclose`吗？

POSIX 对此一无所知：http: [//pubs.opengroup.org/onlinepubs/7908799/xsh/dlclose.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/dlclose.html)

是未定义的行为还是`dlclose`实现中的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T12:19:12.947

这很棘手。POSIX 指出

> 如果`handle`不引用打开的对象，则`dlclose()`返回一个非零值

从中您可以推断它应该检测任意指针是否该指针指向打开的对象。Linux/Glibc 版本显然没有这样的检查，所以你需要`NULL`自己检查。

[此外，Linux 联机帮助页也不是很有帮助。它对函数的行为非常隐含`libdl`，在没有明确声明符合性的情况下遵循 POSIX。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:20:32.597

它也没有说明接受 a`NULL`而*不是*崩溃。我们可以从您的测试中假设它没有进行显式`NULL`检查，并且它确实需要以某种方式使用指针来执行关闭操作......所以你有它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-03T09:38:47.767

遵循`malloc`/`free`约定（1），这是一个错误。如果它遵循`fopen`/`fclose`约定（2），则不是。所以如果有一个错误，它在标准中，因为它缺乏处理僵尸的约定。

*   约定 (1) 适用于 C++11 移动语义
*   约定（2）给调用者留下了更多的责任。特别是，如果移动操作已经完成，dtor 必须显式检查 null。

我认为这应该为即将到来的 POSIX 修订版进行修订，以避免混淆。

* * *

## 更新

我从这个答案中找到了[https://stackoverflow.com/a/6277781/877329](https://stackoverflow.com/a/6277781/877329)，然后读到`man pthread_join`你可以`pthread_join`用无效的 tid 调用，支持`malloc/free`约定。我发现动态加载器接口的另一个问题是它不使用标准的错误处理系统，但有自己的`dlerror`功能。

# mysql - 在 MySQL 中生成随机经纬度

> ID：11412947
> 
> 赞同：7
> 
> 时间：2012-07-10T12:05:45.780
> 
> 标签：mysql, random, floating-point

我正在尝试在 MySQL 中生成一些虚拟记录，并且需要在给定范围内创建随机纬度和经度浮点值。

例如，我需要生成介于 52.077090052913654 和 52.477040512464626 之间的纬度

和 -1.8840792500000134 和 -0.9172823750000134 之间的经度

我熟悉使用 Rand Floor 创建随机数范围，但这只会产生整数。我怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T12:16:59.180

您可以使用`RAND()`来获取两个值之间的随机值，如下所示：

* * *

`randVal = (RAND() * (maxVal - minVal)) + minVal`

* * *

**用你的号码：**

```
SELECT 
    (RAND() * (52.477040512464626 - 52.077090052913654)) + 52.077090052913654 AS randlatitude,
    (RAND() * (-0.9172823750000134 - -1.8840792500000134)) + -1.8840792500000134 AS randlongitude 
```

# jinja2 - jinja2：没有扩展的渲染模板

> ID：11412948
> 
> 赞同：3
> 
> 时间：2012-07-10T12:05:46.663
> 
> 标签：jinja2

如何在不扩展的情况下渲染模板？我有简单的渲染器，我想在发现这个请求是 ajax 之后只渲染目标数据

我的模板：

```
{% extends "base.html" %}
{% load i18n %}

{% block extrahead %}
{% endblock extrahead %}

{% block content %}

  <div class="itemBg">
    <div class="itemTop">
      <div class="itemDown">

        <div class="rowContainer">
            <div class="show att">
                {{ msg }}
            </div>
        </div>

</div></div></div>
{% endblock %} 
```

只有我想要这个在 ajax 请求的渲染响应中。

```
 <div class="itemBg">
    <div class="itemTop">
      <div class="itemDown">

        <div class="rowContainer">
            <div class="show att">
                {{ msg }}
            </div>
        </div>

</div></div></div> 
```

这是我的渲染界面

```
from flask import current_app, render_template

def render(template, **context):
    """
    """
    return render_template(path(template), **context) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T19:55:22.497

您正在寻找[null-master 后备](http://jinja.pocoo.org/docs/tricks/#null-master-fallback)技巧。由于`request`在 Jinja2 上下文中可用，如果您使用的库设置了适当的标头，您可以简单地执行以下操作：

```
{% if not request.is_xhr %}{% extends "base.html" %}{% endif -%}
{% load i18n %}
{% block content %}

  <div class="itemBg">
    <div class="itemTop">
      <div class="itemDown">

        <div class="rowContainer">
            <div class="show att">
                {{ msg }}
            </div>
        </div>

</div></div></div>
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:18:50.513

将 AJAX 所需的块放在单独的模板中。

当您收到 AJAX 请求时，只需呈现该新模板。对于非 AJAX 请求，请将其包含在扩展 base.html 的请求中。

# logging - dmesg 和 /var/log/kern.log 之间的区别

> ID：11412950
> 
> 赞同：18
> 
> 时间：2012-07-10T12:06:03.623
> 
> 标签：logging, linux-kernel, printk

我正在修改 kvm 模块，并在内核代码中添加了 printk 语句。运行虚拟机后，printk 为我提供了错误地址和有关来宾操作系统的其他信息。

我需要从这个信息中生成统计信息。当我使用 dmesg 时，我只能看到内核空间中的错误地址，即它们的地址高于 0XC0000000。（发生 VMEXIT 时需要错误地址，即我们从访客模式切换到主机模式）

当我在 kern.log 中看到相同的统计信息时，我也会从用户空间（低于 0XC0000000）获得错误地址。所以在我看来，dmesg 的容量有限，并且给出的信息是 kern.log 的一个子集。
我的 kern.log 文件太大，是否可以从 kern.log 中删除旧数据，因为 grep、join、awk 等文本处理命令在文件上运行的时间太长。

我的问题是：
dmesg 和 kern.log 有什么区别？
如何在 cron 作业中减小 kern.log 文件的大小？（擦除过去 24 小时内添加的所有数据）
有没有更好的方法从内核获取 printf kindof 功能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T12:33:59.423

`/var/log/kern.log`并且他的旋转日志（/var/log/kern.log.1 /var/log/kern.log.2....）包含由内核生成并由`syslog`.

[`dmesg`](http://unixhelp.ed.ac.uk/CGI/man-cgi?dmesg%208)正如手册页所解释的那样：

> dmesg 用于检查或控制内核环形缓冲区。

事实上，它将显示自上次启动以来 /var/log/kern.log 的最后 16392 个八位字节。

# visual-studio-2010 - 离开片段快捷方式VS 2010

> ID：11412951
> 
> 赞同：1
> 
> 时间：2012-07-10T12:06:09.103
> 
> 标签：visual-studio-2010, keyboard-shortcuts, code-snippets

Visual Studio 2010 中是否有在输入 VB 代码时留下代码段的快捷方式？在这种情况下，我必须按几次底部箭头才能离开属性片段。

![属性片段](../Images/15bd1762f5232ebdd28aeaa9fccb2af6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:18:11.153

*   `CTRL`+ `K`+`X`插入一个片段（默认）
*   `TAB`导航和编辑
*   `ENTER`离开

# ruby-1.9.3 - 块作为参数的 Ruby 1.9.3 语法

> ID：11412953
> 
> 赞同：1
> 
> 时间：2012-07-10T12:06:18.327
> 
> 标签：ruby-1.9.3

所以在 Ruby 1.9.2-p290 我可以做到这一点

```
content_for :something, do    
end 
```

这是相当不错的。但这是 Ruby 1.9.3-p125 中的语法错误，而我需要这样做

```
content_for(:something) do
end 
```

在哪里可以找到有关此语法限制的文档？有没有其他方法可以用 1.9.3-p125 编写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:16:18.847

只需删除逗号：

```
content_for :something do    
end 
```

# iphone - 什么时候可以使用 glReadPixels？

> ID：11412955
> 
> 赞同：4
> 
> 时间：2012-07-10T12:06:26.423
> 
> 标签：iphone, xcode, ipad, glreadpixels

我想知道`GLReadPixels`函数的用途。/它是如何读取像素的？它是否在 glreadFunction 提供的范围内读取主屏幕上的`GLKView`像素或像素或任何内容。`UIView`或者它只能在我们使用时使用`GLKView`？？

请澄清我的疑问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:16:45.133

它从当前的 OpenGL (ES) 帧缓冲区中读取像素。它不能用于从 读取像素`UIView`，但可以用于从 a 读取，`GLKView`因为它由帧缓冲区支持（但是，您只能在其活动帧缓冲区时读取其数据，这很可能是在绘画）。但是，如果您想要的所有内容都是您的屏幕截图`GLKView`，则可以使用其内置`snapshot`方法获取`UIImage`其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:21:50.047

您可以使用 glreadPixels 读取背景屏幕。这是要做的代码。

```
- (UIImage*) getGLScreenshot {
    NSInteger myDataLength = 320 * 480 * 4;

    // allocate array and read pixels into it.
    GLubyte *buffer = (GLubyte *) malloc(myDataLength);
    glReadPixels(0, 0, 320, 480, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    // gl renders "upside down" so swap top to bottom into new array.
    // there's gotta be a better way, but this works.
    GLubyte *buffer2 = (GLubyte *) malloc(myDataLength);
    for(int y = 0; y &lt;480; y++)
    {
        for(int x = 0; x &lt;320 * 4; x++)
        {
            buffer2[(479 - y) * 320 * 4 + x] = buffer[y * 4 * 320 + x];
        }
    }

    // make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer2, myDataLength, NULL);

    // prep the ingredients
    int bitsPerComponent = 8;
    int bitsPerPixel = 32;
    int bytesPerRow = 4 * 320;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

    // make the cgimage
    CGImageRef imageRef = CGImageCreate(320, 480, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

    // then make the uiimage from that
    UIImage *myImage = [UIImage imageWithCGImage:imageRef];
    return myImage;
}

- (void)saveGLScreenshotToPhotosAlbum {
    UIImageWriteToSavedPhotosAlbum([self getGLScreenshot], nil, nil, nil);
} 
```

# c# - 验证 IP 地址的最佳方法是什么？

> ID：11412956
> 
> 赞同：58
> 
> 时间：2012-07-10T12:06:27.323
> 
> 标签：c#, ip

我有一种方法来验证参数 IP 地址。作为一个整体的开发新手，我想知道是否有更好的方法来做到这一点。

```
/// <summary>
/// Check IP Address, will accept 0.0.0.0 as a valid IP
/// </summary>
/// <param name="strIP"></param>
/// <returns></returns>
public bool CheckIPValid(string strIP)
{
    //  Split string by ".", check that array length is 3
    char chrFullStop = '.';
    string[] arrOctets = strIP.Split(chrFullStop);
    if (arrOctets.Length != 4)
    {
        return false;
    }
    //  Check each substring checking that the int value is less than 255 and that is char[] length is !> 2
    Int16 MAXVALUE = 255;
    Int32 temp; // Parse returns Int32
    foreach (string strOctet in arrOctets)
    {
        if (strOctet.Length > 3)
        {
            return false;
        }

        temp = int.Parse(strOctet);
        if (temp > MAXVALUE)
        {
            return false;
        }
    }
    return true;
} 
```

它很简单（我可以做到），但它似乎可以解决问题。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-10T12:08:29.680

方法的**限制**是[`IPAddress.TryParse`](https://msdn.microsoft.com/en-us/library/system.net.ipaddress.tryparse.aspx)它验证一个字符串是否可以转换为 IP 地址，因此如果它提供了一个类似的字符串值`"5"`，它认为它是`"0.0.0.5"`。

验证 IPv4 的另一种方法如下：

```
public bool ValidateIPv4(string ipString)
{
    if (String.IsNullOrWhiteSpace(ipString))
    {
        return false;
    }

    string[] splitValues = ipString.Split('.');
    if (splitValues.Length != 4)
    {
        return false;
    }

    byte tempForParsing;

    return splitValues.All(r => byte.TryParse(r, out tempForParsing));
} 
```

它可以像这样测试：

```
List<string> ipAddresses = new List<string>
{
    "2",
    "1.2.3",
    "1.2.3.4",
    "255.256.267.300",
    "127.0.0.1",
};
foreach (var ip in ipAddresses)
{
    Console.WriteLine($"{ip} ==> {ValidateIPv4(ip)}");
} 
```

输出将是：

```
2 ==> False
1.2.3 ==> False
1.2.3.4 ==> True
255.256.267.300 ==> False
127.0.0.1 ==> True 
```

您也可以使用`IPAddress.TryParse`，但它有局限性，可能导致解析不正确。

[System.Net.IPAddress.TryParse 方法](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.tryparse.aspx)

> 请注意，如果 TryParse 成功解析输入，则返回 true，但这并不一定意味着生成的 IP 地址是有效的。**请勿使用此方法验证 IP 地址。**

但这适用于包含至少三个点的普通字符串。就像是：

```
string addrString = "192.168.0.1";
IPAddress address;
if (IPAddress.TryParse(addrString, out address)) {
       //Valid IP, with address containing the IP
} else {
       //Invalid IP
} 
```

您可以检查是否存在三个点，`IPAddress.TryParse`然后调用`TryParse`：

```
public static bool ValidateIPv4(string ipString)
{
    if (ipString.Count(c => c == '.') != 3) return false;
    IPAddress address;
    return IPAddress.TryParse(ipString, out address);
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-10T12:09:12.113

```
using System.Net;
public static bool CheckIPValid(string strIP)
{
    IPAddress result = null;
    return
        !String.IsNullOrEmpty(strIP) &&
        IPAddress.TryParse(strIP, out result);
} 
```

你完成了

**编辑 1**

添加了一些额外的检查以防止抛出异常（代价高昂）。PS它不会处理unicode。

**编辑 2**

@StephenMurby如果成功解析字符串，`IPAddress.TryParse`将返回**true 。**如果您检查该方法的[文档](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.tryparse)，尽管它会在两种情况下引发异常。

1.  字符串为空。
2.  该字符串包含 unicode 字符。

由您决定（设计决定）是要抛出异常还是返回 false。在解析方面，我通常更喜欢返回 false 而不是异常（假设这是不保证正确的输入）。

打破退货声明，我是说，

1.  字符串不为空（也不为空，无论如何都不会解析）**并且**
2.  IP 地址解析正确。

请记住，C# 布尔表达式是[惰性求值](http://en.wikipedia.org/wiki/Lazy_evaluation)的，因此 CLR 甚至不会尝试解析字符串`null`或空字符串。

关于缺少的如果，你可以做类似的事情，

```
if (IP.TryParse(strIP, out result)
{
    return true;
} 
```

但是你真正做的只是说如果某件事是真的，就返回真的。更容易直接返回表达式。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-09-06T16:08:00.840

最好的正则表达式解决方案（对 MVC DataAnnotations 有用）：

```
^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$ 
```

C＃

```
Regex.IsMatch(value, "^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$") 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-04-29T11:52:38.950

不使用 IPAddress 类并针对字节进行验证，这比 Int<256 方法要好得多。

```
 public Boolean CheckIPValid(String strIP)
    {
        //  Split string by ".", check that array length is 4
        string[] arrOctets = strIP.Split('.');
        if (arrOctets.Length != 4)
            return false;

        //Check each substring checking that parses to byte
        byte obyte = 0;
        foreach (string strOctet in arrOctets)
            if (!byte.TryParse(strOctet, out obyte)) 
                return false;

        return true;
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-10T12:09:51.147

该框架提供了`IPAddress`类，而类又为您提供了`Parse`和`TryParse`方法。

```
// myAddress is a System.Net.IPAddress instance
if (System.Net.IPAddress.TryParse(strIP , out myAddress)) 
    // IP is valid
else
    // IP isn't valid 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-05T15:02:14.697

很惊讶没有人提供正则表达式解决方案。您只需要包含 System.Text.RegularExpressions。为了在实际代码和本示例中的可读性，我总是将我的正则表达式模式分块成一个字符串数组，然后加入它。

```
 // Any IP Address
        var Value = "192.168.0.55"; 
        var Pattern = new string[]
        {
            "^",                                            // Start of string
            @"([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])\.",    // Between 000 and 255 and "."
            @"([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])\.",
            @"([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])\.",
            @"([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])",      // Same as before, no period
            "$",                                            // End of string
        };

        // Evaluates to true 
        var Match = Regex.IsMatch(Value, string.Join(string.Empty, Pattern)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-01T09:53:09.240

您可以这样处理它是 ipv4 或 ipv6：

```
 public static string CheckIPValid(string strIP)
    {
        //IPAddress result = null;
        //return !String.IsNullOrEmpty(strIP) && IPAddress.TryParse(strIP, out result);
        IPAddress address;
        if (IPAddress.TryParse(strIP, out address))
        {
            switch (address.AddressFamily)
            {
                case System.Net.Sockets.AddressFamily.InterNetwork:
                    // we have IPv4
                    return "ipv4";
                //break;
                case System.Net.Sockets.AddressFamily.InterNetworkV6:
                    // we have IPv6
                    return "ipv6";
                //break;
                default:
                    // umm... yeah... I'm going to need to take your red packet and...
                    return null;
                    //break;
            }
        }
        return null;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-01T15:23:38.000

要验证 IP 地址，请使用以下软件包

套餐：-

```
using System.Net;  //To use IPAddress, inbuilt functionality
using System.Net.Sockets; //To access AddressFamily,
using System.Text.RegularExpression; //For Regex.IsMatch() 
```

方法：-

```
public bool ValidIPAddress(string IP)
{
    //Validate IP Address , neither IPV4, or V6

    if (IPAddress.TryParse(IP, out var address) == false)
       return false;
    //check for IPV6

    if (address.AddressFamily == AddressFamily.InterNetworkV6)

    {

        if (IP.IndexOf("::") > -1)

            return true;

        return false;

    }

    //check for IPV4

    else

    {

    //Ipv4 address shouldn't start with 0 eg..it is invalid 0XX.0XX.0XX.0XX
        if (Regex.IsMatch(IP, @"(^0\d|\.0\d)"))

            return false;

        else if (IP.Count(c => c == '.') != 3)

            return false;

        else

            return true;

    }

} 
```

如果需要，请查看以下链接：-

[https://lncharan.blogspot.com/2020/09/validate-ip-address-in-c.html](https://lncharan.blogspot.com/2020/09/validate-ip-address-in-c.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-23T06:29:57.517

如果您只想检查是否有效，请仅执行以下操作：

`bool isValid = IPAddress.TryParse(stringIP, out IPAddress _);`

即使高于 255 并且如果有点，它也将有效，因此无需检查它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-07T17:49:58.897

有一个简单的方法可以做到这一点，但它需要互联网连接来检查 IP 或主机名：

```
using System;
using System.Net;

var dnsAddress = ///

try
{
    // IP like 8.8.8.8
    if (IPAddress.TryParse(dnsAddress, out var ipAddress)
        && Dns.GetHostAddresses(ipAddress.ToString()).Length >= 1)
    {
        return true;
    }

    // Hostname like smtp.gmail.com
    if (Dns.GetHostEntry(dnsAddress).AddressList.Length >= 1)
    {
        return true;
    }

    return false;
}
catch (Exception exception) when (
            exception is ArgumentNullException
            || exception is ArgumentOutOfRangeException
            || exception is System.Net.Sockets.SocketException
            || exception is ArgumentException
)
{
    // Write log message, if necessary

    return false;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-01-16T13:13:43.293

试试这个：

```
private bool IsValidIP(String ip)
    {
        try
        {
            if (ip == null || ip.Length == 0)
            {
                return false;
            }

            String[] parts = ip.Split(new[] { "." }, StringSplitOptions.None);
            if (parts.Length != 4)
            {
                return false;
            }

            foreach (String s in parts)
            {
                int i = Int32.Parse(s);
                if ((i < 0) || (i > 255))
                {
                    return false;
                }
            }
            if (ip.EndsWith("."))
            {
                return false;
            }

            return true;
        }
        catch (Exception e)
        {
            return false;
        }
    } 
```

# c# - 获取选定列表项的对象属性

> ID：11412957
> 
> 赞同：0
> 
> 时间：2012-07-10T12:06:28.893
> 
> 标签：c#, windows-phone-7, xaml

我有一个列表框，它的列表源是“结果”对象的列表。结果类如下所示：

```
public class Result
{
    public string GUID { get; set; }
    public string __invalid_name__I { get; set; }
    public string FN { get; set; }
    public string DOB { get; set; }
    public string SEX { get; set; }
    public string SN { get; set; }
    public string __invalid_name__U { get; set; }
    public string TYPE { get; set; }        

    //Gender icon path associated with result
    public string SexIcon { get; set; }
} 
```

这就是我的列表框在 xaml 代码中的样子：

```
<ListBox 
            Height="517" 
            HorizontalAlignment="Left" 
            Margin="12,84,0,0" 
            Name="searchList" 
            VerticalAlignment="Top" 
            Width="438" 
            SelectionChanged="SearchList_SelectedEvent">

            <!-- What each listbox item will look like -->
            <ListBox.ItemTemplate>
                <DataTemplate>                        
                    <StackPanel Orientation="Horizontal">

                        <Image Source="{Binding Path=Sex, Converter={StaticResource SexToSourceConverter}}" Visibility="Visible" />                            
                        <StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Name="FirstName" Text="{Binding FN}" FontSize="28" Margin="0,0,10,0"/>
                                <TextBlock Name="LastName" Text="{Binding SN}" FontSize="28" />
                            </StackPanel>
                            <TextBlock Text="{Binding DOB}" FontSize="24" />
                            <!-- Line Stroke="#FF04863C" StrokeThickness="3" X1="100" Y1="100" X2="300" Y2="100" / -->
                        </StackPanel>
                    </StackPanel>                            
                </DataTemplate>
            </ListBox.ItemTemplate>

        </ListBox> 
```

所以我的问题是，（以及我真正苦苦挣扎的问题）是如何获取所选项目（基本上是结果对象）的 GUID 属性的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:35:59.787

（searchList.SelectedItem 作为结果）.GUID

# android - LocationManager 无法在 Android 手机上运行

> ID：11412960
> 
> 赞同：1
> 
> 时间：2012-07-10T12:06:41.487
> 
> 标签：android, locationmanager

我有个问题，

当我在模拟器中测试它并在 DDMS 屏幕中编辑位置时，位置管理器工作得非常好，但是当我在**三星 Galaxy SII**上测试它时，它的 nog 工作..

请帮我。

```
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class LbsGeocodingActivity extends Activity {

    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 0; // in Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

    protected LocationManager locationManager;

    protected Button retrieveLocationButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MINIMUM_TIME_BETWEEN_UPDATES, MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, new MyLocationListener());

        retrieveLocationButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                showCurrentLocation();
            }
        });        
    }    

    public String getMyPhoneNumber(){
        TelephonyManager mTelephonyMgr;
        mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE); 
        return mTelephonyMgr.getLine1Number();
    }

    protected void showCurrentLocation() {

        Location location =   locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        if (location != null) {
            String message = String.format("Current Location \n  Longitude: %1$s \n Latitude: %2$s \n %3$s ", location.getLongitude(), location.getLatitude(), getMyPhoneNumber());
            Toast.makeText(LbsGeocodingActivity.this, message, Toast.LENGTH_LONG).show();
        }

    }   

    private class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {
        String message = String.format(
                "New Location \n Longitude: %1$s \n Latitude: %2$s \n  %3$s ",
                location.getLongitude(), location.getLatitude(),   getMyPhoneNumber()
        );
        Toast.makeText(LbsGeocodingActivity.this, message,   Toast.LENGTH_LONG).show();
    }

    public void onStatusChanged(String s, int i, Bundle b) {
        Toast.makeText(LbsGeocodingActivity.this, "Provider status changed",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderDisabled(String s) {
        Toast.makeText(LbsGeocodingActivity.this,
                "Provider disabled by the user. GPS turned off",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderEnabled(String s) {
        Toast.makeText(LbsGeocodingActivity.this,
                "Provider enabled by the user. GPS turned on",
                Toast.LENGTH_LONG).show();
    }

}
} 
```

在我拥有的权限中：

`ACCES_COURSE_LOCATION` `ACCES_FINE_LOCATION`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T15:05:21.313

也许您在室内进行测试，并且无法获取任何 GPS 信息。尝试改变`LocationManager.GPS_PROVIDER-->LocationManager.NETWORK_PROVIDER.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:38:50.613

这可能是您错误使用`String.format()`. 有时这会导致奇怪的、特定于设备的问题。尝试，

```
String lon = "" + location.getLongitude();
String lat = "" + location.getLatitude();
String num = getMyPhoneNumber();

String message = String.format(
    "New Location \n Longitude: %1$s \n Latitude: %2$s \n %3$s",
    lon,
    lat,
    num
); 
```

* * *

你试过用这个吗？

```
LocationManager lm = (LocationManager)act.getSystemService(Context.LOCATION_SERVICE);
Criteria crit = new Criteria();
crit.setAccuracy(Criteria.ACCURACY_FINE);
String provider = lm.getBestProvider(crit, true);
Location loc = lm.getLastKnownLocation(provider); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T23:49:03.383

我在运行 4.0.4 的 HTC 不可思议的 S 上使用 locationmanager 时遇到了类似的问题。它只会在一段时间后停止在真实设备上触发位置更改。在其他一些设备上它可以工作。非常断断续续。

我的解决方案是惹恼 LocationManager 并使用 LocationClient pardiagm。 [http://developer.android.com/reference/com/google/android/gms/location/LocationClient.html](http://developer.android.com/reference/com/google/android/gms/location/LocationClient.html)

自从谷歌播放服务推出以来，我的设备上的 Locationmanager 一直是断断续续的。我无法对它发生的原因给出任何其他解释。

但是 LocationClient 每次都有效，而且它从位置管理中删除了愚蠢的“提供者”概念。

# eclipse - GWT 项目导出期间的错误

> ID：11412961
> 
> 赞同：0
> 
> 时间：2012-07-10T12:06:47.107
> 
> 标签：eclipse, google-app-engine, gwt

我正在尝试将 GWT / Appengine 项目导出到存档文件或文件系统中。得到以下错误。我还没有尝试将它导入到不同的环境中。如果我遗漏了什么，你能告诉我吗？另一个可以提供帮助的输入是 - 在此类项目的不同开发人员之间分配开发环境（在初始设置期间）的最佳方式是什么。显然，一旦设置好 svn 就可以启用代码共享。

导出过程中遇到的问题：

```
 Error exporting Jetstream/gwt-unitCache/gwt-unitCache-00000138551F4486: File not found: D:\workspace\Jetstream\gwt-unitCache\gwt-unitCache-00000138551F4486.
    File not found: D:\workspace\Jetstream\gwt-unitCache\gwt-unitCache-00000138551F4486.
  Error exporting Jetstream/gwt-unitCache/gwt-unitCache-000001385521C520: File not found: D:\workspace\Jetstream\gwt-unitCache\gwt-unitCache-000001385521C520.
    File not found: D:\workspace\Jetstream\gwt-unitCache\gwt-unitCache-000001385521C520.
  Error exporting Jetstream/war/WEB-INF/appengine-generated/datastore-indexes-auto.xml: Resource is out of sync with the file system: '/Jetstream/war/WEB-INF/appengine-generated/datastore-indexes-auto.xml'.
    Resource is out of sync with the file system: '/Jetstream/war/WEB-INF/appengine-generated/datastore-indexes-auto.xml'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T06:41:40.920

您可以在首选项 - 常规 - 工作区 - 自动刷新中启用自动刷新

就我而言，这不适用于 Google App Engine 的 web.xml。所以我在 Eclipse 导航器中单独获取文件，刷新它（通过右键单击特定文件并选择“刷新”）并成功完成存档导出。

# javascript - Knockout.js -> 在 foreach 中更改后代绑定

> ID：11412963
> 
> 赞同：0
> 
> 时间：2012-07-10T12:06:51.770
> 
> 标签：javascript, foreach, knockout.js

说我有一个柜台`count = 2`。对于每个计数，我想要

```
<div>
    </div></div>
</div> 
```

所有这些都将绑定到另一个视图模型，其中 count 不是一部分。除了将所有特定于 VM 的代码转储到一个巨型 VM 中之外，没有其他办法了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:36:26.527

没有什么能阻止你打破你的视图模型......而不是 1 个巨型 VM，你有 1 个根 VM。然后包含与视图的不同部分相关的对象

# math - CSS3 算术

> ID：11412965
> 
> 赞同：3
> 
> 时间：2012-07-10T12:07:05.600
> 
> 标签：math, css

我最近一直在使用和学习 CSS3，并享受它的许多功能。现在我想知道是否可以设置一个有条件地分配块元素宽度的 CSS 规则。我所追求的那种东西 - 如果屏幕宽度小于 500 像素，则使用 320 像素的宽度，否则使用屏幕尺寸的 80% 的宽度。

是的，我意识到我可以通过 JavaScript 来做这种事情——只是想知道是否没有更优雅的 CSS3 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:09:30.607

```
@media only screen and (max-width: 500px) {
    // CSS rules go here
}

@media only screen and (min-width: 501px) and (max-width: 959px) {
    // CSS rules go here
}

@media only screen and (min-width: 960px) {
    // CSS rules go here
}

etc... 
```

[来自 W3C](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:09:45.920

是的，很有可能使用 CSS 媒体查询 - [http://www.css3.info/preview/media-queries/](http://www.css3.info/preview/media-queries/)

```
.mydiv {
    width: 80%; /* normal case */    
}

/* special case if screen width < 500 */
@media all and (max-width: 500px) {
    .mydiv {
        width: 320px;
    }
} 
```

# c# - 简单数据绑定

> ID：11412966
> 
> 赞同：0
> 
> 时间：2012-07-10T12:07:08.333
> 
> 标签：c#, wpf, data-binding

我想进入 DataBinding，目前我被卡住了。我只是无法让它工作。我阅读了很多教程，但老实说，没有一个对我有真正的帮助。我知道 DataBinding 是什么以及为什么使用它很酷，但我从来没有遇到过向我展示如何**在我的代码**中做什么的教程。他们都只是假设我知道我必须在那里做什么并且只展示 XAML 方面。

这是我的课：

```
public class Test : Window
{
    public IList<String> data { get; set; }

    public Test() {
        data = new List<String>();
        InitializeComponents();
        data.Add("Hello");
        data.Add("World");
    }
} 
```

这是我的 XAML

```
<ListBox HorizontalAlignment="Left" Margin="6,6,0,6"
    Name="SourceDocumentsList" Width="202"
    ItemsSource="{Binding Source={x:Static Application.Current}, Path=data}" /> 
```

然而，当我渲染窗口时，什么都没有显示。这么简单的事情怎么会失败？我在这里做错了什么？

按照我的理解，我告诉 Listbox 它应该将自身绑定到`data`当前正在运行的应用程序的属性，即我的类`Test`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:12:24.930

当前运行的应用程序**不是**那个类，它只是一个窗口，你绑定的是`App`类的实例。您不能以这种方式静态获取该窗口实例。应该如何进行绑定取决于 XAML 的位置（`Test`例如，如果它在窗口中，您可以`RelativeSource={RelativeSource AncestorType=Window}`改为使用）。

我建议阅读[有关数据绑定的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms752347.aspx)和[有关调试的这篇文章](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/30/debugging-data-bindings-in-a-wpf-or-silverlight-application.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:22:47.407

将这些属性移动到一个单独的类中，例如

```
public class ViewModel
{
    public IList<String> Data { get; set; }

    public ViewModel()
    {
        Data = new ObservableCollection<string>();
        Data.Add("Hello");
        Data.Add("World");
    }
} 
```

将您的窗口代码更改为

```
public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel();
    } 
```

您的 Xaml 看起来不那么复杂

```
<ListBox HorizontalAlignment="Left" Margin="6,6,0,6"
Name="SourceDocumentsList" Width="202"
ItemsSource="{Binding Data}" /> 
```

这就是我们所说的进入 MVVM 模式。快乐编码！

# c# - c# (wp7) 中的文本框在 1 行中

> ID：11412969
> 
> 赞同：0
> 
> 时间：2012-07-10T12:07:22.127
> 
> 标签：c#, silverlight, windows-phone-7

我的 WP7 项目中的 2 个文本块有问题（在表达式混合中）。

我把它们[文本块][文本块]放在一个网格中，问题是第一个文本块的文本是随机的，一次得到 5 个字符，一次得到 10 个字符，第一个文本块在第二个文本块上。

例子：

```
[First Text][Second Text]
[First Text Dadada] Text] 
```

我想让它们：

```
[First Text][Second Text]
[First Text Dadadda][Second Text] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:15:36.230

将每个文本框放在它自己的网格列中（`Grid.Column="..."`属性来指定）*或*将它们包装到`StackPanel`指定的`Orientation=Horizontal`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:00:10.227

您的网格应该可以自动调整大小，并且应该为两个 textBlocks 分配它们各自的列。

例如，为您的问题考虑以下网格布局：

```
<Grid>
   <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto"/>
      <ColumnDefinition Width="Auto"/>
   </Grid.ColumnDefinitions>
</Grid> 
```

现在，将列分配给您的 textBlocks（在网格内声明），例如：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>
    <TextBlock Grid.Column="0"/>
    <TextBlock Grid.Column="1"/>
</Grid> 
```

那应该这样做。

# windows - 无法使用 TortoiseGit 从 ubuntu 服务器克隆 git repo

> ID：11412973
> 
> 赞同：1
> 
> 时间：2012-07-10T12:07:39.670
> 
> 标签：windows, git, ubuntu-10.04, tortoisegit, gitolite

`git clone`当我的 ubuntu 服务器运行**gitolite**时，我遇到了一些问题。

首先，我从想要从服务器克隆存储库的开发人员那里获得了一个公钥。**这是一个用putty**创建的 rsa 密钥。因此，我执行了以下操作以将其从 putty 样式解析为 openssh 格式：

`ssh-keygen -i -f /tmp/ssh2/YourName.pub > /tmp/openssh/YourName.pub`（取自[http://gitolite.googlecode.com/git/doc/ssh-troubleshooting.mkd?r=d3a663d03f1027f909732d55d0519bdd84edb62c](http://gitolite.googlecode.com/git/doc/ssh-troubleshooting.mkd?r=d3a663d03f1027f909732d55d0519bdd84edb62c)）

并将公钥以及配置文件中的 repo 和新用户的新条目上传到 gitolite-admin repo。

到现在为止还挺好。

开发人员正在使用 **** 和**putty**连接到服务器，该服务器在*非标准端口上运行***git** ，并且他一遍又一遍地遇到相同的错误：

 *```
Cloning into 'D:\path\to\dirctory'...
error: Recv failure: Connection was reset while accessing http://sub.domain.com/info/refs
fatal: HTTP request failed

git did not exit cleanly (exit code 128) 
```

谁能给我一些关于这个问题的建议？

* * *

编辑：

同时，我们通过使用协议而不是 来`git clone`处理存储库，因此它似乎不是 rsa_public.key 或类似的问题。`ssh://``git://`

服务器上的 iptables 正在接受通过 git 端口的连接，但它不断给出上述错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:11:40.777

[OP herom](https://stackoverflow.com/users/1073366/herom)最初评论说开发者用作`git://git@remote.server.com:port/repo.git`地址。

我问是否有任何防火墙问题，阻止使用 git 端口（**`9418`**），但 OP 提到：

> 不，不应该有防火墙问题，因为 iptables 正在接受 git 端口的流量 - 该端口被转发并且在从外部连接时似乎是另一个端口......
> 现在，开发人员通过克隆 repo `ssh://`（甚至连接到！`ssh-port`）

我注意到 git 端口有时会被阻塞，如[该线程](http://comments.gmane.org/gmane.os.rtems.user/19350)所示。
如果不在客户端，可能在服务器端。*

# javascript - 页面加载后如何注册事件处理程序？

> ID：11412977
> 
> 赞同：2
> 
> 时间：2012-07-10T12:07:47.047
> 
> 标签：javascript, jquery, ajax

我希望我把问题说清楚了。

假设您有一些复选框（或任何其他类型的元素），您在页面加载时为其注册事件处理程序。然后使用 AJAX 添加更多复选框（因此无需重新加载页面）。但是您还希望这些新添加的复选框（在页面加载后）具有相同的注册事件处理程序吗？

我尝试的是这样，但我觉得必须有更好的方法：

```
$(document).ready(function () {

  // Register custom envets handler
  registerCustomEventHandlers();

  $('a').on('click', addExtraFields);
});

function registerCustomEventHandlers() {
  $('input.class_name').on("change", sayHelloWorld);
}

function sayHelloWorld() {
  alert('Hello world');
}

function addExtraFields() {
  // insert some checkboxes...

  // register the events handler again for the newly added fields
  registerCustomEventHandlers();
} 
```

所以基本上在添加复选框的函数中，我再次注册了所有事件处理程序。我正在看类似的东西，`$(document).change(function() {});`但显然并非所有浏览器都支持它......

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:12:13.977

您可以将事件委托给，`document`以便它们也将应用于所有未来的输入。你甚至不需要把它放在一个`domReady`事件中，因为`document`它总是可用的：

```
$(document).on("change", "input.class_name", sayHelloWorld);

function sayHelloWorld() {
    alert('Hello world');
}

function addExtraFields() {
    // insert some checkboxes, they will have the same handler attached when inserted
} 
```

**演示：http:** [//jsfiddle.net/gdX3R/1/](http://jsfiddle.net/gdX3R/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:33:11.440

[由于这些原因](http://shaneriley.tumblr.com/post/1679999567/when-you-should-use-jquerys-live-and-delegate-methods)，我建议不要使用实时选择器

简而言之，这是一个性能问题，因为它会干扰每个点击事件。

相反，只需使用输入的最低公共父元素（很可能是表单）的帖子中描述的委托：

```
$('#yourFormId').delegate('.class_name', 'click', function() { 
   // what you want to do
}); 
```

你可以[在这里找到一个 jsfiddle](http://jsfiddle.net/eqYhw/)

并且不要使用像 input.class_name 这样的选择器（除非输入以外的元素具有该类名）。它们比 .class_name 慢，因为它们循环遍历表单中的所有输入，以搜索具有该类的元素，而不仅仅是按类选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:12:45.210

从 jquery 1.4 开始，您也可以随时使用`live()`http://api.jquery.com/live/ [，](http://api.jquery.com/live/)它允许您现在和将来将处理程序附加到任何匹配的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T12:13:19.003

在 Jquery 中完成此操作的方式是在创建处理程序时不需要对象存在。

你可以使用：

```
$(document.body).on("click", "input[type='checkbox']", 
   function(){alert($(this))}
); 
```

这将应用于添加到页面的任何新复选框，无论时间如何。

# oracle - Oracle varchar2 到 nvarchar2 的转换

> ID：11412982
> 
> 赞同：3
> 
> 时间：2012-07-10T12:08:00.193
> 
> 标签：oracle, character-encoding, varchar2

如果我在 Oracle 中将现有列类型从 varchar2 更改为 nvarchar2，Oracle 会自动在字符集之间转换现有列数据，还是我应该自己做？

我使用的是 Oracle 11g，varchar2 字符集是 WE8MSWIN1252，nvarchar2 字符集是 AL16UTF16

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:47:53.717

您可以使用包 DBMS_REDEFINITION 将表的 varchar2 更改为 nvarchar2 列

请找到以下可能有帮助的链接

[使用在线表重定义将大表迁移到 Unicode](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch11charsetmig.htm#i1006270)

还可以找到通用字符集迁移的文档

[通用字符集迁移](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch11charsetmig.htm)

# c++ - Timezonelist 包含混合语言的条目

> ID：11412985
> 
> 赞同：2
> 
> 时间：2012-07-10T12:08:11.210
> 
> 标签：c++, c, windows, utf-8

在 Windows 上，我无法将时区设置为特定时区。我使用 win api SetTimezoneInformation 进行设置，即使系统日期/时间控制面板未更新，它也会返回成功。当时区列表在一个语言环境中包含很少的条目而在另一个语言环境中包含很少的其他条目时，会导致实际问题，从而导致时区设置不正确。如果它只包含一种语言的条目，那么 api 可以正常工作。我的应用程序只是从注册表中读取时区。我不知道如何解决这个问题。有没有其他方法可以在 c/c++ 中设置时区？

# templates - 调整前端编辑窗口的大小joomla 2.5

> ID：11412987
> 
> 赞同：0
> 
> 时间：2012-07-10T12:08:23.023
> 
> 标签：templates, joomla, joomla2.5

我想增加前端编辑窗口的宽度。我在 Joomla 论坛上看到这是一个专栏问题（我并没有真正理解上面所说的内容......）有人说我应该改变，但我的（“mega”）`task " $_REQUEST[task] " into "layout"`中没有那个代码`index.php`) 模板...我应该在索引中的某处添加这一行吗？如何 ？非常感谢！

祯姆

Ps：我使用simpleCE作为编辑器（使用手机工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:54:25.927

这是模板问题，不是 100% 的 div 宽度

# c# - 实体到 SQl，linq 到 sql 查询

> ID：11412993
> 
> 赞同：0
> 
> 时间：2012-07-10T12:08:43.780
> 
> 标签：c#, entity-framework, linq-to-sql

查找表中出现的所有不同人员，这些人员负责创建连接更多或更多人员和实体项目的负责实体？

如何在技术中转换 sql 查询？sql查询是

```
select distinct p.PersonID,p.FirstName,p.LastName
from Responsible tr inner join People p on p.PersonID=tr.People_PersonID; 
```

我的尝试是

```
 string query = @"SELECT value empl 
                        FROM TicketBaseEntities.Responsible AS tr 
                        INNER JOIN TicketBaseEntities.People AS empl 
                        on empl.PersonID =tr.Responsibles.People_PersonID where tr.Responsibles !=null";
        return Context.CreateQuery<Employee>(query).Distinct(); 
```

错误信息是：

“People_PersonID”不是“Transient.collection[TicketBaseModel.Person(Nullable=True,DefaultValue=)]”的成员。要提取集合元素的属性，请使用子查询来迭代集合。接近简单标识符，第 5 行，第 63 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:15:44.273

```
(from tr in Responsible
join from p in People on tr.People_PersonID equals p.PersonID
select p.PersonID,p.FirstName,p.LastName).Distinct() 
```

您可以实现 IComparer 接口以使用 Class People 的 Distinct() 函数

# .htaccess - 如何将 URL 重定向到另一个应用程序目录？

> ID：11412999
> 
> 赞同：0
> 
> 时间：2012-07-10T12:09:06.213
> 
> 标签：.htaccess

是否可以使用 .htaccess 将服务器指向另一个应用程序实例（在另一个 FTP 子目录中）？

在我的 FTP 服务器上，我有 www1、www2、www3 之类的目录——每个目录都有自己的网站版本实例。`www.domain.com`当出现问题时，我想将地址切换到所需的目录。