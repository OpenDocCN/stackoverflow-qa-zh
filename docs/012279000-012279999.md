# StackOverflow 问答 12279000-12279999

# android - 收件人未显示在 Android 的电子邮件屏幕中

> ID：12279003
> 
> 赞同：0
> 
> 时间：2012-09-05T10:05:39.110
> 
> 标签：android, email

嗨，我正在使用内置的电子邮件发送功能。但是当我尝试代码时。

```
void sendEmailMessage(String emailId)
    {
        Log.i(TAG, "emailId = "+emailId);
        Intent intentEmail = new Intent(Intent.ACTION_SEND);
        intentEmail.setType("text/plain");
        String[] recipients = new String[]{emailId};

        intentEmail.putExtra(Intent.EXTRA_EMAIL,recipients);
        intentEmail.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
        intentEmail.putExtra(Intent.EXTRA_TEXT, "body of email");
        try
        {
            startActivity(Intent.createChooser(intentEmail, "Send mail..."));
        } catch (android.content.ActivityNotFoundException ex)
        {
            Toast.makeText(this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
            ex.printStackTrace();
        }

    } 
```

我在电子邮件屏幕上的收件人 EditText 中没有看到收件人电子邮件地址。我没有得到我做错的事情，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:18:37.707

我认为你的`void sendEmailMessage(String emailId)`方法的`emailId`论点没有价值。只需检查您从哪里被调用。并且，确保您传递电子邮件 ID 或不传递？例如。在您的班级的某个地方，只需使用值调用该方法，如下所示。

```
sendEmailMessage("mail@mail.com"); 
```

# magento - Magento 的 Google 电子商务跟踪

> ID：12279005
> 
> 赞同：1
> 
> 时间：2012-09-05T10:05:44.143
> 
> 标签：magento, google-analytics, e-commerce

我在让 Google 的电子商务跟踪始终为 Magento 工作时遇到了一些困难。我已经在管理员的 google api 部分设置了 UA 代码，并且电子商务跟踪已打开。当我进入成功页面时，代码就在那里。正在发送一些订单，但不是全部。我已经安装了谷歌浏览器分析测试仪，并且正在发送信标。以昨天的订单为例，来自 sagepay 的 1 个在分析中，但另一个 sagepay 订单不排除支付网关。我已经在成功页面上重新设置了权限，并在控制台中整理了一些警告，但没有任何效果，我很困惑。

我还安装了 Jiraffe 实时分析，并且在跟踪订单时遇到了同样的问题，它昨天没有跟踪单个订单，但可以很好地跟踪购物车数据。

有没有人有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T12:57:08.883

Magento 中的谷歌跟踪：

打开 Magento 管理区域并导航到 System->Configuration->Sales->Google API。展开谷歌分析部分。从启用下拉菜单中选择是选项。在帐号字段中输入 Google Analytics 帐号。单击保存配置按钮。

谢谢..！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:02:10.837

首先，并非每个使用支付网关的用户都会返回您的成功页面，因为他们中的一些人只是将交易留在第三方服务的感谢页面 - 然后您将不会在 GA 中看到此类交易。其次，不是每个用户都让你跟踪他（adblock 阻止其用户被跟踪）。

至于现在，如果您确定用户回到 Magento 的成功页面，请回复。

为了更好地了解您的客户行为，我建议您安装此扩展[Fooman Google Analytics Plus](http://www.magentocommerce.com/magento-connect/fooman-googleanalyticsplus.html)并设置适当的渠道（您可以在扩展页面找到简要说明）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:03:06.487

我建议您检查传递给 GA 的数据格式：

*   价格应格式化为“1200000.00”：千位无分隔符，小数点为点，无货币
*   文本值应正确转义其中包含的引号：'That\s it'

Fooman 扩展是一个好的开始，因为 Magento 中的基本 GA 实现是无意义的耻辱，虽然并不完美。

# mysql - 选择日期（字符串日期） 我有一个表，其中有一列文本类型，用于存储NOW()插入查询中使用的各种设置，包括日期。 现在我想从该表中获取该列在特定日期之前的所有行（例如 2012-09-19）。 比较 viaDATE(date_column) <date(now())很容易，但我不知道如何传递特定日 0="" 1="" 2="" 3="" 4="" 1303="" 问问题="" 2012-09-05t10:05:51.973="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我有一个表，其中有一列文本类型，用于存储now()插入查询中使用的各种设置，包括日期。="" 现在我想从该表中获取该列在特定日期之前的所有行（例如="" 2012-09-19）。="" 比较="" viadate(date_column)<date(now())很容易，但我不知道如何传递特定日期而不是="" now()，因为输入字符串的日期格式可能不同。="" 这是一个示例代码：="" insert="" into="" table="" (date_column)="" values="" (now())="" 并且在选择时：="" select="" *="" from="" where="" date(date_column)<date('2012-09-19');="" 编辑：上面的代码确实有效。我最初错过了日期周围的报价。="" 如果="" date_column="" 确实是="" date="" 类型，则不需要在其上运行="" date()。="" 另请注意，在="" 上运行="" date()="" 将阻止="" mysql="" 使用任何索引，因此您将进行表扫描。="" 尝试：="" <="" '2012-09-19'="" mysqldatedatetimeselect="" 回答="" answer="" 避免在列类型="" (="" function(col)="" ...)="" 周围放置函数。这会降低性能。您希望拥有一个具有域完整性的表，这意味着如果您要存储日期，它就是一种date类型。="" 要选择与您匹配的记录date，只需将您的="" yyyy-mm-dd="" 日期用引号括起来：="" 于="" 2012-09-06t02:29:40.720="" 2012-09-06t02:10:05.750="" related="" android="" -="" opengl="" es="" 2.0="" 是="" 游戏开发的标准吗？="" arrayadapter="" getcount="" 总是返回="" haskell="" “eta="" reduce”不总是在="" 中举行吗？="" c#="" isamplegrabbercb::样本不工作="" ios="" 带有新的预写日志="" (wal)="" 日志的预填充="" core="" data="" sql="" 存储="" python="" 如何检索="" multiindex="" dataframe="" 的视图="" coding-style="" ada="" 样式错误="" c++="" 如何使用线性渐变创建文本？="" r="" 生成范围="" 和="" 内的正态分布数据="" underscore.js="" 如何使用="" 获取基于嵌套属性的唯一数组="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：12279006
> 
> 赞同：1
> 
> 时间：
> 
> 标签：mysql, date, datetime, select

我有一个表，其中有一列文本类型，用于存储`NOW()`插入查询中使用的各种设置，包括日期。

现在我想从该表中获取该列在特定日期之前的所有行（例如 2012-09-19）。

比较 via`DATE(date_column)<DATE(NOW())`很容易，但我不知道如何传递特定日期而不是 NOW()，因为输入字符串的日期格式可能不同。

这是一个示例代码：

```
INSERT INTO table (date_column) VALUES (NOW()) 
```

并且在选择时：

```
SELECT * FROM table WHERE DATE(date_column)<DATE('2012-09-19'); 
```

**编辑：上面的代码确实有效。我最初错过了日期周围的报价。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:29:40.720

避免在列类型 ( `WHERE FUNCTION(col) ...`) 周围放置函数。这会降低性能。您希望拥有一个具有域完整性的表，这意味着如果您要存储日期，它就是一种`date`类型。

要选择与您匹配的记录`date`，只需将您的 YYYY-MM-DD 日期用引号括起来：

```
SELECT * FROM table WHERE date_column < '2012-09-19' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:10:05.750

如果 date_column 确实是 DATE 类型，则不需要在其上运行 DATE()。

另请注意，在 date_column 上运行 DATE() 将阻止 MySQL 使用任何索引，因此您将进行表扫描。

尝试：

```
WHERE date_column < '2012-09-19' 
```</date(now())很容易，但我不知道如何传递特定日>

# javascript - 如何使用脚本在jsf中执行自动单击命令按钮

> ID：12279007
> 
> 赞同：1
> 
> 时间：2012-09-05T10:05:55.053
> 
> 标签：javascript, jsf, oracle-adf

我有一种情况，我必须在以下 JSF 页面中的页面加载时执行命令按钮操作侦听器

```
 <?xml version='1.0' encoding='UTF-8'?>
        <jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1"
         xmlns:f="http://java.sun.com/jsf/core"
         xmlns:af="http://xmlns.oracle.com/adf/faces/rich"
         xmlns:trh="http://myfaces.apache.org/trinidad/html">
        <jsp:directive.page contentType="text/html;charset=UTF-8"/>

        <f:view>

       <af:document id="d1" partialTriggers="pt1">
       <af:resource type="javascript">  
       function callCustomButton(){
       var button =AdfPage.PAGE.findComponentByAbsoluteId("cbCustomFields");
       ActionEvent.queue(button,true);
       }
       </af:resource>

     <af:clientListener method="callCustomButton" type="load"/>

      <af:form id="f1">
     <af:pageTemplate viewId="/ESOPM_Base_Template.jspx" id="pt1">

    <f:facet name="main_content">

    <af:decorativeBox id="db1" theme="medium">
        <f:facet name="top"/>
        <f:facet name="center">
        <af:panelGroupLayout layout="scroll" id="pgl2"> 
        <trh:tableLayout id="tblUpload" cellPadding="3" cellSpacing="3"  halign="center" inlineStyle="font-size:1.2em; font-weight:bold; font-family:helvetica,sans-serif;">
                <trh:rowLayout id="rl1">

                    <trh:cellFormat id="cf1">            
                        <af:panelGroupLayout layout="horizontal" id="pgl3">

                   <af:commandButton text="Custom Fields"                       

                  actionListener="#{EditProperties.generateCustomAttributeFields}" 
                  id="cbCustomFields"  partialSubmit="true"  visible="true"/>
                        </af:panelGroupLayout>
                    </trh:cellFormat>
                </trh:rowLayout>

                  </trh:cellFormat>
              </trh:rowLayout>

        </trh:tableLayout>
        </af:panelGroupLayout>
        </f:facet>
        </af:decorativeBox>
        </f:facet>
</af:pageTemplate>
</af:form>
</af:document>
</f:view>

</jsp:root> 
```

命令按钮是“自定义字段”，我试图通过客户端侦听器在页面中使用的 javascript 调用它。但是当用户加载此页面时，按钮不会被点击，并且其动作监听器操作也不会被执行。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:11:25.173

这是 adf-stuff JSF 2 吗？如果是这样，您可以使用 preRenderViewlistener 在页面加载时执行服务器端的操作：

```
<f:view>
    <f:metadata>
      <f:event type="preRenderView" listener="#{bean.doSomething}"/>
    </f:metadata>
</f:view> 
```

**更新**

另一种方法是使您的支持 bean 请求范围并使用 @PostConstruct 注解来初始化数据：

```
@ManagedBean
@RequestScoped
public class Bean {
    @PostConstruct
    public void init (){

    }  
} 
```

如果你有机会切换到另一个 JSF 组件库，我会推荐 Primefaces。它们为通过客户端脚本执行支持 bean 方法提供了一个非常简单的解决方案。请`<p:remoteCommand>`参阅[https://www.primefaces.org/showcase/ui/ajax/remoteCommand.xhtml](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:25:56.193

在 f:view（托管 bean）中创建一个 afterMethod 并监听 RENDER_RESPONSE 阶段。然后通过调用调用 JS

```
String script = "callCustomButton();";
FacesContext fctx = FacesContext.getCurrentInstance();  
//Trinidad class
ExtendedRenderKitService erks = null;  
//Service also is a Trinidad class
erks = Service.getRenderKitService(fctx, ExtendedRenderKitService.class);
erks.addScript(fctx, script); 
```

确保通过在视图范围内设置内存标志来避免双重调用

Frank Ps 您是否尝试过在服务器上调用该函数，以便在托管 bean（侦听器）中对动作事件进行排队

# c# - 使用 c# 和 HTTPrequest 登录网站

> ID：12279014
> 
> 赞同：2
> 
> 时间：2012-09-05T10:06:28.453
> 
> 标签：c#, login, web, httprequest

我想使用 c# 使用 HTTPrequest 登录网站。我已经在谷歌和这个论坛上搜索过，但我仍然有一些问题。这是我的代码：

```
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Forms;
using System.Net;
using System.IO;

namespace BodytelConnection
{
/// <summary>
/// Interaktionslogik für MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
        webBrowser1.Navigate("http://www.bodytel.com/");
    }

    private void loginBtn_Click(object sender, RoutedEventArgs e)
    {
        string benutzername = textBox_benutzername.ToString();   // used just for test
        string passwort = textBox_passwort.ToString();
        string cookieHeader;
        passwort = changeString(passwort);
        benutzername = changeString(benutzername);

        HttpWebRequest req =                                                          (HttpWebRequest)HttpWebRequest.Create("http://www.bodytel.com/");
        req.UserAgent = "Mozilla/5.0 (Windows NT 6.1;rv:15.0) Gecko/20100101 Firefox/15.0)";
        req.Method = "POST";
        req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        req.Headers.Add("Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3");
        req.Headers.Add("Accept-Encoding: gzip,deflate");
        req.Headers.Add("Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7");
        req.KeepAlive = true;
        req.Headers.Add("Keep-Alive: 300");
        req.Referer = "https://secure.bodytel.com/de/mybodytel.html";
        req.AllowAutoRedirect = true;
        req.ContentType = "application/x-www-form-urlencoded";

        byte[] bytes = Encoding.ASCII.GetBytes("login=hans-neo@web.de%password=xxxxxstep=login");
        req.ContentLength = bytes.Length;
        using (Stream os = req.GetRequestStream())
        {
            os.Write(bytes, 0, bytes.Length);
        }
        WebResponse resp = req.GetResponse();
        cookieHeader = resp.Headers["Set-cookie"];

        webBrowser1.Navigate("https://secure.bodytel.com/de/mybodytel.html");
    }

    private string changeString(string myString)
    {

        myString = myString.Replace("System.Windows.Controls.TextBox: " ,"");
        return myString;
    }

    }

} 
```

我无法登录网站，我只是不知道问题出在哪里。我怎样才能登录到这个网站？

谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:43:34.397

假设 SSL 没有任何问题，并且您实际上收到了来自服务器的有效响应，您可以尝试正确编码您的值：

```
string loginstr = string.Format("login={0}&password={1}&step=login",
    HttpUtility.UrlEncode("hans-neo@web.de"),
    HttpUtility.UrlEncode("xxxxx"));
byte[] bytes = Encoding.ASCII.GetBytes(loginstr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T06:45:14.090

我解决了这个问题。

这是代码：

```
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Forms;
using System.Net;
using System.IO;
using System.Web;

namespace BodytelConnection{
/// <summary>
/// Interaktionslogik für MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
        webBrowser1.Navigate("http://www.bodytel.com/");
    }

    private void textBox_benutzername_TextChanged(object sender, TextChangedEventArgs e)
    {

    }

    private void textBox_passwort_TextChanged(object sender, TextChangedEventArgs e)
    {

    }

    private void loginBtn_Click(object sender, RoutedEventArgs e)
    {
        string benutzername = textBox_benutzername.ToString();
        string passwort = textBox_passwort.ToString();
        string cookieHeader;
        passwort = changeString(passwort);
        benutzername = changeString(benutzername);

        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("https://secure.bodytel.com/de/mybodytel.html");
        CookieContainer cookieContainer = new CookieContainer();
        request.CookieContainer = cookieContainer;

        request.Method = "POST";
        string postData = "login=hans-neo@web.de&password=xxxxx&step=login";
        byte[] byteArray = Encoding.UTF8.GetBytes(postData);
        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = byteArray.Length;
        Stream dataStream = request.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        string Text = "";

        foreach (Cookie cook in response.Cookies)
        {
            Text += "COOKIE: " + cook.Name + " = " + cook.Value + "\r\n";

        }
        request.AllowAutoRedirect = false;
        dataStream = response.GetResponseStream();
        StreamReader reader = new StreamReader(dataStream);
        string responseFromServer = reader.ReadToEnd();
        reader.Close();
        dataStream.Close();
        response.Close();

        webBrowser1.Navigate("https://secure.bodytel.com/de/mybodytel.html");
    }

    private string changeString(string myString)
    {

        myString = myString.Replace("System.Windows.Controls.TextBox: ", "");
        return myString;
    }

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:26:35.787

看起来您使用了错误的 URL 登录。当我在 chrome 中使用登录表单并查看它发出的内容时，它看起来像这样：

[Chrome 网络选项卡](http://i.imgur.com/rKgvU.png)

所以它通过“https://secure.bodytel.com/de/mybodytel.html”登录。我不知道 HttpWebRequest 是否可以像那样管理 SSL-Connections，但是在创建 WebRequest 对象时需要使用此链接。

# python - 来自大文件的 Python 随机 N 行（无重复行）

> ID：12279017
> 
> 赞同：3
> 
> 时间：2012-09-05T10:06:34.180
> 
> 标签：python, random, line, large-files, readline

我需要使用 python 从大 txt 文件中获取 N 行。这些文件基本上是制表符分隔的表。我的任务有以下限制：

*   这些文件可能包含标题（有些具有多行标题）。
*   标题需要以相同的顺序出现在输出中。
*   每条线只能取一次。
*   目前最大的文件约为 150GB（约 60 000 000 行）。
*   文件中的行长度大致相同，但在不同文件之间可能会有所不同。
*   我通常会随机抽取 5000 行（我可能需要多达 1 000 000 行）

目前我已经编写了以下代码：

```
inputSize=os.path.getsize(options.input)
usedPositions=[] #Start positions of the lines already in output

with open(options.input) as input:
    with open(options.output, 'w') as output:

        #Handling of header lines
        for i in range(int(options.header)):
            output.write(input.readline())
            usedPositions.append(input.tell())

        # Find and write all random lines, except last
        for j in range(int(args[0])):
            input.seek(random.randrange(inputSize)) # Seek to random position in file (probably middle of line)
            input.readline() # Read the line (probably incomplete). Next input.readline() results in a complete line.
            while input.tell() in usedPositions: # Take a new line if current one is taken
                input.seek(random.randrange(inputSize))
                input.readline() 
            usedPositions.append(input.tell()) # Add line start position to usedPositions
            randomLine=input.readline() # Complete line
            if len(randomLine) == 0: # Take first line if end of the file is reached
                input.seek(0)
                for i in range(int(options.header)): # Exclude headers
                    input.readline()
                randomLine=input.readline()
            output.write(randomLine) 
```

这段代码似乎工作正常。

我知道这段代码更喜欢输入中最长行之后的行，因为 seek() 最有可能返回最长行上的位置，并且下一行被写入输出。这无关紧要，因为输入文件中的行长度大致相同。我也知道如果 N 大于输入文件中的行数，此代码会导致无限循环。我不会对此进行检查，因为获取行数需要很多时间。

RAM 和 HDD 限制无关紧要。我只关心程序的速度。有没有办法进一步优化这段代码？或者也许有更好的方法？

**编辑**：澄清一下，一个文件中的行长度大致相同。但是，我有多个文件需要运行此脚本，并且这些文件的平均行长度会有所不同。例如，文件 A 每行可能有 ~100 个字符，文件 B 每行可能有 ~50000 个字符。我事先不知道任何文件的平均行长。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T16:11:39.787

只有一种方法可以避免顺序读取所有文件直到您采样的最后一行 - 我很惊讶到目前为止没有一个答案提到它：

您必须寻找文件内的任意位置，读取一些字节，如果您有一个典型的行长度，如您所说，应该是该值的 3 或 4 倍。然后拆分您在换行符（“\n”）上读取的块，并选择第二个字段 - 即随机位置的一行。

此外，为了能够始终如一地查找文件，应以“二进制读取”模式打开文件，因此应手动处理行尾标记的转换。

此技术无法为您提供已读取的行号，因此您将选定的行偏移量保留在文件中以避免重复：

```
#! /usr/bin/python
# coding: utf-8

import random, os

CHUNK_SIZE = 1000
PATH = "/var/log/cron"

def pick_next_random_line(file, offset):
    file.seek(offset)
    chunk = file.read(CHUNK_SIZE)
    lines = chunk.split(os.linesep)
    # Make some provision in case yiou had not read at least one full line here
    line_offset = offset + len(os.linesep) + chunk.find(os.linesep) 
    return line_offset, lines[1]

def get_n_random_lines(path, n=5):
    lenght = os.stat(path).st_size
    results = []
    result_offsets = set()
    with open(path) as input:
        for x in range(n):
            while True:
                offset, line = pick_next_random_line(input, random.randint(0, lenght - CHUNK_SIZE))
                if not offset in result_offsets:
                    result_offsets.add(offset)
                    results.append(line)
                    break
    return results

if __name__ == "__main__":
    print get_n_random_lines(PATH) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T08:23:45.933

如果您需要文件中 N 行的*统一*样本，您需要知道要从中选择的确切*行*数；随机搜索不会这样做，较长的行会使结果偏向于直接跟随最长行的行。

幸运的是，您只需要读取*一次*文件即可选择这 N 行。您基本上选择您的 N 前行（以随机顺序），然​​后根据读取的行数随机用新行替换选择的行，概率递减。

对于 N == 1，第 n 行读取替换前一个随机选择的机会是`randint(0, n) < 1`，因此，第二行有 50% 的机会被选择，第三行有 33.33% 的机会，等等。对于较大的 N，替换一个随着更多行的读取，您的集合中已经选择的行的随机分布相同。

在[Python random lines from subfolders](https://stackoverflow.com/questions/12128948/python-random-lines-from-subfolders)中，Blkknght 编写了一个非常有用的函数，用于从可迭代对象中选择大小为 N 的随机样本：

```
import random

def random_sample(n, items):
    results = []

    for i, v in enumerate(items):
        r = random.randint(0, i)
        if r < n:
            if i < n:
                results.insert(r, v) # add first n items in random order
            else:
                results[r] = v # at a decreasing rate, replace random items

    if len(results) < n:
        raise ValueError("Sample larger than population.")

    return results 
```

与您的要求相结合以保留一组标头是微不足道的：

```
from itertools import islice

with open(options.input) as input:
    with open(options.output, 'w') as output:

        # Handling of header lines
        # Use islice to avoid buffer issues with .readline()
        for line in islice(input, int(options.header)):
            output.write(line)

        # Pick a random sample
        for line in random_sample(int(args[0]), input):
            output.write(line) 
```

这将一次性读取您的整个文件，选择一个*统一*的随机样本，并将其写入输出文件。因此，这具有 Θ(L) 复杂度，其中 L 是文件中的行数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T10:42:35.300

我相信随机选择 N 个行号会更快，然后逐行检查文件一次，然后取出列表中的行号。目前，您必须为每个随机数寻找随机位置，所以它是 O(N*M)，其中 M 是文件的大小。我建议的是O(M)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T10:43:13.240

*   明显的改进是`set()`用于您的`usedPositions`变量 - 查找会更快，并且由于您需要处理多达 10^6 个已使用的位置，因此查找时间并非无关紧要。
*   在 for 循环中使用`xrange`而不是。`range`似乎没有必要分配完整的整数列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T12:29:47.643

未经测试（并且需要两次读取文件）：

```
import random

N = 5000
with open('file.in') as fin:
    line_count = sum(1 for i in fin)
    fin.seek(0)
    to_take = set(random.sample(xrange(line_count), N))
    for lineno, line in enumerate(fin):
        if lineno in to_take:
            pass # use it 
```

但是，由于您提到行的大小“大致”相同，因此您可以使用`os.path.getsize`它并将其除以平均行长度（无论是已知的，还是从文件中的 N 多行中嗅出），然后使用它来生成`line_count`- 它对于*随机*样本来说已经足够接近了。

您也可以`mmap`使用文件大小、平均行长、行数的最佳猜测和随机行号的组合来“搜索”，然后向后或向前搜索到下一行的开头。（因为`mmap`这将使您能够将其视为字符串，因此您可以使用`.index`偏移量或`re`如果您真的想使用）。

# android - 安卓 - 未调用 BroadcastReceiver

> ID：12279021
> 
> 赞同：5
> 
> 时间：2012-09-05T10:06:41.103
> 
> 标签：android, broadcastreceiver

我已经在清单中指定了一个接收器，就像这样..

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.me.MyProject"
          android:versionCode="1"
          android:versionName="1.0">

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.RECEIVE_SMS"/>

<application android:label="@string/app_name"
             android:icon="@drawable/ic_launcher" android:enabled="true">

    <service android:name="MyService" 
             android:exported="true"
             android:process=":different" 
             android:enabled="true">
        <intent-filter>
            <action android:name="com.me.MyService">
            </action>
        </intent-filter>
    </service>

    <receiver android:exported="true" 
              android:name="MySMSBroadcastReceiver" 
              android:enabled="true">
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
        </intent-filter>
    </receiver>
</application> 
```

如果我在 Android Froyo 设备（模拟器或真实设备）上进行测试，这将按我的预期工作。MySMSBroadcastReceiver.onReceive(...) 在设备收到短信时被调用。

但是，如果我将它安装在 4.0 或 4.1 设备（模拟器或真实设备）上，传入消息不会发生任何事情。没有错误，什么都没有。我还将项目的属性更改为专门针对 4.0 或 4.1 设备并重新安装它，但这没有区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T10:12:10.453

安装您的应用程序后，用户需要手动启动您的活动，然后您的任何广播接收器才会生效，**从 Android 3.1 开始**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:32:58.907

您可以在操作系统启动时启动接收器，并提供正确的权限。

# rest - 重定向到 symfony2 中具有相同 url 的不同操作

> ID：12279022
> 
> 赞同：2
> 
> 时间：2012-09-05T10:06:45.690
> 
> 标签：rest, symfony

我想创建具有相同 URL 的 API，`http://stackoverflow.com/profile`但具有不同的请求方法，如`POST`, `PUT`,`GET`等。我想根据方法类型执行不同的操作。一种方法是编写用于比较方法和重定向的通用操作

```
$this->forward('anotherModule','anotherAction'); 
```

有没有其他方法可以检查它的方法并重定向到不同的操作而不使用一个通用操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:12:38.473

在您`routing.yml`可以根据请求方法为同一模式定义不同的控制器

```
read:
    pattern: /yourUrl
    defaults: { _controller: your.controller:readAction }
    requirements:
        _method: GET

write:
    pattern: /yourUrl
    defaults: { _controller: your.controller:writeAction }
    requirements:
        _method: POST 
```

或者，如果您使用注释：

```
/**
 * @Route("/yourRoute", requirements={"_method" = "GET"})
 */
public function showAction($id)
{
    ...
}

/**
 * @Route("/yourRoute", requirements={"_method" = "POST"})
 */
public function writeAction($id)
{
    ...
} 
```

# java - Android/java：同步实例的本地副本

> ID：12279023
> 
> 赞同：0
> 
> 时间：2012-09-05T10:06:45.507
> 
> 标签：java, android, synchronization

> **可能重复：**
> [这种同步的意义何在？](https://stackoverflow.com/questions/1982649/whats-the-point-of-this-synchronization)

我正在使用 BluetoothChat 示例应用程序来建立我的蓝牙连接，并且在第 218 行有一个东西让我非常烦恼：

```
public void write(byte[] out) {
    // Create temporary object
    ConnectedThread r;
    // Synchronize a copy of the ConnectedThread
    synchronized (this) {
        if (mState != STATE_CONNECTED) return;
        r = mConnectedThread;
    }
    // Perform the write unsynchronized
    r.write(out);
} 
```

为什么需要同步`ConnectedThread`实例的本地副本，而不是同步`write`函数来做到这一点（无论是在内部`ConnectedThread`还是上面的方法中）。我想可以同时`write`从不同的线程多次调用，但我总是看到同步的方法，而不是实例的副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:08:48.487

Synchronize不适合`ConnectedThread`用于`mState`读取和更新。

# ruby-on-rails - 无法处理嵌套资源

> ID：12279026
> 
> 赞同：1
> 
> 时间：2012-09-05T10:07:01.420
> 
> 标签：ruby-on-rails, nested-resources, nested-routes

我有这样的问题：我不需要嵌套所有资源，因为我只需要两个动作。

首先 - 显示与 1 个网站相关的所有报告。

第二 - 显示所有报告。

当我像这样重写 routes.rb 中的代码时：

```
resources :websites do
 member do
  match 'performance_reports' => 'performance_reports#index'
  match 'performance_reports/show' => 'performance_reports#show'
 end
end
 //rake routes
    performance_reports_website        /websites/:id/performance_reports(.:format)            
performance_reports#index

  performance_reports_show_website        /websites/:id/performance_reports/show(.:format) 
performance_reports#show 
```

这是我的行动：

```
 before_filter :load_website
  private

 def load_website
   @website = Website.find(params[:website_id])
 end

def index
   @performance_reports = @website.performance_reports
end 
```

视图代码：

```
 <%= link_to "Link",  performance_reports_website_path(website)) %> 
```

**但是当我调用它时，我得到了错误：**

```
 Couldn't find Website without an ID
  rb:7:in `load_website' 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:10:34.570

在控制器中将代码更改为

```
@website = Website.find(params[:id]) 
```

# xml - 使用 htmlText 嵌入 AS3 字体

> ID：12279029
> 
> 赞同：2
> 
> 时间：2012-09-05T10:07:13.667
> 
> 标签：xml, actionscript-3, embed, htmltext, italic

我有一个动态文本字段，它使用从 XML 文件加载的 html 文本：

XML:

```
<someText><![CDATA[I am <i>some</i> text.]]></someText> 
```

如您所见，这使用常规和斜体。我已经将我的字体嵌入到它的所有品种中，每一个字形，但斜体文本没有显示。我的 AS3：

字体变量：`private var regularFont:Font = new myFontRegular();`

myFontRegular 使用嵌入对话框嵌入，但设置为常规，而不是斜体。

文本字段格式：`bodyFormat.font = regularFont.fontName;`

要设置文本字段：

```
bodyField.embedFonts = true;
bodyField.defaultTextFormat = bodyFormat;
bodyField.multiline = true;
bodyField.wordWrap = true;
bodyField.antiAliasType = "advanced";
bodyField.selectable = false; 
```

然后我将文本字段设置为 htmlText 并为其提供内容：

```
bodyField.htmlText = pageBody; 
```

pageBody 是一个从 XML 提供的 var。

好的，这样就设置好了，但斜体文本没有显示，我猜这是因为嵌入的字体设置为常规字体，而不是斜体。那么，例如，如何在句子中使用斜体？我已经用谷歌搜索并尝试了各种方法将字体直接嵌入代码中，同样的问题。

这对我来说以前很好用，我不明白这有什么问题。如果我需要发布更多内容，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:48:21.797

it is better to use proper setup of the embedded font, you should use the *familyName* to give a name of the font famiy set (it will be the same for italic, bold and normal) like below:

```
 [Embed(source="asset/arial.ttf",
        fontFamily = "Arial",
        unicodeRange = "U+0009,    U+00A9,U+00AE,U+00B0,U+00B7,U+00A3,U+00A7,    U+0021-U+002F,    U+003A-U+0040,     U+005B-U+0060,      U+007B-U+007D,       U+00A0,      U+00B4,       U+0030-U+0039,      U+0041-U+005A,      U+0061-U+007A,     U+00B4,U+2032,U+2033,U+2019,U+2013, U+00E9,U+00C9, U+2022, U+2026",
        mimeType="application/x-font-truetype",
        embedAsCFF="false"
        )]
    private var arialImported:Class;
    [Embed(source="asset/arialbd.ttf",
        fontFamily = "Arial",
        fontWeight = "bold",
        unicodeRange = "U+0009,    U+00A9,U+00AE,U+00B0,U+00B7,U+00A3,U+00A7,    U+0021-U+002F,    U+003A-U+0040,     U+005B-U+0060,      U+007B-U+007D,       U+00A0,      U+00B4,       U+0030-U+0039,      U+0041-U+005A,      U+0061-U+007A,     U+00B4,U+2032,U+2033,U+2019,U+2013, U+00E9,U+00C9, U+2022",
        mimeType="application/x-font-truetype",
        embedAsCFF="false"
        )]
    private var arialBoldImported:Class 
```

then it should work e.g. `bodyFormat.font = "myFontFamilyName";`, but I feel that also you need to have stylesheet object applied and wrap everything (content) with P tag

```
var m_oStylesheet = new StyleSheet();
m_oStylesheet.parseCSS("P{font-family:myFontFamilyName; }");
bodyField.styleSheet = m_oStylesheet; 
```

You may also look at this [entry about StyleSheet](http://greladesign.com/blog/tag/stylesheet/)

best regards

# jquery-ui - 如何暂停/恢复 JQueryUI 效果

> ID：12279031
> 
> 赞同：0
> 
> 时间：2012-09-05T10:07:17.980
> 
> 标签：jquery-ui

我有一个运行的效果：

```
$(this).effect("highlight", { color: "#669966" }, 5000, revert); 
```

我希望在下面的悬停事件中暂停并恢复此效果，但似乎无法做到这一点：

```
$(this).parent().hover(
    function() {
        if($('.submenu', this).length > 0) {
            $('.submenu', this).css('display', 'inline-block');
        }
        //pause timer

    },
    function() {
        if($('.submenu', this).length > 0) {
            $('.submenu', this).css('display', 'none');
        }
        //resume timer    

    }
); 
```

有人可以告诉我如何暂停这个 JQueryUI 事件。

谢谢德文

# forms - Symfony 升级 2.1 FOSUserBundle 自定义注册表异常

> ID：12279032
> 
> 赞同：2
> 
> 时间：2012-09-05T10:07:25.783
> 
> 标签：forms, symfony, yaml, fosuserbundle

我的自定义注册表单在 1.2.* 版本中运行良好，但是当我在 2.1 中更新 symfony 和在 2.0.* 中更新 FOSUserBundle 时，我遇到了这个我不知道如何解决的问题。

错误 ：

> 为服务“kairos_user.registration_form_type”指定的类型名称与实际名称不匹配。预期为“kairos_user_registration”，给定“fos_user_registration”

我的服务定义：

```
services:
    kairos_user.registration_form_type:
        class: Kairos\UserBundle\Form\Type\RegistrationFormType
        arguments: [%fos_user.model.user.class%]
        tags:
            - { name: form.type, alias: kairos_user_registration } 
```

还有我的 config.yml

```
fos_user:
    db_driver: orm #cf kairos doctrine admin
    firewall_name: main
    user_class: Kairos\UserBundle\Entity\User
    registration:
        form:
            type: kairos_user_registration 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:31:42.037

您的注册表单服务的别名必须与您的注册表单类型类返回的名称相匹配。`Kairos\UserBundle\Form\Type\RegistrationFormType`尝试更改getName **()**方法的返回值

```
class RegistrationFormType extends AbstractType
{
    // ...
    public function getName()
    {
        return 'kairos_user_registration';
    }
} 
```

# javascript - 如何 grep 包含在 JavaScript 或 jQuery 中的 JSON 数组

> ID：12279037
> 
> 赞同：4
> 
> 时间：2012-09-05T10:07:35.413
> 
> 标签：javascript, jquery, json

考虑：

```
 var dummyArray =  [{
        "fname": "gali",
        "lname": "doe"
    }, {
        "fname": "john",
        "lname": "danny"
    }, {
        "fname": "joe",
        "lname": "dawns"
    }, {
        "fname": "liji",
        "lname": "hawk"
    }]

dummyArray = j$.grep(dummyArray, function(dt) {
             return (dt.fname== 'j');
}); 
```

如何使用[grep](https://api.jquery.com/jQuery.grep/)函数查询包含字母“j”的“fname”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T11:17:19.240

使用 ECMAScript 5 标准函数[`Array.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)仅返回与谓词匹配的元素：

以“j”开头

```
var j = dummyArray.filter(function(o) {
    return o.fname.charAt(0) === 'j';
}); 
```

或者，包含“j”

```
var j = dummyArray.filter(function(o) {
    return o.fname.indexOf('j') >= 0;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T10:09:59.330

您可以使用[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)：

```
dummyArray = $.grep(dummyArray, function(dt) {
    return dt.fname.indexOf("j") != -1;
}); 
```

**演示：http:** [//jsfiddle.net/Nhmwk/](http://jsfiddle.net/Nhmwk/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:16:48.413

您可以使用 vanilla JavaScript 执行此操作，如下所示：

```
dummyArray = (function(){
  var result = [];
  for (var i=0, l=dummyArray.length; i<l; i++)
    if (/j/.test(dummyArray[i].fname))
      result.push(dummyArray[i]);
  return result;
}()); 
```

您可以通过更改正则表达式轻松测试内容。例如，您可以测试以**开头**而`j`不是**包含**with的名称`/^j/`。

**演示：http:** [//jsfiddle.net/elclanrs/2Bw2y/](http://jsfiddle.net/elclanrs/2Bw2y/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:12:59.307

您可以使用函数*索引*：

```
dummyArray = $.grep(dummyArray, function(dt) {
    return dt.fname.indexOf("j") != -1;
});

// To be case-insensitive, use:
dummyArray = $.grep(dummyArray, function(dt) {
    return dt.fname.toLowerCase().indexOf("j") != -1;
}); 
```

小提琴：http: [//jsfiddle.net/kYXPa/](http://jsfiddle.net/kYXPa/)

# java - 是否可以在外部 JAR 中的方法上使用“抛出”

> ID：12279039
> 
> 赞同：5
> 
> 时间：2012-09-05T10:07:44.667
> 
> 标签：java, exception, jar

我有一个单独的 JAR 库，其中包含一组引发自定义异常的方法，例如：

```
public String methodName() throws CustomException {
    // code here
} 
```

然后，我将 JAR 添加到类路径并在源代码的 try 语句中引用库方法：

```
try {
    DemoClass demoClass = new DemoClass ();
    demoClass.methodName() // this should throw a CustomException if something occurs
} catch (CustomException e) {
    // something here
} 
```

上面的代码片段不断返回以下编译错误：

> CustomException 永远不会在相应的 try 语句的主体中抛出

如果该方法在本地上下文中（未打包在 JAR 中），则代码可以工作。所以我的问题是，是否可以从 JAR 库中“抛出”自定义异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:14:42.777

您应该避免使用“类”，因为它是保留关键字。

```
try {
    MyClass myClass = new MyClass();
    myClass.methodName() // this should throw a CustomException if something occurs
} catch (CustomException e) {
    // something here
} 
```

此外，请确保您从同一个 jar 中导入“MyClass”和“CustomException”，并且您的代码片段和“MyClass”从同一个包中导入“CustomException”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:14:22.810

你的类是在 jar 中还是在本地上下文中并不重要，它总是可以抛出异常。您应该检查您是否正在使用该类并调用您打算使用的方法，而不是其他类和其他具有相同名称的方法。

我的预感是`ParseException`两者都`java.text.ParseException`存在`org.apache.commons.cli.ParseException`，当`demoClass.methodName()`实际抛出前者时，你会在你的代码中导入后者并试图捕捉它，这就是编译器所抱怨的。您可能想要检查存在 CustomException 的所有位置，并且您正试图抓住正确的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:59:12.993

问题是这`CustomException`是一个已检查的异常，但编译器看到的版本`DemoClass.methodName()`未**声明**为抛出该异常。然后编译器推断，由于方法的签名不允许抛出异常，所以它**不能**被抛出。

如果您希望能够在那里捕获该检查的异常，那么异常（或超类）必须包含在`throws`您编译的类的方法声明的子句中。

* * *

> MyClass 和 customException 不是从同一个 JAR 导入的，这是问题吗？

不是*本身*。

但是，我怀疑您实际上在两个 JAR 中有两个不同（不兼容）版本的相关类或接口。那将是一个错误。即使您设法编译它，由于签名冲突，您很可能会遇到类加载器问题。

# flash - 在移动端的 Flash/AIR 游戏上获得高 FPS？

> ID：12279040
> 
> 赞同：1
> 
> 时间：2012-09-05T10:07:46.893
> 
> 标签：flash, mobile, air, game-development

我正在开发一款游戏，旨在作为“原生”应用程序和桌面网络浏览器部署在手机上。

由于在多个平台上工作，Flash 及其嵌入式 AIR 似乎是一个不错的解决方案。但是哦。

现在仅使用 4 关键帧动画剪辑（将它们添加到舞台，更新它们在每一帧上的位置，并最终删除它们）会使游戏在桌面屏幕上显示大约 30 个时变慢，在我的 Android 上显示大约 20 个时（三星 i9000 - 2.3.3)。我可能需要更多。

因此，我尝试通过重绘位图区域并将我的 MovieClips 转换为存储在我的 Flash 库中的 bitmapDatas spritesheets 来进行闪烁。桌面上的结果很棒，具有完美、流畅的动画，即使有数百个对象。但是在移动设备上的结果很糟糕，即使在屏幕上仅显示一个对象，CPU 或 GPU 渲染时，FPS 也会下降到 15。

因为我的游戏在“旧”设备上运行显然很好，如果我想达到接近或高于 50 的帧速率，此时使用 Flash 和 AIR 是一个坏主意吗？

用flash开发手游时，有什么技巧，或者必不可少的做法吗？在这种情况下，我们必须避免任何常见的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-15T00:58:22.603

实际上，您可以在 Adob​​e Air 中通过非常复杂的 Flash 矢量动画获得 30fps 到 50fps。

不该做什么：

1.  不要将预制的“缓存为位图”复选框用于任何动画。当应用于静态矢量图像时，这是一个很棒的功能，因为它将其转换为静态位图。如果动画以除了在 x 或 y 轴上平移影片剪辑之外的任何方式进行动画处理，则您的动画实际上会更慢，并且缓存为打开的位图。

2.  不要做blitting。Blitting 可以使游戏在 Flash 中快速运行，但在 Adob​​e air 中它会使它们变慢。您想要的是放置在舞台上的位图对象，而不是被传送到舞台上的 bitmapData 对象。

因此，您可以做的是抓取一个 swf 或 Movieclip，运行对象的每一帧并将每一帧转换为位图。然后，将每个位图保存到一个数组中。然后，要播放动画，从数组中检索位图并将它们按顺序放置在舞台上。在我的测试中，我能够在 Android 平板电脑上以超过 40fps 的速度运行全屏、24 帧动画。

代码示例如下。它会慢慢缓存位图，完成，然后立即开始以更高的速率播放。如果需要，您可以在动画缓存时隐藏动画。当您不再需要动画时，清除数组以释放内存。

```
package scripts.animation{
    import flash.display.MovieClip;
    import flash.events.*;
    import flash.display.Stage;
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.*;
    import flash.events.Event;

    public class spriteSheetMaker extends MovieClip {
        private var pWidth:int=0;
        private var pHeight:int=0;
        private var regX:int=0;
        private var regY:int=0;
        private var swfObj:MovieClip = null;
        private var pFrame:int=0;
        private var pFrames:int=0;
        private var pSheetArray:Array=[];
        private var pSheetInfo:Array=[];
        private var pAnimating:Boolean = false;
        private var pAnimationCycle:int = 0;
        //-------------------------------------------------------
        //-------------------------------------------------------
        //init
        //-------------------------------------------------------
        //-------------------------------------------------------
        public function spriteSheetMaker ():void {
            startGrab();
        }
        //-------------------------------------------------------
        //-------------------------------------------------------
        //swf is loaded, find out how many frames are in, dimentions etc, and start animation
        //-------------------------------------------------------
        //-------------------------------------------------------
        public function startGrab ():void {
            swfObj=this.animation;
            swfObj.x = 0;
            //swfObj.y = 0;
            pFrames=swfObj.totalFrames;
            pFrame=0;
            pSheetInfo=[this.name,pWidth,pHeight];
            pSheetArray.push (pSheetInfo);
            pAnimating = false;
            this.addEventListener (Event.ENTER_FRAME,cycleSwfAnim);
        }
        //-------------------------------------------------------
        //-------------------------------------------------------
        //load the next frame of the animation and convert it
        //-------------------------------------------------------
        //-------------------------------------------------------
        private function cycleSwfAnim (event:Event):void {
            pFrame++;
            if (pFrame < pFrames + 2) {
                swfObj.gotoAndStop (pFrame);
                grabBitmap ();
            } else {
                stopGrab ();
            }
        }
        //
        private function stopGrab():void{
            this.removeEventListener (Event.ENTER_FRAME,cycleSwfAnim);
            trace("Sheet = " + pSheetArray);
            swfObj.parent.removeChild(swfObj);
            swfObj=null;
            startAnimationPlayback();
        }
        //-------------------------------------------------------
        //-------------------------------------------------------
        //Convert fram (vector, bitmap, whatever is on the frame) into a bitmadata object
        //-------------------------------------------------------
        //-------------------------------------------------------
        private function grabBitmap ():void {
            pWidth=this.width;
            pHeight=this.height;
            var bmd:BitmapData=new BitmapData(pWidth,pHeight,true,0x00FFFFFF);
            bmd.draw (swfObj);
            var bm:Bitmap = new Bitmap();
            bm.bitmapData = bmd;
            pSheetArray.push (bm);
        }
        //-------------------------------------------------------
        //-------------------------------------------------------
        //Play animation
        //-------------------------------------------------------
        //-------------------------------------------------------
        private function startAnimationPlayback():void{
            this.addEventListener (Event.ENTER_FRAME,animate);
            pFrame =0;
        }
        //
        private function animate(event:Event):void{
            pFrame++;
            if (pFrame>pSheetArray.length){
                pFrame = 1;
            }
            var bm:Bitmap = pSheetArray[pFrame];
            if (bm != null){
                if (this.numChildren>0){
                    this.removeChildAt(0);
                }
                this.addChild(bm);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:49:35.930

结合 GPU 渲染，您可以使用 cacheAsBitmap 和 cacheAsBitmapMatrix 获得一些改进，但对于任何远程复杂的东西，很可能仍然无法让您接近 60fps。

如果您想在移动设备上获得真正的性能，您可能需要查看 Starling 框架 (http://gamua.com/starling/)。它完全将合成和渲染转移到 GPU，同时保持对象模型和显示列表非常接近标准 Flash 等效项。即使在一代或两代旧硬件上，性能也非常快（很容易达到 60fps）。

# jquery - jQuery Tabletools 没有按预期工作

> ID：12279041
> 
> 赞同：0
> 
> 时间：2012-09-05T10:07:50.730
> 
> 标签：jquery, jquery-ui, datatables, html-table, tabletools

我正在使用 jQuery DataTables 库为运行 Joomla 2.5 的网站上的表格设置样式。 [http://datatables.net/](http://datatables.net/)

我遇到的问题是它不工作，但它也没有在萤火虫中给出任何类型的错误，所以我没有跟踪或任何东西。

我的表格的 HTML / PHP 是这样的：

```
<table class="staff_table">
<h3>Members of Staff</h3>
<p>If you're looking for a member of staff at Tower Road Academy, you'll find their details here.</p>
<tr class="staff_table_head">
<td>Name</td>
<td>Job Title</td>
<td>Email Address</td>
</tr>

<?php
$result = mysql_query("SELECT * FROM itsnb_chronoforms_data_addstaffmember");

while($row = mysql_fetch_array($result))
  {
    echo '<tr>';  
    echo '<td>' . $row['staff_name'] . '</td><td>' . $row['staff_job'] . '</td><td><a     href=mailto:"' . $row['staff_email'] . '">' . $row['staff_email'] . '</a>' . '</td>';
echo '</tr>';
}
?>
</table> 
```

我正在加载 jQuery 和 DataTables 库并在模板文件的 index.php 中像这样初始化它：

```
<script src="./datatables/js/jquery.js" type="text/javascript"></script>
    <script src="./datatables/js/jquery.dataTables.js" type="text/javascript">    </script>

            <script type="text/javascript">             
$(document).ready(function() {
$('#staff_table').dataTable();
} );

 </script> 
```

上面应该给我一些类似于以下内容的东西： ![示例 DataTables 样式表](../Images/eb60343c3f42047b2f4d503d20641216.png)

jQuery 确实可以正常工作，就好像我使用以下内容一样，它会按预期弹出一个框：

```
$(document).ready(function() {
   alert('hi');
}); 
```

我什至尝试过 jQuery No Conflict，`jQuery.noConflict();`在调用函数之前添加，但仍然没有，没有错误，没有工作。

* * *

## 编辑

如果我更改为以下内容，则会收到以下错误：

```
<script src="./datatables/js/jquery.js" type="text/javascript"></script>
    <script src="./datatables/js/jquery.dataTables.js"     type="text/javascript">    </script>

            <script type="text/javascript"> 
jQuery.noConflict();                
jQuery(document).ready(function() {
jQuery('.staff_table').dataTable();
} );

 </script> 
```

这是我在 Firebug 中遇到的错误：

```
TypeError: oColumn is undefined
initialize(b=Object { tweakInitial={...}, tweakSubsequent={...}, tweakSizes={...},     more...}, a=Object { options={...}, element=ul.menutop, rtl=false, more...}, c=span#span-    1346841479204301.daddy)fusion.js (line 8)
initialize()mootools-more.js (line 27)
b()mootools-core.js (line 140)
g()mootools-core.js (line 135)
initialize(o=span#span-1346841479204301.daddy, m=1)fusion.js (line 8)
forEach(i=function(), v=Object { options={...}, element=ul.menutop, rtl=false,     more...})mootools-core.js (line 39)
initialize(f="ul.menutop", k=Object { pill=0, effect="slide and fade", opacity=1,     more...})fusion.js (line 8)
initialize()mootools-more.js (line 27)
b()mootools-core.js (line 140)
g()mootools-core.js (line 135)
(?)()school-staff (line 77)
fireEvent(f=function())mootools-core.js (line 370)
forEach(i=function(), v=Window school-staff)mootools-core.js (line 39)
fireEvent(e="domready", c=[], b=undefined)mootools-core.js (line 370)
g()mootools-core.js (line 507)
[Break On This Error]   

...start({"margin-top":this.height,opacity:0}).chain(function(){if(this.childMenu.f...

fusion.js (line 8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:48:29.333

数据表需要一个`<thead>`和`<tbody>`标签才能正常运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:42:45.817

表格的 html 开头如下：

```
<table class="staff_table">
<h3>Members of Staff</h3>
<p>If you're looking for a member of staff at Tower Road Academy, you'll find their details here.</p>
<tr class="staff_table_head"> 
```

h3 和 p 标记在表中是不合法的。尝试将它们移出表格，例如：

```
<h3>Members of Staff</h3>
<p>If you're looking for a member of staff at Tower Road Academy, you'll find their details here.</p>
<table class="staff_table">
<tr class="staff_table_head"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T12:21:57.717

关于`onColumn`错误，请尝试使用参数调用您的数据表（根据您从`SQL`查询中返回的列）：

```
$('#staff_table').dataTable({ "aoColumns": [{ "mDataProp": "columnname1"},{ "mDataProp": "columnname2"},...]
}); 
```

# iphone - 如何在缩放时保持图像的文本清晰度？

> ID：12279044
> 
> 赞同：0
> 
> 时间：2012-09-05T10:08:03.057
> 
> 标签：iphone, image, zooming, image-editing

我正在为杂志开发应用程序，同时我正在使用 photo shop 为这些杂志创建图像。

但是，当我放大这些图像时，文本质量会变得松散。我参考了其他 iPad 杂志，例如《今日印度》。在那方面，即使我放大到最大程度，文本质量也太好了。

这怎么可能？我的每个图像大小几乎是 800 KB。即使那样，当我放大时，我也会失去图像的清晰度。即使在缩放时如何保持文本质量？

这与 Photoshop 编辑或编码有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:00:54.840

当 OS 目标为 3.2 或更高版本时，我们将下表用于我们的 iPhone/iPad 项目。

![在此处输入图像描述](../Images/213acdf51fe279575710a763a222e5c8.png) ![在此处输入图像描述](../Images/1c6a6dd7019d5a083f9d63d15588913e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:36:59.523

因为您使用的是光栅图形，所以您正处于文件大小与缩放质量的失败之战中。文本本身就是矢量，并且在缩放时可以很好地缩放，因此最好将文本渲染为文本，而不是在 Photoshop 中将文本生成为图像。有很多方法可以做到这一点，一种是将图像作为背景层，将文本作为图像上方的 UILabel。

# javascript - 计算网页上的滚动结束

> ID：12279045
> 
> 赞同：6
> 
> 时间：2012-09-05T10:08:12.480
> 
> 标签：javascript, jquery, html

我需要计算网页滚动的结束，以便我可以进行 Ajax 调用。我在 stackoverflow 中搜索过帖子，但解决方案对我不起作用。

我正在使用以下代码离子顺序来确定：

```
$(window).scrollTop() == $(document).height() - $(window).height() 
```

但上述条件失败，无法知道页面滚动何时结束。

由于 LHS 和 RHS 上的值不匹配，因此条件失败。只是为了检查我使用过：

```
$(window).scrollTop() == $(document).height() - $(window).height() - 13 
```

它适用于 chrome 和 firefox，但不适用于 IE。我需要一个具体的解决方案，不想硬编码值。请帮助我做对。

编辑：具体来说，我正在尝试计算垂直滚动条的结尾。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:17:45.257

这是我要做的：

```
$(window).on('scroll', function() {
if($(window).scrollTop() != 0)
{    
    if( $(window).height() + $(window).scrollTop() >= $(document).height() )
    {
    //YES, I AM EXACTLY AT THE END OF THE SCROLL, PLZ FIRE AJAX NOW
    }
}
}); 
```

**注意**：请注意页面上任何元素的样式的上边距为负数！！它可能会抵消计算！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:15:12.320

要计算滚动结束，请尝试[scrollHeight 属性](http://help.dottoro.com/ljbixkkn.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:15:28.060

这应该为您检索页面高度（不是使用 jQuery，而是使用 javascript）：

```
var height = document.body.clientHeight; 
```

您会发现这是解决您的问题的最佳跨浏览器解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:28:07.353

这是你如何做到的。您获取滚动距离并添加窗口高度，然后检查它们是否等于文档高度：

```
$(window).on('scroll', function() {
    if (($(this).scrollTop() + $(this).height()) - $(document).outerHeight(true) >= 0) {
        alert('Scrolled to bottom');
    }
}); 
```

[**小提琴**](http://jsfiddle.net/USfP6/2/)

这在所有五个浏览器中都适用于我！

# c# - C#：在调试模式下运行应用程序

> ID：12279047
> 
> 赞同：1
> 
> 时间：2012-09-05T10:08:17.910
> 
> 标签：c#, debugging, parameters

我有一个 WinForms 应用程序。我有时不想使用参数运行应用程序，如下所示：

```
myapp.exe -d 
```

它告诉应用程序执行一些不寻常的操作，例如写入日志或显示一些附加信息。

最好的方法是什么？

我首先想到的是添加主函数 args 读取，并在传递参数时创建一些标志，然后使用它来执行一些附加操作。

但也许有更美丽和正确的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:16:30.780

命令行参数是执行此操作的好方法。您需要从参数处理它们到 Main，可能设置一些全局（只读）状态，以后处理可以检查。

（为了避免全局变量——例如单元测试——你可以使用依赖注入到依赖于命令行的应用程序部分，以使模拟更容易。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:10:47.010

如果这是一个很少使用的功能，请考虑使用：

```
Trace.WriteLine(""); 
```

然后在需要时使用 DebugView 之类的东西...

[http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:13:04.557

实际上，最好的方法是使用 args。拥有 args 的唯一目的就是这个。您选择的方式是最好的方式。

# c# - AjaxToolkit 选项卡控件作为按钮

> ID：12279053
> 
> 赞同：0
> 
> 时间：2012-09-05T10:08:28.663
> 
> 标签：c#, asp.net

我目前正在构建一个带有多个选项卡面板的选项卡控件，并且希望将其中一个选项卡作为按钮而不是带有内容的模板。这个想法是，当用户单击带有按钮的选项卡时，将触发一个事件并运行一个 C# 方法，然后页面将回发。

我该怎么做呢？最好这可能是在后面的代码中生成的东西，因为所有其他选项卡都是与内容一起以编程方式生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:38:10.467

您可以处理 TabContainer 的`ActiveTabChanged`事件。因此，您需要将`AutoPostBack`TabContainer 设置为 true。

```
<asp:TabContainer ID="TabContainer1" runat="server" AutoPostBack="true" OnActiveTabChanged="ActiveTabChanged"> 
```

代码隐藏：

```
protected void ActiveTabChanged(object sender, EventArgs e)
{
    if (TabContainer1.ActiveTabIndex == 0)
    {
        // ...
    }
    // ...
} 
```

# ruby-on-rails - Rails：允许下载存储在 S3 上的文件而不向用户显示实际的 S3 URL

> ID：12279056
> 
> 赞同：29
> 
> 时间：2012-09-05T10:08:39.593
> 
> 标签：ruby-on-rails, download, amazon-s3

我有一个托管在 Heroku 上的 Rails 应用程序。该应用程序在 Amazon S3 上生成和存储 PDF 文件。用户可以下载这些文件以在浏览器中查看或保存在计算机上。

我遇到的问题是，虽然可以通过 S3 URL（如“https://s3.amazonaws.com/my-bucket/F4D8CESSDF.pdf”）下载这些文件，但这显然不是一个好方法它。向用户公开这么多有关后端的信息是不可取的，更不用说随之而来的安全问题了。

是否可以让我的应用程序以某种方式从控制器中的 S3 检索文件数据，然后为用户创建下载流，以便不暴露亚马逊 URL？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-05T13:34:23.663

您可以将 s3 对象创建为私有对象，并使用[url_for](http://amazon.rubyforge.org/doc/classes/AWS/S3/S3Object.html#M000045)方法 (aws-s3 gem) 为它们生成临时公共 url。这样，您就不会通过更具可扩展性的应用服务器流式传输文件。它还允许放置基于会话的授权（例如在您的应用中设计）、跟踪下载事件等。

为此，请将指向 s3 托管文件的直接链接更改为指向控制器/操作的链接，从而创建临时 url 并重定向到它。像这样：

```
class HostedFilesController < ApplicationController

  def show
    s3_name = params[:id] # sanitize name here, restrict access to only some paths, etc
    AWS::S3::Base.establish_connection!( ... )
    url = AWS::S3::S3Object.url_for(s3_name, YOUR_BUCKET, :expires_in => 2.minutes)
    redirect_to url
  end

end 
```

在下载 url 中隐藏亚马逊域通常是通过 DNS 别名来完成的。您需要[创建别名为您的子域的 CNAME 记录](http://docs.amazonwebservices.com/AmazonS3/latest/dev/VirtualHosting.html#VirtualHostingCustomURLs)`downloads.mydomain`，例如`s3.amazonaws.com`. 然后您可以在其中指定`:server`选项`AWS::S3::Base.establish_connection!(:server => "downloads.mydomain", ...)`，S3 gem 将使用它来生成链接。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-05T12:39:05.780

是的，这是可能的——只需使用 Rails 获取远程文件并将其临时存储在您的服务器上或直接从缓冲区发送。这样做的问题当然是您需要先获取文件，然后才能将其提供给用户。请参阅[此线程](http://www.ruby-forum.com/topic/98626)进行讨论，他们的解决方案是这样的：

```
#environment.rb
require 'open-uri'

#controller
def index
  data = open(params[:file])
  send_data data, :filename => params[:name], ...
end 
```

[这个问题也有些相关](https://stackoverflow.com/questions/3722169/ruby-rails-serve-ftp-file-direct-to-client)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-01T17:54:38.193

首先，您需要在您的域中创建一个 CNAME，如[在此处](http://docs.aws.amazon.com/AmazonS3/latest/dev/VirtualHosting.html#VirtualHostingCustomURLs)解释。

其次，您需要创建一个与您放入 CNAME 的名称相同的存储桶。

最后，您需要在 config/initializers/carrierwave.rb 中添加此配置：

```
CarrierWave.configure do |config|
    ...  
    config.asset_host         = 'http://bucket_name.your_domain.com'
    config.fog_directory      = 'bucket_name.your_domain.com'
    ...
end 
```

# c - C中的“short int”和“int”有什么区别？

> ID：12279060
> 
> 赞同：26
> 
> 时间：2012-09-05T10:08:47.677
> 
> 标签：c, types

C 中的 short int（或 short）和 int 有何不同？它们具有相同的大小和范围。如果它们本质上是相同的，那么拥有两种数据类型有什么用？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-05T10:10:11.583

它们**可能**具有相同的大小，但可以保证`int`等于或大于`short int`。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-09-05T11:17:51.060

理论上/按照 C 标准，它们可以是任何大小，只要`16 bit <= short <= int`.

在现实世界中，这就是尺寸的实现方式。

```
CPU             short   int
8 bit           16      16
16 bit          16      16
32 bit          16      32
64 bit          16      32 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T10:15:38.127

永远不要依赖 C 中给定大小的数据类型。如果有疑问，请始终检查 limits.h 中的边界。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-09T19:47:54.183

**[C99 N1256标准草案](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)**

我们现在可以肯定的是：

```
2 <= sizeof(short) <= sizeof(int) 
```

*5.2.4.2.1 整数类型`<limits.h>`*的大小给出了最小大小：

> 1 [...] 它们的实现定义值的大小（绝对值）应等于或大于所示的 [...]
> 
> *   UCHAR_MAX 255 // 2 8 - 1
> *   USHRT_MAX 65535 // 2 16 - 1
> *   UINT_MAX 65535 // 2 16 - 1
> *   ULONG_MAX 4294967295 // 2 32 - 1
> *   ULLONG_MAX 18446744073709551615 // 2 64 - 1

*6.2.5 类型*然后说：

> 8 对于任何两个具有相同符号和不同整数转换等级的整数类型（见 6.3.1.1），具有较小整数转换等级的类型的值范围是另一个类型的值的子范围。

和*6.3.1.1 布尔值、字符和整数*确定相对转换等级：

> 1 每个整数类型都有一个整数转换等级，定义如下：
> 
> *   long long int 的rank 大于long int 的rank，long int 的rank 大于int 的rank，short int 的rank 大于signed char 的rank。
> *   任何无符号整数类型的等级应等于相应的有符号整数类型的等级，如果有的话。
> *   对于所有整数类型 T1、T2 和 T3，如果 T1 的秩大于 T2 且 T2 的秩大于 T3，则 T1 的秩大于 T3

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T10:11:53.117

这取决于系统。某些操作系统的两种类型的长度不同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-05T10:35:17.153

实际上一切都取决于编译器和系统。但基本规则是 int 永远不能小于 short，也永远不能大于 long。

短 <= 整数 <= 长

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-28T04:08:49.957

我今天也在做同样的事情。我的结论是它取决于执行程序的机器架构的字长。根据 C99 limits.h 文档。

```
/* Minimum and maximum values a `signed short int' can hold.  */
#  define SHRT_MIN  (-32768)
#  define SHRT_MAX  32767

/* Maximum value an `unsigned short int' can hold.  (Minimum is 0.)  */
#  define USHRT_MAX 65535

/* Minimum and maximum values a `signed int' can hold.  */
#  define INT_MIN   (-INT_MAX - 1)
#  define INT_MAX   2147483647

/* Maximum value an `unsigned int' can hold.  (Minimum is 0.)  */
#  define UINT_MAX  4294967295U

/* Minimum and maximum values a `signed long int' can hold.  */
#  if __WORDSIZE == 64
#   define LONG_MAX 9223372036854775807L
#  else
#   define LONG_MAX 2147483647L
#  endif
#  define LONG_MIN  (-LONG_MAX - 1L)

/* Maximum value an `unsigned long int' can hold.  (Minimum is 0.)  */
#  if __WORDSIZE == 64
#   define ULONG_MAX    18446744073709551615UL
#  else
#   define ULONG_MAX    4294967295UL
#  endif 
```

让我知道是否有人有更好的答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-05T10:11:23.223

> “一种编程语言中的短整数可能在不同的语言或不同的处理器上具有不同的大小。在某些语言中，这个大小是跨平台固定的，而在其他语言中，它取决于机器。在某些语言中，这种数据类型不存在完全没有。”

[来源](http://en.wikipedia.org/wiki/Integer_%28computer_science%29#Short_integer)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-27T10:12:56.480

short 和 int 必须至少为 16 位，long 必须至少为 32 位，并且该 short 不长于 int，即不长于 long。通常，short 是 16 位，long 是 32 位，int 是 16 位或 32 位。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-30T18:29:34.037

这取决于编译器。在某些编译器中，int 是 2 个字节，而在其他编译器中是 4 个字节。

# delphi - 如何从另一个 Delphi 应用程序触发 Delphi 应用程序中的事件？

> ID：12279063
> 
> 赞同：4
> 
> 时间：2012-09-05T10:08:55.023
> 
> 标签：delphi, service, ipc

请在标记为*重复*之前阅读。

我正在创建一组依赖智能卡进行身份验证的应用程序。到目前为止，每个应用程序都单独控制了智能卡读卡器。几周后，我的一些客户将同时使用多个应用程序。因此，我认为创建一个控制身份验证过程的服务应用程序可能会更实用。我希望我的桌面应用程序告诉服务应用程序他们对身份验证过程感兴趣，然后服务应用程序将为他们提供有关当前用户的信息。这部分很简单，使用`named pipes`. 困难的部分是，服务如何告诉桌面应用程序发生了事件（`UserLogIn`, `UserLogOut`, `PermissionsChanged`, ... 仅举几例）。到目前为止，我有两种方法。`CallBack`功能，和`Messages`. 有没有人有更好的主意？我确定有人有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T10:52:04.430

你想用 Delphi 做 IPC（进程间通信）。

有许多链接可以帮助您，[Cromis IPC](http://www.cromis.net/blog/downloads/cromis-ipc/)只是一个让您了解您所追求的东西的链接。

与您类似的 SO 问题在[这里](https://stackoverflow.com/questions/1260181/delphi-2009-how-to-communicate-between-windows-service-desktop-application-un)。

如果你想去纯 Windows API，那么看看[OutputDebugString 通信是如何实现的](https://stackoverflow.com/questions/11218434/how-to-view-output-of-outputdebugstring)。
一些工具可以监听该机制，并且许多应用程序可以向它发送信息。

搜索[DBWIN_DATA_READY](https://www.google.com/search?q=DBWIN_DATA_READY)和[DbWin32](https://www.google.com/search?q=DbWin32)以获取有关[OutputDebugString](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362)协议如何工作的更多信息。

[这](http://www.drdobbs.com/a-dbwin32-debugger-for-windows/184403245)和[这](http://www.unixwiz.net/techtips/outputdebugstring.html)都是很好的阅读。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T11:40:21.873

当它进入 IPC 时，一些提示：

*   不要拘泥于一种协议：例如，如果您实现了*命名管道*通信，您以后可能需要通过网络甚至 HTTP 运行它；
*   不要重新发明轮子，也不要使用专有消息，而是使用标准格式（如 XML / JSON / BSON）；
*   *回调事件*有点难以实现，因为常见的模式可能是为每个桌面客户端实现一个*服务器*，以接收来自服务器的通知。

我的建议是不要使用*回调*，而是在桌面应用程序上*轮询*无*状态架构。*您打开与服务器的通信通道，然后每隔一秒/半秒（`TTimer`在您的 UI 中使用 a），您发出一个小请求，询问发生了什么变化（您可以输入修订号或上次检索的时间戳）。因此，您将桌面数据与未决事件同步。在现有连接上请求更新非常快，如果没有任何变化，只会在网络上来回发送一个 IP 数据包。这是一项非常小的任务，不会减慢客户端和服务器的速度（如果您使用一些内存缓存）。

在实际应用中，从最终用户的角度来看，这种*无状态*架构响应速度非常快，并且更易于部署。您不需要在每个桌面应用程序上创建服务器，因此您不必打开防火墙端口等。由于 HTTP 是无状态的，因此它甚至对 Internet 友好。

如果你想开发服务，你可以使用*DataSnap*，比如[RemObjects](http://www.remobjects.com/ro/)或者你可以试试我们的[开源 mORmot 框架](http://mormot.net)，它能够创建[基于接口的服务](http://blog.synopse.info/post/2012/03/07/Interface-based-services-sample-code)，通过 REST 使用轻 JSON 消息，或者在进程中，使用 GDI 消息，命名为管道或 TCP/HTTP - 免费，具有无与伦比的性能，内置安全性，从 Delphi 6 到 XE2。对于基于事件的任务，只需使用*mORMot中提供的客户端-服务器 ORM*可能就足够了：创建一个存储事件的表/类（您甚至可以定义一个循环的内存存储 - 无需在此处使用 SQLite3 引擎或数据库），然后询问自上次刷新以来的所有未决事件。服务器可以安全地作为后台服务或普通应用程序 - 一些*mORMot*用户甚至拥有相同的可执行文件，可以作为独立应用程序、服务器服务、应用程序服务器或 UI 客户端，只需更改配置。

*编辑/公告：*

在[mORMot 路线图](http://blog.synopse.info/post/2012/09/06/Roadmap%3A-interface-based-callbacks-for-Event-Collaboration)上，我们添加了一项即将推出的新功能，以轻松实现来自服务器的单向回调。

也就是说，在我们的面向服务架构框架中添加透明的“推送”模式。目的是实现从服务器端触发的通知事件，很容易从 Delphi 代码通过一些`interface`定义，甚至通过单个 HTTP 连接 - 例如，WCF 不允许这样做：它需要双重绑定，因此需要打开防火墙端口等。

它将通过[发布/订阅模式用于简单的](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)[事件协作](http://martinfowler.com/eaaDev/EventCollaboration.html)，并允许[事件溯源](http://martinfowler.com/eaaDev/EventSourcing.html)。我将尝试让它实现两种模式：轮询和锁定等待。直接回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:39:55.500

您可以使用简单的 TCP 套接字连接（双向）来允许异步服务器到同一套接字上的客户端消息。

一个例子是 Indy TIdTelnetClient 类，它使用一个线程来处理来自服务器的传入消息。

您可以构建一个类似的基于文本的协议，并且只需要服务中的一个 Indy TCP 服务器实例和应用程序中的一个 Indy Client 实例。

# javascript - 缩放后如何查看webview完整内容？

> ID：12279069
> 
> 赞同：0
> 
> 时间：2012-09-05T10:09:23.103
> 
> 标签：javascript, android, webview, webkit, scaling

我真的面临着 android web-view scale 的一个大问题，我正在做的是我想缩放网页，以便在缩放后每一行的内容将在同一行中，就像网页内容的第一行应该在第一行缩放或缩放后的线条，但在这里我没有找到任何缩放 web 视图的方法，所以我通过将比例设置为 x 和 y 来缩放 web 视图

```
webview.setScaleX(value); 
```

并用于设置比例 foy y

```
webview.setScaleY(value); 
```

但是缩放后我无法看到网页视图的全部内容，因为滚动条停止工作，所以我只能看到缩放后的有限内容，请提供任何解决方案，以便我能够滚动完整的内容网络视图？？

# mysql - 使用学说跟踪表上的数据更改

> ID：12279071
> 
> 赞同：3
> 
> 时间：2012-09-05T10:09:28.607
> 
> 标签：mysql, doctrine

所以情况是我使用 Doctrine 作为我的一个项目的 ORM。

现在我希望能够跟踪我网站某些表格上发生的变化，而无需为此进行太多额外的编码。

例如。我有一个有很多表的数据库。除此之外，我有一个表 users，我想在其上跟踪所做的更改 1\. users 的列名称为“Raman” 2\. 使用下面的更新 sql 我修改了行

`update users set name = 'Raman Joshi' where name='Raman'`

教义中是否有任何内置功能允许创建一个日志表来跟踪所有已完成的数据级别更改日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-28T15:04:06.650

您可以使用 Doctrine [preUpdate 事件侦听](http://doctrine-orm.readthedocs.org/en/latest/reference/events.html#preupdate)器来执行此操作。这是一个将更改发送到记录器的简单示例：

```
use Psr\Log\LoggerInterface as Logger;
use Doctrine\ORM\Event\PreUpdateEventArgs;

class ChangeLoggerListener
{
    protected $logger;

    public function __construct(Logger $logger)
    {
        $this->logger = $logger;
    }

    public function preUpdate(PreUpdateEventArgs $eventArgs)
    {
        //find out class and id of object being updated
        $obj=$eventArgs->getEntity();
        $class=get_class($eventArgs->getEntity());
        $id=$obj->getId();
        $log="$class($id) updated: ";

        //find out what has changed...
        $changes=$eventArgs->getEntityChangeSet();
        $separator='';
        foreach ($changes as $field => $values) {
            $log.=$separator."$field changed from {$values[0]} to {$values[1]}";
            $separator=", ";
        }

        //send it to logger
        $this->logger->info($log);
    }
} 
```

手册页显示了如何注册监听器，但如果你使用 Symfony，你可以在 services.yml 中将监听器注册为服务

```
my.change_logger:
    class: My\ExampleBundle\Listener\ChangeLoggerListener
    arguments: [@logger]
    tags:
      - { name: doctrine.event_listener, event: preUpdate } 
```

# r - R指定功能环境

> ID：12279076
> 
> 赞同：11
> 
> 时间：2012-09-05T10:09:42.497
> 
> 标签：r, function, call, environment

我对 R 语言中的函数环境有疑问。我知道每次在 R 中调用函数时，都会创建一个新的环境 E 来执行函数体。E 的父链接指向创建函数的环境。

我的问题：是否有可能以某种方式指定环境 E，即，可以提供一个特定的环境来执行函数吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-04-02T22:40:49.200

函数具有可以从函数外部更改的环境，但不能在函数本身内部更改。环境是函数的一个属性，可以使用`environment()`. 一个函数最多有一个环境，但您可以在不同的环境中复制该函数。

让我们用 x 的值设置一些环境。

```
x <- 0
a <- new.env(); a$x <- 5
b <- new.env(); b$x <- 10 
```

以及从环境`foo`中使用的功能`x`

```
foo <- function(a) {
    a + x
}
foo(1)
# [1] 1 
```

现在我们可以编写一个辅助函数，我们可以用它来调用任何环境的函数。

```
with_env <- function(f, e=parent.frame()) {
    stopifnot(is.function(f))
    environment(f) <- e
    f
} 
```

这实际上返回了一个分配了不同环境的新函数（或者如果未指定，它使用调用环境），我们可以通过传递参数来调用该函数。观察

```
with_env(foo, a)(1)
# [1] 6
with_env(foo, b)(1)
# [1] 11
foo(1)
# [1] 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-01T20:30:37.057

这是解决问题的另一种方法，直接取自[http://adv-r.had.co.nz/Functional-programming.html](http://adv-r.had.co.nz/Functional-programming.html)

考虑代码

```
new_counter <- function() {
  i <- 0
  function() {
    i <<- i + 1
    i
  }
} 
```

（更新以提高准确性）外部函数创建一个环境，将其保存为变量。调用这个变量（一个函数）有效地调用了内部函数，它更新了与外部函数关联的环境。（我不想直接复制 Wickham 的整个部分，但我强烈建议任何有兴趣的人阅读标题为“可变状态”的部分。我怀疑你可能会比这更有趣。例如，这里是一个带有重置选项的修改：

```
new_counter <- function() {
  i <- 0
  function(reset = FALSE) {
    if(reset) i <<- 0
    i <<- i + 1
    i
  }
}

counter_one <- new_counter()
counter_one()
counter_one()
counter_two <- new_counter()
counter_two()
counter_two()
counter_one(reset = TRUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-29T22:05:33.673

我不确定我是否完全跟踪问题的目标。但是可以设置函数执行的环境，修改该环境中的对象，然后从全局环境中引用它们。这是一个说明性示例，但我不知道这是否回答了提问者的问题：

```
e <- new.env()
e$a <- TRUE
testFun <- function(){
  print(a)
}
testFun() 
```

结果：打印错误（a）：找不到对象'a'

```
testFun2 <- function(){
  e$a <- !(a) 
  print(a)
}
environment(testFun2) <- e
testFun2() 
```

返回：假

```
e$a 
```

返回：假

# logging - 如何在 java Servlet 上使用 runjettyrun 插件配置 slf4j？

> ID：12279080
> 
> 赞同：1
> 
> 时间：2012-09-05T10:09:48.283
> 
> 标签：logging, slf4j

我希望在我的 servlet 中执行日志记录，我的服务器是一个简单的 runjettyrun 服务器插件以及 eclipse 我正在使用 SLF4J 进行日志记录

我无法获取任何日志，我对设置配置有疑问

我根据 slf4j 的文档手册使用以下代码

我已经进口了

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

Logger logger = LoggerFactory.getLogger(RequestHandler.class);
logger.debug(""+Now()+temp); 
```

并且此导入已成功完成，但我不清楚如何为此设置属性文件，我阅读了一些应该使用 logback.xml 配置的地方，但在阅读手册后我不清楚这一点slf4j 网站手册，任何人都可以分享一些光吗？

# teamcity - TeamCity 构建代理已断开连接

> ID：12279081
> 
> 赞同：38
> 
> 时间：2012-09-05T10:09:50.390
> 
> 标签：teamcity

我在 Windows 7 上安装了构建代理，并且始终让代理显示为“断开连接”。日志 teamcity-agent.txt 显示以下信息

```
 If this is the first time this agent registered on the server make sure it is     authorized by administrator in the server web UI. 
[2012-09-05 02:56:14,416]   INFO -    jetbrains.buildServer.AGENT - Agent registration finished. 
[2012-09-05 02:56:14,418]   INFO -    jetbrains.buildServer.AGENT - Stop command was not performed. No build to stop with reason: BuildInterruptReason.AGENT_SHUTDOWN 
[2012-09-05 02:56:14,418]   INFO -    jetbrains.buildServer.AGENT - Starting agent shutdown sequence, reason: Restart agent, failed to download upgrade from server 
[2012-09-05 02:56:14,424]   INFO -    jetbrains.buildServer.AGENT - Host configuration for downloading updates: HostConfiguration[host=http://myteamcity:8080] 
[2012-09-05 02:56:14,424]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/teamcity-agent.xml ==> C:\BuildAgent\temp\iQ0fjie6zR125neulJeqiYauT8zQ5zOI 
[2012-09-05 02:56:15,070]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/agentSystemInfo.zip ==> C:\BuildAgent\update\plugins\agentSystemInfo.zip 
[2012-09-05 02:56:15,747]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/amazonEC2.zip ==> C:\BuildAgent\update\plugins\amazonEC2.zip 
[2012-09-05 02:56:16,617]   INFO - agent.impl.AgentPortFileWriter - Delete agent runtime file from C:\BuildAgent\logs\buildAgent.port 
[2012-09-05 02:56:16,619]   INFO -    jetbrains.buildServer.AGENT - Unregistering from build server: 18 
[2012-09-05 02:56:16,800]   INFO -    jetbrains.buildServer.AGENT - Shutdown agent WebServer start 
[2012-09-05 02:56:16,801]   INFO -    jetbrains.buildServer.AGENT - Shutdown agent WebServer finish 
[2012-09-05 02:56:16,801]   INFO -    jetbrains.buildServer.AGENT - Shutdown agent finish 
[2012-09-05 02:56:16,968]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/ant.zip ==> C:\BuildAgent\update\plugins\ant.zip 
[2012-09-05 02:56:50,086]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/antPlugin.zip ==> C:\BuildAgent\update\plugins\antPlugin.zip 
[2012-09-05 02:56:52,070]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/assembly-info-patcher.zip ==> C:\BuildAgent\update\plugins\assembly-info-patcher.zip 
[2012-09-05 02:56:53,464]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/clearcase-agent.zip ==> C:\BuildAgent\update\plugins\clearcase-agent.zip 
[2012-09-05 02:56:55,375]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/cmake-runner.zip ==> C:\BuildAgent\update\plugins\cmake-runner.zip 
[2012-09-05 02:56:57,190]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/commandLineRunner.jar ==> C:\BuildAgent\update\plugins\commandLineRunner.jar 
[2012-09-05 02:56:58,218]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/coveragePlugin.zip ==> C:\BuildAgent\update\plugins\coveragePlugin.zip 
[2012-09-05 02:57:11,629]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/crashDetector.zip ==> C:\BuildAgent\update\plugins\crashDetector.zip 
[2012-09-05 02:57:12,436]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/cvsAgent.zip ==> C:\BuildAgent\update\plugins\cvsAgent.zip 
[2012-09-05 02:57:20,720]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/dotCover.zip ==> C:\BuildAgent\update\plugins\dotCover.zip 
[2012-09-05 02:58:00,011]   INFO -    jetbrains.buildServer.AGENT - Downloading http://myteamcity:8080/update/plugins/dotNetPlugin.zip ==> C:\BuildAgent\update\plugins\dotNetPlugin.zip 
```

如何连接代理？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-10-15T13:06:19.503

这是一个关于重新连接断开连接的代理的非常全面的博客

[http://michaelbarnesjr.wordpress.com/2012/10/18/teamcity-build-agent-disconnected/](http://michaelbarnesjr.wordpress.com/2012/10/18/teamcity-build-agent-disconnected/)

以下是步骤（从上面的链接复制）

如果代理因任何原因断开连接，您可以按照以下步骤重新连接它：

*   ssh 到断开连接的代理所在的服务器。
*   转到构建代理的 bin 目录（即 /opt/teamcity/buildagent/buildagent01/bin/）
*   su 到代理运行的用户（即 appBuilder）
*   运行 agent.sh 开始

这将启动代理，几秒钟左右后，下次你去 TeamCity 时，它将被连接。

如果 Team City 在 Windows 服务器上运行，您可以连接到该服务器，转到服务并重新启动已断开连接的构建代理。![团队城市](../Images/98f2cf6cda5c470312be1bc42316c235.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-01-23T16:24:56.680

在我的情况下，代理已启动但列为断开连接，等待几分钟后它仍然断开连接。所以我像彼得建议的那样去构建代理上的 bin 目录并运行以下两个命令

```
./agent.sh stop
./agent.sh start 
```

基本上只是重新启动构建代理。这对我有用。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-05T21:55:39.620

首先，如果您尚未授权代理，请确保在 TeamCity 网站仪表板中***授权代理。***

接下来，确保代理“ownPort”未被代理上的防火墙阻止。这是 TeamCity 将用于向代理发送消息的端口。该值可以在“${agent.home}/conf/buildAgent.properties”中定义。

从 TeamCity 2017.2.1 开始，“ownPort”不存在，也没有任何嵌入式文档（即注释掉的示例）。默认值为 8080，但您可以像这样添加所需的属性和值：

```
## Defines which port the agent will use to receive messages from TeamCity.
## Defaults to 8080 if not present.
ownPort=9091 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-23T19:47:29.893

就我而言，在 Windows 8 Professional 下：

> TC 构建代理升级失败

1.  我检查了`BuildAgent\logs\teamcity-agent.log`，“升级过程”有问题。

2.  我检查了`BuildAgent\logs\upgrade.log`，有更详细的“调试”消息。问题是关闭服务时“访问被拒绝”。

3.  我将TC服务器服务的用户账号添加到“Administrators”，让它停止代理服务。

4.  我从“管理员”用户组中删除了 TC 服务器服务的用户帐户。

5.  重新启动两个服务（TC服务器+代理）最终导致：

    ```
    BuildAgent\logs\buildAgent.port 
    ```

    文件：代理成功后终于连接上了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-25T23:45:44.363

我遇到了服务器问题并更改了服务器的端口。

因此，代理无法连接到服务器，因为我只更改了服务器端口而不是代理属性。

更新代理属性后，代理再次开始工作。

属性位于：TeamCity\buildAgent\conf\buildAgent.properties

该属性的位置如下： serverUrl=http://localhost:8080

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-15T15:10:43.607

在“服务”面板中手动启动 TeamCity 代理为我解决了这个问题（在 Windows 机器上）。

upgrade.log 中指出了问题（在 BuildAgent\logs 目录中）：

```
ERROR - r.agent.upgrade.UpgradeRunBase - Failed to start agent after upgrade: java.io.IOException: Failed to start TeamCity build agent service. Please check TeamCity build agent service user have enough permissions to stop and start the service. 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-20T16:37:34.983

我在通过 VPN 远程工作时遇到了这个问题，并且我的 IP 地址发生了变化。在 conf/buildAgent.properties 文件中，我将我为 serverURL 属性分配的 IP 更改为使用 localhost，并且代理立即连接。

```
## The address of the TeamCity server. The same as is used to open 
TeamCity web interface in the browser.
#serverUrl=http://111.222.333.444:8111
serverUrl=http://localhost:8111 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-25T08:58:55.240

当我将 TeamCity 的端口从“8111”更改为“80”时，我在 Windows 10 上遇到了这个问题。

为了解决这个问题，我打开了文件`C:\TeamCity\buildAgent\conf\buildAgent.properties`并将第一行从`serverUrl=http\://localhost\:8111`到`serverUrl=http\://localhost\:80`。

# android - 捏缩放后相对于图像的触摸点坐标

> ID：12279087
> 
> 赞同：1
> 
> 时间：2012-09-05T10:10:00.940
> 
> 标签：android, pinchzoom

缩放图像后如何计算相对于图像的坐标？要缩放图像，我遵循了 url：[https](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java) ://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java 。

如果我们在缩放之前在特定点触摸图像，则相应的值是

```
point:(3,2)
top left corner of image:(0,0)
top left corner of screen:(0,0)
scale factors:(1.25,0.98) 
```

缩放图像后：

如果我们拖动图像直到图像左上角与屏幕左上角重合并在同一触摸点（捏合之前）触摸图像，那么

```
point:(540,220)
top left corner of image:(0,0)
top left corner of screen:(0,0)
scale factors:(4.78,2.67) 
```

如果我们拖动图像直到图像右上角与屏幕右上角重合并在同一触摸点（捏合之前）触摸图像，那么

```
point:(1080,340)
top left corner of screen:(0,0)
top left corner of image:(-2430,0)
scale factors:(4.78,2.67) 
```

如果我们拖动图像直到图像左下角与屏幕左下角重合并在同一触摸点（捏合之前）触摸图像，那么

```
point:(670,80)
top left corner of screen:(0,0)
top left corner of image:(0,-890)
scale factors:(4.78,2.67) 
```

如果我们拖动图像直到图像右下角与屏幕右下角重合并在同一触摸点（捏合之前）触摸图像，那么

```
point:(456,274)
top left corner of screen:(0,0)
top left corner of image:(-2430,-890)
scale factors:(4.78,2.67) 
```

如果我们将图像设置在屏幕上[不设置任何角落]

```
point:(743,146)
top left corner of screen:(0,0)
top left corner of image:(-1280,-423)
scale factors:(4.78,2.67) 
```

在上述所有场景中，我在触摸事件中获取坐标为

```
x_cord=event.getX();
y_cord=event.getY(); 
```

我得到的接触点是关于屏幕的。

如何根据图像计算接触点？

谢谢和问候迷你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:40:48.907

我们可以根据图像大小通过计算相对点来计算

```
float[] values = new float[9];
matrix.getValues(values);
x_coord = ((e.getX() - values[2])*scaleX )/values[0];
y_coord= ((e.gety() - values[5])*scaleY )/ values[4]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-08T11:01:10.797

就我而言，我计算这些点如下。这将对某人有所帮助。

```
x = (event.getX() / values[Matrix.MSCALE_X] - (values[Matrix.MTRANS_X]/values[Matrix.MSCALE_X]));
y = (event.getY() / values[Matrix.MSCALE_Y] - (values[Matrix.MTRANS_Y]/values[Matrix.MSCALE_Y])); 
```

# shader - Directx 11 HLSL 发光效果

> ID：12279088
> 
> 赞同：2
> 
> 时间：2012-09-05T10:10:03.773
> 
> 标签：shader, effect, hlsl, directx-11, glow

在 Directx 11 中，如何为对象制作轮廓发光效果（是的，我知道我必须为对象只传递此着色器），所以它看起来像是被选中的。

我看过一些例子，但它们都在 .fx 文件中，我不喜欢。

我很欣赏任何关于如何做到这一点的评论或回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:32:59.570

您应该能够从 fx 文件中取出相关的东西，fx 文件只是封装了管道状态和一些通常代表一种“效果”的像素/顶点着色器。

除此之外，作为图形新手，我发现您的问题有点模棱两可。但是，我熟悉一种类似于 Left 4 Dead 的发光类型（当您通过墙壁看到玩家/物体的轮廓发光时）。以下是一些参考资料：

*   [L4D 发光效果](https://developer.valvesoftware.com/wiki/L4D_Glow_Effect)
*   [gamedev.stackexchange.com - 如何减少轮廓发光效果中的锯齿？](https://gamedev.stackexchange.com/questions/16391/how-can-i-reduce-aliasing-in-my-outline-glow-effect)

或多或少将对象绘制到模板缓冲区，然后将具有所需颜色发光的对象绘制到单独的缓冲区中。然后在单独的缓冲区上运行高斯模糊。最后，您将受模板缓冲区限制的模糊缓冲区渲染到屏幕上。

# android - Android - ScrollView 中的 ExpandableListView

> ID：12279095
> 
> 赞同：1
> 
> 时间：2012-09-05T10:10:40.247
> 
> 标签：android, listview, layout, scrollview, expandablelistview

好吧，我知道这不是要做的，但我需要这样做！我的布局是这样的：![图片](../Images/811bc6e5f6a483874a83a33c7572e9e8.png)

当一个组被点击并显示文本时，视图会增加它的高度，并且具有滚动视图，它会滚动。当用户滚动时，图像也会滚动，因此如果点击的组下的文本太长，则图像会滚动。我确信有办法做到这一点。我是Android新手，我是iOS开发者。

编辑：这是我想要的结果，就像在这个应用程序的 iOS 版本中一样：

![在此处输入图像描述](../Images/0aba695e2d3481cd71c942da3558114c.png)

这是用户打开此布局时的标准视图。

![在此处输入图像描述](../Images/dd041e41a9c997a5f7fd0186aee689d1.png)

这是当用户打开一组可扩展列表并滚动阅读所有文本时。

这就是我要的。

# android - 在非 UI 线程 android 中运行代码

> ID：12279100
> 
> 赞同：2
> 
> 时间：2012-09-05T10:10:50.913
> 
> 标签：android, multithreading, handler, runnable, ui-thread

我有一个图像应用程序，在显示图像时我正在播放音乐。现在，我在 UI 线程中拥有这两种功能。

我想将其中的音乐播放部分移动到与 UI 线程不同的另一个线程中。

我如何实现这一目标？

如果我使用处理程序和可运行对象的复杂性：

run() 必须包含要执行的所有内容，但音乐代码分散在各处，因为它是基于事件的，并且每次执行不同的代码

所以我可以用 handler 和 runnable 实现这一点的唯一方法是，如果我有几个 runnables 每个都执行一个特定的功能，这意味着所有音乐代码都不会在同一个线程中运行，它们会在不同的线程中运行，这不是一件好事.

那么你是怎么做到的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:38:46.973

我建议`Service`用 a创建一个`Binder`- 然后你就可以处理它了。在`Service`创建一个`Executor`（池中的单个或多个`Thread`s - 取决于您的应用程序结构和事件；`Queue`实现也是如此），然后将音乐事件传递给执行程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:35:01.977

这就是我所做的：

 `````
 public static void startTrack() {
    PLAYER_STATE = IS_PLAYING;
            /*Setup the handler and runnable*/
    mMusicHandler = new Handler() {         
    }; 

    mMusicRunnable = new Runnable() {
        public void run() {
             Log.d(TAG,"inside Music Runnable");
            try {
                mPlayer.start();        
            } catch (IllegalStateException e) {
                Log.d(TAG,"ILLEGAL STATE-START");
                handleIllegalState();
            }
        }
    };
    mMusicHandler.post(mMusicRunnable);

} 
```` 

`所以只有音乐设置的开始部分是在不同的线程上完成的。``

# asp.net-mvc-3 - 如何在列中与其他列一起实现单选按钮

> ID：12279101
> 
> 赞同：0
> 
> 时间：2012-09-05T10:10:51.560
> 
> 标签：asp.net-mvc-3, razor, telerik, asp.net-mvc-4, telerik-grid

在 Telerik razor 工作，我的代码是

```
 .Columns(c =>
    {
        c.Bound(itm => itm.id).Visible(false);
        c.Bound(itm => itm.name).Title("FN").Width(200);
        c.Bound(itm => itm.name).Title("LN").Width(200);
        c.Bound(itm => itm.location).Title("Loc").Width(200);
 }) 
```

我想添加一个单选按钮作为第一列。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:44:35.540

如果您使用的是服务器数据绑定，则可以执行类似的操作。

```
.Columns(c =>
{
      c.Template(
      @<text>
          <input name="checkedRecords" type="radio" value="@item.id " title="checkedRecords" 
              @if (checkedRecords.Contains(item.id))
              {
                  <text>checked="checked"</text>
              }
          />
      </text>)
      .Title("").Width(36).HtmlAttributes(new { style = "text-align:center" });
      c.Bound(itm => itm.id).Visible(false);
      c.Bound(itm => itm.name).Title("First Name").Width(200);
      c.Bound(itm => itm.name).Title("Last Name").Width(200);
      c.Bound(itm => itm.location).Title("Location").Width(200);
 }) 
```

请参阅[Telerik 网站上的示例](http://demos.telerik.com/aspnet-mvc/razor/grid/checkboxesserverside)。

对于 ajax 绑定，您将使用 ClientTemplate：

```
.Columns(c =>
{
      c.Bound(itm => itm.id)
       .ClientTemplate("<input type='radio' name='checkedRecords' value='<#= id #>' />")
       .Title("")
       .Width(36)
       .HtmlAttributes(new { style = "text-align:center" });
      c.Bound(itm => itm.id).Visible(false);
      c.Bound(itm => itm.name).Title("First Name").Width(200);
      c.Bound(itm => itm.name).Title("Last Name").Width(200);
      c.Bound(itm => itm.location).Title("Location").Width(200);
 }) 
```

[Telerik 示例](http://demos.telerik.com/aspnet-mvc/razor/grid/checkboxesajax)

# android - 应用程序意外停止

> ID：12279103
> 
> 赞同：1
> 
> 时间：2012-09-05T10:10:56.097
> 
> 标签：android

运行项目时收到此消息：

```
不幸的是，项目停止了 

```

当我在 try 和 catch 之间添加代码时，我也遇到了这个错误

```
应用程序未定义权限 com.example.elarabygroup.permission.c2d MESSAGE

```

我测试了所有代码，发现错误在这里：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_elaraby_group);

    GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    final String regId = GCMRegistrar.getRegistrationId(this);

    if (regId.equals("")) {
        GCMRegistrar.register(this, SENDER_ID);
    } else {
        Log.v(TAG, "Already registered");
    }
} 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.elarabygroup"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" /> 
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".ElarabyGroup"
            android:label="@string/title_activity_elaraby_group" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
  <intent-filter>
    <action android:name="com.google.android.c2dm.intent.RECEIVE" />
    <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
    <category android:name=".ElarabyGroup" />
  </intent-filter>
</receiver>
<service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

GCMIntentService 类

```
package com.example.elarabygroup;

import com.google.android.gcm.GCMBaseIntentService;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class GCMIntenetService extends GCMBaseIntentService {
    public static String TAG = "GCMIntentService";

    public GCMIntenetService(String senderId) {
        super(senderId);
        Log.d("GCMIntentService", senderId);
    }

    @Override
    protected void onError(Context arg0, String arg1) {
        Log.d("onError", arg1);
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId) {
        Log.d("onRecoverableError", errorId);
        return false;
    }

    @Override
    protected void onMessage(Context arg0, Intent arg1) {
        Log.d("onMessage", String.valueOf(arg1));
    }

    @Override
    protected void onRegistered(Context arg0, String arg1) {
        Log.d("onRegistered", arg1);
    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        Log.d("onUnregistered", arg1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:51:07.723

```
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.WRITE_SMS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

Try this

# android - 如何将一个布局放在另一个布局上

> ID：12279106
> 
> 赞同：0
> 
> 时间：2012-09-05T10:11:04.630
> 
> 标签：android, android-layout, ontouchlistener

我有个问题。我正在研究一种布局，其中我希望一个布局高于另一个布局。情况：有一个具有 Touchlistener 的 RelativeLayout。在此布局的底部，有另一个相对布局，其中包含三个可单击的按钮。现在的问题是，当我单击这些按钮时，第一个布局的侦听器被激活并且所有按钮都不起作用。

我确实使用了框架布局，但它不起作用。确实使用了 .bringToFront 方法。但这也不起作用。

请我需要同样的建议。

我正在上传我的代码。

```
<RelativeLayout
    android:id="@+id/rlayout" 
    android:layout_width="458dp"
    android:layout_marginTop="10dp"
    android:layout_marginLeft="10dp"
    android:gravity="center"
    android:layout_height="278dp"
    android:background="@drawable/anim_layout" >

    <TextView
        android:id="@+id/textView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:scaleType="centerInside"
        android:visibility="visible" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:gravity="center"
        android:scaleType="centerInside"
        android:visibility="invisible" />

 </RelativeLayout>

     <ImageView
    android:id="@+id/more"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="4dp"
    android:layout_gravity="bottom"
    android:background="@drawable/image_unfocus" />

<RelativeLayout
    android:id="@+id/rlayout_anim_bg"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:layout_marginLeft="4dp"
    android:background="@drawable/anim_bg" >

    <ImageButton
        android:id="@+id/sequence_image"
        android:layout_width="22dip"
        android:layout_height="17dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="22dp"
        android:layout_marginTop="3dip"
        android:background="@drawable/unfocus_image" />

    <ImageView
        android:id="@+id/edit_image"
        android:layout_width="22dip"
        android:layout_height="17dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="80dp"
        android:layout_marginTop="3dp"
        android:layout_toRightOf="@id/sequence_image"
        android:background="@drawable/edit_icon" />

    <ImageView
        android:id="@+id/close_image"
        android:layout_width="22dip"
        android:layout_height="17dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="130dp"
        android:layout_marginTop="3dp"
        android:layout_toRightOf="@id/edit_image"
        android:background="@drawable/close_img" />
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:35:22.360

使用 Layout Inflator ... 制作一个 xml 。使用 inflator ，您可以在前一个布局上充气另一个布局。请享用

# wcf - 在 WCF 服务中作为对象公开的数据库实体

> ID：12279107
> 
> 赞同：0
> 
> 时间：2012-09-05T10:11:08.550
> 
> 标签：wcf, entity-framework-4

我有一个 WCF 服务，其中我有一个方法，该方法使用实体框架返回表示数据库表（Accommodation）的对象的 IQueryable。当我尝试在客户端使用该方法时，该方法不会返回 IQueryable 而是返回对象。我查看了服务的代码，Entity Framework 生成的住宿类具有此属性

```
[DataContractAttribute(IsReference=true)] 
```

因此，AFAIK 客户端应该能够看到该类。这里出了什么问题？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T10:19:13.050

该类型仅在合约中使用时才会出现在元数据中。元数据不知道 IQueryable 是什么——它是行为的定义，而合约只定义状态，因此生成的代码将使用它在这种情况下确实理解的东西——即对象

在您的服务合同中使用 EF 生成的类型确实不是一个好主意 - 实际上，您将服务使用者与数据访问层紧密耦合。在服务内部使用 EF 并使用定义要在服务边界上传递的数据的类型

# django - 即使 django 已启动并正在运行，Django 测试页仍返回 404

> ID：12279110
> 
> 赞同：0
> 
> 时间：2012-09-05T10:11:12.170
> 
> 标签：django, macos, osx-lion

我正在尝试在 osx lion 中设置我的第一个 django-dev。它似乎已启动并正在运行：

```
Kristoffers-MacBook-Pro:django-test kristoffernolgren$ python manage.py runserver
Validating models...

0 errors found
Django version 1.4.1, using settings 'mysite.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
^CKristoffers-MacBook-Pro:django-test kristoffernolgren$ 
```

但是当我访问 URL 时，`http://127.0.0.1:8000/`出现“连接失败”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:38:57.410

我不明白当你按下 Ctrl+C 时，你会关闭开发服务器。只是不要按 ctrl+c。希望这对其他人有帮助:)

# mongodb - MongoDB 索引 2 个字段并让索引用于第 3 个字段的搜索

> ID：12279111
> 
> 赞同：2
> 
> 时间：2012-09-05T10:11:13.650
> 
> 标签：mongodb, indexing, mongodb-indexes, database

来自 MongoDB 文档

> 如果您有多个字段的复合索引，则可以使用它来查询字段的开始子集。因此，如果您在 a,b,c 上有一个索引，您可以使用它查询 [a] [a,b] [a,b,c]

所以可以说我有这个字段的文档

1.  用户身份
2.  姓名
3.  国家
4.  外场

我的索引订单是 [UserID,Name,Country]

所以如果我有类似的查询

```
 var q = (from c in collection.AsQueryable()
                 where c.UserID == UserID
                 where Name = "test"
                 where Country = 1
                 where ExtraField = "check"

                 select c); 
```

此查询是否对前 3 个参数使用索引，然后在没有索引的情况下搜索 ExtraField？

如果是，那么这个查询也一样吗

```
 var q = (from c in collection.AsQueryable()
                 where c.UserID == UserID                   
                 where ExtraField = "check"

                 select c); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:37:16.243

这两个问题的答案都是*肯定*的。

对于您的第一个查询，性能将取决于结果集的选择性。因此，如果索引中的 3 个字段与大量文档匹配，则性能会很慢，因为需要扫描所有这些文档才能在 ExtraField 上进行匹配。如果只匹配几个文档，性能会很快。

现在，如果您的查询根本不包含索引中的第一个字段，则*不会*使用该索引。例如，以下查询将无法使用索引：

```
var q = (from c in collection.AsQueryable()
              where Name = "test"
              where Country = 1
              select c); 
```

[在此处](https://stackoverflow.com/questions/11053201/mongo-triple-compound-index)查看有关在索引中查找其他字段组合的一些有趣事实。

当对此类问题有疑问时，我建议[使用 explain 命令。](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-Use%7B%7Bexplain%7D%7D.)

# menu - 什么是导航栏/菜单的 WAI-ARIA 兼容实现

> ID：12279113
> 
> 赞同：42
> 
> 时间：2012-09-05T10:11:15.157
> 
> 标签：menu, navigation, menubar, wai-aria

我们正在实施（即添加）对 Web 门户主导航菜单的 WAI-ARIA 支持。菜单是此处显示的菜单：

![导航菜单截图](../Images/30445e2fb0afb6ec99de81c21833f33b.png)

菜单是通过经典的`<ul>`// DOM 树实现的`<li>`，`<a>`用 CSS 样式化，看起来像水平选项卡。

这种小部件的 WAI-ARIA 兼容实现是什么？

我已经阅读了 w3org 的最新 WAI-ARIA 规范的许多部分，以获得一般的理解、分类等。然后，我阅读了几个 UI 小部件实现的示例。我找不到任何专门针对此类 CSS 导航菜单的示例。我经常发现的最接近的小部件是 Menu、MenuBar 和 TabPanel。当然，我还查看了[Free ARIA 社区组](https://groups.google.com/forum/?fromgroups=#!topic/free-aria/HWMoOUsnBOw)（最初发布此问题的地方）。

我会说这些小部件*都不*完全匹配（CSS）导航菜单。例如，TabPanel 可能控制页面中的某些内容（--> aria-controls），也可能是 MenuBar；但我完全不确定导航菜单是否控制页面中的内容（它控制要显示的下一页）。无需进一步说明，还有一些其他差异。参考文献在文章末尾。如果有人作为导航菜单的更好（或更合适）示例，我们将很高兴了解它们。

**参考**

*   [https://developer.mozilla.org/en-US/docs/Accessibility/ARIA/ARIA_Test_Cases#Menubar_and_Menu](https://developer.mozilla.org/en-US/docs/Accessibility/ARIA/ARIA_Test_Cases#Menubar_and_Menu)
*   [http://wiki.jqueryui.com/w/page/38666403/Menubar](http://wiki.jqueryui.com/w/page/38666403/Menubar)
*   [http://www.oaa-accessibility.org/examplep/menubar2/](http://www.oaa-accessibility.org/examplep/menubar2/)
*   [http://test.cita.illinois.edu/aria/menubar/](http://test.cita.illinois.edu/aria/menubar/)
*   [http://dev.aol.com/dhtml_style_guide#menu](http://dev.aol.com/dhtml_style_guide#menu)
*   [http://whatsock.com/modules/aria_tabs_menu_modules/demo.htm](http://whatsock.com/modules/aria_tabs_menu_modules/demo.htm)
*   [http://www.w3.org/TR/wai-aria-practices/#menu](http://www.w3.org/TR/wai-aria-practices/#menu)
*   [http://www.w3.org/TR/wai-aria/roles](http://www.w3.org/TR/wai-aria/roles)
*   [http://www-03.ibm.com/able/resources/wai_aria_intro.html](http://www-03.ibm.com/able/resources/wai_aria_intro.html)

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-05T10:15:33.000

一个可能的实现是：

**HTML结构：**

```
<div> <!-- Outer wrapper -->
  <ul> <!-- Main navigation bar container -->
    <li> <!-- First-level item without submenu -->
      <a> <!-- Destination URL -->
      </a>
    </li>
    <li> <!-- First-level item with submenu -->
      <a> <!-- Destination URL -->
      </a>
      <ul> <!-- Second-level menu container -->
        <li> <!-- Second-level item -->
          <a>
          </a> <!-- Destination URL -->
        </li>
      </ul>
    </li>
  </ul>
</div> 
```

**角色：**

*   外包装的角色=“导航”`<div>`
*   `<ul>`导航栏容器的角色="menubar"
*   二级`<ul>`容器的 role="menu"
*   role="presentation" 用于一级和二级`<li>`菜单项（在公开的可访问菜单栏结构中不需要它们）
*   role="menuitem" 用于一级和二级`<a>`菜单项

**特性：**

*   aria-haspopup="true" 用于具有子菜单的一级`<a>`菜单项
*   aria-labelledby="上一个`<a>`菜单项的 ID" 用于二级`<ul>`容器

**状态：**

*   当前访问的第一级或第二级`<a>`项目上的 aria-selected="true" ；aria-selected="false" 在其他`<a>`项目上。那就是强制执行“选定<==>当前页面”的概念</li>
*   aria-expanded="true/false" 用于二级`<ul>`容器
*   aria-hidden="true/false" 用于二级`<ul>`容器
*   aria-activedescendant="" 用于主`<ul>`导航栏容器。这是使用 tabindex 的替代方法
*   tabindex=0 当前访问的`<a>`项目；tabindex=-1 在其他`<a>`项目上。那是为了在切换到导航栏时首先关注当前页面。它是使用 aria-activedescendant 的替代方法

**键盘：**

*   选项卡：将焦点从 Web 应用程序的其他点移入/移出菜单。
*   Shift+Tab：以相反的顺序将焦点从 Web 应用程序中的其他点移入/移出菜单。
*   右箭头：下一个导航栏项目
*   左箭头：上一个导航栏项
*   Enter：激活当前焦点项目（即导航到相应的 URL）
*   空格：激活当前焦点项目（即导航到相应的 URL）

**2014 年 8 月：选择咏叹调 Vs menuitem**

回复@Joshua Muheim 评论：现在我可以[从这里](http://www.w3.org/TR/wai-aria/roles#menuitemradio)以及[他的参考](http://www.w3.org/TR/wai-aria/states_and_properties#aria-selected)中看到，角色`aria-selected`不允许该属性。 正如我从这个最近的[SO 答案](https://stackoverflow.com/a/24798883/540776)中读到的，鉴于当前的情况，有一些解决方案，并且还有一个新的提议属性。`menuitem`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T06:40:40.503

`aria-posinset`通过将和`aria-setsize`属性添加到带有 的元素，您可以获得一个宣布“X of Y”信息的菜单`role=menuitem`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-20T20:45:52.937

ARIA 设计模式为一系列自定义控件提供了预期的 UI 行为[http://www.w3.org/TR/wai-aria-practices/#aria_ex](http://www.w3.org/TR/wai-aria-practices/#aria_ex)使用`esc`键关闭并在关闭时返回触发元素是标准 UI桌面和网络。在任何 Google 文档应用程序上试用（例如）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-30T19:20:25.890

+Escape 键应该关闭打开的菜单并将焦点返回到打开它的元素。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-08-20T20:03:34.177

Escape to close 是一种标准的回归方式，它是许多用户的预期行为。

# xcode - 发送参数值并检索 xml 文件 Xcode

> ID：12279115
> 
> 赞同：0
> 
> 时间：2012-09-05T10:11:21.663
> 
> 标签：xcode, parameters, nsmutableurlrequest, nshttpurlresponse

在我当前的`xcode`项目中，我需要将参数值发送到 url，并且需要根据发送`xml`的参数值检索文件。

我尝试了以下代码，但它不起作用：

```
(IBAction)myButtonClick:(id)sender 
{

    NSURL *oRequestURL = 
        [NSURL URLWithString:@"http://xyz .com/air/1.0/search?from=MAA&to=CJB&depart-date=2012-06-30&adults=2&children=2&infants=1&way=one&cabin-type=Economy&sort=asc"];

    NSMutableURLRequest *oRequest = [[[NSMutableURLRequest alloc]init]autorelease];

    [oRequest setHTTPMethod:@"POST"];
    [oRequest setURL: oRequestURL];

    NSMutableData *oHttpBody = [NSMutableData data];
    [oHttpBody appendData:[@"This is HTTP Request body" dataUsingEncoding:NSUTF8StringEncoding]];

    [oRequest setValue:[oHttpBody length] forHTTPHeaderField:@"Content-Length"];

    NSError *oError = [[NSError alloc]init];
    NSHTTPURLResponse *oResponseCode = nil;
    NSData *oResponseData = [NSURLConnection sendSynchronousRequest:oRequest returningResponse:oResponseCode error:oError];

    if ([oResponseCode statusCode]> 200) {
        NSLog(@"Status code is greater than 200");        
    }

    NSString *strResult=[[NSString alloc]initWithData:oResponseData encoding:NSUTF8StringEncoding];
    NSLog(@"The result is %s",strResult);

} 
```

我搜索了许多网站和书籍，但找不到解决方案。如果可以提供指向教程或其他有用资源的链接，将会有很大帮助。感谢您的大力帮助。

谢谢你。

嗨，我找到了解决方案。代码如下。希望它可以帮助别人:)

```
- (IBAction)myButtonPressed:(id)sender 
{

    NSString *urlAsString = @"http://api.abc.com/air/1.0/search?from=MAA&to=CJB&depart-date=2012-09-30&adults=2&children=2&infants=1&way=one&cabin-type=Economy&sort=asc";

    NSURL *url = [NSURL URLWithString:urlAsString];

    NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url];

    [urlRequest setValue:@"2193141de2g7e2a34bb19bc3aa52b3b5" forHTTPHeaderField:@"X-XX-API-KEY"];

    [urlRequest setTimeoutInterval:30.0f];
    [urlRequest setHTTPMethod:@"GET"];

    NSOperationQueue *queue  = [[NSOperationQueue alloc]init];

    [NSURLConnection 
     sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) 
    {
         if ([data length]>0 &&
             error == nil)
         {
             NSString *html = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];
             NSLog(@"HTML = %@", html);
         }

         else if ([data length]== 0 && error==nil) {
             NSLog(@"Nothing was downloaded");
         }
     else if (error!= nil) {
         NSLog(@"Error occured = %@", error);
     }

     }];
} 
```

# jedis - Jedis 可以获取/设置 Java POJO 吗？

> ID：12279117
> 
> 赞同：20
> 
> 时间：2012-09-05T10:11:22.717
> 
> 标签：jedis

我使用 Jedis 作为 java 客户端连接到 Redis 服务器。

**问题1：**似乎没有获取/设置 Object < 的方法？扩展可序列化> ? 所有的值都必须是 String 还是 byte[]？

其他客户端，如“JRedis”和 Spymemcache（用于 memcached 服务器）可以。

**问题2：**如果我使用ShardedJedis，它不能设置auth/password？而 Jedis 类可以（使用 auth(String password)）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T16:34:13.810

**关于问题 1**：Jedis 不会处理 POJO。您应该序列化为字符串或字节 [] 并使用 jedis 来执行此操作，尽管我不建议存储您的 java 对象序列化，因为您将无法使用所有 Redis 酷特性。另一种方法是使用对象哈希映射器之类的东西，例如[JOhm](https://github.com/xetorthio/johm)。

**关于问题 2**：ShardedJedis 将仅支持在单个键上运行的命令。这是为了保证原子性。如果你想在特定的 redis 上运行特定的命令，你应该使用`shardedJedis.getShard('someky')`它将返回一个`Jedis`你可以使用的实例。推荐的另一种处理方法是在`JedisShardInfo`实例中指定您的密码。[您可以在测试](https://github.com/xetorthio/jedis/blob/master/src/test/java/redis/clients/jedis/tests/ShardedJedisTest.java#L54)中看到这方面的示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-03T09:14:17.040

**对问题 1 的回答：**

[Redisson](https://redisson.org)（Redis Java 客户端）可以使用 POJO 对象。而且您不需要每次都自己序列化/反序列化对象并使用连接（获取/释放）。这一切都由 Redisson 完成。

这是一个例子：

```
RBucket<AnyObject> bucket = redisson.getBucket("anyObject");
// set an object
bucket.set(new AnyObject());
// get an object
AnyObject myObject = bucket.get(); 
```

或者您可以使用[LiveObjectService](https://github.com/mrniko/redisson/wiki/9.-distributed-services/#92-live-object-service)将 POJO 字段存储为 Redis 哈希对象中的键。

```
@REntity
public class MyObject {

   @RId
   private String id;
   @RIndex
   private String value;
   private MyObject parent;

   public MyObject(String id) {
       this.id = id;
   }

   public MyObject() {
   }

   // getters and setters

} 
```

Redisson 支持许多流行的编解码器，例如`Jackson JSON`, `Avro`, `Smile`, `CBOR`, `MsgPack`, `Kryo`, `FST`, `LZ4`,`Snappy`和`JDK Serialization`.

# iphone - 使用 facebook 登录后，如何检查用户是否允许我的应用在 facebook 墙上发布？

> ID：12279119
> 
> 赞同：1
> 
> 时间：2012-09-05T10:11:27.923
> 
> 标签：iphone, objective-c, ios

我在 ios 中面临有关 facebook sdk 的问题。我制作了一个使用 facebook 登录的应用程序，在登录时它要求我允许我的应用程序是否可以在我的 facebook 墙上发布。我想检查用户是否允许权限。我该如何检查。你有什么主意吗？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:40:33.027

尝试一下 ：

```
 NSString *theWholeUrl = [NSString stringWithFormat:@"https://graph.facebook.com/me/permissions?access_token=%@",[[FBSession activeSession] accessToken]];

 NSLog(@"TheWholeUrl: %@", theWholeUrl);

 NSURL *facebookUrl = [NSURL URLWithString:theWholeUrl];

 NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:facebookUrl];
 [req setHTTPMethod:@"GET"];

 NSURLResponse *response;
 NSError *err;
 NSData *responseData = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&err];
 NSString *content = [NSString stringWithUTF8String:[responseData bytes]];

//NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

 SBJSON *json = [SBJSON new];
 NSError *error = nil;
 NSDictionary * dictionary =[json objectWithString:content error:&error]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T10:47:32.513

接受的答案使用 Graph API，但我认为您正在使用本机 iOS Facebook SDK 来让事情变得更容易？

如果是这样，您可以在[此处](https://developers.facebook.com/docs/facebook-login/ios/permissions)找到 Facebook 完整记录的问题。它们涵盖了所有不同的场景，包括如何处理拒绝的权限以及如何在需要时重新请求权限。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T10:13:43.693

使用 Graph API 执行此操作的正确方法是使用 User.permissions。

[https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fpermissions](https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fpermissions)

# list - 推土机映射列表字段

> ID：12279121
> 
> 赞同：0
> 
> 时间：2012-09-05T10:11:36.053
> 
> 标签：list, mapping, dozer

我有以下情况：

```
class A {
   private String name;
   private List<R> rs = new ArrayList<R>();
   //get, set
}

class R {
   private String content;
   //get, set
}

class AH {
   private String name;
   private List<RH> rs = new ArrayList<RH>();
   //get, set
}

class RH {
   private String content;
   //get, set
} 
```

如何配置推土机不仅将名称字段（已正确映射）从 A 映射到 AH，而且还自动将 R 的集合映射到 RH 的集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:20:47.617

Dozer 会自动处理这个问题。我的错，没有吸气剂和二传手。

# tomcat - myeclipse休息后tomcat没有启动

> ID：12279123
> 
> 赞同：0
> 
> 时间：2012-09-05T10:11:39.817
> 
> 标签：tomcat, myeclipse

我一直有以下问题。有时，myEclipse 被阻塞。所以我不得不通过 Windows 上的任务管理器关闭它。当我重新打开它并想启动tomcat时，我遇到了这个问题。Tomcat 没有说明，控制台向我显示此消息：

```
only one address use is allowed and tells that the adress is already in use

StandardServer.await: create[8005]: 
java.net.BindException: Address already in use: JVM_Bind
    at java.net.PlainSocketImpl.socketBind(Native Method) 
```

我该如何处理这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:16:45.600

实际上，您的 tomcat 可能没有弯腰，只需转到任务管理器并在那里检查，任何 javaw 或 etc 的实例仍在运行，这是导致此错误的原因。

# parsing - 要解析电子邮件的 html，请获取所有 img 标签并将 src 值替换为我想要的图像的 url。

> ID：12279125
> 
> 赞同：1
> 
> 时间：2012-09-05T10:11:40.687
> 
> 标签：parsing, c#-4.0, xhtml

我必须解析电子邮件的 html，获取所有 img 标签并将 src 值替换为我想要的图像的 url。我在以下链接上有一些代码： [更改 src 属性 <img>](https://stackoverflow.com/questions/9381701/changing-src-attributes-img)

但这不起作用。有人可以帮我处理这段代码吗？

# c++ - 从 GetAdaptersAddresses 返回的 ERROR_INSUFFICIENT_BUFFER

> ID：12279135
> 
> 赞同：0
> 
> 时间：2012-09-05T10:12:13.357
> 
> 标签：c++, winapi

使用以下代码，或多或少从[GetAdaptersAddresses 的 MSDN 示例](http://msdn.microsoft.com/library/windows/desktop/aa365915%28v=vs.85%29.aspx)复制粘贴，我得到返回值 122，这意味着 ERROR_INSUFFICIENT_BUFFER（根据[此系统错误代码列表](http://msdn.microsoft.com/library/windows/desktop/ms681382%28v=vs.85%29.aspx)）。

```
ULONG outBufLen = 150000;   // Tried for different (large) values here...
PIP_ADAPTER_ADDRESSES pAddresses = (IP_ADAPTER_ADDRESSES *) malloc(outBufLen);
DWORD dwRetVal = GetAdaptersAddresses(AF_INET, 0, NULL, pAddresses, &outBufLen);
// ....
free(pAddresses); 
```

GetAdaptersAddresses 的文档未将 ERROR_INSUFFICIENT_BUFFER 列为预期返回值之一。（它列出了 ERROR_BUFFER_OVERFLOW，它应该将 outBufLen 调整为所需的值，但保持不变）。

相反，使用 GetAdaptersInfo 会导致相同的症状。

此错误不会发生在我的开发机器上，而是在一个虚拟和一个真正干净的 Windows 7 x86 SP1 安装上（添加了 VC++ 可再发行组件）。

作为一个 c++ 新手，我做错了吗？什么可能导致此错误以及如何解决？=)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T10:59:46.363

首先，您可以 - 正如其他人建议的那样 - 进行两次调用，找出所需的缓冲区大小，然后执行查询本身。特别是如果您看到错误，您的第一次尝试是询问 API 它预期的大小。

其次，您需要知道此 API 在消耗大量内存的 32 位进程中不太安全，因此缓冲区跨越到更高的 2GB 地址空间。API 可能会以一种奇怪的方式开始行动，要么是由于其自身的错误，要么是由于底层中的错误。请在此处查看有关 MS Connect 的详细信息：[`GetAdaptersAddresses`API 错误地为具有高内存消耗的进程返回没有适配器](https://connect.microsoft.com/VisualStudio/feedback/details/665383/getadaptersaddresses-api-incorrectly-returns-no-adapters-for-a-process-with-high-memory-consumption)。

错误代码不是“预期的返回值之一”这一事实告诉版本错误来自底层，并且此 API 只是在内部故障时将其传递。作为线索，禁用系统上的某些网络适配器，您可能会摆脱错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:51:38.160

Visual Studio 与我的项目一起部署了一个名为“IPHLPAPI.dll”的库，这导致了问题。删除此文件解决了它。

为什么会出现这种情况有待进一步研究=）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:23:21.303

首先，缓冲区是一块内存。

所以不足可能意味着你没有以某种方式给它足够的内存。我们可能是一块您无权访问的内存。也许地址甚至不存在。

看这个：

```
ERROR_INSUFFICIENT_BUFFER
    122 (0x7A)

    The data area passed to a system call is too small. 
```

这听起来真的像缓冲区没有足够的分配内存。或类似的。

也许

```
outBufLen 
```

必须是特定的长度，可能是内存块的大小。因为有时它不检查“名称”，而是尝试比较每个变量的大小。这个想法来自高级着色器语言。

所以我会尝试多看一点：

```
ULONG outBufLen = 150000;   // Tried for different (large) values here...
PIP_ADAPTER_ADDRESSES pAddresses = (IP_ADAPTER_ADDRESSES *) malloc(outBufLen); 
```

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:31:32.503

要知道所需的确切缓冲区大小，您只需将 NULL 传递给 pAddresses，大小将设置为所需的大小。您可能需要稍微重写您的代码以使其正常工作；

```
DWORD rv, size = 0;
PIP_ADAPTER_ADDRESSES adapter_addresses;

rv = GetAdaptersAddresses(AF_INET, 0, NULL, NULL, &size);
if (rv != ERROR_BUFFER_OVERFLOW)
    return false; // ERROR

adapter_addresses = (PIP_ADAPTER_ADDRESSES)malloc(size);

rv = GetAdaptersAddresses(AF_INET, 0, NULL, adapter_addresses, &size);
if (rv != ERROR_SUCCESS) {
    free(adapter_addresses);
    return false; // ERROR
} 
```

# php - 通过表单输入在 Yii 中设置相关模型的数组

> ID：12279137
> 
> 赞同：3
> 
> 时间：2012-09-05T10:12:22.653
> 
> 标签：php, yii

在 Yii 中，以下内容不起作用（关系数组保持为空）并且不返回错误：

```
foreach ($data as $k => $relatedModelData){
    //construct the related model from the data passed in
    ...
    $model->arrayOfRelatedModels[] = $relatedModel;
} 
```

相反，我必须这样做：

```
foreach ($data as $k => $relatedModelData){
    //construct the related model from the data passed in
    ...
    $tempArray[] = $relatedModel;
}

$model->arrayOfRelatedModels = $tempArray; 
```

我想知道为什么会这样，或者我在第一个示例中是否有一些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:46:33.053

@o_nix 是对的，你应该得到：

`Indirect modification of overloaded property`错误。这是我最近经常遇到的事情。

这意味着 Yii 通过`__get`函数返回一个魔法属性，该对象在类中并不真正存在，当你设置这个对象时，它会通过魔法`__set`函数。这意味着如果您尝试更改对象本身内部的某些内容（例如内部数组值），它不知道如何处理它们，因此它会抛出该通知并让它不理会。

为了解决这个问题，您做了正确的事情，修改一个新的局部变量并在完成后将整个对象设置为此。

**PS**
您可能将您的PHP配置设置为隐藏通知，这就是它保持沉默的原因。

希望清除它

# model - HLSL XNA 纹理定位

> ID：12279146
> 
> 赞同：2
> 
> 时间：2012-09-05T10:12:52.597
> 
> 标签：model, xna, textures, hlsl

我想在模型的某个位置放置纹理。而且我不知道我是否需要在 HLSL 或我的 xna 项目中执行此操作。我怎么能做到这一点。任何人都可以让我走上正轨吗？

编辑：我想要创建的是一种功能，因此我可以加载纹理（如徽标）并将其放在汽车上。所以我需要设置位置（可能在 hlsl 中）。我想把它画在现有的模型上。我知道我想把它放在哪个网格上。并且可以为选定的网格放置纹理。但我想在该网格的某个部分而不是整个网格上绘制纹理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:02:47.640

通过建模程序最容易做到这一点。让模型看起来你想要它然后简单地加载并按照[MSDN 教程](http://msdn.microsoft.com/en-us/library/bb197293%28v=xnagamestudio.31%29.aspx)的指示绘制它。

# java - 如何调试一个简单的网站字符串抓取器

> ID：12279152
> 
> 赞同：0
> 
> 时间：2012-09-05T10:13:19.200
> 
> 标签：java, debugging

有人对如何更好地调试有任何建议吗？我知道`line = in.readLine()`即使它不应该返回 null 。上一层我为所有人添加了一个捕获，`throwables`但不幸的是，没有打印任何错误。有人对我接下来可以尝试什么有任何建议吗？

```
public static String pullString(int id) throws IOException {

    String price;
    logError("Checkpoint 1");
    URL url = new URL("http://www.example.com");
    URLConnection con = url.openConnection();
    logError("Checkpoint 2");
    BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
    logError("Checkpoint 3");
    String line;

    while ((line = in.readLine()) != null) {
    //^ for some reason this becomes null, but on identical pages it works fine. 

          //Removed unneeded info

                return ---;
            } catch (NumberFormatException e) {
                logError("NumberFormatException");

                return null;
            }
        }
    }
    logError("left out the back");
    return null;
} 
```

# maven - maven-failsafe-plugin 失败和构建成功？

> ID：12279160
> 
> 赞同：15
> 
> 时间：2012-09-05T10:13:49.533
> 
> 标签：maven, maven-plugin, maven-failsafe-plugin

我想使用 maven-failsafe-plugin 来运行一些集成测试。如果任何测试失败，我希望 Maven 使构建失败而不是 BUILD SUCCESS。

```
Tests run: 103, Failures: 1, Errors: 0, Skipped: 26
[INFO] BUILD SUCCESS* 
```

我该如何配置它，构建不成功是什么？

我的故障保护插件配置为：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>${failsafe.version}</version>
    <configuration>
        <systemProperties>
            <CI_INTEGRATION_OVERRIDE_PATH>${basedir}/..</CI_INTEGRATION_OVERRIDE_PATH>
        </systemProperties>
        <includes>
            <include>**/integration/**/*.java</include>
        </includes>
        <excludes>
            <exclude>**/integration/**/*TestSuite.java</exclude>
        </excludes>
    </configuration>
    <executions>
        <execution>
            <id>integration-test</id>
            <goals>
                <goal>integration-test</goal>
                <goal>verify</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-02T13:36:17.377

正如 Andrew 指出的那样，正确的解决方案是按预期使用故障保护。集成测试目标专门设计为不会使构建失败。如果您想使构建失败，请致电`mvn verify`或`mvn failsafe:verify`

为了实现`verify`目标，它需要读取默认写入的集成测试的结果，以`${project.build.directory}/failsafe-reports/failsafe-summary.xml`确保生成该结果。

此外，您必须确保将`maven-failsafe-plugin`配置绑定到`integration-test`目标和部件中的`verify`目标`executions`。

未能添加其中任何一个都将导致 maven 成功构建，而不是在集成测试失败时失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:36:01.277

由于您正在运行和`mvn clean install`阶段应该正在执行。根据故障安全插件文档和目标绑定到这些阶段，所以我认为不需要额外的调用。`integration-test``verify``failsafe:integration-test``failsafe:verify``failsafe:integration-test`

尽管如此，我不确定我是否信任故障安全插件文档。今年早些时候，我为某人[回答了一个类似的问题。](https://stackoverflow.com/a/9949341/944849)事实证明，他必须明确地将每个目标绑定到正确的阶段，然后故障保护按预期工作。可能值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T08:00:34.267

解决方案。

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <configuration>
    <skip>true</skip>
  </configuration>
  <executions>
    <execution>
      <id>unit-test</id>
      <phase>test</phase>
      <goals>
        <goal>test</goal>
      </goals>
      <configuration>
        <skip>false</skip>
        <excludes>
          <exclude>**/*IntegrationTest.java</exclude>
        </excludes>
      </configuration>
      </execution>
      <execution>
        <id>integration-test</id>
        <phase>integration-test</phase>
        <goals>
          <goal>test</goal>
        </goals>
        <configuration>
          <skip>false</skip>
          <enableAssertions>false</enableAssertions>
          <includes>
            <include>**/*IntegrationTest.java</include>
          </includes>
          <systemPropertyVariables>
            <integration>${integration}</integration>
          </systemPropertyVariables>
        </configuration>
      </execution>
    </executions>
</plugin> 
```

# iphone - 如果sqlite数据库中有任何数据，如何检查iphone应用程序

> ID：12279169
> 
> 赞同：-2
> 
> 时间：2012-09-05T10:14:17.917
> 
> 标签：iphone, xcode, web-services

如何在应用程序启动时检查sqlite中是否有数据如果数据库中有数据，那么它应该上传其他方式正常工作的应用程序

我将使用 post 上传这些数据，并使用 php 将数据上传到服务器。

```
 + (void) getInitialDataToDisplay:(NSString *)dbPath {

CereniaAppDelegate *appDelegate = (CereniaAppDelegate *)[[UIApplication sharedApplication] delegate];

if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

    const char *sql = "select response_Id,question_id,answer_option,answer_text,update_date_time from survey_question_responses";

    sqlite3_stmt *selectstmt;
    if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

        while(sqlite3_step(selectstmt) == SQLITE_ROW) {

            NSInteger primaryKey = sqlite3_column_int(selectstmt, 0);
            Coffee *coffeeObj = [[Coffee alloc] initWithPrimaryKey:primaryKey];
            coffeeObj.question_Id = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];
            coffeeObj.answer_text = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 2)];
            coffeeObj.answer_option = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt,3)];

            coffeeObj.update_date_time = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 4)];
            int count=[appDelegate.coffeeArray count];

            NSLog(@"count is beofore getting values %d",count);

            [appDelegate.coffeeArray addObject:coffeeObj];

            int countone=[appDelegate.coffeeArray count];

            NSLog(@"count is after getting values %d",countone);

            [coffeeObj release];
        }
       }
     }
     else
    sqlite3_close(database); //Even though the open call failed, close the    database connection to release all the memory.
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:27:50.520

您可以通过以下方式获取数据库中存在的行数：

```
SELECT COUNT(*) FROM table; 
```

如果它返回 0 那么你的表是空的。

//更新...................

```
 const char *sqlQuery="Select count(*)from yourTable";
    if(sqlite3_prepare_v2(database, sqlQuery, -1, &queryStatement, NULL)==SQLITE_OK)
    {
        while (sqlite3_step(queryStatement)==SQLITE_ROW) 
        {

            const char *count=(const char *)sqlite3_column_text(queryStatement, 0);
           NSString *rowCount=[NSString stringWithCString:count encoding:NSASCIIStringEncoding];

       //here you will get the number of rows in string format;

        }

    } 
```

# python - SQLAlchemy exclude_properties 在声明式中不起作用

> ID：12279172
> 
> 赞同：1
> 
> 时间：2012-09-05T10:14:26.880
> 
> 标签：python, sqlalchemy

在声明性方法中，我想排除一个属性，当我的列名和属性名相同时，它可以正常工作。但是，如果我给出不同的名称，那么它就不起作用了。这是我的示例代码。

```
Base = declarative_base() 
class tblUser(Base):
    __tablename__ = 'tblUser'
    User_Id = Column('User_Id', String(100), primary_key=True)
    SequenceNo = Column('Sequence_No', Integer)
    FullName = Column('FullName', String(50))
    __mapper_args__ = {'exclude_properties' :['Sequence_No']}

user = tblUser()
user.User_Id = '1000001'
user.SequenceNo = 101
session.add(user)
session.commit() 
```

在上面的示例中，即使我为其分配了一些值，我也不希望在数据库中更新 SequenceNo 属性。所以我使用了 exclude_properties 但仍然更新了 db 中的值。但是，如果我将属性名称从 SequenceNo 更改为 Sequence_No （与列名相同），那么它会按照行为工作。谁能帮我？

谢谢阿迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:30:00.363

不幸的是，`__mapper_args__`很可能是错误的做法。它旨在控制现有数据库表在映射器中的反映，而不是使列“只读”。

我认为更好的方法是使用[混合属性](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/hybrid.html#module-sqlalchemy.ext.hybrid)：

```
from sqlalchemy.ext.hybrid import hybrid_property

Base = declarative_base() 
class tblUser(Base):
    __tablename__ = 'tblUser'
    User_Id = Column('User_Id', String(100), primary_key=True)
    FullName = Column('FullName', String(50))

    _Sequence_No = Column('Sequence_No', Integer)
    _local_Sequence_No = None

    @hybrid_property
    @property
    def SequenceNo(self):
        if self._local_Sequence_No is not None:
            return self._local_Sequence_No
        return self._SequenceNo

    @SequenceNo.setter
    def SequenceNo(self, value):
        self._local_Sequence_No = value 
```

原始`Sequence_No`列可通过私有属性获得，该`SequenceNo`属性拦截写入并将它们存储在实例上以供以后重用，但不会写入数据库。

# javascript - 在 onchange 和加载时触发 javascript

> ID：12279174
> 
> 赞同：0
> 
> 时间：2012-09-05T10:14:35.553
> 
> 标签：javascript, onchange, onload

我有一个当前使用“onchange”事件调用的javascript。

```
<SELECT NAME="person<?PHP echo $i; ?>" id="person<?PHP echo $i; ?>" onchange="get(<? echo $i; ?>);"> 
```

这个选择输入回复了我从下拉列表中选择的选项。如果页面已加载并且选择具有“已选择”属性以便预加载选择，则不调用 javascript。如何更改此设置，以便在加载现有选择时调用脚本，并在用户更改选项时调用脚本？

这不起作用：

```
<SELECT NAME="person<?PHP echo $i; ?>" id="person<?PHP echo $i; ?>" onchange="get(<? echo $i; ?>);" onload="get(<? echo $i; ?>);"> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:25:15.967

```
<SELECT NAME="person<?PHP echo $i; ?>" id="person<?PHP echo $i; ?>" onchange="get(<? echo $i; ?>);"> 
```

select 没有 onload 事件。您可以在 body 标签上调用 onload 函数，

```
<body onload="get(<? echo $i; ?>);"> 
```

但是要让这个函数起作用***$i***应该在 body 标签之前定义，否则它会返回一个未定义的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:18:17.597

它不起作用，因为 SELECT 没有 onload 事件。改为在 windows onload 中使用它。顺便说一句，$i 来自哪里

```
<script>
window.onload=function(){
    get(<? echo $i; ?>);

}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:21:08.447

我会使用 jQuery

```
jQuery(document).ready(function($) {

 $('select').each(function() { 
         $(this).change(function(){
             myFunction();
       });
     });

 myFunction();

}); 
```

# ember.js - 如何在使用 ember.js 提交时构建一个可以访问文本输入值的表单

> ID：12279175
> 
> 赞同：1
> 
> 时间：2012-09-05T10:14:37.487
> 
> 标签：ember.js

我正在使用最新的 ember.js 前 1.0 版，并且希望避免使用已弃用的按钮来处理简单的表单。

我有一些可行的方法，但我觉得这不是连接具有文本输入和需要访问该文本的按钮的视图的正确方法。

这是基本视图

```
{{#view PersonApp.AddPersonView}}
       {{view Ember.TextField valueBinding="username"}}
         {{#with this as username}}
           <input type="submit" value="add" {{action addPerson username}}/>
         {{/with}}
{{/view}} 
```

这是视图

```
PersonApp.AddPersonView = Ember.View.extend({
  username: null,                                                                                
  addPerson: function(event) {
    var username = event.context.username;
    if (username) {
      PersonApp.personController.addPerson(username);
      this.set('username', ''); //this does not currently work
    }
  }
}); 
```

我遇到的唯一另一个问题是我无法以通常的方式访问用户名。即 - this.get('username') 但此外我无法清除文本框值（即使它如上所示）。

我正在寻找构建这个要点的现代版本（以前版本的 ember）[https://gist.github.com/1477225](https://gist.github.com/1477225)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:07:31.740

我在这里看到三个问题（也许还有更多）。首先，username 不会是 中的字段`event.context`，但实际上是事件上下文。其次，我相信您需要在 中指定`view.username`，`valueBinding`否则控制器是该属性的默认主页（我相信）。然后，要将其设置为初始状态，您需要将其设置为 null。第三，您的操作目标将是路由器，因此您需要将视图指定为目标。

这应该有效：

```
{{#view PersonApp.AddPersonView}}
   {{view Ember.TextField valueBinding="view.username"}}
     {{#with this as username}}
       <input type="submit" value="add" {{action addPerson username target="this"}}/>
     {{/with}}
{{/view}}

PersonApp.AddPersonView = Ember.View.extend({
  username:  null                                                                               
  addPerson: function(event) {
    var username = event.context;
    if (username) {
       this.get('controller').addPerson(username);
       this.set('username', null); 
    }
 } 
```

});

此外，创建新人员的更好方法是创建一个空白人员模型，将控制器和视图绑定到该模型，然后保存记录，然后将绑定设置回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:41:42.533

即使使用 Gidrius 的代码，您也可以立即进行验证然后传递数据。您唯一需要做的就是在提交处理方法中编写验证代码。或者，因为我们无论如何都在谈论客户端验证，您可以在字段值更改或模糊时进行，这将给用户几乎即时的反馈，了解他正在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T01:22:06.303

我仍然无法让 this.get('username') 工作，但我最终得到了以下结果

```
{{#view PersonApp.AddPersonForm}}
       {{view Ember.TextField valueBinding="username"}}
       <input type="submit" value="add" {{action addPerson this}}/>
{{/view}}

PersonApp.AddPersonForm = Ember.View.extend({
  addPerson: function(event) {
    var username = event.context.username;
    if (username) {
      PersonApp.personController.addPerson(username);
      event.context.set('username', '');
    }
  }    
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:51:09.233

可能有点太晚了，但可能对其他人有帮助。

通常表单字段值将绑定到控制器或模型，因此您只需要在控制器中拥有一个提交函数，这样每当调用函数时，您都可以通过绑定访问字段。

假设您使用的是最新的 pre.4 ember，这就是一切的样子

**更新**

```
// DOM part
<form {{action submitForm on="submit"}}>
    {{view Ember.TextField valueBinding="username"}}
    <button type="submit">add</button>
</form> 
```

这是一个控制器

```
PersonApp.PersonController = Ember.ArrayController({
  username: '',
  submitForm: function() {
    var u = this.get('username'); // saving value to variable
    this.set('username',''); // sets username to ''
    console.log(u); // will output saved username
  }
}); 
```

# objective-c - 获取所选时区的时间和日期？

> ID：12279177
> 
> 赞同：0
> 
> 时间：2012-09-05T10:14:41.950
> 
> 标签：objective-c

我尝试了下面的代码片段，我得到了系统的当前日期和时间，而不是选定的时区代码。

```
NSDate *now = [NSDate date];
NSCalendar *gregorian=[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[gregorian setTimeZone:[NSTimeZone timeZoneWithName:selectedzone]];

NSDateComponents* timeZoneComps = [gregorian components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit|NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit|NSTimeZoneCalendarUnit fromDate:now];

NSDate *selectedDate=[gregorian dateFromComponents:timeZoneComps];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterFullStyle];
[formatter setDateFormat:@"dd-MM-yyyy HH:mm:ss "];
NSString *strSelectedDate= [formatter stringFromDate:selectedDate];
setZone.text = strSelectedDate;` 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:32:23.373

[NSDate date] 返回代表当前日期和时间的日期对象，无论您身在何处。NSDate 不受地点或时区的限制。只有一个 NSDate 代表现在或任何其他时刻，而不是每个时区的不同日期对象。因此，您不应尝试在时区之间转换日期。

```
NSDate objects represent an absolute instant in time. Consider the following example of how two date representations in different time zones (9/9/11 3:54 PM in Paris and 9/9/11 11:54 PM in Sydney) are actually the same date.
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterShortStyle];
    [formatter setTimeStyle:NSDateFormatterShortStyle];
    [formatter setTimeZone:[NSTimeZone timeZoneWithName:@"Europe/Paris"]];
    NSDate *aDate = [formatter dateFromString:@"9/9/11 3:54 PM"];
    [formatter setTimeZone:[NSTimeZone timeZoneWithName:@"Australia/Sydney"]];
    NSDate *anotherDate = [formatter dateFromString:@"9/9/11 11:54 PM"];
    NSLog(@"%@",anotherDate);
    if ([aDate isEqualToDate:anotherDate]) {
        NSLog(@"How about that?");
    } 
```

在输出日期时，请记住 NSDate 的描述方法返回 GMT 时间，您需要使用 NSDateFormatter 从日期创建表示巴黎、悉尼等地当地时间的日期字符串：

```
NSDate *now = [NSDate date];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterShortStyle];
[formatter setTimeStyle:NSDateFormatterShortStyle];
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"Australia/Sydney"]];
NSLog(@"%@",[formatter stringFromDate:now]); //--> 9/9/11 11:54 PM
[formatter setTimeZone:[NSTimeZone timeZoneWithName:@"Europe/Paris"]];
NSLog(@"%@",[formatter stringFromDate:now]); //-->  9/9/11 3:54 PM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:18:34.393

```
[dateFormatter setDateFormat:@"EEE, d MMM yyyy HH:mm:ss z"]; 
```

如果您不想显示时区，请从格式字符串中删除尾随的“z”字符。

编辑

另一方面，如果您只想显示时区名称，只需将“z”设为大写即可。

编辑

小写“z”适用于所有其他时区，但不幸的是 GMT 是一个特例。因此，最简单的做法是省略“z”并将“GMT”附加到格式化日期。

# oracle11g - 是否可以中止执行查询而不在 IBatis 中设置“超时”属性？

> ID：12279180
> 
> 赞同：0
> 
> 时间：2012-09-05T10:14:46.563
> 
> 标签：oracle11g, ibatis

考虑一下，
从数据库中检索数据（由于数据量较大）需要一分钟以上的时间。
我知道，我们可以在选择标签中设置“timeout”属性（仅针对单个查询）或在设置标签（SqlMapConfig.xml - 对于所有查询）中设置“defaultStatementTimeout”属性，以强制终止执行中的查询。

```
<select id='uniqueName' parameterClass='java.util.Map' resultClass = "java.lang.String" timeout="60"> 
```

或者

```
<settings useStatementNamespaces="false" defaultStatementTimeout="60"/> 
```

通过上述配置，IBatis 会抛出“用户取消请求”错误并终止执行。

我们还有其他方法可以终止执行吗？

**我的场景是：**

当用户请求 3 年的数据时，从数据库中获取数据需要一分钟多的时间。
同时，当用户请求 1 天的数据或发送“取消”请求时，我不得不强制终止之前的执行（3 年数据检索），因为即使用户数量有限，它也会影响性能。
**注意**
我没有使用上述任何设置。

请为此提供解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:34:54.937

您可以通过修改与数据库用户关联的配置文件来设置资源限制。

# spring - 需要将从resful web service的URI中获取的参数值和数据类型设置成HashMap

> ID：12279192
> 
> 赞同：1
> 
> 时间：2012-09-05T10:15:40.453
> 
> 标签：spring, rest, spring-mvc

```
@RequestMapping(value = "/{methodName}/{responseType}", method = RequestMethod.GET)
public ModelAndView execute(@PathVariable String methodName, @PathVariable String responseType, 
        HttpServletRequest request, HttpServletRequest response){               
    Map<String,String> yesMap = new HashMap<String,String>();
} 
```

如上面的代码所示，我需要获取从 {responseType} 传递的参数的数据类型，并在 yesMap 中针对参数值设置相同的数据类型。

```
String param=request.getParameter("id"); 
```

正在返回空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:54:31.353

在您上面发布的代码中，follwign 调用

```
yourRootUrl/cheese/stilton 
```

将导致这些在您的“执行”方法中为真：

```
methodName.equals("cheese");
responseType.equals("stilton"); 
```

我不明白你想要达到什么目的。您的参数名称令人困惑。

它非常简单，您已经声明了两个字符串参数，这要归功于 spring 可以是路径变量。

这是一个 GET 请求，因此 getParamter 不起作用，请尝试使用`String param=request.getAttribute("id");`与您的路径变量完全无关的。或者不同的 Ananotion [RequestParam](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/RequestParam.html)像这样：

```
@RequestMapping(value = "/{methodName}/{responseType}", method = RequestMethod.GET)
public ModelAndView execute(@PathVariable String methodName, @PathVariable String responseType, @RequestParam int id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:44:10.163

> 需要获取从 {responseType} 传递的参数的数据类型

它的类型将始终`String`与您收集它时的`responseType`类型相同`String`。

```
get data types of parameters passed from {responseType} and set the same in yesMap against parameter values 
```

我认为`yesMap.put("String",responseType);` 会的。

# iphone - 使用透视投影时低分辨率渲染到纹理结果

> ID：12279195
> 
> 赞同：6
> 
> 时间：2012-09-05T10:15:57.547
> 
> 标签：iphone, opengl-es, opengl-es-2.0

我目前正在为 iPhone 开发一个相机应用程序，在该应用程序中我获取相机输入，将其转换为 OpenGL 纹理，然后将其映射到 3D 对象（为了简单起见，目前是透视投影中的平面）。在将相机输入映射到这个 3D 平面后，我将这个 3D 场景渲染到一个纹理，然后将其用作正交空间中平面的新纹理（在我的片段着色器中应用额外的过滤器）。

只要我将所有内容都保留在正交投影中，我的渲染纹理的分辨率就相当高。但是从我把我的飞机放在透视投影的那一刻起，我的渲染纹理的分辨率就很低了。

比较：

![分辨率比较](../Images/f29a228c9ec382f4fbf8c85e69a186fd.png)

如您所见，与其他两个相比，最后一个图像的分辨率非常低。所以我猜我做错了什么。

我目前没有在我的任何帧缓冲区上使用多重采样，我怀疑我是否需要它来解决我的问题，因为正交场景工作得很好。

我渲染的纹理是 2048x2048（最终将作为图像输出到 iPhone 相机胶卷）。

以下是我认为可能相关的源代码的一些部分：

创建输出到屏幕的帧缓冲区的代码：

```
// Color renderbuffer
glGenRenderbuffers(1, &colorRenderBuffer);
glBindRenderbuffer(GL_RENDERBUFFER, colorRenderBuffer);
[context renderbufferStorage:GL_RENDERBUFFER 
                 fromDrawable:(CAEAGLLayer*)glView.layer];

// Depth renderbuffer
glGenRenderbuffers(1, &depthRenderbuffer);
glBindRenderbuffer(GL_RENDERBUFFER, depthRenderbuffer);
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, width, height);

// Framebuffer
glGenFramebuffers(1, &defaultFrameBuffer);
glBindFramebuffer(GL_FRAMEBUFFER, defaultFrameBuffer);

// Associate renderbuffers with framebuffer
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, 
      GL_RENDERBUFFER, colorRenderBuffer);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, 
      GL_RENDERBUFFER, depthRenderbuffer); 
```

TextureRenderTarget 类：

```
void TextureRenderTarget::init()
{
    // Color renderbuffer
    glGenRenderbuffers(1, &colorRenderBuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, colorRenderBuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_RGB8_OES, 
           width, height);

    // Depth renderbuffer
    glGenRenderbuffers(1, &depthRenderbuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, depthRenderbuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, 
           width, height);

    // Framebuffer
    glGenFramebuffers(1, &framebuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);

    // Associate renderbuffers with framebuffer
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, 
          GL_RENDERBUFFER, colorRenderBuffer);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, 
          GL_RENDERBUFFER, depthRenderbuffer);

    // Texture and associate with framebuffer
    texture = new RenderTexture(width, height);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, 
          GL_TEXTURE_2D, texture->getHandle(), 0);

    // Check for errors
    checkStatus();
}

void TextureRenderTarget::bind() const
{
    glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, colorRenderBuffer);
}

void TextureRenderTarget::unbind() const
{
    glBindFramebuffer(GL_FRAMEBUFFER, 0);
    glBindRenderbuffer(GL_RENDERBUFFER, 0);
} 
```

最后，关于我如何创建渲染纹理并用像素填充它的片段：

```
void Texture::generate()
{
    // Create texture to render into
    glActiveTexture(unit);
    glGenTextures(1, &handle);
    glBindTexture(GL_TEXTURE_2D, handle);

    // Configure texture
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
}

void Texture::setPixels(const GLvoid* pixels)
{
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, 
         GL_UNSIGNED_BYTE, pixels);
    updateMipMaps();
}

void Texture::updateMipMaps() const
{
    glBindTexture(GL_TEXTURE_2D, handle);
    glGenerateMipmap(GL_TEXTURE_2D);
}

void Texture::bind(GLenum unit)
{
    this->unit = unit;

    if(unit != -1)
    {
        glActiveTexture(unit);
        glBindTexture(GL_TEXTURE_2D, handle);
    }
    else
    {
        cout << "Texture::bind -> Couldn't activate unit -1" << endl;
    }
}

void Texture::unbind()
{
    glBindTexture(GL_TEXTURE_2D, 0);    
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T08:54:45.237

我会假设纹理映射与透视投影不精确。

你能用检查器替换相机胶卷图像（1px 单元格大小的国际象棋网格）吗？然后比较正交和透视投影中的渲染检查器 - 网格不应模糊。如果是，那么问题出在投影矩阵中——它需要一些偏差来进行直接的纹理到像素的映射。

如果您有设备，您可以通过 XCode 中的功能查看渲染步骤`OpenGL frame capture`- 您将看到图像何时变得模糊。

至于 mipmapping，将其用于动态创建的纹理并不好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T21:30:18.483

模糊可能是由于平面位于屏幕坐标中的半个像素处。由于从正交变换到透视变换会改变平面的位置，因此平面可能不会位于两个变换之间的相同屏幕坐标处。

当您将 UIImageView 从帧原点 (0.0,0.0) 移动到标准分辨率显示器上的 (0.5,0.5) 和视网膜显示器上的 (0.25,0.25) 时，会发生类似的模糊。

在这种情况下，您的纹理非常高分辨率的事实可能无济于事，因为实际采样的像素数量是有限的。

尝试在屏幕 x,y 坐标中将平面移动一小段距离，看看模糊是否消失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T12:44:02.593

我终于通过合并渲染过程的第一步和第二步解决了我的问题。

第一步用于裁剪和翻转相机的纹理并将其渲染为新的纹理。然后这个新渲染的纹理被映射到一个 3D 平面上，结果被渲染到一个新的纹理上。

我通过改变我的 3D 平面的纹理坐标合并了这两个步骤，这样我就可以直接在这个平面上使用原始的相机纹理。

我不知道导致两个渲染纹理之间质量损失的确切原因是什么，但作为对未来的提示：不要渲染到纹理并将该结果重用于新的纹理渲染。将所有这些合并在一起可以提高性能，并且还可以避免色偏问题。

# c++ - BOOST 单元测试堆栈溢出

> ID：12279198
> 
> 赞同：1
> 
> 时间：2012-09-05T10:16:05.040
> 
> 标签：c++, visual-studio-2010, boost-test

我现在正在使用[Boost Unit Test](http://www.boost.org/doc/libs/1_35_0/libs/test/doc/components/utf/index.html)为我的项目执行单元测试。每次运行单元测试时，都会遇到内存堆栈问题。我调试到 BOOST 库的源代码，发现问题来自于在 unit_test_suite.hpp 文件中调用以下代码：

```
void
traverse_test_tree( test_unit_id id, test_tree_visitor& V )
{
  global_i = global_i + 1;
   std::cout<<global_i<<std::endl;
    if( ut_detail::test_id_2_unit_type( id ) == tut_case )
        traverse_test_tree( framework::get<test_case>( id ), V );
    else
        traverse_test_tree( framework::get<test_suite>( id ), V );
} 
```

我从VC10得到的错误信息是：

```
Unhandled exception at 0x779815de in  TestApplication.exe: 0xC00000FD: Stack overflow. 
```

我想知道测试程序有什么问题。谢谢！

**编辑**根据我查看代码的建议，发生了非常奇怪的事情：如果测试套件是在与 main() 相同的程序中定义的，它可以工作；但是，如果测试套件来自 .dll，则会发生错误。我列出以下代码来说明我的问题：

```
boost::unit_test::test_suite* main_global_test_suite;
     void Hellotestdll()
        {
            int i= 1;
            int j= 2;
            BOOST_CHECK(i == j);

        }
        boost::unit_test::test_suite* get_abc_test_suite()
        {
            test_suite* ts = BOOST_TEST_SUITE( "unit_geometric" );
            ts->add( BOOST_TEST_CASE( &Hellotestdll ) );
            return ts;
        }

int main( int argc, char* argv[] )
{
    try 
    {
        /**
        * Step 1\. obtain options
        */
        char* optionLine[1024];
        int len;
        len = obtain_options(optionLine, argc, argv);
        /**
        * Step 2\. perform unit test based on user's options
        */
        int test_status=0;  
        main_global_test_suite = get_abc_test_suite();  
        test_status = unit_test_main(run_global_test_suite, len, optionLine);
        return test_status;

    }
    catch(std::exception& e)
    {
        std::cout << e.what() << std::endl;
        return 1;
    }   
    catch (const std::string& s) 
    {
        std::cout << s << std::endl;
        return 1;
    }
    catch (...)
    {
        return 1;
    }

} 
```

上面的代码工作得很好。但如果测试套件来自 .dll，例如：

```
// dll_header.h
namespace abc
{

    ABC_EXPORT boost::unit_test::test_suite* get_geometric_test_suite();
}
// dll_header.cpp
namespace abc
{

    using namespace boost;
    using namespace boost::unit_test;

     void Hellotestdllabc()
       {
        int i= 1;
        int j= 2;
               BOOST_CHECK(i == j);
     }

    boost::unit_test::test_suite* get_abc_test_suite()
    {
        test_suite* ts = BOOST_TEST_SUITE( "unit_abc" );

        ts->add( BOOST_TEST_CASE( &Hellotestdllabc ) );

        return ts;
    }

} 
```

然后，如果我使用以下代码调用此测试套件：

```
 int main( int argc, char* argv[] )
    {
         ............
            /**
            * Step 2\. perform unit test based on user's options
            */
            int test_status=0;  
            main_global_test_suite = abc::get_abc_test_suite();  
            test_status = unit_test_main(run_global_test_suite, len, optionLine);
            return test_status;

        } 
```

恼人的堆栈溢出错误将会发生。

**问题总结**

```
 (1) boost dll with MDd (Succeed) 
```

如果我将 boost 单元测试库（带有定义`-DBOOST_ALL_DYN_LINK -DBOOST_TEST_NO_MAIN -DBOOST_TEST_DYN_LINK -DBOOST_ALL_NO_LIB`）和正在运行的可执行程序与相同的动态运行时库（多线程调试 Dll（MDd））链接起来，它将起作用。

```
(2) boost dll with MTd (Failed) 
```

如果 boost 单元测试库（带定义`-DBOOST_ALL_DYN_LINK -DBOOST_TEST_NO_MAIN -DBOOST_TEST_DYN_LINK -DBOOST_ALL_NO_LIB`）和运行的可执行程序编译链接同一个静态运行时库（Multi-thred Debu (MTd)），我会崩溃，但崩溃不同于我在上面报道的那个： ![在此处输入图像描述](../Images/6e59e97f83b2b221d099871b5968441a.png)

```
(3) boost static lib with MDd (Failed) 
```

如果 boost 构建为静态库（具有 的定义`-DBOOST_TEST_NO_MAIN -DBOOST_ALL_NO_LIB`），并且 boost 库和可执行程序都使用相同的动态运行时库 (MDd) 构建。将发生以下崩溃： ![在此处输入图像描述](../Images/5b492c77ef25c71125621a429ba2478a.png)

```
(4) boost static lib with MTd (Failed) 
```

如果 boost 构建为静态库（具有 的定义`-DBOOST_TEST_NO_MAIN -DBOOST_ALL_NO_LIB`），并且 boost 库和可执行程序都使用相同的静态运行时库 (MTd) 构建。将发生以下崩溃： ![在此处输入图像描述](../Images/50aeed72e408660c6872d71ea444b493.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T10:16:57.217

```
 ABC_EXPORT boost::unit_test::test_suite* get_geometric_test_suite(); 
```

单元测试的重点是尽早发现代码中的问题。这行得通，只是你**很**早就发现了问题。甚至让单元测试正常运行还为时过早。

DLL 中返回指向 C++ 对象的指针的函数通常是一个问题。只有当 C++ 对象的布局与编译器在编译 DLL 和 EXE 时所做的假设完全匹配时，它才会有一个好的结局。并且该对象位于两个模块都可以访问的堆上，这是必需的，因为 DLL 创建了对象并且您的 EXE 需要删除它。

要允许正确删除对象，DLL 和 EXE*必须*共享相同的 CRT 版本。当您使用 /MT 构建程序并要求 CRT 的静态版本时，您会遇到麻烦。相关的编译器设置是 C/C++、代码生成、运行时库设置。您的 Debug 配置必须使用 /MDd，您的 Release 配置必须使用 /MD。对于 EXE 和 DLL 项目，以及编译时的 Boost 库。如果是 /MTd 和 /MT，那么 DLL 将有自己的 CRT 副本链接到其中，并将使用自己的堆进行分配。EXE 无法正确删除该对象，因为它使用*了另一个*堆。无论如何，这样做会产生未定义的行为。任何事情都有可能发生，只有在比 XP 更新的 Windows 版本上运行程序时，您才会幸运。当您运行带有调试器的单元测试时，Vista 及更高版本将使用调试堆，当它注意到传递给 ::operator delete 的指针无效时，它会调用断点。一定要让链接器自动找到正确的 Boost .lib 来链接，不要自己强求。

对象布局更有可能是您的问题，不幸的是更难诊断。通过使用完全相同的编译器设置构建您的 EXE 和 DLL，您可以避免麻烦。附加要求它们必须与用于构建 Boost 库的设置相匹配。这当然是困难的部分，需要一台时间机器。特别是 _HAS_ITERATOR_DEBUGGING 宏是一个麻烦制造者，像 std::vector 这样的基本 STL 类将具有取决于该宏的值的不同布局。

我意识到这非常模糊，但问题中没有足够的信息来真正诊断这个问题。您可以做的一个非常基本的检查是将返回的 boost::unit_test::test_suite 指针放在监视表达式中。如果您在进入 Boost 代码时突然看到该对象的成员发生了变化，那么您就*知道*您遇到了对象布局问题。接下来发生的事情是高度不可预测的，堆栈溢出肯定是可能的。另一个诊断是使用 Debug + Windows + Registers 窗口。确保跨函数时 ESP 寄存器值稳定。

# java - 我可以使用在 DispatcherServlet 上下文中声明的 Hibernate 会话工厂而不是 hibernate.cfg.xml 吗？

> ID：12279199
> 
> 赞同：3
> 
> 时间：2012-09-05T10:16:06.813
> 
> 标签：java, spring, hibernate, spring-mvc, intellij-idea

在我之前的 Spring MVC 项目中，我使用 Hibernate 作为 JPA 的提供者。我不必创建`hibernate.cfg.xml`文件，因为我已经在我的 Spring DispatcherServlet 上下文文件中声明了 Hibernate Session Factory 并且我已经声明了`persistence.xml`文件。

在我的新项目中，我基本上想使用 Hibernate。我已经从我的数据库结构中生成了实体类。但是在 IDEA DAO 中没有生成类，为什么？我可以以某种方式在 IDEA 中生成 DAO 类吗？在生成这个 POJO 期间，我还在 DispatcherSerlvet 上下文文件中创建了 Hibernate Session Factory 的实体类。

我创建了自己的简单 DAO 类来检查数据库中的持久类。但是出现了这个错误：

```
Error in creating SessionFactory object./hibernate.cfg.xml not found 
```

所以我假设我必须创建`hibernate.cfg.xml`. 如果是的话，我是否必须在我的 DispatcherServlet 上下文文件中保留 Hibernate Session Factory 声明？

**编辑**

```
<!-- Hibernate session factory -->
<beans:bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">

    <beans:property name="dataSource">
        <beans:ref bean="dataSource" />
    </beans:property>

    <beans:property name="hibernateProperties">
        <beans:props>
            <beans:prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</beans:prop>
            <beans:prop key="hibernate.show_sql">true</beans:prop>
            <beans:prop key="hibernate.hbm2ddl.auto">update</beans:prop>
            <beans:prop key="hibernate.connection.url">jdbc:mysql://localhost/finances</beans:prop>
            <beans:prop key="hibernate.connection.driver_class">com.mysql.jdbc.Driver</beans:prop>
            <beans:prop key="hibernate.connection.username">root</beans:prop>
            <beans:prop key="hibernate.connection.password">root</beans:prop>
        </beans:props>
    </beans:property>

    <beans:property name="annotatedClasses">
        <beans:list>
            <beans:value>my.package.FirstClass</beans:value>
            <beans:value>my.package.SecondClass</beans:value>
        </beans:list>
    </beans:property>
</beans:bean>
<!-- Hibernate session factory end -->

<beans:bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <beans:property name="sessionFactory" ref="sessionFactory" />
</beans:bean> 
```

**编辑#2**

我已将带注释的类和连接定义移动到`hibernate.cfg.xml`文件中。我已经删除了会话工厂定义以及`Transaction Manager`spring 配置文件中的定义。我在我的数据库中的简单持久对象工作正常。那么也许这是使用 Spring MVC 和 Hibernate 的最短方法？但是呢`Transaction Manager`？这是其他操作或操作所要求的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T10:44:48.153

> 我不必创建 hibernate.cfg.xml 文件，因为我已经在 Spring DispatcherServlet Context 文件中声明了 Hibernate Session Factory，并且我已经声明了 persistence.xml 文件。

AFAIK 使用 JPA 时，我们需要`entityManagerFactory`在 Spring 配置文件中定义，JPA 实现由`jpaVendorAdapter`属性决定。`persistence.xml`用于定义持久性单元。`hibernate.cfg.xml`JPA 不需要。

> 在我的新项目中，我基本上想使用 Hibernate。

如果要直接使用hibernate，则需要在spring配置文件或hibernate.cfg.xml文件中定义会话工厂，如

```
<bean id="mySessionFactory" class="org.springframework.orm.hibernate3.
    annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="myDataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.foo.Bar</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect"> org.hibernate.dialect.HSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
            </props>
        </property>
    </bean> 
```

您正在混合 JPA 和 Hibernate 配置。
以下链接可能会帮助您避免一些混淆
[Spring + Hibernate](http://viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/)
[Spring + JPA (with Hibernate implementation)](http://www.roseindia.net/hibernate/hibernate4/SpringHibernateJpa.shtml)

* * *

**编辑：**使用`AnnotationSessionFactoryBean`注释来定义映射

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"> 
```

# android - sqlite android数学函数

> ID：12279205
> 
> 赞同：0
> 
> 时间：2012-09-05T10:16:50.480
> 
> 标签：android, sqlite

我需要在 SQLite 中为一个 Android 应用程序构建一个查询，我读到它不可能在查询中使用数学函数，有任何方法可以做到这一点，比如加载扩展或类似的东西。

任何回答都是欢迎的，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:50:59.797

SQLite 本身允许[添加用户定义的函数](http://www.sqlite.org/c3ref/create_function.html)，但这并没有在 Android API 中公开。

您必须使用 NDK：[如何在 SQLITE 中创建用户定义的函数？](https://stackoverflow.com/questions/7867099/how-to-create-a-user-defined-function-in-sqlite)

# bash - 使用 bash 将一行中的字符串分配给变量

> ID：12279207
> 
> 赞同：4
> 
> 时间：2012-09-05T10:17:00.727
> 
> 标签：bash, sed, awk

我有以下文本文件，我需要比较每一行的值，即项目 2-4 与项目 5-7。我在这个上坚持使用 bash/awk/sed。

样本数据：

```
[hartford tmp]$ cat flist
a1 1 2 3 x y z
b1 3 2 1 z y x
c1 1 2 3 1 2 3
d1 4 5 6 6 5 4
e1 a b c a b c
f1 x y z x y z 
```

它适用于以下脚本，但速度慢得令人难以忍受，可能是因为所有的`echo`s.

```
[hartford tmp]$ cat pdelta.sh
#!/bin/bash

cat flist |while read rec; do
    f1="$(echo $rec | awk '{ print $1 }')"
    f2="$(echo $rec | awk '{ print $2 }')"
    f3="$(echo $rec | awk '{ print $3 }')"
    f4="$(echo $rec | awk '{ print $4 }')"
    f5="$(echo $rec | awk '{ print $5 }')"
    f6="$(echo $rec | awk '{ print $6 }')"
    f7="$(echo $rec | awk '{ print $7 }')"

    if [[ "x${f2} x${f3} x${f4}" != "x${f5} x${f6} x${f7}" ]]; then
            echo "$f1 DOES NOT MATCH"
    fi
done 
```

运行时，输出正是我正在寻找的，但是在处理超过 50k 行的文件时它太慢了。

```
[hartford]$ ./pdelta.sh
a1 DOES NOT MATCH
b1 DOES NOT MATCH
d1 DOES NOT MATCH 
```

有什么更有效的方法来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T10:22:04.033

您可以使用`awk`输出所有匹配的 id：

```
awk '{ if ($2 == $5 && $3 == $6 && $4 == $7) { print $1 } }' < flist 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T10:22:31.480

您可以使用`read`分配变量：

```
$ while read f1 f2 f3 f4 f5 f6 f7; do stuff; done <flist 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T12:23:22.477

一些修复：

1.  不要`cat`将单个文件放入管道；只需重定向循环的标准输入。
2.  `read`可以将每一行拆分为适当的变量。
3.  由于您使用的是 bash`[[...]]`构造，因此您不需要使用在可能为空的字符串前加上单个字符的旧技巧。直接比较对应值即可。

所以你的循环减少到

```
while read f1 f2 f3 f4 f5 f6 f7; do
    if [[ $f2 != $f5 || $f3 != $f6 || $f4 != $f7 ]]; then
        echo "$f1 DOES NOT MATCH"
    fi
done < flist 
```

您还可以使用数组来进一步减少它

```
while read -a f; do
    if [[ ${f[@]:1:3} != ${f[@]:4:3} ]]; then
        echo "${f[0]} DOES NOT MATCH"
    fi
done < flist 
```

该`${f[@]:x:y}`符号扩展到`y`从 index 开始的元素`x`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T10:24:01.127

使用 perl：

```
perl -lane 'print $F[0] if @F[1..3] ne @F[4..6]' input_file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:32:28.273

Python解决方案：

```
import sys

for line in sys.stdin:
    f1, f2, f3, f4, f5, f6, f7 = line.split()
    if not (f2, f3, f4) == (f5, f6, f7):
        print f1, "does not match" 
```

用法：

```
$ python f.py < flist
a1 does not match
b1 does not match
d1 does not match 
```

# asp.net-mvc-3 - 你如何清除日期框值？

> ID：12279208
> 
> 赞同：-3
> 
> 时间：2012-09-05T10:17:00.893
> 
> 标签：asp.net-mvc-3, datebox

你如何清除`datebox`价值？默认情况下，加载时 my`datebox`具有以下数据： `"01/01/0001 00:00:00"`

从视图：

```
@Html.TextBoxFor(m => m.Date, new { @id = "date", @name = "date", @data_role =     "datebox",@value="", @data_options = " {'mode':'calbox' }", @onload="this.value='';" }) 
```

从控制器：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:30:20.503

如果您想在文本框中有一个空字符串（如果尚未给出该值），那么您必须在模型中使用 Nullable DateTime：

```
class Model {
  public DateTime? Date { get;set; }
} 
```

视图中的调用保持不变：

```
@Html.TextBoxFor(m => m.Date) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:25:46.133

您可以为此使用 jQuery：

```
$(function(){
  $("#date").text("");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:34:00.470

你可以用

```
 $(document).ready(function(){
       $("#Date").val("");
     }); 
```

注意：如果您在您的模型中将日期时间值设置为当前日期时间，或者将其设为可空并将其设置为空（或不设置），则效果会更好

# c# - 通过将值插入表单的 url 参数创建测试模式

> ID：12279209
> 
> 赞同：5
> 
> 时间：2012-09-05T10:17:06.267
> 
> 标签：c#, asp.net-mvc-3, testing, mocking, query-string

由于我对 Web 应用程序开发相当陌生，因此我目前在实现某些测试功能时遇到了一些困难。

作为我目前正在工作的项目的一部分（一个用于处理付款的 MVC 3 Web 应用程序），我被要求创建一个可以通过 URL 以这种方式访问​​的测试模式：

```
http://websiteurl?testmode=1 
```

这背后的想法是，当一个开发团队将 testmode 参数添加到 URL 时，会自动生成一组表单值，以便在每次测试应用程序时节省输入数据的时间。

目前我在控制器中有一个 if 语句，它使用 Request.QueryString 来设置下面的参数是我当前使用的代码：

```
if (Request.QueryString.AllKey.Contains("tm"))
{
     if (Request.QueryString["tm"] == 1)
     {
         insert values to be generated
     }
} 
```

鉴于上下文，如果有的话，实现这一目标的最佳方法是什么？

是否可以使用 Moq 或 RhinoMocks 等模拟框架来创建假存储库，而不是从数据库中检索结果，或者将测试数据预加载到数据库中会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:20:33.957

首先，我将封装您的“TestMode”检查。

我将创建一个基本控制器并添加以下属性：

```
// I would consider retrieving this from web.config
protected string testModeKey = "tm";

public bool IsTestContext
{
   get
   {
      return Request.QueryString[testModeKey] != null;
   }
} 
```

或者，考虑为 HttpRequest 编写一个扩展方法：

```
public static bool IsTestContext(this HttpRequest request, string testModeKey = "tm")
{
   request.QueryString[testModeKey] != null;
} 
```

这不碍事。让我们考虑一下如何插入这些值。我在这里做了一些假设，但我有兴趣使控制器可单元测试。

我假设您的数据是从一些返回的，`IDataRepository`并且您有两个存储库实现：FakeDataRepository 和 ReadDataRepository。

然后，您可以编写工厂或简单的 ifelse 语句来决定使用哪个存储库。

```
IDataRepository DataRepository { get; set; }

if (Request.IsTestContext)
   DataRepository = new FakeDataRepository();
else
   DataRepository = new RealDataRepository(); 
```

这将适用于您想要它做的事情，但在我看来这不是一个好的前进方式。我会考虑对您的控制器进行单元测试。你能提供更多关于你想测试什么的细节吗，因为我在这里做了很多假设和猜测？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:02:41.890

为了让您了解有关应用程序当前布局的一些详细信息，我在下面提供了详细信息：

应用程序的基本结构遵循项目丝绸模板，将应用程序分解为业务逻辑、数据层、演示和单元测试，我正在实现此测试模式的控制器已经从一个基本控制器继承，该控制器当前包含一个实现Microsoft.Practices.ServiceLocation 模式。

服务定位器访问在业务逻辑域项目中找到的四个服务，其中三个访问存储库包含三个下拉列表的值第四个访问已集成到应用程序中的支付解决方案 (SagePay) 的交易服务的实现这使用 SagePayMvc.dll。

所有存储库都继承自基础存储库我目前有六个存储库继承自此基础，三个再次用于填充下拉列表中的其他三个存储信息，包括学生、持卡人和订单详细信息测试模式基本上是访问学生存储库目前正在填充学生详细信息表单，目前可以使用 JQuery 填充持卡人详细信息。

有两组模型，一组在业务逻辑中，另一组在数据层中，模型验证在业务逻辑域中定义。

我通过其访问模型的视图模型当前正在使用域模型。

为了创建存储库，我使用实体框架代码优先方法，它当前将存储库创建为数据库，其中表对应于每个定义的模型。

此测试模式的目的是快速填充非唯一的表单字段（我目前实现了一些逻辑来阻止学生输入已经存在的名称），以便当团队的其他成员使用该应用程序时，他们可以快速评估如果应用程序正在运行，则特别适用于设计团队，因为他们将样式应用于应用程序。

我目前有一个测试类设置，它正在测试学生存储库可以创建一个新学生的断言，我在此处定义的数据访问使用 Moq 定义的假存储库。

# grails - 调试 grails 重新编译

> ID：12279212
> 
> 赞同：2
> 
> 时间：2012-09-05T10:17:30.383
> 
> 标签：grails

我正在研究 grails 2.0.4 项目，在某些时候我发现重新编译过程不起作用。进一步的尝试表明，首先`run-app`删除后`~/.grails/2.0.4`重新编译过程运行良好，但`run-app`下次运行会忽略运行期间文件中的更改（页面上没有更改，并且日志中没有 Compiling... 消息出现后）。所以我的问题是如何调试重新编译过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:58:51.427

如果它是一个没有重新加载的特定类，您可以检查的一件事是包定义是否正确。Grails 会愉快地编译错误包中的类，但这会破坏重新加载机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:49:18.860

有一些与重新编译相关的 JIRA 问题：

*   [http://jira.grails.org/browse/GRAILS-8951](http://jira.grails.org/browse/GRAILS-8951)
*   [http://jira.grails.org/browse/GRAILS-8573](http://jira.grails.org/browse/GRAILS-8573)
*   [http://jira.grails.org/browse/GRAILS-8914](http://jira.grails.org/browse/GRAILS-8914)

只有第三个是固定的。乍一看，有些人说这行不通：

```
grails run-app 
```

但进入交互模式有效：

```
grails
run-app 
```

稍微看一下代码，我可以看到[GrailsProjectWatcher.java](https://github.com/grails/grails-core/blob/master/grails-core/src/main/groovy/org/codehaus/groovy/grails/compiler/GrailsProjectWatcher.java)负责文件更改。尝试将调试添加到相关包中，看看是否收到消息。

# java - Java：如何让 Scanner 仅匹配第一次出现，如果之前已经匹配则跳过

> ID：12279214
> 
> 赞同：0
> 
> 时间：2012-09-05T10:17:42.163
> 
> 标签：java, arraylist, token, java.util.scanner

我有一个字符串列表，由存储在 ArrayList 中的空格分隔的标记组成。我需要扫描字符串 1 中的标记是否存在于字符串 2 中。我设法使用 Scanner 扫描标记。但是，扫描仪并没有做我想要的。

我需要关于 1 的建议/建议
。[已编辑] 示例：字符串 1 中有一个 NN 令牌，但字符串 2 中有两个 NN 令牌。因此，扫描仪应该扫描字符串 2 中的 NN 令牌。使用我提供的代码，扫描器将搜索所有 NN 令牌，包括第二个 NN 令牌。它应该在第一个 NN 令牌处停止，而不是继续扫描所有 NN 令牌。{Haley 关于 break 的建议确实停止了 Scanner}
2\. [EDITED] 现在，另一个问题是 - 如果 String 1 有两个 NN 令牌，则 Scanner 应该足够聪明，可以跳过之前扫描中找到的所有令牌。Scanner 应该能够将字符串 1 中的第二个 NN 令牌与字符串 2 中的第二个 NN 令牌相匹配。

这是我到目前为止所拥有的..

```
import java.util.ArrayList;
import java.util.Scanner;

public class TokenMatching {

    public static void main(String[] args) 
    {   
        ArrayList<String> taggedArray = new ArrayList<String>(); 

        //Example how the string would look like
        String string1 = "WRB VBD NN VB IN CC RB VBP NNP";
        String string2 = "WRB NN MD PRP VB DT NN IN NNS POS JJ NNS"; 

        taggedArray.add(string1);
        taggedArray.add(string2);       

        //Nested for loop to match taggedArray(i) with taggedArray(j)
        for(int i = 0; i< taggedArray.size(); i++)
        {
            for(int j = i + 1; j < taggedArray.size(); j++)
            {
                Scanner scan1 = new Scanner(taggedArray.get(i));

                int index1 = 0;
                while(scan1.hasNext())
                {
                    String token1;
                    token1 = scan1.next();
                    System.out.println(token1);
                    Scanner scan2 = new Scanner(taggedArray.get(j));

                    int index2 =0;
                    while(scan2.hasNext())
                    {
                        String token2 = scan2.next();

                        if(token1.equals(token2))
                        {
                            int relPosition;                            
                            relPosition = Math.abs(index1-index2);

                            //The print lines help me keep track of what is going on in the loop
                            System.out.println("Match found.");
                            System.out.println("Relative position for " + token1 + " : " + relPosition);

                        }
                            else
                            {
                                System.out.println("No Match Found.");
                            }

                        index2++;
                    }

                    index1++;
                }               
            }           
        }    
    }
} 
```

任何建议都会有很大帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:25:54.890

> 1.  有没有办法让 Scanner 只扫描第一次出现并移动到字符串 1 中的下一个标记

在你`if(token1.equals(token2))`添加一个`break;`after `System.out.println("Relative position for " + token1 + " : " + relPosition);`。[http://ideone.com/2o5Yz](http://ideone.com/2o5Yz)生成的输出是你想要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:26:18.867

为什么不使用

```
String[] tokens1 = string1.split("\\ ");
String[] tokens2 = string2.split("\\ "); 
```

现在您可以直接对数组进行操作。

# android - GreenDAO onUpdate

> ID：12279217
> 
> 赞同：3
> 
> 时间：2012-09-05T10:17:47.067
> 
> 标签：android, greendao

当我更新数据库版本时，它不会删除所有表（认为我将成为默认行为）。我还需要做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-21T12:13:19.363

请查看 DaoMaster.java

```
@Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.i("greenDAO", "Upgrading schema from version " + oldVersion + " to " + newVersion + " by dropping all tables");
            dropAllTables(db, true);
            onCreate(db);
        } 
```

确保 dropAllTables(db, true); 有真正的问题存在调试here

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T16:00:04.313

您使用的是哪个 SQLiteOpenHelper？

检查你生成的 DaoMaster 类。它有一个内部类 DevOpenHelper，它会在更新时删除所有表。

# javascript - 从发布的 JavaScript 中删除 console.log 和其他调试代码的最佳实践？

> ID：12279219
> 
> 赞同：7
> 
> 时间：2012-09-05T10:17:51.087
> 
> 标签：javascript, debugging, yui, combres

我已经看到一些控制台包装器可以通过控制台来阻止浏览器中的错误，而更高级的包装器可以在旧浏览器中启用日志记录。但是我没有看到任何帮助打开和关闭调试代码。

目前我做了一个查找和替换来注释掉调试代码。一定会有更好的办法？

我正在使用 Combres，它使用 YUI 来缩小 JavaScript。我看过一些帖子提到使用双分号来标记要在缩小过程中删除的行。这是一个技巧还是好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:21:33.820

可能您应该拥有自己的包装器`console.log()`并通过该包装器记录您的调试信息。这样，一旦部署到生产环境，您就可以用空函数替换该单个函数，这样控制台就不会充斥着调试信息。您也可以`console.log`用空函数替换实际函数，但这会阻止*任何*Javascript 输出到控制台，而不仅仅是您的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:29:04.870

如果您查看 YUI 框架是如何做到的，他们实际上使用了一个正则表达式并从源代码生成 3 个文件。一个具有日志记录-调试，一个具有日志记录剥离，只有文件名，以及一个没有日志记录的缩小版本。然后你可以设置一个全局配置来说明你想要哪个版本。我过去就是这样工作的，而且效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:37:58.387

定义您自己的调试功能，该功能将被包装`console.log`或任何您想要的东西，并确保如果您将其设为空，缩小器可以轻松推断出它是无操作的。之后，一旦你注释掉函数体，大多数压缩器应该检测到没有什么可以调用或内联，并完全删除对你的函数的引用。

这是示例：

```
(function() {
   function debug() {
      console.log(arguments)
   }

   function main() {
      debug(123)
      alert("This is production code!")
      debug(456)
   }

   main()
})() 
```

我已将其放入匿名函数中以限制范围`debug`并且不让它分配给窗口 - 这允许 minifier 轻松决定是否有必要。当我将此代码粘贴到[在线 GCC](http://closure-compiler.appspot.com/)时，我得到：

```
(function(){function a(){console.log(arguments)}a(123);alert("This is production code!");a(456)})(); 
```

但是一旦我添加`//`之前`console.log`使`debug`空，GCC将其编译为：

```
(function(){alert("This is production code!")})(); 
```

...完全删除调试代码的所有痕迹！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T15:55:36.293

请改用 Y.log()，然后您可以使用 gallery-log-filter 过滤您希望看到打印的日志消息。

# android - ProgressBar 在运行时重叠

> ID：12279220
> 
> 赞同：0
> 
> 时间：2012-09-05T10:18:04.417
> 
> 标签：android, runtime, progress-bar, updating, overlapping

嗨，我是 android 新手，我最近将主题更改为 Holo ..但进度条似乎重叠..即一个进度条出现并停止在其上，另一个继续更新进度..我什至将 secondaryprogress 也设置为 0 ..but din工作

# django - Django TastyPie 地理距离查找

> ID：12279221
> 
> 赞同：3
> 
> 时间：2012-09-05T10:18:06.587
> 
> 标签：django, distance, tastypie, geo

我正在使用 TastyPie 进行地理距离查找。这有点困难，因为 TastyPie 不正式支持它。在 Github (https://gist.github.com/1067176) 上，我找到了以下代码示例：

```
 def apply_sorting(self, objects, options=None):
     if options and "longitude" in options and "latitude" in options:
         return objects.distance(Point(float(options['latitude']), float(options['longitude']))).order_by('distance')

     return super(UserLocationResource, self).apply_sorting(objects, options) 
```

它运作良好，但现在我想在 TastyPie 中将距离作为场结果。你知道怎么做吗？仅在字段属性中包含“距离”是行不通的。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:35:50.817

元属性中定义的字段不足以返回附加值。它们需要定义为资源中的附加字段：

```
distance = fields.CharField(attribute="distance", default=0, readonly=True) 
```

该值可以通过`dehydrate_distance`在资源内部定义方法来填充

```
def dehydrate_distance(self, bundle):
    # your code here 
```

或者通过向资源元中的查询集添加一些额外的元素，如下所示：

```
queryset = YourModel.objects.extra(select={'distance': 'SELECT foo FROM bar'}) 
```

Tastypie 本身附加了一个名为 resource_uri 的字段，该字段实际上并不存在于查询集中，查看tastypie 资源的源代码也可能对您有所帮助。

# wpf - Windows 8 类似使用 WPF 的模态对话框

> ID：12279224
> 
> 赞同：1
> 
> 时间：2012-09-05T10:18:17.580
> 
> 标签：wpf, mvvm, dialog, prism

我正在开发一个具有 Metro 外观的 WPF-MVVM (.Net 4.0) 应用程序（它只是外观，它不是 Metro 应用程序。）我需要显示一个类似于 Windows 8 的消息框，它阻止了用户在通过单击是/否/取消（或任何按钮）消除该消息框之前。

我遇到了这篇原本很棒的[文章](http://www.codeproject.com/Articles/269364/MVVM-PRISM-Modal-Windows-by-using-Interaction-Requ)，并暂时认为我已经找到了解决方案。但这有其自身的缺点。它只是阻止用户通过鼠标单击与后面的控件进行交互。但是，用户可以使用 tab 键返回到后面的按钮并单击它们（按 enter）。

我想到了很多事情：

*   我应该选择自定义装饰器并使用 hitTestable 属性吗？

*   或者我应该放置一个控件并使用它的可见属性。

在采取任何方法之前，如果有人过去做过类似的事情并为我提供一些指针/参考/方法，我想向这里的精彩社区提出我的问题。

有人可以建议实现这一目标的方法是什么吗？请注意，如果可以解决目的，我将很乐意使用 prism 或任何其他开源软件，但必须定制窗口。如果您觉得这个问题太愚蠢，请原谅。请原谅我的无知。感谢您阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:20:00.743

我最近遇到了一个类似的问题，我使用 DialogPresenter 解决了它，如下所述：

[http://www.codeproject.com/Articles/36516/WPF-Modal-Dialog](http://www.codeproject.com/Articles/36516/WPF-Modal-Dialog)

我不得不在那里和那里做一些调整，但总的来说它工作正常，我现在有一个很好的方式来显示对话框！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T21:52:26.277

有更好的方法

```
 var dialog = new MessageDialog("Select Social network is already  authorised!");
            dialog.ShowAsync(); 
```

# ruby-on-rails - Ruby on Rails 应用程序视图文件未显示

> ID：12279225
> 
> 赞同：-1
> 
> 时间：2012-09-05T10:18:22.227
> 
> 标签：ruby-on-rails

我的 ruby​​ on rails 有问题。**请**帮助我解决问题，并请提供一个好的概念。

**设想 ：**

到目前为止一切都很好，直到今天。根据应用程序的要求，我应该向现有的 ROR 应用程序添加一些静态页面。基本上，应用程序已经开发并且工作正常，我需要向它添加一些静态页面。我在公共文件夹中放了一些静态页面，一切都顺利进行。bt 在应用程序的某个点上，即应用程序的索引页面有应用程序的登录名（不是静态页面），我有将该登录名放在那些静态页面（views/users/index.erb）的其中一个 div 中，已将代码从 index.html 复制粘贴到 index.erb.so，当我输入登录页面的地址时，站点导航也可以。但是当我单击主页时（显示公共文件夹的页面并且应用程序的登录代码不起作用。) 我希望它与视图文件夹中的 index.erb 一起显示。

我想以某种方式重定向到视图中的页面（视图/用户/index.erb）..尝试了href等cudnt工作。

希望我能以一种很好的方式解决这个问题，以便更好地理解这个问题。我正在使用 ruby​​mine 编辑器

PS我是ROR的新手..完全是新的。有.NET作为我的域。所以请给我一些基本的教程链接，我可以系统地理解MVC和ROR.Googling dint帮助:(

等待你的答案**:)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:49:37.017

RoR takes a little bit of work and understanding to grasp, mostly because there is so much too it; from "code" to "installation/configuration" to "deploy".

Sounds like you need to look up and understand "Routing" for Static Pages.

You are quite right, the default location will be "public" with the index.html page inside there. Leave that as such; as if your "Routing" is working correctly, then views/users/index.erb will show up.

Just to give you some general direction; Add your configuration in config/routes.rb

Then use the root to: command.

My configuration: (this links to app/views/static_pages/home.html.erb)

```
root to: "static_pages#home"

get "static_pages/home" 
```

That works perfectly. You might also want to check in the "logs" folder for possible errors.

# php - 使用 $_SESSION 存储购物车信息会在浏览器关闭后丢失

> ID：12279233
> 
> 赞同：0
> 
> 时间：2012-09-05T10:18:43.207
> 
> 标签：php, session, cookies

在阅读了这里的许多问题/解决方案后，我处于无法真正解决的情况。基本上我正在编写一个小型购物车应用程序。我正在寻找一种方法来存储用户添加到购物车的商品，最终我使用了 $_SESSION。

问题是所有保存的购物车数据在关闭浏览器后都会丢失。我不能依赖 $_COOKIE，因为我需要将每个“添加”作为新数组存储到购物车，而且我找不到使用 cookie 的方法（加上它有一个限制或其他什么），我真的对现在该做什么感到困惑。

我什至为客人保存购物车数据，使用数据库对我来说不是一个选项。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:25:30.327

为什么不将购物车存储在数据库中。在用户 cookie 中保存一个唯一 ID（或者如果您有身份验证/登录系统，只需使用用户 ID）。将其存储在数据库中还可以让您看到不完整的订单，这可能对统计数据和重新定位营销等有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T10:23:18.257

我认为关闭浏览器时购物车物品丢失是标准做法。

您可以尝试使用 HTML5 本地存储：-

[本地存储教程](http://paperkilledrock.com/2010/05/html5-localstorage-part-one/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:24:38.470

你需要为你的会话 cookie[设置一个生命周期](http://bg2.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)，默认情况下它只存在于浏览器关闭之前。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T10:28:02.877

正如您所提到的，当浏览器关闭时会话不会持续存在。

如果数据库或任何类型的服务器端存储不是一种选择。您可以考虑使用 LocalStorage 将其保存在客户端。即使浏览器关闭，本地存储中的数据也会保留。浏览器将域名与您的数据相关联。

使用本地存储时需要注意的几件事。

首先，本地存储在客户端，因此您可能需要将数据传回服务器，以便 PHP 可以对其进行操作。（假设您仍然需要服务器端来处理购物车数据。）请参阅此 stackoverflow 帖子：[PHP & localStorage;](https://stackoverflow.com/questions/3855337/php-localstorage)

其次，用户可以不受限制地更改本地存储。

第三，直到 IE8 才被 IE 支持。如果 IE6/7 是您关心的问题，您可能需要回退到 cookie 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:24:35.927

关闭浏览器时会清除会话，因此您必须使用 cookie。

看看这篇文章，了解如何在 cookie 中存储数组：[update cookie value in php](https://stackoverflow.com/questions/7425774/update-cookie-value-in-php)

Troelskn 的方法是我会使用的方法，但是，将购物车 ID 存储在数据库中似乎是明智的做法:)。

# backbone.js - 主干.js 收集事件

> ID：12279236
> 
> 赞同：16
> 
> 时间：2012-09-05T10:19:02.507
> 
> 标签：backbone.js

我开发了一个 jquery &backbone.js 网络应用程序。
一个组件有一个 html 表，该表后面是一个主干.js 集合。
此集合中的任何更改都应该导致 html 表的更新，所以我写

```
this.collection.bind("reset add remove", this.renderRows, this); 
```

所以我更新了 html 表，当整个集合变得新时，当一个新模型被添加时，当一个模型被删除时。

当用户悬停并单击 html 表格的某一行时，还会调用一个详细视图组件。在这个组件的开头，我从集合中得到了正确的模型

```
changeModel = this.collection.get(id); 
```

在用户改变了一些属性之后，我做

```
changeModel.set(attrs); 
```

并返回到 html 表。集合中的模型具有正确的更改值。

但是 html 表没有更新，因为没有触发 3 个事件（重置、添加、删除）。

所以我在集合绑定中添加了“替换”

```
this.collection.bind("replace reset add remove", this.renderRows, this); 
```

在从详细视图返回之前，我调用了

```
this.collection.trigger("replace"); 
```

我的解决方案有效，但我的问题是：

是否有任何“本机”backbone.js 解决方案已经存在并且我错过了并且我不必自己触发某些东西？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-05T10:31:56.980

模型中的`change`事件冒泡到集合中。[（注释源](http://backbonejs.org/docs/backbone.html#section-105)中的集合的`_onModelEvent`函数。该方法基本上只是从模型中获取所有事件并在集合上触发它们。

这将导致

1.  模型属性已设置
2.  模型触发器`change`
3.  收集渔获物`change`
4.  收集触发器`change`

所以

```
this.collection.bind("replace reset add remove", this.renderRows, this); 
```

必须用这个替换

```
this.collection.bind("change reset add remove", this.renderRows, this); 
```

附言

我个人的看法是，如果只更改一个模型，您不应该重绘整个表格。而是使每个表行本身成为一个视图，该视图具有相应的模型作为其模型，然后对那里的属性更改做出反应。如果您只针对一个，那么重新绘制 500 个表格单元格是没有意义的。

**更新**

现在你应该使用`on`-method 来绑定事件。

```
collection.on("change reset add remove", this.renderRows, this); 
```

如果您使用的是 BB 1.0，`View`并且[`listenTo`](http://backbonejs.org/#Events-listenTo)在`view.remove()`. 在这种情况下，您应该这样做：

```
// assuming this is the view
this.listenTo(collection, "change reset add remove", this.renderRows); 
```

# javascript - 停用所有标准 mousevents XTK

> ID：12279237
> 
> 赞同：0
> 
> 时间：2012-09-05T10:19:02.660
> 
> 标签：javascript, events, mouse, webgl, xtk

我在 mousedown 事件中有一个音量和一个 mousemove 事件。我想要实现的是在仍然按下按钮的同时移动鼠标，通过 IndexX++/-- 更改切片

和

停止旋转音量。

我需要“暂停”所有标准鼠标事件（或至少是旋转事件）并在触发 mouseup 事件时重新激活它们。

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:19:49.653

您可以修改 XTK 以提供 Ricola3D 提到的标志，也可以禁用与`renderer.interactor.config`选项的所有交互：

```
*  config.MOUSEWHEEL_ENABLED: true
*  config.MOUSECLICKS_ENABLED: true
*  config.KEYBOARD_ENABLED: true 
```

然后，您可以通过直接在画布上观察事件来编写自己的交互处理程序——完全在 XTK 之外，只需调用 XTK 功能来修改视图。

# iphone - 钥匙串添加了两次分发证书

> ID：12279244
> 
> 赞同：1
> 
> 时间：2012-09-05T10:19:26.537
> 
> 标签：iphone, ios, certificate, distribution, keychain

当我构建一个应用程序时，它向我显示了这个错误：

![在此处输入图像描述](../Images/ee9aab98c0de4c8ec24402b8350b0c27.png)

当我删除前一个证书时，一切都开始正常工作。所以我的问题是如果删除它一次它如何再次添加到钥匙串中？以及为什么再次添加它而不是钥匙串中存在一个证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:39:51.477

我认为您收到有关拥有额外分发证书的错误消息 - 因为您有额外的分发证书！

我的猜测是，您正在通过 Xcode 将其从 Provisioning Portal 拉回您的机器。

您最近是否撤销了分发证书，然后尝试从 KeychainAccess 中删除？如果是这样，您是否删除了与之关联的公钥和私钥？

进入 KeychainAccess 并检查您是否有任何孤立的私钥，如果您有任何可以链接到旧分发证书的密钥，然后删除它们（删除开发人员或分发证书而不删除其公钥和私钥不会正确删除它 - 你需要删除两个密钥和证书）

然后返回 Xcode 并在 Organizer 屏幕中点击“刷新”按钮 - 然后再次检查 KeychainAccess - 运气好的话，Xcode 不会下载顽皮的证书，您的问题已经解决。但是，如果您现在有您的恶意证书，那么可能是您一直在使用的配置文件需要更改......

顺便说一句，请确保查看“系统”和“系统根”钥匙串以及“登录”钥匙串。

# java - 附加对象 OutputStream 时出现 ClassCastException

> ID：12279245
> 
> 赞同：6
> 
> 时间：2012-09-05T10:19:33.863
> 
> 标签：java, serialization, classcastexception, java-io

我一直在尝试做一个需要可附加 ObjectOutputStream 的小项目。我已经经历了几个解决方案，我发现[这个](https://stackoverflow.com/questions/1194656/appending-to-an-objectoutputstream)最初似乎解决了我的问题。但是在我的项目的进一步发展中，我开始遇到意外的异常。以下是我的课。

```
public class PPAccount implements Serializable
{
    private Profile profile;
    private String email;
    private float accountBal;
    private boolean isActivated;
    private String activationCode;
    private ArrayList<Transaction> transactions;

    //a few functions   
}
public class PPRestrictedAccount extends PPAccount {
    private String parentEmail;
    private float withdrawLimit;

        //a few functions
}
public class PPBusinessAccount extends PPAccount {
    private ArrayList <PPRestrictedAccount> accountOperators;

        //a few functions
}
public class PPStudentAccount extends PPAccount {
    private String parentEmail;

        //a few functions
} 
```

我观察到的是，使用[this](https://stackoverflow.com/questions/1194656/appending-to-an-objectoutputstream)我覆盖了 ObjectOutputStream 并在我将对象附加到文件时使用它。但是如果我写会发生什么：

`PPBusinessAccount`首先，重复任意次数......然后写`PPAccount`一切都很好。 `PPAccount`首先，重复....然后写`PPBusinessAccount`然后写`PPAccount`，它写得很好，但是在阅读时我得到了`ClassCastException`。

我尝试读取对象并将它们直接存储在类的实例中`Object`以避免类强制转换但仍然`readObject()`抛出`ClassCastException`。

我尽力描述我的场景，告诉你是否没有得到任何东西。为什么会这样？？它与它第一次编写的标题有关吗？沿着基类标题不能支持子类？什么转机？

我正在做这样的演员：

```
Object o = ois.readObject();        //Surprisingly exception is raised here (line:50 in DataStore)
PPAccount ppa = (PPAccount)o; 
```

堆栈跟踪

```
java.lang.ClassCastException: java.lang.String cannot be cast to java.io.ObjectStreamClass
    at java.io.ObjectInputStream.readClassDesc(Unknown Source)
    at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
    at java.io.ObjectInputStream.readClassDesc(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.ArrayList.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at in.msitprogram.iiit.paypal.persistance.DataStore.lookupAccount(DataStore.java:50)
    at in.msitprogram.iiit.paypal.persistance.DataStore.writeAccount(DataStore.java:131)
    at in.msitprogram.iiit.paypal.console.PPNewAccountScreen.show(PPNewAccountScreen.java:78)
    at in.msitprogram.iiit.paypal.console.MainMenu.show(MainMenu.java:42)
    at in.msitprogram.iiit.paypal.PPSystem.main(PPSystem.java:17)
Exception in thread "main" java.lang.NullPointerException
    at in.msitprogram.iiit.paypal.persistance.DataStore.lookupAccount(DataStore.java:66)
    at in.msitprogram.iiit.paypal.persistance.DataStore.writeAccount(DataStore.java:131)
    at in.msitprogram.iiit.paypal.console.PPNewAccountScreen.show(PPNewAccountScreen.java:78)
    at in.msitprogram.iiit.paypal.console.MainMenu.show(MainMenu.java:42)
    at in.msitprogram.iiit.paypal.PPSystem.main(PPSystem.java:17) 
```

在写入`lookUpAccount`流时从流中读取`writeAccount`，这里是代码：

```
public static PPAccount lookupAccount(String email) throws IOException, ClassNotFoundException 
    {
        PPAccount account = null; //initialize it after reading from file
        // write code to open the files, read
        PPAccount foundAccount=null;
        ObjectInputStream ois=null;
        FileInputStream fis=null;
        File ff = new File(PPConstants.AllAccountDetails);
        if(!ff.exists())
        {
            //System.out.println("Required file not found");
            return null;
        }
        try
        {
            fis=new FileInputStream(PPConstants.AllAccountDetails);
            ois = new ObjectInputStream(fis);
            while(fis.available()>0 && foundAccount==null)
            {
                //Object o=null;
                PPAccount ppa=null;
                try
                {
                    ppa = (PPAccount)ois.readObject();
                    if(ppa==null)
                        return null;
                    System.out.println(ppa);
                }

                catch(ClassCastException cce)
                {
                    System.out.println("Class cast exception "+cce.getCause());
                    cce.printStackTrace();  
                }
                if(email.equals(ppa.getEmail()))
                {
                    foundAccount=ppa;
                    break;
                }
                if(ppa instanceof PPBusinessAccount)
                {
                    PPBusinessAccount ppba = (PPBusinessAccount)ppa;
                    ArrayList<PPRestrictedAccount> alist=ppba.getAccountOperators();
                    if(alist==null)
                        continue;
                    Iterator<PPRestrictedAccount> it = alist.iterator();
                    while(it.hasNext())
                    {
                        PPRestrictedAccount ppr=(PPRestrictedAccount) it.next();
                        System.out.println(ppr);
                        if(email.equals(ppr.getEmail()))
                        {
                            foundAccount = ppr;
                            break;
                        }
                    }//iterators while loop
                }//if it is a businessAccount
            }//outer while  
        }//try
        finally
        {
            if(ois!=null)
                ois.close();
            if(fis!=null)
                fis.close();
        }   
        return foundAccount;
    }
    public static void writeAccount(PPAccount account,Boolean append) throws IOException, ClassNotFoundException, DuplicateAccountException
    {
        ObjectOutputStream oos=null;
        FileOutputStream fos=null;
        try
        {
            if(!append)
            {
                fos= new FileOutputStream(PPConstants.AllAccountDetails);
                oos = new ObjectOutputStream(fos);
                //System.out.println("Not Appending");
                oos.writeObject(account);
            }
            else
            {
                File ff = new File(PPConstants.AllAccountDetails);
                if(!ff.exists())
                {
                    System.out.println("Required file not found");
                    return;
                }
                PPAccount aa=lookupAccount(account.getEmail());
                if(aa!=null)
                    throw new DuplicateAccountException("An Account already exits with this email-ID");
                oos = new AppendingObjectOutputStream(new FileOutputStream(PPConstants.AllAccountDetails,append));
                oos.writeObject(account);
            }
        }
        finally
        {
            if(oos!=null)
                oos.close();
            if(fos!=null)
                fos.close();
        }

    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-15T14:19:32.457

这里的问题是，之前给你附加的海报让`ObjectOutputStream`你误入歧途。`ObjectOutputStream`/尝试`ObjectInputStream`只存储每个对象一次，然后再引用已存储的对象。也就是说，如果你有一堆同一个类的对象，你可以在流中得到这样的结果：

```
CLASS_1_DESCRIPTION
OBJECT_1
REF_TO_CLASS_1
OBJECT_2
REF_TO_CLASS_1
OBJECT_3
... 
```

当 an`ObjectInputStream`将流转换回一堆对象时，它会维护一个列表，其中列出了它已经反序列化的内容。它告诉你的错误是它试图反序列化一个对象，读取应该是对对象类描述的引用，但是当它在其内部表中查找该引用时，它看到了一个`String`. 很自然地，它爆发了。

我认为修复就像这样简单 - 在您的 中`AppendableObjectOutputStream`，更改此方法：

```
 @Override
  protected void writeStreamHeader() throws IOException {
    // do not write a header, but reset the handle list
    reset();
  } 
```

中的`reset()`方法在`ObjectOutputStream`流中插入一个标记，说“此时丢弃所有状态”。然后，当您使用 a 重新读取此内容时`ObjectInputStream`，输入流对已反序列化的内容的想法将与输出流认为的状态相匹配，当它首先反序列化这些内容时。

（编辑：从评论中回答问题）

我能想到的唯一不利后果是：

*   最终文件将比您将所有内容都写入 one 时更长`ObjectOutputStream`，尤其是在同一个`Profile`对象出现多次的情况下。即使没有，您也会在流中重复类描述符，因此大量重复 {open `AppendableObjectOutputStream`, write one object, close stream} 可能会使文件大小有点膨胀。

*   与此相关的是，在反序列化所有内容后，您可能会得到应该是相同对象的多个副本。例如，假设您编写了一堆东西，包括一些`PPRestrictedAccount`对象，然后关闭流，将其打开为`AppendableObjectOutputStream`，并写出 a`PPBusinessAccount`在其`operators`列表中包含`PPRestrictedAccount`您之前写出的一些 s。当您重新阅读所有内容时，您最初阅读的 s 与您在's列表中找到的 s`PPRestrictedAccount`将不是相同的对象（也就是说，它们不会是`==`） 。它们将被单独实例化。为避免这种情况，您需要使用一种方法对它们进行重复数据删除。写入单个的所有内容`PPRestrictedAccount``PPBusinessAccount``operators`[`readResolve`](http://www.javalobby.org/java/forums/t17491.html)`AppendableObjectOutputStream`但是，实例将正确连接。根据您的应用程序，这可能根本不用担心。

就是否会爆炸的安全性而言，这与 java 序列化的任何其他使用一样安全；您的课程没有任何特定的内容可以使其正常工作。请注意，在输出文件的多个单独开口中写入的任何对象都将被反序列化为原始对象的单独副本。（没有任何`readResolve`魔法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:23:22.497

试试这样......

`readObject()` **返回** `objects`of**类型** `Object`，因此您需要将**它们显式转换为其原始类型...**

**例如：**

`PPAccount pa = (PPAccount) readObject();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T06:11:20.233

没有明确的答案，但有一些想法和事情可以尝试：

*   堆栈跟踪包括`at java.util.ArrayList.readObject(Unknown Source)`，这表明在反序列化包含`ArrayList`. 通过注释掉你的问题`private ArrayList<Transaction> transactions;`

*   *如果您在不*使用 appender的情况下生成单个文件，您是否有同样的问题？如果是这样，请创建两种相同内容的形式：一种带有 appender，一种没有。差异？

*   我确实看到另一个类似问题的参考，没有解决方案。也使用相同的附加程序：[序列化/反序列化 ClassCastException: x cannot be cast to java.io.ObjectStreamClass](https://stackoverflow.com/questions/10036603/serialization-deserialization-classcastexception-x-cannot-be-cast-to-java-io-ob)

# php - 如何在 Symfony2 中使用命名空间会话

> ID：12279247
> 
> 赞同：14
> 
> 时间：2012-09-05T10:19:36.880
> 
> 标签：php, symfony

我正在尝试使用 symfony2 会话。我这样做

```
 $session = $this->getRequest()->getSession();
    $session->set('token','value'); 
```

这行得通。但我想在会话中使用命名空间。文档说

```
 class NamespacedAttributeBag 
```

提供该功能，但我不知道如何实现它

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T11:51:31.120

只需打开您的 config.yml 并在导入后添加：

```
parameters:
    session.attribute_bag.class: Symfony\Component\HttpFoundation\Session\Attribute\NamespacedAttributeBag 
```

它看起来像这样：

```
imports:
    - { resource: parameters.yml }
    - { resource: security.yml }

parameters:
    session.attribute_bag.class: Symfony\Component\HttpFoundation\Session\Attribute\NamespacedAttributeBag

framework:
# ... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-05T10:33:45.477

您应该重新定义会话服务并为您的属性包定义服务（如果您检查默认实现，`session.attribute_bag`您会看到该服务只有类属性）。

并将您的新服务注入到重新定义的会话服务中

```
services:
    session:
        class: Symfony\Component\HttpFoundation\Session\Session
        arguments:
            - @session.storage
            - @your.session.attribute_bag #service id is defined below
            - @session.flash_bag

    your.session.attribute_bag:
        class: Symfony\Component\HttpFoundation\Session\Attribute\NamespacedAttributeBag 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-02T16:23:15.610

因为也可以在 Symfony2 之外使用 HTTPFoundation 组件，所以实现 NamespacedUserBags 的方式如下：

```
use Symfony\Component\HttpFoundation\Session\Session;
use Symfony\Component\HttpFoundation\Session\Attribute\NamespacedAttributeBag;

$session = new Session();

//first bag
$myAttributeBag = new NamespacedAttributeBag('<your_storage_key_1>');
$myAttributeBag->setName('<your_tag_name_1>');
$session->registerBag($myAttributeBag);

//second bag
$myAttributeBag = new NamespacedAttributeBag('<your_storage_key_2>');
$myAttributeBag->setName('<your_tag_name_2>');
$session->registerBag($myAttributeBag);

$session->start(); 
```

注册尽可能多的行李，但请确保在开始会话之前完成此操作。现在您可以使用 getBag() 在包之间切换：

```
$activeBag = $session->getBag('<your_tag_name>'); 
```

并使用典型方法访问命名空间包：

```
$activeBag->set('tokens/a', 'adsf82983asd');
$activeBag->set('tokens/b', 'daslfl232l3k');

print_r($activeBag->get('tokens')); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-25T13:48:22.093

从 Symfony 3 开始，`session.attribute_bag.class`参数的覆盖不再起作用。

我拉了几次头发后应用的解决方案是使用编译器传递来覆盖`session.attribute_bag`服务类。

我直接在内核中完成了它，但是外部编译器传递也会以相同的方式工作。

**SF4 内核**

```
<?php
// src/Kernel.php
namespace App;

use Symfony\Bundle\FrameworkBundle\Kernel\MicroKernelTrait;
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\HttpKernel\Kernel as BaseKernel;
use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\HttpFoundation\Session\Attribute\NamespacedAttributeBag;

class Kernel extends BaseKernel implements CompilerPassInterface
{
    use MicroKernelTrait;

    // ...

    public function process(ContainerBuilder $container)
    {
        $container->getDefinition('session.attribute_bag')->setClass(NamespacedAttributeBag::class);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-13T13:37:44.223

使用 Symfony 4（和 Flex），使用以下配置来使用`NamespacedAttributeBag`：

```
# config/services.yaml
services:
  session.attribute_bag: 
    class: Symfony\Component\HttpFoundation\Session\Attribute\NamespacedAttributeBag
  # ... 
```

# java - 如何归档（使用 Zip）到多个输出文件

> ID：12279250
> 
> 赞同：2
> 
> 时间：2012-09-05T10:19:44.800
> 
> 标签：java, android, zip, archive, zipfile

在 Android 中，我想将一些文件打包到 Zip 存档中（使用`java.util.zip`）。但是我对输出文件大小有限制 - 那么是否有可能将它们打包成多个固定大小的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:27:28.133

如果你这样做怎么办：

假设您（大致）知道文件的压缩率...您获取的前**几个文件**不超过例如 2MB。如果压缩率为 50%，最后你会得到 1MB 的文件。你重复这个过程，直到你压缩所有文件......

关于**一个大文本文件**，我建议这样做。读取文件并将其写入两个/三个/四个单独的文件。您可以使用`FileInputStream`和`FileOutputStream`... 对每个部件进行压缩。解压缩后，在 .的帮助下再次将它们粘合在一起`File(Input/Output)Stream`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:27:09.377

我们最近需要做一些类似的事情（不是在 Android 上，但原理是一样的）。我们提出了一个[MultiFileOutputStream](http://gate.svn.sourceforge.net/viewvc/gate/mimir/trunk/mimir-cloud/src/java/gate/mimir/util/MultiFileOutputStream.java?view=markup)，它写入一系列固定大小的“块”和一个相应的[输入流](http://gate.svn.sourceforge.net/viewvc/gate/mimir/trunk/mimir-cloud/archive-unpacker/src/gate/mimir/util/MultiFileInputStream.java?view=markup)，该输入流将这些块重新组合成一个流。我们在多文件流之上分层了一个[公共压缩TAR 流，但您同样可以使用 zip 流。](http://commons.apache.org/compress/)

# css - 为什么后台属性没有运行？

> ID：12279251
> 
> 赞同：0
> 
> 时间：2012-09-05T10:19:46.783
> 
> 标签：css

有我的代码。( [jsfiddle](http://jsfiddle.net/vE8rd/) ) 为什么我的这部分代码没有运行？

```
header{background-color: #2bd5ec;} 
```

我想为标题标签添加背景颜色。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:22:42.723

这里的问题是，由于您内部的元素`header`是浮动的，因此它们被视为与您的标题不同的流程，因此它不会调整大小以适应它们。

解决此问题的一种方法是附加`<div style = "clear: both;"></div>`到您的`header`; 小演示：[小链接](http://jsfiddle.net/glee/vE8rd/7/)。

您也可以只添加`overflow: hidden;`到您的`header`：[另一个小链接](http://jsfiddle.net/glee/vE8rd/14/)，或者也可以添加`float`：[另一个小链接](http://jsfiddle.net/glee/vE8rd/15/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:25:31.953

您可以设置页眉的高度。例如 ：

```
header{background-color: red; height:100px;} 
```

你可以像这样使用“清除”：

```
 <header>
     <div id="info">
         <h1>Oyunn.in</h1>
     </div>
     <div id="categories">
         <p>Barbie - Benten - Senten</p>
     </div>
     <br clear="all"/>
</header>​ 
```

和CSS：

```
header{background-color: #2bd5ec;}
#info{float: left;}
#info h1{font-size: 100%;margin: 0;}
#categories{float: right;}
#categories p{margin:0;}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:21:46.980

添加

```
header{background-color: #2bd5ec;width:100%; height:30px;} 
```

背景属性通常需要div的尺寸

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:23:22.153

利用`overflow:hidden`

```
header{background-color: #2bd5ec; overflow:hidden;} 
```

> [overflow](https://developer.mozilla.org/en-US/docs/CSS/overflow) CSS 属性指定是否剪切内容、渲染滚动条或显示块级元素的溢出内容。
> 
> 使用与默认值不同的[溢出](https://developer.mozilla.org/en-US/docs/CSS/overflow)`visible`属性将创建一个新的块格式化上下文。这在技术上是必要的，就好像浮动会与滚动元素相交，它会强制将可滚动元素的内容重新包装在侵入的浮动周围。重新包装会在每个滚动步骤之后发生，并且会导致滚动体验太慢。请注意，通过以编程方式将 scrollTop 设置为相关的 HTML 元素，即使溢出具有隐藏值，元素也可能需要滚动。
> 
> [溢出](http://www.quirksmode.org/css/overflow.html)声明告诉浏览器如何处理不适合盒子的内容。这假设盒子有一个高度：如果没有，它会变得尽可能高以包含其内容，并且溢出声明是无用的。

[**看演示**](http://jsfiddle.net/akhurshid/vE8rd/13/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:26:57.667

实际上你没有清除你的孩子浮动所以每当我们使用浮动所以我们应该清除浮动，我们可以`overflow: hidden;`在我们的父 div 中清除孩子浮动的 div。

```
header {
    background-color: #2BD5EC;
    overflow: hidden;
} 
```

**看演示：-** [http://jsfiddle.net/vE8rd/17/](http://jsfiddle.net/vE8rd/17/)

# php - 日期选择器，用于选择和查看特定日期的内容

> ID：12279253
> 
> 赞同：0
> 
> 时间：2012-09-05T10:19:51.373
> 
> 标签：php, jquery, date, datepicker, picker

我需要一个用 php、jquery 和可能是 mysql 编写的日期选择器/选择器，用户可以看到它来选择特定日期并查看该特定日期的内容。

一个例子可以在这里找到 [http://soccernet.espn.go.com/scores/_/league/eng.1/english-premier-league?cc=3888](http://soccernet.espn.go.com/scores/_/league/eng.1/english-premier-league?cc=3888)

另一个例子是[http://www1.skysports.com/football/fixtures-results/06-september-2012](http://www1.skysports.com/football/fixtures-results/06-september-2012)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:22:30.370

您可以使用[JQuery UI Datepicker](http://jqueryui.com/demos/datepicker/)并根据自己的目的对其进行修改。那里有很多日期选择器。在这种情况下，Google 可能会为您提供比 Stack Overflow 更多的答案 :)

# wordpress - css文件中的Wordpress菜单结构更改

> ID：12279256
> 
> 赞同：0
> 
> 时间：2012-09-05T10:20:03.667
> 
> 标签：wordpress, drop-down-menu

我的网站使用了 wordpress 21 主题。现在我想为我的网站创建一个下拉菜单。默认情况下，wordpress 具有下拉菜单功能。现在，当我将鼠标悬停在主菜单上时，我得到了子菜单部分。例如 ：-

我有一个主菜单，例如：- 主页 | 关于 | 接触

当我将鼠标悬停在“关于”菜单上时，它会显示“关于”菜单的子菜单，例如

主页 | 关于 | 接触

```
 Our Services

   History

   Our Staff 
```

当我将鼠标悬停在历史菜单上时，它会显示历史菜单的子菜单，如下所示：-

主页 | 关于 | 接触

```
 Our Services

   History

      History 1
      History 2
      History 3

   Our Staff 
```

但是当我将鼠标悬停在关于菜单上时，我想显示历史的子菜单。如果我将鼠标悬停在“关于”菜单上，它应该显示如下：-

主页 | 关于 | 接触

```
 Our Services

   History

      History 1
      History 2
      History 3

   Our Staff 
```

请帮助我在 wordpress 菜单中获得输出。

```
#access {
  background: #00ADEE; /* Show a solid color for older browsers */
  clear: both;
  display: block;
  width: 915px;
}
#access ul {
  font-size: 11px;
  list-style: none;
  margin: 0;
  padding: 0;
}
#access li {
  float: left;
  position: relative;
}
#access a {
  color: #eee;
  display: block;
  line-height: 12px;
  padding: 4px 9px; 
  text-decoration: none;
  background: url(images/menu-border.png);
  background-position: right 6px;
  background-repeat: no-repeat;
  text-transform: lowercase;
}
#access ul ul {
  display: none;
  float: left;
  margin: 0;
  position: absolute;
  left: 11px;
  width: 252px;
  z-index: 99999;
  background: #FFFFFF;
  padding: 0 4px;
  border: 1px solid #00AEEF;
}
#access ul ul li {
}
#access ul ul ul {
  left: 23%;
  top: 0;
  border: none;
  width: 150px;
}
#access ul ul ul li{
  border: none;
  width: 112px;
  background:url(images/list.png);
  background-position: 0 10px;
  background-repeat: no-repeat;
  background-color: #FFF;
  width: 185px;
}
#access ul ul ul a{
  border: none;
  background: transparent;
}
.sub-menu .menu-item-object-custom a:hover{
  height: 40px;
}
#access ul ul a {
  border-bottom: 1px solid #BCBEC0;
  color: #000;
  font-size: 10px;
  font-weight: normal;
  height: auto;
  line-height: 1.4em;
  padding: 5px 7px;
  width: 237px;
}
#access li:hover > a,
#access ul ul :hover > a,
#access a:focus {
  color: #000;
}

#access ul ul  > a {
  color: #000;
}

#access li:hover > a,
#access a:focus {
  color: #FFFFFF;
}
#access ul li:hover > ul {
  display: block;
}
#access ul ul  .current_page_item > a {
  color: #00ADEE;
  font-weight: bold;
}
#access .current-menu-item > a,
#access .current-menu-ancestor > a,
#access .current_page_item > a,
#access .current_page_ancestor > a {
  color: #FFFFFF;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:31:25.290

基本上，您需要找到在 li 元素上定义了 :hover 的规则。它通常是这样的：

```
li:hover ul {
    display: block;
} 
```

要使二级菜单可见，您需要添加以下内容：

```
li:hover ul ul {
    display: block;
} 
```

理论上应该是这样，我需要查看描述菜单的 CSS 部分，以便我可以告诉您要进行的确切更改。

# c# - DataReader does not see data in Excel cell if previous cell in the column are empty

> ID：12279258
> 
> 赞同：0
> 
> 时间：2012-09-05T10:20:16.607
> 
> 标签：c#, excel, xls, datareader, oledbdatareader

I have a weird problem with reading .xls file using `OleDbDataReader`.

Basically, it does not see a data in the cell, if the previous cells in the column are empty.

If I move the row with the data at the top of Excel sheet, then everything loads fine. I'm not sure, but I think that it has something to do with the amount of empty cells before the one with data.

Any help or advice will be much appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:51:23.637

You probably have a connectionstring like this:

```
<add name="MyApp.Properties.Settings.ExcelConnectionString" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=&quot;Excel 8.0;IMEX=1;HDR=NO;TypeGuessRows=0;ImportMixedTypes=Text;&quot;;"/> 
```

Notice the 'TypeGuessRows'. It tells Excel how many rows to scan to try to guess the datatypes of the columns. The value 0 (zero) tells it to scan all rows. Does that help you?

# java - 使用通用 VarArgs 在 Java 中调用模棱两可的方法

> ID：12279259
> 
> 赞同：1
> 
> 时间：2012-09-05T10:20:18.853
> 
> 标签：java, generics, variadic-functions

`The method getRecommendedIds(String, Object&Comparable<?>&Serializable[]) is ambiguous for the type MyService`尝试调用使用泛型和可变参数的重载方法时出现编译错误。

服务：

```
public interface MyService {
    public <K> List<K> getRecommendedIds(String datasource, K... ids);
    public <K> List<K> getRecommendedIds(String datasource, int limit, K... ids);
} 
```

来电：

```
@Test(expected = NullPointerException.class)
public void testGetWithLimitThrowsNpeForNullDatasource() {
    service.getRecommendedIds(null, 3, UUID.randomUUID());
} 
```

有没有办法解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:27:09.610

因为 K 变量没有限制，所以调用确实是模棱两可的——它可能是对三参数版本的调用，也可能是对`(String, K...)`将 3 自动装箱为 an`Integer`并`K`绑定到的版本的调用`Object`。如果你称它为

```
service.<UUID>getRecommendedIds(null, 3, UUID.randomUUID()); 
```

对于 K 的显式绑定，它将起作用，因为既`int`不能也不能`Integer`分配给`UUID`类型，所以调用必须是三个 arg 版本。如果您将调用的返回值分配给限制类型的变量，您也可以在没有显式限制的情况下逃脱，即

```
List<UUID> ids = service.getRecommendedIds(null, 3, UUID.randomUUID()); 
```

在这里，编译器必须绑定`K`以`UUID`使返回类型匹配。

# android - 在android中解析xml时出现NullPointException

> ID：12279260
> 
> 赞同：0
> 
> 时间：2012-09-05T10:20:18.997
> 
> 标签：android, xml

我正在尝试从下面的代码中解析 xml：

```
XMLParser xmlParser = new XMLParser();
String xml = xmlParser.getXmlFromUrl(URL2);
Document doc = xmlParser.getDomElement(xml); // getting DOM element
NodeList nl = doc.getElementsByTagName("item");
Element e = (Element) nl.item(0); 
```

[当 URL2 = http://api.androidhive.info/pizza/?format=xml](http://api.androidhive.info/pizza/?format=xml)时工作正常 但是当我使用我的服务器时： URL2 = [http://udios.bugs3.com/test.xml](http://udios.bugs3.com/test.xml)它位于最后一行：

```
NodeList nl = doc.getElementsByTagName("item"); 
```

除了以下例外：

```
NullPointerException
Unexpected token (position:TEXT ï»¿@1:4 in java.io.StringReader@41391770) 
```

2个xml文件是相同的，我不认为问题出在服务器上，也许是编码问题？如果有人能帮助我，我将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:17:59.357

我认为此链接已被完整使用...

检查此[链接](http://www.androidpeople.com/android-xml-parsing-tutorial-using-saxparser)

* * *

```
i have shown with only <name>...</name> tag, do the same with <id>...</id> , <cost>...</cost> and <description>...</description> 
```

* * *

```
 TextView name[];

try {

     /** Handling XML */
     SAXParserFactory spf = SAXParserFactory.newInstance();
     SAXParser sp = spf.newSAXParser();
     XMLReader xr = sp.getXMLReader();

     /** Send URL to parse XML Tags */
     URL sourceUrl = new URL(URL2);

     /** Create handler to handle XML Tags ( extends DefaultHandler ) */
     MyXMLHandler myXMLHandler = new MyXMLHandler();
     xr.setContentHandler(myXMLHandler);
     xr.parse(new InputSource(sourceUrl.openStream()));

} catch (Exception e) {
     System.out.println("XML Pasing Excpetion = " + e);
}

     /** Get result from MyXMLHandler SitlesList Object */
     sitesList = MyXMLHandler.sitesList;

     /** Assign textview array lenght by arraylist size */
     name = new TextView[sitesList.getName().size()];

     /** Set the result text in textview and add it to layout */
     for (int i = 0; i < sitesList.getName().size(); i++) {
          name[i] = new TextView(this);
          name[i].setText("Name = "+sitesList.getName().get(i));    
     } 
```

* * *

```
 MyXMLHandler.java

        /* This file is used to handle the XML tags. So we need to extends with DefaultHandler.
         we need to override startElement, endElement & characters method .
         startElemnt method called when the tag starts.
         endElemnt method called when the tag ends
         characres method to get characters inside tag.

         */

         import org.xml.sax.Attributes;
         import org.xml.sax.SAXException;
         import org.xml.sax.helpers.DefaultHandler;

         public class MyXMLHandler extends DefaultHandler {

         Boolean currentElement = false;
         String currentValue = null;
         public static SitesList sitesList = null;

         public static SitesList getSitesList() {
         return sitesList;
         }

         public static void setSitesList(SitesList sitesList) {
         MyXMLHandler.sitesList = sitesList;
         }

         /** Called when tag starts ( ex:- <name>Android</name>
         * -- <name> )*/
         @Override
         public void startElement(String uri, String localName, String qName,
         Attributes attributes) throws SAXException {

         currentElement = true;

         if (localName.equals("menu"))
         {
         /** Start */
         sitesList = new SitesList();
         } 

         }

         /** Called when tag closing ( ex:- <name>Android</name>
         * -- </name> )*/
         @Override
         public void endElement(String uri, String localName, String qName)
         throws SAXException {

         currentElement = false;

         /** set value */
         if (localName.equalsIgnoreCase("name"))
         sitesList.setName(currentValue);

         }

         /** Called to get tag characters ( ex:- <name>Android</name>
         * -- to get Android Character ) */
         @Override
         public void characters(char[] ch, int start, int length)
         throws SAXException {

         if (currentElement) {
         currentValue = new String(ch, start, length);
         currentElement = false;
         }

     } 
```

}

* * *

```
 SitesList.java

          // Contains Getter & Setter Method

          import java.util.ArrayList;

          /** Contains getter and setter method for varialbles */
       public class SitesList {

          /** Variables */
          private ArrayList<String> name = new ArrayList<String>();

          /** In Setter method default it will return arraylist
          * change that to add */

          public ArrayList<String> getName() {
          return name;
          }

          public void setName(String name) {
          this.name.add(name);
          }

       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:33:33.120

找到解决方法：使用 xml - 用记事本打开 - 另存为 (ANSI)

# cakephp - 无法在包含容器 cakephp 中检索虚拟字段

> ID：12279261
> 
> 赞同：1
> 
> 时间：2012-09-05T10:20:22.717
> 
> 标签：cakephp, model, controller, contains

我正在尝试使用友好名称（模型中的虚拟字段）检索 id 列表，但我继续在虚拟字段上获取未知列。有任何想法吗？

```
 public $virtualFields = array(
        'friendly_name' => "CONCAT(ReAgent.first_name, ' ',ReAgent.last_name)"
  );

 $results = $this->Re->find("all",
                array("recursive" => 0, 
                    "fields" => array("Re.id","ReAgent.friendly_name"),
                    "contains" => array(
                        "RegroupsRe" => 
                            array("conditions" => 
                                array(
                                    "regroup_id" => $post[$field]
                                )
                            )
                        ),
                        "ReAgent" => array(
                            "fields" => "friendly_name"
                        )
                    )
                ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:11:20.723

该虚拟字段在哪里指定，Re 或 ReAgent？

如果它在 Re 模型中，则将“字段”参数删除到包含中的 ReAgent 模型（顺便说一下，它应该是单数）......

```
$results = $this->Re->find(
    "all",
    array(
        "recursive" => 0, 
        "fields" => array("Re.id", "ReAgent.friendly_name"),
        "contain" => array(
            "RegroupsRe" => array(
                "conditions" => array(
                    "regroup_id" => $post[$field]
                ),
            ),
            "ReAgent",
        )
    )
); 
```

你也有 ReAgent 在你的容器之外，这不会有帮助！上述样品已清理干净。

# android - 从logcat中的android ffmpeg语法错误运行ffmpeg命令

> ID：12279262
> 
> 赞同：2
> 
> 时间：2012-09-05T10:20:25.297
> 
> 标签：android, ffmpeg, ubuntu-11.10

我已经成功地为 android 编译了 ffmpeg 并移植了它。

我放置

1.  **/system/lib**目录下的 libffmpeg.so
2.  **/system/bin**和**/system/xbin**目录中的 ffmpeg 可执行文件（我不确定将其放置在哪里）。我直接从源目录复制了ffmpeg可执行文件（不确定它是否正确）

现在我正在使用以下代码执行来自 android 的命令！

```
imports *
public class LatestActivity extends Activity {

    private Process process;
    String command,text;

    static { 
        System.loadLibrary("ffmpeg");
    }

  @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_latest);

          //Execute Command !!  
          try {
               Execute();
          } catch (IOException e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
          } catch (InterruptedException e) {
               // TODO Auto-generated catch block
                e.printStackTrace();
          }
     }

public void Execute() throws IOException, InterruptedException{
        try {
            File dir=new File("/system/bin");
            String[] cmd= {"ffmpeg","-codecs"};

            process=Runtime.getRuntime().exec(cmd,null,dir);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.d("Process IOException starts:",e.getMessage());
            e.printStackTrace();
            Log.d("System Manual exit !!",e.getMessage());
            System.exit(MODE_PRIVATE);
        }

        BufferedReader stdInput = new BufferedReader(new InputStreamReader(process.getInputStream()),16384);

         BufferedReader stdError = new BufferedReader(new InputStreamReader(process.getErrorStream()));

           // read the output from the command
           Log.d("Application output: ","Output if any !"); 
            while ((text = stdInput.readLine()) != null) {
                Log.d("Output: ",text); //$NON-NLS-1$
               }

        text="";
           // read any errors from the attempted command
        Log.d("Application output: ","Errors if any !");  //$NON-NLS-1$
           while ((text = stdError.readLine()) != null) {

               Log.d("Error: ",text);  //$NON-NLS-1$
           }

           stdInput.close();
           stdError.close();

           process.waitFor();
           process.getOutputStream().close();
           process.getInputStream().close();
           process.getErrorStream().close(); 
           destroyProcess(process);
           //process.destroy();

    }

    private static void destroyProcess(Process process) {
        try {
            if (process != null) {
                // use exitValue() to determine if process is still running.
                process.exitValue();
            }
        } catch (IllegalThreadStateException e) {
            // process is still running, kill it.
            process.destroy();
        }
    }

  } 
```

这是 logcat 输出：

```
09-05 15:29:13.287: D/dalvikvm(2670): No JNI_OnLoad found in /system/lib/libffmpeg.so 0x44e7e910, skipping init
09-05 15:29:29.117: I/global(2670): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
09-05 15:29:29.117: D/Application output:(2670): Output if any !
09-05 15:29:29.117: D/Application output:(2670): Errors if any !
09-05 15:29:29.127: D/Error:(2670): /system/bin/ffmpeg: 1: Syntax error: "(" unexpected 
```

m 既没有得到任何错误，也没有输出命令。
最后它显示语法错误。
我想知道它是什么样的语法错误。如何解决？

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-18T04:45:40.683

如果 ffmpeg 文件未针对您的 cpu 架构编译，则会出现此错误。

您的命令可能是正确的，但您需要找到正确的 ffmpeg 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T05:01:46.760

**已修复@Gaganpreet** Singh 您在对此进行了如此多的研究之后，我必须知道 CPU 芯片组也很重要，FFMPEG 命令不支持 INTEL ATOM 处理器。Asus Memo Pad 7 使用 INTEL ATOM cpu 芯片组，尝试在其上运行 ffmpeg 命令时，它崩溃并抛出错误“ **SYNTAX ERROR** ”

除了使用 INTEL ATOM 芯片组的设备外，我的命令在所有设备上都能完美运行。

如果对您有帮助，请查看[此](http://ffmpeg.gusari.org/viewtopic.php?f=11&t=1894)链接和[此链接。](https://software.intel.com/en-us/android/articles/creating-a-hardware-decoder-integrating-ffmpeg-with-mediacodec-for-intel-atom-based-android)如果有人找到解决方案。请与我们分享。

**最后** 通过使用 NDK 为 x64 和 armv7 创建 ffmpeg 库来解决此问题。并在我的 Andriod 项目中使用了这个库。现在我有 2 个库并将这个库用于不同的 Android CPU ARCH。请也检查[此](https://stackoverflow.com/a/18344354/1071545)链接。非常有帮助。

# android - 将数据上传/同步到服务器的最佳方法？

> ID：12279263
> 
> 赞同：2
> 
> 时间：2012-09-05T10:20:28.317
> 
> 标签：android, service

**场景：**我的应用程序有很多活动。最后，用户只需单击一下即可上传他的所有数据。

**问题：**如果用户在移动并且停止服务（互联网服务/连接不良），则可能会出现问题，然后他/她无法上传数据。

在这种情况下，我想知道什么可能是**最有效的方法。**

我想到了一种方法。如果由于连接性差/没有服务，我会将数据本地保存在 SQLite 中。当用户下次打开应用程序时保持线程处于活动状态以检查服务/连接是否可用。如果是，它将立即上传。

我将热切地等待您的评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:24:39.210

使用同步标志将所有数据保存到 SQLite。使用服务不断检查未同步的标志，并尝试在后台发送到服务器，同步完成时更新标志。

另一种方法是，如果您从 SQLite 同步到直接 SQL Server，您可以设置事务或批量更新，因此如果连接失败，它将恢复事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T10:24:58.040

为了学习如何上传数据，我建议观看 Google I/O 2012 - 让优秀的应用变得更好：面向专家 Android 开发人员的更高级主题： [http](http://www.youtube.com/watch?v=PwC1OlJo5VM#) ://www.youtube.com/watch?v= PwC1OlJo5VM# 从 16:43 开始。它处理效率和对电池寿命的影响。

总结视频：

由于电话收音机的工作原理，请进行一次大型上传而不是多次小型上传，并尽量减少与网络的接触。

在较低的级别上按照user370305所说的那样，尝试上传数据，如果没有连接延迟，则在用户下次打开应用程序或单击上传按钮时上传。

# asp.net-mvc - MVC：在控制器或视图中计算 UI 元素？

> ID：12279265
> 
> 赞同：0
> 
> 时间：2012-09-05T10:20:34.550
> 
> 标签：asp.net-mvc, model-view-controller, presentation-layer

我正在开发一个 ASP.Net MVC 应用程序，它的架构由通常的 DAL、BL 和 PL 层组成。

地址在数据库中存储为单独的字段，但应显示在 UI 中的单个字段中。

在显示方面，我需要处理各种可选字段（例如州、国家、地址的几行）。

我的问题：这种有效显示字符串的计算应该由控制器还是视图来处理？MVC 范式是否为这个问题提供了一些规则或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:52:43.580

在适当的 MVC 设计模式中，视图应该决定将显示哪些信息以及如何显示。控制器应该只负责改变模型层和当前视图的状态。

但这可能是不可能的，因为 Rails 对 ASP.NET MVC 框架的影响很大，因为您可能没有真实的视图。只是一个愚蠢的模板。而且这两个不是一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:37:44.267

你的控制器不应该知道地址是如何显示的——因为你可能有不同的视图调用相同的控制器动作来以不同的方式呈现地址。您关注的是如何为特定目的呈现地址

# java - Google Maps overview_polyline 给出错误的值

> ID：12279267
> 
> 赞同：1
> 
> 时间：2012-09-05T10:20:41.240
> 
> 标签：java, google-maps, google-maps-api-3

我的应用程序是 java google map web 应用程序。获得 2 分并发送给 Google `http://maps.googleapis.com/maps/api/directions/json?origin="+saddr+"&destination="+daddr+"&sensor=false`，它会给出 json。然后我有 decode `overview_polyline`。我的问题是有时它会提供扩展的价值。

这是我的解码部分。

```
 public static ArrayList<Location> decodePoly(String encoded) {
      ArrayList<Location> poly = new ArrayList<Location>();
      int index = 0, len = encoded.length();
      int lat = 0, lng = 0;
      while (index < len) {
       int b, shift = 0, result = 0;
       do {
        b = encoded.charAt(index++) - 63;
        result |= (b & 0x1f) << shift;
        shift += 5;
       } while (b >= 0x20);
       int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
       lat += dlat;
       shift = 0;
       result = 0;
       do {
        b = encoded.charAt(index++) - 63;
        result |= (b & 0x1f) << shift;
        shift += 5;
       } while (b >= 0x20);
       int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
       lng += dlng;
       Location p = new Location((((double) lat / 1E5)),
         (((double) lng / 1E5)));

     //  System.out.println("==p==" +p.getLatitude());
      // System.out.println("==p==" +p.getLongitude());
       poly.add(p);
      }
      return poly;
     } 
```

![在此处输入图像描述](../Images/a047d797356ecca2522f7916af6eb9f4.png)

黑色标记，代表没有前往那条路径。但它是这样画的。 `http://maps.googleapis.com/maps/api/directions/json?origin=6.95522,79.8864&destination=6.96165,79.8958&sensor=false` 这`overview_polyline`是`_pmi@}xqfNEkEM{@DREUOc@Wi@MOkBmCi@k@o@o@gA}@qD_DiDgD{MoN_DeDJEVGvBS`

绘制的第二条错误路径![在此处输入图像描述](../Images/1057e2a8bda58f02bc0567f005c9ec45.png)

这是我的数据库示例数据... ![在此处输入图像描述](../Images/98f11d6b025958a006f9fc4226138ff6.png)

请给出一些想法？什么是问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:13:03.570

可能这只是应用于点的平滑错误，如[文档](https://developers.google.com/maps/documentation/directions/?hl=en)中所述：

> overview_polyline 包含一个对象，该对象包含一个编码点数组，这些编码点表示结果方向的近似（平滑）路径。

我实际上看到了我的路径是如何绘制的两次，所以最后一个点与第一个点相连，形成一条封闭的路径。

我猜想调用输出中的这个元素只是用于远变焦或类似用途。

但是，您仍然可以按照本文所述解析其余[内容](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo/11745316#11745316)。

# android - 如何在android中恢复活动状态？

> ID：12279269
> 
> 赞同：1
> 
> 时间：2012-09-05T10:20:42.833
> 
> 标签：android, android-spinner

如何退出活动并将其恢复到之前的状态？在那个活动中，我有微调器。如果我从下拉列表中选择第二个项目，我会退出该活动并再次返回，该活动正在重新加载。但我想恢复活动之前的确切内容？

```
spinner.post(new Runnable() {
        public void run() {
            spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

                @Override
                public void onItemSelected(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    dealerCd_fromDD = dealerInsp.getMap2().get(
                            dealerInsp.getLoadseqArray()[arg2]);
                    GlobalVehicle.setVehList(loadVehicles(dealerCd_fromDD));
                    loadHosts(GlobalVehicle.getVehList());
                    dealerDetails(dealerCd_fromDD, GlobalVehicle.getDealerObject());
                    loadDefaults(arg2);
                    pos=arg2;
                    deliveryInspDb.delete("damages");
                }

                @Override
                public void onNothingSelected(AdapterView<?> arg0) {

                }
            });
        }
    }); 
```

请任何人都可以帮助我。

我试图调用finish()，但我是从3 个不同的活动中来的。所以在那种情况下它不起作用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:48:12.863

您可以将您的数据存储到[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)的`onStop()`or`onPause()`并检索它`onRestart()`的活动事件。

```
 @Override
        protected void onStop() {
            // TODO Auto-generated method stub
            super.onStop();
            SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
            SharedPreferences.Editor editor = settings.edit();                      
            editor.putInt("Selected", spinner.getSelectedItemPosition());
            editor.commit();
        }
     ....

    @Override
    protected void onRestart() {
        // TODO Auto-generated method stub
        super.onRestart();          
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
        spinner.setSelection(settings.getInt("Selected", 0));           
    } 
```

`onCreate()`如果您希望即使您的活动被终止也应该恢复您的数据，您也可以检索它。

更新：如果你来自不同的活动，你可以尝试`Intent.FLAG_ACTIVITY_REORDER_TO_FRONT`，如果它没有被杀死，这会将你的活动带到前面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:57:37.040

尝试使用`onSaveInstanceState`保存活动状态和`onRestoreInstanceState`检索活动状态..查看此链接，它可能会解决问题。 [https://stackoverflow.com/a/151940/1626878](https://stackoverflow.com/a/151940/1626878)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:32:29.923

[http://wptrafficanalyzer.in/blog/implement-swiping-between-tabs-with-viewpager-in-action-bar-using-sherlock-library/](http://wptrafficanalyzer.in/blog/implement-swiping-between-tabs-with-viewpager-in-action-bar-using-sherlock-library/) 尝试使用片段。您可以跟进链接。

# iphone - 填充 UIBezierPath

> ID：12279271
> 
> 赞同：2
> 
> 时间：2012-09-05T10:20:45.453
> 
> 标签：iphone, ios, ipad, quartz-2d

我正在尝试动态创建拼图，它看起来像这样：
![未填充的拼图](../Images/db36d48ea43e3e90e7298201c095ebb6.png)
我想用一些颜色填充这个形状，所以它看起来像这样：
![填充拼图](../Images/90f0f258da1fc9901b725daa095985f2.png)
所以我可以用它来掩盖一些图像。
**问题：** 我用 4 UIBezierPath 创建了这个形状，然后使用`appendPath`.
我想填充这条路径，但是当我使用时，`fill`我得到了这个：
![坏填充拼图](../Images/e73909ee1c94cc25a6d3ebe08c0734a7.png)
**你有什么想法可以填充相同的形状吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T10:11:27.680

一段时间后，我找到了获得这些结果的原因。如果你想创建一些填充路径，你不应该使用`moveToPoint`方法，而应该只使用一次设置第一个点`moveToPoint`，然后用 , 等绘制所有`addLineToPoint`线条`addCurveToPoint`。

完成绘制路径后，不要忘记发送`closePath`消息。

在我知道这一点之前，我使用不同的 UIBezierPath 实例绘制了拼图的每一面，并且对于我设置的第一点使用`moveToPoint`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:35:13.513

如果你有一个定义你的拼图的路径，如果你把它变成一个，操作起来会更容易`CAShapeLayer`：

```
CAShapeLayer *myShapeLayer = [CAShapeLayer layer];
myShapeLayer.path = myBezierCurves.CGPath;
myShapeLayer.fillColor = [[UIColor blackColor] CGColor];

myShapeLayer.strokeColor = [[UIColor redColor] CGColor];
myShapeLayer.lineWidth = 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:35:13.400

试试这个：打算用所有组合点制作一个 UIbenzierPath

在 .m 文件中添加以下方法。

```
 void MyCGPathApplierFunc (void *info, const CGPathElement *element) {

UIBezierPath *drawingPath = (UIBezierPath *)info;
CGPoint *points = element->points;
CGPathElementType type = element->type;

switch(type) {
    case kCGPathElementMoveToPoint: // contains 1 point
        [drawingPath moveToPoint:[[NSValue valueWithCGPoint:points[0]] CGPointValue]];
        break;

    case kCGPathElementAddLineToPoint: // contains 1 point
        [drawingPath addLineToPoint:[[NSValue valueWithCGPoint:points[0]] CGPointValue]];
        break;
    case kCGPathElementAddQuadCurveToPoint: // contains 1 point
        [drawingPath addQuadCurveToPoint:[[NSValue valueWithCGPoint:points[0]] CGPointValue]];
        break;

   case kCGPathElementAddCurveToPoint: // contains 1 point
        [drawingPath addCurveToPoint:[[NSValue valueWithCGPoint:points[0]] CGPointValue]];
        break;

    case kCGPathElementCloseSubpath: // contains no point
        break;
}
} 
```

添加 UIBezierPath *combinedpath; 在 .h 文件中，你可以使用如下方法：

```
combinedpath = [[UIBezierPath alloc]init];
CGPathApply(appendedBenzierPath.CGPath, (void *)combinedpath, MyCGPathApplierFunc);
[self setNeedsDisplay]; 
```

现在填写这些组合路径

```
- (void)drawRect:(CGRect)rect
{
  [[UIColor blackColor] setStroke];
  [combinedpath strokeWithBlendMode:kCGBlendModeNormal alpha:1.0];
  [combinedpath fill];
} 
```

# c# - 如何从 C# 中的文件路径中去除引号和命令行参数？

> ID：12279276
> 
> 赞同：3
> 
> 时间：2012-09-05T10:20:46.340
> 
> 标签：c#, command-line, filenames, quotes, strip

我有引号中的文件路径，带有空格的文件夹名称，如下所示，至少附加了两个不同长度和值的命令行参数：

**“C:\我的程序\示例文件夹\SubFolder2\MyApp1.exe”-parameter13XY1 -parameter101XZ2**

我只想有不带引号且不带命令行参数的文件名：

**C:\我的程序\示例文件夹\SubFolder2\MyApp1.exe**

我会在框架中搜索像“ *StripQuotes* ”和“ *StripCommandLineArgs* ”这样的函数，但我没有找到任何类似的东西，因为框架几乎所有东西都缺少所需的东西。至于引号它可能会做一个“替换”，但命令行参数不能这样排序。文件名还包含空格，因此无法使用 Split()，因为它会删除文件名的一部分。

最后，我只想拥有不带引号和命令行参数的文件名。请注意，文件名还可以包含空格和连字符以及它们的两种组合，如下所示：

**“C:\My Program - Win64\Sample-Folder\Sub -Folder3\My App55-.exe -parameter1 -parameter2 para3”**

在这种情况下，我不知道如何仅找出有效路径。还可能附加五个命令行参数，甚至 10 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:33:39.273

您可以使用正则表达式`"^\"([^\"]*)\".*$"`来获取引用字符串的内容，如下所示：

```
var s = "\"C:\\My Program\\Sample Folder\\SubFolder2\\MyApp1.exe\" -parameter13XY1 -parameter101XZ2";
var res = Regex.Replace(s, "^\"([^\"]*)\".*$", "$1");
Console.WriteLine(res); 
```

这是[ideone 的链接](http://ideone.com/3xvKD)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:31:11.167

一个稍微重一点的答案是使用像[http://commandline.codeplex.com/](http://commandline.codeplex.com/)这样的命令行解析库。它为您处理所有解析，而无需处理正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:27:48.467

[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)可以为要拆分的字符提供一个参数 - 所以如果你试试这个：

```
var array = filename.Split('"'); 
```

你应该得到一个包含两个元素的数组：

```
array[0] = "C:\My Program\Sample Folder\SubFolder2\MyApp1.exe"
array[1] = "-parameter13XY1 -parameter101XZ2" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:29:36.777

非常粗略和快速的解决方案：

```
string cmd = "\"C:\\My Program\\Sample Folder\\SubFolder2\\MyApp1.exe\" -parameter13XY1 -parameter101XZ2";
var allStrings = cmd.Split(new char[] {'"'} ); 
```

# sql-server - 使用 SQL Report Server 格式化日期

> ID：12279277
> 
> 赞同：1
> 
> 时间：2012-09-05T10:21:00.530
> 
> 标签：sql-server, datetime, reporting-services, formatting

我正在尝试根据通用的“2012-09-04 10:20:12 AM”格式格式化当前日期，但不知何故“AM”部分总是丢失。

我正在使用表达式`"..." & Format(CDate(Now), "yyyy-MM-dd hh:mm:ss tt")`来格式化日期并将其附加到一些文本中。这会发出下面复制的警告，但会正确打印出日期（AM/PM 指示符除外）。

```
[rsRuntimeErrorInExpression] textrun 的值表达式
'EmissionDate.Paragraphs[0].TextRuns[0]' 包含错误：输入字符串
格式不正确。

```

我在这里做错了什么？

注意：我知道[这个 SO 帖子](https://stackoverflow.com/questions/6305106/how-to-display-time-value-in-a-given-string-format-within-ssrs-report)和 SQL Server 查询支持的解决方案，但我想尽可能多地使用内置函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:43:59.243

我找到了这篇文章，也许它可以解决你的问题。我知道你已经在使用，`Format(CDate)`但既然你在使用`(Now)`，witch 是一个日期时间变量，也许你应该使用`FormatDateTime()`而不是`Format()`.

也试试这个：而不是：`Format(CDate(Now), "yyyy-MM-dd hh:mm:ss tt")` 使用： `Format(CDate(Now), "yyyy-MM-dd hh:mm:ss am/pm")`

链接：[在 Reporting Services 中使用日期](http://thavash.wordpress.com/2007/04/10/working-with-dates-in-reporting-services/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:16:42.390

根据我之前的评论，该报告的`Language`属性引用了一种没有定义 AM/PM 指示符的文化。将其更改`en-US`为按预期显示 AM/PM 指示符。

# c# - 加载程序集会引发异常

> ID：12279281
> 
> 赞同：0
> 
> 时间：2012-09-05T10:21:10.317
> 
> 标签：c#, visual-studio

我正在尝试加载程序集，但遇到异常`File is already in use by another process`。

实际上我打开了一个项目`Visual Studio`，其他程序正在加载一个通过`Visual Studio`以下创建的 dll 是加载程序集的代码：

```
Assembly asm = Assembly.LoadFrom(fileName); 
```

实际上我想加载一个程序集并读取类型的所有类型和属性并将它们显示在我的应用程序中。

我能够获取所有类型和属性，如果`Visual Studio`没有打开它就可以工作，但是如果我尝试使用 VS 使用的任何 dll，我会得到相同的异常。

在某些程序中，例如`Reflector`，可以加载一段`dll`时间，它用于`VS`. 也许还有另一种方法可以做到这一点。

# android - 在android中访问内部/外部存储器

> ID：12279286
> 
> 赞同：0
> 
> 时间：2012-09-05T10:21:30.007
> 
> 标签：android

我对 android 编程很陌生，我需要你的帮助才能在我的应用程序中进一步进行。我想通过具有写入和读取权限的应用程序访问 android 手机的内部或外部存储器。我想让用户选择在应用程序中使用哪个内存。

我会感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:45:17.747

要检查 sdCard 是否存在于 android 设备中：

```
android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED); 
```

获取 sd 卡的根目录：

```
Environment.getExternalStorageDirectory(); 
```

存储到您的手机内存到您的包数据文件夹中：

```
String pathOfRoot = "/data/data/" + getPackageName(); 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:45:28.963

对于外部存储 **使用这个：**

```
File folder = new File(Environment.getExternalStorageDirectory() + "/dirName" );
        if(!folder.exists())
        {
            folder.mkdir();
            Log.i("Log", "folder created");
        } 
```

这将在您的**sdcard中创建一个名为****dirName**的文件夹。这意味着您可以通过此**Environment.getExternalStorageDirectory()**方法访问外部存储。

 ****但是为此，您必须将权限添加到您的`menifest`文件中，如下所示：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```****

# ms-access - 如何通过访问 97 将货币值四舍五入到小数点后 2 位

> ID：12279297
> 
> 赞同：0
> 
> 时间：2012-09-05T10:22:07.400
> 
> 标签：ms-access

Access 97 有很多限制，但这是我需要的解决方案的技术限制。

在将值四舍五入到两位小数并将它们存储在货币列中之后，当我从两个货币列创建一个计算列时，我在某些列上的结果超过了两位小数。这很奇怪，因为我只从另一列中减去一列......

Access 97 没有舍入功能，我无法使用 sql 脚本创建具有小数限制的货币列（我的表是临时表）。

有没有办法在数据库中有一个有效的结果？或者我是否必须根据我的应用程序代码中的结果来计算这一列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:26:04.910

格式可能适合。它总是四舍五入。

```
 Debug.Print Format(19.955, "#.00")
  'Answer: 19.96 
```

# c# - 贝宝沙盒 - 测试购买任何东西时不扣除金额？

> ID：12279298
> 
> 赞同：0
> 
> 时间：2012-09-05T10:22:11.060
> 
> 标签：c#, asp.net, paypal, sandbox, paypal-sandbox

我已经使用 Paypal Sandbox 设置了个人和企业帐户。例如，当我运行测试购买时，企业帐户余额为 309539.24 美元，个人帐户余额为 4740.01 美元。当我购买任何东西时，购买过程正在成功运行。但个人沙盒账户和企业沙盒账户均不扣减金额。贝宝沙箱配置文件已成功创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:24:11.540

您是否检查了两个账户（即卖方和买方）的交易历史？交易/购买是否显示在那里？

**这就是您为测试创建沙盒帐户的方式。**

转到[https://www.sandbox.paypal.com/](https://www.sandbox.paypal.com/) 登录您的帐户。

在“沙盒”下，单击“测试帐户” ![在此处输入图像描述](../Images/f1831ee77861c25040b327aebbf5936f.png)

要创建新的测试帐户，您有两种选择：1) 预配置 2) 手动创建

单击“预配置”。填写详细信息，然后点击“创建帐户”

按照相同的步骤创建第二个帐户。

*最佳做法是将一个帐户命名为“卖方”，将另一个帐户命名为“买方” 这将避免任何混淆*

* * *

**创建按钮并进行购买：**

点击卖家账户。输入密码并登录。

转到“商家服务”选项卡为卖家创建产品/按钮。

*注意：出于某种原因，单击“商户服务”会使您退出该帐户。PayPal 的 Sandbox 站点可能存在一些问题。*

替代方法是转到“我的帐户” => 点击个人资料 => 销售偏好 => 我保存的按钮 => 创建新按钮

输入产品详细信息后，单击“创建按钮”，您将获得 HTML 片段。将其粘贴到记事本文件中，并使用“.html”扩展名保存。 ![在此处输入图像描述](../Images/56ae9dbf2e8b4a5a42413b223dfed25a.png)

在浏览器中打开文件，点击按钮购买产品。单击使用 PayPal 结帐。使用买家账号登录，完成购买。

这将影响买卖双方的账户余额。您将能够在卖家和买家账户中看到交易（在“概览”或“历史”下）

希望它可以帮助你。

谢谢你。

# android - 按下时Android GridView Selected Item背景颜色发生变化

> ID：12279300
> 
> 赞同：1
> 
> 时间：2012-09-05T10:22:12.757
> 
> 标签：android, gridview, background, imageview, background-color

我在我的android应用程序中有使用gridview的imageview。所以在gridview中按下图像时，背景颜色想要改变。如果我返回，它将变为正常的背景颜色。如何做到这一点？谁能帮我解决这个问题问题？

这是我的代码

```
public class CustomGridViewExample extends Activity {

    private Integer[] mThumbIds = {
            R.drawable.android_2,
            R.drawable.android_2,
            R.drawable.android_2,
            R.drawable.android_2,
            R.drawable.android_2,
            R.drawable.android_2,
            R.drawable.android_2,
            R.drawable.android_2,
            R.drawable.android_2,
            R.drawable.android_2,

            };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setAdapter(new MyAdapter(this));
        gridview.setNumColumns(4);
    }

  public class MyAdapter extends BaseAdapter {

        private Context mContext;

        public MyAdapter(Context c) {
            mContext = c;
        }

        @Override
        public int getCount() {
            return mThumbIds.length;
        }

        @Override
        public Object getItem(int arg0) {
            return mThumbIds[arg0];
        }

        @Override
        public long getItemId(int arg0) {
            return arg0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) { 

            View grid;

            if(convertView==null){
                grid = new View(mContext);
                LayoutInflater inflater=getLayoutInflater();
                grid=inflater.inflate(R.layout.mygrid_layout, parent, false);
            }else{
                grid = (View)convertView;
            }

            ImageView imageView = (ImageView)grid.findViewById(R.id.image);
            imageView.setImageResource(mThumbIds[position]);

            return grid;
        }

    } 
```

相关的 XML 文件如下：

```
<GridView 
    android:id="@+id/gridview" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:numColumns="auto_fit" 
    android:verticalSpacing="10dp" 
    android:horizontalSpacing="10dp" 
    android:stretchMode="columnWidth" 
    android:gravity="center"
    android:scrollbars="none" />

mygrid_layout.xml

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:background="@drawable/customshape_header"
    android:orientation="vertical">
    <ImageView 
        android:id="@+id/image" 
        android:layout_width="fill_parent"  
        android:layout_height="wrap_content"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:52:19.657

在您的 Drawable 文件夹中创建 grid_selector.xml。然后编辑以下内容::`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@color/green" android:state_pressed="true"/>
    <item android:drawable="@color/blue" android:state_selected="true"/>
    <item android:drawable="@color/white"/>

</selector>` 
```

然后在你的 mygrid_layout.xml 文件中将此文件设置为相对布局中的背景..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:37:42.373

在您的 mygrid_layout.xml 中，使用您需要的颜色作为背景的相对布局选择器。

# mysql - 在 SQL 中检查每个月每天有多少次

> ID：12279301
> 
> 赞同：1
> 
> 时间：2012-09-05T10:22:12.270
> 
> 标签：mysql, sql

我想要一个 sql 查询，它可以让我计算某个特定月份有多少次星期一、星期二……等等。谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:34:40.210

**（已编辑）**

鉴于[MySQL 日期函数](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html)和一些更简单的问题（[一个月有多少天](http://forums.databasejournal.com/showthread.php?45380-sql-query-for-number-days-in-a-month-amp-number-of-sundays-in-a-month...)或[查找月份天数](https://stackoverflow.com/questions/4712863/find-month-days)），我已经提出了这个表达式：

```
ceil((day(last_day($dateInMonth)) - (7 + dayofweek(last_day($dateInMonth)) - $weekday) % 7) / 7) 
```

其中 $dateInMonth 是请求月份中的日期（例如`'2012-09-05'`今天），$weekday 是 SQL 中的工作日编号（1 代表星期日，7 代表星期六）。

例如：这个月（2012 年 9 月）有 4 个星期五，但有 5 个星期六：

```
select ceil((day(last_day('2012-09-05')) - (7 + dayofweek(last_day('2012-09-05')) - 6) % 7) / 7);
select ceil((day(last_day('2012-09-05')) - (7 + dayofweek(last_day('2012-09-05')) - 7) % 7) / 7); 
```

**其他可能性：**

*   调用一些外部代码（例如 Java，如果 DBMS 允许）
*   使用该预先计算的数据创建一个表（例如 DAYSPERMONTH）（如果月份可能在合理范围内）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:29:45.730

检查[sql方法](http://searchoracle.techtarget.com/answer/Using-SQL-to-find-the-number-of-Sundays-in-a-month)。查找月份中的特定天数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:42:26.880

此功能可以永久使用，并具有多种用途。

您所要做的就是创建函数并运行正确的`select`语句。我在函数末尾提供了一个示例（取自[本网站](http://sqlteam.com/forums/topic.asp?TOPIC_ID=61519)）。

只需将`*database*`顶部和底部的单词替换为您的数据库名称：

```
use *database*    
      SET ANSI_NULLS OFF
        GO

        SET QUOTED_IDENTIFIER ON
        GO

        create function [dbo].[F_TABLE_DATE]
        (
            @FIRST_DATE     datetime,
            @LAST_DATE      datetime
        )
        /*
        Function: dbo.F_TABLE_DATE

        This function returns a date table containing all dates
        from @FIRST_DATE through @LAST_DATE inclusive.
        @FIRST_DATE must be less than or equal to @LAST_DATE.
        The valid date range is 1754-01-01 through 9997-12-31.
        If any input parameters are invalid, the function will produce
        an error.

        The table returned by F_TABLE_DATE contains a date and
        columns with many calculated attributes of that date.
        It is designed to make it convenient to get various commonly
        needed date attributes without having to program and test
        the same logic in many applications.

        F_TABLE_DATE is primarily intended to load a permanant
        date table, but it can be used directly by an application
        when the date range needed falls outside the range loaded
        in a permanant table.

        If F_TABLE_DATE is used to load a permanant table, the create
        table code can be copied from this function.  For a permanent
        date table, most columns should be indexed to produce the
        best application performance.

        Column Descriptions
        ------------------------------------------------------------------

        DATE_ID               
            Unique ID = Days since 1753-01-01

        DATE                            
            Date at Midnight(00:00:00.000)

        NEXT_DAY_DATE                   
            Next day after DATE at Midnight(00:00:00.000)
            Intended to be used in queries against columns
            containing datetime values (1998-12-13 14:35:16)
            that need to join to a DATE.
            Example:

            from
                MyTable a
                join
                DATE b
                on  a.DateTimeCol >= b. DATE    and
                    a.DateTimeCol < b.NEXT_DAY_DATE

        YEAR                            
            Year number in format YYYY, Example = 2005

        YEAR_QUARTER                    
            Year and Quarter number in format YYYYQ, Example = 20052

        YEAR_MONTH                      
            Year and Month number in format YYYYMM, Example = 200511

        YEAR_DAY_OF_YEAR                
            Year and Day of Year number in format YYYYDDD, Example = 2005364

        QUARTER                         
            Quarter number in format Q, Example = 4

        MONTH                           
            Month number in format MM, Example = 11

        DAY_OF_YEAR                     
            Day of Year number in format DDD, Example = 362

        DAY_OF_MONTH                    
            Day of Month number in format DD, Example = 31

        DAY_OF_WEEK                     
            Day of week number, Sun=1, Mon=2, Tue=3, Wed=4, Thu=5, Fri=6, Sat=7

        YEAR_NAME                       
            Year name text in format YYYY, Example = 2005

        YEAR_QUARTER_NAME               
            Year Quarter name text in format YYYY QQ, Example = 2005 Q3

        YEAR_MONTH_NAME                 
            Year Month name text in format YYYY MMM, Example = 2005 Mar

        YEAR_MONTH_NAME_LONG            
            Year Month long name text in format YYYY MMMMMMMMM,
            Example = 2005 September

        QUARTER_NAME                    
            Quarter name text in format QQ, Example = Q1

        MONTH_NAME                      
            Month name text in format MMM, Example = Mar

        MONTH_NAME_LONG                 
            Month long name text in format MMMMMMMMM, Example = September

        WEEKDAY_NAME                    
            Weekday name text in format DDD, Example = Tue

        WEEKDAY_NAME_LONG               
            Weekday long name text in format DDDDDDDDD, Example = Wednesday

        START_OF_YEAR_DATE              
            First Day of Year that DATE is in

        END_OF_YEAR_DATE                
            Last Day of Year that DATE is in

        START_OF_QUARTER_DATE           
            First Day of Quarter that DATE is in

        END_OF_QUARTER_DATE             
            Last Day of Quarter that DATE is in

        START_OF_MONTH_DATE             
            First Day of Month that DATE is in

        END_OF_MONTH_DATE               
            Last Day of Month that DATE is in

        *** Start and End of week columns allow selections by week
        *** for any week start date needed.

        START_OF_WEEK_STARTING_SUN_DATE 
            First Day of Week starting Sunday that DATE is in

        END_OF_WEEK_STARTING_SUN_DATE   
            Last Day of Week starting Sunday that DATE is in

        START_OF_WEEK_STARTING_MON_DATE 
            First Day of Week starting Monday that DATE is in

        END_OF_WEEK_STARTING_MON_DATE   
            Last Day of Week starting Monday that DATE is in

        START_OF_WEEK_STARTING_TUE_DATE 
            First Day of Week starting Tuesday that DATE is in

        END_OF_WEEK_STARTING_TUE_DATE   
            Last Day of Week starting Tuesday that DATE is in

        START_OF_WEEK_STARTING_WED_DATE 
            First Day of Week starting Wednesday that DATE is in

        END_OF_WEEK_STARTING_WED_DATE   
            Last Day of Week starting Wednesday that DATE is in

        START_OF_WEEK_STARTING_THU_DATE 
            First Day of Week starting Thursday that DATE is in

        END_OF_WEEK_STARTING_THU_DATE   
            Last Day of Week starting Thursday that DATE is in

        START_OF_WEEK_STARTING_FRI_DATE 
            First Day of Week starting Friday that DATE is in

        END_OF_WEEK_STARTING_FRI_DATE   
            Last Day of Week starting Friday that DATE is in

        START_OF_WEEK_STARTING_SAT_DATE 
            First Day of Week starting Saturday that DATE is in

        END_OF_WEEK_STARTING_SAT_DATE   
            Last Day of Week starting Saturday that DATE is in

        *** Sequence No columns are intended to allow easy offsets by
        *** Quarter, Month, or Week for applications that need to look at
        *** Last or Next Quarter, Month, or Week.  Thay can also be used to
        *** generate dynamic cross tab results by Quarter, Month, or Week.

        QUARTER_SEQ_NO                  
            Sequential Quarter number as offset from Quarter starting 1753/01/01

        MONTH_SEQ_NO                    
            Sequential Month number as offset from Month starting 1753/01/01

        WEEK_STARTING_SUN_SEQ_NO        
            Sequential Week number as offset from Week starting Sunday, 1753/01/07

        WEEK_STARTING_MON_SEQ_NO        
            Sequential Week number as offset from Week starting Monday, 1753/01/01

        WEEK_STARTING_TUE_SEQ_NO        
            Sequential Week number as offset from Week starting Tuesday, 1753/01/02

        WEEK_STARTING_WED_SEQ_NO        
            Sequential Week number as offset from Week starting Wednesday, 1753/01/03

        WEEK_STARTING_THU_SEQ_NO        
            Sequential Week number as offset from Week starting Thursday, 1753/01/04

        WEEK_STARTING_FRI_SEQ_NO        
            Sequential Week number as offset from Week starting Friday, 1753/01/05

        WEEK_STARTING_SAT_SEQ_NO        
            Sequential Week number as offset from Week starting Saturday, 1753/01/06

        JULIAN_DATE                     
            Julian Date number as offset from noon on January 1, 4713 BCE
            to noon on day of DATE in system of Joseph Scaliger

        MODIFIED_JULIAN_DATE            
            Modified Julian Date number as offset from midnight(00:00:00.000) on
            1858/11/17 to midnight(00:00:00.000) on day of DATE

        ISO_DATE                        
            ISO 8601 Date in format YYYY-MM-DD, Example = 2004-02-29

        ISO_YEAR_WEEK_NO                
            ISO 8601 year and week in format YYYYWW, Example = 200403

        ISO_WEEK_NO                     
            ISO 8601 week of year in format WW, Example = 52

        ISO_DAY_OF_WEEK                 
            ISO 8601 Day of week number, 
            Mon=1, Tue=2, Wed=3, Thu=4, Fri=5, Sat=6, Sun=7

        ISO_YEAR_WEEK_NAME              
            ISO 8601 year and week in format YYYY-WNN, Example = 2004-W52

        ISO_YEAR_WEEK_DAY_OF_WEEK_NAME  
            ISO 8601 year, week, and day of week in format YYYY-WNN-D,
            Example = 2004-W52-2

        DATE_FORMAT_YYYY_MM_DD          
            Text date in format YYYY/MM/DD, Example = 2004/02/29

        DATE_FORMAT_YYYY_M_D            
            Text date in format YYYY/M/D, Example = 2004/2/9

        DATE_FORMAT_MM_DD_YYYY          
            Text date in format MM/DD/YYYY, Example = 06/05/2004

        DATE_FORMAT_M_D_YYYY            
            Text date in format M/D/YYYY, Example = 6/5/2004

        DATE_FORMAT_MMM_D_YYYY          
            Text date in format MMM D, YYYY, Example = Jan 4, 2006

        DATE_FORMAT_MMMMMMMMM_D_YYYY    
            Text date in format MMMMMMMMM D, YYYY, Example = September 3, 2004

        DATE_FORMAT_MM_DD_YY            
            Text date in format MM/DD/YY, Example = 06/05/97

        DATE_FORMAT_M_D_YY              
            Text date in format M/D/YY, Example = 6/5/97

        */

        returns  @DATE table 
        (
        [DATE_ID]               [int]       not null 
            primary key clustered,
        [DATE]                  [datetime]  not null ,
        [NEXT_DAY_DATE]             [datetime]  not null ,
        [YEAR]                  [smallint]  not null ,
        [YEAR_QUARTER]              [int]   not null ,
        [YEAR_MONTH]                [int]       not null ,
        [YEAR_DAY_OF_YEAR]          [int]       not null ,
        [QUARTER]               [tinyint]   not null ,
        [MONTH]                 [tinyint]   not null ,
        [DAY_OF_YEAR]               [smallint]  not null ,
        [DAY_OF_MONTH]              [smallint]  not null ,
        [DAY_OF_WEEK]               [tinyint]   not null ,

        [YEAR_NAME]             [varchar] (4)   not null ,
        [YEAR_QUARTER_NAME]         [varchar] (7)   not null ,
        [YEAR_MONTH_NAME]           [varchar] (8)   not null ,
        [YEAR_MONTH_NAME_LONG]          [varchar] (14)  not null ,
        [QUARTER_NAME]              [varchar] (2)   not null ,
        [MONTH_NAME]                [varchar] (3)   not null ,
        [MONTH_NAME_LONG]           [varchar] (9)   not null ,
        [WEEKDAY_NAME]              [varchar] (3)   not null ,
        [WEEKDAY_NAME_LONG]         [varchar] (9)   not null ,

        [START_OF_YEAR_DATE]            [datetime]  not null ,
        [END_OF_YEAR_DATE]          [datetime]  not null ,
        [START_OF_QUARTER_DATE]         [datetime]  not null ,
        [END_OF_QUARTER_DATE]           [datetime]  not null ,
        [START_OF_MONTH_DATE]           [datetime]  not null ,
        [END_OF_MONTH_DATE]         [datetime]  not null ,

        [START_OF_WEEK_STARTING_SUN_DATE]   [datetime]  not null ,
        [END_OF_WEEK_STARTING_SUN_DATE]     [datetime]  not null ,
        [START_OF_WEEK_STARTING_MON_DATE]   [datetime]  not null ,
        [END_OF_WEEK_STARTING_MON_DATE]     [datetime]  not null ,
        [START_OF_WEEK_STARTING_TUE_DATE]   [datetime]  not null ,
        [END_OF_WEEK_STARTING_TUE_DATE]     [datetime]  not null ,
        [START_OF_WEEK_STARTING_WED_DATE]   [datetime]  not null ,
        [END_OF_WEEK_STARTING_WED_DATE]     [datetime]  not null ,
        [START_OF_WEEK_STARTING_THU_DATE]   [datetime]  not null ,
        [END_OF_WEEK_STARTING_THU_DATE]     [datetime]  not null ,
        [START_OF_WEEK_STARTING_FRI_DATE]   [datetime]  not null ,
        [END_OF_WEEK_STARTING_FRI_DATE]     [datetime]  not null ,
        [START_OF_WEEK_STARTING_SAT_DATE]   [datetime]  not null ,
        [END_OF_WEEK_STARTING_SAT_DATE]     [datetime]  not null ,

        [QUARTER_SEQ_NO]            [int]       not null ,
        [MONTH_SEQ_NO]              [int]       not null ,

        [WEEK_STARTING_SUN_SEQ_NO]      [int]       not null ,
        [WEEK_STARTING_MON_SEQ_NO]      [int]       not null ,
        [WEEK_STARTING_TUE_SEQ_NO]      [int]       not null ,
        [WEEK_STARTING_WED_SEQ_NO]      [int]       not null ,
        [WEEK_STARTING_THU_SEQ_NO]      [int]       not null ,
        [WEEK_STARTING_FRI_SEQ_NO]      [int]       not null ,
        [WEEK_STARTING_SAT_SEQ_NO]      [int]       not null ,

        [JULIAN_DATE]               [int]       not null ,
        [MODIFIED_JULIAN_DATE]          [int]       not null ,

        [ISO_DATE]              [varchar](10)   not null ,
        [ISO_YEAR_WEEK_NO]          [int]       not null ,
        [ISO_WEEK_NO]               [smallint]  not null ,
        [ISO_DAY_OF_WEEK]           [tinyint]   not null ,
        [ISO_YEAR_WEEK_NAME]            [varchar](8)    not null ,
        [ISO_YEAR_WEEK_DAY_OF_WEEK_NAME]    [varchar](10)   not null ,

        [DATE_FORMAT_YYYY_MM_DD]        [varchar](10)   not null ,
        [DATE_FORMAT_YYYY_M_D]          [varchar](10)   not null ,
        [DATE_FORMAT_MM_DD_YYYY]        [varchar](10)   not null ,
        [DATE_FORMAT_M_D_YYYY]          [varchar](10)   not null ,
        [DATE_FORMAT_MMM_D_YYYY]        [varchar](12)   not null ,
        [DATE_FORMAT_MMMMMMMMM_D_YYYY]      [varchar](18)   not null ,
        [DATE_FORMAT_MM_DD_YY]          [varchar](8)    not null ,
        [DATE_FORMAT_M_D_YY]            [varchar](8)    not null 
        ) 
        as
        begin
        declare @cr         varchar(2)
        select @cr          = char(13)+Char(10)
        declare @ErrorMessage       varchar(400)
        declare @START_DATE     datetime
        declare @END_DATE       datetime
        declare @LOW_DATE   datetime

        declare @start_no   int
        declare @end_no int

        -- Verify @FIRST_DATE is not null 
        if @FIRST_DATE is null
            begin
            select @ErrorMessage =
                '@FIRST_DATE cannot be null'
            goto Error_Exit
            end

        -- Verify @LAST_DATE is not null 
        if @LAST_DATE is null
            begin
            select @ErrorMessage =
                '@LAST_DATE cannot be null'
            goto Error_Exit
            end

        -- Verify @FIRST_DATE is not before 1754-01-01
        IF  @FIRST_DATE < '17540101'    begin
            select @ErrorMessage =
                '@FIRST_DATE cannot before 1754-01-01'+
                ', @FIRST_DATE = '+
                isnull(convert(varchar(40),@FIRST_DATE,121),'NULL')
            goto Error_Exit
            end

        -- Verify @LAST_DATE is not after 9997-12-31
        IF  @LAST_DATE > '99971231' begin
            select @ErrorMessage =
                '@LAST_DATE cannot be after 9997-12-31'+
                ', @LAST_DATE = '+
                isnull(convert(varchar(40),@LAST_DATE,121),'NULL')
            goto Error_Exit
            end

        -- Verify @FIRST_DATE is not after @LAST_DATE
        if @FIRST_DATE > @LAST_DATE
            begin
            select @ErrorMessage =
                '@FIRST_DATE cannot be after @LAST_DATE'+
                ', @FIRST_DATE = '+
                isnull(convert(varchar(40),@FIRST_DATE,121),'NULL')+
                ', @LAST_DATE = '+
                isnull(convert(varchar(40),@LAST_DATE,121),'NULL')
            goto Error_Exit
            end

        -- Set @START_DATE = @FIRST_DATE at midnight
        select @START_DATE  = dateadd(dd,datediff(dd,0,@FIRST_DATE),0)
        -- Set @END_DATE = @LAST_DATE at midnight
        select @END_DATE    = dateadd(dd,datediff(dd,0,@LAST_DATE),0)
        -- Set @LOW_DATE = earliest possible SQL Server datetime
        select @LOW_DATE    = convert(datetime,'17530101')

        -- Find the number of day from 1753-01-01 to @START_DATE and @END_DATE
        select  @start_no   = datediff(dd,@LOW_DATE,@START_DATE) ,
            @end_no = datediff(dd,@LOW_DATE,@END_DATE)

        -- Declare number tables
        declare @num1 table (NUMBER int not null primary key clustered)
        declare @num2 table (NUMBER int not null primary key clustered)
        declare @num3 table (NUMBER int not null primary key clustered)

        -- Declare table of ISO Week ranges
        declare @ISO_WEEK table
        (
        [ISO_WEEK_YEAR]         int     not null
            primary key clustered,
        [ISO_WEEK_YEAR_START_DATE]  datetime    not null,
        [ISO_WEEK_YEAR_END_DATE]    Datetime    not null
        )

        -- Find rows needed in number tables
        declare @rows_needed        int
        declare @rows_needed_root   int
        select  @rows_needed        = @end_no - @start_no + 1
        select  @rows_needed        =
                case
                when @rows_needed < 10
                then 10
                else @rows_needed
                end
        select  @rows_needed_root   = convert(int,ceiling(sqrt(@rows_needed)))

        -- Load number 0 to 16
        insert into @num1 (NUMBER)
        select NUMBER = 0 union all select  1 union all select  2 union all
        select          3 union all select  4 union all select  5 union all
        select          6 union all select  7 union all select  8 union all
        select          9 union all select 10 union all select 11 union all
        select         12 union all select 13 union all select 14 union all
        select         15
        order by
            1
        -- Load table with numbers zero thru square root of the number of rows needed +1
        insert into @num2 (NUMBER)
        select
            NUMBER = a.NUMBER+(16*b.NUMBER)+(256*c.NUMBER)
        from
            @num1 a cross join @num1 b cross join @num1 c
        where
            a.NUMBER+(16*b.NUMBER)+(256*c.NUMBER) <
            @rows_needed_root
        order by
            1

        -- Load table with the number of rows needed for the date range
        insert into @num3 (NUMBER)
        select
            NUMBER = a.NUMBER+(@rows_needed_root*b.NUMBER)
        from
            @num2 a
            cross join
            @num2 b
        where
            a.NUMBER+(@rows_needed_root*b.NUMBER) < @rows_needed
        order by
            1

        declare @iso_start_year int
        declare @iso_end_year   int

        select  @iso_start_year = datepart(year,dateadd(year,-1,@start_date))
        select  @iso_end_year   = datepart(year,dateadd(year,1,@end_date))

        -- Load table with start and end dates for ISO week years
        insert into @ISO_WEEK
            (
            [ISO_WEEK_YEAR],
            [ISO_WEEK_YEAR_START_DATE],
            [ISO_WEEK_YEAR_END_DATE]
            )
        select
            [ISO_WEEK_YEAR] = a.NUMBER,
            [0ISO_WEEK_YEAR_START_DATE] =
                dateadd(dd,(datediff(dd,@LOW_DATE,
                dateadd(day,3,dateadd(year,a.[NUMBER]-1900,0))
                )/7)*7,@LOW_DATE),
            [ISO_WEEK_YEAR_END_DATE]    =
                dateadd(dd,-1,dateadd(dd,(datediff(dd,@LOW_DATE,
                dateadd(day,3,dateadd(year,a.[NUMBER]+1-1900,0))
                )/7)*7,@LOW_DATE))
        from
            (
            select
                NUMBER = NUMBER+@iso_start_year
            from
                @num3
            where
                NUMBER+@iso_start_year <= @iso_end_year
            ) a
        order by
            a.NUMBER

        -- Load Date table
        insert into @DATE
        select
            [DATE_ID]           = a.[DATE_ID] ,
            [DATE]              = a.[DATE] ,

            [NEXT_DAY_DATE]         =
                dateadd(day,1,a.[DATE]) ,

            [YEAR]          =
                datepart(year,a.[DATE]) ,
            [YEAR_QUARTER]      =
                (10*datepart(year,a.[DATE]))+datepart(quarter,a.[DATE]) ,

            [YEAR_MONTH]        =
                (100*datepart(year,a.[DATE]))+datepart(month,a.[DATE]) ,
            [YEAR_DAY_OF_YEAR]      =
                (1000*datepart(year,a.[DATE]))+
                datediff(dd,dateadd(yy,datediff(yy,0,a.[DATE]),0),a.[DATE])+1 ,
            [QUARTER]       =
                datepart(quarter,a.[DATE]) ,
            [MONTH]     =
                datepart(month,a.[DATE]) ,
            [DAY_OF_YEAR]           =
                datediff(dd,dateadd(yy,datediff(yy,0,a.[DATE]),0),a.[DATE])+1 ,
            [DAY_OF_MONTH]          =
                datepart(day,a.[DATE]) ,
            [DAY_OF_WEEK]       =
                -- Sunday = 1, Monday = 2, ,,,Saturday = 7
                (datediff(dd,'17530107',a.[DATE])%7)+1  ,
            [YEAR_NAME]     =
                datename(year,a.[DATE]) ,
            [YEAR_QUARTER_NAME] =
                datename(year,a.[DATE])+' Q'+datename(quarter,a.[DATE]) ,
            [YEAR_MONTH_NAME]   =
                datename(year,a.[DATE])+' '+left(datename(month,a.[DATE]),3) ,
            [YEAR_MONTH_NAME_LONG]  =
                datename(year,a.[DATE])+' '+datename(month,a.[DATE]) ,
            [QUARTER_NAME]      =
                'Q'+datename(quarter,a.[DATE]) ,
            [MONTH_NAME]        =
                left(datename(month,a.[DATE]),3) ,
            [MONTH_NAME_LONG]   =
                datename(month,a.[DATE]) ,
            [WEEKDAY_NAME]      =
                left(datename(weekday,a.[DATE]),3) ,
            [WEEKDAY_NAME_LONG] =
                datename(weekday,a.[DATE]),

            [START_OF_YEAR_DATE]    =
                dateadd(year,datediff(year,0,a.[DATE]),0) ,
            [END_OF_YEAR_DATE]  =
                dateadd(day,-1,dateadd(year,datediff(year,0,a.[DATE])+1,0)) ,

            [START_OF_QUARTER_DATE] =
                dateadd(quarter,datediff(quarter,0,a.[DATE]),0) ,
            [END_OF_QUARTER_DATE]   =
                dateadd(day,-1,dateadd(quarter,datediff(quarter,0,a.[DATE])+1,0)) ,

            [START_OF_MONTH_DATE]   =
                dateadd(month,datediff(month,0,a.[DATE]),0) ,
            [END_OF_MONTH_DATE] =
                dateadd(day,-1,dateadd(month,datediff(month,0,a.[DATE])+1,0)),

            [START_OF_WEEK_STARTING_SUN_DATE]   =
                dateadd(dd,(datediff(dd,'17530107',a.[DATE])/7)*7,'17530107'),
            [END_OF_WEEK_STARTING_SUN_DATE]     =
                dateadd(dd,((datediff(dd,'17530107',a.[DATE])/7)*7)+6,'17530107'),

            [START_OF_WEEK_STARTING_MON_DATE]   =
                dateadd(dd,(datediff(dd,'17530101',a.[DATE])/7)*7,'17530101'),
            [END_OF_WEEK_STARTING_MON_DATE]     =
                dateadd(dd,((datediff(dd,'17530101',a.[DATE])/7)*7)+6,'17530101'),

            [START_OF_WEEK_STARTING_TUE_DATE]   =
                dateadd(dd,(datediff(dd,'17530102',a.[DATE])/7)*7,'17530102'),
            [END_OF_WEEK_STARTING_TUE_DATE]     =
                dateadd(dd,((datediff(dd,'17530102',a.[DATE])/7)*7)+6,'17530102'),

            [START_OF_WEEK_STARTING_WED_DATE]   =
                dateadd(dd,(datediff(dd,'17530103',a.[DATE])/7)*7,'17530103'),
            [END_OF_WEEK_STARTING_WED_DATE]     =
                dateadd(dd,((datediff(dd,'17530103',a.[DATE])/7)*7)+6,'17530103'),

            [START_OF_WEEK_STARTING_THU_DATE]   =
                dateadd(dd,(datediff(dd,'17530104',a.[DATE])/7)*7,'17530104'),
            [END_OF_WEEK_STARTING_THU_DATE]     =
                dateadd(dd,((datediff(dd,'17530104',a.[DATE])/7)*7)+6,'17530104'),

            [START_OF_WEEK_STARTING_FRI_DATE]   =
                dateadd(dd,(datediff(dd,'17530105',a.[DATE])/7)*7,'17530105'),
            [END_OF_WEEK_STARTING_FRI_DATE]     =
                dateadd(dd,((datediff(dd,'17530105',a.[DATE])/7)*7)+6,'17530105'),

            [START_OF_WEEK_STARTING_SAT_DATE]   =
                dateadd(dd,(datediff(dd,'17530106',a.[DATE])/7)*7,'17530106'),
            [END_OF_WEEK_STARTING_SAT_DATE]     =
                dateadd(dd,((datediff(dd,'17530106',a.[DATE])/7)*7)+6,'17530106'),

            [QUARTER_SEQ_NO]            = 
                datediff(quarter,@LOW_DATE,a.[DATE]),
            [MONTH_SEQ_NO]              =
                datediff(month,@LOW_DATE,a.[DATE]),

            [WEEK_STARTING_SUN_SEQ_NO]      =
                datediff(day,'17530107',a.[DATE])/7,
            [WEEK_STARTING_MON_SEQ_NO]      =
                datediff(day,'17530101',a.[DATE])/7,
            [WEEK_STARTING_TUE_SEQ_NO]      =
                datediff(day,'17530102',a.[DATE])/7,
            [WEEK_STARTING_WED_SEQ_NO]      =
                datediff(day,'17530103',a.[DATE])/7,
            [WEEK_STARTING_THU_SEQ_NO]      =
                datediff(day,'17530104',a.[DATE])/7,
            [WEEK_STARTING_FRI_SEQ_NO]      =
                datediff(day,'17530105',a.[DATE])/7,
            [WEEK_STARTING_SAT_SEQ_NO]      =
                datediff(day,'17530106',a.[DATE])/7,

            [JULIAN_DATE]           =
                datediff(day,@LOW_DATE,a.[DATE])+2361331,
            [MODIFIED_JULIAN_DATE]      =
                datediff(day,'18581117',a.[DATE]),
        --/*

            [ISO_DATE]      =
                replace(convert(char(10),a.[DATE],111),'/','-') ,

            [ISO_YEAR_WEEK_NO]      =
                (100*b.[ISO_WEEK_YEAR])+
                (datediff(dd,b.[ISO_WEEK_YEAR_START_DATE],a.[DATE])/7)+1 ,

            [ISO_WEEK_NO]       =
                (datediff(dd,b.[ISO_WEEK_YEAR_START_DATE],a.[DATE])/7)+1 ,

            [ISO_DAY_OF_WEEK]       =
                -- Sunday = 1, Monday = 2, ,,,Saturday = 7
                (datediff(dd,@LOW_DATE,a.[DATE])%7)+1  ,

            [ISO_YEAR_WEEK_NAME]        =
                convert(varchar(4),b.[ISO_WEEK_YEAR])+'-W'+
                right('00'+convert(varchar(2),(datediff(dd,b.[ISO_WEEK_YEAR_START_DATE],a.[DATE])/7)+1),2) ,

            [ISO_YEAR_WEEK_DAY_OF_WEEK_NAME]        =
                convert(varchar(4),b.[ISO_WEEK_YEAR])+'-W'+
                right('00'+convert(varchar(2),(datediff(dd,b.[ISO_WEEK_YEAR_START_DATE],a.[DATE])/7)+1),2) +
                '-'+convert(varchar(1),(datediff(dd,@LOW_DATE,a.[DATE])%7)+1) ,
        --*/
            [DATE_FORMAT_YYYY_MM_DD]        =
                convert(char(10),a.[DATE],111) ,
            [DATE_FORMAT_YYYY_M_D]      = 
                convert(varchar(10),
                convert(varchar(4),year(a.[DATE]))+'/'+
                convert(varchar(2),day(a.[DATE]))+'/'+
                convert(varchar(2),month(a.[DATE]))),
            [DATE_FORMAT_MM_DD_YYYY]        = 
                convert(char(10),a.[DATE],101) ,
            [DATE_FORMAT_M_D_YYYY]      = 
                convert(varchar(10),
                convert(varchar(2),month(a.[DATE]))+'/'+
                convert(varchar(2),day(a.[DATE]))+'/'+
                convert(varchar(4),year(a.[DATE]))),
            [DATE_FORMAT_MMM_D_YYYY]        = 
                convert(varchar(12),
                left(datename(month,a.[DATE]),3)+' '+
                convert(varchar(2),day(a.[DATE]))+', '+
                convert(varchar(4),year(a.[DATE]))),
            [DATE_FORMAT_MMMMMMMMM_D_YYYY]  = 
                convert(varchar(18),
                datename(month,a.[DATE])+' '+
                convert(varchar(2),day(a.[DATE]))+', '+
                convert(varchar(4),year(a.[DATE]))),
            [DATE_FORMAT_MM_DD_YY]      =
                convert(char(8),a.[DATE],1) ,
            [DATE_FORMAT_M_D_YY]        = 
                convert(varchar(8),
                convert(varchar(2),month(a.[DATE]))+'/'+
                convert(varchar(2),day(a.[DATE]))+'/'+
                right(convert(varchar(4),year(a.[DATE])),2))
        from
            (
            -- Derived table is all dates needed for date range
            select  top 100 percent
                [DATE_ID]   = aa.[NUMBER],
                [DATE]      =
                    dateadd(dd,aa.[NUMBER],@LOW_DATE)
            from
                (
                select
                    NUMBER = NUMBER+@start_no 
                from
                    @num3
                where
                    NUMBER+@start_no <= @end_no
                ) aa
            order by
                aa.[NUMBER]
            ) a
            join
            -- Match each date to the proper ISO week year
            @ISO_WEEK b
            on a.[DATE] between 
                b.[ISO_WEEK_YEAR_START_DATE] and 
                b.[ISO_WEEK_YEAR_END_DATE]
        order by
            a.[DATE_ID]

        return

        Error_Exit:

        -- Return a pesudo error message by trying to
        -- convert an error message string to an int.
        -- This method is used because the error displays
        -- the string it was trying to convert, and so the
        -- calling application sees a formatted error message.

        declare @error int

        set @error = convert(int,@cr+@cr+
        '*******************************************************************'+@cr+
        '* Error in function F_TABLE_DATE:'+@cr+'* '+
        isnull(@ErrorMessage,'Unknown Error')+@cr+
        '*******************************************************************'+@cr+@cr)

        return

        end

        GO

select YEAR_MONTH_NAME_LONG, WEEKDAY_NAME,COUNT(WEEKDAY_NAME)cnt
from database.dbo.F_TABLE_DATE('2012-01-01',GETDATE())
group by YEAR_MONTH_NAME_LONG, WEEKDAY_NAME
order by YEAR_MONTH_NAME_LONG 
```

# python - Python定时套接字连接

> ID：12279302
> 
> 赞同：2
> 
> 时间：2012-09-05T10:22:18.237
> 
> 标签：python, windows, sockets, network-programming

我正在寻找使用 TCP 完成往返服务器的时间。使用 Windows 客户端时。（我会使用 ping 但服务器阻止了这个）

我正在考虑使用 python 和套接字来完成这个，我目前有。

```
import time
import socket

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM )

start = time.time()
s.connect(('localhost',80))
print 'time taken ', time.time()-start ,' seconds'

s.close() 
```

我遇到的问题是我不认为连接计时器正在工作，因为我经常得到相同的时间戳返回。有人可以指出我正确的方向来解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T10:40:46.093

在 Windows 上，该`time.time()`值没有足够的粒度（只有 1/60 秒）。在 Windows 上使用[`time.perf_counter()`](http://docs.python.org/library/time.html#time.perf_counter)which 具有大约 1/3 微秒的分辨率，而不是：

```
start = time.perf_counter()
s.connect(('localhost',80))
print 'time taken ', time.perf_counter()-start ,' seconds' 
```

这与[`timeit`模块](http://docs.python.org/library/timeit.html)使用的定时器相同；您可以改用[.default_timer()](http://docs.python.org/library/timeit.html#timeit.default_timer)定义：

```
import timeit

start = timeit.default_timer()
# etc. 
```

这也适用于`time.perf_counter()`不可用的 Python 2，但 [`timeit.default_timer()`](https://docs.python.org/2/library/timeit.html#timeit.default_timer)将引用适用于您的操作系统的最佳可用计时器（在 Windows 上，在其他系统上`time.clock()`具有大约 1/100 秒的分辨率）。`time.time()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:40:50.157

使用以下修改后的脚本，我得到与 Windows 7 相同的结果`ping`。

```
import time
import socket
while True:
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM )
    start = time.time()
    s.connect(('www.google.at',80))
    print 'time taken ', (time.time()-start)*1000 ,' ms'
    s.close()
    time.sleep(1) 
```

ping 我的本地主机总是给我同样非常小的值。这可能是问题所在。

# java - 用于检索 j2se 元素的 JNLP API

> ID：12279303
> 
> 赞同：0
> 
> 时间：2012-09-05T10:22:19.940
> 
> 标签：java, api, jnlp

有没有办法从扩展安装程序（java 代码）中以*编程方式在 jnlp 文件中查找 j2se 值？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:45:48.680

可以，只要您能确定 JNLP 的 URL。JNLP 只是 XML，因此可以由 J2SE XML API 解析。

..我以为 Sun 介绍了一种提供 URL 的方法，但我现在不记得它是什么了。如果我记错了，一种方法是在主 JNLP 中写一个关于 URL 的属性，然后从那里获取它。

# java - 尝试运行我的代码时出现 NoSuchElementFound 异常 - 怎么了？

> ID：12279313
> 
> 赞同：1
> 
> 时间：2012-09-05T10:23:03.410
> 
> 标签：java, exception-handling

我编写了一个程序来模拟逻辑门操作。我的代码如下，

```
import java.io.*;
import java.util.Scanner;

// This program simulates the logic gates operations for the given input
class GatesSimulator
{
    int input1, input2, output;
    boolean boolInput1, boolInput2, boolOutput, validate = true;

    void simulateAndGate()
    {
        getInput();
        boolOutput = boolInput1 & boolInput2;
        showOutput("AND");
    }

    void simulateOrGate()
    {
        getInput();
        boolOutput = boolInput1 | boolInput2;
        showOutput("OR");
    }

    void simulateNotGate()
    {
        System.out.println("Under Development");
    }

    void simulateXorGate()
    {
        getInput();
        boolOutput = boolInput1 ^ boolInput2;
        showOutput("XOR");
    }

    void simulateNandGate()
    {
        getInput();
        boolOutput = !(boolInput1 & boolInput2);
        showOutput("NAND");
    }

    void simulateNorGate()
    {
        getInput();
        boolOutput = !(boolInput1 | boolInput2);
        showOutput("NOR");
    }

    void getInput()
    {

        Scanner simInput = new Scanner(System.in);

        while (validate)
        {

            // Scanner simInput = new Scanner(System.in);
            System.out.println("First Input:  ");
            input1 = simInput.nextInt();

            System.out.println("Second Input:  ");
            input2 = simInput.nextInt();
            // simInput.close();
            if ((input1 == 1 || input1 == 0) && (input2 == 1 || input2 == 0))
            {
                boolInput1 = (input1 == 1) ? true : false;
                boolInput2 = (input2 == 1) ? true : false;
                validate = false;
            }
            else
            {
                System.out.println("Enter a Valid Input(1/0)");
            }
        }
        simInput.close();
    }

    void showOutput(String gate)
    {

        output = (boolOutput == true) ? 1 : 0;
        System.out.println(input1 + " " + gate + " " + input2 + " = " + output);

    }
}

class Operations
{
    int choice;
    GatesSimulator simulator = new GatesSimulator();
    boolean contd = true;

    void chooseOperation()
    {

        Scanner input = new Scanner(System.in);

        while (contd)
        {
            System.out
                .println("Enter Your Choice of Simulation\n\t1 -> AND         Gate\n\t2 -> OR Gate\n\t3 -> NOT Gate\n\t4 -> XOR Gate\n\t5 -> NAND Gate\n\t6 -> NOR Gate\n\t7 -> Exit");
            // Scanner input = new Scanner(System.in);
            choice = input.nextInt();
            // input.close();
            switch (choice)
            {
            case 1:
                simulator.simulateAndGate();
                break;
            case 2:
                simulator.simulateOrGate();
                break;
            case 3:
                simulator.simulateNotGate();
                break;
            case 4:
                simulator.simulateXorGate();
                break;
            case 5:
                simulator.simulateNandGate();
                break;
            case 6:
                simulator.simulateNorGate();
                break;
            case 7:
                contd = false;
                break;
            default:
                System.out.println("\tEnter A valid Choice(1 to 7)\t");
            }
        }
        input.close();
    }
}

public class LogicGatesSimulator
{
    public static void main(String args[])
    {
        Operations gates = new Operations();
        System.out.println("\t\t\tLogic gate Simulator\t\t\t");
        gates.chooseOperation();
    }
} 
```

我得到一个像这样的输出：

```
Exception in thread "main" java.util.NoSuchElementException
     at java.util.Scanner.throwFor(Scanner.java:855)
     at java.util.Scanner.next(Scanner.java:1478)
     at java.util.Scanner.next(Scanner.java:1478)
     at java.util.Scanner.nextInt(Scanner.java:2067)
     at Operations.chooseOperation(LogicGatesSimulator.java:103)
     at LogicGatesSimulator.main(LogicGatesSimulator.java:132) 
```

我的代码有什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T10:35:21.360

您需要`hasNext()`在调用之前使用`nextInt()`

```
 if(scanner.hasNextInt())
        scanner.nextInt(); 
```

# android - 在 android 的 twitter 中向特定用户发送消息？

> ID：12279316
> 
> 赞同：0
> 
> 时间：2012-09-05T10:23:19.307
> 
> 标签：android

嗨，我正在从 twitter 获取朋友列表，现在我想向从列表中选择的特定用户发送推文。任何代码片段将不胜感激。这是我要`NullPointerException`上车了`twitter.sendmessage("id of user","msg")`

```
private void tweet(){
    setTitle("Tweet");
    AlertDialog.Builder inputDialog;
    inputDialog = new AlertDialog.Builder(MainActivity.this);
    inputDialog.setTitle("Enter Tweet");
    et_input = new EditText(MainActivity.this);
    et_input.setWidth(250);
    et_input.setHeight(30);
    inputDialog.setView(et_input);
    inputDialog.setPositiveButton("Ok",
    new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
        txt_tweet= et_input.getText().toString();
        System.out.println("String what i have type "+txt_tweet);
            try{
               twitter.sendMessage("testsynapse1", txt_tweet);
                Toast.makeText(MainActivity.this,
                    "Tweet Successful", Toast.LENGTH_LONG).show();
            }
            catch (TwitterException e) {
                // TODO: handle exception
                e.getMessage();
            }
        }
    });
    inputDialog.setNegativeButton("Cancle",
    new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
        }
    });
    inputDialog.show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:49:51.723

Do you know the username of particular user? If yes,

Then do like this:

```
String tweetToPost="@"+userName+"%20"+"your message"; 

postTweet(tweetToPost); 

public void postTweet(String str){
  String url="https://twitter.com/intent/tweet?text="+str.replace(" ","%20");

  WebView wv=new WebView(this);
        wv.loadUrl(url);
        setContentView(wv);
        wv.setWebViewClient(new WebViewClient(){

            @Override
            public void onPageFinished(WebView view, String url) {
                // TODO Auto-generated method stub
                super.onPageFinished(view, url);
            }

        });

} 
```

I don't know if it works or not. But generally tweets to a specific user in Twitter are in the same format.

# google-analytics - Concrete5 谷歌分析

> ID：12279322
> 
> 赞同：-1
> 
> 时间：2012-09-05T10:23:31.260
> 
> 标签：google-analytics

我如何让谷歌分析工作

我已将其放入站点/设置 - 跟踪代码中。我创建了一个谷歌分析帐户，但显示 0 访问

希望大家能帮忙

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:33:35.200

您需要一天的时间才能在 Google Analytics 中看到结果。这不是实时的......如果您将跟踪代码放在您的网站上，您应该很高兴。

将以下脚本紧跟在您的`<body>`标签之后。

```
<script type="text/javascript"> 
  var _gaq = _gaq || []; 
  _gaq.push(['_setAccount', '<<Your UA-000909 ID>>']); 
  _gaq.push(['_trackPageview']); 
</script> 
```

将以下脚本放在您的`</body>`标签之前。

```
<script type="text/javascript">  
  (function() { 
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; 
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; 
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga); 
  })(); 
</script> 
```

您的内容应该在脚本之间。这提供了最佳的页面加载时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T01:34:34.190

您可以使用 Google Analytics 实时视图在设置后立即测试 Google Analytics 是否配置正确。在一个浏览器选项卡中访问您的网站，在另一个选项卡中打开 Google Analytics，并选择实时选项卡（它可以在 Google Analytics 用户界面左侧的报告选项卡下找到）。

要安装，请获取您的跟踪代码（听起来您已经这样做了）并粘贴在结束标记之前。

您还可以通过依次选择*admin*、*tracking info*和*tracking code*来测试您是否正确配置了 Google Analytics 。如果配置正确，您应该看到状态为“状态：接收数据”。

# c# - [System.Web.Script.Services.ScriptService] 在所有情况下都无害吗？

> ID：12279331
> 
> 赞同：1
> 
> 时间：2012-09-05T10:24:02.417
> 
> 标签：c#, visual-studio-2010, web-services, asmx

我正在开发一种网络服务，供我们的客户用于特定的处理目的。Visual Studio 在我的 asmx 文件顶部添加了一行，告诉您：

```
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService] 
```

我不确定将在哪些不同的场景中使用此 Web 服务，因此我无法决定是对其进行评论还是取消评论。

我的问题是，在所有情况下取消注释是否无害，或者这样做可能会导致安全问题？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-05T11:01:30.573

如果您的代码正在使用您的 .asmx 文件，那么请不要更改 .asmx 文件中的任何内容。

因为`[System.Web.Script.Services.ScriptService]`是 .asmx 文件的要求。如果您删除此行，您的服务方法将不会调用并导致错误。

# iphone - 10 分钟后后台应用程序未关闭

> ID：12279332
> 
> 赞同：2
> 
> 时间：2012-09-05T10:24:04.077
> 
> 标签：iphone, ios, ios4, background, multitasking

我正在后台将一些图片上传到服务器。我想在 10 分钟后关闭应用程序。但是我的应用程序没有关闭，它在后台处于暂停模式，当我再次按下应用程序图标上传操作时，它会在前台启动。我使用了以下代码：

```
bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
            // Clean up any unfinished task business by marking where you.
            // stopped or ending the task outright.
            [app endBackgroundTask:bgTask];
            bgTask = UIBackgroundTaskInvalid;
        }];

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

            // Here goes your operation
            // done!
            upload_photo();

            dispatch_async(dispatch_get_main_queue(), ^{
                if (bgTask != UIBackgroundTaskInvalid)
                {
                    // if you don't call endBackgroundTask, the OS will exit your app.
                    [app endBackgroundTask:bgTask];
                    bgTask = UIBackgroundTaskInvalid;
                }
            });
        }); 
```

我的问题：如何在 10 分钟后关闭我的应用程序（上传任务是否完成）？

提前致谢。

# mysql - 无法添加或更新子行：外键约束失败 mysql php

> ID：12279334
> 
> 赞同：-2
> 
> 时间：2012-09-05T10:24:08.523
> 
> 标签：mysql

我得到一个

> “无法添加或更新子行：外键约束失败 ( `smarturbia`. `pois`, CONSTRAINT `fk_pois_cities1`FOREIGN KEY ( `city`) REFERENCES `cities`( `id`) ON DELETE NO ACTION ON UPDATE NO ACTION) (1509)”

我不知道为什么。

我的表是通过 Mysql 工作台 5.2 生成的，如果您需要其余的表，请告诉我：

```
-- -----------------------------------------------------
-- Table `smarturbia`.`cities`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `smarturbia`.`cities` ;

CREATE  TABLE IF NOT EXISTS `smarturbia`.`cities` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT ,
  `published` VARCHAR(1) NOT NULL DEFAULT '0' ,
  `open` VARCHAR(1) NOT NULL DEFAULT '0' ,
  `path` VARCHAR(25) NOT NULL DEFAULT 'taxi' ,
  `key` VARCHAR(50) NOT NULL ,
  `world` VARCHAR(10) NOT NULL DEFAULT 'earth' ,
  `name` VARCHAR(50) NOT NULL ,
  `description` VARCHAR(250) NULL DEFAULT NULL ,
  `logo` VARCHAR(250) NULL DEFAULT NULL ,
  `footer` VARCHAR(250) NOT NULL DEFAULT '/taxi/assets/img/taxi_smarturbia_image_default.png' ,
  `footer_large` VARCHAR(250) NOT NULL ,
  `leftpub` VARCHAR(50) NOT NULL ,
  `rightpub` VARCHAR(50) NOT NULL ,
  `model` VARCHAR(250) NOT NULL ,
  `modelxscale` FLOAT NULL DEFAULT '1' ,
  `modelyscale` FLOAT NULL DEFAULT '1' ,
  `modelzscale` FLOAT NULL DEFAULT '1' ,
  `wheelmodelxscale` FLOAT NULL DEFAULT '1' ,
  `wheelmodelyscale` FLOAT NULL DEFAULT '1' ,
  `wheelmodelzscale` FLOAT NULL DEFAULT '1' ,
  `allwheels` VARCHAR(250) NULL DEFAULT NULL ,
  `frontleftwheel` VARCHAR(250) NULL DEFAULT NULL ,
  `frontrightwheel` VARCHAR(250) NULL DEFAULT NULL ,
  `rearleftwheel` VARCHAR(250) NULL DEFAULT NULL ,
  `rearrightwheel` VARCHAR(250) NULL DEFAULT NULL ,
  `axisdistance` FLOAT NOT NULL DEFAULT '2.5' ,
  `wheelsdistance` FLOAT NULL DEFAULT '1' ,
  `wheelsheight` FLOAT NULL DEFAULT '1' ,
  `kms` FLOAT NULL DEFAULT '0' ,
  `maxspeed` FLOAT NULL DEFAULT '160' ,
  `accel` FLOAT NULL DEFAULT '25' ,
  `accelstep` FLOAT NULL DEFAULT '25' ,
  `minaccelstep` FLOAT NULL DEFAULT '5' ,
  `maxrevspeed` FLOAT NULL DEFAULT '30' ,
  `decel` FLOAT NULL DEFAULT '90' ,
  `gravity` FLOAT NULL DEFAULT '70' ,
  `camheight` FLOAT NULL DEFAULT '5' ,
  `camtilt` FLOAT NULL DEFAULT '90' ,
  `traildistance` FLOAT NULL DEFAULT '15' ,
  `mass` FLOAT NULL DEFAULT '3000' ,
  `vehicleagility` FLOAT NULL DEFAULT '0.0005' ,
  `suspensionstiffness` FLOAT NULL DEFAULT '0.5' ,
  `suspensionrestlength` FLOAT NULL DEFAULT '0.5' ,
  `suspensiondamping` FLOAT NULL DEFAULT '-0.15' ,
  `suspensiondeltatime` FLOAT NULL DEFAULT '0.25' ,
  `turnspeedmin` FLOAT NULL DEFAULT '20' ,
  `turnspeedmax` FLOAT NULL DEFAULT '60' ,
  `speedmaxturn` FLOAT NULL DEFAULT '5' ,
  `speedminturn` FLOAT NULL DEFAULT '50' ,
  `steerroll` FLOAT NULL DEFAULT '-1' ,
  `rollspring` FLOAT NULL DEFAULT '0.5' ,
  `rollclamp` FLOAT NULL DEFAULT '50' ,
  `mapiconurl` VARCHAR(250) NULL DEFAULT NULL ,
  `vehicleshadow` VARCHAR(250) NULL DEFAULT NULL ,
  `vehiclesound` VARCHAR(250) NULL DEFAULT NULL ,
  `vehiclesoundtime` FLOAT NULL DEFAULT '150' ,
  `vehiclefastsound` VARCHAR(250) NULL DEFAULT NULL ,
  `vehiclefastsoundtime` FLOAT NULL DEFAULT '150' ,
  `backgroundsound` VARCHAR(250) NULL DEFAULT NULL ,
  `backgroundsoundtime` FLOAT NULL DEFAULT '150' ,
  `crashsound` VARCHAR(250) NULL DEFAULT NULL ,
  `crashsoundtime` FLOAT NULL DEFAULT '150' ,
  `vehicletype` VARCHAR(50) NULL DEFAULT 'car' ,
  `date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,
  PRIMARY KEY (`id`) ,
  INDEX `key` (`key` ASC) )
ENGINE = InnoDB
AUTO_INCREMENT = 153
DEFAULT CHARACTER SET = latin1;

-- -----------------------------------------------------
-- Table `smarturbia`.`pois`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `smarturbia`.`pois` ;

CREATE  TABLE IF NOT EXISTS `smarturbia`.`pois` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT ,
  `city` BIGINT(11) NOT NULL ,
  `name` VARCHAR(50) NOT NULL ,
  `description` VARCHAR(250) NOT NULL ,
  `lat` DOUBLE NOT NULL ,
  `lon` DOUBLE NOT NULL ,
  `heading` FLOAT NULL DEFAULT '0' ,
  PRIMARY KEY (`id`) ,
  INDEX `fk_pois_cities1_idx` (`city` ASC) ,
  CONSTRAINT `fk_pois_cities1`
    FOREIGN KEY (`city` )
    REFERENCES `smarturbia`.`cities` (`id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 408
DEFAULT CHARACTER SET = latin1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:00:01.557

在定义主键的表中插入值。然后尝试在具有外键的表中插入值...

我认为您在外键表中插入值而不在具有主键的表中插入..不推荐，但您可以试试这个

```
 set foreign_key_checks=0; 
```

启用外键检查

```
 set foreign_key_checks=1; 
```

# c++ - 结构数组不会改变

> ID：12279337
> 
> 赞同：-5
> 
> 时间：2012-09-05T10:24:29.773
> 
> 标签：c++, arrays, struct

我的一个类中有一个结构数组，它本身有一个设置方法。

```
struct key
{
     int x;
     int y;
};

class myClass
{
    key theKeys[9];
    void setup();
}; 
```

在设置方法中，我通过了它们，但它们保持不变

```
void myClass::setup()
{
    for (int i = 0; i < 9; i++)
    {
        theKeys[i].x = i;
        theKeys[i].y = i - 1;
        cout << theKeys[i].x << " " << theKeys[i].y << endl;
    }
} 
```

将返回

```
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0 
```

我究竟做错了什么？请记住，这不是我项目中的实际代码，但几乎相同。

* * *

已解决：WOOPS，我修好了。我不想详细说明，但它实际上正在工作，但 cout 没有正确设置，所以它打印了尚未设置的错误打击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:12:12.830

这将起作用。

在 main: 中创建 myClass 的一个实例`myClass mc;`。对 setup: 进行函数/方法调用`mc.setup();`。

```
#include <iostream>
using namespace std ;

struct key
{
     int x;
     int y;
};

class myClass
{
    public:
        key theKeys[9];
        void setup();
};    

void myClass::setup()
{
    for (int i = 0; i < 9; i++)
    {
        theKeys[i].x = i;
        theKeys[i].y = i - 1;
        cout << theKeys[i].x << " " << theKeys[i].y << endl;
    }
}

int main()
{
    myClass mc;
    mc.setup();

return 0;
} 
```

# javascript - 包装浮动图像时的文本块宽度

> ID：12279345
> 
> 赞同：0
> 
> 时间：2012-09-05T10:24:53.410
> 
> 标签：javascript, html, css

我在包装浮动图像时遇到了一些文本宽度问题。这是描述问题的好图片：

![我得到了什么](../Images/8c445957c892bed2d7b3ebe77e0c803b.png)

这家伙发了一首诗，但他的文本格式被破坏了。他的文字应该是这样的：

![我的期望](../Images/b920fcbf9b6d0b4b246bc045beaa2d51.png)

我已经知道这个问题的根源。这是因为文本块从图片**后面**开始，而文本环绕图片文本块**不会**变长并且文本保持在相同的范围内，就像根本没有图像一样。这是小提琴示例：http: [//jsfiddle.net/czqGk/3/](http://jsfiddle.net/czqGk/3/)我还在 JavaScript 中添加了解决方案，什么对文本块进行宽度补偿。

**我正在寻找不使用 JavaScript 的解决方案。**设置用户帖子的最小尺寸，或设置另一个静态宽度是不可接受的。宽度应该是动态的并且取决于内容。有任何想法吗？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:34:50.047

在较长的文本中定义图像似乎可以解决问题；这是一个小演示：[小链接](http://jsfiddle.net/glee/JPySN/2/)。

# php - php扩展开发中如何将类属性初始化为空数组

> ID：12279348
> 
> 赞同：1
> 
> 时间：2012-09-05T10:25:05.677
> 
> 标签：php, php-extension

可以像这样在 php 类中初始化一个空数组：

```
class Foo
{
    protected $bar = [];
} 
```

但是如何在用 c 开发的扩展中做到这一点？

请注意，该`$bar`属性未在构造函数中初始化。

我已经尝试过该`zend_declare_property`功能，但出现此错误：

```
Fatal error: Internal zval's can't be arrays, objects or resources in Unknown on line 0 
```

PS：`[]`是`array()`php5.4中的快捷方式，我的问题是关于编写php扩展（用c），而不是关于php本身。我知道我的英语不够好，但如果我写的东西难以理解，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:27:45.293

也许你想要这样的东西..

```
protected $bar = array(); 
```

# c# - WS调用中空参数和省略参数的区别？

> ID：12279349
> 
> 赞同：2
> 
> 时间：2012-09-05T10:25:07.827
> 
> 标签：c#, wcf, web-services, soap, axis2

假设我有一个 WSDL，它定义了一个接受复杂类型的操作，非常常见的 webmethod 东西，比如：

```
 <xs:element name="createBill">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="customer" nillable="true" type="xs:string" />
        <xs:element minOccurs="0" name="billId"   nillable="true" type="xs:string" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <wsdl:message name="createBillRequest">
    <wsdl:part name="parameters" element="ns:createBill" />
  </wsdl:message>

  <wsdl:operation name="creatBill">
    <wsdl:input wsaw:Action="urn:createBill" message="axis2:createBillRequest" />
    ...
  </wsdl:operation> 
```

两种不同调用的 WebServices 标准实现规则是什么，一个指定 billId 为`xsi:nil`，另一个完全省略节点？

```
<creatBill ...>
   <customer>1332400</customer>
   <billId xsi:nil="true"/>
</createBill>

vs

<creatBill ...>
   <customer>1332400</customer>
</createBill> 
```

为了揭示更多背景，我对一个 Java 人有意见。他的 Web 服务是在 Axis2 中完成的，并且（出于对我来说奇怪的原因）处理 bill 元素的省略与 nil 值不同。我的主张是它们是相同的，并且在两种情况下它的行为应该相同（例如，创建一个动态的 billID）。他的说法是它不一样，他只在节点丢失时生成动态 ID，否则在节点被取消时返回错误（“billId 丢失”）。

我对他的说法的实际问题是 .NET 中的 WCF 和 WS 堆栈都将它们视为一个并且相同，甚至没有规定省略可空参数，这使得我几乎不可能在不编写我的代码的情况下实现客户端自己的 WS-stack 以及他实现的 WS-Security。就目前而言，我只能调用指定 null 的服务：

```
serv.createBill("1332400", null);
serv.createBill("1332400"); // ERROR: no such method 
```

我什至不明白他是如何在 Java 中实现服务器端的，因此一个 Web 方法具有不同的调用模式，当省略节点时，Axis2 设置的 billID 参数是什么？他非常不合作，我需要一些论据（如果有的话）向他提出，然后再向他的经理提出，因为他们签订了支持合同。

既然我们不能都对，那么有谁知道这里的 WS 标准规定了什么？谁对标准有过错？我不是开始讨论 wcf 与轴火焰（请不要），我需要从 SOAP/WSDL 标准和规范的角度来看待这个问题，作为两者的父级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:35:35.097

您的 Web 服务使用文档/文字样式。在这种情况下，Web 服务规范只要求消息内容（更具体地说是 SOAP 主体的单个子项）由 XML Schema 元素声明来描述，当然它也符合该声明。现在，XML Schema 确实允许同时使用 minOccurs="0" 和 nillable="true"，但是规范并没有将元素的缺失与 xsi:nil="true 的元素的缺失附加任何特殊含义"; 特别是它没有声明这两种情况是等价的。由模式的设计者来定义这两种情况的含义。

另请注意，没有描述如何将 WSDL 和模式转换为特定语言结构的通用标准。

话虽如此，将 minOccurs="0" 和 nillable="true" 放在一起是有问题的，因为大多数语言只有一个概念，即空值，来表示值的缺失。如果使用 minOccurs="0" 或 nillable="true" 声明元素，则使用 null 值效果很好，但没有自然的方法来处理同时声明的元素。如以下问题所述，JAX-WS 规范解决了这个问题：

[Jaxb 生成的类使用 JAXBElement 而不是指定的类型](https://stackoverflow.com/questions/4337597/jaxb-generated-class-used-jaxbelement-instead-of-specified-type)

与 JAX-WS 相比，其他一些特定于语言的 Web 服务绑定约定没有正确解决这个问题，并且将 minOccurs="0" 与 nillable="true" 一起使用通常会导致互操作性问题。因此，这应该被认为是一种不好的做法，但不幸的是，Web 服务规范中没有任何内容禁止这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:29:47.397

不能说 Axis 服务是否符合某些可空值的 WS 标准，但您可以通过设置[DataMember 属性的 EmitDefaultValue 设置](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.emitdefaultvalue)来调整 WCF 客户端生成的代码。如果将其设置为 false，则当可空类型的值为 null 时，WCF 将不会创建相应的 XML 元素，这似乎是服务正在寻找的。

# c++ - 如何设置设置打开evc 4.0的帮助

> ID：12279355
> 
> 赞同：0
> 
> 时间：2012-09-05T10:25:32.587
> 
> 标签：c++, visual-studio, visual-c++, evc4, evc

我是evc的新手。我有一个问题，每当我选择任何关键字并按 F1 时，都会打开帮助并显示索引页面，其中显示了特定的关键字，但未显示有关关键字的详细信息。我必须搜索那个关键字。任何人都可以告诉我这是怎么回事，或者有关 evc 帮助的任何设置都已更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:46:06.747

确保 SDK 已正确安装

如果按您提到的那样打开索引页面，使用 F1 您应该能够搜索您的帮助内容。

# c# - 上传带有进度跟踪的文件（带有参数的 HttpWebRequest POST）

> ID：12279356
> 
> 赞同：0
> 
> 时间：2012-09-05T10:25:34.537
> 
> 标签：c#, post, file-upload, httpwebrequest

我有`HttpUploadFile`上传带有一些字符串参数的图像的方法：

```
 public static void HttpUploadFile(string url, string file, string paramName, string contentType, NameValueCollection nvc)
    {
        Console.Write(string.Format("Uploading {0} to {1}", file, url));
        string boundary = "---------------------------" + DateTime.Now.Ticks.ToString("x");

        byte[] boundarybytes = System.Text.Encoding.ASCII.GetBytes("\r\n--" + boundary + "\r\n");
        byte[] omg = boundarybytes;
        HttpWebRequest wr = (HttpWebRequest)WebRequest.Create(url);
        wr.ContentType = "multipart/form-data; boundary=" + boundary;
        wr.Method = "POST";
        wr.KeepAlive = true;
        wr.Credentials = System.Net.CredentialCache.DefaultCredentials;

        Stream rs = wr.GetRequestStream();

        string formdataTemplate = "Content-Disposition: form-data; name=\"{0}\"\r\n\r\n{1}";
        foreach (string key in nvc.Keys)
        {
            rs.Write(boundarybytes, 0, boundarybytes.Length);
            string formitem = string.Format(formdataTemplate, key, nvc[key]);
            byte[] formitembytes = System.Text.Encoding.UTF8.GetBytes(formitem);

            rs.Write(formitembytes, 0, formitembytes.Length);
        }
        rs.Write(boundarybytes, 0, boundarybytes.Length);

        string headerTemplate = "Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"\r\nContent-Type: {2}\r\n\r\n";
        string header = string.Format(headerTemplate, paramName, file, contentType);
        byte[] headerbytes = System.Text.Encoding.UTF8.GetBytes(header);
        rs.Write(headerbytes, 0, headerbytes.Length);

        FileStream fileStream = new FileStream(file, FileMode.Open, FileAccess.Read);
        byte[] buffer = new byte[4096];
        int bytesRead = 0;
        while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
        {
            rs.Write(buffer, 0, bytesRead);
        }
        fileStream.Close();

        byte[] trailer = System.Text.Encoding.ASCII.GetBytes("\r\n--" + boundary + "--\r\n");
        rs.Write(trailer, 0, trailer.Length);
        rs.Close();

        //parsing response
        WebResponse wresp = null;
        try
        {
            wresp = wr.GetResponse();
            Stream stream2 = wresp.GetResponseStream();
            StreamReader reader2 = new StreamReader(stream2);
            String output = reader2.ReadToEnd();

        }
        catch (Exception ex){
            Console.Write("Error uploading file" + ex.ToString());
            if (wresp != null)
            {
                wresp.Close();
                wresp = null;
            }
        }
        finally
        {
            wr = null;
        }
    } 
```

现在我想跟踪上传的进度。我找到[了带有进度跟踪的 C# HttpWebRequest Form Post（用于上传可能的大文件）](https://stackoverflow.com/questions/2208299/c-sharp-httpwebrequest-form-post-with-progress-tracking-for-uploading-potential)，但该解决方案对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:45:20.850

您正在从文件中读取图像并一次上传 4096 个字节。在每 4096 个字节之后，您可以调用一些其他函数，将进度条更新为新值。

首先，您需要知道文件总共有多大。无论何时上传一个包，您都可以通过汇总所有已发送的包并将它们与要发送的总字节数进行比较来计算百分比。

正如我刚刚从您链接的线程中看到的那样，在您调用 GetResponse 之前，HttpWebRequest 可能存在问题并没有实际发送数据。

为了防止这种情况发生，您可以尝试使其立即发送数据，方法是使用一些解决方法，例如设置 Content-Length （这意味着您需要事先知道要发送多少数据），或者可能通过将传输编码设置为分块（虽然不知道这是否有效）。您也可以只使用原始套接字，因此您可以完全控制。发送这样的请求需要做更多的工作，但不是很复杂。

如果稍后我有时间并且您决定使用原始套接字，我可以为您提供一个小示例。

# google-apps-script - Google App Script Syntax 是否有完整的定义？

> ID：12279357
> 
> 赞同：7
> 
> 时间：2012-09-05T10:25:36.207
> 
> 标签：google-apps-script

我在开发人员页面上找不到完整的语法规范。我真的想知道是否有一个扩展的 for 循环......

[https://developers.google.com/apps-script/](https://developers.google.com/apps-script/)

我看到了默认服务，但这并没有定义我们可以使用的控制流语法。它是否正是 JavaScript 的某个版本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T11:20:00.413

GAS 不是 JavaScript 的精确版本。它支持 JavaScript 1.8.5 的许多特性，如`Object.keys`,`Object.isExtensible`等，但另一方面它不支持 JavaScript 1.7 中引入的`yield`关键字`let`。GAS 支持的另一个特性是JavaScript 1.8.1 中引入的原生`JSON`类和函数。`String.trim`GAS 还支持[E4X](http://en.wikipedia.org/wiki/ECMAScript_for_XML)扩展。

GAS 文档现在还不完整，许多功能可以通过实验发现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T13:07:13.563

Apps Script 正是 JavaScript 1.6 版

# iphone - iPhone试图让youtube自动开始视频

> ID：12279359
> 
> 赞同：1
> 
> 时间：2012-09-05T10:25:39.647
> 
> 标签：iphone, objective-c, ios, uiwebview, youtube

我有一个包含以下代码的网页

如果我通过电脑播放视频会自动开始播放，但不会在 iPhone 上播放？你能有一个网页在打开时自动开始播放 youtube 视频吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:29:57.463

也许你可以在这里尝试`UIWebView`更多`webView.mediaPlaybackRequiresUserAction=FALSE;`- [YouTube Autoplay Possibilities In IOS](https://stackoverflow.com/questions/9433666/youtube-autoplay-possbilities-in-ios)

# iphone - iOS 应用本地化

> ID：12279361
> 
> 赞同：2
> 
> 时间：2012-09-05T10:25:44.633
> 
> 标签：iphone, ios, localization, unity3d

我想本地化我的应用程序。我应该在 itunesconnect 中为每个国家/地区创建一个新应用程序，还是有一种方法可以自动检测用户所在的国家/地区？实际上我的应用程序是基于 Unity3d 的游戏 - 可以在 Unity3d 上完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:31:48.590

在 Unity 开始之前编写这些行以将当前语言传递给 unity

```
NSUserDefaults* defs = [NSUserDefaults standardUserDefaults];

NSArray* languages = [defs objectForKey:@"AppleLanguages"];

NSString* preferredLang = [languages objectAtIndex:0];

[[NSUserDefaults standardUserDefaults] setObject: preferredLang forKey: @"language"];

[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:30:53.923

绝对不要为每个语言环境创建一个新应用程序。iOS 应用程序是可本地化的，iTunes Connect 允许您为每种语言输入不同的元数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T23:25:43.597

您不需要为每种语言制作新的应用程序。尝试按照[SmoothLocalize 的教程](http://smoothlocalize.com/tutorial1.php)或[This one](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)之类的指南进行操作。

然后，您将拥有一个需要翻译的 Localizable.strings 文件。我通常使用 SmoothLocalize.com 作为我的翻译服务，因为它便宜且超级简单，但您可以四处寻找其他人，甚至尝试自己寻找个人翻译。

# php - 使用 PHP HttpRequest 类发布 JSON 数据

> ID：12279362
> 
> 赞同：1
> 
> 时间：2012-09-05T10:25:44.047
> 
> 标签：php, json, httprequest

这是我想要发布到 URL 的 JSON `HTTP_METH_POST`：

```
{
    "request_token": "dSMXgdfHOeNflvk0xo3BYA",
    "user[display_name]": "CNN",
    "user[email]": "CliENT_EMAIL@DOMAIN.com"
} 
```

因此，如果我使用`addQueryData`方法，那么我是否能够将其作为 Json 数据发布到 URL，或者我是否需要执行任何其他步骤才能使用`HttpRequest`类发送 JSON 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:59:44.313

如果您已通过 json_encode 运行 JSON 以将其转换为字符串，那么这就是您发布数据之前所需要的全部内容。

# javascript - 在 JQuery 中使用 Google Maps Api 事件/侦听器

> ID：12279373
> 
> 赞同：0
> 
> 时间：2012-09-05T10:26:08.890
> 
> 标签：javascript, jquery, google-maps-api-3

行。我想要的是以下内容：我想用 jquery 控制标记的鼠标悬停。

我怎样才能做到这一点？我没有纯js的经验。（而且我不想使用 jquery 插件）

我试过这个：

```
google.maps.event.addListener(marker, 'ggmouseover', function() {
            marker.setIcon(pinred);
        });

        ggmouseover.mouseover(); 
```

这不起作用。（它适用于'mouseover'而不是'ggmouseover'）我想创建一个函数或稍后可以通过jquery调用的东西。像：`$('#button').mouseover(function(){ ggmouseover(); });`

我怎样才能做到这一点？想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T10:58:13.913

你可以通过使用来做到这一点：

[`trigger(instance:Object, eventName:string, var_args:*)`](https://developers.google.com/maps/documentation/javascript/reference#event)

> 触发给定的事件。eventName 之后的所有参数都作为参数传递给侦听器。

对于您的情况，这给出了：

```
google.maps.event.addListener(marker, 'mouseover', function() {
    marker.setIcon(pinred);
});

$("#button").mouseover(function() {
    google.maps.event.trigger(marker, 'mouseover');
}); 
```

# javascript - PhoneGap 无法调用未定义的方法 loadurl

> ID：12279374
> 
> 赞同：3
> 
> 时间：2012-09-05T10:26:17.643
> 
> 标签：javascript, cordova

我写了一个方法来从用户那里获取地址信息，然后在谷歌的地图上显示它。这是我写的方法

```
function doRemoteMapEmployee(e) {
var mapEmployeeAddressLine1 = (EmployeeInfo.at(0).EmployeeAddressLine1 !== null) ? EmployeeInfo.at(0).EmployeeAddressLine1 + ', ' : '', 
mapEmployeeAddressLine2 = (EmployeeInfo.at(0).EmployeeAddressLine2 !== null) ? EmployeeInfo.at(0).EmployeeAddressLine2 + ', ' : '', 
mapEmployeeAddressLine3 = (EmployeeInfo.at(0).EmployeeAddressLine3 !== null) ? EmployeeInfo.at(0).EmployeeAddressLine3 + ', ' : '', 
mapEmployeeAddressCityTown = (EmployeeInfo.at(0).EmployeeAddressCityTown !== null) ? EmployeeInfo.at(0).EmployeeAddressCityTown + ', ' : '', 
mapEmployeeAddressZipPostCode = (EmployeeInfo.at(0).EmployeeAddressZipPostCode !== null) ? EmployeeInfo.at(0).EmployeeAddressZipPostCode : '', 
address = mapEmployeeAddressLine1 + mapEmployeeAddressLine2 + mapEmployeeAddressLine3 + mapEmployeeAddressCityTown + mapEmployeeAddressZipPostCode;
navigator.app.loadUrl("http://maps.google.co.uk/?q=" + address);
} 
```

当我运行它时，它会给我错误无法调用未定义的方法 loadurl。现在，如果我只是用实际地址替换地址，它会给我同样的错误。知道这里可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T17:16:49.643

虽然 phonegap 应用程序通过在浏览器上调试得到了很好的开发，但这种方法在某些领域是失败的。其中之一是`navigator.app`，由于其与设备相关的性质，它仅在实际运行在移动设备上时才存在，在浏览器上该对象只是未定义的。

当我不得不进行多次编码/设备/调试迭代时，我不得不退出浏览器方法并使用[genymotion emulator](https://cloud.genymotion.com/)，它是[virtualbox](https://www.virtualbox.org/%E2%80%8E)的包装器，对我来说将编码/结果周期的长度从大约 5 分钟减少到大约 1 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T17:04:57.853

尝试改用这个：

```
window.open("http://maps.google.co.uk/?q=" + address, "_system"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T17:34:15.700

我建议使用 inAppBrowser 插件：

[http://docs.phonegap.com/en/3.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/3.3.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

您可以通过运行安装它：

```
phonegap local add org.apache.cordova.inappbrowser 
```

然后，当您运行 window.open 时，您的页面将在应用程序中的新浏览器窗口中打开，该浏览器窗口可以在您的应用程序中关闭。

# json - RestSharp：反序列化后获取JSON字符串？

> ID：12279383
> 
> 赞同：0
> 
> 时间：2012-09-05T10:26:57.197
> 
> 标签：json, deserialization, restsharp

使用 RestSharp 有没有办法在将原始 json 字符串反序列化为对象后获取它？我需要它来进行调试。

我想查看反序列化的对象和该对象最初收到的 json 字符串。它是更大的 json 字符串的一部分，是数组中的一个项目，我只需要反序列化到对象中的特定项目 json 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T22:33:44.240

为了帮助您，这应该可行，这是我的一些工作的直接示例，因此您的可能会有所不同。

```
private void restClient()
        {
            string url = "http://apiurl.co.uk/json";
            var restClient = new RestClient(url);
            var request = new RestRequest(Method.GET);
            request.AddParameter("apikey", "xxxxxxxxxx");

            restClient.ExecuteAsync<Entry>(request, response =>
            {
                lstboxtop.Items.Add(response.Content);
            });
        } 
```

行 lstboxtop 是一个列表框，使用 response.content 会将整个 api 打印到您的应用程序上，如果您先调用它，那将是您正在寻找的

# javascript - 小滚动条问题

> ID：12279385
> 
> 赞同：0
> 
> 时间：2012-09-05T10:27:04.457
> 
> 标签：javascript, jquery, html, css, html5boilerplate

我已经安装了 tinyScroll 到我不确定我是否没有正确安装 tinyScroll Bar 插件或有 css 问题，当我尝试滚动隐藏内容时，我注意到我的滚动条不起作用。 [单击此处](http://iamnatesmithen.com/bodyworks/product-details.php) 检查元素没有发现任何问题，但是当我单击滚动时，我注意到该类`noSelect`出现了。有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:46:54.970

而不是 #scrollbar1 尝试

```
$('.viewport').tinyscrollbar(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:31:04.560

看来您`$('#scrollbar1').tinyscrollbar();`的运行不正确。

`$('#scrollbar1').tinyscrollbar();`很可能是由于您在加载实际滚动库之前调用的事实。

移动`<script src="js/main.js"></script>`到页面底部，而不是顶部。

# marionette - bone.js 中的集合视图和复合视图

> ID：12279388
> 
> 赞同：2
> 
> 时间：2012-09-05T10:27:17.040
> 
> 标签：marionette

我们可以在backbone.js 中使用集合视图和复合视图中的区域吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:48:36.853

最简洁的答案是不。仅`LayoutView`支持区域。如果您告诉我更多关于您的用例的信息，最好以 jsfiddle 的形式，我会尝试为您提供代码示例来解决您的用例。

# c# - 如何通过ajax调用void非静态函数？

> ID：12279390
> 
> 赞同：1
> 
> 时间：2012-09-05T10:27:19.193
> 
> 标签：c#, ajax, function, non-static

如何从 ajax 调用非静态 void 函数。我收到错误消息。这是ajax代码：-

```
 $('#button2 button').click(function () {

              $.ajax({
                type: "POST",
                url: "practiced_final.aspx/display",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                cache: false,
                success: function () 
                {
                },
                error: function (a, b, c) {
                    alert(a + b + c);
                }
            })
                                return false;

           }); 
```

这是 C# 方法代码：

```
 [WebMethod]
 protected  void display()
    {

    HttpContext.Current.Response.Write( "Hello");
    } 
```

这是错误消息：-

```
[object XMLHttpRequest]errorundefined 
```

我错过了什么？

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:34:25.710

要使其正常工作，您的功能必须是静态的，它应该如下所示：

```
[Webmethod]
public static void display()
{
     HttpContext.Current.Response.Write( "Hello");
} 
```

如果您希望您的函数返回一个字符串，您应该将其更改为：

```
[Webmethod]
    public static string display()
    {
         return "Hello";
    } 
```

# php - PHP Facebook API - 无法从 API 获取生日

> ID：12279391
> 
> 赞同：0
> 
> 时间：2012-09-05T10:27:19.917
> 
> 标签：php, facebook, api, facebook-apps

我有一个基于此身份验证代码的非常简单的 Facebook 应用程序：

```
$session = $facebook->getUser();

if (!$session) {
    $url = $facebook->getLoginUrl(array(
               'canvas' => 1,
               'fbconnect' => 0,
               'scope' => 'publish_stream, email, user_activities, user_birthday, user_hometown'
               //'req_perms' => 'publish_stream,email,user_location,user_birthday,user_hometown'
           ));
    echo "<script type='text/javascript'>top.location.href = 'FB_URL';</script>";
} else {
    try {
        $uid = $facebook->getUser();
        $me = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        echo "<script type='text/javascript'>top.location.href = 'FB_URL';</script>";
    exit;
    } 
}

echo "\n === \n";
print_r($uid);
echo "\n === \n";
print_r($me); 
```

输出是：

```
=== ID_VALUE === Array ( [id] => ID_VALUE [name] => NAME [first_name] => FIRST_NAME [last_name] => LAST_NAME [link] => PROFILE_URL [username] => USERNAME [gender] => male [email] => EMAIL [timezone] => 2 [locale] => en_US [verified] => 1 [updated_time] => 2012-05-16T13:00:04+0000 ) 
```

我希望在指定扩展权限后`user_birthday`，`user_hometown`我还应该在数组中获取有关用户生日和家乡的信息……但不幸的是，这些信息在那里丢失了……

我错过了什么或者我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T10:36:50.063

我做了一些调查，

你可以试试这个： `$me = $facebook->api('/me?fields=birthday');`和

对于范围 - 您请求正确的权限，它是`user_birthday`

确保你的`$facebook`对象有`access_token`

看看并报告，我会尽力提供帮助。

编辑：我不明白你从哪里得到 FB_URL，因为你在`$url`变量中写了 LoginUrl 我查看了你的代码并建议你尝试这种方式：

```
if (!$session) {
    $url = $facebook->getLoginUrl(array(
              'redirect_uri' => //SET back to your page or whenever you need
               'scope' => 'publish_stream, email, user_activities, user_birthday, user_hometown'          
           ));
    echo '<script type="text/javascript">top.location.href =' . $url . '</script>';
} else {
    try {           
        $me = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        echo $e->getMessage();       
    } 
} 
```

另外验证所有权限的用户访问令牌 Get $facebook->getAccessToken(); 并在此处调试 ->[令牌调试器](https://developers.facebook.com/tools/debug)

# process - DBus客户端和服务器在同一个进程

> ID：12279393
> 
> 赞同：3
> 
> 时间：2012-09-05T10:27:27.047
> 
> 标签：process, dbus

当我在同一进程中创建 D-Bus 服务器（通过 g_bus_own_name()）和客户端（使用 g_dbus_proxy_new()）然后调用 g_dbus_proxy_call_sync() 时，它永远不会返回。但是，如果服务器和客户端处于不同的进程中，则一切正常。

以下代码说明了我的问题（我在这里使用 giomm C++ 绑定）：

文件 main.cc：

```
#include <giomm.h>
#include <thread>

int server_main();
int client_main();

int main() {
    Gio::init();
    std::thread thr_server([](){ server_main(); });
    sleep(1);  // give some time to server to register
    std::thread thr_client([](){ client_main(); });
    sleep(10);  // wait for the client to finish
} 
```

文件 server.cc：

```
#include <giomm.h>
#include <iostream>

namespace {
static Glib::RefPtr<Gio::DBus::NodeInfo> introspection_data;

static Glib::ustring introspection_xml =
  "<node name='/org/glibmm/DBusExample'>"
  "  <interface name='org.glibmm.DBusExample'>"
  "    <method name='Method'>"
  "    </method>"
  "  </interface>"
  "</node>";

guint registered_id = 0;
}

static void on_method_call(const Glib::RefPtr<Gio::DBus::Connection>& /* connection */,
  const Glib::ustring& /* sender */, const Glib::ustring& /* object_path */,
  const Glib::ustring& /* interface_name */, const Glib::ustring& method_name,
  const Glib::VariantContainerBase& parameters,
  const Glib::RefPtr<Gio::DBus::MethodInvocation>& invocation)
{
  if(method_name == "Method") {
    std::cout << "Method was called\n";
  }      
}

const Gio::DBus::InterfaceVTable interface_vtable(sigc::ptr_fun(&on_method_call));

void on_bus_acquired(const Glib::RefPtr<Gio::DBus::Connection>& connection, const Glib::ustring& /* name */)
{
  std::cout << "on_bus_acquired\n";      
  try {
    registered_id = connection->register_object("/org/glibmm/DBusExample",
      introspection_data->lookup_interface(),
      interface_vtable);
  }
  catch(const Glib::Error& ex) {
    std::cerr << "Registration of object failed." << std::endl;
  }

  return;
}

void on_name_acquired(const Glib::RefPtr<Gio::DBus::Connection>& /* connection */, const Glib::ustring& /* name */)
{}

void on_name_lost(const Glib::RefPtr<Gio::DBus::Connection>& connection, const Glib::ustring& /* name */) {
  connection->unregister_object(registered_id);
}

int server_main()
{
  try {
    introspection_data = Gio::DBus::NodeInfo::create_for_xml(introspection_xml);
  }
  catch(const Glib::Error& ex) {
    std::cerr << "Unable to create introspection data: " << ex.what() <<
      "." << std::endl;
    return 1;
  }

  const guint id = Gio::DBus::own_name(Gio::DBus::BUS_TYPE_SESSION,
    "org.glibmm.DBusExample",
    sigc::ptr_fun(&on_bus_acquired),
    sigc::ptr_fun(&on_name_acquired),
    sigc::ptr_fun(&on_name_lost));

  //Keep the service running
  auto loop = Glib::MainLoop::create();
  loop->run();

  Gio::DBus::unown_name(id);

  return EXIT_SUCCESS;
} 
```

文件client.cc：

```
#include <giomm.h>
#include <iostream>

Glib::RefPtr<Glib::MainLoop> loop;

// A main loop idle callback to quit when the main loop is idle.
bool on_main_loop_idle() {
  std::cout << "loop_idle\n";
  loop->quit();
  return false;
}

void on_dbus_proxy_available(Glib::RefPtr<Gio::AsyncResult>& result)
{
  auto proxy = Gio::DBus::Proxy::create_finish(result);

  if(!proxy) {
    std::cerr << "The proxy to the user's session bus was not successfully "
      "created." << std::endl;
    loop->quit();
    return;
  }

  try {
    std::cout << "Calling...\n";

    proxy->call_sync("Method");

    std::cout << "It works!\n";
  }
  catch(const Glib::Error& error) {
    std::cerr << "Got an error: '" << error.what() << "'." << std::endl;
  }

  // Connect an idle callback to the main loop to quit when the main loop is
  // idle now that the method call is finished.
  Glib::signal_idle().connect(sigc::ptr_fun(&on_main_loop_idle));
}

int client_main() {    
  loop = Glib::MainLoop::create();

  auto connection =
    Gio::DBus::Connection::get_sync(Gio::DBus::BUS_TYPE_SESSION);

  if(!connection) {
    std::cerr << "The user's session bus is not available." << std::endl;
    return 1;
  }

  // Create the proxy to the bus asynchronously.
  Gio::DBus::Proxy::create(connection, "org.glibmm.DBusExample",
    "/org/glibmm/DBusExample", "org.glibmm.DBusExample",
    sigc::ptr_fun(&on_dbus_proxy_available));

  loop->run();

  return EXIT_SUCCESS;
} 
```

我编译测试`g++ -O2 -std=c++0x main.cc server.cc client.cc -o test $(pkg-config --cflags --libs giomm-2.4)`并运行：

```
./test
on_bus_acquired
Calling...
<it hangs> 
```

但是，当我更改 main.cc 时：

```
 #include <giomm.h>

    int server_main();
    int client_main();

    int main() {
      Gio::init();
      auto childid = fork();
      if (childid == 0) {
        server_main();
      } else {
        sleep(1);
        client_main();
      }
    } 
```

我得到：

```
./test
on_bus_acquired
Calling...
Method was called
It works! 
```

所以 call_sync() 成功返回。

我试图从服务器和客户端排除循环，并使用单线程 main.cc：

```
#include <giomm.h>
#include <thread>

int server_main();
int client_main();

int main() {
    Gio::init();
    server_main();
    client_main();
    auto loop = Glib::MainLoop::create();
    loop->run();
} 
```

没有什么帮助。问题是，我做错了什么？我想在一个进程中使用我的 d-bus 服务器和客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:41:15.953

我想通了，诀窍是执行

```
Glib::VariantContainerBase result;
invocation->return_value(result); 
```

在 on_method_call 结束时。

# knockout.js - 绑定到尚未初始化的属性

> ID：12279399
> 
> 赞同：1
> 
> 时间：2012-09-05T10:27:48.570
> 
> 标签：knockout.js

我在同一页面上有一个列表和一个详细信息视图。我用它来列出联系人。当我单击列表中的一个联系人时，它会设置一个“selectedContact”属性，我的详细信息视图绑定到该属性以显示有关此所选联系人的详细信息。但是，在我选择联系人之前，绑定会崩溃，因为尚未设置该属性。我怎样才能做到这一点？

JS 通用结构。

```
self.contacts = ko.observableArray();
self.selectedContact = ko.observable();

self.selectContact = function (contact) {
        self.selectedContact(contact);
        alert(self.selectContact.Name);
    } 
```

HTML

```
<h3>
    <span data-bind="text: selectedContact.Name"></span>
</h3>
<div>
    <span data-bind="text: selectedContact.Number"></span>
</div>
<div>
    <span data-bind="text: selectedContact.Email"></span>
</div> 
```

如此简单。加载此页面会崩溃，因为在我单击列表中的联系人之前未设置 selectedContact。在此之前，我真的不希望它显示任何内容。

最简单的方法是什么？谢谢你。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:02:41.873

在外面添加一个 div，并像这样构造它：

```
<div data-bind="with: selectedContact">
  <h3>
    <span data-bind="text: Name"></span>
  </h3>
  <div>
    <span data-bind="text: Number"></span>
  </div>
  <div>
    <span data-bind="text: Email"></span>
  </div>
</div> 
```

绑定将`with`根据关联值是否为空/未定义来动态添加或删除后代元素。

# c++ - * 这里定义什么？

> ID：12279403
> 
> 赞同：-4
> 
> 时间：2012-09-05T10:27:54.967
> 
> 标签：c++, c

```
#define xyz

static xyz  myObject *__my_getitem (myObject* a, myObject *b) {
     myObject *r;
     .........
     ........
     return r;
 } 
```

1.  是什么`static`？
2.  `xyz`在做什么`static`
3.  为什么`*`前面有个`__my_getitem`
4.  `myObject* a`和`myObject *a`（的位置`*`）有什么区别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:38:28.987

*什么是静态？*

以“静态”开头的函数定义的范围有限。它们只能被同一源文件中的函数看到和使用。当您有一个在当前文件中进行的处理之外没有任何价值的函数时，您可以这样做，或者您希望限制使用，以便将来可以修改它，由于其范围有限，影响较小。

*xyz 对静态有什么作用*

在这种特定情况下，xyz 被替换为空，因此它什么也不做。在一般情况下，它可能会修改编译器生成此函数的方式，更改“调用约定”。也就是说，xyz 对编译器有一定的意义，它不是 C 语言的一部分。

*为什么__my_getitem*前面有一个星号**

 *它表明 __my_getitem 函数返回一个指向 myObject 的指针。

*myObject* a 和 myObject *a 有*什么区别（* 的位置）**

 *没什么，因为语法很灵活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T10:40:22.633

> 是什么`static`？

它在不同的上下文中意味着不同的事物；你需要阅读你的书才能理解它的所有含义。在这种情况下，这意味着该函数仅在此源文件中可用，而不是在任何单独编译然后链接到它的文件中。

> `xyz`在做什么`static`？

造成混乱。它是一个空宏（在第一行中定义），所以在编译程序之前，预处理器将用空替换它。

> 为什么`*`前面有个`__my_getitem`

`*`在类型将类型更改为指针之后；所以这意味着该函数返回一个指向 a 的指针`myObject`。（顺便说一句，你不应该声明一个包含两个连续`_`字符的名称；这样的名称是保留的。）

> `myObject* a`和`myObject *a`（*的位置）有什么区别

什么都没有；空格永远不会改变程序的含义，除非需要分隔标记。有些人就这两种风格的语义含义进行了圣战，但语言并不在意。**

# ember.js - 如何在 ember.js 中使用多个路由器对象

> ID：12279408
> 
> 赞同：1
> 
> 时间：2012-09-05T10:28:09.983
> 
> 标签：ember.js, ember-old-router

我还是 ember.js 的新手，但我尚未大规模看到的框架的一部分是基本的 Ember 路由器。在一个小型单页应用程序中，您只有一个管理所有状态/路由等的路由器。但是随着您的应用程序的增长，如果模式似乎只关注一个对象，您如何管理复杂性？

好奇这是否只是我忽略的东西，或者这是否被认为是一个巨大的全局状态管理对象，例如 iOS 中的 AppDelegate。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:09:15.693

我不知道我的方式是否是普遍接受的最佳实践，但我知道当路由器变大时，它应该分成多个文件。我是这样完成的：

### app_router.js

```
App.Router = Ember.Router.extend({
  enableLogging: true,
  root: Ember.Route.extend({
    route: '/',
    index: Ember.Route.extend({
      route: '/',
      redirectsTo: 'app.index'
    }),
    app: Ember.Route.extend({
      route: '/app',
      showProfile: Ember.Route.transitionTo("user.index"),
      index: Ember.Route.extend({
        route: '/',
        redirectsTo: 'items'
      }),
      items: App.ItemsRoute,
      item: App.ItemRoute,
      users: App.UsersRoute,
      user: App.UserRoute,
      hashtagbrand: App.HashtagbrandRoute
    })
  })
}); 
```

### items_router.js

```
App.ItemsRoute = Ember.Route.extend({
  route: '/items',
  connectOutlets: function(router, items) {
    router.get("applicationController").connectOutlet({
      name: 'carouselContainer',
      outletName: 'carousel',
      context: App.store.find(App.Item)
    });
    router.get("applicationController").connectOutlet({
      name: 'logo',
      outletName: 'header'
    });
  },
  index: Ember.Route.extend({
    route: '/'
  })
}); 

App.ItemRoute = Ember.Route.extend({
  route: '/items/:id',
  //...
  index: Ember.Route.extend({
    route: '/'
    //...
  })
}); 
```

# kinect - 绿屏kinect

> ID：12279409
> 
> 赞同：0
> 
> 时间：2012-09-05T10:28:11.660
> 
> 标签：kinect

SDK 1.5 中可用的绿屏 kinect 示例没有完全显示头部，而头发部分带有一些模糊效果。

我看不到样本中的头发部分。是否有可用的改进版 kinect 绿屏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:08:18.063

这不是样本的问题。看到这个：[http ://www.youtube.com/watch?v=6BaWwx5x7nM](http://www.youtube.com/watch?v=6BaWwx5x7nM)

Kinect 投射了一个 IR 网格来检测深度，但一些“光线”穿过头发之间的空间，因此无法检测到该部分。

有可能“填补”缺失的部分，但您必须自己实施。

# android - 在 TabActivity 中从 AsyncTask 加载 Json 数据时出错

> ID：12279411
> 
> 赞同：0
> 
> 时间：2012-09-05T10:28:35.677
> 
> 标签：android, json, android-asynctask, android-tabactivity

在我的应用程序中，我创建了一个 TabView，并且正在使用 AsyncTask 加载 JSON 数据。我正在使用 onTabChangedListner()，当单击特定选项卡时，AsyncTask 运行并加载 JSON 数据。当我单击该特定选项卡时，我最终得到了 NullPointerException，但我无法弄清楚我的应用程序从哪里得到 NullPointerException。

`The following is the code of TabGroups Class:`

```
public class TabGroups extends ActivityGroup {

ArrayList<String> list;
Window window;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    if(list == null)
        list = new ArrayList<String>();
}

@Override
public void finishFromChild(Activity child)
{
    LocalActivityManager manager = getLocalActivityManager();
    int index = list.size() -1;
    if(index < 1)
    {
        finish();
        return;
    }
    manager.destroyActivity(list.get(index), true);
    list.remove(index);
    index--;
    String lastId = list.get(index);
    Intent in = manager.getActivity(lastId).getIntent();
    window = manager.startActivity(lastId, in);
    setContentView(window.getDecorView());
}

public void startChildActivity(String Id, Intent intent)
{
    window = getLocalActivityManager().startActivity(Id, intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if(window != null)
    {
        list.add(Id);
        setContentView(window.getDecorView());
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if(keyCode == KeyEvent.KEYCODE_BACK)
        return true;
    return super.onKeyDown(keyCode, event);
}

@Override
public boolean onKeyUp(int keyCode, KeyEvent event)
{
    if(keyCode == KeyEvent.KEYCODE_BACK)
    {
        onBackPressed();
        return true;
    }
    return super.onKeyUp(keyCode, event);
}

@Override
public void onBackPressed()
{
    int length = list.size();
    if(length > 1)
    {
        Activity current = getLocalActivityManager().getActivity(list.get(length - 1));
        current.finish();
    }
}
} 
```

`The following is the code of TabView Class:`

```
public class TabView extends TabActivity implements OnTabChangeListener {

private static TabHost tabHost;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabview);
    tabHost = getTabHost();
    tabHost.addTab(tabHost.newTabSpec("home").setIndicator("Home").setContent(new Intent(this, TabGroup1.class)));
    tabHost.addTab(tabHost.newTabSpec("top5").setIndicator("My Top5").setContent(new Intent(this, TabGroup2.class)));
    tabHost.addTab(tabHost.newTabSpec("resv").setIndicator("My Reservation").setContent(new Intent(this, TabGroup3.class)));
    tabHost.addTab(tabHost.newTabSpec("srch").setIndicator("Search").setContent(new Intent(this, TabGroup4.class)));
    tabHost.addTab(tabHost.newTabSpec("prfl").setIndicator("Profile").setContent(new Intent(this, TabGroup5.class)));
    tabHost.setCurrentTab(0);
    tabHost.setOnTabChangedListener(this);
}
public void onTabChanged(String tabId) {
    // TODO Auto-generated method stub
    Log.v("tag", String.valueOf(tabId));
    if(tabId.equals("home"))
        new LoadingScreen(this).execute("login");
}
} 
```

`The following is the code of TabGroup1 Class`

```
public class TabGroup1 extends TabGroups {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    startChildActivity("Home", new Intent(this, Home.class));
}
} 
```

`The following is the code of LoadingScreen Class:`

```
public class LoadingScreen extends AsyncTask <String, String, String> {

private ProgressDialog progress;
private Context context;
private static String rqst, message;
private static final String TAG_MESAG = "message";
public static ArrayList<HashMap<String, String>> top5List = new ArrayList<HashMap<String, String>>();

public LoadingScreen(Context context)
{
    this.context = context;
    progress = new ProgressDialog(context);
    progress.setMessage("Loading...");
    progress.setIndeterminate(false);
    progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progress.setCancelable(true);
}

@Override
protected void onPreExecute() {
    // TODO Auto-generated method stub
    super.onPreExecute();
    progress.show();
}

@Override
protected String doInBackground(String... data) {
    // TODO Auto-generated method stub
    rqst = data[0];
    if(rqst.equals("login"))
    {
        String url = "http://mygogolfteetime.com/iphone/login/ramu@gmail.com/123456";
        JsonParser jParser = new JsonParser();
        JSONObject json = jParser.getJSONfromUrl(url);
        try
        {
            message = json.getString(TAG_MESAG);
        }
        catch(JSONException e)
        {
            Log.v("Log", String.valueOf(e));
        }
    }
    return null;
}

@Override
protected void onPostExecute(String result) {
    // TODO Auto-generated method stub
    progress.dismiss();
    super.onPostExecute(result);
}

} 
```

`The following is the code of JsonParser:`

```
public class JsonParser {

static InputStream is;
static JSONObject jObj;
static String json = null;

public JSONObject getJSONfromUrl(String url)
{
    try
    {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();
    }
    catch(UnsupportedEncodingException e)
    {
        e.printStackTrace();
    }
    catch(ClientProtocolException e)
    {
        e.printStackTrace();
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }

    try
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();
        String line = null;
        while((line = reader.readLine()) != null)
        {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

    try
    {
        jObj = new JSONObject(json);
    }
    catch(JSONException e)
    {
        e.printStackTrace();
    }
    return jObj;
}
} 
```

**JsonParser 在其他应用程序中运行良好，但在此应用程序中无法正常工作**

Home 类只包含 onCreate() 而没有别的

`The Errors that I am getting are:`

```
08-29 08:21:39.021: E/AndroidRuntime(4156): FATAL EXCEPTION: AsyncTask #1
08-29 08:21:39.021: E/AndroidRuntime(4156): java.lang.RuntimeException: An error occured while executing doInBackground()
08-29 08:21:39.021: E/AndroidRuntime(4156):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at java.lang.Thread.run(Thread.java:1096)
08-29 08:21:39.021: E/AndroidRuntime(4156): Caused by: java.lang.NullPointerException
08-29 08:21:39.021: E/AndroidRuntime(4156):     at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:112)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at org.json.JSONTokener.nextValue(JSONTokener.java:90)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at org.json.JSONObject.<init>(JSONObject.java:154)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at org.json.JSONObject.<init>(JSONObject.java:171)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at com.pnf.gogolf.JsonParser.getJSONfromUrl(JsonParser.java:65)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at com.pnf.gogolf.LoadingScreen.doInBackground(LoadingScreen.java:48)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at com.pnf.gogolf.LoadingScreen.doInBackground(LoadingScreen.java:1)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-29 08:21:39.021: E/AndroidRuntime(4156):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-29 08:21:39.021: E/AndroidRuntime(4156):     ... 4 more
08-29 08:21:40.052: E/WindowManager(4156): Activity com.pnf.gogolf.TabView has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44eba938 that was originally added here
08-29 08:21:40.052: E/WindowManager(4156): android.view.WindowLeaked: Activity com.pnf.gogolf.TabView has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44eba938 that was originally added here
08-29 08:21:40.052: E/WindowManager(4156):  at android.view.ViewRoot.<init>(ViewRoot.java:247)
08-29 08:21:40.052: E/WindowManager(4156):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-29 08:21:40.052: E/WindowManager(4156):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-29 08:21:40.052: E/WindowManager(4156):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
08-29 08:21:40.052: E/WindowManager(4156):  at android.app.Dialog.show(Dialog.java:241)
08-29 08:21:40.052: E/WindowManager(4156):  at com.pnf.gogolf.LoadingScreen.onPreExecute(LoadingScreen.java:37)
08-29 08:21:40.052: E/WindowManager(4156):  at android.os.AsyncTask.execute(AsyncTask.java:391)
08-29 08:21:40.052: E/WindowManager(4156):  at com.pnf.gogolf.TabView.onTabChanged(TabView.java:34)
08-29 08:21:40.052: E/WindowManager(4156):  at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:356)
08-29 08:21:40.052: E/WindowManager(4156):  at android.widget.TabHost.setCurrentTab(TabHost.java:341)
08-29 08:21:40.052: E/WindowManager(4156):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
08-29 08:21:40.052: E/WindowManager(4156):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:453)
08-29 08:21:40.052: E/WindowManager(4156):  at android.view.View.performClick(View.java:2408)
08-29 08:21:40.052: E/WindowManager(4156):  at android.view.View$PerformClick.run(View.java:8816)
08-29 08:21:40.052: E/WindowManager(4156):  at android.os.Handler.handleCallback(Handler.java:587)
08-29 08:21:40.052: E/WindowManager(4156):  at android.os.Handler.dispatchMessage(Handler.java:92)
08-29 08:21:40.052: E/WindowManager(4156):  at android.os.Looper.loop(Looper.java:123)
08-29 08:21:40.052: E/WindowManager(4156):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-29 08:21:40.052: E/WindowManager(4156):  at java.lang.reflect.Method.invokeNative(Native Method)
08-29 08:21:40.052: E/WindowManager(4156):  at java.lang.reflect.Method.invoke(Method.java:521)
08-29 08:21:40.052: E/WindowManager(4156):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-29 08:21:40.052: E/WindowManager(4156):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-29 08:21:40.052: E/WindowManager(4156):  at dalvik.system.NativeStart.main(Native Method) 
```

**请帮助我，因为我必须在 Tabs 的帮助下重新设计我的应用程序..**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:37:13.847

从堆栈跟踪中，NullPointerException 异常发生在 LoadingScreen 类的 doInBackground 方法中。请在下面查看您的 doInBackground 代码以及我的评论：

```
@Override
protected String doInBackground(String... data) {
// TODO Auto-generated method stub
rqst = data[0];
if(rqst.equals("login"))
{
    String url = "http://mygogolfteetime.com/iphone/login/ramu@gmail.com/123456";
    JsonParser jParser = new JsonParser();
    // error could be here, json object is null
    JSONObject json = jParser.getJSONfromUrl(url); 
    try
    {
        message = json.getString(TAG_MESAG);
    }
    catch(JSONException e)
    {
        Log.v("Log", String.valueOf(e));
    }
}
return null; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:41:06.673

我认为您将错误的上下文传递给进度条。

请将进度条定义为

```
progress = new ProgressBar(getParent()); 
```

试试看会发生什么。

# php - mktime 在类中使用时会产生语法错误？

> ID：12279415
> 
> 赞同：0
> 
> 时间：2012-09-05T10:29:02.160
> 
> 标签：php

请有人告诉我为什么 mktime 在课堂上给出错误？

```
<?php

$time_Stamp = mktime(6,30,0);

echo strftime("%H:%M",$time_Stamp);

?> 
```

报告 6:30

```
<?php

    class Test_Time{

        private $time_Stamp = mktime(6,30,0);

    }

    ?> 
```

报告 Parse error: syntax error, unexpected '(', expecting ',' or ';' in C:\Program Files (x86)\Ampps\www\sandbox\general\mktime.php 第 5 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:32:15.443

> 根据 PHP 文档，可以在具有以下限制的类中初始化属性：
> 
> “这个声明可能包括一个初始化，但是这个初始化必须是一个常量值——也就是说，它必须能够在编译时被评估，并且不能依赖运行时信息才能被评估。”

试试这个

```
<?php

class Test_Time{

    private $time_Stamp; 
   function __construct()
   {
        $this->time_Stamp = mktime(6,30,0);

         echo strftime("%H:%M",$this->time_Stamp);
   }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:30:36.307

您无法评估表达式以确定类成员的默认值。而是放入`mktime`构造函数：

```
class Foo {
    private $bar;
    public function __construct() {
        $this->bar = mktime(6, 30, 0);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:32:45.410

您不能直接在类中执行代码。它必须在一个被调用的函数内：

```
<?php
    class Test_Time
    {
        private $time_Stamp;
        function showTime()
        {
            $this->time_stamp=mktime(6,30,0);
            echo strftime("%H:%M",$this->time_Stamp);
        }
    }

    $var=new Test_Time();
    $var->showTime();

?> 
```

这可能是一个`__construct()`函数，但在某些时候必须实例化该类。

这样做的原因是一个类实际上不是任何东西，除非一个变量被定义为该类的对象。在那之前，它只是一个等待被使用的框架。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T10:33:30.987

```
<?php
class Test_Time{

    private $time_Stamp;

    function __construct(){
        $this->time_Stamp = mktime(6, 30, 0);
    }

    function printTime(){
        echo strftime("%H:%M", $this->time_Stamp);
    }
}

//example usage
$test = new Test_Time();
$test->printTime();
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:32:08.377

您直接在类中回显，而是在方法或构造函数中执行

```
<?php

class Test_Time{

   function __construct(){

    $time_Stamp = mktime(6,30,0);

    echo strftime("%H:%M",$time_Stamp);
    }

}

?> 
```

# lua - 如何使用 LuaJava 从 Lua 脚本调用 java API

> ID：12279419
> 
> 赞同：1
> 
> 时间：2012-09-05T10:29:19.210
> 
> 标签：lua, luajava

我编写了一个 java 程序，但由于应用程序问题，我不能直接调用它，而是可以使用 Lua 脚本。谁能帮助我并指导我是否可以从 Lua 脚本调用该 Java 程序。我是 Lua 脚本的新手，也是 LuaJava 的基本初学者。

谢谢你的帮助！！

# javascript - 在 JavaScript 上需要帮助来修剪

> ID：12279422
> 
> 赞同：-4
> 
> 时间：2012-09-05T10:29:25.833
> 
> 标签：javascript, jquery, trim

我的服务器空间面临一些问题。图像正在使用服务器的所有空间，使其变慢。因为它是一个电子商务网站，所以它不会很慢，否则我们会失去客户。

如果我有以下情况：

```
SKU's :
ABC123-001 > catName > Phone
ABC753-851 > catName > MAC
AT1233-098 > catName > PC 
```

如何使用 trim 使其如下：

```
SKU's :
123 > catName > Phone
753 > catName > MAC
1233 > catName > PC 
```

我将在以下脚本中使用它：

```
<script type="text/javascript">
$(function(){
    var sku = $("#ProductBreadcrumb ul li:last").text();
    $(".ProductThumbImage img").attr('src','http://img.example.com/images/'+catName+'/'+sku+'.jpg');
});
</script> 
```

所以，基本上，图片链接的输出将是：

```
http://img.example.com/images/phone/123.jpg
http://img.example.com/images/mac/753.jpg
http://img.example.com/images/pc/1233.jpg 
```

所以，是的，我必须面对的第一个问题是.. 我怎样才能修剪它？

我不熟悉 JavaScript，所以任何帮助将不胜感激：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:52:27.587

这是一个工作[示例](http://jsfiddle.net/Vandeplas/YH9uT/1/)。我不确定重命名与性能有什么关系，但你去吧；）

**编辑：** 抱歉忘记添加其他部分:) [http://jsfiddle.net/Vandeplas/YH9uT/2/](http://jsfiddle.net/Vandeplas/YH9uT/2/)

```
var a = [
    'ABC123-001 > catName > Phone',
    'ABC753-851 > catName > MAC',
    'AT1233-098 > catName > PC'
],
    b=[];

$.each(a, function(index, item){
    //split the folders
    f= item.split(' > ');
    /* take the first folder remove everything after '-' 
     * remove everything non numeric and return it */
    f[0]=f[0].substr(0, f[0].indexOf('-')).replace(/[^0-9]/g, '');
    //rejoin the folders
    b.push(f.join(' > '));
});

console.log(a, b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:10:53.370

**编辑：**

我得到了我正在寻找的解决方案。代码如下：

```
 <script type="text/javascript">
      $(function(){
         var catname = $("#ProductBreadcrumb ul li:last").previous('a').text();

         $(".ProductThumbImage img").attr('src','http://img.example.com/'+catname+'/default.jpg');
      });
  </script> 
```

因此，如果类别名称是“电话”，则生成的 src 将是[http://img.example.com/phone/default.jpg](http://img.example.com/phone/default.jpg)

顺便说一句，此代码是为了避免 BigCommerce 服务器将所有图像下载到服务器。

# qt - QtCreator：源代码的中央“标题”（版权，作者）

> ID：12279425
> 
> 赞同：8
> 
> 时间：2012-09-05T10:29:37.300
> 
> 标签：qt, comments, qt-creator

是否有机会在 QtCreator 中定义一个包含在所有源代码文件（自动）中的中心标题（备注）？

标题应仅包含法律信息、版权、项目网站等的备注。

我想把它放在一个中心位置，以便我需要更改它。如果我手动将它添加到每个`.h`/`.cpp`文件中，我需要在任何地方进行更改，以防我想要进行调整。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-30T10:56:37.557

这只是对克劳迪奥答案的补充。（不能评论，因为我的声望点太少）

[可在许可文件中使用的其他占位符](https://doc.qt.io/qtcreator/creator-how-tos.html#add-a-license-header-template-for-c-code)：

```
%YEAR%: Year
%MONTH%: Month
%DAY%: Day of the month
%DATE%: Date
%USER%: User name
%FILENAME%: File name
%CLASS%: Class name (if applicable)
%$VARIABLE%: Contents of environment variable VARIABLE. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-05T11:03:45.833

您可以做的最接近的事情是添加一个许可证模板（选项 -> C++ -> 文件命名 -> 许可证模板），如下所示：

```
/***************************************************************************
 *                                                                         *
 *   Copyright (C) %YEAR% by CompanyName                                   *
 *                                                                         *
 *   http://CompanyName.com                                                *
 *                                                                         *
 ***************************************************************************/ 
```

Creator 将在创建源文件或头文件时添加此文件，将 %YEAR% 替换为当前年份（可能还有其他占位符）。

但是，如果您想在已经存在的文件上更改此通知，则必须手动进行（编写一个简单的正则表达式来做到这一点应该不难）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T10:45:02.867

是的。通过预编译头文件。

只需添加到您的`<project_name>.pro`文件中

```
PRECOMPILED_HEADER = pch.h 
```

并将此文件添加到您的项目中。

但是...它只会自动添加到所有 .cpp 文件中。

# python - 如何在 Django 中添加字段名称作为变量？

> ID：12279429
> 
> 赞同：2
> 
> 时间：2012-09-05T10:29:55.473
> 
> 标签：python

是否可以传入字段名称而不是硬编码的“last_name”？

```
for item in queryset:
    to_json.append(item.last_name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:31:57.507

你可以做：

```
for item in queryset:
    to_json.append(getattr(item, 'last_name')) 
```

这允许`'last_name'`成为一个变量而不是硬编码的字符串。

# iphone - 如何克服 2,147,483,647 问题 NSNumberFormatter

> ID：12279436
> 
> 赞同：3
> 
> 时间：2012-09-05T10:30:42.830
> 
> 标签：iphone, ios5, nsnumber, nsnumberformatter

```
-(NSString *)convertCurrency:(NSString *)textFieldString{
    NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];

    [numberFormatter setNumberStyle: NSNumberFormatterNoStyle];
    [numberFormatter setGroupingSize:3];
    [numberFormatter setGroupingSeparator:@","];
    [numberFormatter setUsesGroupingSeparator:YES];
    [numberFormatter setMaximumIntegerDigits:20];
    number= [NSNumber numberWithInt:[textFieldString intValue]];
    NSString *numberString = [NSString stringWithFormat:@"$%@",[numberFormatter stringForObjectValue:number]];
    return numberString;
} 
```

当我发送文本字段字符串值是发送 10000000000 时，只返回 2,147,483,647 美元，但我只想要 10,000,000,000 美元。如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T10:38:51.163

使用`long long`. 这是假设 9,223,372,036,854,775,807 美元就足够了。

```
NSNumber* number = [NSNumber numberWithLongLong:[textFieldString longLongValue]];
NSString* numberString = [numberFormatter stringFromNumber:number]; 
```

顺便说一句，您本来可以使用

```
[numberFormatter setCurrencySymbol:@"$"]; 
```

而不是`-stringWithFormat:`添加美元符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:35:17.237

[http://en.wikipedia.org/wiki/Integer_(computer_science)#](http://en.wikipedia.org/wiki/Integer_(computer_science)#)

您将您的价值作为一个 int 和最大值。int 可以容纳的值是 2147483647。您必须使用其他类型，例如 long。

检查这个问题：[长整数值objective-c](https://stackoverflow.com/questions/1147569/long-integer-value-objective-c)

# c# - 静态方法与实例方法的性能

> ID：12279438
> 
> 赞同：130
> 
> 时间：2012-09-05T10:30:53.757
> 
> 标签：c#, performance, static-methods, il

我的问题与静态方法与实例方法的性能特征及其可伸缩性有关。对于这种情况，假设所有类定义都在一个程序集中，并且需要多个离散指针类型。

考虑：

```
public sealed class InstanceClass
{
      public int DoOperation1(string input)
      {
          // Some operation.
      }

      public int DoOperation2(string input)
      {
          // Some operation.
      }

      // … more instance methods.
}

public static class StaticClass
{
      public static int DoOperation1(string input)
      {
          // Some operation.
      }

      public static int DoOperation2(string input)
      {
          // Some operation.
      }

      // … more static methods.
} 
```

上面的类代表了一个辅助样式模式。

在实例类中，解析实例方法需要一些时间，这与静态类相反。

我的问题是：

1.  当保持状态不是问题（不需要字段或属性）时，使用静态类总是更好吗？

2.  与相同数量的实例类定义相比，如果有相当数量的这些静态类定义（例如 100 个，每个都有多个静态方法），这会对执行性能或内存消耗产生负面影响吗？

3.  当调用同一个实例类中的另一个方法时，实例解析是否仍然发生？例如，在同一个实例中使用 [this]`this.DoOperation2("abc")`关键字`DoOperation1`。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-09-05T10:56:03.060

理论上，由于额外的隐藏`this`参数，在所有其他条件相同的情况下，静态方法的性能应该略好于实例方法。

实际上，这几乎没有什么区别，以至于它会隐藏在各种编译器决策的噪音中。（因此，两个人可以“证明”一个人比另一个人更好，但结果不一致）。尤其是因为`this`通常在寄存器中传递并且通常在该寄存器中开始。

最后一点意味着，理论上，我们应该期望将对象作为参数并对其执行某些操作的静态方法比作为同一对象上的实例的等效方法稍差。尽管如此，差异是如此之小，以至于如果您尝试测量它，您可能最终会测量其他一些编译器决策。（特别是因为如果该引用一直在寄存器中的可能性也很高）。

真正的性能差异将归结为您是否人为地让内存中的对象来执行自然应该是静态的事情，或者您是否正在以复杂的方式将对象传递链纠缠起来以执行自然应该是实例的事​​情。

因此对于数字 1。当保持状态不是问题时，最好是静态的，**因为这就是静态的**。这不是性能问题，尽管有一个很好的编译器优化的总体规则 - 更有可能有人努力优化正常使用的案例而不是那些奇怪使用的案例。

2号。没有区别。每个成员都有一定的每类成本，包括有多少元数据，实际 DLL 或 EXE 文件中有多少代码，以及会有多少 jitted 代码。无论是实例还是静态，这都是一样的。

对于第 3 项，`this`是一样`this`的。但是请注意：

1.  参数在`this`特定寄存器中传递。在同一个类中调用实例方法时，它可能已经在该寄存器中（除非它被隐藏并且由于某种原因使用了该寄存器），因此不需要任何操作来设置`this`它需要设置的内容. 这在一定程度上适用于例如方法的前两个参数是它进行的调用的前两个参数。

2.  由于很明显它`this`不为空，因此在某些情况下可以使用它来优化调用。

3.  由于很明显它`this`不为空，这可能会使内联方法调用再次更有效，因为为伪造方法调用而生成的代码可以省略一些它可能需要的空值检查。

4.  也就是说，空检查很便宜！

值得注意的是，作用于对象的通用静态方法，而不是实例方法，可以减少[http://joeduffyblog.com/2011/10/23/on-generics-and-some-of-中讨论的一些成本the-associated-overheads/](http://joeduffyblog.com/2011/10/23/on-generics-and-some-of-the-associated-overheads/)在给定类型没有调用给定静态的情况下。正如他所说，“顺便说一句，扩展方法是使泛型抽象更加付费的好方法。”

但是，请注意，这仅与该方法使用的其他类型的实例化有关，否则不存在。因此，它确实不适用于很多情况（其他一些实例方法使用该类型，其他一些其他代码使用该类型）。

概括：

1.  大多数情况下，实例与静态的性能成本都可以忽略不计。
2.  例如，当您滥用静态时，通常会产生什么成本，反之亦然。如果您不将它作为您在静态和实例之间做出决定的一部分，那么您更有可能获得正确的结果。
3.  在极少数情况下，另一种类型中的静态泛型方法导致创建的类型比实例泛型方法少，这**有时**可以使其很少使用（并且“很少”指的是它在应用程序的生命周期，而不是它被调用的频率）。一旦您了解他在那篇文章中所说的内容，您就会发现它与大多数静态与实例决策 100% 无关。编辑：而且它主要只有 ngen 的成本，而不是 jitted 代码。

编辑：关于空检查有多便宜的说明（我在上面声称）。.NET 中的大多数 null 检查根本不检查 null，而是继续他们将要做的事情，假设它会起作用，如果发生访问异常，它会变成`NullReferenceException`. 因此，大多数情况下，当 C# 代码在概念上涉及空检查时，因为它正在访问实例成员，如果成功，成本实际上为零。一个例外是一些内联调用，（因为他们想要表现得好像他们调用了一个实例成员）并且他们只是点击一个字段来触发相同的行为，所以它们也非常便宜，而且它们仍然经常被排除在外（例如，如果该方法的第一步涉及按原样访问字段）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-05T10:37:43.543

> 当保持状态不是问题（不需要字段或属性）时，使用静态类总是更好吗？

我会说，是的。在声明某事`static`时，您声明了无状态执行的*意图*（这不是强制性的，而是人们期望的某种意图）

> 与相同数量的实例类相比，如果有相当数量的这些静态类（例如 100 个，每个都有多个静态方法），这是否会对执行性能或内存消耗产生负面影响？

不要这么想，除非你确定静态类*真的是*无字的，否则很容易弄乱内存分配并导致内存泄漏。

> 当 [this] 关键字用于调用同一个实例类中的另一个方法时，实例解析是否仍然发生？

不确定，关于*这*一点（这纯粹是 CLR 的实现细节），但认为是的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T10:40:23.973

静态方法更快，但 OOP 更少。如果您将使用设计模式，则静态方法可能是糟糕的代码。业务逻辑最好写成非静态的。文件读取、WebRequest 等常用函数作为静态函数更好。你的问题没有普遍的答案。

# c# - 生成随机词

> ID：12279439
> 
> 赞同：-6
> 
> 时间：2012-09-05T10:30:55.717
> 
> 标签：c#, c#-4.0, c#-3.0, c#-2.0

苹果、芒果、木瓜、香蕉、番石榴、菠萝 - 如何使用 c# 随机（一个接一个）生成这些单词？请帮我从我拥有的单词列表中随机生成单词..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T10:35:06.697

```
Random rnd = new Random();
string GetRandomFruit()
{
    string[] fruits = new string[] { "apple", "mango", "papaya", "banana", "guava", "pineapple" };
    return fruits[rnd.Next(0,fruits.Length)];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T10:51:52.120

You can use Fisher-Yates to do an in place shuffle of an array:

```
static class ArrayMethods
{
    private static readonly Random rng = new Random();
    public static void Shuffle<T>(IList<T> list)
    {
      var r = rng;
      var len = list.Count;
      for(var i = len-1; i >= 1; --i)
      {
          var j = r.Next(i);
          var tmp = list[i];
          list[i] = list[j];
          list[j] = tmp;
      }

    }
} 
```

as follows:

```
var arr = new[]{
  "apple", 
  "mango", 
  "papaya", 
  "banana", 
  "guava", 
  "pineapple"
};
ArrayMethods.Shuffle(arr);
foreach(var item in arr)
    //print 'em out 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T10:36:17.287

`OrderBy`您可以使用 LINQ 的方法和使用`Guid`s获得“随机排序”

```
var words = new [] {"apple", "mango", "papaya", "banana", "guava", "pineapple"};
var wordsInRandomOrder = words.OrderBy(i => Guid.NewGuid());

foreach(var word in wordsInRandomOrder)
{
    Console.WriteLine(word);
} 
```

以下`foreach`将以随机顺序为您提供数组中的每个**项目。**`words`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-05T10:41:09.840

您可以编写以下代码。

```
string[] fruits = new string[] { "apple", "mango", "papaya", "banana", "guava", "pineapple" };
Console.WriteLine(fruits[new Random().Next(0, fruits.Length)]); 
```

# linux - 如何在多线程应用程序中使用异步信号管理共享 POSIX 信号量

> ID：12279440
> 
> 赞同：0
> 
> 时间：2012-09-05T10:31:03.313
> 
> 标签：linux, multithreading, signals, async-safe

我必须编写一个线程安全库，它使用 POSIX 信号量（用作初始值 = 1 的互斥锁）进行同步。我发现了一些正确管理异步信号的问题。我有一个链接到这个静态库的应用程序，并且应用程序（多线程）调用库的函数。对某些内部结构的访问由 posix 信号量控制（它在库内部）：

```
void library_func1(lib_handler *h)
{
   sem_wait(sem);
   /* do some stuff with global data */
   sem_post(sem);
}

void library_func2(lib_handler *h)
{
   sem_wait(sem);
   /* do some stuff with global data */
   sem_post(sem);
}

void library_close(lib_handler *h)
{
   ...
} 
```

`SIGINT`如果在一个线程锁定信号量时引发了一个异步信号，比如说 ，会追加什么？如果我重新启动应用程序，我将遇到死锁，因为信号量存在并且它的值是`0`. 有一个函数`library_close`可以在引发异步信号时释放信号量，但这是最好的检查方法（我认为该函数只有在跟随时才是信号安全的`exit`）？在多线程应用程序中，对所有信号使用单个线程管理器通常是一个好习惯：这个线程应该在库中还是可以在应用程序中启动它？

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:28:35.283

Linux futex 也有同样的问题。它不是完全可解决的，但您可以做的是编写进程的 pid，将信号量锁定在同一共享内存区域的某处。如果另一个进程试图锁定信号量并且花费的时间太长（对于某些“太长”值），它会通过从共享内存中读取 pid 来找出哪个进程锁定了信号量。如果该进程不再存在，您就知道您处于死锁状态（您可能应该死掉，因为库的内部数据可能处于不一致的状态）。

这仍然存在一个小竞赛，因为获取锁的进程可能会在锁定之后但在写入其 pid 之前死亡。AFAIK 没有办法使用信号量来避免这种情况。（如果您有一个锁实现，其中 pid 在获取时以原子方式写入锁变量，它可能会起作用，但您可能需要自己编写。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T20:25:46.647

静态库的状态不会在应用程序的不同运行之间转移，也不会被使用它的其他应用程序共享。它是使用它的应用程序状态的一部分。所以你的信号量不会处于不稳定状态。

# sql - sql：行的值作为列

> ID：12279442
> 
> 赞同：4
> 
> 时间：2012-09-05T10:31:05.600
> 
> 标签：sql, sql-server-2008, pivot

我有一张表，我在其中存储合同的交易，如下所示：

```
Id_Contract[int] | Month[DateTime] | Amount[int]
------------------------------------------------
        1          2012-01-01 00:00:00.000      500     
        1          2012-03-01 00:00:00.000      450 
        2          2012-09-01 00:00:00.000      300     
        3          2012-08-01 00:00:00.000      750 
```

用户应该能够选择查询的时间跨度我想要存档的是，如果用户选择从 01/2012 到 03-2012 的时间跨度，他会得到结果：

```
Id_Contract[int] | Jan 2012 | Feb 2012 | Mar 2012
--------------------------------------------------
    1                   500                       450 
```

你有什么建议我可以解决这个问题吗？

最好的问候， r3try

编辑：感谢到目前为止的答案！当我用谷歌搜索我的问题时，我也偶然发现了旋转，但到目前为止我还没有找到一个真正解决我的问题的例子（因为基本上每个例子都给出了列条目的具体可能性，但在我的例子中，它可能像“2012 年 3 月” ', '2012 年 4 月', ..., '2013 年 1 月', ...)

只是为了给你们一些关于我计划如何处理我从 sql 查询中得到的日期的更多背景信息：我有一个 asp.net webforms 站点，它的 gridview 包含一些合同数据......现在这个表应该通过该特定合同的付款信息进行扩展（基本上是 Id_Contract 上的联接，但“转轴”）。如果用户选择 2012 年 3 月 - 2012 年 5 月，则 Gridview 应包含合同的正常数据 + 3 列付款信息（3 月、4 月、5 月）。在数据库中，只存储了已经插入值的条目。-> 我希望解释能让事情更清楚一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:16:37.803

您的问题可以使用动态透视来解决。请看这篇[文章](http://www.simple-talk.com/blogs/2007/09/14/pivots-with-dynamic-columns-in-sql-server-2005/)

试试这个

```
DECLARE @t TABLE(Id_Contract INT, Dt DATETIME,Amount INT)
INSERT INTO @t SELECT 1,'2012-01-01 00:00:00.000',500
INSERT INTO @t SELECT 1,'2012-03-01 00:00:00.000',450
INSERT INTO @t SELECT 2,'2012-09-01 00:00:00.000',300
INSERT INTO @t SELECT 3,'2012-08-01 00:00:00.000',750

DECLARE @cols AS VARCHAR(MAX), @query  AS VARCHAR(MAX);

SELECT 
    Id_Contract
    , LEFT(DATENAME(month,Dt),3) + ' ' + DATENAME(Year,Dt) AS Month_Year_Name
    ,Amount
INTO #Temp
FROM @t 
WHERE Dt BETWEEN  '01/01/2012' AND '03/31/2012'

SELECT  @cols = STUFF(( SELECT DISTINCT 
                               '],[' +   t2.Month_Year_Name
                        FROM    #Temp AS t2
                        ORDER BY '],[' + t2.Month_Year_Name
                        FOR XML PATH('')
                      ), 1, 2, '') + ']'

SET @query = 'SELECT Id_Contract, ' + @cols + ' FROM 
            (
                SELECT
                     Id_Contract
                    , Amount
                    , Month_Year_Name
                FROM #Temp
           ) x
            PIVOT 
            (
                 MAX(amount)
                 FOR Month_Year_Name in (' + @cols + ')
            ) p '
EXECUTE(@query)
DROP TABLE #Temp 
```

// 结果

```
Id_Contract Jan 2012    Mar 2012
1           500         450 
```

**编辑**

对于您的测试数据，

```
DECLARE @t TABLE(Id_Contract INT, Dt DATETIME,Amount INT) 
INSERT INTO @t SELECT 1,'2012-01-01 00:00:00.000',500 
INSERT INTO @t SELECT 1,'2012-03-01 00:00:00.000',450 
INSERT INTO @t SELECT 2,'2012-03-01 00:00:00.000',450 
INSERT INTO @t SELECT 3,'2012-08-01 00:00:00.000',750 
```

输出是

```
Id_Contract Jan 2012    Mar 2012
1              500          450
2              NULL         450 
```

让我知道它是否满足要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:12:27.640

你想要做的叫做*pivoting*，它由内置[`PIVOT`和`UNPIVOT`关系运算符支持。](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx).

我会用一个解决方案来扩展答案，但现在，看看链接，你会得到大致的想法。

# scala - SBT：对所有项目执行操作

> ID：12279444
> 
> 赞同：6
> 
> 时间：2012-09-05T10:31:15.667
> 
> 标签：scala, sbt

我有一个包含多个子项目的 SBT 项目，即：

```
> projects
[info] In file:/home/me/src/foo/
[info]     popen
[info]     foobar-core
[info]   * foobar-client
[info]     foobar-db 
```

有没有办法在每个子项目中运行一个动作？我正在寻找类似的东西`publish-all`，因为我目前浏览了所有子项目并`publish`手动运行，一旦有多个子项目，这将变得相当乏味。

我`sbt-0.11.2`出于惯性使用，但如果有帮助，我愿意升级。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T10:51:19.387

您可以定义一个聚合所有其他项目的项目。在此项目上运行的每个操作都将在所有聚合上运行。这是来自[sbt wiki](http://www.scala-sbt.org/release/tutorial/Multi-Project.html)的示例：

```
import sbt._
import Keys._

object HelloBuild extends Build {
    lazy val root = Project(id = "hello",
                            base = file(".")) aggregate(foo, bar)

    lazy val foo = Project(id = "hello-foo",
                           base = file("foo"))

    lazy val bar = Project(id = "hello-bar",
                           base = file("bar"))
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-12-24T05:44:08.430

Kim Stebel 的答案非常有效，但需要一个聚合项目。

**（以下方案是用 sbt 1.3.x 测试的）**

我想要一个更动态的解决方案。我们有一个小的 sbt 插件，无论如何我们所有的项目都会用到它。所以我添加了这个：

```
val allProjects = Command.single("allProjects"){ (s,task) =>
  val extracted = Project extract s
  import extracted._
  import currentRef.{ build => curi}
  val build = structure.units(curi)
  build.defined.keys.map(projectId => s"$projectId/$task").foldRight(s)(_ :: _)
}

  override def globalSettings: Seq[Def.Setting[_]] = {
    List(
      commands += allProjects,
      ...
    )
  } 
```

对于单`build.sbt`只使用`commands += allProjects`添加行的第一部分

这将创建命令`allProjects`并且可以像`allProjects compile`.

执行顺序发生，因此它是阻塞的。

# 最好试试这个

经过一番挖掘，我发现，如果没有`.`创建带有路径的项目，则默认情况下所有项目都聚合在根项目中。

我们的问题是，我们希望我们的根项目被命名，所以我们将它定义为

```
lazy val coolProjectName = project.in(file(".")) 
```

我在 build.sbt 中将其更改为：

```
name := "coolProjectName" 
```

这样默认聚合仍然有效。聚合项目上的命令/任务是**并行**执行的。

# java - 如何在java中分隔字符串以满足以下要求？

> ID：12279453
> 
> 赞同：0
> 
> 时间：2012-09-05T10:31:42.817
> 
> 标签：java, string

需要分开字符串，我需要分开它。字符串是动态添加的。

例如

```
1.String a="C:\Wowza Media Systems\Wowza Media Server 2.2.3\content\user2\weight.mp4" 
```

我需要将它分开**user2**

```
2\. String a="C:users\Wowza Media Systems\Wowza Media Server 2.2.3\content\user2\sample.flv" 
```

**所以我为a**动态添加了值，但我需要在**content** 之后分隔**weight.mp4**之前的字符串。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:17:53.503

你也可以接近..

```
String s="C:/Wowza Media Systems/Wowza Media Server 2.2.3/content/user2/weight.mp4";
String strArray[]=s.split("/"); 
String fileName = strArray[strArray.length-1]; /*weight.mp4*/
int index = s.indexOf(fileName); 
String path = s.substring(0,index) /*C:/Wowza Media Systems/Wowza Media Server 2.2.3/content/user2/*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:39:40.310

尝试过这样的事情吗？

```
a = a.replace("users", ""); 
```

我很难解释，因为我不太清楚你想做什么。它只是避免“用户”或添加，还是您尝试做更多的事情？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:47:04.950

您只想对两个最后一个斜杠之间的序列进行子串化。查看 String 类的方法 'lastIndexOf' 和 'substring'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:56:58.180

如果我理解正确，您想从该字符串中获取文件名。如果是这样的话：

如果您的 String a 定义如下：

```
String a="C:\\Wowza Media Systems\\Wowza Media Server 2.2.3\\content\\user2\\weight.mp4" 
```

试试代码：

```
String[] split = a.split("\\");
String file = null;
if(split.length!=0) file=split[split.length-1];
System.out.println(file); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:58:13.173

```
String end = a.substring(a.lastindexof("\\"),a.length); // <- get the end
String tmp = a.substring(0,a.lastindexof("\\"));  // <- get the rest
String start = tmp.substring(0,a.lastindexof("\\"); // <- get the start 
```

我确信上面的代码有一些语法错误，在第一行中你可能必须在 lastindexof 中添加 1。但它为您提供了解决问题的想法。**

# android - Google Play 服务器在许可响应中返回的响应代码（值）是什么？

> ID：12279457
> 
> 赞同：5
> 
> 时间：2012-09-05T10:31:50.023
> 
> 标签：android, android-lvl

我想在我的 android 许可证政策中满足 LICENSE_OLD_KEY 的要求。我打算修改它，`ServerManagedPolicy`因为它不适合这个，据我所知，它似乎只是在寻找或`Policy.LICENSED`方法：`Policy.NOT_LICENSED``processServerResponse`

```
public void processServerResponse(int response, ResponseData rawData) {

    // Update retry counter
    if (response != Policy.RETRY) {
        setRetryCount(0);
    } else {
        setRetryCount(mRetryCount + 1);
    }

    if (response == Policy.LICENSED) {
        // Update server policy data
        Map<String, String> extras = decodeExtras(rawData.extra);
        mLastResponse = response;
        setValidityTimestamp(extras.get("VT"));
        setRetryUntil(extras.get("GT"));
        setMaxRetries(extras.get("GR"));
    } else if (response == Policy.NOT_LICENSED) {
        // Clear out stale policy data
        setValidityTimestamp(DEFAULT_VALIDITY_TIMESTAMP);
        setRetryUntil(DEFAULT_RETRY_UNTIL);
        setMaxRetries(DEFAULT_MAX_RETRIES);
    }

    setLastResponse(response);
    mPreferences.commit();
} 
```

我想知道 LICENSE_OLD_KEY 的响应代码是什么，因为策略中不存在该代码：

```
public static final int LICENSED = 0x0100;
public static final int NOT_LICENSED = 0x0231;
public static final int RETRY = 0x0123; 
```

我看了一下[here](http://developer.android.com/guide/google/play/licensing/licensing-reference.html#server-response-codes)，但找不到列出名称和值的任何地方。

我可以看到 LicenseValidator 中有一个服务器响应代码列表，但它们与 Policy 中的响应代码不匹配：

```
 // Server response codes.
private static final int LICENSED = 0x0;
private static final int NOT_LICENSED = 0x1;
private static final int LICENSED_OLD_KEY = 0x2;
private static final int ERROR_NOT_MARKET_MANAGED = 0x3;
private static final int ERROR_SERVER_FAILURE = 0x4;
private static final int ERROR_OVER_QUOTA = 0x5;

private static final int ERROR_CONTACTING_SERVER = 0x101;
private static final int ERROR_INVALID_PACKAGE_NAME = 0x102;
private static final int ERROR_NON_MATCHING_UID = 0x103; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T14:10:34.033

考虑一下，我决定尝试使用 AlertDialog 在我的手机上显示 Google Play 服务器返回的原因代码。这是我发现的：

在 Developer 控制台配置文件中选择 LICENSED，返回数字 256，根据`Policy.LICENSED`.

选择 NOT_LICENSED 返回数字 561，再次按照`Policy.NOT_LICENSED`.

最后选择 LICENSED_OLD_KEY 返回数字 256，与`Policy.LICENSED`.

因此，似乎不再使用 LICENSED_OLD_KEY，或者更确切地说，LICENSED 和 LICENSED_OLD_KEY 之间没有区别。[鉴于谷歌在其文档中提供的信息，这](http://developer.android.com/guide/google/play/licensing/licensing-reference.html#server-response-codes)有点令人困惑。

需要注意的是，我确实尝试卸载我的应用程序并在开发者控制台中选择不同的选项几次，但它总是得到相同的答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:43:04.860

您正在查看的代码只是一个参考实现。它不知道您想如何详细处理 LICENSED_OLD_KEY 情况。该文档建议您可能希望限制对当前应用程序的访问，或从当前应用程序访问您的服务器数据，并要求用户更新和使用最新版本。没有什么参考实现可以让您处理所有这些情况。您可以并且应该修改代码以单独处理 LICENSED_OLD_KEY。

没有迹象表明 LICENSED_OLD_KEY “不再使用”，因为它仍然在 LicenseValidator.java 中作为服务器响应处理，并且“OLD_KEY”指的是您的应用程序的旧版本，而不是 Google Play 服务器处理的旧版本。

# performance - OpenCL 全局工作偏移量是否意味着性能下降？

> ID：12279462
> 
> 赞同：2
> 
> 时间：2012-09-05T10:32:14.890
> 
> 标签：performance, opencl

我有一个处理大图像的内核（OpenCL 1.1，数据类型是 image2d_t）。有时我只想处理这个图像的一个区域。显而易见的解决方案是使用全局工作偏移。我希望这会产生性能提升，但到目前为止，我只会在非零偏移量下得到*更差的执行时间！*

```
// Image is 4096x4096 pixels. Local work size is 8x8.
//
// Example A:
globalWorkSize = { 4096, 4096 };
globalWorkOffset = { 0, 0 };
// Execution time is 38 seconds
//    
// Example B:
globalWorkSize = { 3296, 3296 };
globalWorkOffset = { 400, 400 };
// Execution time is 58 seconds <------------------ ?!
//
// Example C: Cropped image @ 3296x3296 pixels
globalWorkSize = { 3296, 3296 };
globalWorkOffset = { 0, 0 };
// Execution time is 28 seconds 
```

有人可以解释为什么我得到这些结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-12T16:36:38.010

Lubo Antonov 关于数据访问对齐对性能很重要的观点是正确的。但另一个参数是以跨步模式访问内存。

从 x=400 和 y=400 开始的示例是：

```
. = item
x = work item
c = memory channel
stride = 4096 between y_item=1 and y_item=2 and in this stride, 
some of memory channels are left in "." areas and unused

  unused channel
  ^
  | 
  c c c c c c c c c c
  . . . . . . . . . . 
  . x x x x x x x x x
  . x x x x x x x x x
  . x x x x x x x x x
  . x x x x x x x x x
  . x x x x x x x x x
  . x x x x x x x x x
  . x x x x x x x x x
  . x x x x x x x x x
  . x x x x x x x x x 
```

当然，前 400 个未使用的像素中有更多通道，但其中一些通道​​的数量少于“x”工作区域中的其他通道。例如，通道 2、3、4、5、6、7 在“x”中被访问了 20 次，但通道 1 被访问了 25 次，这迫使对它进行比其他通道更序列化的访问。

如果跨步区域的内存通道数量与非跨步区域不同，则高 2 次方跨步内存访问使用较少的内存通道/存储库并降低性能。

* * *

硬件对性能的 Z 排序支持的优势也可能在工作区的左边缘被破坏。

* * *

如果每个扫描线不是 gpu 中计算单元数量的精确倍数，则同一计算单元可能无法从 L1 缓存中的最后一个扫描线获取缓存数据（请记住 Z 排序访问和高斯滤波器之类的邻居访问）

```
 c = compute unit, S=selected compute unit for observation
   kernel is accessing neighbour pixels too, for filtering, for example

   gpu has 10 compute units   

   strided: L1 cache not hit
   ..........
   .cccSccccc
   .ccccScccc
   .cccccSccc
   .ccccccScc
   .cccccccSc
   .ccccccccS

   non-strided: pixel[y-1] is already in L1, cache hit, more performance
   ..........
   cccScccccc
   cccScccccc
   cccScccccc
   cccScccccc
   cccScccccc 
```

但这并不能保证，只是一种关于工作项的本能是为了最大核心占用而分配的，其中 gpu 的每个核心都通过迭代工作分配来平均加载，而不是这样：先填充，然后填充第二个，然后填充第三个，等等....填充第一个核心将有利于该核心效率，但让其他核心空置会破坏拥有更多核心恕我直言的优势。这也需要一个远程过滤内核。5x5 过滤器将仅受益于边缘像素，而 51x51 过滤器将包括多个工作组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-12T19:23:21.260

尽管使用图像似乎是正确的选择，但可能并非总是如此。

如果您不需要像素之间的插值并且不需要边框颜色处理，那么在图像上使用缓冲区可能会更好。

即使您有边界颜色要处理，您也可以使用单独的内核来处理边缘区域和缓冲区，这可能会提供良好的整体性能。

使用图像获得更好性能的原因来自于从内存中一次加载多个像素的能力，在某些架构中，指令一次可以加载 128 位。

谈到实际问题，我的猜测是 hw 确实使用偏移量和工作 ID 计算每个像素的实际坐标。

# java - 我应该声明字段 volatile 吗？

> ID：12279474
> 
> 赞同：4
> 
> 时间：2012-09-05T10:33:09.250
> 
> 标签：java, concurrency, reference, volatile

考虑以下代码：

```
class Foo {
    java.util.Timer timer = new java.util.Timer();

    void doAction() {
        ...
        timer.schedule(new SomeTimerTask(), 0L);
        ...
    }

    void cancelAction() {
        timer.cancel();
    }
} 
```

从不同的线程调用方法。首先调用方法 doAction()。

我应该声明`timer`字段`volatile`对另一个线程可见吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T10:35:42.807

最好在方法上使用`synchronized`关键字，例如操纵**实例变量的关键状态**..`doAction()``cacelAction()` **`timer`**

 **`volatile`关键字的作用与您描述的将 volatile 字段反映到每个线程的作用非常相似，但这**仅适用于每个单独的操作，而不适用于所有操作。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T10:35:53.610

您不需要使该字段易失，因为两个线程都不会更改该字段本身：它的值在初始化程序中设置一次，之后就不会改变。

您可能需要为您的方法添加同步，但`volatile`在这种情况下完全不需要声明变量：使用`final`会更合适。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T10:41:26.503

Timer 类根据其[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)是线程安全的，

因此，声明`timer`是`volatile`就足够了。

但是，如果`timer`没有分配给其他任何地方（似乎是这种情况），*更好的解决方案*是将字段声明为`final`. 这足以确保`timer`可以从多个线程安全地使用该变量，而无需任何进一步的同步。（[JLS 第 17.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5)特别保证了这一点。）

如果 Timer 不是线程安全的，那么您将需要在同步方法或块（或使用锁等实现的等效项）中对 Timer 实例执行所有操作。声明`timer`是`volatile`或`final`不会是足够的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:39:12.300

不需要将字段设为`volatile`但更好地使用`synchronized`方法。

```
public void synchronized doAction(){}

public void synchronized cancelAction(){} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:35:51.060

即使没有将该字段声明为 volatile，它对所有线程都是可见的。与变量关联的`volatile`关键字将指示 java 运行时该变量可能会被多个线程修改，因此不应在本地缓存。**

# vb6 - 使用类模块时出错

> ID：12279487
> 
> 赞同：-1
> 
> 时间：2012-09-05T10:33:57.273
> 
> 标签：vb6

我在我的项目中使用了一个类模块。我做了一个项目的EXE。但是当我在另一台 PC 上运行时，这个 EXE 会出错......即使在我的 PC 上，如果从另一个文件夹运行。

我收到以下错误 - 5 - 无效的过程调用或参数。

有人可以指导我在制作 EXE 时如何使用 Class 模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:46:37.893

类模块类似于 VB6 中的表单模块或标准模块（简称为“模块”）。基本上，任何有自己的代码窗口的东西都是一个模块。类模块以 .cls 扩展名保存。

您的错误的可能原因是您在尝试使用它时看不到该类。

你的问题可能意味着几个不同的事情。请给我一份所有项目的清单（也许你只有一个，但你可以有更多），所有的表格，所有的标准模块（简称为“模块”），以及你正在使用的所有类模块。这将帮助我更好地理解如何回答你的问题。

# html - 用于 node.js 后端 UI 的框架

> ID：12279492
> 
> 赞同：0
> 
> 时间：2012-09-05T10:34:19.473
> 
> 标签：html, node.js

我正在尝试使用 node.js 开发应用程序。

由于稍后可以从移动设备访问相同的应用程序，因此预计 API 将返回 json 数据，并且在设置适当的请求参数后不会将请求转发到页面。

我主要是一个 Java 后端人员和 UI 框架的新手（包括只有基本知识的 javascript）。

我想知道我应该为 UI 使用哪些 UI 技术？我应该选择纯 HTML 还是 php 或其他任何东西？此外，其他 UI 应用程序是否会成为 webapp 并可能部署在 web 服务器中？

开始使用 node.js 的 express 模块，非常棒。它提供了翡翠（并且可以很容易地从中创建基本的 UI），但我没有机会深入了解它。另外，如果我开始使用玉，我想在我的 app.js 文件中，我需要将请求转发到页面，而不是返回我想要避免的 json 数据。

有人可以建议我应该采用哪些 UI 技术吗？

用户界面应该非常丰富，并且具有许多功能。

谢谢

图科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:01:16.673

我肯定会推荐使用[express.js](http://expressjs.com/)。正如您所提到的，您可以渲染翡翠模板，这将以 html 的形式显示给用户。

您还[`res.json()`](http://expressjs.com/api.html#res.json)可以使用 express 提供的方法将平面旧 JSON 数据发送到客户端。

[Backbone](http://backbonejs.org/)是一个客户端框架，您可以在其中制作单页 Web 应用程序，并且所有 html 模板都呈现在客户端机器上而不是 Web 服务器上。使用 RESTful API 和以下 ajax 请求将数据持久化到后端数据库。获取、发布、放置和删除。

稍后，您可以将这个 RESTful API 用于您的移动应用程序。

# mysql - MYSQL计数函数合并

> ID：12279494
> 
> 赞同：-1
> 
> 时间：2012-09-05T10:34:23.560
> 
> 标签：mysql

在我的数据库表中，我有两列分别为 0 或 1。

我有`type`and `Gender`，其中 type 表示`0 => teacher`and`1 => student`表示性别：`0 => male`and `1 => female`。

如何编写单个 sql 查询来获取教师、学生、男性和女性的数量？

现在我有：

```
select COUNT(type) as teachers from my_table where type = 0; // Teachers
select COUNT(type) as students from my_table where type = 1; // Students
select COUNT(gender) as males from my_table where type = 0; // Males
select COUNT(gender) as females from my_table where type = 1; // Females 
```

可以在一个查询中完成吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:46:56.590

您可以使用`CASE`该 using`SUM`功能：

```
SELECT SUM(CASE type WHEN  1 THEN 1 ELSE 0 END) AS students,
       SUM(CASE type WHEN  0 THEN 1 ELSE 0 END) AS teachers,
       SUM(CASE gender WHEN 1 THEN 1 ELSE 0 END) AS females,
       SUM(CASE gender WHEN 0 THEN 1 ELSE 0 END) AS males
FROM my_table; 
```

您也可以使用`COUNT`函数而不是`SUM`这样：

```
SELECT COUNT(CASE type WHEN  1 THEN 1 ELSE NULL END) AS students,
       COUNT(CASE type WHEN  0 THEN 1 ELSE NULL END) AS teachers,
       COUNT(CASE gender WHEN 1 THEN 1 ELSE NULL END) AS females,
       COUNT(CASE gender WHEN 0 THEN 1 ELSE NULL END) AS males
FROM my_table; 
```

[See this SQLFiddle](http://sqlfiddle.com/#!2/de987/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:42:33.880

这样，您可以在单个查询中完成。如果表中只有两种类型的数据，则无需在子句中指定`IN`条件：`WHERE`

```
SELECT SUM(IF(type = 1, 1, 0)) as students,
       SUM(IF(type = 0, 1, 0)) as teachers,
       SUM(IF(gender = 1, 1, 0)) as females,
       SUM(IF(gender = 0, 1, 0)) as males
FROM my_table
WHERE type IN(0,1)
      AND gender IN(0,1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:45:25.410

您可以使用子查询来实现这一点。

```
SELECT COUNT(type) AS students,
    (SELECT COUNT(type) FROM my_table WHERE type = 0) As teachers,
    (SELECT COUNT(gender) FROM my_table WHERE gender = 1) AS females,
    (SELECT COUNT(gender) FROM my_table WHERE gender = 0) AS males
FROM my_table WHERE type = 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:42:21.383

是的你可以。您是否尝试过将每个 SQL 语句放在一起？
`SQL1 as fld1, SQL2 as fld2, someOtherFieldsIfNeeded FROM ...`

# javascript - Javascript 未在开发服务器上填充 Perl 表单

> ID：12279498
> 
> 赞同：1
> 
> 时间：2012-09-05T10:34:46.450
> 
> 标签：javascript, sql-server, perl, windows-server-2008

我仍然是 Perl 的新手并且遇到了困难。

我这里有一个系统，需要为用户分配权限才能运行报告。

该系统在托管在机器上的本地测试环境中功能齐全，但是一旦将其上传到 Windows Server 2008 for dev，它似乎不再填充分配的报告表单。

我们使用 Javascript 函数来填充用户下拉列表，并填充可用的报告。当涉及到分配的报告时，不再填充任何内容。从存储库中获取的完全相同的代码将在本地环境中正常工作。

只有当我们将 Perl 脚本的目录更改为指向本地机器环境而不是服务器上的 Perl 脚本时，分配的报告才会填充。

这是指向服务器目录的：

```
function ReadUserPermission( iUserID )
{
    var xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
    var szURL;
    var iPermNumber = 0;

    szURL = "/Scripts/Security/ReadPermissions.pl";

    xmlhttp.Open("POST", szURL, false);
    xmlhttp.Send( iUserID );
    var bRetVal = PermissionTab.loadXML( xmlhttp.responseText );
    var rt = xmlhttp.responseText;

    RGCollection = PermissionTab.XMLDocument.selectNodes("//REPORTGROUP");
    for (var i=0; i< RGCollection.length; i++)
    {
        RGXML = new ActiveXObject("Msxml2.DOMDocument")
        RGXML.loadXML( RGCollection.item(i).xml );

        ReportCollection = RGXML.selectNodes( "//REPORTGROUPNAME" );
        szReportGroupName = ReportCollection.item(0).text;

        ReportCollection    = RGXML.selectNodes( "//REPORTGROUPID" );
        iReportGroupID      = ReportCollection.item(0).text;

        ReportCollection = RGXML.selectNodes( "//REPORT" );
        for( var j=0; j < ReportCollection.length; j++ )
        {
            IR = new ActiveXObject( "MSXML2.DOMDocument" );
            IR.loadXML( ReportCollection.item(j).xml );
            IRD = IR.selectNodes( "//REPORTNAME" );      szReportName    = IRD.item(0).text;
            IRD = IR.selectNodes( "//REPORTID" );        iReportID       = IRD.item(0).text;
            IRD = IR.selectNodes( "//PERMISSION" ); bPermission     = IRD.item(0).text;            

            Users[iUserID].Permissions[iPermNumber]                   = new DataClass;
            Users[iUserID].Permissions[iPermNumber].ReportGroupName   = szReportGroupName;
            Users[iUserID].Permissions[iPermNumber].ReportGroupID     = iReportGroupID;
            Users[iUserID].Permissions[iPermNumber].ReportName        = szReportName;
            Users[iUserID].Permissions[iPermNumber].ReportID          = iReportID;
            Users[iUserID].Permissions[iPermNumber].Permission        = bPermission;
            iPermNumber++;
        }
    }
} 
```

但是当 szURL = "//028-07743/Scripts/Security/ReadPermissions.pl" 它运行没有问题。

任何人都可以提供任何帮助，因为这让我感到困惑。

这是我们认为没有运行的 ReadPermissions.pl 脚本。

```
use CGI qw/:standard *table start_ul :cgi-lib/;
use Win32::ODBC;
require "ServerDetails.cfg";

#Reads Details for Connection from CFG file
sub ReadCfg
{
    my $file = $_[0];

    our $err;

    {   # Put config data into a separate namespace
        package CFG;

        # Process the contents of the config file
        my $rc = do($file);

        # Check for errors
        if ($@) {
            $::err = "ERROR: Failure compiling '$file' - $@";
        } elsif (! defined($rc)) {
            $::err = "ERROR: Failure reading '$file' - $!";
        } elsif (! $rc) {
            $::err = "ERROR: Failure processing '$file'";
        }
    }

    return ($err);
}

# Get our configuration information
if (my $err = ReadCfg('ServerDetails.cfg')) {
    print(STDERR $err, "\n");
    exit(1);
}

$szDataSource = "DSN=$CFG::CFG{'server'}{'DSN'};UID=$CFG::CFG{'server'}{'UID'};PWD=$CFG::CFG{'server'}{'PWD'}";

%PARM = Vars;
$iUser = $PARM{'keywords'};

open TMP, ">dhtml.txt";
$db = OpenConnection( $szDataSource );

$szSQLStatement = "EXEC spGetUserPermissionTabData '$iUser'";

$iNumRecordsRead = ReadData( -dbconnection=>$db, -sqlstatement=>$szSQLStatement, -datahash=>\%UserData );

$szXMLString = "<Permissions>\n";
$szCurrentReportGroupName = "";
foreach $KEY ( sort{ $a <=> $b } keys %UserData )
{
    if( $szCurrentReportGroupName ne $UserData{$KEY}{AppGroupName} )
    {
        if( $szCurrentReportGroupName ne "" )   #Close any previous report groups
        {
            $szXMLString .= "\t</REPORTGROUP>\n";
        }
        $szXMLString .= "\t<REPORTGROUP>\n" .
                "\t\t<REPORTGROUPNAME>$UserData{$KEY}{AppGroupName}</REPORTGROUPNAME>\n" .
                "\t\t<REPORTGROUPID>$UserData{$KEY}{ApplicationGroupID}</REPORTGROUPID>\n";
        $szCurrentReportGroupName = $UserData{$KEY}{AppGroupName};
    }
    $szXMLString .= "\t<REPORT>\n" .
            "\t\t<REPORTNAME>$UserData{$KEY}{AppDisplayName}</REPORTNAME>\n" .
            "\t\t<REPORTID>$UserData{$KEY}{ApplicationID}</REPORTID>\n" .
            "\t\t<PERMISSION>$UserData{$KEY}{PermissionType}</PERMISSION>\n" .
            "\t</REPORT>\n";
}
$szXMLString .= "\t</REPORTGROUP>\n" .
        "</Permissions>";

print TMP "UserID = $szUser\n";
print TMP "XML = $szXMLString\n";
print TMP "Size of XML = " . length( $szXMLString ) . "\n";
close $TMP;

print "Content-Type: text/html\n\n";
print "$szXMLString";

sub OpenConnection()
{
    my( $szDSN ) = @_;
    my $db = new Win32::ODBC( $szDSN );

    if( !defined $db )
    {
        my $szLocalTime = localtime();

        $szHTMLString = header;
        $szHTMLString .= "Error creating ODBC connection\n";
        $szHTMLString .= "<BR>Time: $szLocalTime\n";
        $szHTMLString .= end_html();

        print $szHTMLString;

        return NULL;
    }
    return $db;
}

sub ReadData()
{
    my ( %fnArgs ) = @_;
    my $szSQLStatement  = $fnArgs{-sqlstatement};
    my $cDBConnection   = $fnArgs{-dbconnection};
    local( *DataHash )  = $fnArgs{-datahash};

    my $iRowID = 0;
    if ($cDBConnection->Sql($szSQLStatement))
    {
        print "SQL failed. Error: " . $cDBConnection->Error() . "\n";
        $cDBConnection->Close();
        exit;
    }
    while($cDBConnection->FetchRow())
    {
        $DataHash{$iRowID++} = {$cDBConnection->DataHash()};
    }

    return $iRowID;
}

sub XMLizer
{
    local ( *DataHash ) = @_;

    my $szXMLString = "";
    foreach $KEY ( keys %DataHash )
    {
        $szXMLString .= "\t<" . $KEY . ">" . $DataHash{$KEY} . "</" . $KEY . ">\n";
    }

    return $szXMLString;
} 
```

现在看起来，如果我们将 Perl 文件中的 SQL 语句更改为`$szSQLStatement = "EXEC spGetUserPermissionTabData 464";`它将使用特定用户报告填充分配的窗口，即使该用户未选择（预期）。我们现在认为 Perl 文件可能没有收到 Javascript 发送给它的 iUserID

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:18:25.037

Javascript 是一种客户端脚本语言，不会在服务器上运行。

Node.js 应该更有帮助： [http ://en.wikipedia.org/wiki/Node.js](http://en.wikipedia.org/wiki/Node.js)

# ajax - 返回false在表单的提交方法中不生效

> ID：12279499
> 
> 赞同：0
> 
> 时间：2012-09-05T10:34:48.960
> 
> 标签：ajax, javascript-events

返回 false 在表单的提交方法中不生效。

像这样的方法：

```
function success() {
    //some validation logic
    $.ajax(); // ajax call
    return false;
} 
```

谁能告诉我原因？为什么它不起作用？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:45:07.470

在这种情况下，您需要纠正两件事。用值更新`<form>`标签的`onsubmit`事件`return false;`，或者更好的是，给出主要操作：

A.`form`标签：

```
<form method="" action="" onsubmit="runExport(); return false;"> 
```

B.`input`标签：

```
<input type="submit" id="export" value="${appResources.report_common_label_generateReport}" onclick="return runExport();" /> 
```

### 为什么我们使用`return false;`?

原因是防止将表单内容提交给`action`目标的默认操作。因此，我们通过返回一个 false 值来阻止它这样做，从而停止传播。而且，在此之前，我们正在进行 JavaScript 调用，以便它完成我们的工作，而不是默认的。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:38:17.730

表单的“onsubmit”方法必须返回 false 才能停止提交，您所显示的是其他函数的返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:27:59.257

你能告诉你什么时候要返回false吗？

据我了解是

```
<script type="text/javascript">
function validateData(){
    var flag=0;
    //Your validation logic here
    //If validation is not proper then flag=1; else flag=0;
    if(document.getElementById("text1").value==""){
        flag=1;
    }

    if(flag==1){
        return false;
    } else {
        $.ajax({
            success: function(data){

            }
        });
    }
}
</script>

<form name="abc" id="abc" onsubmit="javascript:return validateData()">
    <input type="text" name="text1" id="text1"/>
    <input type="submit" name="sub"/>
</form> 
```

# java - 如何从 SWT 应用程序运行 SWT 应用程序？

> ID：12279502
> 
> 赞同：0
> 
> 时间：2012-09-05T10:34:56.480
> 
> 标签：java, swt

我有两个 SWT 应用程序。从 app 1，我调用 app2：

```
Runtime.getRuntime().exec("App2.bat"); 
```

App2 已运行，但在显示时抛出异常：

```
java.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons: 
    no swt-win32-3740 in java.library.path
    no swt-win32 in java.library.path
    C:\Documents and Settings\Tran Dinh Thoai\.swt\lib\win32\x86\swt-win32-3740.dll: The referenced assembly is not installed on your system
    Can't load library: C:\Documents and Settings\Tran Dinh Thoai\.swt\lib\win32\x86\swt-win32.dll

    at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.C.<clinit>(Unknown Source)
    at org.eclipse.swt.widgets.Display.<clinit>(Unknown Source)
    at com.escapenotes.updater.Checker.run(Checker.java:58)
    at com.escapenotes.updater.Runner.main(Runner.java:20) 
```

当我从命令行调用 app2（运行 App2.bat）时，它运行良好，但从 app1 运行时抛出异常。如何从 app1 运行 app2？

这是 App2.bat 的内容：

```
 @echo off
  set JH=C:\Program Files\Java\jre6
  set CP=C:\Data\Projects\EscapeNotes\extensions\Updater\bin
  set XNP="%CP%";"%CP%\commons-logging-1.1.1.jar";"%CP%\aws-java-sdk-1.0.007.jar";"%CP%\commons-codec-1.4.jar";"%CP%\commons-httpclient-3.0.1.jar";"%CP%\jsoup-1.6.2.jar";"%CP%\log4j-1.2.8.jar";"%CP%\text.jar";"%CP%\jface.jar";"%CP%\jfacetext.jar";"%CP%\osgi.jar";"%CP%\runtime.jar";"%CP%\swt.jar"
  "%JH%\bin\java.exe" -cp %XNP% com.escapenotes.updater.Runner %1 
```

当我添加 -Djava.library.path

```
@echo off
set JH=C:\Program Files\Java\jre6
set CP=C:\Data\Projects\EscapeNotes\extensions\Updater\bin
set XNP="%CP%";"%CP%\commons-logging-1.1.1.jar";"%CP%\aws-java-sdk-1.0.007.jar";"%CP%\commons-codec-1.4.jar";"%CP%\commons-httpclient-3.0.1.jar";"%CP%\jsoup-1.6.2.jar";"%CP%\log4j-1.2.8.jar";"%CP%\text.jar";"%CP%\jface.jar";"%CP%\jfacetext.jar";"%CP%\osgi.jar";"%CP%\runtime.jar";"%CP%\swt.jar"
"%JH%\bin\java.exe" -Djava.library.path="C:\Data\Projects\EscapeNotes\extensions\Updater\bin" -cp %XNP% com.escapenotes.updater.Runner %1 
```

虽然有 C:\Data\Projects\EscapeNotes\extensions\Updater\bin\swt-win32-3740.dll，但我得到了异常：

```
java.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons: 
    C:\Data\Projects\EscapeNotes\extensions\Updater\bin\swt-win32-3740.dll: The referenced assembly is not installed on your system
    no swt-win32 in java.library.path
    C:\Documents and Settings\Tran Dinh Thoai\.swt\lib\win32\x86\swt-win32-3740.dll: The referenced assembly is not installed on your system
    Can't load library: C:\Documents and Settings\Tran Dinh Thoai\.swt\lib\win32\x86\swt-win32.dll

    at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.Library.loadLibrary(Unknown Source)
    at org.eclipse.swt.internal.C.<clinit>(Unknown Source)
    at org.eclipse.swt.widgets.Display.<clinit>(Unknown Source)
    at com.escapenotes.updater.Checker.run(Checker.java:58)
    at com.escapenotes.updater.Runner.main(Runner.java:20) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:42:33.800

从异常看来 swt-win32 库不是由 java.library.path 环境变量定义的。在您的“App2.bat”中，请通过 -D 选项提供它，例如：

```
java -Djava.library.path=[path to your library] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-23T16:20:13.043

查看 SWT 源代码片段项目中的 SnippetLauncher。它演示了如何以编程方式启动代码片段。

```
https://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/SnippetLauncher.java 
```

以上适用于跨平台顺便说一句。我已经在 Linux 和 Windows 上使用过它。

要尝试的另一件事是复制终止片段的运行配置。在调试视图中，查看已终止运行的属性，它显示了用于运行片段的命令。（我在 Gtk 上这样做，不确定它是否在 Windows 上运行良好）。

让我知道这是否可以解决您的问题，或者您还有其他问题。

# javascript - 如何使用 Parse.com JavaScript SDK 上传图像？

> ID：12279515
> 
> 赞同：3
> 
> 时间：2012-09-05T10:35:26.823
> 
> 标签：javascript, backbone.js, parse-platform

我正在使用 Parse.com 构建一个 JavaScript 应用程序，我需要上传照片。我有一个表单允许用户在他们的文件系统上选择图像，但是接下来我该怎么做呢？我在 Parse 站点上找不到任何文档（无论如何，不​​是 JavaScript SDK）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-08T11:27:53.833

下面是一个关于如何上传图片的简单示例：

```
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.15.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {

  // ***************************************************
  // NOTE: Replace the following your own keys
  // ***************************************************

  Parse.initialize("YOUR_APPLICATION_ID", "YOUR_CLIENT_ID");

  function saveJobApp(objParseFile)
  {
     var jobApplication = new Parse.Object("JobApplication");
     jobApplication.set("applicantName", "Joe Smith");
     jobApplication.set("profileImg", objParseFile);
     jobApplication.save(null, 
     {
        success: function(gameScore) {
          // Execute any logic that should take place after the object is saved.
          var photo = gameScore.get("profileImg");
          $("#profileImg")[0].src = photo.url();
        },
        error: function(gameScore, error) {
          // Execute any logic that should take place if the save fails.
          // error is a Parse.Error with an error code and description.
          alert('Failed to create new object, with error code: ' + error.description);
        }
     });
  }

  $('#profilePhotoFileUpload').bind("change", function(e) {
         var fileUploadControl = $("#profilePhotoFileUpload")[0];
         var file = fileUploadControl.files[0];
         var name = file.name; //This does *NOT* need to be a unique name
         var parseFile = new Parse.File(name, file);

         parseFile.save().then
         (
           function() 
           {
               saveJobApp(parseFile);
           }, 
           function(error) 
           {
             alert("error");
           }
         );
  }); 

});
</script>

<body>
    <input type="file" id="profilePhotoFileUpload">
    <img id="profileImg"/>
</body> 
```

# ios - google-api-objectivec-client youtube 播放列表提要没有关键字

> ID：12279520
> 
> 赞同：1
> 
> 时间：2012-09-05T10:35:43.907
> 
> 标签：ios, youtube-api, keyword, playlist, playlists

GData API 今天显示的行为与昨天不同。

我在我的 iOS 应用程序中获取几个播放列表，如下所示：

```
[[self youTubeService] fetchFeedWithURL:[[playlistLink content] sourceURL]
                                          delegate:self
                                          didFinishSelector:@selector(playlistTicket:finishedWithFeed:error:)]; 
```

在我的回调中

```
- (void)playlistTicket:(GDataServiceTicket *)ticket finishedWithFeed:(GDataFeedYouTubePlaylist *)feed error:(NSError *)error {

    if(!error){
        _receivedPlaylistFeeds += 1;

        NSMutableDictionary* sectionDict =  [[NSMutableDictionary alloc] init];
        NSMutableArray* sectionEntries = [[NSMutableArray alloc] init];

        for(GDataEntryYouTubeVideo* entry in feed.entries){

            GDataYouTubeMediaGroup* mediaGroup = [entry mediaGroup];
            GDataMediaKeywords* mediaKeywords = [mediaGroup mediaKeywords];
            NSArray* keyword = [mediaKeywords keywords];
        }
  }} 
```

关键字为零。昨天不是。我依赖这些关键字，不知道可能是什么问题。我在浏览器中检查了 [[playlistLink content] sourceURL]，它加载了包含关键字的 xml。所以我不知道是什么导致了行为的改变。对我来说，它至关重要。该应用程序已在 AppStore 中发布...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:27:52.803

如果用户不是视频的所有者，则 media:keywords 将返回空。

[http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)

编辑：请参阅下面关于我如何解决它的评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T19:47:49.487

我也依赖关键字......我的网页崩溃了两天，我不知道。

您仍然可以访问视频的关键字。当您设置 YouTube 请求设置时...您需要提供用户名和密码以**验证**您是所有者。

[https://developers.google.com/youtube/2.0/developers_guide_protocol#Authentication](https://developers.google.com/youtube/2.0/developers_guide_protocol#Authentication)

或者

[https://developers.google.com/youtube/code](https://developers.google.com/youtube/code)，然后导航到代码的身份验证部分。

我的页面现在可以正常工作，因为我包含了两个附加参数。

# php - 根据设备提供不同的登录

> ID：12279523
> 
> 赞同：0
> 
> 时间：2012-09-05T10:36:03.580
> 
> 标签：php, redirect, mobile, include

我正在构建一个 Web 应用程序 (LAMP - AJAX)，它包含两个单独的版本，一个用于桌面客户端，一个用于移动设备。我想根据他们使用的设备以及正在考虑使用条件重定向的设备从根目录提供不同的登录页面。

我的问题是..这是否会导致最终用户不必要的延迟和/或从 SEO 的角度看起来很糟糕？有没有办法从服务器端无缝地提供内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:49:51.000

重定向的延迟不足以成为用户的问题。

对于 SEO 部分，如果您需要通过身份验证才能使用该应用程序，则没有 SEO，搜索引擎无法索引您的页面。

如果您不需要进行身份验证，那么为什么不在您的登录表单中使用隐藏输入来告诉您用户正在使用的设备。

或者，如果您唯一关心的是网站看起来适合每种设备，我认为响应式设计是比 2 种不同的网站布局更好的选择。

*我刚才还了解到“authentified”不是英文单词，“authenticated”是:)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:03:01.680

最终使用 php 条件包含基于使用[此](http://code.google.com/p/php-mobile-detect/wiki/Mobile_Detect)代码使用的设备

```
if($device->isMobile()){
include("mobilelogin.php");
}else{
include("desktoplogin.php");
} 
```

# jquery - 如何使用 JavaScript 从 While 循环中选择单个 Div？

> ID：12279525
> 
> 赞同：0
> 
> 时间：2012-09-05T10:36:10.503
> 
> 标签：jquery, html, fadein

好的，所以 Iv 有一个 while 循环，它将显示负载和负载的结果，并且 iv 得到了它，以便每个结果的侧面都有一个按钮，上面写着“显示更多”。因此，当我单击显示更多时，我得到了一些将“FadeIn()”其余结果的 javascript。我之前在页面上只有一个结果时已经这样做了，但是现在 iv 得到了很多结果，所以我如何识别 iv 点击的那个。这是我目前拥有的 JavaScript

```
var command = false;
function slideup() { //New function SlidUp
    if (command == false){
         $('#full_result').fadeIn();
         $('#more').text('Display More');
         command = true;
    }else{
         $('#full_result').hide();
         $('#more').text('Display Less');
         command = false;
    }
} 
```

因此，如果页面上有一个结果，则此方法可以正常工作。但是我将如何单独识别每个结果。这是我必须显示结果的代码...

```
<table id="browsedata" border="0">
    <tr>
        <td colspan="2" width="90%" class="quest"><?php echo $row_condition['data']; ?></td>
        <td rowspan="2" class="viewit"><a id="more" href="#" onClick="slideup()">Display More</a></td>
    </tr>
    <tr>
        <td class="questiondetail">Added by: <?php echo $row['username']; ?></td>
        <td class="questiondetail" width="30%">Date Added: <?php echo $dd."/".$mmm."/".$yyyy ?></td>
    </tr>
    <tr>
        <td colspan="3">
            <div id="full_result">
                <!-- Full Result will be displayed here -->
            </div>
        </td>
    </tr>
</table> 
```

这样每个结果都会重复，所以当我单击“显示更多”按钮时，如何让 JavaScript 只在该结果上运行而不是在其他结果上运行？

谢谢

# c# - 在服务器端将客户端时间转换为 UTC

> ID：12279527
> 
> 赞同：3
> 
> 时间：2012-09-05T10:36:24.720
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, datetime, timezone

我有一个常见的问题：

需要在时区之间转换时间

1-我需要找到什么是客户端时区

2-将其转换为 UTC

所以经过一番搜索，我发现找到客户端时区的唯一方法是使用java脚本，我也使用[这个库](https://bitbucket.org/pellepim/jstimezonedetect)，但是这个库返回了这种格式的时区：`Location/CityName`像：`"America/New_York"`

那么我知道在时区之间转换时间的唯一方法是：

```
TimeZoneInfo.ConvertTimeToUtc(clientsidedatetime, TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time") /*Client Time Zone Name*/); 
```

如您所见，使用的时区格式`FindSystemTimeZoneById`与我返回的 java 脚本不同。

问题是如何将这两种格式相互转换，例如转换`Asia/Singapore`为`Singapore Time`？

或者有没有更好的方法来查找客户端时间并将其转换为 UTC 时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:58:19.327

像“美国/纽约”这样的时区是基于 unix/linux 的系统和一般互联网上的标准。它们被称为“奥尔森”时区，以原作者亚瑟奥尔森的名字命名。它们所基于的数据库有时称为“Olson 数据库”、“tz 数据库”或“zoneinfo 数据库”。它们现在由 IANA 维护。[您可以在 Wikipedia 上](http://en.wikipedia.org/wiki/Tz_database)阅读有关它们的更多信息。

Olson 时区与 .Net TimeZoneInfo 类使用的 Microsoft Windows 时区标识符完全不兼容。微软早就有自己的时区数据库，由 Windows Update 维护，[微软在这里](http://blogs.technet.com/b/dst2007)讨论。

在这些标准之间进行转换的权威来源是[Unicode CLDR](http://cldr.unicode.org/) 他们发布了一个可用于转换的表，但我建议您使用库来代替。

.Net 有几个库可用于处理 Olson 时区和 CLDR 数据。最好的（恕我直言）是StackOverflow 名人 Jon Skeet 的[NodaTime](http://code.google.com/p/noda-time/)。这是来自 Java 的一个非常流行的库的一个端口，其中包括一个 Olson 时区实现，以及一组经过重新设计的用于日期时间操作的类，这些类在许多方面都优于 Microsoft。

我知道在 .Net 中实现 IANA/Olson 数据库的库是：

*   [NodaTime](http://code.google.com/p/noda-time/)（推荐）
*   [区域信息](http://zoneinfo.codeplex.com)
*   [TZ4Net](http://www.babiej.demon.nl/Tz4Net/main.htm)

**更新**
所有这些信息以及更多信息都可以在 StackOverflow[时区标签 wiki](https://stackoverflow.com/tags/timezone/info)中找到。

# php - PHP中的用户分支接口

> ID：12279528
> 
> 赞同：0
> 
> 时间：2012-09-05T10:36:25.743
> 
> 标签：php

这是我的情况，想听听其他一些想法或建议。

所以我有 2 个用户分行注册商和分行负责人。所以我在想的是，例如我是分支 ai 的注册商，应该只操作分支 a 的数据并查看分支 a 的数据。这适用于分支 b 和 c 也适用于主要用户。

什么是执行/执行此操作的好方法。到目前为止，我的想法是现在我有来自 3 个分支的混合页面。假设我现在拥有的总页面数是 3，我计划的行动方案是复制这 3 个页面并为每个分支创建 3 个页面，总共 9 个。创建许多页面副本会很麻烦。希望有任何关于我应该如何有效和更快地完成这项任务的方法。这是新的，希望你们能理解。

编辑：我正在使用 php 和 mysql（暂时不是 mysqli，因为我想先掌握 mysql） 在我的数据库中，我有“Branchname”字段，所以我可以使用它。我正在寻找的是一种让页面知道用户是否在特定分支上的有效方式。会话就足够了吗？

```
 $_SESSION['branch'] = $get->Branchname; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:43:22.770

假设您使用的是数据库，您可以在表中为您的注册商和委托人添加一个授权字段，该字段应包含他们可以操作的分支的主键值。因此，当您显示数据或允许对其进行修改时，您的选择标准基于授权字段。

如果您可以指定您正在使用的技术以及一些代码，也许我可以更好地解释。

# ruby-on-rails - ActionMailer 3.2.x OpenSSL::SSL::SSLError

> ID：12279530
> 
> 赞同：3
> 
> 时间：2012-09-05T10:36:26.960
> 
> 标签：ruby-on-rails, smtp

我将我的 Rails 应用程序用于 Rails 3.2.8，发现我的 SMTP 外发邮件不再能够通过我的邮件服务器进行身份验证。

进一步调查显示我的 ActionMailer 配置正在使用以下内容：

```
 config.action_mailer.smtp_settings = { address: 'mail.mydomain.us',
                                         port: 587,
                                         domain: 'mydomain.us',
                                         user_name: 'xxx@mydomain.us',
                                         password: 'yyy',
                                         authentication: 'login',
                                         openssl_verify_mode: 'none',
                                         enable_starttls_auto:  true,
                                         ssl: true } 
```

我看到的具体错误消息是：

```
SSL_connect returned=1 errno=0 state=unknown state: unknown protocol 
```

希望这可以帮助某人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T21:54:17.693

我也遇到了这个问题，我在 SendGrids 网站上发现了一些东西。

这是使用 tls 而不是 ssl [http://sendgrid.com/docs/Integrate/Frameworks/rubyonrails.html的推荐设置](http://sendgrid.com/docs/Integrate/Frameworks/rubyonrails.html)

如果你想使用 SSL，你应该使用端口 465

以下是推荐的端口： [http ://sendgrid.com/docs/User_Guide/smtp_ports.html](http://sendgrid.com/docs/User_Guide/smtp_ports.html)

# jquery - 下一个/上一个按钮工作但不显示

> ID：12279531
> 
> 赞同：0
> 
> 时间：2012-09-05T10:36:29.937
> 
> 标签：jquery, css, html, z-index

我已经设法使下一个/上一个按钮工作，但未能让它们实际显示，我尝试添加 z-index 但认为我可能做错了什么。HTML：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="description" content="Beauchamp&#39;s Corporate offers a unique service for clients wishing to design a special product for their business.">
<title>Beauchamp&#39;s Corporate</title>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#maximage').cycle({
        fx: 'scrollHorz', // choose your transition type, ex: fade, scrollUp, shuffle, etc...
        speed: 1000,
        timeout: 7000,
        prev: '#arrow_left',
        next: '#arrow_right'
    });
});
</script>
<body>

        <div id="cycle-loader">
         </div>   

        <div id="maximage">
            <img src="images/boat1.jpg" alt="" />
            <img src="images/car1.jpg" alt="" />
            <img src="images/dock1.jpg" alt="" />
            <img src="images/glass1.jpg" alt="" />
            <img src="images/hotel1.jpg" alt="" />   
            <img src="images/table1.jpg" alt="" />         
        </div>

        <a href="" id="arrow_left" class="button" title="Previous Photo"></a>

        <a href="" id="arrow_right" class="button" title="Next Photo"></a>  

</body>
</html> 
```

CSS：

```
a.button {
    display:block;
    width:200px;
    height:200px;
    margin-top:200px;
    }

a#arrow_left{
    float:left;
    background: url('images/arrowleft.jpg') repeat;
    position: relative;
    z-index: 100;
}

a#arrow_right{
    float:right;
    background: url('images/arrowright.jpg') repeat;
    position: relative;
    z-index: 100;
}

#maximage { 
height: 100%; 
width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -5000; 
 }
#maximage img {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -5000; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:40:10.700

您的图像路径错误`background: url('images/arrowright.jpg') repeat;`因为您的`css`文件位于**css**文件夹中，但您`images`位于**图像**文件夹中。

所以你需要`../`添加`background: url('images/arrowright.jpg') repeat;`

并且在`background: url('images/arrowleft.jpg') repeat;`

前`images/arrowright.jpg`

所以在添加`../`你的css后应该如下所示；

```
a#arrow_left{
    float:left;
    background: url('../images/arrowleft.jpg') repeat;
    position: relative;
    z-index: 100;
}

a#arrow_right{
    float:right;
    background: url('../images/arrowright.jpg') repeat;
    position: relative;
    z-index: 100;
} 
```

# android - 在android中找到离地理点最近的警察局

> ID：12279532
> 
> 赞同：1
> 
> 时间：2012-09-05T10:36:35.863
> 
> 标签：android

如何在android中找到离地理点最近的特定地区的警察局

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:52:01.183

您将需要 Google Place API。

喜欢：[https](https://maps.googleapis.com/maps/api/place/search/json?location=37.785835,-122.406418&rankby=distance&types=police&sensor=false&key=) ://maps.googleapis.com/maps/api/place/search/json?location=37.785835,-122.406418&rankby=distance&types=police&sensor=false&key= “你的谷歌API密钥”

它将从给定位置为您提供警察局：

前任：

```
{

    "html_attributions": [ ],
    "next_page_token": "ClROAAAAuha4O-3EU2bv3HEZWC4uCwnBGNN1REl5DJmvwwGTXdIpLJJIoAjZCo7Oz3WhkVFPsrTokqCYMvoiBpsgkOtLhPApA39yG1x6HbCrUANTFB8SEO2_p9pOH43PRzuvBY6HrhwaFMRc_HgRPSM6DXi5PjVgBHS2L0Sg",
    "results": [
        {
            "geometry": {
                "location": {
                    "lat": 37.789787,
                    "lng": -122.404926
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "e71eefdf4bb6f83053f77b6e912d3b0c93e70a07",
            "name": "Storefront Political Media",
            "reference": "CoQBeAAAALpR5H-3V8s-aWoozSfB7azhDcXMxYnQ1tf1KenvFN4hqw_xDkHgZqtwQu6zZIDm_Idx_6mx0RMDVwD6kG0lXguSw2uZxKUjQqZ94s3XRu1tSE4bPQFlHSdgCvYEXYf84DcG7-rkR4bTFxvkzrfOOhGAkm3nvJ1jsQWpAam8tSLEEhCQuzeLxsdfvLWVr8gwsEYkGhTQ2LqvI7BQER8ZBjK-6Vn2zKA7Ow",
            "types": [
                "police",
                "establishment"
            ],
            "vicinity": "250 Sutter Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.78386,
                    "lng": -122.412462
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "a387ed44c75e75b602623c5c4601acde59e2e093",
            "name": "San Francisco Police Department",
            "reference": "CoQBfQAAAIHa4qugT0fvLQVpOZNnwI8rp1mNW2pwK7_-nLO10SOa9fdPGo2CPMFtehB5oKDT1EICYQIerGlcHln556HaTBKfXaL1MMmb0X_73SwClAYSTw1k0V90nbICrTYzcXt2F6jz2C9oC13-7_jVyVAWJ77Vo1i8SwIcN_OkjdLKjgEeEhBP0MaxKVM_UK5Q5nGVts-cGhSeCbb2llu_ab8rC1FMbxswyXFEwg",
            "types": [
                "local_government_office",
                "police",
                "establishment"
            ],
            "vicinity": "301 Eddy Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.783812,
                    "lng": -122.412728
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "7a74ae30f53f5e6d64c16407c413e54e236ec50a",
            "name": "San Francisco Police Department Force; Tenderloin",
            "reference": "CpQBkAAAAPpjzuyg29pyo7P0guCGVwWSYWSGABIAFhe0XHCkA35KK-XqQRIiuqbRicNDZvkxPdmyPZEF519p-z6mjZKDB0gQcWBBnaHJSDf_n4ePrU07BrBB9P7mYLYR9T62dIto8Bm6v03ZeeyiKb5UV30ySNrs1I5vErfJWYbu0A1LLBNs757eHTKP6ELAM6dkqxKjBBIQ839EB8csU-AjakF3KN75QxoUKkJ1Vg7W8GucK5ICzfnoQ1fO9Fw",
            "types": [
                "local_government_office",
                "police",
                "establishment"
            ],
            "vicinity": "301 Eddy Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.783774,
                    "lng": -122.412944
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "0d3efeeecf625bc4c1804081abdd3e0807630f36",
            "name": "San Francisco Police Department",
            "reference": "CoQBfQAAAPgce9xzk7LiKO44_LnwejGGkeoDLgu-OYel8yGwa3qbrGWdoP_XRMsiqnkdIPS6yXkhyAoi-ZXI2gYK3qy2eNqZRqzoH4spVJzkHoyXpZKAaw5pPqpxF90LJ8BIR7BTC8NZ6G0wWvU_ZkpRzBZ4eDGj7jsFJZ4obbHH0TorA2SsEhCxnCiVYI9-YOuTQTjv3WJwGhRIoh9UyZRqx52YQvf8r3F3yCJSKw",
            "types": [
                "local_government_office",
                "police",
                "establishment"
            ],
            "vicinity": "301 eddy st,san francisco,CA 94102"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.777301,
                    "lng": -122.402107
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "522b34dca06a3c1a0bb424065ac5680f02749f26",
            "name": "San Francisco Sheriff's Department",
            "reference": "CoQBgAAAAIuFvo4NygDhwlemYL0aDUeEtU9_XFGOUvTtB5jS1aPoaUudJPjd_ju9leYCs8CbZeje8idACjTKaMqYSnxWFEPWbUnO1XOGS1avoapktXlT9uf-JSIkxEEsEyQswdfMP7cK0Ec69y9-UKnVkW6NwIlw9TtMGuqA4j0DasmGmiGZEhC_ZxRYvT7ZmU51W3aZQqosGhS7EXuLCHbWA-rANQeTUzKAClK7AQ",
            "types": [
                "local_government_office",
                "police",
                "establishment"
            ],
            "vicinity": "70 Oak Grove Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.781357,
                    "lng": -122.417997
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "4acea41c3c7ae58298cc1e5b40d5608d0d0dcfd1",
            "name": "Federal Bureau of Investigation",
            "reference": "CoQBfQAAAKNFRxLamyCI4hbWr7juNyrA_ecIuD482GD-axiBBdZgKlvDF5vkJj8SGx__RSjrBinrQsZSj7Obtk8Vml7nPDidxUwT8kDvvY8kri0AFfBXrohe8iISSwohMPk-lBqszK1rD8uhStt4-uucmMNBFZoPOp4MD6oNcGemxwT6haa8EhCsT8jxTbVcWUigjQ2Lb5UnGhSs6eNiPclWCA3sPkDm9ACZZTc70g",
            "types": [
                "local_government_office",
                "police",
                "establishment"
            ],
            "vicinity": "450 Golden Gate Avenue, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.781249,
                    "lng": -122.417974
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "ebe8312c803b968e8f1ff863cca4e2f934ba7872",
            "name": "US Drug Enforcement Administration",
            "reference": "CpQBgQAAAJ6diKHuzZXoj69pGt9EENv10e3nFnKA1C2KtWchDg3P1yYlRztrSTGXQSefiqsEWb5AHO6Qni_Xx9EFV8hWoPUJiuOSsDlBQhHNo6GfKAFzIUDSHWzi0Y154HTsSC8ddGl_h9AadhEJgwlQMNggK_hf5LkU-0jDrXdOee3GszGtrYyH7iVNK77eJyRTV_GjqRIQuiXnREl_U_UaYgLNT-ukwhoUSHpHatll_Jf8-ecjOsfo1SJD1IY",
            "types": [
                "police",
                "establishment"
            ],
            "vicinity": "450 Golden Gate Avenue, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.781249,
                    "lng": -122.417974
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "bb7d9feda3a9287ea0e34b92916efdd53d01b8e4",
            "name": "US Marshals Services",
            "reference": "CoQBcwAAAFZxzSZ_jWYAWo4YBjIGZubm0URiy7JYoSRxrJKwxpIUDv6eT1PbW01Q499iMfBInkG64LWLcs_o2znz-i_W0NDpVJjrdPZnwm-sXG2_2WuJIGYTahn-4ULfLlKUyD6AXQ37TClQxWL1GXEEyzpggTg5TUgdi4OZab98qNK4jJ9kEhARopcjVDPfCl6Dk8UX4BCbGhR-JXlBlKofg8pnJNvn8vO_jB6_zQ",
            "types": [
                "local_government_office",
                "police",
                "establishment"
            ],
            "vicinity": "450 Golden Gate Avenue, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.781249,
                    "lng": -122.417974
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "6bf8854d6ed199b63d7ed9fcea024d0c2f7e5381",
            "name": "US Alcohol Tobacco & Firearms",
            "reference": "CoQBfAAAAPMTmBey9FLuQZhrX6KwhGJFp0U7v_sTcdTX-XUq-pB0Xm7SVRaoUaUd73tszge8b6K06XC_NKjxz0amzAJPSEHAss6biv6y06WGrpRPDxhTKerAX5iNmyfDVAiYNJtwMI9xq7rOwIxzNwgIpHFaORz8MB4reAUkBo6PUc-hKgzbEhBrB9kgeclkDixH9qFQeDOSGhSyz5GT9L2tOnYDfNYX0vZP2rKSwQ",
            "types": [
                "police",
                "establishment"
            ],
            "vicinity": "450 Golden Gate Avenue, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775381,
                    "lng": -122.40404
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "894232a831a748a606dd084ed84789b38a7fd40b",
            "name": "San Francisco County Jail",
            "reference": "CoQBeAAAADtIDjI7Qs2mK2YbUJPZLGlSMHMJPIPyqF280NdN8bIcBuKofr2ue6_gTMiL5PWuFyRU63wvw8ecyhUoOS-p527Doyu0AiTEWpZNr99RG6eE3RhkSbvOvK-463RGQFxO9HPZAaMrcAX1QMaK6jGPfdJurNGW57J3bXpPRjjPjbeJEhCh_0ua8Njhntw9BTjDQNYIGhTLk95S4p8fccx72y5d3kHK82uJMA",
            "types": [
                "local_government_office",
                "police",
                "establishment"
            ],
            "vicinity": "425 7th Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775296,
                    "lng": -122.403909
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "4ee3bb8e8ffbebf4f06c60ed245074dae7317bb4",
            "name": "San Francisco Police Department; Field Operations",
            "rating": 4.3,
            "reference": "CpQBkAAAAPU3Ykx-3lfEWASNEq9K6G13VcxvU1Dxtp6sKgKEIDoLyCusw8lQiLK1SGZzsY94HswqjiqKTOOpMxU1d1sQi4s8Llcm7cLNyzrYg3ov-Wag-pFC3KijqOtCNjK_982GuYQd6ati-4mwCaKho3h5Ehl7R7bLAU2Y5QlCEKCV1UUBbHxgZINK0fvE2QRV57KB4BIQ-0x6jPSEx2mM4Qn7rUTobxoUrfHFnZnyBWPxOdlIBG9IIV1kKYA",
            "types": [
                "local_government_office",
                "police",
                "establishment"
            ],
            "vicinity": "19th St, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775119,
                    "lng": -122.405597
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "7c53e354a2ba6a232d546f6a0d4d7035fed2b5d2",
            "name": "CCSF-Sheriffs Department",
            "reference": "CoQBdgAAAFP-c3exZQI0mmXkAlwqFa0FiHzl4zGu-Aaxt3jbfsZEXVCMaeeYeC_RI2WQcqDDwrummRBr-JmsHi3WwOAEjb9DZLI8FAXAaK_Q8_tY-EWmsPz789s6d0jofW3kgMtMswM5DWERCaooTgfP0zHYbo9UvHA6rXnA-UwnHqL37TTIEhBRLJvAFmdVuokrhFXgJG9jGhQhoAkKVWfAe8YTUPHq8PCk7L8eiA",
            "types": [
                "local_government_office",
                "police",
                "establishment"
            ],
            "vicinity": "425 7th Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775269,
                    "lng": -122.403757
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "70201e2b1abd845b00a96fb16f4e7446bcc99375",
            "name": "San Francisco Police Department; Southern Station",
            "reference": "CqQBkQAAAJtzAlqPahtG6mfSBvNKYLoSV9hlduJokTfluyMmX_mGQOv9BC_WEEF3adDHjNq6DpGsIeeQP52euTDd2cG8NenJfCGM3dEgPtNscS5Y85LbGBJ3Xqbh5euWDwYX7gl6EotC8jVtuRrqzzPM3l-zIApsgj1GUCMjnDHYz1kkBRfkVgyxm5IBOYVa6n2i30w8Fw0Pw6CLxavKVeTkMbBdIHwSEKSKTQyGPCnjqiAju7zFfbkaFDV6hvizbtL1YrBDt54JfbzHvpWx",
            "types": [
                "police",
                "establishment"
            ],
            "vicinity": "850 Bryant Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775269,
                    "lng": -122.403757
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "4b803769b50e5870649b334d4c0f73991304b31a",
            "name": "San Francisco Police Department",
            "reference": "CoQBfgAAACsoN0pt2exPTjafsC2G-zFyONXx67Hbp4Xdxw9EvTzhpAXpDwfdaMzdFkh_FqLG3IFvo-Uw2a375fWDsqiLMQTqcppXFUDmsnvtCuPrNsm_BHu_l-Qkm0t7PdiZdTFNhvRtN4-QD1vrVow3K1DM6H759wrYFnOKOzCujCWLnVBsEhBQuHMIBwpVI9axkjQarGHXGhQNfwjLT8NI0o3T8PNUmh8N5llQtw",
            "types": [
                "police",
                "establishment"
            ],
            "vicinity": "850 Bryant Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775269,
                    "lng": -122.403757
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "5f072a25adc29d11a26c3420853f736f798a07a0",
            "name": "Police Commission",
            "reference": "CnRwAAAAlCrhKu-Ht6T9oG0bIiGYxnVYWyscJpBiDAoHxmPzfRxDZzrRlwvmk-VaALjIJfUYcRN4B1KpF6oAvaTJhRq2OPd_cSpE6UnxbrlWEFhIw0XxzYc1B3twF_cU78B4VXDO6CYHy_p8bOgbB06FKhWWexIQJRqT8QnE9_0Tf6AwllOUKBoU9crzscr0ydNhbD4xF_FpAYjuWjc",
            "types": [
                "police",
                "establishment"
            ],
            "vicinity": "850 Bryant Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775269,
                    "lng": -122.403757
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "1ae36e0afe411b1db057af726caa1b721ceacbaf",
            "name": "Police Department-Management Control",
            "reference": "CpQBggAAAOlLL4GfqBVhNG1hV7ufSmV2rv2ucfClR-XCVOWqHggBb9PT7eEjmmnjXqdjoBCy_C8xKsRhTaA9ZpPzD7PsjOZbDfgOMrCPnNL_LkG7ff0tXCtdb-9J32rjLei3R1z2DrYh29ojHHQgDKtxNHkATzamGBP_sELOl-ZiNFse38E80OSae1GIAEGk7qm2IrokIBIQsmlvwPng4fxp1mOof238ZhoUgKRD6wX3XyKWVFhyV0Jaj2liJt8",
            "types": [
                "police",
                "establishment"
            ],
            "vicinity": "850 Bryant Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775269,
                    "lng": -122.403757
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "a41f2aab19f8dcd16d2fa86735ae358884dc653e",
            "name": "San Francisco Police Department; Traffic Enforcment",
            "reference": "CqQBkgAAACqYHg8srBjh7Dm41OwSHWAKZcrJ947wfnat3up6L7UC_rPB2WKErlTbCrbm3E-vNo7TKfZg1eemSsk9B_KbOAb6ig-itLlbhRWUd3ddOpyAfrw3GuWVkkUdOVAGBzNEP9HgxRLNY5DKMFDdiP5QaggqDGZ8EoUNIJHwqUXxKUTr-jBw_lWWK5COMNrrscqgdl9DVIiDfRSRmDEVWe_HzdMSEGZMWvkOvBOEWT1G0hAkZPAaFHdaE3QokGiH68cCw-N1rYQCpP6w",
            "types": [
                "police",
                "establishment"
            ],
            "vicinity": "850 Bryant Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775269,
                    "lng": -122.403757
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "416a6d2815189e3fc6bbb9c9c1ffc2251b602d78",
            "name": "San Francisco Sheriffs Dept; Judicial Division-Bailiffs",
            "reference": "CqQBlwAAANcN9weLjjjijy0auo8lINWJ8UZI1bbSzXnocNs6VB0G742bqhM5B72jgULlPZuAS-olQwBoz3NoiCcT7nBoB0M0SK7jtkLzIZb2sj3sJzU4j9d5guqLvsGrtLT9ZcNs-AhtXFcKP5BEWERCpyN5Vxr9-fxpU8fkuentMnFsAoK_ZthpUvopoSfMTRXe4QYq55zq1yOeLm0ws1ChQff0ydcSELFQ1VpOsge0Vl9dGrpZHqIaFMqT7pAjbrCpAcelDTMBMLqDfsUs",
            "types": [
                "local_government_office",
                "police",
                "establishment"
            ],
            "vicinity": "850 Bryant Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775252,
                    "lng": -122.403768
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "ad648b77d7547f9f125feeb564341c6eee4528d6",
            "name": "San Francisco Police Department Records and Identifcation Bureau",
            "reference": "CqQBnwAAANVBI_eGm1aoTQgMY33tkBXl5UTXKeB1x2rQ8PKyQwP5QyNnmPC4cjtsAS42mX7prStXYAB3tqrg71uxNL0Xsq2dNNKEXmxxRPEGbiYlZUhuRpcplV2Kv_mBEwVO57BYw5hXSqktK903OuETm7GYZrnhaHd6bMUYo_2L6axYbDC2fOCcCHqkr_H4a52imRfTbPJ5T3m1YCqjycgzFRCAoq4SEPk-WQ7feqKvmDm6_NaI1noaFKVCYh6QnwjumS18px6BJhmZWTr1",
            "types": [
                "police",
                "establishment"
            ],
            "vicinity": "850 Bryant Street, San Francisco"
        },
        {
            "geometry": {
                "location": {
                    "lat": 37.775252,
                    "lng": -122.403768
                }
            },
            "icon": "http://maps.gstatic.com/mapfiles/place_api/icons/police-71.png",
            "id": "037d2ff49817265965fe9811a1420b2a25eafae4",
            "name": "Police Department-Investigations Bureau",
            "opening_hours": {
                "open_now": false
            },
            "reference": "CpQBhQAAAHDVOYEKDEqUGFfHMl_f3ootEmYyQlHQ2LJq8BGxIzV3tGxfEzIXPjVea06EfgynZdXeH-dCqG7I3ENN4We7eSlXGUdi6AWYZixQPPEdd_w0keEdGiiLmFncS86QcIkdyq4cLk3PBtSZFJsPgNKek0lcQAqnFpu_P-4shB8l8lNj9c9noybqA39QE_t0Wj3mlhIQ3Led9nm1rmgUtR2klj0tjxoU07GXuYYOB9_GV6q_I-hHvS365bc",
            "types": [
                "police",
                "establishment"
            ],
            "vicinity": "850 Bryant Street #400, San Francisco"
        }
    ],
    "status": "OK"

} 
```

# iphone - 如何为 Apple 的大图像缩小 iOS 示例设置最大缩放限制？

> ID：12279534
> 
> 赞同：2
> 
> 时间：2012-09-05T10:36:39.097
> 
> 标签：iphone, ios, xcode, uiscrollview, zooming

我在我的项目中使用 Apple 的大图像缩小示例代码来加载可以缩放的大图像。

示例项目可以在这里下载：[Apple Large Image Downsizing](http://developer.apple.com/library/ios/#samplecode/LargeImageDownsizing/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011173-Intro-DontLinkElementID_2)

UIScrollView源码可以直接在这里查看： [ImageScrollView.m](http://developer.apple.com/library/ios/#samplecode/LargeImageDownsizing/Listings/LargeImageDownsizing_ImageScrollView_m.html#//apple_ref/doc/uid/DTS40011173-LargeImageDownsizing_ImageScrollView_m-DontLinkElementID_4)

除了用户可以放大到无穷大之外，它运作良好。似乎当 Apple 使用 UIScrollView 的缩放功能时，实际缩放是通过重新缩放源图像而不是通过转换 UIView 来执行的。（虽然我对它的工作原理的理解有点不稳定！）

我正在寻找将最大缩放限制为图像的全分辨率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:50:48.767

我不知道那个项目，但它似乎没有做你真正想要的。它可以让您拍摄一个非常大的图像文件并缩小它的大小。

有一个 github 项目[PhotoScrollerNetwork](https://github.com/dhoerl/PhotoScrollerNetwork)，它可以让您下载巨大的 JPEG 图像（一个是 NASA 18,000 x 18,000）并在它们到达时逐步解码。然后它使用 CATiledLayers 以足够小的缩小显示图像以适合窗口，但可以缩小到完整的图像分辨率。这可能更符合您的目标。

该项目基于 Apple 的 PhotoScroller 项目，该项目仅适用于预先平铺的图像。

编辑：我下载了大图像缩小项目。它与 Apple 的[PhotoScroller](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)有很多共同之处，如果您浏览后面的项目，您可能会弄清楚如何限制缩放。我怀疑这与以下几行有关：

```
 self.maximumZoomScale = 5.0f;
    self.minimumZoomScale = 0.25f; 
```

也就是说，我将树叶图像粘贴到 PhotoScrollerNetwork 的捆绑包中，并在 iPhone 4 上进行了比较。Large Image Downsizing 项目花了一分钟来解码图像，您可以在渲染时看到图像的增量视图，但它（我相信）它需要磁盘上的整个图像才能继续。

PhotoScrollerNetwork 能够在 32 秒内解码图像 - 大约只有一半时间。如果你从网络下载，它会在接收到数据时对图像进行解码，因此从最后一块数据到你看到图像的延迟很小。

PhotoScrollerNetwork 提供：

*   并发图像下载和渲染

*   自动设置细节级别以优化全尺寸和全屏显示图像

*   非常平滑的缩放和平移（由于预渲染图块）

*   没有文件保存在磁盘上（但它使用磁盘缓存）：这意味着如果应用程序崩溃不需要清理。

    以下日志消息：

    2012-09-05 11:46:11.784 LargeImage[2242:3107] 开始缩小尺寸。迭代：14，平铺高度：754.000000，剩余高度：425 2012-09-05 11:46:11.788 LargeImage[2242:3107] 迭代 1 的 14 2012-09-05 11:46:13.132 LargeImage[2242:3107] 迭代2 of 14 2012-09-05 11:46:15.148 LargeImage[2242:3107] 迭代 3 of 14 2012-09-05 11:46:17.526 LargeImage[2242:3107] 迭代 4 of 14 2012-09-05 11: 46:20.627 LargeImage[2242:3107] 迭代 5 of 14 2012-09-05 11:46:24.017 LargeImage[2242:3107] 迭代 6 of 14 2012-09-05 11:46:27.696 LargeImage[2242:3107] 迭代7 of 14 2012-09-05 11:46:31.823 LargeImage[2242:3107] 迭代 8 of 14 2012-09-05 11:46:36.638 LargeImage[2242:3107] 迭代 9 of 14 2012-09-05 11: 46:41.791 LargeImage[2242:3107] 第 10 次迭代，共 14 次 2012-09-05 11:46:47.309 LargeImage[2242:3107] 第 11 次迭代，共 14 次 2012-09-05 11:46:53。

    2012-09-05 11:57:24.465 PhotoScrollerNetworkTurbo[2262:1c03] 初始化：总计：270237696 已使用：163041280 免费：107196416 [驻留=6574080 虚拟=346882048] 2012-09-05 11:57:24.531cScrollerNetwork[ ] ORIENTATION=1 字符串=1 2012-09-05 11:57:24.535 PhotoScrollerNetworkTurbo[2262:1c03] ZLEVELS=5 2012-09-05 11:57:57.463 PhotoScrollerNetworkTurbo[2262:1c03] FINISH-I: 32974 毫秒 2012- 09-05 11:57:57.946 PhotoScrollerNetworkTurbo[2262:1c03] 已完成：总计：260521984 已使用：219987968 免费：40534016 [驻留=3469312 虚拟=349683712]

# jquery - JQuery过滤行点击

> ID：12279535
> 
> 赞同：0
> 
> 时间：2012-09-05T10:36:43.080
> 
> 标签：jquery, filter, twitter-bootstrap, onclick

我回来了一个关于我的折叠表的新问题，点击时使用 Jquery 行过滤器。对于我认为的专家来说，这个问题应该很简单。如果您折叠表格，您会看到“Fondos De Inversión”和“Sociedades”。

我在点击两个跨度类“fondos”和“sociedades”时应用了一个 Jquery 过滤器，因此这将根据您单击的内容删除“Fondos”行（f）或“Sociedades”行（s）。直到这里一切都很好，问题是我不希望在单击 Sociedades 然后 Fondos 后显示任何行，因为显然我希望删除所有行。

希望问题解释清楚

如何实现？

这是我的情况：http: [//jsfiddle.net/hAv7P/17/](http://jsfiddle.net/hAv7P/17/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:39:55.267

你没有删除任何东西，你只是隐藏和显示东西，并且[toggle()](http://api.jquery.com/toggle/)似乎更适合你正在做的事情：

```
$(function() {
    $('.accordion').on('show hide', function(e) {
        $(this).find('.accordion-toggle i').toggleClass('icon-arrow-down icon-arrow-up', 200);
    });

    $('.accordion-body').collapse();

    $(".fondos").on('click', function() {
        $("tbody .f").toggle();
    });

    $(".sociedades").on('click', function() {
        $("tbody .s").toggle();
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/hAv7P/18/)

# mysql - 计算 3d 对象的最大边 - MySQL 函数选择第二大值

> ID：12279537
> 
> 赞同：1
> 
> 时间：2012-09-05T10:36:50.700
> 
> 标签：mysql, math, cubes

我有宽度、高度和深度的三个字段。假设我有这些价值观

```
width = 5
height = 0.1
depth = 3 
```

我想从这些值中过滤掉最大的两个值，并对两个维度进行数学运算以找出最大的一面。

它应该是`a * b`

```
a = GREATEST(width, height, depth) /* greatest value selected */
b = GREATEST(width, height, depth) /* <-- select the second greatest value here */ 
```

这里之所以不能忽略`width`，是因为不知道 , , 中的哪一个`width`有`height`最大值`depth`，选为`a`

编辑：没有提到这些字段可能包含`NULL`值

编辑：该表包含二维对象的尺寸。在某些情况下`depth`可能不存在。有可能`NULL`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:41:42.337

如果类型是`float`，则可能会出现舍入错误：

```
a = GREATEST(width, height, depth)   /* greatest value selected */
c = LEAST(width, height, depth)
b = width + height + depth - a - c   /* middle value */ 
```

另一条路线：

```
b = ( SELECT width AS side
      FROM tableX
      WHERE pk = externalTable.pk
    UNION ALL
      SELECT height
      FROM tableX
      WHERE pk = externalTable.pk
    UNION ALL
      SELECT depth
      FROM tableX
      WHERE pk = externalTable.pk
    ORDER BY side DESC
      LIMIT 1 OFFSET 1
    ) 
```

# javascript - 我是否需要学习 Java 才能使用 phoneGap 创建 Android 应用程序？

> ID：12279539
> 
> 赞同：2
> 
> 时间：2012-09-05T10:36:57.953
> 
> 标签：javascript, android, html, css, cordova

我是一名网络开发人员（PHP、javascript、html5），从未使用 Java 或任何其他语言创建过 Android 应用程序。我的问题是，我是否需要学习 Java 才能为 android 创建应用程序，以及使用 phoneGap 创建一个很棒的 android 应用程序我应该知道什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:38:33.837

不，除非您需要在某个步骤编写本机插件。

但了解 phonegap 背后的工作原理对您很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:39:10.763

不，您需要知道的只是语言的基础知识，例如包括命名空间/导入、设置一些配置文件以及对使用 IDE 的一般熟悉程度。

除非您正在实现 PhoneGap API 未提供的某些本机功能，否则您也不需要 Java。对于大多数简单的应用程序，JavaScript、HTML 和 CSS 的工作知识就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:38:50.500

你很可能不需要太多的 Java 知识（如果有的话），因为 PhoneGap 应用程序基本上是网站，带有（可选的）额外的 JavaScript 控制设备

您可能需要 Java 的唯一事情是当您升级 Cordova 版本并且由于代码弃用而需要更新一些旧插件时

# objective-c - 将 livu (lib) 与目标 c 一起使用？

> ID：12279542
> 
> 赞同：2
> 
> 时间：2012-09-05T10:37:16.067
> 
> 标签：objective-c, ios, live-streaming

我正在创建一个应用程序，我必须在其中通过 RTMP 协议流式传输视频。我用谷歌搜索并发现 Livu Library 下载了库文件，但没有获得足够的帮助来将该库集成到我的 Xcode 项目中。

任何人请建议一些链接或帮助我。

提前致谢。

# performance - 哪些 CSS 选择器或规则可以显着影响现实世界中的前端布局/渲染性能？

> ID：12279544
> 
> 赞同：54
> 
> 时间：2012-09-05T10:37:17.987
> 
> 标签：performance, css, client-side, rendering-engine

**是否值得担心 CSS 渲染性能？**或者我们是否应该完全不用担心 CSS 的效率，而只专注于编写优雅或可维护的 CSS？

这个问题旨在为前端开发人员提供有用的资源，了解 CSS 的哪些部分实际上会对设备性能产生重大影响，以及哪些设备/浏览器或引擎可能会受到影响。这*不是*关于如何编写优雅或可维护的 CSS 的问题，它纯粹是关于性能的（尽管希望这里写的内容可以为更多关于最佳实践的一般文章提供信息）。

# 现有证据

[Google](https://developers.google.com/speed/docs/best-practices/rendering)和[Mozilla](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS?redirectlocale=en-US&redirectslug=Writing_Efficient_CSS)编写了关于编写高效 CSS 的指南，[CSSLint 的规则集](http://csslint.net/about.html)包括：

> 避免使用看起来像正则表达式的选择器 .. 不要使用复杂的相等运算符以避免性能损失

但他们都没有提供任何证据（我能找到）这些影响。

一篇[关于高效 CSS 的 css-tricks.com 文章](http://css-tricks.com/efficiently-rendering-css/)认为（在概述了大量效率最佳实践之后）我们现在应该`not .. sacrifice semantics or maintainability for efficient CSS`这样做。

一篇[完美杀死博客文章](http://perfectionkills.com/profiling-css-for-fun-and-profit-optimization-notes/#summary)提出了这一点，`border-radius`并且`box-shadow`比简单的 CSS 规则慢了几个数量级。这在 Opera 引擎中非常重要，但在 Webkit 中微不足道。此外，一个[轰动一时的 CSS 基准测试](http://coding.smashingmagazine.com/2011/04/21/css3-vs-css-a-speed-benchmark/)发现 CSS3 显示规则的渲染时间是微不足道的，并且比使用图像渲染等效效果要快得多。

知道你的手机[测试了各种移动浏览器](http://www.knowyourmobile.com/features/1464976/google_chrome_for_ios_vs_safari_an_indepth_speed_and_feature_test.html)，发现它们都以同样的速度渲染 CSS3（在 12 毫秒内），但看起来他们在 PC 上进行了测试，所以我们无法推断手持设备在 CSS3 中的表现如何一般的。

互联网上有[很多](https://developers.google.com/speed/docs/best-practices/rendering) [关于](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS?redirectlocale=en-US&redirectslug=Writing_Efficient_CSS)如何编写高效 CSS 的[文章。](https://developers.google.com/speed/docs/best-practices/rendering) 然而，我还没有找到任何全面的证据表明，糟糕的 CSS 实际上会对网站的呈现时间或快速性产生*重大*影响。

 *# 背景

我为这个问题提供了赏金，试图利用 SO 的社区力量来创建一个有用的、经过充分研究的资源。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-05T10:50:10.097

这里首先想到的是：您使用的[渲染引擎有多聪明？](https://en.wikipedia.org/wiki/Web_browser_engine)

这听起来很笼统，但在质疑 CSS 渲染/选择的效率时非常重要。例如，假设您的 CSS 文件中的第一条规则是：

```
.class1 {
    /*make elements with "class1" look fancy*/
} 
```

因此，当一个非常基本的引擎看到这一点时（并且因为这是第一条规则），它会查看 DOM 中的每个元素，并检查每个元素中是否存在`class1`。更好的引擎可能会将类名映射到 DOM 元素列表，并使用哈希表之类的东西来进行有效查找。

```
.class1.class2 {
    /*make elements with both "class1" and "class2" look extra fancy*/
} 
```

我们的示例“基本引擎”将重新访问 DOM 中的每个元素以查找这两个类。更聪明的引擎会将 DOM 中的元素数量与 class 进行比较，并`n('class1')`取最小值；假设那是，然后传递所有元素并寻找也有的元素。`n('class2')``n(str)``str``class1``class1``class2`

无论如何，现代引擎都很聪明（比上面讨论的例子更聪明），闪亮的新处理器每秒可以执行数百万（数千万）次操作。您的 DOM 中不太可能有数百万个元素，因此任何选择 ( `O(n)`) 的最坏情况下的性能无论如何都不会太差。

* * *

## 更新：

为了获得一些实际实用的说明性证据，我决定做一些测试。首先，为了了解我们在实际应用程序中平均可以看到多少个 DOM 元素，我们来看看一些流行网站的网页有多少个元素：

**Facebook：** ~1900 个元素（在我的个人主页上测试过）。
**谷歌**：~340 个元素（在主页上测试，没有搜索结果）。
**谷歌：** ~950 个元素（在搜索结果页面上测试）。
**雅虎！**：~1400 个元素（在主页上测试）。
**Stackoverflow：** ~680 个元素（在问题页面上测试）。
**AOL：** ~1060 个元素（在主页上测试）。
**维基百科：** ~6000 个元素，其中 2420 个不是`spans`或`anchors`（在[维基百科关于 Glee](https://en.wikipedia.org/wiki/Glee_%28TV_series%29)的文章中测试）。
**Twitter：**约 270 个元素（在主页上测试）。

总结这些，我们平均得到约 1500 个元素。现在是时候进行一些测试了。对于每个测试，我生成了 1500`divs`个（嵌套在其他`divs`一些测试中），每个测试都有适当的属性，具体取决于测试。

* * *

## 测试

样式和元素都是使用 PHP 生成的。我已经上传了我使用的 PHP，并创建了一个索引，以便其他人可以在本地测试：[little link](http://abody-pag.es/csstest/)。

* * *

## 结果：

每个测试在三个浏览器上执行 5 次（报告平均时间）：**Firefox 15.0** (A)、**Chrome 19.0.1084.1** (B)、**Internet Explorer 8** (C)：

```
 A      B      C
1500 class selectors (.classname)                                      35ms   100ms  35ms
1500 class selectors, more specific (div.classname)                    36ms   110ms  37ms
1500 class selectors, even more specific (div div.classname)           40ms   115ms  40ms
1500 id selectors (#id)                                                35ms   99ms   35ms
1500 id selectors, more specific (div#id)                              35ms   105ms  38ms
1500 id selectors, even more specific (div div#id)                     40ms   110ms  39ms
1500 class selectors, with attribute (.class[title="ttl"])             45ms   400ms  2000ms
1500 class selectors, more complex attribute (.class[title~="ttl"])    45ms   1050ms 2200ms 
```

* * *

## 类似的实验：

显然其他人也进行了类似的实验；这个也有一些有用的统计数据：[little link](http://www.stevesouders.com/blog/2009/03/10/performance-impact-of-css-selectors/)。

* * *

## 底线：

除非您关心在渲染时节省几毫秒（1ms = 0.001s），否则不要过多考虑这一点。另一方面，避免使用复杂的选择器来选择大型元素子集是一种很好的做法，因为这会产生一些明显的差异（正如我们从上面的测试结果中看到的那样）。在现代浏览器中，所有常见的 CSS 选择器都相当快。

假设您正在构建一个聊天页面，并且您想要设置所有消息的样式。您知道每条消息都在`div`具有 a 的 a 中`title`，并且嵌套在`div`带有 class的 a 中`.chatpage`。用于选择消息是**正确**`.chatpage div[title]`的，但在效率方面也是不好的做法。给所有消息一个类并使用该类选择它们更简单、更易于维护和更有效。

* * *

## 花哨的单行结论：

任何在“是的，这个 CSS 有意义”范围内的东西都*可以*。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-15T08:24:14.210

这里的大多数答案都集中在选择器性能上，好像它是唯一重要的事情。我将尝试介绍一些精灵琐事（剧透*警告：它们并不总是一个好主意*）、css 使用值性能和某些属性的渲染。

在我得到答案之前，让我先说一下 IMO：就*个人而言，我强烈不同意对“基于证据的数据”的声明需求*。它只是使性能声明*看起来*可信，而实际上渲染引擎领域的异构性足以使任何此类统计结论无法衡量并且无法采用或监控。

由于最初的发现很快就过时了，我宁愿看到前端开发人员了解基础原则及其相对于可维护性/可读性布朗尼点的相对价值——毕竟，*过早的优化是万恶之源*；）

* * *

## 让我们从选择器性能开始：

[**浅层的，最好是一级的，特定的选择器处理得更快。**](https://stackoverflow.com/q/11218698/1081234)原始答案中缺少明确的性能指标，但关键点仍然存在：在运行时，HTML 文档被解析为 DOM 树，其中包含`N`具有平均深度的元素，`D`并且应用了所有`S`CSS 规则。为了降低计算复杂度`O(N*D*S)`，您应该

1.  **让最右边的键匹配尽可能少的元素**- 选择器从右到左匹配[^](https://stackoverflow.com/a/5813672/1081234)以获取单个规则资格，因此如果最右边的键与特定元素不匹配，则无需进一步处理选择器和它被丢弃。

    人们普遍认为`*`应避免选择器，但应进一步考虑这一点。事实上，“正常”的 CSS 重置确实匹配大多数元素 - 当分析此 SO 页面时，重置负责所有选择器匹配时间的大约 1/3，因此您可能更喜欢[normalize.css](http://necolas.github.com/normalize.css/)（不过*，这只会加起来到**3.5 毫秒**- 反对过早优化的观点很明显*）

2.  **避免使用后代选择器**，因为它们最多`~D`需要迭代元素。这主要影响不匹配确认——例如，对于父子关系中的元素，肯定匹配可能只需要一步，但在确认否定匹配之前`.container .content`，需要遍历 DOM 树。`html`

3.  **将 DOM 元素的数量最小化，**因为它们的样式是单独应用的（*值得注意的是，这会被浏览器逻辑所抵消，例如引用缓存和从相同元素回收样式 - 例如，当设置相同同级元素的样式时*）

4.  **[删除未使用](https://developers.google.com/speed/docs/best-practices/payload#RemoveUnusedCSS)**的规则，因为浏览器最终不得不评估它们对每个渲染元素的适用性。说得够多了-最快的规则是不存在的规则:)

从渲染引擎性能的角度来看，这些将导致可量化的（但取决于页面，不一定是可感知的）改进，但是总会有额外的因素，例如流量开销和 DOM 解析等。

* * *

## 接下来，CSS3的属性表现：

CSS3（除其他外）给我们带来了圆角、背景渐变和阴影变化——随之而来的是一大堆问题。想一想，*根据定义*，预渲染的图像比必须先渲染的一组 CSS3 规则表现得更好。来自[webkit 维基](https://trac.webkit.org/wiki/QtWebKitGraphics#Usestaticimages)：

> CSS 中的渐变、阴影和其他装饰应仅在必要时使用（例如，当形状根据内容动态时）——否则，静态图像总是更快。

如果这还不够糟糕，则可能必须在每个重绘/重排事件上重新计算渐变等（更多详细信息见下文）。记住这一点，直到大多数用户用户可以浏览[这样的 css3-heavy 页面](http://lea.verou.me/css3patterns/)而没有明显的延迟。

* * *

## 接下来，精灵表现：

**避免使用又高又宽的精灵**，即使它们的流量足迹相对较小。人们通常会忘记渲染引擎不能与 gif/jpg/png 一起使用，并且在运行时所有图形资源都作为未压缩的位图进行操作。至少它很容易计算：[这个精灵](http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=5)的宽度乘以高度乘以每像素四个字节 (RGBA) 是`238*1073*4≅1MB`. 在同时打开的不同选项卡中的几个元素上使用它，它很快就会产生显着的价值。

[在 mozilla webdev 上发现了](https://blog.mozilla.org/webdev/2009/06/22/use-sprites-wisely/)一个相当极端的例子，但是当使用[对角线精灵](http://www.aaronbarker.net/2010/07/diagonal-sprites/)等有问题的做法时，这一点也不意外。

*可以考虑的替代方法是将单独的 base64 编码图像直接嵌入到 CSS 中。*

* * *

## 接下来，重排和重绘：

[认为回流](http://www-archive.mozilla.org/newlayout/doc/reflow.html)只能通过 JS DOM 操作触发是一种误解——事实上，任何影响布局的样式的应用程序都会触发它影响目标元素、其子元素和跟随它的元素等。防止*不必要的迭代*的唯一方法就是尽量**避免渲染依赖**。一个简单的例子是[渲染表](http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/)：

> *在完全建立布局之前，表格通常需要多次传递，因为它们是元素会影响在 DOM 上出现在它们之前的其他元素的显示的罕见情况之一。想象一下表格末尾的一个单元格，其内容非常宽，导致列完全调整大小。这就是为什么表格不会在所有浏览器中逐步呈现的原因。*

* * *

如果我回忆起遗漏的重要内容，我会进行编辑。一些链接完成：

[http://perfectionkills.com/profiling-css-for-fun-and-profit-optimization-notes/](http://perfectionkills.com/profiling-css-for-fun-and-profit-optimization-notes/)

[http://jacwright.com/476/runtime-performance-with-css3-vs-images/](http://jacwright.com/476/runtime-performance-with-css3-vs-images/)

[https://developers.google.com/speed/docs/best-practices/payload](https://developers.google.com/speed/docs/best-practices/payload)

[https://trac.webkit.org/wiki/QtWebKitGraphics](https://trac.webkit.org/wiki/QtWebKitGraphics)

[https://blog.mozilla.org/webdev/2009/06/22/use-sprites-wisely/](https://blog.mozilla.org/webdev/2009/06/22/use-sprites-wisely/)

[http://dev.opera.com/articles/view/efficient-javascript/](http://dev.opera.com/articles/view/efficient-javascript/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T11:08:29.027

虽然这是真的

> 10 年前，计算机速度要慢得多。

如今，您还有更多种类的设备可以访问您的网站。虽然台式机/笔记本电脑已经突飞猛进，但中低端智能手机市场的设备在许多情况下并不比我们十年前的台式机强大多少。

但话虽如此，在为尽可能广泛的设备范围提供良好体验方面，CSS 选择速度可能接近于您需要担心的事情列表的底部。

在此基础上，我无法找到与更现代的浏览器或移动设备相关的特定信息，这些信息与低效的 CSS 选择器苦苦挣扎，但我能够找到以下信息：

1.  [http://www.stevesouders.com/blog/2009/03/10/performance-impact-of-css-selectors/](http://www.stevesouders.com/blog/2009/03/10/performance-impact-of-css-selectors/)

    现在已经过时了（IE8，Chrome 2），但在某些浏览器中建立各种选择器的效率方面做出了不错的尝试，并且还尝试量化 CSS 规则的 # of CSS 规则如何影响页面呈现时间。

2.  [http://www.thebrightlines.com/2010/07/28/css-performance-who-cares/](http://www.thebrightlines.com/2010/07/28/css-performance-who-cares/)

    再次过时（IE8，Chrome 6），但在低效的 CSS 选择器中走极端以`* * * * * * * * * { background: #ff1; }`造成性能下降。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-13T19:12:46.410

对于这么大的赏金，我愿意冒着空回答的风险：没有官方的 CSS 选择器会导致渲染明显减慢，并且（在当今快速计算机和快速浏览器迭代的时代）任何找到的东西都很快由浏览器制造商解决。即使在移动浏览器中也没有问题，除非粗心的开发人员愿意使用非标准的 jQuery 选择器。jQuery 开发人员将这些标记为有风险的，并且确实可能​​存在问题。

在这种情况下，缺乏证据就是缺乏问题的证据。因此，请使用语义标记（尤其是 OOCSS），并报告在晦涩的浏览器中使用标准 CSS 选择器时发现的任何减速。

来自未来的人：2012 年的 CSS 性能问题已经成为过去。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T11:19:19.167

不是 css 是一种无关紧要的让它更快的方法，它一定是你看性能时最后要看的东西。以适合您的方式制作您的 css，编译它。然后把它放在头上。这可能很粗糙，但是当您查看浏览器性能时，它们还有很多其他需要寻找的东西。如果你在数字局工作，你不会因为加载时间增加 1 毫秒而获得报酬。

正如我评论的那样，使用 pagespeed for chrome 它是一个谷歌工具，可以用 27 个参数 css 分析网站，其中之一。

我的帖子只是关注，不希望大约 99% 的网络用户能够打开网站并正确查看，即使是使用 IE7 等的人。比使用 css3 关闭大约[10%](http://www.w3schools.com/browsers/browsers_explorer.asp)，（如果事实证明你可以获得额外的 1-10 毫秒的性能）。

大多数人至少有 1mbit/512kbit 或更高，如果你加载一个沉重的网站，加载大约需要 3 秒，但你可以在 css 上节省 10ms？

当涉及到移动设备时，您应该只为移动设备制作网站，因此当您的设备屏幕尺寸小于“宽度”像素时，您就有了一个单独的网站

请在下面评论这是我的观点和我对 Web 开发的个人经验

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T13:38:28.533

虽然不直接与代码相关，但使用`<link>`over`@import`包含样式表可提供更快的性能。

[通过 stevesouders.com “不要使用@import”](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)

本文包含各种类型之间的大量速度测试示例，以及一种类型与另一种类型（例如：一个名为 via 的 CSS 文件`<link>`也包含`@import`另一个 css 文件）。*

# maven-plugin - 运行“mvn apt:process”时“需要指定一个或多个处理器”

> ID：12279545
> 
> 赞同：4
> 
> 时间：2012-09-05T10:37:21.203
> 
> 标签：maven-plugin, spring-roo, querydsl

我正在尝试让 QueryDSL 参与 Spring Roo 项目。

这是我的插件配置：

```
 <plugin>
            <groupId>com.mysema.maven</groupId>
            <artifactId>maven-apt-plugin</artifactId>
            <version>1.0.2</version>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>target/generated-sources</outputDirectory>
                        <processor>com.mysema.query.apt.jpa.JPAAnnotationProcessor</processor>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

当我运行以下命令时：`mvn apt:process`，我收到以下错误：

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building suivitrc 0.1.0.BUILD-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-apt-plugin:1.0.2:process (default-cli) @ suivitrc ---
[ERROR] Either processor or processors need to be given
[ERROR] execute error
java.lang.IllegalArgumentException: Either processor or processors need to be given
        at com.mysema.maven.apt.AbstractProcessorMojo.buildProcessor(AbstractProcessorMojo.java:140)
        at com.mysema.maven.apt.AbstractProcessorMojo.execute(AbstractProcessorMojo.java:157)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at 

    org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
            at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
            at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
            at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
            at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
            at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
            at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
            at java.lang.reflect.Method.invoke(Method.java:597)
            at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
            at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
            at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
            at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 1.375s
    [INFO] Finished at: Wed Sep 05 12:22:16 CEST 2012
    [INFO] Final Memory: 7M/18M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal com.mysema.maven:maven-apt-plugin:1.0.2:process (default-cli) on project suivitrc: Either processor
    to be given -> [Help 1]
    [ERROR]
    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
    [ERROR] Re-run Maven using the -X switch to enable full debug logging.
    [ERROR]
    [ERROR] For more information about the errors and possible solutions, please read the following articles:
    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

当然，我已经尝试过 mvn install ，它不会生成任何源。

欢迎任何建议。

编辑： maven-apt-plugin 的唯一输出是：

```
[INFO] --- maven-apt-plugin:1.0.2:process (default) @ suivitrc --- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:35:52.640

您直接调用目标。在这种情况下不使用执行配置。运行全新安装时是否遇到相同的异常？

# javascript - 在 Javascript 字符串中使用 Bootstrap 的弹出框插件

> ID：12279546
> 
> 赞同：2
> 
> 时间：2012-09-05T10:37:32.927
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我正在尝试使 popover 插件在 Javascript 字符串中工作。因此，当用户将鼠标悬停时`geolocation`，弹出框将出现，并在鼠标移开时消失。

```
<script type="text/javascript">
     $('#directions-panel').text("We can't give you directions to our office as you don't have", <a href="#" rel="popover" data-content="Some content..." data-original-title="Some title..." > geolocation </a> " enabled on your browser. Enable geolocation and try again. The map above will show you where our office is located.");
</script> 
```

并使用这样的东西调用？

```
$("[rel=popover]")
    .popover({
        offset: 10
    })
    .mouseover(function(e) {
        e.preventDefault()
    }) 
```

我知道这有点过头了，但是我四处搜索，找不到任何与我想做的类似的事情。我确定可以做到，有人指出我正确的方向吗？

编辑：

我知道在联系页面中有以下内容：

```
<div id="directions-panel">
        <div id="directions-error-message" style="visibility:hidden">
          We can't give you directions to our office as you don't have <a href="#" id="geoloc-popover" rel="popover" data-content="Some content..." data-original-title="Some title..." > geolocation </a> enabled on your browser. Enable geolocation and try again. The map above will show you where our office is located.
        </div>
</div> 
```

并且 DIV`directions-error-message`在以下 JS`function failure()`触发时可见：

```
function failure() {
        alert("Your browser does not have geolocation enabled so we can't give you directions to our office. Enable geolocation and try again, or consult the map for our address.");
        $("#directions-error-message").css({
          visibility: 'visible'
        });     
        var destMapOptions = {
          zoom:15,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: new google.maps.LatLng(ourLocation.lat, ourLocation.lng)
        }
        map = new google.maps.Map(document.getElementById("map-canvas"), destMapOptions);
        marker = new google.maps.Marker({
          position: ourLatLng,
          map: map,
          draggable: false,
          animation: google.maps.Animation.DROP,
          title: "Hello"
        });
        google.maps.event.addListener(marker, 'click', toggleBounce);
    }

    $(function() {
        $('#directions-error-message').popover({
            selector: '[rel="popover"]', 
            trigger: 'hover'
        });
    }) 
```

有没有办法让`directions-error-message`DIV 中的“地理位置”触发弹出框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:55:15.077

为什么不尝试这样的事情：

```
<div style="visibility:hidden">
  We can't give you directions to our office as you don't have", <a href="#" rel="popover" data-content="Some content..." data-original-title="Some title..." > geolocation </a> " enabled on your browser. Enable geolocation and try again. The map above will show you where our office is located.
</div> 
```

然后用 javascript 改变 div 的可见性。这样，设置标题的 jQuery 将识别链接，但用户在您希望他们看到之前不会看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:09:47.267

[Twitter Bootstrap 的 Popover 插件](http://twitter.github.com/bootstrap/javascript.html#popovers)确实有一个选项可以启用其 data-api 来触发切换弹出框。启用它将使所有具有正确标记的动态添加的元素都可以正常工作，而无需在 JavaScript 中进行进一步的初始化调用。

该功能默认禁用主要是因为订阅页面上的所有**mouseenter**和**mouseleave**事件可能会导致性能问题（这是 TBS < 2.1 中的默认设置）。如果您可以保持激活区域相对特定，那么您应该在性能方面做得很好。

要为`#directions-panel`悬停启用它，语法为：

```
$('#directions-panel').popover({selector: '[rel="popover"]', trigger: 'hover'}); 
```

包括弹出框在内的所有后续面板更新将默认处于活动状态。

# expressionengine - 表达式引擎中 offest = "-1" 的替代方法

> ID：12279549
> 
> 赞同：0
> 
> 时间：2012-09-05T10:37:43.003
> 
> 标签：expressionengine

有谁知道表达式引擎如何处理 EE 中频道条目列表中的负偏移量？

如 offset="-1"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:50:44.223

如果你使用`offset="-1"`in `{exp:channel:entries}`，你会得到一个严重的 MySQL 错误（假设你以超级管理员身份登录或者能够看到错误）。

从您的问题中不清楚您的目标是什么。如果您期望负偏移量来反转顺序（如 PHP 字符串函数），您可以使用相反的`sort`值。默认为`desc`，`sort="asc"`反之亦然。使用肯定`offset="X"`跳过 X 条目。

如果您期望`offset`在[PHP array_slice](http://php.net/manual/en/function.array-slice.php)中出现类似的情况，您仍在“前进”，但负偏移量从最后开始 X 个条目，我不相信有直接比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:13:25.233

目标是在与当前频道条目相同的页面上使用前面的频道条目。

我设法通过提取相关的 entry_ids 并在 php 中处理它们然后用 fixed_order 属性将它们放回原处来做到这一点

# qt - 设置事件优先级

> ID：12279552
> 
> 赞同：5
> 
> 时间：2012-09-05T10:37:48.307
> 
> 标签：qt, serial-port, priority-queue

我正在QT中申请。我使用 QExtSerialPort 从我的 comp 的串行端口接收数据（只要发出 readyread() 信号）。我也有一些计时器以一定的时间间隔运行其他事情。现在我注意到，当定时器打开时，不是所有readyread信号的数据都发出了很多，然后定时器没有打开。QT中有没有办法确保串口的所有数据都被接收到？也许通过为readyread事件设置高优先级或类似的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T18:17:42.793

信号槽连接和事件系统之间存在差异。信号发射和槽触发不是独立的东西——当信号发出时，连接的槽开始工作。所以它们（信号）不会丢失。

所有事件都通过应用程序发送，也被接收，但它可以稍后发生。当控制返回主事件循环时，将处理存储在队列中的所有事件。

如果您自己发布事件，则可以使用 `static void QCoreApplication::postEvent ( QObject* receiver, QEvent* event, int priority );`方法。事件按优先级降序排列，即优先级高的事件排在优先级低的事件之前。优先级可以是任何整数值，即介于INT_MAX和INT_MIN之间，包括两个值；有关详细信息，请参阅 Qt::EventPriority。具有相同优先级的事件将按照发布的顺序进行处理。

# java - 在java中转义xml字符串

> ID：12279553
> 
> 赞同：0
> 
> 时间：2012-09-05T10:37:54.460
> 
> 标签：java, xml, cdata, jdom

我从 rss-feed 中读取带有 CDATA 部分的元素，我需要将其转换为有效的 xml。CDATA 部分中的内容大多是有效的 xhtml，但有时像 & 符号这样的字符会出现在属性（url）中。

我可以用它`.replaceAll("&", "&amp;")`来解决这个问题，但稍微向前思考可能是其他无效字符出现在属性或文本中。

我要导入元素的 CMS 不会接受 CDATA 部分而不为内容设置另一个配置，所以我的问题是：是否有任何简单的方法来转义字符串，仅用于属性和文本？

我在导入后使用 jdom 库来操作 xml。

编辑：我检查了 apache 的 StringEscapeUtils，但这是转义整个字符串。我需要一些只能转义元素内的属性值和文本的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:41:22.853

Apache Commons 为此提供了方便的函数：[StringEscapeUtils](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:59:42.603

当您使用 JDOM 时，它会自动正确地转义任何需要它的内容。您的 CMS 是否加载了 JDOM 的输出，或者您是否使用其他库来填充 CMS...？

从本质上讲，如果您有有效的 XML 输入，并且使用 JDOM（来自 org.jdom2.output.*）来输出数据，那么您将始终有良好的输出......那么，您在做什么来破坏输出？

罗尔夫

# ios - 如何使用 MagicalRecord 映射属性名称？

> ID：12279560
> 
> 赞同：3
> 
> 时间：2012-09-05T10:38:29.237
> 
> 标签：ios, magicalrecord

我有一个 NSManagedObjectModel 子类，它有这个属性：

`userId`

但是，下载的 XML 被解析为`NSDictionary`要映射到我的模型的 XML，使用此属性：

`userid`

（注意大小写的区别）

我尝试关注这篇博文，但我仍然做错了（因为数据没有正确映射）：

[http://www.cimgf.com/2012/05/29/importing-data-made-easy/](http://www.cimgf.com/2012/05/29/importing-data-made-easy/)

这是一个屏幕截图，显示了我如何在数据模型构建器中设置模型：

![屏幕截图，MagicalRecord](../Images/f6e6b30ffa4156c7ed571a1455db9c9b.png)

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:37:14.267

这是执行此操作的正确方法：

在属性上设置这个：

`name = userId`

在属性`User Info`集上：

```
key = mappedKeyName
value = userid 
```

这是它的外观：

![MagicalRecord 映射设置](../Images/bdb8705ae080e3688389df6707bbaf9d.png)

# iphone - 收集 iOS 电话簿联系人

> ID：12279562
> 
> 赞同：1
> 
> 时间：2012-09-05T10:38:35.897
> 
> 标签：iphone, objective-c, ios, abaddressbook

随着 iOS 6 的推出，我阅读了苹果添加的联系人隐私设置，如此[处](http://www.iphonehacks.com/2012/06/ios-6-new-privacy-settings.html)所述。

但是，在以前的 iOS 版本中，此设置不存在，并且用户隐私处于危险之中，尤其是在人们意识到“路径”正在将 iOS 联系人转储到其服务器上之后。

如果一个应用程序想要在 iOS 5 或以前的版本中收集电话簿数据，哪种方式更好？

1.  通过 . 明确请求权限一次`UIAlertView`。
2.  每次通过`UIAlertView`.
3.  在其中创建一个应用程序条目`Settings`并要求用户提供一次权限。
4.  完全避开电话簿备份的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:51:32.173

我个人认为你可能想要考虑放弃这个想法，因为它似乎有点像一个泥潭安全明智，我们正在构建一个应用程序，它使用地址簿进行邀请，我们提供一个 UIAlertView 通知用户每次视图加载时我们都可以访问而不是存储，这很烦人，但它覆盖了我们。

# mysql - NoMethodError：Mysql 的未定义方法“init”：更新到 ubuntu 12.04 后 Rails 中的类

> ID：12279567
> 
> 赞同：0
> 
> 时间：2012-09-05T10:38:59.960
> 
> 标签：mysql, ruby-on-rails, ubuntu-12.04

更新到 ubuntu 12.10 后，我开始收到此错误：

> NoMethodError：Mysql:Class 的未定义方法“init”

我正在使用 mysql 适配器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:40:46.170

> % 宝石安装 mysql

解决了这个问题。请注意，这个 gem 甚至在我更新 ubuntu 版本之前就已经安装了，但不知何故，安装程序在更新中搞砸了。

# php - PHP if 语句与 OR

> ID：12279571
> 
> 赞同：0
> 
> 时间：2012-09-05T10:39:14.407
> 
> 标签：php, if-statement, logical-operators

我似乎在使用`OR`或`||`在 PHP`if`语句中遇到了一个神秘的问题。我的代码是这样的：

```
if ($region=='ibiza' || 'mallorca' || 'menorca' || 'andalucia' || 'basque' || 'cataluna' || 'centralspain' || 'greenspain' || 'pyrenees' || 'rioja' || 'valencia') {
    $GoTo = "/spain/".$region.".php";    
} 
```

无论我赋予什么价值`$region`，`$GoTo`总是以`/spain/$region.php`即第一个 if 循环总是评估为“真”的形式出现。还有其他方法可以做到这一点，但我不明白为什么这种方法不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T10:40:35.223

你想使用这样的 or 语句：

```
if ($region=='ibiza'||$region=='mallorca'||$region=='menorca'....) 
```

但在你的情况下，你可能想使用`in_array()`

```
$locals=array(ibiza','mallorca','menorca','andalucia','basque','cataluna','centralspain','greenspain','pyrenees','rioja','valencia')
if (in_array($region, $locals)) {
    $goto="something...";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T10:42:32.910

@Fluffeh 发布的答案是正确的。编辑：@Findus 的解释也是正确的。

如果你想偷懒，你可以这样做：

```
if(in_array($region,array('ibiza','mallorca','menorca','...','..'))){} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:42:25.380

这是因为语句“mallorca”（以及以下语句）的计算结果为真。您应该使用比较，例如 $region == "mallorca"，并且对所有其他类似。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T10:50:02.980

您可以像这样简化您的代码：

```
<?php
    $selectedRegions1 = array('ibiza','mallorca','menorca','andalucia','basque','cataluna', 'centralspain','greenspain','pyrenees','rioja','valencia');
    $selectedRegions2 = array('brittany','burgundy','alps','aquitaine','loire','languedoc', 'paris','provence');
    $selectedRegions3 = array('grancanaria','lapalma','lanzarote','tenerife');
    $selectedRegions4 = array('atlas','essaouira','fez','marrakech');
    if (in_array($region, $selectedRegions1 )) {
       $GoTo = "/spain/".$region.".php";
    }elseif(in_array($region,$selectedRegions2)) {
        $GoTo = "/france/".$region.".php";
    }elseif (in_array($region,$selectedRegions3)) {
        $GoTo = "/canaries/".$region.".php";
    }elseif (in_array($region,$selectedRegions4)) {
    $GoTo = "/morocco/".$region.".php";
    }
?> 
```

您的代码的问题是您在“||”之后忘记了“$region ==”：

```
if ($region=='ibiza'|| $region=='mallorca'|| $region=='menorca'|| $region=='andalucia'|| $region=='basque'|| $region=='cataluna'|| $region=='centralspain'|| $region=='greenspain'|| $region=='pyrenees'|| $region=='rioja'|| $region=='valencia') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T10:45:06.423

你有这样的 if 语句

```
if ($region=='ibiza'|| $region=='mallorca'|| $region=='menorca'|| $region=='andalucia'|| $region=='basque'|| $region=='cataluna'|| $region=='centralspain'|| $region=='greenspain'|| $region=='pyrenees'|| $region=='rioja'||$region=='valencia') {
$GoTo = "/spain/".$region.".php";
} 
```

# c++ - 隐藏时图像消失然后重新显示 ListView

> ID：12279572
> 
> 赞同：1
> 
> 时间：2012-09-05T10:39:15.390
> 
> 标签：c++, qt, listview, blackberry-10

我目前正在开发一个应用程序的一部分，该应用程序在图像旁边显示一个新闻片段（如果存在图像）。该新闻列表是 SegmentedControl“标签”页面的一部分，可以根据用户的需要隐藏和重新显示。由于图像是通过网络加载的，它们由 ImageTracker 处理，并且只有在完全加载后才设置为属性。

我遇到的问题是，虽然这些图像第一次加载良好，但如果我导航到不同的 SegmentControl“选项卡”然后导航回“新闻”选项卡，这些图像就会消失。通过将非活动容器的可见性设置为 false，并将活动容器的可见性设置为 true 来完成隐藏操作。

这就是我定义数据绑定的方式： ListView { id: lstShowNews objectName: "lstShowNews"

```
 listItemComponents: [
        ListItemComponent {
            type: "item"      
            Detail_Tabs_NewsCell {
                newsHeadline: ListItemData.headline
                newsBlurbPreview: ListItemData.content
                newsTimeAdded: ListItemData.time    
                newsImageVisible: ListItemData.hasImage
                newsImage: ListItemData.image                              
            } 
        }
    ]
} 
```

自定义列表项的别名/属性：

```
property alias newsImageVisible: newsImage.visible
property alias newsHeadline: newsTitle.text
property alias newsImage: newsImage.image
property string newsBlurbPreview: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam condimentum tellus vel magna dapibus aliquam. Nunc iaculis metus ut arcu tempus semper."
property string newsTimeAdded: "News Source - 3 hours ago" 
```

处理列表加载的 C++ 代码部分：

```
/*!
 * Handles loading for each tab page. Enables data to only be loaded on demand.
 * @param index - The new selected index on the SegmentedControl
 */
void MyClass::onSegmentChanged(int index) {
if(index == 2) {
    if(!mNewsLoaded) {
        // Load the news
        NewsRequester* news = new NewsRequester(mId);
        connect(news, SIGNAL(requestDone(QList<NewsItem*>)), this, SLOT(onNewsReceieved(QList<NewsItem*>)));
        indNews->start();         // Activity indicator
        news->requestNews();
    }
    else {
      // Caching functions
    }
}
else {
    // Stuff for other tabs
}
}

void MyClass::onNewsReceieved(QList<NewsItem*> newsItems) {
    qDebug() << "Received news reply";
    indNews->stop();
    indNews->setVisible(false);

    mNewsItems = newsItems;
    setNewsModel();

}

void MyClass::setNewsModel() {
GroupDataModel* newsModel = new GroupDataModel(QStringList() << "news");
newsModel->setGrouping(ItemGrouping::None);

// Move the list items to the data model
for(int i = 0; i < mNewsItems.size(); i++) {
    mNewsItems.at(i)->loadImage();
    newsModel->insert(mNewsItems.at(i));
}

ListView* lstNews = root->findChild<ListView*>("lstShowNews");
lstNews->setDataModel(newsModel);
} 
```

用于跟踪图像并确保其在传递到列表之前正确加载的功能：

```
/*!
 * Tracks the status of the current local image and displays when ready
 */
void NewsItem::trackImage() {
// Load cascades image
mTracker = new ImageTracker(mLocalImage);
connect(mTracker, SIGNAL(stateChanged (bb::cascades::ResourceTracker::State)),
        this, SLOT(onStateChanged (bb::cascades::ResourceTracker::State)));
}

/*!
 * Passes the downloaded image's path to the list
 */

void NewsItem::onImageRetrieved(QString path) {
//qDebug() << "Received image " << path;
mLocalImage = QUrl(path);
trackImage();
}

/*!
 * Display the image if it's been fully loaded in memory
 */
void NewsItem::onStateChanged(bb::cascades::ResourceTracker::State state) {
if(state == bb::cascades::ResourceTracker::Loaded) {
    qDebug() << "Image loaded";
    mLocalCascadesImage = mTracker->image();
    emit localImageChanged();
}
} 
```

mLocalCascadesImage 的属性：

```
Q_PROPERTY(bb::cascades::Image image READ localImage NOTIFY localImageChanged) 
```

有什么理由说明为什么 ListView 会以这种方式行为不端？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:27:52.317

自己解决了。结果我还需要公开该`newsImage.imageSource`属性并将其传递到图像的本地缓存版本的路径（如果有）。虽然该`image`属性可以方便地确保图像在下载后立即显示，但该`imageSource`属性需要用于本地可用文件。

# javascript - 命名和配置 jsfiddle

> ID：12279579
> 
> 赞同：9
> 
> 时间：2012-09-05T10:39:38.793
> 
> 标签：javascript, jsfiddle

对于知道答案的人来说，这听起来像是一个非常愚蠢的问题！

当我创建一个 JSfiddle 时，它​​会像这样出现在我的列表页面上

`cGzCe Revision 8`

然后我将其命名为“Multi-create nodes”（额外的空格，因为添加了修订号，而该短语没有空格）并再次更新并得到这个

`cGzCe Multi-create nodes Revision 9`

我想以更大的字体更改 cGzCe 的文本 - 我在哪里可以做到这一点？前几天我叉了别人的小提琴，它已经完成了，但我看不出设置与我的一个小提琴有什么不同！请帮忙:-D

...

另外，对于一个奖励点 - 有谁知道如何禁用自动缩进......（或使其可靠地工作，或将缩进降低到两个空格......）

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-06-13T13:08:05.560

我在用小提琴名称和描述替换小提琴代码时遇到了麻烦。

这是我得到我想要的结果的方式：

1.  单击“Base”以获取小提琴 URL，以显示小提琴代码`/xxxxxx/#Base`在哪里。`xxxxxx`
2.  使用小提琴选项将小提琴名称设置为“MyFiddleName”和描述
3.  点击“更新”
4.  单击“设置为基础”
5.  现在仪表板显示带有描述的“MyFiddleName”并且不显示`xxxxxx`代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-12T03:58:49.997

这对我有用，

***对于新小提琴：***

1.  在左侧面板中，在**Fiddle Meta**下，在“untitled fiddle”输入框中输入名称
2.  单击顶部菜单中的保存以保存小提琴和给定**名称**

***对于带有代号的现有小提琴：***

1.  点击小提琴打开它。
2.  在左侧面板中，在**Fiddle Meta**下，在“untitled fiddle”输入框中输入名称
3.  单击**更新**，然后从顶部菜单中**设置为基础以保存给定名称**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:51:29.860

虽然我认为这对于 Stack Overflow 来说是题外话（并且已经投票关闭），但是除了保存的 Fiddle 的标题之外没有随机字符串的方法是，当你*启动*Fiddle 时，声明它的标题；如果标题是在之前保存的某个点*之后*添加的，则将出现字符串，因为那是“基础”/“原始”小提琴，而“标题”小提琴是后来的修订版。

# iphone - 核心数据——保存关系的技术？

> ID：12279581
> 
> 赞同：0
> 
> 时间：2012-09-05T10:39:44.960
> 
> 标签：iphone, objective-c, ios, core-data, relation

我的数据模型有以下关系：

```
[Account] -|------o< [Transaction] 
```

其实现为：

```
// in Account.h
@property (nonatomic, retain) NSSet *transactions;

// in Transaction.h
@property (nonatomic, retain) Account *account; 
```

现在，我已经成功创建了一个 Account 并将其插入到 Core Data 中。我的问题是，如何在账户中添加起始余额？这显然只是帐户上的交易，但以下内容是否足以在数据模型中建立双向连接（即连接`newAccount.transactions`和连接）？`newTransaction.account`

```
// we need to insert a new account
Account *newAccount = [NSEntityDescription insertNewObjectForEntityForName:[Account entityName] inManagedObjectContext:self.managedObjectContext];

// . . . configure newAccount

NSNumber *startingBalance = @([self.startingBalanceTextField.text floatValue]);

NSError *error;

// save the new account
[self.managedObjectContext save:&error];

if( !error )
{
    Transaction *newTransaction = [NSEntityDescription insertNewObjectForEntityForName:[Transaction entityName] inManagedObjectContext:self.managedObjectContext];

    // . . . configure newTransaction

    // is this sufficient & proper? Will this add newTransaction to newAccount.transactions as well?
    newTransaction.account = newAccount;

    // save the starting balance
    [self.managedObjectContext save:&error];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:55:18.280

是的，如果`transactions`和`account`被定义为逆关系，那么

```
newTransaction.account = newAccount; 
```

自动添加`newTransaction`到`newAccount.transactions`.

您可以轻松地在调试器中使用`po newAccount`.

# c#-4.0 - 我们能否突出显示主题树中的一个特定节点 - crm 2011

> ID：12279583
> 
> 赞同：1
> 
> 时间：2012-09-05T10:39:50.430
> 
> 标签：c#-4.0, dynamics-crm, dynamics-crm-2011, crm

我想知道是否可以突出显示主题树中的特定节点，如下图所示。每当用户打开查找时，默认情况下应突出显示一个特定节点。这是为了帮助用户始终选择正确的主题树节点。在下面的屏幕截图中，默认主题被突出显示。每当用户在不选择任何节点的情况下打开查找时，我希望主题树看起来像这样。 ![主题树](../Images/3ef20e945cd761e7e8e7554166f9996f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:12:43.617

我相信该列表只是按字母顺序排序的-“默认”主题没有什么特别之处，这只是给它的名称。

所以你可以用一些前缀让它出现在列表的顶部，然后我认为应该默认选择它。

![在此处输入图像描述](../Images/9b413ad0fc52e4f9b74204ac28a1f819.png)

# iphone - 将浮点数转换为时间

> ID：12279586
> 
> 赞同：-2
> 
> 时间：2012-09-05T10:39:55.490
> 
> 标签：iphone, objective-c, ipad, ios5

我有一个字符串值 20.30(hours) 我需要它来转换 08:30:00 。任何人都可以知道这一点，请帮助我。

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    dateFormat.dateFormat = @"hh:mm:ss";
    [dateFormat setTimeZone:[NSTimeZone systemTimeZone]];

    double time = 20.30;
    double timeInSeconds = time*24*60*60; // 0.27392 * 24 = 6.57408 hours *60 for minutes * 60 for seconds

    NSDate *date = [NSDate dateWithTimeIntervalSinceNow:timeInSeconds]; //Creates a date: 1 January 2001 6:34:27 AM, GMT

    NSLog(@"Time: %@", [dateFormat stringFromDate:date]);
    [dateFormat release]; 
```

上面的代码对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:56:28.183

用以下代码替换您的代码：

```
//The Format which you want as output
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
dateFormat.dateFormat = @"hh:mm:ss";
[dateFormat setTimeZone:[NSTimeZone systemTimeZone]];

//The Format in which your dateTime currently is
NSDateFormatter *dateFormat1 = [[NSDateFormatter alloc] init];
dateFormat1.dateFormat = @"HH.mm";
[dateFormat1 setTimeZone:[NSTimeZone systemTimeZone]];

double time = 20.30;

NSString *timeStr = [NSString stringWithFormat:@"%.2f",time];
NSDate *dates = [dateFormat1 dateFromString:timeStr];
NSLog(@"Time: %@", [dateFormat stringFromDate:dates]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:52:04.907

试试这是否有效：

```
[dateFormatter setDateFormat:@"HH:mm 'on' dd MMMM YYYY"];
[dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:52:31.417

您用来计算秒数的公式是错误的。

你可以使用类似的东西

```
double t = 20.30;

int hours = (int) floor(t);
int minutes = (int) ((t-hours)*100);

int seconds = hours*60*60 + minutes*60;

NSLog(@"%@",[NSDate dateWithTimeIntervalSinceNow:seconds]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:54:47.233

试试这个：

```
double time = 20.30;
NSString *strTime = [NSString stringWithFormat:@"%.2f",time];
NSArray *values = [strTime componentsSeparatedByString:@"."];

double hours = [values objectAtIndex:0];
double min = [values objectAtIndex:1];

NSDate *date = [NSDate dateWithTimeIntervalSinceNow:(hours*60*60)+mins*60]; 
NSLog(@"Time: %@", [dateFormat stringFromDate:date]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T11:02:07.397

试试这个

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
dateFormat.dateFormat = @"HH:mm";
[dateFormat setTimeZone:[NSTimeZone systemTimeZone]];

double time = 20.30;
NSString* timeString=[NSString stringWithString:[[NSString stringWithFormat:@"%.2f",time]stringByReplacingOccurrencesOfString:@"." withString:@":"]];

NSDate *date = [dateFormat dateFromString:timeString];
dateFormat.dateFormat=@"hh:mm:ss";
NSLog(@"Time: %@", [dateFormat stringFromDate:date]); 
```

这会将 20.30 转换为 08:30:00

# java - 不在 App Server 中的假 JNDI

> ID：12279588
> 
> 赞同：0
> 
> 时间：2012-09-05T10:39:59.763
> 
> 标签：java, tomcat, jndi

我有一个可以在 Tomcat 下独立运行的应用程序。目前，我使用 JNDI 来配置我的数据库端点。然而，JNDI 仅在应用程序在应用程序服务器下运行时才有效（在我的情况下为 Tomcat），因此当应用程序独立运行时，JNDI 调用失败，并且应用程序抛出异常。

有没有一种方法可以“模拟”JNDI 数据源，以便应用程序可以在没有应用服务器的情况下运行？如果是这样，我将如何去做？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:09:19.200

单机模式是否仅用于测试？还是它也是一种有效的操作模式？

如果仅用于测试，我会编写您自己的上下文工厂，它实现了一个最小的 InitialContextFactory 并在您的配置文件中指定该类。您的班级使用适当的资源响应请求。

如果它也是一种有效的操作模式，您可以将更多工作放入您的上下文工厂并将其用作应用服务器的代理。它确定应用服务器是否存在，如果存在，则将请求重定向到应用服务器。

如果你用谷歌搜索“Mocking JNDI”，有几个很好的例子来说明如何做到这一点。

# javascript - 如何使用 javascript 编辑页面源

> ID：12279589
> 
> 赞同：1
> 
> 时间：2012-09-05T10:40:08.340
> 
> 标签：javascript, firefox-addon, webpage

我正在构建一个 Firefox 扩展，本质上，我想在特定站点的网页上添加一个按钮。我知道我需要在页面源代码中进行更改的确切位置，以及我需要放置的内容，但我不知道如何 1\. 阅读页面源代码（我应该能够自己弄清楚） 2.编辑页面源（我一直在潜伏但找不到任何方法） 3.自动更新显示的页面

另外，总的来说，这是最好的方法吗？最主要的是，我想将代码无缝地注入页面。例如，堆栈溢出的页面源包含这样的部分：

```
<div class="nav mainnavs">
                <ul>
                    <li><a id="nav-questions" href="/questions">Questions</a></li>
                    <li><a id="nav-tags" href="/tags">Tags</a></li>
                    <li><a id="nav-users" href="/users">Users</a></li>
                    <li><a id="nav-badges" href="/badges">Badges</a></li>
                    <li><a id="nav-unanswered" href="/unanswered">Unanswered</a></li>
                </ul>
            </div> 
```

如果我想注入生产线怎么办

```
<li><a id="nav-home" href="http://stackoverflow.com/">Home</a></li> 
```

然后出现一个主页按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:48:45.410

你可以这样做

```
$("div.easy_editor ul").append('<li><a id="nav-home" href="http://stackoverflow.com/">Home</a></li>'); 
```

# sql-server - SQL Server 不禁用索引

> ID：12279595
> 
> 赞同：1
> 
> 时间：2012-09-05T10:40:24.023
> 
> 标签：sql-server, resize, indexing

我有测试数据库，我试图用索引调整列的大小。表有几行。不多说，上代码

```
Create Table Country (ID INT PRIMARY KEY IDENTITY, NAME VARCHAR(48),ENEMY VARCHAR(32),AMOUNT INT);

CREATE NONCLUSTERED INDEX IDX_COUNTRY_NAME ON Country(NAME); 
```

我添加了一些行。稍后使用 sql 语句来调整列的大小，如下所示：

```
ALTER INDEX IDX_COUNTRY_NAME ON Country disable;

alter table COUNTRY alter column NAME VARCHAR(40);

ALTER INDEX IDX_COUNTRY_NAME ON Country rebuild;` 
```

这就是我尝试更新专栏后得到的

```
java.sql.BatchUpdateException: The index 'IDX_COUNTRY_NAME' is dependent on column 'NAME'.
    at net.sourceforge.jtds.jdbc.JtdsStatement.executeBatch(JtdsStatement.java:947)
    at com.veraxsystems.commons.updater.tasks.ResizeColumnTask.execute(ResizeColumnTask.java:52)
    at com.veraxsystems.commons.updater.tasks.AbstractTask.process(AbstractTask.java:79)
    at com.veraxsystems.commons.Updater.executeUpdate(Updater.java:169)
    at com.veraxsystems.commons.Updater.afterPropertiesSet(Updater.java:201)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我想避免删除索引，因为我不知道将来是否存在随机索引的脚本，并且我在重新加载它们时会遇到问题。我使用 sql server 2008 我尝试了很多方法来完成这个。唯一的希望是使用 drop，但正如我之前所说，我宁愿不使用它。

**编辑**

这些只是示例 sql，我知道我更新了哪个表和列。为了找到它，我使用 sys.indexes、sys.index_columns 并通过 object_id 加入它们。这很好用，因为我打印了所有结果并且符合预期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:15:36.350

从 ALTER TABLE 的[手册](http://msdn.microsoft.com/en-us/library/ms190273%28v=sql.100%29.aspx "更改表 (Transact-SQL)")中，ALTER COLUMN 部分：

> 修改后的列不能是以下任何一项：
> 
> […]
> 
> *   在索引中使用，除非列是 varchar、nvarchar 或 varbinary 数据类型，数据类型不会改变，*新大小**等于或大于**旧大小*，并且索引不是 PRIMARY KEY 的结果约束。
> 
> […]

（斜体和重点是我的。）

您正在尝试减小索引列的大小（从（`varchar(48)`到`varchar(40)`），这是“违反规则”的。似乎除了删除/重新创建索引之外没有其他选择。

# python - Python列表追加

> ID：12279599
> 
> 赞同：6
> 
> 时间：2012-09-05T10:40:34.833
> 
> 标签：python, list, append

我想在 Python 中存储变量的中间值。此变量在循环中更新。当我尝试使用`list.append`命令执行此操作时，它会使用变量的新值更新列表中的每个值。我应该怎么做？

```
while (step < maxstep):
    for i in range(100):    
        x = a*b*c
        f1 += x
    f2.append(f1)
    print f2
    raw_input('<<')
    step += 1 
```

预期产出

```
[array([-2.03,-4.13])]
<<
[array([-2.03,-4.13]),array([-3.14,-5.34])] 
```

打印输出

```
[array([-2.03,-4.13])]
<<
[array([-3.14,-5.34]),array([-3.14,-5.34])] 
```

在 python 中获得我想要的东西有不同的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T10:48:02.910

假设原件有错字并且`f1`实际上是`fi`（或反之亦然）：

`fi`是指向对象的指针，因此当`fi += x`您实际更改指向的对象的值时，您会不断附加相同的指针`fi`。希望这很清楚。

要解决此问题，您可以`fi = fi + x`改为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T10:50:22.923

我想你的意思是这样的：

```
 f2 = []
   f1 = 0
   for i in range(100):    
       x = f()
       f1 += x
   f2.append(f1)
   print f2 
```

请注意，如果`f1`是一个可变对象，则该行`f1 += x`不会创建新对象，而只会更改 的值，因此它在数组中的`f1`所有出现都会更新。`f2`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T10:47:59.037

看来您正在将相同的数组附加到列表中，然后更改数组的内容

每次将其附加到时都需要创建一个新的数组对象`f2`

如果您需要更多帮助，您需要在问题中的代码中添加更多信息。目前没有多大意义（`fi`改变的价值在哪里？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T10:54:54.553

你真的应该粘贴一个工作示例。

您要附加的对象 (fi) 是可变的（[请参阅 Python 文档](http://docs.python.org/reference/datamodel.html#objects-values-and-types)），本质上意味着您要附加对对象的引用，而不是对象值。因此，列表索引 0 和 1 实际上是同一个对象。

您需要`fi = array()`在每次循环迭代时创建一个新对象 () 或使用[复制模块](http://docs.python.org/library/copy.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-09T14:21:07.367

另一个相关问题是“[如何通过引用传递变量？](https://stackoverflow.com/questions/986006/how-do-i-pass-a-variable-by-reference) ”。Daren Thomas 使用赋值来解释变量传递在 python 中是如何工作的。对于 append 方法，我们可以以类似的方式思考。假设您将列表“list_of_values”附加到列表“list_of_variables”，

```
list_of_variables = []
list_of_values = [1, 2, 3]
list_of_variables.append(list_of_values)
print "List of variables after 1st appending: ", list_of_variables
list_of_values.append(10)
list_of_variables.append(list_of_values)
print "List of variables after 2nd appending: ", list_of_variables 
```

附加操作可以被认为是：

```
list_of_variables[0] = list_of_values --> [1, 2, 3]
list_of_values --> [1, 2, 3, 10]
list_of_variables[1] = list_of_values --> [1, 2, 3, 10] 
```

因为“list_of_variables”中的第一项和第二项指向内存中的同一个对象，所以上面的输出是：

```
List of variabiles after 1st appending:  [[1, 2, 3]]
List of variables after 2nd appending:  [[1, 2, 3, 10], [1, 2, 3, 10]] 
```

* * *

另一方面，如果“list_of_values”是一个变量，则行为会有所不同。

```
list_of_variables = []
variable = 3
list_of_variables.append(variable)
print "List of variabiles after 1st appending: ", list_of_variables
variable = 10
list_of_variables.append(variable)
print "List of variables after 2nd appending: ", list_of_variables 
```

现在的追加操作相当于：

```
list_of_variables[0] = variable --> 3
variable --> 4
list_of_variables[1] = variable --> 4 
```

输出是：

```
List of variabiles after 1st appending:  [3]
List of variables after 2nd appending:  [3, 10] 
```

variable 和 list_of_values 之间的区别在于后者就地更改。

# ruby-on-rails - Mongrel_service 和捆绑器

> ID：12279600
> 
> 赞同：0
> 
> 时间：2012-09-05T10:40:36.937
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我已经成功安装了**mongrel、mongrel_service、win-32 服务** ，并且在我的电脑上也成功安装了该服务并且正在成功启动。

现在遇到的主要问题是，我的应用程序使用了一组 gem，所以在正常情况下**mongrel_rails start**将以 **bundle exec**开头。即使服务启动，杂种也不会启动，因为它必须以**bundle exec**启动。

我的问题是，如何在创建 Windows 服务的命令中包含 bundle exec 以便它将使用 bundle 启动 mongrels？

还有其他方法吗，可能包括 boot.rb 或 preinitializer.rb 中的 bundle exec 以便它自动加载？我正在使用rails 2.3。

***杂种日志如下***

```
** Starting Mongrel listening at 0.0.0.0:3000
** Starting Rails with production environment...
c:/Ruby/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/runtime.rb:31:in
`setup': You have already activated mongrel 1.2.0.pre2, but your Gemfile
requires mongrel 1.2.0.pre2\. Using bundle exec may solve this.
(Gem::LoadError)
  from
c:/Ruby/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler/runtime.rb:17:in
`setup'
  from**strong text**
c:/Ruby/lib/ruby/gems/1.8/gems/bundler-1.0.22/lib/bundler.rb:110:in
`setup'
  from c:/xxxxx/xxxxxx/config/../config/preinitializer.rb:17
  from c:/xxxxx/xxxxx/config/boot.rb:26:in `load'
  from c:/xxxxx/xxxxx/config/boot.rb:26:in `preinitialize'
  from c:/xxxxx/xxxxx/config/boot.rb:8:in `boot!'
  from c:/xxxxx/xxxxx/config/boot.rb:120
  from c:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`gem_original_require'
  from c:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`require'
  from c:/xxxxx/xxxxx/config/environment.rb:5
  from c:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`gem_original_require'
  from c:/Ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`require'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/../lib/mongrel/rails.rb:147:in
`rails'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:116:in
`cloaker_'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/../lib/mongrel/configurator.rb:149:in
`call'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/../lib/mongrel/configurator.rb:149:in
`listener'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:102:in
`cloaker_'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/../lib/mongrel/configurator.rb:50:in
`call'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/../lib/mongrel/configurator.rb:50:in
`initialize'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:86:in
`new'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:86:in
`run'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/../lib/mongrel/command.rb:210:in
`run'
  from
c:/Ruby/lib/ruby/gems/1.8/gems/mongrel-1.2.0.pre2-x86-mingw32/bin/mongrel_rails:282
  from c:/Ruby/bin/mongrel_rails:19:in `load'
  from c:/Ruby/bin/mongrel_rails:19 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:27:41.947

我找到了解决这个问题的方法。根据 Luis Lavana 的说法，mongrel_service 已经死了，现在是一个新产品 service_wrapper，它可以轻松地将各种人员作为服务安装。遵循以下流程

1.  从**[https://github.com/luislavena/service_wrapper/downloads](https://github.com/luislavena/service_wrapper/downloads)**下载**service_wrapper**
2.  将**service_wrapper.exe**从下载的服务包装器的 bin 文件夹中复制到**C:\service_wrapper**目录中。
3.  通过打开任何文本编辑器并输入以下内容，为 service_wrapper 创建一个配置文件

**; 服务部分，它将是 service_wrapper 读取的唯一部分**

**[服务]**

**; ruby​​ 可执行文件的路径**

**可执行文件 = C:\Ruby\bin\ruby.exe**

**; ruby​​ 可执行文件的参数**

**参数 = C:\Ruby\bin\bundle exec mongrel_rails start -p 3000 -e development**

**;路径你的应用程序目录**

**目录 = C:\myapp**

**; 可选地指定一个日志文件，其中 STDOUT 和 STDERR 的可执行文件将** *；被重定向。* **; 请注意，完整路径也是必需的。**

**日志文件 = C:\service_wrapper\service_wraper_log.log**

1.  **将扩展名为“.conf”**的文本文件（例如**“my_config.conf”）保存**到目录中，例如 c:\service_wrapper

2.  打开命令提示符并键入以下命令以创建 Windows 服务：

**sc 创建服务名称 binPath= "c:\service_wrapper\service_wrapper.exe c:\service_wrapper\my_config.conf" start= auto**

（注意**binPath=**和**start=**后面的空格）

1.  键入**net start servicename**以启动服务

2.  等待一段时间，大约 30 秒让 mongrel 启动，您可以在 localhost:3000 打开您的应用程序。

希望它可以帮助某人。

# c++ - 使用 std::cin 初始化 const 变量有什么技巧吗？

> ID：12279601
> 
> 赞同：49
> 
> 时间：2012-09-05T10:40:36.673
> 
> 标签：c++, c++11, iostream

**常见的 std::cin 用法**

```
int X;
cin >> X; 
```

这样做的主要缺点是 X 不能`const`。它可以很容易地引入错误；我正在寻找一些技巧来创建一个 const 值，并且只写入一次。

**天真的解决方案**

```
// Naive
int X_temp;
cin >> X_temp;
const int X = X_temp; 
```

您显然可以通过将 X 更改为`const&`;来改进它。仍然可以修改原始变量。

我正在寻找如何做到这一点的简短而聪明的解决方案。我确信我不是唯一一个会从这个问题的良好答案中受益的人。

**// 编辑：**我希望该解决方案能够轻松扩展到其他类型（比如说，所有 POD`std::string`和具有简单构造函数的可移动可复制类）（如果没有意义，请在评论中告诉我） .

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-05T11:07:42.957

我可能会选择返回`optional`，因为流式传输可能会失败。要测试它是否存在（如果您想分配另一个值），请使用`get_value_or(default)`，如示例中所示。

```
template<class T, class Stream>
boost::optional<T> stream_get(Stream& s){
  T x;
  if(s >> x)
    return std::move(x); // automatic move doesn't happen since
                         // return type is different from T
  return boost::none;
} 
```

[活生生的例子。](http://liveworkspace.org/code/0feaa0fac77c5ec1a3f3057f44b6769d)

为了进一步确保用户在`T`不可输入流时不会出现重载墙，您可以编写一个特征类来检查是否`stream >> T_lvalue`有效以及`static_assert`是否无效：

```
namespace detail{
template<class T, class Stream>
struct is_input_streamable_test{
  template<class U>
  static auto f(U* u, Stream* s = 0) -> decltype((*s >> *u), int());
  template<class>
  static void f(...);

  static constexpr bool value = !std::is_void<decltype(f<T>(0))>::value;
};

template<class T, class Stream>
struct is_input_streamable
  : std::integral_constant<bool, is_input_streamable_test<T, Stream>::value>
{
};

template<class T, class Stream>
bool do_stream(T& v, Stream& s){ return s >> v; }
} // detail::

template<class T, class Stream>
boost::optional<T> stream_get(Stream& s){
  using iis = detail::is_input_streamable<T, Stream>;
  static_assert(iis::value, "T must support 'stream >> value_of_T'");
  T x;
  if(detail::do_stream(x, s))
    return std::move(x); // automatic move doesn't happen since
                         // return type is different from T
  return boost::none;
} 
```

[活生生的例子。](http://liveworkspace.org/code/f1f8bcca190d3736e5d2d68e76d6e7f6)

我正在使用一个`detail::do_stream`函数，否则`s >> x`仍然会在内部进行解析，`get_stream`并且您仍然会得到我们想要在`static_assert`火灾时避免的重载墙。将此操作委托给不同的功能可以使这项工作正常进行。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-05T10:52:39.307

对于这种情况，您可以使用 lambda：

```
 const int x = []() -> int {
                     int t;
                     std::cin >> t;
                     return t;
                 }(); 
```

（注意末尾的额外（））。

与编写单独的函数不同，这样做的好处是在阅读代码时不必在源文件中跳转。

~~**编辑：**由于在评论中指出这违反了 DRY 规则，您可以利用`auto`并`5.1.2:4`减少类型重复：~~

`5.1.2:4`状态：

> [...] 如果 lambda-expression 不包含 trailing-return-type，就好像 trailing-return-type 表示以下类型：
> 
> *   如果复合语句的形式是
>     
>     
>     
>     `{ attribute-specifier-seq(opt) return expression ; }`
>     
>     
>     
>     左值到右值转换（4.1）、数组到指针转换（4.2）和函数到指针转换（4.3）后返回表达式的类型；
>     
>     
> *   否则无效。

所以我们可以把代码改成这样：

```
 const auto x = [] {
                     int t;
                     std::cin >> t;
                     return t;
                  }(); 
```

~~不过，我无法确定这是否更好，因为该类型现在“隐藏”在 lambda 体内...~~

**编辑 2：**在评论中指出，仅在可能的情况下删除类型名称不会导致“DRY-correct”代码。此外，这种情况下的尾随返回类型扣除目前实际上是 MSVC++ 以及 g++ 的扩展，而不是（还）标准。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-05T12:01:39.550

对 lx. 的 lambda 解决方案稍作调整：

```
const int x = [](int t){ return iss >> t, t; }({}); 
```

显着减少 DRY 违规；可以通过更改`const int x`为完全消除`const auto x`：

```
const auto x = [](int t){ return iss >> t, t; }({}); 
```

进一步的改进；您可以将副本转换为移动，否则逗号运算符会抑制 12.8:31 中的优化（[移动构造函数被逗号运算符抑制](https://stackoverflow.com/questions/12288131/move-constructor-suppressed-by-comma-operator)）：

```
const auto x = [](int t){ return iss >> t, std::move(t); }({}); 
```

请注意，这仍然可能比 lx. 的 lambda 效率低，因为它可以从 NRVO 中受益，而这仍然必须使用移动构造函数。另一方面，优化编译器应该能够优化出无副作用的移动。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-05T10:43:16.480

您可以调用函数以返回结果并在同一语句中进行初始化：

```
template<typename T>
const T in_get (istream &in = std::cin) {
    T x;
    if (!(in >> x)) throw "Invalid input";
    return x;
}

const int X = in_get<int>();
const string str = in_get<string>();

fstream fin("myinput.in",fstream::in);
const int Y = in_get<int>(fin); 
```

示例：http: [//ideone.com/kFBpT](http://ideone.com/kFBpT)

`auto&&`如果您有 C++11，那么如果您使用关键字，则只能指定一次类型。

```
auto&& X = in_get<int>(); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-03-30T19:32:10.717

当然，您可以通过构建一个临时的[`istream_iterator`](http://en.cppreference.com/w/cpp/iterator/istream_iterator). 例如：

```
const auto X = *istream_iterator<int>(cin) 
```

值得在这里指出的是，当您执行此操作时，您将放弃所有错误检查的希望。通常，从用户那里获取输入不会被认为是最明智的......但是，嘿，也许你已经以某种方式策划了这个输入？

[`Live Example`](https://ideone.com/KiD6Hl)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-05T10:43:08.590

我假设你会想要初始化一个*全局*变量，因为对于一个局部变量来说，放弃三行简单易懂的语句来获得一个有问题的常数似乎是一个非常尴尬的选择。

在全局范围内，我们不能在初始化中出现错误，所以我们必须以某种方式处理它们。这里有一些想法。

首先，一个模板化的小构造助手：

```
template <typename T>
T cinitialize(std::istream & is) noexcept
{
    T x;
    return (is && is >> x) ? x : T();
}

int const X = cinitialize<int>(std::cin); 
```

请注意，全局初始化程序不得抛出异常（在痛苦中`std::terminate`），并且输入操作可能会失败。总而言之，以这种方式从用户输入初始化全局变量可能是非常糟糕的设计。可能会显示致命错误：

```
template <typename T>
T cinitialize(std::istream & is) noexcept
{
    T x;

    if (!(is && is >> x))
    {
        std::cerr << "Fatal error while initializing constants from user input.\n";
        std::exit(1);
    }

    return x;
} 
```

只是为了在评论中进行一些讨论后澄清我的立场：在本地范围内，我*永远不会*求助于如此尴尬的拐杖。由于我们正在处理*外部的、用户提供的*数据，因此作为正常控制流程的一部分，我们基本上不得不忍受失败：

```
void foo()
{
    int x;

    if (!(std::cin >> x)) { /* deal with it */ }
} 
```

我让你来决定这是否写得太多或太难读。

# html - 使用同一类的颜色背景不同

> ID：12279602
> 
> 赞同：1
> 
> 时间：2012-09-05T10:40:41.900
> 
> 标签：html, css, css-selectors

我有四个`<div>`盒子，每个盒子都放在另一个盒子里，第一个盒子定义为`class="a"`，其余定义为`class="b"`现在我想在`class="b"`我想设置第三个盒子的帮助下`background-color:red`做`class="b"`什么我想要。这可能吗？

```
<div class="A">
<div class="B">
<div class="B">
<div class="B"></div>
    </div>
</div>
</div> 
```

如果是这样的情况

```
<div class="A">
    <div class="B"></div>
    <div class="B"></div>
    <div class="B"></div>    

    </div> 
```

[那么我怎样才能在只有类JSFIDDLE](http://jsfiddle.net/yH8e3/)和 2nd JSFIDDLE的帮助下使第三个框变红

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:48:33.053

### 是的，有可能。

以这种方式使用 CSS 选择器：

```
div.B .B .B
{
    background-color:red;
}​ 
```

### 更新小提琴：http: [//jsfiddle.net/yH8e3/3/](http://jsfiddle.net/yH8e3/3/)

### 对于第二种情况，您需要使用`:nth-child`选择器：

```
.A .B:nth-child(3)
{
    background-color:red;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:50:22.493

试试（IE7+）

```
.a > .b > .b {
  background-color:red;
} 
```

或者

```
.a .b .b {
  background-color:red;
}
.a .b .b .b {
  background-color:transparent;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:47:43.363

试试这个：

```
div div div .B { background-color:red } 
```

它将最里面的 div 的背景设置为红色。

我们可以使用标签来应用 css 并找到我们可以使用它的完美 div。

# html - 非破坏空间的处理： 对比

> ID：12279611
> 
> 赞同：68
> 
> 时间：2012-09-05T10:41:07.097
> 
> 标签：html, css, space

`&nbsp;`是一个非换行空间，它表示一个没有换行的空白空间。

如果我使用

```
<p>&nbsp;</p> 
```

我在两个段落之间有一个空间（更大的休息）。如果我使用

```
<p> </p> 
```

我在两段之间只有一条新线（没有中断）。为什么？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-05T10:42:58.483

在 HTML 中，只包含普通空白字符的元素被认为是空的。仅包含正常空格字符的段落将具有零高度。不间断空格是一种特殊的空白字符，它被认为是无关紧要的，因此它可以用作非空段落的内容。

即使您考虑段落的 CSS 边距，由于“空”段落的高度为零，它的垂直边距也会[折叠](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)。这导致它没有高度和边距，使它看起来好像根本不存在。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-02T11:32:19.050

解决方法怎么样？在我的例子中，我在 jQuery 变量中获取了 textarea 的值，并将 all 更改**`"<p>&nbsp"`**为**`<p class="clear">`**clear 类以具有一定的高度和边距，如下例所示：

**jQuery**

```
tinyMCE.triggerSave();
var val = $('textarea').val();
val = val.replace(/<p>&nbsp/g, '<p class="clear">'); 
```

然后将 val 与新 val 一起保存到数据库中。

**CSS**

```
p.clear{height: 2px; margin-bottom: 3px;} 
```

您可以根据需要调整高度和边距。由于 'p' 是一个*display: 块*元素。它应该给你预期的输出。

希望有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-05T20:40:19.247

如果我了解您的问题，这应该可以

&emsp——em 空间；这应该是一个非常宽的空间，通常多达四个真实空间。&ensp——en 空间；这应该是一个有点宽的空间，大约是两个常规空间。&thinsp——这将是一个狭窄的空间，甚至比常规空间还要狭窄。

资料来源：[http ://hea-www.harvard.edu/~fine/Tech/html-sentences.html](http://hea-www.harvard.edu/~fine/Tech/html-sentences.html)

# visual-studio-2010 - 水晶报表有IDE吗？

> ID：12279613
> 
> 赞同：0
> 
> 时间：2012-09-05T10:41:10.357
> 
> 标签：visual-studio-2010, crystal-reports

我已经使用.net 和水晶报告开发了一个 Windows 应用程序..

现在我想安装一个IDE，以便我可以根据个人客户的要求编辑水晶报告。

我的开发环境..

1.  视觉工作室 2010

2.  Crystal 报表运行时 -13 - 32 位

因此，是否有任何 IDE 可以做到这一点？

问候， 马赫什·拉尔瓦尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:45:52.517

当然：

[SAP 水晶报表 2011](http://www.sap.com/solutions/sme/business-intelligence-crystal-solutions/sap-crystal-reports/index.epx)。
您可以管理更多参数；创建的报告完全兼容。

它不是免费的；如果您需要免费的解决方案，必须安装**Visual Studio Express 和 Crystal Reports for Visual Studio**。

我知道，每个客户都有自己的报告要求；是典型的麻烦..实际上很难解决！
我使用 3 种方式：
1**由我们设计的报告**，客户的徽标从 DB 动态加载（一个文件夹包含默认报告，每个客户端版本一个文件夹）
2**完整数据导出**到 excel-csv（因此用户在 MS Office 上创建报告）
3**报告由用户设计 用户** 的 HTML 编辑器
- 用户使用`HTML Web Editor`（如[CLEditor](http://premiumsoftware.net/cleditor/)）输入 HTML
- `HTML`存储在 DB 表中
- 执行报告查询，`HTML`从 DB 加载
- 为每个报告定义的一些标记被查询数据（即`#ReportTitle#`或`#Money#`）替换，因此样式和数据被合并
- 最终`HTML`使用文本区域显示`CrystalReports`，`HTML`格式 [注意，[几乎没有限制](http://www.clearcutreports.com/2009/08/07/supported-crystal-html-tags/)。

# junit - 在方法中调用另一个类的对象的代码

> ID：12279614
> 
> 赞同：0
> 
> 时间：2012-09-05T10:41:09.887
> 
> 标签：junit

> **可能重复：**
> [以下代码的junit测试类](https://stackoverflow.com/questions/12278593/junit-test-class-for-the-following-code)

如何为以下代码编写 junit 测试类，

> 包装样品；
> 
> 公共类 Fortest {
> 
> ```
> UserDao userdao = new UserDao();
> Phone name = new Phone();
> public String handleUser(User user) {
> 
>     String returncode="failed"; //        User usr = new User("bob");
>     String username=user.getUsername();
>     String pass=user.getPass();
>     System.out.println("username and password : "+username+" : "+pass);
> 
>     String ph = name.getA();
>     System.out.println("ph "+ph);
> 
>     if(ph.equalsIgnoreCase("test")){
>         System.out.println("A "+ph);
>         returncode="done";
>     }
>     System.out.println("returning "+returncode);
> 
>     return  returncode; //        System.out.println("name "+name.toString()); //        System.out.println(name.getA());
> 
> } } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:13:00.440

因此，您需要执行以下选项之一将模拟注入字段`name`和`userdao`.

1.  不要直接在代码中调用构造函数，而是通过 setter 使用字段注入。这将允许您的测试提供两个类的模拟实例。

2.  为这两个字段提供默认范围设置方法。这些方法仅用于测试目的。

3.  使用 Refection 将字段设置为模拟实例。一个简单的方法是使用 Spring 的 ReflectionTestUtils。

一旦其中一个到位，您就可以提供模拟实例（可能使用 Mockito）来驱动您希望测试的行为。如果可行，我建议选项 1 是最好的，然后是选项 3。但是，选项 3 的缺点是测试依赖于私有字段的名称。

# php - PHP：表示一个数组

> ID：12279617
> 
> 赞同：0
> 
> 时间：2012-09-05T10:41:22.713
> 
> 标签：php, arrays, multidimensional-array

很抱歉打扰这样一个愚蠢的问题，但我正在自学 PHP，但我在基础知识方面遇到了麻烦。

我有以下内容：

```
$members
: array = 
  0: array = 
    0: string = 19637
    theID: &string = 19637
    1: string = 4GM1  
    Code: &string = 4GM1  
    2: string = MARTIN
    Name: &string = MARTIN 
```

我应该如何在我的代码中表示这一点？

我正在做：

```
$members = array( array( theID=> "19637", 
              Code => "4GM1",
              Name => "MARTIN"
   )); 
```

但这在调试器中显示如下：

```
$members 
: array = 
  0: array = 
    theID: string = 19637
    Code: string = 4GM1
    Name: string = MARTIN 
```

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:44:41.007

这应该有效：

```
$members = array(
  array(
         0  => '19637',
    'theID' => '19637',

         1  => '4GM1',
     'Code' => '4GM1',

         2  => 'MARTIN',
     'Name' => 'MARTIN'
  )
); 
```

# vb.net - 在数据表中使用 group by 的 Linq

> ID：12279620
> 
> 赞同：0
> 
> 时间：2012-09-05T10:41:41.853
> 
> 标签：vb.net, linq

我有一个包含“年”和“月”列的数据表

```
Year        Month
2012        1
2012        2
2012        1 
```

现在我想检查是否有任何重复的值，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:03:47.773

```
 return dataTable.AsEnumerable()
            .Select(row => new {Year = row[0], Month = row[1]})
            .GroupBy(x => new {x.Year, x.Month})
            .Any(g => g.Count()>1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:59:07.637

谢谢你们的提示！我已将其修改为 vb 代码，如下所示

```
Return new_dt.AsEnumerable().GroupBy(Function(row) New With { _
                                       Key .Year = row("year"), _
                                       Key .Month = row("month") _
                                     }).Where(Function(g) g.Count > 1).Count > 0 
```

# objective-c - 架构 i386 clang 的重复符号

> ID：12279622
> 
> 赞同：56
> 
> 时间：2012-09-05T10:41:42.973
> 
> 标签：objective-c, ios5, admob

我在 google 和 stackoverflow 上看到了几篇与此错误相关的帖子，我已经阅读了所有帖子，但仍然遇到问题，我会很高兴找到解决方案。这是我在编译时收到的错误消息...

> 找不到选项“-L/Users/somefolder/Documents/Bharat/MyApp copy/GoogleAdMobAdsSDK”重复符号 _OBJC_CLASS_$_AppDelegate 的目录：/Users/madept/Library/Developer/Xcode/DerivedData/Alpha-dvvymdlmzseytagllsmbbrxdgutz/Build/Intermediates/ Alpha.build/Debug-iphonesimulator/Alpha.build/Objects-normal/i386/AppDelegate-56890B6B994A4284.o

谢谢。

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-10-07T19:52:42.033

经常发生此错误的另一个原因是意外导入了 .m 文件而不是 .h。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-05-20T12:12:56.677

**脚步：**

1.  检查目标设置中的构建阶段。
2.  检查任何文件是否存在两次或一次。
3.  如果文件存在两次删除一个。如果不删除底部的文件，这是最新的文件。
4.  再次构建。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-03-19T17:07:00.127

只是为了增加可能的解决方案。

就我而言，我不小心在头文件中声明并初始化了一个变量。

例如这是错误的：

我的文件.h

```
#import <Foundation/Foundation.h>

NSInteger const ABCMyConstant = 6; 
```

它应该是：

我的文件.h

```
#import <Foundation/Foundation.h>

NSInteger const ABCMyConstant; 
```

我的文件.m

```
#import "MyFile.h"

NSInteger const ABCMyConstant = 6; 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-08-04T08:29:06.293

转到 Build Setting 并搜索**No Common Blocks**并将其设置为**NO**。并再次构建，您将不会再次收到此错误。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-05-02T06:11:14.650

`const`我发现当我在一个 .m 文件中声明一个与另一个 .m 文件中的另一个同名的文件时，我收到了错误`const`。两个文件#included 相同的父文件。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-11-11T00:00:03.713

在为 Core Data 重新创建模型类后，我刚刚经历了这一点。创建对象类的菜单选项创建了一个重复的模型类。一旦我删除了欺骗，错误就消失了......

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-03-21T13:02:30.767

链接器错误总是显示有关库使用或导入问题的问题。

**有时当您导入 .m 文件而不是 .h 文件时会发生错误。**

请检查您的代码并在您的一个头文件（.h 扩展名）中查找 .m 导入语句，我遇到了类似的问题并引发了 14 个重复符号错误。

检查你是否已经导入`ViewControler.m`而不是它的.h，所以它必须是这样的：

```
 import "ViewController.h" 
```

你`AppDelegate.h`应该是这样的：

```
import "UIKit/UIKit.h"
import "ViewController.h"
@interface AppDelegate : UIResponder <UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;
@property (strong,nonatomic) ViewController *mainController;
@end 
```

永远记住导入头文件而不是 .m

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-06-03T23:03:46.717

如果其他人尝试了所有其他答案但仍然无法正常工作，请尝试使用您最喜欢的文本编辑器打开 .xcodeproj 文件并搜索给您带来麻烦的类的名称。确保在执行此操作之前关闭 Xcode。在文件中，.h 应该有一行，.m 应该有另一行。如果有重复，删除它们，保存文件，然后重新构建。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-03-27T06:49:51.727

我知道在另一个项目中工作的框架存在这个问题。我已经从另一个项目中复制了文件并将其添加到这个项目中。然后在构建时我得到了 76 个重复的错误。

对我来说，简单的解决方案是`-ObjC`从其他链接器标志中删除。以前的项目没有。一旦我这样做了，警告就消失了，项目就成功构建了。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-01-23T19:17:09.810

当我在主项目中包含一个静态库同时还包含一个也引用该库的第二个库时，我收到了这个错误。这很令人困惑，所以也许这更清楚。

MyWorkspace + 主项目 + 对库 1 的引用 + 对库 2 的引用 + 库 1 + 库 2 + 对库 1 的引用

我从主项目中删除了对库 1 的引用，错误消失了。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-01-15T11:37:56.750

另一个原因可能是该项目在构建分发版本时针对的是模拟器而不是真实设备。这也会导致此错误消息。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-09-05T12:12:11.133

**最后我得到了解决方案-**

1.  删除我添加的 AdMob SDK 的所有引用（也从工作区中删除）。
2.  清理你的项目
3.  [点击此链接再次添加 AdMob](https://developers.google.com/mobile-ads-sdk/docs/admob/ios/quick-start)
4.  清理并重建

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-05-02T12:42:50.120

解决此问题的最简单方法是问题 Xcode 7.0 或更高版本只需将 no Common Blocks 更改为 NO 它会解决您的问题尝试此项目目标 > 构建设置 > No Common Blocks，我将其更改为 NO。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-05-15T15:59:44.727

在某些情况下，由于您不小心在两个不同的文件中声明了具有相同名称的常量 (const)，您还可能会收到“体系结构的重复符号...”错误。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-03-14T19:40:35.760

我有它，我定义了两次相同的 C 函数。在两个不同的`.m`文件中。只需删除其中一个定义，瞧。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-11-06T06:31:03.950

我尝试清理项目，删除所有派生数据。没有任何效果。阿特拉斯，这对我有用。

[![在此处输入图像描述](../Images/08e512400da1ecd2a460448fbada6a3f.png)](https://i.stack.imgur.com/okRpT.png)

另一个原因可能是该项目在构建分发版本时针对的是模拟器而不是真实设备。这也会导致此错误消息。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-10-09T16:18:46.247

对我来说是不同的，我照原样复制了类实现方法，并且 iVars 也被复制了……所以在 iVars 的世界中有两组，编译器在链接 *.o 文件之前一直抱怨重复的 ivars .

阅读输出有助于删除所有重复的 ivars...感谢您不需要 @synthesize 所有属性的新功能...错误消失了...

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-03-07T14:20:51.360

我在设置 OCMock 时遇到了同样的错误。我通过在构建阶段的“复制文件”部分添加 libOCMock.a 来修复它

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-06-05T09:35:43.037

将测试文件复制并粘贴到项目中后出现此错误，忘记更改接口和实现行的名称：

```
@interface TDInputValidationsTests : XCTestCase 
```

和

```
@implementation TDInputValidationsTests 
```

愚蠢的错误......我还建议查看项目上的“构建阶段”选项卡以检查重复项。删除派生数据并进行干净构建也可能会有所帮助。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-09-20T13:03:22.920

我从另一个项目导入文件，它也有 main.m 文件。所以总的来说我有两个 main.m 文件，删除一个为我解决了这个问题。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-10-07T15:56:33.500

有时信不信由你，Xcode 搞砸了项目文件。我们找到的唯一解决方案是使用文本编辑器手动删除对违规文件的所有引用，然后在 Xcode 中重新添加文件。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-10-24T20:05:39.620

自我注意：“阅读错误！”

就我而言，它是这样说的：`duplicate symbol _OBJC_CLASS_$_SATCoreData in:`

翻译：一个名为的Objective C Class`SATCoreData`是重复的。

然后它给出两个符号出现的路径。读取路径指向两个以.结尾的类文件`.o`。如果你看这两个类，你会发现一些可疑的东西。就我而言，我不小心给了两个类同名。我在另一个类的文件中有一个类，因为我正在测试一些东西并且懒得创建一个单独的类。希望这可以帮助某人。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-05-15T19:10:15.893

我有这个问题，我被困了一段时间。对我来说导致问题的事情是我将一些布尔值写入 .h 文件（在#import 和 @interface 之间）并将它们用于我的 .m 文件

我只是从我的 .h 文件中删除了它们，并将它们复制到我的 .m 文件中的同一个地方，构建成功。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-10-05T14:58:40.193

取自[https://stackoverflow.com/a/2755581/190599](https://stackoverflow.com/a/2755581/190599)

你可以做的是把你的标题（`MyConstants.h`）：

```
extern const int MyConstant;
extern NSString * const MyStringConstant; 
```

在源文件中，包括上面的标题，但定义常量（`MyConstants.m`）：

```
const int MyConstant = 123;
NSString * const MyStringConstant = @"SomeString"; 
```

然后，您只需将标头包含在使用这些常量之一的任何其他源文件中。标头只是声明这些常量存在于某处，因此编译器不会抱怨，因为解析这些常量名称是链接器的工作。包含常量定义的源文件被编译，链接器看到这是常量所在的位置，并解析在其他源文件中找到的所有引用。

在标头中声明和定义常量（未声明为`static`）的问题在于编译器将其视为包含该标头的每个文件的独立全局。当链接器尝试将所有已编译的源链接在一起时，它会遇到与您包含的一样多次的全局名称`MyConstants.h`。

# silverlight - 如何从后面的代码中翻转 Silverlight 中的图像

> ID：12279623
> 
> 赞同：1
> 
> 时间：2012-09-05T10:41:42.430
> 
> 标签：silverlight, asp.net-4.0, silverlight-5.0

我创建了一个 Silverlight 应用程序。我想翻转图像，所以我从后面的代码创建了一个故事板。但它抛出错误**"Cannot resolve target name Imagename"**。

```
Storyboard sbFlip = new Storyboard();
          sbFlip.Duration = new Duration(TimeSpan.FromSeconds(3));
          DoubleAnimationUsingKeyFrames FlipFront = new DoubleAnimationUsingKeyFrames();
          DoubleAnimationUsingKeyFrames FlipBack = new DoubleAnimationUsingKeyFrames();
          Storyboard.SetTargetName(FlipFront, strFrontSelectedValue);
          Storyboard.SetTargetName(FlipBack, strBackSelectedValue);
          Storyboard.SetTargetProperty(FlipFront, new PropertyPath("(UIElement.RenderTransform).(ScaleTransform.ScaleX)"));
          Storyboard.SetTargetProperty(FlipBack, new PropertyPath("(UIElement.RenderTransform).(ScaleTransform.ScaleX)"));
          SplineDoubleKeyFrame sFlipFront = new SplineDoubleKeyFrame();
          SplineDoubleKeyFrame sFlipBack = new SplineDoubleKeyFrame();
          sFlipFront.KeyTime = KeyTime.FromTimeSpan(TimeSpan.FromMilliseconds(500));
          sFlipFront.Value = 0;
          sFlipBack.KeyTime = KeyTime.FromTimeSpan(TimeSpan.FromMilliseconds(500));
          sFlipBack.Value = 1;
          FlipFront.KeyFrames.Add(sFlipFront);
          FlipBack.KeyFrames.Add(sFlipBack);
          sbFlip.Children.Add(FlipFront);
          sbFlip.Children.Add(FlipBack);
          sbFlip.AutoReverse = true;            
          sbFlip.Completed += new EventHandler(this.sbFlip_Completed);      
          sbFlip.Begin(); 
```

我哪里错了？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:34:13.143

哇得到了答案。我必须将字符串转换为图像并传递给函数，然后添加到目标，现在图像的翻转发生了。

.cs 页面：

```
Storyboard sbFlip = new Storyboard();
          sbFlip.Duration = new Duration(TimeSpan.FromSeconds(3));
          DoubleAnimationUsingKeyFrames FlipFront = new DoubleAnimationUsingKeyFrames();
          DoubleAnimationUsingKeyFrames FlipBack = new DoubleAnimationUsingKeyFrames();
          Storyboard.SetTargetName(FlipFront, strFrontSelectedValue);
          Storyboard.SetTargetName(FlipBack, strBackSelectedValue);
          Storyboard.SetTarget(FlipFront, imgFront);
          Storyboard.SetTarget(FlipBack, imgBack);
          Storyboard.SetTargetProperty(FlipFront, new PropertyPath("(UIElement.RenderTransform).(ScaleTransform.ScaleX)"));
          Storyboard.SetTargetProperty(FlipBack, new PropertyPath("(UIElement.RenderTransform).(ScaleTransform.ScaleX)"));
          SplineDoubleKeyFrame sFlipFront = new SplineDoubleKeyFrame();
          SplineDoubleKeyFrame sFlipBack = new SplineDoubleKeyFrame();
          sFlipFront.KeyTime = KeyTime.FromTimeSpan(TimeSpan.FromMilliseconds(500));
          sFlipFront.Value = 0;
          sFlipBack.KeyTime = KeyTime.FromTimeSpan(TimeSpan.FromMilliseconds(500));
          sFlipBack.Value = 1;
          FlipFront.KeyFrames.Add(sFlipFront);
          FlipBack.KeyFrames.Add(sFlipBack);
          sbFlip.Children.Add(FlipFront);
          sbFlip.Children.Add(FlipBack);
          sbFlip.AutoReverse = true;            
          sbFlip.Completed += new EventHandler(this.sbFlip_Completed);      
          sbFlip.Begin(); 
```

// 传递字符串并查找为图像

```
Image imgBack = FindControl<Image>((UIElement)Layout, typeof(Image), strSelectedimg); 
```

// 查找图片的函数

```
public T FindControl<T>(UIElement parent, Type targetType, string ControlName) where T : FrameworkElement
       {

           if (parent == null) return null;

           if (parent.GetType() == targetType && ((T)parent).Name == ControlName)
           {
               return (T)parent;
           }
           T result = null;
           int count = VisualTreeHelper.GetChildrenCount(parent);
           for (int i = 0; i < count; i++)
           {
               UIElement child = (UIElement)VisualTreeHelper.GetChild(parent, i);

               if (FindControl<T>(child, targetType, ControlName) != null)
               {
                   result = FindControl<T>(child, targetType, ControlName);
                   break;
               }
           }
           return result;
       } 
```

// 在函数中添加这两行代码

```
 Storyboard.SetTarget(FlipFront, imgFront);
          Storyboard.SetTarget(FlipBack, imgBack); 
```

# sql - SQL，根据分组选择的最小值从第二个表中获取值

> ID：12279624
> 
> 赞同：3
> 
> 时间：2012-09-05T10:41:43.627
> 
> 标签：sql, sql-server, join

我在下面有一个查询，我列出了所有尚未清空的交易，目标是获取一个包含所有打开的 transactionID（代表客户订单）及其发票编号的列表。

```
Table 1
transactionID
bookdate
cost
year

Table 2
transactionID
invoice
year

SELECT 1.transactionID, Sum(cost), 1.Max(bookdate), 2.invoice
FROM 1
LEFT JOIN 2
ON 1.transactionID = 2\. transactionID AND 1.year = 2.year
GROUP BY 1.transactionID, 2.invoice
HAVING (Sum(cost)<>0) 
```

我的问题是 transactionID 每年都会被重用，这就是为什么我需要检查实际 transactionID 和表 2 中的发票之间的年份是否对应。

每个 transactionID 都有多个具有不同预订日期的交易。这意味着一笔交易可能发生在 2011 年，另一笔交易发生在 2012 年。我希望查询查找与每个打开的 transactionID 的最早预订日期相对应的年份。

例如：

表格1

```
1 | 20120101 | -20  | 2012
2 | 20120501 | -100 | 2012
2 | 20110501 | 100  | 2012
1 | 20110801 | 50   | 2011 
```

表 2

```
1 | invoice X   | 2012
2 | invoice Y   | 2012
1 | invoice old | 2011 
```

结果应该是

```
1 | 30 USD | Invoice old 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:32:57.900

如果您使用的是 SQL Server 2005 或更高版本，则可以使用如下[窗口](http://msdn.microsoft.com/en-us/library/ms189461.aspx)函数：

```
WITH summedAndRanked AS (
  SELECT
    [1].transactionID,
    [2].invoice,
    totalCost    = SUM(cost)     OVER (PARTITION BY [1].transactionID),
    lastBookDate = MAX(bookdate) OVER (PARTITION BY [1].transactionID),
    rnk          = DENSE_RANK()  OVER (PARTITION BY [1].transactionID ORDER BY [1].year),
  FROM [1]
    LEFT JOIN [2]
      ON [1].transactionID = [2].transactionID
     AND [1].year = [2].year
)
SELECT DISTINCT
  TransactionID,
  totalCost,
  lastBookDate,
  invoice
FROM countedAndRanked
WHERE totalCost <> 0
  AND rnk = 1
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:44:41.993

我想你快到了 - 试试

```
SELECT 1.transactionID, 1.Year, Sum(cost), Max(1.bookdate), 2.invoice 
FROM 1 
LEFT JOIN 2 
ON 1.transactionID = 2\. transactionID AND 1.year = 2.year 
GROUP BY 1.transactionID, 1.Year, 2.invoice
HAVING (Sum(cost)<>0) 
```

# c# - smalldatetime 列中的数据表选择时间

> ID：12279631
> 
> 赞同：1
> 
> 时间：2012-09-05T10:41:53.617
> 
> 标签：c#, datatable, dataset, smalldatetime

我有`datatable`4 列，其中之一是`smalldatetime`类型。当我从 SQL 库中检索数据表时，我想进一步查询`datatable`，但仅限于特定时间。这可能吗？

我正在尝试这样的事情：

```
DataRow[] rows = dataset.Tables[0].Select("resStart = 'some date '" + myTime+"'"); 
```

特别是我试图在数据网格中浏览日期和时间，所以最后它应该通过这样的查询来检索一行

```
DataRow[] rows = dataset.Tables[0].Select("resStart = '" + myDate +" " + myTime+"'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:50:11.560

如果您想*在 sourceCode* DataTable 类中查询数据，则支持**方法 SELECT**，该方法允许您根据给定条件过滤表。查看[MSDN](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)以获得详细说明。

```
string filterExpression = "YOUR_SMALLDATE_COLUMN > #1/1/00#";
DataRow[] rows = YOUR_DATATABLE_VAR.Select(filterExpression);

// eg. print out results - or rebind data etc.
for(int i = 0; i < rows.Length; i ++)
{
    Debug.WriteLine(rows[i]["ANY_COLUMN_NAME"]);
} 
```

当然，您也可以将您的 select 语句更改为数据库并**附加[whereClause](http://msdn.microsoft.com/en-us/library/ms188047.aspx)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:52:37.920

> 这可能吗？

是的当然。例如通过使用 Linq-To-DataSet：

```
var thisYearsRows = table
    .AsEnumerable()
    .Where(r => r.Field<DateTime>("SmalldateTimeField").Year == DateTime.Now.Year); 
```

您需要添加`using System.Linq;`和引用`System.Data.DataSetExtensions.dll`.

# html - 更新一个 html 文件，让浏览器知道不使用缓存中的那个

> ID：12279632
> 
> 赞同：9
> 
> 时间：2012-09-05T10:41:54.083
> 
> 标签：html, caching, apache2

我认为我的 javascript 被缓存并且即使使用更新的版本标签也没有更新，例如：

```
<script type="text/javascript" src="lib/myScript.min.js?v=3"></script> 
```

但我意识到问题在于我的 html 文件正在被缓存......所以浏览器甚至不知道有一个新的脚本文件。

我不想禁用缓存，但有没有办法让浏览器知道它没有最新的 html 文件？（这是我放在我的 html 文件中还是放在我的 apache2 服务器上的东西？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T10:53:38.427

```
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" /> 
```

从[使用标签关闭所有浏览器中的缓存的](https://stackoverflow.com/questions/1341089/using-meta-tags-to-turn-off-caching-in-all-browsers)[答案？](https://stackoverflow.com/a/1341133/543549)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T10:51:10.267

您可以尝试这些元标记。我认为它会解决您的问题。

```
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T11:07:41.757

除了在 html 中显式编写之外，您实际上还有两个更好的选择：`ETAG`和`Last-Modified`. 如果您的 html 文件是静态文件，那么默认情况下 apache2 将知道如何处理其缓存。如果它是 php，那么你将不得不在你的代码中处理它，或者使用一些 php 框架。

由于这两个标头不是用html编写的，因此浏览器不必下载整个HTTP响应，从而减少了流量。所以我建议你使用它们。

我相信一点谷歌搜索可能会有所帮助。

[什么优先：ETag 或 Last-Modified HTTP 标头？](https://stackoverflow.com/questions/824152/what-takes-precedence-the-etag-or-last-modified-http-header)

# encoding - 处理通过 QueryString 传递的非英语字符串

> ID：12279633
> 
> 赞同：1
> 
> 时间：2012-09-05T10:41:59.217
> 
> 标签：encoding, asp-classic, ascii, urlencode

我正在尝试使用经典 ASP 处理通过 QueryString 传递的希伯来语字符串。

我请求的 URL： [http](http://www.XXXX.com/myapp.asp?q) ://www.XXXX.com/myapp.asp? q =שלום

（שלום 在希伯来语中是“和平”，一个由 4 个字母组成的词）

在 ASP 方面，我运行以下代码：

```
mstr = Request.QueryString("q")
for i=1 to Len(mstr)
   Response.Write  Asc(Mid(mstr, i, 1)) & "<br/>"
next 
```

此脚本生成以下输出：215 169 215 156 215 149 215 157

8 个 ASCII 字母，表示每个字母有两个 ASCII 符号（字节）。

我需要看到以下输出：249 236 229 237

（ASCII 表的顶部）

我应该怎么做才能正确处理这些字符串？（查看原始字符串中发送的 4 个字母）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:58:54.483

[http://www.XXXX.com/myapp.asp?q=שלום](http://www.XXXX.com/myapp.asp?q=%D7%A9%D7%9C%D7%95%D7%9D)链接所在的 html 页面必须编码为**utf-8**。因为浏览器会将请求（很可能）以与原始页面相同的编码进行编码。

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head> 
```

查询字符串应该始终是 URL 编码的。浏览器会自动为标准链接执行此操作，但如果您通过 JavaScript 构建 URL，则必须自己处理 URL 编码。

其次，您必须将服务器端脚本 (ASP) 设置为在 utf-8 中工作。您可以通过将这些行放在顶部来做到这一点。

```
<%
    response.codepage = 65001
    response.charset = 'utf-8'
%> 
```

**阅读更多**： [内部字符串编码](https://stackoverflow.com/questions/6937509/internal-string-encoding)

# c# - 我想从后面的代码中启用大写锁定并将其锁定直到我想要

> ID：12279634
> 
> 赞同：-4
> 
> 时间：2012-09-05T10:42:00.950
> 
> 标签：c#, asp.net

我正在处理一个表单，并希望用户只在字段中输入大写字母。我已经为此提供了正则表达式验证器。但是为了让用户的生活更轻松，我想从后端启用大写锁定并且也希望拥有它一直到我想要为止。我搜索但无处可去。我只能设法知道大写锁定的状态。提前感谢朋友。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:46:56.873

您无法从网页启用 Caps Lock。

您需要做的是在用户输入时使用 Java Script 函数将字母大写。

[您可以在此处](http://www.liewcf.com/javascript-convert-characters-to-uppercase-when-typing-92/)找到详细信息。

* * *

我将示例提升到我的答案中：

```
<script>
 function uppercase() {
     key = window.event.keyCode;
     if ((key > 0x60) && (key < 0x7B))
         window.event.keyCode = key-0x20;
 }
</script>

<input type="text" onKeypress="uppercase();" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:58:48.757

为了方便用户，您应该将所有输入的字符转换为大写。如果您强制用户保持 CAPS 锁定，那么对于用户的其他工作，它将始终处于打开状态；这很危险。

要将字母转换为大写，您可以制作文本框样式：

```
style="text-transform:uppercase; 
```

或者

从这个问题中获得帮助... [如何在 ASP.NET 文本框中强制输入为大写？](https://stackoverflow.com/questions/202368/how-can-i-force-input-to-uppercase-in-an-asp-net-textbox)

# import - 使用 genmodel 将 OMG 提供的 XMI 导入 Ecore-Model？

> ID：12279635
> 
> 赞同：3
> 
> 时间：2012-09-05T10:42:09.157
> 
> 标签：import, uml, eclipse-emf, eclipse-emf-ecore, xmi

OMG 提供了 uml[元模型](http://www.omg.org/spec/UML/2.4.1/)的 XMI 文件。但是，我想使用 genmodel 将这些文件导入 Ecore 模型。

如果我尝试使用 genmodel 向导加载 xmi 文件，总是会出现以下异常。我正在将 Eclipse Indigo 与 Eclipse 建模框架一起使用。

> org.eclipse.emf.ecore.xmi.PackageNotFoundException：找不到带有 uri 'http://www.omg.org/spec/UML/20110701' 的包。(file:/C:/Users/.../UML/UML.xmi, 3, 105) at org.eclipse.emf.ecore.xmi.impl.XMLHandler.getPackageForURI(XMLHandler.java:2591)

在我看来，这是关于 XMI 文件版本的问题，但我不确定。我想 Eclipse 无法处理 XMI 2.4.1。我对吗？如果是，是否可以使用 Eclipse Indigo - EMF 导入 XMI 2.4.1？

我已经从网站上下载了所有 xmi 文件并将它们放到一个文件夹中。然后我试图导入它们并出现异常。是否有人已经将这些文件导入到 Ecore 模型中。我需要注意什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:00:46.453

您应该将 UML Ecore 作为您自己的 Ecore（元模型）的外部资源加载。genmodel 将自动与之一致地更新

# java - 提取特定行java

> ID：12279641
> 
> 赞同：0
> 
> 时间：2012-09-05T10:42:30.743
> 
> 标签：java, string, parsing, design-patterns

我有一个文本文件，如下所示

```
add device 1: /dev/input/event7
  name:     "evfwd"
add device 2: /dev/input/event6
  name:     "aev_abs"
add device 3: /dev/input/event5
  name:     "light-prox"
add device 4: /dev/input/event4
  name:     "qtouch-touchscreen"
add device 5: /dev/input/event2
  name:     "cpcap-key"
add device 6: /dev/input/event1
  name:     "accelerometer"
add device 7: /dev/input/event0
  name:     "compass"
add device 8: /dev/input/event3
  name:     "omap-keypad"
4026-275085: /dev/input/event5: 0011 0008 0000001f
4026-275146: /dev/input/event5: 0000 0000 00000000
4026-494201: /dev/input/event5: 0011 0008 00000020
4026-494354: /dev/input/event5: 0000 0000 00000000 
```

我需要做的是我想删除添加设备前导码，我只需要从 4026-275 开始的行......也就是说，

```
 4026-275085: /dev/input/event5: 0011 0008 0000001f
    4026-275146: /dev/input/event5: 0000 0000 00000000
    4026-494201: /dev/input/event5: 0011 0008 00000020
    4026-494354: /dev/input/event5: 0000 0000 00000000 
```

现在这个数字可能会有所不同。我怎样才能有效地提取它。序言行号不是恒定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:45:41.713

只保留以数字开头的行。

```
for (String line : lines) {
    if (line.matches("^\\d+.*")) {
        System.out.println("line starts with a digit");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:46:05.487

如果您需要的行总是以数字开头，您可以使用以下内容检查是否是这种情况。

```
String[] lines = figureOutAWayToExtractLines();

// Iterate all lines
for(String line : lines)
    // Check if first character is a number (optionally trim whitespace)
    if(Character.isDigit(str.charAt(0)))
        // So something with it
        doSomethingWithLine(line); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T10:47:04.753

逐行读取文本文件。对于每一行，如果字符串为“添加设备”或“开始”为“\tname:”，则只需忽略这些行。例如：

```
final String line = reader.readLine();
if(line != null) {
    if(line.startsWith("add device") || line.startsWith("\tname:")) {
        // ignore
     }
     else {
        // process
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:48:08.343

尝试使用正则表达式：

```
boolean keepLine = Pattern.matches("^\d{4}-\d{6}.*", yourLine); 
```

# uitableview - 选择 UITextView 行时如何使 UITextField 进入编辑模式

> ID：12279659
> 
> 赞同：1
> 
> 时间：2012-09-05T10:43:31.590
> 
> 标签：uitableview, uitextfield

我的 UITableView 行中有一个 UITextField 子视图。当我点击一行（在 UITextField 框架之外）时，我希望 UITextField 变得可编辑（即，使数字键盘出现），就像我在 UITextField 框架内点击一样。

我看到了一些类似的问题，建议使用 becomeFirstResponder 但这对我不起作用。

我该怎么做？我应该以某种方式将 UITextField 框架之外的触摸事件转发到 UITextField 吗？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  [self selectSection: indexPath.section];

  switch( indexPath.section )
  {      
    case SECTION_RATE:
      currentTextField = editRate;
      [editRate becomeFirstResponder];
      break;

    case SECTION_UNITS:
      currentTextField = editUnits;
      [editUnits becomeFirstResponder];
      break;

    default:
      break;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:08:20.610

在您的 didSelectRowAtIndexPath 检查索引路径和

```
 tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 

if(indexpath.row == 0)
{
 [txtField1 becomeFirstResponder];
 //adjust table scroll for keyboard 
}
else if(indexpath.row == 1)
{
 [txtField2 becomeFirstResponder];
 //adjust table scroll for keyboard 
} 
```

# parameters - 如何更新 Three.JS 中的 CombinedCamera 参数？

> ID：12279664
> 
> 赞同：0
> 
> 时间：2012-09-05T10:43:57.437
> 
> 标签：parameters, camera, three.js

我将更改 Near Clipping Plane 参数，然后更新相机以查看结果。

首先，我创建具有近剪切平面 = 10 的相机，然后我想将其设置为 700。我编写了以下代码，但在 camera.updateProjectionMatrix(); 之后 ，它再次设置为 10！

```
camera = new THREE.CombinedCamera(window.innerWidth ,window.innerHeight ,40 ,10 ,10000 ,-500 ,100); //near clipping plane is defined 10  
camera.position.set( 1000, 1000, 1000 );
camera.near = 700;   //near =700
camera.updateProjectionMatrix();  //near=10 !!!! whyyyyy!!! 
scene.add( camera ); 
```

然后我使用： camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 1, 10000); camera.near=700; camera.updateProjectionMatrix();

解决了！！！

当您使用 camera.updateProjectionMatrix(); 时，我认为“CombinedCamera”中有一个错误；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:00:48.393

对于您的`CombinedCamera`，您想要做的是：

```
camera.cameraP.near = 700;
camera.updateProjectionMatrix(); 
```

# java - 在 Java 中查找第三大 no

> ID：12279667
> 
> 赞同：5
> 
> 时间：2012-09-05T10:44:13.800
> 
> 标签：java, arrays

我对这个简单的程序有点困惑。我必须在数组中找到第三大的否。我已经做了一些代码，但在第三大没有问题时只得到了第二大没有问题，所以请建议我这个解决方案有什么问题：

```
class ArrayExample {
    public static void main(String[] args) {
        int secondlargest = Integer.MIN_VALUE;
        int thirdlargest = Integer.MIN_VALUE;
        int largest = Integer.MIN_VALUE;
        Scanner input = new Scanner(System.in);
        System.out.println("Enter array values: ");
        int arr[] = new int[5];
        for (int i = 0; i < arr.length; i++) {
            arr[i] = input.nextInt();
            if (largest < arr[i]) {
                secondlargest = largest;
                largest = arr[i];
            }
            if (secondlargest < arr[i] && largest != arr[i]) {
                thirdlargest = secondlargest;
                secondlargest = arr[i];
                if (thirdlargest < arr[i] && secondlargest != arr[i])
                    thirdlargest = arr[i];
            }

        }
        System.out.println("Second Largest number is: " + secondlargest
                + "\nThird largest number is=====" + thirdlargest);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T10:48:52.383

我会尝试这样的事情：

```
if (largest < ar[i]) {
    thirdlargest = secondlargest;
    secondlargest = largest;
    largest = arr[i];
} else if (secondlargest < ar[i]) {
    thirdlargest = secondlargest;
    secondlargest = ar[i];
} else if (thirdlargest < ar[i]) {
    thirdlargest = ar[i];
} 
```

未经测试，但我认为不再需要第二个 IF。

代码说明：

我们正在验证如果输入的数字大于最大值，则将第三、第二和第一最大值向上移动一级。如果输入的值大于第二大且小于最大值，则将 3 和 2 上移一级。如果输入的值大于第 3 大且小于第 2 大，则将第 3 大移动到输入的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T11:13:15.620

集合 API。这是一个例子：

```
 List list = Arrays.asList(new Integer[] {1, 2, 29, 4, 28, 6, 27, 8});
    Collections.sort(list);
    System.out.print(list.get(list.size()-3)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-24T23:56:05.520

```
 if(firstLargest<array[num])
        {
            thirdLargest=secondLargest;
            secondLargest=firstLargest;
            firstLargest = array[num];
        }

        else if((secondLargest<array[num])&&(array[num]!=firstLargest))
        {
            thirdLargest=secondLargest;
            secondLargest = array[num];
        }

        else if((thirdLargest<array[num])&&(array[num]!=secondLargest))
        {
            thirdLargest = array[num];
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T10:46:58.617

使用 java 列表，对其进行排序。取第三个元素。

[java.util.Collections.sort()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T10:52:52.153

```
for (int i = 0; i < arr.length; i++)
 {
        arr[i] = input.nextInt();
        if (largest < arr[i]) {
            secondlargest = largest;
            largest = arr[i];
            continue;
        }
        if (secondlargest <= arr[i] && largest > arr[i])
        {
            thirdlargest = secondlargest;
            secondlargest = arr[i];
            continue;
        }
        if (thirdlargest <= arr[i] && secondlargest > arr[i])
        {
                thirdlargest = arr[i];
        }

 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-05T10:54:29.720

使用`Integer`数组，然后使用它进行排序，然后`Collections`选择您需要的元素：

### 代码：

```
System.out.println("Enter array values: ");
Integer arr[] = new Integer[5];
for (int i = 0; i < arr.length; i++) {
            arr[i] = input.nextInt();
}
List<Integer> list = Arrays.asList(arr);
Collections.sort(list);
System.out.println(list); 
```

输出是：

```
[0, 1, 2, 3, 6] 
```

所以，现在选择第三个大数作为`list.get(list.size()-3))`。

您还可以对集合进行反向排序。检查它的[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-05T10:59:56.720

如果您希望该代码正常工作，我认为问题出在：

```
 if (secondlargest < arr[i] && largest != arr[i]) {
                thirdlargest = secondlargest;
                secondlargest = arr[i];
                if (thirdlargest < arr[i] && secondlargest != arr[i])
                    thirdlargest = arr[i];
            } 
```

问题是您将thirdLargest 设置为secondLargest，它已被确定为小于arr[i]。然后，您将测试thirdLargest 是否小于arr[i]（保证它在外部条件中被设置为第二大），然后将其设置为arr[i]。尝试删除

```
if (thirdlargest < arr[i] && secondlargest != arr[i])
                        thirdlargest = arr[i]; 
```

如果这不起作用，请尝试添加第三个单独的条件来覆盖 arr[i] 小于 secondGreatest 但大于 thirdGreatest 的情况。（请参阅上面的 Jens 回答），例如：

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-05T10:46:16.933

只需循环遍历整个数组并跟踪三个最大的数字。

或者您可以对其进行排序，然后从顶部返回第三个元素。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-05T10:51:24.817

读入数组后，只需在数组上调用 Arrays.sort(array) （在您的情况下为 Arrays.sort(arr); ）。这会将其排序为升序，然后您只需检索元素 arr.length-2

完整描述在这里： http: [//www.homeandlearn.co.uk/java/sorting_arrays.html](http://www.homeandlearn.co.uk/java/sorting_arrays.html)

例子：

```
 Scanner input = new Scanner(System.in);
            System.out.println("Enter array values: ");
            int arr[] = new int[5];
            for (int i = 0; i < arr.length; i++) {
                arr[i] = input.nextInt();
        }
    Arrays.sort(arr);
System.out.println("Second Largest number is: " + arr[4]
                + "\nThird largest number is=====" + arr[3]); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-20T07:07:52.433

试试这个代码，

```
public static void main(String[] args) {

    int arr[] = {67, 56, 87, 42};

    for (int i = 0; i <arr.length - 1; i++) {
        if (arr[i] < arr[i + 1]) {
            int swap = arr[i];
            arr[i] = arr[i + 1];
            arr[i + 1] = swap;       
        }
    }

    System.out.println("third highest element is: " + arr[2]);
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-17T13:17:21.980

```
package algo;

public class LargestNumbers {

    public static void main(String args[]){
        int arr[] = new int[]{5,2,3,4,6};

        int largest=Integer.MIN_VALUE;;
        int secondLargest=Integer.MIN_VALUE;;
        int thirdLargest=Integer.MIN_VALUE;;

        for(int i=0;i<arr.length;i++){

              if(largest<arr[i])
                {
                    thirdLargest=secondLargest;
                    secondLargest=largest;
                    largest = arr[i];
                }

               else if((secondLargest<arr[i])&&(arr[i]!=largest))
                {
                    thirdLargest=secondLargest;
                    secondLargest = arr[i];
                }

               else if((thirdLargest<arr[i])&&(arr[i]!=secondLargest))
                {
                    thirdLargest = arr[i];
                }

        }//for

         System.out.println("Numbers are: " + largest + " "  + secondLargest
                    + "\nThird largest number is=====" + thirdLargest);
    }

} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-02T08:23:06.643

```
package arrays;

import java.util.Arrays;
public class ArraythirdHighestvalues {
    //method 1 
    public static  int highest(int []arr,int length)
    {
        int temp;
        for(int i=0;i<length;i++)
        {
            for(int j=i+1;j<length;j++)
            {
                if(arr[i]>arr[j])
                {
                    temp=arr[i];
                    arr[i]=arr[j];
                    arr[j]=temp;
                }
            }
        }
        return arr[length-2];
    }
    public static void main(String[] args) {
        int arr[]= {1,3,5,6,7,2,};
        System.out.println(highest(arr,arr.length));
        System.out.println("method 2 to find array second higest element value --");
        Arrays.parallelSort(arr);
        System.out.println(arr[arr.length-3]);

    }

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-02T11:14:44.267

包算法；

公共类 LargestNumbers {

```
public static void main(String args[]){
    int arr[] = new int[]{5,2,3,4,6};

    int largest=Integer.MIN_VALUE;;
    int secondLargest=Integer.MIN_VALUE;;
    int thirdLargest=Integer.MIN_VALUE;;

    for(int i=0;i<arr.length;i++){

          if(largest<arr[i])
            {
                thirdLargest=secondLargest;
                secondLargest=largest;
                largest = arr[i];
            }

           else if((secondLargest<arr[i])&&(arr[i]!=largest))
            {
                thirdLargest=secondLargest;
                secondLargest = arr[i];
            }

           else if((thirdLargest<arr[i])&&(arr[i]!=secondLargest))
            {
                thirdLargest = arr[i];
            }

    }//for

     System.out.println("Numbers a`enter code here`re: " + largest + " "  + secondLargest
                + "\nThird largest number is=====" + thirdLargest);
} 
```

}

# javascript - 在jquery中获取累积选择器

> ID：12279669
> 
> 赞同：0
> 
> 时间：2012-09-05T10:44:17.767
> 
> 标签：javascript, jquery, jquery-plugins, jquery-selectors

我需要从匹配的选择器中获得一个完整的、有效的选择器，或者至少能够循环通过其中的一组

[这是我需要的一个例子](http://jsfiddle.net/rXwqS/1/)。它适用于前两个用例，但不适用于最后一个。

```
(function($){
      $.fn.getSelector = function(){
          return(this.selector);
      }
    })(jQuery) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:05:29.677

作为一个经验法则，如果 jQuery 对象由一个字符串选择器构成，则只能使用 this.selector。当然也有像 find('') 这样的情况，其中选择器被计算出来并且仍然可用。[（检查jquery 源代码](http://code.jquery.com/jquery-1.8.1.js)中的 add 函数（以及 pushStack））。然而，它并没有被计算出来（即使在某些情况下很容易做到）。

您可以做的是遍历选择器的所有元素并为它们计算有效的选择器路径。在 jquery (AFAIK) 中没有内置的解决方案，但即使在 stackoverflow 上也有一些关于如何执行此操作的示例。

例如：[我如何从 jQuery 对象中获取选择器](https://stackoverflow.com/questions/2420970/how-can-i-get-selector-from-jquery-object)这里有一些可用的答案，比如反向计算 dom。但是您需要对每个项目都这样做，即使这样，对于 jquery 集合，也可能没有可用的理智选择器只匹配选定的元素，因此会有很多误报匹配。所以这绝对不是一个完美的解决方案。您还需要加工过的物品。

您还可以做的是覆盖 jquery 的 add 方法。只有当原始对象和 add 方法都有一个字符串类型的选择器时，它才会起作用。检查这个[小提琴](http://jsfiddle.net/rXwqS/8/)。我确信它可以通过多种方式进行升级，例如当 add 方法将 jQuery 对象作为选择器参数并且它的选择器属性可用时构造选择器，但这只是一个开始。

# entity-framework - 实体框架 - 过于频繁地尝试制作 MigrationHistory 表

> ID：12279672
> 
> 赞同：1
> 
> 时间：2012-09-05T10:44:25.437
> 
> 标签：entity-framework

实体框架迁移似乎想要在相当长的时间内创建迁移历史记录（不是每次，通常是在需要创建新表时）。问题在于它存在并且似乎很高兴跟上状态。我认为默认情况下它不应该这样做......？

我有一个从 EF 4.3 开始的数据库，用 EF 5.0RC 进行了一些更新，现在是最终版本 EF 5。

迁移是使用 : update-database -Script 创建的，因为从 4.3 到 5.x 的外键约束命名约定存在问题，所以我偶尔需要摆弄一些修改脚本。

IE。这是最新的更新：

```
ALTER TABLE [dbo].[PermissionRecords] DROP CONSTRAINT [FK_dbo.PermissionRecords_dbo.Roles_Role_Id]
ALTER TABLE [dbo].[PermissionRecords] DROP CONSTRAINT [FK_dbo.PermissionRecords_dbo.Roles_Role_Id1]
DROP INDEX [IX_Role_Id] ON [dbo].[PermissionRecords]
DROP INDEX [IX_Role_Id1] ON [dbo].[PermissionRecords]
CREATE TABLE [dbo].[RolesEffectivePermissions] (
    [Role_Id] [int] NOT NULL,
    [PermissionRecord_Id] [int] NOT NULL,
    CONSTRAINT [PK_dbo.RolesEffectivePermissions] PRIMARY KEY ([Role_Id], [PermissionRecord_Id])
)
CREATE TABLE [dbo].[RolesGivenPermissions] (
    [Role_Id] [int] NOT NULL,
    [PermissionRecord_Id] [int] NOT NULL,
    CONSTRAINT [PK_dbo.RolesGivenPermissions] PRIMARY KEY ([Role_Id], [PermissionRecord_Id])
)
CREATE INDEX [IX_Role_Id] ON [dbo].[RolesEffectivePermissions]([Role_Id])
CREATE INDEX [IX_PermissionRecord_Id] ON [dbo].[RolesEffectivePermissions]([PermissionRecord_Id])
CREATE INDEX [IX_Role_Id] ON [dbo].[RolesGivenPermissions]([Role_Id])
CREATE INDEX [IX_PermissionRecord_Id] ON [dbo].[RolesGivenPermissions]([PermissionRecord_Id])
DECLARE @var0 nvarchar(128)
SELECT @var0 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.PermissionRecords')
AND col_name(parent_object_id, parent_column_id) = 'Role_Id';
IF @var0 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[PermissionRecords] DROP CONSTRAINT ' + @var0)
ALTER TABLE [dbo].[PermissionRecords] DROP COLUMN [Role_Id]
DECLARE @var1 nvarchar(128)
SELECT @var1 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.PermissionRecords')
AND col_name(parent_object_id, parent_column_id) = 'Role_Id1';
IF @var1 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[PermissionRecords] DROP CONSTRAINT ' + @var1)
ALTER TABLE [dbo].[PermissionRecords] DROP COLUMN [Role_Id1]
ALTER TABLE [dbo].[RolesEffectivePermissions] ADD CONSTRAINT [FK_dbo.RolesEffectivePermissions_dbo.Roles_Role_Id] FOREIGN KEY ([Role_Id]) REFERENCES [dbo].[Roles] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[RolesEffectivePermissions] ADD CONSTRAINT [FK_dbo.RolesEffectivePermissions_dbo.PermissionRecords_PermissionRecord_Id] FOREIGN KEY ([PermissionRecord_Id]) REFERENCES [dbo].[PermissionRecords] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[RolesGivenPermissions] ADD CONSTRAINT [FK_dbo.RolesGivenPermissions_dbo.Roles_Role_Id] FOREIGN KEY ([Role_Id]) REFERENCES [dbo].[Roles] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[RolesGivenPermissions] ADD CONSTRAINT [FK_dbo.RolesGivenPermissions_dbo.PermissionRecords_PermissionRecord_Id] FOREIGN KEY ([PermissionRecord_Id]) REFERENCES [dbo].[PermissionRecords] ([Id]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](255) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId])
)
BEGIN TRY
    EXEC sp_MS_marksystemobject 'dbo.__MigrationHistory'
END TRY
BEGIN CATCH
END CATCH
INSERT INTO [__MigrationHistory] ([MigrationId], [Model], [ProductVersion]) VALUES ('201209050951363_AutomaticMigration', 0x1F8B0800000000000400ED7DDB721C ..., '5.0.0.net40') 
```

如果我将迁移文件添加到项目中，create table 语句就会消失。难道是因为我经常注释掉以前的迁移文件？因为我现在更有可能重新创建数据库/复制不同版本的数据库。

迁移历史表 - 目前该表中只有自动迁移记录。

所以回到这个问题。为什么它正在尝试创建迁移历史表，而该表已经存在并从中获得了状态。

谢谢，马特

# url - Google plus 通过 url 分享停止工作

> ID：12279673
> 
> 赞同：0
> 
> 时间：2012-09-05T10:44:26.453
> 
> 标签：url, share, google-plus, social

我有以下格式的 google plus 共享链接：

```
https://plusone.google.com/_/+1/confirm?hl=nl&url=http://www.ortho.nl/orthomoleculair-blog/nieuws/2012/orthomoleculair-boek-gewrichten-en-voeding/&title=Orthomoleculair%20boek:%20Gewrichten%20en%20Voeding&content=Zelfs%20artrose%20in%20de%20knie%20is%20een%20aandoening%20waarbij%20het%20hele%20lichaam%20is%20betrokken.%20Reuma%20is%20geen%20ziekte%20die%20alleen%20de%20gewrichten%20betreft.%20Ooit%20gehoord%20&image=http://www.ortho.nl/css/afbeeldingen/logo.png 
```

到目前为止它工作得很好，但现在如果我点击它，我会看到半秒钟的登录屏幕，然后只是一个空白的灰色屏幕。

谷歌是否改变了它的访问路径或者这个 url 有什么东西破坏了它？如果是这样，谁能帮我指出错误所在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:19:24.277

有一个新链接：[https](https://plus.google.com/share?url=) ://plus.google.com/share? url= 在 = 之后，您必须输入您的网址。

# java - 如何使用 Java 从 DNS 检索多个 TXT 记录？

> ID：12279675
> 
> 赞同：5
> 
> 时间：2012-09-05T10:44:39.217
> 
> 标签：java, dns

我有一个包含多个 TXT 记录的域。挖掘显示了所有这些。名称服务器以不确定的顺序返回它们。尝试`javax.naming.directory`仅使用每个类检索这些记录会导致名称服务器返回第一个名称——有时是一个，有时是另一个，因为名称服务器返回的顺序不同。

这是一个代码片段：

```
Hashtable<String, String> env = new Hashtable<String, String>();
env.put("java.naming.factory.initial",
            "com.sun.jndi.dns.DnsContextFactory");
DirContext dirContext = new InitialDirContext(env);
Attributes attrs = dirContext.getAttributes(name, new String[] { "TXT" }); 
```

此时，`attrs`只包含一个`Attribute`. 这是预期的行为吗？如何让 Java 检索所有 TXT 记录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T10:48:49.277

在我自己的测试中，（单个）返回的属性包含`TXT`我尝试过的域中的两条记录：

```
Attributes attrs = dirContext.getAttributes("paypal.com", new String[] { "TXT" });
Attribute txt = attrs.get("TXT");
NamingEnumeration e = txt.getAll();
while (e.hasMore()) {
     System.out.println(e.next());
} 
```

如果这对您不起作用，[dnsjava](http://www.xbill.org/dnsjava/)库肯定会允许您获取所有记录。

# mysql - 在mysql中声明变量

> ID：12279676
> 
> 赞同：0
> 
> 时间：2012-09-05T10:44:40.403
> 
> 标签：mysql

```
DELIMITER $$

DROP PROCEDURE IF EXISTS logger $$
CREATE PROCEDURE logger(IN errorz VARCHAR(50),IN table_name VARCHAR(50))
BEGIN

DECLARE t_name VARCHAR(50);
DECLARE link_id_var INT;
DECLARE error_type_var VARCHAR(30);
DECLARE source_url_var VARCHAR(500);
DECLARE done INT DEFAULT 0;

DECLARE curl  CURSOR FOR  SELECT link_id, anchor_match, anchor_match FROM cursor_temp;

DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;

DROP TEMPORARY TABLE IF EXISTS cursor_temp;
SET @query1 = CONCAT('
    CREATE TEMPORARY TABLE cursor_temp AS
        SELECT p.link_id, anchor_match, source_url 
        FROM ',table_name,' AS p
             INNER JOIN link_results AS l
                 ON p.page_r_id = l.page_r_id
             INNER JOIN links AS ls
                 ON ls.link_id = p.link_id
        WHERE anchor_match="None"
    ');
PREPARE stmt FROM @query1; EXECUTE stmt; DEALLOCATE PREPARE stmt;

OPEN curl;

my_loop:LOOP

FETCH curl INTO link_id_var,error_type_var,source_url_var;

INSERT INTO errors (link_id,error_type,source_url) VALUES (link_id_var,errorz,source_url_var) ON DUPLICATE KEY UPDATE error_type=errorz,source_url=source_url_var;

IF done=1 THEN
LEAVE my_loop;
END IF;
END LOOP my_loop;
CLOSE curl;

DROP TEMPORARY TABLE IF EXISTS cursor_temp; 
```

结束$$

当我执行语句时：

```
call logger('anchor','page_results'); 
```

我在另一个表中将源 url 字段设置为“无”。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:48:19.133

这是因为所有`DECLARE`语句都必须位于存储过程的顶部。

您需要`SET @t_name=table_name;`在所有语句之后移动此`DECLARE`语句。

请参阅[手册](http://dev.mysql.com/doc/refman/5.6/en/declare.html)。

**编辑：**您无法访问游标中的变量表名。或者，您可以使用动态 sql 并将结果存储在临时表中，然后在游标选择中使用该表。

```
CREATE PROCEDURE logger(IN errorz VARCHAR(50),IN table_name VARCHAR(50))
BEGIN

    DECLARE t_name VARCHAR(50);
    DECLARE link_id_var INT;
    DECLARE error_type_var VARCHAR(30);
    DECLARE source_url_var VARCHAR(500);
    DECLARE done INT DEFAULT 0;

    DECLARE curl  CURSOR FOR  SELECT link_id, anchor_match, anchor_match FROM cursor_temp;

    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;

    DROP TEMPORARY TABLE IF EXISTS cursor_temp;
    SET @query1 = CONCAT('
        CREATE TEMPORARY TABLE cursor_temp AS
            SELECT p.link_id, anchor_match, anchor_match
            FROM ',table_name,' AS p
                 INNER JOIN link_results AS l
                     ON p.page_r_id = l.page_r_id
                 INNER JOIN links AS ls
                     ON ls.link_id = p.link_id
            WHERE anchor_match="None"
        ');
    PREPARE stmt FROM @query1; EXECUTE stmt; DEALLOCATE PREPARE stmt;

    OPEN curl;

    my_loop:LOOP

    FETCH curl INTO link_id_var,error_type_var,source_url_var;

    INSERT INTO errors (link_id_var,error_type,source_url) VALUES (link_id_var,errorz,source_url_var) ON DUPLICATE KEY UPDATE error_type=error,source_url=source_url_var;

    IF done=1 THEN
    LEAVE my_loop;
    END IF;
    END LOOP my_loop;
    CLOSE curl;

    DROP TEMPORARY TABLE IF EXISTS cursor_temp;
END$$ 
```

# asp.net-mvc - 如何在mvc中添加细节

> ID：12279680
> 
> 赞同：0
> 
> 时间：2012-09-05T10:44:46.997
> 
> 标签：asp.net-mvc

我想在数据库中添加用户详细信息。我创建新的用户名和密码，然后它将转到详细信息页面。在此详细信息页面中，详细信息将添加到数据库中。但我的问题是没有正确添加细节。

在我的控制器中

我的代码是

int 候选人 ID；

```
 [HttpPost, HandleErrorWithAjaxFilter]

       public ActionResult Add(FormCollection collection, HttpPostedFileBase resume)
    {
        if (LoggedInCandidate == null)
        {

            Candidate candidate = new Candidate();
            candidate.Name = collection["Name"];
            candidate.Email = collection["Email"];
            candidate.Address = collection["Address"];
            candidate.ContactNumber = collection["ContactNumber"];
            candidate.MobileNumber = collection["MobileNumber"];
            candidate.LicenseNumber = collection["LicenseNumber"];
             int candidateId = _repository.AddCandidate(candidate);
            }
            else
            {
            candidateId = LoggedInCandidate.Id;
            }

                _repository.Save(); 
```

在这里，它在数据库中创建 ID。但是详细信息不会添加到数据库中。它显示为空。谁能澄清我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:06:45.123

是否在同一个表单集合中的所有控件。如果它具有相同的formcollection，它必须工作。

其他方式尝试使用 Request["Name"]

# twitter-bootstrap - 在 twitter bootstrap carousel 插件的控件上添加播放/暂停按钮

> ID：12279682
> 
> 赞同：1
> 
> 时间：2012-09-05T10:44:50.053
> 
> 标签：twitter-bootstrap, carousel

如何在 twitter 引导轮播插件的控件上添加播放/暂停按钮。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T11:15:28.533

在你的按钮上使用`.carousel('cycle')`和`.carousel('pause')`方法，监听任何事件，像这样：

```
$("#playButton").click(function() {
    $("#theCarousel").carousel("cycle");
});
$("#pauseButton").click(function() {
    $("#theCarousel").carousel("pause");
}); 
```

# jquery - 滚动表格时闪烁

> ID：12279685
> 
> 赞同：1
> 
> 时间：2012-09-05T10:44:54.223
> 
> 标签：jquery, html

我试图做固定的滚动标题。在这个过程中，试图将 HEAD 表的位置固定固定。我做的。但是，当我滚动表格时， HEAD 表格正在闪烁。它在 Firefox 中不闪烁。我不想在 IE、Chrome 或任何浏览器中出现这种闪烁。任何帮助将不胜感激。

**代码：**

```
<style type="text/css">
th {
    background:#663300;
    color:#FFF;}
</style> 
```

**查询代码**

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#mainDiv").scroll(function() {
                var offSet = $("#mainDiv").offset().top;
                $("#headTable").offset({"top":offSet});
            });
    });
</script> 
```

**HTML 代码（整页代码）**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
th {
    background:#663300;
    color:#FFF;}
</style>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#mainDiv").scroll(function() {
                var offSet = $("#mainDiv").offset().top;
                $("#headTable").offset({"top":offSet});
            });
    });
</script>
</head>

<body>
<p style="height:100px;">&nbsp;</p>
<div id="mainDiv" style="border:1px solid red; width:400px; height:100px; overflow:auto; position:relative;">
    <table id="headTable" border="0" cellpadding="0" cellspacing="0" width="600" style="z-index:10;">
        <tr>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
            <th>asdf</th>
        </tr>
    </table>
    <table id="bodyTable" border="0" cellpadding="0" cellspacing="0" width="600" style="z-index:9;">
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
        <tr>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
            <td>asdf</td>
        </tr>
    </table>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:29:39.220

因为 onscroll 很慢，并且不能提供使其平滑所需的精度。无需使用 onscroll 设置标题，CSS 将标题表定位在可滚动 div 的顶部。

# c - C中的字符指针

> ID：12279690
> 
> 赞同：0
> 
> 时间：2012-09-05T10:45:05.293
> 
> 标签：c

```
#include<string.h>
#include<stdio.h>

int main()
{ 
  char* charPtr="see me";
  printf("%s\n", charPtr);
  printf("%d", charPtr);
  return 0;
} 
```

我不明白这一行： char* charPtr="see me";

内存是怎么分配的？

是否分配了 7 个字节的内存并将指针分配给第一个字节？和

我知道 sizeof(char*) 是 4bytes，它在这里有什么关系，它对内存分配有什么影响？

有人请帮助我。谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T10:47:26.237

***`charPtr`是一个指向******字符串字面量“see me”***的指针，它位于实现定义的内存区域中的某处。**不应**修改此字符串文字，任何这样做的尝试都会给您留下**未定义的行为**。

> **我知道`sizeof(char*)`是`4`字节，它在这里有什么关系，它对内存分配有什么影响？**

因为`charPtr`是一个指针，您不能使用它`sizeof()`来确定字符串文字的长度。如果你这样做，你得到的是指针而不是字符串占用的内存。`strlen()`如果需要获取字符串的长度，则需要使用。

```
 +-----+     +---+---+---+---+---+---+----
charPtr: |  *======> | s | e | e |   | m | e |\0 |
         +-----+     +---+---+---+---+---+---+---- 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T10:47:01.167

字符串文字被放置在内存中的“某处”，以便在程序启动时可用。

分配变量`charPtr`（通常在堆栈上），并且通常在 32 位平台上使用 32 位，或在 64 位平台上使用 64 位。在您的情况下，由于您声明了`sizeof (char *) is 4, the pointer will need`4 * CHAR_BIT` 位，这在几乎所有具有字节可寻址内存的现代计算机上都是 32 位。

指针被初始化为指向字符串的第一个字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T10:47:23.537

> 是否分配了 7 个字节的内存并将指针分配给第一个字节？

事实上，并非如此。*在内存的只读*部分的某处，分配了 7 个字符，包含`"see me\0"`，并且该变量指向它。

不同的是，如果你写

```
char charPtr[]="see me"; 
```

在这种情况下，将*在堆栈*上分配 7char（+ 一些填充）长数组，其中将复制文本“see me”。

> 内存是怎么分配的？

它由操作系统在启动应用程序时分配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T10:48:17.533

这`"see me"`是一个字符串文字，将在程序的整个生命周期中存在。没有在堆栈上分配内存，也没有在堆上为字符串文字分配内存。字符串文字将被编译成二进制文件，进入只读区域。

字符串文字中有 8 个字符`"see me"`：您看到的 7 个字符加上一个隐式空终止符。

初始化：

```
char* charPtr="see me"; 
```

给出`charPtr`字符串文字的地址。修改字符串文字是未定义的行为。

有关更多详细信息，请参阅 C99 标准的第*6.4.5 节字符串文字*。

* * *

注意：

```
printf("%d", charPtr); 
```

是技术上未定义的行为，因为`%d`期望一个`int`参数，但`charPtr`它是一个`char*`: 使用`%p`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T10:49:45.650

Normally the statement uses a const pointer.

```
const char* charPtr = "see me"; 
```

"see me" is allocated in read-only memory. `charPtr` contains the address of the 's'. The string is terminated by the null char.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T11:01:18.690

`char*`就像指向 string 的第一个索引的普通指针一样。

# php - 宝塔盒子图片上传问题

> ID：12279696
> 
> 赞同：3
> 
> 时间：2012-09-05T10:45:23.037
> 
> 标签：php, image, upload

我正在一个网站上做一个自学php的实验，我已经完成了大部分工作一段时间并且工作正常。我最近将主机从 Dreamhost 切换到 pagoda box 并遇到了一些明显的问题。

我在宝塔上有另一个使用 kohana 框架并设置为使用 mongo 数据库的站点，但是为了使 kohana 和 mongo 正常工作，缓存和日志目录必须是可写的，并且需要扩展。当我发现 Boxfile 时，我添加了 Boxfile 和目录，问题就解决了。

但是，在尝试将新图像上传到站点后，我从 dreamhost 切换到了 php 错误，提示该目录是只读的，因此我使用图像目录向该站点添加了一个 Boxfile，但它破坏了我在该站点上的所有图像除了我使用 cms 上传的那些。换句话说，之前在那里的所有图像都被破坏了，而我最近上传的那些图像都可以正常工作，但在 Boxfile 之前它是相反的。

抱歉，如果这有点令人困惑，这是一个奇怪的问题，除了 Pagoda Box 的 Boxfile 基础指南之外，我找不到太多帮助。如果需要，我可以详细说明。

这就是我现在在 boxfile 上的内容：

web1：#component 类型和编号 shared_writable_dirs：-图像

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T22:12:45.030

当您将目录指定为 Pagoda Box 上的共享可写目录时，它们会使用网络挂载将您的所有 Web 实例连接到单个可写文件系统。这些挂载实质上隐藏了存储库中这些目录中包含的所有文件。当您的应用程序尝试在这些目录中获取某些内容时，挂载会将请求路由到共享文件系统（其中当前没有您的图像）。

在仪表板的 Admin 选项卡下，[启用对共享可写存储的 SSH 访问](http://help.pagodabox.com/customer/portal/articles/175469-enabling-ssh-access-to-app-logs-and-shared-storage)，并将所有文件上传到正确的共享目录中。上传后，您的应用将能够找到它们。

# workflow-foundation-4 - 具有条件转换的长时间运行状态机持久性

> ID：12279698
> 
> 赞同：1
> 
> 时间：2012-09-05T10:45:27.417
> 
> 标签：workflow-foundation-4, workflow-foundation

我正在 WF4 中开发一个长时间运行的状态机，但我找不到在存在条件（无触发）转换的情况下保持状态的方法。

如果在一个状态上只有带有触发器的转换（实际上是一个将 CanInduceIdle 设置为 true 的 NativeActivity），到达该特定状态我创建书签，然后 WF 进入空闲状态，InstanceStore 会注意保持 WF 的状态。与其他条件一起发生无触发器转换会导致在不满足条件时重新安排所有转换，以防止 WF 进入空闲状态并被持久化。这是一个例子：

[示例 1](http://www.nizzy.com/cond1.gif)

当 WF 开始时（假设以对象 OBJ 作为 InArgument）它进入 State1，这里有 3 个转换：

1.  评估条件中 OBJ 的属性的条件转换
2.  带有称为 Trigger 的触发器的转换，它接收用于修改 WF 中处理的 OBJ 的对象 OBJ2
3.  使用户可以结束 WF 的过渡

如果在 Conditional 中评估的条件为真，则 WF 进入 State2，它可以进入空闲状态并在创建书签后保持不变。如果条件为假，则 State1 的所有转换都将重新安排（也是有条件的），并且 WF 不能被持久化。

我想出的唯一解决方案是放置一个先前的状态，其中没有任何动作来评估条件，然后将 Trigger 转换（可以修改我正在处理的对象）重新连接到 BlankState 以重新评估无触发转换的条件。

[示例 2](http://www.nizzy.com/cond2.gif)

有什么方法可以评估无触发转换中的条件并在条件为假时让 WF 空闲？我还尝试放置共享环回转换以拦截错误情况（使用！条件）并延迟空闲并保持 WF，但似乎在这种情况下，没有保存活动书签。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T19:44:40.207

我怀疑是否有一种方法可以让无触发转换导致持续空闲。您可以创建一个评估条件然后导致空闲的活动。

# nsis - NSIS - 验证单选按钮选择

> ID：12279706
> 
> 赞同：4
> 
> 时间：2012-09-05T10:45:45.410
> 
> 标签：nsis

我有一个非常简单的 NSIS 脚本，它允许用户选择他们想要安装的组件，但是如果他们没有选择任何东西，我需要一种说“请选择一个组件”的方式。

这是脚本：

```
# Based on the one-section example
# http://nsis.sourceforge.net/Examples/one-section.nsi

!include "sections.nsh"

Name "Humira & You"
OutFile "Humira & You - September 2012.exe"
RequestExecutionLevel user

Page components
Page instfiles

Section /o "Rheumatoid Arthritis" P1
    File "/oname=$pluginsdir\Setup.msi" "setupfiles\Humira and you - Rheumatoid Arthritis.msi"
SectionEnd

Section /o "Psoriatic Arthritis" P2
    File "/oname=$pluginsdir\Setup.msi" "setupfiles\Humira and you - Psoriatic Arthritis.msi"
SectionEnd

Section /o "Ankylosing Spondylitis" P3
    File "/oname=$pluginsdir\Setup.msi" "setupfiles\Humira and you - Ankylosing Spondylitis.msi"
SectionEnd

Section /o "Axial Spondyloarthritis" P4
    File "/oname=$pluginsdir\Setup.msi" "setupfiles\Humira and you - Axial Spondyloarthritis.msi"
SectionEnd

Section ; Hidden section that runs the show
    DetailPrint "Installing selected application..."
    SetDetailsPrint none
    ExecWait '"msiexec" /i "$pluginsdir\Setup.msi"'
    SetDetailsPrint lastused
SectionEnd

Function .onInit
    Initpluginsdir ; Make sure $pluginsdir exists
    StrCpy $1 ${P2} ;The default
FunctionEnd

Function .onSelChange
!insertmacro StartRadioButtons $1
    !insertmacro RadioButton ${P1}
    !insertmacro RadioButton ${P2}
    !insertmacro RadioButton ${P3}
    !insertmacro RadioButton ${P4}
!insertmacro EndRadioButtons
FunctionEnd 
```

我环顾四周，发现了这个例子，[http://nsis.sourceforge.net/Useful_InstallOptions_and_MUI_macros#Macro:_CHECKBOXCHECKER](http://nsis.sourceforge.net/Useful_InstallOptions_and_MUI_macros#Macro:_CHECKBOXCHECKER)，但对于我想要的来说，它似乎过于复杂。有没有办法在 NSIS 中说：

```
if ($1.selectedIndex > -1) {
   // continue
} else {
   MessageBox.Show("Please select");
} 
```

谢谢，格雷格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T12:14:27.223

您可以在离开组件页面时使用*回调函数*来检查是否选择了一个。

这是我在设置中使用的一段代码。我使用一个小宏将所选组件汇总在一个变量中。如果没有，则变量为空。我使用`PageEx`块将回调函数关联到组件页面（因为离开回调是第三个，我对前两个使用了一个虚拟函数）

代替

```
Page components 
```

经过

```
PageEx components
    PageCallbacks DummyFunc DummyFunc componentsLeave
PageExEnd 
```

保留您的`.onSelChange`回电以处理独家选择，然后将其添加到脚本的末尾：

```
!define SECTIONCOUNT 3 ; total -1
;SaveSections adds one bit to the given variable for each selected component
!macro SaveSections VAR
    StrCpy ${VAR} 0
    ${ForEach} $R0 ${SECTIONCOUNT} 0 - 1
        IntOp ${VAR} ${VAR} << 1
        ${If} ${SectionIsSelected} $R0
            ;${DEBUG} "Section $R0 checked"
            IntOp ${VAR} ${VAR} + 1
        ${EndIf}
    ${Next}
!macroend

Function DummyFunc
FunctionEnd

Function componentsLeave
    !insertmacro SaveSections $2
    ${if} $2 = 0
        MessageBox MB_OK|MB_ICONEXCLAMATION "Select something !" /sd IDOK
        Abort
    ${endif}
FunctionEnd 
```

# android - 如何在 WebView 中打开字符串（url）

> ID：12279709
> 
> 赞同：0
> 
> 时间：2012-09-05T10:45:49.670
> 
> 标签：android, android-webview

我想从 EditField 打开一个字符串，然后按下按钮，页面应该在我的 WebView 中打开。而不是我的网址默认打开网络浏览器

**XML:**

![在此处输入图像描述](../Images/c93949eae0099a43ae5938c0496b08f4.png)

**代码：**

```
public class WebAdress extends Activity {

WebView webView;
ImageButton buttonGo;
EditText textWWW;
String URL = new String();
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.www);

    buttonGo = (ImageButton) findViewById(R.id.imageButton1);
    textWWW  = (EditText) findViewById(R.id.editText1);
    webView = (WebView) findViewById(R.id.webView1);

    buttonGo.setOnClickListener(new OnClickListener() {

        @SuppressLint("SetJavaScriptEnabled")
        public void onClick(View v) {
            URL = "http://" + textWWW.getText().toString();
            WebSettings settings = webView.getSettings();
            settings.setJavaScriptEnabled(true);
            webView.loadUrl(URL);
            URL = null;
        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:49:46.110

Try with this.

```
// workaround so that the default browser doesn't take over
   webView.setWebViewClient(new MyWebViewClient());

 private class MyWebViewClient extends WebViewClient {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        } 
```

See this [Demo](http://marakana.com/forums/android/examples/58.html) .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T10:50:07.490

first check your menifest file to check internet permission and then try this code to load url in to webview. his code works for me for the same view.

```
webview = (WebView) findViewById(R.id.webview);
webview.getSettings().setJavaScriptEnabled(true);
webview.loadUrl(YOUR ANY URL);
webview.setWebViewClient(new webviewClient());

class webviewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
} 
```

Hope it will help you.

# sql - INSERT 触发器中 UPDATE 语句的狭窄条件

> ID：12279712
> 
> 赞同：0
> 
> 时间：2012-09-05T10:46:02.413
> 
> 标签：sql, sql-server-2008, triggers

我咬紧牙关，开始了解触发器以支持我的应用程序的要求。我已经创建了一个测试触发器（在测试表上），如何添加条件以便 UPDATE 语句只影响插入的那些记录

编辑 - 我在其他地方找到了一个链接到`inserted`表格的示例，它似乎有效，只是想与人们进行一次健全性检查，以确保没有任何明显错误，因为我不想把它搞砸！

```
ALTER TRIGGER ztblTest_INSERT 
   ON  we_ci_db.dbo.ztblTest
   AFTER INSERT
AS 
BEGIN
SET NOCOUNT ON;
UPDATE ztblTest
SET TestFieldB=we_ci_db.dbo.ztblTest.TestFieldA
WHERE TestID IN (SELECT DISTINCT TestID FROM inserted)

END
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:48:09.950

有一个用于插入/更新记录的临时表，称为`inserted`. 这应该与您正在更新的表具有相同的结构，因此您可以按照您需要的任何标准加入它（或在 where 子句中使用，正如您在问题中提到的那样）。

尽管与您的问题没有直接关系，因为您的触发器只关心插入，但还有一个用于在触发器期间使用的已删除记录的临时表，称为`deleted`.

[在这篇MSDN 文章](http://msdn.microsoft.com/en-us/library/ms191300.aspx)中有一些使用这些临时表的示例。

# css - 有一点 z-index 麻烦

> ID：12279715
> 
> 赞同：1
> 
> 时间：2012-09-05T10:46:20.440
> 
> 标签：css, layout, z-index, css-position

试图让这里显示的布局[http://www.reversl.net/zindex/](http://www.reversl.net/zindex/)看起来像附加![在此处输入图像描述](../Images/39366919512cade5f50bc8c22bd80387.png)到 clarfiy 的图像......徽标（这是标题的一部分）需要覆盖图像。图像需要与标题的底部完美对齐。我知道这可以使用 z-index 来实现，但我该怎么做呢？

```
header {
width: 100%;
height: 30px;
background: #222;
position: relative;
z-index: 3000;
}

#login {
width: 30%;
float: right;
text-align: right;
padding: .5em 0;
z-index: 5000;
}

#logo {
    width: 25%;
    float: left;
    padding: 3em 3em 1em 3em;
    text-align: center;
    z-index: 9999;
    background: #222;
}

.logo-text {
font: 2em/1em "lucida grande";
display: inline-block;
color: #777;
}  

#bg {
margin: -2em 0 0 0;
clear: both;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T10:58:06.480

```
#login {
    float: right;
    text-align: right;
    width: 30%;
    z-index: 5000;
}

#logo {
    background: none repeat scroll 0 0 #222222;
    float: left;
    padding: 3em 3em 1em;
    position: absolute;
    text-align: center;
    width: 25%;
    z-index: 9999;
}

.wrap-inner {
    margin: 0 auto;
    max-width: 1216px;
    position: relative;
    width: 95%;
} 
```

添加到`#logo - postion: absolute,`和用于 `.wrap-inner - position: relative;`

并且还删除了填充`#login`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T11:12:26.083

检查这个[小提琴](http://jsfiddle.net/SUVQK/)

我一直使用的是一个`position: absolute`里面的一个div `position: relative`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T10:54:34.363

不是关于`z-index`是关于`position`

```
.wrap-inner {
     margin: 0 auto;
     max-width: 1216px;
     position: absolute;
     width: 95%;
} 
```

[MDN解释绝对定位](https://developer.mozilla.org/en-US/docs/CSS/position)

> [...] 绝对定位的元素会**从流中取出，**因此在放置其他元素时**不会占用空间。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T11:22:54.143

这实际上不是 z-index 如何工作的特定解决方案，但在这个特定示例中，它可能是一种更好的方法：

您可以将图像松散为 html 元素，而是在 body 上设置背景图像，如下所示：

```
body{
  background-image: url(http://www.reversl.net/zindex/bk.jpg);

  /* Set top position on background image 30px down (header height value): */
  background-position: 0px 30px;

  /* Also in CSS3 it is possible to set size: */
  background-size: 100% Auto;
} 
```

# javascript - 如何在javascript中获取一组复选框值

> ID：12279716
> 
> 赞同：1
> 
> 时间：2012-09-05T10:46:22.180
> 
> 标签：javascript

我有一组具有相同名称的复选框，如下所示

```
one row has

      1.checkbox
      2.text box1
      3.text box2 
```

我想获取选中的复选框值以及存在复选框的行中的文本框值。

更新 ：

```
S.No    Header Name     Size    Display Order
1        checkbox        25          1
2        checkbox        25          2
3        checkbox        25          3
4        checkbox        25          4 
```

这就是我的 html 页面的样子，假设`s.no 1 selected means i want to get the SIZE and DISPLAY ORDER`值在文本框中。

这是我使用但甚至没有进入的代码：

```
function customiseReport()
        {
           alert("customiseReport : ");
           var oParent = document.getElementById('headername');
           var aElements = oParent.getElementsByTagName('input');
           for (var i = 0; i < aElements.length; i++) {
              if (aElements[i].type == 'checkbox' && aElements[i].checked==true) {

              }
           }
        } 
```

如何在javascript中做到这一点？

请帮忙。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:57:16.127

```
 <div id="checkbox_list">
        <input type="checkbox" class="checkboxes"/>
        <input type="checkbox" class="checkboxes"/>
        <input type="checkbox" class="checkboxes"/>
    </div>
    <button id="btn_clickme">Click me</button>
    <script type="text/javascript">
        $(function () {
            $('#btn_clickme').click(function () {
                alert('number of selected checkboxes: ' + $('.checkboxes:checked').size());
            });
        })
    </script> 
```

# javascript - 将 GET 参数添加到 q.io.xhr

> ID：12279720
> 
> 赞同：0
> 
> 时间：2012-09-05T10:46:39.623
> 
> 标签：javascript, qooxdoo

在 jQuery 中，我可以通过指定参数来附加 GET 参数`data`：

```
// sends request to http://example.com?foo=bar&hello=world
$.ajax({
    url: 'http://example.com',
    method: 'get',
    data: {foo: 'bar', hello: 'world'}
}) 
```

[但是我在qooxdoo 文档](http://manual.qooxdoo.org/2.0.1/pages/communication/request_io.html)中看不到这样的选项。当然我可以手动将参数编码成url，但是我不敢相信这么大的javascript框架不能做到这一点。

也许我错了，qooxdoo API 以某种方式接受 GET 参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:22:43.110

这目前不受支持，因为我们希望 XHR 实现非常接近规范 [1]，正如您在 API 文档 [2] 中看到的那样。但这可能是将来添加的一个很好的功能！

*   [1] [http://www.w3.org/TR/XMLHttpRequest/](http://www.w3.org/TR/XMLHttpRequest/)
*   [2] [http://demo.qooxdoo.org/devel/website-api/index.html#Xhr](http://demo.qooxdoo.org/devel/website-api/index.html#Xhr)

# java - Selenium_Webdriver：代理设置

> ID：12279723
> 
> 赞同：0
> 
> 时间：2012-09-05T10:46:53.500
> 
> 标签：java, selenium-webdriver

我是 selenium 和 webdriver 的新手，经过我得到以下代码来设置代理并启动浏览器：

```
String PROXY = "<<MY proxy>>";
org.openqa.selenium.Proxy proxy = new org.openqa.selenium.Proxy();
proxy.setHttpProxy(PROXY);
DesiredCapabilities cap = new DesiredCapabilities();
cap.setCapability(CapabilityType.PROXY, proxy);
WebDriver driver = new InternetExplorerDriver(cap);
driver.get("http://www.google.com");        
driver.quit(); 
```

遇到以下问题：

1）得到下面附加的错误
2）我可以从 IE 代理设置中看到我提供的代理字符串存在于“proxy.pac”文件中，但代理不起作用。即使我停止脚本并手动执行
3）当我将代理字符串直接放在浏览器中时，它在我提供凭据后工作正常。我应该提供凭据吗？你能指导一下如何做吗？

```
Sep 5, 2012 3:59:52 PM org.openqa.selenium.browserlaunchers.WindowsProxyManager backupRegistrySettings
INFO: Backing up registry settings...
Sep 5, 2012 3:59:53 PM org.openqa.selenium.browserlaunchers.WindowsProxyManager      changeRegistrySettings
INFO: Modifying registry settings...
The path to the driver executable must be set by the webdriver.ie.driver system property; for more information, see   http://code.google.com/p/selenium/wiki/InternetExplorerDriver. The latest version can be downloaded from http://code.google.com/p/selenium/downloads/list
Sep 5, 2012 3:59:54 PM org.openqa.selenium.ie.InternetExplorerDriverServer initializeLib
WARNING: This method of starting the IE driver is deprecated and will be removed in selenium 2.26\. Please download the IEDriverServer.exe from http://code.google.com/p/selenium/downloads/list and ensure that it is in your PATH.
Sep 5, 2012 3:59:58 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: I/O exception (org.apache.http.NoHttpResponseException) caught when processing request: The target server failed to respond
Sep 5, 2012 3:59:58 PM org.apache.http.impl.client.DefaultRequestDirector tryExecute
INFO: Retrying request
Picked up JAVA_TOOL_OPTIONS: -agentlib:jvmhook
Picked up _JAVA_OPTIONS: -Xrunjvmhook -Xbootclasspath/a:D:\bin\java_shared\classes;D:\bin\java_shared\classes\jasmine.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:13:05.113

你读过异常的内容吗？您的问题与代理无关。打开IE实例是个问题。您需要从 Selenium 的网站下载 IeDriverServer 并将其路径分配给 webdriver.ie.driver 属性。

您可以在其他主题中阅读有关它的更多信息：

[驱动程序可执行文件必须由 webdriver.ie.driver 系统属性设置](https://stackoverflow.com/questions/10995314/driver-executable-must-be-set-by-the-webdriver-ie-driver-system-property)

[如何设置 InternetExplorerDriver 以使其正常工作](https://stackoverflow.com/questions/11728016/how-do-i-setup-the-internetexplorerdriver-so-it-works)

# asp.net-mvc-3 - 将实体（表单）传递给控制器 操作的正确方法

> ID：12279734
> 
> 赞同：0
> 
> 时间：2012-09-05T10:47:15.313
> 
> 标签：asp.net-mvc-3, controller, action

我正在编写一个创建新用户的控制器操作。目前，控制器动作将***用户实体模型***作为参数。

***我想知道我是否应该在自己的视图模型***中从前端传递值，然后提取值并在后端创建实体？

```
public ActionResult AddUser(User user)
{
  context.Users.Add(user);
  context.SaveChanges();
} 
```

对比

```
public ActionResult AddUser(UserViewModel userViewModel)
{
  var user = new User(userViewModel.Name);
  context.User.Add(user);
  context.SaveChanges();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:55:57.310

学术方法是创建一个额外的视图模型类，它只公开您需要显示的数据或用户需要输入信息的字段，并将它们映射到您的域模型，如您的第二个示例所示。

但是对于小型应用程序或当您需要模型中的所有字段时，我认为将域模型对象传递给视图是绝对可以的。

另一个需要考虑的重要事项是安全/验证。当使用隐式 mvc 映射机制和完整的域模型时，不良用户可能会将值发送到您不希望存储在数据库中的控制器。使用单独的视图模型类涉及显式映射步骤，您必须明确地告诉系统视图模型中的哪个字段（= 用户输入的数据）要映射到域模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:56:56.157

与大多数事情一样，有多种方法可以做到这一点。最终在这种情况下，它通常归结为个人喜好。

当我做同样的事情时，我经常问自己传递给方法的内容是否真的有效`User`。我喜欢保持我的模型在内部防止无效状态，而不是依赖调用代码来保持模型的有效性。

因此，有时有些动作会接收*描述*模型的信息，但自身并不能完全*构建*模型。在这些情况下，我更喜欢使用视图模型。如果除了一致性之外没有其他原因，这通常会导致我全面使用视图模型。

如果我需要页面上多个模型的信息，它特别有用。拥有一个由我需要的信息组合而成的视图模型，而不是像`Tuple`两个模型中的一个，这对我来说感觉更干净。这也允许我向视图模型（计算字段、标志等）添加对视图有用但会污染业务对象的附加属性。（切换显示/隐藏某些表单元素、验证项等）

*通常，通过注意对象*( `User`) 和*数据结构*( )之间的区别，您可以找到自己对此类问题的偏好`UserViewModel`。在传统的面向对象意义上，`User`应该隐藏其数据成员并提供功能接口，而像平面数据结构一样`UserViewModel`会暴露其数据成员并且没有有意义的功能。

由于视图只是想绑定到数据成员，我通常使用平面视图模型而不是域对象。

# c - 2种形式的C作业有什么区别

> ID：12279735
> 
> 赞同：1
> 
> 时间：2012-09-05T10:47:20.460
> 
> 标签：c

我有 2 个表单，它们实际上输出了我不理解的不同结果

```
 int x = *(int*)&M[index] 
```

相比

```
 int x = (int)M[index] 
```

有人可以向我解释有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:52:40.963

如果 M 的数据类型不是 int[]，它们可能会有所不同，以您有一个包含 2 个（16 位）short、0x0123 和 0x4567 的数组的情况为例。内存布局（大端）将/可能是；

```
0x01 0x23 0x45 0x67 
```

在使用 M[0] 的后一种情况下，您将正确地将 short 分配给整数，因为您已读取 M[0] 并将其转换为整数 0x00000123

在第一种情况下，您将获取 M[0] 的地址并*假设内存中有一个 integer*，使用 32 位整数类型给出结果 0x01234567 （即将读取所有 4 个字节）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:52:39.753

前者将内存的字节解释`&M[index]`为好像 an`int`存储在那里并为您提供`int`.

后者获取 的数值`M[index]`并将其转换为`int`.

如果`M[index]`是 type `int`，显然没有区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T10:55:52.057

第二个将值转换为 int，这意味着它以有意义的方式将其转换（如果无法进行转换将导致错误），第一个从内存中的位置获取 sizeof(int) 个字节并表示它们作为一个整数，即使这可能没有任何意义。

例如：

```
double a[10];
a[5] = 281907.2389727;
int x = *(int*)&a[5];
int y = (int)a[5];
printf("%d %d", x, y); 
```

将输出（在我的机器/编译器上）：

```
-189447571 281907 
```

因为演员 (int) 将舍入双精度，而 * (int * ) 将拾取双精度的第一个 sizeof(int) 字节，并“假装”它是一个整数 - 这当然不会给出有意义的结果因为它们具有不同的大小和二进制表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T10:51:56.143

你不明白的部分是什么？

第一个表达式由两个表达式组成：一个指针解引用和一个计算为指针的表达式。`*(int *)`是第一部分，它引用必须跟随的指针，并且`&M[index]`简单地表示“索引的地址：数组M的第一个元素”。

在你的两个例子中，假设`M`是一个`int`数组，强制转换是完全不必要的，应该被删除。你也可以使用：

```
int x = *(&M[index]); 
```

这种形式的另一个好处是使两个部分更清晰；第一部分只是`*`括号外的运算符，第二部分是括号内的代码。

或者

```
int x = M[index]; 
```

后一种形式是首选的形式，它很清楚而且中肯。

# bazaar - bazaar 可以使用协议 https+webdav 记住密码吗？

> ID：12279741
> 
> 赞同：3
> 
> 时间：2012-09-05T10:47:43.430
> 
> 标签：bazaar

对于 https+webdav Bazaar 存储库上的任何推/拉操作，bzr 会询问我的密码。bazaar 可以使用 https+webdav 记住密码而不将其放入 repo URL（类似于[git](https://stackoverflow.com/questions/2233590/is-there-a-way-to-make-git-remember-the-password-for-webdav-remotes)）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:03:15.897

[authentication.conf](http://doc.bazaar.canonical.com/bzr.2.5/en/user-reference/authentication-help.html)（另请参阅[开发人员文档](http://doc.bazaar.canonical.com/developers/authentication-ring.html)）允许您为特定主机配置密码。

authentication.conf 看起来像这样：

```
[webdav.foo.fr]
scheme=https # https even if the repo URL is https+webdav
host=webdav.foo.fr
user=monperrus
password=sdfozaekjh 
```

密码也可以在 netrc 中指定：

```
[webdav.foo.fr]
scheme=https
host=webdav.foo.fr
user=monperrus
password_encoding=netrc 
```

# xml - VB 6 与 OneNote 的集成

> ID：12279744
> 
> 赞同：1
> 
> 时间：2012-09-05T10:47:57.937
> 
> 标签：xml, windows-7, vb6, onenote

我有一个与 OneNote 2010 交互的 vb6 应用程序。我正在测试 win XP 和 Win 7 中的集成。一些笔记本可以存在于 SkyDrive 上，并且在任何一个操作系统中都没有问题，它们通过浏览器打开。创建新笔记本时，它是在本地创建它。这在 XP 中工作正常，但在 win 7 中调用错误：“运行时错误”-2147213311（80042001）对象 IApplication 的 M3thod UPdateHierarchy 失败”我将此解释为 OneNote 错误，这意味着 XML 无效。生成的 XML 相同无论操作系统如何. XP 和 7 之间的 Microsoft XML 库有什么区别吗? 我无法确定 win 7 中的问题, 任何帮助将不胜感激. XML 和代码如下：

Quincy Mutual Insurance Co. 是我正在尝试创建的新笔记本。

赢XP：

```
<?xml version="1.0"?>
<one:Notebooks xmlns:one="http://schemas.microsoft.com/office/onenote/2010/onenote">
    <one:Notebook name="Personal" nickname="Personal" ID="{EB245BB4-63DA-404E-BB9F-447008E7BE52}{1}{B0}" path="https://d.docs.live.net/637f21528f6026bf/^.Documents/Personal/" lastModifiedTime="2012-09-04T20:12:40.000Z" color="#FFD869"/>
    <one:Notebook name="EMC Insurance Companies" nickname="EMC Insurance Companies" ID="{DBA316FE-5D42-445E-A356-7405E7DD9E12}{1}{B0}" path="https://d.docs.live.net/637f21528f6026bf/^.Documents/EMC Insurance Companies/" lastModifiedTime="2012-06-29T10:41:29.000Z" color="#9595AA"/>
    <one:Notebook name="Sentry Insurance Company" nickname="Sentry Insurance Company" ID="{8A4E905D-429E-491E-9FE5-856A10BE3CD7}{1}{B0}" path="D:\My Documents\OneNote Notebooks\Sentry Insurance Company" lastModifiedTime="2012-08-14T13:15:36.000Z" color="#BA7575"/>
    <one:Notebook name="Quincy Mutual Insurance Co" path="D:\My Documents\OneNote Notebooks\\Quincy Mutual Insurance Co"/>
</one:Notebooks> 
```

Windows 7的

```
<?xml version="1.0"?>
<one:Notebooks xmlns:one="http://schemas.microsoft.com/office/onenote/2010/onenote">
    <one:Notebook name="EMC Insurance Companies" nickname="EMC Insurance Companies" ID="{E68066FB-38A4-4190-B82F-0A9F322C29AF}{1}{B0}" path="https://d.docs.live.net/637f21528f6026bf/Documents/EMC Insurance Companies/" lastModifiedTime="2012-08-24T22:07:44.000Z" color="#9595AA"/>
    <one:UnfiledNotes ID="{C8E287E1-3EF2-464B-9ACB-F22B69A887A5}{1}{B0}"/>
    <one:Notebook name="Quincy Mutual Insurance Co" path="G:\Users\ROC\Documents\OneNote Notebooks\\Quincy Mutual Insurance Co"/>
</one:Notebooks> 
```

-

```
 Private Function GetClientOneNoteNotebookNode(oneNote As OneNote14.Application,      ClientName As String) As MSXML2.IXMLDOMNodeList
    ' Get the XML that represents the OneNote notebooks available.
    Dim notebookXml As String
    Dim doc As MSXML2.DOMDocument
    Dim elem As MSXML2.IXMLDOMElement
    Dim newNotebookPath As String
    Dim notebookNodeList As MSXML2.IXMLDOMNodeList
    Dim node As MSXML2.IXMLDOMNode
    Dim defaultNotebookFolder As String
    ' OneNote fills notebookXml with an XML document providing information
    ' about what OneNote notebooks are available.
    ' You want all the data and thus are providing an empty string
    ' for the bstrStartNodeID parameter.
    oneNote.GetHierarchy "", hsNotebooks, notebookXml, xs2010
    ' Use the MSXML Library to parse the XML.
    Set doc = New MSXML2.DOMDocument
    If doc.loadXML(notebookXml) Then
        Set notebookNodeList = doc.documentElement.selectNodes("//one:Notebook[@name='" &  ClientName & "']")
        If notebookNodeList.Length = 0 Then

            'Get the default location for the notebooks
            oneNote.GetSpecialLocation slDefaultNotebookFolder, defaultNotebookFolder
            newNotebookPath = defaultNotebookFolder + "\\" + ClientName

   '          Dim notebookId As String
   '          notebookId = doc.Attributes.getNamedItem("id").Text

            'Create new notebook for cleint
            Set elem = doc.createElement("one:Notebook")
            elem.setAttribute "name", ClientName
            elem.setAttribute "path", newNotebookPath
            ' add new elelement to the document tree
            doc.documentElement.appendChild elem

    '           Set notebookNodeList = doc.documentElement.selectNodes("//one:Notebook   [@name='Personal']")
'           elem.setAttribute "path", defaultNotebookFolder

            oneNote.UpdateHierarchy doc.XML
        End If
        ' Close notebook
   '      oneNote.CloseNotebook notebookId, False
   '     ' Open notebook
   '      oneNote.OpenHierarchy newNotebookPath, "", notebookId, cftNone
        Set GetClientOneNoteNotebookNode = notebookNodeList

    Else
        Set GetClientOneNoteNotebookNode = Nothing
    End If
    End Function 
```

有人有想法么？或者任何人都可以指出我的资源？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T06:19:56.977

我注意到 xp 的路径有一个空格，而 win7 的路径没有空格。这可能是罪魁祸首吗？此外，您的路径中没有双斜杠，您只有单斜杠。也许就是这样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:08:02.727

I think opening OneNote notebook in OneNote 2013 will change the schema, I was facing similar issue for my custom plugin

You can try following:

1.  Open the troublesome notebook in Desktop OneNote 2010

2.  Save the notebook as .onepkg archive file

3.  Unpack the .onepkg archive file somewhere on your PC

4.  Open the unpacked notebook in Desktop OneNote 2010

Ref: [http://www.mobilenoter.com/blog/post/2012/08/13/MobileNoter-SE-OneNote-2013-Preview-issues.aspx](http://www.mobilenoter.com/blog/post/2012/08/13/MobileNoter-SE-OneNote-2013-Preview-issues.aspx)

# ios - TableViewCell 更改框架中的删除按钮

> ID：12279745
> 
> 赞同：0
> 
> 时间：2012-09-05T10:47:58.117
> 
> 标签：ios, uitableview

我可以在编辑样式中的 tableviewcell 时更改删除按钮的位置，使用以下代码

```
- (void)didTransitionToState:(UITableViewCellStateMask)state
{
[super didTransitionToState:state];

if(state == UITableViewCellStateShowingDeleteConfirmationMask)
{

    for (UIView *v in [self subviews]) 
    {
        if([NSStringFromClass([v class]) isEqualToString:@"UITableViewCellDeleteConfirmationControl"])
        {    
            NSLog(@"find");
            CGRect f = v.frame;
            deleteView = v;
            NSLog(@"delete view %@",[deleteView description]);
            v.backgroundColor = [UIColor grayColor];

            v.frame = CGRectMake(200, 10, f.size.width, f.size.height);
            UIControl *vs = [[v subviews]objectAtIndex:0];
            CGRect fs = vs.frame;
            [UIView beginAnimations:nil context:nil];
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            [UIView setAnimationDuration:1];
            fs.origin.x -=20;
            vs.frame = fs;
            [UIView commitAnimations];

        }
    }

}

} 
```

使用这种方式我可以改变删除按钮的位置。但是每次删除按钮出现时，它都会从我的tableviewcell的右侧移动`animation`，最后它位于我指定的位置.....我只想在它出现之前设置按钮框架，但现在我有了不知道。我的英语很差...谢谢大家..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:13:20.080

有两条消息：`tableView:willBeginEditingRowAtIndexPath:`和`tableView:didEndEditingRowAtIndexPath:`。

我认为您可以使用`delegate`来适当地更新表格视图的外观。

# node.js - 是否有等效于将安装在 Windows 上的 node-png 模块？

> ID：12279759
> 
> 赞同：1
> 
> 时间：2012-09-05T10:48:38.623
> 
> 标签：node.js

[node-png](https://github.com/pkrumins/node-png)模块目前不能在 windows 上使用。（由于依赖 node-waf 我认为）。

**是否有可在 Windows 上安装 NPM 的具有等效功能（用于创建 png、异步）的模块？**

我见过[png-sync](https://npmjs.org/package/png-sync)，它说它与 Windows 兼容，但我想保持一切异步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:35:38.627

[node-pngjs](https://github.com/niegowski/node-pngjs)（用于 Node.js 的简单 PNG 编码器/解码器，没有本地依赖项）应该是 windows 兼容的，因为它没有本地依赖项。因为它是纯 JavaScript，所以它可能会慢一些。

不幸的是，我无法在 Windows 上对此进行测试。

# mercurial - HG PUSH : abort: error: An existing connection was forcibly closed by the remote host

> ID：12279767
> 
> 赞同：0
> 
> 时间：2012-09-05T10:49:06.860
> 
> 标签：mercurial, bitbucket

I am trying to push my changeset and after halting for a long time, I am getting this error message:

abort: error: An existing connection was forcibly closed by the remote host

I am using Apache on windows.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:52:32.313

你有没有在`[http_proxy]`某个地方配置过？

例如在您的`.hgrc`或乌龟中`mercurial.ini`？这一直是别人的[问题](https://stackoverflow.com/questions/6554921/mercurial-on-windows-abort-error-an-existing-connection-was-forcibly-closed-b)。

其他人报告了Mercurial 2.0 的[问题](https://bitbucket.org/tortoisehg/thg/issue/220/unable-to-connect-to-connect-to-mercurial)，但在 Mercurial 1 中运行良好。

# php - windows 7中的zend_pdf文档问题

> ID：12279768
> 
> 赞同：0
> 
> 时间：2012-09-05T10:49:21.430
> 
> 标签：php, zend-framework, magento-1.7, zend-pdf

我正在使用 zend_pdf 在 magento 1.7 中生成 pdf 并且我尝试过类似的东西

```
public function getpdf()
 {
 $pdf = new Zend_Pdf(); 
 $font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);
 $page = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
 $page->setFont($font, 24) ->drawText('Hello World', 72, 720);
 $pdf->pages[] = $page;
 $pdfString = $pdf->render();
header("Content-Disposition: attachment; filename=helloworld.pdf");
header("Content-type: application/x-pdf");
echo $pdfString;
 } 
```

现在的问题是，在 Windows 7 上生成 Pdf 时，它无法打开并抛出错误消息“Adobe 阅读器无法打开 helloworld.pdf，因为它不是受支持的文件类型或文件已损坏”。我注意到由于 pdf 文档中存在 html 内容而发生此错误。我将 pdf 文档作为链接发送给您[https://dl.dropbox.com/u/45895040/helloworld.pdf](https://dl.dropbox.com/u/45895040/helloworld.pdf)。

如果 pdf 是在 Mac OS X 中生成的，它会在那里成功打开

为了更好地理解，只需尝试按照[Zend_pdf 文档中提到的步骤在 magento 中抛出错误，因为存在 html 内容](https://stackoverflow.com/questions/12214990/zend-pdf-document-throws-error-in-magento-due-to-presence-of-html-contents/12217962#comment16382418_12217962)。

任何人都可以指导我如何正确设置标题，以便可以在任何浏览器上打开生成的 pdf，而不管任何操作系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T02:29:01.763

在 echo 语句之前添加以下代码行：

```
 ob_end_clean(); 
```

这应该够了吧。

# asp.net - Linq 中的关系生成错误

> ID：12279778
> 
> 赞同：0
> 
> 时间：2012-09-05T10:49:50.947
> 
> 标签：asp.net, sql-server, visual-studio-2010, linq-to-entities

我有一个表 EmpInf 字段

```
EmpId
EmpName
Salary
DeptNumber 
```

和部门领域

```
DeptNo
DeptName 
```

关系

```
Dept.DeptNo= EmpInf.DeptNumber 
```

在创建 linq 查询以提取 EmpName 和它工作的部门时，我尝试如下编写 Linq

```
var obj1 = from c in obj.EmpInfs join
                    d in obj.Dept1 on c.DeptNumber equals d.DeptNo into s
                   where c.EmpName == "m"
                   select new { EmpName=c.EmpName, DeptName=s};

        GridView1.DataSource = obj1;
        GridView1.DataBind(); 
```

并尝试了这个

```
 var obj1 = from c in obj.EmpInfs 
                   from d in obj.Dept1
                   where c.EmpName == "m"
                   select new { EmpName=c.EmpName, DeptName=d.DeptName};

        GridView1.DataSource = obj1;
        GridView1.DataBind(); 
```

在这两个代码中，它都没有给出期望的输出。感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:01:19.480

```
var obj1 = from c in obj.EmpInfs join
                   d in obj.Dept1 on c.DeptNumber equals d.DeptNo
                   where c.EmpName == "m"
                   select new { EmpName=c.EmpName, DeptName=d.DeptName}; 
```

第一次尝试的问题是“s”是“部门”类型的对象，而不是部门名称。第二次尝试的问题是它正在进行交叉连接，

# java - How to see every thread use how many resources(cpu,memory,io) in JVM

> ID：12279792
> 
> 赞同：0
> 
> 时间：2012-09-05T10:50:24.987
> 
> 标签：java, multithreading, jvm

I'm using resin,sometime the load very high,so I particularly want to see inner the JVM process all of the threads state,how many cpu or memory or disckIO every thread using. Thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:11:42.730

如果使用 Oracle/Sun 提供的 HotSpot 启动`jvisualvm`并将其附加到 Resin。Java VisualVM 允许您在线程级别查看应用程序正在执行的操作。

请参阅此链接： [Java VisualVM 监控应用程序线程](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/threads.html)

# iphone - 选择行时如何编辑标签？

> ID：12279794
> 
> 赞同：0
> 
> 时间：2012-09-05T10:50:42.647
> 
> 标签：iphone, ios, ios5, ios4

当用户选择一行时，我想编辑相应的标签。

我的 1stView 的每一行都有 3 个标签。我想编辑导航到另一个视图的那些标签的文本，我需要编辑这些标签文本。

我的标签文本之一是从第二个视图上声明的 UItextfield 获取的，而其他 2 个标签文本是从第二个视图上的 uibuttons 标题获取的。

现在我想在我的第二个视图中显示标签文本以编辑这三个字段的文本？

为了更清楚，我会解释

我的第一个视图中有一个表格，当我单击添加按钮时，我正在加载另一个视图（第二个视图），其中包含 1 个文本字段和 2 个按钮。我将这三个字段的文本设置为我的第一个视图，我的每个 tableviewcell 在每一行中创建了 3 个标签。

我如何编辑这 3 个字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:18:41.323

我建议您在 Class1 和 Class2 中都**可以访问所需的字符串。**因此，当您想从 Class2 获取文本时，您可以将这些字符串保存在您的 stringVariable 中，从而也可以将值传递给 Class1..

问题编辑后：

我将再次建议您在 class1 中使用 3 个字符串变量并使其在 class 2 中可访问...当您在编辑模式下进入 class 2/添加新模式时，您可以将文本字段和按钮标题的文本保存在 3 个字符串中和可以在 Class1 中访问相同的内容并将其显示在 Class1 的表格单元格中。希望我现在更清楚

# php - 如何在 PHP 上的 PhpStorm 中创建正确的 git 钩子？

> ID：12279795
> 
> 赞同：2
> 
> 时间：2012-09-05T10:50:42.663
> 
> 标签：php, git, phpstorm, githooks

如果使用以下代码将 git hook 添加到预提交，则会收到错误“错误！” 在 PHPStorm 中。

```
#!/usr/bin/sh
echo "Error!"
exit 1 
```

但是如果在 PHP 上实现这一点，您将无法在 PHPStorm 中收到此错误消息。

```
#!/usr/bin/php
<?php
echo "Error!";
exit(1); 
```

PHPStorm 返回不可理解的错误：

> 错误：无法生成 .git/hooks/pre-commit：没有这样的文件或目录

任何想法如何解决这个问题？

PS 在命令提示符下一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:32:08.910

如果`php.exe`在您的 中`%PATH%`，您可以要求 shebang 查找它：

```
#! /usr/bin/env php.exe 
```

# open-source - 如果一个人的目标是成为一名优秀的程序员，他应该更喜欢什么，为开源项目做贡献或解决 codechef.com 问题？

> ID：12279799
> 
> 赞同：1
> 
> 时间：2012-09-05T10:50:59.140
> 
> 标签：open-source

我是一名热衷于提高我的编程技能的大学生。我有两条路要走：

1.  为开源项目做贡献
2.  在 codechef.com 上解决难题

我应该关注哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T00:39:27.303

一个好的程序员是关心他或她的 ACE——*准确度*、*清晰度*、*有效性*的人。

*   一个好的程序员关心**代码的准确性**。最简单的部分是编写“快乐路径”，因为当我们设计和编写代码时，这始终是我们脑海中最重要的部分。但是，当出现意外输入和所提供的所选实现的边缘情况行为时，可能存在的异常路径呢？花时间思考所有的代码路径，投入时间进行测试，提交代码供同行评审，并愿意接受他人的建议并在适当的时候进行更改，这表明了谨慎。

*   一个好的程序员关心**代码的清晰性**。代码是否结构良好、表达能力强、是否遵循开闭原则、单一职责原则，执行机器一点都不在乎。但是，这些对于下一个程序员或您自己来说都是非常重要的，他们必须在以后阅读和理解您的代码才能修复错误、修改行为或添加功能。

*   一个好的程序员关心**代码的有效性**。它是否满足强加给它的所有约束？不仅是性能和空间限制，还有最终用户可以接受的方面，以及您的客户、老板、家人对开发和测试时间表的要求。专业软件开发不是一项精确的限制任务，例如“计算 NxN 矩阵的行列式”。它有很多限制和要求，优秀的程序员会注意所有这些，并且会尽力管理它们，尤其是在没有足够时间完全满足所有限制的情况下。

所以！为了回答您的直接问题，开源或代码厨师，我想说参与开源项目为练习成为一名优秀的软件开发人员提供了更多的机会。所以去选择一个你关心的开源项目，然后 ACE 吧！

# facebook - How to get top 30 most liked urls on my website (FQL)

> ID：12279801
> 
> 赞同：0
> 
> 时间：2012-09-05T10:51:11.940
> 
> 标签：facebook, facebook-like, facebook-fql

I'm upgrading my webshop and it involves doing some changes in my product url's (because of SEO optimizing). Since there doesn't seem to be anyway of migrating likes from one url to another and "tricking" the likes to the old url with 301 redirecting is out of the question, i was trying to get a list of the top 20-30 liked urls so i could then loop the result to find the amount of likes, shares etc.

I have already built a small script that finds the like, share etc count for a certain url, but i am unable to find out what the most liked url's are!

Thanks a bunch!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:53:06.433

这是可能的，但并不容易。您需要像这样构建一个 FQL 查询：

```
SELECT url, normalized_url, share_count, like_count, comment_count, total_count
FROM link_stat 
WHERE url IN ("example.com/url1", "example.com/url2", ... "example.com/urln")
ORDER BY like_count DESC 
```

# dll - how to fix incorrect reference count of DLLs from Wix installer

> ID：12279802
> 
> 赞同：0
> 
> 时间：2012-09-05T10:51:15.020
> 
> 标签：dll, wix, reference-counting

I'm using WIX installer and trying to delete the installation of a program. The problem is that I have an incorrect reference count .

I'll try to be more specific- I have 2 computers on the first one when I install and then uninstall - everything is being deleted (when I enter the register editor - the dlls are deleted) on the second computer - some of the dlls stay! even when I uninstall the program. when I look at the register editor- their reference count is (1) ..

how can I fix it? I can change it but It's only for this computer... is there a way to change that? what can \need I add to Wix if I wan't it to update me that not all dlls were deleted? how can I do that?

thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:51:41.407

就在您卸载该 dll 的引用计数之前，它必须为 1。

是的。您可以将引用计数更改为 1，您将解决该问题。在注册表编辑器中使用修改。

如果您希望卸载更新您并非所有 dll 都已删除，您需要扫描注册表以获取该特定 dll 的引用计数。有不止一种方法可以做到这一点。我建议您编写一个单独的实用程序，您可以在安装后运行它并输出特定 dll 的引用计数（如果存在）。

# c# - 如何将多个列表项合并为一项？

> ID：12279803
> 
> 赞同：2
> 
> 时间：2012-09-05T10:51:16.213
> 
> 标签：c#, .net

我创建了一个名为 Impacts 的类：

```
public class Impacts {
    public Impacts(string _Source, int _Number, string _Target) { 
        this.Source = _Source; 
        this.Number = _Number; 
        this.Target = _Target; 
    }
} 
```

并创建了此类的列表：

```
List<Impacts> ListOfImpacts = new List<Impacts>(); 
```

然后，我将项目添加到创建的列表中：

```
ListOfImpacts.Add(new Impacts("a" , 1 , "b")); //record 1 
ListOfImpacts.Add(new Impacts("c" , 1 , "d")); //record 2 
ListOfImpacts.Add(new Impacts("d" , 1 , "a")); //record 3 
ListOfImpacts.Add(new Impacts("d" , 1 , "a")); //record 4 
ListOfImpacts.Add(new Impacts("d" , 1 , "a")); //record 5 
```

我想合并记录 3 和记录 4 和记录 5，因为它们具有相同的“源”=“d”和相同的“目标”=“a”，所以我可以：

```
new Impacts("d", 3 , "a"); // 3 is the number of iterations of this record 
```

并删除三个重复的记录。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T10:58:00.030

```
var newList = ListOfImpacts.GroupBy(g => new {g.Source, g.Target})
            .Select(g => new Impacts(g.Key.Source, g.Count(), g.Key.Target))
            .ToList(); 
```

现场示例：[http ://rextester.com/XOIYM52525](http://rextester.com/XOIYM52525)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T10:59:38.553

```
 var newList = ListOfImpacts
            .GroupBy(i => new { i.Source, i.Target })
            .Select(i => new Impacts(i.Key.Source, i.Sum(x => x.Number), i.Key.Target))
            .ToList(); 
```

# jquery - JQuery Rotate Add Delay

> ID：12279804
> 
> 赞同：1
> 
> 时间：2012-09-05T10:51:17.080
> 
> 标签：jquery, rotation, delay

I'm trying to add a delay to a rotation, although it appears to be having no effect.

The taps should spin at the same time as the image slides in.

URL: [http://dev.rapweb.co.uk/jln/index.htm](http://dev.rapweb.co.uk/jln/index.htm)

Any help would be much appreciated.

```
var rotation = function() {
    $("#coldTap").delay(1000).rotate({
        angle: 0,
        animateTo: -720,
        easing: function(x, t, b, c, d) {
            // t: current time, b: begInnIng value,
            // c: change In value, d: duration
            return c * (t / d) + b;
        }
    });
    $("#hotTap").delay(1000).rotate({
        angle: 0,
        animateTo: -720,
        easing: function(x, t, b, c, d) {
            // t: current time, b: begInnIng value,
            // c: change In value, d: duration
            return c * (t / d) + b;
        }
    });
}

$(document).ready(function() {
    $("#plumbingServices").animate({
        opacity: "1.0"
    }, "fast") <!-- Plumbing Services Fade In -->
    $("#plumbingServices").ready(rotation)
    $("#plumbingServices").delay(1000).animate({
        right: "0"
    }, "slow", function() { <!-- Plumbing Services Slide In -->
        $("#plumbingServices").ready(carouselLoop)
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:28:05.920

我已经设法通过在调用旋转的函数上设置超时来解决这个问题。`setTimeout("$('#plumbingServices').ready(rotation)", 1000);`感谢任何花时间看这个的人。

# function - 自定义模块未定义函数

> ID：12279807
> 
> 赞同：0
> 
> 时间：2012-09-05T10:51:27.853
> 
> 标签：function, module, include, drupal-7, undefined

我正在为我的雇主开发一个自定义模块。**my_module.module**填充太大且难以管理，因此我决定将相关代码分成单独的.inc**文件**。

然后我将这些文件包含在以下代码中：

```
function my_module_init(){
    module_load_include('inc', 'my_module', 'questionnaire_nodetypes');
    module_load_include('inc', 'my_module', 'questionnaire_config');
    module_load_include('inc', 'my_module', 'email_friends');
} 
```

我的代码继续工作了一段时间，但我突然收到一个**未定义的函数**错误，该函数肯定存在于**questions_config.inc**中。其他包含的 .inc 文件中的其他已确认和现有功能很快就会出现其他类似错误。

有人建议我运行**update.php**脚本，但这并没有解决问题。事实上，我得到了更多**未定义的函数**错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:01:27.760

无需将这些行放入钩子中，只需将它们直接转储到模块文件的顶部（我已经这样做了多年，它从未引起过问题）。

`hook_init()`不会为缓存页面调用，因此可以想象，当系统的另一个（非缓存）部分依赖于这些函数的存在时，您的文件不会被包含在内。

# javascript - document.images 未在 chrome 或 firefox 上加载，但已在 IE 上加载

> ID：12279810
> 
> 赞同：4
> 
> 时间：2012-09-05T10:51:33.023
> 
> 标签：javascript, html, dom, cross-browser

我有一个`<a>`带有图像标签的锚标签`<img>`，我在该锚标签上调用 javascript 函数，如下所示：

```
<a href="javascript: foo();"><img ...></a>
<a href="javascript: foo();"><img ...></a>
<a href="javascript: foo();"><img ...></a> 
```

在`foo()`函数内部，我曾经[`document.images`](https://developer.mozilla.org/en-US/docs/DOM/document.images)检索包含 3 张图像的数组。它在 IE 中运行良好，但在 chrome 和 firefox 上不起作用！

`document.images.length`在 IE 上返回 3，在 Chrome 和 Firefox 上返回 0。你有什么解决这个问题的建议吗？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T10:54:22.070

不[`document.getElementsByTagName('img')`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)适合你吗？

它不返回一个数组，而是一个节点列表。如果你需要一个数组：

```
 var imgNodes = document.getElementsByTagName('img');
 var images = [].slice.call(imgNodes); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T06:04:42.770

您的`<img>`标签位于框架中的不同文档中。

首先在主文档中解析正确的框架对象。如果您有框架的名称，请执行以下操作：

```
var frame = document.querySelector("frame[name='NAME']"); 
```

如果你不命名你的框架，那么你将不得不在由返回的框架数组上索引框架`document.getElementsByTagName('frame');`

要访问文档中的所有图像，您可以执行以下操作：

```
frame.contentDocument.images 
```

或者

```
frame.contentDocument.getElementsByTagName("img") 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T11:00:16.423

或者使用 jQuery。

```
$('img').each(function(){
        // do something with $(this).
}); 
```

# c++ - 当没有任何类型有任何共同代码时使用模板

> ID：12279819
> 
> 赞同：0
> 
> 时间：2012-09-05T10:51:54.923
> 
> 标签：c++

我有以下课程：

```
class ValueSetter: public IValueSetter
{
public:
    explicit ValueSetter(CContainer* container)
        : _container(container)
    {
    }

    virtual void operator()(const int value, const int index) const
    {
        _container->values[index].value.i = value;
    }

    virtual void operator()(const double value, const int index) const
    {
        _container->values[index].value.d = value;
    }

    virtual void operator()(const std::string& value, const int index) const
    {
        ...
        _container->values[index].value.s = _strdup(value.c_str());
    }

private:
    CContainer* _container;
}; 
```

此类在 CContainer 上运行，CContainer 将其数据存储在联合缓冲区中。我将 ValueSetter 传递给不了解 CContainer 的 Container 类。事实上，在未来，我希望 CContainer（我通过 C API 收到）会消失，而这些值会被组织在 std::vector 或 std::list 中。我的容器的接口不应该因此而改变，也不应该关心数据是如何存储在内存中的。

考虑到这一点，我宁愿大致遵循以下原则：

```
class IntValueSetter: public IIntValueSetter
{
public:
    explicit IntValueSetter(Container* container)
        : _container(container)
    {
    }

    virtual void operator()(const int value, const int index) const
    {
        _container->values[index].value.i = value;
    }
private:
    CContainer_3* _container;
} 
```

或者：

```
class IntValueSetter: public IIntValueSetter
{
public:
    explicit IntValueSetter(std::vector<int> values)
        : _values(values)
    {
    }

    ... 
} 
```

但我需要能够按如下方式使用它们：

```
ValueSetter<int> valueSetter; 
```

代替

```
IntValueSetter valueSetter; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:06:29.143

做显而易见的事。不需要模板专业化与另一个专业化或原始模板有任何共同之处。所以：

```
class IIntValueSetter {
};

template <class Ty> class ValueSetter; // declared but not defined

template <>
class ValueSetter<int> : public IIntValueSetter {
    // whatever
};

ValueSetter<int> vsi; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:03:08.967

如果我猜对了，您只需要编写一个类模板：

```
template <typename T>
class ValueSetter
{
public:
    explicit ValueSetter(std::vector<T> values): _values(values)
    {
    }
    virtual void operator()(const T value, const int index) const
    {
        _container->values[index].value.i = value;
    }
// etc.
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:03:16.633

我想我正在寻找这样的东西。我只在下面实现了 int，但每种类型都会有自己的接口类和实现类。我很想听听您对这种方法的评论！

```
template<typename V>
class IValueSetter
{
public:
};

template<>
class IValueSetter<std::string> 
{
public:
    virtual void operator()(const std::string& value, int index) const = 0;
};

template<typename V>
class ValueSetter
{
};

template<>
class ValueSetter<std::string>: public IValueSetter<std::string>
{
public:
    explicit ValueSetter2(CContainer* container)
        : _container(container)
    {
    }

    void operator()(const std::string& value, int index) const
    {
        _container->values[index].value.s = _strdup(value.c_str());
    }

private:
    CContainer* _container;
};

template<>
class NewValueSetter<std::string>: public IValueSetter<std::string>
{
public:
    explicit NewValueSetter(std::shared_ptr<std::list<std::string>> values)
        : _values(values)
    {
    }

    void operator()(const std::string& value, int index) const
    {
        (*values)[index] = value;
    }

private:
    std::shared_ptr<std::list<std::string>> _values;
}; 
```

# java - JDBC：使用 PreparedStatement 创建表，SQL 语法错误与否？

> ID：12279821
> 
> 赞同：3
> 
> 时间：2012-09-05T10:51:55.553
> 
> 标签：java, sql, jdbc, prepared-statement

我在尝试以动态方式使用 PreparedStatement 创建新表时遇到了一些困难。我正在尝试添加未知数量的列及其各自的类型和大小。我不断收到 SQL 语法错误，但我怀疑这里可能不是这种情况。

使用的变量：

*   **con** = 连接对象
*   **colNames** = String[] 包含列名（“person”、“email”等）
*   **colTypes** = String[] 包含列类型（“varchar”、“int”等）
*   **colSizes** = String[] 包含列大小（“100”、“11”等）

应该是不言自明的。

```
con.setAutoCommit(false);
String sql = "? ?(?),";
PreparedStatement ps = con.prepareStatement(sql);
ps.addBatch("create table " + tablename + "( ");

for (int i = 0; i < colNames.length; i++){

    if (!(i == colNames.length-1)) {
        ps.setString(1, colNames[i]);
        ps.setString(2, colTypes[i]);
        ps.setString(3, colSizes[i]);

    } else {
        String format = "%s %s(%s)";
        String lastLine = String.format(format, colNames[i], colTypes[i], colSizes[i]);
        ps.addBatch(lastLine);

    }
}

ps.addBatch(");");
ps.executeBatch(); 
```

注意：是的，这是家庭作业。我不想要任何死的赠品，而是关于我以何种方式滥用某些功能的指针，我怀疑这一点。

最好的问候， 克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:59:08.163

您需要将完整的 SQL 语句提供给 addBatch。它不是构造动态 SQL 语句的工具。它是运行多个语句时提高性能的工具。你在这里不需要它。

您在这里也不需要 PreparedStatement，因为您不会有绑定变量（即列数据而不是列名），也不会重复运行相同的 SQL（但也不会受到伤害）。`setString`和朋友不为列名或表名工作，只为数据工作。

StringBuilder 是构造带有可变部分的字符串的好工具。

# ruby-on-rails - Cancan 2.0，如何限制用户更新用户模型上的某些属性

> ID：12279822
> 
> 赞同：0
> 
> 时间：2012-09-05T10:51:55.673
> 
> 标签：ruby-on-rails, ruby, devise, cancan

已经回答了一个[类似的问题](https://stackoverflow.com/questions/5921591/cancan-limiting-a-users-ability-to-set-certain-model-attributes-based-on-their)，但似乎有点过时，因为它不包括新的 CanCan 2.0 版本。我需要防止某些字段（在本例中为`:active`和`:limited`）被用户更新，并且只能由管理员编辑。

```
# ability.rb
if user.persisted?
  cannot :update, :users, [:active, :limited]

  elsif user.admin?
    can :access, :all
  end 
```

但是，此代码不会阻止用户编辑这些字段。

我还将其添加`enable_authorization`到了新`class RegistrationsController < Devise::RegistrationsController`的`devise_for :users, path: 'users', controller: 'registrations'`路线上，但这似乎也没有成功。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-05T15:09:58.897

我认为应该是用户而不是：用户？

`# ability.rb ... cannot :update, User, [:active, :limited]`

# java - 在 java GUI 温度猜测/转换游戏的数组列表中存储来自 jtextfield 的输入时出现问题

> ID：12279825
> 
> 赞同：0
> 
> 时间：2012-09-05T10:52:03.740
> 
> 标签：java, input, arraylist, jtextfield

学习互联网的人。我目前正在为一年级的编程课做作业，老实说，编程并不是我最大的技能。因此，对于这个小问题的任何帮助将不胜感激。

该程序本质上是一个数字猜谜游戏，它将猜测存储和排序到一个数组列表中，一旦你猜对了，就会显示平均值、最低猜测、正确猜测的索引数组、平均值和转换后的华氏温度. 它在 9 到 40 之间，因为作业指定了 40 和我学生证上的最高数字。当我可以简单地将它们归为一个时，不必要的类数量的原因也是分配规范错误。

我遇到的麻烦是将温度猜测（无论正确与否）存储在数组列表中。我相信我已经在我的构造函数中正确初始化了数组列表，但我不确定如何或在哪里捕获来自 jTextField 的猜测。一旦我弄清楚这一点，我就可以合并我为显示结果编写的其他方法并完成这项任务。

再次，我为我的一般新手道歉，任何帮助将不胜感激。

```
package TemperatureGuessApp;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Random;
import javax.swing.*;

public class TemperatureFrame extends JFrame {

public JFrame mainFrame;
public JLabel prompt1, prompt2;
public JTextField userInput;
public JLabel comment;
public JButton restart;
public int randomTemperature;
public int min = 9;
public int max = 40;
public int guessTemperature;
public int sumTemperature;
public double avgTemperature;
public int lowestTemperature;
public int convertedTemperature;
public int indexTemperature;
public Color background;

public TemperatureFrame() {

    super("Temperature Guess/Conversion Application");
    prompt1 = new JLabel("Randomly generated temperature is between 9 and 40.");
    prompt2 = new JLabel("Write temperature (your guess) or -1 (for exit) and press enter key:");
    userInput = new JTextField(5);
    userInput.addActionListener(new GuessHandler());
    ArrayList<Integer> guesses = new ArrayList<>();
    comment = new JLabel("The results will be shown here.");
    restart = new JButton("Start Again - Generate A New Temperature");
    restart.addActionListener(
            new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    userInput.setText("");
                    comment.setText("The results will be shown here.");
                    RandomTemperature();
                    userInput.setEditable(true);
                }
            });

    setLayout(new FlowLayout());
    background = Color.LIGHT_GRAY;

    add(prompt1);
    add(prompt2);
    add(userInput);
    add(comment);
    add(restart);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(500, 150);
    setLocationRelativeTo(null);
    setVisible(true);
    setResizable(false);

    RandomTemperature();
    ConvertTemperature();
}

public void RandomTemperature() {
    Random random = new Random();
    randomTemperature = random.nextInt(max - min) + min;
}
public void SortTemperature() {   
}
public void FindLowestTemperature() {    
}
public void FindAverageTemperature() {    
}
public void FindIndexTemperature() {    
}
public void ConvertTemperature() {
    convertedTemperature = randomTemperature * 9 / 5 + 32;
}

class GuessHandler implements ActionListener {

    @ Override
    public void actionPerformed(ActionEvent e) {
        {

            guessTemperature = Integer.parseInt(userInput.getText());
            {   

                if (guessTemperature > randomTemperature) {
                    comment.setText("Temperature guessed is higher than the random temperature.");
                    userInput.setText("");
                    userInput.setEditable(true);
                }

                if (guessTemperature < randomTemperature) {
                    comment.setText("Temperature guessed is lower than the random temperature.");
                    userInput.setText("");
                    userInput.setEditable(true);
                }

                if (guessTemperature == randomTemperature) {
                    comment.setText("Temperature guessed is equal to the random temperature.");
                    JOptionPane.showMessageDialog(null, "Temperature guessed is equal to the random temperature.\n\n1\. Lowest temperature is:" + lowestTemperature + "\n2\. Average temperature is:" + avgTemperature + "\n3\. Array index of correctly guessed temperture is:" + indexTemperature + "\n4\. Temperature in Farenheit is:" + convertedTemperature + "\n\nThank you for playing!");
                } 
                else if (guessTemperature == -1) {
                    System.exit(0);
                }
            }
        }
    }
}    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:02:08.263

**1.**首先创建一个`Pojo`来存储玩家的所有数据...

**例如**

```
public class Player{

    int prompt1;
    int prompt2;
    int userInput;
    String comment;
    int restart;

  } 
```

**2.**然后将它们存储在`ArrayList`......

**//////////////////////已编辑//////////////////// ////////**

```
public class Player{

        int prompt1;
        int prompt2;
        int userInput;
        String comment;
        int restart;

    public Player(int p1, int p2, int usInput, String c, int res){

       this.prompt1 = p1;
       this.prompt2 = p2;
       this.userInput = usInput;
       this.comment = c;
       this.restart = res ;

    } 
```

}

```
 public class Test{

   ArrayList<Player> arList = new ArrayList<Player>();

   arList(new Player(p1, p2, usInput, c,  res));  // These Arguments u must declare and initialize....

  } 
```

**///////////////////已编辑////////////////////// /**

好的，可以在**不使用 POJO的情况下将**`int` **guessTemperature**添加到`ArrayList`from中，可以通过这种方式完成。`JTextField`

 **```
ArrayList<Integer> arList = new ArrayList<Integer>();

String str = jText.getText().toString();

int gTemp = Integer.parseInt(str);

arList.add(gTemp); 
```

现在假设你有这个 Player 有 4 个属性，比如 TemperatureInput、Name、Age、Score 等等......并且有 N 个玩家正在玩这个游戏......那么你应该使用 Pojo 和 Collection（即......列表，设置，地图）

```
public class Player{

    int guessTemp;
    String name;
    int age;
    long score;

    public Player(int gTemp, int name, int age, int score){

      this.guessTemp = gTemp;
      this.name = name;
      this.age = age;
      this.score = score;
    }

   public int getGuessTemp() {
        return guessTemp;
    }
    public void setGuessTemp(int guessTemp) {
        this.guessTemp = guessTemp;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }
    public long getScore() {
        return score;
    }
    public void setScore(long score) {
        this.score = score;
    }

} 
```

现在......从另一个班级应该是这样的......

```
public class Test{

public static void main(String[] args){

        ArrayList<Player> pList = new ArrayList<Player>();

       String name = jName.getText().toString();
       long score = Long.parseLong(jScore.getText().toString());
       int age =  Integer.parseInt(jAge.getText().toString());
       int gTemp = Integer.parseInt(jTemp.getText().toString());

       pList.add(new Player(gTemp, name, age, score));

   }

} 
```**

# ios - NSString 子串处理

> ID：12279829
> 
> 赞同：0
> 
> 时间：2012-09-05T10:52:07.363
> 
> 标签：ios, nsstring, substring

我有一个具有以下值的字符串：

> [{ProjLead=irshad, ProjName=irshad proj, ProjectId=365}]

我想分别获取 ProjLead、ProjName 和 ProjectId 的值。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:04:12.937

您可以结合[NSString 类](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)中的一些方法。

像这样的东西：

```
NSString *string = @"[{ProjLead=irshad, ProjName=irshad proj, ProjectId=365}]";
NSString *parametersString = [string substringWithRange:NSMakeRange(2, string.length - 4)];
NSArray *parameters = [parametersString componentsSeparatedByString: @", "];
NSMutableArray *values = [NSMutableArray array];
for (NSString *parameter in parameters) {
    [values addObject:[[parameter componentsSeparatedByString:@"="] objectAtIndex:1]];
} 
```

`values`数组是你想要的。

# iphone - 在 Mapview 中添加带有按下位置坐标的 Alertview

> ID：12279830
> 
> 赞同：1
> 
> 时间：2012-09-05T10:52:08.393
> 
> 标签：iphone, cocoa-touch, mkmapview

我有**MapView** .. 我将此添加为 ViewController 的视图的子视图。我在 ViewDidLoad 中有以下代码：

```
[self.view addSubview:mapView];
    UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(mapLongPress:)]; 
    longPressGesture.minimumPressDuration = 2; 
    [mapView addGestureRecognizer:longPressGesture];
    [longPressGesture release]; 
```

和 ，

```
- (void)mapLongPress:(UILongPressGestureRecognizer *)gestureRecognizer{
    NSLog(@"Gesture");
    if(gestureRecognizer.state == UIGestureRecognizerStateBegan){
        CGPoint touchLocation = [gestureRecognizer locationInView:mapView];

        CLLocationCoordinate2D coordinate;
        coordinate = [mapView convertPoint:touchLocation toCoordinateFromView:mapView]; 
```

这些是我从 StackOverFlow 获得的……但它不起作用……我还需要在这方面做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:30:23.273

尝试添加`[self.view addSubview:mapView];`后`[mapView addGestureRecognizer:longPressGesture];`

```
UILongPressGestureRecognizer *longPressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(mapLongPress:)]; 
longPressGesture.minimumPressDuration = 2; 
longPressGesture.delegate = self;
[self.mapView addGestureRecognizer:longPressGesture];
[self.view addSubview:mapView];
[longPressGesture release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:04:55.040

只需将**UIGestureRecognizerDelegate**添加到 ViewController 并执行我给出的上述代码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:09:03.163

试试这个：

```
 UILongPressGestureRecognizer *lpgr = [[UILongPressGestureRecognizer alloc]
                                      initWithTarget:self action:@selector(mapLongPress:)];
lpgr.minimumPressDuration = 2.0;

[self.mapView addGestureRecognizer:lpgr]; 
```

这是使用 ARC，所以我不确定你现在是否应该释放手势。尝试不释放它，然后尝试释放它。看看会不会影响手势。

# opencv - Windows 中的 VideoCapture OpenCV 2.4.2 错误

> ID：12279833
> 
> 赞同：6
> 
> 时间：2012-09-05T10:52:15.830
> 
> 标签：opencv

我在 windows XP 32 位下使用带有 OpenCV 2.4.2 的 VideoCapture 类时遇到问题。它不会打开任何文件或相机，修复它很痛苦。我使用的是 Visual Studio 2010，但我也尝试了 QTcreator 中的代码，结果相同。

测试代码如下：

```
#include "opencv/cv.h"
#include "opencv/highgui.h"
#include <iostream>
#include <string> 
#include <iomanip> 
#include <sstream> 

using namespace cv;
using namespace std;

int main()
{
    const char* videoPath = "C:/video/";
    string videoName = string(videoPath) + "avi.avi";
    VideoCapture cap(videoName);

    if(!cap.isOpened()) 
    {
        std::cout<<"Fail"<<std::endl;
        return -3;
    }
    return 0; 
} 
```

输出始终为“-3”。Qt Creator 显示警告：打开文件时出错 (../../modules/highgui/src/cap_ffmpeg_impl.hpp:361)

我调试了它，问题出现在第一行：

```
CvCapture* cvCreateFileCapture_FFMPEG_proxy(const char * filename)
{
    CvCapture_FFMPEG_proxy* result = new CvCapture_FFMPEG_proxy;
    if( result->open( filename ))
        return result;
    delete result;
#if defined WIN32 || defined _WIN32
    return cvCreateFileCapture_VFW(filename);
#else
    return 0;
#endif
} 
```

在 cap_ffmpeg.cpp 内部文件中。

我已经在雪豹下的 mac 中测试了相同的代码，它可以工作。这里没有惊喜，因为它一定是图书馆的问题。我已经使用 c 函数 cvCapture 轻松快速地打开了具有相同路径路径的 avi 文件。我得到了 mi 调试文件中包含的所有 'C:\opencv\opencv\build\x86\vc10\bin' 的 dll。我得到了 tbb.dll 和所有的 'C:\opencv\opencv\3rdparty\ffmpeg' 内容。

这让我发疯，所以任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T12:43:51.267

`opencv_***.dll`就我而言，在删除`C:\Windows\System32`. 所以，我只是通过路径使用 dll 文件，例如`"%PATH%;C: \Program Files \OpenCV2.4.2\build\x86\vc10/bin"`. 请尝试一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-31T08:26:48.053

我也遇到了这个问题，并通过更正函数的路径来解决它：

```
VideoCapture cap(videoName); 
```

**如果videoName**的AVI文件不存在，会报错：

```
(../../modules/highgui/src/cap_ffmpeg_impl.hpp:XXX) 
```

其中 XXX 代表行号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-13T14:48:25.993

在 Windows 8（64 位）、opencv 2.4.10 下运行时，我遇到了与 open 方法相同的问题。IDE 在 x86 中运行。

我发现在发布配置中运行应用程序解决了这个问题。

偶然发现了答案，因为我对 imread 有同样的问题。此线程中提出了问题。 [imread 在 Opencv 中不起作用](https://stackoverflow.com/questions/7417637/imread-not-working-in-opencv)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T12:21:23.923

有关 mp4 文件，请参阅我在下面找到的修复程序。我在使用 OpenCV 2.4.9 的 Windows 7 上遇到了同样的问题。我正在为 opencv 使用 java 包装器。

Matthias Krings 为此做了很多研究。看到[这个](http://code.opencv.org/issues/3422)。显然，这是基于视频文件类型的问题。使用 .avi 文件，它似乎适用于很多人。不幸的是，他设置 OPENCV_DIR 的解决方案对我不起作用。但他在错误列表中的评论给了我解决问题的提示。

你必须做两件事：

1.  设置`java.library.path`为包含目录`{opencv\install\dir}opencv-2.4.9\build\x86\vc10\bin`。`-D`您可以使用java 命令行上的选项设置变量： `java -Djava.library.path=PATH_TO_YOUR_DLL ...`. 还要从您的环境中获取此变量，使用`System.getProperty(...)`并在调用之前打印它`loadLibrary()`，以验证路径设置是否有效。
2.  在您的 java 类中，使用`System.loadLibrary("opencv_ffmpeg249");`. 该`loadLibrary()`函数应从`static block`java 中的 a 中调用。
3.  `opencv_ffmpeg249.dll`在`java.library.path`我们设置的 中有一个名为的文件。
4.  这也适用于 ubuntu，适用于`.so`文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-22T18:49:33.250

在指向输入视频的正确位置后，我也遇到了同样的问题并解决了。

# java - SSH 使用 jschexception verify false 有时会失败

> ID：12279836
> 
> 赞同：39
> 
> 时间：2012-09-05T10:52:28.860
> 
> 标签：java, ssh, jsch

要求是从一台服务器ssh到多台服务器并执行一个命令。

当我这样做时，我经常（但并非总是）在尝试从一台服务器 ssh 到另一台服务器时收到此异常。这可能是什么原因，如何解决？任何帮助都可能很棒。提前致谢！

```
jcraft.jsch.JSchException: verify: false 
     at jcraft.jsch.Session.connect(Session.java:309) 
     at jcraft.jsch.Session.connect(Session.java:162) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-29T18:10:16.220

jsch 0.1.50 已经发布，它解决了这个问题。

jsch的下载页面是[http://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T03:16:44.957

我在 Windows 64 位上使用 Java 1.7.0_07 以及 Ant 1.7.1 和 jsch-0.1.44.jar 时遇到了同样的问题。还使用 Ant 1.9.0-alpha 和 jsch-0.1.49。[我已经在 sourceforge 的 jsch 跟踪器](https://sourceforge.net/tracker/?func=detail&aid=3605486&group_id=64920&atid=509122)上报告了这个问题。

有人使用 Ivy、jsch 和 Java 1.7 [IVY-1374进行了类似的错误报告](https://issues.apache.org/jira/browse/IVY-1374)

gradle 的用户也报告了与 gradle-ssh-plugin 问题 11 相同的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-20T21:48:58.307

@antoine 提到的修复实际上是在 0.1.51 而不是 0.1.50，我猜[jsch changlog](http://www.jcraft.com/jsch/ChangeLog)令人困惑的措辞是罪魁祸首：“自 0.1.50 版以来的变化”意味着 0.1.51

以下页面“[JSch-users] ANNOUNCE：JSch 0.1.51”应该更清楚 [https://sourceforge.net/p/jsch/mailman/message/32115165/](https://sourceforge.net/p/jsch/mailman/message/32115165/)

它说

> JSch 0.1.51 已经发布。它可在
> [http://sourceforge.net/projects/jsch/files/jsch/0.1.51/jsch-0.1.51.zip/download](http://sourceforge.net/projects/jsch/files/jsch/0.1.51/jsch-0.1.51.zip/download)获得 ，它的 md5sum 是 89d0ff6d36040622da0a482e51d87725 你可以在 jar 文件格式中获取它的字节码
> [http://sourceforge.net/projects/jsch/files/jsch.jar/0.1.51/jsch-0.1.51.jar/download](http://sourceforge.net/projects/jsch/files/jsch.jar/0.1.51/jsch-0.1.51.jar/download) 其 md5sum 为 de3a2b0d03295f167fea1904939443cf
> 
> 自 0.1.50 版以来的更改： - 错误修复：“验证：假”的可重复性。固定的。数十万个连接导致了该异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-08T21:26:58.283

问题仍然存在，其他2个答案是正确的。

1) 0.1.49 之前的版本存在一个bug 0.1.49 版本理论上已经修复[这里](http://www.jcraft.com/jsch/ChangeLog)是更改日志

2）在java 1.7和jsch之间存在交互，并且在这种情况下出现错误

它一直发生在我身上。我相信这是因为某些插件没有更新它们的依赖项，并且它们的 jsch 低于 0.1.50 作为包含。

IE：ssh 凭证插件 [https://github.com/jenkinsci/ssh-credentials-plugin](https://github.com/jenkinsci/ssh-credentials-plugin)

我添加了一个拉取请求来更改依赖项，但他们还没有回答。

# ruby-on-rails-3 - Rails，在 postgres 数据库中查找重复条目

> ID：12279837
> 
> 赞同：0
> 
> 时间：2012-09-05T10:52:29.697
> 
> 标签：ruby-on-rails-3, postgresql

我有以下课程：

```
class Product < ActiveRecord::Base
  has_one :total_purchase
end

class TotalPurchase < ActiveRecord::Base
  belongs_to :product
end 
```

我的表格有以下列（为了清楚起见，我省略了大部分）：

```
Product
id | title | end_date | price | discount

TotalPurchase
id | product_id | amount 
```

许多产品具有相同的 products.title、products.end_date 和 totalpurchases.amount，我想找出特定日期之间的所有产品。我目前正在使用以下 sql 查询来识别它们：

```
Product.find_by_sql("select products.title, products.end_date, total_purchases.amount from products left join total_purchases on products.id = total_purchases.product_id where products.end_date > '2012-08-26 23:00:00' and productss.end_date < '2012-09-02 22:59:59' group by products.end_date, products.title, total_purchases.amount having count(*) > 1") 
```

我如何将以上内容编写为 rails 查询而不是使用 find_by_sql？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:08:39.283

```
Product.select('products.end_date, products.title, total_purchases.amount').
  joins('left join total_purchases on products.id = total_purchases.product_id').
  where('products.end_date > :start_date 
    and products.end_date < :end_date',
    :start_date => '2012-08-26 23:00:00', 
    :end_date => '2012-09-02 22:59:59').
  group('products.end_date, products.title, total_purchases.amount').
  having('count(*) > 1') 
```

# java - 下拉值

> ID：12279845
> 
> 赞同：0
> 
> 时间：2012-09-05T10:52:41.650
> 
> 标签：java, javascript, jsp

我有以下代码在下拉列表中显示数据库中的值列表。该查询还选择 Jt_JOB_Description。我想根据在文本区域中选择的 JT_JOB_TITLE 显示 Jt_JOB_Description。帮助请。

```
<select  name="jTitle" id="jTitle" style="background-color: #D8D8D8">
<%

Statement stt = conn.createStatement();
ResultSet rstt = stt.executeQuery("SELECT JT_JOB_TITLE, JT_JOB_DESCRIPTION FROM     uap.dbo.UAP_JOB_TITLE ORDER BY JT_JOB_TITLE");
 while (rstt.next()) { 
%>
 <option value="<%=rstt.getString("JT_JOB_TITLE")%>">        <%=rstt.getString("JT_JOB_TITLE")%>
 </option>
<%
 }
 stt.close();
 rstt.close();
 %>
 </select>

   <textarea class="styled" rows="5" cols="12" name="jDesc" id="jDesc" ></textarea> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:07:52.993

修改您的代码，如下所示

```
<select  name="jTitle" id="jTitle" style="background-color: #D8D8D8" onchange="setText(this)">
<%
String str=""; 
Statement stt = conn.createStatement();
ResultSet rstt = stt.executeQuery("SELECT JT_JOB_TITLE, JT_JOB_DESCRIPTION FROM uap.dbo.UAP_JOB_TITLE ORDER BY JT_JOB_TITLE");
while (rstt.next()) { 
str+=rstt.getString(1)+"@"+rstt.getString(2)+"#"; 
%>
<option value="<%=rstt.getString("JT_JOB_TITLE")%>"><%=rstt.getString("JT_JOB_TITLE")%>
</option>
<%
}
stt.close();
rstt.close();
%>
</select>

<input type="hidden" name="txtHidStr" id="txtHidStr" value="<%=str %>" /> 

<textarea class="styled" rows="5" cols="12" name="jDesc" id="jDesc" ></textarea> 
```

并编写以下javascript函数

```
function setText(element){
var arr_main=document.getElementById("txtHidStr").value.split("#");
for(i=0;i<arr_main.length;i++)
{
     arr_val=arr_main[i].split("@");
     if(arr_val[0]==element.value)
     {
        document.getElementById("jDesc").innerHTML=arr_val[1];
        break;
     }
}
} 
```

# django - 如何在 Django 中使用模型名称字符串获取模型对象

> ID：12279846
> 
> 赞同：16
> 
> 时间：2012-09-05T10:52:40.357
> 
> 标签：django, django-views

说明：

我有一个通用功能

```
def gen(model_name,model_type): 
      objects = model_name.objects.all()
      for object in objects:
          object.model_type = Null      (Or some activity)
          object.save() 
```

我怎样才能实现上述目标？可能吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-05T14:41:49.023

我会使用`get_model`：

```
from django.db.models import get_model

mymodel = get_model('some_app', 'SomeModel') 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-07-15T09:24:09.510

从 Django 1.7 开始，`django.db.models.loading` [不推荐使用](https://github.com/django/django/blob/1.7/django/db/models/loading.py)（将在 1.9 中删除）以支持新的应用程序加载系统。[1.7 文档为我们提供](https://docs.djangoproject.com/en/1.7/ref/applications/#django.apps.AppConfig.get_model)了以下内容：

```
$ python manage.py shell
Python 2.7.6 (default, Mar  5 2014, 10:59:47)
>>> from django.apps import apps
>>> User = apps.get_model(app_label='auth', model_name='User')
>>> print User
<class 'django.contrib.auth.models.User'>
>>> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T10:58:16.940

[如果您传入“ app_label.model_name](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#module-django.contrib.contenttypes) ”，则可以使用内容类型，例如

```
from django.contrib.contenttypes.models import ContentType

model_type = ContentType.objects.get(app_label=app_label, model=model_name)
objects = model_type.model_class().objects.all() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-18T19:37:29.750

Django 1.5 的完整答案是：

```
from django.db.models.loading import AppCache

app_cache = AppCache()
model_class = app_cache.get_model(*'myapp.MyModel'.split('.',1)) 
```

# android - Ti.media.showCamera 在 iPhone 上抛出“未定义”错误，但在 Android 上运行良好

> ID：12279848
> 
> 赞同：1
> 
> 时间：2012-09-05T10:52:43.487
> 
> 标签：android, ios, titanium

我正在使用 Appaccelerator 为 iOS 和 Android 构建应用程序。它在 Android 上运行良好，但每次我尝试在 iOS 设备上打开它时都会引发“未定义”错误。奇怪的是，它没有显示正确的错误消息。

一开始我以为是构建问题，所以我清理了项目，然后重新构建它，但事实并非如此。我也手动删除了构建文件夹，并重新构建，但仍然没有改善。

这是代码：

```
Rf.media.photo = {

key: 'photo',
  title: 'Photo',
  extension: 'jpg',
  type: 'image/jpeg',
  create: function(created) {

Ti.media.showCamera({
  animated: false,
  saveToPhotoGallery: false,
  showControls: true,
  success: function() { 

var name = Rf.util.timestamp() + '.' + Rf.media.photo.extension;
Rf.write_to_new_file(name, media_item.media, function(file) {
created(file);

 });
      },
      error:function(error)
        {
        // create alert
        var a = Titanium.UI.createAlertDialog({title:'Camera'});

        // set message
        if (error.code == Titanium.Media.NO_CAMERA)
        {
            a.setMessage('Please run this test on device');
        }
        else
        {
            a.setMessage('Unexpected error: ' + error.code);
        }

        // show alert
        a.show();
    },
    cancel:function()
    {

    },
});

 }
}; 
```

当人们点击“照片”按钮时，我收到此错误消息。

```
[WARN] Exception in event callback. {
line = 1;
message = "'undefined' is not an object (evaluating 'Ti.Media.showCamera')";
name = TypeError;
sourceId = 52935904;
sourceURL = "file://localhost/var/mobile/Applications/F8398B04-78C4-4A45-BEE0-30EE4BFEBB00/App.app/photo.js"; 
```

有没有办法“初始化” Ti.Media.showCamera(); 方法，所以它不会发现自己“未定义”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:40:01.020

`Ti.media.showCamera({...`应该`Ti.Media.showCamera({...`

此外，在成功回调中，没有参数来接收返回的媒体数据。你有`media_item.media`你的`write_to_new_file()`函数，所以你的成功回调可能应该是：`success: function(media_item) {...`

# php - foreach 循环在第一次迭代后停止

> ID：12279850
> 
> 赞同：0
> 
> 时间：2012-09-05T10:52:54.303
> 
> 标签：php, foreach

尝试从 xml 文件中提取 id，将其传递给 api 查询，并将结果加载到 dom 文档中。事情是我的`foreach`循环只返回第一次迭代，然后似乎停止了。

为什么不回去取下一个`PROGRAM_ID`？

```
//load results of first api call into simplexml - print_r here gives me a big array with all the expected rows in it
$progsitecontent = simplexml_load_file($progsiteapi);

//set which nodes to step through to reach required information
$totalprogsitecontent = $progsitecontent->matrix->rows->row;

//for each instance of a program id in this simplexml file:
foreach($totalprogsitecontent->PROGRAM_ID as $progid)
{

    //...substitute the program id into the api call
    $programdetails = $progdetailsapi_start.$progid.$progdetailsapi_end;
    $complete_program_details = simplexml_load_file($programdetails);

    //now for each instance of a programs info, load into a DOM document and carry out the below actions - from here down already works in another script so im sure the problem has to be above this point 

    $prog_info = $complete_program_details->matrix->rows->row;

    //create the top line container tag
    $row = $doc->createElement ("programInformation");

    //create the container tag
    $progID = $doc->createElement("programId");
    //fill it with the information you want
    $progID->appendChild ( $doc->createTextNode ( $prog_info->PROGRAM_ID ) );
    //attach this information to the row
    $row->appendChild($progID);

    //repeat for each element you want to include
    $progName = $doc->createElement("programName");
    $progName->appendChild ( $doc->createTextNode ( $prog_info->PROGRAM_NAME ) );
    $row->appendChild($progName);

    $progURLs = $doc->createElement("programUrls");
    $progURLs->appendChild ( $doc->createTextNode ( $prog_info->PROGRAM_URLS ) );
    $row->appendChild($progURLs);

    $progLogo = $doc->createElement("programLogo");
    $progLogo->appendChild ( $doc->createTextNode ( $prog_info->MERCHANT_LOGO ) );
    $row->appendChild($progLogo);

    $r->appendChild ($row);

}

echo $doc->saveXML(); 
```

随意评论其中的任何内容是如何编写的。我还处于“看一看”的阶段:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:11:39.380

在没有看到完整结果的情况下不能说太多`$totalprogsitecontent`，但我认为它应该看起来像这样：

```
foreach($totalprogsitecontent as $progid)
{
...
} 
```

因为`$totalprogsitecontent->PROGRAM_ID`已经是一个单一的值 - 所以你正在迭代这个元素而不是数组。

此外，您`$progid`在 for 循环中是小写的，但您指的是`$progID`-- PHP 区分大小写。

* * *

查看您的 XML 代码后，它应该是这样的。

```
foreach($progsitecontent->matrix->rows->row as $row){
     $progid = $row['PROGRAM_ID'];
     $affid = $row['AFFILIATE_ID'];
} 
```

# android - 如何从联系人列表中获取某些手机号码？

> ID：12279852
> 
> 赞同：-5
> 
> 时间：2012-09-05T10:53:01.510
> 
> 标签：android, contacts

我有一个必须显示我的电话联系人列表的应用程序。但是我怎样才能得到一些手机号码（我想要的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:55:50.887

对于您的示例 6XXXXXXX 类型的号码，这里是一个仅获取该类型号码的查询。

```
ContentResolver cr = getContentResolver();
Cursor contacts = cr.query(ContactsContract.Contacts.CONTENT_URI, null, 
                        ContactsContract.Contacts.DISPLAY_NAME + " LIKE '"
                        + " 6 " + "%' ", null, "UPPER("
                        + ContactsContract.Contacts.DISPLAY_NAME + ") ASC"); 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T10:59:29.577

为我工作：

```
 Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
        while (phones.moveToNext())
        {

        String Number=phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

        } 
```

向应用清单文件添加权限：

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

# ruby-on-rails - 如何在 Windows 中将 PostgreSQL /bin 目录放在我的路径上？

> ID：12279856
> 
> 赞同：1
> 
> 时间：2012-09-05T10:53:04.903
> 
> 标签：ruby-on-rails, ruby, postgresql

我猜我有一个相当简单的问题。我正在开发一个 Ruby on Rails 应用程序。感谢 Heroku，我正在尝试切换到 PostgreSQL。

在我的 database.yml 文件中，它指出：

> ```
>  Install PostgreSQL and put its /bin directory on your path. 
> ```

我的问题是如何将 PostgreSQL 的 /bin 目录放在我的路径上？我究竟要修改哪个文件以及如何修改？

我想这是我的问题，因为当我运行“rails db”命令时，我得到：

“找不到数据库客户端：psql,psql.exe。检查您的 $PATH 并重试。”

感谢大家！罗宾。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:09:42.827

通过环境变量将目录附加到 system `PATH`（不是 user `PATH`），使用分号将其与上一个条目分开。

您可以从控制面板 -> 系统 -> 高级 -> 环境变量中找到它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T06:11:13.883

遇到同样的问题并尝试了[这里提到的解决方案](http://www.linuxtopia.org/online_books/database_guides/Practical_PostgreSQL_database/c4890_001.htm)

```
[user@host user]$ 
psql

bash: psql: command not found
[user@host user]$ 
echo $PATH

/bin:/usr/bin:/usr/local/bin:/usr/bin/X11:/usr/X11R6/bin
[user@host user]$ 
export PATH=$PATH:/usr/local/pgsql/bin

[user@host user]$ 
psql testdb 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:07:31.727

您需要先安装 Postgres，然后将路径添加到系统属性 > 环境变量 > 在系统变量部分中，您将看到 PATH 变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T04:41:06.173

这是我向 PATH 环境变量添加新位置的首选方式（在现代基于 Red-Hat 的系统上）：

```
echo 'export PATH="/usr/pgsql-9.3/bin:$PATH"' | sudo tee /etc/profile.d/pgsql.sh 
```

*   *PATH 是一个冒号`:`分隔的目录列表，按顺序搜索被调用的程序。*
*   *下的配置文件配置`/etc`对所有用户都是持久的（但需要`source`他们的活动 shell 才能生效）。*
*   *[当从存储库](http://yum.postgresql.org/)安装时，版本号会附加到 PostgreSQL 目录中。*

# python - 按书写顺序列出一个类的所有函数

> ID：12279858
> 
> 赞同：0
> 
> 时间：2012-09-05T10:53:12.010
> 
> 标签：python, list, class, function

我怎样才能拥有一个包含类的所有功能但不按字母顺序重新排序的列表？因为实际上我有：

```
[ foo.__dict__.get(a) for a in dir(foo) if isinstance(foo.__dict__.get(a), types.FunctionType) ] 
```

它返回给我一个列表但重新排序......我也尝试过使用装饰器：

```
def decorator ():
    listing = []
    def wrapped (func):
        listing.append(func)
        return func
    wrapped.listing = listing
    return wrapped 
```

很好，但是，我需要在我的类的每个函数上添加一个装饰器......也许你有一些技巧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T11:01:15.333

请参阅[检查](http://docs.python.org/library/inspect.html)模块文档。函数对象具有 `func_code`属性，并且（根据文档-尚未对其进行测试）`func_code`应该具有`co_firstlineno`属性，该属性将是源文件中第一行代码的编号。

所以请尝试类似：

```
def getListOfClassFunctions(foo):
    '''foo - a class object'''
    funcList = [ foo.__dict__.get(a) for a in dir(foo) if isinstance(foo.__dict__.get(a), types.FunctionType)]
    funcList = filter(lambda x: x.func_code.co_filename == foo.__module__, funcList)  # Thanks Martijn Pieters for a hint!
    return sorted(key=lambda x: x.func_code.co_firstlineno, funcList) 
```

**编辑**以将整个片段包装在一个函数中，并仅返回与类在同一模块中定义的函数。

# c++ - 使用 C++ 正则表达式库中的 regex_search

> ID：12279869
> 
> 赞同：2
> 
> 时间：2012-09-05T10:54:14.240
> 
> 标签：c++, regex, c++11

regex_search 函数的行为并不像预期的那样。

```
#include <iostream>
#include <regex>
#include <string>

using namespace std;

int main()
{
    string str = "Hello world";
    const regex rx("Hello");
    cout << regex_search(str.begin(), str.end(), rx) << endl;
    return 0;
} 
```

输出是

```
0 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-05T13:42:02.617

正如对该问题的评论所指出的，C++ 标准库的旧实现尚不支持 C++11 中的所有功能。当然，[libc++](http://libcxx.llvm.org/)是一个例外，因为它最初是专门为 C++11 构建的。

根据[此错误报告](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=53631)`<regex>`，仅在 GCC 4.9 版中实现了对 libstdc++ 的支持。[您可以在libstdc++ 状态页面](https://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)上查看当前状态。

可以确认，您的示例适用于 GCC 4.9，但仍然无法使用 GCC 4.8。

# php - webdav 交换 2003 440

> ID：12279882
> 
> 赞同：0
> 
> 时间：2012-09-05T10:54:57.973
> 
> 标签：php, exchange-server, webdav

我正在尝试连接到 Exchange 2003 服务器，并阅读邮件。服务器具有基于表单的身份验证。

在登录 POST 上一切正常，我得到了两个 cookie，但是当我尝试第二个请求时，服务器发送一个 440 状态代码。

我已经包含了请求/响应系列（服务器、通行证、用户名和域已被替换），希望任何人都能看到我在哪里犯了错误。

```
**** REQUEST ******
>[url] => https://<SERVER>/exchweb/bin/auth/owaauth.dll
>[request_header] => POST /exchweb/bin/auth/owaauth.dll HTTP/1.1
>   User-Agent: Mozilla/5.0 (Windows NT 6.0; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1)
>   Accept: */*
>   Accept-Encoding: gzip
>   Cookie: cadata="2CurvKH0Qt2fgnqjSl4/bOTmdobQWv581GKUu5IxzspI+BN525+gHJdhkX8hmWWkLK9KdGWNd5Jd9Fz9/"; sessionid=8d0f4db8-0f3e-4b6d-90d1-bec8cff4fe5f
>   Connection: keep-alive
>   Host: <CALLING SERVER>
>   Content-type: application/x-www-form-urlencoded;charset=UTF-8
>   Content-Length: 152
>   destination=https%3A%2F%2F<SERVER>%2Fexchange%2F<USER>%2F&username=<DOMAIN>%5C<USER>&password=<PASSWORD>&SubmitCreds=Log+On&forcedownlevel=1&trusted=1

*** RESPONSE ****
<   string(421) "HTTP/1.1 302 Moved Temporarily
<   Content-Length: 0
<   Location: https://<SERVER/exchange/<USER>/
<   Server: Microsoft-IIS/6.0
<   MicrosoftOfficeWebServer: 5.0_Pub
<   X-Powered-By: ASP.NET
<   Set-Cookie: sessionid=3456b6f5-abd1-4bf9-8da3-539900f7f10d; path=/
<   Set-Cookie: cadata="17DhqZvs6837xRRMiNH2lBcCzo/AnK8Qbqj1mH791xfgUqy+TpnB201UvxcD9IePzaYLkZQfpjR2nOW3D"; HttpOnly; secure; path=/
<   Date: Wed, 05 Sep 2012 07:53:12 GMT

*** REQUEST ***
>   [url] => https://<SERVER>/exchange/<USER>/Indbakke
>   [request_header] => SEARCH /exchange/<USER>/Indbakke HTTP/1.0
>   User-Agent: Mozilla/5.0 (Windows NT 6.0; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1
>   Cookie: cadata="17DhqZvs6837xRRMiNH2lBcCzo/AnK8Qbqj1mH791xfgUqy+TpnB201UvxcD9IePzaYLkZQfpjR2nOW3D"; sessionid=3456b6f5-abd1-4bf9-8da3-539900f7f10d
>   Accept: text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5
>   Accept-Language: da-DK,da;q=0.8,en-US;q=0.6,en;q=0.4
>   Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
>   Connection: keep-alive
>   Accept-Encoding: gzip,deflate,sdch
>   Host: <CALLING SERVER>
>   Depth: 0
>   Translate: f
>   Content-type: application/xml;
>   Content-Length: 297

>   <?xml version="1.0"?><a:searchrequest xmlns:a="DAV:" xmlns:s="http://schemas.microsoft.com/exchange/security/"> 
>      <a:sql> 
>          SELECT "DAV:displayname" 
>          ,"urn:schemas:httpmail:subject" 
>          FROM "https://<SERVER>/exchange/USER/Indbakke/" 
>      </a:sql> 
>   </a:searchrequest> 

*** RESPONSE ***
<   HTTP/1.1 440 Login Timeout
<   Set-Cookie: sessionid=; path=/; expires=Thu, 01-Jan-1970 00:00:00 GMT
<   Set-Cookie: cadata=; path=/; expires=Thu, 01-Jan-1970 00:00:00 GMT
<   Content-Type: text/html
<   Connection: close
<   Content-Length: 43 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:00:46.067

“440 登录超时” [http://support.microsoft.com/kb/941201](http://support.microsoft.com/kb/941201)

您的登录信息已过期，您需要重新登录。这是 OWA 的事情。

# json - 如何在 JsonSchema 中定义单个唯一的键值对？

> ID：12279883
> 
> 赞同：1
> 
> 时间：2012-09-05T10:55:10.573
> 
> 标签：json, jsonschema

Schema 应该只允许以下星座：`{"status":"nok"}`. 键必须始终是“状态”，值应该允许“ok”、“nok”、“inProgress”没有不同或额外的对象，...应该允许

我试过这个：

```
{
"description": "blabla",
"type": "object",
"properties": {
    "status": {
        "type": "string",
        "enum": [
            "ok",
            "inProgress",
            "nok"
        ],
        "required": true,
        "additionalItems": false
    }
},
"required": true,
"additionalProperties": false
} 
```

这行得通，但是这个方案允许我可以发送相同的键/值对两次`{"status":"nok","status":"nok"}` ，如果没有我正在使用的这个“对象”容器也能工作，我也会很高兴，因为这样可以减少开销。也许有人知道解决方案，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:36:39.423

该输入存在一个更根本的问题：

```
{"status":"nok","status":"nok"} 
```

主要是：*该输入无效 JSON*。[RFC 4627](https://www.rfc-editor.org/rfc/rfc4627)第 2.2 节明确指出“对象中的名称应该是唯一的”。在你的情况下，他们不是。

这意味着您使用的 JSON 解析器可以对这样的输入做任何事情。一些 JSON API 将获取它们首先遇到的任何值，其他解析器将获取它们读取的最后一个值，其他的甚至会合并值——根据 RFC，这些都不是非法的。

本质上：给定这样的输入，你*不能*保证 JSON 解析器的输出是什么；因此，您也不能保证此类输入的 JSON Schema 验证。

# php - 文件上传中的上传进度选项在 IE 中不起作用

> ID：12279886
> 
> 赞同：1
> 
> 时间：2012-09-05T10:55:28.857
> 
> 标签：php, javascript, html, jquery, file-upload

我正在使用 ajax 和 php 上传图像文件。

这是代码，

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script>

<form action="fileup.php" method="post" enctype="multipart/form-data">
                <input type="file" id="fileup" name="file" accept="image/*" style="position:relative; left:-105px; top:30px; opacity:0; z-index:10; cursor:pointer;" >
            </form>

<div class="progress">
        <div class="bar"></div >
        <div class="percent">0%</div >
    </div>

    <div id="status" style = "position:relative; top:-20px; left:150px;"></div> 
```

阿贾克斯：

```
$jq(function() {

var bar = $jq('.bar');
var percent = $jq('.percent');
var status = $jq('#status');

$jq('form').ajaxForm({

    beforeSend: function() {
        status.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
        status.html("Uploading...");
    },
    complete: function(xhr) {
        bar.width("100%");
        percent.html("100%");
        status.html("Upload complete");
        isrc = xhr.responseText; 
        handleFiles(files);     
    }
}); 

$jq("#fileup").change(function () {
files = this.files;
        $jq('form').submit();           
}); 
}); 
```

PHP代码，

```
<?php
$target_path = "uploaded_images/";

$file_name = $_FILES["file"]["name"];
$random_digit=rand(0000,9999);
$new_file_name=$random_digit.$file_name;

$target_path = $target_path . basename( $new_file_name); 

if(move_uploaded_file($_FILES['file']['tmp_name'], $target_path)) {
    echo   basename( $new_file_name);
} else{
    echo "There was an error uploading the file, please try again!";
}
?> 
```

它工作正常，它显示了 chrome 和 firefox 的进展。但是在ie中它不进入上传进度。我什至在那里放了一个警报，但它没有出现在 ie..

# c - C 编程 - 不计算值

> ID：12279889
> 
> 赞同：-2
> 
> 时间：2012-09-05T10:55:37.653
> 
> 标签：c

有人能告诉我为什么这段代码不计算总工资和其他代码吗？这段代码中存在一个问题，它不像程序想要的那样计算。有人可以帮我查明错误吗？

```
#include <stdio.h>
#include <conio.h>

int main()
{
  char fname[20];
  char lname[20];
  char IDnumber[20];
  char Position;
  float Hoursworked,Grosspay,Tax,Netpay;

  printf(" ************iG Company************** \n\n");
  printf("Enter the employee's First Name:\n");
  scanf("%s", &fname);
  printf("Enter the employee's Last Name:\n");
  scanf("%s", &lname);
  printf("Enter IDnumber:\n");
  scanf("%s",&IDnumber);
  printf("<1>Manager <2>Supervisor heart>Employee <4>Office Boy/girl \n");
  printf("Enter Position:\n");
  scanf("%s", &Position);
  switch(Position)
  {
    case '1':
      printf("Rate per hour:P150.00 \n");
      printf("No. of hours worked:");
      scanf("%d", &Hoursworked);
      Grosspay = Hoursworked * 150;
      printf("Gross: \n", Grosspay);
      Tax = Grosspay * 0.1f;
      printf("TAX:\n", Tax);
      Netpay = Grosspay - Tax;
      printf("NET PAY: \n", Netpay);
      break;
    case '2':
      printf("Rate:P100.00 \n");
      printf("No. of hours worked:");
      scanf("%d", &Hoursworked);
      Grosspay = Hoursworked * 100;
      printf("Gross:\n", Grosspay);
      Tax = Grosspay * 0.1f;
      printf("TAX: \n", Tax);
      Netpay = Grosspay-Tax;
      printf("NET PAY: \n", Netpay);
      break;
    case '3':
      printf("Rate:P70.00 \n");
      printf("No. of hours worked:");
      scanf("%d", &Hoursworked);
      Grosspay = Hoursworked * 70;
      printf("Gross: \n", Grosspay);
      Tax = Grosspay * 0.1f;
      printf("TAX:\n", Tax);
      Netpay = Grosspay - Tax;
      printf("NET PAY: \n", Netpay);
      break;
    case '4':
      printf("Rate per hour:P50.00 \n");
      printf("No. of hours worked:");
      scanf("%d", &Hoursworked);
      Grosspay = Hoursworked * 50;
      printf("Gross:\n", Grosspay);
      Tax = Grosspay * 0.1f;
      printf("TAX:\n", Tax);
      Netpay = Grosspay - Tax;
      printf("NET PAY:\n", Netpay);
      break;
    default:
      printf("Invalid");
  }
  getch();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:03:31.260

该程序实际计算该值但不打印它。改变，

```
scanf("%d",&Hoursworked);

Grosspay=Hoursworked*150;
printf("Gross: \n",Grosspay);
Tax=Grosspay*0.1f;
printf("TAX:\n",Tax);

Netpay=Grosspay-Tax;
printf("NET PAY: \n",Netpay); 
```

到

```
scanf("%f",&Hoursworked); //Houseworked is declared float

Grosspay=Hoursworked*150;
printf("Gross: **%f**\n",Grosspay); //you have to specify what type to print
Tax=Grosspay*0.1f;
printf("TAX:**%f**\n",Tax);

Netpay=Grosspay-Tax;
printf("NET PAY: **%f**\n",Netpay); 
```

相应地更改完整的代码，你应该得到结果..:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:00:30.887

它已计算但未打印，因为您`%f`在`printf`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:00:17.260

```
printf("Gross:\n",Grosspay); 
```

您缺少该字符串中变量的占位符。当您使用 printf 输出变量值时，第一个字符串必须包含插入以下变量的占位符。

```
printf("Gross: %f\n",Grosspay); 
```

%f 将替换为 Grosspay 的值。

# android - 启动活动时，应用程序进程正在关闭

> ID：12279890
> 
> 赞同：0
> 
> 时间：2012-09-05T10:55:40.120
> 
> 标签：android, android-asynctask, android-location

我试图在后台运行应用程序，但是当应用程序立即启动时，应用程序被关闭（没有错误出现）。我在主要活动中使用了异步任务。

代码：

```
package com.android.trace;

public class LocationStat extends Activity {

double logi;
double lat;
long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Millisecon
Location loc;
LocationManager manager;
TextView t;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    new MyLocationAsyncTask().execute();

}

public void onStart() {
    super.onStart();

    new MyLocationAsyncTask().execute();

}

private class MyLocationAsyncTask extends AsyncTask<Void, Location, Void> implements LocationListener {

    //private Location l;
    //location management variables to track and maintain user location
    @Override
    protected Void doInBackground(Void... arg0) {
        t = (TextView) findViewById(R.id.text);
        manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        manager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER,
                MINIMUM_TIME_BETWEEN_UPDATES,
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
                new MyLocationAsyncTask());

        return onLocationChanged();
    }

    //this method is never executed i dont know why...?
    public Void onLocationChanged() {
        if (manager != null) {
            LocationStat l = new LocationStat();
            loc = manager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            lat = loc.getLatitude();
            logi = loc.getLongitude();
            t.setText(" Your Location :\nlongitude:" + logi + "\nlatitude: " + lat);                 //Log.d("Your Location", ""+latLocation);
            l.webcall(logi, lat);
        }
        return null;
    }

    public void onLocationChanged(Location location) {
        onLocationChanged();

    }

    public void onProviderDisabled(String provider) {
    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
    }
}

public void webcall(double logi, double lat) {
    InputStream is = null;
    String result = "";
    //the year data to send
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("logitude", Double.toString(logi)));
    nameValuePairs.add(new BasicNameValuePair("latitude", Double.toString(lat)));

    //http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2/location.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        Toast.makeText(LocationStat.this, "Error in http connection " + e.toString(), Toast.LENGTH_LONG).show();
    }
    //convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();

        result = sb.toString();

        Toast.makeText(LocationStat.this, result, Toast.LENGTH_LONG).show();
    } catch (Exception e) {
        Toast.makeText(LocationStat.this, "Error converting result " + e.toString(), Toast.LENGTH_LONG).show();
    }

} 
```

启动活动代码的服务代码：

```
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;

import android.widget.Toast;

public class MyService extends Service {

String tag="TestService";
@Override
public void onCreate() {

   Intent dialogIntent = new Intent(this, LocationStat.class);
       dialogIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

      this.startActivity(dialogIntent);
    }

@Override
public void onStart(Intent intent, int startId) {      
   super.onStart(intent, startId);  

 }

    @Override
   public int onStartCommand(Intent intent, int flags, int startId) {

   return START_STICKY;
  }
  @Override
   public void onDestroy() {
   super.onDestroy();
   Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
  }

   @Override
    public IBinder onBind(Intent intent) {
   return null;
   }
} 
```

用于在启动时启动服务的广播接收器是

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MyBroadcastReceiver extends BroadcastReceiver {

  public void onReceive(Context context, Intent intent) {
    Intent startServiceIntent = new Intent(context, MyService.class);
    startServiceIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startService(startServiceIntent);

  }
} 
```

活动、服务和广播接收器的清单权限如下

```
<service android:enabled="true" android:name=".MyService">
            <intent-filter >
                <action android:name="com.android.trace.MyService"/>

            </intent-filter>
        </service>

        <receiver android:name="com.android.trace.MyBroadcastReceiver">  
            <intent-filter>  
              <action android:name="android.intent.action.BOOT_COMPLETED" />  
             </intent-filter>  
        </receiver> 

    <activity
        android:name=".LocationStat"
        android:label="@string/title_activity_location_stat" >
        <intent-filter>
                <action android:name="android.intent.action.MAIN" /> 

             <category android:name="android.intent.category.LAUNCHER" /> 
        </intent-filter>

    </activity>

 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

有没有人有同样的经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:57:30.240

使用`Service`而不是`Activity`做后台长期工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:01:55.550

您只能从主 GUI 线程在 GUI 上使用 setText 和其他操作。您正在尝试从已启动的后台线程执行此操作。

您必须在 PostExecute 上实现 AsyncTask 函数并从那里修改您的 GUI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:08:32.903

内存不足，捕获 LOG onDestoy() 方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:43:49.270

你有没有在`android manifest`文件中提到你的接收器，在你的，添加这串代码`manifest file`，

```
 <receiver
        android:name=".MyBroadcastReceiver" >
        <intent-filter android:priority="1000">

            <action />

        </intent-filter>

    </receiver> 
```

# java - 在 Spring 中从 XML 注入实体管理器

> ID：12279891
> 
> 赞同：0
> 
> 时间：2012-09-05T10:55:41.187
> 
> 标签：java, spring, jpa

[我需要做与Injecting Entitymanager via XML 而不是 annotations](https://stackoverflow.com/questions/2951400/injecting-entitymanager-via-xml-and-not-annnotations)中描述的非常相似的事情，但我需要从 XML 注入真实的、容器创建的实体管理器，这样它的行为就好像有一个真实的 @PersistenceContext注解。我找到了一个 LocalEntityManagerFactoryBean （注意缺少“容器”一词），但我担心它会创建一个新的实体管理器工厂，因此实体管理器将与通过真正的 @PersistenceContext 注释注入的不兼容。

我将描述原因，因为这很奇怪，也许我的问题的解决方案是选择完全不同的方法。我在我的 spring 配置中使用 PropertyPlaceholderConfigurer，在这个配置器中我引用了其他 bean。我遇到了一个错误，即自动装配在那些引用的 bean 中不起作用。我不知道 PropertyPlaceholderConfigurer 为什么以及如何关闭这些引用的 bean 中的自动装配，但事实是，如果我用这些 bean 的 xml 配置替换自动装配，一切正常。但是我无法替换 EntityManager 的自动装配，因为它不是标准的 spring bean，而是 jndi 加载了我不完全理解的东西。

一种方法或另一种方法，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:53:27.287

在 spring-bean.xml 中，

```
<bean id="entityManagerFactory"  class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="USER_TEST"/>
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter"/>
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect"/>
    </property>
    <property name="jpaPropertyMap">
        <props>
            <prop key="eclipselink.weaving">false</prop>
        </props>
    </property>

<bean id="PersonDao" class="com.xxx.java.person.persistence.PersonDAO">
     <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:27:44.310

```
<bean id="earlyInitializedApplicationSettingsService" class="...services.impl.ApplicationSettingsServiceImpl" autowire-candidate="false">
    <property name="applicationSettingsDao">
        <bean class="....impl.ApplicationSettingsDaoImpl">
            <property name="entityManager">
                <bean class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
                    <property name="entityManagerFactory">
                        <bean class="org.springframework.jndi.JndiObjectFactoryBean">
                            <property name="jndiName" value="java:comp/env/persistence/somePersistenceUnit"/>
                        </bean>
                    </property>
                </bean>
            </property>
        </bean>
    </property>
</bean> 
```

主要注意一个事实，即我没有使用标准的 jee:jndi-lookup，因为它不起作用（在 PropertyPlaceholderConfigurer 创建的条件下），这是我困惑的根源。当我直接使用 JndiObjectFactoryBean 时，它起作用了。

# zip - 在 Apache httpd 中将 zip 文件作为目录提供

> ID：12279899
> 
> 赞同：1
> 
> 时间：2012-09-05T10:56:14.540
> 
> 标签：zip, apache

是否可以将 Apache httpd 配置为将 zip 文件视为目录。我希望能够将目录树作为 zip 文件和目录提供，但我希望避免将两者都保存在磁盘上。如果可能的话，我只想将 zip 文件放在磁盘上，让 Apache 将它们作为常规目录提供服务，但反过来也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:02:16.947

可能不是，因为 zip 是顺序结构的，这意味着如果有人访问 zip 文件中的最后一个文件，则需要读取整个 zip 以提取最后一个文件。

# java - 通过Linux中的Java代码使用来自Windows共享的数据

> ID：12279900
> 
> 赞同：0
> 
> 时间：2012-09-05T10:56:14.893
> 
> 标签：java, filesystems, filesystemwatcher

这在本质上有点模糊，但那是因为我必须开始研究这个。

我们计划使用 Windows 共享驱动器。我们将自动从 Windows 共享（从在 Linux 上运行的 java 代码）中挑选这些文件，并使用它们进行进一步处理。

1.  从 Linux 的 java 代码中使用 windows 共享是否有任何已知问题？我们如何做到这一点？是挂载文件系统的唯一方法吗？
2.  我们可以运行各种文件系统命令来列出文件（或移动/锁定/删除文件等）吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:11:00.843

看看 Aapche commons-vfs。它支持 SMB（Windows 共享）。[http://commons.apache.org/vfs/](http://commons.apache.org/vfs/)

具体来说 - [http://commons.apache.org/vfs/filesystems.html#CIFS](http://commons.apache.org/vfs/filesystems.html#CIFS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:12:28.217

我在我的项目中使用[jcifs](http://jcifs.samba.org/)来处理 samba。有一个名为`jcifs.smb.SmbFile`类似的类，`java.io.File`可以像处理本地文件一样处理 samba 文件。`listFiles()`, `delete()`, `exists()`, `getInputStream()`,等方法 `createNewFile()`应该满足您的需求。

这是一个下载文件演示，希望对您有所帮助。

```
 SmbFileInputStream is = null;
    FileOutputStream os = null;
    //
    String souFileUrl = "smb://" + user + ":" + password + "@" + server + "/" + souFileName;

    SmbFile souSmbFile = new SmbFile(souFileUrl);
    is = new SmbFileInputStream(souSmbFile);
    File tempOutFile = new java.io.File(newfilename);
    os = new FileOutputStream(tempOutFile);
    byte[] bytes = new byte[1024];
    int c;
    while ((c = is.read(bytes)) != -1) {
        os.write(bytes, 0, c);
    } 
```

# c# - var handler = MyEvent 在 VB.net

> ID：12279901
> 
> 赞同：1
> 
> 时间：2012-09-05T10:56:16.270
> 
> 标签：c#, vb.net

[我对他的文章](http://blog.opennetcf.com/ctacke/2010/05/27/WhyYouShouldUseEventHandlerGetInvocationList.aspx)有疑问。

我将源代码转换为 Vb.net，但这一行有问题：

```
 var handler = MyEvent 
```

谁能帮我把这条线翻译成VB.net？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:10:45.960

```
var handler = MyEvent;
if (handler == null)
{
    Console.WriteLine("No listeners");
    return;
} 
```

可以翻译成

```
Dim handler = MyEventEvent
If handler Is Nothing
     Console.WriteLine("No listeners")
     Return
End If 
```

* * *

![在此处输入图像描述](../Images/9ebe3ebe0ed42ae84a04928e126e2e65.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:28:34.280

您需要使用 Custom 关键字声明自定义事件以访问底层委托。[这篇MSDN Library 文章](http://msdn.microsoft.com/en-us/library/yt1k2w4e.aspx)对此进行了很好的解释。

需要注意的是，像这样捕获异常是**非常**不明智的。捕获异常需要您恢复程序状态，就好像事件从未引发过一样。撤消任何更改会导致部分执行的代码。这对于事件来说是不可能的，事件契约隐含的是你对订阅事件处理程序的代码一无所知。这意味着完全不可能恢复状态。catch 块*必须*出现在事件处理程序中，而不是出现在引发事件的代码中。忽略这个博主试图给你的建议。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T10:58:56.550

我认为要么

```
Dim handler As EventHandler = MyEvent 
```

或者

```
Dim handler As EventHandler = AddressOf MyEvent 
```

# jquery - .change() 获取：选定的文本值

> ID：12279904
> 
> 赞同：43
> 
> 时间：2012-09-05T10:56:27.623
> 
> 标签：jquery, selected

我正在尝试运行以下代码

```
$("select#shipping_rates_drop").change(function(){
            var selectedText = $(this + "option:selected").text();
            var ship = thisvalue.split("£");
            var subtotal = $("ul#deliveryList").attr("class");
            var ship = ship[1];
            var totalcost = parseFloat(subtotal)+parseFloat(ship);
            $(".wrap.form-section h1 span").html("&nbsp;&nbsp;&nbsp;&nbsp;<small>Total </small> £"+totalcost);
            $("input[name=itemamt]").val(subtotal);
            $("input[name=shippingamt]").val(ship);
            checklistCheck1();
        }); 
```

我想在更改时从所选值中获取文本。前任。UPS Worldwide Express - 89.57 英镑，然后代码拆分价值以获得我的实际成本数量。

但是 console.log 抛出以下内容

> 错误：语法错误，无法识别的表达式：[object HTMLSelectElement]option:selected

在 jquery.min.js 中（第 2 行）

所以我假设我在这里做错了什么，希望有人能帮忙

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-09-05T10:59:13.473

该行应该是

```
var selectedText = $(this).find("option:selected").text(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T10:58:52.883

改变

```
var thisvalue = $(this + "option:selected").text(); 
```

到

```
var thisvalue = $("select#shipping_rates_drop option:selected").text(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-27T12:20:57.263

**选定的文本值：**

```
$('#selectBoxId').on('change',function(){
   var optionsText = this.options[this.selectedIndex].text;
   alert(optionsText);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-08T14:01:50.060

```
<select onchange="changeSelect($event)">
    <option [value]="valor">Texto</option>
</select> 
```

```
changeSelect(e: any) {
    var indexSel = e.target.selectedIndex;
    var label = e.srcElement[indexSel].label;console.log(label);
} 
```

# c - 在 C 中实现 ceil()

> ID：12279914
> 
> 赞同：4
> 
> 时间：2012-09-05T10:57:12.113
> 
> 标签：c, floating-point, implementation, ceil

我想`ceil()`在`C`. 在库中搜索源代码并在[此处](http://code.google.com/p/dexandroid/source/search?q=ceil.c&origq=ceil.c&btnG=Search%20Trunk)找到，但似乎很难理解。我想要干净优雅的代码。

我也在 SO 上进行了搜索，在[这里](https://stackoverflow.com/questions/2796639/implementation-of-ceil-function-in-c)找到了一些答案。似乎没有一个答案是正确的。答案之一是：

```
#define CEILING_POS(X) ((X-(int)(X)) > 0 ? (int)(X+1) : (int)(X))
#define CEILING_NEG(X) ((X-(int)(X)) < 0 ? (int)(X-1) : (int)(X))
#define CEILING(X) ( ((X) > 0) ? CEILING_POS(X) : CEILING_NEG(X) ) 
```

AFAIK，返回类型`ceil()`不是 int。宏在这里是类型安全的吗？此外，上述实现是否适用于负数？

实施它的最佳方式是什么？

你能提供干净的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:04:03.793

您引用的宏对于大于`INT_MAX`但仍可以完全表示为双精度的数字肯定不能正常工作。

正确实现的唯一方法`ceil()`（假设您不能使用等效的汇编指令实现它）是对浮点数的二进制表示进行位旋转，就像在`s_ceil.c`第一个链接后面的源文件中所做的那样。理解代码是如何工作的需要理解底层平台的浮点表示——这种表示很可能是[IEEE 754——](http://en.wikipedia.org/wiki/IEEE_floating_point)但是没有办法解决这个问题。

编辑：

其中的一些复杂性`s_ceil.c`源于它处理的特殊情况（NaN、无穷大）以及它需要在无法假设存在 64 位整数类型的情况下完成其工作的事实。

所有位旋转的基本思想是屏蔽尾数的小数位，如果数字大于零，则在其上加 1...但是还涉及一些额外的逻辑以确保您执行在所有情况下都是正确的。

`ceil()`这是我拼凑在一起的 for floats 的说明性版本。注意：这*不能*正确处理特殊情况，并且没有经过广泛的测试——所以不要实际使用它。然而，它确实有助于说明比特旋转所涉及的原理。我试图广泛地评论该例程，但这些评论确实假设您了解浮点数是如何以 IEEE 754 格式表示的。

```
union float_int
{
    float f;
    int i;
};

float myceil(float x)
{
    float_int val;
    val.f=x;

    // Extract sign, exponent and mantissa
    // Bias is removed from exponent
    int sign=val.i >> 31;
    int exponent=((val.i & 0x7fffffff) >> 23) - 127;
    int mantissa=val.i & 0x7fffff;

    // Is the exponent less than zero?
    if(exponent<0) 
    {   
        // In this case, x is in the open interval (-1, 1)
        if(x<=0.0f)
            return 0.0f;
        else
            return 1.0f;
    }
    else
    {
        // Construct a bit mask that will mask off the
        // fractional part of the mantissa
        int mask=0x7fffff >> exponent;

        // Is x already an integer (i.e. are all the
        // fractional bits zero?)
        if((mantissa & mask) == 0)
            return x;
        else
        {
            // If x is positive, we need to add 1 to it
            // before clearing the fractional bits
            if(!sign)
            {
                mantissa+=1 << (23-exponent);

                // Did the mantissa overflow?
                if(mantissa & 0x800000)
                {
                    // The mantissa can only overflow if all the
                    // integer bits were previously 1 -- so we can
                    // just clear out the mantissa and increment
                    // the exponent
                    mantissa=0;
                    exponent++;
                }
            }

            // Clear the fractional bits
            mantissa&=~mask;
        }
    }

    // Put sign, exponent and mantissa together again
    val.i=(sign << 31) | ((exponent+127) << 23) | mantissa;

    return val.f;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:06:22.383

没有什么比使用标准库实现更优雅了。没有任何代码总是比优雅的代码更优雅。

除此之外，这种方法有两个主要缺陷：

*   如果`X`大于`INT_MAX + 1`或小于`INT_MIN - 1`，则宏的行为未定义。这意味着您的实现可能对所有浮点数的近一半给出不正确的结果。与 IEEE-754 相反，您还将引发无效标志。
*   它得到了 -0、+/-infinity 和 nan 错误的边缘情况。事实上，它唯一正确的边缘情况是+0。

您*可以*`ceil`以类似于您尝试的方式实现，就像这样（此实现假定 IEEE-754 双精度）：

```
#include <math.h>

double ceil(double x) {
    // All floating-point numbers larger than 2^52 are exact integers, so we
    // simply return x for those inputs.  We also handle ceil(nan) = nan here.
    if (isnan(x) || fabs(x) >= 0x1.0p52) return x;
    // Now we know that |x| < 2^52, and therefore we can use conversion to
    // long long to force truncation of x without risking undefined behavior.
    const double truncation = (long long)x;
    // If the truncation of x is smaller than x, then it is one less than the
    // desired result.  If it is greater than or equal to x, it is the result.
    // Adding one cannot produce a rounding error because `truncation` is an
    // integer smaller than 2^52.
    const double ceiling = truncation + (truncation < x);
    // Finally, we need to patch up one more thing; the standard specifies that
    // ceil(-small) be -0.0, whereas we will have 0.0 right now.  To handle this
    // correctly, we apply the sign of x to the result.
    return copysign(ceiling, x);
} 
```

像这样的东西就像你能得到的一样优雅，而且仍然是正确的。

* * *

我对 Martin 在他的回答中提出的（通常很好！）实现提出了一些担忧。以下是我将如何实施他的方法：

```
#include <stdint.h>
#include <string.h>

static inline uint64_t toRep(double x) {
    uint64_t r;
    memcpy(&r, &x, sizeof x);
    return r;
}

static inline double fromRep(uint64_t r) {
    double x;
    memcpy(&x, &r, sizeof x);
    return x;
}

double ceil(double x) {

    const uint64_t signbitMask  = UINT64_C(0x8000000000000000);
    const uint64_t significandMask = UINT64_C(0x000fffffffffffff);

    const uint64_t xrep = toRep(x);
    const uint64_t xabs = xrep & signbitMask;

    // If |x| is larger than 2^52 or x is NaN, the result is just x.
    if (xabs >= toRep(0x1.0p52)) return x;

    if (xabs < toRep(1.0)) {
        // If x is in (1.0, 0.0], the result is copysign(0.0, x).
        // We can generate this value by clearing everything except the signbit.
        if (x <= 0.0) return fromRep(xrep & signbitMask);
        // Otherwise x is in (0.0, 1.0), and the result is 1.0.
        else return 1.0;
    }

    // Now we know that the exponent of x is strictly in the range [0, 51],
    // which means that x contains both integral and fractional bits.  We
    // generate a mask covering the fractional bits.
    const int exponent = xabs >> 52;
    const uint64_t fractionalBits = significandMask >> exponent;

    // If x is negative, we want to truncate, so we simply mask off the
    // fractional bits.
    if (xrep & signbitMask) return fromRep(xrep & ~fractionalBits);

    // x is positive; to force rounding to go away from zero, we first *add*
    // the fractionalBits to x, then truncate the result.  The add may
    // overflow the significand into the exponent, but this produces the
    // desired result (zero significand, incremented exponent), so we just
    // let it happen.
    return fromRep(xrep + fractionalBits & ~fractionalBits);
} 
```

关于这种方法需要注意的一点是，它不会*为非*整数输入引发不精确的浮点标志。这可能会或可能不会影响您的使用。我列出的第一个实现确实提高了标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:01:27.927

我不认为宏函数是一个好的解决方案：它不是类型安全的，并且对参数进行了多次评估（副作用）。你应该写一个干净优雅的*函数*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T19:28:54.440

正如我所期望的答案中的更多笑话，我将尝试几个

```
#define CEILING(X) ceil(X) 
```

奖励：一个没有太多副作用的宏
如果你不太关心负零

```
#define CEILING(X) (-floor(-(X))) 
```

如果你关心负零，那么

```
#define CEILING(X) (NEGATIVE_ZERO - floor(-(X))) 
```

将 NEGATIVE_ZERO 的可移植定义留作练习……另外，它还会设置 FP 标志（OVERFLOW INVALID INEXACT）

# java - Android 应用程序中的编码问题 (WebView.LoadData())

> ID：12279919
> 
> 赞同：1
> 
> 时间：2012-09-05T10:57:24.920
> 
> 标签：java, android, webview, loaddata

我在我的 Android 应用程序中对网页的一部分进行编码时遇到问题。我所拥有的是一个收集网页的一部分并将其显示给用户的应用程序。对于这个问题，假设我有一个带有文本的网页，文本下方有一个表格，表格下方有很多我不感兴趣的垃圾。所以我选择使用第一个位置查看什么元素（例如唯一的标签）和结束位置（相同的，唯一的东西。使用带有开始/结束位置的输入流读取器。

然后在我的字符串（“字符串”）中运行：

```
String s = Uri.encode(string); 
```

然后相应地使用字符串 s：

```
web.loadData(s, "text/html","ISO-8859-1"); 
```

但这在文本中间给了我一些不需要的字符：“Â”出现。我试图在字符串中运行 .replace("Â", ""); 但这并不能解决问题。

我也试过以下：

```
web.loadData(s, "text/html", "UTF-8");

web.loadData(s,"text/html;utf-8",null); 
```

但是“Â”和一两个“*”仍然出现？

一直在网上搜索并找到：`loadDataWithBaseUrl`但这也不能解决它，所以我非常想要一些帮助:)

在页面顶部：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="sv-se" dir="ltr"> 
```

在另一页上：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" dir="ltr"> 
```

所以我有一个英文页面和一个瑞典文页面，但错误是关于两个 url:s。

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T13:47:37.467

用这个：

> webview.loadData(html_content, "text/html; charset=utf-8", "utf-8");

我测试了它，它可以工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-04T04:27:37.437

这段代码对我有用。

```
String base64EncodedString = null;
                        try {
                            base64EncodedString = android.util.Base64.encodeToString((preString+mailContent.getBody()+postString).getBytes("UTF-8"), android.util.Base64.DEFAULT);
                        } catch (UnsupportedEncodingException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }
                        if(base64EncodedString != null)
                        {
                            wvMailContent.loadData(base64EncodedString, "text/html; charset=utf-8", "base64");  
                        }
                        else
                        {
                            wvMailContent.loadData(preString+mailContent.getBody()+postString, "text/html; charset=utf-8", "utf-8");
                        } 
```

# c# - JQuery 中的超链接

> ID：12279922
> 
> 赞同：4
> 
> 时间：2012-09-05T10:57:31.680
> 
> 标签：c#, asp.net, asp.net-mvc-3, jquery-plugins, jqgrid

我在 MVC3 中使用 JQuery 创建了一个网格，该网格显示来自模型的数据，但现在我打算放置一个超链接到网格中的一列，这样当用户点击他应该能够查找的链接时与行值有关的数据..下面是显示我的网格的代码。

```
<script type="text/javascript">
$(document).ready((function () {
    $("#list").jqGrid({
        url: '/list/GetDet/', 
        datatype: 'json',
        mtype: 'GET',
        colNames: ['Code', 'Name', 'Location'], //column name
        colModel: [
      { name: 'Code', index: 'Code', width: 100, align: 'right' },
      { name: 'Name', index: 'Name', width: 100, align: 'left' },
      { name: 'location', index: 'location', width: 100, align: 'left'}],

        pager: $('#pager'),
        rowNum: 5,
        rowList: [5, 10, 20, 50],            
        sortname: 'Code',
        sortorder: "desc",
        viewrecords: true,
        caption: 'Details'            
    });
})); 
</script> 
```

如果我打算创建指向名称列的链接，我该如何提供

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:24:54.497

我认为您在发送 URL 时遇到问题。
这是解决该问题的[链接。](https://stackoverflow.com/questions/9988634/ajax-call-into-mvc-controller-url-issue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T15:19:51.567

您可以使用该`getCell`方法（[如 jqGrid 文档中所述](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)）。一旦你在你的 javascript 中有这个值，你可以用任何你喜欢的方式处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T01:44:27.777

在您放置实际链接或要链接的 ID 的 getData 操作中，在您创建单元格的位置使用完整的 html 字符串。服务器可以发送`<a href="/controller/action/id">View</a>`给客户端，它会显示为一个链接。这不会影响任何搜索或排序，因为它们是在实际索引而不是超链接上完成的。

我通常会在服务器端准备我的操作，但如果您想在客户端执行此操作，您可以使用指定自定义函数作为格式化程序并以您想要的任何方式格式化值。 [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options) 看看格式化程序选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T06:41:19.647

对列使用驼峰`name`式`index`，`don't use capital letter`在声明列的起始字时。如果使用网格不加载。

例子：

`{ name: 'code', index: 'code', width: 100, align: 'right' }, { name: 'name', index: 'name', width: 100, align: 'left' }, { name: 'location', index: 'location', width: 100, align: 'left'}],`

您的问题与之前提出的问题有关`Retrieve value of cells, when in edit mode in JqGrid`How [to return row values using hyperlink in jqgrid](https://stackoverflow.com/a/21783121/1624035)

在`editLink`函数中使用列索引名称来获取行值。

```
function editLink(cellValue, options, rowdata, action)
{
    alert('Name: '+ rowdata.name);//alerts row value of column
    //return "<a href='/Admin/editProvider/" + rowdata.providerId + "' class='ui-icon ui-icon-pencil' ></a>";
} 
```

# jquery - 在特定条件下设置可选字段

> ID：12279923
> 
> 赞同：1
> 
> 时间：2012-09-05T10:57:33.010
> 
> 标签：jquery, forms

所以我有 4 个输入类型的文本是**可选**的（没有义务填写），但是如果用户填写其中一个，那么我希望他全部填写。

简历：
- 如果用户填写 0 输入 => 没有义务，他可以留空；
- 如果用户填写 1< input =>**必须**全部填写。

我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:00:22.587

这是一种选择：

```
$("form").on("submit", function() {
    var filled = $(this).find("input").filter(function() {
        return this.value.length > 0;
    });

    if (filled.length > 0) {
        alert("Fill 'em all!");
        return false;
    }
    return true;
}); 
```

**演示：http:** [//jsfiddle.net/xw9pb/](http://jsfiddle.net/xw9pb/)

# jsf - JSF：创建一个什么都不做的“虚拟”按钮？

> ID：12279926
> 
> 赞同：1
> 
> 时间：2012-09-05T10:58:01.623
> 
> 标签：jsf, button, usability

在我们的 JSF Web 应用程序中，我们有一个输入字段，用户可以在其中输入数字 ID，然后应用程序会查找该 ID。为了帮助用户，查找绑定到“onchange”，因此一旦用户离开该字段或点击其他地方，它就会被触发。

因此，用户输入“123”，按下选项卡（或单击），查找运行。这很好用；但是，出于可用性原因，我们还希望提供一个用户可以单击的按钮，以供那些想知道“我应该在哪里单击以触发查找？”的用户使用。为此，我们希望提供一些看起来和感觉上都像 HTML / JSF 按钮的东西，但什么都不做（因为无论如何单击都会触发“onchange”事件）。

有没有办法制作一个什么都不做的 JSF 按钮？我尝试使用不带“action”属性的 h:commandButton，但它仍然会触发请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:14:49.610

p:commandButton type="button" 将只提供一个按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:29:20.403

由于您也将此问题标记为可用性问题，因此如果 onchange 已经触发查找，我建议首先不要使用按钮。

从用户的角度来看，点击按钮是否是强制性的，这是令人困惑的。在他们进入该字段并跳到下一个字段后，他们无需单击按钮即可看到查找发生。如果有一个按钮，他们会认为它的存在是有原因的。

在这些情况下，我喜欢的选项是 onkeypress 处理程序，超时时间为半秒，然后查找值。

# android - 如何从 android (ksoap2) 将 DateTime 发送到 .net webService？

> ID：12279927
> 
> 赞同：2
> 
> 时间：2012-09-05T10:58:04.040
> 
> 标签：android, web-services, ksoap2, android-ksoap2

我有一个 .net 网络服务，我必须在其中发送一个参数（日期时间类型），如您所见：

```
 <startDateTime>dateTime</startDateTime> 
```

在Android客户端，我使用kso​​ap2，我不知道，如何发送那种类型的数据？请帮助**设置此类型**- 下面的代码不起作用。

```
PropertyInfo propInfo3 = new PropertyInfo();
propInfo3.name="startDateTime";
propInfo3.value="2012-02-01"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T12:11:58.063

这是我在应用程序中调用 Web 服务方法的方式。请注意我用来转换 Java 日期的方法。您需要 ISO 日期格式。

```
protected static Object callMethod(String method, Map<String, Object> parameters) throws IOException, XmlPullParserException {
    SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE, method);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.headerOut = new Element[1];
    envelope.headerOut[0] = buildAuthHeader();
    envelope.setOutputSoapObject(request);
    if (parameters != null) {
        for (String item : parameters.keySet()) {
            Object itemValue = parameters.get(item);
            if (itemValue.getClass().getName().equals("java.util.Date")) {
                // If it's a date then we have to format it because ksoap
                // does not know how to do this.
                request.addProperty(item, getSOAPDateString((java.util.Date) itemValue));
            } else {
                request.addProperty(item, itemValue);
            }
        }
    }

    HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS, 10000);
    httpTransport.debug = true;

    httpTransport.call(WSDL_TARGET_NAMESPACE + "/" + method, envelope);
    String soapString = httpTransport.requestDump;
    System.out.println(soapString);
    return envelope.getResponse();
} 
```

这是返回实际字符​​串的方法：

```
private static Object getSOAPDateString(java.util.Date itemValue) {
    String lFormatTemplate = "yyyy-MM-dd'T'hh:mm:ss'Z'";
    DateFormat lDateFormat = new SimpleDateFormat(lFormatTemplate);
    String lDate = lDateFormat.format(itemValue);

    return lDate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:22:44.410

在您的服务器中，客户端的返回是什么？

当我遇到这样的问题时，我会在 Android 上的 Logcat 中显示我正在发送的内容，并在服务器端显示我得到的内容。

我的日期也有一点问题（我正在使用 ksoap2 和 webservices），我解决了在 util.Date 中发送日期的问题，然后我在项目中使用 SimpleDateFormat 和模式日期并将该字符串转换为我想要的.

赛亚，贝尔坦

* * *

这是我发送到 WS 的代码：

```
public static byte[] send(String... param) throws SocketTimeoutException, IOException, XmlPullParserException, Exception{
            //First I send the WS Name
    String ws = param[0];
            //Second is the operationName
    SoapObject soap = new SoapObject(URL_SOAP, param[1]);

    Object retorno = null;

    int tamParam = param.length;

            //The 3 parameter for the infinity its the properties, name and the next it's the value...
    if (tamParam > 0) {
        for (int i = 2; i < tamParam; i++) {
            soap.addProperty(param[i], param[++i]);
        }
    }

    // create a envelope for the soap object
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(soap);

    // create a HttpTransport to send the object soap with 15s delay
    MyHttpTransport httpTransport = new MyHttpTransport(URL + ws, 15000);

    // send the req
    Long tempo1 = 0l;
        tempo1 = System.currentTimeMillis();
        httpTransport.call("", envelope);

        retorno = envelope.getResponse();
        Long tempo2 = System.currentTimeMillis();

    httpTransport.reset();
    //I ever get byte[] from the WS...
    if (retorno != null) {
        byte[] bloc = Base64.decode(retorno.toString(), Base64.DEFAULT);
        return bloc;
    } else {
        return null;
    }
} 
```

# html - 使用绝对 url 在简单的 html 中显示图像

> ID：12279932
> 
> 赞同：0
> 
> 时间：2012-09-05T10:58:24.810
> 
> 标签：html, image, google-app-engine, url, absolute

如何在基本 html 文件中嵌入/显示和仅使用绝对 url（例如[http://www.myexample.com/myimage.jpg ）描述的图像？](http://www.myexample.com/myimage.jpg)如果这不可能，你会怎么做？有什么组件可以做到吗？我将在 Google App Engine 上使用它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:03:42.193

同意，使用绝对 URL 引用的图像将与与“基本 html 文件”位于同一文件夹中的图像显示相同。

# c# - 第一次使用 msbuild

> ID：12279933
> 
> 赞同：0
> 
> 时间：2012-09-05T10:58:26.950
> 
> 标签：c#, windows, msbuild, compiler-errors

你好，这是我第一次使用 msbuild，我似乎无法将它编译为 dll，我一直得到一个

> C:\Windows\Microsoft.NET\Framework\v2.0.50727\Microsoft.Common.targets(490,9)：错误：未为此项目设置 OutputPath 属性。请检查以确保您指定了有效的配置/平台组合。配置='调试'平台='任何 CPU'

错误和 iv 到处搜索，似乎没有解决方案，iv 在不同的机器上尝试过，仍然是相同的错误，我检查了环境变量，似乎没有一个影响它也我确保 proj 文件包含 bin\Debug\ 任何人都可以告诉我哪里错了？我难住了。抱歉，如果我没有多大意义，我只是对此和学习非常陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:28:53.700

您的 .csproj 文件应包括`<OutputPath>bin\Debug\</OutputPath>`. 当 Visual Studio 创建项目文件时，它会将其放入由配置和平台组合决定`<OutputPath>`的`<PropertyGroup>`元素中，如下所示：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
  <OutputPath>bin\Debug\</OutputPath>
  ...
</PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
  <OutputPath>bin\Release\</OutputPath>
  ...
</PropertyGroup> 
```

现在，如果您从没有参数的命令行运行 MSBuild，它将`Debug`用作`Configuration`和`AnyCPU`for的默认值`Platform`，就像您的错误消息所说的那样。

因此，显然，您的项目文件没有`<PropertyGroup>`包含`<OutputPath>`Debug|AnyCPU 组合的 。

强制它的一种简单方法是为 OutputPath 属性提供一个值作为命令行开关：

```
MSBuild my.csproj /p:OutputPath=bin\Debug\ 
```

问题可能是通常`<PropertyGroup>`包含的`<OutputPath>`还有更多可能需要的选项，因此您可能只需要在项目文件中找到配置和平台的有效组合。找到这样的组合后，您可以使用相同的命令行开关相应地设置属性：

```
MSBuild my.csproj /p:Configuration=Release /p:Platform=x86 
```

# android - Android 4.0.3 ICS ArrayAdapter notifyDataSetChanged 不更新 ListView

> ID：12279934
> 
> 赞同：2
> 
> 时间：2012-09-05T10:58:33.463
> 
> 标签：android, listview, android-arrayadapter

关于列表视图及其适配器有很多问题，但我很确定我正确使用它。但是，我现在有一个列表视图，它不会（总是）在 Android 4.0.3（ICS，并且仅在某些特定布局中）上正确更新。

代码：

在 Activity 的 onCreate 中：

```
mListView = (ListView) findViewById( R.id.list);
mArrayAdapter = new CustomListAdapter( this, R.layout.row_layout);
// We update it manually, but leaving this default doesn't work either
mArrayAdapter.setNotifyOnChange( false);
mListView.setAdapter( mArrayAdapter); 
```

从单独的线程中，我接收到必须附加、替换、插入适配器的新数据。简单地说，我现在通过使用 clear 来使用完全替换示例：

```
private void updateList() {
  runOnUiThread(new Runnable() {
    public void run() {
      mArrayAdapter.clear();
      for (CustomItem item: mLastReceivedItems) {
        mArrayAdapter.add(item);
      }
      mArrayAdapter.notifyDataSetChanged();
    }
  });
} 
```

收到新项目时，它们会显示在列表中，但如果收到更新但没有任何项目。当适配器真的为空时，视图仍在显示项目。

该代码在 Android 2.3.7 上仍然有效，当我使用其他布局时我也无法重现它，但我看不出很多重要的差异。

有没有人找到任何布局参数或适配器函数来解决这个错误而不会损失太多性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:30:28.183

每次更新数据时，我通过在列表视图上设置相同的适配器找到了一种临时解决方法，因此列表视图将删除其所有“SMART”视图重新使用：

```
private void updateList() {
  runOnUiThread(new Runnable() {
    public void run() {
      mArrayAdapter.clear();
      for (CustomItem item: mLastReceivedItems) {
        mArrayAdapter.add(item);
      }
      mArrayAdapter.notifyDataSetChanged();
      // FIXME: Temp fix for ICS:
      mListView.setAdapter( mListView.getAdapter());
    }
  });
} 
```

我希望有人知道问题出在哪里，因为这样我们不再使用 ListView.mRecycler，所以我们在这里失去了性能。

# ruby - 在 Apache Web 服务器或 JRuby 上使用 Watir-webdriver 的 Ruby 脚本

> ID：12279937
> 
> 赞同：1
> 
> 时间：2012-09-05T10:58:43.127
> 
> 标签：ruby, tomcat, jruby, watir-webdriver

我需要运行一个包含用于自动浏览器测试的“watir-webdriver”gem 的 ruby​​ 脚本。我想知道以下内容：

1.  如果有一个选项可以在不使用 ruby​​ rails 的情况下在 apache web 服务器上运行 ruby​​ 脚本，如果是这样，请告诉我如何实现它。

2.  使用 Jruby 是从 apache Web 服务器运行 ruby​​ 脚本的一个选项，但显然 Jruby 不支持“watir-webdriver”。那么有没有办法使用从 Web 服务器调用的 watir 驱动程序运行 ruby​​ 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:52:55.887

为什么您认为 watir-webdriver gem 不适用于 JRuby？我刚刚测试过它，它工作得很好。

# iphone - 应用程序从主线程崩溃

> ID：12279941
> 
> 赞同：0
> 
> 时间：2012-09-05T10:58:55.517
> 
> 标签：iphone, objective-c, ios

我的 iPad 应用程序因以下崩溃日志而崩溃

```
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3290732c __pthread_kill + 8
1   libsystem_c.dylib               0x34c7c208 pthread_kill + 48
2   libsystem_c.dylib               0x34c75316 __abort + 86
3   libsystem_c.dylib               0x34c752ba abort + 122
4   libsystem_c.dylib               0x34c87efa szone_error + 262
5   libsystem_c.dylib               0x34c88b2a free_tiny_botch + 78
6   libsystem_c.dylib               0x34c33934 szone_free + 404
7   CoreFoundation                  0x374ab730 CFAllocatorDeallocate + 116
8   CoreFoundation                  0x374ab6a4 CFRelease + 1052
9   UIKit                           0x30704d98 -[UILabel dealloc] + 132
10  libobjc.A.dylib                 0x315d316e _objc_rootRelease + 30
11  UIKit                           0x30697d34 -[UIView(Hierarchy) removeFromSuperview] + 176
12  UIKit                           0x306c009e -[UIView dealloc] + 266
13  UIKit                           0x30704d08 -[UIControl dealloc] + 88
14  UIKit                           0x307c8a26 -[UITextField dealloc] + 566
15  libobjc.A.dylib                 0x315d316e _objc_rootRelease + 30
16  UIKit                           0x30697d34 -[UIView(Hierarchy) removeFromSuperview] + 176
17  UIKit                           0x306c009e -[UIView dealloc] + 266
18  libobjc.A.dylib                 0x315d316e _objc_rootRelease + 30
19  libobjc.A.dylib                 0x315d4e50 objc_release + 32
20  libobjc.A.dylib                 0x315d3ea6 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 218
21  libobjc.A.dylib                 0x315d3dc2 _objc_autoreleasePoolPop + 6
22  CoreFoundation                  0x374b2cf8 _CFAutoreleasePoolPop + 12
23  QuartzCore                      0x35e0d4b8 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 56
24  CoreFoundation                  0x37536b14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
25  CoreFoundation                  0x37534d50 __CFRunLoopDoObservers + 252
26  CoreFoundation                  0x375350aa __CFRunLoopRun + 754
27  CoreFoundation                  0x374b849e CFRunLoopRunSpecific + 294
28  CoreFoundation                  0x374b8366 CFRunLoopRunInMode + 98
29  GraphicsServices                0x376b1432 GSEventRunModal + 130
30  UIKit                           0x306c4cce UIApplicationMain + 1074
31  TestAPP                         0x000023aa main (main.m:15)
32  TestAPP                         0x00002368 start + 32`enter code here` 
```

在查看此崩溃日志后，我无法在崩溃日志中找到任何线索。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-05T11:36:15.287

这似乎是说明行'-[UITextField dealloc]' - 所以文本字段被释放，并且它清理了它的所有对象。最有可能崩溃的对象是“文本”属性，但它可能是您设置的任何其他属性，该属性被该文本字段保留。

所以要做的第一件事是追踪导致崩溃的 textField，然后查看您在该对象上设置的所有内容。

例如，（非 ARC）：

```
NSString *text = textField.text; // you don't own this object
[text release]; 
```

可能会导致崩溃（未对此进行测试）。textField 有很多属性——可以设置的视图——如果你设置一个并且过度释放它可能会导致崩溃。

编辑：看看这些行：

```
17  UIKit                           0x306c009e -[UIView dealloc] + 266
18  libobjc.A.dylib                 0x315d316e _objc_rootRelease + 30
19  libobjc.A.dylib                 0x315d4e50 objc_release + 32
20  libobjc.A.dylib                 0x315d3ea6 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 218 
```

从下到上，他的系统似乎正在弹出自动释放池，然后首先调用 UIView dealloc，然后开始释放该视图拥有的对象。这是我的解释，但我不是苹果工程师，所以我不确定 100%。

# javascript - 反转数组

> ID：12279948
> 
> 赞同：2
> 
> 时间：2012-09-05T10:59:23.303
> 
> 标签：javascript, jquery, arrays

我正在使用其本机方法过滤给定的*数组：*`.filter()`

```
var a = [1,2,3,4,5];

var b = a.filter(function(v) {
    return v > 2;
}); 
```

这将创建新的 Array ( `[3,4,5]`)。现在，我还想将过滤后的值放在另一个数组中。我在这里最好的选择是什么？我是不是该

*   将删除的值推送到同一过滤方法中的新数组**中？**
*   编写一个反转函数并在过滤后应用它？

要使用第一个选项，它可能会这样结束：

```
var b = a.filter(function(v) {
    return v > 2 || !c.push(v);
}); 
```

我对这个解决方案的问题是，它有点混合了两种不同的东西，对于将来阅读代码的人来说可能会非常混乱。作为替代方案，我可以调用类似

```
c = invert(a,b);

function invert(source, compare) {
    return source.filter(filterPositives);

    function filterPositives(v) {
        return compare.indexOf(v) === -1;
    };
} 
```

那有效吗？或者我可以做得更好吗？

任何其他（更优雅）的想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:05:20.077

我不认为通过源数组两次是一个优雅的解决方案。但是话又说回来，给自己添加副作用`filter`也不是很好。

我会通过编写一个`filterSplit`函数来解决这个问题，比如这个伪代码：

```
function filterSplit(
      Array source, Array positives, Array negatives, Function filterCb) 
{
  source.forEach(function(el) {
    if (filterCb(el)) {
      positives.push(el); 
    }
    else {
      negatives.push(el);
    }
  }
} 
```

...或者，如果您更喜欢退货中的数组...

```
function anotherFilterSplit(Array source, Function filterCb) {
  var positives = [], negatives = [];
  // ... the same check and push as above ...
  return [positives, negatives];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:12:05.727

```
var a=[1,2,3,4,5],b=[],c=[];

for(var i=0,l=a.length,ai=a[i];i<l;ai=a[++i])
    if(ai>2)b.push(ai);
    else c.push(ai);

console.log(b,c);
// [3, 4, 5]   [1, 2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:13:35.667

@raina77ow 的解决方案看起来不错。[最重要的是，这是Coco](http://github.com/satyr/coco)中的一个实现：

```
function filterSplit (source, predicate, positives = [], negatives = [])
  source.forEach -> (if predicate it then positives else negatives).push el
  return [positives, negatives] 
```

和编译好的 JavaScript

```
function filterSplit(source, predicate, positives, negatives){
  positives == null && (positives = []);
  negatives == null && (negatives = []);
  source.forEach(function(it){
    return (predicate(it) ? positives : negatives).push(el);
  });
  return [positives, negatives];
} 
```

- 所以你可以传入你的`positives`and `negatives`，或者不通过它们，在这种情况下你会得到新的空数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:47:33.070

由于 Andrew D. 已经写了一个很好的答案，我不确定我是否应该写这个，但是：

[http://jsfiddle.net/BsJFv/2/](http://jsfiddle.net/BsJFv/2/)

```
Array.prototype.divide = function(fun, neg) {
    if (this == null) throw new TypeError();

    var t = Object(this);
    var len = t.length >>> 0;
    if (typeof fun != "function") throw new TypeError();

    if (!(neg instanceof Array)) {
        throw new TypeError();
    }

    var res = [];
    neg.splice(0, neg.length);
    var thisp = arguments[2];
    for (var i = 0; i < len; i++) {
        if (i in t) {
            var val = t[i];
            if (fun.call(thisp, val, i, t)) {
                res.push(val);
            }
            else {
                neg.push(val);
            }
        }
    }

    return res;
}; 
```

这样你就得到了一个很好的除法功能。

第一个参数是要除以的函数，第二个参数是负值数组。

唯一的限制是您必须在调用之前将第二个参数实例化为数组：

```
var negatives = [];
var positives = x.divide(function(elem) {
    /* whatever you want to check */
}, negatives); 
```

# maven - OSGi Bundle MANIFEST 中的 Mercurial ChangeSet 与 Maven

> ID：12279952
> 
> 赞同：2
> 
> 时间：2012-09-05T10:59:38.203
> 
> 标签：maven, mercurial, osgi, maven-plugin, buildnumber-maven-plugin

我正在尝试使用 Maven在我的包文件中获取`Mercurial` `changeSet`和`changeSetDate`设置。`MANIFEST.MF``OSGi`

我已将其添加`buldnumber-maven-plugin`到我的`pom.xml`：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>buildnumber-maven-plugin</artifactId>
    <version>1.0</version>
    <executions>
        <execution>
            <phase>validate</phase>
            <goals>
                <goal>hgchangeset</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <doCheck>false</doCheck>
        <doUpdate>true</doUpdate>
    </configuration>
</plugin> 
```

我的捆绑插件看起来像这样：

```
<plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <version>2.3.7</version>
    <extensions>true</extensions>
    <configuration>
        <archive>
            <manifestEntries>
                <Build-Change-Set>${changeSet}</Build-Change-Set>
                <Build-Change-Set-Date>${changeSetDate}</Build-Change-Set-Date>
                <Build-Location>${basedir}</Build-Location>
                <Build-Machine>${env.COMPUTERNAME}</Build-Machine>
                <Build-Date>${maven.build.timestamp}</Build-Date>
            </manifestEntries>
        </archive>
        <instructions>
            <!-- All imports, exports, etc... -->
        </instructions>
    </configuration>
</plugin> 
```

当我执行`install`目标时，我看到`Maven`输出：

```
[INFO] --- buildnumber-maven-plugin:1.0:hgchangeset (default) @ esb-security ---
[INFO] Setting Mercurial Changeset: 6524595b0389+
[INFO] Setting Mercurial Changeset Date: 2012-09-05 11:38 +0100 
```

但在我的`MANIFEST.MF`我得到：

```
Build-Change-Set: ${changeSet}
Build-Change-Set-Date: ${changeSetDate} 
```

它不包括变更集和变更集数据的值。也许有人知道问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:04:14.510

除非 maven-bundle-plugin 明确支持 ${changeSet} 等表达式变量，否则在此插件执行之前，Maven 不会解析它们。因此，您可能必须在 process-resources 阶段之前使用单独执行 manifest 任务绑定，然后使用 Maven 的资源过滤支持对生成的 manifest 进行后处理并替换 maven-bundle-plugin 设置的那些变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T19:26:22.607

也许如果您将 hgchangeset 目标的阶段更改为“初始化”，它将在 Manifest 文件创建之前发生？

或者，您可以在资源文件夹中创建一个存根 MF 文件并使用过滤来进行变量替换，尽管 felix 应该能够为您执行此操作。

# sql - 当子查询不返回任何内容时，如何使 0>All() 返回 false？

> ID：12279955
> 
> 赞同：3
> 
> 时间：2012-09-05T10:59:42.150
> 
> 标签：sql

`0>All()`子查询什么都不返回时如何`false`返回？从逻辑上讲，就我而言，如果 all() 中没有任何内容，则 All() 不能 <0。

例子：

```
select x from table 
where  0 > ALL(complex subquery) 
```

如何修改它以使其为空列表返回 false。子查询又长又复杂，我不想重复两次，一次是exists()，一次是0>ALL()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:26:47.417

您可以使用

```
select x 
from table
where  x > (SELECT MAX(foo) 
                 FROM complex_subquery 
                 HAVING COUNT(*) = COUNT(foo)) 
```

如果子查询不返回任何行，`select MAX(foo)`则将返回`NULL`并`x > NULL`计算结果为，`unknown`因此不会被`WHERE`.

如果有任何`NULL`值，`foo`则该`HAVING`子句用于确保查询不返回任何行，以便维护正确的语义（如[@hvd](https://stackoverflow.com/users/743382/hvd)`ALL`所指出的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T11:24:41.100

（我会推荐 Martin Smith 对此的回答。）

一种选择是 CTE：

```
; with  CteAlias as
        (
        ... complex subquery ...
        )
select  col1 
from    table 
where   exists (select * from CteAlias)
        and x > ALL (select col1 from CteAlias) 
```

这仅适用于子查询与表不相关的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:11:38.113

您总是可以将返回的值存储`complex query`在表变量/临时表中，然后在主查询中使用它，除非这个复杂的子查询依赖于主查询？

此外，您可能希望考虑将[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)用于复杂查询，并以这种方式重用代码。

> 可以将公用表表达式 (CTE) 视为在单个 SELECT、INSERT、UPDATE、DELETE 或 CREATE VIEW 语句的执行范围内定义的临时结果集。CTE 类似于派生表，因为它不存储为对象，并且仅在查询期间持续存在。与派生表不同，CTE 可以是自引用的，并且可以在同一查询中多次引用。

# tfs - 并行开发 2 个版本的分支策略

> ID：12279959
> 
> 赞同：1
> 
> 时间：2012-09-05T10:59:53.750
> 
> 标签：tfs, merge, branch

我们有我们的 1.0 和我们的 2.0 版本，其中包含更多的签入和更改。有没有办法让它们保持同步？

我们有各种各样的变化：

*   仅 1.0 更改
*   仅 2.0 更改
*   两者的变化

问题是 1.0 和 2.0 的代码库会随着时间的推移越来越不同，随着两个版本的成熟，合并将成为一场噩梦。

我认为简单的发布分支不适用于我们，因为感觉主干/主干分支不存在。我们不能在一个分支中合并不同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:04:21.240

我们决定根本不使用分支。我们使用功能切换代替迁移时间，然后删除切换。

# asp.net-mvc-3 - 如何在 MVC3 中提交文件列表（待上传）

> ID：12279961
> 
> 赞同：0
> 
> 时间：2012-09-05T10:59:58.127
> 
> 标签：asp.net-mvc-3, razor

我正在研究网站的评论部分。在这里，对于一个特定的评论，用户可以附加多个文件，当提交表单时（我使用的是`@Html.BeginForm`），`HttpPostedFileBase`应该提交列表，然后在必须完成上传的方法中。在这种情况下，我有点迷失了。这样做的正确方法应该是什么？

PS：这些文件很小。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:04:23.393

这是一个例子

```
public string Upload(image image, HttpPostedFileBase filedata)
        {

              var fileName = Path.GetFileName(filedata.FileName);
              var path = Path.Combine(Server.MapPath("~/uploads/"), fileName);
              var extension = Path.GetExtension(path);
              filedata.SaveAs(path);

              if (ModelState.IsValid)
              {

                      image.image_name = fileName;
                      image.image_description = extension;

                      db.image.AddObject(image);
                      db.SaveChanges();
                  }

              }
            return "ok";
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T17:07:31.827

就这么简单，如果要上传多个文件。例如，如果有两个输入，其中类型是可以传递的“文件”。

```
@using (Html.BeginForm("Method", "Controller", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
   <input type='file' name='filename' id='fileid' />
   <input type='file' name='filename' id='fileid' />

} 
```

这可以很容易地在 post 方法中咳嗽为

```
public ActionResult Upload(IEnumerable<HttpPostedFileBase> filename)
{
    //uploading to the server is done here.
} 
```

# html - 带有 9 个参数的 DrawImage 与动力学 js

> ID：12279962
> 
> 赞同：0
> 
> 时间：2012-09-05T10:59:59.357
> 
> 标签：html, canvas, kineticjs, drawimage

我如何使用 Kinetics 的图像对象，但要使用 9 个参数绘制图像。例如我的代码是

```
 ctx.drawImage(imageObj, x, y, w, h, canvasWidth, canvasHeight, w, h); 
```

如何将此调整为图像对象：

```
image = new Kinetic.Image({
    image: imageObj,
    x: x,
    y: y,
    width: w,
    height: h,
    name: "image"
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:14:18.213

使用裁剪属性。

```
ctx.drawImage(imageObj, x_crop, y_crop, w_crop, h_crop, x, y, w, h);

<!-- is equivalent >

var image = new Kinetic.Image({
    x: x,
    y: y,
    width: w,
    height: h,
    name: "image", 
    image: imageObj, 
    crop: [x_crop, y_crop, w_crop, h_crop]
}); 
```

试试下面的例子（同样的裁剪，只使用画布，然后使用 Kinetic）：

```
<!DOCTYPE html>
<html>
    <head>

    </head>

    <body>
        <p>Image to use:</p>
        <img id="yoda" src="http://www.html5canvastutorials.com/demos/assets/yoda.jpg" alt="yoda" width="213" height="236" />

        <p>Canvas:</p>
        <canvas id="myCanvas" width="300" height="300" style="border:1px solid #d3d3d3;">
        Your browser does not support the HTML5 canvas tag.
        </canvas>

        <p>Kineticjs:</p>
        <div id="container" style="border:1px solid #d3d3d3; width:300px; height: 300px"></div>

        <script src="kinetic-v3.10.5.js"></script>
        <script>
            var c=document.getElementById("myCanvas");
            var ctx=c.getContext("2d");
            var img=document.getElementById("yoda");
            ctx.drawImage(img, 40, 30, 90, 90, 10, 10, 90, 90);

            var stage = new Kinetic.Stage({
                container: "container",
                width: 250,
                height: 300
            });

            var layer = new Kinetic.Layer();
            var imageObj = new Image();

            imageObj.src = "http://www.html5canvastutorials.com/demos/assets/yoda.jpg";
            var image = new Kinetic.Image({
                x: 10,
                y: 10,
                width: 90,
                height: 90,
                name: "image", 
                image: imageObj, 
                crop: [40, 30, 90, 90]
            });

            layer.add(image);
            stage.add(layer);

        </script>
    </body>
</html> 
```

# ibm-mq - 如何确定是否需要在 MQ 中保持命令服务器开启？

> ID：12279964
> 
> 赞同：2
> 
> 时间：2012-09-05T11:00:03.827
> 
> 标签：ibm-mq, mq

我从 MQ 安全演示中看到了一项建议，如果您不需要它，它会关闭命令服务器。我的问题是如何确定我是否真的需要它。从我的角度来看，如果没有运行目标 QMGR 的管理程序，例如 MQ Explorer 或其他向 QMGR 发送命令消息的程序，我们可以停止该命令服务器，对吗？</p>

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T11:28:17.427

命令服务器由 WebSphere MQ Explorer 和 SupportPac MO71 等桌面工具和 IR-360、AppWatch、QPasa 等中央生产力/管理工具使用！和别的。它还被监视代理（例如 Tivoli Omegamon XE for Messaging 和其他工具（例如您可能编写的自定义脚本））使用。如果您不使用任何这些工具，您可以关闭命令服务器。

作为一项规则，我建议人们在永远不会使用命令服务器的情况下关闭它。大部分时间关闭它然后在批准的更改窗口期间将其打开的替代方法有点复杂。在这种情况下，您真正​​得到的只是减少了攻击者的机会之窗，但您用它换取了额外的复杂性。例如，当需要打开命令服务器时，您首先需要确保队列是清空的，否则攻击者可以预先加载命令队列与命令。此外，如果可以访问 QMgr 的攻击者能够让后台进程在服务器上运行，它可以轮询命令队列并在将命令放入队列之前观察输入句柄。

您可能认为访问 QMgr 和运行守护程序的能力的先决条件是一个很高的标准，但考虑到大多数商店运行 WebSphere App Server 和 WebSphere Message Broker 时都具有完整的 MQ 管理员权限。在这些情况下，每个程序或工作流都是潜在的攻击者。尽管尚未公开报告涉及 MQ 的外部违规事件，但我参与过许多任务，其中 WMQ 被善意的员工破坏，他​​们只是试图完成工作，并通过使用他们的应用程序的管理权限来走捷径QMgr 来“修复”一些东西。

我通常做的例外是 B2B 网关 QMgrs。我通常会在这些方面设置很多安全性，并且不介意增加的复杂性。事实上，为 B2B 使用网关 QMgr 的原因之一是，您可以将复杂性限制在一台主机上，而不是允许外部连接在许多 QMgr 上终止，并且必须在所有 QMgr 上增加安全性。因此，我使用网关并将其保护到在整个网络中都不切实际的程度。

总而言之，如果您不使用任何远程生产力或管理工具，请继续关闭命令服务器。如果您确实需要偶尔运行它，请自动启动，以便在启动命令服务器之前清除命令队列（包括后续检查以确保深度为零）。这应该被视为二级安全控制，因为如果通道允许管理访问，它的有效性将有限。因此，请尽快升级到 V7.1 或更高版本，然后使用 CHLAUTH 规则和`SET AUTHREC`命令锁定通道，然后再过分担心命令服务器。

# javascript - 如何从 ember.js 1.0-pre 的内容属性中设置 {{collection}} 子视图 CSS 类名称？

> ID：12279965
> 
> 赞同：2
> 
> 时间：2012-09-05T11:00:05.377
> 
> 标签：javascript, ember.js

在 ember.js 0.9.x 中，子视图 CSS 类可以这样设置：

```
{{#collection
    contentBinding="App.someController"
    itemClassBinding="content.someProperty"}}

    {{content.displayProperty}}

{{/collection}} 
```

在 ember.js 1.0-pre 中，这似乎不再起作用，在这种情况下等效的代码是什么？

[这是ember.js 0.9.3](http://jsfiddle.net/Bamaz/)的一个工作示例，这里是[ember.js 1.0-pre 的一些失败尝试](http://jsfiddle.net/ckypx/)。

# matlab - matlab中imhist的错误

> ID：12279969
> 
> 赞同：0
> 
> 时间：2012-09-05T11:00:17.737
> 
> 标签：matlab

我是 matlab 的新手，现在我正在学习数字图像处理课程。我想在 matlab 中绘制图像的直方图，最初看起来很简单。但是，我总是遇到一些错误。我的代码是

* * *

```
I = imread('C:\Users\Saurabh\Pictures\myimage.jpg');
imhist(I,256) 
```

* * *

错误信息是

* * *

```
Error in ==> img_histogram at 2
imhist(I,256) 
```

* * *

有人可以解释一下错误吗！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:23:17.657

无论彩色或灰色图像，这都可以：

```
bins = 0 : 255;
I_col = reshape(I, [], size(I, 3));
hist(I_col, bins); 
```

假设图像的值是 0-255 范围内的 uint8

# android - Integer.parseInt 抛出 NumberFormatException？

> ID：12279975
> 
> 赞同：1
> 
> 时间：2012-09-05T11:00:32.337
> 
> 标签：android, datepicker

我在我的应用程序中使用 Datepicker。我想要做的是获取已经在文本字段中设置的日期并将其显示在 Datepicker 控件上。但是当我使用时我得到了 NumberFormatException

```
Integer.parseInt(splittedDate[2])  //i.e the year column. 
```

当我在调试 splittedDate 时看到包含三个很好的值。但是在最后一个索引处解析年份列时会引发异常。我无法理解为什么会这样。请帮我解决这个问题。以下是 Datepicker 的 CreateDialog 方法的实现。

```
@Override
protected Dialog onCreateDialog(int id) {
    if (id == DATE_DIALOG_ID) {
        if (birthDate.getText().toString().equalsIgnoreCase(""))
            return new DatePickerDialog(this, mDateSetListener, mYear,
                    mMonth, mDay);
        else {
            String[] splittedDate = birthDate.getText().toString().split("-");

            try{

                Log.i("Month String", splittedDate[0]);
                mMonth = Integer.parseInt(splittedDate[0]);
                Log.i("Day String", splittedDate[1]);
                mDay = Integer.parseInt(splittedDate[1]);
                Log.i("Year String", splittedDate[0]);
                mYear = Integer.parseInt(splittedDate[2]);

            }
            catch(Exception e)
            {
                Log.e("Number Format Exception Message: ",e.getMessage());
            }

            return new DatePickerDialog(this, mDateSetListener, mYear,
                    mMonth, mDay);

        }

    return null;
} 
```

这是 logCat 信息：

```
 09-05 16:21:54.722: E/AndroidRuntime(28596): FATAL EXCEPTION: main
 09-05 16:21:54.722: E/AndroidRuntime(28596): java.lang.NumberFormatException: unable to parse '1970 ' as integer
 09-05 16:21:54.722: E/AndroidRuntime(28596):   at java.lang.Integer.parse(Integer.java:383)
 09-05 16:21:54.722: E/AndroidRuntime(28596):   at java.lang.Integer.parseInt(Integer.java:372)
 09-05 16:21:54.722: E/AndroidRuntime(28596):   at java.lang.Integer.parseInt(Integer.java:332)
 09-05 16:21:54.722: E/AndroidRuntime(28596):   at com.test.project.activity.DetailActivity.onCreateDialog(DetailActivity.java:332) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:11:59.423

试试这个

```
Integer.parseInt(splittedDate[2].toString()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:39:05.387

将代码发布到您在`birthDate`字段中插入值的位置。检查不应该有任何`blank spaces`. 应该只有数字。从 Exception 来看，似乎`'1970 '`包含了一个空格。仔细检查birthDate字段..

# c# - 如何获取页面标题？

> ID：12279976
> 
> 赞同：3
> 
> 时间：2012-09-05T11:00:31.683
> 
> 标签：c#, asp.net

我有网络用户控制，我需要页面标题。我使用以下代码：

```
 string s = Page.Title; 
```

但它返回一个空字符串，而页面有标题。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:05:14.300

使用它可以帮助你

```
 string s=this.Parent.Page.Title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:06:51.303

这是因为你有

```
<%@ Page Title="" ... 
```

在 .aspx 的顶部。默认情况下，Visual Studio 将页面标题设置为空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:09:07.007

asp.net 页面的页面标题是在`FrameworkInitialize`.

这发生在之前`PreInit`。您的页面标题应该在 .asp.net 页面生命周期之后可用`PreInit`。

放置您的代码以在`Load`您的控件上检索标题，您应该一切顺利。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T11:07:14.333

用户控件没有属性`Title`。

您的代码正在使用`Page`. 那是.net 的一类。

如果你想使用`Page.Title`，那么请在你的 .aspx 页面代码后面尝试一下`this.title`。

```
this.Title will work in .aspx code behind only. 
```

# javascript - 如何找到一个单词在动态创建的html表格行中出现了多少次

> ID：12279978
> 
> 赞同：1
> 
> 时间：2012-09-05T11:00:48.087
> 
> 标签：javascript, html

我写了一个 xlst 代码来将 xml 转换为 html，它在 html 中创建了很多表。

表中有一个名为“类型”的列。其中包含单词

1) 追踪 2) 验证 3) 行动

上述 3 个单词将在表格的同一列中重复多次。我的要求是显示每个单词在列中出现的次数

我应该在加载 html 页面时立即显示计数

* * *

这是表的一般模式

```
/*Table Schema*/
<table>
<tr>
 <th>Time</th>
 <th>Position</th>
 <th>Type</th>
 <th>Message</th>
</tr>
<tr>
 <td>....</td>
 <td>....</td>
 <td>Action</td>
 <td>....</td>
</tr>
<tr>
 <td>....</td>
 <td>....</td>
 <td>Verification</td>
 <td>....</td>
</tr>
<tr>
 <td>....</td>
 <td>....</td>
 <td>Trace</td>
 <td>....</td>
</tr>
<tr>
 <td>....</td>
 <td>....</td>
 <td>Error</td>
 <td>....</td>
</tr> 
```

以上是表的一般架构和单词action，trace，error，verification在一个表中发生了很多次每种类型大约有5个表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:31:17.033

这是一个工作示例：

[http://jsbin.com/otezes/1/](http://jsbin.com/otezes/1/)

```
$(document).ready(function(){
  var rows = $("#aaa tr");
  var arr = {};
  rows.each(function(){
    var val = $(this).find("td").eq(0).text();
    if (val === "") return;
    if (typeof(arr[val])!= "undefined"){
      arr[val] = ++arr[val];
    }
    else{
      arr[val] = 1;
    }
  });

  console.log(JSON.stringify(arr));

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:28:24.673

演示：http: [//jsfiddle.net/PhB7x/5/](http://jsfiddle.net/PhB7x/5/) [演示](http://jsfiddle.net/PhB7x/5/)

您可以使用 jquery 执行此操作

考虑示例 html

```
 <table>
<tr>
    <th>Trace</th>
    <th>Verification </th>
    <th>Action</th>
</tr>
<tr>
    <td>A</td>
    <td>B</td>
    <td>CC</td>
</tr>
<tr>
    <td>D</td>
    <td>E</td>
    <td>CC</td>
</tr>
</table>
<table>
<tr>
    <th>Some</th>
    <th>Thing</th>
    <th>Dont</th>
</tr>
<tr>
    <td>A</td>
    <td>B</td>
    <td>CC</td>
</tr>
<tr>
    <td>D</td>
    <td>E</td>
    <td>CC</td>
</tr>
</table> 
```

js将是

```
 $(document).ready(function ()
{
    getOccurance("CC");
    function getOccurance(word)
    {
        $("table").each(function (tindx, tobj)
        {
            var noOfOccurance = 0;
            $("tr td:gt(1)", $(tobj)).each(function (ind, obj)
            {
                if (word == $.trim($(obj).text())) noOfOccurance++;
            });

            alert("Word " + word + " occurs " + noOfOccurance + " times in table  " + (tindx + 1));
        })
    }

}) 
```

​</p>

```
​ 
```

[让 Count 加载自身的演示](http://jsfiddle.net/PhB7x/7/)

[从每个表中获取计数的演示](http://jsfiddle.net/PhB7x/8/)

[从每个表中获取计数并在 html 本身中显示结果的演示](http://jsfiddle.net/PhB7x/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T11:20:12.423

我会将该行的文本放入一个变量中，并对所需的单词进行匹配，例如“Trace”。类似于以下内容：

```
var row = $('tr#action').text();
var count = row.match(/Trace/g); 
```

# mongodb - Mongodb Schema设计适合的一个建议

> ID：12279981
> 
> 赞同：0
> 
> 时间：2012-09-05T11:00:58.217
> 
> 标签：mongodb, mongodb-java, schema-design, mongodb-query

嗨，我是 mongodb 的新手。我正在使用 java。

我的关系表中有 2 个表系统 system_properties。

像这样的东西。

```
 Table              Fields                                        values

      System           System_ID(PK), System_Info                  100, cisc
                                                                   200, Gets
      System_prop      System_ID(FK), Prop_key, Description        100, good, success
                                                                   100, better,progress  
                                                                   200, worse,failed 
```

我正在尝试为此创建一个模式。例如：用于插入一个文档

```
 System
         {
             "_id" : 100
             "System_Info" : "cisc"
             System_Properties :
                 { "system_id":100
                        [{prop_Key : "good", Description: "success"}, 
                         {prop_Key : "better", Description: "progress"}] }
         } 
```

这是此设计的最佳架构吗？

为了避免连接，我们只嵌入文档。

我怀疑 system_id : 100 （关系表中的外键）是否必要，因为“_id” = 100 （关系表中的主键）也指相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:20:42.143

有几种方法可以设计该模式，甚至使用两个集合。所以：

您的应用程序如何使用存储的信息？

您在嵌入式属性方面是否有无限增长？=> 坏主意！

是否有一些只有两个属性，有的有 100 个，有的有 1k？=> 尝试在集合中坚持一种大小的文档。（使用bucketing，如果你想要favs/best 5作为你的主文档）

更多信息：[谈论艾略特霍洛维茨的架构设计](http://www.10gen.com/presentations/mongosf2011/schemascale)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:08:57.910

属性对象中的前八键不是必需的，因为您已将它们嵌入到文档中。系统属性应该只是一个数组，甚至是像这样的对象：

```
{
     "good": "success",
     "better": "progress"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:32:42.423

模式设计对数据库模型的效率非常重要。您要避免尝试以关系数据库的思维方式考虑 mongodb 的模式设计。具体到您的问题，您不需要系统 id 的外键，因为您将系统属性嵌入到系统文档中。此外，正如上面指出的康斯坦丁，您的系统属性字段可以直接进入您的系统文档而无需嵌入。

以下是一些链接，可让您开始思考在 mongodb 中进行模式设计时需要注意哪些事项：

# sql-server - SQL Server 1/Countif

> ID：12279982
> 
> 赞同：2
> 
> 时间：2012-09-05T11:00:58.430
> 
> 标签：sql-server, count

SQL Server 中是否有等效于 1/countif 的值？

就像是：

```
SELECT ID,1/COUNTIF(ID)
FROM Table 
```

...将 1 除以 Table 中具有特定 ID 的行数，以这种格式返回结果：

```
ID  Result
1   0.5
1   0.5 
2   1
3   0.33
3   0.33
3   0.33 etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:22:35.923

另一种变体，但我最喜欢@ypercube 的简单解决方案。

```
;WITH x(ID,c) AS (SELECT ID, COUNT(*) FROM dbo.Table GROUP BY ID)
SELECT t.ID, 1.0/x.c
FROM dbo.Table AS t
INNER JOIN x ON t.ID = x.ID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:08:50.630

如果您的版本是 2005 及更高版本，则可以使用`OVER`聚合`COUNT()`：

```
SELECT id
     , 1.0 / COUNT(*) OVER (PARTITION BY id) AS countif_ID
FROM TableX ; 
```

您可以在 MSDN 站点中找到更多示例：[`OVER`子句](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.90%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:14:21.430

不完全等同于 COUNTIF，但可以使用标准 SQL 轻松完成。尝试这样的事情（如果你的表被称为“测试”）：

```
SELECT ID,
       1.0 / (SELECT COUNT(*) FROM test t2 WHERE t2.ID = t1.ID) AS result
FROM   test t1; 
```

见[http://sqlfiddle.com/#!3/bfcbb/5](http://sqlfiddle.com/#!3/bfcbb/5)

# xcode - Xcode 方案自动更改

> ID：12279983
> 
> 赞同：0
> 
> 时间：2012-09-05T11:01:13.490
> 
> 标签：xcode

**昨天它正在工作并向我展示了在Device**、**iphone 模拟器**和**ipad 模拟器**上构建的选项，但今天它只显示了 mac。请看这张图片：-![在此处输入图像描述](../Images/a26e13223d7b7edc68503c18cb32dc9e.png)

编辑：-使用 Xcode 4.2 for lion 如何获得设备和模拟器以及 ipad 的构建选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:23:37.090

尝试这个 ！/不知道您正在运行哪个版本的 Xcode)

在 xCode（打开您的项目）中，在 SCM 下，选择“为此项目配置 SCM...”

*   在“常规”下，“项目格式：”选择 Xcode 3.2 - compatible
*   在“General”下，按“Rebuild Code Sense Index”
*   在“Build”、“Architectures”、“Base SDK”下选择“iOS Device 4.1”（我的 Iphone 运行的是 4.1，这在您的系统上可能看起来不同？）
*   关闭窗口，在左上角选择“设备”，然后按“构建并运行”。

# junit - Junit：模拟不作为参数传递给对象的对象

> ID：12279985
> 
> 赞同：0
> 
> 时间：2012-09-05T11:01:17.187
> 
> 标签：junit

我们如何在方法中使用不作为参数传递给方法的类的对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T11:02:55.117

听起来你需要*注入*这个对象，而不是仅仅依赖于它被类本身实例化。

请参阅[这篇](http://martinfowler.com/articles/injection.html)关于依赖注入的文章，以及[这篇文章](http://www.javaranch.com/journal/200709/dependency-injection-unit-testing.html)以获取特定于测试的信息。

# c# - 将列表框内容绑定到另一个列表框

> ID：12279988
> 
> 赞同：0
> 
> 时间：2012-09-05T11:01:19.980
> 
> 标签：c#

我的表单中有 2 个列表框，我将一些数据绑定到数据库中的第一个列表框。现在，当按下按钮时，我必须在第二个列表框中显示第一个列表框的选定项目。我能够一次显示一个选定的项目，但我无法显示多个选定的项目。我使用了一个哈希表和以下代码，请帮助我对这个概念不熟悉，谢谢。

```
Hashtable ht = new Hashtable();
ht.Add(listbox1.SelectedValue.ToString(),listbox1.Text.ToString());
int i = 0;
foreach (string ent in ht.Values)
{   
    string[] name = new string[listbox1.Items.Count];
    for (i = 0; i < listbox1t.SelectedItems.Count; i++)
    {     
        name[i] = listbox1.Text;
        this.listbox2.Items.Add(name[i]);
    } 
    listbox2.DisplayMember = ht.Values.ToString();
    listbox2.ValueMember = ht.Keys.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:36:52.417

`DisplayMember`不是应该显示的内容，而是为`Items`集合中的每个对象评估的属性的名称。因此，例如，代表客户的对象是`FullName`（[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)，包括示例）。

`ValueMember`应该包含唯一标识对象的属性名称，例如`CustomerId`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T11:50:36.823

将列表作为数据源分配给您的第一个列表控件：

```
listBoxControl1.Datasource = new List<string>() {"one","two","three","four"}; 
```

并在 selectedvaluechanged 事件中......

```
var tmp = listBoxControl1.SelectedItems.Cast<string>();
listBoxControl2.datasource = tmp.ToList<string>(); 
```

应该管用...

我以字符串为例，您应该转换为您使用的类。并且...在您的构造函数中分配 displayvalue 和 valuemember，无需多次执行。

# email - 如何检查电子邮件是否被打开？

> ID：12279989
> 
> 赞同：4
> 
> 时间：2012-09-05T11:01:20.583
> 
> 标签：email, newsletter

我正在寻找一种可靠的方法来检查用户是否打开了我发送给他的电子邮件。我知道我可以使用 PHP 脚本生成的一些图像（并在服务器端保存客户端标头/数据），但我的问题是 - 这可靠吗？一些网络客户端默认禁用图像，我不确定代理服务器、黑莓等...

那么 - 这个问题有没有好的可靠的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T11:03:27.973

没有可靠的解决方案（我很高兴没有）。如果用户仅将您的邮件视为文本，则不会下载任何内容（除了邮件本身）或类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:28:29.610

不幸的是，唯一的解决方案不存在。一些电子邮件服务提供商使用跟踪像素，一些使用外部 css 文件，一些跟踪图像 + 点击，一些跟踪电子邮件中任何图像的请求，一些甚至尝试合并漂亮的[标签，如 bgsound](https://plus.google.com/100163791375010553991/posts/ghcXadTegWX)。有些人将这一切结合起来。

唯一可以报告实际打开率的是那些可以直接访问用户收件箱的人：互联网服务提供商本身以及为 gmail、outlook 和 co 开发应用程序和插件的软件提供商。他们中的一些人向营销人员报告了实际的开放率。像[Mail.ru](http://asmarterplanet.com/smarter-commerce/smarter-planet/new-metrics-for-inbox-performance.html)、[OtherInbox](http://www.subjectlin.es/)和[eDataSource](http://www.prweb.com/releases/2012/5/prweb9531405.htm)。但由于显而易见的原因，这一切也不完美。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-26T12:39:27.870

只需为我的系统设置 Mailgun，他们报告打开的唯一方法似乎是嵌入一个小图像，当用户单击“显示图像”时，该图像会被下载并指示打开的电子邮件。此外，如果电子邮件中有链接，您可以记录对这些链接的访问，也表明打开。如果用户没有做这些，那么你永远不会知道。我认为这没关系，因为我也是电子邮件用户，如果我愿意，我希望能够维护我的隐私。我不会指望这种变化很快。

# google-drive-api - 同步上传文件

> ID：12279994
> 
> 赞同：1
> 
> 时间：2012-09-05T11:01:49.600
> 
> 标签：google-drive-api, google-docs-api

有没有办法同步上传文件？

我正在为我的 Web 应用程序使用 ASP.NET 4.0，并且由于文件大小总是相对较小（< 100kb），因此等待时间不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:29:13.507

Google Drive API 支持同步文件上传。

查看`files.insert`参考指南中的方法以获取更多详细信息：[https ://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

下面的片段摘自文档：

```
...
FilesResource.InsertMediaUpload request = service.Files.Insert(body, stream, mimeType);
request.Upload();

File file = request.ResponseBody;
... 
```

`request.Upload`上传完成后调用将返回，`request.ResponseBody`并将包含响应中的文件元数据。

# jquery - Jquery sidenav 切换

> ID：12279996
> 
> 赞同：1
> 
> 时间：2012-09-05T11:02:04.183
> 
> 标签：jquery, toggle

我有一个侧导航，我希望导航中的每个列表项都是可点击的，这会启动该部分的更多选项的切换。

到目前为止，我已经整理了我的粗略代码来尝试演示我在说什么。红色列将是由第一列上的每个链接触发的切换部分。但是，我的主要问题是有效实现这一目标的最佳方法。显然有 7 个链接，这意味着我需要 7 个切换。

JS 小提琴： http: [//jsfiddle.net/visualdecree/Be6ry/31/](http://jsfiddle.net/visualdecree/Be6ry/31/) *edit - 我要求 7 个链接都有一个单独的 div，可以使用不同的选项进行切换。

我会有 7 个由 7 个不同触发器切换的隐藏 div 吗？

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T11:26:30.023

请查看这个更新的小提琴，[http://jsfiddle.net/Be6ry/21/](http://jsfiddle.net/Be6ry/21/)

您需要做的就是使用适当的选择器查找它们，并将处理程序附加到 click 事件一次。

```
$(".sidenav li a").click(function(){
    alert("you have clicked on "+$(this).text());
});​ 
```

**澄清解决方案**

1-`$(".sidenav li a")`

此选择器将查找 li 列表中的所有锚点并保存对它们的引用。

2-`.click(function(){}`

这将为前一个选择器保留引用的所有 DOM 元素的 click 事件附加一个处理程序。

3- `alert("you have clicked on "+$(this).text());`

只是一个示例动作，在这里做任何你想做的事情。

无需在这里使用 7 个不同的处理程序 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:37:18.260

**jQuery：**

```
$(".sn a").on('click',function(){
    var panID = $("#" + $(this).data('panel') );
    $("div[id*='sn-pan-']").hide({slide:'toggle'}, 1000);
    $(panID).css("left","100px").animate({width:'toggle'}, 500)
})​; 
```

**侧导航 HTML：**

```
<ul class="sidenav">
    <li class="sn"><a href="#" data-panel="sn-pan-1">Lorem</a></li>
    <li class="sn"><a href="#" data-panel="sn-pan-2">Ipsum</a></li>
    <li class="sn"><a href="#" data-panel="sn-pan-3">Dolar</a></li>
    <li class="sn"><a href="#" data-panel="sn-pan-4">Sit</a></li>
    <li class="sn"><a href="#" data-panel="sn-pan-5">Amet</a></li>
    <li class="sn"><a href="#" data-panel="sn-pan-6">Et</a></li>
    <li class="sn"><a href="#" data-panel="sn-pan-7">Donut</a></li>
 </ul> 
```

**侧导航面板 HTML：**

```
 <!-- hidden panel that slides out? -->
 <div id="sn-pan-1">
     <ul>
         <li>Stuff 1</li>
         <li>Here</li>
     </ul>
  </div>
 <div id="sn-pan-2">
     <ul>
         <li>Stuff 1</li>
         <li>Here</li>
     </ul>
  </div>
  ...
  ...
  <div id="sn-pan-7">
     <ul>
         <li>Stuff 7</li>
         <li>Here</li>
     </ul>
  </div> 
```

**CSS：**

```
.sn a {
    width: 100%;
    display: block;
    overflow: hidden;
    padding: 10px 0;
    border-bottom: 1px solid #
}

div[id*="sn-pan-"]{
    float: left;
    background: red;
    width: 100px;
    height: 100%;
    position: absolute;
    left: 0px;
    top: 0;
    display: none;
} 
```

## [看演示](http://jsfiddle.net/akhurshid/4A23Z/)