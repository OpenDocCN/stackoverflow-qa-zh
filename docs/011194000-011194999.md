# StackOverflow 问答 11194000-11194999

# magento - Magento 无法将简单的产品与可配置的产品相关联

> ID：11194001
> 
> 赞同：5
> 
> 时间：2012-06-25T17:11:50.827
> 
> 标签：magento

我创建了一个可配置的产品并转到关联的产品选项卡，并使用快速创建产品功能根据我的配置创建了一堆产品。但是，这些产品均未出现在相关产品列表中。

我注意到我创建的属性甚至没有显示在编辑产品页面上，无论是简单产品还是可配置产品。

我首先为要添加的可配置产品创建 3 个新属性，为每个属性设置选项并基于默认值创建一个新属性集，其中包括我创建的新属性。

当我创建新的简单产品或可配置产品时，您看不到我创建的属性。我已经尝试使用常规选项卡以及它们自己的选项卡中的属性。但是当您尝试编辑产品时，它们永远不可见。

我怀疑我无法关联产品的原因是由于这个奇怪的问题

我正在使用 1.4.2 [编辑添加我的工作流程/屏幕抓取]

*   [http://www.buggyon purpose.com/magento/configurable_products/01-attirubte_set.png](http://www.buggyonpurpose.com/magento/configurable_products/01-attirubte_set.png)
*   [http://www.buggyon purpose.com/magento/configurable_products/02-create_configurable.png](http://www.buggyonpurpose.com/magento/configurable_products/02-create_configurable.png)
*   [http://www.buggyon purpose.com/magento/configurable_products/03-setup_configurable.png](http://www.buggyonpurpose.com/magento/configurable_products/03-setup_configurable.png)
*   [http://www.buggyon purpose.com/magento/configurable_products/04-quick_create.png](http://www.buggyonpurpose.com/magento/configurable_products/04-quick_create.png)
*   [http://www.buggyon purpose.com/magento/configurable_products/05-associate_product.png](http://www.buggyonpurpose.com/magento/configurable_products/05-associate_product.png)
*   [http://www.buggyon purpose.com/magento/configurable_products/06-manage_products.png](http://www.buggyonpurpose.com/magento/configurable_products/06-manage_products.png)
*   [http://www.buggyon purpose.com/magento/configurable_products/07-edit_product.png](http://www.buggyonpurpose.com/magento/configurable_products/07-edit_product.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T16:28:41.137

花了一段时间，但终于弄明白了。当我创建属性时，在属性属性中显示“应用到：”我只将其分配给可配置产品，但您也必须将其分配给简单产品。（或仅适用于所有人）

请记住，您必须重新创建原始的可配置产品才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:51:09.340

假设您已经创建了带有选项和属性集的属性。您能否再次创建可配置产品

1.  管理产品-> 添加产品选择您的默认属性集和可配置产品选项。

2.  下一个窗口将选择您已创建的属性。假设有颜色、香味和体积这三个属性作为三个不同的属性，您在此处选择香味以将 Configurables 与您将要创建的简单对象相关联。成功创建可配置产品后。

3.  基于相同的属性集默认创建简单的产品

4.  您必须能够看到您创建的所有属性（颜色、香味和体积）。

5.  请为 Fragrance 属性选择任何选项。
6.  转到管理产品 -> 选择以编辑您刚刚创建的可配置产品。
7.  转到“关联产品”选项卡，然后从最左侧的下拉列表中选择“任何”。
8.  您必须能够看到您现在创建的 Simple
9.  您还必须能够看到产品网格上方的父子链接属性“香水”。
10.  在查看它们是否出现在前端之前，请确保简单在“有货”中。

该属性不需要出现在可配置产品编辑页面中。按照上面的步骤，希望它会指导你。如果您无法执行上述任何步骤，请告诉我。

您还可以阅读以下链接，这对于创建配置产品非常有用。 [http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product/](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product/)

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T16:10:01.923

我遇到过同样的问题。

一种可能的解决方法是在单个产品中添加属性，并在它们通过“应用到：”处的可配置产品变得可用之后。

# java - Java对象锁定：调用其他方法时出现死锁？

> ID：11194014
> 
> 赞同：4
> 
> 时间：2012-06-25T17:12:42.090
> 
> 标签：java, multithreading, locking, deadlock

如果我在两种方法中使用 synchronize(this) 并且一种调用另一种方法，我会陷入死锁情况还是会因为线程已经拥有锁而工作？

想象一下下面的班级：

```
public class Test {
  public void foo() {
    synchronize(this) {
      bar();
    }
  }

  public void bar() {
    synchronize(this) {
      // do something
    }
  }
} 
```

如您所见，有两个方法 foo 和 bar，它们都依赖于同步。

调用 foo() 时，会在 (this) 上获得一个锁；bar 会在 foo 调用时尝试做同样的事情（从而导致死锁）还是会意识到锁已经被同一个线程获得？

希望我的解释或多或少清楚;-)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T17:13:31.807

该`synchronized`块是可重入的（实际上，Java 监视器是可重入的，非常清楚），因此在您的情况下不会发生死锁。

根据[文档](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)：

> 回想一下，一个线程不能获得另一个线程拥有的锁。但是线程可以获取它已经拥有的锁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T17:14:58.370

如果线程持有对象的锁，它可以基于该锁对象进入其他同步块。

[在这里](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)你可以读到

“......线程*可以*获取它已经拥有的锁。允许线程多次获取相同的锁可以实现*重入同步*。这描述了同步代码直接或间接调用也包含同步代码的方法的情况，并且两组代码都使用相同的锁。如果没有可重入同步，同步代码将不得不采取许多额外的预防措施来避免线程导致自身阻塞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:22:49.797

不过要注意的一件事是：

```
Thread A has the lock in foo() and needs to call bar()

and Thread B has the lock in bar() while needing to call foo() 
```

# php - PHP组合两个具有相同值的不同键的数组？

> ID：11194016
> 
> 赞同：0
> 
> 时间：2012-06-25T17:12:42.683
> 
> 标签：php, arrays, merge

我试图想出一种方法，将两个具有不同键名和相同值的数组结合起来？匹配值的顺序可能不同，因此需要检查它是否匹配，如果是则合并。有没有简单的方法可以完成？任何帮助或指导表示赞赏。

阵列 1

```
Array
(
[0] => Array
    (
        [location_id] => 1
        [location_title] => Centralia
        [location_slug] => Centralia
        [state_name] => Illinois
    )

[1] => Array
    (
        [location_id] => 3
        [location_title] => Columbia
        [location_slug] => columbia
        [state_name] => Illinois
    )

[2] => Array
    (
        [location_id] => 15
        [location_title] => Dixon Hennepin
        [location_slug] => dixon-hennepin
        [state_name] => Illinois
    )
) 
```

阵列 2

```
Array
(
[0] => Array
    (
        [hours_locationid] => 3
    )

[1] => Array
    (
        [hours_locationid] => 1
    )

[2] => Array
    (
        [hours_locationid] => 15
    )
) 
```

结果

```
Array
(
[0] => Array
    (
        [location_id] => 1
        [location_title] => Centralia
        [location_slug] => Centralia
        [state_name] => Illinois
        [hours_locationid] => 1
    )

[1] => Array
    (
        [location_id] => 3
        [location_title] => Columbia
        [location_slug] => columbia
        [state_name] => Illinois
        [hours_locationid] => 3
    )

[2] => Array
    (
        [location_id] => 15
        [location_title] => Dixon Hennepin
        [location_slug] => dixon-hennepin
        [state_name] => Illinois
        [hours_locationid] => 15
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:18:00.670

```
foreach($array1 as $i => $data) {
  if(array_search(array('hours_locationid'=>$data['location_id']), $array2) !=== false)
     $array1[$i]['hours_locationid'] = $data['location_id'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:24:47.413

```
foreach ($array1 as $val1) {

    foreach ($array2 as $key => $val2) {

        if ($val1['location_id'] == $val2['hours_locationid']) {

            $val1['hours_locationid'] = $val2['hours_locationid'];
            $results[] = $val1;
            unset($array2[$key]);
        }
    }
}

var_dump($results); 
```

应该可以工作，尽管正如评论中提到的那样，这是非常微不足道的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:49:26.977

试试下面这个，

替换 $array1 和 $array2 -> 演示：[http ://codepad.org/1inDuoVe](http://codepad.org/1inDuoVe)

```
<?php
$array1 = array(array("a"=>"aaa","b"=>"bbb"),array("x"=>"xxx","y"=>"yyy"));
$array2= array(array("c"=>"ccc"),array("z"=>"zzz"));
$i=0;
$j=0;
foreach($array2 as $single){
    foreach($array1 as $multiple){
        if($i == $j){
            $keys = array_keys($single);

            print $key = $keys[0];
            $multiple = array_push_assoc($multiple,$key,$single[$key]);
            $array1[$j] = $multiple;
        }
        ++$j;
    }
    ++$i;
}

var_dump($array1);

function array_push_assoc($array, $key, $value){
$array[$key] = $value;
return $array;
}
?> 
```

# internet-explorer - 在 IE8 中调整浏览器大小时，EXTJS 控制被剪裁

> ID：11194021
> 
> 赞同：1
> 
> 时间：2012-06-25T17:12:50.543
> 
> 标签：internet-explorer, extjs

在 IE8 中调整浏览器大小时，我的搜索按钮和时间范围会被剪裁。有人知道吗？谢谢

调整大小之前： [https ://picasaweb.google.com/lh/photo/XHZFjNdbeuJBNeGvJeC7vtMTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/XHZFjNdbeuJBNeGvJeC7vtMTjNZETYmyPJy0liipFm0?feat=directlink)

调整大小后： [https ://picasaweb.google.com/lh/photo/8ea70qzSUIq5uBX9HWbF39MTjNZETYmyPJy0liipFm0?feat=directlink](https://picasaweb.google.com/lh/photo/8ea70qzSUIq5uBX9HWbF39MTjNZETYmyPJy0liipFm0?feat=directlink)

这是我的代码：

```
this.searchPanel = new Ext.Panel({
    id: 'search-panel',
    margins: '5 5 5 5',
    layout: 'card',
    activeItem: (this.DEFAULT == 'advanced') ? 1 : 0,
    region:'north',
    split: true,
    frame: true,
    title: i18n('search'),
    collapsible: true,
    titleCollapse: false,
    toolTemplate: searchToolTpl,
    tools:[ searchToggleTool ],
    bodyStyle: 'padding:3px 0 0',
    items: [ this.basicSearchForm, this.advancedSearchForm ],
    monitorResize:true
});

this.on('resize', function(){
    //console.log('search panel resized, manualMode: +this.manualMode);
    if(this.manualMode){
        //resized by a drag of splitter
        //what's the docclass
        var currentDocClass = docclass.selectedDocClass.replace('=','');
        this.createCookie('advHeight'+currentDocClass, this.getHeight(), 30);
        this.manualMode = false;//reset mode
    }
}); 
```

# c# - 运行 NxBRE 时无法找到 NUnit 目录

> ID：11194025
> 
> 赞同：1
> 
> 时间：2012-06-25T17:13:03.067
> 
> 标签：c#, namespaces, nunit, nxbre

我首先要承认我是一个非常新手的开发人员，所以我正在尽我所能提供所有相关信息以使这个问题可以回答：

因此，在开始尝试进一步使用引擎之前，我正在尝试对 NxBRE 进行一些单元测试。我已经下载了 NxBRE 和 NUnit（分别是 3.2 和 2.6 版），并且我已经使用我可以在此处发布的一个简单示例测试了 NUnit 以确保它正常工作，但这样做似乎无关紧要。重要的是我可以轻松地引用示例中的 nunit.framework.dll，并且编译测试的属性和 GUI 完美地运行测试。顺便说一句，我正在使用 SharpDevelop。

然后我打开了提供的 NxBRE 解决方案，它有两个项目（NxBRE 和 NxBRE-UnitTest），在 Unit-Test 项目中将相同的引用添加到 nunit.framework.dll，并尝试构建解决方案。我收到一个编译器错误（以及许多相关错误），说明：

> CS0246：找不到类型或命名空间名称“nunit”（您是否缺少 using 指令或程序集引用？）

好吧，我很确定我也没有错过，所以我仔细检查了参考，它看起来不错（因为我按照我的测试示例的方式重新添加了它）。我什至手动将 .dll 复制到正在访问的目录中。我不认为这是 NUnit 本身的问题，因为我回到我精心制作的示例，它仍然运行良好。

您对我应该尝试的故障排除想法或技术有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:30:30.200

我检查了NxBRE 3 测试项目的[`.csproj`文件](https://github.com/ddossot/NxBRE/blob/master/NxBRE3/Test/NxBRE-UnitTest.csproj)，没有与`nunit.framework`.

换句话说，测试项目期望*NUnit*安装在 Global Assembly Cache 中。可能是您没有通过其*.msi文件安装**NUnit* ，而是从*.zip*文件中解压缩它？

 **我的建议是从测试项目中删除`nunit.framework`引用，然后通过浏览文件系统中的实际 DLL 文件再次添加引用。**

# java - Jersey UnmarshalException JAXB，具有多个 getEntity() 的 XML

> ID：11194027
> 
> 赞同：2
> 
> 时间：2012-06-25T17:13:06.920
> 
> 标签：java, jersey, marshalling

我得到了这个例外。

我的对象看起来像这样：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class ObjectDTO implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = -8545841080597549468L;

@XmlElement(name="objectId")
private String objectId;
@XmlElement(name="owner")
private String owner;
@XmlElement(name="objectName")
private String objectName;

Constructor, getter/setter, toString, Hash... 
```

现在我调用我的服务方法：

```
 ClientResponse postRes = service.path("rest").path("object").accept(MediaType.APPLICATION_XML).post(ClientResponse.class, object); 
```

当我做

```
 System.out.println(postRes.getEntity(ObjectDTO.class)); 
```

它工作正常。但是当我尝试对我的对象执行 get 操作时，例如：

```
 String string = postRes.getEntity(ObjectDTO.class).getObjectId(); 
```

我得到了例外。

```
 javax.ws.rs.WebApplicationException: javax.xml.bind.UnmarshalException - with linked exception: [org.xml.sax.SAXParseException: Premature end of life.] 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:14:51.413

看起来您正在尝试读取实体两次（第二次实体流已被消耗）。与其调用 postRes.getEntity() 两次，不如只调用一次，将结果存储在一个变量中，然后对该变量进行操作。

# wordpress - 插件菜单未出现在管理面板中

> ID：11194028
> 
> 赞同：16
> 
> 时间：2012-06-25T17:13:16.397
> 
> 标签：wordpress

我有一个非常简单的问题。我是 WordPress 新手，我正在尝试安装插件。

每个人都说管理面板的侧边栏菜单上有一个“插件”选项，但我没有看到！我也在所有子菜单中寻找它。

每当我尝试搜索此问题时，我都会得到有关创建插件以显示在管理菜单上的结果。

无论如何，我怎样才能让插件菜单显示出来？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-25T20:38:01.620

这个问题几乎肯定与以下两件事之一有关：

1）您没有权限（您是否以管理员身份登录？）

或者

2) 主题（或插件）禁用了插件菜单。

在您确认自己是管理员后，您应该尝试查看此页面：

[http://www.yourdomain.com/wp-admin/plugins.php](http://www.yourdomain.com/wp-admin/plugins.php)（将 www.yourdomain.com 替换为您网站的域名）。

如果它可以访问，那么是时候开始探索主题（您使用的是哪个主题？）以及可能禁用菜单项的一些插件。

仅供参考，此处介绍了删除仪表板菜单项的方法：http: [//www.wprecipes.com/how-to-remove-menus-in-wordpress-dashboard](http://www.wprecipes.com/how-to-remove-menus-in-wordpress-dashboard)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-04-02T11:25:06.217

如果您确实仔细检查了您的文件权限（即 Linux 上的文件夹为 755，wordpress 文件为 644），请考虑编辑您的`wp-config.php`文件并更改

```
define('DISALLOW_FILE_MODS',true); 
```

到

```
define('DISALLOW_FILE_MODS',false); 
```

菜单中的`Add New`选项`Plugins`将显示，如果您有互联网连接，可能的更新将显示。

![在此处输入图像描述](../Images/78eab919b2f270cfc1630392a8f7ea4e.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-13T11:31:59.923

这是我发现寻找相同问题的原因，我想这也是您的情况：

**如果您的网站托管在**WordPress.com 上：

> 插件：插件是用于扩展 WordPress 平台功能的工具。但是，它们仅适用于使用 WordPress.org 软件的自托管博客和网站。**出于各种安全原因，WordPress.com 不允许使用插件。**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-30T09:19:31.980

在 wordpress.com 托管网站上，您无权安装插件。你必须有一个自己的 wordpress 安装才能做到这一点。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-08T20:54:10.593

我发现这篇文章正在寻找有关自托管 WordPress 安装的类似问题的帮助 - 在这种情况下，它是一个朋友付钱给某人制作的网站，但后来让他们停止工作并请我帮忙。

缺少几个常规菜单选项——结果是因为以前的网络人安装了一个名为[Admin Menu Editor的插件，以限制我朋友可以使用的选项，这样他们就不会搞砸了。](https://en-gb.wordpress.org/plugins/admin-menu-editor/)

在这种情况下，我可以通过访问来访问 Admin Menu Editor 的选项`http://www.example.com/wp-admin/options-general.php?page=menu_editor`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-25T17:16:56.567

我以前从未见过这个问题。但是，请尝试扩展所有当前菜单项以查看是否在其中列出了**“插件” ，或者尝试****停用**部分/所有插件以查看其中一个插件是否以某种方式发生冲突并使您的插件菜单**不**显示。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-25T14:07:31.810

在我的一种情况下，事实证明这是严格的文件权限，因此 apache 用户无法访问插件目录。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-11-20T03:26:56.793

我知道这是一个老问题，但我最近在工作中遇到了这个问题，我继承了一个最初由外部公司开发的 WordPress 网站。我将其追踪到分配给用户帐户的角色。我获得的*“管理员”*帐户实际上被分配了一个受限角色，该角色无权访问大多数设置。

幸运的是，我可以访问数据库，因此可以直接修改分配的角色。WordPress 中默认的数据库前缀是，`wp`但您可能需要根据自己的数据库调整这些步骤。

首先，`user_id`在`wp_users`表中找到您要修改的帐户，然后对您的 WordPress 数据库运行以下 SQL。

```
UPDATE wp_usermeta SET meta_value = "a:1:{s:13:""administrator"";b:1;}" WHERE user_id = {your_user_id} AND meta_key = "wp_capabilities";
UPDATE wp_usermeta SET meta_value = "10" WHERE user_id = {your_user_id} AND meta_key = "wp_user_level"; 
```

下次您使用该用户帐户登录时，它现在应该具有管理员权限。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-17T14:11:41.197

如果您使用的是 Wordpress的**多站点功能，则****只有超级管理员才能看到插件菜单**。

在菜单中，转到页面顶部的“我的站点”，然后单击“网络管理员”。（如果您没有此选项，则您不是超级管理员。）在“网络管理员”下单击“仪表板”，然后将出现插件菜单。在您的网络设置中，您可以为站点启用插件。

我遇到的问题更加棘手：没有人是超级管理员。我通过覆盖“is_super_admin”函数（总是返回true）然后根据需要编辑设置来解决这个问题，然后再次删除覆盖。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-18T18:25:11.403

如果您安装本地 WordPress，则您工作的任何网站都不会出现插件子菜单。单击页面顶部的我的站点区域，然后单击网络管理员，然后单击仪表板。插件子菜单将出现在那里。然后安装新插件并在您正在工作的网站上使用它。祝你好运。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-18T04:51:56.710

对我来说，改变**wp-config.php**中的行是有效的。我变了：

```
define('DISALLOW_FILE_EDIT', true); 
define('DISALLOW_FILE_MODS', true); 
```

到

```
define('DISALLOW_FILE_EDIT', false);
define('DISALLOW_FILE_MODS', false); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-02T15:18:09.527

可能有几个相同的原因。他们之中有一些是：-

原因 1 - 当网站托管在 wordpress.com 上时

原因 2 - 当用户使用非管理员帐户登录时

原因 3 - 当 WordPress 网站/博客是多站点网络的一部分并且网络管理员已禁用插件菜单时

原因 4 - 插件冲突

# javascript - 汉字编码

> ID：11194038
> 
> 赞同：-3
> 
> 时间：2012-06-25T17:14:13.603
> 
> 标签：javascript, jquery, unicode, character, cjk

我正在开发一个多语言网站。我对汉字的颜色有问题。我的文字颜色是#333333，但汉字看起来比西方字符暗。我的内容来自数据库。

我想用 Javascript / jQuery 来做。`.fromCharCode()`该脚本使用该函数从段落中检测 Unicode 。但是[我读到](http://www.khngai.com/chinese/charmap/tbluni.php)的是该函数需要一个整数，而中文字符的 Unicode 不是整数。这应该是我的功能不起作用的原因。

**编辑**

这是我得到的图像：

![http://tinypic.com/r/2s94lz6/6](../Images/52c475055b747a566fed89a3d75e0766.png)

我检查 Unicode 的功能：

```
if($('#container p').fromCharCode(4E00)){
    alert('Chinese');
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:39:55.270

屏幕截图表明，不同的字符取自不同的字体。当主要字体不包含所有相关字符时，通常会发生这种情况。所以很有可能你正在尝试解决错误的问题。也许您应该考虑提出适合将出现在内容中的所有字符的字体建议。

代码片段在几个方面存在错误。例如，4E00 应该是 0x4E00。即使这样，您也只会检查单个字符。

您需要发布完整的代码或 URL，或两者兼而有之，以获得更具建设性的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T12:25:31.757

您的问题是您正在以专为繁体中文设计的字体显示简体中文。因此，当显示引擎遇到简化的字符（因此不是传统字体）时，它会采用默认的简化字体并使用它。然后它反转回传统字体。因此看起来不合时宜。

您需要研究最常见的简体中文字体（或字体系列），并将其专门用于简体中文文本。像 Heiti TC 和 Heiti SC 这样的东西。

# perl - 为什么 Perlbrew 在 Mac OS X Lion 上启动 bash？

> ID：11194041
> 
> 赞同：4
> 
> 时间：2012-06-25T17:14:28.227
> 
> 标签：perl, perlbrew

当我跑...

`perlbrew switch perl-5.16.0`

……我明白了……

`A sub-shell is launched with perl-5.16.0 as the activated perl. Run 'exit' to finish it.`

...然后出现一个 bash 提示。

这是预期的行为吗？如果没有，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T17:28:16.443

当您安装了不正确的`perlbrew`. 作为安装的一部分，系统会指示您向 shell 启动脚本添加一个命令，但似乎缺少该命令。

将以下内容添加到您的 shell 启动脚本中：

```
source .../perlbrew/etc/bashrc 
```

有一个类似的脚本`csh`。

```
source .../perlbrew/etc/cshrc 
```

# algorithm - 后缀数组与后缀树

> ID：11194042
> 
> 赞同：17
> 
> 时间：2012-06-25T17:14:36.030
> 
> 标签：algorithm, time-complexity, suffix-tree, space-complexity, suffix-array

我只想知道，什么时候后缀树优于增强的后缀数组。

在阅读[了用增强的后缀数组替换后缀树](http://www.vmatch.de/AboKurOhl2004.pdf)之后，我看不到使用后缀树的理由了。有些方法可能会变得复杂，但是您可以使用后缀数组来做所有事情，您可以使用后缀树来做任何事情，并且您需要相同的时间复杂度但更少的内存。

一项[调查](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.70.5990&rep=rep1&type=pdf)甚至表明，后缀数组更快，因为它们对缓存更友好，并且不会产生尽可能多的缓存未命中，然后是后缀树（因此缓存可以更好地预测数组使用情况，然后是递归树结构）。

那么，有谁知道选择后缀树而不是后缀数组的原因？

**编辑** 好的，如果您知道更多，请告诉我，到目前为止：

*   后缀数组不允许在线构建
*   一些模式匹配算法在后缀树上运行得更快
*   （补充）由于在线构建，您可以将其保存在 hd a 并扩大现有的后缀树。如果您使用 SSD，它也应该很快安静。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:15:47.000

SO 本身就这个主题有一些[有趣的想法。](https://stackoverflow.com/questions/2487576/trie-vs-suffix-tree-vs-suffix-array)您还可以在线找到[更多可用的技术资料](http://www.cs.iastate.edu/~cs548/suffix.pdf)。还有[另一篇论文](https://kuscholarworks.ku.edu/dspace/bitstream/1808/7177/1/vitter_2005.pdf)可以帮助您解决问题，声称是实现这些结构的另一种有效方法。

我不是这个问题的专家，但在我看来，后缀数组可能会慢一些，即使它们更节省空间。尽管如此，我缺乏对他们两个更详细的实践经验。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-03T14:34:25.653

另一个证明后缀树优越的例子：

如果您已经有后缀树，则可以轻松构建后缀数组。

但是从后缀数组构造后缀树要复杂得多。

# django - 我可以将 2 个不同的 Django 应用程序指向 2 个不同的网址吗？

> ID：11194044
> 
> 赞同：-3
> 
> 时间：2012-06-25T17:14:42.120
> 
> 标签：django

我有一个名为 xyz.com 的域，它运行一个带有数据库的 django 项目。我有另一个 Django 项目，它应该指向 xyz.com/pray 和不同的数据库。有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:26:27.157

是的，我会看两件事：

1.  用于您的一个应用程序的数据库路由器
2.  每个应用程序的 urls.py 文件

项目/urls.py：

```
urlpatterns = patterns('',
    ...
    url(r'^pray/', include('prayapp.urls')), # all of this apps ulrs start with /pray
    url(r'^', include('otherapp.urls')), # all of these urls start at the root /
    ...
) 
```

并来自[https://docs.djangoproject.com/en/1.3/topics/db/multi-db/#an-example](https://docs.djangoproject.com/en/1.3/topics/db/multi-db/#an-example)：

数据库设置：

```
DATABASES = {
# for the rest of your project
'default': {
    'NAME': 'app_data',
    'ENGINE': 'django.db.backends.postgresql_psycopg2',
    'USER': 'postgres_user',
    'PASSWORD': 's3krit'
},
# for your prayapp
'other': {
    'NAME': 'user_data',
    'ENGINE': 'django.db.backends.mysql',
    'USER': 'mysql_user',
    'PASSWORD': 'priv4te'
}
} 
```

自定义路由器：

```
class PrayAppRouter(object):
    """A router to control all database operations on models in
    the prayapp application"""

    def db_for_read(self, model, **hints):
        "Point all operations on prayapp models to 'other'"
        if model._meta.app_label == 'prayapp':
            return 'other'
        return None

    def db_for_write(self, model, **hints):
        "Point all operations on prayapp models to 'other'"
        if model._meta.app_label == 'prayapp':
            return 'other'
        return None

    def allow_relation(self, obj1, obj2, **hints):
        "Allow any relation if a model in prayapp is involved"
        if obj1._meta.app_label == 'prayapp' or obj2._meta.app_label == 'prayapp':
            return True
        return None

    def allow_syncdb(self, db, model):
        "Make sure the prayapp app only appears on the 'other' db"
        if db == 'other':
            return model._meta.app_label == 'prayapp'
        elif model._meta.app_label == 'prayapp':
            return False
        return None 
```

将此添加到您的 settings.py

```
DATABASE_ROUTERS = ['path.to.PrayAppRouter',] 
```

# bash - 用于修改 ipsec.conf 的脚本 awk v.sed

> ID：11194050
> 
> 赞同：-3
> 
> 时间：2012-06-25T17:15:03.947
> 
> 标签：bash, sed, awk, ipsec

我正在创建一个可以运行的脚本，它会简单地询问我常用的位置名称...即 SEC-DF1，它会从脚本中获取该站点的 IP。我的问题是获取该 IP 并替换

```
right=IP_ADDRESS 
```

和

```
right=NEW_IP_ADDRESS 
```

我需要这个，所以我可以调用脚本，因为我会经常更改 right 的值以进行测试。

在有人提到 awk 之前，我一直在搞乱 sed……这东西有如此可怕的文档，我一直在搞砸的测试文件上出现所有类型的错误或奇怪的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:20:59.660

由于这是一个直接的替换，我将只使用 sed：

```
sed -e 's/^right=[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+/right=192.168.1.92/' filename 
```

这将`right=`在一行的开头匹配一个 IP 地址，并将其替换为您选择的 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:24:36.033

此命令将修改您的*脚本：*

```
NEW_IP_ADDRESS=101.102.103.104 sed -i "s/^(right=).*$/\\1$NEW_IP_ADDRESS/" script 
```

# python - 如何使用 wxUpdateUIEvent 更改面板界面？

> ID：11194055
> 
> 赞同：0
> 
> 时间：2012-06-25T17:15:30.523
> 
> 标签：python, user-interface, wxpython

这是交易，我有一个包含笔记本的框架，只有一页，问题是我一直在尝试创建 2 个使用同一页面的类面板，具体取决于单击哪个 EVT_BUTTON。（但这似乎不起作用，因为面板不会在 EVT_Button 上重绘自身）

小例子：

```
class HomePage(wx.Panel):
    def __init__(self,parent)
    wx.Panel.__init__(self,parent,size=((1000,500)))
    b1 = wx.Button(self,-1,'Fake Button') (binding blah blah) 

class MainApp(wx.Frame):
    def __init__(self,parent,id,title='Test App',size=((1024,600)))
    wx.Frame.__init__(self,parent,id,title,size)        
    self.mainPanel = wx.Panel(self,-1)

    self.NotebookPane = wx.Notebook(self.mainPanel,-1,size=((1000,500))
    self.page1 = HomePage(self.NotebookPane)
    self.NotebookPane.AddPage(self.page1,'Home Page') 
```

现在我想要做的是将它放在哪里，如果单击一个按钮，它会改变主页面板的界面。据我所知，我知道我想以某种方式使用 wx.UpdateUIEvent，但我真的不知道如何设置它。当文档留下很多问题时，如何绑定它或其他任何东西。所以可以说我希望主页添加第二个按钮和一个 textctrl 按钮，但在 _ *init上删除已经在其中的按钮*

我该怎么做，我想一旦我明白我可以学习如何做更多事情，但我需要脚踏实地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:29:44.990

听起来您基本上想用一个面板代替另一个面板。如果是这样，那么你很幸运，因为我在几年前写了一篇关于这方面的[教程。](http://www.blog.pythonlibrary.org/2010/06/16/wxpython-how-to-switch-between-panels/)交换单页笔记本的概念也相同，尽管我不知道您为什么想要单页笔记本。您甚至不需要 UpdateUIEvent。

# objective-c - iOS自动线程？

> ID：11194058
> 
> 赞同：2
> 
> 时间：2012-06-25T17:15:56.333
> 
> 标签：objective-c, ios, multithreading

我一直在为 iOS 开发一个 opencv 项目。我得到了一个简单的项目，开始使用捕获和显示的帧进行开发。在我开始遇到内存问题并将它们追溯到原始项目设置之前，我从来没有过多关注它是如何工作的。我现在计划重新编写捕获/显示代码，但我不明白为什么它首先会起作用。有一个播放/暂停按钮调用该方法

```
- (IBAction)play_pause:(id)sender
{
  play = !play;
  while(play)
  {
    if (_videoCapture && _videoCapture->grab())
    {
        (*_videoCapture) >> _display_frame;
        //process frame
        self.imageView.image = [UIImage imageWithCVMat:_display_frame];
    }
  }
} 
```

play 只是一个全局布尔值，表示应用程序是在播放还是暂停。奇怪的是，处理应该发生在一个无限循环中，没有出路。play 在循环中永远不会被修改。尽管如此，当应用程序运行时，播放/暂停按钮保持响应，并且能够翻转播放布尔并暂停执行。不仅如此，其他布尔值（例如use_greyscale）可以被其他按钮翻转，并且它们的值在循环内改变。我原以为应用程序会冻结，甚至永远不会在屏幕上绘制新帧。应用程序在其生命周期的大部分时间里都应该被困在该函数中，无法执行其他任务，例如绘图和 UIControl。似乎唯一可行的方法是 IBAction 调用在其自己的线程上运行。我在源代码中找不到任何线程的证据。有人可以解释一下苹果如何处理其 UI 中的线程吗？我的印象是只有一个主运行循环线程，并且不会自动创建额外的线程。如果这是真的，如何解释这种行为？

边注-

最终让我调查的是 [UIImage imageWithCVMat:_display_frame] 返回一个自动释放的对象。由于所有这些都发生在一个循环内，因此如果不暂停执行，就无法释放对象，这会导致崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:02:30.540

之所以起作用是因为该`cv::VideoCapture::grab()`方法的实现运行当前的运行循环以暂停线程，直到它获得一帧。

当您启动应用程序时，该`main`函数会执行一个名为 的函数，该函数`UIApplicationMain`会执行`CFRunLoopRun`。当`CFRunLoopRun`在主线程上执行时，它运行主运行循环，即处理从系统接收到的所有 UI 事件并刷新用户界面的运行循环。有关运行循环的信息，您可以阅读[Apple Threading Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html#//apple_ref/doc/uid/10000057i-CH16-SW1)。

因此，当您执行无限循环时，您的代码永远不会返回到运行循环，并且无法处理等待事件。但是在您的情况下，该`grab`方法会再次运行运行循环，并具有到期延迟。因此，运行循环可能会处理传入事件（可能会再次调用您的代码），直到延迟到期，然后返回将再次运行运行循环的代码。

如果您在触摸按钮暂停时查看调用堆栈，您将看到：

主函数 → 运行循环 → 事件处理 → 你的代码 → OpenCV → 运行循环 → 事件处理 → 你的代码

运行循环在其自身内部运行，这非常好，因为运行循环是可重入的。滚动视图实际上使用了这种行为：当您滚动 a`UIScrollView`时，它会以不同的模式再次运行运行循环，以便在您结束滚动之前忽略某些事件。

但我不确定 OpenCV 的开发人员在编写代码时是否考虑到了这一点。所以我认为在后台线程/队列中加载你的帧会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:18:47.383

你是对的，iOS 中没有“自动线程”。Grand Central Dispatch (GCD) 确实使线程更容易，但它不会自动发生。

您可以编写一些调试代码并在 while 循环中测试 [NSThread isMainThread] 以查看 play_pause 是否确实在主 UI 线程上运行，我怀疑它不是。

# jmeter - 在一个线程中，JMeter HTTP 请求/响应是否按顺序完成？

> ID：11194060
> 
> 赞同：0
> 
> 时间：2012-06-25T17:16:03.780
> 
> 标签：jmeter

我正在尝试了解 JMeter 的基础知识。我有一个“plus1”Java servlet，它向请求参数添加一个并返回结果，所以它是一个快速测试 servlet，因此我可以理解负载测试。

这是我的测试计划：

```
Thread Group: 1 thread, ramp up 1 s, loop count 10000 
  HTTP Request to localhost
  Graph Results
  Summary Report 
```

当我运行它时，摘要报告显示吞吐量数为 200/秒左右。

测试计划中没有控制器的关键问题是，JMeter 是在运行测试计划（发送单个请求）并在循环之前等待响应吗？

当我为请求引入一个计算量更大的页面时，吞吐量数字会像我预期的那样下降。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:55:01.420

简而言之，是的。

有一个论点是让采样器发出请求而不等待响应，但这是一个极端情况。在大多数情况下，您希望*测试*工具等待以查看发生了什么并验证事情。这也更现实，大多数用户会等待响应，实际上他们通常必须等待，然后再进行后续调用。

如果您想运行容量测试，那么我认为最好的方法是将负载分散到多个线程上并实际限制每个线程的吞吐量 - 您可以使用[Constant Throughput Controller](http://jmeter.apache.org/usermanual/component_reference.html#Constant_Throughput_Timer)来做到这一点。例如。您可以有 500 个线程，每个线程以每分钟 60 个请求的速度运行，这将产生 500 个请求/秒的总负载。这样，您的测试负载是可预测且稳定的 - 它不会与服务器的响应速度相关联。笔记。对于多个线程，您将需要一个加速期，并且您可能会发现您必须将测试分布在多台机器上（如果您要使用谷歌搜索，则称为“分布式”测试）。

# android - 小部件广播接收器的自定义权限

> ID：11194061
> 
> 赞同：0
> 
> 时间：2012-06-25T17:16:05.293
> 
> 标签：android, permissions, widget, broadcastreceiver

我知道我们可以在发送广播时添加自定义权限，并`onReceive()`在接收器中检查相同的方法。

我设置`PendingIntent pendingIntent`了 UI 元素，所以它们会被触发。我们如何在小部件中添加这些权限，因为我们没有明确发送广播。

**代码**

```
 public void onReceive(Context context, Intent intent) {
   if(intent.getAction() == Constants.UPDATE){
    //Do refresh operations here

    }

//Setting UI actions
private static void setActionIntent(Context context, RemoteViews views,
            int id, String action) {
        Intent i = new Intent(action);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, i,
                PendingIntent.FLAG_UPDATE_CURRENT);
        views.setOnClickPendingIntent(id, pendingIntent );
    } 
```

# devexpress - 将标签绑定到 Devexpress 中的标头

> ID：11194064
> 
> 赞同：0
> 
> 时间：2012-06-25T17:16:11.497
> 
> 标签：devexpress

我可以在 Devexpress 的标题中绑定标签控件吗？标签控件动态填充。

恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:42:11.337

```
Yes you can bind the label control to header of Devexpress by making use of Templates.

The format should be somewhat like the below:

<Template>
<Header>
//your definition of label goes here
</Header>
</Template> 
```

# objective-c - 如何更改 Xcode 项目中的默认 MainMenu.xib 文件？

> ID：11194068
> 
> 赞同：2
> 
> 时间：2012-06-25T17:16:25.550
> 
> 标签：objective-c, xcode, cocoa

我在 Xcode 项目中编写了一些东西，然后我决定将所有代码和 xib 文件移动到一个新项目中。所以，我创建了一个新项目，然后将文件复制到他们的新位置。

问题是：新项目已经有一个 MainMenu.xib 文件。我删除了默认值（新项目中的那个）并从另一个项目中添加了我的 MainMenu.xib。

它编译并运行。但是当我点击一些按钮时，什么也没有发生。我检查了动作和出口链接，似乎没问题。

我还应该寻找什么才能使主窗口正常工作？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:23:45.210

只需更改目标设置（摘要选项卡）中的“主界面”设置。

# actionscript - 无法在 FlexBuilder 中调用 RemoteObject 以使用 ColdFusion

> ID：11194074
> 
> 赞同：0
> 
> 时间：2012-06-25T17:16:53.373
> 
> 标签：actionscript, coldfusion, flexbuilder, remoteobject

当我尝试使用正确的远程设置在 CFC 中调用这个简单函数时，我收到一条错误消息

“目的地‘ColdFusion’要么不存在，要么目的地没有定义通道，并且应用程序没有定义任何默认通道。”

这是**CFC**，虽然我 99% 肯定它不存在问题，非常简单。

```
<cfcomponent output="false">

    <!--- Get Server Time --->
    <cffunction name="getServerTime" access="remote" returnType="string">
       <cfreturn now() />
    </cffunction>

    <cffunction name="getString" access="remote" returnType="string">
        <cfreturn "hello......" />
    </cffunction>

</cfcomponent> 
```

这是包含远程调用的**main.mxml文件**

```
<?xml version="1.0" encoding="utf-8"?>
    <mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" viewSourceURL="srcview/index.html" applicationComplete="init()">

<mx:Script>
    <![CDATA[
        import mx.rpc.events.ResultEvent;
        import mx.controls.Alert;

        public function init():void{
          Alert.show(conn.getString());
        }

        public function eventResultHandler(event:ResultEvent):void{
            lblStringResult.text = event.result as String;                 
        }

    ]]>
</mx:Script>

<mx:RemoteObject id="conn" destination="ColdFusion" source="DemoCFC"
    result="eventResultHandler(event)" showBusyCursor="true" >
</mx:RemoteObject>

<mx:Label id="lblStringResult" y="10" horizontalCenter="0"/> 

<mx:Button label="Server Time?.." click="conn.getServerTime();" y="36" horizontalCenter="0" />

</mx:Application> 
```

这是 WEB-INF\flex 文件夹根目录下的**services-services.xml**文件。对于这个冗长乏味的文件，我深表歉意，但我认为问题可能出在其中。

```
<services>
    <service-include file-path="remoting-config.xml" />
    <service-include file-path="proxy-config.xml" />
    <service-include file-path="messaging-config.xml" />
</services>

<security>
    <login-command class="flex.messaging.security.JRunLoginCommand" server="JRun"/>

</security>

<channels>

    <!--  CF Based Endpoints -->
    <!-- {server.name}:{server.port}{context.root} -->
    <channel-definition id="my-cfamf" class="mx.messaging.channels.AMFChannel">
        <endpoint uri="http://{server.name}:{server.port}{context.root}/flex2gateway/" class="coldfusion.flash.messaging.CFAMFEndPoint"/>
        <properties>
            <polling-enabled>false</polling-enabled>
            <serialization>
                <enable-small-messages>false</enable-small-messages>
            </serialization>
            <coldfusion>
                <!-- define the resolution rules and access level of the cfc being invoked -->
                <access>
                    <!-- Use the ColdFusion mappings to find CFCs-->
                    <use-mappings>true</use-mappings>
                    <!-- allow "public and remote" or just "remote" methods to be invoked -->
                    <method-access-level>remote</method-access-level>
                </access>

                <use-accessors>true</use-accessors>

                <use-structs>false</use-structs>

                <serialize-array-to-arraycollection>false
                </serialize-array-to-arraycollection>

                <proxy-load-method>loadProxy</proxy-load-method>

                <property-case>
                    <!-- cfc property names -->
                    <force-cfc-lowercase>false</force-cfc-lowercase>
                    <!-- Query column names -->
                    <force-query-lowercase>false</force-query-lowercase>
                    <!-- struct keys -->
                    <force-struct-lowercase>false</force-struct-lowercase>
                </property-case>
            </coldfusion>
        </properties>
    </channel-definition>

    <channel-definition id="cf-polling-amf" class="mx.messaging.channels.AMFChannel">
        <endpoint uri="http://{server.name}:{server.port}{context.root}/flex2gateway/cfamfpolling" class="coldfusion.flash.messaging.CFAMFEndPoint"/>
        <properties>
            <polling-enabled>true</polling-enabled>
            <polling-interval-seconds>8</polling-interval-seconds>
            <serialization>
                <enable-small-messages>false</enable-small-messages>
            </serialization>
            <coldfusion>
                <!-- define the resolution rules and access level of the cfc being invoked -->
                <access>
                    <!-- Use the ColdFusion mappings to find CFCs-->
                    <use-mappings>true</use-mappings>
                    <!-- allow "public and remote" or just "remote" methods to be invoked -->
                    <method-access-level>remote</method-access-level>
                </access>

                <use-accessors>true</use-accessors>

                <use-structs>false</use-structs>

                <serialize-array-to-arraycollection>false
                </serialize-array-to-arraycollection>

                <proxy-load-method>loadProxy</proxy-load-method>

                <property-case>
                    <!-- cfc property names -->
                    <force-cfc-lowercase>false</force-cfc-lowercase>
                    <!-- Query column names -->
                    <force-query-lowercase>false</force-query-lowercase>
                    <!-- struct keys -->
                    <force-struct-lowercase>false</force-struct-lowercase>
                </property-case>
            </coldfusion>
        </properties>
    </channel-definition>

    <channel-definition id="my-cfamf-secure" class="mx.messaging.channels.SecureAMFChannel">
        <endpoint uri="https://{server.name}:{server.port}{context.root}/flex2gateway/cfamfsecure" class="coldfusion.flash.messaging.SecureCFAMFEndPoint"/>
        <properties>
            <polling-enabled>false</polling-enabled>
            <add-no-cache-headers>false</add-no-cache-headers>
            <serialization>
                <enable-small-messages>false</enable-small-messages>
            </serialization>
            <coldfusion>
                <!-- define the resolution rules and access level of the cfc being invoked -->
                <access>
                    <!-- Use the ColdFusion mappings to find CFCs-->
                    <use-mappings>true</use-mappings>
                    <!-- allow "public and remote" or just "remote" methods to be invoked -->
                    <method-access-level>remote</method-access-level>
                </access>

                <use-accessors>true</use-accessors>
                <use-structs>false</use-structs>

                <serialize-array-to-arraycollection>false
                </serialize-array-to-arraycollection>

                <proxy-load-method>loadProxy</proxy-load-method>

                <property-case>
                    <!-- cfc property names -->
                    <force-cfc-lowercase>false</force-cfc-lowercase>
                    <!-- Query column names -->
                    <force-query-lowercase>false</force-query-lowercase>
                    <!-- struct keys -->
                    <force-struct-lowercase>false</force-struct-lowercase>
                </property-case>
            </coldfusion>
        </properties>
    </channel-definition>

    <!--  Java Based Endpoints -->
    <channel-definition id="java-amf" class="mx.messaging.channels.AMFChannel">
        <endpoint uri="http://{server.name}:{server.port}{context.root}/flex2gateway/amf" class="flex.messaging.endpoints.AMFEndpoint"/>
    </channel-definition>

    <channel-definition id="java-secure-amf" class="mx.messaging.channels.SecureAMFChannel">
        <endpoint uri="https://{server.name}:{server.port}{context.root}/flex2gateway/amfsecure" class="flex.messaging.endpoints.SecureAMFEndpoint"/>
    </channel-definition>

    <channel-definition id="java-polling-amf" class="mx.messaging.channels.AMFChannel">
        <endpoint uri="http://{server.name}:{server.port}{context.root}/flex2gateway/amfpolling" class="flex.messaging.endpoints.AMFEndpoint"/>
        <properties>
            <polling-enabled>true</polling-enabled>
            <polling-interval-seconds>8</polling-interval-seconds>
        </properties>
    </channel-definition>

</channels>

<logging>
    <target class="flex.messaging.log.ConsoleTarget" level="Error">
        <properties>
            <prefix>[BlazeDS] </prefix>
            <includeDate>false</includeDate>
            <includeTime>false</includeTime>
            <includeLevel>false</includeLevel>
            <includeCategory>false</includeCategory>
        </properties>
        <filters>
            <pattern>Endpoint.*</pattern>
            <pattern>Service.*</pattern>
            <pattern>Configuration</pattern>
            <pattern>Message.*</pattern>
        </filters>
    </target>
</logging>

<system>
    <manageable>false</manageable>
</system> 
```

这是**remoting-config.xml**文件。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<adapters>
    <adapter-definition id="cf-object" class="coldfusion.flash.messaging.ColdFusionAdapter" default="true"/>
    <adapter-definition id="java-object" class="flex.messaging.services.remoting.adapters.JavaAdapter"/>
</adapters>

<default-channels>
    <channel ref="my-cfamf"/>
</default-channels>

<destination id="ColdFusion">
    <channels>
        <channel ref="my-cfamf"/>
    </channels>
    <properties>
        <source>*</source>
    </properties>
</destination> 
```

当 main.mxml 文件编译运行时，调用 init() 方法，即使用远程对象连接调用 getString() 方法，返回并显示

**警报框中的“[object AsyncToken]”。**

如果单击该按钮，我将调用方法 getServerTime() 并尝试在 mxml 标签中显示服务器时间，但仅获取

如果我浏览到 ，我会得到一个白页。根据我遇到的一些线程，这应该是一件好事，试图解决这个问题。

main.mxml 文件和 cfc 位于项目的同一文件夹中。所以我知道远程调用正在查找 cfc。

我很确定问题出在 ColdFusion 的配置中，因为这是一个如此简单的请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:09:13.360

您上面的 XML 文件是 services-config.xml，但您在 remoting-config.xml 文件中设置了目标...见下文：

```
<service id="remoting-service" class="flex.messaging.services.RemotingService">
<adapters>
    <adapter-definition id="cf-object" class="railo.runtime.net.flex.RailoAdapter" default="true"/>
    <adapter-definition id="java-object" class="flex.messaging.services.remoting.adapters.JavaAdapter"/>
</adapters> 
<default-channels>
    <channel ref="my-cfamf"/>
    <channel ref="classic-cfamf"/>
</default-channels>

<destination id="ColdFusion">
    <channels>
        <channel ref="my-cfamf"/>
    </channels>
    <properties>
        <source>*</source>
        <!-- define the resolution rules and access level of the cfc being invoked -->
        <access>
            <!-- Use the ColdFusion mappings to find CFCs, by default only CFC files under your webroot can be found. -->
            <use-mappings>true</use-mappings>
            <!-- allow "public and remote" or just "remote" methods to be invoked -->
            <method-access-level>remote</method-access-level>
        </access>
        <property-case>
            <!-- cfc property names -->
            <force-cfc-lowercase>false</force-cfc-lowercase>
            <!-- Query column names -->
            <force-query-lowercase>false</force-query-lowercase>
            <!-- struct keys -->
            <force-struct-lowercase>false</force-struct-lowercase>
        </property-case>
    </properties>
</destination>
</service> 
```

检查您的 WEB-INF/flex 文件夹中的这个文件，并确保您有一个 ColdFusion 目标集，并且它从您上面的 services-config.xml 文件中设置了要使用的适当通道。

很抱歉这么长的回复，但我想我会发布我的 service-config.xml 文件，这样你就可以看到它们是如何协同工作的：

```
<services-config>

<services>
    <service-include file-path="remoting-config.xml" />
    <service-include file-path="proxy-config.xml" />
    <service-include file-path="messaging-config.xml" />        
</services>

<security>
    <login-command class="flex.messaging.security.TomcatLoginCommand" server="Tomcat"/>
</security>

<channels>

    <!-- CF -->
    <channel-definition id="my-cfamf" class="mx.messaging.channels.AMFChannel">
        <endpoint uri="http://{server.name}:{server.port}{context.root}/flex2gateway/" class="flex.messaging.endpoints.AMFEndpoint"/>
        <properties>
            <polling-enabled>false</polling-enabled>
            <serialization>
                <instantiate-types>false</instantiate-types>
            </serialization>
        </properties>
    </channel-definition>

    <channel-definition id="classic-cfamf" class="mx.messaging.channels.AMFChannel">
        <endpoint uri="http://{server.name}:{server.port}{context.root}/flashservices/gateway/" class="flex.messaging.endpoints.AMFEndpoint"/>
        <properties>
            <polling-enabled>false</polling-enabled>
            <serialization>
                <instantiate-types>false</instantiate-types>
            </serialization>
        </properties>
    </channel-definition>

    <channel-definition id="cf-polling-amf" class="mx.messaging.channels.AMFChannel">
        <endpoint uri="http://{server.name}:{server.port}{context.root}/flex2gateway/cfamfpolling" class="flex.messaging.endpoints.AMFEndpoint"/>
        <properties>
            <polling-enabled>true</polling-enabled>
            <polling-interval-seconds>8</polling-interval-seconds>
            <serialization>
                <instantiate-types>false</instantiate-types>
            </serialization>
        </properties>
    </channel-definition>

    <channel-definition id="my-cfamf-secure" class="mx.messaging.channels.SecureAMFChannel">
        <endpoint uri="https://{server.name}:{server.port}{context.root}/flex2gateway/cfamfsecure" class="flex.messaging.endpoints.SecureAMFEndpoint"/>
        <properties>
            <polling-enabled>false</polling-enabled>
            <add-no-cache-headers>false</add-no-cache-headers>
            <serialization>
                <instantiate-types>false</instantiate-types>
            </serialization>
        </properties>
    </channel-definition>

    <!-- Java -->
    <channel-definition id="my-amf" class="mx.messaging.channels.AMFChannel">
        <endpoint url="http://{server.name}:{server.port}/{context.root}/messagebroker/amf" class="flex.messaging.endpoints.AMFEndpoint"/>
    </channel-definition>

    <channel-definition id="my-secure-amf" class="mx.messaging.channels.SecureAMFChannel">
        <endpoint url="https://{server.name}:{server.port}/{context.root}/messagebroker/amfsecure" class="flex.messaging.endpoints.SecureAMFEndpoint"/>
        <properties>
            <add-no-cache-headers>false</add-no-cache-headers>
        </properties>
    </channel-definition>

    <channel-definition id="my-polling-amf" class="mx.messaging.channels.AMFChannel">
        <endpoint url="http://{server.name}:{server.port}/{context.root}/messagebroker/amfpolling" class="flex.messaging.endpoints.AMFEndpoint"/>
        <properties>
            <polling-enabled>true</polling-enabled>
            <polling-interval-seconds>4</polling-interval-seconds>
        </properties>
    </channel-definition>

    <channel-definition id="my-streaming-amf" class="mx.messaging.channels.StreamingAMFChannel">
      <endpoint url="http://{server.name}:{server.port}/{context.root}/messagebroker/amfsecure/streamingamf" class="flex.messaging.endpoints.StreamingAMFEndpoint" /> 
      <properties>
        <idle-timeout-minutes>0</idle-timeout-minutes> 
        <max-streaming-clients>100</max-streaming-clients> 
        <server-to-client-heartbeat-millis>5000</server-to-client-heartbeat-millis> 
        <user-agent-settings>
          <user-agent match-on="MSIE" kickstart-bytes="2048" max-streaming-connections-per-session="5" /> 
          <user-agent match-on="Firefox" kickstart-bytes="2048" max-streaming-connections-per-session="5" /> 
          <user-agent match-on="Safari" kickstart-bytes="2048" max-streaming-connections-per-session="5" />
          <user-agent match-on="Opera" kickstart-bytes="2048" max-streaming-connections-per-session="5" />  
        </user-agent-settings>
      </properties>
    </channel-definition>

    <channel-definition id="java-http" class="mx.messaging.channels.HTTPChannel">
        <endpoint uri="http://{server.name}:{server.port}{context.root}/flex2gateway/http" class="flex.messaging.endpoints.HTTPEndpoint"/>
    </channel-definition>

    <channel-definition id="java-secure-http" class="mx.messaging.channels.SecureHTTPChannel">
        <endpoint uri="https://{server.name}:{server.port}{context.root}/flex2gateway/httpsecure" class="flex.messaging.endpoints.SecureHTTPEndpoint"/>
    </channel-definition>
</channels>

<logging>
    <target class="flex.messaging.log.ConsoleTarget" level="Error">
        <properties>
            <prefix>[BlazeDS] </prefix>
            <includeDate>false</includeDate>
            <includeTime>false</includeTime>
            <includeLevel>false</includeLevel>
            <includeCategory>false</includeCategory>
        </properties>
        <filters>
            <pattern>Endpoint.*</pattern>
            <pattern>Service.*</pattern>
            <pattern>Configuration</pattern>
        </filters>
    </target>
</logging>

<system>
    <redeploy>
        <enabled>false</enabled>
    </redeploy>
</system>

</services-config> 
```

# amazon-web-services - Amazon EC2/SES SMTP 超时

> ID：11194080
> 
> 赞同：37
> 
> 时间：2012-06-25T17:17:18.393
> 
> 标签：amazon-web-services, amazon-ec2, smtp, amazon-ses

尝试使用 SMTP 从我的 EC2 实例向 SES 发送电子邮件时遇到问题。出于某种原因，我遇到了零星的超时问题，我无法再联系 SMTP 主机。需要注意的是，通过 SES 发送可能有 75% 的时间有效。

我将从一些细节开始。我的 SES 帐户*大部分*时间都在工作。发件人电子邮件已通过验证，我的限制已增加到 10k/天，5 封电子邮件/秒。我的印象是，如果这与我的限制有关，我会收到一个特定于限制的错误。对于我的 SMTP 配置，我使用的是 posfix w/TLS。我在官方 AWS SES 论坛上发布了一个非常相似的帖子，但还没有取得任何成功。该帖子的信息位于该帖子的底部。

这是今天早上失败的一个例子。我在下面运行的所有命令都是从我尝试从中发送邮件的 EC2 实例运行的。抱歉这篇小说大小的帖子，我只是想确保我包含所有内容。

我发送给自己的电子邮件没有送达：

```
Jun 25 06:16:36 intranet01 postfix/smtp18832: 9E00C230DA: to=<myemailaddress>, relay=none, delay=150, delays=0.02/0.01/150/0, dsn=4.4.1, status=deferred (connect to email-smtp.us-east-1.amazonaws.comhttp://107.22.187.122:25: Connection timed out) 
```

当我看到失败时，我尝试通过端口 25 连接到电子邮件主机。我无法连接：

```
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25  
Trying 174.129.28.151...  
^C 
```

几分钟后，我的延期邮件终于通过了：

```
Jun 25 06:23:14 intranet01 postfix/smtp18861: 9E00C230DA: to=<myemailaddress>, relay=email-smtp.us-east-1.amazonaws.comhttp://184.73.218.23:25, delay=548, delays=548/0.02/0.21/0.36, dsn=2.0.0, status=sent (250 Ok 0000013823cf7441-83710873-e946-4c80-8a54-0dd72bae6f30-000000)
Jun 25 06:23:14 intranet01 postfix/qmgr3972: 9E00C230DA: removed 
```

现在我可以连接到端口 25：

```
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25  
Trying 107.20.152.208...  
Connected to email-smtp.us-east-1.amazonaws.com.  
Escape character is '^]'.  
220 email-smtp.amazonaws.com ESMTP SimpleEmailService-222567251  
^] 
```

为了好玩，我决定查看 SES 主机端点。原来它只是一个 ELB cname，其中 A 记录指向多个 AZ 中的接口。

```
root@intranet01 sbin# dig email-smtp.us-east-1.amazonaws.com  

; <<>> DiG 9.7.3-P3-RedHat-9.7.3-8.P3.17.amzn1 <<>> email-smtp.us-east-1.amazonaws.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 8592
;; flags: qr rd ra; QUERY: 1, ANSWER: 9, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:  
;email-smtp.us-east-1.amazonaws.com. IN A  

;; ANSWER SECTION:  
email-smtp.us-east-1.amazonaws.com. 54 IN CNAME ses-smtp-prod-335357831.us-east-1.elb.amazonaws.com.  
ses-smtp-prod-335357831.us-east-1.elb.amazonaws.com. 60 IN A 174.129.200.82  
ses-smtp-prod-335357831.us-east-1.elb.amazonaws.com. 60 IN A 184.73.219.75  
ses-smtp-prod-335357831.us-east-1.elb.amazonaws.com. 60 IN A 107.20.152.208  
ses-smtp-prod-335357831.us-east-1.elb.amazonaws.com. 60 IN A 107.20.160.81  
ses-smtp-prod-335357831.us-east-1.elb.amazonaws.com. 60 IN A 107.20.203.50  
ses-smtp-prod-335357831.us-east-1.elb.amazonaws.com. 60 IN A 107.22.229.233 
ses-smtp-prod-335357831.us-east-1.elb.amazonaws.com. 60 IN A 174.129.6.189  
ses-smtp-prod-335357831.us-east-1.elb.amazonaws.com. 60 IN A 174.129.28.151 
```

我尝试发送另一条消息，但失败了。这次我遍历了 SES cname 返回的每个 A 记录地址。我无法连接到其中任何一个。在此期间，我还尝试从我的本地机器（不是我的 EC2 实例）进行连接，它工作得很好。

```
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 174.129.28.151...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 174.129.6.189...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 107.22.229.233...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 107.20.203.50...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 107.20.160.81...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 107.20.152.208...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 184.73.219.75...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 174.129.200.82...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 174.129.28.151...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 174.129.6.189...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 107.22.229.233...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 107.20.203.50...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 107.20.179.13...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 107.20.160.81...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 184.73.219.75...
^C
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 174.129.200.82...
^C 
```

等了大约 30 秒后，我再次尝试，这次成功了。

```
root@intranet01 sbin# telnet email-smtp.us-east-1.amazonaws.com 25
Trying 174.129.28.151...
Connected to email-smtp.us-east-1.amazonaws.com.
Escape character is '^]'.
220 email-smtp.amazonaws.com ESMTP SimpleEmailService-222567251
^C^[
^]

telnet> 
```

正如我之前所说，我在 AWS SES 论坛上发布了一个非常相似的帖子。该帖子可以在下面找到。

[https://forums.aws.amazon.com/thread.jspa?threadID=97736&tstart=0](https://forums.aws.amazon.com/thread.jspa?threadID=97736&tstart=0)

此外，似乎我并不孤单，因为我在 SES 论坛上发现了这个其他帖子，看起来像同样的问题。

[https://forums.aws.amazon.com/thread.jspa?threadID=91260&tstart=0](https://forums.aws.amazon.com/thread.jspa?threadID=91260&tstart=0)

我认为可能存在某种 EC2 SMTP 限制，所以我填写了“从 EC2 发送电子邮件”请求表，但对我来说这似乎很愚蠢，因为我使用的是亚马逊的服务，而不是第 3 方。到目前为止，我在填写表格后还没有收到亚马逊的任何回复。

有没有人有任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-25T19:44:24.853

所以显然EC2有它自己的限制。我假设（错误地）拥有对 SES 的生产访问权限也意味着从 EC2 放宽 SMTP 限制，但由于它们是两个完全独立的产品，我想情况并非如此。

但正如我在帖子的最后一段中所述，您可以[请求删除电子邮件发送限制](https://aws-portal.amazon.com/gp/aws/html-forms-controller/contactus/ec2-email-limit-rdns-request)以提高这些限制。我这样做了，问题就停止了（他们花了大约 5 个小时才解除了我的限制）。

* * *

### 更新

EC2 节流记录在[Connecting to the Amazon SES SMTP Endpoint](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/smtp-connect.html)中，实际上仅限于端口 25，因此另一种直接的解决方案是简单地使用端口 587（不幸的是，几个官方 SES 示例确实使用端口 25）：

> **重要的**
> 
> 默认情况下，弹性计算云 (EC2) 通过端口 25 限制电子邮件流量。为避免从 EC2 通过 SMTP 端点发送电子邮件时超时，请使用不同的端口（587 或 2587）或填写 [删除电子邮件发送限制的请求以取消限制](https://aws-portal.amazon.com/gp/aws/html-forms-controller/contactus/ec2-email-limit-rdns-request)。

请注意，这也可能有点过时，因为[AWS 管理控制台](http://aws.amazon.com/console/#ses)和[Amazon SES SMTP 问题](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/smtp-issues.html)部分仅指更常见的替代端口 465 和 587：

> **您正在通过端口 25 从 Amazon EC2 实例发送到 Amazon SES，并且您无法达到您的 Amazon SES 发送限制或者您正在接收超时**- Amazon SES EC2 对通过端口 25 发送的电子邮件施加默认发送限制，并且如果您尝试限制出站连接超过这些限制。要删除这些限制，请提交 [删除电子邮件发送限制的请求](https://aws-portal.amazon.com/gp/aws/html-forms-controller/contactus/ec2-email-limit-rdns-request)。您还可以通过端口 465 或端口 587 连接到 Amazon SES，这两个端口都不受限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-30T13:13:29.403

如果您正在运行 Django 应用程序并怀疑[Steffen 的回答](https://stackoverflow.com/a/11196253/904887)可能是原因 - 这是一个快速的试金石：

```
In [1]: from django.core.mail.backends.smtp import EmailBackend
In [2]: from django.core.mail import EmailMultiAlternatives
In [3]: message = EmailMultiAlternatives(
   ...:     subject='testing the rate limit',
   ...:     body='this is a test',
   ...:     to=['your+email@example.com'],
   ...:     from_email='from@example.com',
   ...: )
In [4]: backend_587 = EmailBackend(port=587)
In [5]: backend_25 = EmailBackend(port=25)
In [6]: backend_587.send_messages([message])
Out[6]: 1
In [7]: backend_25.send_messages([message])  # hangs for a long time. Might even timeout 
```

从端口 25 发送电子邮件应该挂起。从 587 发送电子邮件应该会很快发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-05T14:48:09.837

它看起来像 EC2 上的端口 25 节流的情况。AWS 默认限制端口 25 以避免恶意用户/软件发送大量电子邮件。您可以按照此处的说明删除此限制：[https ://aws.amazon.com/premiumsupport/knowledge-center/ec2-port-25-throttle/](https://aws.amazon.com/premiumsupport/knowledge-center/ec2-port-25-throttle/)

或者，您可以将应用程序中的传出端口更改为使用 587、2587 来支持 STARTTLS 或使用 465/2465 来支持 TLS Wrapper。

# javascript - 在删除其他图像后保留图像？

> ID：11194081
> 
> 赞同：0
> 
> 时间：2012-06-25T17:17:21.977
> 
> 标签：javascript, jquery

我正在做一个记忆配对游戏。现在，当用户点击两个相同的图像时，它们会被删除。这部分游戏运行良好。删除图像后，我希望其他图像保持原位。然而，它们正在相互移动，并没有留下空间。

演示：http: [//jsfiddle.net/kevinferri/bCP4G/](http://jsfiddle.net/kevinferri/bCP4G/)

例如，单击中间栏中的两朵花。您将看到两个外部列将相互移动并填充该空白区域。我该如何更改它，以便在删除其他图像后图像将保留在原位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:27:55.493

如果你想让 DOM 记住它们的原始布局间距和大小，你可能不想成为`.remove()`元素。您只想将这些元素放入隐藏的可见性中，以便它们被隐藏，但它们保持它们的大小和位置。

```
$(element).css('visibility', 'hidden'); 
```

那是`visibility:hidden`在 CSS 中。`.show()`请注意它和/`.hide()`甚至 CSS之间的区别`display:none`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:19:57.900

你会想要给你`td`的 s 一些固定的尺寸：

```
<style>
    #playCards td { width: 200px; height: 200px; margin: 0; padding: 0 }
</style> 
```

# ruby-on-rails - Ruby先生，Rails女士，我的json创建记录是空的

> ID：11194085
> 
> 赞同：1
> 
> 时间：2012-06-25T17:17:49.280
> 
> 标签：ruby-on-rails, ruby, json, post, httparty

这里的这个新手正在用 Rails 上的 web 服务打他的头。也许有人可以减轻我的痛苦？

我创建了一个简单的 rails 应用程序，并生成了脚手架 MyRecords。然后我尝试使用以下代码在 irb 上创建记录：

测试WS.rb

```
require 'HTTParty'

class MyRecordCreate
  include HTTParty
  base_uri 'localhost:3000'

  def initialize(u, p)
    @auth = {:username => u, :password => p}
  end

  def post(text)
    options = { :body => { name:text} }
    self.class.post('/my_records', options)
  end
end

response = HTTParty.get("http://localhost:3000/my_records/new.json")
print response

record = MyRecordCreate.new("","").post("test remote record")
print record 
```

使用上面的代码，我设法创建了一条记录。问题是我的记录（只有“名称”列）是用空名称创建的！

对这个有什么建议吗？

我渴望将这种绝望一点一点地切碎。

感谢您的贡献。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:36:45.270

尝试将这两行添加到您的 HTTParty 类中：

```
format :json
headers "Accept" => "application/json" 
```

这些告诉 httparty 和它连接到的远程服务发送和接收 JSON。对于您的示例（在 URL 末尾带有 .json），没有必要添加第二行，但我发现这是一种很好的做法，无论如何都要保留它。

下一个问题是 Rails 期望您上传的数据位于对象的顶级名称中。因此，对于您的示例，选项行应如下所示：

```
options = { :body => { :person => { :name => text } } } 
```

替换`person`为您尝试创建的模型的名称。

# javascript - javascript中的下一个奇数

> ID：11194087
> 
> 赞同：12
> 
> 时间：2012-06-25T17:17:50.517
> 
> 标签：javascript, algorithm, math

要查找输入的下一个奇数，请使用以下代码：

```
a=5.4; // Input
b=Math.ceil(a); // Required to turn input to whole number 
b=b+(((b % 2)-1)*-1); // Gives 7 
```

需要 ceil 舍入函数。

这是否安全，是否有更紧凑的方法来做到这一点？

**编辑**：当输入已经是奇数时，什么也不会发生。例如 5.0 将返回 5

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T17:20:13.840

刚刚怎么样

```
b += b % 2 ^ 1; 
```

除以 2 后的余数将始终为 0 或 1，因此`^`运算符（异或）将其翻转为相反的。

（另外，`(b & 1) ^ 1`也可以。哦，我想`b = b ^ 1`它适用于正整数，但对于大整数会有问题。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-26T13:41:06.367

应问题作者的要求：

实现它的最紧凑的方法是

```
b = Math.ceil(a) | 1; 
```

先用`ceil()`求取不小于 的最小整数`a`，再取不小于 的最小奇整数`ceil(a)`，逐位或用 1 确保最后一位被设置，不做任何改变。

要获得严格大于 的最小奇整数`a`，请使用

```
b = Math.floor(a+1) | 1; 
```

### 注意事项：

位运算符在 Javascript 中对带符号的 32 位整数进行操作，因此 的值`a`必须小于或等于`2^31-1`, 和 。第二个严格更小。此外，`a`必须大于`-2^31-1`。

如果有符号整数的表示不是二进制补码，而是二进制补码或符号和大小（我不知道 Javascript 是否允许，Java 不允许，但它在 C 中是可能的），值`a`必须是大于`-1`- `Math.ceil(a)`resp 的结果。`Math.floor(a+1)`必须是非负的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-25T17:24:06.613

不是很短，但这更清晰：

```
a=5.4;
b=Math.ceil(a);
b = b % 2 ? b : b + 1; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-25T17:23:16.110

试试这个：

```
a = 5.4
b = Math.ceil(a)
b = b%2 == 0 ? b+1 : b 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-25T17:25:49.767

```
y = Math.ceil((x - 1)/2)*2  + 1 
```

[在http://www.intmath.com/functions-and-graphs/graphs-using-jsxgraph.php](http://www.intmath.com/functions-and-graphs/graphs-using-jsxgraph.php)上执行 fn

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-25T17:36:44.130

没有`Math.ceil()`它可以这样做：

```
b = a + a % 2 | 0 + 1; 
```

**注意。**我认为下一个奇数`5.0`as `7`。

# jquery - 从 Jquery 对话框表单访问 JS 文件函数

> ID：11194088
> 
> 赞同：0
> 
> 时间：2012-06-25T17:17:52.733
> 
> 标签：jquery, asp.net-mvc, jquery-ui

我有一个包含表单的 div。我使用该 div 作为使用 jquery UI 对话框的对话框。

表格中有按钮。单击按钮时，我想从附加到视图的 JS 文件中调用方法。

不知何故，对话框找不到功能。

HTML

```
<div id="Applon" title="Edit Slab" style="width: 100%; background-color: #33CCCC;">
<form action="\" id="frmDtl">
....
......

<button id="dtlCancel"  type="button" onclick="this.parent.CancelDetails()" style="font-weight: bold; color: #3333FF; width:60px;">
<div><span>Cancel</span></div>  
</button>
</form>
</div> 
```

JS文件

```
$(function() {
//  Dialog

    $("#Applon").dialog({
        autoOpen: false,
        height: 370,
        width: 650,
        modal: true,
        buttons: {

            Close: function() {
                $(this).dialog('close');
                //$('input:visible:enabled:first').focus();
            }
        },
        close: function() {
        }
    });
});

    function CancelDetails() {
        ....
    } 
```

我在 VS2008 的 MVC2 视图中使用它。该视图有两种形式，其中一种是对话框。

单击按钮时，如何使对话框在 JS 文件中找到我的函数？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:22:20.933

首先，尝试远离内联 Javascript 并使用选择器来触发你的函数。例如，

```
$(function() {
   $("#dtlCancel").click(function(){
     CancelDetails();
  });
}); 
```

如果它来自单独的资源（PartialView），您可以将它放在您的模态内容中。

另外，您的对话框是 IFrame 还是模式？如果它只是一个模式，它仍然是它来自的页面的一部分，不需要对“父”的引用。认为它是一个放置良好的 div，看起来像是另一个页面。

**编辑**

查看您的 JS 代码文件，您似乎仍然缺少 $(function(){ 语句的右大括号

您的代码：

```
$(function() {
//  Dialog

    $("#Applon").dialog({
        autoOpen: false,
        height: 370,
        width: 650,
        modal: true,
        buttons: {

            Close: function() {
                $(this).dialog('close');
                //$('input:visible:enabled:first').focus();
            }
        },
        close: function() {
        }
    });
//From your code above (next line)
    }
//Replace the above with this - basically add a ); after the curly brace
});

    function CancelDetails() {
        ....
    } 
```

# java - 对 ThreadLocal 感到困惑

> ID：11194089
> 
> 赞同：6
> 
> 时间：2012-06-25T17:17:53.973
> 
> 标签：java, thread-local

我今天早上刚刚了解了 ThreadLocal。我读到它应该始终是最终的和静态的，例如：

```
private static final ThreadLocal<Session> threadLocal = new ThreadLocal<Session>(); 
```

（会话是一个休眠会话）

我的困惑是：因为它是静态的，所以它可用于 JVM 中的任何线程。然而，它会为每个访问它的线程保存本地信息吗？我正试图解决这个问题，所以如果不清楚，我深表歉意。应用程序中的每个线程都可以访问同一个 ThreadLocal 对象，但是 ThreadLocal 对象会存储每个线程本地的对象吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T17:20:37.170

是的，实例将是相同的，但是代码将您设置的值附加到`Thread.currentThread()`, 当您设置和检索时，因此当使用方法`set`和访问时，值集将仅在当前线程中可访问`get`。

它真的很容易理解。

想象一下，每个`Thread`都有一个将值与`ThreadLocal`实例相关联的映射。每次对 a 执行 get 或 set 时`ThreadLocal`， 的实现`ThreadLocal`都会获取与当前`Thread`( ) 关联的映射，并使用自身作为键在该映射中`Thread.currentThread()`执行`get`or 。`set`

**例子：**

```
ThreadLocal tl = new ThreadLocal();
tl.set(new Object()); // in this moment the implementation will do something similar to Thread.getCurrentThread().threadLocals.put(tl, [object you gave]) 

Object obj = t1.get(); // in this moment the implementation will do something similar to Thread.getCurrentThread().threadLocals.get(tl) 
```

有趣的是，它`ThreadLocal`是分层的，这意味着如果您为父级定义了一个值，`Thread`它将可以从子级访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T17:20:28.973

对于特定问题，您总是访问同一个 ThreadLocal 实例，但该实例为调用[get](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html#get%28%29)方法的每个线程返回不同的值。

这就是重点：找到对象很容易，但每个线程都有其特定的值。因此，您可以例如确保您的特定值不会被两个不同的线程访问。

您可以（从概念上）将其视为一种`HashMap<Thread><V>`始终使用`Thread.currentThread()`as 键访问的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T17:34:52.360

因为线程特定的值不是存储在`ThreadLocal`对象中，而是[当前 Thread](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#currentThread%28%29)的`ThreadLocalMap`. 该`ThreadLocal`对象仅用作这些映射中的键。

有关详细信息，请阅读 JavaDoc`ThreadLocal`和子类，或者，如果您对实现感到好奇，请阅读每个最近的 JDK src.zip 中的源代码。

# c++ - 在头文件中声明和初始化常量

> ID：11194095
> 
> 赞同：15
> 
> 时间：2012-06-25T17:18:05.077
> 
> 标签：c++, objective-c, constants, header-files, compile-time-constant

我精通以下典型范例：

```
//.h
extern const int myInt;

//.c, .m, .cpp, what have you
const int myInt = 55; 
```

但是必须有一种方法可以将其放入`.h`文件中以供您无法访问实现文件的库或其他实例使用。

例如，我正在尝试向Xcode 项目中`NSString`的文件添加一个常量，如下所示：`.h`

```
static NSString *const myString = @"my_string"; 
```

但是，当我尝试使用时`myString`，我得到了错误

> Initializer 元素不是编译时常量

on `myString`，表示它没有被正确实例化。如何在 C++ 或 Objecitve-C 头文件中声明编译时常量？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-25T17:55:39.843

在 C++ 中，`const`除非显式声明，否则对象具有内部链接`extern`，因此将定义放入头文件中没有问题，例如：

```
const int myInt = 55; 
```

有了这个定义和第一个声明，`myInt`可以用作整数常量表达式，例如用于数组边界等。

我无法回答 Objective C。

# django - Django-registration：为什么保存用户表单这么难，我的简单解决方案可以吗？

> ID：11194096
> 
> 赞同：0
> 
> 时间：2012-06-25T17:18:06.257
> 
> 标签：django, django-forms, django-registration

我有一个与用户具有 OneToOne 关系的客户端模型，以扩展用户模型。我需要能够注册用户（使用包含用户和客户端字段的表单），为此我使用了 django-registration。这是注册的视图，基于我发现的一些片段：

```
def register_client(request):
    if request.method == 'POST':
        userform = UserForm(request.POST, prefix='user')
        clientform = ClientForm(request.POST, prefix='client')
        if userform.is_valid() and clientform.is_valid():
            user = userform.save()
            client = clientform.save(commit=False)
            client.user = user
            client.save()
            login(request, user)
            return HttpResponseRedirect('/webapp/')
        else:
            return HttpResponse('error!')

    else:
        userform = UserForm(prefix='user')
        clientform = ClientForm(prefix='client')

    t = loader.get_template('register.html')
    c = RequestContext(request, {
        'userform':userform,
        'clientform':clientform,
    })
    return HttpResponse(t.render(c)) 
```

这是我的表格：

```
from registration.forms import RegistrationForm

class UserForm(RegistrationForm):   
    def save(self):
        new_user = User.objects.create_user(
            username=self.cleaned_data['username'],
            email = self.cleaned_data['email'],
            password=self.cleaned_data['password1'])
        new_user.backend='django.contrib.auth.backends.ModelBackend'
        new_user.save()
        return new_user

class ClientForm(forms.ModelForm):
    class Meta:
        model = Client
        exclude = ['user'] 
```

我为 UserForm 实现了 save() 方法，因为 RegistrationForm 不像任何典型的表单那样实现。

为什么一个人必须费尽心思来实现一些后端才能保存一个表单？这种简单的方法有什么问题吗？它确实有效。

（我还添加了，`new_user.backend='django.contrib.auth.backends.ModelBackend'`所以我可以在注册后自动登录用户。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:23:28.340

我不知道如何回答你的问题。如果您的代码有效，那么我认为没有问题。但是正如 zaphod 所说，django-registration 会为您保存和激活用户。如果您想向用户添加额外的数据，那么也可以使用 zaphod 建议的 django-profiles。

我自己使用[django-userena](https://github.com/bread-and-pepper/django-userena/)。它就像 django-registration 和 django-profiles 合二为一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:22:47.310

为什么需要保存 User 模型？django-registration 会为你做这件事，除非你需要一些不同的功能。如果您想为每个用户存储一些额外的信息，最好使用[User profiles](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)。

# tsql - 需要帮助构建复杂的多表查询

> ID：11194101
> 
> 赞同：2
> 
> 时间：2012-06-25T17:18:25.627
> 
> 标签：tsql, ms-access, bioinformatics

**这个问题是许多学习生物信息学和 DNA 数据分析新手都在努力解决的问题：**

假设我有 20 个具有相同列标题的表。每个表代表一个患者样本，每行代表一个在该样本中发生突变的基因座（位点）。每个位点由两列共同唯一标识 - 染色体编号和碱基编号（例如 1 和 43535、1 和 33456、1 和 3454353）。有几列给出了每个突变的不同特征，包括一个名为 Gene 的列，它给出了该位点的基因。一个基因中可以突变多个位点 - 这意味着 Gene 列可以在一个表中多次具有相同的值。

我想通过 Gene来**同时查询所有这些表。**我从 Gene 列输入一个值，我希望输出所有表（样本）的名称，其中基因名称存在于 Gene 列中，以及每个样本的整行（最好），这样我可以在一个输出页面上比较多个样本中该基因的突变特征。

我还想输入一个数字，比如 4，并希望输出一个在 20 名患者中至少有 4 名发生突变的基因列表（其名称出现在 20 个表中至少 4 个的“基因”列中的基因列表）。

做到这一点的“最简单方法”是什么？除了这两个之外，假设我想进行更灵活的查询，那么“最佳方式”是什么？

我是一名 MD，没有任何特定的软件专业知识，但我愿意投入必要的时间来构建这个查询系统。几行代码不会让我失望..

例如数据：

```
Func    Gene    ExonicFunc                 Chr  Start       End        Ref  Obs
exonic  ACTRT2  nonsynonymous SNV           1   2939346     2939346     G   A
exonic  EIF4G3  nonsynonymous SNV           1   21226201    21226201    G   A
exonic  CSMD2   nonsynonymous SNV           1   34123714    34123714    C   T 
```

这只是列的三分之一。删除了多个列以适合此处的页面大小...

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:27:11.273

创建一个将所有表联合在一起的视图。您可能应该添加有关 ti 来自哪个表的附加信息：

```
create view allpatients as
    select 'a' as whichtable, t.*
    from tableA t
    union all
    select 'b' as whichtable, t.*
    from tableB t
    ... 
```

您可能会发现通过创建包含所有患者的表来“实例化”视图更容易。只需有一个存储过程，通过组合 20 个表来重新创建表。

或者，您可能会发现您有很大的单个表（数百万行）。在这种情况下，您可能希望将每个原始表视为一个分区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:57:23.747

如果您拥有的是一堆 Excel 文件，*您可以将它们全部导入同一张表中*，并使用不同的列作为患者 ID。没有必要为此创建 20 个不同的表——事实上，这是一个坏主意。

完成后，转到 Access 的查询设计、SQL 视图并使用这些查询：

要创建返回输入基因名称的所有字段的查询：

```
select *
from gene_data
where gene = [GeneName] 
```

要创建一个返回在超过 4 个样本中发生突变的基因名称的查询：

```
select gene
from
(select gene, sample_id
from gene_data
group by gene, sample_id) g
group by gene
having count(sample_id) > 4 
```

之后，切换到设计视图——您将看到如何使用 GUI 创建类似的查询。

# c++ - cygwin pthread_mutex_timedlock 代理

> ID：11194102
> 
> 赞同：4
> 
> 时间：2012-06-25T17:18:27.150
> 
> 标签：c++, cygwin, posix, mutex

不幸的是，cygwin GCC 4.5.3 pthread 库实现不支持 POSIX 标准函数

```
int pthread_mutex_timedlock(pthread_mutex_t* mutex, struct timespec* abstime); 
```

有没有人知道如何在互斥体包装类中为此方法实现一个好的解决方法？可能`pthread_mutex_trylock()`与（基于毫秒的）`nanosleep()`调用一起使用？我对后一个想法没有很好的感觉，但无论如何 C++ 实现可能看起来像这样：

```
bool MyPosixMutexWrapper::try_lock(const TimeDuration<>& timeout)
{
    if(valid)
    {
        if(timeout == TimeDuration<>::Zero)
        {
             if(pthread_mutex_trylock(&mutexHandle) == 0)
             {
                 return true;
             }
        }
        else
        {
            struct timespec now;
            clock_gettime(CLOCK_REALTIME,&now);
            TimeDuration<> tnow(now);
            tnow += timeout;
            struct timespec until = tnow.getNativeValue();
#if defined(_POSIX_TIMEOUTS)
            if(pthread_mutex_timedlock(&mutexHandle,&until) == 0)
            {
                return true;
            }
#else
            long milliseconds = timeout.milliseconds();
            while(milliseconds > 0)
            {
                 if(pthread_mutex_trylock(&mutexHandle) == 0)
                 {
                     return true;
                 }

                 struct timespec interval;
                 struct timespec remaining;
                 interval.tv_sec = 0;
                 interval.tv_nsec = 1000000;
                 do
                 {
                     remaining.tv_sec = 0;
                     remaining.tv_nsec = 0;
                     if(nanosleep(&interval,&remaining) < 0)
                     {
                         if(errno == EINTR)
                         {
                             interval.tv_sec = remaining.tv_sec;
                             interval.tv_nsec = remaining.tv_nsec;
                         }
                         else
                         {
                             return false;
                         }
                     }
                     clock_gettime(CLOCK_REALTIME,&now);
                     tnow = TimeDuration<>(now);
                     if(tnow >= TimeDuration(until))
                     {
                          return pthread_mutex_trylock(&mutexHandle) == 0;
                     }
                } while(remaining.tv_sec > 0 || remaining.tv_nsec > 0);
                --milliseconds;
            }
#endif
        }
    }
    return pthread_mutex_trylock(&mutexHandle) == 0;
} 
```

有没有人对此代码有更好的想法或改进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T22:55:49.527

我的建议是使用 a`pthread_cond_timedwait`来模仿你的定时锁。这里的诀窍`timed_mutex_`是永远不会保持很长时间，因为等待`timed_cond_`会释放锁。在设置或取消设置`timed_mutex_`后也会立即释放。`locked_`

```
struct MutexGuard {
    pthread_mutex_t &mutex_;
    MutexGuard (pthread_mutex_t &m) : mutex_(m) {
        pthread_mutex_lock(&mutex_);
    }
    ~MutexGuard () {
        pthread_mutex_unlock(&mutex_);
    }
};

struct TimedMutex {
    pthread_mutex_t timed_mutex_;
    pthread_cond_t timed_cond_;
    bool locked_;

    TimedMutex ()
        : timed_mutex_(), timed_cond_(), locked_(false) {
        pthread_mutex_init(&timed_mutex_, 0);
        pthread_cond_init(&timed_cond_, 0);
    }

    ~TimedMutex () {
        pthread_cond_destroy(&timed_cond_);
        pthread_mutex_destroy(&timed_mutex_);
    }

    int lock (const struct timespec *t) {
        MutexGuard g(timed_mutex_);
        while (locked_) {
            int r = pthread_cond_timedwait(&timed_cond_, &timed_mutex_, t);
            if (r < 0) return r;
        }
        locked_ = true;
        return 0;
    }

    void lock () {
        MutexGuard g(timed_mutex_);
        while (locked_) {
            pthread_cond_wait(&timed_cond_, &timed_mutex_);
        }
        locked_ = true;
    }

    void unlock () {
        MutexGuard g(timed_mutex_);
        locked_ = false;
        pthread_cond_signal(&timed_cond_);
    }
}; 
```

# objective-c - __attribute__((constructor)) 函数和自动释放

> ID：11194107
> 
> 赞同：0
> 
> 时间：2012-06-25T17:18:43.600
> 
> 标签：objective-c, constructor, autorelease

如果我在一个函数中创建和使用一些 Objective-C 类，`__attribute__((constructor))`并且它们可能会创建一些自动释放的对象，那么`@autorelease`在构造函数中围绕该代码放置一个块是否安全，即使它之前会被调用`main`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:55:37.920

据我了解，`main()`'`@autorelease`块并不比代码任何其他部分中的块更特别，所以我不明白为什么它不应该工作。

# eclipse - Tomcat 启动时 7 次超时

> ID：11194108
> 
> 赞同：1
> 
> 时间：2012-06-25T17:18:46.433
> 
> 标签：eclipse, timeout, tomcat7

我在 Eclipse Indigo 上运行 Tomcat 7。有时，Tomcat 会在启动时超时。我发现一个偶然的解决方案是使用相同的服务器名和主机名运行 Tomcat。我反复这样做，有时有效，有时无效。我还尝试在 8080、9080 和 8081 之间轮换 HTTP 端口，但就我而言，这个问题与端口无关。我还确定唯一运行的 Tomcat 是 Eclipse 的；我检查我的任务管理器。我想知道这里是否有人知道避免这种情况的更可靠的方法？

当然，我已经完成了自己的研究并发现了这样的线程[（](https://stackoverflow.com/questions/4905290/tomcat-in-eclipse-it-runs-but-time-out-during-startup-anyway)我发现的最接近我的设置和症状的线程）。然而，正如我已经说过的，我一直在轮换端口（我会注意到我的轮换通常包括管理端口和 AJP 分别到 8005/9005 和 8009/9009）但仍然无济于事。

我也尝试过增加 Tomcat 的启动超时间隔并达到 120 秒，然后我才意识到确定不会导致超时的间隔就像某种停机问题。

而且我还尝试过清理服务器、删除和创建新服务器等，但它仍然会超时，除非我幸运地使用了上面描述的碰巧技巧。

例如，就在最近，我遇到了一个 Eclipse 故障的案例，在该故障中，编辑器将您的语法标记为错误，即使它不是。这一次，刷新和关闭打开相关文件不起作用。由于受不了那些锯齿状的线条，我采取了极端措施并重新启动了 Eclipse。重新启动后，该文件在编辑器中确实完美无缺。但令我沮丧的是，Tomcat 在启动时会超时。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:54:23.133

@skytreader - 我发现了这个问题！至少对我来说，我运行一个本地代理服务器（CNTLM 将 NTLM 凭据传递给内部网站）。当您在 Eclipse 中启动 tomcat 时，在 Eclipse 中触发“启动”模式的是对端口的 ping，它是对服务器端口（即 8080）的尝试连接。显然，在运行本地系统代理时，在 eclipse 中这样做会出现问题。

我建议您将 Eclipse 代理设置设置为 DIRECT。如果您使用的是 Windows，则可以使用 proxycfg 设置系统代理。

# python - “int”对象没有属性“__getitem__”

> ID：11194110
> 
> 赞同：38
> 
> 时间：2012-06-25T17:18:51.650
> 
> 标签：python, runtime-error

```
import math
import os

class collection:
    col = [[0 for col in range(5)] for row in range(6)]
    dist = [[0 for col in range(6)] for row in range(6)]
    filename = ""
    result = ""

    def __init__(self,arg1):
        self.filename = arg1

    def coll(self):

        for i in range(6):
            try:
                if(i==0):
                    f = open(self.filename,'r')
                elif(i==1):
                    f = open("chap1.txt",'r')
                elif(i==2):
                    f = open("chap2.txt",'r')
                elif(i==3):
                    f = open("chap3.txt",'r')
                elif(i==4):
                    f = open("chap4.txt",'r')
                elif(i==5):
                    f = open("chap5.txt",'r')

                for j in range(5):
                    self.result = f.readline()
                    self.col[i][j] = self.result
            finally:
                print "file handling error"

    def distance(self):
        for i in range[6]:
            for j in range[6]:
                dis = 0
                for k in range[5]:
                    dis += math.fabs((self.col[i][k]-self.col[j][k])*(j-i))
                self.dist[i][j] = dis
                self.dist[i][i] = sys.maxdouble
        return self.dist

class profile:
    dist = [[0 for col in range(6)]for row in range(6)]
    filename = ""
    pque = [[0 for col in range(6)]for row in range(6)]
    d = [[0 for col in range(6)]for row in range(6)]
    par = [[0 for col in range(6)]for row in range(6)]
    st = 0

    def __init__(self,arg1):
        self.filename = arg1

    def begin(self):
        ob = collection(self.filename)
        ob.coll()
        dist = ob.distance()

    def sssp(self):
        for i in range(6):
            pque[i] = sys.maxdouble
            d[i] = sys.maxdouble
        d[0] = 0
        pque[0] = 0

        while isempty()==0:
            u = extract_min()
            for i in range(6):
                if d[i]>d[u]+dist[u][i]:
                   d[i] = d[u]+dist[u][i]
                   pque_deckey(i,d[i])
                   par[i]=u
                if u!=0:
                    print u
            print "\n"
            for i in range(6):
                print par[i]

    def extract_min():
        ret = 0
        shift = 0
        minimum = pque[0]

        for i in range(6):
            if pque[i]<minimum:
                minimum = pque[i]
                ret = i
        pque[ret] = sys.maxdouble
        return ret

    def isempty(self):
        count = 0
        for i in range(6):
            if pque[i] == sys.maxdouble:
                count=count+1
        if count==6:
            return 1
        else :
            return 0

    def pque_deckey(self,im,di):
        pque[im]=di

class main:
    filename = raw_input("enter name of student:\n")
    filename = filename + ".txt"
    if(os.path.exists(filename)==1):
        f = file(filename,"r")
    else:
        f = file(filename,"w+")
        att1 = raw_input("att1 score:\n")
        att2 = raw_input("att2 score:\n")
        att3 = raw_input("att3 score:\n")
        att4 = raw_input("att4 score:\n")
        att5 = raw_input("att5 score:\n")
        f.write(att1)
        f.write("\n")
        f.write(att2)
        f.write("\n")
        f.write(att3)
        f.write("\n")
        f.write(att4)
        f.write("\n")
        f.write(att5)
        f.write("\n")
    stud = profile(filename)
    stud.begin()
    stud.sssp() 
```

它显示运行时错误：

```
File "C:\Python27\winculum.py", line 33, in coll
    self.col[i][j] = self.result
TypeError: 'int' object has no attribute '__getitem__' 
```

我只是python的初学者，即使在网上搜索后我也无法纠正。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-25T17:24:37.190

错误：

```
'int' object has no attribute '__getitem__' 
```

意味着您正在尝试将索引运算符`[]`应用于 int，而不是列表。所以`col`不是一个列表，即使它应该是？让我们从那开始。

看这里：

```
col = [[0 for col in range(5)] for row in range(6)] 
```

在内部使用不同的变量名称，看起来列表推导`col`在迭代期间覆盖了变量。（不是在您设置*的*`col`迭代期间，而是在以下迭代期间。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-03T02:12:27.717

此错误可能表明之前在您的代码中使用了具有相同名称的变量，但用于其他目的。可能，变量的名称与后面代码中使用的现有函数一致。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T17:24:10.420

一些问题：

```
for i in range[6]:
            for j in range[6]: 
```

应该：

```
range(6) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-15T12:55:23.400

我最近在处理递归和嵌套列表时遇到了类似的问题。我宣布：

```
print(r_sum([1,2,3[1,2,3],])) 
```

代替

```
print(r_sum([1,2,3,[1,2,3],])) 
```

注意数字 3 后面的逗号

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-25T15:37:24.213

您也可以先将**int**转换为**str**并为其分配索引，然后再次将其转换为 int ，如下所示：

```
int(str(x)[n]) //where x is an integer value 
```

# jsf - 了解 JSF2 中的 Flash Scope

> ID：11194112
> 
> 赞同：32
> 
> 时间：2012-06-25T17:19:09.570
> 
> 标签：jsf, jsf-2, flash-scope

据我了解，在面孔请求生命周期中放置在 Flash 范围内的对象将可用于下一个面孔请求生命周期，然后清除。

假设我有两个页面：

**page01.xhtml**：

```
<h:form>
    <h:commandButton  action="#{page01Bean.action}" />
</h:form> 
```

**Page01Bean：**

```
@ManagedBean
@RequestScoped
public class Page01Bean {

        public void action(){
            FacesContext.getCurrentInstance().getExternalContext().getFlash().put("fooKey", "fooValue");
        }

} 
```

**page02.xhtml**：

```
<h:outputText value="#{flash.fooKey}"/> 
```

因此，当单击中的按钮时，`page01.xhtml`会启动一个面孔请求生命周期（例如生命周期 A）并将值设置为名为的键下的 flash`fooKey`

然后我打开另一个浏览器选项卡并浏览 `page02.xhtml`. 另一个面临请求生命周期（比如生命周期 B）开始呈现此页面。我希望生命周期 B 可以访问其先前生命周期的 flash 范围（即生命周期 A）并显示`fooValue`在 `page02.xhtml`. 但是，它什么也不显示。

请纠正我对本示例中闪存范围的误解。非常感谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-25T17:40:43.007

简而言之，存储在 flash 作用域中的变量将在重定向后继续存在，之后将被丢弃。这在实现 Post-Redirect-Get 模式时非常有用。

如果您尝试通过重定向导航到另一个页面并在加载时访问属性，它们将在那里。完成该请求后，闪存中的值将被丢弃。例如：

您在 page1.xhtml 中，并且有一个 commandLink 使用类似这样的方法重定向到新页面（注意：我将使用隐式导航）。

```
public String navigateToPageB() {
    FacesContext.getCurrentInstance().getExternalContext().getFlash().put("param1", "Hello World!");
    return "pageB?faces-redirect=true";
} 
```

渲染 pageB.xhtml 时，您可以通过 EL 表达式访问这些值，例如

```
<h:outputLabel value="#{flash['param1']}" /> 
```

这将显示“Hello World！” 我们之前在 navigateToPageB 中保存的字符串。

至于您的问题，通过在您的资源管理器中打开一个新选项卡，您不会访问您在上一个选项卡上访问的相同上下文，因此您的变量将在那里不可用。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-01-22T08:21:19.647

以前的答案是正确的，但为了完整起见，我想说在 Mojarra 实现中存在[很多问题](https://stackoverflow.com/questions/17668986/exception-about-flash-in-mojarra-jsf)，但最终他们实现了使其在 Mojarra 2.1.27 和 2.2.5 版本中正常工作。

正如@Gamb 所说，flash 作用域的目的是保持参数在内部跨重定向映射。如果需要，我们还可以使参数保持更长时间。除了上面提到的 , `FacesContext#getCurrentInstance#getExternalContext#getFlash#put`, 还有机会通过 EL 表达式设置参数, 使用[`<c:set />`](http://docs.oracle.com/javaee/6/javaserverfaces/2.0/docs/pdldocs/facelets/c/set.html). 我在[SSCCE](http://sscce.org/)之后实施了一个基本测试，它使用两个视图显示了更广泛的选项：

**豆1**

```
@ManagedBean
@ViewScoped
public class Bean1 implements Serializable {

    /**
     * Just takes the given param, sets it into flash context and redirects to
     * page2
     * 
     * @param inputValue
     * @return
     */
    public String goPage2(String inputValue) {
        FacesContext.getCurrentInstance().getExternalContext().getFlash()
                .put("param", inputValue);
        return "page2?faces-redirect=true";
    }

} 
```

**page1.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head />
<h:body>

    <!-- Sets the first flash param at the action method, which redirects to page 2 -->
    <h:form>
        <h:inputText value="#{inputValue}" />
        <h:commandButton action="#{bean1.goPage2(inputValue)}"
            value="Go Page 2" />
    </h:form>

    <!-- Sets the second flash param -->
    <c:set target="#{flash}" property="param2" value="Myparam2" />

    <!-- Tries to retrieve both of the params. 
    Note none of them is displayed at the first page hit.
    If page refreshed, the second param which has been already set 
    using c:set above, will be displayed -->
    <p>Param1: #{flash['param']}</p>
    <p>Param2: #{flash['param2']}</p>
</h:body>
</html> 
```

**豆2**

```
@ManagedBean
@ViewScoped
public class Bean2 implements Serializable {

    public String getParam() {
        /**
         * Takes the parameter from the flash context
         */
        return (String) FacesContext.getCurrentInstance().getExternalContext()
                .getFlash().get("param");
    }

} 
```

**page2.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core">
<h:head />
<!-- This page just displays the received params -->
<h:body>
    <!-- Different ways to retrieve the params from the flash scope -->
    <p>Param1: #{bean2.param}</p>
    <p>Param1: #{flash.param}</p>
    <p>Param1: #{flash['param']}</p>
    <p>Param2: #{flash['param2']}</p>

    <!-- Keep the first param for next redirection -->
    #{flash.keep.param}

    <!-- Return to page1 and see how the first param is retained -->
    <h:button outcome="page1?faces-redirect=true" value="return to 1" />
</h:body>
</html> 
```

**也可以看看：**

*   [JSF 闪存文档](https://javaserverfaces.java.net/nonav/docs/2.0/javadocs/javax/faces/context/Flash.html)
*   [用户手动重新加载视图时保留 flash 参数](https://stackoverflow.com/a/25057753/1199132)

# python - else vs return 在函数中使用以提前停止处理

> ID：11194119
> 
> 赞同：5
> 
> 时间：2012-06-25T17:19:26.447
> 
> 标签：python

[编辑] 更改`return 0`为`return`. 成为 Python n00b 的副作用。:)

我正在定义一个函数，我正在执行大约 20 行处理。在处理之前，我需要检查是否满足某个条件。如果是这样，那么我应该绕过所有处理。我已经以这种方式定义了函数。

```
def test_funciton(self,inputs):
    if inputs == 0:
        <Display Message box>
        return
    <20 line logic here> 
```

请注意，20 行逻辑不返回任何值，并且我没有使用第一个“if”中返回的 0。

我想知道这是否比使用以下类型的代码更好（在性能、可读性或任何其他方面），因为上述方法对我来说看起来不错，因为它少了一个缩进：

```
def test_function(self,inputs):
    if inputs == 0:
        <Display Message box>
    else:
        <20 line logic here> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:24:46.553

一般来说，它提高了代码的可读性以尽早处理故障情况。那么你的代码就不用担心这些了，你的代码的读者也不必再考虑它们了。在许多情况下，您会引发异常，但如果您真的什么都不想做，即使您通常遵循“单一出口点”风格，我也不认为这是一个主要问题。

但是，既然您没有使用该值，为什么不使用`return 0`just呢？`return`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T17:24:56.700

在这种情况下，我认为重要的是要知道为什么`inputs`不能为零？通常，我认为大多数程序处理此问题的方式是在传递错误值时引发异常。然后可以在调用例程中处理（或不处理）异常。

你会经常看到它写成“最好请求宽恕”，而不是“在你跳跃之前先看看”。当然，如果您经常将 0 传递给函数，那么`try`/`except`子句可能会变得昂贵（`try`便宜，`except`不是）。

如果您设置为“在跳跃之前查看”，我可能会使用第一种形式来保持缩进。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T17:25:12.153

首先，你可以`return`在没有任何东西的情况下使用，你不必强制使用`return 0`.

对于性能方式，[这个问题](https://stackoverflow.com/q/8271139/718618)似乎证明你不会注意到任何区别（除非你真的很不幸;））

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T17:24:29.930

我怀疑无论哪种情况，性能都会有很大不同。像你一样，我倾向于更倾向于第一种可读性方法。

除了较小的缩进（IMO 并不重要）之外，当您的输入 == 0 时，它排除了进一步阅读的必要性：在第二种方法中，人们可能会假设在 if/else 语句之后有额外的处理，而第一个明显表明该方法在该条件下是完整的。

不过，这实际上取决于个人喜好，您将在实践中看到这两种方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T17:24:59.937

在这种情况下，您的第二个示例将`return`显示消息框。

我更喜欢“早点返回”，因为我认为它会带来更好的可读性。但是话又说回来，如果不满足某些条件，我在函数实际结束之前发生的大多数回报往往更多地围绕短路应用程序逻辑。

# php - PDFTK 位置（500 内部错误）

> ID：11194134
> 
> 赞同：1
> 
> 时间：2012-06-25T17:20:52.523
> 
> 标签：php, pdf, command-line, pdftk

所以我安装了 PDFTK，并且在根目录中似乎可以工作。（IE：/public_html/）但是，一旦我将脚本移动到“文件夹”（IE：/public_html/test/）中，它就会形成 500 内部服务器错误。

这是我拥有并测试过的代码。

```
// Option 1
$command = 'pdftk test/FormTest.pdf fill_form test/FormTestData.fdf output output.pdf flatten';

// Option 2
$command = '/usr/bin/pdftk test/FormTest.pdf fill_form test/FormTestData.fdf output output.pdf flatten';

// Option 3
$command = '/usr/local/bin/pdftk test/FormTest.pdf fill_form test/FormTestData.fdf output output.pdf flatten';

$response = passthru($command);

echo "<pre>";
print_r($response);
echo "</pre>"; 
```

这些选项似乎都返回相同的错误 (500)。奇怪的是，当我在站点的根目录中运行它时，它运行良好。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:25:37.500

我安装 PDFTK 时出现问题。现在一切正常。

# c# - 正则表达式两个 html 标签之间的任意数字

> ID：11194137
> 
> 赞同：1
> 
> 时间：2012-06-25T17:21:07.100
> 
> 标签：c#, regex, integer

目前我正在使用这段代码：

```
 var regex = new Regex(@"<span id=""point_total"" class=""tooltip"" oldtitle="".*?"" aria-describedby=""ui-tooltip-0"">(.*?)</span>"); <br />
    var match = regex.Match(@"<span id=""point_total"" class=""tooltip"" oldtitle="".*?"" aria-describedby=""ui-tooltip-0"">"+ "{n}"+ "</span>"); <br />
    var result = match.Groups[1].Value; <br />
        return result; <br /> 
```

如何更改代码以便 {n} 在哪里，它可以等于任何整数？对不起，如果我没有说得太好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:23:20.907

更改`"{n}"`为`"\d+"`，一切就绪。

```
var match = regex.Match(@"<span id=""point_total"" class=""tooltip"" oldtitle="".*?"" aria-describedby=""ui-tooltip-0"">\d+</span>"); 
```

**编辑：**我可能误解了你的问题，你想改变你的正则表达式：

```
var regex = new Regex(@"<span id=""point_total"" class=""tooltip"" oldtitle="".*?"" aria-describedby=""ui-tooltip-0"">(.*?)</span>"); 
```

到：

```
var regex = new Regex(@"<span id=""point_total"" class=""tooltip"" oldtitle="".*?"" aria-describedby=""ui-tooltip-0"">\d+</span>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:24:07.607

您是否正在寻找匹配数字的模式？ `"\d"`

# jquery - 使用正则表达式连接数组元素

> ID：11194140
> 
> 赞同：1
> 
> 时间：2012-06-25T17:21:23.067
> 
> 标签：jquery, regex, join

是否可以使用正则表达式连接数组元素？如果是这样，我如何达到这些要求？

*   每个元素都应该用一个空格字符连接，除非它是一个空元素。
*   空数组元素应与换行符 ( `\n`) 连接。

这意味着：

```
["Hello, this is a sentence.", "This is another sentence.", "", "", "Then, there are 2 new lines.","","Then just one new line."] 
```

应该转换`.join`为：

```
Hello, this is a sentence. This is another sentence.

Then, there are 2 new lines.
Then just one new line. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:25:56.303

`<br />`循环遍历数组，用或`\n`根据您使用字符串的位置替换空元素，然后将其加入`""`.

```
for (var i = 0; i < myArr.length; i++) {
    myArr[i] = myArr[i] === "" ? "\n" : myArr[i];
}
var myStr = myArr.join(""); 
```

编辑：这是一个完整的演示，包含您的附加要求：http: [//jsfiddle.net/auAAH/](http://jsfiddle.net/auAAH/)

```
var myArr = ["Hello, this is a sentence.", "This is another sentence.", "", "", "Then, there are 2 new lines.", "", "Then just one new line."];
for (var i = 0; i < myArr.length; i++) {
    if (myArr[i] === "") {
        myArr[i] = "\n";
        if (i !== 0 && myArr[i - 1] !== "\n") {
            myArr[i - 1] = myArr[i - 1].replace(/ $/, "");
        }
    }
    else if (i < myArr.length-1) {
     myArr[i] = myArr[i] + " ";   
    }
}
var myStr = myArr.join("");
document.getElementsByTagName("textarea")[0].value = myStr​;​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:33:29.070

```
var string = "";

for(var index = 0; index < elements.length; index++) {
    var lastElement = elements[index -1];
    string += elements[index] !== "" ? (lastElement && lastElement !== ""? " " + elements[index] : elements[index]) : "\n";
}
console.log(string); 
```

**[演示](http://jsfiddle.net/wwJfT/3)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:26:37.393

您应该首先使用匹配/替换循环根据您的规则修改元素，然后您应该`.join`使用结果数组。

# javascript - 做键盘点击的正确方法？

> ID：11194142
> 
> 赞同：0
> 
> 时间：2012-06-25T17:21:42.043
> 
> 标签：javascript, html, key

在 HTML 文件中，我只有一个简单的东西来检测点击：

```
<body onload="document.body.focus()" onkeyup="return keypressed(event)"> 
```

在调用它的 JavaScript 中，我们有：

```
function keypressed(e) { 
    var intKey = (window.Event) ? e.which : e.keyCode;
    if(intKey==13) {/* If enter is clicked, do something */ return false;}
    // Add as many key detects under here...
    return true;
} 
```

这是点击后检查的好方法吗？我问的原因只是我已经使用了一段时间，只是想知道是否有更好的方法。

**为了记录，这个问题的目的是找到最好的方法。我的意思是有和没有jQuery！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:17:24.283

不确定跨浏览器，但在`Chrome`and中进行了测试`Firefox`，如果这有帮助

```
window.onload=function(){
    document.body.onkeyup=function(e){
       var keyCode = (window.event) ? event.keyCode : e.which;     
       if(keyCode==13)
       {
           return false;
       }
       else
       {
           //alert(keyCode);
           // do something...
       }
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:26:14.753

更好的方法是全局监听特定对象而不是主体以进行按键操作。

在 JQuery 中，这将是这样完成的：

```
$('#el').on('keydown', function(e){
    if(e.which == 13){
        alert('keypressed');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:29:38.993

使用 JQuery，它可以在浏览器之间同质化关键代码和事件属性，并帮助您将内联代码排除在 HTML 文件之外：

```
$( document ).ready( function() {
   $( this ).keypress( function( event ) {
      alert( event.which );
   };
} ); 
```

# c# - 实体框架：如何将多个存储过程放在一个事务中？

> ID：11194143
> 
> 赞同：10
> 
> 时间：2012-06-25T17:21:43.210
> 
> 标签：c#, .net, sql-server, entity-framework, entity-framework-4

我已经做了很多搜索，但找不到直接的答案。

我有两个存储过程，它们都是导入到 DBContext 对象的函数

1.  插入A()
2.  插入B()

我想把它们放在一个交易中。（即如果 InsertB() 失败，则回滚 InsertA()）

我怎么做？我可以只声明一个 TransactionScope 对象并环绕这两个存储过程吗？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T17:28:08.160

您需要在事务范围内登记您的操作，如下所示：

```
using(TransactionScope tranScope = new TransactionScope()) 
{
  InsertA();
  InsertB();

  tranScope.Complete();
} 
```

出错时，事务范围将自动回滚。当然，您仍然需要处理异常并执行您的异常处理设计所要求的任何事情（日志等）。但除非您手动调用，否则在作用域结束`Complete()`时事务会回滚。`using`

除非您在同一事务范围内打开其他数据库连接，否则事务范围不会提升为分布式事务（参见[此处](http://msdn.microsoft.com/en-us/library/ms131083.aspx)）。

了解这一点**很重要，**因为否则您需要在涉及此操作的所有服务器（Web、中间层、sql server）上配置[MSDTC 。](http://technet.microsoft.com/en-us/library/cc759136%28v=ws.10%29.aspx)因此，只要不将事务提升为分布式事务，就可以了。

**注意：** 为了微调您的事务选项，例如超时和隔离级别，请查看[此`TransactionScope`构造函数](http://msdn.microsoft.com/en-us/library/ms149853.aspx)。默认隔离级别是可序列化的。

**附加样本：** [这里](http://msdn.microsoft.com/en-us/library/bb738523.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T17:58:21.337

您可以使用 TransactionScope 对象，也可以使用 SqlConnection.BeginTransaction 方法。使用 TransactionScope 时要小心，在不同数据库中调用存储过程时，可以将事务转为分布式事务。分布式事务可能是资源密集型的。

如何使用 sqlConnection.BeginTransaction...(http://msdn.microsoft.com/en-us/library/86773566.aspx)

```
private static void ExecuteSqlTransaction(string connectionString)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();

        SqlCommand command = connection.CreateCommand();
        SqlTransaction transaction;

        // Start a local transaction.
        transaction = connection.BeginTransaction("SampleTransaction");

        // Must assign both transaction object and connection
        // to Command object for a pending local transaction
        command.Connection = connection;
        command.Transaction = transaction;

        try
        {
            command.CommandText =
                "Insert into Region (RegionID, RegionDescription) VALUES (100, 'Description')";
            command.ExecuteNonQuery();
            command.CommandText =
                "Insert into Region (RegionID, RegionDescription) VALUES (101, 'Description')";
            command.ExecuteNonQuery();

            // Attempt to commit the transaction.
            transaction.Commit();
            Console.WriteLine("Both records are written to database.");
        }
        catch (Exception ex)
        {
            Console.WriteLine("Commit Exception Type: {0}", ex.GetType());
            Console.WriteLine("  Message: {0}", ex.Message);

            // Attempt to roll back the transaction.
            try
            {
                transaction.Rollback();
            }
            catch (Exception ex2)
            {
                // This catch block will handle any errors that may have occurred
                // on the server that would cause the rollback to fail, such as
                // a closed connection.
                Console.WriteLine("Rollback Exception Type: {0}", ex2.GetType());
                Console.WriteLine("  Message: {0}", ex2.Message);
            }
        }
    }
} 
```

如何使用 TransactionScope...(http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

```
// This function takes arguments for 2 connection strings and commands to create a transaction 
// involving two SQL Servers. It returns a value > 0 if the transaction is committed, 0 if the 
// transaction is rolled back. To test this code, you can connect to two different databases 
// on the same server by altering the connection string, or to another 3rd party RDBMS by 
// altering the code in the connection2 code block.
static public int CreateTransactionScope(
    string connectString1, string connectString2,
    string commandText1, string commandText2)
{
    // Initialize the return value to zero and create a StringWriter to display results.
    int returnValue = 0;
    System.IO.StringWriter writer = new System.IO.StringWriter();

    try
    {
        // Create the TransactionScope to execute the commands, guaranteeing
        // that both commands can commit or roll back as a single unit of work.
        using (TransactionScope scope = new TransactionScope())
        {
            using (SqlConnection connection1 = new SqlConnection(connectString1))
            {
                // Opening the connection automatically enlists it in the 
                // TransactionScope as a lightweight transaction.
                connection1.Open();

                // Create the SqlCommand object and execute the first command.
                SqlCommand command1 = new SqlCommand(commandText1, connection1);
                returnValue = command1.ExecuteNonQuery();
                writer.WriteLine("Rows to be affected by command1: {0}", returnValue);

                // If you get here, this means that command1 succeeded. By nesting
                // the using block for connection2 inside that of connection1, you
                // conserve server and network resources as connection2 is opened
                // only when there is a chance that the transaction can commit.   
                using (SqlConnection connection2 = new SqlConnection(connectString2))
                {
                    // The transaction is escalated to a full distributed
                    // transaction when connection2 is opened.
                    connection2.Open();

                    // Execute the second command in the second database.
                    returnValue = 0;
                    SqlCommand command2 = new SqlCommand(commandText2, connection2);
                    returnValue = command2.ExecuteNonQuery();
                    writer.WriteLine("Rows to be affected by command2: {0}", returnValue);
                }
            }

            // The Complete method commits the transaction. If an exception has been thrown,
            // Complete is not  called and the transaction is rolled back.
            scope.Complete();

        }

    }
    catch (TransactionAbortedException ex)
    {
        writer.WriteLine("TransactionAbortedException Message: {0}", ex.Message);
    }
    catch (ApplicationException ex)
    {
        writer.WriteLine("ApplicationException Message: {0}", ex.Message);
    }

    // Display messages.
    Console.WriteLine(writer.ToString());

    return returnValue;
} 
```

# objective-c - 将数据加载到 tableview 表单单元格中

> ID：11194145
> 
> 赞同：0
> 
> 时间：2012-06-25T17:21:49.247
> 
> 标签：objective-c, uitableview

我有一个程序，其中`UITableView`包含从笔尖加载的自定义单元格。这些单元格具有文本字段和`UIImage`. 我一直在将它们包含的信息传递给自定义类，并对类进行编码/解码以实现数据持久性。当我想加载数据时，我将类中的信息放入单元格中。这适用于 1 个单元格，但不适用于多个单元格。我已经检查过了，并且这些类正在正确地写入文件。

这是我的检索方法：

```
//Fills an array if the file exists, otherwise returns nil
- (NSMutableArray*) findFile: (NSString *) add
{
    if ([[NSFileManager defaultManager] fileExistsAtPath:[self saveFilePath:add]])
    {
        NSString *temp = [add stringByAppendingString:@"dat"];
        namesIndexer = [[NSMutableArray alloc] initWithContentsOfFile:[self saveFilePath:temp]];

        if (namesIndexer == nil) return nil;

        NSMutableArray *thing = [NSMutableArray new];
        for (NSString *place in namesIndexer)
        {
            temp = [add stringByAppendingString:place];
            PTextHolder *p = [NSKeyedUnarchiver unarchiveObjectWithFile:[self saveFilePath:temp]];
            [thing addObject:p];
        }
        return thing;
    }
    else 
    {
        return nil;
    }
} 
```

请注意，这是在不同的类中，它从持有者那里调用方法。

```
//Returns a cell to be used at a row, populates it from the holder object
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{   
    static NSString *personCellId = @"personID";
    UINib *nib = [UINib nibWithNibName:@"PersonCell" bundle:nil];
    [tableView registerNib:nib forCellReuseIdentifier:personCellId];
    PersonCell *cell = [tableView dequeueReusableCellWithIdentifier:personCellId];

    cell.owner = tableView;
    if (mineTable == nil) mineTable = tableView;
    cell.delegated = formDataStorage;

    [formDataStorage putWhatShouldBeInThisCellForThisRowInIt:cell:(int*)indexPath.row];

    cell.currentRow = [[NSNumber alloc] initWithInt:indexPath.row];

    return cell;
} 
```

这是它调用的方法：

```
- (void) putWhatShouldBeInThisCellForThisRowInIt: (PersonCell *) someCell: (int *) someRow
{
    if ((NSUInteger) someRow >= cake.count)
    {
        NSLog(@"The cake has been undercooked");
        return;
    }

    PTextHolder *temp = [cake objectAtIndex:(NSUInteger) someRow];

    someCell.firstName.text = temp.first;
    someCell.lastName.text = temp.last;
    someCell.middleName.text = temp.middle;
    someCell.suffixName.text = temp.suffix;
    someCell.email.text = temp.email;
    someCell.theSignature.image = temp.sig;
} 
```

这里看起来有什么问题/会导致只加载一个单元格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:47:38.350

我会首先检查数组中的项目数

> [数组计数]

，如果项目数等于 1，那么问题就如你所猜测的编码/解码。

如果不是，您的代码是正确的，问题在于您的代码加载单元格。

顺便说一句，为什么不直接使用以下方法存储“cellInfoClass”数组：

> [NSKeyedArchiver archiveRootObject:array toFile:filePath]

并直接检索数组。

我猜你已经在你的类中添加了编码/编码代码，如果不是这样：

```
/**  
 * Returns an object initialized from data in a given unarchiver. (required)  
 *  
 * @param decoder: An unarchiver object.  
 */
- (id)initWithCoder:(NSCoder *)coder {
    if (self = [super init]) {      
    // If parent class also adopts NSCoding, replace [super init]
    // with [super initWithCoder:decoder] to properly initialize.       
       [self setName:[coder decodeObjectForKey:@"name"]];       
       [self setId:[coder decodeIntForKey:@"id"]];      
       [self setDomain:[coder decodeObjectForKey:@"domain"]];   
    }
    return self;     
 }

/**  
 * Encodes the receiver using a given archiver. (required) 
 * @param coder: An archiver object.  
 */
- (void)encodeWithCoder:(NSCoder *)coder{
    // If parent class also adopts NSCoding, include a call to
    // [super encodeWithCoder:encoder] as the first statement.  
    [coder encodeObject:name forKey:@"name"];
    [coder encodeInt:id forKey:@"id"];
    [coder encodeObject:domain forKey:@"domain"];
} 
```

# http - Node.js http 请求上的 ParseError

> ID：11194148
> 
> 赞同：3
> 
> 时间：2012-06-25T17:22:11.033
> 
> 标签：http, node.js

你好 StackOverflow 社区！

我最近开始学习 Node.js，并决定实现一个反向 HTTP 代理作为任务。有几个艰难的地方，我自己设法通过了，但现在我有点卡住了，需要你的帮助。我设法处理了重定向和相对 url，并且通过实现相对 url 支持，我遇到了我将要描述的问题。

[您可以在http://pastebin.com/vZfEfk8r](http://pastebin.com/vZfEfk8r)找到我的代码。它不是很大，但仍然不适合此页面。

所以对于问题（其中有2个）。我正在使用 http.request 将客户端的请求转发到目标服务器，然后等待响应并将此响应发送回客户端。它适用于某些请求，但不适用于其他请求。这是第一个问题：在我用来测试代理的网站上（[http://ixbt.com](http://ixbt.com)，关于技术的酷俄罗斯网站）我总是可以得到主页/index.html，但是当浏览器开始获取从该页面引用的其他文件（css、img 等）时，大多数请求都以 ParseError ({"bytesParsed":0}) 结尾。

在调试（使用 Wireshark）时，我注意到在代理和目标服务器之间发生以下 HTTP 协商时，某些请求（如果不是全部）失败并出现此错误：

要求：

```
GET articles/pics2/201206/coolermaster-computex2012_70x70.jpg HTTP/1.1
Host: www.ixbt.com
Connection: keep-alive 
```

回复：

```
<html>
<head><title>400 Bad Request</title></head>
<body bgcolor="white">
<center><h1>400 Bad Request</h1></center>
<hr><center>nginx</center>
</body>
</html> 
```

看起来服务器不发送状态代码，也没有标题。所以问题是，这可能是失败的原因（ParseError）吗？

我的另一个担忧是，当我尝试获取与独立请求相同的文件时，我没有问题。只是看看：

要求：

```
GET /articles/pics2/201206/coolermaster-computex2012_70x70.jpg HTTP/1.1
Host: www.ixbt.com
Connection: keep-alive 
```

回复：

```
HTTP/1.1 200 OK
Server: nginx
Date: Mon, 25 Jun 2012 17:09:51 GMT
Content-Type: image/jpeg
Content-Length: 3046
Last-Modified: Fri, 22 Jun 2012 00:06:27 GMT
Connection: keep-alive
Expires: Wed, 25 Jul 2012 17:09:51 GMT
Cache-Control: max-age=2592000
Accept-Ranges: bytes

... and here goes the body ... 
```

因此，归根结底，我如何处理代理请求可能会出现一些错误。也许是因为我实际上做了很多，当主页加载时 - 它有很多图像，等等？

我希望我足够清楚，但是如果我遗漏了什么，请询问详细信息。并且完整的源代码是可用的（同样，在[http://pastebin.com/vZfEfk8r](http://pastebin.com/vZfEfk8r)），所以如果有人愿意尝试它，那就太好了。:)

非常感谢提前！

PS 正如我所说，我只是在学习，所以如果你会在我的代码中看到一些不好的做法（甚至与问题无关），了解它们会很好。

**更新**：正如评论中提到的，我没有代理原始请求的标头，理论上这可能会导致以下请求出现问题。我改变了这一点，但不幸的是，行为保持不变。这是新请求和响应的示例：

要求

```
GET css/main_fixed.css HTTP/1.1
Host: www.ixbt.com
connection: keep-alive
cache-control: no-cache
pragma: no-cache
user-agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5
accept: text/css,*/*;q=0.1
accept-encoding: gzip,deflate,sdch
accept-language: ru-RU,ru;q=0.8,en-US;q=0.6,en;q=0.4
accept-charset: windows-1251,utf-8;q=0.7,*;q=0.3
referer: http://www.ixbt.com/ 
```

回复

```
<html>
<head><title>400 Bad Request</title></head>
<body bgcolor="white">
<center><h1>400 Bad Request</h1></center>
<hr><center>nginx</center>
</body>
</html> 
```

我不得不手工制作“referer”标头，因为浏览器使用反向代理 url 发送它。如您所见，行为仍然相同。还有其他想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T21:17:16.443

感谢宝贵的意见，我能够找到这个问题的答案。它与 Node 或目标 Web 服务器无关，只是一个编码错误。答案是 url 的路径组件对于相对 url 是错误的。从我在问题正文中的日志中已经可以看到它。我将在这里重复它们以重申：

错误的请求：

```
GET articles/pics2/201206/coolermaster-computex2012_70x70.jpg HTTP/1.1 
```

正确的要求：

```
GET /articles/pics2/201206/coolermaster-computex2012_70x70.jpg HTTP/1.1 
```

看到不同？前导斜线。事实证明，由于我自己笨拙的客户 url 处理，我在请求相对 url 时错过了它。但是通过快速而肮脏的修复，它现在可以正常工作了，直到我对客户的 url 进行适当的处​​理。

非常感谢您的评论，他们很有见地！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-29T16:27:23.687

如果上述解决方案不起作用，请尝试删除 content-length 标头。内容长度不匹配导致正文解析器导致此错误

# couchdb - 如何在 CouchDB 中“取消删除”一组文档？

> ID：11194149
> 
> 赞同：1
> 
> 时间：2012-06-25T17:22:20.533
> 
> 标签：couchdb

我在 CouchDB 数据库中有大量文档，这些文档只是使用`_deleted:true`. 我也有这组数据的备份，其中包括他们最后一次已知的良好修订和元数据。我需要保持不变`_id`，所以用新的简单恢复`_id`不是一种选择。

压缩尚未运行，我可以通过`&rev=`url 参数及其附件（需要）访问这些文档中的任何一个。

我需要做的是将这些文档“恢复”到我存档的修订版。令人惊讶的是，我对如何实现这一目标提出了任何疑问。提示或黑客赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:12:26.933

如果您只是`PUT`将整个文档（包括附件存根）返回到数据库中，并删除了 rev，但少了`_deleted:true`参数，那么一切都会好起来的。

# wpf - 是否有比 PathGeometry.FillContainsWithDetail() 更有效的方法来检测多边形重叠/相交？

> ID：11194152
> 
> 赞同：5
> 
> 时间：2012-06-25T17:22:43.183
> 
> 标签：wpf, polygon, polygons, pathgeometry, point-in-polygon

我有一种方法会占用我 25% 的 CPU 时间。我每秒调用这种方法大约 27,000 次。（是的，很多电话，因为它经常更新）。我想知道是否有人知道一种更快的方法来检测 2 个多边形是否重叠。基本上，我必须检查屏幕上的移动对象和屏幕上的静止对象。我正在使用 PathGeometry，下面的两个调用占用了我的程序使用的 CPU 时间的 25%。我传递的 PointCollection 对象仅包含代表多边形 4 个角的 4 个点。它们可能不会创建一个矩形区域，但所有点都是连接的。我想梯形将是形状。

这些方法很短而且很容易实现，但我想我可能想选择一个更复杂的解决方案，如果我可以让它比下面的代码运行得更快。有任何想法吗？

```
public static bool PointCollectionsOverlap(PointCollection area1, PointCollection area2)
{
    PathGeometry pathGeometry1 = GetPathGeometry(area1);
    PathGeometry pathGeometry2 = GetPathGeometry(area2);
    return pathGeometry1.FillContainsWithDetail(pathGeometry2) != IntersectionDetail.Empty;
}

public static PathGeometry GetPathGeometry(PointCollection polygonCorners)
{
    List<PathSegment> pathSegments = new List<PathSegment> 
                                         { new PolyLineSegment(polygonCorners, true) };
    PathGeometry pathGeometry = new PathGeometry();
    pathGeometry.Figures.Add(new PathFigure(polygonCorners[0], pathSegments, true));
    return pathGeometry;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T19:06:16.887

好的，经过大量研究并找到许多部分答案，但没有一个能完全回答这个问题，我找到了一种更快的方法，它实际上比旧方法快 4.6 倍。

我创建了一个特殊的测试应用程序来测试这个速度。[您可以在此处](http://www.customsoftwarezone.com/polygons/polygons.exe)找到测试应用程序。如果您下载它，您可以在应用程序顶部看到一个复选框。选中和取消选中它以在旧方式和新方式之间来回切换。该应用程序生成一堆随机多边形，当多边形与另一个多边形相交时，多边形的边界变为白色。“重绘”按钮左侧的数字允许您输入多边形数量、边的最大长度和与正方形的最大偏移量（以使它们不那么正方形而形状更奇数）。按“刷新”以使用您输入的设置清除和重新生成新多边形。

无论如何，这是两种不同实现的代码。您传入组成每个多边形的点的集合。旧方式使用更少的代码，但比新方式**慢 4.6 倍。**

哦，一个简短的说明。新方法对“PointIsInsidePolygon”有几个调用。这些是必要的，因为没有它，当一个多边形完全包含在另一个多边形中时，该方法返回 false。但是 PointIsInsidePolygon 方法解决了这个问题。

希望这一切都可以帮助其他人解决多边形截距和重叠问题。

旧方式（慢 4.6 倍。 **是的，真的慢 4.6 倍**）：

```
public static bool PointCollectionsOverlap_Slow(PointCollection area1, PointCollection area2)
{
    PathGeometry pathGeometry1 = GetPathGeometry(area1);
    PathGeometry pathGeometry2 = GetPathGeometry(area2);
    bool result = pathGeometry1.FillContainsWithDetail(pathGeometry2) != IntersectionDetail.Empty;
    return result;
}

public static PathGeometry GetPathGeometry(PointCollection polygonCorners)
{
    List<PathSegment> pathSegments = new List<PathSegment> { new PolyLineSegment(polygonCorners, true) };
    PathGeometry pathGeometry = new PathGeometry();
    pathGeometry.Figures.Add(new PathFigure(polygonCorners[0], pathSegments, true));
    return pathGeometry;
} 
```

新方式（快 4.6 倍。 **是的，真的快 4.6 倍**）：

```
public static bool PointCollectionsOverlap_Fast(PointCollection area1, PointCollection area2)
{
    for (int i = 0; i < area1.Count; i++)
    {
        for (int j = 0; j < area2.Count; j++)
        {
            if (lineSegmentsIntersect(area1[i], area1[(i + 1) % area1.Count], area2[j], area2[(j + 1) % area2.Count]))
            {
                return true;
            }
        }
    }

    if (PointCollectionContainsPoint(area1, area2[0]) ||
        PointCollectionContainsPoint(area2, area1[0]))
    {
        return true;
    }

    return false;
}

public static bool PointCollectionContainsPoint(PointCollection area, Point point)
{
    Point start = new Point(-100, -100);
    int intersections = 0;

    for (int i = 0; i < area.Count; i++)
    {
        if (lineSegmentsIntersect(area[i], area[(i + 1) % area.Count], start, point))
        {
            intersections++;
        }
    }

    return (intersections % 2) == 1;
}

private static double determinant(Vector vector1, Vector vector2)
{
    return vector1.X * vector2.Y - vector1.Y * vector2.X;
}

private static bool lineSegmentsIntersect(Point _segment1_Start, Point _segment1_End, Point _segment2_Start, Point _segment2_End)
{
    double det = determinant(_segment1_End - _segment1_Start, _segment2_Start - _segment2_End);
    double t = determinant(_segment2_Start - _segment1_Start, _segment2_Start - _segment2_End) / det;
    double u = determinant(_segment1_End - _segment1_Start, _segment2_Start - _segment1_Start) / det;
    return (t >= 0) && (u >= 0) && (t <= 1) && (u <= 1);
} 
```

# mysql - mysql触发器在插入时不起作用

> ID：11194155
> 
> 赞同：0
> 
> 时间：2012-06-25T17:22:58.887
> 
> 标签：mysql

表：项目创建表：

```
CREATE TABLE `items` (
  `ite_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `itemName` varchar(40) DEFAULT NULL,
  `itemNumber` int(10) unsigned NOT NULL,
  PRIMARY KEY (`ite_id`),
  UNIQUE KEY `itemName` (`itemName`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1

delimiter |

create trigger item_beforeinsert before insert on items
    for each row begin
    if new.itemNumber < 50 then
        set new.ite_id = null;
    end if;
end;
| 
```

现在以下命令不会触发

```
insert items( itemname, itemnumber) values ( 'xyz', 1 ); 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:24:54.650

会是

```
insert INTO items( itemname, itemnumber) values ( 'xyz', 1 ); 
```

另外，由于您已设置`ite_id`为`NOT NULL`，因此您不能使用 a`set new.ite_id = null;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:50:05.360

对于自动递增的主键字段，您可以在插入时传递 NULL 值。MySQL 自动分配自动生成的值。*在 insert 之前*设置 NULL 不是错误。因此触发器没有触发错误。

**示例**：

```
insert into items( ite_id, ... ) values ( null, ... ); 
```

上述语句有效且有效，因为`ite_id`字段是具有自动增量的主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:55:05.360

您的 ite_ID 不为空，并且您想使用触发器将其设置为空，除了它是自动递增的，因此您将无法“控制”分配给该字段的所有值，即它不会覆盖值

# css - How to keep the page without overlapping the entire page

> ID：11194159
> 
> 赞同：0
> 
> 时间：2012-06-25T17:23:11.627
> 
> 标签：css

if you open the below link the content part is overlapped by id #a and #b , my entire webpage is overlapped by those id's,if i change the path absolute to relative the #a #b ,toggle script wont work. how to keep the toggle body height varies by text ,like text height equal to height of the toggle body.

[http://jsfiddle.net/M6xJT/10/](http://jsfiddle.net/M6xJT/10/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:48:06.923

ok, so you want this?

[http://jsfiddle.net/M6xJT/12/](http://jsfiddle.net/M6xJT/12/)

you have to remove the `bottom:0px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:38:11.330

You need to put your content inside #B. Unless I am missing something? I'm not exactly sure what you are trying to accomplish.

```
<div id='B'>body<a href='javascript:' id='toggle' class='left'></a>
Content here
</div> 
```

# video - DirectShow 全屏视频播放器高档品质

> ID：11194163
> 
> 赞同：0
> 
> 时间：2012-06-25T17:23:21.420
> 
> 标签：video, directshow, scale

我正在使用方法构建图形

```
IGraphBuilder::RenderFile 
```

并查询接口 IMediaControl - 运行视频和 IVideoWindow - 设置全屏。

一切都很好，但视频质量 - 似乎 d3d 没有使用线性滤波器进行放大（如果那实际上在下面 - 不确定）。

任何人都知道是否有办法通过这种图形构建来获得良好的视频高档质量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:36:27.033

在 Windows Vista 和 Windows 7 中，您必须将其[`Enhanced Video Renderer Filter`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694916%28v=vs.85%29.aspx)用作视频渲染器才能启用 Driect3D 平滑缩放。默认渲染器不会让您做到这一点（尽管在 Windows XP 中会这样做）。

这使您可以手动构建图形，而不仅仅是使用`RenderFile`，而且您还必须使用无窗口模式，因为 EVR 不提供您`IVideoWindow`。除此之外，EVR 类似于 VMR-9。

# rest - 忽略一对多关系的相关实体的选择 JPA 查询，这可能吗？

> ID：11194164
> 
> 赞同：1
> 
> 时间：2012-06-25T17:23:37.177
> 
> 标签：rest, jpa, one-to-many, createquery

我是 JPA 的新手，如果我的问题看起来很基本，请原谅。我有一个名为 User 的实体，它与其他实体列表相关，如下所示：

```
@OneToMany(cascade = CascadeType.ALL , mappedBy = "user")
private List<session> sessionList; 
```

在控制器类中，我以 RESTFull 方式定义了一个 find 方法，如下所示：

```
@GET
@Path("/Users")
@Produces("application/json")
public List<UserDevice> findAllUsers()
{
    return em.createQuery("SELECT u FROM User u").getResultList();
} 
```

返回的结果包含用户的所有会话，这是正常的，但是虽然我只想检索用户的基本信息（所有简单的列），但结果却很大。我的问题是：是否可以忽略相关实体而只保留实际实体的列？非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:40:40.013

除非您明确地将关联映射为急切加载（使用`@OneToMany(fetch = FetchType.EAGER)`），否则上述查询应该只返回用户的字段，而不应该加载他们的`sessionList`.

如果会话已加载，则关联被标记为急切加载，或者您通过调用`List<Session>`.

# cocoa - uibutton 字体子类

> ID：11194166
> 
> 赞同：0
> 
> 时间：2012-06-25T17:23:42.420
> 
> 标签：cocoa, uibutton

我的 UIButton 类中有以下方法：

```
- (id)initWithCoder:(NSCoder *)aDecoder{
self = [super initWithCoder:aDecoder];
if (self) {
    // Initialization code

    self.titleLabel.font = [UIFont fontWithName:@"Chalkduster" size:16];
    self.titleLabel.lineBreakMode = UILineBreakModeWordWrap;

    self.titleLabel.textColor = [UIColor greenColor];

}
return self;
} 
```

效果很好，除了我看不到按钮周围的边框：有什么想法吗？我需要做些什么才能使按钮边框显示？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:02:46.813

不要子类按钮在 IB 中做所有事情会更好。这就是你如何实现你想要的：

选择**按钮**-> 转到**属性检查器**->**类型**-> 选择**圆角矩形**。这将为您提供默认按钮外观。

然后像这样选择**字体**（按**T**字母）：

![截屏](../Images/d68f15f0b9efd1d14f4f7c140dd3a20a.png)

还要选择字体后面的文本颜色。

**结果：**

![截图 2](../Images/45fb11a82ca5160b36e357c29a893641.png)

**编辑：**

**以编程方式创建按钮：**

```
//create the button with RoundedRect type
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];

//set the position of the button
button.frame = CGRectMake(100, 150, 100, 30);

//set the button's title
[button setTitle:@"Click Me!" forState:UIControlStateNormal];

//set the button's font
button.titleLabel.font = [UIFont fontWithName:@"Chalkduster" size:16];

//set the button's line break mode
button.titleLabel.lineBreakMode = UILineBreakModeWordWrap;

//set the button's text color
[button setTitleColor:[UIColor greenColor] forState:UIControlStateNormal];
//button.titleLabel.textColor = [UIColor greenColor]; // don't use this because button's text color after clicking it will be blue (default).

//add the button to the view
[self.view addSubview:button]; 
```

**结果：**

![截图 3](../Images/cb19ab5d50568e728990edbfa36f2613.png)

**注意：**请勿使用`textColor`，因为单击按钮后您的文本颜色将默认为蓝色。

# grails - 不能在域类中使用 grails g.link

> ID：11194169
> 
> 赞同：6
> 
> 时间：2012-06-25T17:23:50.640
> 
> 标签：grails

我在返回 url 的域类中有静态方法。我需要动态构建该网址，但 g.link 不起作用。

```
static Map options() {
    // ...
    def url = g.link( controller: "Foo", action: "bar" )
    // ...
} 
```

我收到以下错误：

```
Apparent variable 'g' was found in a static scope but doesn't refer to a local variable, static field or class. Possible causes:
You attempted to reference a variable in the binding or an instance variable from a static context.
You misspelled a classname or statically imported field. Please check the spelling.
You attempted to use a method 'g' but left out brackets in a place not allowed by the grammar.
 @ line 17, column 19.
           def url = g.link( controller: "Foo", action: "bar" )
                     ^

1 error 
```

显然我的问题是我试图`g`从静态上下文访问，那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T19:21:29.940

该`g`对象是一个标记库，它在域类中不可用，就像在控制器中一样。您可以通过`grailsApplication`此处所示的方法来了解它：[如何在域类中将 Taglib 作为函数调用](https://stackoverflow.com/questions/2159423/how-to-call-a-taglib-as-a-function-in-a-domain-class)

在 Grails 2+ 中执行此操作的更好方法是通过`grailsLinkGenerator`服务，如下所示：

```
def grailsLinkGenerator

def someMethod() {
    def url = grailsLinkGenerator.link(controller: 'foo', action: 'bar')
} 
```

在这两种情况下，您都需要做一些额外的工作才能从静态上下文中获取`grailsApplication`/ 。最好的方法可能是从你的域类`grailsLinkGenerator`的属性中获取它：`domainClass`

```
def grailsApplication = new MyDomain().domainClass.grailsApplication
def grailsLinkGenerator = new MyDomain().domainClass.grailsApplication.mainContext.grailsLinkGenerator 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T19:19:50.250

如果您使用的是 Grails 2.x，则可以使用 LinkGenerator API。这是一个示例，我正在重新使用我之前测试过的域类，因此请忽略与 URL 无关的功能。

```
class Parent {
    String pName

    static hasMany = [children:Child]

    static constraints = {
    }
    static transients = ['grailsLinkGenerator']

    static Map options() {
        def linkGen = ContextUtil.getLinkGenerator();
        return ['url':linkGen.link(controller: 'test', action: 'index')]
    }
} 
```

**具有静态方法的实用程序类**

```
@Singleton
class ContextUtil implements ApplicationContextAware {
    private ApplicationContext context

    void setApplicationContext(ApplicationContext context) {
        this.context = context
    }

    static LinkGenerator getLinkGenerator() {
        getInstance().context.getBean("grailsLinkGenerator")
    }

} 
```

**新实用程序 Bean 的 Bean Def**

```
beans = {
    contextUtil(ContextUtil) { bean ->
        bean.factoryMethod = 'getInstance'
    }
} 
```

如果您需要基本 URL，请添加`absolute:true`到链接调用。

# java - java中两次之间的差异

> ID：11194170
> 
> 赞同：1
> 
> 时间：2012-06-25T17:23:54.053
> 
> 标签：java, date, jcombobox

我已经搜索并发现了很多不同的东西，但没有一个能真正帮助我找到我想要的东西。我有两个 JComboBoxes，用户可以在其中选择不同的时间。例如，假设 8:00 和 17:30。现在我希望能够显示这些时间之间的差异，所以在这种情况下它将是 9.5。我希望它在 9.5，而不是 9:30。但是我的代码是 9.3，因为它只是将我的字符串转换为双精度。

任何帮助都会很棒

```
public void displaytotal() {
    Object sunBobj, sunEobj, mon, tues, wed, thur, fri, sat;
    double totalD;

    sunBobj = jComboBox1.getSelectedItem();
    sunEobj = jComboBox2.getSelectedItem();
    String sunB = sunBobj.toString();
    String sunE = sunEobj.toString();
    try {
        double sundB = Double.parseDouble(sunB.replace(":", "."));
        double sundE = Double.parseDouble(sunE.replace(":", "."));
        totalD = ((sundE - sundB)) * 24;

        String totalS = "" + totalD;
        jLabel17.setText(totalS);
    } catch (NumberFormatException ex) {
        JOptionPane.showMessageDialog(null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T17:29:06.683

`hh:mm`您可以以小时/分钟为单位拆分字符串：

```
String[] time = sunB.split(":");
int hours = Integer.parseInt(time[0]);
int minutes = Integer.parseInt(time[1]);

double decimalTime = hours + minutes / 60.0; 
```

# c# - 区分方法的两个入口点

> ID：11194171
> 
> 赞同：0
> 
> 时间：2012-06-25T17:23:56.443
> 
> 标签：c#, events

这是三个接口：`IServer, IComponent, IClient.`它们之间的连接是通过事件完成的。我编写`Server, Component, Client` 了分别实现它们的类。

组件之间可能存在依赖关系。也就是说，如果组件 y 依赖于 x 那么在`x.Start()`调用时 - 调用所有后代`Start()`。依赖项是由in 中的`AddDependency()`方法创建的`IComponent`。（见下面的源代码链接）。

客户端不能直接看到组件并通过服务器使用事件与它们交互。只有在所有组件和客户端都在服务器上注册后，才能完成此操作。

问题：该方法`Start()`有 2 个入口点：1：在事件处理程序`Start()`中调用`Server`（第一个组件） 2：`Start()`在`Component`事件处理程序中调用（子代已启动）。

对于 1：如果组件的状态已经是`Running`- throw`IllegalOperationException` 对于 2：如果后代已经是`Running`- 什么也不做。

如何区分1和2？

限制： - 修改接口 - 禁止 - 向下转换 - 禁止。

我看到的一个解决方案是放置静态标志，它在第`Start()`一个组件被调用后立即下降。然而，这种方法破坏了封装，因为每次都应该在某些“外部”方法（例如，在服务器的处理程序中）重新初始化标志，因此外部方法必须看到比接口中指定的更多的东西。这也隐含地暗示 Start() 仅由服务器调用，这在问题中并不能保证。

还有什么想法吗？

来源： [http ://rghost.net/38868270](http://rghost.net/38868270)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:37:18.017

据我所知，您的问题归结为“我有一个只有一个启动方法的界面，我如何判断它是否已经启动而不添加任何其他内容”。

答案让我印象深刻，你不能。你能做的就是`IllegalOperationException`不管怎么叫都扔。然后在你的组件中你抓住`IllegalOperationException`并传递（什么都不做）。在您的服务器方法中，您让它冒泡到更相关的位置。

据我所知，这是您给出限制的唯一选择。

注意：我没有查看任何代码，因为我不想从不可靠的来源下载包含 9 个文件的 zip 文件（对您个人没有冒犯）。

# ruby-on-rails - 当你有 git post-receive 钩子时，Rails 为什么要使用 capistrano？

> ID：11194172
> 
> 赞同：6
> 
> 时间：2012-06-25T17:23:59.660
> 
> 标签：ruby-on-rails, git, capistrano

我根本不熟悉 Capistrano，我刚刚阅读了一些关于配置它的基本帖子。但我的问题是，如果您可以使用 git post-receive 挂钩部署 Rails 应用程序文件，为什么还要打扰 Capistrano？

Capistrano 提供了哪些钩子没有的功能？

我正在研究在不使用 FTP 的情况下部署 Rails 应用程序的自动化方法，并且遇到了 git hooks 和 Capistrano。

还是我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T17:30:53.433

Git 挂钩允许您在给定操作上执行与 git 存储库相关的脚本。

Capistrano 允许您管理生产部署。

对“cap deploy”的一次调用将在您的目标机器上克隆您的主分支，归档以前的版本，预编译您的资产，重新启动乘客。Capistrano 还可以迁移您的数据库，或在 deploy.rb 文件中配置的任何服务器上执行任意数量的任意命令。

与 Capistrano 一起部署到应用程序/数据库服务器环境，当您遇到部署问题时，您将毫不费力地寻求帮助。

# java - 为什么 Google 的 JSON 转换器“GSON”不遵循方法而不是骑乘概念？

> ID：11194175
> 
> 赞同：2
> 
> 时间：2012-06-25T17:24:07.127
> 
> 标签：java, json, overriding, gson

看看以下场景：

```
public class ParentClass {

    private Integer testVar = 1;

    public Integer getTestVar() {
        return testVar;
    }

    public void setTestVar(Integer testVar) {
        this.testVar = testVar;
    }
}

public class ChildClass extends ParentClass {

    private Integer testVar = 2;

    @Override
    public Integer getTestVar() {
        return testVar;
    }

    @Override
    public void setTestVar(Integer testVar) {
        this.testVar = testVar;
    }
}

public class TestClass {

    public static void main(String[] args) {

        ChildClass childClass = new ChildClass();
        childClass.setTestVar(3);
        Gson gson = new Gson();
        String str = gson.toJson(childClass);
        System.out.println(str);
    }
} 
```

在这里，我使用了**com.google.gson.Gson**包进行 json 转换。它给出以下输出：

> {“testVar”：1}

我期望 json 字符串中有 3，但我得到的是 parentClass 的 testVar 变量所持有的值。

1.  孩子的 getTestVar 不应该覆盖父母的对手吗？

2.  是否直接访问实例成员（更改每个类的实例成员的名称，但保持 getter 名称相同证明了这一点）？

3.  如果是，任何人如何直接访问*私人*成员？

**编辑：**我已经编辑了这个问题。此版本仅在 json 中显示父级的值。有没有办法获取孩子的实例成员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:40:13.167

1.  是的，它确实

2.  是的，Gson 直接访问字段。其他执行类似任务的库通常允许您在字段和属性（即使用 getter 和 setter）访问之间进行选择，但 Gson 仅支持字段访问。

3.  私有字段旨在使常规代码无法访问，但在某些特殊情况下（例如序列化/反序列化），直接访问它们是完全合理的。这就是您可以使用反射访问私有字段的原因（请参阅 参考资料[`AccessibleObject`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html)）。

# javascript - 如何编写匹配任何字符串的正则表达式？

> ID：11194178
> 
> 赞同：0
> 
> 时间：2012-06-25T17:24:22.560
> 
> 标签：javascript, regex, wildcard

是的，我知道这听起来违反直觉。但我需要它用于其他人编写的 JavaScript 混搭。有一个正则表达式值用于选择混搭将应用到的项目名称。我希望它适用于所有项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:24:23.247

好的，伙计们。我对正则表达式并不擅长，但我想我明白了。我只是使用以下正则表达式：

```
'.*' 
```

这对我来说很好。点允许任何字符，星号允许重复任意次数。

如果有人知道如何将其限制为单行字符串（ASCII 字符集），我会全力以赴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:26:57.157

您的答案 ( `.*`) 有效，默认情况下只会匹配一行。如果您希望它匹配多行，您可以在您的特定正则表达式实现中启用多行模式，但默认情况下没有人启用它 AFAIK。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:56:02.457

您是正确的，`.*` 可以找到任何字符，但是，[换行符](http://en.wikipedia.org/wiki/Newline) （'\n'等）除外。你可以尝试的是分组。这：`(.*)` 应该适合你。如果您在访问匹配组方面需要帮助，可以在此处找到更多信息：[如何在 JavaScript 正则表达式中访问匹配组？](https://stackoverflow.com/questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regex)

**编辑：**如果您使用的不是 JavaScript，则多行模式与单行模式的实现可能略有不同。JavaScript 本身并没有 single-ling 模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T19:08:19.047

正如其他人所提到的，`.`与换行符不匹配。

如果你必须完全匹配每个字符，包括`\n`then 你可以使用它来代替......

`[\s\S]*`

那是空白字符和非空白字符。换句话说，这将匹配所有内容。

# javascript - 访问函数内的参数名称字符串

> ID：11194181
> 
> 赞同：2
> 
> 时间：2012-06-25T17:24:34.897
> 
> 标签：javascript

是否可以访问参数名称字符串？！

```
function myFunction (a, b, c, d, e, f) {
    var obj = [];
    [].forEach.call(arguments, function(arg) {
        obj.push({
            // question is how to get variable name here?
            name: "a",// "a", "b", "c", "d", "e", "f"
            value: arg, //a, b, c, ,d, e, f
        })
    });
 return obj;
}

myFunction(1,2,3,4,5,6); // return [{name: "a", value: 1}, {name: "b", value: 2}...] 
```

注意：我知道使用`arguments`不是一个好习惯。我想知道这是否可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T17:52:05.703

你可以尝试这样的事情：

```
function myFunction (a, blabla, c, somethingElse, e, f) {
    var obj = [];
    //'(a, b, c, d, e, f)' 
    var tmp = arguments.callee.toString().match(/\(.*?\)/)[0];
    //["a", "b", "c", "d", "e", "f"] 
    var argumentNames = tmp.replace(/[()\s]/g,'').split(',');

    [].splice.call(arguments,0).forEach(function(arg,i) {
        obj.push({
            // question is how to get variable name here?
            name: argumentNames[i],
            value: arg
        })
    });
    return obj;
}

console.log(JSON.stringify(myFunction(1, 2, 3, 4, 5, 6)));
//Output-> [{"name":"a","value":1},{"name":"blabla","value":2},
//          {"name":"c","value":3},{"name":"somethingElse","value":4},
//          {"name":"e","value":5},{"name":"f","value":6}] 
```

[**演示**](http://jsfiddle.net/XVvbM/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T17:32:51.977

函数参数名称是否在函数定义中定义，正如您在上面所写的那样？如果是这样，您可以在函数中创建一个数组：

```
function myFunction(a,b,c,d,e,f) {
  var argNames = ['a','b','c','d','e','f'];
  ...
} 
```

`arguments`只会包含传递给函数的参数的简单数组。从参数到参数名称没有默认映射。无论如何我都知道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:32:07.230

这有效：

```
function myFunction( _obj ) {

    var obj = [],
        names = [],
        args = arguments,
        len = function(o) {
            var a = [];

            for (var i in o) a.push(i);

            return a;
        };

    for (var i in _obj) names.push( i );

    [].forEach.call( len(_obj), function(a, b) {
        obj.push({
            name: names[b],
            value: args[0][names[b]]
        });
    });

    return obj;

}

console.log( myFunction({
    a: 1,
    b: 2,
    c: 3,
    d: 4,
    e: 5,
    f: 6
}));​​​​ 
```

这是一个[**演示**](http://jsfiddle.net/qJsQ7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T17:51:21.627

为了完整性：您不能在 javascript 中使用*命名参数。*如果您想使用它们（从而能够识别参数名称），一种解决方法是提供一个对象：

```
function myParams(params){
  var ret = [];
  for (var l in params){ 
   if (params.hasOwnProperty(l)){
    ret.push(l);
   }
  }
  return ret
}
myParams({a:1,b:2,c:3,d:null,e:null,f:null,g:11});
//=> [a,b,c,d,e,f,g] 
```

[另见...](http://rosettacode.org/wiki/Named_parameters#JavaScript)
并且要真正完整：[另见](http://javascriptweblog.wordpress.com/2011/01/18/javascripts-arguments-object-and-beyond/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-03T17:41:03.390

您可以在函数上调用 toString，然后使用某种正则表达式来解析结果。

```
 function someFunction(a,b,c){}
    var functionString = someFunction.toString(); //return "function someFunction(a,b,c){}"
    var args = functionString.match(/^function (?:.*?)\((.*?)\)/);
    if(args[1])
    {
        var argsNames = args[1].split(",");
    } 

```

我已经在 FF 和 Chrome 上测试过了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-29T06:21:59.873

由于 item.product_image2 是一个 URL 字符串，因此在参数内部调用 changeImage 时需要将其放在引号中。

我的功能 Onclick

```
items+='<img src='+item.product_image1+' id="saleDetailDivGetImg">';
items+="<img src="+item.product_image2+"  onclick='changeImage(\""+item.product_image2+"\");'>"; 
```

我的功能

```
<script type="text/javascript">
function changeImage(img)
 {
    document.getElementById("saleDetailDivGetImg").src=img;
    alert(img);
}
</script> 
```

# android - Android：查找线和图像的交点

> ID：11194182
> 
> 赞同：0
> 
> 时间：2012-06-25T17:24:35.830
> 
> 标签：android, matrix, line, intersect, plane

假设我知道组成一条线的两点。我想知道这条线穿过矩阵或图像的可绘制对象的点（我都可以访问，所以欢迎使用更容易使用的那个）。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:49:58.873

您的起点将是线条绘制算法。有很多画线算法。检查[维基页面](http://en.wikipedia.org/wiki/Line_drawing_algorithm)。

```
dx = x2 - x1
dy = y2 - y1
for x from x1 to x2 {
        y = y1 + (dy) * (x - x1)/(dx)
        plot(x, y)
} 
```

给定 2 个点作为该算法的输入，它将绘制它们之间的所有点。然后可以将这些点映射到相关图像。

# wpf - Caliburn.Micro：找不到源文件 SequentialResult.cs

> ID：11194186
> 
> 赞同：1
> 
> 时间：2012-06-25T17:24:37.327
> 
> 标签：wpf, caliburn.micro, coroutine

尝试在 Caliburn.Micro 中使用 IResult 协程会抛出这个奇怪的异常，是我做错了什么还是框架坏了？

这发生在`yield return result`自`result`定义`IResult`类的位置。

```
Locating source for 'C:\Projects\Blue Spire\Caliburn.Micro\src\Caliburn.Micro.Silverlight\SequentialResult.cs'. Checksum: MD5 {a2 6e ce dd c5 8c b3 ec 9c 21 b7 9 29 24 e7 a5}
The file 'C:\Projects\Blue Spire\Caliburn.Micro\src\Caliburn.Micro.Silverlight\SequentialResult.cs' does not exist.
Looking in script documents for 'C:\Projects\Blue Spire\Caliburn.Micro\src\Caliburn.Micro.Silverlight\SequentialResult.cs'...
Looking in the projects for 'C:\Projects\Blue Spire\Caliburn.Micro\src\Caliburn.Micro.Silverlight\SequentialResult.cs'.
The file was not found in a project.
Looking in directory 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\crt\src\'...
Looking in directory 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\mfc\'...
Looking in directory 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\atl\'...
Looking in directory 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\'...
The debug source files settings for the active solution indicate that the debugger will not ask the user to find the file: C:\Projects\Blue Spire\Caliburn.Micro\src\Caliburn.Micro.Silverlight\SequentialResult.cs.
The debugger could not locate the source file 'C:\Projects\Blue Spire\Caliburn.Micro\src\Caliburn.Micro.Silverlight\SequentialResult.cs' 
```

**编辑**

我被要求提供一些代码。我仍在努力，但我试图让它运行。我基本上试图让分页机制和 CM IResult 一起工作以调用 WCF 服务。

```
public class PagedRequestManager<T>: IResult where T : IPagedRequest
{
    public delegate IAsyncResult BeginRequestDelegate<T>(T request, AsyncCallback callback, object state);
    public delegate IPagedResponse EndRequestDelegate(IAsyncResult result);

    private BeginRequestDelegate<T> _beginRequest;
    private EndRequestDelegate _endRequest;
    private T _request;

    public IPagedResponse Response { get; private set; }

    public PagedRequestManager(BeginRequestDelegate<T> beginRequest, EndRequestDelegate endRequest, T request)
    {
        _beginRequest = beginRequest;
        _endRequest = endRequest;
        _request = request;
    }

    public event EventHandler<ResultCompletionEventArgs> Completed;

    public void Execute(ActionExecutionContext context)
    {
        _beginRequest(_request, PagedCallback, null);
    }

    private void PagedCallback(IAsyncResult result)
    {
        Response = _endRequest(result);
        OnCompleted();
    }

    private void OnCompleted()
    {
        var handler = Completed;
        if (handler != null)
        {
            handler(this, new ResultCompletionEventArgs());
        }
    }
}

public interface IPagedRequest
{
    PageContext PageInfo { get; set; }
}

public interface IPagedResponse
{
    PageContext PageInfo { get; }
    IEnumerable Result { get; }
} 
```

和用法：

```
public IEnumerable<IResult> TestWCF()
{
    var result = new PagedRequestManager<GetItemsRequest>(client.BeginGetItems, client.EndGetItems, new GetItemsRequest() { PageInfo = new PageContext() { Skip = 0, Take = 10 } });
    yield return result;
} 
```

在我们讨论的时候，也许有人想提一下这是否是一个好的解决方案。我不确定如何使用 CM 的 IResult 机制，以及将我从每个 WCF 调用中获得的内容推送到列表中的最佳方法是什么。

# javascript - 如何在 Mootools 中为对象创建的元素添加事件？

> ID：11194190
> 
> 赞同：0
> 
> 时间：2012-06-25T17:24:53.587
> 
> 标签：javascript, dom, mootools, mootools-events

我有一个创建元素的 Mootools 类。我需要向该元素添加一个单击事件，以便在单击它时触发该事件。您将如何执行此操作，因为在创建原始元素的对象方法触发之前无法设置该事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:39:48.953

[Element 构造函数](http://mootools.net/docs/core/Element/Element#Element%3aconstructor)对象接受一个特殊的键`events`

```
new Element('a', {
    href: '#',
    text: 'click me',
    events: {
        click: function(event) {
            event.stop();
            this.fade(.4);
        }
    }
}).inject(document.body); 
```

然后，有事件委托，您可以在其中将事件添加到父元素，该元素可以捕获稍后可以创建的元素的过滤器。

而且您实际上可以在将所有事件注入到dom之前将其添加到对象中，它可能也更快。events 也可以是你之前准备好的对象，或者你可以链接`.addEvents(someobj)`

# memory-management - 结构内存对齐 - 编译时间与动态分配的内存

> ID：11194195
> 
> 赞同：0
> 
> 时间：2012-06-25T17:24:58.510
> 
> 标签：memory-management, glibc, libc, memory-alignment

当我遇到以下语句时，我正在阅读 glibc 手册以了解有关**posix_memalign函数的描述：**

> **在 GNU 系统中 malloc 或 realloc 返回的块的地址始终是 8 的倍数（或 64 位系统上的 16）**。如果您需要一个地址是 2 的高次幂的倍数的块，请使用 memalign、posix_memalign 或 valloc。

如果我考虑一个只包含一个 int 数据成员的简单结构：

```
struct Mystruct
{
 int member;
}; 
```

然后我可以看到 Mystruct 应该是 4 字节对齐的。但是根据 64 位架构的 libc 手册，为这种结构动态分配内存将返回分配在 16 字节对齐地址上的内存。

如果我错了，请纠正我。在我看来，编译器似乎只对全局/静态/自动变量（数据、bss、堆栈）使用结构的自然对齐。但另一方面，为了在堆内存上分配相同的结构，malloc 调用使用预定义的对齐方式（32 位架构上为 8 个，64 位架构上为 16 个）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T00:19:14.917

值得记住的一件事是 malloc() 没有什么神奇之处——它只是一个函数。同样，堆只是一堆内存，编译器承诺不会触碰它的东西。静态分配事物（在堆栈上或在 data/bss 中）是编译器所做的*事情*，因此它可以将它们与指定的任何对齐方式对齐。malloc() （和相关函数）是管理堆的函数，但它们在运行时被调用。编译器对 malloc() 的任何信息一无所知，除了它是一个函数，而 malloc() 对您要求它分配的内存一无所知，除非您要求多少。因为 16 位对齐通常适用于大多数常见用途，所以 malloc() 确保这种对齐是安全的。

PS：编写自己的 malloc() 实现是一个有趣（且令人大开眼界）的练习。

# javascript - 如何使表格单元格中的图像可点击

> ID：11194196
> 
> 赞同：1
> 
> 时间：2012-06-25T17:24:59.750
> 
> 标签：javascript, image, html-table, onclick, clickable

我是一名初学者程序员，正在努力弄清楚如何使图像可点击。

我有一组图像放入表格中，因为那是我需要的布局。目标是在选择表中的某个图像后链接到其他页面。到目前为止，这就是我所拥有的（有多个单元格）：

```
<table border="0">
    <tr>
    <td>
        <a>
            <img src="img1.jpg" width="400" height="178" class="next" onclick="change('http://www.google.com')"/>
        </a>
        <div class="imgText"> Image 1 </div></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:27:42.817

而不是`onclick`，为什么不使用`href`链接：

```
<a href="http://www.google.com"><img src="img1.jpg" width="400" height="178" class="next" /></a> 
```

虽然使用 JavaScript，但您会使用`window.location`：

```
onclick="window.location = 'http://www.google.com'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:33:53.367

如果您的代码中有某处：

```
<script>
...
function change(location){
  window.location = location;
}
... 
```

它应该工作。另外 Blaster 的反应非常好，记住要给图像边框=0。带有 hreh 属性集的标签中的图像在某些浏览器上会出现边框。

# erlang - 如何监控两个 Erlang 节点之间的通信

> ID：11194198
> 
> 赞同：4
> 
> 时间：2012-06-25T17:25:08.313
> 
> 标签：erlang, communication

我正在玩分布式 Erlang。这很有趣，但我想稍微揭示一下它的魔力，看看 Erlang 节点之间实际发送了什么。

您能否建议任何可用的 Erlang 模块或外部工具？

先感谢您！

**更新：**

顺便说一句，Debian 用户可以使用安装 Wireshark`sudo apt-get install wireshark`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T17:50:01.633

网络嗅探器怎么样，比如[tcpdump](http://www.tcpdump.org/)或[Wireshark](http://www.wireshark.org)嗅探 4369/tcp？Wireshark 有一个针对 erlang 分布式协议的特殊过滤器（请参阅内置表达式列表中的 ERLDP）。

有关协议本身的更多低级信息，请参阅[http://www.erlang.org/doc/apps/erts/erl_dist_protocol.html](http://www.erlang.org/doc/apps/erts/erl_dist_protocol.html)

这是 linux 节点和 windows 节点之间的捕获示例：

![在此处输入图像描述](../Images/39f9d7ff48ec8cbde30843013249a2e9.png)

# jquery - 奇怪的 jQuery 问题 - 鼠标悬停表现怪异

> ID：11194201
> 
> 赞同：0
> 
> 时间：2012-06-25T17:25:16.907
> 
> 标签：jquery

我正在尝试在我的菜单上实现非常基本的鼠标悬停效果，因此动画背景颜色出现在标签后面。它正在工作，但在某些标签上，背景会在几秒钟内消失，而在其他标签上则正常。我正在粘贴三个文件的源代码，以便您复制问题。

4.php`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>StarTrackr!</title>

  <link rel="stylesheet" href="css/4.css" type="text/css" media="screen" charset="utf-8" /> 

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>
  <script type="text/javascript" src="js/4.js"></script>
</head>
<body>

      <div id="navigation">
        <ul>
          <li><a href="#">Home</a></li>
          <li><a href="#">Buy Now</a></li>
          <li><a href="#">About Us</a></li>
          <li><a href="#">Products</a></li>
          <li><a href="#">Gift Ideas</a></li>
          <li><a href="#">FAQ</a></li>
        </ul>
      </div>
    <div id="log"></div>
        </body>
</html> 
```

`

4.css

`

```
#head {
    padding-left: 20px;
}

#navigation {   
  margin: 0 0 10px 0;
  padding: 0;
    list-style-type: none;  
    position: relative;
    z-index: 1;

    /* overwrite base */
    float:none;
    width:100%;
}

#navigation ul {
  margin: 0;
  padding: 0;
}

#navigation li {
    display: inline;
    margin: 0;
    padding: 0;
}

#navigation a {
    color: #015287;
    display: inline-block;
    padding: 5px;
    text-decoration: none;
}

#navigation-blob {
  top: 0;
    background-color: #c0ffee;
    position: absolute;
    z-index: -1; 
}

p#intro {
  clear: both;
  margin-top: 10px;
} 
```

`

4.js

`

```
$(function(){
    $('<div id="navigation-blob"></div>').css({
        width: $('#navigation li:first a').width() + 10,
    height: $('#navigation li:first a').height() + 10
    }).appendTo('#navigation').hide();
$('#log').append('Test.<br/>');

    $('#navigation a').mouseover(function(){ 
        $('#log').append('Handler for .mouseover() called.<br/>');
        // Mouse over function
    $('#navigation-blob')
            .show()
            .animate(
            {width: $(this).width() + 10, left: $(this).position().left},
        {duration: 'slow', easing: 'easeOutElastic', queue: false}
    );
    });
    $('#navigation a').mouseout(function(){  
      $('#log').append('Handler for .mouseout() called.<br/>');
        // Mouse out function
    var leftPosition = $('#navigation li:first a').position().left;
    $('#navigation-blob')
            .animate(
            {width:'hide'},
            {duration:'slow', easing: 'easeOutCirc', queue:false}
            ).animate({left: leftPosition}, 'fast' )
            $('#log').append('Handler for .mouseout()2 called.<br/>');
  });
}); 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:14:30.323

参考**[现场演示](http://jsfiddle.net/SivaCharan/YrbhM/)**

我已经对您的`JS`和`CSS`.

## JS：

```
$(function(){
    $('#log').append('Test.<br/>');

    $('#navigation a').hover(
        function() {
            $('#log').append('Handler for .mouseover() called.<br/>');
            // Mouse over function
            $(this).attr('class', 'navigation');
        },
        function() {
            $('#log').append('Handler for .mouseout() called.<br/>');
            // Mouse out function
            $(this).removeAttr('class');
            $('#log').append('Handler for .mouseout()2 called.<br/>');            
        }
    );
});​ 
```

## CSS：

```
#head {
    padding-left: 20px;
}

#navigation {   
    margin: 0 0 10px 0;
    padding: 0;
    list-style-type: none;  
    position: relative;
    z-index: 1;

    /* overwrite base */
    float:none;
    width:100%;
}

#navigation ul {
  margin: 0;
  padding: 0;
}

#navigation li {
    display: inline;
    margin: 0;
    padding: 0;
}

#navigation a {
    color: #015287;
    display: inline-block;
    padding: 5px;
    text-decoration: none;
}

.navigation {
    background-color: #c0ffee;
    position: relative;
}

p#intro {
  clear: both;
  margin-top: 10px;
}​ 
```

# 更新：

我已经添加了您预期的动画。参考这个**[LIVE DEMO 2](http://jsfiddle.net/SivaCharan/YrbhM/1/)**

## JS：

```
$(function(){
    $('#log').append('Test.<br/>');

    $('<div id="navigation-blob"></div>').css({
        width: $('#navigation li:first a').width() + 10,
        height: $('#navigation li:first a').height() + 10
    }).appendTo('#navigation').hide();

    $('#navigation a').hover(
        function() {
            $('#log').append('Handler for .mouseover() called.<br/>');

            $('#navigation-blob')
                .show()
                .animate({
                    width: $(this).width() + 10, 
                    left: $(this).position().left
                },
                {
                    duration: 'slow', 
                    queue: false
                });
        },
        function() {
            $('#log').append('Handler for .mouseout() called.<br/>');

            $('#navigation-blob')
                .show()
                .animate({
                    width: $(this).width() + 10,
                    left: $(this).position().left
                }, 'fast');

            $('#log').append('Handler for .mouseout()2 called.<br/>');            
        }
    );
});​ 
```

# types - 比较不受信任的简单参数的 Pythonic 方法

> ID：11194202
> 
> 赞同：0
> 
> 时间：2012-06-25T17:25:17.487
> 
> 标签：types, compare, python, trusted-vs-untrusted

我得到了不请求许可的基本理念，只是去做并请求宽恕。例如，它不需要是具有 .read() 方法的文件，稍后当您想要读取类似文件的对象时发现“正常工作”的东西时，您会感谢自己。但是，对于像文件这样的复杂对象，这几乎比像数字这样的简单对象更容易理解。

所以我正在尝试编写一个非常简单的类。细节无关紧要，但它有一个内部计数器，并且当计数器超过限制时必须做一些事情。限制在创建对象时作为参数提供。

现在我正在考虑防御性编程。显然我希望我的限制是一个整数，或者至少是一个比较像整数的东西。它可能比这更弱，因为如果它是一个浮点数，我所做的 >= 测试仍然会提供正确的行为。

虽然类用户会知道这个参数应该是一个整数，但如果不是，我希望对象做一些不出所料的事情。我的第一个想法是检查我是否真的有一个号码

```
if isinstance(limit,(int,long,float)): 
```

但是这里有很多“不要测试，尝试除外”的答案，所以我知道这是不符合标准的。最好使用限制，并等待抛出异常。所以我在里面试了一下：除了各种限制

```
if counter >= limit: 
```

如果 limit 是 int 或 float，这可以正常工作。然后我限制了一个字符串或一个元组，与数字比较的对象没有任何明显或合理的定义，并等待捕获异常。但它执行，返回一个布尔值，并保持沉默。

所以我是 RTFM，结果是比较不会引发混合类型的异常，这与“容器中的 x”的操作有关，在任意类型上测试相等性。对于不同的类型，它总是返回 not_equal，但是幅度比较虽然一致，但是是任意的。如果混合类型幅度比较总是返回 False，我也许可以使用它，但它也会很高兴返回 True。

如果我尝试在非数字上使用其他类似整数的行为，我会得到预期的异常，例如这个字符串 + 数字会引发 TypeError

```
limit+0 
```

所以我可以说

```
if counter >= (limit+0) 
```

如果 limit 不是数字，则会引发所需的异常。但这感觉几乎是模糊的。我正在对表达式做一些额外的事情，以便在后门进行类型测试。任何代码优化器或其他编辑器都会删除明显冗余的算术运算。这就像看物体是否与鸭子一样重，看它是否由木头制成，因此可以像女巫一样被烧毁（有点）。

一个更明确的可能性是

```
if counter >= int(limit) 
```

至少有一些内置的解释。它并没有完全按照我在所有情况下想要发生的事情发生，但它目前已经足够了，它不会让任何人感到惊讶。

那么WWGD？当你想要做的只是比较它的大小时，安全地使用不受信任的参数的pythonic方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:12:55.857

如果您确实想验证参数是否属于合适的数字类型，请测试它是否是适当的[数字抽象基类](http://docs.python.org/library/numbers.html)的实例，也许：

```
 import numbers
    ...
    if not isinstance(limit, numbers.Real):
        ... # react to the bad argument type 
```

大概在这种情况下，您会抛出`TypeError`异常。

在您的类的`__init__`方法中执行此操作，以便尽可能接近调用者的原始错误来检测和报告问题。这比等待一些不确定的时间并最终在程序开始使用计数器时崩溃要好得多，此时异常回溯对于确定问题的根源将没有多大帮助。

如果您感到偏执，您还可以在构造函数中检查此参数的值是否大于零，`ValueError`如果不是，则抛出异常。

# asp.net-mvc-3 - 刷新页面后TempData变为null

> ID：11194205
> 
> 赞同：10
> 
> 时间：2012-06-25T17:25:30.530
> 
> 标签：asp.net-mvc-3, c#-4.0, tempdata

我使用 TempData 将数据从一个动作传递到另一个动作，但是当我刷新页面时，TempData 的值变为空，我该如何解决这个问题？谢谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T17:31:57.780

使用`Session`而不是`TempData`. TempData 应该仅用于单个重定向。另一种可能性是在您使用来自 TempData 的值的控制器操作中调用[Keep方法。](http://msdn.microsoft.com/en-us/library/system.web.mvc.tempdatadictionary.keep.aspx)这样，如果用户通过按 F5 刷新页面，TempData 将被持久化以获取更多请求。

# javascript - 使用 JavaScript 将剪贴板中的图像转换为 base64 编码数据

> ID：11194209
> 
> 赞同：2
> 
> 时间：2012-06-25T17:25:39.420
> 
> 标签：javascript, image, base64, clipboard

我希望能够截取屏幕截图，然后只需将其粘贴到 textarea 字段，然后将图像转换为 base64 编码字符串。然后我可以很容易地将它放在 img 元素的 src 属性中。

我想要这种方式的原因是因为我不想被迫将图像本身上传到某个地方，也不想被迫保存它，只需复制和粘贴。

我在某个地方的某个地方看到过这样的东西，所以我知道它是可能的，我只是不知道它是如何完成的，并且再也找不到该网站了......

# c++ - const char* 到 Qt 中的 LPCWSTR

> ID：11194215
> 
> 赞同：0
> 
> 时间：2012-06-25T17:25:57.533
> 
> 标签：c++, qt

我在 Qt 中遇到了一个错误问题：调用时无法将参数 1 从 'const char *' 转换为 'LPCWSTR'：OutputDebugString("wtf!");

在简单的 C++ 项目中，我一直将“字符集”设置为“未设置”，但这一次它不起作用，错误一直显示。我尝试了其他可能性，例如“使用多字节”，但仍然没有效果。这是怎么回事？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:31:45.487

我发现当我使用 qDebug 而不是 OutputDebugString 时它可以工作。

# java - 使用 CAS 进行身份验证和 LDAP 进行授权的 Spring 项目

> ID：11194218
> 
> 赞同：0
> 
> 时间：2012-06-25T17:26:14.447
> 
> 标签：java, spring, spring-security, ldap, cas

我有一个使用 LDAP 进行身份验证和授权的 Spring 3 项目。我们知道将项目更改为使用 CAS 进行身份验证，但仍然像使用 LDAP 进行授权一样工作。有人可以看看这个 XML 文件并告诉我如何让 LDAP 权限恢复并正常工作

```
 <?xml version="1.0" encoding="UTF-8"?>
<b:beans xmlns:b="http://www.springframework.org/schema/beans"
    xmlns="http://www.springframework.org/schema/security" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <http entry-point-ref="casEntryPoint" use-expressions="true">
        <intercept-url pattern="/" access="permitAll" />

        <intercept-url pattern="/index.jsp" access="permitAll" />
        <intercept-url pattern="/cas-logout.jsp" access="permitAll" />
        <intercept-url pattern="/casfailed.jsp" access="permitAll" />

        <intercept-url pattern="/secure/**" access="hasRole('ROLE_USER')" />
        <intercept-url pattern="/requests/**" access="hasRole('ROLE_MEMBER_INQUIRY')" />

        <custom-filter ref="requestSingleLogoutFilter" before="LOGOUT_FILTER" />
        <custom-filter ref="singleLogoutFilter" before="CAS_FILTER" />
        <custom-filter ref="casFilter" position="CAS_FILTER" />

        <logout logout-success-url="/cas-logout.jsp" />
    </http>

    <authentication-manager alias="authManager">
        <authentication-provider ref="casAuthProvider" />
    </authentication-manager>

     <user-service id="userService">
        <user name="rod" password="rod" authorities="ROLE_SUPERVISOR,ROLE_USER" />
        <user name="cpilling04@aol.com.dev" password="testing"
            authorities="ROLE_MEMBER_INQUIRY" />
    </user-service>

    <!-- This filter handles a Single Logout Request from the CAS Server -->
    <b:bean id="singleLogoutFilter" class="org.jasig.cas.client.session.SingleSignOutFilter" />
    <!-- This filter redirects to the CAS Server to signal Single Logout should 
        be performed -->
    <b:bean id="requestSingleLogoutFilter"
        class="org.springframework.security.web.authentication.logout.LogoutFilter"
        p:filterProcessesUrl="/j_spring_cas_security_logout">
        <b:constructor-arg
            value="https://${cas.server.host}/cas-server-webapp/logout" />
        <b:constructor-arg>
            <b:bean
                class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler" />
        </b:constructor-arg>
    </b:bean>

    <b:bean id="serviceProperties" class="org.springframework.security.cas.ServiceProperties"
        p:service="https://${cas.service.host}/MemberInquiry/j_spring_cas_security_check"
        p:authenticateAllArtifacts="true" />

    <b:bean id="casEntryPoint"
        class="org.springframework.security.cas.web.CasAuthenticationEntryPoint"
        p:serviceProperties-ref="serviceProperties"
        p:loginUrl="https://${cas.server.host}/cas-server-webapp/login" />

    <b:bean id="casFilter"
        class="org.springframework.security.cas.web.CasAuthenticationFilter"
        p:authenticationManager-ref="authManager" p:serviceProperties-ref="serviceProperties"
        p:proxyGrantingTicketStorage-ref="pgtStorage"
        p:proxyReceptorUrl="/j_spring_cas_security_proxyreceptor">
        <b:property name="authenticationDetailsSource">
            <b:bean
                class="org.springframework.security.cas.web.authentication.ServiceAuthenticationDetailsSource" />
        </b:property>

        <b:property name="authenticationFailureHandler">
            <b:bean
                class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler"
                p:defaultFailureUrl="/casfailed.jsp" />
        </b:property>

        <b:property name="authenticationSuccessHandler">
            <b:bean
                class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler"
                p:defaultTargetUrl="/requests/add.html" />
        </b:property>
    </b:bean>
    <!-- NOTE: In a real application you should not use an in memory implementation. 
        You will also want to ensure to clean up expired tickets by calling ProxyGrantingTicketStorage.cleanup() -->
    <b:bean id="pgtStorage"
        class="org.jasig.cas.client.proxy.ProxyGrantingTicketStorageImpl" />
    <b:bean id="casAuthProvider"
        class="org.springframework.security.cas.authentication.CasAuthenticationProvider"
        p:serviceProperties-ref="serviceProperties" p:key="casAuthProviderKey">
        <b:property name="authenticationUserDetailsService">
            <b:bean
                class="org.springframework.security.core.userdetails.UserDetailsByNameServiceWrapper">
                <b:constructor-arg ref="userService" />
            </b:bean>
        </b:property>
        <b:property name="ticketValidator">
            <b:bean class="org.jasig.cas.client.validation.Cas20ProxyTicketValidator"
                p:acceptAnyProxy="true"
                p:proxyCallbackUrl="https://${cas.service.host}/MemberInquiry/j_spring_cas_security_proxyreceptor"
                p:proxyGrantingTicketStorage-ref="pgtStorage">
                <b:constructor-arg value="https://${cas.server.host}/cas-server-webapp" />
            </b:bean>
        </b:property>
        <b:property name="statelessTicketCache">
            <b:bean
                class="org.springframework.security.cas.authentication.EhCacheBasedTicketCache">
                <b:property name="cache">
                    <b:bean class="net.sf.ehcache.Cache" init-method="initialise"
                        destroy-method="dispose">
                        <b:constructor-arg value="casTickets" />
                        <b:constructor-arg value="50" />
                        <b:constructor-arg value="true" />
                        <b:constructor-arg value="false" />
                        <b:constructor-arg value="3600" />
                        <b:constructor-arg value="900" />
                    </b:bean>
                </b:property>
            </b:bean>
        </b:property>
    </b:bean>

    <!-- Configuration for the environment can be overriden by system properties -->
    <context:property-placeholder
        system-properties-mode="OVERRIDE" properties-ref="environment" />

    <util:properties id="environment">
        <b:prop key="cas.service.host">wcmisdlin07.uftmasterad.org:8443</b:prop>
        <b:prop key="cas.server.host">wcmisdlin07.uftmasterad.org:8443</b:prop>
    </util:properties>

    <b:bean id="contextSource"
        class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">

        <b:constructor-arg
            value="ldaps://dvldap01.uftwf.dev:636/dc=uftwf,dc=dev" />

        <b:property name="userDn" value="cn=Manager,dc=uftwf,dc=dev" />

        <b:property name="password" value="uftwf" />
    </b:bean>

        <b:bean id="ldapAuthProvider"
        class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">

        <b:constructor-arg>

            <b:bean
                class="org.springframework.security.ldap.authentication.BindAuthenticator">
                <b:constructor-arg ref="contextSource" />
                <b:property name="userDnPatterns">
                    <b:list>
                        <b:value>
                            uid={0},ou=webusers
                        </b:value>
                    </b:list>
                </b:property>
            </b:bean>
        </b:constructor-arg>
        <b:constructor-arg>
            <b:bean
                class="org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator">
                <b:constructor-arg ref="contextSource" />
                <b:constructor-arg value="ou=groups" />
                <b:property name="groupRoleAttribute" value="ou" />
            </b:bean>
        </b:constructor-arg>
    </b:bean>
    <ldap-server url="ldaps://dvldap01.uftwf.dev:636/dc=uftwf,dc=dev" />

</b:beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:37:38.877

您需要将内存中的`UserDetailsService`bean ( `userService`) 替换为[LdapUserDetailsS​​ervice](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-ldap-user-service)。如果您之前使用 LDAP 进行身份验证，那么配置应该几乎相同，假设 CAS 返回的用户名可以轻松映射到目录中。

`userService`更详细地说：您当前有一个使用命名空间创建的 bean ：

```
<user-service id="userService">
    <user name="rod" password="rod" authorities="ROLE_SUPERVISOR,ROLE_USER" />
    <user name="cpilling04@aol.com.dev" password="testing"
        authorities="ROLE_MEMBER_INQUIRY" />
</user-service> 
```

你需要用一个看起来像这样的替换它：

```
<ldap-user-service id="userService" 
    server-ref="yourLdapServer" 
    user-search-base="ou=people"
    user-search-filter="(uid={0})"
    group-search-base="ou=groups"
    group-role-attribute="cn"
    group-search-filter="(member={0})"
    role-prefix="ROLE_" /> 
```

但是设置了各种属性以匹配您的目录配置。它们应该类似于您`<ldap-authentication-provider>`在迁移到 CAS 之前的配置中的任何内容。您还需要声明一个`<ldap-server>`元素以指向目录服务器。同样，这应该与您以前的情况相匹配。

# c# - 尝试更改视图时，多视图以编程方式添加的视图消失

> ID：11194221
> 
> 赞同：0
> 
> 时间：2012-06-25T17:26:19.143
> 
> 标签：c#, asp.net

我有这段代码，它将 ax 数量的视图添加到 Multiview 控件。多视图控件存在于只有一个视图的页面上。在页面初始化上，我创建了 x 个视图，并在每个视图中添加了一个 GridView 控件，当我循环查找要显示哪个视图时，Multiview 控件说它只有 1 个视图。

```
 protected void variantRepeat_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        if (e.CommandSource.GetType() == typeof(LinkButton))
        {
            string theID = ((LinkButton)e.CommandSource).CommandArgument.ToString();
            ViewCollection views = prodView.Views; //this has only 1 view the one that has been added on the source view of the .aspx page
            foreach (View toDisplay in views)
            {
                if (toDisplay.ID == theID)
                    prodView.SetActiveView(toDisplay);
            }
        }

    } 
```

上面的代码循环查找并显示视图。为什么所有视图都消失了，我已经逐步完成并在 init 完成处理数据库查询后，它有 x 个视图 > 源视图中的 1。

为什么这个控件会“失去”视图？

初始化代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.QueryString == null || Request.QueryString.Count < 1)
            Response.Redirect(Server.MapPath("~/Packages/"));
        if (!Page.IsPostBack)
        {
            if (Request.QueryString["id"].ToString() == string.Empty)
                Response.Redirect(Server.MapPath("~/Packages/"));
            var id = Server.HtmlEncode(Request.QueryString["id"].ToString());
            Guid packID = Guid.Parse(id);
            using (var context = new GaleEntities())
            {
                var thePackage = context.PackageEnts.First(p => p.packageID == packID);
                var theVariants = thePackage.Variants;
                var mydatasource = new List<PackageEnt> { thePackage };
                var myVariantDataSource = new List<Variant>();
                foreach (Variant single in theVariants)
                {
                    myVariantDataSource.Add(single);
                }
                packageForm.DataSource = mydatasource;
                variantRepeat.DataSource = myVariantDataSource;
                RenderProductGridviews(theVariants);
                prodView.SetActiveView(prodView.Views[0]);
            }
            packageForm.DataBind();
            variantRepeat.DataBind();
            Page.DataBind();
        }
    }

    protected void RenderProductGridviews(System.Data.Objects.DataClasses.EntityCollection<Variant> variantCol)
    {
        foreach (Variant packVar in variantCol)
        {

            View newView = new View();

            GridView prodGrid = new GridView();
            var myProdDataSource = new List<vw_VariantProduct>();             
            using (var context = new GaleEntities())
            {
                var singleProd1 = context.vw_VariantProduct.Where(vp => vp.variantID == packVar.variantID);
                foreach (vw_VariantProduct extProd in singleProd1)
                {
                    myProdDataSource.Add(extProd);
                }
            }
            prodGrid.DataSource = myProdDataSource;

            BoundField _column = new BoundField();
            _column.DataField = "product_title";
            _column.HeaderText = "Product";
            prodGrid.Columns.Add(_column);

            _column = new BoundField();
            _column.DataField = "product_title";
            _column.HeaderText = "Product";
            prodGrid.Columns.Add(_column);

            _column = new BoundField();
            _column.DataField = "product_desc";
            _column.HeaderText = "Description";
            prodGrid.Columns.Add(_column);

            _column = new BoundField();
            _column.DataField = "product_time";
            _column.HeaderText = "Time (mins)";
            prodGrid.Columns.Add(_column);

            _column = new BoundField();
            _column.DataField = "quantity";
            _column.HeaderText = "Quantity";
            prodGrid.Columns.Add(_column);

            prodGrid.DataBind();
            newView.ID = packVar.variantID.ToString();
            newView.Controls.Add(prodGrid);
            prodView.Views.Add(newView);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:38:20.183

现在，像往常一样，几乎所有与*ASP.Net 中的动态控件有关*的问题都有相同的常见问题......

您需要在**每个帖子**上创建动态控件，您只是在第一次加载页面时创建它们。遵循这个简单的规则：

*   当您不使用母版页时，应在 PreInit 事件中创建动态控件，如果是，则在 Init 事件中创建控件
*   避免在这些事件中设置可以在每个帖子中更改的属性，因为当应用视图状态时（在帖子事件中），这些属性将被覆盖
*   每次发布页面时都必须创建动态控件，避免这种情况 if(!this.IsPostBack) this.CreatemyDynamicControls();
*   当您在 PreInit 或 Init 事件中创建控件时，它们的状态将在 post 事件中自动设置，这意味着在 LoadComplete 事件中，您的控件将包含它们的状态，即使您在每个 post 中再次创建它们，即使您做了没有明确设置他们的状态。*请注意，当您处理在设计时创建的控件时，此行为是不同的，在这种情况下，已设置状态的事件是 Load 事件*
*   事件订阅应该在 PageLoadComplete 之前发生，否则它们不会被引发

我已经发布了几个关于动态控件的答案：

[https://stackoverflow.com/a/11127064/1268570](https://stackoverflow.com/a/11127064/1268570)

[https://stackoverflow.com/a/11167765/1268570](https://stackoverflow.com/a/11167765/1268570)

[按钮数组上的单击事件](https://stackoverflow.com/q/11061675/1268570)

[点击事件后按钮数组消失](https://stackoverflow.com/q/11061754/1268570)

[动态创建一个 ImageButton](https://stackoverflow.com/q/11061872/1268570)

这段代码按需创建动态控件，每个控件在每个帖子上保持其状态

```
public partial class DynamicControlsOnDemand : System.Web.UI.Page
{
    public int NumberOfControls
    {
        get
        {
            if (this.ViewState["d"] == null)
            {
                return 0;
            }
            return int.Parse(this.ViewState["d"].ToString());
        }
        set
        {
            this.ViewState["d"] = value;
        }
    }

    protected void Page_PreLoad(object sender, EventArgs e)
    {
        this.CreateDynamicControls();
    }

    protected void addControl_Click(object sender, EventArgs e)
    {
        this.NumberOfControls = this.NumberOfControls + 1;
        this.myPanel.Controls.Add(this.CreateTextbox(this.NumberOfControls));
    }

    private void CreateDynamicControls()
    {
        for (int i = 0; i < this.NumberOfControls; i++)
        {
            var t = this.CreateTextbox(i + 1);
            t.TextChanged += (x, y) => this.lblMessage.Text += "<br/>" + (x as TextBox).ID + " " + (x as TextBox).Text;

            this.myPanel.Controls.Add(t);
        }
    }

    private TextBox CreateTextbox(int index)
    {
        var t = new TextBox { ID = "myTextbox" + index.ToString(), Text = "de" };

        return t;
    }
} 
```

**ASPX**

```
 <asp:Panel runat="server" ID="myPanel">
    </asp:Panel>
    <asp:Button Text="Add Control" runat="server" ID="addControl" OnClick="addControl_Click" />
    <asp:Label ID="lblMessage" runat="server" /> 
```

**输出**

![在此处输入图像描述](../Images/487b3cf37493ed4aa5eed3dc81460263.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:36:25.317

您设置活动视图的第一个代码块是基于`ItemCommand`事件的，所以我假设这会在`PostBack`?

您在其中添加附加视图的代码`Page_Load`只有在没有回发时才会运行。尝试删除条件`if(!Page.IsPostBack)`语句。您需要在每个页面生命周期中添加动态控件。

# php-5.3 - php.ini 配置

> ID：11194222
> 
> 赞同：1
> 
> 时间：2012-06-25T17:26:19.683
> 
> 标签：php-5.3

任何人都可以解释以下给定指令之间的相互关系吗

```
; Do not log repeated messages. Repeated errors must occur in same file on same
; line unless ignore_repeated_source is set true.
; http://php.net/ignore-repeated-errors
ignore_repeated_errors = off

; Ignore source of message when ignoring repeated messages. When this setting
; is On you will not log errors with repeated messages from different files or
; source lines.
; http://php.net/ignore-repeated-source
ignore_repeated_source = off 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:31:08.143

来自[PHP 文档](http://www.php.net/manual/en/errorfunc.configuration.php#ini.ignore-repeated-errors)：

> ignore_repeated_errors
> 不要记录重复的消息。除非 ignore_repeated_source 设置为 true，否则重复错误必须在同一文件的同一行中发生。
> 
> ignore_repeated_source
> 忽略重复消息时忽略消息源。当此设置为 On 时，您将不会记录来自不同文件或源代码的重复消息的错误。

`ignore_repeated_errors``On`当它们来自同一文件的同一行时，set将抑制相同错误的多次出现。

设置`ignore_repeated_source`为`On` **也**将抑制相同错误的多次出现，即使它们来自不同文件中的不同行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:31:38.640

重复消息是在同一文件的同一行上创建的消息。这可能在循环或函数中：

```
for (...) {
  someFunctionThatFails();
} 
```

通过启用第二个选项，重复的消息不需要位于同一行或文件中。然后，每个请求将只记录一次特定类型的消息。这将只给出一条记录的消息：

```
someFunctionThatFails();
doSomeThingElse();
someFunctionThatFails(); 
```

# php - PHP：如何在字符限制内和换行符附近按单词打破字符串

> ID：11194231
> 
> 赞同：2
> 
> 时间：2012-06-25T17:27:02.910
> 
> 标签：php, string, pdflib

我正在使用一个糟糕的 PDFLib 包装器，它无法处理 PDFLib 的单元格超过字符限制（每个单元格大约 1600 个字符）的问题。因此，我需要将一个大段落分成更小的字符串，这些字符串可以整齐地放入单元格中，不打断单词，并且尽可能靠近行尾。我完全不知道如何有效地做到这一点（我需要它在合理的时间内运行）

这是我的代码，它仅根据字符长度将块切割成子字符串，忽略我上面提到的单词和行要求：

SPE_* 函数是来自包装类的静态函数，SetNextCellStyle 调用用于在单元格的轮廓周围绘制一个框 BeginRow 是开始一行文本所必需的。EndRow 需要结束一行文本，必须在 BeginRow 之后调用，如果没有完全填满预设的列数，则会产生错误。AddCell 将字符串添加到第二个参数列数。

```
function SPE_divideText($string,$cols,$indent,$showBorders=false)
{
$strLim = 1500;
$index = 0;
$maxIndex = round((strlen($string) / 1500-.5));
$retArr= array();
  while(substr($string, $strLim -1500,$strLim)!=FALSE)
    {
    $retArr[$index] = substr($string, $strLim -1500,$strLim);
            $strLim+=1500;

            SPE_BeginRow();
            SPE_SetNextCellStyle('cell-padding', '0');
            if($indent>0)
              {

              SPE_Empty($indent);
              }
            if($showBorders)
              {
            SPE_SetNextCellStyle('border-left','1.5');
            SPE_SetNextCellStyle('border-right','1.5');

              if($index == 0)
                {
                SPE_SetNextCellStyle('border-top','1.5');
                }
                if($index== $maxIndex)
                  {
               SPE_SetNextCellStyle('border-bottom','1.5');

                  }
              }

            SPE_AddCell($retArr[$index],$cols-$indent);
            SPE_EndRow();
            $index++;
    }
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:34:12.197

像这样的东西应该工作。

```
function substr_at_word_boundary($string, $chars = 100)
{
    preg_match('/^.{0,' . $chars. '}(?:.*?)\b/iu', $string, $matches);
    $new_string = $matches[0];
    return ($new_string === $string) ? $string : $new_string;
}

$string = substr_at_word_boundary($string, 1600) 
```

# java - 在 Eclipse 中逆向重构

> ID：11194234
> 
> 赞同：1
> 
> 时间：2012-06-25T17:27:12.710
> 
> 标签：java, eclipse

我被要求更改名称并保持一致性，我重构了几个类以更改它们的名称。现在，老板决定他对这一切有点紧张，只是想让我完全忘记改名。但是，我已经重构了我的代码，虽然我还没有将它提交给 CVS。有什么方法可以让 Eclipse 逆转重构，这样我就不必只获取最后提交的代码？我找不到让 Eclipse 和 CVS 一起工作以使用原始名称提取原始代码的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:36:06.563

选项1：

1.  重构为以前的名称。
2.  执行 CVS 更新以使 CVS 看到未更改的文件。

由于格式差异，这可能不是 100% 完美，但应该很接近。

选项 2：

如果除了重构之外没有其他未完成的更改，请使用此选项。

右键单击项目并选择替换为 -> 最新来自 [whatever]...

# java - 在 VLCJ 中，如何找到媒体文件的总播放时间？

> ID：11194239
> 
> 赞同：0
> 
> 时间：2012-06-25T17:27:34.157
> 
> 标签：java, vlcj

我正在使用 VLCJ 用 Ja​​va 编写媒体播放器。我希望能够在媒体文件的末尾找到一个 JSlider，但为此我需要知道它的总播放时间。

如何使用 VLCJ 获取媒体文件的总播放时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:15:10.703

您应该能够简单地使用`getLength()`您的方法`MediaPlayer`来获取当前播放文件的总播放时间。这将以毫秒为单位返回媒体的总长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:14:07.430

您可以使用 Min = 0、Max = 100 (100%) 的滑块，然后覆盖 positionChanged 然后实现如下：

```
 @Override
        public void positionChanged(MediaPlayer mp, float f) {
            int iPos = (int)(f * 100.0);
            slider.setValue(iPos);
        } 
```

# innerhtml - IE 的 innerHTML 替代方案

> ID：11194240
> 
> 赞同：0
> 
> 时间：2012-06-25T17:27:37.627
> 
> 标签：innerhtml

我创建的 HTML 文档包含链接的专有标签，这些链接在通过我们的发布系统时会转换为标准 HTML。例如：

```
<LinkTag contents="Link Text" answer_id="ID" title="Tooltip"></LinkTag> 
```

当我创作和审查这些文档时，我需要能够在它们发布之前在浏览器中测试这些链接。我编写了以下 JavaScript 来读取属性并将它们写入`<a>`标签：

```
var LinkCount = document.getElementsByTagName('LinkTag').length; 
for (i=0; i<LinkCount; i++) { 

var LinkText = document.getElementsByTagName('LinkTag')[i].getAttribute('contents');
var articleID = document.getElementsByTagName('LinkTag')[i].getAttribute('answer_id');
var articleTitle = document.getElementsByTagName('LinkTag')[i].getAttribute('title');

document.getElementsByTagName('LinkTag')[i].innerHTML = '<a href="publishing_system_url_id='+ articleID +' title="' + articleTitle + '">' + LinkText + '</a>';
} 
```

这在 Firefox 中很有效，但在 IE 中无效。我已经阅读了有关 IE 的 innerHTML 问题，并认为这就是问题所在，但我无法找到解决方法。我想也许 jQuery 可能是要走的路，但我不是很精通它。

如果我能在 IE 中使用它，这将是一个巨大的生产力提升。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:36:39.480

innerHTML 仅适用于打开/关闭标签内部的内容。因此，例如，如果您`LinkTag[i]`是一个`<a>`元素，那么 put`innerHTML="<a .... > </a>`会将其放在`<a tag=LinkTag>`and之间`</a>`。

你需要把它放在一个DIV中。也许使用您的代码从链接中绘制，然后将相应的 HTML 代码放入 div。

```
var LinkCount = document.getElementsByTagName('LinkTag').length; 
for (i=0; i<LinkCount; i++) { 

var LinkText = document.getElementsByTagName('LinkTag')[i].getAttribute('contents');
var articleID = document.getElementsByTagName('LinkTag')[i].getAttribute('answer_id');
var articleTitle = document.getElementsByTagName('LinkTag')[i].getAttribute('title');

document.getElementsById('MyDisplayDiv')[i].innerHTML = '<a href="publishing_system_url_id='+ articleID +' title="' + articleTitle + '">' + LinkText + '</a>'; 
```

这应该在 div 中生成 HTML 结果。您还可以简单地将其他元素附加`LinkTag`到单个 DIV 以在 div 中生成一种“网站预览”。

```
document.getElementsById('MyDisplayDiv').innerHTML += '<a href="publishing_system_url_id='+ articleID +' title="' + articleTitle + '">' + LinkText + '</a>'; 
```

注意`+=`. 应将您的 HTML 制作附加到 ID 为“MyDisplayDiv”的 DIV。您的`LinkTag`元素列表将转换为 div 中的 HTML 元素列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T07:59:08.223

我在我的博客上写了一个脚本，你可以在这里找到：[http](http://blog.funelr.com/?p=61) ://blog.funelr.com/?p= 61 不管怎样，看看它会通过劫持 ie 的 innerHTML 属性自动修复 ie8 和 ie9 中的 ie innerHTML 错误对于表格元素是“只读的”，并将其替换为我自己的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:09:00.480

[在这种情况下，与简单地替换 innerHTML 相比， DOM 函数](https://developer.mozilla.org/En/DOM/)可能被认为更“干净”（并且更快）。像这样的东西可能对你更有效：

```
// where el is the element you want to wrap with <a link.
newel = document.createElement('a')
el.parentNode.insertBefore(newel,prop);
el = prop.parentNode.removeChild(prop);
newel.appendChild(prop);
newel.setAttribute('href','urlhere'); 
```

类似的代码在 Firebug 中对我来说效果很好，它应该用`<a> ... </a>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T19:16:52.367

我有这个 xmlObject：

```
<c:value i:type="b:AccessRights">ReadAccess WriteAccess AppendAccess AppendToAccess CreateAccess DeleteAccess ShareAccess AssignAccess</c:value> 
```

我发现价值使用这个： `responseXML.getElementsByTagNameNS("http://schemas.datacontract.org/2004/07/System.Collections.Generic",'value')[0].firstChild.data`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-04-19T06:56:13.630

1.  这个是最好的：`elm.insertAdjacentHTML( 'beforeend', str );`

2.  如果您的元素尺寸非常小：`elm.innerHTML += str;`

# c# - 跟踪侦听器和控制台输出在 XML 阅读器中不匹配

> ID：11194243
> 
> 赞同：0
> 
> 时间：2012-06-25T17:27:58.640
> 
> 标签：c#, xml, xml-parsing

我在下面有一个非常硬编码的 XML 阅读器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.IO;
using System.Diagnostics;

namespace XML
{
    class Program
    {
        static void Main(string[] args)
        {
        // XML text reader stuff
            XmlTextReader textReader = new XmlTextReader("H:\\User\\Desktop\\secLendingXML.cfm.xml");
        //string[] Fed_Array = new string[] {"Actual Available to Borrow", "Outstanding Loans",
        //"Par Submitted", "Par Accepted", "WTD Average Rate"};
        int j = 0;
    // Trace listener stuff.
        Stream myFile = File.Create("H:\\User\\Desktop\\Fed_Sec_Lending.txt");
        TextWriterTraceListener myTextListener = new TextWriterTraceListener(myFile);
        Trace.Listeners.Add(myTextListener);
        while (textReader.Read())
        {
            switch (textReader.NodeType)
            {
                case XmlNodeType.Element:
                    for (int i = 0; i < textReader.AttributeCount; i++)
                    {
                        textReader.MoveToAttribute(i);
                        switch (textReader.Name)
                        {
                            case "securityMaturityDate": 
                                Trace.Write(textReader.Value + ",");
                                Console.Write(textReader.Value + ",");
                                break;
                            case "couponRate":
                                Trace.Write(textReader.Value + ",");
                                Console.Write(textReader.Value + ",");
                                break;
                            case "securityType":
                                Trace.Write(textReader.Value + ",");
                                Console.Write(textReader.Value + ",");
                                j = 0;
                                break;
                            case "value":
                                Trace.Write(textReader.Value + ",");
                                Console.Write(textReader.Value + ",");
                                j = j + 1;
                                if (j > 4)
                                {
                                    Trace.Write(Environment.NewLine);
                                    Console.Write(Environment.NewLine);
                                }
                                break;

                            }
                        }
                        break;
                }
            }
        }
    }
} 
```

从我的桌面读取[这个](http://www.newyorkfed.org/markets/seclend/xml/v3_0/secLendingXML.cfm)XML 页面的大部分工作似乎都很好。但是，跟踪编写器似乎没有写入与控制台输出相同的数据。我在[这里](http://i.imgur.com/QziVo.png)有控制台输出的快照，以及 Trace 正在写入的文本文件的底部，[如](http://i.imgur.com/hgAF0.png)您所见，最后几行不匹配。

无论出于何种原因，文本文件都没有收到与控制台相同的输出，即使它们应该是。有没有人可以看到为什么文本文件在这里被缩短的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:25:42.697

我可以通过用 Streamwriter 替换 Trace writer 来回答这个问题。

```
using (StreamWriter writer = new StreamWriter("H:\\myName\\Desktop\\Fed_Sec_Lending.txt")) 
```

IE

```
string textvalmatd = textReader.Value;
writer.Write(textvalmatd + ","); 
```

对于所有情况：

```
Trace.Write(textvalmatd + ","); 
```

本来可以。

感谢评论的少数人的帮助。

# javascript - 我怎样才能有选择地禁用一个 jQuery UI 排序？

> ID：11194250
> 
> 赞同：0
> 
> 时间：2012-06-25T17:28:26.223
> 
> 标签：javascript, jquery-ui, jquery-ui-sortable

我有一个包含两个项目的列表：项目和组。项目可以分组进行。我在这里有非常简单的代码：

[http://jsfiddle.net/davestein/fgWEU/](http://jsfiddle.net/davestein/fgWEU/)

如何最好地禁止群组进入群组？我最初制作了不同的连接列表，但在事物之间拖动感觉更笨重。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:48:31.493

到目前为止，我有这个解决方案：

[http://jsfiddle.net/davestein/fgWEU/4/](http://jsfiddle.net/davestein/fgWEU/4/)

> .on ('sortupdate', function(e,ui) {
> 
> ```
> if ( ui.item.hasClass('group') && ui.item.parent().hasClass( 'group-projects' ) ) {
>     ui.item.parent().closest( '.group' ).after( ui.item );
> 
> }
> 
>  }); 
> ```

它有效，但我仍然想知道是否有更好的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:13:42.853

试试这个：

```
stop: function(event, ui) {
    if ($(ui.item).hasClass('group') && $(ui.item).parent().hasClass('group')) {
        $(this).sortable('cancel');
    }
} 
```

[http://jsfiddle.net/rjVbC/](http://jsfiddle.net/rjVbC/)

# c++ - 有没有办法让 GDB 打印一些东西来告诉我一行已经执行，而不停止？

> ID：11194251
> 
> 赞同：0
> 
> 时间：2012-06-25T17:28:27.457
> 
> 标签：c++, multithreading, gdb

我正在调试多线程代码，我只想知道是否已经到达了一行而没有停止，但我不想开始到处添加打印语句。

这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T17:36:20.277

您可以使用“commands”命令将命令附加到 gdb 中的断点。这些命令之一可以是“继续”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T17:37:48.033

您可能正在寻找跟踪点。它们在不停止执行的情况下捕获变量值。

*   [http://sourceware.org/gdb/onlinedocs/gdb/Tracepoints.html](http://sourceware.org/gdb/onlinedocs/gdb/Tracepoints.html)

# javascript - CRM 4.0：自定义网格颜色

> ID：11194254
> 
> 赞同：0
> 
> 时间：2012-06-25T17:28:40.390
> 
> 标签：javascript, grid, crm

我刚刚阅读了这篇文章：[为 CRM 网格着色](https://stackoverflow.com/q/10813204/1480631)。

我正在尝试做类似的事情，但我希望能够仅更改名为 Status Reason 的列的字体颜色。

是否可以修改此代码来执行此操作，如果可以，请有人能指出我正确的方向。

我会在一开始就警告你，我现在只玩了大约 2 周的 Javascript 和 CRM 定制！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:43:18.780

是的，可以修改代码来做到这一点。

如果您通读代码，您会看到“样式”在底部附近完成：

```
if (new_date_value <= current_datetime) {
    InnerGrid.rows[i].style.backgroundColor="ff0066";
} else {
    InnerGrid.rows[i].style.backgroundColor="ff6600";
} 
```

因此，您的样式更改只会插入其中。

您还会注意到，这段代码将样式应用于整行`InnerGrid.rows[i]...`（`InnerGrid.rows[i].cells[colorizeColumn].style...`格式化。

这应该足以让你继续前进。

# sql-server - 优化查询“Select * from tableA”

> ID：11194255
> 
> 赞同：1
> 
> 时间：2012-06-25T17:28:47.067
> 
> 标签：sql-server, tsql, query-optimization

我在一次采访中被问到`Select * from TableA`如果需要大量时间来执行查询，可以使用哪些方法来优化查询。(TableA) 可以是任何具有大量数据的表。面试官没有给我留下任何选择，比如选择几列或使用“WHERE”子句，而是希望我为主题查询提供解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T17:49:23.507

很难知道面试官在找什么。

他们可能是相对缺乏经验和预期的答案，例如：

*   "列出所有列而不是 *，因为这样更快！"; 或者，
*   “添加一个 ORDER BY 因为这总是会加快它的速度！”

有经验的人可能正在寻找的东西是：

*   检查查询计划，是否有计算列或其他类似的东西占用额外的资源？
*   重新审视需求——用户真的需要以任意顺序排列整个表格吗？
*   表上是否有聚集索引；如果不是，堆中是否充满了转发指针？
*   基础表（和/或用于满足查询的索引）上是否存在过多的碎片？
*   查询是否被阻止？
*   查询在等待什么？
*   查询是否在等待外部资源（例如糟糕的 I/O 子系统、内存授予、tempdb 自动增长）？
*   由于统计信息已过时，查询是否并行且遭受数据包等待？

有很多潜在的事情可能会使查询变慢，*或者*可能使查询成为一个糟糕的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T14:55:08.830

实际上，一些数据库将具有优化命令，这些命令将重建数据库表以减少碎片 - 这种方式实际上提高了此类查询的性能。

PostgreSQL 和 SQLite 有命令

```
VACUUM; 
```

MySQL 和 ORACLE 有一个命令

```
OPTIMIZE TABLE table; 
```

它很昂贵，因为它会移动大量数据。但是这样做会使页面更加平衡，并且这种方式通常会缩小数据库的总大小（但是，某些数据库可能会决定在此时添加索引，因此它也可能会增长）。

由于数据是分页存储的，因此通过重建数据库减少页数*可以*提高`SELECT * FROM table;`语句的性能。

# objective-c - 为 yAxis 争取时间

> ID：11194257
> 
> 赞同：0
> 
> 时间：2012-06-25T17:28:58.330
> 
> 标签：objective-c, algorithm

我试图从根本上扭转这个算法，以便我得到给定 y 轴的时间。

```
+ (CGFloat)yAxisForTime:(CGFloat)time
{
    CGFloat newTime = (float)(time * ((60 / [DataClass sharedInstance].timeInterval) / 2 ));
    return kTopBuffer + (44.0f * newTime);
}

+ (CGFloat)timeForYAxis:(CGFloat)y
{
    CGFloat newTime = (float)(y / ((60 * [DataClass sharedInstance].timeInterval) * 2 ));
    return kTopBuffer + (44.0f / newTime);
} 
```

我今天脑子里放了个屁，似乎没能把它弄好。我如何获得 yAxis 的时间？我的 yAxisForTime 运行良好，但现在只需要获取 timeForYAxis。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:39:39.560

如果

```
y = kTopBuffer + (44 * newtime) 
```

然后

```
newTime = (y - kTopBuffer) / 44 
```

因此

```
time = (newTime / ((60 / [DataClass sharedInstance].timeInterval) / 2 )) 
```

所以：

```
time = ( ((y - kTopBuffer) / 44) / ((60 / [DataClass sharedInstance].timeInterval) / 2 )) 
```

# objective-c - 自定义函数中 UI 字段的未声明标识符

> ID：11194258
> 
> 赞同：0
> 
> 时间：2012-06-25T17:29:02.753
> 
> 标签：objective-c, undeclared-identifier

我使用从 .m 文件中的按钮单击事件中复制的代码创建了一个自定义函数，如下所示。代码运行良好，直到我将它复制到我的 displayDev 函数中。这段代码的最后三行给了我一个“使用未声明的标识符”错误。有人能帮我弄清楚为什么 fullVerseLabel.text、VerseField.text 和 InterpretationField.text 都显示为未声明的标识符吗？下面也是我声明这些 UI 字段的 .h 代码。

您可以提供的任何帮助将不胜感激。非常感谢！

```
void displayDev (NSInteger dayNum)
{   NSString *plistFile = [[NSBundle mainBundle] pathForResource:@"Property List" ofType:@"plist"];
    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:plistFile];

    NSString *bookString = [[dict objectForKey:[NSString stringWithFormat:@"Day %d", dayNum]] objectForKey:@"Book"];
    NSString *chapterString = [[dict objectForKey:[NSString stringWithFormat:@"Day %d", dayNum]] objectForKey:@"Chapter#"];
    NSString *verseString = [[dict objectForKey:[NSString stringWithFormat:@"Day %d", dayNum]] objectForKey:@"Verse#"];

    NSString *fullVerseString = [bookString stringByAppendingString:@" "];
    fullVerseString = [fullVerseString stringByAppendingString:chapterString];
    fullVerseString = [fullVerseString stringByAppendingString:@":"];
    fullVerseString = [fullVerseString stringByAppendingString:verseString];
    fullVerseLabel.text = fullVerseString;
    VerseField.text = [dict objectForKey:[NSString stringWithFormat:@"Day %d", dayNum]objectForKey:@"Verse"];
    InterpretationField.text = [dict objectForKey:[NSString stringWithFormat:@"Day %d", dayNum] objectForKey:@"Interpretation"];

    currentlyViewing = dayNum;
} 
```

我在我的 .h 文件中声明了变量并链接到我的故事板。

```
@interface FirstViewController : UIViewController
{   IBOutlet UILabel *fullVerseLabel;
    IBOutlet UITextView *VerseField;
    IBOutlet UITextView *InterpretationField;
    IBOutlet UITextField *TextField;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:54:08.033

您开始使用此方法：

```
void displayDev (NSInteger dayNum) 
```

使用该语法，您实际上将其声明为 C 函数，而不是 Objective-C。您无法在 C 函数中访问您的插座或其他实例变量。您可以通过将第一行更改为：

```
- (void)displayDev:(NSInteger)dayNum 
```

# java - 如何接收json响应

> ID：11194263
> 
> 赞同：-2
> 
> 时间：2012-06-25T17:29:25.253
> 
> 标签：java, android, json, http

我需要将响应转换为字符串..

```
 HttpClient httpclient = new DefaultHttpClient();  
        Log.d("HTTP","Exe");
        String url=Sign(token);
        Log.d("HTTP","Exe");

        HttpPost httpPost;
        httpPost = new HttpPost(url); 
```

response(json) 应该是这样的

```
{
    "url": "http://db.tt/APqhX1",
    "expires": "Tue, 01 Jan 2030 00:00:00 +0000"
} 
```

我如何收到它？我正在使用 Android(java)..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:36:27.673

这是获取任何 json 作为 http 响应的方法。我希望它会有用。

```
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
InputStream is = entity.getContent();

try {
     BufferedReader reader = new BufferedReader(new InputStreamReader(is, "utf-8"), 256);
 StringBuilder sb = new StringBuilder();
 String line = null;
 while ((line = reader.readLine()) != null)  sb.append(line); 
     result = sb.toString();
 is.close();
} catch (Exception e) {}

 JSONArray jArray = new JSONArray(result);
 for(int i = 0; i < jArray.length(); i++) {
JSONObject json_data = jArray.getJSONObject(i);
String url= json_data.getString("url");
    String expires= json_data.getString("expires");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:35:51.543

如果你谷歌并尝试一下，有很多例子：

```
 response = client.execute(httpPost);
  HttpEntity httpEntity = response.getEntity();
  InputStream is = httpEntity.getContent(); 
```

.. 将 Inputstream 转换为字符串

# css - 用于全宽（100% 浏览器）滑块的好的原生图像尺寸是多少？

> ID：11194264
> 
> 赞同：24
> 
> 时间：2012-06-25T17:29:27.240
> 
> 标签：css, image

我正在构建一个包含全宽滑块的网站；100% 的**浏览器窗口**。CSS会是这样的

```
.slider {
    width:100%;
} 
```

...滑块的父级在哪里`<body>`，而不是一些包装器 div。

我的困境是，如果我使用宽度为 1600 像素的图像，并使用 CSS 将其缩放到 100%，那么对于最大化浏览器（显示器宽度）小于 1600 像素的任何人来说，这都可以，因为图像将被缩小而不是放大（暂时不考虑移动/响应大小的考虑）但是在非常大的显示器上使用最大化浏览器的人会使图像放大而不是缩小，因此它的外观会略有下降。

我检查了几个滑块，它们使用的图像宽度约为 2000 像素，但是否存在不需要在大部分显示器上放大的宽度？

**请注意**：我**不是**在问 CSS、网格系统、twitter Bootstrap、响应式或自适应网站、960 像素宽度的网站或类似的东西。我也不是在谈论 100% 的**网站包装器**的滑块。我只是询问用于创建滑块的图像文件的像素宽度，该滑块缩放为浏览器宽度的 100%。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-25T17:34:31.563

1920px 是你想去的最高点。这被认为是屏幕分辨率尺寸的“高端”，任何更高的东西都会使浏览器发挥作用。只要您将幻灯片宽度设置为 100%，它将毫无问题地调整为分辨率高于 1920 的屏幕尺寸。这也将解决占用过多带宽的问题，并且不会影响您的加载时间（这是您网站功能的关键）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T21:25:19.447

根据2013年全球屏幕分辨率统计，1920x1080的显示尺寸在当前十大流行屏幕尺寸中排名第四。这也是迄今为止显示器的最后一款高清显示器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-24T10:13:39.597

我认为这更像是一种个人选择，具体取决于您的目标受众。这些统计数据可能会帮助您做出明智的决定。[http://www.w3schools.com/browsers/browsers_display.asp](http://www.w3schools.com/browsers/browsers_display.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-12T23:09:49.827

赶上 2019 年的超大分辨率显示设备，我会推荐尺寸为 的`2400x1600px`、优化的 jpeg 或具有 jpeg 后备支持的下一代图像格式。

```
<picture>
    <source srcset="sample_image.webp" type="image/webp">
    <source srcset="sample_image.jpg" type="image/jpg">
    <img src="sample_image.jpg" alt="">
</picture> 
```

来源：
[https ://flothemes.com/flothemes-image-sizes/](https://flothemes.com/flothemes-image-sizes/)
[https://freshman.tech/image-optimisation/](https://freshman.tech/image-optimisation/)

* * *

您甚至可以更聪明地走很多步，并使用支持图像优化和响应式图像交付的 CDN，例如（提供免费层）[https://cloudinary.com/](https://cloudinary.com/)或[https://www.cloudimage.io](https://www.cloudimage.io)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T17:30:10.560

960px 是网页任何内容区域的标准全宽，希望在完整的浏览器窗口中没有任何溢出。

[http://960.gs/](http://960.gs/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-25T17:44:55.553

正如上面已经注意到的，标准宽度是 960 像素。但是很多网站都是做自适应的，所以不能肯定。例如，我的显示器的分辨率为 2560x1440。没有人做出如此大的网站分辨率。

如果您想将自适应网站制作为显示器和移动设备，我只能建议使用[twitter bootstrap](http://twitter.github.com/bootstrap/scaffolding.html)或类似的东西。您还可以使用网格系统，例如：[designinfluences](http://www.designinfluences.com/fluid960gs/)。

# ios - 向分组的 UITableView 添加阴影

> ID：11194271
> 
> 赞同：1
> 
> 时间：2012-06-25T17:29:54.803
> 
> 标签：ios, uitableview, cocoa-touch, uikit, shadow

我正在尝试向分组的 UITableView（每个部分上方）添加阴影，例如 twitter 应用程序。我发现了这两个问题

[带阴影的分组 uitableview](https://stackoverflow.com/questions/6912904/grouped-uitableview-with-shadow)

[如何向分组的 UITableView 添加阴影（如官方推特应用程序所示）？](https://stackoverflow.com/questions/8627146/how-could-i-add-a-shadow-to-a-grouped-uitableview-as-seen-in-the-official-twitt)

但任何解决方案都适合我（我不想使用图像......）。

我尝试子类化 UITableView，实现 layoutSubviews 并为每个部分添加一个 uiview（带有圆角和阴影的空白），如问题 1。问题是添加的视图的阴影出现剪辑（仅在顶部和底部可见）部分），即使单元格是空的。

在我的第二次尝试中，我尝试对单元格进行子类化，添加一个属性来指示单元格何时“单独”、顶部、中间或底部，并向单元格添加适当的自定义 backgroundView。我通过它的图层将阴影添加到这个自定义背景视图。这个解决方案的问题是阴影重叠（边），我需要剪辑顶部单元格底部的阴影，底部单元格的顶部等等......

有什么解决办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:24:14.487

我找到了一个解决这个问题的完美项目：

[https://github.com/vicpenap/PrettyKit](https://github.com/vicpenap/PrettyKit)

# java - (object) 在为 hashmap 赋值时的用法

> ID：11194274
> 
> 赞同：0
> 
> 时间：2012-06-25T17:30:07.643
> 
> 标签：java

我看到一段使用Hashmap的java代码如下：

```
Map indata = new HashMap(12);
//load data
indata.put(“checking”, ((object) new  Double(1.0)));
indata.put(“PURPOSE”, ((object)"2”)); 
```

让我困惑的是“put”方法的两种用法，其中我们有`((object) new Double(1.0))` 和`(object)"2"`。在这里起什么`(object)`作用？`((object) new Double(1.0))` 和之间有什么区别`(object)"2"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:37:35.037

这是一个强制转换`Object`（注意它在 Java 中是大写的）。

这里似乎毫无意义，因为代码在没有强制转换的情况下编译得很好（因为非泛型版本`Map`期望`Object`作为键和值的类型，所以传递 a`String`或 a`Double`不需要显式强制转换）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:31:42.993

问：（对象）在这里起什么作用？ 答：它只是
铸造`String`和`Double``Object.`

Q: ((object) new Double(1.0)) 和 (object)"2" 有什么区别吗？
答：没有

```
((object) new Double(1.0))  - casting Double into Object
((object)"2”) -  casting String into Object 
```

**编辑：**
刚刚从评论中意识到它应该是`Object`而不是`object`

# php - 如何使用 cron 运行 php 脚本

> ID：11194284
> 
> 赞同：-1
> 
> 时间：2012-06-25T17:31:07.157
> 
> 标签：php, cron

我有一个从另一个网站获取链接的 php 脚本。我使用 wamp 服务器将这些链接存储在我的本地系统数据库中，但我的互联网速度太慢了。每 10 条记录后，我必须在浏览器中刷新 php 脚本。

那么，我可以在我的虚拟主机服务器上连续运行这个 PHP 脚本 24 小时，并将所有链接存储与我的本地系统相同。如果可能的话，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:45:28.337

在`crontab -e`/a 终端或通过服务器上的 PuTTy 输入，输入类似于下面代码的内容，其中 m 是分钟，h 是小时，dom 是一个月中的几天，等等等等

```
# m   h       dom     mon     dow     command
*/5   *       *       *       *       php -f /directory/to/file/filename.php 
```

这将每五分钟运行一次。

如果你想连续运行它（它实际上并没有这样做），它需要分段运行，这样的事情会起作用，每天从 9.30-17.30 运行它。

```
30-59/5 9 * * * script.sh
*/5 10-16 * * * script.sh
0-30/5 17 * * * script.sh 
```

这是cron的基础知识，我建议你阅读它们。

[Cron 和 Crontab](http://www.pantz.org/software/cron/croninfo.html)

# javascript - 使用 Node.js 将文件系统中的目录结构转换为 JSON

> ID：11194287
> 
> 赞同：72
> 
> 时间：2012-06-25T17:31:15.457
> 
> 标签：javascript, node.js, d3.js, filesystems

我有这样的文件结构：

```
root
|_ fruits
|___ apple
|______images
|________ apple001.jpg
|________ apple002.jpg
|_ animals
|___ cat
|______images
|________ cat001.jpg
|________ cat002.jpg 
```

我想使用 Javascript 和 Node.js 监听这个根目录和所有子目录，并创建一个反映这个目录结构的 JSON，每个节点都包含类型、名称、路径和子节点：

```
data = [
  {
    type: "folder",
    name: "animals",
    path: "/animals",
    children: [
      {
        type: "folder",
        name: "cat",
        path: "/animals/cat",
        children: [
          {
            type: "folder",
            name: "images",
            path: "/animals/cat/images",
            children: [
              {
                type: "file",
                name: "cat001.jpg",
                path: "/animals/cat/images/cat001.jpg"
              }, {
                type: "file",
                name: "cat001.jpg",
                path: "/animals/cat/images/cat002.jpg"
              }
            ]
          }
        ]
      }
    ]
  }
]; 
```

这是一个咖啡脚本 JSON：

```
data = 
[
  type: "folder"
  name: "animals"
  path: "/animals"
  children  :
    [
      type: "folder"
      name: "cat"
      path: "/animals/cat"
      children:
        [
          type: "folder"
          name: "images"
          path: "/animals/cat/images"
          children: 
            [
              type: "file"
              name: "cat001.jpg"
              path: "/animals/cat/images/cat001.jpg"
            , 
              type: "file"
              name: "cat001.jpg"
              path: "/animals/cat/images/cat002.jpg"
            ]
        ]
    ]
] 
```

如何在 django 视图中获取这种 json 数据格式？（python）

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-25T18:14:00.117

这是一个草图。错误处理留给读者练习。

```
var fs = require('fs'),
    path = require('path')

function dirTree(filename) {
    var stats = fs.lstatSync(filename),
        info = {
            path: filename,
            name: path.basename(filename)
        };

    if (stats.isDirectory()) {
        info.type = "folder";
        info.children = fs.readdirSync(filename).map(function(child) {
            return dirTree(filename + '/' + child);
        });
    } else {
        // Assuming it's a file. In real life it could be a symlink or
        // something else!
        info.type = "file";
    }

    return info;
}

if (module.parent == undefined) {
    // node dirTree.js ~/foo/bar
    var util = require('util');
    console.log(util.inspect(dirTree(process.argv[2]), false, null));
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-10-04T01:43:48.500

有一个 NPM 模块

[https://www.npmjs.com/package/directory-tree](https://www.npmjs.com/package/directory-tree)

创建一个表示目录树的对象。

从：

```
photos
├── summer
│   └── june
│       └── windsurf.jpg
└── winter
    └── january
        ├── ski.png
        └── snowboard.jpg 
```

至：

```
{
  "path": "",
  "name": "photos",
  "type": "directory",
  "children": [
    {
      "path": "summer",
      "name": "summer",
      "type": "directory",
      "children": [
        {
          "path": "summer/june",
          "name": "june",
          "type": "directory",
          "children": [
            {
              "path": "summer/june/windsurf.jpg",
              "name": "windsurf.jpg",
              "type": "file"
            }
          ]
        }
      ]
    },
    {
      "path": "winter",
      "name": "winter",
      "type": "directory",
      "children": [
        {
          "path": "winter/january",
          "name": "january",
          "type": "directory",
          "children": [
            {
              "path": "winter/january/ski.png",
              "name": "ski.png",
              "type": "file"
            },
            {
              "path": "winter/january/snowboard.jpg",
              "name": "snowboard.jpg",
              "type": "file"
            }
          ]
        }
      ]
    }
  ]
} 
```

## 用法

```
var tree = directoryTree('/some/path'); 
```

您还可以按扩展名过滤：

```
var filteredTree = directoryTree('/some/path', ['.jpg', '.png']); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-08-05T11:23:18.503

接受的答案有效，但它是*同步*的，会严重影响您的性能，尤其是对于大型目录树。
我强烈建议您使用以下**异步**解决方案，它更快且无阻塞。
基于[此处](https://stackoverflow.com/a/5827895/3017785)的并行解决方案。

```
var fs = require('fs');
var path = require('path');

var diretoryTreeToObj = function(dir, done) {
    var results = [];

    fs.readdir(dir, function(err, list) {
        if (err)
            return done(err);

        var pending = list.length;

        if (!pending)
            return done(null, {name: path.basename(dir), type: 'folder', children: results});

        list.forEach(function(file) {
            file = path.resolve(dir, file);
            fs.stat(file, function(err, stat) {
                if (stat && stat.isDirectory()) {
                    diretoryTreeToObj(file, function(err, res) {
                        results.push({
                            name: path.basename(file),
                            type: 'folder',
                            children: res
                        });
                        if (!--pending)
                            done(null, results);
                    });
                }
                else {
                    results.push({
                        type: 'file',
                        name: path.basename(file)
                    });
                    if (!--pending)
                        done(null, results);
                }
            });
        });
    });
}; 
```

示例用法：

```
var dirTree = ('/path/to/dir');

diretoryTreeToObj(dirTree, function(err, res){
    if(err)
        console.error(err);

    console.log(JSON.stringify(res));
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-21T23:05:44.667

我的 CS 示例（带快递）基于 Miika 的解决方案：

```
fs = require 'fs' #file system module
path = require 'path' # file path module

# returns json tree of directory structure
tree = (root) ->
    # clean trailing '/'(s)
    root = root.replace /\/+$/ , ""
    # extract tree ring if root exists
    if fs.existsSync root
        ring = fs.lstatSync root
    else
        return 'error: root does not exist'
    # type agnostic info
    info = 
        path: root
        name: path.basename(root)
    # dir   
    if ring.isDirectory()
        info.type = 'folder'
        # execute for each child and call tree recursively
        info.children = fs.readdirSync(root) .map (child) ->
            tree root + '/' + child
    # file
    else if ring.isFile()
        info.type = 'file'
    # link
    else if ring.isSymbolicLink()
        info.type = 'link'
    # other
    else
        info.type = 'unknown'
    # return tree 
    info

# error handling
handle = (e) ->
    return 'uncaught exception...'

exports.index = (req, res) ->
    try
        res.send tree './test/'
    catch e
        res.send handle e 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-09T07:53:13.910

这是一个异步解决方案：

```
 function list(dir) {
   const walk = entry => {
     return new Promise((resolve, reject) => {
       fs.exists(entry, exists => {
         if (!exists) {
           return resolve({});
         }
         return resolve(new Promise((resolve, reject) => {
           fs.lstat(entry, (err, stats) => {
             if (err) {
               return reject(err);
             }
             if (!stats.isDirectory()) {
               return resolve({
                 // path: entry,
                 // type: 'file',
                 name: path.basename(entry),
                 time: stats.mtime,
                 size: stats.size
               });
             }
             resolve(new Promise((resolve, reject) => {
               fs.readdir(entry, (err, files) => {
                 if (err) {
                   return reject(err);
                 }
                 Promise.all(files.map(child => walk(path.join(entry, child)))).then(children => {
                   resolve({
                     // path: entry,
                     // type: 'folder',
                     name: path.basename(entry),
                     time: stats.mtime,
                     entries: children
                   });
                 }).catch(err => {
                   reject(err);
                 });
               });
             }));
           });
         }));
       });
     });
   }

   return walk(dir);
 } 
```

请注意，当目录不存在时，将返回空结果而不是引发错误。

这是一个示例结果：

```
{
    "name": "root",
    "time": "2017-05-09T07:46:26.740Z",
    "entries": [
        {
            "name": "book.txt",
            "time": "2017-05-09T07:24:18.673Z",
            "size": 0
        },
        {
            "name": "cheatsheet-a5.pdf",
            "time": "2017-05-09T07:24:18.674Z",
            "size": 262380
        },
        {
            "name": "docs",
            "time": "2017-05-09T07:47:39.507Z",
            "entries": [
                {
                    "name": "README.md",
                    "time": "2017-05-08T10:02:09.651Z",
                    "size": 19229
                }
            ]
        }
    ]
} 
```

这将是：

```
root
|__ book.txt
|__ cheatsheet-a5.pdf
|__ docs
      |__ README.md 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-26T13:42:50.390

您可以使用此项目中的代码，但应根据需要调整代码：

[https://github.com/NHQ/Node-FileUtils/blob/master/src/file-utils.js#L511-L593](https://github.com/NHQ/Node-FileUtils/blob/master/src/file-utils.js#L511-L593)

从：

```
a
|- b
|  |- c
|  |  |- c1.txt
|  |
|  |- b1.txt
|  |- b2.txt
|
|- d
|  |
|
|- a1.txt
|- a2.txt 
```

至：

```
{
    b: {
        "b1.txt": "a/b/b1.txt",
        "b2.txt": "a/b/b2.txt",
        c: {
            "c1.txt": "a/b/c/c1.txt"
        }
    },
    d: {},
    "a2.txt": "a/a2.txt",
    "a1.txt": "a/a1.txt"
} 
```

正在做：

```
new File ("a").list (function (error, files){
    //files...
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-21T16:26:06.033

加上[Sean C.](https://stackoverflow.com/users/1971943/sean-c)的回答。

我非常喜欢它，但是使用 async await 使它更具可读性。

```
import fs from 'fs';
import {
  lstat,
  readdir,
  access,
} from 'fs/promises';
import path from 'path';

async function existsAsync(file) {
  try {
    await access(file, fs.constants.F_OK);
    return true;
  } catch (e) {
    return false;
  }
}

async function listFileTreeRecursive(dir) {
  const recurse = async (entry) => {
    if (!(await existsAsync(entry))) {
      return {};
    }

    const stats = await lstat(entry);
    if (!stats.isDirectory()) {
      return {
        name: path.basename(entry),
        time: stats.mtime,
        size: stats.size,
      };
    }

    const files = await readdir(entry);
    const childEntries = await Promise.all(
      files.map((child) => recurse(path.join(entry, child))),
    );
    return {
      name: path.basename(entry),
      time: stats.mtime,
      entries: childEntries,
    };
  };

  return recurse(dir);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-02T12:34:07.223

在这种情况下，我使用了“walk”lib，它获取您的根路径并递归遍历文件和目录，并发出目录/文件事件，其中包含您从节点需要的所有信息，请查看该实现 -->

```
const walk = require('walk');

class FsTree {

    constructor(){

    }

    /**
     * @param rootPath
     * @returns {Promise}
     */
    getFileSysTree(rootPath){
        return new Promise((resolve, reject)=>{

            const root = rootPath || __dirname; // if there's no rootPath use exec location
            const tree = [];
            const nodesMap = {};
            const walker  = walk.walk(root, { followLinks: false}); // filter doesn't work well

            function addNode(node, path){
                if ( node.name.indexOf('.') === 0 || path.indexOf('/.') >= 0){ // ignore hidden files
                    return;
                }
                var relativePath = path.replace(root,'');

                node.path = relativePath + '/' + node.name;
                nodesMap[node.path] = node;

                if ( relativePath.length === 0 ){ //is root
                    tree.push(node);
                    return;
                }
                node.parentPath = node.path.substring(0,node.path.lastIndexOf('/'));
                const parent = nodesMap[node.parentPath];
                parent.children.push(node);

            }

            walker.on('directory', (path, stats, next)=>{
                addNode({ name: stats.name, type:'dir',children:[]}, path);
                next();
            });

            walker.on('file', (path,stats,next)=>{
                addNode({name:stats.name, type:'file'},path);
                next();
            });

            walker.on('end',()=>{
                resolve(tree);
            });

            walker.on('errors',  (root, nodeStatsArray, next) => {
                reject(nodeStatsArray);
                next();
            });
        });

    }
}

const fsTreeFetcher = new FsTree();

fsTreeFetcher.getFileSysTree(__dirname).then((result)=>{
    console.log(result);
}); 
```

# entity-framework - 库存系统的实体框架事务

> ID：11194288
> 
> 赞同：1
> 
> 时间：2012-06-25T17:31:32.103
> 
> 标签：entity-framework

我正在尝试了解实体框架的工作原理。我了解 EF SaveChanges 基本上是围绕事务更新的包装器。我还了解到，如有必要，您可以将两个上下文包装在 TransactionScope 中。

我正在使用代码优先方法。

我不明白的是我将如何进行更新

```
UPDATE Inventory SET Available = Available - 1 WHERE Available > 0 
```

换句话说 - 我如何确保在进行更新之前至少有 X 个可用库存？

我想我可以编写代码来查看产品的库存并验证是否有足够的库存来完成购买：

```
if (Product.Inventory - quantityToPurchase < 0) throw new Exception(..) 
```

但是，如果两个客户试图同时购买，并且从数据库中为每个客户获取的对象声称有 2 件物品在库存中，那该怎么办？我上面的逻辑不会明白这一点。

如何确保 SaveChanges() 方法仅在 IF 和 ONLY IF`(Available - quantity)`大于 0 时提交对对象的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:45:45.717

当您通过覆盖 SaveChanges 方法保存实体时，您需要执行此检查：

```
public override int SaveChanges()
{
    var entities = ChangeTracker.Entries()
                                .Where(e => e.State == EntityState.Added || 
                                            e.State == EntityState.Modified)
                                .Select(e => e.Entity())
                                .OfType<YourEntityType();

    foreach (var entity in entities)
    {
        // Run business rule
    }

    return base.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T03:26:40.757

实体框架默认使用乐观并发。我在原始帖子中描述的内容称为 EF 中的悲观并发。有两个属性可用于实现此目的。

首先是`Timestamp`将`rowversion`在表中创建一列。EF 将自动检测到这一点，并始终`where`在更新中添加一个子句，将实体中的属性值与数据库中列的值进行比较。`update`只有当两者匹配时，该语句才会成功。该`rowversion`列由服务器自动递增。这可确保您始终更新内存中（在 POCO 中）中的相同数据。如果其他人在您获取该行之后并且在您更新它之前更改了该行，则更新将失败。

其次是`ConcurrencyCheck`与`Timestamp`. 它将导致 POCO 属性的值包含在`where`子句中。最大的不同是它不会像遗嘱那样更新此列`rowversion`。

# mysql - 如何将全文分数与其他值混合？

> ID：11194289
> 
> 赞同：1
> 
> 时间：2012-06-25T17:31:35.123
> 
> 标签：mysql, full-text-search

我想将“全文的浮点分数”与我的结果集的其他值混合

例如，我想为拥有更多用户投票的行提供相关性...我不想按用户投票排序，但我想为拥有大量投票的页面提供“一些提升”、更多可见性。

这对开发人员来说是主观的，是的，但问题是“全文分数”没有给出参考点（因为单个值受整个结果集的影响）

我该如何管理？

谢谢...对不起我的英语，我希望已经清楚了！

设想：

```
编号 | 关键词 | 用户投票
1 | 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊 10
2 | aaaa bbbb cccc | 20
3 | 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊 0
4 | aaaa bbbb cccc | 1000 --- 这个可以提高能见度
5 | 啊啊啊 10

选择
        *,
        (
            匹配（关键字）反对（'aaaa'）
            +
            /* 这里是用户投票计算 */
        )
        作为分数
从
        我的表
订购方式
        分数 DESC

```

# google-apps-script - 谷歌应用脚 本打印按钮

> ID：11194291
> 
> 赞同：7
> 
> 时间：2012-06-25T17:31:37.610
> 
> 标签：google-apps-script

我已经进行了大约一个月的调查（这是我的第一个谷歌脚本项目，我还应该提到它是一个基于网络的应用程序），我只剩下几件事要做（创建一个打印按钮是其中之一）。在我继续之前，我会给你一些关于调查的信息。有6页（每页对应一个按钮-我使用按钮而不是菜单，因为我最近发现了它......）一次只能查看一页。

问题是我需要创建打印按钮......它将打印所有页面。

我一直在寻找大约 3-4 天的谷歌脚本示例，但我找不到任何东西......如果我说得不够清楚，请告诉我，我会尽力提供更多细节......

戴夫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-11T11:30:13.343

```
 function printPdf() {
    SpreadsheetApp.flush();
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var sheet = ss.getActiveSheet();

    var gid = sheet.getSheetId();

    var pdfOpts = '&size=A4&fzr=false&portrait=false&fitw=true&gridlines=false&printtitle=false&shee        tnames=false&pagenum=UNDEFINED&attachment=false&gid='+gid;

    var row2 = 29;
    var printRange = '&c1=0' + '&r1=0' + '&c2=7' + '&r2='+row2; // B2:APn
    var url = ss.getUrl().replace(/edit$/, '') + 'export?format=pdf' + pdfOpts + printRange;

    var app = UiApp.createApplication().setWidth(200).setHeight(50);
    app.setTitle('Print this sheet');

    var link = app.createAnchor('Download PDF', url).setTarget('_new');

    app.add(link);

    ss.show(app);
     } 
```

这是一个对我有用的代码。它是从另一个线程修改的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T22:37:20.030

我猜您知道 Google Apps 脚本应用程序无法从您的应用程序内部打印任何内容，因为它运行在 Google 服务器上而不是您的计算机上。电子表格和文档在它们自己的环境中集成了打印实用程序，但您使用 GAS 开发的 web 应用程序（和站点）没有这个环境。

您的“打印按钮”可能会创建一个您可以轻松打印的 pdf 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-11T13:36:02.587

您可以通过 Google Script 进行打印。Amit Agarwal 的这篇[文章](https://ctrlq.org/code/20061-google-cloud-print-with-apps-script)解释了如何：

关键是确保您的打印机设置了 Google Print。我有一台没有 wifi 功能的打印机，但连接到专门运行 Google 打印的过时 Mac。

# android - 为段落设置的Android TextView文本内容

> ID：11194298
> 
> 赞同：-1
> 
> 时间：2012-06-25T17:31:56.703
> 
> 标签：android

我想在 android 文本视图上设置一些内容。

像...

"

> 电脑是什么？计算机是可编程的机器。计算机的两个主要特征是：
> 
> 1.  **它以明确定义的方式响应一组特定的指令。**
> 2.  它可以执行*预先录制*的指令列表（程序）。

"

任何人都可以帮助我

坦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:37:59.260

试试这个：

```
 TextView tv = (TextView)findViewById(R.id.txtvew);
       tv.setText(Html.fromHtml("<p>What is a Computer? A computer is a programmable machine. The two principal characteristics of a computer are:</p>" +
            "1\. It responds to a specific set of instructions in a well-defined manner.<br/>" +
            "2\. It can execute a prerecorded list of instructions (a program).")); 
```

# c# - 使用 c# 将文件刻录到 CD

> ID：11194299
> 
> 赞同：5
> 
> 时间：2012-06-25T17:31:57.610
> 
> 标签：c#, windows-7, cd-burning

我正在编写一个程序，将图像下载到硬盘驱动器，然后我想在 cd 上刻录这些文件夹。我不想创建和刻录映像，我只想将所有这些文件夹和文件刻录到光盘上，就像它们在硬盘上一样。任何人都知道在 C# 中执行此操作的方法吗？

我正在使用 Windows 7 和 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T17:43:23.240

IMAPI2 - IMAPI API 的第 2 版 - 是 Windows 7 原生的，是首选接口。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366457(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366457(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T17:35:54.003

如果不调用 Windows 的 API 调用，就无法做到这一点。它似乎是通过 COM 调用完成的（用于 XP的[ICDBurn](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776152%28v=vs.85%29.aspx) ，用于 Windows Vista 或更新版本的[MAPI ）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366450%28v=vs.85%29.aspx)[这是一个 SO Question](https://stackoverflow.com/questions/82993/windows-cd-burning-api)可以为您指明如何在 C++ 中执行此操作的正确方向。

如果您需要帮助在 C# 中进行 COM 调用，请随时就您遇到的问题提出一个新问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T17:39:20.607

从 Windows Vista 开始，您可以使用[IMAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366450%28v=vs.85%29.aspx) API。此 API 使您能够将图像刻录到 CD、DVD 和蓝光。

有关 Image Master API 的更多信息当然可以在 MSDN 上找到：

[http://msdn.microsoft.com/en-us/library/aa366450(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa366450(v=VS.85).aspx)

查看此 CodeProject 文章，其中详细讨论了它：

另一个可以提供帮助的第三方库是[SharpRecorder](http://code.google.com/p/sharprecorder/)。该代码托管在 Google 上。看看它是否符合您的要求。如果没有，您可以随时访问代码并查看其工作原理并从中学习。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T17:40:40.013

使用 C# 和 IMAP2 有几种方法可以做到这一点 这是[Code Project上的一个示例](http://www.codeproject.com/Articles/24544/Burning-and-Erasing-CD-DVD-Blu-ray-Media-with-C-an)

[这里](http://www.gangleri.net/2010/03/02/BurningFilesToCDDVDWithCAndWindowsXP.aspx)还有另一个使用c#的例子

注意：如果您在 7 上执行此操作，您将需要此[更新](http://support.microsoft.com/kb/932716)

# regex - 匹配任何不带引号的域完整 url？

> ID：11194303
> 
> 赞同：0
> 
> 时间：2012-06-25T17:32:09.777
> 
> 标签：regex

到目前为止，我有这样的表达：

```
http://[^\.]*\.mydomain\.com/((.*?")) 
```

哪个匹配...

```
http://www.mydomain.com/Images/favicon.ico" 
```

但我真的不想要最后一个小引号。谁能告诉我如何摆脱它？

更糟糕的是，当我将其放入 GREP 时，我收到一条消息，说“不允许嵌套重复”。任何人都可以为我提供一个匹配的正则表达式吗

```
http://www.mydomain.com.anything/goes/here/
http://mydomain.com.anything/goes/here/
/mydomain.com.anything/goes/here 
```

我真的在为这个苦苦挣扎.... :-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:39:25.193

```
http://[^\.]*\.mydomain\.com/(.*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:14:35.587

我假设您正在使用它从 HTML 中提取 url，并且您想要捕获所有内容，*但不包括*双引号。您可以为此使用[非捕获的肯定前瞻](http://www.regular-expressions.info/lookaround.html)断言：

```
http://[^\.]*\.mydomain\.com/.*?(?=") 
```

# python - 导入 WebKit 会导致应用程序在启动时失败。

> ID：11194306
> 
> 赞同：1
> 
> 时间：2012-06-25T17:32:22.440
> 
> 标签：python, webkit, gtk, pygtk, canonical-quickly

我正在使用 Quickly 制作一个应用程序，并且我想在我的窗口中添加一个 Webkit 小部件。我想“应该很容易”，但和往常一样，它不可能那么容易。

从我添加的那一刻起`import webkit`，应用程序无法启动。

```
robin@RobinJ:~/Ubuntu One/Python/gtkreddit$ quickly run
/usr/lib/python2.7/dist-packages/gobject/constants.py:24: Warning: g_boxed_type_register_static: assertion `g_type_from_name (name) == 0' failed
  import gobject._gobject
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: specified class size for type `PyGtkGenericCellRenderer' is smaller than the parent type's `GtkCellRenderer' class size
  from gtk import _gtk
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: g_type_get_qdata: assertion `node != NULL' failed
  from gtk import _gtk 
```

完整的源代码可以在[这里](http://bazaar.launchpad.net/~robinj/gtkreddit/trunk/files)找到。我正在谈论的特定文件是[这个](http://bazaar.launchpad.net/~robinj/gtkreddit/trunk/view/head:/gtkreddit/GtkredditWindow.py).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T17:55:04.697

看来您正在混合绑定。如果您已经在使用 GObject Introspection，请继续使用它。尝试：

```
from gi.repository import WebKit 
```

或使用 GTK (pygtk) 的旧绑定。

# javascript - 如何在 javascript 或 php 中找出运营商的名称

> ID：11194309
> 
> 赞同：2
> 
> 时间：2012-06-25T17:32:29.950
> 
> 标签：javascript, php, carrier

我需要为访问我的网页的每个移动设备创建一个唯一的 ID。我已经获得了用户的屏幕分辨率、浏览器、操作系统和位置，但我还想知道运营商的名称以使其更准确。

到目前为止，我有：

```
<script type="text/javascript" language="Javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" language="Javascript" src="http://api.easyjquery.com/easyjquery.js"></script>

<?PHP

$browsers = array ();
$osS = array ();
$tb_query=mysql_query("SELECT * FROM cst_unique_device_index"); 
while ($rw_query=mysql_fetch_array($tb_query)){
  extract ($rw_query);
  $variable = strtolower($variable); 

  if ($type == 2) $browsers[] = $variable;
}

$osS = array (
    "android",
    "bada",
    "blackberry",
    "brew",
    "ios",
    "lg",
    "linux",
    "motorola",
    "nintendo",
    "palm",
    "playstation",
    "samsung",
    "series",
    "sony",
    "symbianos",
    "unknown",
    "webos",
    "wince",
    "windows");

  $agent = strtolower($_SERVER['HTTP_USER_AGENT']);
  foreach($browsers as $browser)
    {
    if (preg_match("#($browser)[/ ]?([0-9.]*)#", $agent, $matchBrowser))
      {
      $user_browser = $matchBrowser[1] ;
      $user_browser_version = $matchBrowser[2] ;
      break ;
      }
    }

  foreach($osS as $os)
    {
    if (preg_match("#($os)[/ ]?([a-z0-9.]*)#", $agent, $matchOS))
      {
      $user_os = $matchOS[1];
      $user_os_version = $matchBrowser[2] ;
      }
    }

echo $agent .'<br />'    ;
echo '
    <table>
      <tr>
        <th>Screen: </th>
        <td id="user_screen"></td>
        <td></td>
      </tr>
      <tr>
        <th>Browser: </th>
        <td>' . $user_browser . '</td>
        <td></td>
      </tr>
      <tr>
        <th>OS: </th>
        <td>' . $user_os . '</td>
        <td></td>
      </tr>
      <tr>
        <th>State: </th>
        <td id="user_state"></td>
        <td></td>
     </tr>
     <tr>
        <th>Carrier: </th>
        <td></td>
        <td></td>
      </tr>

    ';
?>

<script type="text/javascript" language="Javascript">
var screenWith = screen.width      
var screenHeight = screen.height

document.getElementById('user_screen').innerHTML = screenWith+"x"+screenHeight;

    // 1\. Your Data Here
    function my_callback(json) {
        alert("IP :" + json.IP + " nCOUNTRY: " + json.COUNTRY);
    }

    function my_callback2(json) {
        // more information at http://api.easyjquery.com/test/demo-ip.php
        //alert("IP :" + json.IP + " nCOUNTRY: " + json.COUNTRY + " City: " +         json.cityName + " regionName: " + json.regionName);
        document.getElementById('user_state').innerHTML = json.cityName;
    }

    // 2\. Setup Callback Function
   // EasyjQuery_Get_IP("my_callback"); // fastest version
    EasyjQuery_Get_IP("my_callback2","full"); // full version

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:59:44.807

如果你能直接得到它，那将是一个安全问题。浏览器在沙箱中运行，应该无法获取该数据。

您可以记录 IP 地址并查找每个运营商的范围。我认为这将是一个聪明的猜测。

您可以从例如[http://whois.arin.net/ui获取它们](http://whois.arin.net/ui)

```
AT&T
32.0.0.0 - 32.255.255.255 
166.128.0.0 - 166.255.255.255 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T07:16:44.453

您可以从 IP 地址获取用户运营商名称。

```
<?php
$ip = $_REQUEST['REMOTE_ADDR']; // the IP address to query
$query = @unserialize(file_get_contents('http://ip-
api.com/php/'.$ip));
if($query && $query['status'] == 'success') {
  echo 'Hello visitor from '.$query['country'].', '.$query['city'].'!';
} else {
  echo 'Unable to get location';
}
?> 
```

这对我有用，我希望也对你有用。:)

# ruby-on-rails - 我正在尝试从 ruby on rails app 发送电子邮件

> ID：11194312
> 
> 赞同：1
> 
> 时间：2012-06-25T17:32:51.457
> 
> 标签：ruby-on-rails

我在死胡同！我正在尝试制作一个应用程序来接收 hotmail 上的电子邮件！我创建了一个方法，但我收到一个错误并且没有收到电子邮件..

在我的方法中：

```
class Recivemail < ActiveRecord::Base
  attr_accessible :content, :from, :subject

 def sendmail(content,from,subject)
    subject = 'subject'
    recipients = "linkinpark_8884@hotmail.com"
    from = 'from'
    sent_on = Time.now
  end 
end 
```

在配置>环境>development.rb

```
config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings ={
    :enable_starttls_auto => true,
    :address => 'smtp.hotmail.com',
    :port => 587,
    :authentication => :plain,
    :domain => 'localhost:3000',
    :user_name => 'linkinpark_8884@hotmail.com',
    :password => 'mypass'

  } 
```

在视图>接收邮件>显示

```
<%=@recivemail.sendmail(@recivemail.from,@recivemail.subject,@recivemail.content)%> 
```

一切似乎都正常，除了我没有收到任何电子邮件任何想法？同样在路径 C:/Sites/recivemail 路径上的 cmd（我在 Windows 中）我已经运行 gem install activemailer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:58:16.790

我在您的 sendmail 方法中看不到任何实际发送邮件的内容。您所做的只是设置 4 个实例变量。我不认为你真的试图发送邮件。我也看不到您在方法中将内容参数设置为变量的位置。

我也认为你的邮件对象应该来自 ActionMailer::Base

```
class ReceiveMail < ActionMailer::Base
  default :return_path => 'system@example.com'

  def sendmail(content,from,subject)
     mail(:to => "linkinpark_8884@hotmail.com",
         :bcc => ["bcc@example.com", "Order Watcher <watcher@example.com>"],
             :subject => subject,
             :content => content) # use whatever mail headers are appropriate
  end

end 
```

然后在您的控制器中，而不是您的模型中，调用`.deliver`您在控制器操作而不是活动记录模型中创建的 ActionMailer::Base 对象模型。

控制器可能看起来像这样

```
class MailController < ApplicationController
def mails
  ReceiveMail.sendmails(params[])
   @message = ReceiveMail(params[content], params[subject], params[from]) #pass params if form POST
   @message.deliver
end

end 
```

您可能还必须定义这个：

```
ActionMailer::Base.template_root = "mailer/templates"
  # mailer will look for rhtml templates in that path
  # example: "mailer/templates/my_mailer/signup_mail.rhtml" 
```

在 config/environments/development.rb/production.rb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:17:32.967

[http://www.coupa.org/2006/12/12/receiving-emails-with-actionmailer-on-windows/](http://www.coupa.org/2006/12/12/receiving-emails-with-actionmailer-on-windows/)

# ruby - 虾pdf和分页符

> ID：11194314
> 
> 赞同：3
> 
> 时间：2012-06-25T17:32:53.103
> 
> 标签：ruby, pdf-generation, prawn

我正在尝试使用 Prawn 0.12.0 生成 pdf。

我正在呈现的内容非常动态，并且通常跨越多个页面。

我遇到的问题是，当它自动启动新页面时，当前边界框“中断”。在新页面上呈现的文本没有正确的边界框。如果我使用`stroke_bounds`，我可以在页面的最底部看到底部笔划。我已经在各种论坛上阅读过这个问题，但似乎无法弄清楚实际发生了什么。

这是循环出内容的特定代码：

```
items.each do |item|
  group do
    title_text = [{ text: item.title, styles: [@heading_style], size: 11}]
    formatted_text title_text
    text(item.description, size: 9)
    stroke { line(bounds.bottom_left, bounds.bottom_right); }
  end
end 
```

如您所见，我想在每个项目下方画一条线，这就是为什么我需要当前边界框正确的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-12T22:28:09.020

根据大虾文档： http: [//prawnpdf.org/manual.pdf](http://prawnpdf.org/manual.pdf)

边界框绑定到页边距：

```
A bounding box is a structure which provides boundaries for inserting content. A bounding box
also has the property of relocating the origin to its relative bottom-left corner. However, be aware
that the location specified when creating a bounding box is its top-left corner, not bottom-left
(hence the [100, 300] coordinates below). 
```

对于将优雅地跨页面流动的边界类型，跨度是更好的选择：

```
Span is a different kind of bounding box as it lets the text flow
gracefully onto the next page. It doesn't matter if the text started
on the middle of the previous page, when it flows to the next page
it will start at the beginning. 
```

跨度应该能够包含所需的线条笔划。希望这可以帮助。

# java - 应用程序启动时崩溃

> ID：11194316
> 
> 赞同：0
> 
> 时间：2012-06-25T17:33:06.207
> 
> 标签：java, android, eclipse

我想对 String 使用“开关”，它仅在编译器级别 1.7 中受支持，因此 Eclipse 让我升级它，然后修复我的项目属性。从那时起，我的应用程序启动，甚至在调用 OnCreate 之前，它就崩溃了。我确定问题出在编译器级别，但我将其恢复为默认值，但仍然无法正常工作......我该怎么办？

谢谢！

堆栈跟踪：

```
06-25 17:39:09.039: D/AndroidRuntime(265): Shutting down VM
06-25 17:39:09.049: W/dalvikvm(265): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-25 17:39:09.080: E/AndroidRuntime(265): FATAL EXCEPTION: main
06-25 17:39:09.080: E/AndroidRuntime(265): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.ronEven.iCards/com.ronEven.iCards.Main}: java.lang.ClassNotFoundException: com.ronEven.iCards.Main in loader dalvik.system.PathClassLoader[/data/app/com.ronEven.iCards-1.apk]
06-25 17:39:09.080: E/AndroidRuntime(265):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
06-25 17:39:09.080: E/AndroidRuntime(265):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-25 17:39:09.080: E/AndroidRuntime(265):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-25 17:39:09.080: E/AndroidRuntime(265):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-25 17:39:09.080: E/AndroidRuntime(265):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-25 17:39:09.080: E/AndroidRuntime(265):  at android.os.Looper.loop(Looper.java:123)
06-25 17:39:09.080: E/AndroidRuntime(265):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-25 17:39:09.080: E/AndroidRuntime(265):  at java.lang.reflect.Method.invokeNative(Native Method)
06-25 17:39:09.080: E/AndroidRuntime(265):  at java.lang.reflect.Method.invoke(Method.java:521)
06-25 17:39:09.080: E/AndroidRuntime(265):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-25 17:39:09.080: E/AndroidRuntime(265):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-25 17:39:09.080: E/AndroidRuntime(265):  at dalvik.system.NativeStart.main(Native Method)
06-25 17:39:09.080: E/AndroidRuntime(265): Caused by: java.lang.ClassNotFoundException: com.ronEven.iCards.Main in loader dalvik.system.PathClassLoader[/data/app/com.ronEven.iCards-1.apk]
06-25 17:39:09.080: E/AndroidRuntime(265):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
06-25 17:39:09.080: E/AndroidRuntime(265):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
06-25 17:39:09.080: E/AndroidRuntime(265):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
06-25 17:39:09.080: E/AndroidRuntime(265):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
06-25 17:39:09.080: E/AndroidRuntime(265):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
06-25 17:39:09.080: E/AndroidRuntime(265):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:37:47.730

您只能将 Java 1.6 与 Android 一起使用。1.6 中的 switch 语句不支持字符串，虽然很烦人，但它就是这样。

至于“恢复”，您可以完成修复项目的步骤，但创建一个新项目并重新开始会更容易。当您对 Eclipse 更加熟悉时，我的猜测是您的构建路径设置是半开的，这就是您的挂断。Lint 可能会向您指出问题所在，但这似乎是与 Lint 的一次抛硬币。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:41:07.037

请参阅：[Android 中的 Java 7 语言功能](https://stackoverflow.com/questions/7153989/java-7-language-features-with-android)

基本上，Java 1.7 不能真正与 Android 一起使用。您可以使用 1.7 JDK，但您将被迫使用 1.6。

简单来说，坚持1.6。

# jquery - 从列表中删除按钮

> ID：11194318
> 
> 赞同：0
> 
> 时间：2012-06-25T17:33:12.813
> 
> 标签：jquery, html, jquery-mobile

我正在尝试从列表中删除一个按钮，但由于某种原因，该功能似乎无法正常工作。这似乎是选择器的某种类型的问题，因为如果我将“id”选择器用于“ul”，它就可以正常工作。但是，当我将其更改为列表中“li”的类选择器时，它不再起作用。有谁知道这可能是什么？

提前感谢您对此的帮助。

```
$('#courses').append('<li class="plan" data-icon="delete"><a>'+in_course+' Credit: '+in_hrs+' Grade: '+ in_gpa+'</a></li>').listview('refresh');

$(document).ready(function(){
    $('.plan').on('click',function() {
         $(this).parent().remove();
    }); }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:37:18.560

也许这对你有用：

```
$(document).ready(function(){
  $('.plan a').on('click',function() {
     $(this).parent().remove();
  });
}); 
```

或者

```
$(document).ready(function(){
  $('.plan').on('click',function() {
     $(this).remove();
  });
}); 
```

使用您的代码将删除#courses

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:36:23.197

尝试将其更改为：

```
$('#courses').on('click', '.plan', function () {
    // same code here
}); 
```

这是一个*委托事件处理程序*，与普通的*绑定事件处理程序不同*。委托通常用于具有未来元素的元素，例如您要附加的列表项。

此外，请确保将`.append()`调用链放在文档就绪处理程序中，以防万一您不这样做。

# sql - [ColumnName] 的 DB2 等效项

> ID：11194319
> 
> 赞同：6
> 
> 时间：2012-06-25T17:33:25.800
> 
> 标签：sql, db2

在 T-SQL 中，您可以使用方括号来解决某些 DB 开发人员使用保留关键字作为列名的事实，或者在列名中放置一个空格，如下所示：

```
Select [Date] as OrderDate From Orders 
```

或者

```
Select [Order Date] as OrderDate From Orders 
```

我一直无法找到 DB2 的等价物。

我们有一个很久以前设置的文件，其中包含我怀疑是非法字符 FOR sql 的字段。该文件在从 RPG 访问时工作正常，但在通过 SQL 访问时抛出错误。

[在 Google、Bing 和http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzahg/rzahgicca2.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzahg/rzahgicca2.htm)上花费了很多时间之后，我一直无法找到这方面的文档

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T17:36:34.293

尝试在名称周围使用双引号。

# objective-c - iOS 5 SDK - 自定义可重用视图/控件

> ID：11194328
> 
> 赞同：0
> 
> 时间：2012-06-25T17:34:02.780
> 
> 标签：objective-c, ios

我目前正在为 iOS 构建一些应用程序。这实际上是我的第二个应用程序。然而，坚持这一点。我需要设计自己的控件/视图。让我们说评分视图（星）。我不知道我该怎么做。如果它支持 Interface Builder，那就太好了，但这不是必需的。我需要做的只是控制/查看我可以在所有即将进行的项目中轻松使用并配置它们（在代码中很好，设置如星星图像、星星数量等）。如果这不是完全可能的，我对此很好，但是我真的需要最后一个要求，我需要控制/视图，我可以在一个视图中轻松地在一个项目中多次使用。问题是我需要一个控件连续多次，自动生成，就像你从右到左滚动到另一个的卡片，我不需要让那些消失在左边：

我希望你明白我想要达到的目标。

谢谢

**编辑：** 很好，我在问你如何设计我自己的控件/视图，我可以在具有不同值的项目中多次使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:50:41.207

如果它是您所追求的星级控制，请查看[http://cocoacontrols.com/](http://cocoacontrols.com/)。那里有一些您可以下载并放入您的项目中。

例如这个[http://cocoacontrols.com/platforms/mac-os-x/controls/edstarrating](http://cocoacontrols.com/platforms/mac-os-x/controls/edstarrating)

事实上，下载其中一个并查看它们是如何实现的。这应该让您了解如何自己制作。

注意：不能在 iPhone 的 Interface Builder 中直接使用自己的控件，这有点痛苦。

# android - 阻止传入的文本 (Android)

> ID：11194330
> 
> 赞同：6
> 
> 时间：2012-06-25T17:34:06.860
> 
> 标签：android, text, block, messages

我正在开发一个应用程序，希望能够阻止传入的文本消息（取决于用户设置），但我无法检测传入的消息。

你介意看看我的代码，让我知道我做错了什么吗？我已经查看了与此类似的其他问题，但我找不到任何详细的答案或足够的信息供我参考。

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;

  public class SmsReceiver extends BroadcastReceiver{

    public void onReceive(Context context, Intent intent) {
        if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")){
            Bundle bundle = intent.getExtras();
             if (bundle != null){
                abortBroadcast();
             }
        }
    }

  } 
```

这是我的清单

```
<receiver android:name=".listener.SmsReceiver">
 <intent-filter android:priority="100">
    <action android:name="android.provider.Telephony.SMS_RECEIVED" />
  </intent-filter>
</receiver> 
```

我一直在关注 MobiForge 上的教程（[http://mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)）以及这里的问题：

[如何在android中阻止传入的消息？](https://stackoverflow.com/questions/9378431/how-to-block-an-incoming-message-in-android)

[Android – 监听传入的 SMS 消息](https://stackoverflow.com/questions/7089313/android-listen-for-incoming-sms-messages)

谁能在这里指出我正确的方向？我会很感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T05:55:29.953

这是我用来阻止传入文本的方法。这就是我回答我的问题的方式。

* * *

短信接收器.java

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class BroadCastReceiver extends BroadcastReceiver 
{
/** Called when the activity is first created. */
private static final String ACTION = "android.provider.Telephony.SEND_SMS";
public static int MSG_TPE=0;
public void onReceive(Context context, Intent intent) 
{ 
    String MSG_TYPE=intent.getAction();
        if(MSG_TYPE.equals("android.provider.Telephony.SMS_RECEIVED"))
    {
//          Toast toast = Toast.makeText(context,"SMS Received: "+MSG_TYPE , Toast.LENGTH_LONG);
//          toast.show();

    Bundle bundle = intent.getExtras();
    Object messages[] = (Object[]) bundle.get("pdus");
    SmsMessage smsMessage[] = new SmsMessage[messages.length];
    for (int n = 0; n < messages.length; n++) 
    {
        smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
    }

    // show first message
    Toast toast = Toast.makeText(context,"BLOCKED Received SMS: " + smsMessage[0].getMessageBody(), Toast.LENGTH_LONG);
    toast.show();
        abortBroadcast();
        for(int i=0;i<8;i++)
        {
            System.out.println("Blocking SMS **********************");
        }

    }
    else if(MSG_TYPE.equals("android.provider.Telephony.SEND_SMS"))
    {
        Toast toast = Toast.makeText(context,"SMS SENT: "+MSG_TYPE , Toast.LENGTH_LONG);
        toast.show();
        abortBroadcast();
        for(int i=0;i<8;i++)
        {
            System.out.println("Blocking SMS **********************");
        }

    }
    else
    {

        Toast toast = Toast.makeText(context,"SIN ELSE: "+MSG_TYPE , Toast.LENGTH_LONG);
        toast.show();
        abortBroadcast();
        for(int i=0;i<8;i++)
        {
            System.out.println("Blocking SMS **********************");
        }

    }

}

} 
```

* * *

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="APP.PACKAGE.NAMEHERE"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<supports-screens 
android:largeScreens="true" 
android:normalScreens="true" 
android:smallScreens="true" 
android:resizeable="true" 
android:anyDensity="true" />

<uses-feature android:name="android.hardware.telephony" />
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.WRITE_SMS" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECEIVE_MMS" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".APPACTIVITYHERE"
        android:label="@string/app_name"
        android:configChanges="orientation|keyboardHidden" >

    <service android:name=".MyService" android:enabled="true"/>
     <receiver android:name="SmsReceiver">
      <intent-filter android:priority="2147483647">
       <action android:name="android.provider.Telephony.SMS_SENT"/>
      </intent-filter>
     </receiver>

     <service android:name=".MyServiceSentReceived" android:enabled="true"/>
      <receiver android:name="SmsReceiver">
        <intent-filter android:priority="2147483645">
         <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
        </intent-filter>
      </receiver>

</application> 
```

从清单中删除的主要内容是服务块、接收器块和权限。

# python - web2py中复合键的最佳实践

> ID：11194331
> 
> 赞同：1
> 
> 时间：2012-06-25T17:34:09.613
> 
> 标签：python, web2py, composite-key

[Anthony here 很好地回答](https://stackoverflow.com/a/9685846/1480618)了 web2py 中复合键的问题，但我正在寻找他在回答中包含的警告的答案。他的回答建议在表单验证中使用`primarykey`和`IS_NOT_IN_DB`，警告（和进一步的建议）是：

> ...以上不适用于向表中任意插入，但主要用于用户输入提交。
> 
> 您还可以使用 SQL 在表上设置多列唯一约束（您可以直接在数据库中或通过 web2py .executesql() 方法执行此操作）。但是，即使有这样的约束，您仍然希望在应用程序中进行一些输入验证，以避免来自数据库的错误。

我添加了`CREATE UNIQUE INDEX`字段。我的主要问题是，捕捉这些错误引发的异常的最佳方法是什么？是否有一个（或几个）地方可以捕获当我尝试在`INSERT`用户表单之外记录（使用重复键）时数据库层将抛出的异常（这将绕过`IS_NOT_IN_DB`检查/技术） ? 还是我必须确保团队知道当他们在此表上执行任何 INSERT 时，他们必须准备好捕获该异常？或者， ... ？另外，如果我有两个用户试图插入这样的重复项，是否有一种简单的方法`SQLFORM`可以让我捕捉到将被抛出的异常？（抱歉所有新手问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:54:44.823

> 当我尝试插入记录（使用重复键）时，是否有一个（或几个）地方可以捕获 db 层将抛出的异常？

我不这么认为，但是您可以编写一个自定义函数来将此类插入包装在 try...except 中（或以其他方式检查重复键）。

> 另外，如果我有两个用户试图插入这样的重复项，SQLFORM 中是否有一种简单的方法可以让我捕获将被抛出的异常？

使用 SQLFORM 时，验证器应捕获重复提交尝试并在表单上返回错误（对于第二个用户）。

# elasticsearch - 更新弹性搜索中不存在的文档

> ID：11194332
> 
> 赞同：2
> 
> 时间：2012-06-25T17:34:11.137
> 
> 标签：elasticsearch

尝试更新elasticsearch中不存在的文档时，是否可以创建一个新文档而不是出错？我知道我可以先检查，但我很想为每个文档保存一个额外的调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:50:38.163

Kimchy 在最新版本 0.19.5 中实现了 upsert(update-insert)更多细节请参考[这里](https://github.com/elasticsearch/elasticsearch/issues/2008)

# database - WP7 - 在数据库中存储地理坐标

> ID：11194336
> 
> 赞同：0
> 
> 时间：2012-06-25T17:34:21.293
> 
> 标签：database, algorithm, windows-phone-7, geocoding

我需要将大量地理坐标存储在单个记录中的数据库中。无法将地理坐标存储在 sql 数据库中，所以目前我正在这样做：

```
geocoordinates-->string-->bytes-->database 
```

数据库中字符串的限制是 8000 字节，所以这个数量的数据必须以字节格式存储（数据库认为它是图像，所以没有字节限制）。我已将地理坐标截断为 6d.p（从 15d.p 下调），但过程非常非常缓慢。

有谁知道如何提高这项任务的效率？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:38:58.873

为什么不重新设计您的数据库，并将这些点存储为一对表示纬度/经度的双精度 - 如果需要，这些都可以引用“父”行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:45:05.303

我建议您将地理位置数据以经纬度对的形式存储到与当前表中的行/记录相关的新表中。

我不知道你对这些数据有什么计划，但这对我来说似乎是合乎逻辑的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:06:38.623

Postgres 确实直接支持点和其他几何图元：[http ://www.postgresql.org/docs/9.1/interactive/datatype-geometric.html](http://www.postgresql.org/docs/9.1/interactive/datatype-geometric.html)

此外，它具有 <-> 距离比较运算符，您可能会发现它很有用[http://www.postgresql.org/docs/9.1/interactive/functions-geometry.html](http://www.postgresql.org/docs/9.1/interactive/functions-geometry.html)

还可以优化最近邻搜索的索引，您可以在此处阅读：[http ://www.postgresql.org/docs/9.1/interactive/indexes-types.html](http://www.postgresql.org/docs/9.1/interactive/indexes-types.html)

最后，这是一个示例，取自上述链接：

`SELECT * FROM places ORDER BY location <-> point '(101,456)' LIMIT 10;`

您可能还想查看一些专用的 GIS 数据库。一个建立在 postgres 之上的是 PostGIS： http: [//postgis.refractions.net/](http://postgis.refractions.net/)

# selection - Sencha Chart 2.0 - 多项选择

> ID：11194337
> 
> 赞同：0
> 
> 时间：2012-06-25T17:34:27.907
> 
> 标签：selection, bar-chart, sencha-charts

我正在寻找在条形图上管理多项选择的方法。可能吗？

实际上，我正在使用此配置：

```
interactions: [
....
'itemhighlight',
...],
series: [
                {
                    type: 'bar',
                    highlight: true,
                    ....
                }
            ] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:28:44.917

我在 Sencha Chart 论坛上找到了答案：

[http://www.sencha.com/forum/showthread.php?226314-Multiple-Selection-Bar-Chart&p=844157](http://www.sencha.com/forum/showthread.php?226314-Multiple-Selection-Bar-Chart&p=844157)

# css - 修复了 JavaScript 警告 - 使用 CSS 位置固定到页面顶部

> ID：11194342
> 
> 赞同：1
> 
> 时间：2012-06-25T17:30:50.580
> 
> 标签：css, javascript, noscript

我正在编写一段`noscript`代码，其中我做了一些事情，其中​​包括`<p>`在页面顶部提醒用户他/她禁用了 JavaScript。

当 JavaScript 被禁用时，最终结果应该看起来像 Stack Exchange 站点（这是我的屏幕截图 - SE 看起来很相似，只是它位于页面的最顶部）：

![在此处输入图像描述](../Images/85b24ee7f5ac9a45a481f14b899f8abf.png)

我让它工作正常，但如果红色条在滚动时保持固定在顶部，我会喜欢它。

我尝试使用该`position: fixed;`方法，但它最终移动了`p`元素，我无法让它看起来与没有`position: fixed;`修改的情况完全相同。我尝试摆弄 CSS`top`和`left`其他定位，但它看起来不像我想要的那样。

这是一个 CSS 片段：

```
<noscript>

<style type="text/css">

p.noscript_warning {
    position: fixed;
}

</style>

</noscript> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:26:15.670

后面不应该有空格`.`。

```
p.noscript_warning {
    position: fixed;
    top: 0;
    width: 100%; /* For Browser Compatibility */
} 
```

在这里查看[小提琴](http://jsfiddle.net/twM7F/)... :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:41:45.600

有时您需要做的就是在使用位置固定时更改文档标题。出于某种原因，Windows 对此很挑剔。如果您的文档类型很严格，您需要将其更改为：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:39:18.203

```
p. noscript_warning {
  position: fixed;
  margin:0;
  top:0; /* Not necessarily */
} 
```

# java - GSON - 从 Java 创建 JSON 树结构

> ID：11194343
> 
> 赞同：1
> 
> 时间：2012-06-25T17:34:49.763
> 
> 标签：java, json, gson

有几个问题，使用 GSON。我有一种感觉，GSON 可能不是我正在寻找的库，它能够为我提供一个我以后可以使用的 JSON 对象。

我正在从数据库中读取数据以填充稍后将使用的 json 对象。json 对象的输出应该类似于下面的 json，其中涉及到父母和孩子。它形成了一个基于小树的结构：

```
var json = { 
         id: "1", 
         name: "Joe Smith", 
         data: { 
         "email": "",
         "phone": "123-123-1233"},
         children: [{
                        id: "Tim Anderson",
                        name: "Tim Anderson",
                        data: { 
                             "email": "x@gmail.com",
                             "phone": "123-123-1233"
                        },
                        children: []
                    },{
                        id: "Christopher Johnson",
                        name: "Christopher Johnson",
                        data: {  
                             "email": "x@gmail.com",
                             "phone": "123-123-1233"
                        },
                        children: []
                    },{
                        id: "Kate Green",
                        name: "Kate Green",
                        data: {

                        },
                        children: [{
                            id: "Gary Jones",
                            name: "Gary Jones",
                            data: {},
                            children: []
                        }, {
                            id: "Melissa Brand",
                            name: "Melissa Brand",
                            data: {},
                            children: []
                        }]
                    }
                    ] 
    } 
```

如何创建一个类似于上面的结构的 GSON 对象，我可以将其序列化为具有这种层次结构的 JSON？我尝试过使用地图和其他集合 - 但我很难获得我想要的结果。因此，为什么我要问 GSON 是否是我真正想要的 JSON 序列化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:13:58.107

您是否尝试过默认的 java`JSONTokener`和其他类似的解析器？

```
 BufferedReader reader = new BufferedReader(new FileReader("jsonfile.json"));
     StringBuilder builder=new StringBuilder();
     for(String line=null;(line = reader.readLine()) != null;){
     builder.append(line).append("\n");
     }
    JSONTokener jsonTokener=new JSONTokener(builder.toString());
    JSONObject finalJson=new JSONObject(jsonTokener); 
```

在你的情况下，如果你想在里面的层次结构中找到额外的数据，那么迭代如下

```
 JSONArray children=finalJson.getJSONArray("children");
 for(int i = 0;i<children.length;i++){
 JSONObject childRecData = children.getJSONObject(i); //returns the ith JSONObject containing id, name, data, etc.
 int id = childRecData.getString();
 String name = childRecData.getString();
 JSONObject data = childRecData.getJSONObject(0);
 } 
```

**注意**对于较大的 JSON 文件（具有荒谬层次结构的文件），例如 HTTP 数据库请求，建议使用 Nishant 建议的 GSON 的 POJO（普通旧 Java 对象）模型

这里有[更多信息](https://sites.google.com/site/gson/gson-user-guide)

这是一个[类似的问题](https://stackoverflow.com/questions/3285514/reading-json-from-a-text-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:54:47.653

让我给你一个提示

像这样制作一个人和一个数据类（POJO）

```
Person
  String id
  String name
  Data data
  List<Person> children

Data
  String email
  String phone 
```

# eclipse - 在 Eclipse Juno for Mac 中安装 JavaFX 2.0

> ID：11194344
> 
> 赞同：3
> 
> 时间：2012-06-25T17:34:49.700
> 
> 标签：eclipse, eclipse-plugin, javafx-2, eclipse-juno

我现在正在运行 Mac OS X 10.6.x（Snow Leopard），所以我很确定支持的系统可能存在一些问题，但我正在尝试在 Eclipse 中安装 JavaFX 2.0（或 2.1.x） Juno for Java EE（3.8 版）。

我已经安装了 e(fx)clipse 插件，但我不确定我是否从 Oracle 网站下载了正确的 JavaFX .zip 文件。我下载了 JavaFX 2.2 beta 版本，因为它似乎是唯一可用于 OS X 的版本，但我可能错了。一旦我下载了这个档案，我就不知道如何处理它/把它放在哪里，以便 Eclipse 将它识别为 JavaFX 2.2 SDK。我知道我必须进入首选项并设置 SDK 文件的位置，但似乎没有任何可选择的 .jar 文件或文件夹来设置它。我在这里做错了吗？任何帮助表示赞赏。

* * *

编辑：我通过将 SDK 位置设置为首选项树的 JavaFX 部分中下载的 JavaFX 2.2 SDK 的位置来解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:17:42.837

[Oracle Java SDK for Mac](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html)的当前 GA 版本应包括 JavaFX 2.1。

您不需要单独下载 JavaFX 2.2 开发人员版本，除非您依赖 2.2 版本的功能或错误修复。

e(fx)clipse 0.14 版应该能够[检测](http://tomsondev.bestsolution.at/2012/05/29/efxclipse-0-0-14-released/)随 Oracle Java 发行版安装的 JavaFX for Mac。

[e(fx)clipse 的入门教程](http://tomsondev.bestsolution.at/2012/05/29/getting-started-with-efxclipse-and-javafx/)。

**更新**

很高兴在您的编辑中看到您能够将 JavaFX 2.2 与 OSX 10.6 一起使用。Java 客户主管 Richard Bair[指出](https://forums.oracle.com/forums/thread.jspa?threadID=2402300)：

> FWIW，实际上我们使用的一些来自 Lion 的 API 不在 Snow Leopard 上。此外，Apple 仅支持当前版本的 OS - 1（因此现在将是 Lion 和 Mountain Lion），并且对于部署，我们需要特殊的挂钩。当时的想法是，支持 Apple 自己不再支持的 Mac OS 版本是没有意义的。

因此，如果一切都没有按预期工作，请不要感到惊讶。10.6 不是 JavaFX 的[认证配置](http://www.oracle.com/technetwork/java/javafx/downloads/supportedconfigurations-1506746.html)。截至 2012 年 6 月，没有单独 JavaFX 下载的 OpenJDK 可能还不能替代用于 JavaFX 开发的 OracleJDK，因为所有 JavaFX 尚未开源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:11:19.743

我通过将 SDK 位置设置为 Eclipse 首选项树的 JavaFX 部分中下载的 JavaFX 2.2 SDK 的位置来解决此问题。

# python - 不存在的行 Python 上的错误

> ID：11194346
> 
> 赞同：1
> 
> 时间：2012-06-25T17:34:55.613
> 
> 标签：python, python-2.7, beautifulsoup

我不知道该怎么做，我有一个 39 行的 Python 脚本，它在第 40 行给了我一个错误！：（ 错误：

```
Traceback (most recent call last):
File "C:\Mass Storage\pythonscripts\Internet\execute.py", line 2, in <module>
execfile("firstrunSoup.py")
File "firstrunSoup.py", line 40

                                ^
SyntaxError: invalid syntax

C:\Mass Storage\pythonscripts\Internet> 
```

这是我的 Python 代码：

```
###firstrunSoup.py###
FILE = open("startURL","r") #Grab from
stURL = FILE.read() #Read first line
FILE.close() #Close
file2save = "index.txt" #File to save URLs to

jscriptV = "not"
try:
    #Returns true/false for absolute
    def is_absolute(url):
        return bool(urlparse.urlparse(url).scheme)

    #Imports
    import urllib2,sys,time,re,urlparse
    from bs4 import BeautifulSoup

    cpURL = urllib2.urlopen(stURL) #Human-readable to computer-usable
    soup = BeautifulSoup(cpURL) #Defines soup

    FILE = open(file2save,"a")
    for link in soup.find_all('a'): #Find all anchor tags
        outPut = ""
        checkVar = link.get('href') #Puts href into string
        if (checkVar is not None) and (checkVar != ""): #Checks if defined
            if len(checkVar) > 11: #Check if longer than 11 characters
                if checkVar[:11] != "javascript:": #Check if first 11 are "javascript:"
                    if checkVar[:7] != "mailto:": #Check if first 7 are "mailto:"
                        jscriptV = "not"
                    else: jscriptV = ""
                else: jscriptV = ""
            if checkVar != "#" and checkVar != "/":
                if jscriptV == "not":
                    if checkVar is not None: #Checks if defined
                        if is_absolute(checkVar): outPut = checkVar.split("#")[0]
                        else: outPut = urlparse.urljoin(stURL,checkVar).split("#")[0]
                    if outPut != "":
                        print outPut
                        FILE.write(outPut + "\r\n")
                        FILE.close()
execfile("nextrunsSoup.py") 
```

如果你能帮助我，请做。到目前为止，我已经花了很多时间在这上面，当它终于准备好时，我明白了。提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T17:37:47.153

除了你的尝试，你没有匹配的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T17:39:18.500

行前后应该有一个`except`块`try`

```
execfile("nextrunsSoup.py") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:39:09.823

所以你的文件的主体被包裹在`try:`，你的`except:`或在哪里`finally:`？

# php - 两种形式，一页

> ID：11194348
> 
> 赞同：2
> 
> 时间：2012-06-25T17:35:08.843
> 
> 标签：php, forms, session, post, input

我有两个表单，因此有两个不同的提交按钮，用于一个页面（用于将员工添加到公司数据库的页面）。

第一次提交处理提交用户名（通过命令行程序自动填写姓名和教师）。显然，我想保留这些信息并在用户填写第二个表单所需的信息时将其显示给用户。这工作正常。

问题是第二种形式是否有错误。添加失败并显示一条错误消息，但*第一个*表单中的所有信息都被清除了。

如果提交第一个表单（没有错误），则设置以下会话变量：

```
$_SESSION['name'] = $info['displayName'];
$_SESSION['faculty'] = $info['ou']; 
$ownerId = trim(mysql_prep($_POST['ownerId']));
$_SESSION['ownerId'] = $ownerId; 
```

但是，如果提交第二个表单，这些变量就会消失。我的理解是，发生这种情况是因为第一个表单在技术上*不再*提交。但是，话又说回来，这不是会话变量的重点——不要被消灭吗？

编辑：添加我取消设置所有会话变量可能会有所帮助，但前提是第二个表单提交时没有错误。虽然我认为这不是很相关

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:49:04.083

我能想到两种方法

```
if($POST['form_name'] == 'form1')
{
   //set my session variables
}
else  //for the second form
{
  //do something else
  //then session is intact
} 
```

我曾经在我的表单中放置一个隐藏字段来存储表单的名称。有些使用提交按钮的名称。

另一种方法是重新填充另一个表单，该表单仍在考虑如何在不使用两个表单的一个按钮的情况下执行此操作

```
<form name="form1" action="POST" action="xxx">
    <input type="text" values="<?php print($_POST['firstform_val_1']) ?>" name="val_1" />
</form>

<form name="form2" action="POST" action="xxx">
  //these hidden fields preserve the formal values and make sure they are reposted in this second form
  <input type="hidden" name="firstform_val_1" value="<?php print($_POST['firstform_val_1']) ?>" />
  <input type="hidden" name="firstform_val_2" value="<?php print($_POST['firstform_val_2']) ?>" />

  <input type="text" name="secondform_val1" />
  <input type="submit" name="form2" />
</form> 
```

这就是想法。我刚从楼上得到这个，没有测试。在第一种形式中，先前的值由第二种形式的隐藏字段中重复的值重新填充

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:12:28.887

如果表单是由 php 页面生成的，您可以使用以下脚本自动填充之前提交的任何字段。

启用短标签；

```
<input type="text" name="firstName" value="<?=isset($_POST['firstName'])?$_POST['firstName']:'';?>" ></input> 
```

没有短标签；

```
<input type='text' name="firstName" value="
<?php
    $value=isset($_POST['firstName'])?$_POST['firstName']:'';
    echo($value);
?>
"></input> 
```

# iphone - 如何为同一个应用启用“带有 Facebook 登录的网站”和“本机 iOS 应用 SSO”

> ID：11194349
> 
> 赞同：1
> 
> 时间：2012-06-25T17:35:11.853
> 
> 标签：iphone, ios, facebook, facebook-ios-sdk

我要求同一个 Facebook 应用程序应该可以通过“带有 Facebook 登录的网站”和“本机 iOS 应用程序中的 SSO”进行授权

现在有一个安全限制：如果您在 Facebook 应用程序设置中输入站点 URL - 您在身份验证对话框调用中提供的 redirect_url 应该与您提供的站点 URL 相同。对于 SSO，您必须将 redirect_url 设置为：fbYOUR_APP_ID://authorize... 这显然与我的网站 URL 不匹配：[http](http://test.com/) ://test.com/ ...当我进行 SSO 呼叫时 - 它给了我一个错误：

`"Invalid redirect_uri: Given URL is not allowed by the Application configuration."`

当您需要为 Web 和 Native SSO 身份验证共享一个 FACEBOOK APP ID 时，是否有解决方法，或者是否有人遇到过这种情况？也许唯一的方法是清除设置中的站点 URL 字段 - 这将删除安全限制？

# java - Java：通过 LAN 网络进行序列化时遇到问题

> ID：11194350
> 
> 赞同：0
> 
> 时间：2012-06-25T17:35:13.340
> 
> 标签：java, networking, ioexception

对不起，如果这是另一个问题的转贴；经过一个小时的谷歌搜索，我找不到任何东西。无论如何，问题是：我在游戏中有一个服务器类和一个客户端类。服务器应该通过网络向客户端发送一个包含所有信息的对象。但是，当我尝试发送它时，它给了我一个 IO.EOFException。这是所有内容的代码：

```
public class NetworkClient {
private static Socket socket = null;
private static ObjectOutputStream oos;
private static ObjectInputStream ois;
private static FileInputStream fileIn;

public static void startConnection(){
    try {
        socket = new Socket("192.168.1.5", 4445);
        oos = new ObjectOutputStream(socket.getOutputStream());
        ois = new ObjectInputStream(socket.getInputStream());
    } catch (UnknownHostException e) {
        System.err.println("Don't know about host.");
        System.exit(1);
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for "
                           + "the connection to: 192.168.1.5.");

    }
    fileIn = null;
}

public static void getVariables(){
    try
    {
       FileInputStream fileIn =
                     new FileInputStream("variables.ser");
       ois = new ObjectInputStream(fileIn);
       Display.variables = (Variables) ois.readObject();
       ois.close();
       fileIn.close();
   }catch(IOException i)
   {
       i.printStackTrace();
       return;
   }catch(ClassNotFoundException c)
   {
       System.out.println("Variables class not found");
       c.printStackTrace();
       return;
 }
 }
 } 
```

这是服务器：

```
public class NetworkHost {
    private static ServerSocket serverSocket;
    private static Socket clientSocket;
    private static ObjectInputStream ois;
    private static ObjectOutputStream oos;

public static void startConnection(){

            serverSocket = null;
        try {
            serverSocket = new ServerSocket(4445);
        } catch (IOException e) {
            System.err.println("Could not listen on port: 4444.");
            System.exit(1);
        }
            clientSocket = null;
        try {
            clientSocket = serverSocket.accept();
        } catch (IOException e) {
            System.err.println("Accept failed.");
            System.exit(1);
        }

        try {
            ois = new ObjectInputStream(clientSocket.getInputStream());
            oos = new ObjectOutputStream(clientSocket.getOutputStream());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

}

public static void sendVariables(){
    try
      {
         FileOutputStream fileOut =
         new FileOutputStream("variables.ser");
         ObjectOutputStream out =
                            new ObjectOutputStream(fileOut);
         out.writeObject(Display.variables);
         out.close();
          fileOut.close();
      }catch(IOException i)
      {
          i.printStackTrace();
      }
}   
} 
```

最后，这是错误：

```
 java.io.EOFException
    at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2280)
    at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2749)
    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:779)
    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:279)
    at com.dodger.NetworkClient.getVariables(NetworkClient.java:36)
at com.dodger.Display.main(Display.java:129) 
```

所以真的，长话短说，我搞砸了一些愚蠢的事情（可能），现在对象不会在客户端和服务器之间发送。任何修复的想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:03:16.097

看起来您的服务器实际上并未向客户端发送任何内容。除非显示的代码之外还有其他内容，否则`Display.variables`永远不会被发送到网络。

为客户考虑这种方法：

```
private static Socket socket = null;
private static ObjectOutputStream oos;
private static ObjectInputStream ois;

// snip ...

public static void getVariables()
{
    try
    {
       ois = new ObjectInputStream(socket.getInputStream());
       Display.variables = (Variables) ois.readObject();
       ois.close();
    }
    catch(IOException i)
    {
       i.printStackTrace();
       return;
    }
    catch(ClassNotFoundException c)
    {
       System.out.println("Variables class not found");
       c.printStackTrace();
       return;
    }
} 
```

而服务器的这种方法：

```
private static ServerSocket serverSocket;
private static Socket clientSocket;
private static ObjectInputStream ois;
private static ObjectOutputStream oos;

// snip ...

public static void sendVariables()
{
    try
    {
        ObjectOutputStream out = new ObjectOutputStream(clientSocket.getOutputStream());
        out.writeObject(Display.variables);
        out.close();
    }
    catch(IOException i)
    {
        i.printStackTrace();
    }
} 
```

我不是 100% 确定这将完全按照书面说明对您有用，这取决于您如何进行初始化以及在何处进行初始化。将此视为准则。

你的缩进也很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:42:17.243

我无法理解这一点。

1.  您的标题说“通过 LAN 网络进行序列化”，但是您说的代码不起作用是从文件中读取的。

2.  您的服务器写入文件；您的客户端从文件中读取。因此，套接字实际上是用来做什么的？如果服务器和客户端不在同一台机器上，这怎么可能工作？

3.  `EOFException`读取时`ObjectInputStream`仅表示您已到达流的末尾：对等方已关闭连接并且没有更多对象。

4.  除非您的服务器设计为仅服务一个客户端，否则 clientSocket 和流变量不能是静态的，并且它们必须位于每个连接实例化的不同类中，通常是 Runnable，它管理连接并以自己的方式启动线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:44:07.387

客户端很可能正在尝试读取仍然为空的文件。你是如何运行这个应用程序的？主要方法在哪里？这不是序列化问题。

# php - 如何使用 vb.net 编写代码将信息保存到 PHP 数据库？

> ID：11194352
> 
> 赞同：0
> 
> 时间：2012-06-25T17:35:21.860
> 
> 标签：php, mysql, database, vb.net, phpmyadmin

我正在使用 vb.net 设计一个界面，在那里输入的值应该保存在数据库中，我选择在 phpmyadmin 中使用 mysql 设计我的数据库。我已经通过 localhost/phpmyadmin/index.php 在 php 中创建了我的数据库。但我不知道我应该在 vb.net 中编写什么命令/代码，以便将 textbox.text 的值保存在数据库中。谁能帮我？我只是 Visual Studio 以及 PHP 和 mysql 的初学者。谢谢！任何帮助，将不胜感激。：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:41:10.583

正如其他人所提到的，您使用的是 MySQL 数据库而不是“PHP 数据库”

本教程应该可以帮助您。我正在链接到第 3 部分，因为这是他们开始进入代码的地方

[http://www.vbmysql.com/articles/vbnet-mysql-tutorials/the-vbnet-mysql-tutorial-part-3](http://www.vbmysql.com/articles/vbnet-mysql-tutorials/the-vbnet-mysql-tutorial-part-3)

但是，如果您以前没有数据库经验，我强烈建议您从第 1 部分开始。

# iphone - iPhone 失去与 iPhoto 同步的照片的 png 透明度

> ID：11194353
> 
> 赞同：1
> 
> 时间：2012-06-25T17:35:25.720
> 
> 标签：iphone, ios, png, transparency, iphoto

我正在制作一个需要用户为其提供透明图像的 iphone 应用程序。我期待我可以使用 iPhoto 将我的照片同步到 iPhone，然后使用图像选择器将照片导入我的应用程序。但是，当我这样做时，我会失去透明度。我知道我可以允许用户使用 iTunes 和文档文件夹导入照片，但我更愿意使用 iPhoto 和内置的图像选择器。反正有没有使这项工作。如果没有，是否有解释此限制的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:02:37.643

疯狂的猜测 - 当您获取图像时，您使用的是 UIImagePNGRepresentation 吗？如果不是，你可能会得到一个 jpeg，因为我认为它是默认的。在从选择器中选择图像之后，可能会发布关于如何获取图像的圆顶代码。

乔纳森

# java - 根据本地项目构建 Maven JAR

> ID：11194355
> 
> 赞同：1
> 
> 时间：2012-06-25T17:35:35.130
> 
> 标签：java, maven, deployment, jar, maven-assembly-plugin

我在 Eclipse 中有一个项目（我们称之为项目 A），它是一个 Maven 项目。它是一个被其他项目使用的库。

我有项目 B，它也是一个 Maven 项目，它依赖于项目 A。在项目 B 的 pom.xml 中，我添加了一个引用项目 A 的依赖项，它可以从 Eclipse 完美构建和运行。

现在我想从项目 B 构建一个可执行的 JAR。以前我通过将`maven-assembly-plugin`插件添加到 pom.xml 然后`mvn assembly:single`从命令行运行来完成此操作。

当我`mvn assembly:single`在项目 B 中运行命令时，它会抛出一个错误，说它找不到项目 A。

现在为 B 构建可执行 JAR 的最佳方法是什么？有没有办法从 Eclipse 构建它（并且可能它会像它一直在做的那样处理依赖项引用）或者有没有办法告诉 Maven 项目 A 是本地的，它应该使用本地项目 A 构建项目 B。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:59:00.303

在 Eclipse 之外使用 Maven 项目作为依赖项时，您必须先将其安装到本地存储库中。您可以使用以下`install`命令执行此操作：

> install：将包安装到本地仓库，作为本地其他项目的依赖

这句话来自[Maven in 5 Minutes](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)教程。

* * *

“问题”是 Eclipse 将像任何其他项目一样使用其内部编译器构建 Maven 项目。由于 Maven 依赖项被映射到正常的 Eclipse 依赖项，因此您不必访问`install`您的项目。但是，只要您真正使用 Maven 来构建它们（甚至在 Eclipse 中），您就可以这样做。

# php - Sql，对象与字符串/数组

> ID：11194362
> 
> 赞同：0
> 
> 时间：2012-06-25T17:36:10.470
> 
> 标签：php, sql

为什么这会产生一个对象？

```
$sql = $this->db->query("
  SELECT 'product_id'
  FROM " . DB_PREFIX . "product_to_category
  WHERE category_id = '" . $this->db->escape($category['category_id']) . "'
"); 
```

以及如何获取字符串/数组？

来自 Opencart 相关：stdClass 类的对象无法转换为字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:41:03.897

假设 CodeIgniter：

[http://codeigniter.com/user_guide/database/queries.html](http://codeigniter.com/user_guide/database/queries.html)

```
$this->db->query(); 
```

> query() 函数在运行“读取”类型查询时返回一个数据库结果**对象**，您可以使用它来显示结果。

您可以使用以下方法将结果集行作为数组处理`result_array`：

[http://codeigniter.com/user_guide/database/results.html](http://codeigniter.com/user_guide/database/results.html)

```
$query = $this->db->query("YOUR QUERY");

foreach ($query->result_array() as $row){
   echo $row['title'];
   echo $row['name'];
   echo $row['body'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:09:49.567

```
$sql = $this->db->query("
  SELECT 'product_id'
  FROM " . DB_PREFIX . "product_to_category
  WHERE category_id = '" . $this->db->escape($category['category_id']) . "'
");
$rows = $sql->rows; //array of all returned values
$row = $sql->row; //first row 
```

我强烈建议您使用`var_dump($sql)`来调查哪些公共对象字段可能对您有用。

*固定语法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T19:00:41.880

您的查询语法有错误，您输入了 SELECT 'product_id' 并且您不应该有撇号。

```
$sql = $this->db->query("
  SELECT 'product_id'
  FROM " . DB_PREFIX . "product_to_category
  WHERE category_id = '" . $this->db->escape($category['category_id']) . "'
"); 
```

您需要进行此更改。

```
$sql = $this->db->query("
  SELECT product_id
  FROM " . DB_PREFIX . "product_to_category
  WHERE category_id = '" . $this->db->escape($category['category_id']) . "'
"); 
```

# android - findViewById - 嵌套线性布局，找不到我的 id - Android

> ID：11194375
> 
> 赞同：2
> 
> 时间：2012-06-25T17:36:45.677
> 
> 标签：android

我搜索了互联网无济于事。我正在尝试为 textview 设置字体。它位于我的 main.xml 文件中自己的 LinearLayout 中。当我在 OnCreate 中编写代码时，它没有找到 id 或父线性布局。这是代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/background"
    android:orientation="vertical"
    android:weightSum="10.0" >

    <LinearLayout
        android:id="@+id/map_message_layout"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1.0"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/map_message"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dp"
            android:layout_marginRight="15dp"
            android:layout_marginTop="10dp"
            android:gravity="center_horizontal"
            android:text="@string/diagram" />

    </LinearLayout> 
```

以及以下 onCreate 方法：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    LinearLayout = (LinearLayout) this.findViewById(R.id.map_message_layout)
    TextView maptxt = (TextView) findViewById(R.id.map_message);
    Typeface typeFace = Typeface.createFromAsset(getAssets(),"fonts/MuseoSans_100.otf");
    maptxt.setTypeface(typeFace);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:42:25.673

你试过清理你的程序吗？我之前发生过一些奇怪的事情，这解决了我的问题。不确定是否属于这种情况。

# python - 使用 Pypy 解释器从命令行运行 Python 脚本

> ID：11194380
> 
> 赞同：0
> 
> 时间：2012-06-25T17:37:00.170
> 
> 标签：python, command-line, path, pypy

因此，我已将 pypy 预构建的解释器安装到我的 Windows 主文件夹中；但是，它只允许我通过解释器接口（类似于 IDLE）执行 python 脚本。我想通过将引用pypy解释器的东西放到我系统的PATH中来将此功能扩展到Windows中的cmd行，但是，我找不到任何有关此的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:42:51.277

只需将带有 pypy.exe 的文件夹添加到您的 PATH 中。[在这里](http://doc.pypy.org/en/latest/man/pypy.1.html)您可以阅读有关 pypy 命令行的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:46:33.763

添加到您的路径只需打开您的开始菜单

右键单击“计算机”

选择“属性”

单击“高级系统设置”选项

单击“环境变量”选项

更改名为“PATH”的文件夹以包含您需要的文件夹

# iphone - 使用 ARC 时，[[NSArray alloc] init] 和“自动相关”[NSArray array] 之间有区别吗？

> ID：11194392
> 
> 赞同：2
> 
> 时间：2012-06-25T17:37:45.940
> 
> 标签：iphone, objective-c, automatic-ref-counting

> **可能的重复：**
> [Objective-C：使用 ARC，什么更好？分配或自动释放初始化程序？](https://stackoverflow.com/questions/6776537/objective-c-with-arc-whats-better-alloc-or-autorelease-initializers)

ARC 是否会自动将类初始值设定项的自动发布版本转换为适当的非自动发布版本，或者它们在技术上仍然是自动发布的？

我不想保留内存超过绝对需要的时间，所以我养成了在几乎所有情况下都使用 alloc/init 的习惯。现在在 ARC 中，我想知道我是否可以开始使用“自动释放”初始化程序并期望它们像非自动释放版本一样表现......

有没有人有任何文档说明我在哪里可以找到 ARC 下自动发布的方法会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:28:42.940

**当您获得自动释放对象时，只要您的代码和调用的方法/函数都使用 ARC 编译**，ARC 将设法避免自动释放池。

ARC`objc_retainAutoreleasedReturnValue`在您的代码中添加一个调用，并`objc_autoreleaseReturnValue`在被调用的函数/方法中添加一个调用。在运行时，当`objc_autoreleaseReturnValue`看到返回的值将由 保留时`objc_retainAutoreleaseReturnValue`，它不会自动释放对象并设置一个标志来告诉`objc_retainAutoreleaseReturnValue`不要保留该对象。因此，使用方便的创建方法而不是`alloc`/ ，您不会获得（可察觉的）额外成本`init`。

有关该机制的更多信息，您可以阅读[objc_retainAutoreleasedReturnValue 如何工作？](http://iphone.galloway.me.uk/2012/02/how-does-objc_retainautoreleasedreturnvalue-work/)由马特加洛韦。

总之，只要使用您喜欢的方法，Apple 工程师将确保它运行得很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:44:23.020

从技术上讲，它们并不相同，因为 ARC 在编译时只是将“保留”和“发布”插入到您的代码中（在必要时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:02:04.733

如果在初始化对象时使用指针，ARC 会存储对对象的强引用，否则会立即释放对象。所以我相信你关于 NSArray 的问题的答案是不，ARC 不会把它变成一个自动释放的对象。每当范围内不再需要对象时，它还会在代码中添加一个 release 语句：

```
-(void) aMethod
{
    [NSArray alloc];
}

//in essence is transformed into

-(void) aMethod
{
    NSArray *temp = [NSArray alloc];
    [temp release];
} 
```

如果您存储了一个指针，ARC 会在对象即将离开作用域时添加一个释放。

# ios - 在 UITableViewController 中建模非模型单元格

> ID：11194399
> 
> 赞同：0
> 
> 时间：2012-06-25T17:37:59.737
> 
> 标签：ios, uitableview

我正在寻找这个问题的普遍接受/最佳解决方案。

**问题**

我有一个 UITableViewController 填充了`UITableViewCell`代表对象的`FooModel`对象。当用户点击一行时，我想在该单元格下方添加一个或多个其他单元格，并带有其他控件。所以问题是：管理表格中的模型单元和控制单元的最佳方法是什么？保留对象数组`UITableViewCell`违背了`dequeueReusableCellWithIdentifier:`（不是吗？）的目的，因为它必须保留整个表中的所有视图。那么数组中应该包含什么来告诉数据源哪些单元格在哪些索引处？还是有更好的解决方案？

![小样](../Images/a35b02a267a925a171a14811d8213a18.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:43:02.617

如果您只是扩展单元格并添加子视图以在下面公开功能，那么您可以让您的生活变得非常轻松。

这样，您可以将订单保留在数据源中并使用正常的导航方法。

如果您需要示例，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:38:00.657

创建保持满足`UITableViewDataSource`协议所需的最少数据量的联络对象，例如单元高度，并引用模型对象创建控制单元所需的任何信息。看这个类图：

![类图](../Images/0b9286025e957aa5431ecae84ea7788b.png)

# javascript - slideDown 在最后突然跳跃

> ID：11194402
> 
> 赞同：9
> 
> 时间：2012-06-25T17:38:10.717
> 
> 标签：javascript, jquery, css, html

我在垂直列中构建了一个相当正常的菜单子菜单排列——嵌套的 UL，`slideToggle`用于展开和折叠子菜单。

我要解决的问题是子菜单“跳转”在最后打开的方式。（我在 Chrome 的最新版本中进行测试。）它可能在第二个子菜单“Benefits”中最为明显。它不会在菜单折叠时跳跃，只有在它们展开时才会跳跃。

我认为问题可能与`:after`仅在菜单完全展开时添加的样式有关。`current`具体来说，一旦菜单完全展开，该类就会添加到 LI 标记中。但是注释掉切换该类的代码似乎没有效果。

```
$(document).ready(function() {
  $('#group-subnav > ul > li > a').on('click', function(e) {
    e.preventDefault();
    var $li = $(this).closest('li');
    $li.find('ul').slideToggle('', function() {
      $li.toggleClass('current')
    }).end().siblings().find('ul').slideUp('', function() {
      $li.siblings().removeClass('current')
    }).end();
  });
});
```

```
/* Normalize */

body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td {
  margin:0;
  padding:0;
}
ol,ul {
  list-style:none;
}

#group-subnav {
  display: table-cell;
  vertical-align: top;
  background: #f6ca00;
  width: 159px;
  height: 100%;
}

#group-subnav a {
  display: block;
  color: inherit;
  text-decoration: none;
}

#group-subnav a:hover {
  /*    text-decoration: underline;*/
}

#group-subnav>ul {}

#group-subnav>ul>li {
  border-top: 2px solid #fff;
  font-size: 80%;
  text-shadow: 1px 1px 2px #eee;
  color: #333;
  letter-spacing: 1px;
  line-height: 1.2em;
  background: #bebebe;
  /* Old browsers */
}

#group-subnav>ul>li>a {
  padding: 6px 8px 12px;
  background: #bebebe;
  /* Old browsers */
  background: -moz-linear-gradient(top, #bebebe 0%, #b3b3b3 50%, #808080 100%);
  /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #bebebe), color-stop(50%, #b3b3b3), color-stop(100%, #808080));
  /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, #bebebe 0%, #b3b3b3 50%, #808080 100%);
  /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, #bebebe 0%, #b3b3b3 50%, #808080 100%);
  /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #bebebe 0%, #b3b3b3 50%, #808080 100%);
  /* IE10+ */
  background: linear-gradient(top, #bebebe 0%, #b3b3b3 50%, #808080 100%);
  /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#bebebe', endColorstr='#808080', GradientType=0);
  /* IE6-9 */
}

#group-subnav>ul>li>a:after {
  content: ' +';
  float: right;
}

#group-subnav>ul>li.current>a:after,
#group-subnav>ul>li:hover>a:after {
  font-size: 75%;
  content: ' \25bc';
}

#group-subnav>ul>li>ul {
  display: none;
  background: #f4e693;
  padding: 2em 0;
}

#group-subnav>ul>li.current>ul
/*,
            #group-subnav > ul > li:hover > ul*/

{
  display: block;
}

#group-subnav>ul>li>ul>li {
  text-shadow: none;
  padding: 5px 8px;
  border-bottom: 1px solid #e5b502;
  color: #666;
  font-size: 90%;
  letter-spacing: 0;
}

#group-subnav>ul>li>ul>li:first-child {
  border-top: 1px solid #e5b502;
}

#group-subnav>ul>li>ul>li>a {
  color: inherit;
  text-decoration: none;
}

#group-subnav>ul>li>ul>li>a:after {
  content: "\00a0>";
}

#group-subnav>ul>li>ul>li>a:hover {
  text-decoration: underline;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<nav id="group-subnav">
  <!-- one column wide -->
  <ul>
    <li class="current"><a href="#">Services</a>
      <ul>
        <li><a href="#">Workflow Analysis</a></li>
        <li><a href="#">Technology Assessment</a></li>
        <li><a href="#">Precision Conversion</a></li>
        <li><a href="#">Intelligent Indexing</a></li>
        <li><a href="#">Simple Search and Retrieval</a></li>
        <li><a href="#">Better Forms Management</a></li>
        <li><a href="#">Effortless Distribution</a></li>
        <li><a href="#">Total Security</a></li>
        <li><a href="#">Easier Regulatory Compliance</a></li>
        <li><a href="#">Scanning</a></li>
      </ul>
    </li>
    <li><a href="#">Benefits</a>
      <ul>
        <li>Faster Storage and Retrieval</li>
        <li>Meticulous Records Management</li>
        <li>Disaster Prevention and Recovery</li>
        <li>Heightened Security</li>
        <li>Freed-up Physical Space</li>
        <li>Responsive Customer Service</li>
      </ul>
    </li>
    <li><a href="#">Get Started</a>
      <ul>
        <li>Call our Strategic Services Manager to get started.<br>
          <li><a href="mailto:">Email</a></li>
      </ul>

      </li>
  </ul>
</nav>
```

[在 jsFiddle 上查看](http://jsfiddle.net/mblase75/5gGum/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-25T17:48:06.603

给你正在滑动切换的元素设置一个宽度。

[http://jsfiddle.net/5gGum/6/](http://jsfiddle.net/5gGum/6/)

```
 #group-subnav > ul > li > ul {
        display: none;
        background: #f4e693;
        padding: 2em 0;
        width: 159px;
    } 
```

这允许 jQuery 准确地计算结束高度。

作为参考，我从这里了解了这个小技巧：[http ://www.bennadel.com/blog/2263-Use-jQuery-s-SlideDown-With-Fixed-Width-Elements-To-Prevent-Jumping.htm](http://www.bennadel.com/blog/2263-Use-jQuery-s-SlideDown-With-Fixed-Width-Elements-To-Prevent-Jumping.htm)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-27T12:56:08.827

我遇到了同样的问题，但没有任何效果。事实证明，将“过渡”属性设置为某些东西会导致我的问题：PI 只是在滑动对象上将其设置为 none，而 slideDown 现在可以作为一种魅力:-)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-14T12:23:28.847

对我来说，问题是我有 CSS 填充。删除了填充并将其转移到另一个 html 标签，封装了我的原始标签，一切正常。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-09-24T19:07:30.137

我知道这是一个老问题，但也许我的解决方案可以帮助其他一些谷歌员工。

对我来说，问题是由填充和 box-sizing 引起的：border-box。
我不需要特定的高度或宽度（两者都试过，最后将它们删除），盒子大小就可以了。

```
box-sizing:content-box;
padding: 20px; 
```

这个剪断对我的滚动框有用。请注意，没有填充的 box-sizing:border-box 不会导致任何问题。

jQuery 版本是 1.7.1

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-09T17:05:24.860

## 2020答案

在元素正下方添加这个虚拟 div 标签`slideDown()`

```
<div style="overflow: hidden;"></div> 
```

我只是偶然发现了这个技巧，它对我来说非常有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-16T12:34:47.363

我有这个问题。我的问题是因为我将 CSS 中的显示属性更改为“网格”。滑动功能将显示设置为阻塞，因此发生冲突，导致解决方案跳跃。

我通过用另一个 div 包装子节点以显示为网格来解决这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-06T23:22:37.457

正如[@Rick](https://stackoverflow.com/users/4720758/rick)在他们的[回答](https://stackoverflow.com/a/29301236/11461177)中所说，css`transition`属性会干扰 jQuery`slideDown()`和`slideUp()`方法。

当然，您可以只`transition`从元素的 css 中删除该属性，但是您可能仍需要其他自定义动画的过渡。

这是一个简单的解决方法：

```
$('selector').css('transition', 'unset'); 
if ($('selector').is(':visible')) {
    $('selector').slideUp();
} else {
    $('selector').slideDown();
}
setTimeout(function() {
    $('selector').css('transition', 'all 0.4s ease 0s');
}, 400); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-21T13:36:00.147

确保您尝试使用的元素`slideToggle`没有任何样式，因为 jQuery 将在动画期间添加它。我的问题是我设置了一个填充并删除它解决了这个问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-12T15:20:46.103

在我的情况下，它使用“！important”属性填充顶部和底部，删除“！important”使动画再次平滑。

# javascript - SVG foreignObject 未在 Chrome 中显示

> ID：11194403
> 
> 赞同：9
> 
> 时间：2012-06-25T17:38:11.087
> 
> 标签：javascript, html, firefox, google-chrome, jquery-svg

我有一个包含 div 的 foreignObject 的 SVG 元素。然后在我的js中我这样做：

```
$("#wrapper>svg>foreignObject>div").sparkline(data); 
```

它在 div 中创建了一个画布。当我查看两个浏览器的 firebug html 代码时：

火狐：

```
<svg>
    <foreignObject width="20" height="20" x="10" y="-10">
       <div>
          <canvas style="display: inline-block; width: 18px; height: 19px; vertical-align: top;" width="18" height="19"></canvas>
       </div>
    </foreignObject>
</svg> 
```

铬合金：

```
<svg>
    <foreignobject width="20" height="20" x="10" y="-10"/>
<svg> 
```

在 chrome 中它甚至不显示 div。我创建 div 的方式是

```
nodeEnter.append("foreignObject")
  .attr("width", "20")
  .attr("height", "20")
  .attr("x", "10")
  .attr("y","-10");

$("#wrapper>svg>foreignObject").append("<div></div>"); 
```

Firefox 正在按照我的预期工作。但铬没有。有没有人有什么建议？

另外，我认为部分问题是 chrome firebug HTML 输出显示“foreignobject”，但 Firefox 以我附加的方式显示“foreignObject”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T13:41:39.677

您需要有一个 HTML 主体作为外来对象的子元素。一旦你有了它，你就可以把任何东西放在体内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-09T20:07:03.117

只是为了添加到对话中，这里有一些标记。Chrome 和 Firefox 的行为不同，这些样式标签消除了差异（添加到 html 重置？）您显然不需要 HTML 正文，而是标签上的命名空间引用 xmlns，无论是它`body`还是简单`div`的 . 此外，您可能需要考虑使用 svg`switch`标签来测试支持的功能。

```
<!doctype html><html><body>

<svg xmlns="http://www.w3.org/2000/svg" width="500px" height="300px">
  <foreignObject width="100" height="57">
    <div xmlns="http://www.w3.org/1999/xhtml" style="position:relative;
         width:100px;height:57px;overflow:hidden;font-family:Arial;
         font-weight:400;font-size:12px;line-height:100%;">
           Lorem ipsum dolor sit amet, consectetur adipiscing egplit, sed do eiusmod
           tempor incididunt ut labore
    </div>
  </foreignObject>
</svg>

</body></html> 
```

# input - 使用超时获取用户输入

> ID：11194406
> 
> 赞同：0
> 
> 时间：2012-06-25T17:38:17.927
> 
> 标签：input, lua, timeout, keypress, prompt

我正在尝试制作一个脚本来提示用户并等待他们按下指示答案的键，或者如果在固定的时间内没有按下任何键，请选择默认选项。

可悲的是，我在嵌入了 lua 的环境中执行此操作，因此我无法添加库或修改源。io.read 也会阻塞，直到用户按下 enter 并且 io.popen 不可用。

是否有可能做到这一点？

PS 我需要这个，因为游戏是按时间发生的，分阶段进行，你需要决定什么时候采取行动，而没有太多时间去思考它。如果您能想到另一种方法来做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:09:07.903

> 等待他们按下一个键 [..] II 不能添加库或修改源 [..] io.read 块，直到用户按下 enter [..]**是否可以这样做？**

不，Lua 的 IO 库是基于 C 的 IO 库的，它们都是基于流的。没有办法检测按键。所以，不，如果不使用本机代码扩展 Lua（你说你做不到），这是不可能的。

# javascript - davis.js 哈希插件

> ID：11194407
> 
> 赞同：0
> 
> 时间：2012-06-25T17:38:18.910
> 
> 标签：javascript, html

我使用带有 2 个链接和警报的默认演示，现在我包含了哈希和标题插件。我的代码是：

```
<script type="text/javascript">
    Davis.extend(Davis.hashRouting({ prefix: "!"}));

    var app = Davis(function () {
        this.use(Davis.title);

        this.configure(function () {
            this.generateRequestOnPageLoad = true
        });
        this.get('/welcome/:name', function (req) {
            alert("Hello " + req.params['name']);
            this.setTitle(req.params['name']);
        });
    });

    app.start();

</script>

    <a href="#!/welcome/oliver">greet oliver</a> //link 1
    <a href="#!/welcome/bob">greet bob</a> //link 1 
```

现在的问题是当我点击链接时，它会将我重定向到：*http://localhost/%23!/welcome/bob#!/welcome/bob* 有什么问题？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:20:26.650

您应该能够将散列放在href中，然后您还需要将散列放在路由定义中。

老实说，hashRouting 扩展可以做一个整理，它是由社区成员贡献的，最近没有看到太多的爱。我个人不经常使用它，这可能就是原因，所以这样的反馈很好！

无论如何，我在这里提出了一个可能对您有所帮助的要点 - [https://gist.github.com/2994611](https://gist.github.com/2994611)

如果您发现任何其他问题，请随时在 GitHub 上打开一个问题，我将在下一个版本中关注 hashRouting 扩展。如果您有任何其他问题，也请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:48:27.200

根据[主页上明显的示例，](http://davisjs.com)您不应该在 ahref 中放置 hashbang

```
Set up some links:
    <a href="/welcome/bob">greet bob</a> 
```

# php - SQL 语法错误/无效查询 - WAMP、phpMyAdmin

> ID：11194414
> 
> 赞同：0
> 
> 时间：2012-06-25T17:38:45.130
> 
> 标签：php, mysql, sql, database, phpmyadmin

我在 PHP 中的 SQL 查询出现错误。我尝试了多个查询，并且也厌倦了使用 phpMyAdmin 生成的 PHP 代码。谁能帮我这个？

> 无效查询：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''sample_table' LIMIT 0, 30' 附近使用正确的语法

这是PHP代码：

```
//Connect to server
 $connect = mysql_connect("localhost", "root", "");
if (!$connect) {
    die('Not connected : ' . mysql_error());
}

//Connect to DB
$db_selected = mysql_select_db("testing", $connect);
if (!$db_selected) {
    die ('Can\'t use foo : ' . mysql_error());
}

$sql = "SELECT `Name` FROM `sample_table` LIMIT 0, 30 ";

//Query DB table
$sqlQuery = mysql_query($sql, $connect);
if (!$sqlQuery) {
    die('Invalid query: ' . mysql_error());
}

//fetch the results / convert the results into an array
while($rows = mysql_fetch_array($sqlQuery, MYSQL_NUM)) //this is happening
{   
    $name = $rows['name'];
    $age = $rows['age'];
    $ID = $rows['ID'];

    echo "$name<br/>$age<br/>$ID<br/>";
}

mysql_close($connect); 
```

这是我创建的 phpMyAdmin 表的屏幕截图。此表中有许多记录。

![phpMyAdmin 截图](../Images/d466c5f4200496abd647e370994956aa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:40:47.777

试试这个

```
SELECT Name FROM sample_table LIMIT 0, 30 
```

代替

```
SELECT Name FROM 'sample_table' LIMIT 0, 30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:43:20.960

改变这个：

```
$sql = "SELECT Name FROM 'sample_table' LIMIT 0, 30 "; 
```

进入这个：

```
$sql = "SELECT `Name` FROM `sample_table` LIMIT 0, 30 "; 
```

请注意，我已将 into 更改`'`为```.

顺便说一句，`echo`语法应该是这样的：

```
 echo $name."<br/>".$age."<br/>".$ID."<br/>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:44:46.907

而不是撇号：

```
 SELECT Name FROM 'sample_table' LIMIT 0, 30 
```

使用反引号：

```
 SELECT Name FROM `sample_table` LIMIT 0, 30 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T17:51:27.663

反引号表示数据库、表或列名。单引号向 MySQL 指示字段值。所以它试图将“sample_table”解释为字段值，而不是表名，与“Name”相同，更改为“Name”。

更正的脚本；

```
$connect = mysql_connect("localhost", "root", "");
if (!$connect) {
    die('Not connected : ' . mysql_error());
}

//Connect to DB
$db_selected = mysql_select_db("testing", $connect);
if (!$db_selected) {
    die ('Can\'t use foo : ' . mysql_error());
}

$sql = "SELECT `Name` FROM `sample_table` LIMIT 0, 30 ";

//Query DB table
$sqlQuery = mysql_query($sql, $connect);
if (!$sqlQuery) {
    die('Invalid query: ' . mysql_error());
}

//fetch the results / convert the results into an array
while($rows = mysql_fetch_array($sqlquery, MYSQL_NUM)) //this is happening
{   
    $name = $rows['name'];
    $age = $rows['age'];
    $ID = $rows['ID'];

    echo ($name."<br />".$age."<br />".$ID."<br />"); 
/*proper echo and html syntax, remember echo is still a function that you are passing a parameter to!*/
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T17:41:28.440

尝试删除 sql 语句中的引号：

```
$sql = "SELECT Name FROM sample_table LIMIT 0, 30"; 
```

# java - 如何为我的应用程序创建自定义卷

> ID：11194431
> 
> 赞同：0
> 
> 时间：2012-06-25T17:39:33.020
> 
> 标签：java, android, android-widget

我正在尝试创建一个自定义音量按钮，但我并没有停止任何法规或任何想法来帮助我开发它。在网上搜索了很多并且没有找到任何东西后，我去发布我的问题。

我所做的是这样的：

![体积](../Images/84f06810f7ed777cfaa182085d30885d.png)

或像这样：

![在此处输入图像描述](../Images/3304dcb554d0696a45fc3dd36744c08e.png)

我只需要一个想法，或者你们都知道的教程...

非常感谢您阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:14:21.553

要控制手机的音量，您需要使用[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html)类。这为您提供了修改设备上各种音频流的音量的所有必要方法。例如，这将改变媒体音量：

```
AudioManager am = (AudioManager) Context.getSystemService(Context.AUDIO_SERVICE);

am.setStreamVolume(AudioManager.STREAM_MUSIC, [int direction], [int flags]); 
```

至于音量控制的 UI，您可以使用大多数您想要的 UI 小部件，例如[SeekBar](http://developer.android.com/reference/android/widget/SeekBar.html)，甚至是自定义组件。对于可用于 UI 的各种类型的小部件，有多个在线教程。

# xml - 使用 Ant 在 Jar 中包含数据库文件

> ID：11194434
> 
> 赞同：0
> 
> 时间：2012-06-25T17:39:40.500
> 
> 标签：xml, ant

我正在尝试使用 ant 和 eclipse 制作一罐简单的库存程序。我已经构建了 xml 文件，但是我需要向 buildjar 目标添加一些内容，这将导致 ant 将 itemdatabase 文件（当前位于基本目录中）包含在 jar 中。到目前为止我所拥有的。

```
<target name="buildjar" depends="clean">
    <jar jarfile="${build.dir}/StudioCat.jar">
        <fileset dir="${basedir}">
            <include name="config/*"/>
            </fileset>
            <fileset dir="${bin.dir}">
                <include name="**/*.class"/>
            </fileset>
            <manifest>
                <attribute name="Main-Class" value="presentation.CreateInventoryUI"/>
            </manifest>
    </jar>

    <copy todir="${build.dir}">
    <fileset dir="${basedir}">
        <include name="config*/**/*"/>
        </fileset>
        </copy>

        </target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:54:48.250

1）您使用 .jar 任务（正如您已经在做的那样）：

*   [http://ant.apache.org/manual/Tasks/jar.html](http://ant.apache.org/manual/Tasks/jar.html)

2）您的项目中通常在“src/”下有几个子文件夹：

```
src/
    css/
    java/
    html/
    images/
    config/ 
```

3）您的 XML 将位于 src/config 中（例如）。您的

```
<target name="buildjar" depends="clean">
  <jar jarfile="${build.dir}/StudioCat.jar">
    <fileset dir="${basedir}"
         includes="config.xml"
         fullpath="config/config.xml"/>
    </fileset>
... 
```

几个链接：

*   [如何通过 Ant 在特定位置将文件包含在 Jar 中](https://stackoverflow.com/questions/1434651/how-to-include-file-in-jar-through-ant-at-specific-location)

*   [http://ant.apache.org/manual/Tasks/jar.html](http://ant.apache.org/manual/Tasks/jar.html)

问：您是否使用像 Eclipse 这样的 IDE？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:58:16.253

类似于您包含“config”目录及其内容的方式。

```
<fileset dir="${basedir}">
  <include name="config/*"/>
  <include name="itemdatabase"/> <!-- To include itemdatabase -->
</fileset> 
```

# google-apps-script - 在 QUERY 语句中调用脚本函数

> ID：11194437
> 
> 赞同：2
> 
> 时间：2012-06-25T17:40:07.507
> 
> 标签：google-apps-script, google-sheets, google-query-language

在 QUERY “select” 子句中，它声明您可以使用标量函数代替列名，例如“year(A)”。

在文档的另一部分中，它指出您可以通过将“=function_name(...)”编码到单元格中来调用脚本函数。

我的问题是：您可以在 QUERY 语句中使用脚本函数作为“标量函数”吗？

如果可能的话，它将大大简化代码并可能提高性能，在某些情况下，例如“将数据从一张纸复制到另一张纸”。

这是我的例子

```
Assume "test" is a function that issues a "return" statement that modifies
its input parameter. 
```

我试过代码

```
=test(A1) 
```

在一个单元格中，它可以工作。

但是当我尝试这个QUERY

```
=QUERY(A1:A10, "select test(A)" ) 
```

它失败。我猜它不喜欢“test(A)”值。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T03:40:11.873

> 我的问题是：您可以在 QUERY 语句中使用脚本函数作为“标量函数”吗？

不，你不能，不幸的是。

在两行之间阅读，我认为您需要做的是修改您的脚本，使其接受一个数组作为参数，在该数组上执行它需要执行的操作，并返回一个结果数组。然后你就可以调用类似的东西：

```
=test(A1:A10) 
```

或者您可以将其作为*第一个*参数包含在 QUERY 语句中：

```
=QUERY(test(A1:A10);"select Col1 where Col1 contains 'x'") 
```

# iphone - 更改 UITableView 的大小并将按钮放在它下面

> ID：11194438
> 
> 赞同：0
> 
> 时间：2012-06-25T17:40:07.830
> 
> 标签：iphone, objective-c, xcode, uitableview, uibutton

我正在尝试缩短 UITableView 的高度并在下方放置一个按钮。我尝试使用此代码：

```
// set the frame size
CGRect frame = self.view.frame;
frame.size.height = 355;
self.view.frame = frame;

//set up the button
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
           action:@selector(buttonPress:)
 forControlEvents:UIControlEventTouchUpInside];
[button setTitle:@"Add to Current Workout" forState:UIControlStateNormal];
button.frame = CGRectMake(20, 365, 280, 40);
[self.view addSubview:button]; 
```

在 viewDidAppear 方法中，但所发生的只是视图变短了，当我向下滚动时，按钮覆盖了我的一个单元格（它也随着 tableview 滚动）。如何更改 tableview 的高度并在视图下方有一个按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:45:11.997

根据文档，self.view 返回“最初发生触摸的视图”。要更改 tableView，您将需要使用 self.tableView，它返回“由控制器对象管理的 tableView”，假设您在 TableViewController 中执行此操作。更改第一行和第三行：

```
CGRect frame = self.tableView.frame;
frame.size.height = 355;
self.tableView.frame = frame; 
```

要让按钮出现在 tableView 下，根据[这个问题](https://stackoverflow.com/questions/1456668/uibutton-underneath-grouped-table-view)，您可以将其设置为 tableView 的 tableFooterView。所以将最后一行更改为：

```
self.tableView.tableFooterView = button; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:46:16.203

您需要减小表格视图的大小，而不是整个视图（就像您当前所做的那样）。

应该是`self.tableView.frame = frame`（其中 tableview 是您的 UITableView 的名称）。

# smartgwt - 对于我的简单用例，我应该研究哪些 SmartGWT 组件？

> ID：11194440
> 
> 赞同：0
> 
> 时间：2012-06-25T17:40:22.460
> 
> 标签：smartgwt, smartclient

我的用例是一个单页网站。在页面上，应该有三个“框架”。一帧列出所有用户。此框架仅供管理员查看。选择用户会触发填充第二帧的操作 - 用户的所有记录事务都显示在第二帧中。如果非管理员用户登录，则第二帧将填充他的事务日志信息。现在第二个窗口中的信息是基本的 - 交易 ID 和日期，所以第三个框架包含完整的交易详细信息（自然，在用户/管理员从第二个框架中选择一个交易之后）用户可以看到并且管理员可以编辑并保存。就是这样。

从数据库的角度来看，每个事务都有完整的用户信息而不是 ID 作为外键，这意味着为了填充第一帧，我需要在用户字段上创建一个 Group by 表达式，以便我可以获得唯一用户. 在下一步中，我只获取所选用户的所有事务（ID 和日期信息），在第三步中，我获取完整行。

如果这太琐碎了，我很抱歉，我不是要求手牵手，我只想得到一个我可以使用的组件列表，因为 SmartGWT 展示中有很多组件，我不会想要“浪费”时间试图在有更好的可用组件时强制组件做某事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:33:58.437

根据您的描述，以尽可能简单的方式执行此操作的一种可能方法是通过 HLayout 和 VLayout 对象的组合用于布局，ListGrid 对象用于以表格格式显示信息和数据源，以检索并保存在数据库中的数据中。如果您更喜欢树状表示，则应查看 TreeGrid，它基本上是 ListGrid，其数据具有树表示。Button 和 Label 类等其他对象也很方便，SC 对象及其静态方法可用于向用户弹出窗口。

# javascript - 第一次在现场 Jquery 加载样式

> ID：11194442
> 
> 赞同：1
> 
> 时间：2012-06-25T17:40:30.843
> 
> 标签：javascript, jquery, local-storage

因此，当您第一次访问我的页面时，我正在尝试加载一个名为**one.css的默认样式表。**除此之外，我是能够选择主题的用户。我的逻辑的问题是，当您切换到另一种样式时， one.css 似乎正在重置本地存储，就好像这是您第一次访问该网站一样。

是的，我确实意识到逻辑是错误的，希望有人能理清我正在尝试做的事情。

```
var firstRun = (localStorage['styler'] == 'one');

if (!firstRun) {
  localStorage['styler'] = 'one';
  var style = localStorage["styler"];
  $('<link rel="stylesheet" type="text/css" href="'+style + '.css">').appendTo("head");
}   

else{
 var style = localStorage["styler"];
  $('<link rel="stylesheet" type="text/css" href="'+style + '.css">').appendTo("head");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:51:26.667

我认为您正在寻找：

```
var style = localStorage['styler'];

if (typeof style === 'undefined'){
   style = 'one';
   localStorage['styler'] = style;
   $('<link rel="stylesheet" type="text/css" href="'+ style + '.css">').appendTo("head");
}
else{
   $('<link rel="stylesheet" type="text/css" href="'+ style + '.css">').appendTo("head");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:54:00.040

你总是有变量 style == "one"

```
var firstRun = (localStorage['styler'] == 'one');

if (!firstRun) {
  var style = localStorage["styler"];
  if(typeof style === 'undefined') style = 'two'
  $('<link rel="stylesheet" type="text/css" href="'+style + '.css">').appendTo("head");
  localStorage['styler'] = 'one';
}   

else{
  var style = localStorage["styler"];
  $('<link rel="stylesheet" type="text/css" href="'+style + '.css">').appendTo("head");
} 
```

# ios - ViewController 中的 tableView 实例

> ID：11194446
> 
> 赞同：0
> 
> 时间：2012-06-25T17:40:40.713
> 
> 标签：ios, uitableview, uiviewcontroller

在上周的洞中，我使用了 tableviews。对于像我这样的初学者来说，这是非常困难的事情。我可以自己解决的大多数问题。但是还有一件事我没有解决。我的问题：我如何将工作表视图实现为关于 ViewController 中实例的子视图？我发布了我用过的代码。Table 类很好，如果我直接在 ViewController 中设置它就没有问题。但是，如果我想在 ViewController 中设置为子视图，我可以看到它显示并且我可以滚动它，但下拉部分什么也不做。我知道我必须对委托做一些事情，但我不知道具体是什么。

有我的代码：

* * *

表.h

```
#import <UIKit/UIKit.h>

@interface Table : UITableViewController{
    UITableView *table; 
    NSString *dataForSection0;
    NSString *dataForSection2;
    NSMutableArray *demoData;
    int selectedValueIndex;
    bool isShowingList;
}

@property (retain, nonatomic) NSString *dataForSection0;
@property (retain, nonatomic) NSString *dataForSection2;
@property (retain, nonatomic) NSMutableArray *demoData;
@property (nonatomic) int selectedValueIndex;
@property (nonatomic) bool isShowingList;

@end 
```

表.m

```
#import "Table.h"

@interface Table ()

@end

@implementation Table
@synthesize dataForSection0;
@synthesize dataForSection2;
@synthesize demoData;
@synthesize selectedValueIndex;
@synthesize isShowingList;

- (void)viewDidLoad
{
    [super viewDidLoad];

    dataForSection0 = @"This is some cell content.";
    dataForSection2 = @"This is another cell content.";

     demoData = [[NSMutableArray alloc] init];
    [demoData addObject:@"One"];
    [demoData addObject:@"Two"];
    [demoData addObject:@"Three"];
    [demoData addObject:@"Four"];
    [demoData addObject:@"Five"];

    isShowingList = NO;
    selectedValueIndex = 0;

}

- (void)viewDidUnload
{
    [self setDataForSection0:nil];
    [self setDataForSection2:nil];
    [self setDemoData:nil];
    [super viewDidUnload];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    return 3;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{
    if (section == 0) {
        return @"My first section";
    }
    else if (section == 1){
        return @"My demo section";
    }
    else{
        return @"Another section";
    }
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 60.0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    if (section == 0 || section == 2) {
        return 1;
    }
    else{
        if (!isShowingList) {
            return 1;
        }
        else{
            return [demoData count];
        }
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.selectionStyle = UITableViewCellSelectionStyleBlue;
    cell.accessoryType = UITableViewCellAccessoryNone;

    [[cell textLabel] setFont:[UIFont fontWithName:@"Marker Felt" size:16.0]];

    if ([indexPath section] == 0) {

        [[cell textLabel] setText:dataForSection0];
    }
    else if ([indexPath section] == 2){

        [[cell textLabel] setText:dataForSection2];
    }
    else{
        if (!isShowingList) {

            [[cell textLabel] setText:[demoData objectAtIndex:selectedValueIndex]];

            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }
        else{
            [[cell textLabel] setText:[demoData objectAtIndex:[indexPath row]]];

            if ([indexPath row] == selectedValueIndex) {
                cell.accessoryType = UITableViewCellAccessoryCheckmark;
            }
            else{
                cell.accessoryType = UITableViewCellAccessoryNone;
            }
        }
    }

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    if ([indexPath section] == 1) {

        if (isShowingList) {
            selectedValueIndex = [indexPath row];
        }       

        isShowingList = !isShowingList;

        [table reloadSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationFade];
    }
    else{
        return;
    }

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

@end 
```

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "Table.h"

@interface ViewController : UIViewController {

    Table *table;
}

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    table = [[Table alloc] initWithStyle:UITableViewStyleGrouped];
    CGRect viewFrame = self.view.frame;
    viewFrame = CGRectMake(50, 50, 300, 800);
    table.view.frame = viewFrame;
    [self.view addSubview:table.view];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:17:08.777

在将 Tables 视图添加为子视图之前尝试调用 loadView 函数。

```
table = [[Table alloc] initWithStyle:UITableViewStyleGrouped];
CGRect viewFrame = self.view.frame;
viewFrame = CGRectMake(50, 50, 300, 800);
table.view.frame = viewFrame;
[table loadView];
[self.view addSubview:table.view]; 
```

# django - 我需要按照这些步骤将 Django 连接到 postgreSQL 吗？

> ID：11194447
> 
> 赞同：0
> 
> 时间：2012-06-25T17:40:42.677
> 
> 标签：django, postgresql

这里是[参考教程](http://blog.iiilx.com/programming/how-to-install-postgres-on-ubuntu-for-django/)

我是否需要创建 django_login 并编辑文件以获得许可？我刚刚安装`psycopg2`并编辑了`settings.py`.

到目前为止，我似乎可以插入数据库并阅读。所以我想我不需要？我该如何检查？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:00:21.960

参考中概述的这些步骤说明了如何设置新的 postgreSQL 以与 django 一起使用，假设您进行了全新安装并且没有设置用户。

如果您在特权帐户下运行，例如 root，那么您可能需要做的设置较少才能使其正常运行。但是，guide 存在的原因显然是因为您必须创建一个初始数据库，授予用户访问权限，然后将数据库名称、用户和密码添加到您的设置中。

简而言之，我会说通常**是**的，这个过程是必要的。但是*在你开始使用 django 之前我不知道你的环境是什么，所以可能* **没有**。

如果您可以通过 django 成功读取/写入该数据库，那么我敢打赌您已经完成了。

# php - 使用 android,php,mysql 插入数据库

> ID：11194452
> 
> 赞同：0
> 
> 时间：2012-06-25T17:40:55.863
> 
> 标签：php, android, mysql

这是我的代码，我需要插入 mysql 数据库我有 mysql,php,android

1）我遇到的问题，我需要一个成功的结果到我的php，这样我就可以使用android.so插入我的php代码：

2）我正在使用的表有一个外键 : `Provinces_idProvinces`。

```
 $result = mysql_query("INSERT INTO property( Pname, P_Price,P_Desc,P_City, P_Size,P_Rooms, P_garage, P_Address, P_Long, P_Lat, Provinces_idProvinces)  
VALUES('$_POST[Pname]',$_POST[P_Price],'$_POST[P_Desc]','$_POST[P_City]','$_POST[P_Size]','$_POST[P_Rooms]',$_POST[P_garage],'$_POST[P_Address]',$_POST[P_Long],$_POST[P_Lat],$_POST[Provinces_idProvinces])");

 if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = $result ;

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        echo $response["success"];

        // echoing JSON response
        echo json_encode($response);
    } 
```

还有我传递参数的类，但它给了我一个错误：

```
List<NameValuePair> params = new ArrayList<NameValuePair>();
          Log.d("Parameters","1");
          params.add(new BasicNameValuePair("Pname",Pname));
          params.add(new BasicNameValuePair("P_Price",Prices));        
          params.add(new BasicNameValuePair("P_Desc",Desc));
          params.add(new BasicNameValuePair("P_City",city));
          params.add(new BasicNameValuePair("P_Size",Size));
          params.add(new BasicNameValuePair("P_Rooms",bedNumber));
          params.add(new BasicNameValuePair("P_garage",Garnums));
          params.add(new BasicNameValuePair("P_Address",Address));
          params.add(new BasicNameValuePair("P_Long",longertude));
          params.add(new BasicNameValuePair("P_Lat",lattitude));
          params.add(new BasicNameValuePair("Provinces_idProvinces",Provnums));

          Log.d("Json","obj");
       // getting JSON Object
          // Note that create product url accepts POST method

          JSONObject json = jsonParser.makeHttpRequest(save_prop,
                  "POST", params);
          // check log cat fro response
          Log.d("Create Response", json.toString()); 
```

由于 php 返回的值 0，我在 JSON 中遇到错误， **我不知道如何解决这个问题**

这里是我的 logCat ：

```
06-25 19:36:40.175: E/JSON Parser(2261): Error parsing data org.json.JSONException: Value 0 of type java.lang.Integer cannot be converted to JSONObject
06-25 19:36:40.175: W/dalvikvm(2261): threadid=10: thread exiting with uncaught exception (group=0x40014760)
06-25 19:36:40.236: E/AndroidRuntime(2261): FATAL EXCEPTION: AsyncTask #1
06-25 19:36:40.236: E/AndroidRuntime(2261): java.lang.RuntimeException: An error occured while executing doInBackground()
06-25 19:36:40.236: E/AndroidRuntime(2261):     at android.os.AsyncTask$3.done(AsyncTask.java:266) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:47:24.153

```
 Error parsing data org.json.JSONException: Value 0 of type java.lang.Integer cannot be converted to JSONObject 
```

在您的代码中的某处，您尝试将整数值转换为 JSONObject。

看来这段代码是罪魁祸首

```
 JSONObject json = jsonParser.makeHttpRequest(save_prop,
                  "POST", params); 
```

确保您的 php 响应是 JSONObject 而不是“整数”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:52:58.653

**编辑：**只需删除`echo $response["success"];`.

您不应该像以前那样打印结果。我假设这就是您使用该请求访问服务器时的结果...

```
0{"results":"..."} 
```

您收到此错误是因为结果（如上所示）在 Android 端被用作 JSON 对象。上面的结果不是有效的 JSON 格式，因此会引发异常。所以我的建议是修改你的 PHP 以返回看起来像......

```
{"success":0,"results":"..."} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:49:07.033

很抱歉，我没有回答您的问题，但我注意到您的 PHP 代码容易受到 SQL 注入攻击，因为您没有在 SQL 查询中转义 POST 变量。更好的是：您应该使用准备好的语句。

# cookies - jstree cookie 功能产生空 cookie

> ID：11194454
> 
> 赞同：0
> 
> 时间：2012-06-25T17:41:02.803
> 
> 标签：cookies, href, jstree

我正在使用 jstree 1.0，除了维护页面之间的树状态外，一切都很好。

代码是：

```
$(document).ready(function(){
$("#treeview").jstree({
    "themes" : {
        "theme" : "default",
        "dots" : false,
        "icons" : false
    },
    "cookies": { "cookie_options" : { path : "/" } },
    "ui" : {
            "selected_parent_close" : "false"
    },
    "core": { 
                "animation": 500
            },
    "plugins" : [ "themes", "html_data", "ui", "cookies" ]

}).bind("select_node.jstree", function(e, data)
    {
        var href = data.rslt.obj.children("a").attr("href");
        $("#contents").load(href);
        if (Right(window.location.href,href.length) == [href])  {
            return;
            }
        else {
            window.location=[href];  
        }
    }) 
```

});

当我检查实际的 cookie 时，它​​们是空的，我不确定为什么不这样做。树项目链接到其他页面的事实似乎意味着树在接收到单击 LI 的事件之前导航离开，因此没有任何内容写入 cookie。我提到了树代码[的](https://stackoverflow.com/questions/4880364/jstree-nodes-dont-work-when-ui-plugin-is-used)另一个stackoverflow答案。我为每个 LI 使用一个 ID。

如果您可以在此处看到问题以及如何将树状态信息写入 cookie，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:55:43.493

修复了问题。结果是在我的 UL 中定义 id 时出现语法错误。浪费了几个小时，但是当它起作用时是值得的。

# constructor - 强制 ANTLR 在解析器中使用我的自定义 TreeAdaptor

> ID：11194458
> 
> 赞同：3
> 
> 时间：2012-06-25T17:41:12.193
> 
> 标签：constructor, antlr

ANTLR 解析器生成以下生成的代码：

```
protected TreeAdaptor adaptor = new CommonTreeAdaptor(); 
```

我已经实现了自己的 TreeAdaptor，并且我希望解析器始终使用我的并且从不使用 CommonTreeAdaptor()。我发现的唯一方法是每次创建新解析器时将其设置在调用代码中：

```
Parser parser = new MyParser();
parser.setTreeAdaptor(new MyAdaptor()); 
```

有什么方法可以设置默认的 TreeAdaptor 或将一些初始化代码附加到生成的构造函数中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:46:57.593

> 有什么方法可以设置默认的 TreeAdaptor 或将一些初始化代码附加到生成的构造函数中？

一种方法是添加一个设置自定义树适配器的静态方法：

```
grammar T;

options {
  output=AST;
  ASTLabelType=CommonTree;
}

@parser::members {

  public static TParser newTParser(TreeNodeStream input) {
    TParser parser = new TParser(input);
    parser.setTreeAdaptor(new MyAdaptor());
    return parser;
  }
}

parse
 : Any* EOF
 ;

Any
 : .
 ; 
```

然后你可以替换：

```
TParser parser = new TParser(input); 
```

和

```
TParser parser = TParser.newTParser(input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:10:31.503

我想我找到了比 Bart 的命名构造方法更好的解决方案。

我无法直接修改生成的构造函数（包括将其设为私有，这就是我不喜欢命名构造函数解决方案的原因）。但是，我可以引入一个初始化块：

```
grammar T;

options {
  output=AST;
  ASTLabelType=CommonTree;
}

@parser::members {
    {
        this.adaptor = new MyAdaptor();
    }
} 
```

根据[Java 文档](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html "初始化字段")，“Java 编译器将初始化程序块复制到每个构造函数中。因此，这种方法可用于在多个构造函数之间共享代码块。”

所以`this.adaptor`将首先`new CommonTreeAdaptor()`由生成的代码设置，然后`new MyAdaptor()`由我的初始化块设置。测试证实这是实际发生的情况。

这个解决方案的优点是我的解析器的调用者不需要知道它正在使用自定义 TreeAdaptor 或做任何不寻常的事情（我的适配器是 CommonTreeAdaptor 的子类，所以任何依赖它的代码都可以）。

# c# - 如何确定缺少哪些辅助文件？

> ID：11194459
> 
> 赞同：0
> 
> 时间：2012-06-25T17:41:23.180
> 
> 标签：c#, .net, windows, winforms, networking

如果我从网络驱动器右键单击我的应用程序并选择运行方式 | 当前用户，应用程序是否运行取决于我是否单击子复选框（“保护我的计算机和数据免受未经授权的程序活动”）。

如果我确实选择了“保护我的计算机...”复选框，然后选择“确定”按钮，我会得到“无法找到运行此应用程序的运行时版本”。

但是，如果我取消选中该复选框，它运行正常。

因此，.NET 运行时显然被认为是“未经授权的程序活动”。

如果我从另一个用户的机器上从同一个地方（既不是我的也不是用户的 C: 驱动器的映射驱动器上的文件夹）运行这个应用程序，它根本不会启动，并给我一个 iofileloadexception 错误。但是 AFAIK，应用程序所需的 .DLL 已复制到映射驱动器的文件夹，以及启动过程引用的文本文件。是否有工具可以显示需要使用 Visual Studio (2010) 创建的 C# .exe 分发哪些辅助文件？IOW，这样的工具应该告诉我我需要 log4net.dll、自定义内部框架 .DLL 和上述文本文件。或许还有一些其他的东西，当部署时，它会允许应用程序在用户的机器上运行。

## 更新

好的，我想我可能正在“步入正轨”，因为我能够确定需要使用给定的 .exe 部署哪些文件：

如果您选择项目 | 属性 | 发布 | Visual Studio 中的应用程序文件，它似乎向您显示了您需要与您的应用程序一起部署的文件。但是，仍然存在一些问题（在下面的括号中注明；以及最后的重磅炸弹）：

```
EXE and related files:

1) <appName>.exe (duh, AKA "doh")
2) <appName>.exe.config
3) <appName>.exe.manifest (I have no such file - although I do have a file named
<appName>.vshost.exe.manifest; should I rename it by stripping out the "vshost" part of the name?)
4) <appName>.ico

DLLs:

Any non-native DLLs your project uses, such as (in this case):

<customFrameworkAssembly>.dll
log4net.dll
Devart.Data.dll
Devart.Data.Oracle.dll 
```

但是，它没有解释为什么我能够从另一个开发人员的机器上运行该应用程序（即使这些文件尚未部署到共享网络目录）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:50:13.603

您需要部署的文件可以从 Visual Studio 中的项目中通过选择 Project | 查看。属性 | 发布 | 申请文件...

一旦你将它们移动到与 .exe 相同的位置，世界就一切正常了（好吧，无论如何，这只是你小世界的一小部分）。

# php - 如何使用带有 json 的选择下拉菜单

> ID：11194464
> 
> 赞同：0
> 
> 时间：2012-06-25T17:41:44.413
> 
> 标签：php, json, select

我想有一个带有这个脚本的选择下拉菜单：[LINK](http://www.marghoobsuleman.com/jquery-image-dropdown)

我有一个脚本，它已经在为我制作 json 格式的数据，我想用同一个来填充 2 个菜单。例如，我想要 2 个菜单，它们将具有`driver`和`cars`

这是脚本：

```
echo '{ "results" : [ ';

$gettruck_result = dbMySql::Exec(.........query.........);
$result_array = array();

while($row = mysql_fetch_assoc($gettruck_result)){

  $row_object = '{';
  $row_object .= '"id": "' . $row['id'] . '", ';
  $row_object .= '"driver": "' . $row['drivers'] . '", ';
  $row_object .= '"trucks": "' . $row['trucks'] . '", ';
  $row_object .= '}';    
  $result_array[] = $row_object;
}
$result_str = implode(", ", $result_array);
echo $result_str;
echo " ] }";
?> 
```

这就是他们在文档中的内容：

```
[{text:'Lorem', value:'5', title:'icons/enabled.gif'},{text:'Ipsum', value:'6',title:'icons/enabled.gif'}] 
```

我想有类似的东西： 1.当你加载司机的：`text`应该是司机的名字，`value`应该是 id 并且`title`会是一些图片 2.当你加载卡车时：`text`应该是卡车的名字，`value`应该是 id 并且`title`是不同的图标。

我可以同时调用脚本一次吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:52:02.407

您知道有一个 php 函数可以将对象/数组编码为 json 吗？

json_encode [http://www.php.net/json_encode](http://www.php.net/json_encode)

我认为最简单的方法是：1）提供这样的nestedjson结构：

```
drivers {
    text: 'Lorem',
    value: '5',
    title: 'icons/enabled.gif',
    trucks: {
        text: 'Ipsum',
        value: '4',
        title: 'icons/foo.gif',

... 
```

2) 另一种选择是在用户选择驱动程序时进行 ajax 调用。此 ajax 调用的返回包含该特定驱动程序的所有卡车。

# perl - 请解释语法

> ID：11194469
> 
> 赞同：-2
> 
> 时间：2012-06-25T17:42:01.417
> 
> 标签：perl, syntax

我正在寻找解释以下语法的帮助。我检查了我的 Perl 书，并在网上查了一下。

我正在寻找以下内容：

```
$option =~ s/\s+//g
$option =~ m/^\s*$ 
```

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T17:47:44.127

`s`并且`m`是将[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)应用于字符串的运算符。[`s///`](http://perldoc.perl.org/functions/s.html)是替换运算符并且[`m//`](http://perldoc.perl.org/functions/m.html)是匹配运算符。他们都将正则表达式作为他们的第一个论点（在 内`//`）。`=~`告诉 Perl 使用/匹配正则表达式与`$option`. 有关[`perlre`](http://perldoc.perl.org/perlre.html)详细信息，请参阅。

以下是这些正则表达式的作用：

```
use warnings;
use strict;
use YAPE::Regex::Explain;
print YAPE::Regex::Explain->new( qr/\s+/ )->explain;

The regular expression:

(?-imsx:\s+)
matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  \s+                      whitespace (\n, \r, \t, \f, and " ") (1 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

简而言之：它将具有多个空白字符的每个实例替换为空。

和：

```
print YAPE::Regex::Explain->new( qr/^\s*$/ )->explain; 
```

正则表达式：

```
(?-imsx:^\s*$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  \s*                      whitespace (\n, \r, \t, \f, and " ") (0 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

如果字符串仅包含空格字符，则匹配。尽可能多，但至少为零，仅此而已。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T17:47:53.600

嗯，第一个表达式是一个`s`（替换），它查找一个或多个空格并消除它们。指定`+`一个或多个空格 ( `\s`) 字符。

第二个看起来`m`（匹配）一个空行。锚点 tje 匹配到行的`^`开头和`$`结尾。因此，只有包含零个或多个（即`*`）空格的行才能成功匹配。

两个表达式都对`$option`变量进行操作，因为`=~`将它们绑定到它。

# ios - iOS App 在方法调用时崩溃

> ID：11194470
> 
> 赞同：0
> 
> 时间：2012-06-25T17:42:10.763
> 
> 标签：ios, ipad, debugging, memory-management, crash

我在 iOS 中有一个应用程序，当我调用特定方法（程序中的任何位置）但在该方法开始执行之前崩溃。我`NSLog`在方法的最顶部放置了一个，它会输出一条在应用程序崩溃之前不会发送的消息。

只要在程序中的任何位置引用此方法，应用程序就会崩溃。方法名称是`-(void) LaunchReel;` ，我也（显然）将它包含在我的头文件中。程序因`EXC_BAD_ACCESS`错误而崩溃并引用整数数据类型。

它在**0 objc_msgSend 线程中崩溃，并且在****2 __CFStringAppendFormatCore**线程中也出现此错误。我不知道为什么会这样。这可能是一个可能挂起的调试器进程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:40:43.853

当这发生在我身上时，这是因为我的代码需要一种类型的对象并且正在获取另一种类型的对象。例如，您将参数传递给 NSNumber 类型的函数，但该函数需要 NSString，因此当它尝试使用 CFStringAppendFormatCore 格式化字符串时，应用程序崩溃。

当遇到这样的错误时，请确保对象是您期望的类型。

# hadoop - hadoop 集群是否应该在相同的硬件上运行？

> ID：11194472
> 
> 赞同：10
> 
> 时间：2012-06-25T17:42:16.907
> 
> 标签：hadoop

我记得在某处读到过，如果运行 Hadoop 的机器彼此非常不同，它的性能会显着下降，但我似乎再也找不到那个评论了。我正在考虑在一组不由我的组直接管理的 VM 上运行 Hadoop 集群，我需要知道这是否是我应该在我的请求中提出的要求。

那么，我应该坚持我的所有机器都具有相同的硬件，还是可以在不同硬件配置的不同机器上运行？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T17:57:08.310

以下论文描述了异构集群如何影响 hadoop map-reduce 的性能：

> 在异构集群中，节点的计算能力可能会有很大差异。高速节点可以比低速节点更快地完成处理存储在节点本地磁盘中的数据。在快速节点完成其本地输入数据的处理后，该节点必须通过处理位于一个或多个远程慢速节点中的未处理数据来支持负载分担。当由于负载共享而传输的数据量非常大时，将未处理的数据从慢速节点移动到快速节点的开销成为影响 Hadoop 性能的关键问题。

以下参考资料有更多详细信息：

1.  [http://computerresearch.org/stpr/index.php/gjcst/article/view/749/658](http://computerresearch.org/stpr/index.php/gjcst/article/view/749/658)
2.  [http://www.usenix.org/event/osdi08/tech/full_papers/zaharia/zaharia.pdf](http://www.usenix.org/event/osdi08/tech/full_papers/zaharia/zaharia.pdf)

它还提供了可以提高异构集群性能或避免这种性能损失的方法。

明智地建议您在集群上拥有同质机器，但如果这些机器没有完全不同的规格和性能差异，您应该继续构建集群。

对于生产系统，您应该建议使用同质机器。对于开发，性能并不重要。

但是，您应该能够在构建 Hadoop 集群后对其进行基准测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T14:33:02.597

同质集群当然是理想的，但并非绝对必要。例如，Yahoo!, Inc. 在其生产环境中运行异构集群。通过与那里的研究人员的交谈，他们发现由于调度问题而导致性能受到影响（一个足够大的影响，他们正在努力将性能感知调度添加到他们的工具中），但惩罚并不严重。

# asp.net - IE9 标准模式元标记

> ID：11194476
> 
> 赞同：3
> 
> 时间：2012-06-25T17:42:41.913
> 
> 标签：asp.net, html, meta-tags

我使用 jquery ui 选项卡，它对我来说在 IE9 上正常工作。

我该如何解决？

我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<meta http-equiv="x-ua-compatible" content="ie=edge" /> 
```

ie9 给出错误：

```
HTML1115: X-UA-Compatible META tag ('IE=EmulateIE7') ignored because document mode is already finalized. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:30:02.353

您可以尝试在没有 Quirks 模式的情况下使用 IE9。

```
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> 
```

# azure - Azure REST API 创建容器，.NET 客户端配置文件，403 禁止，找到的 MAC 签名与任何计算的签名不同

> ID：11194481
> 
> 赞同：5
> 
> 时间：2012-06-25T17:43:27.140
> 
> 标签：azure, azure-storage

在阅读了所有接近此的帖子之后，我仍然找不到解决方案，并且在“摆弄”了几个小时之后，这里有一个帖子，希望有人有一个想法：

我找到的最接近的回复是 [here](https://stackoverflow.com/questions/4612693/getting-403-forbidden-webexception-for-azure-blob-put-request)

但是这些帖子中有两件事不适用：1.我使用的示例代码在大多数情况下肯定有效。2\. 我无权访问任何 Azure StorageClient 简化程序，因为我需要使用 .NET 客户端配置文件。3\. 这可能是一个愚蠢的错误，我只是没有看到 :-)

这是电话：

```
// Create Blob
// using REST: http://msdn.microsoft.com/en-us/library/windowsazure/dd135733.aspx
BlobHelper blobHelper = new BlobHelper(_storageAccountName, _storageKey);
Console.WriteLine("Create container...");
if (!blobHelper.CreateContainer("mytestcontainer")) //(blobInfo.ContainerName))
   {
     Console.WriteLine("REST: Create Blob Failed");
   } 
```

这是电汇请求（提琴手）：

```
PUT /devstoreaccount1/mytestcontainer?restype=container HTTP/1.1
x-ms-date: Mon, 25 Jun 2012 16:54:01 GMT
x-ms-version: 2009-09-19
Authorization: SharedKey devstoreaccount1:REpHdtTSQrwGtXuEbLJmRQdpe/j2l5icmGUeFkQ09jw=
Host: 127.0.0.1:10000
Content-Length: 0
Connection: Keep-Alive 
```

无论我使用实时 Azure 存储还是开发人员存储，都会发生同样的事情。

以下是电汇回复：

```
HTTP/1.1 403 Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.
Content-Length: 698
Content-Type: application/xml
Server: Microsoft-HTTPAPI/2.0
x-ms-request-id: d5430ddc-f146-4102-b8db-a8bfab0ed82f
Date: Mon, 25 Jun 2012 16:54:00 GMT

<?xml version="1.0" encoding="utf-8"?><Error><Code>AuthenticationFailed</Code><Message>Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.
RequestId:d5430ddc-f146-4102-b8db-a8bfab0ed82f
Time:2012-06-25T16:54:01.3354093Z</Message><AuthenticationErrorDetail>The MAC signature found in the HTTP request 'REpHdtTSQrwGtXuEbLJmRQdpe/j2l5icmGUeFkQ09jw=' is not the same as any computed signature. Server used following string to sign: 'PUT

0

x-ms-date:Mon, 25 Jun 2012 16:54:01 GMT
x-ms-version:2009-09-19
/devstoreaccount1/devstoreaccount1/mytestcontainer
restype:container'.</AuthenticationErrorDetail></Error> 
```

不用说，这让我发疯，所以任何提示都表示赞赏。

源代码，直接来自 Azure 存储[REST API 示例](http://azurestoragesamples.codeplex.com/releases/view/61325)RESTHelper.cs。这适用于许多场景，但不是这个：

```
 #region REST HTTP Request Helper Methods

    // Construct and issue a REST request and return the response.

    public HttpWebRequest CreateRESTRequest(string method, string resource, string requestBody = null, SortedList<string, string> headers = null, 
        string ifMatch = "", string md5 = "")
    {
        byte[] byteArray = null;
        DateTime now = DateTime.UtcNow;
        string uri = Endpoint + resource;

        HttpWebRequest request = HttpWebRequest.Create(uri) as HttpWebRequest;
        request.Method = method;
        request.ContentLength = 0;
        request.Headers.Add("x-ms-date", now.ToString("R", System.Globalization.CultureInfo.InvariantCulture));
        request.Headers.Add("x-ms-version", "2009-09-19"); //2009-09-19, 2011-08-18

        if (IsTableStorage)
        {
            request.ContentType = "application/atom+xml";

            request.Headers.Add("DataServiceVersion", "1.0;NetFx");
            request.Headers.Add("MaxDataServiceVersion", "1.0;NetFx");
        }

        if (headers != null)
        {
            foreach (KeyValuePair<string, string> header in headers)
            {
                request.Headers.Add(header.Key, header.Value);
            }
        }

        if (!String.IsNullOrEmpty(requestBody))
        {
            request.Headers.Add("Accept-Charset", "UTF-8");

            byteArray = Encoding.UTF8.GetBytes(requestBody);
            request.ContentLength = byteArray.Length;
        }

        request.Headers.Add("Authorization", AuthorizationHeader(method, now, request, ifMatch, md5));

        if (!String.IsNullOrEmpty(requestBody))
        {
            request.GetRequestStream().Write(byteArray, 0, byteArray.Length);
        }

        return request;
    }

    // Generate an authorization header.
    //RHT: http://msdn.microsoft.com/en-us/library/dd179428.aspx

    public string AuthorizationHeader(string method, DateTime now, HttpWebRequest request, string ifMatch = "", string md5 = "")
    {
        string MessageSignature;

        if (IsTableStorage)
        {
            MessageSignature = String.Format("{0}\n\n{1}\n{2}\n{3}",
                method,
                "application/atom+xml",
                now.ToString("R", System.Globalization.CultureInfo.InvariantCulture),
                GetCanonicalizedResource(request.RequestUri, StorageAccount)
                );
        }
        else
        {
            MessageSignature = String.Format("{0}\n\n\n{1}\n{5}\n\n\n\n{2}\n\n\n\n{3}{4}",
                method,
                (method == "GET" || method == "HEAD") ? String.Empty : request.ContentLength.ToString(),
                ifMatch,
                GetCanonicalizedHeaders(request),
                GetCanonicalizedResource(request.RequestUri, StorageAccount),
                md5
                );
        }
        byte[] SignatureBytes = System.Text.Encoding.UTF8.GetBytes(MessageSignature);
        System.Security.Cryptography.HMACSHA256 SHA256 = new System.Security.Cryptography.HMACSHA256(Convert.FromBase64String(StorageKey));
        String AuthorizationHeader = "SharedKey " + StorageAccount + ":" + Convert.ToBase64String(SHA256.ComputeHash(SignatureBytes));
        return AuthorizationHeader;
    }

    // Get canonicalized headers.

    public string GetCanonicalizedHeaders(HttpWebRequest request)
    {
        ArrayList headerNameList = new ArrayList();
        StringBuilder sb = new StringBuilder();
        foreach (string headerName in request.Headers.Keys)
        {
            if (headerName.ToLowerInvariant().StartsWith("x-ms-", StringComparison.Ordinal))
            {
                headerNameList.Add(headerName.ToLowerInvariant());
            }
        }
        headerNameList.Sort();
        foreach (string headerName in headerNameList)
        {
            StringBuilder builder = new StringBuilder(headerName);
            string separator = ":";
            foreach (string headerValue in GetHeaderValues(request.Headers, headerName))
            {
                string trimmedValue = headerValue.Replace("\r\n", String.Empty);
                builder.Append(separator);
                builder.Append(trimmedValue);
                separator = ",";
            }
            sb.Append(builder.ToString());
            sb.Append("\n");
        }
        return sb.ToString();
    }

    // Get header values.

    public ArrayList GetHeaderValues(NameValueCollection headers, string headerName)
    {
        ArrayList list = new ArrayList();
        string[] values = headers.GetValues(headerName);
        if (values != null)
        {
            foreach (string str in values)
            {
                list.Add(str.TrimStart(null));
            }
        }
        return list;
    }

    // Get canonicalized resource.

    public string GetCanonicalizedResource(Uri address, string accountName)
    {
        StringBuilder str = new StringBuilder();
        StringBuilder builder = new StringBuilder("/");
        builder.Append(accountName);
        builder.Append(address.AbsolutePath);
        str.Append(builder.ToString());
        NameValueCollection values2 = new NameValueCollection();
        if (!IsTableStorage)
        {
            //Uri.EscapeDataString(...)
            //WebUtility.HtmlEncode(...)     
            //https://stackoverflow.com/questions/36315/alternative-to-httputility-for-net-3-5-sp1-client-framework
            //NameValueCollection values = HttpUtility.ParseQueryString(address.Query);
            //foreach (string str2 in values.Keys)
            //{
            //    ArrayList list = new ArrayList(values.GetValues(str2));
            //    list.Sort();
            //    StringBuilder builder2 = new StringBuilder();
            //    foreach (object obj2 in list)
            //    {
            //        if (builder2.Length > 0)
            //        {
            //            builder2.Append(",");
            //        }
            //        builder2.Append(obj2.ToString());
            //    }
            //    values2.Add((str2 == null) ? str2 : str2.ToLowerInvariant(), builder2.ToString());
            //}
        }
        ArrayList list2 = new ArrayList(values2.AllKeys);
        list2.Sort();
        foreach (string str3 in list2)
        {
            StringBuilder builder3 = new StringBuilder(string.Empty);
            builder3.Append(str3);
            builder3.Append(":");
            builder3.Append(values2[str3]);
            str.Append("\n");
            str.Append(builder3.ToString());
        }
        return str.ToString();
    }

    #endregion 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:01:18.863

谢谢斯马克斯，

确实，令人大开眼界，它使我找到了解决方案：

.NET 客户端配置文件缺少 HttpUtility，因此我将其替换为未提供构建器所需格式的正则表达式。所以，我用这个替换了它：

[http://google-gdata.googlecode.com/svn/trunk/clients/cs/src/core/HttpUtility.cs](http://google-gdata.googlecode.com/svn/trunk/clients/cs/src/core/HttpUtility.cs)

它有效。这是标题现在的样子：

```
PUT /devstoreaccount1/mytestcontainer?restype=container HTTP/1.1
x-ms-date: Mon, 25 Jun 2012 18:57:04 GMT
x-ms-version: 2009-09-19
Authorization: SharedKey devstoreaccount1:J5D1E7PK/yNBgQITHmYgVuu4cHtcGad+YKGb1Lh/YUU=
Host: 127.0.0.1:10000
Content-Length: 0 
```

结果：

```
HTTP/1.1 201 Created
Transfer-Encoding: chunked
Last-Modified: Mon, 25 Jun 2012 18:57:04 GMT
ETag: 0x8CF211B72040930
Server: Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
x-ms-request-id: 079bcdc1-a7fa-4207-99cd-b7f1c2d1b981
x-ms-version: 2009-09-19
Date: Mon, 25 Jun 2012 18:57:04 GMT

0 
```

我已经浏览了代码，但没有看到这种差异，再次感谢 R。

# html - div：干扰其他 div 之前/之后？

> ID：11194492
> 
> 赞同：2
> 
> 时间：2012-06-25T17:44:18.190
> 
> 标签：html, css

我正在使用 CSS :before 和 :after 将虚线视觉元素添加到 div：

![在此处输入图像描述](../Images/a606a2fa8ca4766afd72ff87808d383e.png)

但它似乎干扰了“编辑”按钮元素。（当父 div 存在 :before 和 :after CSS 时，编辑按钮不会响应任何 onClick 或 MouseOver 或 Hover 事件）关于如何在 :before 和 :after 元素之前呈现按钮元素的任何想法，除了 Z 指数？

CSS：

```
.window_header{
    width:600px;
    height:42px;
    background: #333 url("../img/bg-2.png") repeat;
    -webkit-border-top-left-radius: 8px;
    -webkit-border-top-right-radius: 8px;
    border-bottom:1px dotted #666;
    box-shadow: 0 2px 2px rgba(0, 0, 0, 0.3),inset 0 -4px 5px rgba(0, 0, 0, 0.2),inset 1px 0px 1px rgba(0, 0, 0, 0.7),inset -1px 0px 1px rgba(0, 0, 0, 0.7),inset 0 -2px 1px rgba(0, 0, 0, 0.5),inset 0 2px 6px rgba(255, 255, 255, 0.15),inset -2px 0 6px rgba(255, 255, 255, 0.15),inset 2px 0 6px rgba(255, 255, 255, 0.15);
}

.window_header:before,
.window_header:after{
    content: "";
    position: absolute;
    top: 0;
    right: 0px;
    bottom: 562px;
    left: 0px;
    z-index:1;
    border-bottom: 1px dashed #666;
    background:-webkit-gradient(radial, center center, 0, center center, 260, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));
}

.button_edit{
    margin: 8px 8px 8px 8px;
    border-radius:6px;
    width:70px;
    font-size: 9pt;
    font-weight:bold;
    cursor:pointer;
    font-family: Helvetica, sans-serif;
    text-shadow: 0px -1px 1px rgba(0,0,0,0.5);
    border: 1px solid rgba(0, 0, 0, 0.5);
    border-top-color: rgba(0, 0, 0, 0.496094);
    -webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2),0 -1px 1px rgba(0, 0, 0, 0.3);
    z-index:100;
}

.fl_right{
    float:right;
} 
```

HTML：

```
<div class="window_header">
    <div class="button_edit fl_right" id="button_edit_site"> Edit </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:18:54.843

我想你忘了添加`position: relative`到`.button_edit`. `z-index`需要`relative`/`absolute`工作：

[http://jsfiddle.net/CB2BE/1/](http://jsfiddle.net/CB2BE/1/)

```
.button_edit{
    position: relative;
    z-index:100;
} 
```

# drupal - 我可以像这样更新 Drupal 用户字段吗？

> ID：11194494
> 
> 赞同：0
> 
> 时间：2012-06-25T17:44:20.917
> 
> 标签：drupal, drupal-field-api

我想为在我的网站上注册的每个新用户创建一个会员编号。我希望会员编号包含用户 ID，以便将来可以将其连接回来。

我能找到的唯一方法是在字段表中使用 db_insert。我不能再以用户 1 的身份登录。有什么理由我不能这样做吗？有没有更干净的方法，还有其他依赖表吗？

```
function ican_user_insert(&$edit, $account, $category) {
$randomnumber=rand(100,999);
$membernumbercalc='LT'.$edit['uid'].$randomnumber;
db_insert('field_data_field_membership_number')
->fields(array(
'entity_type'=>'user',
            'bundle'=>'user',
            'language'=>'und',
            'field_membership_number_value' => $membernumbercalc,
            'entity_id' => $account->uid,
            'delta'=>0,
            'deleted'=>0,
))
->execute();

} 
```

# c# - 如何从 Unity3D 应用程序的 MonoDevelop 分析性能（RAM、CPU 使用率）？

> ID：11194499
> 
> 赞同：1
> 
> 时间：2012-06-25T17:44:53.570
> 
> 标签：c#, .net, mono, monodevelop, unity3d

因此，如何从 MD 调试非常容易（附加到 Unity，然后逐行），但我想知道是否有可能在 MD 中获得我的游戏应用程序的任何视觉分析。如何从 MonoDevelop 中分析性能（RAM、CPU 使用率），在 Unity3D 上查看调试应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:40:53.270

你需要专业版。请参阅[Unity - Profiler](http://unity3d.com/support/documentation/Manual/Profiler.html)以获得印象。

# javascript - AMD/Dojo 1.7 单页应用程序：将 Require() 放在哪里？

> ID：11194501
> 
> 赞同：5
> 
> 时间：2012-06-25T17:44:59.527
> 
> 标签：javascript, dojo, amd

我有一个大型单页应用程序，我正在迁移到 Dojo 1.7/AMD 加载程序语法。

我有一个加载所有内容的主 JSP，然后是大量用于动态内容生成的 JSP 页面。

在整个应用程序周围或在必要模块的每个实例周围添加 require(){} 块是更好的设计决策吗？

还是某种组合？把最常见的require()添加到主页面，然后再去翻找其他需要包装的实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T23:31:00.913

你应该尽可能地延迟加载；也许在“动态内容”JSP 页面级别。它非常清楚每个页面需要什么，并且让 requires() 接近使用导入模块的代码更加清晰。

它还减少了主页加载所需的时间，这意味着用户可以在更短的时间内与应用程序交互。这是一件好事。

# css - 需要并排的 div，但“float：left”不起作用

> ID：11194503
> 
> 赞同：0
> 
> 时间：2012-06-25T17:45:08.000
> 
> 标签：css, html, css-float

我想要实现的是连续三个具有不同、特定宽度和相等高度的 div。其中两个实际上有内容，而中间一个只包含一个垂直间隔图像。这三个 div 与其他幻灯片一起包含在“幻灯片”div 中。幻灯片都在一个容器 div 中，并由 JavaScript 控制，一次隐藏除一张幻灯片之外的所有幻灯片。请注意，幻灯片不是问题，而是其内容的布局。目前，我只能使第二张幻灯片中的三个 div 彼此重叠，但*在第一张幻灯片中有四个 div 时效果很好*。这是我到目前为止尝试过但没有奏效的方法：

*   `float:left;`在每个 div 上
*   `float:left;`在前两个，然后`float:right`在最后一个
*   `display:inline;`在每个 div 上
*   `display:inline-table;`
*   降低宽度，所以它们不精确
*   删除所有边距
*   `clear:left;`在第三个 div 之后
*   `clear:both;`在第三个 div 之后
*   使用`class`而不是`id`（实际上已经改变了事情）
*   以上各种组合

我在 Mac OS X 上使用 Eclipse 代码和 Safari 进行测试；一切都是最新的。非常感谢任何帮助，因为我已经尝试了两天半的工作。这是我的代码，如果您需要更多代码来查找问题，请告诉我。

HTML：

```
 <div id="container">
         <div class="slide1">

            <div id="news-content">
                <div id="news-img">
                    <img src="album_example.png" />
                </div>
                <div id="news-img-description">
                    <h2 align="left">Lorem Ipsum</h2>
                    <p align="left">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam consequat dictum pharetra. Cras porta.</p>
                </div>
                <div id="news-vr">
                    <img src="light_vr.png" />
                </div>
                <div id="news-feed">

                </div>
            </div>

        </div>

        <div class="slide2">
            <div id="music-content">
                <div id="music_albums">
                    <ul style="list-style-type: none;">
                        <li><img src="album_test.png" /></li>
                        <li><img src="album_test.png" /></li>
                        <li><img src="album_test.png" /></li>
                    </ul>
                </div>
                <div id="music_vr">
                    <img src="light_vr.png" />
                </div>
                <div id="music_remixes">
                </div>
            </div>
        </div>
        <div class="slide3">
        <h2>This is slide 3.</h2></div>
        <div class="slide4">
        <h2>This is slide 4.</h2></div>
    </div> 
```

*album_example.png 为 300x300，album_test.png 为 100x100

CSS：

```
@CHARSET "UTF-8";

h2 {
    color: #AAAAAA;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 150%;
}

p {
    color: #AAAAAA;
    font-family: Arial, Helvetica, sans-serif;
}

#container {
    width: 900px;
    height: 500px;
}

.slide1, .slide2, .slide3, .slide4 {
    width: 900px;
    height: 500px;
}

#news-content {
    width: 900px;
    height: 500px;
    margin: 0;
    max-height: 500px;
}

#news-img {
    float: left;
    width: 300px;
    padding: 100px 0 0;
    max-height: 300px;
}

#news-img-description {
    float: left;
    width: 295px;
    padding: 160px 15px 0 15px;
    max-height: 340px;
}

#news-vr {
    float: left;
    width: 1px;
    padding: 0 2px;
    max-height: 500px;
}

#news-feed {
    float: right;
    width: 300px;
    max-height: 500px;
}

#music-content {
    width: 900;
    height: 500;
    margin: 0;
    max-height: 500px;
}

#music-albums {
    float: left;
    width: 447px;
    padding: 15px 0 0 0;
    max-height: 485px;
}

#music-vr {
    float: left;
    width: 1px;
    padding: 0 2px;
    display: inline-block;
    max-height: 500px;
}

#music-remixes {
    float: left;
    width: 448px;
    padding: 15px 0 0 0;
    display: inline-block;
    max-height: 485px;
}

#music-albums, #music-remixes ul
{
    margin: 0;
    padding: 0;
}

#music-albums, #music-remixes ul li
{
    margin: 0 0 1em;
    padding: 0;
    list-style-type: none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:03:32.843

行。所以这次正确回答你的问题：

你有混淆的下划线和破折号。您的 html 中的许多 ID 使用下划线，而相应的 CSS 使用破折号，例如`music_vr`在 html 和`music-vr`您的 css 中。

这至少应该让事情开始变得有意义。

我[对 jsfiddle 进行了一些清理](http://jsfiddle.net/42rBF/17/)，表明当您选择正确的元素时，您的浮动规则确实有效！

[Firebug](http://getfirebug.com/)和 Firefox 或 Chrome/Safari 中的[Element Inspector](http://www.threetipsaday.com/2008/12/debug-inspect-google-chrome-inspector/)之类的工具确实有助于解决此类问题——您会立即看到您的规则甚至不适用于元素，然后这将是一个快速消除的过程一些错别字导致了这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:49:20.743

尝试添加这个：

```
.slide1, .slide2, .slide3, .slide4 {
   float: left;
   margin-left: 20px;
   background-color: #eeeeee;
} 
```

您需要添加包装内容的`float`属性`<div>`。

在您的情况下，它是幻灯片 1、幻灯片 2、...`<div>`

或第二种方法

```
.slide1, .slide2, .slide3, .slide4 {
   margin-left: 10px;
   display: inline-block;
   background-color: #cccccc;
} 
```

**注意：在**[jsfiddle 1](http://jsfiddle.net/sdMD2/)、[jsfiddle 2](http://jsfiddle.net/sdMD2/1/)上工作的简化示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:54:16.447

您是否尝试过在三个 div 上使用 display: inline-block，将它们中的每一个浮动到左侧并进行相对定位？

IE。

```
.all3divs {
position: relative;
float: left;
display: inline-block;
} 
```

但是，看起来中间的“间距”div 是一个像素宽？如果是这种情况，你不能删除它并给第一个 div 一个border-right: 1px; 使用 css3 边框图像来放置您的间隔图像？

这看起来更干净，并且产生的开销更少。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T18:50:17.637

也许你的 div 宽度太小了。尝试重置您的 css： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/) 。还可以尝试降低不工作的 div 的宽度，以便在您的幻灯片中未使用 10 px 的宽度空间。

# php - PHP - 扩展类

> ID：11194506
> 
> 赞同：12
> 
> 时间：2012-06-25T17:45:20.293
> 
> 标签：php, class, extends, object-oriented-database

我已经用 PHP 编写了很多面向对象的代码，但到目前为止，我所有的类都是“单一的”，我想你可以称之为。我正在更改几个类（有 5 个左右相同的方法）以扩展一个类（以摆脱重复的代码）。我遇到了一些问题。

我正在尝试访问父类中的方法，但您可以看到问题。

父类：

```
 class DatabaseObject { 

     public static function find_all() {
        return self::find_by_sql("SELECT * FROM " . self::$table_name);
    }
} 
```

儿童班：

```
class Topics extends DatabaseObject {

    protected static $table_name = "master_cat";
    protected static $db_fields = array('cat_id', 'category');
    public $cat_id;
    public $category;

  } 
```

代码试图从 php/html 文件中访问该表中的所有信息：

```
$topics=Topics::find_all();

foreach($topics as $topic):
    echo $topic->category;
endforeach; 
```

如您所见，大部分代码并没有被合并到新的处事方式中。我需要更改 self::$table_name ，它不再以我做事的新方式工作。我将有大约 5 个类扩展这个对象，那么最好的编码方法是什么，这样我就可以用一种方法访问不同的表（而不是在 5 个不同的类中包含这个确切的 find_all() 方法。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-25T18:12:11.163

[您可以尝试如下所述](https://stackoverflow.com/a/11194717/3536236)的后期静态绑定，或者单例解决方案也可以工作：

```
<?php
abstract class DatabaseObject {
  private $table;
  private $fields;

  protected function __construct($table, $fields) {
    $this->table = $table;
    $this->fields = $fields;
  }

  public function find_all() {
    return $this->find_by_sql('SELECT * FROM ' . $this->table);
  }
}

class Topics extends DatabaseObject {
  private static $instance;

  public static function get_instance() {
    if (!isset(self::$instance)) {
      self::$instance = new Topics('master_cat', array('cat_id', 'category'));
    }

    return self::$instance;
  }
}

Topics::get_instance()->find_all(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T18:00:36.830

您应该研究PHP中[后期静态绑定的概念。](http://php.net/manual/en/language.oop5.late-static-bindings.php)这允许您从被调用的类中访问静态常量或函数。

# javascript - Jquery Sliding Tabs-如何禁用顶部菜单？

> ID：11194509
> 
> 赞同：0
> 
> 时间：2012-06-25T17:45:40.087
> 
> 标签：javascript, jquery, tabs

我正在尝试禁用**jquery 滑动选项卡**的顶部菜单。我希望标签到标签只能与上一个/下一个一起操作。

请看我的[现场演示](http://jsfiddle.net/PS336/4/)。

查询：

```
<script>
$(document).ready(function() {
    // Horizontal Sliding Tabs demo
    $('div#st_horizontal').slideTabs({
        // Options              
        contentAnim: 'slideH',
        contentAnimTime: 600,
        contentEasing: 'easeInOutExpo',
        tabsAnimTime: 300
    });

    $(".st_tab_view").each(function(i) {
        var totalSize = $(".st_tab_view").size() - 1;
        if (i != totalSize) {
            next = i + 2;
            $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
        }
        if (i !== 0) {
            prev = i;
            $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
        }
    });

    $('.prev-tab').click(function() {
        $('.st_tab_active').parent().prev().children('a').trigger('click');
        return false;
    });

    $('.next-tab').click(function() {
        $('.st_tab_active').parent().next().children('a').trigger('click');
        return false;
    });

});​
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:19:02.487

更改以下 CSS：

```
div.st_horizontal div.st_tabs_container { /* Tabs main container */        
    position:relative;
    /* This will hide it all together */
    display:none;
    z-index:100;    
    /* Or change with and heights */    
    width:0% !important;    
    height:0px;
    margin-bottom:-1px;    
    overflow:hidden;
} 
```

或者，您可以在页面上添加更多 CSS（在添加 jQuery UI CSS 之后），以保存覆盖默认 CSS：

```
div.st_horizontal div.st_tabs_container {
    /* This will hide it all together */
    display:none;
    /* Or change with and heights */    
    width:0% !important;    
    height:0px;
} 
```

否则，我建议您编写自己的控件。

这两个中的任何一个都可以节省潜入 jQuery 代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:35:20.680

"

*   水平选项卡 #1

修改你的jQuery -

$('.prev-tab').click(function() { $('.st_tab_active').attr('disabled','disabled'); var tab= $('.st_tab_active').parent(). prev().children('a'); tab.removeAttr('disabled'); tab.trigger('click'); // tab.attr('disabled','disabled'); return false; });

```
$('.next-tab').click(function() {
    $('.st_tab_active').attr('disabled','disabled');
   var tab=  $('.st_tab_active').parent().next().children('a');
    tab.removeAttr('disabled');
    tab.trigger('click');
    //tab.attr('disabled','disabled');
    return false;
}); 
```

"

# facebook - facebook“最近的活动”提要没有或很少显示结果

> ID：11194511
> 
> 赞同：2
> 
> 时间：2012-06-25T17:45:49.607
> 
> 标签：facebook, facebook-graph-api, android-activity

我是 smartplanet.com 的前端程序员，我们最近从 facebook api 的活动提要中遇到了一些相当奇怪的现象。作为参考，示例页面如下：（http://www.smartplanet.com/blog/cities/get-paid-to-avoid-traffic-jams/3650）

基于开发网站上的[调试器工具](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.smartplanet.com%2Fblog%2Fcities%2Fget-paid-to-avoid-traffic-jams%2F3650)，我们的开放图标记似乎在勉强正确地实现了，除了关于图像大小的警告，但我看不出这会如何导致这个问题。

[这](http://www.facebook.com/plugins/activity.php?border_color=%23fff&font=arial&header=false&height=350&linktarget=_blank&locale=en_US&recommendations=false&ref=activity-widget&sdk=joey&site=www.smartplanet.com&width=290)是用于从 facebook 平台获取数据的直接链接。正如您在多次刷新此 url 时所看到的，我们得到了各种各样的结果，但更多时候我们看到 0-2 个结果返回。

我发现在调用中[添加一个 max_age 可选参数](http://www.facebook.com/plugins/activity.php?border_color=%23fff&font=arial&header=false&height=350&linktarget=_blank&locale=en_US&recommendations=false&ref=activity-widget&sdk=joey&site=www.smartplanet.com&width=290&max_age=10)可以获得更好的结果，但我不明白为什么这可以解决问题。

上一个链接的最大年龄为 10 天，并获得了很好的结果，但如果我将其增加到 180 的最大时间跨度（根据 facebook 文档），我们会回到[非常有限的结果](http://www.facebook.com/plugins/activity.php?border_color=%23fff&font=arial&header=false&height=350&linktarget=_blank&locale=en_US&recommendations=false&ref=activity-widget&sdk=joey&site=www.smartplanet.com&width=290&max_age=180)。

虽然我可以修补站点并限制到较低的最大年龄，但这并不能解释为什么会发生这种情况。据我了解，通过省略 max_age 参数，您可以完全删除年龄作为检索数据的一个因素，那么更大的内容数据集如何拉回 LESS 结果并始终如一地这样做呢？

任何关于这里发生的事情的见解将不胜感激。

附带说明一下，在我们的另一个站点（zdnet.com）上使用了几乎相同的实现，没有 max_age 参数并且可以完美运行。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:02:47.407

查看下面的链接。[http://developers.facebook.com/docs/reference/plugins/like-box/][1]

我想列出网站的 FB 页面的近期活动提要。我找到了社交插件@fb dev 角.. 可能对你有用！！

# java - 将十六进制字符串转换为整数

> ID：11194513
> 
> 赞同：122
> 
> 时间：2012-06-25T17:46:05.857
> 
> 标签：java, hex

我正在尝试将一个长度为 8 个字符的十六进制代码的字符串转换为一个整数，以便我可以对许多不同的值进行 int 比较而不是字符串比较。

我知道这在 C++ 中相当简单，但我需要在 Java 中完成。我需要满足的测试用例本质上是将“AA0F245C”转换为int，然后返回到该字符串，以便我知道它转换正确。

我尝试了以下方法：

```
int decode = Integer.decode("0xAA0F245C");  // NumberFormatException
int decode2 = Integer.decode("AA0F245C"); //NumberFormatException
int parseInt = Integer.parseInt("AA0F245C", 16); //NumberFormatException
int valueOf = Integer.valueOf("AA0F245C", 16); //NumberFormatException 
```

我也试过一次做两个字符并将结果相乘，转换有效，但数字不正确。

```
int id = 0;
for (int h = 0; h < hex.length(); h= h+2)
{
    String sub = hex.subSequence(h, h+2).toString();

if (id == 0)
    id = Integer.valueOf(sub, 16);
else
    id *= Integer.valueOf(sub, 16);             
 }
//ID = 8445600 which = 80DEA0 if I convert it back. 
```

正如你所知，我不能使用第三方库，所以这必须在 Java 标准库中完成。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-06-25T17:50:20.097

它对于 int 来说太大了（它是 4 个字节并且有符号）。

采用

```
Long.parseLong("AA0F245C", 16); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-11-04T09:39:37.073

你可以这样使用

```
System.out.println(Integer.decode("0x4d2"))    // output 1234
//and vice versa 
System.out.println(Integer.toHexString(1234); //  output is 4d2); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-06-25T17:55:31.667

Java 可以处理的最大值`Integer`是 2147483657，即 2^31-1。十六进制数 AA0F245C 是 2853119068 作为十进制数，太大了，所以需要使用

```
Long.parseLong("AA0F245C", 16); 
```

让它工作。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-25T18:19:19.637

您可以使用带有格式参数的 parseInt 轻松完成。

```
Integer.parseInt("-FF", 16) ; // returns -255 
```

[javadoc 整数](https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String,%20int))

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-04-03T11:46:04.030

这是正确的答案：

`myPassedColor = "#ffff8c85" int colorInt = Color.parseColor(myPassedColor)`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-05-25T09:25:02.097

对于那些需要将带符号字节的十六进制表示从两个字符的字符串转换为字节（在 Java 中始终是带符号的）的人，有一个示例。解析十六进制字符串永远不会给出负数，这是错误的，因为从某些角度来看 0xFF 是-1（二进制补码编码）。原理是将传入的String解析为大于byte的int，然后将负数回绕。我只显示字节，所以这个例子足够短。

```
String inputTwoCharHex="FE"; //whatever your microcontroller data is

int i=Integer.parseInt(inputTwoCharHex,16);
//negative numbers is i now look like 128...255

// shortly i>=128
if (i>=Integer.parseInt("80",16)){

    //need to wrap-around negative numbers
    //we know that FF is 255 which is -1
    //and FE is 254 which is -2 and so on
    i=-1-Integer.parseInt("FF",16)+i;
    //shortly i=-256+i;
}
byte b=(byte)i;
//b is now surely between -128 and +127 
```

可以对其进行编辑以处理更长的数字。只需分别添加更多 FF 或 00。要解析 8 个十六进制字符有符号整数，您需要使用 Long.parseLong，因为整数 -1 的 FFFF-FFFF 在表示为正数时不适合 Integer（给出 4294967295）。所以你需要 Long 来存储它。转换为负数并转换回整数后，它将适合。没有 8 个字符的十六进制字符串，最后不适合整数。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-04-19T14:35:35.470

建议的另一个选项是使用`BigInteger`该类。由于十六进制值通常是大数字，例如 sha256 或 sha512 值，它们很容易溢出 an`int`和 a `long`。正如其他答案所示，虽然转换为字节数组是一种选择`BigInterger`，但 java 中经常被遗忘的类也是一种选择。

```
String sha256 = "65f4b384672c2776116d8d6533c69d4b19d140ddec5c191ea4d2cfad7d025ca2";
BigInteger value = new BigInteger(sha256, 16);
System.out.println("value = " + value);
// 46115947372890196580627454674591875001875183744738980595815219240926424751266 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-01T10:30:21.360

```
//Method for Smaller Number Range:
Integer.parseInt("abc",16);

//Method for Bigger Number Range.
Long.parseLong("abc",16);

//Method for Biggest Number Range.
new BigInteger("abc",16); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-27T13:44:12.033

试试这个：

长 abc=convertString2Hex("1A2A3B");

```
private  long  convertString2Hex(String numberHexString)
{
    char[] ChaArray = numberHexString.toCharArray();
    long HexSum=0;
    long cChar =0;

    for(int i=0;i<numberHexString.length();i++ )
    {
        if( (ChaArray[i]>='0') && (ChaArray[i]<='9') )
            cChar = ChaArray[i] - '0';
        else
            cChar = ChaArray[i]-'A'+10;
        HexSum = 16 * HexSum + cChar;
    }
    return  HexSum;
} 
```

# android - Android获取所选单选按钮的值

> ID：11194515
> 
> 赞同：27
> 
> 时间：2012-06-25T17:46:16.160
> 
> 标签：android, android-event

我有一个 RadioGroup `rg1`，我想获取所选单选按钮的值。

我知道我可以使用以下方法获取`id`所选单选按钮的

```
if(rg1.getCheckedRadioButtonId()!=-1)
int id= rg1.getCheckedRadioButtonId() 
```

这给了我 id ，但我想要那个按钮的值。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-25T17:51:35.083

您需要获取该索引处的单选按钮，然后获取该按钮文本的值。试试下面的代码。

```
if(rg1.getCheckedRadioButtonId()!=-1){
    int id= rg1.getCheckedRadioButtonId();
    View radioButton = rg1.findViewById(id);
    int radioId = radioGroup.indexOfChild(radioButton);
    RadioButton btn = (RadioButton) rg1.getChildAt(radioId);
    String selection = (String) btn.getText();
} 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-06-25T17:52:21.313

试试这个：

```
RadioGroup rg = (RadioGroup)findViewById(R.id.youradio);
String radiovalue = ((RadioButton)findViewById(rg.getCheckedRadioButtonId())).getText().toString(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-02T12:36:18.003

```
RadioGroup rg = (RadioGroup)findViewById(R.id.youradio);
String radiovalue = (RadioButton)this.findViewById(rg.getCheckedRadioButtonId())).getText().toString(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-04T14:04:15.867

一行代码

```
String buisnesstype = ((RadioButton) rdtranscompany.findViewById(rdtranscompany.getCheckedRadioButtonId())).getText().toString(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-28T20:11:22.130

```
rb1=(RadioButton)findViewById(rg1.getCheckedRadioButtonId()); 
```

现在您可以使用`rb1.getText()`来获取选中的 Radiobutton 上的文本

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-05T14:07:56.390

我认为你应该试试这个

```
RadioGroup rg=(RadioGroup)findViewById(R.id.youradio);
String radiovalue=(RadioButton)this.findViewById(rg.getCheckedRadioButtonId())).getText().toString(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-28T06:01:53.857

```
RadioGroup bhktype_RadioGr = (RadioGroup)findViewById(R.id.bhkypeRadioGroup);
int flatTypeId = bhktype_RadioGroup.getCheckedRadioButtonId();
String flat_type = ((RadioButton) findViewById(flatTypeId)).getText().toString(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-03T16:09:04.830

简单回答一行

```
View v = yourView;  // as a button

String radiovalue = (RadioButton)v).getText().toString(); 
```

# c# - 确保 Exception.Data IDictionary 中的唯一键

> ID：11194516
> 
> 赞同：0
> 
> 时间：2012-06-25T17:46:32.063
> 
> 标签：c#, exception, anonymous-types, idictionary

我编写了一个扩展方法来帮助在错误报告期间收集崩溃数据。此方法旨在确保密钥始终是唯一的。如果您有一些 try/catch 块，有时数据可能会重复。我在这里要相当容易，而不是超级最佳实践。

问题：如果密钥不是唯一的，则更改密钥。当我尝试以下方法时，我得到“无法从'string'转换为'TKey'”。有任何想法吗？

```
 public static void AddUnique<TKey, TValue>(this System.Collections.IDictionary dictionary, TKey key, TValue value)
    {
        if(dictionary[key] != null)
        {
            var newKey = key.ToString() + "-";
            AddUnique<TKey, TValue>(dictionary, newKey, value);
        }               

        ...
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:49:19.730

如果您知道您的键将始终是字符串，`TKey`则从方法签名中删除通用参数，并`string`在其位置使用。或者，您可能希望保留两个泛型参数，但将递归调用更改为`AddUnique<string, TValue>()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:51:08.843

您不能将字符串连接到那里的每个可能的键。你必须解决这个问题：

*   仅使用字符串作为键
*   始终使用唯一的东西，例如 URL 或[GUID](http://msdn.microsoft.com/en-us/library/system.guid.aspx) *

它并不是真正独特的，但发生碰撞的概率接近于 0，尤其是在单台机器上。[有关该主题的更多信息](http://blogs.msdn.com/b/ericlippert/archive/2012/04/24/guid-guide-part-one.aspx)。

# xml - XMLHttpRequest 无法加载 跨源请求仅支持 HTTP

> ID：11194518
> 
> 赞同：5
> 
> 时间：2012-06-25T17:46:35.313
> 
> 标签：xml

从 XML 文件获取数据时发现异常 101：XMLHttpRequest 无法加载文件：///C:/Users/zaid/Desktop/xml/cd_catalog.xml。仅 HTTP 支持跨源请求。

```
<script type="text/javascript">
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","xml/cd_catalog.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("CD");
for (i=0;i<x.length;i++)
  { 
  document.write("<tr><td>");
  document.write(x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue);
  document.write("</td><td>");
  document.write(x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue);
  document.write("</td></tr>");
  }
document.write("</table>");
</script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T14:47:52.070

您正在尝试通过本地计算机请求资源，这是一个交叉引用。您需要通过 HTTP 服务器访问此资源才能访问它。

# javascript - Highcharts - 在一个点上手动触发悬停事件

> ID：11194527
> 
> 赞同：20
> 
> 时间：2012-06-25T17:47:17.757
> 
> 标签：javascript, highcharts

当您将鼠标悬停在 Highcharts 图表中的某个点上时，您的光标（或其他符号）下方会出现一个很好的放大圆圈。我想手动触发悬停效果。

我知道我可以在该点上手动触发 mouseOver 事件，但这并没有给我想要的图表上的放大符号。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-03T19:49:23.050

我通过查看源找到了答案——调用“setState('hover');” 在您想要突出显示的点上。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-01T16:12:33.587

只是添加一个重要信息：

对于 StockChart，此解决方案不起作用：

在[此示例](http://jsfiddle.net/xW2MW/)中，您必须替换它：

```
chart.tooltip.refresh(chart.series[0].data[i]); 
```

对此：

```
chart.tooltip.refresh([chart.series[0].points[i]]); 
```

[此处](http://jsfiddle.net/JMarques/w5mEH/)提供了一种可能的解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-22T20:15:42.443

以下是如何以编程方式选择（悬停）系列中最后一个有效点的示例：

```
 // Find last not-null point in data
  let last = data.indexOf(null) - 1;
  last = (last === -2) ? data.length - 1 : last;
  const lastPoint = this.series[0].points[last];

  // Trigger the hover event 
  lastPoint.setState('hover');
  lastPoint.state = '';  // You need this to fix hover bug
  this.tooltip.refresh(lastPoint); // Show tooltip 
```

[完整的 JSFiddle 示例](https://jsfiddle.net/doasync/8nqsoL5f/6/)

[![在此处输入图像描述](../Images/a8a504881da7c01c14652a91d254c452.png)](https://i.stack.imgur.com/t7jdi.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-10T16:07:52.047

给出更直接的答案（例如，您无法访问 highcharts 实例）：

您需要创建一个 mouseover 事件并在触发它之前为其提供适当的 pageX 和 pageY 属性。

# c - realloc()：下一个大小 C 转储无效

> ID：11194528
> 
> 赞同：0
> 
> 时间：2012-06-25T17:47:21.323
> 
> 标签：c, malloc, realloc

我在使用这个函数时遇到了一些严重的问题：当跟踪到达 realloc 时，它会爆炸。我已经检查了有关此主题的类似问题，但没有任何结果。我希望你能帮助我。你看有什么不对吗？

```
char **tokenizepath(char *path){    

    char str[256]; // buffer;
    char **token=NULL;
    char *saveptr; 
    int i=1;
    size_t tam = sizeof(char*);

    token = malloc(2 * tam);
    strcpy(str, path);

    if(str[0]=='\\'){
        token[0] = "\\";
        token[i++] = strtok_r(str, "\\", &saveptr);
    }else{
        token[0] = strtok_r(str, "\\", &saveptr);
    }

    while((token[i]=strtok_r(NULL, "\\", &saveptr))!=NULL){
        i++;
        token = realloc(token, (i+1)*sizeof(char*));
    }

    return token;

} 
```

这是回溯：

```
* glibc detected * /home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev: realloc(): invalid next size: 0x0000000000605290 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7a6e6)[0x7ffff7ab56e6]
/lib/x86_64-linux-gnu/libc.so.6(+0x7d3e7)[0x7ffff7ab83e7]
/lib/x86_64-linux-gnu/libc.so.6(realloc+0xf9)[0x7ffff7ab9b39]
/home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev[0x40319b]
/home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev[0x400c31]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7ffff7a5c30d]
/home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev[0x400aa9]
======= Memory map: ========
00400000-00404000 r-xp 00000000 00:14 542669                             /home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev
00603000-00604000 r--p 00003000 00:14 542669                             /home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev
00604000-00605000 rw-p 00004000 00:14 542669                             /home/vlad/workspace_SisOp/RFSDev/Debug/RFSDev
00605000-00626000 rw-p 00000000 00:00 0                                  [heap]
7ffff0000000-7ffff0021000 rw-p 00000000 00:00 0 
7ffff0021000-7ffff4000000 ---p 00000000 00:00 0 
7ffff5ad9000-7ffff5aee000 r-xp 00000000 08:16 526333                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7ffff5aee000-7ffff5ced000 ---p 00015000 08:16 526333                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7ffff5ced000-7ffff5cee000 r--p 00014000 08:16 526333                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7ffff5cee000-7ffff5cef000 rw-p 00015000 08:16 526333                     /lib/x86_64-linux-gnu/libgcc_s.so.1
7ffff5cef000-7ffff7a3b000 rw-p 00000000 00:14 273074                     /home/vlad/Sistemas Operativos/ext2.disk
7ffff7a3b000-7ffff7bd2000 r-xp 00000000 08:16 526221                     /lib/x86_64-linux-gnu/libc-2.13.so
7ffff7bd2000-7ffff7dd1000 ---p 00197000 08:16 526221                     /lib/x86_64-linux-gnu/libc-2.13.so
7ffff7dd1000-7ffff7dd5000 r--p 00196000 08:16 526221                     /lib/x86_64-linux-gnu/libc-2.13.so
7ffff7dd5000-7ffff7dd6000 rw-p 0019a000 08:16 526221                     /lib/x86_64-linux-gnu/libc-2.13.so
7ffff7dd6000-7ffff7ddc000 rw-p 00000000 00:00 0 
7ffff7ddc000-7ffff7dfd000 r-xp 00000000 08:16 523159                     /lib/x86_64-linux-gnu/ld-2.13.so
7ffff7fe2000-7ffff7fe5000 rw-p 00000000 00:00 0 
7ffff7ff9000-7ffff7ffb000 rw-p 00000000 00:00 0 
7ffff7ffb000-7ffff7ffc000 r-xp 00000000 00:00 0                          [vdso]
7ffff7ffc000-7ffff7ffd000 r--p 00020000 08:16 523159                     /lib/x86_64-linux-gnu/ld-2.13.so
7ffff7ffd000-7ffff7fff000 rw-p 00021000 08:16 523159                     /lib/x86_64-linux-gnu/ld-2.13.so
7ffffffde000-7ffffffff000 rw-p 00000000 00:00 0                          [stack]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:57:07.310

如果第一个测试为真：

```
if(str[0]=='\\'){ 
```

然后在以下 while 循环的第一次迭代中：

```
while((token[i]=strtok_r(NULL, "\\", &saveptr))!=NULL){ 
```

`token[2]`i == 2 并且您在分配之前尝试访问。

* * *

另一个问题：如果`token`数组在调用 realloc 后移动（因为 realloc 不能在不移动它的情况下增加大小），那么`saveptr`将不再有效。

# c++ - 序列点从何而来？

> ID：11194530
> 
> 赞同：9
> 
> 时间：2012-06-25T17:47:31.177
> 
> 标签：c++, c, sequence-points

我知道写类似的东西

```
++a = a++; 
```

不仅不可读，而且违反了 c/c++ 序列点。

这些限制从何而来？在发现它们是错误之前，如何才能看到这些“问题”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T17:55:16.330

基本上每个语句之间都有一个 C++03 序列点。有关详细信息，请参阅[SO C++ 常见问题解答](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)。有关更多信息，请查阅 C++ 标准，并记住在 C++11 标准中，序列点被替换为*先排序*和*后排序*关系。

为了避免出现问题，不要试图在每个表达式中做很多事情。

不要试图做编译器的工作：把它留给编译器。你的工作是编写其他人容易理解的代码，即**清晰的代码**。多次更新和不必要地使用具有副作用的运算符与此不兼容。

提示：几乎在任何可能的地方洒`const`。

这限制了读者必须考虑的可能的状态变化。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-25T17:49:48.170

它们来自 C 或 C++ 标准，该标准有效地列出了[序列点](http://en.wikipedia.org/wiki/Sequence_point)。¹ 在一些简单的情况下，您的编译器可能会警告您正在调用未定义的行为，但在一般情况下不会。

但是，如果您正在编写诸如示例之类的“有趣”代码，则通常只会违反序列点要求。语言标准*可能*会对诸如此类的代码施加特定的限制（Java 等语言就是这样做的），但没有太大的好处，并且可能会阻止某些类型的优化。

* * *

[1\. 我认为 C++11 中的术语略有变化，但原理大致相同。]

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-25T17:49:26.687

> **在发现它们是错误之前，如何才能看到这些“问题”？**

以最严格的级别编译您的程序，并使所有警告的设置都被指出为错误。大多数主流编译器都会指出由于序列点导致的未定义行为错误。

使用 gcc，您可以使用：

```
-Wsequence-point 
```

这将指出序列点问题。请注意，如果您使用`-Wall`.

当然，最好的方法是尝试编写更具可读性的代码，以避免序列点*错误冒险*。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-11-09T22:20:22.117

> 这些限制从何而来？在发现它们是错误之前，如何才能看到这些“问题”？

它们来自执行期间操作顺序的模糊性（或自由修改）。

对于您的示例：

```
++a = a++; 
```

该语言未定义左值的预增量是否应该发生在右值的后增量之前或之后。在此处添加约束会产生巨大的成本；一般的好处是什么？这个示例代码“应该”表现的清晰、明显的方式是什么？

为了提高性能，程序中的操作顺序可以由编译器和/或处理器更改（在严格的限制内）。

*过度*约束执行顺序会：

*   为不同的目标架构实现 C/C++ 变得更加困难
*   增加语言规范的复杂性
*   削减性能（以换取什么收益？）
*   防止许多编译时优化，降低性能
*   需要在执行期间禁用流水线和硬件重新排序，再次降低性能
*   可能会破坏现有代码

让我们看看限制不同代码示例的执行顺序：

```
a = b++ + ++c - --d - e--; 
```

假设只有有限数量的寄存器可用，并且一些变量（'d' 和 'e'）在寄存器中，而另一些则不在。严格限制执行顺序（比如说从左到右）可能需要：

*   从寄存器中丢弃“d”
*   从寄存器中丢弃“e”
*   加载“b”
*   将其初始值保存为 'b,original'
*   递增“b”（对于某些数据类型可能很重要）
*   存储修改后的“b”
*   重新加载'b，原始'
*   加载“c”
*   递增“c”
*   保存更新的“c”
*   添加 'b,original' + 'c' 并保存为部分结果
*   等等等等

虽然如果允许首先处理“d”和“e”并稍晚增加“b”，编译器可能能够显着减少步骤数并提高性能。

# c# - C# 类引用的对象集

> ID：11194531
> 
> 赞同：2
> 
> 时间：2012-06-25T17:47:35.013
> 
> 标签：c#, .net, collections, set

我想要的是它们的类引用的对象的唯一集合或集合。该集合只能包含给定类的一个对象。以下是一些可能功能的示例：

```
class A;
class B;
class C;

A a = new A();
B b = new B();
C c = new C();

UnknownCollection<object> objects;
objects.Add(A, a);    // Add(key, value)
objects.Add(B, b);
objects.Add(C, c);
var something = objects[A]; // return a reference to 'a' using class A as a key 
```

如果这些方面的东西不存在，是否有一种方法可以创建具有合理性能的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T17:49:47.673

听起来你真的想要一个`Dictionary<Type, object>`你填充的：

```
objects.Add(typeof(A), a);
objects.Add(typeof(B), a);
objects.Add(typeof(C), a);
...

A a = (A) objects[typeof(A)]; 
```

如果字典总是将一个类型映射到该类型的实例，您可以封装它，这样您就可以保持 API 干净。您总是知道强制转换会起作用，因为可以添加到字典中的唯一代码确保类型始终正确。

编辑：啊哈 - 原来我[早在 2008 年就在博客上写过这个](http://msmvps.com/blogs/jon_skeet/archive/2008/10/08/mapping-from-a-type-to-an-instance-of-that-type.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T17:49:15.780

您正在寻找一个`Dictionary<TKey, TValue>`，特别是 type 作为键：

```
Dictionary<Type, object> map = new Dictionary<Type, object>()
{
    { typeof(A), a }
    { typeof(B), b }
}; 
```

# iphone - 对象过早释放？

> ID：11194532
> 
> 赞同：0
> 
> 时间：2012-06-25T17:47:35.263
> 
> 标签：iphone, ios, memory, memory-management, memory-leaks

我已经把头撞到墙上两天了，试图找出我的代码到底出了什么问题。到目前为止，什么都没有。我发现的唯一一件事是一个对象试图对其自身调用 release 并且它还没有被实例化。（虽然，由于某种原因，它不会在 100% 的时间发生，只是在它认为的时候）

让我解释一下这个问题（也许我忽略了一些东西，我希望你们能给我的黑暗带来一些启发）

我的模型对象

```
Person {
  NSString *name;
  NSNumber *age;
}

@property(nonatomic, retain) NSNumber* TheAge;
@property(nonatomic, retain) NSString *TheName; 
```

我的实现

```
@synthesize TheName = name;
@synthesize TheAge = age;

+(Person*)personFromDictionary:(NSDictionary*)dic {
  Person* newPerson = [[[Person alloc] init]autorelease];
  newPerson.theAge = [dic objectForKey:kAge];
  newPerson.theName = [dic objectForKey:kName];

  return newPerson;
}

-(void)dealloc {
  self.TheAge = nil;
  self.TheName = nil;
} 
```

我有一个“收集器线程”，它从服务器读取 JSON 数组，下载它并将其解析为字典。字典中的每个条目都对应一个人对象 这个线程是一个不同的类，只是使用 Person 模型

线程做这样的事情（在自动释放池中）

```
NSDictionary *parsedDict = download.returnValue;

NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
Person *tmpPerson = personFromDictionary

[entryDictionary setObject:tmpPerson forKey:kAge];

[pool release];

[self updateEntries:entryDictionary];

-(void)updateEntries:(NSMutableDictionary*)updatedDict {
   NSArray *keys = [updatedDict allKeys];
   for(NSString *key in allKeys){
        Person *entry = [updatedDict valueForKey:key];
        [entriesLock lock];
        [currentPersonEntries setObject:entry forKey:key];
        [entriesLock unlock];

    }
} 
```

当我遇到崩溃时（由于某种该死的原因随机发生，我得到堆栈跟踪如下

人释放

人 setTheAge (bam crash)

我猜是因为二传手看起来像这样

```
-(void)setTheAge:(NSString*)theAge {
  [theAge retain];
  [age release]; // it doesn't exist for some reason???
  age = theAge;
} 
```

我该如何保护这种类型的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:20:57.077

几个想法。

首先，你有：

```
Person {
    NSString *name;
    NSNumber *age;
}

@property(nonatomic, retain) NSNumber* TheAge;
@property(nonatomic, retain) NSString *TheName; 
```

在您的实施中，您有：

```
@synthesize TheName = name;
@synthesize TheAge = age; 
```

Apple 不再建议您明确定义您的 ivar，而是让您的 synthesize 语句处理它（可能是因为如果您拼错其中一个，您最终可能会得到一个额外的、意外的 ivar）。所以你可能只想：

```
@interface Person : NSObject

@property(nonatomic, retain) NSNumber* theAge;
@property(nonatomic, retain) NSString* theName;

@end 
```

此外，在命名您的 ivars 时，新兴标准是（但是，当然，您可以做任何您想做的事）对 ivars 使用下划线，并以小写开头的变量名...类的大写，变量的小写，例如：

```
@synthesize theName = _theName;
@synthesize theAge = _theAge; 
```

其次，在您`dealloc`的设置中，您将这些 ivars 设置为 nil。虽然这是在 ARC 代码中发布的正确方法，但在非 ARC 代码中，您应该只使用您的 ivars，并使用 release 命令：

```
- (void)dealloc {
    [_theAge release];
    [_theName release];

    [super dealloc];
} 
```

第三，您是在编写那个 setter`setTheAge`还是在猜测编译器自己在做什么？您的代码可能可以改进（您使用的局部变量与您的属性相同，这只是令人困惑，您想要进行键值通知等），但我不会解决这个问题，因为您最好让编译器执行自己的设置器，除非您要完成其他工作。让我知道。

第四，你`-(Person*)personFromDictionary:(NSDictionary*)dic`的方法很奇怪。我建议编写自己的 init，例如：

```
- (Person*)initFromDictionary:(NSDictionary*) dic 
{
    self = [super init]; // I always inherit from NSObject, in which case you'd have this line

    if (self)
    {
        self.theAge  = [dic objectForKey:kAge];
        self.theName = [dic objectForKey:kName];
    }

    return self;
} 
```

这样，您可以创建您的 Person 对象，例如：

```
Person *aPerson = [[Person alloc] initWithDictionary:entryDictionary]; 
```

您当前的实现假定`Person`对象已经存在（因为您在方法名称前加上“-”而不是“+”），然后创建一个新对象。这有点奇怪。你也许可以做这样的事情，但上面的代码模式更常见，并且实现了我认为你想要的。

最后，我不确定你要做什么`updateEntries`，所以我不确定在那里建议什么，但我不太了解`updateEntries`你的池子，无论你的意思是它是一本充满Person 对象等。如果您描述您要在那里完成的工作，我也很乐意为此给您两分钱。

**更新：**

顺便说一句，如果您正在调试代码，有时添加`NSLog`语句会很有帮助。不过，您可能希望`description`为您的类创建一个方法`Person`来促进这一点，以便您可以查看`Person`对象的内容，例如：

```
- (NSString *)description
{
    return [NSString stringWithFormat:@"Person (%p) {\n  theName = '%@'\n  theAge = %@\n}", self, self.theName, self.theAge];
} 
```

这样，如果您有一个`Person`名为 的对象，`aRandomPerson`则可以使用如下语句：

```
NSLog(@"%@", aRandomPerson); 
```

此外，如果你有一个包含`Person`对象的字典条目，如果你`NSLog`是那个字典，你现在将有一个有意义的日志语句。这可以帮助您诊断项目中的内容`NSDictionary`（如果它真的有`Person`对象而不仅仅是`NSString`和`NSNumber`对象）。

# twitter - Twitter 的 max_id 参数的默认值？

> ID：11194539
> 
> 赞同：4
> 
> 时间：2012-06-25T17:47:52.270
> 
> 标签：twitter

Twitter 的新 max_id 参数是否有默认值？

我试过了：

[https://api.twitter.com/1/statuses/user_timeline.json?screen_name=justinbieber&trim_user=true&count=200&max_id=false](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=justinbieber&trim_user=true&count=200&max_id=false)

[https://api.twitter.com/1/statuses/user_timeline.json?screen_name=justinbieber&trim_user=true&count=200&max_id=null](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=justinbieber&trim_user=true&count=200&max_id=null)

[https://api.twitter.com/1/statuses/user_timeline.json?screen_name=justinbieber&trim_user=true&count=200&max_id=9999999999999999999999](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=justinbieber&trim_user=true&count=200&max_id=9999999999999999999999)

如果您根本不使用 max_id，我只是希望它准确地返回它会返回的内容：

[https://api.twitter.com/1/statuses/user_timeline.json?screen_name=justinbieber&trim_user=true&count=200](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=justinbieber&trim_user=true&count=200)

比布斯指望着你……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:27:14.047

我不认为有默认值。如果您希望结果与未使用 max_id 一样，则不要发送 max_id。它的目的是分页，所以如果你跑

[https://api.twitter.com/1/statuses/user_timeline.json?screen_name=justinbieber&trim_user=true&count=200&max_id=216942783313883136](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=justinbieber&trim_user=true&count=200&max_id=216942783313883136)

在任何时候，您都将获得相同的 200 个结果。如果您只关心最近的 200 条，请不要理会它。

# joomla - Joomla 站点的 EasyBlog 组件将 FTP 下载到 PHPStorm 中的本地文件

> ID：11194541
> 
> 赞同：0
> 
> 时间：2012-06-25T17:48:01.650
> 
> 标签：joomla, ftp, phpstorm

我经常使用 PHPStorm 通过 FTP 在本地下载文件，但在最近尝试建立“从现有文件形成新项目..”时，我能够建立连接，但如果组件 / com_easyblog 在此请求中（即包括完整传输）。该过程显示标准文件传输，然后卡在 css 文件夹上，生成无限的 css/css/css/css... 在结束过程之前没有任何解释。这是确切的路径参考

```
components/com_easyblog/themes/hako-new/css/css/css/.. 
```

我没有遇到过这个问题，所以如果有任何功能可以在 PHPStorm 中进行调试，我愿意接受任何建议。如果我绕过这个组件，我可以获得所有文件，但我真的想解决这个问题以确保安全并允许所有文件下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:32:06.170

看起来很少有人遇到这个或使用组合，但会回答以防将来有人遇到这个问题。正如我所说，这是空间的问题，不会影响其他 FTP。这是 PHPStorm 或 EasyBlog 组件的问题，具体取决于您如何看待它。

# iphone - iTunes Connect - 如何删除应用内购买的新版本

> ID：11194544
> 
> 赞同：0
> 
> 时间：2012-06-25T17:48:17.033
> 
> 标签：iphone, app-store, in-app-purchase, app-store-connect

我有一个应用内购买项目（非消耗品）启动并运行。

我不小心添加了一个新版本的应用内购买，启用**了 Apple 托管内容。**所以现在我收到了消息

```
Hosting Content with Apple
You have not delivered any content or your content is still processing. To deliver your content, use the Application Loader app. 
```

之前的版本已经通过了，但是新版本因为我还没有上传内容正在等待审批。所以在我的应用程序中，购买的内容不再存在。

我不需要新版本。是否可以删除新版本并恢复到旧版本本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T11:37:40.680

我的问题解决了！我已发送电子邮件至 devprograms@apple.com，在我的电子邮件中，我解释了上述问题并附上了我的应用内购买信息（应用名称、应用 ID、应用内购买 ID）。之后，我收到了 Apple Developer Program Support 和 App Store Developer Support Escalation Team (itunesconnect@apple.com) 的一些电子邮件，几天后，我登录 itunnesconnect，我的问题得到解决（删除新版本并恢复到旧版本本身）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:29:41.930

您可以在 iTunes Connect 中删除新版本。转到您的应用程序，然后单击“在应用程序内容中管理”按钮。从那里您可以选择 IAP 并将其删除。如果它不再存在于 iTuens connect 中，您可能必须重新创建旧版本。

# node.js - Mongoose 不更新数据库条目

> ID：11194549
> 
> 赞同：0
> 
> 时间：2012-06-25T17:48:39.883
> 
> 标签：node.js, mongodb, express, mongoose

我使用 express.js 和猫鼬作为 ODM。

我知道提到当其他服务对 mongoDB 进行更新时，猫鼬不承认这一点。所以仍然显示数据库的旧状态。

我认为这是因为 mongoose 在创建、更新新文档后使用回调进行更新，但是当另一个服务与 mongoDB 交互时，不会触发此回调。

那么我怎么能手动说猫鼬照顾不是自己创建的文件呢？

**路线/user.js**

```
var User = require('../models/user.js')
, requirements = { enabled: true, expired: false, locked: false };

exports.list = function(req, res){
    User.find(requirements, function(err, users){
        res.send(users);
    });
}; 
```

**应用程序.js**

```
app.get('/users', user.list); 
```

当我现在使用 curl 或浏览器访问 /users 时，我得到了 mongodb 中所有用户的数组。直到现在都是这样。现在我在我的 PHP 环境中注册了一个新用户。当我现在再次请求 /users 时，我仍然得到与以前相同的数组，而没有通过 php 创建的用户！

当我现在重新启动节点服务并再次请求 /users 时，由 php 创建的用户就在那里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:19:26.227

express.js 框架包括默认为生产站点启用的视图缓存）。我怀疑你的结果被缓存了，因为你包含了一个函数引用（user.list）而不是一个闭包，例如：

```
app.get('/users', function(req, res){
    User.find(requirements, function(err, users){
        res.send(users);
    });
}); 
```

视图缓存是一个全局设置，应该只缓存视图模板，而不是视图的内容。有人要求[更精细的缓存](https://github.com/visionmedia/express/issues/792)，但看起来这不是必需的。

您可以尝试使用以下方法禁用视图缓存：

```
app.disable('view cache'); 
```

[Express.js Google Group](https://groups.google.com/forum/?fromgroups#!forum/express-js)是搜索或要求澄清的好资源。

# oop - 内存级别的 OOP

> ID：11194555
> 
> 赞同：-2
> 
> 时间：2012-06-25T17:49:04.923
> 
> 标签：oop, memory

我正在寻找一些关于在内存级别实现面向对象范例的文章或教程。我想了解对象是如何在内存中定位的，继承、封装和多态是如何在底层实现的。
有人可以为我提供有用的在线资源和很好的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:24:28.960

您可以阅读电子书[Object Oriented Memory Management (Java and C++)](http://task3.cc/wp-content/uploads/2011/04/object-oriented-memory-management-java-c++.pdf)。它将让您对 OOP 中的内存管理有一个很好的概述。

# windows - 使用 xcopy 排除目录

> ID：11194557
> 
> 赞同：0
> 
> 时间：2012-06-25T17:49:10.457
> 
> 标签：windows, visual-studio-2010, copy

我有一个发布我的 VS2010 应用程序的 .bat 文件，然后将文件复制到我的测试网络服务器上的某个位置，因此我不必手动执行此操作。我有几个目录我不想每次都复制，因为内容不会改变，而且有很多文件。这是我的 xcopy 命令：

```
 XCOPY C:\Publish\NewPCloser\* \\testserver\c$\NewPCloser /s /i /Y /EXCLUDE:c:\exclude.txt 
```

这是我的 exclude.txt 文件：

```
 web.config
  c:\Working\PaperlessCloser4.0\PaperlessCloser4.0\Content 
```

它不包括 web.config，但它仍然复制 Content 文件夹和所有 300 多个文件。如何排除目录并通过 xcopy 进行复制？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:24:18.973

据此[，](http://commandwindows.com/xcopy.htm)要排除一个目录，您只需像任何其他字符串一样将其添加到排除文件中，但它需要在其名称的开头和结尾有一个反斜杠。因此，如果您在要复制的目录中有一个名为 Content 的目录，您应该能够将 \Content\ 添加到排除文件中，并且它应该忽略路径包含该字符串的任何文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T18:36:32.307

因为排除文件中的前导路径与指定为 XCOPY 源的前导路径不匹配。尝试修复排除文件中的路径以匹配。

您可以将 exclude 行更改为 simple `\Content\`，但随后它将排除`\Content\`路径中任何位置的任何文件。

请注意，XCOPY 的 /EXCLUDE: 选项执行子字符串匹配的一种形式。有时它不够精确，无法获得您想要的结果。您应该考虑改用 ROBOCOPY。

# jquery - 使用 onblur/onfocus 进行 jquery 验证

> ID：11194561
> 
> 赞同：3
> 
> 时间：2012-06-25T17:49:19.990
> 
> 标签：jquery

我在表单的文本输入中添加了 onfocus 和 onblur。

```
<form id='AddCameraFormWebcam' name='' method='post' action='<?php echo htmlspecialchars($_SERVER['REQUEST_URI']); ?>'>
    <label for="CameraName">Camera name:&nbsp;</label>
    <input id="CameraName" name="camera_name" size="24" maxlength="36" value="Enter label for camera" onfocus="if(this.value==this.defaultValue){this.value=''; this.style.color='#000';};" onblur="if(this.value==''){this.value=this.defaultValue; this.style.color='#666';}" />
...
    <button type='submit' class='submit_camera' name='addcamera' value='Add'>Add</button>

</form> 
```

现在这打破了我对 jquery 的验证：

```
$(".submit_camera").click(function() {
    $("#AddCameraFormWebcam").validate({
        rules: {
            camera_name: {
                required: true,
                cameravalidation: true,
                minlength: 3,
                maxlength: 32
            }
        },
        messages: {
            camera_name: {
                required: "Enter a label for your camera",
                minlength: jQuery.format("At least {0} characters required!"),
                maxlength: jQuery.format("Maximum {0} characters allowed!")
            }
        }
    });
}); 
```

有人现在可以在不为相机名称输入任何内容的情况下提交，因为`Enter label for camera`将被提交到服务器。我怎样才能仍然显示错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:19:56.723

最简单的方法是创建自定义规则（您已经有相机验证？）：

```
var enterText =  $("#CameraName")[0].defaultValue; // "Enter label for camera";

jQuery.validator.addMethod("cameravalidation", function(value, element) {
    return value != enterText && value.length > 0;
}, "Enter a label for your camera");

$("#AddCameraFormWebcam").validate({
        rules: {
            camera_name: {
                cameravalidation: true,
                minlength: 3,
                maxlength: 32
            }
        },
        messages: {
            camera_name: {
                minlength: "At least 3 characters required!",
                maxlength: "Maximum 32 characters allowed!"
            }
        }
    }); 
```

基于您的表单的 jsfiddle：http: [//jsfiddle.net/bSQQx/2/](http://jsfiddle.net/bSQQx/2/)

# jquery - 选项卡控制 cookie 不起作用

> ID：11194579
> 
> 赞同：0
> 
> 时间：2012-06-25T17:50:07.430
> 
> 标签：jquery, asp.net-mvc, jquery-ui, cookies, tabs

我有一个 asp.net mvc 部分，其中包含一个 jquery ui 选项卡控件，标记如下：

```
<div id="admin_tabs" class="tabs_admin">
    <div id="admin_header">
        <ul> 
            <span class="admin_title">Administration</span>
            <li style="float:right; display:inline"><a href="#maint_tab">Maintenance</a></li>
            <li style="float:right; display:inline"><a href="#log_tab">Logs</a></li>
            <li style="float:right; display:inline"><a href="#groups_tab">Groups</a></li>
            <li style="float:right; display:inline"><a href="#users_tab">Users</a></li>
            <li style="float:right; display:inline"><a href="#app_settings_tab">Application Settings</a></li>
        </ul>
    </div>
    <div id="app_settings_tab" class="tab_admin">
    </div>
    <div id="users_tab" class="tab_admin">
    </div>
    <div id="groups_tab" class="tab_admin">
    </div>
    <div id="log_tab" class="tab_admin">
    </div>
    <div id="maint_tab" class="tab_admin">
    </div>
</div>

<script type="text/javascript">
    $("#admin_tabs").tabs({ selected: 4 });
</script> 
```

这工作正常。但我希望应用程序记住页面刷新时上次打开的选项卡，所以我将我的 JavaScript 更改为

```
$("#admin_tabs").tabs({selected: 4, cookie: {}}); 
```

这会立即导致 javascript 错误并且选项卡停止工作。根据 chrome 控制台，错误`Uncaught TypeError: Cannot call method 'apply' of undefined`发生在 jquery-ui.js 的第 7520 行。在包含 jquery ui 之前，我已经包含了 cookie 插件，但没有效果。正在破坏的代码是

```
_cookie: function() {
    var cookie = this.cookie ||
        ( this.cookie = this.options.cookie.name || "ui-tabs-" + getNextListId() );
    return $.cookie.apply( null, [ cookie ].concat( $.makeArray( arguments ) ) ); 
```

它似乎坏了，因为我第一次加载页面时没有设置 cookie。关于为什么会这样的任何线索，或任何其他解决问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:39:29.903

我发现出了什么问题。出于某种原因，cookie 插件没有被正确包含。我把它放在一个外部脚本中，但是将它移到文档的正文中解决了这个问题。

# asp.net - Azure 和 Aspnet_regsql.exe

> ID：11194580
> 
> 赞同：2
> 
> 时间：2012-06-25T17:50:14.380
> 
> 标签：asp.net, asp.net-mvc-3, azure, azure-sql-database

> **可能重复：**
> [将 ASP.NET 成员资格数据库迁移到 SQL Azure](https://stackoverflow.com/questions/10140774/migrating-asp-net-membership-database-to-sql-azure)

我最近向 Microsoft Azure 发布了一个 MVC3 应用程序，在一些帮助下，我能够让我的 EF 数据库正常工作。但是，我遇到了我使用的默认角色和用户的问题，而不是为管理员登录等创建自己的表。

我找到了需要您运行 Aspnet_regsql.exe 的答案，但我收到以下错误：

```
Setup failed.

Exception:
An error occurred during the execution of the SQL file 'InstallCommon.sql'. 
The SQL error number is 40508 and the SqlException message is: USE statement
is not supported to switch between databases. Use a new connection to connect
to a different Database. 
```

我搜索了这个错误，发现这不适用于 Windows Azure。它让我看到这篇文章，它有助于解释原因并提供解决方案：[http ://thinkfirstcodelater.com/blog/?p=637](http://thinkfirstcodelater.com/blog/?p=637)

它告诉我下载以下文件并运行它们。[http://archive.msdn.microsoft.com/KB2006191/Release/ProjectReleases.aspx?ReleaseId=3539](http://archive.msdn.microsoft.com/KB2006191/Release/ProjectReleases.aspx?ReleaseId=3539)

问题是，当我运行该文件夹中的应用程序时，命令行出现并消失。我看不到它在说什么，只是它失败了。我能做些什么来解决这个问题？

最初的问题源于此：

```
Could not find stored procedure 'dbo.aspnet_CheckSchemaVersion'. 
```

当我尝试登录自己的网站时显示。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:06:36.737

您需要适用于 SQL Azure 的版本，因为就像错误所说的那样，SQL Azure 不支持 USE 语句： [KB2006191 - 更新了用于 SQL Azure 的 ASP.NET 脚本](http://archive.msdn.microsoft.com/KB2006191/Release/ProjectReleases.aspx?ReleaseId=3539)

**注意：**重复[我如何在 sql azure 上运行 aspnet_regsql？](https://stackoverflow.com/questions/11158478/how-do-i-run-aspnet-regsql-on-sql-azure)

# email - 您如何测试发送给多个收件人的电子邮件？

> ID：11194583
> 
> 赞同：1
> 
> 时间：2012-06-25T17:50:40.210
> 
> 标签：email, testing, sendgrid

我正在尝试使用[SendGrid 的 SMTP API](http://docs.sendgrid.com/documentation/api/smtp-api/)向许多收件人发送电子邮件。虽然针对少量电子邮件测试此功能很容易（我可以使用我的电子邮件主机设置几个假帐户，然后发送到每个帐户并验证邮件是否到达每个收件箱），但似乎更少很容易验证一切都按预期工作，例如，一千个收件人。

我想知道是否有任何服务可以让您批量创建大量电子邮件帐户（可能会在一段时间后过期？）并从统一的仪表板访问他们的所有收件箱。据我所知，实施起来会非常昂贵且不切实际；但我想我还是会问。在我的特殊情况下，这确实是一个非常有用的产品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:58:38.323

更好的测试方法是执行以下操作：

*   首先，检查您的应用程序日志以查看交付是否成功。
*   接下来，确定实际交付的结果落到了 SendGrid 的手中。SendGrid 有一个仪表板，您可以在其中查看[电子邮件活动](https://www.youtube.com/watch?v=QgppoAkv3DM)，以及关于退回、阻止、垃圾邮件报告、无效电子邮件和取消订阅的报告。

# servlets - Adobe CQ5 自定义 servlet 路径

> ID：11194586
> 
> 赞同：1
> 
> 时间：2012-06-25T17:50:41.727
> 
> 标签：servlets, adobe, aem

我正在尝试为某些节点的 json 处理添加一些功能。因此，我编写了扩展的自定义 servlet `SlingSafeMethodsServlet`，当用户为以下 url 进行 GET 时，我需要执行该 servlet：**/data/events/any_sequence/any_sequence.json**或**/data/events/any_sequence/any_sequence.infinity.json**或例如**/data /events/any_sequence/any_sequence.2.json**其中**any_sequence**当然意味着任何有效的符号序列。

问题是我在 sling 文档中找不到如何像 url 一样映射这个模板。

我一直在尝试设置这样的属性：

```
@Component
@Service
@Properties({
    @Property(name = "sling.servlet.resourceTypes", value = "data/events/-/-"),
    @Property(name = "sling.servlet.extensions", value = "json"),
    @Property(name = "sling.servlet.methods", value = "GET"),
    @Property(name = "service.description", value = "JSON advanced renderer")
}) 
```

但这没有帮助。我检查了 felix 控制台，发现我的服务已经启动并运行，所以问题是如何设置 url 映射。所以我的问题是如何在我的情况下设置 url 映射来调用我的自定义 servlet 的 doGet ？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T05:47:55.027

据我了解，CQ5 不提供在通配符 url 上映射自定义 servlet 的能力。实现类似于我需要的目标的唯一方法是为此 servlet 选择器使用一些独特的方法，如下所示：

```
@Component
@Service
@Properties({
    @Property(name = "sling.servlet.resourceTypes", value = "sling/servlet/default"),
    @Property(name = "sling.servlet.extensions", value = "json"),
    @Property(name = "sling.servlet.selectors", value = "advanced"),
    @Property(name = "sling.servlet.methods", value = "GET"),
    @Property(name = "service.description", value = "JSON advanced renderer")
}) 
```

这段代码意味着，如果我尝试使用`*.advanced.json`选择器和扩展名在某个节点上进行 GET，那么请求将被转发到我的自定义 servlet。

请参阅[http://apache-sling.73963.n3.nabble.com/Register-servlet-for-subtree-td84106.html](http://apache-sling.73963.n3.nabble.com/Register-servlet-for-subtree-td84106.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-01T21:33:36.210

我已经解决了这个问题，正如原始海报所希望的那样。所有其他答案实际上都是“无法完成”或“如果您愿意使用选择器弄脏干净的 RESTful API，这是一种方法”

如果你想保持你设想的干净的 API，下面是方法。这也适用于没有扩展的 API，例如 /myservice/mythings/123123 ，其中 123123 是一些动态 ID

**创建两个文件：**

*   资源提供者
*   小服务程序

**资源提供者**

这样做的目的只是侦听 /data/events 处的所有请求，然后在该虚拟路径上生成一个“资源”，该路径实际上并不存在于 JCR 中。

```
@Component
@Service(value=ResourceProvider.class)
@Properties({
        @Property(name = ResourceProvider.ROOTS, value = "data/events"),
        @Property(name = ResourceProvider.OWNS_ROOTS, value = "true")
})
public class ImageResourceProvider implements ResourceProvider  {

@Override
public Resource getResource(ResourceResolver resourceResolver, String path) {

    AbstractResource abstractResource;
    abstractResource = new AbstractResource() {
        @Override
        public String getResourceType() {
            return TypeServlet.RESOURCE_TYPE;
        }

        @Override
        public String getResourceSuperType() {
            return null;
        }

        @Override
        public String getPath() {
            return path;
        }

        @Override
        public ResourceResolver getResourceResolver() {
            return resourceResolver;
        }

        @Override
        public ResourceMetadata getResourceMetadata() {
            return new ResourceMetadata();
        }
    };

    return abstractResource;
}

@Override
public Resource getResource(ResourceResolver resourceResolver, HttpServletRequest httpServletRequest, String path) {
    return getResource(resourceResolver , path);
}

@Override
public Iterator<Resource> listChildren(Resource resource) {
    return null;
}
} 
```

**小服务程序**

现在您只需编写一个 servlet 来处理来自该路径的任何资源 - 但这是通过处理具有由在该路径上侦听的 ResourceProvider 生成的资源类型的任何资源来完成的。

```
@SlingServlet(
        resourceTypes = TypeServlet.RESOURCE_TYPE,
        methods = {"GET" , "POST"})
public class TypeServlet extends SlingAllMethodsServlet {

    static final String RESOURCE_TYPE = "mycompany/components/service/myservice";

    @Override
    protected void doGet(SlingHttpServletRequest request, SlingHttpServletResponse response) throws ServletException, IOException {

        final String [] pathParts = request.getResource().getPath().split("/");
        final String id = pathParts[pathParts.length-1];
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        try {
            out.print("<html><body>Hello, received this id: " + id + "</body></html>");
        } finally {
             out.close();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T22:46:31.030

这是我用来完成类似任务的语法：

```
@Component(immediate = true, description = "JSON advanced renderer")
@Service(value = javax.servlet.Servlet.class)
@Properties(value = {
        @Property(name = "sling.servlet.extensions", value = { "json" }),
        @Property(name = "sling.servlet.methods", value = { "GET" }),
        @Property(name = "sling.servlet.paths", value = {
                        "/data/events/any_sequence/any_sequence",
                        "/data/events/any_sequence/any_sequence.infinity",
                        "/data/events/any_sequence/any_sequence.2"
        })
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T16:55:53.373

我有一个类似的问题，我需要我使用的通配符

```
@Service
@Component
@Properties({
        @Property(name = "sling.servlet.paths", value = "/bin/resolver/gb"),
        @Property(name = "sling.servlet.extensions", value = "*")
})
public class Test extends SlingAllMethodsServlet {
    @Override
    public void doGet(SlingHttpServletRequest request, SlingHttpServletResponse response) throws ServletException, IOException {
       PrintWriter out = response.getWriter();
       out.print("The path you used is:" + request.getPathInfo());
    }
} 
```

调用是 [server]:[port]/bin/resolver/gb.[wildcard]

所以可以做的是：[server]:[port]/bin/resolver/gb.en/something

“。”之后的所有内容 被认为是扩展，因此需要在 servlet 中处理，但帮助我实现了我的要求

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-17T10:30:07.477

看来您的 servlet 的路径是相同的。只是选择器有所不同。与路径一起使用时，SlingServlet 中会忽略其他内容。所以使用这样的东西应该可以达到目的：@SlingServlet(paths = " /data/events/any_sequence/any_sequence", extensions = "json")

您需要在 Felix 控制台（/system/console/configMgr）的执行路径中添加 /data，因为它在 Apache Sling Servlet Resolver 属性中默认不存在

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-31T22:57:45.210

这可以通过构建 Sling 映射或 Apache 重写使用所需的外部 URI 模式来完成，以有效地将 JSON 扩展移动到 URI 中的“数据”之后，因此“/data”处的单个 servlet 最终通过以下方式接收任意路径请求的后缀。如果您还使用来自选择器的数据，则需要将它们与扩展一起移动。

# sql - 是否可以在 `where` 方法/子句中“添加”与 `scope` 方法相关的 SQL 子句？

> ID：11194587
> 
> 赞同：3
> 
> 时间：2012-06-25T17:50:46.783
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, squeel

我正在使用 Ruby on Rails 3.2.2 并且正在试验 Squeel gem。我想知道（以某种方式，通过使用 Squeel gem 与否）是否可以在子句中`scope`“直接”“添加”与方法相关的 SQL`where`子句。也就是说，我有：

```
class Article < ActiveRecord::Base
  # Note: This is a scope method.
  def self.created_by(user)
    where(:user_id => user.id)
  end

  # I would like to use a scope method like the following.
  #
  # Note: Code in the following method doesn't work, but it should help
  # understanding what I mean.
  def self.scope_method_name(user)
    where{ created_by(user) | ... & ... }
  end
end 
```

因此，当我运行时，`Article.scope_method_name(@current_user).to_sql`它应该返回如下内容：

```
SELECT articles.* FROM articles WHERE articles.user_id = 1 OR ... AND ... 
```

我[尝试过 sifters](https://github.com/ernie/squeel#sifters)，但那些（至少对我而言）是专门用于*其他*Squeel 语句的。也就是说，如果我声明一个 sifter，那么我不能使用它来限定`ActiveRecord`s，因为该 sifter 返回一个`Squeel::Nodes::Predicate`对象而不是一个`ActiveRecord::Relation`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:03:07.403

您必须下拉到更原始的 AREL 以进行 OR 操作

```
def self.scope_method_name(user)
  t = arel_table
  where(
    (t[:user_id].eq(user.id).or(
    t[:blah].eq('otherthing')
      ).and([:bleh].eq('thirdthing'))
    )
end 
```

或类似的规定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T14:36:46.423

您可以像这样链接范围，`Article.by_author(user).by_editor()`但这会将所有条件与 AND 连接起来。因此，为了解决这个问题，您可以使用 Squeel 编写单个作用域（而不是链接它们），例如：

```
class Article < ActiveRecord::Base

  scope :by_author, ->(user) { where{author_id == user.id} }
  scope :by_editor, ->(user) { where{editor_id == user.id} }
  scope :by_title, ->(token) { where{title =~ "%#{token}%"} }
  scope :by_author_or_editor, ->(user) { where{(author_id == user.id)|(editor_id == user.id)} }
  scope :by_author_or_editor_and_title, ->(user, token) { where{((author_id == user.id)|(editor_id == user.id))&(title =~ "%#{token}%")} }
end 
```

或者你可以使用筛子：

```
class Article < ActiveRecord::Base

  sifter :sift_author do |user|
    author_id == user.id
  end

  sifter :sift_editor do |user|
    editor_id == user.id
  end

  sift :sift_title do |token|
    title =~ "%#{token}%"
  end

  scope :by_author, ->(user) { where{sift :sift_author, user} }
  scope :by_editor, ->(user) { where{sift :sift_editor, user} }
  scope :by_title, ->(token) { where{sift :sift_title, token} }
  scope :by_author_or_editor, -> (user) { where{(sift :sift_author, user)|(sift :sift_editor, user)} }
  scope :by_author_or_editor_and_title, ->(user, token) { where{((sift :sift_author, user)|(sift :sift_editor, user))&(sift :sift_title, token)} }
end 
```

这为您提供了返回 ActiveRecord::Relation 的范围，因此您理论上可以进一步链接它们。

# android - 屏幕密度不同的设备看起来真的那么不同吗？

> ID：11194592
> 
> 赞同：1
> 
> 时间：2012-06-25T17:51:15.357
> 
> 标签：android

我只有一台实际设备要测试，一台 Nexus One，但我过去曾短暂使用过 Droid X。我记得一个更好看的屏幕，但我不记得它在主屏幕上安装的图标比我的 N1 更多。所以我想知道我的模拟器等是否真实。

我正在运行 2 个模拟器，WVG800，一个在 240 另一个 160。240 看起来不错。160 没有，所有东西都小得多，包括按钮、单选按钮，以及我没有指定确切尺寸的东西。[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)文档在下图中显示了看起来完全相同的不同密度。但是，我的模拟器并没有保持这种外观。有什么问题吗？

![在此处输入图像描述](../Images/964c31cf52093be24ad7bae23a8cc891.png) ![在此处输入图像描述](../Images/7eed55bed8bc66eeadd10167953ffefc.png) ![在此处输入图像描述](../Images/3128bebc1e9ced91f54e7d7116823304.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:00:55.970

它们在现实世界中具有不同的显示尺寸。密度为240的WVGA800很可能是4英寸屏幕的手机。密度为160的WVGA800可能是7英寸屏幕的平板电脑。`Scale display to real size`启动模拟器时检查选项以查看差异。

# ruby-on-rails - 使用 Postgres 和 pg_search gem 对 Ruby on Rails 应用程序进行全文搜索

> ID：11194595
> 
> 赞同：0
> 
> 时间：2012-06-25T17:51:24.943
> 
> 标签：ruby-on-rails, postgresql, indexing, full-text-search, pg-search

我在 pg_search 的 google 组上发布了这个查询：

[https://groups.google.com/forum/?fromgroups#!topic/casecommons-dev/3tbCthkDHg0](https://groups.google.com/forum/?fromgroups#!topic/casecommons-dev/3tbCthkDHg0)

但没有回复，所以我将其发布在 StackOverflow 上。我的问题是：在以下情况下使用 pg_search gem 时我应该创建 GIN 类型索引吗？

我的搜索仅限于使用 pg_search_scope 在单个模型中进行搜索。

这是一个具体的例子：

```
class Scenario < ActiveRecord::Base
   ...
   include PgSearch
  pg_search_scope :search, :against => [:name, :compute_ngls],
   :using => { :tsearch => {:dictionary => "english"} }

   def self.text_search(query)
     if query.present?
       search(sanitize(query))
     else
       scoped
     end
   end
  ...
end 
```

text_search 方法的调用如下：

```
 scenarios = scenarios.text_search(params[:sSearch]) 
```

我在某些列上只有常规的 btree 索引，例如 :name 。我没有 gin 或 gist 索引。我的问题是：我应该明确创建这些索引吗？如果是，那么哪种类型和哪些列？你能给我创建这些索引的语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:44:39.387

关于是否创建索引的问题不是通过查看 Ruby 代码就能知道的问题，也可能无法通过查看 db 模式知道。这些问题取决于查询的选择性、索引的数据量以及表的分页大小。这是因为 PostgreSQL 表支持物理顺序扫描，如果检索到表的很大一部分，这通常比索引驱动的查找更快。

GIN 和 GiST 索引将帮助您进行全文搜索，而 btree 并不是特别有用，但要使它们有用，您必须索引大量表并仅提取该表的一小部分。

我对此的偏好是等待有性能原因来创建索引，而不是在有疑问时预先创建。

**编辑**

最近在全文搜索方面的重度 GIN 经验使我改变了上面的建议。我现在认为，特别是对于全文索引，最好先创建 GIN 索引，然后在它干扰性能时将其删除。

请注意，GIN 的写入开销很大，因此它绝对不是免费的。但是，如果 fts 是您应用程序中的主要用例，FTS 索引几乎总是具有足够的选择性以发挥作用。

# spring-mvc - 使用 Spring MVC 的 gwt-gwt 3.0 文件上传问题

> ID：11194601
> 
> 赞同：2
> 
> 时间：2012-06-25T17:51:42.320
> 
> 标签：spring-mvc, gxt

当我使用 FormPanel、FileUploadField 和 Spring 时，我在获取文件对象时遇到问题。

这是我所拥有的：

我将 CommonsMultipartResolver bean 添加到我的 Spring Context 文件中：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
   <property name="maxUploadSize" value="100000"/>
</bean> 
```

我有一个带有常规 getter 和 setter 的模型类：

```
pulic class UploadItem{
  private String filename;
  private CommonsMultipartFile fileData;
  ....
  getters/setters
  ....
} 
```

我的控制器类：

```
@Controller
@RequestMapping("/Foo")
public class ThingController extends BaseController implements ServlerContextAware{
  ....
  @RequestMapping(value = "/bar", method = RequestMethod.POST)
  public @ResponseBody
  String createFile(UploadItem item, BindingResults results){
     String orgFile = item.getFileData().getOriginalFilename();
     return orgFile;
  } 
```

我正在使用 UiBinding 创建表单字段，但我正在调用 fileupload 字段和 formpanel 以在代码中添加其他方法。

我有一个提交按钮，调用：

```
 form.submit(); 
```

我的构造函数负责其他表单要求：

```
 form.setMethod(Method.POST);
  form.setEncoding(Encoding.MULTIPART);
  form.setAction("http://url.com/foo/bar");
  form.addSubmitCompleteHandler(new SubmitCompleteHandler(){
     @Override
     public void onSubmitComplete(SubmitCompleteEvent event){
          String results = event.getResults();
          Info.display("Upload Response", results);
     }
  }); 
```

当我运行代码时，我在 item.getFileData().getOriginalFilename(); 上得到一个 nullpointerexecption；

我不知道问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:16:16.523

我的猜测是表单未绑定到 UploadItem，因为您从未告诉 Spring 这样做。现在，我希望有人知道如何做到这一点。通常我会使用 Spring 的表单标签库并在表单中提供 modelAttribute 或 commandName，但由于我（和 ts）使用 GWT，所以表单是从 GWT 组件构建的，我不能使用 Spring 表单标签。

# c++ - 高性能 QImage 输出显示

> ID：11194604
> 
> 赞同：5
> 
> 时间：2012-06-25T17:51:52.180
> 
> 标签：c++, qt, qimage, qpixmap

我正在尝试将视频输出（帧序列）到任何 qt 可见小部件。一开始我认为 QLabel 就足够了……但我错了。转换为像素图对于处理大型图像（例如 1080p）来说过于过载。

还有其他解决方案吗？（不是 QLabel？）

一帧的代码示例：

```
QImage m_outputFrameImage(width, height, QImage::Format_RGB888);
memcpy(m_outputFrameImage.bits(), m_frameRGB->data[0], height * width * 3);
QPixmap pixmap = QPixmap::fromImage(m_outputFrameImage); // BAD, slow and high load
/* Bad too (Same code?)
    QPainter painter;
    painter.begin(&pixmap);
    painter.drawImage(0, 0, m_outputFrameImage);
    painter.end();
*/
labelVideo->setPixmap(pixmap); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T18:05:36.360

**是的，将帧渲染到 a`QGLWidget`**并让视频卡处理它。这就是 Qt MultimediaKit、Phonon 和其他人的做法。

前段时间我分享了一些代码来演示如何完成这个任务：[Image scaling (KeepAspectRatioByExpanding) through OpenGL](https://stackoverflow.com/questions/9011108/image-scaling-keepaspectratiobyexpanding-through-opengl)

# jquery - 行悬停时的背景颜色变化不起作用（jsfiddle）

> ID：11194608
> 
> 赞同：0
> 
> 时间：2012-06-25T17:52:08.007
> 
> 标签：jquery, css

我在使用 jquery 时面临背景颜色更改问题。

当页面第一次加载并且用户将鼠标悬停在表格行上时，表格行的背景会发生变化。

一旦用户单击表格行单元格以生成 jquery 弹出窗口，弹出窗口所属行的背景颜色就会发生变化。

一个用户通过单击文档上的任意位置关闭弹出窗口（使用 jquery），第一行提到的行的悬停突出显示功能被禁用，我需要它保持有效，只要没有弹出窗口打开。

这是我试图添加到我的 jquery 中的内容，它一直有效，直到其中一个弹出窗口显示一次。换句话说，下面的代码只触发一次，而不是像我需要的那样保持有效：

```
if($(".webpopup,.phonepopup").is(":hidden")){
    $("tr").hover(function(){
        $(this).toggleClass('fresh');
    });
} 
```

js小提琴：

[http://jsfiddle.net/vUWsb/](http://jsfiddle.net/vUWsb/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:05:05.687

尝试`!important`：

```
.fresh{background-color:#ddd !important;}

$("tr").hover(function(){
    $(this).addClass('fresh');
}, function() {
    $(this).removeClass('fresh')    
}); 
```

[http://jsfiddle.net/vUWsb/6/](http://jsfiddle.net/vUWsb/6/)

* * *

像这样的东西？

```
 $("tr").hover(function(e){
        if ($(".webpopup, .phonepopup").is(":visible")) {
           return false;
        }
       $(this).addClass('fresh');     
    }, function() {
       $(this).removeClass('fresh');
 }); 
```

[http://jsfiddle.net/vUWsb/10/](http://jsfiddle.net/vUWsb/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T17:59:39.370

在我看来，单击单元格后悬停不起作用。相反，看起来您在单击表格单元格时将背景设置为默认白色：

```
$(document).click(function() {
    $("#favorites-table tr").css({
        "background-color": "#fff" // <--- this part
    });
    $(".webpopup, .phonepopup").hide();
}); 
```

由于内联样式优先于类样式，因此您永远不会看到悬停效果，因为它被您设置的背景颜色隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:00:18.660

您需要将其基于您的“新鲜”课程。

像

```
 $("#favorites-table tr").css({
        "background-color": "#fff"
    }); 
```

添加一个内联样式，它胜过 css 类。

使用`addClass`and`removeClass`代替

[http://jsfiddle.net/imoda/vUWsb/2/](http://jsfiddle.net/imoda/vUWsb/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:31:58.173

其他贡献正确地指出您需要使用类而不是内联颜色，但正如 MHZ 一直在说的，这并不是所需的全部功能。悬停的问题在于它尝试测试可见性的方式不正确。考虑可见性的原始测试：

```
if($(".webpopup,.phonepopup").is(":hidden")){
    $("tr").hover(function(){
        $(this).toggleClass('fresh');
    });
} 
```

if 函数将始终返回 true。然后，由于它始终为真，它将创建悬停事件。这发生一次，在文档加载时。然后你就被这个事件监听器困住了。

相反，MHZ，我认为您想要以下内容：

```
theyAreVisible = function() {
    var shown = $('.webpopup,.phonepopup').map(function() {
        return $(this).is(':visible') ? true : null;
    });
    return shown.length > 0 ? true : false;
};

$("tr").hover(function() {
    if (!theyAreVisible()) $(this).addClass('fresh');
}, function() {
    if (!theyAreVisible()) $(this).removeClass('fresh');

}); 
```

这样，您就有了一个悬停事件处理程序，用于检查是否有任何弹出窗口打开。map 函数将遍历每一个并查找是否有任何个人是打开的，如果找到则返回 true。但是我们不能只返回这个结果，因为 if([]) 将解析为 true。考虑：

```
if ([]) { console.log('yup!'); } 
```

带走：

1.  始终在事件处理程序中进行检查（在本例中为切换）
2.  确保你认为解决为真的事情实际上是解决为真的。

# ios - 在iOS下检索电影编解码器？

> ID：11194609
> 
> 赞同：8
> 
> 时间：2012-06-25T17:52:09.143
> 
> 标签：ios, video, codec

我正在尝试找到用于压缩电影的编解码器。我确定我是否需要以某种方式使用 CMFormatDescription 并获取 CMVideoCodecType 密钥。我对如何通过元数据数组感到困惑。关于如何检索编解码器的任何想法？

```
AVURLAsset* movieAsset = [AVURLAsset URLAssetWithURL:sourceMovieURL options:nil];
NSArray *tracks = [movieAsset tracksWithMediaType:AVMediaTypeVideo];

if ([tracks count] != 0) {
    AVAssetTrack *videoTrack = [tracks objectAtIndex:0];

    //
    // Let's get the movie's meta data
    //

    // Find the codec
    NSArray *metadata = [movieAsset commonMetadata];
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-15T19:31:11.607

检索与电影相关的音频和视频编解码器的 Swift 方法：

```
func codecForVideoAsset(asset: AVURLAsset, mediaType: CMMediaType) -> String? {
    let formatDescriptions = asset.tracks.flatMap { $0.formatDescriptions }
    let mediaSubtypes = formatDescriptions
        .filter { CMFormatDescriptionGetMediaType($0 as! CMFormatDescription) == mediaType }
        .map { CMFormatDescriptionGetMediaSubType($0 as! CMFormatDescription).toString() }
    return mediaSubtypes.first
} 
```

然后，您可以传入`AVURLAsset`电影的 和`kCMMediaType_Video`或`kCMMediaType_Audio`来分别检索视频和音频编解码器。

该`toString()`函数将`FourCharCode`编解码器格式的表示形式转换为人类可读的字符串，并且可以作为扩展方法提供`FourCharCode`：

```
extension FourCharCode {
    func toString() -> String {
        let n = Int(self)
        var s: String = String (UnicodeScalar((n >> 24) & 255))
        s.append(UnicodeScalar((n >> 16) & 255))
        s.append(UnicodeScalar((n >> 8) & 255))
        s.append(UnicodeScalar(n & 255))
        return s.stringByTrimmingCharactersInSet(NSCharacterSet.whitespaceCharacterSet())
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-17T21:13:44.773

@jbat100 答案的可读性稍强的版本（对于那些和我一样困惑的人`#define FourCC2Str`，哈哈）

```
// Get your format description from whichever track you want
CMFormatDescriptionRef formatHint;

// Get the codec and correct endianness
CMVideoCodecType formatCodec = CFSwapInt32BigToHost(CMFormatDescriptionGetMediaSubType(formatHint));

// add 1 for null terminator
char formatCodecBuf[sizeof(CMVideoCodecType) + 1] = {0};
memcpy(formatCodecBuf, &formatCodec, sizeof(CMVideoCodecType));

NSString *formatCodecString = @(formatCodecBuf); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-16T15:38:31.057

我认为这绝对比应该的要难

```
 #define FourCC2Str(code) (char[5]){(code >> 24) & 0xFF, (code >> 16) & 0xFF, (code >> 8) & 0xFF, code & 0xFF, 0}

    if ([assetTrack.mediaType isEqualToString:AVMediaTypeVideo])
    {
        for (id formatDescription in assetTrack.formatDescriptions)
        {
            NSLog(@"formatDescription:  %@", formatDescription);

            CMFormatDescriptionRef desc = (__bridge CMFormatDescriptionRef)formatDescription;
            //CMMediaType mediaType = CMFormatDescriptionGetMediaType(desc);

            // CMVideoCodecType is typedefed to CMVideoCodecType

            CMVideoCodecType codec = CMFormatDescriptionGetMediaSubType(desc);

            NSString* codecString = [NSString stringWithCString:(const char *)FourCC2Str(codec) encoding:NSUTF8StringEncoding];
            NSLog(@"%@", codecString);

        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-22T03:46:52.433

```
NSArray *formatDescriptions = videoTrack.formatDescriptions;
NSString *formats = [self mediaFormatWithFormatDescriptions:formatDescriptions];

- (NSString *)mediaFormatWithFormatDescriptions:(NSArray *)formatDescriptions {
    NSMutableString *format = [[NSMutableString alloc] init];
    for (int i = 0; i < formatDescriptions.count; i++) {
        CMFormatDescriptionRef desc =
            (__bridge CMFormatDescriptionRef)formatDescriptions[i];
        NSString *type = FourCCString(CMFormatDescriptionGetMediaType(desc));
        NSString *subType = FourCCString(CMFormatDescriptionGetMediaSubType(desc));
        [format appendFormat:@"%@/%@", type, subType];
        if (i < formatDescriptions.count - 1) {
            [format appendString:@","];
        }
    }
    return format;
}

static NSString * FourCCString(FourCharCode code) {
    NSString *result = [NSString stringWithFormat:@"%c%c%c%c",
                        (code >> 24) & 0xff,
                        (code >> 16) & 0xff,
                        (code >> 8) & 0xff,
                        code & 0xff];
    NSCharacterSet *characterSet = [NSCharacterSet whitespaceCharacterSet];
    return [result stringByTrimmingCharactersInSet:characterSet];
} 
```

# python - 如何在特定级别重新排序多索引数据框列

> ID：11194610
> 
> 赞同：31
> 
> 时间：2012-06-25T17:52:09.960
> 
> 标签：python, pandas

我有一个多索引`DataFrame`，其名称附加到列级别。我希望能够轻松地打乱列，使它们与用户指定的顺序相匹配。由于这是在管道中，我无法使用[这个推荐的解决方案](https://groups.google.com/forum/#!topic/pystatsmodels/NlxAGSgh9Xs)并在创建时正确订购它们。

我有一个看起来（有点）像的数据表

```
Experiment           BASE           IWWGCW         IWWGDW
Lead Time                24     48      24     48      24     48
2010-11-27 12:00:00   0.997  0.991   0.998  0.990   0.998  0.990
2010-11-28 12:00:00   0.998  0.987   0.997  0.990   0.997  0.990
2010-11-29 12:00:00   0.997  0.992   0.997  0.992   0.997  0.992
2010-11-30 12:00:00   0.997  0.987   0.997  0.987   0.997  0.987
2010-12-01 12:00:00   0.996  0.986   0.996  0.986   0.996  0.986 
```

我想接受一个类似的列表`['IWWGCW', 'IWWGDW', 'BASE']`并将其重新排序为：

```
Experiment           IWWGCW         IWWGDW         BASE           
Lead Time                24     48      24     48      24     48  
2010-11-27 12:00:00   0.998  0.990   0.998  0.990   0.997  0.991  
2010-11-28 12:00:00   0.997  0.990   0.997  0.990   0.998  0.987  
2010-11-29 12:00:00   0.997  0.992   0.997  0.992   0.997  0.992  
2010-11-30 12:00:00   0.997  0.987   0.997  0.987   0.997  0.987  
2010-12-01 12:00:00   0.996  0.986   0.996  0.986   0.996  0.986 
```

需要注意的是，我并不总是知道“实验”会达到什么水平。我试过了（`df`上面显示的多索引框架在哪里）

```
df2 = df.reindex_axis(['IWWGCW', 'IWWGDW', 'BASE'], axis=1, level='Experiment') 
```

但这似乎不起作用 - 它成功完成，但返回的 DataFrame 的列顺序未更改。

我的解决方法是具有如下功能：

```
def reorder_columns(frame, column_name, new_order):
    """Shuffle the specified columns of the frame to match new_order."""

    index_level  = frame.columns.names.index(column_name)
    new_position = lambda t: new_order.index(t[index_level])
    new_index    = sorted(frame.columns, key=new_position)
    new_frame    = frame.reindex_axis(new_index, axis=1)
    return new_frame 
```

我的期望在哪里`reorder_columns(df, 'Experiment', ['IWWGCW', 'IWWGDW', 'BASE'])`，但感觉就像我在做额外的工作。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-02-05T09:29:44.723

有一个非常简单的方法：只需在原始数据框的基础上创建一个新的数据框，并使用正确的多索引列顺序：

```
multi_tuples = [('IWWGCW',24), ('IWWGCW',48), ('IWWGDW',24), ('IWWGDW',48)
    , ('BASE',24), ('BASE',48)]

multi_cols = pd.MultiIndex.from_tuples(multi_tuples, names=['Experiment', 'Lead Time'])

df_ordered_multi_cols = pd.DataFrame(df_ori, columns=multi_cols) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-06-25T15:04:08.180

这是对我有用的最简单的一个：

1.  对于您选择的级别，创建一个包含所需顺序的列的列表；

2.  重新索引您的列并从该列表创建一个 MultiIndex 对象，请记住这将返回一个元组；

3.  使用 MultiIndex 对象重新排序您的 DataFrame。

```
cols = ['IWWGCW', 'IWWGDW', 'BASE']
new_cols = df.columns.reindex(cols, level=0)
df.reindex(columns=new_cols[0]) #new_cols is a single item tuple 
```

在一行中：

```
df.reindex(columns=df.columns.reindex(['IWWGCW', 'IWWGDW', 'BASE'], level=0)[0]) 
```

瞧

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-08T22:59:04.880

我不知道任何手头的东西。创建了一张关于它的增强票：

[http://github.com/pydata/pandas/issues/1864](http://github.com/pydata/pandas/issues/1864)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-11-22T14:50:56.583

使用 pandas 1.3.2 的我上面评论的解决方案：

```
df.reindex(columns=['IWWGCW', 'IWWGDW', 'BASE'], level='Experiment') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-29T21:00:08.513

[andrew_reece](https://stackoverflow.com/questions/11194610/how-can-i-reorder-multi-indexed-dataframe-columns-at-a-specific-level#comment80347641_12335136)的评论应该是公认的答案。只需使用[reindex()](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.reindex.html)。

从[github 问题](https://github.com/pandas-dev/pandas/pull/9019)复制和粘贴：

```
>>> df
                     vals
first second third       
mid   3rd    992     1.96
             562    12.06
      1st    73     -6.46
             818   -15.75
             658     5.90
btm   2nd    915     9.75
             474    -1.47
             905    -6.03
      1st    717     8.01
             909   -21.12
      3rd    616    11.91
             675     1.06
             579    -4.01
top   1st    241     1.79
             363     1.71
      3rd    677    13.38
             238   -16.77
             407    17.19
      2nd    728   -21.55
             36      8.09
>>> df.reindex(['top', 'mid', 'btm'], level='first')
                     vals
first second third       
top   1st    241     1.79
             363     1.71
      3rd    677    13.38
             238   -16.77
             407    17.19
      2nd    728   -21.55
             36      8.09
mid   3rd    992     1.96
             562    12.06
      1st    73     -6.46
             818   -15.75
             658     5.90
btm   2nd    915     9.75
             474    -1.47
             905    -6.03
      1st    717     8.01
             909   -21.12
      3rd    616    11.91
             675     1.06
             579    -4.01
>>> df.reindex(['1st', '2nd', '3rd'], level='second')
                     vals
first second third       
mid   1st    73     -6.46
             818   -15.75
             658     5.90
      3rd    992     1.96
             562    12.06
btm   1st    717     8.01
             909   -21.12
      2nd    915     9.75
             474    -1.47
             905    -6.03
      3rd    616    11.91
             675     1.06
             579    -4.01
top   1st    241     1.79
             363     1.71
      2nd    728   -21.55
             36      8.09
      3rd    677    13.38
             238   -16.77
             407    17.19
>>> df.reindex(['top', 'btm'], level='first').reindex(['1st', '2nd'], level='second')
                     vals
first second third       
top   1st    241     1.79
             363     1.71
      2nd    728   -21.55
             36      8.09
btm   1st    717     8.01
             909   -21.12
      2nd    915     9.75
             474    -1.47
             905    -6.03 
```

# jquery - 需要旋转图像的总宽度

> ID：11194631
> 
> 赞同：1
> 
> 时间：2012-06-25T17:54:41.837
> 
> 标签：jquery, css, image-rotation

我的效果是，当您将鼠标悬停在这个特定区域上时，它会从底部抬起它，旋转图像并将它们揉在一起。它应该模拟“扇出”一手扑克牌。除了我需要它们居中之外，这一切都很好。我能想到的唯一方法是测量每边最远的角落，但我不知道该怎么做。有人有什么建议吗？我正在使用 jQuery 1.7。

示例链接： http: [//aws.redemptionconnect.com/redemption/play.html](http://aws.redemptionconnect.com/redemption/play.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:47:16.287

与使用 javascript 来计算屏幕宽度不同，使用 margin: auto 变得更有创意更容易

首先，根据卡片在堆栈中的位置，给卡片一个预定义的左值。

然后我们计算`#outer-hand`包装器的宽度。一旦我们有适当的宽度，定义为 auto 的边距将自动将卡片居中到所需的位置！

看看这个：

[http://jsfiddle.net/JE7gf/](http://jsfiddle.net/JE7gf/)

# c++ - 在 pthreads (Linux) 中使用成员函数

> ID：11194636
> 
> 赞同：1
> 
> 时间：2012-06-25T17:54:56.717
> 
> 标签：c++, linux, pthreads

我正在尝试使用以下内容：

pthread_create(&searchThread[i], &threadAttribs[i], DoStuff, &ParallelParams[i]);

如果 DoStuff 是静态的，它会编译，但是我无权访问属于 DoStuff 所在类的任何方法或变量。但是，如果我将 DoStuff 保留为非静态方法，以便我可以访问其他所有内容我得到以下编译器错误的类：

*错误：'void* (MyClass::)(void*)' 类型的参数与'void* ( )* (void ) ' 不匹配

错误似乎是指 DoStuff 参数以及它是成员函数的事实。

是否有希望传递一个非静态方法，允许我在我的 DoStuff 方法中访问 MyClass 中的所有内容？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T21:41:03.940

pthreads 需要`void* startfunc(void*)`签名，并且非静态成员函数具有隐藏`this`指针，因此您必须绕过它。一种简单的方法是在类中创建一个静态辅助函数。将其用作启动函数并在第四个（数据）参数中传递要访问的对象。像这样：

```
class Foo
{
    public:

        void *runThis(void)
        {
            std::cout << "Thread accessing this member function" << std::endl;
            return 0;
        }

        static void *runHelper(void *classRef)
        {
            return ((Foo *)classRef)->runThis();
        }
};

int main(int argc, char *argv[])
{
    Foo foo;
    pthread_t t;

    pthread_create(&t, NULL, &Foo::runHelper, &foo);

    pthread_join(t, NULL);
} 
```

有一些更高级的模板方法类似于上面的方法，但更通用。

# javascript - 通过 jQuery UI 对话框加载嵌入式脚本？

> ID：11194637
> 
> 赞同：4
> 
> 时间：2012-06-25T17:55:00.743
> 
> 标签：javascript, jquery, jquery-ui

我需要有一个弹出并显示一个基本表单的 jQuery UI 对话框，其中还包括一个外部 javascript 文件。

弹出模式，但没有加载任何脚本内容。不知道为什么。如果我直接进入模式正在加载的页面，它工作正常。

模态内容：

```
<link rel="stylesheet" href="http://www.bankrate.com/free-content/css/bankrate-fcc-calculators.css" type="text/css"/>

<input id="mrtgCal" type ="text" value="1,Arial,600" style="display:none" />

<script language="Javascript" src="http://js.bankrate.com/free-calculators/free-simple-mortgage-calculator-widget.js" type="text/javascript"></script>

<script type="text/javascript">mrtgCalcinit();</script> 
```

模态调用：

```
$(function(){
        $('.modal-popup a, .email-button a').each(function() {
            var $link = $(this);
            var $dialog = $('<div></div>')
                .load($link.attr('href') + ' #region-content')
                .dialog({
                    autoOpen: false,
                    width: 600,
                    draggable: false,
                    resizable: false,
                    modal: true,
                    show: "fade",
                    hide: "fade",
                    closeText: 'X'

                });
            $link.click(function(){
                $dialog.dialog('open');
                return false;
            });

        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:14:49.103

如前所述，[load](http://api.jquery.com/load/)不会加载脚本（阅读脚本执行部分）。但是，扩展对话框不是必需的，您可以使用`.delegate()`，`.on()`甚至是一个非常好用的插件，称为[liveplugin](http://docs.jquery.com/Plugins/livequery)来管理加载到对话框中的动态内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:01:24.070

由于您调用的方式，脚本没有运行`.load()`。当您在 URL 后使用选择器时，库将不会运行嵌入式脚本。我的意思是`' #region-content'`在“href”值的末尾添加。

为什么？我不完全知道；我怀疑这与 jQuery 不知道嵌入的`<script>`主体是否依赖于`<head>`（或其他地方）中的脚本来工作这一事实有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:04:11.103

最好的变体是编写您的自定义 jquery ui 小部件，使用您的功能扩展 jquery ui 对话框。

# iphone - OpenGL ES - EAGLView.h 在哪里？代码 4

> ID：11194644
> 
> 赞同：0
> 
> 时间：2012-06-25T17:55:24.143
> 
> 标签：iphone, objective-c, opengl-es, xcode4.2

您好，我对 OpenGL 很陌生，我已经开始尝试通过在线教程来学习它……但是在每个教程中，他们都要求我创建一个 OpenGL ES Xcode 项目，然后编辑 EAGLView.h。但我找不到它。是我自己还是 Xcode 4 改变了它的位置等等。另外，当我运行应用程序时，它给了我两个立方体...... 1 个红色和 1 个蓝色......旋转。在一些教程中，只有一个彩色盒子，而不是 3 维。有可能回到那个状态吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:14:25.407

自您阅读的教程编写以来，示例应用程序发生了显着变化。

EAGLView 在其许多化身中提供了一个`UIView`将 OpenGL 连接到 UIKit 的子类。从 iOS 5 开始，由于 GLKit 的引入，不再需要自定义类。现代 OpenGL 示例只使用了一个，它是一个将 OpenGL 连接到 UIKit`GLKView`的内置子类。`UIView`

示例实际显示的内容也已更改，以突出显示 GLKit 的矢量操作部分，这些部分提供 GL ES 1.1 提供的所有内容，但从 ES 2.0 中删除，等等。

如果您想从教程开始，您可能必须找到一个更新的教程。直接搜索 GLKit 教程可能是最好的主意——[这个](http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1)（在许多其他教程中）看起来大部分涵盖了现代的东西，为了*说点什么*而不是什么都不说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:59:43.417

他们将所有代码移到名为 viewController.h 和 m 的文件中，而不是 EAGLView.h 和 m。

如果你真的生成了一个“OpenGL 游戏”项目，因为他们在新版本的 XCode 中调用它！

就实现显示红色和蓝色框等的 OpenGL 代码而言......他们已经更改了示例代码，您可以从 m 文件中放任何您想要的内容！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:46:57.740

您可以从这里下载示例代码并从中工作：http: [//developer.apple.com/library/ios/#samplecode/GLES2Sample/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/GLES2Sample/Introduction/Intro.html)

# python - 有没有办法用 python 改变 windows7 航空主题？

> ID：11194649
> 
> 赞同：0
> 
> 时间：2012-06-25T17:55:37.093
> 
> 标签：python, windows-7, aero

我想创建一个脚本，该脚本将根据某些条件更改全局 Aero 窗口边框颜色。例如，一个任务在后台完成，它可以将全局窗口玻璃更改为绿色，以获得微妙的通知。

似乎有一种方法可以[通过 Visual Basic](https://stackoverflow.com/a/11172289/496097)做到这一点，但不了解 VB，我想知道是否有人知道用 Python 或其他脚本语言来做到这一点。

# model-view-controller - 不支持关键字：“初始目录”。MVC、ADO.NET 实体框架

> ID：11194653
> 
> 赞同：1
> 
> 时间：2012-06-25T17:55:49.673
> 
> 标签：model-view-controller, ado.net, web-config, connection-string

我在一个解决方案中有一个 MVC WebAPI 项目和一个 ADO.NET 实体框架项目。我正在从 ADO.NET Entity Framework 项目连接和使用数据库，但是当我将 ado.net 项目添加到 MVC WebAPI 项目以便我可以将数据存储在数据库中时，相同的连接字符串不起作用ADO.NET 项目。

我已经从 ado.net 项目中复制了连接字符串并将其粘贴到 mvc 项目的 web.config 文件中，但我得到了不支持的初始目录关键字。

下面是从 ADO.NET 项目完美连接但在 MVC 项目中不起作用的连接字符串。

```
 <add name="StorefrontSystemEntities1"
      connectionString="metadata=res://*/StorefrontSystemDB.csdl|res://*/StorefrontSystemDB.ssdl|res://*/StorefrontSystemDB.msl;provider=System.Data.SqlClient;provider connection string=data source=localhost;initial catalog=StorefrontSystem;persist security info=True;user id=xxxxx;password=xxxxx;MultipleActiveResultSets=True;App=EntityFramework" 
      providerName="System.Data.EntityClient" /> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:10:23.053

我不确定这里到底发生了什么，但它现在正在工作。我注意到对于提供者连接字符串，“”是“”。

```
<add name="StorefrontSystemEntities1"
     connectionString="metadata=res://*/StorefrontSystemDB.csdl|res://*/StorefrontSystemDB.ssdl|res://*/StorefrontSystemDB.msl;
   provider=System.Data.SqlClient;
   provider connection string=&quot;data source=localhost;initial catalog=StorefrontSystem;persist security info=True;
   user id=XXX;password=XXXXX
   MultipleActiveResultSets=True;App=EntityFramework&quot;"
  providerName="System.Data.EntityClient" /> 
```

我不知道这里发生了什么。

# google-visualization - 使用日期列时，第一个和最后一个条被切成两半

> ID：11194654
> 
> 赞同：1
> 
> 时间：2012-06-25T17:56:00.900
> 
> 标签：google-visualization

当我使用日期的列类型时，ColumnChart 中的第一个和最后一个条被切成两半。它似乎是从中间条渲染的。它不会对非日期数据集执行此操作。

有没有办法解决这个问题，以便渲染完整的条形图，并带有一些额外的填充？

[http://jsfiddle.net/7tHVN/](http://jsfiddle.net/7tHVN/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T17:44:39.310

显然，设置 viewWindowMode 确实适用于日期。将以下内容添加到我的图表选项中，其中最小值和最大值是第一个和最后一个日期值之前和之后的日期，至少对我有用。

```
'hAxis': {'viewWindowMode': 'explicit', 'viewWindow': {'max':new Date('2012-10-02'), 'min':new Date('2007-07-02')}} 
```

另请参阅：[柱形图裁剪](https://groups.google.com/forum/?fromgroups=#!search/first%2420and%2420last%2420bars%2420in%2420the%2420ColumnChart/google-visualization-api/EdP7wUCkcxY/m_WJ6ZEgwXgJ)谷歌论坛中的结束栏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T22:58:08.173

我遇到了这个确切的问题（我的标签也奇怪地错位了），它让我疯狂地试图弄清楚。`hAxis.viewWindowMode`通常可以解决此类问题，但不能将其与日期值一起使用。

我最终做的只是完全废弃日期类型，`string`而是指定该列的类型，并将每个 JS 日期对象转换为字符串表示形式，然后再将其添加到 中`DataTable`，因此：

```
data.addColumn('string', 'Date');
data.addColumn('number', 'Performance');

var dates = [new Date('2012-4-12'),
             new Date('2012-4-13'),
             new Date('2012-4-14')];
var performance = [59, 35, 86];

var dateString;
for (var i=0; i<dataForChart.length; i++) {
    dateString = (dates[i].getMonth()+1)+'/'+ // JS months are 0-indexed
                  dates[i].getDate()+'/'+
                  dates[i].getYear();
    data.addRow([dateString, 
                performance[i]]);
} 
```

这会强制图表使用离散轴而不是连续轴进行渲染，从而解决了截止条问题。只要您的数据和日期间隔均匀（每天一次、每周一次等）并且您以正确的顺序传递它们，这种方法就应该有效。

Google Viz 文档中有关于离散轴与连续轴的更多信息：[https ://google-developers.appspot.com/chart/interactive/docs/customizing_axes](https://google-developers.appspot.com/chart/interactive/docs/customizing_axes)

# java - 具有自定义状态的线程

> ID：11194656
> 
> 赞同：4
> 
> 时间：2012-06-25T17:56:13.287
> 
> 标签：java, android, multithreading

是否可以在 Java (Android) 中实现带有自己的状态的自定义版本的线程？

我的意思是：当 ThreadA 处于 Running 状态时，它仍然可以由 ThreadB 轮询，询问其状态

```
e.g.
ThreadA.getState(); 
```

可以将状态值修改为一些自定义值吗？为了在这两个线程之间实现一种基本的通信系统？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T18:11:19.247

是的，这是可能的。我在以前的项目中经常使用它，您所需要的只是扩展`Thread`类。

```
public class StateThread extends Thread{
   String state = "ThreadState";
   public synchronized void setState(String newState){
      state = newState;
   }
   public synchronized String getState(){
      return state;
   }
   @override
   public void run(){
      // Do stuff and update state...
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:18:06.837

是的，可以执行此任务。
这是一个好的设计吗？我不这么认为。
还有其他方法可以在线程之间执行通信 -
例如，您应该使用具有生产者/消费者模式的队列。
我确信 Android，因为 JavaSE 支持线程本地 - 您可以使用它来管理本地线程数据（包括状态）（可能与将获得“操作”的队列结合使用以更改线程管理的状态
如果您确实决定采用 setState 和 getState 方法的解决方案，至少考虑使用 ReaderWriterLock 来优化您的锁定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:19:50.947

线程*状态*由虚拟机维护。VM 使用状态来监视和管理实际线程。

这就是为什么没有修改线程*状态的机制。*没有`setState`允许设置自定义状态的功能。

为了您的应用程序目的，您可以通过扩展 Thread 来定义自己的实例变量，但这不能以任何方式改变 Thread 的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T09:56:33.110

与共享数据同步对于确定线程的“状态”不是很有用 - 线程将其状态写入“健康”，然后卡住 - 监视器线程然后检查状态并发现它是健康的。

监控“状态”应该意味着让被检查的线程做一些事情，而不仅仅是直接查看某个共享对象。

如果您有消息传递设计（如 zaske 建议的那样），您可以在每个线程的输入队列中传递“状态记录”，要求它在内部记录其状态并将其传递给下一个线程。'monitor' 线程等待记录回来，全部填写。如果它在合理的时间内没有得到它，它可以记录它所得到的——它保持对状态记录对象的引用，所以它可以看到哪个线程尚未更新其状态。它可能无法提供看门狗定时器。

# c# - 如何访问另一个页面上列表框的值

> ID：11194657
> 
> 赞同：0
> 
> 时间：2012-06-25T17:56:16.143
> 
> 标签：c#, asp.net, listbox, web-site-project

我在 C# 中有一个网站，在第一页我有一些列表框，我需要最后一个用户的选择转到其他页面中的标签，我该怎么做？

在我的代码中，如果用户选择一个值，一个按钮是可见的，并且在该按钮的单击事件中重定向到另一个页面，但我需要在 page2 的标签中使用该值

```
if (ddlFunciones.SelectedValue.Equals("15"))
{
    lblAgregarNuevoServicio.Visible = true;
    //lblIdFuncion.Visible = true;
    lblDescripcion.Visible = true;
    //txtId_funcion.Visible = true;
    txtDescripcionFuncion.Visible = true;
    btnAgregarNuevaFuncion.Visible = true;
}

protected void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)
{

}
protected void btnVerCargos_Click(object sender, EventArgs e)
{
    if (btnVerCargos.Enabled)
    {
        ListBoxCargo.Visible = true;
    }
    else
    {
        ListBoxCargo.Visible = false;
    }
}
protected void ListBoxCargo_SelectedIndexChanged(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:01:54.027

如果这是在 Asp.Net 中，您可以通过多种方式在页面之间传递信息。您可以使用[Session](http://msdn.microsoft.com/en-us/library/ms178581.aspx)对象

```
protected void ListBoxCargo_SelectedIndexChanged(object sender, EventArgs e)
{
   Session["MyVar"] = ListBoxCargo.SelectedValue;
} 
```

在你的其他页面

```
object value;
if (Session["MyVar"] != null)
{
   value = Session["MyVar"]
} 
```

**或者**

通过在 QueryString 中传递它们，请参阅[Passing-variables-between-pages-using-QueryString](http://www.codeproject.com/Articles/5876/Passing-variables-between-pages-using-QueryString) 并使用`Request.QueryString["MyVar"]`

当然还有更多，请解释一下你到底想做什么......

**编辑：基于 OP 评论：**

在第 1 页中：

```
protected void Button1_Click(object sender, EventArgs e)
    {
        Session["Page1Value"] = ListBox3.SelectedItem.Text;
       //Response.Redirect("~/Page2.aspx");
    } 
```

在第 2 页中：

```
 protected void Page_Load(object sender, EventArgs e)
 {
    if (Session["Page1Value"] != null)
    {
       Label1.Text = Session["Page1Value"].ToString();
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:02:27.717

在将用户重定向到另一个页面之前，将选定的值存储在用户的会话中。

```
 protected void Button1_Click(object sender, EventArgs e)
 {
     Session["userSelectedValue"] = ListBox1.SelectedValue;
     Response.Redirect("OtherPage.aspx");
 } 
```

在另一页上，只需从会话中提取选定的值。

例如：

```
protected void Page_Load(object sender, EventArgs e)
{
    var selectedValue = Session["userSelectedValue"];    
} 
```

使用互联网上可用的会话变量的例子已经足够多了。

我建议您阅读[ASP.NET Session State](http://msdn.microsoft.com/en-us/library/ms972429.aspx)。

# linux - 变量中带有“#”的 SED

> ID：11194659
> 
> 赞同：2
> 
> 时间：2012-06-25T17:56:18.643
> 
> 标签：linux, sed

我有一个脚本可以编辑头文件并替换一些文本。

我要替换的文本行是：

```
#define A MYTEXT 
```

我需要对MYTEXT做一些操作，所以我在文件中循环查找字符串并获取值：

```
if [[ "$line" == *MYTEXT* ]]
then
  echo $line
  bn=`echo $line| cut -d 'Y' -f 2` #split at the Y value in the string
  #operation here and junk here
  sed 's/'$line$'/'$texttoreplace'/g' HeaderFile.h > out.header.h
fi
done < HeaderFile.h 
```

这适用于普通字符串，但是 sed 正在消亡：

```
#define A MYTEXT
sed: 1: "s/#define": unterminated substitute pattern 
```

当我使用其中没有“#”的文件时，它工作正常，它只是那个文件。

关于我能做些什么来解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:03:02.647

### 问题

你有一个报价问题。根据您的设置，Bash 会将未引用的 '#' 之后的任何内容视为注释。

### 解决方案

您应该用双引号将您的 sed 表达式括起来，并用大括号将您的 shell 变量与表达式中的周围文本分开。例如：

```
line='#define A MYTEXT'
texttoreplace='foo'
echo "$line" | sed "s/${line}$/${texttoreplace}/g" 
```

# iphone - 在 iphone 的 safari 上隐藏地址栏不起作用

> ID：11194661
> 
> 赞同：0
> 
> 时间：2012-06-25T17:56:36.687
> 
> 标签：iphone, html, safari, iphone-standalone-web-app

我希望我的网站在 iPhone 的 safari 中查看时不显示地址栏。根据我的研究，这个元标记应该可以解决问题，如果只针对 iPhone 设备：

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

当我在4S上测试时，它似乎没有起到作用。

也试过

```
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="viewport" content="width=device-width" /> 
```

还有什么需要做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T17:58:55.297

您在问题中引用的`apple-mobile-web-app-*`元标记仅在用户将您的 Web 应用程序添加到他们的主屏幕时适用，之后他们可以单击该图标并且它似乎是一个本机应用程序（即使它不是）。

只要您的应用程序在设备上的 Safari 中被访问，Safari chrome 就会出现。

# java - 扩展 AsyncTask

> ID：11194663
> 
> 赞同：42
> 
> 时间：2012-06-25T17:56:41.243
> 
> 标签：java, android

在我的 android 应用程序中，我正在`doInBackground`通过扩展`AsyncTask<Void, Void, Void>`类执行一些操作。（我在这个类中执行任何 UI 都没有用）

1.  这是正确使用 AsyncTask 吗？
2.  如果是这样，我可以改为扩展 AsyncTask 吗？
3.  `AsyncTask`扩展和扩展有什么区别`AsyncTask<Void, Void, Void>`

代码示例：

```
public class MessagePooling extends AsyncTask<Void, Void, Void>
{        
    @Override
    protected Void doInBackground(Void... params) 
    {
        while (!isCancelled()) 
        {           
           //Getting data from server            
            SystemClock.sleep(1000);
        }
        return null;
    }
} 
```

或者：

```
public class MessagePooling extends AsyncTask
{
    @Override
    protected Object doInBackground(Object... params) 
    {
        while (!isCancelled()) 
        {           
           //Getting data from server            
            SystemClock.sleep(1000);
        }
        return null;    
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-25T18:12:26.350

该类`AsyncTask`可以被认为是一种非常方便的线程机制。它为您提供了一些工具，您可以使用这些简单的 Java 线程根本没有的工具，例如取消清理操作。您不必在后台执行任何 UI。您可以简单地通过将一个编写为匿名类来执行一个，如下所示：

```
 new AsyncTask<Integer, Void, Void>(){
        @Override
        protected Void doInBackground(Integer... params) {
            // **Code**
            return null;
        }
    }.execute(1, 2, 3, 4, 5); 
```

它将`doInBackground`使用给定的参数执行您在后台线程中输入的任何内容。同样，您可以简单地使用`Void`和执行不带参数的操作。

我能想到以这种方式执行线程的唯一优点是有助于将来的维护。在某些情况下，您可能想要修改 UI 线程上需要的某些内容，在这种情况下，您将覆盖其他方法。其他情况是你根本没有做足够的动作来证明写出另一个类是合理的，所以只需动态创建一个并完成它。

**编辑：**

回答＃3：它们实际上是相同的。该`Void`对象是一个Java 对象，就像其他任何东西一样。你没有使用`Void`，所以你在它的地方使用什么并不重要。只是`AsyncTask`合约需要传入三种类类型，默认情况下它们是`Object`所有东西的基线类。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-25T18:00:27.767

> （我在这个类中执行任何 UI 都没有用）

然后只使用普通`Thread`类而不是使用`AsyncTask`专为在线程生命周期内处理 UI 更改而设计的类：

```
Runnable r = new Runnable()
{
    @Override
    public void run()
    {
        // your code here
    }
};

Thread t = new Thread(r);
t.start(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T18:01:30.790

> 这是正确使用 AsyncTask 吗？

你没有说你的目标是什么。但 AsyncTask 一般用于长任务，工作时更新 UI 来准确通知一些长时间工作的一些进度变化。它也是非常高效、类型安全的工具，并且比 Handler 更复杂。

> 扩展 AsyncTask 和 AsyncTask 有什么区别

AsyncTask 是泛型类型，您应该将泛型与它们一起使用，这样代码会更快、更安全。

> 我在执行任何 UI 时都没有用

因此，您宁愿使用`Handler`经典`Runnable`接口，并且基本上只能使用工作线程。

**注意：**通常，使用泛型类型可以使代码更快，最安全。下一个优点是编译源代码时的强类型检查、显式转换的限制等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-12T16:47:07.777

1.  这是正确使用异步任务吗？

我认为没有任何适当的用途。您可以使用 asynctask 在后台线程上执行密集操作并在主线程上发布结果、更新。您必须发布结果或进度不是强制性的。那是给你的。你的决定。

但是对于您的网络操作，您也可以使用线程。但是后来您决定在主线程上发布结果和进度，Asynctask 将以简单的方式帮助您。

线程没有。

Asynctask 使用通用数据类型作为参数。你必须提供它。如果您不想提供或接受来自 asyctask 的任何数据。您可以使用 Void 类型，

就像下面给出的

```
class MessagePooling extends AsyncTask<Void,Void,Void> 
```

这意味着 asynctask 不会获得**任何参数，不会给您任何进度或结果。**

有关 asynctask 的更多信息：[http ://androidride.com/beginners-guide-asynctask-android-tutorial-example/](http://androidride.com/beginners-guide-asynctask-android-tutorial-example/)

# python - 为什么这个代码在 Cython 中比在 Python 中慢？

> ID：11194666
> 
> 赞同：16
> 
> 时间：2012-06-25T17:57:07.483
> 
> 标签：python, performance, cython

由于性能问题，我开始学习 Cython。此特定代码是尝试在交通建模（用于规划）领域实现一些新算法。

我决定从一个非常简单的函数开始，我将使用很多（数亿次）并且肯定会从性能提升中受益。

我以三种不同的方式实现了这个函数，并为相同的参数（为了简单起见）分别测试了 1000 万次：

*   cython 模块中的 Cython 代码。运行时间：3.35s

*   Cython 模块中的 Python 代码。运行时间：4.88s

*   主脚本上的 Python 代码。运行时间：2.98s

    如您所见，cython 代码比 cython 模块中的 python 代码慢 45%，比主脚本上编写的代码慢 64%。这怎么可能？我在哪里犯错？

cython 代码是这样的：

```
def BPR2(vol, cap, al, be):
    con=al*pow(vol/cap,be)
    return con

def func (float volume, float capacity,float alfa,float beta):
    cdef float congest
    congest=alfa*pow(volume/capacity,beta)
    return congest 
```

测试脚本是这样的：

```
agora=clock()
for i in range(10000000):
    q=linkdelay.BPR2(10,5,0.15,4)

agora=clock()-agora
print agora

agora=clock()
for i in range(10000000):
    q=linkdelay.func(10,5,0.15,4)

agora=clock()-agora
print agora

agora=clock()
for i in range(10000000):
    q=0.15*pow(10/5,4)

agora=clock()-agora
print agora 
```

我知道诸如超越函数（功率）变慢之类的问题，但我认为这不应该是一个问题。

由于在函数空间上查找函数会产生开销，如果我为函数传递一个数组并取回一个数组，它会有助于提高性能吗？我可以使用用 Cython 编写的函数返回一个数组吗？

作为参考，我正在使用：

*   视窗 7 64 位
*   Python 2.7.3 64 位
*   Cython 0.16 64 位
*   视窗视觉工作室 2008

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:14:11.477

测试是使用：

```
for i in range(10000000):
  func(2.7,2.3,2.4,i) 
```

结果如下：

```
cdef float func(float v, float c, float a, float b):
  return a * (v/c) ** b
#=> 0.85

cpdef float func(float v, float c, float a, float b):
  return a * (v/c) ** b
#=> 0.84

def func(v,c,a,b):
  return a * pow(v/c,b)
#=> 3.41

cdef float func(float v, float c, float a, float b):
  return a * pow(v/c, b)
#=> 2.35 
```

为了获得最高效率，您需要在 C 中定义函数并使返回类型为静态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:11:29.293

这个函数可以这样优化（在 python 和 cython 中，删除中间变量更快）：

```
def func(float volume, float capacity, float alfa,f loat beta):
    return alfa * pow(volume / capacity, beta) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:14:19.163

当 Cython 较慢时，可能是由于类型转换，并且可能因缺少类型注释而加剧。此外，如果您在 Cython 中使用 C 数据结构，这往往比在 Cython 中使用 Python 数据结构更快。

我在 CPython 2.x（有和没有 Cython，有和没有 psyco）、CPython 3.x（有和没有 Cython）、Pypy 和 Jython 之间进行了性能比较。Pypy 是迄今为止最快的，至少在检查的微基准测试中： [http ://stromberg.dnsalias.org/~strombrg/backshift/documentation/performance/](http://stromberg.dnsalias.org/~strombrg/backshift/documentation/performance/)

# c# - Sharepoint 2010 FullTextSQLQuery 未返回所有结果

> ID：11194670
> 
> 赞同：1
> 
> 时间：2012-06-25T17:57:10.503
> 
> 标签：c#, .net, sharepoint, search, full-text-search

我目前有一个非常奇怪的问题。

这是我正在使用的查询：

```
string queryText = string.Format("SELECT Path, TelefoneContacto, EmpresaContacto, DireccaoContacto, MailContacto, TelemovelContacto, NomeContacto FROM scope() WHERE FREETEXT(NomeContacto, '{0}') AND (CONTAINS(Path,'/Contactos/Pages/')) ORDER BY \"NomeContacto\" ASC", keyword);
FullTextSqlQuery query = new FullTextSqlQuery(site);
query.ResultTypes = ResultType.RelevantResults;
query.EnableStemming = true;
query.TrimDuplicates = true;//alterado 4 Junho 2012
query.Hint = QueryHint.OptimizeWithPropertyStore;
query.KeywordInclusion = KeywordInclusion.AllKeywords;
query.Culture = SPContext.Current.Web.Locale;
query.RowLimit = 200;
query.QueryText = queryText; 
```

现在，一个例子。

我正在搜索的列是“NomeContacto”。想象一下，我正在寻找一个 NomeContacto = "Rodrigo José Amaral Costa Nunes" 的人。如果我搜索“Costa”，它会返回 38 个结果，但以上都不是。

但是，如果关键字是“Rodrigo Costa”，那么唯一的结果（正确）就是上面的人。

甚至对此有解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:09:35.100

谢谢，但我解决了。

原来这是

```
query.TrimDuplicates = true; 
```

导致问题的行。我将它从 true 更改为 false，现在它在“costa”搜索中返回了 10 个以上的结果。

但是，这没有任何意义。TrimDuplicates 用于重复值，为什么要限制完全不同页面的结果？

不管怎么说，还是要谢谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:41:24.143

您可以尝试在 FREETEXT 谓词中为您的内容指定区域设置

```
CONTAINS | FREETEXT
([<column_identifier>,]'<content_search_condition>' [,LCID]) 
```

有关本地化搜索的更多信息，请[点击此处](http://msdn.microsoft.com/en-us/library/aa979562%28v=office.12%29)

# excel - 当我以交互方式关闭 Excel 时，Lisp OLE Excel 进程不会被杀死

> ID：11194672
> 
> 赞同：2
> 
> 时间：2012-06-25T17:57:14.057
> 
> 标签：excel, lisp

我正在开发一个用 Lisp 编写的应用程序。我正在使用 Franz OLE 启动该过程。它打开excel很好，但是当我以交互方式关闭excel时，这个过程仍然存在。当我以交互方式关闭 excel 窗口时，我不确定如何终止该进程。有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:48:39.123

当您通过自动化启动 Excel 时，只要它被引用¹ ，它就会一直保持活动状态。以交互方式关闭它并不一定会退出应用程序，在这种情况下，因为您的[`ole:remote-autotool`](http://www.franz.com/support/documentation/9.0/doc/ole_reference.htm#REMOTEAUTOTOOL)for Excel 尚未发布。

让 Excel 退出的一种方法是去掉 autotool 包装器，例如，如果您有一个存储在变量或对象的插槽中，请将其值设置为`nil`：

```
(let ((excel-app (ole:ask-for-autotool "Excel.Application"
                                       ole:CLSCTX_LOCAL_SERVER)))
  ;; ...
  ;; Break the reference to all autotool wrappers you no longer need
  (setf excel-app nil)) 
```

在 Allegro CL 的[OLE 接口](http://www.franz.com/support/documentation/9.0/doc/ole.htm)[`IUnknown`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680509%28v=vs.85%29.aspx)中，客户端包装器的创建注册了一个[终结](http://www.franz.com/support/documentation/9.0/doc/gc.htm#finalizations-2)，该终结在它被垃圾收集时释放底层接口指针。

自动工具是另一个包装器，它包含一个[`IDispatch`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221608%28v=vs.85%29.aspx)客户端包装器（它继承自`IUnknown`，就像所有 COM 接口一样），以与脚本语言相同的方式简化它的使用，即[COM 自动化中的后期绑定](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221120%28v=vs.85%29.aspx)。当您停止引用自动工具时，底层`IDispatch`/`IUnknown`客户端包装器可能会被垃圾收集，从而被释放。

但是，Excel 可能不会以这种方式立即退出，除非您期望或强制进行垃圾回收²。如果您希望 Excel 在没有交互的情况下立即退出，您应该将[`Quit`](http://msdn.microsoft.com/en-us/library/office/ff839269.aspx)Excel[`DisplayAlerts`](http://msdn.microsoft.com/en-us/library/office/ff839782.aspx)设置为 false，然后设置[`ole:release`](http://www.franz.com/support/documentation/9.0/doc/ole_reference.htm#RELEASE)您的 autotool 对象（注意：我没有彻底测试过这个）：

```
(let ((excel-app (ole:ask-for-autotool "Excel.Application"
                                       ole:CLSCTX_LOCAL_SERVER)))
  ;; ...
  ;; Disable prompts asking to save unsaved workbooks
  ;; They will not be saved
  (setf (ole:auto-getf excel-app "DisplayAlerts") nil)
  (ole:auto-method excel-app "Quit")
  ;; Manually release all autotool wrappers you no longer need
  (ole:release excel-app)) 
```

自动工具的预定完成在我们手动发布后不会失败。它检查底层接口指针包装器是否已被释放，可能通过检查其类现在是否为`ole::released-IUnknown`³，因为它被记录在[`ole:release (ole:IUnknown-Client)`](http://www.franz.com/support/documentation/9.0/doc/ole_reference.htm#RELEASE).

还有一种蛮力方式使用[`ole:release-process-client-interfaces`](http://www.franz.com/support/documentation/9.0/doc/ole_reference.htm#RELEASEPROCESSCLIENTINTERFACES)，但您应该确保您不会访问到目前为止在当前 lisp 进程（线程）中创建的任何 OLE 对象：

```
(mp:process-run-function
 "Excel worker"
 #'(lambda ()
     (ole:start-ole)
     (unwind-protect
         (let ((excel-app (ole:ask-for-autotool "Excel.Application"
                                                 ole:CLSCTX_LOCAL_SERVER)))
           ;; ...
           ;; Disable prompts asking to save unsaved workbooks
           ;; They will not be saved
           (setf (ole:auto-getf excel-app "DisplayAlerts") nil)
           (ole:auto-method excel-app "Quit")
           ;; Make sure this is the last thing you do, the wrappers
           ;; created in the current process will become invalid
           (ole:release-process-client-interfaces))
       ;; Given this call, the brute force doesn't make much sense anyway
       (ole:stop-ole)))) 
```

* * *

^(1.)只要持有任何注册工厂的锁或保留对由 excel.exe 创建的任何对象的引用，它就应该继续运行。[这对于进程外服务器](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679709.aspx)来说是正常的。

^(2.)如果您的 autotool 实例已使用tenured，则需要对它的生成进行垃圾收集，这通常可以通过全局 GC 来实现，然后最终确定并释放。

^(3.)在 Common Lisp 中，您可以[更改](http://www.lispworks.com/documentation/HyperSpec/Body/f_chg_cl.htm#change-class)对象的类。

# backbone.js - Backbone.js 路由器初始化函数

> ID：11194674
> 
> 赞同：0
> 
> 时间：2012-06-25T17:57:17.153
> 
> 标签：backbone.js, backbone-routing

我对backbone.js 还是很陌生，并且仍在学习一切是如何工作的。我正在尝试了解`initialize`骨干路由器的选项是如何工作的，并且无法找到任何好的文档或示例，所以我希望这里有人可以帮助我理解它。我其实有几个关于它的问题......

1.  如果我定义了具有多个路由的路由器，那么`initialize`每次调用其中一个路由时是否调用该函数并调用`router.navigate`??
2.  将路由处理程序的执行延迟到初始化发生之后的最合适的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:00:44.397

> 如果我定义具有多个路由的路由器，每次调用其中一个路由并调用 router.navigate 时，是否都会调用初始化函数？

将`initialize`函数视为`constructor`您通常会在其他 OOP 语言或 OOP 概念中找到的函数。**每当您创建一个新实例**时，都会调用该`initialize`函数。因此，您可以在其中放置任何初始化代码、设置或默认值等。

> 将路由处理程序的执行延迟到初始化发生之后的最合适的方法是什么？

你不用担心，主干会在适当的时候触发事件。

请记住，**`initialize`仅当您创建类的新实例时才会调用它。**使用`new`关键字。

# cakephp - cakephp 用于多个静态站点

> ID：11194677
> 
> 赞同：0
> 
> 时间：2012-06-25T17:57:30.087
> 
> 标签：cakephp, static

我已经成功创建了一个静态网站，使用 cakephp 使用控制台创建静态 html 文件。

但是，我现在想要做的是有一个控制台脚本，它可以从相同的共享数据创建多个网站，每个网站都使用它独有的数据，但共享数据库作为源。

那么，如何设置与每个网站相关的应用程序文件夹？我需要为每个站点单独安装 cakephp 吗？或者我可以在 cgi-bin 或类似的东西中有一个共享的 App 文件夹吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:15:46.107

您可以在多个应用程序之间共享 CakePHP 核心，但是您需要为每个网站创建一个单独的“应用程序”文件夹（具有适当的结构）。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/5706245/cakephp-shared-core-for-multiple-apps)。本质上，您需要修改`index.php`每个`app/webroot`文件夹中的文件以指向 CakePHP 核心。我使用这种技术，与为每个站点单独安装 Cake 相比，仅使用一个内核来维护要容易得多。

# regex - Visual Studio 中正则表达式语法的困难

> ID：11194694
> 
> 赞同：1
> 
> 时间：2012-06-25T17:58:41.747
> 
> 标签：regex, visual-studio-2010

我正在使用这个正则表达式来查找所有出现的`INT IDENTITY (1, 1) NOT NULL`：

```
\bINT\s*IDENTITY\s*\(1,\s*1\)\s*NOT\s*NULL\b 
```

它在整个上下文中的位置示例如下：

```
CREATE TABLE table1 (
    [col]                INT      IDENTITY (1, 1) NOT NULL,
    [col2]               INT      NOT NULL,
    [col3]               BIT      NOT NULL,
    [col4]               BIT      NOT NULL,
    [col5]               DATETIME NOT NULL,
    PRIMARY KEY CLUSTERED ([col] ASC) WITH (FILLFACTOR = 90, ALLOW_PAGE_LOCKS = ON, ALLOW_ROW_LOCKS = ON, PAD_INDEX = OFF, IGNORE_DUP_KEY = OFF, STATISTICS_NORECOMPUTE = OFF)
); 
```

但是上面的正则表达式没有找到任何东西。当我使用[Rubular](http://rubular.com/)、 Gskinner 或[Regex Hero](http://regexhero.net/)在线尝试时，它可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:13:28.483

试试这个：

```
:b+INT:b+IDENTITY:b+(1,:b*1):b+NOT:b+NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:08:19.743

Visual Studio 有自己特定的正则表达式风格 - 例如没有`\b`（我认为是单词边界），所以使用它是行不通的。

我建议阅读正则表达式 (Visual Studio) [2010](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.100%29.aspx) / [2012](http://msdn.microsoft.com/en-us/library/2k3te2cs.aspx)的语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T13:48:34.273

我最终使用了以下表达式：

```
INT:b+IDENTITY:b+\(1,:b*1\):b+NOT:bNULL 
```

# scala - Play 2.0 - 从 Scala 控制台访问正在运行的（假）应用程序

> ID：11194695
> 
> 赞同：6
> 
> 时间：2012-06-25T17:58:45.483
> 
> 标签：scala, playframework-2.0

我刚刚开始使用 Play Framework 2.0（使用当前的主干 2.1-SNAPSHOT，Scala），我发现在`play console`.

然而，对于某些事情，例如依赖于`play.libs.WS`API 的东西，我得到了`There is no started application`错误。很公平，但我不知道如何设置一个假的，以便从控制台使用，或者这是否可能。

似乎`play.api.test._`甚至无法从控制台访问。有什么建议么？

更新：感谢@charroch，我需要运行`play test:console`，所以我现在可以这样做：

```
import play.api.test.Helpers.running
import play.api.test.FakeApplication

val res = running(FakeApplication()) { 
    MyWebservice.someFunction()  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:27:39.217

尝试`test:console`在类路径中使用测试 api 启动控制台

您需要按照 以下要求`running(FakeApplication) {...}`进行测试： [http ://www.playframework.org/documentation/2.0/ScalaTest](http://www.playframework.org/documentation/2.0/ScalaTest)

# api - Amazon EC2 实例远程启动

> ID：11194706
> 
> 赞同：3
> 
> 时间：2012-06-25T18:00:00.590
> 
> 标签：api, amazon-web-services, amazon-ec2, remote-access

有人可以详细说明如何远程启动 EC2 实例的详细信息吗？

我在本地设置了一个 Linux 机器，并想在其上设置一个 cronjob 以在 Amazon EC2 中启动一个实例。我怎么做？

我从来没有使用过 API，如果有使用 API 的方法，有人可以解释一下如何做...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:07:48.273

很简单。

1.  下载 EC2 API。它有一个 CLI。
2.  保留`EC2_PRIVATE_KEY`并`EC2_CERT`作为您的 envt 变量，它们所在的位置`private key`以及`certificate`您从 EC2 控制台生成的文件。
3.  然后打电话`ec2-reboot-instances instance_id [instance_id ...]`

完毕。

参考：[http ://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-RebootInstances.html](http://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-RebootInstances.html)

* * *

**编辑 1**

> 我是否将其直接下载到我的 Linux 机器上？以及如何访问 EC2 API 的 linux 框上的 CLI？抱歉问了这么多问题，只需要知道如何做到这一点的详细步骤。

1.  是的。从[这里下载](http://aws.amazon.com/developertools/351)

2.  如果您已将 API 解压缩到 中`/home/naishe/ec2api`，则可以调用`/home/naishe/ec2api/bin/ec2-reboot-instance <instance_id>`. 或者事件最好将解压缩的位置设置为您的环境变量并附`EC2_API_HOME`加到`$EC2_API_HOME/bin`您系统的`PATH`.

[另外，尝试在入门文档](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/SettingUp_CommandLine.html)上投入一些时间，这非常简单。

# android - 如何在同一活动中重新加载菜单android？

> ID：11194707
> 
> 赞同：9
> 
> 时间：2012-06-25T18:00:05.337
> 
> 标签：android, android-menu

我的应用程序 android 中有一个菜单。当我单击添加收藏夹时，我需要重新加载菜单选项，使其在选项中显示为收藏夹而不显示添加收藏夹。

由于后退按钮，我不想使用重新加载活动。

我的代码：

```
public boolean onCreateOptionsMenu(Menu menu) {
    try
    {
        MenuItem menuInicio = menu.add(INICIO, INICIO, 0, "Início");
        menuInicio.setIcon(android.R.drawable.ic_menu_edit);

        MenuItem menuBusca = menu.add(BUSCA, BUSCA, 0, "Buscar");
        menuBusca.setIcon(android.R.drawable.ic_menu_search);

        SubMenu menuFavoritos = menu.addSubMenu(FAVORITOS, FAVORITOS, 0, "Favoritos");
        if(!phytoterapicContent.getPhytoterapicItem().getIsFav())
            menuFavoritos.add(FAVORITOS, ADD_FAV, 0, "Adicionar aos Favoritos");
        else
            menuFavoritos.add(FAVORITOS, DEL_FAV, 1, "Remover dos Favoritos");
        menuFavoritos.add(FAVORITOS, LIST_FAV, 2, "Listar Favoritos");
        menuFavoritos.setIcon(android.R.drawable.star_off);
        }
        catch (Exception e) {
        }            
        return super.onCreateOptionsMenu(menu);
    }

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case INICIO:
            Intent it = new Intent(ShowPhytoterapicActivity.this, HomeActivity.class);
            startActivity(it);
            break;
        case BUSCA:
            Intent it3 = new Intent(ShowPhytoterapicActivity.this, ShowSearchParametersActivity.class);
            startActivity(it3);
            break;
        case ADD_FAV:
            try {
                Dao<PhytoterapicItem, Integer> phytoterapicItemDao = getHelper().getPhytoterapicItemDao();
                phytoterapicContent.getPhytoterapicItem().setIsFav(true);
                phytoterapicItemDao.update(phytoterapicContent.getPhytoterapicItem());
                Toast.makeText(ShowPhytoterapicActivity.this, "Adicionado aos Favoritos", Toast.LENGTH_LONG).show();
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;
        case DEL_FAV:
            try {
                Dao<PhytoterapicItem, Integer> phytoterapicItemDao = getHelper().getPhytoterapicItemDao();
                phytoterapicContent.getPhytoterapicItem().setIsFav(false);
                phytoterapicItemDao.update(phytoterapicContent.getPhytoterapicItem());
                Toast.makeText(ShowPhytoterapicActivity.this, "Removido dos Favoritos", Toast.LENGTH_LONG).show();
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;
        case LIST_FAV:
            Intent it5 = new Intent(ShowPhytoterapicActivity.this, ShowFavoritesActivity.class);
            startActivity(it5);
            break;
    }
    return true;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-25T18:04:24.563

使用[onPrepareOptionsMenu](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)

准备要显示的屏幕标准选项菜单。每次显示菜单时，都会在菜单显示之前调用它。您可以使用此方法有效地启用/禁用项目或以其他方式动态修改内容。

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    menu.clear();
    if(isChangedStat) {
        menu.add(0, MENUITEM, 0, "True");
    } else {
        menu.add(0, MENUITEM, 0, "False");
    }
    return super.onPrepareOptionsMenu(menu);
} 
```

请注意两点

1-如果可能，只需启用或禁用菜单项，或者在您的情况下看起来可能可以更改同一菜单的标题，因为 menu.clear(); 处理时可能需要过度注意

2-根据 Atlos 提供的链接

在 Android 2.3.x 及更低版本上，系统会在用户每次打开选项菜单 ( ) 时调用 onPrepareOptionsMenu( `presses the Menu button`)。

在 Android 3.0 及更高版本上，当菜单项出现在操作栏中时，选项菜单被认为始终处于打开状态。当一个事件发生并且你想要执行一个菜单更新时，`you must call invalidateOptionsMenu()`请求系统调用onPrepareOptionsMenu()。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T18:04:54.863

这是一个相关链接：http: [//developer.android.com/guide/topics/ui/menus.html#ChangingTheMenu](http://developer.android.com/guide/topics/ui/menus.html#ChangingTheMenu)

这取决于您所针对的 Android 版本。不确定你是否已经阅读过这部分，但我的任何其他建议都是逐字记录的。

# ubuntu - 使用 OpenCV 打开和读取 avi 文件 - Ubuntu

> ID：11194713
> 
> 赞同：3
> 
> 时间：2012-06-25T18:00:35.500
> 
> 标签：ubuntu, opencv, codec, avi

我刚刚在 R. Laganiere 的《OpenCV 2 Computer Vision Application Programming Cookbook》一书中读到了这一点：

> 需要注意的是，为了打开指定的视频文件，你的电脑必须安装相应的编解码器，否则 cv::VideoCapture 将无法理解输入文件。通常，如果您能够使用机器上的视频播放器（例如 Windows Media Player）打开视频文件，那么 OpenCV 也应该能够读取该文件。

不幸的是，事情对我来说并不容易。是的，我可以在我的视频播放器上读取 avi 文件，但它不适用于我的 OpenCV-Qt 应用程序。VideoCapture isOpen() 方法返回 false，尽管路径正确，并且所需的每个编解码器似乎都在这里。我尝试了几个文件，因此它与一种特定格式无关。

这里有人有使用 OpenCV 在 Ubuntu 中打开 avi 文件的经验吗？我认为这是一个大问题，在互联网上找不到任何真正相关的解决方案......

谢谢 ！！

[编辑] 这是我正在处理的功能；这里的一些变量是类成员，所以看起来可能不完整。但是，正是这段代码不起作用。特别是，我实例化一个新的 VideoCapture 对象的那一行。

```
void MainWindow::on_actionOuvrir_fichier_triggered()
{
    //mettre a -1 streamId
    streamId = -1;
    //get path to the avi file
    QString fileName = QFileDialog::getOpenFileName(this,tr("Ouvrir fichier video"),"/home", tr("Videos (*.avi)"));
    std::string utf8_text = fileName.toUtf8().constData();
    //open .avi
    capture = new VideoCapture(utf8_text);
    //check 
    if(!capture->isOpened())
        cout << "probleme ouverture fichier video" << endl;
    //delay between each frame in ms
    rate = capture->get(CV_CAP_PROP_FPS);
    delay = 1000 / rate;
    //start Qtimer recordId
    recordId = startTimer(delay);
    //capture first frame
    if(!capture->read(in))
        cout << "probleme lecture frame fichier video" << endl;
} 
```

[编辑 2] 在 Windows 7 上测试

```
void MainWindow::on_actionOuvrir_fichier_triggered()
{
    //mettre a -1 streamId
    streamId = -1;
    //ouvrir fenetre navigation fichiers pour recuperer path vers .avi
    QString fileName = QFileDialog::getOpenFileName(this,tr("Ouvrir fichier video"),"/home",
                                                    tr("Videos (*.avi)"));
    //std::string utf8_text = fileName.toUtf8().constData();
    std::string current_locale_text = fileName.toLocal8Bit().constData();
    if(QDir().exists(current_locale_text.c_str())) std::cout << "Path is good!" << endl;
    //ouvrir .avi
    capture = new VideoCapture(current_locale_text);
    //check ouverture
    if(!capture->isOpened())
        cout << "probleme ouverture fichier video" << endl;
    //calculer delay between each frame in ms
//    rate = capture->get(CV_CAP_PROP_FPS);
//    delay = 1000 / rate;
    //demarrer timer recordId
    recordId = startTimer(100);
    //capture premiere frame
    if(!capture->read(in))
        cout << "probleme lecture frame fichier video" << endl;
} 
```

使用该代码，我能够打开一些 avi 文件，但不是全部（实际上远非如此）。所以我想我肯定有编解码器问题......有人能告诉我如何在 Ubuntu 下解决这个问题吗？不要让我继续赏金！非常感谢你。

[编辑 3] 正如[Etienne](https://stackoverflow.com/users/461338/etienne)所建议的，我按照[此处](http://opencv.willowgarage.com/wiki/VideoCodecs)的说明，并尝试将我的视频转换为 OpenCV 在所有平台上都支持的 I420 格式，使用带有给定命令行的 mencoder。因此，根据 VLC，我从 24 位 RGB (RV24) 编解码器转到了 Planar 4:2:0 YUV (I420)。虽然行为相同，但我仍然无法实例化 VideoCapture 对象。

[在 Stack Overflow 上有很多](https://stackoverflow.com/questions/6971231/first-time-using-open-cv-not-able-to-play-avi-file)类似于我的未解决案例...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T02:18:30.103

我终于设法解决了我的问题。

我做了什么 ：

*   尝试打开一些视频，最终找到一个可以工作的视频。幸运的是，我只花了 3 个视频就找到了一个有效的视频。

*   使用 VLC 检查编解码器。它是 MPEG-4 XVID。

*   使用 mencoder 将我想读取的文件转换为 XVID：

    `sudo mencoder myFile.avi -ovc lavc vcodec=mpeg4:mbd=2:cbp:trell:vbitrate=300 -ffourcc XVID -o test.avi`

我也切换到旧的**C**函数`cvCaptureFromFile()`。我将回到**C++**接口以确保它确实是一个编解码器问题，但我很确定它是（**[编辑]**这是一个编解码器问题）。

什么没有奏效 ：

*   在启用 Qt 支持的情况下重新编译 OpenCV

# jquery - 需要帮助使用 jquery 定位元素

> ID：11194714
> 
> 赞同：-1
> 
> 时间：2012-06-25T18:00:35.663
> 
> 标签：jquery, html, css

这个问题之前可能已经被问过，但我被卡住了，我尝试了很多不同的过滤器，但我不能完全得到我需要的目标。我知道可以做到，但我对诸如此类的事情有点困惑`:first` `:next:` `parent()`。

无论如何，这是我的基本结构......

```
<tr>
    <td>06-22-2012</td>
    <td>11.00</td>
    <td>Whatever</td>
    <td><i>whatever</i><br /><br /><span class='leaveAComment'>Leave a comment</span></td>
    <td></td>
</tr>
<tr class='commentRow'>
    <td colspan=5>Comment:<input type='text'/><input type='submit'></td>
</tr> 
```

单击跨度时`.leaveAComment`，我想切换`.commentRow`最初隐藏的行的可见性。

这只是表的一小部分。我得到的最接近的是`$('tr').next('.commentRow').toggle();` ，但这会切换所有隐藏的行，而不仅仅是下一个。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T18:02:18.967

尝试：

```
$(this).closest("tr").next().toggle(); 
```

获取最近的 tr，获取下一个 tr，切换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:07:22.477

如果你只有一个 leaveAComment 和一个 commentRow：

```
$('.leaveAComment').on('click', function(){ $('.commentRow').toggle(); }); 
```

# php - 查询表中所有记录的字符串

> ID：11194715
> 
> 赞同：0
> 
> 时间：2012-06-25T18:00:35.953
> 
> 标签：php, mysql, query-string

当我单独拉出每个潜在客户状态（？leadstatus=New、？leadstatus=Hot 等）时，它们可以工作，但是当我尝试获取所有内容时，我似乎无法让它工作。如您所见，页面上的默认设置是新潜在客户。

```
`$query = "SELECT * FROM contacts WHERE contacttype IN ('New','Buyer','Seller','Buyer / Seller','Investor') AND leadstatus = 'New' ORDER BY date DESC";

    if(isset($_GET['leadstatus']) && in_array($_GET['leadstatus'], array('New', 'Hot', 'Warm', 'Cold', 'Rejected', 'Closed')))
    {      
    $status = $_GET['leadstatus'];   
    $query = "SELECT * FROM contacts WHERE leadstatus = '".$status."' ORDER BY contacts.date DESC";  
    }` 
```

以下是我尝试过的一些字符串：

```
?leadstatus=New&leadstatus=Hot&leadstatus=Warm&leadstatus=Rejected&leadstatus=Cold - Only pulls last listed, which is Cold

?leadstatus[]=New&leadstatus=[]Hot&leadstatus[]=Warm&leadstatus[]=Rejected&leadstatus[]=Cold - Returns default, which is New

?leadstatus=New&Hot&Warm&Rejected&Cold 
```

*   返回默认值，即 New

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:05:55.003

```
if(isset($_GET['leadstatus']) && $_GET['leadstatus'] == "all") {
    $query = "SELECT * FROM contacts ORDER BY contacts.date DESC";  
} else if (in_array($_GET['leadstatus'], array('New', 'Hot', 'Warm', 'Cold', 'Rejected', 'Closed'))) {      
    $status = $_GET['leadstatus'];   
    $query = "SELECT * FROM contacts WHERE leadstatus = '".$status."' ORDER BY contacts.date DESC";  
} 
```

然后，使leadstatus = all。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:11:55.617

试试这个：

```
if(isset($_GET['leadstatus']) && in_array($_GET['leadstatus'], array('New', 'Hot', 'Warm', 'Cold', 'Rejected', 'Closed')))
{      
  $status = $_GET['leadstatus'];   
  if(!empty($status)) {
    $query = "SELECT * FROM contacts WHERE leadstatus = '".$status."' ORDER BY contacts.date DESC";  
  } else {
    $query = "SELECT * FROM contacts ORDER BY contacts.date DESC"; 
  }
}` 
```

但是，我还可以建议您使用参数化查询吗？您在这里很容易受到 SQL 注入攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:17:37.307

像这样的东西应该匹配多个条件，允许您一次混合匹配多个条件，而不是 1 个或全部。

```
$status = join(',',$_GET['leadstatus']); 
$query = "SELECT * FROM contacts WHERE leadstatus IN($status) ORDER BY contacts.date DESC"; 
```

# javascript - Zombie.js 返回不正确的页面内容

> ID：11194718
> 
> 赞同：0
> 
> 时间：2012-06-25T18:00:37.323
> 
> 标签：javascript, http, node.js, zombie.js

我是僵尸新手，只是想运行一个基本的测试。我有以下代码：

```
var Browser = require('zombie');

var startTime = +new Date();

Browser.visit("http://zombie.labnotes.org/", function(e, browser) {
    var duration;

    console.log("Successfully visted the page");
    console.log(browser.html());

    duration = (+(new Date())) - startTime;
    console.log("Finished in (milliseconds): " + duration);
}); 
```

出于某种原因，我在控制台中得到的只是：

成功访问页面

```
<html>
  <head></head>
  <body></body>
</html>
Finished in (milliseconds): 5020 
```

这显然不是正确的标记，并且需要相当长的时间（5 秒）才能做到这一点。有任何想法吗？

**更新：**最终使用 request 和 jsdom 切换到更简单的模型。这是我使用的代码： var request = require('request'), jsdom = require('jsdom');

```
//Tell the request that we want to fetch youtube.com, send the results to a callback function
request({uri: 'http://youtube.com'}, function(err, response, body){
    var self = this;
    self.items = [];

    //Just a basic error check
    if(err && response.statusCode !== 200){console.log('Request error.');}

    //Send the body param as the HTML code we will parse in jsdom
    //also tell jsdom to attach jQuery in the scripts and loaded from jQuery.com
    jsdom.env({
        html: body,
        scripts: ['http://code.jquery.com/jquery-1.6.min.js']
    }, function(err, window){
        //Use jQuery just as in a regular HTML page
        var $ = window.jQuery;

        console.log(body);
    });
}); 
```

取自： http: [//net.tutsplus.com/tutorials/javascript-ajax/how-to-scrape-web-pages-with-node-js-and-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-scrape-web-pages-with-node-js-and-jquery/)

但我仍然想知道 Zombie 出了什么问题，因为我想用它来测试其他项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:15:38.033

Browser 是通过 require 加载的类。您想创建一个变量，它是 Browser 的一个实例，然后使用该变量调用访问。您的代码应该是：

```
var Browser = require('zombie');

var startTime = +new Date();

my_browser = new Browser(); // Here's where you need to call new
my_browser.visit("http://zombie.labnotes.org/", function(e, browser) {
    var duration;

    console.log("Successfully visted the page");
    console.log(browser.html());

    duration = (+(new Date())) - startTime;
    console.log("Finished in (milliseconds): " + duration);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:25:37.577

现在我升级到 Node.js 和 Zombie.js 的新版本似乎可以工作了。请注意，您不能将 Node 的预版本与zombie.js 一起使用（其中一个依赖项会失败）。

使用 NVM 安装最新的稳定版本（撰写本文时版本为 0.8.9）。

# javascript - 如何将 req.flash() 与 EJS 一起使用？

> ID：11194720
> 
> 赞同：7
> 
> 时间：2012-06-25T18:00:48.453
> 
> 标签：javascript, node.js, express, ejs, flash-message

我希望能够使用 Express 和 EJS 向客户端发送消息。我已经翻遍了，但仍然找不到示例或教程。有人能告诉我最简单的闪发消息的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-27T23:54:38.080

我知道这是一个老问题，但我最近在尝试自己理解 Flash 消息和模板时遇到了这个问题，所以我希望这对我遇到的其他人有所帮助。考虑到 Express 4、express-flash 模块和一个 ejs 模板的情况，这里有 2 条路由和一个模板可以帮助您入门。

**首先**生成要显示的 Flash 消息。这里`app.all()`方法映射到`/express-flash`. 请求在重定向到之前`baseurl/express-flash`使用 setter 方法创建消息。`req.flash(type, message)``baseurl/`

```
app.all('/express-flash', req, res ) {
  req.flash('success', 'This is a flash message using the express-flash module.');
  res.redirect(301, '/');
} 
```

**接下来**`res.render()`将消息映射到目标路由的方法中的模板， `baseurl/`. 这里`req.flash(type)`getter 方法返回与类型 匹配的消息或消息`success`，这些消息映射到模板变量`expressFlash`。

```
app.get('/', req, res ) {
  res.render('index', {expressFlash: req.flash('success') });
} 
```

**最后**，在 中显示 的值（`expressFlash`如果存在）`index.ejs`。

```
<p> Express-Flash Demo </p>    
<% if ( expressFlash.length > 0 ) { %>
  <p>Message: <%= expressFlash %> </p>
<% } %> 
```

然后启动服务器并访问`baseurl/express-flash`。它应该`baseurl/`使用 flash 消息触发重定向。现在刷新`baseurl/`并看到消息消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T18:23:45.090

```
<% if ( message ) { %>
    <div class="flash"><%= message %></div>
<% } %> 
```

这是你想要的吗？您可以使用一些客户端 JS 让它淡出。jQuery 示例：

```
var message = $( '.message' );
if ( message.length ) {
    setTimeout( function() {
        message.fadeOut( 'slow' );
    }, 5000 );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T18:36:20.497

`req.flash()`可以以两种方式使用。

如果您使用两个参数

```
req.flash(type, message); 
```

where`type`是一种消息类型并且`message`是实际消息（两个字符串），然后它添加`message`到 type 的队列中`type`。将它与一个参数一起使用

```
req.flash(type); 
```

返回所有类型消息的数组`type`并清空队列。此外，此方法附加到会话，因此它适用于每个会话。换句话说，每个用户都有自己的一组闪存队列。因此，在您看来，您可以执行以下操作：

```
var messages = req.flash('info'); 
```

然后将`messages`变量发送到模板并在那里使用它（注意这`messages`是一个数组，你可以迭代它）。请记住， using将**仅为**当前用户（与对象关联）`req.flash('info', 'test');`附加`test`类型的消息。`info` **`req`**

 **请记住，这种机制非常薄弱。例如，如果用户双击链接（两个请求发送到服务器），那么他将看不到消息，因为第一次调用将清空队列（当然除非请求生成消息）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T05:39:05.590

如果您使用 visionmedia 的 express-messages 帮助模块，它会变得非常简单。[Github 链接](https://github.com/visionmedia/express-messages/)

正如模块文档中所说：

使用 npm 安装模块

```
npm install express-messages 
```

然后为 app.config 中的消息分配一个动态帮助器：

```
app.dynamicHelpers({ messages: require('express-messages') }); 
```

在您的 EJS 文件中，在您想要消息的位置插入以下内容

```
<%- messages() %> 
```

EJS 将其呈现为：

```
<div id="messages">
  <ul class="info">
    <li>Email queued</li>
    <li>Email sent</li>
  </ul>
  <ul class="error">
    <li>Email delivery failed</li>
  </ul>
</div> 
```

（当然，您可以更改它在模块代码中呈现的内容）

然后，要实际显示一条消息，请调用：

```
req.flash('info', 'Your message goes here'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-01T18:46:40.067

我也在为此苦苦挣扎；让我的 Flash 消息出现在我的 .ejs 中。但是，我终于让它工作了，这就是我所理解的。

一旦 getter`req.flash('_msgName_');`被调用，它就会被**清除**！

此外，当您`app.use(session());`cookie 必须等于时`cookie: {maxAge: 720}`，本质上是一个很大的数字。

我正在使用 console.log() 来测试 getter，它显示在我的控制台中，但不在我的 .ejs 中。我把 console.log() 拿出来，它工作了。

这是我的一些代码。

服务器.js ~

```
app.get('/', function(req, res) {
    // This is where we will retrieve the users from the database and include them in the view page we will be rendering.
    User.find({},function(err, allUsers){
        if(err){
            console.log("Oh no we got an error\n ERROR :: "+err);
        } else {
            // console.log(allUsers);
            res.render('index',{users : allUsers, msg : req.flash('vError')});
        }
    });
});

// Add User Request 
app.post('/users', function(req, res) {
    console.log("REQUESTED DATA:\t", req.body);
    var user = new User(
        {
            name: req.body.name, 
            age: req.body.age
        }
    );
    // Saves user to DB.
    user.save(function(err) {
        if(err) {
            console.log('OOPS, Something went Wrong... \n ERROR :: '+err+'\n');
            for(var key in err.errors){
                // console.log(err.errors[key].message);
                req.flash('vError', err.errors[key].message);
            }
            // **HERE I WAS ACCIDENTALLY CLEARING IT!!!** \\
            // console.log(req.flash('vError')); 
            // res.render('index',{users : [], msg : req.flash('vError')});
            res.redirect('/');
        } else { 
          console.log('\tSuccessfully added a new User to the DB!');
          res.redirect('/');
        }
    })
}); 
```

index.ejs ~

```
<% if(msg.length > 0) { %> 
    <% for (var error in msg) { %>
        <h3><%= msg[error] %></h3>
    <% } %>
<% } %> 
```**

# ruby - 带有shell命令args引号的Ruby字符串？

> ID：11194721
> 
> 赞同：2
> 
> 时间：2012-06-25T18:00:55.000
> 
> 标签：ruby, string, shell, escaping

嗨，我需要像这样创建字符串：

```
drawtext="fontfile=/Users/stpn/Documents/Video_Experiments/fonts/Trebuchet_MS.ttf:text='content':fontsize=100:fontcolor=red:y=h/2" 
```

我想做类似的事情

```
str = Q%[drawtext="fontfile=/Users/stpn/Documents/Video_Experiments/fonts/Trebuchet_MS.ttf:text='content':fontsize=100:fontcolor=red:y=h/2"] 
```

我得到这个：

```
=> "drawtext=\"fontfile=/Users/stpn/Documents/Video_Experiments/fonts/Trebuchet_MS.ttf:text='content':fontsize=100:fontcolor=red:y=h/2\"" 
```

等号后的转义字符 drawtext=" 是我想要摆脱的.. 如何实现？

该字符串将在命令行参数中使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:35:58.010

像许多语言一样，Ruby 需要一种分隔引号和封闭引号的方法。

您看到的是转义字符，它是一种表示*文字*引用而不是句法引用的方式：

```
foo = 'test="test"'
# => "test=\"test\"" 
```

转义字符之所以存在，是因为在检查字符串时默认使用双引号。当然，它在内部存储为单个字符。您可能还会在其他情况下看到这些，例如 CR+LF 分隔的文件行：

```
"example_line\r\n" 
```

这里的`\r`and`\n`对应于回车符和换行符。在 ANSI C 中定义的这些字符中的一些已沿用到包括 Ruby 和 JavaScript 在内的许多语言中。

当您输出字符串时，不会显示这些转义字符：

```
puts foo
test="test" 
```

# c# - ExcludeFromCodeCoverage 排除自动生成的代码

> ID：11194724
> 
> 赞同：7
> 
> 时间：2012-06-25T18:01:02.690
> 
> 标签：c#, unit-testing, auto-generate, ncover

有没有办法将自动生成的类标记为 ExcludeFromCodeCoverage。我在其他领域使用该属性并且效果很好。但是，如果您打开自动生成的人的代码并将类标记为 ExcludeFromCodeCoverage，一旦您重新生成该类，它将被覆盖。

我可以在 dbml 后面的代码中创建部分类并将该属性应用到它并且它可以工作，但是，这会产生很多部分类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T08:57:44.610

您可以使用[PostSharp](http://www.sharpcrafters.com/postsharp/features)或其他 AOP 框架来创建适用`ExcludeFromCodeCoverageAttribute`于指定类型或命名空间的方面：

```
[Serializable]
[AttributeUsage(AttributeTargets.Assembly)]
[MulticastAttributeUsage(MulticastTargets.Class | MulticastTargets.Struct)]
[ProvideAspectRole(StandardRoles.PerformanceInstrumentation)]
public sealed class DisableCoverageAttribute : TypeLevelAspect, IAspectProvider
{
    public IEnumerable<AspectInstance> ProvideAspects(object targetElement)
    {
        Type disabledType = (Type)targetElement;

        var introducedExclusion = new CustomAttributeIntroductionAspect(
              new ObjectConstruction(typeof (ExcludeFromCodeCoverageAttribute)));

        return new[] {new AspectInstance(disabledType, introducedExclusion)};
    }
} 
```

然后只需将此方面应用于程序集并提供您要排除的命名空间。在编译期间 PostSharp 将添加`ExcludeFromCodeCoverageAttribute`到`My.AutogeneratedCode`命名空间中的所有类：

```
[assembly: DisableCoverage(AttributeTargetTypes="My.AutogeneratedCode.*")] 
```

您可以在[此处](http://badecho.com/2012/03/excluding-code-coverage-with-postsharp/)找到示例代码和说明。

# iphone - 可可Facebook登录不起作用

> ID：11194726
> 
> 赞同：2
> 
> 时间：2012-06-25T18:01:19.197
> 
> 标签：iphone, objective-c, ios, facebook, cocoa-touch

我的 APP 的 Facebook 登录不起作用，我似乎无法弄清楚原因。

在我的`.h`文件中，我添加了`#import "FBConnect.h"`并且`@interface MyImageViewControllerViewController : UIViewController<UINavigationControllerDelegate, FBSessionDelegate, FBRequestDelegate>`我有我的`Facebook *facebook;`iVar。

我实现了所有需要的方法（如教程中所述），我就是这样做的。（我不会发布所有内容，因为我认为这毫无意义）

```
-(BOOL)facebooking{
facebook = [[Facebook alloc] initWithAppId:FB_APP_ID andDelegate:self];    
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];  

}
if (![facebook isSessionValid]) {
    [facebook authorize:nil];
} 
return YES;
} 
```

和

```
- (void)fbDidLogin {
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
[defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
[defaults synchronize];

UIAlertView *a = [[UIAlertView alloc] initWithTitle:@"Token" message:[facebook accessToken] delegate:self cancelButtonTitle:@"ok" otherButtonTitles: nil];
[a show];

} 
```

现在，当我调用该`facebooking`方法时，它会在我的身份验证页面上启动 safari `Facebook APP`，我按下`Okay`它会返回我的`iOS`应用程序，但由于某种原因`fbDidLogin`没有调用它。也不是`fbDidNotLogin`。有什么地方我需要以某种方式指向他们吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:51:03.557

你有没有实现这个方法？

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
return [facebook handleOpenURL:url]; 
} 
```

# c# - 如何在播放时比较 MediaElement 的确切位置

> ID：11194730
> 
> 赞同：2
> 
> 时间：2012-06-25T18:01:32.567
> 
> 标签：c#, .net, wpf, mediaelement

我有一个视频（持续时间：3 秒），我需要创建 2 个状态

1-视频应始终达到第二个 1.5 并从头开始播放。

> ```
> TimeSpan ts = new TimeSpan(0, 0, 0, 1, 500);
> TimeSpan ts_Start = new TimeSpan(0, 0, 0, 0, 0);
> if (mediaElement.position == ts)
>   mediaElement.position = ts_Start; //doesnt work this block code 
> ```

2-当我按下一个按钮时，视频应该播放完整的视频（3 秒）。（简单标志，布尔值）

所以我的问题是，我怎么知道什么时候`mediaelement.position = 1.5 seconds`??....我想到了一种方法，比如玩或类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:28:04.477

如果您获得`MediaElement`'`Clock`属性，您可以附加到`CurrentTimeInvalidated`事件上并观察时间达到 1.5 秒。该事件具有很高的精度（即它经常被提出），因此除非您必须这样做，否则您不想对事件做太多的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:07:59.713

我解决了这个问题... :) :) ....

我决定用其他论坛的许多想法制作自己的应用程序。

我的解决方案比我计划的要容易，我使用了 2 个视频、2 个 mediaElements、一个 mediaEnded 事件和布尔变量来更改视频......

并且完美运行！[解决方案在这里](http://www.youtube.com/watch?v=Tk2VrFB1qSg)------> （解决方案和评论）

在我的应用程序中，我不必使用诸如时钟、TimeLines、DispatcherTimer 之类的属性或诸如 CurrentTimeInvalidate 之类的任何事件，我只使用了 MediaEnded 事件和一个布尔变量。：） 不再。我有 2 个视频（1.5 秒和 3 秒）。当 MediaEnded(media 1,5 seconds) mediaElement1,5sec.Position = TimeSpam.Zero; 和 MediElement3sec.Position = TimeSpam.Zero，当我单击按钮时，我只是评估变量（布尔值）并播放 3 秒的完整视频。

但是，源代码在这里：MainWindow.xaml

```
<Window x:Class="wpf_TestVideos.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="371" Width="525" Loaded="Window_Loaded">
<Grid>
    <MediaElement Height="268" HorizontalAlignment="Left" Margin="141,12,0,0" Name="mediaElement15sec" VerticalAlignment="Top" Width="237" MediaEnded="mediaElement15sec_MediaEnded" />
    <MediaElement Height="268" HorizontalAlignment="Left" Margin="142,12,0,0" Name="mediaElement3sec" VerticalAlignment="Top" Width="236" />
    <Button Content="Load" Height="34" HorizontalAlignment="Left" Margin="12,286,0,0" Name="btLoad" VerticalAlignment="Top" Width="73" Click="btLoad_Click" />
    <Button Content="Inicio Juego" Height="23" HorizontalAlignment="Left" Margin="128,286,0,0" Name="btStart" VerticalAlignment="Top" Width="86" Click="btStart_Click" />
    <Button Content="&quot;Reconoce Gesto&quot;" Height="23" HorizontalAlignment="Left" Margin="285,286,0,0" Name="btGesture" VerticalAlignment="Top" Width="108" Click="btGesture_Click" />
</Grid> 
```

MainWindow.xaml.cs：

```
using System;
using System.IO;
using System.Collections;
using System.Collections.Generic;
using System.Diagnostics;
using System.Windows;
using System.Windows.Forms;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Navigation;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.Windows.Interop;
using System.Windows.Media.Animation;
using System.Threading;

namespace wpf_TestVideos
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    string VideoLocation = System.IO.Path.GetDirectoryName(System.Windows.Forms.Application.ExecutablePath);
    string sFileName = "";
    string sFileName2 = "";
    bool bVideoLoop = true;
    TranslateTransform trans = new TranslateTransform();

    private void btLoad_Click(object sender, RoutedEventArgs e)
    {
        mediaElement15sec.LoadedBehavior = MediaState.Manual;
        mediaElement3sec.LoadedBehavior = MediaState.Manual;
        btGesture.IsEnabled = true;
        btStart.IsEnabled = true;
        btLoad.IsEnabled = false;
        DirectoryInfo df = new DirectoryInfo(VideoLocation);
        if (df.Exists)
        {
            sFileName = VideoLocation + @"\Krown_test_loop.mov";
            mediaElement15sec.Source = new Uri(sFileName);
            mediaElement15sec.Stretch = Stretch.Fill;
            sFileName2 = VideoLocation + @"\Krown_test_7.mov";
            mediaElement3sec.Source = new Uri(sFileName2);
            mediaElement3sec.Stretch = Stretch.Fill; 
        }
        else
        {
            System.Windows.Forms.MessageBox.Show("No se puede cargar el video", "TestAll");
        }
    }

    private void btStart_Click(object sender, RoutedEventArgs e)
    {
        mediaElement15sec.Position = TimeSpan.Zero;
        mediaElement3sec.Position = TimeSpan.Zero;
        mediaElement15sec.Play();
        mediaElement3sec.Play();
        bVideoLoop = true;
        //VisualStateManager.GoToState(mediaElement15sec, "Bring1,5ToFront", true);
    }

    private void mediaElement15sec_MediaEnded(object sender, RoutedEventArgs e)
    {
        if (bVideoLoop)
        {
            mediaElement15sec.Position = TimeSpan.Zero;
            mediaElement3sec.Position = TimeSpan.Zero;
        }
    }

    private void btGesture_Click(object sender, RoutedEventArgs e)
    {
        bVideoLoop = false;
        //Animacion_Opacidad(bVideoLoop);
        //VisualStateManager.GoToState(mediaElement3sec, "Bring300ToFront", true);
    }

    private void Animacion_Opacidad(bool bLoop)
    {
        mediaElement15sec.RenderTransform = trans;
        if (!bLoop)
        {
            DoubleAnimation anim1 = new DoubleAnimation(1, 0, TimeSpan.FromSeconds(1));
            trans.BeginAnimation(OpacityProperty, anim1);
        }
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        btGesture.IsEnabled = false;
        btStart.IsEnabled = false;
        btLoad.IsEnabled = true;
    }

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-13T09:33:49.340

接受的解决方案似乎更像是一种解决方法而不是解决方案.. 万一您需要使用的不是 1.5 而是其他时间，例如。2.5秒？你需要改变视频吗？解决方案可能是使用 DistpatcherTimer：

```
DispatcherTimer timer = new DispatcherTimer();
timer.Interval = TimeSpan.FromSeconds(1.5); // your time
timer.Tick += timer_Tick;
timer.Start();
mePlayer.Play(); // run timer and player at same time 
```

当达到*timer_Tick*时，只需将位置设置为零并再次调用 Play() ：

```
void timer_Tick(object sender, EventArgs e)
{
    mePlayer.Position = new TimeSpan(0, 0, 0, 0);
    mePlayer.Play();
} 
```

并且当单击第二个按钮时，分离计时器（...可以在需要时附加）：

```
timer.Tick -= timer_Tick; 
```

# javascript - 使用 jQuery 和 javascript 在下拉列表中更改所选值

> ID：11194731
> 
> 赞同：0
> 
> 时间：2012-06-25T18:01:34.737
> 
> 标签：javascript, jquery, asp.net

我必须以这样一种方式分配转发器列中的值，以便在分配时，转发器列中的值成为下拉列表中的当前选择。

我有正确的值来分配`$('#myname_' + rowIndex).text()`，但是当我将此值分配给下拉列表的 id.value 时 - 如下所示 - 分配无效。我究竟做错了什么。

```
$("ctl00_ContentPlaceHolder1_myname").value = $('#myname_' + rowIndex).text(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:04:00.340

jQuery 使用`val()`，JavaScript（HTML DOM 对象）使用`value`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:04:24.220

采用：

```
$("ctl00_ContentPlaceHolder1_myname").val($('#myname_' + rowIndex).text()); 
```

或者

```
 $("ctl00_ContentPlaceHolder1_myname")[0].value = $('#myname_' + rowIndex).text(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:04:43.770

您是否尝试过使用该`val`功能？

```
$("#ctl00_ContentPlaceHolder1_myname").val($('#myname_' + rowIndex).text()); 
```

如果使用不带参数的`val`函数，则可以使用该函数从对象中获取值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:05:09.633

```
$("ctl00_ContentPlaceHolder1_myname").val($('#myname_' + rowIndex).text()) 
```

或者

```
$("ctl00_ContentPlaceHolder1_myname")[0].value = $('#myname_' + rowIndex).text() 
```

# iphone - UITextField 键盘无法输入任何内容

> ID：11194734
> 
> 赞同：0
> 
> 时间：2012-06-25T18:01:39.983
> 
> 标签：iphone, ios, xcode4, uitextfield, uiactionsheet

将 xib 文件加载为 UIView，我从 Xib 文件中获得了 UITextField（它只是一个包含文本字段和按钮的视图）。但是当应用程序启动并且该文本字段出现时。我无法在此 UITextField 上键入任何字母。但是将文本粘贴到那个 UITextField 就可以了。为什么？这是我的添加代码

```
-(IBAction)showSheet{    
    UIView *myView = [[[NSBundle mainBundle] loadNibNamed:@"LoginViewComp" owner:self options:NULL] lastObject];    
     [myView setFrame:CGRectMake(0, 44, 320, 400)];

    UIButton *btn1 = (UIButton *)[myView viewWithTag:101];
    UITextField *field = (UITextField *)[myView viewWithTag:102];
    UILabel *lbl = (UILabel *)[myView viewWithTag:103];    

    [field setEnabled:YES];

    [btn1 addTarget:self action:@selector(testBtn1) forControlEvents:UIControlEventTouchUpInside];

    DTActionSheet *sheet = [[DTActionSheet alloc] initWithContentView:myView sheetTitle:@"Demo"];
    [sheet showInView:self.view];
    [sheet setUserInteractionEnabled:YES];
}

-(void)testBtn1{
    NSLog(@"btn1 touch up inside");     
}
@end 
```

DTActionSheet.m

```
@interface DTActionSheet()
@property (nonatomic,strong) UIView* contentView;
@property (nonatomic,strong) UIToolbar* toolBar;
@end

@implementation DTActionSheet
@synthesize contentView=_contentView;
@synthesize toolBar=_toolBar;

-(id)initWithContentView:(UIView*)contentView sheetTitle:(NSString*)title;
{
    self = [super init];
    if (self) 
    {
        _contentView = contentView;
        int btnnum = (contentView.frame.size.height-5)/50; // (height+44-20-25)/50
        for(int i=0; i<btnnum; i++)
        {
            [self addButtonWithTitle:@" "];
        }
        _toolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
        _toolBar.barStyle = UIBarStyleBlackOpaque;

        UIBarButtonItem *titleButton = [[UIBarButtonItem alloc] initWithTitle:title 
                                                                        style:UIBarButtonItemStylePlain 
                                                                       target:nil 
                                                                       action:nil];

        UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Done" 
                                                                        style:UIBarButtonItemStyleDone 
                                                                       target:self
                                                                       action:@selector(done)];

        UIBarButtonItem *leftButton  = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" 
                                                                        style:UIBarButtonItemStyleBordered 
                                                                       target:self 
                                                                       action:@selector(cancel)];

        UIBarButtonItem *fixedButton  = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace 
                                                                                      target:nil 
                                                                                      action:nil];

        [_toolBar setItems: [NSArray arrayWithObjects:leftButton,fixedButton,titleButton,fixedButton,rightButton,nil]];

        [self addSubview:_toolBar];
        [self addSubview:_contentView];
    }
    return self;
}

-(void)done
{
    [self dismissWithClickedButtonIndex:0 animated:YES];
}
-(void)cancel
{
    [self dismissWithClickedButtonIndex:0 animated:YES];
}
@end 
```

![Xib组件](../Images/1db031d064396349c4383f1b168885ea.png)

![无法在这 2 个文本字段中输入任何字母和数字](../Images/6b01cf709e33283b6621d8880ec1ff3a.png)

嘿，伙计们，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:51:33.903

尝试使用 UIKeyInput 协议参考进行输入——http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIKeyInput_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIKeyInput_Protocol/Reference/Reference.html)

确保使用它的委托..

# python - Shutil move 函数给出了无效的争论错误 PYTHON

> ID：11194735
> 
> 赞同：0
> 
> 时间：2012-06-25T18:01:40.637
> 
> 标签：python, shutil

我正在编写一些代码，它将通过一个文件，将其作为临时文件进行编辑，然后将临时文件复制到新文件上以便进行编辑。但是，当使用shutil 的move 方法时，我不断收到此错误：

IOError：[Errno 22] 无效参数

我试过使用 copy、copy2 和 copyfile。这是代码的副本：

```
def writePPS(seekValue,newData):
    PPSFiles = findPPS("/pps")
    for file in PPSFiles:
        #create a temp file
        holder,temp = mkstemp(".pps")
        print holder, temp
        pps = open(file,"r+")
        newpps = open(temp,"w")
        info = pps.readlines()
        #parse through the pps file and find seekvalue, replace with newdata
        for data in info:
            valueBoundry = data.find(":")
            if seekValue == data[0:(valueBoundry)]:
                print "writing new value"
                newValue = data[0:(valueBoundry+1)] + str(newData)
                #write to our temp file
                newpps.write(newValue)
            else: newpps.write(data)
        pps.close()
        close(holder)
        newpps.close()
        #remove original file
        remove(file)
        #move temp file to pps
        copy(temp,"/pps/ohm.pps") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:24:09.180

我不确定您为什么会收到该错误，但首先您可以尝试清理您的代码并修复所有这些导入语句。很难看出这些函数是从哪里来的，而且就你所知，你最终可能会发生命名空间冲突。

让我们从一些实际可运行的代码开始：

```
import shutil
import os
import tempfile

def writePPS(seekValue,newData):
    PPSFiles = findPPS("/pps")
    for file_ in PPSFiles:
        #create a temp file
        newpps = tempfile.NamedTemporaryFile(suffix=".pps")
        print newpps.name
        with open(file_,"r+") as pps:
            #parse through the pps file and find seekvalue, replace with newdata
            for data in pps:
                valueBoundry = data.find(":")
                if seekValue == data[0:(valueBoundry)]:
                    print "writing new value"
                    newValue = data[0:(valueBoundry+1)] + str(newData)
                    #write to our temp file
                    newpps.write(newValue)
                else: 
                    newpps.write(data)

            #move temp file to pps
            newpps.flush()
            shutil.copy(newpps.name,"/pps/ohm.pps") 
```

您不需要将所有行读入内存。您可以循环遍历每一行。您也不需要管理所有这些打开/关闭文件操作。只需使用`with`上下文和 NamedTemporaryFile，它会在垃圾收集时自行清理。

重要说明，在您的示例及以上示例中，您每次都为每个源文件覆盖相同的目标文件。我把它留给你解决。但是如果你从这里开始，我们就可以开始找出你为什么会出错。

# objective-c - 带分钟和秒的倒计时计时器

> ID：11194736
> 
> 赞同：-3
> 
> 时间：2012-06-25T18:01:44.717
> 
> 标签：objective-c, nstimer

我创建了一个从 10 到 0 的倒数计时器。我创建了一个以秒为单位显示计数器的 uilabel。现在我希望标签显示计数器分钟和秒，就像这样：00:00。我怎样才能做到这一点？这是我的倒计时代码：

```
-(void)countdown
{
    countdownCounter -= 1;
    countdown.text = [NSString stringWithFormat:@"%i", countdownCounter];

}

-(IBAction)strat:(id)sender
{
    countdownCounter = 10;
    countdownTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self     selector:@selector(countdown) userInfo:nil repeats:YES];
    }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:20:49.893

这可以使用一次和一个标签来完成。尝试使用以下代码：

```
int seconds = [countDown.text intValue] % 60; 
int minutes = ([countDown.text intValue] / 60) % 60; 
countDown.text = [NSString stringWithFormat:@"%2d:%02d", minutes, seconds]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:13:07.240

以完全相同的方式进行操作，只需添加另一个计时器。

```
 countdownTimer2 = [NSTimer scheduledTimerWithTimeInterval:60.0 target:self selector:@selector(countdown2) userInfo:nil repeats:YES];

-(void)countdown2
{
    countdownCounterMinutes -= 1;
}

and change countdown to

-(void)countdown
{
    countdownCounter -= 1;
    countdown.text = [NSString stringWithFormat:@"%i%i", countdownCounterMinutes, countdownCounter];

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:05:23.753

对于任何最终答案是什么的人，我都是这样做的：

```
-(IBAction)start
{
    timer = [NSTimer scheduledTimerWithTimeInterval:.01 target:self     selector:@selector(updateTimer:) userInfo:nil repeats:YES];
}

-(void)updateTimer:(NSTimer *)timer {
    currentTime -= 10 ;
    [self populateLabelwithTime:currentTime];
    if(currentTime <=0)
       [timer invalidate];
}

- (void)populateLabelwithTime:(int)milliseconds {
    seconds = milliseconds/1000;
    minutes = seconds / 60;
    hours = minutes / 60;

    seconds -= minutes * 60;
    minutes -= hours * 60;

    NSString * result1 = [NSString stringWithFormat:@"%@%02d:%02d:%02d:%02d", (milliseconds<0?@"-":@""), hours, minutes, seconds,milliseconds%1000];
    result.text = result1;

} 
```

在 viewDidLoad 我将 currentTime 设置为以毫秒为单位的倒计时时间。希望你能理解...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-29T10:23:44.580

我用这种方式用分钟和秒格式化了数字（来自浮点数），谢谢你的回答。（希望这有助于另一个）

```
 - (void)ticTimer
{
    self.current -= self.updateSpeed;
    CGFloat progress = self.current / self.max;
    [self populateLabelwithTimeFormatted:self.current];
     ///  TimeLabelNode.text = [NSString stringWithFormat:@"%f", progress];

    // * Time is over
    if (self.current <= self.min) {
        [self stop];
        _TimeLabelNode.text= @"time up!";
    }
}

- (void)populateLabelwithTimeFormatted:(float)time {
    //convert float into mins and seconds format
    int mytime = (int) _current;
    int seconds = mytime%60;
    int minutes = mytime / 60 % 60;

    NSString * result1 = [NSString stringWithFormat:@"%2d:%02d",  minutes, seconds];
    _TimeLabelNode.text = result1;
} 
```

# ruby-on-rails - 表单没有传递参数

> ID：11194745
> 
> 赞同：1
> 
> 时间：2012-06-25T18:02:22.413
> 
> 标签：ruby-on-rails, params

我正在开发一个 Rails 应用程序。一个非常奇怪的问题让我发疯。

表单（方法是 get）没有传递参数。它仅在开发模式下发生。所有浏览器都会发生这种情况。我用一个简单的模拟视图对其进行了测试，但同样的问题发生了。日志显示参数没有传递。

```
class ItemsController < ApplicationController
  def index
    @items = Item.by_store_id(params[:store_id]).by_keyword(params[:keyword]).include_inactive(params[:include_inactive]).order("manufacturer_part_no").paginate :per_page => 50, :page => params[:page]
  end
end

[View]
          = form_tag({:action => :index}, :method => 'get') do
            Store
            = select_tag :store_id, options_for_select(Store.order("id").map { |i| [i.name, i.id]}.unshift([nil, nil]), params[:store_id].to_i)
            %br
            Title/Item No. 
            = text_field_tag :keyword, params[:keyword]
            %br
            = check_box_tag :include_inactive, '1', (params[:include_inactive].to_i == 1)
            Include Ended Items
            %br
            = submit_tag "Find" 
```

您认为造成问题的原因是什么？

谢谢。

山姆

我发现了导致问题的原因：

我的开发服务器上有一个目录-public/items，该目录不在git中。

```
%p This doesn't work!
= form_tag("/items", :method => 'get') do
  = text_field_tag :data, params[:data]
  = submit_tag "Submit"

%p This works.
= form_tag("/items/", :method => 'get') do
  = text_field_tag :data, params[:data]
  = submit_tag "Submit" 
```

在这种情况下，训练斜线会有所不同。

# angularjs - 使用 AngularJS 和 SocketStream

> ID：11194753
> 
> 赞同：2
> 
> 时间：2012-06-25T18:03:03.490
> 
> 标签：angularjs, socketstream

我想在使用 Angular for MVC 时使用 socketstream 的 RPC over websockets 抽象。任何人（可能在 Angular 社区）都可以指出正确的方向来学习如何使用自定义 RPC 类型的数据源以最惯用的方式更新 Angular 的模型吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T21:07:09.963

如果您想简单地将模型与服务器同步，这是一个很好的例子，可以从为 socket.io 制作的 Misko Hevery 开始：[https ://github.com/mhevery/angular-node-socketio](https://github.com/mhevery/angular-node-socketio)

# c# - 在 ASP.NET 中使用 WordPress RSS 源

> ID：11194757
> 
> 赞同：6
> 
> 时间：2012-06-25T18:03:31.257
> 
> 标签：c#, asp.net, vb.net

如何使用我的 WordPress 博客的 RSS 提要在我的主页上显示我最新的博客文章？我遇到了以下代码来执行此操作：

```
 Function GetRSSFeed(strURL as String) as DataTable
    'Get the XML data
    Dim reader as XmlTextReader = New XmlTextReader(strURL)

    'return a new DataSet
    Dim ds as DataSet = New DataSet()
    ds.ReadXml(reader)    
    Return ds.Tables(2)
  End Function 
```

但它在这一行出错： 'ds.ReadXml(reader)' 出现以下错误：

```
A column named 'comments' already belongs to this DataTable. 
```

也许它不起作用，因为此代码来自 2003 年？有人有工作代码示例吗？提前谢谢了！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-25T18:14:57.193

您可以使用 LINQ to XML 读取 WordPress RSS 提要。

首先获取饲料。用它制作一个 Uri 实例。

```
var rssFeed = new Uri("https://github.com/geersch/feed/"); 
```

然后执行 GET 请求。

```
var request = (HttpWebRequest) WebRequest.Create(rssFeed);
request.Method = "GET";
var response = (HttpWebResponse) request.GetResponse(); 
```

获取响应流并阅读它以下载提要的内容。

```
using (var reader = new StreamReader(response.GetResponseStream()))
{
    var feedContents = reader.ReadToEnd();
    //...
} 
```

仍然在上述 using 语句中，使用 LINQ to XML 解析下载的内容并提取您需要的信息。

```
var document = XDocument.Parse(feedContents);

var posts = (from p in document.Descendants("item")
             select new
             {
                 Title = p.Element("title").Value,
                 Link = p.Element("link").Value,
                 Comments = p.Element("comments").Value,
                 PubDate = DateTime.Parse(p.Element("pubDate").Value)
             }).ToList(); 
```

现在您可以迭代结果。

```
foreach(var post in posts)
{
    Console.WriteLine(post.Title);
    Console.WriteLine(post.Link);
    Console.WriteLine(post.Comments);
    Console.WriteLine(post.PubDate);
} 
```

在这里，我只是使用匿名类型来捕获输出，但您可以随意创建自己的 BlogPost 类或类似的东西，您可以在 LINQ 查询中使用它们。

我习惯了 C#，所以这就是我在回复中使用它的原因。但是你可以很容易地转换它。您可以使用一些[在线转换器。](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

关于您对 DataSet 的问题（我个人不会使用它来实现它），它是由具有相同名称节点的项目（博客文章）引起的。

例如：

```
<comments>...</comments>
<slash:comments>5</slash:comments> 
```

当然，第二个具有不同的命名空间（斜杠），但 DataSet 的 ReadXml(...) 方法并不关心命名空间。它尝试创建名为“comments”的第二列。这就是为什么你会得到例外。

如果您愿意，您仍然可以使用 DataSet / DataTable。只需使用 LINQ to XML 从提要中提取数据，如上所示。

然后创建一个 DataSet 并向其中添加一个新表。

```
var dataSet = new DataSet();
var blog = new DataTable("Blog");
blog.Columns.Add("Title", typeof(string));
blog.Columns.Add("Link", typeof(string));
blog.Columns.Add("Comments", typeof(string));
dataSet.Tables.Add(blog); 
```

遍历提取的数据并将其添加到 DataTable：

```
foreach (var post in posts)
{
    var newRow = blog.NewRow();
    newRow["Title"] = post.Title;
    newRow["Link"] = post.Link;
    newRow["Comments"] = post.Comments;

    blog.Rows.Add(newRow);
 } 
```

瞧，我们现在通过不再依赖 DataSet 的 ReadXml(...) 方法解决了您的问题。下载提要，提取您感兴趣的数据并将其持久化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T18:43:53.850

我将从`System.ServiceModel.Syndication`命名空间开始，有一些类可以直接操作 RSS 提要。特别是，这看起来很有希望：

```
 XmlReader reader = XmlReader.Create("http://your.uri.here/feed.xml");
 SyndicationFeed feed = SyndicationFeed.Load(reader); 
```

然后探索`SyndicationFeed`类，特别是`Items`集合应该包含 RSS 条目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T18:43:29.897

我将从 RSS/Atom 的内置类开始：[SyndicationFeed](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)

```
using (XmlReader reader = XmlReader.Create(url))
{
    return SyndicationFeed.Load(reader);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-18T18:58:41.767

这只是@Christophe Geers 转换为 VB 的绝佳解决方案，作为一个函数：

```
Protected Function getWordPressFeed(ByVal strUrl As String) As DataTable

    Dim rssFeed = New Uri(strUrl)
    Dim request = DirectCast(WebRequest.Create(rssFeed), HttpWebRequest)
    request.Method = "GET"
    Dim response = DirectCast(request.GetResponse(), HttpWebResponse)
    Dim feedContents As String
    Using reader = New StreamReader(response.GetResponseStream())
        feedContents = reader.ReadToEnd()
    End Using
    Dim document = XDocument.Parse(feedContents)

    Static Dim dcNamespace As XNamespace
    dcNamespace = "http://purl.org/dc/elements/1.1/"

    Dim posts = (From p In document.Descendants("item") Select New With { _
        Key .Title = p.Element("title").Value, _
        Key .Link = p.Element("link").Value, _
        Key .Author = p.Element(dcNamespace + "creator").Value, _
        Key .Description = p.Element("description").Value, _
        Key .PubDate = DateTime.Parse(p.Element("pubDate").Value) _
    }).ToList()

    Dim dataSet = New DataSet()
    Dim blog = New DataTable("Blog")
    blog.Columns.Add("Title", GetType(String))
    blog.Columns.Add("Link", GetType(String))
    blog.Columns.Add("Description", GetType(String))
    blog.Columns.Add("Author", GetType(String))
    blog.Columns.Add("PubDate", GetType(DateTime))

    dataSet.Tables.Add(blog)
    For Each post In posts
        Dim newRow = blog.NewRow()
        newRow("Title") = post.Title
        newRow("Link") = post.Link
        newRow("Description") = post.Description
        newRow("Author") = post.Author
        newRow("PubDate") = post.PubDate
        blog.Rows.Add(newRow)
    Next

    Return blog

End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-03T17:10:52.257

这就是我用于我的 wordpress 提要阅读器的内容。

```
private async void ReadFeed() {
    var rssFeed = new Uri("http://truestrengthmd.com/category/blog/feed");

    var request = (HttpWebRequest)WebRequest.Create(rssFeed);
    request.Method = "GET";
    var _response = await request.GetResponseAsync();
    var response = (HttpWebResponse)_response;

    using (var reader = new StreamReader(response.GetResponseStream()))
    {
        var feedContents = reader.ReadToEnd();

        var document = XDocument.Parse(feedContents);

        var posts = (from p in document.Descendants("item")
                     select new
                     {
                         Title = p.Element("title").Value
                     }).ToList();

        foreach (var post in posts)
        {
            Debug.WriteLine(post.Title);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-02T12:55:07.827

您可以为此使用我的库：wprssapi.marcogriep.de

只需几行代码。很容易做到：

```
//Get an Instance of Wordpress Controller (Singleton)
                WordPressFeedController wp = WordPressFeedController.Instance;

                //Load all the RSS Articles
                wp.LoadRSS("http://www.its-all-about.de/rss");

                //Get the Newest Article (Check Docs for other functions)
                var rssItem = wp.GetNewestItem();

                this.label1.Text = rssItem.Title;

                //Text Only, Remove all the HTML Tags - Limit too 300 Chars
                this.richTextBox1.Text = wp.RemoveHTMLFromText(rssItem.Summary.Substring(0, 300)) + "...";

                //Open RSS Article on Button Click
                this.button1.Click += (s, e) => {
                    Process.Start(rssItem.Id);
                }; 
```

# .net - 采用点网技术的 N 层架构

> ID：11194758
> 
> 赞同：3
> 
> 时间：2012-06-25T18:03:49.760
> 
> 标签：.net, asp.net-mvc, architecture, tiers

我在网上看到过 n 层解决方案，它们都为每一层使用 DLL。我们的架构看起来是一样的：3 个 DLL：数据层、业务逻辑层和业务对象层。但是，表示层并不直接与这些层通信，而是通过 WCF Web 服务访问它们。

我们的 ASP.NET MVC 与 WCF WebService 托管在同一台机器上。

这是一个好的架构吗？如果 ASP.NET MVC 直接访问其他层会更合乎逻辑吗？

感谢您最终的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:08:21.860

你的架构应该由你的观众决定。如果您有非常多的受众（以每个周期的请求数衡量），那么您可能需要一种分布式架构，该架构以与您描述的方式类似的方式利用 Web 服务。但是，如果您的受众很少，那么您所描述的方法就非常过分了。

但是，如果您需要更新底层 DLL 但又不想每次都重新部署您的网站，则需要保留当前架构。在您当前的设置中，您只需每次重新部署 Web 服务，而网站不会受到影响。但是，除非您有一个非常活跃的网站，否则在您的 DLL 更改时重新部署该网站可能并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:34:32.230

层的正确分割线数量在很大程度上取决于诸如网站遵循数据模型的紧密程度以及最终将在数据库上完成多少繁重的工作。所以很难回答。

很多人花很多时间担心他们是否有足够/太多的层级，不幸的是，很多其他人花了很多时间试图绕过其他人规定的层级。

*要真正回答这个问题，您需要考虑一些事情*

*   你现在的应用规模（你有 5 个用户还是 50,000 个用户）
*   您的应用程序的扩展性（在升级之前您获得 5,000,000 名用户的可能性有多大）
*   您可以完全消化应用程序的整个部分而无需重写的频率（即 - 我们已经完全改变了业务规则，但奇迹般的是，只要您可以在这背后做相反的事情，UI 仍然是正确的界面）
*   您真正彻底改变存储或数据库基础设施的频率（作为 .net 开发人员，我没有去过很多刚醒来并决定切换 DMBS 的商店，但我有很多经理坚持在“以防万一”的抽象层上，随着时间的推移花费数万工时，而不是使用 linq2sql 或 EF）
*   您的其中一个层是否包含本质上痛苦的东西，实际上应该是带外的 web ui 资源（处理图像或办公文档是转移到服务的两个很好的例子，只是为了隔离开销/不稳定性有时）

我并不是要暗示这些事情永远不会发生，它们确实会发生，但是对于许多业务线中的许多开发人员来说，它们并没有像理论让你相信的那样发生。

很多这些东西只是归结为不要在不重写应用程序的其他部分的情况下无法实际看到替换的东西中创建一个层。剩下的就是试图猜测你从精心设计到过早优化的界限在哪里。

恕我直言 - 仅对于序列化和编码惩罚，如果它们总是在同一台服务器上运行，我永远不会在 Web 应用程序上编写 UI。如果您最初这样做是因为理论上需要稍后在其他地方扩展服务，我可以理解其动机，但还有一些其他问题，例如缓存数据过期和事务，如果*一切*都必须运行，这些问题通常会导致这仍然是一个尴尬的选择通过 WCF 服务。它使添加字段所需更改的内容数量增加了三倍，并使您无法使用关系数据库的许多功能。

**编辑**

OP 评论说 WCF 服务位于多个前端之后，因此该服务并不总是与 UI 有效地位于同一主机上。如果您要向 mvc 应用程序添加数据选项以返回 JsonResults 或其他内容，您仍然可以选择使用 MVC 返回其余端点并保持主 Web UI 完全连接到后端

# windows-8 - 获取正在运行的 MetroStyle 应用程序列表

> ID：11194759
> 
> 赞同：3
> 
> 时间：2012-06-25T18:04:00.250
> 
> 标签：windows-8, microsoft-metro

我想知道是否可以在 C# Metro 应用程序中获取正在运行的 MetroStyle 应用程序的列表。我希望在 Windows 8（不是 Windows Phone）中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T22:12:50.240

我正在用 Delphi 编写一个 Alt-Tab 手势替代方案，所以这是我发现列出正在运行的 ModernUI（曾经是 Metro）应用程序的方式，我只用 Windows 8 Release Preview 对其进行了测试，我不知道它是否仍然有效在 Windows 8 RTM 上。

```
procedure ShowRunningModernUIApps;
var
  metroapp:hwnd;
  strAppTitle: array[0..MAX_PATH]of char;
  h:integer;
  strListApps:string;
begin
  metroapp:=FindWindow('Windows.UI.Core.CoreWindow',nil);
  if metroapp <>0 then
  begin
    GetWindowText(metroapp,strAppTitle,MAX_PATH);
    strListApps:='Running ModernUI Apps : '+strAppTitle;
    h:=0;
    while h=0 do
    begin
      metroapp:=FindWindowEx(0,metroapp,'Windows.UI.Core.CoreWindow',nil);
      if metroapp<>0 then
      begin
        GetWindowText(metroapp,strAppTitle,MAX_PATH);
        strListApps:=strListApps+','+strAppTitle;
      end
      else h:=1; //let's finish the search loop

    end;
  end;
  ShowMessage(strListApps);

end; 
```

这显示了当前正在运行的 ModernUI 应用程序的标题，您可以随意存储它们的 HWND。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T07:01:09.030

不可能。那将是对沙盒的破坏。您不希望某些随机应用程序获取有关您运行的应用程序的信息并将其报告回家。

# php - 如何获取使用“require_once”的页面的 URL

> ID：11194771
> 
> 赞同：1
> 
> 时间：2012-06-25T18:04:48.763
> 
> 标签：php, require-once

我创建了一个 PHP 站点，它有 3 个页面，即 A、B 和 C。A 和 B 都将首先使用“require_once”调用页面 C。页面 C 有没有办法知道这个呼叫是来自 A 还是 B？

`$_SERVER['HTTP_REFERER']`没用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:15:25.990

**您可以在c.php**中使用 debug_backtrace 函数，
您还将获得调用者文件和调用者行号。

```
$db =  debug_backtrace();

echo "Calling file: ". $db[0]['file'] . ' line  '. $db[0]['line']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:08:03.123

一个.php

```
$page = 'A';
require_once 'C.php'; 
```

B.php

```
$page = 'B';
require_once 'C.php'; 
```

C.php

```
echo 'I was required by'.$page; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:29:04.753

试试 $_SERVER['REQUEST_URI']。根据 php.net，

> URI 提供整个请求路径（/directory/file.ext?query=string）

# svg - SVG 字体字形是否更喜欢绝对坐标而不是相对坐标？

> ID：11194772
> 
> 赞同：0
> 
> 时间：2012-06-25T18:04:48.897
> 
> 标签：svg, svg-font

这个周末我一直在玩 SVG 字体（特别是我自己的字体），并且发现（有点令我惊讶）他们似乎都更喜欢绝对坐标路径，就像[Keyamoon](http://keyamoon.com/icomoon/#toDownload)中的这个：

```
[...]
<font id="IcoMoon" horiz-adv-x="512" >
<font-face units-per-em="512" ascent="480" descent="-32" />
<missing-glyph horiz-adv-x="512" />
<glyph unicode="&#xe000;" d="M 512.00,192.00L 416.00,288.00L 416.00,384.00L 352.00,384.00L 352.00,352.00L 256.00,448.00L0.00,192.00L 64.00,192.00L 64.00,0.00L 224.00,0.00L 224.00,128.00L 288.00,128.00L 288.00,0.00L 448.00,0.00L 448.00,192.00 z" data-tags="home, house" />
[...] 
```

是否有充分的理由（例如，某些渲染器的已知错误），或者我可以采用通常的 Scur 节省空间的做法并坚持使用全小写的绘图命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:09:24.590

没有什么可以阻止您在 <glyph> 元素的 'd' 属性内使用 svg 中定义的任何路径命令。这是有效的，并且可以正常工作。

我怀疑您在 Keyamoon 上看到的绝对命令只是从另一种字体格式转换为 svg 的结果。

# jquery - 动画时边界框会切断图像的边缘

> ID：11194774
> 
> 赞同：0
> 
> 时间：2012-06-25T18:05:03.750
> 
> 标签：jquery, animation

我正在为这些图像制作动画，这些图像从屏幕底部升起并旋转。但是在动画期间，父 div 会隐藏任何溢出，直到动画完成。如何让它在整个动画中显示图像的所有部分？

示例：[http ://aws.redemptionconnect.com/redemption/play.html](http://aws.redemptionconnect.com/redemption/play.html)

这是我的插件：

```
$.fn.handMenu = function(){
                var config = {
                    width: 172,
                    height: 256
                }, screen = {
                    x: ($(window).width()),
                    y: ($(window).height())
                }, numChildren = this.find('.wrapper').children().length, self = this;

                function findSpacing(){ var a = (screen.x / 2) / numChildren; return (numChildren * config.width >= screen.x / 2)? a - ((config.width - a) / numChildren) : 0; }
                function resize(){
                    self.find('.wrapper').css({
                        'left': ((screen.x / 2) - ((findSpacing() == 0)? config.width * numChildren : (screen.x / 2) / 2)),
                        'width': ((findSpacing() == 0)? config.width * numChildren : screen.x / 2)
                    }).children().each(function(i){
                        $(this).css({
                            'left': (findSpacing() * i)
                        });
                    });
                }

                resize();

                $(window).resize(function(){
                    screen.x = $(window).width();
                    screen.y = $(window).height();

                    resize();
                });

                this.find('.wrapper').hoverIntent(function(){
                    var wrapper = $(this);
                    wrapper.animate({
                        'height': config.height
                    }, 700).children().each(function(i){
                        $(this).animate({'left': 50 * i}).rotate({animateTo:(i - (numChildren / 2)) * 10});
                    });
                }, function(){
                    $(this).animate({
                        'height': 50
                    }, 600).children().each(function(i){
                        $(this).animate({'left': (findSpacing() * i)}, 500).rotate({animateTo: 0});
                    });
                });
            }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:33:22.560

`.wrapper`因此，当您为div 的高度设置动画时，溢出似乎被隐藏了。

通过使用 marginBottom 而不是高度，溢出仍然可见。

[http://jsfiddle.net/q4rDT/1/](http://jsfiddle.net/q4rDT/1/)

# ruby-on-rails - 将类 id 添加到 button_to 的 div

> ID：11194777
> 
> 赞同：5
> 
> 时间：2012-06-25T18:05:28.013
> 
> 标签：ruby-on-rails, erb

所以我的 button_to erb 标签给了我类似下面的东西，我想知道是否可以通过在选项哈希中传递一些东西而不是使用 js 或手动添加 html 来向 div 添加一个 id：

```
<div>
<input id="button" type="submit" value="title">
<input name="auth_token">
</div> 
```

我的按钮 erb 代码只是

```
<%= button_to title, {}, :id => "button"%> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-03T12:43:21.073

从 3.2 开始，button_to 通过 html_options 键“form”接受表单属性的散列

```
<%= button_to title, {}, :form => { :id => "button" } %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:39:21.760

据我所知，您无法真正更改父 div 的 id。

[如您所见](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)， button_to 选项实际上并不允许这样做。

不过，您可以向父表单添加一个类。老实说，不完全确定为什么使用 button_to 命令将 div 添加到按钮中。

# spring - 在 Spring-Hibernate 应用程序中通过 Websphere 数据源获取数据时出现 SQLException

> ID：11194779
> 
> 赞同：1
> 
> 时间：2012-06-25T18:05:34.427
> 
> 标签：spring, hibernate, websphere-7, sqlexception

我正在研究 Spring-Hibernate-Websphere 应用程序和 sybase 作为数据库。以下是配置 Spring/Hibernate 以引用 Websphere 的 JNDI 数据源的代码片段。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans  xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/jdbc/icpDS" />
    <property name="lookupOnStartup" value="false" />
    <property name="cache" value="true" />
    <property name="proxyInterface" value="javax.sql.DataSource" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="com.ubs.research.icp.hibernate.object" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.max_fetch_depth">${hibernate.max_fetch_depth}</prop>
        </props>
    </property>
</bean>
<tx:annotation-driven />
<bean id="transactionManager" class="org.springframework.transaction.jta.WebSphereUowTransactionManager"/> 
```

以下是上述代码中使用的属性的值：

```
hibernate.dialect=org.hibernate.dialect.SybaseDialect
hibernate.show_sql=true
hibernate.format_sql=true
hibernate.connection.autocommit=false
hibernate.max_fetch_depth=0 
```

上面的配置在使用一些简单的查询时工作正常，我可以在控制台上看到那些休眠生成的查询。但是，在执行一些复杂的查询（具有多个连接）时，我发现下面的异常包含异常。

```
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R Caused by: java.sql.SQLException: JZ0PA: The query has been cancelled and the response discarded.  The cancel was probably issued by another statement on the connection.
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at com.sybase.jdbc3.jdbc.ErrorMessage.raiseError(Unknown Source)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at com.sybase.jdbc3.jdbc.SybStatement.getUpdateCount(Unknown Source)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at com.ibm.ws.rsadapter.jdbc.WSJdbcPreparedStatement.closeWrapper(WSJdbcPreparedStatement.java:479)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at com.ibm.ws.rsadapter.jdbc.WSJdbcObject.close(WSJdbcObject.java:240)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at com.ibm.ws.rsadapter.jdbc.WSJdbcObject.close(WSJdbcObject.java:193)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.jdbc.AbstractBatcher.closePreparedStatement(AbstractBatcher.java:534)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.jdbc.AbstractBatcher.closeStatement(AbstractBatcher.java:269)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:285)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.jdbc.AbstractBatcher.closeQueryStatement(AbstractBatcher.java:212)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.loader.Loader.doQuery(Loader.java:726)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.loader.Loader.doList(Loader.java:2213)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.loader.Loader.list(Loader.java:2099)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:289)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1695)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:142)
[6/25/12 13:31:00:357 EDT] 0000002f SystemErr     R     at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:152) 
```

什么可能导致此错误？任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:55:45.983

安装 Websphere Fixpack 7.0.0.13+（我们安装了 7.0.0.21）解决了该问题。问题在于处理来自 websphere 的 getUpdateCount()。当创建准备好的语句时（在我们的例子中是 Hibernate），在执行之前，如果调用 getUpdateCount()，Syabase（和 IBM 支持的 informix）抛出 SQLException，而其他数据库只返回 -1。这不是从 Websphere 处理的，而是将异常传播到应用程序代码。使用修订包，可以处理并解决问题。

更多阅读[在这里](http://www-01.ibm.com/support/docview.wss?uid=swg1PM08945)

# jquery - 使用 jQuery 调用 webMethod 返回 HTML ... webMethod 根本没有调用

> ID：11194784
> 
> 赞同：0
> 
> 时间：2012-06-25T18:05:56.453
> 
> 标签：jquery, visual-studio-2008, webmethod

我正在使用 VisualStudio 2008 并在 ASPX 页面上有一个方法，我试图使用 jQuery 使用 javascript 调用，如下所示。我只是在获取页面的 HTML。不调用 web 方法。有趣的是，如果我将 webMethod 的名称更改为在 javascript 中调用，我仍然会取回 HTML。不是说找不到 webMethod 的错误。

我尝试将数据参数更改为“{'dummy':0 }”，但这没有帮助。

我已经在一个新的 VS 2010 应用程序中毫无问题地使用了这个策略，但似乎无法让它在我正在添加页面的 VS 2008 中的现有应用程序上工作。（试图为旧应用程序添加一个扭曲）我已经查看了 firebug 在 Firefox 中告诉我的内容，一切看起来都不错。

任何帮助是极大的赞赏。

C# WebMethod 声明：

```
 [WebMethod()]
    public static string getQuestionnaires(int dummy)
    {
        System.Diagnostics.Debug.WriteLine("getQuestionnaires called");
        SqlCommand command = new SqlCommand();
        command.CommandText = "dbo.ws_GetPSQuestionnaire";
        command.CommandType = CommandType.StoredProcedure;
        DataTable dtQuestionnairesRaw = Utilities.ReturnDataSet(command).Tables[0];

        DataTable dtQuestionnaires = new DataTable();
        dtQuestionnaires.Columns.Add(new DataColumn("questionnaireID", typeof(int)));
        dtQuestionnaires.Columns.Add(new DataColumn("name"));

        foreach (DataRow dr in dtQuestionnairesRaw.Rows)
        {
            DataRow drNew = dtQuestionnaires.NewRow();
            drNew["questionnaireID"] = dr["questionnaireID"];
            drNew["name"] = Utilities.RemoveHTMLTags(dr["name"].ToString());
            dtQuestionnaires.Rows.Add(drNew);
        }
        dtQuestionnaires.AcceptChanges();

        return (JsonConvert.SerializeObject(dtQuestionnaires, Formatting.Indented));
    } 
```

我用这个javascript调用它。我的错误函数总是被调用。

```
 $(document).ready(function() {
        var request = $.ajax({
            type: "POST",
            url: "/crs4/admin/editPSQuestionnaire.aspx/getQuestionnaires",
            contentType: "application/json; charset=utf-8",
            data: "{ 'dummy':'0' }",
            dataType: "json",
            success: populateQuestionnaires,
            error: AjaxFailed
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:10:20.823

让我们把它归结为非常简单来验证您的配置：

创建一个简单的类来返回：

```
public class myReturn
{
    /// web service/webmethod needs 0 parameter constructor
    public myReturn()
    {
    }
    public myReturn(string returnValue)
    { 
        ReturnValue = returnValue;
    }
    public string ReturnValue;
} 
```

声明您的网络方法以使用该类：

```
[WebMethod()]      
public static myReturn getQuestionnaires(int dummy)      
{
   return new myReturn("howdy");
} 
```

叫它：

```
//set up the ajax with error so we see what is going on.
// the following syntax requires jquery 1.5 or later for the
// converters used for asp.net
$.ajaxSetup({
    data: "{}",
    dataType: "json",
    type: "POST",
    contentType: "application/json",
    converters: {
        "json jsond": function(msg) {
            return msg.hasOwnProperty('d') ? msg.d : msg;
        }
    },
    error: function(xhr, textStatus, errorThrown) {
        var errorMessage = ("Ajax error - " + this.url + " | "
           + textStatus + " | " + errorThrown + " | " 
           + xhr.statusText + " | " + xhr.status);
        alert(errorMessage);
    }
});

var pString = '{"dummy":0}';
$.ajax({
    data: pString,
    url: "/crs4/admin/editPSQuestionnaire.aspx/getQuestionnaires",
    success: function(msg) {
        alert(msg);
    }
}); 
```

编辑：您可能在网络配置中需要这个：

```
<httpModules>
    <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
</httpModules> 
```

# c++ - 示例 ATL 对话窗口

> ID：11194785
> 
> 赞同：3
> 
> 时间：2012-06-25T18:05:58.370
> 
> 标签：c++, visual-studio, user-interface, atl

谁能帮我找到一个最新的、工作的 ATL 项目，它有一个主窗口和一些组件？拜托，看在上帝的份上，不要告诉我使用 WTL/Qt 或其他。我需要 ATL。没有关于它的最新项目。我只需要一个主窗口，仅此而已。我可以弄清楚其余的。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T18:21:16.607

好的，看在上帝的份上：来自模板 + 对话窗口的 Visual Studio 2010 C++/ATL EXE 项目。

来源：

*   跟踪：[AtlDialogSample](http://www.alax.info/trac/public/browser/trunk/Utilities/AtlDialogSample)
*   SVN：[AtlDialogSample](http://www.alax.info/svn/public/trunk/Utilities/AtlDialogSample/)

这是您的主要兴趣：

```
////////////////////////////////////////////////////////////
// CMainDialog

class CMainDialog :
    public CDialogImpl<CMainDialog>
{
public:
    enum { IDD = IDD_MAIN };

BEGIN_MSG_MAP(CMainDialog)
    MESSAGE_HANDLER(WM_INITDIALOG, OnInitDialog)
    COMMAND_ID_HANDLER(IDCANCEL, OnCommand)
    COMMAND_ID_HANDLER(IDOK, OnCommand)
END_MSG_MAP()

public:
// CMainDialog

// Window Message Handlers
    LRESULT OnInitDialog(UINT nMessage, WPARAM wParam, LPARAM lParam, BOOL& bHandled)
    {
        ATLVERIFY(CenterWindow());
        return 0;
    }
    LRESULT OnCommand(UINT, INT nIdentifier, HWND, BOOL& bHandled)
    {
        ATLVERIFY(EndDialog(nIdentifier));
        return 0;
    }
}; 
```

和

```
VOID RunMessageLoop()
{
    CMainDialog Dialog;
    Dialog.DoModal();
} 
```

![在此处输入图像描述](../Images/2d55efb19a0adff37c25414e9a501783.png)

# c# - 文本 .txt 文档的输出文本行到 TextBlock

> ID：11194788
> 
> 赞同：1
> 
> 时间：2012-06-25T18:06:24.880
> 
> 标签：c#, string, windows-phone-7

应用的页面带有TextBlock和Button，还涉及到带有文本的.txt文件（提案，每个提案在同一行，只有100行左右）。当您单击一个 Button 语句（文档的第一个文本行）时，TextBlock 中会显示：

```
public string GetQ()
    {
        string pathFile = "Q.txt";
        Uri uri = new Uri(pathFile, UriKind.Relative); 
        StreamResourceInfo sri = Application.GetResourceStream(uri);
        using (StreamReader sr = new StreamReader(sri.Stream))
        {
            string wordline = sr.ReadLine();
            return wordline;
        }

    } 
```

我如何使下次按下按钮时，出现文件的下一行？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:18:48.357

这是未经测试的，但是您可以将文件存储在字符串数组中，然后从那里访问您需要的内容，而无需不断地重新打开文件以读取每一行。

```
var qFile = new List<string>();

public string GetQ()
{
    string pathFile = "Q.txt";
    Uri uri = new Uri(pathFile, UriKind.Relative); 
    StreamResourceInfo sri = Application.GetResourceStream(uri);
    using (StreamReader sr = new StreamReader(sri.Stream))
    {
        string line = "";
        while ((line != null)
        {
            line = sr.ReadLine());
            if (line != null)
                qFile.Add(line);  // Add to list
    }
} 
```

现在你可以加载`qFile[0]`到`qFile[qFile.Count - 1]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:35:08.120

您所追求的可以通过 File.ReadLines 轻松完成，如我快速的几行代码所示（没有进行单元测试）

```
 private static int LineNumber = 0;
    private List<string> textLines = new List<string>();

    public string GetTextLine()
    {
        const string pathFile = @"C:\test\Q.txt";

        if (textLines.Count == 0)
        {
            textLines = File.ReadLines(pathFile).ToList();
        }

        if (LineNumber < (textLines.Count - 1))
        {
            return textLines[LineNumber++];
        }

        return textLines[LineNumber];
    } 
```

希望对你有帮助，祝你好运...

# windows-8 - 在网格 Metro 应用程序中显示应用程序的动态磁贴

> ID：11194790
> 
> 赞同：1
> 
> 时间：2012-06-25T18:06:27.737
> 
> 标签：windows-8, microsoft-metro

我想知道是否可以在 Windows 8 中我自己的 MetroStyle 应用程序中显示应用程序的动态磁贴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:51:54.553

简短的回答：没有。

更长的答案：您不能直接在您的应用程序中显示另一个应用程序的动态磁贴，但您可以将看起来和感觉像动态磁贴的东西放在一起。如果另一个应用程序是您的另一个应用程序，您可能可以将您的磁贴更新发送到原始应用程序，并将数据提供给主机应用程序（您要在其中显示此磁贴）。这应该不难做到，Windows Phone 的 Silverlight 工具包有一个 HubTile 控件，它为该平台提供了类似的东西的基础。

如果您想要访问的应用程序的磁贴不是您可以控制的，那么由于 Metro 应用程序的沙盒特性，您将无法获取任何“实时”数据。

# iphone - 如何知道用户何时对 iOS 应用/游戏进行评分

> ID：11194791
> 
> 赞同：11
> 
> 时间：2012-06-25T18:06:34.143
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我正在为 iOS 开发游戏。我想实现一个功能，允许用户对我的应用程序进行评分，如果他这样做，他将为我的游戏获得积分。我知道如何显示屏幕、菜单以及任何要求用户评价我的应用程序的内容，但我不知道如何知道用户何时这样做，我的意思是，用户完成了所有过程，我得到了我的评价。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T18:11:53.550

不幸的是，你不会知道这一点，因为苹果不会给你反馈。你能做的最好的就是给他们“评价我的应用程序链接”，如果他们点击它，就给他们打分。我见过一些游戏会为用户评分，当用户点击链接时他们会给出分数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T19:07:39.067

你唯一能做的就是使用像[Appirater这样的东西](https://github.com/arashpayan/appirater)

您可以向您的客户推荐对您的应用进行审核和评分。但我认为你无法知道他们是否最终评分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T23:54:37.337

正如一些人提到的那样，实际上不可能知道去商店的人是否真的对应用程序进行了评价。但是 AskingPoint 有一个有趣的解决方案，它允许您使用您的应用程序分析（完全披露我是创始人）向您的最佳用户展示评分小部件。我们认为这将增加他们实际评估它的几率。您将获得在给定日期被评分的人数，并且可以将其与您获得的评分数量相关联。它有帮助，但并不完全是您想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T18:12:31.273

没有办法知道用户是否真的给应用评分。您可以向他们提供标注以将其带到应用商店（目的是让他们对其进行评分）。但是，只有当他们首先点击链接时，您才能真正看到他们是否对其进行了评价。

# xcode - Xcode4 断点适应代码变化？

> ID：11194794
> 
> 赞同：0
> 
> 时间：2012-06-25T18:06:44.617
> 
> 标签：xcode, xcode4, breakpoints

我在 Xcode4 中有一系列日志记录断点，我用它们来有选择地记录我需要的东西。但是，每当我对涉及添加或删除行的代码进行更改时，这些断点就会与它们应该在的位置不同步，有时甚至会转到完全不同的函数。

有没有办法让断点与代码保持同步，而不仅仅是依赖行号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:13:18.357

我相信它应该，至少它是 IDE 的通常行为。

只是一个想法。您是否尝试过重新安装 XCode？自从升级到 XCode 4 以来，我遇到了各种奇怪的错误。例如，无法为项目中的弹出窗口选择 XIB 文件 --- 在从头开始创建项目时，我能够选择那个 XIB并创建弹出窗口。当时我在 StackOverflow 上发布了一个关于此的问题，但从那以后仍然没有答案。

从那时起，该项目进行了大修，现在我使用完整的 Obj-C 代码从头开始构建我的界面，99% 的时间都放弃了界面构建器......

# geotools - Geotools 错误：LWGEOM_estimsted_extent：找不到表，添加图层时出现

> ID：11194796
> 
> 赞同：2
> 
> 时间：2012-06-25T18:06:53.547
> 
> 标签：geotools

我正在使用`version 8.0-M2`. `geotools`每次我尝试添加`layer`到`mapContent`using`mapContent.addLayer`时，

我有一条警告，内容如下：

> “警告：无法使用 ST_Estimated_Extent，退回到信封聚合”，

和一个错误说：

> “ org.postgresql.util.PSQLException：错误：LWGEOM_estimated_extent：无法在当前模式中找到表”。

虽然，这不会影响我的应用程序的工作方式，但我想摆脱异常。有人可以帮我吗？

# vb.net - Roles.GetRolesForUser() 为空

> ID：11194798
> 
> 赞同：0
> 
> 时间：2012-06-25T18:06:57.687
> 
> 标签：vb.net

我以前从未在 Vb.Net 中从事过授权工作。所以下面的问题对于高级程序员来说可能听起来很愚蠢。请道歉。

我正在尝试获取登录用户的 Active Directory 组列表。有人告诉我 Roles.GetRolesForUser() 是实现它的最佳方法。我在 web.config 中编写了以下代码。

```
<roleManager
  enabled="true"
  cacheRolesInCookie="true" >
</roleManager> 
```

并在后面的代码中添加了以下代码。

```
Dim userRoles As String() = Roles.GetRolesForUser() 
```

我看到 userRoles.length 为 0。我验证了用户有多个与之关联的活动目录组。这可能是因为我在 web.config 中设置的配置错误，或者这不是获取该用户所有活动目录组的方法。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:30:23.243

要么我太愚蠢，无法理解 Roles.GetRolesForUser()，要么配置它真的很难。:)

我用方法解决了这个问题`IsInRole()`。我知道可能的 ADGroups 将访问我的应用程序并将其作为 web.config 中的可配置项。然后使用`String.Split()`，然后手动检查`HttpContext.Current.User.IsInRole()`以验证用户可以访问该应用程序。

# actionscript-3 - 在 360 度范围内发射多发子弹？

> ID：11194801
> 
> 赞同：0
> 
> 时间：2012-06-25T18:07:17.003
> 
> 标签：actionscript-3, actionscript

我想要这种效果：

[http://i.imgur.com/xGi46.png](http://i.imgur.com/xGi46.png)

所以无论我点击哪里，它都会使用子弹产生炸弹类型。到目前为止，这是我的代码。现在它只在鼠标的方向上创建子弹。对不起，如果代码是混乱的。

```
shotDex = new Timer(timerDelay2);
shotDex.addEventListener(TimerEvent.TIMER, shot);

stage.addEventListener(MouseEvent.MOUSE_DOWN, shootBullet);
stage.addEventListener(MouseEvent.MOUSE_UP, dontShoot);

    public var angleRadian = Math.atan2(mouseY + 42.75,mouseX + 331.7);
    public var angleDegree = angleRadian * 180 / Math.PI;
    public var speed1:int = 10;

    public var shotDex:Timer;
    public var timerDelay2:int = (250);
    public function shot(tEvt:TimerEvent)
    {
        var _bullet2:bullet2 = new bullet2;
        _bullet2.x = 300;
        _bullet2.y = 300;
        _bullet2.angleRadian = Math.atan2(mouseY + 42.75,mouseX + 331.7);
        _bullet2.addEventListener(Event.ENTER_FRAME, bulletEnterFrame);
        stage.addChild(_bullet2);
    }
    public function shootBullet(evt:MouseEvent)
    {
        var _bullet2:bullet2 = new bullet2;
        _bullet2.x = 300;
        _bullet2.y = 300;
        _bullet2.angleRadian = Math.atan2(mouseY + 42.75,mouseX + 331.7);
        stage.addChild(_bullet2);
        _bullet2.addEventListener(Event.ENTER_FRAME, bulletEnterFrame);
        shotDex.start();
    }
    public function bulletEnterFrame(evt:Event)
    {
        var _bullet2 = evt.currentTarget;
        _bullet2.x +=  Math.cos(_bullet2.angleRadian) * speed1;
        _bullet2.y +=  Math.sin(_bullet2.angleRadian) * speed1;
        _bullet2.rotation = _bullet2.angleRadian * 180 / Math.PI;
        if (_bullet2.x < 0 || _bullet2.x > 600 || _bullet2.y < 0 || _bullet2.y > 600)
        {
            stage.removeChild(_bullet2);
            _bullet2.removeEventListener(Event.ENTER_FRAME, bulletEnterFrame);
        }
    }
    public function dontShoot(evt:MouseEvent)
    {
        shotDex.stop();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:16:06.137

您需要为每个子弹提供不同的角度，值在 0 弧度和`2 * Math.PI`弧度之间均匀分布：

```
public function shootBulletCircle(evt:MouseEvent) {
    var shots:Number = 12; // Number of shots in the circle
    for (var i=0; i<shots; i++) {
        var _bullet2:bullet2 = new bullet2;
        _bullet2.x = 300;
        _bullet2.y = 300;
        _bullet2.angleRadian = (i/shots)*(2*Math.PI);
        stage.addChild(_bullet2);
        _bullet2.addEventListener(Event.ENTER_FRAME, bulletEnterFrame);
    }
} 
```

作为可选的旁注：（`DisplayObject`这可能是您`Bullet`的 s 的超类）具有一个`rotation`属性，该属性在绘图时自动使用，但它期望该值以度为单位。`angleRadian`您可以尝试计算度数，将其存储为子弹的旋转值，然后完全摆脱。

# jquery - 移除或隐藏元素上的样式

> ID：11194802
> 
> 赞同：3
> 
> 时间：2012-06-25T18:07:20.943
> 
> 标签：jquery

我想删除一排链接中的最后一个右边框？

```
#mainMenu a {
display: block;
float: left;
height: 20px;
padding: 0px 10px 2px 10px;
border-right: 1px solid #cfcfcf;
font-size: 16px;
font-weight: bold;
font-family: arial, verdana, 'sans-serif';
color: #CFCFCF;
} 
```

我已经测试将边框的颜色更改为与背景相同的颜色，但它不起作用，我正在寻求帮助。也许有更好的方法？

```
$("a#mainMenu:last").css({border-right: '1px solid #ffffff'}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:15:16.177

显示的 CSS 和选择器彼此相反，这应该是正确的找到最后一个 A 假设单级菜单

```
 $("#mainMenu a:last").css("border-right", "none") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:10:54.627

你可以用纯css做到这一点：

```
#mainMenu a:last-of-type { border-right: none; } 
```

如果您使用 jQuery 执行此操作，请确保在`$(document).ready()`功能块内运行代码并更改`border-right`为`borderRight`：

```
$(document).ready(function(){
  $("#mainMenu a:last").css({borderRight: 'none'});
}); 
```

[演示](http://jsfiddle.net/jackwanders/9pCuz/1/)

# javascript - 使用 javascript 验证多个选择组

> ID：11194804
> 
> 赞同：1
> 
> 时间：2012-06-25T18:07:23.500
> 
> 标签：javascript, jquery

这是我的 js 小提琴链接：http: [//jsfiddle.net/m4tyC/](http://jsfiddle.net/m4tyC/)

我有多个选择标签，我想在提交时进行验证，例如

至少如果在第一组中选择了 size1 和 color1 和 Qty1 中的一个，并且如果选择了一个，我想验证其他的，同时如果选择了至少一个组，则表单可以提交，并且如果用户选择了一个第二组的选项我对第二组 size2 ， color2 ，...执行相同的验证类型

我感谢任何帮助，我在我的项目中使用 jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:00:47.140

这是一些 JQuery 代码。您可以自己弄清楚如何提交成功表单：

```
$(document).ready(function(){
    $("form").submit(function(event)
    {
        var is_valid = true;// for avoiding alerting in loop
        event.preventDefault();
        $(this).find("select").each(function(){ //usually default is the first
            if(!$(this).attr("selected"))
            {
                $("#"+$(this).attr("id")).each(function()
                {
                    if($(this).find("option:first").attr("selected"))
                    {
                        is_valid = false;
                    }
                });                             
            }
        });
        if( !is_valid )
            alert("Please make sure all values are set for row!");
        });
}); 
```

​</p>

看到这个[jsFiddle](http://jsfiddle.net/ByHM7/6/)。也有一些错误，但你可以解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:01:31.293

试试这个（只有当至少一行被完全选中时，表单才会提交）

```
$(function(){
    $('#frm_productOrder').on('submit', function(e){ 
        e.preventDefault();
        var f=$(this);    
        var invalid=false, selected=0;
        $('.selects').each(function(){
        var row=$(this);
        var items=0;
        $('select', row).each(function(){
            var t=$(this);
            var selectedIndex=t.prop("selectedIndex");
            if(selectedIndex) items++;
        });
        if(items==3) selected++;
        if(items>0 && items<3) invalid=true;
        items=0;
        });
        if(selected>0 && !invalid) f[0].submit();
        else alert('Please fill up the form correctly');       
    });
});​ 
```

[**演示。**](http://jsfiddle.net/heera/m4tyC/1/)

# c# - 使用 ASP.NET MVC 数据绑定视图模型显示 JQuery 对话框的最佳方式

> ID：11194805
> 
> 赞同：3
> 
> 时间：2012-06-25T18:07:31.107
> 
> 标签：c#, javascript, jquery, model-view-controller, jquery-ui

想象一个带有用户列表的简单页面。选择一个用户会显示一个 JQuery 模式对话框，其中包含可以编辑的各种详细信息。就像是：

```
@model IEnumerable<UserRole>

@if (Model.Any())
{
    foreach (var user in Model.Users)
    {
      <a href="#" id="user-details-link" onclick="userDetailsOpen(@user.id)">Details</a>
    }
} 
```

我将通过帖子提供更具体的示例，但我正在寻找的是关于将模型绑定的部分视图加载和显示为 JQuery 对话框的**最佳方式的一般“经验”意见。**

我知道如何在代码方面做到这一点，但我认为必须有更好的方法。我相信常见的方法不是很有效。

*我的规则和我想要的是将与部分视图弹出窗口关联的所有代码**保留**在该部分视图中。*我希望我的弹出窗口的结构类似于以下 UserDetails 部分视图：

```
@model User
<script src="@Url.Content("~/Scripts/UserScripts.js")" type="text/javascript"></script>

<div id="placeholder">

...The modal dialog content...

</div> 
```

这样，当另一个开发人员看到它时，一个人就可以轻松地将它们拼凑在一起。

据我所知，有两种方法可以将部分视图显示为对话框，我对它们都有问题：

**1)**使用我上面显示的部分视图结构，通过使用从母版页预加载 div 对话框`@Html.Partial("UserDetails", new User)`，然后，当我需要显示填充用户数据的对话框时，对将重新填充的 ActionMethod 执行 Ajax 调用带有所需数据的局部视图模型并使用 JQuery`.html()`方法重新渲染它。

一旦部分视图/对话框加载了数据，我只需使用 JQuery 显示它`.dialog('open')`

太好了，这行得通，但是这种逻辑存在一些问题：

a）我两次加载相同的局部视图（第一个空白，第二个加载数据）

b) 加载母版页时，占位符 DIV 的内容会在屏幕上闪烁。在 .html() 方法触发之前将DIV 设置为`display:none`在这里不起作用，它将加载带有该`display:none`标记的局部视图，并且弹出窗口将显示为空白窗口。

c) 当请求页面时，如果页面很大，页面显示需要一些时间

**2）**我可以在母版页上放置一个空白`<div id="placeholder"></div>`，然后使用 ajax 或者我现在使用 JQuery 将部分视图内容加载到该 div 中，而不是在部分视图中：

```
var url = "/MyController/MyAction/" + Id;
$("#palceholder").load(url).dialog('open'); 
```

同样，它有效，但我看到这种方式存在一些大问题：

a）它打破了我的“保持一致规则”。在查看 时，如果没有在其他开发人员周围进行一些搜索，将不知道将在此 Div 中加载什么局部视图。

b) 现在需要**在**母版页中引用部分视图弹出窗口的所有 Javascript，而不是部分视图本身。

c) 当请求页面时，如果页面很大，页面显示需要一些时间

最重要的问题是，您认为将模型绑定的填充部分视图显示为模态对话框同时保持代码组织的最佳方式是什么？

我的完美方案是预加载所有部分视图字段，然后，当请求对话框显示填充了数据时，模型将预加载的部分视图绑定到新的 JSON 数据集，而无需加载/重新- 加载所有局部视图字段。有办法吗？

PS 我尝试的其中一件事是预加载我的部分视图字段，`@Html.Partial("UserDetails", new User)`然后使用 JQuery`.replaceWith()`方法替换 Div 内容，但不幸的是我无法让它工作。

任何想法表示赞赏。没有坏主意。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:55:38.883

将部分代码加载到部分中，然后通过操作返回来更新部分容器并没有错。

```
<div id="ParitalContainer">
    @Html.Partial("_PartialView", Model.PartialModel)
</div> 
```

或者，您可以考虑使用 JSON 数据的场景。即，通过调用 a`$.ajax`或来异步加载所有数据`$.getJSON`。您的操作结果将返回`JsonResult`，然后您可以更新所需的元素。此外，如果您想要更强大的解决方案，您可以考虑使用 Knockout.js。如果我想要“保持在一起”的方法，这就是我会做的事情。

# java - http OAuth 响应错误

> ID：11194808
> 
> 赞同：0
> 
> 时间：2012-06-25T18:07:37.327
> 
> 标签：java, android, http, oauth, hmacsha1

```
@Override
protected Boolean doInBackground(Void... params) {
    // TODO Auto-generated method stub

        HttpClient httpclient = new DefaultHttpClient();  
        Log.d("HTTP","Exe");
        String sw=Sign(token);
        Log.d("HTTP","Exe");

        HttpPost httpPost;
        Log.d("HTTP","Exec");
        httpPost = new HttpPost(sw);
        Log.d("HTTP","Execute");

        HttpResponse response;
        try 
        {

            Log.d("HTTP","Executed");
//**THIS IS WHERE IT STOPS EXECUTION**

                response = httpclient.execute(httpPost); // the request executes
                Log.d("HTTP","Executed");
                HttpEntity entity = response.getEntity();
                InputStream is = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(is, "utf-8"), 256);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null)  sb.append(line); 
                String result = sb.toString();
                is.close();
                Log.d("HTTP",result);
                String  responseBody = EntityUtils.toString(((HttpResponse) response).getEntity());
                retString=responseBody;
                Log.d("HTTP",result);

            } 

            catch (ClientProtocolException e) {
                    e.printStackTrace();
            }
            catch(ConnectTimeoutException e){
                    e.printStackTrace();
            }
            catch (IOException e) {
                    e.printStackTrace();
            }

            //return null;

        return null;
    } 
```

我的日志猫：

```
06-25 23:45:59.105: D/HTTP(5993): wz27t6thob0fbxl
06-25 23:46:03.223: D/HTTP(5993): Exe
06-25 23:46:03.766: D/HTTP(5993): 1340648163
06-25 23:46:05.378: D/HTTP(5993): https://api.dropbox.com/1/shares/dropbox/a.jpg?oauth_consumer_key=2f2y1dyuqhp58ek&oauth_token=wz27t6thob0fbxl&oauth_nonce=1340648163&oauth_timestamp=1340648163&oauth_signature_method=HMAC-SHA1&oauth_version=1.0&oauth_signature=bo%2F5zuowvX%2Fcjy5uPP5ZPjUiP64%3D%0A
06-25 23:46:05.402: D/HTTP(5993): Exe
06-25 23:46:05.402: D/HTTP(5993): Exec
06-25 23:46:06.132: D/HTTP(5993): Execute
06-25 23:46:09.363: D/HTTP(5993): Executed
06-25 23:46:38.742: D/dalvikvm(5993): GC_FOR_MALLOC freed 5331 objects / 305856 bytes in 400ms
06-25 23:46:51.413: D/HTTP(5993): Executed
06-25 23:46:51.952: D/HTTP(5993): {"error": "Invalid signature. Expected signature base string: POST&https%3A%2F%2Fapi.dropbox.com%2F1%2Fshares%2Fdropbox%2Fa.jpg&oauth_consumer_key%3D2f2y1dyuqhp58ek%26oauth_nonce%3D1340648163%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1340648163%26oauth_token%3Dwz27t6thob0fbxl%26oauth_version%3D1.0"}
06-25 23:47:49.032: W/dalvikvm(5993): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
06-25 23:47:49.462: E/AndroidRuntime(5993): FATAL EXCEPTION: AsyncTask #1
06-25 23:47:49.462: E/AndroidRuntime(5993): java.lang.RuntimeException: An error occured while executing doInBackground()
06-25 23:47:49.462: E/AndroidRuntime(5993):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at java.lang.Thread.run(Thread.java:1096)
06-25 23:47:49.462: E/AndroidRuntime(5993): Caused by: java.lang.IllegalStateException: Content has been consumed
06-25 23:47:49.462: E/AndroidRuntime(5993):     at org.apache.http.entity.BasicHttpEntity.getContent(BasicHttpEntity.java:84)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at org.apache.http.conn.BasicManagedEntity.getContent(BasicManagedEntity.java:100)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at org.apache.http.util.EntityUtils.toString(EntityUtils.java:112)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at org.apache.http.util.EntityUtils.toString(EntityUtils.java:146)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at cloud.mobile.DropboxApi.doInBackground(DropboxApi.java:145)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at cloud.mobile.DropboxApi.doInBackground(DropboxApi.java:1)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-25 23:47:49.462: E/AndroidRuntime(5993):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-25 23:47:49.462: E/AndroidRuntime(5993):     ... 4 more 
```

The signed key(sw) is [https://api.dropbox.com/1/shares/dropbox/a.jpg?oauth_consumer_key=2f2y1dyuqhp58ek&oauth_token=wz27t6thob0fbxl&oauth_nonce=1340648163&oauth_timestamp=1340648163&oauth_signature_method=HMAC-SHA1&oauth_version=1.0&oauth_signature=bo%2F5zuowvX%2Fcjy5uPP5ZPjUiP64% 3D%0A](https://api.dropbox.com/1/shares/dropbox/a.jpg?oauth_consumer_key=2f2y1dyuqhp58ek&oauth_token=wz27t6thob0fbxl&oauth_nonce=1340648163&oauth_timestamp=1340648163&oauth_signature_method=HMAC-SHA1&oauth_version=1.0&oauth_signature=bo%2F5zuowvX%2Fcjy5uPP5ZPjUiP64%3D%0A)

我对http没有太多经验..

因为 httpPost = new HttpPost(sw); 工作正常，这是否意味着基本字符串签名是正确的？

还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:11:58.527

这似乎与 OAuth 错误无关。根据以下日志声明，您似乎没有在 http post url 中设置主机。

```
Caused by: java.lang.IllegalStateException: Target host must not be null, or set in parameters. 
```

# google-maps - 如何在 iframe 中包含方向

> ID：11194816
> 
> 赞同：1
> 
> 时间：2012-06-25T18:07:54.643
> 
> 标签：google-maps

我有以下表格：

```
<form method="get" action="http://maps.google.com/maps" target="_blank">
    <select name="daddr">
        <option selected value="Bovetstrasse 1, 3012 Bern, Switzerland">Missione (a Berna)</option>
        <option value="">Zollikofen</option>
        <option value="">B&uuml;mpliz</option>
        <option value="">Ostermundigen</option>
        <option value="">M&uuml;nsingen</option>
        <option value="">Konolfingen</option>
        <option value="">Worb</option>
    </select>
    <input type="text" name="saddr" maxlength="255" value="">
    <input type="hidden" name="hl" value="it">
    <input type="hidden" name="z" value="15">
    <input type="hidden" name="t" value="m">
    <input type="hidden" name="layer" value="t">
    <input type="hidden" name="doflg" value="ptk">
    <!--input type="hidden" name="output" value="embed"-->
    <button type="submit">Guidami</button>
    <p class="Didascalia">Powered by Google</p>
</form> 
```

它会像往常一样在左侧打开一个带有地图和方向的新窗口。

我想做的是在同一页面中的 iframe 中打开此内容，**但是**

*   如果我将目标更改为 iframe 名称，则会出现错误（此内容无法在框架中显示。为了保护您输入本网站的信息的安全性，此内容的发布者不允许显示在一个框架中。）
*   如果我也取消注释`output=embed`参数，那么只有地图与路线一起显示，但没有路线列表

有谁知道如何做到这一点？

# macos - Cocoa 中的 Webkit 页面缩放

> ID：11194820
> 
> 赞同：3
> 
> 时间：2012-06-25T18:08:06.517
> 
> 标签：macos, cocoa, webkit

我正在为 Mac 制作一个基于 WebKit 的文本编辑器应用程序，我需要找到一种方法来放大和缩小文档。

我在[这里](https://stackoverflow.com/questions/2181587/scale-webview-in-cocoa)看到了这篇 StackOverflow 文章，它建议只是缩放 Webkit 渲染到的视图。问题是，由于 Webkit 不知道它，这会破坏拖放等操作，并导致 Javascript 报告错误的光标位置。不幸的是，出于某种原因，Cocoa WebKit API 只支持放大或缩小文本，而不支持整个页面。

Safari 和 Chrome 都能够正确执行此操作。我已经浏览了 Chromium 源代码以了解它是如何完成的，但不幸的是它使用了完全不同的跨平台 API。

任何建议将不胜感激。如果我能弄清楚如何以安全的方式使用它们，我并不反对使用私有 API。

-基顿

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-13T03:07:19.963

用于执行此操作的 API 目前尚未公开，但它们已经存在多年并且不太可能改变。你可以在 WebKit 的[`WebViewPrivate.h`header](http://trac.webkit.org/browser/trunk/Source/WebKit/mac/WebView/WebViewPrivate.h?rev=151535#L210)中找到它们。您不会在系统上找到该标头，因此您必须自己在类别中重新声明这些方法。就像是：

```
@interface WebView (Zoom)
- (IBAction)zoomPageIn:(id)sender;
- (IBAction)zoomPageOut:(id)sender;
- (IBAction)resetPageZoom:(id)sender;
@end 
```

另一种选择是在编辑器中为元素设置 CSS`zoom`属性。`html`您可以在标记 ( `<html style="zoom: 1.5">`) 或 JavaScript ( `document.documentElement.style.zoom = "1.5"`) 中执行此操作。这不需要使用任何私有 API。

# android - ACRA 报告字段 - 无法添加更多报告字段

> ID：11194830
> 
> 赞同：1
> 
> 时间：2012-06-25T18:09:08.107
> 
> 标签：android, acra

默认情况下，ACRA 只填充两个字段，基本上是内存转储和堆栈跟踪。我试图让 ACRA 返回 APP_VERSION、ANDROID_VERSION、PHONE_MODEL 等字段，但在最新版本的 ACRA 中，我没有找到 ReportField。* 以下是文档中显示的内容，但它没有为我编译。

```
 import static ReportField.*;   
 @ReportsCrashes(formKey = "xxxxxxxxxxxxxxxx", 
        customReportContent = { APP_VERSION, ANDROID_VERSION, PHONE_MODEL, CUSTOM_DATA,   STACK_TRACE, LOGCAT },                
        mode = ReportingInteractionMode.TOAST,
        resToastText = R.string.crash_toast_text 
 public class MyApplication extends Application { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:09:46.113

org.acra.ReportField 确实存在于 acra jar 文件中。但是在 Android 4.0 中，JDK 1.6

该行：

导入静态 ReportField.*；不编译。

它应该是：

```
 import static org.acra.ReportField.*; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:15:00.633

Thats all fields from acra version 4.4.0 BUT REMEMBER!! 90% from erros on confg acra are on google docs form

Try this:

```
import org.acra.ACRA;
import org.acra.ReportField;
import org.acra.annotation.ReportsCrashes;

import android.app.Application;
import android.content.Context;

@ReportsCrashes(formKey = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx", customReportContent = {ReportField.APP_VERSION_CODE, ReportField.ANDROID_VERSION, ReportField.PHONE_MODEL, ReportField.CUSTOM_DATA,
        ReportField.STACK_TRACE, ReportField.LOGCAT, ReportField.AVAILABLE_MEM_SIZE, ReportField.REPORT_ID, ReportField.APPLICATION_LOG, ReportField.PACKAGE_NAME, ReportField.FILE_PATH,
        ReportField.BUILD, ReportField.BRAND, ReportField.PRODUCT, ReportField.TOTAL_MEM_SIZE, ReportField.INITIAL_CONFIGURATION, ReportField.CRASH_CONFIGURATION, ReportField.DISPLAY,
        ReportField.USER_COMMENT, ReportField.USER_APP_START_DATE, ReportField.USER_CRASH_DATE, ReportField.DUMPSYS_MEMINFO, ReportField.EVENTSLOG, ReportField.RADIOLOG, ReportField.IS_SILENT,
        ReportField.DEVICE_ID, ReportField.INSTALLATION_ID, ReportField.DEVICE_FEATURES, ReportField.ENVIRONMENT, ReportField.SETTINGS_SYSTEM, ReportField.SETTINGS_SECURE,
        ReportField.SHARED_PREFERENCES, ReportField.MEDIA_CODEC_LIST, ReportField.THREAD_DETAILS})
public class XYZApplication extends Application {
    public void onCreate() {
        ACRA.init(this);
        super.onCreate();
    }
} 
```

# javascript - 如何四舍五入到下一个最大的数字？

> ID：11194831
> 
> 赞同：56
> 
> 时间：2012-06-25T18:09:14.357
> 
> 标签：javascript, math

我希望我的号码总是四舍五入到接近尾数，如下所示：

> 1.2 => **2**
> 
> 1.4 => **2**
> 
> 2.5 => **3**
> 
> 2.9 => **3**

我怎样才能用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-06-25T18:11:07.147

您可以使用该功能。`Math.[ceil()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil)`

```
Math.ceil(1.1) // returns 2 
```

相反，如果你想四舍五入*，*你会使用`Math.[floor()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/floor)`

```
Math.floor(1.8) // returns 1 
```

这是一个演示：

```
console.table([1, 1.25, 1.49, 1.5, 1.75, 2].map(n => ({
  n,
  "Math.floor(n)": Math.floor(n),
  "Math.ceil(n)": Math.ceil(n),
  "Math.round(n)": Math.round(n),
})));
```

```
<script src="https://gh-canon.github.io/stack-snippet-console/console.min.js"></script><script>console.config({maximize:true,timeStamps:false})</script><style>.as-console-wrapper{display:block;}</style>
```

[注意：地板和天花板功能不是 JavaScript 独有的。有关更多信息，请参阅此[维基百科条目](http://en.wikipedia.org/wiki/Floor_and_ceiling_functions)。]

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-25T18:11:10.347

使用[`Math.ceil()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil)：

```
Math.ceil(1.2); // 2 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-25T18:11:23.093

采用`Math.ceil()`

它完全符合您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-27T13:25:36.180

我使用`Math.ceil()`函数来取整上限值。

# android - 向视图添加正弦/余弦波

> ID：11194833
> 
> 赞同：0
> 
> 时间：2012-06-25T18:09:24.373
> 
> 标签：android

有没有办法在我的 XML 文件中根据用户的不同输入构建图表？所有的图表都应该是正弦/余弦波……我之前在这里问过这个问题，但我收到的回复似乎没有涵盖正弦/余弦波，只是简单的折线图。有人告诉我有关 achartengine 和 Google Chart Tools。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T10:39:42.943

[您可以在此处](http://code.google.com/p/achartengine/downloads/list)下载 AChartEngine 演示并试一试。演示的[这一](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/demo/org/achartengine/chartdemo/demo/chart/XYChartBuilder.java)部分可以完全满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:23:58.600

如果您已经拥有要显示的数据的功能，则可以使用 Canvas 绘制所需的数据点：

画布教程：[http ://www.tutorialforandroid.com/2009/06/drawing-with-canvas-in-android.html](http://www.tutorialforandroid.com/2009/06/drawing-with-canvas-in-android.html)

# eclipse - eclipse jboss 7.1插件

> ID：11194835
> 
> 赞同：0
> 
> 时间：2012-06-25T18:09:26.237
> 
> 标签：eclipse, jboss, eclipse-plugin

我使用[http://download.jboss.org/jbosstools/updates/development/indigo/](http://download.jboss.org/jbosstools/updates/development/indigo/)进行新更新，但我仍然无法在 Eclipse 中的 window->preferences-->server-->runtime 环境下找到 jboss 7.0。我下载了eclipse Indigo SR2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:12:37.663

该插件仅用于管理 JBoss 运行时。插件本身不安装 JBoss AS 7。您可以轻松下载应用服务器并[设置运行时](https://docs.jboss.org/author/display/AS7/Starting+JBoss+AS+from+Eclipse+with+JBoss+Tools)。

# c++ - 函数地址

> ID：11194837
> 
> 赞同：0
> 
> 时间：2012-06-25T18:09:43.223
> 
> 标签：c++, winapi

假设我有一个这样定义的函数：

```
class Foo() {
  public:
      void bar(MyClass* p, int i, int j, CArray<CArray<int,int>,int> &a);
}

void Foo::bar(MyClass* p, int i, int j, CArray<CArray<int,int>,int> &a){
 // Function body
} 
```

对于一个 Win32 应用程序/DLL，这个函数没有“导出”，我怎么能找到函数地址`bar`，获取导出函数的函数地址很容易。但是获取非导出函数的函数地址有点困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:18:07.433

在一般情况下是不可能做到这一点的。

除其他问题外，如果该函数未导出，则*它可能不存在*。优化器可以在调用函数的每个位置内联函数。如果发生这种情况，函数将没有地址，因为它不存在于模块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:28:12.220

如果函数在 .dll 中，您可以使用 .def 文件导出它们。它在编译后的代码中创建一个导出表，就好像已经定义了 dllexport 一样。

在这里阅读：http: [//msdn.microsoft.com/en-us/library/d91k01sh (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/d91k01sh(v=vs.80).aspx)

# iphone - AVAudioPlayer 帮助：同时播放多个声音，一次停止所有声音，并解决自动引用计数

> ID：11194838
> 
> 赞同：4
> 
> 时间：2012-06-25T18:09:43.413
> 
> 标签：iphone, objective-c, ios, audio, avaudioplayer

我正在尝试创建`play`单个声音文件的按钮和当前正在播放的所有声音的`button`按钮。如果用户在短时间内`stops`单击多个按钮或相同的按钮，则应用程序应该同时播放所有声音。`button`使用 iOS 的系统声音服务，我很容易做到这一点。但是，系统声音服务会通过铃声设置来播放`volume`声音`iPhone's`。我现在正在尝试使用，`AVAudioPlayer`以便用户可以`play`通过媒体音量发出声音。这是我目前（但未成功）使用播放声音的代码：

```
-(IBAction)playSound:(id)sender
{
   AVAudioPlayer *audioPlayer;
   NSString *soundFile = [[NSBundle mainBundle] pathForResource:@"Hello" ofType:@"wav"];
   audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:soundFile] error:nil];
   [audioPlayer prepareToPlay];
   [audioPlayer play];
} 
```

每当我在 iPhone 模拟器中运行此代码时，它不会播放声音，但会显示大量输出。当我在我的 iPhone 上运行它时，声音根本不播放。在做了一些研究和测试后，我发现该`audioPlayer`变量是由自动引用计数释放的。此外，当 audioPlayer 变量在我的接口文件中定义为实例变量和属性时，此代码有效，但它不允许我一次播放多个声音。

第一件事是：如何使用`AVAudioPlayer`并坚持使用自动引用计数一次播放无限数量的声音？另外：当这些声音正在播放时，我怎样才能实现第二种`IBAction`方法来停止播放所有这些声音？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T18:35:31.660

首先，将声明和 alloc/init`audioplayer`放在同一行。此外，您只能播放一种声音，`AVAudioPlayer`但您可以同时制作任意数量的声音。然后停止所有声音，也许使用 a `NSMutableArray`，将所有玩家添加到它，然后迭代`[audioplayer stop];`

```
//Add this to the top of your file
NSMutableArray *soundsArray;

//Add this to viewDidLoad
soundsArray = [NSMutableArray new]

//Add this to your stop method
for (AVAudioPlayer *a in soundsArray) [a stop];

//Modified playSound method
-(IBAction)playSound:(id)sender {
     NSString *soundFile = [[NSBundle mainBundle] pathForResource:@"Hello" ofType:@"wav"];
     AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:soundFile] error:nil];
     [soundsArray addObject:audioPlayer];
     [audioPlayer prepareToPlay];
     [audioPlayer play];
  } 
```

那应该做你需要的。

# c# - 在 DataGrids 上显示 DataTables 列表

> ID：11194841
> 
> 赞同：2
> 
> 时间：2012-06-25T18:09:53.287
> 
> 标签：c#, asp.net

我有一个非常简单的场景，但在这方面的糟糕经验和谷歌搜索并没有多大帮助。

考虑一个带有 C# 代码的经典 ASPX 页面。假设我有一个`DataTable`s 列表（或`DataSet`带有几个表的 a ）。我需要一种方法来显示所有表格，`DataGrid`每个表格使用一个。

我尝试将整个绑定`DataSet`到`DataGrid`但它只显示第一个表。

有些东西告诉我我应该使用 a `Repeater`，`DataGrid`但我需要帮助或者完全不同的（更好的）替代方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:24:32.723

## 这是一个使用动态控件的示例：

**ASPX**

```
 <asp:Panel runat="server" ID="myPanel" Width="100%">
    </asp:Panel>
    <asp:Label ID="lblMessage" runat="server" />
    <asp:Button Text="Just post" runat="server" /> 
```

**背后的代码**

```
 protected void Page_Init(object sender, EventArgs e)
    {
        var s1 = Builder<Product>.CreateListOfSize(5).Build();
        var s2 = Builder<Order>.CreateListOfSize(9).Build();

        var g1 = new DataGrid { Width = new Unit("50%"), DataSource = s1 };
        var g2 = new DataGrid { Width = new Unit("50%"), DataSource = s2 };

        this.myPanel.Controls.Add(g1);
        this.myPanel.Controls.Add(g2);
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        this.DataBind();
    } 
```

**输出：**

请注意，每个网格的视图状态都保存在 post backs 中

![在此处输入图像描述](../Images/62bce23ae823f590c2577c097d8a2b2e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:24:19.310

看看这个链接：

[http://msdn.microsoft.com/en-us/library/system.data.dataset.tables.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataset.tables.aspx)

如果您使用的是数据集，则可以执行以下操作：

```
MyGrid.DataSource = dataset.Tables[0]
MyGrid2.DataSource = dataset.Tables[1] 
```

然后对网格中的每个表索引重复，例如 1、2、3

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T18:34:49.463

我不知道您想在所有表格中显示什么，即使您将显示所有表格，您将如何管理每个表格记录的标题。我觉得你需要先想想你想要什么？

如果每个表的列数相同，那么它很容易维护，你知道如何使用联合吗？

```
select x, y,z from table1
union 
select x, y,z from table2
union 
select x, y,z from table3
union 
select x, y,z from table4 
```

它只会从所有四个表中创建一个表结果，并且可以轻松绑定。

我不知道你是否需要这个，但无论如何我都试图帮助你:)

# android - 如何将图像放在 Android XML 中的另一个图像之上？

> ID：11194842
> 
> 赞同：0
> 
> 时间：2012-06-25T18:09:53.950
> 
> 标签：android, android-layout

我正在创建一个作为指南的应用程序。我有一张显示示例的照片，但我需要知道如何使图像的某些部分可点击，以转到另一个活动以显示有关该事物的更多详细信息。

或者在基本图像顶部有一个图像（将被点击）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:13:08.987

```
have an image (which will be clicked) on top of the base image? 
```

1 - 可以设置线性布局的背景并在父中心添加imageView。

或者

2- 使用带有两个图像视图的相对布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:48:21.670

您可以将主图像拆分为矩形部分，然后使用或（最适合您的情况）将它们作为`ImageView`s放置，以便它们的组合看起来像单个图像。`RelativeLayout``TableLayout`

在每一个上，您都可以使用[View.setOnClickListener(View.OnClickListener l)](http://developer.android.com/intl/zh-CN/reference/android/view/View.html#setOnClickListener%28android.view.View.OnClickListener%29)`ImageView`设置一个点击监听器

# html - 如何委派对 html 页面的控制两个 2 个独立的 jquerymobile 页面

> ID：11194846
> 
> 赞同：0
> 
> 时间：2012-06-25T18:10:32.943
> 
> 标签：html, iframe, jquery-mobile

我正在 jquery mobile 上进行试验，并希望尝试给定的设置：

*   2 个 jquery 移动页面分别完全嵌入到一个 div 中。
*   在当前 html 页面上并排固定大小区域的每个 div。
*   我希望在两个 jquerymobile 页面之间有消息（或 jquery 回调）。

然而，我能够成功的唯一配置是将我的 jquery 移动页面嵌入到 2 个单独的 iframe 中。我担心，无论是否合理，通过使用 iframe，我会在浏览器端使用大量资源，而不是使用简单的 div。此外，我在我的开发中强加了两个（iframe）页面之间的另一层通信，这并不性感。

我似乎无法控制

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

用于单个页面中的多个嵌入式 div。事实上，从一个 div 中弹出一个对话框，就可以控制整个 html 页面。

问题：

1.  我是在尝试做一些不应该做的事情吗？
2.  iframe 是否像我怀疑的那样消耗那么多资源？

感谢您的帮助和评论。

# python - 如何使用 python mock 直接模拟超类？

> ID：11194847
> 
> 赞同：19
> 
> 时间：2012-06-25T18:10:35.737
> 
> 标签：python, mocking

我正在使用 python 模拟框架进行测试（http://www.voidspace.org.uk/python/mock/），我想模拟一个超类并专注于测试子类的附加行为。

（对于那些感兴趣的人，我已经扩展*了 pymongo.collection.Collection*并且我只想测试我添加的行为。我不想为了测试目的而将 mongodb 作为另一个进程运行。）

对于这个讨论，*A*是超类，*B*是子类。此外，我定义了直接和间接超类调用，如下所示：

```
class A(object):
    def method(self):
        ...

    def another_method(self):
        ...

class B(A):
    def direct_superclass_call(self):
        ...
        A.method(self)

    def indirect_superclass_call(self):
        ...
        super(A, self).another_method() 
```

## 方法#1

*为A*定义一个名为*MockA*的模拟类，并使用*mock.patch*将其替换为运行时的测试。这处理直接超类调用。然后操纵 B.__bases__ 来处理间接超类调用。（见下文）

出现的问题是我必须编写*MockA*并且在某些情况下（如*pymongo.collection.Collection*的情况）这可能涉及大量工作来解开所有内部调用以模拟出来。

## 方法#2

所需的方法是以某种方式使用 mock.Mock() 类来及时处理模拟上的调用，以及在测试中定义的 return_value 或 side_effect。通过这种方式，我必须通过避免 MockA 的定义来做更少的工作。

我遇到的问题是我无法弄清楚如何更改 B.__bases__ 以便可以将*mock.Mock()*的实例作为超类放置（我必须以某种方式在这里进行一些直接绑定）。到目前为止，我已经确定*super()*检查 MRO，然后调用定义相关方法的第一个类。我无法弄清楚如何让超类处理对它的检查并在遇到模拟类时成功。在这种情况下，似乎没有使用 __getattr__ 。我希望超级认为该方法是在此时定义的，然后像往常一样使用 mock.Mock() 功能。

***super()*如何发现在 MRO 序列中的类中定义了哪些属性？有没有办法让我在这里插话并以某种方式让它动态地使用*mock.Mock()*？**

```
import mock

class A(object):
    def __init__(self, value):
        self.value = value      

    def get_value_direct(self):
        return self.value

    def get_value_indirect(self):
        return self.value   

class B(A):
    def __init__(self, value):
        A.__init__(self, value)

    def get_value_direct(self):
        return A.get_value_direct(self)

    def get_value_indirect(self):
        return super(B, self).get_value_indirect()

# approach 1 - use a defined MockA
class MockA(object):
    def __init__(self, value):
        pass

    def get_value_direct(self):
        return 0

    def get_value_indirect(self):
        return 0

B.__bases__ = (MockA, )  # - mock superclass 
with mock.patch('__main__.A', MockA):  
    b2 = B(7)
    print '\nApproach 1'
    print 'expected result = 0'
    print 'direct =', b2.get_value_direct()
    print 'indirect =', b2.get_value_indirect()
B.__bases__ = (A, )  # - original superclass 

# approach 2 - use mock module to mock out superclass

# what does XXX need to be below to use mock.Mock()?
#B.__bases__ = (XXX, )
with mock.patch('__main__.A') as mymock:  
    b3 = B(7)
    mymock.get_value_direct.return_value = 0
    mymock.get_value_indirect.return_value = 0
    print '\nApproach 2'
    print 'expected result = 0'
    print 'direct =', b3.get_value_direct()
    print 'indirect =', b3.get_value_indirect() # FAILS HERE as the old superclass is called
#B.__bases__ = (A, )  # - original superclass 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T20:15:06.800

> 有没有办法让我在这里插话并以某种方式让它即时使用 mock.Mock() ？

可能有更好的方法，但您始终可以编写自己的方法`super()`并将其注入包含您正在模拟的类的模块中。让它根据调用它的内容返回它应该返回的任何内容。

您可以仅`super()`在当前命名空间中定义（在这种情况下，重新定义仅适用于定义之后的当前模块），或者您可以`import __builtin__`将重新定义应用于`__builtin__.super`，在这种情况下，它将在 Python 会话中全局应用。

您可以使用默认参数捕获原始`super`函数（如果您需要从实现中调用它）：

```
def super(type, obj=None, super=super):  
    # inside the function, super refers to the built-in 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T20:52:30.743

按照 kindall 的建议，我玩弄了 super() 。不幸的是，经过大量的努力，处理复杂的继承情况变得相当复杂。

经过一些工作，我意识到 super() 在通过 MRO 解析属性时直接访问类的 __dict__ （它不执行 getattr 类型的调用）。解决方案是扩展一个 mock.MagicMock() 对象并用一个类包装它来完成此操作。然后可以将包装的类放在子类的 __bases__ 变量中。

被包装的对象将目标类的所有已定义属性反映到包装类的 __dict__ 中，以便 super() 调用解析为内部 MagicMock() 中正确修补的属性。

以下代码是我迄今为止发现的有效解决方案。请注意，我实际上是在上下文处理程序中实现的。此外，如果从其他模块导入，必须注意修补适当的命名空间。

这是一个说明该方法的简单示例：

```
from mock import MagicMock
import inspect 

class _WrappedMagicMock(MagicMock):
    def __init__(self, *args, **kwds):
        object.__setattr__(self, '_mockclass_wrapper', None)
        super(_WrappedMagicMock, self).__init__(*args, **kwds)

    def wrap(self, cls):
        # get defined attribtues of spec class that need to be preset
        base_attrs = dir(type('Dummy', (object,), {}))
        attrs = inspect.getmembers(self._spec_class)
        new_attrs = [a[0] for a in attrs if a[0] not in base_attrs]

        # pre set mocks for attributes in the target mock class
        for name in new_attrs:
            setattr(cls, name, getattr(self, name))

        # eat up any attempts to initialize the target mock class
        setattr(cls, '__init__', lambda *args, **kwds: None)

        object.__setattr__(self, '_mockclass_wrapper', cls)

    def unwrap(self):
        object.__setattr__(self, '_mockclass_wrapper', None)

    def __setattr__(self, name, value):
        super(_WrappedMagicMock, self).__setattr__(name, value)

        # be sure to reflect to changes wrapper class if activated
        if self._mockclass_wrapper is not None:
            setattr(self._mockclass_wrapper, name, value)

    def _get_child_mock(self, **kwds):
        # when created children mocks need only be MagicMocks
        return MagicMock(**kwds)

class A(object):
    x = 1

    def __init__(self, value):
        self.value = value

    def get_value_direct(self):
        return self.value

    def get_value_indirect(self):
        return self.value

class B(A):
    def __init__(self, value):
        super(B, self).__init__(value)

    def f(self):
        return 2

    def get_value_direct(self):
        return A.get_value_direct(self)

    def get_value_indirect(self):
        return super(B, self).get_value_indirect()

# nominal behavior
b = B(3)
assert b.get_value_direct() == 3
assert b.get_value_indirect() == 3
assert b.f() == 2
assert b.x == 1

# using mock class
MockClass = type('MockClassWrapper', (), {})
mock = _WrappedMagicMock(A)
mock.wrap(MockClass)

# patch the mock in
B.__bases__ = (MockClass, )
A = MockClass

# set values within the mock
mock.x = 0
mock.get_value_direct.return_value = 0
mock.get_value_indirect.return_value = 0

# mocked behavior
b = B(7)
assert b.get_value_direct() == 0
assert b.get_value_indirect() == 0
assert b.f() == 2
assert b.x == 0 
```

# msbuild - 如何在 Visual Studio 中将我的 .targets 文件用于自定义构建操作？

> ID：11194849
> 
> 赞同：5
> 
> 时间：2012-06-25T18:10:44.097
> 
> 标签：msbuild, msbuild-task

我是 MSBuild 的初学者。到目前为止，我已经能够创建一个名为“MakeTextFile”的自定义任务，它根据您传递的内容属性在 C:\ 中创建一个文本文件。这可以从命令行提示符运行。

我还将它包含在我的 .targets 文件中（在项目标签下）：

```
<ItemGroup>
    <AvailableItemName Include="CreateTextFileAction" />
</ItemGroup> 
```

当我在客户端应用程序 .csproj 上使用 Import 标记时，我现在可以将项目构建操作设置为“CreateTextFileAction”，但是该操作永远不会触发（因为在 C:\ 上没有创建文本文件）

如何获取用我的构建操作“CreateTextFileAction”标记的项目的所有文件路径并将它们传递给我的自定义任务？

**作为参考，我的 .targets 文件：**

```
<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <ItemGroup>
        <AvailableItemName Include="CreateTextFileAction" />
    </ItemGroup>

    <UsingTask AssemblyFile="CustomMSBuildTask.dll" TaskName="CustomMSBuildTask.MakeTextFile" />

   <Target Name="MyTarget">
       <MakeTextFile Contents="TODO HOW DO I GRAB MARKED FILES?" />
   </Target>
</Project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:38:05.773

csproj 文件具有一组已定义的目标。三个主要入口点是 Build、Rebuild 和 Clean。这些目标每个都有一组依赖项。如果您编写自己的目标作为标准 csproj 构建的一部分，则需要在这些依赖项中找到合适的注入点。

为了便于使用，有两个标准目标供您覆盖，称为 BeforeBuild 和 AfterBuild。如果您在 csproj 文件中定义它（在导入 csharp 目标文件之后）并在其中调用您的自定义任务，那么它应该可以工作（或至少继续前进）。

```
 <Target Name="BeforeBuild">
       <MakeTextFile Contents="TODO HOW DO I GRAB MARKED FILES?" />
   </Target> 
```

# android - 拔下耳机时如何停止音乐播放器？

> ID：11194855
> 
> 赞同：3
> 
> 时间：2012-06-25T18:11:10.447
> 
> 标签：android

当用户拔下耳机（有线和蓝牙）时，我想停止当前正在运行的 MusicPlayer。

我遇到了几个帖子，其中使用：

```
isWiredHeadsetOn(), isBluetoothA2dpOn() 
```

建议。

但是 Android 文档说 isWiredHeadsetOn() 已被弃用。我应该使用什么替代方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:15:16.563

从文档：

`isWiredHeadsetOn()`- 此方法已弃用。仅用于检查是否连接了耳机。

听起来它*仍然*推荐用于您正在做的事情，尽管文档措辞不佳

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:14:57.207

我刚刚读到有人建议注册 ACTION_HEADSET_PLUG 广播事件的帖子。

您显然可以从以下位置获取它的状态：intent.getIntExtra("state", 0));

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-20T06:58:59.640

我在我的应用程序中使用 AudioManager.ACTION_AUDIO_BECOMING_NOISY 事件。创建您的自定义广播接收器：

```
private class HeadsetIntentReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context cntx, Intent intent) 
    {
        String action = intent.getAction();

        if(action.compareTo(AudioManager.ACTION_AUDIO_BECOMING_NOISY) == 0)
        {
        }
    }
};  /* end HeadsetIntentReceiver  */ 
```

然后注册接收者：

```
headsetReceiver = new HeadsetIntentReceiver();
mIntentFilter = new IntentFilter();
mIntentFilter.addAction(AudioManager.ACTION_AUDIO_BECOMING_NOISY);
mParentActivity.registerReceiver(headsetReceiver, mIntentFilter); 
```

不要忘记稍后取消注册。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:17:19.590

根据它的文档，它已被弃用，但建议仅用于检查耳机是否已连接。使用应该没问题。

# php - MYSQL - 按 ID 获取下一条和上一条记录 - 超链接的 HTML

> ID：11194862
> 
> 赞同：4
> 
> 时间：2012-06-25T18:11:46.907
> 
> 标签：php, mysql, html, variables, hyperlink

因此，我试图通过添加下一个和上一个链接来在我的数据库中的记录之间导航，从而为 CRUD 添加一点便利。

**这是我的查询：**

```
$id=$_GET['id'];
$id = $currentid;
$prevquery= "SELECT * FROM inventory WHERE id < $currentid ORDER BY id DESC LIMIT 1"; 
$prevresult = mysql_query($prevquery);

$nextquery= "SELECT * FROM inventory WHERE id > $currentid ORDER BY id ASC LIMIT 1"; 
$nextresult = mysql_query($nextquery);
?> 
```

**这是我的 HTML：**

```
<a href="http://www.url.com/crud/edit.php?id=<?php echo $prevresult; ?> ">Previous</a>

<a href="http://www.url.com/crud/edit.php?id=<?php echo $nextresult; ?> ">Next</a> 
```

现在我在 PHPMyAdmin 中测试了这些查询，它们产生了我想要的结果，但是我无法让我的超链接实际提供正确的 ID……它们在 = 之后只是空白。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T18:13:02.763

`mysql_query`() 返回一个结果集（资源）。要从结果集中获取实际行，您需要使用类似[`mysql_fetch_row()`](http://php.net/manual/en/function.mysql-fetch-row.php).

您的“下一个”链接代码*如下所示*：

**PHP**

```
$nextquery= "SELECT * FROM inventory WHERE id > $currentid ORDER BY id ASC LIMIT 1"; 
$nextresult = mysql_query($nextquery);
if(mysql_num_rows($nextresult) > 0)
{
    $nextrow = mysql_fetch_row($nextresult);
    $nextid  = $nextrow['id'];
} 
```

**HTML**

```
<a href="http://www.url.com/crud/edit.php?id=<?php echo $nextid; ?> ">Next</a> 
```

并且之前的链接将类似地完成。

***强制性说明：***对于新代码，您应该认真考虑使用[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)。

**高级说明**：您可以将查询组合成一个查询，例如：

```
SELECT
  (
    SELECT id
    FROM inventory WHERE id < $currentid ORDER BY id DESC LIMIT 1
  ) AS previd,
  (
    SELECT id
    FROM inventory WHERE id > $currentid ORDER BY id ASC LIMIT 1
  ) AS nextid 
```

然后相应地调整逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:52:53.853

好吧，花了一点时间，但我想通了......

**PHP**

```
$prevquery= "SELECT * FROM inventory WHERE id < $currentid ORDER BY id DESC LIMIT 1"; 
$prevresult = mysql_query($prevquery) or die(mysql_error());
while($prevrow = mysql_fetch_array($prevresult))
{
$previd  = $prevrow['id'];
}

$nextquery= "SELECT * FROM inventory WHERE id > $currentid ORDER BY id ASC LIMIT 1"; 
$nextresult = mysql_query($nextquery) or die(mysql_error());
while($nextrow = mysql_fetch_array($nextresult))
{
$nextid  = $nextrow['id'];
} 
```

**HTML**

```
<a href="http://www.theantiquarium.com/crud/edit.php?id=<?php echo $previd; ?>">Previous</a>

<a href="http://www.theantiquarium.com/crud/edit.php?id=<?php echo $nextid; ?>">Next</a> 
```

感谢您的帮助，我认为它使我走上了正确的道路。我会在未来研究 PDO 的东西。我刚刚开始掌握旧的 MYSQL/PHP 语法，现在突然出现了一种新格式……很难跟上这一切！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T00:25:52.257

结果代码在表格的开头和结尾都有罪魁祸首。您的代码将按照您的要求“死亡”。相反，您可以检查查询结果（$prevresult、$nextresult）并决定不显示上一个或下一个项目的链接。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-10-23T07:06:47.330

SELECT IFNULL( (SELECT id FROM inventory WHERE id < $currentid ORDER BY id DESC LIMIT 1 ) , (SELECT id FROM inventory ORDER BY id DESC LIMIT 1 ) ) AS previd , IFNULL( (SELECT id from inventory WHERE id > $currentid ORDER BY id ASC LIMIT 1 ), (SELECT id FROM inventory ORDER BY id ASC LIMIT 1 ) ) AS nextid

# javascript - for循环中的回调函数？

> ID：11194866
> 
> 赞同：3
> 
> 时间：2012-06-25T18:11:58.810
> 
> 标签：javascript, jquery, for-loop, callback

如何在下面的 for 循环中的所有淡出之后运行函数？

我需要做的是淡出任何可能可见的东西，然后淡入特定的对象。由于样式要求，我的 topnav 和 dropdown nav 属于不同的 ul，这就是为什么事情很棘手。

我还不太擅长编写自己的脚本，所以我（希望）缺少一些基本的东西。

我已经尝试将东西包装在函数中，但这似乎与变量范围混淆并且搞砸了我不明白的事情......

谢谢你的帮助！

```
$('.ksddtop').on('mouseenter', function(){
    var ddtop = $(this).text();
    var dd = $('.' + ddtop);
    $('.ksddwrap').fadeIn();
    $(dd).fadeIn();

    var ksdds = $('.ksdd');
    for(var i = 0; i < ksdds.length; i++) {
        var ksdd = ksdds[i];
        if (! $(ksdd).hasClass(ddtop) ){
            $(ksdd).fadeOut();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T18:19:05.340

如果我了解要求，应该这样做：

```
$('.ksdd:not(' + ddtop + ')').fadeOut().promise().done(function(){
    // all done fading!
}); 
```

淡出所有`ksdd`没有`ddtop`类的元素，然后在它们都完成动画后做一些事情。

更多信息：

调用`.promise`jQuery 集合会为您提供一个 Promise 对象，该对象将在元素集合上的所有动画完成时解析。这包括排队的动画。

如果您改为将回调函数直接传递给`.fadeOut()`，您将获得*每个元素*的回调，而不是在它们全部完成后获得一个回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:16:23.320

代替：

```
var ksdds = $('.ksdd');
for(var i = 0; i < ksdds.length; i++) {
    var ksdd = ksdds[i];
    if (! $(ksdd).hasClass(ddtop) ){
        $(ksdd).fadeOut();
    }
} 
```

尝试：

```
$('.ksdd').each(function(){
    if (! $(this).hasClass(ddtop) ){
        $(this).fadeOut();
    }
}); 
```

# perl - 在 Perl 中使用 XPath 组织数据

> ID：11194868
> 
> 赞同：0
> 
> 时间：2012-06-25T18:12:07.240
> 
> 标签：perl, xpath

我正在使用这行代码从 XML 文件中获取两个数据条目

```
perl xmlPerl.pl zbxml.xml "//zabbix_export/templates/template/items/item/name/text() | //zabbix_export/templates/template/items/item/description/text()" 
```

它获取数据并垂直显示。例如：

*   名称1
*   描述1
*   名称2
*   描述2

我在 c# 中使用了它并有一些代码，因此它会像这样显示

*   名称1 - 描述1
*   名称 2 - 描述 2
*   name3 - （空白，因为没有描述）

*描述中甚至出现了一些空白*。这是 c# 代码，因为它可能会有所帮助。

```
XPathExpression expr;
        expr = nav.Compile("/zabbix_export/templates/template/items/item/name | /zabbix_export/templates/template/items/item/description");
        XPathNodeIterator iterator = nav.Select(expr);

        //Iterate on the node set
        List<string> listBox1 = new List<string>();
        listBox1.Clear();
        try
        {
            while (iterator.MoveNext())
            {

                XPathNavigator nav2 = iterator.Current.Clone();
               // nav2.Value;
                listBox1.Add(nav2.Value);
                Console.Write(nav2.Value);
                iterator.MoveNext();
                nav2 = iterator.Current.Clone();
                Console.Write("-" + nav2.Value + "\n"); 
```

好吧，我现在不得不将它切换到 Perl，我不确定是否应该尝试找到一些 Perl 代码来做我需要的事情，或者这是否可以在 XPath 中完成？我尝试查看一些 w3 教程，但没有找到我想要的。

谢谢！

编辑 - 我需要编辑我的 xmlPerl.pl 的这一部分吗

```
# print each node in the list
foreach my $node ( $nodeset->get_nodelist ) {
print XML::XPath::XMLParser::as_string( $node ) . "\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:54:29.037

它不能用 XPath 完成。它可以通过 XSL 转换来完成：

```
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="text"/>

  <xsl:template match="text()"/>

  <xsl:template match="item">
    <xsl:value-of select="concat(name,' - ',description,'&#x0d;&#x0a;')"/>
  </xsl:template>

</xsl:stylesheet> 
```

A simple Perl script that applies this XSLT will do the trick - see [this](http://www.devshed.com/c/a/Perl/XSL-Transformation-with-Perl/1/) for example (or any other command-line utility that applies an XSLT for that matter - like [msxsl.exe](http://www.microsoft.com/en-us/download/details.aspx?id=21714))

# stored-procedures - web2py 中的存储过程

> ID：11194870
> 
> 赞同：2
> 
> 时间：2012-06-25T18:12:11.390
> 
> 标签：stored-procedures, web2py

我正在考虑将应用程序从 php/MySQL 转换为 web2py（以及 MySQL 或 Postgres）。此应用程序的 php 代码库中唯一的 SQL 代码是对存储过程的调用...在 php 代码库中没有 SELECT、没有 INSERT 等。php 代码库中的所有 SQL 源代码的顺序为“CALL proc_Fubar(args...);”

我如何告诉 web2py，“这是我的 INSERT 存储过程；这是我的 SELECT ...”？我知道我可以执行 sql，但是从 SELECT 中返回的行集怎么样...我希望返回该数据，就好像它是来自表的 web2py 查询的结果一样。

是的，我知道。我试图获得 web2py 所做的所有整洁的东西，而不是跟上我的讨价还价（通过将我的 SQL 定义为 web2py 想要看到它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T01:09:48.050

您可以尝试以下方法。首先，定义一个与存储过程返回的字段匹配的模型（设置 migrate=False 以便 web2py 不会尝试在数据库中创建该表）。

```
db.define_table('myfaketable', ..., migrate=False) 
```

然后做：

```
raw_rows = db.executesql('[SQL code to execute stored procedure]')
rows = db._adapter.parse(raw_rows,
    fields=[field for field in db.myfaketable],
    colnames=db.myfaketable.fields) 
```

# xamarin.ios - 为 Release|iphone 构建 monotouch-bindings WEPopover 示例时出错

> ID：11194872
> 
> 赞同：0
> 
> 时间：2012-06-25T18:12:25.960
> 
> 标签：xamarin.ios

`Debug|iphone`在构建时工作正常。

因为`Release|iphone`我收到以下错误：

> LD：重复的符号_OBJC_CLASS _ $ _在/var/folders/t0/bmphw69x013_2my_9n4sds9c0000gn/T/tmp215a7ca2.tmp/libWEPopoverUniversal.a(WEPopoverContainerView.o）和/var/folders/t0/bmphw69x013_2my_9n4sds9c0000gn/T/tmp215a7ca2.tmp/libWEPopoverUniversal.a WEPopoverContainerViewProperties (WEPopoverContainerView.o) 用于架构 armv7

不知道如何修复。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:38:26.530

*更新*

现在已经修复了这个问题，只需更新您的 monotouch-bindings 存储库，它应该可以工作。

*旧答案*

出于某种原因，这看起来本机库很糟糕。

您可以采取一种解决方法：

*   在 iPhone Application 项目选项中，设置 Devices: Universal 和 Deployment Target: 3.2
*   在 iPhone Build 项目选项中，切换到 Advanced 选项卡并选择 ARMv6 而不是 ARMv7。

# c++ - 剪辑线到屏幕坐标

> ID：11194876
> 
> 赞同：0
> 
> 时间：2012-06-25T18:12:32.913
> 
> 标签：c++, math, graphics, vector, 2d

我有定义为两点的线。开始 = (xs,ys) 结束 = (xe, ye)

我正在使用的绘图功能仅接受完全在屏幕坐标中的线条。屏幕尺寸为 (xSize, ySize)。

左上角是 (0,0)。右下角是 (xSize, ySize)。

其他一些函数给了我定义为例如 start(-50, -15) end(5000, 200) 的行。所以它的末端超出了屏幕尺寸。

在 C++ 中

```
struct Vec2
{
 int x, y
};

Vec2 start, end //This is all little bit pseudo code
Vec2 screenSize;//You can access coordinates like start.x end.y 
```

如何计算位于屏幕边缘而不是屏幕外的新起点和终点。我知道如何在纸上做到这一点。但我无法将其转移到 C++ 中。在纸上，我正在寻找属于边缘和线的点。但对于 c++ 来说，计算量很大。

你能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T18:47:20.287

有许多线裁剪算法，例如：

*   Cohen-Sutherland[维基百科页面与实现](http://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland_algorithm)
*   Liang–Barsky[维基百科页面](http://en.wikipedia.org/wiki/Liang%E2%80%93Barsky)
*   Nicholl-Lee-Nicholl (NLN) 等等。见[维基百科上的剪线](http://en.wikipedia.org/wiki/Line_clipping)

**[EDIT1]** 见下图： ![在此处输入图像描述](../Images/b4859e968d8b6cb0f7c9c3640362cd8b.png)

起点有3种：

1.  sx > 0 和 sy < 0（红线）
2.  sx < 0 和 sy > 0（黄线）
3.  sx < 0 和 sy < 0（绿色和紫色线）

在情况 1 和 2 中，只需分别找到 Xintersect 和 Yintersect 并选择它们作为新的起点。如您所见，情况3有2种线。在这种情况下找到Xintersect和Yintersect并选择终点附近的交点，即与endPoint距离最小的点。

`min(distance(Xintersect, endPoint), distance(Yintersect, endPoint))`

**[编辑2]**

```
// Liang-Barsky function by Daniel White @ http://www.skytopia.com/project/articles/compsci/clipping.html
// This function inputs 8 numbers, and outputs 4 new numbers (plus a boolean value to say whether the clipped line is drawn at all).
//
bool LiangBarsky (double edgeLeft, double edgeRight, double edgeBottom, double edgeTop,   // Define the x/y clipping values for the border.
                  double x0src, double y0src, double x1src, double y1src,                 // Define the start and end points of the line.
                  double &x0clip, double &y0clip, double &x1clip, double &y1clip)         // The output values, so declare these outside.
{

    double t0 = 0.0;    double t1 = 1.0;
    double xdelta = x1src-x0src;
    double ydelta = y1src-y0src;
    double p,q,r;

    for(int edge=0; edge<4; edge++) {   // Traverse through left, right, bottom, top edges.
        if (edge==0) {  p = -xdelta;    q = -(edgeLeft-x0src);  }
        if (edge==1) {  p = xdelta;     q =  (edgeRight-x0src); }
        if (edge==2) {  p = -ydelta;    q = -(edgeBottom-y0src);}
        if (edge==3) {  p = ydelta;     q =  (edgeTop-y0src);   }   
        r = q/p;
        if(p==0 && q<0) return false;   // Don't draw line at all. (parallel line outside)

        if(p<0) {
            if(r>t1) return false;         // Don't draw line at all.
            else if(r>t0) t0=r;            // Line is clipped!
        } else if(p>0) {
            if(r<t0) return false;      // Don't draw line at all.
            else if(r<t1) t1=r;         // Line is clipped!
        }
    }

    x0clip = x0src + t0*xdelta;
    y0clip = y0src + t0*ydelta;
    x1clip = x0src + t1*xdelta;
    y1clip = y0src + t1*ydelta;

    return true;        // (clipped) line is drawn
} 
```

# c# - GetClientUTC 返回空值

> ID：11194879
> 
> 赞同：0
> 
> 时间：2012-06-25T18:12:53.397
> 
> 标签：c#, utc

在 C# 中，当我尝试使用 UTC 时间获取页面的当前时间时。我得到一个空值。我首先认为该问题可能与 runat="server" 属性设置不正确或浏览器未正确接受 cookie 有关。然而，这两者似乎都不是问题。这是否意味着我在某处缺少钥匙？

任何想法或建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:15:59.493

Session 对象本身没有任何内容。你需要先把价值放在那里。结果，不存在的键返回空（null）结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:28:55.620

我不知道你从哪里得到这个代码片段，但你必须`Session`自己在某个地方设置对象中的值。如果您想获取客户端时钟与 UTC 的偏移量，您可以在此处查看此站点：[Getting the client UTC Offset with ASP.NET](http://rsanidad.wordpress.com/2007/09/21/getting-the-client-utc-offset-with-aspnet/)

当然，在您交付第一页时，您无法知道客户的时间。此外，如果客户端禁用了 javascript，您将永远无法获得信息。在这种情况下，您必须“猜测”偏移量，或者使用一些默认值，例如您的服务器时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:29:23.543

会话不会自动填充，因此如果您手动将其放入其中，我们将需要更多关于何时何地的上下文。

不过，我不清楚您为什么要暂时查看会话集合。

当您说“页面的当前时间”时，您在说什么？你只想要当前时间吗？那就是`DateTime.UtcNow`。或者您正在寻找客户时钟设置的时间？

# facebook - 输入画布 url 时，facebook 自动重定向到 oauth 对话框而不是索引页面

> ID：11194881
> 
> 赞同：0
> 
> 时间：2012-06-25T18:13:05.680
> 
> 标签：facebook, facebook-oauth

输入“https://apps.facebook.com/seemyfuture”时，Facebook 会自动将用户重定向到 Oauth 对话框，而我没有为此编写任何脚本。

用户假设首先登陆我在“example.com/seemyfuture/index.php”上的索引页面。在索引页面上，我允许用户先阅读一些内容，然后如果他们没问题，他们可以单击一个链接，该链接将引导他们进入 OAuth 对话框。

这是由于任何设置或任何 Facebook 规则造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:23:12.193

转到您的应用设置，并在身份验证对话框设置中*禁用*“经过身份验证的推荐”……</p>

# ios - NSString 工作一次然后不工作

> ID：11194884
> 
> 赞同：0
> 
> 时间：2012-06-25T18:13:12.730
> 
> 标签：ios, nsstring

这是我第一次使用这个网站，而且我对 Objective-c 还是很陌生。我确信这是一个简单的问题，但由于某种原因，我遇到了很多问题。该应用程序旨在让用户通过文本字段输入一个字符串，然后它将选择句子的其余部分并显示它。问题似乎是我的 *name 将在键盘方法之后保留并在 changelabel 方法中工作一次。然后，如果我再次按下按钮，调用 changelabel 方法，名称似乎已被释放并使应用程序崩溃。#import #import "Array.h"

```
@interface RandomBoredViewController : UIViewController {
UILabel *label;
UIButton *button;
UITextField *textField;
Array *array;
NSString *name;
NSString *description;
NSMutableString *whole;
}
@property (nonatomic, retain) IBOutlet UILabel *label;
@property (nonatomic, retain) IBOutlet UIButton *button;
@property (nonatomic, retain) IBOutlet UITextField *textField;
@property (nonatomic, retain) Array *array;
@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSString *description;
@property (nonatomic, retain) NSMutableString *whole;

-(IBAction) keyBoard;
-(IBAction) changeLabel;

@end 
```

和我的.m

```
#import "RandomBoredViewController.h"

@implementation RandomBoredViewController

@synthesize label;
@synthesize checker;
@synthesize button;
@synthesize textField;
@synthesize array;
@synthesize name;
@synthesize description;
@synthesize whole;

-(IBAction) changeLabel {
NSLog(@"Button being pushed");
description = [array getString];
NSLog(@"%@",description);
NSLog(@"%@",name);
name = [NSString stringWithString:name];
whole = [NSMutableString stringWithString:name];
NSLog(@"%@",name);
NSLog(@"%@",whole);
[whole appendString:description];
NSLog(@"%@",name);
NSLog(@"%@",whole);
label.text = whole;
NSLog(@"%@",name);
}

-(IBAction) keyBoard {
name = [NSString stringWithString:textField.text];
NSLog(@"%@",name);
label.text = [NSString stringWithString: name];
[textField resignFirstResponder];
}

- (void)viewDidLoad {
[super viewDidLoad];
array = [[Array alloc]init];
[array createArray];
NSLog(@"%i",[array arrayCount]);
whole = [[NSMutableString alloc]init];
name = [[NSString alloc]init];
}

- (void)dealloc {
[super dealloc];
[label release];
[button release];
[textField release];
[array release];
//[name release];
[description release];
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:39:58.977

您将 name 设置为 NSString 的自动发布实例，这可能是导致您的应用程序崩溃的原因。

利用

```
self.name = [NSString stringWithString:textField.text]; 
```

您合成的 mutator 将保留 NSString 并阻止它被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:49:47.340

以一个缩影为例，您发布的代码创建了两个命名的东西`name`——一个实例变量和一个属性。

实例变量是直接访问的存储。他们没有行为。

属性是通过 getter 和 setter 访问的命名属性。所以他们可能有任意行为。它们可以报告实例变量的值或从实例变量计算的值或通过任何其他方式计算或获得的值。相关地，设置者可以`retain`或`assign`以任何其他方式行事。

实例变量只能被它们所属的类的实例访问。属性通常旨在供任何人访问。

由于保留是一种行为，并且您已将其归因于您的`name`属性，因此对其进行设置将导致`retain`. 实例变量不能有行为，因此为其设置值不会导致 a`retain`或其他任何结果。

结果，这一行：

```
name = [NSString stringWithString:name]; 
```

创建一个新字符串并返回一个非拥有引用。这意味着它肯定会在此自动释放池的持续时间内持续存在（即，假设您没有手动控制自动释放池，您可以明确地将其作为参数传递或安全返回）。

您将该引用存储到您的实例变量。实例变量没有行为，因此存储了引用，但您仍然不拥有该对象。它仍然只在该自动释放池期间使用是安全的。

因此，当您以该方法访问它时，它是安全的。当您稍后访问它时，它是不安全的。

相反，如果您选择了：

```
self.name = [NSString stringWithString:name]; 
```

然后您将该字符串设置为该属性的新值。因为您的属性具有该`retain`行为，所以您随后可以完全安全地访问字符串对象，除非您另有说明。

因为您有一个与实例变量同名的属性，所以您随后可以将其作为 just`name`或 as访问`self.name`。同样，如果您确保手动拥有拥有引用，您可以直接存储到实例变量而不是通过属性。

如上所述，使用 ARC 是一种让编译器为您解决所有这些问题的方法。

这个问题是导致你的代码崩溃的原因——你最终试图访问一个不再有效的引用。如果您拥有它，那么至少只要您保留所有权，它就会继续存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:37:43.347

尝试使用 self.name 有时这些东西也会让我感到困惑，因此您可能需要考虑使用 arc，在这种情况下，大多数这些东西都可以避免。

使用属性时，您应该始终使用 self.propertyName vs propertyName（仅），它使用访问器（get propertyName，set propertyName）而不是直接访问该指针值。

请记住，该规则有 2 个例外，init 和 dealloc 不应使用 self。

```
self.name = [NSString stringWithString:name]; 
```

从技术上讲，你还应该有一个 init 方法来初始化你的变量，我相信你应该在你的 dealloc 方法中最后调用 [super dealloc] 而不是第一个，但这不是你的问题，可能并不重要（当我不使用 arc 时我会做什么)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:41:43.203

当您在 中更改您的实例变量时`changeLabel`，您应该释放以前的值并保留新的值。您可以使用访问器为您执行内存管理工作。另外，我认为您应该`[super dealloc]` **在**`dealloc`.

如果您不熟悉 Cocoa 内存管理（即使您熟悉），最好启用 ARC（自动引用计数）并让编译器处理它。

# windows - 尽管全新安装 LWP 连接问题

> ID：11194886
> 
> 赞同：2
> 
> 时间：2012-06-25T18:13:19.087
> 
> 标签：windows, perl, cpan, lwp

# 更新

研究一个理论，我编辑`LWP/Protocol/http.pm`在子程序中包含一个 sleep 语句`request`：

```
if (!$has_content || $write_wait || $has_content > 8*1024) {
  WRITE:
    {
        # Since this just writes out the header block it should almost
        # always succeed to send the whole buffer in a single write call.
        my $n = $socket->syswrite($req_buf, length($req_buf));
        sleep 2;   ## <----- NEW 
        unless (defined $n) {
        ... 
```

该`get`声明有效，返回一个`200 OK`. 非常感谢[Alan Curry](https://stackoverflow.com/users/1493754/alan-curry)帮助调试和在代码中找到这个特定位置。

不确定它是否完全回答了问题，或者该解决方案是否长期有效。将不得不做更多的检查。

# 概括：

*   [使用子例程的LWP::UserAgent](http://search.cpan.org/perldoc?LWP::UserAgent)模块`get`对某些 URL 失败，报告 500 超时。
*   只有***一些***URL 失败。例如`www.google.com`失败，但`www.google.se`成功。
*   我没有其他连接问题，所有 URL 都可以通过浏览器和 ping 等 cmd 程序访问。
*   由于这个问题，我无法使用 CPAN 或 ActivePerl 的 ppm 安装 perl 模块。
*   安装另一个 perl 发行版后问题仍然存在。
*   奇怪的是，使用调试器并单步执行代码会使失败的 URL 成功。
*   我正在使用防火墙，并且允许 perl 建立连接。（不相关，因为某些 URL 成功）
*   防火墙日志显示 perl 被允许连接失败的 URL 和非失败的 URL。（见下文）日志还显示套接字打开以侦听，但时间戳与失败的连接不匹配。

# 目标

*   我主要是在寻找能够安装模块的任何解决方案。
*   我对如何调试问题的所有建议感兴趣，*不需要*完整的解决方案。欢迎任何提示或提示。

# 细化

我使用 ActivePerl v5.14 已经有一段时间了。使用 Perl 包管理器命令和 gui 安装模块`ppm`效果很好，但在某些时候停止工作，报告 500 超时。cpan shell 报告了同样的事情。

我已经广泛搜索了这个问题，但没有发现任何与我的问题相关的内容，或者以任何方式提供帮助。

ActivePerl 支持声称它可能是一个代理设置，这是可笑的。我有很多不需要代理设置的连接到互联网的程序，据我所知，我不需要这样做。我试图找出我的代理设置是什么（如果有的话），但我发现的唯一内容是模糊的引用，例如“使用系统设置”、“不需要代理”和“代理与您的 IP 相同”。

所以昨晚我受够了并安装了草莓 perl，但它也遇到了同样的问题。之后我卸载了 ActivePerl。

无论如何，我已经尝试过 LWP 模块，发现我可以在那里重现错误。它似乎仅限于某些网站，而 cpan 就是其中之一（？）。我创建了这个脚本进行测试：

```
use strict;
use warnings;

use LWP::UserAgent;
use URI;

my $ua = LWP::UserAgent->new;
my $url = shift;
my $u = URI->new($url);
$ua->no_proxy('cpan.strawberryperl.com','cpan.com',$u->host);
$ua->timeout(30);
my $r = $ua->get($url);
if ($r->is_success) {
    print $r->decoded_content;
} else {
    die $r->status_line;
} 
```

然后做了一些测试：

```
tx.pl http://cpan.strawberryperl.com/authors/01mailrc.txt.gz
500 read timeout at tx.pl line 23.

tx.pl http://stackoverflow.com
500 read timeout at tx.pl line 23.

tx.pl http://www.google.se
<!doctype html><html itemscope itemtype="http://schema.org/WebPage"><head><meta
http-equiv="content-type" content="text/html; charset=ISO-8859-1"><meta ... 
```

所以，谷歌工作，www.youtube.com 也工作，但 www.yahoo.com 和 search.cpan.com 失败。180 秒的默认超时使调试变得非常烦人，这就是我在脚本中减少它的原因。不用说，如果我尝试使用 Firefox 或 ping 访问这些 URL，所有这些 URL 都可以访问。

* * *

**预计到达时间：**

奇怪的是，通过调试器运行脚本，打开跟踪并跳到最后，使之前失败的连接成功。

当脚本由于打印数千行跟踪代码而运行得更慢时，这似乎意味着存在某种“固定”的打嗝，错过的时间。

* * *

我可以将这个问题理解为某些 ActivePerl 模块损坏的结果，但草莓 perl 使用的是完全不同的文件集，所以它一定是我的系统。

为什么有些网站有效而有些无效，这令人费解。我可以理解像 stackoverflow.com 这样的网站会保护自己免受潜在的机器人攻击，但是为什么 cpan 会阻止它自己的包管理器是没有意义的。

我正在使用防火墙，并且允许 Perl 建立连接。我的系统是相当旧的 Windows XP 安装（约 5 年）。在使用 Ubuntu 运行双启动时，我从未遇到过这个问题，这是另一个与代理无关的线索。

我很好，真的很难过。如果有人可以帮助我调试这个，我将非常感激。

下面的 CPAN shell 错误消息。有趣的是，它说它试图使用 ftp 作为最后的手段，但我刚刚发现我的防火墙不允许使用 ftp 命令，如果使用它，它应该请求我的许可。

```
Fetching with LWP:
http://cpan.strawberryperl.com/authors/01mailrc.txt.gz
LWP failed with code[500] message[read timeout]
Warning: no success downloading 'D:\strawberry\cpan\sources\authors\01mailrc.txt
.gz.tmp1252'. Giving up on it.
Fetching with LWP:
http://www.cpan.org/authors/01mailrc.txt.gz
LWP failed with code[500] message[read timeout]
Warning: no success downloading 'D:\strawberry\cpan\sources\authors\01mailrc.txt
.gz.tmp1252'. Giving up on it.
Warning: no success downloading 'D:\strawberry\cpan\sources\authors\01mailrc.txt
.gz.tmp1252'. Giving up on it.

As a last resort we now switch to the external ftp command 'C:\WINDOWS\system32\
ftp.EXE'
to get 'D:\strawberry\cpan\sources\authors\01mailrc.txt.gz.tmp1252'.

Doing so often leads to problems that are hard to diagnose.

If you're the victim of such problems, please consider unsetting the
ftp config variable with

    o conf ftp ""
    o conf commit

Please check, if the URLs I found in your configuration file
(http://cpan.strawberryperl.com/, http://www.cpan.org/) are valid. The
urllist can be edited. E.g. with 'o conf urllist push ftp://myurl/'

Could not fetch authors/01mailrc.txt.gz 
```

尝试获取非失败 URL (www.google.se) 和失败 (stackoverflow.com) 的防火墙日志：

```
2012-06-27T18:34:04+01:00,info,appl control,C:\WINDOWS\system32\svchost.exe,allow,listen,17,0.0.0.0,56564
2012-06-27T18:34:04+01:00,info,appl control,C:\WINDOWS\system32\svchost.exe,allow,send,17,195.54.122.198,53
2012-06-27T18:34:13+01:00,info,appl control,D:\strawberry\perl\bin\perl.exe,allow,connect out,6,64.34.119.12,80
2012-06-27T18:34:13+01:00,info,appl control,D:\strawberry\perl\bin\perl.exe,allow,connect out,6,64.34.119.12,80
2012-06-27T18:34:21+01:00,info,appl control,C:\Program\Mozilla Firefox\firefox.exe,allow,connect out,6,74.86.70.106,80
2012-06-27T18:34:28+01:00,info,appl control,C:\Program\Mozilla Firefox\firefox.exe,allow,connect out,6,64.34.119.12,80
2012-06-27T18:34:30+01:00,info,appl control,C:\WINDOWS\system32\svchost.exe,allow,listen,17,0.0.0.0,56664
2012-06-27T18:34:30+01:00,info,appl control,C:\WINDOWS\system32\svchost.exe,allow,send,17,195.54.122.198,53
2012-06-27T18:34:30+01:00,info,appl control,D:\strawberry\perl\bin\perl.exe,allow,connect out,6,74.125.143.94,80
2012-06-27T18:34:30+01:00,info,appl control,D:\strawberry\perl\bin\perl.exe,allow,connect out,6,74.125.143.94,80
2012-06-27T18:35:14+01:00,info,appl control,C:\Program\Mozilla Firefox\firefox.exe,allow,connect out,6,64.34.119.12,80
2012-06-27T18:35:21+01:00,info,appl control,C:\Program\Mozilla Firefox\firefox.exe,allow,connect out,6,74.86.70.106,80
2012-06-27T18:36:21+01:00,info,appl control,C:\Program\Mozilla Firefox\firefox.exe,allow,connect out,6,74.86.70.106,80
2012-06-27T18:37:04+01:00,info,appl control,C:\WINDOWS\system32\svchost.exe,allow,listen,17,0.0.0.0,61215
2012-06-27T18:37:04+01:00,info,appl control,C:\WINDOWS\system32\svchost.exe,allow,send,17,195.54.122.198,53
2012-06-27T18:37:07+01:00,info,appl control,D:\strawberry\perl\bin\perl.exe,allow,connect out,6,64.34.119.12,80
2012-06-27T18:37:07+01:00,info,appl control,D:\strawberry\perl\bin\perl.exe,allow,connect out,6,64.34.119.12,80 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:49:27.077

这可能不是您问题的完整解决方案。但无论如何，这里是：

从您的“详细”问题描述看来，这是您的台式机/笔记本电脑的问题。尽管您的防火墙允许连接到您提到的网站，但 Windows 内部防火墙可能不允许“FTP”。

通常，端口 20（FTP 命令端口）和 21（FTP 数据端口）应该已添加到防火墙例外（在 Windows -*开始*→*设置*→*控制面板*→ 单击*安全中心*→*防火墙*→*例外（选项卡）* →*添加端口*。您可以尝试将端口 20 和 21 添加到异常中。

但是，如果您连接到路由器，则可能必须端口转发端口 20 和 21。但是，这些端口默认转发，或者如果您在公司 VPN 中，那么情况就完全不同了。企业 VPN 大多明确限制端口 21，但允许端口 22（这是端口 21 的安全版本，用于 SFTP）。在这种情况下，您可能需要使用*ftp_proxy*。

或者（如果您不想将端口 20 和 21 添加到异常中），您可以转到`cpan`提示符并使用`ftp_proxy`by：

```
cpan> o conf ftp_proxy http://your.ftpproxy.com 
```

然后发出`install <module>`命令。或者，您可以更新`../CPAN/config.pm`文件以对`ftp_proxy`参数进行永久更改。

好吧，这些可能是您可能已经尝试过的传统解决方案。下一步是尝试将`FTP_PASSIVE`模式设置为`1`. 默认情况下，此`libnetcfg`配置设置为`0`. 要更改这一点，请找到该`libnetcfg.bat`文件（它应该在某处`C:\Perl\bin`）。在编辑器中打开文件并替换

```
ftp_int_passive      0 
```

和

```
ftp_int_passive      1 
```

`CPAN`这是调用一次运行以设置环境变量的 Windows 批处理文件。在类 UNIX/Linux 架构下，它被发现为`libnet.cfg`和 environment variable `FTP_PASSIVE`，如

```
$set | grep FTP_PASSIVE
FTP_PASSIVE=0 
```

所以就设置好了`EXPORT FTP_PASSIVE=1`。

这些可能是许多调试方法中的一些。老实说，没有必要摆弄库代码，因为它们在所有其他机器上都可以正常工作，通常 95% 的`01mailrc.txt.gz.tmp1252`下载问题是由于网络/操作系统/防火墙问题，但如果你想扩展你对 LWP 的 Perl 知识，你可以。事实上，你也应该关注`CPAN::FTP::netrc`. 祝你好运...

# java - Android adapter.add() 使我的应用程序崩溃

> ID：11194890
> 
> 赞同：0
> 
> 时间：2012-06-25T18:13:33.080
> 
> 标签：java, android, android-arrayadapter, android-spinner

在 android 应用程序中，我正在用来自 EditText 对象的一些数据填充我的微调器。当我尝试使用 adapter.add(somestring) 方法添加它时，它会崩溃，所以我需要帮助。...这是代码

```
public class OptionsMenu extends Activity implements View.OnClickListener{

    Spinner users;
    EditText input;
    Button add,remove;

    public static String filename = "savedData";
    SharedPreferences sharedData;
    String stringUsers;

   ArrayAdapter<CharSequence> adapter;

   public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.options_menu);

        Create();
        sharedData = getSharedPreferences(filename, 0);    
   }

private void Create() {
    // TODO Auto-generated method stub
    users = (Spinner) findViewById(R.id.sp_op_users);
    input = (EditText) findViewById(R.id.tb_op_inputUsers);
    add = (Button) findViewById(R.id.bt_op_add);
    remove = (Button) findViewById(R.id.bt_op_remove);

    add.setOnClickListener(this);
    remove.setOnClickListener(this);

    //------------ADAPTER-----------------  
    adapter = ArrayAdapter.createFromResource(this, R.array.users,
                        android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(
                android.R.layout.simple_spinner_dropdown_item);

    users.setAdapter(adapter);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId())
    {
        case R.id.bt_op_add:
            if (!input.getText().toString().equals("")) {
                CharSequence inputData = input.getText().toString();
                adapter.add(inputData);

                adapter.notifyDataSetChanged();
                users.setAdapter(adapter);
            }
            input.setText("");
            users.setSelection(Adapter.NO_SELECTION);
            break;
        case R.id.bt_op_remove:
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:15:37.770

不太清楚为什么你会收到错误，但你的`if`情况是错误的。

更改以下行：

```
if (input.getText().toString() != "") 
```

至

```
if (!input.getText().toString().equals("")) 
```

您不`strings`使用`=`符号进行比较。

**编辑**

也许您可以先从资源文件中获取数组并创建它的本地版本：

```
String[] usersList=getResources().getStringArray(R.array.users);

adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, usersList) 
```

并将其`usersList`用作您的数据列表`adapter`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:36:55.997

您使用资源创建了适配器`createFromResource()`并向其提供了资源中的数据。如果你这样做，列表是固定的，你不能在其中添加或删除元素。这就是当您尝试调用时它崩溃的原因`adapter.add()`。

如果您想让微调器包含动态数据，那么您必须使用将所有元素添加到其中，`add()`而不是从资源中创建它。

**编辑：添加代码示例**

在 onCreate() 我们创建并初始化微调器适配器

```
List<String> items = ... // These are your items you get from a resource or read
                         //  from a file or whatever
// Create the adapter, initializing it with the list of items, attach to spinner
adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item);
for (String item : items) {
    adapter.add(item);
}
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
users.setAdapter(adapter); 
```

在 onClick() 中，向微调器添加一个项目：

```
case R.id.bt_op_add:
    if (!input.getText().toString().equals("")) {
        CharSequence inputData = input.getText().toString();
        adapter.add(inputData);
        // You shouldn't need to reset the adapter on the spinner, nor call
        //  notifyDataSetChanged() here
    }
    input.setText("");
    users.setSelection(Adapter.NO_SELECTION);
    break; 
```

# java - Gradle 语法在 1.0 版中被冻结了吗？

> ID：11194891
> 
> 赞同：3
> 
> 时间：2012-06-25T18:13:40.383
> 
> 标签：java, build, gradle

我记得问题，当我的同事使用 0.8 时，我无法使用旧版本 0.7 的 Gradle 执行构建......

那么 Gradle 语法在 1.0 版中被冻结了吗？

[我在发行说明](http://www.gradle.org/docs/current/release-notes)中没有找到这样的声明...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T21:53:11.857

1.x 系列将看到主要的新功能（例如并行构建执行），同时保持与 1.0 的向后兼容性。一旦我们跳到 2.x（我们不打算很快这样做），某些 1.x 版本仍将在较长时间内得到支持（长期支持模型）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:25:59.553

它没有证据。我没有看到有关冻结 api 的任何信息

# ruby-on-rails - Omniauth 用于 Rails API 中的提供者身份验证

> ID：11194893
> 
> 赞同：4
> 
> 时间：2012-06-25T18:13:44.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api, omniauth

我已经让omniauth 完美地为我在网络上的rails 应用程序工作。我还为我们的 iPhone 应用程序创建了一个 API 以进行交互，并且我正在尝试让omniauth 工作。

有没有办法将访问令牌（从与 Facebook.app 的集成 iOS 集成中接收）传递给omniauth 以在数据库中创建提供程序条目？

现在在我的网络应用程序中，我有一个带有以下代码的身份验证控制器

```
 def create
    omniauth = request.env["omniauth.auth"]
    user = User.where("authentications.provider" => omniauth['provider'], "authentications.uid" => omniauth['uid']).first

    if user
      session[:user_id] = user.id
      flash[:notice] = t(:signed_in)
      redirect_to root_path
    elsif current_user
      user = User.find(current_user.id)
      user.apply_omniauth(omniauth)
      user.save
      flash[:notice] = t(:success)
      redirect_to root_path
    else
      session[:omniauth] = omniauth.except('extra')
      flash[:notice] = "user not found, please signup, or login. Authorization will be applied to new account"
      redirect_to register_path
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:17:55.617

在我的 API 用户控制器中，我创建了以下内容：

```
 def create
    @user = User.new(params[:user])
    @user.save

    # Generate data for omni auth if they're a facebook user
    if params[:fb_access_token]
      graph = Koala::Facebook::API.new(params[:fb_access_token])
      profile = graph.get_object('me')

      @user['fb_id'] = profile['id']
      @user['fb_token'] = params[:fb_access_token]
      @user['gender'] = profile['gender']

      # Generate omnihash
      omnihash = Hash.new
      omnihash['provider'] = 'facebook'
      omnihash['uid'] = profile['id']

      omnihash['info'] = Hash.new
      omnihash['info']['nickname'] = profile['username']
      omnihash['info']['name'] = profile['name']
      omnihash['info']['email'] = profile['email']
      omnihash['info']['first_name'] = profile['first_name']
      omnihash['info']['last_name'] = profile['last_name']
      omnihash['info']['verified'] = profile['verified']

      omnihash['info']['urls'] = Hash.new
      omnihash['info']['urls']['Facebook'] = profile['link']

      omnihash['credentials'] = Hash.new
      omnihash['credentials']['token'] = params[:fb_access_token]

      omnihash['extra'] = Hash.new
      omnihash['extra']['raw_info'] = Hash.new

      puts omnihash

      # Save the new data
      @user.apply_omniauth(omnihash)
      @user.save
    end 
```

# java - OnClick 在教程练习中导致错误

> ID：11194895
> 
> 赞同：2
> 
> 时间：2012-06-25T18:13:58.607
> 
> 标签：java, android, button, onclick

我对 Android 写作完全陌生，我设法遇到了一个（对我来说）无法解决的问题。我尝试在网上搜索，但我可以找到任何可以帮助我了解正在发生的事情的东西......

该程序应该将一个字符串放入一个可编辑的文本字段中，然后在按下按钮时简单地显示它。程序在按下按钮时崩溃。这既发生在模拟器上，也发生在实际设备上。

主.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">
    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />
    <Button android:id="@+id/button_send"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send" 
        android:onClick="sendMessage"/>

</LinearLayout> 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sanuuu.tutorial1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Tutorial1Activity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.example.myapp.DisplayMessageActivity" />
    </application>

</manifest> 
```

Tutorial1Activity.java（主要的东西）：

```
package com.sanuuu.tutorial1;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class Tutorial1Activity extends Activity {
/** Called when the activity is first created. */

public final static String EXTRA_MESSAGE = "com.example.myapp.MESSAGE";

@Override    
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

public void sendMessage(View viewo) {
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
}
} 
```

DisplayMessageActivity.java：

```
package com.sanuuu.tutorial1;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class DisplayMessageActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(Tutorial1Activity.EXTRA_MESSAGE);

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

    setContentView(textView);
}
} 
```

来自 LogCat 的日志：

```
06-25 17:42:43.535: I/dalvikvm(708): threadid=3: reacting to signal 3
06-25 17:42:43.684: I/dalvikvm(708): Wrote stack traces to '/data/anr/traces.txt'
06-25 17:42:43.804: D/gralloc_goldfish(708): Emulator without GPU emulation detected.
06-25 17:43:06.204: D/AndroidRuntime(708): Shutting down VM
06-25 17:43:06.214: W/dalvikvm(708): threadid=1: thread exiting with uncaught exception     (group=0x409c01f8)
06-25 17:43:06.274: E/AndroidRuntime(708): FATAL EXCEPTION: main
06-25 17:43:06.274: E/AndroidRuntime(708): java.lang.IllegalStateException: Could not   execute method of the activity
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.view.View$1.onClick(View.java:3044)
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.view.View.performClick(View.java:3511)
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.view.View$PerformClick.run(View.java:14105)
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.os.Handler.handleCallback(Handler.java:605)
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.os.Looper.loop(Looper.java:137)
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-25 17:43:06.274: E/AndroidRuntime(708):  at java.lang.reflect.Method.invokeNative(Native Method)
06-25 17:43:06.274: E/AndroidRuntime(708):  at java.lang.reflect.Method.invoke(Method.java:511)
06-25 17:43:06.274: E/AndroidRuntime(708):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-25 17:43:06.274: E/AndroidRuntime(708):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-25 17:43:06.274: E/AndroidRuntime(708):  at dalvik.system.NativeStart.main(Native Method)
06-25 17:43:06.274: E/AndroidRuntime(708): Caused by: java.lang.reflect.InvocationTargetException
06-25 17:43:06.274: E/AndroidRuntime(708):  at java.lang.reflect.Method.invokeNative(Native Method)
06-25 17:43:06.274: E/AndroidRuntime(708):  at java.lang.reflect.Method.invoke(Method.java:511)
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.view.View$1.onClick(View.java:3039)
06-25 17:43:06.274: E/AndroidRuntime(708):  ... 11 more
06-25 17:43:06.274: E/AndroidRuntime(708): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.sanuuu.tutorial1/com.sanuuu.tutorial1.DisplayMessageActivity}; have you declared this activity in your AndroidManifest.xml?
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508)
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.app.Activity.startActivityForResult(Activity.java:3190)
06-25 17:43:06.274: E/AndroidRuntime(708):  at android.app.Activity.startActivity(Activity.java:3297)
06-25 17:43:06.274: E/AndroidRuntime(708):  at com.sanuuu.tutorial1.Tutorial1Activity.sendMessage(Tutorial1Activity.java:26)
06-25 17:43:06.274: E/AndroidRuntime(708):  ... 14 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:16:05.437

在**Manifest.xml**中注册`DisplayMessageActivity` 为

```
<activity android:name=".DisplayMessageActivity" /> 
```

或者

```
<activity android:name="com.sanuuu.tutorial1.DisplayMessageActivity" /> 
```

代替

```
<activity android:name="com.example.myapp.DisplayMessageActivity" /> 
```

因为你的包是**com.sanuuu.tutorial1**而不是**com.example.myapp**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:17:13.897

代替

```
<activity android:name="com.example.myapp.DisplayMessageActivity" /> 
```

利用

```
<activity android:name=".DisplayMessageActivity" /> 
```

# javascript - HBO 使用哪个视差库？

> ID：11194900
> 
> 赞同：0
> 
> 时间：2012-06-25T18:14:26.033
> 
> 标签：javascript, jquery, parallax

[http://www.hbogo.com/product-tour/](http://www.hbogo.com/product-tour/)

我从他们的（缩小的）代码中看到它使用了一个 jQuery 插件，该插件使用 jQuery.fn.parallaxing 对其进行了扩展，但我无法找到任何使用 .parallaxing 的 github 项目。

有谁知道他们用的是什么插件？或者它是专有的？它非常流畅，我所有尝试复制附加到滚动条的类似内容的尝试都让浏览器陷入了爬行，所以我试图弄清楚它们的不同之处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:16:16.353

看来他们是内部开发的，不是公共插件。

# c# - 是否有“非派生自”的通用类型约束？

> ID：11194903
> 
> 赞同：17
> 
> 时间：2012-06-25T18:14:35.377
> 
> 标签：c#, generics

我们可以在泛型类型参数上指定一个*“派生自”约束，如下所示：*

```
class Bar<T> where T : IFooGenerator 
```

有没有办法指定*NOT*派生自？

* * *

我的用例：我有一堆可并行化的`FooGenerator`s，每个都有相同的并行化代码，但我们不希望它们*总是*并行化。

```
public class FooGenerator : IFooGenerator
{
    public Foo GenerateFoo() { ... }
} 
```

因此，我创建了一个通用容器类来并行生成 Foo：

```
public class ParallelFooGenerator<T> : IFooGenerator where T : IFooGenerator
{
    public Foo GenerateFoo()
    {
        //Call T.GenerateFoo() a bunch in parallel
    }
} 
```

因为我想要`FooGenerator`并且`ParallelFooGenerator<FooGenerator>`可以互换，所以我制作`ParallelFooGenerator : IFooGenerator`. 但是，我显然不想`ParallelFooGenerator<ParallelFooGenerator>`合法。

那么，作为一个辅助问题，如果“非源自”约束是不可能的，是否有更好的设计方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T18:25:32.793

您可以使用以下内容：

```
public interface IFooGenerator
{
    Foo GenerateFoo();
}

interface ISerialFooGenerator : IFooGenerator { }

interface IParallelFooGenerator : IFooGenerator { }

public class FooGenerator : ISerialFooGenerator
{
    public Foo GenerateFoo()
    {
        //TODO
        return null;
    }
}

public class ParallelFooGenerator<T> : IParallelFooGenerator
    where T : ISerialFooGenerator, new()
{
    public Foo GenerateFoo()
    {
        //TODO
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T18:20:58.360

`ParallelFooGenerator<ParallelFooGenerator>`已经不可能了，因为`ParallelFooGenerator`是泛型类型并且您没有指定泛型参数。

例如，`ParallelFooGenerator<ParallelFooGenerator<SomeFooGenerator>>`有可能——允许这种类型真的那么糟糕吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T18:24:39.867

简单回答是不。

长答案（仍然没有）：

微软在他们[对类型约束的解释中](http://msdn.microsoft.com/en-us/library/d5x73970(v=vs.80).aspx)说得很好：“编译器必须保证它需要调用的运算符或方法将受到客户端代码可能指定的任何类型参数的支持。”

约束的根本目的不是禁止使用某些类型，而是让编译器知道支持哪些运算符或方法。但是，您可以[检查一个类型是否在运行时实现/继承了特定的接口/基类](https://stackoverflow.com/questions/457676/check-if-a-class-is-derived-from-a-generic-class)并抛出异常。但是，这样一来，您将无法从智能感知中获得设计时错误。

我希望这有帮助。

# runtime - JPA2 运行时数据库连接

> ID：11194904
> 
> 赞同：0
> 
> 时间：2012-06-25T18:14:40.133
> 
> 标签：runtime, jpa-2.0, jta

我在当前的 Web 项目中使用 JP2。我的主数据库包含主要实体。为了连接这个数据库，我定义了一个带有 JTA 数据源的持久性单元：

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="MyPU" transaction-type="JTA">

    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>

    <jta-data-source>MyDB</jta-data-source>

    <exclude-unlisted-classes>false</exclude-unlisted-classes>

    <properties>
        <property name="eclipselink.logging.level" value="FINE"/>
        <property name="eclipselink.logging.parameters" value="true"/>
        <property name="eclipselink.logging.logger" value="ServerLogger"/>
        <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
    </properties>
</persistence-unit>
</persistence> 
```

以及 sun-resources.xml 中定义的 JTA 数据源：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN" "http://glassfish.org/dtds/glassfish-resources_1_5.dtd">
<resources>
    <jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="org.postgresql.ds.PGSimpleDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="post-gre-sql_mydb_mypool" non-transactional-connections="false" pool-resize-quantity="2" res-type="javax.sql.DataSource" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false">
        <property name="serverName" value="localhost"/>
        <property name="portNumber" value="5432"/>
        <property name="databaseName" value="mydb"/>
        <property name="User" value="myuser"/>
        <property name="Password" value="mypass"/>
        <property name="URL" value="jdbc:postgresql://localhost:5432/mydb"/>
        <property name="driverClass" value="org.postgresql.Driver"/>
        <property name="characterEncoding" value="UTF-8" />
    </jdbc-connection-pool>
    <jdbc-resource enabled="true" jndi-name="MyDB" object-type="user" pool-name="post-gre-sql_mydb_mypoll"/>
</resources> 
```

这就是我在 DAO 类上访问数据库的方式（女巫是 @ManagedBeans 和 @SessionScoped）：

```
@ManagedBean(name = "pageDao")
@SessionScoped
public class PageDao implements Serializable {

    @Resource
    private UserTransaction utx = null;

    @PersistenceUnit(unitName = "MyPU")
    private EntityManagerFactory emf = null;

    public EntityManager getEntityManager() {
        return emf.createEntityManager();
    }

    public List<PageEnt> getAll() { ... }

    public PageEnt getOne(long pageId) { ... }

    public void addPage(PageEnt newPage) throws RollbackFailureException, PreexistingEntityException, Exception { ... }

    public PageEnt update(PageEnt page) throws RollbackFailureException, NonexistentEntityException, Exception { ... }

    public void remove(PageEnt page) throws RollbackFailureException, Exception { ... }
} 
```

其中一个实体（客户）具有用于连接单独（每个客户）数据库的属性，这些属性是在运行时定义的。这些属性包括：

*   数据库名称
*   主机和端口
*   用户和密码

我的问题是：

*   如何在运行时有效地创建数据库连接？
*   如果没有定义每个客户的 PersistanceUnit 和数据源（在部署时定义女巫），如何从容器管理的资源创建新的 EntityManager？
*   如果我必须手动处理 EntityManagerFactory（正如我在大学里学到的，女巫是一个沉重而庞大的对象），我该如何有效地做到这一点？有没有好的做法或模式？
*   DAO 模式将如何工作？我的 DAO 类如何获得 EntityManager？

巴西非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:09:19.540

可以在运行时在多个数据源之间切换。它由 Spring [AbstractRoutingDataSource](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/datasource/lookup/AbstractRoutingDataSource.html)提供。需要重写 #determineCurrentLookupKey() 方法，该方法将返回一个键来决定需要连接的特定数据源。还应该有 spring 配置来映射每个可能的键和要连接的相应数据源。就像是
`<jee:jndi-lookup id="DataSource_Client1" jndi-name="DataSource_Client1" /> <jee:jndi-lookup id="DataSource_Client2" jndi-name="DataSource_Client" />
<bean id="DynamicDataSource" class="concrete implementation class name of AbstractRoutingDataSource">
<property name="targetDataSources">
<map key-type="java.lang.String">
<entry key="Client1" value-ref="DataSource_Client1" />
<entry key="Client2" value-ref="DataSource_Client2" />
</map>
</property>
</bean>`

对此[动态数据源的可能引用](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)

希望这能回答你的一个问题

# java - 为 Jar/Programs 更新库

> ID：11194905
> 
> 赞同：5
> 
> 时间：2012-06-25T18:14:40.277
> 
> 标签：java, auto-update

我正在为我正在开发的软件寻找更新库。这是一个小软件，但我想为它注入一些不错的功能。其中之一是自动更新。我开发了 2 个类库来为我完成这项工作，但我想要一个更强大的库，因为它缺少一些功能。在库可能具有的功能之间，这些可能包含在其中：

*   根据旧版本生成差异文件（例如jar）。给定 jar 的当前版本和新的 jar 文件，生成一个将由客户端下载的新 jar，仅放置自上次更新以来更改的文件。
*   检查某种校验和。JAR 中的每个文件都有自己的校验和，或者整个 jar 都有一个校验和。
*   生成那些校验和。如果可能的话，同时注意第一个项目。给定新文件，逐个文件或逐个罐子。
*   如果输入是文件夹或罐子，如果它也可以处理，那就太好了。
*   将当前 jar 与下载的 jar 合并。

PS：我不是在编写基于 Web（在浏览器中运行）的应用程序。

感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:24:57.303

在这个答案中找到了满足我需求的完美解决方案：[java web start alternative](https://stackoverflow.com/questions/3254328/java-web-start-alternative)

请看一下这个软件[https://code.google.com/p/getdown/](https://code.google.com/p/getdown/)它声称它可以是 GCJ 并用于更新非 Java 应用程序。但这确实满足了我的期望！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:28:49.110

有很多可能的方法来做到这一点。事实上，你已经指出了你需要的东西。虽然开发这样的解决方案没什么大不了的，但也有许多库和产品已经这样做了。

一些示例已经在类似的问题中说明，例如：

[Java Swing 桌面应用程序中的自动更新功能](https://stackoverflow.com/questions/1389047/autoupdate-feature-in-a-java-swing-desktop-app)

或者

[自动更新软件的设计](https://stackoverflow.com/questions/10109340/design-of-auto-updating-software?rq=1)

一个例子，一个简单的谷歌网络搜索是[Autoupdate+](http://java.com.autoupdate.fyxm.net/) 要记住的一件事是安装/更新软件不一定需要用 Java 本身编写......

# php - 遍历数组以获取值

> ID：11194910
> 
> 赞同：1
> 
> 时间：2012-06-25T18:14:57.170
> 
> 标签：php, arrays

> **可能重复：**
> [php 循环遍历关联数组](https://stackoverflow.com/questions/11189879/php-loop-through-associative-arrays)

我有一个打印数组名称 $friends 的变量，它的输出是这样的：

```
{
  "data": [
    {
      "name": "Penelope-ns-test",
      "category": "Community",
      "id": "187099821418102",
      "created_time": "2012-06-14T15:00:59+0000"
    },
    {
      "name": "Fabric",
      "category": "Computers/technology",
      "id": "194407767268061",
      "created_time": "2012-06-07T07:24:03+0000"
    }, 
```

ETC...

我需要做一个循环才能得到这样的东西：if friends[id] == 1203438484 {

}

别的...

```
foreach($friends['data'] as $data){
                $fbid = $data['id'];
                $fbfriendlikes[$fbid]=$facebook->api('/'.$fbid.'/likes'); 
                $fbname = $data['name'];
                $path = $protocol . '://graph.facebook.com/' . $fbid . '/picture?type=' . $size;
                $image = theme('image', array('path' => $path, 'alt' => $fbname));
                $return .= '<div class="fimage">'.$image.'</div>';
                $link = '<a href="'.$protocol . '://www.facebook.com/profile.php?id='.$fbid.'" target="_blank">'.$fbname.'</a>';
                foreach ($fbfriendlikes["data"] as $fbfriendlikes) {
    if ($fbfriendlikes["id"] == 184759054887922) {

                $return .= '<div class="flink">'.$link.'</div>';
                break;
                }
                }
            } 
```

你能帮我写代码吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:16:45.240

```
foreach ($friends["data"] as $friend) {
    if ($friend["id"] == 12345) {
        // Do something with $friend

        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:17:34.967

```
foreach($array['data'] as $friend)
{
    if ($friend['id'] == 1203438484)
    {
        //do something
    }

} 
```

# ios - Localizable.strings 在 iOS 中不起作用

> ID：11194911
> 
> 赞同：38
> 
> 时间：2012-06-25T18:14:57.827
> 
> 标签：ios, localization

我有这个非常令人费解的问题。

我在 XCode 中创建了一个 Localizable.strings 文件，然后在其中创建了 2 种语言。

我用语言翻译填充了这些文件，进行了构建/清理，然后重新构建，但是本地化字符串无法显示在我的项目中。如果我尝试类似：

```
self.title = NSLocalizedString(@"HEAD", nil); 
```

只有“HEAD”而不是翻译出现在设备模拟器中。

这是我的项目层次结构：

![项目层次结构](../Images/5f13825d405c24426d4733eeede1367f.png)

这是英文本地化文件的内容： ![在此处输入图像描述](../Images/9b6fe3ec74df698b19ffa193641693c2.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-25T18:58:29.380

我自己找到了答案。

除了再次清理和构建项目以及我上面描述的所有内容。**您还必须在 iPhone 模拟器中删除该应用程序，然后重新构建它！**之后它完美地工作。

谈论让它变得简单苹果......

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-01-26T19:58:13.377

请确保：

1.  该文件称为：“Localizable.strings”。
2.  “Localizable.strings”属于您正在处理的目标。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-09-03T10:23:48.667

几项检查：

1.  确保文件名准确`Localizable.strings`且包含在目标中
2.  每个字符串都以`;`
3.  每个字符串都用双引号引起来`"`
4.  注释以`//`(NOT `#`)开头

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-10-16T11:33:47.127

确保在 Build Phases、Copy Bundle Resources 下有 Localizable.strings。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-14T11:59:14.740

如果第一个字母是大写 Localizable.strings，请检查文件名

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-01-22T15:36:16.750

@jbssm 的解决方案有效，但更好的方法（确保资源将保持更新而无需每次清理和删除）将添加一个自定义脚本构建阶段，该阶段更改 Localizable.bundle 的访问时间。

如[https://stackoverflow.com/a/19274844/414037中所述](https://stackoverflow.com/a/19274844/414037)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-29T08:09:15.793

我自己找到了 1 个答案。

确保所有值都以 ; 结尾。否则，它不起作用..

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-28T16:07:19.533

除了此线程中其他地方提到的所有提示外，`Localizable.strings`在某些情况下还必须位于项目根文件夹中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-30T15:37:13.527

就我而言，我的 Localizable.strings 文件格式不正确，因为有一些剩余的文本。编译器没有抱怨，但是文件非法部分之后的所有字符串都被忽略了。我的文件看起来像这样：

“键1” = “字符串1”；

*   一个字符串

*   一个字符串

*   一个字符串

一个字符串";

“键2”=“字符串2”；

因此，请务必手动检查任何未正确处理的 Localizable.strings。您不能相信编译器会捕获所有格式错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-16T12:47:42.187

我在本地化上的两分钱。我已经对本地化文件进行了调整，添加和删除了它们，并且该项目经历了许多 Xcode 更新。后来发现除了英文没有本地化工作。

问题是我必须进行`base`本地化，当我这样做时，我必须在右侧打勾，左侧添加了一个文件，并且应用程序中出现了其他翻译。那里肯定有弦...

[![在此处输入图像描述](../Images/89e8c6b5478a2306746793b4a24082c8.png)](https://i.stack.imgur.com/mpvfM.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-03T07:34:22.953

1.  替换 Localizable.strings 的位置
2.  使用记事本中的 Localizable.strings 剪切和过去进行交叉验证，以便我们可以轻松识别隐藏的字符和崇高的文本。请按照以下步骤解决它。
3.  确保文件名完全是 Localizable.strings 并包含在目标中
4.  每个字符串都以 ; 结尾
5.  每个字符串都用 " 双引号引起来
6.  注释以 //（不是 #）开头

还要删除 iPhone 模拟器中的应用程序，然后重新构建它！之后它完美地工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-19T09:50:41.990

我还必须设置给定 .strings 文件的编码。

为此，请在项目导航器中选择文件，然后在右侧面板上的“文本设置”部分中选择编码。我使用了 Unicode（UTF-8）。

[![在此处输入图像描述](../Images/8928b93afefc07ee0b43819c4750a9ba.png)](https://i.stack.imgur.com/2R1dS.png)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-10-22T09:11:45.340

我想就另一个可能与 UIButton 相关的问题发出警告，该问题看起来像是本地化不起作用。

为了在 UIButton 上设置文本，请使用：

```
setTitle(_ title: String?, for state: UIControl.State) 
```

代替：

```
button.titleLabel?.text 
```

# lotus-notes - Lotus Notes 中的 @unique 返回唯一值有哪些不同的参数。？

> ID：11194917
> 
> 赞同：1
> 
> 时间：2012-06-25T18:15:12.130
> 
> 标签：lotus-notes, formula, lotus-domino, lotus, lotus-formula

Lotus Notes 中的 @unique 返回唯一值有哪些不同的参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:37:55.577

只需`@Unique`不带参数使用，它将构造一个唯一值。

[请参阅文档](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_UNIQUE.html?resultof=%22@unique%22%20%22uniqu%22%20)

如果具有相似名称的不同用户在同一秒内调用此公式，则可能会返回重复值。 [如果这对您很重要，该站点](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/sequential-numbering.htm)将讨论该问题的解决方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T18:53:11.740

当文档说 @Unique() 返回“随机的、唯一的文本值”时，文档是不正确的。它不是随机的，实际上该值没有随机分量。它不保证是唯一的。

@Unique 的返回值基于用户名和日期/时间。前四个字符是：名字的第一个字母 + 姓氏的第一个字母 + 姓氏的第二个字母 + 姓氏的最后一个字母。最后六个字符是分辨率为 1 秒的日期/时间戳。我不知道它的编码是如何工作的。该值将始终随时间增加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T23:03:58.530

除了其他答案：

在同一台机器上多次调用 @unique 总是会返回一个唯一的答案，即使重复调用的速度比时间分辨率所允许的要快。计数器将始终移动。

# mysql - MySQL中不同日期的两次差异

> ID：11194923
> 
> 赞同：0
> 
> 时间：2012-06-25T18:15:28.353
> 
> 标签：mysql, time

我们有一个如下所示的查询：

```
SELECT
    hd.definition_id,
    hd.sun_end < hd.sun_start AS sunEndFirst,
    (IF (
        hd.sun_end IS NULL,
        0,
        IF(
            hd.sun_start IS NULL,
            0,
            IF(hd.sun_end = hd.sun_start, 24, time_to_sec(timediff(hd.sun_end, hd.sun_start)) / 60)
        )
    ))
FROM audit_hour_definition AS hd
WHERE hd.definition_id = 5
ORDER BY hd.definition_id 
```

当两个时间相等时（例如 09:00:00-09:00:00），查询有效。当开始时间和结束时间在同一天（例如 02:00:00-16:00:00）时，查询有效。当开始时间和结束时间跨越午夜标记时，查询就会中断。例如，当我们想要 12 时，18:00:00-06:00:00 返回 -720。

有没有人有任何很好的方法来处理这个问题？

编辑：所有时间列都使用 MySQL 的 TIME 数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:16:57.770

强烈建议避免仅`TIME`在记录某些事件时使用。正是针对这种情况。这将是您的情况的最佳解决方案，因为只需更改类型即可消除所有转换。

如果由于某些原因这是不可能的，那么您需要以某种方式构建时间戳，即您需要一个日期部分。如果它不存在，那么你怎么能确定`18:00:00-06:00:00`产生 12 小时而不是 36 小时？

不过，您可以使用以下构造：

```
SELECT
    hd.definition_id,
    hd.sun_end < hd.sun_start AS sunEndFirst,
    IF(hd.sun_end IS NULL OR hd.sun_start IS NULL,
       0,
       IF(hd.sun_end = hd.sun_start, 24,
         time_to_sec(timediff(
           IF(hd.sun_end > hd.sun_start, hd.sun_end,
                hd.sun_end + cast('24:00:00' as time)),
           hd.sun_start)) / 60
        )
    )
  FROM audit_hour_definition AS hd
 WHERE hd.definition_id = 5
 ORDER BY hd.definition_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:21:53.300

啊，知道它在那里。subtime 可能会做你想做的事？

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_subtime](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_subtime)

编辑添加：你需要一个更多的部门。您的秒数返回秒数，一次除以 60 为您的分钟数。再除以 60 得到小时数。

也许这可能有效？：

```
SELECT
    hd.definition_id,
    hd.sun_end < hd.sun_start AS sunEndFirst,
    (IF (
    hd.sun_end IS NULL,
    0,
    IF(
        hd.sun_start IS NULL,
        0,
        IF(hd.sun_end = hd.sun_start, 24, 
              IF (hd.sun_end > hd.sun_start, time_to_sec(timediff(hd.sun_end, hd.sun_start)) / 3600), time_to_sec(timediff(hd.sun_start, hd.sun_end))/3600))
    )
))
FROM audit_hour_definition AS hd
WHERE hd.definition_id = 5
ORDER BY hd.definition_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:28:00.580

通过@vyegorov 的一些见解，我得出了以下查询。

```
SELECT hd.definition_id, IF(
        hd.sun_end IS NULL OR hd.sun_start IS NULL,
        0,
        IF(
            hd.sun_end = hd.sun_start,
            24,
            IF(
                hd.sun_end < hd.sun_start,
                24 + (time_to_sec(timediff(
                    hd.sun_end,
                    hd.sun_start
                )) / 3600),
                time_to_sec(timediff(
                    hd.sun_end,
                    hd.sun_start
                )) / 3600
            )
        ))
FROM audit_hour_definition AS hd 
```

此查询将返回给定工作日的正确小时数。

# authentication - SSH 和 FTP 通过 PuTTy 和 Filezilla 工作，但不是 Zend studio

> ID：11194926
> 
> 赞同：1
> 
> 时间：2012-06-25T18:15:35.813
> 
> 标签：authentication, ssh, subdomain

我有 SSH 密钥和登录名。我可以使用这些凭据通过 PuTTy 登录，并为 Filezilla 使用另一个用户名和密码，它可以正常工作。我正在尝试使用这些凭据通过 Zend Studio 登录到子域。错误是

```
RSEG1066

Failed to connect sshd on "xx.xx.xx.xx:22"

Auth Fail 
```

我在 Windows->Preferences->Network Connections->SSH2 Private Keys 中添加了 SSH 密钥。我添加了 pem 和 ppk。其他 ssh 连接适用于不同的服务器，但没有一个可以通过 zend studio 连接到该服务器（也测试过 eclipse）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:37:48.623

您必须添加公钥、私钥和 pem。

# python - 从 HDF5 文件中删除信息

> ID：11194927
> 
> 赞同：17
> 
> 时间：2012-06-25T18:15:36.770
> 
> 标签：python, hdf5

我意识到一个 SO 用户以前曾问过这个[问题](https://stackoverflow.com/questions/1124994/removing-data-from-a-hdf5-file?rq=1)，但它是在 2009 年被问到的，我希望有更多关于 HDF5 的知识或更新的版本已经解决了这个特定问题。在这里重申关于我自己的问题的问题；

我有一个来自大型几何图形的节点和元素的巨大文件，并且已经从中检索到我需要的所有有用信息。因此，在 Python 中，我试图保留原始文件，但删除我不需要的信息并为其他来源填写更多信息。例如，我有一个不需要的节点数据集。但是，我需要保留相邻的数据集并从外部文件中包含有关其索引的信息。有没有办法删除这些特定的数据集？

还是在 HDF5 文件中使用“占位符”的旧想法仍然适用，以至于没有人知道如何/打扰删除信息？我不太担心空白空间，只要简单地删除和添加信息然后创建一个全新的文件会更快。

注意：我使用 H5py 的 'r+' 来读写。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T19:41:59.923

从 hdf5 文件中删除整个节点（组或数据集）应该没有问题。
但是，如果要回收空间，则必须运行该`h5repack`工具。

来自[hdf5 文档](http://www.hdfgroup.org/HDF5/doc/UG/UG_frame10Datasets.html)：

> 5.5.2\. 从文件中删除数据集并回收空间
> 
> HDF5 目前不提供从文件中删除数据集或回收已删除对象占用的存储空间的简单机制。
> 
> 可以使用 H5Ldelete 函数和 h5repack 实用程序来删除数据集并回收它使用的空间。使用 H5Ldelete 函数，可以从文件结构中删除指向数据集的链接。删除所有链接后，任何应用程序都无法访问该数据集，并有效地从文件中删除。恢复未链接数据集占用空间的方法是将文件的所有对象写入新文件。应用程序无法访问任何未链接的对象，并且不会包含在新文件中。可以使用自定义程序或使用 h5repack 实用程序将对象写入新文件。

或者，您也可以查看 PyTables 的[ptrepack](http://pytables.github.com/usersguide/utilities.html)工具。PyTables 应该能够读取 h5py hdf5 文件并且该`ptrepack`工具类似于`h5repack`.

如果要从数据集中删除记录，则可能必须检索要保留的记录并创建新数据集并删除旧数据集。
PyTables 支持[删除](http://pytables.github.com/usersguide/libref.html#table-methods-writing)行，但不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-27T11:54:04.960

如果您知道特定数据集将在分析过程结束时被删除，为什么还要将其保留在主文件中？我会将临时数据存储在单独的 HDF5 文件中，分析完成后可以将其丢弃。如果在主文件中链接临时数据集很重要，只需使用 H5Lcreate_external() 在主文件和临时文件之间创建一个外部链接。外部链接占用的空间很小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-28T05:29:19.630

在 HDF5 1.10 及以上版本中，有一种[文件空间管理](https://support.hdfgroup.org/HDF5/docNewFeatures/FileSpace/1FileSpaceManagement.pdf)机制。可以通过在[H5F.create](https://support.hdfgroup.org/HDF5/doc1.8/RM/RM_H5F.html#File-Create)中指定 fcpl(File Creation Property List) 来实现。

您会注意到的一个重要变化是第一次导入后的文件在第一次导入时会稍大一些（以 Kb 为单位）。但在那之后，您的文件大小最终会变小（在回收过程之后）。

您可以使用[h5stat](https://portal.hdfgroup.org/display/HDF5/h5stat)工具监控 HDF5 文件中的可用空间

```
h5stat -S filename 
```

# c# - 对 Windows 窗体应用程序的类似 Visual Studio 2010 的多监视器支持？

> ID：11194933
> 
> 赞同：0
> 
> 时间：2012-06-25T18:15:52.753
> 
> 标签：c#, .net, windows, visual-studio-2010, multiple-monitors

我有以下项目。

主窗体中有控件。此控件显示某些内容（例如扫描的图像）。我有两个显示器。所以我需要能够将该控件从主窗口拖到第二个监视器，这样我就有主窗口和控件同时显示可见的东西。

我知道在 Visual Studio 2010 中确实存在这样的功能，您可以在其中将代码文件和其他窗口从主 IDE 窗口移动到第二个监视器。

我想为我用 C#、Visual Studio 2010 编写的 Windows 应用程序实现相同的功能。

如果您可以推荐一个库、示例代码或第三方组件来实现这一点，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:25:22.410

可以在 Avalon Dock 中找到类似于 Visual Studio 的 Tear off tab 功能：http: [//avalondock.codeplex.com/](http://avalondock.codeplex.com/)

我没有使用新的 2.0 版本的经验，但旧版本相当稳定并且支持 winforms。

# java - WAN 上的 Android P2P 连接

> ID：11194936
> 
> 赞同：2
> 
> 时间：2012-06-25T18:16:07.107
> 
> 标签：java, android, networking, network-programming, p2p

我使用以下方法成功连接了 2 个 android Mobiles p2p：

```
 //On server 
        public static String SERVERIP = "192.68.100.104";
        public static final int SERVERPORT = 8080;
        .
        .
        .
        //on Client
        Socket socket = new Socket(serverIP,SERVERPORT); 
```

现在我需要在 WAN 上连接设备，以便任何知道服务器 WAN 地址的客户端都可以访问服务器。[我现在通过此链接](http://checkip.org/)
获取我的 IP，如何使用此 IP 以便可以从世界任何地方访问我的服务器。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:37:24.947

如果您的服务器在 WAN 上，它（可能）没有公共 IP 地址，因此 WAN 上的设备可以访问它，但世界其他任何地方的设备都不能。

解决此问题的最简单方法是将服务器安装在某处（例如 AWS 或任何托管服务），然后客户端可以访问该地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:40:27.117

您可能设置在一个路由器后面，该路由器对世界其他地方隐藏了您的本地 IP 地址（查找[NAT](http://en.wikipedia.org/wiki/Network_address_translation)以获取更多信息）。基本上，全世界只看到您的 YOUR_ROUTER_IP（您从发布的链接中获得的那个），您的路由器负责将所有 IP 数据包从外界传送给您，反之亦然。您需要更改路由器设置，以便您的本地设备获得路由器 IP 地址。通过这种方式，您可以使用简单的套接字操作从世界任何地方访问您的服务器应用程序。我希望这有帮助。

# objective-c - 通过 iPhone 麦克风插孔收听但通过扬声器播放？

> ID：11194937
> 
> 赞同：1
> 
> 时间：2012-06-25T18:16:12.553
> 
> 标签：objective-c, ios, audio, core-audio

我希望我的 iOS 应用程序通过耳机麦克风收听，但通过 iPhone 上的扬声器播放音频。这可能吗？想象一个扬声器类型的应用程序......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:57:53.057

我设法以非常复杂的方式实现了这一点。但这需要您拥有最新的 SDK，我的意思是真正的“最新 SDK”；）

因此，如果您是 ios 开发人员计划的一部分，请自行查看。您需要知道的只是自定义您的硬件音频路由。但它不适用于所有可能的场景，仅适用于某些硬件组合。无论如何去看看那里甚至有一个 WWDC 2012 讲座。（第 505 节）

# .htaccess - htaccess mod_rewrite 难题

> ID：11194938
> 
> 赞同：1
> 
> 时间：2012-06-25T18:16:16.890
> 
> 标签：.htaccess, mod-rewrite, apache2

好的，所以我有这个包含这个的 .htaccess 文件

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php?p=%{REQUEST_URI}&%{QUERY_STRING} [L]
</IfModule> 
```

问题是，在 apache 2.2.22 中， the`p`和其他查询对象没有通过，但在 apache 2.4.2 中效果很好。

所以基本上在 apache 2.2.22 中它只是将所有内容转发到 index.php，但它没有任何`get`对象。

任何帮助，谢谢。

**更新**

好的，所以我换了行

`RewriteRule . /index.php?p=%{REQUEST_URI}&%{QUERY_STRING} [L]`

至

`RewriteRule ^(.*) /index.php?p=$1 [L,QSA]` 现在在 apache 2.2.22 上，`p`GET 没有通过，但我添加的任何特定查询都会通过。

所以如果我这样做

`http://localhost/index/fun/buns/funds?man=woman`

在 2.4.2 我得到

```
array (size=2)
  'p' => string 'index/fun/buns/funds' (length=20)
  'man' => string 'woman' (length=5) 
```

在 2.2.22 我得到

```
array(1) {
  ["man"]=>
  string(5) "woman"
} 
```

**要清楚**2.4.2 上发生的事情是我想要的，而 2.2.22 不合作。

**另一个更新**好的，所以看起来正在发生的事情是，当我执行 /index/whatever 时，它会自动假定 index.php，并忽略它，当我不希望它时，它会自动将 .php 添加到其中。关于如何阻止它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:07:20.427

问题已解决：我需要添加`-MultiViews`到 httpd.conf 文件。

# junit - 编写这组 JUnit 测试的“正确”方法是什么？

> ID：11194941
> 
> 赞同：2
> 
> 时间：2012-06-25T18:16:27.437
> 
> 标签：junit

我正在为以各种方式创建实体并对其进行操作的服务编写 JUnit 测试。我希望我的测试尝试许多不同的活动组合。我有这样的事情：

```
test1() {
/** create entity **/
/** assert **/
}

test2() {
/** do X to entity **/
/** assert **/
}

test3() {
/** do X again to entity, expect failure **/
/** assert **/
}

test4() {
/** do Y to entity, expect success **/
/** assert **/
} 
```

但是，我的理解是我不能期望 JUnit 以正确的顺序运行测试，并且每个测试都应该是完全独立的。

但是如果我让每个测试都独立，那么就会有很多重复的代码，运行时间会很长，并且更难维护......例如：

```
test1() {
/** create entity **/
/** assert **/
}

test2() {
/** create entity **/
/** do X to entity **/
/** assert **/
}

test3() {
/** create entity **/
/** do X to entity **/
/** do X again to entity, expect failure **/
/** assert **/
}

test4() {
/** create entity **/
/** do X to entity **/
/** do X again to entity, expect failure **/
/** do Y to entity, expect success **/
/** assert **/
} 
```

...如果你跟着我。

所以我的问题是，编写这些测试的“正确”方法是什么，以便代码干净优雅？

谢谢，罗伯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:22:38.307

您可以使用`@Before`带注释的方法来初始化要在测试中使用的实体。然后，使用`@After`带注释的方法清除/释放测试使用的任何资源。

你可以有：

```
private Entity entity;

@Before
public void init() {
  entity = ...
}

@Test
public void test1() {
  // do things to entity
  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:30:46.257

您可以在每个测试方法中调用 setup 方法来处理重复代码。

IE

```
test1() {
setup();
/** create entity **/
/** assert **/
}

test2() {
setup();
/** create entity **/
/** do X to entity **/
/** assert **/
}

setup(){
/**perform setup here*/
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T09:13:53.300

哪个更适合您？

```
@OrderRunner
public class EntityTest {
  Entity e;

  shouldBeCreatedInValidState() {
    e = new Entity();
    assert(e.isValid());
  }

  shouldBeWigglable() {
    e.wiggle();
    assert(e.hasBeenWiggled());
  }

  shouldNotBeWigglableTwice() {
    try {
       e.wiggle();
       fail("Wiggled too many times")
    } catch(OverWiggledException e) {}
  }
} 
```

或者

```
public class EnttityTest {
  shouldBeCreatedInValidState() {
    Entity e = new Entity();
    assert(e.isValid());
  }

  shouldBeWigglable() {
    Entity e = new Entity();
    e.wiggle();
    assert(e.hasBeenWiggled());
  }

  shouldNotBeWigglableTwice() {
    Entity e = new Entity();
    e.wiggle();
    try {
       e.wiggle();
       fail("Wiggled too many times")
    } catch(OverWiggledException e) {}
  }
} 
```

我的偏好是后者。该属性很容易被遗漏，因此第二个“摆动”看起来像是对测试进行因果扫描时的一次摆动。

如果设置/测试方法更复杂，那么创建方法。

```
 shouldNotBeWigglableTwice() {
    givenAnEntity();
    andIWiggleIt();
    try {
       whenIWiggleIt();
       thenItShouldThrowAnException();
    } catch(OverWiggledException e) {}
  } 
```

# spotify - 有关从 Spotify / Facebook 获取哪些数据的文档

> ID：11194943
> 
> 赞同：0
> 
> 时间：2012-06-25T18:16:42.720
> 
> 标签：spotify

我们正在开发一个拥有自己的用户数据库的应用程序。我们正在研究与社交网络的集成，并想知道是否有任何文档说明 Spotify 和我们的应用程序可以进行哪些集成？除了搜索和查找之外，还能做更多的事情吗？

Spotify 与 Facebook 共享的内容是否仅限于 Facebook，或者我们也可以从 Spotify 访问这些信息？

您是否知道 Facebook 是否通过 API 与第三方共享 Facebook 上的 Spotify 数据？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:27:36.420

使用 Facebook 的 API，您可以请求一个人的收听，但这包括使用 Facebook 收听 API 的所有内容，而不仅仅是 Spotify。Spotify 与该 API 的交互是私密的，第三方无法使用。

Spotify 本身不通过 API 提供任何社交数据。

# matlab - 如何将 MATLAB 类保存到文件

> ID：11194959
> 
> 赞同：2
> 
> 时间：2012-06-25T18:17:52.770
> 
> 标签：matlab, matlab-class

我想加载和保存一些从 classdef 样式类实例化的对象。当对象存在于工作区中而不是外部时，我可以使用“保存”和“加载”。

例如，如果我有一个名为 manager 的类，它需要加载和保存不同的员工类，那么工作区中将不存在员工类。

我需要编写自定义保存程序吗？有没有利用现有工具的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:43:55.520

首先，我希望我能正确理解你的问题。

你有这样的事情：

```
 class Manager
      properties
          Employees
      end
   end

   class Employee

   end 
```

你有一个实例`Manager`

```
 manager = Manager();
   e1 = Employee();
   e2 = Employee();;
   manager.Employees{1} = e1;
   manager.Employees{2} = e2; 
```

你想保存它。

在这种情况下，即使您的工作区中没有`e1`和`e2`，save 命令也会在保存时保存它们`Manager`。

但是，为了正确加载它们，您必须同时拥有`Employee`和`Manager`在您的工作目录中。这是有道理的，*因为没有其他方法可以知道它是什么类*。事实上，你会得到一个错误：

```
Warning: Variable 'manager' originally saved as a Manager cannot be instantiated as an object and will be read in as a uint32\. 
Warning: Variable 'e1' originally saved as a Employee cannot be instantiated as an object and will be read in as a uint32\. 
Warning: Variable 'e2' originally saved as a Employee cannot be instantiated as an object and will be read in as a uint32\. 
```

# android - 当 Android 应用程序崩溃时，我可以获得 C++ 堆栈跟踪吗？

> ID：11194963
> 
> 赞同：11
> 
> 时间：2012-06-25T18:18:00.560
> 
> 标签：android, c++, debugging

我的 C++ 代码中发生的大多数错误都会导致应用程序简单地退出，没有任何 LogCat 输出，设备上也没有消息。空指针和错误使用 JNI 经常会产生这种结果，不用说，它使调试变得非常困难。

目前我可以在 ndk-gdb 中使用“bt”命令获取堆栈跟踪，但如果崩溃发生在启动的前 2 秒内，则不能，因为 ndk-gdb 启动进程并在启动后附加到它。另外，ndk-gdb 不可靠，经常说它找不到任何符号，或者抱怨非致命的“SIGILL”错误，例如。

有没有办法在应用程序崩溃时捕获错误并打印堆栈跟踪或其他信息？例如，如果有一个 SIGSEGV，我想知道应用程序试图访问哪个地址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:50:11.350

`trace.txt`文件给点东西？我不记得他的位置是：`/data/anr/trace.txt`还是`/data/data/{pkg}/trace.txt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:10:56.770

您需要首先捕获 SIGSEGV 以在获得 segv 时执行代码。这是posix代码，所以类似的东西应该适用于android：

```
void abortHandler( int signum, siginfo_t* si, void* unused )
{
   const char* name = NULL;
   switch( signum )
   {
   case SIGABRT: name = "SIGABRT";  break;
   case SIGSEGV: name = "SIGSEGV";  break;
   case SIGBUS:  name = "SIGBUS";   break;
   case SIGILL:  name = "SIGILL";   break;
   case SIGFPE:  name = "SIGFPE";   break;
   case SIGPIPE: name = "SIGPIPE";  break;
   }

   if ( name )
      printf( stderr, "Caught signal %d (%s)\n", signum, name );
   else 
      printf( stderr, "Caught signal %d\n", signum );

   printStackTrace( stderr );

   exit( signum );
}

void handleCrashes()
{
   struct sigaction sa;
   sa.sa_flags = SA_SIGINFO;
   sa.sa_sigaction = abortHandler;
   sigemptyset( &sa.sa_mask );

   sigaction( SIGABRT, &sa, NULL );
   sigaction( SIGSEGV, &sa, NULL );
   sigaction( SIGBUS,  &sa, NULL );
   sigaction( SIGILL,  &sa, NULL );
   sigaction( SIGFPE,  &sa, NULL );
   sigaction( SIGPIPE, &sa, NULL );
} 
```

接下来是调用该函数来注册信号处理程序。您可以将其作为 main 中的第一件事，但在 main 之前您不会获得堆栈跟踪。如果你以前想要它们，你可以从全局对象的构造函数中调用这个函数。但是不能保证它会是第一个被调用的构造函数。有一些方法可以确保它被尽早调用。例如，重载 operator new - 在调试版本中 - 首先在第一次分配时初始化堆栈跟踪，然后调用真正的 operator new。这将为您提供从第一次分配开始的堆栈跟踪。

要打印堆栈跟踪：

```
void printStackTrace( unsigned int max_frames = 63 )
{
   void* addrlist[max_frames+1];

   // retrieve current stack addresses
   u32 addrlen = backtrace( addrlist, sizeof( addrlist ) / sizeof( void* ));

   if ( addrlen == 0 ) 
   {
      printf( stderr, "  <empty, possibly corrupt>\n" );
      return;
   }

   char** symbollist = backtrace_symbols( addrlist, addrlen );

   for ( u32 i = 3; i < addrlen; i++ )
      printf( stderr, "%s\n", symbollist[i] ):
} 
```

您将需要做更多的工作来解开符号以使其可读。试试 abi::__cxa_demangle。当然使用 -g 构建并使用 -rdynamic 链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-22T12:18:08.977

请遵循以下说明：[https ://developer.android.com/ndk/guides/ndk-stack](https://developer.android.com/ndk/guides/ndk-stack)

也就是说：

1.  转到您拥有 libnative-lib.so （或其他名称）文件的文件夹（对我来说，是： /app/build/intermediates/cxx/RelWithDebInfo/5ww1v5k5/obj/arm64-v8a ）；确保您选择了方便的文件夹（即与您的测试设备处理器的架构相对应的文件夹）
2.  将 logcat 的内容复制/粘贴到 txt 文件中（例如 foo.txt）；确保此日志包含您的崩溃 :) 将如下所示：

--------- 崩溃开始 2021-12-22 11:01:37.533 7268-11335/? A/libc：致命信号 11 (SIGSEGV)、代码 1 (SEGV_MAPERR)、tid 11335 (Thread-87) 中的故障地址 0x1、pid 7268 等....（之后的许多行）

3.  将此 foo.txt 文件放在与 libnative-lib.so 文件夹相同的文件夹中
4.  确保在 /my_user_name/.bash_profile 文件中有 NDK 的路径；就像是：

导出 ANDROID_NDK=/Users/my_user_name/Library/Android/sdk/ndk/22.1.7171670

5.  返回包含您的架构文件夹的文件夹（在我的例子中是..../5ww1v5k5/obj）并输入终端：

    $ANDROID_NDK/ndk-stack -sym arm64-v8a -dump arm64-v8a/foo.txt

将在终端中生成人类可读的堆栈跟踪。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-09-30T08:05:46.073

是的，'execinfo.h' 在那里不存在，但 CallStack 存在：

```
#include <utils/CallStack.h>
..
CallStack cs;
cs.dump(); 
```

希望它可以帮助这样的信号处理程序。

# windows - Windows DirectShow：如何播放多个 mp3？

> ID：11194964
> 
> 赞同：0
> 
> 时间：2012-06-25T18:18:03.360
> 
> 标签：windows, mp3, directshow, latency

我必须在我的 UI 中播放多种声音，例如按钮点击、错误、通知等。为此，我编写了以下代码（以前从未在 Windows 中播放过 mp3）：

```
bool ClientHandler::InitSoundAndMusic()
{
    m_pSoundGraph = NULL;
    m_pSoundControl = NULL;

    HRESULT hr = ::CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, IID_IGraphBuilder,
                                    (void**) &m_pSoundGraph);

    if (!SUCCEEDED(hr) || !m_pSoundGraph)
        return false;

    hr = m_pSoundGraph->QueryInterface(IID_IMediaControl, (void**) &m_pSoundControl);
    if (!SUCCEEDED(hr) || !m_pSoundControl)
        return false;

    return true;
}

void ClientHandler::PlayFile(LPCTSTR file)
{
    if (!m_pSoundGraph)
        return;

    m_pSoundControl->Stop();
    HRESULT hr = m_pSoundGraph->RenderFile(file, NULL);
    if (SUCCEEDED(hr))
        m_pSoundControl->Run();
}

bool ClientHandler::OnEvent(const String& message)
{
    if (message == _T("button"))
    {
        PlayFile(_T(".\\sound\\button.mp3"));
        return true;
    }

    return false;
} 
```

它似乎很慢。当我每秒单击一个按钮约 5 次时，用户界面就会冻结。我想，我不应该每次都调用 Stop/Render/Run，但我不知道如何避免它。我应该如何重写代码？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:11:59.967

而不是 DirectShow，我只是尝试了 libzplay (http://libzplay.sourceforge.net/)。

让我引用它的自述文件：

> 如何在 C++ 中使用 libZPlay
> 
> 1.  将 libzplay.h 包含到您的源代码中
> 2.  包含 libZPlay 命名空间
>     
>     
>     
>     使用命名空间 libZPlay；
>     
>     
> 3.  将您的项目与导入库链接。
>     
>     
>     
>     libzplay.lib - libzplay.dll 的 VC++ 导入库 libzplay_borland.lib
>     - libzplay.dll 的 Borland C++ 导入库
>     libzplay.a - libzplay.dll 的 MinGW/GCC 导入库
>     
>     
> 4.  创建 ZPlay 类。
>     
>     
>     
>     ZPlay *player = CreateZPlay();
>     
>     
> 5.  打开文件。
>     
>     
>     
>     if(player->OpenFile("mySong.mp3", sfAutodetect) == 0) { // 错误 }
>     
>     
> 6.  开始播放
>     
>     
>     
>     播放器->播放（）；
>     
>     
> 7.  最后销毁 ZPlay 类
>     
>     
>     
>     播放器->释放（）；

它工作顺利。我可以只打开一次文件，并在每次需要时调用 Play()。在 DirectShow 中调用 Run() 的方式不同。

这就是 The Right Library 必须的：30 分钟从头开始嵌入和坚固的岩石。

# asp.net-mvc - 如何根据使用剃须刀的页面编写一些逻辑？

> ID：11194966
> 
> 赞同：0
> 
> 时间：2012-06-25T18:18:09.807
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个局部视图，显示在我每个页面的右上角。它有一个链接，但这需要根据我所在的页面进行更改。因此，如果我在主页上，我需要在部分视图中显示一个登录链接，但如果我在登录页面上，我需要显示一个注册链接。任何人都知道如何使用剃须刀做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:27:22.280

您可以从 RouteData 获取当前操作和控制器：

```
@{
    string controller = ViewContext.RouteData.GetRequiredString("controller");
    string action = ViewContext.RouteData.GetRequiredString("action");
    ... decide what to render
} 
```

但显然更好的方法是编写一个自定义 HTML 帮助程序，它将根据上下文生成正确的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:27:27.793

您可以使用 mvc 的[布局](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)功能使您的视图具有共同的外观和感觉，然后使用该`@section`功能（也在链接中描述）渲染不同页面的部分

**编辑**
实现该`@section`功能：
在_layout.cshtml中：

```
@*if section is optional for some pages*@
@if (IsSectionDefined("Link"))
{
  @RenderSection("Link")
} 
```

然后，在每个页面中（在我的例子中是 index.cshtml）：

```
@section Link
{
 <a href="#">the link</a>
} 
```

该部分是使用唯一名称定义的，稍后会使用相同的名称在布局中的预期位置呈现。
我认为它比依赖来自路由的信息更清晰的设计，如果链接仅依赖于视图，因为理论上，至少，视图不必知道导致它的路由引擎/控制器首先呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:56:26.593

将两个链接添加到部分并使用 jquery 将其隐藏在文档准备好的特定页面中。

所以在登录页面上，执行：

```
$('#registerPartialLink').hide(); 
```

# javascript - window.location 更改时中断？

> ID：11194971
> 
> 赞同：74
> 
> 时间：2012-06-25T18:18:46.723
> 
> 标签：javascript, google-chrome, firebug, google-chrome-devtools

我有一个页面在不应该重定向的时候被重定向，我试图找出是谁在做的。首先我尝试劫持window.location：

```
window.location = (function (location) {
    // location is now hidden inside a closure. We can override it
    var Location = Object.create(location);
    // Location is now our proxy. We can use it to catch changes
    window.__defineGetter__('location', function () { return Location });
    window.__defineSetter__('location', function (x) { debugger; location = x; return x; });
    // etc etc, considered assignments to location.href, location.search, location.host etc., as well as calls to location.replace and location.assign
}(window.location)); 
```

这在 Chrome 中根本不起作用。出于安全原因，您不能在 window.location 上执行 setter 和 getter。好的。我尝试的下一件事是观察 onunload 和 onbeforeunload：

```
['unload', 'beforeunload'].forEach(function (evName) {
    window.addEventListener(evName, function () {
        debugger; // Chance to check everything right before the redirect occurs
    });
}); 
```

我知道 window.location 的值会保持不变，直到 onunload 事件之后，再次出于安全原因，但我希望有其他线索；没有这样的运气。接下来，我尝试在我自己的脚本中可以找到的每个可能分配 window.location 的点放置断点。根据 Chrome 调试器，它们都没有被命中。啊。顺便说一句，这种重定向在 FF 中没有发生，我已经尝试重新启动 Chrome。我觉得我真的什么都试过了，但一无所获，这有希望意味着我即将升级为开发人员吗？请？

对于我（操作调试器的人）来说，在任何浏览器中是否有任何方法可以中断重定向页面位置的行？我知道允许自动访问该信息存在安全隐患，但是没有什么可以授予开发人员特权并允许这样做吗？如果不是，那么处理这种情况的正常方法是什么？这似乎很常见，我认为没有人喜欢在概念上简单的问题上被阻止数小时或数天。TIA

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-09-08T23:15:28.043

网络选项卡可以帮助您，打开保留日志复选框，启动器列将包含导致重定向的 javascript 位置。

# c - 替换反斜杠 C

> ID：11194976
> 
> 赞同：2
> 
> 时间：2012-06-25T18:18:55.390
> 
> 标签：c, backslash

希望这很容易做到。我正在用 C 语言编写一个需要在 Windows 和 Linux 上运行的程序。在 Linux 上它工作得很好，但在 Windows（通过 Cygwin）上它搞砸了，因为环境变量在路径中有反斜杠而不是斜杠。有没有办法代替这些？我尝试了以下但它没有改变任何东西，可能是因为它认为反斜杠正在转义下一个字符，这显然不是这种情况。这是我尝试过的：

```
char* fixPath(char *env)
{
    char *val[100];
    strcpy(val, getenv(env));
    int index = 0;
    while(val[index])
    {     
         if(val[index] == '\\')
            val[index] = '/';
         else
            index++;
    }
    printf("\n***%s",val);
    return val;
};

int main(int argc, char *argv[])
{
    char *test1;
    test1 = fixPath("SERVER1");
    printf("\n*****%s",test1);
...
} 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T18:22:20.450

**主要问题：**

(1)

```
char *val[100]; 
```

应该：

```
char val[100]; 
```

(2)

您不能将局部变量 ( `val`) 作为函数结果返回，因为它将超出范围。

**小问题：**

这里的逻辑是错误的：

```
while(val[index])
{     
     if(val[index] == '\\')
        val[index] = '/';
     else
        index++;
} 
```

它应该是：

```
while(val[index])
{     
     if(val[index] == '\\')
        val[index] = '/';
     index++;
} 
```

虽然这不是致命的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:24:42.427

你的内存管理有缺陷。首先，您声明 a`char *val[100]`而不是`char val[100]`。然后，您尝试通过引用返回那个非常本地的地址，这是未定义的行为。您最好将缓冲区作为参数传递给函数，并使其成为一个字符数组。不是指针数组。

哦，您将字符串文字 ( `"SERVER1"`) 转换为 a `char*`，这也很糟糕。使它成为一个`const char*`.

```
void fixPath(const char* env, char* fixed)
{
//...
}

int main(int argc, char *argv[])
{
    char test1[100];
    fixPath("SERVER1", test1);
    printf("\n*****%s",test1);
...
} 
```

现在，使用 100 的固定缓冲区大小当然是危险的，但在答案中只能参考这么多问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:57:23.517

我知道这对您的程序没有帮助，但出于功能的考虑，您可以试试这个 Perl 单线。

```
perl -pi -e 's/\//\\/g' filename(s) 
```

这可以在多个文件上工作，并将所有正斜杠替换为反斜杠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:26:21.753

您的函数的内存管理存在问题。您正在返回一个指向本地分配内存的指针。试试这个通用的字符串替换函数：[在 C 中替换字符串的函数是什么？](https://stackoverflow.com/a/779960/512507)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T18:24:17.857

```
char *val[100];
strcpy(val, getenv(env));
int index = 0;
while(val[index])
{     
     if(val[index] == '\\')
        val[index] = '/';
     else
        index++;
} 
```

您已在此处声明为*指针*`val`数组。它应该是一个数组。*`char`*

 *因此，您在非空时遍历*指针数组。*`val[index]`这是一个问题。您不是在遍历字符串并比较字符，而是在比较指向`\\`.

您还应该增加`index`每次迭代，不仅在找不到匹配项时，尽管这不是问题的根源。*

# java - Spring注解缓存：未为defaultCache配置CacheDecoratorFactory

> ID：11194982
> 
> 赞同：1
> 
> 时间：2012-06-25T18:19:13.377
> 
> 标签：java, spring, caching, ehcache

我正在尝试将 Sping Annotation 缓存与 EhCache 一起使用。因此，首先，我将依赖项添加到我的 pom.xml 并将 application-context.xml 配置为：

```
<ehcache:annotation-driven cache-manager="cacheManager" />

<ehcache:config cache-manager="cacheManager">
    <ehcache:evict-expired-elements interval="60" />
</ehcache:config>

<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
    <property name="configLocation"  value="ehcache.xml"/>
</bean> 
```

这是 ehcache.xml 配置文件：

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd">
    <defaultCache eternal="true" maxElementsInMemory="100" overflowToDisk="false" />
    <cache name="alfresco" maxElementsInMemory="10" eternal="true" overflowToDisk="false" />
</ehcache> 
```

最后，我将 Annontation @Cachable 添加到需要缓存的方法中：

```
@Cacheable(value="alfresco")
public EMContents getContents(RestTemplate restTemplate, String ticket, String webScriptUrl, String em_name) 
```

我创建了一个junit类来调用两次相同的方法，并且第二次不使用缓存（第一次不创建键值）。

它似乎工作正常，但我收到此消息：

```
25 Jun 2012 19:40:07  INFO EhCacheManagerFactoryBean:100 - Initializing EHCache CacheManager
25 Jun 2012 19:40:07 DEBUG ConfigurationFactory:148 - Configuring ehcache from InputStream
25 Jun 2012 19:40:07 DEBUG BeanHandler:271 - Ignoring ehcache attribute xmlns:xsi
25 Jun 2012 19:40:07 DEBUG BeanHandler:271 - Ignoring ehcache attribute xsi:noNamespaceSchemaLocation
25 Jun 2012 19:40:07 DEBUG PropertyUtil:88 - propertiesString is null.
25 Jun 2012 19:40:07 DEBUG CacheManager:605 - No disk store path defined. Skipping disk store path conflict test.
25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:184 - No CacheManagerEventListenerFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:949 - No BootstrapCacheLoaderFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:923 - CacheWriter factory not configured. Skipping...
25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:96 - No CacheExceptionHandlerFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:949 - No BootstrapCacheLoaderFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:923 - CacheWriter factory not configured. Skipping...
25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:96 - No CacheExceptionHandlerFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:949 - No BootstrapCacheLoaderFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:923 - CacheWriter factory not configured. Skipping...
25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:96 - No CacheExceptionHandlerFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:949 - No BootstrapCacheLoaderFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:923 - CacheWriter factory not configured. Skipping...
25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:96 - No CacheExceptionHandlerFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:949 - No BootstrapCacheLoaderFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:923 - CacheWriter factory not configured. Skipping...
25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:96 - No CacheExceptionHandlerFactory class specified. Skipping...
25 Jun 2012 19:40:07 DEBUG Cache:1183 - Initialised cache: alfresco_action
25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:331 - CacheDecoratorFactory not configured. Skipping for 'alfresco_action'.
25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:360 - CacheDecoratorFactory not configured for defaultCache. Skipping for 'alfresco_action'.
25 Jun 2012 19:40:07 DEBUG Cache:1183 - Initialised cache: alfresco
25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:331 - CacheDecoratorFactory not configured. Skipping for 'alfresco'.
25 Jun 2012 19:40:07 DEBUG ConfigurationHelper:360 - CacheDecoratorFactory not configured for defaultCache. Skipping for 'alfresco'.
25 Jun 2012 19:40:07 DEBUG DefaultListableBeanFactory:458 - Finished creating instance of bean 'cacheManager' 
```

有什么线索吗？我的配置似乎有问题。

谢谢你的时间
安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:48:10.210

安德烈亚，

确保带有@Cachable 注释的bean 实例是spring 管理的，而不是您自己创建的。如果您有正确的日志，则在调用该方法时会产生类似的内容：

```
2012-11-16 09:40:21,731 [http-8081-2] DEBUG com.googlecode.ehcache.annotations.interceptor.EhCacheInterceptor  - Generated key '1396312488991822982' for invocation: ReflectiveMethodInvocation: public edu.wmich.gowmu.sso.dataobject.User edu.wmich.gowmu.sso.bl.UserManager.getUser(java.lang.String,java.lang.String); target is of class [edu.wmich.gowmu.sso.bl.UserManager] 
```

# ruby-on-rails-3 - 如果访问像 url 这样的子文件夹，Apache 会提供不同的应用程序内容吗？

> ID：11194985
> 
> 赞同：3
> 
> 时间：2012-06-25T18:19:26.997
> 
> 标签：ruby-on-rails-3, mod-rewrite, apache2

在此 URL ( [http://www.seomoz.org/learn-seo/domain](http://www.seomoz.org/learn-seo/domain) ) 中，以下是*子域或子文件夹*部分：

> 5.  子域或子文件夹
>     由于搜索引擎对域的衡量标准与对子域的衡量标准不同，因此建议网站管理员将有价值的链接内容（如博客）放在子文件夹而不是子域中。（即 www.example.com/blog/ 而不是 blog.example.com） 值得注意的例外是特定语言的网站。（即，英文版网站的 en.example.com）。

所以，这是我在网络服务器（Apache2）级别处理的情况`mod_rewrite`

我有一个运行在`http://example.com`

现在我想托管一个博客，它是一个 PHP 应用程序 WordPress`http://blog.example.com`

我想要的是，如果用户点击`http://example.com/blog`或任何带有 的 url `/blog/.....`，我想显示`http://blog.example.com`或`http://blog.example.com/....`不更改 URL 地址的内容。

我知道它应该在 apache2 服务器级别处理，因为如果它点击 url `http://example.com/blog`，它将在`routes.rb`文件中搜索匹配项。

那么，使用apache2 文件`mod_rewrite`处理这个问题的规则是什么？`.htaccess`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T03:06:41.753

实际上，您最好使用`mod_proxy`而不是`mod_rewrite`. [请参阅此处的 ProxyPass 文档。](http://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypass)

# macos - NSAttributedString/NSParagraphStyle：类似 Xcode 的换行缩进

> ID：11194988
> 
> 赞同：0
> 
> 时间：2012-06-25T18:20:04.210
> 
> 标签：macos, cocoa, nsattributedstring

如何使用 NSAttributedString 和/或 NSParagraphStyle 在 Xcode 中实现“断线”的缩进？请注意，它们在 Xcode 中获得了额外的缩进。

![Xcode 截图](../Images/0911850a18a55a1a3b83dc3e7b948848.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:17:29.780

您可以为此使用 的`headIndent`属性。`NSParagraphStyle`您可能需要根据（逻辑）行的缩进宽度（制表符、空格）自己计算适当的缩进量。

# jquery - 当至少需要一个字段并且全部丢失时，如何仅显示一条错误消息？

> ID：11194990
> 
> 赞同：0
> 
> 时间：2012-06-25T18:20:12.770
> 
> 标签：jquery, jquery-validate

我使用[此代码](https://stackoverflow.com/a/3678493/604388)要求用户在一组字段中输入至少一个值。但如果用户在所有字段中均未输入任何内容，则会为**所有**空字段显示错误消息。我怎样才能只为一个字段显示它？还是分开？我试图使用[errorContainer 选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)，但它会影响其他字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:26:46.477

也许是围绕所有元素的循环。找到那个空的。

```
$('form input').each(function(){
    if ($(this).val() == ""){
        //do code
    }
}); 
```

那应该行得通。试试看。:)

# google-maps - 在 Google 地图中放置 MarkerCluster 的挑战

> ID：11194991
> 
> 赞同：0
> 
> 时间：2012-06-25T18:20:14.517
> 
> 标签：google-maps, google-maps-api-3

我一直在按照 Google Maps API V3 中的示例对我放置在地图上的标记进行聚类。我正在使用最简单的方法。我似乎无法让 MarkerCluster 出现。我可能将相应的代码放在错误的区域，但是在尝试了几种变体之后，我似乎无法让 MarkerCluster 出现。

如果有人有任何见解并且可以告诉我我做错了什么，将不胜感激。

这是代码：

```
 var stories = {{storyJson|safe}};
var geocoder;
var map;

function loadMarkers(stories){
    var markers = [];

    for (i=0;i<stories.length;i++) {
        var story = stories[i];    
        if (story.copy.length > 120) {
                story.copy = story.copy.substring(0, 120) + "...";
            }

        (function(story) {      
            var pinColor = "69f2ff";
                var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=S|" + pinColor,
                    new google.maps.Size(21, 34),
                    new google.maps.Point(0,0),
                    new google.maps.Point(10, 34));
          var point = new google.maps.LatLng(story.latitude, story.longitude);
          var marker = new google.maps.Marker({position: point, map: map, icon: pinImage});
          var infowindow = new google.maps.InfoWindow({
            content: '<div >'+
                '<div >'+
                '</div>'+
                '<h2 class="firstHeading">'+story.headline+'</h2>'+
                '<div>'+
                '<span>'+story.author+'</span><br />'+
                '<span>'+story.city+'</span><br />'+
                '<span>'+story.topic+'</span><br />'+
                '<p>'+story.date+'</p>'+
                '<p>'+story.copy+'</p>'+
                '<p><a href='+story.url+'>Click to read story</a></p>'+
                '</div>'+
                '</div>'

          });

          google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map,this);

          });
            markers.push(marker);

        })(story);

    }
}

 function mainMap(position)
 {
       geocoder = new google.maps.Geocoder();
       // Define the coordinates as a Google Maps LatLng Object
       var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

       // Prepare the map options
       var mapOptions =
      {
                  zoom: 15,
                  center: coords,
                  mapTypeControl: false,
                  navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                  mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Create the map, and place it in the map_canvas div
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        // Place the initial marker
        var marker = new google.maps.Marker({
                  position: coords,
                  map: map,
                  title: "Your current location!"
        });
        loadMarkers(stories);
        var markerCluster = new MarkerClusterer(map, markers);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:41:54.673

看起来有些奇怪`markers`，应该只有一个全局`markers`变量填充在 loadMarkers 中并用于创建集群器。

但是，里面有一行`var markers = []`会`function (story)`在每次循环迭代时被清空。此外，`markers.push(marker)`应该与创建标记的位置位于同一块中；现在它在 for 循环之外，所以只添加了一个标记（最后一个）。

最后，我不明白为什么有 { } 大括号`var markerCluster = new MarkerClusterer(map, markers);`。

# xaml - 对多个选项卡按钮使用相同的图像和按钮样式

> ID：11194994
> 
> 赞同：0
> 
> 时间：2012-06-25T18:20:24.487
> 
> 标签：xaml, reference, styles, setter

我有一个用户控件，其中包含一个带有多个选项卡的选项卡项。每个选项卡都包含一个带有相同按钮（添加、更新、删除）的自定义堆栈面板。我收到“指定元素已经是另一个元素的逻辑子元素。首先断开它”错误。我不知道该怎么做才能断开它，因为我已经`x:Shared = "False"`设置了元素。

内部 Grid.Resource：

```
<!--ButtonAddImage-->
<Image x:Key="ButtonAddImage"
       x:Shared="True">
    <Image.Style>
        <Style TargetType="{x:Type Image}">
            <Setter Property="Source"
                    Value="add2_32.png" />
            <Setter Property="Stretch"
                    Value="Uniform" />
        </Style>
    </Image.Style>
</Image>

<!--ButtonAddStyle-->
<Style TargetType="Button"
       x:Key="ButtonAddStyle"
       x:Shared="False">
    <Setter Property="Content"
        Value="{DynamicResource ResourceKey=ButtonAddImage}" />
    <Setter Property="Width"
            Value="32" />
    <Setter Property="Height"
            Value="22" />
    <Setter Property="HorizontalAlignment"
            Value="Left" />
    <Setter Property="VerticalAlignment"
            Value="Center" />
</Style> 
```

内部选项卡：

```
<Button  Style="{DynamicResource ResourceKey=ButtonAddStyle}"
         Name="gdSMSInfo_btnAddRecord"
         Click="gdSMSInfo_btnAddRecord_Click"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:17:58.567

对于按钮样式，您有 x:Shared="False"，但对于您在样式中使用的图像，您有 x:Shared="True"。将图像本身的 x:Shared 更改为 False ，它对我有用。

# php - PHP - 嵌套循环问题

> ID：11194997
> 
> 赞同：0
> 
> 时间：2012-06-25T18:20:35.357
> 
> 标签：php, for-loop, nested

我有一个 HTML 表，我需要用从 select 语句中获取的值填充该表。表 cols 由数组 (0,1,2,3) 填充。查询的每个结果都将包含一个值为 (0-3) 的行“GATE”，但这些结果不会有任何可预测性。一个查询可以提取 4 行的“GATE”值为 0、1、2、3，下一个查询可以提取两行的值为 1 和 2 或 1 和 3。

我需要能够用对应的值填充这个 HTML 表。因此 HTML COL 0 将具有数据库行的 TTL_NET_SALES，其 GATE 值也为 0。

```
<?php

$gate = array(0,1,2,3);
$gate_n = count($gate);

/*
Database = 
my_table.ID
my_table.TT_NET_SALES
my_table.GATE
my_table.LOCKED
*/

$locked = "SELECT * FROM my_table WHERE locked = true";
$locked_n = count($locked);

/* EXAMPLE RETURN

Row 1:
my_table['ID'] = 1
my_table['TTL_NET_SALES'] = 1000
my_table['GATE'] = 1;

Row 2:
my_table['ID'] = 2
my_table['TTL_NET_SALES'] = 1500
my_table['GATE'] = 3;
*/

print "<table border='1'>";
print "<tr><td>0</td><td>1</td><td>2</td><td>3</td>";
print "<tr>";

for ($i=0; $i<$locked_n; $i++)
{
    for ($g=0; $g<$gate_n; $g++)
    {
        if (!is_null($locked['TTL_NET_SALES'][$i]) && $locked['GATE'][$i] == $gate[$g]) {
            print "<td>$".$locked['TTL_NET_SALES'][$i]."</td>";

        } else {
            print "<td>-</td>";
        }
    }
}

print "</tr>";
print "</table>";

/*
What I want to see:
<table border='1'>
<tr>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>-</td>
<td>1000</td>
<td>-</td>
<td>1500</td>
</tr>
</table>
*/

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:22:58.697

您的代码中似乎有错误...替换`$col<$my_cols;`为`$col < count($my_cols)`

```
$my_cols = array(0,1,2,3);
for($i = 0; $i<$db_res; $i++)
{
    for($col = 0; $col<$my_cols; $col++)
    {
        if ($db_res[$i] == $col) {
            print "<td>".$db_res[$i]."</td>";
        } else {
            print "<td>-</td>";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:15:24.870

当我只需要 array_search 时，我错误地遍历了第二个数组以检查是否相等。[http://us3.php.net/manual/en/function.array-search.php](http://us3.php.net/manual/en/function.array-search.php)

```
print "<table border='1'>";
print "<tr>";

$my_arr = array(0,1,2,3);

$vals = array(1,2);

for ($i = 0; $i<count($my_arr); $i++) 
{  
    print "<td>";
    $key = array_search($my_arr[$i], $vals);
    if (is_int($key)){
        print $vals[$key];
    } else {
        print "-";
    }
    print "</td>";
}

print "</tr>";
print "</table>"; 
```

# javascript - 按特定顺序下载图像

> ID：11194998
> 
> 赞同：3
> 
> 时间：2012-06-25T18:20:42.503
> 
> 标签：javascript

我正在实现一个显示产品 360 度视图的功能。视图由从服务器下载的一系列独立图像表示。

从用户体验的角度来看，序列中的某些图像比其他图像更重要。因此，当我的代码下载图像时，我想先获取重要的图像并立即显示它们，然后再获取不太重要的图像。

我知道我可以按图像的重要性对图像进行排序，然后依次下载它们，但我也想利用异步下载来减少带宽。

任何人都可以在这里推荐任何东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:27:31.577

您可以在第一波中加载最重要的图像，然后像这样加载其他图像：

```
var firstImages = [];
var otherImages = [];

var count = firstImages.length;

var onloadfirstwave = function() {
   if (--count==0) {
      // lauches second wave
   }
};
// and for each image, do
firstImages[i].onload = onloadfirstwave;
firstImages[i].src = "someurl"; 
```

只有在加载第一个图像后才会启动第二波，并且将保留第一次加载的并行性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:23:29.430

为什么不直接使用`setTimeout`并在每个图像之间稍微增加延迟（500 毫秒）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:32:48.773

html可以用js或者html创建。html版本：...

```
var images = ['img1.jpg','img2.jpg',...],
    index = 0;
function load_next_image(){
  if(index<images.length){
    // if you want to create the img from js
    // this is the place to do so
    $('#img'+index).attr('src',images[index]).onload(load_next_image);
    index++;
  }else{
    // all images loaded
  }
}
load_next_image() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:23:44.310

浏览器会为您处理异步加载，同时也会限制并行下载的数量。只需以正常方式预加载图像。你不需要任何特别的东西。