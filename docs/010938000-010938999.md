# StackOverflow 问答 10938000-10938999

# tomcat - 识别tomcat上的系统负载

> ID：10938019
> 
> 赞同：0
> 
> 时间：2012-06-07T18:49:37.000
> 
> 标签：tomcat, scalability

我有一个运行我的 Web 应用程序的 tomcat 服务器：[http](http://www.LoudReview.com) ://www.LoudReview.com 。这是一个有限的托管帐户，允许使用 128 MB 内存。一次又一次，与 tomcat 服务器的连接超时。

我想知道是否有一种方法可以监视 tomcat 服务器上的负载，以便在系统处于高负载时减少内存密集型操作。我可以构建一些智能，以便我可以监控系统正在使用的内存量，或者已经占用的连接数，并相应地处理请求吗？

如果可能的话，我更喜欢易于实现的解决方案，尽管我也可以使用更复杂的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:52:53.803

您可以使用 JMX 使用 key`java.lang:type=OperatingSystem`和 attribute获得系统负载平均值`SystemLoadAverage`。该值将是一个双精度浮点值（又名“双精度”）。

请注意，平均负载是采样期间运行队列的平均长度（上面的数字可能是瞬时的，也可能是 1 分钟的平均值）。根据您的系统，无论有多少请求正在等待服务，您的 JVM 进程可能只计为“1”。因此，您的平均负载可能一直为 1.0（这表明 CPU 利用率非常高），而 CPU 确实在为许多您无法检测到的请求提供服务。

如果您的大多数请求都是相同的“成本”，那么您可能希望将请求吞吐量视为衡量系统“负载”的更好衡量标准。您也可以通过 JMX 获得类似的指标，但您必须计算连接器的名称（或者只是使用连接`jconsole`并浏览直到找到它）。

Tomcat 的每个连接器都有一个带有 key 的 JMX bean `Catalina:type=GlobalRequestProcessor,name="[protocol]-[connectortype]-[localip-?]-[portnum]`。一个例子是`Catalina:type=GlobalRequestProcessor,name="http-nio-127.0.0.1-8217`。这里有三个对您有用的属性：

1.  `maxTime`
2.  `processingTime`
3.  `requestCount`

您可以对这些值进行采样并跟踪您自己的负载，也可以使用`resetCounters`bean 上的操作来重置计数器并让 JMX bean 为您保留所有指标。

# magento - 使用简单的标签扩展时如何将相关产品放在右栏中

> ID：10938020
> 
> 赞同：0
> 
> 时间：2012-06-07T18:49:39.720
> 
> 标签：magento, magento-1.4

我需要将相关产品放在我的网站的右栏中。

默认情况下，网站产品设计设置为 2 列，左栏，但我将其更改为 2 列，右栏。

现在我需要做的是修改 catalogs.xml 文件，使相关产品出现在右列而不是选项卡中。

这是一个示例产品： [http ://www.theprinterdepo.com/hp-laser-1320-printer-q5927a](http://www.theprinterdepo.com/hp-laser-1320-printer-q5927a)

这是 catalog.xml 的相关部分

```
<!--
Product view
-->

    <catalog_product_view translate="label">
        <label>Catalog Product View (Any)</label>
        <!-- Mage_Catalog -->
        <reference name="root">
            <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
        </reference>
        <reference name="head">
            <action method="addJs"><script>varien/product.js</script></action>

            <action method="addItem"><type>js_css</type><name>calendar/calendar-win2k-1.css</name><params/><!--<if/><condition>can_load_calendar_js</condition>--></action>
            <action method="addItem"><type>js</type><name>calendar/calendar.js</name><!--<params/><if/><condition>can_load_calendar_js</condition>--></action>
            <action method="addItem"><type>js</type><name>calendar/calendar-setup.js</name><!--<params/><if/><condition>can_load_calendar_js</condition>--></action>
        </reference>
        <reference name="content">
 <block type="catalog/product_view" name="product.countdown" as="countdown" template="paytype/countdown/countdown.phtml"/>
            <block type="catalog/product_view" name="product.info" template="catalog/product/view.phtml">
                <!--
                <action method="addReviewSummaryTemplate"><type>default</type><template>review/helper/summary.phtml</template></action>
                <action method="addReviewSummaryTemplate"><type>short</type><template>review/helper/summary_short.phtml</template></action>
                <action method="addReviewSummaryTemplate"><type>...</type><template>...</template></action>
                -->
                <block type="catalog/product_view_media" name="product.info.media" as="media" template="catalog/product/view/media.phtml"/>
                <block type="core/text_list" name="alert.urls" as="alert_urls" translate="label">
                    <label>Alert Urls</label>
                </block>

                <action method="setTierPriceTemplate"><template>catalog/product/view/tierprices.phtml</template></action>

                <block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs" template="catalog/product/view/tabs.phtml" >
                    <action method="addTab" translate="title" module="catalog"><alias>description</alias><title>Product Description</title><block>catalog/product_view_description</block><template>catalog/product/view/description.phtml</template></action>
<action method="addTab" translate="title" module="catalog"><alias>upsell_products</alias><title>Supplies and Accesories</title><block>catalog/product_list_upsell</block><template>catalog/product/list/upsell.phtml</template></action>

                    <action method="addTab" translate="title" module="catalog"><alias>additional</alias><title>Additional Information</title><block>catalog/product_view_attributes</block><template>catalog/product/view/attributes.phtml</template></action>
                </block>

                <block type="catalog/product_view_additional" name="product.info.additional" as="product_additional_data" />
                <block type="catalog/product_view" name="product.info.addto" as="addto" template="catalog/product/view/addto.phtml"/>
                <block type="catalog/product_view" name="product.info.addtocart" as="addtocart" template="catalog/product/view/addtocart.phtml"/>

                <block type="core/text_list" name="product.info.extrahint" as="extrahint" translate="label">
                    <label>Product View Extra Hint</label>
                </block>

                <block type="catalog/product_view" name="product.info.options.wrapper" as="product_options_wrapper" template="catalog/product/view/options/wrapper.phtml" translate="label">
                    <label>Info Column Options Wrapper</label>
                    <block type="core/template" name="options_js" template="catalog/product/view/options/js.phtml"/>
                    <block type="catalog/product_view_options" name="product.info.options" as="product_options" template="catalog/product/view/options.phtml">
                        <action method="addOptionRenderer"><type>text</type><block>catalog/product_view_options_type_text</block><template>catalog/product/view/options/type/text.phtml</template></action>
                        <action method="addOptionRenderer"><type>file</type><block>catalog/product_view_options_type_file</block><template>catalog/product/view/options/type/file.phtml</template></action>
                        <action method="addOptionRenderer"><type>select</type><block>catalog/product_view_options_type_select</block><template>catalog/product/view/options/type/select.phtml</template></action>
                        <action method="addOptionRenderer"><type>date</type><block>catalog/product_view_options_type_date</block><template>catalog/product/view/options/type/date.phtml</template></action>
                    </block>
                    <block type="core/html_calendar" name="html_calendar" as="html_calendar" template="page/js/calendar.phtml"/>
                </block>
                <block type="catalog/product_view" name="product.info.options.wrapper.bottom" as="product_options_wrapper_bottom" template="catalog/product/view/options/wrapper/bottom.phtml" translate="label">
                    <label>Bottom Block Options Wrapper</label>
                    <action method="insert"><block>product.tierprices</block></action>
                    <block type="catalog/product_view" name="product.clone_prices" as="prices" template="catalog/product/view/price_clone.phtml"/>
                    <action method="append"><block>product.info.addtocart</block></action>
                    <action method="append"><block>product.info.addto</block></action>
                </block>

                <block type="core/template_facade" name="product.info.container1" as="container1">
                    <action method="setDataByKey"><key>alias_in_layout</key><value>container1</value></action>
                    <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
                    <action method="append"><block>product.info.options.wrapper</block></action>
                    <action method="append"><block>product.info.options.wrapper.bottom</block></action>
                </block>
                <block type="core/template_facade" name="product.info.container2" as="container2">
                    <action method="setDataByKey"><key>alias_in_layout</key><value>container2</value></action>
                    <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
                    <action method="append"><block>product.info.options.wrapper</block></action>
                    <action method="append"><block>product.info.options.wrapper.bottom</block></action>
                </block>
                <action method="unsetCallChild"><child>container1</child><call>ifEquals</call><if>0</if><key>alias_in_layout</key><key>options_container</key></action>
                <action method="unsetCallChild"><child>container2</child><call>ifEquals</call><if>0</if><key>alias_in_layout</key><key>options_container</key></action>
            </block>
        </reference>
        <reference name="upsell_products">
            <action method="setColumnCount"><columns>5</columns></action>
            <action method="setItemLimit"><type>upsell</type><limit>100</limit></action>
        </reference>
        <reference name="left">
            <block type="catalog/product_list_related" name="catalog.product.related" before="-" template="catalog/product/list/related.phtml"/>
            <!--added on date 21-12-11-->
            <remove name="catalog.sidebar.left.top"/> 
            <remove name="catalog.sidebar.left.bottom"/>
            <!--end-->
        </reference>
    </catalog_product_view> 
```

**更新1：**

```
<reference name="left">
            <block type="catalog/product_list_related" name="catalog.product.related" before="-" template="catalog/product/list/related.phtml"/>
            <!--added on date 21-12-11-->
            <remove name="catalog.sidebar.left.top"/> 
            <remove name="catalog.sidebar.left.bottom"/>
            <!--end-->
        </reference>
        <reference name="right">
        <block type="catalog/product_list_related" name="catalog.product.related" template="catalog/product/list/related.phtml"/>
    </reference> 
```

**更新 2：easytabs.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">

    <default>
        <reference name="head">
            <action method="addItem" ifconfig="easy_tabs/general/enabled"><type>skin_css</type><name>css/easytabs.css</name></action>
        </reference>      
    </default>

    <catalog_product_view>

        <reference name="product.info">
                <action method="unsetChild" ifconfig="easy_tabs/general/additionaltabbed"><name>additional</name></action>                    
                <action method="unsetChild" ifconfig="easy_tabs/general/upsellproductstabbed"><name>upsell_products</name></action>
                <action method="setTemplate"><template>easytabs/catalogproductview.phtml</template></action>                
        </reference>

        <reference name="right">
            <action method="unsetChild" ifconfig="easy_tabs/general/relatedtabbed"><name>catalog.product.related</name></action>
        </reference>            

        <reference name="product.info.additional">
                <action method="unsetChild" ifconfig="easy_tabs/general/tagstabbed"><name>product_tag_list</name></action>
                <block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs">
                    <action method="setTemplate" ifconfig="easy_tabs/general/enabled"><template>easytabs/tabs.phtml</template></action>

                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/upsellproductstabbed"><alias>upsell_products_tabbed</alias><title>We Also Recommend</title><block>catalog/product_list_upsell</block><template>catalog/product/list/upsell.phtml</template></action> 

                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/descriptiontabbed"><alias>description_tabbed</alias><title>Product Description</title><block>catalog/product_view_description</block><template>easytabs/description.phtml</template></action>

                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/additionaltabbed"><alias>additional_tabbed</alias><title>Additional Information</title><block>catalog/product_view_attributes</block><template>easytabs/attributes.phtml</template></action>

                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/general/relatedtabbed"><alias>related_tabbed</alias><title>Related Products</title><block>catalog/product_list_related</block><template>easytabs/catalogproductrelated.phtml</template></action>               
                    <action method="addTab" translate="title" module="tag" ifconfig="easy_tabs/general/tagstabbed"><alias>tags_tabbed</alias><title>Product Tags</title><block>tag/product_list</block><template>easytabs/catalogproducttags.phtml</template></action>
                    <action method="addTab" translate="title" module="review" ifconfig="easy_tabs/general/reviewtabbed"><alias>review_tabbed</alias><title>Product's Review</title><block>review/product_view_list</block><template>easytabs/catalogproductreview.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab"><alias>custom</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab1"><alias>custom1</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom1.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab2"><alias>custom2</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom2.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab3"><alias>custom3</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom3.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/custom/customtab4"><alias>custom4</alias><title>Custom tab</title><block>catalog/product_view</block><template>easytabs/catalogproductcustom4.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms"><alias>cms</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms1"><alias>cms1</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms1.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms2"><alias>cms2</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms2.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms3"><alias>cms3</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms3.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog" ifconfig="easy_tabs/customcms/tabcms4"><alias>cms4</alias><title>CMS tab</title><block>core/template</block><template>easytabs/catalogproductcms4.phtml</template></action>
                </block>
        </reference>

    </catalog_product_view>
</layout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:07:23.153

在最后一行上方添加此块， `</catalog_product_view>`与`<reference name="left">`

```
<reference name="right">
     <block type="catalog/product_list_related" name="catalog.product.related" before="-" template="catalog/product/list/related.phtml"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:29:23.270

这就是你所需要的...

```
<catalog_product_view translate="label">

    <!-- Other layout xml here -->

    <reference name="right">
        <block type="catalog/product_list_related" name="catalog.product.right.related" template="catalog/product/list/related.phtml"/>
    </reference>

    <!-- Other layout xml here -->

</catalog_product_view> 
```

如果需要，您可以使用“之前”和“之后”属性将其放置在相对于其他块的右侧列中。

# javascript - 为什么没有收到从（之前）卸载事件发送的 POST 数据？

> ID：10938022
> 
> 赞同：0
> 
> 时间：2012-06-07T18:49:49.013
> 
> 标签：javascript, jquery, django, jquery-events

我正在进入 Web 开发的第二天，所以要温柔！

我正在尝试编写一个小网络应用程序，它允许用户访问一个站点并单击/点击屏幕以将一个点指向另一个屏幕。为此，我设置了一个 Django 服务器来处理数据，我使用 Javascript 来获取点击/点击位置，通过 POST 数据将其发送到服务器，然后使用 Processing.js 绘制它（我的老板很大关于处理，这实际上是对通过手机等在大屏幕上处理的交互性的测试）。

我不是网络开发人员，所以即使是这个简单的任务也很有挑战性。直到此时我都感觉很舒服。当用户加载交互网页时，他们会被分配给应用程序的任意用户 ID，这让他们可以控制他们的特定点。我希望在用户离开页面时删除该点。我计划稍后实施备份超时，但我希望首先进行即时删除以获得最佳体验，最接近预期。（我认为我们的最终目标是有一个漂亮的大屏幕运行一个简单的游戏，人们可以走过，使用屏幕上的二维码启动交互站点，然后加入游戏。当他们感到无聊时，他们只需关闭网站并从游戏​​屏幕中删除它们，简单）。

在我的交互页面中，我有这段代码（对糟糕的变量名表示歉意）：

```
<body onload="load()" onbeforeunload="unload()"> 
<canvas id="canv" width="1000" height="1000"/>

<script type="text/jscript">
    var userid;

    function load() {       
        userid = Math.floor(Math.random()*1000) //this will of course be changed
        var canv = document.getElementById('canv');
        canv.addEventListener('click', onCanvasClick);
        //$(window).unload(unload());
    }

    function onCanvasClick(event) {
        var cx, cy;
        var canvv = document.getElementById('canv');

        canoffset = $(canvv).offset();
        cx = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft - Math.floor(canoffset.left);
        cy = event.clientY + document.body.scrollTop + document.documentElement.scrollTop - Math.floor(canoffset.top) + 1;

        cx = (((cx - 500) / 500) * 3);
        cy = (((cy - 500) / 500) * 3);

        var data = {
            x: cx,
            y: cy,
            id : userid,
            deleteMe : 0
        };
        $.post("", data);
    }

    function unload() {
    //send remove code for this user
        var data = {
            x: 0,
            y: 0,
            id: userid,
            deleteMe : 1
        };
        $.post("", data);
        //alert("test");
    }
</script> 
```

这个 POST 数据应该被发送到 Django 服务器。从`onCanvasClick`函数发送的 POST 被成功接收，并且我看到点按计划移动。`unload()`但是，无论我是否使用`beforeunload`or`unload`事件（或者，如您所见注释掉的 JQuery `unload`） ，都不会收到从函数发送的 POST 。但是，注释掉的警报仍然会触发。

我在这里想念什么？是否有一种行之有效的方法来告诉服务器用户已离开页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:55:23.473

没有 100% 可靠的方法来判断某人何时离开了您的页面。您可以做的最好的事情是使用一些 AJAX 轮询并假设一旦轮询停止用户已经离开，或者可能使用 Web 套接字（不是普遍可用的）来保持连接打开。

例如 - 我正在使用平板电脑浏览您的网站，但我失去了互联网连接。`beforeunload`在那种情况下不会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:01:10.543

基本上你有一个浏览器通常会获胜的竞争条件。

现代浏览器试图尽可能快地加速页面。人们讨厌等待下一页加载，所以他们所做的就是杀死在卸载/卸载前打开的任何请求。较旧的浏览器会等待 for 循环，但他们杀死了它。

# wpf - Texbox 到数字绑定

> ID：10938030
> 
> 赞同：0
> 
> 时间：2012-06-07T18:50:09.767
> 
> 标签：wpf, data-binding, mvvm, wpf-controls, wpftoolkit

我正在使用[WatermarkTextBox](http://wpftoolkit.codeplex.com/wikipage?title=WatermarkTextBox&referringTitle=Home)并将其值绑定到 View Model 整数属性。问题是：我需要如果没有设置值，那么[WatermarkTextBox](http://wpftoolkit.codeplex.com/wikipage?title=WatermarkTextBox&referringTitle=Home)必须显示水印，但是，考虑到它在没有设置值时绑定到一个整数（比如显示视图时），那么它显示 0。

我不能使用`OneWayToSource`，因为我需要两种方式绑定。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:52:01.683

您可以使用转换器。如果值为 0，则转换器返回一个空字符串，使水印可见。如果不为 0，则返回数字的字符串表示形式。

```
public class Int32ToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        int v = (int)value;
        if (v == 0)
            return string.Empty;
        return v.ToString();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        string s = (string)value;
        if (string.IsNullOrEmpty(s))
            return 0;
        return int.Parse(s);
    }
} 
```

另一种选择是将属性更改为`int?`( `Nullable<int>`)，并将其初始值设置为 null。

# msp430 - MSP430F5438A + CC2564蓝牙模块上的BTstack

> ID：10938035
> 
> 赞同：2
> 
> 时间：2012-06-07T18:50:22.860
> 
> 标签：msp430

首先，是否有任何关于 btstack API 的好的文档。我正在尝试学习如何充分使用 btstack 、发送和接收数据、查找范围内的设备并启动连接。我正在为 MSP-430F5438A + CC2564 蓝牙模块实现此功能。

[http://code.google.com/p/btstack/wiki/MSP430GettingStarted](http://code.google.com/p/btstack/wiki/MSP430GettingStarted)

这个网站有一些例子，但我还是很困惑，我需要有人帮我分解一下。有没有我可以开始的模板。任何事情都会有所帮助。如果有关于如何连接设备和交换数据包的分步参考，那就太好了。谢谢是提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:12:38.310

在常规的“GettingStarted”页面中对数据包处理程序中发生的事情进行了一些解释，这是您基本上放置所有新代码的主要部分。

# c# - c#.net中的tabindex问题

> ID：10938040
> 
> 赞同：2
> 
> 时间：2012-06-07T18:50:45.990
> 
> 标签：c#

如果你看这张图片：

![.net c# 对话框](../Images/ae88f609f20f3793919633632d2d6dba.png)

蓝色数字代表控件的选项卡索引属性。我的问题是，当我将焦点放在第一个文本框控件上并开始点击 TAB 时，它从索引 0 到 1 到 5 并跳过了组框中的三个控件。

如何设置它，以便当我将焦点放在第一个文本框（索引 0）上并继续 TAB 时，它将直接从控件 0 循环到 5，而不会跳过组框中的控件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:20:07.557

在 Visual Studio 中打开您的 Windows 窗体设计器。转到菜单“查看”，然后使用“标签顺序”。
在这里，您将看到树状控制顺序。
只需按您想要的顺序单击控件即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T16:02:09.877

我遇到了同样的问题，我发现除了设置标签顺序/标签索引之外，我还需要确定 TabStop = true。此问题（错误）导致我的控件组被跳过。

# java - lucene 中的 AND OR 搜索语法

> ID：10938046
> 
> 赞同：0
> 
> 时间：2012-06-07T18:50:49.580
> 
> 标签：java, netbeans, lucene

我正在使用 Lucene。我有三列是

```
DocId - TermID - TermFrequency
 1    -   004  -      667
 2    -   005  -      558 
```

如果我使用 mysql 则查询 AND 操作是

```
SELECT * FROM table_name WHERE DocId='1' AND TermId='004' 
```

我如何使用 JAVA 在 Lucene 中编写上述查询。对于我正在使用的一列搜索代码是

```
Query query = new QueryParser(Version.LUCENE_35,"TermID", analyzer).parse("004"); 
```

如何在 QueryParser 中使用 AND 操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:55:59.123

术语可以用`AND`关键字分组，如下所示：

```
Query query = new QueryParser(Version.LUCENE_35,"TermID", analyzer).parse("004 AND DocId:1"); 
```

请注意，您不需要为您的`"004"`术语限定该字段，因为您已设置`"TermId"`为默认字段。

您应该阅读有关查询语法[的手册](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/queryparsersyntax.html)……它很有表现力。

# java - 如何仅将 EtchedBorder 应用于边框的特定一侧？

> ID：10938050
> 
> 赞同：4
> 
> 时间：2012-06-07T18:51:20.437
> 
> 标签：java, swing, border

我有一个 JPanel，我想将 EtchedBorder.Lowered 添加到仅左边框。我知道 MatteBorders 可以做到这一点，但我想知道是否有办法用 EtchedBorder 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:10:19.070

*   使用[JSeparator](http://docs.oracle.com/javase/tutorial/uiswing/components/separator.html)而不是 EtchedBorder.Lowered，

*   但是 JSeparator 默认只有一行，但是你可以构建有趣的边框

![在此处输入图像描述](../Images/09411a372699df0823119389d119c934.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.SwingUtilities;

public class NestedLayout {

    private JFrame frame = new JFrame();
    private JPanel leftPanel = new JPanel();

    public NestedLayout() {
        leftPanel.setLayout(new BorderLayout());
        leftPanel.setBorder(BorderFactory.createEmptyBorder(
                10, //top
                10, //left
                10, //bottom
                10));   //right
        leftPanel.add(new JSeparator(JSeparator.VERTICAL), BorderLayout.CENTER);
        leftPanel.setPreferredSize(new Dimension(40, 40));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(leftPanel, BorderLayout.WEST);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new NestedLayout();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T20:10:45.017

您可以连接两个面板并在每个面板上添加一个“相反”的无光泽边框以重新创建蚀刻效果：

```
import javax.swing.*;
import java.awt.*;

public class MainFrame extends JFrame {

    public MainFrame() {
        setLayout(new BorderLayout());

        JPanel left = new JPanel();
        left.setPreferredSize(new Dimension(200, 400));
        left.setBorder(BorderFactory.createMatteBorder(0, 0, 0, 1, Color.GRAY));
        add(left, BorderLayout.WEST);

        JPanel center = new JPanel();
        center.setPreferredSize(new Dimension(200, 400));
        center.setBorder(BorderFactory.createMatteBorder(0, 1, 0, 0, Color.WHITE));
        add(center, BorderLayout.CENTER);

        setVisible(true);
        pack();
    }

    public static void main(String[] args) {
        new MainFrame();
    }
} 
```

![在此处输入图像描述](../Images/475395836ef93b03ad1421502ab5e0de.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T01:13:59.510

您可以通过子类化 EtchedBorder 或 AbstractBorder 轻松创建自己的边框类。

此代码将完全按照您的要求执行：仅在一侧绘制的 EtchedBorder。但是看起来不太好。EtchedBorder 只是在每一侧绘制两条线（一条深色，一条浅色）。它从线条在拐角处相遇的方式获得了 3 维外观。如果没有绘制完整的框，它看起来就不是 3 维的。

```
setBorder(new EtchedBorder() {
  public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {
    g.setColor(getShadowColor(c));
    g.drawLine(x, y + height - 2, x, y);

    g.setColor(getHighlightColor(c));
    g.drawLine(x+1, y + height - 3, x+1, y + 1);
  }
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-15T23:40:07.167

扩展 Yanflea 给出的答案，您可以从两个不同的面板创建“对立面”以复制蚀刻边框的外观。

您可以使用以下方法在一个面板上创建它`CompoundBorder`：

```
 CompoundBorder border = BorderFactory.createCompoundBorder(
          BorderFactory.createMatteBorder(0, 0, 1, 0, Color.WHITE),
          BorderFactory.createMatteBorder(0, 0, 1, 0, Color.GRAY)
          ); // This would create A line on the bottom 
```

这样做的好处是你也可以做两个边，看起来像这样：（请注意，这只是一个由九个面板组成的网格，只有中间有边框，边框也比 1 厚*见下面的代码，我在面板上使用 setBackground 来显示每个面板的位置*）

![在此处输入图像描述](../Images/bbdc80b3561ad7560e0cee52746421a7.png)！

```
import javax.swing.*;
import java.awt.*;

public class Test
{
    public static void main(String[] args) 
    { 
        JFrame f = new JFrame("A Demo");
        f.setLayout(new GridLayout(3,3));
        f.setSize(400,400);
        JPanel j1 = new JPanel();       //j1.setBackground(new Color(255,0,0));
        JPanel j2 = new JPanel();       //j2.setBackground(new Color(200,0,0));
        JPanel j3 = new JPanel();       //j3.setBackground(new Color(150,0,0));
        JPanel j4 = new JPanel();       //j4.setBackground(new Color(100,0,0));
        JPanel j5 = new JPanel();       //j5.setBackground(new Color(0,255,0));
        JPanel j6 = new JPanel();       //j6.setBackground(new Color(0,200,0));
        JPanel j7 = new JPanel();       //j7.setBackground(new Color(50,0,0));
        JPanel j8 = new JPanel();       //j8.setBackground(new Color(0,150,0));
        JPanel j9 = new JPanel();       //j9.setBackground(new Color(0,100,0));
        j5.setBorder(BorderFactory.createCompoundBorder(
              BorderFactory.createMatteBorder(0, 0, 2, 2, Color.WHITE),
              BorderFactory.createMatteBorder(0, 0, 2, 2, Color.GRAY)
              ));   
        f.add(j1);
        f.add(j2);
        f.add(j3);
        f.add(j4);
        f.add(j5);
        f.add(j6);
        f.add(j7);
        f.add(j8);
        f.add(j9);  
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);   
        f.setVisible(true);
    }
} 
```

# flash - 当我尝试更新我的 FDT 时，我看到了错误。为什么？

> ID：10938052
> 
> 赞同：0
> 
> 时间：2012-06-07T18:51:23.623
> 
> 标签：flash, fdt

见附图。为什么会有这么多错误？我想更新 FDT 但不确定如何/为什么。

![在此处输入图像描述](../Images/2007c9836fe7c3d21ad0f67b14bf61cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:51:24.853

***更新**：[您可能在使用 Java 时遇到问题](http://bugs.powerflasher.com/jira/browse/FDT-2800)。

***更新 2**：FDT 5.6 现在默认禁用所有额外的下载站点。

## 一切都很好。这些是与 Eclipse 相关的错误，而不是 FDT。

请注意随附的屏幕截图中 FDT 更新如何在描述中包含“FDT”。只有带有“FDT”的项目需要更新。

![在此处输入图像描述](../Images/4ca6c9a39285609a32d9541af4bfd6ed.png)

如果要防止所有可能的错误，与 FDT 无关，则删除所有与 FDT 5 无关的更新站点 (fdt.powerflasher.com/update/fdt5)。

*正如其他人指出的那样，这将阻止所有 Eclipse 更新，但这没关系。FDT 针对特定的 Eclipse 版本进行了测试：它附带的版本通常是最新的。如果您确实更新了 Eclipse，则无法保证 FDT 的稳定性，因为您将使用未经测试的版本（Eclipse）。*

![在此处输入图像描述](../Images/883152abd8e72310e66fdafc42a72c80.png)

# php - 在php中获取url响应的最佳方法是什么

> ID：10938056
> 
> 赞同：0
> 
> 时间：2012-06-07T18:51:29.207
> 
> 标签：php, url

假设我想得到这个 url 的响应：

[http://www.google.com/ig/calculator?hl=en&q=100USD%3D%3FEUR](http://www.google.com/ig/calculator?hl=en&q=100USD%3D%3FEUR)

这是：

{lhs: "100 美元",rhs: "79.3839803 欧元",error: "",icc: true}

然后检索 rhs 值。

我怎样才能在 PHP 中轻松实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:07:49.057

它没有返回有效的 JSON，所以简单的方法是修复字符串（使其成为合法的 JSON）并对其进行解码。

就像是：

```
<?php
    $output = file_get_contents('http://www.google.com/ig/calculator?hl=en&q=100USD%3D%3FEUR');
    $output = str_replace('rhs','"rhs"',$output);
    $output = str_replace('lhs','"lhs"',$output);
    $output = str_replace('error','"error"',$output);
    $output = str_replace('icc','"icc"',$output);

    $json = json_decode($output);
    $rhs = $json->rhs;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:52:40.543

```
echo file_get_contents('http://www.google.com/ig/calculator?hl=en&q=100USD%3D%3FEUR');
// {lhs: "100 U.S. dollars",rhs: "79.3839803 Euros",error: "",icc: true} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:59:51.107

```
<?php
    $resp=file_get_contents('http://www.google.com/ig/calculator?hl=en&q=100USD%3D%3FEUR');
    $pos=strpos($resp,'rhs:')+6;
    $pos2=strpos($resp,'"',$pos);
    $euros=substr($resp,$pos,$pos2-$pos);
?> 
```

# c# - 在 Windows 服务中提示输入密码

> ID：10938061
> 
> 赞同：0
> 
> 时间：2012-06-07T18:51:53.913
> 
> 标签：c#, .net, windows, windows-services

当有人试图停止 Windows 服务时，我如何提示输入密码和用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:16:24.550

这是不可能的。

服务旨在在用户体验之外运行，并且不处理 GUI 交互。这是由操作系统决定允许或禁止用户停止服务的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:21:54.343

它不能直接从服务中完成。但是，如果服务设置为与桌面交互，则该服务可以由另一个应用程序管理。因此，您可以使用 GUI 来创建第二个应用程序来监控服务。当服务“停止”事件触发时，服务可以在共享状态文件中设置一些值，并等待监控应用程序在状态文件中写入确认值。也许不是你正在寻找的东西，但我认为你可以获得你想要的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:18:35.853

通常，没有理由这样做。默认情况下，只有管理员可以停止服务，如果服务可以完全停止，那么向管理员询问密码是没有意义的：他们是管理员，所以根据定义，他们有权做任何事情.

一种有意义的情况是，如果您希望普通用户在知道密码的情况下能够停止服务。这样，您可以让某人停止服务，而无需授予他们对计算机的管理权限。（即便如此，在大多数情况下，更改服务权限以允许相关用户有权停止服务会更简单；但也许，例如，您希望用户必须致电帮助台获得密码。）

进行这项工作的秘诀在于，服务有权以任何理由自行停止，而无需收到操作系统的停止请求。因此，您可以编写一个程序，如果用户想停止服务，他们可以运行该程序。该程序接受密码并通过某种形式的 IPC（例如命名管道）将其发送到服务。如果密码正确，服务将停止。

您还可以配置服务，使其不接受停止请求，在这种情况下，管理员还需要密码才能很好地停止服务。但这不会阻止他们通过终止服务进程或卸载服务并重新启动计算机来停止服务。

# python - Python：解释器返回对象/函数而不是评估

> ID：10938066
> 
> 赞同：4
> 
> 时间：2012-06-07T18:52:12.700
> 
> 标签：python

我正在使用 python-3.2.3 64bit 并且我看到一些奇怪的行为。

例如使用解释器时：输入

```
>>> range(10) 
```

结果输出

```
range(0, 10) 
```

什么时候应该打印

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

类似输入

```
>>> l = range(10)
>>> f = filter( lambda x: x<2, l)
>>> f 
```

导致输出

```
<filter object at 0x00000000033481D0> 
```

但应该是

```
[0, 1] 
```

显然我不能对那个对象做任何事情：

```
>>>> len(f)
Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    len(f)
TypeError: object of type 'filter' has no len() 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-07T18:55:25.317

没有什么是错的。`range()`是 Py3.x 像生成器一样一次生成项目 1 ，这与 Py2.x 中的行为不同，它是立即生成一个列表，然后将其返回给您。将您的呼叫包裹在`range(10)`呼叫中`list()`，您将得到您所期望的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T18:57:49.500

这些函数返回迭代器对象。`list(range(0, 10))`您可以使用或将它们转换为列表`list(f)`。您还可以遍历结果，例如：

```
for i in range(0, 10):
    print(i) 
```

最后，您可以使用`next`函数获取下一项：

```
l = range(0, 10)
l1 = next(l)
l2 = next(l) 
```

返回迭代器而不是列表允许对项目执行复杂的操作，而无需将所有项目加载到内存中。例如，您可以遍历一个巨大的文件并逐个字符地对其进行转换，而无需将整个文件加载到内存中。

# c# - 从 ID（或名称）创建对象

> ID：10938067
> 
> 赞同：3
> 
> 时间：2012-06-07T18:52:27.500
> 
> 标签：c#, .net

我有一个许多子类继承的抽象类：

```
 public abstract class CrawlerBase
    {
        public abstract void Process(string url);
    } 
```

我正在处理这个循环：

```
foreach (var item in result)
                {
                    object crawler = null;

                    switch (item.Type)
                    {
                        case "Trials":
                            var t = new Trials(); 
                            ct.Process(item.URL); //repetitive code.  
                            break;

                        case "Coverage":
                            var c = new Coverage();
                            c.Process(item.URL); //repetitive code.
                            break;
                        default:
                            break;
                    }

                   // crawler.Process(item.URL);
                } 
```

现在 item.type 字符串将取决于需要实例化的子类。由于我的所有子类都继承了我的基类，因此在每个 case 语句中调用 .Process() 会非常重复。我想将对象“爬虫”转换为正在实例化的子类，并在 switch 语句的末尾调用 crawler.Process()，如注释所示。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:58:04.307

这不起作用吗？

```
foreach (var item in result)
{
    CrawlerBase crawler = null;

    switch (item.Type)
    {
        case "Trials":
            crawler = new Trials(); 
            break;
        case "Coverage":
            crawler = new Coverage();
            break;
        default:
            break;
    }

    if(crawler != null)
        crawler.Process(item.URL);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T18:59:02.480

用工厂方法制作字典：

```
var factories = new Dictionary<string, Func<CrawlerBase>>
{
  {"Trials", () => new Trials()},
  {"Coverage", () => new Coverage()},
// and so on
} 
```

...并扔掉`switch`：

```
foreach (var item in result)
{
  factories[item.Type]().Process(item.URL);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T18:59:23.680

有很多方法可以从字符串创建类型。反射可以是其中之一，它很**慢**（但如果您正在处理 Web 请求，您可能不会关心这个），但您不需要保留一长串硬编码字符串和/或有一个丑陋的长 switch/case 语句。

如果速度不是问题，那么让我们从简单的事情开始：

```
CrawlerBase crawler = (CrawlerBase)Activator.CreateInstance(
    Type.GetType("MyNamespace." + item.Type));

crawler.Process(item.URL); 
```

使用反射，您不需要 switch/case，并且无论您有多少类型，您都不会更改工厂代码以适应`CrawlerBase`. 只需添加一个新的实现 et-voila。

这个怎么运作？`Type`那么你可以从它的定义（使用）创建一个类的实例，[`Activator.CreateInstance`](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)所以*问题*是要获得`Type`. `Type`类提供了一个静态[`GetType`](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)方法，可用于`Type`从其（完整）名称创建一个。在这种情况下，我们提供了一个命名空间，它必须更改为真正的命名空间，如果您将所有类都保留在同一个命名空间中，您可以编写如下内容：

```
string rootNamespace = typeof(CrawlerBase).Namespace; 
```

然后是化妆版：

```
CrawlerBase crawler = (CrawlerBase)Activator.CreateInstance(
    Type.GetType(rootNamespace + "." + item.Type));

crawler.Process(item.URL); 
```

## 改进 1

这是一个非常幼稚的实现，更好的版本应该缓存`Type`在字典中：

```
private static Dictionary<string, Type> _knownTypes =
    new Dictionary<string, Type>();

private static GetType(string name)
{
    string fullName = typeof(CrawlerBase).Namespace
        + "." + name;

    if (_knownTypes.ContainsKey(fullName))
        return _knownTypes[fullName];

    Type type = Type.GetType(fullName);
    _knownTypes.Add(fullName, type);

    return type;
} 
```

现在你没事了，你不需要管理一个（可能）很长的字符串列表，如果你添加/删除/更改类型并添加一个新的 Crawler，你不需要更改无穷无尽的开关/案例。要做的是派生一个新的类。请注意，这个函数不是线程安全的，所以如果你有多个线程，你必须添加一个锁来保护字典访问（或者一个`ReadWriterLockSlim`，这取决于你的使用模式）。

## 改进 2

下一步是什么？如果您的要求更严格（例如关于安全性），您可能需要添加更多内容（我认为这不是您的情况，因此您甚至可能不需要类型字典）。还要做什么？首先，您可以检查创建的类型是否派生自`CrawlerBase`（使用`IsAssignableFrom`and 来提供更有意义的异常而不是`InvalidCastException`），其次您可以使用属性装饰您的类。只会创建具有该属性的类（因此您可以保留*私有*实现，即使标记为公共也无法从您的用户创建）。不仅如此，但一个简单的实现通常足以解决这类问题（当输入不是来自用户而是来自健壮的配置文件或来自程序本身时）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T18:59:06.490

你不能这样做吗？

```
 {
   CrawlerBase crawler = null;

   switch (item.Type)
   {
        case "Trials":
            crawler = new Trials();   
            break;

        case "Coverage":
            crawler = new Coverage();
            break;
        default:
            break;
    }
   crawler.Process(item.URL); 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T19:06:06.600

正如 Redi 指出的那样，您确实在任何实例上调用 call Process，因为它们都派生自同一个基类。你的 switch case 中仍然有一些重复的代码，如果你从 switch (if/else) 移到映射构造，可以简化这些代码。

```
Dictionary<string, Type> Types = new Dictionary<string, Type>
{
    { "Trial", typeof(Trials) },
    { "Coverage", typeof(Coverage) },
};

void Crawl()
{
    string itemType = "Trial";
    CrawlerBase crawler = (CrawlerBase)Activator.CreateInstance(Types[itemType]);
    crawler.Process("url");
} 
```

如果您将工厂方法作为值放入字典中，您也可以使用 Dennis 之类的委托来执行此操作。

# python - python sqlalchemy 选择别名

> ID：10938070
> 
> 赞同：0
> 
> 时间：2012-06-07T18:52:39.970
> 
> 标签：python, sqlalchemy

在 sqlalchemy 声明性基础中，我想从选择中定义一个类。`sqlalchemy.select()`也许我很困惑和之间有什么区别`session.query()`......如果有人可以像我 3 岁（具有 Python 知识）那样解释我的话。

我对简单的连接没有任何问题，比如

```
class ViewA(Base):
    __select__ = (
            sqlalchemy.select([C1.attr1, C2.attr2, ...],
                from_obj=C1.__table__.join(C2.__table__)
                )
            .where(...)
            )
    __table__ = __select__.alias('view_A') 
```

我已经在项目中使用了它，它可以按我的预期工作。现在，我正在尝试创建另一个视图，但是使用自联接，所以我使用`orm.aliased()`了但它不起作用，因为它说我有

```
sqlalchemy.exc.ProgrammingError:
(ProgrammingError) (1066, "Not unique table/alias: 'history'", None)
```

这是我尝试创建课程的方式：

```
class ViewSummary(Base):
    _H1 = orm.aliased(C1, name='c1')
    _H2 = orm.aliased(C1, name='c2')

    __select__ = (
            sqlalchemy.select([_H1.attr1, _H1.attr2, ...],
                from_obj=(
                    _H1.__table__
                    .outerjoin(_H2.__table__, _H1.id == _H2.id)
                    .join(AnotherClass, _H1.id == AnotherClass.id)
                )
            .where(_H2.field is None)
            )
    __table__ = __select__.alias('view_summary') 
```

我误用了`orm.aliased`吗？

谢谢你的帮助，D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:15:57.610

`aliased`是 ORM 的一部分，但`select`不是 - 它是生成 SQL 的工具，但不会将对象映射到行。ORM 的一些构造不能与`select`其他核心构造一起使用。

`_H1 = C1.__table__.alias()`您可以改为尝试（`aliased`是 ORM 的等价物`alias`）

# android - 为什么会崩溃？Android AdView 问题？

> ID：10938073
> 
> 赞同：0
> 
> 时间：2012-06-07T18:52:57.953
> 
> 标签：android, logging, admob, cat

我正在尝试在我的游戏中设置广告，但我遇到了问题。它似乎要崩溃了。我在下面包含了 logcat，它似乎与广告有关。

```
06-07 18:49:54.594: E/dalvikvm(308): Could not find class 'com.google.ads.AdView', referenced from method com.blockyblaine.bobhoil.BlockyBlaine.onCreate
06-07 18:49:54.594: W/dalvikvm(308): VFY: unable to resolve check-cast 17 (Lcom/google/ads/AdView;) in Lcom/blockyblaine/bobhoil/BlockyBlaine;
06-07 18:49:54.603: D/dalvikvm(308): VFY: replacing opcode 0x1f at 0x0011
06-07 18:49:54.603: D/dalvikvm(308): VFY: dead code 0x0013-0069 in Lcom/blockyblaine/bobhoil/BlockyBlaine;.onCreate (Landroid/os/Bundle;)V
06-07 18:49:54.933: D/AndroidRuntime(308): Shutting down VM
06-07 18:49:54.933: W/dalvikvm(308): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-07 18:49:55.014: E/AndroidRuntime(308): FATAL EXCEPTION: main
06-07 18:49:55.014: E/AndroidRuntime(308): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.blockyblaine.bobhoil/com.blockyblaine.bobhoil.BlockyBlaine}: android.view.InflateException: Binary XML file line #8: Error inflating class com.google.ads.AdView
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.os.Looper.loop(Looper.java:123)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-07 18:49:55.014: E/AndroidRuntime(308):  at java.lang.reflect.Method.invokeNative(Native Method)
06-07 18:49:55.014: E/AndroidRuntime(308):  at java.lang.reflect.Method.invoke(Method.java:521)
06-07 18:49:55.014: E/AndroidRuntime(308):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-07 18:49:55.014: E/AndroidRuntime(308):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-07 18:49:55.014: E/AndroidRuntime(308):  at dalvik.system.NativeStart.main(Native Method)
06-07 18:49:55.014: E/AndroidRuntime(308): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class com.google.ads.AdView
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
06-07 18:49:55.014: E/AndroidRuntime(308):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.app.Activity.setContentView(Activity.java:1647)
06-07 18:49:55.014: E/AndroidRuntime(308):  at com.blockyblaine.bobhoil.BlockyBlaine.onCreate(BlockyBlaine.java:27)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-07 18:49:55.014: E/AndroidRuntime(308):  ... 11 more
06-07 18:49:55.014: E/AndroidRuntime(308): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView in loader dalvik.system.PathClassLoader[/data/app/com.blockyblaine.bobhoil-2.apk]
06-07 18:49:55.014: E/AndroidRuntime(308):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
06-07 18:49:55.014: E/AndroidRuntime(308):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
06-07 18:49:55.014: E/AndroidRuntime(308):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
06-07 18:49:55.014: E/AndroidRuntime(308):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
06-07 18:49:55.014: E/AndroidRuntime(308):  ... 20 more
06-07 18:50:01.593: I/Process(308): Sending signal. PID: 308 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:19:41.507

[此链接](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals#incorporating)将带您访问 admob 开发人员文档。您需要确保按照说明将 admob JAR 包含在您的项目中。

我发现了一些与其他 google api 相关的其他提及。那里的问题（给出类似的 logcat）是错过了这一步：

`2\. Declare com.google.ads.AdActivity in AndroidManifest.xml.`

`<activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>`

# asp.net - Gridview updatepanel排序对象引用未设置为对象的实例

> ID：10938075
> 
> 赞同：-1
> 
> 时间：2012-06-07T18:53:18.190
> 
> 标签：asp.net, updatepanel

我正在尝试在更新面板中对网格视图进行排序。它编译，但我得到一个`Object reverence not set to an instance of an object`错误。我正在尝试遵循本[指南](http://www.ezineasp.net/post/ASP-Net-2-0-Gridview-Sorting-Using-C-sharp.aspx)，但在 vb 中

默认.aspx

```
 <ajx:UpdatePanel ID="ajaxpanel" runat="server">   
    <ContentTemplate>         
                <asp:GridView ID="gvProgramDetails" runat="server" AutoGenerateColumns="False" 
                    CssClass="gridview" DataKeyNames="ProgramNumber" 
             AllowPaging="True" PageSize="2" AllowSorting="True" OnSorting="gvProgramDetails_Sorting">
                    <Columns>
                        <asp:CommandField ControlStyle-CssClass="button delete" ShowDeleteButton="True">
                            <ControlStyle CssClass="button delete" />
                        </asp:CommandField>
                        <asp:CommandField ControlStyle-CssClass="button save" ShowEditButton="True">
                            <ControlStyle CssClass="button save" />
                        </asp:CommandField>
                        <asp:BoundField DataField="ProgramNumber" HeaderText="ProgramNumber" 
                            InsertVisible="False" ReadOnly="True" SortExpression="ProgramNumber" />
                        <asp:BoundField DataField="ProgramName" HeaderText="ProgramName" 
                            SortExpression="ProgramName" />
                        <asp:BoundField DataField="ProgramStatus" HeaderText="ProgramStatus" 
                            SortExpression="ProgramStatus" />
                        <asp:BoundField DataField="RecordType" HeaderText="RecordType" 
                            SortExpression="RecordType" />
                        <asp:BoundField DataField="ProgramInformation" HeaderText="ProgramInformation" 
                            SortExpression="ProgramInformation" />
                    </Columns>
                </asp:GridView>
                </ContentTemplate> 
```

默认.aspx.vb

```
Imports System.Web.Services
Partial Class processes_ProgramTrack_Default
Public Property SortOrder() As String
        Get
            If (ViewState("SortOrder").ToString = "desc") Then
                ViewState("SortOrder") = "asc;"
            Else
                ViewState("SortOrder") = "desc"
            End If
            Return ViewState("SortOrder").ToString()
        End Get
        Set(ByVal value As String)
            ViewState("SortOrder") = value
        End Set
    End Property
    Public Sub bindGridView(Optional ByVal sortExp As String = "", Optional ByVal sortDir As String = "")
        Dim connstr As String = ConfigurationManager.ConnectionStrings("WEBConnectionString").ConnectionString
        Dim conn As New SqlConnection(connstr)
        If conn.State = ConnectionState.Closed Then
            conn.Open()
        End If
        Dim myDataView As New DataView()
        Dim mysqlCommand As New SqlCommand("SELECT tblPrgTrackPrograms.ProgramNumber, tblPrgTrackPrograms.ProgramName, tblPrgTrackPrograms.ProgramStatus, tblPrgTrackProgramDocumentation.RecordType, tblPrgTrackProgramDocumentation.ProgramInformation FROM tblPrgTrackPrograms INNER JOIN tblPrgTrackProgramDocumentation ON tblPrgTrackPrograms.ProgramNumber = tblPrgTrackProgramDocumentation.ProgramNumber")
        Dim myDataSet As New DataSet()
        Dim mySQLAdapter As New SqlDataAdapter(mysqlCommand)
        mySQLAdapter.SelectCommand.Connection = conn

        mySQLAdapter.Fill(myDataSet)
        myDataView = myDataSet.Tables(0).DefaultView
        If sortExp <> String.Empty Then

            myDataView.Sort = String.Format("{0}{1}", sortExp, sortDir)
        End If
        gvProgramDetails.DataSource = myDataView
        gvProgramDetails.DataBind()
    End Sub

    Protected Sub gvProgramDetails_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles gvProgramDetails.Load
        bindGridView()
    End Sub
    Protected Sub gvProgramDetails_PageIndexChanging(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewPageEventArgs) Handles gvProgramDetails.PageIndexChanging
        gvProgramDetails.PageIndex = e.NewPageIndex
        bindGridView()
    End Sub

    Protected Sub gvProgramDetails_RowDeleting(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewDeleteEventArgs) Handles gvProgramDetails.RowDeleting

    End Sub

    Protected Sub gvProgramDetails_Sorting(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewSortEventArgs) Handles gvProgramDetails.Sorting
        SortOrder = ViewState("SortOrder").ToString
        bindGridView(e.SortExpression, SortOrder)
    End Sub

End Class 
```

我收到错误消息作为弹出消息框。我认为正在发生的事情，SortOrder 没有被分配一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:33:39.823

`ViewState("SortOrder")`在尝试调用 ToString 之前，您需要确保其中有一个值。否则，它将抛出该异常（如您所见），因为您无法`ToString`在 null 上调用该方法。

本质上，您需要将对该 ViewState 变量的引用包装在“ `If (ViewState("SortOrder") IsNot Nothing Then`”块中，并可能在“”部分提供特殊处理`Else`（如果需要）。

你的财产是这样的：

```
Public Property SortOrder() As String
    Get
        If (ViewState("SortOrder") IsNot Nothing Then
            If (ViewState("SortOrder").ToString = "desc") Then
                ViewState("SortOrder") = "asc;"
            Else
                ViewState("SortOrder") = "desc"
            End If
        End If
        Return ViewState("SortOrder").ToString()
    End Get
    Set(ByVal value As String)
        ViewState("SortOrder") = value
    End Set
End Property 
```

然后为您的排序事件做同样的事情：

```
Protected Sub gvProgramDetails_Sorting(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewSortEventArgs) Handles gvProgramDetails.Sorting
    If (ViewState("SortOrder") IsNot Nothing Then
        SortOrder = ViewState("SortOrder").ToString
        bindGridView(e.SortExpression, SortOrder)
    End If
End Sub 
```

注意：鉴于您迄今为止提供的信息，这是我对您问题的最佳猜测。如果您提供引发错误的行，我很乐意再看看。

# java - 我可以请求/过滤 twitter 流 api 以仅返回带有地理标签的推文吗？

> ID：10938076
> 
> 赞同：4
> 
> 时间：2012-06-07T18:53:23.730
> 
> 标签：java, twitter, twitter4j

我正在使用 twitter4j 库来访问公共 twitter 流。我正在尝试制作一个涉及地理标记推文的项目，我需要收集大量推文进行测试。

现在我正在从 twitter 获取未经过滤的流，并且只保存带有地理标签的推文。不过这很慢，因为绝大多数推文都没有地理标签。我希望 Twitter 流只向我发送带有地理标签的推文。

我曾尝试使用[此问题](https://stackoverflow.com/questions/4244947/requesting-just-geotagged-statuses-from-the-twitter-api "这个问题")中提到的方法，您使用大小为 360* x 180* 的边界框进行过滤，但这对我不起作用。使用该过滤器时我没有收到任何错误，但我仍然收到 99% 的没有地理标签的推文。这是我的做法：

```
ConfigurationBuilder cb = new ConfigurationBuilder();
    cb.setDebugEnabled(true)
    .setOAuthConsumerKey("censored")
    .setOAuthConsumerSecret("censored")
    .setOAuthAccessToken("censored")
    .setOAuthAccessTokenSecret("censored");

TwitterStream twitterStream = newTwitterStreamFactory(cb.build()).getInstance();
StatusListener listener = new MyStatusListener();
twitterStream.addListener(listener);

//add location filter for what I hope is the whole planet. Just trying to limit
//results to only things that are geotagged
FilterQuery locationFilter = new FilterQuery();
double[][] locations = {{-180.0d,-90.0d},{180.0d,90.0d}};

locationFilter.locations(locations);

twitterStream.filter(locationFilter);

twitterStream.sample(); 
```

关于为什么我仍然收到没有地理标签的推文有什么建议吗？

编辑：我刚刚重读了[twitter4j javadoc](http://twitter4j.org/ja/javadoc/twitter4j/TwitterStream.html#filter%28twitter4j.FilterQuery%29)关于向 twitter 流添加过滤器，它说“默认访问级别允许多达 200 个跟踪关键字、400 个关注用户 ID 和 10 个 1 度位置框。” 那么边界框可能只有 1 度宽？这与我遇到的原始信息不同。那是我的问题吗？我的过滤器请求太大所以被忽略了？尝试使用它时我没有收到任何错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T06:08:43.657

从过滤器流中获取，然后用样本流覆盖它。

删除最后一行：`twitterStream.sample();`

# php - WP rewrite_rules_array 钩子中的错误模式

> ID：10938080
> 
> 赞同：1
> 
> 时间：2012-06-07T18:53:36.537
> 
> 标签：php, regex, url-rewriting, wordpress

使用永久链接的 WP 编码人员将熟知以下代码块。

```
add_filter('rewrite_rules_array', array($this, 'insert_rewrite_rules'));
function insert_rewrite_rules($rules)
{
    // $link_cloaking_text is properly set

    $newrules = array();
    $newrules['([^\/]*)/\b'.$link_cloaking_text.'\b/(\d*)$'] =    
    'index.php?pagename=$matches[1]&link_cloaking_id=$matches[2]';

    return $newrules + $rules;
} 
```

问题：我无法获取`pagename`和`link_cloaking_id`值（`query_vars`钩子并`$wp_rewrite->flush_rules()`正确使用）

```
$newrules['([^\/]*)/\b'.$link_cloaking_text.'\b/(\d*)$'] =     
'index.php?pagename=$matches[1]&link_cloaking_id=$matches[2]';

debug:
    WP_Query::__set_state(array(
       'query_vars' => 
      array (
        'error' => '404',
        'm' => 0,
        'p' => 0,
        'post_parent' => '',
        'subpost' => '',
        'subpost_id' => '',
        'attachment' => '',
        'attachment_id' => 0,
        'name' => '',
        'static' => '',
        'pagename' => '', // empty
        'page_id' => 0, 
```

但是如果我`$matches[1]`用一个常量替换`my_pagename`，那么就可以了：

```
$newrules['([^\/]*)/\b'.$link_cloaking_text.'\b/(\d*)$'] =      
'index.php?pagename=my_pagename&link_cloaking_id=$matches[2]';

debug:
    WP_Query::__set_state(array(
       'query_vars' => 
      array (
        'pagename' => 'my_pagename', // correct
        'link_cloaking_id' => '8', // correct
        'error' => '',
        'm' => 0,
        'p' => 0,
        'post_parent' => '', 
```

我究竟做错了什么？？

# php - 在尝试防止 POST 刷新重复提交时解决“无法修改标头信息 - 标头已发送”错误

> ID：10938084
> 
> 赞同：-3
> 
> 时间：2012-06-07T18:53:59.637
> 
> 标签：php, mysqli

我试图防止用户刷新页面时多次提交表单。这是我的代码：

```
<form action="#" method="post">

                    <table border="0">
                        <tr>
                            <td id="tb-w_a"><p>Kategori</p></td>
                            <td>:</td>
                            <td>
                            <select name="kategori">
                            <?php
                            $query = "SELECT id, title FROM forum_kategorier";
                            $result = $mysqli->query($query);
                            while(list($id, $title) = $result->fetch_row())
                            {
                                echo "<option value=\"$id\">$title</option>";  
                            }
                            ?>
                            </select>
                            </td>
                        </tr>
                        <tr>
                            <td id="tb-w_a"><p>Title</p></td>
                            <td>:</td>
                            <td><input type="text" name="title"></td>
                        </tr>
                    </table>
                <textarea name="tekst_indhold" style="width:716px; height:170px;"></textarea><br />
                <input type="hidden" value="<?php echo $_SERVER['PHP_SELF'] ?>" name="return_page">
                <input type="submit" value="Opret indhold" name="godkendt">
            </form>
            <?php
            if ($stmt = $mysqli->prepare('INSERT INTO `forum_traede` (`kategori_id`, `bruger_id`, `tekst`, `dato`, `titel`) VALUES (?, ?, ?, NOW(), ?)')) { 
                $stmt->bind_param('ssss', $katgori_id, $bruger_id, $tekst, $titel);
                $katgori_id = $_POST["kategori"];
                $bruger_id = $_SESSION["user_id"];
                $tekst = $_POST["tekst_indhold"];
                $titel = $_POST["title"];

                $stmt->execute();
                $stmt->close();

                if (isset($_POST['return_page'])) {
                    $return_page = $_POST["return_page"];
                } else {
                    header('Location: http://xxxx.dk/bruger-forum-opret/');
                }

            } else {
                echo 'Der opstod en fejl i erklæringen: ' . $mysqli->error;
            }
        ?> 
```

提交表单后，我收到以下错误：

> 警告：无法修改标头信息 - 第 78 行 /home/jesperbo/public_html/xxx.dk/xxx.php 中的标头（输出开始于 /home/jesperbo/public_html/xxx.dk/xxx.php:27）

这显示在页面顶部。

我还尝试将表单处理代码移动到单独的 .php 文件中，但随后出现此错误：

> 致命错误：在第 2 行的 /home/jesperbo/public_html/xxx.dk/bruger_forum-indhold-godkendt.php 中的非对象上调用成员函数 prepare()

提交表单后如何将浏览器重定向到新页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:58:13.583

简单的答案：将所有 PHP 代码放在所有 HTML 代码之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:13:19.027

首先解决您的第二个问题：

> 致命错误：在第 2 行的 /home/jesperbo/public_html/xxx.dk/bruger_forum-indhold-godkendt.php 中的非对象上调用成员函数 prepare()

您的脚本中的代码似乎比您发布的要多；有几个对`$mysqli`变量的引用，我们在您的问题中没有看到其初始化。

如果仅将表单处理代码移动到单独的文件中，但不包含定义`$mysqli`变量的代码，则会遇到上述错误：您正在尝试调用`$mysqli->prepare()`，但`$mysqli`尚未定义。

* * *

现在解决第一个问题：

> 警告：无法修改标头信息 - 第 78 行 /home/jesperbo/public_html/xxx.dk/xxx.php 中的标头（输出开始于 /home/jesperbo/public_html/xxx.dk/xxx.php:27）

有几个问题导致了这个问题。我们将一次一个地解决它们。

### 1\. 表单处理代码在表单未提交时执行。

至少，您应该在开始处理之前检查以确保表单已提交。考虑以下内容：

```
<form action="#" method="post">
  ...
</form>

<?php
  /* Check if the form was submitted. */
  if( $_POST ) {
    /* @todo Validate incoming values. */

    /* If all values are valid, insert into the database. */
    if ($stmt = $mysqli->prepare('INSERT INTO `forum_traede` (`kategori_id`, `bruger_id`, `tekst`, `dato`, `titel`) VALUES (?, ?, ?, NOW(), ?)')) {
      ...
    } else {
      ...
    }
  } 
```

### 2\. 即使表单已经提交，也会输出表单 HTML。

同样，如果表单尚未提交，您的脚本应该只输出表单 HTML。这就是阻止您的脚本正确重定向浏览器的原因。

您的脚本发送回浏览器的 HTTP 响应分为两部分：标头和正文。必须首先发送标头，这意味着一旦您的脚本输出某些内容，PHP 就会将其在该点的任何标头发送到浏览器，以便它可以发送正文。

由于您的脚本在设置标头之前尝试输出表单 HTML，`location`因此无法进行重定向（当 PHP 评估`header()`代码中的语句时，HTTP 标头已经发送到浏览器）。

要解决此问题，您需要将表单处理代码移至脚本顶部：

```
<?php
  /* Check if the form was submitted. */
  if( $_POST ) {
    /* @todo Validate incoming values. */

    /* If all values are valid, insert into the database. */
    if ($stmt = $mysqli->prepare('INSERT INTO `forum_traede` (`kategori_id`, `bruger_id`, `tekst`, `dato`, `titel`) VALUES (?, ?, ?, NOW(), ?)')) {
      ...
      $stmt->close();

      $return_page = (
        isset($_POST['return_page'])
          ? $_POST['return_page']
          : 'http://xxxx.dk/bruger-forum-opret/'
      );

      header(sprintf('Location: %s', $return_page));
      exit;
    } else {
      ...
    }
  }
?>

<!-- If we get to this point, either the form has not been submitted yet,
      or there is an error, so we should display the form HTML.
  -->
<form action="#" method="post">
  ...
</form> 
```

另请注意，我在通话`exit;`后添加了一个。`header()`由于浏览器被重定向到新的 URL，因此不再显示表单。

`$return_page`另外，我对变量的用途有点不清楚。我认为目的是在表单中指定一旦处理完表单，浏览器将被重定向到的 URL。我更新了答案中的代码以反映这一点。

# c# - 禁用 WebBrowser 上下文菜单

> ID：10938085
> 
> 赞同：1
> 
> 时间：2012-06-07T18:53:59.797
> 
> 标签：c#, .net, wpf, webbrowser-control

如何禁用 WPF WebBrowser-Control 的标准上下文菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-28T18:27:34.060

使用 mshtml；

```
 private mshtml.HTMLDocumentEvents2_Event documentEvents; 
```

在构造函数或 xaml 中设置您的 LoadComplete 事件：

```
 webBrowser.LoadCompleted += webBrowser_LoadCompleted; 
```

然后在该方法中创建新的 webbrowser 文档对象并查看可用属性并创建新事件，如下所示：

```
private void webBrowser_LoadCompleted(object sender, NavigationEventArgs e)
{
    documentEvents = (HTMLDocumentEvents2_Event)webBrowserChat.Document; // this will access the events properties as needed
    documentEvents.oncontextmenu += webBrowserChat_ContextMenuOpening;
}

private bool webBrowserChat_ContextMenuOpening(IHTMLEventObj pEvtObj)
{
    return false; // ContextMenu wont open
    // return true;  ContextMenu will open
    // Here you can create your custom contextmenu or whatever you want
} 
```

# ubuntu-12.04 - 自 Ubuntu 12.04 LTS 升级以来，Byobu 状态栏未在 PuTTY 中显示更新

> ID：10938092
> 
> 赞同：2
> 
> 时间：2012-06-07T18:54:18.677
> 
> 标签：ubuntu-12.04, putty, byobu

当我运行 Ubuntu 11.10 时，我将 byobu 配置为在屏幕底部显示不同的状态消息。当我在 PuTTY 时，这工作得很好。不过，我今天升级到 12.04，现在我有了这个：

![在此处输入图像描述](../Images/07b0e835834704c42a11b3dc74eeb60e.png)

以红色突出显示的区域是状态栏所在的位置。这是我到目前为止所做的：

*   将 byobu 的后端从 tmux 更改为 screen
*   删除 ~/.screenrc 和 ~/.byobu/
*   sudo dpkg-重新配置 byobu
*   卸载/重新安装 byobu

我在这里有点想法。拥有这个状态栏真的很方便，因为我只能通过 PuTTY 访问我的 Ubuntu 盒子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:04:33.483

我有同样的问题，我的自定义状态栏消失了。我相信这是因为 的语法发生`~/.byobu/status`了变化。

它曾经像

```
arch=0
battery=0
cpu_count=0
cpu_freq=0
... 
```

现在就像

```
screen_upper_left="color"
screen_upper_right="color whoami hostname ip_address menu"
screen_lower_left="color logo distro release #arch" 
```

我还没有验证，但我会看看这是否能解决我的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T13:37:31.740

if there is a "status.disable" file in your byobu config dir, remove it.

Or, in sh parlance :

```
rm $BYOBU_CONFIG_DIR/status.disable 
```

Also, there may be several tmux-x lines defined in the `$BYOBU_CONFIG_DIR/status` config file, try

```
SHIFT+F5 
```

To cycle them.

# asp.net - 域的 asp.net 成员提供程序更改

> ID：10938096
> 
> 赞同：0
> 
> 时间：2012-06-07T18:54:54.337
> 
> 标签：asp.net, asp.net-membership

我们正在迁移到一个新域，我们正在使用 asp.net 会员服务提供商，并且拥有近 1000 多名会员，我们是否需要在迁移前解决一些问题，否则它会正常工作。

就像在 aspnet_application 表中一样，它保留了当前域的记录，我们是否需要照顾它。

希望这不是一个坏问题

问候莫克沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:04:42.197

如果我正确理解了您的问题，则无需担心移至其他域。成员资格提供程序从 web.config 文件的成员资格提供程序部分获取其应用程序名称。如下。（检查您的 web.config 文件）

```
<membership>
  <providers>
    <clear />
    <add name="AspNetSqlMembershipProvider" 
         type="System.Web.Security.SqlMembershipProvider" 
         connectionStringName="ApplicationServices" 
         enablePasswordRetrieval="true" 
         applicationName="YOUR_APPLICATION_NAME" 
         ...
   />
  </providers>
</membership> 
```

只要不改`YOUR_APPLICATION_NAME`就不会影响。

希望这可以帮助 ！

# textbox - 在 ckeditor 图像属性窗口中添加新的输入文本框

> ID：10938100
> 
> 赞同：3
> 
> 时间：2012-06-07T18:55:18.130
> 
> 标签：textbox, ckeditor

我想在CKEditor的“图像属性”对话框窗口中添加一个新的输入文本框（“图像标题”），让我的用户输入“图像标题”以及现有的“URL”和“替代文本”。有没有我可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T17:13:29.130

[通过使用ckeditor（ www.ckeditor.com](http://www.ckeditor.com)）网站本身中的以下指南，我能够成功添加输入文本框。非常有用。

指南：[http ://docs.cksource.com/CKEditor_3.x/Howto/Editing_Dialog_Windows](http://docs.cksource.com/CKEditor_3.x/Howto/Editing_Dialog_Windows)

API：[http ://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.dialog.html](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.dialog.html)

示例： http: [//nightly.ckeditor.com/7491/_samples/api_dialog.html](http://nightly.ckeditor.com/7491/_samples/api_dialog.html)

# c# - 如何保持从模型到控制器的流打开？

> ID：10938102
> 
> 赞同：0
> 
> 时间：2012-06-07T18:55:19.127
> 
> 标签：c#, asp.net-mvc, pdf

我正在编辑 pdf，然后在新选项卡中打印。我收到一条错误消息，提示我“无法访问已关闭的流”。这是我迄今为止所拥有的......

控制器

```
public ActionResult QST(string ID) 
{   
    ...
    PdfReader reader = new PdfReader(Server.MapPath("~/Content/PDF/QST.pdf"));
    QstRepository repo = new QstRepository();
    Stream newPdf = repo.GS(ID, reader);            
    return new FileStreamResult(newPdf, "application/pdf");
} 
```

模型

```
public Stream GS(string ID, PdfReader reader)
{
    Stream newPdf = new MemoryStream();
    using (MemoryStream ms = new MemoryStream())
    {
        PdfStamper formFiller = new PdfStamper(reader, ms);
        AcroFields formFields = formFiller.AcroFields;
        formFields.SetField("ID", ID);

        formFiller.FormFlattening = true;
        formFiller.Writer.CloseStream = false;
        newPdf = ms;
        formFiller.Close();
    }
    return newPdf;
} 
```

如何在关闭之前访问 pdf... 或之后如何访问 pdf？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:59:32.090

返回之前的最后两行代码是

```
newPdf = ms;
formFiller.Close(); 
```

由于您的代码都在一个`using (MemoryStream ms = new MemoryStream())`块内，因此`MemoryStream`ms 将在您返回之前关闭。

由于您要分配`newPdf`给变量`ms`，因此 nwePdf 最终会返回指向的相同（已经关闭`MemoryStream`）`ms`。

您可以`public Stream GS(string ID, PdfReader reader)`在没有 using 块的情况下创建流，但如果代码中发生异常，您将面临保持打开状态的风险。我想你可以尝试以下方法：

```
// All calls to GS() must ensure that the returned stream gets closed.
public Stream GS(string ID, PdfReader reader) 
{ 
    MemoryStream newPdf = new MemoryStream();
    PdfStamper formFiller = null;
    try 
    { 
        formFiller = new PdfStamper(reader, newPdf); 
        AcroFields formFields = formFiller.AcroFields; 
        formFields.SetField("ID", ID); 

        formFiller.FormFlattening = true;
        //formFiller.Writer.CloseStream = false;
    }
    catch
    {
        // Only close newPdf on an exception
        newPdf.Close();
        throw; // Rethrow original exception
    }
    finally
    {
        // Always ensure that formFiller gets closed
        formFiller.Close();
    }
    return newPdf; 
} 
```

**更新：**我删除了额外的 MemoryStream，因为它只是在函数的开头声明了一个，然后在最后设置为指向另一个，而没有用于中间的任何其他内容。

**更新：**我找到了一个[使用 PdfStamper 的示例](http://www.developerfusion.com/code/6623/dynamically-generating-pdfs-in-net/)。根据示例，调用 formFiller.Close() 是实际写入流的内容。在他们的示例中，他们没有将 Writer.CloseStream 属性设置为 false。这可能就是您得到空白页的原因。不幸的是，我无法在 PdfStamper 上找到任何实际文档来验证这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:00:28.343

在您的代码中，`ms`并`newPdf`引用相同的`MemoryStream`实例；因为在块`ms`的末尾关闭，所以也关闭（因为它是同一个流）。所以你需要返回而不关闭它：`using``newPdf``Stream`

```
public Stream GS(string ID, PdfReader reader)
{
    PdfStamper formFiller = new PdfStamper(reader, ms);
    AcroFields formFields = formFiller.AcroFields;
    formFields.SetField("ID", ID);

    formFiller.FormFlattening = true;
    formFiller.Writer.CloseStream = false;
    formFiller.Close();
    return ms;
} 
```

我对 ASP.NET MVC 不是很熟悉，但我认为它`FileStreamResult`负责关闭流。

# ruby-on-rails - Rails 3\. 如何从查询结果中删除重复的关联记录？

> ID：10938114
> 
> 赞同：3
> 
> 时间：2012-06-07T18:56:24.833
> 
> 标签：ruby-on-rails, ruby, activerecord

我有@invoices，其中包含与特定预定课程相关的所有发票。

```
scheduled_course has_many :invoices, through => :enrollments
invoices belongs_to :scheduled_courses

@scheduled_course = ScheduledCourse.find(params[:id])
@invoices = @scheduled_course.invoices 
```

现在，一些发票可能会重复。例如，`@invoices - @scheduled_course.invoices`可能输出...

```
=> [#<Invoice id: 85, company_id: 106, invoice_number: "2870", issued_on: "2012-03-27", status: "pagado", notes: "", created_at: "2012-05-02 15:28:13", updated_at: "2012-05-02 15:50:50", exchange_rate: #<BigDecimal:c2bcc9c,'0.12E2',4(8)>, student_id: nil, due_date: "2012-04-02">, 
#<Invoice id: 85, company_id: 106, invoice_number: "2870", issued_on: "2012-03-27", status: "pagado", notes: "", created_at: "2012-05-02 15:28:13", updated_at: "2012-05-02 15:50:50", exchange_rate: #<BigDecimal:c2b828c,'0.12E2',4(8)>, student_id: nil, due_date: "2012-04-02">, 
#<Invoice id: 85, company_id: 106, invoice_number: "2870", issued_on: "2012-03-27", status: "pagado", notes: "", created_at: "2012-05-02 15:28:13", updated_at: "2012-05-02 15:50:50", exchange_rate: #<BigDecimal:c2b7e54,'0.12E2',4(8)>, student_id: nil, due_date: "2012-04-02">, 
#<Invoice id: 85, company_id: 106, invoice_number: "2870", issued_on: "2012-03-27", status: "pagado", notes: "", created_at: "2012-05-02 15:28:13", updated_at: "2012-05-02 15:50:50", exchange_rate: #<BigDecimal:c2b7a1c,'0.12E2',4(8)>, student_id: nil, due_date: "2012-04-02">, 
#<Invoice id: 85, company_id: 106, invoice_number: "2870", issued_on: "2012-03-27", status: "pagado", notes: "", created_at: "2012-05-02 15:28:13", updated_at: "2012-05-02 15:50:50", exchange_rate: #<BigDecimal:c2b75e4,'0.12E2',4(8)>, student_id: nil, due_date: "2012-04-02">, #<Invoice id: 85, company_id: 106, invoice_number: "2870", issued_on: "2012-03-27", status: "pagado", notes: "", created_at: "2012-05-02 15:28:13", updated_at: "2012-05-02 15:50:50", exchange_rate: #<BigDecimal:c2b7198,'0.12E2',4(8)>, student_id: nil, due_date: "2012-04-02"> 
```

如何从结果中删除重复的对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T19:06:29.133

您可以将`:uniq`选项传递给有很多：

```
has_many :invoices, :through => :enrollments, :uniq => true 
```

这是 RoR 文档中对此选项的描述：

> 如果为 true，将从集合中省略重复项。与 :through 结合使用很有用。

此外，为了避免重复进入数据库，您可以使用唯一的数据库索引，它可能看起来像这样：

```
add_index :enrollments, [:invoice_id, :scheduled_course_id], :unique => true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T19:00:49.763

```
@scheduled_course.invoices.uniq(&:id) # uniq elements in the array by their id 
```

只是使用`@scheduled_course.invoices.uniq`也应该有效。

# spring - Spring 计划任务：监控执行持续时间

> ID：10938117
> 
> 赞同：2
> 
> 时间：2012-06-07T18:56:27.910
> 
> 标签：spring

我们在 Spring Web 应用程序中使用计划任务来发送提醒、每日摘要等：

```
 <task:scheduled-tasks>
    <task:scheduled ref="fooService" method="bar" cron="0 0/5 * * * ?"/>
    </task:scheduled-tasks> 
```

每个计划任务调用一个给定的服务方法（上面伪代码中的 fooService.bar()）。我想监控每次执行持续多长时间。随着负载、数据或复杂性的增加，其中一些方法可能需要更长的时间。我可以将日志语句添加到每个服务方法（现在大约 10 个，但将来可能更多），或者使用方面在每个方法周围放置一些秒表行为。但是对于春季的所有计划任务，是否有更直接的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:09:22.670

您可以使用：

*   [perf4j](/questions/tagged/perf4j "显示标记为“perf4j”的问题") - 提供一些方面和很多统计工具

*   定制[aspectj](/questions/tagged/aspectj "显示标记为“aspectj”的问题") aspect

*   使用内置[Spring：标准日志记录方面（拦截器）](https://stackoverflow.com/questions/7302090)`$[invocationTime]` - 它可以使用占位符测量执行时间

在上述所有解决方案中，您需要以某种方式区分要跟踪的方法。您可以采用某个接口的所有方法，使用某个注释（包括自定义一个）注释的所有方法，使用方法命名约定......

当然，您必须选择最适合您需求的解决方案，因为最终目标是在不添加任何外部代码的情况下进行监控。

# asp.net - .NET 成员资格和 Cookie？

> ID：10938120
> 
> 赞同：0
> 
> 时间：2012-06-07T18:56:46.610
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-membership

**你好，**

我需要确定我的网站如何使用 Cookie 以适当的方式通知用户。

该解决方案是一个使用 .NET Membership 的 ASP.NET MVC 网站。我将数据存储在服务器上的会话中，但没有任何手动保存到客户端上的 cookie 中。但是，我假设 ASP.NET 成员资格正在使用 cookie（用于自动登录），但我不确定它是否真正存储在客户端上的女巫数据？

你能解释一下或给我一个链接吗？

**最好的祝福**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:05:20.437

表单身份验证票证（客户端上的 cookie）存储诸如用户名和 cookie 过期时间之类的值，以及与记住我复选框和滑动过期相关的一些其他布尔字段。这是如果您使用基于 cookie 的表单身份验证，这是默认和典型选择。更多信息可以在以下网站上找到：

[表单身份验证说明](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

重要的是要注意会话和表单身份验证票 (cookie) 没有任何关系。您可以在没有登录的情况下进行会话，并且您可以登录并且从不接触会话对象。这是一个重要的区别。

**编辑**

此 cookie 不用于“自动登录”。*身份验证*后，输入用户名和密码，cookie 被创建并用于*授权*- 您可以访问这些资源 - 在您的整个站点中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:52:56.613

启用 ASP.NET 成员资格的网站最多有 3 个 cookie：

1.  会话令牌
2.  身份验证令牌
3.  角色缓存（如果在 web.config 中启用）

要查看它们，请在您选择的浏览器中打开您的网站，登录并检查 cookie。在 IE 中它的工具 -> Internet 选项 -> 设置（在浏览历史旁边） -> 查看文件

# c++ - 调用不同的程序并传递参数

> ID：10938130
> 
> 赞同：3
> 
> 时间：2012-06-07T18:57:29.467
> 
> 标签：c++, ubuntu, arguments

我创建了一个随机整数生成器程序。它接受两个参数，一个最大数和一个最小数，并在该范围内输出一个随机整数，包括两端。

我正在创建需要随机整数的模拟程序，并且我希望能够调用随机程序并将模拟程序所需的最大值和最小值传递给它，然后将随机数返回给模拟。

我只是不知道也找不到我需要在模拟中编写以调出随机发生器并将最大值和最小值传递给它的代码。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:06:49.977

对于您的具体问题，您应该考虑使用`popen()`. 请务必`pclose()`在您阅读完结果后致电。

```
FILE *input = popen("program -and args", "r");
if (input) {
  // read the input
  pclose(input);
} else {
  perror("popen");
  // handle error
} 
```

如果程序从标准输入读取其参数，然后将结果输出到其标准输出，您将需要创建一个双向版本的`popen`. 假设您有一个 POSIX 兼容的操作系统，`socketpair`可以用来创建您的双向通道（或者，您可以对 进行两次调用`pipe`）。然后，您将使用变体`fork`之一实现该功能。`exec`这将[在此处](https://stackoverflow.com/questions/3884103/can-popen-make-bidirectional-pipes-like-pipe-fork)讨论。

但是，正如其他人所建议的那样，您实际上应该将随机数生成器的功能作为函数合并到您的程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:02:59.470

最好的方法是从您的随机生成器创建一个库并链接到它。否则，您可以查找[`execv()`函数](http://linux.die.net/man/3/exec)。

# android - LogCat 中的 Android SensorManager 错误

> ID：10938131
> 
> 赞同：3
> 
> 时间：2012-06-07T18:57:30.293
> 
> 标签：android, logcat, android-sensors, sensormanager

我的传感器管理器有问题，logcat 中有错误。当我用这一行注册监听器时：

```
sensorMgr.registerListener(this, sensorMgr.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL); 
```

我在 logcat 中收到这些行，但有三个错误。

```
06-07 20:52:42.419: D/SensorManager(9215): ====>>>>>Num Sensor: 1
06-07 20:52:42.419: D/SensorManager(9215): ====>>>>>Num Sensor: 2
06-07 20:52:42.419: D/SensorManager(9215): ====>>>>>Num Sensor: 3
06-07 20:52:42.419: D/SensorManager(9215): ====>>>>>Num Sensor: 4
06-07 20:52:42.419: D/SensorManager(9215): ====>>>>>Num Sensor: 5
06-07 20:52:42.419: D/SensorManager(9215): ====>>>>>Num Sensor: 6
06-07 20:52:42.419: D/SensorManager(9215): ====>>>>>Num Sensor: 0
06-07 20:52:42.419: E/SensorManager(9215): registerListener :: handle = 0  name= BMA220 delay= 200000 Listener= fr.rocknscrum.liseronmobile.MainActivity@40520980
06-07 20:52:42.419: E/SensorManager(9215): =======>>>Sensor Thread RUNNING <<<========
06-07 20:52:42.429: E/SensorManager(9215): reg :: handle = 0 
```

它工作得很好，没有问题，但我怎样才能避免这些错误？

PS：我不使用已弃用的版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:35:47.437

这不是错误，这是正常行为，他们错误地将其标记为错误。您可以在 ICS 设备上运行它，并以“调试”日志类型查看相同的日志行。

# qt - 除非重新构建整个项目，否则 QT 不会显示以前的构建警告

> ID：10938132
> 
> 赞同：0
> 
> 时间：2012-06-07T18:57:31.373
> 
> 标签：qt, build, warnings

我不确定这是否是 IDE 的标准行为，但我个人觉得这很烦人。如果一个文件在构建时产生警告（未使用的变量、不匹配的 ints/longs/等），如果另一个文件被修改并单击“构建项目”按钮，这些警告将停止显示。继续显示与未修改代码有关的警告不是更有意义吗？有没有办法强制这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:00:28.040

当编译器发出警告时会显示警告——不幸的是，这是 VS 团队（至少到 2008 年）和 Qt Creator 团队做出的设计决定。

这似乎是标准行为，我不知道有任何选项可以覆盖它。在 Qt Creator 中应该很容易修复，但在 Visual Studio 中可能很难修复，除非存在相关 API。*对于 VS，您需要编写一个加载项，并且需要有一个 API 可以让您对错误列表和*构建过程进行读写访问。如果存在这样的 API，那么它也将是一件简单的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:57:34.580

这是“标准行为”，更具体地说，行为是地球上构建系统如何“按设计行为”的属性。

正如@Kuba 所说，警告是由编译器发出的。它们不被存储（除了在构建操作的“所有错误/警告日志”中，IDE 通常从不读取未来构建操作的回读和摘录，这将获取他们自己的新警告/错误日志）。因此，除非编译器实际再次编译文件，否则您将不会再次看到警告，这是因为它们将是*新*构建操作再次生成的新警告。

为了得到你想要的（一个聪明的想法，恕我直言），构建系统需要：

*   存储来自每个文件编译的警告（可能基于“每个文件”）
*   每次“使用”文件输出产品时调用/显示这些警告

非常聪明。我不知道有任何系统可以做到这一点。这将需要相当重要的 IDE 或构建产品的构建工具级管理，恕我直言，它们都做得不好（但有些比其他更好）。

这是 2012 年，我们不仅缺少我们的飞行汽车，而且缺少构建系统，这些构建系统仅/快速构建仅需要使用所有内核同时轻松处理不同配置的系统。两者都在预料之中。

然后，在那之后的某个时候，你可能会得到你的功能。那将是一个奖励，因为这样你就可以在你的飞行汽车中使用它。

# cocoa - 反转 Cocoa 绑定并识别绑定目标视图？

> ID：10938135
> 
> 赞同：3
> 
> 时间：2012-06-07T18:57:47.223
> 
> 标签：cocoa, cocoa-bindings

我有一个公开`NSString`属性的自定义类。在 Interface Builder 中，我已将`title`an绑定`NSButton`到我的自定义类的属性。

是否可以`NSButton`从我的自定义类中获取对实例的引用？

本质上，我试图在我的自定义类中找到绑定到属性的所有用户界面元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:16:24.597

一般来说，这听起来像是一种反模式和/或一个坏主意。也就是说，有几件事要记住。多个观察者可以绑定到您的财产。您可以覆盖`addObserver:forKeyPath:options:context:`and `removeObserver:forKeyPath:`(and `removeObserver:forKeyPath:context:`)，然后维护自己的观察者数组。使用这种方法，我会提醒您，您可能需要付出额外的努力才能使数组不保留观察者，因为传统上 KV 观察不会保留观察对象，如果您开始保留，您可能会遇到泄漏/堆增长通过将它们放在一个`NSArray`.

另一个具有覆盖性的问题`addObserver:...`是`removeObserver:...`，如果没有大量额外的工作，您将不知道观察是针对绑定还是针对其他内容（例如，依赖 keyPath 通知）。一种可能的解决方法是`infoForBinding:`在`exposedBindings`稍后的运行循环过程中使用`performSelector:afterDelay:`. （我想我只是因为提出这个建议而在嘴里吐了一点。）

依赖 KVO 系统的私有实现细节可能不是一个好方法，除非您的目标只是更好地理解 KVO 的工作原理，但听起来您实际上是在尝试完成某些事情。

真的，这整个方法就像是灾难的秘诀。这听起来像是从一开始就违反了 MVC。为什么模型对象需要知道视图对象？无论您在这里尝试完成什么，几乎肯定会通过让 nib 由 NSViewController 子类拥有更好地完成，该子类具有所有 UI 元素的 IBOutlets 和模型的属性。然后，该对象将能够更清晰地管理视图和模型对象之间明显复杂的关系，而无需运行时诡计。由于您没有详细说明这种诡计的最终目标，因此很难说最好的方法是什么。

# ios - 退出时如何关闭/重新启动我的应用程序？

> ID：10938139
> 
> 赞同：0
> 
> 时间：2012-06-07T18:58:01.433
> 
> 标签：ios, ipad

我正在IOS5中为iPad编写一个IOS应用程序，我希望当有人通过按下主页按钮退出应用程序时它会重新启动。我的意思是，如果该人退出应用程序然后再次进入，我希望它从头开始，而不是从他离开时开始。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T19:00:22.493

在“YourAppName-Info.plist”文件中，添加键值对“应用程序不在后台运行”并将其设置为“是”。

# security - 延迟解密文件

> ID：10938140
> 
> 赞同：2
> 
> 时间：2012-06-07T18:58:03.120
> 
> 标签：security, encryption, cryptography

大致的想法是这样的：Alice 用密钥 K 加密一个文件并将两者都交给 Bob，说他应该只在 Alice 发生什么事时才用它来解密文件。为了确保他不会过早使用他的密钥，Alice 想要编写一个算法，当 Bob 试图解密她的文件时，她会收到一封电子邮件，并且只有在她在特定时间内（例如 48 小时）不采取任何行动的情况下Bob 是否能够继续解密该文件。

如果没有受信任的第三方，这样的事情可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:09:38.870

不是您创建的否定形式。Bob 拥有解密数据所需的所有部分。一旦您将所有部分都交给了一方，就没有任何机制可以阻止他们使用这些部分（除了希望他们只使用您的软件；通过希望实现的安全性不是强身份验证）。这就是托管服务（即受信任的第三方）要管理的大部分内容，不仅在数据世界中，而且在现实世界中。

顺便说一句，在设计安全协议时，您可能甚至想摆脱“发送电子邮件”的想法。这往往会导致对协议的错误思考。您的意思是“向爱丽丝发送消息”。消息被编码为电子邮件这一事实完全无关紧要，并且可能会让您思考与电子邮件实现相关的术语。

# jquery - jQuery：基于先前下拉选择的下拉选项

> ID：10938143
> 
> 赞同：1
> 
> 时间：2012-06-07T18:58:17.863
> 
> 标签：jquery

我正在尝试根据第一个下拉框的选择填充第二个下拉框。我进行了研究，发现提供的大多数建议/解决方案都预先加载了下拉值。

我正在尝试访问数据库并获取值。我能够在 Javascript 中实现这一点，但我发现 Jquery 解决方案会很有效，因为我在数据库中有很多项目。

所以这就是我到目前为止所拥有的。关于如何使用 MySQL 查询从数据库中检索数据并自动填充的任何建议？

```
<script type="text/javascript">
jQuery(document).ready(function($) {
    $(".countryDropDown").change(function() {
        var country = $(this).val();
        function fillStateDropDown(countryStateOption) {
            $.each(countryStateOption, function(val, text) {
                $('.stateDropDown').append(
                $('<option></option>').val(val).html(text));
            });
        }
        function clearStateDropDown() {
            $('.stateDropDown option:gt(0)').remove();
        }
        if (country == 'INDIA') {
            clearStateDropDown();
            var indiaStateOption = {
                RAJASTHAN: 'Rajasthan',
                GUJRAT: 'Gujrat',
                MAHARASTRA: 'Maharastra'
            };
            fillStateDropDown(indiaStateOption);
        }
        else if (country == 'UK') {
            clearStateDropDown();
            var ukStateOption = {
                LONDON: 'London',
                LIVERPOOL: 'Liverpool',
                DERBY: 'Derby'
            };
            fillStateDropDown(ukStateOption);
        }
        else if (country == 'USA') {
            clearStateDropDown();
            var usaStateOption = {
                CALIFORNIA: 'California',
                TEXAS: 'Texas',
                NEWYORK: 'New York'
            };
            fillStateDropDown(usaStateOption);
        }
        var stateOptions = {
            val1: 'text1',
            val2: 'text2'
        };
    });
});​
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:42:27.783

我现在正在开展一个项目，该项目实现了您在此处提到的确切功能。我的实现有点长，所以我会告诉你，你需要 AJAX 和 JSON 来将值传递给 PHP，PHP 将处理你项目的所有数据库部分。

想想 MVC 架构。您的视图将是包含 HTML/Javascript 的 .html 文件以及包含 JQuery/AJAX/JSON 的 .js 文件。

从您的 .js 文件中，您将使用 AJAX 调用您的控制器，也就是 .php 文件，它应该只包含 PHP 函数。这些将处理您提供的任何传入数据，在您的情况下是下拉菜单的 ID 和从下拉菜单中选择的 VALUE，您将使用 JQuery 获取。

从您的控制器文件中，您将调用模型中的函数，另一个 .php 文件包含将根据您的需要处理 SQL 查询的函数。

听起来很多，如果您对 MVC 编码风格不满意，可能是这样，但我向您保证，这并不难实现，您只需要确保您的 AJAX/JSON/JQuery 正在做他们应该做的事情要做，那么 PHP 应该处理剩下的事情。

值得庆幸的是，有很多关于所谓的“将 JQuery Mobile 与 MVC 结合使用”的内容。开始访问：http: [//jquerymobile.com/resources/](http://jquerymobile.com/resources/)并阅读这些项目。

祝你好运！

# javascript - jQuery打破表格

> ID：10938144
> 
> 赞同：0
> 
> 时间：2012-06-07T18:58:19.793
> 
> 标签：javascript, jquery

我有一个标准的 HTML 格式的表格，它通过 Zend 框架动态生成内容。从中我遇到了在 PHP 端内部更改表单的问题。所以我需要以某种方式改变表格的外观。有一次，我有一个元素出现在其中一行中，当这个元素出现时，我想跳出表格，然后在它之后做一些事情，然后再次启动表格。

基本上我想注入的等价物

`</tbody></table>/*other stuff*/<table><tbody>`在包含我寻找的一个元素的行之后，在这种情况下是一个标签。

我尝试`$("label[for='theLable']").parents('tr').after('</tbody></table><br><table><tbody>')`了似乎忽略了结束表部分添加 br，然后在同一个表中为表和 tbody 做一个完整的打开/关闭标签我试图打破所以在 tr 标签之间基本上它添加了这个新表

处理这个概念的最佳方法是什么？

***使用 jsfiddle 链接更新***

[http://jsfiddle.net/cPWDh/](http://jsfiddle.net/cPWDh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:13:57.453

您不能真正按照您的想法修改文档的 HTML，因为这不是更改 DOM 的合法方式。

相反，我会创建一个新表和`.append`要移动到其中的行，这将自动将它们从当前位置移动（而不是复制它们）：

```
$(document).ready(function() {
    var $trow = $('label[for="specialLabel"]').closest('tr'),
        $table = $trow.closest('table');
    $('<table>').append( $trow.nextAll().andSelf() ).insertAfter($table);
});​ 
```

[http://jsfiddle.net/cPWDh/1/](http://jsfiddle.net/cPWDh/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:14:03.860

这种方法在 js 中不起作用。如果表没有太多行，您可以这样做：

```
var nextTable = $("table").after("/*other stuff*/<table id="nextTable"></table>");
//now you loop over the lines of your original table that you want to have after the "break", and move them to the nextTable:

var before = true;
$("table tr").each(function(){
   if ($(this).has("[for='theLable']")) {
       before = false;
   }
   if (!before) {
       nextTable.append($(this));
   }
}); 
```

# oracle - 从另一个用户的表中查询列名

> ID：10938145
> 
> 赞同：6
> 
> 时间：2012-06-07T18:58:24.597
> 
> 标签：oracle, data-dictionary

从表中查询列名听起来很容易，对吧？确实有这个问题的答案[How can I get column names from a table in Oracle?](https://stackoverflow.com/questions/452464/how-can-i-get-column-names-from-a-table)

主要问题是该表属于另一个用户。我的用户只是为了集成，我没有任何数据库权限。

所以我可以做一些查询，比如：`SELECT * FROM anotherUser.THE_TABLE;`

但是像`SELECT * FROM USER_TAB_COLUMNS`不返回行之类的东西。

也许我可以在 all_tab_columns 上创建查询，是否还有其他更快的选项没有过程？

*这是一个oracle数据库！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T19:03:10.127

```
SELECT * 
  FROM ALL_TAB_COLUMNS
 WHERE OWNER='ANOTHERUSER' 
   AND TABLE_NAME='THE_TABLE'; 
```

如果您在桌子上有特权，应该可以到达那里。

# wpf - WPF 中的 ListBox 与 ViewModel 绑定

> ID：10938146
> 
> 赞同：6
> 
> 时间：2012-06-07T18:58:35.927
> 
> 标签：wpf

我是 WPF 新手，正在尝试使用 MVVM 框架构建示例应用程序。我的应用程序有一个 xaml 文件，其中有一些用于输入客户信息的文本框、用于显示状态的组合框和一个保存按钮。所有数据绑定都是通过 ViewModel(CustomerViewMode) 完成的，它引用了 Model(Customer)，包含所需的字段及其 Getter、setter。viewModel 有一个 CustomerList 属性。单击保存按钮时，我想在 ListBox 中显示 Customer 的 FirstName 和 LastName 属性。这就是问题所在。我调试了代码，（后面代码中的按钮单击事件），我可以看到 CustomerList 有第一个 Customer 对象及其所有详细信息，但它没有显示在列表框中。我的代码是：客户（模型）；

```
enter code here
namespace SampleMVVM.Models
{
class Customer : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private String _firstName;
    private String _lastName;
    private Address _customerAddress;

    public String FirstName
    {
        get { return _firstName; }
        set
        {
            if (value != _firstName)
            {
                _firstName = value;
                RaisePropertyChanged("FirstName");
            }
        }
    }

    public String LastName
    {
        get { return _lastName; }
        set
        {
            if (value != _lastName)
            {
                _lastName = value;
                RaisePropertyChanged("LastName");
            }
        }
    }

    public Address CustomerAddress
    {
        get { return _customerAddress; }
        set
        {
            if (value != _customerAddress)
            {
                _customerAddress = value;
                RaisePropertyChanged("CustomerAddress");
            }
        }
    }

    private void RaisePropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

} 
```

}

地址(型号)

```
namespace SampleMVVM.Models
{
class Address : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private string _addressLine1;
    private string _addressLine2;
    private string _city;
    //private string _selectedState;
    private string _postalCode;
    private string _country;

    public String AddressLine1
    {
        get { return _addressLine1; }
        set
        {
            if (value != _addressLine1)
            {
                _addressLine1 = value;
                RaisePropertyChanged(AddressLine1);
            }
        }
    }

    public String AddressLine2
    {
        get { return _addressLine2; }
        set
        {
            if (value != _addressLine2)
            {
                _addressLine2 = value;
                RaisePropertyChanged(AddressLine2);
            }
        }
    }

    public String City
    {
        get { return _city; }
        set
        {
            if (value != _city)
            {
                _city = value;
                RaisePropertyChanged(City);
            }
        }
    }

    public String PostalCode
    {
        get { return _postalCode; }
        set
        {
            if (value != _postalCode)
            {
                _postalCode = value;
                RaisePropertyChanged(PostalCode);
            }
        }
    }

    public String Country
    {
        get { return _country; }
        set
        {
            if (value != _country)
            {
                _country = value;
                RaisePropertyChanged(Country);
            }
        }
    }

    private void RaisePropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

}

客户视图模型：

```
namespace SampleMVVM.ViewModels
{
class CustomerViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private Customer _customer;
    RelayCommand _saveCommand;
    private List<String> _stateList = new List<string>();
    private string _selectedState;

    private ObservableCollection<Customer> _customerList = new ObservableCollection<Customer>();

    //public CustomerViewModel(ObservableCollection<Customer> customers)
    //{
    //    _customers = new ListCollectionView(customers);

    //}

    public Customer CustomerModel
    {
        get { return _customer; }
        set
        {
            if (value != _customer)
            {
                _customer = value;
                RaisePropertyChanged("CustomerModel");
            }
        }
    }

    public List<String> StateList
    {
        get
        {

            return _stateList;
        }
        set { _stateList = value; }

    }

    public ObservableCollection<Customer> CustomerList
    {
        get
        {

            return _customerList;
        }
        set
        {
            if (value != _customerList)
            {
                _customerList = value;
                RaisePropertyChanged("CustomerList");
            }

        }

    }

    public CustomerViewModel()
    {
        CustomerModel = new Customer
        {
            FirstName = "Fred",
            LastName = "Anders",

            CustomerAddress = new Address
            {
                AddressLine1 = "Northeastern University",
                AddressLine2 = "360, Huntington Avenue",
                City = "Boston",
                PostalCode = "02115",
                Country = "US",

            }
        };

        StateList = new List<String>
        {
            "Alaska", "Arizona", "California", "Connecticut", "Massachusetts", "New Jersey", "Pennsylvania", "Texas"
        };
        SelectedState = StateList.FirstOrDefault();

    }

    public String SelectedState
    {
        get { return _selectedState; }
        set
        {
            if (value != _selectedState)
            {
                _selectedState = value;
                RaisePropertyChanged(SelectedState);
            }
        }
    }

    private void RaisePropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

        } 
```

}

CustomerInfo.xaml（查看）

```
<UserControl x:Class="SampleMVVM.Views.CustomerInfo"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:ViewModels="clr-namespace:SampleMVVM.ViewModels"             
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">

<UserControl.DataContext>
    <ViewModels:CustomerViewModel />
</UserControl.DataContext>

<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

    <!--Starting label-->
    <TextBlock FontSize="18" FontFamily="Comic Sans MS" FontWeight="ExtraBlack" 
               Foreground="Navy" 
               Grid.Row="0" HorizontalAlignment="Center">
        <TextBlock.Text>
            Customer Information:
        </TextBlock.Text>
    </TextBlock>

    <TextBlock Text="First name: " Grid.RowSpan="2" HorizontalAlignment="Left" VerticalAlignment="Top"
               Grid.Row="1" Width="80px" Height="50px" Margin="40,5,0,0"/>
    <TextBox Text="{Binding CustomerModel.FirstName}" Grid.RowSpan="2" HorizontalAlignment="Left" 
             VerticalAlignment="Top"
             Grid.Row="1" Grid.Column="1" Width="80px" Height="20px" Margin="20,5,0,0"  Name="fname"/>

    <TextBlock Text="Last Name: " Grid.RowSpan="2" HorizontalAlignment="Left" VerticalAlignment="Top"
               Grid.Row="2" Width="80px" Height="50px" Margin="40,5,0,0"/>
    <TextBox Text="{Binding CustomerModel.LastName}" Grid.RowSpan="2" HorizontalAlignment="Left" 
             VerticalAlignment="Top"
             Grid.Row="2" Grid.Column="1" Width="80px" Height="20px" Margin="20,5,0,0" Name="lname"/>

    <TextBlock Text="Address: " Grid.RowSpan="2" HorizontalAlignment="Left" VerticalAlignment="Top"
               Grid.Row="3" Width="80px" Height="50px" Margin="40,5,0,0"/>
    <TextBox Text="{Binding CustomerModel.CustomerAddress.AddressLine1}" Grid.RowSpan="2" HorizontalAlignment="Left" 
             VerticalAlignment="Top"
             Grid.Row="3" Grid.Column="1" Width="160px" Height="20px" Margin="20,5,0,0"/>
    <TextBox Text="{Binding CustomerModel.CustomerAddress.AddressLine2}" Grid.RowSpan="2" HorizontalAlignment="Left" 
             VerticalAlignment="Top"
             Grid.Row="4" Grid.Column="1" Width="160px" Height="30px" Margin="20,5,0,0"/>

    <TextBlock Text="City: " Grid.RowSpan="2" HorizontalAlignment="Left" VerticalAlignment="Top"
               Grid.Row="5" Width="80px" Height="20px" Margin="40,5,0,0"/>
    <TextBox Text="{Binding CustomerModel.CustomerAddress.City}" Grid.RowSpan="2" HorizontalAlignment="Left" 
             VerticalAlignment="Top"
             Grid.Row="5" Grid.Column="1" Width="80px" Height="20px" Margin="20,5,0,0"/>

    <TextBlock Text="State: " Grid.RowSpan="2" HorizontalAlignment="Left" VerticalAlignment="Top"
               Grid.Row="6" Width="80px" Height="20px" Margin="40,5,0,0"/>
    <ComboBox Grid.RowSpan="2" HorizontalAlignment="Left" Name="listOfSates"
              VerticalAlignment="Top" 
              Grid.Row="6" Grid.Column="1" Width="80px" Height="20px" Margin="20,5,0,0"
              ItemsSource="{Binding Path=StateList}" 
              SelectedItem="{Binding Path=SelectedState}"
              SelectionChanged="ComboBox_SelectionChanged"
              >

    </ComboBox>

    <TextBlock Text="PostalCode: " Grid.RowSpan="2" HorizontalAlignment="Left" VerticalAlignment="Top"
               Grid.Row="7" Width="80px" Height="20px" Margin="40,5,0,0"/>
    <TextBox Text="{Binding CustomerModel.CustomerAddress.PostalCode}"  Grid.RowSpan="2" HorizontalAlignment="Left" 
             VerticalAlignment="Top"
             Grid.Row="7" Grid.Column="1" Width="80px" Height="20px" Margin="20,5,0,0"/>

    <TextBlock Text="Country: " Grid.RowSpan="2" HorizontalAlignment="Left" VerticalAlignment="Top"
               Grid.Row="8" Width="80px" Height="20px" Margin="40,5,0,0"/>
    <TextBox Text="{Binding CustomerModel.CustomerAddress.Country}" Grid.RowSpan="2" HorizontalAlignment="Left" 
             VerticalAlignment="Top"
             Grid.Row="8" Grid.Column="1" Width="80px" Height="20px" Margin="20,5,0,0"/>

    <Button Content="Save" Grid.RowSpan="2" HorizontalAlignment="Left" VerticalAlignment="Top"
            Grid.Row="9"  Width="50px" Height="20px" Name="savebtn" Margin="40,5,0,0"
             Click="savebtn_Click"/>

    <ListBox Name="cList" ItemsSource="{Binding Path=CustomerList}"
             HorizontalAlignment="Left" 
             VerticalAlignment="Top"
             Grid.Row="1" Grid.Column="2" Grid.RowSpan="2" Width="200px" Height="300px" Margin="200,5,0,0">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding CustomerModel.FirstName}"
                           FontWeight="Bold" Foreground="Navy"/>
                    <TextBlock Text=", " />
                    <TextBlock Text="{Binding CustomerModel.LastName}"
                           FontWeight="Bold" Foreground="Navy"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

CustomerInfo（类后面的代码）

```
namespace SampleMVVM.Views
{
/// <summary>
/// Interaction logic for CustomerInfo.xaml
/// </summary>
public partial class CustomerInfo : UserControl
{
    public CustomerInfo()
    {
        InitializeComponent();

        //checkvalue();
    }

            private void savebtn_Click(object sender, RoutedEventArgs e)
    {
        ////Customer c = new Customer();
        ////c.FirstName = fname.Text;
        ////c.LastName = lname.Text;
        //CustomerViewModel cvm = new CustomerViewModel();
        //cvm.CustomerModel.FirstName = fname.Text;
        //cvm.CustomerModel.LastName = lname.Text;
        //List<CustomerViewModel> customerList = new List<CustomerViewModel>();
        //customerList.Add(cvm);
        var viewModel = DataContext as CustomerViewModel;

        if (viewModel != null)
        {

            //viewModel.ShowCustomerInfo();
            String strfname = viewModel.CustomerModel.FirstName;
            String strname = viewModel.CustomerModel.LastName;

            viewModel.CustomerList.Add(viewModel.CustomerModel);
            String str1 = viewModel.CustomerList.FirstOrDefault().FirstName;
            int i = viewModel.CustomerList.Count();
            //cList.ItemsSource = viewModel.CustomerList;

        }

    }

    private void ComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        CustomerViewModel cvm = new CustomerViewModel();
        cvm.SelectedState = listOfSates.SelectedItem.ToString();
    }

} 
```

}

我只是不明白我哪里错了......有人请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:10:23.483

您只需在代码中（在客户视图模型构造函数中）创建一次 CustomerModel 对象的新实例。因此，您不断更新同一个客户对象，而不是创建一个新对象。

在您的点击处理程序结束时，您应该执行

```
viewModel.CustomerModel = new Customer(); 
```

**然而**

您应该在视图模型中使用 ICommand 来添加新客户，而不是使用单击处理程序。然后，您应该将按钮的命令绑定到视图模型中的 ICommand。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T00:26:08.277

对于正确的绑定`ListBox.ItemTemplate`：

```
<TextBlock Text="{Binding FirstName}"
           FontWeight="Bold" Foreground="Navy"/>
<TextBlock Text="{Binding LastName}"
           FontWeight="Bold" Foreground="Navy"/> 
```

`DataContext`of已经是`ListBoxItem`客户了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T05:12:04.530

您正在绑定不是 walid 的 CustomerLIst.FirstName，因为 inninterconent 将检查列表框项目源中的属性名称 customerlist。并且因为它不是他们的，所以它会引发一个静默错误，但不会显示到 GUI 中，你需要做的只是提供属性名，如名字和姓氏，这将起作用。

除了你在列表框中的绑定之外，其他一切都很好。只需替换您的列表框绑定，如下所示。

```
 <TextBlock Grid.Row="0"
                   Grid.Column="2"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Text="List of Customers" />
        <ListBox Name="cList"
                 Grid.Row="1"
                 Grid.RowSpan="8"
                 Grid.Column="2"
                 ItemsSource="{Binding CustomerList}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock FontWeight="Bold"
                                   Foreground="Black"
                                   Text="{Binding FirstName}" />
                        <TextBlock Text=", " />
                        <TextBlock FontWeight="Bold"
                                   Foreground="Black"
                                   Text="{Binding LastName}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <TextBlock Grid.Row="10"
                   Grid.Column="2"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Text="{Binding CustomerList.Count,
                                  StringFormat='Total Customers, ={0}'}" /> 
```

最好是指挥而不是指挥事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T20:03:16.803

您的问题出在这行代码中：

```
RaisePropertyChanged("CustomerList"); 
```

它不适用于集合添加/删除事件。看看[ObservableCollection 和 Item PropertyChanged](https://stackoverflow.com/questions/901921/observablecollection-and-item-propertychanged)。

请记住，在 MVVM 中，您不应该在代码中包含太多代码（如果有的话）。考虑使用命令。

# java - 在java中将四个32位整数转换为IP地址

> ID：10938150
> 
> 赞同：3
> 
> 时间：2012-06-07T18:58:42.133
> 
> 标签：java, ip, type-conversion, 32-bit

使用此处找到的代码：[https ://libbits.wordpress.com/2011/05/17/check-if-ip-is-within-range-specified-in-cidr-in-java/](https://libbits.wordpress.com/2011/05/17/check-if-ip-is-within-range-specified-in-cidr-in-java/)

```
 // Step 1\. Convert IPs into ints (32 bits). 
// E.g. 157.166.224.26 becomes 10011101  10100110  11100000 00011010
int addr = (( 157 << 24 ) & 0xFF000000) 
           | (( 166 << 16 ) & 0xFF0000) 
           | (( 224 << 8 ) & 0xFF00) 
           |  ( 26 & 0xFF);

// Step 2\. Get CIDR mask
int mask = (-1) << (32 - 10);

// Step 3\. Find lowest IP address
int lowest = addr & mask;

// Step 4\. Find highest IP address
int highest = lowest + (~mask); 
```

我能够将一个字符串拆分为四个整数并为我的 IP 范围创建边界。现在我希望能够生成一个介于最高值和最低值之间的 ip。例如：给定范围：157.166.224.26/10 我得到一个地址 -1650008038 我的最低 IP 地址是 -1652555776，最高 IP 地址是 -1648361473。现在我需要生成一个介于最低和最高之间的数字并将其转换回四个整数，这最后一部分是我迷路的地方，我不知道如何将 -1648361473 转换为 IP 地址

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:14:32.290

这很容易。假设 IPv4 地址在`ipaddr`变量中，你可以这样写：

```
byte[] addr = new byte[4];
addr[0] = (ipaddr >> 24) & 0xFF;
addr[1] = (ipaddr >> 16) & 0xFF;
addr[2] = (ipaddr >> 8 ) & 0xFF;
addr[3] = ipaddr & 0xFF;

InetAddress inetAddr = InetAddress.getByAddress(addr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:21:33.470

您可以使用

```
int addr = (157 << 24) | (166 << 16) | (224 << 8) | 26; 
```

扭转这一点。

```
byte[] addrAsBytes = { (byte) (addr >> 24), (byte) (addr >> 16), 
                (byte) (addr >> 8), (byte) addr }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T19:47:51.210

Teetoo 上面给出的答案值得一些解释。

让我们从第一个值开始：

```
(ipaddr >> 24) & 0xFF 
```

当它向下移动时，代表 157 的 8 位位于结果整数的最右边。但是，由于该值最初为负数，因此 24 个最高有效位中的 1 将最终给您一个负数。您想要的是除最后 8 位之外的所有内容，因此为“& 0xFF”。另一种方法是使用 >>> 运算符右移，该运算符将 0 强制为最高有效位。

```
(ipaddr >>> 24) 
```

现在我们继续：

```
(ipaddr >> 16) & 0xFF 
```

移位时，您会将最左边的 16 位设置为 1（由于移位负数）。然后你会得到代表 157 的 8 位，然后是代表 166 的 8 位。在这种情况下，>>> 运算符对我们没有帮助，因为我们仍然有 157。因此，“& 0xFF”将 0 除了 166 的 8 位之外的所有内容。

最后两个值也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T19:52:29.777

@Teetoo 的答案的补充。

让我们`ByteBuffer`做 int 到字节数组的魔法

```
ByteBuffer bb = ByteBuffer.wrap (addr);
bb.putInt (iIP); 
```

# javascript - Javascript 同步接口的异步操作

> ID：10938151
> 
> 赞同：0
> 
> 时间：2012-06-07T18:58:50.447
> 
> 标签：javascript, node.js, v8, eventlet

所以我最近听到了很多关于 node.js 的消息。支持者似乎吹捧它是基督的第二次降临。这激起了我的兴趣，我决定阅读它。

我遇到了多个具有基准数字的来源，它显然在处理大量并发请求方面做得很好。但是编写代码的“回调”方式对我来说感觉非常“不自然”。一点点研究让我找到了 Eventlet，它让我可以在编写看起来非常像同步的代码时执行异步操作（因此让我更有效率）。

但是 Node.js 似乎比 Eventlet 强大得多（http://codescience.wordpress.com/2011/09/05/non-blocking-io-node-js-and-pythons-eventlet）。我假设这是因为 V8 JS 引擎。是否有 Java/Javascript 产品允许我在编写同步代码的同时执行异步操作，从而为我提供两全其美的优势 - 开发人员的生产力和 JVM/V8 的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:02:21.990

Node.js 支持可以支持 async - await 语法，允许您使用同步的代码运行异步操作

看一下这个：

[https://github.com/koush/node/wiki/%22async%22-support-in-node.js](https://github.com/koush/node/wiki/%22async%22-support-in-node.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:57:37.290

有一些项目旨在将这种风格带入 Node.js。[IcedCoffeeScript是](http://maxtaco.github.com/coffee-script/)[CoffeeScript](http://coffeescript.org/)的一个分支，就是一个例子（但需要您编写 CoffeeScript）。另一个是[node-fibers](https://github.com/laverdet/node-fibers)。

就我个人而言，我一直在尝试使用 IcedCoffeeScript（因为我已经在使用 CoffeeScript）并且它似乎工作得很好（参见我[的前后示例](https://gist.github.com/e368e5850ed492e88cdf)），但是调试 CoffeeScript 有点痛苦，尽管下一个版本的 CoffeeScript 应该有源映射支持，有望使这更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T17:19:04.490

你应该看看我的一个项目，它叫做sharpnr.js。这也使用了 await-async 语法，但它是一个简单的 JavaScript 库，适用于所有浏览器。

该库目前处于测试阶段，但它很稳定，几乎支持所有语句（例如循环、开关、if），并且可以与现有库（如 jQuery）很好地配合使用。

语法几乎与 C# 版本相同：

```
var getAsync = async(function(url) {
  var result = await; $.get(url);
  $("#test").html(result);
});
getAsync("http://www.sharpnrjs.com"); 
```

[jsfiddle](http://jsfiddle.net/ajuhos/ujh8U/)上的工作示例。

[您可以从github](https://github.com/ajuhos/sharpnr.js/downloads)下载该库。

# asp.net - WPF 中 WinForms 控件上的上下文菜单

> ID：10938152
> 
> 赞同：0
> 
> 时间：2012-06-07T18:58:50.593
> 
> 标签：asp.net, wpf-controls

我需要在 WPF 应用程序中使用图表/图形控件，并且我已经设法通过 .

我想有一个图表的上下文菜单，我想在 WPF 中完成上下文菜单，所以我不必做一个包装图表并添加上下文菜单的 WinForms 控件。

我怎样才能做到这一点？

# php - PHP 服务器发送事件减少流量

> ID：10938153
> 
> 赞同：2
> 
> 时间：2012-06-07T18:58:56.017
> 
> 标签：php, ajax, push, server-sent-events

我刚开始在我的 PHP 页面中使用 SSE。我可以很容易地用这段代码发送新数据：

```
while(true) {
    if (isset($_GET["selectedName"]) && $_GET["selectedName"] != "empty") {
        echo "data:current timestamp for user ".$_GET["selectedName"]." is ".time().PHP_EOL;
        echo PHP_EOL;
        ob_flush();
        flush();
    }
    sleep(1);
} 
```

但这意味着，我每秒都在向客户端发送数据，并且我必须运行一个循环。示例中的字符串没有太多数据。但后来我想连接到数据库并从那里提取东西。

如果我要提取整篇文章（或消息或其他任何东西）之类的东西，我会产生大量数据。

现在我的问题是：如何告诉脚本提供新数据并将其从另一个 PHP 脚本发送到客户端？

我创建了一个小的 iOS 应用程序，它使用一个小的 API 将状态更新发送到服务器。我想要一个 API 脚本来告诉 Web 界面事件源脚本发送新数据。

只有当我告诉它这样做时。我怎样才能做到这一点？

感谢您的帮助，致以亲切的问候，朱利安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:43:20.350

关于我没有太多东西要一次发送的事实**（**一个从 0 到 4 的状态编号和一个小消息字符串），我决定设置一个变量并检查是否有任何变化：

```
static $oldStateString;

while(true) {
    $result = mysql_query("SELECT * FROM st_workers");
    $currentStateString = "";

    while ($user = mysql_fetch_array($result)) {
        $currentStateString .= $user["stateIndex"].":--;".$user["state"].":--;".$user["humanReadableName"].":__;";
    }

    if ($currentStateString != $oldStateString) {
        echo "data:".$currentStateString.PHP_EOL;
        echo PHP_EOL;
        ob_flush();
        flush();

        $oldStateString = $currentStateString;
    }
    sleep(1);
} 
```

但是：我注意到您必须稍后开始事件处理程序，而不是`<body onload="">`. 这会在大多数浏览器中产生错误，除了 Safari 6 和当前的 FireFox。浏览器无法识别它不再加载。所以“加载微调器”直到 5 分钟或更长时间才会停止。

# c# - Foreach DataGridViewRow 过程

> ID：10938156
> 
> 赞同：-2
> 
> 时间：2012-06-07T18:59:03.273
> 
> 标签：c#, winforms, datagridview

因此，经过多次尝试（并改变了项目的源代码），我编写了一些代码，如果选择了一行（即单行的一些单元格），这些代码效果很好。
但是，我想对多行重复相同的操作（如果选择了任何单元格）- 除了第一行和最后一行（即 rowIndex 0 和 newRow）。事情变得太复杂了。有人可以帮忙吗？

```
int r = dgvC.CurrentRow.Index;
var selCells = dgvC.SelectedCells;
var hColumn = (from DataGridViewCell c in selCells;
               orderby c.ColumnIndex descending select c).FirstOrDefault();

List<DataGridViewCell> q = new List<DataGridViewCell> { };
foreach (DataGridViewCell p in dgvC.CurrentRow.Cells)
{
    if (p.ColumnIndex > hColumn.ColumnIndex)
    {
        q.Add(p);
    }
}

foreach (DataGridViewCell v in dgvN.Rows[r].Cells)
{
    if (v.ColumnIndex > 0)
    {
        q.Add(v);
    }
}

List<string> a = new List<string> { };
foreach (DataGridViewCell cell in dgvC.SelectedCells)
{
    a.Add(cell.Value.ToString());
    a.Reverse();
}

List<string> result = (from ignored in Enumerable.Range(0, int.MaxValue)
                       from item in a select item).Take(q.Count).ToList();

for (int i = 0; i < q.Count; i++)
{
    q.ElementAt(i).Value = result.ElementAt(i);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:49:13.813

我认为这段代码需要完全重写。我假设以下关于您的意图，在上面的讨论中得到了证实。

您从两个 DGV 开始，如下所示：

```
dgvC                         dgvN
+--------------------------+ +--------------------------+ 
|  C1  C2  C3  C4  C5  C6  | |  N1  N2  N3  N4  N5  N6  |
+--------------------------+ +--------------------------+
|  v1  v2  v3  v4  v5  v6  | |  v20 v21 v22 v23 v24 v25 |
|  v7  v8  v9  v10 v11 v12 | |  v26 v27 v28 v29 v30 v31 |
|  v13 v14 v15 v16 v17 v18 | |  v32 v33 v34 v35 v36 v37 |
+--------------------------+ +--------------------------+ 
```

如果用户在 dgvC 中选择第 2 行的 C2 和 C3 并运行您的代码，您希望它像这样修改您的表：

```
dgvC                         dgvN
+--------------------------+ +--------------------------+ 
|  C1  C2  C3  C4  C5  C6  | |  N1  N2  N3  N4  N5  N6  |
+--------------------------+ +--------------------------+
|  v1  v2  v3  v4  v5  v6  | |  v20 v21 v22 v23 v24 v25 |
|  v7  v8  v9  v9  v8  v9  | |  v26 v8  v9  v8  v9  v8  |
|  v13 v14 v15 v16 v17 v18 | |  v32 v33 v34 v35 v36 v37 |
+--------------------------+ +--------------------------+ 
```

但是，如果您在第 2 行和第 3 行中矩形选择 C2、C3 和 C4，您希望它看起来像这样：

```
dgvC                         dgvN
+--------------------------+ +--------------------------+ 
|  C1  C2  C3  C4  C5  C6  | |  N1  N2  N3  N4  N5  N6  |
+--------------------------+ +--------------------------+
|  v1  v2  v3  v4  v5  v6  | |  v20 v21 v22 v23 v24 v25 |
|  v7  v8  v9  v10 v10 v9  | |  v26 v8  v10 v9  v8  v10 |
|  v13 v14 v15 v16 v16 v15 | |  v32 v14 v16 v15 v14 v16 |
+--------------------------+ +--------------------------+ 
```

到目前为止我是正确的吗？

如果是这样，我会这样写代码：

```
int loRow = dgvC.SelectedCells.Cast<DataGridViewCell>().Select(c => c.RowIndex).Min();
int hiRow = dgvC.SelectedCells.Cast<DataGridViewCell>().Select(c => c.RowIndex).Max();

int loCol = dgvC.SelectedCells.Cast<DataGridViewCell>().Select(c => c.ColumnIndex).Min();
int hiCol = dgvC.SelectedCells.Cast<DataGridViewCell>().Select(c => c.ColumnIndex).Max();

for (int i = loRow; i <= hiRow; i++)
{
    // start copying from the rightmost selected cell in the current row
    int curCopyCol = hiCol;

    // now copy to dgvC, starting with hiCol + 1
    for (int j = hiCol + 1; j < dgvC.Columns.Count; j++)
    {
        dgvC.Rows[i].Cells[j].Value = dgvC.Rows[i].Cells[curCopyCol--].Value;

        if (curCopyCol < loCol)
            curCopyCol = hiCol;
    }

    // finally, continue copying in dgvN, starting from the second cell
    for (int j = 1; j < dgvN.Columns.Count; j++)
    {
        dgvN.Rows[i].Cells[j].Value = dgvC.Rows[i].Cells[curCopyCol--].Value;

        if (curCopyCol < loCol)
            curCopyCol = hiCol;
    }
} 
```

此代码已在针对 .NET 3.5 的 VS2010 中进行了测试。

**编辑**以修复和扩展评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:23:49.910

你为什么不尝试连接到数据网格视图的行选择/单元格选择事件来跟踪选择了什么行？这样，您可以检查引发事件的行并确定是保留还是从内部集合中删除它？您可以保留行对象的内部集合或仅保留已选择并从中工作的行的索引，而不是尝试像当前代码一样构建列表。

# perl - 使用 Cygwin 安装 Perl CSV_XS 模块失败

> ID：10938157
> 
> 赞同：4
> 
> 时间：2012-06-07T18:59:03.473
> 
> 标签：perl, cygwin

我在使用 Cygwin 安装 CPAN 模块 Text::CSV_XS 时遇到问题。

我做了一个

```
$ cpan Text::CSV_XS
CPAN: Storable loaded ok (v2.20)
.... Every was good till:.....

Writing Makefile for Text::CSV_XS
cp CSV_XS.pm blib/lib/Text/CSV_XS.pm
/usr/bin/perl.exe /usr/lib/perl5/5.10/ExtUtils/xsubpp  -typemap /usr/lib/perl5/5 .10/ExtUtils/typemap  CSV_XS.xs > CSV_XS.xsc && mv CSV_XS.xsc CSV_XS.c
gcc-4 -c    -DPERL_USE_SAFE_PUTENV -U__STRICT_ANSI__ -g3 -fno-strict-aliasing -p ipe -fstack-protector -I/usr/local/include -DUSEIMPORTLIB -O3    -DVERSION=\"0.8 8\"  -DXS_VERSION=\"0.88\"  "-I/usr/lib/perl5/5.10/i686-cygwin/CORE"   CSV_XS.c
/bin/sh: gcc-4: command not found
Makefile:330: recipe for target `CSV_XS.o' failed
make: *** [CSV_XS.o] Error 127
  HMBRAND/Text-CSV_XS-0.88.tgz
  make -- NOT OK
Running make test
  Can't test without successful make
Running make install
  Make had returned bad status, install seems impossible 
```

我之前安装了另一个模块，没有问题。

```
Make is installed
gcc is installed 
```

/bin/sh 返回一个新的外壳。

```
$ /bin/sh

$ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-18T17:38:18.217

重要提示：在撰写本文时，gcc4 现在位于过时的包部分中，默认情况下它在 Cygwin 安装程序中是隐藏的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T19:03:39.433

启动 Cygwin 软件包管理器 ( `setup.exe`) 并安装`gcc4`。使用搜索工具在管理器中找到包。当您使用它时，还要安装`make`和. 您将在该部分中找到所有这些包。`autoconf``automake``devel`

然后重试，就成功了，我刚刚测试了一下：

```
MiLu@Dago: ~ > cpan Text::CSV_XS
...
Installing /usr/lib/perl5/site_perl/5.10/i686-cygwin/auto/Text/CSV_XS/CSV_XS.bs
Installing /usr/lib/perl5/site_perl/5.10/i686-cygwin/auto/Text/CSV_XS/CSV_XS.dll
Installing /usr/lib/perl5/site_perl/5.10/i686-cygwin/Text/CSV_XS.pm
Installing /usr/share/man/man3/Text.CSV_XS.3pm
Appending installation info to /usr/lib/perl5/5.10/i686-cygwin/perllocal.pod
  HMBRAND/Text-CSV_XS-0.88.tgz
  /usr/bin/make install  -- OK 
```

# c++ - 一个类可以在不实例化的情况下公开一个数字吗？

> ID：10938161
> 
> 赞同：0
> 
> 时间：2012-06-07T18:59:07.143
> 
> 标签：c++

一个类可以在不实例化的情况下公开类型。例如：

```
class bar {
  typedef int GET_TYPE;
};

template<class T>
void foo() {
  typename T::GET_TYPE t;
  // do something with t
}

foo<bar>(); 
```

整数可以以类似的方式暴露吗？从某种意义上说，模板参数可以是类型或内置类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:02:31.577

`enum`对此有好处。

```
class bar
{
     enum { MyNumericValue = 17, };
}; 
```

这仅适用于整数值，但适用于所有版本的 C++。

对于非整数值，请参阅[CatPlusPlus 的现代解决方案（仅限 C++11）](https://stackoverflow.com/a/10938213/103167)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T19:02:28.453

是的，使用静态数据成员。

```
struct foo {
    static constexpr int something = 42;
};

// ... use foo::something ... 
```

# php - PHP 邮件返回 false

> ID：10938175
> 
> 赞同：1
> 
> 时间：2012-06-07T18:59:51.990
> 
> 标签：php

我是 PHP 初学者，刚开始创建自己的网站。我遇到了一个问题，mail() 无缘无故地返回 FALSE。

我的想法是实现密码重置机制。当用户输入他的电子邮件时，HTML 表单会将信息传递给 php 脚本，php 脚本将执行验证并通过随机生成的密码重置密码，然后将此临时密码发送到用户电子邮件。下面是我的代码：

```
<?php
    session_start();
    $email = $_POST['email'];

    function random_string_generator ($character_options, $length_of_generated_string)
    {
        $random_string = "";

        //count the number of characters available for picking
        $num_valid_charactor = strlen($character_options);

        for ( $i = 0 ; $i < $length_of_generated_string; $i++ ){
            $random_pick = mt_rand(1, $num_valid_charactor);
            $random_char = $character_options[$random_pick-1];
            $random_string .= $random_char;
        } 

        return $random_string;
    }

    function createSalt()
    {
        $string = md5(uniqid(rand(), true));
        return substr($string, 0, 3);
    }

    $dbhost = 'localhost';
    $dbname = 'my_db';
    $dbuser = 'root';
    $dbpass = ''; 
    $conn = mysql_connect($dbhost, $dbuser, $dbpass);

    mysql_select_db($dbname, $conn);

    $query = "SELECT password, salt FROM users WHERE email = '$email';";
    $result = mysql_query($query);

    if(mysql_num_rows($result) < 1)
    { //no such user exists
        $_SESSION['error'] = '1';
        $_SESSION['message']    = 'user does not exist';
        header("Location: Forgot_password.php");
    }
    else
    {
        $random_pick_options = "1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
        $temporary_password = random_string_generator($random_pick_options, 12);

        $hash = hash('sha256', $temporary_password);

        $salt = createSalt();
        $hash = hash('sha256', $salt . $hash);      

        $query = "UPDATE users set password=$hash, salt=$salt where email=$email;";
        mysql_query($query);

        //Email user the temporary password
        $email_from = "auto@alemc.org";
        $email_to    = $email;
        $message    = "Dear user,\n\n your temporary passowrd is: " . $temporary_password . "\n This is an auto-generated email. Please do not reply to this email address.\n\n ALEMC\n";

        mail($email_to, "ALEMC: Password Reset", $message, "From: $email_from");

        $_SESSION['message'] = "password reset";
        header("Location: Login_form.php");
    }               
?> 
```

知道有什么问题吗？或者有没有比使用 php 发送邮件更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:16:03.237

你的php设置一定有问题。我个人喜欢在从 php 发送电子邮件时使用[PHPMailer](http://sourceforge.net/projects/phpmailer/files/phpmailer%20for%20php4/0.90/ "PHPMailer")，您有更多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:26:33.213

我个人建议您使用 swiftmailer ( [http://swiftmailer.org/](http://swiftmailer.org/) ) 之类的东西，它可以正常工作。查看您的 PHP 邮件/服务器配置是如何设置的。并做一些事情来保护自己免受 SQL 注入。

# css - 居中我的导航菜单链接

> ID：10938176
> 
> 赞同：0
> 
> 时间：2012-06-07T18:59:52.363
> 
> 标签：css, navigation, centering, alignment

我似乎无法弄清楚这一点。我试过 text-align: center; ，显示：inline-block 等等，但我只是不知道如何在#menu-bottom-nav 中将我的导航居中。

CSS

```
#menu-bottom-nav { width: 600px; height: 70px; margin: 0px auto;}
#menu-bottom-nav li { list-style-type: none; float: left; margin-right: 20px;} 
```

任何帮助表示赞赏。

![在此处输入图像描述](../Images/85e8157939ac03ac69461f72d99ae415.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:15:05.393

试试这个：

```
<!DOCTYPE>

<html>
<head>
    <title>Test</title>

    <style type="text/css">
        #menu-bottom-nav {
            margin: 0;
            padding: 0;
            width: 600px;
            text-align: center;
            border: 1px solid #000;
        }

        #menu-bottom-nav li {
            list-style-type: none;
            margin-right: 20px;
            border: 1px solid #ff0000;
            display: inline-block;
            *display: inline;
            zoom: 1;
        }
    </style>
</head>
<body>
    <ul id="menu-bottom-nav">
        <li>Test</li>
        <li>Test2</li>
        <li>Test3</li>
    </ul>
</body>
</html> 
```

# mercurial - 与多个开发人员一起拉取并使用 Mercurial 存储库

> ID：10938183
> 
> 赞同：3
> 
> 时间：2012-06-07T19:00:24.087
> 
> 标签：mercurial

请多多包涵....

（编辑...）

```
╔════════════╦═══════════════════╦══════╗
║ repo name  ║       role        ║ user ║
╠════════════╬═══════════════════╬══════╣
║ RepoMain   ║ production        ║ Mr.A ║
║ RepoTest   ║ test server       ║ QA   ║
║ RepoB_vm   ║ Mr.B's vm         ║ Mr.B ║
║ RepoB_home ║ Mr.B's final repo ║ Mr.B ║
║ RepoC_vm   ║ Mr.C's vm         ║ Mr.C ║
║ RepoC_home ║ Mr.C's final repo ║ Mr.C ║
╚════════════╩═══════════════════╩══════╝ 
```

你可以想象 Mr.A 和其他人一起工作，所以他有自己的存储库（同一个项目）

有几个热门的新手问题，我想我还没有结束。

在您自己的 VM（虚拟机）上工作的基本工作流程

> 提交您的更改 --> 从测试服务器拉取到 Repo_vm --> 在 vm 上运行您的测试 --> 成功然后要求 QA 从 Repo_home 拉取

**这是最好的工作流程吗？**我总是害怕合并问题（有时更新的更改丢失了。我有过一次可怕的经历）。我认为生产 <--- 测试服务器没有什么大不了的，因为它是单向的。这听起来像是一个安全的合并。

但是多个开发人员使用相同的测试服务器存储库，如果我们这样做，我们最终会被 Michael Myers 追赶。

为了更明确地扩展上述工作流程......

1.  在 vm 上提交更改
2.  从测试服务器拉取
3.  在 vm 上运行测试
4.  如果一切通过，更新家庭回购
5.  要求 QA 从 repo_home 中提取

* * *

考虑到拉取请求，这是一个更好的工作流程吗？

1.  在您自己的虚拟机上提交更改
2.  从测试服务器拉取更改以获取最新的 alpha 版本
3.  在本地运行测试
4.  如果一切顺利，请使用您自己的帐户推送到您的 home repo
5.  提交拉取请求
6.  如果您排在队列的前面，请在测试服务器（沙箱环境）上创建一个克隆版本，然后进行合并（测试服务器可能具有与 home repo 中提交的最后一个 alpha 版本不同的最新版本）
7.  如果测试通过，他会告诉 QA 从合并的沙箱 repo 中提取
8.  运行测试
9.  在 scheulde 上推动生产

Q2：QA 给予有限的时间是什么意思？

Q3：开发人员应该多久从测试服务器拉取一次（包含最新的 alpha 稳定版本）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T22:41:57.007

合并是一个棘手的问题。Mercurial 在自动处理事情方面做得很好，但它不能解决冲突。这最好留给一个人，而最好的人是开发人员进行更改。不要让 QA 合并任何东西。合并冲突需要仔细注意细节，不能掉以轻心。粗心的合并是任何软件都无法解决的问题。

我认为你的工作流程很好。 **QA 应该将拉取请求视为队列。** 当开发人员排在队列的最前面时，他就有机会拉取、合并和测试。完成后，他会通知 QA，然后由 QA 拉出他的更改。由于没有其他代码进入存储库，因此保证 QA 不必合并。

QA 还可以为开发人员提供有限的时间来合并、构建和测试，具体取决于您的流程速度和开发人员更改的大小。这样一来，您就不会在可怜的开发人员努力让事情正常工作的背后堆积大量的更改。

# perl - 在这种情况下，< 在 Perl 中做了什么？

> ID：10938184
> 
> 赞同：4
> 
> 时间：2012-06-07T19:00:28.003
> 
> 标签：perl, syntax, cgi

我对这段代码中第二行的作用感到困惑。我认为 $runas 应该评估为用户的 uid。$< 有什么作用？这包含在 CGI 脚本中。

```
my $runAS = (getpwnam("username"))[2];
$runAS = $< if ($runAS == 0); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T19:03:53.550

`$<`是perl中的一个[特殊变量：](http://perldoc.perl.org/perlvar.html)

> 这个进程的真实 uid。您可以使用 POSIX::setuid() 同时更改真实 uid 和有效 uid。由于对 $< 的更改需要系统调用，请检查 $! 更改后尝试检测任何可能的错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T19:05:24.887

来自[http://perldoc.perl.org/perlvar.html](http://perldoc.perl.org/perlvar.html)

```
$< 
```

这个进程的真实 uid。您可以使用 POSIX::setuid() 同时更改真实 uid 和有效 uid。由于对 $< 的更改需要系统调用，请检查 $! 更改后尝试检测任何可能的错误。

助记符：如果您正在运行 setuid，则它是您来自的 uid。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T19:05:24.527

从`perlvar`手册页：

> $< 这个进程的真实 uid。

因此，`$<`返回用户的真实数字 ID。这不是用户的用户名，而是系统管理员分配的号码。例如，如果您的用户名是 a`aglassman`和 mine, `thb`，在同一个系统上，那么您的 UID 可能是 1005 而我的用户名可能是 1006，这取决于系统管理员首先创建了我们的哪个帐户。在 Linux 平台上，查看`/etc/passwd`系统 UID 的文件。

# css - 更少的 CSS 关键字和语法的完整列表？

> ID：10938191
> 
> 赞同：2
> 
> 时间：2012-06-07T19:00:54.333
> 
> 标签：css, syntax, less, keyword

我在这里有点迷茫，我去了LESS网站并阅读了教程，但我无法弄清楚LESS网站上Guards，Mixin's，parametric mixin's等下列出的关键字是否是关键字的完整列表| 句法。

换句话说，有没有地方我可以找到所有语法 | LESS 中使用的关键字？还是基于 JavaScript？如果是这样，JavaScript 允许使用什么语法？抱歉，如果这个问题是“Duh”，但 LESS 网站上的文档似乎很薄，我想知道是不是因为我没有以某种方式连接这些点。那里有真正详细的tuts吗？

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:58:52.077

less.js[网站](http://lesscss.org/)目前拥有最新版本（1.3.0）最完整的文档。

它严重缺失

1.  有关范围的信息 - 至少描述不完整/不清楚，并且 less.js 不能始终如一地处理它
2.  有关创建选择器的信息。例如你可以这样做 (~"@{selector_var}") { display: block; } 将变量写入选择器
3.  关于 mixins 的延续参数的信息.. 你可以做的 .a (@b, ...) { display: @arguments; 为了允许使用可变数量的参数调用 mixin

上面缺少的功能是在 1.3.0 中添加的，因此希望很快会添加到网站中。

[The less issues](https://github.com/cloudhead/less.js/issues)中还有大量帮助/信息，我正在尝试更新/编写[有关 .net 端口 dotless 的更多信息](https://github.com/dotless/dotless/wiki)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:28:40.433

我不知道您查看了哪些网站，但您可能会感兴趣：[less](https://github.com/cloudhead/less.js/issues) , [less 2](https://gist.github.com/674726) , [less 3](http://nittygrittyjs.com/blog/why-less-is-a-pain-in-the-sass/) , [less 4](http://coding.smashingmagazine.com/2011/09/09/an-introduction-to-less-and-comparison-to-sass/)

# twitter-bootstrap - 如何使用 twitter bootstrap 使颜色框响应？

> ID：10938192
> 
> 赞同：2
> 
> 时间：2012-06-07T19:01:07.967
> 
> 标签：twitter-bootstrap, colorbox

我已经能够在boostrap中实现colorbox并且它正在工作，但是在让它响应时遇到了问题。我的意思是，如果页面是全尺寸的，图像或幻灯片将在颜色框模式中正确打开，但它不会按比例缩小到缩小浏览器的屏幕尺寸。它以缩小的响应模式打开全尺寸，导致您必须滚动才能查看图像或关闭它。我知道可以使用以下方法缩放轮播：

img {最大宽度：100%;}

此外，当正确使用或调用时，引导模式将作为其功能的一部分自然扩展。

在网上找到了一些不太相似的帖子后，我仍在学习所有这些，并且尝试了很多调整但没有成功。

任何见解将不胜感激。

再次感谢.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T17:53:32.620

这个问题不一定与引导程序有关。

我发现一篇类似的帖子讨论了这个颜色框主题，其中一个答案指向官方颜色框网站并提供了解决方案。

我可以确认这个答案有效。[https://stackoverflow.com/a/13105833/728675](https://stackoverflow.com/a/13105833/728675)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-26T12:59:35.753

在 colorbox.js 的缩小版本中搜索字符串 "initialWidth:"600",innerWidth:!1,maxWidth:!1," 并将其替换为 initialWidth:"600",innerWidth:!1,maxWidth:"100% ","

在非缩小版本中（如果您正在使用它）将“maxWidth: false”替换为“maxWidth: 100%”

# ruby - 递归自我改进

> ID：10938194
> 
> 赞同：1
> 
> 时间：2012-06-07T19:01:14.473
> 
> 标签：ruby, algorithm

开发了一个展示基本智能的简单算法后，我热衷于进行递归自我改进，但我遇到的问题是由于我对递归缺乏了解。

我知道，如果我有一些东西可以评估我用于改进的算法的“适合性”（我为算法提供了自身的二进制表示），那么它使用它必须生成的新二进制算法的基本智能，比本身）。

但是我需要知道的是，我如何评估算法的适应度？我通常会这样做

```
if @variable == true
  fitness += 1
end 
```

但是如果适应度是算法本身产生的算法的能力，我怎么能测量这个，因为如果没有产生新算法本身就无法测试产生的算法等等......

干杯马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:19:44.590

Recursion is almost always a bad idea for algorithms that can be implemented using another approach. Ruby has a number of problems when working at extreme stack depths such as increasing cost of garbage collection, significant stack overhead, and a relatively low ceiling which may result in "stack level too deep" errors.

You would probably be better off creating independent objects that do not share state. Instead of recursing, iterate. Where applicable, use your own self-managed stack such as an Array you `push` and `shift` elements from.

Some example code might be:

```
candidate = stack.shift

if (candidate.fitness > minimum_fitness)
  stack.push(candidate.spawn)
end 
```

A method like `spawn` would do whatever magical GA things you need to do and return a *new*, independent instance. This could be augmented to combine with another candidate if required.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:18:23.033

```
def self_improve(level)
  return level if level == 100 #this is the brake
  level += 1
  self_improve(level)
end

p self_improve(1) #=>100 
```

# css - 100% Div 导致孩子的底部边缘被切断

> ID：10938195
> 
> 赞同：0
> 
> 时间：2012-06-07T19:01:24.520
> 
> 标签：css, margin

我有一个 100% 高度的#wrapper div。在这里面我有几个内容 div，每个都显示为 inline-block 并有一个底部边距。问题是这个底部边距不知何故被折叠了。

可以通过非常简单的代码看到问题：

```
<div id="wrapper">
    <div id="content">
        <!-- lots of content here that will fill the browser window -->
    </div>
</div> 
```

我创建了一个可以在这里看到的例子：http: [//jsfiddle.net/Y6tJw/](http://jsfiddle.net/Y6tJw/)

我感觉这是一个 webkit 问题，因为 Firefox 和 IE 都以适当的边距呈现页面。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:15:21.553

不要问我为什么它会起作用，但这会起作用[http://jsfiddle.net/Y6tJw/2/](http://jsfiddle.net/Y6tJw/2/)

风格

```
#wrapper { height: 100%; background: blue; }
#innerwrap { padding-bottom:300px; background: blue;} 
```

HTML

```
<div id="wrapper">
<div id="innerwrap">
<div id="content">
    <!-- lots of content here that will fill the browser window -->
</div>
</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:18:56.370

发生这种情况是因为您使用`min-height`. 尝试给`height:auto;`这会工作

# php - foreach 和数组的错误

> ID：10938200
> 
> 赞同：1
> 
> 时间：2012-06-07T19:01:36.710
> 
> 标签：php, mysql, html, database, foreach

嗨，我正在使用 foreach 将一本书的多个作者插入到我的数据库中。

这是foreach：

```
foreach ($_POST["authors"] as $author) 
{
    $sqlAuthor = "INSERT INTO book_author (book_ISBN, author_ID)
        VALUES('$isbn','$author')";

    mysql_query($sqlAuthor);
} 
```

我正在`select multiple`从我的页面中获取作者，为此我创建了一个函数来显示在`select multiple`可用的作者中。

该代码正在生成我希望它在我的数据库中的页面中生成的内容（所有作者的姓名）

这是`multiple()`功能：

```
<?php include ("includes/connections.php");
    function multiple($intIdField, $strfNameField, $strlNameField, $strTableName, $strOrderField, $strNameOrdinal, $strMethod="asc") {
       echo "<select multiple=\"multiple\" name=\"$strNameOrdinal\[\]\">\n";

       $strQuery = "select $intIdField, $strfNameField, $strlNameField
                   from $strTableName
                   order by $strOrderField $strMethod";

       $rsrcResult = mysql_query($strQuery);

       while($arrayRow = mysql_fetch_assoc($rsrcResult)) {
          $strA = $arrayRow["$intIdField"];
          $strB = $arrayRow["$strlNameField"] . " " . $arrayRow["$strfNameField"];    
          echo "<option value=\"$strA \">$strB</option>\n";
       }

       echo "</select>";
    }
?> 
```

现在由于某种原因，它会引发以下错误：

`Notice: Undefined index: authors in C:\xampp\htdocs\ex\addBook.php on line 63`

`Warning: Invalid argument supplied for foreach() in C:\xampp\htdocs\ex\addBook.php on line 63`

我想它告诉我它找不到`authors`数组，但我觉得很奇怪

这里是html里面的php代码调用`multiple()`函数：

`<?php multiple("author_ID", "author_firstname", "author_lastname", "author", "author_lastname", "authors"); ?>`

有人知道我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:08:40.767

改成

```
echo "<select multiple=\"multiple\" name=\"{$strNameOrdinal}[]\">\n"; 
```

并在使用它之前检查它是否像其他人建议的那样设置。

编辑：与手头的问题无关，但您在 之后有一个额外的空间`$strA`，如果不是故意的，请更改为。

```
echo "<option value=\"$strA\">$strB</option>\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:05:29.057

每次使用 foreach 时都会将其嵌套在 if 中：

```
if (count($_POST["authors"])) {
    foreach ($_POST["authors"] as $author)  {
       ...
    }
} 
```

因此，如果数组中有 0 个元素，或者它不是数组（字符串、null、其他任何内容），您将不会输入 if，也不会在 foreach 的错误参数上出现错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:06:44.207

`$_POST["authors"]`由于未定义或没有作者，它会抛出通知和错误。

只需使用`if(isset($_POST["authors"])) {`以确保数据已提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:14:00.753

改变这个：

```
foreach ($_POST["authors"] as $author) 
{ 
```

对此：

```
foreach ((array)$_POST["authors"] as $author) 
{ 
```

使其**空安全**。我也看不到“作者”从哪里发送到**addBook.php**以提出建议..

# css - css垂直对齐，奇怪的结果

> ID：10938208
> 
> 赞同：0
> 
> 时间：2012-06-07T19:01:53.520
> 
> 标签：css

我创建了一个 jsfiddle [http://jsfiddle.net/zkLav/](http://jsfiddle.net/zkLav/)显示代码在运行中。发生的事情是图像和文本对齐是步进堆叠而不是垂直对齐。谁能解释为什么会这样？

**CSS**标记：

```
.outList {
    display:table;
}
.outList span {
    display:table-cell;
    vertical-align:middle;
    width:10%;
}
.outList h4 {
    display:table-cell;
    vertical-align:middle;
    width:50%;
    padding-left: 10px;
}
.outList p {
    float:right;
    display:table-cell;
    vertical-align:middle;
    /*width:30%;*/
    text-align:right;
}
.outList img {
    width:100%;
} 
```

**HTML**标记：

```
<ul>
    <li data-theme="c">
    <a href="detail.html">
        <div class="outList">
            <span><img src="simgs/listview_chk.png" /></span>
            <h4>Warmup</h4>
            <p>5 Minutes</p>
        </div>                             
    </a>                  
    </li> 

    <li data-theme="c">
    <a href="detail.html">
        <div class="outList">
            <span><img src="simgs/listview_chk.png" /></span>
            <h4>Machine Press</h4>
            <p>3 sets of</p>
        </div>                             
    </a>                  
    </li>

    <li data-theme="c">
    <a href="detail.html">
        <div class="outList">
            <span><img src="simgs/listview_chk.png" /></span>
            <h4>Lateral Pulldowns</h4>
            <p>3 sets of</p>
        </div>                             
    </a>                  
    </li>
</ul>​
​ 
```

问题的正确图像：

![在此处输入图像描述](../Images/67697bdc1862f5a51a71a92b8b6cd5b1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:12:22.147

好的，看看[这个更新](http://jsfiddle.net/luissanchezm86/zkLav/1/)

只需删除下一个 .css 类中的宽度：

```
.outList img {
    width: 100%;
} 
```

**更新**

要使右侧的文本完全对齐，请`float:right;`从`p`类中删除：

```
.outList p {
    float:right;
    display:table-cell;
    vertical-align:middle;
    /*width:30%;*/
    text-align:right;
} 
```

[检查此新更新](http://jsfiddle.net/luissanchezm86/zkLav/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:05:04.300

摆脱 div，你不需要它们，因为你有 li 的。

另外，为什么要跨越img？摆脱它。

* * *

当您这样做时，将 ul 作为表，将 li 作为行，然后将 a 中的内容作为列。

# jquery - jQuery遏制不适用于chrome，safari

> ID：10938209
> 
> 赞同：0
> 
> 时间：2012-06-07T19:02:03.737
> 
> 标签：jquery, google-chrome, safari, drag-and-drop, jsplumb

我在代码中添加了一些可拖动的对象，包含问题。在 chrome 中，对象可以移动到 div 的外侧，否则容器不起作用

这是我的示例网址：[Circle Dagger](http://webxtreams.net/demoprofiles004/circledragger.html)

（当您将对象拖到右侧的末尾时会发生这种情况，然后将另一个对象拖到右侧它可以移动到 div 之外）请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:40:36.287

添加`overflow: hidden`到`div.wraproundx`.

由 jsPlumb 插件创建的铅垂线创建了溢出容器边界的 svg 元素。显然，Chrome 和 jQuery UI 在这方面存在问题，所以你必须设置`overflow: hidden`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:39:53.323

尝试将其用作遏制

```
[
    $('#id'+randID).offset().left, 
    $('#id'+randID).offset().top,
    $('#id'+randID).offset().left+616,
    $('#id'+randID).offset().top+50
] 
```

而不是包含：$('#id') 并通过替换 (616) 和 (50) 进行调整，它在 chrome 和 FF 上工作正常

# java - 获取项目的所有包

> ID：10938212
> 
> 赞同：0
> 
> 时间：2012-06-07T19:02:24.190
> 
> 标签：java, eclipse, plugins

我有项目的名称，所以我可以通过

```
IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(proj.getName());
IJavaProject jProj = (IJavaProject) project.getNature(JavaCore.NATURE_ID); 
```

获得项目后，我想获取项目中所有包的名称。

我该怎么做？

# sql - SQL Server 2008 - 用户“...”的 Reporting Services 登录失败

> ID：10938219
> 
> 赞同：1
> 
> 时间：2012-06-07T19:02:58.467
> 
> 标签：sql, sql-server, sql-server-2008, reporting-services

下午好，

我在使用我在 SQL Server 上创建的名为“ReportUser”的用户的凭据运行具有保存在报表服务器上的数据源的报表时遇到困难。为了解决这个问题，我将用户映射到具有 db_owner 角色的“ReportServer”数据库，并将默认数据库设置为“ReportServer”。但是，每次我尝试运行报告时都会收到错误消息：

**无法创建与数据源“测试”的连接。用户“ReportUser”登录失败。**

我在本地计算机上运行 SQL Server 2008，并且在使用 Windows 身份验证设置数据源时能够成功运行报告。关于尝试将 SQL 身份验证与“ReportUser”一起使用时可能导致问题的任何想法

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:48:23.833

感谢你的回复。

我相信我找到了问题的原因。由于这是出于测试目的进行的本地安装，因此我只是使用 Windows 身份验证设置了 SQL Server 实例。但是，我犯了一个错误，即没有为 Windows 和 SQL 身份验证设置服务器。以下链接帮助我解决了这个问题。

[http://forums.asp.net/t/1784261.aspx/1?Could+not+connect+to+database+login+failed+for+user+sa](http://forums.asp.net/t/1784261.aspx/1?Could+not+connect+to+database+login+failed+for+user+sa)

更改此设置并重新启动 SQL Server 后，现在一切似乎都在正常运行。

# ios - 如何为多个属性创建 CABasicAnimation？

> ID：10938223
> 
> 赞同：34
> 
> 时间：2012-06-07T19:03:11.140
> 
> 标签：ios, animation, core-animation, caanimation

我有这段代码来为 CALayer 元素设置动画。

```
CABasicAnimation *makeBiggerAnim=[CABasicAnimation animationWithKeyPath:@"radius"];
makeBiggerAnim.duration=0.2;
makeBiggerAnim.fromValue=[NSNumber numberWithDouble:20.0];
makeBiggerAnim.toValue=[NSNumber numberWithDouble:40.0];
makeBiggerAnim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]; 
```

我的问题是，现在一切正常，我想同时拥有同一个元素的另一个属性。我见过你可以做附加动画和东西。

我的问题是：

*   添加剂属性是最好/唯一的方法吗？（一次动画同一对象的多个属性）

谢谢！

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-07T19:24:17.867

您可以在其上创建`CAAnimationGroup`并自定义持续时间和计时功能。然后你创建所有你的`CABasicAnimations`，将它们设置为值并将它们添加到动画组中。最后，将动画组添加到您正在制作动画的图层中。

这里有一个例子：

```
CABasicAnimation *makeBiggerAnim=[CABasicAnimation animationWithKeyPath:@"cornerRadius"];
makeBiggerAnim.fromValue=[NSNumber numberWithDouble:20.0];
makeBiggerAnim.toValue=[NSNumber numberWithDouble:40.0];

CABasicAnimation *fadeAnim=[CABasicAnimation animationWithKeyPath:@"opacity"];
fadeAnim.fromValue=[NSNumber numberWithDouble:1.0];
fadeAnim.toValue=[NSNumber numberWithDouble:0.0];

CABasicAnimation *rotateAnim=[CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
rotateAnim.fromValue=[NSNumber numberWithDouble:0.0];
rotateAnim.toValue=[NSNumber numberWithDouble:M_PI_4];

// Customizing the group with duration etc, will apply to all the
// animations in the group
CAAnimationGroup *group = [CAAnimationGroup animation];
group.duration = 0.2;
group.repeatCount = 3;
group.autoreverses = YES;
group.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
group.animations = @[makeBiggerAnim, fadeAnim, rotateAnim];

[myLayer addAnimation:group forKey:@"allMyAnimations"]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-02-24T04:46:10.537

```
let groupAnimation = CAAnimationGroup()
groupAnimation.beginTime = CACurrentMediaTime() + 0.5
groupAnimation.duration = 0.5

let scaleDown = CABasicAnimation(keyPath: "transform.scale")
scaleDown.fromValue = 3.5
scaleDown.toValue = 1.0
let rotate = CABasicAnimation(keyPath: "transform.rotation")
rotate.fromValue = .pi/10.0
rotate.toValue = 0.0
let fade = CABasicAnimation(keyPath: "opacity")
fade.fromValue = 0.0
fade.toValue = 1.0

groupAnimation.animations = [scaleDown,rotate,fade]
loginButton.layer.add(groupAnimation, forKey: nil) 
```

这是关于 swift (swift 3) 的最新更新。您的代码应在末尾包含一个对象，即 UIButton、UILabel，您可以制作动画。在我的代码中，它是 loginButton（它是标题或名称）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-29T09:25:59.023

在**Swift-3**中，我们可以使用**CAAnimationGroup**如下：-

```
 let position = CAKeyframeAnimation(keyPath: "position")
        position.values = [ NSValue.init(cgPoint: .zero) , NSValue.init(cgPoint: CGPoint(x: 0, y: -20))  ,  NSValue.init(cgPoint: .zero) ]
        position.timingFunctions = [ CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseOut),  CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseOut)  ]
        position.isAdditive = true
        position.duration = 1.2

        let rotation = CAKeyframeAnimation(keyPath: "transform.rotation")
        rotation.values = [ 0, 0.14, 0 ]
        rotation.duration = 1.2
        rotation.timingFunctions = [ CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseOut),  CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseOut)  ]

        let fadeAndScale = CAAnimationGroup()
        fadeAndScale.animations = [ position, rotation]
        fadeAndScale.duration = 1 
```

# c# - XML 序列化 - 为什么我不能更改编码？

> ID：10938224
> 
> 赞同：1
> 
> 时间：2012-06-07T19:03:16.463
> 
> 标签：c#, xml, serialization

这应该是一个简单的。

我将 C# 对象的 List<> 序列化为 XML 文档。一切都很顺利，但是我的 XML 文档具有 ASCII 编码（`X0020`例如，空格表示为）并且客户端在抱怨，所以我想将编码更改为 UTF8，如下所示：

```
private void SerializeToXML(List<ResponseData> finalXML)
{
    XmlSerializer serializer = new XmlSerializer(typeof(List<ResponseData>));
    TextWriter textWriter = new StreamWriter(txtFileLocation.Text, Encoding.UTF8);
    serializer.Serialize(textWriter, finalXML);
    textWriter.Close();
} 
```

Intellisense 告诉我这应该可以工作......

![智能感知](../Images/634fb31d9134ba98077bad5ee1469f77.png)

...但是当我尝试时抱怨...

![错误](../Images/1718893ad1725485220e6a5026459758.png)

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:09:04.807

StreamWriter 构造函数没有 (string, Encoding) 方法签名。

构造函数有一个 (Stream, Encoding) 签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:26:15.530

这是一个像魅力一样工作的片段：

```
using (Stream stream = File.Open(SerializeXmlFileName, FileMode.Create))
{
    using (TextWriter writer = new StreamWriter(stream, Encoding.UTF8))
    {
         XmlSerializer xmlFormatter = new XmlSerializer(this.Member.GetType());
         xmlFormatter.Serialize(writer, this.Member);
         writer.Close();
    }

    stream.Close();
} 
```

# c# - 在 Windows 窗体应用程序中获得一致的 CPU 使用率

> ID：10938228
> 
> 赞同：1
> 
> 时间：2012-06-07T19:03:35.513
> 
> 标签：c#, visual-studio, cpu-usage

有没有人知道如何为 Windows 窗体应用程序上显示的多个服务器获得一致的 CPU 使用率？

我遇到了一些服务器持续运行高的问题，我需要密切关注。所以我已经构建了一个用于重启的 Windows 窗体应用程序和一个 RDP 选项，但我想将 CPU 添加到每个服务器标签的一侧。

因此，如果有可能，一旦达到某个阈值，我该如何让它通知我？

谢谢。克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:15:15.463

使用[PerformanceCounters](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)查看局域网中的处理器使用情况。这几行代码将获取当前机器中的处理器使用情况（机器名是构造函数中的第四个参数）：

```
PerformanceCounter perf = new PerformanceCounter("Processor", "% Processor Time", "_Total", ".");
double procUsage = perf.NextValue(); // first reading returns 0.0 for this kind of PerfCounter
procUsage = perf.NextValue(); // Now the procUsage variable holds the real processor usage 
```

请注意，第一次读取操作将返回 0.0，但接下来的读数将返回适当的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:12:14.923

一种选择是使用[System.Diagnostics.PerformanceCounter](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)来监视每台服务器上的 CPU 计数器。这将为您提供与从 Windows 性能监视器 (PerfMon) 中获得的基本相同的数字。

# ios - 每次我获取同一个 NSManagedObject 时，Core Data 都会返回一个不同的对象实例。为什么是这样？

> ID：10938229
> 
> 赞同：4
> 
> 时间：2012-06-07T19:03:37.703
> 
> 标签：ios, core-data, fetch, nsmanagedobject

我最近注意到，如果我获取一个 ManagedObject ，我可以验证模型中只有一个并且没有保留在我的应用程序中的任何位置，每次获取返回对象时它都是一个不同的实例（带有指向不同的内存地址）。为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:06:21.960

如果没有人保留它，Core Data 可以自由地发布它。如果您再次要求它，它可能会位于不同的内存位置。你不能指望它是同一个对象实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:06:36.547

A given`NSManagedObject`与特定的 相关联`NSManagedObjectContext`，因此如果您更改上下文，则必然会更改对象。如果对象发生故障，如果 MOC 已释放对象，您也可能会收到一个新实例。这是 Core Data 如何保持低内存使用的一部分。

# ruby-on-rails - 如何在 Heroku 上配置登台环境？

> ID：10938240
> 
> 赞同：9
> 
> 时间：2012-06-07T19:04:17.787
> 
> 标签：ruby-on-rails, heroku

我在 Heroku 上有一个使用 Postgres 9 beta 的 Rails 应用程序。

我尝试使用

`heroku config:add RACK_ENV=staging --remote staging`

但该应用程序仍然认为它在生产环境中。

```
Rails.env
=>"production" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T19:19:30.960

您是否也添加了 RAILS_ENV=staging ？

# python - 我写了一个 pygame 程序，但是当我尝试使用 py2exe 时，我没有在 dist 中得到一个 exe

> ID：10938242
> 
> 赞同：2
> 
> 时间：2012-06-07T19:04:25.127
> 
> 标签：python, pygame, exe, py2exe

我编写了一个名为 Hello.py 的程序，如下所示：

```
import pygame, sys
from pygame.locals import *

# set up pygame
pygame.init()

# set up the window
windowSurface = pygame.display.set_mode((500, 400), 0, 32)
pygame.display.set_caption('Hello world!')

# set up the colors
BLACK = (0, 0, 0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)

# set up fonts
basicFont = pygame.font.SysFont(None, 48)

# set up the text
text = basicFont.render('Hello world!', True, WHITE, BLUE)
textRect = text.get_rect()
textRect.centerx = windowSurface.get_rect().centerx
textRect.centery = windowSurface.get_rect().centery

# draw the white background onto the surface
windowSurface.fill(WHITE)

# draw a green polygon onto the surface
pygame.draw.polygon(windowSurface, GREEN, ((146, 0), (291, 106), (236, 277), (56, 277), (0, 106)))

# draw some blue lines onto the surface
pygame.draw.line(windowSurface, BLUE, (60, 60), (120, 60), 4)
pygame.draw.line(windowSurface, BLUE, (120, 60), (60, 120))
pygame.draw.line(windowSurface, BLUE, (60, 120), (120, 120), 4)

# draw a blue circle onto the surface
pygame.draw.circle(windowSurface, BLUE, (300, 50), 20, 0)

# draw a red ellipse onto the surface
pygame.draw.ellipse(windowSurface, RED, (300, 250, 40, 80), 1)

# draw the text's background rectangle onto the surface
pygame.draw.rect(windowSurface, RED, (textRect.left - 20, textRect.top - 20, textRect.width + 40, textRect.height + 40))

# get a pixel array of the surface
pixArray = pygame.PixelArray(windowSurface)
pixArray[480][380] = BLACK
del pixArray

# draw the text onto the surface
windowSurface.blit(text, textRect)

# draw the window onto the screen
pygame.display.update()

# run the game loop
while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit() 
```

我有一个名为 setup.py 的程序，它看起来像这样：

```
from distutils.core import setup
import py2exe
import pygame

setup(window=['Hello.py']) 
```

当我运行 py2exe 时，它​​会创建一个 dist 文件夹，但在文件夹内没有 exe 文件，只有它创建的其他文件。我讨厌一直问这样的问题，但我的时间有点短，没有时间用我的电脑播放 20 条错误消息。我目前正在运行 Windows Vista。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:50:19.083

Pygame已经有一个使用pygame和py2exe的默认程序，Pygame2exe。这是它的[链接](http://www.pygame.org/wiki/Pygame2exe?parent=CookBook)。只需在 BuildExe 中填写参数即可。**__*初始化*__**并运行它。您甚至不必在控制台中运行它，因为它会将“py2exe”添加到参数中。希望这个答案有帮助！

# shell - 如何为从 cron 运行的脚本生成自动应答

> ID：10938244
> 
> 赞同：0
> 
> 时间：2012-06-07T19:04:39.693
> 
> 标签：shell, response, crontab

我想从 cron 运行一个 shell 脚本，并让它自动回答。我怎么做？

我试图在 crontab 上放一个脚本。系统是Linux。脚本的一个命令提示一个问题，必须回答（是/否） 例如：手动执行脚本时，脚本执行命令。命令提示问题：你打算删除吗？[Y/N] 和系统等待响应。我回答“Y”并按 ENTER，然后脚本执行删除。

我打算把这个脚本放在 crontab 上。我希望命令会自动回答是的。我该怎么做 crontab ？非常感谢/问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:18:18.883

你有两个选择：

1.  该命令可能有一个不提示问题的开关。例如`rm`有开关`-f`（力），所以使用`rm -f $file`不会提示任何东西。如果可能的话，我更喜欢这个选项。

2.  使用[yes](http://linux.die.net/man/1/yes)命令，该命令恰好适用于这种情况。例如，如果有的话，`yes | rm foo`将自动回答`y`提示`rm`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T19:15:51.970

## 带有管道的通用 Cron

大多数 shell 都可以访问*yes*命令。您可以将其通过管道传输到 cron 作业中的脚本中。

```
* * * * * yes | myscript.sh 
```

## Vixie Cron 和标准输入

除了上述之外，如果您使用 vixie-cron，您还可以使用百分号将标准输入提供给您的命令。crontab(5) 说：

> 命令中的百分号 (%)，除非用反斜杠 (\) 转义，否则将更改为换行符，第一个 % 之后的所有数据将作为标准输入发送到命令。无法将单个命令行拆分为多行，例如 shell 的尾随“\”。

使用 vixie-cron，以下示例会将标准输入上的字母“y”传递给您的脚本：

```
* * * * * myscript.sh % y 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-17T19:01:00.350

你可以加

> --交互式=0

在命令的末尾。对于任何询问是/否的 cron 命令，这将自动返回是。

# javascript - Greasemonkey 获取所有打开标签的名称

> ID：10938247
> 
> 赞同：3
> 
> 时间：2012-06-07T19:04:50.413
> 
> 标签：javascript, tabs, greasemonkey

我的最终目标是拥有一个自动完成列表，显示所有打开的选项卡（在 Firefox 中），我可以将其减少到我想切换到下一个的选项卡。

我可以完成/组合框等，但我不知道如何获取所有名称的列表（并且网站图标将是一个巨大的奖励）。将不胜感激任何指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:25:02.480

GreaseMonkey 不是在单个网页的上下文中运行吗？我不认为它可以访问其他选项卡。

如果您进行普通分机，则可以`window.getBrowser().browsers`按照此处所述进行呼叫：

[从 Firefox 扩展检测标签已关闭（关闭后）](https://stackoverflow.com/questions/9572466/detecting-tab-closed-after-closed-from-firefox-extension)

除了学习一点 XUL 之外，您的扩展可能很容易移植。

[如何构建一个 FireFox 扩展](http://lifehacker.com/264490/how-to-build-a-firefox-extension)

如果您只想要功能，这里有一个插件可以满足您的需求

[https://addons.mozilla.org/en-us/firefox/addon/list-all-tabs-menu/](https://addons.mozilla.org/en-us/firefox/addon/list-all-tabs-menu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-15T14:44:20.623

我为 Greasemonkey 写了类似的东西。这会将所有新打开的选项卡的标题添加到`ttl`字符串中。您必须将`//@grant GM_getValue`and`//@grant GM_setValue`放在用户脚本的开头。

```
var ttl = '';
ttl = GM_getValue('ttl');
ttl += document.title+',';
GM_setValue('ttl', ttl);
console.log('opened tabs:\n'+ttl);
window.addEventListener ('beforeunload', deleteTtl, false);
function deleteTtl (zEvent) {
    ttl = GM_getValue('ttl');
    ttl = ttl.replace(document.title+',','');
    GM_setValue('ttl', ttl);
} 
```

# python - 在python中无法获得单个\

> ID：10938256
> 
> 赞同：9
> 
> 时间：2012-06-07T19:05:27.623
> 
> 标签：python

我正在尝试学习python，而且我对它很陌生，我无法弄清楚这一部分。基本上，我现在所做的就是把网页的源代码取出来，把所有不是文字的东西都拿出来。

网页有很多 \n 和 \t，我想要一些可以找到 \ 并删除它与下一个 ' ' 之间的所有内容的东西。

```
def removebackslash(source):
    while(source.find('\') != -1):
        startback = source.find('\')
        endback = source[startback:].find(' ') + startback + 1
        source = source[0:startback] + source[endback:]
    return source 
```

是我所拥有的。它不是这样工作的，因为`\'`不会关闭字符串，但是当我更改`\`为时`\\`，它会将字符串解释为`\\`. 我无法弄清楚任何被解释为`'\'`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-07T19:06:50.237

`\`是转义字符；它要么赋予字符特殊的含义，要么带走所说的特殊含义。现在，它正在转义结束单引号并将其视为文字单引号。您需要自行转义它以插入文字反斜杠：

```
def removebackslash(source):
    while(source.find('\**\**') != -1):
        startback = source.find('\**\**')
        endback = source[startback:].find(' ') + startback + 1
        source = source[0:startback] + source[endback:]
    return source
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T19:09:08.823

尝试使用替换：

```
str.replace(old, new[, count]) 
```

返回字符串的副本，其中所有出现的子字符串 old 都替换为 new。如果给定了可选参数 count，则仅替换第一个 count 出现。

所以在你的情况下：

```
my_text = my_text.replace('\n', '')
my_text = my_text.replace('\t', '') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T19:43:36.417

正如其他人所说，您需要使用`'\\'`. 您认为这不起作用的原因是，当您获得结果时，它们看起来像是以两个反斜杠开头。但是它们不是以两个反斜杠开头的，只是 Python*显示了*两个反斜杠。如果没有，您将无法区分换行符（表示为`\n`）和反斜杠后跟字母 n（表示为`\\n`）之间的区别。

有两种方法可以让自己相信真正发生的事情。一种是在结果上使用 print ，这会导致它扩展转义：

```
>>> x = "here is a backslash \\ and here comes a newline \n this is on the next line"
>>> x
u'here is a backslash \\ and here comes a newline \n this is on the next line'
>>> print x
here is a backslash \ and here comes a newline 
 this is on the next line
>>> startback = x.find('\\')
>>> x[startback:]
u'\\ and here comes a newline \n this is on the next line'
>>> print x[startback:]
\ and here comes a newline 
 this is on the next line 
```

另一种方法是使用`len`来验证字符串的长度：

```
>>> x = "Backslash \\ !"
>>> startback = x.find('\\')
>>> x[startback:]
u'\\ !'
>>> print x[startback:]
\ !
>>> len(x[startback:])
3 
```

注意`len(x[startback:])`是 3。字符串包含三个字符：反斜杠、空格和感叹号。只需查看仅包含反斜杠的字符串，您就可以更简单地了解发生了什么：

```
>>> x = "\\"
>>> x
u'\\'
>>> print x
\
>>> len(x)
1 
```

`x``__repr__`当您在交互式提示下评估它时（或以其他方式使用它的方法），它看起来只是以两个反斜杠开头。当你实际打印时，你可以看到它只有一个反斜杠，当你查看它的长度时，你可以看到它只有一个字符长。

所以这意味着您需要转义 中的反斜杠`find`，并且您需要认识到输出中显示的反斜杠也可能加倍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T19:07:20.320

SO 自动格式显示您的问题。由于`\`用于转义字符，因此它转义了结束引号。尝试将该行更改为（注意使用双引号）：

```
while(source.find("\\") != -1): 
```

[在文档中](http://docs.python.org/reference/lexical_analysis.html#string-literals)阅读有关转义字符的更多信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-08T02:04:24.790

我认为还没有人提到这一点，但是如果您不想处理必须转义字符的问题，只需使用原始字符串即可。

```
source.find(r'\') 
```

在字符串之前添加字母*r*告诉 Python 不要解释任何特殊字符并保持字符串与您键入的完全相同。

# wpf - wpf datagrid 单元格验证

> ID：10938259
> 
> 赞同：0
> 
> 时间：2012-06-07T19:05:43.473
> 
> 标签：wpf, validation, datagrid, cell

当该列的每个单元格都有数字时，我的数据网格以某种方式将整列视为整数。而且它不允许我用文本值更新单元格。我不想在我的网格上进行任何类型的验证。如何禁用每个单元格的验证。

这是我所拥有的图像：

![在此处输入图像描述](../Images/dbd74409b2ecdf8a169ae2a350abd9df.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:54:12.750

将您的 clr 属性声明为字符串。

# android - 如何将 tweepy 模块与 sl4a 和 py4a 一起使用？

> ID：10938261
> 
> 赞同：0
> 
> 时间：2012-06-07T19:05:50.707
> 
> 标签：android, python, twitter, sl4a, tweepy

我正在尝试使用 tweepy 构建一个用 python 编写的 twitter 客户端，并使其在 Android 上的 sl4a（使用 py4a）上运行。但我似乎无法在我的主脚本中导入 tweepy 模块。脚本不运行。请告诉我在 sl4a 中使用 tweepy 的正确方法，因为在 sl4a 的脚本目录中复制粘贴 tweepy 目录不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:08:59.427

Python for Android 应用程序允许您导入模块 zip，并且在网络上和 SL4A 常见问题解答中有关于将模块复制到 SD 卡上的何处以尝试安装它们以及安装 Python Eggs [[链接]](http://code.google.com/p/android-scripting/wiki/FAQ#Can_I_install_other_Python_modules?)的说明。您也可以尝试`setup.py`在手机上运行 tweepy（可在下载中找到）。

但是，tweepy 也有可能具有您手机上不存在的其他要求，例如通常由`easy_install`等安装的其他模块。虽然我认为情况并非如此，但它肯定会使安装变得非常困难。

归根结底，根据常见问题解答，我认为您最好的选择是尝试将 tweepy 模块目录复制到`/sdcard/com.googlecode.pythonforandroid/extras/python`.

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T09:03:55.243

在此处下载适用于 Python 2.6 的 tweepy .egg：[https](https://pypi.python.org/pypi/tweepy/1.7.1) ://pypi.python.org/pypi/tweepy/1.7.1确保它位于 SD 卡的“下载”文件夹中。启动 Python for Android 应用程序并选择“导入模块”选项。选择刚刚下载的 tweepy .egg 文件。它应该可以正常工作。

# c - 将结构中的结构传递给 GSourceFunc 的最佳方法

> ID：10938262
> 
> 赞同：0
> 
> 时间：2012-06-07T19:05:56.173
> 
> 标签：c, gtk, gobject, clutter

哪种方式最好让 S 成为 GSourceFunc？或者两者都不是？

```
typedef struct{
//...
}S;

struct MS{
//..
S *St;
};

static gboolean AL_Calback(gpointer data){
    S *St = (S*)user_data;
    St->Something = SomethingElse;
    return TRUE;
} 

int main (int argc, char *argv[]){

    //...
    MS *MainStruct = gnew0(MS, 1);
    Mainstruct->St = gnew0(S, 1);
    clutter_threads_add_timeout_full(G_PRIORITY_HIGH, 100, AL_Callback, MainStruct->St, NULL); 
    //...
    } 
```

或者像这样，

```
typedef struct{
//...
}S;

struct MS{
//..
S St;
};

static gboolean AL_Calback(gpointer data){
    MS *MV = (MS*)user_data;
    MV->S.something = SomethingElse;    
    return TRUE;
} 

int main (int argc, char *argv[]){

    //...
    MS *MainStruct = gnew0(MS, 1);
    clutter_threads_add_timeout_full(G_PRIORITY_HIGH, 100, AL_Callback, MainStruct, NULL); 
    //...
    } 
```

我尝试了其他方法，但无法使它们起作用。clutter_add_timeout 需要将指针作为参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:11:38.583

如果您将参数传递给`clutter_threads_add_timeout_Full`via 指针，那么您可以只传递`St`成员的地址，`MainStruct`从而减少对动态分配的需求（对于内部结构）。

```
struct MainStruct{
  //..
  S St; // note: no pointer
};

// in main
MainStruct* ms = gnew0(MS, 1);
clutter_threads_add_timeout_Full(G_PRIORITY_HIGH, 100, AL_Callback, &(ms->St),
    NULL); 
```

**编辑**：更新代码以动态分配`MainStruct`结构以避免 ptomato 指出的可能的段错误

# google-ads-api - API adwords EntityNotFound.INVALID_ID @> operations[0].operand

> ID：10938264
> 
> 赞同：1
> 
> 时间：2012-06-07T19:06:00.150
> 
> 标签：google-ads-api

我正在使用适用于 java 的 adwords API，但是当我尝试“变异”我的广告系列时，我收到此错误：AxisFault

> 故障代码：{http://schemas.xmlsoap.org/soap/envelope/}服务器故障子代码：故障字符串：[EntityNotFound.INVALID_ID @操作[0].operand；触发器：'CampaignId：93996448'，EntityNotFound.INVALID_ID @操作[1].operand；trigger:'CampaignId: ******* ', EntityNotFound.INVALID_ID@operations[2].operand; trigger:'CampaignId: ******* ', EntityNotFound.INVALID_ID @ operations[3].operand; trigger:'CampaignId: ******* ', EntityNotFound.INVALID_ID@operations[4].operand; trigger:'CampaignId: ******* ', EntityNotFound.INVALID_ID @ operations[5].operand; trigger:'CampaignId: ******* ', EntityNotFound.INVALID_ID@operations[6].operand; 触发器：'CampaignId：*******', EntityNotFound.INVALID_ID @操作[7].operand; 触发器：'CampaignId：******* '

我不明白问题出在哪里，因为我已经将 adwords API 与 PHP 一起使用，并且从来没有出现过问题。

我创建了“CampaignCriterionOperation”操作的linkedList 2.add(new CampaignCriterionOperation(Operator.ADD,campaignCriterionType, new CampaignCriterion(campaign.getId(), location,campaignCriterionType)));

然后我改变campaing CampaignCriterionOperation[] operations = new CampaignCriterionOperation[operations2.size()]; CampaignCriterionReturnValue 结果=campaignServiceOperation.mutate(operations2.toArray(operations));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:28:13.287

该错误表明您在 CampaignCriterion 对象中使用的 CampaignId 无效。仔细检查您是否使用了正确的 ID。

# netty - 创建网关的最佳方法

> ID：10938265
> 
> 赞同：1
> 
> 时间：2012-06-07T19:06:04.170
> 
> 标签：netty

我编写了一个程序，它必须将串行 I/O 数据（我正在使用 RXTX 传输）中继到 HTTP 客户端。

我想知道用Netty做这件事的方法是什么？

我到目前为止是这样的：

串行数据 -> 帧分隔符 -> 自定义解码器 -> 处理 HTTP 调用的处理程序

我想应该有一种方法来编写我的最后一个上游处理程序，以便它“重用”管道，或者使用另一个管道（可能使用 codec-http 类——最像 web sockets 客户端类）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:26:47.887

您应该使用两个管道。一个用于串行数据，一个用于 HTTP 客户端。安排串行管道中的最后一个处理程序以了解 HTTP 客户端的 Channel。最后一个串行处理程序只需要在该通道上写入一些已知消息（POJO），HTTP 管道中的第一个下游处理程序将消息转换为 HTTP 请求。

# build - 为什么从源代码编译 Wireshark 会失败？

> ID：10938268
> 
> 赞同：1
> 
> 时间：2012-06-07T19:06:15.517
> 
> 标签：build, compiler-errors, wireshark

我一直在关注此文档以从源代码编译 Wireshark：

[http://www.wireshark.org/docs/wsdg_html_chunked/ChSetupWin32.html](http://www.wireshark.org/docs/wsdg_html_chunked/ChSetupWin32.html)

我从开始 > '所有程序' > Visual Studio 2008 > Visual Studio 工具 > Visual Studio 2008 命令提示符运行这些命令

我也在调用“C:\Program Files\Microsoft Visual Studio 9.0\VC\bin\vcvars32.bat”，但我相信这可以通过 VS2008 命令提示符为我完成。

这是我的输出`nmake -f Makefile.nmake verify_tools`：

```
Checking for required applications:
    cl: /cygdrive/c/Program Files/Microsoft Visual Studio 9.0/VC/BIN/cl 
    link: /cygdrive/c/Program Files/Microsoft Visual Studio 9.0/VC/BIN/link 
    nmake: /cygdrive/c/Program Files/Microsoft Visual Studio 9.0/VC/BIN/nmake 
    mt: /cygdrive/c/Program Files/Microsoft SDKs/Windows/v6.1/bin/mt 
    bash: /usr/bin/bash 
    bison: /usr/bin/bison 
    flex: /usr/bin/flex 
    env: /usr/bin/env 
    grep: /usr/bin/grep 
    /usr/bin/find: /usr/bin/find 
    peflags: /usr/bin/peflags 
    perl: /usr/bin/perl 
    C:\Python27\python.exe: /cygdrive/c/Python27/python.exe 
    sed: /usr/bin/sed 
    unzip: /usr/bin/unzip 
    wget: /usr/bin/wget 
```

在此之后，我继续运行命令：

```
nmake -f Makefile.nmake setup

nmake -f Makefile.nmake distclean

nmake -f Makefile.nmake all 
```

调用最后一个命令（'all'）后，编译运行了几分钟，来到`tshark-tap-register.c`

```
tshark-tap-register.c(6) : error C2182: 'File' : illegal use of type 'void'
tshark-tap-register.c(6) : error C2146: syntax error : missing ';'
before identifier 'STDIN' 
```

它以这种方式继续，引用越来越多的行号具有相同的错误。最后，它停止，输出：

```
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\cl.EXE"' : return code '0x2'

NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\nmake.exe"' : return code '0x2' 
```

如果有人对尝试的事情有建议，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:36:20.267

由于您正在使用 SVN 构建开发快照，因此您可能刚刚提取了一个修订版，该修订版在某处出现错误，导致 tshark-tap-register.c 生成错误。43154 和 43155 都为我构建，没有问题。

除非您需要开发分支中的前沿功能，否则您应该在将来从[Wireshark 下载页面获取最新的稳定源分发。](http://www.wireshark.org/download.html)

# sql - 使用连接更新 Informix 表

> ID：10938270
> 
> 赞同：11
> 
> 时间：2012-06-07T19:06:19.103
> 
> 标签：sql, informix

这是 Informix 更新的正确语法吗？

```
update table1
set table1.code = 100
from table1 a, table2 b, table3 c
where a.key = c.key
a.no = b.no
a.key = c.key
a.code = 10
b.tor = 'THE'
a.group = 4183
a.no in ('1111','1331','1345') 
```

我收到通用的 -201 'A syntax error has occurred' 消息，但我看不出有什么问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-07T10:10:05.350

不幸的是，接受的答案会导致 Informix Dynamic Server 版本 11.50 中出现语法错误。

这是避免语法错误的唯一方法：

```
update table1
set code = (
  select 100
  from table2 b, table3 c
  where table1.key = c.key
  and table1.no = b.no
  and table1.key = c.key
  and table1.code = 10
  and b.tor = 'THE'
  and table1.group = 4183
  and table1.no in ('1111','1331','1345')
) 
```

顺便说一句，要[获取 Informix 版本](http://www-01.ibm.com/support/docview.wss?uid=swg21289123)，请运行以下 SQL：

```
select first 1 dbinfo("version", "full") from systables; 
```

*更新：*也看到[这个答案](https://stackoverflow.com/a/51636262/2293304)。

*更新：*另见[文档](https://www.ibm.com/support/knowledgecenter/SSGU8G_14.1.0/com.ibm.sqlt.doc/ids_sqt_233.htm)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T19:24:47.773

你的语法错误是 table1.code

```
set table1.code = 100 
```

把它改成

```
set a.code = 100 
```

完整代码

```
update table1
set a.code = 100
from table1 a, table2 b, table3 c
where a.key = c.key
and a.no = b.no
and a.key = c.key
and a.code = 10
and b.tor = 'THE'
and a.group = 4183
and a.no in ('1111','1331','1345') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-12T15:08:46.033

问题中的原始 SQL 是：

```
update table1
set table1.code = 100
from table1 a, table2 b, table3 c
where a.key = c.key
a.no = b.no
a.key = c.key
a.code = 10
b.tor = 'THE'
a.group = 4183
a.no in ('1111','1331','1345') 
```

这是无条件地缺少一系列 AND 关键字。公认的解决方案还使用 of`table1`而不是其别名来识别 SET 子句中的问题`a`。这可能很重要；我无法测试它（见下面的讨论）。因此，假设连接 UPDATE 完全被接受，更正后的 SQL 应该是：

```
UPDATE table1
   SET a.code = 100
  FROM table1 a, table2 b, table3 c
 WHERE a.key = c.key
   AND a.no = b.no
   AND a.key = c.key
   AND a.code = 10
   AND b.tor = 'THE'
   AND a.group = 4183
   AND a.no IN ('1111','1331','1345') 
```

这与（语法更正）接受的答案相同。但是，我很想知道您正在使用哪个版本的 Informix 接受 FROM 语法（可能是 XPS？）。我在 Mac OS X 10.7.4 上使用 IDS 11.70.FC2（当前 11.70.FC5 版本后面的 3 个修复包），但无法使用 FROM 语法进行更新。此外，IBM 的[Informix 11.70 Information Center](http://publib.boulder.ibm.com/infocenter/idshelp/v117/topic/com.ibm.sqls.doc/ids_sqs_1254.htm) for UPDATE 的手册没有提及它。我不确定如果您使用 ODBC 或 JDBC 是否会有所不同；它不应该，但我使用的是 ESQL/C，它将 SQL 原封不动地发送到服务器。

我尝试的符号是（`+`是提示符）：

```
+ BEGIN;
+ CREATE TABLE a(a INTEGER NOT NULL, x CHAR(10) NOT NULL, y DATE NOT NULL);
+ INSERT INTO a(a, x, y) VALUES(1, 'obsoletely', '2012-04-01');
+ INSERT INTO a(a, x, y) VALUES(2, 'absolutely', '2012-06-01');
+ CREATE TABLE b(b INTEGER NOT NULL, p CHAR(10) NOT NULL, q DATE NOT NULL);
+ INSERT INTO b(b, p, q) VALUES(3, 'daemonic', '2012-07-01');
+ SELECT * FROM a;
1|obsoletely|2012-04-01
2|absolutely|2012-06-01
+ SELECT * FROM b;
3|daemonic|2012-07-01
+ SELECT *
  FROM a, b
  WHERE a.a < b.b
    AND b.p MATCHES '*a*e*';
1|obsoletely|2012-04-01|3|daemonic|2012-07-01
2|absolutely|2012-06-01|3|daemonic|2012-07-01
+ UPDATE a
  SET x = 'crumpet'
  FROM a, b
  WHERE a.a < b.b
    AND b.p MATCHES '*a*e*';
SQL -201: A syntax error has occurred.
SQLSTATE: 42000 at <<temp>>:23
+ SELECT * FROM a;
1|obsoletely|2012-04-01
2|absolutely|2012-06-01
+ ROLLBACK; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-19T14:09:47.420

这取决于您使用的版本。如果您至少使用 11.50，最好的解决方案是：

```
MERGE INTO table1 as t1
USING table2 as t2
   ON t1.ID = t2.ID
WHEN MATCHED THEN UPDATE set (t1.col1, t1.col2) = (t2.col1, t2.col2); 
```

在高于 11.50 的版本中删除了 UPDATE - SET - FROM - 语法。

如果您使用的是早期版本，则可以使用

```
UPDATE t SET a = t2.a FROM t, t2 WHERE t.b = t2.b; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-09T15:05:01.093

对于 Informix SE 7.25...

1.  UPDATE ... FROM ... 语法不存在
2.  您还“无法修改子查询中使用的表或视图”，这是在使用[Rockallite 的答案时给出的](https://stackoverflow.com/a/34652392/6490042)

另一种解决方案是将其分解为两个查询：

首先，获取所需记录的 ROWID（在多个表上过滤）：

```
SELECT a.ROWID
  FROM table1 a, table2 b, table3 c
 WHERE a.key = c.key
   AND a.no = b.no
   AND a.key = c.key
   AND a.code = 10
   AND b.tor = 'THE'
   AND a.group = 4183
   AND a.no IN ('1111','1331','1345') 
```

将结果放入逗号分隔的字符串中。

然后，仅更新在第一个查询中找到 ROWID 的主表的那些记录：

```
UPDATE table1 a
   SET a.code = 100
WHERE a.ROWID in ([comma separated ROWIDs found above]) 
```

# python - 在 Windows 上通过 pip 使用 fastmath（gmp 或 mpir）构建 PyCrypto

> ID：10938274
> 
> 赞同：6
> 
> 时间：2012-06-07T19:06:30.610
> 
> 标签：python, windows, pip, pycrypto

我通过 pip 在 Windows 上安装了 PyCrypto，但由于找不到 GMP，我无法构建 Crypto.PublicKey._fastmath。

[我知道voidspace](http://www.voidspace.org.uk/python/modules.shtml#pycrypto)上有一个二进制版本，但我想构建最新版本的 PyCrypto

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T21:50:37.053

以下是实现目标的一种方法。还有其他可能更好的方法（例如基于 Visual Studio），但这个方法对我有用。此外，它不使用`pip`.

所有操作都在命令提示符下进行。

1.  安装[Mingw](http://www.mingw.org/)，包括 MSYS 和开发工具包。这将为您提供一个相当完整的类 Unix 开发环境。
2.  确保 Mingw 二进制文件位于 PATH 环境变量中。你需要`MinGW\bin`和`MingGW\msys\1.0\bin`。
3.  在临时目录中下载[MPIR源。](http://www.mpir.org/)重要的是**不要**使用 2.5.1，因为存在会破坏构建的错误。2.5.0 没问题。
4.  构建 MPIR 库。这相当简单：执行`bash configure`后跟`make`.
5.  **HACK #1**`libmpir.a`从复制`mpir-2.5.0\.libs`到`C:\Python2.7.1\libs`. 这是必要的，因为`distutils`它已损坏，我找不到将其定向到正确库位置的方法。
6.  **HACK #2**编辑`C:\Python2.7.1\Lib\distutils\cygwincompiler.py`并删除任何出现的字符串`-mno-cygwin`。原因在[这里](http://www.secker.nl/2012/03/08/setup-python-2-7-2-and-mingw-on-windows-xp/)解释。
7.  下载[PyCrypto](https://www.dlitz.net/software/pycrypto/)源并将它们解压缩到另一个临时目录中。
8.  将`CPPFLAGS`环境变量设置为 MPIR 目录，其中包含`mpir.h`.
9.  **HACK 3**编辑`setup.py`并在方法中添加以下行`build_extension`：

    > self.__add_compiler_option(os.environ['CPPFLAGS'])

10.  运行`bash configure`。你应该看到两行说：

    > 检查 -lgmp 中的 __gmpz_init... 不
    > 检查 -lmpir 中的 __gmpz_init... 是

11.  执行`python setup.py build -c mingw32`。您应该看不到任何错误。
12.  执行`python setup.py test`以验证一切正常。
13.  执行`python setup.py install`以将文件复制到本地 Python 存储库中。
14.  或者，运行`python setup.py bdist_wininst`以创建安装程序。

我真的很讨厌所有各种黑客，我很想听听它们是否可以避免。

# java - 扩展微软的 JDBC 驱动是否可行？

> ID：10938285
> 
> 赞同：2
> 
> 时间：2012-06-07T19:06:53.630
> 
> 标签：java, sql-server, encryption, jdbc, overriding

我目前正在从事一个项目，我们从第三方供应商处购买了一个 Java Web 应用程序，该应用程序使用 Microsoft 的 JDBC 驱动程序连接到 SQL Server。但是，我被要求必须使用专有加密协议对连接字符串进行加密。

所以我的问题是扩展从 Microsoft 分发的 JDBC 驱动程序以包含这种加密是否可行。在这一点上，我主要考虑创建一个 JDBC 包装器，该包装器将在下面使用 Microsoft JDBC 驱动程序。

我愿意接受更有经验的人提出的其他建议，这些人过去可能做过类似的事情，或者即使他们可以分享这种方法的陷阱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:37:53.033

使用 jtds。都是java，很适合sql server，支持加密。这是替换减去设置加密的下降。你只需要知道他们在哪里配置了他们的 JDBC URL（希望是在 WEB-INF 下的配置文件或类似的地方），把你的 jtds URL 放在那里，然后把 Jar 放到 WEB-INF/lib 目录中. 您可能必须提取 WAR 文件并使用 jtds 重新打包它。这仅取决于此第 3 方供应商如何将其应用程序交付给您。是的，我多年来一直使用它交付生产打包的企业软件。

[http://jtds.sourceforge.net/](http://jtds.sourceforge.net/)

所以说他们有一个像这样的简单属性文件：

```
db.url=jdbc:mssql:....
db.username=bibby
db.password=blahblahblah 
```

将其更改为：

```
db.url=jdbc:jtds:<server_type>://<server>[:<port>][/<database>][;<property>=<value>[;...]]
db.username=bibby
db.password=blahblahblah 
```

当然，您必须根据需要填写所有 <> 和 [] 部分。然后将 jtds.jar 和它需要的任何依赖项复制到 WEB-INF/lib 并重新启动服务器。它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-10T15:59:20.683

如果原始驱动程序没有您想要的功能->您可以获取官方版本（或分叉）并修补/添加您的需求

[https://github.com/Microsoft/mssql-jdbc/releases](https://github.com/Microsoft/mssql-jdbc/releases)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-09T12:35:45.467

> 在这一点上，我主要考虑创建一个 JDBC 包装器，该包装器将在下面使用 Microsoft JDBC 驱动程序。我猜你需要服务器端的代理来解密连接信息，并将数据库连接转发到 SQLServer 的端口。

# c# - 如何构造正则表达式以匹配由空格分隔的固定字符串？

> ID：10938286
> 
> 赞同：4
> 
> 时间：2012-06-07T19:07:09.540
> 
> 标签：c#, .net, regex, string

我从来无法自己构建正则表达式，现在我有一个需要它的简单应用程序。如何构造一个匹配的简单正则表达式：

1.  固定的字符串
2.  没有空格/任何空格
3.  '=' 字符
4.  没有空格/任何空格
5.  '(' 字符

目前我正在使用以下代码来匹配整个单词，但正如您所见，它的功能非常有限。

```
Regex.Matches(data, @"\b" + Regex.Escape(columnID + "=(") + @"\b");
Regex.Matches(data, @"\b" + Regex.Escape(columnID + "= (") + @"\b");
Regex.Matches(data, @"\b" + Regex.Escape(columnID + " =(") + @"\b");
Regex.Matches(data, @"\b" + Regex.Escape(columnID + " = (") + @"\b"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:09:08.013

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:14:49.837

这是一个满足您要求的正则表达式。以您的固定字符串作为前缀。

```
Regex.Matches(data, Regex.Escape(columnID) + @"\s*=\s*\("); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T19:16:37.260

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T19:47:21.230

您说“任何空格”，但根据您的正则表达式所说的，您似乎正在寻找一个可选的单个空格。如果是这种情况，请使用问号。

```
Regex.Matches(data, Regex.Escape(columnID) + @"\s?=\s?\("); 
```

正则表达式中的问号表示前一个字符（或组，如果使用括号）是可选的。

如果您正在寻找可能存在或不存在的单个空格，则不要使用 + 或 *，因为 * 将匹配 0 个或多个空格，直到满足下一个字符并且 + 将匹配一个或多个白色空格直到满足下一个字符。

# cordova - '400 Bad request' - Google 在使用 DotNetOpenAuth 和 PhoneGap ChildBrowser 插件进行身份验证后未正确重定向回来

> ID：10938287
> 
> 赞同：0
> 
> 时间：2012-06-07T19:07:13.030
> 
> 标签：cordova, dotnetopenauth, childbrowser

我正在研究**[这个 DotNetOpenAuth 教程](http://www.dotnetopenauth.net/developers/help/programmatic-openid-relying-party/)**的简单实现。

在 Chrome、Firefox 和 IE 等常规浏览器上运行良好。但是当我从 PhoneGap childBrowser 插件调用这个“google_login.aspx”页面时它失败了。

在用户将其凭据输入 Google`400 -Bad Request - Invalid URL` ***后***，失败以 a 的形式发生。

当 Google 尝试重定向回我的网站时，**Google 尝试使用**如下所示的错误网址：

```
https://myurl.com/(F(8g0QkKd61D6yBbN2pkuZwAXOTGChqwruytA0LCC_nZko2mXgddbDhT3nXCj3XWVwOSkyfNGENHtctVXbnAyFQcj344Cai3rrkKKO_SNM_laGIqIPN2pkSBJQQYc98T0qv_gZbm3R8Qufry7u-HLAAT_RfVpMtpbCM6sw-FLPuxxHUETRHjd8lA9DR7LKIfkMYYinZU_qLduO02f012wZ2feVi8XW479WOvrWCr_rHFAxPNEQFurrJO1rxGs1LUFzTZ4pNlgpm4LwHrv7lTtK5-adDKbQJXzFrjEAG22pNxGfKpesHNsV-m88zp20w70FtF56wppLfzadNgq7cPDlb3hIwbsA-JGI1he8low8_KWDNZev5RqtX8cPtQKpFIL0))/Default.aspx 
```

而不是这个：

```
https://myurl.com/Default.aspx 
```

这只发生在*PhoneGap childBrowser 插件*上，其他浏览器会将我带到正确的位置。

收到`400 bad request`错误后，我可以手动浏览到我的主页，它表明我实际上已登录，并且**从谷歌返回的简单重定向是失败的**。

任何人都知道如何解决我的问题或可能的解决方法？

# 解决方案：

我必须在中指定`returnToURL`参数`OpenIdRelyingParty.CreateRequest`： ![在此处输入图像描述](../Images/aec73d3827585778551328fbb171e7f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:46:45.887

这看起来可能是 ASP.NET 的无 cookie 会话支持功能。如果您的失败场景是会话 cookie 被拒绝，并且如果在 web.config 文件中启用，我相信 ASP.NET 本质上会将 cookie 存储在您的 URL 中，从而创建一种虚拟路径。显然，这有什么问题。我建议您通过以下方式隔离问题：

1.  [打开 DotNetOpenAuth 日志记录](http://tinyurl.com/dnoalogs)
2.  收集整个登录尝试的[Fiddler2跟踪](http://www.fiddler2.com/fiddler2/)

...找出这条杂散路径的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:38:57.277

要解决这个问题：

1.  `App_Browsers`如果 ASP.NET 文件夹尚不存在，请将其添加到您的项目中（右键单击项目，单击添加 -> 添加 ASP.NET 文件夹 -> App.Browsers
2.  添加一个名为`generic.browser`App.Browsers 文件夹的文件
3.  将 generic.browser 文件中任何自动生成的代码替换为：

    ```
    <browsers>
        <browser refID="Default">
            <capabilities>
                <capability name="cookies" value="true" />
            </capabilities>
        </browser>
    </browsers> 
    ```

运行 Forms Authentication 时，该问题在 iOS 设备（例如 iPad 和 iOS）上以合理的频率出现。用户将收到错误：**错误的请求 - 无效的 URL。HTTP 错误 400。请求 URL 无效。**

# unit-testing - 通过扩展 WebTestCase 使 Symfony2 单元测试更加 DRY

> ID：10938294
> 
> 赞同：5
> 
> 时间：2012-06-07T19:07:37.107
> 
> 标签：unit-testing, symfony

我的很多测试都有很多相同的`setUp()`/`tearDown()`东西。将相同的代码复制并粘贴到我的每一个单元测试中似乎很愚蠢。我想我想创建一个新的测试类来扩展`WebTestCase`我的其他测试可以扩展。

我的问题是我真的不知道怎么做。首先，在哪里放置这个新类最合适？我尝试在我的`Tests`文件夹中制作一个，但是我的测试都没有真正找到该类。也许我只是不了解名称空间。

`WebTestCase`有没有人以我所说的方式扩展过？如果是这样，你是怎么做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:47:08.930

我没有这样做，但我可能会这样做

**src/Your/Bundle/Test/WebTestCase.php**

```
<?php

namespace Your\Bundle\Test

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase as WTC;

class WebTestCase extends WTC
{
  // Your implementation of WebTestCase
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T17:46:43.760

在我的测试中，我通常按照 Peter 建议的方式扩展 WebTestCase。此外，我使用 require_once 使 AppKernel 在我的 WebTestCase 中可用：

```
<?php

namespace My\Bundle\Tests;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase as BaseWebTestCase;

require_once(__DIR__ . "/../../../../app/AppKernel.php");

class WebTestCase extends BaseWebTestCase
{
  protected $_application;

  protected $_container;

  public function setUp()
  {
    $kernel = new \AppKernel("test", true);
    $kernel->boot();
    $this->_application = new \Symfony\Bundle\FrameworkBundle\Console\Application($kernel);
    $this->_application->setAutoExit(false);

... 
```

然后我的测试如下所示：

```
<?php

namespace My\Bundle\Tests\Controller;

use My\Bundle\Tests\WebTestCase;

class DefaultControllerTest extends WebTestCase
{
    public function testIndex()
    {
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T15:14:43.550

您不需要扩展 WebTestCase 以包含 AppKernel。您可以使用以下方法

```
 $client = static::createClient();
    self::$application = new Application($client->getKernel()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-20T06:18:53.990

这个问题真的很老，但它在谷歌上的排名很高，所以我想我会添加我的解决方案。

我扩展`WebTestCase`了一个默认`setUp`方法和一个`logIn`方法，以便我可以更轻松地运行经过身份验证的测试。

似乎您无法将标准类添加到`tests`目录中，因为单元测试找不到它们。我不确定为什么。我的解决方案是添加一个目录`src/_TestHelpers`并将我的助手类放在那里。

所以我有：

```
# src/_TestHelpers/ExtendedWTC.php
namespace _TestHelpers;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class ExtendedWTC extends WebTestCase
{
    # Do your cool extending here
} 
```

和

```
# tests/AppBundle/Controller/DefaultControllerTest.php
namespace Tests\AppBundle;

use _TestHelpers\ExtendedWTC

class DefaultControllerTest extends ExtendedWTC
{
    # Your tests here, using your cool extensions.
} 
```

Note: I'm using the `Symfony 3` directory structure, hence why my tests are in `tests/` and not `src/AppBundle/Tests/`.

I hope this helps someone...

# video - 如何将视频增量上传到 Youtube

> ID：10938295
> 
> 赞同：1
> 
> 时间：2012-06-07T19:07:37.920
> 
> 标签：video, youtube, video-streaming, youtube-api

是否可以在逐帧录制视频时以编程方式将视频增量上传到 Youtube？某些 iOS/Android 应用程序声称支持此功能，例如[Qik Video](https://play.google.com/store/apps/details?id=com.qik.android)，但我无法找到任何可以在通用 PC 上运行的开源参考代码。我正在研究实施一个视频监控应用程序的可行性，该应用程序可以将其视频实时上传到各种视频共享站点，以防录制设备受到损害。

我已经查看了[Youtube 的 API](http://code.google.com/intl/fr-FR/apis/youtube/2.0/developers_guide_protocol.html#Uploading_Videos)，它提到了一个[可恢复的上传过程](https://developers.google.com/youtube/2.0/developers_guide_protocol?hl=fr-FR#Resumable_uploads)，但它似乎更适合处理计划外的中断，而不是上传中的受控暂停。

编辑：据说 Youtube[支持直播视频流](http://techlunatic.com/2011/04/live-stream-youtube-videos/)，但我找不到有关如何使用它的库或文档。

# android - Android 的应用程序/签名验证如何工作？

> ID：10938298
> 
> 赞同：9
> 
> 时间：2012-06-07T19:08:05.807
> 
> 标签：android, authentication, encryption, pki

我想用两件事作为这个问题的开头，这样我就可以缩小我的实际问题所在：

a) 我以前做过软件开发，虽然从来没有做过安卓

b) 我熟悉 PKI 和加密、散列和数字签名等等等等

话虽如此，我无法找到有关 Android 在何处以及如何验证应用程序创建者的更多信息。我听到了很多不同的信息，所以我试图综合以更好地了解工作流程。

我知道每个应用程序开发人员都有自己的私钥/公钥对，他们通过对 APK 进行哈希处理（如果我没记错的话，大部分时间使用 SHA-1）来签署他们的应用程序，然后就可以了。您上传它并且（我相信）公钥进入 APK 内的 META INF。这点我明白了。

我的问题是这与用户下载应用程序本身时有何关系。我知道电话会检查以确保应用程序已有效签名，并且签名还包含有关作者等的信息。但我也读到应用程序是自签名的，Google Play（或他们现在称之为 Market 的任何东西）没有实现 CA，并且没有身份验证？但我的问题是，什么会阻止人们以其他开发人员的名义上传应用程序（众包除外）？

如果手机只检查有效签名，这是否意味着在上传应用程序时完成了唯一的身份验证方式？如果是这种情况，应用市场如何检查呢？这是通常的 - 使用文件中的私钥并验证签名吗？还是开发者必须向市场提供他们的私钥来进行身份验证？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T02:19:36.323

In short, Android and Google Play essentially don't care about what's in actual certificate. Google Play will validate it indeed, and check if it is valid for 30 years or more, but they don't really use (at least currently, AFAIK) the actual info in the cert. You could use your own name/company name in the CN, but no one will validate this, and users won't see this info at all. What Android does is:

*   check the signature to make sure the APK hasn't been tampered with
*   then compare the singing certificate *as a binary blob* to the one of the currently installed version of the app to make sure that the two versions have been signed with the same key/certificate (e.g., by the same person/company)
*   it does the same thing to enforce permission if you are using using sharedUid or signature permissions with two or more apps.

So, to answer your question, someone can easily create a certificate with your name on it, but Android and Google Play don't really care. As long as they don't have your private key, they won't be able produce an app signature that is the same as yours and thus they wouldn't be able to overwrite/update your app with theirs, or get any special permissions.

# java - String.replaceAll 让一些字符穿过裂缝

> ID：10938305
> 
> 赞同：1
> 
> 时间：2012-06-07T19:08:38.403
> 
> 标签：java, regex, string, replace

所以我正在使用 Java 中的一个巨大的数据集，试图清除除字母字符之外的所有文本。现在我正在这样做：

```
snippet = snippet.toLowerCase();
snippet.replaceAll("[^A-Za-z]", ""); 
```

然而，消毒并没有按计划进行。一些无关`@`的 , `#`,`?`和`:`正在通过。想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T19:13:08.367

在java中，[字符串](http://en.wikipedia.org/wiki/Immutable)是[不可变](http://en.wikipedia.org/wiki/Immutable)的——它们的值不能改变。因此，*返回*更改后的字符串；它不会*更改*调用它的字符串。[`replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

 **您必须*将*返回值分配回变量：

```
snippet = snippet.replaceAll("[^A-Za-z]", ""); 
```

尽管这种行为起初看起来是“非面向对象的”，但当类是不可变的时，它确实有意义。

此外，您不需要调用`.toLowerCase()`- 您的正则表达式也匹配大写字母。**

# c++ - 为什么 C11 或 C++11 中没有 ASCII 或 UTF-8 字符文字？

> ID：10938306
> 
> 赞同：17
> 
> 时间：2012-06-07T19:08:39.260
> 
> 标签：c++, utf-8, c++11, ascii, c11

为什么即使有 UTF-8 字符串文字，C11 或 C++11 中也没有 UTF-8 字符文字？我知道，一般来说，字符文字表示单个 ASCII 字符，它与单个八位字节的 UTF-8 代码点相同，但是 C 和 C++ 都没有说编码必须是 ASCII。

基本上，如果我阅读标准正确，则不能保证`'0'`将表示整数 0x30，但`u8"0"`必须表示字符序列 0x30 0x00。

编辑：

我知道不是每个 UTF-8 代码点都适合一个字符。这样的文字仅对单八位字节代码点（又名 ASCII）有用，所以我想称它为“ASCII 字符文字”会更合适，所以问题仍然存在。我只是选择用 UTF-8 来构建问题，因为有 UTF-8 字符串文字。我可以想象可移植地保证 ASCII 值的唯一方法是为每个字符编写一个常量，考虑到只有 128 个字符，这不会那么糟糕，但仍然......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T20:07:51.727

编写不可移植的 C 代码是完全可以接受的，这是这样做的众多充分理由之一。随意假设您的系统使用 ASCII 或其某些超集，并警告您的用户不要尝试在 EBCDIC 系统上运行您的程序。

如果您感觉非常慷慨，您可以对支票进行编码。众所周知，该`gperf`程序会生成包含此类检查的代码。

```
_Static_assert('0' == 48, "must be ASCII-compatible"); 
```

或者，对于 C11 之前的编译器，

```
extern int must_be_ascii_compatible['0' == 48 ? 1 : -1]; 
```

如果您在 C11 上，则可以在字符常量上使用`u`or前缀，但不能使用前缀...`U``u8`

```
/* This is useless, doesn't do what you want... */
_Static_assert(0, "this code is broken everywhere");
if (c == '々') ...

/* This works as long as wchar_t is UTF-16 or UTF-32 or UCS-2... */
/* Note: you shouldn't be using wchar_t, though... */
_Static_assert(__STDC_ISO_10646__, "wchar_t must be some form of Unicode");
if (c == L'々') ...

/* This works as long as char16_t is UTF-16 or UCS-2... */
_Static_assert(__STDC_UTF_16__, "char16_t must be UTF-16");
if (c == u'々') ...

/* This works as long as char32_t is UTF-32... */
_Static_assert(__STDC_UTF_32__, "char32_t must be UTF-32");
if (c == U'々') ... 
```

**有**一些项目是用非常可移植的 C 语言编写的，并且已经移植到非 ASCII 系统（[示例](http://httpd.apache.org/docs/2.0/platform/ebcdic.html)）。这需要大量的移植工作，除非您知道要在 EBCDIC 系统上运行您的代码，否则没有真正的理由去做这些工作。

**关于标准：**编写 C 标准的人必须应对所有可能的 C 实现，包括一些非常奇怪的实现。有已知的系统，其中`sizeof(char) == sizeof(long)`, `CHAR_BIT != 8`, 整数类型具有陷阱表示，`sizeof(void *) != sizeof(int *)`, `sizeof(void *) != sizeof(void (*)())`,`va_list`是堆分配的，等等。这是一场噩梦。

不要因为尝试编写将在您从未听说过的系统上运行的代码而自责，也不要努力寻找 C 标准中的保证。

例如，就 C 标准而言，以下是 的有效实现`malloc`：

```
void *malloc(void) { return NULL; } 
```

请注意，虽然`u8"..."`常量保证为 UTF-8，`u"..."`并且`U"..."`除了编码分别为每个字符 16 位和 32 位之外没有任何保证，并且实际编码必须由实现记录。

**摘要：**在 2012 年可以安全地假设 ASCII 兼容性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T19:11:15.147

UTF-8 字符文字必须具有可变长度 - 对于大多数~~人~~来说，不可能将单个字符存储在`char`or`wchar`中，那么它应该具有什么类型呢？由于我们在 C 和 C++ 中没有可变长度类型，除了固定大小类型的数组，唯一合理的类型是`const char *`- 并且 C 字符串需要以空值结尾，所以它不会改变任何事物。

至于编辑：

引用 C++11 标准：

> 基本源字符集成员的字形旨在识别对应于 ASCII 字符集的 ISO/IEC 10646 子集中的字符。然而，因为从源文件字符到源字符集的映射（在翻译阶段 1 中描述）被指定为实现定义，所以需要一个实现来记录基本源字符在源文件中是如何表示的。

（2.3.1 的脚注）。

我认为这是不保证的充分理由。尽管，正如您在此处的评论中指出的那样，对于大多数（或每个）主流编译器，字符文字的 ASCII 特性是有实现保证的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-16T16:01:50.413

对于 C++，进化工作组第 119 期已经解决了这个[问题：添加 u8 字符文字](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4540.html#119)，其*动机*部分说：

> 我们有五个用于字符串文字的编码前缀（无、L、u8、u、U），但只有四个用于字符文字——缺少的一个是 u8。如果窄执行字符集不是 ASCII，则 u8 字符文字将提供一种方法来编写具有保证 ASCII 编码的字符文字（单代码单元 u8 编码正是 ASCII）。添加对这些文字的支持将添加一个有用的功能并使语言更加一致。
> 
> EWG 讨论了在 Rapperswil 中添加 u8 字符文字的想法并接受了更改。本文提供了该扩展的措辞。

这已使用 N4267 中的措辞合并到工作草案中[：添加 u8 字符文字](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4267.html)，我们可以在此时最新的草案标准[N4527](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4527.pdf)中找到措辞，并注意部分`2.14.3`说它们仅限于适合单个 UTF-8 的代码点代码单元：

> 以 u8 开头的字符文字，例如 u8'w'，是 char 类型的字符文字，称为 UTF-8 字符文字。UTF-8 字符文字的值等于其 ISO10646 代码点值，前提是代码点值可以用单个 UTF-8 代码单元表示（即，假设它是一个 US-ASCII 字符）。包含多个 c 字符的 UTF-8 字符文字格式不正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:33:00.507

如果您不相信您的编译器会将`'0'`其视为 ASCII 字符 0x30，那么您可以`static_cast<char>(0x30)`改用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-01T17:03:08.410

如您所知，UTF-8 编码的字符需要几个八位字节，因此需要`char`s，因此它们的自然类型是`char[]`，这确实是带有`u8`-prefixed 字符串文字的类型！所以 C11 在这里是正确的，只是它坚持使用`"`for a *string*的语法约定，需要用作 char 数组，而不是使用隐含的基于语义的建议`'`。

关于`"0"`vs `u8"0"`，您没看错，只有后者保证与 相同`{ 0x30, 0 }`，即使在 EBCDIC 系统上也是如此。顺便说一句，如果您注意`__STDC_MB_MIGHT_NEQ_WC__`预定义的标识符，则可以在您的代码中方便地处理前者。

# php - 字母顺序适用于姓氏，但不适用于名字

> ID：10938307
> 
> 赞同：1
> 
> 时间：2012-06-07T19:08:39.557
> 
> 标签：php, mysql, sql

我为我们的客户准备了一个 mysql 表。它按字母顺序与姓氏一起使用，但不适用于名字，因为它们位于不同的列中。

这是我的代码：

```
SELECT id, firstname, lastname, address From customers Order by lastname 
```

这是现在的结果：

```
lastname | firstname | address <br>
Ford     | Jhon      | Dallas
Bush     | Emil      | Orlando (This should be after the next one [Brian])
Bush     | Brian     | Los Angeles 
```

我怎么能将姓氏+名字排列在一起？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:10:21.257

如[手册](http://dev.mysql.com/doc/en/sorting-rows.html)所述：

> 您可以对多列进行排序，并且可以对不同的列进行不同方向的排序。例如，要按动物类型升序排序，然后按动物类型中的出生日期降序排序（最小的动物优先），请使用以下查询：
> 
> ```
> mysql> SELECT name, species,birth FROM pet 
>     -> ORDER BY species,birth DESC;
> +---------+---------+------------+
> | 姓名 | 物种| 出生|
> +---------+---------+------------+
> | 叽叽喳喳 | 鸟| 高分辨率照片| CLIPARTO 1998-09-11 |
> | 惠斯勒 | 鸟| 高分辨率照片| CLIPARTO 1997-12-09 |
> | 爪 | 猫 | 1994-03-17 |
> | 蓬松 | 猫 | 1993-02-04 |
> | 方 | 狗 | 1990-08-27 |
> | 鲍泽 | 狗 | 1989-08-31 |
> | 巴菲 | 狗 | 1989-05-13 |
> | 马勃 | 仓鼠| 1999-03-30 |
> | 苗条 | 蛇 | 1996-04-29 |
> +---------+---------+------------+
> ```
> 
> `DESC`关键字仅适用于紧接在其前面的列名 ( ) `birth`；它不影响`species`列排序顺序。

因此，在您的情况下：

```
SELECT id, firstname, lastname, address FROM customers ORDER BY lastname, firstname 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:10:21.390

您可以在 ORDER BY 中有多个条目：

```
Order by lastname, firstname 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T19:10:34.003

通过以下方式在您的订单中包含名字：

```
SELECT id, firstname, lastname, address From customers Order by lastname, firstname 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T19:12:23.627

查询应该是： `SELECT id, firstname, lastname, address FROM`客户`ORDER BY lastname, firstname`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T19:24:19.320

试试这个查询

```
SELECT `id`, `firstname`, `lastname`, `address` FROM `customers` 
ORDER BY `firstname` ASC ,`lastname` ASC 
```

# jquery - 使用 Ajax asp.net MVC 路由到操作

> ID：10938308
> 
> 赞同：0
> 
> 时间：2012-06-07T19:08:40.580
> 
> 标签：jquery, asp.net-mvc-4, jqgrid-asp.net

我正试图让我的 jqGrid 在单击按钮时加载数据......到目前为止，我的按钮已准备好可以单击，如您所见。问题是，我有些方式或其他方式没有正确获取导航信息......我正在尝试 AJAX 调用一个这样设置的`@HTML.BeginForm`......

```
@using(Html.BeginForm("returnJSONEncoutnerData", "AddEncounter", new { popId = (int)TempData["POPULATIONID"]}, FormMethod.Post, new { id = "SearchPatID" })) 
```

这是我的按钮点击功能。

```
$('#submit').click(function (event) {
        //alert("What the FONK is going on here!");
        debugger;
        var theURL = $("#SearchPatID").action;
        var type = $("#SearchPatID").methd;
        event.preventDefault();
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            dataType: "json",
            success: function (result) {
                bindCustomers();
            }
        });
        return false;
    }); 
```

我的函数 bindCustomer 应该用上述方法收集并 JSON 化的 JSON 数据填充 jqGrid！我想我会把它放在那里来消除你的好奇心。

```
 var bindCustomers = function () {
    alert('');
    $("#list").jqGrid({
        url: $("#DisplayUniqueEncounters").attr("action"), //'/Home/GridData/',
        gridview: false,
        shrinkToFit: false,
        autowidth: true,
        datatype: 'json',
        mtype: 'POST',
        colNames: ['Edit',
                   'MRN',
                   'Hospital Fin',
                   'First Name',
                   'Last Name',
                   'Date of birth',
                   'Completed Pathway',
                   'Completed Pathway Reason',
                   'PCP Appointment',
                   'Specialist Appointment',
                   'Admit Date',
                   'Discharge Date',
                   'Discharge Disposition',
                   'Discharge To',
                   'Discharge Advocate Call',
                   'Home Healthcare',
                   'Safe Landing Accepted',
                   'PCP Name',
                   'PCP Phone',
                   'PCP Appointment Location',
                   'Specialist Name',
                   'Specialist Phone',
                   'Specialist Appointment Location',
                   'Comments',
                   'Patient Room Phone',
                   'Phone',
                   'Payor',
                   'MRN Type'
                   ],
        colModel: [
                   { name: 'Edit', width: 95, align: 'left' },
                   { name: 'MRN', width: 125, align: 'left' },
                   { name: 'Hospital_Fin', width: 145, align: 'left' },
                   { name: 'First_Name', width: 115, align: 'left' },
                   { name: 'Last_Name', width: 115, align: 'left' },
                   { name: 'Date_of_birth', width: 145, align: 'left' },
                   { name: 'Completed_Pathway', width: 125, align: 'left' },
                   { name: 'Completed_Pathway_Reason', width: 165, align: 'left' },
                   { name: 'PCP_Appointment', width: 115, align: 'left' },
                   { name: 'Specialist_Appointment', width: 125, align: 'left' },
                   { name: 'Admit_Date', width: 185, align: 'left' },
                   { name: 'Discharge_Date', width: 185, align: 'left' },
                   { name: 'Discharge_Disposition', width: 155, align: 'left' },
                   { name: 'Discharge_To', width: 85, align: 'left' },
                   { name: 'Discharge_Advocate_Call', width: 155, align: 'left' },
                   { name: 'Home_Health_Care_Accepted', width: 105, align: 'left' },
                   { name: 'Safe_Landing_Accepted', width: 165, align: 'left' },
                   { name: 'PCP_Name', width: 85, align: 'left' },
                   { name: 'PCP_Phone', width: 85, formatter: formatPhoneNumber, align: 'left' },
                   { name: 'PCP_Appointment_Location', width: 185, align: 'left' },
                   { name: 'Specialist_Name', width: 195, align: 'left' },
                   { name: 'Specialist_Phone', width: 135, formatter: formatPhoneNumber, align: 'left' },
                   { name: 'Specialist_Appointment_Location', width: 185, align: 'left' },
                   { name: 'Comments', width: 185, align: 'left' },
                   { name: 'Patient_Room_Phone', width: 135, formatter: formatPhoneNumber, align: 'left' },
                   { name: 'Phone', width: 125, formatter: formatPhoneNumber, align: 'left' },
                   { name: 'Payor', width: 155, align: 'left' },
                   { name: 'MRN_Type', width: 135, align: 'left' }
                   ],
        //pager: jQuery('#pager'),
        rowNum: 10,
        rowList: [5, 10, 20, 50],
        sortname: 'Id',
        sortorder: "desc",
        viewrecords: true,
        imgpath: '/scripts/themes/coffee/images',
        caption: 'My first grid'
    });
} 
```

我需要在某个时候将数据异步返回给我。但此时乞丐不能成为选择者。我需要弄清楚为什么我无法获得正确的路由信息​​。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:13:12.243

`this`是按钮，而不是表单。
它没有`action`.

您应该`submit`改为处理表单的事件，这`this`将是表单。

# php - 'singleton' 类 PHP 的访问属性

> ID：10938314
> 
> 赞同：0
> 
> 时间：2012-06-07T19:09:05.970
> 
> 标签：php, singleton, instance, multiple-instances

我不确定我使用的技术是否合适。我有一个类，单例，具有这样的子实例：

```
final class Singleton {

    public $subinstance;
    private static $instance = NULL;

    private function __construct() {
        $this->subinstance = new subinstance(); 
    }

   public static function getInstance() {

       if (NULL === self::$instance) {
           self::$instance = new self;
       }

   return self::$instance;

   }

   private function __clone() {}
} 
```

现在，如果我想从另一个类的类外部访问子实例，我会这样做：

```
$s = singleton::getInstance();
$s->subinstance->.... 
```

这是正确的方法吗？当我这样做时会发生什么`$s=singleton::getInstance();`，整个单例类是否被复制到 $s 或者这更像是一个指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:16:11.493

你在做什么很好，虽然在你的示例代码中我假设你打算写：

```
$s = Singleton::getInstance(); // with the S capitalized 
```

当您调用 getInstance 方法时，该类正在查看其自身的一个版本是否已被实例化。如果有，它将返回对该实例的引用，而不是创建一个全新的实例。如果实例尚未创建，它将创建实例，然后返回对它的引用。

我不确定为什么 Sixeightzero 声明你不应该在实例的构造函数中实例化一个类。这样做时您不应该遇到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:11:52.567

如果您执行 $a = singleton，则 $a 将是对单例类的引用。$a 中的任何更改都将反映在单例:: 等的访问中。（指针）

你为什么在构造函数中做一个子实例？这可能会导致问题，并且应该创建一个方法来处理受保护方法内的构造函数之外的子实例。你的子实例是什么样的？

# sql - Sqlite 和 SQLiteManager 1.2.4 只读错误？

> ID：10938321
> 
> 赞同：0
> 
> 时间：2012-06-07T19:09:21.663
> 
> 标签：sql, sqlite

我有一个运行 Damn Small Linux 的 Linux 机器，上面有 LAMPP。Lampp 工作正常，除了 Mysql 不能工作，因为 DSL 被剥离了，它不起作用。所以你必须使用Sqlite。我不太擅长 SQL 命令，所以我想要一个 SQL 管理员来为我完成这项工作。我已经下载了 SQLiteManager，它看起来非常适合这项工作。但是每当我导航到 SQLiteManager 时，它都会给我这个错误：

配置数据库是只读的。SQLiteManager 的某些功能无法正常工作。

我怎样才能让它工作？我的服务器正在运行 SQLite3，我可以通过命令行使用它。
谢谢！

PS：抱歉，如果这是错误的“堆栈”来发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:52:47.297

```
chown -R www-data yousqlitemanagerdir 
```

# java - 更改 Eclipse 运行时环境

> ID：10938323
> 
> 赞同：1
> 
> 时间：2012-06-07T19:09:25.733
> 
> 标签：java, android, eclipse, eclipse-memory-analyzer

必须有 Java 运行时环境 (JRE) 或 Java 开发工具包 (JDK) 才能运行 MemoryAnalyzer。搜索以下位置后没有找到 Java 虚拟机：C:\Documents and Settings......

***我的问题是如何更改 JRE 或 JDK 的路径？***

注意*我的eclipse工作得很好。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T19:11:12.957

```
Window--Preferences---Java-->Installed JREs 
```

在那里您可以添加 JRE 路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T06:37:41.543

右键单击您的项目。您可以看到 java 构建路径。在该选择上配置构建路径。您可以看到窗口，点击添加外部 JAR。

# objective-c - 仅在新 iPad 3 上：wait_fences：未能收到回复：10004003

> ID：10938328
> 
> 赞同：2
> 
> 时间：2012-06-07T19:09:47.577
> 
> 标签：objective-c, ios, core-animation, core-graphics

所以我知道有很多关于这个的问题，但据我所知，这是一个独特的情况，所以我想我会发布它。希望这将添加一些信息，最终可能会给我们一个答案，说明为什么会发生这种情况。我收到错误：wait_fences: failed to receive reply: 10004003，当我的设备旋转时。我的视图动画从以下位置开始：

`- (void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration`

我只在新 iPad 3 上遇到错误。我在原始 iPad 和低至 3GS 的 iPhone 上使用了完全相同的程序。它们都没有出现 wait_fences 错误，而且它们的旋转速度都比 iPad 3 快。

我几乎只使用 Core Graphics 来绘制视图。我还确保在调整大小时重新绘制它们，这样我就不会得到像素化的视图。如果我在调整大小时禁用重绘，我不会收到此错误（但我会看到拉伸视图）。如果我完全禁用核心图形绘制，我不会收到错误消息（当然，我会看到黑色视图）。

我使用了 Time Profiler，发现问题主要在于绘制渐变： ![在此处输入图像描述](../Images/329841b8949535d6a042934f1f45686b.png)

我已经更改了代码以填充而不是绘制渐变，这确实缓解了问题。我会说渐变是问题，除了我在其他情况下（除了响应旋转）做这些动画并且它工作得很好。

我还想指出，我特别注意确保我只为实际在屏幕上的视图设置动画。我知道在屏幕外设置动画视图有时会导致发生此错误。

我没有包含动画代码

关于为什么会发生这种情况的任何想法？特别是因为它只发生在 iPad 3 上？

对于那些会问的人，这是执行动画的代码。它通常被包装在 UIView 动画块中。

```
- (void) setFramesForFocusView:(CustomControl *)focusView atX:(CGFloat)x showInput:(BOOL)showInput{
    CGSize bSize = self.bounds.size;
    CGRect fRect = focusView.frame;
    fRect.size.width = bSize.width;

    CGRect iRect;
    if (focusView.inputViewIsSystemKeyboard){
        if (_keyboardRect.origin.y < 0 || _keyboardRect.origin.y >= CGRectGetMaxY(self.bounds) || CGRectIsEmpty(_keyboardRect) || CGRectGetMaxY(_keyboardRect) > CGRectGetMaxY(self.bounds)) return;
        iRect = _keyboardRect;
    } else {
        iRect = (focusView.inputUIView && showInput) ? CGRectMake(0, bSize.height / 2, bSize.width, bSize.height / 2) : CGRectZero;
    }

    CGRect iaRect = focusView.inputAccessoryUIView.frame;
    CGFloat availableFieldHeight = iRect.origin.y - iaRect.size.height;

    iRect.size.width = bSize.width;
    iaRect.size.width = bSize.width;

    if (!showInput){
        iRect.origin.y = bSize.height;
    }
    iaRect.origin.y = iRect.origin.y - iaRect.size.height;

    iRect.origin.x = x;
    iaRect.origin.x = x;
    focusView.inputUIView.frame = iRect;
    focusView.inputAccessoryUIView.frame = iaRect;

    if (focusView.expandInput){
        fRect.origin.y = 0;
        fRect.size.height = availableFieldHeight;
    } else {
        if (focusView.labelPlacement != LabelPlacementTop && focusView.labelPlacement != LabelPlacementBottom){
            fRect.size.height = _currentView.storedFrame.size.height + [focusView.label.text sizeWithFont:focusView.label.font].height; 
        }
        fRect.origin.y = availableFieldHeight - fRect.size.height;
    }
    if (fRect.size.height > availableFieldHeight){
        fRect.origin.y = 0;
        fRect.size.height = availableFieldHeight;
    }
    fRect.origin.x = x;
    [focusView setLabelPlacement:LabelPlacementTop toFrame:fRect];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:52:44.793

那很快。@RobNapier 是正确的，因为这是一个时间问题。我评论了我的动画，哇，后面还有很多其他的动画！即使我只是明确地为屏幕视图设置动画，还有另一个 ViewController 在我的视图后面接收旋转事件而没有我的……呃……知识？我的意思是，我应该知道对吧？我写了代码。起初我没有意识到，因为我的视图集覆盖了整个屏幕。不幸的是，这将需要大量重写。我使用自定义容器控制器，现在我看到我需要重新考虑我的实现。很多东西都被不必要地旋转/动画化了。但是哇……这回答了很多性能问题……

***更新***

所以我认为我面临的问题与其他视图控制器动画的额外视图有关。然而，虽然这在技术上是正确的，但它并不像我想象的那样真实，也不像我想象的那样真实。我通过从窗口中删除整个根视图层次结构并仅用我想要旋转的视图控制器替换它来确保没有其他视图被动画化。这肯定有帮助，但并不完全。真的，它只是“降低了门槛”，这样我就不太可能出现“wait_fences”错误。我仍然发现在某些情况下我得到了错误。

我相信我遇到的问题是我使用了 UIScrollView。我的实现管理的子视图数量不定。具体的视图是我自己自定义的一个 UIPickerView 实现，所以你可以想象，它管理的视图数量会变得非常大。我发现如果这些子视图变得太多，我就会开始收到“wait_fences”错误。

所以看起来：**如果 UIScollView 是动画的，它将动画它的所有子视图，即使这些子视图不在屏幕上。** 这个很重要。我宁愿怀疑很多为这个错误而苦苦挣扎的人可能没有意识到这一点。这些屏幕外子视图中的每一个都在推动您更接近遇到“wait_fences”错误。在我的情况下，解决方案是“简单的”：我要将 UIScrollView 转换为 UITableView。这将意味着重写大量代码，但至少我知道屏幕外的子视图将从屏幕上删除，因此不会动画。

我还注意到其他一些事情：Core-Graphic Gradients 对你的打击很大。如果他们不使用渐变，我可以为更多的屏幕外视图设置动画。当然，我喜欢渐变并且我不愿意放弃它们（这就是我重写我的 PickerView 的原因），但它很有趣而且很重要。

**更新 2**

完成将我的 UIScrollView 重写为 tableView ，这似乎已经成功了。`wait_fences`当我旋转屏幕时，我没有延迟也没有错误。

**更新 2**

所以，是的，`wait_fences`在 iPad 3 上遇到错误比任何其他 iPad/iPhone 都容易得多。我已经检查了我所有的代码，确保我永远不会为屏幕上没有的任何东西制作动画，所以这个问题已经解决了。当我使用“重”绘图程序时，我仍然`wait_fences`在 iPad 3 上遇到错误。我发现的东西让我成功了：

1.  渐变：渐变确实让 CPU 在视网膜屏幕上工作。
2.  透明度：如果您的视图不是不透明的，CPU 会努力找出视图的透明区域。
3.  透明颜色：与视图透明度不同。这是将透明颜色/渐变层叠在彼此的顶部以获得“效果”，例如光泽，突出显示任何内容。
4.  纹理：我发现使用纹理更容易`wait_fences`出错，但与渐变/透明度所做的完全不同。

# regex - 在特定模式后查找和替换第一个字符

> ID：10938329
> 
> 赞同：0
> 
> 时间：2012-06-07T19:10:03.747
> 
> 标签：regex, sed

当前文本

```
Variable length text = some string(some more text 
```

改成

```
Variable length text = some string(addition some more text 
```

只有在遇到“=”字符后，才需要在一行中的第一个括号后添加某个文本。另一个条件是忽略“= (”之类的模式，这实际上意味着您应该忽略“=”和“(”之间只有空格的模式

我的尝试：

```
sed -e "s#*=(\w\()#\1(addition#g" 
```

感谢期待！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:33:23.037

在 perl 中

```
s/(.*?=[\s][^(]+?)\((.*)/$1(aditional text $2/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:27:34.180

根据您的需要进行调整：

```
$ echo 'Variable length text = some string(some more text' |\
sed 's/^[^=]*=[^(]*[[:alnum:]][^(]*(/&addition /' 
```

匹配：

1.  字符串的开头
2.  任何次数，但`=`任何次数
3.  `=`
4.  任何次数，但`(`任何次数
5.  一个字母数字字符
6.  任何次数，但`(`任何次数
7.  `(`

...并用添加到它的匹配字符串替换`' addition'`它。输出是

```
Variable length text = some string(addition some more text 
```

# .htaccess - 无法在 ExpressionEngine WAMP 安装上删除 index.php

> ID：10938330
> 
> 赞同：1
> 
> 时间：2012-06-07T19:10:11.943
> 
> 标签：.htaccess, windows-7, wamp, expressionengine

我在我的 Windows 7 机器上安装了 WAMP v2.2，并启用了虚拟主机。

我已经为我的一个本地站点成功安装了 ExpressionEngine，并且一切正常，除非我尝试使用已[批准的](http://expressionengine.com/user_guide/general/remove_index.php.html)[方法](http://expressionengine.com/user_guide/general/remove_index.php.html)`index.php`从 URL中删除。如果不存在，我仍然会收到 404 错误，但页面在 URL 中显示正常。[`.htaccess`](http://expressionengine.com/user_guide/general/remove_index.php.html)`index.php``index.php`

我确保在 Apache 菜单中检查了重写模块：
[![在 Apache 菜单中检查了重写模块](../Images/18290f965dc116805b55a4ca13cf0a3f.png)](https://i.stack.imgur.com/pOqGr.png). 我在商业主机上成功使用过这种方法几十次，难住了。

pvledoux 更新：

```
<IfModule mod_rewrite.c>
  RewriteEngine On

  # Removes index.php
  RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php/$1 [L]

  # If 404s, "No Input File" or every URL returns the same thing
  # make it /index.php?/$1 above (add the question mark)
</IfModule> 
```

注意：我尝试将其添加`?`到规则中，但没有奏效。

该站点位于虚拟主机的根目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:53:39.173

知道了！

我需要在 httpd-vhosts.conf 中添加 AllowOverride：

```
<Directory "C:\Site\Root\Path">
    AllowOverride All
    Order Deny,Allow  
    Allow from all
</Directory> 
```

万分感谢和 6 包啤酒送给 @parhamr 帮助我摆脱这个泡菜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:36:49.363

您可以在这里尝试一些可能性：

```
[...]
RewriteEngine On
Options FollowSymLinks
[...] 
```

或者：

```
[...]
RewriteEngine On
Options +MultiViews
[...] 
```

或者：

```
[...]
RewriteEngine On
Options FollowSymLinks
Options +MultiViews
[...] 
```

根据我的经验，Apache 在 Windows 上运行时通常需要其中一个或两个才能正确执行此类操作。它也可能对你直接增加 500，但这些在过去对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T17:22:46.793

尝试添加 RewriteBase /

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase / 

  # Removes index.php
  RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php/$1 [L]

  # If 404s, "No Input File" or every URL returns the same thing
  # make it /index.php?/$1 above (add the question mark)
</IfModule> 
```

并确保 mod_rewrite 在 phpinfo 中处于活动状态

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:26:08.833

您是否检查过 Apache 中的默认文档？如果您从机器上物理删除 index.php 并且它仅在一个目录 www.domain.com/home/ 上报告 404，这意味着 Apache 仍在寻找 index.php。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T17:20:22.707

Apache 中是否[打开了 mod_rewrite ？](http://roshanbh.com.np/2008/04/check-enable-mod_rewrite-apache.html)

# uml - 服务器作为移动应用程序用例图中的参与者

> ID：10938331
> 
> 赞同：1
> 
> 时间：2012-06-07T19:10:15.480
> 
> 标签：uml, use-case

我开发了一个与服务器通信的 android 应用程序。通过应用程序，用户在服务器正在运行的系统上进行身份验证，并且在服务器能够将信息发送到我的应用程序之后。

我正在为我的应用程序制作一个用例图（UML），但我不确定我是否应该将服务器表示为一个参与者（外部）或从图中省略它......我是 UML 的新手，所以定义目前对我来说有点困惑......

谁能帮我这个？

（抱歉，如果这不是提出此类问题的正确位置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:00:29.597

首先，图表是给谁的？你想和它交流什么？

UC 诊断通常用于描述用户（参与者）和他们想要实现的目标（用例）。他们不关注如何促进用户的目标。

您的问题主要集中在技术上；唯一可辨别的用例是“用户”参与者的“身份验证”。这似乎不是特别有见地。发展这种思路，下一个问题将是：*为什么*需要对用户进行身份验证？即他/她一旦成功通过身份验证可以做什么？这些东西在你的系统范围内吗？相关地，身份验证通常伴随着一组配套的 UC：首先注册（例如设置名称、密码、可记忆数据）、重置/检索丢失的密码等。

以上所有假设您真的在尝试传达用户是谁以及他们需要做什么。这可能不是你的目的；也许您想传达解决方案设计（用户访问应用程序、应用程序向服务器发送消息等）。如果是这样，那么您可能会更好地使用序列图和/或组件图。

请注意，两者并不相互排斥：解决方案设计自然源于用户需求。所以可能两者都适用。一切都取决于你想传达什么。

hth。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:45:14.157

如果服务器是您系统的一部分，请忽略它。否则，它是一个外部参与者，你必须把它放在用例图中。

# javascript - 将迭代和逻辑放在测试中是错误的吗？

> ID：10938333
> 
> 赞同：1
> 
> 时间：2012-06-07T19:10:19.767
> 
> 标签：javascript, unit-testing

与问题一样，我的测试应该尽可能简单，还是应该包含一些模仿我正在测试的函数逻辑的逻辑？
举个例子，我正在测试这个功能：

```
$( 'ul.nav-tabs a' ).click( event_handlers.handle_set_tab_cookie );

var handle_set_tab_cookie = function( e ) {
    var active = $( this ).attr( 'href' );
    $.cookie( 'feeds_active_tab', active );
}; 
```

我的测试应该像这样愚蠢：

```
describe( "Facebook Feeds page", function() {
    beforeEach( function() {
        $( 'ul.nav' ).remove();
        var html = $('<ul class="nav nav-tabs"><li class="active"><a data-toggle="tab" href="#facebook">Facebook Feeds</a></li><li class=""><a data-toggle="tab" href="#ics">ICS</a></li></ul>');
        $('body').append( html );
    } )
    it( "Should call jQuery cookie to save the href ", function() {
        // Set up the listeners
        page.start();
        // Set up spies
        spyOn($, 'cookie');
        // Start the test
        var a = $( 'a[href=#facebook]' );
        a.trigger( 'click' );
        // verify that it has been called with the correct parameter
        expect($.cookie).toHaveBeenCalled();
        expect($.cookie).toHaveBeenCalledWith('feeds_active_tab', '#facebook'); 
    } );
    afterEach( function() {
        $( 'ul.nav' ).remove();
    } );
} ); 
```

或者有一些迭代/逻辑，以便我一次完成所有测试？

```
describe( "Facebook Feeds page", function() {
    beforeEach( function() {
        $( 'ul.nav' ).remove();
        var html = $('<ul class="nav nav-tabs"><li class="active"><a data-toggle="tab" href="#facebook">Facebook Feeds</a></li><li class=""><a data-toggle="tab" href="#ics">ICS</a></li></ul>');
        $('body').append( html );
    } )
    it( "Should call jQuery cookie to save the href ", function() {
        // Set up the listeners
        page.start();
        // Set up spies
        spyOn($, 'cookie');
        // Start the test and iterate over all the links
        $( 'ul.nav a' ).each( function(i, el) {;
                $(el).trigger( 'click' );
                // verify that it has been called with the correct parameter
                expect($.cookie).toHaveBeenCalled();
                expect($.cookie).toHaveBeenCalledWith('feeds_active_tab', $(el).attr('href'); 
                    } ); 
    } );
    afterEach( function() {
        $( 'ul.nav' ).remove();
    } );
} ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:48:21.980

更复杂的测试：

1.  更难维护
2.  不能用作文档
3.  更难阅读，软件的阅读频率比编写的频率高
4.  写错的可能性更高（谁来测试我们的测试？）
5.  在 TDD 期间可能会破坏您的 api 设计

另一方面，编写一个覆盖整个功能的测试比编写 12 个小测试更容易和更快。这就是为什么这种方式通常会获胜。总结一下：如果您的项目计划长期存在，我会编写最小和最简单的测试。要求更高，但将来会获利

# jquery - 使用 jQuery 和 listdata.svc 更新 SharePoint 列表时无法获取 Etag

> ID：10938336
> 
> 赞同：0
> 
> 时间：2012-06-07T19:10:32.177
> 
> 标签：jquery, rest, sharepoint-2010

所以我使用jQuery 与SharePoint 的Rest Services（即listdata.svc）进行交互。当我调用 listdata.svc 更新现有项目时更新工作正常，但我无法获取 listdata.svc 为该项目发回的新 ETag。在响应中返回的 HTTP 状态是 204（无内容）。新的 ETag 在响应中的“ETag”标头中发送（我可以在 Fiddler 中清楚地看到它）。但是在我的 jQuery Ajax 调用的“成功：”或“完成：”回调中，如果我调用 jqXHR.getResponseHeader("ETag") 它总是返回 null。对于 Ii 要求的任何标头，它都返回 null。如果我调用 jqXHR.getAllResponseHeaders() 它返回一个空字符串。

添加记录时，我遇到了同样的问题。添加记录后，listdata.svc 会发回 ETag，以及请求标头中的新项目的 URL，我无法获取！

我正在使用 jQuery-1.7.2、Internet Explorer 版本 8.0.7601.17514 和带有 SP1 的 SharePoint 2010。客户端操作系统是 windows 7。

我在一个简单的脚本中重新创建了该问题，该脚本尝试更新名为 resttest 的新 TeamSite 的任务列表中的任务标题。代码如下所示。

有谁知道这个问题的修复或解决方法？我测试了我是否得到与本机 XMLHttpRequest 相同的结果，但这也失败了。我得到一个 1223 的 HTTP 状态，并且 client.getResponseHeader("ETag") 返回一个空字符串。本机代码如下所示。

我在 IE9 中测试了 tis，我得到了同样糟糕的结果。我在 Chome 和 Firefox（使用 XMLHttpRequest 版本）中测试了 int 并且 client.getResponseHeader("ETag") 重新调整了 ETAG！在两个浏览器中！（太糟糕了，我的 yCOmpany 标准是 IE！）。

这是使用 jQuery 的代码：

```
 _spBodyOnLoadFunctionNames.push("doit");
function doit(){
debugger;
$.ajax({
      url: "http://myServerName/resttest/_vti_bin/listData.svc/Tasks(1)",
      contentType: 'application/json; charset=utf-8',
      datatype: 'json',
      type: 'POST',
      async: true,    
      global:false,
      processData:false,
      data:"{Title:'Updated title'}",
      beforeSend: function (jqXHR, settings) {
                    jqXHR.setRequestHeader("X-HTTP-Method", "PUT");
                    jqXHR.setRequestHeader("If-Match", 'W/"2"');  // this must be set to the "Current" value of the etag on the server (I can get to it by calling http://myServerName/resttest/_vti_bin/listData.svc/Tasks(1)) from a browser
           },
      success: function (data, textStatus, jqXHR) {
            },
      complete: function (jqXHR, textStatus) {
                debugger;
                var x = jqXHR.getResponseHeader("ETag"); // this returns null , even though i see ETag: W/"2" in the headers in fiddler!
                var y = this.xhr();
                var z = y.getAllResponseHeaders();
                var kjh = y.getResponseHeader("ETag");
            },
      error: function (jqXHR, textStatus, errorThrown) {
                debugger;
                alert(jqXHR.responseText);
                alert('Something bad happened. Stopping');
            }
    });
} 
```

以下是 Fiddler 的响应标头：

```
HTTP/1.1 204 No Content
Cache-Control: no-cache
ETag: W/"2"
Server: Microsoft-IIS/7.5
SPRequestGuid: d0fc56f0-8277-469a-a290-e7d3de96295d
Set-Cookie: WSS_KeepSessionAuthenticated={b6a87457-6e7d-4de0-9c8d-f56add57f6f4}; path=/
X-SharePointHealthScore: 0
DataServiceVersion: 1.0;
X-AspNet-Version: 2.0.50727
Set-Cookie: WSS_KeepSessionAuthenticated={b6a87457-6e7d-4de0-9c8d-f56add57f6f4}; path=/
X-Powered-By: ASP.NET
MicrosoftSharePointTeamServices: 14.0.0.6106
Date: Thu, 07 Jun 2012 18:25:14 GMT 
```

下面是使用 XMLHttpRequest 的代码：

```
_spBodyOnLoadFunctionNames.push("doit");
function doit() {
    debugger;
    var url = "http://sgm1dsps06/resttest/_vti_bin/listData.svc/Tasks(1)";
    var client = new XMLHttpRequest();
    client.open("POST", url, false);
    client.setRequestHeader("X-HTTP-Method", "PUT");
    client.setRequestHeader("Content-Type", "application/json; charset=utf-8");
    client.setRequestHeader("If-Match", 'W/"5"');  // this must be set to the "Current" value of the etag on the server (I can get to it by calling http://sgm1dsps06/resttest/_vti_bin/listData.svc/Tasks(1)) from a browser
    client.send("{Title:'Updated title'}");
   {
       alert("Status is : " + client.status + " " + client.statusText + ".");  //the status is always 1223
       var etag = client.getResponseHeader("ETag");
       if (etag == null)
           alert("etag is null"); 
       else
           alert("Etag is " + etag); // the etag is alwasys an empty string

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T17:59:25.480

我找到了解决这个问题的可行方法。由于我们无法获取原始 PUT 请求返回的 http 标头，因此我刚刚从原始“PUT”请求的成功回调中向资源发出了一个新查询

>

```
 _spBodyOnLoadFunctionNames.push("doit");
function doit(){
debugger;
$.ajax({
      url: "http://sgm1dsps06/resttest/_vti_bin/listData.svc/Tasks(1)",
      contentType: 'application/json; charset=utf-8',
      datatype: 'json',
      type: 'POST',
      async: true,    
      global:false,
      processData:false,
      data:"{Title:'Updated title'}",
      beforeSend: function (jqXHR, settings) {
                    jqXHR.setRequestHeader("X-HTTP-Method", "PUT");
                    jqXHR.setRequestHeader("If-Match", 'W/"3"');  // this must be set to the "Current" value of the etag on the server (I can get to it by calling http://sgm1dsps06/resttest/_vti_bin/listData.svc/Tasks(1)) from a browser
           },
      success: function (data, textStatus, jqXHR) {
            },
      complete: function (jqXHR, textStatus) {
               debugger;
                if (jqXHR.status === 204) {
                    // requery the resource to get the new etag // this is due to a bug in ie that drops all headers associated with an http 204
                    $.ajax({
                        async: false,
                        contentType: 'application/json; charset=utf-8',
                        datatype: 'json',
                        url: this.url,
                        success: function (data, textStatus, jqXHR) {
                            var etag = jqXHR.getResponseHeader("ETag");
                            alert(etag);
                        }
                    }
                  }
            },
      error: function (jqXHR, textStatus, errorThrown) {
                debugger;
                alert(jqXHR.responseText);
                                }
    });
} 
```

# html - 使用创建下拉菜单导航 我已经设法让自己使用 html <select>进行下拉菜单导航。不过，我遇到了一个问题。我的外部链接不起作用。即优酷。这是代码：</select> <option value="" selected="selected">导航</option> <option value="index.h</h1>
<blockquote>
        <p>ID：10938341</p>
        <p>赞同：6</p>
        <p>时间：2012-06-07T19:10:36.193</p>
        <p>标签：html, drop-down-menu, navigation, html-select</p>
        </blockquote>

            <hr/>
            <h2>回答 #1</h2>
            <blockquote>
            <p>赞同：3</p>
            <p>时间：2012-06-27T12:03:56.293</p>
            </blockquote>

<p>好吧，您不会想听到这个，但它对我来说效果很好......我复制并粘贴了代码并使用 Chrome 对其进行了测试，它可以很好地进入您的页面。</p>

            <hr/>
            <h2>回答 #2</h2>
            <blockquote>
            <p>赞同：2</p>
            <p>时间：2015-06-05T06:39:26.043</p>
            </blockquote>

<p>你可能想<code>onChange</code>改变<code>window.location.href=this.value</code>* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T02:52:58.993

一些浏览器可能反对看到 ? 在选择列表中的字符串中。尝试使用 TinyURL 转换您的 YouTube URL。我还没有测试过，但我猜这会成功。</p>
<p>所以，正确的代码是：</p>
<pre><code><select onChange=" window.location.href="this.value&quot;>" &lt;option="" selected="selected" &gt;navigation&lt;="" option&gt;="" &gt;home&lt;="" &gt;video="" production&lt;="" &gt;location="" sound&lt;="" editing&lt;="" &gt;custom="" graphics&lt;="" &gt;demo="" reel&lt;="" &gt;you="" tube&lt;="" &gt;vimeo&lt;="" &gt;camera="" rental&lt;="" &gt;audio="" &gt;grip="" support&lt;="" &gt;about="" us&lt;="" &gt;contact&lt;="" &lt;="" select&gt;="" <="" code=""></option>

# ruby-on-rails - RSpec 找不到 Ruby 文件/类

> ID：10938343
> 
> 赞同：2
> 
> 时间：2012-06-07T19:10:46.373
> 
> 标签：ruby-on-rails, rspec

我正在使用`rspec 2.10`with`Rails 3.2.1`并且遇到找不到类的问题。

我在目录 app/util 下放置了一个名为 DbTasks 的类。根据规范，我创建了在`util/db_tasks_spec.rb`包含以下行之后运行的文件：

```
require File.join(File.dirname(__FILE__), '../../app/util/db_tasks') 
```

但是，`rspec`现在无法找到我的模型。我不想手动包含这些。有没有办法配置 rspecs 路径以便找到所有内容？

# static-libraries - 在 Linux 上使用 GtkD，我如何静态链接编译的库？

> ID：10938357
> 
> 赞同：0
> 
> 时间：2012-06-07T19:12:04.450
> 
> 标签：static-libraries, d, ubuntu-12.04, gtkd

这有点与这个问题有关：[GtkD（D 语言的 Gtk+绑定）为什么要编译它？](https://stackoverflow.com/questions/10905212/gtkd-the-gtkbindings-for-the-d-language-why-compile-it)

我在 Ubuntu 12.04 上将 GtkD 与 D 编程语言一起使用，我一直试图将编译后的库与我的程序静态链接。一旦 GtkD 被编译，就会有三个库

1.  libgtkd.a
2.  libgtkdgl.a
3.  libgtkdsv.a

完成后将`make install`这些文件放入`/usr/local/lib/`文件夹中，并将 GtkD 源文件放入`/usr/local/includes/d/`文件夹中。我还将源代码编译为`*.di`文件并将它们放在相关文件夹中，`/usr/local/includes/d/`因为 make 脚本默认情况下不这样做。

这是我要编译的源代码。

```
pragma(lib, "/usr/local/lib/libgtkd.a");

import gtk.MainWindow;
import gtk.Label;
import gtk.Main;

void main(string[] args)
{
    Main.init(args);
    MainWindow win = new MainWindow("Hello World!");
    win.setDefaultSize(200, 100);
    win.add(new Label("Hello World"));
    win.showAll();
    Main.run();
} 
```

这是我使用的编译器命令：

```
rdmd -L-ldl hello_world.d 
```

这是错误：

```
/usr/local/lib/libgtkd.a(Loader.o): In function `_D4gtkc6Loader12pLoadLibraryFAyaE4gtkc6Loader4RTLDZPv':
src/gtkc/Loader.d:(.text._D4gtkc6Loader12pLoadLibraryFAyaE4gtkc6Loader4RTLDZPv+0x28): undefined reference to `dlopen'
src/gtkc/Loader.d:(.text._D4gtkc6Loader12pLoadLibraryFAyaE4gtkc6Loader4RTLDZPv+0x31): undefined reference to `dlerror'
/usr/local/lib/libgtkd.a(Loader.o): In function `_D4gtkc6Loader10pGetSymbolFPvAyaZPv':
src/gtkc/Loader.d:(.text._D4gtkc6Loader10pGetSymbolFPvAyaZPv+0x23): undefined reference to `dlsym'
src/gtkc/Loader.d:(.text._D4gtkc6Loader10pGetSymbolFPvAyaZPv+0x2c): undefined reference to `dlerror'
/usr/local/lib/libgtkd.a(Loader.o): In function `_D4gtkc6Loader14pUnloadLibraryFPvZi':
src/gtkc/Loader.d:(.text._D4gtkc6Loader14pUnloadLibraryFPvZi+0x9): undefined reference to `dlclose'
collect2: ld returned 1 exit status
--- errorlevel 1

shell returned 1 
```

任何想法我做错了什么？它看起来像一个 ld 错误，但这是链接的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:26:27.350

参数的顺序与链接器**ld很重要。**通常，您应该将依赖项放在依赖于它们的代码/库*之后。*所以我会像这样重写你的编译指示：

```
pragma(lib, "gtkd"); // let ld find it in your path
pragma(lib, "dl");   // gtkd depends on dl, so link it after 
```

现在尝试编译：

```
dmd hello_world.d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:05:53.197

您在参数中传递它 dmd 知道它们需要传递给链接器

```
rdmd libgtkd.a libgtkdgl.a libgtkdsv.a -L-ldl hello_world.d 
```

# reporting-services - 将参数传递给子报表

> ID：10938358
> 
> 赞同：1
> 
> 时间：2012-06-07T19:12:13.420
> 
> 标签：reporting-services

我有一个主报告提示用户输入两个参数（@ORI 和@CaseNumber）。在此报告中，我有一个子报告需要传递一个由主报告 (@Sequence) 获取的值。如何将主报表包含的值传递给子报表？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:31:31.490

右键单击带有导航的单元格，然后选择属性。单击导航选项卡。在显示跳转到报告的超链接操作部分中，单击参数按钮。这显示了链接报告的参数，并允许您输入要传递的值的表达式。要传递参数值，请输入以下内容：

```
=Parameters!MyParameter.Value 
```

# python - 单个 Flask 进程接收多少并发请求？

> ID：10938360
> 
> 赞同：175
> 
> 时间：2012-06-07T19:12:19.650
> 
> 标签：python, flask, wsgi, gunicorn

我正在用 Flask 构建一个应用程序，但我对 WSGI 及其 HTTP 基础 Werkzeug 了解不多。当我开始使用 gunicorn 和 4 个工作进程为 Flask 应用程序提供服务时，这是否意味着我可以处理 4 个并发请求？

我的意思是并发请求，而不是每秒请求数或其他任何东西。

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2012-12-18T08:36:03.410

当运行开发服务器时——这是你通过运行得到的`app.run()`，你得到一个同步进程，这意味着一次最多处理一个请求。

通过在其默认配置中将 Gunicorn 放在其前面并简单地增加 的数量`--workers`，您得到的本质上是许多进程（由 Gunicorn 管理），每个进程的行为都类似于`app.run()`开发服务器。4 个工作人员 == 4 个并发请求。这是因为 Gunicorn`sync`默认使用其包含的 worker 类型。

重要的是要注意 Gunicorn 还包括异步工作程序，即`eventlet`和`gevent`（以及`tornado`，但最好与 Tornado 框架一起使用，似乎）。通过使用`--worker-class`标志指定这些异步工作者之一，您将得到 Gunicorn 管理多个异步进程，*每个*进程管理自己的并发。这些进程不使用线程，而是使用协程。基本上，在每个进程中，一次仍然只能发生一件事（1 个线程），但对象在等待外部进程完成时可以“暂停”（想想数据库查询或等待网络 I/O）。

这意味着，如果您使用 Gunicorn 的一个异步工作器，每个工作器一次可以处理多个请求。多少工人最好取决于你的应用程序的性质、它的环境、它运行的硬件等。更多细节可以在[Gunicorn 的设计](http://docs.gunicorn.org/en/latest/design.html)页面和[关于 gevent 如何工作](http://www.gevent.org/intro.html)的说明在它的介绍页面上找到。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2018-06-06T01:05:04.587

目前有一个比已经提供的解决方案*简单得多的解决方案。*运行应用程序时，您只需将`threaded=True`参数传递给`app.run()`调用，例如：

```
app.run(host="your.host", port=4321, threaded=True) 
```

根据我们在[werkzeug 文档](http://werkzeug.pocoo.org/docs/0.14/serving/#werkzeug.serving.run_simple)中看到的另一个选项是使用`processes`参数，它接收一个 > 1 的数字，表示要处理的最大并发进程数：

> *   线程化——进程是否应该在单独的线程中处理每个请求？
> *   processes - 如果大于 1，则处理新进程中的每个请求，直到最大并发进程数。

就像是：

```
app.run(host="your.host", port=4321, processes=3) #up to 3 processes 
```

`run()`有关该方法[的](http://flask.pocoo.org/docs/1.0/api/#flask.Flask.run)更多信息，以及引导我找到解决方案和 api 参考的[博客文章。](https://medium.com/@dkhd/handling-multiple-requests-on-flask-60208eacc154)

* * *

**注意：**在有关`run()`方法的 Flask 文档中，不鼓励在生产环境中使用它，因为（[引用](https://flask.palletsprojects.com/en/1.1.x/deploying/#deployment)）：*“虽然轻量级且易于使用，但 Flask 的内置服务器不适合生产，因为它不能很好地扩展。”*

但是，他们确实指向他们的[部署选项](https://flask.palletsprojects.com/en/1.1.x/deploying/#deployment)页面，以了解在进行生产时执行此操作的推荐方法。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-06-08T05:31:58.537

Flask 将同时处理每个线程的一个请求。如果您有 2 个进程，每个进程有 4 个线程，那就是 8 个并发请求。

Flask 不会产生或管理线程或进程。这是 WSGI 网关（例如 gunicorn）的职责。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-08T02:11:43.240

不 - 你绝对可以处理更多。

重要的是要深深记住，假设您运行的是单核机器，CPU 确实一次只运行一条指令*。

也就是说，CPU 只能执行非常有限的一组指令，并且每个时钟滴答不能执行超过一条指令（许多指令甚至需要超过 1 个滴答）。

因此，我们在计算机科学中谈论的大多数并发是软件并发。换句话说，有一些软件实现层从我们身上抽象出底层 CPU，让我们认为我们正在同时运行代码。

这些“事物”可以是进程，它们是并发运行的代码单元，每个进程都认为它在自己的世界中运行，具有自己的非共享内存。

另一个例子是线程，它是进程内的代码单元，也允许并发。

您的 4 个工作进程将能够处理超过 4 个请求的原因是它们将触发线程以处理越来越多的请求。

实际请求限制取决于选择的 HTTP 服务器、I/O、操作系统、硬件、网络连接等。

祝你好运！

*指令是 CPU 可以运行的非常基本的命令。示例 - 将两个数字相加，从一条指令跳转到另一条指令

# c++ - 使用 cin.ignore()？不知道如何使它工作

> ID：10938363
> 
> 赞同：1
> 
> 时间：2012-06-07T19:12:27.980
> 
> 标签：c++, cin

```
bool showMenu(romanType roman){
    cout << endl;
    cout << "Just enter a number to choose an option" << endl;
    cout << "1: Print the Roman Numeral" << endl;
    cout << "2: Print the decimal value" << endl;
    cout << "3: Enter a new Roman Numeral" << endl;
    cout << "4: Quit the program" << endl;
    cout << endl;
    while (true) {

        cout << "Your choice:" << endl;
        int input;
        cin >> input;
        if (input == 1) {
            cout << roman.getRomanString() << endl;
        } else if(input ==2) {
            cout << roman.getDecimalValue() << endl;
        } else if(input == 3) {
            return true;
        } else if(input == 4) {
            return false;
        } else {
            cout << "Invalid selection, please make a valid selection." << endl;
        }
    }
} 
```

下车，所以总的来说这很好用，我的最后一个 else 语句只是有一个小问题。只要用户输入了一个 int 类型，循环就会执行它应该做的事情，但是如果输入任何类型的字符串（即 45r、rts、3e5），循环就会停止接受用户输入并无限循环，cout( ing）无效的选择...和您的选择...一遍又一遍。我想我需要使用 .ignore() 在字符串的情况下删除 \n ，但我不知道该怎么做。我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:15:46.603

是的，你在正确的轨道上。

`cin >> input`试图提取一个整数。如果失败，则不会从中提取符号`cin`并设置失败位。在这种情况下，提取将不再起作用。您必须[`ignore`](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)输入其余的用户输入和[`clear`](http://en.cppreference.com/w/cpp/io/basic_ios/clear)错误位：

```
} else {
    cout << "Invalid selection, please make a valid selection." << endl;
    cin.clear();
    cin.ignore(numeric_limits<streamsize>::max(),'\n');

// numeric_limits<streamsize>::max() returns the maximum size a stream can have,
// see also http://www.cplusplus.com/reference/std/limits/numeric_limits/
} 
```

另请参阅[为什么此 cin 读数会卡住？](https://stackoverflow.com/questions/478258/why-is-this-cin-reading-jammed).

# java - 从特定索引开始搜索 java.util.List

> ID：10938364
> 
> 赞同：3
> 
> 时间：2012-06-07T19:12:36.967
> 
> 标签：java, list, collections, indexof

是否有内置方法来搜索 java.util.List 指定开始搜索的第一项？就像你可以用[字符串做的一样](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28java.lang.String,%20int%29)

[我知道我可以很容易地自己实现一些东西，但如果是 Java 或http://commons.apache.org/collections/api-release/org/apache/commons/collections/package-summary](http://commons.apache.org/collections/api-release/org/apache/commons/collections/package-summary.html)，我宁愿不重新发明轮子[.html](http://commons.apache.org/collections/api-release/org/apache/commons/collections/package-summary.html)已经有了。

**我不是在问如何实现这一点，我是在问是否已经有东西可用**这里的很多建议都是错误的。

**如果有人关心获得正确答案的功劳，请更新您的答案，说没有内置的方法可以做到这一点（如果您确定的话）**

这是我想做的

```
List<String> strings = new ArrayList<String>();
// Add some values to the list here
// Search starting from the 6th item in the list
strings.indexOf("someValue", 5); 
```

现在我正在使用

```
/**
 * This is like List.indexOf(), except that it allows you to specify the index to start the search from
 */
public static int indexOf(List<?> list, Object toFind, int startingIndex) {
    for (int index = startingIndex; index < list.size(); index++) {
        Object current = list.get(index);
        if (current != null && current.equals(toFind)) {
            return index;
        }
    }
    return -1;
} 
```

我也将它实现为

```
public static int indexOf(List<?> list, Object toFind, int startingIndex) {
    int index = list.subList(startingIndex).indexOf(toFind);
    return index == -1 ? index : index + startingIndex;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T19:16:25.937

没有一种方法，但是有一个简单的文档化方法可以用 1-2 行代码来实现。它甚至[在此方法的文档中这样](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)说：

```
strings.subList(5, strings.size()).indexOf("someValue"); 
```

可能在结果中添加 5（如果不是 -1），具体取决于您是否要保留该子列表等：

```
int result = list.subList(startIndex, list.size()).indexOf(someValue);
return result== -1 ? -1 : result+startIndex; 
```

注意： `subList`不创建新的，*只是*`List`原始视图的视图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T19:16:21.927

您可以使用`sublist`，如下所示：

```
List<String> strings = new ArrayList<String>();
// Add values ...
int start = 5;
int pos = strings.sublist(start, strings.size()).indexOf("someValue");
// Don't forget to add the starting point back
if (pos >= 0) pos += start; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T19:17:19.613

对于更通用的方法，请尝试以下方法：

```
public static int indexOf(List<?> list, int start, Object value) {
    int idx = list.subList(start, list.size()).indexOf(value);
    return idx != -1 ? idx + start : -1;
} 
```

它适用于任何类型的列表，`-1`如果没有找到元素则返回。像这样使用它：

```
List<String> strings = Arrays.asList("a", "b", "c", "a", "b", "c");
int idx = indexOf(strings, 2, "a");
System.out.println(idx);
> 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T19:21:20.223

您可以使用 和 的组合`subList(int from, int to)`，`indexOf`如下所示：

```
int pos = strings.subList(5, strings.size()).indexOf("someValue");
if (pos >= 0) {
    pos += 5;
} 
```

# javascript - 使功能切换它在每次点击时的作用

> ID：10938366
> 
> 赞同：-1
> 
> 时间：2012-06-07T19:12:43.253
> 
> 标签：javascript, slideshow

我正在尝试使用 JavaScript 为网站制作类似幻灯片的东西，但进展不顺利。我想要它做的是一键更改它以使其正确返回。

这是代码：

```
function previous_slide()
{
    document.getElementById('banner').className = 'banner_2';
} 
```

我想在当前动作和这个动作之间切换单个功能：

```
document.getElementById('banner').className = 'banner_1'; 
```

这样，当您按下上一个按钮时，它会将样式更改为`banner_2`，然后当您再次按下它时，它会返回到`banner_1`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:16:53.653

```
previous_slide = toggle( [function(){
    document.getElementById('banner').className = 'banner_2'
}, function() {
    document.getElementById('banner').className = 'banner_1' 
}]); 
```

代码`toggle`

```
function toggle(functions) {
    var i = 0;
    return function() {
        return functions[i++ % functions.length].apply( this, arguments );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:16:31.080

```
function previous_slide()
{
  if (document.getElementById('banner').className == 'banner_2') {
      document.getElementById('banner').className = 'banner_1' 
  }
  else {
      document.getElementById('banner').className = 'banner_2'
  } 
} 
```

# validation - 在 Web 应用程序中验证名字

> ID：10938377
> 
> 赞同：0
> 
> 时间：2012-06-07T19:13:43.827
> 
> 标签：validation, jsp, tomcat, web-applications

我不想太严格，因为可能的名字中可能有数千个可能的字符

普通英文字母、重音字母、非英文字母、数字（??）、常用标点符号

例如

```
D'souza
D'Anza
M.D. Shah (dots and space)
Al-Rashid
Jatin "Tom" Shah 
```

但是，我不想除了 HTML 标签、分号等

从 Web 应用程序的角度来看，是否有这样的字符列表绝对不好

然后我可以使用 RegEx 将这些字符列入黑名单

**我的申请背景**

它是一个基于 Java Servlet-JSP 的 Web 应用程序。以 MySQL（有时是 MongoDB）作为后端的 Linux 上的 Tomcat

**到目前为止我尝试过的**

```
String regex = "[^<>~@#$%;]*";
if(!fname.matches(regex))
    throw new InputValidationException("Invalid FirstName") 
```

我的问题更多是关于设计而不是编码......我正在寻找一个详尽的（非常详尽的）我应该列入黑名单的字符列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:56:46.993

更好的方法是接受任何人想要输入的任何内容，然后在可能导致问题的上下文中转义任何有问题的字符。

例如，没有理由禁止人们`<i>`在他们的名字中使用（尽管它可能极不可能是一个合法的名字），而且它只会在您为用户生成 HTML 时造成潜在的问题 (XSS)。同样，禁止引号、分号等仅在其他场景（SQL 查询等）中才有意义。如果不同地方的规则不同，并且您想清理*输入*，那么您需要将所有规则放在同一个地方（空格呢？您是否要创建包含用户名字的文件名？如果是这样，也许您会有将其添加到黑名单）。

假设您至少在一种情况下会出错：也许您在第一次实施时没有考虑到某些事情，所以您返回并将新项目添加到您的黑名单中。您仍然有已注册受污染数据的用户。因此，您可以运行整个数据库以清理数据（这可能需要*很* ***长时间***），或者您可以做您真正必须做的事情：清理当前媒体中呈现的数据。这样，您只需管理相关点的清理（无需保护 HTML 输出免受 SQL 注入攻击）*，*它将适用于您的所有数据，而不仅仅是您在实施黑名单后收集的数据。

# gwt - 将 GWT 1.7 迁移到 GWT 2.4

> ID：10938379
> 
> 赞同：0
> 
> 时间：2012-06-07T19:13:53.500
> 
> 标签：gwt, gwt2, gxt

我正在尝试将 GWT 从 1.7 升级到 GWT 2.4，但我收到构建错误说

'jar:file:/C:/src/project/lib/gxt.jar!/com/extjs/gxt/ui/client/widget/Component.java' [ERROR] 第 1280 行中的错误：无法降低从 Widget 继承的方法

我也应该更改gxt版本吗？我试图将 gxt 更改为 2.2.5 和 2.2.6 但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:26:10.453

是的，您确实需要升级 GXT。GXT 2.2.4+ 应该可以工作。检查发行说明；他们说 GXT 2.2.4 版中引入了 GWT 2.3 支持。

[http://dev.sencha.com/deploy/gxt-2.2.4/release_notes.html#Release_2.2.4](http://dev.sencha.com/deploy/gxt-2.2.4/release_notes.html#Release_2.2.4)

他们也在论坛上回答这个问题。

[http://www.sencha.com/forum/showthread.php?146796-GWT-2.4-compatibility](http://www.sencha.com/forum/showthread.php?146796-GWT-2.4-compatibility)

# javascript - jquery动画到新页面

> ID：10938388
> 
> 赞同：1
> 
> 时间：2012-06-07T19:14:33.797
> 
> 标签：javascript, jquery, ajax, jquery-animate

有没有办法使用 jquery.animate 来加载一个带有 ajax 的页面，并在它准备好动画时让它向上或向一侧滑动？所以让我们说我在 index.html 页面中，我想去 about.html 页面，它会首先加载它，当它准备好而不是刷新到新页面时，它将使用以下方法对其进行动画处理：[http： //demos.flesler.com/jquery/localScroll/#section4c](http://demos.flesler.com/jquery/localScroll/#section4c)

```
function(){
$("#go2About").click(function(){
    $('about.html').animate({
         //animate the new page here
    });
}); 
```

这将是如何动画的某种示例代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:18:05.013

您可能会产生相同的效果，但实际上不会刷新页面。

例如，如果您将每个“页面”的 HTML 包装在一个包装器`<div>`元素中，那么您可以简单地为这些包装器 div 设置进出用户视口的动画，以创建页面转换的效果。

您的 AJAX 调用可以使用页面 HTML 填充相应的`<div>`元素，并且一旦加载，您就可以调用该`.animate()`函数来交换页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:25:41.640

你可以使用类似这样的逻辑：

```
<!DOCTYPE>

<html>
<head>
    <title>Test</title>

    <script type="text/javascript">
        function loadIt() {
            $.ajax({
                url: "about.html",
                cache: false,
                success: function (data) {
                    $("#content").empty();
                    $(data).hide().appendTo($("#content")).slideDown();
                },
                error: function () {
                    alert("something went wrong");
                }
            });
        }
    </script>
</head>
<body>
    <input type="button" id="button1" value="Load About" onclick="loadIt();" />

    <br />

    <div id="content" style="width: 400px; height: 400px; border: 1px solid #000;">

    </div>
</body>
</html> 
```

但是要知道“about.html”的内容不应该是一个完整的 HTML 文档——它应该是进入 <body> 元素的东西。

一种更简单的方法可能是使用 iframe（当它没有任何内容时隐藏） - 当您单击按钮时，让 javascript 将 iframe 的 src 属性设置为“about.html”，然后使用 slideDown() 对其进行动画处理“加载”。这样，“about.html”可以是一个完整的 HTML 文档，您不必担心类似的事情。

# android - 没有任何其他键盘的 Android 屏幕键盘

> ID：10938389
> 
> 赞同：0
> 
> 时间：2012-06-07T19:14:34.300
> 
> 标签：android, keyboard, ime

我查看了几个问题并遇到了几个帖子，但我无法弄清楚如何做到这一点。

下图显示了基本布局： ![在此处输入图像描述](../Images/a4ff05bf2965feb3fdf8b866f4a7900a.png)

我创建了一个[自定义小键盘](https://github.com/nutrixtech/Android-CustomNumpad)并将其放在 repo 上。

目前，当应用程序打开时，编辑文本具有焦点，但我用键盘输入的任何内容都会进入编辑文本框。这部分功能运行良好。

**问题**：当我再次触摸edittext时，弹出带有巨大键盘的系统输入法。我如何完全阻止它弹出？或者，我可以告诉应用程序只使用我的键盘而不是系统键盘吗？（或者是编写自定义 ime 的唯一方法？）

我不能在清单中使用 NULL 类型输入，因为这样做会使编辑文本中的插入符号消失，而且如果有两个编辑文本，我不知道哪个有焦点。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:18:31.877

你可以做几件事：

1.  以编程方式将其隐藏在整个应用程序中：

    ```
    getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
    ```

2.  将其从将附加到的视图中隐藏：

    ```
    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(yourEditText.getWindowToken(), 0); 
    ```

3.  将 EditText 的输入类型设置为 0：

    ```
    EditText yourEditText=(EditText)findViewById(R.id.editTextConvertValue);
    yourEditText.setInputType(0); 
    ```

# c# - 释放一个TCP端口，异步调用

> ID：10938402
> 
> 赞同：0
> 
> 时间：2012-06-07T19:15:33.500
> 
> 标签：c#, asynchronous, port, unbind

我有一个 TCP 服务器，它不断接收来自不同来源的 TCP 流。我有一个触发停止的外部事件，发生这种情况时，需要释放 TCP 端口。下面的代码可以正常工作，除了闭包。关闭是没有释放端口，TCP端口卡在监听状态。我怎样才能解决这个问题？

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading;
using System.Windows.Forms;

namespace TestTest
{

    public class tcpserver
    {

        // State object for reading client data asynchronously
        public class StateObject
        {
            // Client  socket.
            public Socket workSocket = null;

            // Size of receive buffer.
            public const int BufferSize = 2097152;

            // Receive buffer.
            public byte[] buffer = new byte[BufferSize];

            // Received data string.
            public StringBuilder sb = new StringBuilder();
        }

        public class AsynchronousSocketListener
        {
            public Form10 m_parent;
            Socket parentlistener;

            // Incoming data from client.
            public static string data = null;

            // Thread signal.
            public static ManualResetEvent allDone = new ManualResetEvent(false);

            public AsynchronousSocketListener()
            {
            }

            public  void StartListening(Form10 frm10)
            {
                m_parent = frm10;

                try
                {
                    // Data buffer for incoming data.
                    byte[] bytes = new Byte[2097152];
                    int port = Convert.ToInt32(m_parent.textBox2.Text.Trim());
                    IPAddress ipv4 = IPAddress.Parse(m_parent.comboBox1.SelectedItem.ToString().Trim());
                    IPEndPoint localEndPoint = new IPEndPoint(ipv4, port);

                    // Create a TCP/IP socket.
                    parentlistener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                    parentlistener.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, false);
                    LingerOption lo = new LingerOption(false, 0);
                    parentlistener.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.Linger, lo);

                    // Setting the array to have this ip and port
                    m_parent.m_parent.setUsedIPport(
                        m_parent.comboBox1.SelectedItem.ToString().Trim() +
                        ":" + m_parent.textBox2.Text.Trim());

                    // Bind the socket to the local endpoint and
                    // listen for incoming connections.
                    try
                    {
                        parentlistener.Bind(localEndPoint); // THIS IS THE PORT I WOULD LIKE
                                                            // TO RELEASE ON AN EXTERNAL TRIGGER
                        parentlistener.Listen(100);

                        while (m_parent.getStopState() == false)
                        {
                            //MessageBox.Show("L");

                            allDone.Reset();

                            //// Start an asynchronous socket to listen for connections.
                            parentlistener.BeginAccept(
                                new AsyncCallback(AcceptCallback), parentlistener);
                        }
                    }
                    catch (Exception e)
                    {
                        Console.WriteLine(e.ToString());
                    }
                }
                catch (Exception) {
                    MessageBox.Show("Error binding to tcp port", "ERROR"); return;
                }
            }

            public void AcceptCallback(IAsyncResult ar)
            {
                try
                {
                    // Signal the main thread to continue.
                    allDone.Set();

                    // Get the socket that handles the client request.
                    Socket listener = (Socket)ar.AsyncState;
                    Socket handler = listener.EndAccept(ar);
                    LingerOption lo = new LingerOption(false, 0);
                    handler.SetSocketOption(SocketOptionLevel.Socket,
                                            SocketOptionName.Linger,
                                            lo);

                    // Create the state object.
                    StateObject state = new StateObject();
                    state.workSocket = handler;

                    handler.BeginReceive(state.buffer, 0, StateObject.BufferSize,
                                         0, new AsyncCallback(ReadCallback), state);

                }
                catch (Exception er) {
                    //MessageBox.Show(er.ToString());
                }
            }

            public  void ReadCallback(IAsyncResult ar)
            {

                try
                {
                    String line = String.Empty;
                    // Retrieve the state object and the handler socket
                    // from the asynchronous state object.
                    StateObject state = (StateObject)ar.AsyncState;
                    Socket handler = state.workSocket;

                    string temporaryString = "";
                    // Read data from the client socket.
                    int bytesRead = handler.EndReceive(ar);

                    if (bytesRead > 0)
                    {
                        // There  might be more data, so store the data received so far.
                        state.sb.Append(Encoding.ASCII.GetString(state.buffer, 0, bytesRead));

                        line = state.sb.ToString(); // This goes into an external
                                                    // store, and code is not here

                        handler.BeginReceive(state.buffer, 0, StateObject.BufferSize,
                                             0, new AsyncCallback(ReadCallback), state);
                        }
                    }
                }
                catch (Exception er) {
                    //MessageBox.Show(er.ToString());
                }
            }

            public void stopListener()
            {
                try
                {
                    parentlistener.Shutdown(SocketShutdown.Both);
                    //parentlistener.Disconnect(true);
                    parentlistener.Close();  // PROBLEM !!! The code is not releasing
                                             // the port, the tcp port continues to
                                             // remain in the listening state.
                    parentlistener.Dispose();
                }
                catch (Exception Ex) {
                    //MessageBox.Show(Ex.ToString());
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:58:00.793

就在几天前，我们遇到了这个确切的问题。在我们的例子中，我们必须将 Linger 模式设置为 TRUE（您已将其设置为 false），超时时间为 0（您已经拥有）。

这有点违反直觉，但确实有效。

# .net - 数据与堆叠柱状图中的多个系列绑定

> ID：10938403
> 
> 赞同：0
> 
> 时间：2012-06-07T19:15:33.550
> 
> 标签：.net, stacked

当我在堆积柱状图中将数据与多个系列绑定时，仅显示第一个系列，
而其他系列未显示数据。我遍历系列并动态添加点到系列，但问题仍然存在。我还将 isshowedaslabel
属性设置为 true 但问题不解决请帮助我。

**asp 代码：**

```
 XValueMember="qno"   YValueMembers="option3" ></asp:Series>
                        <asp:Series Name="Series2" ChartType="StackedColumn"   

                   XValueMember="description" YValueMembers="option3"></asp:Series>
                            <asp:Series Name="Series3" ChartType="StackedColumn" 

                      XValueMember="option1" YValueMembers="option3"></asp:Series>
                                <asp:Series Name="Series4" ChartType="StackedColumn"  

                   XValueMember="description" YValueMembers="option3">   
                    </asp:Series>
                </Series

>

            <ChartAreas>
                <asp:ChartArea Name="ChartArea1">
                </asp:ChartArea>
            </ChartAreas>
        </asp:Chart>

    **.aspx.cs**
     assessdal d = new assessdal();
            SqlConnection con = dbconnect.GetConnection();

            SqlCommand cmd = new SqlCommand("select assessid, qno ,description,    
           option1,option2,option3,option4 from assessmenttest", con);
            SqlDataReader reder = cmd.ExecuteReader();

                Chart2.DataSource = d.showop1();

                Chart2.DataBind();

                Chart2.Series["Series1"].IsValueShownAsLabel = true;

                Chart2.Series["Series2"].IsValueShownAsLabel = true;
                Chart2.Series["Series3"].IsValueShownAsLabel = true;
                Chart2.Series["Series4"].IsValueShownAsLabel = true;
                while (reder.Read())
                {
                    if (reder.HasRows)
                    {

                        //Chart2.Series["Series1"].Points.DataBindY(reder, "option3");
                        //Chart2.Series["Series2"].Points.DataBindY(reder, "option3");
                        //Chart2.Series["Series3"].Points.DataBindY(reder, "option3");
                        //Chart2.Series["Series4"].Points.DataBindY(reder, "option3");
                    }
                    foreach (Series s in Chart2.Series)
                    {
                        s.Points.DataBindY(reder,"option3");
                    }

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:45:42.833

我建议改用 DataBindCrossTable 方法将数据绑定到堆积条形图/堆积柱形图。看看这里的例子：

[http://blogs.msdn.com/b/saveenr/archive/2012/01/25/microsoft-chart-controls-using-databindcrosstable-method-for-dynamic-series.aspx](http://blogs.msdn.com/b/saveenr/archive/2012/01/25/microsoft-chart-controls-using-databindcrosstable-method-for-dynamic-series.aspx)

该方法基本上对指定的列执行 GROUP BY 操作，并为该列中的每个不同值创建一个图表系列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T19:06:20.807

@kad81 引用的示例已移动，它没有解决图表类型。以我的经验`DataBindCrossTable`默认为柱形图。

这是示例中的相关代码片段，另外我在底部添加了循环来处理堆积柱形图样式。

```
// Setup the data
var dt = new System.Data.DataTable();
dt.Columns.Add("Name", typeof(string));
dt.Columns.Add("BugCount", typeof(int));
dt.Columns.Add("Day", typeof(int));
dt.Rows.Add("Kim", 10, 0);
dt.Rows.Add("Kim", 12, 1);
dt.Rows.Add("Kim", 18, 2);
dt.Rows.Add("Kim", 5, 3);
dt.Rows.Add("Philby", 18, 0);
dt.Rows.Add("Philby", 25, 1);
dt.Rows.Add("Philby", 9, 2);
dt.Rows.Add("Philby", 32, 3);

// Build the chart
this.chart1.Series.Clear();
this.chart1.DataBindCrossTable(dt.Rows, "Name", "Day", "BugCount", "");

foreach (Series s in this.chart1.Series)
{
    s.ChartType=SeriesChartType.StackedColumn;
} 
```

# php - move_uploaded_file

> ID：10938408
> 
> 赞同：0
> 
> 时间：2012-06-07T19:15:51.833
> 
> 标签：php, file, upload

我有一个包含 3 个选项卡的表单，一个用于图片，一个用于音乐，一个用于 youtube。前两个是人们可以上传文件的表单，第二个只是用于 youtube 链接。

当人们点击“上传”按钮时，他们会被发送到实际上传完成的第二页。现在上传 musc 工作，但对图片使用相同的代码似乎不起作用。

```
if (isset($_POST['submitfoto'])) {
    // uploaden
    $target_path = "uploads/";
    $target_path = $target_path . time() . $_SERVER['REMOTE_ADDR'] . basename( $_FILES['uploadedfile']['name']); 
    if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {

    // Here I do a bunch of stuff with the database, but it never gets that far.    
    echo "Thanks for uploading this file.";

    } else{ echo "File upload failed";} } 
```

现在我一直收到文件上传失败。但完全相同的代码似乎适用于上传 .mp3 文件。

这怎么可能？

# php - 使用var_dump时string()“值”是什么意思

> ID：10938418
> 
> 赞同：2
> 
> 时间：2012-06-07T19:16:19.660
> 
> 标签：php, string

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:18:12.113

It means the variable is a [string](http://www.php.net/manual/en/language.types.string.php) of length 12\. The length of 12 can be caused by:

*   additional whitespace before/after `55` (use the [trim() function](http://php.net/manual/en/function.trim.php))
*   [HTML within the string](https://stackoverflow.com/questions/2798532/what-does-it-mean-when-var-dump-reports-the-wrong-string-length)

> A string is series of characters, where a character is the same as a byte.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:20:30.470

It's the length of the string. I don't see why your script is saying 12 though..

[http://codepad.viper-7.com/Bb4dfx](http://codepad.viper-7.com/Bb4dfx)

# android - 如何在这些复选框上使用滚动视图

> ID：10938419
> 
> 赞同：1
> 
> 时间：2012-06-07T19:16:20.520
> 
> 标签：android, android-scrollview

我有大约 10 个复选框，我无法上下查看所有这些复选框。我将如何使用滚动视图来查看它们这里是复选框的 xml。

`

```
<CheckBox
    android:id="@+id/CheckBox15"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/CheckBox14"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </LinearLayout>

<CheckBox
    android:id="@+id/CheckBox13"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/CheckBox12"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/CheckBox11"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

<CheckBox
    android:id="@+id/CheckBox10"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="CheckBox" />

 </LinearLayout> 
```

` 我想在这个复选框列表上使用滚动视图，请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:22:11.220

一个 ScrollView 只能包含一个 View 或 Layout，所以把你的 LinearLayout 放在 ScrollView 里面，然后把复选框放在那个 LinearLayout 里面：

```
<ScrollView>
<LinearLayout>
  <CheckBox />
  <CheckBox />
  <CheckBox />
  ....
</LinearLayout>
</ScrollView> 
```

# r - 所需示例：更改对象的默认打印方法

> ID：10938427
> 
> 赞同：27
> 
> 时间：2012-06-07T19:16:47.680
> 
> 标签：r

我需要一些行话方面的帮助，以及一小段示例代码。不同类型的对象在输入对象名称并回车时都有特定的输出方式，lm 对象显示模型的摘要，vector 列出向量的内容。

我希望能够编写自己的方式来“显示”特定类型对象的内容。理想情况下，我希望能够将其与现有类型的对象分开。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-07T19:26:58.447

这是一个让您入门的示例。一旦您了解了如何分派 S3 方法的基本概念，请查看任何返回的打印方法，`methods("print")`以了解如何实现更有趣的打印样式。

```
## Define a print method that will be automatically dispatched when print()
## is called on an object of class "myMatrix"
print.myMatrix <- function(x) {
    n <- nrow(x)
    for(i in seq_len(n)) {
        cat(paste("This is row", i, "\t: " ))
        cat(x[i,], "\n")
        }
}

## Make a couple of example matrices
m <- mm <- matrix(1:16, ncol=4)

## Create an object of class "myMatrix". 
class(m) <- c("myMatrix", class(m))
## When typed at the command-line, the 'print' part of the read-eval-print loop
## will look at the object's class, and say "hey, I've got a method for you!"
m
# This is row 1   : 1 5 9 13 
# This is row 2   : 2 6 10 14 
# This is row 3   : 3 7 11 15 
# This is row 4   : 4 8 12 16 

## Alternatively, you can specify the print method yourself.
print.myMatrix(mm)
# This is row 1   : 1 5 9 13 
# This is row 2   : 2 6 10 14 
# This is row 3   : 3 7 11 15 
# This is row 4   : 4 8 12 16 
```

# windows - SQL Server 进程优先级

> ID：10938428
> 
> 赞同：0
> 
> 时间：2012-06-07T19:16:51.503
> 
> 标签：windows, sql-server-2008, service

我为 SQL Server 2008 R2 开发版制作了一个 CLR 插件，它在多个线程上运行大量浮点计算。为了测试它，我使用了我的笔记本电脑（core 2 duo 6670），这些计算在 2 个线程上运行。这导致 CPU 使用率为 100%。

问题是这样的：当SQL进程占用100%的CPU时（2-3分钟），我的电脑停止响应（光标不动，时钟不更新，整个UI死了）。其他程序从未发生过这种情况，所以问题是：“SQL Server 是否以比其他服务更高的优先级运行？”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:23:28.247

取自[http://msdn.microsoft.com/en-us/library/ms188709%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms188709%28v=sql.100%29.aspx)

> 使用优先级提升选项来指定 Microsoft SQL Server 是否应该以比同一台计算机上的其他进程更高的 Microsoft Windows 2000 或 Windows 2003 调度优先级运行。如果将此选项设置为 1，则 SQL Server 在 Windows 2000 或 Windows Server 2003 调度程序中以 13 的优先级基数运行。**默认值为 0，即优先级基数为 7。**

# c# - 剥离字符串以获得安全的 CSS 类名？

> ID：10938430
> 
> 赞同：4
> 
> 时间：2012-06-07T19:17:06.280
> 
> 标签：c#, .net, regex, asp.net-mvc, c#-4.0

我有一个来自数据库的任意字符串。我想将此字符串作为 HTML 类名放在网页上。我不确定会期待什么角色。如何删除空格和特殊字符以使其成为 CSS 类名“安全”？

经过一番研究，似乎空间和这些字符需要删除：

```
!"#$%&'()*+,./:;<=>?@[\]^`{|}~ 
```

删除它们的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:28:37.713

您可能希望查看[此](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)线程以更好地理解有效的 CSS 名称。

我推荐了一个如下的实用函数，您应该根据需要测试/更改正则表达式。

```
Regex re = new Regex(@"[!""#$%&'()\*\+,\./:;<=>\?@\[\\\]^`{\|}~ ]");
string outputString = re.Replace(inputString, string.Empty); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:27:28.550

您正在尝试 System.IO.Path.GetInvalidFileNameChars 过滤掉特殊字符：

```
var tagName = "fo@3do@11~1298#bar";
    var invalidChars = System.IO.Path.GetInvalidFileNameChars();
    var cleanTagName = new string(tagName.Where(m => !invalidChars.Contains(m)).ToArray<char>()); 
```

# jquery - jQuery插件验证：重新验证为打字/鼠标焦点

> ID：10938431
> 
> 赞同：0
> 
> 时间：2012-06-07T19:17:13.813
> 
> 标签：jquery, html, forms, jquery-plugins, jquery-validate

我有一个基于 jQuery 文档的验证演示的表单：http: [//jsfiddle.net/ABbDS/1/](http://jsfiddle.net/ABbDS/1/)。单击提交或按回车会验证它。

如何使**选项卡**/**更改鼠标焦点**/**键入**也有效？（所以他们立即知道电子邮件是

它基于：http: [//jquery.bassistance.de/validate/demo/milk/](http://jquery.bassistance.de/validate/demo/milk/)（这样做）和[http://docs.jquery.com/Plugins/Validation/](http://docs.jquery.com/Plugins/Validation/)

单击下一个元素或点击选项卡时，我的没有验证。*我找到的答案没有使用`validate`插件。*

编辑：这是正确的答案吗？: [https://stackoverflow.com/a/9381803/341744](https://stackoverflow.com/a/9381803/341744) $(this).valid() 是否调用了 validate() 的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:00:12.477

[jquery 网站上](http://docs.jquery.com/Plugins/Validation/validate#toptions)关于 onfocusout 和 onkeyup的文档有点误导。它指出 onfocusout 和 onkeyup 是布尔值，这会让您相信您可以将它们的值设置为 true 或 false。错误的！您应该只将它们设置为 false。如果将它们的值设置为 true，则会出现此错误

> 未捕获的类型错误：对象 true 没有方法“调用”

这是因为默认的 onfocusout 和 onkeyup 是函数而不是布尔值。如果将值设置为 false，则不会调用该函数，但如果设置为 true，则会出现 javascript 错误。这种类型的编程对于像我这样习惯于强类型的程序员来说很难适应，但非常聪明。

没有理由将 onfocusout 设置为 true，因为默认行为是在失去焦点时进行验证，因此只需删除代码中的这两行

```
// remove these lines
// onfocusout:true,  
// onkeyup: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:46:59.400

您可以将[很多事件](http://docs.jquery.com/Plugins/Validation/validate#options)添加到可能对您有所帮助的验证器选项中。

例子：

**onkeyup**：

> 验证 keyup 上的元素。只要该字段未被标记为无效，就不会发生任何事情。否则，将检查每个按键事件的所有规则。

```
$(".selector").validate({
   onkeyup: true
}); 
```

# python - 删除嵌套列表中某个字符之前的所有内容（Python）

> ID：10938434
> 
> 赞同：2
> 
> 时间：2012-06-07T19:17:22.160
> 
> 标签：python, list

假设我有一个列表，例如：

[["BLAHBLAH\Desktop","BLAHBLAH\Documents","BLAHBLAH\Vids"],["BLAHBLAH\Pics","BLAHBLAH\文件夹","BLAHBLAH\Music"]]

我想要一个看起来像的输出

[[“桌面”、“文档”、“视频”]、[“图片”、“文件夹”、“音乐”]]

我该怎么做呢？这是在 Python 中。我知道您必须将 rfind 与反斜杠一起使用，但我无法遍历嵌套列表以维护该嵌套列表结构

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T19:20:37.040

如果您的文件名在 中`myList`，则应该这样做，并且也与平台无关（不同的操作系统使用不同的文件夹分隔符，但 os.path 模块会为您处理）。

```
import os

[[os.path.basename(x) for x in sublist] for sublist in myList] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T19:26:50.607

```
lis=[["BLAHBLAH\Desktop","BLAHBLAH\Documents","BLAHBLAH\Vids"],["BLAHBLAH\Pics","BLAHBLAH\Folder","BLAHBLAH\Music"]]

def stripp(x):
    return x.strip('BLAHBLAH\\')

lis=[list(map(stripp,x)) for x in lis]
print(lis) 
```

**输出：**

```
[['Desktop', 'Documents', 'Vids'], ['Pics', 'Folder', 'Music']] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T19:23:28.663

您应该使用列表推导：

```
NestedList = [["BLAHBLAH\Desktop","BLAHBLAH\Documents","BLAHBLAH\Vids"],["BLAHBLAH\Pics","BLAHBLAH\Folder","BLAHBLAH\Music"]]
output = [[os.path.basename(path) for path in li] for li in NestedList] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T19:29:28.750

像这样的东西？

```
from unittest import TestCase
import re

def foo(l):
    result = []
    for i in l:
        if isinstance(i, list):
            result.append(foo(i))
        else:
            result.append(re.sub('.*\\\\', '', i))
    return result

class FooTest(TestCase):
    def test_foo(self):
        arg = ['DOC\\Desktop', 'BLAH\\FOO', ['BLAH\\MUSIC', 'BLABLA\\TEST']]
        expected = ['Desktop', 'FOO', ['MUSIC', 'TEST']]
        actual = foo(arg)
        self.assertEqual(expected, actual) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T19:34:08.060

答案的数量很棒。他们都在不同的环境中工作。我只是将其添加到列表中：

```
outer = [["BLAHBLAH\Desktop","BLAHBLAH\Documents","BLAHBLAH\Vids"],
         ["BLAHBLAH\Pics","BLAHBLAH\Folder","BLAHBLAH\Music"]]

purged = [ [ item[ item.find("\\")+1: ]
             for item in inner ]
           for inner in outer ] 
```

感谢（和+1）

*   @Junuxx 第一个使用文件名解决方案，
*   @Ashwini Chaudary 如果这些不是文件名，他得到了更通用的解决方案，并且
*   致@mfusennegger，我认为他是在开玩笑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T19:26:43.823

我无法使用 python atm 访问计算机，但以下应该可以工作：

```
List=[["BLAHBLAH\Desktop","BLAHBLAH\Documents","BLAHBLAH\Vids"],["BLAHBLAH\Pics","BLAHBLAH\Folder","BLAHBLAH\Music"]]
final=[]
for varv in List:
    x=varv
    for sub_val in x:
        final.append(sub_val[sub_val.find("/"):]) 
```

# r - 根据另一个数据帧中的信息从一个数据帧中提取系数

> ID：10938435
> 
> 赞同：3
> 
> 时间：2012-06-07T19:17:22.770
> 
> 标签：r

现在我在 R 中有两个数据框，包含一些看起来像这样的数据：

```
> data
  p a         i
1 1 1 2.2561469
2 5 2 0.2316390
3 2 3 0.4867456
4 3 1 0.1511705
5 4 2 0.8838884 
```

其中一个包含如下所示的系数：

```
> coef
         3        2        1
1 29420.50 31029.75 29941.96
2 26915.00 27881.00 27050.00
3 27756.00 28904.00 28699.40
4 28345.33 29802.33 28377.56
5 28217.00 29409.00 28738.67 
```

这些数据框连接在一起，因为 data$a 中的每个值对应于 coef 中的列名，而 data$p 对应于 coef 中的行名。

我需要应用这些系数将这些系数乘以 data$i 中的值，方法是将 coef 中的行名和列名与 data$a 和 data$p 匹配。

换句话说，对于数据中的每一行，我需要为每一行使用 data$a 和 data$p 从 coef 中提取一个特定数字，该数字将乘以该行的 data$i 的值以创建一个新向量在看起来像这样的数据中：

```
> data
  p a         i          z
1 1 1 2.2561469      67553
2 5 2 0.2316390       6812
3 2 3 0.4867456         .
4 3 1 0.1511705         .
5 4 2 0.8838884         . 
```

我在想我应该根据行名和列名在我的 coef 数据框中创建因子，但不确定从那里去哪里。

提前致谢，

伊恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:32:38.843

如果您订购`coef`data.frame，您可以只索引它们，就好像列名不存在一样。

```
coef <- coef[,order(names(coef))] 
```

然后`apply`对每一行执行一个函数：

```
myfun <- function(x) {
  x[3]*coef[x[1], x[2]]
}

data$z <- apply(data, 1, myfun)

> data
  p a         i         z
1 1 1 2.2561469 67553.460
2 5 2 0.2316390  6812.271
3 2 3 0.4867456 13100.758
4 3 1 0.1511705  4338.503
5 4 2 0.8838884 26341.934
> 
```

# c++ - 使用指针时的核心转储

> ID：10938436
> 
> 赞同：0
> 
> 时间：2012-06-07T19:17:26.713
> 
> 标签：c++, pointers, struct

我正在使用 C++ 中的结构编写一个简单的代码，但是在使用 g++ 编译时，我收到了核心转储错误。如果我在下面的 player.name 中使用 cin 输入“Mario”，则不会报错。谁能解释一下出了什么问题？

```
struct character
{
    char *name;
};

int main()
{
    character player;
    player.name = new char[10];
    player.name = "Mario";
    cout<<player.name<<endl;
    delete player.name;
    return 0;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T19:19:15.090

`char*`用and替换`std::string`和删除行，您将不再有问题。`new``delete`

这段代码失败的原因主要是，当您分配给指针时，它不会将内容复制到指向的事物中——它只是更改了指针指向的事物。

一般来说，*总是*使用类来拥有资源——在这种情况下，是一个字符串。令人高兴的是，标准为您提供了这样的课程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T19:21:39.690

如果您坚持使用 new 等代替字符串，请更改

```
player.name = "Mario"; 
```

至

```
strcpy(player.name, "Mario"); 
```

也改变

```
delete player.name; 
```

至

```
delete[] player.name; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T19:20:12.360

```
player.name = new char[10];
player.name = "Mario"; 
```

你只是覆盖了指针，它泄露了 10 个字符的缓冲区。你可能是说

```
player.name = new char[10];
strcpy(player.name, "Mario"); 
```

但是使用`std::string`是一个更好的解决方法，请参阅[DeadMG 的答案](https://stackoverflow.com/a/10938459/103167)。

[正如 Ed 指出的那样](https://stackoverflow.com/a/10938501/103167)，您还错误地删除了缓冲区，您需要`delete []`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-07T19:22:58.447

看看这两行

```
player.name = new char[10];
player.name = "Mario"; 
```

您将一个数组分配给 player.name，然后立即将指针重置为静态缓冲区。当您调用 delete 时，您正在尝试删除一个静态字符数组，这将是一个段错误。

您需要将数据复制到新分配的内存中，而不是重置指针：

```
player.name = new char[10];
strcpy(player.name,"Mario");
delete[] player.name; 
```

（请注意，释放指向对象数组的指针，您应该使用`delete[]`而不仅仅是`delete`。在这个简单的示例中，没有区别，但是如果数组是带有析构函数的对象，则仅使用析构函数就不会被调用`delete`.

# java - eclipse rcp中带有tableviewer的表格中的复选框

> ID：10938438
> 
> 赞同：0
> 
> 时间：2012-06-07T19:17:35.063
> 
> 标签：java, eclipse, swt, jface, rcp

我想在列中添加一个复选框。我正在使用 tableViewer。用户不应该能够编辑复选框。

到目前为止，谷歌没有帮助，所以我来到了这里。

我的 labelprovider 看起来像这样：

```
 this.tableViewer2 = new TableViewer(table1);
    this.tableViewer2.setContentProvider(new ArrayContentProvider());
    this.tableViewer2.setLabelProvider(new ITableLabelProvider() {

        @Override
        public String getColumnText(Object element, int columnIndex) {

            Platz p = (Platz) element;
            switch (columnIndex) {

            case 0:
                return p.getReihe().getReihenfolge().toString();
            case 1:
                return p.getNummer().toString();
            case 2:
                return p.getKategorie().getPreisstd().toString();

            }
            return null;
        }

    }); 
```

我想添加带有复选框的第四列，但我不知道如何。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:20:33.940

ITableLableProvider 有一个方法 getColumnImage()。

只需覆盖它并返回复选框的图像。

```
 this.tableViewer2 = new TableViewer(table1);
   this.tableViewer2.setContentProvider(new ArrayContentProvider());
   this.tableViewer2.setLabelProvider(new ITableLabelProvider() {

    @Override
    public Image getColumnImage(Object element, int columnIndex) {
         //do magic here and return an image :)
    }

    @Override
    public String getColumnText(Object element, int columnIndex) {

        Platz p = (Platz) element;
        switch (columnIndex) {

        case 0:
            return p.getReihe().getReihenfolge().toString();
        case 1:
            return p.getNummer().toString();
        case 2:
            return p.getKategorie().getPreisstd().toString();

        }
        return null;
    }

}); 
```

# html - 如何在 webkit 浏览器中将 select-element 上的 size-Attribute 设置为 2 或 3？

> ID：10938442
> 
> 赞同：2
> 
> 时间：2012-06-07T19:18:01.490
> 
> 标签：html, webkit

这不起作用：

```
<select size="2">
    <option>Mars</option>
    <option>Earth</option>
    <option>Jupiter</option>
</select> 
```

[http://jsfiddle.net/uteb6/](http://jsfiddle.net/uteb6/)

无法将 select 的 size-attribute 设置为 2 或 3。任何其他值都可以正常工作。有解决办法吗？为什么这不可能？

Jquerys`$('select').attr('size', '2');`也不会工作。

用 Safari 5.1.7 测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:31:07.313

风格怎么样？

```
<select size="2" style="height:40px"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:33:04.960

似乎这种行为不一定是规范的一部分，至少在站点点：

> 如果大小设置为“1”或完全省略，则选择将呈现为下拉列表。如果该值大于“1”，则选择呈现为选项列表。如果 size 属性的值小于选择列表中包含的选项元素个数，浏览器会显示一个滚动条控件，表示下面还有更多选项可以查看或操作

[http://reference.sitepoint.com/html/select/size](http://reference.sitepoint.com/html/select/size)

您可以根据`height`需要使用 css 进行调整。

[http://jsfiddle.net/uteb6/10/](http://jsfiddle.net/uteb6/10/)

# ajax - Web 方法的 JSON 输出

> ID：10938445
> 
> 赞同：2
> 
> 时间：2012-06-07T19:18:05.463
> 
> 标签：ajax, razor, fullcalendar

我有一个 Web 方法将 JSON 作为事件数据返回到 fullCalendar，但添加了一个“()”，导致解析器错误。

我可以剪掉不需要的“()”，然后用 jQuery 附加事件，但显然不想保持这种方式。

数据来源是使用 Razor 的 Web 方法。使用 JSON 助手对数据进行编码会产生格式良好的 JSON 字符串，即没有“()”。当然，如果我使用编码，我会使用 Response.Write 将数据发送回 AJAX 函数。如果我使用 JSON.Write(data, Response.Output)，则会收到相同的格式错误的 JSON 数据。

在成功函数中捕获返回的数据会显示带有附加“（）”的数据。

这是返回数据的 Web 方法的一部分：

```
 // convert the header names and data to strings 
    var rows = from e in cE
               select new
               {
                   id = e.EvId,
                   title = e.Title,
                   start = e.startT,
                   allDay = false,
                   end = e.endT,
                   backgroundColor = e.eventColor
               };

    string mJson = Json.Encode(rows);
    //Json.Write(rows, Response.Output);
    Response.Write(mJson.Trim()); 
```

这是编码的结果：

```
 "[{\"id\":9,\"title\":\"new event\",\"start\":\"2012-05-29 19:00:00\",\"allDay\":false,\"end\":\"2012-05-29 20:00:00\",\"backgroundColor\":\"Orange    \"},{\"id\":9,\"title\":\"new event\",\"start\":\"2012-06-05 19:00:00\",\"allDay\":false,\"end\":\"2012-06-05 20:00:00\",\"backgroundColor\":\"Orange    \"},{\"id\":9,\"title\":\"new event\",\"start\":\"2012-06-12 19:00:00\",\"allDay\":false,\"end\":\"2012-06-12 20:00:00\",\"backgroundColor\":\"Orange    \"},{\"id\":10,\"title\":\"another\",\"start\":\"2012-06-22 19:00:00\",\"allDay\":false,\"end\":\"2012-06-22 19:45:00\",\"backgroundColor\":\"Orange    \"},{\"id\":10,\"title\":\"another\",\"start\":\"2012-06-29 19:00:00\",\"allDay\":false,\"end\":\"2012-06-29 19:45:00\",\"backgroundColor\":\"Orange    \"}]"  string 
```

以下是 AJAX 成功函数显示为接收数据的内容：

```
 "[{"id":9,"title":"new event","start":"2012-05-29 19:00:00","allDay":false,"end":"2012-05-29 20:00:00","backgroundColor":"Orange    "},{"id":9,"title":"new event","start":"2012-06-05 19:00:00","allDay":false,"end":"2012-06-05 20:00:00","backgroundColor":"Orange    "},{"id":9,"title":"new event","start":"2012-06-12 19:00:00","allDay":false,"end":"2012-06-12 20:00:00","backgroundColor":"Orange    "},{"id":10,"title":"another","start":"2012-06-22 19:00:00","allDay":false,"end":"2012-06-22 19:45:00","backgroundColor":"Orange    "},{"id":10,"title":"another","start":"2012-06-29 19:00:00","allDay":false,"end":"2012-06-29 19:45:00","backgroundColor":"Orange    "}]();???" 
```

# c# - 使用 LINQ 交换元素

> ID：10938448
> 
> 赞同：2
> 
> 时间：2012-06-07T19:18:27.307
> 
> 标签：c#, xml, linq

我有以下格式的 xml 文档：

```
<body>
    <par id = "1">
      <prop type="Content">One</prop>
      <child xml:id="1">
        <span>This is span 1</span>
      </child>
      <child xml:id="2">
        <span>This is span 2</span>
      </child>
    </par>
</body> 
```

我对使用 LINQ 不是很熟悉，我想用它来交换上述代码的元素。（即，我想搬家

```
<span>This is span 2</span> 
```

进入

```
<child xml:id="1"></child> 
```

元素树，反之亦然）

我正在浏览[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)上的示例，但我真的很想朝着正确的方向进一步推进（老实说，我很难弄清楚从哪儿开始！）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:05:26.017

您可以使用 Linq to sml 查询选择特定元素

```
 var  retmodule = (from c in xdoc.Elements("body").Elements("par").Elements("child").
                             where c.Attribute("xml:id").Value == 2
                             select new 
                             {
                              c.Element("span").Value
                             }).SingleOrDefault(); 
```

然后使用 xpath 和 xml 库的组合插入它

```
XElement parentXElement = xmldoc.XPathSelectElement("products");
XElement refXElement = xdoc.XPathSelectElement("body/par/child [@xml:id = '2']");
XElement newXElement = new XElement("span", retmodule.ToString());
refXElement.AddAfterSelf(newXElement);
xdoc.Save(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:16:34.157

我相信这会做你想要的：

```
using System;
using System.Xml;
using System.Xml.Linq;
using System.Xml.XPath;

namespace Example
{
    class Program
    {
        static void Main(string[] args)
        {
            string xml = @"
<body>
    <par id = ""1"">
      <prop type=""Content"">One</prop>
      <child xml:id=""1"">
        <span>This is span 1</span>
      </child>
      <child xml:id=""2"">
        <span>This is span 2</span>
      </child>
    </par>
</body>";
            XDocument doc = XDocument.Parse(xml);
            XmlNamespaceManager namespaceManager = new XmlNamespaceManager(doc.CreateNavigator().NameTable);
            namespaceManager.AddNamespace("xml", "http://www.w3.org/XML/1998/namespace");
            XElement span1 = doc.Root.XPathSelectElement(@"/body/par/child[@xml:id = ""1""]/span[1]", namespaceManager);
            XElement span2 = doc.Root.XPathSelectElement(@"/body/par/child[@xml:id = ""2""]/span[1]", namespaceManager);

            span1.ReplaceWith(span2);
            span2.ReplaceWith(span1);

            Console.WriteLine(doc);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:33:36.240

您*可以*使用 LINQ，但它实际上是用于查询，而不是修改。从技术上讲，您可以编写一个查询来为您提供所需的结果，但这会相当难看。

我建议将字符串加载到 XMLDocument 中并使用 XPath 交换节点：

```
 private static string swap(string xml)
    {
        XmlDocument xDoc = new XmlDocument();
        xDoc.LoadXml(xml);

        XmlNamespaceManager namespaceManager = new XmlNamespaceManager(xDoc.NameTable);
        namespaceManager.AddNamespace("xml", "http://www.w3.org/XML/1998/namespace");  

        var node1 = xDoc.SelectSingleNode(@"//child[@xml:id=""1""]",namespaceManager);
        var node2 = xDoc.SelectSingleNode(@"//child[@xml:id=""2""]",namespaceManager);

        var temp = node1.InnerXml;
        node1.InnerXml = node2.InnerXml;
        node2.InnerXml = temp;

        return xDoc.OuterXml;
    } 
```

请注意，您需要使用 XmlNamespaceManager 来考虑文档中的“xml”命名空间（我假设它是在其他地方定义的）。

# facebook-graph-api - 将照片从一个相册移动到另一个相册

> ID：10938449
> 
> 赞同：0
> 
> 时间：2012-06-07T19:18:28.617
> 
> 标签：facebook-graph-api, photo

我检查了 api，但我可能错过了它，如果它存在......我找不到写入/修改 api 调用来更改将照片从一个用户相册移动到另一个用户相册（例如可以通过 FB 的网络界面完成通过编辑相册并使用每个图像的下拉菜单一张一张地移动它们。

本质上，我只想为图像修改封闭的专辑 ID。我不想从一个相册下载并上传到另一个相册，因为我希望所有标签和评论保持不变（以及照片的 ID）......

我的目标是创建一个简单的应用程序，能够将所有（或选择）照片从一个相册移动到另一个相册，即。“合并相册”，因为 FB 的网络界面没有该功能。我在 2009 年创建了大量相册，当时每个相册的限制为 60 张照片，所以现在限制为 200 张，我想将我的相册数量减少 67% 以上......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:49:10.097

没有删除照片的 API，因此您可以通过 API 执行的所有操作都是复制，然后您必须使用 Facebook 的 Web 界面手动删除无关的相册

# javascript - 带单个小数的正则表达式数字

> ID：10938451
> 
> 赞同：0
> 
> 时间：2012-06-07T19:18:39.507
> 
> 标签：javascript, jquery, regex

我用正则表达式编写了以下 js。它按预期工作，但我希望简化它。有人可以帮帮我吗？

**.12345** - 成功

**0.12345** - 成功

**12345.12345** - 成功

**0.123456**失败 - 我希望这是动态的，不限于 5

**1.123.45**失败

**1..**失败

**..**失败

**abc** - 失败

```
function clearNonNumericChars(field) {        
    field.val(field.val().replace(/([^0-9\.])/g,""));
    field.val(field.val().replace(/^(\d*\.[0-9]{5})\d+$/g,"$1"));
    field.val(field.val().replace(/(\.\d*)(\.)$/g,"$1"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:22:48.197

如果您不想要正则表达式，如果您在 keyup 上执行此操作，则不需要正则表达式。只需在事件处理程序中按 keycode/which 过滤即可。您已将问题标记为 jQuery，因此：

```
$('input').on('keyup', function (e) {
    if ($.inArray(e.which, [48,49,50,51,52,53,54,55,56,57,190]) === -1) {
        return true;
    }

    return false;
}); 
```

注意我还没有真正测试过这个，但这基本上可以让用户除了数字或小数之外不能输入任何东西。请注意，他们仍然可以粘贴坏字符。我将把解决方案留给读者......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:26:41.917

不要将数字作为字符串处理。

```
isNumberValid = function(n) {
    return (n == Math.round(n*10000)/10000)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:03:36.810

这是你想要的？>>

```
var str = "1a2..b3.C4;56";
str = str.replace(/[^0-9\.]/g,"").replace(/\./,",").replace(/\./g,"").replace(/,/,"."); 
print(str); 
```

[在http://ideone.com/F7wWV](http://ideone.com/F7wWV)进行现场测试

# java - OpenGL 和 LWJGL 的问题：令牌“glMatrixMode”上的语法错误

> ID：10938457
> 
> 赞同：0
> 
> 时间：2012-06-07T19:19:03.310
> 
> 标签：java, opengl, lwjgl, pong

我想用 lwjgl 制作一个“乒乓”游戏。目前，我做了 2 个类：GameLoop 和 Inizializza。我有下面标记的那 4 行代码，它们给了我编译错误。我从 LJWGL wiki 复制了那部分。

游戏循环-

```
package game.engine;

public class GameLoop 
{
    //Main
    public static void main(String[] argv)
    {
        Inizializza finestraGioco = new Inizializza();
        finestraGioco.start();
    }
} 
```

初始化-

```
package game.engine;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;

public class Inizializza 
{ 
    ##This is where the code gives me errors##

    GL11.glMatrixMode(GL11.GL_PROJECTION);      >>Syntax error on token "glMatrixMode", identifier expected after this token 

    GL11.glLoadIdentity();                      >>Syntax error on token "glLoadIdentity", Identifier expected after this toketn

    GL11.glOrtho(0, width, height, 0, 1, -1);   >>Syntax error on token "(",= expected
                                                >>Syntax error(s) on tokens, misplaced construct(s)                       

    GL11.glMatrixMode(GL11.GL_MODELVIEW);       >>Syntax error on token "glMatrixMode", identifier expected after this token 
                                                >>Syntax error on tokent ".", ... expected

    public void start() 
    {
        try 
        {
            Display.setDisplayMode(new DisplayMode(800,600));
            Display.create();
        } catch (LWJGLException e) 
        {
            e.printStackTrace();
        }

        while(!Display.isCloseRequested())
        {
            Entità.pulisci();
            Entità.colora();
            Entità.disegna();
            Display.update();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:56:32.187

是的，您刚刚在课程主体中删除了这些行；它们应该在一个方法中（在你的 start 方法中的某个地方？）。

:)

# ruby-on-rails - 用于 Stack Overflow 克隆的 Node.js？

> ID：10938461
> 
> 赞同：-3
> 
> 时间：2012-06-07T19:19:16.763
> 
> 标签：ruby-on-rails, django, node.js

Node.js（使用非阻塞 I/O）是否适合构建像 Stack Overflow 这样的数据库驱动应用程序？我的理解是，当请求不需要太多时间并且数据库查询可能是 nb I/O一项耗时的操作。我的理解是正确的还是我遗漏了什么？

我想一个更好的问题是 - 构建一个数据库驱动的应用程序（如 Stack Overflow）是一个更好的选择，比如 node.js 或类似 RoR/Django/Play 的东西？我问每个人的优点和缺点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:22:25.780

**是**的，只要您选择的数据库引擎有一个好的异步 I/O node.js 库，Node.js 就适用于数据库驱动的应用程序。

# css - 锥形/淡化 CSS 框阴影？

> ID：10938462
> 
> 赞同：7
> 
> 时间：2012-06-07T19:19:17.633
> 
> 标签：css

我有一个我正在尝试构建的 CSS 下拉菜单，下拉菜单的背景有一个褪色/锥形框阴影：

![在此处输入图像描述](../Images/b73268a31322549d442feeb5d074edc1.png)

我无法解决如何让盒子阴影真正变细/淡出。

这就是我现在所在的位置：http: [//jsfiddle.net/Shpigford/f9aKR/](http://jsfiddle.net/Shpigford/f9aKR/)

我尝试过使用`:before`和`:after`伪选择器等，但不能完全正确。

*为了澄清起见，我特别需要下拉阴影的帮助。我的 jsFiddle 是一个精简版本，以使示例尽可能简单。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T14:12:27.930

1.  我添加了一个 before 元素。
2.  给它一个渐变背景（从透明到半透明黑色）以实现从上到下的淡入淡出。
3.  给它一个插入框阴影来实现 in -> outfade。

看看-> [http://jsfiddle.net/f9aKR/22/](http://jsfiddle.net/f9aKR/22/)

根据需要编辑淡入淡出/颜色的数量。

# android - 壁纸因错误而崩溃 - queueBuffer：SurfaceTexture 的错误队列缓冲区

> ID：10938469
> 
> 赞同：12
> 
> 时间：2012-06-07T19:19:39.537
> 
> 标签：android, canvas, live-wallpaper, surfaceholder

* * *

## 动态壁纸崩溃，代码如下

```
public void render(){

    Canvas canvas = null;
    try{

        canvas = this._surfaceHolder.lockCanvas(null);
        synchronized (this._surfaceHolder) {
            this.onDraw(canvas);
        }

    }catch(Exception e){ Log.w("Surface holder ", e.toString());}

    finally{
        if(canvas != null){
            this._surfaceHolder.unlockCanvasAndPost(canvas);
        }
    }   
}

protected void onDraw(Canvas canvas) {
    this.renderBackGround(canvas);
    for (Renderable renderable : this._fishes) {
        renderable.render(canvas);
    }
}; 
```

* * *

## 崩溃并出现以下错误

06-07 19:49:09.143：E/SurfaceTextureClient（13629）：queueBuffer：错误队列缓冲区到 SurfaceTexture，-19

06-07 19:49:09.143: E/SurfaceTextureClient(13629): queueBuffer (handle=0x1c1b30) 失败（没有这样的设备） 06-07 19:49:09.143: W/dalvikvm(13629): threadid=11: 线程退出未捕获的异常（组=0x40c671f8）06-07 19:49:09.143：E/AndroidRuntime（13629）：致命异常：线程 692

06-07 19:49:09.143: E/AndroidRuntime(13629): java.lang.IllegalArgumentException

06-07 19:49:09.143：E/AndroidRuntime（13629）：在 android.view.Surface.unlockCanvasAndPost（本机方法）

06-07 19:49:09.143: E/AndroidRuntime(13629): 在 com.android.internal.view.BaseSurfaceHolder.unlockCanvasAndPost(BaseSurfaceHolder.java:215)

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T08:22:41.203

这通常发生在您在动态壁纸选择器中旋转设备时。我发现的唯一解决方案是捕获 IllegalArgumentException 并忽略它。

```
if (canvas != null) {
    try {
        holder.unlockCanvasAndPost(canvas);
    } catch (IllegalArgumentException e) {
        // Ignore weird bug when rotating in live wallpaper picker
    }
} 
```

# javascript - jquery遍历元素并将事件绑定到每个元素

> ID：10938471
> 
> 赞同：1
> 
> 时间：2012-06-07T19:19:42.130
> 
> 标签：javascript, jquery, dhtml

我需要将按键事件绑定到动态构建的元素形式，见下文

```
<div class="Customer">
<select name="dropdown1" id="dropdown1">
</select>
<input type="textbox" name="firstname1" id="firstname1">
<input type="textbox" name="lastname1" id="lastname1">
</div>

<div class="Customer">
<select name="dropdown2" id="dropdown2">
</select>
<input type="textbox" name="firstname2" id="firstname2">
<input type="textbox" name="lastname2" id="lastname2">
</div>

... and repeat.. 
```

我需要检查，只要上述任何元素发生更改，其他元素都不会为空。

表单中还有其他几个元素，尽管我只关心代码段中突出显示的这些元素。

非常感谢，

我试过下面的代码

```
$('.Customer').each(function (index) {

    alert("test");  // alerts the correct number of customer rows

    $("input:textbox").click(function() {
        alert("");
    })

}); 
```

解决方案应该适用于 jQuery 1.3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:35:40.307

看到它在[这里工作](http://jsfiddle.net/M4vqZ/8/)

```
<input type="checkbox" id="test" name="test" disabled="disabled">

<div class="Customer">
<select name="dropdown1" id="dropdown1">
    <option value="1.1">1.1</option>
    <option value="1.2">1.2</option>
</select>
<input type="text" name="firstname1" id="firstname1">
<input type="text" name="lastname1" id="lastname1">
</div>

<div class="Customer">
<select name="dropdown2" id="dropdown2">
    <option value="2.1">2.1</option>
    <option value="2.2">2.2</option>
</select>
<input type="text" name="firstname2" id="firstname2">
<input type="text" name="lastname2" id="lastname2">
</div>​

$('.Customer input, .Customer select').bind("change keyup", function(){
     var me = $(this);
     var clicked = me.attr("name");
     var empty = false;
     $('.Customer input,select').each(function(){
         var elem = $(this);
             if (elem.val() == "") {
                 empty = true;
             }
     });
     if (empty) {
        $('#test').attr('disabled','disabled')
     } else {
        $('#test').removeAttr('disabled')
     }
});​ 
```

PS：输入中没有类型文本。是文字。为了在某​​些更改时触发回调，您使用“更改”而不是“点击”事件。如果您希望它同时在输入和下拉菜单上工作，则需要“输入，选择”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:36:00.650

如果您想在每个文本输入上附加事件处理程序，您应该这样做

HTML（类型是“文本”而不​​是“文本框”）

```
<div class="Customer">
<select name="dropdown1" id="dropdown1">
</select>
<input type="text" name="firstname1" id="firstname1">
<input type="text" name="lastname1" id="lastname1">
</div>

<div class="Customer">
<select name="dropdown2" id="dropdown2">
</select>
<input type="text" name="firstname2" id="firstname2">
<input type="text" name="lastname2" id="lastname2">
</div> 
```

js

```
$('.Customer').each(function (index) {
        $("input:text", this).click(function() {
        alert("");
    })

});​ 
```

​http://jsfiddle.net/pSFj3/

编辑 - 我想指出您使用了错误的语法，但正如许多人指出的那样，有更好的方法来处理事件。例如，您可以使用事件委托

```
$('.Customer').on( 'click', 'input:text', function() {
   alert('clicked on input');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T19:36:39.493

如果您想将单击事件附加到“客户”类元素中的每个文本框，这不应该工作：

```
$(".Customer input[type=text]").click(function() { }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:38:23.583

如果表单是在客户端上动态构建的，您将需要使用该[`$.on()`](http://api.jquery.com/on/)函数。

```
$(document).on('keypress', '.Customer input[type="text"]', function() { ... }); 
```

# photoshop - 从 psd 中提取分组图层

> ID：10938472
> 
> 赞同：-2
> 
> 时间：2012-06-07T19:19:50.923
> 
> 标签：photoshop, layer, psd

我是一名开发人员，正在开发一个应用程序，我收到了一个 PSD 文件的设计。但我完全是一个设计初学者。我已经在我的计算机中安装了 Photoshop，但不知道如何从中保存图层。

PSD中有我想要的按钮，除了我需要的那层之外，我已经隐藏了所有其他层。现在我想保存它，但我无法做到。我在谷歌上搜索过，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:21:58.550

1.  选择要导出的图层
2.  全选（control/command + shift + a）然后复制合并（control/command + shift + c）
3.  创建一个新文件（控制/命令+ n）（编辑：）确保预设设置为`Clipboard`，然后按回车键。它将自动成为剪贴板的正确大小
4.  粘贴 (control/command +v) 然后 Save for Web... (control/command + alt + shift +s) 然后按照对话框进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:19:13.137

1.  首先选择要保存的图层。
2.  右键单击它（它们）并选择“复制图层”
3.  在您得到的对话框中，在“文档”下拉列表中选择“新建”。
4.  现在，选定的图层应该在新文档中
5.  在菜单栏中选择图像 > 修剪。
6.  选择“透明像素”单选按钮，然后检查左上角右下角。并按 OK。
7.  现在您可以按 Ctrl + Alt + Shift + S（或 File > save for web and devices）将其保存为您想要的格式。

# c++ - valgrind“杀死”消息

> ID：10938476
> 
> 赞同：6
> 
> 时间：2012-06-07T19:19:55.797
> 
> 标签：c++, memory-management, valgrind

我正在运行一个因中止陷阱而失败的程序（错误代码 12）。为了调试错误，我正在运行 valgrind，但每次我运行它时，valgrind 本身都会崩溃，并显示“Killed”消息而没有其他内容（未显示结束消息堆摘要等）。我在 google 或 SO 上找不到任何关于此的信息，我希望有人能阐明导致此错误的原因以及如何调试它。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T21:30:42.047

我认为您的进程可能会被内核的内存不足系统杀死 - 当系统内存不足时，会以无法被捕获的方式硬杀死一个进程，这就是为什么 valgrind 没有说什么就退出的原因。

大概您的程序使用了大量内存，并且当在需要额外内存来跟踪内存定义的 valgrind 下运行时，没有足够的可用内存并且（无疑非常大）valgrind 进程被杀死。

如果我是对的，那么您将需要一台具有更多内存或至少具有更多交换空间的机器，以便能够在 valgrind 下运行您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T20:29:09.690

如果您的机器使用非标准内存分配，例如使用具有在处理器的内存空间中访问的自己的物理内存的协处理器（GPU、FPGA），也会发生这种情况。

在我们的案例中，供应商必须修复他们的框架以使用 valgrind。

# bash - 为什么我不能指定环境变量并在同一命令行中回显它？

> ID：10938483
> 
> 赞同：104
> 
> 时间：2012-06-07T19:20:26.227
> 
> 标签：bash, environment-variables, echo

考虑这个片段：

```
$ SOMEVAR=AAA
$ echo zzz $SOMEVAR zzz
zzz AAA zzz 
```

在这里，我在第一行设置`$SOMEVAR`为`AAA`- 当我在第二行回显它时，我得到了`AAA`预期的内容。

但是，如果我尝试在与以下相同的命令行上指定变量`echo`：

```
$ SOMEVAR=BBB echo zzz $SOMEVAR zzz
zzz AAA zzz 
```

...我没有得到`BBB`预期的结果-我得到了旧值（`AAA`）。

事情应该是这样的吗？如果是这样，那你怎么能指定变量`LD_PRELOAD=/... program args ...`并让它工作呢？我错过了什么？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-06-07T19:24:36.403

你看到的是预期的行为。问题是父 shell`$SOMEVAR`在使用修改后的环境调用命令之前在命令行上进行评估。您需要`$SOMEVAR`在设置环境之前获得延迟的评估。

您的直接选择包括：

1.  `SOMEVAR=BBB eval echo zzz '$SOMEVAR' zzz`.
2.  `SOMEVAR=BBB sh -c 'echo zzz $SOMEVAR zzz'`.

这两个都使用单引号来防止父 shell 评估`$SOMEVAR`; 仅在环境中设置后才对其进行评估（暂时，在单个命令的持续时间内）。

另一种选择是使用子外壳符号（[Marcus Kuhn](https://stackoverflow.com/users/1990689/markus-kuhn)在他的[回答](https://stackoverflow.com/a/14400951/15168)中也建议）：

```
(SOMEVAR=BBB; echo zzz $SOMEVAR zzz) 
```

该变量仅在子shell中设置

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-06-07T20:21:20.490

### 问题，重新审视

坦率地说，手册在这一点上令人困惑。[GNU Bash 手册](http://www.gnu.org/software/bash/manual/bashref.html#Environment)说：

> 任何简单命令或函数的环境 [注意，这不包括内置函数] 可以通过在其前面加上参数分配来临时扩充，如 Shell 参数中所述。这些赋值语句只影响该命令看到的环境。

如果你真的解析这句话，它的意思是修改了命令/函数的*环境*，而不是修改了父进程的环境。因此，这将起作用：

```
$ TESTVAR=bbb env | fgrep TESTVAR
TESTVAR=bbb 
```

因为 env 命令的环境在执行之前已经被修改过。但是，这不起作用：

```
$ set -x; TESTVAR=bbb echo aaa $TESTVAR ccc
+ TESTVAR=bbb
+ echo aaa ccc
aaa ccc 
```

因为当shell执行参数扩展时。

### 解释器步骤

问题的另一部分是 Bash为其解释器[定义了这些步骤：](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Operation)

1.  从文件（参见 Shell 脚本）、作为参数提供给 -c 调用选项（参见 Invoking Bash）的字符串或用户终端读取其输入。
2.  将输入分解为单词和运算符，遵守引用中描述的引用规则。这些标记由元字符分隔。通过此步骤执行别名扩展（请参阅别名）。
3.  将标记解析为简单和复合命令（请参阅 Shell 命令）。
4.  执行各种 shell 扩展（请参阅 Shell 扩展），将扩展的标记分解为文件名列表（请参阅文件名扩展）以及命令和参数。
5.  执行任何必要的重定向（请参阅重定向）并从参数列表中删除重定向运算符及其操作数。
6.  执行命令（请参阅执行命令）。
7.  可选择等待命令完成并收集其退出状态（请参阅退出状态）。

这里发生的是内置函数没有自己的执行环境，所以他们永远看不到修改后的环境。此外，简单的命令（例如 /bin/echo）*确实*会获得修改后的环境（这就是 env 示例起作用的原因），但是在步骤 #4中，shell 扩展正在*当前环境中进行。*

换句话说，您没有将 'aaa $TESTVAR ccc' 传递给 /bin/echo；您正在将内插字符串（在当前环境中扩展）传递给 /bin/echo。在这种情况下，由于当前环境没有*TESTVAR*，您只需将 'aaa ccc' 传递给命令。

### 概括

文档可能会更清晰。好东西有堆栈溢出！

### 也可以看看

[http://www.gnu.org/software/bash/manual/bashref.html#Command-Execution-Environment](http://www.gnu.org/software/bash/manual/bashref.html#Command-Execution-Environment)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-01-18T14:25:01.817

要实现您想要的，请使用

```
( SOMEVAR=BBB; echo zzz $SOMEVAR zzz ) 
```

原因：

*   您必须用分号或换行将分配与下一个命令分开，否则在下一个命令（echo）发生*参数扩展之前不会执行它。*

*   您需要在*子外壳*环境中进行分配，以确保它不会持续超出当前行。

该解决方案比其他一些建议的解决方案更短、更整洁、更高效，特别是它不会创建新流程。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-07T19:31:05.430

原因是这为一行设置了一个环境变量。但是，`echo`不做扩展，`bash`做。因此，您的变量实际上是在命令执行之前展开的，即使它`SOME_VAR`是`BBB`在 echo 命令的上下文中。

要查看效果，您可以执行以下操作：

```
$ SOME_VAR=BBB bash -c 'echo $SOME_VAR'
BBB 
```

这里变量在子进程执行之前不会展开，因此您会看到更新后的值。如果您`SOME_VARIABLE`再次检查父 shell，它仍然是`AAA`，如预期的那样。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-06-22T15:52:18.033

让我们看一下[POSIX 规范](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html)，以了解**为什么**它的行为如此，不仅在 bash 中，而且在任何兼容的 shell 中：

* * *

## 2.10.2、Shell 语法规则

从规则 7(b) 开始，涵盖了赋值在简单命令之前的情况：

> 如果 '=' 之前的所有字符构成一个有效名称（参见 IEEE Std 1003.1-2001 的基本定义卷，第 3.230 节，名称），则应返回令牌 ASSIGNMENT_WORD。（带引号的字符不能参与形成有效名称。）
> 
> [...]
> 
> 名称的分配应按照简单命令中的规定进行。

因此，对于 POSIX 兼容的 shell，需要解析这个赋值。

* * *

## 2.9.1、简单命令

> 3.  重定向应按照重定向中的描述执行。
>     
>     
> 4.  在分配值之前，每个变量分配都应针对波浪号扩展、参数扩展、命令替换、算术扩展和引号删除进行扩展。
>     
>     
> 
> [...]
> 
> 如果没有产生命令名，变量赋值将影响当前的执行环境。否则，**为命令的执行环境导出变量赋值，并且不影响当前执行环境（特殊内置除外）。**如果任何变量赋值尝试为只读变量赋值，则会发生变量赋值错误。有关这些错误的后果，请参阅 Shell 错误的后果。

因此： 必须导出在部分前缀中给简单命令的赋值，并且不得影响“当前 shell 环境”，除非被调用的命令是特殊的内置命令。此外，这些步骤应遵循重定向，这本质上必须在命令调用过程的后期发生。

* * *

## 2.12、Shell执行环境

> 应在包含以下内容的单独环境中调用除特殊内置程序（参见特殊内置实用程序）以外的实用程序。这些对象的初始值应与父外壳的初始值相同，但以下说明除外。
> 
> [...]
> 
> 具有导出属性的变量，**以及在命令期间显式导出的变量，**应传递给实用程序环境变量

* * *

因此：这些变量在 fork 之后和执行被调用的命令之前由子 shell 扩展，并且必须 - 根据规范 - 单独影响孩子的环境。

* * *

现在，对于一些不同的行为：

```
SOMEVAR=BBB sh -c 'echo "$SOMEVAR"' 
```

...受益于`sh`实例在启动时从其环境变量（根据 POSIX 规范第 2.5.3 节的要求）创建 shell 变量。

* * *

顺便说一句，值得注意的是，您所询问的语法是在*一个简单的 command*中进行赋值，而不是在*subshel​​l*中进行赋值。您可以控制管道中涉及的子shell中的分配，如下所示：

```
{ SOMEVAR=BBB; echo "$SOMEVAR"; } | somecommand ... 
```

...将分配放入运行管道的第一个组件的子外壳中（如果您的外壳确实在子外壳中运行该组件，就POSIX而言，这是未定义的行为；从规范中：*“作为扩展，但是，管道中的任何或所有命令都可以在当前环境中执行”*）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-06-22T19:00:42.910

简而言之，在调用命令*之前*`$SOMEVAR`评估，而在命令前面添加前缀会修改您正在运行的命令的环境。*`SOMEVAR=BBB`*

 *正如 Charles Duffy 所说，您可以添加一个中间`sh`过程，该过程将使用类似的语法评估变量，但您可能想要做一些更复杂的事情，如果您仍然遇到问题，了解它会很有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-07T19:29:27.363

```
SOMEVAR=BBB; echo zzz $SOMEVAR zzz 
```

用一个 ; 分隔同一行的语句。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-28T17:24:15.163

这是另一种选择：

```
SOMEVAR=BBB && echo zzz $SOMEVAR zzz 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-22T14:47:14.060

```
SOMEVAR=BBB echo zzz $SOMEVAR zzz 
```

将添加`SOMEVAR=BBB`到环境变量中，然后执行`echo zzz $SOMEVAR zzz`. `$SOMEVAR`指的是您`SOMEVAR`预先设置`AAA`的shell变量。

添加分号`SOMEVAR=BBB; echo zzz $SOMEVAR zzz`将shell变量设置为`BBB`，然后执行分号后的命令，即`echo zzz $SOMEVAR zzz`生成`zzz BBB zzz`。

试试这个命令：

```
SOMEVAR=BBB env | less 
```

并看看环境。*

# iphone - 将 UITableViewCell 的 UIImageVIew 设置为不透明

> ID：10938486
> 
> 赞同：1
> 
> 时间：2012-06-07T19:20:31.393
> 
> 标签：iphone, objective-c, ipad

我和使用 Core Animation 进行分析，我在 UITableViewCellStyleSubtitle 上的 UIImageView 显示为混合（红色）而不是不透明。

我正在像这样设置图像：

```
 // This is just a helper method that loads a .jpg from the disk
    UIImage *img = [Helpers getThumbnailImageIfExists:[obj valueForKey:@"PhotoName"] withManufacturer:self.client.ManufacturerID];
    cell.imageView.image = img;
   [cell.imageView setOpaque:YES]; 
```

我认为应该这样做，但它仍然显示为不透明。我添加到我的 contentView 的一些 UIButtons 遇到了同样的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:25:13.267

您的图像可能包含一个 Alpha 通道。即使您将其设置为不透明，iOS 也会将其呈现为`semi-transparent`. 尝试通过 Photoshop 从图像中删除 alpha 通道：

图层 > 图层背景

希望这可以帮助！

# google-app-engine - iText + RPC。如何将 PDF 从服务器发送到客户端

> ID：10938492
> 
> 赞同：0
> 
> 时间：2012-06-07T19:20:57.180
> 
> 标签：google-app-engine, gwt, itext, rpc

我是 GAE + GWT 的新手。我看到新的 iText 版本 5.2.1 在 Android 和 GAE 中工作。我不知道如何使用 RPC 服务将 PDF 从服务器发送到客户端。有谁认识魏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:50:02.173

PDF 只是另一个字节集合。这是一个包含一些示例的链接。

[http://groups.google.com/group/google-web-toolkit/browse_thread/thread/11b749d50221499e](http://groups.google.com/group/google-web-toolkit/browse_thread/thread/11b749d50221499e)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:17:25.883

RPC 是对服务器的 ajax 请求。您需要可以将字节数组作为流返回给客户端的标准请求。在 gwt 中，我在客户端使用 RequestBuilder 与服务器端的 Jersey Web 服务进行通信。

# jquery - jquery加载事件从未触发

> ID：10938493
> 
> 赞同：2
> 
> 时间：2012-06-07T19:20:58.683
> 
> 标签：jquery

我试图理解 jQuery 中的“加载”事件，如下所述：http: [//api.jquery.com/load-event/](http://api.jquery.com/load-event/)。到目前为止，我什至一次都无法触发它！

这是一些示例代码。出现的唯一控制台消息是“DOM READY”——不是单个加载调用。用 .bind('load',..) 替换对 .load() 的调用没有任何区别。

```
 <!DOCTYPE html>
   <html>
   <head>
          <script src="lib/jquery.min.js"></script>
          <script>
           $(function(){
              console.log("DOM READY");
           });
           $(document).load(function(){
              console.log("Document Loaded");
           });
           $('#foo').load(function(){
              console.log("foo loaded");
           });
           $('#bar img').load(function(){
              console.log('image loaded');
           });
           $('#bar').load(function(){
              console.log('bar loaded');
           });
           </script>
   </head>
   <body>
     <div id="foo">Hellow world</div>
     <div id="bar">
        <img src="pics/pig.png"/>
     </div>
   </body>
   </html> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T19:23:39.157

您不能绑定到尚不存在的项目。例如，当您执行以下操作时：

```
$('#foo').load(function(){
    console.log("foo loaded");
}); 
```

该`#foo`项目不存在，因此您无法绑定到其加载事件。另请注意文档对`.load`事件本身的说明：

> *此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、iframe 和窗口对象。*

您的 div 元素不会“加载”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:27:34.923

如果您使用 document.ready 事件进行绑定，则可以保证元素存在：

```
$(document).ready(function(){
    $('#foo').load(function(){console.log("foo loaded");});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:32:05.303

正如乔纳森所说。如果您想要一个示例，我建议您查看本网站中的文档：http: [//api.jquery.com/ready/](http://api.jquery.com/ready/)

它有很好的参考资料，而且我通过你的例子了解到你想让它保持简单，所以你会在这里找到

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:11:36.750

我尝试复制您的示例，并且如其他人所述，仅触发了 DOM READ 一个。

我还修改了脚本并尝试让负载在 img、a、div 和脚本元素上工作。没有人开枪。

我还尝试传入窗口对象（毕竟这是一个“窗口”事件。这确实有效。

我的结论是，尽管有 jquery 文档，但它仅适用于 window 对象：

```
$(window).load(function(){
    alert("window loaded");
 }); 
```

我只测试了 chrome 并且只测试了我提到的元素。我个人只会使用 document.ready 功能。根据文档 .load with images 无论如何都不能很好地工作。这个特殊功能有很多注意事项：

# sql - SQL - 不同记录中的父子关系

> ID：10938494
> 
> 赞同：1
> 
> 时间：2012-06-07T19:21:01.123
> 
> 标签：sql, parent-child

我得到了一个 SQL 表，它有一个父子关系，我想以一种可读的格式呈现。

涉及的主要列是抽屉、文件夹、文档。每个抽屉可以有多个与之关联的文件夹，每个文件夹可以有多个与之关联的文档。但是，文件夹和文档不在同一记录中列出。

此表包含项目类型，文件夹和文档都被视为项目。为了关联它们，该表将文件夹的项目编号分配给文档记录中的 parentID。

例如：

```
DrawerID   ItemID    ParentID    Type    Name  
  1          1          0       Folder   Folder 1  
  1          2          0       Folder   Folder 2  
  1          3          0       Folder   Folder 3  
  1          4          0       Folder   Folder 4  
  1          5          1       Document Document A  
  1          6          1       Document Document B   
  1          7          1       Document Document C 
  1          8          2       Document Document A  
  1          9          3       Document Document A  
  1          10         3       Document Document B 
```

我正在寻找的是与此类似的输出：

```
Drawer 1
    Folder 1
        Document A
        Document B
        Document C
    Folder 2
        Document A
    Folder 3
        Document A
        Document B 
```

我坚持的部分是如何将 ParentID 绑定到 ItemID。最好的方法是某种联合吗？递归编程到一个新表？我不是 SQL 人 - 我只是剪切和粘贴一些查询，所以请使用小词 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:25:44.343

如果您只深入两个级别，则创建这样的数据可能是有意义的：

```
DrawerID    FolderID    ItemId    Description    ... 
```

文件夹本身的项目 ID 为 null 或零。

然后你可以查询：

```
SELECT * FROM table ORDER BY DrawerID, FolderID, ItemID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:26:03.013

标准 SQL 中没有递归。

但是，有一些模式可以解决您遇到的问题，其中之一是[嵌套集](http://www.codeproject.com/Articles/4155/Improve-hierarchy-performance-using-nested-sets)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:02:36.353

此查询应该可以工作，并在 SQL Server 中对您的数据进行了测试。基本上它是在查询中创建两个伪表来表示文件夹和文档实体，然后在父关系上连接在一起：

```
SELECT Folder.DrawerID, Folder.FolderId, Folder.FolderName, Doc.DocumentId, Doc.DocumentName
    FROM 

    (Select DrawerId, ItemId AS FolderId, ParentId, [Name] AS FolderName FROM Drawers WHERE [Type] ='Folder') Folder,

    (Select DrawerId, ItemId AS DocumentId, ParentId, [Name] AS DocumentName FROM Drawers  WHERE [Type] ='Document') Doc

    WHERE Doc.ParentId = Folder.FolderId
    ORDER BY DrawerId, FolderName, DocumentName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:10:30.567

如果您知道要处理多少级别，则可以使用自联接。在自联接中，您基本上假装同一个表是一个新表，并用不同的名称为它（T2 或其他）取别名。这个例子可以让你开始：

顺便说一句，您的数据有一个奇怪的问题，应该存在一个类型为 Drawer ID =0 的单行，以使概念完整。下面的代码必须更改或修复该错误

```
select 

T1.name,
T2.name,
T3.name //etc repeat as needed and below

from myTable T1

LEFT OUTER JOIN myTable T2 ON
  T2.ParentID= T1.ItemID

LEFT OUTER JOIN myTable T2 ON
  T2.ParentID= T3.ItemID

group by 1,2,3 
```

# image - Matlab 图像使用 [0 1.0] 图像仅显示黑色

> ID：10938499
> 
> 赞同：0
> 
> 时间：2012-06-07T19:21:32.597
> 
> 标签：image, matlab

我试图弄清楚为什么我的黑白图像（其值为 0-1.0）不会被 image(my_img) 调用正确缩放。

我尝试了以下方法：

*   设置颜色图([0:0.0039:1; 0:0.0039:1; 0:0.0039:1]')
*   将 gca 的 clim 设置为 [0 1]
*   将 DataAspectRatio 设置为 [1 1 1]
*   将 ClimMode 和 DataAspectRatioMode 更改为手动

我究竟做错了什么？Matlab 文档指出图像可以来自 [0 1.0] ... 为什么 image() 不能正确显示？

Imshow 效果很好，但出于个人原因，我正在尝试使用图像功能获得与 imshow 相同的图像。

康斯坦丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:27:48.737

```
h=image(rand(250, 250));
set(h, 'CDataMapping', 'scaled'); 
```

`imagesc()`自动执行此操作，实际上是源代码为`imagesc`我提供了正确的属性名称以供使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:29:14.190

从[`image`文档](http://www.mathworks.co.uk/help/techdoc/ref/image.html)中（请参阅标题“提示”下的表格），您可以使用`image`RGB 值数组或索引颜色图进行调用，后者似乎就是您正在做的事情。从同一张表中，它指出索引颜色图：

> 存储为范围颜色图中的二维 (m×n) 整数`[1, length(colormap)];`数组是范围 [0, 1] 中的 m×3 浮点值数组。

这里的关键点是图像数组中的值`my_img`应该在范围内`1`（`256`我从“设置”行中猜到了这一点`colormap([0:0.0039:1; 0:0.0039:1; 0:0.0039:1]'`，您可能需要更改它）。但是，您的值在 0 到 1 范围内，它们都被映射到颜色图中的第一种颜色，我认为它是`(0, 0, 0)`黑色。

# android - 如何在android <3中实现actionbar活动

> ID：10938508
> 
> 赞同：1
> 
> 时间：2012-06-07T19:22:24.167
> 
> 标签：android

我正在尝试在 API 10 中实现一个操作栏。我已将布局文件创建为“actionbar.xml”，该文件作为布局包含在每个屏幕上。我在操作栏布局上有一个可点击的图像视图。我该如何为此编写一个“onClick()”方法。意思是，我是否必须在每个活动中编写此方法？无论如何我可以创建一个单独的活动作为'ActiobarActivity.java'，它将有'onClick（）'？如果是这样，那么我如何将它链接到每个屏幕上的应用程序流？

基本上，任何人都可以建议一种方法来在 API < 11 的操作栏上实现可点击的小部件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T19:25:25.717

这就是 Actionbar Sherlock 的用途：

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:30:21.120

[http://actionbarsherlock.com](http://actionbarsherlock.com)上的ActionBarSherlock是一个 Android 库，用于使用 3.0+ 上的本机 ActionBar 和 3.0 之前的第三方库来实现操作栏设计模式。

3.0 之前设备的其他 ActionBar 实现：

[位于https://github.com/cyrilmottier/GreenDroid](https://github.com/cyrilmottier/GreenDroid)的 GreenDroid

[或https://github.com/johannilsson/android-actionbar](https://github.com/johannilsson/android-actionbar)上的 android-actionbar

# php - 剩余时间变短时颜色不同

> ID：10938511
> 
> 赞同：0
> 
> 时间：2012-06-07T19:22:39.860
> 
> 标签：php, mysql, html

我已经设法计算出我的“拍卖”风格网站的剩余时间，但是当时间不到 60 分钟时，我正在努力使 time_left 变量变为红色。

这是下面的代码，目前剩下的只是#333颜色，并没有变成#9f1717

```
$date = date('m/d/Y h:i:s', time());
$date3 = new DateTime($date);
$date4 = new DateTime($date_finished);
$interval_date = $date3->diff($date4);
//$time_left = $interval_date->d."d ". $interval_date->h."h ". $interval_date->i."m ";
$time_left = (($interval_date->d) ? $interval_date->d.'d ' : ''). (($interval_date->h) ? $interval_date->h.'h ' : ''). $interval_date->i.'m ';

$date_fini = date("d/m H:m", strtotime($date_finished));

if('m' < '59'  && ('d'=='' && 'H' =='')){
    $pro_order_colour = "#9f1717";
}
else{
    $pro_order_colour = "#333";
} 
```

谢谢你的所有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:28:28.143

您正在比较常量，而不是变量，因此这些都不会评估为 true：

```
if('m' < '59'  && ('d'=='' && 'H' =='')){ 
```

应该是这样的：

```
if($m < '59'  && ($d =='' && $H =='')){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:15:13.690

好的，在谷歌上搜索了一下之后，我尝试了 strpos() 函数来查看 time_left 字符串中是否有 ad 或 h ，如果没有，则表示还剩不到一个小时，所以我可以更改它变红。这是工作代码。

```
$date = date('m/d/Y h:i:s', time());
$date3 = new DateTime($date);
$date4 = new DateTime($date_finished);
$interval_date = $date3->diff($date4);
//$time_left = $interval_date->d."d ". $interval_date->h."h ". $interval_date->i."m ";
$time_left = (($interval_date->d) ? $interval_date->d.'d ' : ''). (($interval_date->h) ? $interval_date->h.'h ' : ''). $interval_date->i.'m ';

$date_fini = date("d/m H:m", strtotime($date_finished));
$pos = strpos($time_left, 'h');
$pos1 = strpos($time_left, 'd');
if ($pos !== false || $pos1 !== false) {
     $pro_order_colour = "#333";
} else {
     $pro_order_colour = "#9f1717";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:28:30.047

此代码将不起作用，因为“m”不小于一个数字，因为它是一个字符:)

`if('m' < '59' && ('d'=='0' && 'H' =='0')){`

只需这样做：

```
$date = mktime(time());
$date_fini = mktime(time()) + 3599;
$timeleft = intval($date_fini - $date); //assuming $date is the current time
if($timeleft < 3600) //3600 seconds in an hour
{
$pro_order_colour = "#9f1717";
} else {
$pro_order_colour = "#333";
} 
```

确保替换 date_fini。

# jsf - 不转发或重定向 jsf

> ID：10938514
> 
> 赞同：0
> 
> 时间：2012-06-07T19:23:04.593
> 
> 标签：jsf, navigation, action

我有两个页面可供注册。上一个我将用户数据放入请求范围的 bean 中，下一个我显示收集的数据。在第二页上，有一个按钮可以重定向用户登录。

这是 register.xhtml 的按钮操作。regUser.register 的结果是 reg_success，这是我显示用户数据的第二页的名称。

```
 <p>
            <h:commandButton value="#{msgs.regButtonText}" action="#{regUser.register}"/>
        </p> 
```

在 reg_success.xhtml 我有这个按钮的代码：

```
 <p>
            <h:commandButton value="#{msgs.regToLogin}" action="login"/>
        </p> 
```

我的登录页面名为 login.xhtml。

即使我将此导航规则插入到我的 faces-config.xml 中，转发也不会发生。实际上，从 register.xhtml 用户被转发，并且第二页上的 url 没有改变。

```
<navigation-rule>
        <from-view-id>/reg_success.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>login</from-outcome>
        <to-view-id>/login.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
</navigation-rule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:26:48.457

`<h:commandButton>`只有当它在 a 内时才有效`<h:form>`。另请参阅[commandButton/commandLink/ajax action/listener method not invoked 或 input value not updated](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)的第一点。

但在这种特殊情况下，您似乎不需要 POST 请求。那就用`<h:button>`吧。这会创建一个 GET 请求，而无需`<h:form>`.

```
<h:button value="#{msgs.regToLogin}" outcome="login" /> 
```

# ios - AIR for iOS StageVideo 音量控制

> ID：10938516
> 
> 赞同：1
> 
> 时间：2012-06-07T19:23:21.763
> 
> 标签：ios, video, air, volume

我在 iPad 2 上的 AIR for iOS 中加载和运行 MP4 就好了。

我遇到的问题是控制音量（静音/取消静音）。

我在 NetStream 对象上使用 soundTransform，但它没有效果..它也没有出错。

```
var transform:SoundTransform = new SoundTransform();
                transform.volume = 0;
                netStream.soundTransform = transform; 
```

这在 iOS (iPad) 上是否可行？或者只是应该使用物理音量控制？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:56:08.847

好的，所以看起来这是不可能的：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#soundTransform](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#soundTransform)

> 注意：AIR 3.0 for iOS 中的 H.264 视频不支持此属性。

耻辱...

# ios - 将披露按钮添加到 MKPointAnnotation

> ID：10938517
> 
> 赞同：5
> 
> 时间：2012-06-07T19:23:23.963
> 
> 标签：ios

为了在 Storyboard iOS 项目中创建地图注释，我使用了：

```
 CLLocationCoordinate2D annotationCoord3;

        annotationCoord3.latitude = 34.233129;
        annotationCoord3.longitude = -118.998644;

        MKPointAnnotation *annotationPoint3 = [[MKPointAnnotation alloc] init];
        annotationPoint3.coordinate = annotationCoord3;
        annotationPoint3.title = @"Another Spot";
        annotationPoint3.subtitle = @"More than a Fluke";
        [_mapView addAnnotation:annotationPoint3]; 
```

它工作得很好，但我想添加一个披露按钮，这样我就可以将序列推送到一个新的视图控制器并显示图像。这可能吗？

提前谢谢，

--bd--

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T19:29:34.833

将您的班级声明为`MKMapViewDelegate`. 然后加

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

    MKAnnotationView *annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:@"String"];
    if(!annotationView) {   
        annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"String"];
        annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;

    return annotationView;
} 
```

然后你添加：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {
    // Go to edit view
    ViewController *detailViewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
   [self.navigationController pushViewController:detailViewController animated:YES];

} 
```

... ViewController 可以是您定义的任何内容（我使用 nib 文件...）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T00:05:28.917

Axel 的回答是正确的（我刚刚投了赞成票）：您必须实现`MKMapViewDelegate`并将其实例分配给`Delegate`MKMapView 的属性。对于那些使用***MonoTouch***的人，这里是端口：

```
class MapDelegate : MKMapViewDelegate
{
    public override MKAnnotationView GetViewForAnnotation (MKMapView mapView, NSObject annotation)
    {
        MKAnnotationView annotationView = mapView.DequeueReusableAnnotation ("String");
        if (annotationView == null) {
            annotationView = new MKAnnotationView(annotation, "String");
            annotationView.RightCalloutAccessoryView = new UIButton(UIButtonType.DetailDisclosure);
        }
        annotationView.Enabled = true;
        annotationView.CanShowCallout = true;
        return annotationView;
    }

    public override void CalloutAccessoryControlTapped (MKMapView mapView, MKAnnotationView view, UIControl control)
    {
        // Push new controller to root navigation controller.
    }
} 
```

# html - 如何在所有浏览器上居中三个 div？

> ID：10938520
> 
> 赞同：2
> 
> 时间：2012-06-07T19:23:32.970
> 
> 标签：html, css

```
<div style="width: 400px; height: 150px; background-color: red">LOGO</div>
<div style="width: 200px; height: 1000px; float: left">sfsdf </div>
<div>sdad</div> 
```

[http://jsfiddle.net/AuT7n/](http://jsfiddle.net/AuT7n/)

我如何将这三个 div 集中在所有浏览器上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:32:06.110

你需要一个额外的 div 来保存底部的两个。

```
<div class="centre" style="width: 400px; height: 150px; background-color: red">LOGO</div>
<div class="centre" style="width: 400px; height: 1000px; ">
   <div style="width: 200px; height: 1000px; float: left; background-color: green">sfsdf </div>
   <div style="width: 200px; height: 1000px; float: right; background-color: purple">sdad</div>
</div> 
```

风格：

```
div.centre {
margin-left:auto;
margin-right:auto;
display:block;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:25:09.020

```
div {
margin-left:auto;
margin-right:auto;
display:block;    
} 
```

如果您还希望仅文本 div 居中，则需要添加

```
text-align:center; 
```

当您有 float:left; 时，这也无法正常工作；在。因为你告诉它浮动到左边并同时居中。

[http://jsfiddle.net/AuT7n/7/](http://jsfiddle.net/AuT7n/7/)

# django - 子类化 Django ModelForms

> ID：10938521
> 
> 赞同：19
> 
> 时间：2012-06-07T19:23:36.273
> 
> 标签：django

我想扩展 ModelForms 的主要目的是向表单添加字段。我认为通过一个例子更容易看出：

```
# Basic listing
class BasicForm(ModelForm):
    class Meta:
        model = Business
        fields = ('category', 'city', 'name', 'address', 
                'slogan', 'phone', 'website', 'email')

class SocialForm(BasicForm):
    class Meta:
        model = Business
        fields = ('facebook','twitter') 
```

那还能用吗？或者它会从 SocialForm 中的 BasicForm 中清除其他字段吗？

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-02T03:22:41.390

这是一个迟到的答案，但我想指出您可以`Meta`像这样子类化内部类：

```
class SocialForm(BasicForm):
    class Meta(BasicForm.Meta):
        fields = BasicForm.Meta.fields + ('facebook', 'twitter') 
```

这样您就不必重复`model = Business`定义，并且您可能添加的任何其他`Meta`属性都`BasicForm`将自动由`SocialForm`.

作为参考，这里是关于这种方法的[Django 文档。](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#form-inheritance)

# objective-c - iOS 设备可以向 Rails 应用程序发送 PUT 请求吗？

> ID：10938525
> 
> 赞同：7
> 
> 时间：2012-06-07T19:24:15.663
> 
> 标签：objective-c, ruby-on-rails, ios, nsurlconnection, put

我们已经多次尝试向我们的 Rails 服务器发送更新 PUT 请求，但我们不断收到 404“您要查找的页面不存在”

我们的更新方法非常简单（实际上是通用的 rails）。

```
def update
@user = User.find(params[:id])

respond_to do |format|
  if @user.update_attributes(params[:user])
    format.html { redirect_to @user, notice: 'User was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @user.errors, status: :unprocessable_entity }
  end
end 
```

结尾

当我从命令行运行 CURL 来测试更新方法时，它工作正常。但是，当我在 Objective-c 中尝试相同的方法时，总是会导致 404 错误。

所以我的问题是：iOS 设备可以使用 NSURLConnection 向服务器发送 PUT 请求还是没有实现？

更新：：

**这不会更新数据库**

```
NSString *dataString = @"user[first_name]=bob";
NSData *postBodyData = [NSData dataWithBytes: [dataString UTF8String] length:[dataString length]];
NSString *urlString = [NSString stringWithFormat:@"example.com/users/1.json"];
NSURL *fullURL = [NSURL URLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:fullURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:20];
[request setHTTPMethod: @"PUT"];
[request setHTTPBody:postBodyData];
self.todoConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
receivedData = [NSMutableData data]; 
```

**这会更新数据库**

```
NSString *urlString = [NSString stringWithFormat:@"example.com/users/1.json?user[first_name]=bob"];
NSURL *fullURL = [NSURL URLWithString:urlString];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:fullURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:20];
[request setHTTPMethod: @"PUT"];
self.todoConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
receivedData = [NSMutableData data]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-05T03:33:07.907

实际上@akshay1188 有一个可行的解决方案，但我认为更优雅的方法是在请求中添加“application/x-www-form-urlencoded”内容类型：

```
[request setHTTPMethod:@"PUT"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T19:27:55.427

你可以创建一个 NSMutableURLRequest 并设置 HTTP 方法：

```
- (void)setHTTPMethod:(NSString *)method 
```

给它字符串`@"PUT"`。

以下是如何从此类请求中创建 NSURLConnection。

```
NSMutableURLRequest *myMutableRequest[[NSMutableURLRequest alloc] initWithURL:myURL];
[myMutableRequest setHTTPMethod:@"PUT"];
[NSURLConnection connectionWithRequest:myMutableRequest delegate:myDelegate]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T07:01:38.723

将 HTTP 方法类型设置为 @"POST"

并在请求正文中添加一个参数：@"PUT" for key @"_method"

它应该工作。

# jquery - 将输入插入到 div jQuery

> ID：10938528
> 
> 赞同：2
> 
> 时间：2012-06-07T19:24:22.250
> 
> 标签：jquery, forms, html, input, append

我需要一些帮助。我有一个带有一些输入的表格，他用 div 排序。我想在 div 中插入更多输入，所以我尝试做这样的事情-

```
$(document).ready(function(){
  $("#more").click(function(){
    $("#div_name").append("<input type=\"text\" name\"test\" value=\"test\" />");
  });
}); 
```

html是

```
<form action="" method="post" enctype="multipart/form-data" name="form_name">
   <input type="text" name="text_input" value="test" />
   <div id="div_name"></div>
   <input type="button" id="more" value="Add more" />
</form> 
```

它的工作原理和添加输入很好，但是当我发送表单时，他不会发送 jquery 添加的输入，因为如果我会做 print_r($_POST); 他会向我展示除我刚刚添加的帖子之外的所有帖子，因此输出将是

```
 Array
(
    [text_input] => test
) 
```

当我使用上面的 jQuery 代码时也是如此。但是当我在做 $("form").append(...); ，一切都很好，但输入不在 div 中。谢谢你。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:46:58.270

首先，您插入表单的所有动态输入都将具有相同的名称，因此无法正常工作。您必须在名称末尾附加一个数字/字符串以区分每个输入数据。

这是一个供您结帐的小提琴，它表明表单元素确实包含动态创建的输入元素。[http://jsfiddle.net/umuff/](http://jsfiddle.net/umuff/)

更新：

发现你做错了什么

name\"test\" <=== 你忘记了 name 后面的等号

这是一个工作小提琴[http://jsfiddle.net/umuff/1/](http://jsfiddle.net/umuff/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:28:43.947

您的 div 应该在表单内。只需将表单的开始标记移动到 div 之前，将 /form 标记移动到 /div 之后。

如果这不起作用，则反过来：

```
<div id="...">
   <form>
   </form>
</div> 
```

# spring - 为什么我们不能在 spring 中自动装配静态字段？

> ID：10938529
> 
> 赞同：107
> 
> 时间：2012-06-07T19:24:25.257
> 
> 标签：spring, autowired

为什么我们不能在 Spring bean 中自动装配静态实例变量。我知道还有另一种方法可以实现这一点，但只是想知道为什么我们不能以下面的方式做到这一点。

例如

```
@Autowired
public static Test test; 
```

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2014-02-19T08:49:24.237

因为当类加载器加载静态值时，还不一定加载 Spring 上下文。所以类加载器不会正确地在 bean 中注入静态字段并且会失败。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-06-07T19:27:51.100

因为使用静态字段鼓励使用静态方法。静态方法是邪恶的。依赖注入的主要目的是让容器为你创建对象并连接它们。它也使测试更容易。

一旦你开始使用静态方法，你就不再需要创建一个对象的实例并且测试变得更加困难。此外，您不能创建给定类的多个实例，每个实例都注入不同的依赖项（因为该字段是隐式共享的并创建全局状态 - 也是邪恶的）。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-08T07:35:40.313

根据 OOP 的概念，如果静态变量是自动装配的，那将是糟糕的设计。

静态变量不是 Object 的属性，而是 Class 的属性。弹簧自动布线是在对象上完成的，在我看来，这使设计更加简洁。您可以将自动连接的 bean 对象部署为单例，并实现与将其定义为静态的相同。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-09-20T08:53:31.673

**通过这个解决方案，您可以在 spring 中自动装配静态字段。**

```
@Component
public class TestClass {

    private static Test test;

    @Autowired
    public void setTest(Test test) {
        TestClass.test = test;
    }
} 
```

# asp.net - WIF - 如何在生产环境中更新 FederationMetadata.xml？

> ID：10938539
> 
> 赞同：1
> 
> 时间：2012-06-07T19:25:20.990
> 
> 标签：asp.net, .net, wif, claims-based-identity

我需要为多个客户端部署一个 STS 和一个 ASP.NET RP，它们一起形成一个产品，当然我需要使用每个客户端的数据更新 STS FederationMetadata.xml 并更新对 STS 的 RP 引用。

如何在生产环境中实现这一点？我是否必须在每个客户端上安装 WIF 的 SDK 才能使用 FedUtil.exe。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:57:01.253

最后发现RP端不需要FedUtil，只需要在web.config上设置wsFederation.issuer、wsFederation.realm、trustedIssuers、audienceUris就够了。除非您想定期更新元数据，但我不想在生产中使用 FederationMetadata.xml。

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:00:30.517

在 RP 方面，您需要 FedUtil 每个实例。

在 STS 方面，如果您使用 ADFS 之类的东西，您只需单击“从 FederationMetadata 更新”链接”。

# javascript - 本地主机上的 Disqus Javascript API 跨域问题

> ID：10938541
> 
> 赞同：2
> 
> 时间：2012-06-07T19:25:34.937
> 
> 标签：javascript, jquery, cross-domain, disqus

我正在尝试构建一个页面，显示指向我的一堆博客文章的链接，并在每个链接旁边有一个小气泡，其中包含该文章的评论数。认为最简单的方法是使用 disqus 在他们的开发文档中谈到的“面向公众的 JavaScript API”。

如果我在浏览器中访问此链接，我会得到我正在寻找的 JSON：

[https://disqus.com/api/3.0/threads/details.json?forum=BLOG_FORUM&thread:ident=BLOG_THREAD&api_key=PUBLIC_API_KEY](https://disqus.com/api/3.0/threads/details.json?forum=BLOG_FORUM&thread:ident=BLOG_THREAD&api_key=PUBLIC_API_KEY)

但是，当我尝试从 jQuery 加载它时，它给了我可怕的 XMLHttpRequest cannot load: Origin is not allowed by Access-Control-Allow-Origin。

我尝试使用 $.getJSON() 和 $("#div").load() 来加载它。

我已将 localhost 和 127.0.0.1 添加到 Disqus API 中的“链接到我的公钥的域”设置中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T22:26:04.050

要在客户端使用[此 API](http://disqus.com/api/docs/requests/)，您需要执行 JSONP 请求。事实上的标准是指定函数名称的回调参数。Disqus 还需要更改`.json`为`.jsonp` With `jQuery.getJSON`，然后您可以添加`&callback=?`，jQuery 将从那里获取它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T12:39:35.640

您不能在响应标头中添加**“localhost”**作为 Origin 条目。这是因为**CORS的 JavaScript 安全规范**

**Access-Control-Allow-Origin**可以设置为*****以允许任何网站通过 XMLHTTPRequest/AJAX 访问数据，但您不能将其设置为**“localhost”**。

解决该问题的可能解决方案是：在公共域/位置托管发出请求的页面，并在响应标头**Access-Control-Allow-Origin**中包含主机名。

正如“@Matthew Flaschen”所提到的，您可以使用 JSONP 请求`&callback=?`来完成此操作

或者作为最后的手段，`<script>`通过在“src”属性中指定 URL 来加载 JSON 结果以及标签中的脚本并访问 JSON 数据，
例如：修改服务器端的结果以包含一项`<variable_name>={JSONObject}`技术并在脚本加载时，可以通过该变量访问数据
Some People got the same kind of issue [here](http://meteatamel.wordpress.com/2011/02/11/access-control-allow-origin/)

仍然无法弄清楚为什么浏览器拒绝`Access-Control-Allow-Origin=localhost`但他们支持`Access-Control-Allow-Origin=*`（意味着任何公共网站都可以访问数据但是............ ）这件事可能有一些阴谋（跟踪访问数据的网站）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:32:40.400

[实际上，您可以按照这些说明](http://docs.disqus.com/developers/universal/#comment-count)，通过使用脚本和数据驱动属性来做到这一点。您只需加载 Disqus count.js 脚本，然后使用`data-`属性。

[编辑：您可以将其配置为仅在此处](http://docs.disqus.com/help/3/)显示整数（然后您可以根据需要设置样式）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T10:26:30.597

我认为您只需要在顶部使用此标题：

```
<?php header('Access-Control-Allow-Origin: http://disqus.com'); ?> 
```

# iphone - 如何在我的 UIView 子类 drawRect 函数中使用核心动画？

> ID：10938551
> 
> 赞同：0
> 
> 时间：2012-06-07T19:26:12.653
> 
> 标签：iphone, uiview, core-animation, subclass

我开始一个包含核心动画使用的项目。在过去的一段时间里，我一直在我的应用程序中使用 UIView 动画来制作动画。现在我想通过使用核心动画将我的动画提升到更高的水平。

我查看了[Brad Larsson的关于 Core Animation 的](https://stackoverflow.com/users/19679/brad-larson)[课程](http://itunes.apple.com/us/itunes-u/advanced-iphone-development/id407243028)，它很好地解释了动画使用的概念。然而，在我的（UIView 子类）自己的实现中使用这些动画的体面实现还不清楚。

目前，我设法在滚动视图中创建了图像的缩略图视图。这是通过在 a 中创建视图`for-loop`并将这些 UIView 子类化来完成的。但是，我应该如何`drawRect`在 UIView 子类的函数中使用 Core Animation 在这些视图上实现动画。我正在考虑对它进行曲线变换。

`drawRect`到目前为止，我的代码用于绘制一个带有弧形阴影和顶部图像的白色矩形：

```
//Draw function for displaying the seperate views/thumbnails
- (void)drawRect:(CGRect)rect {

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGRect ShadowRect = CGRectMake(15,15, 130,90);
    CGRect ImageRect = CGRectMake(20,20, 120,80);

    //save context and add the arc calculation and apply it on the shadow
    CGContextSaveGState(context);
    CGMutablePathRef arcPath = createArcPathFromBottomOfRect(ShadowRect, 5.0);
    CGContextAddPath(context, arcPath);
    CGContextSetShadow(context, CGSizeMake(0.0, 5.0), 3.0);
    CGContextFillPath(context);
    CGContextRestoreGState(context);

    //now we draw a white rectangle within the same frame as the shadow
    CGContextSaveGState(context);
    CGColorRef whiteColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0].CGColor;
    CGContextSetFillColorWithColor(context, whiteColor);
    CGContextFillRect(context, ShadowRect);
    CGContextRestoreGState(context);

    CGContextSaveGState(context);
    [self.img drawInRect:ImageRect];
    CGContextRestoreGState(context);

    CFRelease(arcPath);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:00:58.937

抱歉，您不能使用 Core Animation 在 drawRect 内制作动画。您只能为视图和图层设置动画。

但是，查看您的代码，您应该能够仅使用 Core Animation 来执行此操作。我假设 createArcPathFromBottomOfRect() 为您创建一个圆角半径为 5 的圆角矩形？如果是这样，那么这很容易。如果没有，那么您可能必须使用 CAShapeLayer 来完成更高级的路径。

*如果您还没有将 QuartzCore.framework 导入到您的项目中，您将需要这样做。*

## 如果您所做的只是创建带有阴影的图像的圆角矩形。

只需将图像设置在 a`UIImageView`中，然后设置图像视图层的cornerRadius 属性。

```
myImageView.layer.cornerRadius = 5.0; 
```

现在，对于阴影，您稍后配置图像视图的阴影属性。

```
myImageView.layer.shadowColor = [UIColor blackColor].CGColor;
myImageView.layer.shadowOffset  = CGSizeMake(0.0, 5.0);
myImageView.layer.shadowRadius = 3.0;
myImageView.layer.shadowOpacity = 0.5;
// Setting a shadow path will improve performance
myImageView.layer.shadowPath = [UIBezierPath bezierPathWithRoundedRect:myImageView.bounds 
                                                          cornerRadius:myImageView.layer.cornerRadius].CGPath; 
```

## If`createArcPathFromBottomOfRect()`比圆角矩形更复杂。

您将必须创建一个`CAShapeLayer`来代表您的路径。幸运的是，它需要您正在创建的 CGPathRef。

```
CAShapeLayer *myMaskLayer = [CAShapeLayer layer];
myMaskLayer.path = createArcPathFromBottomOfRect(myRect, 5.0); 
```

现在您可以使用路径屏蔽图像视图。

```
myImageView.layer.mask = myMaskLayer; 
```

对于阴影，您需要创建另一个具有相同路径的形状图层并将阴影添加到该图层（包括阴影路径）。现在，如果您将图像视图添加到创建阴影的形状图层上方，我们将其称为 myShadowLayer，您将拥有一个图像，该图像被蒙版为带有阴影的任意形状。

# java - Java文件阅读器不工作，它不会运行代码

> ID：10938554
> 
> 赞同：0
> 
> 时间：2012-06-07T19:26:18.847
> 
> 标签：java, file, io, writer

我有这个程序需要读取 JComboBox 中不同选定项目的不同文件。我已经让 JComboBox 和一切正常工作，但现在当我尝试调用 Course_loader 代码时它不会运行。这是我尝试从中调用它的代码：

```
 public static String CourseName;
public static String PlayerName;
public Start_round(){
    try {
        Course_loader cl = new Course_loader();
        cl.loadCourse(CourseName);
    } catch (IOException e) {
    } 
```

现在这里是文件阅读器的代码：

```
 import java.io.*;
    public class Course_loader {
public static String holes;
public void loadCourse(String s) throws IOException{
    File f = new File("courses\\"+s+".txt");
    BufferedReader reader = new BufferedReader(new FileReader(f));
    holes = reader.readLine();
    reader.close();
    System.out.println("it ran");
} 
```

}

当我调用代码时，它不会打印出“它运行”。我自己检查了我的代码，但我是文件阅读器的新手。请帮忙。提前致谢。

哦，文件在那里，里面有这些词

```
 test 
```

并且当它尝试打印字符串时，它是空的，这证明东西没有运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:29:11.240

你默默无视`IOException`。

将异常处理更改为`Start_round`：

```
try
{
    // your "load course" code ...
}
catch (IOException e)
{
    e.printStackTrace();
} 
```

这应该会生成一些输出，让您了解代码出了什么问题`FileReader`，例如，*文件未找到*问题。

**另一个提示：**总是把你的`reader.close()`电话放在一个`finally`块中。在您的情况下，这意味着在您的方法中进行一些特定的异常处理`loadCourse`。搜索*java filereader*和类似的搜索以寻找最佳实践。另外，做一些关于异常的工作，如果你不太了解这些东西，请尝试/捕获/最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:16:34.150

```
} catch (IOException e) {
} 
```

你的问题就在那里。*永远不要*那样做。至少记录异常。你在对自己假装没有出错，现在你想知道为什么它不起作用。

# visual-studio-2010 - Visual Studio .Net - 仅在字符串中查找和替换

> ID：10938556
> 
> 赞同：1
> 
> 时间：2012-06-07T19:26:28.817
> 
> 标签：visual-studio-2010

我正在使用 Visual Studio，我想在我的一个类中查找/替换带下划线的空格。

但是，我在 C# 中进行编码，并且在使用标准的查找/替换对话框时，如下所示：

![查找替换](../Images/5d2829115c3d8944c2853545e21053a7.png)

它还查找并替换了我不想要的所有空格。

有没有办法只在字符串内部执行查找/替换？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:28:12.963

您可以使用[Visual Studio 正则表达式风格](http://msdn.microsoft.com/en-us/library/2k3te2cs.aspx)- 单击`Use`复选框并`Regular expressions`在下拉列表中选择。

像下面这样的东西应该可以工作（它将匹配一个只包含空格的字符串并将空格放在一个捕获组中）：

```
"(:b+)" 
```

# winforms - 如何使用 Windows 窗体项目中的嵌入式资源创建 MSI 安装程序

> ID：10938562
> 
> 赞同：1
> 
> 时间：2012-06-07T19:26:53.980
> 
> 标签：winforms, windows-installer, installation

我有这个 WinForms 项目（基于[这个](http://sharepointinstaller.codeplex.com/)，但针对 SharePoint 2010 进行了修改），它实际上是一个安装向导，用于安装 SharePoint 2010 解决方案包 (.wsp)。

这个项目除了安装 .wsp 之外，还在 SQL Server 数据库上运行一些 .sql 脚本。

我的问题是**如何创建一个 MSI/EXE 安装程序，其中嵌入了所有资源（.wsp 文件、.sql 文件、图像），所以我只有一个文件要分发？**

请记住，不能选择使用 Visual Studio 安装项目，因为它会生成安装程序来安装安装程序。我不需要那个，WinForms 项目是安装程序。

希望我足够清楚。

谢谢。

**更新**

需要明确的是，WINFroms 项目**是**安装程序。它包含向导对话框并运行代码以安装 Sharepoint 解决方案、运行 SQL 脚本等。

当我编译项目时，我最终得到了一堆具有以下结构的文件：

```
\en-us
\Resources
SomeThirdParty.dll
AnotherThirdParty.dll
Setup.application
Setup.exe
Setup.exe.config
Setup.exe.manifest
Setup.pdb
Setup.vshost.application
Setup.vshost.exe
Setup.vshost.exe.config
Setup.vshost.exe.manifest 
```

我需要的是一个将所有内容打包到 MSI 安装程序中的工具，该安装程序将自动提取和自动执行`setup.exe`。**不是**生成安装程序本身的工具，安装程序已经编码，它是 WinForms 项目本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:47:21.567

[Advanced Installer](http://www.advancedinstaller.com/)对此提供支持，尽管您需要的功能仅在许可版本中可用。基本上，您可以创建一个 MSI 包装器来简单地启动您的项目并执行 SQL 脚本，或者尝试使用其专用的 SharePoint 支持。

另一种方法是[IExpress](http://technet.microsoft.com/en-us/library/dd346760.aspx)之类的。一个自解压的 EXE，它启动其中包含的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:19:50.723

I have used Wix with success in the past. [http://wix.sourceforge.net/](http://wix.sourceforge.net/)

You can embed resources in the msi so you will only have one file to distribute. Additionally any custom installation steps you need to perform can be accomplished by writing custom actions in c# or vb.net code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T18:45:23.817

就像 Cosmin Pirvu 提到的那样，您需要一个自解压安装程序。我过去使用的是 Chilkat Software 的免费版本，名为[ZIP 2 Secure EXE](http://www.chilkatsoft.com/chilkatsfx.asp)。

如果您的所有程序集都是 .NET，那么您也可以尝试[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?id=17630)将它们全部放入一个程序集中。尽管这对 .manifest 和 .config 文件没有帮助。

编辑：使用 ILMerge 的替代方法是将 dll 嵌入到您的可执行文件中，[如此处所述](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)。

# java - 在java中记录异常时在哪里指定文件名和路径？

> ID：10938568
> 
> 赞同：2
> 
> 时间：2012-06-07T19:27:08.613
> 
> 标签：java

我是 java 新手，并试图通过示例学习如何记录异常。我在这里找到了以下示例代码：

[http://www.kodejava.org/examples/447.html](http://www.kodejava.org/examples/447.html)

但是，我没有看到指定日志文件的文件名的位置。当我在 Google 上研究这个问题时，人们通常会参考用于编程 java 的框架来确定日志文件的存储位置。但是，我没有使用框架。我只是从命令行使用 VIM 编辑器创建我的 java 文件。该 java 文件位于 Linux CentOS 应用服务器上，并从客户端的浏览器中调用。

问题 1：是否可以修改下面的示例以包含用于记录的文件名和路径？或者，我对这个问题有什么误解吗？

问题2：即使我记录了异常，它仍然会传播到客户端供用户查看吗？希望它会，否则用户不会知道发生了错误。

```
package org.kodejava.example.util.logging;

import java.util.logging.Logger;
import java.util.logging.Level;
import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.text.ParseException;

public class LoggingException {
private static Logger logger = Logger.getLogger(LoggingException.class.getName());

public static void main(String[] args) {
    DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
    df.setLenient(false);

    try {
        //
        // Try to parsing a wrong date.
        //
        Date date = df.parse("12/30/1990");

        System.out.println("Date = " + date);
    } catch (ParseException e) {
        //
        // Create a Level.SEVERE logging message
        //
        if (logger.isLoggable(Level.SEVERE)) {
            logger.log(Level.SEVERE, "Error parsing date", e);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:33:42.957

尝试这个：

```
try {
    FileHandler handler = new FileHandler("myLogFile.log", true);
    Logger logger = Logger.getLogger(LoggingException.class.getName());
    logger.addHandler(handler);
} catch (IOException e) {
    logger.log(Level.SEVERE, "Error parsing date", e);
} 
```

默认情况下，文件处理程序会在每次创建日志文件时覆盖其内容。您可能还想附加日志文件，因此在 FileHandler 构造函数中您需要指定`true`为第二个参数。

希望这可以帮助。

**编辑：**

```
package org.kodejava.example.util.logging;

import java.util.logging.Logger;
import java.util.logging.Level;
import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.text.ParseException;

public class LoggingException {
private static Logger logger = Logger.getLogger(LoggingException.class.getName());

public static void main(String[] args) {
    DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
    df.setLenient(false);
    FileHandler handler = new FileHandler("myLogFile.log", true);
    logger.addHandler(handler);
    try {
        //
        // Try to parsing a wrong date.
        //
        Date date = df.parse("12/30/1990");

        System.out.println("Date = " + date);
    } catch (ParseException e) {
        //
        // Create a Level.SEVERE logging message
        //
        if (logger.isLoggable(Level.SEVERE)) {
            logger.log(Level.SEVERE, "Error parsing date", e);
        }
    }
  }
} 
```

这应该有效。我没有测试它。更有效的方法是创建一个方法来初始化记录器并向其添加处理程序。但我主要建议您考虑使用`log4j`. 它易于设置和广泛使用的日志框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:36:56.860

在配置中为记录器添加文件处理程序。链接：[http ://www.crazysquirrel.com/computing/java/logging.jspx](http://www.crazysquirrel.com/computing/java/logging.jspx)

```
handlers = java.util.logging.ConsoleHandler, java.util.logging.FileHandler 
```

最好使用 log4j。它是一个很好的日志框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T19:33:33.773

您需要一个附加到日志的 FileHandler，您可以在初始化的某个位置手动添加它，或者使用 .properties 文件配置您的日志记录。

（ps 本例中的 isLoggable 调用是多余的，只会使代码膨胀）

# apache2 - Glassfish 3.0.1 中的 AJP 连接泄漏

> ID：10938572
> 
> 赞同：2
> 
> 时间：2012-06-07T19:27:15.180
> 
> 标签：apache2, glassfish-3

似乎当使用带有 mod_jk 的 Apache 2.2 将请求路由到指向 AJP 连接（8009）上的后端 Glassfish 3.0.1 服务器的虚拟主机时，任何请求都会导致 Glashfish 端的连接泄漏

Glassfish 上的连接超时设置似乎都不起作用。当泄漏的连接数达到分配给 ajp 网络侦听器的线程池中的最大线程数时，Glassfish 服务器变得无响应，但仍然不会释放任何打开的连接，无论它们有多旧（1 天...）。服务器连接的奇怪行为

有没有人遇到过同样的问题并解决了问题？谢谢

彼得

# php - php json_encode for php < 5.4（意外令牌）

> ID：10938581
> 
> 赞同：0
> 
> 时间：2012-06-07T19:27:44.273
> 
> 标签：php, jquery, json

我有一个 jquery ajax，它调用一个输出 json 对象的 php 文件。

这一切都适用于高于 5.3 的 php 版本，但`JSON_PRETTY_PRINT, JSON_UNESCAPED_SLASHES, and JSON_UNESCAPED_UNICODE`尚未实现较低版本。

如何在早期版本中转义“&”或“=”等“json 敏感”字符？

感谢您的时间！

编辑：从头开始......问题是=>我`<br />`在文本中有并且被更改为`<br \="">` 给出`"`错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:30:06.903

如果您使用的是 UTF-8 编码，则可以使用：

```
$json = preg_replace('/[^(\x20-\x7F)]*/','', $json); 
```

对于 JSON_UNESCAPED_SLAHES，您可以使用：

```
preg_replace('\\/', '/', $json); 
```

JSON_UNESCAPED_UNICODE 可能有点复杂，我在 php.net manual [here](http://php.net/manual/en/function.json-encode.php)上找到了一些示例。

# mysql - 当行数多于 IN 值时，MYSQL 返回 null

> ID：10938585
> 
> 赞同：0
> 
> 时间：2012-06-07T19:27:59.373
> 
> 标签：mysql, sql, messaging, where-in

我很难找到合适的标题。

我正在开发一个包含两个表的消息传递系统，一个包含所有不同的对话（对话中的用户和对话的 uid），另一个包含用户之间的消息。

对于每个对话，我使用对话的 uid 和 user_id 为对话中的每个用户创建一行。在对话中可以只有 2 个用户，但也可以有更多（3、4、5、6 等）

我的 SQL 语句有问题，我不知道如何解决。问题是，当我们说 3 个用户之间有对话时，之后可以说其中 2 个用户想要在没有第 3 个用户的情况下开始私下交谈。当 2 个用户已经与其他用户进行对话时，如何使 SQL 语句不返回任何内容。这样我就可以在我的表中添加 2 行具有自己的私有会话 ID 的新行。

`conversation_list`表格如下所示：

```
|id | user_id| conversation_id|
 -----------------------------
| 1 |       1|               1|
| 2 |       3|               1|
| 3 |       1|               2|
| 4 |       2|               2|
| 5 |       4|               2| 
```

现在我的 SQL 代码是这样的：

```
SELECT *
FROM conversation_list
WHERE user_id IN (user1_id,user_id2)
GROUP BY conversation_id
HAVING COUNT(*) = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:14:38.633

*您对问题的重述是否正确：*

**“当两个用户中的任何一个与任何其他用户进行对话时，如何使 SQL 语句不返回任何内容”？**

...或者

**“我怎样才能让 SQL 语句只在这些用户不与其他用户进行对话时才返回行？”**

```
SELECT conversation_id
FROM conversation_list
WHERE user_id IN (5,6)
AND conversation_id NOT IN (
    SELECT conversation_id from conversation_list where user_id NOT IN (5,6)
)
GROUP BY conversation_id
HAVING COUNT(*) = :nb_users 
```

如果这些用户没有与其他用户进行对话，这应该只返回行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:51:27.713

让我们看看我是否正确理解了您的问题：`conversation_id`仅当您列出了`user_id`参与该对话的所有 s 时，您才想返回？

如果是这样的话，看看我对[这个问题](https://stackoverflow.com/questions/5479975/query-for-a-set-in-a-relational-database/5480412#5480412)的回答。您可以将对话视为参与者的命名集合，因此`conversation_id`是集合的名称，`user_id`s 是该集合的项目。答案有 3 种不同的方法，包括解释。

适应您的桌子的最后一个版本大致如下：

```
SELECT totals.conversation_id
FROM (
    SELECT conversation_id, COUNT(*) count
    FROM conversation_list
    GROUP BY conversation_id
) totals
INNER JOIN (
    SELECT conversation_id, COUNT(*) count
    FROM conversation_list
    WHERE user_id IN (6, 5)
    GROUP BY conversation_id
) matches
ON (totals.conversation_id = matches.conversation_id)
WHERE totals.count = 2 AND matches.count = 2; 
```

其中 6 和 5 是`user_id`s，2 是`user_id`s 的数量。

第一个子查询查找每个会话中的用户总数，第二个子查询查找每个会话中匹配用户的计数。当`matches.count`为 2 时，会话有我们正在寻找的所有用户，如果`totals.count`也是 2，则会话没有任何额外的用户。

# jquery - 向codeigniter分页添加无限滚动

> ID：10938587
> 
> 赞同：3
> 
> 时间：2012-06-07T19:28:05.957
> 
> 标签：jquery, codeigniter, infinite-scroll

我一直在尝试使用此插件为 codeigniter 的分页添加无限滚动。

```
http://www.infinite-scroll.com 
```

到目前为止，这是我的代码：

```
<script type = "text/javascript">

    $('#comments').infinitescroll({

        navSelector  : "a#next:last",    // selector for the paged navigation (it will be hidden)
        nextSelector : "a#next:last",    // selector for the NEXT link (to page 2)
                    itemSelector : "#comments"       // selector for all items you'll retrieve
              });

</script> 
```

这是默认用法。让我们假设#comments 包含我的内容。我的分页页面看起来像这样。

```
http://localhost/ci/index.php/chat/load/p1u/10
http://localhost/ci/index.php/chat/load/p1u/20 
```

等等

我什至添加了这行代码以使其工作但没有成功：

```
<a id="next" href="http://localhost/ci/index.php/chat/load/p1u/10">next page</a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:33:24.557

`$config["use_page_numbers"]`如果要使用 /1 /2 /3 而不是 /10 /20 /30，请切换到在 pagination.php 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-04T05:26:10.097

我发现这绝对适用于 $config["use_page_numbers"] = TRUE; 但如果你要走那条路，你就必须调整你的偏移量。这就是我的工作方式：

```
$offset = ($this->uri->segment(2)) ? ($this->uri->segment(2) * $config["per_page"]) - $config["per_page"] : 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-03T12:07:13.020

我对代码点火器中的滚动分页有简单的步骤，我已经检查过它工作得更好

```
$(window).scroll(function(){
    if  ($(window).scrollTop() == $(document).height() - $(window).height()){
        // run our call for pagination
        var table = document.getElementById("table");
        var lastRowIndex = table.rows.length-1;
        loadMore(lastRowIndex);
    }
});

function loadMore(lastRowIndex)
{
$.ajax({
    url: "http://localhost/CodeIgniter/index.php/form/loadmore",  //form is y controller
    type:'POST',
    data: "row="+lastRowIndex, // row wich is post
    success: function(data){    //here data which recevie form controller
        var json = JSON.parse(data);
        var count = json.length;
        var html;
        for( var i = 0; i < count; i++ )
        {
            html += '<tr>';
            html += '<td><input type="checkbox" name="id[]" id="id[]" class="check" value="'+ json[i].id +' "></td>';
            html += '<td>'+ json[i].id +'</td>';
            html += '<td><img src="http://localhost/CodeIgniter/upload/'+ json[i].image +'" class="img-circle" height="25" width="30"></td>';
            html += '<td> ' + json[i].firstname +'</td>';
            html += '<td> ' + json[i].middlename +'</td>';
            html += '<td> ' + json[i].lastname +'</td>';
            html += '<td> ' + json[i].address +'</td>';
            html += '<td> ' + json[i].mobile +'</td>';
            html += '<td> ' + json[i].email +'</td>';
            html += '<td> ' + json[i].gender +'</td>';
            html += '<td><a href="http://localhost/CodeIgniter/index.php/form/del/'+ json[i].id +'">Delete</a></td>';
            html += '<td><a href="http://localhost/CodeIgniter/index.php/form/edite/'+ json[i].id +'">Update</a></td>';
            html += '</tr>';
        }$("#body").append(html); //add this html to th table body which id='body'
    }   
});
} 
```

我使用这个控制器功能

```
 public function loadmore()
 {
    $page=$_POST['row'];
    $per_page = 10;
    $student = $this->Form_model->getview_detail($per_page,$page);
    if($student !== FALSE)
    {
        echo json_encode($student); //send data to script
    }
} 
```

`

这是模型

```
public function getview_detail($limit, $start)
{
    $this->db->limit($limit, $start);
    $query = $this->db->get('form');
    return $query->result_array();
} 
```

# macos - 如何在 OSX 上改变关注 NSTextField 的效果

> ID：10938596
> 
> 赞同：7
> 
> 时间：2012-06-07T19:28:52.213
> 
> 标签：macos, cocoa, focus, nstextfield

在 CSS 中，您可以使用以下方法更改关注某事的效果：

```
.myelement:focus { ... } 
```

在 Cocoa 中，文本字段总是发出难看的蓝色光芒。如何更改专注于 NSTextField 的效果（或者根本不让它做任何事情）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-07T21:20:40.150

上述命令的 Cocoa 等效项是：

```
[[textField window] makeFirstResponder:textField]; 
```

至于更改外观，您是在问如何为所有应用程序中的所有控件（“全局”）更改它，还是只为您自己的应用程序中的文本字段更改它？没有用于全局更改的 API，因此系统黑客是您唯一的途径。祝你好运。

对于您拥有的控件（属于您自己的应用程序的控件），您可以在 Interface Builder 中设置焦点环类型，也可以在运行时通过代码设置，如下所示：

```
[textField setFocusRingType:NSFocusRingTypeNone]; 
// (or NSFocusRingTypeDefault or NSFocusRingTypeExterior) 
```

# php - mySQL 查询连接关联表匹配这个 AND 这个 OR 这个

> ID：10938597
> 
> 赞同：0
> 
> 时间：2012-06-07T19:29:01.380
> 
> 标签：php, mysql, left-join

我需要一点帮助。不知道为什么我无法理解这一点。

我有一张用于歌曲、流派和两者之间关联的表格。

```
SONGS
song_id
song_name
active (0,1)

GENRE
genre_id
genre_name (rock,jazz,classical,newage,opera)

ASSOC
song_id
genre_id 
```

我可以像这样进行简单的搜索...

```
SELECT s.song_name, s.song_id
FROM (songs s)
LEFT JOIN assoc a ON s.song_id = a.song_id
WHERE s.active = 1
AND a.genre_id = 1 
```

和这样的多重搜索。

```
SELECT s.song_name, s.song_id
FROM (songs s)
LEFT JOIN assoc a ON s.song_id = a.song_id
WHERE s.active = 1
AND (a.genre_id = 1 
   OR a.genre_id = 2) 
```

但是，如果我想得到 1 和 2 OR 3 怎么办？这不起作用。

```
SELECT s.song_name, s.song_id
FROM (songs s)
LEFT JOIN assoc a ON s.song_id = a.song_id
WHERE s.active = 1
AND a.genre_id = 1
AND (a.genre_id = 2 
   OR a.genre_id = 3) 
```

提前感谢您的帮助。我有一种感觉，我只是以错误的方式看待这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:30:48.857

试试这个，

```
 SELECT s.song_name, s.song_id
    FROM (songs s)
    LEFT JOIN assoc a ON s.song_id = a.song_id
    WHERE s.active = 1
    AND (a.genre_id = 1
    OR a.genre_id = 2 
       OR a.genre_id = 3) 
```

你的 where 子句是错误的，因为

```
AND a.genre_id = 1 AND (a.genre_id = 2 OR a.genre_id = 3) 
```

这意味着在一排你有两个选择

```
a.genre_id=1 and a.genre_id=1 or
a.genre_id=1 and a.genre_id=3 
```

而且每行只有一个genre_id，所以在同一行中不能没有2个值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:34:27.947

```
SELECT s.song_name, s.song_id
FROM (songs s)
LEFT JOIN assoc a ON s.song_id = a.song_id
WHERE s.active = 1
AND (a.genre_id = 1
  AND a.genre_id = 2) 
OR a.genre_id = 3 
```

我想这就是你要找的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:36:01.193

您可以执行自联接：

```
SELECT s.song_name, s.song_id
FROM   songs AS s
  JOIN assoc AS a1 ON a1.song_id = s.song_id AND a1.genre_id = 1
  JOIN assoc AS a2 ON a2.song_id = s.song_id AND a2.genre_id IN (2,3)
WHERE  s.active = 1 
```

# css - 如何获得编译的 LESS 代码？

> ID：10938608
> 
> 赞同：0
> 
> 时间：2012-06-07T19:29:54.167
> 
> 标签：css, less

我正在使用 less.js 进行开发，并且想知道如何为实时站点获取已编译的 css 代码。

我查看了源代码，显然它只引用了这个文件`<link type="text/css" rel="stylesheet/less" href="css/test.less">`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:47:27.263

有几个选项可以获取生成的 css

## css文件的片段

您可以在浏览器中查看 css，您将无法获得完整的生成文件，但您可以看到每个单独元素的样式

*   铬和 Safari
    *   右键单击页面上的任意位置，然后单击`Inspect Element`
*   IE9+
    *   按 F12
*   火狐
    *   右键单击页面上的任意位置，然后单击`Inspect Element`

## 生成完整的css文件

*   **视窗**
    *   [无胜](http://winless.org/)
*   **操作系统**
    *   [简单的](http://wearekiss.com/simpless)
    *   [少.app](http://incident57.com/less/)

## 端口

*   [无点](https://github.com/dotless/dotless)（windows - .NET/linux - 单声道）
*   [少php](http://leafo.net/lessphp/)

* * *

# 更新

[@crashdesk 建议](https://stackoverflow.com/questions/10938608/how-do-i-get-compiled-less-code/10938820#comment14309986_10938820)使用 Chrome的[Web Developer](https://chrome.google.com/webstore/detail/bfbameneiokkgbdmiekhjnmfkcnldhhm?hl=en-US&utm_source=chrome-ntp-launcher)扩展。
您可以在浏览器中查看整个文件。安装后，单击图标，然后单击“CSS”，然后单击“查看 CSS”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:54:58.767

一种手动的方法是从您的 HTML 文件中查看生成的源代码并复制已编译的 CSS 源代码。

# iphone - 为什么不调用库（委托）方法？CocoaAsyncSocket

> ID：10938609
> 
> 赞同：1
> 
> 时间：2012-06-07T19:29:56.910
> 
> 标签：iphone, objective-c, ios, delegates, cocoaasyncsocket

我已经在这个问题上停留了几天，似乎越来越接近解决方案（在伟大的用户@SO的帮助下）。我正在使用 CocoaAsyncSocket 库来创建到 Windows 服务器的 TCP 套接字连接。

正在我的 appDelegate 中建立连接：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    socket = [[AsyncSocket alloc] initWithDelegate:self];
    NSError *error = nil;
    if (![socket connectToHost:@"199.5.83.63" onPort:11005 error:&error]) 
    {
        NSLog(@"Error connecting: %@", error);
    }

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[tekMatrixViewController alloc] initWithNibName:@"tekMatrixViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

**我有一个名为 onSocket:(AsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port 的连接方法（库的一部分）：**

```
- (void)onSocket:(AsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port
{
    NSLog(@"connected :D");
} 
```

**正在调用**此方法，因为我可以看到 NSLOG 的输出并且我已成功连接。我还可以从 Windows 机器上看到连接成功（使用日志文件）。

我还测试了另一个委托方法**也被调用：**

```
- (void)onSocket:(AsyncSocket *)sock willDisconnectWithError:(NSError *)err
{
    NSLog(@"error - disconnecting");
    // start reconnecting procedure here...
} 
```

我已经通过在模拟器中运行我的应用程序然后从我的笔记本电脑上拔下我的以太网线来测试 willDisconnectWithError 方法是否有效。完成此操作后，我在输出中看到了“错误 - 断开连接”字符串。

然而，最大的问题是我的委托方法（同样，来自库）没有被调用。

**未调用委托方法：**

```
- (void)onSocket:(AsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    NSData *strData = [data subdataWithRange:NSMakeRange(0, [data length])];
    NSString *msg = [[NSString alloc] initWithData:strData encoding:NSUTF8StringEncoding];
    if(msg)
    {
        NSLog(@"RX:%@",msg);
    }
    else 
    {
        NSLog(@"Fail");
    }    
} 
```

我对我对委托方法如何工作的知识和理解充满信心，但我仍然不太了解它们是如何被调用的。为了进一步复杂化和引起混淆，一个委托方法（onSocket：didConnectToHost 端口：）正在被调用，但另一个（onSocket：didReadData 标签：）没有被调用。不幸的是，这只是我的问题的第一步，但我必须先解决这个问题，然后才能解决另一个问题。

任何帮助将不胜感激。感谢：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:41:18.247

从 AsyncSocket.h 文件中：

```
/**
 * Called when a socket has completed reading the requested data into memory.
 * Not called if there is an error.
**/
- (void)onSocket:(AsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag; 
```

我的第一个猜测是你有一个错误，这就是你的委托方法没有被调用的原因。您是否还实现了处理错误的委托方法？

```
/**
 * In the event of an error, the socket is closed.
 * You may call "unreadData" during this call-back to get the last bit of data off the socket.
 * When connecting, this delegate method may be called
 * before"onSocket:didAcceptNewSocket:" or "onSocket:didConnectToHost:".
**/
- (void)onSocket:(AsyncSocket *)sock willDisconnectWithError:(NSError *)err; 
```

注意：仅仅因为您能够无错误地连接，并不意味着您将能够阅读而不会发生错误。您传入的错误参数`connectToHost:onPort:error:`并未涵盖所有错误情况。

编辑：您能否发布在套接字上调用“readData”方法之一的代码部分？那里可能有一些被忽视的东西。例如，如果没有“readData”消息被发送到套接字，那么这将解释为什么没有调用您的委托方法。

编辑：`onSocket:didReadData:withTag:`只有在套接字上调用了以下 readData 方法之一后，才会调用该方法。例如：

```
// The readData and writeData methods won't block (they are asynchronous).
// 
// When a read is complete the onSocket:didReadData:withTag: delegate method is called.
// When a write is complete the onSocket:didWriteDataWithTag: delegate method is called.
// 
// You may optionally set a timeout for any read/write operation. (To not timeout, use a negative time interval.)
// If a read/write opertion times out, the corresponding "onSocket:shouldTimeout..." delegate method
// is called to optionally allow you to extend the timeout.
// Upon a timeout, the "onSocket:willDisconnectWithError:" method is called, followed by "onSocketDidDisconnect".
// 
// The tag is for your convenience.
// You can use it as an array index, step number, state id, pointer, etc.

/**
 * Reads the first available bytes that become available on the socket.
 * 
 * If the timeout value is negative, the read operation will not use a timeout.
**/
- (void)readDataWithTimeout:(NSTimeInterval)timeout tag:(long)tag; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-10T01:12:34.983

在我的服务器应用程序通过 [newSocket writeData:welcomData withTimout:-1 tag:1] 发送设置数据后，我的客户端应用程序中的 didReadData() 方法没有被调用，我遇到了类似的问题。

在 didConnectToHost() 方法中插入以下行后，我的问题就解决了。[clientAsyncSocket readDataToData:[GCDAsyncSocket CRLFData] withTimeout:-1.0 tag:0];

现在，每当发送内容时，都会适当地调用我客户的 didReadData() 方法。

# networking - 数据链路层和传输层

> ID：10938615
> 
> 赞同：14
> 
> 时间：2012-06-07T19:30:27.473
> 
> 标签：networking, tcp, data-link-layer

当传输层提供差错控制时，数据链路层的差错控制需要什么？两种错误控制有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T19:36:54.193

传输层数据可以分解为许多数据链路层帧/数据包。

因此，即使没有任何数据链路错误，传输层流/数据包也可能损坏。**编辑：**这是因为传输层路径通常由许多数据链路层*跃*点组成，例如：

```
Host1 <----> switch1 <----> switch2 <----> Host2 
```

如果一个数据包丢失`switch1`，`switch2`则链路上不会记录任何错误`switch2` `Host2`，但相应的传输层流将被破坏。

另一方面，一旦遇到数据链路错误，就可以丢弃/重新启动传输层传输，而不会浪费资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-22T20:26:33.120

这是因为数据链路层专门处理比特级纠错。它获取接收计算机已经拥有的数据包，并确定传输中是否发生错误以及数据是否完整或损坏。然而，需要有额外的控制来确保系统知道所有的数据包都到达了。这称为端到端错误控制，是传输层的职责。传输层不在乎有效载荷中的数据是好是坏。那是数据链路的工作。传输只关心它是否得到了它应该得到的每个数据包，以及是否以正确的顺序到达。

有关其他详细信息，请参阅

[http://books.google.ca/books?id=9c1FpB8qZ8UC&pg=PA216&lpg=PA216&dq=why+error+detection+and+correction+both+in+transport+and+link+layer+?&source=bl&ots=RI7-DU8RO0&sig= 0U5Z9AmKkx3m3TA71WfIe1uTeW0&hl=en&sa=X&ei=LbqPUsahOtDEqQHyvIHQCw&ved=0CDUQ6AEwAQ#v=onepage&q=为什么%20error%20detection%20and%20correction%20both%20in%20transport%20and%20link%20&%20%3F](http://books.google.ca/books?id=9c1FpB8qZ8UC&pg=PA216&lpg=PA216&dq=why+error+detection+and+correction+both+in+transport+and+link+layer+?&source=bl&ots=RI7-DU8RO0&sig=0U5Z9AmKkx3m3TA71WfIe1uTeW0&hl=en&sa=X&ei=LbqPUsahOtDEqQHyvIHQCw&ved=0CDUQ6AEwAQ#v=onepage&q=why%20error%20detection%20and%20correction%20both%20in%20transport%20and%20link%20layer%20%3F&f=false)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:13:49.207

它真的取决于协议而不是层，但假设你的意思是 TCP ......

TCP 的错误检测是最小的，并且比任何类型的可靠错误检测更多地被设计为完整性检查。您看不到这是实践的原因是以太网、PPP、FrameRelay 等数据链路层具有非常*强大的*错误检测算法，因此 TCP 协议几乎没有传输错误要检测。

如果您有一个具有强大错误检测功能的不同传输层协议，那么您在较低级别就不会严格需要它。在堆栈中尽可能低地丢弃错误是有好处的，主要是性能和资源使用相关。

请注意，由于内存故障等，错误可能会蔓延到传输层*之上，因此如果数据真的**非常*重要，那么您应该在您的应用程序中包含错误检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:10:05.927

假设校验和是正确的，这个结果意味着数据在传输过程中被损坏。此外，损坏不是发生在传输链路上（它会被 CRC 捕获），而是一定发生在中间系统之一（路由器和网桥）或发送或接收主机中。

[http://conferences.sigcomm.org/sigcomm/2000/conf/paper/sigcomm2000-9-1.pdf](http://conferences.sigcomm.org/sigcomm/2000/conf/paper/sigcomm2000-9-1.pdf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-27T17:00:13.087

首先，从端到端重新传输数据包是一项昂贵的任务，并且可能需要大量时间。在每条链路上进行这些检查会减少重新传输的数据包必须经过的“长度”。考虑端到端路径上存在容易出错的链接的情况。该链接可能会导致许多数据包丢失，因为它不可靠。如果没有任何链路层可靠性，则重传只能由传输层协议处理。因此，格式错误的数据包必须到达其目的地，发送 NACK（或等效），然后才能进行重传。另一方面，如果链路层具有内置的可靠性，则数据包将仅在不可靠的链路上立即重传。

其次，链路层的可靠性仅依赖于位检查，而传输层的可靠性还利用排序和确认。考虑传递到网络层的分段因为 MTU 太小而需要分段的情况。链路层可靠性只会检查每个单独片段的完整性。如果一个分片丢失，链路层可能不会发出警报。另一方面，传输层会因为它期望所有碎片数据包。

最后，链路层不仅在其有效载荷中承载 TCP 和其他传输层协议。因此，为没有内置可靠性的协议内置可靠性是合适的，这样格式错误的有效载荷就不会进入堆栈。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-08-23T03:41:05.690

在误码率高的噪声信道中，如无线网络，纠错是在数据链路层完成的。

在错误率低的健壮网络中，如 LAN，纠错是在传输层完成的，因此重传成本最小化。

# c# - C# ASP.NET 自定义控件未显示

> ID：10938617
> 
> 赞同：2
> 
> 时间：2012-06-07T19:30:41.380
> 
> 标签：c#, asp.net, custom-controls, ascx

我正在尝试为 ASP.NET 构建一个自定义控件，我首先在 VS2010 中创建一个 Web 应用程序并创建一个新的 .ascx 页面。该页面称为“TestBox”，它只是一个带有“This is a test”作为文本的TextBox 控件。

我构建了该项目，然后将 DLL 包含在另一个网站中，以确保我能够移动控件。根据我在[这里](http://msdn.microsoft.com/en-us/library/aa479318.aspx)找到的教程，我在页面顶部添加了以下代码行：

```
<%@ Register TagPrefix="TestControl" Namespace="TestControl" Assembly="TestControl" %> 
```

然后我将它添加到页面本身：

```
<TestControl:TestBox ID="TestBox1" runat="server" /> 
```

代码编译并且页面加载没有抛出任何错误，但是当它加载时它是完全空白的。通过引入故意的运行时错误，我确定 TextBox 肯定正在加载，但控件本身仍然没有显示。

我错过了什么吗？

TestControl 的代码：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="TestBox.ascx.cs" Inherits="TestControl.TestBox" %>
<asp:TextBox ID="TextBox1" runat="server" ontextchanged="TextBox1_TextChanged">This is a test</asp:TextBox> 
```

我没有以任何方式接触过 Designer 代码或 .cs 代码。

编辑：想通了。我已经为 .CS 文件声明了一个命名空间，但没有为 .ASPX 文件本身声明一个命名空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:20:06.747

答案是我必须将命名空间添加到 ASPX 文件本身，而不仅仅是底层代码文件。我忘了添加`Class="TestControl.TestBox"`到页面声明。

# uiview - 在 MBProgressHUD 中加载自定义视图

> ID：10938620
> 
> 赞同：9
> 
> 时间：2012-06-07T19:31:03.830
> 
> 标签：uiview, xib, mbprogresshud, custom-view

是否可以在 MBProgressHUD 叠加层中加载自定义视图，MBProgressHUD 类有一个自定义视图选项，但是我可以使用 customView 分配一个 XIB 视图等吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T11:56:38.843

是的，你可以这样做：

```
MBProgressHUD *loadingHUD = [[MBProgressHUD alloc] init];
loadingHUD.mode = MBProgressHUDModeCustomView;
loadingHUD.labelText = nil;
loadingHUD.detailsLabelText = nil;
UIView *customView = [[UIView alloc] initWithFrame:self.view.bounds]; // Set a size
// Add stuff to view here
loadingHUD.customView = customView;
[HUD show:YES]; 
```

# ios - 在 Mac OS X 上为 iOS 模拟器选择性地使用 Charles Proxy

> ID：10938624
> 
> 赞同：24
> 
> 时间：2012-06-07T19:31:33.433
> 
> 标签：ios, http, proxy, simulator, charles-proxy

有没有办法在 Mac OS X 上的 iOS Simulator 等特定应用程序中选择性地使用 Charles 代理？目前，在监控与 iOS 模拟器运行的 iOS 应用程序之间的 HTTP 流量时，Charles 还监控来自其他应用程序（如 Chrome 和 Mail 应用程序等）的 HTTP 流量。这真的很让人分心。除了在 Charles Proxy 设置下添加我们要绕过的域列表之外，还有什么方法可以做到这一点？

Chrome 确实是个问题，因为它使用 Mac OS X 代理设置。我尝试了像 Proxy Switchy 这样的扩展，但它要么没有帮助，要么我不知道如何配置它。

任何指针将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-07T19:42:48.790

您确实可以过滤 Charles 代理中的记录。只需转到代理>记录设置...然后您可以包含或排除您需要的任何域。这是唯一的方法。使用域、端口、路径或查询。

如果您不想记录来自 google Chorme 的内容，只需禁用按 Cmd+Shift+P 的选项，这将禁用 Mac OS X 代理。

![在此处输入图像描述](../Images/2a1e066f78e54145fb77a8fac820e291.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-23T08:17:20.280

使用序列选项卡，您可以设置过滤器：

![在此处输入图像描述](../Images/3dadf32e0199bf9d65c3410f1d496e21.png)

快速、简单且无需担心代理菜单和设置。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-15T21:28:26.317

I was trying to do something similar. Consider this as an alternative. If you have an iOS device, you can run your app on the device and configure Charles to only show traffic from remote clients by disabling the "Mac OS X proxy"

Here is an example setup: Using one remote client (say an iPad in this case) and a Mac running Charles as your proxy host, disable the "Mac OS X proxy" by deselecting the checkbox in Proxy Settings >> Mac OS X Tab >> Enable Mac OS X proxy (See image below.)

By doing so, you essentially filter your simple setup to only display traffic that is coming from remote client (the iPad).

![enter image description here](../Images/1501a9aedf15216d7786d2d3e90e0648.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-23T06:37:49.117

要审核整个流量，我实际上必须使用真实设备。使用 iOS 模拟器无法轻松过滤客户端应用程序，因为模拟器和主机（您的 Mac）共享相同的 IP。但是，如果您使用设备，那就太好了。更多信息 帮助 > SSL 代理 > 在移动设备或远程浏览器上安装 Charles Root 证书。

1.  检查您的 IP，确保设备和您的 mac 在同一网络中（您的 IP 可以在 Charle 帮助的上述“安装 Charles 根证书...”部分中检查。
2.  在您的设备上打开 chls.pro/ssl 并在您的设备上安装证书。
3.  确保您的证书固定已关闭（如果您使用某种形式）。
4.  像往常一样检查您的代理> SSL代理设置（确保您要跟踪的所有主机都在那里）。
5.  运行应用程序。
6.  如果被问到，请接受来自您设备在查尔斯的即将到来的流量。
7.  保存会话并从 Charles 外部过滤，因为 Charles 中仍然没有可过滤的客户端地址/客户端 IP。或者，查看应用程序中列出的设备的流量并区分 127.0.0.1 和“其他任何设备”会更容易。

顺便提一句。为了过滤我的应用程序后端，我不喜欢使用 djibouti33 建议的基本过滤器功能（在底部），而是使用 Focused Hosts（查看 > Focused Hosts...）。并且有一个切换/复选框可以隐藏/显示序列列表上的其他调用。很方便。

# excel - excel根据列值合并行

> ID：10938626
> 
> 赞同：1
> 
> 时间：2012-06-07T19:31:51.227
> 
> 标签：excel, merge, rows

所以我一直在寻找我需要的信息，并没有真正找到一个简单的解决方案，尽管似乎应该有一个。基本上，我有以下

约翰 | 能源部 | 123 袋鼠林 | 00123 | | |

约翰 | 能源部 | | 00123 | xxx | 年年 |

简 | 能源部 | | 01234 | | zz |

简 | 能源部 | 哔哔 ln | | XX | |

我需要

约翰 | 能源部 | 123 袋鼠林 | 00123 | xxx| 年年 |

简 | 能源部 | 哔哔 ln | 01234 | XX | zz |

基本上很简单，我需要合并具有相同第 1 列和第 2 列数据的单元格，以获得尽可能全面和简洁的数据列表。你会认为这可以通过谷歌作为一个简单的公式轻松获得，但我只找到了 VBA 解决方案（我以前从未使用过 VBA，或者宏，所以我不确定如何使用它们或修复它们中的错误）。任何帮助是极大的赞赏。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:51:37.067

最简单的选择是将 A & B 的内容合并在一列中（在 C 中插入一个新列）

```
C1    =A1&" "&B1 
```

向下滚动公式

按列排序 C

确保您在第 1 行有描述性名称来描述您的列。

选择完整的表格

创建一个数据透视表，删除行部分中的 C 列以获得唯一名称列表。

在新工作表中复制唯一名称列表

然后看看 vlookupall describe here [excel vlookup with multiple results](https://stackoverflow.com/questions/6754605/excel-vlookup-with-multiple-results) to create your own function。

# jquery - google maps api jquery infowindow 标签

> ID：10938628
> 
> 赞同：1
> 
> 时间：2012-06-07T19:32:01.257
> 
> 标签：jquery, maps, infowindow

我试图在我的谷歌地图项目的信息窗口中创建标签。

我正在使用 $(ex).tabs(); 在 html 中创建无序列表后。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:34:19.217

也许你应该试试这个 [http://econym.org.uk/gmap/basic10.htm](http://econym.org.uk/gmap/basic10.htm) 干杯

# jquery - 带有斜杠 (/) 的 URL 未在浏览器中正确呈现

> ID：10938630
> 
> 赞同：0
> 
> 时间：2012-06-07T19:32:03.633
> 
> 标签：jquery, url, browser

这可能是太多的信息，但你去吧......用户输入一个 url 并且 url 通过 ajax 发送到后端以确认它存在。如果是，它会返回 url 和 contentType（text/html、image/jpeg...ect）。下面的代码是 ajax 成功回调。

```
var template = 
"<span class='urlFile'>"+data.contentType+'</span>'+
"<span class='urlPath' title="+data.url+'>'+data.url+'</span>';

$(template).prependTo(fieldWrapper); 
```

**问题**是生成的 html 呈现部分乱序。下面是 Firebug (Chrome) 的输出补充。请注意 data.url ( [http://api.jquery.com/appendto/](http://api.jquery.com/appendto/) ) 没有包含在 span.urlPath 中。

```
<span class="urlFile">html</span>
<span class="urlPath" title="http://api.jquery.com/appendto"></span>
http://api.jquery.com/appendto/ 
```

此外，当我添加一个时，`alert(template)`我得到：

```
<span class='urlFile'>html</span>
<span class='urlPath' title=http://api.jquery.com/prependto/>http://api.jquery.com/prependto/</span> 
```

...哪个是对的。我相信这个问题与渲染尾随的浏览器有关`/`；但是，除了删除斜线之外，我不确定如何修复它。

仅供参考：删除尾部斜杠似乎可以解决问题，即：

```
var url = data.url.replace(/\/$/,''); 
```

...但是真的需要吗？听起来这是一个坏主意：

[从 URL 中删除尾部斜杠总是安全的吗？](https://stackoverflow.com/questions/942751/is-it-always-safe-to-remove-a-trailing-slash-from-a-url)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:37:07.937

你对斜线是正确的。浏览器认为您正在关闭第二个`span`元素。要解决此问题，请将`title`属性放在引号中，如下所示：

```
var template = 
"<span class='urlFile'>"+data.contentType+'</span>'+
"<span class='urlPath' title='"+data.url+"'>"+data.url+'</span>';

$(template).prependTo(fieldWrapper);​ 
```

# windows-phone-7 - 如何在其中强制元素溢出网格

> ID：10938631
> 
> 赞同：0
> 
> 时间：2012-06-07T19:32:05.317
> 
> 标签：windows-phone-7, layout

我有以下布局

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid Height="100" Background="Wheat" Opacity="0.4">
        <StackPanel Orientation="Vertical" VerticalAlignment="Bottom">
            <Slider Orientation="Vertical" Height="170" HorizontalAlignment="Center" Background="White" />
            <Button Content="Btn" Width="100"/>
        </StackPanel>
    </Grid>
</Grid> 
```

在这种情况下，Grid 将剪切溢出 Grid 的 Slider 的其余部分。所以我得到这样的结果 ![在此处输入图像描述](../Images/02441ad77aa47384c047390be29fe3b5.png) 虽然我想得到这样的结果 ![在此处输入图像描述](../Images/799eedad8bee8877c92fad77d244d8d4.png) 那么我怎样才能强制 Slider 在不裁剪的情况下溢出 Grid 呢？是否有任何替代解决方案？事实上，我有更复杂的布局，所以现在欢迎使用 Canvas 而不是 Grid。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:57:47.913

您可以使用一个单一的`Grid`并使用其子级`Grid.RowSpan`和`Grid.ColumnSpan`属性来执行此操作。

```
<Grid x:Name="LayoutRoot"
      Background="Transparent">
  <Grid.RowDefinitions>
    <RowDefinition Height="*" />
    <RowDefinition Height="Auto" />
    <RowDefinition Height="Auto" />
    <RowDefinition Height="*" />
  </Grid.RowDefinitions>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="Auto" />
    <ColumnDefinition Width="*" />
  </Grid.ColumnDefinitions>

  <Rectangle Grid.Row="2"
             Grid.Column="0"
             Grid.ColumnSpan="3"
             Height="100"
             Fill="Wheat"
             Opacity="0.4" />

  <StackPanel Grid.Row="1"
              Grid.RowSpan="2"
              Grid.Column="1">
    <Slider Orientation="Vertical"
            Height="170"
            HorizontalAlignment="Center"
            Background="White" />
    <Button Content="Btn"
            Width="100" />
  </StackPanel>
</Grid> 
```

# maven-3 - 为 Maven 3.0.4、win7 设置路径

> ID：10938635
> 
> 赞同：33
> 
> 时间：2012-06-07T19:32:10.180
> 
> 标签：maven-3

我第一次尝试在我的机器 win 7 上安装 Maven v 3.0.4。我在设置路径环境系统变量时遇到问题我有以下 4 个条目：

```
PATH
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\Java\jdk1.7.0_04;C:\Program Files\apache-maven-3.0.4\bin;M2_HOME;%M2%

M2_HOME
C:\Program Files\apache-maven-3.0.4\bin

M2
%M2_HOME%\bin

JAVA_HOME
C:\Program Files\Java\jdk1.7.0_04\bin 
```

当我做 `mvn --version`

我得到错误：

```
JAVA_HOME not found in your environment, please set the JAVA_HOME variable in your environment to match the location of your java installation 
```

java -version 显示 java 版本正常，

我在做什么大错特错？路径好吗？

感谢帮助，谢谢。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-08T14:59:24.327

只需正确设置 Maven 二进制文件和 JDK 的路径：

```
set PATH %SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\Java\jdk1.7.0_04\bin;C:\Program Files\apache-maven-3.0.4\bin 
```

此外，您需要在 Windows 下正确设置 JAVA_HOME，如下所示：

```
SET JAVA_HOME=C:\Program Files\Java\jdk1.7.0_04 
```

请注意将 JAVA_HOME 设置为已安装 JDK 的根目录，而不是将其设置为 bin 文件夹。M2 和 M2_HOME 的设置不是必需的。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-07-01T16:09:35.490

从命令提示符运行以下

```
set M2_HOME= C:\Program Files\apache-maven-3.0.4
set PATH=%PATH%;%M2_HOME%\bin
set JAVA_HOME=C:\Program Files\Java\jdk1.7.0_04
set PATH=%PATH%;%JAVA_HOME%\bin
cmd.exe
mvn -version 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-08T16:13:50.937

环境变量应分别指向各个程序的安装目录，并将其对应的`bin`文件夹添加到`PATH`：

*   确保您`JAVA_HOME`指向`C:\Program Files\Java\jdk1.7.0_04`（或您已将 JDK 安装到的任何目录）。

*   将文件夹添加`%JAVA_HOME%\bin`到您的文件夹中`PATH`（例如，将部分替换为`C:\Program Files\Java\jdk1.7.0_04`）。确保您使用`;`来分隔不同的路径组件。

*   同样，该`M2_HOME`变量应该分配给Maven的安装目录，例如`C:\Program Files\apache-maven-3.0.4`，您应该添加`%M2_HOME%\bin`到`PATH`（`C:\Program Files\apache-maven-3.0.4\bin;M2_HOME;%M2%`可以删除的部分。

添加环境变量`%JAVA_HOME%\bin`和`%M2_HOME%\bin`路径而不是完全限定路径的优点是可以轻松更新 Java 和 Maven（或并行安装多个版本）。您需要做的就是更新环境变量，该`PATH`变量将自动休耕。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-25T00:34:39.887

我遇到了与原始海报相同的问题。我检查、仔细检查和三次检查所有内容，以符合每个人（正确）表明设置需要的内容。我仍然遇到同样的错误。最后，我从命令行运行了 SET JAVA_HOME=C:\Program Files\Java\jdk1.7.0_45 ，然后运行了 mvn 命令和 viola。

因此，无论出于何种原因，pss 的建议都起到了作用。显然，这并没有真正改变其他人所说的，因为这正是我的环境变量的样子......只需从命令行点击 JAVA_HOME。

奇怪。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-09-07T05:09:11.370

我遵循了所有步骤，但它对我不起作用。但是一旦我设置了`JAVA_HOME`路径，在命令提示符下只需键入：

> C:>SET JAVA_HOME=C:\Program Files (x86)\Java\jdk1.8.0_91

它在几秒钟内就可以正常工作。感谢大家。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-01T05:37:32.167

我在本地安装时遇到了同样的问题。我尝试了所有建议的方法，包括 SET 方法，但这对我不起作用。最后，我不得不手动向系统添加另一个环境变量，然后

```
mvn -v 
```

给出了适当的回应：

```
Apache Maven 3.3.3 (7994120775791599e205a5524ec3e0dfe41d4a06; 2015-04-22T04:57:37-07:00)
Maven home: C:\Program Files (x86)\apache-maven-3.3.3-bin\apache-maven-3.3.3\bin\..
Java version: 1.8.0_45, vendor: Oracle Corporation
Java home: C:\Program Files\Java\jdk1.8.0_45\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows 8", version: "6.2", arch: "amd64", family: "dos" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-24T01:57:12.953

如果像我一样，您`mvn -version`从命令提示符运行，然后从 GUI 添加任何缺少的环境变量，那么您可能只需要在添加环境变量*后重新加载命令提示符。*

只需退出并运行 cmd.exe

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-14T03:47:09.803

您需要在环境中创建一个名称为 JAVA_HOME 的变量并将其值设置为 jdk 的路径。

1.  右键单击**我的电脑/这台电脑 -> 属性**
2.  选择**高级系统设置**
3.  打开**环境变量**
4.  在系统变量下单击**新建...**按钮并将名称指定为 JAVA_HOME 并将值指定为 c:/path/to/jdk

![在此处输入图像描述](../Images/c65c02688f776f98b677968d02dc36ea.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-25T01:24:55.673

我一直使用的版本。双击即可启动并运行 maven

```
@echo off
title Maven 3.0.5
set JAVA_HOME=C:\Users\hutingung\Development\jdk\jdk1.6.0_33
set MAVEN_OPTS=-Xmx1024m -Xms512m -XX:MaxPermSize=192m -Dfile.encoding=utf-8
set MAVEN_HOME=C:\Users\hutingung\Development\tools\apache-maven-3.0.5\bin
set PATH=%MAVEN_HOME%;%JAVA_HOME%\bin;%PATH%
@cmd /k 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-28T10:56:21.717

是的，将该路径附加`C:\programfiles\maven\bin`到系统变量中的路径变量就足够了，它将起作用。无需添加用户变量。

# arrays - 当我将 int 数组作为参数时，Console.Write() 中发生了什么？

> ID：10938636
> 
> 赞同：0
> 
> 时间：2012-06-07T19:32:16.190
> 
> 标签：arrays, cil, console.writeline

像标题一样的问题。调用 Write 方法时到底发生了什么？如果我有这样的代码：

```
int [] t = new int[]{2,1};
Console.Write(t); 
```

是否有可能在不更改写入方法参数（不添加 [0]）的情况下显示数字 2？（数组的第一个元素）这段代码会在不同的 .NET 框架版本中给出相同的结果吗？

![在 C# 和 ildasm 中使用 Console.WriteLine 的方法](../Images/68336fcbe641d7db2ae51816405d616b.png)

为什么这个方法不写 y 类型？(System.Int32[])

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:44:25.093

不，那是不可能的，因为您必须重新定义`toString()`Int32[] 的方法。

Console.Write(t) 是简单的`Console.Write(t.toString())`并且`t.toString()`是`Int32[].toString()`。

的行为`Int32[].toString()`是简单地返回类型，在这种情况下是 `System.Int32[]`。

因此，要回答您的问题，不，您不能`Int32[].toString()`返回`toString()`第一个索引。

# postgresql - PostgreSQL：条件唯一约束

> ID：10938644
> 
> 赞同：8
> 
> 时间：2012-06-07T19:33:06.627
> 
> 标签：postgresql

鉴于：

```
----------------------------------
      vin     | driver | is_owner
--------------+--------+----------
 231431cxzv87 | bob    | true
 231431cxzv87 | jeff   | false
 231431cxzv87 | greg   | false
 32342klj234s | jeff   | true 
```

有没有办法添加一个约束，以便每个 vin 只有一个所有者？

* * *

**编辑：**我发现[了这个问题](http://archives.postgresql.org/pgsql-novice/2007-04/msg00045.php)。
添加[部分唯一索引](http://www.postgresql.org/docs/8.4/interactive/indexes-partial.html)是否适合此目的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T19:57:52.747

是的，部分索引是您的选择。

```
create unique index unique__vin on table (vin) where is_owner; 
```

此处索引仅涵盖 is_owner 为 true 的行，并且该行 vin 应该是唯一的。

# javascript - Ajaxing 内容时鼠标悬停失去焦点

> ID：10938645
> 
> 赞同：0
> 
> 时间：2012-06-07T19:33:17.937
> 
> 标签：javascript, jquery, ajax, drupal-7

我在 Drupal7 中使用暴露的过滤器来过滤使用 ajax 的项目。

我有一个带有复选框的菜单来决定要过滤的内容是隐藏的，直到您将鼠标悬停在菜单类别上。这一切正常，直到您选择一个复选框。

页面过滤正确，但是当新内容加载时，鼠标悬停菜单失去焦点。我试图在加载新内容时保持菜单打开，不确定我的 js 有什么问题。

```
$('.views-exposed-widget').live({
    mouseover:
        function()
        {
            $(this)
            .children('.views-widget')
            .addClass('show');
        },
    mouseout:
        function()
        {
            $(this)
            .children('.views-widget')
            .removeClass('show');
        }
}); 
```

** 编辑：删除 .end(); 加载内容时仍然失去焦点。

# firefox-addon - 动态 innerHTML 和审核流程

> ID：10938651
> 
> 赞同：2
> 
> 时间：2012-06-07T19:33:40.760
> 
> 标签：firefox-addon

我们正在尝试将我们的插件上传到 Mozilla“插件”商店。我们收到了关于使用`innerHTML`. 这是审查过程中的交易破坏者吗？我不想在没有得到一些反馈的情况下提交它。

> innerHTML 不应动态设置
> 
> 警告：出于安全和性能原因，不应使用动态值设置 innerHTML。这可能导致安全问题或相当严重的性能下降。

我在脚本中使用了几次 innerHTML，只是为了更改插件创建的链接的措辞。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:35:46.470

我的经验是，他们通常更喜欢你解决警告，除非有很好的例外理由。在这种情况下，您可以轻松地改用[DOM](https://developer.mozilla.org/en/DOM) API。可能[textContent](https://developer.mozilla.org/en/DOM/Node.textContent)会为您工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T08:40:05.327

真正的原因是，除了安全漏洞之外，这还会对性能产生影响，因为它有时会强制重建 DOM 树或诸如此类，因此实际上不使用`innerHTML`.

# c# - 从列表构建 Linq 查询 使用动态 linq

> ID：10938653
> 
> 赞同：0
> 
> 时间：2012-06-07T19:33:40.903
> 
> 标签：c#, linq-to-sql

我正在使用动态 linq 来处理一些用户请求。它的设置方式是我将数据收集到 Var 数据中

```
var data = Project.Model.Adhoc.GetData().AsQueryable(); 
```

这基本上是从视图中选择 *

然后从那里我将遍历所有我必须过滤用户选择的选项

```
 foreach (Filters filter in filters.OrderBy(x=>x.strOrderNumber))
            { 
```

连同一些检查和排列，我开始这样做

```
data = data.Where(filter.strFilter + FormatOperator(filter.strOperator) + "@0", filter.strValue).
                                Select(x => x).ToList().AsQueryable(); 
```

这工作得很好，但是数据源开始增长，所以我想做的是这样的：

`data = data.select(get all items that were selected)`然后做我的检查和排列。这将允许我只提取需要的内容，而不是整个数据源。C# 中使用 linq 完成此任务的最佳方法是什么。

前任。

```
datasource = {Name, Age, Race, Gender, Hair Color, Eye Color, height, weight, etc}

user selected = {Name, Age, Race, Gender} 
```

我不想查询整个数据源，而是想将数据源限制为仅由用户立即引入的数据源，然后我可以根据它作为数据源进行过滤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:38:38.107

删除`.ToList()`foreach 循环中的调用。

`data = data.Where()`将使用 s 构建查询表达式`AND`。因此，在循环之后，您最终可以调用 .ToList() 来最终访问数据库。

**更新**

并且 .Select() 不是必需的。

```
data = data.Where(filter.strFilter + FormatOperator(filter.strOperator) + "@0", filter.strValue); 
```

**更新2**

哦，再次阅读您的问题后，我知道您需要使用 OR 构建查询。

使用标准库有点困难。如果您不介意引入额外的依赖项，那么可以（可能）使用[LinqKit完成](http://www.albahari.com/nutshell/predicatebuilder.aspx)

```
IQueryable<Product> SearchProducts (params string[] keywords)
{
    var predicate = PredicateBuilder.False<Product>();

    foreach (string keyword in keywords)
    {
        string temp = keyword;
        predicate = predicate.Or (p => p.Description.Contains (temp));
    }
    return dataContext.Products.Where (predicate);
} 
```

虽然我不确定它与 Dynamic Linq 的效果如何。

否则，您将不得不手工制作表达式，最终可能看起来类似于：

```
public static class IQueryableExtensions
{
    public static IQueryable<T> WhereIn<T, TValue>(
        this IQueryable<T> source,
        Expression<Func<T, TValue>> propertySelector,
        IEnumerable<TValue> values)
    {
        return source.Where(GetWhereInExpression(propertySelector, values));
    }

    private static Expression<Func<T, bool>> GetWhereInExpression<T, TValue>(
        Expression<Func<T, TValue>> propertySelector, IEnumerable<TValue> values)
    {
        if (!values.Any())
            return c => false;

        ParameterExpression p = propertySelector.Parameters.Single();

        // You'll have to adjust this:
        var equals = values.Select(value => (Expression)Expression.Equal(
                propertySelector.Body, Expression.Constant(value, typeof(TValue))));

        var body = equals.Aggregate<Expression>(
                (accumulate, equal) => Expression.Or(accumulate, equal));
        return Expression.Lambda<Func<T, bool>>(body, p);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:39:08.543

看看**[动态 Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)**

> 您可以针对任何 LINQ 数据提供程序使用 DynamicQuery 库（包括 LINQ to SQL、LINQ to Objects、LINQ to XML、LINQ to Entities、LINQ to SharePoint、LINQ to TerraServer 等）。动态查询库不使用语言运算符或类型安全的 lambda 扩展方法来构造您的 LINQ 查询，而是为您提供了基于字符串的扩展方法，您可以将任何字符串表达式传递到这些方法中。

# php - 如何在 .htaccess 文件中添加错误页面

> ID：10938656
> 
> 赞同：0
> 
> 时间：2012-06-07T19:33:46.957
> 
> 标签：php, html, .htaccess, mod-rewrite, error-handling

下面是我的`.htaccess`文件。我有一个`default_rewrite.php`文件，我从我创建的数据库中获取我的内容。

```
RewriteEngine on
RewriteRule ^/?([a-z0-9-_]*)$ default-rewrite.php?page=$1 [L] 
```

当您转到已知的断开链接 EG`http://www.example.com/test/fgdhfuis`时，它会转到我的默认重写页面，但不会转到我存储在数据库中的页面。例如

```
http://www.example.com/test/home 
```

我试过`ErrorDocument 404 /404.php`了，但这对我没有用。

任何意见是极大的赞赏。

在 PHP 编辑下方：

```
<?php
  if (!function_exists("GetSQLValueString")) {
  function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
  {
  if (PHP_VERSION < 6) {
  $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
  case "text":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;    
  case "long":
  case "int":
  $theValue = ($theValue != "") ? intval($theValue) : "NULL";
  break;
  case "double":
  $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
  break;
  case "date":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;
  case "defined":
  $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
  break;
  }
  return $theValue;
  }
  }

  $colname_Page = "home";
  if (isset($_GET['page'])) {
  $colname_Page = $_GET['page'];
  if($colname_Page == "")
  $colname_Page = "home";
  }

  mysql_select_db($database_VRMOnline, $VRMOnline);
  $query_Page = sprintf("SELECT * FROM Page WHERE PageName = %s", GetSQLValueString($colname_Page, "text"));
  $Page = mysql_query($query_Page, $VRMOnline) or die(mysql_error());
  $row_Page = mysql_fetch_assoc($Page);
  $totalRows_Page = mysql_num_rows($Page);

  mysql_select_db($database_VRMOnline, $VRMOnline);
  $query_MetaData = "SELECT * FROM MetaData WHERE MetaDataID = 1";
  $MetaData = mysql_query($query_MetaData, $VRMOnline) or die(mysql_error());
  $row_MetaData = mysql_fetch_assoc($MetaData);
  $totalRows_MetaData = mysql_num_rows($MetaData);

  ?> 
```

我试过了

```
 $colname_Page = "home";
  if (isset($_GET['page'])) {
  $colname_Page = $_GET['page'];
  if($colname_Page == "")
  $colname_Page = "home";
  if ($totalRows_Page == 0)
  {
  $colname_Page = "404-error";
  } 
```

但这会使每个页面都进入 404 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:02:14.647

查看代码后，您可以添加：

```
if ($totalRows_Page == 0)
{
 // 404 Page Logic
} 
```

在第一次查询之后，将 colname_Page 设置为等于 404 页面，您制作并放入数据库中。**或者您可以使用header('HTTP/1.0 404 Not Found')**在 PHP 中发送 404 错误；然后 Apache 应该使用您在 .htaccess 中指定的 ErroDocument 404 页面。

# html - 如何动态保存 Web 应用程序状态？

> ID：10938659
> 
> 赞同：0
> 
> 时间：2012-06-07T19:34:14.317
> 
> 标签：html, web-applications, frameworks, drag-and-drop, datapersistance

我想创建一个 Web 应用程序，用户可以在其中将图像和文本拖放到一个`div`或类似的容器上。然后，当用户单击保存按钮时，应用程序将能够保存拖放项目的内容，以及这些项目的位置信息。

最终，用户应该能够返回，然后打开应用程序，并将图像和文本恢复到与保存时完全相同的位置。

如果有人知道可以帮助实现这一目标的方法或框架，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:01:48.443

当用户点击保存按钮时，您将需要收集当前网页的动态状态（听起来像图像和位置）并将其发送到您的服务器，并使用某种唯一且安全地标识该用户的用户 ID。下次用户加载此网页时，您可以将状态放入网页中，因为它是从服务器检索的，或者您可以使用客户端 JavaScript 从服务器检索该用户的状态，然后将页面动态修改为匹配所需的状态。

您可以使用 ajax 调用或 post 将状态保存到服务器。您可以使用 ajax 调用从客户端 javascript 从服务器检索状态，或者如果服务器已经将状态放入网页中，您可以在那里引用它。

# xcode - Xcode Webview 打开网址

> ID：10938660
> 
> 赞同：1
> 
> 时间：2012-06-07T19:34:20.087
> 
> 标签：xcode, url, webview, launch

我正在尝试开发一个 web 浏览器，它将在启动后显示一个网站。我已经把文章加红了，我似乎无法让它与这段代码一起工作。

```
NSURL*url=[NSURL URLWithString:@"http://www.google.com"];
NSURLRequest*request=[NSURLRequest requestWithURL:url];
[[webview mainFrame] loadRequest:request]; 
```

我正在使用 cocoa 和 Webkit Framework 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T18:01:42.213

尝试这个：

```
- (void)applicationDidFinishLaunching:(NSNotification *)notification{
    NSString *urlText = @"http://google.com";
    [[myWebView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlText]]];
    return;
} 
```

如果这不起作用，试试这个：

```
- (void)awakeFromNib{
    NSString *urlText = @"http://google.com";
    [[myWebView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlText]]];
    return;
} 
```

祝你好运！告诉我这是否有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:42:05.800

利用 -

```
[webview loadRequest:request]; 
```

# sql-server-2008 - 从 varchar 字段中删除单个字符 SQL Server 2008

> ID：10938666
> 
> 赞同：16
> 
> 时间：2012-06-07T19:34:46.677
> 
> 标签：sql-server-2008, tsql

我有一个表，其中的几`varchar`列几乎与我在另一个表中的主键相同，但句点 ( `.`) 除外。我查看了`replace`T-SQL 中的函数，但第一个参数不是表达式。如何使用 SQL 删除所有出现的特定字符？似乎正确的答案可能是用零长度字符串替换。这么近吗？

无论谁觉得这个问题没有表现出研究工作，这主要是由于对文档本身的误解。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-07T19:37:44.877

您可以直接使用`REPLACE`列值更新表：

```
UPDATE myTable
SET myColumn = REPLACE(myColumn, '.', '') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T19:37:26.670

是否要删除 . 从字符串？如果是这样，你是对的`REPLACE`：

```
DECLARE @Example TABLE
(
    Value VARCHAR(100)
)
INSERT @Example (Value)
VALUES ('Test.Value'), ('An.otherT.est')

SELECT
    REPLACE(Value, '.', '')
FROM
    @Example

-- Replace only the first '.'
SELECT
    STUFF(Value, CHARINDEX('.', Value, 0), 1, '')
FROM
    @Example 
```

编辑，使示例更加有用，因为无论如何我都在玩它，我不妨发布示例。:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-07T19:38:15.723

```
update your_table
set some_column = replace(some_column, '.', '') 
```

# javascript - 如何减少服务器“等待”时间？

> ID：10938682
> 
> 赞同：36
> 
> 时间：2012-06-07T19:36:44.877
> 
> 标签：javascript, performance, apache, networking

我正在尝试优化我网站的速度，我正在使用[pingdom.com](http://tools.pingdom.com/fpt/)上的出色工具。现在，加载页面所需的时间超过 50% 是“等待”时间，如下面的屏幕截图所示。我能做些什么来减少这种情况？另外，这个数字有多典型？有这方面的基准吗？谢谢！

![服务器等待时间长](../Images/f560e8ebe1ba29696a4fac2dada34acb.png)

**编辑：** 好的..让我澄清一些事情。没有服务器端脚本或数据库调用正在进行。只有 HTML、CSS、JS 和图像。我已经做了一些事情，比如将 js 推送到 body 标签的末尾以获得并行下载。我知道 main.html 和 templates.html 通过在 js.js 下载后同步完成而增加了整体等待时间，这不是问题。我只是对每个请求有多少“等待”时间感到惊讶。服务器距离会影响这个吗？在共享服务器上怎么样，这会影响等待时间吗？是否有任何容易实现的成果来解决这些问题？

![在此处输入图像描述](../Images/93fadd078b79d1c30d4757bf2579d10b.png)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-02T19:29:43.253

对于 Apache，最常见的原因是使用了 DNS 反向查找。这意味着每次您发出请求时，服务器都会尝试找出您机器的名称。这可能需要几秒钟，这解释了为什么您有很长的等待时间，然后加载非常快，因为问题与带宽无关。

显而易见的解决方案是在 /etc/httpd/conf/httpd.conf 中禁用主机名查找

```
HostnameLookups Off 
```

然而……这通常是不够的。事实是，在许多情况下，即使您禁用了主机名查找，apache 仍然会进行反向查找，因此您需要仔细查看 apache 配置的每一行。特别是，最常见的原因之一是日志。默认情况下，在许多 red hat - centos 安装中，日志格式包括代表“主机名”的 %h，并且需要 apache 进行反向查找。你可以在这里看到这个：

```
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %b" common 
```

您应该将那些 %h 更改为 %a 以解决此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:06:27.553

如果您有多个页面正在等待的服务器请求，您可以确保这些服务器请求是并行异步发送的，以便您对它们进行序列化。

获取多个请求的最慢方法是发送一个请求，等待其响应，发送下一个请求，等待其响应等...异步发送所有请求然后在所有响应到达时处理它们通常要快得多. 这将总等待时间缩短为任何单个请求的最长等待时间，而不是所有请求的累积等待时间。

如果您只发出一个请求，那么您在客户端所能做的就是确保在页面加载顺序中尽早将请求发送到服务器，以便页面的其他部分可以在处理请求的同时开展业务，从而更快地启动初始请求（从而更快地完成）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T19:47:45.467

等待时间，也称为[第一个字节](http://en.wikipedia.org/wiki/Time_To_First_Byte)的时间，是服务器从启动连接开始发送第一个字节所需的时间。如果这个值很高，则意味着您的服务器在发送页面之前必须做很多工作来呈现页面。我们需要更多关于您的网站正在做什么来呈现页面的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-12T18:56:05.663

TTFB 直接受浏览器和服务器之间的“物理”距离的影响。CDN 代理是缩短上述距离的最佳方式。这与本机缓存功能相结合，将有助于通过从最近的 POP（放置点）位置加载缓存对象来提供更快的响应。

效果将取决于用户的地理位置和 CDN 的传播。尽管如此，您仍然可以期待50%-70% 或更多的[显着改进。](http://www.incapsula.com/the-incapsula-blog/item/718-what-incapsula-free-did-for-my-site)

根据经验，我看到 90% 的内容被缓存并直接从位于不同大陆、来自地球另一端的代理传送。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-07T19:40:52.550

这是服务器的问题...根据 Pingdom 的说法，“Web 浏览器正在等待来自服务器的数据”是定义“等待”时间的原因。

您无法从 javascript 或代码端做很多事情来解决此问题。

# c++ - 如何在 C++ 中的 .txt 文件中添加名称：在名称之前和 $ 在数字之前

> ID：10938691
> 
> 赞同：0
> 
> 时间：2012-06-07T19:37:30.773
> 
> 标签：c++

我无法弄清楚如何做到这一点：

我必须从一个 .txt 文件中读取，其中一行包含一个名称，然后是下一行的价格，并继续大约 10 次。（即文本文件说：

约翰·多伊

234.0

简·多伊

465.0

我必须在姓名前面打印“姓名”，在号码前面打印“工资：”。我该怎么做？我什至不知道从哪里开始！

编辑：到目前为止我所拥有的：

```
#include<iostream>
#include<iomanip>
#include<fstream>
#include<string>
using namespace std;

int main()

{
ifstream infile("wage.txt");
ofstream outfile("wage.txt");
string line;
if(infile.is_open){
    while(!infile){
        getline(infile,line);
        if (isdigit(line)){
            cout<<"$"<<line<<endl;
    }
}
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:31:12.793

我大约 90% 确定您将不得不读入整个文本文件，然后完全覆盖它。
文本文件本质上是一系列字符，我不相信它们支持实际插入。

您可以采用多种方法，我可能会将文件加载到一些包含名称和数量的结构中，然后以正确的格式重新生成文件。

另一种方法是创建一个新文件，并基于旧文件构建它，但格式正确除外，然后删除旧文件并将新文件重命名为正确的名称。

# javascript - 为什么javascript对象在遍历数组时输出为“未定义”？

> ID：10938692
> 
> 赞同：3
> 
> 时间：2012-06-07T19:37:31.803
> 
> 标签：javascript

你可以在这里看到一个工作示例：

[http://jsfiddle.net/bwhitney/ZDHp4/1/](http://jsfiddle.net/bwhitney/ZDHp4/1/)

我正在尝试在 javascript 中创建一个对象数组。当我尝试访问对象时，我得到“未定义”的输出。这是一些示例代码：

```
var dates = [];

var beginDate1 = new Date("01 / 01 / 01");
var endDate1 = new Date("02 / 02 / 02");
var beginDate2 = new Date("03 / 03 / 03");
var endDate2 = new Date("04 / 04 / 04");

// this outputs the correct dates
alert("before: " + beginDate1 + "--" + endDate1);
alert("before: " + beginDate2 + "--" + endDate2);

dates.push({
    "beginDate": beginDate1,
    "endDate": endDate1
}, {
    "beginDate": beginDate2,
    "endDate": endDate2
});

var date;
for (date in dates) {
    // this outputs "date: undefined--undefined"
    // why would that be?
    alert("after: " + date.beginDate + "--" + date.endDate);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T19:38:58.747

JavaScript 中的`for ... in`循环为您提供对象中的**键**，而不是值。

但是，您确实应该使用数字索引：

```
for (var date = 0; date < dates.length; ++date) {
  alert("date " + date + " is: " + dates[date]);
} 
```

遍历键`for ... in`不会只拾取数字索引的数组元素；它对数组进行操作，就好像它们是普通的对象一样。其他属性也会被选中，而且你甚至不能保证它会按数字升序排列！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:39:06.580

每个循环中的常见错误。`date`是 的索引`dates`。你应该写：`dates[date].beginDate`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:39:01.613

当使用 for..in 循环时，变量被分配了键，而不是值！

```
for (date in dates) {
    alert('after: ' + dates[date].beginDate ...);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:45:08.803

`for ... in`不适用于数组，您可以使用`for`像这样的常规小提琴：http: [//jsfiddle.net/bwhitney/ZDHp4/1/](http://jsfiddle.net/bwhitney/ZDHp4/1/)

参考：[为什么在数组迭代中使用“for...in”是个坏主意？](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)

# cocos2d-iphone - Cocos2d 2.0 - 改变一个CCLayer的规模

> ID：10938697
> 
> 赞同：0
> 
> 时间：2012-06-07T19:37:54.457
> 
> 标签：cocos2d-iphone

我有一个有子 CCSprite 的 CCLayer 类（是的，它必须是 CCLayer，而不是 CCSprite）。我需要更改该图层的不透明度和比例，换句话说，我必须更改该图层所有子项的不透明度和比例。

我今天了解到我可以扩展 CClayer 类，使用它来处理孩子的不透明度......

```
#import "CCLayer+Opaque.h"

@implementation CCLayer (CCLayer_Opaque)
// Set the opacity of all of our children that support it
-(void) setOpacity: (GLubyte) opacity
{
    for( CCNode *node in [self children] )
    {
        if( [node conformsToProtocol:@protocol( CCRGBAProtocol)] )
        {
            [(id<CCRGBAProtocol>) node setOpacity: opacity];
        }
    }
}
- (GLubyte)opacity {
    for (CCNode *node in [self children]) {
        if ([node conformsToProtocol:@protocol(CCRGBAProtocol)]) {
            return [(id<CCRGBAProtocol>)node opacity];
        }
    }
    return 255;
}
@end 
```

我这样做并在我的主类中导入了文件，但是当我尝试设置该 CCLayer 的不透明度时仍然看到此错误：**找到多个名为“不透明度”的方法**

我还超越了这一点，并将其添加到类扩展中：

```
-(void) setScale: (CGFloat) scale
{
    for( CCNode *node in [self children] )
    {
            [node setScale: scale];
    }
}

-(CGFloat) scale
{
    for( CCNode *node in [self children] )
    {
            return [node scale];
    }
    return 1.0f;
} 
```

处理尺度，使用相同的思路，但也看到消息**multiple methods named 'scale' found**

在简历中：如何扩展 CCLayer 类以使 CCLayer 的所有子级更改比例或更改不透明度？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:51:52.233

我发现了问题。我必须将类转换为 CClayer 对象才能读取或设置不透明度......

例子：

```
[(CCLayer*)obj setScale:0.5f]; 
```

现在它正在工作。谢谢。

# android - 没有这样的列错误 SQLite Android

> ID：10938698
> 
> 赞同：0
> 
> 时间：2012-06-07T19:37:56.750
> 
> 标签：android, sqlite

我有下一个代码来创建我的数据库..

```
public class ModeloPaciente extends SQLiteOpenHelper {
//Tabla Proposicion Condicional
static final String proposicionCondicionalTabla="ProposicionCondicional";
static final String colproposicionCondicionalID="ProposicionCondicionalID";
static final String colproposicionCondicionalDescripcion="ProposicionCondicionalDescripcion";
static final String colproposicionCondicionalcuandoInferirForeign="CuandoInferir";

public ModeloPaciente(Context context) {
    super(context, dbName, null, 1);
}

@Override
public void onCreate(SQLiteDatabase db) {    

db.execSQL("CREATE TABLE "+proposicionCondicionalTabla+" " +
"("+colproposicionCondicionalID+ " INTEGER PRIMARY KEY AUTOINCREMENT, " +
colproposicionCondicionalDescripcion+ " TEXT NOT NULL," +
colproposicionCondicionalcuandoInferirForeign+" INTEGER NOT NULL,"+
"FOREIGN KEY ("+colproposicionCondicionalcuandoInferirForeign+") REFERENCES    "+cuandoInferirTabla+"    
("+colcuandoInferirID+"));");             
} 
```

后来我像这样将数据放入表中

```
public boolean insertarProposicion(Proposicion proposicion) {
    try {
           SQLiteDatabase db=this.getWritableDatabase();
           ContentValues cv= new ContentValues();
           cv.put(colproposicionCondicionalDescripcion, proposicion.getProposicionCondicionalDescripcion());               
           cv.put(colproposicionCondicionalcuandoInferirForeign, getCuandoInferirID(proposicion.getProposicionCondicionalCuandoInferirForeign()));
           db.insert(proposicionCondicionalTabla, colproposicionCondicionalID, cv);
         //db.close();
           return true;
    } catch (Exception e) {
        System.out.println(e);
        return false;
    } 
```

但我收到一条错误消息：

```
06-07 15:36:15.507: E/Database(257): Error inserting CuandoInferir=1 ProposicionCondicionalDescripcion=Se debe inferir acerca de los dias de marcha realizados o no
06-07 15:36:15.507: E/Database(257): android.database.sqlite.SQLiteException: no such column: CuandoInferir: , while compiling: INSERT INTO ProposicionCondicional(CuandoInferir, ProposicionCondicionalDescripcion) VALUES(?, ?); 
```

我检查了数据库，它有相应的列“CuandoInferir”..¿发生了什么，我不知道？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:09:31.430

您可能正在使用旧版本的数据库。清除您应用的数据，然后重试：

`Settings`--> `Applications`--> `Manage applications`--> `[your app]`-->`Clear data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:04:43.947

您的代码看起来不错，但是我会检查现有数据库。检查“ProposicionCondicional”表中的列名。您可以按照以下步骤在 sqlite3 中打开数据库来完成此操作（显然，在执行这些步骤之前将手机连接到 PC）

```
adb shell
cd /data/data/<your.applications.package>/databases
sqlite3 <databases_name>
.schema 
```

看看表是否真的有“CuandoInferir”列。如果没有，请尝试重新创建表。

# python - 逐行读取文件并打印是否包含两个不同的字符串

> ID：10938699
> 
> 赞同：0
> 
> 时间：2012-06-07T19:38:01.333
> 
> 标签：python

因此，我有一个名为“clears”的文件，我想查看一行是否包含列表中的两个不同字符串，如果是，则打印这些行我无法正常工作。

```
for pos in positions:
    for line in open('clears'):
        if pos[0] and pos[3] in line:
            print line 
```

我也试过f

```
or pos in positions:
        for line in open('clears'):
            if pos[0] in line and pos[3] in line:
                print line 
```

这就是我尝试过的，但`TypeError: 'in <string>' requires string as left operand` 如果只有一个条件，我可以打印它，但如果有两个条件，我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:40:22.130

我猜你的意思是这个（编辑，回到第一个版本）：

```
for pos in positions:
    for line in open('clears'):
        if pos[0] in line and pos[3] in line:
            print line 
```

而且， 的元素`pos`必须是字符串。

# php - perl 到 php 数据传递

> ID：10938702
> 
> 赞同：-1
> 
> 时间：2012-06-07T19:38:15.857
> 
> 标签：php, xml, json, perl, sqlite

我有一个 perl 文件和一个 php 文件。我需要将 perl 文件中的一个大哈希传递给 php。

perl 文件生成的数据需要存储在一个文件中。这个 php 必须读取这个文件并修改它。这个修改后的文件需要被 perl 读回并做一些其他的操作。

要共享的数据是一个 perl 散列，它非常大并且也有很多内部数组。

我试图将哈希存储到 json 并在 php 中读取它，但我失败了。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:31:33.230

看看[php 序列化](http://php.net/manual/en/function.serialize.php)和这个[perl 模块](http://search.cpan.org/~bobtfish/PHP-Serialization-0.34/lib/PHP/Serialization.pm)。它是一种在两种语言之间交换数据结构作为简单字符串的简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:48:40.817

对于让多个源访问相同的数据存储，数据库是最典型的选择，认为文本文件可以同样工作。

所以要回答你的问题 - 是的，还有其他创建公共数据存储的方法 - 数据库和数据库库、CSV、Excel 等。对于每个选择，你都需要熟悉 perl 和 PHP api 才能访问它 - 你可以发现它比在纯文本中使用 JSON 更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:52:33.343

```
$data = json_decode(file_get_contents('my_data.json'), true);

# PROCESS DATA

file_put_contents('my_data.json',
                  preg_replace('/\\\\u([a-f0-9]{4})/e',
                               'iconv("UCS-4LE",
                                      "UTF-8",
                                       pack("V",
                                       hexdec("U$1")))',
                  json_encode($data))); 
```

preg_replace 处理 PHP 通常为 unicode 字符输出的丑陋的“\uXXXX”序列。如果你有 PHP 5.4+ 这应该可以代替：

```
file_put_contents('my_data.json', json_encode($data, JSON_UNESCAPED_UNICODE)); 
```

如其他答案之一所述，如果您需要进行大量阅读和写作，请考虑使用数据库。

# c# - 来自多线程应用程序的数据库表插入锁

> ID：10938703
> 
> 赞同：12
> 
> 时间：2012-06-07T19:38:16.450
> 
> 标签：c#, .net, sql-server, multithreading, sql-server-2008

我有一个运行多线程的进程。

Process 具有要处理的项目的线程安全集合。

每个线程循环处理集合中的项目。

列表中的每个项目由线程发送到存储过程，以将数据插入事务中的 3 个表中（在 sql 中）。如果一个插入失败，则三个都失败。请注意，交易范围是每件商品。

插入非常简单，只需在每个表中插入一行（与外键相关），并带有标识种子。没有读取，只需插入然后继续下一项。

如果我有多个线程试图处理他们自己的项目，每个项目都试图插入到同一组表中，这是否会由于事务锁而产生死锁、超时或任何其他问题？

我知道每个线程必须使用一个数据库连接，我主要关心每个事务中表的锁定级别。当一个线程向 3 个表中插入行时，其他线程是否必须等待？每个表的行没有依赖性，除了需要增加自动标识。如果是表级锁来增加标识，那么我想其他线程将不得不等待。插入件有时可能很快，也可能不快。如果它必须等待，那么做多线程是否有意义？

多线程的目标是加速项目的处理。

请分享你的经验。

PS：身份种子不是 GUID。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T22:10:06.797

在 SQL Server 中，对单个表的多次插入通常不会相互阻塞。IDENTITY 生成机制是高度并发的，因此它不会序列化访问。如果在唯一索引中插入相同的键，插入*可能会*相互阻塞（如果两者都尝试提交，其中一个也会遇到重复键违规）。你也有一个概率游戏，因为密钥是散列的，但它只在大型事务中发挥作用，请参阅[%%LOCKRES%% COLLISION PROBABILITY MAGIC MARKER: 16,777,215](http://rusanu.com/2009/05/29/lockres-collision-probability-magic-marker-16777215/)。如果事务插入到多个表中也不应该有冲突，只要插入的键是不相交的（如果插入是主-子-子，这自然会发生）。

话虽如此，二级索引和特别是外键约束的存在*可能会*引入阻塞和可能的死锁。如果没有准确的架构定义，就无法判断您是否容易出现死锁。任何其他工作负载（报告、读取、维护）也会增加争用问题，并可能导致阻塞和死锁。

非常非常高端的部署（不需要在论坛上寻求建议的那种......）可能会出现插入热点症状，请参阅[解决高并发 INSERT 工作负载上的 PAGELATCH 争用](http://sqlcat.com/sqlcat/b/technicalnotes/archive/2009/09/22/resolving-pagelatch-contention-on-highly-concurrent-insert-workloads-part-1.aspx)

顺便说一句，从多个线程执行 INSERT 很少是增加负载吞吐量的正确答案。有关如何解决*该*问题的好建议，请参阅[数据加载性能指南。](http://msdn.microsoft.com/en-us/library/dd425070%28v=sql.100%29.aspx)最后一个建议：多线程也很少是使*任何*程序更快的答案。异步编程几乎总是正确的答案。见和。**[`AsynchronousProcessing`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.asynchronousprocessing.aspx)[`BeginExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.beginexecutenonquery.aspx)**

 **作为旁注：

> 只需在每个表中插入一行（与外键相关），......没有读取，

这种说法实际上是自相矛盾的。外键意味着读取，因为它们必须在写入期间进行验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T21:53:40.353

是什么让您认为如果有身份，它必须是表级锁。我在任何文档中都没有看到这一点，我只是在带有标识列的表上测试了带有 (rowlock) 的插入，它可以工作。

要最小化锁定，请使用行锁。对于所有存储过程，以相同的顺序更新表。

你有插入三个表，每个表最多需要 10 秒？我在事务中插入了一些插入多个表（其中一些很大）并获得 100 / 秒。

检查您的表设计和键。如果您可以选择一个代表插入顺序的集群 PK，并且如果您可以在插入之前进行排序，它将产生巨大的差异。查看是否需要任何其他索引。如果您必须有其他索引，则监视碎片和碎片整理。

相关但不一样。我有一个数据加载器，它必须解析一些数据，然后每晚加载数百万行但不在事务中。它从空表开始优化了 4 个并行进程，但问题是在加载两个小时后，由于碎片，吞吐量下降了 10 倍。我重新设计了表，因此 PK 聚集索引按插入顺序排列。删除了未产生至少 50% 选择凸起的任何其他索引。在每晚插入第一次删除（禁用）索引并仅使用两个线程。一个要解析的线程，一个要插入的线程。然后我在加载结束时重新创建索引。在 4 个线程锤击索引时得到了 100:1 的改进。是的，您有不同的问题，但请查看您的表格。我经常认为添加索引是为了小选择的好处，而不考虑插入和更新的命中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T20:47:50.187

像 mssql 这样的重型 DBMS 通常非常非常擅长处理并发性。您同时执行的事务究竟会发生什么很大程度上取决于您的 TI 级别 ( [http://msdn.microsoft.com/en-us/library/ms175909%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms173763%28v=sql.105%29.aspx "TI等级") )，您可以将其设置为你认为合适，但在这种情况下，我认为你不需要担心死锁。

无论它是否有意义 - 在不了解您的系统的情况下总是很难猜测。不过尝试起来并不难，所以你可以自己找出来。如果我猜的话，我会说如果你所有的线程都要做的是以循环方式插入行，那对你没有多大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T21:37:05.773

其他线程无论如何都会等待，你的电脑不能真正执行比你在每个给定时刻拥有的 cpu 内核更多的线程。
您写道您想使用多线程来加快处理速度。我不确定这是您可以自动将其视为给定/正确的东西。并行度及其对处理速度的影响取决于许多因素，这些因素非常依赖于处理，例如是否涉及 IO，或者每个线程是否应该只在内存处理中进行。我认为这是微软在其 tpl 框架中提供任务调度程序的原因之一，并且通常将此库中的并发视为应该在运行时设置的东西。
我认为您最安全的选择是运行测试查询/进程以查看究竟发生了什么（当然，它仍然不会 100% 准确）。您还可以查看 sql server 的[optimisitc 并发](http://msdn.microsoft.com/en-us/library/ms171845.aspx)特性，它允许无锁工作（我不确定它如何处理标识列）**

# jquery - 带有视图的对话框 - CakePHP

> ID：10938704
> 
> 赞同：3
> 
> 时间：2012-06-07T19:38:16.780
> 
> 标签：jquery, html, cakephp, hyperlink, dialog

当我点击页面上的示例链接按钮时，会弹出一个简单的对话框。我想要做的是将 onclick jquery 函数从链接更改为我表中的一个按钮。这些按钮当前将 Web 浏览器定向到新页面，但我希望它们打开带有相应视图文件的 dailog 框。我正在使用 CakePHP 2.x。我研究过使用 href 但我不知道该怎么做。

这是按钮所在的 index.ctp 文件的代码。

```
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/start/jquery-ui.css" type="text/css" media="all" />

<a href="#">link</a>   <!-- this is to test if the dialog box works -->
<div id="dialog"></div>

<script>
var p = '<p>test test test test test test</p>';
$('#viewButton').click(function()
{
//  $(location).attr('href', 'view.ctp');  // not sure if this line of code is on the right track or not
    $(p).dialog(
    {
        width: 400,
        height: 400,
        modal: true,
        resizable: true,
        buttons:{
            OK: function(){
                $(this).dialog("close");}}
    });
})
</script>

<p><marquee><u>Local Clocks</u></marquee></p>

<table>
    <thead><tr>
        <th>Id</th>
        <th>Name</th>
        <th>Actions</th>
    </tr></thead>
<tbody>

<?php 
foreach($localClocks as $LocalClock) { ?>

<tr>
    <!-- <td><?php //echo $LocalClock['LocalClock']['id']; ?></td> -->
    <td><?php echo $this->Html->link($LocalClock['LocalClock']['id'], array('controller'=>'localClocks', 
    'action'=>'view', $LocalClock['LocalClock']['id'])); ?></td> 

    <td><?php echo $LocalClock['LocalClock']['name']; ?></td>

<td><input type="button" class="viewButton" value="View" onclick="location.href='<?php echo $this->Html->url(array('controller' => 'localClocks', 'action' => 'view', $LocalClock['LocalClock']['id'])); ?>';"/>
<input type="button" class="editButton" value="Edit" onclick="location.href='<?php echo $this->Html->url(array('controller' => 'localClocks', 'action' => 'edit', $LocalClock['LocalClock']['id'])); ?>';"/>
    </td>
</tr>

<?php } ?>

</tbody>
</table> 
```

我需要帮助将按钮 onclick 事件切换为打开对话框并让对话框显示相应的视图页面。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T18:21:50.150

这是我能够做到这一点的方法。我希望它可以帮助其他人。

首先将空白 div 添加到带有 id 的索引页面中。

```
<div id="view_dialog"></div> 
```

然后，使用 jQuery 创建一个函数以从该 div 中创建一个对话框。

```
 <script>
$(function()
{
    var $dialog = $("#view_dialog").dialog(
        {
            autoOpen: false,
            title: 'View Local Clock',
            height: 200,
            width: 1200,
            resizable: true,
            modal: true,
            buttons:
            {
                "Ok": function()
                {
                    $(this).dialog("close");
                }
            }
        });
    $(".view_dialog").click(function()
    {
        $dialog.load($(this).attr('href'), function ()
                {
                    $dialog.dialog('open');
                });
        return false;
    });
});
</script> 
```

最后，创建按钮/链接。

```
<?php echo $this->Html->link('View', array('action' => 'view', $LocalClock['LocalClock']['id']), array('class' => 'view_dialog')); ?> 
```

当我单击在对话框中显示该项目的特定信息的视图链接时，此代码允许我打开一个对话框。

# ruby-on-rails - Rails 2.3.5 IN 的 Active Record 条件问题

> ID：10938707
> 
> 赞同：0
> 
> 时间：2012-06-07T19:38:29.417
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord, ruby-on-rails-2

我在使用带有 postgres 的 rails 2 中的活动记录条件时遇到问题。我的问题是我何时尝试使用此查询（我正在使用 geokit，但这不是问题）

```
Table.all(:conditions => ["id IN (?)", id_array.join(",")], :origin => origin, :within => 20) 
```

我遇到了这个问题：

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  invalid input syntax for integer: "21,28"
LINE X: ...OM "tables" WHERE (((id IN (E'21,28... 
```

为什么将“E”放在那里以及如何摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:52:38.567

使用`id_array.join(",")`，您将单个字符串传递给函数。由于在生成的 SQL 查询中所有字符串都被转义并被单引号包围，因此您自然会得到 SQL 错误，因为在此`IN`语句中您只能使用逗号分隔的整数。

简单的解决方案是直接将数组传递给函数。ActiveRecord 然后自行在 SQL 中创建正确的值。你可以像这样使用它：

```
Table.all(:conditions => ["id IN (?)", id_array], :origin => origin, :within => 20) 
```

或者，您可以使用这种更类似于 ruby​​ 的语法来生成完全相同的 SQL 查询：

```
Table.all(:conditions => {:id => id_array}, :origin => origin, :within => 20) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:49:37.543

您已经被引导到不同的路径。但要回答你的问题：

> 为什么要在里面放“E”...

那是[PostgreSQL 的转义字符串语法](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-STRINGS-ESCAPE)。PostgreSQL 的默认行为在 9.1 版本中发生了变化，不再解释反斜杠转义，除非`E`在开头的单引号前面有一个。新行为反映了 SQL 标准。

```
 'one backslash: \'  -- backslash has no special meaning in Postgres 9.1
E'one backslash: \\' -- must use E'' syntax to interpret escape sequences 
```

一些客户端安全地使用它并将 放在*每个*`E`字符串文字的前面以获得相同的行为，而不管 PostgreSQL 版本或特定的设置。其他人向服务器询问设置并相应地调整语法。无论哪种方式，在不包含反斜杠的字符串文字前面放置一个（非常少的）CPU 周期都是一种浪费。*[`standard_conforming_strings`](http://www.postgresql.org/docs/current/interactive/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)`E`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:51:53.920

我认为你不需要加入价值观。即使在 Rails 2 中。也就是说，试试这个：

```
Table.all(:conditions => ["id IN (?)", id_array], :origin => origin, :within => 20) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:52:02.647

试试这个：

```
Table.all(:conditions => ["id IN (#{id_array.join(",")})"], :origin => origin, :within => 20 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-15T18:18:56.553

我在 mysql 尝试运行 count() 函数时遇到了同样的问题，我用来修复它的语法是

```
Issue.all(:conditions => "status_id IN (5, 15, 19, 21, 25)").count 
```*

# android - Android布局对齐不起作用

> ID：10938708
> 
> 赞同：0
> 
> 时间：2012-06-07T19:38:30.150
> 
> 标签：android, layout, alignment, android-relativelayout, gravity

这就是结果，这不是我们想要的。文本应左对齐。复选框应向右对齐。超长的文本应该稍微压扁，以便为右侧的单选按钮留出空间。

[![](../Images/d68163e682f494c37ddd0d7666457e4c.png)](https://i.stack.imgur.com/prSPO.png)

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:layout_margin="10dp"
android:padding="5dp">

<TextView android:id="@+id/itemCaption"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true" 
    android:textSize="13dp"
    android:textColor="#feee"/> 

<RadioButton
    android:id="@+id/itemRadioBox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:layout_marginRight="5dp"
    android:layout_alignParentRight="true" 
    android:layout_centerVertical="true" 
    android:layout_toRightOf="@+id/itemCaption"
    android:text="" />

</RelativeLayout> 
```

如何修复它以根据需要显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:41:52.083

你的线路

```
android:layout_toRightOf="@+id/itemCaption" 
```

优先于您的线路

```
android:layout_alignParentRight="true" 
```

尝试删除 android:layout_toRightOf="@+id/itemCaption" 行！！！

# php - 使用 php 套接字以特定的数据包格式发送数据

> ID：10938711
> 
> 赞同：1
> 
> 时间：2012-06-07T19:38:47.620
> 
> 标签：php, sockets, packets

我必须以 TCP 纯数据包的格式发送一些数据。我已阅读并理解如何使用套接字发送数据，但我找不到任何有关如何以特定格式创建数据包的帮助。我会很感激一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:45:35.747

您需要查找[pack](http://php.net/manual/en/function.pack.php)以创建特定格式的二进制数据包。

# javascript - Jquery淡出 - 等待完成 - 然后删除

> ID：10938713
> 
> 赞同：2
> 
> 时间：2012-06-07T19:38:57.730
> 
> 标签：javascript, jquery

大家晚上好。我正在尝试使用 Jquery 淡出到具有唯一 id 的有效但之后，我删除了也有效的简单函数 removeElement。我的问题是 removeElement 函数启动得如此之快，以至于您看不到淡出的缓慢过渡。我尝试使用 Javascript 本机 setTimeout 函数，但仍然没有帮助。

```
var elem_comment_release_container = 'release_' + release_id + '_comment_' + comment_release_id;

//fade to <TR>...nice effect
$("#" + elem_comment_release_container).fadeTo('slow','0.00');

//removeElement(elem_comment_release_container)
setTimeout(removeElement(elem_comment_release_container),31000); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:40:15.827

从回调中移除：

```
$("#foo1").fadeOut("slow", function(){
    $(this).remove();
}); 
```

# websphere - Websphere RMI 连接问题

> ID：10938719
> 
> 赞同：0
> 
> 时间：2012-06-07T19:39:13.380
> 
> 标签：websphere, rmi

我的开发环境有 2 个 EJB RMI 客户端（不同的 ips），通过 IBMWebsphere 6.1 应用程序服务器连接相同的 EJB 客户端提供程序 URL。虽然我增加来自每个客户端的请求，但一个客户端给出 java.io.IOException：不匹配的序列化问题。Websphere ORB 侦听器线程池大小是 min- 10 max-50。这可能是什么问题？

java.io.IOException：序列化 UID 不匹配：源（Rep.IDRMI:com.dfn.mtr.enums.ErrorCode:3762E1FD1A6B1BE5:601BEBFDABC9F5DC）= 601BEBFDABC9F5DC 而目标（Rep.ID RMI:com.dfn.mtr.enums.ErrorCode: 3762E1FD1A6B1BE5:CD1A966626885A23) = CD1A966626885A23 在 com.ibm.rmi.util.RepositoryId.useFullValueDescription(RepositoryId.java:727) 在 com.ibm.rmi.io.IIOPInputStream.useFullValueDescription(IIOPInputStream.java:1288) 在 com.ibm.rmi .io.IIOPInputStream.readSerializable(IIOPInputStream.java:1031) 在 com.ibm.rmi.io.IIOPInputStream.simpleReadObjectInternal(IIOPInputStream.java:317) 在 com.ibm.rmi.io.IIOPInputStream.simpleReadObjectLoop(IIOPInputStream.java:394) ) 在 com.ibm.rmi.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:348) 在 com.ibm.rmi.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:200) 在 com.ibm.rmi.iiop.CDRInputStream.read_value(CDRInputStream.java:1897)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:58:10.470

这可能是 IBM 告诉您客户端和服务器之间的`serialVersionUID`值`com.dfn.mtr.enums.ErrorCode`不匹配的方式，尽管再次因为它是 RMI/IIOP，我看不出 serialVersionUIDs 会出现在哪里。无论如何，显然 .class 文件并不相同。

# java - 是否有类似 user.home 的东西来获取 java 中的 \Users\Public 目录？

> ID：10938724
> 
> 赞同：2
> 
> 时间：2012-06-07T19:39:40.603
> 
> 标签：java, windows-7, file-io, filewriter

我想使用 Users\Public 目录来编写一些文件以便在帐户之间轻松共享，有没有办法将其作为 Java 中的系统变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:56:34.903

找到公共目录的方法是

```
System.getenv("PUBLIC"); 
```

这应该得到类似的东西`C:\Users\Public`，或者如果您的主驱动器`D:`是`D:\Users\Public`.

[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Environment_variable#Default_Values_on_Microsoft_Windows)是 Windows 环境变量的一个很好的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:13:15.020

我没有要检查的 Windows 7，但如果该公共目录存储在环境变量中（例如 %APPHOME% 或 %USERPROFILE%），您可以使用检索其值`System.getenv()`

[http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getenv(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getenv(java.lang.String) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:44:59.047

您需要使用 System object

```
System.getProperty("user.home"); 
```

应该得到你所需要的。

# html - 网站自定义地图

> ID：10938726
> 
> 赞同：0
> 
> 时间：2012-06-07T19:39:54.457
> 
> 标签：html, flash, google-maps

我有一个工厂的概览图，我想展示重要的设备。每件设备都会显示一些描述信息，并且只要将鼠标悬停在上面就会有一个链接。

我希望整个东西的功能类似于谷歌地图，在那里我可以放大和平移。

我一直在尝试让基本的平移和缩放功能在 Flash 中工作，但是有更好的方法来开发它吗？也许不涉及 Flash 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:50:30.407

如果您想使用无闪存、无谷歌地图的插件，您可以将[http://wayfarerweb.com/jquery/plugins/mapbox/](http://wayfarerweb.com/jquery/plugins/mapbox/)与一些用于鼠标悬停行为的 jQuery 结合起来。

当然，这取决于您使用 jQuery 的舒适程度，地图本身的实现非常简单（它具有缩放和平移功能），并且悬停并不复杂，但如果您以前没有使用过 javascript，则需要更多的研究。好处是你可以完全控制它......

# hash - DynamoDB：如何使用哈希键？

> ID：10938727
> 
> 赞同：2
> 
> 时间：2012-06-07T19:39:55.143
> 
> 标签：hash, amazon-dynamodb

我最近正在研究 Amazon 提供的新 NoSQL 服务，更具体地说是 DynamoDB。

亚马逊说你应该避免使用不均匀分布的键作为主键，即主键应该越独特越好。我可以认为这是最好的情况下每个项目都有唯一的主键吗？让一些带有重复键的项目怎么样？

我想知道底层机制是如何工作的，所以我知道它有多糟糕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T16:57:42.910

表根据哈希键在多台机器上进行分区，因此它们越随机越好。在我的应用程序中，我使用 company_id 作为哈希值，然后使用唯一 id 作为范围，这样我的表可以合理地均匀分布。

他们试图避免的是您对大部分数据使用相同的哈希键，它们越随机，Dynamo 就越容易将您的数据快速返回给您。

# javascript - javascript获取文本框的值

> ID：10938729
> 
> 赞同：5
> 
> 时间：2012-06-07T19:40:03.273
> 
> 标签：javascript, onclick

我这里有这个文本框...

```
<input name="search" type="text" maxlength="512" id="search" class="searchField" autocomplete="off" title="" /> 
```

我也有这个提交

```
<input type="submit" name="btnSearch" value="Search" onclick="location.href='http://www.website.com/search/';" id="btnSearch" class="buttonSearch" /> 
```

我想做的是在我的文本框中添加任何内容

```
onclick="location.href='http://www.website.com/search/';" 
```

所以它看起来像这样..

```
onclick="location.href='http://www.website.com/search/what ever the user searches';" 
```

我该怎么做呢，我一直在用谷歌搜索我的小心脏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T19:47:41.463

请避免混合使用 JavaScript 和 HTML。您可以在 DOM 加载后的某处删除`onclick`属性并将其替换为纯 JavaScript 中的 this：

```
document.getElementById('btnSearch').onclick = function() {
    var search = document.getElementById('search').value;
    var searchEncoded = encodeURIComponent(search);
    window.location.url = "http://www.website.com/search/" + searchEncoded;
} 
```

还要记住转义搜索框，例如使用`encodeURIComponent()`. 这是一个[有效的 jsfiddle 示例](http://jsfiddle.net/nurkiewicz/D8Ann/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-07T19:44:41.697

这应该有效：

```
onclick="location.href='http://www.website.com/search/'+document.getElementById('search').value;" 
```

**但是我永远不会在我的一个项目中写这个，因为直接在标签上编写脚本是一种不好的做法。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T19:46:33.400

这是[一个工作的jsfiddle](http://jsfiddle.net/jyrL4/)

我将事件处理程序移出按钮，因为它更易于维护。我还对搜索查询进行了编码，以便它正确地到达服务器。

```
var search = document.getElementById('search');
var submit = document.getElementById('btnSearch');

submit.addEventListener('click', function(e) {
    var searchValue = encodeURIComponent(search.value);  // encode the search query
    window.location.href = 'http://www.website.com/search/' + searchValue ;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:45:46.460

您可以像这样将其添加到 onclick 事件中

```
document.getEelementById("btnSearch").onclick = function(){
    location.href='http://www.website.com/search/' + document.getEelementById("search").value;
} 
```

编辑：aaaand 太慢了......哦，好吧。至少这不是内联的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T19:49:21.760

你最好使用 <script> 标签来完成这个任务。例子：

```
<input name="search" type="text" maxlength="512" id="search" class="searchField" autocomplete="off" title="" />
...
<input type="submit" name="btnSearch" value="Search"  id="btnSearch" class="buttonSearch" />
<script type="text/javascript">
var button= document.getElementById('btnSearch');
button.onclick= function(){
    var text= document.getElementById('search').value;
    location.href='http://www.website.com/search/'+text;
}
</script> 
```

但是，您应该尝试从文本框中“清理”一些文本，以便在将其附加到 url 时获得有效的 url。您应该修剪文本，然后搜索特殊字符并将它们转义，等等。

# java - 如何调用接受命令行参数的类？

> ID：10938730
> 
> 赞同：0
> 
> 时间：2012-06-07T19:40:13.563
> 
> 标签：java, command-line

我不是一个好的程序员。在学校，我学习了 MATLAB。所以我不知道我在做什么。

我正在使用 ThingMagic M6 阅读器。他们有自己的 API。我想创建自己的应用程序来阅读程序。我想使用他们提供的示例程序（因为我的程序似乎不起作用）。但是，提供的程序只接受命令行参数。我如何更改它，以便我可以在我的代码中将参数传递给它。

这是提供的代码：（在命令行我输入 tmr://10.0.0.101）

```
 /**
 * Sample program that reads tags for a fixed period of time (500ms)
 * and prints the tags found.
 */

// Import the API
package samples;
import com.thingmagic.*;

public class read
{  
  static void usage()
  {
    System.out.printf("Usage: demo reader-uri <command> [args]\n" +
                      "  (URI: 'tmr:///COM1' or 'tmr://astra-2100d3/' " +
                      "or 'tmr:///dev/ttyS0')\n\n" +
                      "Available commands:\n");
    System.exit(1);
  }

   public static void setTrace(Reader r, String args[])
  {    
    if (args[0].toLowerCase().equals("on"))
    {
      r.addTransportListener(r.simpleTransportListener);
    }    
  }

   static class TagReadListener implements ReadListener
  {
        public void tagRead(Reader r, TagReadData t) {
            System.out.println("Tag Read " + t);
        }
  }

  public static void main(String argv[])
  {

      System.out.println(argv.getClass().toString());
    // Program setup
    TagFilter target;

    Reader r;
    int nextarg;
    boolean trace;

    r = null;
    target = null;
    trace = false;

    nextarg = 0;

    if (argv.length < 1)
      usage();

    if (argv[nextarg].equals("-v"))
    {
      trace = true;
      nextarg++;
      System.out.println("Trace");
    }

    // Create Reader object, connecting to physical device
    try
    { 

      TagReadData[] tagReads;
      r = Reader.create(argv[nextarg]);
      if (trace)
      {
        setTrace(r, new String[] {"on"});
      }
      r.connect();
      if (Reader.Region.UNSPEC == (Reader.Region)r.paramGet("/reader/region/id"))
      {
          r.paramSet("/reader/region/id", Reader.Region.NA);
      }
      r.addReadListener(new TagReadListener() );
      // Read tags
      tagReads = r.read(500);
      // Print tag reads
      for (TagReadData tr : tagReads)
        System.out.println(tr.toString());

      // Shut down reader
      r.destroy();
    } 
    catch (ReaderException re)
    {
      System.out.println("Reader Exception : " + re.getMessage());
    }
    catch (Exception re)
    {
        System.out.println("Exception : " + re.getMessage());
    }
  }
} 
```

这是我尝试使用它：（arg 来自 JTextField）

```
String[] argv = new String[1];
        argv[0] = arg;
readOnceApp(argv); 
```

我觉得这个问题有一个非常简单的答案，我就是想不通。我在网上搜索了几天，看了几本书，仍然无法弄清楚。任何帮助表示赞赏。谢谢你。

编辑： readOnceApp 是我写的一种方法。它基本上只是提供的代码的主要方法。如果有帮助，我可以包括它。我只是不想发布太多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:11:39.333

如果你想从另一个类调用一个类的“main”方法，可以这样做：

```
String [] args = new String [1];
args[0]= "some param";
readOnceApp.main(args); 
```

这是假设“readOnceApp”是您的班级的名称。（顺便说一句，您应该遵循使用大写类名的约定，例如 ReadOnceApp）。

希望这可以帮助。

# android - 为什么 android 按钮会冻结我的应用程序并且无法运行？

> ID：10938733
> 
> 赞同：1
> 
> 时间：2012-06-07T19:40:16.393
> 
> 标签：android, back-button, slidingdrawer

我目前正在开发一个用户可以将日志发布到项目的应用程序。但是，似乎我遇到了一个问题，似乎找不到答案。用户发帖后，后退按钮不会关闭日志活动。相反，它使应用程序无响应；这种实例的 logcat 位于底部。但是，单击“等待”而不是“强制关闭”会恢复应用程序，但后退按钮仍然不起作用。下面是活动的布局。viewflipper 中的每个视图都是项目的不同日志，其中包含几个用于填写信息的编辑文本和一个用于发布到日志的按钮。最初，这是在列表视图中的帖子按钮下方显示当前帖子的位置。那时，后退按钮具有完整的功能。但是，滚动视图中的列表视图效果不佳，因此必须将其更改为带有列表视图的滑动抽屉，每次用户在日志之间翻转时，其适配器都会更改。这是后退按钮功能丢失的地方。起初我以为我的 onKeyDown 方法做错了，但是在尝试调试它、修改它甚至删除它之后，我发现它永远不会被调用。因为这在我换成滑动抽屉后开始发生，所以我的结论是它与滑动抽屉有关。对此的任何帮助将不胜感激。甚至删除它，我发现它永远不会被调用。因为这在我换成滑动抽屉后开始发生，所以我的结论是它与滑动抽屉有关。对此的任何帮助将不胜感激。甚至删除它，我发现它永远不会被调用。因为这在我换成滑动抽屉后开始发生，所以我的结论是它与滑动抽屉有关。对此的任何帮助将不胜感激。

**编辑：**在彻底探索这个问题之后，我发现不仅仅是后退按钮可以做到这一点。设置按钮和搜索按钮也都表现出这种行为。唯一显示正确功能的按钮是主页按钮。但是，活动中的功能不受影响。我仍然可以发帖、在视图之间切换以及查看和编辑帖子。

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/iphonebg" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:background="@drawable/toolbar_gradient"
        android:gravity="center_vertical" >

        <!-- Header -->
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0" >

        <!-- Date -->
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0" >

        <!-- Tabs -->
    </TableRow>

    <FrameLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center" >

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/iphonebg" >

            <TableRow
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" >

                <ViewFlipper
                    android:id="@+id/ViewFlipper01"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_weight="2" >

                    <!-- adding views to ViewFlipper -->
                    <!-- ScrollView 1 -->
                    <!-- ScrollView 2 -->
                    <!-- ScrollView 3 -->
                    <!-- ScrollView 4 -->
                    <!-- ScrollView 5 -->
                </ViewFlipper>
            </TableRow>
        </TableLayout>

        <SlidingDrawer
            android:id="@+id/drawer"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:content="@+id/anyPosts"
            android:handle="@+id/handle" >

            <Button
                android:id="@+id/handle"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:minHeight="35dip"
                android:background="@drawable/black_btn_bg"
                android:text="Drag or Tap to View Posts"
                android:textColor="#FFFFFF"
                android:textStyle="bold" />

            <ListView
                android:id="@+id/anyPosts"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:paddingLeft="5dip"
                android:paddingRight="5dip" >
            </ListView>
        </SlidingDrawer>
    </FrameLayout>

</TableLayout> 
```

处理滑动抽屉的代码的范围，位于我的 onCreate 方法中：

```
 final SlidingDrawer slide = (SlidingDrawer) findViewById(R.id.drawer);
        final Button btnDownloads = (Button) findViewById(R.id.handle);
        slide.setOnDrawerOpenListener(new OnDrawerOpenListener() {

            @Override
            public void onDrawerOpened() {
                btnDownloads.setText("Drag or Tap to Close Posts");
            }
        });

        slide.setOnDrawerCloseListener(new OnDrawerCloseListener() {

            @Override
            public void onDrawerClosed() {
                btnDownloads.setText("Drag or Tap to View Posts");
            }
        });
        slide.animateOpen(); 
```

处理列表视图的代码范围：

```
 ListView listToFill = (ListView) findViewById(R.id.anyPosts);
    listToFill.setAdapter(listViewAdapter); 
```

日志猫：

```
06-07 13:51:44.394: I/InputDispatcher(1464): Application is not responding: AppWindowToken{40cd7758 token=HistoryRecord{40534788 uda.projectlogging/.Radio_Group}} - Window{40ae0a88 uda.projectlogging/uda.projectlogging.Radio_Group paused=false}.  10009.8ms since event, 10009.4ms since wait started
06-07 13:51:44.394: I/WindowManager(1464): Input event dispatching timed out sending to uda.projectlogging/uda.projectlogging.Radio_Group
06-07 13:51:44.444: I/Process(1464): Sending signal. PID: 23939 SIG: 3
06-07 13:51:44.444: I/dalvikvm(23939): threadid=4: reacting to signal 3
06-07 13:51:44.444: I/dalvikvm(23939): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.444: I/Process(1464): Sending signal. PID: 1464 SIG: 3
06-07 13:51:44.444: I/dalvikvm(1464): threadid=4: reacting to signal 3
06-07 13:51:44.484: I/dalvikvm(1464): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.484: I/Process(1464): Sending signal. PID: 1690 SIG: 3
06-07 13:51:44.484: I/dalvikvm(1690): threadid=4: reacting to signal 3
06-07 13:51:44.484: I/dalvikvm(1690): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.484: I/Process(1464): Sending signal. PID: 1639 SIG: 3
06-07 13:51:44.484: I/dalvikvm(1639): threadid=4: reacting to signal 3
06-07 13:51:44.494: I/dalvikvm(1639): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.494: I/Process(1464): Sending signal. PID: 1689 SIG: 3
06-07 13:51:44.494: I/dalvikvm(1689): threadid=4: reacting to signal 3
06-07 13:51:44.494: I/dalvikvm(1689): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.494: I/Process(1464): Sending signal. PID: 1672 SIG: 3
06-07 13:51:44.494: I/dalvikvm(1672): threadid=4: reacting to signal 3
06-07 13:51:44.494: I/dalvikvm(1672): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.494: I/Process(1464): Sending signal. PID: 1656 SIG: 3
06-07 13:51:44.494: I/dalvikvm(1656): threadid=4: reacting to signal 3
06-07 13:51:44.504: I/dalvikvm(1656): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.504: I/Process(1464): Sending signal. PID: 1652 SIG: 3
06-07 13:51:44.504: I/dalvikvm(1652): threadid=4: reacting to signal 3
06-07 13:51:44.514: I/dalvikvm(1652): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.514: I/Process(1464): Sending signal. PID: 1642 SIG: 3
06-07 13:51:44.514: I/dalvikvm(1642): threadid=4: reacting to signal 3
06-07 13:51:44.514: I/dalvikvm(1642): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.514: I/Process(1464): Sending signal. PID: 1664 SIG: 3
06-07 13:51:44.514: I/dalvikvm(1664): threadid=4: reacting to signal 3
06-07 13:51:44.514: I/dalvikvm(1664): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.514: I/Process(1464): Sending signal. PID: 1675 SIG: 3
06-07 13:51:44.514: I/dalvikvm(1675): threadid=4: reacting to signal 3
06-07 13:51:44.514: I/dalvikvm(1675): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.514: I/Process(1464): Sending signal. PID: 1691 SIG: 3
06-07 13:51:44.514: I/dalvikvm(1691): threadid=4: reacting to signal 3
06-07 13:51:44.514: I/dalvikvm(1691): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.514: I/Process(1464): Sending signal. PID: 1590 SIG: 3
06-07 13:51:44.514: I/dalvikvm(1590): threadid=4: reacting to signal 3
06-07 13:51:44.524: I/dalvikvm(1590): Wrote stack traces to '/data/anr/traces.txt'
06-07 13:51:44.734: D/dalvikvm(1464): GC_CONCURRENT freed 1754K, 33% free 9128K/13511K, external 6035K/6964K, paused 2ms+6ms
06-07 13:51:44.814: D/dalvikvm(1464): GC_EXPLICIT freed 31K, 33% free 9107K/13511K, external 6035K/6964K, paused 71ms
06-07 13:51:44.914: E/NetlinkEvent(1351): NetlinkEvent::FindParam(): Parameter 'UDEV_LOG' not found
06-07 13:51:45.364: E/ActivityManager(1464): ANR in uda.projectlogging, pid 23939 (uda.projectlogging/.Radio_Group)
06-07 13:51:45.364: E/ActivityManager(1464): Reason: keyDispatchingTimedOut
06-07 13:51:45.364: E/ActivityManager(1464): Load: 0.26 / 0.25 / 0.21
06-07 13:51:45.364: E/ActivityManager(1464): CPU usage from 7340ms to 0ms ago with 99% awake:
06-07 13:51:45.364: E/ActivityManager(1464):   0.9% 783/als_wq: 0% user + 0.9% kernel
06-07 13:51:45.364: E/ActivityManager(1464):   0.8% 1464/system_server: 0.1% user + 0.6% kernel / faults: 1 minor
06-07 13:51:45.364: E/ActivityManager(1464):     0.5% 1489/ActivityManager: 0.1% user + 0.4% kernel
06-07 13:51:45.364: E/ActivityManager(1464):     0.2% 1543/InputDispatcher: 0% user + 0.2% kernel
06-07 13:51:45.364: E/ActivityManager(1464):     0.1% 1539/PowerManagerSer: 0% user + 0.1% kernel
06-07 13:51:45.364: E/ActivityManager(1464):   0% 19639/com.svox.pico: 0% user + 0% kernel / faults: 56 minor
06-07 13:51:45.364: E/ActivityManager(1464):     0% 19639/com.svox.pico: 0% user + 0% kernel
06-07 13:51:45.364: E/ActivityManager(1464):   0.4% 288/tegra_spi.1: 0% user + 0.4% kernel
06-07 13:51:45.364: E/ActivityManager(1464):   0.4% 19564/com.android.vending: 0.2% user + 0.1% kernel
06-07 13:51:45.364: E/ActivityManager(1464):     0.2% 19566/HeapWorker: 0.1% user + 0.1% kernel
06-07 13:51:45.364: E/ActivityManager(1464):   0% 1358/battd: 0% user + 0% kernel
06-07 13:51:45.364: E/ActivityManager(1464):   0.1% 21254/com.motorola.android.datamanager: 0.1% user + 0% kernel
06-07 13:51:45.364: E/ActivityManager(1464):     0.1% 21255/HeapWorker: 0.1% user + 0% kernel
06-07 13:51:45.364: E/ActivityManager(1464): 7.9% TOTAL: 1.3% user + 2% kernel + 0.1% iowait + 4.3% softirq
06-07 13:51:45.364: E/ActivityManager(1464): CPU usage from 420ms to 934ms later with 99% awake:
06-07 13:51:45.364: E/ActivityManager(1464):   7.6% 1464/system_server: 1.9% user + 5.7% kernel / faults: 1 minor
06-07 13:51:45.364: E/ActivityManager(1464):     3.8% 1543/InputDispatcher: 0% user + 3.8% kernel
06-07 13:51:45.364: E/ActivityManager(1464): 3.9% TOTAL: 1.9% user + 1.9% kernel 
```

单击发布按钮时：

```
postButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                v.startAnimation(AnimationUtils.loadAnimation(
                        getApplicationContext(), R.anim.image_click));
                data = new JSONObject();
                if (description.equals("")) {
                    runOnUiThread(new Runnable() {
                        public void run() {
                            Toast.makeText(getApplicationContext(),
                                    "Please Enter a Description",
                                    Toast.LENGTH_LONG).show();
                        }
                    });
                } else if (delayStart == null) {
                    runOnUiThread(new Runnable() {
                        public void run() {
                            Toast.makeText(getApplicationContext(),
                                    "Please Set Delay Duration",
                                    Toast.LENGTH_LONG).show();
                        }
                    });
                } else {
                    try {
                        data.put("COMMENT", description);
                        data.put("DELAYSTART",
                                delayStart.get(Calendar.HOUR_OF_DAY) + ":"
                                        + delayStart.get(Calendar.MINUTE));
                        data.put("DELAYEND", delayEnd.get(Calendar.HOUR_OF_DAY)
                                + ":" + delayEnd.get(Calendar.MINUTE));
                        postEntry();
                        description = "";
                        delayHours = 0;
                        delayMinutes = 0;
                        delayStart = null;
                        delayEnd = null;
                        delay.setText("");
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            }
        }); 
```

发布条目：

```
public void postEntry() {
    final ProgressDialog dialog1 = new ProgressDialog(this);
    dialog1.setCancelable(true);
    dialog1.setMessage("Loading...");

    dialog1.show();

    final Thread background1 = new Thread(new Runnable() {
        public void run() {
            Looper.prepare();
            try {
                String type1 = "0";
                switch (current) {
                case 0:
                    type1 = "1";
                    break;
                case 1:
                    type1 = "4";
                    break;
                case 2:
                    type1 = "3";
                    break;
                case 3:
                    type1 = "6";
                    break;
                case 4:
                    type1 = "5";
                    break;
                }
                if (helperMethods.isOnline(currentActivity)) {
                    if (failedUploads)
                        doFailedUploads();
                    SoapObject request = new SoapObject(
                            "http://www.constructiononline.com/service/",
                            "OSLPost");
                    PropertyInfo num1 = new PropertyInfo();
                    num1.setName("userEmail");
                    num1.setValue(settings.getString("EMAIL", ""));
                    request.addProperty(num1);

                    num1 = new PropertyInfo();
                    num1.setName("prj_id");
                    num1.setValue(projectInfo.getID());
                    request.addProperty(num1);

                    num1 = new PropertyInfo();
                    num1.setName("entryDate");
                    num1.setValue(month + "/" + day + "/" + year);
                    request.addProperty(num1);

                    num1 = new PropertyInfo();
                    num1.setName("type");
                    num1.setValue(type1);
                    request.addProperty(num1);

                    num1 = new PropertyInfo();
                    num1.setName("data");
                    num1.setValue(data.toString());
                    request.addProperty(num1);

                    num1 = new PropertyInfo();
                    num1.setName("delete");
                    num1.setValue("false");
                    request.addProperty(num1);

                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                            SoapEnvelope.VER11);
                    envelope.dotNet = true;
                    envelope.setOutputSoapObject(request);
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(
                            URL);

                    androidHttpTransport
                            .call("http://www.constructiononline.com/service/OSLPost",
                                    envelope);

                    Log.e("Response from Post", envelope.getResponse()
                            .toString());

                    updatePostList(false);
                } else {
                    addFailedUploads(settings.getString("EMAIL", ""),
                            projectInfo.getID(), month + "/" + day + "/"
                                    + year, type1, data.toString());
                    JSONObject j = new JSONObject();
                    j.put("LOG_OBJECT", data);
                    j.put("TYPE", type1);
                    j.put("DATE", month + "/" + day + "/" + year);
                    Calendar c = Calendar.getInstance();
                    String created = c.get(Calendar.MONTH) + "/"
                            + c.get(Calendar.DAY_OF_MONTH) + "/"
                            + c.get(Calendar.YEAR) + " "
                            + c.get(Calendar.HOUR) + ":"
                            + c.get(Calendar.MINUTE) + ":"
                            + c.get(Calendar.SECOND) + " "
                            + (c.get(Calendar.AM_PM) == 0 ? "AM" : "PM");
                    j.put("CREATED", created);
                    JSONObject creatorTemp = new JSONObject();
                    creatorTemp.put("ID", "0");
                    creatorTemp.put("NAME", " ");
                    creatorTemp.put("COMPANY", " ");
                    creatorTemp.put("ICON", "NULL");
                    j.put("CREATOR", creatorTemp);
                    j.put("ID", "0");
                    switch (current) {
                    case 0:
                        weatherEntries.put(j);
                        break;
                    case 1:
                        workEntries.put(j);
                        break;
                    case 2:
                        visitorEntries.put(j);
                        break;
                    case 3:
                        deliveryEntries.put(j);
                        break;
                    case 4:
                        noteEntries.put(j);
                        break;
                    }
                }
                if (dialog1 != null && dialog1.isShowing()) {
                    dialog1.dismiss();
                }

            } catch (final Exception e) {
                e.printStackTrace();
                StringWriter sw = new StringWriter();
                e.printStackTrace(new PrintWriter(sw));
                String stacktrace = sw.toString();

                addOnlineErrorLogEntry(e.getMessage(), stacktrace);
                if (dialog1 != null && dialog1.isShowing()) {
                    dialog1.dismiss();
                }
                runOnUiThread(new Runnable() {
                    public void run() {
                        Toast.makeText(getApplicationContext(),
                                e.getMessage() + " in setupProjects",
                                Toast.LENGTH_LONG).show();

                    }
                });

            }

        }
    });

    // start the background thread
    background1.start();
} 
```

更新帖子列表：

```
private void updatePostList(final boolean getAll) {
    if (!helperMethods.isOnline(currentActivity)) {
        return;
    }

    final ProgressDialog dialog1 = new ProgressDialog(this);
    dialog1.setCancelable(true);
    dialog1.setMessage("Loading...");

    dialog1.show();

    final Thread background1 = new Thread(new Runnable() {
        public void run() {
            Looper.prepare();
            try {
                if (failedUploads)
                    doFailedUploads();
                SoapObject request = new SoapObject(
                        "http://www.constructiononline.com/service/",
                        "OSLGet");
                PropertyInfo num1 = new PropertyInfo();
                num1.setName("userEmail");
                num1.setValue(settings.getString("EMAIL", ""));
                request.addProperty(num1);

                num1 = new PropertyInfo();
                num1.setName("prj_id");
                num1.setValue(projectInfo.getID());
                request.addProperty(num1);

                num1 = new PropertyInfo();
                num1.setName("startDate");
                num1.setValue("");
                if (!getAll) {
                    num1.setValue(month + "/" + day + "/" + year);
                }
                request.addProperty(num1);

                num1 = new PropertyInfo();
                num1.setName("endDate");
                num1.setValue("");
                request.addProperty(num1);

                num1 = new PropertyInfo();
                num1.setName("type");
                num1.setValue("");
                if (!getAll) {
                    switch (current) {
                    case 0:
                        num1.setValue("1");
                        break;
                    case 1:
                        num1.setValue("4");
                        break;
                    case 2:
                        num1.setValue("3");
                        break;
                    case 3:
                        num1.setValue("6");
                        break;
                    case 4:
                        num1.setValue("5");
                        break;
                    }
                }
                request.addProperty(num1);

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);
                envelope.dotNet = true;
                envelope.setOutputSoapObject(request);
                HttpTransportSE androidHttpTransport = new HttpTransportSE(
                        URL);

                androidHttpTransport.call(
                        "http://www.constructiononline.com/service/OSLGet",
                        envelope);

                Log.e("response", envelope.getResponse().toString());
                JSONObject temp = new JSONObject(envelope.getResponse()
                        .toString());
                JSONArray entries = temp.getJSONArray("ENTRIES");
                if (getAll) {
                    weatherEntries = new JSONArray();
                    workEntries = new JSONArray();
                    visitorEntries = new JSONArray();
                    deliveryEntries = new JSONArray();
                    noteEntries = new JSONArray();
                }
                switch (current) {
                case 0:
                    weatherEntries = new JSONArray();
                    break;
                case 1:
                    workEntries = new JSONArray();
                    break;
                case 2:
                    visitorEntries = new JSONArray();
                    break;
                case 3:
                    deliveryEntries = new JSONArray();
                    break;
                case 4:
                    noteEntries = new JSONArray();
                    break;
                }

                for (int x = 0; x < entries.length(); x++) {
                    switch (entries.getJSONObject(x).getInt("TYPE")) {
                    case 1:
                        weatherEntries.put(entries.getJSONObject(x));
                        break;
                    case 3:
                        visitorEntries.put(entries.getJSONObject(x));
                        break;
                    case 4:
                        workEntries.put(entries.getJSONObject(x));
                        break;
                    case 5:
                        noteEntries.put(entries.getJSONObject(x));
                        break;
                    case 6:
                        deliveryEntries.put(entries.getJSONObject(x));
                        break;
                    }
                }
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        if (getAll) {
                            setupWeatherLog();
                        } else {
                            getPosts();
                        }
                    }

                });
                if (dialog1 != null && dialog1.isShowing()) {
                    dialog1.dismiss();
                }

            } catch (final Exception e) {
                e.printStackTrace();
                StringWriter sw = new StringWriter();
                e.printStackTrace(new PrintWriter(sw));
                String stacktrace = sw.toString();

                addOnlineErrorLogEntry(e.getMessage(), stacktrace);
                if (dialog1 != null && dialog1.isShowing()) {
                    dialog1.dismiss();
                }
                runOnUiThread(new Runnable() {
                    public void run() {
                        Toast.makeText(getApplicationContext(),
                                e.getMessage() + " in setupProjects",
                                Toast.LENGTH_LONG).show();

                    }
                });

            }

            if (dialog1 != null && dialog1.isShowing()) {
                dialog1.dismiss();
            }

        }
    });

    // start the background thread
    background1.start();
} 
```

填充列表视图：

```
private void getPosts() {

    JSONArray entriesToShow = new JSONArray();
    JSONArray postsToLoad = null;
    switch (current) {
    case 0:
        postsToLoad = weatherEntries;
        break;
    case 1:
        postsToLoad = workEntries;
        break;
    case 2:
        postsToLoad = visitorEntries;
        break;
    case 3:
        postsToLoad = deliveryEntries;
        break;
    case 4:
        postsToLoad = noteEntries;
        break;
    }

    for (int i = 0; i < postsToLoad.length(); i++) {
        try {
            JSONObject temp = postsToLoad.getJSONObject(i);
            String[] tempDay = temp.getString("DATE").split("/");
            if (Integer.parseInt(tempDay[0]) == month
                    && Integer.parseInt(tempDay[1]) == day
                    && Integer.parseInt(tempDay[2]) == year) {
                entriesToShow.put(temp);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

    }

    BaseAdapter listViewAdapter;
    switch (current) {
    case 0:
        listViewAdapter = new WeatherDeliveryVisitLazyAdapter(
                currentActivity, entriesToShow, current);
        break;
    case 1:
        listViewAdapter = new WorkLogPostLazyAdapter(currentActivity,
                entriesToShow);
        break;
    case 2:
        listViewAdapter = new WeatherDeliveryVisitLazyAdapter(
                currentActivity, entriesToShow, current);
        break;
    case 3:
        listViewAdapter = new WeatherDeliveryVisitLazyAdapter(
                currentActivity, entriesToShow, current);
        break;
    case 4:
        listViewAdapter = new ProjectNotePostLazyAdapter(currentActivity,
                entriesToShow);
        break;
    default:
        listViewAdapter = new ProjectNotePostLazyAdapter(currentActivity,
                entriesToShow);
    }

    if (listViewAdapter == null || listViewAdapter.getCount() == 0) {
        runOnUiThread(new Runnable() {
            public void run() {
                Toast.makeText(getApplicationContext(),
                        "No Posts to Display", Toast.LENGTH_SHORT).show();
            }
        });
    }
    ListView listToFill = (ListView) findViewById(R.id.anyPosts);
    listToFill.setAdapter(listViewAdapter);

} 
```

这就是在任何日志中单击发布按钮时所做的一切。如果我正确地解释了这一点，当所有进度对话框都清除屏幕时，后台线程已经结束，并且在 ui 线程上运行的唯一事情，除了在发生错误或信息不完整的情况下的祝酒词之外，就是设置listview，它确实完成了。当我拉开抽屉时，它会显示正确的帖子列表。

**编辑**我发现如果我在 updatePostList 方法中注释掉进度对话框，它工作得很好。这么新的问题：为什么这就是解决方案？

**最终编辑**我想通了。该进度对话框是从后台线程启动的。修改了 postEntry 方法，使其在 UI 线程上调用 updatePostList，以便在 UI 线程上创建进度对话框，并且它可以工作。耶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:36:21.587

从您的描述看来，您可能正在从主线程开始一些长时间运行的进程。在主线程上执行诸如写入文件、更新数据库或执行网络 I/O 之类的操作会导致它变得无响应。在执行这样的操作时，您应该使用 a`Service`或 an 。`AsyncTask`

以下是一些可能对您有用的文章：

*   [http://android-developers.blogspot.com/2010/04/multitasking-android-way.html](http://android-developers.blogspot.com/2010/04/multitasking-android-way.html)
*   [http://developer.android.com/guide/practices/design/responsiveness.html](http://developer.android.com/guide/practices/design/responsiveness.html)

# c# - 开发以管理员身份运行命令的应用程序

> ID：10938736
> 
> 赞同：1
> 
> 时间：2012-06-07T19:40:22.803
> 
> 标签：c#, .net, windows, .net-2.0, uac

首先，是的，我在互联网上搜索过这个话题，但我的情况更具体一些，所以这就是我提出问题的原因。

我的应用程序是在 Visual Studio .NET 2005 中使用 Framework 2.0、C# 开发的可执行 winform 应用程序

该应用程序需要在命令行上运行一些命令。此命令必须以管理员身份运行。

实际工作的代码是：

```
 string output = "";
        Process Consola = new Process();
        ProcessStartInfo ConsolaStartInfo = new ProcessStartInfo();
        ConsolaStartInfo.FileName = "cmd.exe";
        ConsolaStartInfo.WorkingDirectory = System.Environment.SystemDirectory;
        ConsolaStartInfo.UseShellExecute = !NeedOutput;
        ConsolaStartInfo.RedirectStandardOutput = NeedOutput;
        Consola.StartInfo = ConsolaStartInfo;
        ConsolaStartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        ConsolaStartInfo.CreateNoWindow = true;
        ConsolaStartInfo.Arguments = "/C " + CommandToPerform;
        ConsolaStartInfo.Verb = "runas";
        Consola.Start();
        Consola.WaitForExit(); 
```

在哪里：

```
 CommandToPerform is a string var with a command
    NeedOutput is true or false depending if i need a return output or not.
   (This works) 
```

第一个提示是：如果我在 Windows 7 上以管理员身份运行 Visual Studio，则此应用程序可以正常运行。

第二个提示是：如果我不是以管理员身份运行 Visual Studio，则此应用程序可以按预期完美运行，但每次执行命令行时，该过程都会要求我在屏幕上进行安全验证 (UAC)

是的，我尝试使用清单，但我在编译它时遇到了很多问题。它有时会返回 9009 错误，很多错误。

所以我的问题是：

1）有可能在不向用户询问权限的情况下做到这一点吗？应用程序必须是静默的。这是真正的问题。如果是这样的话...

2）如何为我的应用程序定义清单以管理员身份运行此命令？我想念什么？它的应用程序的相同标志？

3）我的应用程序可以在不以管理员身份运行的情况下以管理员身份运行这些命令吗？这是一个完美的场景，使用这个应用程序的用户不能/不能是管理员。

4）这将适用于XP？XP要求UAC？（在开发最低要求版本之前，我无法在 XP 上对其进行测试）

任何想法/解决方案/提示将不胜感激，如果最终不是解决方案，更好的解决方法将被标记为答案（我有 100% 的比率）

***笔记：***

*   我无法根据客户要求将框架从 2.0 迁移到更高版本。
*   我无法按客户要求将 Visual Studio .NET 2005 迁移到更高版本。
*   应用程序需要运行从 XP（没有任何 SP）到 Windows 7 的所有版本
*   是的，如果在“Microsoft 政策”和应用程序要求下（框架 2.0、API 或类似的东西，不能使用不是来自 microsoft 的 mods/controls/library），我可以使用解决方法

***编辑：***

*   添加密钥的解决方案：HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\AppCompatFlags\Layers WORKED。

但是当您运行应用程序时，它会提示（使用常见的 UAC 提示）获取权限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:00:09.163

那么问题 1) 和 3) 的答案很简单：这是不可能的。因为如果可能的话，整个 UAC 将毫无用处。

我不知道 XP 的兼容性（但我确实认为 XP 会忽略清单），不幸的是我也没有使用 UAC 提示符和 VS2005 的经验。我只在VS2008及更高版本中这样做过，所以我也无能为力。我确实找到了 VS2005 的指南，但您很可能也看到了相同的指南：

[在 vista 上启用 uac 应用程序](http://www.professionalvisualstudio.com/blog/2007/10/05/enabling-your-application-for-uac-on-vista/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:17:25.470

可以通过运行命令的小服务来完成，并且服务进程安装程序必须具有属性Account on：LocalSystem。

因此，您的应用程序不需要任何要求或清单。

它适用于 Win7 和 XP

[MSDN 创建 Windows 服务](http://msdn.microsoft.com/en-us/library/zt39148a.aspx)

并且注意：

> LocalSystem 帐户具有广泛的权限，包括写入事件日志的能力。请谨慎使用此帐户，因为它可能会增加您受到恶意软件攻击的风险。对于其他任务，请考虑使用 LocalService 帐户，该帐户充当本地计算机上的非特权用户并向任何远程服务器提供匿名凭据。

# protobuf-net - 序列化后更新 protobuf

> ID：10938739
> 
> 赞同：1
> 
> 时间：2012-06-07T19:40:39.307
> 
> 标签：protobuf-net

我们将数据库表中的 protobufs 保存为 Byte[]s。但是，我们遇到了一种情况，即我们必须在保存 protobuf 后对其进行更新。这会产生两个问题 - (1) 我们必须对它们进行序列化/反序列化以更新它们并将它们保存回来，(2) 我们必须在更新代码中复制 protobuf 层次结构（如果 obj.getType() == typeOf(A )) then ... else (如果 type == ) do ...

有没有办法修改 Byte[] 而无需序列化/反序列化和识别 protobuf 类型？

谢谢马尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:27:48.810

协议缓冲区格式*通常*用作不透明格式，这意味着：您不会期望知道内部 - 典型的场景*是*您只需加载它，进行更改并保留它。幸运的是，该格式简洁高效，因此这根本不是问题。

作为比较，你不会对`BinaryFormatter`不使用`BinaryFormatter`.可以稳健地处理它。

然而！如果你*决定*在没有序列化器的情况下处理 protobuf 数据，你也可以使用 reader/writer API。这与`XmlReader`/一样`XmlWriter`，假设您对底层规范有相当多的了解，并且您仍然需要知道您感兴趣的字段编号（尽管您不需要对您不感兴趣的字段了解*很多*有兴趣）。

如果您有一个**非常具体**（即可运行）的示例，我可能会向您展示如何执行此操作。然而！我会建议最简单的事情可能是拥有模型。

但是，我有点不清楚为什么需要“复制 protobuf 层次结构”。**Protobuf-net，在默认用法中，一点**也不关心实际类型是什么（只要它们符合合同）。如果场景是您正在对 DTO 进行更改，则：

1.  是的，做一些危险的事情，比如对 DTO 进行重大更改可能会影响事情 - 如果它急躁，请*停止这样做*（随着时间的推移，通常有同样方便但安全的方法来更改 DTO）
2.  在许多情况下，您可以使用`RuntimeTypeModel`v2 的功能来弥补模型的 2 个版本之间的差异 - 通过具有两种不同的`RuntimeTypeModel`配置（可能其中一种涉及代理，或使用不同的属性等）

不过，我需要查看您要解决的问题以提供进一步的建议。

# ninject - 带有 Ninject 混淆的 AutoMapper

> ID：10938740
> 
> 赞同：3
> 
> 时间：2012-06-07T19:40:41.070
> 
> 标签：ninject, automapper

对于初学者，我正在使用这个模块：

```
 public class AutoMapperModule : NinjectModule
{
    public override void Load()
    {
        Bind<ITypeMapFactory>().To<TypeMapFactory>();
        foreach (var mapper in MapperRegistry.AllMappers())
        {
            Bind<IObjectMapper>().ToConstant(mapper);
        }

        Bind<AutoMapper.ConfigurationStore>().ToSelf().InSingletonScope().WithConstructorArgument("mappers", ctx => ctx.Kernel.GetAll<IObjectMapper>());
        Bind<IConfiguration>().ToMethod(ctx => ctx.Kernel.Get<AutoMapper.ConfigurationStore>());
        Bind<IConfigurationProvider>().ToMethod(ctx => ctx.Kernel.Get<AutoMapper.ConfigurationStore>());
        Bind<IMappingEngine>().To<MappingEngine>();
    }
} 
```

我的所有地图都有一个引导程序类

```
 public static void Configure(IKernel kernel)
    {
        Mapper.Initialize(map => map.ConstructServicesUsing(t => kernel.Get(t)));
    } 
```

我有访问数据库并需要注入存储库的解析器。它按原样工作，但我不知道如何让它与单元测试和 IMappingEngine 一起工作。

```
 public HomeController(IMappingEngine mappingEngine)
    {
        _mappingEngine = mappingEngine;
    } 
```

_mappingEngine.Map 抛出异常，因为不存在地图。Mapper.Map 有效。

我错过了什么？如何让我的引导程序使用单元测试，以便解析器中的存储库使用假/模拟存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:27:16.620

尝试更改映射的绑定。

```
Bind<IMappingEngine>().ToMethod(ctx => Mapper.Engine); 
```

# c# - 异常“不支持指定的方法。” 使用 .Any 扩展名时从 NHibernate IQueryable 表达式中抛出

> ID：10938743
> 
> 赞同：1
> 
> 时间：2012-06-07T19:40:49.380
> 
> 标签：c#, nhibernate, linq-to-nhibernate, notsupportedexception

利用 NHibernate，我尝试使用 lambda 表达式根据父子关系之间的状态和值来检索对象。`AbstractWorkflowRequestInformation`有一个集合`WorkflowRequestInformationAction`。这两个类中的每一个都有自己的状态属性。为了说明这里是与此查询相关的缩写类：

```
public class AbstractWorkflowRequestInformation
{
    public virtual RequestStatus RequestStatus { get; set; }

    public virtual IEnumerable<WorkflowRequestInformationAction>
        WorkflowRequestInformationActionList { get; set; }
}

public class WorkflowRequestInformationAction
{
    public virtual ActionStatus Status { get; set; }

    public virtual string RoleIdentifier { get; set; }

    public virtual string RoleName { get; set; }
} 
```

鉴于这种关系，我想根据`List<KeyValuePair<string, string>>`被调用的角色检索 AbstractWorkflowRequestInformation 对象。我意识到异常是由于`Any(...)`扩展方法缺乏解析引起的，但我不确定替代查询。到目前为止，以下查询的所有排列都导致了相同或相似的异常：

```
public IEnumerable<IRequestInformation> GetRequestsPendingActionBy(
        List<KeyValuePair<string, string>> roles)
{
    var results = GetSession().Query<AbstractWorkflowRequestInformation>()
        .Where(r => r.RequestStatus == RequestStatus.Pending
                    && r.WorkflowRequestInformationActionList
                        .Any(a => ActionStatus.Pending == a.Status
                                  && roles.Any(kp => kp.Key == a.RoleName
                                               && kp.Value == a.RoleIdentifier)))
    .ToList();

    return results;
} 
```

最终目标是仅检索那些`AbstractWorkflowRequestInformation`挂起并且具有与可枚举角色中的 KeyValuePair 匹配的挂起 WorkflowRequestInformationAction 的对象。

我不喜欢使用 lambda 表达式，因为这个表达式已经变得笨拙，如果有更优雅的 ICriteria 表达式，我会全力以赴。我有哪些选项可以根据我的值限制我的结果`roles List<KeyValuePair<string, string>>`但防止“不支持指定的方法”异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:48:37.477

NHibernate 中的 LINQ 提供程序不完全受支持，您正在尝试在未从提供程序解析的表达式树的一部分上执行扩展方法。

这篇[文章](http://www.primordialcode.com/blog/post/nhibernate-3-extending-linq-provider-fix-notsupportedexception)可能会帮助您解决问题。请务必查看相关帖子。

另请参阅 Fabio Maulo 关于[NHibernate LINQ 提供程序扩展](http://fabiomaulo.blogspot.it/2010/07/nhibernate-linq-provider-extension.html)的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:28:29.610

我认为这会得到相同的结果......

```
WorkflowRequestInformationAction actionAlias = null;

var q = GetSession().QueryOver<AbstractWorkflowRequestInformation>()
    .Inner.JoinAlias(x => x.WorkflowRequestInformationActionList,
                          () => actionAlias)
    .Where(x => x.RequestStatus == RequestStatus.Pending)
    .And(() => actionAlias.Status == ActionStatus.Pending);

var d = Restrictions.Disjunction();

foreach(var kvp in roles) 
{
    d.Add(Restrictions.Where(() => actionAlias.RoleName == kvp.Key
                                  && actionAlias.RoleIdentitifier == kvp.Value));
}

q.And(d).TransformUsing(Transformers.DistinctRootEntity);

var results = q.List(); 
```

您可能可以对 NH Linq 采取类似的方法。不过，我对 QueryOver/Criteria 更满意。

# c# - 隔离存储很奇怪，可以保存一个文件，但不能保存第二个文件

> ID：10938745
> 
> 赞同：1
> 
> 时间：2012-06-07T19:40:53.080
> 
> 标签：c#, visual-studio, windows-phone-7

`using(StreamWriter`我在第二个声明中得到以下信息：

**值不在预期范围内。**

```
 #region save allowance
            IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();

            //Open existing file
            IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile("foo.txt", FileMode.Truncate, FileAccess.Write);
            using (StreamWriter writer = new StreamWriter(fileStream))
            {
                writer.Write(App.ViewModel.Foo);
            }
            #endregion

            #region save log

            IsolatedStorageFileStream fileStream2 = myIsolatedStorage.OpenFile("log.txt", FileMode.Truncate, FileAccess.Write);
            using (StreamWriter writer = new StreamWriter(fileStream))
            {
                foreach( var i in App.ViewModel.Items )
                    writer.Write(i.ToString());
            }

            #endregion 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:32:00.857

您第二次重用 fileStream 而不是 fileStream2。顺便说一句，为了避免这种错误，您可能希望将文件流包装在 using 块中。

```
 #region save allowance
        IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();

        //Open existing file
        using (var writer = new StreamWriter(myIsolatedStorage.OpenFile("foo.txt", FileMode.Truncate, FileAccess.Write)))
        {
            writer.Write(App.ViewModel.Foo);
        }
        #endregion

        #region save log

        using (var writer = new StreamWriter(myIsolatedStorage.OpenFile("log.txt", FileMode.Truncate, FileAccess.Write)))
        {
            foreach( var i in App.ViewModel.Items )
                writer.Write(i.ToString());
        }

        #endregion 
```

# raphael - RaphaelJS 中元素的 3D 旋转

> ID：10938747
> 
> 赞同：0
> 
> 时间：2012-06-07T19:41:13.953
> 
> 标签：raphael

我希望您能帮助我确定 raphael.js 中是否允许以下​​动画。我试图让一个元素飞离页面，这个想法是让它看起来在 3D 中掉落/飞离。我能够告诉元素旋转 X 度并滑下，但它缺乏独立于背景的元素的外观。我想要做的是能够告诉 raphael 将顶角“向外”旋转，因为它掉下来给人一种它掉出视野的错觉，就像图片从墙上掉下来一样。这甚至可能吗，还是拉斐尔只在二维空间中运作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:35:34.720

拉斐尔只处理二维空间。要实现 3D 翻转，您必须伪造它。值得庆幸的是，Raphael 将 Scale(sx,sy,x,y) 实现为变换操作，因此您可以围绕原点进行缩放以伪造 3D“翻转”旋转。

例如：

```
Raphael.el.flipXTransform = function (parentBbox) {
    var x = this.getBBox().x; 
    var width = this.getBBox().width;
    parentBbox = parentBbox || { width:width, x: x};
    var parentWidth = parentBbox.width;
    var parentX = parentBbox.x; 
    var originX = parentX - x + parentWidth / 2;
    return 's-1,1,' + originX + ',0';    
};

Raphael.el.flipX = function (duration, easing, parentBbox) {
    duration = duration || 500;
    easing = easing || 'easeInOut';
    var scale = this.flipXTransform(parentBbox);
    this.animate({ transform: '...' + scale }, duration, easing);   
}; 
```

这是一个[小提琴示例](http://jsfiddle.net/vQRv5/)供您使用。缺点是这不能像真正的 3D 旋转那样传达透视图。

# c# - 正则表达式去除给定字符以外的字符？

> ID：10938749
> 
> 赞同：1
> 
> 时间：2012-06-07T19:41:16.103
> 
> 标签：c#, .net, regex, string, c#-4.0

我想剥离字符串，但只留下以下内容：

```
[a-zA-Z]+[_a-zA-Z0-9-]* 
```

我正在尝试输出以字符开头的字符串，然后可以包含字母数字、下划线和破折号。如何使用 RegEx 或其他函数执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:55:54.417

因为正则表达式第二部分中的所有内容都在第一部分中，所以您可以执行以下操作：

```
String foo = "_-abc.!@#$5o993idl;)"; // your string here.
//First replace removes all the characters you don't want.
foo = Regex.Replace(foo, "[^_a-zA-Z0-9-]", "");
//Second replace removes any characters from the start that aren't allowed there.
foo = Regex.Replace(foo, "^[^a-zA-Z]+", ""); 
```

因此，首先将其缩减为仅允许的字符。然后摆脱任何不能在开头的允许字符。

当然，如果你的正则表达式变得更复杂，这个解决方案很快就会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:54:50.407

> 已编辑

```
 var s = Regex.Matches(input_string, "[a-z]+(_*-*[a-z0-9]*)*", RegexOptions.IgnoreCase);
            string output_string="";
            foreach (Match m in s)
            {
                output_string = output_string + m;

            }
    MessageBox.Show(output_string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:56:52.157

假设您在集合中有字符串，我会这样做：

1.  集合中的 foreach 元素尝试匹配正则表达式
2.  如果！成功，则从集合中删除字符串

或者反过来 - 如果匹配，则将其添加到新集合中。

如果字符串不在集合中，您可以添加更多关于您的输入内容的详细信息吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:00:34.030

如果要提取与正则表达式匹配的所有标识符，可以这样做：

```
var input = " _wontmatch f_oobar0 another_valid ";
var re = new Regex( @"\b[a-zA-Z][_a-zA-Z0-9-]*\b" );
foreach( Match match in re.Matches( input ) )
    Console.WriteLine( match.Value ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T20:10:30.197

采用`MatchCollection matchColl = Regex.Matches("input string","your regex");`

然后使用：

```
string [] outStrings = new string[matchColl.Count]; //A string array to contain all required strings

for (int i=0; i < matchColl.Count; i++ )
     outStrings[i] = matchColl[i].ToString(); 
```

您将在 outStrings 中拥有所有必需的字符串。希望这可以帮助。

# authentication - 在用户验证之前使用登录按钮插件获取 fb 用户 ID

> ID：10938751
> 
> 赞同：0
> 
> 时间：2012-06-07T19:41:41.813
> 
> 标签：authentication, facebook-social-plugins, facebook-login

因此，当您将登录按钮插件放在应用程序上时，它似乎会显示正在使用该应用程序的用户朋友。它甚至会向尚未允许该应用访问的用户显示这一点。例如，如果您访问“Henry's Cooking App”但从未通过 facebook 登录该应用程序，它仍会显示您正在使用该应用程序的朋友。

我要做的是使用此功能从插件中获取一组 fb-userid，以便我可以在我的数据库上进行查询以向潜在用户显示更多信息。例如，假设您有 2 个朋友已经在使用“Henry's Cooking App”：Joe 和 Karen。如果我能得到他们的用户 ID，我就可以给你看类似“乔刚煮了小牛肉扇贝，凯伦正在完善她的炸猪排咖喱”之类的东西。

我知道如果你有身份验证令牌，你可以轻松做到这一点，但这只有在用户登录后才能获得。我试图利用这样一个事实，即 fb 似乎认为可以向你的朋友展示使用该应用程序之前您注册了该应用程序。

我能想到的唯一超级 hacky 方法是，我可以提取与 $(".uiFacePileItem a") 匹配的元素的 href 属性，它提供指向用户配置文件的链接，然后我可以获取用户名或 UID从。这似乎很容易打破，但有人有更好的主意吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:25:03.670

# c# - Automapper 映射 IEnumerable 对于下拉菜单

> ID：10938757
> 
> 赞同：2
> 
> 时间：2012-06-07T19:42:23.597
> 
> 标签：c#, asp.net, asp.net-mvc, viewmodel, automapper

**问题**

我目前正在向我的 MVC 项目添加自动映射，但我被卡住了。现在我有一个用户模型用于表示数据库中的数据。我必须将该模型映射到一个 EditUserModel，该模型将在调用 Edit 方法时使用。EditUserModel 有`IEnumerable<SelectListItem>`（用于下拉菜单）我似乎无法弄清楚如何映射。

**尝试的解决方案**

截至目前，我还没有尝试实现任何东西。我不确定最好的地方`IEnumerable<SelectListItem>`或填充它的地方。现在它被填充在控制器中。

**用户.cs**

```
public class User
{
    [Key]
    public int UserID { get; set; }

    public string Username { get; set; }

    public string Password { get; set; }

    public int RoleID { get; set; }

    [ForeignKey("RoleID")]
    public virtual Role Role { get; set; }
} 
```

**编辑用户模型.cs**

```
public class EditUserViewModel
{
    [HiddenInput(DisplayValue = false)]
    public int UserID { get; set; }

    [Required]
    public String Username { get; set; }

    [Required]
    [DataType(DataType.Password)]
    public string Password { get; set; }

    [DisplayName("Role")]
    [Required]
    public int RoleID { get; set; }

    //The trouble field
    public IEnumerable<SelectListItem> Roles { get; set; }
} 
```

**控制器.cs**

```
EditUserViewModel model = new EditUserViewModel();
//Population of the dropdown menu
model.Roles = context.Roles
    .ToList()
    .Select(x => new SelectListItem
    {
        Text = x.Description,
        Value = x.RoleID.ToString()
    });
//Mapping that the automaper will take care of
model.UserID = user.UserID;
model.Username = user.Username;
model.RoleID = user.RoleID; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T19:57:28.193

作为记录，这是我在对 Jakub 的回答的评论中所说的：

```
public static class EnumerableExtensions
{
    public static IEnumerable<SelectListItem> ToSelectList<T, TTextProperty, TValueProperty>(this IEnumerable<T> instance, Func<T, TTextProperty> text, Func<T, TValueProperty> value, Func<T, bool> selectedItem = null)
    {
        return instance.Select(t => new SelectListItem
        {
            Text = Convert.ToString(text(t)),
            Value = Convert.ToString(value(t)),
            Selected = selectedItem != null ? selectedItem(t) : false
        });
    }
} 
```

不用说，这非常简单并且完成了同样的事情（并且实际上在属性路径不简单的情况下更加健壮，因为 Jakub 的解决方案不适用于嵌套属性）。

（这不是一个真正的答案，我将其作为社区 wiki 发布只是为了帮助阐述一个观点）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:44:53.250

控制器是填充视图模型的理想场所。

您可以使用此扩展方法删除管道代码：

```
public static class EnumerableExtensions
{
    public static IEnumerable<SelectListItem> ToSelectList<T, TTextProperty, TValueProperty>(this IEnumerable<T> instance, Expression<Func<T, TTextProperty>> text, Expression<Func<T, TValueProperty>> value, Func<T, bool> selectedItem = null)
    {
        return instance.Select(t => new SelectListItem
        {
            Text = Convert.ToString(text.ToPropertyInfo().GetValue(t, null)),
            Value = Convert.ToString(value.ToPropertyInfo().GetValue(t, null)),
            Selected = selectedItem != null ? selectedItem(t) : false
        });
    }

    public static PropertyInfo ToPropertyInfo(this LambdaExpression expression)
    {
        MemberExpression body = expression.Body as MemberExpression;

        if (body != null)
        {
            PropertyInfo member = body.Member as PropertyInfo;
            if (member != null)
            {
                return member;
            }
        }

        throw new ArgumentException("Expression is not a Property");
    }
}

model.Roles = context.Roles.ToSelectList(r => r.RoleID, r => r.Description); 
```

# for-loop - DOS - 试图理解分隔符以找到最低行数的 inf 文件

> ID：10938759
> 
> 赞同：2
> 
> 时间：2012-06-07T19:42:24.560
> 
> 标签：for-loop, batch-file, dos

我在我正在编写的 bat 文件中发现了一个错误，并且偶然找到了一个修复程序，但是我不明白为什么修复程序有效。这最终​​是我的问题，或者如果这个逻辑还有其他我没有发现的问题。

该脚本在 2 个或更多文件中计算行数，然后目标是找到行数最少的文件，然后在脚本稍后的变量中使用该计数作为参数。

示例文件 1（9 行）：

```
Wrote,0
Wrote,1
Wrote,2
Wrote,3
Wrote,4
Wrote,5
Wrote,6
Wrote,7
Wrote,8 
```

示例文件 2（10 行）：

```
Wrote,0
Wrote,1
Wrote,2
Wrote,3
Wrote,4
Wrote,5
Wrote,6
Wrote,7
Wrote,8
Wrote,9 
```

我看到的主要区别是文件 2 中的第 9 行和第 10 行是两位数的行号

**注意：**我不是指每行的实际值，而是指行号的计数值，因为我的代码不会尝试解析行，而只是获取行数。

在我创建的代码顶部附近，然后将每个文件的计数值附加到一个名为 ~numbers.txt 的临时文件中，以便在这里模拟该过程，假设我的起始代码是：

```
echo 9 > ~numbers.txt
echo 10 >> ~numbers.txt
type  ~numbers.txt 
```

所以现在我有一个包含两行“9”和“10”的文件，当然 9 低于 10，但它也比 10 少一位。

现在我尝试通过将第一行读入变量然后循环并评估当前值是否小于先前值来找到文件 ~numbers.txt 中包含的最小数字。

```
setlocal enabledelayedexpansion
set /p lowest=<~numbers.txt

FOR /F "delims=" %%G in (~numbers.txt) DO IF %%G LSS !lowest! SET lowest=%%G
echo  lowest num = %lowest% 
```

当我运行这段代码时，我得到了这个错误的输出：

> 最低数量 = 10

我发现如果我从 FOR 循环中删除**“delims=”**，我将得到正确的结果 9。

**还有**，是什么真正搞砸了我对这个问题的理解；如果我只将 ~numbers.txt 中的值更改为 10 和 100 并单独保留 FOR 循环行（保持**"delims="**），那么我得到正确的值 10 作为我的答案？？？

这很糟糕，因为这意味着我的逻辑有缺陷，并且其他数字组合也会产生不同的结果。

谁能向我解释为什么会这样和/或举例说明如何获得正确的最低数字而不管值如何？

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:58:10.047

如果你没有看到某些东西，并不意味着它不存在。（我在这里说的是空格）试试这个：

```
> ~numbers.txt echo 9<press ENTER immediately>
>> ~numbers.txt echo 10<press ENTER immediately> 
```

这将是真正的所见即所得，行尾没有空格，没有文本比较，`if`因为字符串并非全是数字。当然，正如您已经注意到的那样，使用默认分隔符（其中一个是空格）去除空格也可以正常工作。

考虑这种确定最低行数的方法：

```
set /a minlines=0x7FFFFFFF
for /f "tokens=2 delims=:" %%a in ('find /c /v "" *.txt') do set /a minlines="%%a-(minlines-%%a)*(minlines-%%a>>255)"
echo %minlines% 
```

注意：没有 ifs，没有延迟扩展

# php - 使用可变段构建 Codeigniter URL

> ID：10938761
> 
> 赞同：2
> 
> 时间：2012-06-07T19:42:28.713
> 
> 标签：php, codeigniter, url-routing, codeigniter-2, codeigniter-routing

我已经在 CI 用户指南和 Stackoverflow 上搜索了我的问题的解决方案，但找不到。所以，这是我的问题。

我需要建立 SEO 友好的 URL。我有一个名为“Outlets”的控制器，我需要生成的视图将具有类似 http://www.mysite.com/[city]/[area]/[outlet-name] 的 URL 结构。

细分 city 和 area 是它们各自表中的字段，而 outlet_name 是表“Outlets”中的字段。

我能够生成像[http://www.mysite.com/outlets/123](http://www.mysite.com/outlets/123)这样的 URL，但是如何将城市和地区名称添加到 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:03:47.603

如果您的所有页面都使用相同的控制器，请在 config/routes.php 添加此...

```
$route['(:any)/(:any)/(:any)'] = "outlets/$1/$2/$3";
$route['(:any)/(:any)/(:any)/(:any)'] = "outlets/$1/$2/$3/$4"; // fixed typo 
```

在控制器中，您将需要重新映射函数调用，因为 Codeigniter 将寻找具有城市名称的函数并且它们不存在。

[http://codeigniter.com/user_guide/general/controllers.html#remapping](http://codeigniter.com/user_guide/general/controllers.html#remapping)

```
public function _remap($city, $area, $outlet, $options = '')
{
  $this->some_function_below($city, $area, $outlet, $options);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:53:13.267

另一种替代解决方案。

您可以使用 URI 段。对于像 http://www.mysite.com/[city]/[area]/[outlet-name] 这样的网址

```
<?php

$this->uri->segment(3);  // city
$this->uri->segment(4);  // area
$this->uri->segment(5);  // outlet-name

?> 
```

等等...有关详细信息，请参阅[http://codeigniter.com/user_guide/libraries/uri.html 。](http://codeigniter.com/user_guide/libraries/uri.html)

# php - 这个 PHP 数组在 Javascript 中的外观如何？

> ID：10938767
> 
> 赞同：1
> 
> 时间：2012-06-07T19:42:54.763
> 
> 标签：php, javascript, jquery, arrays

我有点懒，只是使用 PHP 来存储所有这些值，不过我应该使用 Javascript 来做到这一点。在 Javascript 中执行以下操作的最佳方法是什么？然后我会使用 jQuery 的 .each 函数来循环遍历它。

```
 $accessories = array (
       array('name' => 'Chrome pull out wire Basket 500 & 600 wide ', 'price' => '60'),
       array('name' => 'Chrome shoe rack 2 Tier', 'price' => '95'),
       array('name' => 'Chrome Shoe Rack 3 Tier', 'price' => '145'),
       array('name' => 'Chrome pull out trouser rack', 'price' => '40'),
       array('name' => 'Pull out tie rack', 'price' => '135'),
       array('name' => 'Pull Down hanging Rail 450mm to 1190mm width', 'price' => '33.50'),
       array('name' => 'Corner Hanging Rail', 'price' => '33.50')
        ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T19:44:32.097

JavaScript 没有关联数组，因此您必须将其构建为数组中的一系列对象。

```
var accessories = [
    { 'name' : 'Chrome pull out...', 'price' : 60 },
    { 'name' : 'Chrome shoe rack..', 'price' : 95 }
]; 
```

`$.each`然后，您可以按照您的要求循环使用它：

```
$.each( accessories, function(){
    alert( this.name );
}); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/HXwMc/](http://jsfiddle.net/jonathansampson/HXwMc/)

### 快速将 PHP 数组转换为 JSON

您可以通过传递数组轻松获得上述结构[`json_encode()`](http://php.net/manual/en/function.json-encode.php)：

```
echo json_encode( $accessories ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T19:46:11.503

它可能看起来像这样：

```
var array = [
    {"name": "Chrome pull out wire Basket 500 & 600 wide ", "price": "60"},
    {"name": "Chrome shoe rack 2 Tier", "price": "95"},
    {"name": "Chrome Shoe Rack 3 Tier", "price": "145"},
    {"name": "Chrome pull out trouser rack", "price": "40"},
    {"name": "Pull out tie rack", "price": "135"},
    {"name": "Pull Down hanging Rail 450mm to 1190mm width", "price": "33.50"},
    {"name": "Corner Hanging Rail", "price": "33.50"}
]; 
```

请注意，这是一个**对象数组**。JavaScript 没有关联数组，它们是对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T19:46:16.810

正如 Jonathan 所指出的，这是 Javascript 中的对象数组。它看起来像这样

```
var accessories = [
  { 
    name: 'hello',
    price: 1.00,
  },
  {
    name: 'world',
    price: 2.50,
  }
] 
```

# android - 如何将android webview缩放设置为特定高度

> ID：10938769
> 
> 赞同：1
> 
> 时间：2012-06-07T19:43:00.113
> 
> 标签：android, android-webview

我正在使用 Webview 来查看具有缩放支持的本地图像等等。有什么方法可以使 WebView 缩放以仅适合图像的高度，而不是像我当前代码那样的宽度？这是我所拥有的：

```
WebView image = (WebView)findViewById(R.id.map);
    image.getSettings().setBuiltInZoomControls(true);
    image.getSettings().setLoadWithOverviewMode(true);
    image.getSettings().setUseWideViewPort(true);
    image.setLayoutParams(new     LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT));
    image.loadUrl("file:///android_asset/image.png"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:46:53.633

尝试使用 webView 设置

使用 webSettings 类

```
webview.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR); 
```

查看[为 Webview 设置缩放](https://stackoverflow.com/questions/2505393/set-zoom-for-webview)

*更新：* 如`setDefaultZoom`已弃用[，您需要使用其他设置](https://stackoverflow.com/a/30496247/5599807)

# c++ - 使用 std::bind 时从 std::function 获取函数指针

> ID：10938774
> 
> 赞同：16
> 
> 时间：2012-06-07T19:44:08.913
> 
> 标签：c++, c++11, bind, function-pointers

我正在尝试与`std::function`结合使用`std::bind`，但我遇到了一些问题。

这有效：

```
#include <functional>
#include <iostream>

void print() {
    std::cout << 2;
}

int main() {
    std::function<void ()> foo = print;
    (*foo.target<void (*)()>())(); //prints 3
} 
```

这在第二行崩溃`main`：

```
#include <functional>
#include <iostream>

void print (int i) {
    std::cout << i;
}

int main() {
    std::function<void ()> foo = std::bind (print, 2);
    (*foo.target<void (*)()>())();
} 
```

我真的持有`std::function<void ()>`并且需要能够返回该功能；不只是调用它。我希望用法是这样的：

```
#include <functional>
#include <iostream>

void print (int i) {
    std::cout << i;
}

int main() {
    Container c (std::bind (print, 2));

    //I would expect the original
    c.func() (3); //prints 3

    if (c.func() == print) /* this is what I'm mostly getting at */
} 
```

有没有办法让原始函数返回它，或者替代方法？它也确实与返回类型发生冲突，因为它`void (*)()`与绑定签名非常匹配。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-07T19:46:55.613

这是完全不可能的。存在的全部原因`std::function`是函数指针非常糟糕，永远不应该被任何人使用，除了那些注定要承受~~地狱~~C 互操作标准的注定要失败的灵魂，因为它们无法处理带有状态的函数。

在一般情况下， A`std::function<void()>`不能转换为 a `void(*)()`。这在第一个示例中起作用的唯一原因是因为它*恰好*是`void(*)()`原始的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-24T20:35:10.693

这可以使用一点模板元编程来实现。我最近在围绕 OpenGL GLUT（取决于回调函数指针）编写通用 C++ 包装器时使用了它。该方法：

1.  实例化单例模板类型的实例。
2.  将您的 std::function 存储为单例实例的成员
3.  通过静态成员函数调用您的 std::function（静态成员函数和自由函数具有相同的类型，因此“调用”函数可以用作自由函数指针）

[在 GCC 4.8 上的 C++11](http://ideone.com/fNw61k)下测试。

```
#include <unistd.h>
#include <thread>
#include <chrono>
#include <mutex>
#include <functional>
#include <iostream>
#include <cmath>

template <const size_t _UniqueId, typename _Res, typename... _ArgTypes>
struct fun_ptr_helper
{
public:
    typedef std::function<_Res(_ArgTypes...)> function_type;

    static void bind(function_type&& f)
    { instance().fn_.swap(f); }

    static void bind(const function_type& f)
    { instance().fn_=f; }

    static _Res invoke(_ArgTypes... args)
    { return instance().fn_(args...); }

    typedef decltype(&fun_ptr_helper::invoke) pointer_type;
    static pointer_type ptr()
    { return &invoke; }

private:
    static fun_ptr_helper& instance()
    {
        static fun_ptr_helper inst_;
        return inst_;
    }

    fun_ptr_helper() {}

    function_type fn_;
};

template <const size_t _UniqueId, typename _Res, typename... _ArgTypes>
typename fun_ptr_helper<_UniqueId, _Res, _ArgTypes...>::pointer_type
get_fn_ptr(const std::function<_Res(_ArgTypes...)>& f)
{
    fun_ptr_helper<_UniqueId, _Res, _ArgTypes...>::bind(f);
    return fun_ptr_helper<_UniqueId, _Res, _ArgTypes...>::ptr();
}

template<typename T>
std::function<typename std::enable_if<std::is_function<T>::value, T>::type>
make_function(T *t)
{
    return {t};
}

int main()
{
    std::cout << (void*)get_fn_ptr<0>(make_function(::sin))<<std::endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-07T19:46:14.127

您无法从 中获取*函数指针*，`std::function`因为甚至可能没有。它可以是一个*成员函数指针*，也可以是一个*实现*`operator()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-21T10:36:45.547

这通常是不可能的*，*但大多数 C API 都有一个“上下文”指针，您可以将其与 C 函数指针一起传递。所以对于互操作，你可以用这样的东西来包装它（假设 API 首先传递这个 'context' 参数）：

```
template <class R, class... Args>
struct CFunctionPointer
{
    std::function<R(Args...)> func;

    static R callback(void* context, Args... args)
    {
        const CFunctionPointer* unpackedThis = reinterpret_cast<const CFunctionPointer*>(context);
        return unpackedThis->func(std::forward<Args>(args)...);
    }
}; 
```

然后会这样调用：

```
auto callable = CFunctionPointer<void, const uint8_t*, const uint8_t*>{ [](const uint8_t* begin, const uint8_t* end) { std::cout << "Hello world\n"; } };
cfunc(..., &callable, &callable.callback); 
```

可悲的是两次重复参数类型。

# android - 在活动之间传递数据 - Android SDK

> ID：10938775
> 
> 赞同：1
> 
> 时间：2012-06-07T19:44:22.907
> 
> 标签：android, android-intent, android-activity

我已经阅读了 2 天以前发布的问题和答案，并且尝试了建议的所有变体，并在清单中将我的 launchMode 属性设置为“标准”。

我试图在按下按钮后将数据从我的第二个活动传回我的第一个活动。在我按下按钮后，第一个活动被启动，但它不会回到我的 onActivityResult() 方法。我无法弄清楚为什么会这样。

这是我在活动 2 中的代码：

```
 Button btnAdd = (Button) findViewById(R.id.btnAdd);
    btnAdd.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            //Check that message is printed out to LogCat
            System.out.println("hello test1 Activity2");

            EditText band = (EditText) findViewById(R.id.txtBand);
            band.setFilters(new InputFilter[] {
                    new InputFilter.LengthFilter(9)
            });
            EditText album = (EditText) findViewById(R.id.txtAlbum);
            album.setFilters(new InputFilter[] {
                    new InputFilter.LengthFilter(9)
            });
            final Spinner genre = (Spinner) findViewById(R.id.spin_genre);
            TextView selection = (TextView)genre.getSelectedView();

            CharSequence strBand = band.getText();
            CharSequence strAlbum = album.getText();
            CharSequence strGenre = selection.getText();

            //Check that we got input values
            System.out.println("hello test Activity2- " + 
                    strBand + " - " + strAlbum + " - " + strGenre);

            //**********Intent Declaration************  

            Intent i = new Intent(getApplicationContext(), Activity1.class);

            i.putExtra("strBand", strBand);
            i.putExtra("strAlbum", strAlbum);
            i.putExtra("strGenre", strGenre);
            startActivityForResult(i, 0);
            setResult(RESULT_OK, i);
            finish();    

        }
    }); 
```

这是活动1：

```
 public class Activity1 extends Activity {
/** Called when the activity is first created. */
@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button addAlbum = (Button) findViewById(R.id.btnMain);
    addAlbum.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent i = new Intent();
            i.setClassName("jorge.jorge.jorge",
                    "jorge.jorge.jorge.Activity2");
            startActivity(i);

        }
    });

}// end of onCreate()

    //******************Callback Method****************************
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);
    //Checks if we got to ActivityResult
    System.out.println("hello test 2: We got to Activity1");

    if (resultCode == RESULT_OK)

    {

        Bundle returndata = data.getExtras();

        String strAlbum = returndata.getString("strAlbum");

        String strBand = returndata.getString("strBand");

        String strGenre = returndata.getString("strGenre");

        // check to see if we got the variable values from activity2
        System.out.println("hello test 2: We got to Activity1 with variables - " 
                + strBand + " - " + strAlbum + " - " + strGenre);

        //Create table layout to contains views with variable values
        TableLayout table = new TableLayout(this);
        table.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        //creates row with parameters
        TableRow row = new TableRow(this);
        row.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));

        //text views to contain variable values
        TextView tv1 = new TextView(this);
        tv1.setText(strBand);
        row.addView(tv1);
        TextView tv2 = new TextView(this);
        tv2.setText(strAlbum);
        row.addView(tv2);
        TextView tv3 = new TextView(this);
        tv3.setText(strGenre);
        row.addView(tv3);
        //adds the table row to the table layout
        table.addView(row);
    }

}// end onActivityResult() 
```

}

我不确定我的活动回调是否没有正确放置在代码中，或者我是否没有正确触发意图，或者我是否没有使用正确的方法或什么设置回调。我知道这个话题已经讨论过了，但我没有想法。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T12:07:28.800

你只是把它弄反了。如果 Activity1 应该启动Activity2，而 Activity2 应该将结果发送回 Activity1，则需要这样做：

**在活动 1 中：**

```
Intent i = new Intent();
i.setClassName("jorge.jorge.jorge", "jorge.jorge.jorge.Activity2");
startActivityForResult(i); // This starts Activity2 and waits for the result 
```

**在活动 2 中：**

```
Intent i = new Intent(getApplicationContext(), Activity1.class);
i.putExtra("strBand", strBand);
i.putExtra("strAlbum", strAlbum);
i.putExtra("strGenre", strGenre);
setResult(RESULT_OK, i);
finish();  // This closes Activity2 and generates the callback to Activity.onActivityResult() 
```

# database - 避免三个表之间的循环依赖

> ID：10938782
> 
> 赞同：1
> 
> 时间：2012-06-07T19:44:57.137
> 
> 标签：database, orm, sqlalchemy

我正在使用 sqlalchemy 设计一个数据库来存放科学测试数据。我遇到了一个我似乎无法弄清楚的问题。

在我的测试数据中，每个`Observation`都有一个 `State`（位置、速度、加速度），一个`State`有一个关联`Time`的（状态应用的时间）。到目前为止，一切都很好。我制作了一个单独的表，`Times`因为我处理不同类型的时间，并且我想使用一个参考表来指示每个时间是什么类型的时间（状态时间，观察时间等）。而且我处理的时间类型可能会改变，所以我认为以这种方式标准化会让我在未来添加新的时间类型，因为它们只是参考表中的行。

到目前为止，这部分有效（使用声明式风格）：

```
class Observation(Base):
    __tablename__ = 'tbl_observations'
    id = Column(Integer, primary_key=True)
    state_id = Column(Integer, ForeignKey('tbl_states.id'))
    state = relationship('State', uselist=False)

class State(Base):
    __tablename__ = 'tbl_states'
    id = Column(Integer, primary_key=True)
    time_id = Column(Integer, ForeignKey('tbl_times.id'))
    time = relationship('Time', uselist=False)

class Time(Base):
    __tablename__ = 'tbl_times'
    id = Column(Integer, primary_key=True)
    time_type_id = Column(Integer, ForeignKey('ref_tbl_time_types.id'))
    time_type = relationship('TimeType', uselist=False)
    time_value = Column(Float)

class TimeType(Base):
    __tablename__ = 'ref_tbl_time_types'
    id = Column(Integer, primary_key=True)
    desc = Column(String) 
```

皱纹是观察本身可以有不同的时间。`Observation`当我尝试在and之间创建一对多关系`Time`时，出现循环依赖错误：

```
class Observation(Base):
    __tablename__ = 'tbl_observations'
    id = Column(Integer, primary_key=True)
    state_id = Column(Integer, ForeignKey('tbl_states.id'))
    state = relationship('State', uselist=False)

    # Added this line:
    times = relationship('Time')

class Time(Base):
    __tablename__ = 'tbl_times'
    id = Column(Integer, primary_key=True)
    time_type_id = Column(Integer, ForeignKey('ref_tbl_time_types.id'))
    time_type = relationship('TimeType', uselist=False)
    time_value = Column(Float)

    # Added this line:
    observation_id = Column(Integer, ForeignKey('tbl_observations.id')) 
```

我猜这会中断，因为原始`Observation`-> `State`->`Time`链有一个引用到`Observation`.

有没有什么办法解决这一问题？我把我的设计搞砸了吗？我在 sqlalchemy 中做错了吗？我对这一切都很陌生，所以它可能是上述任何一种。您可以提供的任何帮助将不胜感激。

PS我尝试做这里推荐的事情：[试图避免循环引用](https://stackoverflow.com/questions/9524823/trying-to-avoid-a-circular-reference)，但要么我做错了，要么它没有解决我的特定问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T23:01:27.700

这里关于重新考虑您的用例的其他答案很有价值，您应该考虑这些。然而，就 SQLAlchemy 而言，由于多个 FK 导致的循环依赖问题由 use_alter/post_update 组合解决，记录在[http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#rows- that-point-to-themself-mutually-dependent-rows](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#rows-that-point-to-themselves-mutually-dependent-rows)。这是使用它的模型：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

Base= declarative_base()

class Observation(Base):
    __tablename__ = 'tbl_observations'
    id = Column(Integer, primary_key=True)
    state_id = Column(Integer, ForeignKey('tbl_states.id'))
    state = relationship('State', uselist=False)

    times = relationship('Time')

class State(Base):
    __tablename__ = 'tbl_states'
    id = Column(Integer, primary_key=True)
    time_id = Column(Integer, ForeignKey('tbl_times.id'))

    # post_update is preferable on the many-to-one
    # only to reduce the number of UPDATE statements
    # versus it being on a one-to-many.
    # It can be on Observation.times just as easily.
    time = relationship('Time', post_update=True)

class Time(Base):
    __tablename__ = 'tbl_times'
    id = Column(Integer, primary_key=True)
    time_type_id = Column(Integer, ForeignKey('ref_tbl_time_types.id'))
    time_type = relationship('TimeType', uselist=False)
    time_value = Column(Float)

    observation_id = Column(Integer, ForeignKey('tbl_observations.id', 
                                    use_alter=True, name="fk_time_obs_id"))

class TimeType(Base):
    __tablename__ = 'ref_tbl_time_types'
    id = Column(Integer, primary_key=True)
    desc = Column(String)

e = create_engine("postgresql://scott:tiger@localhost/test", echo=True)
Base.metadata.drop_all(e)
Base.metadata.create_all(e)

s = Session(e)

tt1 = TimeType(desc="some time type")
t1, t2, t3, t4, t5 = Time(time_type=tt1, time_value=40), \
                Time(time_type=tt1, time_value=50), \
                Time(time_type=tt1, time_value=60),\
                Time(time_type=tt1, time_value=70),\
                Time(time_type=tt1, time_value=80)

s.add_all([
    Observation(state=State(time=t1), times=[t1, t2]),
    Observation(state=State(time=t2), times=[t1, t3, t4]),
    Observation(state=State(time=t2), times=[t2, t3, t4, t5]),
])

s.commit() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:11:43.943

观察和状态之间存在多对一的关系。所以一个 State 可以有很多 Observation，每个 Observation 都有一个 State。

State 和 Times 之间也存在多对一的关系。所以一个Time可以有多个State，每个State都有一个Time。

您是正确的，因为问题是对时代观察的参考。您强制每个 Time 有一个 Observation，而后者又必须有一个 State，而 State 又必须有一个 Time（然后循环永远重复）。

要打破这一点，您需要弄清楚您在这些关系中实际试图描绘的内容。如果一个观察有一个状态，它有一个时间，那么观察有一个时间（你可以从状态中得到时间）。

所以你需要回答的真正问题是：说一个时间有一个观察是什么意思？您将如何在您的应用程序中使用它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T20:36:52.723

我想我没有完全了解您的对象模型中的模型名称以及它们与现实世界的对应关系。但我会尝试猜测。首先，我怀疑该模型`Time`（看起来相当基本且几乎没有逻辑）是否应该具有`ForeignKey`一些更高级别的模型类`Observation`。鉴于此，我认为您的模型不是一个`n-1`关系链，而是一种[三元关系](http://doc.gnu-darwin.org/usersguide/usersguidenode11.html#SECTION001111400000000000000)。所以我可以看到你的模型如下：

```
class Base(object):
    id = Column(Integer, primary_key=True)

class Observation(Base):
    __tablename__ = 'tbl_observations'

class ObservationInstance(Base):
    __tablename__ = 'tbl_observation_instances'
    observation_id = Column(Integer, ForeignKey('tbl_observations.id'))
    state_id = Column(Integer, ForeignKey('tbl_states.id'))
    time_id = Column(Integer, ForeignKey('tbl_times.id'))

    # relationships
    observation = relationship('Observation', backref="instances")
    state = relationship('State')
    time = relationship('Time')

class State(Base):
    __tablename__ = 'tbl_states'

class Time(Base):
    __tablename__ = 'tbl_times'
    time_type_id = Column(Integer, ForeignKey('ref_tbl_time_types.id'))
    time_type = relationship('TimeType', uselist=False)
    time_value = Column(Float)

class TimeType(Base):
    __tablename__ = 'ref_tbl_time_types'
    desc = Column(String) 
```

希望这有任何意义，并且适合您尝试建模的*真实世界。*我假设您的模型代表某种（科学）实验。在这种情况下，我将重命名`Observation -> Experiement`和`ObservationInstance -> Observation`.

# django - 使用 Django 在 Heroku 上的大文件 PUT 请求

> ID：10938787
> 
> 赞同：2
> 
> 时间：2012-06-07T19:45:29.500
> 
> 标签：django, api, file-upload, heroku, django-file-upload

我正在为 Django 应用程序创建一个 API，其中一个 PUT 请求允许上传（非常）大文件。我正在尝试在 Heroku 上托管应用程序，但在文件上传、30 秒限制和临时文件系统方面遇到了一些问题。我现在正在尝试将文件传递到 s3 存储桶（通过 boto 并滥用该`multipart_upload`功能），但在上传完成之前该过程即将结束。我很早就发现[了这个非常有用的答案](https://stackoverflow.com/questions/5731984/how-do-i-handle-file-upload-via-put-request-in-django)，这对于一般的 API 来说是极好的建议，但并不能解决 Heroku 问题。

### 在我看来

```
for i, handler in enumerate(upload_handlers):
    chunk = request.read(handler.chunk_size)
        while chunk:
            handler.write_multipart_upload(chunk, counters[i], filename=file_name)
            counters[i] += len(chunk)
            chunk = request.read(handler.chunk_size)

for i, handler in enumerate(upload_handlers):
    file_obj = handler.file_complete(counters[i]) 
```

### 在我的处理程序中

```
def write_multipart_upload(self, raw_data, start, filename=None):
    if not self.mp:
        self._validate_file(filename=filename)
        self.mp = self.bucket.initiate_multipart_upload('feeds/' + self.file_name)

    self.buffer.write(raw_data)

    if self.buffer.len:
        self.buffer.seek(0)
        self.mp.upload_part_from_file(self.buffer, self.total_chunks)
        self.buffer.close()
        self.buffer = StringIO()

def file_complete(self, file_size):
    self.mp.complete_upload()
    self.file 
```

也许这变得太复杂了。在这一点上，我正在寻找简单且可维护的东西。如果有人有一个基于 PUT 的大文件上传 API 的可靠示例，我会废弃 Heroku 并对此感到满意。提前致谢。

# java - JEdi torPane 不想显示在 html 中完成的按钮（它显示在浏览器中）

> ID：10938790
> 
> 赞同：2
> 
> 时间：2012-06-07T19:45:35.700
> 
> 标签：java, html, button, jeditorpane

我在 html 中创建了一个按钮并将其链接到另一个 html 文件，当我在浏览器中使用按钮打开文件（尝试 IE 和 FFox）时，按钮显示并正常工作，但是当我 JEditorPane.setPage（带有按钮）唯一显示的是按钮的名称，没有实际的可点击区域或任何东西！关于如何让按钮出现在窗格内的任何想法？

这是java框架中按钮的图片（按钮以红色圈出） [http://tinypic.com/r/fopswo/6](http://tinypic.com/r/fopswo/6)

这是浏览器中按钮的图片（它是一个按钮） [http://tinypic.com/r/2zjj71z/6](http://tinypic.com/r/2zjj71z/6)

按钮的代码

```
<font size = 12 face = "verdana" ><u> Creating An Account   </u></font> 
<span style="padding-left:360px"> </span>
<button onclick="window.location.href ='file:///F:/java 12/Isp/help file try/doc 2/test.html'">Back</button> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:14:23.300

Swing 的 HTML 支持不完整——我认为您已经陷入其中一个漏洞。更多信息在这里：

[Swing 组件支持哪些 HTML 标签？](https://stackoverflow.com/questions/872871/which-html-tags-are-supported-in-swing-components)

# javascript - javascript中的自定义事件

> ID：10938794
> 
> 赞同：2
> 
> 时间：2012-06-07T19:45:58.080
> 
> 标签：javascript

我知道有很多像我这样的问题，但我不认为这是重复的。

我想创建自己的自定义事件，例如 onresize 或 onshake。

我想创建一个库，然后我的库的用户会这样写：

```
<script src="theLib.js" ></script>
<script>
window.addEventListener("shake",myFunc,false);
</script> 
```

我在 stackoverflow 上看到了很多教程和问题，但要么他们使用 jQuery（我想要最简单的例子来制作自定义事件），要么用户不能只写`window.addEventListener`.

你能解释一下添加自定义事件的最基本方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:25:58.157

我终于找到了答案：

```
//Library part
var evt=document.createEvent("Event");
evt.initEvent("foo",true,true);
function blah()
{
    window.dispatchEvent(evt);
}
window.addEventListener("load",blah,false);

//User part
window.addEventListener("foo",function(){alert("Hi");},false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:49:28.150

你会想以某种方式触发事件。这个答案给出了特别好的深度：[如何在 JavaScript 中触发事件？](https://stackoverflow.com/questions/2490825/how-to-trigger-event-in-javascript)

不过，您可能必须使用`document`而不是`window`。

# jquery - 当 Soundcloud html5 小部件被 jQuery 隐藏时，音频暂停

> ID：10938800
> 
> 赞同：1
> 
> 时间：2012-06-07T19:46:15.677
> 
> 标签：jquery, html5-audio, soundcloud

关于[本](http://cosystudios.com/thecosystudio.co.uk/thecosystudio.html)网站

## 简介

单击左侧的*Listen*选项卡会显示一个 soundcloud 播放器（实际上是几个，在可滚动窗格中）单击播放并检查关闭面板（使用 jQuery hide() 方法）是否也会停止音频。

根据我对 hide() 方法的了解，对象只是隐藏而不是销毁。使用 Firefox 检查器，这似乎是真的，因为我仍然可以在隐藏后查看 soundcloud 播放器的实例。那么为什么音频会暂停呢？

## 使用代码

当前影响“抽屉”的 jquery

```
$(document).ready(function(){
            $(".sctrigger").click(function(){
                $(".scdrawer").toggle("slow");
                $(this).toggleClass("active");
                return false;
             });
            $("#scMain").scrollable({
                  vertical: true,
                 keyboard: 'static',
  }).navigator("#scNavi"); 
```

## 目标

我不想在关闭滑出面板时中断播放打开。

附加功能，但是最好调用播放器并在关闭时保留在页面上的*“收听”选项卡中显示曲目名称和艺术家以及**停止*按钮

 *## 潜在的解决方案

如果播放器被销毁，是否有一个 jquery 方法可以隐藏播放器而不是完全删除它？

我有一种感觉，一种解决方案是将播放器代码嵌入页面中，并使用 soundcloud api 使用我自己的图标等调用函数，但这是很多构建时间，特别是考虑到我的不熟悉和最少的经验..当我'对 html5 小部件非常满意。

关于附加功能；可以在小部件上使用任何基于 java 的调用来获取跟踪信息吗？

这是我的第一篇文章，如果我不遵守标准，我深表歉意，并且非常感谢 SO 上的社区。喜欢这个网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:10:27.003

我无法重新创建错误（Ubuntu 上的 Chrome 19、Firefox 13）：即使快速单击“收听”选项卡，播放也能继续正常。

jQuery.hide 确实只是隐藏了您指定的任何容器元素并且不触及任何子节点，因此它们绝对不会被破坏。

它是永久暂停，还是只是导致播放暂时中断？如果是后者，问题的一部分可能是浏览器必须执行隐藏动画的额外处理阻止了音频播放？这有点令人惊讶，因为我以前从未见过 javascript/rendering 影响媒体播放。您可以通过从隐藏中删除动画来测试它是否会改变任何内容。

在获取曲目信息或通过您自己的调用控制播放方面，您可以使用[小部件 API](http://developers.soundcloud.com/docs/html5-widget#)。要获取曲目信息（即[API 文档](http://developers.soundcloud.com/docs/api/reference#tracks)中描述的数据，如标题、艺术品 url、用户名等），您可以使用`SC.Widget(...).getCurrentSound()`*

# c++ - 如何使用 OpenCV 以固定帧速率 (fps) 播放任何视频？

> ID：10938804
> 
> 赞同：9
> 
> 时间：2012-06-07T19:46:46.877
> 
> 标签：c++, opencv, computer-vision

OpenCV中是否有任何方法或功能可以让我们以固定帧速率（fps）播放任何视频？不同的视频可能有不同的帧速率，但是通过使用 OpenCV 库，我们可以按照我们定义的固定帧速率播放它们吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-21T18:09:35.573

```
int fps = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);
int delay = 1000 / fps;

while (true) {
    clock_t startTime = clock();

    capture.read(frame);
    process();

    imshow("video", frame);

    while (clock() - startTime < delay) {
        waitKey(1);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:08:13.320

看看[这篇文章](http://nashruddin.com/how_to_play_avi_files_with_opencv)。它展示了如何使用 OpenCV 播放 AVI 文件。在这里，使用读取帧速率

```
int fps = ( int ) cvGetCaptureProperty( capture, CV_CAP_PROP_FPS ); 
```

延迟是通过设置的

```
key = cvWaitKey( 1000 / fps ); 
```

因此，通过控制`fps`变量，您可以获得您想要的播放速率。

# c - 从 C 中的文件中获取输入

> ID：10938808
> 
> 赞同：-3
> 
> 时间：2012-06-07T19:46:55.713
> 
> 标签：c, file, file-io, input

大家好，我尝试将所有城市名称保存在一个数组中，但我无法得到结果，我该怎么做？

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
int main(int argc, char* argv[]){
char**city1,** city2;
int distance,i=0;

city1 = (char**) malloc(sizeof(char*));
city2 = (char**) malloc(sizeof(char*));
    FILE* data;
data = fopen(argv[1],"r");
     //fscanf(data, "%s %s %d", city1,city2, &distance);

city1[0] = (char*)malloc(sizeof(char)*10);
city2[0] = (char*)malloc(sizeof(char)*10);
while(fscanf(data, "%s %s %d",city1[i],city2[i], &distance)!=EOF){
city1[i] = (char*)malloc(sizeof(char)*10);
city2[i] = (char*)malloc(sizeof(char)*10);
printf("%s\n%s\n%d\n", city1[i], city2[i], distance);
i++;}
fclose(data);
return 0;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:50:04.317

你需要第二对 malloc 之前`fscanf()`。您正在将输入写入内存的随机部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:51:45.533

您已注释掉的行是需要的：更改

```
 /*city1[0] = (char*)malloc(sizeof(char)*10);
city2[0] = (char*)malloc(sizeof(char)*10);*/ 
```

至：

```
city1[0] = (char*)malloc(sizeof(char)*10);
city2[0] = (char*)malloc(sizeof(char)*10); 
```

因为没有它， char * 指针将指向任意（无效）位置。

顺便说一句，作为旁注，这是不好的做法 1\. 强制转换`malloc()`, 2\. 的返回值。使用`sizeof(type)`而不是`sizeof(*variable)`. 所以你最好把你的代码改成

```
city1[0] = malloc(sizeof(city[0][0]) * 10);
city2[0] = malloc(sizeof(city[0][0]) * 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:00:10.910

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

int main(int argc, char* argv[]){
    char **city1, **city2;
    int distance,i=0;

    city1 = (char**) malloc(sizeof(char*));
    city2 = (char**) malloc(sizeof(char*));
    FILE* data;
    data = fopen(argv[1],"r");
     //fscanf(data, "%s %s %d", city1,city2, &distance);

    city1[0] = (char*)malloc(sizeof(char)*10);
    city2[0] = (char*)malloc(sizeof(char)*10);
    while(fscanf(data, "%s %s %d ",city1[i],city2[i], &distance)!=EOF){
        printf("%s\n%s\n%d\n", city1[i], city2[i], distance);
        ++i;
        city1 = (char**)realloc(city1, (i+1)*sizeof(char*));
        city2 = (char**)realloc(city2, (i+1)*sizeof(char*));
        city1[i] = (char*)malloc(sizeof(char)*10);
        city2[i] = (char*)malloc(sizeof(char)*10);
    }
    fclose(data);
    {//check & free
        int j;
        for(j=0;j<i;++j){
            printf("%s\t%s\n", city1[j],city2[j]);
            free(city1[j]);free(city2[j]);
        }
        free(city1[j]);free(city2[j]);//OK?
        free(city1);free(city2);
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T21:16:15.163

这么简单的代码有很多问题。

首先，请注意

```
city1 = malloc(sizeof (char *)); 
```

只分配一个*实例* `char *`，而不是一个数组`char *`。您基本上已经分配`city1`并`city2`持有一个指向`char`每个指针。如果你想`city1`和`city2`每个人都持有`N`指向 的指针`char`，那么你需要把它写成

```
city1 = malloc(sizeof (char *) * N); 
```

或者

```
city1 = malloc(sizeof *city1 * N); 
```

我更喜欢。的类型`*city1`是`char *`，所以`sizeof *city1`== `sizeof (char *)`。如果`city1`ever 的类型发生更改，您将不必在`sizeof`表达式中复制该更改。

所以：

```
city1 = malloc(sizeof *city1 * N);
city2 = malloc(sizeof *city2 * N); 
```

但是，这两个数组中的元素都没有指向任何有意义的地方；您必须为每个名称分配内存，并相应地分配指针：

```
city1[i] = malloc(sizeof *city1[i] * 10); 
```

既然是的类型`city1[i]`，`char *`那么的类型`*city[i]`就是`char`。

一个真正的问题是循环的结构：

```
city1[0] = (char*)malloc(sizeof(char)*10);
city2[0] = (char*)malloc(sizeof(char)*10);
while(fscanf(data, "%s %s %d",city1[i],city2[i], &distance)!=EOF){
city1[i] = (char*)malloc(sizeof(char)*10);
city2[i] = (char*)malloc(sizeof(char)*10);
printf("%s\n%s\n%d\n", city1[i], city2[i], distance);
i++;} 
```

由于`i`第一次通过循环时为 0，因此您最终会覆盖存储在前两行中的指针，这意味着您忘记了将第一个城市名称写入的内存。然后你 increment `i`，所以下一次通过循环`city1[i]`并且`city2[i]`不指向你刚刚分配的内存 *。*

您可能想稍微重新组织一下您的逻辑。我们现在需要跟踪两件事；`city1`我们在and中分配了多少元素`city2`，以及我们是否在输入文件的末尾。如果是我，我会这样做：

```
for (i = 0; i < N; i++)
{
  // first, allocate memory for the current array elements
  city1[i] = malloc(...);
  city2[i] = malloc(...);
  // *then* read from the input file into those array elements
  if (fscanf(...) != EOF)
  {
    printf(...);
  }
  else
  {
    break;
  }
} 
```

这将遍历输入文件，直到我们运行超过数组的末尾（for 循环的条件）或者我们在输入流中遇到 EOF（这将导致我们执行`break`语句，立即退出循环）。

我认为您通过动态分配*所有内容*使自己的生活变得更加困难。对于第一遍，您可能只想为数组假设固定大小。您可以稍后添加更多智能。如果您知道您的城市名称长度永远不会超过 9 个字符，并且您知道您处理的城市不超过 N 个，那么只需静态声明所有内容：

```
char city1[N][10];
char city2[N][10];
...
while (i < N && fscanf(data, "%s %s %d\n", city1[i], city2[i], &distance) != EOF)
{
  printf("%s\n%s\n%d\n", city1[i], city2[i], distance);
} 
```

最终你*会*想要学习如何动态分配和扩展数组，但很明显你需要在此之前进行一些练习。走之前不需要跑。

# php - 如何在 Zend Framework 2 中创建通用模块/控制器/动作路由？

> ID：10938809
> 
> 赞同：2
> 
> 时间：2012-06-07T19:46:57.173
> 
> 标签：php, zend-framework2, zend-framework-modules

我想在 Zend Framework 2 中创建一个通用模块/控制器/动作路由以用于 ZF2 MVC 架构。

在 ZF1 中，默认路由定义为`/[:module][/:controller][/:action]`模块默认为`default`，控制器默认为`index`，动作默认为`index`。

现在，ZF2 改变了模块的预期方式，从简单的控制器和视图组到真正的独立应用程序，将控制器名称显式映射到控制器类。

由于所有控制器名称在所有模块中都必须是唯一的，因此我想将它们命名为，`modulename-controllername`但我希望 URL 看起来像这样`/modulename/controllername`，而不需要为每个模块创建特定的路由，使用类似于上述 ZF1 的旧默认路由。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T21:08:45.723

是的，这是很有可能的，但你必须做一些工作。使用以下配置：

```
 'default' => array(
            'type'    => 'My\Route\Matcher',
            'options' => array(
                'route'    => '/[:module][/:controller[/:action]]',
                'constraints' => array(
                    'module' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                ),
                'defaults' => array(
                    'module'     => 'default',
                    'controller' => 'index',
                    'action'     => 'index',
                ),
            ),
        ), 
```

然后你必须编写自己的`My\Route\Matcher`来创建 MVC 可以使用的 Routemap 对象。这并不难，看看框架中已经存在的其他路由匹配器，你就会明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:55:28.503

如果您使用 Zend Skeleton Application，您已经配置了这个默认控制器。

见这里[https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T10:42:34.323

要为 zf2 模块提供通用/标准路由系统，这是我仅针对一个控制器“module\controller\index”（默认控制器）的解决方案：

```
'router' => array(
    'routes' => array(              
        'default' => array(
            'type'    => 'Literal',
            'options' => array(
                'route'    => '/', // <======== this is take the first step to our module "profil"
                'defaults' => array(
                    'module'     => 'profil',
                    'controller' => 'profil\Controller\Index',
                    'action'     => 'index',
                ),
            ),
        ),              
        'profil' => array(
            'type'    => 'Segment',
            'options' => array(
                'route'    => '/[profil][/:action]', // <======== this is take the next steps of the module "profil"
                'constraints' => array(
                    'module' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                ),
                'defaults' => array( // force the default one
                    'module'     => 'profil',
                    'controller' => 'profil\Controller\Index',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
), 
```

然后在我们的控制器“profil\Controller\Index”中，我们有三个动作“index”“home”“signout”：

```
public function indexAction()
{
        if ($this->identity()) {
            return $this->redirect()->toRoute('profil',array('action'=>'home'));
        } else {
            // ......
                    $authResult = $authService->authenticate();
                    if ($authResult->isValid()) {
                            //......
                                                    return $this->redirect()->toRoute('profil',array('action'=>'home'));
                    } else {
                        // ......
                    }
                } else {
                    $messages = $form->getMessages();
                }
            }               
            return new ViewModel();
        }
}

public function homeAction()
{
    if (!$this->identity()) {
        return $this->redirect()->toRoute('profil',array('action'=>'signout'));
    }
}

public function signoutAction()
{
    if ($this->identity()) {
        $authService = $this->getServiceLocator()->get('Zend\Authentication\AuthenticationService');
        $authService->clearIdentity();
    }
    $this->redirect()->toRoute('profil');
} 
```

无论如何谢谢你:)

# php - 侧边栏样式 CSS

> ID：10938817
> 
> 赞同：-2
> 
> 时间：2012-06-07T19:47:22.190
> 
> 标签：php, css, sidebar

我正在尝试将侧边栏上小部件的内部颜色设置为白色，以便文本可见。有谁知道最好的方法。您可以查看[网站](http://www.popglitch.com)以了解我的意思。页面底部的最后一个小部件内部是白色的，但我不知道是否需要在 CSS 或 PHP 中处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:08:05.487

我去了你的网站......你具体想改变什么颜色？比如内容说了什么？

我建议使用 CSS 来设置 HTML 页面的样式。如果您使用的是 Firefox，我建议您使用插件 Firebug，它允许您检查 HTML 和 CSS。在 Chrome 中，此功能已内置，您只需右键单击页面并选择“检查元素”即可。一旦找到元素（更具体地说是元素的类或 id），添加一些 CSS。找到某种方式在您构建页面的任何平台上覆盖 CSS（如放置自定义 CSS 文件的位置）。

例如，如果您想更改主页的整个背景（减去灰色边缘），请在您的 CSS 文件中添加 .container{background: green}。

如果您指定要更改的内容，我可以专门为您提供帮助。并像上面所说的那样支持人们的答案，这样用户就会想回答你的问题:)

# html - 创建批处理/视觉基本脚本以将随机引用放入 html 文件

> ID：10938818
> 
> 赞同：3
> 
> 时间：2012-06-07T19:47:26.630
> 
> 标签：html, vbscript, batch-file, jscript

在工作中，我们的最终用户使用的是 Windows XP 并使用 Outlook Express。每当用户撰写电子邮件或回复电子邮件时，Outlook Express 都会“读取”位于 c:\ 上的静态 html 文件，并将其内容用作签名。这工作得很好。

现在我的同事给了我一个包含 100 多行的简单文本（.txt）文件，每行包含一个“励志名言”。

我的目标是以某种方式从这个文本文件中提取一个随机引用，并插入到静态 html 签名文件中。

由于我仅限于 XP 本机支持的内容并且无法安装任何其他软件，例如 python，我认为批处理或 vbscript 将是正确的选择（如果不是唯一的）。我想象一个通过执行的脚本。Windows 任务计划程序每隔 15 分钟左右随机读取 .txt 文件中的一行，并将其更新到静态 html 签名文件中。

这是否有可能，或者批处理和 vbscript 都不能做这样的事情？

任何帮助或建议将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:21:13.843

您可以创建一个签名模板，其中包含由延迟扩展替换的嵌入变量。任何感叹号`!`或插入符号`^`文字也必须编码为变量：

`!QUOTE!`= 随机引用
`!X!`= 感叹号文字
`!C!`= 插入符号文字（可能不需要）

可以根据需要将其他变量添加到模板中。

这是一个简单的 HTML 模板作为示例

```
<!X!doctype html>
<html>
  <head>
    <title>Random Quote</title>
  </head>
  <body>
    <p><strong>!QUOTE!</strong></p>
  </body>
</html> 
```

下面的批处理文件会从引用文件中随机选择一个引用，替换模板中的变量后写出签名文件。

*编辑 - 我通过使用 FOR /F 而不是 SET /P 来读取报价行，从而提高了性能并稍微改变了限制。*

```
@echo off
setlocal disableDelayedExpansion

::Define the files
set quoteFile="quotes.txt"
set signatureTemplate="template.txt"
set signatureFile="signature.html"

::Define constants for ! and ^ substitutions in template
set "X=!"
set "C=^"

::Count the number of quotes
for /f %%N in ('find /c /v "" ^<%quoteFile%') do set quoteCount=%%N

::Pick a random number of quotes to skip
set /a "skip=%random% %% %quoteCount%"

::Load the selected quote into a variable
if %skip% gtr 0 (set skip=skip=%skip%) else (set skip=)
for /f "usebackq %skip% delims=" %%A in (%quoteFile%) do (
  set quote=%%A
  goto :break
)
:break

::Read the signature template and write the signature file
::Delayed expansion will automatically replace !quote!, !X! and !C!
setlocal enableDelayedExpansion
>%signatureFile% (
  for /f "usebackq delims=" %%A in (%signatureTemplate%) do echo %%A
) 
```

编写的脚本有一些限制：

*   空白或以开头的模板`;`行将被跳过
*   引号文件不能有任何空行或以`;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:14:11.287

这是一个批处理脚本，它将一次性从文件中获取随机行，然后将其打印到控制台并将其写入文件。

因此，我所拥有`echo !LINE!`的地方就是您编写 HTML 文件的地方。批处理实际上有点痛苦，因为`>`, `<`, `%`, `^`, `!`, 和其他字符很特殊，需要`^`在前面转义。

```
@echo off
SET /A LINE_NUM=0
SET LINE=

setlocal EnableDelayedExpansion

for /F "delims=" %%l in (random_lines.txt) do (
        call:rand 0 !LINE_NUM!
        IF !RAND_NUM! LSS 1 (
                SET LINE=%%l
        )
        SET /A LINE_NUM=!LINE_NUM! + 1
)

echo !LINE!
echo ^<^^!doctype html^>^<html^>^<head^>^<title^>Random Quote^</title^>^</head^>
 > %OUT_FILE%
echo ^<body^>^<p^>^<strong^>!LINE!^</strong^>^</p^> >> %OUT_FILE%
echo ^</body^>^</html^> >> %OUT_FILE%

goto :EOF

REM rand()
REM Input: %1 is min, %2 is max
REM Output: RAND_NUM is set to a random number from min through max.
:rand
SET /A RAND_NUM=%RANDOM% * (%2 - %1 + 1) / 32768 + %1
goto :EOF 
```

或者，也许更好，而不是将 HTML 放在批处理文件中，您可以将它分成两部分保存在单独的文件中。将这两部分连接起来并生成完整 HTML 文件的胶水就是您选择的那一行。例如，我可以创建一个名为的文件`sig_file_header.txt`，其中包含以下内容：

```
<!doctype html>
<html>
    <head>
    <title>Random Quote</title>
    </head>

    <body>
    <p><strong> 
```

然后我可以创建一个`sig_file_footer.txt`用这个调用的文件：

```
 </strong></p>
    </body>
</html> 
```

请注意，当我将这些文件放在一起时，页眉后跟页脚，我得到了一个完整的 HTML 文档。因此，当我将它们放在一起时，我可以将脚本选择的行填入其中，并获得包含该行的完整 HTML 文档。

这样做很容易。`echo !LINE!`将上面脚本中以开头的 4 行替换为以下 3 行：

```
type sig_file_header.txt > new_signature_file.html
echo !LINE! >> new_signature_file.html
type sig_file_footer.txt >> new_signature_file.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:59:25.990

你需要

1.  获取文件中的行数。
2.  获取一个介于 1 和行数之间的随机数 n。
3.  从文件中获取第 n 行。

使用批处理脚本完成这应该相当简单。不幸的是，我不知道任何 Windows 批处理脚本，所以我无法提供更多建议。

# java - 如何从纯文本文件中提取嵌入的 XML 内容？

> ID：10938821
> 
> 赞同：3
> 
> 时间：2012-06-07T19:47:30.940
> 
> 标签：java, xml

我有一个巨大的文本文件，我想编写一个程序，它只能从文件中提取 XML 并保存它。

是否有直接的 API 或比拆分/修剪从文件中读取的字符串更好的解决方案。

示例：文件的一小部分：

```
#---------- #1 :  ----------#
<MSG_INFO>
<message type="TextMessage" messageSelector="" originationTimestamp="" receiveTime="" jmsServerTimestamp="" jmsMsgExpiration="">
    <header JMSDestinationType="Generic" JMSDeliveryMode="2" />
    <properties>
        <property name="messageTopic" type="String">xyz</property>
    </properties>
</message> 
```

```
 BodyLength=1476
<?xml version="1.0"?>
<catalog>
<book id="bk101">
  <author>Gambardella, Matthew</author>
  <title>XML Developer's Guide</title>
  <genre>Computer</genre>
  <price>44.95</price>
  <publish_date>2000-10-01</publish_date>
  <description>An in-depth look at creating applications 
  with XML.</description>
</book>
<book id="bk102">
  <author>Ralls, Kim</author>
  <title>Midnight Rain</title>
  <genre>Fantasy</genre>
  <price>5.95</price>
  <publish_date>2000-12-16</publish_date>
  <description>A former architect battles corporate zombies, 
  an evil sorceress, and her own childhood to become queen 
  of the world.</description>
</book> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:04:14.943

通常，XML 文件是文本文件，因此您要么拥有一个 XML 文件，要么拥有一个包含多个 XML 片段的文件。

如果是前者，您需要了解 XML 处理（SAX、DOM 等）以获取 XML 文档的结构化内容，那么您可以使用其结构保存该内容。这在想要重新格式化 XML 文档时很有用（例如在嵌套标签中使用制表符或将所有内容放在一行中）。

如果是后者，则需要编写解析器，然后使用 XML 处理工具。第一个解析器将查找任何看起来是 open-XML 标记的内容，然后跟踪标记在文本文件中的位置，计算随后的打开和关闭标记，直到它检测到它离开初始标记的顶层嵌套. 然后它需要将嵌入的文本块（不传递文档的其余部分）传递给适当的 XML 解析工具，然后它可能会形成 XML 的表示视图，然后可以将其重新处理回文本以保存在它的自己的文件。

当然，后者可以优化为在检测到开始和结束边界后不实际解析 XML；但是，如果不实际解析 XML，则无法保证生成的文本块实际上是有效的 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:56:24.350

正则表达式就是答案。

```
String[] newXml = xml.split("\\<\\?");
    ArrayList<String> xmlList = new ArrayList<>(Arrays.asList(newXml));
    for(int i = 0; i<xmlList.size();i++){
        if(!xmlList.get(i).contains("xml version=\"1.0\" encoding=\"UTF-8\"")){
            xmlList.remove(i);
        }

    }
    for(int j = 0;j<xmlList.size();j++){
        xmlList.set(j, "<?"+xmlList.get(j));
        xmlList.set(j,xmlList.get(j).split("\\#")[0]);
    }

    return xmlList; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:56:21.890

考虑看看这些 Java XML Parsing：

*   [JDOM](http://www.jdom.org/)
*   [XOM](http://xom.nu/)
*   [伍德斯托克斯](http://woodstox.codehaus.org/)

# php - 如何将 readfile() 中的内容分配给变量？

> ID：10938822
> 
> 赞同：5
> 
> 时间：2012-06-07T19:47:38.727
> 
> 标签：php, file, variables

readfile() 说它输出内容，但我希望将内容保存在变量中。我怎么做？我试过 $content=readfile("file.txt") 但这并不正确。

我想这样做：

```
$data=readfile("text.txt");
echo htmlentities($data); 
```

这应该让您了解我希望它如何工作。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-07T19:48:57.117

这就是[file_get_contents](http://php.net/file-get-contents)的用途：

```
$data = file_get_contents("text.txt");
echo htmlentities($data); 
```

如果您必须使用[readfile](http://php.net/readfile)，您可以使用输出缓冲将内容放入变量中：

```
ob_start();
readfile("text.txt");
$data = ob_get_clean();
echo htmlentities($data); 
```

我不明白为什么你会在这种情况下避免[file_get_contents](http://php.net/file-get-contents)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:49:27.680

readfile() 将文件的内容写入缓冲区。请改用 file_get_contents()。

# python - 带有 urlencoded 多维字典的 Python POST

> ID：10938824
> 
> 赞同：1
> 
> 时间：2012-06-07T19:47:42.750
> 
> 标签：python, post, urlencode

我有许多函数可以使用 python 成功发布一个 urlencoded 正文。但是，我有一个多维字典的主体。使用这本字典，我只得到一个 400（错误请求）。bodytmp（下）是使用 Fiddler 工作的 body 示例。（无法提供实际的 url 和正文。）我还包括了一个递归 urlencode 函数，我在这里找到并正在使用但没有成功。

有没有人对这种类型的 POST 请求有使用 urlencoded 正文的多维字典的经验？

谢谢你。（我已经缩写了代码以使其更具可读性，但这是要点。）

从 httplib2 导入 Http 导入 httplib 导入 urllib

def postAgentRegister():

```
h = Http(disable_ssl_certificate_validation=True)
headers={'Content-Type':'application/x-www-form-urlencoded'}

bodytmp={"Username": "username",
        "Password": "password",
        "AccountId": "accountid",
        "PublicKey": {
        "Value1a": "32ab45cd",
        "value1b": "10001"
                     },
        "snId": "SN1",
        "IpAddresses": {
        "Value2a": ["50.156.54.45"],
        "Value2b": "null"
                   }
        }

body=recursive_urlencode(bodytmp)

try:
    response,content=h.request('https://server/endpoint','POST',headers=headers,body=body)
    conn = httplib.HTTPConnection(testserver)
    conn.request('POST', endpoint, body, headers)
    r1 = conn.getresponse()
    status = r1.status
    reason = r1.reason

except httplib.HTTPException, e:
    status= e.code

print 'status is: ', status 
```

def recursive_urlencode(d): def recursion(d, base=None):pairs = []

```
 for key, value in d.items():
        if hasattr(value, 'values'):
            pairs += recursion(value, key)
        else:
            new_pair = None
            if base:
                new_pair = "%s[%s]=%s" % (base, urllib.quote(unicode(key)), urllib.quote(unicode(value)))
            else:
                new_pair = "%s=%s" % (urllib.quote(unicode(key)), urllib.quote(unicode(value)))
            pairs.append(new_pair)
    return pairs

return '&'.join(recursion(d)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:31:08.817

我是否可以建议您将正文序列化为 JSON 并在服务器接收到它时反序列化？这样你只需要做一个 url 字符串编码，而不是使用你自己的递归 url 编码。

# sql-server - LINQ to SQL 异常

> ID：10938828
> 
> 赞同：2
> 
> 时间：2012-06-07T19:47:51.703
> 
> 标签：sql-server, linq-to-sql

我正在尝试学习 LINQ to SQL。我遇到了一些我不明白的事情。这是 LINQ 程序（vb.net）：

```
Imports System.IOModule Module1    
Sub Main()
        Dim crs = New DataClasses1DataContext()
        Dim sw As New StringWriter()
        crs.Log = sw
        Dim reports = From report In crs.CRS_Report_Masters
                      Group report By report_id = report.Report_ID Into grouped = Group
                      Select New With {
                          .reportId = report_id,                          
                         .two = grouped.Sum(
                              Function(row) row.active_report * row.Report_ID)
                          }
        For Each report In reports
            Console.WriteLine("{0} {1}", report.reportId, report.two)
        Next        
MsgBox(sw.GetStringBuilder().ToString())    
End Sub
End Module 
```

这是它产生的 SQL：

```
SELECT SUM([t1].[value]) AS [two], [t1].[Report_ID] AS [reportId]  FROM (
      SELECT (-(CONVERT(Float,[t0].[active_report]))) *
            (CONVERT(Float,CONVERT(Float,[t0].[Report_ID]))) AS [value], [t0].[Report_ID]
      FROM [dbo].[CRS_Report_Master] AS [t0]
      ) AS [t1]  GROUP BY [t1].[Report_ID]
  -- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.0.30319.1 
```

我不明白为什么括号中的数学之前的 SQL 中有一个减号。我没有在 LINQ 查询中指定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:09:16.620

如果我没记错的话，VB.NET 将 -1 视为 Boolean True，而 SQL 将 +1 视为 Boolean True。因此，减号是 VB.NET 正确解释 active_report 字段所必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:33:11.727

所以，现在我明白发生了什么。对应于 SQL 位的列的 LINQ to SQL 定义是一个 .net 布尔值。很公平。但是，在使用它进行数学运算时，编译器会否定 ekolis 所描述的值。我没想到——事实上我认为这是一个错误，因为我没有得到我期望的结果。例如，如果active_report=1 和report_id=123，我希望得到“123”，但我得到的是“-123”。我修改了这样的查询：

```
Dim reports = (From report In crs.CRS_Report_Masters
                  Group report By report_id = report.Report_ID Into grouped = Group
                  Select New With {
                      .reportId = report_id,
                      .two = grouped.Sum(
                          Function(row) If(row.active_report, 1, 0) * CInt(row.Report_ID))
                      }) 
```

将生成的 SQL 更改为：

```
SELECT SUM([t1].[value]) AS [two], [t1].[Report_ID] AS [reportId]  FROM (
      SELECT (
          (CASE
              WHEN (COALESCE([t0].[active_report],@p0)) = 1 THEN @p1
              ELSE @p2
           END)) * (CONVERT(Int,[t0].[Report_ID])) AS [value], [t0].[Report_ID]
      FROM [dbo].[CRS_Report_Master] AS [t0]
      ) AS [t1]  GROUP BY [t1].[Report_ID]
  -- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
  -- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
  -- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
  -- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.0.30319.1 
```

我想这是有道理的，尽管这是一种获得预期结果的迂回方式。我相信，在 T-SQL 中，一个简单的 SELECT [BOOLEAN]*[INTEGER] 将达到相同的结果。经验教训：不要相信 LINQ 总是做正确的事。检查它的工作！

# c# - WebBrowser 控件中的 OpenXML SDK WordprocessingDocument 显示

> ID：10938832
> 
> 赞同：1
> 
> 时间：2012-06-07T19:48:26.980
> 
> 标签：c#, openxml

我目前正在尝试这个：

```
using DocumentFormat.OpenXml.Packaging;
using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(fileNameDocx as string, true))
{
      var xdoc = wordDoc.MainDocumentPart;

      mainWebBrowser.NavigateToString(xdoc.Document.OuterXml.ToString());
} 
```

但这只是给了我文本，没有任何格式。是否可以在这样的网络浏览器控件中显示“.docx”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:59:05.883

有一些关于 DOCX 到 HTML 转换的文章：

*   [Transforming Open XML WordprocessingML to XHTML Using the Open XML SDK 2.0](http://msdn.microsoft.com/en-us/library/ff628051%28v=office.14%29.aspx)
*   [Transforming Open XML WordprocessingML to XHtml](http://blogs.msdn.com/b/ericwhite/archive/2008/10/20/eric-white-s-blog-s-table-of-contents.aspx#Open_XML_to_XHtml)
*   [Batch conversion of docx to clean HTML](https://stackoverflow.com/questions/4824619/batch-conversion-of-docx-to-clean-html)

Please try these approaches above. Hope that helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:57:51.860

如果您想在 Web 浏览器控件中显示 XML，您可能需要：

1.  将此 XML 加载到[XDocument](http://msdn.microsoft.com/en-en/library/system.xml.linq.xdocument.aspx)，
2.  [准备带有块](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_pre)的HTML 模板，
3.  然后 - 将[格式化的 XML 从 XDocument](https://stackoverflow.com/questions/2374654/how-do-you-create-an-indented-xml-string-from-an-xdocument-in-c)写入 PRE 块。

您可以将最终的 HTML 读入字符串并使用您提到的“mainWebBrowser.NavigateToString”，或者编写 HTML 文件来驱动并将其从那里读入您的 mainWebBrowser

希望有帮助

# objective-c - 使用 UIView 标签作为 NSMutableDictionary 的键

> ID：10938834
> 
> 赞同：1
> 
> 时间：2012-06-07T19:48:27.947
> 
> 标签：objective-c, uiview, nsdictionary

我想使用 UIView 标记作为 NSMutableDictionary 的键。但是，编译器反对我使用 NSInteger 作为键。我想做以下事情：

```
NSInteger elementKey = _viewBeingDragged.tag;
myClass* element = [_model.elements objectForKey:elementKey]; 
```

如何使用 elementKey 作为我的字典键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:50:34.373

A`NSInteger`不是对象，不能用作键。您可以将其包装在 a 中[`NSNumber`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsnumber_Class/Reference/Reference.html)：

```
NSNumber* elementKey = [NSNumber numberWithInt:_viewBeingDragged.tag];
myClass* element = [_model.elements objectForKey:elementKey]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:49:59.880

```
NSNumber* elementKey = [NSNumber numberWithInt:_viewBeingDragged.tag]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:50:28.883

我同意@Mario 和@EvanMulawski，但我更喜欢使用字符串作为我的密钥。哦，至于编译器拒绝使用 an 的原因`NSInteger`是`NSInteger`s 几乎等同于`long int`s。

```
NSString* elementKey = [NSString stringWithFormat:@"%i",_viewBeingDragged.tag];
//or NSNumber* elementKey = [NSNumber numberWithInt:_viewBeingDragged.tag];
myClass* element = [_model.elements objectForKey:elementKey]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-06T11:23:47.533

`NSNumber`用文字包裹它。

```
myClass* element = _model.elements[@(_viewBeingDragged.tag)]; 
```

和任务：

```
NSInteger tag = view.tag;
myClass *value;
_model.elements[@(tag)] = value; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-07T20:43:27.107

而是为键创建一个 NSString，尽管您可以使用任何 NSCopying 符合对象：

```
NSString *key = [NSString stringWithFormat: @"%d",elementKey]; 
```

# video - 如何用很少的信息解码音频/视频比特流

> ID：10938850
> 
> 赞同：2
> 
> 时间：2012-06-07T19:49:50.630
> 
> 标签：video, streaming, video-streaming, audio-streaming, codec

我对视频/音频格式、容器和协议完全陌生。但是，我必须弄清楚如何解码包含音频和视频的比特流。我不知道使用的传输协议、容器格式或编解码器——但我已经能够推断出一些事情：

*   这不是RTP
*   它在端口 443 上通过 UDP
*   音频和视频在数据报中
*   音频数据报有效载荷的长度总是 76 字节，每秒大约有 42 个字节。
*   视频数据报有效载荷最大为 536 字节，平均约为 500 字节，每秒约有 62 个。

我什至应该如何开始尝试解码它？

# xcode - ibtool编译错误为模拟器构建，但不适用于硬件

> ID：10938855
> 
> 赞同：1
> 
> 时间：2012-06-07T19:50:07.993
> 
> 标签：xcode

显然，我突然开始出现编译错误，这只发生在为模拟器构建时：

```
Command /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool failed with exit code 255 
```

今天早上编译的，xib我还没改，今天下午就不行了。

它是什么，为什么它只适用于模拟器？

编辑 - 错误数量增加，首先是一个，然后我重新启动 x 代码，然后是两个，现在增加到 3。

编辑 - 现在，每当我尝试查看*任何*xib 时，XCode 都会崩溃。

也许是时候重新安装了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T15:57:06.070

我曾经遇到过类似的错误。就我而言，我编辑了情节提要的源代码，但未能在该部分中添加文件。

# iphone - 无法从 tableview 打开 detailview

> ID：10938857
> 
> 赞同：0
> 
> 时间：2012-06-07T19:50:27.440
> 
> 标签：iphone, ios

好的，所以我找到了有关 xml 解析的本教程。 [http://www.theappcodeblog.com/2011/05/09/parsing-xml-in-an-iphone-app-tutorial/](http://www.theappcodeblog.com/2011/05/09/parsing-xml-in-an-iphone-app-tutorial/)

它非常好，但他收到的推文被切断了。所以我认为“这很酷，当用户单击该表格单元格时，我将在 detailView 中打开它们。” 但是，虽然 didSelectRowAtIndexPath: 正在触发。什么都没有发生。

为什么？因为导航控制器为空。所以更多细节。

这是一个基于标签栏的应用程序。在第一个选项卡上，我有一个指向 tableview 的按钮。

如何向其中添加 UINavigation 控制器以使其正常工作？

我尝试打开我的第一个选项卡 xib 并拖动导航控制器，然后将其 rootview 更改为我的 tableview 类。表格出现了，但表格单元格单击仍将我的导航控制器显示为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:15:30.460

如果 nib 的名称与类相同（如上所示），只需执行以下操作：

```
DetailViewController *dvController = [[DetailViewController alloc] init]; 
```

# php - 分页代码在选择菜单中最多六页（PHP）

> ID：10938862
> 
> 赞同：0
> 
> 时间：2012-06-07T19:50:40.970
> 
> 标签：php, wordpress, pagination

我已经用代码向我的 WordPress 博客添加了分页。它在一定程度上可以正常工作。我使用的代码是从这里提供的：

[http://design.sparklette.net/teaches/how-to-add-wordpress-pagination-without-a-plugin/](http://design.sparklette.net/teaches/how-to-add-wordpress-pagination-without-a-plugin/)

当我添加它时，菜单显示在底部并且功能正常，但它在菜单中最多显示 6 页。它已经生成了 9 个页面（因为这正是我目前拥有的内容的确切数量）并继续生成新页面，但不会在底部的菜单上更新。那里只有六页。这是我在functions.php中的确切代码（应该与我发布的链接相同）：

```
/* PAGINATION */
function pagination($pages = '', $range = 4)
{
     $showitems = ($range * 2)+1;  

     global $paged;
     if(empty($paged)) $paged = 1;

     if($pages == '')
     {
         global $wp_query;
         $pages = $wp_query->max_num_pages;
         if(!$pages)
         {
             $pages = 1;
         }
     }   

     if(1 != $pages)
     {
         echo "<div class=\"pagination\"><span>Page ".$paged." of ".$pages."</span>";
         if($paged > 2 && $paged > $range+1 && $showitems < $pages) echo "<a href='".get_pagenum_link(1)."'>&laquo; First</a>";
         if($paged > 1 && $showitems < $pages) echo "<a href='".get_pagenum_link($paged - 1)."'>&lsaquo; Previous</a>";

         for ($i=1; $i <= $pages; $i++)
         {
             if (1 != $pages &&( !($i >= $paged+$range+1 || $i <= $paged-$range-1) || $pages <= $showitems ))
             {
                 echo ($paged == $i)? "<span class=\"current\">".$i."</span>":"<a href='".get_pagenum_link($i)."' class=\"inactive\">".$i."</a>";
             }
         }

         if ($paged < $pages && $showitems < $pages) echo "<a href=\"".get_pagenum_link($paged + 1)."\">Next &rsaquo;</a>";
         if ($paged < $pages-1 &&  $paged+$range-1 < $pages && $showitems < $pages) echo "<a href='".get_pagenum_link($pages)."'>Last &raquo;</a>";
         echo "</div>\n";
     }
}
/*END PAGINATION*/ 
```

然后它是这样调用的：

```
<?php if (function_exists("pagination")) {
    pagination($additional_loop->max_num_pages);
} ?> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:02:49.983

我没有看到任何可以解释您遇到的问题的东西，但这是我自己制作的一个非常基本的分页脚本，我认为可能会有所帮助：

```
global $paged;
$curpage = $paged ? $paged : 1;
$args = array(
    'posts_per_page' => 5,
    'paged' => $paged,
    //'category_name' => 'your_category_name' /*If needed*/
);
$query = new WP_Query($args);
if($query->have_posts()) : while ($query->have_posts()) : $query->the_post();
?>
    <div class="postBlock"><?php the_excerpt(); ?></div>
    <?php
    endwhile;
    echo '<div id="wp_pagination">';
    echo '<a class="first page button" href="'.get_pagenum_link(1).'">&laquo;</a>';
    echo '<a class="previous page button" href="'.get_pagenum_link(($curpage-1 > 0 ? $curpage-1 : 1)).'">&lsaquo;</a>';
    for($i=1;$i<=$query->max_num_pages;$i++)
        echo '<a class="'.($active = $i == $curpage ? 'active ' : '').'page button" href="'.get_pagenum_link($i).'">'.$i.'</a>';
    echo '<a class="next page button" href="'.get_pagenum_link(($curpage+1 <= $query->max_num_pages ? $curpage+1 : $query->max_num_pages)).'">&rsaquo;</a>';
    echo '<a class="last page button" href="'.get_pagenum_link($query->max_num_pages).'">&raquo;</a>';
    echo '</div>';
    wp_reset_postdata();
endif;
?> 
```

# jquery - 如果鼠标已经在文档准备好的元素上，jQuery hoverIntent Not Firing

> ID：10938863
> 
> 赞同：3
> 
> 时间：2012-06-07T19:50:52.500
> 
> 标签：jquery, hoverintent

我正在使用jQuery插件hoverIntent。问题是有时在加载页面时，鼠标已经在对象“#gallery”上，因此不会触发 hoverIntent 代码。

这是我的代码示例：

```
$(document).ready(function(){
  $('#gallery').hoverIntent(function(){
    $('.gallery-thumbs').stop().animate({'height': '65px'},400); //in code animating a element child within #gallery
  },function(){
    $('.gallery-thumbs').stop().animate({'height': '33px'}); //out code animating a child element within #gallery
  });
}); 
```

有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:20:27.853

这是你要找的吗？

```
$(document).ready(function(){
    $(document).one("mousemove", function(e) {
        if (mouse pointer is on gallery) {
            $('.gallery-thumbs').stop().animate({'height': '65px'}, 400);
        }
    });

    $('#gallery').hoverIntent(function() {
        $('.gallery-thumbs').stop().animate({'height': '65px'}, 400); //in code animating a element child within #gallery
    },function() {
        $('.gallery-thumbs').stop().animate({'height': '33px'}); //out code animating a child element within #gallery
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:07:58.333

如果你想继续使用这个库，我建议的一个解决方案是捕获第一个（并且只有第一个，with `one`）mousemove 事件，并检查此时鼠标是否在#gallery 上。

您可以使用以下方法检查事件是否在对象之上：

```
var eventIsOver = function(event, o) {
    if ((!o) || o==null) return false;
    var pos = o.offset();
    var ex = event.pageX;
    var ey = event.pageY;
    if (
        ex>=pos.left
        && ex<=pos.left+o.width()
        && ey>=pos.top
        && ey<=pos.top+o.height()
    ) {
        return true;
    }
    return false;
};

$(document).ready(function(){
  $('body').one('mousemove', function(e) {
     if (eventIsOver(e, $('#gallery')) {
         // do what you want to do if the mouse is on the gallery initially
     }
  });
  $('#gallery').hoverIntent(function(){
    $('.gallery-thumbs').stop().animate({'height': '65px'},400); //in code animating a element child within #gallery
  },function(){
    $('.gallery-thumbs').stop().animate({'height': '33px'}); //out code animating a child element within #gallery
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T08:45:03.207

对于那些寻求其他解决方案的人，这是我的：

```
$('myselector').hoverIntent({
  over: myOverfunc,
  out: myOutfunc
});

$('myselector').trigger('mouseenter.hoverIntent'); 
```

注意'mouseenter.hoverIntent'，因为它是插件注册的事件（在r7上测试）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-16T09:58:09.087

由于 js 中的一些错误，它有一些问题，

我已经完成了所有艰苦的工作。你只需要添加选项

我已经解决了。你可以从这里获取 js。当您调用 slimscroll 函数时，添加以下选项

> 鼠标悬停：真

作为演示

```
jQuery('#scroll').slimScroll({
       height: jQuery(window).height()+'px',
        railVisible: true,
        allowPageScroll: true,
        mouseOver:true
    }); 
```

[访问链接/在此处下载](https://github.com/nil4you/jQuery-slimScroll)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T22:08:52.290

我放弃了一个完美的解决方案，并设置为在#gallery 中的子元素上触发 mouseenter

```
$('.gallery-nav').mouseenter(function(){
    $('#gallery').trigger("mouseenter");
}); 
```

# php - 如何使用基于 PHP/MySQL 的脚本来禁止网站的 IP 块？

> ID：10938865
> 
> 赞同：3
> 
> 时间：2012-06-07T19:50:58.867
> 
> 标签：php, mysql

我有一个相当大的 IP 和 IP 块列表，我想禁止它们。我的列表是按块完成的，目前采用这样的格式：

```
1.2.3.4-1.2.3.54
5.6.7.8-5.6.7.8
2.3.4.5-2.3.4.116 
```

我试图通过某种方式将它们放入 MySQL 数据库来找到阻止这些 IP 的最有效方法。当然，我可以将所有块分成单独的 IP，并将它们放在自己的 MySQL 记录中，但是对于大量 IP，这将是非常低效的。阻止整个范围，例如“1.2.3.*”也会导致不必要地禁止大量用户。

有没有办法有效地做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:56:23.283

为什么不使用[网络掩码](http://www.iplocation.net/tools/netmask.php)？

*   192.168.1.0/24 块 192.168.1.0 - 182.168.1.255
*   1.0.0.0/8 块 1.0.0.0 - 1.255.255.255

这样，IPv4 地址只需要 5 个字节。如果您想巧妙地使用掩码，请制作 8 个字节。

这样做的好处是可以非常快速地进行比较，只需将掩码与 IP 进行 OR-ing。这就是 IP 路由的工作原理。

此外，您可以使用 MySQL 函数[INET_NTOA](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_inet-ntoa)和[INET_ATON](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_inet-aton)将点格式的 IP 地址转换为其数字形式，然后再转换回来，从而使存储高效且易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:57:54.617

我会有一张这样的桌子：

```
range | start_number | end_number
------+--------------+----------- 
```

这将分别持有（例如）：`1.2.3`、、`4`和`54`。

然后您可以轻松检查连接的 IP 地址是否在该范围内，以及最后一部分是否在`start_number`和之间`end_number`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:07:07.727

您可以使用 MySQL INET_ATON() 和 INET_NTOA() 函数。请记住，这些是特定于 MySQL 的，但您也可以使用 php 来实现它们。

这些函数将 IP 地址从点表示法转换为整数。然后，您可以将它们存储在具有“start_ip”和“end_ip”列的表中。当您查询某个 IP 是否被禁止时，您可以使用带有 BETWEEN 的查询。

```
SELECT * FROM bans WHERE INET_ATON("127.0.0.1") BETWEEN start_ip AND end_ip 
```

# android - 将 alpha 设置为 Android 中对话框的自定义样式

> ID：10938869
> 
> 赞同：2
> 
> 时间：2012-06-07T19:51:24.003
> 
> 标签：android, dialog, alpha

我创建了一个自定义对话框，并且我想对其应用自定义主题。所以我通过以下方式创建了一个样式

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="dialogTheme" parent="@android:style/Theme.Translucent">
    <item name="android:background">#222</item>

</style>
</resources> 
```

这改变了我对话的背景。我正在寻找的是为这个背景设置一个阿尔法。我不知道该怎么做。

如果我将父级更改为 Theme.dialog，我会得到我想要的背景，但此外，我还会得到我不想要的自定义对话框的边框。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T20:02:18.193

您可以通过选择颜色并设置其不透明度在代码中执行此操作，如下所示：

```
ColorDrawable dialogColor = new ColorDrawable(Color.GRAY);
dialogColor.setAlpha(100);
dialog.getWindow().setBackgroundDrawable(dialogColor); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:57:01.457

查看[Android 颜色](http://developer.android.com/reference/android/graphics/Color.html "颜色")

您可以在十六进制代码中给出 alpha 值。

opaque-black 为 0xFF000000（100% 不透明，但没有来自红色、绿色或蓝色的贡献）， opaque-white 为 0xFFFFFFFF

注意前两个值给出了 alpha 值。

# php - 使用 PEAR 邮件包从具有 SMTP 身份验证的脚本发送的电子邮件仍会进入垃圾文件夹

> ID：10938872
> 
> 赞同：0
> 
> 时间：2012-06-07T19:51:38.953
> 
> 标签：php, email, pear, spam

我遇到了由 PHP 脚本生成的电子邮件进入用户的垃圾邮件/垃圾邮件文件夹的问题，并被引导相信安装 PEAR 和相关的邮件包并添加 SMTP 身份验证可以解决这个问题。所以我使用 cPanel 这样做。不幸的是，经过一些测试，我发现电子邮件仍然会进入我的垃圾文件夹。以下是当前形式的脚本。

我不确定还有什么可以尝试解决这个问题。我联系了我的提供商，他们刚回来就提供了一些关于垃圾邮件/垃圾文件夹的一般信息，但这些信息并不是很有帮助！

有没有人有什么建议？

谢谢，

缺口

```
<?php 
require_once "/home/..../php/Mail.php";

$from = ""; 
$to = ""; 
$subject = "Hi!"; 
$body = "Hi,\n\nHow are you?"; 
$host = ""; 
$username = "";
$password = ""; 

$headers = array ('From' => $from, 
'To' => $to, 
'Subject' => $subject); 

$smtp = Mail::factory('smtp', 
array ('host' => $host, 
'auth' => true, 
'username' => $username, 
'password' => $password)); 

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) { 
echo("<p>" . $mail->getMessage() . "</p>"); 
} else { 
echo("<p>Message successfully sent!</p>");
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-16T20:15:06.583

这是表单和 PEAR 脚本的一个很好的详细示例 - 它可能会帮助您调试：[https ://solutions.hostmysite.com/index.php?/Knowledgebase/Article/View/8460/0/using-pear -mail-to-create-a-php-mail-form-that-uses-authenticationauthentication-is-required-by-hostmysite](https://solutions.hostmysite.com/index.php?/Knowledgebase/Article/View/8460/0/using-pear-mail-to-create-a-php-mail-form-that-uses-authenticationauthentication-is-required-by-hostmysite)

# c - 如何从 UNIX 系统上的 tty 输入队列中刷新未读数据？

> ID：10938882
> 
> 赞同：9
> 
> 时间：2012-06-07T19:52:10.330
> 
> 标签：c, unix, buffer

我的程序必须从标准输入中读取一个字符，所以我使用`read(0, buffer, 1)`. 但是，如果用户插入多个字符，它们会保留在某个缓冲区中，当我`read`再次调用 a 时，它们仍然存在。

那么，我怎样才能丢弃这些字符呢？我希望当我再次调用 a`read`时，缓冲区充满了新字符，而不是旧字符。

一个例子：我有 a*`read(0, buffer, 1)`*并且用户写*abcde*。我的缓冲区包含*a*（这是正确的），但随后我*`read(0, buffer, 1)`*再次调用，我想要用户从现在开始写入的下一个字符，而不是之前写入的*b*。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-07T20:02:01.283

POSIX 的答案是[`tcflush()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcflush.html)：*刷新未传输的输出数据、未读取的输入数据，或两者兼而有之*。还有[`tcdrain()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/tcdrain.html)等待输出被传输的。自从有一个 POSIX 标准（1988 年试用版）以来，它们就一直在 POSIX 中，尽管我不记得曾经直接使用过它们。

### 示例程序

编译此代码，以便调用生成的程序`tcflush`：

```
#include <stdio.h>
#include <unistd.h>
#include <termios.h>

int main(void)
{
    char buffer[20] = "";

    read(0, buffer, 1);
    printf("%c\n", buffer[0]);
    tcflush(0, TCIFLUSH);
    read(0, buffer, 1);
    printf("%c\n", buffer[0]);
    tcflush(0, TCIFLUSH);
    return 0;
} 
```

### 示例对话框

```
$ ./tcflush
abc
a
def
d
$ 
```

好像是医生吩咐的。没有第二个`tcflush()`，shell 会抱怨找不到命令`ef`。`tcflush()`如果您愿意，可以在第一次阅读之前放置一个。对于我的简单测试来说，这不是必需的，但如果我使用`sleep 10; ./tcflush`然后提前输入，它会有所作为。

在 x86/64 机器上的 RHEL 5 Linux 以及 Mac OS X 10.7.4 上进行了测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T19:54:29.847

当您的程序想要开始读取字符时，它必须耗尽现有字符的缓冲区，然后等待读取字符。

否则，它将读取输入的最后一个字符，而不是*now*之后输入的最后一个字符。

当然，您不需要对读取的字符做任何事情；但是，您确实需要阅读它们。

# vba - 根据列中的条件复制一系列行并粘贴到名为条件的不同工作表中

> ID：10938883
> 
> 赞同：2
> 
> 时间：2012-06-07T19:52:12.080
> 
> 标签：vba, excel, copy-paste

我需要一些有关 Excel 2010 中 VBA 的帮助来编写宏。

我需要知道如何根据一列中的条件复制特定范围的行，并将包含该指定条件的每一行（整行，所有其他字段）粘贴到其相应的工作表中（下面将详细解释）。困难的部分是那些“目标”表可能已经有一些数据需要留在那里而不是被删除。那么，我怎样才能编写一个宏来执行我刚才描述的操作，但是当它开始粘贴时，它会找到第一个空行来开始粘贴？

我有一本大约有 5 张纸的工作簿。第一个工作表是`ALL`包含所有数据的工作表。接下来的 4 张纸被命名为`Tree`、`Graffiti`和。所有 5 张工作表中的所有字段都相同。在每张表中，都有一个名为的字段，它是这四种服务之一（、或）。`Light``Pothole``Type Of Service``tree``graffiti``light``pothole`

我需要做的是过滤`ALL`这 4 个服务中的每一个的工作表（一次一个），选择包含指定服务的所有字段和所有行，将其全部复制，然后将其粘贴到其单独的工作表中。这些单独的工作表可能包含一些数据，因此粘贴需要找到第一个空行，并将其粘贴到那里。将工作表与 ALL 工作表中复制的行原样连接。我需要宏来一起完成所有 4 个服务过滤器/粘贴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:52:11.677

您可以通过录制宏并查看它来了解所有内容。还有一个额外的知识，而不是说“A1：G3”，你可以使用 Range( Cells(x,y), Cells(x,y) ) 并做例如

```
Range( Cells(1,1), Cells(1,3).Select
ActiveSelection.Copy ' or .Cut 
```

转到 Excel 选项并在常规选项卡上选择使用 R1C1 样式。excel也在列上显示数字。

空单元格由

```
 IsEmpty( Cells(3,9) ) 
```

用于打开现有工作表使用

```
Sheets("All").Select 
```

所以

```
dim currentService
currentService = Cells(i, 3) ' current row, 13'th column
Sheets(currentService).Select 
```

所以它是这样的：要么找到过滤器函数，然后通过 moveDown 遍历单元格。

可能最简单的方法是按服务排序通过在线迭代查找每个服务的开始和结束行直到到达其他内容（不是空的）复制每个服务的整个范围为该服务选择正确的书，找到空行该服务表（通过阅读每行上的一个单元格，或者如果您想检查几个单元格：

```
 Function hasRowContent (rownum as Integer) as Boolean
      Dim rowContentCheck
      rowContentCheck = Cells(rownnum, 1) & Cells(rownum, 3) & Cells(rownnum, 7)
      hasRowContent = rowContentCheck <> "" 
      Return
  End Function 
```

计算空行数。您遇到的每一行没有内容都会增加 emptyRows 计数器

```
emptyRows = emptyRows + 1 
```

遇到内容的每一行，将 emptyRows 设置回零并从这里开始计数。

```
If emptyRows > emptyRowsToStopAt
    rowInServiceSheet = currentRow 
```

代码开头...

```
dim emptyRowsToStop
dim emptyRows
For currentRow = 1 To 1000 
```

编辑：

我的第一个答案中解释了所有代码

开始：

```
Public Function SheetExists(sheetName As String) As Boolean
' Sheet! It Exists

Dim wrkSheet As Worksheet

SheetExists = False
For Each wrkSheet In ThisWorkbook.Worksheets
    If wrkSheet.Name = sheetName Then
        SheetExists = True
        Exit For
    End If
Next

End Function

Sub createMissingServicePages()
' start on first cell in ALL
Sheets("all").Select
Row1.Select
Row1.Copy

Dim serviceTypes
serviceTypes = Array("Tree", "Graffiti", "Light", "Pothole")
Dim serviceTypeName As String

For Each serviceType In serviceTypes
    serviceTypeName = serviceType

    If Not SheetExists(serviceTypeName) Then
        ' create a new sheet - at the end of the Sheets list
        Sheets.Add After:=Sheets(Sheets.Count) ' after 8
        ' and name it
        Sheets(Sheets.Count).Name = serviceTypeName ' by now its 9

        ' select it and copy first row to it
        '.. copy header row
        Sheets("All").Select
        Rows(1).Select
        Rows(1).Copy

        ' .. paste in target sheet
        Sheets(Sheets.Count).Select
        Cells(1, 1).Select
        ActiveCell.PasteSpecial xlPasteAll
    End If
Next

End Sub

Sub updateServicePages()
' if you wish to see the column numbers rather than letters
' change settings in Options / GENERAL tab to View R1C1 style

Call createMissingServicePages

' start on first cell in ALL
Sheets("all").Select
Cells(1, 1).Select

' We'll need this later:
' count the columns
Dim columnsCount As Integer
For Each aCell In Rows(1).Cells
    If IsEmpty(aCell) Then
        columnsCount = aCell.Cells.Column
        Exit For
    End If
Next

' get TypeOfService column number
Dim serviceTypeHeaderText As String
Dim serviceTypeColumnnum As Integer

serviceTypeHeaderText = "type of service" ' ignoring case...

Cells.Find(What:=serviceTypeHeaderText, _
           After:=ActiveCell, _
           LookIn:=xlFormulas, LookAt:=xlPart, _
           SearchOrder:=xlByRows, SearchDirection:=xlNext, _
           MatchCase:=False, SearchFormat:=False).Activate
serviceTypeColumnnum = ActiveCell.Column

' sort the whole range
Cells.Select ' first select the whole range
' unremark next line of code if you want to format the data nicely...
'Cells.EntireColumn.AutoFit ' if we are already at it
Selection.Sort Key1:=Cells(1, serviceTypeColumnnum), _
               Order1:=xlAscending, Header:=xlYes, _
               OrderCustom:=1, MatchCase:=False, _
               Orientation:=xlTopToBottom, _
               DataOption1:=xlSortNormal

' now move the data for each typeofService
Dim serviceTypes
Dim serviceTypeName As String
serviceTypes = Array("Tree", "Graffiti", "Light", "Pothole")
Dim rangeStart As Integer
Dim rangeEnd As Integer
For Each serviceType In serviceTypes
'   we reset for each serviceType
    Sheets("all").Select
    Cells(1, 1).Select

    rangeStart = 0
    rangeEnd = 0
    serviceTypeName = serviceType

    ' .. find range start and end
    For Each aRow In Rows
        If aRow.Cells(serviceTypeColumnnum) = serviceTypeName Then
            If rangeStart = 0 Then rangeStart = aRow.Cells.Row
        Else
            If rangeStart <> 0 Then ' we just exited the range
                rangeEnd = aRow.Cells.Row - 1
                Exit For ' done with this serviceType range
            Else ' didn't reach our range yet

            End If
        End If
    Next ' row

    ' No 'continue' in VBA... and don't want to use a GOTO
    ' If rangeStart = 0 Or rangeEnd = 0 Then 'continue for

    If rangeStart <> 0 And rangeEnd <> 0 Then

        ' .. now copy serviceType to correct sheet
        Dim servicetypeRange As Range
        Set servicetypeRange = Range(Cells(rangeStart, 1), Cells(rangeEnd, columnsCount))
        servicetypeRange.Select
        servicetypeRange.Copy
        ' find empty row in target sheet
        Sheets(serviceTypeName).Select
        Dim emptyrowNum As Integer
        Dim emptyrowCount As Integer
        Dim emptyrowMax As Integer
        Dim emptyrowMargin
        emptyrowMax = 5 ' set this to 1 if there are no spaces in the data
        emptyrowMargin = 0 ' change this if you want an empty row between last data and new data
        For Each aRow In Rows
           If IsEmpty(aRow.Cells(1)) Then ' you could check over a few cells by: & isEmpty(aRow.Cells(2)) etc.
                emptyrowCount = emptyrowCount + 1
                If emptyrowCount > emptyrowMax Then
                    emptyrowNum = aRow.Row - emptyrowCount ' last empty row
                    If emptyrowNum < 1 Then emptyrowNum = 1
                    emptyrowNum = emptyrowNum + emptyrowMargin
                    Exit For ' we found empty row
                End If
            End If
        Next
        Cells(emptyrowNum, 1).Select
        ActiveCell.PasteSpecial xlPasteAll ' ,skipBlanks if needed
    End If
Next ' serviceType

Sheets("All").Select
Cells(1, 1).Select
MsgBox "Done!"
End Sub 
```

# vb.net - .NET Winform - 多个数据值列的数据透视表

> ID：10938884
> 
> 赞同：0
> 
> 时间：2012-06-07T19:52:17.007
> 
> 标签：vb.net, winforms, pivot, pivot-table

从数据表中的数据库检索数据后，我需要在前端创建一个数据透视表，并且需要使用此数据更新我的网格的值。

我浏览了许多文章/博客，但它们都通过使用一个数据值列进行了演示。但在我的场景中，我有**8 个数据值列**需要旋转。

**数据透视**

![在此处输入图像描述](../Images/996eac5e7119d5ee3c4b8dc44c28d33f.png)

**透视数据**

![在此处输入图像描述](../Images/1f9173dadb9c2629d7f22514453e5228.png)

有人知道如何在前端有效地做到这一点吗？

将数据嵌入到 excel 中，在那里创建 Pivot 并从 excel 中检索所需的数据是一个好主意吗？

# ajax - 使用 Struts2 和 Dojo 将选择标签中的选定值传递给操作

> ID：10938885
> 
> 赞同：0
> 
> 时间：2012-06-07T19:52:21.753
> 
> 标签：ajax, struts2, dojo

当触发 onchange 事件时，我试图通过 ajax 将选择标记的选定值传递给操作，但由于某种原因，操作将参数接收为 null。

这是jsp的代码：

```
<%@taglib prefix="s" uri="/struts-tags" %>
<%@taglib prefix="sx" uri="/struts-dojo-tags" %>
<div id="navegacion_proyectos">
    <s:select name="id_proyecto_actual" id="proyecto_actual_select" list="proyectos" listValue="titulo_proyecto" listKey="id_proyecto"/>
    <s:url id="cambiar_proyecto_actual_url" value="/cambiar_proyecto_actual.action" />
    <sx:bind sources="proyecto_actual_select" events="onchange" href="%{cambiar_proyecto_actual_url}" />
</div> 
```

这是操作的代码：

```
public class BLProyecto extends ActionSupport {

    private String id_proyecto_actual;

    public String cambiarProyectoActual() {

        Map sesion = ActionContext.getContext().getSession();
        sesion.put("proyecto_actual", id_proyecto_actual);

        return SUCCESS;
    }
    public String getId_proyecto_actual() {
        return id_proyecto_actual;
    }

    public void setId_proyecto_actual(String id_proyecto_actual) {
        this.id_proyecto_actual = id_proyecto_actual;
    }

} 
```

我正在调试代码并且 id_proyecto_actual 参数显示为空。你认为是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:16:11.180

谢谢大家，我找到了答案。当事件被触发时，我没有关注 url，而是提交了一个表单。像这样：

```
<%@taglib prefix="s" uri="/struts-tags" %>
<%@taglib prefix="sx" uri="/struts-dojo-tags" %>
<div id="navegacion_proyectos">
    <s:form id="cambiar_proyecto_actual_form" action="cambiar_proyecto_actual">
        <s:select name="id_proyecto_actual" id="proyecto_actual_select" list="proyectos" listValue="titulo_proyecto" listKey="id_proyecto"/>
    </s:form>
    <sx:bind sources="proyecto_actual_select" formId="cambiar_proyecto_actual_form" targets="pantalla_principal" events="onchange" />
</div> 
```

# flash - HTTP:// 和 FILE:// 协议之间的字符编码是否不同？

> ID：10938890
> 
> 赞同：0
> 
> 时间：2012-06-07T19:52:47.410
> 
> 标签：flash, http, character-encoding, protocols, local

我正在尝试在 Flash 中加载一些多语言内容。

在本地，一切似乎都运行良好。

*   我的本地文件位于 HTML 页面上，调用作为 XML 文档的外部内容。
*   内容包含包含在 CDATA 标记中的中文字符。
*   Flash 正确显示中文字符（在设备字体上）。

但是，当托管在 Web 服务器上（嵌入 JSP 页面中）时，它不起作用：

*   显示 SWF 并加载内容。
*   内容包含相同的数据，Flash中原始内容的痕迹表明它确实是与本地环境中显示的相同的中文符号。
*   Flash 显示长数字（看起来像每个汉字 4 个十六进制数字）而不是汉字，这是不正确的！

所以我很好奇如果 SWF 托管在本地环境“file://...”或 Web 服务器“http://...”上，Flash 解释 XML 数据的方式是否有所不同。

还有其他人遇到过同样的问题吗？我正在通过字符编码、unicode、UTF-8 进行搜索，但是本地版本有效但网络服务器无效是没有意义的。唔...

- 编辑 -

**一些例子：**

*   アリコ变成了65E5672C751F547D
*   ネクスティア变成30CD30AF30B930C630A330A2
*   アフラック变成了30A230D530E930C330AF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:29:09.427

使用 Firebug 或 Chrome Developer Tool 检查从服务器发送的 HTTP 标头。mime 类型是否正确？

您确实在 XML 中正确设置了编码，不是吗。

```
<?xml version="1.0" encoding="utf-8"?> 
```

- 编辑

怎么样`System.useCodepage = true;`？不过，这不是灵丹妙药。

# html - 在不禁用自动完成的情况下禁用 Chrome 中的表单自动填充

> ID：10938891
> 
> 赞同：50
> 
> 时间：2012-06-07T19:53:05.127
> 
> 标签：html, google-chrome, autocomplete, autofill

我们如何在某些`<input>`s上禁用Chrome的自动填充功能，以防止它们在页面加载时自动填充？

同时我需要保持启用自动完成功能，这样用户仍然可以通过单击输入或输入来查看建议列表。这可以做到吗？

**编辑：**如果您觉得有必要，或者您觉得这会使您的解决方案更简单，请随意使用纯 Javascript 或 jQuery。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2016-04-11T02:29:37.600

Here's the magic you want:

```
 autocomplete="new-password" 
```

Chrome intentionally ignores `autocomplete="off"` and `autocomplete="false"`. However, they put `new-password` in as a special clause to stop new password forms from being auto-filled.

I put the above line in my password input, and now I can edit other fields in my form and the password is not auto-filled.

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-10-04T05:59:03.270

有点晚了，但这是我的万无一失的解决方案，对于用户必须输入新密码的注册/注册页面等页面很有用。

```
<form method="post">
    <input type="text" name="fname" id="firstname" x-autocompletetype="given-name" autocomplete="on">
    <input type="text" name="lname" id="lastname" x-autocompletetype="family-name" autocomplete="on">
    <input type="text" name="email" id="email" x-autocompletetype="email" autocomplete="on">
    <input type="password" name="password" id="password_fake" class="hidden" autocomplete="off" style="display: none;">
    <input type="password" name="password" id="password" autocomplete="off">
</form> 
```

Chrome 会检测两个密码输入，并且不会自动填写密码字段。但是，字段 id="password_fake" 将通过 CSS 隐藏。所以用户只会看到一个密码字段。

我还添加了一些额外的属性“x-autocompletetype”，这是一个 chrome 实验特定的自动填充功能。在我的示例中，chrome 将自动填写名字、姓氏和电子邮件地址，而不是密码字段。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-02-22T20:59:11.370

**修复：**防止浏览器自动填充

```
 <input type="password" readonly onfocus="this.removeAttribute('readonly');"/> 
```

更新：Mobile Safari 在字段中设置光标，但不显示虚拟键盘。新修复像以前一样工作，但处理虚拟键盘：

```
<input id="email" readonly type="email" onfocus="if (this.hasAttribute('readonly')) {
    this.removeAttribute('readonly');
    // fix for mobile safari to show virtual keyboard
    this.blur();    this.focus();  }" /> 
```

现场演示[https://jsfiddle.net/danielsuess/n0scguv6/](https://jsfiddle.net/danielsuess/n0scguv6/)

// 更新结束

**说明** 如果用户关注此输入字段（焦点包含鼠标单击和选项卡浏览字段），此代码段不是填充空格或加载窗口函数，而是通过设置只读模式并更改为可写来工作。

不需要 jQuery，纯 JavaScript。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-05-21T11:01:37.267

经过一番挣扎，我发现解决方案比您想象的要简单得多：

而不是`autocomplete="off"`简单地使用`autocomplete="false"`;)

尝试这个...

```
$(document).ready(function () {
    $('input').attr('autocomplete', 'false');
}); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-04-10T10:04:01.483

我今天偶然发现了奇怪的 chrome 自动填充行为。它碰巧在名为“embed”和“postpassword”（填写登录名和密码）的字段上启用，没有明显的原因。这些字段已经自动完成设置为关闭。

所描述的方法似乎都不起作用。另一个答案中的任何方法都没有效果。我根据斯蒂尔的回答提出了自己的想法（它可能确实有效，但我需要在我的应用程序中使用固定的发布数据格式）：

在真实密码之前，添加这两个虚拟字段：

```
<input type='text' style='display: none'>
<input type='password' style='display: none'> 
```

只有这个最终完全为我的表单禁用了自动填充功能。

很遗憾，禁用这种基本行为是如此困难和骇人听闻。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-17T16:23:31.410

我无法让我的 Chrome 在页面加载时自动填充以测试这一点，但您可以尝试添加`autocomplete="off"`到您的字段，然后在加载时删除属性：

```
$(window).load(function() { // can also try on document ready
    $('input[autocomplete]').removeAttr('autocomplete');
}); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-03-02T21:40:08.217

不是一个漂亮的解决方案，但适用于 Chrome 56：

```
<INPUT TYPE="text" NAME="name" ID="name" VALUE=" ">
<INPUT TYPE="password" NAME="pass" ID="pass"> 
```

请注意值上的空格。接着：

```
$(document).ready(function(){
   setTimeout(() => $('#name').val(''),1000);
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-19T14:35:01.893

这可能会有所帮助：[https ://stackoverflow.com/a/4196465/683114](https://stackoverflow.com/a/4196465/683114)

```
if (navigator.userAgent.toLowerCase().indexOf("chrome") >= 0) {
    $(window).load(function(){
        $('input:-webkit-autofill').each(function(){
            var text = $(this).val();
            var name = $(this).attr('name');
            $(this).after(this.outerHTML).remove();
            $('input[name=' + name + ']').val(text);
        });
    });
} 
```

它看起来像在加载时，它使用自动填充找到所有输入，添加它们的 outerHTML 并删除原始内容，同时保留值和名称（很容易更改以保留 ID 等）

如果这保留了自动填充文本，您可以设置

```
var text = "";   /* $(this).val(); */ 
```

从发布的原始表格中，它声称保留自动完成功能。:)

祝你好运！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-07-18T13:58:07.263

我最近遇到了这个问题，因为我的字段可以预先填充，所以没有简单的解决方案，我想分享一个我通过在 ready 事件中设置密码类型提出的优雅技巧。

创建时不要将输入字段声明为类型密码，而是添加一个准备好的事件侦听器来为您添加它：

```
function createSecretTextInput(name,parent){
    var createInput = document.createElement("input");
    createInput.setAttribute('name', name);
    createInput.setAttribute('class', 'secretText');
    createInput.setAttribute('id', name+'SecretText');
    createInput.setAttribute('value', 'test1234');

    if(parent==null)
       document.body.appendChild(createInput);
    else
        document.getElementById(parent).appendChild(createInput);

    $(function(){
        document.getElementById(name+'SecretText').setAttribute('type', 'password');
    });
};

createSecretTextInput('name', null); 
```

[http://jsfiddle.net/](http://jsfiddle.net/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-12T17:58:37.757

一种解决方案是用空白字符自动填充输入，并让它们清晰地集中在焦点上。

示例： http: [//nfdb.net/autofill.php](http://nfdb.net/autofill.php)

```
<!doctype html>
<html>
    <head>
        <title>Autofill Test</title>
        <script>
            var userfield;

            // After the document has loaded, manipulate DOM elements.
            window.addEventListener('load', function() {

                // Get the username field element.
                userfield = document.getElementById('user');

                // Listen to the 'focus' event on the input element.
                userfield.addEventListener('focus', function() {

                    // Checks if the value is the EM space character,
                    // and removes it when the input is recieves focus.
                    if (this.value == '\u2003') this.value = ''

                }, false);

                // Listen to the 'blur' event on the input element.
                // Triggered when the user focuses on another element or window.
                userfield.addEventListener('blur', function() {

                    // Checks if the value is empty (the user hasn't typed)
                    // and inserts the EM space character if necessary.
                    if (this.value == '') this.value = '\u2003';

                }, false);
            }, false);
        </script>
    </head>
    <body>
        <form method="GET" action="">
            <input id="user" name="username" type="text" value="&#8195;"/><br/>
            <input name="password" type="password" value=""/><br/>
            <input type="submit" value="Login">
        </form>
    </body>
</html> 
```

这应该会阻止浏览器自动填充字段，但仍允许它们自动完成。

这是另一个在页面加载后清除表单输入的示例。这种方法的优点是输入中永远不会有任何空白字符，缺点是自动填充的值在几毫秒内可见的可能性很小。

[http://nfdb.net/autofill2.php](http://nfdb.net/autofill2.php)

```
<!doctype html>
<html>
    <head>
        <title>Autofill Test</title>
        <script>
            var userfield, passfield;

            // Wait for the document to load, then call the clear function.
            window.addEventListener('load', function() {

                // Get the fields we want to clear.
                userfield = document.getElementById('user');
                passfield = document.getElementById('pass');

                // Clear the fields.
                userfield.value = '';
                passfield.value = '';

                // Clear the fields again after a very short period of time, in case the auto-complete is delayed.
                setTimeout(function() { userfield.value = ''; passfield.value = ''; }, 50);
                setTimeout(function() { userfield.value = ''; passfield.value = ''; }, 100);

            }, false);
        </script>
    </head>
    <body>
        <div>This form has autofill disabled:</div>
        <form name="login" method="GET" action="./autofill2.php">
            <input id="user" name="username" type="text" value=""/><br/>
            <input id="pass" name="password" type="password" value=""/><br/>
            <input type="submit" value="Login">
        </form>
        <div>This form is untouched:</div>
        <form name="login" method="GET" action="./autofill2.php">
            <input name="username" type="text" value=""/><br/>
            <input name="password" type="password" value=""/><br/>
            <input type="submit" value="Login">
        </form>
    </body>
</html> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-10-08T15:11:02.203

Chrome 密码管理器正在寻找输入元素`type="password"`并填写已保存的密码。它也忽略了`autocomplete="off"`财产。

这是针对最新**Chrome（版本 40.0.2181.0 canary）**的修复：

```
<input name="password"> 
```

JS：

```
setTimeout(function() {
    var input = document.querySelector("input[name=password]");
    input.setAttribute("type", "password");
}, 0) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-20T00:29:39.603

派对有点晚了......但这很容易用一些jQuery完成：

```
$(window).on('load', function() {
    $('input:-webkit-autofill').each(function() {
        $(this).after($(this).clone(true).val('')).remove();
    });
}); 
```

# 优点

*   删除自动填充文本和背景颜色。
*   保留字段上的自动完成功能。
*   保持任何事件/数据绑定到输入元素。

# 缺点

*   页面加载时自动填充字段的快速闪烁。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-04-17T12:54:25.237

```
var fields = $('form input[value=""]');
fields.val(' ');
setTimeout(function() {
    fields.val('');
}, 500); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-08-25T15:20:09.340

到目前为止，我发现这个工作正常，必须设置 1ms 的超时时间才能在 chrome 自动填充后完成操作..

```
$(window).on('load', function() {
    setTimeout(function(){
        $('input[name*=email],input[name*=Password]').val('-').val(null);
    },1);
}); 
```

我想知道是否有任何方法可以将此功能附加到 chrome 自完成触发，甚至重新声明它

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-11-03T17:28:39.893

我不喜欢使用 setTimeout 甚至有奇怪的临时输入。所以我想出了这个。

只需将密码字段类型更改为文本

```
<input name="password" type="text" value=""> 
```

当用户关注该输入时，再次将其更改为密码

```
$('input[name=password]').on('focus', function (e) {
    $(e.target).attr('type', 'password');
}); 
```

它使用最新的 Chrome (版本 54.0.2840.71 (64-bit))

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-08-31T08:32:02.480

`autocomplete="off"`关于现在在 Chrome V44（和 Canary V47）上工作的输入

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-12-30T19:04:05.077

My solution is based on dsuess user solution, which didn't work in IE for me, because I had to click one more time in the textbox to be able to type in. Therefore I adapted it only to Chrome:

```
$(window).on('load', function () {
    if (navigator.userAgent.indexOf("Chrome") != -1) {
        $('#myTextBox').attr('readonly', 'true');
        $('#myTextBox').addClass("forceWhiteBackground");
        $('#myTextBox').focus(function () {
            $('#myTextBox').removeAttr('readonly');
            $('#myTextBox').removeClass('forceWhiteBackground');
        });
    }
}); 
```

In your css add this:

```
.forceWhiteBackground {
    background-color:white !important;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-09-10T16:29:07.263

最简单的解决方案，为用户名字段提供一个值“”（您仍然可以将其称为“用户名”）。

如果该值可以由用户输入的值填充（通常是您正在验证的表单的情况），请在尚未设置时提供值“ ”。在 PHP 中，

```
if(trim($username) == ''){$username = ' ';}

<input type='text' value = '$username' name = 'Username' /> 
```

我实际上认为用户名和密码的自动完成功能有效地将访问您所有帐户的权限授予访问您计算机的任何人，无论您的密码多么晦涩......

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-08-25T13:20:24.810

这是我发现的最新解决方案。这会阻止 Google 在您输入任何内容之前填写字段并将它们突出显示为黄色。基本上，如果您将“display:none”放在该字段上，Google 会很聪明地忽略它并移至下一个字段。如果您输入“可见性：隐藏”，尽管它会将其视为表单中的一个字段，这似乎会干扰其计算。不需要javascript。

```
<form method='post'>
    <input type='text' name='u' size='16'/>
    <input type='password' name='fake' size='1' style='width:1px;visibility:hidden'/><br />
    <input type='password' name='p' size='16'/>
</form> 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2012-06-15T15:33:12.027

自动填充适用于输入的名称属性，因此如果您为“名字”等输入设置名称，chrome 将填充它。

如果要禁用它，请使用奇怪的名称，例如“supermanname”。

Javascript 无法解决您的问题。

第二种解决方案：您可以使用相同的名称隐藏您的输入，并使用其他输入设置它们的值。我用 jQuery 简化了 Js。

```
<form action="handlerfile.php" method="post">
<input type="text" id="1" onclick="$("#2").val($("#1").val())"/>
<input type="hidden" name="username" id="2">
</form> 
```

* * *

## 回答 #21

> 赞同：-6
> 
> 时间：2015-08-31T13:35:03.440

您最好使用 disabled 作为输入，以防止自动完成。

```
<input type="password" ... disabled /> 
```

# ruby-on-rails-3 - 如何将 JSON 写入 Rails 数据库

> ID：10938893
> 
> 赞同：0
> 
> 时间：2012-06-07T19:53:16.410
> 
> 标签：ruby-on-rails-3, json, post

我是 Rails 的新手，现在几天都在尝试了解它是如何工作的。我的目标是将浏览器（不同域）中的 JSON 文件发布到 Rails 应用程序，并将发送的数据保存到数据库中。

执行以下 JQuery-Code：

```
$(document).ready(function() {
  $("#testbutton").click(function() {
    var params = '{"comment": "Test", "creator": "Max", "name": "Testname", "url": "www.foo.com"}';
    $.ajax({
      type: "post",
      headers: { 'X-CSRF-Token': '<%= form_authenticity_token.to_s %>' },
      accepts: "application/json",
      contents: "application/json",
      data: params,
      url: 'http://localhost:3000/pages'
      });
    });
  }); 
```

我跳过验证动作控制器中的真实性令牌：

```
skip_before_filter :verify_authenticity_token 
```

现在，我不知道在 create-action 中要做什么，我必须更改它将解析 JSON 并将其写入数据库。我使用创建动作的标准行为：

```
 def create
    @page = Page.new(params[:data])

    respond_to do |format|
      if @page.save
        format.html { redirect_to @page, :notice => 'Page was successfully created.' }
        format.json { render :json => @page, :status => :created, :location => @page }
      else
        format.html { render :action => "new" }
        format.json { render :json => @page.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

服务器从网站接收数据，但无法解析它。

```
Started POST "/pages" for 127.0.0.1 at Thu Jun 07 21:48:53 +0200 2012
Processing by PagesController#create as undefined
  Parameters: {"{\"data\": {\"comment\": \"Test\", \"creator\": \"Fam Disselhoff\", \"name\": \"Renate\", \"url\": \"www.elesenroth.de\"}}"=>nil}
   (0.1ms)  begin transaction
  SQL (67.5ms)  INSERT INTO "pages" ("comment", "created_at", "creator", "name", "updated_at", "url") VALUES (?, ?, ?, ?, ?, ?)  [["comment", nil], ["created_at", Thu, 07 Jun 2012 19:48:53 UTC +00:00], ["creator", nil], ["name", nil], ["updated_at", Thu, 07 Jun 2012 19:48:53 UTC +00:00], ["url", nil]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:13:09.903

您可以使用以下解码方法进行处理。

```
parsed_json = ActiveSupport::JSON.decode(params[:data])
new_obj = Whatever.new
new_obj.field1 = parsed_json["field1"]
new_obj.field2 = parsed_json["field2"]
new_obj.save 
```

希望这可以帮助。

# sql-server - 如何使用 sql 查询删除 .trc 文件

> ID：10938895
> 
> 赞同：1
> 
> 时间：2012-06-07T19:53:28.933
> 
> 标签：sql-server

我正在做一个性能测试，在那里我创建了一个每天捕获 SQL 语句的工作。该作业将在其中一台服务器中自动将详细信息保存到跟踪`.trc`文件中。我创建了另一个在晚上 6 点运行的作业，它将从跟踪文件中复制信息，然后使用`::fn_trace_gettable`.

我的问题是如何`.trc`使用 SQL 查询删除这个文件。我的意思是明确指出，当第二天运行的作业时，它会说这个文件已经存在。所以，我需要使用 sql 查询自动删除这个文件。我可以手动删除它，但我需要使用 SQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-12T20:17:17.433

这很简单

1.  你停止追踪；`exec sp_trace_setstatus 2, 2`

2.  并运行这个；`xp_cmdshell 'del c:\delete-me-file.trc'`

# playn - 不同的图像

> ID：10938896
> 
> 赞同：0
> 
> 时间：2012-06-07T19:53:33.230
> 
> 标签：playn

我有两张图片，将它们放在一个列表中，然后重复第二张图片以获得一个包含四张图片的列表，三张相同，一张不同。

在将图像放在屏幕上之前，我调用`Collections.shuffle`(myList)。用户必须点击任何图像。

我如何知道用户是否点击了不同的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:02:08.610

如果你改组一个类而不是改组一个图像呢？

```
class MyImage {
    MyImage(Image img, Boolean val, int x, int y){
      image = img;
      unique = val;
      posX = x;
      posY = y;
   }
} 
```

你定义一个这样的类，并添加它的坐标和定义它是否不同的布尔值。

现在您必须将指针事件发送到集合：

```
 public boolean isUnique(){
       return unique;
    }

    public void Intersects(int x, int y){
      if (x > posX && x < (posX + image.Width()) 
          && y > posY && y < (posY + image.Height())) {
            if (isUnique()) {
               // Perform action for unique image
            }
      } 
    } 
```

所以如果你得到的布尔值是真的，这意味着这是你独特的形象。

# c# - showdialog 重新聚焦效果自定义调用

> ID：10938899
> 
> 赞同：2
> 
> 时间：2012-06-07T19:53:55.553
> 
> 标签：c#, winforms, showdialog

有没有办法让表单闪烁，比如失去焦点时的 ShowDialog？

当您在 Windows 窗体上调用 ShowDialog 并尝试其他操作时，窗体会闪烁几秒钟然后聚焦。

有没有办法以自定义方式调用该闪烁动作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:02:04.807

试试这个。

```
 [DllImport("user32.dll")]
    private static extern Int32 FlashWindowEx(ref FLASHWINFO pwfi);

    [StructLayout(LayoutKind.Sequential)]
    private struct FLASHWINFO {
        public UInt32 cbSize;
        public IntPtr hwnd;
        public FLASHW dwFlags;
        public UInt32 uCount;
        public Int32 dwTimeout;
    }

    [Flags]
    private enum FLASHW: int {
        // stop flashing
        FLASHW_STOP = 0x00,
        // flash the window title
        FLASHW_CAPTION = 0x01,
        // flash the taskbar button
        FLASHW_TRAY = 0x02,
        // flash the window title and the taskbar button
        FLASHW_ALL = 0x03,
        // flash continuously
        FLASHW_TIMER = 0x04,
        // flash until the window comes to the foreground
        FLASHW_TIMERNOFG = 0x0c,
    }

    public static void FlashWindow(IWin32Window form, int count) {
        FLASHWINFO pwfi = new FLASHWINFO();
        pwfi.cbSize = (uint)Marshal.SizeOf(pwfi);
        pwfi.dwFlags = FLASHW.FLASHW_ALL;
        pwfi.dwTimeout = 0;
        pwfi.hwnd = form.Handle;
        pwfi.uCount = (uint)count;
        FlashWindowEx(ref pwfi);
    } 
```

根据您的需要扩展它。

# ruby - 在 Ruby 中定义变量的输出之间放置空格

> ID：10938900
> 
> 赞同：1
> 
> 时间：2012-06-07T19:54:13.277
> 
> 标签：ruby

我刚开始学习如何编码，我正在关注 Chris Pine 的 Ruby 教程。我完成了一个练习，让我打印出我的名字，然后是我的中间名，然后是我的姓氏，最后让我用我的全名问候我。我做的一切都是正确的，除了最后我像这样打印出我的全名：`ParkerJacobsPreyer`我只是想知道如何确保这些变量的输出间隔正确？这是相关的代码行：

```
puts 'Well it was great to meet you ' + name + middleName + lastName 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T19:56:20.127

不要使用加法来连接字符串，而是使用字符串插值：

```
puts "Well it was great to meet you #{name} #{middleName} #{lastName}." 
```

请注意，要使`#{variable}`语法正常工作，您必须使用双引号 ( `"`) 而不是单引号 ( `'`)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T20:05:17.250

[String#%](http://ruby-doc.org/core-1.9.3/String.html#method-i-25)将是另一种选择：

```
puts "Well it was great to meet you %s %s %s." % [name, middleName, lastName] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T19:56:36.480

有几种方法。如果您还没有进入字符串插值，最简单的方法是：

```
puts 'Well it was great to meet you ' + name + ' ' + middleName + ' ' + lastName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T21:05:49.817

如果我们要彻底，您还可以这样做：

```
first_name, middle_name, last_name = %w[John Q. Public]
msg = "It was great to meet you, %s %s %s.\n"
printf msg, first_name, middle_name, last_name 
```

如果您只想对此感到愚蠢，甚至可以这样做：

```
'It was great to meet you, ' << %w[John Q. Public].join(' ') + '.' 
```

让 Ruby 很酷的地方在于，您可以使用功能上等价但*语义*不同的不同表达式。这使您可以在更高的层次上表达您的意图。

# asp.net - 在服务器上为多个实例部署 asp.net 应用程序并调整配置文件

> ID：10938901
> 
> 赞同：1
> 
> 时间：2012-06-07T19:54:28.133
> 
> 标签：asp.net, .net, deployment, web-config

我们的项目代表基于 ASP.NET MVC 的 Web 应用程序。它的 web.config 文件中有很多配置：日志文件位置、数据库连接字符串、文件存储文件夹等。

一般来说，这种应用程序的自动部署并不是什么大问题。在我们的例子中，虽然我们在同一台服务器上有多个该应用程序的实例。因此，在部署时，我们必须对每个实例的配置文件进行大量更改（调整数据库连接字符串、文件存储文件夹和所有内容）。

目前我们正在使用一个自定义部署工具，但它太有问题了，我不能依赖它。所以我正在寻找可以在我们的场景中使用的更好的工具或工具组合。

一般来说，它应该允许： * 自动部署到服务器上的所有实例 * 对每个实例的配置文件进行特定操作（例如 XPath、XML 元素替换）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:58:13.057

您是否考虑过使用Visual Studio 和[msbuild](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)中内置的[转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)功能。这允许您为配置文件指定不同的转换，生成用于不同环境/文件夹的输出配置。

您可以为 app 或 web.configs 进行设置。我猜它真的可以在任何 xml 文件上完成。

除了转换之外，您还应该能够使用[msbuild](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)执行您需要的任何任务。

MSBuild已经为常见场景编写了许多[任务。](http://msdn.microsoft.com/en-us/library/7z253716.aspx)

请参阅以下 SO 问题的[答案](https://stackoverflow.com/a/5109530/444610)以使用 app.configs 的转换功能：[App.Config Transformation for projects which are not Web Projects in Visual Studio 2010?](https://stackoverflow.com/questions/3004210/app-config-transformation-for-projects-which-are-not-web-projects-in-visual-stud)

# php - 如何在响应客户端之前将整个 http 响应保存到服务器端的日志文件

> ID：10938907
> 
> 赞同：1
> 
> 时间：2012-06-07T19:55:00.317
> 
> 标签：php, file

我想知道是否可以在发送响应之前在某些 php 脚本的末尾将整个 http 响应保存在服务器端？如果我能以十六进制格式保存响应会更好吗？或者我可以在 apache 日志中看到它吗？

非常感谢

编辑：

```
 function shutDownFunction() {

        $error = error_get_last();

        if ( !empty($error) ) {

            header('HTTP/1.0  500' .$error );
        } else { 
           header('HTTP/1.0 200');
           return '<html> <body> ... </body></html>';
        }

    }

register_shutdown_function('shutdownFunction');

try { 

 $data = file_get_contents("php://input");

  //do some work here 

    } catch (Exception $e) {

        header('HTTP/1.0 503'); 

        die;
    } 
```

我想保存整个响应，包括标题，我不知道，例如：

```
GET /tutorials/other/top-20-mysql-best-practices/ HTTP/1.1
Host: net.tutsplus.com
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5 (.NET CLR 3.5.30729)
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Keep-Alive: 300
Connection: keep-alive
Cookie: PHPSESSID=r2t5uvjq435r4q7ib3vtdjq120
Pragma: no-cache
Cache-Control: no-cache 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T20:00:41.860

```
<?php
function callback($buffer)
{
  // Save the output (to append or create file)
  $fh = fopen("out.txt", "a");
  fwrite($fh, $buffer);
  fclose($fh);

  // Return the output
  return $buffer;
}

// Any thing that is indended to be sent to the client is stored in a buffer and callback is called
ob_start("callback");

// Write out to buffer here
echo "TEST";
echo " SOME MORE DATA";
echo "\r\nNEW LINE";
echo "<b>SOME HTML</b>";

// Send to client
ob_end_flush();
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:02:30.810

在脚本的开头放置：

```
ob_start(); 
```

并将其放在脚本的末尾

```
$output = ob_get_clean();
echo $output;
file_put_contents(time().'output.txt', $output); 
```

# wkhtmltopdf - WKHTMLTOPDF 在网络服务器（hostgator）上的安装

> ID：10938908
> 
> 赞同：1
> 
> 时间：2012-06-07T19:55:00.537
> 
> 标签：wkhtmltopdf, failed-installation

有趣的是，我坚持在 CentOS 服务器上安装 wkhtmltopdf（hostgator 是提供者）。我一直在谷歌搜索有关安装的详细信息，但没有找到任何可以帮助像我这样天真的人的东西。

那么，有人指导我完成服务器上的安装吗？任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T12:14:28.247

[在我发现http://blog.dakdad.com/post/13145939686/install-wkhtmltopdf-centos-5](http://blog.dakdad.com/post/13145939686/install-wkhtmltopdf-centos-5)的博客文章中有很好的说明- 存储库中可用的版本是 0.9.9。如果您对该选项很满意，那么该选项将起作用。

编辑：因为我是一个巨大的书呆子，所以我使用 Virtual CentOS 盒子进行了测试，并使用了上述方法。我也想测试静态二进制选项，并让这种方式也能正常工作。基本步骤（我以 root 身份进行，即使没有 root 访问权限也应该可以工作 - 很大程度上取决于您的服务器）：

```
# If you don't have wget installed
yum install wget

# get wkhtmltopdf binary. 
# browse the site to get the correct one for you
# if you don't know which one, run the command uname -a
# if it has things like x84_64, get the amd64 one. Otherwise i386.
wget http://wkhtmltopdf.googlecode.com/files/wkhtmltopdf-0.11.0_rc1-static-amd64.tar.bz2

# unpackage binary 
bunzip2 wkhtmltopdf-0.11.0_rc1-static-amd64.tar.bz2

# untar
tar xvz wkhtmltopdf-0.11.0_rc1-static-amd64.tar

# make sure you have the file, the file list should contain wkhtmltopdf-amd64
ls

# run to check version, output should contain "wkhtmltopdf" 0.11.0 rc1
./wkhtmltopdf-amd64 -V 
```

在那里你有你自己的静态包。我用它测试过

```
./wkhtmltopdf-amd64 http://www.google.cn googl.pdf 
```

有效！汉字失败是因为我没有在 CentOS 盒子上安装任何其他东西，我可能需要字体和诸如此类的东西，但 PDF 确实已创建并且看起来还不错。

祝你好运，玩得开心。

# download - 如何使用客户端 JScript 从注释中下载附件？

> ID：10938909
> 
> 赞同：4
> 
> 时间：2012-06-07T19:55:25.963
> 
> 标签：download, client-side, dynamics-crm-2011, jscript

我正在尝试通过客户端 JScript 提供注释附件的链接。标准的 MS 制作的 Notes 组件通过以下 url 执行此操作：

> [serverurl]/[appname]/Activities/Attachment/download.aspx?AttachmentType=5&AttachmentId={blahblahblah}&IsNotesTabAttachment=1&CRMWRPCToken=blahblahblah&CRMWRPCTokenTimeStamp=blahblahblah

问题是我不知道如何获取 Token 或 TokenTimeStamp，所以我收到拒绝访问错误（“表单不再可用，安全预防措施等”）。

我能想到的唯一另一种方法是通过 OData 端点，但这充其量会给我一个 base64 字符串，我仍然可以将其转换为文件流以提供给浏览器（所有这些似乎都需要永远实施/弄清楚）。

我发现了一些其他描述相同内容的帖子，但没有人回答它们：

[http://social.microsoft.com/Forums/en-US/crmdevelopment/thread/6eb9e0d4-0c0c-4769-ab36-345fbfc9754f/](http://social.microsoft.com/Forums/en-US/crmdevelopment/thread/6eb9e0d4-0c0c-4769-ab36-345fbfc9754f/)

[http://social.microsoft.com/Forums/is/crm/thread/45dabb6e-1c6c-4cb4-85a4-261fa58c04da](http://social.microsoft.com/Forums/is/crm/thread/45dabb6e-1c6c-4cb4-85a4-261fa58c04da)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:47:30.030

CRM 2011 中的下载很奇怪。我确信这是一个安全问题，但点击次数很多。

无论如何，我选择创建一个“Web 服务”，它会传递注释 ID。Web 服务出去并获取附件，然后修改响应以发送正确的文件（PDF、jpg 等）

# android - Android屏幕中的所有分辨率大小是多少？

> ID：10938910
> 
> 赞同：0
> 
> 时间：2012-06-07T19:55:32.763
> 
> 标签：android, screen-resolution

我的问题是：**目前，有多少种Android分辨率存在？它的大小以像素为单位是多少？**

示例：其中之一是 240x320（用于 Galaxy 5）。

**上下文**：现在，我正在使用一个应用程序，该应用程序在给定不同分辨率的情况下调用不同的方法。它与分辨率无关的开发无关，而是与用户体验有关，给定他的移动类型。我搜索了一下，但找不到包含这些信息的“表格”或“列表”。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:57:45.700

阅读这篇文章 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

简历：考虑一下随机的决议。这是不可预测的价值。因此，最好针对不同的配置（固定的）进行开发，例如小-中-大屏幕或低-中-高 dpi。

但是，在下面的链接中有一个表格，其中包含大多数使用的分辨率 [http://developer.android.com/guide/practices/screens_support.html#testing](http://developer.android.com/guide/practices/screens_support.html#testing)

# .net - 从 DataGrid 获取特定值

> ID：10938912
> 
> 赞同：1
> 
> 时间：2012-06-07T19:55:43.183
> 
> 标签：.net, mysql, datagrid

不明白为什么我不能调用这行代码？

```
MsgBox(SAMPLEIDDataGridView.SelectedRows(0).Cells(0).ToString()) 
```

我收到以下错误消息：

mscorlib.dll 中出现“System.ArgumentOutOfRangeException”类型的未处理异常

附加信息：索引超出范围。必须是非负数且小于集合的大小。

如果我的表格如下，那怎么可能：

ID 名字 姓氏 0 Guy TheGuy 1 约翰史密斯 2 吉姆蚯蚓 3 内森德雷克

我的表设计如下：

ID int 25 0 0 0 0 0 0 0 0 -1 0 名字 varchar 25 0 -1 0 0 0 0 0 latin1 latin1_swedish_ci 0 0 姓氏 varchar 25 0 -1 0 0 0 0 0 latin1 latin1_swedish_ci 0 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:59:34.257

您正在使用 SelectedRows ，因此如果您没有选择任何行，它将给您该异常！

试试行..

# android - 自定义 BaseAdapter 空指针

> ID：10938913
> 
> 赞同：1
> 
> 时间：2012-06-07T19:55:51.670
> 
> 标签：android

我得到一个空指针，`lv1.setAdapter(myAdapter)`我不知道为什么。有人能看出什么问题吗？

我正在尝试实现两行列表

**我的活动.class**

```
final ListView lv1 = (ListView) findViewById(R.id.ListView01);
          Log.d("",topicTitle.toString() + "----------" +  topicAuthor.toString()); //not null
          MyCustomBaseAdapter myAdapter =  new MyCustomBaseAdapter(DiscussionTopics.this, topicTitle , topicAuthor);
          lv1.setAdapter(myAdapter); 
```

**MyCustomBaseAdapter.class**

```
public class MyCustomBaseAdapter extends BaseAdapter {
    private static ArrayList<String> topics;
    private static ArrayList<String> author;
    private LayoutInflater mInflater;
    public MyCustomBaseAdapter(Context context, ArrayList<String> topics, ArrayList<String> author ) {
        this.topics = topics;
        this.author = author;
        mInflater = LayoutInflater.from(context);
    }
    public long getItemId(int position) {
        return position;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.custom_row_view, null);
            holder = new ViewHolder();
            holder.title = (TextView) convertView.findViewById(R.id.title);
            holder.author = (TextView) convertView.findViewById(R.id.author);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.title.setText(topics.get(position));
        holder.author.setText(author.get(position));
        return convertView;
    }
    static class ViewHolder {
        TextView title;
        TextView author;
    }
    public int getCount() {
        // TODO Auto-generated method stub
        return topics.size();
    }
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return topics.get(position);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:01:20.517

所以你永远不会得到处理程序`R.id.ListView01`

```
final ListView lv1 = (ListView) findViewById(R.id.ListView01); 
```

确保您在此行之前调用 setContentView() 并为其提供包含`R.id.ListView01`

# javascript - 如何结合我的 AJAX 脚本和 TOGGLE 脚本？

> ID：10938923
> 
> 赞同：0
> 
> 时间：2012-06-07T19:56:28.410
> 
> 标签：javascript, ajax

我是 js 菜鸟。我有`我的隐藏div显示但ajax没有，第二个ajax工作但直接显示 - 我想在ajax脚本上包含一个点击事件但不知道如何：

```
$(document).ready(function(){
   $(".project-thumbnails a").click(function(event){
    event.preventDefault();
    $('#project-container').slideDown('slow');
    return false;
   });

   $('a.project-close').click(function(event){
    event.preventDefault();
    $('#project-container').slideUp('slow');
    return false;
   }); 
```

});

和

```
jQuery(document).ready(function($) {

    var $mainContent = $("#project-container"),
        siteUrl = "http://" + top.location.host.toString(),
        url = ''; 

    $(document).delegate("a[href^='"+siteUrl+"']:not([href*=/wp-admin/]):not([href*=/wp-login.php]):not([href$=/feed/])", "click", function() {
        location.hash = this.pathname;
        return false;
    }); 
    $("#searchform").submit(function(event) {
        location.hash = '?s=' + $("#s").val();
        event.preventDefault();
    }); 
    $(window).bind('hashchange', function(){
        url = window.location.hash.substring(1); 
        if (!url) {
            return;
        } 
        url = url + " .entry"; 
        $mainContent.animate({opacity: "0.1"}).html('').load(url, function() {
            $mainContent.animate({opacity: "1"});
        });
    });
    $(window).trigger('hashchange');
}); 
```

我如何将这些与最终 DIV 与 AJAX 仅在我单击它之后才打开的片段结合起来，并且是否可以关闭它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:41:58.160

第一个解决方案是使用委托事件（[`.delegate()`](http://api.jquery.com/delegate/)或[`.on()`](http://api.jquery.com/on/)使用选择器）。与其在链接本身上注册处理程序，不如在 ajax 脚本未覆盖/重新加载/添加的元素上注册它，它也适用于以后附加的元素。

第二种解决方案是执行注册处理程序的函数，而不是（仅）onDOMready，而是 onHashchange。此事件由您的 ajax 脚本触发以指示有新内容。然而，使用该解决方案，您需要防止代码在同一元素上两次注册处理程序，因此您应该使用第一个。

# android - 无法启动活动 ComponentInfo java.lang.IllegalStateException：系统服务在 onCreate() 之前对活动不可用

> ID：10938926
> 
> 赞同：0
> 
> 时间：2012-06-07T19:56:34.777
> 
> 标签：android

我正在尝试查看应用程序启动时用户是否有互联网连接：

```
package nco.supp;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import nco.supp.Status;
import nco.supp.Register;

public class ncosuppActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        NetworkManager networkManager = new NetworkManager();
        if (!networkManager.haveNetworkConnection()) {

            AlertDialog.Builder dlgAlert  = new AlertDialog.Builder(this);
            dlgAlert.setPositiveButton("Ok", null);

        }

        Button loginButton = (Button) findViewById(R.id.loginButton);
        loginButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                startActivity(new Intent(ncosuppActivity.this, Status.class));

            }
        });

        Button registerButton = (Button) findViewById(R.id.registerButton);
        registerButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                startActivity(new Intent(ncosuppActivity.this, Register.class));

            }
        });
    }
} 
```

* * *

```
package nco.supp;

import android.app.Activity;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class NetworkManager extends Activity{

    public boolean haveNetworkConnection() {
        boolean haveConnectedWifi = false;
        boolean haveConnectedMobile = false;

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo[] netInfo = cm.getAllNetworkInfo();
        for (NetworkInfo ni : netInfo) {
            if (ni.getTypeName().equalsIgnoreCase("WIFI"))
                if (ni.isConnected())
                    haveConnectedWifi = true;
            if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
                if (ni.isConnected())
                    haveConnectedMobile = true;
        }
        return haveConnectedWifi || haveConnectedMobile;
    }

} 
```

我收到此错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{nco.supp/nco.supp.ncosuppActivity}:
java.lang.IllegalStateException: System services not available to Activities before onCreate() 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:46:32.243

您试图在`Activity`没有该方法的类中创建一个方法`onCreate()`，这是错误的。`MainActivity`只需在您的as 中创建一个方法

```
private boolean checkConnectivity() {
        ConnectivityManager manager = (ConnectivityManager) 
                             getSystemService(Context.CONNECTIVITY_SERVICE);
        return manager.getActiveNetworkInfo() != null && manager.
                             getActiveNetworkInfo().isConnectedOrConnecting();
    } 
```

这应该让它工作。

# node.js - 可视化来自 winston (node.js) 的错误日志

> ID：10938932
> 
> 赞同：1
> 
> 时间：2012-06-07T19:57:26.247
> 
> 标签：node.js, logging, visualization

[更新] 似乎有可以使用石墨作为来源的立体主义。如果那里有一个使用 mongo 作为源的项目，那就太好了。

我正在使用 winston（node.js 包）记录到 mongodb 数据存储。什么是可视化mongodb数据的好工具？mongo 网站上的推荐包括 pentaho，这是非常企业化的。我见过 Cube 飘来飘去，但它似乎不是我需要的；我需要一个可视化工具，这样我就可以看到每隔几分钟更新一次特定错误的计数（存储在 mongo 中）。本质上是 splunk 所做的，但它与 mongodb 一起使用并且是免费的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T20:52:11.967

尽管有限，但有一个免费版本的[http://www.mongovue.com](http://www.mongovue.com) - 我认为它只是 Windows。

# mysql - MySQL：选择大于随机数的行会产生奇怪的结果

> ID：10938934
> 
> 赞同：2
> 
> 时间：2012-06-07T19:57:39.047
> 
> 标签：mysql, random

假设有一个包含 1000 个条目的表。我们想选择一个介于 1 到 1000 之间的随机数，并返回 id 大于或等于该值的所有行。输入静态值时，它似乎工作得很好。例如

```
Select * From myTable
Where id >= 500
Order by id Limit 10; 
```

这将返回 500 到 509 的预期值。但是，一旦我尝试用随机生成的值替换 500 的固定值，事情就变得非常奇怪。

```
Select * From myTable
Where id >= floor(1 + RAND() * (1000 - 1))
Order by id Limit 10; 
```

突然，它不再返回顺序值。返回的值也非常偏向低端。我得到这样的结果：

```
65, 80, 96, 98, 112, 114, 115, 116, 130, 131 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:03:08.390

这就是为什么你的随机变化....

```
 mysql> select id,rand() from test_big;
    +-------------+----------------------+
    | id          | rand()               |
    +-------------+----------------------+
    |          10 |   0.9478371384999129 |
    |          11 | 0.024267499357711057 |
    |   123456789 |   0.2778261120224615 |
    |  1234567890 |   0.3163280927728192 |
    | 12345678901 |   0.7481621585303565 |
    +-------------+----------------------+
    5 rows in set (0.00 sec) 
```

对每一行执行随机数.....但是您可以使用变量来解决您的问题....

```
mysql> set @random:= rand();
Query OK, 0 rows affected (0.00 sec)

mysql> select @random;
+--------------------+
| @random            |
+--------------------+
| 0.7918265450669699 |
+--------------------+
1 row in set (0.00 sec)

mysql> select id,@random:=@random+1 from test_big;
+-------------+--------------------+
| id          | @random:=@random+1 |
+-------------+--------------------+
|          10 |   1.79182654506697 |
|          11 | 2.7918265450669697 |
|   123456789 | 3.7918265450669697 |
|  1234567890 |   4.79182654506697 |
| 12345678901 |   5.79182654506697 |
+-------------+--------------------+
5 rows in set (0.00 sec) 
```

在你的情况下

```
set @random:=floor(1 + RAND() * (1000 - 1)); 
```

在选择功能之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:59:18.270

子句中的随机数`WHERE`是针对每一行单独计算的。因此，您没有一个随机数来过滤您的结果，而是 1000 个随机数 - 每个条目一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:59:34.787

因为 where 子句中的随机函数每次都会被评估，因此每次都会生成一个新的随机数。

# iphone - 由于 ARC，使用 LLVM gcc 4.2 进行核心绘图会导致符号问题

> ID：10938942
> 
> 赞同：0
> 
> 时间：2012-06-07T19:58:08.303
> 
> 标签：iphone, ios5, automatic-ref-counting, core-plot, llvm-gcc

我正在尝试按照[这些说明将](http://recycled-parts.blogspot.com/2011/07/setting-up-coreplot-in-xcode-4.html)[core-plot](http://code.google.com/p/core-plot/)安装到我的 iPhone 项目中。Coreplot 要求我使用 LLVM gcc 4.2 编译器，这会导致符号问题。

因为我使用的是 LLVM gcc 4.2，所以 @autorelease 表示法会在 main.m 中产生错误“'@' token 之前的预期表达式”。

```
int main(int argc, char *argv[]) {
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }

} 
```

因此，我摆脱了 @autoreleasepool 符号并将 main 更改为如下所示。

```
int main(int argc, char *argv[])
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    [pool release];
    return retVal;
} 
```

但是，由于我使用的是 ARC，因此这给出了“NSAutoreleasePool 不可用”错误。所以我将 -fno-objc-arc 编译器标志添加到 main.m，这给了我和“无法识别的命令行选项”-fno-objc-arc“错误。

有没有办法解决在我的项目中使用 ARC 时使用 LLVC gcc 4.2 引起的符号问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:40:59.527

ARC 不能与 gcc-llvm 一起使用。你有几个选择。您可以将 CorePlot 单独构建为静态库并将其链接到您的项目中。您甚至可以将 CorePlot 项目文件嵌入到您的文件中，并将其构建为具有自己构建配置的依赖项。您也可以将 CorePlot 切换到 clang。删除自定义 C 选项后，我得到了 1.0 版本。ARC 可以很好地与非 ARC 代码集成。

# openvms - 是否有任何用于在命令行中自动完成的开源 .com 文件？

> ID：10938946
> 
> 赞同：0
> 
> 时间：2012-06-07T19:58:17.463
> 
> 标签：openvms

在 Linux 中，我们可以通过选项卡对命令自动完成或文件名自动完成进行自动完成。我知道有一些用于此目的的免费软件，但我可以在线搜索的是二进制文件，是否有任何用于此目的的开源 .com 文件？我的意思是，一旦登录时运行这个 .com 文件，我们就可以在之后使用选项卡进行自动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:05:13.837

DCL（.com 文件解释器）本身没有处理自定义密钥拦截的工具。要实现 TAB 自动完成，需要拦截 TAB 按下。这就是使用单独的 [免费软件] 实用程序的原因。

或者，安装 GNV-kit (GNU-not-VMS:ports many linux utils) 将让人们使用 bash 而不是 DCL，然后自动完成将在 bash 中工作。

如果您只需要“自动完成”来查找文件名，那么使用通配符可能是一种快捷方式（也许首先 dir 它）。您还可以查找`f$search`和`f$parse`词法 (>> `help lex f$search`)，它们本质上是进行 globbing。例如>> `type 'f$search("f*.txt")` !!-- 将输入与 f*.txt 匹配的第一个文件

如果您需要“自动完成”来遍历目录，那么可以使用`f$search`内部使用的 DCL 脚本来完成。事实上，我前段时间为自己写过这样的东西，我用它而不是“设置默认值”来导航目录（类似于 CD 命令——免费软件也有这样的东西）

# iphone - 用theos隐藏SBBulletinBlurredShadowLabel的阴影

> ID：10938947
> 
> 赞同：0
> 
> 时间：2012-06-07T19:58:19.610
> 
> 标签：iphone, objective-c, ios, hook, tweak

我想通过将**SBBulletinBlurredShadowLabel**（私有框架）与 theos 挂钩来隐藏它的模糊阴影。

SBBulletinBlurredShadowLabel.h：

```
#import "UILabel.h"

@interface SBBulletinBlurredShadowLabel : UILabel
{
}

- (struct CGSize)sizeThatFits:(struct CGSize)arg1;
- (void)drawTextInRect:(struct CGRect)arg1;

@end 
```

在这里使用它

SBBulletinHeaderView.h：

```
#import "SBBulletinLinenSegmentView.h"

@class NSString, SBBulletinBlurredShadowLabel, SBBulletinClearButton, UIView;

@interface SBBulletinHeaderView : SBBulletinLinenSegmentView
{
    UIView *_translucentOverlay;
    UIView *_iconView;
    SBBulletinBlurredShadowLabel *_sectionLabel;
    SBBulletinClearButton *_clearButton;
    id <SBBulletinHeaderViewDelegate> _delegate;
    NSString *_sectionID;
}

+ (float)headerHeight;
- (id)initWithFrame:(struct CGRect)arg1 linenView:(id)arg2;
@property(retain, nonatomic) NSString *sectionID; // @synthesize sectionID=_sectionID;
- (void)dealloc;
- (void)setShowsClearButton:(BOOL)arg1 animated:(BOOL)arg2;
- (void)layoutSubviews;
- (void)willMoveToWindow:(id)arg1;
- (id)_sectionNameForSectionID:(id)arg1;
- (id)_newIconViewForSectionID:(id)arg1;
@property(readonly, nonatomic) SBBulletinClearButton *clearButton; // @synthesize clearButton=_clearButton;
@property(nonatomic) id <SBBulletinHeaderViewDelegate> delegate; // @synthesize delegate=_delegate;

@end 
```

什么不起作用：

```
%hook SBBulletinBlurredShadowLabel 
- (void)drawTextInRect:(struct CGRect)arg1 {
//skips it. The label disappears
}
%end

%hook SBBulletinHeaderView
- (void)layoutSubviews {
// does not work since SBBulletinBlurredShadowLabel doesn't use the standard UILabel shadow
self._sectionLabel.shadowColor = [UIColor clearColor];
}
%end 
```

我的想法：

```
%hook SBBulletinBlurredShadowLabel
- (void)drawTextInRect:(struct CGRect)arg1 {
[super drawTextInRect:arg1];
}
%end 
```

但是我不知道使用theos挂钩时如何调用super。

任何建议如何隐藏阴影或如何调用超级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:45:16.937

在 Theos`%orig;`中，等价于带有原始参数的 super；

您还`%orig(arg1, arg2, etc);`可以将自定义参数传递给 super。

# jquery - jQuery UI Accordion - 如何更改用于内容面板的元素

> ID：10938948
> 
> 赞同：3
> 
> 时间：2012-06-07T19:58:19.757
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

jQuery UI Accordion 的标记看起来像这样......

```
<div id="accordion">

    <h3><a href="#">First header</a></h3>
    <div>First content</div>

    <h3><a href="#">Second header</a></h3>
    <div>Second content</div>

</div> 
```

长话短说，我正在使用的菜单的标记大多不在我的控制范围内。看起来像这样...

```
<div id="sidebar">
    <ul>
        <li class="drop">
            <a href="#">xxxxxxxxxx</a>
            <ul class="sub-menu">
                <li>xxxxxxxxxx</li>
                <li>xxxxxxxxxx</li>
                <li>xxxxxxxxxx</li>
            </ul>
        </li>
        <li><a href="#">xxxxxxxxxx</a></li>
        <li><a href="#">xxxxxxxxxx</a></li>
        <li><a href="#">xxxxxxxxxx</a></li>
    </ul>
</div> 
```

我可以有选择地向第一级列表项添加一个类，如果它们有一个子菜单，我会这样做。我添加了“drop”（如上所示）并像这样设置手风琴......

```
$("#sidebar").accordion({
    header: 'li.drop'
}); 
```

那部分工作正常。我可以看到 jQuery 正在添加所有应有的手风琴类。问题是脚本正在寻找一个紧跟在标题后面的 div 以用作内容面板。我无法包装`ul class="sub-menu"`在 div 中，因为我无法控制标记的那一部分。我试图弄清楚如何设置应该将哪个元素用作内容面板，即具有“子菜单”类的 ul。有任何想法吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:24:05.307

手风琴不寻找`div`. 它在标题之后查找下一个元素。
因此，您可以对给定的标记进行后处理。只需在应用手风琴之前插入此代码：

```
$("li.drop").each(function() {
    $(this).after($(this).find(".sub-menu"));
}); 
```

# ios - MonoTouch/iOS 上可用的 PreferredLocalizations

> ID：10938950
> 
> 赞同：2
> 
> 时间：2012-06-07T19:58:32.387
> 
> 标签：ios, localization, xamarin.ios, nsbundle

查看 Apple Developer Reference，我发现它`PreferredLocalizations`可以作为`PreferredLanguages`：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)

但是，似乎“PreferredLocalizations”没有在`NSBundle`. 我在这里错过了什么吗？我是`using MonoTouch.Foundation`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:04:05.157

You're right, it's presently missing from MonoTouch. The best and fastest way to get it is to fill a [bug report](http://bugzilla.xamarin.com) and ask for it.

In many cases (like this one) it's easy to give a workaround that will work with existing releases of MonoTouch.

Note that your link is for OSX, not [iOS](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html) and some types, including `NSBundle` have a few differences between the two (but in the case of `preferredLocalizations` it exists in both OS).

**UPDATE**

I added this for the next (it will be 5.3.5) version of MonoTouch. In the meantime here's a workaround:

```
using MonoTouch.ObjCRuntime;
...
var bh = NSBundle.MainBundle.Handle;
var sel = Selector.GetHandle ("preferredLocalizations");
var pl = NSArray.StringArrayFromHandle (Messaging.IntPtr_objc_msgSend (bh, sel));
Console.WriteLine (pl [0]); // en 
```

# asp.net - Web 服务调用不起作用，只是被重定向到 .asmx 页面

> ID：10938952
> 
> 赞同：3
> 
> 时间：2012-06-07T19:58:40.457
> 
> 标签：asp.net, web-services, iis, asmx

我有一个正在开发的 .Net Web 服务。通常情况下，本地一切正常。当我将服务放入站点时，编译站点并将其加载到服务器上它不起作用。发生的情况是，如果我在服务器上本地浏览 .asmx 页面，然后单击要调用的方法，单击调用后，我会得到一个加载了 .asmx 页面的新窗口。没有 XML 输出，什么都没有。

我从服务器上复制了已编译的站点，并且服务运行良好，这告诉我这是一个 IIS 设置。服务器是2008 R2。有没有人以前见过这个问题，或者有任何想法去哪里看？我在事件查看器中没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-29T18:28:35.710

我遇到了完全相同的问题，我不知道你是否发现了这个问题，但是[这篇文章](https://stackoverflow.com/questions/39314412/web-service-method-works-fine-on-development-computer-but-failed-on-server)为我提供了答案，我的重写包括一个规则，使 url 全部小写。这会导致调用失败，因为 webservice 方法区分大小写并包含大写字符。我添加了一个重写规则来免除 .asmx 文件，它现在可以正常工作（来自[这篇文章](https://stackoverflow.com/questions/9618366/rewrite-rule-to-rewrite-all-except-file-extension)）。

# web-services - 主干模型和集合是否期望具有相同的项目表示？

> ID：10938953
> 
> 赞同：2
> 
> 时间：2012-06-07T19:58:41.670
> 
> 标签：web-services, rest, backbone.js, api-design

假设我们有一个 rest API 来取回位于 /items 的一些项目，它返回一个 JSON 数组，如下所示

```
[ {....},{...},{...} .... {...}] 
```

假设 items/{id} 返回 id 为 {id} 的项目的表示

要达到第 4 项，可以通过两种方式进行：

**案例 1：**获取 /items，然后在响应中搜索 id #4 的项目

**案例 2：**获取 /item/4

案例 1 返回的表示是否应该与案例 2 返回的表示相同？

**EDIT 1**例如 /dogs 可以返回一个狗资源数组，其中只填充名称和 id 并且 /dogs/4 可以返回狗资源的完整详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:23:36.793

### 简短的回答

您可以从 Collection 和 Model 返回不同的结构。

### 长答案

您可以在 JSON 中返回任何您想要的内容，Backbone 将`Model`使用 JSON 提供的数据构建您的实体，Backbone 将使创建的实例适应提供的数据，并将其与声明的`Model.defaults`.

例如，您甚至可以为这两个查询返回不同的 JSON 结构：

*   /狗/1
*   /狗/2

我理解您的担忧，您正在尝试`fetch`使用数据细节非常低的一组对象，然后`fetch`在需要时尝试获取具体实例的完整数据。

我看不出有什么问题。

尝试将未*完成的模型**标记*为不在详细视图中使用它们而不获取整个数据。

# iphone - 是否可以在不使用 Bonjour 的情况下在 iPhone 上进行设备发现？

> ID：10938954
> 
> 赞同：0
> 
> 时间：2012-06-07T19:58:46.617
> 
> 标签：iphone, bonjour

我想发现一个同时具有 WiFi 和蓝牙但没有 Bonjour 服务器的自定义设备。有什么方法可以发现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:25:21.453

不容易。这就是发明 Bonjour aka Zeroconf 的原因。理想的解决方案是在自定义设备上添加 Bonjour/Zeroconf 支持。

一个糟糕的选择：如果设备通过 DHCP 获取其地址，您可以使用 DHCP 服务器来帮助您。例如，许多 DHCP 服务器提供了一个 Web 界面，您可以在其中查找 DHCP 客户端名称和 IP 地址的列表。一些服务器和路由器可以选择通过 DNS 服务器为 DHCP 客户端的名称提供服务。

# c# - 什么是 ICollection？

> ID：10938955
> 
> 赞同：7
> 
> 时间：2012-06-07T19:58:53.530
> 
> 标签：c#, .net

什么是 C# 中的 ICollection？

```
private void SendEmail(string host, int port,
        string username, string password,
        string from, string to,
        string subject, string body,
        ICollection<string> attachedFiles) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T20:01:07.783

该`ICollection<T>`接口是`System.Collections.Generic`命名空间中类的基接口。

该`ICollection<T>`接口`IEnumerable<T>`由`IDictionary<TKey, TValue>`和扩展和扩展`IList<T>`。

实现`IDictionary<TKey, TValue>`是键/值对的集合，就像`Dictionary<TKey, TValue>`类一样。

实现`IList<T>`是值的集合，它的成员可以通过索引访问，就像`List<T>`类一样。

[http://msdn.microsoft.com/en-us/library/92t2ye13.aspx](http://msdn.microsoft.com/en-us/library/92t2ye13.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T21:08:21.387

我认为 OP 实际上试图理解的是什么 implements `ICollection<string>`，因为显然`new ICollection<string>()`不会飞。

正如 Micah 指出的那样，`List<string>`实现`ICollection<string>`. 如果你想知道还有什么，看看 ILSpy，找到`ICollection<T>`类型，分析它，看看是什么实现了它。这是我的一些结果

*   数组段
*   列表
*   ListT.SynchronizedList
*   链表
*   排序列表
*   排序集

... 和更多

此外，一个普通的 ol'`string`数组也实现了`ICollection<string>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:01:50.313

ICollection 是一个表示集合的接口，它还包含强类型成员

这是如何实现该接口的示例

[http://support.microsoft.com/kb/307484](http://support.microsoft.com/kb/307484)

通用列表实现了这个接口

[http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T20:02:06.167

集合是一组具有相同类型的对象（在您的示例中为字符串）。

从[文档](http://msdn.microsoft.com/en-us/library/akyhke97%28v=vs.100%29.aspx)中：

> 任何类型的对象都可以分组到 Object 类型的单个集合中，以利用语言中固有的构造。例如，C# foreach 语句（Visual Basic 中的 for each）要求集合中的所有对象都是单一类型。

[ICollection](http://msdn.microsoft.com/en-us/library/system.collections.icollection.aspx)是集合的接口定义。

# java - 从 Eclipse 中的编辑器中获取选定的 Java 元素

> ID：10938956
> 
> 赞同：2
> 
> 时间：2012-06-07T19:59:09.067
> 
> 标签：java, eclipse, plugins, selection

我正在开发一个 Eclipse 插件，我需要从活动编辑器中获取选定的元素。我已经想出了（一种方法）来做到这一点。以下是关键行：

```
ITypeRoot root = EditorUtility.getEditorInputJavaElement(activeJavaEditor, false);
selectedElement = root.getElementAt(offset); 
```

（这类似于问题[Eclipse 插件的答案：获取封闭类和成员名称](https://stackoverflow.com/questions/3953096/eclipse-plugin-get-the-enclosing-class-and-member-name)）

但我遇到的问题是这只会返回声明的方法、类型、字段等，而从不调用。例如，在活动编辑器中给出以下代码：

```
public void foo() {
    ClassA.run();
} 
```

即使插入符号位于“ClassA”或“run”上，我的代码仍会返回方法“foo”。有谁知道如何获得调用的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:28:19.183

尝试 ITypeRoot#codeSelect() 代替。

# php - 在 Salesforce 中获取帐户的当前产品列表

> ID：10938957
> 
> 赞同：1
> 
> 时间：2012-06-07T19:59:09.957
> 
> 标签：php, salesforce

在过去的一年里，我经常在我们的应用程序和 Salesforce 之间进行各种类型的集成。我发现我要做的一件事是找出客户当前在其帐户中拥有的所有产品的列表。据我所知，我必须这样做：

1.  获取帐户的所有机会
2.  `OpportunityLineItem`获取这些机会的所有产品 ( )
3.  将它们“添加”在一起以获得最终的产品列表（当前产品）

我们的销售团队`Opportunity`为客户的每个销售活动（无论是新产品、追加销售还是降级）制作一个新的，所以理论上你可以有这样的机会：

1.  添加产品 A
2.  向产品 C 追加销售产品 A
3.  添加产品 B
4.  删除产品 C

最终结果（实际的当前产品列表）将只是产品 B。机会仅代表为此进行的所有销售的历史数据`Account`。

我是一名开发人员。我不知道这是否是进行销售流程的最佳方式——我把它留给他们。但是，我的工作是查找所有当前产品的列表，以便我可以自动将其与我们的计费系统同步。当前的方式（如上所述）看起来很笨重，而且不是很有用。它也可能变得非常复杂，并且在不更改代码的情况下很难扩展。例如，如果 Sales 要添加新产品，我必须更新代码来处理这些添加。

有什么方法可以获取**当前**产品的列表，`Account`而不必遍历每个`Opportunity`？

我希望这是有道理的。伪代码可以正常工作，或者您可以向我指出一些我可能错过的文档。

谢谢你们的时间，伙计们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:14:59.343

我认为除了循环获取当前产品列表之外没有其他方法。

您可能希望创建一个自定义对象来存储帐户与产品的关系，或者您可以构建一个特定于帐户的价目表，其中包含仅与该帐户相关的产品。

# java - dom4j HTMLWriter 缺少 XML 声明

> ID：10938958
> 
> 赞同：0
> 
> 时间：2012-06-07T19:59:10.347
> 
> 标签：java, html, xml, dom4j

即使设置为 XHTML 模式，dom4j 1.6.1 HTMLWriter 也缺少 XML 声明。它是通过改回 XMLWriter 来修复的，但是我错过了所有的 HTML 功能。

```
 import org.dom4j.Document;
    import org.dom4j.DocumentHelper;
    import org.dom4j.Element;
    import org.dom4j.io.HTMLWriter;
    import org.dom4j.io.OutputFormat;
    import org.dom4j.io.XMLWriter;

    OutputFormat format = new OutputFormat();
    format.setEncoding("UTF-8");
    format.setXHTML(true);
    format.setOmitEncoding(false);
    format.setSuppressDeclaration(false);

    HTMLWriter writer = null;
    try {
        writer = new HTMLWriter(format);
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    try {
        writer.write(createDocument());
        writer.flush();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:21:34.900

确实如此。将 XML 声明放在 HTML 文件的顶部通常不是一个好主意，您应该考虑是否真的需要它。

如果你真的这样做了，那么你需要创建你自己的 Writer 类，从 HTMLWriter 扩展，并实现 writeDeclaration()，要么取自 XMLWriter 类，要么实现你的要求。

# javascript - 用户控件中的 JavaScript 无法运行

> ID：10938960
> 
> 赞同：0
> 
> 时间：2012-06-07T19:59:13.930
> 
> 标签：javascript, asp.net

我正在尝试从我的用户控件运行以下脚本：

```
<script type="text/javascript" language="javascript">
    function RebindUpdatePanelControls(sender, args) {
        $("#divUpload2").hide();
        $("#divUpload3").hide();
        alert("Hi Neck");

        $('#lnkMore').click(function () {
            if ($('#hfClicked').val() == "0") {
                $("#divUpload2").slideToggle();
                $('#hfClicked').val("1");
            }
            else if ($('#hfClicked').val() == "1") {
                $("#divUpload3").slideToggle();
                $('#hfClicked').val("2");
            }

        });

    }

</script>

<script type="text/javascript"> 
Sys.Application.add_load(RebindUpdatePanelControls); 
</script> 
```

我将它添加到用户控件文件的顶部，但它不会运行

lnkMore 看起来像这样：

```
 <input id="lnkMore" type="button" value="Add GCM File"  /> 
```

为了让这个运行，我还有其他事情要做吗？

如何让客户端按钮在单击时使用此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:59:03.993

```
 <input id="lnkMore" type="button" value="Add GCM File" onclick="clickfunction()" />

     <script type="text/javascript" language="javascript">
         function clickfunction() {
         if ($('#hfClicked').val() == "0") {
            $("#divUpload2").slideToggle();
            $('#hfClicked').val("1");
        }
        else if ($('#hfClicked').val() == "1") {
            $("#divUpload3").slideToggle();
            $('#hfClicked').val("2");
        }

    });

}

  </script> 
```

# android - 声音池和哈希图

> ID：10938964
> 
> 赞同：1
> 
> 时间：2012-06-07T19:59:30.487
> 
> 标签：android, soundpool

我在原始文件夹中有大约 100 个音频文件，这 100 个文件只是说从 1 到 100 的数字。

在我点击一个按钮之后。我希望它根据文本框中输入的文本播放号码。

所以我使用声音池和哈希图。这工作得很好，没有任何问题

```
soundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 100);
soundsMap = new HashMap<Integer, Integer>();
soundsMap.put(1, soundPool.load(this, R.raw.number1, 1));
soundsMap.put(2, soundPool.load(this, R.raw.number2, 1)); 
```

像上面一样，直到 number100。我获取文本字段的值

我放了一个从 1 到 100 的 for 循环。将播放什么值。

使用 soundPool.play(1,....)

这工作得很好，没有任何问题。

但奇怪的是，因为它正在创建 100 值的 haspmap.. 有 5 秒的延迟和空白屏幕，我无法对进程进行任何操作。

有什么方法可以根据值创建哈希图并播放声音。

就像说例如

如果文本字段的值为 20

```
in the for loop: i=1 to 100..
it should get the value 20:
string a = "R.raw.number"+i
SoundsMap.put(1, soundPool.load(this, a, 1));
soundPool.play(1,....) 
```

如果上述是可能的......我该怎么做？

等待你的回复！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:46:31.233

为什么要在开始时初始化所有内容？如果用户从不点击多个按钮怎么办？我建议在您的按钮单击时加载，如下所示：

```
//in onCreate()

final EditText editText = (EditText)findViewById(R.id.my_input_field);
int[] sounds = { R.raw.number1, R.raw.number2,
                 R.raw.number3, /*etc.*/ };

//in your onClick()

try {
    Double value = Double.parseDouble(editText.getText());
    int soundId = soundPool.load(MyActivity.this, sounds[value - 1], 1);
    soundPool.play(soundId, 1.0f, 1.0f, 1, 0, 1.0f);
} catch (NumberFormatException e) {
    //Alert the user that an invalid number was entered
} 
```

# ruby-on-rails - rails 3.2 路由不匹配：控制器约束

> ID：10938965
> 
> 赞同：0
> 
> 时间：2012-06-07T19:59:31.017
> 
> 标签：ruby-on-rails, controller, routes, constraints

我正在使用以下路线：

```
 match ':controller(/:action(/:id))', :constraints => {:id => /.*/, :controller => /[a-z]$/}
  match ':controller', :to => :index, :constraints => {:controller => /[a-z]/}
  get ':id' => 'user#show', :constraints => {:id => /.+/} 
```

当我运行 rake show routes 时：

```
 /:controller(/:action(/:id))(.:format) {:id=>/.*/}
 /:controller(.:format) :controller#index
 GET /:id(.:format)         user#show {:id=>/.+/} 
```

:controller 的约束未显示。

我的目标是请求“M. Bovary”路由到 '/user/show/', :id => 'M. 包法利”。目前它正在路由到 Mcontroller#index，根本没有传递任何 id。"/m" => "MController#index"

在我看来，rails 匹配约束的第一部分，然后“丢弃”其余的参数。约束似乎忽略了 ^ 或 $ 或 \Z，所以这不是一个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T04:43:46.087

Frederick Cheung 在上面的评论中得到了答案，但他不会在这里添加，所以我要结束这个老问题。

由于网址有一个“。” 在其中，rails 很困惑这是一个扩展。通过指定格式来帮助它：

```
match ':controller(/:action(/:id))', :constraints => {:id => /.*/,
 :controller => /[a-z]$/, :format => /(html|js)/} 
```

# python - 意外的python循环输出

> ID：10938971
> 
> 赞同：0
> 
> 时间：2012-06-07T19:59:47.300
> 
> 标签：python, loops

我正在编写一个从 mangareader 下载图像的脚本，我一直在尝试用 Python 来做，因为这是我彻底学习的第一门语言，我现在真的很喜欢。问题是我所做的循环的输出没有按照我期望的方式工作。

```
soup = soup.findAll('option') # We select all the option tags
for l in soup: # And we start with a loop
    l = l.get_text()
    print l
    url = url + str(l)
    print url 
```

我期待的输出是：

```
1
http://www.mangareader.net/witch-shop/1/1
2
http://www.mangareader.net/witch-shop/1/2
3
http://www.mangareader.net/witch-shop/1/3
4
http://www.mangareader.net/witch-shop/1/4
5
http://www.mangareader.net/witch-shop/1/5
[...] 
```

它显示的是：

```
1
http://www.mangareader.net/witch-shop/1/1
2
http://www.mangareader.net/witch-shop/1/12
3
http://www.mangareader.net/witch-shop/1/123
4
http://www.mangareader.net/witch-shop/1/1234
5
http://www.mangareader.net/witch-shop/1/12345
[...] 
```

我不知道为什么。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:04:05.320

好吧，在你做的每次迭代中

```
url = url + str(l) 
```

它将数字附加到`url`，并且它永远不会重置。

要获得所需的输出，请尝试

```
for l in soup:
    l = l.get_text()
    print l
    print url + str(l) 
```

这样您就不会更改`url`变量的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:03:38.707

这是因为您在没有初始化的情况下附加`l`到`url`每次迭代`url`。

你应该做：

```
#....
url2 = url + str(l)
print url2
#.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:02:36.393

当您执行以下操作时

```
 url = url + str(l) 
```

您实际上是附加到字符串，而不是向其添加 1。

# c# - 沙堡没有记录财产摘要

> ID：10938977
> 
> 赞同：5
> 
> 时间：2012-06-07T20:00:38.473
> 
> 标签：c#, documentation, sandcastle

我今天第一次使用 SandCastle 和 HelpBuilder GUI 来帮助创建我们一些公开的函数和属性的 API。我已经包含`/// <summary> ... </summary`了一些属性，我认为它们会从额外的文档或使用示例中受益。

当我将输出文件构建到 chm 时，我根本看不到摘要描述。列出了所有属性成员，但它们的描述为空白。我已经重建了项目，并在 SandCastle 中尝试了一些不同的设置，但它们仍然没有出现。

有什么明显的我忽略了吗？SandCastle 不阅读财产摘要吗？还是摘要需要不同的关键字？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-10T12:40:57.723

您必须告诉 Visual Studio 在编译时生成 XML 文档文件：只需按照此处所述设置相应的项目属性：http: [//msdn.microsoft.com/en-us/library/vstudio/x4sa0ak0(v=vs. 100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/x4sa0ak0(v=vs.100).aspx)

之后，Sandcastle 会在“Description”栏输出“summary”评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T20:11:41.517

从 Sandcastle[常见问题](http://docproject.codeplex.com/wikipage?title=Sandcastle%20Help&ProjectName=docproject#Issues)帮助页面：

**文档中缺少代码注释**

默认情况下，项目的所有 XML 文档都应位于名为 comments.xml 的单个文件中。如果您有多个 XML 文档文件，请将它们放在名为 Comments 的新文件夹中，并调整 sandcastle.config 以使用通配符，如下例所示。

```
<!-- Copy in comments -->
<component type="Microsoft.Ddue.Tools.CopyFromIndexComponent"
           assembly="%DXROOT%\ProductionTools\BuildComponents.dll">
  <index name="comments" value="/doc/members/member"
         key="@name" cache="100">
    <data base="%SystemRoot%\Microsoft.NET\Framework\v2.0.50727"
          recurse="false" files="*.xml" />

    <data files="Comments\*.xml" />  <!-- This line was modified -->

  </index>
  <copy name="comments" source="*" target="/document/comments" />
<components> 
```

有关详细信息，请参阅[此博客文章](http://blogs.msdn.com/b/sandcastle/archive/2006/07/30/a-few-faqs-about-sandcastle.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T16:27:17.543

看起来另一个答案已经被接受为有效，但我将添加我的解决方案，因为我遇到了同样的问题，但出于另一个原因。

如果您打开用作文档源的 XML 文件，请控制您为其编写注释但未显示在最终沙堡文档中的方法/属性。如果您看到以下消息：

成员“M: ...

然后，像我一样，您可能包含了一些 XML 不太喜欢的字符。我在评论中使用了“&”，但是如果你也使用“<”或“>”，XML 会向你大喊大叫。修复您的评论，您应该一切顺利！

# genetic-algorithm - NSGA-2 多目标遗传算法。谁能给我一个“简单的解释”？

> ID：10938979
> 
> 赞同：8
> 
> 时间：2012-06-07T20:00:42.357
> 
> 标签：genetic-algorithm

我正在研究遗传算法。

有两个目标，每个都有自己的适应度值（fv1，fv2）。

我知道世代（SGE）和稳态（SS）遗传算法是如何工作的。

我试图了解 NSGA-2 和 SPEA-2（我正在使用 java 库 JCLEC 的实现）如何工作，特别是：

*   什么是“外部人口”，应该如何衡量
*   SS 和 SGE 单目标算法有什么区别（部分原因是每个人只有一个适应度值）

如果有人使用 JCLEC 库，这些是我设置的参数：

*   外部人口：1000
*   k值：10
*   其他属性与 SS 和 SGE 相同（population-size:100 , crossover: MPX crossover etc..）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-16T15:44:45.540

这是对 NSGA-II 的解释

1.  首先，它随机初始化种群。
2.  基于帕累托非支配集对染色体进行排序并放入前沿。在 Pareto 前沿内，染色体根据解或 I-dist（NSGA-II 中使用的术语）之间的欧几里得进行排序。通常，在选择时，距离其他解决方案较远（不拥挤）的解决方案会被给予更高的优先级。这样做是为了生成一个多样化的解决方案 n 集合并避免拥挤的解决方案集合。
3.  从当前种群中挑选出最好的 N（种群）染色体并放入交配池
4.  在交配池中，完成比赛选择、交叉和交配。
5.  结合了交配池和当前种群。结果集被排序，最好的 N 条染色体进入新的种群。
6.  转到第 2 步，除非已达到最大代数。
7.  解集是最新群体中排名最高的帕累托非支配集。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T11:27:15.753

我建议阅读有关这些算法的论文，这些论文很好地解释了功能：

*   Deb、Pratab、Agarwal、Meyarivan。一种快速且精英的多目标遗传算法：NSGA-II。IEEE Transactions on Evolutionary Computation 6(2)，第 182-197 页，2002 年。
*   齐茨勒、劳曼斯、蒂勒。SPEA2：改进强度帕累托进化算法。技术报告 (TIK-103)，瑞士联邦理工学院 (ETH)，2001 年。

我确信您能够在网络上找到这些出版物的 PDF。

关于稳态遗传算法和世代遗传算法之间的区别：在世代替换中，您只使用旧种群中的基因创建一个与旧种群相同大小的全新种群，然后将其作为一个整体替换。在稳态替换中，您只创建一个新个体，然后只替换种群中的一个个体。稳态 GAs 通常收敛得更快，但它们不太可能找到好的局部最优值，因为它们不像使用世代替换时那样探索适应度景观。这当然取决于问题，有时您可以选择要替换多少老年代，这允许您在这两者之间有一些任意比例。

还有更多的多目标算法，例如[AbYSS](http://dx.doi.org/10.1109/TEVC.2007.913109)和[PAES](http://dbkgroup.org/knowles/multi/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-22T07:55:29.973

一个简单的几何例子，有很好的解释，可以在

```
 https://www.youtube.com/watch?app=desktop&v=Yb82W2Bolqc&ab_channel=IITKharagpurJuly2018 
```

其他可以

```
 https://www.slideshare.net/AhmedGadFCIT/multiobjective-optimization-using-nondominated-sorting-genetic-algorithm-with-numerical-example-stepbystep 
```

# c# - Asp.Net 验证器和只读文本框

> ID：10938980
> 
> 赞同：1
> 
> 时间：2012-06-07T20:00:46.487
> 
> 标签：c#, asp.net, validation

我有一个只读文本框，它附加了一个必需的验证器。此文本框只能使用其他控件填充。

问题是只读文本框不存储它们的值并在回发时恢复它，所以这导致验证器在每次回发时突然爆发。我知道有办法强制它存储值，但我实际上不希望它存储它。

反正有过去吗？

编辑：这是导致问题的控件：

```
 <li class="fakeUploadLi">
                <asp:Label CssClass="lbl" ID="lb" runat="server" Text="Image:"></asp:Label>
                <div class="fakeupload">
                    <asp:TextBox runat="server" ID="tbFakeupload" Enabled="false" />
                </div>
                <asp:FileUpload ID="fuImage" runat="server" CssClass="fileUpload" onchange="this.form.ctl00$cphAdmin$tbFakeupload.value = this.value;" />
                <asp:RequiredFieldValidator ValidationGroup="newImage" runat="server" ControlToValidate="tbFakeupload"
                    ErrorMessage="Please select an image first.">*</asp:RequiredFieldValidator>
            </li> 
```

它是原始 FileUpload html 控件的覆盖。请注意，如果我关闭只读（或启用，都尝试了），问题就会消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:08:48.920

尝试这个：

```
protected void Page_Load(object sender, EventArgs e)
{
 TextBox1.Attributes.Add("readonly", "readonly");
} 
```

[http://www.codeproject.com/Articles/33649/ViewState-and-Readonly-Property-of-Textbox](http://www.codeproject.com/Articles/33649/ViewState-and-Readonly-Property-of-Textbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:10:19.713

尝试将`readonly`属性更改为`Enabled = "false"`

# java - 如何在 Android 上使用共享首选项？

> ID：10938982
> 
> 赞同：-1
> 
> 时间：2012-06-07T20:00:51.183
> 
> 标签：java, android, database, preferences, shared

我正在创建一个非常简单的应用程序，它只有一个用户可以使用的搜索栏。我的代码如下所示：

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    int number=50;
    SeekBar sb = (SeekBar)findViewById(R.id.slider);
    sb.setMax(100);
    sb.setProgress(number);
    sb.setOnSeekBarChangeListener(this);
}

@Override
public void onProgressChanged(SeekBar v, int progress, boolean isUser) {
    TextView tv = (TextView)findViewById(R.id.percent);
    tv.setText(Integer.toString(progress)+"%");

} 
```

我想要做的是存储搜索栏状态，当应用程序被杀死并且用户再次打开它时，最后一次更改显示在搜索栏上，而不是默认值。所以我必须在我的 int number 变量上使用共享首选项？我不明白我怎么能做到这一点，因为当应用程序再次启动时，该行将`int number=50`再次运行，因此值将再次变为 50。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:06:15.317

**StackOverflow 不是你的研究助理。**您要完成的任务*非常*简单。

有关更多信息，请参阅[**文档**](http://developer.android.com/guide/topics/data/data-storage.html#pref)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:05:14.210

这可以针对您需要的任何数据类型进行修改：

```
private void loadSettings(){
    if(prefs == null) prefs = mContext.getSharedPreferences(PREF_KEY, 0);

    yourString = prefs.getString(YOUR_KEY, ""); 
}
private void saveSettings(){
    if(prefs == null) prefs = mContext.getSharedPreferences(PREF_KEY, 0);

    SharedPreferences.Editor prefsEd = prefs.edit();

    prefsEd.putString(YOUR_KEY, yourString);

    prefsEd.commit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:05:20.297

您可以使用 sharedPreference 或 savedInstanceState 来执行此操作。

查看[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)

当然，在那个硬编码的作业中总是做为 10 的值。如果你决定走那条路，你需要把这个值从 sharedpref 中提取出来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:08:40.543

像这样的东西应该可以工作：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    SharedPreferences sp;
    SharedPreferences.Editor spe;

    sp = PreferenceManager.getDefaultSharedPreferences(this);
    spe = sp.edit();

    int number= sp.getInt("seekNum", 50);
    SeekBar sb = (SeekBar)findViewById(R.id.slider);
    sb.setMax(100);
    sb.setProgress(number);
    sb.setOnSeekBarChangeListener(this);
}

@Override
public void onProgressChanged(SeekBar v, int progress, boolean isUser) {
    TextView tv = (TextView)findViewById(R.id.percent);
    tv.setText(Integer.toString(progress)+"%");

}

@Override
public void onStop(){
    super.onStop();

    spe.putInt("seekNum", sb.getProgress());
    spe.commit();
} 
```

# javascript - javascript、jquery 中未定义的 var 问题。如何？

> ID：10938985
> 
> 赞同：0
> 
> 时间：2012-06-07T20:01:00.250
> 
> 标签：javascript, jquery, date, undefined

我正在使用 Date.js 来显示一些日期，然后发生了一件奇怪的事情。`each`如果我在语句中形成的数组中使用它。

这就是我的意思：

如果我传递并使用`events_array`函数`test`数组一切正常，但如果我使用`eventsArray`它，那应该看起来一样，我得到：

```
startDate is undefined
...new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate()).getTime()...

function getTest() {
    $.ajax({
        type: "GET",
        url: "/index",
        dataType: "json",
        success: function (data) {

            var eventsArray = new Array();

            jQuery.each(data, function (i, val) {

                eventsArray.push(
                new Array({
                    startDate: new Date(2011, 07, 20, 15, 50),
                    endDate: new Date(2012, 00, 10),
                }));
            });

            var events_array = new Array({
                startDate: new Date(2011, 07, 20, 15, 50),
                endDate: new Date(2012, 00, 10),
            }, {
                startDate: new Date(2011, 07, 20, 15, 50),
                endDate: new Date(2012, 00, 10),
            });

          test(events_array);

        }
    });
} 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:10:06.220

在您的测试功能中尝试以下操作：

```
function test(eventsArray) {
  // try this

  eventsArray[0][0].startDate
} 
```

`eventsArray`如下所示：

```
eventsArray = [ 
                 [
                     {
                          startDate: ..
                          endDate: ..
                     }
                 ] 
              ]; 
```

但是你应该让它更容易：

```
var eventsArray = new Array();

    eventsArray.push({
     startDat: ..
     endDate: ..
    }); 
```

`eventsArray`如果不需要，请勿在其中使用其他数组。

并访问该值使用：

```
eventsArray[0].startDate;

eventsArra[0].endDate; 
```

### 如果您查看您的`events_array`，您会看到，当您在其中推送数据时，您没有使用额外的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:13:01.833

你的两个数组不相同： var eventsArray = new Array();

```
 jQuery.each(data, function (i, val) {

            eventsArray.push(
            new Array({
                startDate: new Date(2011, 07, 20, 15, 50),
                endDate: new Date(2012, 00, 10),
            }));
        });
        /* here eventsArray is like that [[{
                startDate: new Date(2011, 07, 20, 15, 50),
                endDate: new Date(2012, 00, 10),
            }]] Look at the two [[ or ]] : array of object in an array
         */
        var events_array = new Array({
            startDate: new Date(2011, 07, 20, 15, 50),
            endDate: new Date(2012, 00, 10),
        }, {
            startDate: new Date(2011, 07, 20, 15, 50),
            endDate: new Date(2012, 00, 10),
        });
        /* here events_array is like that [{
                startDate: new Date(2011, 07, 20, 15, 50),
                endDate: new Date(2012, 00, 10),
            }, {}] only one [ ... array of objects ...
         */ 
```

我认为你应该使用：

```
eventsArray.push({
    startDate: new Date(2011, 07, 20, 15, 50),
    endDate: new Date(2012, 00, 10)
}); }); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:12:06.407

您可能打算填充`eventArray`对象，而不是每个对象中都有一个对象的数组：

```
eventsArray.push({ // NOT new Array...
    startDate: new Date(2011, 07, 20, 15, 50),
    endDate: new Date(2012, 00, 10)
}); }); 
```

# deprecated - Freebase 主题 API 已弃用

> ID：10938986
> 
> 赞同：2
> 
> 时间：2012-06-07T20:01:00.753
> 
> 标签：deprecated, freebase

我使用 Freebase Topi API 来获取有关 Actors 等主题的详细信息。但是，似乎旧的 freebase API 正在被弃用，而 googlecode.com api 正在被引入。知道如何使用新的 API 获取演员的详细信息（如电影、书籍、描述、别名和演员的图像）吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:16:39.203

像这样：

[https://www.googleapis.com/freebase/v1-sandbox/topic/en/harrison_ford](https://www.googleapis.com/freebase/v1-sandbox/topic/en/harrison_ford)

对于生产用途，您需要在[https://code.google.com/apis/console](https://code.google.com/apis/console)申请 API 密钥并将其包含在您的请求中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:48:10.467

新主题 API 目前处于测试阶段；Freebase 的工作人员表示，当旧的 API 被弃用时，它将不再是测试版；请参阅来自 Freebase 产品经理之一 Jason Douglas 的 freebase-discuss 邮件列表中的[这篇文章。](http://lists.freebase.com/pipermail/freebase-discuss/2012-April/008844.html)

# scripting - 我如何知道后端站点使用的脚本语言是什么？

> ID：10938987
> 
> 赞同：1
> 
> 时间：2012-06-07T20:01:00.887
> 
> 标签：scripting, server-side-scripting

大多数时候页面被命名为 index.php 或 page.aspx 并且您知道使用的是什么语言。

但是像这个页面这样的东西呢：

[http://www.ruby-forum.com/forum/ruby](http://www.ruby-forum.com/forum/ruby)

无论如何要找出他们使用的是哪种服务器端脚本语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:05:23.093

网站的后端语言是通常不应该提供给客户的信息。许多语言通过其文件扩展名显示自己对您来说是一个幸运的巧合。所以我认为，答案是：不，一般来说这是不可能的。尽管您可能会想到一组启发式方法（例如，在上面的示例中，您可以“猜测”红宝石）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:04:44.247

服务器端语言生成 html。通过查看 html，您将不会了解所使用的语言。有时您会在 html 页面的 head 部分找到信息。有时您可以从 url 中使用的特定路径结构中看出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-05T17:35:54.673

在很多情况下，您可以借助集成到浏览器中的 Firefox 扩展来满足前端的这种好奇心。只需单击一个按钮，您就可以看到有关您所在网站的大量信息，其中包括所使用的脚本语言。[Wappalyzer 是一个浏览器扩展，可识别网站上的软件](https://addons.mozilla.org/en-GB/firefox/addon/wappalyzer/?src=collection&collection_id=44f959a3-88d6-4b42-98a9-be76cde92fcf)

# python - 如何从文本文件中读取特定的行和列并使用python根据数值做出决定？

> ID：10938995
> 
> 赞同：0
> 
> 时间：2012-06-07T20:01:22.077
> 
> 标签：python, line, enumerate

我有许多文本文件的形式：

```
alpha 89687
beta  9564
delta 10000 
```

我只想单独查看每一行并评估第二列中的每个值。如果该值不在某个范围内，我想删除整个文件。我有一个文本文件，其中包含我要浏览的所有文件的标题。这是我的代码：

```
with open('filetitles.dat', 'r') as f:
for line in f:
    with open(line, 'r+') as t:
        for i, enumerate(t):
            v = i == 2 and #how to specify column
                if v<1 or v>100:
                    delete(t)
            z = i == 3 and #how to specify column
                if v<100 or v>120000:
                    delete(t) 
```

任何帮助将不胜感激。谢谢 下面是我修改后的代码。我无法让它进入下一行，因为条件没有得到满足。

```
import os
with open('test.txt', 'r') as f:  #file with titles of files
    files=[l.strip() for l in f]

toDel=[]
for file in set(files): 
    with open(file, 'r+') as t: #open specific file
        for line in t:
            v,w = line.split()[0:2]     #try to specify lines and columns   
            if type(v) == int and type(w) == float: #check only lines in specific format
                if int(v)==1000021  and float(w)<2.5 or float(w)>3: #arbitrary values which will ensure deletion of test file                   
                    toDel.append(file)
                else:
                    some command to go to next line
            else:
                some command to go to next line
for file in set(toDel):
    os.remove(file)     #delete files
    print 'Delete:"{}"' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:28:12.903

像这样的东西可以作为骨架：

```
with open('filetitles.dat', 'r') as f:
    files=[l.strip() for l in f]

toDel=[]
for file in set(files):
    with open(file, 'r') as f:
        for line in f:                  # each line of the file 
            w,v = line.split()[0:2]     # w==col 1, v==col 2
            if w=='beta' and int(v)<100000:  # example test
                  toDel.append(file)

for file in set(toDel):                 # now delete all the files...
    # os.remove(file)                   # 'set()' eliminates dups
    print 'Delete: "{}"'.format(file) 
```

**编辑** 这是带有建议模组的循环：

```
for file in set(files): 
    with open(file, 'r+') as t: #open specific file
        for line in t:
            # use the appropriate regex to validate the line you seek 
            match=re.search(r'^(\d+)\s+([-+]?[0-9]*\.?[0-9]+)\s*$',line)
            if match:
                v=int(match.group(1))
                w=float(match.group(2))
                if v==1000021  and (w<2.5 or w>3.0):                     
                    toDel.append(file) 
```

# c# - C# 中类似于 Delphi 的重载构造函数（具有多个名称）

> ID：10938998
> 
> 赞同：4
> 
> 时间：2012-06-07T20:01:24.917
> 
> 标签：c#, delphi, constructor, overloading, fxcop

我正在尝试将一些代码从 Delphi 移植到 C#，并且我发现了一个我无法以合理的方式实现的结构，同时遵守 .NET Framework 设计指南（我在问题的结尾处解决了这个问题）。

显然 C#、Java、C++（和许多其他语言）提供了方法/构造函数重载的含义，但 Delphi 构造函数可以另外有多个名称。这样就可以编写直接代表意图的代码：

```
var
  Data, ParI, ParD, Locl: TDataElement;
begin
  Data := TDataElement.Create('Element');
  ParI := TDataElement.CreateParam('IntElement', 22);
  ParD := TDataElement.CreateParam('DblElement', 3.14);
  Locl := TDataElement.CreateLocal('LocalElement');
  // ... use the above objects ...
end; 
```

简化代码如下：

```
unit DataManager;

interface

TDataElement = class
  FName: string;
  FPersistent: Boolean;
public
  constructor Create(AName: string);
  constructor CreateParam(AName: string; DefaultInt: Integer); overload;
  constructor CreateParam(AName: string; DefaultDouble: Double); overload;
  constructor CreateLocal(AName: string);
  property Name: string read FName;;
  property Persistent: Boolean read FPersistent;
end;

implementation

constructor TDataElement.Create(AName: string);
begin
  FName := AName;
  FPersistent := True;
  // ... other initialization ...
end;

constructor TDataElement.CreateParam(AName: string; DefaultDouble: Double);
begin
  Create(AName); 
  // ... use DefaultInt ...
end;

constructor TDataElement.CreateParam(AName: string; DefaultInt: Integer);
begin
  Create(AName); 
  // ... use DefaultDouble...
end;

constructor TDataElement.CreateLocal(AName: string);
begin
  Create(AName); 
  FPersistent := False;
  // ... other code for local (non-persistent) elements ...
end; 
```

特别是在 C# 中，构造函数必须与类同名，所以首先我尝试用枚举来区分行为。唉，我偶然发现了几个问题：

*   每个构造函数中的第一个参数是相同的类型（ElementKind）
*   构造函数不像 Delphi 那样容易识别（Create vs. CreateParam vs. CreateLocal）
*   在 DataElement 的子类中需要格外小心
*   错误的可能性，例如指定 ElementKind.DoubleParam 和传递整数值
*   需要一个额外的 bool 参数来处理本地元素

下面的第一次尝试：

```
public enum ElementKind
{
    Regular, IntParam, DoubleParam, Local
}

public class DataElement
{
    private string FName;
    public string Name { get { return FName; } }

    private bool FPersistent;
    public bool Persistent { get { return FPersistent; } }

    public DataElement(ElementKind kind, string name)
    {
        FName = name;
        // ugly switch :-(
        switch (kind)
        {
            case ElementKind.Regular:
            case ElementKind.IntParam:
            case ElementKind.DoubleParam:
                FPersistent = true;
                break;
            case ElementKind.Local:
                FPersistent = false;
                break;
        }
        // ... other initialization ...
    }

    public DataElement(ElementKind kind, string name, int defaultInt)
        : this(kind, name)
    {
        // ... use defaultInt ...
    }

    public DataElement(ElementKind kind, string name, double defaultDouble)
        : this(kind, name)
    {
        // ... use defaultDouble ...
    }

    // Redundant "bool local" parameter :-(
    public DataElement(ElementKind kind, string name, bool local)
        : this(kind, name)
    {
        // What to do when "local" is false ???

        // ... other code for local (non-persistent) elements ...
    }
}

public class Program
{
    public void Run()
    {
        DataElement data = new DataElement(ElementKind.Regular, "Element");
        DataElement parI = new DataElement(ElementKind.IntParam, "IntElement", 22);
        DataElement parD = new DataElement(ElementKind.DoubleParam, "DblElement", 3.14);
        DataElement locl = new DataElement(ElementKind.Local, "LocalElement");
    }
} 
```

然后我尝试了更多面向对象的方法来按类型区分构造函数，同时在 Run() 方法中保持相同的初始化代码：

```
public class ElementKind
{
    public class RegularElement
    {
        internal RegularElement() { /* disallow direct creation */ }
    }
    public class IntParamElement
    {
        internal IntParamElement() { /* disallow direct creation */ }
    }
    public class DoubleParamElement
    {
        internal DoubleParamElement() { /* disallow direct creation */ }
    }
    public class LocalElement
    {
        internal LocalElement() { /* disallow direct creation */ }
    }

    public static readonly ElementKind.RegularElement Regular = new RegularElement();
    public static readonly ElementKind.IntParamElement IntParam = new IntParamElement();
    public static readonly ElementKind.DoubleParamElement DoubleParam = new DoubleParamElement();
    public static readonly ElementKind.LocalElement Local = new LocalElement();
}

public class DataElement
{
    private string FName;
    public string Name { get { return FName; } }

    private bool FPersistent;
    public bool Persistent { get { return FPersistent; } }

    protected DataElement(string name)
    {
        FName = name;
        // ... other initialization ...
    }

    public DataElement(ElementKind.RegularElement kind, string name)
        : this(name)
    {
        FPersistent = true;
    }

    public DataElement(ElementKind.IntParamElement kind, string name, int defaultInt)
        : this(name)
    {
        FPersistent = true;
        // ... use defaultInt ...
    }

    public DataElement(ElementKind.DoubleParamElement kind, string name, double defaultDouble)
        : this(name)
    {
        FPersistent = true;
        // ... use defaultDouble ...
    }

    public DataElement(ElementKind.LocalElement kind, string name)
        : this(name)
    {
        FPersistent = false;

        // ... other code for "local" elements ...
    }
}

public class Program
{
    public void Run()
    {
        DataElement data = new DataElement(ElementKind.Regular, "Element");
        DataElement parI = new DataElement(ElementKind.IntParam, "IntElement", 22);
        DataElement parD = new DataElement(ElementKind.DoubleParam, "DblElement", 3.14);
        DataElement locl = new DataElement(ElementKind.Local, "LocalElement");
    }
} 
```

一切都可以编译并且运行良好。那么我的问题是什么？.NET Framework 设计指南，以及一个名为[Microsoft FxCop](http://msdn.microsoft.com/library/bb429476.aspx)的工具。通过此工具运行最后一个代码后，我遇到了多个中断问题（见下文）。

**问题是：如何设计我的类以符合 .NET 设计指南和最佳实践？**

> Breaking - 确定性 90% - 嵌套类型不可见 - ElementKind+RegularElement Breaking - 确定性 90% - 嵌套类型不可见 - ElementKind+IntParamElement Breaking - 确定性 90% - 嵌套类型不可见 - ElementKind+DoubleParamElement Breaking -确定性 90% - 嵌套类型不应可见 - ElementKind+LocalElement
> 
> Breaking - 确定性 90% - 静态持有者类型不应该有构造函数 - ElementKind
> 
> 打破 - 确定性 75% - 标识符不应包含类型名称 - DataElement.#.ctor(ElementKind+IntParamElement,System.String,System.Int32)
> 
> 打破 - 确定性 75% - 标识符不应包含类型名称 - DataElement.#.ctor(ElementKind+DoubleParamElement,System.String,System.Double)
> 
> Non Breaking - 确定性 25% - 不要声明只读可变引用类型 - ElementKind.#Regular
> 
> Non Breaking - 确定性 25% - 不要声明只读可变引用类型 - ElementKind.#IntParam
> 
> Non Breaking - 确定性 25% - 不要声明只读可变引用类型 - ElementKind.#DoubleParam
> 
> Non Breaking - 确定性 25% - 不要声明只读可变引用类型 - ElementKind.#Local

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T20:08:59.443

对于初学者，我会将嵌套的“ElementKind”`class`替换为`enum`：

```
public enum ElementKind
{
    RegularElement,
    IntParamElement,
    DoubleParamElement,
    LocalElement
} 
```

另外，我认为您的 Delphi 代码不需要映射到构造函数。使用[返回](http://en.wikipedia.org/wiki/Factory_method_pattern)`DataElement`. _ 例如：

```
public static DataElement Create(string name)
{
    return new DataElement(ElementKind.Regular, name);
}

public static DataElement CreateParam(string name, int defaultInt);
{
    return new DataElement(ElementKind.IntParam, name);
    // ... use defaultInt ... 
}

// similar to above
public static DataElement CreateParam(string name, double defaultDouble); 
public static DataElement CreateLocal(string name); 
```

由于您使用工厂函数来创建 DataElement 对象，因此您应该将构造函数设为私有。

然后，您将更新 Run() 函数以使用这些函数，如下所示：

```
public void Run() 
{ 
    DataElement data = DataElement.Create("Element");
    DataElement parI = DataElement.CreateParam("IntElement", 22);
    DataElement parD = DataElement.CreateParam("DblElement", 3.14); 
    DataElement locl = DataElement.CreateLocal("LocalElement"); 
} 
```

**更新：**我将建议的更改包含在您的`Run()`函数中并更正了基本`Create()`工厂方法（我相信它应该返回 "Regular" `DataElement`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:13:42.583

您可以为此使用静态工厂方法：

```
public class TDataElement {
    private TDataElement(){}

    public static TDataElement Create(string name ) {  
        return new TDataElement {
                                   FName = name,
                                   FPersistent = true
                                   // ... other initialization ...
                                };
    }

    public static TDataElement CreateParam(string name, double defaultDouble){
         var element = Create(name);
         // ... use DefaultInt ...
         return element;
    }
//...    
} 
```

你可以这样使用它：

```
Data = TDataElement.Create("Element");
ParI = TDataElement.CreateParam("IntElement", 22); 
```

这是众所周知的做法。例如，您在`Image`.NET 框架的类中有一个工厂方法：`var image = Image.FromFile("test.jpg");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:19:07.017

最后，感谢@JonSenchyna 的想法和@Dennis 的建议，我想出了以下通用实现。

作为一个额外的功能，我`IElementFactory`在组合中添加了接口，以表达实现子类以拥有所有`InitXyz()`方法的要求——这在原始 Delphi 代码中是不存在的。

在这个设计中我唯一不喜欢的是要求将默认构造函数`DataElement()`和`ByteElement()`公共（来自`new()`约束）以及`InitXyz()`方法（因为它们是公共`IElementFactory`接口的一部分）。

```
public enum ElementKind
{
    RegularElement,
    IntParamElement,
    DoubleParamElement,
    LocalElement
}

public interface IElementFactory<TElement>
{
    void InitElement(string name);
    void InitParam(string name, int defaultValue);
    void InitParam(string name, double defaultValue);
    void InitLocal(string name);
}

public class DataElement<TElement>
    where TElement : class, IElementFactory<TElement>, new()
{
    private ElementKind FKind;
    public ElementKind Kind { get { return FKind; } }

    private string FName;
    public string Name { get { return FName; } }

    private int FDefaultInt;
    protected int DefaultInt
    {
        get { return FDefaultInt; }
        set { FDefaultInt = value; }
    }

    private double FDefaultDouble;
    protected double DefaultDouble
    {
        get { return FDefaultDouble; }
        set { FDefaultDouble = value; }
    }

    protected DataElement()
    {
    }

    public virtual void InitElement(ElementKind kind, string name)
    {
        FKind = kind;
        FName = name;
    }

    public static TElement Create(string name)
    {
        TElement obj = new TElement();
        obj.InitElement(name);
        return obj;
    }

    public static TElement CreateParam(string name, int defaultValue)
    {
        TElement obj = new TElement();
        obj.InitParam(name, defaultValue);
        return obj;
    }

    public static TElement CreateParam(string name, double defaultValue)
    {
        TElement obj = new TElement();
        obj.InitParam(name, defaultValue);
        return obj;
    }

    public static TElement CreateLocal(string name)
    {
        TElement obj = new TElement();
        obj.InitLocal(name);
        return obj;
    }
}

public class ByteElement : DataElement<ByteElement>, IElementFactory<ByteElement>
{
    public ByteElement()
    {
    }

    public void InitElement(string name)
    {
        base.InitElement(ElementKind.RegularElement, name);
    }

    public void InitParam(string name, int defaultValue)
    {
        base.InitElement(ElementKind.IntParamElement, name);
        // Range checking
        if ((defaultValue >= Byte.MinValue) && (defaultValue <= Byte.MaxValue))
        {
            DefaultInt = defaultValue;
        }
    }

    public void InitParam(string name, double defaultValue)
    {
        base.InitElement(ElementKind.DoubleParamElement, name);
        // Range checking
        if ((defaultValue >= Byte.MinValue) && (defaultValue <= Byte.MaxValue))
        {
            DefaultDouble = defaultValue;
        }
    }

    public void InitLocal(string name)
    {
        base.InitElement(ElementKind.LocalElement, name);
    }

} 
```

`Program.Run()`看看重构的方法是多么漂亮、善意和类似于 Delphi 代码（！） ：

```
public class Program
{
    public static void Run()
    {
        ByteElement data = ByteElement.Create("Element");
        ByteElement parI = ByteElement.CreateParam("IntElement", 22);
        ByteElement parD = ByteElement.CreateParam("DblElement", 3.14);
        ByteElement locl = ByteElement.CreateLocal("LocalElement");
    }
} 
```

现在 FxCop 只抱怨四种工厂方法，但我想我可以忍受：

> 打破 - 确定性 95% - 不要在泛型类型上声明静态成员 - DataElement`1.#Create(System.String)
> 
> 打破 - 确定性 95% - 不要在泛型类型上声明静态成员 - DataElement`1.#CreateParam(System.String,System.Int32)
> 
> 打破 - 确定性 95% - 不要在泛型类型上声明静态成员 - DataElement`1.#CreateParam(System.String,System.Double)
> 
> 打破 - 确定性 95% - 不要在泛型类型上声明静态成员 - DataElement`1.#CreateLocal(System.String)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:14:46.760

我认为，这个 Delphi 代码是 C# 中通用的好候选：

```
class DataElement
{
  public string Name { get; set; }
  public bool Persistent { get; set; }

  public DataElement(/* ctor params */)
  {
  }
}

class DataElement<T> : DataElement
{
  public DataElement(string name, T defaultValue /* other ctor params */)
    : base(/* base ctor params */)
  {
  }
}

class IntElement : DataElement<int> {}
class DoubleElement : DataElement<double> {} 
```

有关 TDataElement 的更多详细信息将很有用。