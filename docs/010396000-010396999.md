# StackOverflow 问答 10396000-10396999

# java - 尝试覆盖 TextView 时 Android 崩溃

> ID：10396002
> 
> 赞同：-1
> 
> 时间：2012-05-01T09:44:40.160
> 
> 标签：java, android, textview, android-linearlayout

我创建了一个时间表应用程序，它允许用户输入数据然后查看它。但是，如果用户输入一个条目，在已经有一个条目的日期和时间，我的模拟器崩溃（强制关闭）。基本上我将数据拉回线性布局，其中包含 10 个 TextView，每个代表 9-15 的时间。这是代码：

```
 public void addMondayGrid() {
    // TODO Auto-generated method stub
    for (int index = 0; index < info.mon.size(); index++) {

        // int entryId = info.monIds.get(index);
        int time = info.monTimes.get(index);
        int id = info.monIds.get(index);
        int duration = info.monDuration.get(index);
        String dayOfWeek = "mon";

        timeId = getResources().getIdentifier("mon" + time, "id",
                getPackageName());
        if (duration == 1) {
            SpannableString text = new    SpannableString(info.mon.get(index));
            setEntryColour(text);
            final TextView textV = (TextView) findViewById(timeId);
            textV.setTextSize(10);
            textV.setText(text, BufferType.SPANNABLE);
            textV.setId(id);
            deleteGridEntry(textV);
        } else {
            longerDuration(time, index, id, info.mon, dayOfWeek);

        }

    }

} 
```

只要在同一天和同一时间没有两个条目，例如，事情就可以正常工作。星期一 9 点。任何人有任何想法？我对此很陌生，任何帮助将不胜感激！

我必须以这种方式引用 id，因为有太多 id 无法引用任何其他方式，难道没有一种简单的方法可以用从数据库中拉回的新数据覆盖旧的 textView 吗？我希望 id 与我要处理的 textView 相同，但它只是不断崩溃，这与实例有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:46:40.567

改变：

```
 final TextView textV = (TextView) findViewById(timeId); 
```

至：

```
 final TextView textV = (TextView) findViewById(R.id.timeId); 
```

# excel - 数据输入后锁定单元格

> ID：10396006
> 
> 赞同：2
> 
> 时间：2012-05-01T09:45:31.377
> 
> 标签：excel, locking, before-save, vba

我有一个由多个用户编辑的电子表格。为了防止篡改以前的数据，一旦输入数据并保存文件，单元格就会被锁定。不过，我在代码中有一些小错误：

1.  即使用户已手动保存然后退出应用程序，仍会提示他们再次保存。

2.  当应用程序运行时，应在保存后锁定单元格，而不仅仅是在退出时。以前我在 before_save 事件中有此代码，但即使取消了 save_as 事件，单元格也被锁定，所以我现在删除了代码。**固定的**

（编辑：我刚刚意识到这个错误是多么明显。我什至在这个声明中说过！尝试在保存事件之后使用保存事件子之前锁定单元格！）

**代码**

```
With ActiveSheet
    .Unprotect Password:="oVc0obr02WpXeZGy"
    .Cells.Locked = False
    For Each Cell In ActiveSheet.UsedRange
        If Cell.Value = "" Then
            Cell.Locked = False
        Else
            Cell.Locked = True
        End If
    Next Cell
    .Protect Password:="oVc0obr02WpXeZGy"
End With 
```

工作簿打开、隐藏所有工作表并显示所有工作表子用于强制最终用户启用宏。这是完整的代码：

```
Option Explicit
Const WelcomePage = "Macros"

Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

    Dim ws As Worksheet
    Dim wsActive As Worksheet
    Dim vFilename As Variant
    Dim bSaved As Boolean

'Turn off screen updating
    With Application
        .EnableEvents = False
        .ScreenUpdating = False
    End With

'Record active worksheet
 Set wsActive = ActiveSheet

'Prompt for Save As
If SaveAsUI = True Then
    vFilename = Application.GetSaveAsFilename("", fileFilter:="Excel Files (*.xls), *.xls")
    If CStr(vFilename) = "False" Then
        bSaved = False
    Else
        'Save the workbook using the supplied filename
        Call HideAllSheets
        ThisWorkbook.SaveAs vFilename
        Application.RecentFiles.Add vFilename
        Call ShowAllSheets
        bSaved = True
    End If
Else
    'Save the workbook
    Call HideAllSheets
    ThisWorkbook.Save
    Call ShowAllSheets
    bSaved = True
End If

'Restore file to where user was
wsActive.Activate
'Restore screen updates
With Application
    .ScreenUpdating = True
    .EnableEvents = True
End With

'Set application states appropriately
If bSaved Then
    ThisWorkbook.Saved = True
    Cancel = True
Else
    Cancel = True
End If

End Sub

Private Sub Workbook_Open()
    Application.ScreenUpdating = False
    Call ShowAllSheets
    Application.ScreenUpdating = True
    ThisWorkbook.Saved = True
End Sub

Private Sub HideAllSheets()
    Dim ws As Worksheet
    Worksheets(WelcomePage).Visible = xlSheetVisible
    For Each ws In ThisWorkbook.Worksheets
        If Not ws.Name = WelcomePage Then ws.Visible = xlSheetVeryHidden
    Next ws
    Worksheets(WelcomePage).Activate
End Sub

Private Sub ShowAllSheets()
    Dim ws As Worksheet
    For Each ws In ThisWorkbook.Worksheets
        If Not ws.Name = WelcomePage Then ws.Visible = xlSheetVisible
    Next ws
    Worksheets(WelcomePage).Visible = xlSheetVeryHidden
End Sub

'Lock Cells upon exit save if data has been entered
Private Sub Workbook_BeforeClose(Cancel As Boolean)
Dim Cell As Range
With ActiveSheet
    .Unprotect Password:="oVc0obr02WpXeZGy"
    .Cells.Locked = False
    For Each Cell In ActiveSheet.UsedRange
        If Cell.Value = "" Then
            Cell.Locked = False
        Else
            Cell.Locked = True
        End If
    Next Cell
    .Protect Password:="oVc0obr02WpXeZGy"
End With
End Sub 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:56:34.637

它要求他们在退出之前保存，即使由于这些行他们已经保存了：

```
'Save the workbook
Call HideAllSheets
ThisWorkbook.Save
Call ShowAllSheets
bSaved = True 
```

您在保存后更改工作表（通过调用 ShowAllSheets），因此确实需要再次保存。saveAs 代码也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:33:26.313

我通过使用另一个 IF 解决了第二个问题。这可确保仅在保存数据时才锁定单元格：

```
'Lock Cells before save if data has been entered
    Dim rpcell As Range
With ActiveSheet
    If bSaved = True Then
    .Unprotect Password:="oVc0obr02WpXeZGy"
    .Cells.Locked = False
    For Each rpcell In ActiveSheet.UsedRange
        If rpcell.Value = "" Then
            rpcell.Locked = False
        Else
            rpcell.Locked = True
        End If
    Next rpcell
    .Protect Password:="oVc0obr02WpXeZGy"
    Else
    MsgBox "The LogBook was not saved. You are free to edit the RP Log again", vbOKOnly, "LogBook Not Saved"
    End If
End With 
```

# android - Android Widget 并点击 Listener

> ID：10396009
> 
> 赞同：3
> 
> 时间：2012-05-01T09:45:33.187
> 
> 标签：android, android-widget, appwidgetprovider

我正在尝试使用启动时钟应用程序制作一个小部件。

为什么此代码在真实设备上不起作用？

我做错了什么？

```
@Override
public void onReceive(Context context, Intent intent)
{
    String action = intent.getAction();
    PendingIntent pendingIntent;
    if (AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals(action))
    {

        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.clock_appwidget);

        pendingIntent = PendingIntent.getActivity(context, 0,getAlarmPackage(context), 0);
        views.setOnClickPendingIntent(R.id.imageView1, pendingIntent);

        AppWidgetManager.getInstance(context).updateAppWidget(
                        intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS),
                        views);
    }
}

public Intent getAlarmPackage(Context context)
{
    PackageManager packageManager = context.getPackageManager();
            Intent AlarmClockIntent = new Intent(Intent.ACTION_MAIN).addCategory(Intent.CATEGORY_LAUNCHER);

    String clockImpls[][] = {
            { "Standard Alarm", "com.android.alarmclock",
                    "com.android.alarmclock.AlarmClock" },
            { "HTC Alarm ClockDT", "com.htc.android.worldclock",
                    "com.htc.android.worldclock.WorldClockTabControl" },
            { "Standard Alarm ClockDT", "com.android.deskclock",
                    "com.android.deskclock.AlarmClock" },
            { "Froyo Nexus Alarm ClockDT",
                    "com.google.android.deskclock",
                    "com.android.deskclock.DeskClock" },
            { "Moto Blur Alarm ClockDT",
                    "com.motorola.blur.alarmclock",
                    "com.motorola.blur.alarmclock.AlarmClock" },
            { "Samsung Galaxy S", "com.sec.android.app.clockpackage",
                    "com.sec.android.app.clockpackage.ClockPackage" } };

    boolean foundClockImpl = false;

    for (int i = 0; i < clockImpls.length; i++)
    {
        String packageName = clockImpls[i][1];
        String className = clockImpls[i][2];
        try
        {
        ComponentName cn = new ComponentName(packageName, className);
        packageManager.getActivityInfo(cn,PackageManager.GET_META_DATA);
            AlarmClockIntent.setComponent(cn);
            foundClockImpl = true;
        } catch (NameNotFoundException nf)
        {
            Log.v("foundclock", nf.toString());
        }
    }
    if (foundClockImpl)
    {
        return AlarmClockIntent;
    }
    else
    {
        return null;
    }

} 
```

我在模拟器上运行应用程序并单击小部件 - 这项工作。在安卓 4.0.3、2.2 上测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T10:12:46.877

可能，您有一个新设备，它具有新的时钟实现，它不在 clockImpls 列表中。例如，如果您有新的 Xperia Z 时钟，您可以添加到列表中：

```
{ "Sony Ericsson Xperia Z", "com.sonyericsson.organizer", "com.sonyericsson.organizer.Organizer_WorldClock" } 
```

在某处创建完整列表的好主意。

# c# - 如何在 C# 中获取所有可能的类组合

> ID：10396010
> 
> 赞同：0
> 
> 时间：2012-05-01T09:45:38.867
> 
> 标签：c#, algorithm

假设我们有休闲类'X'，'Y'，'Z'，所以我需要的结果是这样的

```
(X),(X,Y),(X,Z),(X,Y,Z),(Y),(Y,Z),(Z) 
```

如果我们有'X'，'Y'，'Z'，'J'，那么我需要的结果是这样的

```
(X), (X,Y),(X,Z),(X,J), (Y), (Y,Z),(Y,J), (Z),(Z,J)
(X,Y,Z), (X,Y,Z,J), (Y,Z,J), (Z,J,X) 
```

我需要什么算法来完成这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T09:49:12.063

您正在寻找的东西称为[电源组](http://en.wikipedia.org/wiki/Power_set)。有递归和迭代两种方法来计算它；google 一下应该不难。

尝试实施算法，如果遇到具体问题，请回来更新问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T10:40:45.150

如果那是幂集，您就错过了空集（当然，它始终是幂集的成员！）。

无论如何，这样的事情可能对你有用：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace Demo
{
    class Program
    {
        static void Main()
        {
            string[] classes = {"X", "Y", "Z"};

            foreach (var combination in PowerSet(classes))
            {
                foreach (var item in combination)
                {
                    Console.Write(item + ", ");
                }

                Console.WriteLine("");
            }
        }

        public static IEnumerable<IEnumerable<T>> PowerSet<T>(T[] sequence)
        {
            return from m in Enumerable.Range(0, 1 << sequence.Length)
                   select
                       from i in Enumerable.Range(0, sequence.Length)
                       where (m & (1 << i)) != 0
                       select sequence[i];
        }
    }
} 
```

该算法通过“假装”组合是二进制数来工作。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Power_set](http://en.wikipedia.org/wiki/Power_set)（尤其是标题为“将子集表示为函数”的部分）。

# ruby-on-rails-3.1 - Rails 表单验证适用于一个模板，但不适用于同一模型的另一个模板

> ID：10396011
> 
> 赞同：0
> 
> 时间：2012-05-01T09:45:59.210
> 
> 标签：ruby-on-rails-3.1, validation, twitter-bootstrap, simple-form

又一个拔毛器。经过两天的斗争，我无法弄清楚这里出了什么问题。

基本上我有一个由模型触发的表单验证：

```
validates :user, :presence => true, :uniqueness => true
validates :email, :presence => true, :uniqueness => true, :on => :create
validates :passwordHash, :presence => true, :confirmation => true, :on => :create 
```

非空用户在更新表单视图上工作：

```
= simple_form_for @user do |f|      
  = f.input :user
  = f.input :locale
  = f.input :localeLanguage, :label => 'Language', :as => :select, :collection => $language_array 
  = f.input :moderator
  = f.input :email
  = f.input :passwordHash, :label => 'Password' 
```

但不在新用户上查看：

```
 = simple_form_for @user do |f|  
    %table.table-condensed
      %tr
        %td
          =f.input :user, :label => false, :placeholder => 'username'
      %tr
        %td
          = f.input :passwordHash, :label => false, :placeholder => 'password'
      %tr
        %td
          = f.input :email, :label => false, :placeholder => 'email'
      %tr
        %td
          = f.submit "Create User", :class => 'btn btn-primary' 
```

我可以看到这些视图之间的唯一区别是，第一个视图创建了会话，因为用户已经登录，而第二个视图没有。但据我所知，这不应该有所作为。当然，`update`表单确实有一个实际的@user 对象，而在`new`其中它是空的。但我看过 Ryan Bates 的新用户验证的 railscast，他也做了几乎相同的事情。

会发生什么是`users#create`在提交带有空值的表单后调用的操作（这应该是不可能的）。当然我得到一个错误，因为它`passwordHash`是空的。

我应该指出，我没有使用任何额外的 gem 来帮助密码确认（在 railscast 中，Bates 使用`bcrypt`但我不能使用它，因为我们以不同的方式创建密码哈希，而且我认为这是密码确认魔法只要）。无论如何这不应该影响表单验证吗？

这里欢迎任何理论或想法，我快疯了。我将要编写一些糟糕的 javascript 来手动完成，这会很糟糕，可能需要我一个星期，我不做 javascript ;)

谢谢。

**编辑**

根据 Rachid 的要求，以下是`new`和`create`操作：

```
 def new
    @user = User.new
  end

  def create
    #failsafe for failing form validation
    unless params[:passwordHash].present?
      redirect_to new_user_path, :notice => 'User or password cannot be blank' 
    else
      password_and_salt = User.hash_password(params[:passwordHash])
      hashed_password = password_and_salt[:password]
      user_salt = password_and_salt[:salt]
      @user = User.new(:user => params[:user], :passwordHash => hashed_password, :salt => user_salt)
      if @user.save
        session[:user_id] = @user.id
        redirect_to session[:item_to_edit]
      else
        redirect_to new_user_path, :notice => "User already exists, please pick another one"
      end
    end
  end 
```

**编辑 2**

我已经`create`根据第一个答案重写了该方法，但仍然出现错误：

```
def create
    respond_to do |format|
      if params[:passwordHash].present? && params[:user].present? 
        password_and_salt = User.hash_password(params[:passwordHash])
        hashed_password = password_and_salt[:password]
        user_salt = password_and_salt[:salt]
        @user = User.new(:user => params[:user], :passwordHash => hashed_password, :salt => user_salt, :online_user => 1 )
        if @user.save
          session[:user_id] = @user.id
          redirect_to session[:item_to_edit]
        else
          format.html { render :action => "new" }
          format.json { render :json => @user.errors, :status => :unprocessable_entity }
        end
      else
          format.html { render :action => "new" }
          format.json { render :json => @user.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

错误是`undefined method 'model_name' for NilClass:Class`针对这一行的：

```
= simple_form_for @user do |f| 
```

显然，`@user = User.new`它并没有回到表格中。在这一点上，我对如何编写`create`使其正常工作并显示错误消息的方法有点困惑。但我觉得我更接近了:)

@misha，这是`update`控制器动作，它只是非常标准的脚手架：

```
def update
    @user = User.find(params[:id])

    respond_to do |format|
      if @user.update_attributes(params[:user])
        if session[:return_to]
          format.html { redirect_to session[:return_to], :notice => 'User was successfully updated.' }
        else
          format.html { redirect_to users_path, :notice => 'User was successfully updated.' }
        end

        format.json { head :ok }
      else
        format.html { render :action => "edit" }
        format.json { render :json => @user.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:13:15.067

首先，您在这里假设的内容是不正确的：

> 会发生什么是`users#create`在提交带有空值的表单后调用的操作（这应该是不可能的）。当然我得到一个错误，因为密码哈希是空的。

有可能`users#create`被调用，实际上它*应该*发生。它在你处理这些东西的创建操作中。我认为您的问题是，如果`@user`未保存，您会进行重定向。您应该再次渲染视图，以便可以显示错误消息。

所以而不是：

```
redirect_to new_user_path, :notice => "User already exists, please pick another one" 
```

尝试：

```
render :action => 'new' 
```

**根据您的评论进行编辑：**

当验证失败时，Rails 会`@user.errors`自动填充。您无需在控制器中执行任何操作（即您的创建操作）！您所要做的就是[在您的视图中](http://guides.rubyonrails.org/active_record_validations_callbacks.html#displaying-validation-errors-in-the-view)[显示错误`@user.errors`](http://guides.rubyonrails.org/active_record_validations_callbacks.html#displaying-validation-errors-in-the-view)。

**关于您现在遇到的错误：**

您收到错误的原因`@user`是未设置。您必须将您的`create`方法重写为以下内容：

```
def create
  respond_to do |format|
    if params[:user][:passwordHash].present?
      password_and_salt = User.hash_password(params[:user][:passwordHash])
      hashed_password = password_and_salt[:password]
      user_salt = password_and_salt[:salt]
    end

    @user = User.new(params[:user].merge({:passwordHash => hashed_password, :salt => user_salt, :online_user => 1}))

    if @user.save
      session[:user_id] = @user.id
      redirect_to session[:item_to_edit]
    else
      format.html { render :action => "new" }
      format.json { render :json => @user.errors, :status => :unprocessable_entity }
    end
  end
end 
```

# view - 将 Ember 视图上的自定义属性与 xhandlebars 脚本中的控制器数据绑定

> ID：10396017
> 
> 赞同：0
> 
> 时间：2012-05-01T09:46:17.103
> 
> 标签：view, attributes, ember.js, handlebars.js

```
{{#each App.SampleViewController}}
     {{#view App.SampleView contentBinding="this" sort-date="content.sortDate" name="content.name"}}
            <a href="#" onclick="App.loadSampleDetails(this);" {{bindAttr id="content.id"}}>
         {{/view}}
    {{/each}} 
```

如何从 xhandlebars 脚本标记向视图元素添加自定义属性/通用属性（如上面的示例排序日期/名称属性），我知道使用 attributeBindings 我们可以添加，但我有来自控制器的动态数据通过每个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T23:34:05.707

您可以使用该`attributeBindings`属性来定义将添加到视图的 DOM 输出中的其他属性。请参阅 Ember.View 文档中的“HTML 属性”部分：http: [//docs.emberjs.com/#doc=Ember.View&src=false](http://docs.emberjs.com/#doc=Ember.View&src=false)

# zend-framework - 在我的应用程序的每一页上调用 zend 表单

> ID：10396019
> 
> 赞同：0
> 
> 时间：2012-05-01T09:46:24.497
> 
> 标签：zend-framework

我有一个应该在每个页面中调用的表单，我使用的是 zend 框架 1.11。我的视图助手是这样的

```
class Zend_View_Helper_RequestForm 
{
    function requestForm()
    {
        $requestForm = new Application_Form_Request();
        return $this->view->requestForm;

    }
} 
```

我的 application.ini 有这个

```
resources.view.helperPath = APPLICATION_PATH "/views/helpers"
resources.view[] = 
```

在我的布局中，我有

```
echo $this->requestForm(); 
```

现在我收到此错误

```
Fatal error: Uncaught exception 'Zend_Loader_PluginLoader_Exception' with message 'Plugin by name 'RequestForm' was not found in the registry; 
```

请帮助我如何在每一页中调用表格？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:48:14.247

像这样的加载问题通常取决于让类命名与 appnamespace 和文件位置同步：

1.  我会用 appnamespace 命名你的助手（可能定义为`Application`你的`application/configs/application.ini`），所以类名是`Application_View_Helper_RequestForm`. [`Zend_`无论如何最好避开命名空间] 正如@b.b3rn4rd 指出的那样，扩展`Zend_View_Helper_Abstract`.

2.  将此类放在文件中`application/views/helpers/RequestForm.php`

3.  使用调用您的视图脚本`$this->requestForm()`

# php - Facebook 墙贴显示重定向循环错误

> ID：10396021
> 
> 赞同：2
> 
> 时间：2012-05-01T09:46:44.593
> 
> 标签：php, facebook, facebook-wall

我正在尝试使用 PHP 发布到用户墙上。它不工作。请帮我解决问题。我使用了以下代码。

```
$facebook = new Facebook(array(
         'appId' => $app_id,
         'secret' => $app_secret,
         'cookie' => true
        ));
        $fbcheck= $facebook->getUser();
        //op($fbcheck);exit;
        if(is_null($fbcheck) or !$fbcheck or $fbcheck==0)
        {
         header("Location:{$facebook->getLoginUrl(array('scope' => 'user_status,publish_stream,user_photos,photo_upload'))}");

        }

        $attachment = array(
        'message' => 'It is a programming test',
        'name' => $details['jobtitle'],
        'caption' => "Sunil Kumar",
        'link' => $urlParser->job($details['jkey']),
        'description' => 'Jobslanda is one of the perfect job sharing system.',
        'picture' => 'http://jobslanda.com/job.gif',
        'actions' => array(array(
            'name' => 'Get Search',
            'link' => 'http://www.google.com'
        ))
    );

        $result = $facebook->api(
        '/me/feed/',
        'post',
        $attachment
    ); 
```

# hibernate - 难以消除项目中的异常

> ID：10396023
> 
> 赞同：0
> 
> 时间：2012-05-01T09:46:53.113
> 
> 标签：hibernate, gwt

我正在使用 GWT + Hibernate 创建应用程序。我遇到了一个问题；它是“java.lang.NoSuchMethodError: org.slf4j.Logger.isTraceEnabled()Z”异常。我检查了一下，确实这种方法在 jar 文件中不可用。我在网上搜索 jar 但找不到。请帮我找到合适的罐子。纳克斯·拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:37:34.247

那明明就是SLF4J的Logger类，下载@http://www.slf4j.org/download.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T00:03:52.427

如果您尝试在 GWT 客户端代码中使用 SL4J，这是不可能的，因为它是第三方库，并且 GWT 无法在不翻译源代码的情况下使用它。

要登录您的客户端代码，[请阅读此 GWT 文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)。您还可以使用[gwt-log](http://code.google.com/p/gwt-log/)项目。

我之前也回答过[类似的问题](https://stackoverflow.com/questions/9247424/how-to-print-to-the-console-in-gwt/9247784#9247784)。

# sql - 与sql中的多个值进行比较

> ID：10396024
> 
> 赞同：0
> 
> 时间：2012-05-01T09:47:00.837
> 
> 标签：sql

我有两张桌子。在第一个中有一个名为 的列`id`。我想选择其中一些 ID，并从另一个表中选择具有这些 ID 的行。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:49:56.263

您需要学习 SQL 连接。

```
SELECT SecondTable.*
FROM SecondTable 
INNER JOIN FirstTable ON (FirstTable.ID = SecondTable.ID)
WHERE FirstTable.SomeField = 'Something Else' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:58:22.137

这是一个很好的链接，可以帮助您入门

[内连接](http://www.w3schools.com/sql/sql_join_inner.asp)

基本上对于您的示例，您将使用类似

```
SELECT table1.id, table1.value, table2.value
FROM table1
INNER JOIN table2
ON table1.id=table2.id 
```

# nosql - 自定义属性 - 无 SQL 数据存储

> ID：10396027
> 
> 赞同：0
> 
> 时间：2012-05-01T09:47:14.783
> 
> 标签：nosql

我们想要开发一个应用程序，该应用程序需要在我们的应用程序中支持对不同实体（如用户、项目、文件夹、文档等）的自定义属性。

我用谷歌搜索了一下，看起来 No-SQL 数据库可以满足我们的要求。你看到任何限制吗？使用 No-SQL 代替 RDBMS 有哪些优点/缺点？

有许多可用的 NO-SQL 数据库 - [http://nosql-database.org/](http://nosql-database.org/)？但是我们没有任何使用No SQL数据库的经验。没有找到任何比较这些NO-SQL数据库的好文章。有什么建议我们可以使用哪个 No-SQL 数据存储来实现自定义属性功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-11T15:45:49.390

No-sql 数据库的一大优势是它的自由风格：在插入真实数据之前，您永远不会指定诸如“用户、项目、文件夹”之类的列。可以随时添加列。

而在 RDBMS 中，表模式是严格定义的，在运行时不能修改。

另一个优点是查询性能。如果你查询一个用户的所有记录，比如“迈克尔”，效率很高，因为数据是按照谷歌命名的大表原则存储的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T01:45:58.603

有两种方法可以解决您的问题：Cassandra 等列数据库；或关系中的名称-值对（也称为属性-值对）。

首先，Cassandra 是一个结构化的键值对存储。一个键可以包含多个可变属性和值。值或列被分组到列族中。创建 Cassandra 数据库时，列族是固定的。族类似于逻辑数据模型中的实体或关系中的表。可以随时将列添加到族中。因此，列族的不同实例可以有不同的列，这正是您所需要的。此外，列被分配给指定的键，因此不同的键在任何给定的族中可以具有不同数量的列。

名称值对，也称为属性值对，可以在逻辑数据建模和关系中创建。这可以通过三个相关的实体或表来完成：

*   类似于列族的基本实体（例如客户）。
*   一个“类型”实体，描述属性及其特征，例如净值金额，
*   “值”实体，将属性分配给基本实体的实例并为其分配值。

“类型”实体只是一个由类型代码标识并包含描述和其他域特征的代码表。域是指数据类型、长度、含义和度量单位。它描述了上下文之外的属性（即，未分配的）。一个例子可以是净值金额，它是一个 8 位数字，小数点后 2 位，右对齐，它的描述是“代表客户总财务价值的值，包括流动和非流动金额”。

“值”实体是由客户 ID 和属性类型代码标识的关联实体或表，并且具有将净值金额类型分配给客户并为其赋予值的值属性，例如“$2,000,000”。

但是，在关系中，名称-值对在 SQL 中查询起来有些困难，并且通常性能不佳。这可以通过将“类型”和“值”实体非规范化为一个来解决。而不是三个表，你有两个 - 一对多。实际上，这基本上就是 Cassandra 的做法。列族是完全展平的属性值对。

我希望这有帮助。如果你打算使用 NOSQL，我会使用 Cassandra 之类的东西。如果您使用关系，我会将类型和值非规范化（即合并为一个）。关系的优点是您已经拥有它。Cassandra 的缺点是你必须学习它，但它是为做你想做的事而构建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T02:50:11.713

Couchbase 对您来说是一个很好的答案，如果您可以将模型封装成 JSON，那么您已经成功了一半。你的对象可以有任意数量的属性：

product::001 { "name": "Hard Drive", "brand": "Toshiba", ... ... }

要了解一些从 RDBMS 迁移到 Couchbase 的简单模式，请查看他们在[http://www.couchbase.com/webinars上的网络研讨会或在](http://www.couchbase.com/webinars)[http://CouchbaseModels.com](http://CouchbaseModels.com)上查看一些简单的设计模式（尽管示例使用 Ruby）

Couchbase 的真正优势在于模式灵活性、商品硬件上的水平可扩展性和速度。在学习了基础知识后，它更适合敏捷流程，几乎不需要迁移。在企业组织中，它非常有效，因为每列修改都需要业务流程和 DBA 的批准。Couchbase 模式的灵活性规避了很多这些问题。

# mysql - 休眠、jpa 和 mysql

> ID：10396030
> 
> 赞同：0
> 
> 时间：2012-05-01T09:47:24.357
> 
> 标签：mysql, sql, hibernate, jpa, spring-data

我在 Spring-data/jpa/hibernate/mysql/junit 应用程序中的插入语句有一个小问题。我创建了一个小单元测试，看看我是否可以做一个简单的 INSERT 语句。这就是我所拥有的：

```
@Test
public void testAddAssignment() {
    Assignment assignment = new Assignment();
    assignment.setCharacter("Z");
    assignment.setType(1);
    assignmentController.addAssignment(assignment);
    assignment = assignmentController.findAssignmentById(16);
    assertEquals(16, assignment.getId());
    assertEquals(1, assignment.getType());
    assertEquals("Z", assignment.getCharacter());
} 
```

当我尝试执行此操作时，出现以下错误：

```
org.springframework.dao.InvalidDataAccessResourceUsageException: could not insert: [com.byronvoorbach.domain.Assignment]; SQL [insert into Assignment (CHARACTER, TYPE) values (?, ?)]; nested exception is org.hibernate.exception.SQLGrammarException: could not insert: [com.byronvoorbach.domain.Assignment] 
```

这是我的 addAssignment(assignment);

```
@Transactional
public Assignment addAssignment(Assignment assignment) {
    return repository.save(assignment);
} 
```

这是我的存储库：

```
@Transactional(readOnly = true)
public interface AssignmentRepository extends JpaRepository<Assignment, Long> {

public List<Assignment> findByType(int type);
} 
```

由于我从未编写过 sql 查询，因此我无法找到查询出错的地方。有人有想法吗？

（如果您需要更多源代码或我的 .xml 文件，请告诉我）

**编辑：** 感谢 JB Nizet 和 fmucar，我能够解决这个问题。我更改了列名，现在它可以工作了！！显然，列命名有一些我不知道的限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:51:49.417

尝试使用除`character`and`type`作为列名之外的其他名称，因为这些可能是 SQL 中的保留关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:53:27.337

```
CHARACTER and TYPE are keywords for sql. 
```

尽量不要使用关键字作为列名。这可能是问题所在。

# objective-c - 加快 OverlayView 的绘制

> ID：10396031
> 
> 赞同：0
> 
> 时间：2012-05-01T09:47:29.663
> 
> 标签：objective-c, ios5, core-graphics, mapkit, overlay

我通过子类化 MKPolygonView 并覆盖 drawMapRect:zoomScale:inContext:-方法在 MKMapView 上绘制图像（2.5 MB，PNG 图像数据，1240 x 1240，8 位/颜色 RGBA，非隔行扫描），如下所示：

```
-(void) drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context {

CGRect theRect           = [self rectForMapRect:overlayRect];
CGRect clipRect     = [self rectForMapRect:mapRect];

CGContextClipToRect(context, clipRect);

CGContextDrawImage(context, theRect, imageReference); 
```

}

`overlayRect`是一个`MKMapRect`定义图像在地图上的位置和大小（硬编码和初始化`initWithOverlay:`） `imageReference`保存对图像的引用，加载到 UIImage 并通过调用实例`CGImage`获得`UIImage`（也在`initWithOverlay:`）

我的 MKMapView 第一次在地图上绘制图像需要 8-14 秒，在放大以重新绘制具有更好分辨率的图块时又需要大约相同的时间。这似乎真的很长，我想知道我是否在做任何根本错误的事情，因为这是我第一次使用 MapKit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:24:36.860

您可以使用平铺图像来提高性能。Apple 在 WWDC 2010 中使用了这种技术。您可以在此处查看示例：[https](https://github.com/klokantech/Apple-WWDC10-TileMap) ://github.com/klokantech/Apple-WWDC10-TileMap 。

另外在这个博客中解释了这个过程：[http ://shawnsbits.com/blog/2010/12/23/mapkit-overlays-session-1-overlay-map/](http://shawnsbits.com/blog/2010/12/23/mapkit-overlays-session-1-overlay-map/)

# javascript - 如何在 background.js 和 popup.js 之间进行通信？

> ID：10396034
> 
> 赞同：4
> 
> 时间：2012-05-01T09:47:43.123
> 
> 标签：javascript, google-chrome-extension

我有一个扩展，带有背景脚本：

```
"background": {
    "scripts": ["scripts/background.js"]
  }, 
```

和内容脚本：

```
"content_scripts": [
    {
      "matches": ["*://*/*"],
      "js": ["scripts/content_script.js"]
    }
  ], 
```

一个弹出窗口`(popup.html)`和一个弹出脚本`(popup.js)`。popup.js 没有注册到清单中，它处理 popup.html 的外观，并监听 popup.html 中的用户操作，例如单击按钮。

我想做一个扩展，用**电子邮件发送当前标签页的**内容，为此，我需要获取带有 的页面 DOM `content_script`，将数据（DOM）传递给`background script`. 在此之后，当用户在 popup.html 中触发事件时，popup.js 会捕获此事件，并且我希望 popup.js 能够从 background.js 中获取传递的数据（DOM）。我怎么能做这个？所以，我的问题是，我如何在 background.js 和 popup.js 之间进行通信？

* * *

**我找到了自己问题的答案：**

谢谢猫王，我想我解决了这个问题；我只需要在内容脚本中获取站点的 DOM，但我的问题的解决方案是：

**content_script.js**

```
 // SEND DOM structure to the background page
    chrome.extension.sendRequest({dom: "page DOM here"}); 
```

**背景.html**

```
<html>
<head>
<script>
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    if(request.dom != "")
        var theDOM = request.dom;
        console.log(request.dom); // page DOM here -> works
        chrome.extension.sendRequest({theDOM: theDOM}); // theDOM : "page DOM here"
});
</script>
</head>
<body>
</body>
</html> 
```

**popup.js**

```
var dom;
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    if(request.theDOM != ""){
        console.log("popup request: "+request.theDOM);
        dom = request.theDOM;
    }
});

// HANDLE TAB_1 REQUESTS (EMAIL PAGE)
// ---------------------------------
$("#send").click(function(){
    console.log(dom); // page DOM here
} 
```

谢谢您的帮助 ;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T09:54:05.230

您可以进行消息传递。从[文档](https://code.google.com/chrome/extensions/messaging.html)中：

在您的内容脚本中使用它：

```
chrome.extension.sendRequest({greeting: "hello"}, function(response) {
  console.log(response.farewell);
}); 
```

它发送`{greeting: "hello"}`到后台。注意指定的回调

后台页面可以使用以下命令监听这些请求：

```
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) {
    if (request.greeting == "hello")
      sendResponse({farewell: "goodbye"});
  }); 
```

函数的参数`sendResponse`将传递给回调

# nlog - 如何在 Log 方法中同时使用 LogEventInfo 和 LogMessageGenerator/IFormatProvider？

> ID：10396036
> 
> 赞同：2
> 
> 时间：2012-05-01T09:47:52.593
> 
> 标签：nlog

事件上下文布局渲染器从 LogEventInfo 参数中获取其参数，例如： http: [//nlog-project.org/wiki/Event-context_layout_renderer](http://nlog-project.org/wiki/Event-context_layout_renderer)

但是 LogEventInfo 参数仅在 2 个 Log 方法签名中可用：

```
 public void Log(Type wrapperType, LogEventInfo logEvent)
     public void Log(LogEventInfo logEvent) 
```

如果我想使用其他 Log 方法，如何传递 LogEventInfo，例如：

```
 public void Log<T>(LogLevel level, IFormatProvider formatProvider, T value)
     public void Log(LogLevel level, LogMessageGenerator messageFunc)
     public void LogException(LogLevel level, [Localizable(false)] string message, Exception ecxception) 
```

假设这在 NLog 2.0 中是不可能的，有哪些变通方法可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:37:19.580

您列出的后一个 Log 方法实际上只是前两个的便捷方法。换句话说，他们只是`LogEventInfo`自己构造 s。当您使用前两种方法时，您为了更好的定制而绕过了便利。

要重新创建便捷方法的功能，您必须使用`LogEventInfo`.

```
// instead of..
Log<T>(LogLevel level, IFormatProvider formatProvider, T value)
// use:
LogEventInfo.Create<T>(LogLevel level, <log name>, IFormatProvider formatProvider, T value)

// instead of..
Log(LogLevel level, LogMessageGenerator messageFunc)
// use:
if (Log.IsEnabled(level))
    Log.Log(LogEventInfo.Create(level, Log.Name, messageFunc()));

// instead of..
LogException(LogLevel level, string message, Exception exception)
// use:
LogEventInfo.Create(LogLevel level, <log name>, string message, Exception exception) 
```

同样，使用 . 执行此操作的`LogEventInfo`好处是，您可以在调用`Log()`.

# jsf - jsf Richfaces a4j：区域调用渲染

> ID：10396037
> 
> 赞同：0
> 
> 时间：2012-05-01T09:48:00.457
> 
> 标签：jsf, richfaces

使用 JSF2 和 Richfaces 4。

我的表单中有两个区域和多个区域。我想为另一个区域调用渲染。我该怎么做？

```
<h:form>
    <a4j:region id="rg_1">
        <h:inputText id="field1" value="#{bean.field1}"/>   
    </a4j:region>
    <a4j:region id="rg_2">
        <a4j:commandLink action="#{mybean.resetBean} render="region1" />
    </a4j:region>
</h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:05:19.967

h:commandLink 没有`render`属性，`f:ajax`是否...

如果您想从 rg_2 中重新渲染 rg_1 而无需刷新页面（ajax）

请执行下列操作

```
<a4j:region id="rg_2">
    <a4j:commandLink action="#{mybean.resetBean}" render="rg_1"/>
</a4j:region> 
```

还要确保该`mybean.resetBean`方法是一个`void`方法或返回`null`

# java - 尝试使用 JPA 从 Oracle 数据库获取对象时出现 IllegalArgumentException

> ID：10396043
> 
> 赞同：0
> 
> 时间：2012-05-01T09:48:42.133
> 
> 标签：java, jpa, oracle11g, illegalargumentexception

这是我使用 JPA 与数据库对话的方法：

```
public Collection<ModuleConnection> getConnections(int parentModuleId) {
  Query query = em.createQuery("SELECT moduleConnection FROM ModuleConnection As moduleConnection WHERE moduleConnection.parentModule = :parentModuleId");
  query.setParameter("parentModuleId", parentModuleId);
  List<ModuleConnection> cons = query.getResultList();
  return cons;
} 
```

我这样调用这个方法：

```
Collection<ModuleConnection> connections = bh.getConnections(module.getModuleId()); 
```

每次我这样做，我都会得到这个异常：

```
java.lang.IllegalArgumentException: Can not set int field xyz.BomModule.moduleId to java.lang.Integer
    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:164)
    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:168)
    at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:55)
    at sun.reflect.UnsafeIntegerFieldAccessorImpl.getInt(UnsafeIntegerFieldAccessorImpl.java:56)
    at sun.reflect.UnsafeIntegerFieldAccessorImpl.get(UnsafeIntegerFieldAccessorImpl.java:36)
    at java.lang.reflect.Field.get(Field.java:372)
    at org.hibernate.property.DirectPropertyAccessor$DirectGetter.get(DirectPropertyAccessor.java:55)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.getIdentifier(AbstractEntityTuplizer.java:206)
    at org.hibernate.persister.entity.AbstractEntityPersister.getIdentifier(AbstractEntityPersister.java:3619)
    at org.hibernate.persister.entity.AbstractEntityPersister.isTransient(AbstractEntityPersister.java:3335)
    at org.hibernate.engine.ForeignKeys.isTransient(ForeignKeys.java:204)
    at org.hibernate.engine.ForeignKeys.getEntityIdentifierIfNotUnsaved(ForeignKeys.java:241)
    at org.hibernate.type.EntityType.getIdentifier(EntityType.java:430)
    at org.hibernate.type.ManyToOneType.nullSafeSet(ManyToOneType.java:110)
    at org.hibernate.param.NamedParameterSpecification.bind(NamedParameterSpecification.java:61)
    at org.hibernate.loader.hql.QueryLoader.bindParameterValues(QueryLoader.java:514)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1589)
    at org.hibernate.loader.Loader.doQuery(Loader.java:696)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
    at org.hibernate.loader.Loader.doList(Loader.java:2228)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2125)
    at org.hibernate.loader.Loader.list(Loader.java:2120)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:401)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:361)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1148)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:67)
    at xyz.getConnections(BomHandling.java:194)
    at org.apache.jsp.js.jquery_002dtreeview.demo.bom_005fexample_jsp._jspService(bom_005fexample_jsp.java:222)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:322)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:722)
11:38:03,373 ERROR [CachedConnectionValve] Application error: jsp did not complete its transaction 
```

这是表格的样子：

```
CREATE TABLE "MODULECONNECTION"
(
    "ID"                    NUMBER(10,0) NOT NULL ENABLE,
    "QUANTITY"              NUMBER(10,0) NOT NULL ENABLE,
    "PARENTMODULE_MODULEID" NUMBER(10,0),
    "SUBMODULE_MODULEID"    NUMBER(10,0)
) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:57:37.133

我认为您的查询应该是

```
SELECT moduleConnection FROM ModuleConnection As moduleConnection 
WHERE moduleConnection.parentModule.id = :parentModuleId 
```

如果查询的参数是 Module 类型（关联实体的类型，而不是其 ID 的类型），您可以使用原始查询

# javascript - Visustin 是否有任何（免费）替代品，我需要从现有的 JavaScript 代码创建流程图

> ID：10396044
> 
> 赞同：9
> 
> 时间：2012-05-01T09:48:45.297
> 
> 标签：javascript, flowchart

基本上，我需要将现有的 JavaScript 代码转换为流程图，我尝试使用 Code Visual 到 Flowchart 但它不会产生我想要的流程图（只显示不同功能的链接......

而 Visustin 实际上会自动分离每个功能。

有没有免费的替代品，甚至更便宜的软件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-08T10:19:34.283

我认为由于太多细节，转换代码未经编辑的结果是无用的。我会建议一种不同的方法来产生非常易读的流程图。[http://code2flow.com](http://code2flow.com)从可以包含任意自然语言的类 C（或类 Javascript）伪代码创建流程图。请注意，我直接参与了这个解决方案。您可能应该为代码中的每个重要功能创建不同的流程图。

示例流程图（您可以点击编辑） [![在此处输入图像描述](../Images/809d4baad1e01bcee1b15a503b41caeb.png)](http://code2flow.com/fK5nCa)

# java - ANTLR 以递归方式替换令牌

> ID：10396045
> 
> 赞同：1
> 
> 时间：2012-05-01T09:48:45.593
> 
> 标签：java, antlr, antlr3, antlrworks

我有以下语法：

```
rule: q=QualifiedName {System.out.println($q.text);};

QualifiedName
   :   
        i=Identifier { $i.setText($i.text + "_");}
        ('[' (QualifiedName+ | Integer)? ']')*
   ;

Integer
    : Digit Digit*
    ;

fragment
Digit 
    : '0'..'9'
    ;

fragment
Identifier
    :   (   '_'
        |   '$'
        |   ('a'..'z' | 'A'..'Z')
        )
        ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '$')*
    ; 
```

和来自Java的代码：

```
ANTLRStringStream stream = new ANTLRStringStream("array1[array2[array3[index]]]");
TestLexer lexer = new TestLexer(stream);
CommonTokenStream tokens = new TokenRewriteStream(lexer);
TestParser parser = new TestParser(tokens);
try {
    parser.rule();
} catch (RecognitionException e) {
    e.printStackTrace();
} 
```

对于输入：`array1[array2[array3[index]]]`，我想修改每个标识符。我期待看到输出：`array1_[array_2[array3_[index_]]]`，但输出与输入相同。

所以问题是：为什么该`setText()`方法在这里不起作用？

**编辑：**

我通过以下方式修改了巴特的答案：

```
rule: q=qualifiedName {System.out.println($q.modified);};

qualifiedName returns [String modified]
   :   
        Identifier
        ('[' (qualifiedName+ | Integer)? ']')*
        {
            $modified = $text + "_";
        }
   ;

Identifier
    :   (   '_'
        |   '$'
        |   ('a'..'z' | 'A'..'Z')
        )
        ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '$')*
    ;

Integer
    : Digit Digit*
    ;

fragment
Digit 
    : '0'..'9'
    ; 
```

我想修改规则匹配的每个令牌`qualifiedName`。我尝试了上面的代码，对于输入，`array1[array2[array3[index]]]`我期望看到输出`array1[array2[array3[index_]_]_]_`，但只修改了最后一个标记：`array1[array2[array3[index]]]_`。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:22:08.610

您只能`setText(...)`在创建令牌后使用。您正在递归调用此令牌***并***设置一些其他文本，这将不起作用。您需要创建一个解析器规则`QualifiedName`而不是词法分析器规则，并删除`fragment`before `Identifier`。

```
rule: q=qualifiedName {System.out.println($q.text);};

qualifiedName
   :   
        i=Identifier { $i.setText($i.text + "_");}
        ('[' (qualifiedName+ | Integer)? ']')*
   ;

Identifier
    :   (   '_'
        |   '$'
        |   ('a'..'z' | 'A'..'Z')
        )
        ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '$')*
    ;

Integer
    : Digit Digit*
    ;

fragment
Digit 
    : '0'..'9'
    ; 
```

现在，它将*在*`array1_[array2_[array3_[index_]]]`控制台上打印：

## 编辑

我不知道你为什么要这样做，但似乎你只是想重`]`写成`]_`，这可以按照我上面展示的相同方式完成：

```
qualifiedName
   :   
        Identifier
        ('[' (qualifiedName+ | Integer)? t=']' {$t.setText("]_");} )*
   ; 
```

# php - 字体转换来源

> ID：10396047
> 
> 赞同：2
> 
> 时间：2012-05-01T09:49:06.993
> 
> 标签：php, fonts

有一个问题 - 你在网上看到很多免费的字体转换工具。由于这些都是免费的，我认为它们背后的技术不仅仅是绝密/专利/商业用途。

我需要在我的应用程序中即时转换字体（使用 PHP）。

任何人都可以向我指出一些关于如何构建自己的字体转换器的资源（从哪里获得这些支持的脚本来转换字体类型）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T12:03:49.163

经过更多研究后，我发现我可以使用[FontForge](http://fontforge.sourceforge.net/)应用程序从控制台命令行转换字体文件。

[多亏了这一点，我可以在Font Forge 脚本](http://fontforge.sourceforge.net/scripting-tutorial.html)的帮助下编写 PHP 脚本来根据我的要求转换字体。

希望有人会发现它有用。

# python - 检查不存在的可选表

> ID：10396050
> 
> 赞同：3
> 
> 时间：2012-05-01T09:49:15.983
> 
> 标签：python, sqlalchemy, pyramid

我正在使用 SQLAlchemy + Pyramid 对我的数据库进行操作。但是，有些可选表并不总是希望出现在数据库中。因此，在查询他们时，我尝试使用`NoSuchTableError`

```
try:
    x = session.query(ABC.name.label('sig_name'),func.count('*').label('count_')).join(DEF).join(MNO).filter(MNO.relevance >= relevance_threshold).group_by(DEF.signature).order_by(desc('count_')).all()[:val]
except NoSuchTableError:
    x = [-1,] 
```

但是在执行这个语句时，我得到一个 ProgrammingError

```
ProgrammingError: (ProgrammingError) (1146, "Table 'db.mno' doesn't exist") 
```

为什么 SQLAlchemy 会引发更一般的 ProgrammingError 而不是更具体的 NoSuchTableError？如果这确实是预期的行为，我如何确保应用程序根据表格是否存在/不存在显示正确的信息？

**编辑1**

由于这是我的 webapp 的一部分，因此 DB 的模型在`models.py`（在我的金字塔 webapp 下）。我的 .ini 文件中有一个设置，要求用户选择其他表是否可用。但不信任用户，我希望能够（在视图中）自己检查表是否存在。有争议的表格类似于 (in `models.py`)

```
class MNO(Base):
    __tablename__="mno"
    id=Column(Integer,primary_key=True,autoincrement=True)
    sid=Column(Integer)
    cid=Column(mysql.MSInteger(unsigned=True))
    affectability=Column(Integer)
    cvss_base=Column(Float)
    relevance=Column(Float)
    __table_args__=(ForeignKeyConstraint(['sid','cid',],['def.sid','def.cid',]),UniqueConstraint('sid','cid'),) 
```

应该如何以及在哪里进行检查，以便可以设置一个变量（最好在应用程序设置期间），它告诉我表是否存在？

注意：在这种情况下，我将不得不尝试 if...else 而不是“请求原谅”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T10:21:29.537

根据[sqlalchemy](http://modular.math.washington.edu/home/wstein/www/home/dfdeshom/custom/sage/local/doc/SQLAlchemy-0.4.3/sqlalchemy_exceptions.html#docstrings_sqlalchemy.exceptions_NoSuchTableError)文档， a`NoSuchTableError`仅在“要求 SQLAlchemy [is] 从数据库加载表的定义，但该表不存在”时才抛出。您可以尝试加载表的定义，在那里捕获错误，然后执行查询。

如果你想通过“请求原谅”来做事：

```
try:
    table = Table(table_name, MetaData(engine)) 
except NoSuchTableError:
    pass 
```

或者，您可以只检查表是否存在：

**编辑：**

更好的是，你为什么不使用[has_table 方法](http://docs.sqlalchemy.org/en/rel_0_7/core/internals.html?highlight=has_table#sqlalchemy.engine.base.Dialect.has_table)：

```
if engine.dialect.has_table(connection, table_name):
    #do your crazy query 
```

* * *

为什么不先使用[Inspector](http://%5Bhttp://docs.sqlalchemy.org/en/rel_0_7/core/schema.html?highlight=inspector#sqlalchemy.engine.reflection.Inspector%5D)来获取表名？

也许是这样的：

```
from sqlalchemy import create_engine
from sqlalchemy.engine import reflection
#whatever code you already have
engine = create_engine('...')
insp = reflection.Inspector.from_engine(engine)
table_name = 'foo'
table_names = insp.get_table_names()
if table_name in table_names:
    x = session.query(ABC.name.label('sig_name'),func.count('*').label('count_')).join(DEF).join(MNO).filter(MNO.relevance >= relevance_threshold).group_by(DEF.signature).order_by(desc('count_')).all()[:val] 
```

# java - 我想为 GridView 设置字体

> ID：10396053
> 
> 赞同：0
> 
> 时间：2012-05-01T09:49:23.623
> 
> 标签：java, android, eclipse

我想为 GridView 的适配器 TextView 设置字体。我需要从 Asset 文件夹访问字体。

```
TextView listitem = (TextView) findViewById(R.id.listitem);
listitem.setTypeface(Typeface.createFromAsset(this.getAssets(), "DroidSans4.ttf")); 
```

我正面临这个错误列表。

```
> 
05-01 14:38:54.510: E/AndroidRuntime(9088): FATAL EXCEPTION: main
05-01 14:38:54.510: E/AndroidRuntime(9088): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.andro.sqllite/com.andro.sqllite.UsingSQLiteActivity}: java.lang.NullPointerException
05-01 14:38:54.510: E/AndroidRuntime(9088):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at android.os.Looper.loop(Looper.java:123)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at java.lang.reflect.Method.invokeNative(Native Method)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at java.lang.reflect.Method.invoke(Method.java:507)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at dalvik.system.NativeStart.main(Native Method)
05-01 14:38:54.510: E/AndroidRuntime(9088): Caused by: java.lang.NullPointerException
05-01 14:38:54.510: E/AndroidRuntime(9088):     at com.andro.sqllite.UsingSQLiteActivity.onCreate(UsingSQLiteActivity.java:92)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-01 14:38:54.510: E/AndroidRuntime(9088):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-01 14:38:54.510: E/AndroidRuntime(9088):     ... 11 more 
```

在这行代码中，我面临这些错误：

```
listitem.setTypeface(Typeface.createFromAsset(this.getAssets(), "DroidSans4.ttf")); 
```

谁能指导我如何为我的 GridView 设置字体？或者在这方面指导我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:07:06.390

参考这个，

```
public class Main extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Typeface tf = Typeface.createFromAsset(getAssets(),
                "fonts/BPreplay.otf");
        TextView tv = (TextView) findViewById(R.id.CustomFontText);
        tv.setTypeface(tf);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:10:17.407

尝试以下代码来应用字体...但首先您需要将适当的字体（您需要）复制到您的资产/字体文件夹中。

```
TextView listitem = (TextView) findViewById(R.id.listitem);
font = Typeface.createFromAsset(this.getAssets(), "fonts/DroidSansFallback.ttf");
listitem.setTypeface(font);
listitem.setText("जहां आप जाना चाहते हैं"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:56:12.410

好像`setContentView`之前没打过电话`TextView listitem = (TextView) findViewById(R.id.listitem);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T10:00:15.890

R.id.listitem 是网格项的布局？如果是这样，您需要在适配器的 getView() 方法中设置字体，而不是在 onCreate 中。在 onCreate() 期间还没有创建网格项目。这就是 findById 返回 null 导致 NPE 的原因。如果您需要更多帮助，请发布适配器的代码。

# performance - 如何使用 loadUI 生成负载？

> ID：10396055
> 
> 赞同：0
> 
> 时间：2012-05-01T09:49:32.423
> 
> 标签：performance, testing, load-testing, loadui

我想使用soapui + loadui集成测试用例生成负载测试，以便在我们的tomcat实例上生成负载但是当我将请求率增加到200到500或800时，大部分请求将被丢弃

有什么问题？我正在使用以下版本 loadui 2.0 soapui 4.5

帮助我创建生成超过 3000 个请求/秒的测试用例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:25:10.987

如果请求被丢弃，这意味着至少有 100 个（可以更改的默认值）请求正在运行（服务器尚未完成它们）。

*   如果根本没有完成任何请求，则 loadUI 无法访问您的服务器。
*   如果某些请求已完成，则您的服务器太慢而无法处理负载。

[在此处](http://loadui.org/Runners/running-your-tests.html#1-flowchart)阅读有关此内容的更多信息。

我的建议是以非常低的速率开始，并将 TableLog 连接到 soapUI Runner 以便于调试。

# html - 我是否应该将完整的网页作为 html/text 传递给 rest GET 调用

> ID：10396057
> 
> 赞同：8
> 
> 时间：2012-05-01T09:49:35.260
> 
> 标签：html, rest

我正在建立一个提供动态内容的网站。服务器/浏览器之间的所有通信都通过 REST 进行。PostgreSQL 用作数据存储。

我的问题是针对任何 GET 请求，我是否应该即时构建 html（以及动态内容）。

举个例子

```
@GET
@Produces(MediaType.TEXT_HTML)
public String getAllEmployee() {
    // employees fetched from the data base
    String html = "<HTML></head> blah blah";
    return html;
} 
```

我的问题是是否应该即时构建 html 并将其发送回浏览器。另外像linkedin这样的大网站是如何工作的？他们是否即时生成 html 页面并将页面发回？

我能想到的另一种方法是发送嵌入了 AJAX 请求的准系统 html。然后 ajax 请求从服务器获取动态内容。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T18:39:40.543

REST 的核心优势之一是将表示（编码）与被访问的底层资源分离。

如果客户端通过标头请求它作为首选项，则返回 HTML 是完全可以的`Accept`。如果客户端表明它更喜欢 JSON 或 XML 或明年设想的任何其他超级重复编码，那么您的服务器可以返回该格式，并且您的 URI 方案不会改变一点。

最重要的是，不要永远将 REST API 绑定到单一的编码格式。作为 API 服务提供商，您可以利用 HTTP 内容协商为您提供的出色灵活性，这样您就可以让 API 客户端能够选择最适合其需求的格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T09:57:03.940

没有硬性规定，但是，REST 服务通常以某种交换格式（例如 XML 或 JSON）返回数据。然后，客户端代码会将结果解释为 HTML，并在您认为合适的时候将它们注入页面。发送已经准备好的 HTML 可能是不可取的，因为

1.  它限制了您的 API 客户端可以对数据执行的操作
2.  您的服务层必须确定表示格式，这通常是不可取的
3.  意味着您的服务可能会通过网络返回比所需更多的位，如果您有一个繁忙的站点，这可能会产生很大的不同。

我建议您发回 JSON 对象，并让客户端代码将生成的对象应用于某种模板（有很多方法可以做到这一点）以生成实际的 HTML。

# c++ - 与乐高塑料积木 C++ 的组合数量

> ID：10396058
> 
> 赞同：6
> 
> 时间：2012-05-01T09:49:47.217
> 
> 标签：c++, algorithm, loops, combinations, lego

你有一些乐高塑料积木，所有积木都是 1x1x1。此外，您还有一块 1xN (N <= 80) 的瓷砖，您应该在其上放置乐高积木。您可以按顺序排列它们（如果有 3 个或更多连续砖块，则一个顺序是正确的），而且您必须在 2 个序列之间至少有 1 个空白空间。您应该计算可以将砖块放在瓷砖上的不同组合的数量。

这是一个例子：

如果瓷砖是 1x7，则有 17 种不同的组合。

输入：7 输出：17

[![示例图片](../Images/3e2403278939ae0a4571d9e30a7cbb18.png)](https://i.stack.imgur.com/Ep63X.gif)
[（来源：[mendo.mk](http://mendo.mk/task_files/kocki.gif)）]

此外，如果您没有积木，则将其计为 1 个组合。

我已经解决了这个问题，并且我找到了计算图块的最大长度是否为 14（3 个序列）的可能组合的方法。我发现它使用 for 循环。

我最大的问题是我需要运行大量的 for 循环。例如，对于 1 个序列，我使用 1 个 for 循环，对于 2 个序列，2 个循环 + 1 个用于 1 个序列......所以如果我使用所有 80 个砖块，我可以创建 20 个序列，我将不得不使用超过 210 个 for 循环，即数量巨大。因此，如果我可以将它们嵌套在一个中，那就太好了。我试过了，它变得一团糟，它没有给出正确的答案。

新代码：

```
#include <iostream>
using namespace std;
int main()
{
    long long int places, combinations = 1;
    cin >> places;
    long long int f[80], g[80];
    f[0] = 0;
    f[1] = 0;
    f[2] = 0;
    g[0] = 1;
    g[1] = 1;
    g[2] = 1;
    for(int i = 3; i<=places; i++)
    {
        f[i] = f[i-1] + g[i-3];
        g[i] = f[i-1] + g[i-1];
    }
    combinations = f[places] + g[places];
    cout << combinations;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T10:48:41.433

如果这是一个计数问题（不输出组合，而只是计数它们），那很容易。假设我们现在求解 n ≥ 3 以求解 n+1，我们通过归纳求解：

Assume`f`是一个函数，它显示最后一项是砖块的可能方式的数量。类似地`g`是一个函数，它显示了最后一个项目不是砖块的可能方式的数量。让定义`h = f+g`, 成为所有可能方式的数量。

所以我们有：

```
f(n+1) = f(n) + g(n-2)
g(n+1) = g(n) + f(n) 
```

初始条件：

```
for n=0,1,2: g=1, f= 0.
for n = 3: g=1,f=1 
```

样品：

```
n=4: g=2,f=2 ==> h=4
n=5: g=4, f= 3 ==> h=7
n=6: g=7, f= 4 ==> h=11
n=7: g=11,f=6 ==> h=17 
```

我们可以用一个 for 循环来解决它`O(n)`。

* * *

# 为什么：

```
f(n+1) = f(n) + g(n-2)
g(n+1) = g(n) + f(n) 
```

首先，让我们证明第一部分：

请记住，我们假设 f(n) 是在最后一项中包含塑料砖的有效解决方案，而 g(n) 是在最后一项中没有砖的有效解决方案。

f(n+1) 可以通过在最后一个位置添加一块砖来从 f(n) 获得。f(n+1) 也可以通过在 g(n-2) 之后添加三个砖块来获得，这意味着 n-1,n,n+1 的单元格。

请注意，我们不能在 g(n-1) 或 g(n) 之后添加砖块来创建 f(n+1) 的有效解决方案，因为它们不是有效解决方案（连续砖块的数量小于 3）。另外，请注意，我们不需要计算通过在 g(n-3) 之后添加砖块而出现的方式数量，因为它们之前已由 f(n) 枚举。所以我们有`f(n+1) = f(n) + g(n-2)`.

同样地，我们可以证明`g(n+1) = f(n)+g(n)`这种情况更容易，因为 g(n+1) 可以简单地由直到 的任何有效解决方案组成`n`，因为这里没有 3 个连续的砖障碍，它们可以在任何*有效*解决方案之后出现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T12:46:06.377

作为一个受过数学训练而不是 CS 的人，我觉得有必要提一下，虽然 Saeed Amiri 的算法非常好，并且对于 N 到几百万（当然，具有恒定的记忆）来说可能工作得足够快，但有一个从时间的角度来看更好的算法。

我会在他离开的地方捡起：

```
f(n+1) = f(n) + g(n-2)
g(n+1) = f(n) + g(n) 
```

由于 f 和 g 是离散函数，您可以将它们视为序列。那么这变成了递归关系的线性系统。幸运的是，可以完全解决这样的系统，从而可以呈现 f 和 g 的显式形式。
不幸的是，SO 似乎不像 math.SE 那样支持 MathJax，所以我为从这里开始的低质量方程道歉。
让

```
     | f(n) |
     |f(n-1)|
u(n)=|f(n-2)|
     | g(n) |
     |g(n-1)|
     |g(n-2)|

```

也就是说，u(n) 是一个向量行。那么，以下情况属实：

```
|f(n+1)| |1 0 0 0 0 1| | f(n) |
| f(n) | |1 0 0 0 0 0| |f(n-1)|
|f(n-1)| = |0 1 0 0 0 0| . |f(n-2)|
|g(n+1)| |1 0 0 1 0 0| | g(n) |
| g(n) | |0 0 0 1 0 0| |g(n-1)|
|g(n-1)| |0 0 0 0 1 0| |g(n-2)|

```

由此得出的结论是`u(n) = A * u(n-1)`，其中 A 是上面的矩阵。
然后，`u(n) = (A^(n-2)) * u(2)`，其中`u(2)`是向量，包含问题的初始值。这反过来又给出了一个`O(log(n))`复杂的算法，因为您可以使用快速求幂来计算`(A^(n-2))`，然后将其乘以`u(2)`.

当然，任何这样的技术都可能需要某种 BigInt，否则溢出几乎是有保证的。

另请注意，此技术可以进一步应用：
您可以找到 A 的特征向量和特征值，然后分解`u(2)`为特征向量。然后，您将获得 f(n) 和 g(n) 的封闭形式。

**我强烈建议您不要使用基于封闭形式的算法**
它几乎肯定会涉及高精度浮点计算（除非所有特征值都是整数，这是极不可能的），从编程的角度来看，这些计算至少具有这种复杂性，并且是通常不是恒定时间操作。当然，BigInt 操作也不是。因此，恒定时间算法通常是不可行的，而且您可能甚至不需要`O(log(n))`，因为对于大多数用途来说，线性就足够了。

**注意**
这里描述的技术可以用于各种问题，并且在动态优化问题中非常有用。另外，通常人们在第一次看到这个时会印象深刻；）

# php - 在 PHP 中打印出大 json 对象的特定位？

> ID：10396059
> 
> 赞同：0
> 
> 时间：2012-05-01T09:49:49.240
> 
> 标签：php, arrays, json, object

我有一个很大的 JSON 对象，里面有很多数据。我想从中打印出特定的数据位，但似乎找不到打印语句的正确语法。

这是 json 对象的第一位，因此您可以看到结构：

```
{"response":{"status":"OK","advertisers":[{"id":26243,"code":null,"name":"Tego","state":"inactive","default_brand_id":null,"remarketing_segment_id":null,"lifetime_budget":null,"lifetime_budget_imps":null,"daily_budget":null,"daily_budget_imps":null,"enable_pacing":null,"profile_id":508487,"control_pct":0,"timezone":"PST8PDT","last_modified":"2011-08-11 04:35:39","stats":null,"billing_internal_user":null,"billing_address1":"","billing_address2":"","billing_city":"","billing_state":"","billing_country":"","billing_zip":"","default_category":{"id":"5","name":"Computers and Electronics"},"default_currency":"USD","labels":[{"id":"1","name":"Salesperson","value":"Kurt Mackey"},{"id":"3","name":"Account Manager",}],"use_insertion_orders":false,"time_format":"12-hour","default_brand":null}, 
```

我想返回第一个广告商的 ID（应该是 26243）。

我正在尝试使用以下语句将其打印出来：

打印 $result->response->advertisers[0]->id

但它似乎没有工作。我得到一个空白的白页。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:53:48.753

您需要先用 解码字符串`json_decode($jsonString)`。之后，您将能够通过您引用的打印语句访问不同的属性。

```
$json = '{"response":{"status":"OK","advertisers":[{"id":26243,"code":null,"name":"Tego","state":"inactive","default_brand_id":null,"remarketing_segment_id":null,"lifetime_budget":null,"lifetime_budget_imps":null,"daily_budget":null,"daily_budget_imps":null,"enable_pacing":null,"profile_id":508487,"control_pct":0,"timezone":"PST8PDT","last_modified":"2011-08-11 04:35:39","stats":null,"billing_internal_user":null,"billing_address1":"","billing_address2":"","billing_city":"","billing_state":"","billing_country":"","billing_zip":"","default_category":{"id":"5","name":"Computers and Electronics"},"default_currency":"USD","labels":[{"id":"1","name":"Salesperson","value":"Kurt Mackey"},{"id":"3","name":"Account Manager",}],"use_insertion_orders":false,"time_format":"12-hour","default_brand":null}'
$jsonObj = json_decode($json);
print_r($jsonObj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:21:00.917

您需要重新验证您的 json 数据。因为它是在对 json 数据进行一些修改后为我找到的。

> "labels":[{"id":"1","name":"Salesperson","value":"Kurt Mackey"},{"id":"3","name":"客户经理", }]

参见“标签[1](http://sourceforge.net/projects/jsonschemaphpv/) ”。它没有“标签[0]”的价值。

尝试[Json Schema PHP 验证器](http://sourceforge.net/projects/jsonschemaphpv/)

```
 <?php
$json = '{"response":{"status":"OK","advertisers":[{"id":26243,"code":null,"name":"Tego","state":"inactive","default_brand_id":null,"remarketing_segment_id":null,"lifetime_budget":null,"lifetime_budget_imps":null,"daily_budget":null,"daily_budget_imps":null,"enable_pacing":null,"profile_id":508487,"control_pct":0,"timezone":"PST8PDT","last_modified":"2011-08-11 04:35:39","stats":null,"billing_internal_user":null,"billing_address1":"","billing_address2":"","billing_city":"","billing_state":"","billing_country":"","billing_zip":"","default_category":{"id":"5","name":"Computers and Electronics"},"default_currency":"USD","labels":[{"id":"1","name":"Salesperson","value":"Kurt Mackey"},{"id":"3","name":"Account Manager","value":null}],"use_insertion_orders":false,"time_format":"12-hour","default_brand":null}]
}}';

$result = json_decode($json);
print $result->response->advertisers[0]->id; 
```

# ruby-on-rails - 回形针 - 图像上传后将图像转换为金字塔 tiff

> ID：10396064
> 
> 赞同：1
> 
> 时间：2012-05-01T09:50:23.700
> 
> 标签：ruby-on-rails, paperclip

我正在使用回形针通过我的表单上传图像。

图片上传后，我想运行一个函数，将上传的图片转换为金字塔 tiff。

我的问题是如何在每次上传图片后激活该功能。

非常感谢您的建议

# haskell - 为什么我们在haskell中编写函数时需要使用括号？

> ID：10396067
> 
> 赞同：2
> 
> 时间：2012-05-01T09:50:46.010
> 
> 标签：haskell, function-composition

假设我需要定义以下函数：

身份 = chr.ord

但是上面的行不起作用，正确的方法是：

身份 = (chr.ord)

Haskell 通常是一种极简主义的语言，因此使用额外的括号似乎并不自然（对我来说）。

有谁知道需要引入括号。我不记得我们在 haskell 中在哪里使用点运算符（除小数外）。

*根据 Nate/Daniel 的评论进行编辑*

你俩都是对的。我的实际方法是：

```
nextLetter a 
         | a /= 'z' = chr.ord a
         | a == 'z' = 'a' 
```

现在我明白了，在这种情况下，它将评估 ord a 然后尝试评估 chr.97，因此出现错误！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T09:54:14.890

你错了。当我写

```
import Data.Char
identity = chr.ord 
```

并`test.hs`加载它`ghci`，没有任何问题。

# collision-detection - 分离轴定理中的平移方向

> ID：10396068
> 
> 赞同：2
> 
> 时间：2012-05-01T09:50:47.793
> 
> 标签：collision-detection

我已经在java中实现了分离轴定理。碰撞检测本身效果很好。但是在解决碰撞时我被卡住了。

我的翻译方法如下：

```
public float getOverlap(final Projection other) {
    float start = m_min > other.m_min ? m_min : other.m_min;
    float end = m_max < other.m_max ? m_max : other.m_max;
    float translation = end - start;
    return translation;
} 
```

假设图片中两个矩形的投影看起来像这样。

```
R1.min = 2
R1.max = 8
R2.min = 5
R2.max = 11 
```

![分离轴平移](../Images/b56689e2ea79395b67005b32cb3819b2.png)

当我检查 R1 与 R2 时，翻译将为 3 当我检查 R2 与 R1 时，翻译也将为 3

现在我将翻译添加到标准化轴

```
Normalized axis = Vector(1,0)
Translation Vector = Vector(1,0)*3 = Vector (3,0) 
```

现在 R1 和 R2 都向右移动了 3 个点，但它们应该向不同的方向移动。R1 应该移动 Vector(-3,0)，R2 应该移动 Vector(3,0)。

我如何计算正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T18:08:27.450

我的解决方案：

我从中心向量 R2 中减去中心向量 R1，将点积构建到测试轴，如果点积小于 0，则反转平移

```
Vector centerR1(R1.x,R1.y);
Vector centerR2(R2.x,R2.y);

Vector R1toR2 = centerR2 - centerR1;

if(R1toR2.dot(axis)<0){
  translation = -translation
} 
```

“当向量（R1toR2）指向负方向时，反转平移”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-19T12:30:47.700

只是要在这里发布另一个答案，为我解决它。

点积的解决方案对我不起作用，尽管您似乎检查了点是否`< 0`在您的答案中，而在其他任何地方我都看到检查是`>= 0`，所以我不确定这会改变什么。

我决定在我的`getOverlap`函数中返回正或负重叠，这将指示解析的方向。这将取决于第一个对象的最小值是否小于第二个对象的最小值。

```
// Check for overlap of two 1 dimensional lines
function getLineOverlap(min1, max1, min2, max2) {
    let min = Math.max(min1, min2);
    let max = Math.min(max1, max2);

    // if negative, no overlap
    let result = Math.max(max - min, 0);

    // add positive/negative sign depending on direction of overlap
    return result * ((min1 < min2) ? 1 : -1);
}; 
```

如果这仍然不起作用，您可能需要将得到的分辨率向量乘以`-1`.

我从[这个 stackoverflow 答案](https://gamedev.stackexchange.com/a/27633/126355)中得到了这个解决方案。

# java - 无法使用同一包的另一个文件中定义的静态方法

> ID：10396069
> 
> 赞同：1
> 
> 时间：2012-05-01T09:50:51.953
> 
> 标签：java

运行 Test.java 抛出错误运行：线程“main”中的异常 java.lang.RuntimeException：无法编译的源代码 - 错误的树类型：在 algorithm.Test.main(Test.java:9)

这两个文件都存在于同一目录“算法”中，并且`package algorithms`在每个文件的开头也提到了。

运行测试的 main() 有什么问题？

# Gcd.java 文件

```
package algorithms;

public class Gcd {

public static int ComputeGcd(int number1, int number2){
    if(number2 == 0){ return number1;}
    else{
         int remainder = number1 % number2;
         return ComputeGcd(number2,remainder);
    }
}

public static void main(String[] args) {

    int a = 32;
    int b = 12;
    System.out.println(ComputeGcd(a,b));

} 
} 
```

# 测试.java 文件

```
package algorithms;

public class Test {
  public static void main(String[] args) {

    int a = 32;
    int b = 12;
   System.out.println(ComputeGcd(a,b));

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T09:53:34.393

尝试使用：

```
System.out.println(Gcd.ComputeGcd(a,b)); 
```

代替：

```
System.out.println(ComputeGcd(a,b)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:54:41.660

您需要指定类：

```
System.out.println(GCD.ComputeGcd(a,b)); 
```

# c# - 需要将 2 个 XML 的属性合并为一个

> ID：10396071
> 
> 赞同：1
> 
> 时间：2012-05-01T09:51:21.257
> 
> 标签：c#, xml

我有两个这样的 XML。

## XML1

```
<RPM>
  <CAI ID="101" Name="Guaranteed Payments"/>
  <CAI ID="102" Name="Sports Recreation"/> 
</RPM> 
```

## XML2

```
<RPM>
  <CAI ID="102" Active="False"/>
  <CAI ID="103" Active="True"/> 
</RPM> 
```

我必须编写一个 C# 代码，它将基于 CAI ID 将两个 XML 的属性合并为一个。例如，两个 XML 都有一个 CAI ID 为 102 的节点，所以最终的 XML 将是，

## 结果

```
 <RPM>
       <CAI ID="101" Name="Guaranteed Payments"/>
       <CAI ID="102" Name="Sports Recreation" Active="False"/>
       <CAI ID="103" Active="True"/>
    </RPM> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:05:34.957

我很想做这样的事情，将两个 XML 文件反序列化为类，然后通过代码将它们组合起来。

所以 XML 定义类将是您想要的最终产品：

```
[XmlTypeAttribute]
[XmlRootAttribute("RPM")]
public class RPMConfiguration
{

    [XmlElementAttribute("CAI")]
    public CAI[] CAIList{ get; set; }

}

[XmlTypeAttribute]
public class CAI
{
    [XmlAttributeAttribute("ID")]
    public int ID { get; set; }

    [XmlAttributeAttribute("Name")]
    public string Name { get; set; }

    [XmlAttributeAttribute("Active")]
    public string Active{ get; set; }
} 
```

然后你会像这样反序列化 xml 字符串：

```
public static object Deserialize(string xml)
{
    var deserializer = new System.Xml.Serialization.XmlSerializer(typeof(RPMConfiguration));
    using (var reader = XmlReader.Create(new StringReader(xml)))
    {
        return (RPMConfiguration)deserializer.Deserialize(reader);
    }
} 
```

此时，您有两个 RPMConfiguration 对象，带有一个 CAI 对象列表，然后您可以循环遍历并匹配 ID，将一个视为主集合并将缺少的任何属性复制到其中。

一旦你完成了。只需将配置序列化回 XML 即可，嘿，一个完整的 XML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:15:03.077

```
string xml1 = @"
    <RPM>
        <CAI ID=""101"" Name=""Guaranteed Payments""/>
        <CAI ID=""102"" Name=""Sports Recreation""/> 
    </RPM>";

string xml2 = @"
    <RPM>
        <CAI ID=""102"" Active=""False""/>
        <CAI ID=""103"" Active=""True""/> 
    </RPM>";

XDocument xDoc1 = XDocument.Load(new StringReader(xml1));
XDocument xDoc2 = XDocument.Load(new StringReader(xml2));
var cais = xDoc1.Descendants("CAI")
          .Concat(xDoc2.Descendants("CAI"))
          .GroupBy(x => x.Attribute("ID").Value)
          .Select(x => x.SelectMany(y => y.Attributes()).DistinctBy(a => a.Name))
          .Select(x => new XElement("CAI", x));

string xml = new XElement("RPM", cais).ToString(); 
```

[你可以在这里](http://code.google.com/p/morelinq/source/browse/trunk/MoreLinq/DistinctBy.cs)`DistinctBy`找到Jon Skeet的完整实现

```
public static partial class MyExtensions
{
    public static IEnumerable<T> DistinctBy<T, TKey>(this IEnumerable<T> source, Func<T, TKey> keySelector)
    {
        HashSet<TKey> knownKeys = new HashSet<TKey>();
        foreach (T element in source)
        {
            if (knownKeys.Add(keySelector(element)))
            {
                yield return element;
            }
        }
    }
} 
```

# javascript - javascript window.location 页面在框架中重定向

> ID：10396073
> 
> 赞同：0
> 
> 时间：2012-05-01T09:51:38.100
> 
> 标签：javascript, frames, window.location

我正在从一本旧书（2003 年）中学习 javascript，所以我认为一些代码已经过时，我知道框架不是很好的做法，但我在书中的最后一个练习中遇到了麻烦。

首页有2个框架，一个左边和一个右边。左侧充当菜单栏并保持不变。正确的页面之一有一个要填写的表单，单击提交它会调用一个函数，然后应该使用 window.location.href="nextpage.html" 更改正确的页面，但它不起作用。有任何想法吗？我已经玩了很多年了。我可以更改主框架集保存页面，但不仅仅是正确的页面。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:56:53.127

如果您要从另一个框架更改一个框架，那么您将需要执行类似的操作

```
parent.left_frame.location="next1.html";
parent.right_frame.location="next2.html"; 
```

（注意：父母是这一切的关键）

我会研究 jquery 和 ajax 请求，但首先学习基本的 javascript 肯定是有用的。

# javascript - 从Javascript中的字符串中删除特定字符

> ID：10396074
> 
> 赞同：55
> 
> 时间：2012-05-01T09:51:44.463
> 
> 标签：javascript, string

我正在创建一个表单来在我们的通话记录系统中查找支持请求的详细信息。

呼叫参考被分配了一个数字`F0123456`，就像用户输入的一样，但数据库中的记录是`123456`. `jQuery`我有以下代码用于在使用ajax提交表单之前从表单中收集数据。

`F0`如果存在，我将如何从字符串中删除前导？

```
$('#submit').click(function () {        

var rnum = $('input[name=rnum]');
var uname = $('input[name=uname]');

var url = 'rnum=' + rnum.val() + '&uname=' + uname.val(); 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-01T09:54:15.883

只需将其替换为空：

```
var string = 'F0123456'; // just an example
string.replace(/^F0+/i, ''); '123456' 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2019-06-19T01:46:54.690

老实说，我认为这可能是最简洁和最不容易混淆的，但也许这只是我：

```
str = "F0123456";
str.replace("f0", ""); 
```

甚至不要走正则表达式路线，只需直接替换即可。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-01T09:54:26.743

另一种方法：

```
rnum = rnum.split("F0").pop() 
```

它将字符串分成两部分：`["", "123456"]`，然后选择最后一个元素。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-01T09:55:00.787

正则表达式解决方案：

```
ref = ref.replace(/^F0/, ""); 
```

简单的解决方案：

```
if (ref.substr(0, 2) == "F0")
     ref = ref.substr(2); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-09-23T08:53:31.060

如果您想`F0`从整个字符串中删除，那么该[`replaceAll()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll)方法适合您。

```
const str = 'F0123F0456F0'.replaceAll('F0', '');
console.log(str);
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-01-18T17:14:41.050

如果它不是前两个字符并且你想从整个字符串中删除 F0 那么你必须使用这个正则表达式

```
 let string = 'F0123F0456F0';
   let result = string.replace(/F0/ig, '');
   console.log(result);
```

# ruby-on-rails - Capybara 在我的 Rails 应用程序中不起作用

> ID：10396078
> 
> 赞同：3
> 
> 时间：2012-05-01T09:52:04.963
> 
> 标签：ruby-on-rails, rspec, capybara

我在 rails 3.1.0 应用程序中使用 Capybara（同时使用 1.1.1 和 1.1.2）。我正在尝试使用 chromedriver 让 Capybara 运行以进行集成测试。当我运行测试套件时，测试用例失败并出现此错误：

```
Selenium::WebDriver::Error::WebDriverError: unable to connect to chromedriver http://127.0.0.1:53468 
```

当我不使用 chromedriver firefox 也将无法工作。奇怪的是，当我从`irb`（而不是 rails 控制台）使用 capybara 时，它工作正常。但是，当我尝试将它与加载的 Rails 应用程序一起使用时，总是会发生上述错误。

我想这与我正在加载的依赖项有关，因为我在另一个（Rails 2）项目中运行 Capybara 很好。

如果有帮助，这里是我的 gemfile：

```
source 'http://rubygems.org'

gem 'rails', '3.1.0'
gem 'mysql2', '~> 0.3.6'

gem 'pg'

gem 'json'
gem 'alchemist'
gem "rails-backbone"

group :assets do
  gem 'sass-rails', "~> 3.1.0.rc"
  gem 'coffee-rails', "~> 3.1.0.rc"
  gem 'uglifier'
end

gem 'jquery-rails'

group :test, :development do
  gem 'jasmine'
  gem 'capybara'
  gem 'launchy'
  gem 'rspec'
  gem 'rspec-rails'
  gem "factory_girl_rails", "~> 1.1"
end 
```

我的规范助手看起来像这样：

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'capybara/rspec' 
```

  需要“水豚/导轨”

```
Capybara.register_driver :selenium do |app|
  Capybara::Selenium::Driver.new(app, :browser => :chrome)
end
Capybara.default_driver = :selenium

Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.mock_with :rspec
end 
```

感谢您的任何想法。

PS。不确定这是否有帮助，但是当我使用`chromedriver-helper`gem 时，我得到了这个错误：

```
no such file to load -- {"sessionId":"bcdf4c348c8f976cbe20f98120a456d0","status":0,"value":{"acceptSslCerts":false,"applicationCacheEnabled":false,"browserConnectionEnabled":false,"browserName":"chrome","chrome.chromedriverVersion":"19.0.1068.0","chrome.nativeEvents":false,"cssSelectorsEnabled":true,"databaseEnabled":false,"handlesAlerts":true,"javascriptEnabled":true,"locationContextEnabled":false,"nativeEvents":true,"platform":"mac","rotatable":false,"takesScreenshot":true,"version":"18.0.1025.168","webStorageEnabled":false}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:00:52.360

在 spec_helper 中需要这些文件

```
 require 'capybara/rspec'
  require 'capybara/rails' 
```

也检查[这个帖子](http://www.opinionatedprogrammer.com/2011/02/capybara-and-selenium-with-rspec-and-rails-3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:32:18.747

我们还必须将 javascript_driver 设置为 :chrome

即功能/支持/chrome.rb：

```
# Use Chrome for Selenium (@javascript) browser-based tests in Capybara.
# Chromedriver, the Chromium project's selenium webdriver adapter, must
# be installed on the test server.  To ease the installation and use of
# chromedriver, the chromedriver-helper gem is specified in the Gemfile.
#
# Updating Chromedriver
# =====================
# If you'd like to force-upgrade to the latest version of chromedriver,
# run the script 'chromedriver-update' that comes packaged with this
# gem.
# This might be necessary on platforms on which Chrome auto-updates,
# which has been known to introduce incompatibilities with older versions
# of chromedriver.

Capybara.register_driver :chrome do |app|
  Capybara::Selenium::Driver.new(app, :browser => :chrome)
end

# The chromedriver-helper docs don't list this as a requirement.
# We only know about it from other chrome driver docs.
Capybara.javascript_driver = :chrome 
```

# c# - 如何在文件观察器中定义窗口登录？

> ID：10396079
> 
> 赞同：0
> 
> 时间：2012-05-01T09:52:16.430
> 
> 标签：c#, asp.net, filesystemwatcher

我开发了一个 asp.net c# filewatcher 程序来监视文件夹。

如果有任何修改或新创建的文件，程序会将这些文件复制到另一个窗口服务器共享文件夹，例如 \192.168.12.12\shared

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

using System.IO;
using System.Diagnostics;
using System.Threading;
using System.Net;
using System.Globalization;
using System.Text.RegularExpressions;

namespace FileMonitor
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            fileWatcher.Path = @txtPath.Text;
            fileWatcher.Filter = txtFilter.Text;
            fileWatcher.IncludeSubdirectories = chkSubdirectories.Checked;
        }

        DateTime lastRead = DateTime.MinValue;

        private void fileWatcher_Changed(object sender, System.IO.FileSystemEventArgs e)
        {
            DateTime lastWriteTime = File.GetLastWriteTime(e.FullPath); 

            if (lastWriteTime != lastRead)
            {

                txtLog.Text += e.ChangeType + ": " + e.FullPath + "\r\n";
                txtLog.Focus();
                txtLog.Select(txtLog.TextLength, 0);
                txtLog.ScrollToCaret();

                try
                {
                    string myPath = e.FullPath;
                    string myFile = e.Name;

                    System.IO.FileInfo myFileInfo = new System.IO.FileInfo(myFile);

                    string myAttibs = myFileInfo.Attributes.ToString();

                    System.IO.File.Copy(myPath, @"\\192.168.12.12\\shared\\" + myFile, true);

                    lastRead = lastWriteTime; 

                }
                catch (System.IO.IOException ex)
                {
                    System.IO.IOException myex = ex;
                }
                catch (System.Exception ex)
                {
                    System.Exception myex = ex;
                }

            }
        }

        private void fileWatcher_Created(object sender, System.IO.FileSystemEventArgs e)
        {
            DateTime lastWriteTime = File.GetLastWriteTime(e.FullPath);

            if (lastWriteTime != lastRead)
            {

                txtLog.Text += e.ChangeType + ": " + e.FullPath + "\r\n";
                txtLog.Focus();
                txtLog.Select(txtLog.TextLength, 0);
                txtLog.ScrollToCaret();

                try
                {
                    string myPath = e.FullPath;
                    string myFile = e.Name;

                    System.IO.FileInfo myFileInfo = new System.IO.FileInfo(myFile);

                    string myAttibs = myFileInfo.Attributes.ToString();

                    System.IO.File.Copy(myPath, @"\\192.168.12.12\\shared\\" + myFile, true);

                    lastRead = lastWriteTime;

                }
                catch (System.IO.IOException ex)
                {
                    System.IO.IOException myex = ex;
                }
                catch (System.Exception ex)
                {
                    System.Exception myex = ex;
                }

            }
        }

    }
} 
```

但是我发现在运行filewatcher程序之前需要访问共享文件夹一次（比如在window explorer中输入\192.168.12.12\shared，它会提示我输入登录名和密码），否则程序无法复制到共享文件夹。

我怎样才能在我的程序中传递这个登录名和密码才能访问共享文件夹？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:46:28.260

执行此操作的常用方法是将共享文件夹的必要权限授予运行此类复制代码的用户。

如果您不能这样做，您需要使用 Win32 函数[NetUseAdd](http://www.pinvoke.net/default.aspx/netapi32/NetUseAdd.html)或[WNetAddConnection2](http://www.pinvoke.net/default.aspx/mpr/WNetAddConnection2.html)来对共享进行身份验证（链接指向 pinvoke.net，它显示了如何在 C# 中使用这些函数）。

# windows-phone-7 - Windows phone 7 中 App.xaml 中的应用程序常量和 Web 服务 URL

> ID：10396080
> 
> 赞同：0
> 
> 时间：2012-05-01T09:52:27.133
> 
> 标签：windows-phone-7, windows-phone-7.1

对不起，我是新手。。

在 App.xaml 的哪个部分，我们可以在 Windows phone 7 中添加应用程序常量和 Web 服务 URL。

我只需要执行 Get(read) 操作来访问应用程序中的这些值。

任何人都可以为此提供示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:29:07.350

您可以利用`Application.Resources`节点来引入应用程序范围`StaticResource`的 s。例如;

```
<Application xmlns:system="clr-namespace:System;assembly=mscorlib">
  <Application.Resources>
    <system:String x:Key="SomeImportantConstant">SomeValue</system:String>
  </Application.Resources>
</Application> 
```

然后，您可以在代码的其他地方的 XAML 中使用它，就像这样......

```
<TextBlock Text="{StaticResource SomeImportantConstant}" /> 
```

对于通常在 XAML 中完成的某些事情，这可能是包含常量的静态类的更好替代方案。一个 WP7 相关示例：我使用它来存储我的 Bing 地图应用程序 ID。然后我可以从`StaticResource`我声明我的`Map`. 位更清洁，然后必须在代码隐藏中混合以引用一个常量值。

# php - 根据内容类型更改 Drupal 上的节点创建标题

> ID：10396083
> 
> 赞同：1
> 
> 时间：2012-05-01T09:52:54.860
> 
> 标签：php, html, drupal, drupal-6, drupal-modules

我希望能够基于每个内容更改节点创建标题，因为我有一种我希望更改标题的内容类型，但将所有其他内容类型保留为默认值。我使用 Drupal 6。

使用此处的说明[更改 Drupal 中的节点创建标题？](https://stackoverflow.com/questions/1392573/changing-the-node-creation-title-in-drupal)工作正常，花花公子，但是这会影响我所有的内容类型，我只想改变一个 - 我在 Drupal 论坛上搜索了高低，似乎找不到任何对我有帮助的东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:22:15.833

您是否尝试过您链接的线程[中其他答案的建议？](https://stackoverflow.com/a/9059933/46149)

IIRC，这应该可以解决特定于内容类型的操作，即：

```
function your_module_form_alter(&$form, $form_state, $form_id) {
  if ($form_id == '[yourContenttypeName]_node_form') {
    drupal_set_title(t("Title you prefer"));
  }
} 
```

# php - 邮件功能已停止在服务器上运行

> ID：10396086
> 
> 赞同：0
> 
> 时间：2012-05-01T09:53:26.353
> 
> 标签：php, email, function, sendmail

我的邮件脚本在在线服务器上。工作正常。但是不是现在。我很困惑为什么它停止发送邮件。它显示了电子邮件发送的消息，但收件箱中没有收到电子邮件。这是我的 php 脚本：

```
$useremail = $_POST['myemail'];

    $friendemail = $_POST['friendemail'];

        $name = "support";

        $email = "support@example.com";

        $rec = $friendemail;

        $sub = "support Invitation";

        $body = 'the user '.$useremail.' has sent you message';

        $header="Content-type: text/html\n";

        $header .= "From: $name < ". $email ." >";

        $success_mail = mail($rec,$sub,$body,$header);
        if($success_mail){ echo "success0";} else { echo "Not sent";} 
```

请帮我 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:25:46.470

IME 与从 PHP 发送邮件有关的大多数问题是 MTA 的问题，与 PHP 无关。如果系统已停止发送邮件但您的 PHP 没有更改，那么这里可能也是这种情况。

您没有提供关于它运行在什么操作系统上的信息，也没有提供 PHP 是如何配置为使用邮件的信息——这在不同的操作系统上是非常不同的。

> 但收件箱中没有收到电子邮件

在发送电子邮件和它到达目的地之间发生了很多事情。通常它由发送端的 MTA 排队等待发送，传递到接收端的 MTA（可选地通过中间 MTA），在接收端应用策略检查，传递到接收端的 imap/pop 服务（可能通过进一步的策略检查），由您的邮件客户端检索（再次通过进一步的策略检查）。

您需要查看流程的每个步骤以找出失败的地方。

> mysql_real_escape_string($_POST['friendemail']);

怎么回事？这是错误的。

> $header="内容类型：文本/html\n";

尝试通过 SMTP 强制非 7 位 ascii 对您没有任何好处。这些天来，这应该不是一个大问题，也不太可能是错误的原因 - 但请尝试发送纯文本消息，看看会发生什么。

哦...再次查看您的代码，我发现*您正在发送纯文本*，所以 WTF 是 html 标头吗？

如果您想要任何可送达性保证，请修复电子邮件的编码，无论这是否不是这种情况下问题的原因。

# .net - 边距：0 自动；不适用于整个页面

> ID：10396089
> 
> 赞同：0
> 
> 时间：2012-05-01T09:53:45.447
> 
> 标签：.net, css, master-pages

我有一个 MasterPage（在 .net 中）并且我正在申请：

```
#wrapper {
  position: relative;
  margin: 0 auto;   
} 
```

至 ：

```
<body>
<div id = "wrapper" >
   here goes my content
</div>
</body> 
```

但它不起作用....你能帮忙解决这个问题吗，请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:56:17.177

您还必须指定 div 宽度...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T09:56:51.303

您需要为包装器提供宽度。例如`width:960px`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T09:59:27.037

Margin Auto 仅在 DIV 具有固定宽度时有效

```
#wrapper {
           position: relative;
           margin: 0 auto;
           width: 950px;   
          } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T09:57:35.920

您应该为该包装元素设置一个宽度，以使边距按预期工作。

# sharepoint-2010 - sharepoint 2010 添加新项目链接在异步回发时丢失

> ID：10396091
> 
> 赞同：0
> 
> 时间：2012-05-01T09:53:47.863
> 
> 标签：sharepoint-2010

我在更新面板中有一个自定义 xsltviewwebpart，我在第一次加载时以编程方式附加到自定义列表，底部可见“添加新项目”链接，但在异步回发时，该链接不再可见。

有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:09:13.730

通过添加仅在异步回发上可见的自定义“添加新项目”链接解决了上述问题

# java - 多进程调试

> ID：10396095
> 
> 赞同：1
> 
> 时间：2012-05-01T09:54:04.733
> 
> 标签：java, debugging

我需要调试一个从一开始就启动多个进程的项目，全部使用 Java。

我的问题是调试这样的代码非常烦人。因为每次我完成调试会话时，所有其他进程都卡在内存中并杀死所有进程非常烦人（因为它们没有进程名称并且它们都是“java”）。

是否有可能自动完成所有杀戮？或任何其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:07:54.503

您需要调用[`process.destroy`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#destroy%28%29)才能杀死子进程。您可以为您的应用程序创建一个关闭挂钩并将此调用添加到它。

您将需要测试它是否在调试器中有效，但无论如何，它还是有好处的，因为它可以确保您的应用程序干净地关闭。

这是一个例子：

```
// start a sub process
final Process childProcess = new ProcessBuilder("some command").start();

// add a shutdown hook which will be invoked when the JVM is shutting down
Runtime.getRuntime().addShutdownHook(new Thread() {
    @Override
    public void run() {
        childProcess.destroy();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T07:09:14.397

好像没有办法！

# android - 无法在处理方法中比较串行数据

> ID：10396097
> 
> 赞同：0
> 
> 时间：2012-05-01T09:54:11.943
> 
> 标签：android, serial-port

我正在根据串行连接数据制作警报系统。我在 TextView 中显示数据。另外，如果数据达到20，我想激活`alarm`and`sendSMS`方法。这是`Handle`方法中的代码：

```
case MESSAGE_READ:
    byte[] readBuf = (byte[]) msg.obj;              

    // construct a string from the valid bytes in the buffer
    String readMessage = new String(readBuf, 0, msg.arg1);

    mTextView.setText(readMessage);
    if (readMessage.equals(20))
    {
        alarm();
        sendSMS();
    }
    break; 
```

当`TextView`显示 20 时，应用程序不会调用`alarm`and`sendSMS`方法。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:56:31.670

看起来您正在将字符串与 int 进行比较，试试这个

```
readMessage.equals("20") 
```

# ruby-on-rails-3 - 检查日期不为空？（导轨，arel）

> ID：10396107
> 
> 赞同：3
> 
> 时间：2012-05-01T09:55:02.487
> 
> 标签：ruby-on-rails-3, arel

如果填写了日期（如 in，不为空），您如何签入 Rails3（有或没有 Arel）？我知道你可以通过使用来做到这一点：

```
obj.where('PLANNED IS NOT NULL') 
```

但是可以不使用 SQL 吗？

```
// SQL 
SELECT * FROM projecttasks WHERE planned IS not null 
```

我试过：

```
# all tasks which have a date
tasks = Projecttask.where(:planned => !nil) 
```

或者

```
# all task with no planned date (sql: is null)
Projecttask.where(:planned => nil) 
```

但这不起作用。通常，如何在 NULL 和 NON NULL 列上执行“位置”。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-07T08:39:24.657

在 Rails 3 中：`Projecttask.where('planned IS NOT NULL')`

在 Rails 4 中，有一个新[`where.not`](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods/WhereChain.html#method-i-not)方法。

```
Projecttask.where.not(planned: nil)

User.where.not(name: nil)
# SELECT * FROM users WHERE name IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T16:25:39.730

您可以检查这个类似的问题以获得答案。Ryan Bigg 的答案是我猜你正在寻找的。

[Rails where 条件使用 NOT NULL](https://stackoverflow.com/questions/4252349/rail-3-where-condition-using-not-null)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:59:35.837

由于我主要使用 Mongoid，所以我对 ActiveRecord 不是很流利，但我认为您可以在这里找到答案：http: [//guides.rubyonrails.org/active_record_querying.html#conditions](http://guides.rubyonrails.org/active_record_querying.html#conditions)

我猜你必须使用字符串条件，如`where("planned is not null")`

# php - 多次调用 cURL

> ID：10396108
> 
> 赞同：0
> 
> 时间：2012-05-01T09:55:03.860
> 
> 标签：php, curl

我有一个`cURL`执行 a 的页面，需要几秒钟才能完成。
我想知道如果很少有用户同时访问该页面，服务器会发生什么。
我的猜测是每个用户都会有他/她自己的时间（比如 5 秒），但它不应该影响彼此的等待时间，还是应该这样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T09:57:54.093

是的当然。因为它是多线程的。请求之间不会相互干扰（如果它们不是太多）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:58:01.357

这一切都取决于资源。

如果由于文件 I/O 繁重而处理您的请求需要 5 秒钟，则同时请求可能会减慢其他请求的速度，从而使每个请求所需的时间加倍。

带宽也是如此：您请求的数据是否很多？然后，考虑到上游服务器可以分配给单个连接的最大带宽及其总带宽，多个同时请求可能会相互影响。

此外，当请求（结果）的处理占用（相对）大量处理器时间时，一次触发多个请求会减慢每个请求的速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T09:58:03.823

不可能说，因为有太多未知因素¹，最明显的是在任何一个 5 秒间隔内击中您的用户数量。但是对于极少数的用户来说应该没问题。

¹ 例如：您的设置可以/将同时服务多少个请求？远程`curl`目标呢？

# javascript - 从 HTML 中完全删除匹配的字符串

> ID：10396110
> 
> 赞同：-1
> 
> 时间：2012-05-01T09:55:18.503
> 
> 标签：javascript, html

我正在构建一个具有二级导航的网站，其中应用了相当多的 div 和样式。问题是，有些页面没有子页面，所以子导航是空的，看起来有点奇怪。

我无法找到一个简单的脚本来删除 html。

这是我要删除的代码：

```
<div class="sub_nav"><div class="track_nav_style_1">
<div class="track_nav_links">
<ul></ul>
</div>
</div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:08:36.367

我会尝试用css来做。就像是：

```
.track_nav_links ul{
  padding: 0;
  height: auto;
  /* background styles and others can be applied, but won't be visible unless the list has content */
}

.track_nav_links ul li{
  /* Use the css on these elements to determine height, style etc */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:09:07.077

我真的希望我说对了，如果是这样，我建议使用一个简单的 jQuery 脚本。`<head>`在您的部分中包括以下内容。

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script language="javascript" type="text/javascript">
    google.load('jquery', '1.7.1');
</script> 
```

如果下面没有，以下脚本将删除`<ul>`容器`<li>`。

```
 if ($('.track_nav_links ul li').length == 0)
        $('.track_nav_links ul').remove(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T10:09:09.197

这是一个 Python 脚本：

导入操作系统

```
snippet = """<div class="sub_nav"><div class="track_nav_style_1">
<div class="track_nav_links">
<ul></ul>
</div>
</div></div>"""

def remove_code_snippet_from_file(file_name):
    f = open(file_name, 'r+')
    old_code = f.read()
    f.close()
    f = open(file_name, 'w')
    f.write(old_code.replace(snippet, ''))
    f.close()

if __name__ == "__main__":
    for file_name in os.listdir(os.getcwd()):
        if file_name.endswith('.html'):
            remove_code_snippet_from_file(file_name) 
```

# ruby-on-rails-3 - Rails 3中的批量插入查询

> ID：10396111
> 
> 赞同：1
> 
> 时间：2012-05-01T09:55:19.813
> 
> 标签：ruby-on-rails-3

我需要在我的数据库中插入数千条记录，并且由于这些插入查询，页面需要很长时间才能重新加载。

如何使我的页面加载更快并同时运行所有插入查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:02:10.593

有一个 gem 可以让你批量插入：[https ://github.com/zdennis/activerecord-import](https://github.com/zdennis/activerecord-import)

否则，也许您可​​以在后台作业中进行插入。

# jquery - 除非所有表单字段都已完成，否则不要执行 jQuery

> ID：10396113
> 
> 赞同：1
> 
> 时间：2012-05-01T09:55:27.450
> 
> 标签：jquery, validation

我有一个非常大的表格，由大约 40 个问题组成。我将问题分成几部分，每部分 10 个，每个部分都包含在一个 div 中。

我正在使用 jQuery 将 div 滑入和滑出

```
 $('a.nextform').click(function(e){  
       $('.hold-all').animate({"left": "-=690"}, 500);
        e.preventDefault();
    })
 $('a.backform').click(function(e){  
       $('.hold-all').animate({"left": "+=690"}, 500);
       e.preventDefault();
    }) 
```

我想以某种方式说，如果要求的字段已经完成，不允许用户单击下一步，这可能与 jQuery 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:59:50.660

给输入一个id，例如`<input id='name' type='text'/>`

然后检查它是否为空使用

`$('#name').val()`

例子

```
if($('#name').val() != ''){
//do
}
else
{
//dont do
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T09:59:58.720

您可以使用 JQuery 在按钮输入上设置属性 disabled="disabled"：[参见 w3schools](http://www.w3schools.com/tags/att_input_disabled.asp)例如`$(button).attr('disabled', 'disabled')`。您还可以将处理程序放在`$(form).submit`和 preventDefault 上并返回 false。您还可以`return false`在上面的单击处理程序上执行操作，以防止执行更多的单击代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:00:45.070

您可能还想将验证分解为多个阶段，即在输入全部在当前 div 上验证之前不要移动到下一个 div。

您可以使用各种用于 jquery 表单验证的插件，您可以从[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)开始。

然后您可以使用 .valid() 来检查是继续前进还是显示错误，这是一个简单粗略的示例：

```
$('a.nextform').click(function(e){ 
if ("#myform").valid()) {
$('.hold-all').animate({"left": "-=690"}, 500);
    e.preventDefault();
}
}
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T10:01:23.243

当然。遍历每个输入字段 - 您可以使用字段集对它们进行分组并使用类似 .children('input, textarea') 的东西 - 检查每个输入并验证给定输入是否有值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T10:04:54.287

如果您为所有表单字段手动编写此代码，那将是疯狂且难以维护的。在列表中添加或删除字段很快就会使该过程难以维护、管理和跟踪。

您面临的问题是一个常见问题，也是一个已解决的问题：“验证”

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

基本上将css类“必需”添加到任何必填字段。调用在表单或表单容器上运行验证插件。

当用户单击 Next 调用 $("form#questions").validate()

如果 validate 返回 true，则将下一个 div 滑入。如果返回 false，则不要。验证插件还可以在验证失败的字段末尾添加验证消息，和/或提供失败约束的验证摘要消息：有关更多详细信息，请参阅文档。

[http://jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)

# python - 从 Django 项目启动多个 Django 开发服务器

> ID：10396121
> 
> 赞同：3
> 
> 时间：2012-05-01T09:56:26.963
> 
> 标签：python, django, fork, os.system

我正在为 Django 项目编写一个基于 Web 的代码编辑器。我想从编辑器中启动 Django runserver 命令，而不会干扰编辑器本身的服务器。下面是我使用的代码。服务器（端口 9999）已启动，但是当我更改我刚刚启动的服务器的项目的代码时，两个服务器都停止了。错误是“该端口已在使用中”

```
def runserver(request, project_slug):
    project = Project.objects.get(slug=project_slug)
    import os
    os.system('cd %s; pwd; env; DJANGO_SETTINGS_MODULE=%s.settings; rm nohup.out; nohup python manage.py runserver 0.0.0.0:9999 &' % (project.get_current_directory(), project.slug))
    return HttpResponseRedirect(request.META['HTTP_REFERER']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:44:52.963

您需要投入更多工作来管理您启动的服务器。如果您`runserver(request, project_slug)`多次调用，该资源将已被绑定到该端口的另一个后台进程占用，而现在您甚至没有 PID 文件来引用该进程。

您需要添加一些体操来启动/终止[WSGIServer](https://code.djangoproject.com/browser/django/tags/releases/1.4/django/core/servers/basehttp.py#L113)，并且您肯定需要使用[`socket`](http://docs.python.org/library/socket.html)低级网络库让它[为您选择一个空闲端口——](https://stackoverflow.com/questions/1365265/on-localhost-how-to-pick-a-free-port-number)推迟手动选择一个端口，因为您不能保证您系统上的其他进程不会占用该端口并导致您的应用程序进入不可恢复的错误状态。

不过幸运的是，您有一个开源的[Lettuce](http://lettuce.it/index.html)项目，它可以在单独的线程上在后台正确管理 Django 服务器实例。这是[server 的实际代码](https://github.com/gabrielfalcao/lettuce/blob/master/lettuce/django/server.py)，我鼓励您查看并用于您自己的目的。

# objective-c - 单例中的 IBOutlet 变量

> ID：10396125
> 
> 赞同：0
> 
> 时间：2012-05-01T09:56:51.847
> 
> 标签：objective-c, singleton, iboutlet

新手警告 - 我正在尝试创建一种方法来更新跨多个文件的多种方法显示的信息。我是 Obj-C 的新手，但在 C 中这很简单——使用函数调用。

似乎单例设计模式是解决方案 - 创建一个更新显示信息的单例，并且单例方法“全局”可用并更新 IBOutlet 变量。有一个显示对象，可以通过系统中的任何方法对其进行操作。

这似乎不起作用。我怀疑这是由于我对单例如何处理 IBOutlet 变量的误解。也许在 IB 中建立的连接在单例中不起作用？

这肯定是一个常见问题——从多个对象访问用户界面？这个问题的优雅解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:09:11.430

IB 不处理单例。但是你有一些选择：

您可以调用单例的方法，用于连接 IBAction 方法。

[或类似的：在该 IBAction 方法中，您可以通过 NSNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)广播通知。

要从不同的类通知您的 UI 发生了更改，请为您的视图控制器创建一个[协议](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Protocol.html#//apple_ref/doc/uid/TP40008195-CH45-SW1)并创建一个符合此协议的[委托。](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)

并且帮自己一个忙：坚持可可所依赖的[MVC 模式。](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)否则，您将与框架抗争，而不是使用它。

# python - Python unittest设置函数'未定义'

> ID：10396130
> 
> 赞同：2
> 
> 时间：2012-05-01T09:57:06.560
> 
> 标签：python, scope

对于某人来说，几乎可以肯定这里有一些简单的点。我已经使用 Python 大约一周了，`NameError: global name '_build_response' is not defined`当我尝试调用一个函数来在我的单元测试中构建一个文本夹具时，我得到了一个。一直在为此挠头，代码片段如下所示：

```
class HttpTestCase(unittest.TestCase):   

  def _build_response():
    #build and returns some text fixtures

  def test_http_get(self): 
    response = _build_response() 
```

我对继承或作用域的理解是否遗漏了一些东西，还是有一些更尴尬的东西？任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T09:57:54.327

```
class HttpTestCase(unittest.TestCase):   

  def _build_response(self):           
      # build and returns some text fixtures
      pass

  def test_http_get(self): 
      response = self._build_response() 
```

`_build_response`是`HttpTestCase`类的方法

# excel - 删除日期范围以外的内容

> ID：10396137
> 
> 赞同：3
> 
> 时间：2012-05-01T09:57:55.163
> 
> 标签：excel, vba

我有大量信息，并且以开始和结束日期列的形式输入了一些信息。我想要说的是，如果您在所选日期范围之外然后删除单元格的内容，右侧 3 和左侧 -4。所以 -4 在开始日期的左边和 3 在结束日期的右边。

我开始了，但如果您不在我的单元格日期范围内，我在删除时遇到问题

```
Private Sub cmdFilter_Click()
' Function to filter dates between text boxes, deletes all not in the range

Dim stStart As String, stEnd As String
Dim dbStart As Double, dbEnd As Double

Application.ScreenUpdating = 0
'Turn off screen updating until process done so it doesnt flicker

stStart = txtStart.Value
stEnd = txtEnd.Value

If Not IsDate(stStart) Or Not IsDate(stEnd) Then
    MsgBox "Invalid Dates", vbExclamation, "Input Error"
    GoTo ExitSub
End If

dbStart = CDbl(CDate(stStart))
dbEnd = CDbl(CDate(stEnd))

' change to highlight cell for time being

INSERT DELETE IF OUT OF RANGE HERE? 

ExitSub:
Application.ScreenUpdating = 1

End Sub 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:52:13.980

如果你想删除整个行，你可以使用 SpecialCells 和一个额外列中的公式来执行此操作，这会引发错误......

我想我是在 Excel MVP Ron De Bruin 的网站上看到的：[SpecialCells](http://www.rondebruin.nl/specialcells.htm)

那是你要找的吗？

# python - 使用`os.path.exists`的奇怪`UnicodeEncodeError`

> ID：10396141
> 
> 赞同：14
> 
> 时间：2012-05-01T09:58:09.360
> 
> 标签：python, apache, unicode, flask

在 Web 应用程序（使用 Flask）中，我收到以下错误：

```
Unable to retrieve the thumbnail for u'/var/data/uploads/2012/03/22/12 Gerd\xb4s Banjo Trio 1024.jpg'
Traceback (most recent call last):
 File "/var/www/beta/env/lib/python2.7/site-packages/dblib-1.0dev3-py2.7.egg/dblib/orm/file.py", line 169, in get_thumbnail
   if not exists(filename):
 File "/usr/lib/python2.7/genericpath.py", line 18, in exists
   os.stat(path)
UnicodeEncodeError: 'ascii' codec can't encode character u'\xb4' in position 52: ordinal not in range(128) 
```

请注意，我`repr()`在记录的错误中包含文件名。这表明文件名是作为 Unicode 实例传递的。这么多是对的...

如果我使用 python 解释器运行罪魁祸首，它会按预期工作：

```
>>> from os.path import exists
>>> exists(u'/var/data/uploads/2012/03/22/12 Gerd\xb4s Banjo Trio 1024.jpg')
True 
```

很明显，在 Flask 环境中运行时，Python 认为它应该使用 ASCII 编解码器而不是 UTF-8 对文件名进行编码。我在 Apache httpd 后面使用 mod_wsgi 部署了应用程序。

我想我必须告诉他们中的任何一个在某处使用 UTF-8？但是哪里？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-01T10:22:41.840

有关相同问题，请参阅 Django 文档。使用 mod_wsgi 时，应该是相同的解决方案：

[https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#if-you-get-a-unicodeencodeerror](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#if-you-get-a-unicodeencodeerror)

以上链接文档的摘录：

> [...] 您必须确保用于启动 Apache 的环境配置为接受非 ASCII 文件名。如果您的环境未正确配置，则在调用`os.path`包含非 ASCII 字符的文件名中的函数时，您将触发 UnicodeEncodeError 异常。
> 
> 为避免这些问题，用于启动 Apache 的环境应包含类似于以下的设置：
> 
> ```
> export LANG='en_US.UTF-8'
> export LC_ALL='en_US.UTF-8' 
> ```
> 
> 请查阅您的操作系统的文档，了解放置这些配置项的适当语法和位置； `/etc/apache2/envvars`是 Unix 平台上的常见位置。将这些语句添加到环境后，重新启动 Apache。

# asp.net-mvc - 带有部分视图的 MVC 分页

> ID：10396145
> 
> 赞同：4
> 
> 时间：2012-05-01T09:58:30.740
> 
> 标签：asp.net-mvc, paging

我是一个相对较新的 MVC 用户，并且很难让分页在 MVC 中正常工作。

基本上，我有大量搜索结果，它们以部分视图呈现（使用像这样的开始表单方法）：

```
using (Ajax.BeginForm("Search", "Home", new AjaxOptions
{
    HttpMethod = "GET",
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "searchResults",
}))
{
    <input type="text" name="searchString" />
    <input type="submit" value="Search" />
} 
```

部分视图是这样渲染的：

```
@foreach (var item in @Model) 
```

{

```
<li>@Html.ActionLink(item.Name, "Result/" + item.Id, "Result")</li>

}

@{if(ViewBag.HasPrevious)
    {
        @Html.ActionLink("<<", "Search", new { searchString = ViewBag.query, page = ViewBag.CurrentPage-1 })
    }
}

@{if(ViewBag.HasNext)
    {
        @Html.ActionLink(">>", "Search", new {  searchString = ViewBag.query, page = ViewBag.CurrentPage+1 })
    }
} 
```

我的问题是 >> 或 << 链接只是创建一个带有结果列表的空白页面，并且不会保留“顶部”索引页面的标记。

有没有人对此有任何想法。

注意是这个网站的新手，我会支持任何答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T10:00:32.153

`Html.ActionLink`生成一个正常的锚。当您单击此锚点时，它只会将浏览器重定向到此链接指向的地址。这就是您在新窗口中看到部分内容的原因。

如果您只想刷新页面的一部分而不进行重定向，您可以使用 AJAX 链接 ( `Ajax.ActionLink`) 代替：

```
@Ajax.ActionLink(
    "<<", 
    "Search", 
    new { 
        searchString = ViewBag.query, 
        page = ViewBag.CurrentPage - 1 
    },
    new AjaxOptions
    {
        HttpMethod = "GET",
        InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "searchResults"
    }
) 
```

# sql - 计算 SQLite 上的标记行数

> ID：10396147
> 
> 赞同：2
> 
> 时间：2012-05-01T09:58:39.117
> 
> 标签：sql, sqlite

我正在使用 SQLite。

我有一张简单的桌子

```
id  flag     
1   y   
2   y   
1   n   
2   y   
3   n 
```

我需要创建一个应该给出标记行数的查询

```
id No
1  1
2  2
3  0 
```

如果我使用

```
 SELECT  Table1.ID as ID, Count(Table1.id) AS No
    FROM Table1
    WHERE (((Table1.[flag])=True))
    GROUP BY ID; 
```

将`GROUP BY`忽略 id=3。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:02:34.127

你快到了：代替`COUNT`，使用`SUM`，并将你的`where`子句作为条件移动到它里面。

这应该有效：

```
SELECT  Table1.ID as ID, SUM(case when (Table1.[flag])=True then 1 else 0 end) AS No
FROM Table1
GROUP BY ID; 
```

# zend-framework - Zend Framework 中使用 DbUnit 扩展进行数据库测试时缺少抽象方法错误

> ID：10396149
> 
> 赞同：3
> 
> 时间：2012-05-01T09:58:55.140
> 
> 标签：zend-framework, phpunit, dbunit

使用 phpUnit 在 Zend Framework 中运行一些基本数据库测试后出现以下错误

```
PHP Fatal error:  Class Zend_Test_PHPUnit_Db_Metadata_Generic contains 2 abstract methods and must therefore be declared abstract or implement the remaining methods (PHPUnit_Extensions_Database_DB_IMetaData::disablePrimaryKeys, PHPUnit_Extensions_Database_DB_IMetaData::enablePrimaryKeys) in D:\www\~library\zend_latest\library\Zend\Test\PHPUnit\Db\Metadata\Generic.php on line 167 
```

我的测试与 ZF 文档中的测试非常相似：

```
class BugsTest extends Zend_Test_PHPUnit_DatabaseTestCase
{
private $_connectionMock;

/**
 * Returns the test database connection.
 *
 * @return PHPUnit_Extensions_Database_DB_IDatabaseConnection
 */
protected function getConnection()
{
    if($this->_connectionMock == null) {
        $connection = Zend_Db::factory(...);
        $this->_connectionMock = $this->createZendDbConnection(
            $connection, 'zfunittests'
        );
        Zend_Db_Table_Abstract::setDefaultAdapter($connection);
    }
    return $this->_connectionMock;
}

/**
 * @return PHPUnit_Extensions_Database_DataSet_IDataSet
 */
protected function getDataSet()
{
    return $this->createFlatXmlDataSet(
        dirname(__FILE__) . '/_files/bugsSeed.xml'
    );
}
} 
```

我对这个问题的“解决”是不要`PHPUnit_Extensions_Database_DB_IMetaData`在`Zend_Test_PHPUnit_Db_Metadata_Generic`图书馆里实施。现在一切正常，但我想知道是否有任何适当的方法来解决这个问题。

我正在使用 ZF 11.11、phpUnit 3.6.10 和 DbUnit 1.1.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:23:53.933

有一种更简单的替代方法可以在不卸载最新版本的情况下将 PHPUnit 降级到 3.4 或 3.5（在[http://framework.zend.com/issues/browse/ZF-11828](http://framework.zend.com/issues/browse/ZF-11828)中提到）。

另一种方法是运行多个版本的 PHPUnit。例如，要将 PHPUnit/3.5 安装到`/opt`目录中：

```
sudo pear config-set auto_discover 1
sudo pear install --installroot /opt/phpunit35 pear.phpunit.de/PHPUnit-3.5.15
sudo ln -s /opt/phpunit35/usr/bin/phpunit /usr/local/bin/phpunit35 
```

安装后，手动编辑`/opt/phpunit35/usr/bin/phpunit`以正确设置包含路径。将以下内容添加到文件顶部：

```
// Ubuntu / Debian
set_include_path(implode(PATH_SEPARATOR, array(
    dirname(__FILE__) . '/../share/php',
    get_include_path()
)));

// CentOS
set_include_path(implode(PATH_SEPARATOR, array(
    dirname(__FILE__) . '/../share/pear',
    get_include_path()
))); 
```

PHPUnit/3.5 现在可以从命令行通过执行`phpunit35`.

注意ZF/1.11官方支持的版本是PHPUnit/3.4；但是，我更喜欢使用 3.5，因为它具有一些似乎不会破坏兼容性的额外功能。

最后，更新任何构建脚本（例如 Jenkins、Makefiles 或 IDE 项目）以指向`phpunit35`而不是`phpunit`在运行测试套件时指向。

另见：[http ://tech.vg.no/2011/11/29/running-multiple-versions-of-phpunit/](http://tech.vg.no/2011/11/29/running-multiple-versions-of-phpunit/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:54:55.280

Zend 1.11 不支持 PHPUnit 3.6，你需要降级做 PHPUnit 3.5 或 3.4。

[尝试按照http://dustyreagan.com/downgrade-phpunit-3-6-to-3-5-15/](http://dustyreagan.com/downgrade-phpunit-3-6-to-3-5-15/)中所示的特定顺序卸载并重新安装 PHPUnit 及其依赖项

另外，请参阅[http://framework.zend.com/issues/browse/ZF-11781](http://framework.zend.com/issues/browse/ZF-11781)

# asp.net-mvc - $.post 不工作，我在萤火虫中没有得到答案

> ID：10396150
> 
> 赞同：0
> 
> 时间：2012-05-01T09:59:14.827
> 
> 标签：asp.net-mvc, jquery, getjson

我正在尝试从我的 asp.net mvc webservice 接收一些 json。ASP.NET：

```
 public JsonResult getMessagesFromFriend(string email, string friendmail) {
        DataLayer.Repository.Classes.DataLayer dl = DataLayer.Repository.Classes.DataLayer.Instance;
        return Json(dl.getMessagesFromFriend(email, friendmail);
    } 
```

当我使用 http 分析器发送测试帖子消息时，我得到：

```
 Tue May 01 11:24:59 CEST 2012
    ----------------------------------------
    POST http://xxx.xxx.xxx.xxx/tracy/chat/getMessagesFromFriend?email=linsy&friendmail=djcarre
    HTTP/1.1 200 OK
    Cache-Control: private
    Content-Type: application/json; charset=utf-8
    Server: Microsoft-IIS/7.5
    X-AspNetMvc-Version: 4.0
    X-AspNet-Version: 4.0.30319
    X-Powered-By: ASP.NET
    Date: Tue, 01 May 2012 09:25:04 GMT
    Content-Length: 309

    ----------------------------------------
    ----------------------------------------
    [{"sender":"viagsm","receiver":"djcarre","datetime":"28/04/2012 16:55:33","message":"msg1"},{"sender":"viagsm    ","receiver":"djcarre","datetime":"28/04/2012 16:55:59","message":"msg2"},{"sender":"Philippe C","receiver":"linsy","datetime":"28/04/2012 16:56:10","message":"test3"}]
    ---------------------------------------- 
```

所以它返回了我的json。我的 javascript 代码如下所示：

```
 $.post("http://xxx.xxx.xxx.xxx/tracy/chat/getMessagesFromFriend?email=linsy&friendmail=djcarre", function(data) {
     if (data.length > 0) {
                  for (x in data) {
                      $("#chatarea").html(
                      $("#chatarea").html() +
                      "<p><b>" +
                      data[x].sender + "</b>" + 
                      " (" + data[x].datetime.match(/(\d+:\d+:\d+)/)[1] + ") : " + 
                      data[x].message + "</p>");
                  }
              }
    }, "json"); 
```

}

当我查看萤火虫时，帖子已发送，我得到 200 好，但答案保持为空。我也试过 $.ajax 和

```
 error:function(jqXHR, textStatus, errorThrown){
        alert(errorThrown);
    } 
```

但我只收到一个空警报，所以有一个错误，但我不知道是哪一个以及如何解决它。我希望有人知道如何帮助我。

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:08:09.123

您似乎为您的 AJAX 请求指定了一个绝对地址：

```
http://xxx.xxx.xxx.xxx/tracy/chat/getMessagesFromFriend?email=linsy&friendmail=djcarre 
```

由于浏览器内置的[相同来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，您无法发送跨域 AJAX 请求。根据您对远程域的控制级别，有[几种解决方法。](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:08:13.107

$.post(url, para, successFunction, ErrorFunction);
您忘记将参数放入函数中。所以它不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:15:29.570

是的，正如 Darin 所提到的，您应该注意原始策略，因此您的 ajax 调用应该位于您为编写 javascript 的页面提供服务的同一域和子域上。

另一种跟踪方法是： - 检查您的 ajax 调用是否到达服务器？为此，您可以更新 db 中的某些表，也可以将包含 POST 数据内容的文件放在本地驱动器上，然后转储为带有时间戳的文件。如果此步骤失败，则意味着您的请求根本没有到达服务器，因此您应该查看它是否是跨站点 ajax 问题，为此您需要通过将文件放在您所在的同一台服务器上来修复它为您的页面提供服务，然后使用 ASP.NET 通过您的服务器调用实际的服务/页面内容。

*   如果先前的检查通过并查看您发送的内容，还请确保您转储您发送的任何输出。

这应该有帮助，祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T08:53:24.930

经过大量搜索后，我发现了这一点：[Ajax json post to Controller across domain, "not allowed by" Access-Control-Allow-Headers](https://stackoverflow.com/questions/7547672/ajax-json-post-to-controller-across-domains-not-allowed-by-access-control-all) 它为我的问题提供了解决方案。

因为我的脚本在手机上运行，​​而 web 服务在远程服务器上，所以我不得不使用 jsonp。谢谢您的帮助 ！

# c# - 提高 WPF 控件加载资源的性能

> ID：10396151
> 
> 赞同：8
> 
> 时间：2012-05-01T09:59:15.310
> 
> 标签：c#, .net, wpf, wpf-controls, devexpress

我目前在应用程序中大量使用 DevExpress 控件。控件很棒，并且大大加快了开发时间（因此，我不想放弃它们）但是，我对它们的性能有一些问题。

我的应用程序是一个 Shell/Modules/Views&ViewModels 应用程序（它遵循您在 Prism 中可以找到的许多设计模式）。

首次加载视图时，需要很长时间才能显示（在我的一些用户 PC 上使用慢速机器，我们所说的只是挂在那里 5 秒以上）。所花费的时间显然取决于 DX 控件的使用（有多少应用程序以前从未见过）。

当您销毁视图并重新打开它时，它会在不到一秒的时间内打开。我的测试用例/性能配置文件中的 ViewModel 每次都重新创建 - 因此在视图调用之间我的代码中没有共享状态（没有单例注入对象）。

经过一番讨论和研究，我似乎已将问题缩小到按需加载 DX 控件的模板文件。这里有一个线程： [http](http://www.devexpress.com/Support/Center/Issues/ViewIssue.aspx?issueid=Q382256) ://www.devexpress.com/Support/Center/Issues/ViewIssue.aspx?issueid= Q382256 参考： http: [//www.devexpress.com/Support/Center/p/](http://www.devexpress.com/Support/Center/p/B201967.aspx) [WPF 加载时间的](https://stackoverflow.com/questions/6199093/devexpress-controls-for-wpf-load-time)[B201967.aspx](http://www.devexpress.com/Support/Center/p/B201967.aspx)和DevExpress 控件 这些线程中描述的解决方案是显示加载指示器或在启动时使用带有控件的隐藏窗口。这两个选项都不是我想做的事情（有趣的是，当我尝试一个简单的示例时，隐藏窗口选项似乎没有获得太多性能 - 这也表明我可能遗漏了一些东西）。

我希望做的是在后台线程上预加载我知道我需要的模板文件。有什么办法可以在 WPF 中做到这一点？（我认为这更像是一个通用的 WPF 东西，而不是 DevExpress 的东西——即使它需要在 DX 库本身中实现）。

对我或 DevExpress 的人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-06T10:10:16.333

您可以在后台线程中执行的操作是预加载所有必需的程序集。还要确保它们是 nged-ed。UI 控件需要从 UI 线程初始化。

# mysql - MySQL（HeidiSQL）：使用 localhost 但 10 秒的查询时间是“网络”？

> ID：10396164
> 
> 赞同：2
> 
> 时间：2012-05-01T10:00:41.247
> 
> 标签：mysql

我正在使用 heidiSQL 编辑器运行 mySQL 查询。当它告诉我我的查询时间时，它有时还会包括网络时间：

1 个查询的持续时间：1.194 秒。（+ 10.078 秒网络）

但它不可能真的是网络，因为一切都在我自己的电脑上？额外的时间是否会随着其他设置而消失，或者我是否需要以通常的方式（重写/返工）提高我的查询性能？当我什至不确定是什么导致性能不佳时，我很难提高查询的性能。

编辑：分析信息

我使用了这个简洁的分析 sql：[http ://www.mysqlperformanceblog.com/2012/02/20/how-to-convert-show-profiles-into-a-real-profile/](http://www.mysqlperformanceblog.com/2012/02/20/how-to-convert-show-profiles-into-a-real-profile/)

查询一：

从 my_table_with_100_thousand_rows 中选择 count(*)；

“1 次查询的持续时间：0.390 秒。” （这个没有显示任何网络时间，但对于一个简单的计数（*）来说，几乎 0.4 秒似乎很多。）

```
STATE                    Total_R    Pct_R   Calls    R/Call
Sending data            0.392060    35.84   1    0.3920600000
freeing items           0.000214    0.02    1    0.0002140000
starting                0.000070    0.01    1    0.0000700000
Opening tables          0.000031    0.00    1    0.0000310000
statistics              0.000024    0.00    1    0.0000240000
init                    0.000020    0.00    1    0.0000200000
(shorter times not included) 
```

查询 2：

select * from 4 个多行表，由 primary_key-foreign_key 或索引列连接。

“1 次查询的持续时间：0.156 秒（+ 10.140 秒网络）”（以下时间加起来超过总数？）

```
STATE           Total_R    Pct_R    Calls    R/Call
Sending data    16.424433    NULL    1    16.4244330000
freeing items   0.000390    NULL    1    0.0003900000
starting        0.000116    NULL    1    0.0001160000
statistics      0.000054    NULL    1    0.0000540000
Opening tables  0.000050    NULL    1    0.0000500000
init            0.000046    NULL    1    0.0000460000
preparing       0.000033    NULL    1    0.0000330000
optimizing     0.000028    NULL    1    0.0000280000
(shorter times not included) 
```

查询 3：与查询 2 相同，但使用 count * 而不是 select *

“1 个查询的持续时间：10.047 秒。”

```
STATE         Total_R   Pct_R  Calls  R/Call
Sending data  10.050007 NULL   1     10.0500070000
(shorter times not included) 
```

在我看来，如果它必须显示很多行，它在“持续时间”中包括网络时间，但这并不意味着如果它不必显示行，我可以减去这个时间。这是真正的查询时间。这看起来对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-03T11:43:27.903

老问题！我很确定海蒂将经过的时间算作“网络时间”——

*   从通过网络接收到第一个响应数据包
*   接收到结果集中的最后一个响应包。

因此，对于您的`SELECT COUNT(*) FROM big _f_table` 查询，第一个数据包立即返回，并声明有一个包含整数的列。

当查询引擎完成对行的计数时，该结果集的其余部分就出现了。所以海蒂所谓的“网络时间”就是计算行数的时间。这对于 MyISAM 来说几乎是瞬时的，而对于 InnoDB 则需要一段时间。

对于你`SELECT tons of columns FROM complex join`同样的事情适用。当查询计划器确定结果集中将包含哪些列时，第一个数据包到达。当所有数据最终通过计算机的内部环回 (localhost) 网络传输到 Heidi 时，最后一个数据包到达。

就像您在浏览器开发工具中看到的一样。查询时间类似于“到第一个字节的时间”，“网络时间”是传递其余结果的时间。第一个字节的时间是查询解析/计划时间加上获取足够信息以发送结果集元数据的时间。网络时间是得到休息的时间。如果查询计划器可以直接从表存储中将行流式传输给您，您将拥有很高比例的网络时间。另一方面，如果它必须处理数据（例如使用 ORDER BY），您将有更高比例的查询时间。但不要试图过度思考这些东西。MariaDB 和 MySQL 非常复杂，具有缓存和获取层。他们满足查询的方式有时很难弄清楚。

# sql - 如何用同一列中的最后一个 NOT NULL 值替换结果集中的 NULL？

> ID：10396167
> 
> 赞同：5
> 
> 时间：2012-05-01T10:00:55.163
> 
> 标签：sql, tsql, sql-server-2005

我的一个同事有一个 sql 查询的问题：-

以以下为例，两个临时表：-

```
select 'John' as name,10 as value into #names
UNION ALL SELECT 'Abid',20 
UNION ALL SELECT 'Alyn',30 
UNION ALL SELECT 'Dave',15;

select 'John' as name,'SQL Expert' as job into #jobs
UNION ALL SELECT 'Alyn','Driver' 
UNION ALL SELECT 'Abid','Case Statement'; 
```

我们在表上运行以下查询来给我们一个连接的结果集：-

```
select #names.name, #names.value, #jobs.job
FROM #names left outer join #jobs
on #names.name = #jobs.name

name    value    job
John    10       SQL Expert
Abid    20       Case Statement
Alyn    30       Driver
Dave    15       NULL 
```

由于#jobs 表中不存在“Dave”，因此按预期为他提供了一个NULL 值。

我的同事想要修改查询，以便为每个 NULL 值赋予与前一个条目相同的值。

所以上面将是： -

```
name    value    job
John    10       SQL Expert
Abid    20       Case Statement
Alyn    30       Driver
Dave    15       Driver 
```

请注意，戴夫现在是“司机”

序列中可能有多个 NULL 值，

```
name    value    job
John    10       SQL Expert
Abid    20       Case Statement
Alyn    30       Driver
Dave    15       NULL
Joe     15       NULL
Pete    15       NULL 
```

在这种情况下，Dave、Joe 和 Pete 都应该是“Driver”，因为“Driver”是最后一个非空条目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T10:17:06.857

可能有更好的方法来做到这一点。这是我可以使用[公用表表达式 (CTE)](http://msdn.microsoft.com/en-us/library/ms190766.aspx)实现结果并使用该输出执行[OUTER APPLY](http://technet.microsoft.com/en-us/library/ms175156.aspx)以查找上一个 persion 的工作的方法之一。这里的查询用于`id`对记录进行排序，然后确定前一个人的工作是什么。您至少需要一个标准来对记录进行排序，因为表中的数据被视为无序集。

此外，假设序列中的第一个人应该有工作。如果第一个人没有工作，那么选择就没有价值。

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/0bcfe/4)

[**单击此处查看 SQL Fiddle 中的另一个演示，其中包含第二个数据集。**](http://sqlfiddle.com/#!6/daa11/3)

*脚本*：

```
 CREATE TABLE names
    (
            id      INT         NOT NULL IDENTITY
      ,     name    VARCHAR(20) NOT NULL
      ,     value   INT         NOT NULL
    );

    CREATE TABLE jobs
    (
            id  INT         NOT NULL
      ,     job VARCHAR(20) NOT NULL
    );

    INSERT INTO names (name, value) VALUES
      ('John', 10),
      ('Abid', 20),
      ('Alyn', 30),
      ('Dave', 40),
      ('Jill', 50),
      ('Jane', 60),
      ('Steve', 70);

    INSERT INTO jobs (id, job) VALUES
      (1, 'SQL Expert'),
      (2, 'Driver' ),
      (5, 'Engineer'),
      (6, 'Barrista');

    ;WITH empjobs AS
    (
        SELECT
        TOP 100 PERCENT n.id
                    ,   n.name
                    ,   n.value
                    ,   job
        FROM            names n 
        LEFT OUTER JOIN jobs j
        on              j.id = n.id
        ORDER BY        n.id
    ) 
    SELECT      e1.id
            ,   e1.name
            ,   e1.value
            ,   COALESCE(e1.job , e2.job) job FROM empjobs e1
    OUTER APPLY (
                  SELECT 
                  TOP 1     job 
                  FROM      empjobs     e2
                  WHERE     e2.id   < e1.id
                  AND       e2.job  IS NOT NULL
                  ORDER BY  e2.id   DESC
                ) e2; 
```

*输出*：

```
ID  NAME    VALUE  JOB
--- ------  -----  -------------
1   John      10   SQL Expert
2   Abid      20   Driver
3   Alyn      30   Driver
4   Dave      40   Driver
5   Jill      50   Engineer
6   Jane      60   Barrista
7   Steve     70   Barrista 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:48:04.553

“最后一个”非空条目是什么意思？您需要明确定义的“last”顺序才能具有一致的含义。这是一个带有数据定义的查询，它使用“值”列来定义最后一个，这可能与您想要的很接近。

```
CREATE TABLE #names
    (
            id      INT         NOT NULL IDENTITY
      ,     name    VARCHAR(20) NOT NULL
      ,     value   INT         NOT NULL PRIMARY KEY
    );

    CREATE TABLE #jobs
    (
            name  VARCHAR(20)         NOT NULL
      ,     job VARCHAR(20) NOT NULL
    );

    INSERT INTO #names (name, value) VALUES
      ('John', 10),
      ('Abid', 20),
      ('Alyn', 30),
      ('Dave', 40),
      ('Jill', 50),
      ('Jane', 60),
      ('Steve', 70);

    INSERT INTO #jobs (name, job) VALUES
      ('John', 'SQL Expert'),
      ('Abid', 'Driver' ),
      ('Alyn', 'Engineer'),
      ('Dave', 'Barrista');

with Partial as (
  select
  #names.name,
  #names.value,
  #jobs.job as job
  FROM #names left outer join #jobs
  on #names.name = #jobs.name
)
  select
    name,
    value,
    (
      select top 1 job
      from Partial as P
      where job is not null
      and P.value <= Partial.value
      order by value desc
    )
  from Partial; 
```

插入数据然后更新可能更有效。

# android - 如何在android中的自定义布局中获取总金额作为textview

> ID：10396169
> 
> 赞同：-2
> 
> 时间：2012-05-01T10:00:57.510
> 
> 标签：android, android-listview

我得到一个数组值 price qty 是 edittext 我设置为默认值 1。我希望 multiplay 作为 price 和 qty 和 setttext 作为总...

我试试这段代码

```
public class CustomAdapter extends BaseAdapter
{
    int x;
    integer[] a;
    public static ArrayList<String> arr1=new ArrayList<String>();
    public static ArrayList<String> itemprice=new ArrayList<String>();
    public static ArrayList<Bitmap> itemimage=new ArrayList<Bitmap>();
    public Context Context;
    private LayoutInflater inflater;
    String total;

    HashMap<String, String> map = new HashMap<String, String>();
    public CustomAdapter(Context context, ArrayList<String> arr,ArrayList<String>     price,ArrayList<Bitmap> image) 
    {
        Context=context;
        inflater=LayoutInflater.from(context);
        arr1=arr;
        itemprice=price;
        itemimage=image;
        System.out.println(itemprice);
        System.out.println("arr: " + arr.size());

    }
    public int getCount() 
    {
        // TODO Auto-generated method stub
        return arr1.size();

    }

    public Object getItem(int position) 
    {
        // TODO Auto-generated method stub
        return arr1.get(position);
    }

    public long getItemId(int position) 
    {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) 
        {
        System.out.println(arr1.get(position));

          final  ViewHolder holder;

            if (convertView == null) 
            {
                convertView = inflater.inflate(R.layout.selecteditemlistview, null);
                holder = new ViewHolder();

                holder.textViewSelectedText = (TextView)convertView.findViewById(R.id.selectedtext);
                holder.price=(TextView)convertView.findViewById(R.id.selectitemprice);
                holder.image=(ImageView)convertView.findViewById(R.id.selectitemimagge);
                holder.qty=(EditText)convertView.findViewById(R.id.selectqty);
                holder.total=(TextView)convertView.findViewById(R.id.totalamount);
                convertView.setTag(holder);
            }
            else 
            {
                holder = (ViewHolder) convertView.getTag();
            }
            String amount=holder.qty.getText().toString();

            holder.textViewSelectedText.setText(arr1.get(position));
            holder.price.setText(itemprice.get(position));
            holder.image.setImageBitmap(itemimage.get(position));
            holder.total.setText();

            return convertView;     
        }

        class ViewHolder      
        {
            TextView textViewSelectedText = null;
            TextView price=null;
            ImageView image=null;
            EditText qty=null;
            TextView total=null;
        }      
 } 
```

我的编辑文本代码

```
 <EditText
      android:id="@+id/selectqty" android:maxLength="3" android:text="1"
      android:layout_width="40dp"
      android:layout_height="30dp"
      android:layout_alignParentTop="true"
      android:layout_marginLeft="36dp"
      android:layout_toRightOf="@+id/selectitemprice" > 
```

我想将价格和数量 settext 作为总数...请怎么做..帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:19:11.567

```
then use someThing like: 

 textMessage.addTextChangedListener(new TextWatcher(){
 public void afterTextChanged(Editable s) {

 price=Integer.parseInt(price[position]);
int qut=Integer.parseInt(s.getText().toString());
int total=(price*qut);
holder.total.setText(String.valueOf(total));
        }
 public void beforeTextChanged(CharSequence s, int start, int count, int after){}
 public void onTextChanged(CharSequence s, int start, int before, int count){}
    }); 
```

# actionscript-3 - Adobe Air - StageWebView 元标题

> ID：10396170
> 
> 赞同：1
> 
> 时间：2012-05-01T10:00:58.773
> 
> 标签：actionscript-3, air

是否可以获得通过 StageWebView 加载的 .html 文档的元标题？我的代码：

```
webViewC.stage = cont.stage;
webViewC.viewPort = new Rectangle(cont.x,cont.y,cont.width,cont.height);
webViewC.loadURL("http://www.example.com/foobar.html"); 
```

谢谢。乌里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:55:27.140

`StageWebView`是目标平台上核心 HTML 渲染组件的一个非常低级的抽象。因此，它在 ActionScript 和底层 HTML 文档之间提供了非常少的交互。

如果您只是在寻找文档的`<title>`元素，那么一旦引发事件，就可以通过`webViewC.title`getter获得。`Event.COMPLETE`但是，如果您正在查找`<meta name='Title' content='...' />`元素的内容，则无法通过`StageWebView`.

我不太确定你到底想做什么，但你可能会[`URLLoader`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)检索页面的内容，然后解析出你想要的信息，然后将原始 HTML blob 传递给`webViewC.loadString()`

# xcode - 如何在 Xcode 中使用 IBAction 按钮方法和圆角矩形按钮导航黑白三个视图？

> ID：10396172
> 
> 赞同：0
> 
> 时间：2012-05-01T10:01:07.333
> 
> 标签：xcode, uinavigationcontroller, xcode4.2

打开 Xcode 4.2，我选择了一个空的应用程序模板。我要做的就是制作三个视图，可以通过插入的一个按钮[圆形矩形按钮]进行导航。

我制作了 3 个视图，其中包含三个按钮，它们是 1）下一步 2）下一步 3）根

我对 Xcode 比较陌生。我已将所有视图导入应用程序代表。我知道我做的一切都是正确的。但我认为我的按钮代码是错误的。

我通过对象库插入了一个圆形矩形按钮。

我进入FirstViewController.h，放入-(IBAction)nextbuttonclicked；然后我进入 FirstViewController.m，向下，-(IBAction)nextbuttonclicked {

SecondViewController *SVC = [[SecondViewController alloc] init];

[self.window removeFromSuperview];

AppDelegate *appD = (AppDelegate *) [[UIApplication sharedApplication] delegate];

[appD.window addSubview:SVC.view];

我得到的错误是：线程 1：程序接收到的信号：“EXC_BAD_ACCESS”而

“返回 UIApplicationMain (argc, argv, nil) NSStringFromClass ([[AppDelegate class]));”

突出显示，因此线程来自这里有人请帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:20:47.140

学习导航控制器 - [http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

并使用导航控制器的**Push**和**Pop**属性进行导航。

# json - org.json JAR 配置

> ID：10396176
> 
> 赞同：9
> 
> 时间：2012-05-01T10:01:54.093
> 
> 标签：json, jar

我想知道为什么 www.json.org/anyone else 不提供 org.json 的官方 JAR 包供下载？我发现人们询问他们可以在哪里下载 JAR 的所有查询都会导致对仅列出源文件的页面的回复。

期望每个人都下载每个源文件并自己准备 JAR 文件似乎有点麻烦。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-01T10:07:32.320

您是否考虑过使用 Maven？例如，如果你想要一个 JAR 来解析 JSON，你可以只包括......

[http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-core-asl/1.9.6](http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-core-asl/1.9.6)

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-core-asl</artifactId>
    <version>1.9.6</version>
</dependency> 
```

在 pom.xml 中，这将为您提供 JSON 的 jar。

或者更好的是，使用 org.json ......

[http://mvnrepository.com/artifact/org.json/json](http://mvnrepository.com/artifact/org.json/json)

```
<dependency>
    <groupId>org.json</groupId>
    <artifactId>json</artifactId>
    <version>20090211</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T22:59:00.193

我从这里下载了一个 jar： [http ://code.google.com/p/org-json-java/downloads/detail?name=org.json-20120521.jar&can=2&q=](http://code.google.com/p/org-json-java/downloads/detail?name=org.json-20120521.jar&can=2&q=)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-22T14:44:53.613

Douglas Crockford 的 json.org 实现是非免费的。幸运的是，存在一个几乎免费的替代品（显然，谷歌的代码由其他人为 Maven Central 打包）：

```
<dependency>
    <groupId>com.vaadin.external.google</groupId>
    <artifactId>android-json</artifactId>
    <version>0.0.20131108.vaadin1</version>
</dependency> 
```

将此添加到`pom.xml`而不是使用 json.org 之一。为此，我们只需要对我们的代码做一点小改动：vaadin 可以`JSONException`在更多地方抛出，所以我们必须要么捕获它们，要么将它们传递给调用者（扩展 throws 声明）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-04T04:09:26.210

请注意 json.org 软件具有非开源许可证。这在许多情况下会导致下游问题。

问题是许可证本质上是 MIT 许可证，但它增加了一行，说明该软件只能用于善，而不是作恶。这听起来不错，但如果你必须让公司律师签字，那就很糟糕了，因为“邪恶”没有一致的法律定义。例如，如果您使用 json.org 的库，则不能将您的软件放入 Debian。您的软件同样不能成为任何 Apache 项目的依赖项。

为了解决这个问题，我改编并打包了 json.org 库的 android clean-room rewrite。源代码在 github 上，并且是 Apache 许可的。请参阅[https://github.com/tdunning/open-json](https://github.com/tdunning/open-json)。要使用它，请在您的 pom（或等效项）中添加类似这样的内容：

```
<!-- https://mvnrepository.com/artifact/com.tdunning/json -->
<dependency>
    <groupId>com.tdunning</groupId>
    <artifactId>json</artifactId>
    <version>1.3</version>
</dependency> 
```

用 github 上的拉取请求或问题或你喜欢的任何方式向我发送请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-27T13:53:40.340

使用 com.tdunnning 包可能会导致依赖冲突，尤其是当您将项目作为库提供给其他人时。该实现与 org.json 没有 100% 的兼容性

该包（com.tdunning）已被分叉到[https://github.com/openjson/openjson](https://github.com/openjson/openjson)，包重命名为 com.github.openjson 而不是 org.json 以防止冲突。

maven依赖：

> ```
> <dependency>
>     <groupId>com.github.openjson</groupId>
>     <artifactId>openjson</artifactId>
>     <version>1.0.10</version>
> </dependency> 
> ```

# magento - 如何阻止 magento 删除高于或等于默认价格的层？

> ID：10396179
> 
> 赞同：1
> 
> 时间：2012-05-01T10:02:31.193
> 
> 标签：magento

在magento中，我的等级设置如下......

> 正常价格：8.99 英镑 特价：3.75 英镑
> 
> 层级
> 
> ```
> Buy 5-9 for £3.22 each
> Buy 10-19 for £3.22 each
> Buy 20-49 for £3.22 each
> Buy 50-99 for £2.80 each
> Buy 100 for £2.58 each
> 100+ Call For Pricing 
> ```
> 
> 最低数量设置为 5，以及反映数量 > 5 的常规和特价。

上述问题是 magento 隐藏了我的前两层。

调试后我发现magento隐藏了任何高于或等于默认价格/特价的层。

**所以我想我的问题是我如何阻止 magento 删除高于或等于价格的层。**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T09:59:07.117

使用 $_tierPrices = $_product->getData('tier_price');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:21:22.953

您的所有等级似乎都低于特价。那是错字吗？

无论哪种方式，我认为您需要查看 /app/code/core/Mage/Catalog/Model/Product/Type/Price.php 文件。特别是在 getTierPrice() 函数中。

这几乎就是所有魔术发生的地方（以及您的价格被删除的地方）。您可能需要在此功能中的 2 个位置进行更改，因为它的一部分用于产品页面，另一个用于结帐过程。

# ios - 更改 UITableViewCell 的编辑控件图像

> ID：10396182
> 
> 赞同：0
> 
> 时间：2012-05-01T10:02:40.960
> 
> 标签：ios, uitableview, xcode4.2

是否可以更改 UITableViewCell 的多行选择的编辑控件图像。如果可以通过 UITableViewCell 的任何默认功能或者我们必须自己自定义它，如果可以的话，任何人都可以给我任何参考来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T17:23:59.253

OP 实际上是想更改编辑控件。这是当您将其更改为编辑模式时出现在单元格左侧的加号或减号。您实际上无法更改图像，但您可以做的是假更改图像，以下是步骤：

1.  创建一个 UITableViewCell 子类。
2.  覆盖 initWithCoder:。在该方法中，将 UIView 添加到 self.backgroundView。
3.  覆盖 willTransitionToState:。您实际上不需要在此处添加任何内容，但添加此方法覆盖会阻止单元格添加系统编辑控件。
4.  将您想要作为编辑控件的图像作为子视图添加到 self.backgroundView。

现在，当表格进入编辑模式并且单元格将内容向右移动时，您将看到添加到背景视图中的图像。这样做的副作用是当您触摸新图像时它不会收到触摸。对于我的情况，我将 tableView.allowSelectionDuringEditing 设置为 YES 并在我的表视图控制器中处理 tableView:didSelectRowAtIndexPath: 中的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:03:39.967

UITableViewCell 的 accessoryType 属性有一个可能的值 UITableViewCellAccessoryCheckmark ，它将在单元格的右侧显示一个复选标记，用于注意选中/取消选中状态。

其他选项是 UITableViewCellAccessoryDisclosureIndicator，它是一个指向右侧的 V 形，以及 UITableViewCellAccessoryDe​​tailDisclosureButton，它使蓝色的小按钮就像电话应用程序的最近通话记录中一样。

所以在设置好你的手机之后，

```
cell.textLabel.text = @"Selected";
cell.accessoryType = UITableViewCellAccessoryCheckmark;
return cell; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-06-18T10:57:45.690

覆盖自定义单元格 setEditing 应该可以工作。为我工作。但是我仍然无法弄清楚，为什么在重新排序时它会回到默认图像。

欢迎大家提出意见 ：）

```
private var myEditImage = UIImage(named: "some-image")

override func setEditing(_ editing: Bool, animated: Bool) {
    super.setEditing(editing, animated: animated)

    for subViewA in self.subviews {
        if subViewA.classForCoder.description() == "UITableViewCellEditControl" {
            if let subViewB = subViewA.subviews.last {
                if subViewB.isKind(of: UIImageView.classForCoder()) {
                    let imageView = subViewB as! UIImageView;
                    imageView.contentMode = .scaleAspectFit
                    imageView.image = self.myEditImage;
                }
            }
        }
    }
} 
```

# android - jarsigner 无法打开 jar 文件：NooYawk.apk .（NooYawk 是 App 名称）

> ID：10396185
> 
> 赞同：3
> 
> 时间：2012-05-01T10:03:29.520
> 
> 标签：android

我在这里借助此链接使用发布密钥签署了我的地图应用程序

[http://developer.android.com/guide/publishing/app-signing.html#cert](http://developer.android.com/guide/publishing/app-signing.html#cert)

生成调试密钥后，下一步是通过使用证书签名来生成发布映射密钥。我正在执行这些工作正常但最终 jarsigner 无法找到我的 NooYawk.apk 文件的步骤。

我应该进一步做什么。

> admins-Mac-mini:.android David$ keytool -genkey -v -keystore fureleasekey.keystore -alias fashion -keyalg RSA -keysize 2048 -validity 10000

接下来是：-

> admins-Mac-mini:~ David$ keytool -genkey -v -keystore
> 
> maprelease.keystore -alias maps -keyalg RSA -keysize 2048 -validity
> 
> 10000 Enter keystore password: Re-enter new password: What is your
> 
> 名字和姓氏？[未知]: m 你叫什么名字
> 
> 组织单位？[未知]: h 你的名字是什么
> 
> 组织？[未知]：k 您所在城市的名称是什么或
> 
> 地方性？[未知]: le 您所在的州或省的名称是什么？
> 
>  [未知]：我们这个单位的两个字母的国家代码是什么？
> 
>  [未知]: sd CN=m, OU=h, O=k, L=le, ST=we, C=sd 是否正确？[不]：
> 
>  是的

接下来是：-

> 生成 2,048 位 RSA 密钥对和自签名证书
> 
> (SHA1withRSA) 有效期为 10,000 天，适用于：CN=m, OU=h, O=k,
> 
> L=le, ST=we, C=sd Enter key password for (RETURN if the same as
> 
> 密钥库密码）：重新输入新密码：[正在存储
> 
> maprelease.keystore]

接下来是：-

> admins-Mac-mini:~ David$ jarsigner -verbose -sigalg MD5withRSA
> 
> -digestalg SHA1 -keystore maprelease.keystore NooYawk.apk maps 输入密码短语
> 
> 密钥库：jarsigner：无法打开 jar 文件：
> 
> NooYawk.apk

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-01T11:38:05.027

除非`NooYawk.apk`在您当前的工作目录中，否则您需要提供 APK 文件的完整路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-04T09:04:59.103

将 android 文件夹中的 Keystore 文件剪切到`build-->outputs-->apk`并粘贴，然后运行 ​​jarsigner 命令

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-28T14:25:51.073

您需要提供您的 apk 文件目录的完整路径，即 /USER/DEVELOP/PATH_TO_APK（在 mac osx 上）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-12T21:02:06.610

我的一个经验是我需要在同一个文件夹中运行 jarsigner，其中不仅存在 .apk 文件，还存在相关的 .ap_ 和 .apk.d 文件等。所以我将密钥库复制到 bin 输出文件夹并在该文件夹中运行 jarsigner。然后事情奏效了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-06-22T18:41:52.537

您应该尝试在您的 apk 路径中运行该命令。首先将未签名的密钥库文件复制到 apk 路径。

# facebook - 新应用 404 - 非常基本的设置 - URL 存在

> ID：10396187
> 
> 赞同：2
> 
> 时间：2012-05-01T10:03:40.543
> 
> 标签：facebook, http-status-code-404, facebook-canvas

我创建了一个新的 Facebook 应用程序。每当我访问画布页面 (https://apps.fac...) 时，我都会被重定向到 Facebook 4oh4 页面。

画布 URL 设置为：[https ://mgnewmedia.com/brandgame/](https://mgnewmedia.com/brandgame/)

您将看到它尽可能基本，但我仍然得到 404。

我使用了调试工具，它确实读得很好。我检查了其他 Internet 连接和其他 Facebook 帐户上的 URL，都是 404。该应用程序的画布页面是：[https ://apps.facebook.com/brandgame/](https://apps.facebook.com/brandgame/)

我已删除该应用程序并重新添加它，但没有运气。我还尝试将示例应用程序放在适当的位置，以防由于没有 SDK 而出现 404，但事实并非如此。

如您所见，我在主机上有一个完整、有效的 SSL 证书。我已经在这里运行了几个应用程序，没有这样的问题。

以下设置的完整列表：应用 ID/API 密钥：**

应用秘密：**

应用命名空间：brandgame

画布页面： [https ://apps.facebook.com/brandgame/](https://apps.facebook.com/brandgame/)

画布网址： [https ://mgnewmedia.com/brandgame/](https://mgnewmedia.com/brandgame/)

安全画布 URL： [https ://mgnewmedia.com/brandgame/](https://mgnewmedia.com/brandgame/)

画布 FBML/iframe：iframe

联系电子邮件： **

支持电子邮件地址：**

应用说明：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:29:52.820

如果您没有更改任何内容，那只是设置延迟，因为这里的一切似乎都运行良好？

如果你愿意，可以提供截图吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:09:11.813

这是 Facebook 的一个错误，在我发布后不久，它就被列在了他们的错误列表跟踪器中。它尚未解决，但已发布解决方法。基本上你添加应用程序，重命名它，然后重命名它，在每个步骤之间等待 20 分钟左右。

值得注意的是，这不会影响每个制作应用程序的人，只会影响某些帐户。我认为这取决于数据中心分配或类似的东西。

# r - 绘制多个图例

> ID：10396194
> 
> 赞同：1
> 
> 时间：2012-05-01T10:04:42.703
> 
> 标签：r

如何用一条语句绘制多个图例？例子：

```
start <- seq(20,35, 5)
end <- seq(39,42, 1)
y <- seq(1,4,1)
name <- c('a', 'b', 'c', 'd')
plot(1, xlim=c(5,50), ylim=c(0,5))
rect(start, y, end, 1.1:4.1, col="black")
legend(end[1],y[1], name[1], xjust=0, yjust=0.5)
legend(end[2],y[2], name[2], xjust=0, yjust=0.5)
legend(end[3],y[3], name[3], xjust=0, yjust=0.5)
legend(end[4],y[4], name[4], xjust=0, yjust=0.5) 
```

最后四行应合并为一个命令。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:28:23.440

您可以使用范围内的索引进行循环`1:4`（1 到 和 的长度`end`）`y`。这可以使用`for`循环来实现，或者在 R 风格中使用更多`sapply`：

```
sapply(seq_along(y), function(i) {
   legend(end[i],y[i], name[i], xjust=0, yjust=0.5)
 }) 
```

# java - 启用 SAXParser qName 来处理空格

> ID：10396203
> 
> 赞同：1
> 
> 时间：2012-05-01T10:05:36.510
> 
> 标签：java, sax, saxparser

我的 XML 解析器有点麻烦，实际上我有一个像这样的 XML 结构：

```
<c r="K6" s="35">
  <v>135</v> 
</c> 
```

& 我需要根据cr **="K6" s="35"**是否在特定范围内来提取值**v XXX /v 。**这很简单，使用 reg ex 等...但我的问题是，当我在 中下拉 qName 时，而不是返回值：它只是返回：。我 99% 确定这是因为 qName 在第一个空格处中断。如何让 qName 返回 <> 括号内的所有内容？**`startElement()``c r="K6" s="35"``c`**

 **干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:09:19.340

XML 标记不能包含空格。您在 XML 元素中拥有的是

*   一个名为`c`,
*   ...具有使用 value调用的*属性*，`r``K6`
*   `s`...以及另一个用 value调用的属性`35`。

`SAXParser`已经在属性列表中将所有属性的值返回给您，该属性列表与`qName`设置为的元素一起使用`"c"`。

```
public void startElement(String uri, String localName, String qName, Attributes attributes) {
    if ("c".equals(qName)) {
        System.out.println(attributes.getValue("r"));
    }
} 
```**

# php - 构建原生移动应用程序 - 基于 PHP Web 应用程序

> ID：10396204
> 
> 赞同：5
> 
> 时间：2012-05-01T10:05:42.430
> 
> 标签：php, iphone, mobile, cordova, web

我已经开发了一个 PHP 应用程序。我想使用 phonegap.com 或类似的方法来开发基于相同 MySQL 数据库的本机应用程序。换句话说，将移动应用程序与网络应用程序连接起来。

它需要以不同的方式做一两件事。首先，使用原生 GPS 功能来确定用户的位置——我猜这只能通过 HTML5 来完成？

其次，只要 Web 应用程序用户收到通知，就发送推送通知。

所有信息都已经存在，在 MySQL 数据库中，并且除了上述两个功能之外的所有内容都可以正常运行。

我目前正在为 Web 应用程序上的所有内容开发 API - 使其以 API 为中心。在我看来，很容易通过 API 连接这两个版本。

例如，用户在 Web 应用程序上注册。然后他被提供给 iphone 应用程序以供下载。

是否可以让他通过 iPhone 登录。另一方面，他是否可以通过 iphone 搜索数据库并“添加新朋友”——在朋友表中建立两个用户的连接——在那个时候，朋友也是Web应用程序？

我已经阅读了很多关于所有可用选项的内容，但仍然很困惑！任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T10:51:22.047

我的客观看法有三种可能：

**开始使用 Objective-C**

您将必须学习如何编码，并且将为您的用户获得最佳的原生体验。这将很容易让您使用 GPS 定位，或者您可以在手机上缓存内容。手机上互联网连接的一个关键问题是互联网连接可能不稳定。所以你必须为此设计。您已经采取了正确的方法：使用直接 MySQL C-API 直接连接到数据库服务器不会工作得那么好，因为该协议不是无状态的。您必须先登录到服务器，然后才能发送 SQL 查询。

通过使用希望是无状态的 API，甚至可能是 RESTful API，您可以为您的原生 iPhone 应用程序使用一些不错的快捷方式。然后，您可以使用[RestKit](http://restkit.org/)库轻松地将来自服务器的 JSON 答案转换为对象，进行缓存和其他不错的功能。

**编写一个网络应用程序**

第二种可能性是使用最先进的 HTML5 技术构建一个不错的 Web 应用程序。这样做的好处是，您将编写一个 Android 应用程序，并且两个移动设备都使用 webkit 浏览器。好吧，情况并非完全如此，因为有不同版本的 Android 具有不同的屏幕尺寸，但总的来说，这个假设成立。以 Google 的 Google Calendar 网络应用为例，我认为这是一个很好的折衷方案。您还可以为此获得一个主屏幕图标，您将没有应用程序审批流程，并且可以随时更新。使用 HTML5 离线存储为您提供了一定程度的自由度。

**使用 Phonegap**

在 PhoneGap 或其他 HTML 包装框架中编写应用程序将生成 Objective-C 代码的选项是一种可能的选择，但在我看来这并不是一个好的选择。原因是您正在处理某种中间层，如果出现任何问题或遇到错误，您无论如何都必须深入到objective-c。另一个问题是关于 iOS 的更新。它可能会破坏一些依赖关系，然后您必须等到您的中间体更新才能使用新功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T10:30:20.100

我自己不是电话开发人员，但是我刚刚完成了一个原生 Android 应用程序，它连接到一个网站并能够登录，做一些可以在网站上做的事情。如果 GPS 跟踪集成使用本机功能，则不太可能使用 HTML5（尽管我不确定它是如何工作的）。

基本上，为了连接到远程数据库/服务器，您需要从手机向服务器端脚本发出 HTTP 请求。

所以总结一下：为了达到你正在寻找的工作流程的结果可能看起来像这样：

1.手机用户填表->

2.App 向服务器端脚本发出 HTTP 请求 ->

3.script 完成繁重的工作（例如连接到数据库）->

4.script 渲染结果 ->

5.移动应用程序显示结果。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-08T06:02:42.210

Phonegap 是开发这个应用程序的好主意。Phonegap 虽然只支持客户端脚本——这意味着你不能在它的代码中嵌入 php。但是，您可以轻松地在脚本中创建 AJAX 调用，从您已经开发的 php 应用程序/api 获取和发送数据。

Phonegap 还支持 GPS 和数据存储选项，您可以将数据存储在本地，并在互联网可用时进行同步。

对于反向同步（服务器到客户端），您将有两个选择。1\. 创建一个 javascript 来进行频繁的 ajax 调用以检查更新。2\. 使用推送通知（这里是 iOS APNs 和 Phonegap 集成的教程）- [http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/](http://devgirl.org/2012/10/19/tutorial-apple-push-notifications-with-phonegap-part-1/)

使用 phonegap 取决于个人喜好。从积极的方面来说，您可以节省时间/成本，因为所有平台都使用相同的代码。不利的一面是，它在更改页面时会有轻微的延迟，导致它看起来像一个网站，但您可以通过使用 jquery mobile 之类的东西来预取所有页面然后来回动画它们来避免这种情况。这也将有助于在单独的独立线程中上传数据，同时用户可以自由地在应用程序中漫游。

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-21T21:51:39.890

简而言之，最好的方法是让您使用带电话间隙的 php Web 服务。

你也可以通过使用 PHP 和 android 的 android。这是一个非常好的和简单的方法。[试试这里](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)的教程

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-18T18:10:28.093

您可以使用 Visual Studio Community 的免费版本托盘 Xamarin（.Net 的一部分），然后与您的 PHP Web 应用程序交互。然后，您可以将本机 Xamarin 应用程序（用 C# 编写）编译到 Android 和 iOS。

# ruby - Ruby - 每个起始偏移量

> ID：10396206
> 
> 赞同：21
> 
> 时间：2012-05-01T10:05:51.167
> 
> 标签：ruby

如何`each`在 ruby​​ 中设置循环的起始偏移量？我希望循环从而`a[3]`不是`a[0]`. 我该如何设置？

```
a = [ab, cd, ef, gh, hi, jk]

a.each do |i|
#some stuff
end 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-01T10:20:07.377

另一种可能更直接和可读的可能性是使用[`Array#drop`](http://apidock.com/ruby/Array/drop)：

```
a.drop(3).each do |i|
  # do something with item i
end 
```

现在，如果与继承自 的其他方法结合使用，这确实会大放异彩[`Enumerable`](http://apidock.com/ruby/Enumerable)，因此很可能有更好的替代命令式`each`循环的方法。假设您要过滤提取的切片并在之后对其进行转换：

```
a = [0,1,2,3,4,5,6,7]
a.drop(3).select(&:even?).map { |x| x * 2 }
# => [8, 12] 
```

或者说您要打印所有值的列表：

```
a = ["1", "2", "3", "4", "5"]
puts a.drop(3).join("\n") 
```

输出：

```
4
5 
```

这些继承自函数式编程的特性是 Ruby 如此强大的原因:)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-01T10:11:54.027

`each`在数组的[子部分](http://www.ruby-doc.org/core-2.0/Array.html#method-i-5B-5D)上使用。在下面的示例中，从第四个元素到末尾：

```
a[3..-1].each do |i|
  #some stuff
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T10:15:09.030

这将帮助你

```
a[3..-1].each do |i|
  #your logic
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-01T10:17:53.280

大多数 Rubyist 忘记了旧的 for 循环：

```
n = 3
for i in n...a.size
  puts a[i]
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-28T21:17:58.937

# 基准

对于那些对这些方法的基准比较感兴趣的人:)

```
require 'benchmark/ips'

a = Array.new(1000) { |i| i } 
drop_point = 500

Benchmark.ips do |x|
  x.report('drop(x)') do
    a.drop(drop_point).each { |el| el + 1 }
  end

  x.report('[x...-1]') do 
    a[drop_point..-1].each { |el| el + 1 }
  end

  x.report('for in') do
    n = drop_point
    size = a.size
    for i in n...size
      a[i] + 1
    end
  end

  x.report('while') do
    size = a.size
    i = drop_point
    while i < size
      a[i] + 1
      i += 1
    end
  end

  x.compare!
end 
```

* * *

### 结果

```
Warming up --------------------------------------
             drop(x)     4.142k i/100ms
            [x...-1]     4.125k i/100ms
              for in     3.239k i/100ms
               while     5.391k i/100ms
Calculating -------------------------------------
             drop(x)     42.485k (± 2.3%) i/s -    215.384k in   5.072524s
            [x...-1]     42.533k (± 2.3%) i/s -    214.500k in   5.045832s
              for in     32.855k (± 2.5%) i/s -    165.189k in   5.030958s
               while     53.489k (± 4.5%) i/s -    269.550k in   5.049793s

Comparison:
               while:    53489.3 i/s
            [x...-1]:    42532.8 i/s - 1.26x  slower
             drop(x):    42484.7 i/s - 1.26x  slower
              for in:    32855.4 i/s - 1.63x  slower 
```

### 结论

正如预期的那样，好的旧版本`while`是最快的，因为它没有`block`分配，但我更喜欢`[x...-1]`或者`drop(x)`因为它们更具可读性

# multithreading - Silverlight 5：在 UI 线程外打印？

> ID：10396207
> 
> 赞同：1
> 
> 时间：2012-05-01T10:06:00.550
> 
> 标签：multithreading, silverlight, printing, backgroundworker, ui-thread

是否可以在不阻塞 UI 线程的情况下在 Silverlight 中打印？

我必须打印很多页面，因此我的 UI 冻结了一段时间。我想改为**在后台线程上打印**（并尽可能更新进度条），但不知道如何。

我尝试在 a 的`Print()`方法中调用 my`PrintDocument`的`DoWork()`方法`BackgroundWorker`，但这给了我一个`UnauthorizedAccessException "Invalid cross-thread access"`.

似乎即使在 UI 线程之外启动 PrintDocument 也是不可能的： `PrintDocument pd = new PrintDocument();`在`BackgroundWorker.DoWork()`抛出相同的异常。

我发现很多帖子，人们说打印必须在 UI 线程上进行，但没有相关文档。我是多线程的新手，所以任何正确方向的指针都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:25:24.253

我遇到了这个问题并遇到了这个问题，不幸的是没有我希望的答案。但我认为对于遇到这个问题的其他人来说，这至少可以说明一些问题。

我正在关注[这篇](http://www.silverlightshow.net/items/Advanced-printing-in-Silverlight-4.aspx)关于在 Silverlight 中打印的文章，它就像在 UI 线程上进行常规打印的魅力一样，但对于实际尝试在单独的线程上打印，我认为这是不可能的。我在示例中切换了最后一行代码

```
printDocument.Print("SLPrintDemo document"); 
```

和一个备用的，看看它是否可以工作

```
new Thread(() => printDocument.Print("SLPrintDemo document")).Start(); 
```

查看打印作业本身是否会在单独的线程中产生。然而，尽管代码编译并运行良好，但文档并没有打印出来。原因似乎是，一旦打印命令被触发，它就会启动打印选项对话框以选择打印机和其他选项等。此时它不再在 UI 线程上，所以什么也没有发生（没有例外，所以我我假设他们被吞没在某个地方）

所以据我目前所知，没有办法在不在 UI 线程中的 Silverlight 中进行打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:47:21.117

使用[Dispatcher](http://msdn.microsoft.com/ru-ru/library/system.windows.threading.dispatcher%28v=vs.95%29.aspx)更新您的 UI。例如：

```
Dispatcher.BeginInvoke(() =>
    {
        ProgressBar.Value = 100;
    }); 
```

# regex - 来自命令行的正则表达式匹配，与 bash 脚本不匹配

> ID：10396210
> 
> 赞同：0
> 
> 时间：2012-05-01T10:06:17.107
> 
> 标签：regex, bash

我有点困惑：为什么使用命令行中的 grep 正则表达式可以很好地工作，并且我在 bash 条件语句中使用完全相同的正则表达式，它根本不起作用？

我想匹配所有只包含字母的字符串，因此我的正则表达式是： `^[a-zA-Z]\+$`。

请你帮忙解决这个问题？

这是我的 bash 代码的片段

```
if ! [[ "$1" =~ '^[a-zA-z]+$' ]] ; then
    echo "Error: illegal input string." >&2
    exit 1
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:13:59.573

不要逃避`+`.

这对我有用：

```
$ [[ "Abc" =~ ^[a-zA-Z]+$ ]] && echo "it matches"
$ it matches 
```

此外，您不需要在正则表达式周围加上单引号。以下对我有用：

```
if ! [[ "$1" =~ ^[a-zA-z]+$ ]] ; then
    echo "Error: illegal input string." >&2
    exit 1
fi 
```

# mysql - Mysql中需要多个子查询的查询

> ID：10396212
> 
> 赞同：0
> 
> 时间：2012-05-01T10:06:21.057
> 
> 标签：mysql, database

我正在寻找一些查询帮助

这是下表数据

```
Name    Runs    Status
Ram         50  out
Ram         103 not out
Krish   51  out
Sam         15  out
Ram         15  out
Krish   78  not out 
```

我期待一个查询给出以下结果

```
Name    Total   >100    >50&<100    TotalTimes  Notout 
Ram        168  1           1         3          1
Sam        15   0           0         1          0
Krish      129  0           2         2          1 
```

我可以在 Group By 功能的帮助下编写查询来获取总数，Totaltimes，其余的我都坚持

这是我提出的查询

```
select Name, sum(Runs) as total, count(*) as totalTimes
from tempTable 
where classID IN (Select classID from upcoming_Clases where classes_id=175) 
group by Name order by total desc 
```

我正在使用 Mysql 数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T10:11:20.397

您可以使用[`SUM()`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_sum)with[`IF()`](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)来测试您的标准：

```
SELECT
    Name,
    SUM(Runs) AS Total,
    SUM(IF(Runs>100, 1, 0)) AS `>100`,
    SUM(IF(Runs>50 AND Runs<100), 1, 0) AS `>50&<100`,
    COUNT(*) AS TotalTimes,
    SUM(IF(Status='not out', 1, 0)) AS Notout
FROM tempTable
WHERE classID IN (SELECT classID FROM upcoming_Clases WHERE classes_id = 175)
GROUP BY Name
ORDER BY Total DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T10:11:32.067

您可以使用案例执行此操作：

```
select Name, 
       sum(Runs) as total, 
       count(case when Runs>100 then 1 end) `>100`,
       count(case when Runs>50 and Runs<100 then 1 end) `>50&<100`,
       count(*) as totalTimes,
       count(case when Status='not out' then 1 end) `Not Out`
from tempTable 
where classID IN (Select classID from upcoming_Clases where classes_id=175) 
group by Name order by total desc 
```

# android - 无法在 Android 中发送带附件的邮件

> ID：10396214
> 
> 赞同：2
> 
> 时间：2012-05-01T10:06:24.830
> 
> 标签：android, jakarta-mail, sendmail, attachment

我在发送带有附件的邮件时遇到问题。我正在使用 Javamail 库（mail.jar、activitation.jar 和 additional.jar）。我可以准确地发送邮件。但我不能发送带有附件的邮件是图像到邮件。我从图库中选择了一张图片，并将其添加为我的文件名

```
 File f = new File("file://" + uri.getPath()); 
```

我认为当数据源采用我的文件路径时我遇到了问题。无论您在我的代码中看到什么更多的东西：（我已经解决了这个问题，这是我的代码的最后一种情况）

首先，我添加到我的附件视图中：

```
Button Add = (Button) findViewById(R.id.btnAdd);

    Add.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View view) {
            onAddAttachment2("image/*");

        }
    }); 
```

这是我的 onAddAttachment2 和 onActivityResult 代码

```
 private void onAddAttachment2(final String mime_type) {

            Intent i = new Intent(Intent.ACTION_GET_CONTENT);
            i.addCategory(Intent.CATEGORY_OPENABLE);
            i.setType(mime_type);
            startActivityForResult(Intent.createChooser(i, null),
                    ACTIVITY_REQUEST_PICK_ATTACHMENT);
        }

    protected void onActivityResult(int requestCode, int resultCode,
        Intent imageReturnedIntent) {

    super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

    mAttachments = (LinearLayout) findViewById(R.id.attachments);

    switch (requestCode) {
    case ACTIVITY_REQUEST_PICK_ATTACHMENT:

        Uri _uri = imageReturnedIntent.getData();

        addAttachment(_uri);

        Cursor cursor = getContentResolver()
                .query(_uri,
                        new String[] { android.provider.MediaStore.Images.ImageColumns.DATA },
                        null, null, null);
        cursor.moveToFirst();
        String imageFilePath = cursor.getString(0);

            uris.add(imageFilePath);

        Log.v("imageFilePath", imageFilePath);
        break;
    }
} 
```

如您所见，我有一个 AddAttachment 方法。这是代码：

```
private void addAttachment(Uri uri) {
        addAttachment(uri, null);
    }

    private void addAttachment(Uri uri, String contentType) {
        long size = -1;
        String name = null;

        ContentResolver contentResolver = getContentResolver();

        Cursor metadataCursor = contentResolver.query(uri, new String[] {
                OpenableColumns.DISPLAY_NAME, OpenableColumns.SIZE }, null,
                null, null);

        if (metadataCursor != null) {
            try {
                if (metadataCursor.moveToFirst()) {
                    name = metadataCursor.getString(0);
                    size = metadataCursor.getInt(1);
                }
            } finally {
                metadataCursor.close();
            }
        }

        if (name == null) {
            name = uri.getLastPathSegment();
        }

        String usableContentType = contentType;
        if ((usableContentType == null)
                || (usableContentType.indexOf('*') != -1)) {
            usableContentType = contentResolver.getType(uri);
        }
        if (usableContentType == null) {
            usableContentType = getMimeTypeByExtension(name);
        }

        if (size <= 0) {
            String uriString = uri.toString();
            if (uriString.startsWith("file://")) {
                Log.v(LOG_TAG, uriString.substring("file://".length()));
                File f = new File(uriString.substring("file://".length()));
                size = f.length();
            } else {
                Log.v(LOG_TAG, "Not a file: " + uriString);
            }
        } else {
            Log.v(LOG_TAG, "old attachment.size: " + size);
        }
        Log.v(LOG_TAG, "new attachment.size: " + size);

        Attachment attachment = new Attachment();
        attachment.uri = uri;
        attachment.contentType = usableContentType;
        attachment.name = name;
        attachment.size = size;

        View view = getLayoutInflater().inflate(
                R.layout.message_compose_attachment, mAttachments, false);
        TextView nameView = (TextView) view.findViewById(R.id.attachment_name);
        ImageButton delete = (ImageButton) view
                .findViewById(R.id.attachment_delete);
        nameView.setText(attachment.name);
        delete.setTag(view);
        view.setTag(attachment);
        mAttachments.addView(view);

        delete.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View view) {

                uris.remove(view.getTag());
                mAttachments.removeView((View) view.getTag());

            }
        });
    } 
```

和具有属性的附件类

```
static class Attachment implements Serializable {
        private static final long serialVersionUID = 3642382876618963734L;
        public String name;
        public String contentType;
        public long size;
        public Uri uri;
    } 
```

最后在我的 Mail.java 类中我有 AddAttachment 方法：

```
public void addAttachment(String file) throws Exception {
    BodyPart messageBodyPart = new MimeBodyPart();

        FileDataSource source =  new FileDataSource(file);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(file);

    _multipart.addBodyPart(messageBodyPart);
} 
```

当我点击*发送按钮*时，它已经发送到地址被写入。但是我的附件无法显示。我发送邮件时没有错误。我希望你有解决这些问题的方法......

**编辑：**好的，我终于**解决**了这个问题！..首先我定义了`ArrayList<String> uris = new ArrayList<String>();`

然后我在我的 onActivityResult 方法中使用了它`uris.add(imageFilePath);`

最后，在`m.send`代码块之前，我添加了图像：

```
for (int i = 0; i<uris.size(); i++)
                    {
                    m.addAttachment(uris.get(i).toString());
                    } 
```

在我的 Mail.java 类中，更改如下所示：

```
public void addAttachment(String file) throws Exception {
        BodyPart messageBodyPart = new MimeBodyPart();

            FileDataSource source =  new FileDataSource(file);
            messageBodyPart.setDataHandler(new DataHandler(source));
            messageBodyPart.setFileName(file);

        _multipart.addBodyPart(messageBodyPart);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:11:23.427

肯定有 MIME 类型的问题。如果您想通过电子邮件附加图像，您可以简单地使用

```
private void sendEmail(String[] to,String[] cc,String subject, String message)
    {

        ArrayList<Uri> uris = new ArrayList<Uri>();

        Uri u = Uri.fromFile(new File(front_image));
        Uri u1 = Uri.fromFile(new File(side_image));
        uris.add(u);
        uris.add(u1);

        Intent emailIntent = new Intent(Intent.ACTION_SEND_MULTIPLE);
        emailIntent.setData(Uri.parse("mailto:"));
        emailIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        emailIntent.setType("image/jpg");
        emailIntent.putExtra(Intent.EXTRA_EMAIL, to);
        emailIntent.putExtra(Intent.EXTRA_CC, cc);
        emailIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
        emailIntent.putExtra(Intent.EXTRA_TEXT, message);
        emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
        /*emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + show_right_latest_path));
        emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + show_right_prev_path));
        emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + show_front_latest_path));
        emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + show_front_prev_path));*/
        startActivity(Intent.createChooser(emailIntent, "Email"));

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:26:10.540

我希望您传递给 addAttachment 方法的字符串是文件名，而不是 URL（即，不以“file:”开头）。

要调试您的问题，请将代码添加到使用 FileInputStream 的 addAttachment 方法中，并查看您是否可以读取文件中的数据。如果你不能，JavaMail 也不能。

此外，打开会话调试并检查协议跟踪以查看 JavaMail 实际发送的内容。这可能会提供更多线索。或者，在您实际发送消息的代码中，添加 msg.writeTo(new FileOutputStream("msg.txt")) 并查看写入文件的内容。

# javascript - id attr 的独特问题

> ID：10396225
> 
> 赞同：1
> 
> 时间：2012-05-01T10:07:13.193
> 
> 标签：javascript, jquery, html, firefox, dom

在此页面[http://stage.directsight.co.uk/detail/U5](http://stage.directsight.co.uk/detail/U5)右侧的表格（带有单选按钮的表格）似乎有一个独特的问题。使用 jquery，它的 id 属性是一个节点列表。

这似乎与此错误有关[https://bugzilla.mozilla.org/show_bug.cgi?id=214574](https://bugzilla.mozilla.org/show_bug.cgi?id=214574)

有解决办法吗？这发生在 FireFox 上。

```
$('form').eq(1).attr('id') 
```

# c# - C# - 从不同程序集中的文件资源加载图像

> ID：10396226
> 
> 赞同：0
> 
> 时间：2012-05-01T10:07:25.237
> 
> 标签：c#, image, assemblies, pack

C# - 从不同程序集中的文件资源加载图像

我有一个 PNG 图像文件，它存储在一个名为 SomeProject 的项目中，并在同一个项目中使用 XAML 多次显示。在*另一个*程序集中，我现在希望访问同一个图像。以前我只是简单地指定了一个工作正常的实际文件的相对路径。但是，当我构建发布安装程序时，图像文件被打包到 SomeProject.DLL 中。

有什么简单的方法可以从另一个程序集中访问 PNG 文件，而无需简单地将文件本地复制到第二个项目？我虽然可能使用'pack：//'，但我运气不佳。

```
// SomeOtherProject.SomeClass.cs ...

Image logo = new Image();
BitmapImage logoSource = new BitmapImage();
eChamSource.BeginInit();

// Following line works fine is Visual Studio, but obviously not after installation
// logoSource.UriSource = new Uri(@"..\SomeProject\Resources\Images\logo.png", UriKind.Relative);

logoSource.UriSource = new Uri("pack://application:,,,/SomeProject;component/Resources/Images/logo.png");
logoSource.EndInit();

logo.Width = 100; logo.Height = 100;
logo.Source = logoSource; 
```

任何建议都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:13:00.993

如果您希望使用的图像原样`Content`，`another assembly`您必须`copy`将它们保存到`main projects directory`.

您可以使用 Build 事件来执行此操作：

右键单击包含`images -> Properties -> Buil Events ->`编辑后构建的项目以将图像复制到`main project directory`.

然后你必须将它用作

**`pack://application:,,,/ContentFile.xaml`**

（或者）

如果您在子文件夹中需要它

**`pack://application:,,,/Subfolder/ContentFile.xaml`**

看看这个 h 了解更多信息 [http://msdn.microsoft.com/en-us/library/aa970069.aspx](http://msdn.microsoft.com/en-us/library/aa970069.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:25:05.670

尝试加载您的其他程序集，如下所示：

```
Application.LoadComponent(new Uri(@"AnotherAssembly;;;component\AnotherResourceFilePath/logo.png", UriKind.Relative))); 
```

LoadComponent 函数返回一个对象。您可以将其转换为适当的类型。

# javascript - 将生成的内容添加到未绑定到 DOM 的 jQuery 对象失败

> ID：10396227
> 
> 赞同：7
> 
> 时间：2012-05-01T10:07:29.387
> 
> 标签：javascript, jquery

我正在尝试将 HTML 片段动态附加到现有的元素中`.append`。

不知何故，脚本创建的 HTML 字符串没有附加到元素中。

在附加代码片段时，附加到的元素不会挂接到 DOM。

所有这些都封装在一个 JavaScript 函数中。这是代码：

```
append_content = function() {
    var elem = $('<li><div>some text</div></li>');
    var somecontent = get_content();  // returns a string: '<div>xx</div>'
    elem.append('<div>bleh1</div>');
    elem.append(somecontent);
    elem.append('<div>bleh2</div>');
    console.log(elem);
    return elem;
} 
```

日志正确包含所有项目，例如：

```
<li>
    <div>some text</div>
    <div>bleh1</div>
    <div>xx</div>
    <div>bleh2</div>
</li> 
```

但是当我稍后将 elem 连接到 DOM 时，函数调用的内容就消失了。即它在计算源中不可见（在 FireBug 和 Chrome 开发工具中都不可见）。

它看起来像这样：

```
<li>
    <div>some text</div>
    <div>bleh1</div>
    <div>bleh2</div>
</li> 
```

我几乎确信我在这里遇到了一些范围问题或类似的问题，但我不明白。控制台中没有错误消息。有什么建议吗？

## 更新

的确，这是一个自制的问题。删除示例代码以在此处发布让我意识到我调用了一个类似的函数，而没有上面提到的函数调用 - 愚蠢的我。感谢所有的评论和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:17:26.853

它看起来对我来说是正确的——我会检查 get_content() 方法的输出，以确保它实际上返回了有效的 html。使用 alert("somecontent") 和控制台检查它-console.log 仅在 firebug 中写出 XML 的第一行-不确定 chrome ...

# android - 无法获取 SDK 调试证书的 MD5 指纹

> ID：10396230
> 
> 赞同：-1
> 
> 时间：2012-05-01T10:08:06.517
> 
> 标签：android, debugging, certificate, fingerprint

我在获取 SDK 调试证书的 MD5 指纹时遇到问题？

任何人都可以提供任何帮助吗？

当我按照以下说明操作时，我在命令提示符下没有任何运气：[https ://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:14:32.537

您没有在问题中提供确切的问题或错误，例如，您尝试了哪个命令，输出是什么。

一个可能的问题是您正在运行 JDK 7，并且默认显示 SHA1 哈希而不是 MD5 哈希，在这种情况下，下面的线程可以帮助您。

[如何从 Java 的 keytool 获取 MD5 指纹，而不仅仅是 SHA-1？](https://stackoverflow.com/questions/6305938/how-can-i-get-the-md5-fingerprint-from-javas-keytool-not-only-sha-1)

# python - 在傅立叶空间中创建网格

> ID：10396243
> 
> 赞同：2
> 
> 时间：2012-05-01T10:09:19.853
> 
> 标签：python, numpy, fft

我有一个代码，它创建一个尺寸为 4x4 arcsec 的正方形图像，从 -2 arcsec 到 +2 arcsec 运行，并在 80x80 网格上创建。为此，我想添加另一个图像。第二张图像是通过 80x80 网格的 FFT 创建的，因此从傅立叶空间开始。在 FFT 之后，我希望图像在真实空间中的尺寸与第一张图像完全相同。

因为傅里叶空间代表尺度，波数定义为 k = 2pi/x（尽管在这种情况下 numpy.fft 使用我认为 k = 1/x 的定义），我认为最大的尺度必须有最小的k-value 和最小的 scale 最大的 k-value。

因此，如果 x_max = 2（第一张图像的 x 方向的尺寸）和 dim_x = 80（网格中的列数）：

k_x,max = 1/(2*x_max/dim_x)

k_x,min = 1/(2*x_max)

并让傅里叶空间中的网格从 k_x,min 运行到 k_x,max （对于 y 方向相同）

我希望我对此进行了足够清楚的解释，但是我无法在有关 FFT 的文献中找到任何对此的确认或解释，并且真的很想知道这是否正确。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:36:36.870

这是不正确的。k 空间值的范围从`-N/2*omega_0`到`(N-1)/2*omega_0`，其中`omega_0`是样本长度的倒数，由下式给出`2*pi/(max(x)-min(x))`，N 是样本数。因此，对于您的情况，您会得到以下内容：

```
N = len(x)
dx = x[-1]-x[0]
k = np.linspace(-N*pi/dx, (N+1)*pi/dx, N) 
```

# ajax - 如何在 h:inputText 中将参数传递给 f:ajax？f：参数不起作用

> ID：10396244
> 
> 赞同：16
> 
> 时间：2012-05-01T10:09:22.600
> 
> 标签：ajax, jsf, input, jsf-2, parameter-passing

我需要在我的 ajax 请求中将参数传递给服务器。请看下面的代码。范围：查看范围

**没有 f:param**

```
<p:column width="40">
    <h:inputText id="originalCostInputTxt" value="#{articlePromo.costoBruto}" 
        <f:ajax event="change"
            execute="@this" 
            listener="#{promotionDetailManagedBean.onCostoBrutoChange}">
        </f:ajax>
    </h:inputText>
</p:column> 
```

**托管豆**

```
public final void onCostoBrutoChange(final AjaxBehaviorEvent event) {
    createCostoBrutoOptions(promoArticlesList);
} 
```

在这种情况下，会调用 onCostoBrutoChange() 方法。但是，当我包含 f:param 时它不会被调用。请看下面的代码。

**使用 f:param**

```
<p:column width="40">
    <h:inputText id="originalCostInputTxt" value="#{articlePromo.costoBruto}" 
        <f:ajax event="change"
            execute="@this" 
            listener="#{promotionDetailManagedBean.onCostoBrutoChange}">
         <f:param value="#{articlePromo.promocionArticuloId}" name="myId"/> 
        </f:ajax>
    </h:inputText>
</p:column> 
```

**托管豆**

```
public final void onCostoBrutoChange(final AjaxBehaviorEvent event) {
    createCostoBrutoOptions(promoArticlesList);
    String id = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("myId");
} 
```

无法识别此代码中的不正确之处。请指导。

谢谢， 希哈

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-01T13:05:17.813

仅适用于链接和按钮，`<f:param>`不适用于输入。

如果您的环境支持 EL 2.2，只需将其作为方法参数传递：

```
<h:inputText ...>
    <f:ajax listener="#{bean.listener(item.id)}" />
</h:inputText> 
```

```
public void listener(Long id) {
    // ...
} 
```

您也可以只传递整个项目：

```
<h:inputText ...>
    <f:ajax listener="#{bean.listener(item)}" />
</h:inputText> 
```

```
public void listener(Item item) {
    // ...
} 
```

如果您的环境不支持或不能支持 EL 2.2，则改为以编程方式评估 EL。

```
public void listener() {
    FacesContext context = FacesContext.getCurrentInstance();
    Long id = context.getApplication().evaluateExpressionGet(context, "#{item.id}", Long.class);
    // ...
} 
```

# php - PHP - DOMXpath - 获取结果

> ID：10396245
> 
> 赞同：3
> 
> 时间：2012-05-01T10:09:31.523
> 
> 标签：php, xpath, domdocument, domxpath, evaluate

当我想使用 XPath 打印评估表达式的结果时出现错误。

$url = $xpath->evaluate('//a/@href', $event); 回声 $url ;

我有这个错误：*可捕获的致命错误：类 DOMNodeList 的对象无法转换为字符串*

我的代码：

```
<?php
    // Get the HTML Source Code
    $url='http://www.parisbouge.com/events/2012/05/01/';
    $source = file_get_contents($url);

    // DOM document Creation
    $doc = new DOMDocument;
    $doc->loadHTML($source);

    // DOM XPath Creation
    $xpath = new DOMXPath($doc);

    // Get all events
    $events = $xpath->query('//li[@class="nom"]');

    // Count number of events
    printf('There is %d events<br />', $events->length);

    // List all events
    for($i = 0; $i < ($events->length); $i++) {
        $event = $events->item($i);
        $url = $xpath->evaluate('//a/@href', $event);
        $nom = $xpath->evaluate('//a/text()', $event);
        $lieu = $xpath->evaluate('../li[@class="lieu"]/a/text()', $event);
        echo "Result : $url $nom $lieu <br/>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T10:24:58.147

试试这个以获取有关节点的信息。

```
 // List all events
for($i = 0; $i < ($events->length); $i++) {
    $event = $events->item($i);
    $url = $xpath->evaluate('.//a/@href', $event);
    $nom = $xpath->evaluate('.//a/text()', $event);
    $lieu = $xpath->evaluate('../li[@class="lieu"]/a/text()', $event);

    $result = '';
    if ($url->length > 0) {
        $result .= $url->item(0)->value;
    }

    if ($nom->length > 0) {
        $result .= $nom->item(0)->wholeText;
    }

    if ($lieu->length > 0) {
        $result .= $lieu->item(0)->wholeText;
    }

    echo $result . "<br />";
    //echo "Result : " . $url->item(0)->value . ' | ' . $nom->item(0)->wholeText  . ' | ' . $lieu->item(0)->wholeText . "<br/>";
} 
```

不要忘记添加检查节点是否存在等。要检查是否有任何节点，您可以检查节点列表长度或抑制“戈登”建议的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T10:13:16.093

引用[http://php.net/manual/de/domxpath.evaluate.php](http://php.net/manual/de/domxpath.evaluate.php)

> 如果可能，返回类型化结果或包含与给定 XPath 表达式匹配的所有节点的 DOMNodeList。

所以您的 XPath 显然会返回多个节点，这可能源于您使用`//`的意思是“到处查找”。如果你这样做`echo $url->length;`，你会看到有 460 个项目（无论传递的上下文节点如何）。

来自[http://www.w3.org/TR/xpath/#path-abbrev](http://www.w3.org/TR/xpath/#path-abbrev)

*   `//para`选择文档根的所有 para 后代，因此选择同一文档中的所有 para 元素作为上下文节点
*   `.//para`选择上下文节点的 para 元素后代

所以你需要`.//a/@href`改用。这将只给出 1 个结果，`echo $url->length;`但它不能作为类型化结果返回，因此您必须将代码更改为

```
$url = $xpath->evaluate('string(.//a/@href)', $event);
$nom = $xpath->evaluate('string(.//a)', $event);
$lieu = $xpath->evaluate('string(../li[@class="lieu"]/a)', $event); 
```

另请注意，您可以将`DOMDocument`创建和加载时间缩短到

```
libxml_use_internal_errors(true);
$doc = new DOMDocument;
$doc->loadHTMLFile('http://www.parisbouge.com/events/2012/05/01/'); 
```

调用`libxml_use_internal_errors`将抑制任何解析错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:10:31.433

尝试

```
$url = $xpath->evaluate('string(.//a/@href)', $event); echo $url ; 
```

这将为您提供包含在`href`其中的第一个字符串，而不是节点`a``$event`

# iphone - UIWebView，判断页面是否已加载

> ID：10396247
> 
> 赞同：3
> 
> 时间：2012-05-01T10:09:53.787
> 
> 标签：iphone, objective-c, xcode

我想知道我的 WebView 何时完成加载页面。我对此很陌生，我想知道您是否有任何建议。我需要在页面加载时创建一个“加载屏幕”。这是我的基本代码：

```
- (void)viewDidLoad {

NSString *urlAddress = @"http://google.se";

//Create a URL object.
NSURL *url = [NSURL URLWithString:urlAddress];

//URL Requst Object
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

//Load the request in the UIWebView.
[webView loadRequest:requestObj];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T10:11:53.737

视图加载完成时有*两种*不同的回调，加载成功和加载失败。它们都是[UIWebViewDelegate 协议](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html)的一部分。

实现它并将自己设置为 Web 视图的代理。然后实施

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
```

知道加载何时完成，以便您可以删除加载屏幕，并实施

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error 
```

知道它是否失败，以便您可以向用户显示和适当的消息，而不是无限加载屏幕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T10:12:19.453

看看 UIWebViewDelegate Protocoll。如果你设置了你的委托，你会收到类似的消息`– webViewDidFinishLoad:`

这就是你想要的，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T15:05:19.193

我对 DOM 的经验很差，但经过一番搜索后，我发现 document.readyState 是一个不错的选择。

来自 w3schools：

定义和用法 readyState 属性返回当前文档的（加载）状态。

此属性返回以下四个值之一：

未初始化 - 尚未开始加载尚未加载 - 正在加载交互 - 已加载足够并且用户可以与其交互完成 - 完全加载

所以我用它来知道 UIWebView 何时加载了文档：

```
- (void)readyState:(NSString *)str
{ NSLog(@"str:%@",str);

if ([str isEqualToString:@"complete"]||[str isEqualToString:@"interactive"]) {
    NSLog(@"IT HAS BEEN DONE");
    [pageLoadingActivityIndicator stopAnimating];
}

}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
 //other code...
 [self readyState:[browserWebView stringByEvaluatingJavaScriptFromString:str]];
} 
```

# windows-phone-7 - 如何检查登录到window phone 7。？

> ID：10396250
> 
> 赞同：1
> 
> 时间：2012-05-01T10:10:14.307
> 
> 标签：windows-phone-7

您好，我正在使用 windows phone 7，并且我的应用程序在模拟器中运行良好，但是一旦我将应用程序启动到设备中，它就会崩溃，所以我如何将错误日志跟踪到我的设备中。？

如何将错误堆栈检查到我的设备中。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:39:18.923

看看[LittleWatson](http://blogs.msdn.com/b/andypennell/archive/2010/11/01/error-reporting-on-windows-phone-7.aspx)。它允许您从真实设备通过电子邮件获取异常信息。
如果需要，可以轻松修改以添加额外的日志记录信息。

# java - GWT：处理复合单元格中的事件

> ID：10396252
> 
> 赞同：3
> 
> 时间：2012-05-01T10:10:19.590
> 
> 标签：java, gwt

CompositeCell 让我们可以使用 Java 在 GWT 中自定义表格单元格的内容。我们可以将几乎任何其他小部件组放在表格的单元格中，并根据需要对其进行布局。问题是，如果我们使用 html 标记将 CompositeCell 的布局定义为另一个表（请参阅下面的 CompositeCell 匿名类实现），我们将失去对单元格组件的事件处理:(。

运行以下代码，当我们单击单元格的按钮时，将实现弹出响应事件处理 IF WE COMMENT CompositeCell 匿名实现。

我一直在调试 CompositeCell.onBrowserEvent(Context, Element, C, NativeEvent, ValueUpdater) 因为我认为使用 HTML 表格标签定义单元格布局会破坏 GWT 小部件层次结构中的事件链，但到目前为止还没有成功。

备注：代码的注释和未注释版本都实现相同的 GUI 布局。这个例子只是为了表明我们在自定义单元格内容时松散了事件处理。

```
public class ActionCellTest implements EntryPoint {

    private static final String SERVER_ERROR = "An error occurred while " + "attempting to contact the server. Please check your network "
            + "connection and try again.";

    private final GreetingServiceAsync greetingService = GWT.create(GreetingService.class);

    public void onModuleLoad() {
        CellTable<Person> table = new CellTable<ActionCellTest.Person>();

        final List<HasCell<Person, ?>> cells = new LinkedList<HasCell<Person, ?>>();
        cells.add(new HasCellImpl("first name", new ActionCell.Delegate<Person>() {

            @Override
            public void execute(Person object) {
                Window.alert(object.getFirstName());
            }
        }));
        cells.add(new HasCellImpl("last name", new ActionCell.Delegate<ActionCellTest.Person>() {

            @Override
            public void execute(Person object) {
                Window.alert(object.getLastName());
            }
        }));

        CompositeCell<Person> cell = new CompositeCell<Person>(cells) {

            @Override
            public void render(Context context, Person value, SafeHtmlBuilder sb) {
                sb.appendHtmlConstant("<table><tbody><tr>");
                for (HasCell<Person, ?> hasCell : cells) {
                    render(context, value, sb, hasCell);
                }
                sb.appendHtmlConstant("</tr></tbody></table>");
            }

            @Override
            protected <X> void render(Context context, Person value, SafeHtmlBuilder sb, HasCell<Person, X> hasCell) {
                Cell<X> cell = hasCell.getCell();
                sb.appendHtmlConstant("<td>");
                cell.render(context, hasCell.getValue(value), sb);
                sb.appendHtmlConstant("</td>");
            }

            @Override
            protected Element getContainerElement(Element parent) {
                return parent.getFirstChildElement().getFirstChildElement().getFirstChildElement();
            }

        };
        table.addColumn(new TextColumn<ActionCellTest.Person>() {

            @Override
            public String getValue(ActionCellTest.Person object) {
                return object.getFirstName() + " " + object.getLastName();
            }
        }, "name");

        table.addColumn(new Column<Person, Person>(cell) {

            @Override
            public Person getValue(ActionCellTest.Person object) {
                return object;
            }
        }, "composite");

        LinkedList<Person> data = new LinkedList<ActionCellTest.Person>();
        data.add(new Person("Amy", "Reed"));
        data.add(new Person("Tim", "Gardner"));
        table.setRowData(data);

        RootPanel.get().add(table);
    }

    private class HasCellImpl implements HasCell<Person, Person> {
        private ActionCell<Person> fCell;

        public HasCellImpl(String text, Delegate<Person> delegate) {
            fCell = new ActionCell<Person>(text, delegate);
        }

        @Override
        public Cell<Person> getCell() {
            return fCell;
        }

        @Override
        public FieldUpdater<Person, Person> getFieldUpdater() {
            return null;
        }

        @Override
        public Person getValue(Person object) {
            return object;
        }
    }

    private class Person {
        private String fFirstName;
        private String fLastName;

        public Person(String first, String last) {
            fFirstName = first;
            fLastName = last;
        }

        public String getFirstName() {
            return fFirstName;
        }

        public String getLastName() {
            return fLastName;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:20:05.327

这是一个已知问题，将在即将到来的 GWT 2.5（几周内）中修复：[http](http://code.google.com/p/google-web-toolkit/issues/detail?id=5714)
://code.google.com/p/google-web-toolkit/issues/detail?id=5714 （平均时间，您可以使用中继线或尝试向后移植更改）

# javascript - 使用正则表达式进行表单验证

> ID：10396254
> 
> 赞同：0
> 
> 时间：2012-05-01T10:10:35.937
> 
> 标签：javascript, forms, validation

我正在编写一个脚本，该脚本接受表单输入并计算包括增值税在内的总额。我正在尝试验证用户输入，以确保他&她只使用整数。

我的问题是，当我输入第一个数字时，即。1 它引发了我的警觉。当继续添加数字时，它工作正常。输入字母时，它按预期工作并返回警报。

我有一个模糊的想法，这是因为我正在使用 onkeydown 事件来激活评估功能。由于 consoleLog 显示值 100 被解析为 10，1000 被解析为 100。

如果我改变它们，所以我现在使用 onkeyup 计算器函数将显示值 100 被解析为 10，1000 被解析为 100。但如果该字段为空，则表单将变得无用，因为警报框不断弹出。但是，如果您有机会输入任何内容，则评估会起作用。

我现在将首先发布我的代码 HTML，然后发布 JS

```
<input type="text" id="price" name="price" onkeyup="checkIfWholeNo();" onkeydown="calculate();" />

function checkIfWholeNo() {
var price = document.getElementById('price').value;
if(/^\d+$/.test(parseInt(price))){}
else {alert("not a number"); return false;}
}
} 
```

问题 A：我的评估函数是否有问题导致这种情况发生？

问题 B：如果它与事件处理程序有关，我该如何修复它，以便我在这两个函数上都获得 onkeyup 的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:14:01.133

参考以下链接..

[http://www.roseindia.net/javascript/form-validation-regular-expressions.shtml](http://www.roseindia.net/javascript/form-validation-regular-expressions.shtml)

[http://www.designchemical.com/blog/index.php/jquery/form-validation-using-jquery-and-regular-expressions/](http://www.designchemical.com/blog/index.php/jquery/form-validation-using-jquery-and-regular-expressions/)

[http://www.codeproject.com/Articles/17923/Form-Validation-with-Regular-Expression-Short-Vers](http://www.codeproject.com/Articles/17923/Form-Validation-with-Regular-Expression-Short-Vers)

[http://www.9lessons.info/2009/03/perfect-javascript-form-validation.html](http://www.9lessons.info/2009/03/perfect-javascript-form-validation.html)

# extjs - ExtJS 窗口隐藏后未定义

> ID：10396256
> 
> 赞同：0
> 
> 时间：2012-05-01T10:10:46.427
> 
> 标签：extjs, window

我有一个在页面加载时创建并在组件管理器中注册的窗口。该窗口设置了 closeAction: 'hide' ，但是当我尝试重新打开它时，我收到一个窗口未定义的错误。使用 ExtJs 3.4

```
#Initial creation of the window
var comWin = new UserSelectionDialog();
Ext.ComponentMgr.register(comWin);

#Window Class/Config
UserSelectionDialog = Ext.extend(Ext.Window, {
id: 'comWin',
title: 'User Selection',
width: 700,
height: 300,   
autoScroll: true,
maximizable: true,
closeAction: 'hide'...

#call to retrieve window
function getCom(){

var comWin = Ext.getCmp('comWin');
alert(comWin.title);
    comWin.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:51:59.047

默认情况下，在窗口文档中对此进行了介绍，当您点击关闭时，它会破坏窗口。

[http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Window-cfg-closeAction](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Window-cfg-closeAction)

# ruby - ruby：构建由许多可变长度字符串组成的具有长度约束的字符串

> ID：10396257
> 
> 赞同：1
> 
> 时间：2012-05-01T10:10:46.703
> 
> 标签：ruby, string

我想我会抛出这个问题，看看人们能想出什么优雅的解决方案，并且在这个过程中，希望能学到一些新的 ruby​​ 技巧。

我将在生成 twitter 消息的上下文中设置问题，该消息的最大长度为 140 个字符。我正在寻找一个简洁的函数，它将从三个输入中提供不超过 140 个字符的推文：text_a（强制）、text_b（可选）、触发返回字符串的函数（可选）的布尔值。

（我使用 twitter-text gem 来解决字节、字符和编码问题，因为这不是问题的重点。）

主要约束是要达到所需的最大长度，必须截断 text_a。

这是一些冗长的示例代码（我认为可以工作），希望能明确要求。

```
# encoding: utf-8

require 'twitter-text'

def tweet(text_a, text_b=nil, suffix=false)
  text = "fixed preamble #{text_a}"
  text << " #{text_b}" if text_b
  text << get_suffix if suffix
  return text unless Twitter::Validation.tweet_invalid?(text) == :too_long
  excess_length = Twitter::Validation.tweet_length(text) - Twitter::Validation::MAX_LENGTH
  text_a = text_a[0..-(excess_length + 1)]
  text = "fixed preamble #{text_a}"
  text << " #{text_b}" if text_b
  text << get_suffix if suffix
  text
end

def get_suffix
  " some generated suffix"
end 
```

这很丑陋，尤其是在重复的情况下。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:05:33.767

为什么不首先正确构建字符串？

```
def tweet(text_a, text_b=nil, suffix=false)
  text = ""
  text << " #{text_b}" if text_b
  text << get_suffix if suffix

  space = Twitter::Validation::MAX_LENGTH - Twitter::Validation.tweet_length(text)
  raise "too long" unless space > 0

  "fixed preamble #{text_a}"[0, space] + text
end 
```

# database - 将数据库中的前 3 条记录映射到变量

> ID：10396258
> 
> 赞同：0
> 
> 时间：2012-05-01T10:10:52.310
> 
> 标签：database, ruby-on-rails-3, map, rspec2

我有一个测试规范，我使用以下代码行将 3 个变量分配给表中的会话令牌：

```
@auth_token, @auth2_token, @auth3_token = Session.limit(3).map(&:token) 
```

我现在希望从我的 Roles 表中分配 3 个变量作为角色类，它不仅限于一个属性，而是整个类。我已经尝试了以下但它似乎没有工作：

```
@role1, @role2, @role3 = Role.limit(3).map 
```

这可以实现吗？任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:45:36.287

它适用于身份验证令牌，因为 map 将关系对象转换为数组，然后将其分配给变量。对于只调用 map 的角色返回一个可枚举而不是一个数组。

您可以直接在限制调用返回的关系对象上调用 to_a 以将其转换为数组。

`@role1, @role2, @role3 = Role.limit(3).to_a`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:11:41.520

不确定如何解决这个问题，但使用以下方法解决了问题：

```
@role1 = Role.find_by_name!("First") 
@role2 = Role.find_by_name!("Second")
@role3 = Role.find_by_name!("Third") 
```

# php - phpmailer：仅使用“回复”地址回复

> ID：10396264
> 
> 赞同：67
> 
> 时间：2012-05-01T10:11:25.797
> 
> 标签：php, phpmailer

我在我的网站上使用 phpmailer 并帮助解决垃圾邮件问题，我创建了一个邮箱来发送这些电子邮件（使用 SMTP）。

我已将电子邮件设置为**来自**邮箱地址，然后我添加了一个**回复到**我希望回复的地址的地址：

```
$mail = new PHPMailer();

$mail->IsSMTP();
$mail->SMTPAuth   = true;
$mail->SMTPSecure = 'tsl';
$mail->SMTPDebug  = 1;
$mail->Host       = EMAIL_HOST;
$mail->Port       = EMAIL_PORT;
$mail->Username   = EMAIL_USER;
$mail->Password   = EMAIL_PASS;

$mail->SetFrom('mailbox@email.com', 'Mailbox name');
$mail->AddReplyTo('replyto@email.com', 'Reply to name');
$mail->AddAddress('user@email.com', 'User name); 
```

电子邮件发送成功，似乎可以通过垃圾邮件过滤器，**但是当我按下回复时，它包括邮箱帐户和对帐户的回复**。

这是要发生的事情吗？我只希望在您按下回复时出现对地址的回复。这甚至可能吗？

非常感谢您提供的任何帮助！

* * *

**编辑：**

查看电子邮件标题，发件人地址似乎包含在回复字段中。我不知道为什么！

```
Date: Tue, 1 May 2012 11:16:25 +0100
To: User name <user@email.com>
From: Mailbox name <mailbox@email.com>
Reply-to: Mailbox name <mailbox@email.com>, Reply to name <replyto@email.com
Subject: Email subject
Message-ID: <54c530c0d1f3ff33fc87c4c41c2c9ffd@localhost>
X-Priority: 3
X-Mailer: PHPMailer 5.1 (phpmailer.sourceforge.net)
MIME-Version: 1.0
Content-Type: multipart/alternative;
     boundary="b1_54c530c0d1f3ff33fc87c4c41c2c9ffd"

--b1_54c530c0d1f3ff33fc87c4c41c2c9ffd
Content-Type: text/plain; charset = "iso-8859-1"
Content-Transfer-Encoding: 8bit 
```

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-05-03T13:50:42.073

我已经找到了答案，这很烦人/令人沮丧的简单！基本上需要在发件人地址**之前**添加对地址的回复，如下所示：

```
$mail->addReplyTo('replyto@email.com', 'Reply to name');
$mail->SetFrom('mailbox@email.com', 'Mailbox name'); 
```

更详细地查看 phpmailer 代码，这是有问题的行：

```
public function SetFrom($address, $name = '',$auto=1) {
   $address = trim($address);
   $name = trim(preg_replace('/[\r\n]+/', '', $name)); //Strip breaks and trim
   if (!self::ValidateAddress($address)) {
     $this->SetError($this->Lang('invalid_address').': '. $address);
     if ($this->exceptions) {
       throw new phpmailerException($this->Lang('invalid_address').': '.$address);
     }
     echo $this->Lang('invalid_address').': '.$address;
     return false;
   }
   $this->From = $address;
   $this->FromName = $name;
   if ($auto) {
      if (empty($this->ReplyTo)) {
         $this->AddAnAddress('ReplyTo', $address, $name);
      }
      if (empty($this->Sender)) {
         $this->Sender = $address;
      }
   }
   return true;
} 
```

特别是这一行：

```
if (empty($this->ReplyTo)) {
   $this->AddAnAddress('ReplyTo', $address, $name);
} 
```

谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-07-21T11:36:04.070

至少在当前版本的 PHPMailers 中，有一个函数**clearReplyTos()**可以清空回复数组。

```
 $mail->ClearReplyTos();
    $mail->addReplyTo(example@example.com, 'EXAMPLE'); 
```

# java - jar 文件创建 - 库依赖

> ID：10396272
> 
> 赞同：0
> 
> 时间：2012-05-01T10:11:55.860
> 
> 标签：java, jar, executable-jar

我想创建我的 java web 应用程序的 jar 文件。

这个 Web 应用程序有很多与此相关的 jar 文件。所以所有人都包括在构建路径中。当从 Eclipse 创建 jar 文件时，即使我选中了导出类文件和资源选项的复选框，生成的 jar 文件也没有那些库文件。因此，当我尝试通过使用从命令行选项执行 jar 文件时

```
java -jar myJarfile.jar 
```

它会抛出错误`NoClassDefFoundError`，任何人都可以帮我解决这个问题。？

如何生成具有所有依赖项的 jar。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:16:19.023

你真的不应该在你的 jar 中包含外部依赖项。只需将您的代码捆绑到您的 jar 中并在运行时指定依赖项。

java -jar myJarfile.jar -cp someDependency.jar

# c++ - 为什么为 DefaultConstructible 建模需要 ForwardIterators？

> ID：10396278
> 
> 赞同：10
> 
> 时间：2012-05-01T10:12:27.510
> 
> 标签：c++, iterator

我似乎找不到任何标准算法来证明默认构造 a 的要求`ForwardIterator`。

是否有任何实际原因，或者我可以安全地忽略它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T10:56:00.337

对于标准算法和客户端用户，它可以简化此类迭代器的使用。

例如（记住这`RandomAccessIterator`是 的子类型`ForwardIterator`）：

```
template <class RandomAccessIterator>
  void sort ( RandomAccessIterator first, RandomAccessIterator last )
{
    RandomAccessIterator pivot, i, j;
    //do your sorting algorithm        
} 
```

如果它们不是默认可构造的，则需要将它们分配给`first`或`last`仅用于编译。

您不需要将其设置为默认值。这种未初始化的迭代器的任何使用都是未定义的。并不是说添加一些检查是不明智的，尤其是在调试版本中。

不，你不应该抛出默认构造函数。它在技术上是一致的，但许多算法会意外失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T11:21:13.557

从我的草稿副本中：

> **24.2.5 前向迭代器 [forward.iterators]**
> 
> **1**类或内置类型 X 满足前向迭代器的要求，如果
> 
> [...]
> 
> — X 满足 DefaultConstructible 要求 (20.2.1)，

进而：

> **20.2.1 模板参数要求**
> 
> **2**通常，不需要默认构造函数。某些容器类成员函数签名将默认构造函数指定为默认参数。如果使用默认参数 (8.3.6) 调用其中一个签名，则 T() 应是定义明确的表达式 (8.5)。

这里有两点需要注意：

*   第一行告诉我们，很少需要默认 ctor（这几乎可以回答您的问题）
*   该要求可能暗示迭代器语义应该与指针兼容，后者是默认可构造的（阅读不要破坏现有代码）。

# java - 使用 LWJGL 而不进行过多的 JNI 调用

> ID：10396279
> 
> 赞同：1
> 
> 时间：2012-05-01T10:12:32.347
> 
> 标签：java, c, jogl, lwjgl

我想绘制一个模型，`LWJGL`并且我知道在调用每个`glVertex`方法`JNI`时都会发生调用，这很耗时。由于我将模型放在一个文件中，因此我只想使用一个`JNI`调用（向`LWJGL`库中添加本机方法），并在本机端从文件中获取我的模型顶点（使用 c 语言）并将它们全部绘制（避免`JNI`每个顶点调用）。所以，我想更改`LWJGL`库源并添加一个函数来做到这一点。我的问题是，此功能是否在`LWJGL`或`JOGL`任何可能的 java 绑定中可用`openGL`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T10:27:12.713

使用顶点缓冲区对象来存储您的顶点数据，并调用绘制尽可能多的顶点/三角形，只需调用[glDrawArrays](http://docs.knobbits.org/opengl/sdk2/xhtml/glDrawArrays.xml)、[glDrawElements](http://docs.knobbits.org/opengl/sdk2/xhtml/glDrawElements.xml)或类似函数即可。

[本页](http://www.lwjgl.org/wiki/index.php?title=Using_Vertex_Buffer_Objects_%28VBO%29)解释了如何在 LWJGL 中使用它们。

请注意，OpenGL 文档的 LWJGL 版本相当缺乏。查看[OpenGL 官方网站](http://opengl.org)以了解 C 版本，这些版本很好地解释了它们的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:21:20.560

您可以使用 LWJGL 中由[glVertexPointer (link)](http://www.lwjgl.org/javadoc/org/lwjgl/opengl/GL11.html#glVertexPointer%28int,%20int,%20java.nio.DoubleBuffer%29)包装的 OpenGL glVertexPointer 函数。

但！

如果您担心 JNI 调用的速度，那么为什么不重新考虑在 c/c++ 中执行此操作呢？

稍后编辑：[glVertexPointer 的文档](http://www.opengl.org/sdk/docs/man/xhtml/glVertexPointer.xml)

# java - 提取由其他格式相关文本包围的文本字段

> ID：10396284
> 
> 赞同：1
> 
> 时间：2012-05-01T10:13:01.227
> 
> 标签：java, regex

我有这样的记录

```
(%1) %2 <span style='color:darkgreen'><b>[%3]</b></span> 
```

我想在 Java 中使用 regex 选择由 %1、%2 和 %3 指定的字段，但我无法弄清楚。部分困难是方括号和尖括号可能出现在字段中。有人可以帮助我...谢谢！

好的，只是为了澄清一下，我要提取的字段实际上并不以 % 符号开头。所以记录可能看起来像这样

```
(ABC) Hello World <span style='color:darkgreen'><b>[Some green text]</b></span> 
```

所以我想要的文字是

ABC
Hello World
一些绿色文本

希望这可以帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:22:59.560

**尝试这个**

由于 JavaScript 不支持lookbehind，

```
(%\w+)\b 
```

或者

```
(%\S+) 
```

# wpf - 指示面板中显示的内容的组合框

> ID：10396286
> 
> 赞同：0
> 
> 时间：2012-05-01T10:13:26.843
> 
> 标签：wpf

对 WPF 来说非常新，似乎无法理解解决这个问题的最佳方法，所以如果有人能在正确的方向上给我一个推动力，那就太棒了。

如果我有一个 WPF 应用程序并且我希望显示的内容由组合框中选择的项目控制。IE

如果选择股票图表，则显示股票图表 如果选择业绩报告，则显示业绩报告。

实现这一点的最佳方法是什么。

组合框的原因是为我们将来添加新项目增加灵活性。

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:36:24.197

这完全取决于您遵循的方法。如果您认为“股票图表”、“业绩报告”等......是可插入且可扩展的，那么我宁愿建议您使用 PRISM 并在运行时加载这些视图。但是如果需求没有引导你，那么你可以使用 VisualStateManager 在你的视图状态之间切换。

# ruby-on-rails-3 - Heroku 上两个应用程序之间的专用数据库共享

> ID：10396293
> 
> 赞同：2
> 
> 时间：2012-05-01T10:14:15.767
> 
> 标签：ruby-on-rails-3, activerecord, heroku

我在 Heroku 上有两个应用程序，我希望它们使用相同的专用数据库。问题是这个新应用程序的模型/表格与另一个应用程序相同。

我的问题是：

*   我应该更改新应用程序上表的名称吗？

*   如果是，那我的模型名称呢？是否可以将模型映射到具有不同名称的表？（就像`User`带有`new_user`表格而不是 的模型`user`）。

任何关于如何做到这一点的好建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:31:06.567

一般来说，这可能不像看起来那么好。Rails 旨在假设它对数据库具有 100% 的控制权。

即使你能够让你的桌子分开而不发生碰撞，你仍然会遇到`schema_migrations`桌子的挑战。该表包含 Rails 的所有迁移，并将包含两个应用程序的所有迁移记录的混合。每当您尝试运行`rake db:rollback`或其他 rake 命令时，这都会使应用程序感到困惑。

`schema.rb`让您的文件可能在两个应用程序之间不同步也可能存在问题。

我建议您仔细研究您想要共享数据库的原因，看看是否有其他方法可以完成您正在尝试做的事情。例如，您可能会考虑使用[Active Resources](http://api.rubyonrails.org/classes/ActiveResource/Base.html)来安静地连接应用程序。

# django - 如何在使用 django.contrib.auth 模型时更新密码和“is_staff”状态

> ID：10396296
> 
> 赞同：0
> 
> 时间：2012-05-01T10:14:44.583
> 
> 标签：django, django-models, django-admin, django-templates

我正在开发一个基于 Web 的应用程序，在该应用程序中我需要从管理员（模板）页面更新用户的密码和 is_staff 状态。为此，我创建了一个显示所有注册用户列表的模板。见模板：

```
 {% for obj in users_list.object_list %}
        <tr class="{% cycle 'odd' 'even' %}">
            <td>{{obj}}</td>
            <td><a href="{% url user_detail user.pk%}">{{obj.first_name}}</a></td>
            <td>{{obj.last_name}}</td>
            <td>{{obj.email}}</td>
            <td>{{obj.is_staff}}</td> 
```

上面显示所有用户列表的代码包括他们的全名、电子邮件和 is_staff 状态。我想要什么，当管理员单击用户名时（我使用 href 属性）。它将获得在打开页面上为单击的用户更新密码和 is_staff 状态的选项。

为此，我无法找出如何在下一行中传递用户的 ID。我尝试使用**user.pk**，但它总是给我 1。可能是返回当前登录的用户 ID，但登录的用户也是超级用户：

```
 <td><a href="{% url user_detail user.pk%}">{{obj.first_name}}</a></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:22:29.263

对用户的引用是`obj`，不是`user`。所以`obj.pk`应该工作。

# php - 在 JavaScript 中访问 PHP 的 Web 服务，这将在 Json 中给出响应

> ID：10396297
> 
> 赞同：0
> 
> 时间：2012-05-01T10:15:03.890
> 
> 标签：php, javascript, json

我是 PhoneGap 的新手

我想开发我的 phonegap android 应用程序。

我已经尝试过没有时间但没有成功，所以如果知道“在 JavaScript 中访问 PHP 的 Web 服务，这将在 Json 中给出响应”

如果有任何关于如何在 java 脚本中处理（解析）Json String 的 Web 服务响应的想法？？？...

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-23T06:21:53.220

请在您的 phonegap 页面中写下 Jquery 代码下方。

```
$(document).ready(function() {
        $("#submit").click(function(){
            var formData = $("#formId").serialize();
            $.ajax({
                    data:formData,
                    url: 'http://urlname.com/webapi.php',
                    dataType: "jsonp",
                    jsonpCallback: "onSuccess"
                });

             return false;
            });

        function onSuccess(data, status)
        {
            $("#divId").text($.trim(data.result));
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:25:35.803

看看 AJAX。老实说，您没有给我们太多帮助，因为我们不知道您已经尝试过什么以及您的经验是什么。您以前尝试的一些示例会很有用。

# windows - 适用于 Windows 的 NPM 包“bin”脚本

> ID：10396305
> 
> 赞同：42
> 
> 时间：2012-05-01T10:16:07.190
> 
> 标签：windows, node.js, posix, package, npm

Cucumber.js 提供了一个命令行“二进制”，它是一个`.js`包含*shebang*指令的简单文件：

```
#!/usr/bin/env node
var Cucumber = require('../lib/cucumber');
// ... 
```

`package.json`使用`"bin"`配置键指定二进制文件：

```
{ "name" : "cucumber"
, "description" : "The official JavaScript implementation of Cucumber."
// ...
, "bin": { "cucumber.js": "./bin/cucumber.js" }
// ... 
```

这一切都适用于 POSIX 系统。有人在 Windows 上运行 Cucumber.js 时报告[了一个问题。](https://github.com/cucumber/cucumber-js/issues/60)

基本上，该`.js`文件似乎是通过 Windows 的 JScript 解释器（不是 Node.js）执行的，并且由于 shebang 指令而引发语法错误。

我的问题是：设置适用于 UNIX 和 Windows 系统的“二进制”脚本的推荐方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-01T13:44:48.910

Windows 会忽略 shebang 行`#!/usr/bin/env node`，并会根据`.js`文件关联执行它。明确使用节点调用脚本

```
node hello.js 
```

附言。Pedantry：shebangs*不在*POSIX 标准中，但大多数 *nix 系统都支持它们。

* * *

如果您为 Npm 打包项目，请使用[package.json](https://docs.npmjs.com/files/package.json#bin)中的“bin”字段。然后在 Windows 上，Npm 将在`.cmd`您的脚本旁边安装一个包装器，以便用户可以从命令行执行它

```
hello 
```

为了让 npm 正确创建 shim，[脚本必须有 shebang 行](https://github.com/ForbesLindesay/cmd-shim/blob/f59af911f1373239a7537072641d55ff882c3701/index.js#L22) `#!/usr/bin/env node`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T17:09:46.507

你的“bin”应该是“cucumber” npm 将创建一个指向“node %SCRIPTNAME%”的“cucumber”或“cucumber.cmd”文件。前者用于 posix 环境，后者用于 Windows ......如果你希望“js”成为可执行文件名称的一部分......你应该使用连字符......“cucumber-js”......在您的情况下，拥有 .js 文件将位于 .js.cmd 之前，导致 WScript 解释器将其作为 JScript 文件而不是节点脚本运行。

我建议看一下[咖啡脚本的 package.json](https://github.com/jashkenas/coffee-script/blob/master/package.json)作为一个很好的例子。

```
{
  "name":         "coffee-script",
  "description":  "Unfancy JavaScript",
  "keywords":     ["javascript", "language", "coffeescript", "compiler"],
  "author":       "Jeremy Ashkenas",
  "version":      "1.4.0",
  "licenses":     [{
    "type":       "MIT",
    "url":        "https://raw.github.com/jashkenas/coffee-script/master/LICENSE"
  }],
  "engines":      {
    "node":       ">=0.4.0"
  },
  "directories" : {
    "lib" : "./lib/coffee-script"
  },
  "main" : "./lib/coffee-script/coffee-script",
  "bin":          {
    "coffee":     "./bin/coffee",
    "cake":       "./bin/cake"
  },
  "scripts": {
    "test": "node ./bin/cake test"
  },
  "homepage":     "http://coffeescript.org",
  "bugs":         "https://github.com/jashkenas/coffee-script/issues",
  "repository":   {
    "type": "git",
    "url": "git://github.com/jashkenas/coffee-script.git"
  },
  "devDependencies": {
    "uglify-js":  ">=1.0.0",
    "jison":      ">=0.2.0"
  }
}
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-23T13:29:44.740

我设法找到了解决类似问题的方法。

我最初的计划是只`.js`为 API 和 CLI 提供一个大文件（原因是因为当时我不知道如何在两个文件之间共享变量）。当一切都建成后，我试图将`#!/usr/bin/env node`shebang 添加到我的文件中。但是，这并没有阻止 Windows Script Host 给出错误。

我最终做的是想出了一个“变量桥”的想法，它允许使用`getVar`and读取和设置变量`setVar`。这使我不得不从 API 代码中提取 CLI 代码并将一些导入添加到变量桥中。

在 CLI 文件中，我添加了 shebang，并将`package.json`我的项目修改为：

```
{
    ...
    "main": "./bin/api.js",
    "bin": {
        "validator": "./bin/cli.js"
    }
    ...
} 
```

如果 Windows Script Host 仍然出现错误，我认为这里有一些小注释可能会有所帮助（我应用了所有这些小注释，所以我不确定哪一个有帮助）：

*   仅使用 LF 行尾似乎有所帮助。

*   这似乎`./bin`是编译文件的首选目录。我确实尝试`./dist`过，但它对我不起作用。

*   可能需要 shebang 后的空行：

    ```
    // cli.js

    #!/usr/bin/env node

    // code... 
    ```

*   使用`main`和`bin`in相同的名称`package.json`对我来说似乎是个问题。

# gradle - 解压时删除目录

> ID：10396310
> 
> 赞同：2
> 
> 时间：2012-05-01T10:16:27.993
> 
> 标签：gradle

我正在将一个 zip 文件解压缩到一个目录中。zip 文件有一个额外的顶级目录，我不希望它出现在解压缩的目标中。

```
task unpackDojoSource(type: Copy) {
    new File("build/dojo/src").mkdirs()
    from(zipTree(dojoSource)) {
        eachFile { details -> details.path = 
           details.path.substring(details.relativePath.segments[0].length()) } 
    } into "build/dojo/src"
} 
```

该任务产生以下输出

```
/dijit
/dojo
/dojo-release-1.7.2
   /dijit
   /dojo
   /dojox
   /util
/dojox
/util 
```

有没有办法可以防止创建 dojo-release 目录？

参考： [http ://gradle.markmail.org/thread/x6gmbrhhen63rybe#query:+page:1+mid:lws7nlqcncjumnvs+state:results](http://gradle.markmail.org/thread/x6gmbrhhen63rybe#query:+page:1+mid:lws7nlqcncjumnvs+state:results)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:51:46.713

我自己也遇到过这个。之后我通过删除来解决它。不太理想但仍然有效。

```
 delete "dojo-release-1.7.2" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-06T11:35:59.247

我只是偶然发现了同样的问题。您唯一需要做的就是`includeEmptyDirs = false`像这样添加到您的副本规范中：

```
task unpackDojoSource(type: Copy) {
    new File("build/dojo/src").mkdirs()
    from(zipTree(dojoSource)) {
        eachFile { details -> details.path = 
           details.path.substring(details.relativePath.segments[0].length()) } 
    } into "build/dojo/src"
    includeEmptyDirs = false
} 
```

生成的结构将不包含展平留下的空目录。

# c# - 在asp.net-c中的网页之间传递值（通过列表框）#

> ID：10396311
> 
> 赞同：0
> 
> 时间：2012-05-01T10:16:33.117
> 
> 标签：c#, javascript, asp.net, stringbuilder

**~/Admin/AdimHome.aspx.cs** C# 代码

```
protected void Page_Load(object sender, EventArgs e)
 {
     System.Text.StringBuilder sb = new System.Text.StringBuilder();
     sb.Append("<script language='javascript'>function Open() {");
     sb.Append(string.Format("window.open('Chat.aspx?rid={0}'", lstRooms.SelectedValue));
     sb.Append(", 'newwindow','toolbar=no,location=no,menubar=no,width=290,height=330,resizable=no,scrollbars=no,top=350,left=980,right=500');return false;");
     sb.Append("}</script>");

     if (!ClientScript.IsClientScriptBlockRegistered("JSScriptBlock"))
     {
         ClientScript.RegisterClientScriptBlock(this.GetType(), "JSScriptBlock", sb.ToString());
     }

    lblFacultyNo.Text = Session["User_Id"].ToString();
    lblUserType.Text = Session["User_Type"].ToString();

    pnlChat.Visible = false;   
} 
```

**~/Admin/Chat.aspx.cs 页面**C# 代码

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["User_Id"] == null)
            Response.Redirect("~/Admin/AdimHome.aspx");
        if (string.IsNullOrEmpty(Request.QueryString["rid"]))
            Response.Redirect("~/Admin/AdminHome.aspx");

        txtMsg.Attributes.Add("onkeypress", "return clickButton(event,'btn')");

        if (!IsPostBack)
        {
            hdnRoomID.Value = Request.QueryString["rid"];
            ChatRoom room = ChatEngine.GetRoom(hdnRoomID.Value);
            string prevMsgs = room.JoinRoom(Session["User_Id"].ToString(), Session["User_Id"].ToString());
            txt.Text = prevMsgs;
            foreach (string s in room.GetRoomUsersNames())
            {
                lstMembers.Items.Add(new ListItem(s, s));
            }

        }
    } 
```

想要将**lstRooms.SelectedValue**传递给**Chat.aspx.cs 页面**以根据客户请求进行检查以区分他们的聊天室：

```
sb.Append(string.Format("window.open('Chat.aspx?rid={0}'", lstRooms.SelectedValue)); 
```

onclicking btnChat 事件：

```
<asp:Button ID="btnChat" Runat="server" CssClass="btn" OnClientClick="JavaScript:Open()" OnClick="btnChat_Click" Text="Join Room" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:35:44.990

如果您想更改代码，解决问题的简单方法可能是......

```
//Javascript function
function Open()
{
   var ddl = document.getElementbyId('<%= lstRooms.ClientID%>');
   var ddlvalue = ddl.options[ddl.selectedIndex].value;
   Window.Open("Chat.aspx?rid=" + ddlvalue );
} 
```

删除页面加载中的所有 JS 代码并将其放在 aspx 页面上。让我知道它是否解决了

# python - 用于类似 facebook 的网站的 mongo db 或 redis？

> ID：10396315
> 
> 赞同：0
> 
> 时间：2012-05-01T10:16:49.273
> 
> 标签：python, django, database-design, mongodb, redis

我正在 django 中构建一个社交应用程序，该网站的架构将与 facebook 非常相似

会有帖子，帖子会有评论

帖子和评论都将包含日期、作者、标签、投票等元数据

我决定使用 nosql 数据库，因为我们可以轻松添加新功能。

我最终确定了 mongodb，因为我可以轻松地将帖子及其评论存储在单个文档中。我现在有了第二个想法，对于这种应用程序，REDIS 会比 mongo 更好吗？

**更新：** 我决定使用 mongodb，如有必要，将使用 redis 作为用户主页和主页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:52:01.150

根据您的特定需求，Redis 和 MongoDB 之间存在巨大差异，因为 Redis 与 MongoDB 不同，它不支持值查询。

您可以使用 MongoDB 在帖子文档中嵌入评论，这意味着您可以在单个查询中获取帖子和评论，但您也可以根据标签、作者等查询帖子文档。

您肯定会想使用 MongoDB。Redis 很棒，但它不适合我相信你需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T19:58:18.817

正如@APC 评论的那样，大型网站使用 SQL 解决方案可能是有原因的。所以我的建议来了：“研究其他大型网站的做法”。

例如， [Disqus](http://disqus.com/)是我认为（如果不是）最大**的**django 部署之一，并且专注于讨论/评论。他们使用 Postgresql ，在那里工作的[David Cramer](http://justcramer.com/)说他们不打算放弃它。[因此，请在此处](http://justcramer.com/2010/05/30/scaling-threaded-comments-on-django-at-disqus/)和[此处](http://justcramer.com/2012/04/08/using-arrays-as-materialized-paths-in-postgres/)查看有关缩放评论的信息。

我知道这不是对您的困境的直接回应，但您可能会感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T10:30:42.667

这些东西是主观的，可以从不同的方向来看。但是，如果您已经决定使用 nosql 解决方案并尝试在 mongodb 和 redis 之间进行确定，我认为使用 mongodb 会更好，因为我想您应该能够保存大量帖子，而且 mongodb 文档更好适合代表职位。

Redis 只能保存到最大内存限制，但速度非常快。因此，如果您需要索引某些东西，您可以将帖子保存在 mongodb 中，然后将帖子的 id 保留在 redis 中以更快地访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T20:20:30.840

首先，将您的应用程序和持久性松散耦合，以便您可以在非常精细的级别上交换它们。例如，您希望能够随着需求的变化将一项服务从 mongo 移动到 redis。能够衡量您的服务并适当地单独响应它们。

其次，您不太可能找到一种能够大规模适应应用程序中每个工作流的持久性解决方案。不要害怕使用多个。Mongo 是解决一系列问题的好工具，就像 Redis 一样，只是不一定是相同的问题。

# android - 从 Android 中的 ViewPager 中删除片段页面

> ID：10396321
> 
> 赞同：143
> 
> 时间：2012-05-01T10:17:13.953
> 
> 标签：android, android-viewpager, fragmentpageradapter

我正在尝试从 ViewPager 动态添加和删除片段，添加作品没有任何问题，但删除无法按预期工作。

每次我想删除当前项目时，最后一个项目都会被删除。

我还尝试在适配器的 getItemPosition 方法中使用 FragmentStatePagerAdapter 或返回 POSITION_NONE。

我究竟做错了什么？

这是一个基本示例：

**MainActivity.java**

```
public class MainActivity extends FragmentActivity implements TextProvider {

    private Button mAdd;
    private Button mRemove;
    private ViewPager mPager;

    private MyPagerAdapter mAdapter;

    private ArrayList<String> mEntries = new ArrayList<String>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mEntries.add("pos 1");
        mEntries.add("pos 2");
        mEntries.add("pos 3");
        mEntries.add("pos 4");
        mEntries.add("pos 5");

        mAdd = (Button) findViewById(R.id.add);
        mRemove = (Button) findViewById(R.id.remove);
        mPager = (ViewPager) findViewById(R.id.pager);

        mAdd.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                addNewItem();
            }
        });

        mRemove.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                removeCurrentItem();
            }
        });

        mAdapter = new MyPagerAdapter(this.getSupportFragmentManager(), this);

        mPager.setAdapter(mAdapter);

    }

    private void addNewItem() {
        mEntries.add("new item");
        mAdapter.notifyDataSetChanged();
    }

    private void removeCurrentItem() {
        int position = mPager.getCurrentItem();
        mEntries.remove(position);
        mAdapter.notifyDataSetChanged();
    }

    @Override
    public String getTextForPosition(int position) {
        return mEntries.get(position);
    }
    @Override
    public int getCount() {
        return mEntries.size();
    }

    private class MyPagerAdapter extends FragmentPagerAdapter {

        private TextProvider mProvider;

        public MyPagerAdapter(FragmentManager fm, TextProvider provider) {
            super(fm);
            this.mProvider = provider;
        }

        @Override
        public Fragment getItem(int position) {
            return MyFragment.newInstance(mProvider.getTextForPosition(position));
        }

        @Override
        public int getCount() {
            return mProvider.getCount();
        }

    }

} 
```

**文本提供者.java**

```
public interface TextProvider {
    public String getTextForPosition(int position);
    public int getCount();
} 
```

**MyFragment.java**

```
public class MyFragment extends Fragment {

    private String mText;

    public static MyFragment newInstance(String text) {
        MyFragment f = new MyFragment(text);
        return f;
    }

    public MyFragment() {
    }

    public MyFragment(String text) {
        this.mText = text;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View root = inflater.inflate(R.layout.fragment, container, false);

        ((TextView) root.findViewById(R.id.position)).setText(mText);

        return root;
    }

} 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/add"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="add new item" />

    <Button
        android:id="@+id/remove"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="remove current item" />

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1" />

</LinearLayout> 
```

**片段.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/position"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:textSize="35sp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2012-05-01T14:27:42.867

ViewPager 不会使用上面的代码删除您的片段，因为它将多个视图（或您的情况下的片段）加载到内存中。除了可见视图之外，它还将视图加载到可见视图的任一侧。这提供了从一个视图到另一个视图的平滑滚动，这使得 ViewPager 非常酷。

为了达到你想要的效果，你需要做几件事。

1.  将 FragmentPagerAdapter 更改为 FragmentStatePagerAdapter。这样做的原因是 FragmentPagerAdapter 将永远保留它加载到内存中的所有视图。FragmentStatePagerAdapter 处理当前和可遍历视图之外的视图。

2.  覆盖适配器方法 getItemPosition（如下所示）。当我们调用`mAdapter.notifyDataSetChanged();`ViewPager 时，会询问适配器以确定在定位方面发生了什么变化。我们使用这种方法表示一切都发生了变化，因此重新处理所有视图定位。

这是代码...

```
private class MyPagerAdapter extends FragmentStatePagerAdapter {

    //... your existing code

    @Override
    public int getItemPosition(Object object){
        return PagerAdapter.POSITION_NONE;
    }

} 
```

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2014-11-15T08:22:50.347

Louth 的解决方案不足以让我工作，因为现有的片段没有被破坏。受[这个答案](https://stackoverflow.com/a/11710690/2180161)的启发，我发现解决方案是在片段的预期位置发生变化时覆盖提供新唯一 ID的`getItemId(int position)`方法。`FragmentPagerAdapter`

## 源代码：

```
private class MyPagerAdapter extends FragmentPagerAdapter {

    private TextProvider mProvider;
    private long baseId = 0;

    public MyPagerAdapter(FragmentManager fm, TextProvider provider) {
        super(fm);
        this.mProvider = provider;
    }

    @Override
    public Fragment getItem(int position) {
        return MyFragment.newInstance(mProvider.getTextForPosition(position));
    }

    @Override
    public int getCount() {
        return mProvider.getCount();
    }

    //this is called when notifyDataSetChanged() is called
    @Override
    public int getItemPosition(Object object) {
        // refresh all fragments when data set changed
        return PagerAdapter.POSITION_NONE;
    }

    @Override
    public long getItemId(int position) {
        // give an ID different from position when position has been changed
        return baseId + position;
    }

    /**
     * Notify that the position of a fragment has been changed.
     * Create a new ID for each position to force recreation of the fragment
     * @param n number of items which have been changed
     */
    public void notifyChangeInPosition(int n) {
        // shift the ID returned by getItemId outside the range of all previous fragments
        baseId += getCount() + n;
    }
} 
```

现在，例如，如果您删除单个选项卡或对订单进行一些更改，您应该在调用`notifyChangeInPosition(1)`之前调用`notifyDataSetChanged()`，这将确保重新创建所有片段。

## 为什么这个解决方案有效

**覆盖 getItemPosition()：**

当`notifyDataSetChanged()`被调用时，适配器调用它所附加的`notifyChanged()`方法。`ViewPager`然后`ViewPager`检查适配器`getItemPosition()`为每个项目返回的值，删除那些返回的项目`POSITION_NONE`（参见[源代码](https://github.com/aosp-mirror/platform_frameworks_support/blob/lollipop-release/v4/java/android/support/v4/view/ViewPager.java#L847)），然后重新填充。

**覆盖 getItemId()：**

这是防止适配器在重新填充时重新加载旧片段所必需的`ViewPager`。通过查看instantiateItem()[的源代码](https://github.com/aosp-mirror/platform_frameworks_support/blob/lollipop-release/v4/java/android/support/v4/app/FragmentPagerAdapter.java#L91)，您可以轻松理解其工作原理`FragmentPagerAdapter`。

```
 final long itemId = getItemId(position);

    // Do we already have this fragment?
    String name = makeFragmentName(container.getId(), itemId);
    Fragment fragment = mFragmentManager.findFragmentByTag(name);
    if (fragment != null) {
        if (DEBUG) Log.v(TAG, "Attaching item #" + itemId + ": f=" + fragment);
        mCurTransaction.attach(fragment);
    } else {
        fragment = getItem(position);
        if (DEBUG) Log.v(TAG, "Adding item #" + itemId + ": f=" + fragment);
        mCurTransaction.add(container.getId(), fragment,
                makeFragmentName(container.getId(), itemId));
    } 
```

如您所见，`getItem()`仅当片段管理器未找到具有相同 Id 的现有片段时才调用该方法。对我来说，即使在调用之后旧片段仍然附加，这似乎是一个错误`notifyDataSetChanged()`，但文档`ViewPager`确实明确指出：

> 请注意，此类目前处于早期设计和开发阶段。该 API 可能会在兼容性库的后续更新中发生变化，当针对较新版本编译应用程序时，需要更改应用程序的源代码。

所以希望这里给出的解决方法在未来版本的支持库中将不再是必需的。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-04-29T08:39:56.653

我从视图寻呼机中删除片段页面的工作解决方案

```
public class MyFragmentAdapter extends FragmentStatePagerAdapter {

    private ArrayList<ItemFragment> pages;

    public MyFragmentAdapter(FragmentManager fragmentManager, ArrayList<ItemFragment> pages) {
        super(fragmentManager);
        this.pages = pages;
    }

    @Override
    public Fragment getItem(int index) {
        return pages.get(index);
    }

    @Override
    public int getCount() {
        return pages.size();
    }

    @Override
    public int getItemPosition(Object object) {
        int index = pages.indexOf (object);

        if (index == -1)
            return POSITION_NONE;
        else
            return index;
    }
} 
```

当我需要按索引删除某些页面时，我会这样做

```
pages.remove(position); // ArrayList<ItemFragment>
adapter.notifyDataSetChanged(); // MyFragmentAdapter 
```

这是我的适配器初始化

```
MyFragmentAdapter adapter = new MyFragmentAdapter(getSupportFragmentManager(), pages);
viewPager.setAdapter(adapter); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-09-18T06:06:37.897

片段必须已被删除，但问题是 viewpager 保存状态

尝试

```
myViewPager.setSaveFromParentEnabled(false); 
```

没有任何效果，但这解决了问题！

干杯！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-17T08:28:23.993

我的想法是简单地将源代码复制`android.support.v4.app.FragmentPagerAdpater`到一个名为 `CustumFragmentPagerAdapter`. 这让我有机会修改它，`instantiateItem(...)`以便每次调用它时，它都会在添加从`getItem()`方法接收的新片段之前删除/销毁当前附加的片段。

只需`instantiateItem(...)`按以下方式修改：

```
@Override
public Object instantiateItem(ViewGroup container, int position) {
    if (mCurTransaction == null) {
        mCurTransaction = mFragmentManager.beginTransaction();
    }
    final long itemId = getItemId(position);

    // Do we already have this fragment?
    String name = makeFragmentName(container.getId(), itemId);
    Fragment fragment = mFragmentManager.findFragmentByTag(name);

    // remove / destroy current fragment
    if (fragment != null) {
        mCurTransaction.remove(fragment);
    }

    // get new fragment and add it
    fragment = getItem(position);
    mCurTransaction.add(container.getId(), fragment,    makeFragmentName(container.getId(), itemId));

    if (fragment != mCurrentPrimaryItem) {
        fragment.setMenuVisibility(false);
        fragment.setUserVisibleHint(false);
    }

    return fragment;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-26T11:55:06.747

您可以将两者结合起来以获得更好的效果：

```
private class MyPagerAdapter extends FragmentStatePagerAdapter {

    //... your existing code

    @Override
    public int getItemPosition(Object object){

      if(Any_Reason_You_WantTo_Update_Positions) //this includes deleting or adding pages
 return PagerAdapter.POSITION_NONE;
    }
else
return PagerAdapter.POSITION_UNCHANGED; //this ensures high performance in other operations such as editing list items.

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-17T17:14:12.120

我遇到了一些问题`FragmentStatePagerAdapter`。删除项目后：

*   有另一个项目用于一个位置（一个不属于该位置但属于它旁边的位置的项目）
*   或某些片段未加载（该页面上只有空白背景可见）

经过大量实验，我想出了以下解决方案。

```
public class SomeAdapter extends FragmentStatePagerAdapter {

    private List<Item> items = new ArrayList<Item>();

    private boolean removing;

    @Override
    public Fragment getItem(int position) {
        ItemFragment fragment = new ItemFragment();
        Bundle args = new Bundle();
        // use items.get(position) to configure fragment
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return items.size();
    }

    @Override
    public int getItemPosition(Object object) {
        if (removing) {
            return PagerAdapter.POSITION_NONE;
        }

        Item item = getItemOfFragment(object);

        int index = items.indexOf(item);
        if (index == -1) {
            return POSITION_NONE;
        } else {
            return index;
        }
    }

   public void addItem(Item item) {
        items.add(item);
        notifyDataSetChanged();
    }

    public void removeItem(int position) {
        items.remove(position);

        removing = true;
        notifyDataSetChanged();
        removing = false;
    }
} 
```

此解决方案仅在删除项目的情况下使用 hack。否则（例如在添加项目时），它会保留原始代码的清洁度和性能。

当然，从适配器外部，你只调用addItem/removeItem，不需要调用notifyDataSetChanged()。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-09-12T13:42:48.083

给未来的读者！

现在您可以使用[ViewPager2](https://developer.android.com/reference/androidx/viewpager2/widget/ViewPager2?hl=en)从 viewpager 中动态添加、删除片段。

报价单[API 参考](https://developer.android.com/reference/androidx/viewpager2/widget/ViewPager2?hl=en)

> ViewPager2 取代了 ViewPager，解决了其前身的大部分痛点，包括从右到左的布局支持、垂直方向、可修改的 Fragment 集合等。

在[googlesample/android-viewpager2](https://github.com/googlesamples/android-viewpager2/)[`MutableCollectionFragmentActivity.kt`](https://github.com/googlesamples/android-viewpager2/blob/master/app/src/main/java/androidx/viewpager2/integration/testapp/MutableCollectionFragmentActivity.kt)中查看从 viewpager 动态添加、删除片段的示例。

* * *

**供你参考：**

文章：

*   [探索 ViewPager2](https://medium.com/google-developer-experts/exploring-the-view-pager-2-86dbce06ff71)
*   [深入查看 ViewPager2](https://proandroiddev.com/look-deep-into-viewpager2-13eb8e06e419)

[API 参考](https://developer.android.com/reference/androidx/viewpager2/widget/ViewPager2?hl=en)

[发行说明](https://developer.android.com/jetpack/androidx/releases/viewpager2)

样品回购：[https ://github.com/googlesamples/android-viewpager2](https://github.com/googlesamples/android-viewpager2)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-22T00:58:41.147

我的最终版本代码，修复了所有错误。我花了3天

2020/07/18 更新：我已经更改了很多源代码并修复了很多错误，但我不保证它今天仍然有效。

[https://github.com/lin1987www/FragmentBuilder/blob/master/commonLibrary/src/main/java/android/support/v4/app/FragmentStatePagerAdapterFix.java](https://github.com/lin1987www/FragmentBuilder/blob/master/commonLibrary/src/main/java/android/support/v4/app/FragmentStatePagerAdapterFix.java)

```
public class FragmentStatePagerAdapterFix extends PagerAdapter {
    private static final String TAG = FragmentStatePagerAdapterFix.class.getSimpleName();
    private static final boolean DEBUG = false;

    private WeakReference<FragmentActivity> wrFragmentActivity;
    private WeakReference<Fragment> wrParentFragment;
    private final FragmentManager mFragmentManager;
    private FragmentTransaction mCurTransaction = null;

    protected ArrayList<Fragment> mFragments = new ArrayList<>();
    protected ArrayList<FragmentState> mFragmentStates = new ArrayList<>();
    protected ArrayList<String> mFragmentTags = new ArrayList<>();
    protected ArrayList<String> mFragmentClassNames = new ArrayList<>();
    protected ArrayList<Bundle> mFragmentArgs = new ArrayList<>();

    private Fragment mCurrentPrimaryItem = null;
    private boolean[] mTempPositionChange;

    @Override
    public int getCount() {
        return mFragmentClassNames.size();
    }

    public FragmentActivity getFragmentActivity() {
        return wrFragmentActivity.get();
    }

    public Fragment getParentFragment() {
        return wrParentFragment.get();
    }

    public FragmentStatePagerAdapterFix(FragmentActivity activity) {
        mFragmentManager = activity.getSupportFragmentManager();
        wrFragmentActivity = new WeakReference<>(activity);
        wrParentFragment = new WeakReference<>(null);
    }

    public FragmentStatePagerAdapterFix(Fragment fragment) {
        mFragmentManager = fragment.getChildFragmentManager();
        wrFragmentActivity = new WeakReference<>(fragment.getActivity());
        wrParentFragment = new WeakReference<>(fragment);
    }

    public void add(Class<? extends android.support.v4.app.Fragment> fragClass) {
        add(fragClass, null, null);
    }

    public void add(Class<? extends android.support.v4.app.Fragment> fragClass, Bundle args) {
        add(fragClass, args, null);
    }

    public void add(Class<? extends android.support.v4.app.Fragment> fragClass, String tag) {
        add(fragClass, null, tag);
    }

    public void add(Class<? extends android.support.v4.app.Fragment> fragClass, Bundle args, String tag) {
        add(fragClass, args, tag, getCount());
    }

    public void add(Class<? extends android.support.v4.app.Fragment> fragClass, Bundle args, String tag, int position) {
        mFragments.add(position, null);
        mFragmentStates.add(position, null);
        mFragmentTags.add(position, tag);
        mFragmentClassNames.add(position, fragClass.getName());
        mFragmentArgs.add(position, args);
        mTempPositionChange = new boolean[getCount()];
    }

    public void remove(int position) {
        if (position < getCount()) {
            mTempPositionChange = new boolean[getCount()];
            for (int i = position; i < mTempPositionChange.length; i++) {
                mTempPositionChange[i] = true;
            }
            mFragments.remove(position);
            mFragmentStates.remove(position);
            mFragmentTags.remove(position);
            mFragmentClassNames.remove(position);
            mFragmentArgs.remove(position);
        }
    }

    public void clear(){
        mFragments.clear();
        mFragmentStates.clear();
        mFragmentTags.clear();
        mFragmentClassNames.clear();
        mFragmentArgs.clear();
    }

    @Override
    public void startUpdate(ViewGroup container) {
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        Fragment fragment;
        // If we already have this item instantiated, there is nothing
        // to do.  This can happen when we are restoring the entire pager
        // from its saved state, where the fragment manager has already
        // taken care of restoring the fragments we previously had instantiated.
        fragment = mFragments.get(position);
        if (fragment != null) {
            return fragment;
        }
        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }
        FragmentState fs = mFragmentStates.get(position);
        if (fs != null) {
            fragment = fs.instantiate(getFragmentActivity(), getParentFragment());
            // Fix bug
            // http://stackoverflow.com/questions/11381470/classnotfoundexception-when-unmarshalling-android-support-v4-view-viewpagersav
            if (fragment.mSavedFragmentState != null) {
                fragment.mSavedFragmentState.setClassLoader(fragment.getClass().getClassLoader());
            }
        }
        if (fragment == null) {
            fragment = Fragment.instantiate(getFragmentActivity(), mFragmentClassNames.get(position), mFragmentArgs.get(position));
        }
        if (DEBUG) {
            Log.v(TAG, "Adding item #" + position + ": f=" + fragment);
        }
        fragment.setMenuVisibility(false);
        fragment.setUserVisibleHint(false);
        mFragments.set(position, fragment);
        mFragmentStates.set(position, null);
        mCurTransaction.add(container.getId(), fragment, mFragmentTags.get(position));
        return fragment;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        Fragment fragment = (Fragment) object;
        if (mCurTransaction == null) {
            mCurTransaction = mFragmentManager.beginTransaction();
        }
        if (DEBUG) {
            Log.v(TAG, "Removing item #" + position + ": f=" + object
                    + " v=" + ((Fragment) object).getView());
        }
        if (position < getCount()) {
            FragmentState fragmentState = new FragmentState(fragment);
            Fragment.SavedState savedState = mFragmentManager.saveFragmentInstanceState(fragment);
            if (savedState != null) {
                fragmentState.mSavedFragmentState = savedState.mState;
            }
            mFragmentStates.set(position, fragmentState);
            mFragments.set(position, null);
        }
        mCurTransaction.remove(fragment);
    }

    @Override
    public void setPrimaryItem(ViewGroup container, int position, Object object) {
        Fragment fragment = (Fragment) object;
        if (fragment != mCurrentPrimaryItem) {
            if (mCurrentPrimaryItem != null) {
                mCurrentPrimaryItem.setMenuVisibility(false);
                mCurrentPrimaryItem.setUserVisibleHint(false);
            }
            if (fragment != null) {
                fragment.setMenuVisibility(true);
                fragment.setUserVisibleHint(true);
            }
            mCurrentPrimaryItem = fragment;
        }
    }

    @Override
    public void finishUpdate(ViewGroup container) {
        if (mCurTransaction != null) {
            mCurTransaction.commitAllowingStateLoss();
            mCurTransaction = null;
            mFragmentManager.executePendingTransactions();
            // Fix: Fragment is added by transaction. BUT didn't add to FragmentManager's mActive.
            for (Fragment fragment : mFragments) {
                if (fragment != null) {
                    fixActiveFragment(mFragmentManager, fragment);
                }
            }
        }
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return ((Fragment) object).getView() == view;
    }

    @Override
    public Parcelable saveState() {
        Bundle state = null;
        // 目前顯示的 Fragments
        for (int i = 0; i < mFragments.size(); i++) {
            Fragment f = mFragments.get(i);
            if (f != null && f.isAdded()) {
                if (state == null) {
                    state = new Bundle();
                }
                String key = "f" + i;
                mFragmentManager.putFragment(state, key, f);
            }
        }
        if (mFragmentStates.size() > 0) {
            if (state == null) {
                state = new Bundle();
            }
            FragmentState[] fs = new FragmentState[mFragmentStates.size()];
            mFragmentStates.toArray(fs);
            state.putParcelableArray("states_fragment", fs);
        }
        return state;
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
        if (state != null) {
            Bundle bundle = (Bundle) state;
            bundle.setClassLoader(loader);
            Parcelable[] fs = bundle.getParcelableArray("states_fragment");
            mFragments.clear();
            mFragmentStates.clear();
            mFragmentTags.clear();
            mFragmentClassNames.clear();
            mFragmentArgs.clear();
            if (fs != null) {
                for (int i = 0; i < fs.length; i++) {
                    FragmentState fragmentState = (FragmentState) fs[i];
                    mFragmentStates.add(fragmentState);
                    if (fragmentState != null) {
                        mFragmentArgs.add(fragmentState.mArguments);
                        mFragmentTags.add(fragmentState.mTag);
                        mFragmentClassNames.add(fragmentState.mClassName);
                    } else {
                        mFragmentArgs.add(null);
                        mFragmentTags.add(null);
                        mFragmentClassNames.add(null);
                    }
                    mFragments.add(null);
                }
            }
            Iterable<String> keys = bundle.keySet();
            for (String key : keys) {
                if (key.startsWith("f")) {
                    int index = Integer.parseInt(key.substring(1));
                    Fragment f = mFragmentManager.getFragment(bundle, key);
                    if (f != null) {
                        f.setMenuVisibility(false);
                        mFragments.set(index, f);
                        mFragmentArgs.set(index, f.mArguments);
                        mFragmentTags.set(index, f.mTag);
                        mFragmentClassNames.set(index, f.getClass().getName());
                    } else {
                        Log.w(TAG, "Bad fragment at key " + key);
                    }
                }
            }
            // If restore will change
            notifyDataSetChanged();
        }
    }

    public static void fixActiveFragment(FragmentManager fragmentManager, Fragment fragment) {
        FragmentManagerImpl fm = (FragmentManagerImpl) fragmentManager;
        if (fm.mActive != null) {
            int index = fragment.mIndex;
            Fragment origin = fm.mActive.get(index);
            if (origin != null) {
                if ((origin.mIndex != fragment.mIndex) || !(origin.equals(fragment))) {
                    Log.e(TAG,
                            String.format("fixActiveFragment: Not Equal! Origin: %s %s, Fragment: %s $s",
                                    origin.getClass().getName(), origin.mIndex,
                                    fragment.getClass().getName(), fragment.mIndex
                            ));
                }
            }
            fm.mActive.set(index, fragment);
        }
    }

    // Fix
    // http://stackoverflow.com/questions/10396321/remove-fragment-page-from-viewpager-in-android
    @Override
    public int getItemPosition(Object object) {
        int index = mFragments.indexOf(object);
        if (index < 0) {
            return PagerAdapter.POSITION_NONE;
        }
        boolean isPositionChange = mTempPositionChange[index];
        int result = PagerAdapter.POSITION_UNCHANGED;
        if (isPositionChange) {
            result = PagerAdapter.POSITION_NONE;
        }
        return result;
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-07T06:22:02.510

劳斯的回答很好。但我不认为总是返回 POSITION_NONE 是个好主意。因为 POSITION_NONE 意味着应该销毁该片段并创建一个新片段。您可以在 ViewPager 的源代码中的 dataSetChanged 函数中检查。

```
 if (newPos == PagerAdapter.POSITION_NONE) {
            mItems.remove(i);
            i--;
            ... not related code
            mAdapter.destroyItem(this, ii.position, ii.object); 
```

所以我认为你最好使用一个weakReference的arraylist来保存你创建的所有片段。并且当你添加或删除一些页面时，你可以从你自己的arraylist 中得到正确的位置。

```
 public int getItemPosition(Object object) {
    for (int i = 0; i < mFragmentsReferences.size(); i ++) {
        WeakReference<Fragment> reference = mFragmentsReferences.get(i);
        if (reference != null && reference.get() != null) {
            Fragment fragment = reference.get();
            if (fragment == object) {
                return i;
            }
        }
    }
    return POSITION_NONE;
} 
```

根据评论，当主机视图试图确定项目的位置是否已更改时，会调用 getItemPosition。并且返回值表示它的新位置。

但这还不够。我们还有重要的一步要走。在 FragmentStatePagerAdapter 的源代码中，有一个名为“mFragments”的数组，用于缓存未被销毁的片段。并在 instantiateItem 函数中。

```
if (mFragments.size() > position) {
        Fragment f = mFragments.get(position);
        if (f != null) {
            return f;
        }
    } 
```

当发现缓存片段不为空时，直接返回缓存片段。所以有问题。例如，让我们删除位置 2 的一页，首先，我们从我们自己的引用数组列表中删除该片段。因此在 getItemPosition 中，它将为该片段返回 POSITION_NONE，然后该片段将被销毁并从“mFragments”中删除。

```
 mFragments.set(position, null); 
```

现在位置 3 的片段将位于位置 2。并且将调用参数位置为 3 的实例化项目。此时“mFramgents”中的第三项不为空，所以会直接返回。但实际上它返回的是位置 2 的片段。所以当我们转到第 3 页时，我们会发现那里有一个空页面。

要解决此问题。我的建议是，你可以将 FragmentStatePagerAdapter 的源代码复制到你自己的项目中，当你做添加或删除操作时，你应该在“mFragments”arraylist 中添加和删除元素。

如果您只使用 PagerAdapter 而不是 FragmentStatePagerAdapter，事情会更简单。祝你好运。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-19T10:23:05.927

> 在 viewpager 中动态添加或删除片段。
> 在活动开始时调用 setupViewPager(viewPager)。加载不同的片段调用 setupViewPagerCustom(viewPager)。例如在按钮点击调用：setupViewPagerCustom(viewPager);

```
 private void setupViewPager(ViewPager viewPager)
{
    ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());
    adapter.addFrag(new fragmnet1(), "HOME");
    adapter.addFrag(new fragmnet2(), "SERVICES");

    viewPager.setAdapter(adapter);
}

private void setupViewPagerCustom(ViewPager viewPager)
{

    ViewPagerAdapter adapter = new ViewPagerAdapter(getSupportFragmentManager());

    adapter.addFrag(new fragmnet3(), "Contact us");
    adapter.addFrag(new fragmnet4(), "ABOUT US");

    viewPager.setAdapter(adapter);
}

//Viewpageradapter, handles the views

static class ViewPagerAdapter extends FragmentStatePagerAdapter
{
    private final List<Fragment> mFragmentList = new ArrayList<>();
    private final List<String> mFragmentTitleList = new ArrayList<>();

    public ViewPagerAdapter(FragmentManager manager){
        super(manager);
    }

    @Override
    public Fragment getItem(int position) {
        return mFragmentList.get(position);
    }

    @Override
    public int getCount() {
        return mFragmentList.size();
    }

    @Override
    public int getItemPosition(Object object){
        return PagerAdapter.POSITION_NONE;
    }

    public void addFrag(Fragment fragment, String title){
        mFragmentList.add(fragment);
        mFragmentTitleList.add(title);
    }

    @Override
    public CharSequence getPageTitle(int position){
        return mFragmentTitleList.get(position);
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-07-05T09:41:02.597

试试这个解决方案。我已将数据绑定用于绑定视图。您可以使用常见的“findViewById()”函数。

```
public class ActCPExpense extends BaseActivity implements View.OnClickListener,  {
private static final String TAG = ActCPExpense.class.getSimpleName();
private Context mContext;
private ActCpLossBinding mBinding;

private ViewPagerAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
        setContentView(R.layout.act_cp_loss);
        mBinding = DataBindingUtil.setContentView(this, R.layout.act_cp_loss);
        mContext = ActCPExpense.this;
        initViewsAct();

    } catch (Exception e) {
        LogUtils.LOGE(TAG, e);
    }

}

private void initViewsAct() {

    adapter = new ViewPagerAdapter(getSupportFragmentManager());
    adapter.addFragment(FragmentCPPayee.newInstance(), "Title");
    mBinding.viewpager.setAdapter(adapter);
    mBinding.tab.setViewPager(mBinding.viewpager);

}

@Override
public boolean onOptionsItemSelected(MenuItem itemActUtility) {
    int i = itemActUtility.getItemId();
    if (i == android.R.id.home) {
        onBackPressed();

    } 

    return super.onOptionsItemSelected(itemActUtility);
}

@Override
public void onClick(View view) {
    super.onClick(view);
    int id = view.getId();
    if (id == R.id.btnAdd) {
        addFragment();

    } else if (id == R.id.btnDelete) {
        removeFragment();

    }

}
    private void addFragment(){
    adapter.addFragment(FragmentCPPayee.newInstance("Title");
    adapter.notifyDataSetChanged();
    mBinding.tab.setViewPager(mBinding.viewpager);
}
private void removeFragment(){
    adapter.removeItem(mBinding.viewpager.getCurrentItem());
    mBinding.tab.setViewPager(mBinding.viewpager);
}

class ViewPagerAdapter extends FragmentStatePagerAdapter {
    private final List<Fragment> mFragmentList = new ArrayList<>();
    private final List<String> mFragmentTitleList = new ArrayList<>();

    public ViewPagerAdapter(FragmentManager manager) {
        super(manager);
    }

    @Override
    public int getItemPosition(@NonNull Object object) {
        return PagerAdapter.POSITION_NONE;
    }

    @Override
    public Fragment getItem(int position) {
        return mFragmentList.get(position);
    }

    @Override
    public int getCount() {
        return mFragmentList.size();
    }

    public void addFragment(Fragment fragment, String title) {
        mFragmentList.add(fragment);
        mFragmentTitleList.add(title);

    }

    public void removeItem(int pos) {

        destroyItem(null, pos, mFragmentList.get(pos));
        mFragmentList.remove(pos);
        mFragmentTitleList.remove(pos);
        adapter.notifyDataSetChanged();
        mBinding.viewpager.setCurrentItem(pos - 1, false);
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return "Title " + String.valueOf(position + 1);
    }
}

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-09T16:53:01.547

我添加了一个函数“clearFragments”，并在设置新片段之前使用该函数清除适配器。这调用了 Fragments 的正确删除操作。我的 pagerAdapter 类：

```
private class ChartPagerAdapter extends FragmentPagerAdapter{
    private ArrayList<Fragment> fragmentList;

    ChartPagerAdapter(FragmentManager fm){
        super(fm);
        fragmentList = new ArrayList<>();
    }

    void setFragments(ArrayList<? extends Fragment> fragments){
        fragmentList.addAll(fragments);
    }

    void clearFragments(){
        for(Fragment fragment:fragmentList)
            getChildFragmentManager().beginTransaction().remove(fragment).commit();
        fragmentList.clear();
    }

    @Override
    public Fragment getItem(int i) {
        return fragmentList.get(i);
    }

    @Override
    public int getCount() {
        return fragmentList.size();
    }

} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-12T08:29:10.230

我通过这些步骤解决了这个问题

1-使用 FragmentPagerAdapter

2-在每个片段中创建一个随机ID

```
fragment.id = new Random().nextInt(); 
```

3-覆盖适配器中的 getItemPosition

```
@Override
public int getItemPosition(@NonNull Object object) {
    return PagerAdapter.POSITION_NONE;
} 
```

4 覆盖适配器中的 getItemId

```
 @Override
public long getItemId(int position) {
    return mDatasetFragments.get(position).id;
} 
```

5-现在删除代码是

```
 adapter.mDatasetFragments.remove(< item to delete position >);
 adapter.notifyDataSetChanged(); 
```

这对我有用，我希望有所帮助

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-08-06T20:05:32.397

现在是2020年。

简单地将其添加到 PageAdapter：

```
override fun getItemPosition(`object`: Any): Int {
    return PagerAdapter.POSITION_NONE
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-10-19T12:51:16.807

您可以覆盖该`destroyItem`方法

```
@Override
public void destroyItem(ViewGroup container, int position, Object object) {
    fragmentManager.beginTransaction().remove((Fragment) object).commitNowAllowingStateLoss();
} 
```

* * *

## 回答 #17

> 赞同：-9
> 
> 时间：2013-09-17T09:57:00.897

我希望这可以帮助你想要什么。

```
private class MyPagerAdapter extends FragmentStatePagerAdapter {

    //... your existing code

    @Override
    public int getItemPosition(Object object){
        return PagerAdapter.POSITION_UNCHANGED;
    }
} 
```

# c - math.h 与文件的链接

> ID：10396325
> 
> 赞同：0
> 
> 时间：2012-05-01T10:17:42.033
> 
> 标签：c, eclipse, makefile, math.h

我有一个小问题，我已经尝试了一切来测试这个功能，你能帮我吗？我需要编写一个名为“mutual_info.c”的 C 文件，它需要一个数学函数。我已包含该库并将其链接到生成文件中，但它仍然给了我“未定义的日志引用”......我的包含看起来像这样：（我在 Ubuntu 上使用 Eclipse）

```
#include <stdio.h>
#include <stdlib.h>
#include "sample.h"
#include "graph_or.h"
#include <math.h> 
```

我的makefile看起来像这样：

```
all:

    gcc -g amostra.c sample.h -o amostra.o

    gcc -g graph_or.c graph_or.h -o graph_or.o

    gcc -g graph_w.c graph_W.h -o graph_W.o

    gcc -g mutual_info.c -o mutual_info.o -lm

clean:
    rm *.o 
```

我完全不知道发生了什么，我什至尝试在命令“all”之前定义 LDFLAGS 并将其如下所示：

```
LDFLAGS= -lm
all:

    gcc -g amostra.c sample.h -o amostra.o

    gcc -g graph_or.c graph_or.h -o graph_or.o

    gcc -g graph_w.c graph_W.h -o graph_W.o

    gcc -g mutual_info.c -o mutual_info.o -lm

clean:
    rm *.o 
```

但是还是不行！！请任何人，我需要帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:17:02.017

让我们一步一步来。

编写 makefile 的常用方法是为每个目标设置一个规则，并使用先决条件：

```
thing: amostra.o graph_or.o graph_w.o mutual_info.o
    gcc -g amostra.o graph_or.o graph_w.o mutual_info.o -o thing -lm

mutual_info.o: mutual_info.c
    gcc -g -c mutual_info.c -o mutual_info.o -lm

amostra.o: amostra.c sample.h
    gcc -g -c amostra.c -o amostra.o

graph_or.o: graph_or.c graph_or.h 
    gcc -g -c graph_or.c -o graph_or.o

graph_w.o: graph_w.c graph_w.h
    gcc -g -c graph_w.c -o graph_w.o

mutual_info.o: mutual_info.c
    gcc -g -c mutual_info.c -o mutual_info.o -lm 
```

（我猜你想要调用可执行文件`thing`，你的意思是`graph_w`，不是`graph_W`。）

这应该可以，但我们可以让它更整洁。首先我们引入[自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)：

```
thing: amostra.o graph_or.o graph_w.o mutual_info.o
    gcc -g $^ -o $@ -lm

mutual_info.o: mutual_info.c
    gcc -g -c $< -o $@

amostra.o: amostra.c sample.h
    gcc -g -c $< -o $@

graph_or.o: graph_or.c graph_or.h 
    gcc -g -c $< -o $@

graph_w.o: graph_w.c graph_w.h
    gcc -g -c $< -o $@

mutual_info.o: mutual_info.c
    gcc -g -c $< -o $@ 
```

然后我们看到这些配方使用相同的命令，所以我们创建了一个模式规则：

```
thing: amostra.o graph_or.o graph_w.o mutual_info.o
    gcc -g $^ -o $@ -lm

amostra.o: sample.h

graph_or.o: graph_or.h 

graph_w.o: graph_w.h

%.o: %.c
    gcc -g -c $< -o $@ 
```

试一试，告诉我们它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:31:02.917

那是您的 Makefile 中的一个片段吗？您是否尝试过导出 LDFLAG？我以前见过这个错误，但它总是用 -lm 标志修复。

gcc -lm -o blah blah.c

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:57:51.223

你需要：
gcc -c -o amostra.o amostra.c
gcc -c -o graph_or.o graph_or.c
gcc -c -o graph_w.o graph_w.c
gcc -c -omutual_info.omutual_info.c
gcc - o YourExecutableName amostra.o graph_or.o graph_w.omutual_info.o -lm

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T11:09:25.363

这是一个通用的makefile，它使用我对您想要实现的最佳猜测：它编译`*.c`当前目录中的所有文件并创建一个二进制文件`mutual_info`。

```
RM := rm -f
CC := gcc
CFLAGS := -g
LDLIBS := -lm

SOURCES := $(wildcard *.c)
OBJECTS := $(SOURCES:%.c=%.o)
DEPS := $(SOURCES:%.c=%.d)
BINARY := mutual_info
FILES_TO_CLEAN := $(OBJECTS) $(DEPS)

.PHONY : all clean realclean

all : $(BINARY)

clean :
    $(RM) $(FILES_TO_CLEAN)

realclean : FILES_TO_CLEAN += $(BINARY)
realclean : clean

-include $(DEPS)

$(OBJECTS) : %.o : %.c
    $(CC) $(CFLAGS) -c -MMD -o $@ $<

$(BINARY) : $(OBJECTS)
    $(CC) -o $@ $^ $(LDLIBS) 
```

请澄清这是否不是您想要的。

# php - 当 CodeIgniter 中有额外的 URL 段时，如何显示 404？

> ID：10396326
> 
> 赞同：2
> 
> 时间：2012-05-01T10:17:47.853
> 
> 标签：php, codeigniter, url, arguments, segments

基本上，我有一个 CodeIgniter 网站，通过这个 url 注册用户：
[http ://website.com/user/register/1](http://website.com/user/register/1)

不幸的是，当您像这样在 URL 中传递额外的参数时： [http ://website.com/user/register/1/extraargs/extraargs](http://website.com/user/register/1/extraargs/extraargs)

这是我的代码：

```
<?php
class User extends CI_Controller
{
    public function register($step = NULL)
    {
        if (($step!=NULL)&&($step == 1 || $step == 2 || $step == 3)) {
            if ($step == 1){
                $this->load->view('registration_step1');
            }
        } else {
            show_404();
        }
    }
}
?> 
```

它没有显示 404。它只是忽略了额外的参数。我想要它，这样额外的参数就不会影响 URL。如果有额外的 URL 参数，我想显示 404。你怎么做到这一点？另外，额外的 URL 段会影响安全性吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T10:22:55.643

不知道为什么你真的想这样做，但你可以使用`func_num_args()`并从中验证，即，

```
public function register($step = NULL)
{
  if ( func_num_args() > 1 ) show_404();
} 
```

# python - 如何使用`python -m SimpleHTTPServer 8000`或`python -m CGIHTTPServer 8000`托管python cgi脚本？

> ID：10396330
> 
> 赞同：23
> 
> 时间：2012-05-01T10:18:53.867
> 
> 标签：python, hosting, cgi, simplehttpserver

当我运行`python -m SimpleHTTPServer 8000`或`python -m CGIHTTPServer 8000`在我的 shell 中时，我将当前目录的内容托管到 Internet。

当我浏览到时，我想在命令行中使用上述命令使以下 cgi_script.py 正常工作`192.xxx.x.xx:8000/cgi_script.py`

```
#!/usr/bin/env python
print "Content-Type: text/html"
print
print """\
<html>
<body>
<h2>Hello World!</h2>
</body>
</html>
""" 
```

但是这个脚本是按字面意思显示的，而不仅仅是“Hello World！”。部分。顺便说一句，我将 cgi_script.py 的文件权限以及我从中托管它的文件夹更改为 755。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-01T10:23:19.433

尝试使用`python -m CGIHTTPServer 8000`.

请注意，您必须将脚本移动到`cgi-bin`or`htbin`目录才能运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-02T10:07:29.150

所以不允许我发表评论，所以我将此作为单独的答案添加到罗德里戈的答案中。

您可以使用另一个`cgi_directories`默认为`['/cgi-bin', '/htbin']`. 更多信息[在这里](http://docs.python.org/2/library/cgihttpserver.html#CGIHTTPServer.CGIHTTPRequestHandler.cgi_directories)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-12T09:35:58.247

在 Python3 中，命令行很简单

```
python3 -m http.server --cgi 8000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T23:21:44.433

当我遇到这个问题时，我发现根据您在运行`python -m CGIHTTPServer 8000`命令时所在的目录会产生不同的结果。当尝试在 cgi-bin 目录中运行命令时，浏览器继续返回原始脚本代码。一旦我 cd'ed 更高一级并`python -m CGIHTTPServer 8000`再次运行命令，我的脚本就开始执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-22T17:53:01.253

@Bentley4 - 如果您仍然无法做到，请尝试导入 cgi。

**#!C:\Python34\python.exe -u** import cgi print ("Content-type:text/html")

高温高压

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-23T08:42:42.313

这对我有用，运行`python -m CGIHTTPServer 8000`与 cgi-bin 相同的菜单级别的命令，并将 cgi_script.py 移动到 cgi-bin 文件夹中。在浏览器中键入[http://localhost:8000/cgi-bin/cgi_script.py](http://localhost:8000/cgi-bin/cgi_script.py)

# postgresql - 用另一个表“条件”获取一个表

> ID：10396331
> 
> 赞同：0
> 
> 时间：2012-05-01T10:18:59.763
> 
> 标签：postgresql, select, conditional-statements

我有两个这样的表：

表名：`users`

```
emx  |   userid
---------------
1    |   1
2    |   2 
```

和另一张桌子叫`bodies`

```
id   |   emx   |   text
--------------------------
1    |   1     |   Hello
2    |   2     |   How are you? 
```

如您所见，bodys 表有`emx`哪些是`users`表的 id 号。现在，当我想获取包含的消息时，`Hello`我只需搜索它`bodies`并获取`emx`数字，然后我获取带有这些 emx 数字的用户表。所以，我正在做 2 个 sql 查询来找到它。

所以，我想做的就是在 1 个 SQL 查询中实现这一点。

我尝试了一些不正确的查询，我也尝试了 JOIN。还没有运气。我只想获取用户表，其中消息在 body 表中包含“Hello”。

注意：我使用的是 PostgreSQL 9.1.3。

任何想法/帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:28:35.507

1.  阅读有关[如何加入表格的](http://www.postgresql.org/docs/current/interactive/queries-table-expressions.html#QUERIES-FROM)文档。
2.  试试这个：

```
 SELECT u.emx, u.userid, b.id, b.text
      FROM bodies b
      JOIN users u USING (emx)
     WHERE b.text ~ 'Hello'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:28:26.903

这就是我要加入的方式。我省略了确切的收容测试。

```
SELECT users.userid 
FROM users JOIN bodies ON (users.emx = bodies.emx) 
WHERE ⌜true if bodies.text contains ?⌟ 
```

# c# - 如何找出地图上绘制的形状内的坐标？

> ID：10396336
> 
> 赞同：2
> 
> 时间：2012-05-01T10:19:15.817
> 
> 标签：c#, sql, google-maps, coordinates

谷歌有一个谷歌地图的演示，它允许你在页面上绘制一个搜索区域作为自由形式的多边形，但是给定我的 SQL 数据库中的一组条目（~25,000），我怎么能真正找出其中的条目这个形状？

谷歌的演示： http: [//gmaps-samples.googlecode.com/svn/trunk/poly/mymapstoolbar.html](http://gmaps-samples.googlecode.com/svn/trunk/poly/mymapstoolbar.html)

您可以在此处查看此功能： [http ://www.rightmove.co.uk/draw-a-search.html](http://www.rightmove.co.uk/draw-a-search.html)

数学不是我的强项，所以我想知道是否有一种简单的方法可以做到这一点（最好在数据库级别）或者在 C# 中？

**编辑：** 困难的部分是对纬度和经度坐标（例如，+40.689060、-74.044636）进行处理，其中数据和多边形点都是这种格式。我找到了一些在简单的 x/y 平面上执行此操作的示例，但在 WGS84 纬度/经度上执行此操作似乎非常棘手 - 但似乎有几个站点可以执行此操作！任何接受的答案都需要针对纬度/经度地图坐标，因为我知道如何解决简单 x/y 网格的问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:30:41.800

我不知道 google api 的详细信息，但已经看到并使用了 rightmove 功能（就在最近！）。我会在 C# 中提出一些建议，并且有用于在多边形检查中进行点的标准算法。对于 25,000 个项目，我建议并行处理，否则处理可能需要一段时间。

[StackOverflow - 多边形中的点 C#](https://stackoverflow.com/questions/4243042/c-sharp-point-in-polygon)
[WikiPedia Point in Polygon Algorithms](http://en.wikipedia.org/wiki/Point_in_polygon)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:16:20.043

.Net 拓扑套件[http://code.google.com/p/nettopologysuite/](http://code.google.com/p/nettopologysuite/)可用于这些计算。它使用 GeoAPI [http://geoapi.codeplex.com/的 .Net 实现](http://geoapi.codeplex.com/)

# php - 带有 twitteroauth 的未定义索引 Slim 框架

> ID：10396338
> 
> 赞同：1
> 
> 时间：2012-05-01T10:19:23.217
> 
> 标签：php, frameworks, twitter-oauth, slim

我正在尝试使用 twitteroauth PHP API 将 twitter 登录与苗条框架集成。我通过包括几个模块来划分我的索引页面，例如登录、注册、不同文件中的用户，并在顶部的索引中调用它。

在我为 fb 存储会话并使用中间件函数 $authorize 在所有模块中检查它之后，我的索引页面被重定向到 fb 登录。

无论如何，我的 twitter 登录代码在成功登录 fb 后可见的用户页面中。

我也将我的页面呈现给 jquery 移动框架。

twitter 按钮代码，即在 /user/me 内。

```
<a class="twitterSignInButton" rel="external" href="twitterlogininit/"></a> 
```

twitter 登录代码，即在 users.php 中

```
$app->get('/user/me/twitterlogininit/',function() use ($app){
$request_token=$app->twitter->getRequestToken('http://<domain>/App/user/me/twitterlogin/');
$_SESSION['oauth_token']=$request_token['oauth_token'];
$_SESSION['oauth_token_secret']=$request_token['oauth_token_secret'];
if($app->twitter->http_code==200){
// Let's generate the URL and redirect  
  $url = $app->twitter->getAuthorizeURL($request_token['oauth_token']);
  $app->redirect($url);
} else {
// It's a bad idea to kill the script, but we've got to know when there's an error.  
die('Something wrong happened.');
 }
});

//twitter redirect 

$app->get('/user/me/twitterlogin/',function() use ($app){
if(!empty($_GET['oauth_verifier']) && !empty($_SESSION['oauth_token']) &&  !empty($_SESSION['oauth_token_secret'])){
$app->twitteroauth = new TwitterOAuth('xxxxx',      'xxxxx', $_SESSION['oauth_token'],       $_SESSION['oauth_token_secret']);
$access_token = $app->twitteroauth->getAccessToken($_GET['oauth_verifier']);
$_SESSION['access_token'] = $access_token;
$user_info = $app->twitteroauth->get('account/verify_credentials');
print_r($user_info);
} else {
// Something's missing, go back to square 1  

}

}); 
```

我得到的错误是

```
Slim Application Error
The application could not run because of the following error:

Details:

Message: Undefined index: oauth_token
File: /var/www/html/FoodKite/App/Libs/Twitter/twitteroauth.php
Line: 118
Stack Trace:

#0 /var/www/html/FoodKite/App/Libs/Twitter/twitteroauth.php(118): Slim::handleErrors(8, 'Undefined index...', '/var/www/html/F...', 118, Array)
#1 /var/www/html/FoodKite/App/Modules/Users.php(172): TwitterOAuth->getAccessToken('yiIL1eyvwGVOrQI...')
#2 [internal function]: {closure}()
#3 /var/www/html/FoodKite/App/Slim/Route.php(392): call_user_func_array(Object(Closure), Array)
#4 /var/www/html/FoodKite/App/Slim/Slim.php(1051): Slim_Route->dispatch()
#5 /var/www/html/FoodKite/App/index.php(154): Slim->run()
#6 {main} 
```

经过大量搜索后，我发现 prolly 它的 twitter 拒绝请求。因为时间戳。仍然可以找到任何解决方法

更新：

在 facebook 登录之前，我在 index.php 上添加了所有代码。它工作得很好。与主页上的按钮。

现在，如果我将按钮添加到我想要的页面，即 /user/app 使用与主页相同的代码，它会给出相同的错误，我猜 slim 现在是一个 confloc。我在某处读到过关于瘦会话处理的内容，这可能是问题之一吗？

# java - 如何在 ListView android 上方添加固定按钮？

> ID：10396339
> 
> 赞同：1
> 
> 时间：2012-05-01T10:19:26.897
> 
> 标签：java, android, android-layout, android-listview

我想在列表视图顶部有两个按钮。如果我在列表视图下方滚动，我希望按钮保持在顶部。我在 stackoverflow 上搜索了许多解决方案，但是我找不到适合我的案例的确切解决方案。

我的布局 xml（mainlayout.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/latest_news_button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/tracked_news_button" />
    </LinearLayout>

    <ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    </ListView>

</LinearLayout> 
```

生成的图形布局正是我想要的：

![图形布局：](../Images/48bd5a6d083b68ebac3e42659ded85c0.png)

这是我使用此布局的代码，以防我无法将 Java 代码绑定到布局；

```
public class MainActivity extends ListActivity{

Button latestButton;
Button trackedButton;
ListView lv = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainlayout);

    latestButton = (Button)findViewById(R.id.button1);
    latestButton.setOnClickListener(new OnClickListener() {         
        @Override
        public void onClick(View v) {
            Toast.makeText(MainActivity.this, "Latest Button!", Toast.LENGTH_LONG).show();
        }
    });

    trackedButton = (Button)findViewById(R.id.button2);
    trackedButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Toast.makeText(MainActivity.this, "Tracked Button!", Toast.LENGTH_LONG).show();
        }
    });

    this.lv = getListView();
    String[] values = new String[]{"asdfa","qwerqwer","banbn"};
    lv.setAdapter(new ArrayAdapter<String>(BilTrackerMainActivity.this, android.R.layout.simple_expandable_list_item_1, values));

} 
```

但是，当从我的其他活动中调用此活动时，我的应用程序不幸关闭了。LogCat 说：

> 您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView

但我尝试添加`lv = (ListView)findViewById(R.id.mylist);`而不是`this.lv = getListView();`. 我无法解决这个问题。我知道，`ListView#addHeaderView`但我想通过使用这种布局来解决我的特殊问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T10:28:15.733

只需将您的列表视图 ID 更改为 `android:id="@android:id/list"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:31:29.553

使用相对布局。使用 layout_toRightOf 将第二个按钮放在第一个按钮的右侧，然后使用 layout_below 将列表视图放在按钮一个下方。像这样的东西（我还没有测试过，对任何错别字表示歉意）

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"    
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/latest_news_button" />

    <Button
        android:id="@+id/button2"
        android:layout_toRightOf="@id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/tracked_news_button" />

    <ListView
        android:id="@+id/mylist"
        android:layout_below="@id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:34:44.370

使用 [您的 ListView] 和 [使用您的按钮的 LinearLayout] 创建 FrameLayout。

在 onCreate() 中做一次这样的事情

```
LinearLayout myButtons = ...;
myButtons.bringToFront(); 
```

因此，您的 ContentView 将有一个带有两个孩子的 FrameLayout，其中一个在前台。

就这样。希望它有所帮助））

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T10:26:34.403

这是您要查找的xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="#FF394952">

 <LinearLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    style="@android:style/ButtonBar">

 <Button
    android:id="@+id/btn_AddMore"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/newItem"
    android:textColor="#FF394952"/>
 </LinearLayout>

 <ListView
    android:id="@+id/game_list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_weight="1.0" />
</LinearLayout> 
```

当您为此设计 Activity 时，不要使用 List 活动，直接使用 Activity 并在 ListView 上设置适配器。

```
 ListView lv = (ListView) findViewById(R.id.game_list);
    ArrayAdapter<String> listItem = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1, ALBUM_NAME);

    lv.setAdapter(listItem);
    lv.setTextFilterEnabled(true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T10:28:59.330

使用下面的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:id="@+id/mLlayout1" >
        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/latest_news_button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/tracked_news_button" />
    </LinearLayout>

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/mLlayout1" >
    </ListView>

</RelativeLayout> 
```

# objective-c - 如何检查图像在数组中是否可用

> ID：10396343
> 
> 赞同：-1
> 
> 时间：2012-05-01T10:20:06.463
> 
> 标签：objective-c, ios, cocoa-touch

我想检查一个特定图像是否在数组中可用

我试过这个方法。不能正常工作。如何解决这个问题？

```
UIImage *imgname=img.image;

for (UIImage *img1 in imgNameArray) {

    if([img1 isEqual:imgname])
    {
        NSLog(@"yes");
    }
    else
    {
        NSLog(@"No");
    }
} 
```

`imgarray`是来自数据库的 blob 类型图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:38:16.470

如果您查看 NSArray 的文档，您会发现一种方法，它完全符合您的要求[`-containsObject:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BABCEJDI)：

# android - 如何使用 SimpleAdapter.ViewBinder？

> ID：10396345
> 
> 赞同：3
> 
> 时间：2012-05-01T10:20:21.197
> 
> 标签：android, android-progressbar, simpleadapter, android-viewbinder

我有一个布局复杂的列表`R.layout.menu_row`。它由一个`ProgressBar`和一个文本字段组成。我使用的适配器：

```
 SimpleAdapter simpleAdapter = new SimpleAdapter(this, getData(path),
            R.layout.menu_row, new String[] { "title", "progress" },
            new int[] { R.id.text1,R.id.progressBar1}); 
```

适配器知道如何处理`TextViews`它自己但不知道`ProgressBars`，所以我写了一个复杂的数据绑定器：

```
 SimpleAdapter.ViewBinder viewBinder = new SimpleAdapter.ViewBinder() {
        @Override
        public boolean setViewValue(View view, Object data, String textRepresentation) {
            //here goes the code
            if () {
                return true;
            }
            return false;
        } 
```

现在我被困在函数内部填充映射。我需要将字符串的值`progress`设置`setProgress`为`ProgressBar`. 但我没有处理字符串`progress`和`ProgressBar`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T12:26:53.627

You need to find out if the `ViewBinder` is called for the `ProgressBar` and set its progress(from the `data` parameter(the data from column `progress` in your case)):

```
SimpleAdapter.ViewBinder viewBinder = new SimpleAdapter.ViewBinder() {
        @Override
        public boolean setViewValue(View view, Object data, String textRepresentation) {
            if (view.getId() == R.id.progressBar1) {
                // we are dealing with the ProgressBar so set the progress and return true(to let the adapter know you binded the data)
                // set the progress(the data parameter, I don't know what you actually store in the progress column(integer, string etc)).                             
                return true;
            }
            return false; // we are dealing with the TextView so return false and let the adapter bind the data
} 
```

**EDIT :** I've seen in your `addItem` method that you do:

```
temp.put("progress", name);// Why do you set again the name as progress?!? 
```

I think what you should set here is the `progress` parameter:

```
temp.put("progress", progress); 
```

Then in the `ViewBinder`:

```
if (view.getId() == R.id.progressBar1) {
   Integer theProgress = (Integer) data;
   ((ProgressBar)view).setProgress(theProgress); 
   return true;
} 
```

# java - 为什么我们在 jsp 中写 out.println() 而不是 System.out.println()？

> ID：10396347
> 
> 赞同：15
> 
> 时间：2012-05-01T10:20:31.293
> 
> 标签：java, jsp

我开始学习jsp，我看到，如果我们想在jsp中打印一些东西，我们必须写`out.println()`而不是`System.out.println()`，但是如果我们写`System.out.println()`它不会显示任何错误，但也不会对浏览器进行o/p。我想知道为什么会这样？众所周知，这`System`是一个预定义的类，`out`是连接到控制台的输出流。那么为什么我们不需要`System`用jsp编写呢？谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-01T10:21:26.933

因为`out`我们指的是 is not `System.out`，所以它是包装我们的 JSP 页面的有效方法中的一个变量。`System.out`写入 servlet 容器的控制台（通常是日志文件）；`out`是一个完全不同的类，它为生成的响应写入输出流。

当一个 JSP 被转化为代码时，它（理论上，实际上是 Tomcat）要经过两个步骤：JSP -> servlet 源代码，然后是 servlet 源代码 -> 类。整个页面放在一个方法中，在 Tomcat 中看起来像这样：

```
public void _jspService(HttpServletRequest request, HttpServletResponse response)
    throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
        response.setContentType("text/html");
        pageContext = _jspxFactory.getPageContext(this, request, response,
                  "qdforumerror.jsp", true, 65536, true);
        _jspx_page_context = pageContext;
        application = pageContext.getServletContext();
        config = pageContext.getServletConfig();
        session = pageContext.getSession();
        out = pageContext.getOut();
        _jspx_out = out;

        /* =============================================
           ...your <% ... %> JSP code here, with
           any markup outside those tags converted into
           out.print("..."); statments...
           =============================================
        */
    }
    catch (Throwable t) {
        if (!(t instanceof SkipPageException)){
            out = _jspx_out;
            if (out != null && out.getBufferSize() != 0)
                try { out.clearBuffer(); } catch (java.io.IOException e) {}
            if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        }
      }
      finally {
          _jspxFactory.releasePageContext(_jspx_page_context);
    }
} 
```

如您所见，`out`是该方法中的变量，类型`JspWriter`（而不是`OutputStream`with `System.out`）。

（旁注：您在标签中包含的`<%! ... %>`代码而不是普通`<% ... %>`标签中的代码没有放在方法中；它放在生成的 servlet 类的其他位置。）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-01T10:24:55.433

`out`in jsp 是[`JspWriter`](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/JspWriter.html)由 Jsp 自动创建的对象，用于向网页写入内容，同时用于`System.out.print()`向控制台输出/写入内容。

# javascript - 通过 .htaccess RewriteRule 从非 ssl 发布到 ssl 域

> ID：10396350
> 
> 赞同：1
> 
> 时间：2012-05-01T10:20:42.717
> 
> 标签：javascript, apache, .htaccess

我开发了一个移动 Web 应用程序，用于验证登录和注册某些后端服务。虽然应用程序是使用 phonegap 打包的，但我没有预料到的跨域发布问题。

我目前正在通过浏览器公开访问此 Web 应用程序，即不再与 Phonegap 打包。问题是我现在有跨域问题发布到另一台服务器，我能够通过我服务器上的 .htaccess 文件中的简单 RewriteRule 解决几个问题，有效地代理我的请求。我坚持的部分是代理我的常规`HTTP posts to a HTTPS`端点。

这甚至可能吗？

我正在尝试这样的事情：

```
RewriteRule ^app/login$ https://somedomain:8443/mobileLogin$1 [P,L] 
```

我知道我应该在我的域上启动并运行 SSL，但现在我只需要获得一个可用的预览链接。

是否有一个 RewriteRule 允许这个帖子发生，不管安全风险如何？

目前我只是得到一个`Status Code:403 Forbidden`

感谢磨坊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:56:52.160

您将无法将来自非安全域的请求代理到安全域（重写规则中的“P”标志指示代理请求）。这在没有代理的情况下是可能的，并且不被视为安全风险。您唯一需要注意的是，它是一个安全域，并且是与您的非安全域不同的二级域。为了克服这个问题，您可以使用从安全域传递的令牌在原始域上设置 cookie。这是许多 SSO 解决方案使用的典型模式。

关于您的重写规则，例如：

```
RewriteRule ^app/login$ https://somedomain:8443/mobileLogin$1 [R=302,L] 
```

# asp.net - 将我的服务器从 2.0 升级到 4.0 时，Asp.Net 网站出现错误

> ID：10396351
> 
> 赞同：1
> 
> 时间：2012-05-01T10:20:43.117
> 
> 标签：asp.net

此代码在具有 Visual Studio 2010 的本地计算机上运行良好，并且在 .NET Framework 2.0 上运行良好，但是当我将服务器从 2.0 升级到 4.0 时，出现以下错误：

> “/”应用程序中的服务器错误。
> 
> 编译错误
> 
> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS0246：找不到类型或命名空间名称“staticpage_namespace”（您是否缺少 using 指令或程序集引用？）
> 
> 源错误：
> 
> 第 10 行：使用 System.Web.UI.HtmlControls；
> 
> 第 11 行：使用 System.Data.SqlClient；
> 
> 第 12 行：使用 staticpage_namespace；
> 
> 第 13 行：
> 
> 第 14 行：

任何身体都可以帮忙吗？

这是我在 App_code 文件夹中用于类的代码：-

```
namespace staticpage_namespace
{       
  public class Staticpage
    {
    ......  
     public SqlDataReader InsertHome()    
        {
          SqlDataReader dr = SqlHelper.ExecuteReader(configclass.DbConn, CommandType.StoredProcedure, "InsertHome");

            return dr;
   }

        public Staticpage()
        {
            //
            // TODO: Add constructor logic here
            //
        }
    }
} 
```

这是我的网络表单的代码：-

```
using staticpage_namespace;

public partial class _Default1 : System.Web.UI.Page    
{ 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:23:22.513

这在我看来是一个转换问题。您的网站依赖于一些不存在的命名空间`staticpage_namespace`确保您在`app_code`文件夹中有适当的代码文件，然后尝试再次转换。

# ios - 禁用/隐藏应用内购买

> ID：10396353
> 
> 赞同：0
> 
> 时间：2012-05-01T10:20:49.740
> 
> 标签：ios, in-app-purchase, app-store-connect

我即将将我的免费项目交付到 iOS App Store。

但是，关联的供应门户 AppId 启用了 GameCenter 和 InApp 购买。

我没有链接到 StoreKit 框架，也没有配置任何 InApp 购买。

每当用户看到这些选项时，请有人澄清一下吗？即“立即购买”按钮上的加号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:13:51.240

归功于@Jack Lawrence。

加号实际上代表“通用应用”而不是应用内购买

# visual-studio - Visual Studio，仅折叠/扩展区域快捷方式

> ID：10396354
> 
> 赞同：14
> 
> 时间：2012-05-01T10:20:58.423
> 
> 标签：visual-studio, shortcut

是否有任何捷径可以仅折叠/展开区域？意思是，如果我有一个包含 5 个方法的区域，并且我点击折叠，该区域将崩溃，当我点击展开时，该区域将展开，我将看到所有 5 个方法的状态与以前相同（折叠/展开）。

目前我发现的快捷方式全部折叠，或展开全部，或用“全部”字代替“当前”字。

我正在寻找一个只会折叠区域的快捷方式，并且不会对区域内的其他块做任何事情。扩展也是一样。

如果没有这样的事情，也许有人找到了一些视觉扩展来做到这一点？

欢呼卢卡斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T13:10:45.560

为什么不简单地打

`ctrl`+ `m`+`m`

当光标在`#region regionname`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T13:06:14.830

您可以使用以下宏来展开/折叠区域，同时保持各个方法的展开/折叠状态不变。

[我在这里](http://devstuffs.wordpress.com/2009/08/24/toggle-all-regions-in-visual-studio/)找到了宏。请注意，我必须注释掉 CollapseAllRegions 方法中对 objSelection.EndOfDocument() 的调用才能正常工作（使用 Visual Studio 2010）

```
Imports EnvDTE
Imports System.Diagnostics
' Macros for improving keyboard support for "#region ... #endregion"
Public Module RegionTools
    ' Expands all regions in the current document
    Sub ExpandAllRegions()

        Dim objSelection As TextSelection ' Our selection object

        DTE.SuppressUI = True ' Disable UI while we do this
        objSelection = DTE.ActiveDocument.Selection() ' Hook up to the ActiveDocument's selection
        objSelection.StartOfDocument() ' Shoot to the start of the document

        ' Loop through the document finding all instances of #region. This action has the side benefit
        ' of actually zooming us to the text in question when it is found and ALSO expanding it since it
        ' is an outline.
        Do While objSelection.FindText("#region", vsFindOptions.vsFindOptionsMatchInHiddenText)
            ' This next command would be what we would normally do *IF* the find operation didn't do it for us.
            'DTE.ExecuteCommand("Edit.ToggleOutliningExpansion")
        Loop
        objSelection.StartOfDocument() ' Shoot us back to the start of the document
        DTE.SuppressUI = False ' Reenable the UI

        objSelection = Nothing ' Release our object

    End Sub

    ' Collapses all regions in the current document
    Sub CollapseAllRegions()

        Dim objSelection As TextSelection ' Our selection object

        ExpandAllRegions() ' Force the expansion of all regions

        DTE.SuppressUI = True ' Disable UI while we do this
        objSelection = DTE.ActiveDocument.Selection() ' Hook up to the ActiveDocument's selection
        objSelection.EndOfDocument() ' Shoot to the end of the document

        ' Find the first occurence of #region from the end of the document to the start of the document. Note:
        ' Note: Once a #region is "collapsed" .FindText only sees it's "textual descriptor" unless
        ' vsFindOptions.vsFindOptionsMatchInHiddenText is specified. So when a #region "My Class" is collapsed,
        ' .FindText would subsequently see the text 'My Class' instead of '#region "My Class"' for the subsequent
        ' passes and skip any regions already collapsed.
        Do While (objSelection.FindText("#region", vsFindOptions.vsFindOptionsBackwards))
            DTE.ExecuteCommand("Edit.ToggleOutliningExpansion") ' Collapse this #region
            'objSelection.EndOfDocument() ' Shoot back to the end of the document for
            ' another pass.
        Loop
        objSelection.StartOfDocument() ' All done, head back to the start of the doc
        DTE.SuppressUI = False ' Reenable the UI

        objSelection = Nothing ' Release our object

    End Sub
End Module 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-05T00:11:02.477

我编写了一个免费的 Visual Studio 扩展“ [Menees VS Tools](http://www.menees.com/VSTools.htm) ”，它提供了“折叠所有区域”和“展开所有区域”的命令。它适用于 2003 到 2013 的 VS 版本。Visual Studio 库中提供了 VS [2013](https://visualstudiogallery.msdn.microsoft.com/f702b0aa-56c3-4ad8-91b4-5e653e0ba1c3)和 VS [2012](https://visualstudiogallery.msdn.microsoft.com/42de112b-3ecf-4a9e-94f0-2b5efb053aa6)版本。

# mysql - MySQL 转换为日期时间

> ID：10396361
> 
> 赞同：0
> 
> 时间：2012-05-01T10:21:38.103
> 
> 标签：mysql, datetime

我有一个 mysql 数据库，它有一个日期列，但它是 varchar 并且格式像这样 '01/05/2012' 但我需要将它转换为日期时间格式，因为我会做一些日期时间比较。

我能做些什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:31:19.640

使用[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)：

```
SELECT STR_TO_DATE(`date`, '%d/%m/%Y') FROM tbl; 
```

# ios - 将字节数组转换为 PDF 文件 IOS

> ID：10396362
> 
> 赞同：1
> 
> 时间：2012-05-01T10:21:39.360
> 
> 标签：ios, cocoa-touch, pdf, nsdata

我有以下代码来调用`byte[]`为 PDF 文件返回的 web 服务。有什么不对 ？它正在生成损坏的 PDF 文件。

**更多细节**

IOS通过.Net Framework编写的Webservice发送对pdf文件的请求。Web 服务返回 PDF 文件的字节数组。现在我需要做的是捕获字节数组并将其转换为 IOS 中的 PDF 文件。

以下代码是我尝试做到的

```
@try {
    NSString *baseURL = @"http://host/service/GetPDF";

    NSLog(@"Service URL : %s\n", [baseURL UTF8String]);
    NSURL *serviceURL = [NSURL URLWithString: baseURL];

    NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL: serviceURL];
    [request setHTTPMethod:@"POST"];
    [request setTimeoutInterval:30.0];

    NSURLResponse *response = NULL;
    NSError *requestError = NULL;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&requestError];

    NSString *resourceDocPath = [[NSString alloc] initWithString:[[[[NSBundle mainBundle] resourcePath] stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"Documents"]];        
    NSString *filePath = [resourceDocPath stringByAppendingPathComponent:@"myPDF.pdf"];

    NSData* pdfData = [NSData dataWithBytes:[responseData bytes] length:[responseData length]];
    [pdfData writeToFile:filePath atomically:YES];     
}
@catch (NSException* ex) {
    NSLog(@"doSomethingFancy failed: %@",ex);
} 
```

# iphone - 我的foursquare authenticationaion、callback_url和申请网站是什么？

> ID：10396363
> 
> 赞同：2
> 
> 时间：2012-05-01T10:21:40.973
> 
> 标签：iphone, api, oauth, callback, foursquare

我试图将foursquare API集成到我的iphone中，但一开始就卡住了：注册我的应用程序。它要求我提供 callback_url 和应用程序网站，以便注册我的应用程序并获取我的身份验证码，但我不明白我应该为这些链接输入什么，因为我没有此应用程序的域名。它只是一个没有网站的应用程序。我已经花了很多时间试图弄清楚在foursquare 开发人员网站上的这两个字段中放置什么，但我不知道我需要做什么。如果我的 iphone 应用程序没有网站，有人知道我的 callback_url 和应用程序网站是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T13:11:53.610

当您创建自己的移动应用程序时，输入什么回调 URL 并不重要。您可以将回调 URL 设置为任何有效的 URL，但出于安全原因，最好使用您控制的 URL（这样其他人都无法获得令牌）。

请参阅“基于电话或客户端应用程序”的 Foursquare 文档：[https ://developer.foursquare.com/overview/auth](https://developer.foursquare.com/overview/auth)

还有一个指向 iOS 代码示例的链接，显示了如何直接在设备上完成 OAuth 过程：[https://github.com/anoopr/core-data-talk/blob/master/example/Classes/FoursquareAuthViewController。米](https://github.com/anoopr/core-data-talk/blob/master/example/Classes/FoursquareAuthViewController.m)

# wordpress-theming - Wordpress 主题在移动过程中丢失小部件

> ID：10396368
> 
> 赞同：0
> 
> 时间：2012-05-01T10:22:22.510
> 
> 标签：wordpress-theming, wordpress

我正在将 Worpdress 站点移动到新域和新服务器。

在这样做的过程中，我发现主题被报告为损坏，直到在 wp-admin 面板中重置。

不是这样的问题。

更大更烦人的问题是所有小部件都已停用，我无法为爱或金钱找到解决此问题的方法。我尝试在数据库本身上使用 searchandreplace 无济于事。

所有小部件都被保留，但它们未设置并位于非活动小部件区域 - 当客户端拥有超过 200 个小部件时不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:31:16.600

在从一台服务器迁移到另一台服务器期间，您可以哑（导出）并将您网站的 mysql 数据库导入新服务器的数据库。然后您必须手动编辑 wp_options 表中的一些行（'site_url' 和 'home' option_names）。然后，您必须将整个文件和文件夹复制并粘贴到新服务器。然后编辑 wp-config.php 文件。就这样。您的 Wordpress 网站将从旧服务器中停止的位置继续。没有任何数据丢失或设置更改。我通常使用这种方式，我很满意。

# debugging - 内存分析和内存泄漏搜索

> ID：10396369
> 
> 赞同：0
> 
> 时间：2012-05-01T10:22:23.343
> 
> 标签：debugging, node.js, memory, profiling, node-inspector

我的 node.js 应用程序的一部分存在内存泄漏。

我知道有用于调试的节点检查器模块，他有一个分析选项卡，但看起来这个模块不再维护（6 个月前的最后一次提交）并且无法在我的 osx 和 node.js 0.6.15 上进行分析。

是否有其他适用于 node.js 的好用且易于使用的内存分析工具？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:16:41.970

尝试[节点时间](http://nodetime.com)。它通过 V8 的内置堆分析器获取堆快照并尝试呈现它，以便轻松找到泄漏的属性和变量。这篇文章中的更多内容[http://nodetime.com/blog/detecting-memory-leaks-in-nodejs-apps](http://nodetime.com/blog/detecting-memory-leaks-in-nodejs-apps)。安装 Nodetime 非常简单。就`npm install nodetime`在`require('nodetime').profile()`所有其他 require 语句之前。

# jquery - 超时jQuery中的IE错误

> ID：10396379
> 
> 赞同：0
> 
> 时间：2012-05-01T10:23:04.617
> 
> 标签：jquery, django

我的编码是

```
<div align='center'>
    <ul id="message" >
        {% for message in messages %}
            <ul{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{message}}</ul>
        {% endfor %}
    </ul></div> 
```

和

```
setTimeout( function() {
        jQuery('#message').hide();
    }, 5000 ); 
```

它在 chrome 和 firefox 中 5 秒后淡出消息，而不是在 IE 中。有人请帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:40:06.633

你确定你需要嵌套`<ul>`？修复`ul`到`li`您的循环内部。

```
{% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{message}}</li>
{% endfor %} 
```

您的变体语义无效，IE 可能无法很好地理解它。[检查您的页面](http://validator.w3.org/)是否满足 HTML/(X)HTML 标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:49:08.727

我记不太清了，我无法测试这个，因为 amb 使用 linux，但在 IE 中我认为它会是这样的（它很丑，但可以）

```
setTimeout( "(function() {jQuery('#message').hide();})()", 5000 ); 
```

# javascript - javascript函数可以找到另一个函数

> ID：10396380
> 
> 赞同：0
> 
> 时间：2012-05-01T10:23:06.937
> 
> 标签：javascript, prototype

我在 javascript 文件中有以下代码。当我运行它时，我收到错误消息：

> “找不到变量：addZero”。

```
function addZero(n) {
    return ( n < 0 || n > 9 ? "" : "0" ) + n;
}

Date.prototype.toISODate =
        new Function("with (this)\n    return " +
           "getFullYear()+'-'+ addZero(getMonth()+1)+ '-'" +
           "+ addZero(getDate()) + 'T' + addZero(getHours())+':' " +
           "+ addZero(getMinutes()) +':'+ addZero(getSeconds()) +'.000Z'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:26:32.170

```
function addZero(n) {
    return ( n < 0 || n > 9 ? "" : "0" ) + n;
}

Date.prototype.toISODate = function() {
    // do what you want here
    // with real code! not strings...
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:18:02.290

尝试像这样重写您的 Date 扩展，以保持清晰并[避免使用`with`关键字](http://www.barryvan.com.au/2009/05/avoid-javascripts-with-keyword/)：

```
Date.prototype.toISODate =
  function(){

    function padLeft(nr,base,padStr){
        base = base || 10;
        padStr = padStr || '0';
        var  len = (String(base).length - String(nr).length)+1;
        return len > 0? new Array(len).join(padStr)+nr : nr;
    }    

    return [this.getFullYear(),
            '-',
            padLeft(this.getMonth()+1),
            '-',
            padLeft(this.getDate()),
            'T', 
            padLeft(this.getHours()),
            ':',
            padLeft(this.getMinutes()),
            ':',
            padLeft(this.getSeconds()),
            '.',
            padLeft(this.getMilliseconds(),100),
            'Z'].join('');
  }; 
```

该`padLeftZero`函数现在存在于该方法的范围内`Date.toISODate`。为了清楚起见，使用数组文字来构建返回字符串。将`new Function ...`函数分配给`Date.prototype.toISODate`. 顺便说一句，毫秒被添加到结果中（用零填充）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:28:57.917

看起来你的报价已关闭。尝试

```
return "with (this)\n    return " +
getFullYear() + '-' + addZero(getMonth()+1) + '-' +
addZero(getDate()) + 'T' + addZero(getHours())+':' +
addZero(getMinutes()) +':'+ addZero(getSeconds()) +'.000Z'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T10:29:35.880

在 Mozilla Javascript 参考页面上有一个很好的功能，用于生成 ISO 日期字符串的日期

[https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference:Global_Objects:Date](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference:Global_Objects:Date)

```
 /* use a function for the exact format desired... */
function ISODateString(d){
  function pad(n){return n<10 ? '0'+n : n}
  return d.getUTCFullYear()+'-'
      + pad(d.getUTCMonth()+1)+'-'
      + pad(d.getUTCDate())+'T'
      + pad(d.getUTCHours())+':'
      + pad(d.getUTCMinutes())+':'
      + pad(d.getUTCSeconds())+'Z'
}

var d = new Date();
console.log(ISODateString(d)); // prints something like 2009-09-28T19:03:12Z 
```

# axapta - 客户端组装

> ID：10396383
> 
> 赞同：0
> 
> 时间：2012-05-01T10:23:24.850
> 
> 标签：axapta, dynamics-ax-2012

谁能告诉我什么是“客户大会”。以及我们为什么要使用它。

我是 AX 的新手。请帮助我理解这些事情。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:23:13.910

看看[Deploying Managed Code](http://msdn.microsoft.com/en-us/library/gg889192.aspx)。

还可以在这里查看您的答案：http: [//dynamicsuser.net/forums/p/51904/268304.aspx](http://dynamicsuser.net/forums/p/51904/268304.aspx)

# android - OpenGL ES 3 轴旋转模型

> ID：10396389
> 
> 赞同：0
> 
> 时间：2012-05-01T10:24:24.280
> 
> 标签：android, opengl-es, rotation

我正在使用 Android 的 OpenGL 中的模型进行旋转。

为什么下面的这两个示例不会产生相同的结果？`x`我想，当我绕轴旋转然后`y`或`y`然后旋转时，没有区别`x`。

```
gl.glRotatef(_angleY, 0f, 1f, 0f); //ROLL
gl.glRotatef(_angleX, 1f, 0f, 0f); //ELEVATION
gl.glRotatef(_angleZ, 0f, 0f, 1f); //AZIMUTH

gl.glRotatef(_angleX, 1f, 0f, 0f); //ELEVATION
gl.glRotatef(_angleY, 0f, 1f, 0f); //ROLL
gl.glRotatef(_angleZ, 0f, 0f, 1f); //AZIMUTH 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:05:59.337

除非同时应用这些轮换，否则我认为顺序肯定很重要。

如果我有一个立方体，我围绕**x 轴**旋转它并将**正面**移动到**顶部**，在围绕**y 轴**旋转之后，**原来的正面**仍然在**顶部**。

相反，如果我首先围绕**y 轴**旋转，则**原始正面**将被移到一边，因此当我随后围绕**x 轴**旋转时，**原始正面**将**不会**旋转到**顶部**。

我相信轮换顺序**确实**很重要。

# jsf - ui 中的 varstatus 属性：jsf 1.2 中的重复

> ID：10396393
> 
> 赞同：3
> 
> 时间：2012-05-01T10:24:36.860
> 
> 标签：jsf, facelets, jsf-1.2, uirepeat

如何在 JSF 1.2 的 ui:repeat 中实现 varstatus 属性的功能？如果不能在 1.2 版中使用，有哪些可用选项来获取数组列表的第一项和最后一项？

请通过提供您的想法来帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T16:53:34.840

请改用 JSTL [`<c:forEach>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/forEach.html)。

```
<c:forEach items="#{bean.items}" var="item" varStatus="loop">
    <c:if test="#{loop.first}">First</c:if>
    <h:outputText value="#{item}" />
    <c:if test="#{loop.last}">Last</c:if>
</c:forEach> 
```

或者使用战斧[`<t:dataList>`](http://myfaces.apache.org/tomahawk-project/tomahawk12/tagdoc/t_dataList.html)代替。

```
<t:dataList value="#{bean.items}" var="item" rowCountVar="count" rowIndexVar="index">
    <h:outputText value="First" rendered="#{index == 0}" />
    <h:outputText value="#{item}" />
    <h:outputText value="Last" rendered="#{index + 1 == count}" />
</t:dataList> 
```

# php - php regex - 清理文件名

> ID：10396396
> 
> 赞同：3
> 
> 时间：2012-05-01T10:25:00.857
> 
> 标签：php, regex, preg-replace

我正在寻找优雅的正则表达式来**清理括号**，内容看起来像文件名。

```
[Nibh justo] elit Nulla [link.pdf]  auctor ipsum molestie (link.pdf) 
Condimentum euismod non [link.xls](link.xls) [link.doc](link.doc) tempus 
In [Curabitur] et 
```

结果应该是：

```
Nibh justo elit Nulla auctor ipsum molestie Condimentum euismod 
non tempus In Curabitur et 
```

我相信一定有一个捷径可以做到这一点。（文件的意思很简单——包括点。不需要检查句子。）

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T10:32:37.007

像这样的东西？

```
$str = '[Nibh justo] elit Nulla [link.pdf]  auctor ipsum molestie (link.pdf) 
Condimentum euismod non [link.xls](link.xls) [link.doc](link.doc) tempus In 
[Curabitur] and other [./beta/link.pfd]';

$str = preg_replace('`(\(|\[)[\w/\.-]+\.[a-z]+(\)|\])`i', '', $str);
$str = str_replace(array('[', ']'), '', $str);

echo $str; 
```

结果是：

```
Nibh justo elit Nulla auctor ipsum molestie Condimentum euismod 
non tempus In Curabitur and other 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T10:41:01.963

**试试这个：**

`(?:[\[\(]\w+\.\w+[\]\)])|(?:[\[\(](?=[0-9A-Za-z]))|(?:(?<=[0-9A-Za-z])[\]\)])`

`$result = preg_replace('/(?:[[(]\w+\.\w+[\])])|(?:[[(](?=[0-9A-Za-z]))|(?:(?<=[0-9A-Za-z])[\])])/m', '', $subject);`

**解释：**

```
 <!--
(?:[\[\(]\w+\.\w+[\]\)])|(?:[\[\(](?=[0-9A-Za-z]))|(?:(?<=[0-9A-Za-z])[\]\)])

Options: ^ and $ match at line breaks

Match either the regular expression below (attempting the next alternative only if this one fails) «(?:[\[\(]\w+\.\w+[\]\)])»
   Match the regular expression below «(?:[\[\(]\w+\.\w+[\]\)])»
      Match a single character present in the list below «[\[\(]»
         A [ character «\[»
         A ( character «\(»
      Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
         Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
      Match the character “.” literally «\.»
      Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
         Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
      Match a single character present in the list below «[\]\)]»
         A ] character «\]»
         A ) character «\)»
Or match regular expression number 2 below (attempting the next alternative only if this one fails) «(?:[\[\(](?=[0-9A-Za-z]))»
   Match the regular expression below «(?:[\[\(](?=[0-9A-Za-z]))»
      Match a single character present in the list below «[\[\(]»
         A [ character «\[»
         A ( character «\(»
      Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=[0-9A-Za-z])»
         Match a single character present in the list below «[0-9A-Za-z]»
            A character in the range between “0” and “9” «0-9»
            A character in the range between “A” and “Z” «A-Z»
            A character in the range between “a” and “z” «a-z»
Or match regular expression number 3 below (the entire match attempt fails if this one fails to match) «(?:(?<=[0-9A-Za-z])[\]\)])»
   Match the regular expression below «(?:(?<=[0-9A-Za-z])[\]\)])»
      Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=[0-9A-Za-z])»
         Match a single character present in the list below «[0-9A-Za-z]»
            A character in the range between “0” and “9” «0-9»
            A character in the range between “A” and “Z” «A-Z»
            A character in the range between “a” and “z” «a-z»
      Match a single character present in the list below «[\]\)]»
         A ] character «\]»
         A ) character «\)»
--> 
```

**当上述 RegEx 应用于：**

```
[Nibh justo] elit Nulla [link.pdf]  auctor ipsum molestie (link.pdf) 
Condimentum euismod non [link.xls](link.xls) [link.doc](link.doc) tempus 
In [Curabitur] et 
```

**产生所需的结果：**

```
Nibh justo elit Nulla   auctor ipsum molestie  
Condimentum euismod non   tempus 
In Curabitur et 
```

# actionscript-3 - AS3 鼠标悬停更改图像

> ID：10396400
> 
> 赞同：0
> 
> 时间：2012-05-01T10:25:12.823
> 
> 标签：actionscript-3, flash, actionscript, mouseover

目前，我正在尝试使用 mouseover 事件更改加载到 sprite 中的图像，并使用 mouseout 将其更改回来。但它不能正常工作，我错过了什么吗？

```
public class Tab extends Sprite
{
    var imageLoader:Loader = new Loader();
    var TabSprite:Sprite = new Sprite();
    var SkinImages:Array = [Skin.TAB_ACTIVE,Skin.TAB_DISABLED,Skin.TAB_HOVER,Skin.TAB_VIEW];

    public function Tab()
    {   
        for each (var Image:String in SkinImages){
            imageLoader.load(new URLRequest(Image));
        }

        TabSprite.buttonMode = true;
        addChild(TabSprite);

        TabSprite.addChild(imageLoader);
        TabSprite.addEventListener(MouseEvent.MOUSE_OVER, onTabHover);
    }

    private function onTabHover(e:MouseEvent){
        trace("HOVER");
        TabSprite.removeEventListener(MouseEvent.MOUSE_OVER, onTabHover);
        imageLoader.load(new URLRequest(Skin.TAB_HOVER));
        imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,function(e:Event):void{
            TabSprite.addEventListener(MouseEvent.MOUSE_OUT, onTabOut);
        });

    }

    private function onTabOut(e:MouseEvent){
        trace("OUT");
        TabSprite.removeEventListener(MouseEvent.MOUSE_OUT, onTabOut);
        imageLoader.load(new URLRequest(Skin.TAB_VIEW));
        imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,function(e:Event):void{
            TabSprite.addEventListener(MouseEvent.MOUSE_OVER, onTabHover);
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:55:18.200

您不应该以这种方式嵌套侦听器。只需在构造函数中添加两个：

```
TabSprite.addEventListener(MouseEvent.ROLL_OVER, onTabHover);
TabSprite.addEventListener(MouseEvent.ROLL_OUT, onTabOut); 
```

注意将 MOUSE_OVER 更改为 ROLL_OVER 在大多数情况下会更好。您也不应该在每次鼠标事件时都加载图像。预加载它们，然后使用。在侦听器中使用匿名函数也是不好的做法，因为您无法删除该侦听器：

```
imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,function(e:Event):void{
        TabSprite.addEventListener(MouseEvent.MOUSE_OUT, onTabOut);
    }); 
```

事实上，你并没有删除它——这很糟糕。

```
 for each (var Image:String in SkinImages){
        imageLoader.load(new URLRequest(Image));
    } 
```

我怀疑它是否有效，我认为您不能使用一个加载器一次加载多个图像。

尝试这个：

```
public class Tab extends Sprite
{
var imageOverLoader:Loader = new Loader();
var imageOutLoader:Loader = new Loader();
var TabSprite:Sprite = new Sprite();
var SkinImages:Array = Skin.TAB_ACTIVE,Skin.TAB_DISABLED,Skin.TAB_HOVER,Skin.TAB_VIEW];

public function Tab()
{   

    TabSprite.buttonMode = true;
    this.addChild(TabSprite); // you also need to add as a Child "Tab" object in the Main Class

    imageOutLoader.load(new URLRequest(Skin.TAB_VIEW));
    imageOverLoader.load(new URLRequest(Skin.TAB_HOVER));
    TabSprite.addChild(imageOutLoader);

    TabSprite.addEventListener(MouseEvent.ROLL_OVER, onTabHover);
    TabSprite.addEventListener(MouseEvent.ROLL_OUT, onTabOut);
}

private function onTabHover(e:MouseEvent){
    TabSprite.removeChild(imageOutLoader);
    TabSprite.addChild(imageOverLoader);

    trace("HOVER");

}

private function onTabOut(e:MouseEvent){
    TabSprite.removeChild(imageOverLoader);
    TabSprite.addChild(imageOutLoader);

    trace("OUT");

}
} 
```

尝试这个。

# python - 用于存储 2D 位数组的 Python 空间+时间高效数据结构

> ID：10396404
> 
> 赞同：9
> 
> 时间：2012-05-01T10:25:18.670
> 
> 标签：python

我想以空间和时间有效的方式在 Python 中创建一个 2D 二进制（位）数组，因为我的 2D 位数组大约为 1 百万（行）* 50000（0 或 1 的列），而且我将执行按位运算这些巨大的元素。我的数组看起来像：

```
0 1 0 1
1 1 1 0
1 0 0 0 
... 
```

在 C++ 中，对我来说最有效的方法（空间）是创建一种整数数组，其中每个元素代表 32 位，然后我可以使用移位运算符和按位运算符进行运算。

现在我知道python中有一个bitarray模块。但我无法使用位数组列表创建二维结构。我怎样才能做到这一点？

我在 C++ 中知道的另一种方法是创建一个地图，就像`map<id, vector<int> >`我可以在上面提到的那样操作向量的地方。我应该在python中使用等效的字典吗？

即使您建议我使用位数组来完成这项任务，如果我能知道是否可以让多个线程在位数组的拼接上操作以便我可以使其成为多线程，那将是很棒的。谢谢您的帮助！！

编辑：

如果需要，我什至可以继续为此创建自己的数据结构。然而，只是想在重新发明轮子之前检查一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T10:48:09.773

根据我的评论，您也许可以使用集合

```
0 1 0 1
1 1 1 0
1 0 0 0 
```

可以表示为

```
set([(1,0), (3,0), (0,1), (1,1), (2, 1), (0,2)]) 
```

或者

```
{(1,0), (3,0), (0,1), (1,1), (2, 1), (0,2)} 
```

AND 相当于 2 个集合的交集
OR 是 2 个集合的并集

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T10:36:40.233

以下情况如何：

```
In [11]: from bitarray import bitarray

In [12]: arr = [bitarray(50) for i in xrange(10)] 
```

这将创建一个 10x50 位数组，您可以按如下方式访问它：

```
In [15]: arr[0][1] = True

In [16]: arr[0][1]
Out[16]: True 
```

请记住，1Mx50K 数组需要大约 6GB 内存（以及在 64 位操作系统上构建的 64 位 Python）。

> 我是否可以让多个线程对位数组的拼接进行操作，以便我可以使其成为多线程

这不应该是一个问题，通常需要注意。请记住，由于[GIL](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)，您不太可能通过多线程实现性能改进。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T10:38:03.507

你可以使用numpy吗？

```
>>> import numpy
>>> A = numpy.zeros((50000, 1000000), dtype=bool) 
```

编辑：似乎不是最节省空间的。使用 50GB（每个布尔值 1 个字节）。有谁知道 numpy 是否有办法使用打包的布尔值？

# javascript - 为什么我的命名表格没有被退回？

> ID：10396409
> 
> 赞同：2
> 
> 时间：2012-05-01T10:25:44.637
> 
> 标签：javascript, dom

在下面的代码中，我得到一个错误

> 无法读取未定义的属性“区域排序”

当我拨打电话时

```
document.SortingForm.AreaSorted.value = Names.join("\n"); 
```

我已经看过代码一百次了，我不明白为什么会这样。我真的很感激这方面的任何帮助。

**排序.html**

```
<!doctype html>
<html>
<title>Sort</title>
<head>
    <script type="text/javascript" src="sort.js">
    </script>
</head>
<body>
<h1>Sorting String Arrays</h1>
<p>Enter two or more names in the field below,
and the sorted list of names will appear in the
text area.</p>
<form name=”SortingForm”&gt;
Name:
<input type="text" name="FieldWord" size="20" />
<input type="button" name="ButtonAddWord" value="Add" onClick="SortNames();" />
<br/>
<h2>Sorted Names</h2>
<textarea name=”AreaSorted” cols=”60” rows=”10” >
The sorted names will appear here.
</textarea>
</form>

</body>
</html> 
```

**排序.js**

```
var Names = new Array();

function SortNames()
{
    Name = document.getElementsByName("FieldWord")[0].value;
    Names.push(Name);
    Names.sort();
    document.SortingForm.AreaSorted.value = Names.join("\n");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:36:57.100

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:33:03.510

AreaSorted 不是 id .. 所以要么使用

```
document.getElementByName('AreaSorted')[0] 
```

或者

.. 给你的元素一个 id 和 use `document.getElementById`，我会推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:49:30.170

我不知道该语法的来源，但显然它不起作用（不再起作用）。要按名称获取对表单的引用，您应该使用[`document.forms`](https://developer.mozilla.org/en/DOM/document.forms).

```
document.forms.SortingForm.elements.AreaSorted.value = names.join("\n"); 
```

但推荐的方法是将 分配`id`给输入，然后使用`document.getElementById`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T10:29:35.120

为什么不尝试向 textarea 添加一个 id 并使用：

```
document.getElementById('AreaSorted'); 
```

无论形式如何，这都应该始终有效。

此外，表单名称前后的引号似乎已关闭，请尝试重新输入它们。

# python - 仅当我单击按钮时如何运行代码..python/wxpython/boa 构造函数

> ID：10396413
> 
> 赞同：0
> 
> 时间：2012-05-01T10:25:57.193
> 
> 标签：python, wxpython, boa-constructor

我正在使用 wxPython（Boa Constructor IDE）开发一个 GUI。我的 GUI 有以下内容：

1.  富文本控件
2.  开始按钮
3.  停止按钮

我的要求是当我按下 START 按钮时，数字（1、2、3 等）应该开始在文本控件中打印；当我按下停止按钮时它应该停止。代码和图形用户界面如图所示。我需要进行哪些更改才能满足我的要求？

**外貌：**

![在此处输入图像描述](../Images/cf5fac492dade0f3d827260f201e084f.png)

**代码：**

```
import wx
import wx.richtext

def create(parent):
    return Frame3(parent)

[wxID_FRAME3, wxID_FRAME3BUTTON1, wxID_FRAME3BUTTON2, wxID_FRAME3PANEL1, 
 wxID_FRAME3RICHTEXTCTRL1, 
] = [wx.NewId() for _init_ctrls in range(5)]

class Frame3(wx.Frame):
    def _init_ctrls(self, prnt):
        # generated method, don't edit
        wx.Frame.__init__(self, id=wxID_FRAME3, name='', parent=prnt,
              pos=wx.Point(579, 234), size=wx.Size(414, 492),
              style=wx.DEFAULT_FRAME_STYLE, title='Frame3')
        self.SetClientSize(wx.Size(406, 458))

        self.panel1 = wx.Panel(id=wxID_FRAME3PANEL1, name='panel1', parent=self,
              pos=wx.Point(0, 0), size=wx.Size(406, 458),
              style=wx.TAB_TRAVERSAL)

        self.richTextCtrl1 = wx.richtext.RichTextCtrl(id=wxID_FRAME3RICHTEXTCTRL1,
              parent=self.panel1, pos=wx.Point(96, 96), size=wx.Size(200, 100),
              style=wx.richtext.RE_MULTILINE, value=u'')
        self.richTextCtrl1.SetLabel(u'richText')

        self.button2 = wx.Button(id=wxID_FRAME3BUTTON2, label=u'STOP',
              name='button2', parent=self.panel1, pos=wx.Point(256, 280),
              size=wx.Size(75, 23), style=0)
        self.button2.Bind(wx.EVT_BUTTON, self.OnButton2Button,
              id=wxID_FRAME3BUTTON2)

        self.button1 = wx.Button(id=wxID_FRAME3BUTTON1, label=u'START',
              name='button1', parent=self.panel1, pos=wx.Point(88, 280),
              size=wx.Size(75, 23), style=0)
        self.button1.Bind(wx.EVT_BUTTON, self.OnButton1Button,
              id=wxID_FRAME3BUTTON1)

    def __init__(self, parent):
        self._init_ctrls(parent)

    def OnButton1Button(self, event):  #START BUTTON
        event.Skip()

    def OnButton2Button(self, event):  #STOP BUTTON
        event.Skip()

if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame = create(None)
    frame.Show()

    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:01:54.253

## 概括

一般来说，这是在 wxPython 中公认的做法，直接来自[文档](http://wiki.wxpython.org/LongRunningTasks)

1.  创建一个新的“数据”事件。

2.  让你的控制器监听“数据”事件

3.  让按下“开始”按钮启动一个线程，该线程增加一个计数器并向您的窗口发送一个带有计数器值的“数据”事件。

4.  收到事件后，将价值添加到您的`RichTextCtrl`

## 例子

这是一个例子。特别注意使用`Connect()`监听传入的值事件。

```
import wx
import wx.richtext
import threading
import time

EVT_ID_VALUE = wx.NewId()

class DataEvent(wx.PyEvent):
  def __init__(self, data):
    wx.PyEvent.__init__(self)
    self.SetEventType(EVT_ID_VALUE)
    self.data=data

class Frame3(wx.Frame):
  def __init__(self, parent, title):
    self.counter = 0
    self.worker = None

    wx.Frame.__init__(
      self, name='', 
      parent=parent,
      pos=wx.Point(579, 234), 
      size=wx.Size(414, 492),
      style=wx.DEFAULT_FRAME_STYLE, title='Frame3'
    )
    self.panel1 = wx.Panel(
      name='panel1', 
      parent=self,
      pos=wx.Point(0, 0), 
      size=wx.Size(406, 458),
      style=wx.TAB_TRAVERSAL
    )
    self.richTextCtrl1 = wx.richtext.RichTextCtrl(
      parent=self.panel1, 
      pos=wx.Point(96, 96), 
      size=wx.Size(200, 100),
      style=wx.richtext.RE_MULTILINE, 
      value=u''
    )
    self.richTextCtrl1.SetLabel(u'richText')
    self.richTextCtrl1.SetScrollbars(20,20,50,50)
    self.button2 = wx.Button(
      label=u'STOP',
      name='button2', 
      parent=self.panel1, 
      pos=wx.Point(256, 280),
      size=wx.Size(75, 23), 
      style=0
    )
    self.button2.Bind(
      wx.EVT_BUTTON, 
      self.OnStop
    )
    self.button1 = wx.Button(
      label=u'START',
      name='button1', 
      parent=self.panel1, 
      pos=wx.Point(88, 280),
      size=wx.Size(75, 23), 
      style=0
    )
    self.button1.Bind(
      wx.EVT_BUTTON, 
      self.OnStart
    )
    self.Connect(-1, -1, EVT_ID_VALUE, self.OnValue )

  def OnValue(self, event):
    self.richTextCtrl1.AppendText("%d\n"%event.data)

  def OnStart(self, event):  #START BUTTON
    self.richTextCtrl1.AppendText("START\n")
    if not self.worker:
      self.worker = WorkerThread(self)
      self.worker.start() 

  def OnStop(self, event):  #STOP BUTTON
    self.richTextCtrl1.AppendText("STOP\n")
    if self.worker:
      self.worker.stop() 

class WorkerThread(threading.Thread):
  def __init__(self, notify_window):
    threading.Thread.__init__(self)
    self.counter = 0
    self._notify_window = notify_window
    self.abort = False 

  def run(self):
    while not self.abort:
      self.counter += 1
      wx.PostEvent(self._notify_window, DataEvent(self.counter))
      time.sleep(1)

  def stop(self):
      self.abort = True

if __name__ == '__main__':
    app = wx.App()
    frame = Frame3(None, "My Hello App")
    frame.Show(True)
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T14:49:25.930

对于像这样简单的事情，我只会使用 wx.Timer 而不是搞乱线程。就像在[本教程](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)中一样。

如果您真的想使用线程，那么您可能需要阅读以下内容之一：

*   [长时间运行的任务](http://wiki.wxpython.org/LongRunningTasks)
*   [非阻塞图形用户界面](http://wiki.wxpython.org/Non-Blocking%20Gui)
*   [WxPython 和线程](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

# node.js - node.js 中的 http.get 和查询字符串

> ID：10396414
> 
> 赞同：5
> 
> 时间：2012-05-01T10:26:14.247
> 
> 标签：node.js, express

在 Node.js（使用 Express.js）中，当我`http.request`这样调用时：

```
var options = {
    host: '127.0.0.1',
    port: 80,
    path: '/',
    query: {name: "John Doe", age: 50} // <---- problem here
};
http.request(options, function(response) { ... }); 
```

一切都很好，除了`query`选项的一部分被忽略了。文档说查询字符串必须手动构建，并在内部传递`path`：类似于`path: '/?name=John%20Doe&age=50'`.

实现这一目标的最佳方法是什么？`query`是 string->{string, number} 的简单哈希。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T11:09:13.233

What you're looking for is the **querystring** library [http://nodejs.org/api/querystring.html](http://nodejs.org/api/querystring.html)

And also, you might be interested in this HTTP client request library [https://github.com/mikeal/request](https://github.com/mikeal/request)

```
var qs = require('querystring');
qs.stringify({ foo: 'bar', baz: ['qux', 'quux'], corge: '' })
// returns
'foo=bar&baz=qux&baz=quux&corge=' 
```

# opengl-es - cocos2d-iphone中如何高效绘制多个图元？

> ID：10396417
> 
> 赞同：0
> 
> 时间：2012-05-01T10:26:48.490
> 
> 标签：opengl-es, cocos2d-iphone

我正在玩 cocos2d-iphone，它看起来很棒！

但是我想为每次更新在屏幕上绘制另一个圆圈，这会非常快地降低帧速率！我可以以更快的方式绘制多个图元吗？

这是我目前使用的代码

```
-(void) draw
{
    glLineWidth(1);
    glColor4ub(100,100,255,0);
    float angle = 0;
    float radius = 10.0f;
    int numSegments = 10;
    bool drawLineToCenter = NO;

    NSInteger point;
    for (point=0;point < [points count];point++)
    {
        ccDrawCircle([[points objectAtIndex:point] CGPointValue], radius, angle, numSegments, drawLineToCenter);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T20:09:35.463

使用精灵而不是图元。然后你可以使用 CCSpriteBatchNode。

cocos2d 的原始绘制方法主要是为了调试目的，而不是为了弥补你的游戏艺术。主要它们不是批处理操作，这意味着您绘制的每个新图元都会发出一次绘制调用。这很昂贵。

# sql - 使用附加条件oracle sql返回不同组的N个结果

> ID：10396418
> 
> 赞同：1
> 
> 时间：2012-05-01T10:26:57.143
> 
> 标签：sql, oracle, top-n

我如何能够在一个 oracle 查询中为几个组提供 N 个结果。

有关示例，请参见下表：

```
 ID  Team    Auditor
    1   Tm1     Jill
    2   Tm2     Jill
    3   Tm1     Jill
    4   Tm2     Jack
    5   Tm2     Jack
    6   Tm2     Jack
    7   Tm3     Sam
    8   Tm1     Sam
    9   Tm5     Sam 
```

有更多的行有更多的审计员和团队。我想为每个审核员安排 3 个团队，尽可能由 3 个不同的团队组成。

我已经在使用以下 SQL（针对此查询[Get top results for each group (in Oracle)](https://stackoverflow.com/questions/134958/get-top-results-for-each-group-in-oracle)发布）为每个审计员返回 3 个团队，但有时他们会得到 3 个相同的团队，这并不理想（请参阅杰克）。

```
select * 
  from (select ID, 
               Team, 
               Auditor, 
               rank() over ( partition by Auditor order by ID) rank 
          from table) 
 where rank <= 3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:35:26.363

您的测试数据不包括您解释的情况。

你可以这样做：

```
select * 
from(
    select ID, 
           Team,
           Auditor,
           row_number() over (partition by Auditor order by rank1) as rank
      from (select ID, 
                   Team, 
                   Auditor, 
                   row_number() over (partition by Auditor, team order by id) rank1 
              from table) 
      )
where rank <= 3; 
```

然而，这会更贵，因为你有两种。

内部查询以 Auditor、Team 的第一个组合排名第一，第二个排名为 2，依此类推。

中间查询将 Auditor 行排在内部排名之后，因此 Auditor 将具有不同团队的第一行。

外部查询获取每个审计员的前三行。

# javascript - Jquery - 使选项卡同步动画

> ID：10396419
> 
> 赞同：1
> 
> 时间：2012-05-01T10:27:02.343
> 
> 标签：javascript, jquery, tabs, jquery-animate, carousel

这是[jsfiddle 演示](http://jsfiddle.net/XyPvP/2/)。

我正在尝试同步动画轮播中的选项卡，即它们都应该一起向左/向右滑动。但是，正如您从演示中注意到的那样，有时他们会这样做，有时他们不会。

有人可以指出我哪里出错了吗？我不仅要寻找正确的代码，还要寻找逻辑和解释。

我试图尽可能多地评论代码，以便更容易理解和查明问题。具有“动画”代码的行有注释： // ***** 注意 -- 这是动画标签向右滚动的行 *****

代码：

```
var eLeftScrollButton = document.getElementById("t_l_nav");
var eRightScrollButton = document.getElementById("t_r_nav");
var eArrowForTabs = document.getElementById("arrow");
var iActiveNo = 0;        //var. for storing the active tab. no.
var iTabSlideNo = 0;
var iTabWidth = 147;            // a tab's width
var eTabsDiv = document.getElementById("tabs");
var iTabsCount = eTabsDiv.childNodes.length;        //tabs count
var bClickable = true;                     // bool whether left & right buttons are clickable or not
var iButtonsPage = 1;                     // button page no.
var iStonesPage = 1;                     // stones page no.
var iRibbonsPage = 1;                     // ribbons page no.
var iLacesPage = 1;                     // laces page no.
var iPipingPage = 1;                     // laces page no.
displayTabNo_onstart();

/* ---------- displaying the current tab, hiding the other non-current tabs ---------- */
function displayTabNo_onstart()
{
    for ( var i = 0; i < iTabsCount; i++)
    {
        if (i === iActiveNo)
        {
            eTabsDiv.children[i].style.color = "black";
            eTabsDiv.children[i].style.fontWeight = "bold";
        } else
        {
             eTabsDiv.children[i].style.opacity = "0.2";
             eTabsDiv.children[i].style.fontWeight = "normal";
        }
    }
}

/* ---------- activate the button, ribbons etc based on what tab is active right now, & hide others ---------- */
function activateFeaturesContainer (direction)
{
        var eFeaturesContainerDiv = document.getElementById("features");
        eFeaturesContainerDiv.children[iActiveNo].style.display = "block";
        (direction === "right") ? ((eFeaturesContainerDiv.children[iActiveNo - 1].style.display = "none") & (bClickable = true)) : ((eFeaturesContainerDiv.children[iActiveNo + 1].style.display = "none") & (bClickable = true));
}

/* ---------- called when the right button for tabs is pressed, calls the below two 'right' functions ---------- */
function pressRightButton ()
{
    if (bClickable === true)
    {
        bClickable = false;
        pressRightButtonEffect();
        activateRightTab();    
    } else {
        return;
    }
}

/* ---------- called when the left button for tabs is pressed, calls the below two 'left' functions ---------- */
function pressLeftButton ()
{
    if (bClickable === true)
    {
        bClickable = false;
        pressLeftButtonEffect();
        activateLeftTab();
    } else {
        return;
    }
}

/* ---------- effect on right button when pressed ---------- */
function pressRightButtonEffect()    
{
    eRightScrollButton.style.top = "29px";        
    window.setTimeout(function()
    {
        var eStyle = window.getComputedStyle(eRightScrollButton);
        var pBackgroundColorProperty = eStyle.backgroundColor;            // getting the CSS backgroundColor
        eRightScrollButton.style.top = "28px";
    }, 150);    
}

/* ---------- effect on left button when pressed ---------- */
function pressLeftButtonEffect()
{
    eLeftScrollButton.style.top = "29px";        
    window.setTimeout(function()
    {
        var eStyle = window.getComputedStyle(eLeftScrollButton);
        var pBackgroundColorProperty = eStyle.backgroundColor;            // getting the CSS backgroundColor
        eLeftScrollButton.style.top = "28px";        
    }, 150);
}

/* ---------- tabs indicator, tabs & other animations on right button when pressed ---------- */
function activateRightTab()
{
    var direction = "right";
    if (iActiveNo < iTabsCount - 1 && iActiveNo >= 0)
    {
        iActiveNo = iActiveNo + 1;
        (iActiveNo > 0) ? eLeftScrollButton.childNodes[0].setAttribute("src", "Img/WA03_Container_LeftScrollButton_Active.png") : false;            //reinstate leftScrollbutton to active
        (iTabSlideNo < iTabsCount - 1) ? iTabSlideNo++ : iTabSlideNo;
// ***** NOTE -- THIS IS THE LINE THATS ANIMATING THE TABS TO SCROLL RIGHT *****
        $(".c_tabs").animate ({"right": ("+=147px")}, 500, "swing", function()
        {
            $(eTabsDiv.childNodes[iActiveNo]).animate ({"opacity" : "1"}, 191,"linear");
            $(eTabsDiv.childNodes[iActiveNo - 1]).animate ({"opacity" : "0.2"}, 191,"linear");            
        });
        window.setTimeout (function ()
        {
            eTabsDiv.childNodes[iActiveNo].style.fontWeight = "bold";
            eTabsDiv.childNodes[iActiveNo-1].style.fontWeight = "normal";                
        },500);
        $(eArrowForTabs).animate ({"top" : "69px"}, 191, "linear", function()
        {
            window.setTimeout (function()
            {    $(eArrowForTabs).animate ({"top" : "55px"}, 191, "linear");        }, 75);
        });
        (iTabSlideNo + 1 === iTabsCount) ? eRightScrollButton.childNodes[0].setAttribute ("src", "Img/WA02_Container_RightScrollButton_Passive.png"):false;
        window.setTimeout (function()    {activateFeaturesContainer(direction);}, 600);
    }    else {
        bClickable = true;
    }             // close -> first if statement of this function
    if (iActiveNo === iTabsCount - 1 && eRightScrollButton.childNodes[0].getAttribute("src") === "Img/WA02_Container_RightScrollButton_Passive.png")            //springy effect on last tab
    {
        $(eTabsDiv.childNodes[iActiveNo]).animate({"right" : (((iTabSlideNo * iTabWidth) + 10) + "px")}, 100).animate({"right" : (((iTabSlideNo * iTabWidth) - 5) + "px")}, 45).animate({"right" : (((iTabSlideNo * iTabWidth) + 0) + "px")}, 10);
    }            // close -> springy effect if statement
}            // close -> activateRightTab function

/* ---------- tabs indicator, tabs & other animations on left button when pressed ---------- */
function activateLeftTab()
{
    var direction = "left";
    if (iActiveNo <= iTabsCount -1 && iActiveNo > 0)            //because length doesn't count 0 & we are substracting 1 below
    {
        iActiveNo = iActiveNo - 1;
        (iActiveNo < iTabsCount - 1) ? eRightScrollButton.childNodes[0].setAttribute("src", "Img/WA01_Container_RightScrollButton_Active.png") : false;                      (iTabSlideNo > 0) ? iTabSlideNo-- : false;            
            $(".c_tabs").animate ({"right": ("-=147px")}, 500, "linear", function()
            {
                $(eTabsDiv.childNodes[iActiveNo]).animate ({"opacity" : "1"}, 250,"linear");
                $(eTabsDiv.childNodes[iActiveNo + 1]).animate ({"opacity" : "0.2"}, 250,"linear");
            });
            window.setTimeout ( function ()
            {
                eTabsDiv.childNodes[iActiveNo].style.fontWeight = "bold";
                eTabsDiv.childNodes[iActiveNo-1].style.fontWeight = "normal";                
            },500);
            $(eArrowForTabs).animate ({"top" : "69px"}, 191, "linear", function()
            {
                window.setTimeout( function()
                {    $(eArrowForTabs).animate ({"top" : "55px"}, 191, "linear");        }, 75);
            });
            (iTabSlideNo === 0) ? eLeftScrollButton.childNodes[0].setAttribute ("src", "Img/WA04_Container_LeftScrollButton_Passive.png") : false;
            window.setTimeout( function() {activateFeaturesContainer(direction)}, 600);    
    } else {         // close -> first if statement of this function
        bClickable = true;
    }    
    if (iActiveNo === 0 && eLeftScrollButton.childNodes[0].getAttribute("src") === "Img/WA04_Container_LeftScrollButton_Passive.png")            //springy effect on last tab
    {
        $(eTabsDiv.childNodes[iActiveNo]).animate({"right" : (((iTabSlideNo * iTabWidth) - 10) + "px")}, 100).animate({"right" : (((iTabSlideNo * iTabWidth) + 5) + "px")}, 45).animate({"right" : (((iTabSlideNo * iTabWidth) + 0) + "px")}, 10);
    }            // close -> springy effect if statement
}            // close -> activateRightTab function 
```

# python - 地理信息与 python

> ID：10396426
> 
> 赞同：0
> 
> 时间：2012-05-01T10:27:45.973
> 
> 标签：python, geo

我想弄清楚主机位于哪个国家/地区。有些网站会查找此信息（例如[http://geoip.flagfox.net/](http://geoip.flagfox.net/)）。在写一个爬虫之前，我想问一下你是否知道这个任务的python API。

**更新：**按照 Ashwini Chaudhary 的链接，我制作了自己的 ip2country 转换器。[在这里](https://github.com/jabbalaci/jabbapylib/blob/master/jabbapylib/network/geoinfo.py)可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:30:17.497

试试这个：

[http://netsekure.org/wp-content/uploads/ip2loc.py](http://netsekure.org/wp-content/uploads/ip2loc.py)

从命令提示符运行此脚本：`python ip2loc.py all`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:49:51.583

如果高精度不是问题，MaxMind 的免费数据库（[国家](http://www.maxmind.com/app/geolitecountry)/[城市](http://www.maxmind.com/app/geolitecity)）可以提供离线解决方案。它有一个[Python API](http://www.maxmind.com/app/python)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T13:18:10.623

你可以试试这个

[http://www.hostip.info/](http://www.hostip.info/)

像下面这样很容易

```
import urllib
response = urllib.urlopen('http://api.hostip.info/get_html.php?ip=12.215.42.19&position=true').read()
print(response) 
```

# jquery - 如何使用jquery根据一些数据检查复选框列表的项目

> ID：10396427
> 
> 赞同：-3
> 
> 时间：2012-05-01T10:27:49.987
> 
> 标签：jquery, struts2, checkboxlist

我有一个复选框列表

```
 <s:checkboxlist list="{'Mon','Tue','Wed','Thur','fri','Sat','Sun'}" 
                             name="modProcessVO.weeklyCal" id="days"/> 
```

物体

```
 " modProcessVO.weeklyCal" 

   have data as  tue,fri,sat 
```

我的问题是我无法根据来自服务器的数据检查 s:checkboxlist 项目的复选框。（即“modProcessVO.weeklyCal”）...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:24:18.383

尝试以下选项。

```
name="modProcessVO.weeklyCal" 
```

并确保“weeklyCal”应该是**string[]**

# php - 谁能告诉我为什么我的产品描述在 virtualmart 2.06 中没有正确显示

> ID：10396428
> 
> 赞同：0
> 
> 时间：2012-05-01T10:28:06.467
> 
> 标签：php, css, virtuemart

[http://cookstown.wsisrdev.com/index.php?option=com_virtuemart&view=productdetails&virtuemart_product_id=1&virtuemart_category_id=1&Itemid=114](http://cookstown.wsisrdev.com/index.php?option=com_virtuemart&view=productdetails&virtuemart_product_id=1&virtuemart_category_id=1&Itemid=114)

谁能告诉我为什么我的文字在我的产品描述中看起来是合理的请这是virutalmart 2.06

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:33:17.680

在 css 文件 position.css 中，`text-align: center;`为`<body>`元素设置了 text-alignment。这将影响页面上的所有内容。

删除它，或添加类似的内容：

> ul{ 文本对齐：左；}

# android - Android：按钮和编辑在listView中重复的文本

> ID：10396431
> 
> 赞同：0
> 
> 时间：2012-05-01T10:28:21.220
> 
> 标签：android

我的问题是我的 listView 重复了我布局的所有项目。我需要在这个 listView 的底部有编辑文本和按钮。但是这里对于 listView 的每一行都重复了编辑文本和按钮，我不知道为什么。如果有人可以帮助我活动：

```
public class MessActivity extends ListActivity
{
    public Channel chan;
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setListAdapter(Network.getInstance().Messages);
        Bundle b = getIntent().getExtras();
        this.chan = (Channel) b.get("chanSelected");
        //add all message of selected chan to the messAdapter
        for (int i = 0 ; i < this.chan.getListMessage().size() ; i++) {
            Message mess = this.chan.getListMessage().get(i);
            Network.getInstance().addMessage(mess);
        }
        setContentView(R.layout.mess_list);
    }
} 
```

适配器：

```
public class MessageAdapter extends ArrayAdapter<Message>
{
    private Context context;
    private int textViewResourceId;

    public MessageAdapter(Context context, int textViewResourceId)
    {
        super(context, textViewResourceId);
        this.context = context;
        this.textViewResourceId = textViewResourceId;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View row = convertView;
        MessHolder holder = null;
        //row null
        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(textViewResourceId, parent, false);

            holder = new MessHolder();
            holder.texte = (TextView)row.findViewById(R.id.listMess);

            row.setTag(holder);
        }
        else
        {
            holder = (MessHolder)row.getTag();
        }

        Message mess = getItem(position);
        holder.texte.setText(mess.getText());

        return row;
    }

    static class MessHolder
    {
        TextView texte;
    }
} 
```

布局 ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
    <ListView 
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_weight="1" 
          android:id="@android:id/list">
   </ListView>

           <TextView

            android:id="@+id/listMess"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:padding="10dp"
            android:textSize="16sp" >

        </TextView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="bottom" >

        //edittext
        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="text" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="Envoyer" />

    </LinearLayout>

</LinearLayout> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:36:29.360

使用`ListView`方法[addFooter(View v)](http://developer.android.com/reference/android/widget/ListView.html#addFooterView%28android.view.View%29)。

您可以为此视图定义 xml 布局并对其进行扩展：

```
ListView lv = getListView();
LayoutInflater inflater = getLayoutInflater();
View footer = (View)inflater.inflate(R.layout.footer, lv, false);
lv.addFooterView(footer, null, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T08:54:37.217

这个问题的第一个原因是 Listview 在滚动时重用它的视图，所以我们应该在我们的 get 视图中有一个逻辑来管理它

```
if(convertview == null)
{
 //code here 
}else {
 //code here 
} 
```

，但如果您不想重复使用，则可以使用以下内容：

```
 @Override
  public int getItemViewType(int position) {
    return position;
}

@Override
public int getViewTypeCount() {
    return 500;
} 
```

# drupal - Drupal 视图剥离 HTML - 段落粘在一起

> ID：10396434
> 
> 赞同：1
> 
> 时间：2012-05-01T10:28:49.400
> 
> 标签：drupal, views, strip-tags

我正在使用 Drupal 6 和 Views 2 来显示标题和一些内容的正文摘要。我想去掉 HTML，以便表格和图像等不会显示在节点摘要中。在这种情况下，最好修剪身体而不是使用“预告片”。

但是，当段落和换行 HTML 被删除时，句子会“粘在一起” - 例如：

这是一个段落。它有两个句子。这是第二段。

变成...

这是一个段落。它有两个句子。这是第二段。

第二个周期之后没有空间。我怎样才能去掉 HTML 但在这些情况下以某种方式插入空格（或达到类似的结果）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:18:56.510

单击“字段标题”下的字段，例如节点：正文，您将在修剪选项下方找到“条带 HTML”。选中该选项，您将获得所需的结果。

# tooltip - 你能在 Dojo wijit 模板中定义工具提示吗？

> ID：10396441
> 
> 赞同：0
> 
> 时间：2012-05-01T10:29:15.030
> 
> 标签：tooltip, dojo, wijit

`dijit.Tooltip`在wijit模板中定义时，我一直试图让Dojo（1.6）工作。

因此，如果我有包含以下内容的 wijit 模板：

```
<a data-dojo-attach-point="tooltipMe" href="" onclick="return false;">
  Show a Tooltip
</a>
<div data-dojo-type="dijit.Tooltip" data-dojo-props="connectId:'tooltipMe'">
  Got to love hovering over links. Sometimes you a get a free tooltip
</div> 
```

我当然可以看到链接，但是当我悬停时没有任何反应。搜索新闻组，似乎在 wijit 模板中定义工具提示可能存在问题，但 Dojo 文档中并未提及。

是否可以像这样内联定义工具提示？或者我只是做错了什么，这似乎是显而易见的地方。

如果没有，是否有一种可接受的方法来创建工具提示并将其链接到 wijit 模板中定义的 DOM 节点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:44:04.770

工具提示 connectId 属性必须是 DOM 节点的 id。data-dojo-attach-point 不是 id，它只是在实例化的小部件中创建一个引用。

因此，在您的情况下，您需要为 a-node 分配一个 ID，并在 connectId 中使用相同的 ID。为避免在创建小部件的多个实例时发生 id 冲突，您可以使用 ${id} 变量替换来确保所有 id 都是唯一的：

您的代码应如下所示：

```
<a id="${id}_link" data-dojo-attach-point="tooltipMe" href="" onclick="return false;">
  Show a Tooltip
</a>
<div data-dojo-type="dijit.Tooltip" data-dojo-props="connectId:'${id}_link'">
  Got to love hovering over links. Sometimes you a get a free tooltip
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:41:42.943

我以前这样做时遇到过问题。在我完成一些其他工作之后，我使用脚本在我的页面上创建它们，如果你在模板 postCreate 方法中使用它，也许这样的东西会对你有所帮助。

```
var span = dojo.query('.hasEntry span').forEach(function(node, index, nodelist)
{
        new dijit.Tooltip({
           connectId:node,
           position:"above",
           label: toolTipLabel
        });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-19T14:43:09.910

在这里回复一个旧线程，但只是想为希望在自定义小部件元素上使用没有 ID 的工具提示的人们分享一个解决方案。它不像使用工具提示那么漂亮，但它确实有效。它使用“dijit/popup”和“dijit/TooltipDialog”模块。

```
this.editTooltipDialog = new TooltipDialog({
    content: "<p>I love tooltips</p>",
    onMouseLeave: function(){
        popup.close(this.editTooltipDialog);
    }
});

on(this.targetDiv, 'mouseover', lang.hitch(this, function(){
    popup.open({
        popup: this.editTooltipDialog,
        around: this.targetDiv
    });
})); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T12:44:16.287

我试图在 jsFiddle 中复制该问题：http: [//jsfiddle.net/phusick/EcLLb/](http://jsfiddle.net/phusick/EcLLb/)。

我发现`dijit.Tooltip`模板中的小部件已实例化，但它没有连接鼠标事件，可能是因为它尝试连接的 DOM 节点还不存在（即尚未添加到文档 DOM 树中）。

为了证明上述我尝试在小部件的`postCreate`方法中连接工具提示，当所有 DOM 构建完成并且它工作时：

```
postCreate: function() {
    this.inherited(arguments);
    this.tooltip1.set("connectId", this.tooltipMe); // w/o this the tooltip won't show
} 
```

因此，您可以通过模板标记实例化工具提示，然后在`postCreate`方法中连接到 DOM 节点。

# .net - 如何从 Repeater 获取 c# 中的图像 ID？

> ID：10396443
> 
> 赞同：0
> 
> 时间：2012-05-01T10:29:17.207
> 
> 标签：.net

如何从 Repeater 获取 c# 中的图像 ID？在这里，我使用中继器来显示图像。如何从代码隐藏中获取此图像 ID？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:44:36.490

如果您对图像使用 asp.net Image 控件，则可以使用`.FindControl`例如：

```
Image findImg = (Image)myRepeater.items[x].FindControl("imgID"); 
```

.Items[x] 是其中 x 是特定 itemTemplate 实例的索引。索引从 0 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:33:50.090

您使用该`ClientID`物业。

# workflow-foundation-4 - 如何在工作流的运行时（在自定义活动执行方法中）将自定义活动结果分配给根级别变量？

> ID：10396446
> 
> 赞同：2
> 
> 时间：2012-05-01T10:29:30.407
> 
> 标签：workflow-foundation-4, workflow-activity

假设我有一个包含 3 个自定义活动的工作流，这些活动放置在一个序列活动中。我在序列活动级别（根）创建了一个布尔变量（将其命名为“FinalResult”）来保存结果。我的意图是，我想在完成活动后将每个自定义活动结果分配给自定义活动执行方法中的根级别变量（“FinalResult”）。

我可以通过在自定义活动中声明输出参数并在设计策略时将变量名称在设计时手动放置在活动的属性窗口中来实现这一点。

但我不想让最终用户这样做。我只想让最终用户拖放活动并在“FinalResult”变量上写入条件。在内部，我必须通过编程方式在“FinalResult”变量中维护活动结果。

最后，我想在“FinalResult”变量中维护工作流状态，并在工作流中随时随地访问它。

我在下面尝试这样得到错误“属性不存在”。

```
 WorkflowDataContext dataContext = context.DataContext;
    PropertyDescriptorCollection propertyDescriptorCollection = dataContext.GetProperties();
    foreach (PropertyDescriptor propertyDesc in propertyDescriptorCollection)
    {
        if (propertyDesc.Name == "FinalResult")
             {
                 object data = propertyDesc.GetValue(dataContext);// as WorkUnitSchema;
                 propertyDesc.SetValue(dataContext, "anil");
                 break;
             }
    } 
```

请让我们知道可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:27:16.653

我一直这样做。

只需在您的活动中实现[IActivityTemplateFactory](http://msdn.microsoft.com/en-us/library/system.activities.presentation.iactivitytemplatefactory.aspx)。当拖放到设计图面上时，设计器将确定您的活动（或任何被拖放的活动）是否实现此接口。如果是，它将构造一个实例并调用 Create 方法。

在此方法中，您可以 1）实例化您的 Activity 并 2）配置它。配置它的一部分是*将您的活动属性绑定到工作流中的其他活动参数和/或变量。*

有几种方法可以做到这一点。 **最简单的是，*要求***这些参数/变量具有**众所周知的名称**。在这种情况下，您可以通过简单地绑定到它们

```
return new MyActivity
{
    MyInArgument = new VisualBasicValue<object>(MyActivity.MyInArgumentDefaultName),
}; 
```

其中`MyActivity.MyInArgumentDefaultName`是您要绑定的参数或变量的名称。

或者，如果该变量/参数是由用户命名的......你会受到伤害。本质上，你必须

1.  `target`将传递给 Create 方法的 DependencyObject转换为`ActivityDesigner`
2.  从该广告中获取 ModelItem
3.  遍历 ModelItem 树，直到找到正确类型的参数/值
4.  使用它的名字来创建你的 VisualBasicValue

沿着 ModelItem 树走是*超级难*的。它有点像反映对象图，但更糟。如果必须这样做，您可以期望，您必须完全了解 ModelItem 的工作原理，并进行*大量*调试（写下所有内容——见鬼，视频），以便了解您必须如何在图表上移动，一路上遇到什么类型，以及如何获取它们的“名称”（提示——它通常不是 ModelItem 上的 Name 属性！）。我不得不开发大量自定义代码来遍历 ModelItem 树以查找 args/vars 以实现拖放式用户体验。它不好玩，也不完美。我不能发布那个代码，对不起。

# android - notifyDataSetChanged() 不工作

> ID：10396450
> 
> 赞同：0
> 
> 时间：2012-05-01T10:29:44.433
> 
> 标签：android, listview

我在 ListView 中显示数据，我从 2 个不同的**ArrayList**中获取数据，我已经转换为**String[]**我能够列出它们，但是 Listview 的 onClick 我正在从 ListView 中删除单击的元素并使用**notifyDataSetChanged()**所以 ListView 得到更新新元素，但在这里，当我单击 ListView 时它不会踢元素，但它仍然存在，但是当我打开 AlertDialog 框时，它会更新并单击自动删除元素，我正在使用以下代码。

```
import java.util.ArrayList; 
import android.app.Activity;
import android.app.AlertDialog;
import android.content.ContentResolver;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.CallLog;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.text.InputType;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;

public class Incoming_call extends Activity {
     Button phonebook,log,manuall;
     Intent intents;
     ListView incoming_list;
     ArrayList<String> array ;
     ArrayList<String> mobileNumbers;
     String  name ,editext;
     ArrayList<String> array_ed ;
     ArrayAdapter<String> ad;
     ArrayAdapter<String> adapter;
     public static final int PICK_CONTACT = 1;
    @Override
     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.incoming);

            phonebook = (Button)findViewById(R.id.phonebook1);
            log = (Button)findViewById(R.id.call_log1);
            manuall = (Button)findViewById(R.id.manually1);
            incoming_list = (ListView)findViewById(R.id.list1);
            array = new ArrayList<String>();

            phonebook.setOnClickListener(new Button.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                    // TODO Auto-generated method stub
                                      intents = new Intent(Intent.ACTION_PICK);
                                      intents.setType(ContactsContract.Contacts.CONTENT_TYPE);
                                      startActivityForResult(intents, PICK_CONTACT);

                            }
                    });
            log.setOnClickListener(new Button.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                    // TODO Auto-generated method stub
                                    Intent i  = new Intent(Incoming_call.this,ListView2Activity.class);
                                    startActivity(i);
                            }
                    });
            manuall.setOnClickListener(new Button.OnClickListener() {

                            @Override
                            public void onClick(View v) {
                                    // TODO Auto-generated method stub
                                    AlertDialog.Builder builder = new AlertDialog.Builder(Incoming_call.this);
                                builder.setCancelable(true);
                                builder.setTitle("My Title");
                                builder.setInverseBackgroundForced(true);
                                builder.setIcon(R.drawable.ic_launcher);
                                final EditText ed = new EditText(Incoming_call.this);
                                ed.setInputType(InputType.TYPE_CLASS_PHONE);
                                builder.setView(ed);
                                builder.setPositiveButton("Yes",
                                        new DialogInterface.OnClickListener() {
                                                        @Override
                                                        public void onClick(DialogInterface dialog, int which)
                                                        {
                                                            Log.d("log",ed.getText().toString());
                                                            array.add(ed.getText().toString());
                                                            ad = new ArrayAdapter<String>(Incoming_call.this,android.R.layout.simple_list_item_1,array);
                                                            incoming_list.setAdapter(ad);
                                                            ad.notifyDataSetChanged();
                                                            dialog.dismiss();
                                                         }
                                                   });
                                            builder.setNegativeButton("No",
                                                    new DialogInterface.OnClickListener() {
                                                        @Override
                                                        public void onClick(DialogInterface dialog,int which)
                                                        {
                                                            dialog.dismiss();
                                                        }
                                                    });
                                            AlertDialog alert = builder.create();
                                            alert.show();

                            }
                    });

            incoming_list.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        final int arg2, long arg3) {
                    // TODO Auto-generated method stub

                    AlertDialog.Builder adb=new AlertDialog.Builder(Incoming_call.this);
                    adb.setMessage("Selected Item is = "+incoming_list.getItemAtPosition(arg2));
                    adb.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                            array.remove(arg2); 

                        }
                    });
                    adb.show();                                 }
            });                   
     }
      @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
              Log.d("log", "requestCode="+requestCode+", resultCode="+resultCode+", data="+data);
             super.onActivityResult(requestCode, resultCode, data);

   if(resultCode ==  Activity.RESULT_OK)
    {        
     switch(requestCode)
     {
             case  PICK_CONTACT:
             {      

                     Log.d("log","pick");
                 Cursor cursor =  managedQuery(data.getData(), null, null, null, null);
                 cursor.moveToNext();
                   name = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME));
                 String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
                 Log.d("log","name = "+name );
                 cursor.close();
                 ArrayList<String> homeNumbers = new ArrayList<String>();
                 mobileNumbers = new ArrayList<String>();
                 ArrayList<String> workNumbers = new ArrayList<String>();
                 Log.d("log","array");
                 ContentResolver cr = getContentResolver();
                 Cursor phones = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                         ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id }, null);
                 Log.d("log","cursor phone");
                 if(phones != null && phones.moveToFirst()) {
                     Log.d("log","if");
                         while (phones.isAfterLast() == false) {
                             Log.d("log","while");
                                 String number = phones.getString(phones.getColumnIndex(Phone.NUMBER));
                                 int type = phones.getInt(phones.getColumnIndex(Phone.TYPE));

                                 switch (type) {
                                 case Phone.TYPE_HOME:
                                         // do something with the Home number here...
                                         Log.d("log","home");
                                     //    array.add("Name is :" +name + "Number :"+ number);
                                         homeNumbers.add(number);
                                         break;
                                 case Phone.TYPE_MOBILE:
                                         // do something with the Mobile number here...
                                             Log.d("log","mobile");
                                         Toast.makeText(this, "Contect LIST  =  "+name  +number, Toast.LENGTH_LONG).show();
                                      //   array.add("Name is :" +name + "Number :"+ number);
                                         mobileNumbers.add(number);
                                         break;
                                 case Phone.TYPE_WORK:
                                         // do something with the Work number here...
                                    //         array.add("Name is :" +name + "Number :"+ number);
                                                    Log.d("log","work");
                                         workNumbers.add(number);
                                         break;
                                 }  //switch end

                                 phones.moveToNext();
                                 phones.close();
                         } // while end
                 }  // if end

                Log.d("lmt", "Name :"+name  + " Number : " + mobileNumbers);
                if(mobileNumbers.equals(null) || mobileNumbers.equals(""))
                {
                    Toast.makeText(getApplicationContext(), "Dont have mobile Numbers", Toast.LENGTH_LONG).show();
                }
                else
                {
                    array.add(name + "    " +mobileNumbers);
                }

                    adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,array);
                    incoming_list.setAdapter(adapter);
                    adapter.notifyDataSetChanged();
                    Toast.makeText(Incoming_call.this, name +mobileNumbers, Toast.LENGTH_LONG).show();
             } // case end
     } // switch end
    } // if end

        } // onActivityResult End

      }  // All End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:32:51.170

有时 notifyDataSetChanged() 不起作用我仍在寻找原因，但要实现您的目标，您可以做一件事，通过 finish() 和 startActiviy() 重新启动您的活动。

我曾经面临同样的问题。

# ios - IOS空白开始屏幕

> ID：10396452
> 
> 赞同：0
> 
> 时间：2012-05-01T10:30:00.360
> 
> 标签：ios

我使用 xib 文件创建了一个名为 Login 的控制器。我想让它成为开始屏幕。所以在我的应用委托中，

H 文件：

```
UIWindow *login;
@property (nonatomic, retain) IBOutlet UIWindow *login; 
```

M 文件：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Override point for customization after application launch.
[self.login makeKeyAndVisible];
    return YES;
} 
```

我错过了链接到界面生成器之类的东西吗？我得到一个空白屏幕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:37:11.050

I think you need to create a `UIViewController` subclass together with your login nib file and then `alloc` and `init` this view controller so that you can then make the `UIViewController`'s view the main view.

Even better would probably be the use of storyboard, where you can easily set the initial view controller all on your storyboard.

There is a good [Tutorial about iOS Storyboards](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1). I personally find the use of storyboards very convenient. In this SO question I listed some of the pros and cons of storyboards (IMHO):

[Does storyboard eliminate the need for .nib](https://stackoverflow.com/questions/8495179/does-storyboard-eliminate-the-need-for-nib/8574345#8574345)

# html - 如何使用 C# 从网页获取日期信息？

> ID：10396464
> 
> 赞同：1
> 
> 时间：2012-05-01T10:30:42.090
> 
> 标签：html, datetime, html-parsing, web-crawler

我目前正在编写一个小型爬虫程序，试图获取网页并将它们编入索引。

我想知道网页是什么时候制作的或大约什么时候制作的。

例如，一个日期的新闻页面通常是在当天创建的。

如何准确获取日期？

一种天真的想法是从 HTML 中获取日期。通常，新闻或博客页面会在某处写下日期。但是由于 HTML 没有特定的标签，我怎样才能得到它呢？

尝试不同的可能日期格式？

任何人都可以给我一些建议吗？或者有没有我可以使用的图书馆？

谢谢

# c# - 调试远程 ASP.NET Web 方法

> ID：10396468
> 
> 赞同：1
> 
> 时间：2012-05-01T10:31:01.100
> 
> 标签：c#, asp.net, exception, iis

我正在开发 Wp7 应用程序，并且在调用某些方法时遇到了服务器异常。我可以访问托管服务的服务器，但我看不到如何调试或从异常中获取更多信息以便我可以处理它。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:34:22.323

您可以订阅[`Application_Error`Global.asax](https://stackoverflow.com/questions/434859/handling-application-error-in-asp-net-apps-global-asax)中每个未处理的异常触发的事件并记录错误详细信息。

如果您可以控制远程服务器，您还可以安装[远程调试工具](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)并逐步执行代码。

# java - 如何在 Java 中创建缓存以存储用户会话

> ID：10396473
> 
> 赞同：0
> 
> 时间：2012-05-01T10:31:20.117
> 
> 标签：java, arrays, data-structures, arraylist

我想在 java 中创建缓存来存储用户会话。它类似于缓存，例如将为每个用户存储 5 个元素。我需要某种必须能够记住这些数据的 java 数据结构。到目前为止，我创建了这个 Java 代码：

```
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

public class SessionCache {

    public SessionCache() {
    }

    /* Create object to store sessions */
    private List<ActiveSessionsObj> dataList = new ArrayList<>();

    public static class ActiveSessionsObj {
        private int one;
        private int two;
        private int three;
        private int four;
        private int five;

        private ActiveSessionsObj(int one, int two, int three, int four, int five) {
            throw new UnsupportedOperationException("Not yet implemented");
        }
    }

    public List<ActiveSessionsObj> addCache(int one, int two, int three, int four, int five){

        dataList.add(new ActiveSessionsObj(
                        one,
                        two,
                        three,
                        four,
                        five));
          return dataList;    
    }   

} 
```

我是 java 新手，我需要帮助我如何向结构中添加数据以及如何从结构中删除数据。我需要使用密钥来执行此操作。这可能吗？或者是否有更合适的数据结构来根据 mu 需要存储数据？

最良好的祝愿

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T10:36:42.710

大概每个用户都有一个唯一的 id，所以一个`Map`实现似乎是一个明智的选择，其中键是用户 id，值是`ActiveSessionsObj`：

```
Map<String, ActiveSessionsObj> cache =
    new HashMap<String, ActiveSessionsObj>(); 
```

`put()`有关从 a 添加 ( ) 和删除 ( `remove()`) 元素的信息，请参见 Javadoc `Map`：

```
public void addCache(String user_id,int one,int two,int three,int four,int five)
{
    // You may want to check if an entry already exists for a user,
    // depends on logic in your application. Otherwise, this will
    // replace any previous entry for 'user_id'.
    cache.put(user_id, new ActiveSessionsObj(one, two, three, four, five));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T10:36:27.457

基本上，您不需要 in 中的列表`SessionCache`，只需定义一些私有属性，并提供一些重新`get set`使用的方法来访问这些属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T10:46:32.270

您应该使用[Map](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)接口的实例来存储数据对象。您需要确保每个用户都有一个唯一的密钥；如果你这样做，你可以使用这个键作为[HashMap的输入](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

此外，为了使您的 SessionCache 更少依赖于 ActiveSessionsObj 的内部细节，您应该使 addCache 方法采用 ActiveSessionsObj 之一。使用地图实现，这看起来更像：

```
public void addCache(String key, ActiveSessionsObj data){

    dataMap.put(key, data);

} 
```

最好不要从 SessionCache 返回 Map，否则会破坏缓存的[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。

# ruby - Ruby for 循环陷阱？

> ID：10396475
> 
> 赞同：16
> 
> 时间：2012-05-01T10:31:44.803
> 
> 标签：ruby

在讨论 Ruby 循环时，[Niklas B.](https://stackoverflow.com/users/916657/niklas-b)最近谈到了与每个循环相比的 for 循环“不引入新范围”。我想看看一些例子，说明人们对此有何感受。

好的，我扩展这个问题：在 Ruby 中，我们还能在哪里看到 apears 的作用/结束块分隔符，但实际上里面没有范围？除了 for ... do ... end 还有什么？

好的，问题的另一个扩展，有没有办法用花括号 { block } 编写 for 循环？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T11:29:17.827

让我们通过一个例子来说明这一点：

```
results = []
(1..3).each do |i|
  results << lambda { i }
end
p results.map(&:call)  # => [1,2,3] 
```

酷，这是预期的结果。现在检查以下内容：

```
results = []
for i in 1..3
  results << lambda { i }
end
p results.map(&:call)  # => [3,3,3] 
```

咦，怎么回事？相信我，这类错误很难追踪。Python 或 JS 开发人员会明白我的意思 :)

仅这一点就是我避免像瘟疫一样的循环的一个原因，尽管有更多好的论据支持这一立场。正如 Ben 正确指出的那样，使用正确的方法 from[`Enumerable`](http://apidock.com/ruby/Enumerable)几乎总是比使用普通的旧命令式`for`循环或更高级的`Enumerable#each`. 例如，上面的例子也可以简洁地写成

```
lambdas = 1.upto(3).map { |i| lambda { i } }
p lambdas.map(&:call) 
```

> 我扩展了这个问题：在 Ruby 中，我们还能在哪里看到 apears 的作用/结束块分隔符，但实际上里面没有范围？除了 for ... do ... end 还有什么？

每一个循环结构都可以这样使用：

```
while true do
  #...
end

until false do
  # ...
end 
```

另一方面，我们可以在没有 的情况下编写每一个`do`（这显然是更可取的）：

```
for i in 1..3
end

while true
end

until false
end 
```

> 问题的另一个扩展，有没有一种方法可以用花括号 { block } 编写 for 循环

不，那里没有。另请注意，术语“块”在 Ruby 中具有特殊含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T23:33:16.690

首先，我将解释为什么你不想使用`for`，然后解释为什么你可能会。

您不想使用的主要原因`for`是它不习惯。如果您使用`each`，您可以轻松地将其替换`each`为 a`map`或 a`find`或a ，`each_with_index`而无需对代码进行重大更改。但是没有`for_map`or `for_find`or `for_with_index`。

另一个原因是，如果您在 内的块中创建一个变量`each`，并且之前没有创建它，那么只要该循环存在，它就会一直存在。一旦你对它们没有用处就摆脱它们是一件好事。

现在我会提到为什么你可能想要使用`for`. `each`为每个循环创建一个闭包，如果重复该循环太多次，该循环可能会导致性能问题。在[https://stackoverflow.com/a/10325493/38765](https://stackoverflow.com/a/10325493/38765)中，我发布了使用`while`循环而不是块使其变慢的帖子。

```
RUN_COUNT = 10_000_000
FIRST_STRING = "Woooooha"
SECOND_STRING = "Woooooha"

def times_double_equal_sign
  RUN_COUNT.times do |i|
    FIRST_STRING == SECOND_STRING
  end
end

def loop_double_equal_sign
  i = 0
  while i < RUN_COUNT
    FIRST_STRING == SECOND_STRING
    i += 1
  end
end 
```

`times_double_equal_sign`始终花费 2.4 秒，而`loop_double_equal_sign`始终快 0.2 到 0.3 秒。

在[https://stackoverflow.com/a/6475413/38765](https://stackoverflow.com/a/6475413/38765)中，我发现执行一个空循环需要 1.9 秒，而执行一个空块需要 5.7 秒。

知道为什么不想使用`for`，知道为什么要使用`for`，并且只在需要时使用后者。除非你对其他语言感到怀旧。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:56:21.230

好吧，在 1.9 之前的 Ruby 中，即使是块也不完美。他们并不总是引入新的范围：

```
i = 0
results = []
(1..3).each do |i|
  results << lambda { i }
end
i = 5
p results.map(&:call)  # => [5,5,5] 
```

# php - HTML 邮件标头

> ID：10396476
> 
> 赞同：5
> 
> 时间：2012-05-01T10:31:51.170
> 
> 标签：php, html, email, ubuntu, header

我在我的 Ubuntu 服务器上设置了 PHP 和 Postfix。我需要从 PHP 脚本发送 HTML 电子邮件。电子邮件发送得很好，但它显示为包含 HTML 标记的纯文本。此外，一些标题也显示在电子邮件本身中。

我的猜测是，它与标题有关。我花了将近一天的时间寻找可能的解决方案，但没有找到。

这是PHP代码：

```
$headers='';
$headers.="MIME-Version: 1.0 \r\n";
$headers.="Content-type: text/html; charset=\"UTF-8\" \r\n";
$headers.="From: ".FROM_EMAIL."\r\n";
mail($email, $vars['title'], $content, $headers); 
```

编辑：

```
 $headers='';
 $headers.='MIME-Version: 1.0'."\r\n";
 $headers.='Content-type: text/html; charset=iso-8859-1'."\r\n";
 $headers.='From: Kinesioteip.ee<'.FROM_EMAIL.'>'."\r\n";
 $headers.='To: '.$email."\r\n";
 mail($email, $vars['title'], $content, $headers); 
```

还是没有运气...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T10:38:54.357

```
 $headers = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

    // Additional headers
    $headers .= 'To:' . "\r\n";
    $headers .= 'From: Admin<youremail@email.com>' . "\r\n";
    // Mail it
    mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T10:39:51.620

你能试着改变这些行吗

```
$headers.="MIME-Version: 1.0 \r\n";
$headers.="Content-type: text/html; charset=\"UTF-8\" \r\n"; 
```

至

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

看看它们是否有效

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T10:38:19.863

我认为你的第四个标题是错误的，因为 FROM_EMAIL 变量没有'$'

尝试

```
 $headers.="From: ".$FROM_EMAIL."\r\n"; 
```

$vars['title'] 更改为 $var

```
 mail($email, $vars, $content, $headers); 
```

# iphone - 如何在视图关闭之前显示对 UITableView 的更新

> ID：10396477
> 
> 赞同：0
> 
> 时间：2012-05-01T10:31:56.960
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个 UITableView 显示一组用户将从中选择的选项。When a row is selected the table will update to add a checkmark to that row (and remove it from all others). 到目前为止一切都很好。

我想要做的是在用户进行行选择后关闭视图，但我希望首先更新表格视图，以便用户可以看到复选标记移动到正确的行（但可能会短暂显示）。

如果我执行以下操作：

```
[myTableView reloadData];
[parentView closeDialog]; 
```

表格更新不会显示，对话框将简单地关闭。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:35:24.460

添加`self`前缀并使用添加一些延迟`performselector`

```
[self.myTableView reloadData];
[parentView closeDialog]; 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:35:52.947

使用此技术在延迟后调用 closeDialog

```
//afterDelay parameter represents number of seconds to delay the method call
[parentView performSelector:@selector(closeDialog) withObject:nil afterDelay:1.0 ]; 
```

# javascript - 在 IE9 中使用 javascript 更新框架时出现“预期功能”错误

> ID：10396478
> 
> 赞同：0
> 
> 时间：2012-05-01T10:32:03.953
> 
> 标签：javascript

我们正在使用一些 javascript 来更新子框架。这在 IE7 和 IE8 中运行良好，但仅在打开兼容模式时才在 IE9 中运行。我在下面添加了代码片段。我尝试了各种解决方案，包括使用窗口而不是文档，但似乎没有任何效果。总是给出错误“预期功能”。

任何帮助将不胜感激！谢谢，安德鲁

```
 <script language="jscript">
 function UpdateContent(strAddress) {
       document.frames("content").document.location.replace(strAddress);
                    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:35:12.637

[`document.frames`](http://msdn.microsoft.com/en-us/library/ie/ms537459%28v=vs.85%29.aspx)是一个非标准（可能不存在）的集合。

要阅读 IFrame 集合，请使用方括号和`window.frames`. 此外，删除`language="jscript"`或替换为`language="javascript"`.

```
frames["content"].document.location.replace(strAddress); 
```

# java - 当 Netbeans 运行相同的程序时无法从 CLI 运行 java 程序

> ID：10396479
> 
> 赞同：0
> 
> 时间：2012-05-01T10:32:04.243
> 
> 标签：java, netbeans

以下程序在 Netbeans IDE 中运行良好，但是当我尝试从命令提示符运行时，我得到

```
Exception in thread "main" java.lang.NoClassDefFoundError: Gcd (wrong name: algo
rithms/Gcd)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$100(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)

package algorithms;

public class Gcd {

public static int ComputeGcd(int number1, int number2){
    if(number2 == 0){ return number1;}
    else{
         int remainder = number1 % number2;
         return ComputeGcd(number2,remainder);
    }
}

public static void main(String[] args) {

    int a = 32;
    int b = 12;
    System.out.println(ComputeGcd(a,b));

} 

} 
```

![在此处输入图像描述](../Images/fed7b887a2525f1777051665a4638e58.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T10:35:02.887

您应该在`src`目录中，运行以下命令：

```
...\src> javac algorithms\Gcd.java
...\src> java algorithms.Gcd 
```

（您不必*从*该目录编译，但我建议您这样做。）

该`java`命令采用完全限定的类名，其中包括包名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:34:24.633

在 src 上面移动两层，然后做一个 java 算法.Gcd

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T10:40:09.123

您是否创建了目录`algorithm`，尝试通过评论运行程序`package algorithm`，它会工作...一旦确定，您可以使用

```
javac algorithms.Gcd.java; 
java algorithms.Gcd` 
```

[正如@JonSkeet 所提到的，您可以在此处](http://en.wikipedia.org/wiki/Java_package)了解有关包结构的更多信息，

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-01T10:33:57.023

您可能需要查看 Netbeans 为 Java 提供的 CLI 命令没有提供的类路径。

`package`如果您不使用包， 请尝试删除呼叫，因为它可能会导致并发症。

# jquery - Jquery UI Datepicker onclick 事件

> ID：10396480
> 
> 赞同：0
> 
> 时间：2012-05-01T10:32:18.103
> 
> 标签：jquery, events, user-interface, calendar, datepicker

当用户单击事件的日期时，我想打开一个 URL。我使用 jQuery UI Datepicker，但我看不出问题出在哪里。

这是我的代码：

```
<script>
$(document).ready(function() {
    var events = [

        {
        Title: "titre",
        Idevent: "1",
        Date: new Date("05/20/2012")},
    {
        Title: "test24",
        Idevent: "3",
        Date: new Date("06/14/2012")}
    ];
    $("#calendarcaps").datepicker({
        beforeShowDay: function(date) {
            var result = [true, '', null];
            var matching = $.grep(events, function(event) {
                return event.Date.valueOf() === date.valueOf();
            });

            if (matching.length) {
                result = [true, 'highlight', null];
            }

            return result;
        },
        onSelect: function(dateText) {
            var date, selectedDate = new Date(dateText),
                i = 0,
                event = null;

            while (i < events.length && !event) {
                date = events[i].Date;

                if (selectedDate.valueOf() === date.valueOf()) {
                    event = events[i];
                }

                i++;
            }

            if (event) {
                window.location.href = "test.php?id=" + event.Idevent;
            }
        }
    });
});​
</script> 
```

谁能看到我做错了什么？

# opencv - OpenKinect：无法构建 RGBDemo

> ID：10396485
> 
> 赞同：1
> 
> 时间：2012-05-01T10:32:55.380
> 
> 标签：opencv, makefile, cmake, computer-vision, openkinect

我按照[“Hacking the Kinect”第 15-16 页（Apress 2011）](http://books.google.de/books?id=IftkzqRjbO4C&lpg=PP1&dq=hacking%20the%20kinect&pg=PA15#v=onepage&q=hacking%20the%20kinect&f=false)一书中给出的说明在我的系统（运行 Xubuntu 12.04 的 32 位 x86 机器）上安装[RGB Demo](http://labs.manctl.com/rgbdemo/)（版本 0.5.0）。

我下载并提取了演示的源代码，并按照书中的描述安装了所需的包：

libboost-all-dev、libusb-1.0-0-dev、libqt4-dev、libgtk2.0-dev、cmake、ccmake（来自 cmake-curses-gui）、libglew1.5-dev、libgsl0-dev、freeglut3-dev（**不是**书中所述的 libglut3-dev）和 libxmu-dev。

**笔记本打字错误：** libgs10-dev 实际上应该是 libgsl0-dev。

在源代码的根目录上运行 ccmake 时，我设置了本书给出的标志：

*   BUILD_EXAMPLES **ON**
*   BUILD_FAKENECT **ON**
*   BUILD_SHARED_LIBS **ON**
*   NESTK_USE_FREENECT **ON**
*   NESTK_USE_OPENNI**关闭**
*   NESTK_USE_PCL**关闭**

并将所有其他标志保留为默认值。

然后我继续配置和生成没有问题，但是在随后运行 make 时，我遇到了以下错误：

```
[ 35%] Building CXX object nestk/deps/opencv/modules/core/CMakeFiles/opencv_core.dir/src/out.o
In file included from /home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/src/precomp.hpp:55:0,
                 from /home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/src/out.cpp:43:
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:354:13: error: ‘ptrdiff_t’ does not name a type
In file included from /home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/src/precomp.hpp:55:0,
                 from /home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/src/out.cpp:43:
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2600:13: error: ‘ptrdiff_t’ does not name a type
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2623:24: error: declaration of ‘operator[]’ as non-function
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2623:22: error: expected ‘;’ at end of member declaration
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2623:34: error: expected ‘)’ before ‘i’
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2626:36: error: declaration of ‘operator+=’ as non-function
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2626:32: error: expected ‘;’ at end of member declaration
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2626:46: error: expected ‘)’ before ‘ofs’
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2628:36: error: declaration of ‘operator-=’ as non-function
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2628:32: error: expected ‘;’ at end of member declaration
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2628:46: error: expected ‘)’ before ‘ofs’
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2641:5: error: ‘ptrdiff_t’ does not name a type
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2642:15: error: ‘ptrdiff_t’ has not been declared
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2661:13: error: ‘ptrdiff_t’ does not name a type
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2684:21: error: ‘ptrdiff_t’ has not been declared
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2687:37: error: declaration of ‘operator+=’ as non-function
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2687:33: error: expected ‘;’ at end of member declaration
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2687:47: error: expected ‘)’ before ‘ofs’
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2689:37: error: declaration of ‘operator-=’ as non-function
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2689:33: error: expected ‘;’ at end of member declaration
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2689:47: error: expected ‘)’ before ‘ofs’
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2733:22: error: declaration of ‘operator[]’ as non-function
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2733:20: error: expected ‘;’ at end of member declaration
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2733:32: error: expected ‘)’ before ‘i’
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2736:32: error: declaration of ‘operator+=’ as non-function
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2736:28: error: expected ‘;’ at end of member declaration
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2736:42: error: expected ‘)’ before ‘ofs’
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2738:32: error: declaration of ‘operator-=’ as non-function
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2738:28: error: expected ‘;’ at end of member declaration
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:2738:42: error: expected ‘)’ before ‘ofs’
In file included from /home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:4047:0,
                 from /home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/src/precomp.hpp:55,
                 from /home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/src/out.cpp:43:
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/operations.hpp:2822:15: error: ‘ptrdiff_t’ does not name a type
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/operations.hpp:3383:31: error: ‘ptrdiff_t’ does not name a type
In file included from /home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/core.hpp:4048:0,
                 from /home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/src/precomp.hpp:55,
                 from /home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/src/out.cpp:43:
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/mat.hpp:1629:57: error: declaration of ‘operator+=’ as non-function
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/mat.hpp:1629:57: error: ‘ptrdiff_t’ was not declared in this scope
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/include/opencv2/core/mat.hpp:1629:57: note: suggested alternatives:
/usr/include/c++/4.6/i686-linux-gnu/./bits/c++config.h:156:28: note:   ‘std::ptrdiff_t’
/usr/include/c++/4.6/i686-linux-gnu/./bits/c++config.h:156:28: note:   ‘std::ptrdiff_t’
/home/josh/dev/kinect/RGBDemo-0.5.0/nestk/deps/opencv/modules/core/src/out.cpp:305:1: error: expected ‘}’ at end of input
make[2]: *** [nestk/deps/opencv/modules/core/CMakeFiles/opencv_core.dir/src/out.o] Error 1
make[1]: *** [nestk/deps/opencv/modules/core/CMakeFiles/opencv_core.dir/all] Error 2
make: *** [all] Error 2 
```

是什么导致了这些错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T18:45:56.737

会不会像`opencv/modules/core/include/opencv2/core/core.hpp`失踪一样简单`#include <stddef.h>`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T09:14:18.120

是的，只需编辑`core.hpp /home/linaro/Downloads/RGBDemo-0.4.0-Source/nestk/deps/opencv/modules/core/include/opencv2/core`并添加该行

```
#include <stddef.h 
```

# java - EJB : does container need to synchronize entity bean persist?

> ID：10396488
> 
> 赞同：0
> 
> 时间：2012-05-01T10:33:17.150
> 
> 标签：java, synchronization, ejb, containers

I am of the current understanding as I learn about EJB's in school:

### Statement 1

In CMP (Container-managed persistence), the container will tell the database synchronize row in database when different entity beans try too access the same row at the same time.

### Statement 2

As far as I know though, every database has a background mechanism that auto synchronizes every row when there are multi accesses to it. So, when developers program against a database, they don't care about underlying synchronous access to rows.

So, my question is - if statement 2 is true, why does an EJB container need to synchronize entity bean access to database rows? If my thinking is wrong, please correct me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:25:06.057

If I understood your question correctly, you're asking about locking.

By default JPA provides optimistic locking controlled with the [@Version](http://docs.oracle.com/javaee/6/api/javax/persistence/Version.html) annotation.

You should check for `OptimisticLockException`s.

Other locking modes are possible:

[http://docs.oracle.com/javaee/6/tutorial/doc/gkjhz.html](http://docs.oracle.com/javaee/6/tutorial/doc/gkjhz.html)

[http://docs.oracle.com/javaee/6/tutorial/doc/gkjiu.html](http://docs.oracle.com/javaee/6/tutorial/doc/gkjiu.html)

# css - 将带有链接的图像居中

> ID：10396490
> 
> 赞同：12
> 
> 时间：2012-05-01T10:33:47.317
> 
> 标签：css, image, wordpress, editor, center

`img`是否可以仅通过为标签设置一个类而没有副作用来使图像居中？问题如下：我在图像周围有一个锚点。如果我使用以下 CSS

```
.aligncenter {
    clear: both;
    display: block;
    margin-left: auto;
    margin-right: auto;
} 
```

而这个（精简的）HTML：

```
<a href="/path/to/image.jpg" class="fancybox" rel="fancybox" title="System">
    <img src="/path/to/image.jpg" title="System" class="aligncenter">
</a> 
```

链接占据主 div 的整个宽度。这意味着不仅图像是可点击的——图像周围的空间（实际上是整个宽度）也是可点击的。这是通过 CSS `display: block`。 ![在此处输入图像描述](../Images/54090450cf568abd39f0efcd16e71f7b.png)

如何在不使用父 div 的情况下使图像居中？我不希望整个区域都可以点击。

背景：您可以阅读[此主题](https://wordpress.stackexchange.com/questions/50638/center-image-aligncenter)。它是关于 Wordpress 和内置编辑器的。他会自动`aligncenter`在图像上生成类（如果用户按下中心按钮）。我需要这个作为我自己的主题。根据版主的说法，这应该只是一个 CSS 问题，与更改 Wordpress 中的代码无关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T11:10:55.910

在 aligncenter 类中添加 text-align:center

```
.aligncenter {
    clear: both;
    display: block;
    margin-left: auto;
    margin-right: auto;
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:31:25.650

我不熟悉 wordpress，但您可能想尝试将图像和锚点的 css 'display' 属性设置为 'inline-block'。

如果您在更改文档的 DOM 方面受到限制，另一种选择是向图像添加“onClick”属性。
这将允许您在单击图像后运行某些功能。
因此，例如，如果您想重定向到另一个页面：

```
<img src='myImg.png' onclick='myRedirect()' style='cursor:pointer'/> 
```

在页面的标题中：

```
<script type='text/JavaScript'>
    var myRedirect = function(){
        window.location.href = 'Some other location';
    }
</script> 
```

请注意`style='cursor:pointer'`，它将鼠标的光标更改为“手形”光标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T17:32:38.790

为避免额外的`div`容器甚至 JavaScript，您可以将锚点显示为块：

`.logo {display: block; height: 115px; margin: 0 auto; width: 115px;}`

`/* height and width must equal your image's values */`

`<a href="#" class="logo"><img src="logo.png" alt="Logo" /></a>`

现场演示：http: [//jsfiddle.net/performancecode/Ggk8v/](http://jsfiddle.net/performancecode/Ggk8v/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-11T17:35:08.027

它仍然包含一个 div，但我这样做的方式是：

```
<div class="megaman">
<a href="img/megaman.jpg"><img src="img/megaman.jpg" alt="megaman"></a>
</div>

img {
height: 125px;
width: 200px;
}

.megaman{
text-align: center;
margin: 0 auto;
display: block;
} 
```

是的，我用 .megaman 替换了 .logo，因为 megaman 摇滚！但它应该工作。如果不使用 div，我无法弄清楚。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-01T11:07:27.340

Second answer:
paste this in `functions.php`

```
add_filter('image_send_to_editor','give_linked_images_class',10,8);
function give_linked_images_class($html, $id, $caption, $title, $align, $url, $size, $alt = '' ) {
    // only do this on center
    if($align == 'center') {
        $html = str_replace('aligncenter', '', $html);
        $html = '<p style="width: 100%; text-align: center;" >'.$html.'</p>';
    }
    return $html;
} 
```

Down side, this won't effect already inserted images...
Also if you can please move the style of the `<p>` to the stylesheet.

# android - 我需要为Android光标制作分页吗

> ID：10396491
> 
> 赞同：1
> 
> 时间：2012-05-01T10:33:47.393
> 
> 标签：android

我有一个`Query`要在 a 中加载大约`5k`（即 5000 条）记录`Cursor`，问题是我需要为 a 进行分页`Cursor` 吗？或者它会流式传输`5k`记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:05:49.357

它会给你5k条记录。只要您不使用它们做一些真正耗时的事情，例如网络或文件访问，那么您可能不需要分页。

# google-chrome - 在 mvc 3 应用程序中使用 DotNetOpenAuth 2.0 时只有 Chrome 的 Facebook 登录问题

> ID：10396499
> 
> 赞同：2
> 
> 时间：2012-05-01T10:34:34.633
> 
> 标签：google-chrome, dotnetopenauth

在我的 mvc3 应用程序中，我对所有提供程序都使用了 DotNetOpenAuth，除 Chrome 之外的所有浏览器都运行良好。有时，当我单击 Facebook 图标登录时，只有我收到以下错误消息。

错误”：{“消息”：“无效的redirect_uri：应用程序配置不允许给定URL。”，“类型”：“OAuthException”，“代码”：191}

在少数计算机上并非在所有计算机上都面临这个问题。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T00:12:07.873

我怀疑这实际上是一个浏览器问题。在您的不同浏览器窗口之间，您网站的 URL 很可能存在细微差别。查找大小写差异，或 HTTP 与 HTTPS、尾部斜杠等。redirect_uri 中使用的 URL 必须与应用程序的 Facebook 注册页面中显示的完全相同（在规范中设置的边界内，通常允许添加查询字符串参数IIRC）。

如果您的站点允许来自多个 URL（HTTP 与 HTTPS、不同的主机名等）的访问，您必须注意在开始 OAuth 流程之前将用户重定向到规范化的 URL，或者您必须明确提供规范化的 redirect_uri 参数DotNetOpenAuth 的值，以便库默认情况下不会接收请求 URL。

# java - 将对象绑定到 JSP 页面上的控件

> ID：10396513
> 
> 赞同：2
> 
> 时间：2012-05-01T10:36:04.043
> 
> 标签：java, jsp, servlets, request, jstl

我有以下类，我在我的 Java 中使用 JSP 应用程序。

// 公共类 QuestionBO 实现 Serializable{

```
private int questionId;
private int testID;
private String question;

private TutorBO infoAboutTutor;
private SubjectBO infoAboutSubject;
private TestBO infoAboutTest;
private List<AnswerBO> answers;

public QuestionBO() {
}

public QuestionBO(String question) {
    this.question = question;
} 
```

获取者和设置者....

JSP 页面有一个表单，其中每个问题（它的字符串表示）旁边都有一个复选框。用户标记一些问题并将表单提交给服务器以供 servlet 处理。

将问题对象与复选框绑定的传统方法是什么，以便我可以找出已选择的问题？

目前我正在使用以下方法来构建表单：

//

```
 <c:if test="${not empty questionsForSubject}">
    <form  action="/TutorWebApp/controller" method="POST" name="addQuestionForm">
        <input type="hidden" name="command" value="add_question_list" />
        <input type="hidden" name="testName" value="${testName}"/>            
        <table border ="1">
            <tbody>
                <c:forEach items="${questionsForSubject}" var="question">
                    <tr>
                        <td>
                            <input type="checkbox" name ="choosen_question" 
                                   value="${question.getQuestion()}">
                            ${question.getQuestion()}
                            <br />
                        </td>
                    </tr>
                </c:forEach>
            </tbody>
        </table>
        <input type="submit" value="Add questions "/>              
    </form> 
```

而且我不应该使用框架。

谢谢

我有最后一个问题

```
 <c:if test="${not empty questionsForSubject}">
    <form  action="/TutorWebApp/controller" method="POST" name="addQuestionForm">
        <input type="hidden" name="command" value="add_question_list" />
        <input type="hidden" name="testName" value="${testName}"/> 
        <input type="hidden" name="questionsForSubject" value="${questionsForSubject}"/>
        <table border ="1">
            <tbody>
                <c:forEach items="${questionsForSubject.keySet()}" var="questionID">
                    <tr>
                        <td>
                            <input type="checkbox" name ="choosen_question" value="${questionID}">
                            ${questionsForSubject.get(questionID).getQuestion()}
                            <br />
                        </td>
                    </tr>
                </c:forEach>
            </tbody>
        </table>
        <input type="submit" value="Добавить вопросы"/>              
    </form> 
```

如何从 servlet 的此页面获取地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:30:14.077

给每个复选框一个唯一的值。例如，唯一的问题标识符：

```
<c:forEach items="${questionsForSubject}" var="question">
    <tr>
        <td>
            <input type="checkbox" name="chosen_question" value="${question.questionId}" />
            ${question.question}
            <br />
        </td>
    </tr>
</c:forEach> 
```

这样您就可以通过 servlet 中的以下调用来获取所有检查的值：

```
String[] chosenQuestions = request.getParameterValues("chosen_question"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:19:24.867

为每个生成一个唯一的名称，`checkbox`如下所示：

```
<input type="checkbox" name="${question.questionId}" /> 
```

或者：

```
<input type="checkbox" name="choosen_question_${question.questionId}" /> 
```

之后，您已经能够识别*servlet*`checkbox`中的每一个

# c# - 实体框架代码优先多列外键

> ID：10396518
> 
> 赞同：5
> 
> 时间：2012-05-01T10:36:29.657
> 
> 标签：c#, sql, entity-framework, ef-code-first

首先使用代码我设计了 3 个类：

```
class User {     

 public Int32 ID {get;set;}  

 public virtual ICollection<UserCityDetail> {get;set;}

 public Int32 MainCityID {get;set;}
 public UserCityDetail MainCityDetail {get;set;}

}

class City{

 public Int32 ID {get;set;}

 ...
}

class UserCityDetail{

 [Key, Column(Order = 0)]
 public Int32 UserID {get;set;}

 [Key, Column(Order = 1)]
 public Int32 CityID{get;set;}

 ...
} 
```

所以基本上我有一个用户在几个城市有不同的细节。对于 UserCityDetail，用户 ID 既是 PK 又是 FK。我还想直接参考主要城市的详细信息，所以我在 User 上放了一个城市 ID FK。

如何将用户 ID 和 MainCityID 配置为类似于 MainCityDetail 的 FK？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T10:49:14.313

由于 EF 之间存在两个关系，因此存在`User`识别`UserCityDetail`哪些导航属性属于哪个关系的问题。使用 fluent API 来映射关系。

如果您使用 SQL Server，则会出现另一个问题，因为两个关系会导致多个级联删除路径。所以你必须建立`MainCityDetail`一个可选的关系。

```
class User {     

 public Int32 ID {get;set;}  

 public virtual ICollection<UserCityDetail> {get;set;}

 public int? MainCityUserID {get;set;}
 public int? MainCityID {get;set;}

 public UserCityDetail MainCityDetail {get;set;}

}

public class MyContext : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Entity<User>()
            .HasOptional(u => u.MainCityDetail)
            .WithMany()
            .HasForeignKey(u => new { u.MainCityUserID, u.MainCityID})
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<User>()
            .HasMany(u => u.Cities)
            .WithRequired(d => d.User)
            .HasForeignKey(d => d.UserId);
    }
} 
```

有关流畅映射的更多详细信息，请查看[此处](http://msdn.microsoft.com/en-us/library/hh295843%28v=vs.103%29.aspx)。

# jquery - jQuery 动画在接近尾声时变慢并且有点紧张

> ID：10396519
> 
> 赞同：0
> 
> 时间：2012-05-01T10:36:32.290
> 
> 标签：jquery, jquery-animate

我有几页我想像在 powerpoint 中那样转换。前几个过渡效果很好，但后两个过渡需要很长时间才能完成。如果我减少动画时间，它会与下一个动画重叠，所以我不得不使用 setTimeout()。这是小提琴[http://jsfiddle.net/yWAgp/](http://jsfiddle.net/yWAgp/)

```
var currentPageNumber = 1;
jQuery.easing.def = "linear";

$(document).ready(function () {
    $(".divContentContainer").center();
    AnimatePage1();
})

jQuery.fn.center = function () {
    this.css("position", "absolute");
    this.css("top", (($(window).height() - this.outerHeight()) / 2) +
    $(window).scrollTop() + "px");
    this.css("left", (($(window).width() - this.outerWidth()) / 2) +
    $(window).scrollLeft() + "px");
    return this;
}

var ResetPageContainer = function () {
    $(".pages").html("");
}

var AnimatePage1 = function () {
    ResetPageContainer();
    $('.pages').html($("#page-1").html());
    $('.page-1-img').animate({
        opacity: 100,
        width: "538px",
        height: "166px"
    }, 3000, function () {
        $(this).fadeOut(1000);
        setTimeout(function () { AnimatePage2(); }, 1200);
    });
};

var AnimatePage2 = function () {
    ResetPageContainer();
    $('.pages').html($("#page-2").html());
    $('.page-2-img').animate({
        opacity: 100,
        width: "698px",
        height: "151px"
    }, 3000, function () {
        $(this).fadeOut(1000);
        setTimeout(function () { AnimatePage3(); }, 1200);
    });
};

var AnimatePage3 = function () {
    ResetPageContainer();
    $('.pages').html($("#page-3").html());
    $('.page-3-img').animate({
        opacity: 100,
        width: "894px",
        height: "116px"
    }, 3000, function () {
        $(this).fadeOut(1000);
        setTimeout(function () { AnimatePage4(); }, 4000);
    });
};

var AnimatePage4 = function () {
    ResetPageContainer();
    $('.pages').html($("#page-4").html());
    $('.yours').animate({
        opacity: 100,
        width: "585px",
        height: "276px"
    }, 3000, function () {
        $(this).fadeOut(1000);
        setTimeout(function () { AnimatePage5(); }, 6000);
    });
};

var AnimatePage5 = function () {
    ResetPageContainer();
    $('.pages').html($("#page-5").html());
    $('.tommylogo').animate({
        opacity: 100,
        width: "960px",
        height: "120px"
    }, 3000, function () {

    });
}; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:14:07.047

我不能确切地说出你做错了什么，但我重写了一些代码，现在如果工作正常 - 请参阅[http://jsfiddle.net/alnitak/j5zeL/](http://jsfiddle.net/alnitak/j5zeL/)

代码现在看起来像：

```
var load = function(id) {
    $('.pages').empty();
    $(id).appendTo('.pages').show();
};

var AnimatePage1 = function() {
    load('#page-1');
    $('.page-1-img').animate({
        opacity: 100,
        width: "538px",
        height: "166px"
    }, 3000).fadeOut(1000, AnimatePage2);
};

... 
```

笔记：

1.  将内容作为 DOM 元素显式*移动*到显示`div`中，而不是序列化和反序列化 -`.clone()`如果您需要重复动画，请添加 a。

2.  显式调用`.show()`新内容以覆盖初始内容`display: none`

3.  不需要计时器 - 只需在`callback`fadeOut**中开始下一个动画**

# objective-c - 有没有办法使用数学符号？

> ID：10396520
> 
> 赞同：1
> 
> 时间：2012-05-01T10:36:38.127
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [UILabels 和 Unicode](https://stackoverflow.com/questions/5839716/uilabels-and-unicode)

有没有办法像 html ÷ × −、° 等一样在 UILabels 和 UITextField 中使用数学符号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:46:55.330

只需将符号从 Mac OS X 的 Character Viewer 拖到 Xcode。比它应该看起来像

```
label.text = @"÷ × −, ° "; 
```

无需处理代码或 html 实体。

如果您的文本中有 html 实体，此类别可能会有所帮助：[GTMNSString+HTML](https://gist.github.com/takuma104/ntlniph/blob/master/gtm/Foundation/GTMNSString+HTML.h)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:39:09.283

您不能使用 HTML 编码，但可以将实际符号直接嵌入到您的代码或 XIB 文件中，因为 Xcode 将 Objective-C 源文件视为 Unicode / UTF-8。

要转换`myHTMLString`具有编码符号的字符串，请使用

```
NSString* convertedString = [myHTMLString stringByDecodingHTMLEntities]; 
```

并使用此 NSString* 类别：（只需在您的源代码中包含“NSString+HTML.m”）[https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m](https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)

# c++ - how to sort an integer that is declared in the private

> ID：10396527
> 
> 赞同：0
> 
> 时间：2012-05-01T10:36:58.217
> 
> 标签：c++, arrays, sorting

I declared the int id in the private, part of my class.

```
 private:
                      int id,age;
                      float gpa;
                      string last,first; 
```

This code is in my file to display and call for functions that are in the array, and to sort the int id.

```
 student[i].sort_array(student[i].id,cap);
        i++;
        cout << i; 
```

This is in a seperate file where i put my functions, i am able to display the contents of the array, if i student[i].put(cout) the data. I am not sure how to pass in an integer that would be in the provate part of my class

```
 void student::sort_array(int student[i].get(id),int n)
        {

            int j,temp;
            for(j=0;j<n-1;j++)
            { 
         //if out of position switch the out of align number
            if(student[j]<student[j+1])
            {
            temp =  student[j];
            student[j] = student[j+1];
            student[j+1] = temp;
            }
         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T10:42:28.607

正常的方法是拥有一个`bool student::compareAges(Student const& otherStudent)`方法，并将其作为额外参数传递给您的比较函数。`std::sort`例如，当您不使用默认值时，这是第三个参数`operator<`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:42:37.103

sort_array 函数不得位于其他文件中，而应位于 Student 类声明的 .cpp 中。

而且您不必将 id 作为参数传递，因为您可以访问（即使它是私有的）它，因为您将在该类的范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:50:10.927

`sort_array`不属于`student` `class`！对于`student`.

使用 C++ 标准库的函数对`student`s*的* 集合进行排序当然是可能的。`id`[**`std::sort()`**](http://en.cppreference.com/w/cpp/algorithm/sort)

您可以为您的班级定义一个*小于* ，因此：`operator``student`

```
bool student::operator <(student const& rhs) const
{
    return id < rhs.id;
} 
```

由于它是 的成员，`class`因此可以访问其所有数据。

它必须是`public:`，那么`std::sort()`函数将能够使用它来对`student`. 基于`id`. 如果要比较 的多个属性`class`，一定要实现[严格的弱排序](https://stackoverflow.com/questions/979759/operator-and-strict-weak-ordering)。

# .net - 使用命令提示符安装 windows 服务

> ID：10396528
> 
> 赞同：10
> 
> 时间：2012-05-01T10:37:05.773
> 
> 标签：.net, windows-services

我正在使用以下命令使用 Visual Studio 命令提示符安装 Windows 服务

> ```
> installutil D:\Folder1\Projectname\bin\Debug\Service1.exe 
> ```

但我得到以下异常

> 初始化安装时发生异常：System.IO.FileNotFoundException：无法加载文件或程序集“file:///D:\Folder1\WIN”或其依赖项之一。该系统找不到指定的文件..

命令是错误的还是我错过了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-01T11:02:02.940

必须引用其中包含空格的文件路径。

**好的**

```
installutil "c:\my directory\service1.exe" 
```

**坏的**

```
installutil c:\my directory\service1.exe 
```

*操作系统在第一个空格处停止读取路径，导致它查找名为“c:\my”的文件，该文件不存在。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-05T11:25:10.463

我有同样的问题，在这种情况下 Service.exe 被阻止。

解决方案：右键单击该文件并打开“属性”。您可能会看到一条消息 - 此文件来自另一台计算机，可能会被阻止以帮助保护这台计算机。单击取消阻止按钮，然后单击应用/确定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-03T16:53:03.813

缺少引号是问题所在。Installutil“exe/d的路径”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-17T16:58:55.893

为避免此类错误，请执行以下步骤：

1.  使用“以管理员身份”运行命令提示符
2.  将命令提示符目录更改为您的服务 exe 文件。

在此执行后

```
command> installutil service1.exe 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-07T09:10:07.540

1）以管理员模式运行开发人员命令提示符。2）并进行以下更改

```
installutil -i "D:\Folder1\Projectname\bin\Debug\Service1.exe" 
```

# html - IE7/8 中的表格宽度

> ID：10396530
> 
> 赞同：3
> 
> 时间：2012-05-01T10:37:19.280
> 
> 标签：html, css, html-table

我对让我的表格在不同的浏览器上看起来正确而疯狂，就在我认为我进入一个时，它在另一个中改变了。IE7/8 和 Firefox 是我的目标浏览器。

有人可以看看我只是无法弄清楚问题所在的代码。表是由 Javascript 生成的，我需要它具有 220px 的固定宽度，主要问题是 tfoot，我有 3 个 tds，我在控制宽度时遇到了问题。

这是代码的相关部分：

```
<table class="favouritelinks"  cellspacing="0" cellpadding="0" width="220" >

<thead>
    <tr><td colspan="3">Your Favourite Links</td></tr>
</thead>
<tbody id="tulemused" ></tbody>

    <tr>
        <td width="50">Name</td><td><input type="text" id="key" name="key" value="" /></td>
        <td rowspan="2"><a href="javascript:insert_value()"><div class="addimg"></div></a></td>
    </tr>
    <tr>
        <td width="50">URL</td><td><input type="text" id="val" name="val" value=""  /></td>

    </tr>

</table> 
```

和CSS：

```
.favouritelinks td{
                height: 20px;
                padding: 3px;

                border-bottom: 1px solid white;
                word-break: break-all;

            }
            .favouritelinks td a{
                color: white;
                text-decoration: none;

            }
            thead{
                background: url(img/title5.png) no-repeat;
                color: #444;
                font: bold 16px Helvetica;
                text-shadow: 0 1px 0 #FFF;
                text-align: center;
                width: 220px;
                height: 36px;

            }
            thead tr {
                height: 36px;

            }
            .container{
                width: 220px;
                margin-top: 105px;
                margin-left: 10px;

            }
            .delimg {

                background: url(img/details_close.png) no-repeat;
                width: 20px;
                height: 20px;
                float: right;
            }
            .addimg {
                background: url(img/details_open.png) no-repeat;
                width: 20px;
                height: 20px;
                float: right;
            }
            .urls {
                display: none;

            } 
```

我究竟做错了什么？

图片[http://imageshack.us/photo/my-images/38/56751263.jpg/](http://imageshack.us/photo/my-images/38/56751263.jpg/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T11:06:39.227

在你的 CSS 中试试这个：

```
table {
    table-layout: fixed;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:16:31.700

从CSS 中的*.favouritelinks td*中删除***padding:3px***，一切都会好起来的。

 ***或者更好的方式**

在 CSS 中而不是在 HTML 中设置 td 宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T14:13:26.560

I had the same problem with layout good in IE9+, but bad in IE 7/8\. I found out "colspan" was the problem when this column is wider then the sum of other matching columns not colspan on other rows. I was specifiying fixed width on all columns except the one I want to be adjusted with the remaining width. But that didn't work on IE 7/8\. So I end up splitting rows on different "table" to workaround that layout problem.*

# database-design - Real world sample of Financial accounting data models

> ID：10396531
> 
> 赞同：0
> 
> 时间：2012-05-01T10:37:21.220
> 
> 标签：database-design, schema, financial, accounting

i am going to develop financial accounting software. But i am not experienced at accounting software data models.

if anyone has real world samples of data models of financial accounting software, please share.

thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:43:34.533

Martin Fowler 的书“分析模式”更多地是关于面向对象的设计而不是数据库，但无论如何你都应该阅读它——他有一些关于如何处理你需要了解的时间、货币和金融交易的部分。

Silverston 的“数据模型资源书”中有一个很好的章节介绍了财务数据的建模。

最后，如果您想要“真实世界”的示例，您可能需要获取一些与您的特定需求相关的开源项目，并查看它们如何存储数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:58:19.080

每个设计都从业务需求收集和分析开始，然后遵循应用程序模型，然后您开始考虑数据库。

财务会计系统的真实数据模型在这里可以分享。

# coldfusion - CF Builder 调试配置

> ID：10396532
> 
> 赞同：2
> 
> 时间：2012-05-01T10:37:26.057
> 
> 标签：coldfusion, coldfusion-9, coldfusionbuilder

G'day 出于安全原因，我们的 CFAdmin（以及相应的 RDS）通过一个域访问，例如 cfadmin.ourdomain.com，并通过另一个域访问该站点：www.ourdomain.com。

通过一些奇迹，我刚刚能够在没有 RDS 的情况下设置 RDS 和服务器给我“无法初始化类 com.adobe.rds.core.services.Messages”（这是第一次），并允许我启动调试会话。但是，它试图通过 cfadmin.ourdomain.com 访问我正在测试的文件（并且该 IIS 网站上未定义实际网站）。我可以理解为什么会发生这种情况，但我不知道如何告诉调试配置实际网站是 www.ourdomain.com。

无法在 www.ourdomain.com 或通过 cfadmin.ourdomain.com 访问的站点访问 CFIDE。因此，这不能成为提议的解决方案的一部分。

有人有想法么？

哦：这是在 CF9.0.1 上。

更新：对不起，只是要绝对清楚......这是我们的*开发*环境。这一切都在我的本地PC上运行。但是，本地服务器（在我的工作站上运行的 VM）的配置与 prod 环境相同（原因很明显），直至访问 CFAdmin 的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:52:08.850

这不是您想要的答案 :) 您的安全人员一开始是对的。CF Builder 调试是一种设计用于开发系统的开发工具，它主要在本地工作站上运行 CF+ Apache 或 IIS 的*本地开发环境中运行良好。*

在生产服务器上，RDS 本身就是一个您真的不想在该生产环境中运行的弱点（抱歉）。话虽如此，这是我的大想法:)

*   让您的管理员在 cfadmin.ourdomain.com 上创建一个指向您的产品代码的文件夹。根据您的代码，您可能会使其工作。
*   将 cfadmin.ourdomain.com 直接指向您的生产代码（无文件夹）。毕竟，RDS 使用的所有 CFIDE 和其他映射无论如何都是别名或虚拟。

这就是我唯一的遗憾......

# android - 如何在使用 ActionBar 的应用程序中优雅地支持 Android 2.x 设备？

> ID：10396536
> 
> 赞同：1
> 
> 时间：2012-05-01T10:37:54.490
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-actionbar

我正在编写一个应用程序，我想使用 Android 3.x 和更高版本的 Android 中可用的新 ActionBar。该应用程序仍然需要支持大多数设备，并且大多数设备都在运行 2.x 版本。

我已经配置了我的项目，以便将 minSdk 设置为 API 8，而 targetSDK 设置为 API 14。

我的问题是，使用 ActionBar 等新 SDK 功能并仍支持运行不支持此类功能的旧版本 Android 的旧设备的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:46:46.343

我建议使用[ActionBarSherlock](http://actionbarsherlock.com/)。除其他外，它还为 ICS ActionBar 提供了向后兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T18:07:44.947

使用 v7-appcompat 支持库。

在这里查看：http: [//developer.android.com/tools/support-library/features.html](http://developer.android.com/tools/support-library/features.html)

设置：[https ://developer.android.com/tools/support-library/setup.html](https://developer.android.com/tools/support-library/setup.html)

# ruby - Ruby 代码中的循环问题

> ID：10396538
> 
> 赞同：0
> 
> 时间：2012-05-01T10:37:58.537
> 
> 标签：ruby, arrays

嘿，我有一个数组，里面有数字。

现在我想将数组第 17 位的值除以数组第一个位置的值，然后将第 18 位除以第二个，依此类推。结果应该构建一个新数组。

然后我想扫描新数组的所有值，如果两个或多个连续值大于 1.2，我想为所有连续值添加第一个除以该行的最后一个值的结果。如果一个值为 1.2，而下一个值为 0.8，则不应更改数组的值。

这是我的代码：

```
a = [1,2,3,4,5,9,5,13,14,17,19,23,19,34,46,12,13,45,46,67,78,79]

b = Array.new
c = Array.new

a.each_cons(18) { |c| b.push(c[17]/c[0] } 
```

您知道如何实施条件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T01:49:17.770

我认为这会做到这一点，尽管我有选择地从你的问题中解释了一些事情。具体来说，在“所有连续值的那一行”中，“行”是指来自 each_cons 的滑块吗？“所有连续值”同上。

```
catch (:done) do
  for i in 2..b.length do
    b.each_cons(i) do |d| 
      for j in 2..d.length do 
        d.each_cons(j) do |g|
          if g.all? { |g| g > 1.2 }
            c = b.map { |f| f + (d[0].to_f/d[i-1].to_f) }
            break
          end
          if !c.empty? then throw :done end
        end
      end
    end
  end
end

puts c 
```

# regex - 正则表达式多个换行符

> ID：10396541
> 
> 赞同：0
> 
> 时间：2012-05-01T10:38:09.533
> 
> 标签：regex, vim

我想`<br>`用 2 个换行符替换 HTML 标记的值。即我想要的是

```
$string=~s/br>/\n\n/s; 
```

但不知何故它不起作用。而它适用于单个新行。即如果我这样做：

```
$string=~s/br>/\n/s; 
```

它工作正常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:56:12.580

如果您正在谈论 vim 的`substitute`命令，那么您可能希望`\r`在替换字符串中使用而不是`\n`. 在这种情况下，vim 将`\n`其视为 NULL，而不是换行符。

相关片段来自`:help sub-replace-special`：

```
<CR>    split line in two at this point
        (Type the <CR> as CTRL-V <Enter>)          *s<CR>*
\r      idem                                       *s/\r*
\<CR>   insert a carriage-return (CTRL-M)
        (Type the <CR> as CTRL-V <Enter>)          *s/\<CR>*
\n      insert a <NL> (<NUL> in the file) 
```

# ruby-on-rails - Facebook 使用 Koala Rails gem 返回错误 500

> ID：10396542
> 
> 赞同：4
> 
> 时间：2012-05-01T10:38:15.930
> 
> 标签：ruby-on-rails, facebook, koala

我正在尝试从 Rails 应用程序建立连接，我正在使用自定义对象和我在 facebook 打开图形仪表板（在开发人员区域）中设置的自定义操作。

在我的应用程序控制器中，我有以下内容；

```
def graph
   Koala::Facebook::API.new(cookies[:access_token]) unless cookies[:access_token].nil?
end 
```

在我保存@submission 记录后的创建方法中，我有以下内容；

```
graph.put_connections("me", "myappsnamespace:start", :submission => submission_path(@submission, :only_path => false)) 
```

每次到达上面的代码行时，我都会收到一个错误；

```
Koala::Facebook::APIError Exception: HTTP 500: Response body: {"error":{"message":"An unexpected error has occurred. Please retry your request later.","type":"OAuthException","code":2}} 
```

如果我使用 Open Graph Object 调试器检查提交路径，它不会返回任何错误，并且所有适当的元属性标记都在那里。

Facebook 的适当范围已在初始化程序中设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T01:23:58.273

graph.put_connections 的示例：

`@graph.put_connections("me", "notes", :subject => "Finding my mom a gift: An Epic Odyssey", :message => all_the_details)`

`@graph.put_connections("me", "feed?message=foo%0D%0Abar")`

但是是什么`"myappsnamespace:start"`？

[Koala 的 Graph-API 维基](https://github.com/arsduo/koala/wiki/Graph-API)

# ajax - JSF 和 未在 @ViewScoped bean 上执行，但 作品

> ID：10396545
> 
> 赞同：0
> 
> 时间：2012-05-01T10:38:19.467
> 
> 标签：ajax, jsf, button, jsf-2, richfaces

我有一个 Facelets 子视图，它为客户端`/subviews/document-tree.xhtml`上的每个选项卡呈现一棵树`<rich:tabPanel>`。页面和子视图基于 JSF 2 和 RichFaces 4。

```
<ui:composition ...>
  <rich:tree value="#{rootNode}" var="treeNode" id="#{treeId}">

    <rich:treeNode ... id="chapternode">

      <h:panelGrid columns="2">
        <rich:outputText value="#{treeNode.name}" />
        <h:commandLink>
          <h:graphicImage library="images/icons" name="delete.png"  />
          <rich:componentControl target="remove-chapter-popup" operation="show" />
        </h:commandLink>
        <rich:popupPanel modal="true"
                         onmaskclick="#{rich:component('remove-chapter-popup')}.hide(); return false;"
                         id="remove-chapter-popup">
          <f:facet name="header">
            <h:outputText value="Remove chapter?" />
          </f:facet>
          <f:facet name="controls">
            <h:outputText value="X" />
          </f:facet>
          <p>Remove chapter #{treeNode.name}?</p>
          <h:panelGrid columns="2">
            <h:commandButton value="Add"
                             action="#{nodeManager.removeChapterNode(treeNode)}" 
                             onclick="#{rich:component('remove-chapter-popup')}.hide(); return true;">

              <!--f:ajax execute="@this" render="@form" /-->        <!-- never executed! -->
              <a4j:ajax execute="@this" render="@form" />           <!-- this works however! -->

            </h:commandButton>
            <h:commandButton value="Cancel"
                             onclick="#{rich:component('remove-chapter-popup')}.hide(); return false;" immediate="true" />
          </h:panelGrid>
        </rich:popupPanel>
      </h:panelGrid>

    </rich:treeNode>

    ...

  </rich:tree>
</ui:composition> 
```

这基本上显示了带有名称的树节点以及右侧的图像以供删除。

每个树子视图都放置在一个`<rich:tab>`中，因此选项卡面板**确实**具有所需的封闭`<h:form>`。没有其他嵌套形式（无论如何禁止）。

bean被`#{nodeManager.removeChapterNode(treeNode)}`正确标记为`@ViewScoped`.

现在发生的事情有点奇怪：

使用`<f:ajax execute="@this" ... />`按钮时*永远不会*执行，而使用`<a4j:ajax execute="@this" ... />` *总是*有效。

**为什么？这里有什么问题？**

考虑到 RichFaces根据他们自己的话`<a4j:ajax>`100% 基于 JSF 2的事实，这没有多大意义。`<f:ajax>`

*这可能是*我正在使用的 JSF 2.1.7 中的错误吗？（JBoss AS 7.1.1.Final 附带的实现）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:03:13.400

这是减少的差异：

```
<form id="tree-form" name="tree-form" method="post" action="/pqgenerator2/debug.jsf" enctype="application/x-www-form-urlencoded">
 ...
  <table style="margin: 0 auto;">
    <tbody>
      <tr>
- <td><input id="tree-form:sorting-tree-one:real root:j_idt34" type="submit" name="tree-form:sorting-tree-one:real root:j_idt34" value="Fortfahren" onclick="jsf.util.chain(this,event,'RichFaces.$(\'tree-form:sorting-tree-one:real root:add-root-chapter-popup\').hide(); return true;','mojarra.ab(this,event,\'action\',\'@this tree-form:sorting-tree-one:real root:new-root-chapter-name-input\',\'@form\')');return false" /></td>
+ <td><input id="tree-form:sorting-tree-one:real root:j_idt34" type="submit" name="tree-form:sorting-tree-one:real root:j_idt34" value="Fortfahren" onclick="jsf.util.chain(this,event,'RichFaces.$(\'tree-form:sorting-tree-one:real root:add-root-chapter-popup\').hide(); return true;','RichFaces.ajax(this,event,{&quot;parameters&quot;:{&quot;javax.faces.behavior.event&quot;:&quot;action&quot;,&quot;org.richfaces.ajax.component&quot;:&quot;tree\\u002Dform:sorting\\u002Dtree\\u002Done:real root:j_idt34&quot;} ,&quot;sourceId&quot;:this} )');return false" /></td>
      </tr>
    </tbody>
  </table>
...

- </div></span></span></div></div><input type="hidden" name="tree-form:sorting-tree-one__SELECTION_STATE" id="tree-form:sorting-tree-one__SELECTION_STATE" class="rf-tr-sel-inp" value="" /><script type="text/javascript">new RichFaces.ui.Tree("tree\u002Dform:sorting\u002Dtree\u002Done",{"toggleType":"client"} );</script></div></div><script type="text/javascript">new RichFaces.ui.Tab("tree\u002Dform:j_idt21",{"index":0,"leave":null,"togglePanelId":"tree\u002Dform:tree\u002Dtabpanel","switchMode":"client","name":"Blah GmbH","enter":null,"disabled":false} )</script></div><script type="text/javascript">new RichFaces.ui.Tab("tree\u002Dform:j_idt21",{"index":0,"leave":null,"togglePanelId":"tree\u002Dform:tree\u002Dtabpanel","switchMode":"client","name":"Blah GmbH","enter":null,"disabled":false} )</script></div><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="998210192617713914:-9142017502724223608" autocomplete="off" />
+ </div></span></span></div></div><input type="hidden" name="tree-form:sorting-tree-one__SELECTION_STATE" id="tree-form:sorting-tree-one__SELECTION_STATE" class="rf-tr-sel-inp" value="" /><script type="text/javascript">new RichFaces.ui.Tree("tree\u002Dform:sorting\u002Dtree\u002Done",{"toggleType":"client"} );</script></div></div><script type="text/javascript">new RichFaces.ui.Tab("tree\u002Dform:j_idt21",{"index":0,"leave":null,"togglePanelId":"tree\u002Dform:tree\u002Dtabpanel","switchMode":"client","name":"Blah GmbH","enter":null,"disabled":false} )</script></div><script type="text/javascript">new RichFaces.ui.Tab("tree\u002Dform:j_idt21",{"index":0,"leave":null,"togglePanelId":"tree\u002Dform:tree\u002Dtabpanel","switchMode":"client","name":"Blah GmbH","enter":null,"disabled":false} )</script></div><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="-5805340602741883884:1908800949269113937" autocomplete="off" />
</form> 
```

这里的问题是，我为要显示的 RichFaces 根创建了一个虚拟根节点，并通过 RichFaces 添加了真正的根节点`TreeNodeImpl`，`addChild("real root", ...)`其中包含键中的空格。

代码显然可以处理这个`<a4j:ajax>`问题，但不是 JSF 2 `<f:ajax>`（注意第一个差异部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:55:45.450

ID 中的空格是非法的。另请参见[`UIComponent#setId()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#setId%28java.lang.String%29)javadoc。

> ## 设置名称
> 
> ```
> public abstract void setId(java.lang.String id) 
> ```
> 
> 设置这个的组件标识符`UIComponent`（如果有的话）。组件标识符必须遵守以下语法限制：
> 
> *   不能是零长度字符串。
> *   第一个字符必须是字母或下划线 ('_')。
> *   后续字符必须是字母、数字、下划线 ('_') 或破折号 ('-')。
> 
> 组件标识符还必须遵守以下语义限制（请注意，此限制不是由`setId()`实现强制执行的）：
> 
> *   `UIComponent`指定的标识符在作为最近祖先a的后代的所有组件（包括构面）中必须是唯一的`NamingContainer`，或者如果没有这样的祖先是 a ，则在整个组件树的范围内是唯一的`NamingContainer`。
> 
> **参数**：
> 
> *   `id`- 新的组件标识符，或 null 表示这`UIComponent`没有组件标识符
> 
> **抛出**：
> 
> *   `IllegalArgumentException`- 如果 id 在语法上无效

似乎 RichFaces 从未根据树的规则对其进行验证。反过来，我会将其视为 RichFaces 中的错误。向 RichFaces 人员[报告。](https://issues.jboss.org/browse/RF)

# scala - 我是否需要重复使用相同的 Akka ActorSystem 或者我可以在每次需要时创建一个？

> ID：10396552
> 
> 赞同：62
> 
> 时间：2012-05-01T10:39:00.887
> 
> 标签：scala, akka

Akka 2.x 需要许多命令来引用`ActorSystem`. 所以，要创建一个演员的实例，`MyActor`你可能会说：

```
val system = ActorSystem()
val myActor = system.actorOf(Props[MyActor]) 
```

由于经常需要`ActorSystem`: 许多代码示例省略了代码的创建，并假设读者知道`system`变量的来源。

如果你的代码在不同的地方产生actors，你可以复制这个代码，可能会创建额外`ActorSystem`的实例，或者你可以尝试`ActorSystem`通过引用一些全局或传递来共享同一个实例`ActorSystem`。

Akka 文档在标题“演员系统”下提供了演员系统的[一般概述，并且有](http://doc.akka.io/docs/akka/2.0.1/general/actor-systems.html)[类的](http://doc.akka.io/api/akka/2.0.1/#akka.actor.ActorSystem)[文档`ActorSystem`](http://doc.akka.io/api/akka/2.0.1/#akka.actor.ActorSystem)。但是这些都不能很好地解释为什么 Akka 的用户不能仅仅依靠 Akka 来管理这个底层。

## 问题）

*   共享同一个`ActorSystem`对象或每次都创建一个新对象意味着什么？

*   这里有哪些最佳实践？一直路过一个`ActorSystem`似乎出奇的笨拙。

*   一些例子给出了`ActorSystem`一个名字：`ActorSystem("MySystem")`其他人只是调用`ActorSystem()`. 这有什么区别，如果您两次使用相同的名称会怎样？

*   是否`akka-testkit`要求您`ActorSystem`与传递给`TestKit`构造函数的共享一个公用？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-01T12:05:18.593

创建一个 ActorSystem 非常昂贵，因此您希望避免在每次需要时都创建一个新的。此外，您的演员应该在同一个 ActorSystem 中运行，除非他们有充分的理由不这样做。ActorSystem 的名称也是在其中运行的演员的路径的一部分。例如，如果你在一个名为它的系统中创建一个演员，`MySystem`它将有一个类似`akka://MySystem/user/$a`. 如果你在一个演员上下文中，你总是有一个对 ActorSystem 的引用。在 Actor 中，您可以调用`context.system`. 我不知道 akka-testkit 期望什么，但你可以看看 akka 测试。

总而言之，您应该始终使用相同的系统，除非有充分的理由不这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-19T04:33:52.133

以下是一些可能有助于理解“为什么文档总是建议将一个 ActorSystem 用于一个逻辑应用程序”的材料：

1.  ActorSystem 最重的部分是调度程序。每个 ActorSystem 至少有一个。调度程序是使参与者运行的引擎。为了使其运行，它需要线程（通常从线程池中获取）。默认调度程序使用至少有 8 个线程的 fork-join 线程池。

2.  有共享设施，如监护人演员、事件流、调度程序等。其中一些在用户空间中，一些在内部。所有这些都需要创建和启动。

3.  在大多数情况下，一个具有一个线程池的 ActorSystem 配置为核心数量应该会产生最佳结果。

4.  这里文档提到了逻辑应用程序，我更喜欢考虑阻塞或非阻塞应用程序。根据 dispatcher 的配置，一个 ActorSystem 对应一个配置。如果应用程序用于相同的逻辑，则一个 ActorSystem 就足够了。

这是一个[讨论](http://grokbase.com/t/gg/akka-user/148pvpzzt2/multiple-actorsystems-weight-uses-etc)，如果你有时间，你可以阅读它。他们讨论了很多，ActorSystem，本地或远程等。

# jsp - 如何使用超链接发送带有struts1.3.8中值的动态参数？

> ID：10396553
> 
> 赞同：0
> 
> 时间：2012-05-01T10:39:01.187
> 
> 标签：jsp, parameters, hyperlink, struts

我正在使用struts1.3.8。在我的 JSP 页面中，结果将动态显示。动态结果包含超链接。当用户单击超链接时，请求应该连同一些动态参数及其值一起转到 Action 类。简单的示例代码提供了更好的理解..如何实现这个????
非常感谢您的回复
，谢谢，
Laxman Chowdary

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:36:44.600

使用 JSTL：

```
<a href='<c:url value="someAction.do">
             <c:param name="paramName" value="${someBean.someValue}"/>
         </c:url>'>Click here</a> 
```

你也可以使用struts [html:link](http://struts.apache.org/1.x/struts-taglib/tagreference.html#html%3alink)标签，但它不如c:url 标签好用。

# java - 在接口中使用 Java 泛型

> ID：10396555
> 
> 赞同：5
> 
> 时间：2012-05-01T10:39:02.793
> 
> 标签：java, generics

我想创建一个具有以下方法的接口：

```
public interface MyInterface {
  public Class<X> getClass();
  public void handle(X message);
} 
```

其中 X 在两种方法中必须是相同的类型。我需要这样做的原因是我收到的消息是需要转换为适当的类（使用 getClass）的 blob，然后我想强制实现者实现一个采用适当类的句柄方法（而不是假设有一个并使用反射来调用它）。

似乎这样做的唯一方法是向接口添加一个类型参数，如下所示：

```
public interface MyInterface<T> {
...
} 
```

但这并不理想，因为级联依赖项需要在各种其他类中指定该类型。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:48:36.717

> 其中 X 在两种方法中必须是相同的类型

您不能仅通过定义强制接口的 2 个方法相互依赖。
`getClass`并且`handle`将始终是 2 个单独的方法。
您可能应该做的是有 1 个方法，并将*类的类型*`handle`作为参数传递（可以是像 an或任何指示符一样简单的东西）并委托给 a以创建要在方法内使用的适当类。 所以方法将（最终）获得适当的类来使用。*`Enum``Factory``handle`
`handle`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T10:55:47.900

您可以为方法指定泛型类型参数，如下所示：

```
public <X> void handle(X message); 
```

但这并不能确保方法之间的一致性，所以如果你有：

```
public <X> Class<X> getClazz();
public <X> void handle(X message); 
```

你不能说这`<X>`两种方法都是一样的。*

# sdk - Android 平板应用开发基础

> ID：10396559
> 
> 赞同：-3
> 
> 时间：2012-05-01T10:39:24.013
> 
> 标签：sdk, android

我正在开发我的第一个 android 平板电脑应用程序。我也想为智能手机开发相同的应用程序。为两者开发应用程序的最低 sdk 版本应该是什么？我应该有多少个布局文件夹来支持两个设备上的应用纵向和横向模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T11:37:00.177

> 为两者开发应用程序的最低 sdk 版本应该是什么？

随你喜欢。最低 SDK 版本不会影响您的应用是否可以在平板电脑上运行。在这一点上，我建议专注于 Android 2.1+，这意味着使用 7 作为 minSdkVersion，但这取决于你。

> 我应该有多少个布局文件夹来支持两个设备上的应用纵向和横向模式？

你需要多少就多少，仅此而已。换句话说，不可能抽象地回答这个问题。

首先将所有内容都放入`res/layout/`. 当您确定需要其他资源集以使事情更好地工作时（例如，`res/layout-large-land/`对于平板电脑横向活动布局），添加它们。

# ruby-on-rails - 如何覆盖模型中另一个虚拟属性的属性？

> ID：10396560
> 
> 赞同：0
> 
> 时间：2012-05-01T10:39:25.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, virtual-attribute

我有一个虚拟属性`start_date`和一个数据库列`start`（日期时间）。

`start`我怎样才能用日期覆盖日期（但不是时间）`start_date`？

我在 setter 方法中尝试了这个，记录器说 self.start/start 已设置，但在数据库和更新日志`start`中仍然有旧日期。

```
# model: db table with columns: id(int), start(datetime)
class DateTimeTest < ActiveRecord::Base

  attr_accessible :start_date, :start

  def start_date=(value)
    logger.debug '>>>>' + start.inspect
    logger.debug '>>>>' + self.start.inspect
    start = DateTime.new(value.to_date.year, value.to_date.month, value.to_date.mday, 15,15,15)
    self.start = DateTime.new(value.to_date.year, value.to_date.month, value.to_date.mday, 15,15,15)
    logger.debug '>>>>' + start.inspect
    logger.debug '>>>>' + self.start.inspect
  end

end

# view
<%= simple_form_for(@datetimetest) do |f| %>
  <%= f.input :start_date, :as => :string %>
  <%= f.input :start %>
  <%= f.button :submit %>
<% end %>

# controller is a base scaffolding controller 
```

在日志中，我可以看到`start`已填充：

```
Parameters: {..., "datetimetest"=>{"start_date"=>"03.05.2012", "start(1i)"=>"2012", "start(2i)"=>"5", "start(3i)"=>"1", "start(4i)"=>"13", "start(5i)"=>"05"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:13:15.237

DateTime 分解为年、月、月日、小时、分钟和秒，但不方便分解为日期和时间。

```
def start_date(value)
  start = DateTime.new(value.year, value.month, value.mday,
                       start.hour, start.minute, start.second)
  logger.debug self.start.inspect
end 
```

# java - 如何使用 Spring 的 MongoTemplate 和 Query 类检索字段子集？

> ID：10396561
> 
> 赞同：22
> 
> 时间：2012-05-01T10:39:27.237
> 
> 标签：java, spring, mongodb, mongodb-query, spring-data-mongodb

我希望能够执行以下控制台命令以返回仅填充了一部分字段但使用 Spring[`MongoTemplate`](https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/MongoTemplate.html)类的所有行：

**控制台命令**

```
db.person.find(null,{name:1}) 
```

**Mongo模板**

```
mongoTemplate.find(new Query(...), Person.class) 
```

有关投影（子集）查询的信息可以[在 MongoDB 手册](https://docs.mongodb.com/manual/tutorial/project-fields-from-query-results/)中找到。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-03T10:04:37.517

```
Query q = new Query();
q.fields().include("name");
mongoTemplate.find(q, Person.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T13:04:27.083

```
mongoTemplate.getCollection(COLLECTION).find(null, new BasicDBObject(FIELD, "1")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-01T15:51:17.573

如果目标是仅使用字段的子集填充标准域对象，则使用[另一个答案](https://stackoverflow.com/a/10429167/1108305)`d.fields().include()`中描述的方法是可行的方法。然而，我经常发现拥有完整的对象是不可取的（部分填充的可能很容易误导未来的开发人员阅读代码），我宁愿拥有一个只包含我正在检索的字段子集的对象。在这种情况下，仅使用字段子集创建和检索投影对象效果很好。

**投影类**

```
@Document("person") // Must be the same collection name used by Person
public class PersonNameOnly {
  private String name;

  public String getName() { return name; }
  public void setName(String name) { this.name = name; }
} 
```

**`MongoTemplate`询问**

```
mongoTemplate.find(new Query(...), PersonNameOnly.class); 
```

* * *

如果要对多个类型使用相同的投影对象，可以省略投影对象中`@Document`带有集合名称的声明，并在`MongoTemplate`查询中指定集合名称。

**投影类**

```
public class NameOnly {
  private String name;

  public String getName() { return name; }
  public void setName(String name) { this.name = name; }
} 
```

**`MongoTemplate`询问**

```
mongoTemplate.find(new Query(...), NameOnly.class, "person"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-15T14:48:19.077

您可以使用：

```
mongoTemplate.findDistinct(String field, Class<?> entityClass, Class<T> resultClass); 
```

# http - 试图追踪我在新西兰托管的网站从美国访问所需的时间

> ID：10396568
> 
> 赞同：0
> 
> 时间：2012-05-01T10:40:03.337
> 
> 标签：http, proxy, traceroute

我住在新西兰，刚刚创建了一个网站，我也在新西兰托管了 novazeal.com 和 novazeal.co.nz。我希望针对海外客户以及新西兰客户，因此我试图决定是否启动第二个托管在美国的网站并将 .com 域指向该网站。

我从美国的朋友那里听说，我在新西兰这里托管的一个网站访问速度很慢，所以我真正需要做的是让 traceroute 花费时间通过美国的某个位置。来自我这里的计算机的普通 tracert 只能通过新西兰的服务器，所以我无法通过使用普通 tracert 获得我正在寻找的措施。有谁知道我可以使用的替代方案，例如强制通过远程 ISP 跳转的应用程序，或提供从远程位置检索页面所需时间的代理服务。

当然，如果美国有人愿意为我运行跟踪并将跳跃时间统计信息发送给我，我将不胜感激。我可以问我提到的朋友，但他们不是特别技术，所以试图通过电子邮件向他们解释可能会是一件令人困惑的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:17:43.247

有一些基于 Web 的路由跟踪实用程序，其中一些托管在美国，它将向您显示该服务与您的站点之间的路由和延迟（在某个时间点）。

但是，`traceroute`它并不能让您全面了解您所受到的网络延迟影响：如今，路由器会进行各种复杂的流量整形，*即使*您指定，`traceroute`探测也不会被视为与您的 HTTP 流量相同探测器应使用 TCP 和端口 80。

 *更不用说网络延迟本身只是难题的一小部分。ISP 使用（有时是透明的）HTTP 代理执行各种缓存，除非/直到他们的客户访问您的站点，否则您不会从中受益。*

# jsf - JSF FacesContext#addMessage 不显示

> ID：10396572
> 
> 赞同：5
> 
> 时间：2012-05-01T10:40:16.617
> 
> 标签：jsf, primefaces

在我[之前](https://stackoverflow.com/questions/10367152/jsf-authentication-cannot-intercept-error-messages) 的问题中，我遇到了从登录表单显示验证消息的问题。该问题现已解决，但这次我无法使用`FacesContex#addMessage`.

使用 JSF + PrimeFaces。

```
<p:dialog header="Login" widgetVar="loginDlg">
    <h:form id="loginForm">
        <h:panelGrid columns="3" cellpadding="5">
            <h:outputLabel for="username" value="Username:" />
            <p:inputText value="#{loginBean.username}" id="username" required="true" label="username" />
            <p:message for="username" />
            <h:outputLabel for="password" value="Password:" />
            <h:inputSecret value="#{loginBean.password}" id="password" required="true" label="password" />
            <p:message for="password" />
            <f:facet name="footer">
                <p:commandButton value="Login" id="loginDlgButton" update=":loginForm,:welcomeMsg" actionListener="#{loginBean.login}"
                                    oncomplete="handleLoginRequest(xhr, status, args)"/>
                <p:message for="loginDlgButton" />
            </f:facet>
        </h:panelGrid>
    </h:form>
</p:dialog> 
```

在**LoginBean** (a `SessionScoped` `ManagedBean`) 中：

```
public void login() {
    FacesContext context = FacesContext.getCurrentInstance(); 
    RequestContext rContext = RequestContext.getCurrentInstance();
    HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest(); 
    try { 
        request.login(this.username, this.password); 
        rContext.addCallbackParam("loggedIn", true);
    } catch (ServletException e) { 
        rContext.addCallbackParam("loggedIn", false);
        context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, "Login Error", "Invalid credentials")); 
    } 
} 
```

当验证成功并且登录失败时，此代码应显示“无效凭据”消息，但不显示。此外，在我的网页正文的某处，我还添加了这一行：

```
<p:messages autoUpdate="true" /> 
```

但我的消息甚至没有显示在那里。

[Javadocs](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/api/javax/faces/context/FacesContext.html#addMessage%28java.lang.String,%20javax.faces.application.FacesMessage%29)这么说

> 如果 clientId 为 null，则假定此 FacesMessage 不与任何特定组件实例关联

但我不明白这是什么意思。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T13:04:09.070

放置`<p:messages autoUpdate="true" />`在您的或由您的 commandButton`form`更新的一些包装器中，或放置而不是`update``loginDlgButton``null``context.addMessage(...`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T12:48:49.187

我在您的代码中没有看到 ap:messages 标记。它与 p:message 标记不同。p:message 附加到另一个组件并显示为验证的一部分。p:messages（或 p:growl）组件是您在 bean 中更新的内容。尝试像这样添加消息或咆哮组件：

```
<h:form id="loginForm">
<p:growl id="messageGrowl" showDetail="true" sticky="false" />
<h:panelGrid columns="3" cellpadding="5"> 
```

# c# - 单击事件时，Silverlight 子窗口会调整大小以显示更多选项

> ID：10396574
> 
> 赞同：1
> 
> 时间：2012-05-01T10:40:22.917
> 
> 标签：c#, silverlight, animation, childwindow

我有一个 Silverlight 子窗口，

但是我想对用户隐藏某些选项，即复选框，直到单击当前表单上的特定项目。

单击该项目后，我需要动态调整窗口大小以在窗口侧面显示复选框。我相信这将使用动画来使过渡平滑但是我不知道这是否可能？任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T07:20:44.440

尝试使用手风琴或扩展器控件，它们具有动画增长和缩小它们包含的特定内容的功能！希望这可以解决您的问题

# r - 在图例中包含自定义文本

> ID：10396576
> 
> 赞同：0
> 
> 时间：2012-05-01T10:40:28.107
> 
> 标签：r, plot

假设我有一个看起来像这样的数据。

```
> print(dat)
V1    V2
1  1 11613
2  2  6517
3  3  2442
4  4   687
5  5   159
6  6    29

# note that V2 is the frequency and V1 does not always start with 1\. 

> plot(dat,main=title,type="h")
   # legend()?? 
```

现在我要做的是绘制直方图，并将平均值和标准差作为图例包含在内。在上面的例子中，标准差等于 0.87，平均值等于 1.66。

如何在 R 中自动实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T14:33:43.267

![在此处输入图像描述](../Images/d4b6944c8e280208a392a5a0b830c50b.png)这解决了 Gavin 注意到的图例创建问题。

```
require(Hmisc) 
myMean <- wtd.mean(dat$V1, dat$V2)
mySD <- sqrt(wtd.var(dat$V1, dat$V2))
plot(dat,main="title",type="h")

L= list( bquote(Mean== .(myMean)), bquote(SD== .(mySD) ) ) 
legend('topright', legend=sapply(L, as.expression)) 
```

这是从[我在 2010 年发布的 Rhelp 上的一个答案中](http://markmail.org/search/?q=r-help%20list:org.r-project.r-help%20as.expression%20sapply%20lumley#query:r-help%20list:org.r-project.r-help%20as.expression%20sapply%20lumley%20page:1%20mid:skb3duf5qqrzqd6l%20state:results)提取的，该答案将解决方案的策略归因于 Gabor Grothendieck 和 Thomas Lumley 之间的 2005 年交流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T11:02:38.123

这非常接近：

```
dat <- data.frame(V1 = 1:6, V2 = c(11613, 6517, 2442, 687, 159, 29))

addMyLegend <- function(data, where = "topright", digits = 3, ...) {
    MEAN <- round(mean(data), digits = digits)
    SD <- round(sd(data), digits = digits)
    legend(where, legend = list(bquote(Mean == .(MEAN)), 
                                bquote(SD == .(SD))),
           ...)
}

plot(dat, type = "h")
addMyLegend(dat$V1, digits = 2, bty = "n") 
```

这使

![自定义图例](../Images/7292ab8010d4192b04c919c4fd23ec85.png)

我不确定为什么 plotmath 代码没有显示`==`和排版`=`...必须调查一下。

要查看正在发生的事情，请阅读`?bquote`它解释说它可以用来用动态数据替换表达式的组件。任何被包裹的东西`.( )`都将被表达式包裹部分中命名的对象的值替换。因此`foo == .(bar)`将寻找一个名为的对象`bar`并将值插入`bar`到表达式中。如果`bar`包含`1.3`，则应用后的结果`bquote(foo == .(bar))`将类似于`expression(foo == 1.3)`。

如果没有阅读，我的其余功能`addMyLegend()`应该是相当不言自明的`?legend`。请注意，您可以通过 in 传递`legend()`任何`...`参数`addMyLegend()`。

# zend-framework - Zend Framework 后台服务/worker

> ID：10396579
> 
> 赞同：0
> 
> 时间：2012-05-01T10:40:40.013
> 
> 标签：zend-framework, service, background-process, directory-structure

我想为我正在开发的 ZF 应用程序创建一个后台工作程序，但我对软件架构的困惑并不多，而是对文件系统架构的更多困惑。

控制器将触发工作人员执行某些任务，然后控制器将检查工作人员的状态，因此已涵盖该位。

从文件夹结构的角度来看，这些工人的代码应该放在哪里？

```
application/
  models/
  services/
    worker/
      application/ --> code for the worker (standard ZF structure)
      worker.php   --> entry-point to the worker 
```

或者

```
application/
  controllers/
    WorkerController.php
  models/
    Worker/
      Class.php
      Class2.php
  services/
    worker.php --> entry-point to the worker 
```

请记住，主应用程序和工作程序的配置几乎相同（尤其是相同的数据库连接凭据、自动加载设置），工作程序需要访问主应用程序的模型。

任何建议或意见将不胜感激。

非常感谢，天使

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:20:04.843

MVC 不仅在 Web 环境（Apache）中有用，你也可以将它用于“后台工作人员”（视图是你的控制台），你只需要添加一个 cli.php 或其他东西，处理 cli 参数（模块，控制器, action)，创建请求对象并将其传递给调度程序。

因此，您如何触发后台工作程序（执行？），调用您新创建的 cli.php 并享受您的 zf 应用程序的功能（配置、自动加载、..）。

简而言之，我无法告诉您 cli.php 究竟长什么样，但我找到了本教程： [从命令行使用 Zend Framework](http://webfractor.wordpress.com/2008/08/14/using-zend-framework-from-the-command-line/)

对您来说重要的对象：Zend_Controller_Request_Simple

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T05:50:23.707

如果工作人员是通过 cronjob 触发的，那么您*可以* 使工作人员组件成为一个模块，因此它有自己的控制器、视图等。然后 - 正如 @MonkeyMonkey 所指出的那样 - 您的命令行脚本可以向该模块发出 MVC 请求。

但在我看来，这个工作组件可能更自然地作为服务运行，一个包含由您的 cron 触发的 cli 脚本调用的功能的类。基于 ZF 的 cli 脚本 - 可选地使用`Zend_Console_Getopt`，这很酷 - 可以使用相同的配置和 Bootstrap 类，有选择地引导资源（基于 cli 的任务可能不需要一些资源），并使用与标准 MVC 应用程序相同的自动加载器.

正如您所注意到的，这些工作人员将更新应用程序面向 Web 的部分可以访问的状态表，因此这些页面可以根据请求读取/呈现状态。

至于它的文件系统结构，您可以将这些服务类命名为`Application_Service_MyWorker`存储在文件中`application/services/MyWorker.php`。`Application_Service_Worker_MyWorker`甚至可能使用诸如stored in之类的东西进一步下推`application/services/Worker/MyWorker.php`，尽管后者可能需要在资源自动加载器中添加另一个资源类型条目，类似于在中定义映射器和基于 DbTable 的模型的方式`Zend_Application_Module_Autoloader`。

# javascript - 如何使用 jQuery 调整背景图像的大小

> ID：10396583
> 
> 赞同：1
> 
> 时间：2012-05-01T10:41:08.640
> 
> 标签：javascript, jquery, css, html

全部！我遇到了两个关于使用 jQuery 调整背景图像大小的问题。首先，我有一个神秘的滚动条。而且，我无法隐藏溢出图像。

我的代码如下...

**HTML**

```
<div id="imageBG"></div>  
<div id="container" closs="clearfix">
    <header>
        <div id="header">
            <h1>飯香岡八幡宮</h1>
            <p>0436-41-2027</p>
        </div>
    </header>

    <div id="rightColumn">
    <nav class="clearfix">
        <ul class="clearfix">
            <li><a href="#">TOP</a></li>
            <li><a href="#">NEW</a></li>
            <li><a href="#">INTRODUCTION </a></li>
            <li><a href="#">MAP</a></li>
            <li><a href="#">SPECIAL</a></li>
        </ul>
        </nav>

  <div id="content" role="main">

  </div><!-- end #content -->
</div><!-- end #rightColumn -->

  <footer>

  </footer>

</div><!-- end #conteiner -->

  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script>

  <!-- scripts concatenated and minified via build script -->
  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>
  <!-- end scripts -->

  <!-- Asynchronous Google Analytics snippet. Change UA-XXXXX-X to be your site's ID.
       mathiasbynens.be/notes/async-analytics-snippet -->
  <script>
    var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>
</body>
</html> 
```

**CSS**

```
#container {
    margin: 0 auto;
    padding: 0 auto;
    width: 98%;
    min-width: 1250px;
    height: 100%;
    position: fixed;
    z-index: 15;
}

#imageBG {
    width: 100%;
    height: 100%;
    background-image: url( '../img/theme_bg.jpg' );
    position: fixed;
    top: 0;
    left: 0;
    z-index: 5;
    overflow: hidden;
} 
```

**JavaScript**

```
$( document ).ready( function() {

    // Adjust the window 
    $.event.add( window, 'resize', adjustImageBGAndGrid );

});

function adjustImageBGAndGrid() {

    var windowHeight = $(window).height(),
    windowWidth = $(window).width(),
    containerHeight = $( '#container' ).height() + 300,
    ratio = 1280 / 720;

    // adjust the container and body height so we scroll correctly
    // in most major browsersm including iPad
    if (windowHeight < containerHeight ) {
        $( 'body' ).css( 'height', containerHeight );
    } else {
        $( 'body' ).css( 'height', windowHeight );
    }

    // adjust the size of the background grid image and video
    if ( Math.round( ( windowWidth / windowHeight ) ) < ratio ) {
        $( '#imageBG' ).css( {
            'width': 'auto',
            'height': '100%',
            'left': '0px',
            'right': '0px',
            'top': '0px',
            'bottom': '0px'
        });
    } else {
        $( '#imageBG' ).css( {
            'width': '100%',
            'height': 'auto',
            'left': '0px',
            'right': '0px',
            'top': '0px',
            'bottom': '0px'
        });
    }
} 
```

我需要一些帮助和提示。感谢您的合作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:29:14.060

**编辑**

我刚刚得到了你真正需要的东西：

[http://jsfiddle.net/KqQJX/1/](http://jsfiddle.net/KqQJX/1/)

基于本教程：

[http://unstoppablerobotninja.com/entry/fluid-images](http://unstoppablerobotninja.com/entry/fluid-images)

# html - Soundcloud HTML5 播放器：Events.FINISH 只触发了一次

> ID：10396584
> 
> 赞同：1
> 
> 时间：2012-05-01T10:41:27.453
> 
> 标签：html, soundcloud

我正在使用 SC HTML5 播放器，当一个声音结束时，我加载另一个源，但是 FINISH 事件似乎只为第一首歌触发，我的代码如下

```
//Set the source
document.getElementById("sc-widget").src = scPath;
//get the widget reference
var widgetIframe = document.getElementById('sc-widget'),
widget       = SC.Widget(widgetIframe);
//set the finish event
widget.bind(SC.Widget.Events.FINISH, endSC);

function endSC() {
                    var scPath = "http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F1848538&show_artwork=true&auto_play=true";
                    document.getElementById("sc-widget").src = scPath;
                    var widgetIframe = document.getElementById('sc-widget'),
                    widget       = SC.Widget(widgetIframe);
                    widget.bind(SC.Widget.Events.FINISH, endSC);
} 
```

我尝试将 endSC 目标设置为另一个函数，但这不起作用，我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T12:48:58.210

我有同样的问题。SC.Widget 方法在我第一次调用它时工作正常，但如果我第二次尝试调用它，控制台将在[http://中触发“Uncaught TypeError: Cannot read property 'parentWindow' of null”错误w.soundcloud.com/player/api.js](http://w.soundcloud.com/player/api.js)脚本。这就是 api.js 脚本停止操作（.Widget、.bind 等）的地方

我找到了解决方案。这很奇怪，但它是一个解决方案。SoundCloud 远程脚本被缩小。在浏览器中加载，在一些在线js美化器中C/P并保存在本地。编辑第 103 行如下：

```
return a.contentWindow;// || a.contentDocument.parentWindow 
```

所以我删除了那个 .parentWindow 调用。

保存文件并在页面的 head 部分中调用它。就是这样！现在 FINISH 事件在每个加载的小部件上触发。

我希望这将有所帮助。

# php - PHP将单词连接到mysql查询

> ID：10396585
> 
> 赞同：1
> 
> 时间：2012-05-01T10:41:27.810
> 
> 标签：php

我有一个查询

```
"select * from test"; 
```

我必须在测试后添加 UNION

```
"select * from test union" 
```

它不是连续的。

如何将联合添加到查询中？

**更新**

```
select * from x where id = "2" union select * from y where id = "2" union select * from z where id = "2"
select * from x where id = "3" union select * from y where id = "3" union select * from z where id = "3" 
```

请参阅 select 语句 id = 3 ，union 丢失。现在，我必须在查询中添加这个联合来执行和删除最后一个额外的联合并将查询传递给 mysql_query() 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:46:55.720

UNION 所做的是结合 2 个单独的 SELECT 查询的结果

```
SELECT column_name(s) FROM table_name1
UNION
SELECT column_name(s) FROM table_name2 
```

或者

```
SELECT column_name(s) FROM table_name1
UNION ALL
SELECT column_name(s) FROM table_name2 
```

对于重复使用 UNION ALL

**编辑：**

而不是使用这个使用 OUTER JOINS LEFT JOIN

他们好多了。并给你确切的结果等待我会为你建立一个查询。

**编辑：**

```
SELECT * FROM tablename_1 temp_name_1 
LEFT JOIN tablename_2 temp_name_2 ON temp_name_1.id=temp_name_2.id 
LEFT JOIN tablename_3 temp_name_3 ON temp_name_1.id=temp_name_3.id 
WHERE temp_name_1.id = "2" 
```

其中 tablename_1 是 x，tablename_2 是 y，tablename_3 是 y

和 temp_name_1、temp_name_2、temp_name_3 是您喜欢的名称。这些是临时名称，因此您可以删除 temp_name_? 并且可以使用表的原始名称。

**编辑：**

使用它来加入您的选择语句：

```
$string = "";
$string .= (!empty($string)?" UNION ":" ")."Your query here"; 
```

无论是在循环中还是在 if else if 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:50:36.300

尝试这样的事情

```
 SELECT * FROM test
  UNION
  SELECT * FROM test1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T10:45:15.320

```
$var1 = "Select * from test";
$vart2 = "union";
$vart3  =  var1." ".var2;
echo $var3; 
```

# cuda - 带有数组的cuda模糊

> ID：10396589
> 
> 赞同：0
> 
> 时间：2012-05-01T10:42:10.493
> 
> 标签：cuda

我是图像处理的新手，想根据每个像素模糊值进行模糊。有一个整数数组保存每个像素的模糊值并在全局函数中使用 threadid，我想更改该像素值以进行模糊。我的图像格式是 Format24bppRgb 并且当我想更新像素值时出现问题，我无法将整数值加载到该像素。我真的不了解结构，也不知道是否可以直接使用 int 值更改像素而不更改 Color.red Color.blue ..value。我应该为此将 Format24bppRgb 格式转换为任何其他图像吗？这是我的代码：

```
__global__ void Workload(Format24bppRgb* imageData, int imageWidth, int *PixelBlurAmount)
 {
int tidX = threadIdx.x + blockIdx.x * blockDim.x;
int tidY = threadIdx.y + blockIdx.y * blockDim.y;

int tid  = tidX + tidY * imageWidth; 

imageData[tid] = PixelBlurAmount[tid];
 } 
```

和主要功能：

```
 int pixelBlurValue[1024*1024];

   for(int i=0; i<8; i++) 
   {
       for(int j=0; j<(1024*1024/8); j++) 
       { 
           pixelBlurValue[i*j]=i;  // VALUE
       }
   }       

   int * dev_pixValue;
   cudaMalloc(&dev_pixValue,sizeof(int)* (1024*1024));  
   cudaMemcpy(dev_pixValue,pixelBlurValue,sizeof(int) * (1024*1024)    ,cudaMemcpyHostToDevice);

   Workload<<<gridDim, blockDim>>>(
   dev_ptr_imageData,  
   imageWidth,
   dev_pixValue); 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:47:01.360

您可能已经安装了 CUDA SDK 中的一些示例代码，请检查。对于理论部分，它基于[此技术说明](http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_64_website/projects/convolutionSeparable/doc/convolutionSeparable.pdf)。请注意，大多数模糊实际上是可分离的内核，因此已经有一些用于卷积的快速算法（可以适应 CUDA）。

# css - 表数据中锚图像之间的空间

> ID：10396596
> 
> 赞同：0
> 
> 时间：2012-05-01T10:42:58.927
> 
> 标签：css, image, gaps-in-visuals

表格数据在其下方有边框和链接图像以及其他一些锚文本。

问题是它在链接之间有空间，我从[这里](https://stackoverflow.com/questions/1111783/css-how-to-remove-whitespace-between-anchored-images)得到的解决方案只是使用垂直对齐来消除锚点之间的间隙（有效），但在我的情况下，它会在边框顶部 td 边框和锚点图像之间创建一个间隙。使用 clear 也不起作用。任何的想法？

```
 <td style="font-size:14px;border:1px solid #848484;font-weight: bold;">
      <a target="_BLANK" href=""><img style="border:none;" src="clothing.jpg" alt="Female Clothing"/></a>
      <a target="_blank" href="">&nbsp; &raquo;  Sub Men</a>
   </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:13:48.787

也许您需要设置：

```
<table cellspacing="0" cellpadding="0">
  ...
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:03:45.293

我发现我必须同时使用垂直对齐和显示块才能修复它。

# apache - 在 CentOS/RHEL 中查找已安装的 apache 模块版本

> ID：10396601
> 
> 赞同：6
> 
> 时间：2012-05-01T10:43:37.263
> 
> 标签：apache, apache2, centos, rhel

[我在这里](https://stackoverflow.com/questions/3230733/how-can-i-check-apache-modules-version)发现了一个类似的问题，但针对的是 Debian 。

但是，由于我没有 apt-cache 它对我没有帮助。跑步：

```
 httpd -M 
```

给我一个所有已安装模块的列表，但不是它们的版本。我的同事刚刚指出您可以使用：

```
 yum info mod_dav_svn.x86_64 
```

这将返回已安装的版本和通过 Yum 可用的版本，但是，如果我使用 httpd -M 它会列出如下名称：

mod_proxy_http.so

是否有任何简单的方法来匹配已安装的模块文件名（即 x86_64 i386），以便我可以检查每个模块，或者更好的是有人知道一次为所有模块输出此信息的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T11:30:40.483

我不清楚你到底想知道或实现什么，但对我来说，这样的事情似乎有效：

> cd /usr/lib/httpd/modules/
> 文件 *.so

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T10:09:41.990

您可以使用 yum 来获取 apache 模块的版本：

```
yum info mod_fcgid 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-15T19:08:24.160

# 已安装的 Apache 模块列表：

```
yum list installed mod_* 
```

或者

```
rpm -qa mod_* 
```

* * *

### 格式化输出“PackageName-Version-Release.Arch”：

```
yum list installed mod_* | awk '/mod_.*/ { split($1,a,"."); print a[1] "-" $2 "." a[2] }' 
```

或者

```
rpm -qa --qf "%{NAME}-%{VERSION}-%{RELEASE}.%{ARCH}\n" mod_* 
```

# php - 将特殊字符转换为 HTML 实体

> ID：10396602
> 
> 赞同：2
> 
> 时间：2012-05-01T10:43:38.023
> 
> 标签：php, character-encoding

我有一个 HTML 文件，当我在记事本中查看它时，我可以看到以下内容：

```
<p><span>Copyright © 2008 Your Company Name</span> 
```

注意版权符号：

我加载 HTML 并在其上执行此操作：

```
$html = file_get_contents('test.html');
$html = mb_convert_encoding($html, 'HTML-ENTITIES', "UTF-8");
file_put_contents('output.html', $html); 
```

当我在记事本中再次查看 html 时，版权符号已经消失并被空格替换？！

我希望将版权符号替换为`&copy;`或`&#169`。这不是选项`mb_convert_encoding`的`HTML-ENTITIES`作用吗？

这是我正在使用的[测试 HTML 文件。](http://opensourcetemplates.org/templates/preview/environmental-brand/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T10:55:51.610

您的测试 HTML 页面**未**以 UTF-8 编码；因此，当`mb_convert_encoding`看到版权字符（序数值 169）时，它不知道如何处理它认为无效的 UTF-8 序列。

因此，您应该在调用时指定正确的输入编码`mb_convert_encoding`：

```
$html = mb_convert_encoding($html, 'HTML-ENTITIES', 'ISO-8859-1'); 
```

或者，您可以使用类似的东西

```
$html = htmlentities($html, ENT_COMPAT | ENT_HTML401, 'ISO-8859-1'); 
```

**注意：**我直接回答你的问题，但你没有说你需要转换什么。可能有更好的方法来实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:53:05.277

如果您将 html 作为 UTF-8 提供，那么正确的操作肯定是：什么都没有。

```
<p><span>Copyright © 2008 Your Company Name</span> 
```

是完全有效的 html - 只需查看*此*页面的页面源代码。

# html - 如何在以下示例中排列我的文本和按钮？

> ID：10396603
> 
> 赞同：0
> 
> 时间：2012-05-01T10:43:42.173
> 
> 标签：html, css, twitter-bootstrap

我的文本当前位于按钮下方，尽管使用边距和填充，但我无法使其居中

[http://jsfiddle.net/9b9at/](http://jsfiddle.net/9b9at/)

我希望他们居中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:50:48.600

把你的文字粘在 a`<span>`中，`float:`然后添加一些`line-height:`

[http://jsfiddle.net/9b9at/2/](http://jsfiddle.net/9b9at/2/)

# mysql - MySQL：使用子句“而不是更新”触发

> ID：10396604
> 
> 赞同：2
> 
> 时间：2012-05-01T10:43:45.730
> 
> 标签：mysql, database-design, triggers, event-triggers

我正在尝试创建一个考虑到历史的数据库（经验表明你有一天或另一天必须这样做）。

我在这里问过[database-design-how-to-handle-the-archive-problem](https://softwareengineering.stackexchange.com/questions/146596/database-design-how-to-handle-the-archive-problem)但没有比[这里](http://www.simple-talk.com/sql/database-administration/database-design-a-point-in-time-architecture/)的链接更好的分析器了。

我的问题是关于**在哪里**编写代码以及在技术上**如何**编写代码（MySQL 让我头疼）。首先，我已经开始在 PHP 中执行此操作：在进行任何插入之前，复制记录并将其标记为“过时”，然后修改记录。

但是有一个依赖问题（manytomany 和 manytoone 关联也必须更新），这意味着编码（一种或另一种方式）表附带的所有依赖项和更新（这是不可接受的）。

所以我正在考虑在数据库服务器端完成所有工作。这将大大简化我的 PHP 代码。

问题是我必须在修改当前记录之前“存档”它。为此，代码必须在[“更新前”触发器](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)中。

这是我的代码：

```
DELIMITER ;;

DROP TRIGGER IF EXISTS produit_trigger_update_before;

CREATE TRIGGER produit_trigger_update_before
BEFORE UPDATE ON produit
  FOR EACH ROW BEGIN
    /* */
    INSERT INTO produit SET 
      id_origine      = OLD.id_origine,
      date_v_creation = OLD.date_v_creation,
      date_v_start    = OLD.date_v_debut,
      date_v_end      = NOW(),
      ...
      last_record     = OLD.last_record;

    /* Dependancies : */
    SET @last=LAST_INSERT_ID();
    UPDATE categorie_produit SET id_produit=@last
    WHERE id_produit = OLD.id;
    UPDATE produit_attribut SET id_produit=@last
    WHERE id_produit = OLD.id;
  END;;

DELIMITER ;; 
```

如果我让这段代码工作，我所有的问题都消失了。但该死的，它不起作用：

```
mysql> update produit set importance=3;
ERROR 1442 (HY000): Can't update table 'produit' in stored function/trigger because it is already used by statement which invoked this stored function/trigger.
mysql> Bye 
```

在此[页面](http://www.simple-talk.com/sql/database-administration/database-design-a-point-in-time-architecture/)中有一个工作示例，它`INSTEAD OF UPDATE`在触发器中使用了子句。MySQL 似乎不支持这一点。

所以我的问题**既是**概念性的（=你有任何其他可以工作的“原则”）和/或技术性的（=你能让这个触发器工作吗）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:26:37.887

> 如果我让这段代码工作，我所有的问题都消失了。但该死的，它不起作用：

通常，您不能将表 A 上的触发器插入表 A 中，因为这可能会导致无限循环。（Oracle 术语中的触发突变）

就我个人而言，我不会使用触发器来做到这一点。触发器可以做“审计日志”——但这不是你想要的。

我建议您以编程方式解决它 - 使用 PHP 函数或 MySQL 存储过程（无论您的偏好如何），您称之为“ModifyProduit”。

然后，代码将基本上完成您上面的触发器所做的事情。（在当前行上设置代码 date_v_end 可能会更容易，然后插入一个全新的行。这样您就不必为更新引用的表而烦恼）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:08:16.827

你可以用这样的辅助表来做一个表的历史（我已经为mysql上的许多表做了这个，速度非常好）：

*   表`produit_history`具有与 + 2 个附加列相同的结构`produit`：“history_start DATETIME NOT NULL”和“history_stop DATETIME DEFAULT NULL”。
*   表上有 3 个触发器`produit`：
    *   后插入：在此触发器中，使用 history_start = NOW() 和 history_stop = NULL 简单插入`produit_history`相同的数据（NULL 表示当前行有效）
    *   更新后：此触发器执行两个查询。第一个是这样的联合国更新：

        ```
        UPDATE produit_historyset history_stop = NOW() WHERE id_origin = OLD.id_origin AND history_stop 为 NULL；
        ```

        第二个查询是与 AFTER INSERT 触发器中的相同的插入。
    *   AFTER DELETE：这会触发一个简单的更新，它与 AFTER UPDATE 中的更新相同。

然后，您可以使用以下 where 条件查询此历史记录表并在您感兴趣的任何时间获取快照：

```
WHERE (history_start <= "interesting_time" AND (history_stop IS NULL OR history_stop > "interesting_time"))
```

# iphone - 最佳实时解决方案设备（iPhone）与服务器端

> ID：10396606
> 
> 赞同：-1
> 
> 时间：2012-05-01T10:43:56.337
> 
> 标签：iphone, ios, streaming, real-time

我想以实时模式将原始数据从服务器流式传输到 iPhone。有什么好的解决方案吗？我的应用程序应该能够以图形方式实时呈现从服务器推送的测量结果。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:16:09.980

既然您说“测量”，听起来您的实时要求不如 VoIP 严格。您可以考虑两种方式：1) 推送通知，例如通过 Urban Airship，或 2) 制作 HTML5 应用程序并使用 socket.io。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:46:24.490

我找到了 Pusher 库 -> [https://github.com/lukeredpath/libPusher/](https://github.com/lukeredpath/libPusher/)

似乎这是我需要完成我的项目的正确事情。谢谢你们的帮助

# c# - GridView 不显示所有行

> ID：10396611
> 
> 赞同：3
> 
> 时间：2012-05-01T10:44:15.787
> 
> 标签：c#, asp.net, .net, data-binding, gridview

我的表单上有一个 GridView。我已将其 DataSource 设置为 DataTable。我像这样检索 DataTable：

```
SELECT AMOUNT, ISSUEDATE,REASON FROM PAYMENTS WHERE 
PENSIONERID=113 ORDER BY ISSUEDATE DESC 
```

当我在服务器端运行这个查询时，我得到了三条记录。但是在我的网页上，gridview 只显示了其中的两个。后面的代码没有设置任何条件会导致 gridview 不显示任何类型的记录。一段时间后，当我重新启动服务器时，我可以在 gridview 中看到第三行。这是与我的 IIS 相关的问题吗？在任何情况下可能是什么原因？谢谢你。

这是 GridView 和 datat 加载代码：

```
<asp:GridView ID="gvOdanBirm" runat="server" AllowPaging="True" 
    AutoGenerateColumns="False" CellPadding="4" ForeColor="#333333" 
    GridLines="None" OnPageIndexChanging="gvPayments_PageIndexChanging" 
    PageSize="3">
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <Columns>
        <asp:BoundField DataField="ISSUEDATE" HeaderText="Issue date">
            <ItemStyle BorderColor="#01055E" BorderStyle="Solid" BorderWidth="1px" 
                HorizontalAlign="Right" Width="70px" />
            <HeaderStyle BorderColor="#01055E" BorderStyle="Solid" BorderWidth="1px" />
        </asp:BoundField>
        <asp:BoundField DataField="AMOUNT" HeaderText="Amount">
            <ItemStyle BorderColor="#01055E" BorderStyle="Solid" BorderWidth="1px" 
                HorizontalAlign="Right" Width="30px" />
            <HeaderStyle BorderColor="#01055E" BorderStyle="Solid" BorderWidth="1px" />
        </asp:BoundField>
        <asp:BoundField DataField="REASON" HeaderText="REASON" 
            >
            <ItemStyle BorderColor="#01055E" BorderStyle="Solid" BorderWidth="1px" 
                HorizontalAlign="Left" Width="50px" />
            <HeaderStyle BorderColor="#01055E" BorderStyle="Solid" BorderWidth="1px" />
        </asp:BoundField>
    </Columns>
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
    <EditRowStyle BackColor="#999999" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
</asp:GridView> 
```

代码隐藏：

```
 gvPayments.DataSource=  GetPayments(pensionerID);
 gvPayments.DataBind(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:28:25.233

你可以试试下面的吗？

1.  查看该行没有出现时生成的页面的源代码...该行根本没有进入页面吗？或者它只是因为某种原因没有显示？

2.  当它没有出现时，你可以通过移动到下一页来获得第三行吗？暂时从aspx代码中取出分页命令，看看是否解决。

3.  检查服务器是否是最新的数据库、操作系统和 IIS 的所有服务包等。

4.  您正在运行什么版本的 IIS？什么服务器操作系统？

5.  您可以发布后面的代码`gvPayments_PageIndexChanging`，以及构建gridview 背后的任何代码吗？

6.  您使用什么浏览器查看结果？当您收到错误消息时，您可以尝试其他浏览器或其他机器吗？你得到同样的结果吗？

7.  忘了一个大人物......你能打破`gvPayments.DataSource= GetPayments(pensionerID);`吗？您是否从数据库中检索了所有三行？也许您的问题不在于 aspx 代码，而在于您要返回绑定的数据。

当你发布这些时会想得更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:38:05.763

是 SQL Server 吗？运行探查器并查看实际传递给 SQL Server 的 select 语句。您可以将其复制到 Management Studio 并执行以查看是否获得 2 或 3 条记录。不，它可能没有运行您传递给它的确切选择语句，并且知道它正在运行什么的唯一方法是分析它......

这将肯定地告诉您它是与 SQL 相关还是导致问题的 GridView...

# c# - 从http post/string c#中提取变量和值

> ID：10396612
> 
> 赞同：0
> 
> 时间：2012-05-01T10:44:25.953
> 
> 标签：c#, asp.net, .net-4.0

我正在尝试将 POST 数据读入 ASPX (c#) 页面。我现在在一个字符串中得到了帖子数据。我现在想知道这是否是使用它的最佳方式。使用此处的代码（http://stackoverflow.com/questions/10386534/using-request-getbufferlessinputstream-correctly-for-post-data-c-sharp）我有以下字符串

```
<callback variable1="foo1" variable2="foo2" variable3="foo3" /> 
```

由于它现在在一个字符串中，因此我根据空格进行拆分。

```
 string[] pairs = theResponse.Split(' ');
    Dictionary<string, string> results = new Dictionary<string, string>();
    foreach (string pair in pairs)
    {
        string[] paramvalue = pair.Split('=');
        results.Add(paramvalue[0], paramvalue[1]);
        Debug.WriteLine(paramvalue[0].ToString());
    } 
```

当一个值中有一个空格时，问题就来了。例如，`variable3="foo 3"`扰乱代码。

有没有更好的方法来解析字符串中传入的 http post 变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:50:06.887

您可能希望直接将其视为 XML：

```
// just use 'theResponse' here instead
var xml = "<callback variable1=\"foo1\" variable2=\"foo2\" variable3=\"foo3\" />";

// once inside an XElement you can get all the values
var ele = XElement.Parse(xml);

// an example of getting the attributes out
var values = ele.Attributes().Select(att => new { Name = att.Name, Value = att.Value });

// or print them
foreach (var attr in ele.Attributes())
{
    Console.WriteLine("{0} - {1}", attr.Name, attr.Value);
} 
```

当然，您可以将最后一行更改为您想要的任何内容，上面是一个粗略的示例。

# xml - 在 XQuery 中添加 2 个 XML 字符串

> ID：10396620
> 
> 赞同：0
> 
> 时间：2012-05-01T10:44:54.937
> 
> 标签：xml, string, xquery

我正在尝试创建一些项目的 xml 输出，效果很好，尽管当我尝试在它前面添加一个 blabla 标记时失败。

我认为这很容易，但我无法找到解决方案。

我正在使用的代码：

```
let $data := content:sortContent(content:retrieveLastFM() union content:retrieveYoutube() union content:retrieveImgur() union content:retrieveFlickr() union content:retrieveNYTimes() union content:retrieveDiggTechnology() union content:retrieveDiggAmusement()),

$doc := <description>Blablabla</description> <items> {$data} </items>

return $doc 
```

以下确实有效：

```
$doc := <items>{$data}</items> 
```

虽然我想要在我的项目列表前面进行描述..

我希望你明白我在这里想要达到什么;）提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:31:14.073

您尝试将一系列节点分配给`$doc`，这必须通过以下方式明确完成`,`：

```
let $data := ...,
    $doc  := (<description>Blablabla</description>, <items> {$data} </items>)
return $doc 
```

另一种可能性是将两个节点都包装在另一个元素或`document`节点中（正如变量名所暗示的那样）：

```
 $doc  := <doc><description>Blablabla</description><items> {$data} </items></doc> 
```

或者

```
 $doc  := document { <description>Blablabla</description>, <items> {$data} </items> } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:28:03.780

您的查询不会输出有效的 XML。根据您想要获得的内容，有两种可能性：

将元素包装在某个**容器元素**中以返回有效的 XML：

```
$doc := <container><description>Blablabla</description> <items> {$data} </items></container> 
```

哪个返回

```
<container>
  <description>Blablabla</description>
  <items>somedata</items>
</container> 
```

* * *

或者您可以返回**一系列 XML 节点**：

```
$doc := (<description>Blablabla</description>, <items> {$data} </items>) 
```

哪个返回

```
<description>Blablabla</description>
<items>1</items>
<description>Blablabla</description>
<items>2</items>
<description>Blablabla</description>
<items>3</items> 
```

# android - 为什么不能从其他类访问arraylist？

> ID：10396622
> 
> 赞同：1
> 
> 时间：2012-05-01T10:45:15.470
> 
> 标签：android, list, arraylist, nullpointerexception

在 webservice 类中，它将从在线检索数据库并放入列表中：

```
public List<List_NewsComment> allCommentList;
public void GetCommentNews( final int gCommentNewsID)
{
    Thread networkThread=new Thread(){
        @Override
        public void run(){

            try
            {
                SoapObject request= new SoapObject(NAMESPACE,get_Comment_METHOD_NAME);
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                HttpTransportSE androidHttpTransportSE= new HttpTransportSE(URL,60000);

                request.addProperty("itemid", gCommentNewsID);
                envelope.setOutputSoapObject(request);
                androidHttpTransportSE.call(get_Comment_SOAP_ACTION, envelope);

                SoapObject result=(SoapObject)envelope.bodyIn;
                RetrieveFromSoap( result);
            }
            catch(Exception ex)
            {
                ex.printStackTrace();
            }
        }

    };
    networkThread.start();

}

public List<List_NewsComment> RetrieveFromSoap(SoapObject soap)
{
    allCommentList= new ArrayList<List_NewsComment>();
    Vector<Object> property2 = extracted(soap);

    for (int i = 0; i< property2.size();i++){

        SoapObject getPropertyD=(SoapObject)property2.get(i);

        List_NewsComment addcomment= new List_NewsComment();
        addcomment.setcommentDate(getPropertyD.getProperty("date").toString());
        addcomment.setUserName( getPropertyD.getProperty("name").toString());
        addcomment.setCommentContent(getPropertyD.getProperty("comment").toString());

        allCommentList.add(addcomment);
    }
    webservice.allCommentList.size();        <-- can call here no problem
    return allCommentList;
}

private static Vector<Object> extracted(SoapObject soap) {
    return (Vector<Object>)soap.getProperty(0);
} 
```

在 Main Activity 类中，我想检查列表的大小：

```
Database_WebService webservice = new Database_WebService(this);
    webservice.GetCommentNews(newsid);
webservice.allCommentList.size();            <-- cannot call here, what is the problem 
```

它返回我`nullpointerexception`。

问题是什么？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T10:47:46.887

使`List static`您可以使用该类名在任何地方访问它。

## 喜欢

```
public static List<List_NewsComment> allCommentList;
Database_WebService.allCommentList.size(); 
```

## 或者

正如每个人都建议在您的类中创建一个函数并返回该函数中数组的大小。请看下面的代码。

```
public int getCommentListSize()
{
    return allCommentList.size(); 
}

then call this method as

Database_WebService databaseWebservice = new Database_WebService(this);   
int size =databaseWebservice.getCommentListSize.size(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:58:42.930

它没有被初始化的原因是因为它正在线程中被初始化，所以事件的顺序是这样的：

1.  `GetCommentNews`开始
2.  线程开始
3.  现在正在同时运行列表大小（已损坏）的线程和使用情况

在线程完成执行之前您不能使用`allCommentList`，因此您需要在分配方法后在方法`allCommentList`内发出信号或执行某些操作。`RetrieveFromSoap`

此外，您不应该将列表设为静态，这违反了面向对象编程的原则，并且您应该`allCommentList`通过 getter 而不是直接使用变量公开。

**编辑：**

实际上，您最好远离`Thread`并使用一个`AsyncTask`相反的类，该类旨在使 UI 工作`Thread`变得更容易。

```
private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
    protected Long doInBackground(URL... urls) {
        int count = urls.length;
        long totalSize = 0;
        for (int i = 0; i < count; i++) {
            totalSize += Downloader.downloadFile(urls[i]);
            publishProgress((int) ((i / (float) count) * 100));
        }
        return totalSize;
    }

    protected void onProgressUpdate(Integer... progress) {
        setProgressPercent(progress[0]);
    }

    protected void onPostExecute(Long result) {
        showDialog("Downloaded " + result + " bytes");
    }
} 
```

参考：[异步任务 | 安卓开发者](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T10:48:54.843

因为 List allCommentList 没有在那里初始化，所以它将在公共 List RetrieveFromSoap(SoapObject soap) 内初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T10:48:59.373

```
public static List<List_NewsComment> allCommentList;
int size =Database_WebService.allCommentList.size(); 
-------------------------------------------------- 
```

我仍然建议不要更好地使用静态来制作一种**方法**

```
public int getArrSize()
{
    return allCommentList.size(); 
} 
```

然后将此方法称为

```
Database_WebService dvws = new Database_WebService(this);   
int size =dvws allCommentList.size(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T10:56:22.450

**当您在不同的线程（networkThread）中创建**列表时，您必须小心，您从哪里调用它（从主线程）。在从外部访问它之前，您应该确保 networkThread 已经完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T10:54:01.377

这很丑，为什么不添加一个像'int webservice.getCommentsSize（）'这样的方法并返回大小，这样你就可以测试列表是否不为空并且你不需要直接访问。

喜欢：

```
class Webservice{
 private List allCommentList = null;
 public int getCommentListSize(){
  if(allCommentList==null) return 0;
  return allCommentList.size();
 }

} 
```

主要：

```
 Webservice webservice = new Webservice();
 int size = webservice.getCommentListSize(); 
```

另一个问题是，在您尝试获取其大小时，您的列表可能还没有准备好。你为什么要在一个线程中运行它？你见过 AsyncTask 吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-01T11:06:45.757

Make the `ArrayList` static. Then you can get access using classname.YourArrayList from the other class.

# sql-server-2008 - SQL Server 2008 R2：计算成员是 SSAS 未在 SSRS 中正确拉取

> ID：10396628
> 
> 赞同：2
> 
> 时间：2012-05-01T10:45:25.330
> 
> 标签：sql-server-2008, reporting-services, ssas

我在 SSAS 多维数据集中有一个计算成员，它给出了一个百分比。在多维数据集浏览器中，这会正确聚合，但在 BIDS SSRS 中，它将所有颗粒加在一起以给出毫无意义的结果。我知道我可以对结果进行平均，但这是不可接受的，因为我需要一个加权平均值，这就是我首先创建计算成员的原因。帮助！我怎样才能让它工作？

这是详细信息：

SSAS 中的计算成员如下所示：

```
ActiveTimeVsExpectedActiveTime = (AvailableTime + TimeOnPhone + TimeInAvailable)/ExpectedTimeOnPhone 
```

这在多维数据集浏览器中完美运行；它为所有单独的电话代理正确计算，并且正确地通过分层组提供加权结果，即不是将每个人的计算成员的结果加在一起并称为团队总数，而是将所有元素加在一起计算并将结果放入计算的成员方程中。

然而，在 SSRS 中，它只是将各个计算成员的结果相加并称为团队结果。帮助！我在网上搜索了解决方案，但找不到。这没有任何意义......如果 SSRS 没有，为什么立方体浏览器会自动正确计算它而没有任何问题 - 它使计算的成员变得毫无意义不是吗？！

好的，所以为了回答 Diego 的问题，我将包含一些数据以进一步澄清......这个问题在许多计算成员上重复；这是我目前正在制作的报告。吨

他计算的成员是坚持=坚持时间/排班时间

这是 SSRS 报告中的样子：

```
 Adhering Time   Rostered Time   Adherence                                               
    Team1       275736  366600  908.58%                                             
        Agent1  29355   30000   97.85%                                              
        Agent2  22041   33000   66.79%                                              
        Agent3  27493   30000   91.64%                                              
        Agent4  26689   30000   88.96%                                              
        Agent5  0   30000   0.00%                                               
        Agent6  27447   30000   91.49%                                              
        Agent7  30000   30000   100.00%                                             
        Agent8  28725   30000   95.75%                                              
        Agent9  0   32400   0.00%                                               
        Agent10 30142   31200   96.61%                                              
        Agent11 27201   30000   90.67%                                              
        Agent12 26643   30000   88.81% 
```

从数据顶部可以看到，它计算出的团队依从性为 908.58%，这是每个智能体的依从性结果之和。

SSAS 多维数据集浏览器为每个代理显示完全相同的结果，但团队总数为 75.21%，它计算为来自 275736 的坚持时间和 366600 的花名册时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:29:57.877

计算成员是在运行时计算的。数据在您比较多维数据集和 SSRS 的时间间隔之间发生变化的可能性。此外，您确定您用来比较的层次结构是相同的。例如，如果您正在浏览 DimProduct 维度的产品属性以及包含其他成员的层次结构中的产品，则 [Product].Name 可以不同

# c# - AutoIt-WinExists 在没有用户登录计算机时无法正常工作

> ID：10396629
> 
> 赞同：0
> 
> 时间：2012-05-01T10:45:27.887
> 
> 标签：c#, autoit-c#-wrapper

我正在使用 AutoIt，并且我将以下代码作为控制台应用程序运行。

```
public static class CustomerManager
{
    public static bool IsCustomerInSession()
    {
        AutoItX3 au3 = new AutoItX3();
        if (au3.WinExists("Request Desktop Control", "There are no customers in the session.  Please invite or wait for customer to join the session.") == 0)
            return true;
        else
            return false;
    }

} 
```

但我的问题是，如果没有用户登录到机器，则进程无法从 au3.WinExists() 获得正确答案，并且它总是说 Windows 不存在。

如果没有用户登录到机器，任何想法也将如何工作

这是 Vm 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T18:31:39.333

AutoIt 不能做很多事情，尤其是`Win*`方法，如果计算机没有登录或桌面被锁定。

# ruby-on-rails - User.find('123-foobar') 将返回 ID 为 123 的用户

> ID：10396630
> 
> 赞同：0
> 
> 时间：2012-05-01T10:45:34.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, friendly-id

我在[github](https://github.com/norman/friendly_id/issues/276)上问过，但也会尝试在这里问。“足智多谋”没有错;-)。使用friendly_id 4。

我用 slug => "123 foobar" 创建了一个用户。此用户的 id 为 200。

执行时`User.find('123-foobar')`，它返回 id 为 123 的用户，而不是用户 200。

这是一个错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T11:05:56.380

The find method, (when the first argument is not a symbol) finds by primary key. If you want the slug to be the primary key then do the following:

```
class User < ActiveRecord::Base
  set_primary_key :slug
end 
```

Doing so, find will find by the slug string, and to_param will return the string from the slug. Your path and url helpers should use the slug too. Your foreign keys will also have to use slug. However, now, find will *not* find by id.

If you want the id to work as always and/or you don't want all that change in behavior, but the slug is an alternate search method for the user, then search by the following:

```
User.find_by_slug('123-foobar') 
```

Your routes will be OK, but if the slug is in the URL where the :id goes, it will be passed to the controller in params[:id]. So you can use the same URLs, controllers, and actions with the slug and the id, but your controller will have to figure out which to search by.

```
class User < ActiveRecord::Base
  def self.slug?(key)
    /^\d*-./ =~ key
  end

  def self.find_from_key(key)
    slug?(key) ? find_by_slug(key) : find(key)
  end
end

class UsersController < ApplicationController
  def edit
    @user = find_from_key(params["id"])
    ... 
```

# python - 使用python解析url时出错

> ID：10396632
> 
> 赞同：1
> 
> 时间：2012-05-01T10:46:09.563
> 
> 标签：python, urllib2, urllib

我正在使用 python 处理一个 url。
如果我单击 url，我可以获得 excel 文件。
但是如果我运行以下代码，它会给我奇怪的输出。

```
>>> import urllib2
>>> urllib2.urlopen('http://intranet.stats.gov.my/trade/download.php?id=4&var=2012/2012%20MALAYSIA%27S%20EXPORTS%20BY%20ECONOMIC%20GROUPING.xls').read() 
```

输出 ：

```
"<script language=javascript>window.location='2012/2012 MALAYSIA\\'S EXPORTS BY ECONOMIC GROUPING.xls'</script>" 
```

为什么它不能用 urllib2 读取内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:01:24.320

@Kai in [this question](https://stackoverflow.com/a/8066106/1179026)似乎找到了使用模块的javascript重定向的答案`Selenium`

```
from selenium import webdriver

driver = webdriver.Firefox()
link = "http://yourlink.com"
driver.get(link)

#this waits for the new page to load
while(link == driver.current_url):
  time.sleep(1)

redirected_url = driver.current_url 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:53:07.353

使用 http 侦听器（甚至 Google Chrome 开发人员工具）查看一下，当您到达页面时，会使用 javascript 进行重定向。

您将需要访问初始 url，解析结果并再次获取实际 url。

# google-chrome-extension - 为特定页面启动 Chrome 扩展程序时出错

> ID：10396634
> 
> 赞同：50
> 
> 时间：2012-05-01T10:46:34.763
> 
> 标签：google-chrome-extension

我正在编写一个简单的 Chrome 扩展程序，它显示一个 JavaScript 警报，上面写着“Hello World”。在此示例中，我已指定扩展仅针对 google.com 运行（通过将其放在 manifest.json 中的权限属性中）。

即使目标页面中的所有内容都已加载，警报也不会出现。到目前为止，这是我的脚本：

**文件：清单.json**

```
{
  "name": "Hello",
  "version": "1.0",
  "description": "Says hello to Google",
  "permissions": ["http://*.google.com/"]
  "browser_action": {
    "popup": "Hello.html"
  }
} 
```

**文件：Hello.html**

```
<script language="Javascript">
   alert("Hello World");
</script> 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-03T06:25:51.423

您正在添加一个浏览器操作弹出窗口，它会在浏览器的右上角添加一个按钮。（它可能是不可见的，因为您尚未为其指定图像。地址栏右侧应该有一些空白区域；尝试单击它以`Hello.html`在弹出窗口中查看您的。）

你想要的是一个[内容脚本](https://developer.chrome.com/extensions/content_scripts)。内容脚本可以注入到 Chrome 加载的每个页面中。您可以使用清单文件中的`matches`和`exclude_matches`子项来指定哪些页面获取您的注入脚本。

```
{
  "name": "Hello",
  "version": "1.0",
  "description": "Says hello to Google",
  "permissions": ["tabs", "*://*.google.com/*"],
  "content_scripts": [
    {
      "matches": ["*://*.google.com/*"],
      "js": ["hello.js"]
    }
  ]
} 
```

确保您重命名`Hello.html`为`hello.js`（并删除`<script>`标签）。

另请注意，我将您的更改`http://*.google.com/`为，`*://*.google.com/*`以便它将通过 HTTP 和 HTTPS 应用于 Google（并且尾随`*`确保它将应用于 上的所有页面`google.com`，而不仅仅是主页）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2021-03-08T04:26:03.240

我遇到了这个答案，试图找到一种仅在某些页面上启用图标的方法，这就是我的做法。[文档](https://developer.chrome.com/docs/extensions/reference/action/#enabled-state)

背景.js

```
chrome.runtime.onInstalled.addListener(function() {
  chrome.tabs.onActivated.addListener(async info => {
    const tab = await chrome.tabs.get(info.tabId);

    const isGithub = tab.url.startsWith('https://github.com/');
    isGithub 
      ? chrome.action.enable(tab.tabId) 
      : chrome.action.disable(tab.tabId);
  });
}); 
```

确保在清单中添加*选项卡权限*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-21T11:32:11.997

```
First of all there are 2 types of extensions:

1\. Browser Action - which work for multiple websites or almost all websites
2\. Page Action - which work for specific websites or webpages [which is needed 
   in our case]

Follow these steps to show your extension only on google:

Step 1: Go to manifest.json file and add the below code snippet

        "background":{
           "scripts":["background.js"],
           "persistent":false
         }

         ***also make sure you have page action not browser action** 

         "page_action" : { "default_popup":"your_popup.html" }

Step 2: Now add permissions in manifest:

        "permissions":["declarativeContent"]

Step 3: Now create background.js in root folder of extension and add the 
        below code in it, this will let the extension to work only on 
        urls that contain google.com

        // When the extension is installed or upgraded ...
        chrome.runtime.onInstalled.addListener(function() {
         // Replace all rules ...
         chrome.declarativeContent.onPageChanged.removeRules(undefined, 
      function() {
         // With a new rule ...
         chrome.declarativeContent.onPageChanged.addRules([
         {
          // That fires when a page's URL contains a 'g' ...
          conditions: [
          new chrome.declarativeContent.PageStateMatcher({
            pageUrl: { urlContains: 'google.com' },
          })
         ],
          // And shows the extension's page action.
          actions: [ new chrome.declarativeContent.ShowPageAction() ]
        }
      ]);
    });
  });

Step 4: Now reload your extension, you'll find that your extension will work 
        only for google.com

Hope this solved your query, If Yes, then Upvote the answer Thanks! 
```

# python - Python：获取元组列表中的最小整数

> ID：10396640
> 
> 赞同：3
> 
> 时间：2012-05-01T10:47:03.510
> 
> 标签：python, list, integer, tuples, min

我目前的计划是确定哪个是[Tkinter](http://wiki.python.org/moin/TkInter)列表框中的第一个条目，使用`.curselection()`并将所有结果元组组合到一个列表中，从而产生以下结果：

```
tupleList = [(), (), ('24', '25', '26', '27'), (), (), (), ()] 
```

我想知道如何确定最小整数。`.min(tupleList)`仅使用`()`return ，是列表中的最低条目，但我正在寻找一种返回 24 的方法。

在列表中的任何元组中获取最小整数的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T10:48:41.803

```
>>> from itertools import chain
>>> nums = [(), (), ('24', '25', '26', '27'), (), (), (), ()]
>>> min(map(int,chain.from_iterable(nums)))
24 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T10:53:27.197

```
>>> nums = [(), (), ('24', '25', '26', '27'), (), (), (), ()]
>>> min(int(j) for i in nums for j in i)
24 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:44:08.343

```
>>> min(reduce(lambda x, y: x + y, nums)) 
```

# templates - Joomla 菜单项模板不会从默认更改

> ID：10396641
> 
> 赞同：-1
> 
> 时间：2012-05-01T10:47:08.353
> 
> 标签：templates, joomla, joomla-template

我有一个问题，我确信有一个简单的解决方法。我在 joomla 中设置了我的默认模板，但是当我将其他菜单项设置为使用不同的模板时，它仍然使用默认值。

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T23:42:07.800

要开始回答您的问题，了解您使用的 Joomla 版本很重要。而且，你是如何改变这些价值观的。无论如何，如果您转到扩展下的模板配置，并输入特定模板，您可以更改模板并将其分配给特定菜单项，就像您仅在某些页面上显示模块一样。问候

# java - Files.walkFileTree 中的遍历顺序

> ID：10396649
> 
> 赞同：15
> 
> 时间：2012-05-01T10:47:54.687
> 
> 标签：java, filesystems, java-7, java.nio.file

`Files.walkFileTree`访问同一级别的文件/目录的顺序是什么？

它似乎没有按大小、上次修改时间或名称的顺序访问它们。[我在API 文档](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,java.nio.file.FileVisitor%29)中也找不到任何东西。

也许该`preVisitDirectory`方法可用于指定访问顺序，但默认行为是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-01T10:54:33.890

读取子目录的顺序未根据[Java 教程中的](http://docs.oracle.com/javase/tutorial/essential/io/walk.html#order)此注释定义：

> 文件树首先遍历深度，但您不能对访问子目录的迭代顺序做出任何假设。

至于读取文件的顺序，它取决于（在当前实现中）在我的计算机上提供`DirectoryStream`的. `sun.nio.fs.WindowsDirectoryStream`阅读[javadoc 的`DirectoryStream`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/DirectoryStream.html)，你会看到：

> 迭代器返回的元素没有特定的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-23T06:14:50.527

java可以稍后为您排序，这就是我所做的。

```
public static void printy(Path rootDirPath) {
        //treesets to hold paths alphabetically
        TreeSet<Path> paths = new TreeSet<>();
        try {
            Files.walkFileTree(rootDirPath, new SimpleFileVisitor<Path>() {
                @Override
                public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) throws IOException {
                    paths.add(dir);
                    return super.preVisitDirectory(rootDirPath, attrs);
                }
                @Override
                public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
                    paths.add(file);
                    return super.visitFile(rootDirPath, attrs);
                }
                @Override
                public FileVisitResult visitFileFailed(Path file, IOException exc) throws IOException {
                    return super.visitFileFailed(file, exc);
                }
                @Override
                public FileVisitResult postVisitDirectory(Path dir, IOException exc) throws IOException {
                    return super.postVisitDirectory(rootDirPath, exc);
                }
            });
        //I'm printing the contents alphabetically,.. your impl might vary
        paths.forEach(System.out::println);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

希望这可以帮助

# android - 禁用启动器活动后，android重新安装失败

> ID：10396651
> 
> 赞同：5
> 
> 时间：2012-05-01T10:48:19.617
> 
> 标签：android, components, failed-installation

我想从应用列表和最近的应用列表中删除我的应用。所以我尝试使用以下代码禁用我的主/启动器活动：

```
ComponentName componentToDisable = new ComponentName(context, MainActivity.class);
context.getPackageManager().setComponentEnabledSetting(componentToDisable,
           PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP); 
```

这可以完成工作。但是现在我尝试重新安装该应用程序，但它无法显示“活动 MainActivity 类不存在”。如果我卸载该应用程序，安装将再次运行。我该如何处理这个问题？非常感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T12:54:21.920

我发现我必须在重新安装之前启用该活动。这可以通过让广播接收器监听 package_add / remove 事件并在 onReceive 中再次启用活动来完成。

```
public void onReceive(Context context, Intent intent) {
    Log.i("Receiver","got event");
    ComponentName componentToDisable = new ComponentName(context,BlockableComponentActivity.class);
    context.getPackageManager().setComponentEnabledSetting(componentToDisable,
            PackageManager.COMPONENT_ENABLED_STATE_ENABLED, PackageManager.DONT_KILL_APP);
} 
```

接收方的清单摘录：

```
<receiver android:name="PackageChangeReceiver">
<intent-filter>
    <action android:name="android.intent.action.PACKAGE_ADDED"/>
    <action android:name="android.intent.action.PACKAGE_REPLACED"/>
    <action android:name="android.intent.action.PACKAGE_REMOVED"/>
    <data android:scheme="package"/>
</intent-filter> 
```

# php - mysql php：如何有效地获取包含条目的先前 X 日期

> ID：10396655
> 
> 赞同：1
> 
> 时间：2012-05-01T10:48:38.687
> 
> 标签：php, mysql, date

想象一个用户在随机日期发布内容的基本网站。系统使用 mysql-php 并将每个帖子存储在一个名为 tablePost 的表中，其中有一列存储日期（或时间）。请注意，用户可以在一天内发布多个帖子。我想要实现的是能够获取用户发布的最后 4 天（甚至更多天）的日期。还要获取发布信息（postid、posttext 等）。示例输出为：
- 2012-04-25（3 个帖子，postinfo...）
- 2012-04-12（2 个帖子，postinfo...）
- 2011-09-12（33 个帖子，postinfo...）
- 2011-03-04（10 个帖子，发布信息...）

我可以想象两种解决方案：

1) 仅使用 tablePost 表，通过 php 遍历条目并获取所需数据

2）创建另一个表，调用tableActiveDays。当用户发布时，可能使用 INSERT IGNORE 插入条目（userId，dateDay）或检查之前是否未插入。因此，每个 (userId, dateDay) 都是唯一的。这样，如果我想获取最后 4 个活动天数，我可以使用简单的 select ... order by ... limit by 4 查询。

我的问题是：
- 任何其他方式来完成这项任务？
- 实现这一目标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:07:55.647

Create `INTEGER` field and call it "dt_timestamp". When user post message save in "dt_timestamp" result of `time()` function.

UPDATE:
If you have registered users then add field with `INTEGER`type, call it `last_activity`. When user post something update this field with `time()`. Then use this query:

`SELECT pt.* FROM post_table pt JOIN users_table ut ON ut.id = pt.user_id WHERE` `pt.dt_timestamp >= ut.last_activity - 86400 * 4 AND ut.id = %needed_user_id%;`

`users_table` has field `id` - user's id. `post_table` has field `user_id` - field value from users_table.

Using `DATETIME` is much slower then just integer timestamp.

# c++ - 开始使用 openNi 的问题

> ID：10396659
> 
> 赞同：0
> 
> 时间：2012-05-01T10:48:42.730
> 
> 标签：c++, kinect, openni

我刚刚安装了 openNi 库并让我的 kinect 在我的计算机上工作。我的问题是我只是 C++ 的新手编程。

我从这个页面复制了手部追踪的代码：

[http://openni.org/Documentation/ProgrammerGuide.html](http://openni.org/Documentation/ProgrammerGuide.html)

并将其粘贴到我的 VisualStudio11 beta 项目中。

它一直在说我没有定义变量 xn ......但我不知道 xn 是什么。

如果可以请告诉我如何在代码中定义 de 变量 xn，或者我必须做什么才能使代码正常工作。

实现：这是代码，在我上面提到的页面中

```
#define GESTURE_TO_USE "Click"

xn::GestureGenerator g_GestureGenerator;
xn::HandsGenerator g_HandsGenerator;

void XN_CALLBACK_TYPE 
Gesture_Recognized(xn::GestureGenerator& generator,
                   const XnChar* strGesture,
                   const XnPoint3D* pIDPosition,
                   const XnPoint3D* pEndPosition, void* pCookie)
{
    printf("Gesture recognized: %s\n", strGesture);
    g_GestureGenerator.RemoveGesture(strGesture);
    g_HandsGenerator.StartTracking(*pEndPosition);
}
void XN_CALLBACK_TYPE
Gesture_Process(xn::GestureGenerator& generator,
                const XnChar* strGesture,
                const XnPoint3D* pPosition,
                XnFloat fProgress,
                void* pCookie)
{}

void XN_CALLBACK_TYPE
Hand_Create(xn::HandsGenerator& generator,
            XnUserID nId, const XnPoint3D* pPosition,
            XnFloat fTime, void* pCookie)
{
  printf("New Hand: %d @ (%f,%f,%f)\n", nId,
         pPosition->X, pPosition->Y, pPosition->Z);
}
void XN_CALLBACK_TYPE
Hand_Update(xn::HandsGenerator& generator,
            XnUserID nId, const XnPoint3D* pPosition,
            XnFloat fTime, void* pCookie)
{
}
void XN_CALLBACK_TYPE
Hand_Destroy(xn::HandsGenerator& generator,
             XnUserID nId, XnFloat fTime,
             void* pCookie)
{
  printf("Lost Hand: %d\n", nId);
  g_GestureGenerator.AddGesture(GESTURE_TO_USE, NULL);
}

void main()
{

  XnStatus nRetVal = XN_STATUS_OK;

  Context context;
  nRetVal = context.Init();
  // TODO: check error code

  // Create the gesture and hands generators
  nRetVal = g_GestureGenerator.Create(context);
  nRetVal = g_HandsGenerator.Create(context);
  // TODO: check error code

  // Register to callbacks
  XnCallbackHandle h1, h2;
  g_GestureGenerator.RegisterGestureCallbacks(Gesture_Recognized,
                                              Gesture_Process,
                                              NULL, h1);
  g_HandsGenerator.RegisterHandCallbacks(Hand_Create, Hand_Update,
                                         Hand_Destroy, NULL, h2);

  // Start generating
  nRetVal = context.StartGeneratingAll();
  // TODO: check error code

  nRetVal = g_GestureGenerator.AddGesture(GESTURE_TO_USE);

  while (TRUE)
  {
    // Update to next frame
    nRetVal = context.WaitAndUpdateAll();
    // TODO: check error code
  }

  // Clean up
  context.Shutdown();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:26:22.573

`xn`是一个命名空间。

看起来您至少需要包含一个头文件。

尝试将以下内容添加到文件顶部：

```
#include <XnCppWrapper.h> 
```

可能还有其他未定义`xn::`的类。如果是这样，请使用[文档](http://openni.org/Documentation/Reference/annotated.html)来识别类，并检查需要哪个头文件`#include`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:14:48.583

我看到您没有包含任何头文件，因此要解决此问题，您只需要包含以下两个头文件，它们也将包含所有必需的头文件。

```
#include <XnOpenNI.h>
#include <XnVNite.h> 
```

单独使用这些标头不会解决问题，因为您需要 xn:: 命名空间。

这个问题可以通过`xn::`在每个声明之前使用标记来解决

或者

解决此问题的最简单方法是在代码中包含以下行，位于标头声明之后。

```
using namespace xn; 
```

# sql-server - ASP.NET MVC Code-First EF - 可以在没有数据库创建权限的情况下使用 EF？

> ID：10396661
> 
> 赞同：0
> 
> 时间：2012-05-01T10:48:48.163
> 
> 标签：sql-server, asp.net-mvc, entity-framework, code-first

所以我正在为大学做一个 ASP.NET 项目。我们必须将代码上传到运行 IIS 和 SQL Server 2008 的服务器。我使用 MVC Code-First EF 编写了我的项目。我了解实体框架系统需要创建数据库才能正常工作的权限（您不能只给它一个空数据库并让它用数据填充它）。这给我带来了一个问题，因为我在共享 SQL Server 上没有数据库创建权限。有没有办法解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:04:26.573

由于您没有权限，听起来您需要让 DBA 在您尝试部署到的服务器上创建数据库 - 这可以通过数据库创建脚本或数据库备份来完成db 在你的开发机器上。然后，您可以先指示 EF 代码不要尝试通过将此行添加到 global.asax 来自动创建/更新数据库（或者实际上是在您首次访问数据库之前的任何位置）

```
Database.SetInitializer<YourContextType>(null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:58:26.553

您可以使用现有数据库，而不是让 EF 为您创建一个。我自己已经这样做了，但不可否认的是，只有在使用 EF Migrations 时。否则，您会遇到缺少表异常等问题。

使用迁移时，只需将连接字符串指向空数据库，创建初始迁移以使用架构填充数据库，然后更新数据库本身。

请参阅此答案：[如何在 EntityFramework 4.3 中为现有数据库创建迁移？](https://stackoverflow.com/questions/9270887/how-do-i-create-a-migration-for-an-existing-database-in-entityframework-4-3)

.. 其中包括这个不错的 EF 迁移入门链接：http: [//thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/](http://thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/)

所有这些都可以通过 Nuget 获得，如果您可以访问 Pluralsight 内容，我强烈推荐 Julie Lerman 关于该主题的视频。

如果您不想使用迁移，如果您只是使用 SMMS 手动创建数据库对象，您仍然可以使用 Code First，但显然您需要手动工作来保持模型和数据库同步。

# ruby-on-rails-3 - 在 Rails 中转发

> ID：10396662
> 
> 赞同：1
> 
> 时间：2012-05-01T10:48:54.453
> 
> 标签：ruby-on-rails-3, redirect, controller, forwarding

在 Java Servlets/JSP 中，您可以重定向（往返服务器）请求或转发请求（在同一请求的范围内）。Rails 文档似乎只有重定向的示例。如何在 Rails 3 中实现转发？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:00:14.737

见[http://www.ruby-forum.com/topic/3810690](http://www.ruby-forum.com/topic/3810690)

解决方法似乎是为控制器逻辑创建一个包装器并从两个操作中调用它，同时呈现一个共享模板。不完全理想，但至少会让你有点干燥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T17:03:29.973

如果您尝试转发的操作在同一个控制器中并且需要相同的参数，您可以直接调用实例方法。

# android - 如何从android中静态传递的arraylist中检索数据？

> ID：10396673
> 
> 赞同：-1
> 
> 时间：2012-05-01T10:49:48.477
> 
> 标签：android

我正在将我的**数组列表数据从一页静态传递到 android 中的另一页**。当我第一次执行应用程序时，我将数组列表数据静态地放到第二页。我在第二页的顶部保留了一个主页按钮。我单击主页按钮并再次从第一页开始。这次我没有将数组列表数据放到第二页。我正在清除主页按钮单击操作中的数组列表。**但是为什么第二次没有数据呢**。请帮我解决这个问题....我为此苦苦挣扎....

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T10:55:12.157

当你清除 ArrayList 时，你将如何获取数据？要么不清除它，要么在 Intent 中传递一个 Bundle 来传输列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:59:58.177

使用 Iterator... 不使用 iterator ，你无法实现多次检索...。

# ember.js - 有没有办法将 Ember.js 应用程序拆分为几个文件？

> ID：10396677
> 
> 赞同：14
> 
> 时间：2012-05-01T10:49:59.413
> 
> 标签：ember.js

我刚刚编写了我的 app.js 文件，一切正常，但整个文件目前有 450 行长，并且**会**变得更大。

是否有将状态管理器代码或视图代码拆分为不同文件（如 states.js 或 views.js）的最佳实践，以便一切都更清晰？

同样在该说明中...是否有将车把模板拆分为不同文件的首选方法？我目前刚刚将它们全部定义在一个 html 文件中，该文件也开始变得有点笨拙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T09:19:58.923

两周前我遇到了完全相同的问题，我不想用 requireJS 尝试 AMD，这对于我想做的事情来说似乎有点复杂（而且似乎有优点但也有缺点..）

说服我的简单解决方案如下：

我的 js 文件夹中有 3 个文件夹：“models”、“controllers”和“views”，其中包含我的 js“类”，​​并且我有一个“index.html”可以导入所有 js 文件（我使用 HTML5 样板来得到一个方便的 index.html)。

需要明确的是，在我的 index.html 中，我在文件末尾有如下内容：

```
 <script src="js/app.js"></script>
 <script src="js/models/note.js"></script>
 <script src="js/controllers/notesController.js"></script>
 <script src="js/controllers/selectedNoteController.js"></script>
 <script src="js/views/menuView.js"></script>
 <script src="js/views/noteResumeView.js"></script>
 <script src="js/views/noteView.js"></script>
 <script src="js/views/createNoteView.js"></script>
 <script src="js/views/listeNotesView.js"></script> 
```

希望这有帮助，（而且我没有误解你的问题）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T12:31:07.587

您可以使用[RequireJS](http://requirejs.org/)从不同的文件加载您的 ember 应用程序（包括车把模板）。

[此答案](https://stackoverflow.com/a/8806078/170658)描述了如何设置以及指向示例应用程序的链接，该示例应用程序显示了如何进行设置。我刚刚在我们的一个网站上尝试过这种方法，效果很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T10:53:12.500

我在我的项目中使用[ember-skeleton](https://github.com/interline/ember-skeleton)。

要开始，只需执行以下操作：

```
git clone https://github.com/interline/ember-skeleton.git my-app
cd my-app

bundle install
bundle exec rackup 
```

然后去`http://localhost:9292`

还可以查看[wiki](https://github.com/emberjs/ember.js/wiki/Buildtools)以获取更多构建工具和模板。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-07T14:12:44.237

现在执行此操作的标准方法是使用 ember-cli。[在http://www.ember-cli.com/](http://www.ember-cli.com/)上查找更多信息

# objective-c - 如何在应用程序级别更改 iPhone 设置中的 UI

> ID：10396679
> 
> 赞同：1
> 
> 时间：2012-05-01T10:50:10.710
> 
> 标签：objective-c, ios, xcode, cocoa-touch

基本上我想更改当前看起来像这样的 UI 的显示。 ![在此处输入图像描述](../Images/29c677cd3e41a073af3257ced26f420d.png)

现在，1> 在我的应用程序中，我只显示两个字段**用户**名和**密码**，**我想从 iphone 设置中删除角色**和角色**名称**字段，因为这些值是根据用户的电子邮件地址通过网络服务为用户自动插入的。2> 如何在设置中添加**版本**和**推送通知**选项？请帮我解决这个非常需要的信息。我正在使用 xcode **4.2 版**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:10:45.730

如果我理解得很好，您使用的是设置包，不是吗？
我以前从未使用过设置包，但如果是这样，您可以通过删除设置包的 plist 文件中的条目来删除 Role 和 Role_name 字段。
然后您可以为版本添加一个新条目。为了得到它，我总是使用

```
[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"] 
```

但我不确定这是否可以与设置包一起使用。最后，对于推送通知，它们的设置由 Settings -> Notifications 自动管理，因此您不必在设置包中担心它们。
我希望这可以帮助你，但我相信还有其他人比我更了解这些主题；）

# java - 尝试从资源中获取文件时出现 FileNotFound 异常

> ID：10396682
> 
> 赞同：0
> 
> 时间：2012-05-01T10:50:18.070
> 
> 标签：java, spring, jasper-reports

我无法生成 myJasperReports.jasper 文件，因为它`FileNotFoundException`试图读取文件并创建报告会花费一段时间。我正在使用 jasper-reports 3.7.5 和基于注释的 Spring。有人可以告诉问题可能是什么吗？

在 web.xml 文件中：

```
<bean id="myReportTemplate" class="org.springframework.core.io.ClassPathResource">
    <constructor-arg value="mypackage/reports/jasper/template/SampleJasper.jasper"/>
</bean> 
```

谢谢。

这是堆栈跟踪：

```
[ERROR] java.io.FileNotFoundException: class path resource [mypackage/reports/jasper/template/SampleJasper.jasper] cannot be resolved to URL because it does not exist
[ERROR] at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:179)
[ERROR] at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:48)
[ERROR] at mypackage/reports.ReportsServiceImpl.prepareChart(ReportsServiceImpl.java:93)
[ERROR] 
```

我在 pom.xml 文件中使用的插件

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.1.1</version>
    <executions>
      <execution>
        <phase>compile</phase>
          <goals>
            <goal>exploded</goal>
          </goals>
     </execution>
   </executions>
   <configuration>
     <webappDirectory>${webappDirectory}</webappDirectory>
   </configuration>
 </plugin>

 <plugin>
   <groupId>org.codehaus.mojo</groupId>
   <artifactId>jasperreports-maven-plugin</artifactId>
   <configuration>
     <outputDirectory>${project.build.directory}/jasper</outputDirectory>
   </configuration>
   <executions>
     <execution>
       <goals>
         <goal>compile-reports</goal>
       </goals>
     </execution>
   </executions>
   <dependencies>
     <dependency>
       <groupId>jasperreports</groupId>
       <artifactId>jasperreports</artifactId>
       <version>2.0.5</version>
     </dependency>
   </dependencies> 
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:07:55.890

> 问题是 SampleJasper.jasper 文件没有在指​​定文件夹中生成，文件夹本身没有创建。

要生成 Jasper 报告，您应该调用`JasperCompileManager.compileReport()`并传递`.jrxml`文件。

但是在您的情况下，您正在指定`.jasper`文件，这意味着您应该已经编译并将编译文件放置在您在`application-context.xml`.

如果您没有预编译它，那么您应该指定要编译的 jrxml 文件，然后您将定位的编译文件将传递给 Jasper 查看器。

Spring 有关于[jasper 集成的文档](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch17s07.html)

# android - 如何在 android 中流式传输 Facebook 视频？

> ID：10396684
> 
> 赞同：-1
> 
> 时间：2012-05-01T10:50:26.637
> 
> 标签：android, facebook, video, video-streaming

我正在以这种格式获取 facebook 视频网址：

```
http://video.ak.fbcdn.net//cfs-ak-ash4//v//439792//191//302138979861285_50471.mp4?oh=1f60e18870bfa40e844c385b5173126e&oe=4FA25B00&__gda__=1336040192_c327f9df6c01001a10b3842c7c72eca0 
```

从参考[here](http://www.hrupin.com/2011/09/sample-streaming-video-mediaplayer-or-how-to-stream-video-from-url-in-android)，使用的视频网址是`http://www.pocketjourney.com/downloads/pj/video/famous.3gp` 当我用上面的facebook视频网址替换这个网址时，它不起作用。
有什么方法可以在 android 中流式传输 facebook 视频？
期待最佳答案！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T12:55:08.870

试试这种方式，它对我有用，用于播放网站上的视频，但在这里我没有播放来自 FB 的视频

```
 Intent browserIntent = new Intent(Intent.ACTION_VIEW,
                        Uri.parse("http://www.youtube.com/
                           watchv=JxYSlkh1Src&feature=player_embedded"));
                 startActivity(browserIntent); 
```

# opencv - 网络摄像头图像捕获问题

> ID：10396693
> 
> 赞同：0
> 
> 时间：2012-05-01T10:51:13.033
> 
> 标签：opencv, camera, image-capture

我正在尝试通过从网络摄像头捕获图像并将其与参考图像进行比较来进行一些图像跟踪。我面临的问题是完全相同位置的两个图像的位图不同。我正在使用 OpenCV。我需要知道一种捕捉图像的方法，以避免这种抖动。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:32:05.167

好吧，我会说你不能。由于光照变化和数以千计的其他影响（包括电子噪声），两张图像永远不会相同。

你想要做的是找到一种方法来统一它，比如应用某种高斯滤波器。 [http://mmlab.disi.unitn.it/wiki/index.php/Mixture_of_Gaussians_using_OpenCV](http://mmlab.disi.unitn.it/wiki/index.php/Mixture_of_Gaussians_using_OpenCV)

这篇文章中还有一些很好的链接： [Natural feature tracking with openCV-评估选项](https://stackoverflow.com/questions/5948500/natural-feature-tracking-with-opencv-evaluating-the-options)

# xslt - 如何对子文档属性求和

> ID：10396697
> 
> 赞同：1
> 
> 时间：2012-05-01T10:51:29.257
> 
> 标签：xslt, sum

有清单

```
<items>
<item parentid='1'>
<amount>3</amount>
</item>
<item parentid='2'>
<amount>1</amount>
</item>
</items> 
```

和文件：

```
<udata id='1'>
<price>10</price>
</udata>
<udata id='1'>
<price>20</price>
</udata> 
```

如何总结价格的所有文件？总而言之，我使用了：

```
<xsl:value-of select="sum(items/item/amount)"/> 
```

我会使用：

```
<xsl:apply-templates select="udata/items/item" mode='price2' />

    <xsl:template mode='price2' match='item'>
        <xsl:apply-templates select="document(concat('upage://', page/@parentId))" mode='price'>
            <xsl:with-param select='amount' name='count'/>
        </xsl:apply-templates>
    </xsl:template>
    <xsl:template mode='price' match='/'>
        <xsl:param name='count'/>
        <xsl:value-of select="$count * /udata/page/properties/group[@name='price_prop']/property[@name='price']/value"/>
    </xsl:template> 
```

结果我有：

3020

我需要 50。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:19:09.447

这是一个假设 XSLT 2.0 的示例（例如，尽可能使用 Saxon 9 或 AltovaXML）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

  <xsl:param name="data-url" select="'test2012050103.xml'"/>
  <xsl:variable name="data-doc" select="document($data-url)"/>

  <xsl:key name="k1" match="udata" use="@id"/>

  <xsl:template match="items">
    <xsl:value-of select="sum(for $item in item return $item/amount * key('k1', $item/@parentid, $data-doc)/price)"/>
  </xsl:template>

</xsl:stylesheet> 
```

示例文档是

```
<items>
<item parentid='1'>
<amount>3</amount>
</item>
<item parentid='2'>
<amount>1</amount>
</item>
</items> 
```

和

```
<root>
<udata id='1'>
<price>10</price>
</udata>
<udata id='2'>
<price>20</price>
</udata>
</root> 
```

输出是`50`。

[编辑]这是一个 XSLT 1.0 样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:param name="data-url" select="'test2012050103.xml'"/>
  <xsl:variable name="data-doc" select="document($data-url)"/>

  <xsl:key name="k1" match="udata" use="@id"/>

  <xsl:template match="items">
    <xsl:call-template name="sum">
      <xsl:with-param name="items" select="item"/>
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="sum">
    <xsl:param name="items" select="/.."/>
    <xsl:param name="total" select="0"/>
    <xsl:choose>
      <xsl:when test="not($items)">
        <xsl:value-of select="$total"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:variable name="price">
          <xsl:for-each select="$data-doc">
            <xsl:value-of select="$items[1]/amount * key('k1', $items[1]/@parentid)/price"/>
          </xsl:for-each>
        </xsl:variable>
        <xsl:call-template name="sum">
          <xsl:with-param name="items" select="$items[position() > 1]"/>
          <xsl:with-param name="total" select="$total + $price"/>
        </xsl:call-template>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:24:06.140

**这是一个较短的解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="vPrices" select=
   "document('file:///c:/temp/delete/priceData.xml')/*/*"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="item[1]"/>
 </xsl:template>

 <xsl:template match="item" name="sumProducts">
  <xsl:param name="pAccum" select="0"/>

     <xsl:variable name="vNewAccum" select=
      "$pAccum +amount * $vPrices[@id = current()/@parentid]/price"/>

      <xsl:if test="not(following-sibling::*)">
       <xsl:value-of select="$vNewAccum"/>
      </xsl:if>
      <xsl:apply-templates select="following-sibling::*">
        <xsl:with-param name="pAccum" select="$vNewAccum"/>
      </xsl:apply-templates>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时：**

```
<items>
    <item parentid='1'>
        <amount>3</amount>
    </item>
    <item parentid='2'>
        <amount>1</amount>
    </item>
</items> 
```

**并让文件`c:\temp\delete\priceData.xml`包含：**

```
<root>
    <udata id='1'>
        <price>10</price>
    </udata>
    <udata id='2'>
        <price>20</price>
    </udata>
</root> 
```

**然后产生想要的正确结果：**

```
50 
```

# hyperlink - 在 IE9 中使用 \\servername\sharename 未被选为 Intranet 站点

> ID：10396699
> 
> 赞同：1
> 
> 时间：2012-05-01T10:51:56.230
> 
> 标签：hyperlink, internet-explorer-9, intranet, smb

我公司有一个非常基本的 Intranet 站点，它的主要目的是链接到我们网络上的 SMB 共享，这样人们就可以打开文件并对其进行编辑，而无需重新上传到该站点。

我所拥有的是一个基本的<a href="\IP ADDRESS\SHARENAME\"></a>

问题似乎是，无论我使用 IP 地址还是机器的实际 DNS 名称，IE9 似乎总是认为 Intranet 是一个 Internet 站点，并阻止这些链接工作。

例如，Web 服务器地址是 10.1.3.81，我在同一台服务器上共享一个全球电话目录电子表格。我希望有人能够单击页面上的链接，并直接打开该文件。

所以对于href，我输入了\\10.1.3.81\intranet\phone directory\list.xls

或类似的东西。IE9（这是我们所有用户都在使用的），认为此链接指向 file://10.1.3.81/intranet/phone directory/list.xls

这很好，但由于它不认为这是在 Intranet 上，它会阻止 file:// 协议，并且链接什么也不做。

如果我将该站点添加到我的受信任站点列表中，它就会正常工作。所以我想知道在编程方面是否有一种方法，可以让我创建这些链接并让它们自动作为 Intranet 链接获取？

如果做不到这一点，我将在 serverfault 上发帖，看看是否有人可以指导我应用策略将此站点添加到所有用户和计算机的受信任站点。

非常感谢

编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:43:16.493

事实证明，我使用 FQDN 或服务器的 IP 地址访问 Intranet。

如本文所示，[http://support.microsoft.com/kb/303650](http://support.microsoft.com/kb/303650)，如果我只使用服务器名称，并从末尾删除域名，链接的行为就像我想要的那样。

对不起这个无用的问题。

谢谢，编

# c++ - 将一个向量附加到另一端并对一个向量进行排序

> ID：10396703
> 
> 赞同：-1
> 
> 时间：2012-05-01T10:52:24.753
> 
> 标签：c++

我对 vector 有一些疑问；

*   如何以省时的方式将一个向量附加到另一端？
*   如果它的类型是 NODE ，如何使用 STL 特征对一个向量进行排序？（对于节点，请看下面）

    前任

    ```
    struct NODE {

               char name;

               .... // other things

    }; 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:01:00.993

*   [std::vector::insert()](http://en.cppreference.com/w/cpp/container/vector/insert)可用于从使用迭代器协议的任何内容中插入
*   [std::sort()](http://en.cppreference.com/w/cpp/algorithm/sort)按升序排序并采用可选的比较函数（或任何带有`operator()`它的东西），它接受元素`a`并且`b`应该返回 true if `a < b`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T11:07:12.897

要将一个向量附加到另一个向量：

```
myVec.insert(myVec.end(), myVec2.begin(), myVec2.end());
// if your compiler supports C++11 you can do:
myVec.insert(end(myVec), begin(myVec2), end(myVec2)); 
```

要对向量进行排序：

```
vector<Node> myVec;
// add elements...
sort(myVec.begin(), myVec.end()); 
```

节点应该定义 < 运算符：

```
bool operator<(const Node & rhs, const Node & lhs){
    return rhs.name < lhs.name;
} 
```

# c# - quickfix 是否将收到的消息存储在某处？

> ID：10396706
> 
> 赞同：1
> 
> 时间：2012-05-01T10:52:31.113
> 
> 标签：c#, quickfix, fix-protocol

我知道 quickfix 将传出消息存储到 .body 文件，但我很好奇它是否将传入消息存储在某处（即文件）以及应该设置什么来获得该功能？

最好的，D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T03:50:19.797

如果您使用[FileLogFactory](http://www.quickfixengine.org/quickfix/doc/html/class_f_i_x_1_1_file_log_factory.html)，那么所有传入的消息都将记录到您的日志文件夹中的一个文件中（您在*FileLogPath*中设置）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T11:24:40.380

如果您设置`FileStorePath=\path\`quickfix 将在其中保存一个 .messages.current 文件，其中包含原始格式的消息

# cakephp - CakePHP 保存多行

> ID：10396708
> 
> 赞同：3
> 
> 时间：2012-05-01T10:53:04.453
> 
> 标签：cakephp, cakephp-2.0

我正在使用两个模型'User'和'UserImage'..我要将多行保存到user_images表中.. UserImage的视图如下..

```
echo $this->Form->input('UserImage.0.photo');
echo $this->Form->input('UserImage.1.photo');
echo $this->Form->input('user_id');
echo $this->Form->end(__('Submit')); 
```

那么如何保存多行..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T09:55:24.470

如果涉及更多模型，则应指定每个字段的模型。此外，您需要为每条记录指定相关字段 (user_id)。

试试这个：

```
echo $this->Form->input('UserImage.0.user_id');
echo $this->Form->input('UserImage.1.user_id'); 
```

加上使用它来保存多个记录和多个模型：

```
$this->UserImage->saveAll($this->request->data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T10:54:42.820

见 cakephp 的文档有一个方法说 saveAll() [Cake PHP 保存你的数据](http://book.cakephp.org/2.0/en/models/saving-your-data.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-16T10:54:06.277

来自 cakephp 2.x 的文档：

为了保存单个模型的多条记录，$data 需要是一个数字索引的记录数组，如下所示：

```
 $data = array(
        array('title' => 'title 1'),
        array('title' => 'title 2'),
    );
$this->saveMany($data); 
```

请注意，我们传递的是数字索引，而不是通常包含 Article 键的 $data。当保存同一模型的多条记录时，记录数组应该只是在没有模型键的情况下进行数字索引。

采用以下格式的数据也是可以接受的：

```
 $data = array(
        array('Article' => array('title' => 'title 1')),
        array('Article' => array('title' => 'title 2')),
    );
  $this->saveMany($data); 
```

我试过第一个，效果很好。

HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-30T09:05:11.433

您可以使用这个 saveMany() 将每个图像作为新记录插入。我用同样的方法来解决我的问题。[paul.ago](https://stackoverflow.com/users/391397/paul-ago)的回答中的每一件事都很好，但只需将 saveAll() 更改为 saveMany()

```
$this->UserImage->saveMany($this->request->data); 
```

# c++ - OpenFrameworks testApp 拥有 ofColor 成员的“正确方式”？

> ID：10396714
> 
> 赞同：1
> 
> 时间：2012-05-01T10:53:19.913
> 
> 标签：c++, openframeworks

我从我的 ofApp.cpp（又名 testApp.cpp）的这个实现开始：

```
#include "ofApp.h"

const ofColor bgColor(33, 33, 33);

void ofApp::setup() {
  ofBackground(bgColor);
} 
```

为此，在 ofApp.h（又名 testApp.h）中：

```
#pragma once
#include "ofMain.h"

class ofApp : public ofBaseApp {

  public:
    ofApp() : bgColor(ofColor(33, 33, 33)) {};
    void setup();
    // ...
    void gotMessage(ofMessage msg);

    private:
    const ofColor bgColor;

}; 
```

我只是将全局声明`bgColor`从 ofApp.cpp 移到了 ofApp.h 中，并添加了一个带有初始化列表的构造函数来初始化`bgColor`。

后者是做这种事情的“正确方法”吗？（我很难在 C++ 实践与在 ofApp.cpp 顶部声明全局变量的“OF 风格”之间划清界限。

在 ofApp.h 中声明成员并使用初始化列表，而不是在 testApp.cpp 顶部声明全局变量“更好”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:39:23.773

简而言之，后者是“正道”。关于 OF 论坛的讨论在[这里](http://forum.openframeworks.cc/index.php/topic,9692.0.html)。

# java - netty - 我可以引导一个新客户端在通道处理程序中连接其他服务器吗？

> ID：10396719
> 
> 赞同：1
> 
> 时间：2012-05-01T10:53:50.783
> 
> 标签：java, networking, network-programming, netty

我是否可以在客户端通道处理程序中动态构建客户端客户端/服务器？如果有可能，你怎么能做到？（我已经尝试过了，但是在使用 bootstrap.connect 连接时构建子客户端失败，另一方面，我已经成功构建了一个与某个端口绑定的子服务器，不知道为什么）

有没有更好的方法来实现上述功能，使客户端与其他服务器/客户端动态通信，而不是它首先连接的服务器，但保持连接处于活动状态？

补充： *部分代码如下：*

```
public class FileClientHandler extends SimpleChannelUpstreamHandler {   

.....

public void getFile(final String filename, final String md5){
    // Configure the client.
    ClientBootstrap bootstrap = new ClientBootstrap(
            new NioClientSocketChannelFactory(
                    Executors.newCachedThreadPool(), Executors.newCachedThreadPool()));

    // Configure the pipeline factory. 
    bootstrap.setPipelineFactory(new ChannelPipelineFactory() {
        public ChannelPipeline getPipeline() throws Exception {
            return Channels.pipeline( new FileClientGetFileHandler(filename,md5) );
        }
    });

    // Start the connection attempt.
    ChannelFuture future = bootstrap.connect(new InetSocketAddress(Ip, Port));

    // Wait until the connection attempt succeeds or fails.
    future.awaitUninterruptibly().getChannel();

    if (!future.isSuccess()) {
        System.out.print("Connect Failure!\n");
        future.getCause().printStackTrace();
        bootstrap.releaseExternalResources();
        return;
    } 

    // Wait until the connection is closed or the connection attempt fails.
    future.getChannel().getCloseFuture().awaitUninterruptibly();

    // Shut down thread pools to exit.
    bootstrap.releaseExternalResources();
}

...... 
```

}

它在*future.awaitUninterruptibly().getChannel();失败了* ，如果删除它，连接仍然失败：*!future.isSuccess()==true*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:48:55.513

代理示例实际上是这样做的，它在处理程序中创建一个新的客户端连接：

[https://github.com/netty/netty/blob/b03b11a24860a1d636744c989dad50d223ffc6bc/src/main/java/org/jboss/netty/example/proxy/HexDumpProxyInboundHandler.java](https://github.com/netty/netty/blob/b03b11a24860a1d636744c989dad50d223ffc6bc/src/main/java/org/jboss/netty/example/proxy/HexDumpProxyInboundHandler.java)

# sql-server - 如何将 xml.nodes() 的输出插入表中？

> ID：10396721
> 
> 赞同：0
> 
> 时间：2012-05-01T10:54:06.543
> 
> 标签：sql-server, xml, sql-server-2008, nodes

我是 sql server 的新手，我正在尝试将行从 XML 文档插入数据库。我做了一些研究，并设法使用 XML 节点函数将 XML 放入行集中。但是，我不知道下一步该做什么。如何将此行集插入到具有相同列名的现有表中？

以下是我到目前为止所拥有的，有人可以帮助我下一步去哪里吗？

```
DECLARE @xml xml
SET @xml = 
N'  <Products>
        <Product>
        <id>4</id>
        <name>Amy</name>
        <age>25</age>
        </Product>
        <Product>
            <id>7</id>
            <name>Vicky</name>
            <age>40</age>
        </Product>
    </Products>'

SELECT  doc.col.value('id[1]',      'nvarchar(10)')     id
    ,   doc.col.value('name[1]',    'varchar(100)')     name 
    ,   doc.col.value('age[1]',     'nvarchar(10)')     age 
FROM    @xml.nodes('/Products/Product') doc(col) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:32:15.480

你可能需要这个

```
INSERT INTO YourTableName(Id,name,age)
SELECT
 doc.col.value('id[1]', 'nvarchar(10)') id
,doc.col.value('name[1]', 'varchar(100)') name 
,doc.col.value('age[1]', 'nvarchar(10)') age 
FROM @xml.nodes('/Products/Product') doc(col) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T12:08:43.433

您需要将`SELECT`语句的输出传递给`INSERT`您希望将数据填充到其中的表的语句。

*建议*：

*   您可以将用于*id*和*age*节点的数据类型从*nvarchar(10)*更改为**`int`**假设两个字段都应该代表数字。

*脚本*：

```
CREATE  TABLE dbo.mytable
(   
        id      INT         NOT NULL
    ,   name    VARCHAR(30) NOT NULL
    ,   age     INT         NULL
)

DECLARE @xml xml
SET @xml = 
N'  <Products>
        <Product>
        <id>4</id>
        <name>John</name>
        <age>25</age>
        </Product>
        <Product>
            <id>7</id>
            <name>Jane</name>
            <age>40</age>
        </Product>
        <Product>
            <id>6</id>
            <name>Jill</name>
            <age></age>
        </Product>
    </Products>'

INSERT INTO dbo.mytable (id, name, age)
SELECT  doc.col.value('id[1]',      'int')      id
    ,   doc.col.value('name[1]',    'varchar(100)')     name 
    ,   doc.col.value('age[1]',     'int')      age 
FROM    @xml.nodes('/Products/Product') doc(col);

SELECT * FROM dbo.mytable; 
```

*输出*：

```
id  name    age
--  ------  ---
4   John    25
7   Jane    40
6   Jill    0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:19:13.220

```
INSERT INTO Table
(
col1
, col2
, col3
)
SELECT
 doc.col.value('id[1]', 'nvarchar(10)')
,doc.col.value('name[1]', 'varchar(100)')
,doc.col.value('age[1]', 'nvarchar(10)')
FROM 
    @xml.nodes('/Products/Product') doc(col) 
```

# google-maps - 在 Google 地图 API 中为国家/地区分配颜色

> ID：10396723
> 
> 赞同：0
> 
> 时间：2012-05-01T10:54:33.500
> 
> 标签：google-maps

我正在使用 Google API 地图。我想为不同的国家分配不同的颜色，例如在英格兰我想用不同的颜色绘制每个城市。我如何使用 JavaScript API V3 做到这一点？我需要使用多边形吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:36:31.050

您需要使用多边形或 KMLLayer。为此，您需要提供自己的数据源。[http://naturalearthdata.com](http://naturalearthdata.com)是公共领域数据的良好来源。但谷歌不提供边界信息。

# haskell - Haskell 输入数据

> ID：10396727
> 
> 赞同：0
> 
> 时间：2012-05-01T10:54:43.093
> 
> 标签：haskell

我正在尝试将 Film 类型更改为数据类型，以便更轻松地订购、保存和加载到文件，我在将函数与正确的参数匹配时遇到问题，使用这些类型要容易得多.

```
type Rating = (String, Int)
--type Film = (String, String, Int, [Rating])
data Film = Film String String Int [Rating]
         deriving (Show,Ord,Eq, Read)

testDatabase :: [Film]
testDatabase = []

testFilm = ("Test","Test",2012,[("Test",8),("Test",5)])

saveToFile :: IO ()
saveToFile = do
    putStrLn "Enter the output filename: "
    name <- getLine
    writeFile name (show testDatabase)
    putStrLn "Done"

loadFromFile :: IO ()
loadFromFile = do
    putStrLn "Enter the input filename: "
    name <- getLine
    contents <- readFile name
    let testDatabase = length contents `seq` (read contents :: [Film])
    putStrLn formatDatabase
    putStrLn "Done"

average xs = realToFrac (sum xs) / genericLength xs 

addFilm :: String -> String -> Int -> [Film] -> [Film]
addFilm title director year db = db ++ Film title director year []

filmsByDirector :: String -> [Film]
filmsByDirector name = filter (\(a,_,_,_) -> a == name) testDatabase

filmsByRating :: Float -> [Film]
filmsByRating rating = filter (\(_,_,_,a) -> filmRating a > rating) testDatabase

filmsByYear :: Int -> [Film]
filmsByYear year = filter (\(_,_,a,_) -> a == year) testDatabase

filmRating :: [(String,Int)] -> Float
filmRating ratings = average (map snd ratings)

formatString :: Film -> String
formatString (dir, film, year, rat) = printf "\n\nDirector: %s \nFilm Name: %s \nYear: %s \nRating: %4.2f" (show dir) (show film) (show year) (filmRating rat)

formattedByYear :: Int -> String
formattedByYear year = concatMap formatString $ filmsByYear year

formattedByDirector :: String -> String
formattedByDirector dir = concatMap formatString $ filmsByDirector dir

formatDatabase = concatMap formatString $ testDatabase 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T11:04:49.953

没有什么需要改变的，而不是

```
filmsByDirector name = filter (\(a,_,_,_) -> a == name) testDatabase 
```

在你使用`(,,,)`模式的构造函数的地方，你使用`Film`构造函数

```
filmsByDirector name = filter (\(Film a _ _ _) -> a == name) testDatabase 
```

对于其他功能也是如此。

但是，使用命名字段（或记录）语法并定义要方便得多

```
data Film = Film { director, title :: String, year :: Int, ratings :: [Rating] } 
```

然后函数将很简单

```
filmsByDirector name = filter ((name ==) . director) testDatabase 
```

或者，如果您对无点样式感到不舒服

```
filmsByDirector name = filter (\f -> director f == name) testDatabase 
```

对于关于`Film`vs `[Film]`in的错误`addFilm`，您必须将最后一部电影包装成`[]`,

```
addFilm title director year db = db ++ [Film title director year []] 
```

# android - Android：在画布上用一些颜色绘制透明位图

> ID：10396731
> 
> 赞同：1
> 
> 时间：2012-05-01T10:55:38.117
> 
> 标签：android, android-canvas

让我头疼的是，我有一个透明的 png 图像，我已经将它解码为位图，然后添加到画布上，

```
BitmapFactory.Options options = new BitmapFactory.Options();
Bitmap mBitmap = BitmapFactory.decodeResource(getResources(), picList[0] , options);
Paint p = new Paint();      
canvas.drawBitmap(mBitmap, 0, 0, p); 
```

稍后当我保存画布时，它显示图像但背景显示为黑色，为了实现白色，我使用了一些代码，例如

```
Paint p = new Paint();
p.setAlpha(color.white);
p.setColor(color.white);
canvas.drawColor(color.white);
canvas.drawPaint(p); 
```

但是颜色没有设置为白色，请帮帮我，我希望背景保存的图像是白色的。如果我缺少任何其他逻辑。谢谢帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T04:27:29.367

在画布上绘图后，您可以在位图上调用以下内容：

```
 for(int x=0;x<bitmap.getWidth();x++){
            for(int y=0;y<bitmap.getHeight();y++){
                if(bitmap.getPixel(x, y)==Color.BLACK){
                    bitmap.setPixel(x, y, Color.WHITE);
                }
            }
        } 
```

如果您想要 WHITE bg 作为您保存的图像，请使用 WHITE，否则您可以使用 TRANSPARENT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T10:03:16.360

well i have found out the correct option. its canvas.drawARGB(255,30,30,39); give the various ARGB values and get color on the canvas enjoy :D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T21:53:30.797

好的！

如果您的图像有不好的白色（不是真的（255 255 255）），您可以考虑公差

```
for(int x=0;x<img.getWidth();x++)
{
    for(int y=0;y<img.getHeight();y++)
    {
        int cou = img.getPixel(x, y), tolerancy = 40//max 255, your image would be completely tranpsparent;

        if(Math.abs(Color.red(cou)-255)<tolerancy && 
           Math.abs(Color.green(cou)-255)<tolerancy &&  
           Math.abs(Color.blue(cou)-255)<tolerancy)
            paletteFond.setPixel(x, y, Color.TRANSPARENT);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T11:44:45.330

您可以尝试使用`Color.TRANSPARENT`代替 Color.white ..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T11:01:18.003

在创建 Paint 对象之前调用 canvas.drawColor(color.white); 如果这不起作用，请使用 canvas.drawColor(Color.WHITE, PorterDuff.Mode.DARKEN);

# c# - Create a class during runtime

> ID：10396738
> 
> 赞同：6
> 
> 时间：2012-05-01T10:56:14.143
> 
> 标签：c#, .net, reflection, runtime

Is it possible to create a class during run-time and use it?

I am NOT referring to compiling code at run-time, generating a new assembly, loading it, executing it, etc. Reflection is a one-way street in that it can give you run-time info about your currently loaded assembly or one that you load from file or memory.

My question is more about injection I guess. Can you create a class at run-time within your own app domain and make it do anything useful?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T10:57:08.647

> Is it possible to create a class during run-time and use it?

Yes, you could use [Reflection.Emit](http://msdn.microsoft.com/en-us/library/3y322t50.aspx). You may also checkout [Castle.DynamicProxy](http://www.castleproject.org/dynamicproxy/index.html) which simplifies the process of manually generating the IL.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T13:55:27.500

Refer "Example 18-11: Dynamic invocation with reflection emit" section in following link:

[How to create direct IL without .cs](http://oreilly.com/catalog/progcsharp/chapter/ch18.html)

```
 namespace Programming_CSharp
{
   using System;
   using System.Diagnostics;
   using System.IO;
   using System.Reflection;
   using System.Reflection.Emit;
   using System.Threading;

   // used to benchmark the looping approach
   public class MyMath
   {
      // sum numbers with a loop
      public int DoSumLooping(int initialVal)
      {
         int result = 0;
         for(int i = 1;i <=initialVal;i++)
         {
            result += i;
         }
         return result;
      }
   }

   // declare the interface
   public interface IComputer
   {
      int ComputeSum(  );
   }

   public class ReflectionTest
   {
      // the private method which emits the assembly
      // using op codes
      private Assembly EmitAssembly(int theValue)
      {
         // Create an assembly name
         AssemblyName assemblyName = 
            new AssemblyName(  );
         assemblyName.Name = "DoSumAssembly";

         // Create a new assembly with one module
         AssemblyBuilder newAssembly =
            Thread.GetDomain(  ).DefineDynamicAssembly(
            assemblyName, AssemblyBuilderAccess.Run);
         ModuleBuilder newModule =
            newAssembly.DefineDynamicModule("Sum");

         //  Define a public class named "BruteForceSums " 
         //  in the assembly.
         TypeBuilder myType =
            newModule.DefineType(
            "BruteForceSums", TypeAttributes.Public);

         // Mark the class as implementing IComputer.
         myType.AddInterfaceImplementation(
            typeof(IComputer));

         // Define a method on the type to call. Pass an
         // array that defines the types of the parameters,
         // the type of the return type, the name of the 
         // method, and the method attributes.
         Type[] paramTypes = new Type[0];
         Type returnType = typeof(int);
         MethodBuilder simpleMethod =
            myType.DefineMethod(
            "ComputeSum",
            MethodAttributes.Public | 
            MethodAttributes.Virtual,
            returnType,
            paramTypes);

         // Get an ILGenerator. This is used
         // to emit the IL that you want.
         ILGenerator generator = 
            simpleMethod.GetILGenerator(  );

         // Emit the IL that you'd get if you 
         // compiled the code example 
         // and then ran ILDasm on the output.

         // Push zero onto the stack. For each 'i' 
         // less than 'theValue', 
         // push 'i' onto the stack as a constant
         // add the two values at the top of the stack.
         // The sum is left on the stack.
         generator.Emit(OpCodes.Ldc_I4, 0);
         for (int i = 1; i <= theValue;i++)
         {
            generator.Emit(OpCodes.Ldc_I4, i);
            generator.Emit(OpCodes.Add);

         }

         // return the value
         generator.Emit(OpCodes.Ret);

         //Encapsulate information about the method and
         //provide access to the method's metadata
         MethodInfo computeSumInfo =
            typeof(IComputer).GetMethod("ComputeSum");

         // specify the method implementation.
         // Pass in the MethodBuilder that was returned 
         // by calling DefineMethod and the methodInfo 
         // just created
         myType.DefineMethodOverride(simpleMethod, computeSumInfo);

         // Create the type.
         myType.CreateType(  );
         return newAssembly;
      }

      // check if the interface is null
      // if so, call Setup.
      public double DoSum(int theValue)
      {
         if (theComputer == null)
         {
            GenerateCode(theValue);
         }

         // call the method through the interface
         return (theComputer.ComputeSum(  ));
      }

      // emit the assembly, create an instance 
      // and get the interface
      public void GenerateCode(int theValue)
      {
         Assembly theAssembly = EmitAssembly(theValue);
         theComputer = (IComputer) 
            theAssembly.CreateInstance("BruteForceSums");
      }

      // private member data
      IComputer theComputer = null;

   }

   public class TestDriver
   {
      public static void Main(  )
      {
         const int val = 2000;  // Note 2,000

         // 1 million iterations!
         const int iterations = 1000000;
         double result = 0;

         // run the benchmark
         MyMath m = new MyMath(  ); 
         DateTime startTime = DateTime.Now;            
         for (int i = 0;i < iterations;i++)
            result = m.DoSumLooping(val);
         }
         TimeSpan elapsed = 
            DateTime.Now - startTime;
         Console.WriteLine(
            "Sum of ({0}) = {1}",val, result);
         Console.WriteLine(
            "Looping. Elapsed milliseconds: " + 
            elapsed.TotalMilliseconds + 
            " for {0} iterations", iterations);

         // run our reflection alternative
         ReflectionTest t = new ReflectionTest(  );

         startTime = DateTime.Now; 
         for (int i = 0;i < iterations;i++)
         {
            result = t.DoSum(val);
         }

         elapsed = DateTime.Now - startTime;
         Console.WriteLine(
            "Sum of ({0}) = {1}",val, result);
         Console.WriteLine(
            "Brute Force. Elapsed milliseconds: " + 
            elapsed.TotalMilliseconds  + 
            " for {0} iterations", iterations);
      }
   }
} 
```

# windows-8 - 如何在 win 8 中显示 toast 通知或弹出通知？

> ID：10396739
> 
> 赞同：0
> 
> 时间：2012-05-01T10:56:14.297
> 
> 标签：windows-8, windows-runtime, windows-store-apps, toast

嗨，我已经阅读了 win8 中的 toast 通知和示例代码。

事实上，我想证明：

[http://cybernetnews.com/windows-8-desktop-notifications/](http://cybernetnews.com/windows-8-desktop-notifications/)

当用户在桌面上做某事时，它会显示第一个通知。

当用户触摸第一个通知时，它将显示第二个通知。第二个通知有一些对象可以选择。

但我不知道。

有没有人有类似的经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:32:36.257

据我所知，没有办法做到这一点。此类行为保留给系统 (winrt)。您可以显示 toast 通知并对 onclick 事件作出反应。但是不可能显示控件或某事。像这样。要了解 Toast 通知的外观，[请查看此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh761494)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:48:41.630

通过 URL 中的屏幕截图，“第二个 toast”不是 toast。它看起来像一个弹出菜单。

这是您想了解的有关如何实现 Toast 通知的信息 [http://msdn.microsoft.com/en-us/library/windows/apps/hh779727.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh779727.aspx)

`click`您提到的事件[`onactivated`是](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.toastnotification.activated.aspx)Toast Notification 的事件，实现如下：

```
function onActivated(eventArgs) { /* Your code */ }
toastNotification.onactivated = onActivated; 
```

而且，`WinJS.UI.Flyout`这里也有介绍：

[http://msdn.microsoft.com/en-us/library/windows/apps/br211726.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211726.aspx)

# matlab - 如何找到灰度图像的相关性

> ID：10396740
> 
> 赞同：0
> 
> 时间：2012-05-01T10:56:15.237
> 
> 标签：matlab, image-processing, computer-vision

有一个固定大小为 256*256 的图像 A。我能够找到水平和垂直相邻像素之间的相关性。但我不明白如何准确地从图像中随机选择 4096 对两个对角相邻像素，计算它们的相关系数，然后绘制这些对角相邻像素的分布。

```
xed = A(1:end-1,1:end-1);  % All but the last row and column
yed = A(2:end,2:end);      % All but the first row and column

randIndex = randperm(numel(xed));  % A random permutation of the integers from 1 to numel(x)
randIndex = randIndex(1:4096);     % Pick the first 4096 indices
xRand = xod(randIndex);            % 4096 random values from x
yRand = yod(randIndex);            % The corresponding 4096 values from y

% Compute the Correlation coefficient of x and y
red_xy = corrcoef(xRand(:),yRand(:)); 
```

相同的算法用于加密彩色和灰度图像。对于彩色图像，它单独应用于 RGB 平面，仅应用于灰度一次。在彩色图像的情况下，对角相关系数几乎为零。在灰度中，我想知道我在计算相关系数时是否出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T13:35:22.700

我希望这是真的，每个人都乐于助人。对不起我的英语。

```
%usage [k1,k2,k3,k4,k5,k6]=resim_korelasyon('lennagri.bmp','lenagrisifreli1.bmp',0);
%k1,k2,k3 Original Image correlation coefficient
%k4,k5,k6 encrypted image correlation coefficient
%color  ==> 0 gray , 1 RGB
%kyatayO,kdikeyO,kkosegenO,kyatayI,kdikeyI,kkosegenI  correlation coefficients

function [kyatayO,kdikeyO,kkosegenO,kyatayI,kdikeyI,kkosegenI]=resim_korelasyon(ImageOriginal,ImageEncrypted,color) 
 %Original Image
 I=imread(ImageOriginal);
 A = im2double(I);
 %encrypted image
 I2=imread(ImageEncrypted);
 A2 = im2double(I2);

 if (color==0)
    %For GRAY image
    %==================================================
    %Original Image
    %horizontal
    x1 = A(:,1:end-1);  
    y1 = A(:,2:end);
    kyatayO=hesap(x1,y1);
    %Vertical
    x2 = A(1:end-1,:);  
    y2 = A(2:end,:);    
    kdikeyO=hesap(x2,y2);
    %diagonal
    x3 = A(1:end-1,1:end-1);  
    y3 = A(2:end,2:end);     
    kkosegenO=hesap(x3,y3);

    %==================================================
    %for encrypted image
    %horizontal
    x4 = A2(:,1:end-1);  
    y4 = A2(:,2:end);
    kyatayI=hesap(x4,y4);
    %Vertical
    x5 = A2(1:end-1,:);  
    y5 = A2(2:end,:);    
    kdikeyI=hesap(x5,y5);
    %diagonal
    x6 = A2(1:end-1,1:end-1);  
    y6 = A2(2:end,2:end);     
    kkosegenI=hesap(x6,y6);
    %==================================================
    %graphics
    h=figure;
    subplot(3,2,1),grafik(x1,y1),title('Horizontal');
    subplot(3,2,3),grafik(x2,y2),title('Vertical');
    subplot(3,2,5),grafik(x3,y3),title('Diagonal');
    subplot(3,2,2),grafik(x4,y4),title('Horizontal');
    subplot(3,2,4),grafik(x5,y5),title('Vertical');
    subplot(3,2,6),grafik(x6,y6),title('Diagonal');
    saveas(h,'correlationGray.jpg');
 end

 if(color==1) %For RGB
            %==================================================
            %Orjinal Görüntü İçin
            %Yatay korelasyon
            x1 = A(:,1:end-1,1);  %RED değerine göre hesaplanır. 1 RED 2 GREEN 3 BLUE
            y1 = A(:,2:end,1); 
            kyatayO=hesap(x1,y1);
            %dikey korelasyon
            x2 = A(1:end-1,:,1);  
            y2 = A(2:end,:,1);  
            kdikeyO=hesap(x2,y2);
            %diagonal / çapraz kolerasyon (Sağ üst köşeden sola)
            x3 = A(1:end-1,1:end-1,1);  
            y3 = A(2:end,2:end,1);  
            kkosegenO=hesap(x3,y3);
            %======================================================
            %İşlenmiş Görüntü İçin
            %Yatay korelasyon
            x4 = A2(:,1:end-1,1);  %RED değerine göre hesaplanır. 1 RED 2 GREEN 3 BLUE
            y4 = A2(:,2:end,1); 
            kyatayI=hesap(x4,y4);
            %dikey korelasyon
            x5 = A2(1:end-1,:,1);  
            y5 = A2(2:end,:,1);  
            kdikeyI=hesap(x5,y5);
            %diagonal / çapraz kolerasyon (Sağ üst köşeden sola)
            x6 = A2(1:end-1,1:end-1,1);  
            y6 = A2(2:end,2:end,1);  
            kkosegenI=hesap(x6,y6);
            %==================================================
            %grafikler çizdiriliyor ve kaydediliyor
            h=figure;
            subplot(3,2,1),grafik(x1,y1),title('Horizontal');
            subplot(3,2,3),grafik(x2,y2),title('Vertical');
            subplot(3,2,5),grafik(x3,y3),title('Diagonal');
            subplot(3,2,2),grafik(x4,y4),title('Horizontal');
            subplot(3,2,4),grafik(x5,y5),title('Vertical');
            subplot(3,2,6),grafik(x6,y6),title('Diagonal');
            saveas(h,'correlationRGB.jpg');
 end  
end

function [correlation_coefficient]=hesap(x,y)
    correlation_coefficient = corrcoef(x(:),y(:));
end

function grafik(x,y)
    randIndex = randperm(numel(x));  
    randIndex = randIndex(1:2000);   
    xRand = x(randIndex);            
    yRand = y(randIndex); 
    xRand = xRand * 256;
    yRand = yRand * 256;  
    scatter(xRand,yRand,'.');
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:55:50.653

（这最初是在（我的）评论中，但实际上是答案。我正在把它变成一个可以接受的实际答案，例如[https://meta.stackexchange.com/questions/ 54718/how-to-handle-questions-which-are-answered-in-the-comments](https://meta.stackexchange.com/questions/54718/how-to-handle-questions-which-are-answered-in-the-comments)。）

问题是您的部分数组是这样定义的

```
xed = A(1:end-1,1:end-1); 
```

带有名称`xed`and `yed`，但像这样使用

```
xRand = xod(randIndex); 
```

带有名称`xod`和`yod`. 大概你有其他变量，在其他地方定义了这些名称，这就是为什么你的代码做错了，而不是因为明显的错误而失败。

这里有一个更普遍的寓意：您可以通过为变量提供更长、更多信息和更独特的名称来降低此类错误的风险，这些名称不能通过单字符拼写错误相互转换:-)。

# objective-c - 为什么需要 [super loadView] 或 [super viewDidLoad]？

> ID：10396742
> 
> 赞同：2
> 
> 时间：2012-05-01T10:56:28.273
> 
> 标签：objective-c, ios, superclass

[super loadView] 或 [super viewDidLoad] 写入时会发生什么？我试图删除代码，但堆栈溢出并进入无限循环。有人可以解释为什么需要这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T11:10:59.730

首先，当你重写`loadView`，手动创建自己的视图时，你不应该**调用**超类的实现。这是因为您将手动创建一个视图，并使用那些*而不是*由`UIViewController`的实现创建的视图。（请参阅`loadview` [文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW1)。）

但是当你覆盖时`viewDidLoad`，你确实应该调用超类的实现。这是因为`UIViewController`'s 的实现做了一些内部记账，所以*除了*超类所做的事情之外，`viewDidLoad`您还想运行您的自定义`viewDidLoad`代码。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T11:03:46.710

它从您的超类调用该方法。让我们说它的 NSObject。这些方法的名称解释了：loadView 是加载视图的 NSObject 方法，viewDidLoad 是处理视图已加​​载的 NSObject 方法......沿着这些线 视图控制器中的方法本身“viewDidLoad”，也可能是“loadView”没有执行上述操作的代码...它仅用于自定义，因为您无法修改原始 .m 方法...

要找出您的超类，请转到 .h 文件：

```
 @interface MyViewController : MySuperClass //thats it! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T11:04:24.820

底层类需要自己做一些簿记，以便在您开始将 UI 置于其之上之前做好准备。在 Android 中，相应的应用程序实际上会通过抛出一个 you-did-call-super-first 异常来故意崩溃。*

# cakephp - 代码工作正常，但如果数据为空，则时间验证不起作用

> ID：10396743
> 
> 赞同：0
> 
> 时间：2012-05-01T10:56:38.213
> 
> 标签：cakephp

我已经生成了一个代码生成的随机数并将所有数字保存在数据库中（该部分代码正在工作）但我在验证时遇到问题，没有在视图页面上输入任何 no 重定向此 url admin_manage_epin.ctp，验证不起作用

admin_create_epin.ctp（查看）

```
<tr>
Add E-pin:(No of E-Pin)
<td><?php echo $this->Form->input('e_pin',array('label'=>false));?></td> 
</tr> 
```

epins_controllers.php（控制器）

```
public function admin_create_epin(){
 if(!empty($this->data)){
   $limit = $this->data['Epin']['e_pin'];

   for($i=0;$i<$limit;$i++)
     {
     $random = substr(number_format(time() * rand(),0,'',''),0,11)."<br/>";
     $this->data['Epin']['e_pin'] = $random;
     $this->Epin->id =null;
     $this->Epin->save($this->data); 
   }   

      $this->Session->setFlash("Epin has been added");
      $this->Redirect(array('action'=>'admin_manage_epin')); 
   }
 } 
```

epin.php（模型）

```
<?php class Epin extends appModel{
var $name ="Epin";
var $validate = array(
                      'e_pin'=>array(
                        'rule'=>'notEmpty',
                        'message'=>'Please type No of epin'
                      ));
  }
 ?> 
```

我想我的控制器功能 admin_create_epin 有问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:14:31.780

您可能应该检查实际字段是否为空 - 因为提交表单仍然会有一个数组：

```
if(!empty($this->data['Epin']['e_pin'])) { 
```

在您的`for()`循环中，您应该使用`create()`并且不设置`id`：

```
for($i=0;$i<$limit;$i++) {
    $this->Epin->create();
    $random = substr(number_format(time() * rand(),0,'',''),0,11)."<br/>";
    $this->data['Epin']['e_pin'] = $random;
    //... 
```

你`redirect`应该是小写：

```
$this->redirect(... 
```

很难理解您实际上在问什么，但是如果您在表单提交为空的情况下尝试重定向，则重定向应该更高级：

```
 }
    $this->Session->setFlash("Epin has been added");
    $this->Redirect(array('action'=>'admin_manage_epin')); 
} 
```

# java - 在java中读取大的txt文件时线程？

> ID：10396744
> 
> 赞同：0
> 
> 时间：2012-05-01T10:56:57.887
> 
> 标签：java, multithreading

我必须阅读几个非常大的 txt 文件，并且必须使用多个线程或单个线程来执行此操作，具体取决于用户输入。

假设我有一个获取用户输入的 main 方法，并且用户请求一个线程并希望为该线程处理 20 个 txt 文件。我将如何做到这一点？请注意，下面的代码不是我的代码或其设置，而只是“想法”。

例子：

```
int numFiles = 20;
int threads = 1;

 String[] list = new String[20];
 for(int i = 1; i < 21; i++){
   list[i] = "hello" + i + ".txt";//so the list is a hello1.txt, hello2.txt, ...,  hello20.txt
 }

 public void run(){
 //processes txt file
 } 
```

总而言之，我将如何使用单个线程完成此操作？有20个线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:00:42.227

听起来您需要一个可配置的线程池，并且每个文件读取操作都是要提交到该池中的作业。

当用户指定要使用的线程数时，您将适当地配置池，提交一组文件读取作业，并让池对执行进行排序。

在 Java 世界中，您将使用[Executors.newFixedThreadPool](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int,%20java.util.concurrent.ThreadFactory%29)工厂方法，并将每个作业作为[Callable](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)提交。[这是 IBM 的一篇](http://www.ibm.com/developerworks/library/j-jtp0730/index.html)关于 Java 线程池的文章。

# iphone - 解析字符串并附加结果值

> ID：10396746
> 
> 赞同：1
> 
> 时间：2012-05-01T10:57:04.627
> 
> 标签：iphone, objective-c, nsstring

如何解析以下字符串

```
{
City = "New York";
Country = "United States";
CountryCode = us;
} 
```

并将 "" 内的值附加在一起，并省略字符串的其余部分。我需要将修改后的字符串设为“New York, United States”。

```
CFStringRef address = ABMultiValueCopyValueAtIndex(multiValue, identifier); 
```

当我投射`CFStringRef`到 时`NSString`，我得到了上面记录的表格。我将如何从字符串中检索城市/国家/地区值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:12:51.730

如果您从网络接收此数据字符串（可能是 JSON），您可以像这样处理数据（iOS 5）：

```
- (void)processData:(NSData *)responseData {
        NSError* error;
        NSDictionary* json = [NSJSONSerialization 
            JSONObjectWithData:responseData
            options:kNilOptions 
            error:&error];
        NSString* city = [[json objectForKey:@"Address"] objectForKey:@"City"];
        NSString* country = [[json objectForKey:@"Address"] objectForKey:@"Country"];
        NSString* result = [city stringByAppendingFormat:@", %@",country];
        NSLog(@"%@", result); //New York, United States
    } 
```

相反，如果此字符串是字典表示，则正确的格式应如下所示：

```
NSString *str=@"Address = {" 
                @"City = \"New York\";"
                @"Country = \"United States\";"    
                @"CountryCode = us; };"; 
```

所以如果你真的想从 NSString 传递到 NSDictionary 你可以这样使用[NSPropartyListSerialization](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html)：

```
NSError* error;
NSData *dat=[str dataUsingEncoding:NSUTF8StringEncoding];
NSPropertyListFormat plistFormat;
NSDictionary *temp = [NSPropertyListSerialization propertyListWithData:dat options:NSPropertyListImmutable format:&plistFormat error:&error];
NSString* city = [[temp objectForKey:@"Address"] objectForKey:@"City"];
NSString* country = [[temp objectForKey:@"Address"] objectForKey:@"Country"];
NSString* result = [city stringByAppendingFormat:@", %@",country];
NSLog(@"%@",result); 
```

**编辑**（根据您更新的问题）：

您发布的是字典，而不是数组。字典由键值标识的一组元素组成。数组由一组由索引标识的元素组成。因此，如果数组中的元素是字符串，则必须对每个字符串进行解析。这通常不是最好的方法，正如@FelixKling 所说，您还应该使用标准格式，如 json、xml 等。

# ios - 未对齐的 UILabel

> ID：10396748
> 
> 赞同：3
> 
> 时间：2012-05-01T10:57:11.487
> 
> 标签：ios, optimization, uilabel, instruments

我在滚动视图中放置了一个视图，在这个视图中有一个 UILabel。
UILabel 定义如下：
`label_ = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 20)];`
并且没有自动调整大小的掩码。

当我在“核心动画”工具的 Instruments 中打开“颜色未对齐的图像”时，所有视图都正常，但单个 UILabel 被标记为未对齐。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-05-01T12:43:53.533

结盟。你缺少对齐。

编辑：对不起，无法帮助自己。我从未在 X 代码中使用过该功能，但我的建议是，如果应用程序中的视图看起来不错，那么谁在乎 IB 的想法……

# ruby-on-rails - 将文件夹和子文件夹中的文件上传到 webapp

> ID：10396750
> 
> 赞同：7
> 
> 时间：2012-05-01T10:57:33.527
> 
> 标签：ruby-on-rails, windows, macos, file-upload, desktop-application

目标： **允许用户选择一个文件夹，然后递归查找与文件模式匹配的所有文件，并将其传输（POST）到我的网络服务器**

本质上只是一个更高级的上传对话框......

由于安全原因，标准网络技术（我们正在使用 plupload）不支持这一点，afaik。

附加要求：易于使用/从 webapp 安装。需要 SSL 和应用程序用户凭据。其他一些数据，如记录 ID（从 Web 应用程序获取或创建）来关联上传文件会很好。

Web 应用程序本身是用 Ruby on Rails 编写的，但如果我需要某种本机 Mac 和 Windows（=我的 80% 的用户）桌面客户端，这并不重要。

我有哪些选择？

这样做的代码和对开源库的引用是一个奖励。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T03:10:05.177

我建议创建一个 Adob​​e Air 应用程序。

您可以重用现有的 plupload js 代码，并使用 adobe air api 对其进行扩展。理想情况下，它将是一个主要是静态的应用程序，但会调用服务器来创建策略文档，并在上传时做任何你想做的簿记。[在从 JavaScript 访问 AIR API 类中](http://help.adobe.com/en_US/air/html/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7f0d.html)达到顶峰。然后查看[filesystem.File](http://help.adobe.com/en_US/air/reference/html/flash/filesystem/File.html)类。

Flash 具有 99.3% 的渗透率，用户只需单击“安装我的上传器”，如果需要，就会自动安装 air 框架。Air 也适用于 Android 和 iDevices，因此您的应用可能可供 99.999% 的用户及其妈妈使用。

我花了一分钟才找到它，但这里是[面向 HTML 开发人员的 Adob​​e® AIR® API 参考](http://help.adobe.com/en_US/air/reference/html/)

哦，看看我在他们的例子中发现了什么：

```
var directory = air.File.documentsDirectory;

try
{
    directory.browseForDirectory("Select Directory");
    directory.addEventListener(air.Event.SELECT, directorySelected);
}
catch (error)
{
    air.trace("Failed:", error.message)
}

function directorySelected(event) 
{
    directory = event.target ;
    var files = directory.getDirectoryListing();
    for(var i = 0; i < files.length; i++)
    {
        air.trace(files[i].name);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:26:47.373

我会从以下内容开始构建一个客户端： [https](https://github.com/ms4720/s3sync) ://github.com/ms4720/s3sync ，这样您就可以将它保存在 ruby​​ 家族中。如果你需要一个友好的 gui： [http ://shoesrb.com/tutorials/](http://shoesrb.com/tutorials/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:59:41.067

我仍然认为 Adob​​e Air 应用程序是解决您问题的可靠方法。提供简单的安装/更新，支持 ssl，允许您完全控制用户体验，110% 跨平台等...但是，如果您讨厌 Adob​​e 或编写 UI 代码，您是否研究过 WebDav / dav4rack gem？

[https://github.com/bryanrite/dav4rack-example-devise-subdirectories](https://github.com/bryanrite/dav4rack-example-devise-subdirectories)

该 GitHub 示例在 rails 应用程序中使用 devise 进行身份验证，并使用相同的凭据让用户访问私有存储桶，他们可以在其中通过任何 WebDav 客户端上传文件。您的 Web 应用程序可以提供包含 URL 中的用户名的链接，以便更方便地访问。

OS X 的 Finder 通过 Finder 的“连接到服务器”对话框（自 10.1.1 起）原生支持 WebDav。

如果您的用户使用 Linux，我相信他们可以理解 WebDav。

从扫描[http://en.wikipedia.org/wiki/WebDAV](http://en.wikipedia.org/wiki/WebDAV)看，它看起来像是 Win98 中 Windows 支持的 WebDav。然而，与所有其他网络标准一样，微软决定，嗯，有创意。听起来如果用户是最新的 KB892211、KB907306、Office、Internet Explorer、OLE-DB 和/或“用于 Web 文件夹的 Microsoft 更新”，他们应该能够通过 SSL 使用各种身份验证方案轻松访问 WebDav 文件夹。我确信您的所有 Windows 用户都在使用带有所有最新更新和完整 Office 套件的正版 Windows。

由于您的 rails 应用程序*是*WebDav 服务器，因此您将能够抛出错误（无法将该文件写入服务器）、对上传的文件/目录进行后处理，并进行所需的任何簿记（您拥有用户帐户，以及与他们上传的内容）。Dav4rack 很不错。您可以使用实际的文件系统作为后端或数据库，或者将上传的文件反弹到 S3，或者您可以在 ruby​​ 中执行的任何操作。

我认为此解决方案无法解决您的“递归查找与文件模式匹配的所有文件”组件以及 Air 应用程序可以解决的问题。如果没有实际经验，我想模式匹配会在上传完成后发生（可能带宽效率低下）。

# javascript - 具有多点触控登录的主页

> ID：10396751
> 
> 赞同：3
> 
> 时间：2012-05-01T10:57:39.533
> 
> 标签：javascript, jquery, html, ios, touch

我想创建一个基于触摸的主页。因此，例如，如果用户用 5 个手指触摸屏幕，如图所示（绿色圆圈，见下文），它会将用户重定向到特定主页，但如果他以其他模式（红色圆圈）触摸，它将显示“登录失败，重试”警报。用户触摸的位置无关紧要，只要它在正方形内即可。

主要思想是确定用户的手指位置并将他重定向到另一个页面，登录思想只是一个例子。

有没有办法使用 HTML 和 JavaScript 来做到这一点，因为我希望它成为 iOS 主页？

[![示例布局](../Images/4a41fe55a734c9a96281f5b6fafa1e49.png)](https://i.stack.imgur.com/9OHIn.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:09:27.540

不，对于受密码保护的页面，您还需要服务器端处理。

您的 HTML 页面将包含一个（不可见的）表单，该表单将使用来自触摸事件处理程序的坐标进行更新。然后，在给定时间后或满足条件（例如：已注册 5 个坐标）后，您将提交表单。稍后您也可以将其转换为 AJAX 服务，但没有区别。

然后，服务器应用程序将需要分析触摸模式，并使用登录 cookie 发送失败消息或成功通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T11:07:08.597

[jGestures](http://jgestures.codeplex.com/)将带您走向正确的方向。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T15:30:18.007

您需要为希望用户触摸的元素绑定触摸事件。这些事件是 touchstart、touchmove 和 touchend（以及 touchcancel）。在事件中，手指位置的坐标在一个数组中给出（实际上是三个 - 请参阅底部的链接，了解哪些数组或哪些数组要访问哪些事件/场景）。然后，您可以使用这些坐标来计算形状。

这是使用 jquery 的两个手指的示例（不是必需的）。

```
#JQuery
$('#myID').bind("touchstart", function(event) {
  var finger1PosX = event.originalEvent.targetTouches[0].pageX;
  var finger2PosX = event.originalEvent.targetTouches[1].pageX;
}); 
```

这假设至少有两个手指被按下，这是一个不好的假设。

这是一个很好的教程/讨论： [http ://www.sitepen.com/blog/2008/07/10/touching-and-gesturing-on-the-iphone/](http://www.sitepen.com/blog/2008/07/10/touching-and-gesturing-on-the-iphone/)

您可能还想使用 event.preventDefault 防止此 div 中的滚动和其他手势。

另请注意，Android 上对多点触控事件的支持因版本而异（我知道您在询问 ios）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T11:06:28.997

您可以获取每个触摸的数组（在您的情况下为 5 个）及其坐标。从那里应该“容易”确定你想要什么，它只是在一个循环中将坐标与你的盒子坐标进行比较。在此处查看一些教程[http://seb.ly/2011/04/multi-touch-game-controller-in-javascripthtml5-for-ipad/](http://seb.ly/2011/04/multi-touch-game-controller-in-javascripthtml5-for-ipad/)或在谷歌上找到其他数百个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T11:09:12.577

我建议创建一个隐藏表。这也将为您提供一种处理错误 Torrance 的方法。

如果您查看[http://www.html5rocks.com/en/mobile/touch/](http://www.html5rocks.com/en/mobile/touch/)和启用触控的应用程序部分，这可能有助于您监控多点触控事件

我会得到一个包含多个单元格的网格。（更多的单元格将 = 更难破解密码，但也更容易让用户难以登录！）

然后，如果您有一个 10x10 的网格，例如...（其中 1 = 用户触摸）

```
0010000000
0101000000
0101000000
0000000000
0000000000
0000000000
0000000000
0000000000
0000000000
0000000000 
```

然后你可以计算出 1s 之间的关系，看看它是否匹配

# c++ - 打印实例化链

> ID：10396753
> 
> 赞同：4
> 
> 时间：2012-05-01T10:57:53.133
> 
> 标签：c++, debugging, instantiation, typename

我正在使用 STL C++0x 容器调试一些 C++ 解析器（工具链是 GCC 4.7.0）。

而且由于 STL 重新绑定代码很难理解，我需要以某种方式打印 typedef 之类的完整实例化链`std::vector<T>::reference`。当然，它只解析为`T&`，但在它通过至少 7 个不同的模板`__gnu_cxx`和其他内部结构之前。

所以我期待在模板错误的情况下打印什么，但是对于编译器实例化的*每个类。*可能吗？GCC 插件，也许...

UPD：嗯，我已经手动实例化了所有需要的模板。似乎没有自动执行此操作的好方法，除了将一些调试 printf 语句插入 GCC 代码本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T22:22:03.637

由于您使用的是 GCC 4.7，我假设您在一个可以针对您的代码运行 clang 的系统上。Clang 的错误消息，特别是模板非常好。

```
    模板
    类示例{
        示例（常量 T& t）：t_(t) {}
        T&T_;
    };

    诠释一个;
    示例 e(a)；

```

输出：

```
    t.cpp:8:14：错误：调用类“示例”的私有构造函数
    示例 e(a)；
                 ^
    t.cpp:3:5: 注意：这里隐式声明为私有
        示例（常量 T& t）：t_(t) {}
        ^
    t.cpp:3:27：错误：对类型“int”的引用绑定到类型“const int”的值会下降
          限定词
        示例（常量 T& t）：t_(t) {}
                              ^ ~
    t.cpp:8:14：注意：在此处请求的成员函数“Example::Example”的实例化中
    示例 e(a)；
                 ^
    产生 2 个错误。

```

# c++ - STL 容器的 Clear() 方法是否在堆对象上调用 delete？

> ID：10396754
> 
> 赞同：1
> 
> 时间：2012-05-01T10:57:53.543
> 
> 标签：c++, dictionary, iterator, delete-operator

> **可能重复：**
> [std::vector.clear() 是否在每个元素上删除（可用内存）？](https://stackoverflow.com/questions/594089/does-stdvector-clear-do-delete-free-memory-on-each-element)

我有一张地图，其中第二个元素是堆分配的。

我应该`delete`在迭代或执行方法时显式调用`erase()`并`clear()`为我执行此操作吗？

这是我的析构函数，它删除了分配的第二个元素`new`

```
 ~Event()
        {
            auto iter = mapper.begin();
            while (iter != mapper.end())
            {                   
                mapper.erase(iter++); // heap object
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:00:44.367

您必须显式调用`delete`每个`new`元素。
标准库容器不获取分配给指针的动态内存的所有权。

如果您需要自动清理，您应该使用智能指针作为容器元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T11:00:32.687

不，不会的。您必须调用`delete`自己（或使用智能指针）。

# c# - 获取富文本框中单个字符的坐标和尺寸

> ID：10396760
> 
> 赞同：0
> 
> 时间：2012-05-01T10:59:04.550
> 
> 标签：c#, .net, winapi, richtextbox, rtf

我需要遍历富文本框中的字符并获取每个字符的确切位置和尺寸。

关于如何实现这一目标的任何想法？

# c# - 如何使用 Bouncy Castle 解密 AES/CCM 加密的密文？

> ID：10396762
> 
> 赞同：9
> 
> 时间：2012-05-01T10:59:25.283
> 
> 标签：c#, aes, bouncycastle, encryption

## 加密

加密是使用[斯坦福 Javascript 加密库](http://crypto.stanford.edu/sjcl/)(SJCL) 完成的。下面是一个完整的加密示例，分为两部分。第一个是关于使用[PBKDF2](http://en.wikipedia.org/wiki/Pbkdf2)的基于密码的密钥派生。在第二部分中，实际加密发生在派生密钥和[初始化向量](http://en.wikipedia.org/wiki/Initialization_vector)(IV) 中。请注意，盐和 IV 是硬编码的，因此更容易提供 C# 解密解决方案。

```
// Key derivation…
var password = "password";
var salt = sjcl.codec.hex.toBits(
    "5f9bcef98873d06a" // Random generated with sjcl.random.randomWords(2, 0);
);                     // Hex encoded with sjcl.codec.hex.toBits(randomSalt);
var iterations = 1000;
var keySize = 128;
var encryptionKey = sjcl.misc.pbkdf2(password, salt, iterations, keySize);

// Encryption…
var blockCipher = new sjcl.cipher.aes(encryptionKey);
var plainText = sjcl.codec.utf8String.toBits("secret");
var iv = sjcl.codec.hex.toBits("8291ff107e798a29");
var adata = ""; // What is adata?
var tag = 64; // What is tag? I think it is authentication strength.
var cipherText = sjcl.mode.ccm.encrypt(blockCipher, plainText, iv, adata, tag); 
```

变量的值`encryptionKey`：

*   SJCL 位数组：`[ -74545279, -553931361, -1590906567, 1562838103 ]`
*   [十六进制](http://en.wikipedia.org/wiki/Hexadecimal)编码：`fb8e8781defbad9fa12cb1395d270457`
*   [Base64](http://en.wikipedia.org/wiki/Base64)编码：`+46Hgd77rZ+hLLE5XScEVw==`

变量的值`iv`：

*   SJCL 位数组：`[ -2104361200, 2121894441 ]`
*   十六进制编码：`8291ff107e798a29`
*   Base64 编码：`gpH/EH55iik=`

变量的值`cipherText`：

*   SJCL 位数组：`[ 1789401157, -1485204800, -440319203, 17593459146752 ]`
*   十六进制编码：`6aa81845a77992c0e5c1431d4be2`
*   Base64 编码：`aqgYRad5ksDlwUMdS+I=`

* * *

## 问题

问题是：

*如何使用[Bouncy Castle](http://www.bouncycastle.org/csharp/)解密密文？*

* * *

## 在下面的 jbtule 帮助下的工作解密示例

```
using Org.BouncyCastle.Crypto.Engines;
using Org.BouncyCastle.Crypto.Modes;
using Org.BouncyCastle.Crypto.Parameters;

namespace SjclHelpers {

    public static class Encryption {

        /// <summary>Decrypts the cipher text.</summary>
        /// <param name="cipherText">The cipher text.</pararesm>
        /// <param name="key">The encryption key.</param>
        /// <param name="initializationVector">The IV.</param>
        /// <returns>The decrypted text.</returns>
        public static byte[] Decrypt(this byte[] cipherText,
            byte[] key, byte[] initializationVector) {
            var keyParameter = new KeyParameter(key);
            const int macSize = 64;
            var nonce = initializationVector;
            var associatedText = new byte [] {};
            var ccmParameters = new CcmParameters(
                keyParameter,
                macSize,
                nonce,
                associatedText);
            var ccmMode = new CcmBlockCipher(new AesFastEngine());
            var forEncryption = false;
            ccmMode.Init(forEncryption, ccmParameters);
            var plainBytes =
                new byte[ccmMode.GetOutputSize(cipherText.Length)];
            var res = ccmMode.ProcessBytes(
                cipherText, 0, cipherText.Length, plainBytes, 0);
            ccmMode.DoFinal(plainBytes, res);
            return plainBytes;
        }}} 
```

我得到一个`System.ArgumentException`. 我认为这是在抱怨其中一个字节数组太短。

Boncy Castle 可在以下位置的 NuGet 站点获得：http: [//nuget.org/packages/BouncyCastle](http://nuget.org/packages/BouncyCastle)。

* * *

## 关于

AES/CCM 解密解决方案将成为[CodePlex的](http://sjclhelpers.codeplex.com/)[SjclHelpers](http://sjclhelpers.codeplex.com/)项目的一部分，并将作为 NuGet 包发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:30:09.603

据我所知：

1.  Nonce 应该是 IV。
2.  通常你使用`AeadParameters`而不是，`CcmParameters`但这可能仍然可以，当然不要用 ParametersWithIV 包装它
3.  `associateText`是可选的，因为如果您需要，CCM 可以验证与您的加密数据相关的未加密数据。您可能需要一个参数，因为它需要与 sjcl 相同，`adata`并且传输方法可以是任何东西。
4.  这是正确的`tag`并且`macSize`是相同的。
5.  DoFinal 应该是`ccmMode.DoFinal(plainBytes, res);`
6.  为安全起见，解密后，应将密文的`macSize / 8`最后`ccmMode.GetMac()`（
7.  `var plainBytes = new byte[ccmMode.GetOutputSize(cipherText.Length)]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T07:35:53.617

您无法使用 Bouncy Castle 解密 sjcl JSON。因为 SJCL 的预计算表与 Bouncy Castle 的不同。我做了自己的图书馆。如果您仍在寻找解密解决方案，请尝试一下。 [https://github.com/mebius1080p/SJCLDecryptor](https://github.com/mebius1080p/SJCLDecryptor)

# visual-studio-2010 - 添加 SilverLight ToolKit 5 的参考

> ID：10396763
> 
> 赞同：4
> 
> 时间：2012-05-01T10:59:40.467
> 
> 标签：visual-studio-2010, silverlight, silverlight-toolkit, silverlight-5.0

我用谷歌搜索了很多，但找不到任何解决方案，所以我决定把我的问题放在这里......所以如果这是一个愚蠢的问题，请原谅我。

我从这里下载 Silverlight 工具包：http: [//silverlight.codeplex.com/releases/view/78435](http://silverlight.codeplex.com/releases/view/78435) [ **Silverlight_5_Toolkit_December_2011.msi** ]。在我安装之后

1.  我在我的 windows7 终极版“**所有程序**”列表中找到了“ **Microsoft Silverlight 5 Toolkit December 2011 ”。**但是当我单击“**工具包示例**”时，它会显示“**缺少快捷方式**”***窗口***。

******   当我解压缩“**示例源代码**”并打开解决方案“ **Silverlight.Controls.Samples.sln ”时，它会在我的“****解决方案资源管理器**”中加载两个项目

    **(i) Controls.Samples**和**(ii) Controls.samples.Common**

    *   我发现当我单击“**参考**”节点时，许多参考都丢失了。例如： (i) System.Windows.Controls.Data.DataForm.Toolkit
    (ii) System.Windows.Controls.DataVisualization.toolkit **等.....**

    *   **我不明白在哪里可以找到有助于摆脱缺少引用问题的 DLL。******* 

 *******注意：**我已经在“**示例源代码.zip** ”和“**源代码.zip ”中检查了两个名为“****二进制**”的文件夹以获取所需的 DLL……但这对我没有帮助……

 ***** * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T11:13:18.593

我在这里找到了它们：

`<ProgramFiles>\Microsoft SDKs\Silverlight\v5.0\Toolkit\dec11\Bin\`*********

# redis - LPUSH 命令是否适用于从 JSON 初始化的记录？

> ID：10396764
> 
> 赞同：3
> 
> 时间：2012-05-01T10:59:40.757
> 
> 标签：redis

如果 Redis 记录是从其中包含列表的 JSON 对象中设置的，那么以后可以在该列表上使用 LPUSH 命令来更新它吗？（在 node.js 上使用 redis）谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T11:56:58.150

不，Redis 与格式无关。它无法解析 JSON，也不是面向文档的数据库。

LPUSH 仅适用于 Redis 列表对象。

然而，使用 Lua Redis 2.6 服务器端脚本功能可以完成的是一个脚本来解码 JSON 对象、添加项目、编码回对象并存储它。

例如，使用以下 JSON 对象：

```
set users:1 "{\"id\":1,\"name\":\"Rocco\",\"age\":50,girlfriends:[\"Ulla\"]}" 
```

添加新女友可以使用[eval 命令](http://redis.io/commands/eval)在一个操作中实现：

```
eval "local t = cjson.decode( redis.call('get',KEYS[1] ))
  if t.girlfriends then
     table.insert(t.girlfriends,ARGV[1])
  else
     t.girlfriends = {ARGV[1]}
  end
  return redis.call('set',KEYS[1], cjson.encode(t))
" 1 user:1 Augusta 
```

另一种可能性是避免将 JSON 对象直接存储在 Redis 中，而是编写一个层将 JSON 对象转换为多个 Redis 键（将列表部分隔离在其特定键中）。

例如：

```
 { "id":1, "name": "Rocco", "age":50,
  girlfriends: [ "Ulla", "Bella", "Josepha", "Isabella" ] } 
```

可以存储为：

```
 HMSET users:1:info name Rocco age 50
 RPUSH users:1:girlfriends Ulla Bella Josepha Isabella 
```

这种方法的主要好处是性能和部分更新支持。主要缺点是失去了一些灵活性，并且转换代码编写起来可能很乏味。

# powershell - powershell 从文件名中删除最后 3 个字符

> ID：10396769
> 
> 赞同：0
> 
> 时间：2012-05-01T11:00:05.137
> 
> 标签：powershell, file-rename

我需要递归地重命名一堆扩展名为“.cop”（用于复制）的文件，并去掉那个“.cop”字符串。

我根据我在该`get-help rename-item`主题上阅读的内容做出了以下命令：

```
gci -r -i *.cop | Rename-Item -newname {$_.name -replace '\.cop',''} 
```

但我收到一个 IO 异常错误：

```
Rename-Item : Cannot create a file when that file already exists. 
```

PowerShell 不想重命名文件，因为它已经存在？这没有意义......有人知道我在这里做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:16:00.090

您需要使用 Foreach-Object Cmdlet：

```
gci -r -i *.cop | % {ren $_ -newname $_.Name.Replace(".cop", "") -whatif} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:38:59.413

你的代码对我有用。确保您没有包含要重命名的文件名的目录。

# c# - 将用户控件添加到另一个表单时出现 MethodNotFoundException

> ID：10396770
> 
> 赞同：0
> 
> 时间：2012-05-01T11:00:07.143
> 
> 标签：c#, winforms, visual-studio-2010, windows-forms-designer

我有两个自定义 ListBox 类：

```
public class MyListBox : ListBox
public class MyCheckedListBox : ListBox 
```

它们是 winforms`System.Windows.Forms.ListBox`控件的包装器，用于添加一些实现和样式等。

我为每个代码添加了以下代码，以便在必要时删除垂直滚动条：

```
private const int WS_VSCROLL = 0x00200000;
private bool verticalScrollbar = true;

[DefaultValue(true)]
public bool VerticalScrollbar
{
    get { return this.verticalScrollbar; }
    set
    {
        if (this.verticalScrollbar != value)
        {
            this.verticalScrollbar = value;
            this.RecreateHandle();
        }
    }
}

protected override System.Windows.Forms.CreateParams CreateParams
{
    get
    {
        System.Windows.Forms.CreateParams parms = base.CreateParams;
        if (!this.verticalScrollbar)
            parms.Style &= ~WS_VSCROLL;
        return parms;
    }
} 
```

我将每个控件添加到现有用户控件`ProfileGeneralPanel`中，它们按预期工作，默认情况下显示滚动条，将`VerticalScrollbar`属性设置为 false 将其删除。虽然，现在需要在多个地方使用这种安排，所以我将这个结构提取到一个单独的新用户控件中，称为`PrivilegesListView`. 这个新控件在一个表中有一个`MyCheckedListBox`和两个。`MyListBox`这三个都`VerticalScrollbar`设置为`false`。到目前为止一切都很好，设计师正确地显示了一切。

但是，当我尝试将此控件从工具箱拖到另一个用户控件上时，会引发异常，说明它找不到方法：`MyCheckedListBox.set_VerticalScrollbar(Boolean)`

有问题的方法显然是属性的生成方法。我已经尝试了所有常规方法，清理并重建，重新启动了 Visual Studio。出于绝望，我还检查了构建时生成的 IL，并且该类`MyCheckedListBox`确实定义了该方法。任何想法为什么它无法找到它？

**请注意**，控件本身的设计器每次都可以正常打开，只有将其添加到另一个表单时才会出现问题。

**请注意**，该问题仅在`VerticalScrollbar`设置为 false 时发生，无论是在设计器生成的代码中`PrivilegesListView`还是在构造函数本身中手写。

**注意：**不幸的是，在这个阶段不可能使用像 a 这样的其他控件`DataGridView`来代替列表框......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:40:22.157

This goes wrong when you previously added the control to the Toolbox with the "Choose items" dialog. That makes a *copy* of the control assembly, stored in a private directory where toolbox item assemblies are kept. You can see this go wrong now perhaps, you are putting an *old version* of the control on your form, one that didn't yet have the added method.

The best way to avoid this trap is to let Visual Studio automatically add controls you are working on to the toolbox. Make sure the setting is still correct, it tends to get changed by unwise attempts at improving VS perf. Tools + Options, Window Forms Designer, General, AutoToolboxPopulate should be set to True. Then any project in your solution that has a class that derives from Control or Component will have its controls automatically added to the top of the toolbox after you compile. Changes you make to the control code are now always in sync.

In general, use Fuslogvw.exe to troubleshoot assembly resolution problems. It works just as well for VS as it does for your own programs. You want to log all bindings so you also see the ones that succeeded but might have picked a copy of the assembly from the wrong folder.

# opengl - Mesa3D：32 位通道在 OSMesa32 中不起作用

> ID：10396771
> 
> 赞同：2
> 
> 时间：2012-05-01T11:00:08.370
> 
> 标签：opengl, mesa

Mesa 3D 声称通过 osmesa32 支持 32 位浮点颜色通道。问题是，浮点数被量化为 8 位！有没有其他人注意到这一点？以下是我用于测试的简短程序。你会看到我用特定的浮点颜色绘制了一个平面（占据整个视图），然后读取第一个像素的颜色：

```
#include <stdio.h>
#include <stdlib.h>
#include "GL/osmesa.h"
#include "GL/glut.h"

#define WIDTH 100
#define HEIGHT 100

void draw()
{
GLint r, g, b, a;
glGetIntegerv(GL_RED_BITS, &r);
glGetIntegerv(GL_GREEN_BITS, &g);
glGetIntegerv(GL_BLUE_BITS, &b);
glGetIntegerv(GL_ALPHA_BITS, &a);
printf("channel sizes: %d %d %d %d\n", r, g, b, a);

glEnable(GL_DEPTH_TEST);

glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

glTranslatef(0.0, 0.0, -1.0); 

// draw a plane
glBegin(GL_QUADS);
glColor3f(0.5f, 0.56789f, 0.568f);
glVertex3f(-1, -1, 0);
glVertex3f(-1, 1, 0);
glVertex3f(1, 1, 0);
glVertex3f(1, -1, 0);
glEnd();

glFinish();
}

int main( int argc, char *argv[] )
{
GLfloat *buffer;

/* Create an RGBA-mode context */
#if OSMESA_MAJOR_VERSION * 100 + OSMESA_MINOR_VERSION >= 305
/* specify Z, stencil, accum sizes */
OSMesaContext ctx = OSMesaCreateContextExt( GL_RGB, 16, 0, 0, NULL );
#else
OSMesaContext ctx = OSMesaCreateContext( GL_RGB, NULL );
#endif
if (!ctx) {
    printf("OSMesaCreateContext failed!\n");
    return 0;
}

/* Allocate the image buffer */
buffer = (GLfloat *) malloc( WIDTH * HEIGHT * 3 * sizeof(GLfloat));
if (!buffer) {
    printf("Alloc image buffer failed!\n");
    return 0;
}

/* Bind the buffer to the context and make it current */
if (!OSMesaMakeCurrent( ctx, buffer, GL_FLOAT, WIDTH, HEIGHT )) {
      printf("OSMesaMakeCurrent failed!\n");
      return 0;
}

draw();

printf("RED: %f\n", buffer[0]);
printf("GREEN: %f\n", buffer[1]);
printf("BLUE: %f\n", buffer[2]);

/* free the image buffer */
free( buffer );

/* destroy the context */
OSMesaDestroyContext( ctx );

return 0;
} 
```

在绘图代码中，行：

```
glColor3f(0.5f, 0.56789f, 0.568f); 
```

应该给我浮动颜色值。当我阅读颜色时，我得到以下输出：

```
channel sizes: 32 32 32 32
RED: 0.501961
GREEN: 0.568627
BLUE: 0.568627 
```

您会注意到 0.501961 = 128/255，并且 0.568627=145/255（即量化）。

我在我的 Mac 上使用以下配置构建了 Mesa：

```
./configure --with-driver=osmesa --with-osmesa-bits=32 --disable-gallium --disable-egl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:39:36.947

尝试使用着色器和顶点属性而不是立即模式 - 不能保证 glColor3f 不会将接收到的任何内容量化为 8 位。我不确定即使在“真正的”OpenGL 上也存在这样的保证——据我所知，glspec41-compatibility 并没有说明任何关于保持颜色精度的内容，但它包含一些有趣的段落，比如*“由于精度有限，某些转换后的值将无法准确表示。”* （2.13：固定功能顶点照明和着色）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T02:08:32.813

这是一个编译问题。在 s_span.c 中，您可以看到基于 CHAN_TYPE 的值（在 mtypes.h 中定义）到 GLubyte 的转换。

一切都归结为 CHAN_BITS == 32 或不在 config.h 中。

我在您的帖子中看到您说您正在设置 32 位 - 但我们可能正在使用不同的构建 - 我正在使用 OSMesa 在 Windows 上进行操作 - 看起来你可能不是。

* * *

我正在使用 7.5.1 - 似乎是最后一个带有 VS.sln 的 Mesa。

将通道位设置为 32 会导致 OSMESA 失败。如果您发现任何问题，请告诉我。

谢谢！

# python - numpy genfromtxt 列

> ID：10396773
> 
> 赞同：3
> 
> 时间：2012-05-01T11:00:14.247
> 
> 标签：python, numpy, genfromtxt

我遇到了 numpy genfromtxt 看起来很简单的问题。这是我的代码的（非常）简化版本：

```
import numpy as np

in_file_1 = raw_input ('enter name of template file to be scaled:\n')
spec_1 = np.genfromtxt(in_file_1, delimiter = [8,24], dtype =float)
print spec_1 
```

我正在阅读的文件非常简单，两列没有标题等：

```
6392.01   0.90286163
6392.05   0.88731778
6392.09   0.87789831
6392.13   0.87716535
6392.16   0.88523003
6392.20   0.90948176
6392.24   0.93056874
6392.28   0.95782283
6392.32   0.98056805
6392.36   0.99623797
6392.39   0.99458828
6392.43   0.9848269
6392.47   0.96011146
6392.51   0.92864767 
```

当我在 python 命令行上使用 genfromtxt 阅读上述内容时，它给了我预期的两列数组：

```
>>> import numpy as np
>>> in_file_1 = raw_input ('enter name of template file to be scaled:\n')
enter name of template file to be scaledl_1714650_052_no_head.txt
>>> spec_1 = np.genfromtxt(in_file_1, delimiter = [8,24], dtype =float)
>>> spec_1
array([[  6.39201000e+03,   9.02861630e-01],
       [  6.39205000e+03,   8.87317780e-01],
       [  6.39209000e+03,   8.77898310e-01],
       [  6.39213000e+03,   8.77165350e-01],
       [  6.39216000e+03,   8.85230030e-01],
       [  6.39220000e+03,   9.09481760e-01],
       [  6.39224000e+03,   9.30568740e-01],
       [  6.39228000e+03,   9.57822830e-01],
       [  6.39232000e+03,   9.80568050e-01],
       [  6.39236000e+03,   9.96237970e-01],
       [  6.39239000e+03,   9.94588280e-01],
       [  6.39243000e+03,   9.84826900e-01],
       [  6.39247000e+03,   9.60111460e-01],
       [  6.39251000e+03,   9.28647670e-01]])
>>> 
```

但是当我将它作为本文顶部的脚本 (read_test.py) 运行时，它会返回一列字符串：

```
[scrooge:Acc_cont_removal/All_stars/Test] darryl% python read_test.py 
enter name of template file to be scaled:
l_1714650_052_no_head.txt
[[  6.39201000e+03   9.02861630e-01]
 [  6.39205000e+03   8.87317780e-01]
 [  6.39209000e+03   8.77898310e-01]
 [  6.39213000e+03   8.77165350e-01]
 [  6.39216000e+03   8.85230030e-01]
 [  6.39220000e+03   9.09481760e-01]
 [  6.39224000e+03   9.30568740e-01]
 [  6.39228000e+03   9.57822830e-01]
 [  6.39232000e+03   9.80568050e-01]
 [  6.39236000e+03   9.96237970e-01]
 [  6.39239000e+03   9.94588280e-01]
 [  6.39243000e+03   9.84826900e-01]
 [  6.39247000e+03   9.60111460e-01]
 [  6.39251000e+03   9.28647670e-01]]
[scrooge:Acc_cont_removal/All_stars/Test] darryl% 
```

我尝试了各种分隔符配置等，但我无法弄清楚发生了什么，并且几天前这段代码运行良好。使用 python v2.7 在 OSX (Lion) 上运行。

任何想法都非常感激。达里尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T11:55:58.523

你得到的正是你应该得到的答案！

```
>>> numpy.genfromtxt('testfile', delimiter=[8,24], dtype = float)
array([[  6.39201000e+03,   9.02861630e-01],
       [  6.39205000e+03,   8.87317780e-01],
       [  6.39209000e+03,   8.77898310e-01],
       [  6.39213000e+03,   8.77165350e-01],
       [  6.39216000e+03,   8.85230030e-01],
       [  6.39220000e+03,   9.09481760e-01],
       [  6.39224000e+03,   9.30568740e-01],
       [  6.39228000e+03,   9.57822830e-01],
       [  6.39232000e+03,   9.80568050e-01],
       [  6.39236000e+03,   9.96237970e-01],
       [  6.39239000e+03,   9.94588280e-01],
       [  6.39243000e+03,   9.84826900e-01],
       [  6.39247000e+03,   9.60111460e-01],
       [  6.39251000e+03,   9.28647670e-01]])
>>> print _
[[  6.39201000e+03   9.02861630e-01]
 [  6.39205000e+03   8.87317780e-01]
 [  6.39209000e+03   8.77898310e-01]
 [  6.39213000e+03   8.77165350e-01]
 [  6.39216000e+03   8.85230030e-01]
 [  6.39220000e+03   9.09481760e-01]
 [  6.39224000e+03   9.30568740e-01]
 [  6.39228000e+03   9.57822830e-01]
 [  6.39232000e+03   9.80568050e-01]
 [  6.39236000e+03   9.96237970e-01]
 [  6.39239000e+03   9.94588280e-01]
 [  6.39243000e+03   9.84826900e-01]
 [  6.39247000e+03   9.60111460e-01]
 [  6.39251000e+03   9.28647670e-01]] 
```

这只是打印和获取结果表示之间的区别。

```
>>> result = numpy.genfromtxt('testfile', delimiter=[8,24], dtype = float)
>>> repr(result)
'array([[  6.39201000e+03,   9.02861630e-01],\n       [  6.39205000e+03,   8.87317780e-01],\n       [  6.39209000e+03,   8.77898310e-01],\n       [  6.39213000e+03,   8.77165350e-01],\n       [  6.39216000e+03,
  8.85230030e-01],\n       [  6.39220000e+03,   9.09481760e-01],\n       [  6.39224000e+03,   9.30568740e-01],\n       [  6.39228000e+03,   9.57822830e-01],\n       [  6.39232000e+03,   9.80568050e-01],\n
[  6.39236000e+03,   9.96237970e-01],\n       [  6.39239000e+03,   9.94588280e-01],\n       [  6.39243000e+03,   9.84826900e-01],\n       [  6.39247000e+03,   9.60111460e-01],\n       [  6.39251000e+03,   9.2864
7670e-01]])'

>>> str(result)
'[[  6.39201000e+03   9.02861630e-01]\n [  6.39205000e+03   8.87317780e-01]\n [  6.39209000e+03   8.77898310e-01]\n [  6.39213000e+03   8.77165350e-01]\n [  6.39216000e+03   8.85230030e-01]\n [  6.39220000e+03
 9.09481760e-01]\n [  6.39224000e+03   9.30568740e-01]\n [  6.39228000e+03   9.57822830e-01]\n [  6.39232000e+03   9.80568050e-01]\n [  6.39236000e+03   9.96237970e-01]\n [  6.39239000e+03   9.94588280e-01]\n [
 6.39243000e+03   9.84826900e-01]\n [  6.39247000e+03   9.60111460e-01]\n [  6.39251000e+03   9.28647670e-01]]' 
```

注意 str 版本没有逗号但 repr 有吗？

# php - FQL - 获取 Facebook 用户专辑封面和图片数量

> ID：10396775
> 
> 赞同：0
> 
> 时间：2012-05-01T11:00:16.127
> 
> 标签：php, facebook, facebook-fql

是否可以获得所有用户专辑封面+每个专辑的图片数量？

我可以通过以下方式获取用户专辑封面：

```
SELECT aid, pid, src_small, src, src_big FROM photo WHERE aid IN(SELECT aid FROM album WHERE owner=me() 
```

.

但我还想知道每个相册中**有多少张照片**....

我可以运行一个循环所有用户专辑，并为每个专辑运行另一个 FQL，但如果有更好的方法可以更快/更有效地做到这一点，我会徘徊

有什么建议吗？

谢谢， 格塔米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:00:15.183

```
 function getAlbum() {
FB.api('/me/albums', function(resp) {
    console.log('Albums', resp);
    var ul = document.getElementById('albums');
    for (var i=0, l=resp.data.length; i<l; i++) {
      var
        album = resp.data[i],
        li = document.createElement('li'),
        span = document.createElement('span'),
        a = document.createElement('a');

      a.innerHTML = album.name;
       span.innerHTML = album.count;
      li.appendChild(a);
      li.appendChild(span);
      ul.appendChild(li);
    }
  });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:57:36.700

每个相册中的图片数量在“相册”表的“photo_count”属性中可用，因为您需要“照片”表中的照片信息，而 FQL 不支持连接表，您唯一的问题是使用多查询

```
$multiQuery = {
 "query1":"SELECT aid,owner,name,photo_count,type,object_id FROM album WHERE owner IN (SELECT uid2 FROM friend WHERE uid1 = me())",
 "query2":"SELECT aid, pid, src_small, src, src_big FROM photo WHERE aid IN(SELECT aid FROM album WHERE owner=me())"
 };

$param = array(       
 'method' => 'fql.multiquery',       
 'queries' => $multiQuery,       
 'callback' => '');

$queryresults = $facebook->api($param); 
```

我没有亲自测试过代码，但它应该是这样的

# php - file_get_contents - URL 中的特殊字符

> ID：10396777
> 
> 赞同：7
> 
> 时间：2012-05-01T11:00:24.293
> 
> 标签：php

我正在尝试使用`file_get_contents`. 图像的 URL 可能包含空格和/或特殊字符，如 ý、á、í 等，当它执行时，操作会失败并显示 HTTP 代码 400 - 错误请求。如果我尝试对 url（或该 URL 的片段）进行编码，使用`urlencode`or `rawurlencode`，我会得到 404。

当图像 URL 不包含空格或特殊字符时，它会毫无问题地下载。

我有一种预感，这与编码有关，但我就是想不通。是否有我缺少的编码选项？是否有必须为请求设置的标头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T15:09:36.023

file_get_contents 的问题是 UTF-8 编码（尚未在 PHP 中实现）如果你想用这个函数下载文件，你必须在你的 URL 上做类似的事情：

`$url_utf8 = rawurlencode(utf8_encode($url));`

之后：

`$content = file_get_contents($url_utf8);`

# objective-c - 将 UITextField 限制在某个字符范围内

> ID：10396779
> 
> 赞同：0
> 
> 时间：2012-05-01T11:00:33.113
> 
> 标签：objective-c, ios, uitextfield, uitextviewdelegate

有人可以帮我找出一种简单的方法来限制 UITextField 范围，以便输入的数字在 14 到 70 之间，如果数字大于或小于范围内的数字，则文本字段会自行清除吗？我已经将输入文本的长度限制为不超过 2 个字符，如下所示：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range      replacementString:(NSString *)string
{
NSString *newString = [ageField.text stringByReplacingCharactersInRange:range     withString:string];
return !([newString length] > 2); 
```

唯一剩下的就是实现这种行为。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:07:36.067

更新：

```
 NSInteger v = [newString integerValue];
 if (v < 14 || v > 72) {
// Do whatever you do when the string value is invalid
// BUT ALSO ADD:
textView.text = @"";
} 
```

而不是返回尝试：

```
 if (newString.length != 2) {
  // do what you want!
return;
} else {
// PUT YOUR CODE HERE
} 
```

# jquery - 在 iframe 之外展开 Fancybox

> ID：10396781
> 
> 赞同：0
> 
> 时间：2012-05-01T11:00:42.413
> 
> 标签：jquery, wordpress, iframe, fancybox

我有一个父页面（index.php），里面有一个加载文章页面（single.php）的iframe（#postframe）。在 single.php 中，我有 4 个缩略图（a.group），点击后在 Fancybox 中打开。一切正常，但我想在 iframe 之外扩展花哨的框，覆盖所有 index.php 页面。

这是我在 single.php 中的代码：

```
<script type="text/javascript">
    $(document).ready(function() { 
    $("a.group").fancybox({
        'overlayShow': true,
        'overlayOpacity':0.8
    }); 
    }); 
    </script> 
```

非常感谢！！！！

# perl - Perl - 构造函数中哈希分配中的奇数个元素

> ID：10396789
> 
> 赞同：1
> 
> 时间：2012-05-01T11:01:26.607
> 
> 标签：perl, hash, constructor

我在调用带有哈希的构造函数时遇到了一些问题。我得到错误：

“Sumcheck.pm 第 4 行哈希分配中的奇数个元素”。Sumcheck.pm 看起来像这样：

```
package Sumcheck;

sub new {
    my ($debug, $debug_matches,%checkHash) = @_;
    my $self = {};
    $self->{DEBUG} = $debug;
    $self->{DEBUG_MATCHES} = $debug_matches;
    $self->{CHECKRESULT_OK} = "COMPLIANT"; 
    $self->{CHECKRESULT_ERROR} = "NONCOMPLIANT"; 
    $self->{checkHash} = %checkHash;
    #print %checkHash;

    bless($self);
    return $self;
}
1; 
```

我这样称呼它（只是一个随机哈希）：

```
use Sumcheck;
$debug = 0;
$debug_matches = 1;

%checkHash = (  'The Shining'       => 'Kubrick',
                'Ten Commandments'  => 'DeMille',
                'Goonies'           => 'Donner',);

$sumCheck = Sumcheck->new($debug, $debug_matches, %checkHash); 
```

为什么我会收到此错误？它是如何解决的？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:10:44.927

像这样调用的方法的第一个隐式参数：

```
MyPackage->someMethod() 
```

是包的名称。例如：

```
package MyPackage;

sub someMethod {
    print shift; 
```

将产生**MyPackage**。

WRT 对构造函数的想法是：

```
sub new {
    my $class = shift;  # now your $debug would be $_[0], so:
    my $self = { @_ };  # <- replace this with your own details
    bless $self, $class;
} 
```

您不必完全这样做，但是您现在明白为什么您的哈希有奇数个元素了吗？在`Sumcheck::new`,`$debug`不是您认为的那样（检查）。请记住，散列是按字面意思作为列表传递的，如下所示：

```
name, value, name, value 
```

因此，“Sumcheck”（包名）被放入`$debug`，0 被放入，`$debug_matches`然后哈希的第一个元素是 1，导致：

```
1 => `The Shining`
'Kubrick' => 'Ten Commandments',
'DeMille' => 'Goonies',
'Donner'  =>  # uneven number of elements error 
```

仅供参考，以这种方式调用的对象方法的第一个隐式参数（第二行）：

```
my $obj = Sumcheck->new(..,.);
$obj->someMethod(); 
```

将是 $obj，又名。方法中`$self`：

```
sub someMethod {
    my $self = shift 
```

这是构造函数返回的祝福哈希，`new()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:38:08.133

首先，总是在你的程序中*使用* `use strict`和。`use warnings`

程序没有按你预期的那样工作，因为每当你创建一个类的对象时，第一个参数总是类的实例，所以这样写：

```
package Sumcheck;
use strict;
use warnings;

   sub new {
   # $checkhash variable holds the reference of the hash.
   my ($class, $debug, $debug_matches,$checkHash) = @_; #$class would hold the instance
   my $self = {};
   $self->{DEBUG} = $debug;
   $self->{DEBUG_MATCHES} = $debug_matches;
   $self->{CHECKRESULT_OK} = "COMPLIANT";
   $self->{CHECKRESULT_ERROR} = "NONCOMPLIANT";
   $self->{checkHash} = %{$checkHash};
   #print %checkHash;
   bless($self);
   return $self;
   }
   my %test = ( abc => "30"); # for testing
   # pass hash as reference
   my $sumcheck = Sumcheck->new('test', 'test20', \%test ); 
   print"$sumcheck->{DEBUG}"; # for testing
   1; 
```

以上代码将解决您的问题。

# javascript - Android/ JavaScript - 在 URL 中传递数据

> ID：10396790
> 
> 赞同：0
> 
> 时间：2012-05-01T11:01:26.843
> 
> 标签：javascript, android, redirect, cordova

我正在使用以下内容通过我的 android phonegap 应用程序中的 url 传递一个值：

```
window.location.href = "results.html?score="+encodeURIComponent(myvalue); 
```

但是，当手机/模拟器固件更新到 4.03 时，这似乎不再起作用。有人可以请进一步建议。

谢谢，拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:04:24.417

删除那个中间 "..use this...window.location.href = "results.html?score=1.56"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:59:03.353

这是Android上的一个错误。你应该去给它加星标：

[https://code.google.com/p/android/issues/detail?id=17535](https://code.google.com/p/android/issues/detail?id=17535)

同时使用 localStorage.setItem()/getItem() 在页面之间传递值。

# powershell - 为什么没有得到服务 | get-member 多次显示成员？

> ID：10396792
> 
> 赞同：2
> 
> 时间：2012-05-01T11:01:30.710
> 
> 标签：powershell

菜鸟警报！我已经开始浏览 PowerShell 的介绍，例如[在这里](http://msdn.microsoft.com/en-us/library/bb613480%28v=vs.85%29.aspx)，并且无法很好地描述他们给出的早期示例的情况

```
get-service | get-member 
```

Get-Service 返回描述正在运行的服务的对象列表。没关系。Get-Member 显示有关对象上成员的信息。没关系。但是，是什么导致从 get-service 出来的对象*列表减少到 get-member 的单个对象呢？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:34:06.507

这就是 Get-Member cmdlet 的工作方式。它接受输入对象，当它是一个集合时，它显示该集合中每个不同类型的输出。否则这将是多余的信息而不是有用的输出格式，不是吗？并且因为 Get-Service 返回类型为“ServiceController”（并且仅属于该类型）的对象集合，所以您只能看到 Get-Member 的一个输出。

如果源集合包含不同类型的对象，您将看到 Get-Member 的多个输出。您可以尝试 cmdlet Get-ChildItems，它返回不同类型的文件和不同类型的目录。因此，当您键入`Get-ChildItem | Get-Member`（在同时具有目录和文件的目录中）时，您将看到两种类型的成员。

另一件事：当您想查看集合对象的成员时，您必须在集合前面加逗号。像这样：`,(Get-Service) | Get-Member`

# windows - 挂钩来自内核驱动程序的进程套接字调用

> ID：10396793
> 
> 赞同：1
> 
> 时间：2012-05-01T11:01:38.987
> 
> 标签：windows, sockets, hook, windows-kernel

谁能给我一个内核驱动程序的例子，它可以挂钩进程套接字调用（发送、接收等）并用我自己的函数来接收它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:26:46.997

您可以使用 TDI 过滤器在内核中执行此操作。看看这个： http: [//www.codemachine.com/article_tdi.html](http://www.codemachine.com/article_tdi.html)

但是 TDI 过滤器工作在网络框架的协议级别。所以它基于TCP/UDP协议等。

如果你想实现这个更低。您可以尝试使用 NDIS 过滤器。看看这个：http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff565492 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff565492(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T08:09:53.843

使用[Winsock Layer Service Providers](http://www.microsoft.com/msj/0599/layeredservice/layeredservice.aspx)可能会对您有所帮助。它允许您在用户模式下拦截 Winsock 调用。这使得开发更顺畅，应用程序更稳定。

# jquery - 在 flot 中的 plothover 上显示所选项目上所有系列的所有相应数据点

> ID：10396797
> 
> 赞同：0
> 
> 时间：2012-05-01T11:02:08.760
> 
> 标签：jquery, flot

我正在使用 flot jquery 图形库。查看在线示例，每当我将鼠标悬停在特定点上时，我都可以使用 plothover 来显示工具提示。但是我的图表有多个系列。我希望工具提示在选定的 x 坐标上显示所有系列的数据值。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:11:47.763

您可以在处理程序中使用该`item.dataIndex`属性。`plothover`

它是所选点的 X 坐标，您可以使用它从其他系列中获取 Y 坐标。

[演示](http://jsfiddle.net/5QSy8/1/ "演示")

# android - AutoCompleteTextView 清除 HTC 渴望 Z 上的用户输入

> ID：10396798
> 
> 赞同：1
> 
> 时间：2012-05-01T11:02:26.023
> 
> 标签：android, android-widget

我有一个带有许多 AutoCompleteTextView 输入字段的 android 应用程序

他们在我的手机上工作正常，

但是，当应用程序部署到带有物理键盘的手机时，当用户从一个 AutoCompleteTextView 到另一个 AutoCompleteTextView “选项卡”时，他们选择或输入的文本从视图中消失

但是数据仍然存在并持久化到底层数据库

为什么这只会发生在他们的手机上而不是一直发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:43:33.930

我在 HTC Desire HD（没有物理键盘）上看到了非常相似的事情。每当 AutoCompleteTextView 失去焦点时，文本似乎就会消失（但仍可通过 getText() 访问）。例如，相同的应用程序在三星 Galaxy SIII 上运行良好。

我认为这与使用样式/主题有关。就我而言，我定义了一个 android:textViewStyle，但没有定义 android:autoCompleteTextViewStyle。为后者添加一个明智的 android:textColor 解决了这个问题。您也可以使用[setTextColor](http://developer.android.com/reference/android/widget/TextView.html#setTextColor%28int%29)。

摘自我的styles.xml：

```
<style name="myapp" parent="@style/Theme.Sherlock.Light">
    <item name="android:textViewStyle">@style/my_text_view</item>
    <item name="android:autoCompleteTextViewStyle">@style/my_ac_text_view</item>
    [...]
</style>

<style name="my_text_view" parent="@android:style/Widget.TextView">
    <item name="android:textColor">@color/my_text_color</item>
</style>

<style name="my_ac_text_view" parent="android:style/Widget.AutoCompleteTextView">
    <item name="android:textColor">@color/my_text_color</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T21:45:01.770

我在使用 Desire HD 时遇到了同样的问题。我设置`android:textColor="#000000"`为`AutoCompleteTextView`，它在不修改任何样式的情况下解决了它。

# objective-c - 在 tableview 控制器的屏幕底部添加一个选择器视图

> ID：10396804
> 
> 赞同：0
> 
> 时间：2012-05-01T11:03:17.567
> 
> 标签：objective-c, ios5, uitableview

我有一个带有许多静态单元格的 tableview 控制器。当我点击一个字段时，我想显示一个 UIPicker 来选择一个值。

我的桌子很大，所以可以滚动。

如何在我的 tableviewController 上添加子视图以在 ipad 屏幕底部显示此 UIPicker，我的意思是不在 tableview 的底部。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:06:41.950

您应该从 viewDidAppear（而不是 viewDidDisplay）获得 CGRect。在那里 self.bounds （如果你有一个 UITableViewController 类在我们看不到你的代码时很难）只返回一个可见区域。然后你可以在那里画一个选择器。

编辑（用于评论请求）：我使用我的代码中的示例。在您的 viewController（任何 tableView、View ...）中，您有两种方法：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"%f,%f",self.view.bounds.size.width,self.view.bounds.size.height);

}

-(void)viewWillAppear:(BOOL)animated
{
    NSLog(@"%f,%f",self.view.bounds.size.width,self.view.bounds.size.height);
} 
```

我上面所做的是将相同的代码粘贴到两种方法中。我收到了什么：来自viewDidLoad：320.000000,460.000000来自viewDidAppear：320.000000,416.000000

这是因为我在顶部有导航栏。所以如果你在屏幕上有东西，你应该在 CGRect 中绘制任何你喜欢的东西（可能是百分比值）。

# django-templates - Django 模板中加载标签的范围是什么？

> ID：10396809
> 
> 赞同：4
> 
> 时间：2012-05-01T11:03:37.553
> 
> 标签：django-templates

在 django 模板系统中使用[load](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#load)加载的自定义标签的范围是什么，尤其是 wrt Template Inheritance？

如何在模板层次结构树中有效地加载相同的自定义标签。我在文档中找不到任何信息。任何指针都会很有用。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T18:36:24.197

我也想知道这一点，发现缺少文档，所以我决定自己做一些测试。

从 django 1.4 开始，答案是：**加载的自定义标签的范围仅限于它加载的文件（使用`{% load %}`），绝对没有别的**。

以下使用自定义标签的尝试均失败：

*   模板 A`extend`的模板 B：
    *   在 A 中加载并尝试在 B 中使用
    *   加载 A 并尝试在块内的 B 中使用
    *   在 A 中加载一个块并尝试在 B 中的同一块中使用，有或没有 super
*   模板 A`include`的模板 B：
    *   在 A 中加载并尝试在 B 中使用
    *   加载 A 并尝试使用显式传递到 B`with context`
*   模板 A 包括模板 B 使用 `{% ssi ... parsed %}
    *   在 A 中加载并尝试在 B 中使用

所以是的，这严格来说是每个文件的事情（这很好，因为它使得不可能从远处松鼠在神秘标签中 - 当然除非你故意通过弄乱全局加载器来这样做（你不应该这样做） )

# php - php中未定义常量的使用

> ID：10396812
> 
> 赞同：-3
> 
> 时间：2012-05-01T11:03:58.190
> 
> 标签：php

不知道更好的标题，但这是我的代码。

我有类用户在实例化时检查表单数据，但我收到以下错误/通知：

```
Notice: Use of undefined constant username - assumed 'username' in C:\Users\Jinxed\Desktop\WebTrgovina\app\m\Register\User.m.php on line 7

Notice: Use of undefined constant password - assumed 'password' in C:\Users\Jinxed\Desktop\WebTrgovina\app\m\Register\User.m.php on line 7

Notice: Use of undefined constant passwordc - assumed 'passwordc' in C:\Users\Jinxed\Desktop\WebTrgovina\app\m\Register\User.m.php on line 7

... and so on for every defined variable in user class. 
```

这是用户类：

```
class User {
    function __construct(){
        $test = 'blah';
        $username; $password; $passwordc; $name; $surname; $address;
        $this->checkInput(array(username=>20, password=>20, passwordc=>20, name=>20, surname=>40, address=>40));
    }
    //array(formName=>CharacterLimit)
    private function checkInput($fields){
        foreach($fields as $field=>$limit){
            if($_POST[$field]=='' || strlen($_POST[$field])>$limit) $this->error[] = "$field must be filled in, and it must be less than or $limit characters long.";
            else $this->{$field} = $_POST[$field];
        }
    }
} 
```

我不太明白出了什么问题，我首先尝试创建变量，然后从主程序调用 checkInput 方法，但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T11:05:10.890

您应该引用用作数组键的字符串：

```
$this->checkInput(array(
    'username'=>20,
    'password'=>20,
    'passwordc'=>20,
    'name'=>20,
    'surname'=>40,
    'address'=>40)); 
```

[文档](http://php.net/manual/en/language.constants.syntax.php)说：

> 如果您使用未定义的常量，PHP 假定您指的是常量本身的名称，就像您将其称为字符串 ( `CONSTANT` vs `"CONSTANT"`)。`E_NOTICE`发生这种情况时将发出级别错误。另请参阅有关[`$foo[bar]`](http://www.php.net/manual/en/language.types.array.php#language.types.array.foo-bar)错误原因的手册条目（除非您首先`define()` `bar`作为常数）。

# php - 带单选按钮的考勤系统

> ID：10396828
> 
> 赞同：-1
> 
> 时间：2012-05-01T11:05:32.673
> 
> 标签：php, radio-button

首先，我要提前感谢您花时间帮助我。我正在使用多个单选按钮为我的学校制作出勤表。学生和他们的班级都在数据库中，当老师选择班级时，假设班级 7，那么班级 7 的所有学生姓名将作为列表填充到表格中。每个学生的名字旁边都会有三个单选按钮可供选择。这些值将是 Accepted 、 Not accepted 和 Tardy 。为了填充学生，我使用如下 Java 函数：（在 W3school 中找到）第一页。假设populate.php

```
<html>
<head>
<script type="text/javascript">
function showUser(str)
{
if (str=="")
{
document.getElementById("txtHint").innerHTML="";
return;
} 
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="users" onchange="showUser(this.value)">
<option value="">Select a class:</option>
<?php
getClasses();

?>
</select>
</form>
<br />

</body>
</html> 
<?php 
```

// 而第二页将是offcourse users.php，如下所示：

```
$q=$_GET["q"];

$sql = "SELECT s.firstname, s.lastname, s.student_id, s.class_id, cl.class_id ". 
" FROM students s ". 
" INNER JOIN classes cl ON cl.class_id = s.class_id ".
" WHERE s.class_id =$q "; 

$result = mysql_query($sql);

print '<table border="2">'.
'<tr>'.
'<th>Firstname</th>'.
'<th>Lastname</th>'.
'<th>Kind of absence</th>'.

'</tr>';

while($row = mysql_fetch_array($result))
{

print  '<tr>'.
'<td>'.$row['firstname'].'</td>'.
'<td>'. $row['lastname'] . '</td>'.
'<td>'.
'<form method="post" action="getuser.php">'. 
'<input type="radio" name="attendance[]"        
value="1">Accepted</input>'. 
'<input type="radio" name="attendance[]" value="2"> Not  
accepted</input>'.
'<input type="radio" name="attendance[]" value="3"> Tardy</input>'.

'</form>'. 

'</td>'.

'</tr>';

}

print '<tr>'.
'<td>'.
'<form method="post" action="getuser.php">'. 
'<input type="submit" name="submit" value="Send"> &nbsp'.
'</form>'. 
'</td>'. 
```

// 我不知道在哪里放置提交按钮表单。

```
print '</table>'; 
```

//我正在尝试的是获取单选按钮的所有值并将它们插入数据库中。

```
if (isset($_REQUEST['submit']) && $_REQUEST['submit'] != "") {
if(isset($_POST['attendance']))
{

$atendance = $_POST['attendance'];

for ($i=0; $i<sizeof($attendance);$i++) { 
```

// 我不知道，但我知道我也必须在数组中收集 student_id，也许在这里

```
$sql2 = " INSERT INTO absence (student_id, attendans_id  ) ".
" VALUES (".$student_id.", '".$attendance[$i]."') ";
mysql_query($sql2) or die(mysql_error());

}    

}

} 
```

//所以亲爱的PHP爱好者......我知道我做错了，但我不知道如何解决这个
问题，如果你能帮助我，我会很感激。再次提前感谢您。将为每个学生选择三个单选按钮。我的意思是除了每个名字之外，还有三个可供选择的替代品……三个单选按钮，每个学生都有接受、不接受和迟到的价值。

?>

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-01T11:53:01.027

html代码

```
<form action="getStudents.php" method="POST >
<input type="radio" name="class" value="7" />Class 7</input>
<input type="radio" name="class" value="8" />Class 8</input>
<input type="submit" value="SUBMIT"/>
</form> 
```

PHP 代码

```
$class = $_POST['class'];
sql query = "select * from class where class.number={$class}";
<table >
<thead><th>First Name</th><th>Middle name</th><th>Last name</th></thead>
<tbody>
foreach ($query as $x)
{

 <tr><td>$x->firstnamel</td><td>$x->middlename</td><td>$x->lastname</td></tr>

}
 </tbody>
</table> 
```

# ios - Hierarchical master-detail app with xcode

> ID：10396835
> 
> 赞同：1
> 
> 时间：2012-05-01T11:06:26.887
> 
> 标签：ios, xcode, tableview, master-detail

I'm searching any tutorial or explication how to add a "level" in a table-view.

I'm using XCode 4.3.2\. I've created a Master-Detail App, and I did all what I should for a working application. But I have only one Level in my table view, and have absolutely no idea how to get a second level.

I searched a lot in Google and in the Apple documentation, but I haven't found anything..

My wish is to have the list, when you click on an object of the list, you go to the second level with a new list, and when you click on an object of the second list, it changes the Detail View.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:53:06.457

我认为您的意思是转到下一个视图控制器。你应该做的是使用委托方法`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath` （[链接到文档](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3adidSelectRowAtIndexPath%3a)）

这里可以新建一个tableViewController，例如

```
UITableViewController *newTable = [[UITableViewController alloc] initWithStyle:UITableViewStylePlain];
[self.navigationController pushViewController:newTable animated:YES]; 
```

但是，您想要做的（我猜）是向它发送应该显示的数据。因此，在您的 newTable tableviewcontroller 中，您应该创建一个新的 init 方法，该方法允许您发送所需的数据。例如一个数组。然后该类可以处理该数据并根据需要显示它。

我希望这回答了你的问题。

# google-chrome-extension - 这是 Google Chrome 扩展程序错误吗？

> ID：10396836
> 
> 赞同：0
> 
> 时间：2012-05-01T11:06:27.000
> 
> 标签：google-chrome-extension

我想制作一个需要`<script>`在网页上列出标签的 Google Chrome 扩展程序。所以我用一个只在那个特定网页上`manifest.json`的脚本做了一个。`"run_at": "document_start"`当我加载页面时，我注意到 的值`document.getElementsByTagName('script')`是一个包含正确元素的数组的值`<script>`，但它的长度为 0，我无法访问这些元素。

```
var scripts = document.getElementsByTagName('script');
console.log(scripts.length); // 0
console.log(scripts); // [<script type=​"text/​javascript">​...</script>​] with expected JavaScript in it 
```

某处肯定有问题。该`scripts`变量的长度为 0，但控制台显示它包含一个无法访问的元素。

![在此处输入图像描述](../Images/bdff83ebc0458d9cff8566ce3a96d008.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T13:48:53.750

从[文档](http://code.google.com/chrome/extensions/content_scripts.html)中：

> 在“document_start”的情况下，文件是在任何来自 css 的文件之后注入的，但**在构造任何其他 DOM**或运行任何其他脚本之前。

如果您需要访问 DOM，请将其更改`run_at`为`document_end`或保留为默认值`document_idle`。

# php - PHP ent_quotes exception for and

> ID：10396844
> 
> 赞同：1
> 
> 时间：2012-05-01T11:07:00.680
> 
> 标签：php, html-entities

i am trying to covert HTML to entities using PHP, but i need to except <br> and <a> tags.

here's an example of my code

```
 <?php 
  $string[0] = "<a href='http://hidd3n.tk'>Needs to stay</a> Filler text in between 
 <br><br> <script src='http://malicious.com/'></script> NEEDS to go";
  $string[1] = htmlentities($string[0], ENT_QUOTES, "UTF-8");
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:54:00.077

让我建议您使用更安全的[BBCode 。](http://php.net/manual/en/book.bbcode.php)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-01T11:35:36.397

**编辑：**

好的，我想出了一个办法。

使用此功能比以前的功能更安全：

```
function convert_myhtml_entities($string){
    $string = htmlentities($string, ENT_NOQUOTES, "UTF-8");
    $string = preg_replace('/&lt;\s*br\s*(\/|)\s*&gt;/U','<br$1>',$string);
    $string = preg_replace('/&lt;\s*a(.*)\s*&gt;/U','<a$1>',$string);
    $string = preg_replace('/&lt;\s*\/\s*a\s*&gt;/U','</a>',$string);
    return $string;
} 
```

现在它是用上面的字符串测试的。

# android - 在孩子的父母上调用 removeView()

> ID：10396849
> 
> 赞同：0
> 
> 时间：2012-05-01T11:07:21.847
> 
> 标签：android, forceclose

昨天我为安卓创建了一个台钟。为此，我创建了一个 RelativeLayout 来显示小时、分钟等......和一个菜单来显示关于和退出选项......嗯，一切正常，但是当我点击关于选项时问题出现了：它强制关闭和LogCat 显示了这一点：

`E/AndroidRuntime(14751): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.iamaner.T2Speech/com.iamaner.T2Speech.FrmAbout}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.`

所以我希望你能帮助我......我听说过这段代码，但我不知道把它放在哪里，以及如何，我认为这可以，但似乎不是

`final RelativeLayout fondo = (RelativeLayout)findViewById(R.id.your_layout);((RelativeLayout)fondo.getParent()).removeView(fondo); //scrollView.removeView(scrollChildLayout);`

这是我认为是问题的清单文件，我不知道：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TimeToSpeechActivity"
        android:label="@string/app_name"
        android:screenOrientation="landscape" 
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity android:name=".FrmAbout" />
</application> 
```

在这里，FrmAbout 代码：

```
 public class FrmAbout extends Activity {

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.frmabout);

    TextView txtVersion = (TextView)findViewById(R.id.Txtversion);
    TextView txtWarning = (TextView)findViewById(R.id.Txtwarning);
    TextView txtInstructions = (TextView)findViewById(R.id.Txtinstructions);
    TextView txtContact = (TextView)findViewById(R.id.Txtcontact);

    setContentView(txtVersion);
    setContentView(txtWarning);
    setContentView(txtInstructions);
    setContentView(txtContact);

     }
     } 
```

好的，解决了....问题是 setcontentview() 方法，删除它，现在它可以工作了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:39:16.283

从您的代码中我不明白为什么在调用 About 活动之前删除所有视图？这是您的任何要求吗，因为要启动新活动，不需要删除所有视图。您可以直接调用 startActivity(intent) 而无需从当前活动中删除视图。

请发布日志以帮助了解问题。

# asp.net-mvc - upgrading asp.net mvc apps

> ID：10396857
> 
> 赞同：0
> 
> 时间：2012-05-01T11:08:09.497
> 
> 标签：asp.net-mvc

Upgrading MVC apps done with VS 2010 has been the biggest issue for me. I have an application that I use to run various websites and I maintain and develop this application separetely then upgrade the sites based on it. A lot of things might change during development of a new version - new Views, new Controllers, stuff added into JS files, updated stylesheets etc.

I've searched around the web but nothing useful came up besides this [Haack's article](http://haacked.com/archive/2011/01/15/building-a-self-updating-site-using-nuget.aspx) but no source code is available.

I also tried making a Nuget package for the entire MVC app and while this works, it doesn't package up the resource files (an issue within Nuget itself) and my apps rely on those so until this is fixed I cannot use this method.

I checked how others do it and [this](http://our.umbraco.org/wiki/install-and-setup/upgrading-an-umbraco-installation) pretty much summarizes Umbraco's way and it's the same painful way of a dozen of steps like I do it now.

Do you have any good advice on it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:23:47.293

您没有指定目标操作系统，但我创建了本机包，即 .deb 用于 Ubuntu 服务器。

但是，这仍然意味着您需要指定所有文件、管理配置、升级数据库方案。但是，如果您在 CI 服务器上进行测试，它会变得更加可靠，并且您可以反复进行。这都是良好部署实践的一部分。我可以推荐《[持续交付](http://goo.gl/V9dqc)》这本书。

# python - django-如何使用参数进行更新，我可以像首先分配一样正常更新，然后是 Model.save

> ID：10396864
> 
> 赞同：1
> 
> 时间：2012-05-01T11:09:25.183
> 
> 标签：python, django

这是我的保存代码：

```
keys={"key1","key2"}
mydict={key: value for (key, value) in data.items() if key in keys}
m=Modelname(**mydict)
m.save() 
```

在这里，`data`就像一个键和值的数组。我不想全部保存，只保存`keys`. 上面的保存工作很酷，但是如何更新呢？资源相同，但现在的操作是更新。我知道一种方法：

```
m=Modelname.objects.get(name="ramesh")
m.college = "some other name to update"
m.save() 
```

现在它将使用新的学院名称进行更新。但是我怎样才能像使用保存一样直接执行此操作？`data`我指定包含键以及要更新的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:15:28.830

@San4ez 的建议是正确的。

请记住，`.save`即使您只想更改一列/字段，模型的方法也会将整行刷新/重写回数据库。

提供更好的性能和并发性的另一种方法是使用 Queryset 的`update`方法，它只更新选定的列。

因此，只要“名称”有一个`unique`约束（这样过滤器将只返回一个结果）。

```
Modelname.objects.filter(name="ramesh").update(**mydict) 
```

现在正在做一些工作，以便未来版本的 django 可以在该`.save`方法上提供此功能。[在这里](https://code.djangoproject.com/ticket/4102)查看更多

编辑：值得注意的是，如果您选择使用上述方法，django 不会发出任何 post/pre 信号，并且通常`.save`不会调用模型的方法，根据 django 的[文档](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#django.db.models.query.QuerySet.update)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:12:45.987

```
m = Modelname.objects.get(name="ramesh")
for key, value in data.items():
    if key in keys:
        setattr(m, key, value)
m.save() 
```

# hadoop - Sqoop Import is completed successfully. How to view these tables in Hive

> ID：10396868
> 
> 赞同：2
> 
> 时间：2012-05-01T11:09:33.993
> 
> 标签：hadoop, hive, sqoop

I am trying something on hadoop and its related things. For this, I have configured hadoop, hase, hive, sqoop in Ubuntu machine.

```
raghu@system4:~/sqoop$ bin/sqoop-import --connect jdbc:mysql://localhost:3306/mysql --username root --password password --table user --hive-import -m 1 
```

All goes fine, but when I enter hive command line and execute show tables, there are nothing. I am able to see that these tables are created in HDFS.

I have seen some options in Sqoop import - it can import to Hive/HDFS/HBase. When importing into Hive, it is indeed importing directly into HDFS. Then why Hive?

Where can I execute HiveQL to check the data.

From cloudera Support, I understood that I can Hue and check it. But, I think Hue is just an user interface to Hive.

Could someone help me here.

Thanks in advance,

Raghu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T03:17:23.943

你可以发布sqoop的输出吗？尝试使用 --verbose 选项。

这是我使用的命令示例，它确实直接导入到 Hive 表。

```
sqoop import --hive-overwrite --hive-drop-import-delims --warehouse-dir "/warehouse" --hive-table hive_users --connect jdbc:mysql://$MYSQL_HOST/$DATABASE_NAME --table users --username $MYSQL_USER --password $MYSQL_PASS --hive-import 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T17:51:38.120

我遇到了同样的问题。我能够通过将数据直接导入 HDFS 来解决/通过它，然后创建一个**外部**Hive 表以指向 HDFS 中的特定位置。这是一个对我有用的例子。

```
create external table test (
    sequencenumber int,
    recordkey int,
    linenumber int,
    type string)
    ROW FORMAT DELIMITED FIELDS TERMINATED BY '\054'
    location '/user/hdfs/testdata'; 
```

您需要将您的位置更改为在 HDFS 中保存数据的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-19T18:32:40.377

当我们在 sqoop 导入命令中没有给出任何数据库时，该表将在默认数据库中创建，其名称与 RDBMS 表名相同。您可以通过“--hive-database”指定要在hive中导入RDBMS表的数据库名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-26T16:18:15.263

不用每次都创建 Hive 表，可以使用 sqoop 的 create-hive-table 命令导入 hive 中的表结构。它将表作为 managed_table 导入，然后您可以通过将表属性更改为外部表然后添加分区来将该表转换为外部表。这将减少寻找正确数据类型的工作量。请注意会有精度变化

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-13T15:43:49.257

每当您使用带有 Hive 导入选项的 Sqoop 时，sqoop 直接连接相应数据库的元存储并获取相应表的元数据（表的架构），因此无需在 Hive 中创建表结构。此架构然后在与 Hive-import 选项一起使用时提供给 Hive。

所以 HDFS 上所有 sqoop 数据的输出将默认存储在默认目录 .ie /user/sqoop/tablename/part-m 文件中

使用 hive 导入选项，表将直接下载到默认仓库目录中，即

/user/hive/warehouse/tablename 命令：sudo -u hdfs hadoop fs -ls -R /user/ 这会递归地列出用户中的所有文件。

现在转到 Hive 并键入 show databases。如果只有默认数据库，则键入 show tables：记住 OK 是常见的默认系统输出，不是命令输出的一部分。

蜂巢>显示数据库；

好的

默认

耗时：0.172 秒

蜂巢>显示表格；

好的

类型

日志阿帕奇

电影

电影类型

电影分级

职业

用户

耗时：0.111 秒

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-08T13:13:21.443

试试这样的 sqoop 命令，它对我有用，直接创建 hive 表，你不需要每次都创建外部表

sqoop import --connect DB_HOST --username ***** --password ***** --query "select *from SCHEMA.TABLE where \$CONDITIONS"
--num-mappers 5 --split-by PRIMARY_KEY - -hive-import --hive-table HIVE_DB.HIVE_TABLE_NAME --target-dir SOME_DIR_NAME;

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-24T20:40:02.303

您正在使用的命令将数据导入 $HIVE_HOME 目录。如果未设置 HIVE_HOME 环境变量或指向错误的目录，您将无法看到导入的表。

查找 hive 主目录的最佳方法是使用 Hive QL SET 命令：

`hive -S -e 'SET' | grep warehouse.dir`

检索到 hive 主目录后，将`--hive-home <hive-home-dir>`选项附加到命令中。

另一个可能的原因是，在某些 Hive 设置中，元数据被缓存，您无法立即看到更改。在这种情况下，您需要使用`INVALIDATE METADATA;`命令刷新元数据缓存。

# php - 在 PHP 中合并两个数组

> ID：10396870
> 
> 赞同：0
> 
> 时间：2012-05-01T11:09:44.707
> 
> 标签：php

我有两个数组：

```
$a = array([0]=>1 [1]=>2 [2]=>3);
$b = array([0]=>a [1]=>b [2]=>c); 
```

我想像这样合并它们

```
$ab=array( [a]=>array([0]=>1 [1]=>2 [2]=>3) 
           [b]=>array([0]=>a [1]=>b [2]=>c)  ); 
```

这该怎么做 ？

我试过`array_merge()`了，但它没有按我的意愿工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T11:11:23.130

在这种情况下，你可以去：

```
$ab = array('a' => $a, 'b' => $b); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T11:15:55.507

您可以使用`compact()`方法：

```
$ab = compact('a', 'b'); 
```

where`'a'`和`'b'`will 用作数组键并作为变量名来分配值，所以它会做`array('a' => $a, 'b' => $b)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T11:11:43.867

你已经写了很多答案了。

```
$ab = array('a' => $a, 'b' => $b); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T11:12:06.353

```
$ab = array('a' => $a, 'b' => $b); 
```

将导致：

```
$ab['a'] = array([0] => 1, [1] => 2, [2] => 3);
$ab['b'] = array([0] => a, [1] => b, [2] => c); 
```

或者，`$ab = array($a, $b)`如果您不想要密钥，您也可以这样做（您的问题中不清楚 a 和 b 是字符串还是整数）。

# mysql - MySQL SUM() 与 COUNT() 在多列上

> ID：10396875
> 
> 赞同：2
> 
> 时间：2012-05-01T11:10:13.250
> 
> 标签：mysql, join, sum, aggregate-functions

我对 MySQL 还很陌生，仍在努力学习。如果这太基本了，请原谅我

我有 3 张桌子：

学生：

```
Student id|Student name| Gender|Parent id 
```

家长：

```
Parent id|Parent name|Parent Address|Parent Phone| 
```

和类：

```
Class id|Class Name|Class day 
```

和学生点名：

```
Student id|Class Id 
```

我正在尝试计算每个家长在学校的学生人数和每个学生的班级数量。

到目前为止，我设法更改查询以计算父名称和他们需要支付的活动数量：

```
SELECT CONCAT_WS(' ',P.Parent_title,P.Parent_fname,P.Parent_sname) AS 'Parent name',
COUNT(RC.Student_id) AS 'Number of Activities'
FROM Student S,Parent P,RollCall RC,Class C
WHERE S.Parent_id=P.Parent_id AND S.Student_id=RC.Student_id AND RC.Class_id=C.Class_id
GROUP BY S.Parent_id; 
```

但我不确定如何`SUM()`计算每个家长需要支付的总金额，比如每节课是否为 25 美元。我的教授暗示我需要使用该`CAST()`功能，但我不确定我应该在什么上使用它。我应该使用它的价值`COUNT()`吗？

再次感谢大家，你们帮了大忙。（我也会继续努力）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:57:34.253

除了你上面的评论，我认为这应该给你你所追求的（每个父母的注册儿童/班级总数）：

```
SELECT
  CONCAT_WS(' ', Parent_title, Parent_fname, Parent_sname) AS 'Parent name',
  COUNT(DISTINCT Student_id) AS 'Number of students',
  COUNT(DISTINCT Student_id, Class_id) AS 'Number of classes'
FROM
       Parent
  JOIN Student  USING (Parent_id)
  JOIN RollCall USING (Student_id)
  JOIN Class    USING (Class_id)
GROUP BY Parent_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:33:45.043

换一种说法，您要查找的内容似乎是对于每个家长，您都想知道他在学校有多少学生，以及这些学生总共有多少个班级。我建议使用 JOIN 语法来连接所需的 3 个表。

```
SELECT CONCAT_WS(' ',P.Parent_title,P.Parent_fname,P.Parent_sname) AS 'Parent name',
    count(distinct s.student_id) as num_students,
    count(*) as studentclasses 
FROM Parent p
    JOIN Student S
    ON S.parent_id = p.parent_id
        JOIN studentrollcall src
        on s.student_id = src.student_id
GROUP BY 'Parent name' 
```

# c# - 为什么当我从列表中检索 Datetime 属性值时它会发生变化？

> ID：10396876
> 
> 赞同：0
> 
> 时间：2012-05-01T11:10:36.493
> 
> 标签：c#, .net, datetime, ilist, icollection

我有一个名为 Job 的类，它封装了另一个名为的类的对象，该类`SelectedItem`具有`DateTime`名为`ItemDate`;

```
class Job
{
    private SelectedItem m_SelectedItem = null;

    public Job() { }

    public SelectedItem Item
    {
        get { return m_SelectedItem; }
        set { m_SelectedItem = value; }
    }
}

class SelectedItem
{
    DateTime m_ItemDate = default(DateTime);

    public SelectedItem() { }

    public DateTime ItemDate
    {
        get 
        { 
            return (m_ItemDate == default(DateTime))
                ? DateTime.Now
                : m_ItemDate; 
        }
        set { m_ItemDate = value; }
    }
} 
```

然后我有一个 JobManager 类，它有一个 Job 列表：JobQueue;

```
class JobManager
{
    private ICollection<Job> m_JobQueue = null;

    public JobManager() 
    {
        m_JobQueue = new List<Job>(); 
    }

    public ReadOnlyCollection<Job> JobQueue
    {
        get { return m_JobQueue.ToList().AsReadOnly(); }
    }

    private void CreateJob(SelectedItem item)
    {
        Job newJob = new Job();
        newJob.Item = item;
        m_JobQueue.Add(newJob);
    }

    public IList<Job> GetJobsFromQueue(int quantity, ICollection<Job> ignoreList)
    {
        return (from job in JobQueue
                select job).Skip(ignoreList.Count).Take(quantity).ToList();
    }

    public void CreateJobQueue(ICollection<SelectedItem> jobData)
    {
        for (long daysCount = 100; daysCount >= 1; daysCount--)
        {
            SelectedItem item = GetRandomItem(jobData.ToList()); //This just returns a random item from the specified jobData.
            item.ItemDate = DateTime.Today.AddDays((daysCount - 1));
            CreateJob(item);
        }
    }
} 
```

现在的问题是，当我从主例程调用 CreateJobQueue() 时，ItemDate 将根据 daysCount 值正确插入，并完美地填充 JobQueue。

但是当尝试通过调用GetJobsFromQueue() 方法来检索一组作业时，整个JobQueue 中的ItemDate 值被弄乱了（即与插入的不同）。

任何人都可以有线索吗？

# java - Java 的异步数据库 API

> ID：10396885
> 
> 赞同：5
> 
> 时间：2012-05-01T11:11:58.763
> 
> 标签：java, asynchronous, rdbms

由于使用数据库需要输入/输出，可能会花费无限的时间等等。想要一个非阻塞的异步 API 似乎很自然。有Java的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T11:23:00.153

我不认为这样的 API 存在，但有两个不同的东西：数据库访问库和许多在 java 中执行异步调用的方法。

*   您可以使用普通 JDBC 或任何其他简化数据库访问实现的更高级别工具来访问您的数据库。

*   您可以使用 JMS（如果您在 Java EE 环境中）进行异步调用，如果您在 JSE 环境中，则可以使用并发包中的队列和执行器。显然还有很多其他解决方案可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T13:04:32.697

没有像 JBDC 这样的标准 API 可以让您异步调用任何数据库。然而，有[一个谷歌项目](http://code.google.com/p/adbcj/)试图为 PostgreSQL 和 MySQL 做到这一点。

你也可以看看这个问题，它解决了类似的问题：

[可以异步调用jdbc吗？](https://stackoverflow.com/q/4087696/947357)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-15T12:03:43.740

对于[Couchbase](http://www.couchbase.com/)，我遇到了[Reactive Couchbase](http://reactivecouchbase.org/)，它声称可以做到这一点并且有一个[Java Wrapper](http://reactivecouchbase.org/java.html)。没试过，但链接中有几个例子。

# php - 当 404 通过 .htaccess 重定向时如何获取“$_POST”查询？

> ID：10396886
> 
> 赞同：6
> 
> 时间：2012-05-01T11:12:00.027
> 
> 标签：php, .htaccess

[这个问题与我之前的问题](https://stackoverflow.com/questions/10366139/how-to-pass-query-string-in-404-error-redirect-through-hacces)有些相关。使用的技巧`$_SERVER['REDIRECT_QUERY_STRING']`似乎只适用于`$_GET` 变量。

好吧，我有一个`index.php`文件可以处理所有`404 redirects`.

如果用户请求一个不存在的页面，例如`apple.php?item=23`，那么使用`$_SERVER['REDIRECT_QUERY_STRING']`I 可以获取`$_GET`变量`item=23`，但如果变量不存在`$_GET`但`$_POST`则`$_SERVER['REDIRECT_QUERY_STRING']`不起作用。

`$_POST`当我将变量重定向到`index.php`使用以下 .htaccess 设置时，如何获取变量

> 错误文档 404 /index.php

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T12:34:42.820

在这里检查答案：[http ://www.brainonfire.net/blog/apache-pitfall-errordocument-post/](http://www.brainonfire.net/blog/apache-pitfall-errordocument-post/)

我用这个解决了我的问题。

* * *

**或者把它放在你的 .htaccess 文件中：**

```
    重写引擎开启
    RewriteBase /

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    重写规则。/yourErrorDocument.php [L]

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T11:36:33.813

使用以下指令：

```
ErrorDocument 404 /index.php 
```

apache 网络服务器执行内部重定向到新位置。内部意味着，客户端（浏览器）不会更改其地址栏中的 URL，因为该重定向未传达给浏览器。

因为是重定向，所以 POST 请求变成了 GET 请求。

您可以通过查看以下两个`$_SERVER`变量来看到这一点：

```
$_SERVER['REDIRECT_REQUEST_METHOD'] # POST
$_SERVER['REQUEST_METHOD'] # GET 
```

所以简而言之，您不能使用该[`ErrorDocument`指令](http://httpd.apache.org/docs/current/mod/core.html#errordocument)对 HTTP POST 请求进行 URL 重写。

您需要为此使用该[`mod_rewrite`模块](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)或创建自己的 apache 处理程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-28T14:38:38.153

使用`FallbackResource`指令而不是`ErrorDocument`Apache 的指令：它可以 [在 Apache 网站上使用 FallbackResource](https://httpd.apache.org/docs/current/mod/mod_dir.html#fallbackresource)

例子：

```
FallbackResource /404.php 
```

# database-design - MongoDB 无模式设计 - 优势还是混乱？

> ID：10396889
> 
> 赞同：0
> 
> 时间：2012-05-01T11:12:11.900
> 
> 标签：database-design, mongodb

我一直在开发 EAV（实体属性值）Web 应用程序。

我想使用 mongo 的主要原因是它是无模式的，即很容易找到具有“颜色”属性的汽车而没有不必要的字段。

这是要实现的文档结构的简短示例：

来自计算机类别的商品：

```
 {
     name: "Core i7",
     category: 1,
     properties:{
       price:300,
       vendor: "Intel",
       ...
     }
    } 
```

同时，汽车类别中的商品具有自己的一组属性：

```
 {
     name: "Audi Q7",
     category: 2,
     properties:{
       price:30000,
       color:"red",
       hp:200
       ...
     } 
```

}

但是，如果我有 100 个类别，我的数据库将存储 100 个不同的文档（按其结构）。MongoDB 文档说，文档可以是无模式的，但最好的做法是拥有或多或少相同的文档结构。

我的问题是：拥有大量不同结构的文档是不是很糟糕？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T11:19:43.773

“好”或“坏”是非常主观的。如果它带来的好处多于伤害，那很好。否则，它可能不是。

由于 MongoDB 是无模式的，因此至少在这里您*可以*拥有大量具有不同结构的文档（与关系数据库相反）。这个事实本身是中性的。***您对它的使用将决定它对您的应用程序的***好坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:49:49.963

我想说，对于您的“产品”目录之类的东西，每个文档有不同的结构是完全合理的。实际上，您根本没有不同的顶级结构，只是每个项目的属性在数组中都有不同的元素。

# php - Zend 选择问题

> ID：10396890
> 
> 赞同：0
> 
> 时间：2012-05-01T11:12:26.377
> 
> 标签：php, zend-framework, zend-db, zend-db-table

我遇到了 zend 数据库表库的问题；

抱歉，我已经修复了上一个问题，但在函数中得到了另一个问题

`Message: Method "fetchAll" does not exist and was not trapped in __call()`

这是我正在使用的脚本

```
 //setIntegrityCheck to false to allow joins
        $roomModel = new self();

        $select = $roomModel->select(Zend_Db_Table::SELECT_WITH_FROM_PART)
                ->setIntegrityCheck(FALSE);

        //performs join aliasing table room_type to t
        $select->join(array('t' => 'room_types'), 't.room_type_id = room.room_type_id AND num_beds> '.$number_beds);
        ////performs join aliasing table room_status to s
        $select->join(array('s' => 'room_statuses'), 's.room_status_id = room.room_status_id');

        $select->join(array('chin' => 'checkin'), 'chin.checkin_date IS NOT BETWEEN `'.$checkin.'` AND `'.$checkout.'`');

        $select->join(array('chout' => 'checkout'), 'chout.checkout_date IS NOT BETWEEN `'.$checkin.'` AND `'.$checkout.'`');

        $result = $this->fetchAll($select);

        return $result; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:18:50.660

尝试 $roomModel 而不是 $this

# tooltip - 您能否在其他 Dojo wijit（例如 ValidationTextBoxes）上使用工具提示？

> ID：10396896
> 
> 赞同：0
> 
> 时间：2012-05-01T11:13:43.793
> 
> 标签：tooltip, dojo, wijit

（[接着你能在 Dojo wijit 模板中定义工具提示吗？](https://stackoverflow.com/questions/10396441/can-you-defined-tooltips-in-dojo-wijit-template)）

如果用户悬停或将注意力集中在 Dojo wijit 上一段时间，我希望能够弹出一些帮助文本。我知道这些wijit 带有一些提示行为，例如当它们为空时或出现验证错误时，但我希望无论控件的内容如何都能提示。例如：

```
<input name="tooltipTesting"
  data-dojo-attach-point="tooltipMe" 
  data-dojo-type="dijit.form.ValidationTextBox"
  data-dojo-props="placeHolder:'Type Something',
  required:true,
  value: '${blah}'" />
<div data-dojo-type="dijit.Tooltip" data-dojo-props="connectId:'tooltipMe'">
  Got to love hovering over links. Sometimes you a get a free tooltip.
</div> 
```

工具提示的编程定义适用于像锚点这样的普通 HTML 元素，但我所做的似乎没有将工具提示与其他 Dojo 控件相关联。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:51:18.340

您可以使用以编程方式将小部件连接到工具提示

```
tooltip.addTarget(widget.domNode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:03:46.057

`dijit.Tooltip`连接到 DOM 节点，而不是 Dijit 小部件（即 javascript 对象），但您始终可以使用小部件对其根 DOM 节点的引用，可通过`widget.domNode`.

您的标记也存在问题：`dojo-dojo-attach-point`未将 an 分配`id`给小部件（您通过 Tooltip 引用`connectedId`）。为此定义`id`属性，则其自身和根 DOM 节点将具有相同的 id。请注意，您不能在小部件模板中使用硬编码的 ID。`<input id="tooltipMe">``ValidationTextBox``ValidationTextBox`

# xml - Magento：如何将块分配给添加到 CMS 页面的父块

> ID：10396901
> 
> 赞同：2
> 
> 时间：2012-05-01T11:14:26.460
> 
> 标签：xml, magento, content-management-system, block, magento-1.6

我希望你能理解我的问题！！

下面的问题与在 Magento CMS 页面中分配和引用块有关。

## 问题

我有一个名为主页的 cms 页面。这个页面的内容是

```
{{block type='core/template' name='homepage_html' template='page/html/homepage.phtml'}} 
```

在 page/html/homepage.phtml 我有一些基本的 html 用于我的网站主页。

**-> 到目前为止一切正常。**

我想从我的 aw_blog 模块中提取我的最新帖子。如果我将此代码添加到 cms.xml，我有一个文件 aw_blog/homepage_posts.phtml 可以完美运行

```
<cms_index_index translate="label">
    <reference name="content">
        <block type="blog/blog" name="home_blog" template="aw_blog/homepage_posts.phtml"/>
    </reference>
</cms_index_index> 
```

这样做的问题是它在我的 page/html/homepage.phtml 文件的内容下添加了帖子。

我的 page/html/homepage.phtml 中有这一行，我希望在其中显示帖子列表

```
<?php echo $this->getChildHtml('home_blog') ?> 
```

并尝试引用 homepage_html 代替我的 cms.xml 文件中的内容

```
<cms_index_index translate="label">
    <reference name="homepage_html">
        <block type="blog/blog" name="home_blog" template="aw_blog/homepage_posts.phtml"/>
    </reference>
</cms_index_index> 
```

但没有快乐！

## 问题

所以我的问题是，有没有办法将最新的帖子块分配给 homepage_html 块，以便使用 $this->getChildHtml() 方法绘制最新的帖子。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:21:09.933

您应该尝试在“page/html/homepage.phtm”中调用您的孩子，如下所示：

```
<?php echo $this->getChildHtml('home_blog') ?> 
```

# ruby-on-rails - RoR I18n - 我可以将 yml 翻译文件与视图配对吗？

> ID：10396903
> 
> 赞同：0
> 
> 时间：2012-05-01T11:14:33.383
> 
> 标签：ruby-on-rails, internationalization

我正在寻找一种方法来执行以下操作之一：

*   使视图使用与视图具有相同名称和相对路径的 .yml 语言环境文件（例如，当呈现**/app/views/thingie/blah.html.erb时，它会使用****/config/locales/thingie/blah进行翻译/.yml** )
*   从视图中声明它应该使用哪个翻译文件/目录。

有什么好的解决方案吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:17:46.847

有一个更短的语法。假设您的控制器是“用户”，并且您正在呈现“索引”操作。您可以使用密钥`.nameofthekey`，它将查找`user.index.nameofthekey`。在我看来，这就是你想要的。否则，您可以使用本地化模板。

[您可以在http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)阅读更多相关信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:58:09.263

您可以从翻译中渲染文本或 html，而不是直接在控制器中从视图中渲染，例如

```
class PagesController < ApplicationController
  def home
    render :html => t(:'views.pages.home.body.html')
  end
end 
```

这里根本不涉及视图，对于静态内容页面之类的东西非常有用:)

# c++ - C ++将文本文件读入数组

> ID：10396906
> 
> 赞同：2
> 
> 时间：2012-05-01T11:14:36.660
> 
> 标签：c++, arrays, file-io

我正在尝试将包含 20 个名称的文本文件读入字符串数组，然后将每个字符串打印到屏幕上。

```
string monsters[20];
ifstream inData;
inData.open("names.txt");
for (int i=0;i<monsters->size();i++){
    inData >> monsters[i];
    cout << monsters[i] << endl;
}inData.close(); 
```

但是，当我运行此代码时，会执行循环，但不会将任何内容读入数组。我哪里出错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T11:20:00.090

您的 for 循环终止条件是错误的：

```
i < monsters->size() 
```

这实际上会在数组中的第一个字符串上调用 size()，因为它位于第一个索引处。(monsters 等价于 monsters[0]) 因为默认为空，所以返回 0，循环永远不会运行。

请记住，C++ 没有用于数组的 size() 运算符。您应该使用常数 20 作为终止条件。

```
i < 20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T11:21:58.297

`monsters->size()`是`0`在运行时。将该行更改为`for (int i=0;i<20;i++)`.

```
 string monsters[20];
    ifstream inData;
    inData.open("names.txt");
    for (int i=0;i<20;i++){
        inData >> monsters[i];
        cout << monsters[i] << endl;
    }inData.close(); 
```

# php - 会话在 MAMP 上不起作用

> ID：10396907
> 
> 赞同：3
> 
> 时间：2012-05-01T11:14:36.850
> 
> 标签：php, session, wamp, mamp

我正在使用 MAMP，但我的会话有问题。我的代码在 WAMP 上运行良好，但在 MAMP 上不起作用，我不知道为什么。我查看了 phpinfo，但 MAMP 和 WAMP 之间的会话是相同的。

PHP 日志文件： `[01-May-2012 12:18:28] PHP Warning: session_start() [<a href='function.session- start'>function.session-start</a>]: Cannot send session cookie - headers already sent by (output started at /Applications/MAMP/htdocs/Website/index.php:7) in /Applications/MAMP/htdocs/Website/header.php on line 2 [01-May-2012 12:18:28] PHP Warning: session_start() [<a href='function.session-start'>function.session-start</a>]: Cannot send session cache limiter - headers already sent (output started at /Applications/MAMP/htdocs/Website/index.php:7) in /Applications/MAMP/htdocs/Website/header.php on line 2`

阿帕奇日志文件： `[Tue May 01 12:03:29 2012] [notice] Digest: generating secret for digest authentication ... [Tue May 01 12:03:29 2012] [notice] Digest: done [Tue May 01 12:03:29 2012] [notice] Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.6 configured -- resuming normal operations [Tue May 01 12:04:11 2012] [notice] caught SIGTERM, shutting down [Tue May 01 12:04:24 2012] [notice] Digest: generating secret for digest authentication ... [Tue May 01 12:04:24 2012] [notice] Digest: done [Tue May 01 12:04:24 2012] [notice] Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.6 configured -- resuming normal operations [Tue May 01 12:05:11 2012] [error] [client 127.0.0.1] client denied by server configuration: /Applications/MAMP/htdocs/.DS_Store`

为什么他们不工作？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:27:34.760

看这里：

```
 headers already sent by (output started at /Applications/MAMP/htdocs/Website/index.php:7) 
```

在该行中，在您调用之前会生成一些输出`session_start()`。如果您生成任何输出（即使只是换行符或其他内容，空格，您命名它），则会发送一个标头，并且您不能为`session_start()`.

我怀疑它与您的 *AMP 有什么特别的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T19:56:45.410

我也在使用 MAMP for Mac。

我收到了与您相同的错误消息。

我通过以下方式解决了我的问题：

而不是将您的 php 放在文档的开头。把 PHP 放在前面（doctype）

I did this and the code worked.

Also, make sure the (php) tag is the first in the document. Leave no white spaces.

GL

# ios - 如何根据每个用户存储应用内购买以供离线使用

> ID：10396910
> 
> 赞同：5
> 
> 时间：2012-05-01T11:14:45.787
> 
> 标签：ios, in-app-purchase, keychain, storekit, entitlements

似乎 iOS 上的钥匙串是按应用而不是按用户存储数据的。

因此，如果我将有关应用内购买的信息存储在钥匙串中，则无论当前登录的是哪个 Apple-id，这些产品都将在设备上保持可用。

我可能需要网络访问并执行恢复以了解哪些产品应该可用，但执行非用户启动的恢复似乎是一种不好的做法。此外，该应用程序应在离线时正常运行。

我的问题是：我如何保护应用内购买不被购买它们的 Apple-id 以外的用户使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:44:01.643

您需要为此组织用户身份验证 - 让您的用户在您的服务中创建帐户，并在您的应用程序中为他们提供登录和注销的能力。应用程序启动后，它必须检查哪个用户登录并为该用户提供应用内购买。

# facebook-graph-api - Facebook Graph Batch，只需要顶级 access_token

> ID：10396911
> 
> 赞同：1
> 
> 时间：2012-05-01T11:14:53.147
> 
> 标签：facebook-graph-api, facebook-access-token

我正在使用 Facebook Graph Batch API 向注册人的 FB 墙发送一条消息/不同消息。我正在为每个用户定义一个 access_token ，以及必须的顶级 access_token （根据[doc](https://developers.facebook.com/docs/reference/api/batch/)用作后备）。对于后者，我只使用批处理中列出的用户的 access_token。

问题是唯一收到消息的用户是我用作顶级/后备access_token的access_token的用户。其他用户收到“(#210) 用户不可见”错误消息。我在我的应用程序角色中使用 3 个测试用户设置。

知道这里出了什么问题吗？

这是我的代码（python），用于向所有注册人生成一条消息：

```
 for soc_reg in self.registrants:
        batch_item = {
            "method" : "POST",
            "relative_url" : FACEBOOK_URL_FEED % (soc_reg['uid']),
            "body" : Helper.toURL(publishParams),
            "access_token" : soc_reg['access_token'],
        }
        batch.append(batch_item)
    params = {
        "access_token" : self.registrants[0]['access_token'], # used as fallback
        "batch" : Helper.toJSON(batch),
    } 
```

为“params”产生以下值：

```
{"access_token": "XYZ", "batch": "[{\"body\": \"caption=&message=is+not+a+test.%0D%0AWe%27re+just+rappin%27+to+the+beat%21&place=146270405429726&link=&description=\", \"access_token\": \"XYZ\", \"method\": \"POST\", \"relative_url\": \"/100003720771245/feed\"}, {\"body\": \"caption=&message=is+not+a+test.%0D%0AWe%27re+just+rappin%27+to+the+beat%21&place=146270405429726&link=&description=\", \"access_token\": \"ZYX\", \"method\": \"POST\", \"relative_url\": \"/100003671211957/feed\"}, {\"body\": \"caption=&message=is+not+a+test.%0D%0AWe%27re+just+rappin%27+to+the+beat%21&place=146270405429726&link=&description=\", \"access_token\": \"YZX\", \"method\": \"POST\", \"relative_url\": \"/100003683601909/feed\"}]"} 
```

因此，唯一接收消息的用户是此处定义的用户： "access_token" : self.registrants[0]['access_token'] 当我调整索引时，我可以确定接收消息的用户；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:57:22.170

好的，似乎文档和 API 本身不对应： [https ://developers.facebook.com/bugs/212455918831996](https://developers.facebook.com/bugs/212455918831996)

文档说：relative_url => 'alias', 'body' => '{"access_token" => "..."}'

但似乎只有这种方式有效：'relative_url' => 'alias?access_token=...'

FB 似乎已经确认了这个错误并将其放在“愿望清单”上，到目前为止，后者是要走的路，至少对我有用 :)

# jquery - 如何在 jQuery 对话框标题中显示俄语文本

> ID：10396913
> 
> 赞同：1
> 
> 时间：2012-05-01T11:15:04.370
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

如何在 jQuery 对话框标题中显示俄语文本？就我而言，它只显示了这个 - ?????????

有人知道为什么吗？

调用 showAjaxDialog：

```
$('.ajaxDialog').click(function () {
    ShowAjaxDialog(true, 'Привет Мир', 330, 300, this.href);
    return false;
}); 
```

AjaxDialog 代码：

```
function ShowAjaxDialog(isModal, title, width, height, url) {   
    // show a spinner or something via css
    var dialog = $('<div style="display:none" class="ajaxDialogLoading"></div>').appendTo('body');

    // open the dialog
    dialog.dialog({
        // add a close listener to prevent adding multiple divs to the document
        close: function (event, ui) {
            // remove div with all data and events
            dialog.remove();
        },
        width: width,
        height:height,
        modal: isModal,
        title: title
    });

    // load remote content
    dialog.load(
        url,
        //{}, // omit this param object to issue a GET request instead a POST request, otherwise you may provide post parameters within the object
        function (responseText, textStatus, XMLHttpRequest) {
            // remove the loading class
            dialog.removeClass('ajaxDialogLoading');
        }
    );      
    //prevent the browser to follow the link
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:22:21.520

**演示：http:** [//jsfiddle.net/mhLc5/](http://jsfiddle.net/mhLc5/)

**链接：http:** [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

**代码：**

```
var $Dialog_div;

function fnOpenDialog() {
    $Dialog_div = $('<div id=\'ThisDialog\'>Hello</div>').prependTo('body');

    $Dialog_div = $('#ThisDialog').dialog({
        autoOpen: true,
        draggable: true,
        resizable: true,
        title: 'Dialog put russian text: Jquery скалы, скалы и StackOverflow',
        modal: true,
        stack: true,
        height: ($(window).height() * 0.95),
        width: ($(window).width() * 0.9),
        buttons: {
            'OK': function() {
                $Dialog_div.dialog('close');
            }    
        }
    });  
}

$('#ClickMe').click(fnOpenDialog);​ 
```

**HTML：**

```
<!-- This is more than likely an Adobe issue where it thinks it should be in the front
     all the time, no matter what. However, it is very annoying that you can't open
     a dialog over a PDF.-->

<body>
    <div id='ClickMe'>Click here!</div>
    <br/>
    <div></div>
    <br/>
</body> 
```

# facebook - 一旦我的操作获得批准，并且应用程序仍处于沙盒模式，我的操作是否会向所有用户公开？

> ID：10396916
> 
> 赞同：0
> 
> 时间：2012-05-01T11:15:17.797
> 
> 标签：facebook, action, facebook-opengraph, sandbox, public

我的 Open Graph 操作现已获得批准。由于该应用程序尚未准备好发布，我想知道现在使用该应用程序发布的操作现在是否对应用程序的非开发人员、测试人员和管理员公开？或者，因为应用程序处于沙盒模式，这些操作是否仍然隐藏？我在文档的任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:38:43.787

沙盒模式使您的应用程序不会为非所有者查看者加载。所以它所做的一切都将是不可见的，包括 OG 动作。

但与往常一样，尝试一下并告诉我。

# c++ - 为什么 shared_ptr 可以使用“受保护的访问权限”进行访问

> ID：10396917
> 
> 赞同：6
> 
> 时间：2012-05-01T11:15:21.380
> 
> 标签：c++, shared-ptr

我用shared_ptr做了一些测试，我想不出下面的问题。我刚开始学习boost库。有人可以告诉我原因吗？

```
#include <boost\shared_ptr.hpp>
#include <iostream>

class A 
{
public:  
    virtual void sing()
    {
        std::cout<<"A";
    }
protected:  virtual ~A() {};

};

class B : public A 
{
public:  
    virtual void sing() 
    {   
        std::cout << "B"; 
    }
    virtual ~B() {};
};

int foo()
{   
    boost::shared_ptr<A> pa(new B());
    pa->sing();

    delete static_cast<B*>(pa.get());

    delete pa.get(); //this line has a problem error C2248: “A::~A”: can't access protected memmber(declared in class“A")   
    return 0;
}

int main()
{
    foo();
    return 0;
} 
```

但是当该行被注释掉时，它可以被编译。当然，这并不意味着 shared_ptr 将删除内部维护的指针，就像我所做的那样。`pa.get()`返回的指针和内部维护的指针有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:23:25.123

我相信这`delete`是在销毁`shared_ptr`传递给构造函数的指针类型的过程中调用的。看看这里的构造函数：

[http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/shared_ptr.htm#constructors](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/shared_ptr.htm#constructors)

因此，当您`pa`超出范围时，`B::~B( )`将调用而不是所包含类型的析构函数 - `A::~A`（这是不可能的，因为它已声明`protected`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T13:56:24.387

实际上，它比这更复杂一点：背后的机器`shared_ptr`相当复杂。

首先，让我们证明没有授予以下特定访问权限`shared_ptr`：

```
int main() {
    A* a = new B();
    std::shared_ptr<A> p(a); // expected-error
} 
```

这将导致错误，因为 的析构函数`A`不可访问。有趣的是，错误发生在构造点，这是一个线索......

那么，背后的魔力是`shared_ptr`什么？

在内部，a`shared_ptr`保留的不仅仅是简单的指针和引用计数。A`shared_ptr`是用 a 构建的`deleter`，负责破坏对象的实例。设计真正闪耀的地方在于它`deleter`在构造函数中被实例化，因此可能比裸`shared_ptr`类型知道更多的类型信息。

一个简化的演示：

```
template <typename T>
struct shared_holder {
    typedef void (*Disposer)(T*);

    explicit shared_holder_base(T* t, Disposer d): _ptr(t), _disposer(d) {}

    void dispose() { _disposer(_ptr); _ptr = 0; }

    T* _ptr;
    Disposer _disposer;
};

template <typename U, typename T>
void dispose(T* t) { delete static_cast<U*>(t); }

template <typename T>
class shared_ptr {
    typedef shared_holder<T> holder;
public:
    shared_ptr(): _holder(0), _ptr(0) {}

    template <typename U>
    explicit shared_ptr(U* u):
        _holder(new holder(u, dispose<U, T>)), _ptr(_holder->_ptr) {}

private:
    holder* _holder;
    T* _ptr;
}; 
```

关键的见解是*处理*程序是从构造函数已知的静态类型实例化的；这就是为什么：

*   `shared_ptr<A>(new B)`作品
*   `A* a = new B; shared_ptr<A>(a)`才不是

您可以阅读 Boost 标头，其背后的机制`shared_ptr`非常有趣。

*作为读者的练习，为什么`shared_ptr<T>`会有一个`_ptr`成员？*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T12:29:25.620

当你有：

```
boost::shared_ptr<A> pa(new B()); 
```

...您正在调用`boost::shared_ptr`构造函数并正在处理两个模板参数：

1.  **shared_ptr 模板类型`T`**（`A`在您的情况下）；

    `get()``T*`当您尝试时返回：

    ```
    delete pa.get(); 
    ```

    ...您试图`~A()`访问只有`A`s 孩子可以访问的内容，因此出现错误。

    在以下行中：

    ```
     delete static_cast<B*>(pa.get()); 
    ```

    ...您正在向下转换`A*`并`B*`调用删除，`B*`从而调用`~B()`您有权访问的。（`~B()`总是要求`~A()`被`~A()`声明为`virtual`）

2.  **shared_ptr 构造函数参数模板类型`Y`**（`B`在您的情况下）具有`Y*`必须可转换为的要求（在您的情况下，`T*`您可以向上 `B*`转换`A*`为`B`继承`A`）。

    `~shared_ptr()`调用（`delete`在您的情况下；可以访问并调用它），这就是超出范围时会发生的情况（这就是访问基类受保护的析构函数的方式，这是您最初的问题）。`Y*``B*``~B()``~A()``pa``shared_ptr`

`boost::shared_ptr`在内部保持一个指针。创建时`boost::shared_ptr`，您将向其构造函数传递一个**SINGLE**指针，该指针可以被视为/转换为指向这两种模板参数类型中的任何一种的**指针**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T11:37:23.903

我相信这是因为 boost 模板的定义将 sharedpointer 声明为模板实例化中 <Class T> 类的朋友。

这是我从引导共享指针头文件中复制的片段。

```
// Tasteless as this may seem, making all members public allows member templates
// to work in the absence of member template friends. (Matthew Langston)

#ifndef BOOST_NO_MEMBER_TEMPLATE_FRIENDS

private:

    template<class Y> friend class shared_ptr;
    template<class Y> friend class weak_ptr;

#endif 
```

# javascript - 如何使用网络服务在地图上放置标记

> ID：10396918
> 
> 赞同：0
> 
> 时间：2012-05-01T11:15:22.260
> 
> 标签：javascript, google-maps-api-3, xml-serialization, sencha-touch, extjs

我是 Sencha Touch2.0 的新手

我想通过使用在 js 中调用的 xml 文件然后在 Index.html 文件中调用这个 js 来显示一个标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:48:49.487

[在sencha中读取xml](http://docs.sencha.com/touch/1-1/#!/api/Ext.data.XmlReader)

[谷歌地图 API 教程](https://developers.google.com/maps/documentation/javascript/tutorial)

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
  var myOptions = {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      title:"Hello World!"
  }); 
```

如果您的 xml 文件中没有 latlng，您可以使用地理编码 api 将地址转换为 lat [GeoCoding Api](https://developers.google.com/maps/documentation/javascript/geocoding)

# python - 定义实例变量时的最佳实践

> ID：10396920
> 
> 赞同：17
> 
> 时间：2012-05-01T11:15:31.793
> 
> 标签：python, variables, constructor

我对 Python 相当陌生，并且对以下课程有疑问：

```
class Configuration:
    def __init__(self):
        parser = SafeConfigParser()
        try:
            if parser.read(CONFIG_FILE) is None:
                raise IOError('Cannot open configuration file')
        except IOError, error:
            sys.exit(error)
        else:
            self.__parser = parser
            self.fileName = CONFIG_FILE

    def get_section(self):
        p = self.__parser
        result = []
        for s in p.sections():
            result.append('{0}'.format(s))
        return result

    def get_info(self, config_section):
        p = self.__parser
        self.section = config_section
        self.url = p.get(config_section, 'url')
        self.imgexpr = p.get(config_section, 'imgexpr')
        self.imgattr1 = p.get(config_section, 'imgattr1')
        self.imgattr2 = p.get(config_section, 'imgattr2')
        self.destination = p.get(config_section, 'destination')
        self.createzip = p.get(config_section, 'createzip')
        self.pagesnumber = p.get(config_section, 'pagesnumber') 
```

在此示例中，可以在另一个函数中添加更多实例变量`get_info`，还是在构造函数中定义所有实例变量是最佳实践？如果我到处定义新的实例变量，难道不会导致意大利面条代码吗？

编辑：我将此代码与一个简单的图像刮板一起使用。通过`get_section`我返回配置文件中的所有部分，然后遍历它们以访问我从中抓取图像的每个站点。对于每次迭代，我都会调用以`get_section`获取配置文件中每个部分的配置设置。如果有人能想出另一种方法，那就太好了！谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T11:50:23.580

我肯定会在`__init__`. 不这样做会导致复杂性增加和潜在的意外副作用。

为了提供 David Hall 在访问方面的另一种观点，这是来自[Google Python style guide](http://google-styleguide.googlecode.com/svn/trunk/pyguide.html)。

> 访问控制：
> 
> 如果访问器函数很简单，您应该使用公共变量而不是访问器函数，以避免 Python 中函数调用的额外成本。添加更多功能时，您可以使用属性来保持语法一致
> 
> 另一方面，如果访问更复杂，或者访问变量的成本很高，则应该使用函数调用（遵循命名准则），例如 get_foo() 和 set_foo()。如果过去的行为允许通过属性进行访问，则不要将新的访问器函数绑定到该属性。任何仍试图通过旧方法访问变量的代码都应该明显中断，以便让他们意识到复杂性的变化。

[来自 PEP8](http://www.python.org/dev/peps/pep-0008/#method-names-and-instance-variables)

> 对于简单的公共数据属性，最好只公开属性名称，而不需要复杂的访问器/修改器方法。请记住，如果您发现简单的数据属性需要增加功能行为，Python 提供了一条通往未来增强的简单途径。在这种情况下，使用属性将功能实现隐藏在简单的数据属性访问语法之后。
> 
> 注 1：属性仅适用于新式类。
> 
> 注意 2：尽量保持功能行为无副作用，尽管缓存等副作用通常没问题。
> 
> 注 3：避免将属性用于计算量大的操作；属性表示法使调用者相信访问（相对）便宜。

Python isn't java/C#, and it has very strong ideas about how code should look and be written. If you are coding in python, it makes sense to make it look and feel like python. Other people will be able to understand your code more easily and you'll be able to understand other python code better as well.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T11:28:37.570

我更倾向于在构造函数中设置所有实例变量，而不是`get_info()`让类处于有效状态所需的函数。

使用仅通过调用诸如您的方法来实例化的公共实例变量，您`get_info()`可以创建一个使用起来有点雷区的类。

如果您担心某些配置值并不总是需要并且计算起来很昂贵（我猜这就是为什么您有 get_info()，允许延迟执行），那么我会考虑将该配置子集重构为第二类或引入返回值的[属性](http://docs.python.org/library/functions.html#property)或函数。

通过属性或获取样式函数，您可以鼓励类的使用者通过定义的接口并改进封装¹。

一旦你对实例变量进行了封装，你就可以选择做更多的事情，而不仅仅是抛出一个`NameError`异常——你也许可以调用`get_info()`你自己，或者抛出一个自定义异常。

* * *

^(1.)你不能用 Python 提供 100% 的封装，因为由前导双下划线表示的私有实例变量只有按照约定是私有的

# sql - 如何使用脚本将数据从一个数据库导入另一个数据库？

> ID：10396922
> 
> 赞同：2
> 
> 时间：2012-05-01T11:15:34.863
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个8 GB的数据库*DocData大小。*我想将三个表从*DocData*移动到另一个数据库*DocData2*，而不使用这些表中的导入导出向导和标识列。我想使用脚本移动它并使用标识列复制数据。其中一张表的大小是 7 GB。

我正在使用这个查询

```
CREATE TABLE [DocData2].[dbo].DocumentPages AS 
SELECT  * FROM [DocData].[dbo].[DocumentPages] 
```

但我收到以下错误。

```
Incorrect syntax near the keyword 'SELECT'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T11:25:02.250

从波尔

```
SET IDENTITY_INSERT [ database_name . [ schema_name ] . ] table  ON 
```

在这里插入

```
SET IDENTITY_INSERT [ database_name . [ schema_name ] . ] table  OFF 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T11:47:32.523

您需要运行以下语句。

*假设*：

*   您的两个数据库都存在于同一台服务器上。
*   `DocumentPages`目标数据库中不存在您的目标表`DocData2`

*脚本*：

```
SELECT  *   
INTO    [DocData2].[dbo].[DocumentPages] 
FROM    [DocData].[dbo].[DocumentPages] 
```

*你的问题*：

您不能使用问题中的脚本创建表。[**CREATE TABLE**](http://msdn.microsoft.com/en-us/library/aa258255%28v=sql.80%29.aspx)没有任何选项可以接受 SELECT 输出以这种方式创建新表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T12:14:24.007

请使用此脚本。

```
SELECT * INTO [DocData2].[dbo].DocumentPages FROM [DocData].[dbo].[DocumentPages] 
```

[***阅读此处以了解有关 SELECT INTO 的更多信息***](http://www.sqlusa.com/bestpractices/select-into/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T12:02:05.060

如果两个数据库都在同一台服务器上，您只能这样做。如果它们位于不同的服务器上，则需要使用其他技术，例如链接服务器或 SSIS 包。

话虽如此，您需要先创建 [DocData2].[dbo].DocumentPages 表，然后将数据从一个表复制到另一个表

```
insert into [DocData2].[dbo].[DocumentPages]
select * from  [DocData].[dbo].[DocumentPages] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T13:54:18.280

如果你想要一个精确的副本，然后为表编写脚本（右键单击对象浏览器中的表，你将看到创建脚本的选项）及其所有索引、约束等（你可能需要单独编写索引) 然后通过运行脚本创建表，然后像@Diego 所做的那样编写一个插入语句（仅指定列，插入应该指定列）。

当然，如果您正确地管理您的数据库，您将已经在源代码管理中拥有该脚本。至少现在开始使用这些脚本执行此操作。

# c# - C# 安全 - LinkDemand 或 SecurityCritical 或任何解释？

> ID：10396924
> 
> 赞同：1
> 
> 时间：2012-05-01T11:15:49.247
> 
> 标签：c#, .net, security, fxcop, code-access-security

我已对我的应用程序运行安全检查，并收到以下警告：

> “Parser.GenerateJeffpReport(string)”调用具有 LinkDemand 的“Process.Start()”。通过进行此调用，“Process.Start()”间接暴露给用户代码。查看以下可能公开绕过安全保护的方法的调用堆栈：

我google了一下，发现了这个问题：

[这个安全警告是什么意思（.Net Process 类）？](https://stackoverflow.com/questions/1147220/what-does-this-security-warning-mean-net-process-class)

我尝试按照推荐的答案来做，即将我的方法设置为：

```
[PermissionSetAttribute(SecurityAction.LinkDemand, Name="FullTrust")] 
```

但是，我收到以下警告：

> Microsoft.Security：“Parser.ParseJeff(string)”受“PermissionSetAttribute”的 LinkDemand 保护。在 2 级安全规则集中，应该通过安全关键来保护它。删除 LinkDemand 并标记“Parser.ParseJeff(string)”安全关键。

我该怎么办？无论如何，这一切的意义是什么？为什么这是一个安全问题？我根本没有在这个主题上找到有用的微软文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T12:00:29.740

代替

```
[PermissionSetAttribute(SecurityAction.LinkDemand, Name="FullTrust")] 
```

和

[[安全关键](http://msdn.microsoft.com/en-us/library/system.security.securitycriticalattribute.aspx)]

> SecurityCriticalAttribute 相当于完全信任的链接需求。标有 SecurityCriticalAttribute 的类型或成员只能由完全受信任的代码调用；它不必要求特定的权限。它不能被部分受信任的代码调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T19:39:07.800

您也可以使用`[PermissionSetAttribute(SecurityAction.Demand, Name="FullTrust")]`.

# php - UTF-8 到 UTF-16BE

> ID：10396927
> 
> 赞同：1
> 
> 时间：2012-05-01T11:16:19.747
> 
> 标签：php, encoding

我在 php 中保存了一条记录“فحص الرسالة العربية”，该记录始终保存为：

```
&#1601;&#1581;&#1589; &#1575;&#1604;&#1585;&#1587;&#1575;&#1604;&#1577; &#1575;&#1604;&#1593;&#1585;&#1576;&#1610;&#1577; 
```

我想在检索它时将其转换为 UTF-16BE 字符，因此我使用了一个返回的函数：

```
002600230031003600300031003b002600230031003500380031003b002600230031003500380039003b0020002600230031003500370035003b002600230031003600300034003b002600230031003500380035003b002600230031003500380037003b002600230031003500370035003b002600230031003600300034003b002600230031003500370037003b0020002600230031003500370035003b002600230031003600300034003b002600230031003500390033003b002600230031003500380035003b002600230031003500370036003b002600230031003600310030003b002600230031003500370037003b 
```

这是 m 用于转换从数据库检索到的字符串的函数

```
function convertCharsn($string) {
    $in = '';
    $out = iconv('UTF-8', 'UTF-16BE', $string);
    for($i=0; $i<strlen($out); $i++) {
      $in .= sprintf("%02X", ord($out[$i]));
    }
    return $in;
} 
```

但是当我在下面的 url 中输入相同的字符时，它显示的字符与我的字符串不同。 [http://www.routesms.com/downloads/onlineunicode.asp](http://www.routesms.com/downloads/onlineunicode.asp)

返回：

```
0641062D063500200627064406310633062706440629002006270644063906310628064A0629 
```

我希望我的字符串在上面的 url 中被转换时被转换。我的数据库排序规则是 utf-8_general_ci

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:08:58.507

基本上，您需要首先从 HTML 实体中解码这些字符。只需使用[`html_entity_decode()`](http://us.php.net/html_entity_decode)

```
$rawChars = html_entity_decode($string, ENT_QUOTES | ENT_HTML401, 'UTF-8');

convertCharsn($rawChars); 
```

否则，您只是对实体进行编码。您可以看到UTF16 中的原样，`&`并且是. 因此您可以看到您发布的上述转码中的重复序列。所以先解码它，你应该被设置...`0026``#``0023``00260023`

# android - eclipse内置的Android应用程序无法在手机上运行

> ID：10396929
> 
> 赞同：0
> 
> 时间：2012-05-01T11:16:21.353
> 
> 标签：android, eclipse, apk

我已经构建了一个在模拟器上运行良好的应用程序，并说它可以在手机上安装。但是，在尝试运行它时会弹出一个错误，提示“您的手机上没有安装应用程序”。因此，我尝试在手机上通过 eclipse 运行该应用程序，但在控制台中出现此错误：

```
[2012-05-01 12:00:02 - MAD Assignment] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.mad.assignment/.MainMenu }
[2012-05-01 12:00:02 - MAD Assignment] ActivityManager: java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.mad.assignment/.MainMenu } from null (pid=8204, uid=2000) requires null 
```

从在其他地方寻找解决方案听起来好像它可能是清单文件中的问题，所以这是我的：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mad.assignment"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" 
     >
    <activity
        android:name="MainMenu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Diary"></activity>
    <activity android:name=".Info"></activity>
    <activity android:name=".MapMenu"></activity>
    <activity android:name=".RSSMenu"></activity>
    <activity android:name=".RSSFeedView"></activity>
    <activity android:name=".MainMenu"></activity>
    <activity android:name=".RSSDetailed"></activity>
    <activity android:name=".DiarySchedule"></activity>
    <activity android:name=".DiaryAddEntry"></activity>
    <activity android:name=".DiaryEditEntry"></activity>
    <activity android:name=".DiaryDetailed"></activity>
    <activity android:name=".RSSDetailed"></activity>
    <uses-library android:name="com.google.android.maps"/>
    <activity android:name=".MapMain"></activity>
    <activity android:name=".RSSFeedView"></activity>
    <activity android:name=".MapWhatsNearPreferences"></activity>
    <activity android:name=".RoutePath"></activity>
</application> 
```

这个安全异常指向什么的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:20:03.023

您看到的 java.lang.SecurityException 是因为您可能输入了两个指向同一活动的条目。删除第二个，你应该很高兴。

您可以在清单中以不同的属性声明该活动 2 次，例如：

```
 <activity android:name=".MainMenu"> </activity> 
```

和

```
 <activity android:name=".MainMenu" android:label="@string/app_name"> 
     <intent-filter> 
         <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
     </intent-filter>
 </activity> 
```

您应该从清单中删除不需要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:20:12.510

在应用程序下设置`android:debuggable="true"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:23:05.840

您有一个名为

```
<activity android:name=".MainMenu"></activity> 
```

这是启动器的 Intent'ed 活动。但是您允许的活动是“Mainmenu”。去掉它。将权限等添加到现在空白的“.Mainmenu”中。

IE，

“活动”组应该是

```
 <activity
        android:name=".MainMenu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Diary"></activity>
    <activity android:name=".Info"></activity>
    <activity android:name=".MapMenu"></activity>
    <activity android:name=".RSSMenu"></activity>
    <activity android:name=".DiarySchedule"></activity>
    <activity android:name=".DiaryAddEntry"></activity>
    <activity android:name=".DiaryEditEntry"></activity>
    <activity android:name=".DiaryDetailed"></activity>
    <activity android:name=".RSSDetailed"></activity>
    <uses-library android:name="com.google.android.maps"/>
    <activity android:name=".MapMain"></activity>
    <activity android:name=".RSSFeedView"></activity>
    <activity android:name=".MapWhatsNearPreferences"></activity>
    <activity android:name=".RoutePath"></activity> 
```

并删除重复项。为什么要添加这么多重复的“活动”？

# css - 为什么我的桌子风格被全局风格所掩盖？

> ID：10396930
> 
> 赞同：0
> 
> 时间：2012-05-01T11:16:23.637
> 
> 标签：css

在 main.html 中，我有这个

```
<style type="text/css">
#hor-my-bundles
{
    font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
    font-size: 12px;
    background: #fff;
    margin: 45px;
    width: 480px;
    border-collapse: collapse;
    text-align: left;
}
#hor-my-bundles th
{
    font-size: 14px;
    font-weight: bold;
    color: #039;
    padding: 10px 8px;
    border-bottom: 2px solid #6678b1;
}
#hor-my-bundles td
{
    border-bottom: 1px solid #ccc;
    color: #669;
    padding: 6px 8px;
}
#hor-my-bundles tbody tr:hover td
{
    color: #009;
}
</style>
    <table id="hor-my-bundles">
        <thead>
            <tr>
                <th scope="col"> Name </th>
                 ...and a few more.....
            </tr>
        </thead>
        <tbody>
            <tr>
               ...body stuff
            </tr>
        </tbody>
    </table> 
```

我启用了全局 css，它具有以下内容：

```
table{}
th{ background-color: #BBB; padding-left: 10px; padding-right: 10px;}
td, th{ }
td{}
tr:hover{ background-color: #dfd; } 
```

但我想既然我已经用不同的cs id指定了我的表，`<td>`等等也应该遵循这些。相反，我`<th>`在这种情况下遵循全局风格。

为什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:23:43.523

您尚未`background-color`为`#hor-my-bundles th, #hor-my-bundles tbody tr:hover td`样式指定 a。这就是我能看到的所有会影响风格的东西。

它正确采用了此示例中的样式[http://jsfiddle.net/sN8ed/2/](http://jsfiddle.net/sN8ed/2/)

# jquery-plugins - jquery.i18n.properties-1.0.9.js 中的国际化问题

> ID：10396931
> 
> 赞同：2
> 
> 时间：2012-05-01T11:16:29.217
> 
> 标签：jquery-plugins

我正在使用[jquery.i18n.properties-1.0.9.js](http://code.google.com/p/jquery-i18n-properties/downloads/detail?name=jquery.i18n.properties-1.0.9.js&can=2&q=)进行国际化。在 fr 文化文件中，我有一个实体

```
TaskString = tâche 
```

在我的 html 中，我有这样的代码。j

```
 $.i18n.properties( {
            name: 'Strings',
            path: 'bundle/',
            mode: 'both',
            language: 'fr',
        } );
    $( document ).ready( function ()
       {
            $( '#Div1' ).html( TaskString );

     } ); 
```

我需要的是想用法语显示“任务”，比如“tâche”

但它显示这样![在此处输入图像描述](../Images/119fef600a9357f8041b6b50bf3df45c.png)

如何显示这样的法语文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:26:05.163

尝试从 tâche 更改为`t&#226;che`FR 属性文件。

# javascript - 如果没有“link_to”类型的助手，我如何调用 ajax？

> ID：10396933
> 
> 赞同：0
> 
> 时间：2012-05-01T11:17:22.467
> 
> 标签：javascript, jquery, ruby-on-rails, css, ajax

我有一个像这样的块：

```
 - competitors.each do |competitor|
        %dl
          %dt
            ...
          %dd
            %span{:id => "#{competitor['watchers']}"}= "#{((competitor['watchers']*100.0)/30000).round.to_f}%" 
```

请注意，它会生成动态 CSS id，每个块 cicle 一个，结果 html 是不同 dd --> span --> id number 的列表：

```
<dl>
  <dt>
    ...
    <dd>
      <span id="774">93.0%</span>
    </dd>
  </dt>
</dl>
<dl>
  <dt>
    ... 
    <dd>
      <span id="13774">46.0%</span>
    </dd>
  </dt>
</dl> 
```

我想“动态地”将“自定义 CSS 片段”关联到不同的 CSS id（#13774 #774），例如：

```
:javascript
  $("##{competitor['watchers']}").css({ width: "#{((competitor['watchers']*100)/30000)}px" }); 
```

如何在没有 link_to 类型的助手的情况下调用 ajax（在 Rails 3.2.3 ':remote => true' 中）？

直到现在我尝试从内部块调用 JS，如：

```
 - competitors.each do |competitor|
        :javascript
          $("##{competitor['watchers']}").css({ width: "#{((competitor['watchers']*100)/30000)}px" });
        %dl
          %dt
            ...
          %dd
            %span{:id => "#{competitor['watchers']}"}= "#{((competitor['watchers']*100.0)/30000).round.to_f}%" 
```

但它不起作用，代码永远不会注入到 DOM 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:28:29.630

看起来您正在尝试显示某种条形图，在这种情况下，我会建议以下内容（我假设您使用的是 jQuery，因为这就是标记的内容）：

更改您的块以向每个跨度添加一个唯一的类。这会在以后为您带来风格上的好处。

```
%dd
        %span{:id => "#{competitor['watchers']}", :class => "progress-bar"}= "#{((competitor['watchers']*100.0)/30000).round.to_f}%" 
```

然后你应该能够在页面底部使用一些 jQuery 来选择每一个，并对其进行一些基本的数学运算：

```
$('span.progress-bar').each(function(index,element){
    var num = $(element).attr('id'); // get element id
    var width = parseInt(num * 100 / 30000); // do your math, then get the integer value for width
    $(element).css('width',width+'px'); // set width
} 
```

我知道您正在寻找 ajax，但除非我遗漏了什么，否则这应该接近于解决您记录的问题。

# eclipse - 如何将eclipse热键与control + s结合起来？

> ID：10396934
> 
> 赞同：0
> 
> 时间：2012-05-01T11:17:36.683
> 
> 标签：eclipse

我想将`control`+与`s`一些 eclipse 热键结合起来，比如`control`++ 、`shift`++等，因为它对我的工作很方便。`f``control``shift``o`

你能对此提出一些建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:41:25.593

I guess you want to format code and organize imports on save. Have a look at [Save Actions](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/editor/ref-preferences-save-actions.htm) which let you do exactly that.

# wolfram-mathematica - 将 Who 与基于符号的测试一起使用

> ID：10396940
> 
> 赞同：1
> 
> 时间：2012-05-01T11:18:54.023
> 
> 标签：wolfram-mathematica

我在使用`Which`. 我正在 Mathematica 中创建一个函数，其中一个参数 ( `arg2`) 应该是`Symbol`(`None`或者`Full`)。我希望函数的输出像这样依赖`arg2`，但它不起作用：

```
testFunction[arg1_,arg2_:None]:=Which[arg2==None,arg1*2,arg2==Full,arg1*3] 
```

if `arg2`is`None`似乎没有问题，但是 for `arg2`is `Full`，`testFunction`只是返回自己。当使用实数或整数而不是符号`None`和`Full`时，`testFunction`功能正常。

我在测试中使用符号是否犯了错误？`Which`或者在一起使用和符号时我应该注意其他任何“规则”吗？

我已经在这个网站和其他网站上搜索了答案，但找不到任何答案。Mathematica 帮助文件也没有为我提供答案。我看到的所有地方都没有使用女巫符号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T11:28:52.187

解决方案是使用`SameQ`（即运算符`===`）而不是`Equal`（运算符`==`）。

[`Equal`](http://reference.wolfram.com/mathematica/ref/Equal.html)是为了数学平等。 `a==b`不计算，这意味着 Mathematica 不知道这些变量是否具有相同的值。 `1==2`评估为`False`而`a==a`评估为`True`。

[`SameQ`](http://reference.wolfram.com/mathematica/ref/SameQ.html)是为了结构平等，并且总是评估为`True`或`False`。`True`仅当被比较的表达式在结构上相等时才会计算结果。它不会尝试测试数学相等性，因此 eg`0 === 0.0`会给出`False`，因为这两个表达式在结构上是不同的（一个是精确数字，另一个是机器精度）。

在这里，您需要结构上的平等，因为您需要`Full === None`评估`False`（同时`Full == None`保持未评估）。只需使用

```
testFunction[arg1_,arg2_:None]:=Which[arg2===None,arg1*2,arg2===Full,arg1*3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T22:49:56.823

虽然使用`SameQ`是一种解决方案，但我认为有更好的方法来构建它。 `Switch`是最直接的替换：

```
f[arg1_, arg2_: None] := Switch[arg2, None, arg1*2, Full, arg1*3]

f[7]
f[7, None]
f[7, Full] 
```

> ```
> 14
> 14
> 21 
> ```

通常最好避免使用Which/Switch等并使用模式，例如：

```
ClearAll[f]

f[arg1_, Full] := arg1*3
f[arg1_, None | PatternSequence[]] := arg1*2

f[7]
f[7, None]
f[7, Full] 
```

> ```
> 14
> 14
> 21 
> ```

# printing - 你能在 wxWidgets 中打印一个 wxWindow 吗？

> ID：10396953
> 
> 赞同：0
> 
> 时间：2012-05-01T11:20:24.347
> 
> 标签：printing, wxwidgets

我正在使用 wxWidgets 为 Windows 开发一个程序。我正在尝试实现一个打印功能，它将一个 wxPanel（或 wxWindow）打印到打印机。wxWidgets 有一个很好的方便的类，如果你绘制到 DC 中。

有没有办法让 wxWidgets 在 DC 中绘制 wxPanel 或 wxWindow？我尝试使用 HandlePrintClient（响应 WM_PRINTCLIENT）函数，但这只是绘制背景。我还尝试创建一个打印机 DC 并通过与 HandlePrint 类似的功能发送它，但 wxWidget 的东西似乎与 BeginPrint 紧密耦合。

有什么方法可以做我想做的事吗？也许已经编写了一个类，它将附加 wxScrolledWindow 并将其发送到打印机？该窗口将具有其他控件和窗口，例如其上的 wxGrid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T19:57:16.290

最后，将您想要的内容绘制到 printDC 中可能更容易。但是，需要注意的是，您可以使用 BLIT 将面板中显示的内容复制到 PrintDC 中，而无需重新绘制所有内容。

因此，在您覆盖 wxPrintout::OnPrintPage 时，您可以编写如下内容：

```
 wxClientDC frameDC( wxGetApp().GetTopWindow() );
    GetDC()->StretchBlit(0,0,5000,5000,
        &frameDC, 0, 0, 500,500 ); 
```

这会将您的应用程序顶层窗口中显示的所有内容复制到printerDC中。

问题是打印预览窗口在弹出时往往会抹掉您的顶级框架内容。如果你有一个大显示器和一个小的应用程序窗口，你可以安排一些东西，这样它们就不会重叠

```
void MyFrame::OnPrint(wxCommandEvent& )
{
    wxPrintPreview *preview = new wxPrintPreview(new MyPrintout(this), new MyPrintout(this));
    wxPreviewFrame *frame = new wxPreviewFrame(preview, this,
                                               "Demo Print Preview",
                                               wxPoint(600, 100),      // move preview window out of the way
                                               wxSize(500, 500));
    //frame->Centre(wxBOTH);
    frame->Initialize();
    frame->Show(true); 
```

更好的方法是在弹出打印预览之前将帧显示 BLIT 到 memoryDC，然后从 MemoryDC BLIT 到打印机DC。

这些方面的东西：

```
void MyFrame::OnPrint(wxCommandEvent& )
{
    // save the display before it is clobbered by the print preview

    static wxMemoryDC memDC;
    static wxBitmap bitmap(500,500);
    memDC.SelectObject( bitmap );
    wxClientDC frameDC( wxGetApp().GetTopWindow() );
    memDC.Blit(0,0,5000,5000,
            &frameDC, 0, 0 );

    wxPrintPreview *preview = new wxPrintPreview(new MyPrintout(memDC), new MyPrintout(memDC));
    wxPreviewFrame *frame = new wxPreviewFrame(preview, this,
                                               "Demo Print Preview",
                                               wxPoint(600, 100),      // move preview window out of the way
                                               wxSize(500, 500));
    frame->Centre(wxBOTH);
    frame->Initialize();
    frame->Show(true);

} 
```

接着

```
class MyPrintout : public wxPrintout
{
    wxMemoryDC & myMemDC;
public:
    MyPrintout( wxMemoryDC & memDC)
        : myMemDC( memDC )
    {
    }
    bool OnPrintPage( int PageNum )
    {
        // copy saved dispay to printer DC

        GetDC()->StretchBlit(0,0,5000,5000,
            &myMemDC, 0, 0, 500,500 );

        return true;
    }

}; 
```

# jquery-mobile - 带有文本搜索的 jQuery Mobile 选项选择列表？

> ID：10396954
> 
> 赞同：1
> 
> 时间：2012-05-01T11:20:27.407
> 
> 标签：jquery-mobile

我有一个选择选项列表，我正在使用 jQuery Mobile。我的列表很长，所以我希望用户可以选择通过输入文本来搜索列表。

当您专注于列表时，是否有一些本地/jQuery Mobile 方式添加文本搜索？如果不是，我猜相反，我需要在输入上创建一个指向带有过滤器列表的新页面的链接，并使用 javascript 使用所选值填充“输入”。

[http://jquerymobile.com/test/docs/lists/lists-search.html](http://jquerymobile.com/test/docs/lists/lists-search.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:13:07.270

简短的回答是否定的，除非您想发疯地编辑 JQM 代码以将该功能添加到选择框中。话虽如此，我也遇到了这个问题（选择菜单太长了），这就是我所做的：

在一种情况下，除了选择菜单之外，我还使用了一个自动完成搜索框（有结果下拉列表：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)），其中填充了选择菜单中的数据。这样，用户可以选择是使用选择菜单还是搜索。

对于第二种情况，我允许用户搜索某些内容，然后打开一个菜单（实际上是一个对话框插件），其中只包含与他们搜索的内容相匹配的结果。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T17:23:12.113

就个人而言，我无法让 jqueryui 自动完成功能与 jQuery Mobile 一起正常工作。但是这个来自 Andy Matthews 的自动完成代码运行良好：

```
 http://www.andymatthews.net/code/autocomplete/ 
```

与输入文本字段一起使用，它为用户提供了一种输入几个字符并查看要选择的选项列表的方法。

# maps - 谷歌地理编码与没有国家类型的 latlang 结果

> ID：10396958
> 
> 赞同：0
> 
> 时间：2012-05-01T11:21:29.977
> 
> 标签：maps

我正在尝试做一些棘手的事情：1）我使用带有 LatLng 的地理编码器，我有一个城市（比如说亚特兰大，乔治亚州）2）我得到结果，我走过它们以保存所有类型的 LatLng（即：街道、城市、县、州、国家）；3) 出于某种原因 - Google 未在结果中提供 County = USA ["types"]

任何人都可以帮忙吗？结果如下所示： [http ://maps.googleapis.com/maps/api/geocode/json?latlng=33.5997220,-117.6994440&v=2&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=33.5997220,-117.6994440&v=2&sensor=false)

注意到有结果：

1.  “类型”：[“街道地址”]
2.  “类型”：[“地方”，“政治”]
3.  “类型”：[“邮政编码”]
4.  “类型”：[“administrative_area_level_2”，“政治”]
5.  “类型”：[“administrative_area_level_1”，“政治”]

但没有国家

提前致谢， 尼桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:55:48.347

我认为国家名称*已*返回，您只是忽略了它。当我查看您提到的 URL 时，我看到了这个片段：

```
{
           "long_name" : "United States",
           "short_name" : "US",
           "types" : [ "country", "political" ]
        },
        { 
```

# css - 覆盖 CSS 样式

> ID：10396959
> 
> 赞同：0
> 
> 时间：2012-05-01T11:21:39.627
> 
> 标签：css

我在第三方 css 文件中有一个 CSS：

```
.gallery li > a{
    background-image:url(images/loading.gif);
} 
```

我想覆盖它，以便使用不同的背景图像。我通过在 a 标签本身上使用内联样式来实现这一点，这很有效，但我不喜欢内联样式。

我不想更改第三方 css 文件，以防有一天我们使用 css 文件的更新版本并丢失我们的更改。我在 a 标签本身上添加了一个新的 CSS 类，并将我的新背景图像 css 放在与新 css 类关联的新 css 文件中。由于某种原因，这不起作用。有人知道如何解决这个问题吗？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:25:04.863

指定比旧的优先级更高的 css 选择器应该会有所帮助

```
.gallery li > a.my-custom-class {
    background-image:url(myCustomImage);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:41:29.687

在您的新 CSS 文件中创建您的自定义类并使用这个可能会对您有所帮助

```
.myClass {background-image:(image/path.png) !important;} 
```

# c# - 在动态 linq 查询中使用变量

> ID：10396960
> 
> 赞同：3
> 
> 时间：2012-05-01T11:21:54.720
> 
> 标签：c#, linq, dynamic-linq

我正在使用 Linq to Entities 并添加了`using System.Linq.Dynamic;` 我的目标的 using stmt 是将`whereClause`变量传递到 emailList 查询（见屏幕截图）。

有什么想法吗？

![错误消息详细信息](../Images/a7656129a34a5f1818a702365c70669d.png)

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++
使用@Michael建议后，我得到了它与以下内容一起使用：

HTML（注意我将字段值放在“值”属性中。）：

```
<asp:CheckBoxList ID="_checkboxGroups" runat="Server">
                            <asp:ListItem Text="Sid Dickens Lovers" Value="SidDickens_TF" Selected="False" />
                            <asp:ListItem Text="Rosamond Lover" Value="Rosamond_TF" Selected="false" />
                            <asp:ListItem Text="Wine and Cheese Lovers" Value="WineAndCheese_TF" Selected="false" />
                            <asp:ListItem Text="Good Clients" Value="IntDesign_TF" Selected="false" />
                            <asp:ListItem Text="Vendors" Value="Vendor_TF" Selected="false" />
                        </asp:CheckBoxList> 
```

后面的代码：

```
// determine # of items in asp:CheckBoxList
        var groupCount = _checkboxGroups.Items.Count;

        var conditions = new List<string>();

        for (int i = 0; i < groupCount; i++)
        {
            if (_checkboxGroups.Items[i].Selected)
            {
                conditions.Add(_checkboxGroups.Items[i].Value.ToString() + " == true");
            }
        }

        string whereClause = string.Join(" OR ", conditions.ToArray());

        ElanEntities3 db = new ElanEntities3();

        var emailList = (from c in db.vEmailListViewforSendings
                         orderby c.Email
                         select c).AsQueryable();

        emailList = emailList.Where(whereClause);

       _listViewClients.DataSource = emailList; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:32:39.597

您需要将与参数匹配的对象传递给[IQueryable.Where(predicate)](http://msdn.microsoft.com/en-us/library/bb535040.aspx)

所以`whereClause`必须是这种类型的对象：

```
Expression<Func<TSource, bool>> 
```

* * *

因为你是在 ORing 你的 where 子句而不是 ANDing 它们，你将不得不构建一个大的 where 子句。

假设您的数据对象是 OBJ 类型并且它具有布尔属性 P0 和 P1：

```
bool filterP0 = _checkboxGroups[0].Selected;
bool filterP1 = _checkboxGroups[1].Selected;

Expression<Func<OBJ, bool>> predicate = o =>
(
    ( !filterP0 && !filterP1 )
    ||
    ( filterP0 && o.P0 )
    ||
    ( filterP1 && o.P1 )
);

var emailList =
    db.vEmailListViewForSendings
        .Where( predicate )
        .OrderBy( o => o.ID ); 
```

无论如何，这就是要点。

* * *

或者，如果您真的必须动态构建谓词，您可以使用[Joe Albahari 的 Predicate Builder](http://www.albahari.com/nutshell/predicatebuilder.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:31:32.177

您应该可以使用 Linq 动态查询来做到这一点：

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

这就是图书馆的设计目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:32:23.317

您使用 System.Linq.Dynamic [http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

```
var email = from c in db.MailListViewForSendings
            order by c.ID
            select c;

// then you chain the Linq;
email = email.Where("CategoryID=3"); 
```

使用参数：

```
var email = from c in db.MailListViewForSendings
            order by c.ID
            select c;

// then you chain the Linq;
email = email.Where("CategoryID=@0", 3); 
```

**更新**

不要使用 StringBuilder，`List<string>`而是使用，然后通过 string.Join 连接它：

```
using System;

using System.Collections.Generic;

public class Test
{
        public static void Main()
        {
             var conditions = new List<string>();
             conditions.Add("Lastname = 'Lennon'");
             conditions.Add("Firstname = 'John'");
             conditions.Add("Age = 40");

             Console.WriteLine(string.Join(" OR ", conditions.ToArray() ));
        }
} 
```

输出：

```
Lastname = 'Lennon' OR Firstname = 'John' OR Age = 40 
```

现场测试：http: [//ideone.com/EFhnA](http://ideone.com/EFhnA)

# php - fopen() / fputcsv()：错误

> ID：10396962
> 
> 赞同：2
> 
> 时间：2012-05-01T11:22:03.097
> 
> 标签：php, fopen, file-permissions, fputcsv

我正在寻找一种即时导出到 csv 的方法并遇到了这个问题。

```
 $list = array (
                   array('aaa', 'bbb', 'ccc', 'dddd'),
                   array('123', '456', '789'),
                   array('"aaa"', '"bbb"')
                   );
    $fp = fopen('path_to_file/file.csv', 'w');

    foreach ($list as $fields) {
        fputcsv($fp, $fields);
    }

    fclose($fp); 
```

它只是从 php.net 页面获取的基本代码。无论如何，在将它用于我自己的需要之前，我坚持尝试一下。但我不断收到以下错误。

```
PHP Warning:  fopen(path_to_file): failed to open stream
fputcsv() expects parameter 1 to be resource, boolean given
fclose() expects parameter 1 to be resource, boolean given 
```

我不确定为什么会出现 fopen() 错误，因为我希望它只是动态地创建一个新文件，这就是我认为它所做的吗？

假设这是文件权限错误是否安全？

此外，由于我使用来自 php.net 页面的确切代码，我假设由于 fopen() 问题而显示其他错误。

编辑。

看来我可能会更好地发布更多信息。

涉及的课程。

```
 class transData{
var $connection;
var $date;
var $data;

function __construct($date){
    $this->date = $date;
    return;
}

function getData(){ //this method just pulls the results of the query and returns them as an array
    global $connection;
    $date=$this->date;

    //get num row for each date/fromfile combo, one with the most should be the most uptodate.
    // count(fromfile) for specific date, one with most will be the most up to date, if more than one then take the one with highest appended int
    $count=array();
    $x=0;
    $mysqli_result=$connection->query("select fromfile,count(fromfile) from transdata where soldtime like '%".$date."%' group by fromfile");
    while($row=$mysqli_result->fetch_row()){
        $count[$row[0]]=$row[1];
    }
    $mysqli_result->free();
    //got the data in array, now rearrange to get one with highest count
    arsort($count);
    $fromFile=key($count);

    $temp=array();
    $x=0;
    $mysqli_result=$connection->query("select * from transdata where soldtime like '%".$date."%' and fromFile='".$fromFile."' order by soldtime desc");
    while($row=$mysqli_result->fetch_row()){
        $temp[$x]['id']=$row[0];
        $temp[$x]['departure']=$row[1];
        $temp[$x]['type']=$row[2];
        $temp[$x]['typeText']=$row[3];
        $temp[$x]['price']=$row[4];
        $temp[$x]['soldTime']=$row[5];
        $temp[$x]['dateAdded']=$row[6];
        $temp[$x]['fromFile']=$row[7];
        $x++;

    }
    $this->data = $temp;
    $mysqli_result->free();
    return;
}

function dayTotal($noDays){
    //$list=array();
    $html="<table class=\"paxdata\">";

    $html.="<tr><th>Day</th><th>Date</th><th>No. Sold</th><th>Total Price(£)</th><th></th></tr>";
    //$list=array('Day','Date','No. Sold','Total Price(£)');
    //build list of dates to work with
    $inc=0;
    $hours=array();$hours[0]=0;$hours[1]=24;$hours[2]=48;$hours[3]=72;$hours[4]=96;$hours[5]=120;$hours[6]=144;$hours[7]=168;

    while($inc!=$noDays){

        $date=date('Y/n/j',time() - 60 * 60 * $hours[$inc]);        //format for calling class transData()
        $formatDate=date('Y-m-d',time() - 60 * 60 * $hours[$inc]);  //format for displaying date in table
        $day=date('l',time() - 60 * 60 * $hours[$inc]);             //text day name

        $link=explode('/',$date);

        //call to this class to get all the data for us
        $getData = new transData($date);
        $all = $getData->getData();
        $stuff = $getData->data;        

        $x=0;$price=0;
        foreach($stuff as $v){
            $price=$price+$v['price'];
            $x++;

        }
        $totalSold=$totalSold+$x;
        $totalPrice=$totalPrice+$price;

        $checkOdd=new numeric();
        $odd=$checkOdd->is_odd($inc);
        if($odd==1){$html.="<tr class=\"odd\">";}else{$html.="<tr class=\"even\">";}
        $html.="<td width=\"100px\">".$day."</td><td width=\"100px\">".$formatDate."</td><td>".$x."</td><td>".fixedToFloat($price)."</td><td><a href=\"index.php?module=chooseDate&year=$link[0]&month=$link[1]&day=$link[2]\">More info?</a></td></tr>";
        //$list=array($day,$formatDate,$x,$price);
        $inc++;
    }
    $html.="<tr><td></td><th>Totals:</th><th>".$totalSold."</th><th>".fixedToFloat($totalPrice)."</th></tr>";
    $html.="</table>";
    echo $html;

    $list = array (
                   array('aaa', 'bbb', 'ccc', 'dddd'),
                   array('123', '456', '789'),
                   array('"aaa"', '"bbb"')
                   );
    $fp = fopen('~/file.csv', 'w');
    if ($fp != false){
        foreach ($list as $fields) {
            fputcsv($fp, $fields);
        }
    }
    fclose($fp);

}

  } 
```

通过浏览器调用。

```
$date=date('Y/n/j');

$getData = new transData($date);
$all = $getData->getData();
$getData->dayTotal(7); 
```

/var/log/system.log 中的响应

```
 PHP Notice:  Undefined variable: totalSold in /Users/me/Sites/KF/sales/specificClasses.php on line 218
   PHP Notice:  Undefined variable: totalPrice in /Users/me/Sites/KF/sales/specificClasses.php on line 219
   PHP Warning:  fopen(~/Sites/KF/file.csv): failed to open stream: No such file or directory in /Users/me/Sites/KF/sales/specificClasses.php on line 238
   PHP Warning:  fclose() expects parameter 1 to be resource, boolean given in /Users/me/Sites/KF/sales/specificClasses.php on line 244 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T11:28:17.937

**来自fopen**的 PHP.net 文档：

> **返回值**
> 
> 成功时返回文件指针资源，错误时返回 FALSE。

要么您的代码找不到“path_to_file/file.csv”，要么您的 Web 服务器（或 CLI）无权在此处写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:33:25.133

我不知道您的确切设置，但通常是权限问题。如果 fopen 无法打开或创建文件并且这是您的“布尔”问题，则 fopen 返回 FALSE。尝试在“path_to_file”文件夹上设置权限 777，然后尝试再次运行您的脚本

您还应该在尝试操作文件之前检查 fopen 的返回值，例如

```
$fp = fopen('path_to_file/file.csv', 'w');
if ($fp != false){
    foreach ($list as $fields) {
        fputcsv($fp, $fields);
    }

    fclose($fp);
} 
```

# java - MySql JDBC连接池不实时获取数据库记录

> ID：10396968
> 
> 赞同：1
> 
> 时间：2012-05-01T11:22:42.087
> 
> 标签：java, mysql, jdbc

我正在将 JDBC 连接池与 mysql 一起使用。这是我的代码

```
 private static DataSource   _ds;

    /**
    * create the data source if it doesn't exist
    */
private DataSource getDataSource() throws FileNotFoundException,
        IOException, URISyntaxException
{
    if (_ds != null)
        return _ds;

    PoolProperties p = new PoolProperties();
    p.setUrl(url);
    p.setDriverClassName(driver);
    p.setUsername(username);
    p.setTestOnBorrow(true);
    if (password != null)
    {
        p.setPassword(password);
    }
    p.setValidationQuery(validationQuery);
    p.setJdbcInterceptors(JDBC_INTERCEPTOR);
    DataSource datasource = new DataSource();
    datasource.setPoolProperties(p);
    _ds = datasource;
    return datasource;
}

/**
 * gets a connection from the JDBC pool
 * 
 * @throws SQLException
 * @throws IOException
 * @throws FileNotFoundException
 * @throws URISyntaxException 
 */
public Connection getConnection() throws SQLException,
        FileNotFoundException, IOException, URISyntaxException
{
    Connection con = getDataSource().getConnection();
    con.setAutoCommit(false);
    return con;
} 
```

每当我想使用连接时，我都会这样做：

```
con = getInstance().getConnection();
stmt = con.createStatement();
resultSet = stmt.executeQuery(selectQuery); 
```

问题是查询的结果不是实时的。也就是说，如果我更改数据库中的某些内容并提交，java 中的查询不会得到更改。如果从另一个应用程序更改数据库，也会发生同样的情况

注意：更改会在一段时间后进行，或者如果我重新启动 tomcat

我的代码有什么问题吗？无论如何要修复这个错误？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T12:59:08.760

这很可能是由 MySQL 的默认隔离级别 REPEATABLE READ 引起的。

这意味着在您结束（提交、回滚）“自己的”事务之前，您不会看到其他事务所做的更改（请记住：SELECT 已经启动了事务）

由于池中的连接永远不会关闭，因此这些事务可能不会结束。在运行选择之前尝试发出提交或回滚。

对于永久解决方案，您可以通过配置连接池（大多数都允许这样做）来更改默认隔离，通过调用`setTransactionIsolation()`连接或更改 MySQL 中的默认级别来更改事务级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T04:58:12.707

可能原因是你关闭了：

```
autocommit(autocommit=0) 
```

如果您使用默认设置，则：

```
 autocommit=1, transaction isolation level = REPEATABLE READ 
```

问题将得到解决。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-01T11:54:13.580

这是由于大多数 ide （如 eclipse ）完成的兑现。因此，您需要停止并清除所有兑现，然后尝试运行代码。

# java - 对包含自定义类的列表进行排序

> ID：10396970
> 
> 赞同：6
> 
> 时间：2012-05-01T11:22:44.627
> 
> 标签：java, list, class, sorting, arraylist

所以我目前正在为大学做一个练习，它有几个可选部分（因为我们还没有在课堂上做过这个），其中一个是使用列表而不是数组（所以它是可变大小）和另一个打印按点排序的列表（我现在会谈到）

所以，我有一个看起来像这样的 Player.java 类。

```
public class Player {
    String name;
    String password;
    int chips;
    int points;

    public Player(String n, String pw, int c, int p) {
        name = n;
        password = pw;
        chips = c;
        points = p;
    }

    public String getName() {
        return name;
    }

    public void setName(String n) {
        name = n;
    }

    public void setPW(String pw) {
        password = pw;
    }

    public String getPW() {
        return password;
    }

    public void setChips(int c) {
        chips = c;
    }

    public int getChips() {
        return chips;
    }

    public void setPoints(int p) {
        points = p;
    }

    public int getPoints() {
        return points;
    }
} 
```

很简单，然后我用这个（在另一个类中）创建一个列表：

```
List<Player> lplayer = new ArrayList<Player>(); 
```

添加玩家：

```
lplayer.add(new Player(n,pw,c,p))` 
```

最后阅读他们的统计数据：

```
public int search_Player (String n) {
    String name;
    int i = 0;
    boolean found = false;
    while ((i <= tp) && (!found)) {
        name = lplayer.get(i).getName();
        if (name.equals(n)) {
            found = true;
        }
        i++;
    }
    return (found == true) ? i-1 : -1;
}
public Player show_Player (int i) {
    return lplayer.get(i);
}
public void list_Players() {
    Collections.sort(lplayer);
    int i2;
    if (tp > 0) { // variable which contains number of total players
        for (int i = 0;i<tp;i++) {
            i2 = i+1;
            System.out.println ("\n"+i2+". "+lplayer.get(i).getName()+" [CHIPS: "+lplayer.get(i).getChips()+" - POINTS: "+lplayer.get(i).getPoints()+"]");
        }
    }
    else {
        System.out.println ("There are no players yet.");
    }
} 
```

所以这基本上是所有的代码。如您所见，我已经有一个 list_Players 函数，但它只是按照添加的顺序打印它。我需要一种按每个玩家的得分排序的方法（所以基本上是一个排名）。

如您所见，我对 java 很陌生，所以请尽量不要想出一种非常复杂的方法。

我已经搜索过它并找到了 Collections.sort(list) 之类的东西，但我想这不是我需要的。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T11:27:51.750

您可以使用`public static <T> void sort(List<T> list, Comparator<? super T> c)`重载`Collections`- 提供您需要的比较器（可以只是一个匿名类） - 一切就绪！

**编辑**： [这](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)描述了该方法的工作原理。简而言之，您将调用实现为

```
Collections.sort(list, new Comparator<Player>() {
    int compare(Player left, Player right)  {
        return left.getPoints() - right.getPoints(); // The order depends on the direction of sorting.
    }
}); 
```

而已！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T11:30:01.250

`Collections.sort(list)`绝对可以解决您的问题。这是一种对 Java 提供的集合进行排序的方法。如果你正在编写一个“真实世界”的应用程序（不是拼贴练习），这就是你这样做的方式。

为了让`Collections.sort(list)`工作，你必须实现一个接口调用[Comparaple](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)。通过实现此接口，排序将知道如何对您的元素进行排序。

但是因为它是拼贴的练习，所以这可能有点容易。如果您想（或必须）实现自己的排序算法，请先尝试对一个常见的数字列表（1、5、2、7...）进行排序。您可以为自己的类轻松扩展这种排序算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-16T11:13:08.673

一种使用 lambdas 的新方法，写起来要短得多是

```
myList.sort((obj1, obj2)->(condition)?1:-1); 
```

您可以在其中使用对象来满足您的条件，并且返回的任何大于 0 的值都表示交换（在这种情况下，如果条件返回 true）

# sql-server-2008 - 如何将一行转换为列

> ID：10396972
> 
> 赞同：1
> 
> 时间：2012-05-01T11:22:55.253
> 
> 标签：sql-server-2008

我有一个包含三列的表

```
cell
stime(contain date and time)
tchdrop 
```

我有时间`starttime`，`endtime`由用户选择。这意味着它应该是可变的。我想将行转换为列，`stime`并且`tchdrop, cell as it is .`我应该怎么做。请帮助我并给我一个适当的解决方案。如果用户选择 10 到 20 之间的时间并且用户选择日期，则它可以是任意两个日期。它可能是 10 天或 1 个月。这意味着时间是一个变量，它没有任何值。例如。如果我有这样的o/p。

```
cell             stime                   tchdrop
M            2012-04-10 00:00:00:000      10
Q            2012-04-10 01:00:00:000      20
z            2012-04-10 01:00:00:000       0
.                 .                        .
.                 .                        .
r            2012-04-20 20:00:00:000       0 
```

现在我想得到这样的结果

细胞 tchdrop 2012-04-10 2012-04-11 2012-04-12 .....................2012-04-20 M 10 0 4 10 ..... ........ 第 20 题。. ...... z 。. . . ……………………………………………………………………………………………………………………………… . . rs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:12:16.717

[在此处](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)阅读有关 PIVOT 和 UNPIVOT的信息。

[这里](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)有一个例子

# ios - 提示用户给予五星级评价

> ID：10396978
> 
> 赞同：3
> 
> 时间：2012-05-01T11:23:34.343
> 
> 标签：ios, app-store, rating

> **可能重复：**
> [为 iphone 评分](https://stackoverflow.com/questions/4650175/rating-stars-for-the-iphone)

“Draw Something”使用特殊屏幕要求您给应用评分五颗星，播放一定量后弹出。屏幕似乎没有使用通常的 AppStore 流程。它特别为您提供了五颗星或取消的选项。

有谁知道这是如何实现的？我认为您不能以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T12:28:54.500

我很确定它实际上并没有在应用程序内发布评级（这将要求他们知道用户的 iTunes 密码，而且肯定会违反 Apple 的指导方针）。

这只是巧妙的措辞，应该向用户暗示他们不能从应用程序中发布 1 星评论，即使它可能只是将他们引导到 App Store 评级页面，在那里他们可以输入他们想要的任何内容。

# java - GWT - 添加可见性真/假处理程序

> ID：10396983
> 
> 赞同：1
> 
> 时间：2012-05-01T11:23:52.917
> 
> 标签：java, events, gwt, event-handling, visibility

是否有一种简单的方法可以将处理程序/侦听器添加到小部件，以便可以检测到可见性的变化？还是我必须创建自己的系统？（这意味着创建其他小部件来包装所需的小部件并在调用 setVisible(...) 时触发事件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:34:49.003

标准小部件有自己的侦听器和处理程序。如果您的应用程序需要您自己的事件，那么您必须定义自定义的用户定义事件、侦听器和处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T08:31:30.607

overite setVisible(boolean visible) 扩展 UIObject 或使用延迟绑定

# javascript - 从 HTML5 Canvas 中清除圆形区域

> ID：10396991
> 
> 赞同：37
> 
> 时间：2012-05-01T11:24:41.397
> 
> 标签：javascript, html, canvas, html5-canvas

似乎从画布中清除区域的唯一方法是使用 clearRect() 命令 - 我需要清除一个圆圈（我正在从填充的画布中屏蔽区域，在这种特定情况下为点光源），尽管所有尝试它似乎不可能。

我尝试绘制一个 alpha 值为 0 的圆，但除非 alpha 更高（这与点相反：P），否则什么都不会出现 - 我假设因为 contex.fill() 将其绘制为添加而不是替换.

关于我如何能够（快速）清除圆圈以进行遮罩的任何建议？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-01T11:32:12.967

用于`.arc`创建圆形笔划，然后用于`.clip()`使其成为当前剪辑区域。

然后您可以使用`.clearRect()`擦除整个画布，但只有剪切区域会改变。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-01T17:33:53.323

如果您正在制作游戏或其他对性能至关重要的游戏，请查看我是如何做出这个答案的：[画布 - 在完全透明的所有区域中填充一个矩形](https://stackoverflow.com/questions/7909865/canvas-fill-a-rectangle-in-all-areas-that-are-fully-transparent/7916842#7916842)

具体来说，导致此问题的答案的编辑：http: [//jsfiddle.net/a2Age/2/](http://jsfiddle.net/a2Age/2/)

这里的巨大优势：

*   不使用路径（慢）
*   不使用剪辑（慢）
*   无需保存/恢复（因为在不清除所有状态（1）的情况下无法重置剪辑区域，这意味着您也必须使用保存/恢复）

(1) 实际上，我对此有所[抱怨，因此](https://www.w3.org/Bugs/Public/show_bug.cgi?id=14499)resetClip() 已被放入官方规范中，但浏览器实现它还需要一段时间。

# 代码

```
var ctx          = document.getElementById('canvas1').getContext('2d'),
    ambientLight = 0.1,
    intensity    = 1,
    radius       = 100,
    amb          = 'rgba(0,0,0,' + (1 - ambientLight) + ')';

addLight(ctx, intensity, amb, 200, 200, 0, 200, 200, radius); // First circle
addLight(ctx, intensity, amb, 250, 270, 0, 250, 270, radius); // Second circle
addLight(ctx, intensity, amb, 50, 370, 0, 50, 370, radius, 50); // Third!

ctx.fillStyle = amb;
ctx.globalCompositeOperation = 'xor';
ctx.fillRect(0, 0, 500, 500);

function addLight(ctx, intsy, amb, xStart, yStart, rStart, xEnd, yEnd, rEnd, xOff, yOff) {
  xOff = xOff || 0;
  yOff = yOff || 0;

  var g = ctx.createRadialGradient(xStart, yStart, rStart, xEnd, yEnd, rEnd);
  g.addColorStop(1, 'rgba(0,0,0,' + (1 - intsy) + ')');
  g.addColorStop(0, amb);
  ctx.fillStyle = g;
  ctx.fillRect(xStart - rEnd + xOff, yStart - rEnd + yOff, xEnd + rEnd, yEnd + rEnd);
}
```

```
canvas {
  border: 1px solid black;
  background-image: url('http://placekitten.com/500/500');
}
```

```
<canvas id="canvas1" width="500" height="500"></canvas>
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-05-25T20:35:57.303

鉴于要求，这些答案很好。但是假设你和我一样，你有额外的要求：

1.  您想要“清除”可能部分超出您要清除的形状边界的形状的一部分。
2.  您想查看形状下方的背景，而不是清除背景。

对于第一个要求，解决方案是使用`context.globalCompositeOperation = 'destination-out'` 蓝色是第一个形状，红色是第二个形状。如您所见，`destination-out`从第一个形状中删除部分。

[![在此处输入图像描述](../Images/a77cb549ac645db7a0a93d5a0f9f7722.png)](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html)

这是一些示例代码：

```
 explosionCanvasCtx.fillStyle = "red"
  drawCircle(explosionCanvasCtx, projectile.radius, projectile.radius, projectile.radius)
  explosionCanvasCtx.fill()

  explosionCanvasCtx.globalCompositeOperation = 'destination-out' #see https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html
  drawCircle(explosionCanvasCtx, projectile.radius + 20, projectile.radius, projectile.radius)
  explosionCanvasCtx.fill() 
```

这是潜在的问题：第二个`fill()`将清除它下面的*所有*内容，包括背景。有时您只想清除第一个形状，但仍想查看其下方的图层。

解决方案是将其绘制在临时画布上，然后`drawImage`将临时画布绘制到主画布上。代码将如下所示：

```
 diameter = projectile.radius * 2
  console.log "<canvas width='" + diameter + "' height='" + diameter + "'></canvas>"
  explosionCanvas = $("<canvas width='" + diameter + "' height='" + diameter + "'></canvas>")
  explosionCanvasCtx = explosionCanvas[0].getContext("2d")

  explosionCanvasCtx.fillStyle = "red"
  drawCircle(explosionCanvasCtx, projectile.radius, projectile.radius, projectile.radius)
  explosionCanvasCtx.fill()

  explosionCanvasCtx.globalCompositeOperation = 'destination-out' #see https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html
  durationPercent = (projectile.startDuration - projectile.duration) / projectile.startDuration
  drawCircle(explosionCanvasCtx, projectile.radius + 20, projectile.radius, projectile.radius)
  explosionCanvasCtx.fill()
  explosionCanvasCtx.globalCompositeOperation = 'source-over' #see https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html

  ctx.drawImage(explosionCanvas[0], projectile.pos.x - projectile.radius, projectile.pos.y - projectile.radius) #center 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-10-15T12:27:58.653

你有几个选择。

首先，这是一个我们将用来填充圆圈的函数。

```
var fillCircle = function(x, y, radius)
{
    context.beginPath();
    context.arc(x, y, radius, 0, 2 * Math.PI, false);
    context.fill();
}; 
```

* * *

### `clip()`

```
var clearCircle = function(x, y, radius)
{
    context.beginPath();
    context.arc(x, y, radius, 0, 2 * Math.PI, false);
    context.clip();
    context.clearRect(x - radius - 1, y - radius - 1,
                      radius * 2 + 2, radius * 2 + 2);
}; 
```

[在jsFiddle](http://jsfiddle.net/drewnoakes/DfWX7/4/)上看到这个。

* * *

### `globalCompositeOperation`

```
var clearCircle = function(x, y, radius)
{
    context.save();
    context.globalCompositeOperation = 'destination-out';
    context.beginPath();
    context.arc(x, y, radius, 0, 2 * Math.PI, false);
    context.fill();
    context.restore();
}; 
```

[在jsFiddle](http://jsfiddle.net/drewnoakes/WWH8J/)上看到这个。

* * *

两者都在屏幕上给出了预期的结果，但是在我的情况下性能还不够，因为我在每帧绘制和清除很多圆圈以获得效果。最后，我找到了一种不同的方法来获得与我想要的效果相似的效果，只需在圆弧上绘制更粗的线，但上述方法对于具有不同性能要求的人可能仍然有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T11:29:11.553

用`canvas.getContext("2d").arc(...)`背景颜色在区域上画一个圆圈？

```
var canvas = document.getElementById("myCanvas");
var context = canvas.getContext("2d");
context.arc(x, y, r, 0, 2*Math.PI, false);
context.fillStyle = "#FFFFFF";
context.fill(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-24T23:02:47.167

其中 x = 左侧位置，y = 右侧位置，r = 半径，ctx = 您的画布：

```
function clearCircle( x , y , r ){
    for( var i = 0 ; i < Math.round( Math.PI * r ) ; i++ ){
        var angle = ( i / Math.round( Math.PI * r )) * 360;
        ctx.clearRect( x , y , Math.sin( angle * ( Math.PI / 180 )) * r , Math.cos( angle * ( Math.PI / 180 )) * r );
    }
} 
```

# java - SmartGWT：ComboBox - ValueMap 未出现

> ID：10396992
> 
> 赞同：1
> 
> 时间：2012-05-01T11:24:59.797
> 
> 标签：java, combobox, smartgwt

我还是 SmartGWT 的新手，目前有一个奇怪的问题..

我正在使用 Windows XP 和 SmartGWT 3.0 版、GWT SDK 2.4.0（使用 Eclipse IDE）。

所以我的问题是，我从 SmartGWT 展示中复制了一些示例：[Styled ComboBox](http://www.smartclient.com/smartgwt/showcase/#styled_combobox_category)

```
DynamicForm df = new DynamicForm();
ComboBoxItem cb = new ComboBoxItem();
cb.setValueMap("cat", "dog", "bird");
cb.setTitle("Select:");
df.setItems(cb);
...
layout.addMember(df); 
```

当我将它作为 Web 应用程序运行时，值图不会出现。我的意思是，[v] 按钮在那里，但是当我单击它时没有任何反应..

抱歉这个菜鸟问题，感谢您的帮助！:D

* * *

更新 - 2012 年 5 月 3 日

这是我的浏览器上显示的内容：

截图已移除

这是完整的独立代码：

**HelloWorld.java**

```
package com.example.helloworld.client;

import com.google.gwt.core.client.EntryPoint;
import com.smartgwt.client.widgets.layout.VLayout;
import com.smartgwt.client.widgets.form.DynamicForm;
import com.smartgwt.client.widgets.form.fields.ComboBoxItem;

    public class HelloWorld implements EntryPoint {

        public void onModuleLoad() {

            VLayout layout = new VLayout();
            layout.setWidth100();
            layout.setHeight100();

            DynamicForm df = new DynamicForm();
            ComboBoxItem cb = new ComboBoxItem();
            cb.setTitle("Select :");
            cb.setValueMap("Cat", "Dog", "Bird");

            df.setItems(cb);
            layout.addMember(df);

            layout.draw();
        }
    } 
```

**HelloWorld.gwt.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='helloworld'>
  <!-- Inherit the core Web Toolkit stuff.                        -->
  <inherits name='com.google.gwt.user.User'/>

  <!-- Inherit the default GWT style sheet.  You can change       -->
  <!-- the theme of your GWT application by uncommenting          -->
  <!-- any one of the following lines.                            -->

  <!-- <inherits name='com.google.gwt.user.theme.standard.Standard'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> -->
  <!-- <inherits name='com.google.gwt.user.theme.dark.Dark'/>     -->

  <!-- Other module inherits                                      -->
  <inherits name="com.smartgwt.SmartGwt" />

  <!-- Specify the app entry point class.                         -->
  <entry-point class='com.example.helloworld.client.HelloWorld'/>

  <!-- Specify the paths for translatable code                    -->
  <source path='client'/>
  <source path='shared'/>
</module> 
```

在 Eclipse 中的“开发模式”选项卡上（显示链接以在浏览器上运行的选项卡），我收到以下消息：

> [INFO] [helloworld] - 您的 *.gwt.xml 模块配置禁止使用当前文档呈现模式 (document.compatMode='CSS1Compat')。
> 修改您的应用程序的主机 HTML 页面文档类型，或更新您的自定义“document.compatMode”配置属性设置。

还有一个警告：

> 以下类路径条目“C:\some-path\smartgwt-3.0\smartgwt.jar”在服务器的类路径中不可用。

* * *

更新 2 - HTML 和 CSS 文件

HTML：

```
<!doctype html>
<!-- The DOCTYPE declaration above will set the     -->
<!-- browser's rendering engine into                -->
<!-- "Standards Mode". Replacing this declaration   -->
<!-- with a "Quirks Mode" doctype is not supported. -->

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <!--                                                               -->
    <!-- Consider inlining CSS to reduce the number of requested files -->
    <!--                                                               -->
    <link type="text/css" rel="stylesheet" href="HelloWorld.css">

    <!--                                           -->
    <!-- Any title is fine                         -->
    <!--                                           -->
    <title>Web Application Starter Project</title>

    <!--                                           -->
    <!-- This script loads your compiled module.   -->
    <!-- If you add any GWT meta tags, they must   -->
    <!-- be added before this line.                -->
    <!--                                           -->
    <script type="text/javascript" language="javascript" src="helloworld/helloworld.nocache.js"></script>
  </head>

  <!--                                           -->
  <!-- The body can have arbitrary html, or      -->
  <!-- you can leave the body empty if you want  -->
  <!-- to create a completely dynamic UI.        -->
  <!--                                           -->
  <body>

    <!-- OPTIONAL: include this if you want history support -->
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>

    <!-- RECOMMENDED if your web app will not function without JavaScript enabled -->
    <noscript>
      <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
      </div>
    </noscript>

  </body>
</html> 
```

和 CSS 文件：

```
/** Add css rules here for your application. */

/** Example rules used by the template application (remove for your app) */
h1 {
  font-size: 2em;
  font-weight: bold;
  color: #777777;
  margin: 40px 0px 70px;
  text-align: center;
}

.sendButton {
  display: block;
  font-size: 16pt;
}

/** Most GWT widgets already have a style name defined */
.gwt-DialogBox {
  width: 400px;
}

.dialogVPanel {
  margin: 5px;
}

.serverResponseLabelError {
  color: red;
}

/** Set ids using widget.getElement().setId("idOfElement") */
#closeButton {
  margin: 15px 6px 6px;
} 
```

* * *

重要更新

我忘了告诉你，我目前正在使用 Google Chrome(18.0.1025.168) 进行调试/测试构建。当我在 Firefox 上运行它时，它运行正常！

我注意到这个[线程](http://forums.smartclient.com/showthread.php?t=8159#aChrome)有点晚了。所以这是目前已知的错误。

**结论：不要将谷歌浏览器用于 GWT / smartGWT 开发模式（目前）。**

谢谢您的帮助！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:45:40.243

我忘了告诉你，我目前正在使用 Google Chrome(18.0.1025.168) 进行调试/测试构建。当我在 Firefox 上运行它时，它运行正常！

我注意到这个[线程（智能客户端论坛）](http://forums.smartclient.com/showthread.php?t=8159#aChrome)有点晚了。所以这是一个已知的错误。

**结论：不要将谷歌浏览器用于 GWT / smartGWT 开发模式（目前）。**

谢谢您的帮助！:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:34:39.680

ComboBox 不是 SmartGWT。它来自哪里？

此代码按预期工作：

```
DynamicForm df = new DynamicForm();
ComboBoxItem cb = new ComboBoxItem();
cb.setValueMap("cat", "dog", "bird");
cb.setTitle("Select");
df.setItems(cb);

HLayout layout = new HLayout();
layout.addMember(df);
layout.draw(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T16:26:26.000

如果您处于调试模式，您将永远看不到此 selectItem 或组合框的内容，但如果您使用键盘向下选择，您将看到内容。您应该处于“生产”模式才能正确查看所有内容

是chrome的问题，如果你使用firefox你会看到内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T03:57:21.257

```
DynamicForm df = new DynamicForm();
ComboBox cb = new ComboBox();
cb.setValueMap("cat", "dog", "bird");
cb.setTitle("Select:");
//other fields
df.setFields(cb); // Use this to add fields
layout.addMember(df); 
```

看看[展示柜](http://www.smartclient.com/smartgwt/showcase/#form_controls_various)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T17:25:26.997

尝试这个..

```
 DynamicForm df = new DynamicForm();
    ComboBox cb = new ComboBox();
    Map<String,String> valuesMap = new HashMap<String,String>();
    valuesMap.put("cat","cat");
    valuesMap.put("dog","dog");
    valuesMap.put("bird","bird");
    cb.setValueMap(valuesMap);
    cb.setTitle("Select:");
    df.setItems(cb);
    ...
    layout.addMember(df); 
```

# android - 对话框中 SurfaceView 的布局故障

> ID：10396998
> 
> 赞同：2
> 
> 时间：2012-05-01T11:25:31.123
> 
> 标签：android, dialog, surfaceview

我有一个子类表面视图，我想将其作为视图添加到自定义对话框中。问题是，surfaceview 和对话框不能很好地协同工作：

1.  surfaceview 的绘制超出了对话框的范围。
2.  当我点击后退按钮时，首先表面视图消失，留下一个丑陋的对话框框架和一些覆盖按钮短暂可见，然后对话框以动画风格消失。

表面视图的布局是否可能与对话框不兼容，或者对话框的布局与活动的工作方式不同？我无法掌握这里的真正问题......